mstrSurveyVisPropsEditorImplScript=true;mstrSurveyVisPropsEditorImpl.prototype=new mstrBoneImpl();mstrSurveyVisPropsEditorImpl.prototype.onload=function(){try{var visProps=this.visProps;this.initBone();if(!this.valid){return ;}this.selectedElems={};this.showRequired=(visProps&&visProps.req)?parseInt(visProps.req,10)>0:true;this.sectionEnabled=(visProps&&visProps.sec)?parseInt(visProps.sec,10)>0:false;this.groupEnabled=(visProps&&visProps.grp)?parseInt(visProps.grp,10)>0:false;this.tableEnabled=(visProps&&visProps.tbl)?parseInt(visProps.tbl,10)>0:false;this.updateTableCheckbox(this.groupEnabled,this.tableEnabled);this.adjustSelectedItems();this.updateTable();}catch(err){microstrategy.errors.log(err);}};mstrSurveyVisPropsEditorImpl.prototype.updateSelectors=function updateSelectors(visProp){var elem=document.getElementById("visSurvey_SemanticsTable"),sles=this.selectedElems,sle,selector=microstrategy.findChildrenWithAtt(elem,"select","name",visProp)[0],idx=selector&&selector.selectedIndex;if(selector&&idx>=0&&sles[idx]&&(sles[idx]!==selector)){sle=sles[idx];sle.selectedIndex=0;sles[idx]=selector;}};mstrSurveyVisPropsEditorImpl.prototype.adjustSelectedItems=function adjustSelectedItems(){var elem=document.getElementById("visSurvey_SemanticsTable"),sles=this.selectedElems,selectors=microstrategy.findChildrenWithAtt(elem,"select","visprop")||[],sel,i,len,idx;for(i=0,len=selectors.length;i<len;i++){sel=selectors[i];idx=sel.selectedIndex;if(idx>0){if(!sles[idx]){sles[idx]=sel;}else{sel.selectedIndex=0;}}}};mstrSurveyVisPropsEditorImpl.prototype.clearSelectedSelector=function clearSelectedSelectors(sels){if(!sels||!sels.length){return ;}var sel,elem=document.getElementById("visSurvey_SemanticsTable"),selectors=microstrategy.findChildrenWithAtt(elem,"select","visprop")||[];for(var i=0,len=sels.length;i<len;i++){sel=selectors[sels[i]];if(sel&&sel.selectedIndex){delete this.selectedElems[sel.selectedIndex];sel.selectedIndex=0;}}};mstrSurveyVisPropsEditorImpl.prototype.updateTable=function updateTable(){var tbl=this.table,surveyList=this.surveyElems,i,len,show,sels=[];if(!tbl){tbl=this.table=document.getElementById("visSurvey_SemanticsTable");}if(tbl){for(i=0,len=surveyList.length;i<len;i++){show=this.showRequired?(surveyList[i].dft>0):(surveyList[i].dft>=0);if(!show&&this.sectionEnabled){show=this.showRequired?(surveyList[i].sec>0):(surveyList[i].sec>=0);}if(!show&&this.groupEnabled){show=this.showRequired?(surveyList[i].grp>0):(surveyList[i].grp>=0);}if(!show&&this.tableEnabled){show=this.showRequired?(surveyList[i].tbl>0):(surveyList[i].tbl>=0);}tbl.rows[i].style.display=show?"table-row":"none";tbl.rows[i].cells[1].innerHTML=((this.showRequired&&show)||(surveyList[i].dft>0)||(this.sectionEnabled&&(surveyList[i].sec>0))||(this.groupEnabled&&(surveyList[i].grp>0))||(this.tableEnabled&&(surveyList[i].tbl>0)))?"yes":"";}}};mstrSurveyVisPropsEditorImpl.prototype.enableSection=function enableSection(checked){this.sectionEnabled=checked;this.updateTable();if(!this.sectionEnabled){var surveyList=this.surveyElems,clearList=[];for(i=0,len=surveyList.length;i<len;i++){if(surveyList[i].sec>0&&surveyList[i].dft===-1){clearList.push(i);}}this.clearSelectedSelector(clearList);}};mstrSurveyVisPropsEditorImpl.prototype.updateTableCheckbox=function updateTableCheckbox(grpEnabled,tblEnabled){var tbl=microstrategy.findChildrenWithAtt(this.elem,"input","name","tbl")[0];if(grpEnabled){tbl.disabled=false;tbl.checked=!!tblEnabled;}else{tbl.disabled=true;this.tableEnabled=false;tbl.checked=false;}};mstrSurveyVisPropsEditorImpl.prototype.enableGroup=function enableGroup(checked){this.groupEnabled=checked;this.updateTableCheckbox(checked);this.updateTable();if(!this.groupEnabled){var surveyList=this.surveyElems,clearList=[];for(i=0,len=surveyList.length;i<len;i++){if((surveyList[i].grp>0||surveyList[i].tbl>0)&&surveyList[i].dft===-1){clearList.push(i);}}this.clearSelectedSelector(clearList);}};mstrSurveyVisPropsEditorImpl.prototype.enableTable=function enableTable(checked){this.tableEnabled=checked;this.updateTable();if(!this.tableEnabled){var surveyList=this.surveyElems,clearList=[];for(i=0,len=surveyList.length;i<len;i++){if(surveyList[i].tbl>0&&surveyList[i].grp!==1){clearList.push(i);}}this.clearSelectedSelector(clearList);}};mstrSurveyVisPropsEditorImpl.prototype.showRequire=function showRequire(checked){this.showRequired=checked;this.updateTable();};mstrSurveyVisPropsEditorImpl.prototype.validateSelector=function validateSelector(visProp,semantics){var elem=this.elem,selector=microstrategy.findChildrenWithAtt(elem,"select","name",visProp)[0],idx=selector&&selector.selectedIndex;var i=selector.parentNode.parentNode.rowIndex,surveyProp=i&&this.surveyElems[i];if((surveyProp&&(surveyProp.dft>0)||(this.sectionEnabled&&surveyProp.sec>0)||(this.groupEnabled&&surveyProp.grp>0)||(this.tableEnabled&&surveyProp.tbl>0))&&(idx<=0)){return microstrategy.descriptors.getDescriptor("10037").replace("###",semantics);}else{return true;}};function mstrSurveyVisPropsEditorImpl(id){this.inherits=mstrBoneImpl;this.inherits(id);this.id=id;this.inherits=null;this.path="microstrategy.bone('"+id+"')";return this;}