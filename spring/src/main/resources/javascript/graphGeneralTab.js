mstrGraphGeneralTabImplScript=true;mstrGraphGeneralTabImpl.prototype=new mstrTabImpl();mstrGraphGeneralTabImpl.prototype.initializing=false;mstrGraphGeneralTabImpl.prototype.onload=function(){try{this.initializing=true;this.initEditor();this.initializing=false;}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.onpostload=function(){try{mstrBoneImpl.prototype.onpostload.call(this);this.initializing=true;this.initSettings();this.initializing=false;}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.initSettings=function(){try{this.settings=new Array();var props=new Array("major","minor","categories","series","useCurvedLines","useFontAntiAliasing","roundedEffect");for(var i=0;i<props.length;i++){var elem=document.getElementById(this.id+props[i]);if(elem){this.settings.push(elem);}}this.adjustMajorMinorOptions();this.updateCheck(document.getElementById(this.id+"useCurvedLines"));return true;}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.updateText=function(obj,skipCmdValue){try{mstrTabImpl.prototype.updateText.call(this,obj,skipCmdValue);if(obj){var cmdId=obj.getAttribute(microstrategy.HTMLATTR_CMD_ID);if(cmdId=="series"){microstrategy.eventManager.notifyOrphanBones("onseriesvaluechange",obj.value);}}}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.adjustMajorMinorOptions=function(){try{var majorValue=document.getElementById(this.id+"major").getAttribute(microstrategy.HTMLATTR_CMD_VALUE);if(majorValue==null){majorValue=this.getAppliesTo().commands.queryState("major");}var majorText=this.getMajorTypeName(majorValue);if(majorText!=null&&majorText.length>0){this.updateDropdown(document.getElementById(this.id+"major"),majorText,majorValue,true);}this.adjustSettings(majorValue);if(majorValue==null||majorValue=="0"){document.getElementById(this.id+"minor").className="mstrPulldowndisabled";}else{var minorValue=document.getElementById(this.id+"minor").getAttribute(microstrategy.HTMLATTR_CMD_VALUE);if(minorValue==null){minorValue=this.getAppliesTo().commands.queryState("minor");}var minorText=this.getMinorTypeName(minorValue);this.updateDropdown(document.getElementById(this.id+"minor"),minorText,minorValue,true);}}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.getMajorTypeName=function(value){try{var picker=document.getElementById(this.id+"majorGraphPicker");var majorTypes=picker.getElementsByTagName("span");var text="";var selected="pkr"+value;for(var i=0;i<majorTypes.length;i++){var aType=majorTypes[i];if(aType.getAttribute("id")==selected){text=aType.innerHTML;break;}}text=text+"&nbsp;&nbsp;&nbsp;";return text;}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.adjustSettings=function(major){try{var curvedSupported=(major&51)>0;var curved=document.getElementById(this.id+"useCurvedLines");if(curved){if(curvedSupported){this.enableOptionAndLabel(curved);}else{this.disableOptionAndLabel(curved);}}}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.onmajortypechange=function(newValue,skipUpdateMinorType){try{var text=this.getMajorTypeName(newValue);this.updateDropdown(document.getElementById(this.id+"major"),text,newValue);this.adjustSettings(newValue);document.getElementById(this.id+"minor").className="mstrPulldown";if(typeof skipUpdateMinorType=="undefined"||!skipUpdateMinorType){microstrategy.eventManager.notifyOrphanBones("onminortypechange","1");}}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.getMinorTypeName=function(value){try{var majorValue=document.getElementById(this.id+"major").getAttribute(microstrategy.HTMLATTR_CMD_VALUE);if(majorValue==null){majorValue=this.getAppliesTo().commands.queryState("major");}var picker=document.getElementById(this.id+"minorGraphPicker");var minorTypes=picker.getElementsByTagName("span");var text="";for(var i=0;i<minorTypes.length;i++){var aType=minorTypes[i];if(aType.getAttribute("id")=="pkr"+value){var filter=aType.getAttribute(microstrategy.HTMLATTR_FILTER_VALUE);var filterComparison=aType.getAttribute(microstrategy.HTMLATTR_FILTER_COMPARISON);visible=microstrategy.isValueInFilter(majorValue,filter,filterComparison);if(visible){text=aType.innerHTML;break;}}}text=text+"&nbsp;&nbsp;&nbsp;";return text;}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.onminortypechange=function(newValue){try{var text=this.getMinorTypeName(newValue);this.updateDropdown(document.getElementById(this.id+"minor"),text,newValue);var majorValue=document.getElementById(this.id+"major").getAttribute(microstrategy.HTMLATTR_CMD_VALUE);if(majorValue==null){majorValue=this.getAppliesTo().commands.queryState("major");}this.onmajortypechange(majorValue,true);}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.restoreEachSelection=function(field,cmdId,value){try{if(cmdId=="major"){microstrategy.eventManager.notifyOrphanBones("onmajortypechange",value,true);}else{if(cmdId=="minor"){microstrategy.eventManager.notifyOrphanBones("onminortypechange",value);}else{if(cmdId=="series"||cmdId=="categories"){field.value=value;}mstrTabImpl.prototype.restoreEachSelection.call(this,field,cmdId,value);}}}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.updateRadioButton=function(field,value){try{var objs=document.getElementsByName(this.id+field.getAttribute(microstrategy.HTMLATTR_CMD_ID));for(var i=0;i<objs.length;i++){if(objs[i]!=null&&objs[i].value==value){objs[i].checked=true;this.updateCheck(objs[i]);break;}}}catch(err){microstrategy.errors.log(err);return false;}};mstrGraphGeneralTabImpl.prototype.updateCheck=function(obj){try{if(obj){var cmdId=obj.getAttribute(microstrategy.HTMLATTR_CMD_ID);switch(cmdId){case"useCurvedLines":microstrategy.eventManager.notifyOrphanBones("onusecurvedlineschange",(obj.checked)?"1":"0");case"showSubtotals":case"useFontAntiAliasing":var newValue=(obj.checked)?"1":"0";obj.setAttribute(microstrategy.HTMLATTR_CMD_VALUE,newValue);break;case"roundedEffect":var newValue=(obj.checked)?"1":"0";obj.setAttribute(microstrategy.HTMLATTR_CMD_VALUE,newValue);microstrategy.eventManager.notifyOrphanBones("onroundedeffectchange",newValue);break;}}}catch(err){microstrategy.errors.log(err);}return false;};mstrGraphGeneralTabImpl.prototype.execPicker=function(picker,obj){try{var cmdId=picker.commandId;var newValue=obj.getAttribute("id").slice(3);switch(cmdId){case"major":microstrategy.eventManager.notifyOrphanBones("onmajortypechange",newValue);break;case"minor":microstrategy.eventManager.notifyOrphanBones("onminortypechange",newValue);break;}return true;}catch(err){microstrategy.errors.log(err);}return false;};mstrGraphGeneralTabImpl.prototype.selectPickerElement=function(picker){try{var cmdId=picker.commandId;var at=this.getAppliesTo();var selected=document.getElementById(this.id+cmdId).getAttribute(microstrategy.HTMLATTR_CMD_VALUE);if(selected==null){selected=this.getAppliesTo().commands.queryState(cmdId);}var filterValue;if(cmdId=="major"){filterValue=at.commands.queryState("allowedGraphTypes");}else{if(cmdId=="minor"){filterValue=document.getElementById(this.id+"major").getAttribute(microstrategy.HTMLATTR_CMD_VALUE);if(filterValue==null){filterValue=this.getAppliesTo().commands.queryState("major");}}}mstrPickerImpl.setPickerValues(selected,picker,filterValue);return true;}catch(err){microstrategy.errors.log(err);}};mstrGraphGeneralTabImpl.prototype.applyFormatChanges=function(at,bulkChanges){try{var formatBulkArray=bulkChanges;var formatGraphStylesBulk=null;var formatGraphWindowSizeBulk=null;var formatGraphObjectBulk=null;for(var counter=0;counter<this.settings.length;counter++){var aSetting=this.settings[counter];var cmdId=aSetting.getAttribute(microstrategy.HTMLATTR_CMD_ID);var cmdVl=aSetting.getAttribute(microstrategy.HTMLATTR_CMD_VALUE);if(cmdVl){switch(cmdId){case"major":case"minor":case"useFontAntiAliasing":case"roundedEffect":if(formatGraphStylesBulk==null){formatGraphStylesBulk=new Array();}formatGraphStylesBulk.push(new Array(cmdId,cmdVl));break;case"useCurvedLines":if(!aSetting.disabled){if(formatGraphStylesBulk==null){formatGraphStylesBulk=new Array();}if(cmdVl=="1"){cmdVl="true";}else{cmdVl="false";}formatGraphStylesBulk.push(new Array(cmdId,cmdVl));}break;case"categories":case"series":if(formatGraphWindowSizeBulk==null){formatGraphWindowSizeBulk=new Array();}formatGraphWindowSizeBulk.push(new Array(cmdId,cmdVl));break;}}}var auxArray=null;if(formatGraphStylesBulk!=null){auxArray=new Array("formatGraphPropertyBulk",formatGraphStylesBulk);formatBulkArray.push(auxArray);}if(formatGraphWindowSizeBulk!=null){auxArray=new Array("formatGraphWindowSizeBulk",formatGraphWindowSizeBulk);formatBulkArray.push(auxArray);}return formatBulkArray;}catch(err){microstrategy.errors.log(err);return bulkChanges;}};mstrGraphGeneralTabImpl.prototype.updateDropdown=function(obj,newText,newValue,skipCmdValue){try{if(obj){var spans=obj.getElementsByTagName("span");if(spans.length>0){spans[0].innerHTML=newText;}else{obj.innerHTML=newText;}if(typeof (skipCmdValue)=="undefined"||!skipCmdValue){obj.setAttribute(microstrategy.HTMLATTR_CMD_VALUE,newValue);}}}catch(err){microstrategy.errors.log(err);return false;}};function mstrGraphGeneralTabImpl(id){this.inherits=mstrTabImpl;this.inherits(id);this.inherits=null;return this;}