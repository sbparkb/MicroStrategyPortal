mstrUserAddressListImplScript=true;mstrUserAddressListImpl.prototype=new mstrEditorImpl();mstrUserAddressListImpl.prototype.initializing=false;mstrUserAddressListImpl.IS_DEV_FIXED="fixed";mstrUserAddressListImpl.IS_DEV_HAS_PATH="hasPath";mstrUserAddressListImpl.prototype.onload=function(){try{this.initializing=true;this.initEditor();this.initSettings();this.initializing=false;}catch(err){microstrategy.errors.log(err);return false;}};mstrUserAddressListImpl.prototype.initSettings=function(){try{if(!this.isEditMode){var buttons=microstrategy.findChildrenWithAtt(this.elem,"input","id",mstrUpdateManager.NEW_ADDRESS);if(buttons!=null){for(var i=0;i<buttons.length;i++){buttons[i].onclick=new Function("e","return microstrategy.bone('"+this.id+"').submitNew(this);");}}}else{var devs=document.getElementById("deviceID");if(devs){devs.onchange=new Function("e","return microstrategy.bone('"+this.id+"').onDeviceChange(this);");this.onDeviceChange(devs);}}}catch(err){microstrategy.errors.log(err);return false;}};mstrUserAddressListImpl.prototype.deleteAddress=function(id){try{var action=microstrategy.updateManager.createActionObject(this.elem,mstrUpdateManager.DELETE_ADDRESS,this.beanPath,["64009"],[id]);microstrategy.updateManager.add([action]);microstrategy.updateManager.flushAndSubmitChanges();}catch(err){microstrategy.errors.log(err);return false;}};mstrUserAddressListImpl.prototype.requestDelete=function(name,id,confirm){try{if(confirm){var msg=microstrategy.descriptors.getDescriptor("6173");msg=msg.replace("##",name);showMessage({contents:msg,elements:microstrategy.OK_BUTTON+microstrategy.CANCEL_BUTTON,okEval:'microstrategy.bone("'+this.id+'").deleteAddress("'+id+'");',type:mstrMsgBoxImpl.MSG_WARNING});}else{this.deleteAddress(id);}}catch(err){microstrategy.errors.log(err);return false;}};mstrUserAddressListImpl.prototype.submitNew=function(oBtn){try{var type=oBtn.getAttribute("device");var action=microstrategy.updateManager.createActionObject(this.elem,mstrUpdateManager.NEW_ADDRESS,this.beanPath,["64011"],[type]);microstrategy.updateManager.add([action]);}catch(err){microstrategy.errors.log(err);return false;}};mstrUserAddressListImpl.prototype.onDeviceChange=function(devs){var idx=devs?devs.selectedIndex:null;var dev=(idx>=0)?devs.options[idx]:null;var addrV=document.getElementById("addressValue");if(dev&&addrV){var fixed=dev.getAttribute(mstrUserAddressListImpl.IS_DEV_FIXED);if(fixed){if(fixed.toLowerCase()=="true"){addrV.disabled=true;addrV.value="";}else{addrV.disabled=false;}}}};mstrUserAddressListImpl.prototype.onSave=function(btn,delMode){var aForm=microstrategy.findAncestorWithTag(btn,"FORM");if(aForm&&mstrEditorImpl&&mstrEditorImpl.validateInputs(aForm,true)){var tr=microstrategy.findAncestorWithTag(btn,"TR");if(tr){var fn=microstrategy.findChildWithAtt;var n=fn(tr,"INPUT","ID","dispName");var v=fn(tr,"INPUT","ID","addressValue");var dev=fn(tr,"SELECT","ID","deviceID");if(n&&v&&dev){if(this.addrList&&this.addrList[delMode]){for(var name in this.addrList[delMode]){var addr=this.addrList[delMode][name];if(name==n.value){showMessage({contents:microstrategy.descriptors.getDescriptor(2316),elements:microstrategy.OK_BUTTON,type:mstrMsgBoxImpl.MSG_ERROR});return false;}if(((!addr.v&&!v.value)||(addr.v==v.value))&&addr.dev==dev.value){showMessage({contents:microstrategy.descriptors.getDescriptor(5856),elements:microstrategy.OK_BUTTON,type:mstrMsgBoxImpl.MSG_ERROR});return false;}}}var hasPath=dev.options[dev.selectedIndex].getAttribute(mstrUserAddressListImpl.IS_DEV_HAS_PATH);if(hasPath.toLowerCase()=="false"&&(!v.value||trim(v.value).length==0)){showMessage({contents:microstrategy.descriptors.getDescriptor(2324),elements:microstrategy.OK_BUTTON,type:mstrMsgBoxImpl.MSG_ERROR});return false;}}}return true;}return false;};function mstrUserAddressListImpl(id){this.inherits=mstrEditorImpl;this.inherits(id);delete this.inherits;return this;}