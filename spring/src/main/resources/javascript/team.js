(function(){function collide(node){var r=node.radius+16,nx1=node.x-r,nx2=node.x+r,ny1=node.y-r,ny2=node.y+r;return function(quad,x1,y1,x2,y2){if(quad.point&&(quad.point!==node)){var x=node.x-quad.point.x,y=node.y-quad.point.y,l=Math.sqrt(x*x+y*y),r=node.radius+quad.point.radius;if(l<r){l=(l-r)/l*0.5;node.x-=x*=l;node.y-=y*=l;quad.point.x+=x;quad.point.y+=y;}}return x1>nx2||x2<nx1||y1>ny2||y2<ny1;};}function run(){if(!d3){return ;}var toggleContainer=function toggleContainer(show){d3.select(".mstrVersionInfo").style("display",show?"none":"block");d3.select(".cntnr").style("display",show?"block":"none");},showPeople=function showPeople(people){d3.select(".cntnr").append("p").attr("class","people-list").selectAll(".people").data(people).enter().append("div").attr("class","people").text(function(d){return d;});d3.select(".mstr-logo").transition().duration(1000).attr("x",100);d3.select(".people-list").transition().duration(20000).style("top",function(){return -d3.select(".people-list").node().getBoundingClientRect().height+"px";}).ease("linear").each("end",function(){d3.select(".mstr-logo").transition().duration(500).style("opacity",0).each("end",function(){toggleContainer(false);});});};var w=640,h=480,nodes=d3.range(200).map(function(){return{radius:Math.random()*12+4};}),color=d3.scale.category20(),people=["The Team:","Jessica Aguero","Massimo Alegria","Nikhil Baradwaj","Ilia Baskin","Melonie Brown","Venkata Cheekoti","Jian Chen","Yanping Chen","Yuwen Chen","Zhili Cheng","Edward Curley","Shrimohan Damani","Eric Davis","Raul de Leon","Luis Dector","Lei Dong","Lisha Dong","Daniel Esparza","Gabriel Espinola","Doug Everhart","Siyuan Fan","Bin Gan","Arturo Gay","Vaibhav Garg","Jamshed Ghazi","Sonia Glenn","Yuan Gu","Cherry Guo","Xiaolong Guan","Mark Haugen","Dongliang He","Luis Hernandez","Douglas Hill","Bo Hu","Haijun Hu","Ying Huang","Cherile Jacob","Yongli Jiang","Yunfei Jiang","Ling Jing","Irakli Kakushadze","Swati Khandelwal","Satyanarayana Kondle","Howie Lee","Gouzheng Li","Guo Li","Muyu Li","Xiaoli Li","Yanfeng Li","Yi Li","Wei Lin","Dongping Liang","Linglu Liu","Ying Liu","Zhiqiang Lu","Rong Mai","Olivier Marchal","Jialong Mi","Chang Nie","Jie Peng","Junjuan Qian","Yong Qiu","Alejandro Olvera","Laura Porcelli","Grzegorz Rygula","Nikhil Shah","Chenren Shao","Tao Shen","Huihong Shi","Qing Shu","Kian Siaw","Damandeep Singh","Andy Smith","Hanzao Sun","Fang Suo","Lin Tang","Jeni Vitarello","Ellen Wang","Shuai Wang","Wei Wang","Wenhua Wang","Yintian Wang","Yuankai Wang","Peng Wu","William Wu","Menglu Xia","Yang Xia","Fengling Xu","Liqun Xu","Qiuchen Xu","Ruiqing Xu","Kunpeng Yan","Haitao Yang","Huanling Yang","Xioayin Yang","Haowen You","Jiande Yu","George Zaimes","Minjie Zha","Anny Zhang","Bing Zhang","Hongchao Zhang","Minglu Zhang","Jacky Zhang","Judy Zhang","Yunfeng Zhang","Chao Zheng","Jiaxiang Zheng","Chenyunhai Zhu","Hui Zhu","Qing Zhu","Jiang Zhou","Qian Zhou","Wei Zhou","Haizhan Zhuo"];var force=d3.layout.force().gravity(0.05).charge(function(d,i){return i?0:-2000;}).nodes(nodes).size([w,h]),root=nodes[0];root.radius=0;root.fixed=true;force.start();toggleContainer(true);var svg=d3.select(".cntnr").append("svg:svg").attr("width",w).attr("height",h);svg.append("defs").attr("id","def").append("pattern").attr("id","logo").attr("x",0).attr("y",0).attr("width",30).attr("height",30).append("image").attr("x",0).attr("y",0).attr("width",30).attr("height",30).attr("xlink:href","../style/mstr/images/logo_small.png");svg.append("circle").attr("cx",320).attr("cy",180).attr("r",15).style("fill","#ffffff");svg.selectAll(".circle").data(nodes.slice(1)).enter().append("svg:circle").attr("class",function(d,i){return i===0?"circle logo":"circle";}).attr("r",function(d,i){if(i===0){d.radius=17;}return d.radius-2;}).style("fill",function(d,i){return i===0?"url(#logo)":color(i);}).style("stroke","transparent");svg.append("image").attr("x",213).attr("y",200).attr("width",213).attr("height",35).attr("class","mstr-logo").attr("xlink:href","../style/mstr/images/microstrategy_logo.png");force.on("tick",function(){var q=d3.geom.quadtree(nodes),i=0,n=nodes.length,finishVisualization=function finishVisualization(){showPeople(people);svg.select(".logo").attr("cx",320).attr("cy",180);svg.selectAll("circle").transition().duration(2000).style("opacity",0).attr("cx",function(){return 320+320*Math.cos(Math.random()*Math.PI);}).attr("cy",function(){return 240+320*Math.cos(Math.random()*Math.PI);});};while(++i<n){q.visit(collide(nodes[i]));if(i===1){if(Math.abs(nodes[1].x-320)<10&&Math.abs(nodes[1].y-180)<10){svg.on("mousemove",null);force.on("tick",null);window.setTimeout(finishVisualization,0);break;}}}svg.selectAll(".circle").attr("cx",function(d){return d.x;}).attr("cy",function(d){return d.y;});});svg.on("mousemove",function(){var p1=d3.mouse(this);root.px=p1[0];root.py=p1[1];force.resume();d3.select(".trigger").on("click",null);});}if(d3){d3.select("body").append("div").attr("class","trigger").on("click",function(){run();});}}());