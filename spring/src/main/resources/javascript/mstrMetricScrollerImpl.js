mstrMetricScrollerImplScript=true;mstrMetricScrollerImpl.prototype=new mstrScrollerImpl();mstrMetricScrollerImpl.prototype.onload=function(){try{mstrBoneImpl.prototype.onload.call(this);if(this.elem){this.initComponents();if(!this.enabled){this.enableScroller(false);}this.moveScroller();if(this.maxUnits>1&&!this.noValues){for(var i=0;i<this.scrollerHandles.length;i++){this.scrollerHandles[i].onmousedown=new Function("e","return microstrategy.bone('"+this.id+"').onmousedown(e)");this.scrollerHandles[i].onmouseover=new Function("e","return microstrategy.bone('"+this.id+"').onmouseover(e)");this.scrollerHandles[i].onmouseout=new Function("e","return microstrategy.bone('"+this.id+"').timedonmouseout(e)");}this.initTooltip();}var f=mstr.Enum.Nodes.FUNCTION;if(this.func==f.GREATERTHAN||this.func==f.GREATERTHANEQUALS||this.unset||this.func==f.ISNULL||this.func==f.ISNOTNULL||this.func==f.IN||this.func==f.NOTIN){this.rightUnset=true;}if(this.func==f.LESSTHAN||this.func==f.LESSTHANEQUALS||this.unset||this.func==f.ISNULL||this.func==f.ISNOTNULL||this.func==f.IN||this.func==f.NOTIN){this.leftUnset=true;}this.buildSummary();}}catch(err){microstrategy.errors.log(err);return false;}};mstrMetricScrollerImpl.prototype.initTooltip=function(){try{this.tooltip=document.getElementById("metric-scroller-tooltip");if(!this.tooltip){this.tooltip=document.createElement("span");this.tooltip.className="scroller-tooltip  mstrMetricSlider";this.tooltip.id="metric-scroller-tooltip";this.tooltip.appendChild(document.createElement("span"));}document.body.appendChild(this.tooltip);}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.getSummaryDescriptors=function(){if(!this.summaryDescriptors){var desc=microstrategy.descriptors;this.summaryDescriptors={db:desc.getDescriptor(8153),dnb:desc.getDescriptor(8154),din:desc.getDescriptor(587),dnin:desc.getDescriptor(2204),dnull:desc.getDescriptor(2203),dnnull:desc.getDescriptor(2203),req:desc.getDescriptor(8155),rneq:desc.getDescriptor(8156).replace("<>",String.fromCharCode(8800)),rexb:desc.getDescriptor(8157),rext:desc.getDescriptor(8158),rb:desc.getDescriptor(8159),rt:desc.getDescriptor(8160),rbt:desc.getDescriptor(8161),rnbt:desc.getDescriptor(8162),rin:desc.getDescriptor(8163),rnin:desc.getDescriptor(8164),peq:desc.getDescriptor(8165),pneq:desc.getDescriptor(8166).replace("<>",String.fromCharCode(8800)),pexb:desc.getDescriptor(8167),pext:desc.getDescriptor(8168),pb:desc.getDescriptor(7576),pt:desc.getDescriptor(7575),pbt:desc.getDescriptor(8153),pnbt:desc.getDescriptor(8154),pin:desc.getDescriptor(8169),pnin:desc.getDescriptor(8170)};}return this.summaryDescriptors;};mstrMetricScrollerImpl.prototype.buildSummary=function(){try{if(!this.unset&&this.summary){var tb=(this.targetBone&&microstrategy.bone(this.targetBone)),f=tb?tb.func:this.func,ft=this.funcType,fte=mstr.Enum.Nodes.FUNCTIONTYPE,fe=mstr.Enum.Nodes.FUNCTION,fmrpe=mstr.Enum.Nodes.MRPFUNCTION,txt="",left=this.dataLabels[this.startUnit],right=this.dataLabels[this.endUnit]?this.dataLabels[this.endUnit]:this.dataLabels[this.endUnit-1],sep=mstrRWMetricQualificationStyleHelper.EVENT_ITEM_SEPARATOR,fl=this.fleft?this.fleft:tb.fleft,fr=this.fright?this.fright:tb.fright,s=this.getSummaryDescriptors();switch(ft){case fte.DEFAULT:switch(f){case fe.EQUALS:txt="= "+fl;break;case fe.NOTEQUALS:txt=String.fromCharCode(8800)+" "+fl;break;case fe.GREATERTHAN:txt="> "+fr;break;case fe.GREATERTHANEQUALS:txt=String.fromCharCode(8805)+" "+fl;break;case fe.LESSTHAN:txt="< "+fl;break;case fe.LESSTHANEQUALS:txt=String.fromCharCode(8804)+" "+fr;break;case fe.BETWEEN:txt=s.db.replace("##",fl).replace("###",fr);break;case fe.NOTBETWEEN:txt=s.dnb.replace("##",fl).replace("###",fr);break;case fe.ISNULL:txt=s.dnull;break;case fe.ISNOTNULL:txt=s.dnnull;break;case fe.IN:txt=s.din+" "+this.consts.split(sep).join(",");break;case fe.NOTIN:txt=s.dnin+" "+this.consts.split(sep).join(",");break;}break;case fte.RANK:case fte.RANKPERCENT:var pr="r";if(ft==fte.RANKPERCENT){pr="p";}switch(f){case fmrpe.EQUALSDESCENDING:case fmrpe.EQUALSASCENDING:txt=s[pr+"eq"]+" "+fl;break;case fmrpe.NOTEQUALSDESCENDING:case fmrpe.NOTEQUALSASCENDING:txt=s[pr+"neq"]+" "+fl;break;case fmrpe.GREATERTHANEQUALSASCENDING:txt=s[pr+"exb"]+" "+fl;break;case fmrpe.GREATERTHANASCENDING:txt=s[pr+"exb"]+" "+fr;break;case fmrpe.GREATERTHANEQUALSDESCENDING:txt=s[pr+"ext"]+" "+fl;break;case fmrpe.GREATERTHANDESCENDING:txt=s[pr+"ext"]+" "+fr;break;case fmrpe.LESSTHANASCENDING:txt=s[pr+"b"]+" "+fl;break;case fmrpe.LESSTHANEQUALSASCENDING:txt=s[pr+"b"]+" "+fr;break;case fmrpe.LESSTHANDESCENDING:txt=s[pr+"t"]+" "+fl;break;case fmrpe.LESSTHANEQUALSDESCENDING:txt=s[pr+"t"]+" "+fr;break;case fmrpe.BETWEENDESCENDING:case fmrpe.BETWEENASCENDING:txt=s[pr+"bt"].replace("##",fl).replace("###",fr);break;case fmrpe.NOTBETWEENASCENDING:case fmrpe.NOTBETWEENDESCENDING:txt=s[pr+"nbt"].replace("##",fl).replace("###",fr);break;case fmrpe.INASCENDING:case fmrpe.INDESCENDING:txt=s[pr+"in"]+" "+this.consts.split(sep).join(",");break;case fmrpe.NOTINDESCENDING:case fmrpe.NOTINASCENDING:txt=s[pr+"nin"]+" "+this.consts.split(sep).join(",");break;}break;}this.summary.innerHTML=txt;this.summary.title=txt;}}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.initComponents=function(){try{var DEFAULT_HANDLE_WIDTH=13;if(this.elem&&!this.isOnClipBoard){this.scrollerContainer=microstrategy.findChildWithAtt(this.elem,"div",microstrategy.HTMLATTR_OBJTYPE,microstrategy.OBJTYPE_SCROLLER_CONTAINER);this.scrollerHandles=microstrategy.findChildrenWithAtt(this.scrollerContainer,"div",microstrategy.HTMLATTR_OBJTYPE,microstrategy.OBJTYPE_SCROLLER_HANDLE);this.scrollerGhost=microstrategy.findChildWithAtt(this.elem,"div",microstrategy.HTMLATTR_OBJTYPE,microstrategy.OBJTYPE_SCROLLER_CONTAINER_GHOST);this.scrollerGhostHandles=microstrategy.findChildrenWithAtt(this.scrollerGhost,"div",microstrategy.HTMLATTR_OBJTYPE,microstrategy.OBJTYPE_SCROLLER_HANDLE);this.scrollerTrack=microstrategy.findChildWithAtt(this.elem,"div",microstrategy.HTMLATTR_OBJTYPE,microstrategy.OBJTYPE_SCROLLER_TRACK);this.labels=microstrategy.findChildrenWithAtt(this.elem.parentNode,"label",microstrategy.HTMLATTR_OBJTYPE,"lb");this.selectionStartElem=microstrategy.findChildWithAtt(this.elem,"div","s","0");this.selectionCenterElem=microstrategy.findChildWithAtt(this.elem,"div","s","1");this.selectionEndElem=microstrategy.findChildWithAtt(this.elem,"div","s","2");this.summary=microstrategy.findChildWithAtt(this.elem.parentNode.parentNode,"div","sum","1");this.selectionStartElem.onclick=new Function("e","return microstrategy.bone('"+this.id+"').onclick(e)");this.selectionEndElem.onclick=new Function("e","return microstrategy.bone('"+this.id+"').onclick(e)");this.handleWidth=this.scrollerHandles[0].offsetWidth||DEFAULT_HANDLE_WIDTH;this.wDiff=12;if(this.targetBone&&microstrategy.bone(this.targetBone).elem){this.wDiff=microstrategy.bone(this.targetBone).elem.offsetWidth-this.elem.offsetWidth;}this.ghostStartUnit=this.startUnit;this.ghostEndUnit=this.endUnit;this.moveHandles();var me=this;window.setTimeout(function(){me.updateSelectionHighlight();},0);}}catch(err){microstrategy.errors.log(err);return false;}};mstrMetricScrollerImpl.prototype.onclick=function(e){try{e=e||window.event;var tgt=getEventTarget(e);getMouse(e);var x=lMouseX,x1=mstr.utils.BoxModel.position(this.scrollerHandles[0],true).left,x2=mstr.utils.BoxModel.position(this.scrollerHandles[2],true).left;var delta=parseInt(Math.min(Math.abs(x-x1),Math.abs(x-x2)));if(tgt.getAttribute("s")=="0"){delta*=-1;}this.ghostStartUnit=this.getAdjustedPosition(Math.min(this.trackSize-1,Math.max(0,this.ghostStartUnit+delta)));this.ghostEndUnit=this.getAdjustedPosition(Math.max(Math.min(this.trackSize-1,this.ghostEndUnit+delta),0));this.moveHandles();this.updateSelectionHighlight();this.submit();}catch(err){microstrategy.errors.log(err);return false;}};mstrMetricScrollerImpl.prototype.onmouseover=function(e){try{clearTimeout(this.onMouseOutTimer);e=e||window.event;var tgt=getEventTarget(e);this.selectedScroller=(tgt&&tgt.getAttribute("ty")=="schn")?getEventTarget(e):null;this.tooltip.onclick=new Function("e","return microstrategy.bone('"+this.id+"').showInlineEditor(this, e)");if(this.enabled&&this.enableTooltip){this.updateTooltipText();this.showTooltip();}}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.moveHandles=function(x,y){try{var hw=this.handleWidth/2;this.scrollerHandles[0].style.left=this.ghostStartUnit-hw+"px";this.scrollerHandles[2].style.left=this.ghostEndUnit-hw+"px";}catch(err){microstrategy.errors.log(err);return false;}};mstrMetricScrollerImpl.prototype.updateSelectionHighlight=function(){try{var hw=this.handleWidth/2;switch(this.type){case"horizontal":var handles=this.scrollerHandles;this.selectionStartElem.style.left=0;this.selectionStartElem.style.top="2px";this.selectionStartElem.style.width=Math.max(0,Math.min(handles[0].offsetLeft,handles[2].offsetLeft)+hw)+"px";this.selectionCenterElem.style.top="2px";this.selectionCenterElem.style.left=Math.max(0,Math.min(handles[0].offsetLeft,handles[2].offsetLeft)+hw)+"px";this.selectionCenterElem.style.width=Math.min(this.trackSize,Math.abs(handles[2].offsetLeft-handles[0].offsetLeft))+"px";this.selectionEndElem.style.top="2px";this.selectionEndElem.style.left=Math.max(handles[0].offsetLeft,handles[2].offsetLeft)+hw+"px";this.selectionEndElem.style.width=Math.max(0,(this.trackSize-Math.max(handles[0].offsetLeft,handles[2].offsetLeft)-hw))+"px";break;}}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.positionTooltip=function(){try{if(this.enableTooltip){var scroller=this.selectedScroller;if(scroller){var tip=this.tooltip,pos=mstr.utils.BoxModel.position(scroller,true);tip.style.top=pos.top-tip.offsetHeight+1+"px";tip.style.left=pos.left-tip.offsetWidth/2+"px";}}}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.updateTooltipText=function(unit){try{var scroller=this.selectedScroller;if(!scroller){return ;}var st=scroller.getAttribute("st"),l;if(!this.dragging){var tb=microstrategy.bone(this.targetBone),fl=this.fleft?this.fleft:tb.fleft,fr=this.fright?this.fright:tb.fright;l=st=="sl"?fl:fr;}else{var pos=unit!=null&&unit>=0?unit:(st=="sl"?this.ghostStartUnit:(st=="sr"?this.ghostEndUnit:-999));pos=Math.min(this.trackSize-1,Math.max(0,pos));l=this.dataLabels[pos];}if(this.tooltip&&this.dataLabels){this.tooltip.firstChild.innerHTML=l;}this.positionTooltip();}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.onboneafterresize=function(resizedBoneIds){try{var ids=resizedBoneIds.replace(/(^\||\|$)/g,"").split("|"),id=this.targetBone.split("_")[0];for(var i=0,len=ids.length;i<len;i++){if(ids[i]==id){var newWidth=microstrategy.bone(this.targetBone).elem.offsetWidth-this.wDiff;this.elem.parentNode.style.width=newWidth+"px";this.startUnit=Math.ceil(this.startUnit/this.trackSize*newWidth);this.endUnit=Math.ceil(this.endUnit/this.trackSize*newWidth);this.ghostStartUnit=this.startUnit;this.ghostEndUnit=this.endUnit;this.moveHandles();this.trackSize=newWidth;this.updateSelectionHighlight();this.updateData();}}}catch(err){microstrategy.errors.log(err);return false;}};mstrMetricScrollerImpl.prototype.onboneAfterQualTypeChange=function(resizedBoneIds,funcType){try{this.funcType=funcType;this.ghostStartUnit=this.startUnit=0;this.ghostEndUnit=this.endUnit=this.trackSize-1;this.ndp=funcType==1?this.targetBone&&microstrategy.bones[this.targetBone].ndp:0;this.updateData();this.labels[0].innerHTML=this.dataLabels[this.startUnit];this.labels[1].innerHTML=this.dataLabels[this.endUnit];this.moveHandles();this.updateSelectionHighlight();}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.updateData=function(){try{var min,max,size=this.trackSize,sf="",d=this.ndp,d2=this.ndp2;switch(microstrategy.bones[this.targetBone].funcType){case 1:min=Number(this.min);max=Number(this.max);break;case 2:min=1;max=this.ranks;break;case 3:min=0;max=100;sf="%";}var formatNumber=function(num,dp,thouSep,decSep,curr){var n=new Number(num).toFixed(dp)+"",nn=n.split(decSep),n0=nn[0].replace(/\D/g,"").split("").reverse().join(""),m=n0.replace(/(\d{3})/g,"$1"+thouSep);m=m.replace(new RegExp(thouSep+"$"),"").split("").reverse().join("");m+=(nn.length>1?decSep+nn[1]:"");if(curr){m=curr+m;}return m;};this.dataLabels=[];this.dataValues=[];for(var i=0;i<size;i++){var v0=(min+i*(max-min)/(size-1)),v,fv;if(this.funcType==1){v=new Number(v0).toFixed(d2);fv=formatNumber(v0,d,mstr.Settings.Locale.THOUSANDSEP,mstr.Settings.Locale.DECIMALSEP,"");}else{v=Math.floor(v0);fv=v;}this.dataLabels.push(fv+sf);this.dataValues.push(v);}}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.getUnit=function(pos){try{return this.dataValues[Math.min(this.trackSize-1,Math.max(0,pos))];}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.submit=function(){try{var start=this.ghostStartUnit,end=this.ghostEndUnit;if(start==this.startUnit&&end==this.endUnit){return ;}this.startUnit=start;this.endUnit=end;this.leftUnset=this.startUnit==0;this.rightUnset=(this.maxUnits-1)==this.endUnit;if(this.leftUnset&&this.rightUnset){this.setUnset();}else{this.fleft=this.dataLabels[start];this.fright=this.dataLabels[end];this.submit2(this.leftUnset?"unset":this.dataValues[start],this.rightUnset?"unset":this.dataValues[end]);}}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.setUnset=function(){var um=microstrategy.updateManager,args=!!this.unitKeyContext?["2048137"]:["2048130"],values=!!this.unitKeyContext?[this.unitKeyContext]:[this.ctlKey];um.add([um.createActionObject(null,mstrUpdateManager.REPORT_WRITER_EVENT_UNSET_SELECTOR_CONTROL,this.beanPath,args,values,[])]);um.flushAndSubmitChanges();};mstrMetricScrollerImpl.prototype.submit2=function(start,end){try{var tb=this.targetBone&&microstrategy.bone(this.targetBone);if(tb){this.unset=tb.unset=false;if(start=="unset"){this.consts=end;}else{if(end=="unset"){this.consts=start;}else{this.consts=[start,end].join(mstrRWMetricQualificationStyleHelper.EVENT_ITEM_SEPARATOR);}}tb.exec(this.cmdid,start+"|"+end);this.buildSummary();}}catch(err){microstrategy.errors.log(err);return false;}};mstrMetricScrollerImpl.prototype.ondrag=function(e){try{if(!e){e=window.event;}if(e.e){e=e.e;}getMouse(e);var scrollType=this.selectedScroller.getAttribute(mstrHTMLAttributes.ATTR_SCROLL_TYPE);var tempPosition;var tempWidth;var deltaX=lMouseX-this.x;var deltaY=lMouseY-this.y;var validMousePosition=false;var startUnit=this.ghostStartUnit;var endUnit=this.ghostEndUnit;var hw=this.handleWidth/2;switch(scrollType){case"sl":tempPosition=Math.max(-hw,Math.min(this.trackSize-hw,(parseInt(this.scrollerHandles[0].style.left)||0)+deltaX));this.scrollerHandles[0].style.left=tempPosition+"px";this.scrollerContainer.style.left=tempPosition+"px";startUnit=tempPosition+parseInt(hw);this.leftUnset=false;break;case"sr":tempPosition=Math.max(-hw,Math.min(this.trackSize-hw,(parseInt(this.scrollerHandles[2].style.left)||0)+deltaX));this.scrollerHandles[2].style.left=tempPosition+"px";endUnit=tempPosition+parseInt(hw);this.rightUnset=false;break;}this.x=lMouseX;this.y=lMouseY;startUnit=Math.min(this.trackSize-1,Math.max(0,startUnit));endUnit=Math.max(Math.min(this.trackSize-1,endUnit),0);var unit=-1;switch(this.selectedScroller.getAttribute("st")){case"sl":unit=startUnit;break;case"sc":break;case"sr":unit=endUnit;break;}if(unit>-1){this.updateTooltipText(unit);}if(startUnit!=this.ghostStartUnit||endUnit!=this.ghostEndUnit){this.ghostStartUnit=startUnit;this.ghostEndUnit=endUnit;}var f=mstr.Enum.Nodes.FUNCTION;if(this.unset||this.func==f.ISNULL||this.func==f.ISNOTNULL||this.func==f.IN||this.func==f.NOTIN){var ctl=microstrategy.bones[this.targetBone].elem;ctl.className=ctl.className.replace(/ unset/,"");}this.updateSelectionHighlight();}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.getAdjustedPosition=function(px){try{var v=this.dataValues[Math.round(px)];return mstr.$A.find(this.dataValues,v);}catch(err){microstrategy.errors.log(err);return -1;}};mstrMetricScrollerImpl.prototype.moveScroller=function(){try{if(!this.selectedScroller){return ;}var which=this.selectedScroller.getAttribute("st")=="sl"?"ghostStartUnit":"ghostEndUnit";if(this[which]!=this.trackSize-1){this[which]=this.getAdjustedPosition(this[which]);}this.selectedScroller.style.left=this[which]-this.handleWidth/2+"px";this.updateSelectionHighlight();}catch(err){microstrategy.errors.log(err);}};mstrMetricScrollerImpl.prototype.onreload=function(v){var spr=mstrBoneImpl.prototype.onreload;if(spr){spr.apply(this,arguments);}if(this.isBoneInPage()){this.buildSummary();}};mstrMetricScrollerImpl.prototype.showInlineEditor=function(elTip,e){try{elTip.style.display="none";var me=this,ft=me.funcType,editorID="scroller-editor",editor=(this.inlineEditor=document.getElementById(editorID)),which=function(){return me.selectedScroller.getAttribute("st")=="sl"?"startUnit":"endUnit";},setOKStatus=function(elOK,enabled){var cn=elOK.className;elOK.disabled=enabled?"":"disabled";elOK.className=enabled?cn.replace(/ disabled/g,""):cn+" disabled";};if(!editor){var divCurtain=document.createElement("div");divCurtain.id=editorID;divCurtain.className="mstrMetricSliderEditorCurtain";var div=document.createElement("div");div.className="mstrMetricSliderEditor";var input=document.createElement("input");input.type="text";input.className="mstrMetricSliderEditor-value";input.size="3";input.onkeyup=function(e){e=e||window.event;var v=this.value.replace(/^\s+|\s+$/g,""),editor=me.inlineEditor,valid=true;switch(e.keyCode){case 27:editor.style.display="none";break;case 13:editor.okButton.onclick();break;default:if(v.length>0){var n=microstrategy.number,miv=ft==2?1:0,mav=ft==2?me.ranks:100,fv=n.toString(v),isLastDigitValid=function(v){return/[0-9%]$/.test(v);};if(!mstr.utils.LocaleParser.isNumeric(fv)||!isLastDigitValid(fv)||(ft!=1&&fv<0)){input.style.color="#ff0000";var _min=_max=me.dataLabels[0],_max=me.dataLabels[me.dataLabels.length-1];input.title=microstrategy.descriptors.getDescriptor("7839").replace("###",_max).replace("##",_min);valid=false;}else{input.style.color="#000";}}else{input.style.color="#000";valid=false;}editor.valid=valid;setOKStatus(editor.okButton,valid);break;}};var button=document.createElement("span");button.className="mstrMetricSliderEditor-ok";button.onclick=function(){var editor=me.inlineEditor;if(!editor.valid){return ;}var v=editor.input.value;v=(new mstrNumber()).toString(v,true);v=parseFloat(mstr.utils.String.trim(v).replace("%",""));if(!isNaN(v)&&v!=editor.ov){var dv=me.dataValues,unit=(v-dv[0])/(dv[dv.length-1]-dv[0])*me.trackSize;unit=Math.max(0,Math.min(me.trackSize-1,parseInt(unit)));var s=which();s=s.replace(/^./,s.charAt(0).toUpperCase());me["ghost"+s]=unit;me.moveHandles();me.updateSelectionHighlight();var cArr=me.consts&&me.consts.split(mstrRWMetricQualificationStyleHelper.EVENT_ITEM_SEPARATOR);if(s.indexOf("End")>-1){me.rightUnset=false;me.fright=v;me.submit2(me.leftUnset?"unset":cArr[0],String(v));}else{me.leftUnset=false;me.fleft=v;var r=cArr&&(cArr.length==2?cArr[1]:cArr[0]);me.submit2(String(v),me.rightUnset?"unset":r);}var ctl=microstrategy.bones[me.targetBone].elem;ctl.className=ctl.className.replace(/ unset/,"");}editor.style.display="none";editor.input.value="";};div.appendChild(input);div.appendChild(button);divCurtain.appendChild(div);document.body.appendChild(divCurtain);editor=this.inlineEditor=divCurtain;editor.input=input;editor.okButton=button;editor.valid=true;}var ctl=this.elem.parentNode.parentNode.parentNode;ctl.appendChild(editor);editor.style.display="block";var cArr=this.consts&&this.consts.split(mstrRWMetricQualificationStyleHelper.EVENT_ITEM_SEPARATOR),oldValue="";if(!this.unset&&cArr){if(which()=="startUnit"){if(!this.leftUnset){oldValue=cArr[0];}}else{if(this.leftUnset){oldValue=cArr[0];}else{if(!this.rightUnset){oldValue=cArr[1];}}}}if(ft!=1){if(which()=="startUnit"&&this.leftUnset){oldValue=ft==2?1:0;}if(which()=="endUnit"&&this.rightUnset){oldValue=ft==2?this.ranks:100;}}else{oldValue=oldValue!==undefined?oldValue:"";}editor.ov=oldValue;editor.input.value=microstrategy.number.toLocaleString(oldValue);editor.input.focus();var w=30;if(this.funcType==1){w=Math.max(Math.min(this.trackSize,oldValue.toString().length*8),w);}editor.input.style.width=w+"px";editor.firstChild.style.left=Math.max(10,Math.min(me.trackSize-10,parseInt(this.selectedScroller.style.left)-editor.firstChild.offsetWidth))+"px";setOKStatus(editor.okButton,true);}catch(err){microstrategy.errors.log(err);}};function mstrMetricScrollerImpl(id){this.inherits=mstrScrollerImpl;this.inherits(id);delete this.inherits;return this;}