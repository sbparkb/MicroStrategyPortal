mstrmojo.chart.model.enums.EnumDSSDefaultFormats={Label:1,Text:2,Image:3,Crosstab:4,Line:5,Shape:6,Section:7,Title:8,HTML:9,PanelStack:10,Control:11,UnselectedItem:12,SelectedItem:13,HighlightedItem:14,GridTitle:15,PanelStackTitle:16,Panel:17,ControlTitle:18,MetricsHeader:20,MetricsGrid:21,MetricsSubtotalHeader:22,MetricsSubtotalGrid:23,RowHeader:24,RowGrid:25,RowSubtotalHeader:26,RowSubtotalGrid:27,ColumnHeader:28,ColumnGrid:29,ColumnSubtotalHeader:30,ColumnSubtotalGrid:31,GraphMatrix:32,HeatMap:33,Network:34};mstrmojo.vi.viz.EnumVisualizationTemplates={UNKNOWN_GRAPHMATRIX_TYPE:-1,GRID:0,HEATMAP:1,GOOGLEMAP:2,PIE:3,RING:4,GRAPHMATRIXVERTICALBARSTACKED:6,GRAPHMATRIXVERTICALBARCLUSTERED:7,GRAPHMATRIXVERTICALBARPERCENT:8,GRAPHMATRIXHORIZONTALBARSTACKED:9,GRAPHMATRIXHORIZONTALBARCLUSTERED:10,GRAPHMATRIXHORIZONTALBARPERCENT:11,GRAPHMATRIXVERTICALLINESTACKED:12,GRAPHMATRIXVERTICALLINECLUSTERED:13,GRAPHMATRIXVERTICALLINEPERCENT:14,GRAPHMATRIXHORIZONTALLINESTACKED:15,GRAPHMATRIXHORIZONTALLINECLUSTERED:16,GRAPHMATRIXHORIZONTALLINEPERCENT:17,GRAPHMATRIXSCATTERCIRCLEMM:18,GRAPHMATRIXSCATTERGRIDCIRCLEAA:19,GRAPHMATRIXBUBBLECIRCLEMM:21,GRAPHMATRIXBUBBLEGRIDCIRCLEAA:22,GRAPHMATRIXSCATTERSQUAREAM:23,GRAPHMATRIXSCATTERSQUAREMM:24,GRAPHMATRIXSCATTERGRIDSQUAREAA:25,GRAPHMATRIXBUBBLESQUAREAM:26,GRAPHMATRIXBUBBLESQUAREMM:27,GRAPHMATRIXBUBBLEGRIDSQUAREAA:28,GRAPHHORIZONTALBARCLUSTERED:29,GRAPHMATRIXVERTICALAREASTACKED:30,GRAPHMATRIXVERTICALAREAPERCENT:31,GRAPHMATRIXVERTICALAREACLUSTERED:32,GRAPHMATRIXHORIZONTALAREASTACKED:40,GRAPHMATRIXHORIZONTALAREAPERCENT:41,GRAPHMATRIXHORIZONTALAREACLUSTERED:42,GRAPHHORIZONTALBARDUALAXISCLUSTERED:33,GRAPHHORIZONTALBARDUALAXISABSOLUTE:34,GRAPHHORIZONTALLINEABSOLUTE:35,GRAPHHORIZONTALLINEDUALAXISABSOLUTE:36,GRAPHHORIZONTALAREAABSOLUTE:37,GRAPHHORIZONTALAREADUALAXISABSOLUTE:38,GRAPHVERTICALBARCLUSTERED:39,GRAPHVERTICALBARDUALAXISCLUSTERED:43,GRAPHVERTICALBARDUALAXISABSOLUTE:44,GRAPHVERTICALBARDUALAXISSTACKED:45,GRAPHVERTICALLINEABSOLUTE:46,GRAPHVERTICALLINESTACKED:47,GRAPHVERTICALLINEPERCENT:48,GRAPHVERTICALLINEDUALAXISABSOLUTE:49,GRAPHVERTICALLINEDUALAXISSTACKED:50,GRAPHVERTICALAREAABSOLUTE:51,GRAPHVERTICALAREAPERCENT:52,GRAPHVERTICALAREASTACKED:53,GRAPHVERTICALAREADUALAXISABSOLUTE:54,GRAPHVERTICALAREADUALAXISSTACKED:55,GRAPHCOMBINATIONBARAREA:56,GRAPHCOMBINATIONBARAREADUALAXIS:57,NETWORK:58,IMAGELAYOUT:59,GOOGLEMAPDENSITY:60,GRAPHMATRIXPIE:61,GRAPHMATRIXRING:62,GRAPHHORIZONTALBARABSOLUTE:63,GRAPHHORIZONTALBARPERCENT:64,GRAPHHORIZONTALBARSTACKED:65,GRAPHVERTICALBARABSOLUTE:66,GRAPHVERTICALBARPERCENT:67,GRAPHVERTICALBARSTACKED:68,ESRIMAP:69,GRAPHMATRIXVERTICALBARAUTOMATIC:70,GRAPHMATRIXHORIZONTALBARAUTOMATIC:71,GRAPHMATRIXVERTICALLINEAUTOMATIC:72,GRAPHMATRIXHORIZONTALLINEAUTOMATIC:73,GRAPHMATRIXVERTICALAREAAUTOMATIC:74,GRAPHMATRIXHORIZONTALAREAAUTOMATIC:75};mstrmojo.vi.viz.EnumWidgetTypes={GRID:0,GRAPH_MATRIX:1,HEATMAP:2,NETWORK:3,IMAGELAYOUT:4,ESRIMAP:5,GOOGLEMAP:6,CUSTOM:7};mstrmojo.chart.model.enums.EnumDSSGraphDataTextShowType={DssGraphDataTextNone:0,DssGraphDataTextValue:1,DssGraphDataTextLabel:2,DssGraphDataTextBoth:3,DssGraphDataTextAbs:4,DssGraphDataTextAbsValue:5,DssGraphDataTextAbsBoth:7,DssGraphDataTextTotal:8,DssGraphDataTextZValue:16,DssGraphDataTextPercent:32,DssGraphDataTextYValue:64,DssGraphDataTextInternal:128,DssGraphDataTextSeriesDependent:256,DssGraphDataTextQualityObjectMode:512};mstrmojo.chart.enums.EnumFontStyle={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};mstrmojo.vi.viz.EnumDSSDropZones={Reserved:0,Rows:1,Columns:2,XAxis:3,YAxis:4,BreakBy:5,SliceBy:6,ColorBy:7,SizeBy:8,AdditionalMetrics:9,Angle:10,Grouping:11,GeoAttribute:12,Layout:13,FromItem:14,ToItem:15,ItemSize:16,Latitude:17,Longitude:18};mstrmojo.gm.GMEnums={};mstrmojo.gm.DualAxisSubAxisBit={PRIMARY:0,SECONDARY:1};mstrmojo.gm.StackExetrmeId={PRIMARY_Y_AXIS:-2,SECONDARY_Y_AXIS:-18,PRIMARY_X_AXIS:-1,SECONDARY_X_AXIS:-17};mstrmojo.gm.FormNameType={OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4};mstrmojo.gm.EnumSelectionOptionLevel={GLOBAL:1,ITSELF:2,ATTS_METRIC_COMBINATION:3,METRIC_AXIS:4,METRIC:5,AXIS:6,COLOR_BY:7,ALL_SHAPE:8,ITSELF_RESOLVED:9};mstrmojo.gm.EnumLabelRotation={VERTICAL:2,HORIZONTAL:0,AUTOMATIC:-1};mstrmojo.gm.EnumIdentityType={LEGEND:Math.pow(2,0),GRAPH_SHAPE:Math.pow(2,1),X_AXIS:Math.pow(2,2),Y_AXIS:Math.pow(2,3),X2_AXIS:Math.pow(2,4),Y2_AXIS:Math.pow(2,5),GRID_LINE:Math.pow(2,6),TREND_LINE:Math.pow(2,7),REF_LINE:Math.pow(2,8),DATA_LABEL:Math.pow(2,9),COLOR_SQUARE:Math.pow(2,10),ROW_TITLE:Math.pow(2,11),COL_TITLE:Math.pow(2,12),ROW_HEADER:Math.pow(2,13),COL_HEADER:Math.pow(2,14),LOG_SCALE:Math.pow(2,15),H_MATRIX_LINE:Math.pow(2,16),V_MATRIX_LINE:Math.pow(2,17),LEGEND_TEXT:Math.pow(2,18),SHAPE_COLLECTION:Math.pow(2,19),MINOR_GRID_LINE:Math.pow(2,20),AXIS_SCALE:Math.pow(2,22),AXIS_ORIGIN:Math.pow(2,23),ROWS_BACKGROUND:Math.pow(2,24),COLS_BACKGROUND:Math.pow(2,25),X_NUMERIC:Math.pow(2,26),X_CATEGORY:Math.pow(2,27),Y_NUMERIC:Math.pow(2,28),Y_CATEGORY:Math.pow(2,29),X_METRIC_AXIS_TITLE:Math.pow(2,30),Y_METRIC_AXIS_TITLE:Math.pow(2,31),VIZ_BOX_TITLE:Math.pow(2,32),REF_LINE_LABEL:Math.pow(2,33),LINE_MARKER:Math.pow(2,34),X_AXIS_ORIGIN_LABEL:Math.pow(2,35),Y_AXIS_ORIGIN_LABEL:Math.pow(2,36),X_AXIS_ORIGIN_LINE:Math.pow(2,37),Y_AXIS_ORIGIN_LINE:Math.pow(2,38),Y_ATTRIBUTE_AXIS_TITLE:Math.pow(2,39),ROW_HEADER_TEXT:Math.pow(2,40),ROW_TITLE_TEXT:Math.pow(2,41),COL_HEADER_TEXT:Math.pow(2,42),COL_TITLE_TEXT:Math.pow(2,43),VIZ_BOX_CONTAINER:Math.pow(2,44),X_ATTRIBUTE_AXIS_TITLE:Math.pow(2,45),AXIS_ORIGIN_DEFINE:Math.pow(2,46)};mstrmojo.gm.EnumGMZoneIds={ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10};mstrmojo.gm.EnumClickType={NONE:-1,LEFT_CLICK:1,RIGHT_CLICK:2,DOUBLE_CLICK:3};mstrmojo.gm.EnumLegendSlot={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8};mstrmojo.gm.EnumAxisType={ATTRIBUTE:0,METRIC:1};mstrmojo.gm.EnumGraphType={UNDEFINED:-1,AREA:1,BAR:2,LINE:3,SCATTER:4,BUBBLE:5,PIE:6,GRID:7};mstrmojo.gm.EnumContextMenu={SEPARATOR:0,KEEP_ONLY:1,EXCLUDE:2,SORT_ASCENDING:3,SORT_DESCENDING:4,CLEAR_SORT:5,SHOW_DATA:6,SWITCH_THEME:7,KEEP_ONLY_AND_SHOW:8,CLOSE_LEGEND:9,OPEN_LEGEND:10,AXIS_SCALE:11,DRILL_TO:100,CHART_TYPE:200,AREA_ABS:201,AREA_STACKED:202,AREA_PERCENT:203,BAR_SBS:204,BAR_ABS:205,BAR_STACKED:206,BAR_PERCENT:207,LINE_ABS:208,LINE_STACKED:209,LINE_PERCENT:210,BUBBLE:211,SCATTER:212,H_AREA_ABS:213,H_AREA_STACKED:214,H_AREA_PERCENT:215,H_BAR_SBS:216,H_BAR_ABS:217,H_BAR_STACKED:218,H_BAR_PERCENT:219,H_LINE_ABS:220,H_LINE_STACKED:221,H_LINE_PERCENT:222,GRID:223,CIRCLE:224,SQUARE:225,PIE:226,TICKER:227,RING:228,CANVAS:229,SVG:230,LARGE_ABL:231,OUTPUT_EXTREMES:232,COMBINATION:233,ENABLE_PARTIAL_RENDERING:234,DISABLE_PARTIAL_RENDERING:235,OUTPUT_DATA_COUNT:236,ENABLE_TIMER:239,DISABLE_TIMER:240,ENABLE_CE_TIMER:241,DISABLE_CE_TIMER:242};mstrmojo.gm.EnumColorRankMode={RANK_MODE_VALUE:0,RANK_MODE_TOP:1,RANK_MODE_BOTTOM:2,RANK_MODE_TOP_PERCENT:3,RANK_MODE_BOTTOM_PERCENT:4};mstrmojo.gm.EnumColorByType={NULL:0,ATT:1,METRICS_ITEM:2,METRICS:3,ATT_METRICS:4};mstrmojo.gm.EnumDockPosition={TOP:1,RIGHT:2,BOTTOM:3,LEFT:4};mstrmojo.gm.EnumXAxisLabelStatus={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};mstrmojo.gm.EnumABLDirection={HORIZONTAL:1,VERTICAL:2};mstrmojo.gm.EnumMetricsPosition={MetricsByRow:0,MetricsByColumn:1,MetricsByAxis:2,MetricsByBreakBy:3,MetricsBySlice:4,MetricsByXAxis:5,MetricsByYAxis:6};mstrmojo.gm.EnumDrawingAPI={GET_CHART_WIDTH:0,GET_CHART_HEIGHT:1,GET_ROW_HEADER:2,GET_COLUMN_HEADER:3,CREATE_UNIT_Y_AXIS:4,CREATE_UNIT_X_AXIS:5,GET_FULL_FLEDGED_CHART:6,GET_ROW_SPAN:7,GET_COLUMN_SPAN:8,GET_METRICS_ON_X:9,GET_METRICS_ON_Y:10,GET_METRICS_ON_SIZE_BY:11,UPDATE_MINI_CHART:12,UPDATE_X_AXIS:13,UPDATE_Y_AXIS:14,MAX_RADIUS_CALC:15,GET_EXTRA_COLUMN_HEADER:16,UPDATE_COLUMN_HEADER:17,UPDATE_ROW_HEADER:18,LAYOUT_ALL_X_AXIS_LABELS:19,LAYOUT_ONE_X_AXIS_LABELS:20};mstrmojo.gm.WidgetPropertyTag={FIT_TO:"FitTo",AXIS_SCALE:"MinMax",SHAPE:"Shape",SUB_TYPE:"Subtype",DATA_LABEL:"DataLabel",DATA_LABELS_PLACEMENT:"DataLabelPalcement",METRIC_LEVEL_DATA_LABEL:"mtcLvlDataLabel",BANDING:"Banding",LEGEND_VISIBLE:"LegendVisibleness",COL_ALIGNMENT:"Columnalignment",ROW_ALIGNMENT:"Rowalignment",MAX_SIZE_TYPE:"SizeType",MAX_SIZE_VALUE:"SizeValue",MIN_SIZE_TYPE:"minSizeType",MIN_SIZE_VALUE:"minSizeValue",OUTSIDE_BORDER:"OutSideBorder",AXES:"AxisLine",MATRIX_LINES:"MatrixLine",GRID_LINES:"GridLine",SELECTION_TYPE:"SelectionType",SELECTIONS:"Selections",LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr",SCALE_CHART_HEIGHT:"rr",SCALE_CHART_WIDTH:"cr",SCALE_ROW_HEADERS:"rvr",SCALE_COL_HEADERS:"chr",SCALE_Y:"yr",SCALE_X:"xr",SCALE_Y2:"y2r",SCALE_X2:"x2r",SCALE_ALL:"scales",SCALE_V_EXTRA_LINE:"vExtraLine",SORT_ORDER:"so",SORT_INDEX:"si",AXIS_SCALE_DATA:"AxisScale",AXIS_SCALE_REAL_MIN:"rMin",AXIS_SCALE_REAL_MAX:"rMax",AXIS_SCALE_MANUAL_MIN:"mMin",AXIS_SCALE_MANUAL_MAX:"mMax",AXIS_SCALE_AUTO_MIN:"autoMin",AXIS_SCALE_AUTO_MAX:"autoMax",SINGLE_AXIS_SCALE_TYPE:"scaleType",LOG_SCALE:"logScale",GROUP_INFO:"groupInfo",METRIC_SHAPES:"metricShapes",AXIS_ORIGIN:"axisOrigin",AXIS_ORIGIN_AUTO:"axOriAuto",AXIS_ORIGIN_VALUE:"axOriValue",TREND_LINE_DEF:"trdDef",REF_LINE_DEF:"refDef",TREND_TYPE:"trdTp",TREND_LEVEL:"trdLvl",TREND_ENABLED:"trdEnabled",TREND_INCLUDE_BREAK_BY:"trdIncBB",TREND_POLY_DEGREE:"trdDgr",TREND_FORECAST_ENABLED:"trdFstEnabled",TREND_BWD_FORECAST:"trdBwdFst",TREND_FWD_FORECAST:"trdFwdFst",TREND_SEASONALITY:"trdSeason",TREND_BUBBLE_FORE_DEF:"trdBbForeDef",TREND_BUBBLE_FORE_FWD:"trdBbForeFwd",TREND_BUBBLE_FORE_BWD:"trdBbForeBwd",TREND_BUBBLE_FORE_ENABLED:"trdBbForeEnabled",TREND_BUBBLE_MAX:"trdBbMax",TREND_BUBBLE_MIN:"trdBbMin",REF_TYPE:"refTp",REF_LEVEL:"refLvl",REF_ENABLED:"refEnabled",REF_SHOW_LABEL:"refLbShw",REF_LABEL_TYPE:"refLbTp",REF_CONST_VALUE:"refCstVl",REF_LINE_NAME:"refLnName",TREND_REF_LINE_THICKNESS:"trdRefLnThk",TREND_REF_LINE_COLOR:"trdRefLnClr",TREND_REF_LINE_STYLE:"trdRefLnStyle",TREND_REF_LINE_COMBINED_STYLE:"trdRefLnCmbStyle",FORMATS_ON_COMBINATION:"fmtOnComb",PARTIAL_RENDER:"prtRdn"};mstrmojo.gm.FormatingPropertyTag={IS_DEFAULT_VALUE:"_default",MODIFIED_DEF_FILL_COLOR:"modDefFillClr",ALL_SHAPE_FORMAT:"allShpFmt",SHAPE_LINE_THICKNESS:"shpLnThk",SHAPE_LINE_COLOR:"shpLnClr",SHAPE_LINE_STYLE:"shpLnStyle",SHAPE_LINE_COMBINED_STYLE:"shpLnCmbStyle",SHAPE_FILL_COLOR:"shpFillClr",SHAPE_FILL_COLOR_DEFAULT:"shpFillClr_default",SHAPE_FILL_STYLE:"shpFillStyle",SHAPE_FILL_TRANSPARENCY:"shpFillTrans",SHAPE_FILL_EFFECT:"shpFillEff",SHAPE_BORDER_COLOR:"shpBdrClr",SHAPE_BORDER_STYLE:"shpBdrStyle",SHAPE_BORDER_COMBINED_STYLE:"shpBdrCmbStyle",SHAPE_BORDER_THICKNESS:"shpBdrThk",LINE_MARKER_SHOW:"lnMkShw",LINE_MARKER_SHAPE:"lnMkShp",LINE_MARKER_SIZE:"lnMkSz",LINE_MARKER_COLOR:"lnMkClr",LINE_MARKER_COLOR_EQUAL:"lnMkClrEq",LINE_MARKER_BORDER_COLOR:"lnMkBdrClr",PIE_EXPLODE:"pieExpl",DATA_LABELS_SHOW:"dlShw",DATA_LABELS_FONT_FAMILY:"dlFntFml",DATA_LABELS_FONT_SIZE:"dlFntSz",DATA_LABELS_FONT_STYLE:"dlFntStyle",DATA_LABELS_FONT_COLOR:"dlFntClr",REF_LABELS_FONT_FAMILY:"rfLnFntFml",REF_LABELS_FONT_SIZE:"rfLnFntSz",REF_LABELS_FONT_STYLE:"rfLnFntStyle",REF_LABELS_FONT_COLOR:"rfLnFntClr",LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",ALL_LINE_SHOW:"allLnShw",ALL_LINE_COLOR:"allLnClr",ALL_LINE_STYLE:"allLnStyle",ALL_LINE_COMBINED_STYLE:"allLnCmbStyle",ALL_LINE_THICKNESS:"allLnThk",ALL_AXIS_ORIGIN_LINE_SHOW:"axOriLnShw",ALL_AXIS_ORIGIN_LINE_COLOR:"axOriLnClr",ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE:"axOriLnCmbStyle",X_AXIS_ORIGIN_LINE_SHOW:"xAxOriLnShw",X_AXIS_ORIGIN_LINE_COLOR:"xAxOriLnClr",X_AXIS_ORIGIN_LINE_STYLE:"xAxOriLnStyle",X_AXIS_ORIGIN_LINE_COMBINED_STYLE:"xAxOriLnCmbStyle",X_AXIS_ORIGIN_LINE_THICKNESS:"xAxOriLnThk",Y_AXIS_ORIGIN_LINE_SHOW:"yAxOriLnShw",Y_AXIS_ORIGIN_LINE_COLOR:"yAxOriLnClr",Y_AXIS_ORIGIN_LINE_STYLE:"yAxOriLnStyle",Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:"yAxOriLnCmbStyle",Y_AXIS_ORIGIN_LINE_THICKNESS:"yAxOriLnThk",ALL_AXIS_LINE_SHOW:"allAxLnShw",ALL_AXIS_LINE_COLOR:"allAxLnClr",ALL_AXIS_LINE_STYLE:"allAxLnStyle",ALL_AXIS_LINE_COMBINED_STYLE:"allAxLnCmbStyle",ALL_AXIS_LINE_THICKNESS:"allAxLnThk",ALL_AXIS_TITLE_SHOW:"allAxTtShw",ALL_AXIS_TITLE_CONTENT:"allAxTtCtt",ALL_AXIS_TITLE_FONT_COLOR:"allAxTtFntClr",ALL_AXIS_TITLE_FONT_FAMILY:"allAxTtFntFml",ALL_AXIS_TITLE_FONT_STYLE:"allAxTtFntStyle",ALL_AXIS_TITLE_FONT_SIZE:"allAxTtFntSz",ALL_AXIS_LABELS_FONT_SIZE:"allAxLbFntSz",ALL_AXIS_LABELS_FONT_FAMILY:"allAxLbFntFml",ALL_AXIS_LABELS_FONT_STYLE:"allAxLbFntStyle",ALL_AXIS_LABELS_FONT_COLOR:"allAxLbFntClr",ALL_AXIS_LABELS_ROTATION:"allAxLbRtt",ALL_AXIS_LABELS_SHOW:"allAxLbShw",X_AXIS_LINE_SHOW:"xAxLnShw",X_AXIS_LINE_COLOR:"xAxLnClr",X_AXIS_LINE_STYLE:"xAxLnStyle",X_AXIS_LINE_COMBINED_STYLE:"xAxLnCmbStyle",X_AXIS_LINE_THICKNESS:"xAxLnThk",X_AXIS_TITLE_SHOW:"xAxTtShw",X_AXIS_TITLE_CONTENT:"xAxTtCtt",X_AXIS_TITLE_FONT_COLOR:"xAxTtFntClr",X_AXIS_TITLE_FONT_FAMILY:"xAxTtFntFml",X_AXIS_TITLE_FONT_STYLE:"xAxTtFntStyle",X_AXIS_TITLE_FONT_SIZE:"xAxTtFntSz",X_AXIS_LABELS_FONT_SIZE:"xAxLbFntSz",X_AXIS_LABELS_FONT_FAMILY:"xAxLbFntFml",X_AXIS_LABELS_FONT_STYLE:"xAxLbFntStyle",X_AXIS_LABELS_FONT_COLOR:"xAxLbFntClr",X_AXIS_LABELS_ROTATION:"xAxLbRtt",X_AXIS_LABELS_SHOW:"xAxLbShw",Y_AXIS_LINE_SHOW:"yAxLnShw",Y_AXIS_LINE_COLOR:"yAxLnClr",Y_AXIS_LINE_STYLE:"yAxLnStyle",Y_AXIS_LINE_COMBINED_STYLE:"yAxLnCmbStyle",Y_AXIS_LINE_THICKNESS:"yAxLnThk",Y_AXIS_TITLE_SHOW:"yAxTtShw",Y_AXIS_TITLE_CONTENT:"yAxTtCtt",Y_AXIS_TITLE_FONT_COLOR:"yAxTtFntClr",Y_AXIS_TITLE_FONT_FAMILY:"yAxTtFntFml",Y_AXIS_TITLE_FONT_STYLE:"yAxTtFntStyle",Y_AXIS_TITLE_FONT_SIZE:"yAxTtFntSz",Y_AXIS_LABELS_FONT_SIZE:"yAxLbFntSz",Y_AXIS_LABELS_FONT_FAMILY:"yAxLbFntFml",Y_AXIS_LABELS_FONT_STYLE:"yAxLbFntStyle",Y_AXIS_LABELS_FONT_COLOR:"yAxLbFntClr",Y_AXIS_LABELS_ROTATION:"yAxLbRtt",Y_AXIS_LABELS_SHOW:"yAxLbShw",ALL_FILL_COLOR:"allFillClr",ALL_FILL_TRANSPARENCY:"allFillTrans",BG_COLOR:"bgFillClr",BG_FILL_EFFECT:"bgFillEff",BG_FILL_STYLE:"bgFillStyle",BG_FILL_TRANSPARENCY:"bgFillTrans",ROW_HEADER_FILL_COLOR:"rwHdrFillClr",ROW_HEADER_FILL_EFFECT:"rwHdrFillEff",ROW_HEADER_FILL_STYLE:"rwHdrFillStyle",ROW_HEADER_FILL_TRANSPARENCY:"rwHdrFillTrans",COLUMN_HEADER_FILL_COLOR:"colHdrFillClr",COLUMN_HEADER_FILL_EFFECT:"colHdrFillEff",COLUMN_HEADER_FILL_STYLE:"colHdrFillStyle",COLUMN_HEADER_FILL_TRANSPARENCY:"colHdrFillTrans",ALL_MATRIX_LINES_SHOW:"allMatrixLnShw",ALL_MATRIX_LINES_COLOR:"allMatrixLnClr",ALL_MATRIX_LINES_THICKNESS:"allMatrixLnThk",ALL_MATRIX_LINES_STYLE:"allMatrixLnStyle",ALL_MATRIX_LINES_COMBINED_STYLE:"allMatrixLnCmbStyle",V_MATRIX_LINES_SHOW:"vMatrixLnShw",V_MATRIX_LINES_COLOR:"vMatrixLnClr",V_MATRIX_LINES_THICKNESS:"vMatrixLnThk",V_MATRIX_LINES_STYLE:"vMatrixLnStyle",V_MATRIX_LINES_COMBINED_STYLE:"vMatrixLnCmbStyle",H_MATRIX_LINES_SHOW:"hMatrixLnShw",H_MATRIX_LINES_COLOR:"hMatrixLnClr",H_MATRIX_LINES_THICKNESS:"hMatrixLnThk",H_MATRIX_LINES_STYLE:"hMatrixLnStyle",H_MATRIX_LINES_COMBINED_STYLE:"hMatrixLnCmbStyle",OUTSIDE_BORDER_SHOW:"outBdrShw",OUTSIDE_BORDER_COLOR:"outBdrClr",OUTSIDE_BORDER_STYLE:"outBdrStyle",OUTSIDE_BORDER_THICKNESS:"outBdrThk",OUTSIDE_BORDER_COMBINED_STYLE:"outBdrCmbStyle",GRID_LINE_AUTO:"gridLineAuto",ALL_GRID_LINES_SHOW:"allGridLnShw",ALL_GRID_LINES_COLOR:"allGridLnClr",ALL_GRID_LINES_THICKNESS:"allGridLnThk",ALL_GRID_LINES_STYLE:"allGridLnStyle",ALL_GRID_LINES_COMBINED_STYLE:"allGridLnCmbStyle",AUTO_GRID_LINES_COLOR:"autoGridLnClr",AUTO_GRID_LINES_COMBINED_STYLE:"autoGridLnCmbStyle",MAJOR_GRID_LINES_SHOW:"majorGridLnShw",MAJOR_GRID_LINES_COLOR:"majorGridLnClr",MAJOR_GRID_LINES_THICKNESS:"majorGridLnThk",MAJOR_GRID_LINES_STYLE:"majorGridLnStyle",MAJOR_GRID_LINES_COMBINED_STYLE:"majorGridLnCmbStyle",MINOR_GRID_LINES_SHOW:"minerGridLnShw",MINER_GRID_LINES_COLOR:"minerGridLnClr",MINER_GRID_LINES_THICKNESS:"minerGridLnThk",MINER_GRID_LINES_STYLE:"minerGridLnStyle",MINER_GRID_LINES_COMBINED_STYLE:"minerGridLnCmbStyle",ALL_ROW_COLUMN_SHOW:"allRwColShw",COLUMN_TEXT_SHOW:"colTxtShw",ROW_TEXT_SHOW:"rwTxtShw",COLUMN_HEADER_SHOW:"colHdrShw",ROW_HEADER_SHOW:"rwHdrShw",COLUMN_VALUES_SHOW:"colVlShw",ROW_VALUES_SHOW:"rwVlShw",ALL_TEXT_FONT_COLOR:"allTxtFntClr",ALL_TEXT_FONT_SIZE:"allTxtFntSz",ALL_TEXT_FONT_FAMILY:"allTxtFntFml",ALL_TEXT_FONT_STYLE:"allTxtFntStyle",ALL_ROW_COLUMN_TEXT_FONT_COLOR:"allRwColTxtFntClr",ALL_ROW_COLUMN_TEXT_FONT_SIZE:"allRwColTxtFntSz",ALL_ROW_COLUMN_TEXT_FONT_FAMILY:"allRwColTxtFntFml",ALL_ROW_COLUMN_TEXT_FONT_STYLE:"allRwColTxtFntStyle",ALL_ROW_COLUMN_TEXT_ALIGNMENT_HORIZONTAL:"allRwColTxtAlignH",ALL_ROW_COLUMN_TEXT_ALIGNMENT_VERTICAL:"allRwColTxtAlignV",ROW_TEXT_TEXT_FONT_COLOR:"rwTxtTxtFntClr",ROW_TEXT_TEXT_FONT_SIZE:"rwTxtTxtFntSz",ROW_TEXT_TEXT_FONT_FAMILY:"rwTxtTxtFntFml",ROW_TEXT_TEXT_FONT_STYLE:"rwTxtTxtFntStyle",ROW_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"rwTxtTxtAlignH",ROW_TEXT_TEXT_ALIGNMENT_VERTICAL:"rwTxtTxtAlignV",COLUMN_TEXT_TEXT_FONT_COLOR:"colTxtTxtFntClr",COLUMN_TEXT_TEXT_FONT_SIZE:"colTxtTxtFntSz",COLUMN_TEXT_TEXT_FONT_FAMILY:"colTxtTxtFntFml",COLUMN_TEXT_TEXT_FONT_STYLE:"colTxtTxtFntStyle",COLUMN_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"colTxtTxtAlignH",COLUMN_TEXT_TEXT_ALIGNMENT_VERTICAL:"colTxtTxtAlignV",ROW_HEADER_TEXT_FONT_COLOR:"rwHdrTxtFntClr",ROW_HEADER_TEXT_FONT_SIZE:"rwHdrTxtFntSz",ROW_HEADER_TEXT_FONT_FAMILY:"rwHdrTxtFntFml",ROW_HEADER_TEXT_FONT_STYLE:"rwHdrTxtFntStyle",ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"rwHdrTxtAlignH",ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:"rwHdrTxtAlignV",COLUMN_HEADER_TEXT_FONT_COLOR:"colHdrTxtFntClr",COLUMN_HEADER_TEXT_FONT_SIZE:"colHdrTxtFntSz",COLUMN_HEADER_TEXT_FONT_FAMILY:"colHdrTxtFntFml",COLUMN_HEADER_TEXT_FONT_STYLE:"colHdrTxtFntStyle",COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"colHdrTxtAlignH",COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:"colHdrTxtAlignV",ROW_VAVLUE_TEXT_FONT_COLOR:"rwVlTxtFntClr",ROW_VAVLUE_TEXT_FONT_SIZE:"rwVlTxtFntSz",ROW_VAVLUE_TEXT_FONT_FAMILY:"rwVlTxtFntFml",ROW_VAVLUE_TEXT_FONT_STYLE:"rwVlTxtFntStyle",ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"rwVlTxtAlignH",ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"rwVlTxtAlignV",COLUMN_VAVLUE_TEXT_FONT_COLOR:"colVlTxtFntClr",COLUMN_VAVLUE_TEXT_FONT_SIZE:"colVlTxtFntSz",COLUMN_VAVLUE_TEXT_FONT_FAMILY:"colVlTxtFntFml",COLUMN_VAVLUE_TEXT_FONT_STYLE:"colVlTxtFntStyle",COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"colVlTxtAlignH",COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"colVlTxtAlignV",TITLE_FONT_COLOR:"ttlFntClr",TITLE_FONT_SIZE:"ttlFntSz",TITLE_FONT_FAMILY:"ttlFntFml",TITLE_FONT_STYLE:"ttlFntStyle",COLOR_SQUARE_COLOR:"clrSqrClr"};mstrmojo.gm.EnumAxis={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5};mstrmojo.gm.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gm.EnumSizeByType={SQUARE:1,CIRCLE:4};mstrmojo.gm.EnumTheme={DARK:0,LIGHT:1};mstrmojo.gm.EnumFitTo={CONTENT:1,PANEL:2,COMPACT:3};mstrmojo.gm.EnumAxisScale={GLOBAL:0,PERROWCOL:1,PERCELL:2,CUSTOM:3,DIFFERENT:4};mstrmojo.gm.EnumShape={GENERIC:-1,AREA:0,BAR:1,LINE:2,STEPLINE:3,CIRCLE:4,RECTANGLE:5,SQUARE:6,TICK:7,PIESLICE:8,POLYGON:9,PIE:10,RING:11,DEFAULT:12,BULLET:13};mstrmojo.gm.EnumSubtype={AUTO:1,ABSOLUTE:2,STACKED:3,CLUSTERED:4,PERCENT:5};mstrmojo.gm.EnumDataLabels={HIDE:1,SHOW_VALUE_ONLY:2,SHOW_TEXT_ONLY:3};mstrmojo.gm.EnumDataLabelPlacements={AUTOMATIC:1,GENERIC:2,RESERVED:3};mstrmojo.gm.EnumLegend={SHOW:0,HIDE:1,MINIMIZED:2};mstrmojo.gm.EnumLegendMode={RESTORED:1,MINIMIZED:2};mstrmojo.gm.EnumTextAlignH={LEFT:0,MIDDLE:1,RIGHT:2};mstrmojo.gm.EnumTextAlignV={TOP:0,MIDDLE:1,BOTTOM:2};mstrmojo.gm.EnumMaxSizeType={AUTO:1,MANUAL:2,AUTO_FIT:3};mstrmojo.gm.EnumMinSizeType={AUTO:1,MANUAL:2,PROPORTIONAL:3};mstrmojo.gm.EnumAxes={SHOW_BOTH:1,SHOW_NONE:2,SHOW_X:3,SHOW_Y:4};mstrmojo.gm.EnumMatrixLines={SHOW_ALL:1,SHOW_NONE:2,SHOW_HORIZONTAL:3,SHOW_VERTICAL:4};mstrmojo.gm.EnumGridLines={AUTO:1,SHOW:2,HIDE:3,SHOW_MAJOR_ONLY:4};mstrmojo.gm.LineMarkerShape={Circle:4,Square:1};mstrmojo.gm.ShapeFillType={Solid:0,Gradient:14,Pattern:3};mstrmojo.gm.ShapeFillEffect={None:1,Bevel:2};mstrmojo.gm.Enum3DGMapping={SizeType:"9999_1002",SizeValue:"9999_1003",lgdBgFillClr:"6_564",lgdBgFillStyle:"6_10002",lgdBgFillEff:"6_608",lgdFntSz:"9_603",lgdFntFml:"9_576",lgdFntStyle:"9_584",lgdFntClr:"9_574",LegendVisibleness:"9999_116",xAxShw:"9999_124",xAxTtCtt:"293_9999",xAxTtFntClr:"293_574",xAxTtFntFml:"293_576",xAxTtFntStyle:"293_584",xAxLbFntSz:"272_603",xAxLbFntFml:"272_576",xAxLbFntStyle:"272_584",yAxShw:"9999_125",yAxTtCtt:"299_9999",yAxTtFntClr:"299_574",yAxTtFntFml:"299_576",yAxTtFntStyle:"299_584",yAxLbFntSz:"296_603",yAxLbFntFml:"296_576",yAxLbFntStyle:"296_584",bgFillClr:"1_564",bgFillEff:"1_879",bgFillTrans:"1_608",outBdrClr:"1_588"};mstrmojo.gm.EnumRefLineModelType={MAX:1,MIN:2,AVG:3,MED:4,FIRST:5,LAST:6,CONST:7};mstrmojo.gm.EnumTrendLineModelType={BEST_FIT:256,LINEAR:257,LOG:258,EXP:259,POW:260,POLY:261};mstrmojo.gm.EnumTrendRefLevel={DssModelLevelReserved:0,DssModelLevelPerCell:1,DssModelLevelPerRow:2,DssModelLevelPerColumn:3,DssModelLevelPerPanel:4,DssModelLevelLastOne:5};mstrmojo.gm.EnumTimeRole={None:0,YearOfDecade:3083,QuarterOfYear:2826,MonthOfYear:2825,MonthOfQuarter:2569,WeekOfYear:2824,WeekOfQuarter:2568,WeekOfMonth:2312,DayOfYear:2823,DayOfQuarter:2567,DayOfMonth:2311,DayOfWeek:2055,HourOfDay:1798,MinuteOfDay:1797,MinuteOfHour:1541,SecondOfDay:1796,SecondOfHour:1540,SecondOfMinute:1284};mstrmojo.gm.EnumTrendRefModelLabels={DssModelLabelsReserved:-1,DssModelLabelsNone:0,DssModelLabelsType:1,DssModelLabelsMetric:2,DssModelLabelsValue:4};mstrmojo.gm.EnumTRFManipulations={AddTRLine:"141",RemoveTRLine:"142",UpdateTRLine:"143",UpdateForecastInfo:"144"};mstrmojo.gm.EnumShapeFormatStatus={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2};mstrmojo.chart.model.enums.EnumDSSGraphProperty={DssGraphTextContent:9999,DssGraphContent:9999,DssGraphPropertyReserved:0,DssGraphAutoFitO1:4,DssGraphAutoFitO2:5,DssGraphAutoFitX:6,DssGraphAutoFitY1:7,DssGraphAutoFitY2:8,DssGraphGroupSpacing:10,DssGraphRiserWidth:11,DssGraphColorBySeries:12,DssGraphCurveColorAsSeries:13,DssGraphSDMOVAFactor:14,DssGraph2DAngle:18,DssGraph2DDepth:20,DssGraphDepthMode:21,DssGraph2ScaleDirectionX:22,DssGraph2ScaleDirectionY1:23,DssGraph2ScaleDirectionY2:24,DssGraph2ExcludeZeroX:25,DssGraph2ExcludeZeroY1:26,DssGraph2ExcludeZeroY2:27,DssGraphFormatDataTextX:28,DssGraphFormatDataTextY1:29,DssGraphFormatDataTextY2:30,DssGraphFormatX:33,DssGraphFormatY1:34,DssGraphFormatY2:35,DssGraphFormatZ:36,DssGraphGridLineO1:37,DssGraphGridLineO2:38,DssGraphGridLineX:39,DssGraphGridLineY1:40,DssGraphGridLineY2:41,DssGraphLabelModeO1:48,DssGraphLabelModeO2:49,DssGraphLegendLocation:52,DssGraphTitleXLocation:54,DssGraphTitleY1Location:55,DssGraphTitleY2Location:56,DssGraph2LogScaleX:57,DssGraph2LogScaleY1:58,DssGraph2LogScaleY2:59,DssGraphMarkerShape:60,DssGraphMarkerSize:61,DssGraph2DPlaceX:65,DssGraph2DPlaceY1:66,DssGraph2DPlaceY2:67,DssGraphConnectLine:68,DssGraphShowStepLine:70,DssGraph2ScaleEndX:74,DssGraph2ScaleEndY1:75,DssGraph2ScaleEndY2:76,DssGraph2DScaleFreqO1:87,DssGraph2DScaleFreqO2:88,DssGraph2DScaleFreqX:89,DssGraph2DScaleFreqY1:90,DssGraph2DScaleFreqY2:91,DssGraphScaleX:92,DssGraphScaleY1:93,DssGraphScaleY2:94,DssGraphShowSDDataLineType:96,DssGraphSDRiserType:97,DssGraphShowSDLine:98,DssGraphShowSDCurve:99,DssGraphShowSDLinrCorr:101,DssGraphShowSDLinrExp:102,DssGraphShowSDLinrFormula:103,DssGraphShowSDLinrLine:104,DssGraphShowSDLinrLog:105,DssGraphShowSDLinrNatLog:106,DssGraphShowSDLinrNPoly:107,DssGraphSDPolyFactor:108,DssGraphShowSDMeanLine:109,DssGraphShowSDMOVALine:110,DssGraphShowSDSTDDLine:111,DssGraphShowDataText:113,DssGraphShowDivBiPolar:114,DssGraphShowErrorBar:115,DssGraphShowLegendText:116,DssGraphShow2DO1Label:117,DssGraphShow2DO1:-117,DssGraphShow2DO2:118,DssGraphOffScaleTypeX:119,DssGraphOffScaleTypeY1:120,DssGraphOffScaleTypeY2:121,DssGraphShowQuadrants:122,DssGraphShowRiserShadows:123,DssGraphShow2DXTitle:124,DssGraphShow2DY1Title:125,DssGraphShow2DY2Title:126,DssGraphShow2DXLabel:127,DssGraphShow2DX:-127,DssGraphShow2DY1Label:128,DssGraphShow2DY1:-128,DssGraphShow2DY2Label:129,DssGraphShow2DY2:-129,DssGraphShowZeroLineX:130,DssGraphShowZeroLineY1:131,DssGraphShowZeroLineY2:132,DssGraph2DSideO1:133,DssGraph2DSideO2:134,DssGraph2DSideX:135,DssGraph2DSideY1:136,DssGraph2DSideY2:137,DssGraph2DSDSplitY:140,DssGraphStaggerO1:142,DssGraphStaggerO2:143,DssGraphStaggerX:144,DssGraphStaggerY1:145,DssGraphStaggerY2:146,DssGraphUniformBorders:148,DssGraphPieDepthValue:192,DssGraphPieHoleSizeValue:198,DssGraphPieInset:200,DssGraphPiesPerRowValue:201,DssGraphPieRotationValue:202,DssGraphShowFeeler:204,DssGraphShowLBLFeelerLabel:205,DssGraphShowLBLFeeler:-205,DssGraphShowLBLPie:206,DssGraphShowLBLRing:207,DssGraphDeleteSlice:208,DssGraphDetachSlice:209,DssGraphPieRestore:210,DssGraphPieTiltValue:211,DssGraphPieTiltOn:212,DssGraphShowPolarCoordinateAxis:215,DssGraphShowPolarConnectLines:218,DssGraphStockDataValueType:222,DssGraphShowBubbleGrid:245,DssGraphSDShowDataText:247,DssGraphShowTitleSeries:248,DssGraphConnectStackBars:249,DssGraphLegendBox:250,DssGraphLinkColors:260,DssGraph3DCustomView:265,DssGraph3DGridFloor:277,DssGraph3DGridLWall:278,DssGraph3DGridRiser:279,DssGraph3DGridRWall:280,DssGraph3DColTitleLocation:285,DssGraph3DLYTitleLocation:287,DssGraph3DRowTitleLocation:288,DssGraph3DRYTitleLocation:289,DssGraph3DScalefreqX:299,DssGraph3DScalefreqY:300,DssGraph3DScalefreqZ:301,DssGraphShow3DScatterLine:308,DssGraphShow3DLineToLWall:309,DssGraphShow3DLineToFloor:310,DssGraphShow3DLineToRWall:311,DssGraphSD3DRiserType:312,DssGraphShow3DShowDataLabelsBox:313,DssGraph3DOffScaleTypeX:314,DssGraph3DOffScaleTypeY:315,DssGraph3DOffScaleTypeZ:316,DssGraphShow3DCHeader:318,DssGraphShow3DColTitle:319,DssGraph3DShowDataText:320,DssGraphShow3DLNumber:321,DssGraphShow3DLYTitle:322,DssGraphShow3DRNumber:323,DssGraphShow3DRYTitle:324,DssGraphShow3DRHeader:325,DssGraphShow3DRowTitle:326,DssGraphShow3DFloor:327,DssGraphShow3DLegend:328,DssGraphShow3DLWall:329,DssGraphShow3DRWall:330,DssGraph3DViewStruct:337,DssGraphACMColorModel:549,DssGraphLegendItems:554,DssGraphSeriesColor:556,DssGraphReverseGroup:558,DssGraphReverseSeries:559,DssGraphSeriesByColumn:560,DssGraphAreaBackColor:561,DssGraphAreaTransparency:563,DssGraphAreaColor:564,DssGraphAreaPattern:566,DssGraphAreaSFX:567,DssGraphFontAlign:570,DssGraphFontTransparency:573,DssGraphFontColor:574,DssGraphFontName:576,DssGraphFontRotation:578,DssGraphVirtualFontSize:583,DssGraphFontStyle:584,DssGraphType:585,DssGraphLineTransparency:587,DssGraphLineColor:588,DssGraphLinePattern:589,DssGraphVirtualLineWidth:591,DssGraphFootnoteLocation:592,DssGraphFrameLocation:593,DssGraphSubTitleLocation:594,DssGraphTitleLocation:595,DssGraphShowfootnote:596,DssGraphShowSubtitle:597,DssGraphShowTitle:598,DssGraphFontBox:601,DssGraphFontSize:603,DssGraphLockFontSize:604,DssGraphLineWidth:605,DssGraphAreaAlpha:608,DssGraphLineAlpha:609,DssGraphFontAlpha:610,DssGraphAreaCustomBevelEffect:612,DssGraphFormatDataTextAdv:616,DssGraphFormatXAdv:618,DssGraphFormatY1Adv:619,DssGraphFormatY2Adv:620,DssGraphFormatZAdv:621,DssGraphMiddleValue:630,DssGraphSplitYPosition:631,DssGraphAxisShowUserLine:632,DssGraphAxisUserLineValue:633,DssGraphAxisUserLineAxis:634,DssGraphMarkerLayout:637,DssGraphPieDataValueLoc:638,DssGraphPieDataLabelLoc:639,DssGraph2DOrdSpaceMode:642,DssGraphLegendLock:644,DssGraphGridStepY1:645,DssGraphGridStepY2:646,DssGraphGridStepX:647,DssGraphDataTextShowConnectLine:652,DssGraphGridLineZ:658,DssGraphScaleZ:659,DssGraphStaggerZ:660,DssGraph2ScaleEndZ:662,DssGraph2ExcludeZeroZ:663,DssGraph2ScaleDirectionZ:664,DssGraphGridStepZ:665,DssGraphGaugeInfo:668,DssGraphGaugeFancyBox:669,DssGraphSDMarkerSize:671,DssGraphSDMarkerShape:683,DssGraphMetric1:690,DssGraphMetric2:691,DssGraphStockStyle:692,DssGraph2ScaleDirectionY3:693,DssGraph2ExcludeZeroY3:694,DssGraphGridLineY3:697,DssGraphFormatY3Adv:699,DssGraphGridStepY3:701,DssGraphOffScaleTypeY3:702,DssGraphShow2DY3:704,DssGraph2DSideY3:706,DssGraphStaggerY3:707,DssGraph2DPlaceY3:709,DssGraph2ScaleEndY3:710,DssGraph2DScaleFreqY3:713,DssGraphScaleY3:714,DssGraph2ScaleDirectionY4:715,DssGraph2ExcludeZeroY4:716,DssGraphGridLineY4:719,DssGraphFormatY4Adv:721,DssGraphGridStepY4:723,DssGraphOffScaleTypeY4:724,DssGraphShow2DY4:726,DssGraph2DSideY4:728,DssGraphStaggerY4:729,DssGraph2DPlaceY4:731,DssGraph2ScaleEndY4:732,DssGraph2DScaleFreqY4:735,DssGraphScaleY4:736,DssGraphSpiderLines:739,DssGraphPolarStartAngle:740,DssGraphMetric3:742,DssGraphRadarCircularDataLines:782,DssGraphRemoteAxis:784,DssGraphConnectFirstLast:790,DssGraphGaugeShowAxisLabelsOutside:791,DssGraphGaugeShowNeedle:792,DssGraphTailShape:793,DssGraphPieForceRound:794,DssGraphGaugeStyleValue:795,DssGraphGaugeBorderStyleValue:796,DssGraphGaugeBorderThicknessValue:797,DssGraphGaugeRangeThicknessValue:798,DssGraphGaugeRangeStartAngleValue:799,DssGraphGaugeRangeStopAngleValue:800,DssGraphGaugeNeedleStyleValue:801,DssGraphCurvedLines:804,DssGraphAreaBevelEffect:879,DssGraphFontAntiAlias:881,DssGraphFormatDataTextY3:695,DssGraphFormatDataTextY4:717,DssGraphColorPalette:10000,DssGraphOriContent:10001,DssGraphFillEffect:10002,DssGraphGradient:10003,DssGraphSDShowToolTip:10004,DssGraphSDToolTip:10005,DssGraphSDRegressionType:10006,DssGraph2LogScale:10007,DssGraphManualMajor:10008,DssGraphManualMinor:10009,DssGraph2ScaleDirection:10010,DssGraphShow2DAxisLine:10011,DssGraph2ExcludeZero:10012,DssGraph2ScaleUseMax:10013,DssGraph2ScaleUseMin:10014,DssGraph2ScaleMax:10015,DssGraph2ScaleMin:10016,DssGraphShow2DAxisLabels:10017,DssGraph2ScaleEndMax:10018,DssGraph2ScaleEndMin:10019,DssGraphShow2DAxisMajor:10020,DssGraphShow2DAxisMinor:10021,DssGraph2DSide:10022,DssGraphStyleMajor:10023,DssGraphStyleMinor:10024,DssGraphCountMajor:10025,DssGraphCountMinor:10026,DssGraphShowTotalValue:10027,DssGraph2DPie:10028,DssGraphShowDataValue:10029,DssGraphShowDVPercent:10030,DssGraphShowDataLabel:10031,DssGraphShowPieLabelOnSide:10032,DssGraphShowMarker:10033,DssGraphShowMetric1:10034,DssGraphShowMetric2:10035,DssGraphShowMetric3:10036,DssGraphMetric1Style:10037,DssGraphMetric2Style:10038,DssGraphMetric3Style:10039,DssGraphShowLine:10040,DssGraphShowToolTip:10041,DssGraphToolTip:10042,DssGraphAxisAutoFit:10043,DssGraphAxisStagger:10044,DssGraphAxisScaleFreq:10045,DssGraphMetric1Value:10046,DssGraphMetric2Value:10047,DssGraphMetric3Value:10048,DssGraph2AxisFormatText:10049,DssGraph2AxisFormatDataText:10050,DssGraphDPI:10051,DssGraphDocSize:10052,DssGraphAutoArrange:10053,DssGraph2DSplitYAutomatic:10054,DssGraphHistogramRangeMin:10055,DssGraphHistogramRangeMax:10056,DssGraphHistogramBuckets:10057,DssGraphGaugeSAngle:10058,DssGraphGaugeEAngle:10059,DssGraphGaugeThickness:10060,DssGraphGauge1Show:10061,DssGraphGauge1Min:10062,DssGraphGauge1Max:10063,DssGraphGauge2Show:10064,DssGraphGauge2Min:10065,DssGraphGauge2Max:10066,DssGraphGauge3Show:10067,DssGraphGauge3Min:10068,DssGraphGauge3Max:10069,DssGraphGauge4Show:10070,DssGraphGauge4Min:10071,DssGraphGauge4Max:10072,DssGraphGauge5Show:10073,DssGraphGauge5Min:10074,DssGraphGauge5Max:10075,DssGraphAxisDataTextPlace:10076,DssGraphAxisNumberFormat:10077,DssGraphAxisDataNumberFormat:10078,DssGraphAxisHasErrorBar:10079,DssGraphAxisHasMiddleValue:10080,DssGraphHeight:10081,DssGraphWidth:10082,DssGraphPicture:10083,DssGraph3DTurnXCounterClockwise:10084,DssGraph3DTurnYCounterClockwise:10085,DssGraph3DTurnZCounterClockwise:10086,DssGraph3DTurnXClockwise:10087,DssGraph3DTurnYClockwise:10088,DssGraph3DTurnZClockwise:10089,DssGraph3DMoveXTowardsOrigin:10090,DssGraph3DMoveYTowardsOrigin:10091,DssGraph3DMoveZTowardsOrigin:10092,DssGraph3DMoveXAwayFromOrigin:10093,DssGraph3DMoveYAwayFromOrigin:10094,DssGraph3DMoveZAwayFromOrigin:10095,DssGraph3DDecreaseCubeX:10096,DssGraph3DDecreaseCubeY:10097,DssGraph3DDecreaseCubeZ:10098,DssGraph3DIncreaseCubeX:10099,DssGraph3DIncreaseCubeY:10100,DssGraph3DIncreaseCubeZ:10101,DssGraph3DDecreaseWallX:10102,DssGraph3DDecreaseWallY:10103,DssGraph3DDecreaseWallZ:10104,DssGraph3DIncreaseWallX:10105,DssGraph3DIncreaseWallY:10106,DssGraph3DIncreaseWallZ:10107,DssGraph3DPanXLeft:10108,DssGraph3DPanYUp:10109,DssGraph3DRelative:10110,DssGraph3DPanXRight:10111,DssGraph3DPanYDown:10112,DssGraph3DAbsolute:10113,DssGraph3DZoomIn:10114,DssGraph3DIncreasePerspectiveDistortion:10115,DssGraph3DStepSize:10116,DssGraph3DZoomOut:10117,DssGraph3DDecreasePerspectiveDistortion:10118,DssGraph3DInitMatrix:10119,DssGraphGaugeQBShow:10120,DssGraphGaugeQBStart:10121,DssGraphGaugeQBStop:10122,DssGraphEnhancedSeriesEffect:10123,DssGraphLocale:10124,DssGraph3DViewStructName:10125,DssGraphLabelsDistance:10126,DssGraphLegendDetails:10127,DssGraphDefaultsInitialized:10128,DssGraphShow3DAxisMajor:10129,DssGraphGradientColorMode:10130,DssGraphLegendDetailsNEW:10131,DssGraphFrameLocationNEW:10132,DssGraph3DColTitleLocationNEW:10133,DssGraph3DRowTitleLocationNEW:10134,DssGraphLabelsDistanceNEW:10135,DssGraphDocSizeNEW:10136,DssGraphUseManualHistogramBuckets:10137,DssGraphFontSize100:10138,DssGraphUseSpecialSeries:10140,DssGraphIsOnlyAdditionalMetrics:10170};mstrmojo.vi.viz.EnumVizStyles={GRAPH_MATRIX:"GraphMatrixVisualizationStyle",NETWORK:"NetworkVisualizationStyle",HEAT_MAP:"VIHeatMapVisualizationStyle",GOOGLE_MAP:"GoogleMapVisualizationStyle",ESRI_MAP:"ESRIMapVisualizationStyle",IMAGE_LAYOUT:"ImageLayoutVisualizationStyle"};mstrmojo.chart.model.enums.EnumDSSGraphObject={DssGraphNull:-3,DssGraphBackground:1,DssGraphFrame:2,DssGraphFootnote:3,DssGraphSubtitle:4,DssGraphTitle:5,DssGraphLegendArea:6,DssGraphLegendLine:7,DssGraphLegendMarker:8,DssGraphLegendText:9,DssGraphCurve:257,DssGraphDataLine:258,DssGraphDataMarker:259,DssGraphDataText:260,DssGraphDivBiPolar:261,DssGraphErrorBar:262,DssGraphLinrExp:263,DssGraphLinrLine:264,DssGraphLinrLog:265,DssGraphLinrNatLog:266,DssGraphLinrNPoly:267,DssGraphLinrText:268,DssGraphMeanLine:269,DssGraphMovAvgLine:270,DssGraphO1Body:271,DssGraph2DO1Label:272,DssGraphO1Major:273,DssGraphO1Minor:274,DssGraphO1Super:275,DssGraphO1Title:276,DssGraphO2Body:277,DssGraph2DO2Label:278,DssGraphO2Major:279,DssGraphO2Minor:280,DssGraphO2Title:281,DssGraphConnectDataLine:282,DssGraphRiser:286,DssGraphRiserShadow:287,DssGraphStdDevLine:288,DssGraphX1Body:289,DssGraphX1Label:290,DssGraphX1Major:291,DssGraphX1Minor:292,DssGraphXTitle:293,DssGraphY1Body:295,DssGraphY1Label:296,DssGraphY1Major:297,DssGraphY1Minor:298,DssGraphY1Title:299,DssGraphY2Body:301,DssGraphY2Label:302,DssGraphY2Major:303,DssGraphY2Minor:304,DssGraphY2Title:305,DssGraph3DShowColumnHeaders:318,DssGraph3DShowLeftHeaders:321,DssGraph3DShowRightHeaders:323,DssGraph3DShowRowHeaders:325,DssGraphOBPBox:329,DssGraphOBPMedian:330,DssGraphOBPStem:331,DssGraphOBPTail:332,DssGraphPieFeelerLine:337,DssGraphPieFeelerLabel:338,DssGraphPieGroupLabel:339,DssGraphPieRingLabel:340,DssGraphPieSlice:341,DssGraphSeriesTitle:398,DssGraphConnectStackLine:399,DssGraphDataTextStackTotal:401,DssGraphOPILBLValue:418,DssGraphUserLine1:414,DssGraphUserLine2:415,DssGraphUserLine3:416,DssGraphUserLine4:417,DssGraphDataTextConnectLine:431,DssGraphGauge:444,DssGraphGaugeTitle:450,DssGraphGaugeRange:451,DssGraphY3Body:477,DssGraphY3Label:478,DssGraphY3Major:479,DssGraphY3Minor:480,DssGraphY4Body:483,DssGraphY4Label:484,DssGraphY4Major:485,DssGraphY4Minor:486,DssGraph3DColHeader:512,DssGraph3DColTitle:515,DssGraph3DDataText:518,DssGraph3DRowHeader:552,DssGraph3DRowTitle:555,DssGraph3DRYHeader:558,DssGraph3DRYTitle:561,DssGraphGaugeBorder:1319,DssGraphGaugeNeedleBase:1320,DssGraphGaugeNeedleBaseLine:1330,DssGraphZBody:10003,DssGraphTrendLine:10004,DssGraphY1RightBody:10005,DssGraphY1RightTitle:10006,DssGraphReferenceLine:10007,DssGraphStraightLine:10008,DssGraphTargetLine:10009,DssGraphRefLineText:10010,DssGraphTrendLineText:10011,DssGraphUserLabel1:100100,DssGraphUserLabel2:100101,DssGraphUserLabel3:100102,DssGraphUserLabel4:100103,DssGraphX2Body:100200,DssGraphX2Label:100201,DssGraphX2Major:100202,DssGraphX2Minor:100203,DssGraphX2Title:100204};mstrmojo.chart.enums.EnumGraphMajorType={GMT_INVALID:0,GMT_CATEGORY:1,GMT_PIE:2,GMT_SCATTER:3,GMT_POLAR:4,GMT_RADAR:5,GMT_BUBBLE:6,GMT_STOCK:7,GMT_HISTOGRAM:8,GMT_GAUGE:9,GMT_FUNNEL:10,GMT_BOX:11,GMT_GANTT:12,GMT_SPECTRAL:13,GMT_TABLE:14,GMT_3D_CATEGORY:15,GMT_3D_SCATTER:16,GMT_GRID:17};mstrmojo.VisEnum={ControlType:{BUTTON:"button",LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",SPLITTER:"splitter",GM_ROW_HEADER:"rh",GM_ROW_HEADER_TEXT:"rhtext",GM_ROW_HEADER_EXTRA:"rhext",GM_COL_HEADER:"ch",GM_COL_HEADER_TEXT:"chtext",GM_COL_HEADER_EXTRA:"chext",GM_YAXIS:"y",GM_XAXIS:"x",GM_YLABEL:"y-label",GM_XLABEL:"x-label",GM_ROW_HEADER_TITLE:"rht",GM_ROW_HEADER_TITLE_TEXT:"rhttext",GM_COL_HEADER_TITLE:"cht",GM_COL_HEADER_TITLE_TEXT:"chttext",GM_MINI_CHART:"chart",GM_TEXT_BODY:"text-body",GM_SHAPE:"shape",GM_MARKER:"marker",GM_SET_SHAPE:"set-shape",GM_YAXIS2:"y2",GM_XAXIS2:"x2",GM_TREND_LINE:"trendLine",GM_TREND_LINE_HOVER:"trendLineHover",GM_TREND_LINE_SELECT:"trendLineSelect",GM_REF_LINE:"referenceLine",GM_REF_LINE_HOVER:"referenceLineHover",GM_REL_LINE_SELECT:"referenceLineSelect",GM_HIGHLIGHT_BOX:"highlight-box",GM_AXIS_TEXT:"axis-text",GM_AXIS_WORD:"axis-word",GM_SVG_X_NUMERIC:"svg-x-numeric",GM_SVG_X_CATEGORY:"svg-x-category",GM_SVG_Y_NUMERIC:"svg-y-numeric",GM_SVG_Y_CATEGORY:"svg-y-category",GM_X_NUMERIC:"x-numeric",GM_X_CATEGORY:"x-category",GM_Y_NUMERIC:"y-numeric",GM_Y_CATEGORY:"y-category",GM_SVG_CHART:"svg-chart",GM_DATA_LABEL:"data-label",GM_YAXIS_LINE:"y-line",GM_XAXIS_LINE:"x-line",GM_YAXIS2_LINE:"y2-line",GM_XAXIS2_LINE:"x2-line",LGD_TITLE:"lgd-title",LGD_TEXT:"lgd-text",LGD_COLORBOX:"lgd-colorbox",LGD_COLORBOX_CTN:"lgd-colorbox-ctn",LGD_CANVAS:"lgd-canvas",LINE_CONTAINER:"line-ctn",GM_V_MATRIX_LINE:"v-line",GM_H_MATRIX_LINE:"h-line",GM_V_CHART_LINE:"v-ctline",GM_H_CHART_LINE:"h-ctline",GM_CHART_ROW:"ct-row",GM_CHART_COL:"ct-col",GM_H_GRID_LINE:"h-gline",GM_V_GRID_LINE:"v-gline",GM_H_MINOR_GRID_LINE:"h-gline-minor",GM_V_MINOR_GRID_LINE:"v-gline-minor",GM_ORIGIN_LINE:"originLine",GM_ORIGIN_LABEL:"origin-label",GM_ORIGIN_LINE_H:"origin-line-h",GM_ORIGIN_LINE_V:"origin-line-v",GM_ORIGIN_LABEL_H:"origin-label-h",GM_ORIGIN_LABEL_V:"origin-label-v",GM_DUMMY_A:"dummy-a",GM_V_EXTRA_LINE:"v-extra-line",GM_REF_LABEL:"ref-label",GM_RIGHT_BORDER:"border-r",GM_BOTTOM_BORDER:"border-b"},GMDropZoneID:{ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10},NETWORK_LOCAL_PROPS:{ZOOM_FACTOR:"zf",NODE_POSITION:"np"},NETWORK_PROPERTIES:{showLegend:"showLegend",showEdgeDirection:"showedgearrow",showTransition:"animatelayout",nodeSizeAggregation:"nodesizeaggfunc",minNodeSize:"minns",maxNodeSize:"maxns",themeType:"th",circleLabelFont:"BubFnt",modifiedNodes:"mn",layoutMode:"layout",legendPosition:"legendposition",dragMode:"mode",bubbleStyle:"bbs",propsCategory:"pc",lgdBgFillClr:"lgdBgFillClr",lgdBgFillTrans:"lgdBgFillTrans",lgdFntClr:"lgdFntClr",lgdFntSz:"lgdFntSz",lgdFntFml:"lgdFntFml",lgdFntStyle:"lgdFntStyle"},NETWORK_LAYOUT:{CIRCULAR:"circular",LINEAR:"linear",FORCE_DIRECTED:"forceDirected"},NETWORK_DRAG_MODE:{pan:0,select:1},NETWORK_AGGREGATION_METHOD:{"Count of":0,"Sum of":1,"Average of":2,"Min of":3,"Max of":4},NETWORK_MIN_NODE_SIZE_TYPE:{PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3},NETWORK_MAX_NODE_SIZE_TYPE:{AUTOMATIC:1,MANUAL:2},NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE:[0,0.2],HEATMAP_PROPERTIES:{showLegend:"showLegend",deleteButton:"ed",showMetricValues:"mv",labelSize:"lb",layout:"la",themeType:"th",headerType:"he",deletedList:"dl",refreshType:"rt",metricList:"ml",colorByType:"cbt",absoluteFixed:"abs",blendColor:"blc",background:"bg",legendBackground:"lbg",headerColors:"hcl",fonts:"fts",propsCategory:"pc",attrColorByOpacity:"acbo",metricColorByOpacity:"mcbo"},HEATMAP_LABEL_SIZE:{On:0,Off:1,Proportional:2},MAPS_PROPERTIES:{SHOW_LEGEND:"showLegend"},VIS_CARDLIMIT:{GRID:250,NON_GRID:8000},GMLegendDataType:{COLOR_BY:1,SIZE_BY:2},GMLegendFormatingPropertyTag:{LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",COLOR_SQUARE_COLOR:"clrSqrClr"},LegendPropertyTag:{LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr"},EnumLegendMode:{RESTORED:1,MINIMIZED:2},EnumColorRankMode:{INVALID:-1,VALUE:0,TOP:1,BOTTOM:2,TOP_PERCENT:3,BOTTOM_PERCENT:4},FormNameDisplayType:{OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4},SERVER_JSON_ERROR_TYPE:{EMPTY_DATA:0,NO_DATASET:1,AE_ERROR:2,NO_TEMPLATE_UNIT:3},NETWORK_CIRCLE_BORDER_WIDTH:8,IMAGELAYOUT_PROPERTIES:{DISPLAY_MODE:"mt",MAX_SIZE_TYPE:"ty",MAX_SIZE_VALUE:"val",MIN_SIZE_TYPE:"mst",MIN_SIZE_VALUE:"msv",MAP_FILE_PATH:"mf",SHAPE_FILL_OPC_PER:"shapeFillTrans",SHAPE_FILL_COLOR:"shapeClr",SHAPE_BORDER_STYLE:"shapeBorderCmbStyle",SHAPE_BORDER_COLOR:"shapeBorderClr",DATA_LABEL_SWITCH:"dls",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",BLANK_MAP_BORDER_STYLE:"blankMapBorderStyle",BLANK_MAP_BORDER_COLOR:"blankMapBorderClr",BLANK_MAP_COLOR:"blankMapClr",DEFAULT_MAP_COLOR:"dftMapClr",DEFAULT_BUBBLE_COLOR:"dftBubbleClr",DEFAULT_MAP_BORDER_COLOR:"dftMapBorderClr",DEFAULT_BUBBLE_BORDER_COLOR:"dftBubbleBorderClr",LEGEND_FONT_SIZE:"lgFntSz",LEGEND_FONT_FAMILY:"lgFntFml",LEGEND_FONT_COLOR:"lgFntClr",LEGEND_FONT_STYLE:"lgFntStyle",LEGEND_BACKGROUND_COLOR:"lgBgClr",LEGEND_OPC_PER:"lgBgFillTrans",LEGEND_POSITION:"lgPos",LEGEND_SHOW:"lgShow",LEGEND_MODE:"lgMode",LEGEND_SCALE:"lgScale",H_MATRIX_LINE_COLOR:"hMatrixLnClr",V_MATRIX_LINE_COLOR:"vMatrixLnClr",ALL_MATRIX_LINE_COLOR:"allMatrixLnClr",H_MATRIX_LINE_STYLE:"hMatrixLnCmbStyle",V_MATRIX_LINE_STYLE:"vMatrixLnCmbStyle",ALL_MATRIX_LINE_STYLE:"allMatrixLnCmbStyle"}};(function(){function B(L,Q,N){var M,O;M=0;if(N){M=Math.max(L,L-Q);M=Math.max(M,-Q);}else{M=L-Q;}if(M===0){this.mIsShown=false;return 1;}var P=M;O=1;while(M<1){M*=10;O/=10;}while(M>=10){M/=10;O*=10;}if(M<1.8){O*=2;O/=10;}else{if(M<3.1){O*=4;O/=10;}else{if(M<4.6){O*=5;O/=10;}else{if(M>=8.1){O*=2;}}}}return O;}function K(P){var L,N;this.mStep=B.call(this,this.mMaximum,this.mMinimum,P.mAlwaysIncludeZero);this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:this.mMinTick;if(P.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}var M=this.mMaxTick-this.mMinTick;if(this.mStep>=M){return ;}L=Math.floor((this.mMaxTick-this.mMinTick+this.mStep/100)/this.mStep)+1;for(N=1;N<L-1;++N){var O=this.mMinTick+N*this.mStep;this.mTicks.push(O);}}function C(M){var L;this.mMaxTick=1;this.mStep=this.mMinimum<0?0.2:0.1;if(M.mUseCustomMinMax){this.mMaxTick=M.mAxisMaxValue;this.mMinTick=M.mAxisMinValue;this.mMaxTick=Math.min(1,this.mMaxTick);this.mMinTick=Math.max(-1,this.mMinTick);this.mStep=0.1;}else{if(this.mMaximum>=0.5){this.mMaxTick=1;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:(this.mMinTick>0?0:this.mMinTick);if(this.mMinimum<-0.5){this.mMinTick=-1;}}else{if(this.mMaximum>0){this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=-1;}else{this.mStep=0.1;this.mMaxTick=0;this.mMinTick=-1;}}}for(L=this.mMinTick+this.mStep;L+0.01<this.mMaxTick;L+=this.mStep){this.mTicks.push(Math.round(L*100)/100);}}function I(L){return Math.log(L)/Math.log(10);}function H(O){var N,L,M;this.mStep=1;if(this.mMaximum<=0){this.mMinTick=1;this.mMaxTick=10;return ;}if(this.mMinimum<=0){L=this.mMaximum>1?0:-1;this.mMinTick=Math.pow(10,L);if(O.mUseCustomMinMax){this.mMaxTick=this.mMaximum;N=Math.floor(I.call(this,this.mMaximum));if(I.call(this,this.mMaximum)===N){N--;}}else{N=Math.ceil(I.call(this,this.mMaximum));this.mMaxTick=Math.pow(10,N);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}return ;}if(O.mUseCustomMinMax){N=I.call(this,this.mMaximum);L=I.call(this,this.mMinimum);this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;}else{N=Math.ceil(I.call(this,this.mMaximum));L=Math.floor(I.call(this,this.mMinimum));this.mMaxTick=Math.pow(10,N);this.mMinTick=Math.pow(10,L);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}}function J(L){this.mTicks.splice(0,this.mTicks.length);if(this.mIsPercent){return C.call(this,L);}if(L.mUseLogarithmicScale){return H.call(this,L);}K.call(this,L);}function G(Q){if(Q.mUseCustomMinMax||Q.mUseLogarithmicScale){return ;}var M=0.1,O=false,L=false,P=[];this.GetTicks(P);if(P.length>=2){var N=P.length;L=((Math.abs(this.mMaximum-P[N-2])<M*this.mStep));O=((Math.abs(this.mMinimum-P[1])<M*this.mStep));if(this.mIsPercent){L=false;}}if(L&&O){this.mMinTick=this.mMinimum;this.mMaxTick=this.mMaximum;Q.mUseMinValue=Q.mShowMinLabel=true;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(L){this.mMaxTick=this.mMaximum;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(O){this.mMinTick=this.mMinimum;Q.mUseMinValue=Q.mShowMinLabel=true;}else{}}}if(Q.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}mstrmojo.chart.common.ScalePlate=mstrmojo.provide("mstrmojo.chart.common.ScalePlate",{mOptions:{mShowMinLabel:true,mShowMaxLabel:true},isStackedChart:false,mStep:0,mIsPercent:false,mMinimum:0,mMaximum:0,mMaxTick:0,mMinTick:0,mTicks:[],clear:function F(){this.isStackedChart=this.mIsPercent=false;this.mMinimum=this.mMaximum=0;this.mMinTick=this.mMaxTick=0;this.mStep=0;this.mTicks=[];},GetTicks:function A(M){if(this.mOptions.mShowMinLabel){M.push(this.mMinTick);}var L;for(L=0;L<this.mTicks.length;++L){M.push(this.mTicks[L]);}if(this.mOptions.mShowMaxLabel){M.push(this.mMaxTick);}},getMaxMinTickValue:function D(O,N,L,M){this.computeTicks(O,N,L,M);return{Max:this.mMaxTick,Min:this.mMinTick};},computeTicks:function E(Q,P,L,N){this.mMinimum=N;this.mMaximum=L;this.mIsPercent=!!(P&1);this.isStackedChart=!!(P&2);var O=1e-14;if(!Q.mUseLogarithmicScale&&this.isStackedChart){this.mMinimum=Math.min(this.mMinimum,0);this.mMaximum=Math.max(this.mMaximum,0);}if(Q.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Q.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Q.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<O){if(this.mMinimum<-O||this.mMinimum>O){var M=Math.abs(this.mMinimum)*0.5;this.mMaximum=this.mMaximum+M;this.mMinimum=this.mMinimum-M;}else{this.mMinimum=-6;this.mMaximum=6;}}J.call(this,Q);if(Q.mUseLogarithmicScale&&this.isStackedChart){this.mMaximum=Q.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Q.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);H.call(this,Q);}G.call(this,Q);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom,D=Math;mstrmojo.gm._IsAnchorable={PLACEMENT_ABOVE:1,PLACEMENT_BELOW:2,PLACEMENT_LEFT:3,PLACEMENT_RIGHT:4,anchor:null,anchorPosition:null,boundary:null,boundaryPosition:null,popupNodeName:"infoNode",tipNodeName:"tipNode",baseTipClass:"arrow",infoNodeOffset:25,popupNodeOffset:0,placementOrder:[this.PLACEMENT_ABOVE,this.PLACEMENT_BELOW,this.PLACEMENT_LEFT,this.PLACEMENT_RIGHT],hasScrollbars:function G(){return(!mstrApp.isTouchApp||!mstrApp.isTouchApp());},positionDialog:function E(){if(!this.anchorPopup()){if(typeof this._super==="function"){this._super();}}},positionTipNode:function A(I){var J=this.baseTipClass,K=this[this.tipNodeName];K.className=J+" "+I;},getTipDimension:function B(){var J=this[this.tipNodeName],I=C.position(J);return I;},anchorPopup:function F(){this.positionTipNode("top");var K=this.anchor,b=this.boundary,n=this[this.popupNodeName],q=this.infoNodeOffset,h=this.popupNodeOffset,k=this.hasScrollbars(),Y=this.anchorPosition||C.position(K,true),M=this.boundaryPosition||C.position(b,true),s=M.w,L=M.h,c=n.offsetWidth,O=n.offsetHeight,U=c/2,I=O/2,W=this.getTipDimension(),g=D.min(W.h,W.w),P=D.max(W.h,W.w)/2;if(k){s-=15;L-=15;}var Z=C.contains(b,n),j=Z?0:M.y,r=s/2-U,Q=L/2-I+j,m=-1000,t=-1000;if(Z){Y.x=Y.x-M.x;Y.y=Y.y-M.y;}var f=Y.y+Y.h,N=Y.x+Y.w,e=Y.x>c,o=((N+c)<s),R=Y.y>O,l=((f+O)<L),T=this,V=function(i,w,u){return D.min(D.max(i,u),D.max(w,0));},d=function(){if((Y.x<s)&&R){var i=Y.x+(Y.w/2);T.positionTipNode("bottom");t=Y.y-g-h;Q=t-O+q;r=V(0,s-c,i-U);m=V(Y.x,N,i)-P;return true;}return false;},J=function(){if((Y.x<s)&&l){var i=Y.x+(Y.w/2);T.positionTipNode("top");t=f+h;Q=t+g-q;r=V(0,s-c,i-U);m=V(Y.x,N,i)-P;return true;}return false;},a=function(){if((Y.y<L)&&e){var i=Y.y+(Y.h/2);T.positionTipNode("right");m=Y.x-g-h;r=m-c+q;Q=V(j,L-O,i-I);t=V(Y.y,f,i)-P;return true;}return false;},X=function(){if((Y.y<L)&&o){var i=Y.y+(Y.h/2);T.positionTipNode("left");m=N+h;r=m+g-q;Q=V(j,L-O,i-I);t=V(Y.y,f,i)-P;return true;}return false;},S=[],p;for(p=0;p<this.placementOrder.length;p++){switch(this.placementOrder[p]){case this.PLACEMENT_ABOVE:S.push(d);break;case this.PLACEMENT_BELOW:S.push(J);break;case this.PLACEMENT_LEFT:S.push(a);break;case this.PLACEMENT_RIGHT:S.push(X);break;}}for(p=0;p<S.length;p++){if(S[p]()){break;}}Q=D.round(Q);r=D.round(r);t=D.round(t);m=D.round(m);this.applyPopupNodePos(Q,r,t,m);return true;},applyPopupNodePos:function H(K,J,M,I){var O=this[this.tipNodeName],L=O.style,P=this[this.popupNodeName],N=P.style;L.top=M+"px";L.left=I+"px";N.top=K+"px";N.left=J+"px";}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var C=function(R){var Q=(mstrApp.docModelData&&mstrApp.docModelData.mid)||"";return R.k+"-"+Q;},E={},L=mstrmojo.array;mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",{_mixinName:"mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",postBuildRendering:function G(){this._super();this.setup();if(!this.getExp()){if(E[C(this)]){this.highlight.apply(this,E[C(this)]);}else{this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}},getExp:function(){var Q=this.model.data,R=Q&&Q.sc&&Q.sc.exp;return R;},clearsBrushingOnHighlight:true,brushSub:null,clearSub:null,getAssociatedNodes:function B(){var Q=this.defn.an;return Q&&Q.length>0?Q:[];},hasAssociatedNodes:function K(){var Q=this.getAssociatedNodes();return Q.length>0;},getDocModelForEvent:function P(){return this.model&&this.model.docModel;},setup:function H(){var Q=this.getDocModelForEvent(),R=this.id;if(Q){[this.brushSub,this.clearSub].forEach(function(S){if(S){S.clear();}});this.brushSub=Q.attachEventListener("brushing",R,this.onBrushing);this.clearSub=Q.attachEventListener("clearBrush",R,this.onClearBrushing);}},handlesMultiSelection:function I(){return(this._super&&this._super())||this.getAssociatedNodes().length>0;},getHighlightKeys:function F(){var R=[],Q=this.getAssociatedNodes();Q.forEach(function(S){R.push(S.k);});return R;},onSelectionChange:function J(R){var S=false;if(this._super){S=this._super(R);}var Q=this.getDocModelForEvent();if(this.clearsBrushingOnHighlight){Q.raiseEvent({name:"clearBrush",from:this});}if(this.handlesMultiSelection()&&!S){Q.raiseEvent({name:"brushing",from:this,keys:this.getHighlightKeys()});return true;}return false;},onBrushing:function A(R){var Q=R.keys.slice();if(Q.indexOf(this.k)!==-1){if(this.highlight){var S=R.from;this.highlight(S.getSelectionType(),S.getSelectionHash());Q.push(S.k);this.getDocModelForEvent().raiseEvent({name:"clearBrush",from:this,excludeKeys:Q});}else{throw new Error(this.scriptClass+" must implement highlight method.");}}},onClearBrushing:function O(R){var Q=false;if(L.indexOf(R.excludeKeys,this.k)===-1){if(this._super){Q=this._super(R);}if(!Q){var S=this.getAssociatedNodes();if(L.find(S,"k",R.from.k)!==-1){this.clearSelections(true);}}}return true;},highlight:function D(){E[C(this)]=arguments;if(this._super){this._super.apply(this,arguments);}},clearSelections:function N(){delete E[C(this)];if(this._super){this._super.apply(this,arguments);}},updateAssociatedNodesOnMove:function M(){this.clearSelections(true);this.endSelections();delete this.defn.an;}});}());(function(){var E=false;mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.netviz.PropertyParser=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.netviz.PropertyParser",methods:{unmarshal:function(W,V){var U=this;U._withConfig({unmarshal:true},function(){U.parsedProps[W]=V;});},marshal:function(V){var U=this;return U._withConfig({marshal:true},function(){return U.parsedProps[V];});}},init:function(U){if(this._super){this._super(U);}this.config={marshal:false,unmarshal:false};this.parsedProps={};},parse:function(V,X){var W=this,Y=this.parsedProps,U=this.methods;this.raw=V;this.schema=X;Object.keys(U).forEach(function(Z){W.defineMethod(Z,U[Z]);});Object.keys(X).forEach(function(Z){var a=X[Z];W.defineProperty(Z,a.type);Y.unmarshal(Z,V[a.key]);});return Y;},defineProperty:function(U,c){var b=this,W=b.config,a=this.parsedProps,V=(this.schema||{})[U]||{},g=V.preSet,Y=V.postSet,X=V.preGet,d=V.postGet,f=V.key,e=this.raw,Z;if(!T(c)){throw new TypeError("type does not implement required methods");}Object.defineProperty(a,U,{enumerable:true,get:function(){var h=Z;if(h!==undefined&&W.marshal){if(X instanceof Function){h=X.call(a,h,U,e,f);}h=c.marshal(h);if(d instanceof Function){h=d.call(a,h,U,e,f);}}return h;},set:function(i){var h=i;if(W.unmarshal){if(g instanceof Function){h=g.call(a,h,U,e,f);}h=c.unmarshal(h);if(Y instanceof Function){h=Y.call(a,h,U,e,f);}}if(h!==undefined&&!c.validate(h)){throw new TypeError("Invalid value in setter. Consider unmarshal(prop, val).");}Z=h;}});},defineMethod:function(X,U){var V=this,W=V.parsedProps;if(!L(X)||!(U instanceof Function)){return ;}Object.defineProperty(W,X,{enumerable:false,value:U.bind(V)});},_withConfig:function(W,Z){var X=this.config,Y=Object.keys(W||{}),V=Y.reduce(function(b,a){b[a]=X[a];return b;},{}),U;Y.forEach(function(a){X[a]=W[a];});U=Z();Y.forEach(function(a){X[a]=V[a];});return U;}});var O=Object.prototype.toString,G=mstrmojo.netviz.PropertyParser;function J(X,W,V){var U=parseInt(X,W);return isNaN(U)?V:U;}function N(U){return O.call(U)==="[object Number]";}function L(U){return O.call(U)==="[object String]";}var I=mstrmojo.declare(mstrmojo.Base,[],{scriptClass:"mstrmojo.netviz.PropertyParser.Property",init:function(U){if(this._super){this._super();}this.defval=U.defval;},marshal:function(U){return JSON.stringify(U).replace(/"/g,"'");}});G.BooleanProperty=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.PropertyParser.BooleanProperty",unmarshal:function(U){if(U===undefined){return this.defval;}return U.toString()==="true";},validate:function(U){return U===true||U===false||O.call(U)==="[object Boolean]";}});G.IntegerProperty=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.PropertyParser.IntegerProperty",unmarshal:function(U){return J(U,10,this.defval);},validate:N});G.FloatProperty=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.PropertyParser.FloatProperty",unmarshal:function(V){var U=parseFloat(V);return isNaN(U)?this.defval:U;},validate:N});G.JsonProperty=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.PropertyParser.JsonProperty",unmarshal:function(U){function V(X){var W;if(X!==undefined){try{W=JSON.parse(X.replace(/'/g,'"'));}catch(Y){W=X;}}return W;}if(typeof U==="string"){return V(U);}if(U!==undefined&&U!==null){return U;}return this.defval;},validate:function(U){return true;}});G.StringProperty=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.PropertyParser.StringProperty",unmarshal:function(U){if(U!==undefined&&U!==null){return U.toString();}return this.defval;},marshal:function(U){return U;},validate:L});var K=["BooleanProperty","StringProperty","JsonProperty","IntegerProperty","FloatProperty"];K.forEach(function(U){var V=G[U];V.preset=function(W){return new V({defval:W});};});function T(U){return Q(U,["marshal","unmarshal","validate"]);}function Q(V,U){if(!V){return false;}return(U||[]).every(function(W){return V[W] instanceof Function;});}if(E){var C=new G(),F=G.BooleanProperty,H=G.IntegerProperty,B=G.FloatProperty,S=G.StringProperty,M=G.JsonProperty;var R={x:1,y:{x:"n+1"},z:true,m:3.14};var P={bp1:"false",bp2:"true",bp3:"",dp1:"12",dp2:22,fp1:23.3,fp2:"3.14",sp1:"foobar",jp1:R,jp3:"transparent"};var A={boolProp1:{key:"bp1",type:F.preset(false)},boolProp2:{key:"bp2",type:F.preset(false)},boolProp3:{key:"bp3",type:F.preset(false)},boolProp4:{key:"bp4",type:F.preset(false)},boolProp5:{key:"bp5",type:F.preset(true)},decimalProp1:{key:"dp1",type:H.preset(-1)},decimalProp2:{key:"dp2",type:H.preset(-1)},decimalPropn:{key:"dpn",type:H.preset(-1)},floatProp1:{key:"fp1",type:B.preset(0)},floatProp2:{key:"fp2",type:B.preset(0)},floatProp3:{key:"fp3",type:B.preset(0.03)},stringProp1:{key:"sp1",type:S.preset("")},stringProp2:{key:"sp2",type:S.preset("string")},jsonProp1:{key:"jp1",type:M.preset({})},jsonProp2:{key:"jp2",type:M.preset({})},jsonProp3:{key:"jp3",type:M.preset("error")}};var D=C.parse(P,A);console.assert(Object.keys(D).length===Object.keys(A).length,"wrong property count");console.assert(D.unmarshal instanceof Function,"unmarshal not found");console.assert(D.marshal instanceof Function,"marshal not found");console.assert(D.boolProp1===false);console.assert(D.boolProp2===true);console.assert(D.boolProp3===false);console.assert(D.boolProp4===false);console.assert(D.boolProp5===true);console.assert(D.marshal("boolProp5")==="true");D.unmarshal("boolProp5","false");console.assert(D.boolProp5===false);console.assert(D.marshal("boolProp5")==="false");console.assert(D.decimalProp1===12);console.assert(D.decimalProp2===22);console.assert(D.decimalPropn===-1);D.unmarshal("decimalProp1",42);console.assert(D.decimalProp1===42);console.assert(D.marshal("decimalProp1")==="42");console.assert(D.floatProp1===23.3);console.assert(D.marshal("floatProp1")==="23.3");console.assert(D.floatProp2===3.14);console.assert(D.floatProp3===0.03);D.unmarshal("floatProp3",100);console.assert(D.floatProp3===100);console.assert(D.stringProp1==="foobar");console.assert(D.stringProp2==="string");D.unmarshal("stringProp2","quux");console.assert(D.marshal("stringProp2")==="quux");D.unmarshal("stringProp2",42);console.assert(D.stringProp2==="42");console.assert(JSON.stringify(D.jsonProp1)===JSON.stringify(R));console.assert(Object.keys(D.jsonProp2).length===0);console.assert(D.jsonProp3==="transparent");console.assert(D.marshal("jsonProp1")===JSON.stringify(R).replace(/"/g,"'"));D.unmarshal("jsonProp2",true);console.assert(D.jsonProp2===true);console.assert(D.marshal("jsonProp2")==="true");console.info("PropertyParser: all tests processed");}}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.gm.GMEnums");var A=mstrmojo.gm.EnumIdentityType;mstrmojo.gm.GMIdentities=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMIdentities"});mstrmojo.gm.HeaderCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.HeaderCellIdentity",eid:undefined,v:undefined,tid:undefined,n:undefined,tui:undefined,fid:undefined,o:undefined,isRowAttribute:undefined,at:undefined,dei:undefined,dpt:undefined});mstrmojo.gm.GeneralIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GeneralIdentity",objType:undefined});mstrmojo.gm.TitleCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.TitleCellIdentity",tid:undefined,fid:undefined,n:undefined,tui:undefined,isRowAttribute:undefined,otp:undefined,init:function(B){this.fid=B.fid;this.tid=B.id;this.isRowAttribute=B.isRowAttribute;if(B.isRowAttribute){this.objType=A.ROW_TITLE;}else{this.objType=A.COL_TITLE;}this.n=B.n;this.otp=B.otp;this.ost=B.ost;this.tui=B.tui;}});mstrmojo.gm.MetricAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.MetricAxisTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AttributeAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AttributeAxiTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AxisIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AxisIdentity",isNumericAxis:undefined,metricIdxArr:undefined,attrIdArr:undefined});mstrmojo.gm.ColorSquareIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.ColorSquareIdentity",init:function(B){this._super(B);this.comb=this.getElementsCombination();},getElementsCombination:function(){var B,F=this.token,C,H,G,E,I,D;if(F){D=[];C=F.levels;H=F.elements;G=F.types;B=C.length;for(E=0;E<B;E++){I={eid:H[E],tid:C[E]};if(G){I.tp=G[E];}D.push(I);}return D;}return undefined;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.DSSTimeUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSTimeUtil",DaysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],DaysBeforeMonth:[0,31,59,90,120,151,181,212,243,273,304,334],DateAbove1970:[1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981]});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.vi.ui.rw._HasVisSelections");mstrmojo.requiresClsP("mstrmojo.vi.ui.rw","_HasVisSelections","SelectionType");var B=mstrmojo,D=B.array,E=B.hash;var F=2;function C(I){var H=-1;var J=this.modelData.gts.row||[],G=J.length,K;for(K=0;K<G;K++){if(J[K].id===I){H=K;}}return H;}mstrmojo.heatmap.vi._SupportHeatmapBrushesAndHighlights=mstrmojo.provide("mstrmojo.heatmap.vi._SupportHeatmapBrushesAndHighlights",{_mixinName:"mstrmojo.heatmap.vi._SupportHeatmapBrushesAndHighlights",prepareSelectedNodesInfo:function(){this.clearSelections();var J=this,H=this.attSpan,M=this.modelData.ghs.rhs.items,I=this.modelData.gts.row,K=[],L=this.previousSelected,G={};D.forEach(L,function(V){var b=0,O=V.level,T=(V.index===undefined)?V.indices[0]:V.index,U=M[T].items,W,Z,R,a,S,Q,X=[],Y,P;G={};for(S=V.entityChildren?O:0;S<=O;S++){b=0;var N;for(Q=0;Q<S;Q++){N=(!(I[Q].otp===47&&I[Q].ost===12033)&&!!I[Q].cs)?I[Q].cs:1;b+=(N>1)?N:H[Q];}W=I[S];G[W.id]=[];a=[];P=[];Y={n:W.n,tid:W.id};for(Q=b;Q<b+H[S];Q++){Z=U[Q].idx;if(Z===-1){continue;}R=W.es[Z];if(a.indexOf(R)===-1){P.push(R.n);a.push(R);if(Y.eid===undefined){Y.eid=R.id;}}}Y.v=P.join(":");G[W.id].push({id:Y.eid,n:Y.v});X.push(Y);}K.push(X);if(O<I.length-1){J.addAttributeSelection(W.id,Y.eid,Y.v);}else{J.addMetricValueSelection(G);}});return K;},highlight:function(R,I){if(this._super){this._super.apply(this,arguments);}if(this.noHighlightAfterKeepOnlyExcludeDrill){return ;}var S,H,P,G,L,J,K,Q,N=[];function O(f,Y){var d=this.root,b=d&&d.entityChildren,h=this.modelData.gts.row||[],j,a,V,T,U=h.length,c=[],Z=this;if(!Y){Y=[];}if(!E.isEmpty(f)){c.push(d);for(T=0;T<U;T++){j=f[T];a=j&&j.eNm;V=j&&j.eId;var g=[];D.forEach(c,function(k,l){b=k.entityChildren||[];var i=false;D.forEach(b,function(m){if(m.level===T&&((!a&&f.maxIndex>T)||Z.model.compareElementsId(m.id,V))){c.push(m);i=true;}});if(!i&&a){g.push(l);}});D.forEach(g,function(k,i){c.splice(k-i,1);});if(T===0){c.splice(0,1);}var X=c.length,W,e=0;for(W=0;W<X;W++){if(c[W].level===T){e=W;break;}}if(e>0){c.splice(0,e);}}}return Y.concat(c);}if(this.isEmpty()){return ;}var M=function(T){L+=T.n+" ";};for(H in I){if(!I.hasOwnProperty(H)){continue;}S=I[H];Q={};for(P in S){if(!S.hasOwnProperty(P)){continue;}K=C.call(this,P);if(K<0){continue;}if(!Q.hasOwnProperty("maxIndex")){Q.maxIndex=0;}G=S[P]||[];L="";D.forEach(G,M);L=L.substring(0,L.length-1);J=G.length>0?G[0].id:"";Q[K]={eNm:L,eId:J};Q.maxIndex=Math.max(K,Q.maxIndex);}N=O.call(this,Q,N);}this.removeAllSelections();this.previousSelected=N;this.refreshHighlights();},singleUnitSelect:function A(){var I=this.getSelections().length>0||this.clearSelectionsFlag;if(this.clearSelectionsFlag){delete this.clearSelectionsFlag;}if(I){var H=function(){var K=this.model.scm,M=Object.keys(K||{}),O=(M&&M[0])||"",N=this.model.data.gts.row,L=this.model.data.gts.col;D.forEach(N.concat(L),function(P){if(M.indexOf(P.id)!==-1){O=P.id;return false;}});return O;};var J=function(){var K={};K.tid=H.call(this);K.eid="";K.isClearAll=false;K.anchor=this.domNode;K.at=F;K.selections=this.getSelections();K.selectionType=this.getSelectionType();return K;};var G=J.call(this);this.performAction([G]);}},clearSelections:function(){this.clearSelectionsFlag=true;if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var C=Math,I=mstrmojo.dom,K=mstrmojo.css,E="active",L="ready",J=6,F=10,O=10,P={LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",BUTTON:"button"};mstrmojo.util.ui.LassoSelectorParamsType=null;function Q(S,R,T){return function(U){S.call(mstrmojo.all[R],U,T);};}function M(S){var U=S.view,T=I.eventTarget(window,S),R=this.lassoSelector;if(this.clickFromLassoResizer||(T!==R&&this.clickFromCreatingLasso)){I.stopPropogation(U,S);I.preventDefault(U,S);}delete this.clickFromLassoResizer;delete this.clickFromCreatingLasso;}function D(b,U){var R,d,S,Z,a=b.clientX,Y=b.clientY,T=this.lassoSelector,X=U.startX,W=U.startY,V=U.containerPos,e=a-V.x,c=Y-V.y;e=C.min(e,U.maxX);e=C.max(e,U.minX);c=C.min(c,U.maxY);c=C.max(c,U.minY);R=C.abs(e-X);d=C.abs(c-W);Z=C.min(W,c);S=C.min(X,e);T.style.width=R+"px";T.style.height=d+"px";T.style.left=S+"px";T.style.top=Z+"px";U.width=R;U.height=d;U.left=S;U.top=Z;if(R<=O&&d<=O){T.style.visibility="hidden";K.removeClass(T,E);}else{T.style.visibility="visible";K.addClass(T,E);document.body.style.cursor="crosshair";}}function H(T,W){var V=window.document,S=this.lassoSelector,U=W.width,R=W.height;I.detachEvent(V,"mousemove",W.fnMove);I.detachEvent(V,"mouseup",W.fnUp);delete W.fnMove;delete W.fnUp;document.body.style.cursor="default";if(!U||U===0||!R||R===0){this.dismissLassoSelector();}else{W.ctrlKey=T.ctrlKey;this.lassoSelected(W);this.clickFromCreatingLasso=true;K.addClass(S,L);this.positionBoxResizers();}}function N(g){var Z,c=g.view,b,a,d=I.eventTarget(window,g),R=d.getAttribute("type"),V=this.lassoSelector,S=this.lassoContainer,h=this.excludeAttrArr,U=h.length,Y,X={};delete this.clickFromLassoResizer;delete this.clickFromCreatingLasso;if(!V||!S||!this.lassoSelectorEnabled){return ;}if(I.contains(this.dropDownBtn,d,true)){return ;}for(Z=0;Z<U;Z++){if(R===h[Z]){return ;}}this.lassoSelecting();Y=I.position(S);b=g.clientX-Y.x;a=g.clientY-Y.y;X.containerPos=Y;X.maxX=Y.w;X.maxY=Y.h;X.startX=b;X.startY=a;X.minX=0;X.minY=0;X.info=this.getLassoSelectionInfo(d);X.useAsSelectorOrBrushes=this.useAsSelectorOrBrushes||((this.hasAssociatedNodes&&this.hasAssociatedNodes())||this.selectorControl);V.style.visibility="hidden";V.style.left=b+"px";V.style.top=a+"px";V.style.width="0px";V.style.height="0px";K.removeClass(V,L);S.appendChild(V);var T=this.id,e=document,W=Q(D,T,X),f=Q(H,T,X);I.attachEvent(e,"mousemove",W);I.attachEvent(e,"mouseup",f);X.fnMove=W;X.fnUp=f;I.stopPropogation(c,g);I.preventDefault(c,g);}function G(a,U){var Y=U.index,X=U.startX,W=U.startY,V=U.containerPos,f=a.clientX-V.x,e=a.clientY-V.y,T=this.lassoSelector;f=C.min(f,U.maxX);f=C.max(f,U.minX);e=C.min(e,U.maxY);e=C.max(e,U.minY);var d=f-X,c=e-W;if(Y%3===1){d=0;}if(Y===3||Y===5){c=0;}var R=U.selWidth,b=U.selHeight,S=U.selLeft,Z=U.selTop;if(d!==0){if(Y%3===0){S+=d;R-=d;}else{R+=d;}}if(c!==0){if(Y<3){Z+=c;b-=c;}else{b+=c;}}T.style.width=R+"px";T.style.left=S+"px";T.style.top=Z+"px";T.style.height=b+"px";U.width=R;U.left=S;U.height=b;U.top=Z;this.positionBoxResizers();}function B(R,U){var T=R.view,S=window.document;I.detachEvent(S,"mousemove",U.fnMove);I.detachEvent(S,"mouseup",U.fnUp);delete U.fnMove;delete U.fnUp;this.clickFromLassoResizer=true;I.stopPropogation(T,R);I.preventDefault(T,R);this.lassoSelectorResized(U);}function A(V){var T=V.view,h=I.eventTarget(window,V),U=parseInt(h.getAttribute("index"),10),a=this.lassoSelector,Z=a.offsetLeft,j=a.offsetTop,Y=Z+a.offsetWidth,g=j+a.offsetHeight,R=I.position(this.lassoContainer),f=0,c=0,d=R.w,b=R.h,e={};if(U%3===0){d=Y-F;}if(U%3===2){f=Z+F;}if(U<3){b=g-F;}if(U>=6){c=j+F;}e.minX=f;e.minY=c;e.maxX=d;e.maxY=b;e.startX=V.clientX-R.x;e.startY=V.clientY-R.y;e.index=U;e.containerPos=R;e.selWidth=a.clientWidth;e.selHeight=a.clientHeight;e.selLeft=a.offsetLeft;e.selTop=a.offsetTop;var X=this.id,i=document,S=Q(G,X,e),W=Q(B,X,e);I.attachEvent(i,"mousemove",S);I.attachEvent(i,"mouseup",W);e.fnMove=S;e.fnUp=W;I.stopPropogation(T,V);I.preventDefault(T,V);}mstrmojo.util.ui._LassoSelector=mstrmojo.provide("mstrmojo.util.ui._LassoSelector",{_mixinName:"mstrmojo.util.ui._LassoSelector",lassoContainer:undefined,lassoSelector:undefined,lassoSelectorEnabled:true,excludeAttrArr:null,boxResizers:null,useDropDownBtn:false,dropDownBtn:undefined,init:function(R){if(this._super){this._super(R);}this.excludeAttrArr=[];this.boxResizers=[];},registerLassoSelector:function(S,V,U){V=V||[];V.push(P.LASSO_SELECTOR);V.push(P.LASSO_RESIZER);V.push(P.BUTTON);this.lassoContainer=S;this.excludeAttrArr=V;this.useDropDownBtn=U||false;I.attachEvent(S,"mousedown",Q(N,this.id));I.attachEvent(S,"click",Q(M,this.id));var R=this.lassoSelector;if(!R){R=this.createLassoSelector();this.lassoSelector=R;}var T=R.parentNode;if(T){T.removeChild(R);}},createLassoSelector:function(){var U,V,S,T=this.boxResizers,R=document.createElement("div");R.setAttribute("class","lasso-selector");R.setAttribute("type",P.LASSO_SELECTOR);R.setAttribute("draggable",false);R.draggable=false;for(U=0;U<9;U++){if(U!==4){V=document.createElement("div");V.setAttribute("class","lasso-selector-resizer");V.setAttribute("type",P.LASSO_RESIZER);V.setAttribute("index",String(U));V.setAttribute("draggable",false);V.draggable=false;R.appendChild(V);T[U]=V;I.attachEvent(V,"mousedown",Q(A,this.id));}}K.addClass(T[0],["top","left"]);K.addClass(T[1],["top"]);K.addClass(T[2],["top","right"]);K.addClass(T[3],["left"]);K.addClass(T[5],["right"]);K.addClass(T[6],["bottom","left"]);K.addClass(T[7],["bottom"]);K.addClass(T[8],["bottom","right"]);if(this.useDropDownBtn===true){S=document.createElement("div");S.setAttribute("type",P.BUTTON);S.setAttribute("class","lasso-selector-dropdown-button");R.appendChild(S);I.attachEvent(S,"click",Q(this.lassoButtonClicked,this.id));this.dropDownBtn=S;}return R;},positionBoxResizers:function(){var T=this.boxResizers,S=this.lassoSelector,U=S.clientWidth,R=S.clientHeight,W=(U-J)>>1,V=(R-J)>>1;T[1].style.left=W+"px";T[3].style.top=V+"px";T[5].style.top=V+"px";T[7].style.left=W+"px";},dismissLassoSelector:function(){var R=this.lassoSelector;if(R){K.removeClass(R,[E,L]);if(R.parentNode){R.parentNode.removeChild(R);}}},isLassoSelectorActive:function(){function S(V,U){var W=V.className.split(/\s+/),T;for(T=0;T<W.length;T++){if(W[T]===U){return true;}}return false;}var R=this.lassoSelector;if(R){return S(R,E);}return false;},getLassoSelectionInfo:mstrmojo.emptyFn,lassoSelected:mstrmojo.emptyFn,lassoSelecting:mstrmojo.emptyFn,lassoButtonClicked:mstrmojo.emptyFn,lassoSelectorResized:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.color","mstrmojo.css","mstrmojo.hash");var A=mstrmojo.color,C=mstrmojo.css,H=mstrmojo.hash;function B(I){I=G(I);if(isNaN(I)){I=0;}I%=16777216;return{b:I%(1<<8),g:(I%(1<<16))>>8,r:(I%(1<<24))>>16};}function F(M,N,L){M=G(M);L=H.copy(L,{retainGradientObject:false});if(D(M)){var K=F(M.c1,N),I=F(M.c2,N);if(L.retainGradientObject){return{c1:K,c2:I,or:M.or};}return C.buildGradient(M.or,K,I).v;}if(typeof N==="number"){var J=B(M);if(isNaN(M)){N=0;}return"rgba("+J.r+" ,"+J.g+" ,"+J.b+" ,"+N+" )";}else{if(isNaN(M)){M=0;}return"#"+(16777216+M%16777216).toString(16).substring(1,7);}}function G(K){var J=K.c1,I=K.c2;if(D(K)){return{c1:G(J),c2:G(I),or:K.or};}if(typeof K==="number"){return K;}if(typeof K!=="string"){return NaN;}if(K[0]!=="#"){return parseInt(K,10);}if(K.length===4){K=K[0]+K[1]+K[1]+K[2]+K[2]+K[3]+K[3];}return parseInt(K.substring(1,7),16);}function E(K,I){var N=K.value,P=K.opacity;if(D(N)){return["c1","c2"].reduce(function(U,V,T){var W=E({value:N[V],opacity:P},I);U.value[V]=W.value;if(T===0){U.opacity=W.opacity;}return U;},{value:{or:N.or}});}if(N==="transparent"){K.value=I.value;}var M=A.hex2rgb(F(K.value)),L=A.hex2rgb(F(I.value)),S=K.opacity,R=I.opacity,Q=1-S,O,J;J=S+R*Q;O=M.map(function(T,U){return(T*S+L[U]*R*Q)/J;});return{value:"#"+A.rgb2hex.apply(undefined,O),opacity:J};}function D(I){return I&&["c1","c2","or"].every(function(J){return I.hasOwnProperty(J);});}mstrmojo.util.color=mstrmojo.provide("mstrmojo.util.color",{getCSSColorString:F,getColorValue:G,mix:E,isGradientColor:D,getRGB:B,createCanvasFillPattern:function(K,Q,J,P,I,O){var L=K.value,N=K.opacity,M;if(D(L)){M=Q.createLinearGradient(J,P,I,O);M.addColorStop(0,F(L.c1,N));M.addColorStop(1,F(L.c2,N));}else{M=F(L,N);}return M;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.DSSTimeUtil");var H=24*60*60*1000;var A=60*60*1000;var L=60*1000;var C=1000;var K=24;var D=24*60;var J=24*60*60;var B=new mstrmojo.chart.common.DSSTimeUtil();mstrmojo.chart.common.DSSDateTime=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSDateTime",mnYear:1899,mnMonth:12,mnDay:30,mnHour:0,mnMinute:0,mnSecond:0,mnMillisecond:0,mnWeek:-1,mnDayOfWeek:-1,init:function P(T){if(!T||!T.ifTime){this.mnYear=1899;this.mnMonth=12;this.mnDay=30;this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;this.mnWeek=-1;this.mnDayOfWeek=-1;return ;}var S=0;var V=23242571;var R=-693593;if(T.ifTime>V){this.mnYear=65535;this.mnMonth=12;this.mnDay=30;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<R){this.mnYear=1;this.mnMonth=1;this.mnDay=1;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}else{if(T.ifTime>0){var W=this.DAYSToYMD(Math.floor(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<0){var W=this.DAYSToYMD(Math.ceil(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}}}}S*=H;var U=S+0.5;if(U==H){U--;}if(U>0){this.mnHour=Math.floor(U/A);U-=this.mnHour*A;this.mnMinute=Math.floor(U/L);U-=this.mnMinute*L;this.mnSecond=Math.floor(U/C);U-=this.mnSecond*C;this.mnMillisecond=Math.floor(U);}else{this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;}this.mnWeek=-1;this.mnDayOfWeek=-1;this.Sanitize();},Sanitize:function O(){var R=false;if(this.mnHour==24&&this.mnMinute==0&&this.mnSecond==0){R=true;this.mnHour=0;}if(this.mnMonth<1){this.mnMonth=1;}else{if(this.mnMonth>12){this.mnMonth=12;}}if(this.mnDay<1){this.mnDay=1;}else{if(this.mnDay>B.DaysInMonth[this.mnMonth-1]){this.mnDay=B.DaysInMonth[this.mnMonth-1];if(this.mnMonth==2&&this.IsLeapYear(this.mnYear)){this.mnDay++;}}}if(this.mnHour<0){this.mnHour=0;}else{if(this.mnHour>23){this.mnHour=23;}}if(this.mnMinute<0){this.mnMinute=0;}else{if(this.mnMinute>59){this.mnMinute=59;}}if(this.mnSecond<0){this.mnSecond=0;}else{if(this.mnSecond>59){this.mnSecond=59;}}if(this.mnMillisecond<0){this.mnMillisecond=0;}else{if(this.mnMillisecond>999){this.mnMillisecond=999;}}if(R){var S=this.ToMilliseconds();S=S+H;this.init({ifTime:this.MillisecondsToDATE(S)});}},IsLeapYear:function Q(R){return((R&3)==0)&&((R%100)!=0||(R%400)==0);},ToMilliseconds:function I(){var R=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var S=R*H;S+=this.mnHour*A+this.mnMinute*L+this.mnSecond*C+this.mnMillisecond;return S;},MillisecondsToDATE:function E(S){var R=Math.floor(S/H);var T=(S-R*H)/H;if(T<0){R--;T+=1;}return R>=0?R+T:R-T;},DAYSToYMD:function N(T){var W=0;var Y=0;var S=0;T+=693959;var V=Math.floor(T/365);var U=T-V*365;var X=Math.floor(V/4)-Math.floor(V/100)+Math.floor(V/400);U=U-X;if(U<0){V--;U+=365;while(U<=0){V--;U+=365;}}var R=T-(V*365+Math.floor(V/4)+(V%4?1:0)-Math.floor((V-1)/100)+Math.floor((V-1)/400));if(R==365&&!this.IsLeapYear(V)){W=V+1;Y=1;S=1;return{year:W,month:Y,day:S};}if(R==-1){W=V-1;Y=12;S=31;return{year:W,month:Y,day:S};}W=V;Y=12;while(R<B.DaysBeforeMonth[Y-1]){Y--;}S=R-B.DaysBeforeMonth[Y-1]+1;if(Y>2&&this.IsLeapYear(W)){S--;if(S==0){Y--;S=B.DaysInMonth[Y-1];if(Y==2){S++;}}}return{year:W,month:Y,day:S};},YMDToDAYS:function G(U,T,S){if(T<1||T>12){return 0;}var R=U*365+Math.floor(U/4)+(U%4?1:0)-Math.floor((U-1)/100)+Math.floor((U-1)/400);R+=B.DaysBeforeMonth[T-1];if(T>2&&this.IsLeapYear(U)){R++;}R+=S-1;R-=693959;return R;},ToDATE:function F(){var S=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var R=this.mnHour/K+this.mnMinute/D+this.mnSecond/J+this.mnMillisecond/H;if(S>=0){return S+R;}else{return S-R;}},DateTimeOrder:function M(R){if(this.mnYear>R.mnYear){return 1;}else{if(this.mnYear<R.mnYear){return -1;}}if(this.mnMonth>R.mnMonth){return 1;}else{if(this.mnMonth<R.mnMonth){return -1;}}if(this.mnDay>R.mnDay){return 1;}else{if(this.mnDay<R.mnDay){return -1;}}if(this.mnHour>R.mnHour){return 1;}else{if(this.mnHour<R.mnHour){return -1;}}if(this.mnMinute>R.mnMinute){return 1;}else{if(this.mnMinute<R.mnMinute){return -1;}}if(this.mnSecond>R.mnSecond){return 1;}else{if(this.mnSecond<R.mnSecond){return -1;}}if(this.mnMillisecond>R.mnMillisecond){return 1;}else{if(this.mnMillisecond<R.mnMillisecond){return -1;}}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");var B="___value",E="___parent",A="___key_map",D="___IS_LEAF";mstrmojo.netviz.ObservableModel=mstrmojo.declare(mstrmojo.Obj,[],{scriptClass:"mstrmojo.netviz.ObservableModel",init:function(H){var G=[];H=H||{};H=mstrmojo.hash.clone(H);var L=Object.keys(H),F=L.length,K,J;for(K=0;K<F;K++){var I=L[K],M=H[I];if(!(M instanceof Object)){J=new C();J[B]=M;J[D]=true;H[I]=J;}else{H[I]=J=new C(M);}G.push(J);H[I][E]=this;}if(this._super){this._super(H);}this.addDisposable(G);this[A]=H;},getParent:function(){return this[E];},getChildrenKeys:function(){return Object.keys(this[A]);},isLeafNode:function(){return this[D];},getValue:function(){if(this.isLeafNode()){return this[B];}return this.getRawObject();},setValue:function(G,K){var F=this.getValue();var M,J,I,L,H;if(this.isLeafNode()){if(!(G instanceof Object)){if(F!==G){this[B]=G;if(!K){this.raiseEvent({name:"valueChanged",target:this,oldValue:F,newValue:G});}}}else{this[B]=undefined;this[D]=undefined;this[A]=G;M=Object.keys(G);J=M.length;H=this.addDisposable(new C(G));for(I=0;I<J;I++){L=M[I];this[L]=H[L];H[E]=this;}if(!K){this.raiseEvent({name:"valueChanged",target:this,oldValue:F,newValue:G});}}}else{var N=this.getChildrenKeys();J=N.length;for(I=0;I<J;I++){L=N[I];this[L]=undefined;}if(!(G instanceof Object)){this[D]=true;this[B]=G;this[A]=undefined;this[B]=G;if(!K){this.raiseEvent({name:"valueChanged",target:this,oldValue:F,newValue:G});}}else{this[A]=G;M=Object.keys(G);J=M.length;H=this.addDisposable(new C(G));for(I=0;I<J;I++){L=M[I];this[L]=H[L];H[E]=this;}if(!K){this.raiseEvent({name:"valueChanged",target:this,oldValue:F,newValue:G});}}}},stopPropagation:function(F){F._isStopped=true;},raiseEvent:function(G){if(this._super){this._super(G);}if(G._isStopped){return ;}var F=this.getParent();if(F){F.raiseEvent(G);}},getRawObject:function(){var G={},J=this.getChildrenKeys(),F=J.length,I;for(I=0;I<F;I++){var H=J[I],K=this[H];if(K.isLeafNode()){G[H]=K.getValue();}else{G[H]=K.getRawObject();}}return G;}});var C=mstrmojo.netviz.ObservableModel;}());(function(){mstrmojo.requiresCls("mstrmojo.util.color");var Q=mstrmojo.util.color;var O={Min:15872549,Max:1489202,Invalid:0,NoColorMetric:16119287};var G={LeftToRight:0,RightToLeft:1,Center:2,None:3};var M={dark:[1487103,16725801,309794,16750094,11434462,13421861,1691360,11119017,11783663,16754582,10018698,16760704,14337004,14803088,10608618,14079702],light:[2062260,14034728,2924588,16744206,9725885,12369186,1556175,8355711,11454440,16750742,10018698,16759672,12955861,14408589,10410725,13092807]};function K(V,h,Z){if(V<0||V>1){return 0;}var W=256,Y=V*W,R,X,a,U=h>>16,T=Z>>16,d=(h&65280)>>8,c=(Z&65280)>>8,S=(h&255),f=(Z&255);R=U+Math.floor((Y*(T-U)/W));X=d+Math.floor((Y*(c-d)/W));a=S+Math.floor((Y*(f-S)/W));return a+(X<<8)+(R<<16);}function F(S,V){var U=S>>16,T=(S&65280)>>8,R=(S&255);U=Math.floor((1-V)*U);T=Math.floor((1-V)*T);R=Math.floor((1-V)*R);return R+(T<<8)+(U<<16);}function J(R){var X=[],W,S,U=R.dp,T=U.length,Y,Z,V;if(R===null||R.length===0){return[];}for(V=0;V<T;V++){S={};if(V>0){Y=W;W=Z;}else{W=U[V];}if(V<T-1){Z=U[V+1];}S.sv=(V===0)?W.v:(Y.v+W.v)/2;S.ev=(V===T-1)?W.v:(Z.v+W.v)/2;S.c=W.c;S.d=(V===0)?G.LeftToRight:(V===T-1?G.RightToLeft:G.Center);X[V]=S;}return X;}function E(Y){var X=[],W,V,U=Y.dp,R=U.length,S;if(Y===null||Y.length===0){return[];}for(S=0;S<R;S++){W={};V=U[S];W.c=V.c;switch(V.d){case G.LeftToRight:W.v=V.s;break;case G.RightToLeft:W.v=V.e;break;default:var T=(V.s+V.e)/2;W.v=T;break;}X[S]=W;}return X;}function L(a){if(isNaN(a)){return O.Invalid;}if(this.max===this.min){return this.blendEqualColor;}var T=this.blend.dp,S=T.length;if(!this.valid){var d=T[0],W=T[S-1];if(a<this.min){return d.c;}return W.c;}var U,Y=T[0],b=Y.v,X=Y.c,Z,V;for(U=1;U<S;U++){Y=T[U];if(Y.v>=a){break;}b=Y.v;X=Y.c;}U=Math.min(U,S-1);Y=T[U];Z=Y.v;V=Y.c;if(a<b){return X;}if(a>Z){return V;}if(b===Z){return K(0.5,X,V);}var R=(a-b)/(Z-b);return K(R,X,V);}function D(V,a){var R=[],S=[],X=[];if(this.min===this.max||isNaN(V)||isNaN(a)||V===a){R[0]=L.call(this,V);R[1]=L.call(this,a);S[0]=1;S[1]=1;X[0]=0;X[1]=1;}else{if(this.min<this.max){var Z,U=this.blend.dp,T=U.length,Y=0,W;R[Y]=L.call(this,V);S[Y]=1;X[Y]=0;Y++;for(W=0;W<T;W++){Z=U[W];if(Z.v>=V&&Z.v<=a){R[Y]=Z.c;S[Y]=1;X[Y]=(Z.v-V)/(a-V);Y++;}}R[Y]=L.call(this,a);S[Y]=1;X[Y]=1;}}return{c:R,a:S,r:X};}function I(T,W){var U=0.4,S=F(W.c,U),R,V;switch(W.d){case G.LeftToRight:if(T<W.s){return W.c;}if(T>W.e){return S;}if(W.s===W.e){return K(0.5,W.c,S);}V=(T-W.s)/(W.e-W.s);return K(V,W.c,S);case G.RightToLeft:if(T<W.s){return S;}if(T>W.e){return W.c;}if(W.s===W.e){return K(0.5,S,W.c);}V=(T-W.s)/(W.e-W.s);return K(V,S,W.c);case G.Center:R=(W.s+W.e)/2;if(T<W.s||T>W.e){return S;}if(W.s===W.e){return S;}if(T<=R){V=(T-W.s)/(R-W.s);return K(V,S,W.c);}V=(T-R)/(W.e-R);return K(V,W.c,S);default:return W.c;}}function B(S){if(isNaN(S)){return O.Invalid;}if(this.min===this.max){return this.bandEqualColor;}var X=this.band.dp,R=X.length;if(!this.valid){var U=X[0],V=X[R-1];if(S<this.min){return I(V.s,U);}if(S>=this.min){return I(V.e,V);}}var W=X[0],T;if(W.s>=S){return I(S,W);}for(T=0;T<R;T++){W=X[T];if(W.s<=S&&S<W.e){return I(S,W);}}return I(S,W);}function A(V,f){var R=[],S=[],X=[];if(this.min===this.max||isNaN(V)||isNaN(f)||V===f){R[0]=B.call(this,V);R[1]=B.call(this,f);S[0]=1;S[1]=1;X[0]=0;X[1]=1;}else{if(this.min<this.max){var U=this.band.dp,T=U.length,g=0.4,b,e,j,W,Z=0;if(V<0){R[Z]=B(V);S[Z]=1;X[Z]=0;Z++;if(f<1){R[Z]=B(f);S[Z]=1;X[Z]=1;Z++;}}for(W=0;W<T;W++){b=U[W];if(b.s>f||b.e<V){continue;}e=b.c;j=F(e,g);var h=Math.max(b.s,V),d=Math.min(b.e,f);if(d!==h){switch(b.d){case G.LeftToRight:case G.RightToLeft:case G.Center:if(h===b.s){R[Z]=(b.d!==G.LeftToRight)?j:e;}else{R[Z]=B.call(this,h);}X[Z]=(h-V)/(f-V);S[Z]=1;Z++;if(b.d===G.Center){var Y=(b.s+b.e)/2;if(Y>h&&Y<d){R[Z]=e;X[Z]=(Y-V)/(f-V);S[Z]=1;Z++;}}if(d===b.e){R[Z]=(b.d!==G.RightToLeft)?j:e;}else{R[Z]=B.call(this,d);}X[Z]=(d-V)/(f-V);S[Z]=1;Z++;break;default:R[Z]=e;X[Z]=(h-V)/(f-V);S[Z]=1;Z++;R[Z]=e;X[Z]=(d-V)/(f-V);S[Z]=1;Z++;break;}}}if(f>1){if(V>1){R[Z]=B.call(this,V);X[Z]=0;S[Z]=1;Z++;}R[Z]=B.call(this,f);X[Z]=1;S[Z]=1;}}}return{c:R,a:S,r:X};}function P(S,R){this.blend.dp=[];var U=this.blend.dp,T;T={};T.c=S;T.v=0;U[0]=T;T={};T.c=R;T.v=1;U[1]=T;}function N(S,R){this.band.dp=[];var U=this.band.dp,T;T={};T.d=G.LeftToRight;T.s=0;T.e=0.5;T.c=S;U[0]=T;T={};T.d=G.LeftToRight;T.s=0.5;T.e=1;T.c=R;U[1]=T;}function C(r,U,q){var W=[],V=0,Z,o,e=this.min,h=this.max,T=q.legendTickCount,S={},R,Y=!isNaN(this.min)&&!isNaN(this.max),j;if(this.min>=this.max||this.blend.dp.length<=2){var k=(h-e)/T;for(j=0;j<r;j++){S={x:V,w:Math.floor(U/T)};V+=S.w;if(Y){Z=e+j*k;o=Z+k;R=this.getColor((Z+o)/2);}else{Z="Null";o="Null";R=0;}W.push({r:S,c:R,sv:Z,ev:o});}}else{var b=this.blend.dp,g=b.length;for(j=0;j<g;j++){var m=b[j],X,a;if(j===0){Z=e;}else{X=b[j-1];Z=e+(h-e)*(m.v+X.v)/2;}if(j===g-1){o=h;}else{a=b[j+1];o=e+(h-e)*(m.v+a.v)/2;}S={x:V,w:Math.floor(U*(o-Z)/(h-e))};V+=S.w;if(Y){R=this.getColor((Z+o)/2);}else{Z="Null";o="Null";R=0;}W.push({r:S,c:R,sv:Z,ev:o});}}this.tooltipInfo=W;}function H(o,U,n){var W=[],V=0,Y,m,f=this.min,g=this.max,T=n.legendTickCount,S={},R,a="",X=!isNaN(this.min)&&!isNaN(this.max),h,k;if(this.min>=this.max){for(h=0;h<o;h++){S={x:V,w:Math.floor(U/T)};a+=S.w;if(X){R=this.getColor(f);}else{Y="Null";m="Null";R=0;}W.push({r:S,c:R,sv:Y,ev:m});}}else{var Z=this.band.dp,e=Z.length,j,b;if(e<=2){for(h=0;h<e;h++){k=Z[h];if(h===0){Y=f;}else{Y=f+(g-f)*k.s;}if(h===e-1){m=g;}else{m=f+(g-f)*k.e;}S={x:V,w:Math.floor(U*(m-Y)/(g-f)/2)};V+=S.w;if(X){m=(Y+m)/2;R=this.getColor((Y+m)/2);}else{Y="Null";m="Null";R=0;}W.push({r:S,c:R,sv:Y,ev:m});V+=S.w;j=U*(m-Y)/(g-f)/2;S={x:V,w:Math.ceil(j)};if(h>0){b=W[W.length-1].r;if(S.x<b.x+b.w+1){b.w=S.x-b.x;}}V+=Math.floor(j);if(X){Y=(Y+m)/2;R=this.getColor((Y+m)/2);}else{Y="Null";m="Null";R=0;}W.push({r:S,c:R,sv:Y,ev:m});}}else{for(h=0;h<e;h++){k=Z[h];if(h===0){Y=n.props.legendAsc?f:g;}else{Y=n.props.legendAsc?f+(g-f)*k.s:g+(f-g)*k.s;}if(h===e-1){m=n.props.legendAsc?g:f;}else{m=n.props.legendAsc?f+(g-f)*k.e:g+(f-g)*k.e;}j=U*(m-Y)/(g-f);S={x:V,w:Math.ceil(j)};if(h>0){b=W[W.length-1].r;if(S.x<b.x+b.w+1){b.w=S.x-b.x;}}if(h===e-1){S.w=U-V;}V+=Math.floor(j);var p=n.props.legendAsc?" < ":" > ";if(X){R=this.getColor((Y+m)/2);}else{Y="Null";m="Null";R=0;}if(p){W.push({r:S,c:R,sv:Y,ev:m});}else{W.push({r:S,c:R,sv:Y,ev:m,sign:">"});}}}}this.tooltipInfo=W;}mstrmojo.heatmap.vi.VisHeatMapColorTheme={newInstance:function(){return{initialize:function V(){this.blend={};this.band={};this.valid=true;this.blendEqualColor=0;this.bandEqualColor=0;this.isBlend=true;this.style="dark";this.setDefaultDataProvider();this.checkMinMax();},getGradientFillInfo:function Y(e,b){var f,c;if(isNaN(e)||isNaN(b)){if(this.isBlend){return D.call(this,e,b);}return A.call(this,e,b);}if(this.min===this.max){if(e<this.min){f=0;}else{f=1;}if(b<this.max){c=0;}else{c=1;}}else{var g;if(this.isFixedColorBanding){g=this.initMax-this.initMin;f=(e-this.initMin)/g;c=(b-this.initMin)/g;}else{g=this.max-this.min;f=(e-this.min)/g;c=(b-this.min)/g;}}if(this.isBlend){return D.call(this,f,c);}return A.call(this,f,c);},checkMinMax:function W(){var h=this.min,b=this.max;if(h>b){this.valid=false;}else{if(h===b){h=b=1;var k=this.blend.dp,d=k.length,j,g,f;for(g=d-1;g>=0;g--){j=k[g];if(g===d-1&&j.v<=h){this.blendEqualColor=j.c;break;}if(g===0&&j.c>=h){this.blendEqualColor=j.c;break;}if(g>0&&j.c>=h){var e=k[g-1];if(e.c<h){f=(h-e.v)/(j.v-e.v);this.blendEqualColor=K(f,e.c,j.c);break;}}}k=this.band.dp;d=k.length;for(g=0;g<d;g++){j=k[g];if((g===0&&j.s>=h)||(g===d-1&&j.e<=h)||(j.s<=h&&j.e>=h)){this.bandEqualColor=j.c;break;}}}}},setDefaultDataProvider:function a(){P.call(this,O.Min,O.Max);N.call(this,O.Min,O.Max);this.useDefault=true;},getColor:function S(b){if(this.colorByType==="attribute"){return M[this.themeType][b%16];}if(this.hasNoColorMetric){return O.NoColorMetric;}var c=NaN;if(isNaN(b)){c=0;}else{if(this.min===this.max){c=b<this.min?0:1;}else{if(this.isFixedColorBanding){c=(b-this.initMin)/(this.initMax-this.initMin);}else{c=(b-this.min)/(this.max-this.min);}}}if(this.isBlend){return L.call(this,c);}return B.call(this,c);},isBrightColor:function Z(i){var f=i>>16,e=(i&65280)>>8,d=(i&255),h=(f*299+e*587+d*114)/1000;if(h>150){return true;}return false;},getContrastColor:function R(b){if(Q.isGradientColor(b)){b=b.c1;}if(this.isBrightColor(b)){return 0;}return 16777215;},createTooltipInfo:function U(e,c,g){var f=0;if(this.min>=this.max){f=1;}else{var b;if(this.isBlend){b=this.blend.dp.length;f=(b<=2)?5:b;}else{b=this.band.dp.length;f=(b<=2)?4:b;}}if(this.isBlend){C.call(this,f,c,g);}else{H.call(this,f,c,g);}},getTooltipInfo:function T(b){var d=this.tooltipInfo;var c;for(c=0;c<d.length;c++){var f=d[c],e=f.r;if(b>=e.x&&b<e.x+e.w){return c;}}return c-1;},getMaxMinByMetricID:function(o,c){var d=o.gts.col,l=d.length,g=0,k=null,h={min:null,max:null};for(g=0;g<l&&k===null;g++){var n=d[g].es,b=n.length,f;for(f=0;f<b;f++){if(n[f].oid===c){k=f;break;}}}if(k===null){return h;}var e=o.gvs.items||[];l=e.length;for(g=0;g<l;g++){var m=parseFloat(e[g].items[k].rv);if(h.min===null){h.min=m;}if(h.max===null){h.max=m;}if(h.min>m){h.min=m;}if(h.max<m){h.max=m;}}return h;},convertFixedValueToBlendString:function(f,e){var l="";if(f.length%2===0){var b=f.length,c=e.min,g=e.max,d=0;var k=g-c;l="0,"+f[1];for(d=2;d<b-2;d+=2){var j=parseInt(f[d],10);if(j<c||j>g){continue;}else{var h=(j-c)/k;l+=","+h+","+f[d+1];}}l+=",1,"+f[b-1];}return l;},convertAbsoluteToBlend:function(d,f){this.useDefault=false;this.isColorBanding=true;var b=f.abs.replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");b=(new window.DOMParser()).parseFromString(b,"text/xml");var e=b.getElementsByTagName("m")[0];d.absoluteColorID=e.getAttribute("id");this.isFixedColorBanding=true;this.fixedBandingArray=e.getAttribute("bl").split(",");var c;if(!isNaN(this.min)&&!isNaN(this.max)){c={max:this.max,min:this.min};}else{c=this.getMaxMinByMetricID(d.modelData,d.absoluteColorID);this.max=c.max;this.min=c.min;}if(isNaN(this.initMax)||isNaN(this.initMin)){c=this.getMaxMinByMetricID(d.modelData,d.absoluteColorID);this.max=c.max;this.min=c.min;this.initMax=c.max;this.initMin=c.min;}f.bandColors=e.getAttribute("ba");f.gradientColors=this.convertFixedValueToBlendString(this.fixedBandingArray,c);},createDataProviderFromString:function X(j,h){var b=j.split(","),d=0,g,f;this.blend.dp=[];this.useDefault=false;g=this.blend.dp;if(b.length%2===0){while(d<b.length){f={};f.v=parseFloat(b[d]);d++;f.c=parseInt(b[d],10);d++;g[g.length]=f;}}d=0;b=h.split(",");this.band.dp=[];g=this.band.dp;if(b.length%4===0){while(d<b.length){f={};f.s=parseFloat(b[d]);d++;f.e=parseFloat(b[d]);d++;f.c=parseInt(b[d],10);d++;var e=b[d];switch(e){case"leftToRight":f.d=G.LeftToRight;break;case"rightToLeft":f.d=G.RightToLeft;break;case"center":f.d=G.Center;break;default:f.d=G.None;}d++;g[g.length]=f;}}},getBackgroundColor:function(){if(this.style==="light"){return"#ffffff";}return"#333333";},decodeAttriColorByColor:function(c){if(typeof c==="object"){return c;}var b=this.RGB_BRG_Switch(c);return mstrmojo.color.decodeColor(b);},RGB_BRG_Switch:function(c){var e=(c>>16)&255,d=(c>>8)&255,b=(c>>0)&255;return(b<<16)|(d<<8)|(e<<0);}};}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.DocDataService");mstrmojo.requiresDescs(5421,5422);var P=mstrmojo.hash,L=mstrmojo.array,F=mstrmojo.desc,G=mstrmojo.DocDataService,B=mstrmojo.string;function K(f,g,c,Y){var h=f.selCells,d=[],b=f.model.getCellTitleInfo(g).title,e,a,Z=function(i){var j=f.getCellForNode(i);d.push(f.getCellUnitIndex(j));e=j.dpt;},X;if(typeof Y==="string"&&Y.indexOf(";")>0){a=parseInt(Y.substring(Y.indexOf(";")+1),10);Y=parseInt(Y.substring(0,Y.indexOf(";")),10);}if(a===1&&!c){h.reverse().forEach(Z);}else{if(a===1){X=1;h.forEach(Z);}else{h.forEach(Z);}}return{oId:b.id,oTp:b.otp,depth:e,ordinals:d.join(","),sliceId:f.sid,viewKey:f.k,funcVal:Y,switchOrder:X};}function C(Z,Y,b){var e=Z.getDEInfo(Y),d=e&&e.deObject&&e.deObject.des,c=1,a=b===-1?F(5187,"Group"):F(5188,"Calculation"),X=function(f){return f.n===a+" "+c;};while(true&&d){if(d.some(X)){c++;}else{break;}}Z.controller.onAddQuickDE(Z,P.copy(K(Z,Y,false,b),{act:"addQuickDE",deName:a+" "+c}));}function W(X,Y){for(did in X){if(L.find(X[did].att,"did",Y)>-1){return did;}}return undefined;}function A(i,Y,f,b,X){var e=f.es,Z=f.id,d;X.forEach(function(j){d=j[0];if(d.eid.indexOf(Z)<0){e.push({n:B.decodeHtmlString(d.v,true),t:mstrmojo.vi.enums.EnumDerivedElementType.LIST,v:d.eid.split(";")[0].slice(1)});}});var a=i.controller,h=i.model&&i.model.docModel,g=a._getXtabCallback(i),c={act:"applyDEChanges",deId:Y.did,attId:Y.attId,attName:Y.attName,dsId:Y.dsId,k:i&&i.k,actions:[U(f,b)]};h.addUpdateObjects(c,{id:c.deId||c.attId,type:47,flag:G.PARTIAL_UPDATE_FLAGS.DATA_CHANGE});g=mstrmojo.func.wrapMethods(g,h.getDatasetsUpdateCallback(),{success:function(){h.callOnNDECreated([f]);}});a.submitUndoRedoUpdates(c,{},g);}function U(Y,X){return{act:"update",position:X+1,item:Y};}function E(Z,Y,c,b,a){var X=Z.model.getCellTitleInfo(Y).title;Z.controller.onSetDEHierachyOptions(Z,{act:"setDEHierarchyOptions",oId:X.id,eId:c.id,splice:b,expand:a});}function O(b,Y){var X=[],a=Y.t,Z=Y.did;b.getDropZones().zones.forEach(function(c){((c&&c.items)||[]).forEach(function(e){var f=e.t,d=e.did;if(f!==21&&d!=="-1"&&d!=="00000000000000000000000000000000"&&((f===4&&a===4)||(f!==4&&a!==4))&&d!==Z&&L.find(X,"did",d)===-1){X.push(e);}});});b.docModel.getDatasetUnits(a===4?["mx"]:["att"]).forEach(function(c){if(L.find(X,"did",c.did)===-1&&c.did!==Z&&!c.hide){X.push(c);}});return mstrmojo.vi.ui.DatasetUnitMenuUtils.getSortedDatasetUnits(X);}mstrmojo.vi.ui.rw._XtabDE=mstrmojo.provide("mstrmojo.vi.ui.rw._XtabDE",{scriptClass:"mstrmojo.vi.ui.rw._XtabDE",derivedElementGroup:function M(X){C(this,X,-1);},addElementsToGroup:function N(Z,a,Y,X){A(this,Z,a,Y,X);},derivedElementCalculation:function D(Y,X){C(this,Y,X);},separateOthers:function Q(X,Y){E(this,X,Y,1,1);},renameDEList:function I(X){this.controller.onEditQuickDEList(this,P.copy(K(this,X,true,-1),{act:"editQuickDEList",deName:X.v}));},editQuickDECalculationNumberFormat:function J(Y,Z){var X=K(this,Y);X.deId=Z.de.id;X.act="editQuickDECalculationNumberFormat";this.controller.editQuickDECalculationNumberFormat(this,P.copy(X,this.model.docModel.createNumberFormatParams(Z)));},editDECalculation:function H(Y,X){if(X!==undefined&&X!==null){this.controller.editQuickDECalculation(this,P.copy(K(this,Y,true,X),{act:"editQuickDECalculation"}));}else{this.controller.onEditQuickDECalculation(this,P.copy(K(this,Y,true),{act:"editQuickDECalculation",deName:Y.v}));}},removeQuickDE:function S(d,h){var a=h&&h.deObject,b=(a&&a.des)||[],i=this,k=2,g=L.filter(b,function(l){return !l.ido;},{max:k+1}),j={success:function(n){var o=i.controller.view.getLayouts(),l=o.length,m;for(m=0;m<l;m++){i.controller.model.data.layouts[m].loaded=false;o[m].defn.loaded=false;}}};if(a&&(b.length<=k||g.length<=k)){var c=[],f=this.zonesModel.getZoneForObject(a.did),Z=O(this.zonesModel,a),Y=L.find(Z,"did",a.attId),X=Y>=0?Z[Y]:null,e={};if(X&&f){c.push(this.model.getAddTemplateUnitAction(X,a.dsId,f.id,L.find(f.items,"dsId",a.dsId)));c=[this.zonesModel.getUpdateTemplateAction(c)];e=this.controller._getXtabCallback(this);}c.push({act:"removeNDEFromDS",dsid:a.dsId,oid:a.did,partialRetrieval:{nodes:this.model.docModel.getSourceFilterKeys(this.zonesModel.getHost().k)}});e=mstrmojo.func.wrapMethods(e,this.controller.model.getDatasetsUpdateCallback(),this.controller.getReloadLayoutViewCallback(),j);this.controller.submitUndoRedoUpdates(c,null,e,G.REQUEST_DEFN_DATA);}else{this.controller.removeQuickDE(this,P.copy(K(this,d),{act:"removeQuickDE"}));}},derivedElementsEdit:function T(f,a){if(!a){a=this.getDEInfo(f);}var b=this.model,Y=b.getCellTitleInfo(f).title,Z=a&&a.deObject,e=a&&a.de,X,d,c;if(!Z){X=this.gridData.datasetId||W(b.docModel.datasets,Y.id);d=Y.id;c=Y.n;}this.controller.openDEEditor(this,{dsId:X,attId:d,attName:c,deObj:Z,elemId:e&&e.id,dispName:f.n});},getDEInfo:function V(Y){var Z=this.model,X=Z.getCellTitleInfo(Y).title,a=Y.dei,b,c;if(X.ost!==12033){return null;}b=Z.docModel.getDEObject(X.id);if(b&&a!==undefined){c=b.des[a];}return{deObject:b,de:c,ttl:X};},getOthersDEInfo:function R(Y){var X;L.forEach(Y.des,function(Z){if(Z.t===4){X=Z;return false;}});return X;}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.Container");mstrmojo.requiresDescs(1442,2140);var C=mstrmojo.dom;mstrmojo.ui.menus.ToolbarEditor=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._IsMenuPopup,mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.menus.ToolbarEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-ToolbarEditor mstrmojo-ui-MenuEditor {@cssClass}" style="..." mstrAttach:mouseover,mouseout,click><div class="te-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},popupConfig:null,children:null,autoCloses:false,locksHover:true,visible:true,onclick:function B(E){C.stopPropogation(null,E.e);},init:function D(F){this._super(F);var E=this.popupConfig,G=E.contents;if(!G){throw new Error("Cannot open editor without editor content.");}this.cssClass=E.cssClass;this.addChildren(G);}});}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.VisMenuList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.VisMenuList",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);},getItemProps:function A(F,D){var E=this._super(F,D);E.tag="a";E.addCls("mstrmojo-ui-Menu-item");return E;},onselectionChange:function B(D){this._super(D);this.parent.data.set("valid",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasLayout","mstrmojo.css");var B=mstrmojo.css;mstrmojo.vi.ui.editors.EditorGroup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",layoutConfig:{w:{containerNode:"100%"},xt:true},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},showDivider:true,isNested:false,isContainer:false,init:function D(E){this._super(E);B.addWidgetCssClass(this,["mstrmojo-vi-EditorGroup","ctrl-group"]);},preBuildRendering:function A(){var E=[];if(this.showDivider){E.push("divide");}if(this.isContainer){E.push("container");}if(E.length){B.addWidgetCssClass(this,E);}return this._super();},getLayoutOffsets:function C(){return{h:0,w:this.isNested?0:18};}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.ToolbarEditor","mstrmojo.hash");mstrmojo.ui.menus.ToolbarEditorConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.ToolbarEditorConfig",cssClass:"",contents:null,init:function C(D){this._super(D);this.initBindings();},clear:function A(){this._super();this.contents=null;},newInstance:function B(D){return new mstrmojo.ui.menus.ToolbarEditor(mstrmojo.hash.copy({popupConfig:this},D));}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.array","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._Formattable","mstrmojo._IsDocumentTemplate","mstrmojo.Label","mstrmojo.ui.menus.MenuConfig");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");var T={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"};var D=["background-color","fx"],I=mstrmojo.array;mstrmojo.VisBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._IsDocumentTemplate],{scriptClass:"mstrmojo.VisBase",updated:false,waitingForData:false,node:null,skipReRender:false,updateFormatsOnUpdate:true,setModel:function M(Z){this.set("model",Z);},destroy:function W(){var Z=this.model;if(Z&&Z.destroy){Z.destroy();delete this.model;}this._super();},resize:function X(){var Z=this.getFormats();if(parseInt(Z.height,10)===0||parseInt(Z.width,10)===0){this.domNode.style.display="none";}else{this.setDimensions(Z.height,Z.width);this.domNode.style.display="";}},setDimensions:function O(b,a){var Z=this._super(b,a);if(Z&&this.hasRendered&&!this.skipReRender){this.reRender();}return Z;},reRender:function F(){this.unrender();this.render();},getWidth:function B(){return parseInt(this.width,10);},getHeight:function K(){return parseInt(this.height,10);},getLeft:function R(){return parseInt(this.left,10);},getTop:function A(){return parseInt(this.top,10);},buildRendering:function H(){this.height=this.getHeight();this.width=this.getWidth();this.left=this.getLeft();this.top=this.getTop();if(!this.updated){this.update();}this._super();},initFromVisProps:function V(){},postBuildRendering:function(){var Z=this.isEmpty();this._super();this.raiseEvent({name:"toggleCtrlOverlay",visible:Z,controls:this.getVisEmptyMsgControls()});this.applyBackground();return !Z;},applyBackground:function(){var a=this.defn&&this.defn.fmts,f=(a&&a.p_fmts)||a,c={},d,Z,e,b;if(mstrApp.isExpress&&f){d=this.formatHandlers=this.formatHandlers||{};e=d.domNode=d.domNode||[];Z="BG";b=I.indexOf(e,Z);if(b<0){e.push(Z);}I.forEach(D,function(g){if(f[g]){c[g]=f[g];}});this.applyCSSFormatToNode("domNode",c);}},update:function G(c){c=c||this.node;if(c){var Z=c.data;if(Z){this.model.set("data",Z);}this.waitingForData=!!Z.nsj;if(this.waitingForData){var a="ServerJsonRWDStyle";var d=this.model,b=d.getDataService(),e={host:this,nodes:[this.k]},g;if(Z.wid!==undefined){e.slices=[Z.wid];}g=mstrmojo.func.wrapMethods(d.docModel.getUpdateColorMapCallback(),d.docModel.getUpdateThemePaletteCallback(true),d.controller._getXtabCallback(this));b.retrieveServerJson(e,g,{preserveUndo:true,style:{name:a,params:{treesToRender:3}},params:{styleName:a}});this.updated=true;return false;}this.updateContentFormats(c);}if(this.model){var h=this.model&&this.model.docModel;this.initFromVisProps(this.model.vp);if(h&&h.getDocBuilder){var f=h.getDocBuilder().getMojoVisName(c);if(f){c.data.visName=f;}}}this.updated=true;if(this._super){return this._super(c);}return true;},updateContentFormats:function(e){var d=this.parent,c=e.defn,Z=c&&c.fmts;if(this.updateFormatsOnUpdate&&Z){if(this.clearFormats){this.clearFormats();}if(d&&d._createFormats&&!Z.p_fmts){d._createFormats();}Z=(this.getFormats&&this.getFormats())||Z;for(var b in T){if(T.hasOwnProperty(b)){var a=T[b];if(b in Z){this[a]=Z[b];}}}}},isEmpty:function L(){return false;},getVisEmptyMsgControls:function C(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(11668,"Drag objects here.")}];},getModel:function N(){return this.model;},getData:function J(){return this.model.data;},getRowsAndCols:function(){var Z=this.model.data.gts;return(Z.row||[]).concat(Z.col||[]);},getExp:function(){var Z=this.model.data,a=Z&&Z.sc&&Z.sc.exp;return a;},getDocModel:function S(){return this.model&&this.model.docModel;},getTitleRMCPopup:mstrmojo.emptyFn,getMenuHandler:function U(){return mstrmojo.emptyFn;},renderErrorMessage:function Y(Z){this.domNode.innerHTML='<div class="mstrmojo-message">'+Z+"</div>";},getMessageID:function E(){return this.model.docModel.mid||this.model.mid;},performAction:function Q(Z){var b=this.model.getAction(Z),a=b&&b.h;if(a&&this.controller[a]){this.controller[a](this,b.a);return true;}return false;},findSelectorControl:function P(){var a=this.getData(),Z=a&&a.sc;if(Z&&parseInt(Z.ct,10)===6){this.selectorControl=Z;this.isMultiSelect=true;}else{delete this.selectorControl;}return this.selectorControl;}});})();(function(){mstrmojo.requiresCls("mstrmojo.VisBase","mstrmojo.DocPortlet");var L={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"},P,B;mstrmojo.Vis=mstrmojo.declare(mstrmojo.VisBase,null,{scriptClass:"mstrmojo.Vis",offsetTop:0,offsetLeft:0,isAndroid:window.navigator.userAgent.indexOf("Android")!=-1,reRenderOnDimensionChg:true,isVis:function(){return true;},setModel:function Q(R){this._super(R);if(R.data){this.set("model",R.data);}this.xtabModel=R;if(this.controller&&typeof (this.controller.getPageByTree)!="undefined"){this.controller.getPageByTree(false);}},destroy:function O(){this._super();var R=this.xtabModel;if(R&&R.destroy){R.destroy();delete this.xtabModel;}},setDimensions:function N(T,S){var R=this._super(T,S);if(R&&this.hasRendered&&this.reRenderOnDimensionChg){this.reRender();}return R;},buildRendering:function M(){if(this.parent instanceof mstrmojo.DocPortlet){delete this.left;delete this.top;this.height=this.fmts&&this.fmts.height;}this._super();},postBuildRendering:function G(){P=this.width;B=this.height;this.adjustWidgetOffsets();this._super();},adjustWidgetOffsets:function E(){var R=this.domNode,S={top:0,left:0};if(typeof (mstr)!="undefined"&&mstr.utils.BoxModel){S.top=mstr.utils.BoxModel.getElementSumOffsetTop(R);S.left=mstr.utils.BoxModel.getElementSumOffsetLeft(R);}else{if(typeof (mstrmojo)!="undefined"){S=mstrmojo.boxmodel.offset(R);}}this.offsetTop=S.top;this.offsetLeft=S.left;},update:function F(V){V=V||this.node;if(V){if(V.data){this.set("model",V.data);if(this.xtabModel&&this.xtabModel.set){this.xtabModel.set("data",V.data);}this.model=V.data;if(this.model.layoutModel){this.layoutModel=this.model.layoutModel;}if(this.model.layoutNode){this.layoutNode=this.model.layoutNode;}mstrmojo.hash.copy(V.data.extProps,this);}var T=this.controller,S=T.view,X=(S.hasRendered&&S.getCurrentLayout&&S.getCurrentLayout());if(T.view.fullScreenInfoWindow&&(X&&X.defn.visName)){var W=mstrApp.rootView.getContentDimensions();this.height=W.h+"px";this.width=W.w+"px";}else{this.fmts=V.defn.fmts||V.defn.units[this.model.k].fmts;var R=this.fmts;if(R){for(var U in L){v=L[U];if(U in R){this[v]=R[U];}}}}}if(this.model){this.initFromVisProps(this.model.vp);}this.updated=true;return true;},getModel:function A(S){if(S){var R=mstrmojo.Vis.getVisGrid(this.layoutModel,this.layoutNode,S);if(R){return R.data;}else{alert(mstrmojo.desc(8427,"Incorrect visualization properties encountered.  Data may be inconsistent.  Please reset your properties."));return{};}}else{return this.model;}},getDataParser:function K(R){return new mstrmojo.Vis.DataParser(this.getModel(R));},renderErrorMessage:function H(R){this.domNode.innerHTML='<div class="mstrmojo-message">'+R+"</div>";},getMessageID:function J(){return this.model.mid&&this.model.mid||this.xtabModel&&this.xtabModel.docModel&&this.xtabModel.docModel.mid;},hasNoninfowindowTarget:function D(U){var b=this.xtabModel,a=(b&&b.docModel);var c=false;if(a){var Z=a.defn&&a.defn.layouts,T=null;var S;if(Z){for(S in Z){if(Z[S].loaded){T=Z[S];break;}}}var V=T&&T.units;this.selectorTargets={};if(V&&U.scObjList){for(var S=0;S<U.scObjList.length;S++){var W=U.scObjList[S];var X=W.sc.tks.split("\x1E");for(var R=0;R<X.length;R++){var Y=V[X[R]];if(Y){this.selectorTargets[X[R]]=Y;if(!this.isChildOfIfw(V,Y)){c=true;}}}}}}return c;},isChildOfIfw:function I(R,S){while(S){if(S.ifw){return true;}S=R[S.pnk];}return false;},performAction:function C(R){var T=this.xtabModel.getAction(R),S=T&&T.h;if(S&&this.controller[S]){this.controller[S](this,T.a);return true;}return false;}});mstrmojo.Vis.getVisGrid=function(R,Y,S){var W=Y;var U=R.getChildren(Y,false);for(var T=0;T<U.length;T++){var X=U[T];if(X.k==S){return X;}else{var V=mstrmojo.Vis.getVisGrid(R,X,S);if(V){Y=W;return V;}}}};mstrmojo.Vis.DataParser=function(T){var a=mstrmojo.Vis;return{getRowTitles:function(){return new a.Titles(T,true);},getColTitles:function(){return new a.Titles(T,false);},findMetricValue:function(f,k){var j=T.ghs.rhs.items;for(var g in j){var h=j[g].items;var d=true;for(var b in f){if(f[b]!=h[b].idx){d=false;break;}}if(d){return new mstrmojo.Vis.MetricValue(T.gvs.items[g].items[k]);}}},getTotalRows:function W(){var b=T.ghs&&T.ghs.rhs&&T.ghs.rhs.items;return(T.eg||!b)?0:b.length;},getTotalColHeaderRows:function U(){return(!T.ghs.chs.items?0:T.ghs.chs.items.length);},getTotalCols:function R(){return this.getColHeaders(0).size();},getRowHeaders:function Z(b){return new a.Headers(T,b,true);},getColHeaders:function Y(b){return new a.Headers(T,b,false);},getMetricValue:function X(c,b){return new a.MetricValue(T,T.gvs.items[c].items[b]);},getColumnHeaderCount:function V(){return T.gvs.items[0].items.length;},getCSSString:function S(){return T.cssString;}};};mstrmojo.Vis.Titles=function(R,W){var V=(W)?R.gts.row:R.gts.col;return{size:function U(){return V.length;},getTitle:function T(X){return new mstrmojo.Vis.Title(V[X]);},getCSS:function S(X){return R.css[V[X].cni].n;}};};mstrmojo.Vis.Headers=function(S,T,X){var Y=(X)?S.gts.row:S.gts.col;var W=(X)?S.ghs.rhs:S.ghs.chs;var U=W.items&&W.items[T].items;return{size:function Z(){return(!U?0:U.length);},getHeader:function R(a){return U&&U[a]&&new mstrmojo.Vis.Header(U[a],X?Y[a]:Y[T]);},getCSS:function V(a){return U&&S.css[U[a].cni].n;},getHeaderCell:function(a){return U&&U[a];}};};mstrmojo.Vis.Title=function(S){return{getActionType:function(){return S.at;},getDrillPath:function(){return S.dp;},getHeaderValues:function R(){return S.es;},getHeaderName:function T(V){return S.es[V].n;},getHeaderId:function T(V){return S.es[V].id;},getForms:function U(){return S.fs;},getFormId:function(){return S.fid;},getFormType:function(){return S.ftp;},getUnitId:function(){return S.id;},getLinkMap:function(){return S.lm;},getName:function(){return S.n;},getUnitDssType:function(){return S.otp;},getSelectorControl:function(){return S.sc;}};};mstrmojo.Vis.Header=function(T,R){return{getName:function V(){return(T.idx===-1)?"":R.es[T.idx].n;},getElementId:function Y(){return(T.idx===-1)?"":R.es[T.idx].id;},getObjectId:function U(){return(T.idx===-1)?"":R.es[T.idx].oid;},getElementIndex:function S(){return T.idx;},getActionType:function X(){return T.at;},isTotal:function W(){return T.otr===1;}};};mstrmojo.Vis.MetricValue=function(R,Y){var X=Y;return{getValue:function S(){return X.v;},getThresholdType:function T(){return X.ty;},getRawValue:function W(){return X.rv;},getCSS:function U(){return R.css[X.cni].n;},getThresholdValue:function Z(a){if(X.ti==undefined){return a;}return R.th[X.ti].n;},getFillColor:function V(a){if(X.ci==undefined){return a;}return R.fc[X.ci].n;}};};})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Vis","mstrmojo._HasOwnAvatar");var K=mstrmojo.css,I=mstrmojo.dom,F="px";function B(Q,P){return{x:Q.x-P.x,y:Q.y-P.y};}function M(Q,P){return(Q.x-P.x)*(Q.x-P.x)+(Q.y-P.y)*(Q.y-P.y);}function N(P){var Q=P.src.data;return(!Q||!Q.isScrollBar);}mstrmojo.VisLegend=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.gm.VisLegend",bodyCssClass:"",avatarCssClass:"legend-dragged",dropZoneHighlightCss:"legend-dropZone",ownAvatar:true,draggable:true,dropZone:true,dockedPositions:null,calculateDockedPositions:mstrmojo.emptyFn,widget:null,boundaryNode:null,draggableNodeName:"domLegend",legendMarkup:"",extrasMarkup:"",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;position:absolute;" mstrAttach:click,mouseover,mouseout><div class="gm-legend-bg"><div class="{@bodyCssClass}" style="width:{@width}px;height:{@height}px;text-decoration:inherit">{@legendMarkup}</div></div><div class="gm-anchor-point topLeft"></div><div class="gm-anchor-point topRight"></div><div class="gm-anchor-point bottomLeft"></div><div class="gm-anchor-point bottomRight"></div>{@extrasMarkup}</div>',markupSlots:{dropZoneNode:function(){return this.domNode;},domLegend:function(){return this.domNode.firstChild.firstChild;}},postBuildRendering:function(){this._super();this.calculateDockedPositions(this.widget.getWidth(),this.widget.getHeight());this.boundaryNode=this.widget.domNode;this.boundaryPosition=I.position(this.boundaryNode,true);},createAvatar:function D(){return this[this.draggableNodeName];},updateDropZoneNode:function C(R){var P=this.dockedPositions;if(P&&P.length>0){var W=B(R.tgt.pos,this.boundaryPosition);var U=M(W,P[0]),T=0,Q,V;for(Q=1;Q<P.length;Q++){V=M(W,P[Q]);if(V<U){U=V;T=Q;}}if(T!==this.currDockedPositionIdx){var S=this.dropZoneNode.style;S.left=P[T].x+F;S.top=P[T].y+F;if(this.widget.onLegendDropZoneChange){this.widget.onLegendDropZoneChange(P[T],T);}this.currDockedPositionIdx=T;this.updateAlignClass();return true;}}return false;},toggleDropZoneBorder:function O(P){K.toggleClass(this.dropZoneNode,this.dropZoneHighlightCss,P);},isDragValid:N,ondragstart:function E(P){if(!N(P)){return ;}this._super(P);this.toggleDropZoneBorder(true);},ondragmove:function A(P){if(!N(P)){return ;}this.updateDropZoneNode(P);this._super(P);},allowDrop:function H(P){var R=P.src,Q=R&&R.widget;return(Q&&Q!==this&&Q.parent===this.parent);},ondrop:function J(R){var P=this.domLegend;K.removeClass(P,this.avatarCssClass);var S=P.style;S.left="0";S.top="0";this.dropZoneNode.firstChild.appendChild(P);if(this.widget.onLegendDropped){var Q=this.getDockedPosition();this.widget.onLegendDropped(Q&&Q.pos);}R.dropSuccessful=true;},getDockedPosition:function G(){return this.dockedPositions&&this.dockedPositions[this.currDockedPositionIdx];},ondragend:function A(P){if(!N(P)){return ;}this._super(P);if(!P.dropSuccessful){this.ondrop(P);}this.toggleDropZoneBorder(false);},positionAvatar:function L(U){var R=this,Q=this.avatar,S=Q.style,T=this.boundaryPosition;var P=function(V,W){if(V==="x"){if(W<T.x){return T.x;}return Math.min(W,T.x+T.w-R.domNode.offsetWidth);}if(V==="y"){if(W<T.y){return T.y;}return Math.min(W,T.y+T.h-R.domNode.offsetHeight);}};S.left=P("x",U.x)+F;S.top=P("y",U.y)+F;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.hash","mstrmojo.array","mstrmojo.ValidationTextBox","mstrmojo.expr");var K=mstrmojo.emptyFn,B=mstrmojo.hash,H=mstrmojo.array,I=mstrmojo.expr.DTP,F={FILL_COLOR:"Clr",FILL_TRANSPARENT:"FillTrans"},C=1,J=2;function N(T,Q,P,S,R){return{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"fillColor",slot:T,showNoFill:S!==false,showAutomatic:!!R,showGradient:P!==false,selectedValue:"#000000",isHostedWithin:Q||false,postselectedValueChange:function(U){if(this.propName&&this.parent&&this.parent.parent){this.parent.parent.raiseFormatValueChange(this.propName,U.value,U.valueWas);}},postclick:function(U){this.parent.parent.postclick(U);}};}function O(Q){return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillAlpha",slot:Q,col1Width:"100%",col2Width:"10px",children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"fillAlphaText",slot:"col1Node",value:"100",cssText:"text-align:right",dtp:I.INTEGER,required:true,constraints:{min:0,max:100},onvalueChange:function(R){this.valueWas=R.valueWas;},onValid:function P(){if(this.propName&&this.value!==this.valueWas){this.parent.parent.parent.raiseFormatValueChange(this.propName,this.value,this.valueWas);}},postclick:function(R){this.parent.parent.parent.postclick(R);}},{scriptClass:"mstrmojo.Label",slot:"col2Node",text:"%"}]};}mstrmojo.ui.editors.controls.FillConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.FillConfigGroup",propNames:undefined,postclick:K,visibleControls:C+J,fillColorAndTrans:undefined,init:function M(T){this._super(T);var Q=[],W="col1Node",R=T&&T.colorPickerHostWithin,P=T&&T.showGradient,V=T&&T.showNoFill,S=T&&T.showAutomaticInColor,U;if((this.visibleControls&C)>0){Q.push(N(W,R,P,V,S));W="col2Node";}if((this.visibleControls&J)>0){Q.push(O(W));}if(Q.length===1){U={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}this.addChildren([B.copy(U,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillColorAndTrans",children:Q})]);},getChildComp:function L(P){if(P.indexOf(F.FILL_COLOR)!==-1){return this.fillColorAndTrans.fillColor;}if(P.indexOf(F.FILL_TRANSPARENT)!==-1){return this.fillColorAndTrans.fillAlpha.fillAlphaText;}return undefined;},iniChildrenComp:function E(P){this.propNames=P;H.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);},setChildValue:function D(Q,R){var P=this.getChildComp(Q);if(P===undefined){return false;}switch(P.alias){case"fillColor":if(R!==P.selectedValue){P.set("selectedValue",R==="undefined"?"conflict":R);}break;case"fillAlphaText":if(R!==P.value){P.set("value",R==="undefined"?"":R);}break;}},setChildEnable:function G(R,Q){var P=this.getChildComp(R);if(P!==undefined){P.set("enabled",Q);}},setChildrenValue:function A(P){P.forEach(function(Q){this.setChildValue(Q[0],Q[1]);});}});mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS={FILL_COLOR:C,FILL_TRANSPARENCY:J};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.array","mstrmojo.hash","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.LineStyleButton");var L=mstrmojo.emptyFn,I=mstrmojo.array,C=mstrmojo.hash,E=mstrmojo.gm.EnumCombinedLineStyle;var J={LINE_COLOR:"Clr",LINE_STYLE:"Style"},A={"1pt solid":E.THIN,"2pt solid":E.THICK,"1pt dashed":E.DASHED,"1pt dotted":E.DOTTED,none:E.NONE};function D(P,O){return C.copy(O,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"lineColor",slot:P,selectedValue:"#000000",postselectedValueChange:function(Q){if(this.propName){this.parent.parent.raiseFormatValueChange(this.propName,Q.value,Q.valueWas);}},postclick:function(Q){this.parent.parent.postclick(Q);}});}function K(P){return{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:true,showNoneOption:true,defaultSelectedIndex:3,propName:undefined,alias:"lineStyle",slot:P,postInit:function O(){var Q=["mstrmojo-ui-LineStyle"];if(!this.showNoneOption){Q.push("no-none");}mstrmojo.css.addWidgetCssClass(this,Q);(this.list.items||[]).forEach(function(R){R.v=(A[R.id]!==undefined?A[R.id]:A["not defined"]);});},onshowNoneOptionChange:function(Q){var R=["no-none"];if(!Q.value){mstrmojo.css.addWidgetCssClass(this,R);}else{mstrmojo.css.removeWidgetCssClass(this,R);}var S=this.hasRendered;if(S){this.refresh();}},postselectedValueChange:function(R){this._super();var Q=I.find(this.list.items,"id",R.value);if(Q===-1){Q=this.defaultSelectedIndex;}var S=this.list.items[Q].v;if(this.propName){this.parent.parent.setChildEnable(J.LINE_COLOR,S!==A.none);this.parent.parent.raiseFormatValueChange(this.propName,S,A[R.valueWas]);}},postclick:function(Q){this.parent.parent.postclick(Q);}};}mstrmojo.ui.editors.controls.LineConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.LineConfigGroup",propNames:undefined,postclick:L,hideColorControl:false,showGradient:false,showNoFillInColor:true,showAutomaticInColor:false,showNoneOption:true,lineColorAndStyle:undefined,lineTitle:undefined,init:function N(Q){this._super(Q);var O=[],R;O.push(K("col1Node"));if(!this.hideColorControl){O.push(D("col2Node",{showGradient:this.showGradient,showNoFill:this.showNoFillInColor,showAutomatic:this.showAutomaticInColor}));}else{R={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}var P=[];if(this.lineTitle&&this.lineTitle!==""){P.push(new mstrmojo.Label({text:this.lineTitle}));}P.push(C.copy(R,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"lineColorAndStyle",children:O}));this.addChildren(P);},getChildComp:function M(O){if(O.indexOf(J.LINE_COLOR)!==-1){return this.lineColorAndStyle.lineColor;}if(O.indexOf(J.LINE_STYLE)!==-1){return this.lineColorAndStyle.lineStyle;}return null;},iniChildrenComp:function G(P){I.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);var O=this.lineColorAndStyle.lineStyle;O.showNoneOption=this.showNoneOption;O.postInit();},onshowNoneOptionChange:function(O){this.lineColorAndStyle.lineStyle.set("showNoneOption",O.value);},setChildValue:function F(Q,R){var O=this.getChildComp(Q);if(O===undefined){return false;}var P;switch(O.alias){case"lineColor":if(R!==O.selectedValue){O.set("selectedValue",typeof R==="undefined"?"conflict":R);}break;case"lineStyle":if(typeof R==="undefined"){O.list.clearSelect();this.syncControls(function(){O.set("selectedValue","conflict");});}else{P=I.find(O.list.items,"v",R);if(P===-1){P=O.defaultSelectedIndex;}var S=O.list.items[P].id;if(S!==O.selectedValue){O.set("selectedValue",S);}}break;}},setChildEnable:function H(Q,P){var O=this.getChildComp(Q);if(O!==undefined){O.set("enabled",P);}},setChildrenValue:function B(O){O.forEach(function(P){this.setChildValue(P[0],P[1]);});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.num","mstrmojo.array","mstrmojo.VisMenuList","mstrmojo.mstr.EnumFunction","mstrmojo._HasMarkup","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel","mstrmojo.css","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.ui.DatasetUnitMenuUtils");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig");var m=document.getElementById("vis-measure-canvas"),A=document.getElementById("vis-measure-span"),AB={},Y={},q={},S=mstrmojo.dom,d=mstrmojo.elementHelper,p=mstrmojo.vi.ui.DatasetUnitMenuUtils,z=mstrmojo.VisEnum.EnumColorRankMode,AA=mstrmojo.chart.model.enums.EnumDSSObjectType,c=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,J=mstrmojo.chart.enums.EnumFontStyle,T=mstrmojo.hash,R=mstrmojo.func.wrapMethods,u=mstrmojo.VisEnum,e=u.SERVER_JSON_ERROR_TYPE;var o=64,f=128,O=4,k=5,t=6,w=7,i=mstrmojo,j=i.array,s=mstrmojo.array,P=i.desc,y=i.mstr.EnumFunction,a=mstrmojo.vi.enums.EnumDerivedElementType,Z=i._HasMarkup,F=i.css;mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869);function AD(AJ,AI){var AK=n.pluck(AI,"tid"),AL=n.pluck(AI,"eid"),AH=(AJ.getDocModel&&AJ.getDocModel())||n.getPropertyByPath(AJ,"model.docModel");if(n.getPropertyByPath(AH,"getColorBy") instanceof Function){return AH.getColorBy(AK,AL);}}function AC(AH,AJ,AL){var AK=AJ.id,AI=AJ.getHost();if(AI&&AI.observableModel){AH.forEach(function(AN){var AM=AI.observableModel[AN];if(AM){AM.attachEventListener("valueChanged",AK,AL);}});}}function U(AI){var AH={SINGLE:[{text:P(358,"Absolute"),value:y.FunctionAbs,n:P(358,"Absolute"),v:y.FunctionAbs}],PAIR:[{text:P(6017,"Add"),value:y.FunctionAdd,n:P(6017,"Add"),v:y.FunctionAdd},{text:P(2122,"Average"),value:y.FunctionAverage,n:P(2122,"Average"),v:y.FunctionAverage},{text:P(5868,"Least"),value:y.FunctionLeast,n:P(5868,"Least"),v:y.FunctionLeast},{text:P(5869,"Greatest"),value:y.FunctionGreatest,n:P(5869,"Greatest"),v:y.FunctionGreatest},{text:"A-B",value:y.FunctionMinus+";0",n:"A-B",v:y.FunctionMinus+";0"},{text:"B-A",value:y.FunctionMinus+";1",n:"B-A",v:y.FunctionMinus+";1"},{text:"A/B",value:y.FunctionDivide+";0",n:"A/B",v:y.FunctionDivide+";0"},{text:"B/A",value:y.FunctionDivide+";1",n:"B/A",v:y.FunctionDivide+";1"}],MORE:[{text:P(6017,"Add"),value:y.FunctionAdd,n:P(6017,"Add"),v:y.FunctionAdd},{text:P(2122,"Average"),value:y.FunctionAverage,n:P(2122,"Average"),v:y.FunctionAverage},{text:P(5868,"Least"),value:y.FunctionLeast,n:P(5868,"Least"),v:y.FunctionLeast},{text:P(5869,"Greatest"),value:y.FunctionGreatest,n:P(5869,"Greatest"),v:y.FunctionGreatest}]};return AH[AI];}function B(AI,AH){return !!(((AI&&AI.at)||0)&AH);}function N(AH){return !AH.selCells.some(function(AI){var AJ=AH.getCellForNode(AI);return d.isNonGroupNull(AJ)||!B(AJ,o)||AJ.dei!==undefined||AH.model.isRecursiveAttribute(AJ.tid);});}function I(AI){var AH;return !AI.selCells.some(function(AJ){AH=AI.getCellForNode(AJ);return(d.isNonGroupNull(AH)||!B(AH,f))||AI.model.isRecursiveAttribute(AH.tid);});}function E(AK,AJ,AM,AL,AI){var AH=AM&&AM.func;if((AH===AL)||(typeof AL==="string"&&AL.indexOf(AH)===0&&AL.indexOf(";0")>0)){return ;}if(AI){AK.editDECalculation(AJ,AL);}else{AK.derivedElementCalculation(AJ,AL);}}function M(AT,AR,AP){var AS=AR&&AR.es,AH=(AS&&AS.length)||AT.selCells.length,AK=(AH===1)?"SINGLE":((AH===2)?"PAIR":"MORE"),AQ=U(AK),AJ=(AR&&AR.func),AL,AU=AT.selCells,AI,AO,AN,AM;if(AK==="PAIR"){if(AR){AM=AS[0].v>AS[1].v;if(AM){AN=AS[0].n;AO=AS[1].n;AQ[4]={value:y.FunctionMinus+";1",v:y.FunctionMinus+";1"};AQ[5]={value:y.FunctionMinus+";0",v:y.FunctionMinus+";0"};AQ[6]={value:y.FunctionDivide+";1",v:y.FunctionDivide+";1"};AQ[7]={value:y.FunctionDivide+";0",v:y.FunctionDivide+";0"};}else{AO=AS[0].n;AN=AS[1].n;}}else{AO=AP(AU[0]);AN=AP(AU[1]);}AQ[O].text=AO+" - "+AN;AQ[k].text=AN+" - "+AO;AQ[t].text=AO+" / "+AN;AQ[w].text=AN+" / "+AO;AQ[O].n=AO+" - "+AN;AQ[k].n=AN+" - "+AO;AQ[t].n=AO+" / "+AN;AQ[w].n=AN+" / "+AO;}for(AL in AQ){if(typeof AQ[AL].value==="string"&&AQ[AL].value.indexOf(AJ)===0&&AQ[AL].value.indexOf(";0")>0){AI=AQ[AL];break;}if(AQ[AL].value===AJ){AI=AQ[AL];break;}}return{items:AQ,selectedItem:AI};}function V(AH,AK){if(!AH){return AH;}if(AK.length===1){return AH[AK[0]];}var AJ=(AK&&AK.length)||0,AI;for(AI=0;AI<AJ;AI++){AH=AH[AK[AI]];if(!AH){break;}}return AH;}function x(AJ,AI,AH){return AJ.every(function(AK){return AK.ttp===AI||AK.ttp===AH;});}function AG(AI,AL,AM){var AK=(AL&&AL.length)||0,AJ,AH,AN=AI;for(AJ=0;AJ<AK-1;AJ++){AH=AL[AJ];if(!AN[AH]){AN[AH]={};}AN=AN[AH];}AN[AL[AK-1]]=AM;}function X(AP){var AQ,AO,AK,AM,AH,AN=this.model.docModel.datasets,AI=false,AL=false,AJ={isDM:false};for(AQ in AN){if(AN.hasOwnProperty(AQ)){AO=AN[AQ].mx;j.forEach((AO||[]),function(AR){if(AR.did===AP){if(AR.um||AR.rdm){AL=true;}AI=true;return false;}});if(AI){break;}}}if(AL){AH=this.model.data.gts.col;AK=(AH&&AH[AH.length-1]);if(AK&&AK.otp===-1){AM=AK.es;}j.forEach((AM||[]),function(AR){if(AR.oid===AP){AJ={isDM:true,id:AR.id};return false;}});}return AJ;}function H(AH,AK){var AN=[],AJ={act:"updateElementsPropertiesMap",epm:AN},AL=[],AI={},AP=[AI],AO=this;AN.push({epmk:AL,epmv:AP});AH.forEach(function(AR){var AS=AR.tid,AQ=AS===-1,AT={ob:{did:AQ?"":AS}};AL.push(AT);});if(AK&&AK.indexOf("default")<0){AI.v={vv:AK};}var AM=[];AI.k={chn:AM};AH.forEach(function(AS){var AT=AS.tid,AQ=AT===-1,AR;if(AQ){AR=X.call(AO,AS.eid);if(AR.isDM){AM.push({emt:2,ei:AR.id});}else{AM.push({emt:2,mt:{did:AS.eid,tp:4,ql:0}});}}else{AM.push({emt:1,ei:AS.eid,at:{did:AT,tp:AS.tp,ql:0}});}});return AJ;}function C(AL,AJ){var AK="00000000000000000000000000000000",AI=AL&&AL.dropZones,AH=j.find(AI,"id",AJ);return AH===-1?[]:j.filter(AI[AH].items,function(AM){return AM.t===4&&AM.id!==AK;});}function b(AI,AH){return function(){var AJ=new i.ui.menus.MenuConfig();AJ.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);AJ.addRadioMenuGroup(null,AI,AH,"checkMark",undefined,true);return AJ;};}mstrmojo.VisUtility=mstrmojo.provide("mstrmojo.VisUtility",{getCache:function(){return JSON.stringify(q);},getUpdateColorMapAction:function(AI,AH){return H.call(this,AI,AH);},measureTextSize:function(AI,AH,AJ){return{width:this.measureTextWidth(AI,AH,AJ),height:this.measureTextHeight(AI,AH,AJ)};},measureTextWidth:function(AK,AJ,AL,AI,AH){if(S.isIE||S.isIEW3C){return this.measureTextWidthWithSpan(AK,AJ,AL,AI,AH);}return this.measureTextWidthWithCanvas(AK,AJ,AL);},measureTextWidthWithCanvas:function(AK,AL,AO,AM){AM=AM||false;if(AK===""){return 0;}if(AK===" "){AK="\u00A0";}var AN=AL.fontFamily,AQ=AL.fontSize,AJ=AL.fontStyle,AP=AL.fontWeight;if(typeof AQ==="number"){AQ+="pt";}AJ=AJ||"normal";AP=AP||"normal";AO=AO||0;var AI=AM?undefined:V(AB,[AN,AQ,AJ,AP,AK]);if(!AI){if(!m){m=document.createElement("canvas");m.width=0;m.height=0;m.id="vis-measure-canvas";m.style.position="absolute";m.style.top="0";m.style.fontSize="medium";document.body.appendChild(m);}var AH=m.getContext("2d");AH.font=AJ+" "+AP+" "+AQ+" "+AN;AI=Math.ceil(AH.measureText(AK).width);AG(AB,[AN,AQ,AJ,AP,AK],AI);}return AI+AO;},measureTextWidthWithSpan:function(AJ,AK,AO,AQ,AL){if(AJ===""){return 0;}if(AJ===" "){AJ="\u00A0";}var AM=AK.fontFamily,AR=AK.fontSize,AI=AK.fontStyle,AN=AK.fontWeight;if(typeof AR==="number"){AR+="px";}AI=AI||"normal";AN=AN||"normal";AQ=AQ||"auto";AO=AO||0;AL=!!AL;if(typeof AQ==="number"){AQ+="px";}var AH=V(Y,[AM,AR,AI,AN,AQ,AJ]);if(!AH){var AP;if(!A){A=document.createElement("span");AP=A.style;A.id="vis-measure-span";AP.position="absolute";AP.top="0";AP.visibility="hidden";AP.width="auto";AP.height="auto";if(AL){AP.whiteSpace="nowrap";}else{AP.whiteSpace="normal";}document.body.appendChild(A);}AP=A.style;if(AL){AP.whiteSpace="nowrap";}else{AP.whiteSpace="normal";}AP.width="auto";AP.height=AQ;AP.fontFamily=AM;AP.fontSize=AR;AP.fontStyle=AI;AP.fontWeight=AN;A.innerHTML=AJ;AH=Math.ceil(A.clientWidth);AG(Y,[AM,AR,AI,AN,AQ,AJ],AH);}return AH+AO;},measureTextHeight:function(AJ,AK,AP,AR,AH,AM,AL){if(AJ===""){return 0;}if(AJ===" "){AJ="\u00A0";}var AN=AK.fontFamily,AT=AK.fontSize,AI=AK.fontStyle,AO=AK.fontWeight;AH=AH||"normal";AL=!!AL;if(typeof AT==="number"){AT+="px";}AI=AI||"normal";AO=AO||"normal";AR=AR||"auto";AP=AP||0;if(typeof AR==="number"){AR+="px";}var AS=AM?undefined:V(q,[AN,AT,AI,AO,AR,AJ]);if(!AS){var AQ;if(!A){A=document.createElement("span");AQ=A.style;A.id="vis-measure-span";AQ.position="absolute";AQ.top="0";AQ.visibility="hidden";AQ.width="auto";AQ.height="auto";if(AL){AQ.whiteSpace="nowrap";}else{AQ.whiteSpace="normal";}document.body.appendChild(A);}AQ=A.style;if(AL){AQ.whiteSpace="nowrap";}else{AQ.whiteSpace="normal";}AQ.heigth="auto";AQ.width=AR;AQ.fontFamily=AN;AQ.fontSize=AT;AQ.fontStyle=AI;AQ.fontWeight=AO;AQ.wordBreak=AH;A.innerHTML=AJ;AS=A.clientHeight;if(!AM){AG(q,[AN,AT,AI,AO,AR,AJ],AS);}}return AS+AP;},getVisEmptyMsg:function(AH){var AI="";switch(AH){case"AE_ERROR":AI='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div style="padding:25px"><div class="gm-warning-icon" style="padding-bottom:18px"></div><div style="padding-bottom:8px">'+mstrmojo.desc(14436,"Unable to load visualization.")+"</div><div>"+mstrmojo.desc(14437,"Use a filter to reduce the data and try again.")+"</div></div></div></div></div>";break;case"NODATA_OTHERERROR":AI='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div>'+(this.errorMsg||mstrmojo.desc(12093,"Filter excludes all data"))+"</div></div></div></div>";break;default:AI='<div class="mstrmojo-Label dropMsg" style="display: block;" >'+mstrmojo.desc(11668,"Drag objects here.")+"</div>";}return AI;},applyStyles2DomNode:function(AM,AP){var AH,AN=AM.style;if(Object.prototype.hasOwnProperty.call(AP,"backgroundColor")&&AP.backgroundColor!==""&&AP.backgroundColor!=="transparent"){var AL=1;if(Object.prototype.hasOwnProperty.call(AP,"opacity")&&AP.opacity!==""){AL=AP.opacity;}var AI=AP.backgroundColor,AO=function AO(AQ){if(isNaN(AQ)){AQ=0;}AQ%=16777216;return{b:AQ%256,g:(AQ>>8)%256,r:(AQ>>16)%256};},AK="";if(AI){var AJ=function AJ(AR,AS){if(AR==="transparent"){return"rgba(0,0,0,0)";}AR=this.parseCSSColor(AR,false);var AQ=AO(AR);return"rgba("+AQ.r+" ,"+AQ.g+" ,"+AQ.b+" ,"+AS+" )";}.bind(this);if(AI.c1!==undefined&&AI.c2!==undefined&&AI.or!==undefined){AK=(F.buildGradient(AI.or,AJ(AI.c1,AL),AJ(AI.c2,AL))).v;}else{AK=AJ(AI,AL);}AN.background=AK;}}else{AN.backgroundColor="rgba(0,0,0,0)";}for(AH in AP){if(AH!=="backgroundColor"&&AH!=="opacity"&&Object.prototype.hasOwnProperty.call(AP,AH)&&AP[AH]&&AP[AH]!==""){AN[AH]=AP[AH];}}},parseCSSColor:function(AL,AI){var AH,AJ;if(AL.length===7){if(AI===true){AH=AL[5]+AL[6]+AL[3]+AL[4]+AL[1]+AL[2];}else{AH=AL.slice(1);}}else{AH=[];var AK=AL.slice(1);if(AI===true){for(AJ=2;AJ>=0;AJ--){AH.push(AK[AJ]);AH.push(AK[AJ]);}}else{for(AJ=0;AJ<3;AJ++){AH.push(AK[AJ]);AH.push(AK[AJ]);}}AH=AH.join("");}return parseInt(AH,16);},positionDomNode:function(AJ,AL){var AI,AO,AM,AK=["width","height","top","left","right","bottom"],AN=AK.length,AH=AJ.style;for(AI=0;AI<AN;AI++){AO=AK[AI];AM=AL[AO];if(AM!==undefined){if((typeof AM)==="number"){AM+="px";}AH[AO]=AM;}}},getComputedFontStyle:function G(AJ){var AH=mstrmojo.css.getComputedStyle(AJ);var AK={};AK.fontFamily=AH.fontFamily;AK.fontSize=AH.fontSize;AK.fontStyle=AH.fontStyle;AK.fontWeight=AH.fontWeight;AK.fontVariant=AH.fontVariant;var AI=parseInt(AH.paddingLeft)||0,AL=parseInt(AH.paddingLeft)||0;AK.bonus=AI+AL;return AK;},splitWordIfTooLong:function(AR,AP,AK){var AN=[];var AO=AR.length;var AL;for(AL=0;AL<AO;AL++){var AI=AR[AL];while(true){var AS=this.measureTextWidth(AI,AK);if(AS>AP){var AQ=(AP/AS)*AI.length;var AH=Math.max(Math.round(AQ),1);while(AH>0){var AM=AI.substr(0,AH);var AJ=Math.round(this.measureTextWidth(AM,AK));if(AJ<=AP||AH===1){AN.push(AM);break;}else{AH--;}}AI=AI.substr(AH,AI.length-AH);}else{AN.push(AI);break;}}}return AN;},truncateTextToLineWithWordWrap:function Q(Ah,Aa,AY,AN,AZ,AR){var AV=Ah.split(" "),Ab=AV.length;if(!AR){AV=this.splitWordIfTooLong(AV,AY,Aa);}var Ao,AT=[],Aj=[],AH=0,AL=AV.length,Aq=this.measureTextWidth(" ",Aa),AK=0,AQ=false,AX=(Ab===AV.length);Aj.push(0);for(Ao=0;Ao<AL;Ao++){var Af=this.measureTextWidth(AV[Ao],Aa);if(!AR&&Af>AY){var AI=AV[Ao];var Am=(AY/Af)*AI.length;AV[Ao]=AI.substr(0,parseInt(Am,10));Af=AY;}AT.push(Af);AH+=Af;Aj.push(AH);if(Ao!==AL-1){AH+=Aq;}}var Al,An,Ad=AN;for(Al=0,An=0;An<Aj.length;){var AP=Aj[An]-Aj[Al];if(Al>0&&An!==Al){AP-=Aq;}var AO=Aj[An+1]-Aj[Al];if(Al>0&&An+1!==Al){AO-=Aq;}if(AP<=AY&&((An+1===Aj.length)||(AO>AY))){AK=Math.max(AK,AP);Ad--;if(Ad===0||An===AL){break;}else{Al=An;An++;}}else{An++;}}if(An>AL){An=AL;}var AS=Aj[An]-Aj[Al];if(Al>0&&An!==Al){AS-=Aq;}var Ag;if(An>=AL&&AS<AY){Ag=AV.join(" ");}else{AQ=true;AK=AY;Ag=AV.slice(0,An).join(" ");var AU=this.measureTextWidth("...",Aa);if(AS+AU<=AY){if(AS+Aq+AU>AY){Ag+="...";}else{var Ap=AV[An],AW;for(var Ac=1;Ac<Ap.length;Ac++){AW=this.measureTextWidth(Ap.substr(0,Ac),Aa);if(AS+Aq+AW+AU>AY){break;}}Ag+=" "+Ap.substr(0,Ac-1)+"...";}}else{if(Ag.charAt(Ag.length-1)===" "){Ag=Ag.substr(0,Ag.length-1);}var Ae=Ag.lastIndexOf(" ");var AJ=Ag.length-1-Ae;if(AJ===3){Ag=Ag.substr(0,Ag.length-3)+" ...";}else{var Ai=0,AM="",Ak=0;while(Ai<AU&&Ag.length>Ak){Ak++;AM=Ag.substr(Ag.length-Ak,Ag.length);Ai=this.measureTextWidth(AM,Aa);}Ag=Ag.substr(0,Ag.length-Ak)+"...";}}}if(AZ){return{text:Ag,truncated:AQ,maxLineLen:AK,canWordWrap:AX};}return Ag;},measureSuperTextWidth:function AF(AI,AJ,AH,AK){return AI?this.measureTextWidth("<sup>"+AJ+"</sup>",AH,AK):this.measureTextWidth(AJ,AH,AK);},splitTokenIfTooLong:function h(AS,AQ,AK){var AO=[];var AP=AS.length;var AL,AI,AT,AN,AU;for(AL=0;AL<AP;AL++){AI=AS[AL];AN=AI.isSuper;while(true){AT=AI.v;if(AI.textWidth!==undefined){AU=AI.textWidth;}else{AU=AI.textWidth=this.measureSuperTextWidth(AN,AT,AK);}if(AU>AQ){var AR=(AQ/AU)*AT.length;var AH=Math.max(Math.round(AR),1);while(AH>0){var AM=AT.substr(0,AH);var AJ=Math.round(this.measureSuperTextWidth(AN,AM,AK));if(AJ<=AQ||AH===1){AO.push({v:AM,isSuper:AN,textWidth:AJ});break;}else{AH--;}}AI={v:AT.substr(AH,AT.length-AH),isSuper:AN};}else{AO.push(AI);break;}}}return AO;},truncateTextToLineWithWordWrapForTokens:function W(AR,AL,Ak,Ac,Al,AX){var Af=AR.length;AR=this.splitTokenIfTooLong(AR,Ak,AL);var Aj,AW=[],AH=0,Aa=AR.length,AI=0,Ab=false,AN=(Af===AR.length),AP,AU,Ad,AJ,Ah,AQ,AV;if(AX&&!AN){return{canWordWrap:AN};}AW.push(0);for(Aj=0;Aj<Aa;Aj++){AP=AR[Aj];Ad=AP.v;AU=AP.isSuper;if(AP.textWidth!==undefined){AJ=AP.textWidth;}else{AJ=AP.textWidth=this.measureSuperTextWidth(AU,Ad,AL);}if(AJ>Ak){var Ai=(Ak/AJ)*Ad.length;AP.v=Ad.substr(0,parseInt(Ai,10));AJ=AP.textWidth=Ak;}AH+=AJ;AW.push(AH);}var AT,Ae,AS=Ac;for(AT=0,Ae=0;Ae<AW.length;){var AO=AW[Ae]-AW[AT];var AM=AW[Ae+1]-AW[AT];if(AO<=Ak&&((Ae+1===AW.length)||(AM>Ak))){AI=Math.max(AI,AO);AS--;if(AS===0||Ae===Aa){break;}else{AT=Ae;Ae++;}}else{Ae++;}}if(Ae>Aa){Ae=Aa;}var AZ=AW[Ae]-AW[AT];var Am;if(Ae>=Aa&&AZ<Ak){Am=AR;}else{Ab=true;AI=Ak;Am=AR.slice(0,Ae);var AK=this.measureTextWidth("...",AL);if(AZ+AK<=Ak){AQ=AR[Ae];Ad=AQ.v;AU=AQ.isSuper;for(Ah=1;Ah<Ad.length;Ah++){AV=this.measureSuperTextWidth(AU,Ad.substr(0,Ah),AL);if(AZ+AK+AV>Ak){break;}}if(Ah>1){AP={v:Ad.substr(0,Ah-1),isSuper:AU};AP.textWidth=this.measureSuperTextWidth(AU,AP.v,AL);Am.push(AP);Am.push({v:"...",textWidth:AK});}}else{var AY=0,Ag;for(Aj=Am.length-1;Aj>=0;Aj--){AP=Am[Aj];Ad=AP.v;AU=AP.isSuper;Ag=0;for(Ah=Ad.length-1;Ah>=0;Ah--){Ag=this.measureSuperTextWidth(AU,Ad.substr(Ah),AL);if(AY+Ag>=AK){break;}}if(Ah>=0){break;}else{AY+=Ag;}}if(Aj>=0){if(Ah>0){AP.v=Ad.substr(0,Ah);AP.textWidth=this.measureSuperTextWidth(AU,AP.v,AL);Am=Am.slice(0,Aj+1);}else{if(Ah===0){Am=Am.slice(0,Aj);}}Am.push({v:"...",textWidth:AK});}else{Am=[{v:"...",textWidth:AK}];}}}if(Al){return{text:Am,truncated:Ab,maxLineLen:AI,canWordWrap:AN};}return Am;},getRankMode:function g(AN){var AP=1,AO=2,AM=3,AI=4,AK=5,AH=6,AL=7,AJ=z.INVALID;if(AN){if(x(AN,AM,AO)){AJ=z.TOP_PERCENT;}else{if(x(AN,AM,AP)){AJ=z.BOTTOM_PERCENT;}else{if(x(AN,AH,AI)){AJ=z.BOTTOM;}else{if(x(AN,AH,AK)){AJ=z.TOP;}else{if(x(AN,AL)){AJ=z.VALUE;}}}}}}return AJ;},getColorByTitle:function L(AI,AH){if(AH===z.BOTTOM_PERCENT||AH===z.TOP_PERCENT){AI=mstrmojo.desc(2787,"Percentage of ##").replace("'##'",AI);}else{if(AH===z.BOTTOM||AH===z.TOP){AI=mstrmojo.desc(2788,"Rank of ##").replace("'##'",AI);}}return AI;},getColorByFormatStr:function r(AI,AH){if(AH===z.BOTTOM_PERCENT||AH===z.TOP_PERCENT){AI="0%;(0%)";}else{if(AH===z.BOTTOM||AH===z.TOP){AI="";}}return AI;},getColorByItems:function AE(AH,AR,AY,AU,AP,AN,AV){var AT=[],AZ,AJ,AO=mstrmojo.num,AM,AQ;if(AH===undefined||AH.length===0){return AT;}var Ab=true;if(AH.length>1){if(AH[0].ceil===AH[1].flr){Ab=false;}else{Ab=true;}}for(AZ=0;AZ<AH.length;AZ++){var Aa=AH[AZ],AL={},AI=Aa.ceil,AX=Aa.flr;if((AZ===0&&Ab)||(AZ===AH.length-1&&!Ab)){if(AR===z.BOTTOM_PERCENT||AR===z.TOP_PERCENT){AL.flr=AX/100;AL.ceil=1;}else{if(AR===z.TOP||AR===z.BOTTOM){AX+=1;AL.flr=Math.floor(AX);AL.ceil=AP;}else{AL.flr=AX;AL.ceil=AY;}}AQ=AL.ceil;}else{if((AZ===0&&!Ab)||(AZ===AH.length-1&&Ab)){if(AR===z.BOTTOM_PERCENT||AR===z.TOP_PERCENT){AL.flr=0;AL.ceil=AI/100;}else{if(AR===z.TOP||AR===z.BOTTOM){AL.flr=0;AL.ceil=Math.floor(AI);}else{AL.flr=AU;AL.ceil=AI;}}AM=AL.flr;}else{if(AR===z.BOTTOM_PERCENT||AR===z.TOP_PERCENT){AX=AX/100;AI=AI/100;}else{if(AR===z.TOP||AR===z.BOTTOM){AX+=1;AX=Math.floor(AX);AI=Math.floor(AI);}}AL.flr=AX;AL.ceil=AI;}}if(AR===z.TOP||AR===z.BOTTOM){AL.ceil=AL.ceil>AP?AP:AL.ceil;}if(AN){AL.label=AO.formatByMask(AN,AL.flr)+" - "+AO.formatByMask(AN,AL.ceil);}else{AL.label=AL.flr+" - "+AL.ceil;}if(Aa.fmt&&Aa.fmt.bc){AL.color=Aa.fmt.bc;}else{AL.color=AV;}AT.push(AL);}AT=AT.filter(function(Ac){return Ac.flr<=Ac.ceil&&!(Ac.flr>AQ||Ac.ceil<AM);});if(AR===z.TOP||AR===z.BOTTOM){AJ=AP;}else{if(AT.length>0){if(Ab){AJ=AT[0].ceil-AT[(AT.length-1)].flr;}else{AJ=AT[(AT.length-1)].ceil-AT[0].flr;}}}var AW=0,AS,AK;for(AZ=0;AZ<AT.length;AZ++){if(AZ===AT.length-1){AT[AZ].scopePercent=1-AW;}else{if(AR===z.TOP||AR===z.BOTTOM){AK=AT[AZ].ceil-AT[AZ].flr+1;}else{AK=AT[AZ].ceil-AT[AZ].flr;}AS=AK/AJ;AT[AZ].scopePercent=AS;AW+=AS;}}return AT;},getDefaultColorByItems:function(AK,AI,AJ){var AH={};AH.label=AJ+" - "+AI;AH.flr=AJ;AH.ceil=AI;AH.color=AK;AH.scopePercent=1;return[AH];},getNumberFormat:function(AK,AI){var AL=AK.nf,AJ=AK.gvs;function AH(){var AO=(AJ&&AJ.items&&AJ.items[0]&&AJ.items[0].items)||[],AN=AO[AI]||{},AM=AN.nfs;return typeof AM==="string"?AM:"";}if(typeof AL[AI].nfs!=="string"){AL[AI].nfs=AH();}return AL[AI].nfs;},hasOnlyMetricsOnColumn:function(AI){var AH=(AI&&AI.gts&&AI.gts.col)||[];return AH.every(function(AJ){return AJ.otp===AA.DssTypeUnknown&&(AJ.es||[]).every(function(AK){return AK.otp===AA.DssTypeMetric;});});},hasNoMetricOnRow:function(AI){var AJ=(AI&&AI.gts&&AI.gts.row)||[],AH=function(AK){return AK.otp!==AA.DssTypeMetric;};return AJ.every(AH);},isOnExpressMode:function(){return mstrApp.isExpress;},modifyScExp:function(AP,AH,AT,AN){if(!AP||!AH){return ;}var AK=AP.nds,AO,AI,AQ,AS,AR,AM,AL,AJ;s.forEach(AK||[],function(AU){AO=AU.nds;s.forEach(AO||[],function(AV){AI=AV.es;s.forEach(AI||[],function(AW){AS=AW.v;AM=AN[AS];if(!AM){AM=AT.getNormalizedFormElementId(AS);AN[AS]=AM;}s.forEach(AH||[],function(AX){AQ=AX.es;s.forEach(AQ||[],function(AY){AJ=false;AR=AY.id;if(AR===AS){AJ=true;}else{AL=AN[AR];if(!AL){AL=AT.getNormalizedFormElementId(AR);AN[AR]=AL;}if(AM===AL){AJ=true;}}if(AJ){AW.v=AY.id;AW.n=AY.n;return false;}});if(AJ){return false;}});});});});},modifyScExpDeprecated:function(AN,AO,AL,AJ){if(!AN||!AO){return ;}var AK=AN.nds,AI,AH,AM;s.forEach(AK||[],function(AP){AI=AP.nds;s.forEach(AI||[],function(AQ){AH=AQ.es;s.forEach(AH||[],function(AR){s.forEach(AO||[],function(AS){s.forEach(AS||[],function(AT){AM=AT.es;s.forEach(AM||[],function(AU){if(AL.call(AJ,AU.id,AR.v)){AR.v=AU.id;AR.n=AU.n;}});});});});});});},getMouseOffset:function(AI){var AH=(AI.offsetX!==undefined)?AI.offsetX:(AI.layerX),AJ=(AI.offsetY!==undefined)?AI.offsetY:(AI.layerY);return{x:AH,y:AJ};},translateLineStyle:function(AH){var AJ=["none","solid","solid","dashed","dotted"],AI=["1px","1px","2px","1px","1px"];return{width:AI[AH]||"0px",style:AJ[AH]||"none"};},getGroupAndCalculationContextMenuForDataPoints:function(AQ,Ae){var AS,AU=[],AJ=[],Ab=[],AO=Ae.fnCellName,AW=Ae.fnUnique,AN=Ae.fnMakeNode,AZ=AQ.getCellForNode.bind(AQ),Ag=Ae.selection;var AM=new i.ui.menus.MenuConfig(),AI=new i.ui.menus.MenuConfig(),AY=new i.ui.menus.MenuConfig(),Ad=new i.ui.menus.MenuConfig();function Af(Ah){AQ.selCells=AU[Ah].selCells;AQ.derivedElementGroup(AZ(AQ.selCells[0]));}function AP(Aj){AQ.selCells=AJ[Aj].selCells;var Ai=AZ(AJ[Aj].selCells[0]),Ah=AQ.getDEInfo(Ai);AQ.derivedElementsEdit(AZ(AQ.selCells[0]),Ah);}function AV(Ai){AQ.selCells=AJ[Ai].selCells;var Ah=AZ(AJ[Ai].selCells[0]);AQ.removeQuickDE(Ah);}function AT(Ai){AQ.selCells=AJ[Ai].selCells;var Ah=AZ(AJ[Ai].selCells[0]);AQ.renameDEList(Ah);}function AX(Ah){E(AQ,AZ(AQ.selCells[0]),null,Ah,false);}function AH(Ah){E(AQ,AZ(AQ.selCells[0]),null,Ah,true);}function AL(Ai){var Ah=AZ(AJ[Ai].selCells[0]);AQ.removeQuickDE(Ah);}function Ac(Ai){var Ah=AZ(AJ[Ai].selCells[0]);AQ.editDECalculation(Ah);}function AR(Ah){Ah=Ah||[];function Ai(Am){var Aj=Am.extra||{},An=Am.setup||mstrmojo.emptyFn,Ak=Am.action||mstrmojo.emptyFn,Al=[];An(Al,Aj);Ak(Al,Aj);}Ah.forEach(Ai);}var AK=[{name:"group",setup:function(Ah){AU.forEach(function(Ai){AQ.selCells=AU[Ai.v].selCells;if(!Object.prototype.hasOwnProperty.call(AJ,Ai.v)&&N(AQ)){Ah.push(Ai);}});},action:function(Ai){var Ah;if(Ai.length===1){Ah=Ai[0].v;AM.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AQ.selCells=AU[Ah].selCells;AQ.derivedElementGroup(AZ(AQ.selCells[0]));});}if(Ai.length>1){AM.addPopupMenuItem(mstrmojo.desc(1911,"Group"),AQ.id,b(Af,Ai),"xt");}}},{name:"edit-group",setup:function(Ah){AJ.forEach(function(Al){var Ak=AZ(AJ[Al.v].selCells[0]),Aj=AQ.getDEInfo(Ak),Ai=Aj&&Aj.de;if(Ai&&Ai.t===a.LIST){Ah.push(Al);}});},action:function(Ai){var Ah,Ak,Aj;if(Ai.length===1){Ah=AJ[Ai[0].v].selCells;Ak=AZ(Ah[0]);Aj=AQ.getDEInfo(Ak);AI.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AQ.selCells=Ah;AQ.derivedElementsEdit(AZ(AQ.selCells[0]),Aj);});AI.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AQ.selCells=Ah;AQ.removeQuickDE(Ak);});Ad.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AQ.selCells=Ah;AQ.renameDEList(Ak);});}if(Ai.length>1){AI.addPopupMenuItem(mstrmojo.desc(13395,"Edit Group..."),AQ.id,b(AP,Ai),"xt");AI.addPopupMenuItem(mstrmojo.desc(12195,"Ungroup"),AQ.id,b(AV,Ai),"xt");Ad.addPopupMenuItem(mstrmojo.desc(13968,"Rename Group..."),AQ.id,b(AT,Ai),"xt");}}},{name:"calculation",setup:function(Ah){Ab.forEach(function(Ak,Aj,Ai){AQ.selCells=Ai[Ak.v].selCells;var Am=AZ(AQ.selCells[0]),Al=AQ.getDEInfo(Am),An=Al&&Al.de;if(!(An&&An.t===a.RESIDUE)&&I(AQ)){Ah.push(Ak);}});},action:function(Ah){if(Ah.length===1){AM.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AQ.id,function(){var Ai=Ah[0].v,Aj=new i.ui.menus.MenuConfig();AQ.selCells=Ab[Ai].selCells;Aj.addRadioMenuGroup(null,AX,M(AQ,null,AO).items,"checkMark",undefined,true);return Aj;},"xt");}if(Ah.length>1){AM.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AQ.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Ah,selectedIndex:0,onitemSelected:function(Ai){var Aj=Ai.v;AQ.selCells=Ab[Aj].selCells;this.parent.checkList.set("items",[]);this.parent.checkList.set("items",M(AQ,null,AO).items);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Aj,Ai){E(AQ,AZ(AQ.selCells[0]),null,Ai.checkList.selectedItem.v,false);}});});}}},{name:"edit-calculation",setup:function(Ah){AJ.forEach(function(Al){var Ak=AZ(AJ[Al.v].selCells[0]),Aj=AQ.getDEInfo(Ak),Ai=Aj&&Aj.de;if(Ai&&Ai.t===a.CALCULATION){Ah.push(Al);}});},action:function(Ah){function Ai(){var Aj=Ah[0].v;AQ.selCells=AJ[Aj].selCells;var An=AZ(AQ.selCells[0]),Am=AQ.getDEInfo(An),Ao=Am&&Am.de,Al=M(AQ,Ao,AO),Ak=new i.ui.menus.MenuConfig();Ak.addRadioMenuGroup(Al.selectedItem.value,AH,Al.items,"checkMark",undefined,true);return Ak;}if(Ah.length===1){AY.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AQ.id,Ai,"xt");AY.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){var Aj=Ah[0].v;AQ.selCells=AJ[Aj].selCells;var Ak=AZ(AQ.selCells[0]);AQ.removeQuickDE(Ak);});Ad.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){var Aj=Ah[0].v;AQ.selCells=AJ[Aj].selCells;var Ak=AZ(AQ.selCells[0]);AQ.editDECalculation(Ak);});}if(Ah.length>1){AY.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AQ.id,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Ah,selectedIndex:0,onitemSelected:function(Am){var An=Am.v;AQ.selCells=AJ[An].selCells;var Al=AZ(AQ.selCells[0]),Ak=AQ.getDEInfo(Al),Ao=Ak&&Ak.de;var Aj=M(AQ,Ao,AO);this.parent.checkList.set("items",[]);this.parent.checkList.set("items",Aj.items);this.parent.checkList.set("selectedItem",Aj.selectedItem);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Ak,Aj){E(AQ,AZ(AQ.selCells[0]),null,Aj.checkList.selectedItem.v,true);}});});AY.addPopupMenuItem(mstrmojo.desc(12197,"Delete Calculation"),AQ.id,b(AL,Ah),"xt");Ad.addPopupMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),AQ.id,b(Ac,Ah),"xt");}}}];AS=AW(Ag);AS.forEach(function(Ai){var Ak=AN(Ai),Ah=AZ(Ak),Aj,Al,Am;if(!AQ.model.supportsViewFilterActions(Ah.tid)){return ;}Aj=Ah.dei===undefined?AU:AJ;Al=Ah.tid;Am=AQ.model.getObjectInfo(Al).n;if(Aj[Al]===undefined){Aj[Al]={};Aj[Al].selCells=[];Aj.push({n:Am,v:Al,text:Am,value:Al});}Aj[Al].selCells.push(Ak);if(Ab[Al]===undefined){Ab[Al]={};Ab[Al].selCells=[];Ab.push({n:Am,v:Al,text:Am,value:Al});}Ab[Al].selCells.push(Ak);});var Aa=this.getPropertyByPath(AQ,"model.data.visName")||this.getPropertyByPath(AQ,"model.data.vis.vn");if(Aa==="VIHeatMapVisualizationStyle"){AK.splice(2,2);}AR(AK);return{createDe:AM,editGroup:AI,editCalculation:AY,renameDe:Ad};},getGroupAndCalculationContextMenu:function(AP,Ad,Aa){var Ac=AP,AW=Aa.skipSingleAttrCheck||Ac.isSingleAttrSelection(),AK=false,AM=Ac.isSingleSelection(),AQ=Ac.getDEInfo(Ad),AL=AQ&&AQ.deObject,AZ=AQ&&AQ.de,AU=AL&&Ac.getOthersDEInfo(AL),AS=Ac.getSelections(),AY=true,AO=Aa.fnCellName,Ab=this.getPropertyByPath(Ac,"model.data.visName")||this.getPropertyByPath(Ac,"model.data.vis.vn");var AN=new i.ui.menus.MenuConfig(),AI=new i.ui.menus.MenuConfig(),AT=new i.ui.menus.MenuConfig(),AX=new i.ui.menus.MenuConfig();Ac.selCells=Aa.selection;if(AP.model.supportsViewFilterActions(Ad.tid)){if((AK||AW)&&B(Ad,o)&&N(Ac)){AN.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AP.derivedElementGroup(Ad);});}if(AM&&AZ&&AZ.t===a.LIST){AI.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AP.derivedElementsEdit(Ad,AQ);});AI.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AP.removeQuickDE(Ad);});AX.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AP.renameDEList(Ad);});}var AR=function(Ae){E(Ac,Ad,AZ,Ae,false);},AV=function(Ae){E(Ac,Ad,AZ,Ae,true);};if(AU&&!AM&&AW){j.forEach(AS,function(Ae){if(Ae[0]&&Ae[0].eid.indexOf(AU.id)>-1){AY=false;return false;}});}if(Ab!=="VIHeatMapVisualizationStyle"&&!(AM&&AZ&&AZ.t===a.RESIDUE)&&(AK||AW)&&B(Ad,f)&&I(Ac)){var AH=function(){var Ae=new i.ui.menus.MenuConfig(),Af=M(Ac,null,AO);Ae.addRadioMenuGroup(null,AR,Af.items,"checkMark",undefined,true);return Ae;};AN.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),this.id,AH,"xt");}if(AM&&AZ&&AZ.t===a.CALCULATION){var AJ=function(){var Ae=new i.ui.menus.MenuConfig(),Af=M(Ac,AZ,AO);Ae.addRadioMenuGroup(Af.selectedItem.value,AV,Af.items,"checkMark",undefined,true);return Ae;};AT.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),this.id,AJ,"xt");AT.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){AP.removeQuickDE(Ad);});AX.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){AP.editDECalculation(Ad);});}}return{createDe:AN,editGroup:AI,editCalculation:AT,renameDe:AX};},isHostedPopupNode:function(AL,AJ,AI,AH){var AM=AI?AL:AL&&AL.parentNode;while(AM&&(AM!==AH)){var AK=AM.getAttribute&&AM.getAttribute(AJ);if(AK!==null&&AK.indexOf("mstrmojo-popup-widget-hosted")>=0){return true;}AM=AM.parentNode;}return false;},applyStyle2Legend:function(AK,AJ,AI){var AH,AM={},AL={};for(AH in AK){if(AH.indexOf("font")>=0||AH.indexOf("color")>=0||AH.indexOf("textDecoration")>=0){AM[AH]=AK[AH];}else{AL[AH]=AK[AH];}}if(AJ){AJ.style.background="";this.applyStyles2DomNode(AJ,AL);}if(AI){this.applyStyles2DomNode(AI,AM);}},mergeMenuConfigs:function K(AI,AH){function AJ(AL,AM,AK){if(!AM){return ;}if(!AK&&AL.hasMenuItems()&&AM.hasMenuItems()){AL.addSeparator();}if(AM.hasMenuItems()){AL.absorbMenuItems(AM);}}return AH.reduce(function(AK,AL){AJ(AK,AI[AL.name],AL.noSeparator);return AK;},new mstrmojo.ui.menus.MenuConfig());},absorbMenuItems:function(AI,AH,AJ){AI.addDisposable(AH);AI.absorbMenuItems(AH);if(AJ&&AH.menus.length>0){AI.addSeparator();}},addWheelListener:(function(){var AK=mstrmojo.dom,AJ=AK.attachEvent,AI=AK.preventDefault,AL;function AH(AP,AO,AQ,AN){var AM=(AL==="wheel")?AQ:function(AR){if(!AR){AR=window.event;}var AT={originalEvent:AR,target:AR.target||AR.srcElement,type:"wheel",deltaMode:(AR.deltaMode!==undefined?AR.deltaMode:1),deltaX:0,deltaZ:0,preventDefault:function(){AI(window,AR);}},AS=this;if(AL==="mousewheel"){AT.deltaY=-AR.wheelDelta;if(AR.wheelDeltaX!==undefined){AT.deltaX=-AR.wheelDeltaX;}}else{AT.deltaY=AR.detail;}return AQ.call(AS,AT);};return AJ(AP,AO,AM,AN);}if(Object.prototype.hasOwnProperty.call(document.createElement("div"),"onwheel")){AL="wheel";}else{AL=document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";}return function(AN,AO,AM){return AH(AN,AL,AO,AM);};}()),isNearZero:function(AI,AH){AH=AH||5;var AJ=1/Math.pow(10,AH);return(Math.abs(AI)<AJ);},hasMergedRowCells:function(AH){return false;},getMockUpThresholds:function(AJ,AK){var AH=[{tid:1,n:"threshold 0",scope:1,rtp:2,rtxt:"",fmt:{bc:"#cc2525",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,flr:0,ceil:10},{tid:2,n:"threshold 1",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e34b4b",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5},{v:"30%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:10,ceil:30},{tid:3,n:"threshold 2",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e97d7d",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"30%",dtp:5},{v:"50%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:30,ceil:50},{tid:4,n:"threshold 3",scope:1,rtp:2,rtxt:"",fmt:{bc:"#79d479",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"50%",dtp:5},{v:"70%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:50,ceil:70},{tid:5,n:"threshold 4",scope:1,rtp:2,rtxt:"",fmt:{bc:"#57ba57",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"70%",dtp:5},{v:"90%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:70,ceil:90},{tid:6,n:"threshold 5",scope:1,rtp:2,rtxt:"",fmt:{bc:"#2ca02c",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"90%",dtp:5}],fn:5,fnt:3}],fn:19},ttp:1,flr:90,ceil:100}];j.forEach(AH,function(AM){var AL=AM.expr.nds[0].m;AL.did=AJ;AL.n=AK;});var AI={};AI[AJ]=AH;return AI;},generateThresholdsInfo:function(AJ,AO,AH,AL){var AN=AH.length,AI=[],AR,AK,AS=0,AQ=0;for(var AM=0;AM<AN;AM++){AK=Math.round(AL[AM]*100);AQ=AS;AS=AK||100;AR={tid:AM+1,n:"threshold "+AM,scope:1,rtp:2,rtxt:"",fmt:{bc:AH[AM],bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:AJ,n:AO},cs:[{v:AK+"%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,ceil:AS,flr:AQ};AI.push(AR);}var AP={};AP[AJ]=AI;return AP;},psPt2CssPt:function(AJ,AI){var AH=parseInt(AJ,10)*0.75;if(AI instanceof Function){AH=AI(AH);}return AH+"pt";},captureEventOnce:function(AM,AL,AH,AK,AJ){function AI(AN){AL.call(AH,Z.newDomEvent(AM,window,AN||window.event),AJ);S.detachEvent(AK,AM,AI);}AJ=AJ||{};AK=AK||document;S.attachEvent(AK,AM,AI);},getPropertyByPath:function(AL,AK,AH){var AI,AJ;if(typeof AK!=="string"){return AH;}AI=AK.split(".");AJ=AI.every(function(AN){var AM=AL[AN];if(AM!==undefined){AL=AM;return true;}return false;});return AJ?AL:AH;},mergeHashes:function(){return Array.prototype.slice.apply(arguments).reduce(function(AH,AI){if(AI){Object.keys(AI).forEach(function(AJ){AH[AJ]=AI[AJ];});}return AH;},{});},toggleControlEnabled:function(AH,AI){[].concat(AH).forEach(function(AJ){AJ.set("enabled",!!AI);});},findInArray:function(AK,AJ,AI){var AM=-1,AL,AH;if(!Array.isArray(AK)){return AM;}for(AL=AI===undefined?0:AI,AH=AK.length;AL<AH;AL+=1){if(AJ(AK[AL])){return AL;}}return AM;},arrayUnique:function(AH,AI){if(!Array.isArray(AH)){return AH;}return AH.filter(function(AJ,AK){return n.findInArray(AH,function(AL){return AI(AJ,AL);},AK+1)===-1;});},range:function(AH,AL,AK){AK=AK||1;var AJ,AI=[];for(AJ=AH;AJ!==AL;AJ+=AK){AI.push(AJ);}return AI;},drawDashLine:function D(AP,AJ,AN,AI,AL,AH,AO){var AM=(AJ===AI),AK;AP.beginPath();AP.moveTo(AJ,AN);if(AM){AK=0;AN+=AH;while(AN<=AL){if(AK%2===0){AP.lineTo(AJ,AN);AN+=AO;}else{AP.moveTo(AJ,AN);AN+=AH;}AK++;}if(AK%2===0){AP.lineTo(AI,AL);}}else{AK=0;AJ+=AH;while(AJ<=AI){if(AK%2===0){AP.lineTo(AJ,AN);AJ+=AO;}else{AP.moveTo(AJ,AN);AJ+=AH;}AK++;}if(AK%2===0){AP.lineTo(AI,AL);}}AP.stroke();},repeat:function(AJ,AK){var AH=[],AI;AK=Math.max(0,AK);for(AI=0;AI<AK;AI+=1){AH[AI]=AJ;}return AH;},isHierarchyObject:function(AH){return(AH&&AH.t)===AA.DssTypeDimension;},selectPropertyPanel:function(AI,AJ){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AI.getDocModel().selectVIUnit(AI.parent.id,true);var AH=AI.edtModel;if(AH){AH.selectTargetByValue(AJ);}},pluck:function(AI,AH){if(!j.isArray(AI)){return AI;}return AI.map(function(AJ){return AJ&&AJ[AH];});},pick:function(AI,AH){return AH.reduce(function(AK,AJ){AK[AJ]=AI[AJ];return AK;},{});},isColorManuallySet:function(AJ,AI){var AH=AD(AJ,AI);if(AH){return AH.isManual;}},getCombColor:function(AJ,AI){var AH=AD(AJ,AI);if(AH){return AH.color;}},setColorPickerShowAutomatic:function(AI,AH){AI.children[0].fillColor.colorPicker.showAutomatic=AH;},getCharGroupValueChangeCb:function(AH){var AI=(function(){var AJ={};AJ[c.FONT_WEIGHT]=J.FS_BOLD;AJ[c.FONT_STYLE]=J.FS_ITALIC;AJ[c.UNDERLINE]=J.FS_UNDERLINE;AJ[c.LINE_THROUGH]=J.FS_STRIKETHROUGH;return function(AK,AL){return AK^AJ[AL];};}());return function(AK,AJ){if(AH instanceof Function){AH=AH();}if(!AH){return ;}switch(AK){case c.COLOR:AH.fontColor.fill.value.setValue(AJ);break;case c.FONT_SIZE:AH.fontSize.setValue(AJ);break;case c.FONT_FAMILY:AH.fontFamily.setValue(AJ);break;case c.FONT_WEIGHT:case c.FONT_STYLE:case c.UNDERLINE:case c.LINE_THROUGH:AH.fontStyle.setValue(AI(AH.fontStyle.getValue(),AK));break;}};},getMetricsInDropZone:C,addLegendFontChangeListeners:function(AI,AJ){var AH=["lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle"];AC(AH,AI,AJ);},addLegendBackgroundChangeListeners:function(AI,AJ){var AH=["lgdBgFillClr","lgdBgFillTrans"];AC(AH,AI,AJ);},isValidDropZone:function(AH){if(AH===undefined){return false;}var AJ=Object.keys(AH).filter(function(AK){return AK!=="visProp";});var AI=T.copyProps(AJ,AH);return AH&&!T.equals(AI,{});},getDrillCandidates:function(AM){var AJ=AM.modelData,AK=AM.model,AI=AK.docModel.datasets,AH=AJ.gts,AL=AJ.datasetId,AN=AI[AL],AO=AN.att||[];return AO.filter(function(AR){var AQ=AR.did,AS=AH.row||[],AP=AH.col||[];return AS.concat(AP).every(function(AT){return AT.id!==AQ&&AR.hide!==true;});});},getDrillMenuItemsCallback:function(AI,AJ,AH){return function(){var AL=n.getDrillCandidates(AI),AK=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});AL.forEach(function(AM){AK.addMenuItem(AM.n,"xt",AJ,T.copy(AH,{drillUnit:AM}));});return AK;};},doDrill:function(AJ,AX,AS,AY){var AZ=AJ;function AP(Ab){return Ab.model.controller.cmdMgr;}function AV(){return{success:function Ab(){n.visPrint("reaise");this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}var AI=AZ.model,AW=(AZ.getDocModel&&AZ.getDocModel())||AZ.model.docModel,AU=AW.getDataService(),AM=AU.newUpdate();var AO=true;if(AW.prefs&&AW.prefs.rtprnt){AO=parseInt(AW.prefs.rtprnt,10)===1;}else{if(AI.xtab.defn.tkp!==undefined){AO=parseInt(AI.xtab.defn.tkp,10)===-1;}}AY=AY||{};AY.keepParent=AO;var AN=AS.call(AJ,AX,AY);var AQ=AZ.zonesModel,Aa=AQ.getUpdateCallback(),AR=AZ.model.controller||AW.controller,AK=AR._getXtabCallback(AZ);AM.add(AN,R(Aa,AK));var AH=AI.getSelectorDataFromViewFilter(AZ.model.data.vfexpr).concat({keepOnly:true,data:AZ.getSelections()}),AT=AW.getKeepOnlyOrExcludeAction(AZ.k,AH);AM.add(AT,AV.call(AZ));AP(AZ).execute({execute:function AL(){this.submitUpdate(AM);},urInfo:{callback:AM.callback}});},strStartsWith:function(AJ,AI,AH){AH=AH||0;return AJ.lastIndexOf(AI,AH)===AH;},changeWidgetBackground:function(AJ,AK,AI){var AH=AJ.parent;if(AH&&AK!==AI){AH.changeUnitFormats(false,1,AJ.getFormats(),c.BACKGROUND_COLOR,AK,AI);AH.raiseEvent({name:"BEMFormatChange",propertyName:c.BACKGROUND_COLOR,value:AK,isTitle:false});}},translateGridError:function(AI,AH){if(AH===undefined){AH=e.AE_ERROR;}if(AH===e.EMPTY_DATA){AI=mstrmojo.desc(12093,"Filter excludes all data");}if(AH===e.NO_DATASET||AH===e.NO_TEMPLATE_UNIT){AI=mstrmojo.desc(11668,"Drag objects here.");}if(!AI){AI=mstrmojo.desc(13687,"Unknown error");}return{msg:AI,type:AH};},hasValidValueInMetric:function(AJ,AH){var AI=n.getPropertyByPath(AJ,"model.data.gsi.mx");if(AI===undefined||AI.length<=AH||AH<0){return false;}var AK=AI[AH];return["min","max"].every(function(AL){var AM=AK[AL];return AM!==undefined&&AM!==null&&AM!=="";});},renderWidgetErrorRSD:function(AK,AM,AI){var AO=document.createElement("div");var AN='<div style="display: table; height: 100%; width: 100%; background-color:#F5F5F2; border: solid 1px #A7A7A7; box-sizing: border-box;"><div style="display: table-cell; vertical-align: middle; text-align: center; color: #000000; font-size: 14pt;">'+AM+"</div></div>";AO.innerHTML=AN;AO=AO.firstChild;var AH=AK.width,AJ=AK.height;if(AH!==undefined){AO.style.width=AH+"px";}if(AJ!==undefined){AO.style.height=AJ+"px";}var AL=AK.domNode;if(AL){AI.forEach(function(AP){AL["on"+AP]=undefined;});while(AL.firstChild){AL.removeChild(AL.firstChild);}AL.appendChild(AO);}else{AK.parent.domNode.appendChild(AO);}},visPrint:function(){var AH=mstrmojo.VisUtility.enableInVis;if(AH&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},hasCGorCon:function(AK,AH){var AJ=AH&&AH.did,AI=AK.model.data.datasetId||"",AL=null;if(AJ){AL=p.getDatasetFromAttributeId(AK.model.docModel.datasets,AJ);}else{if(AI){AL=p.getDatasetFromId(AK.model.docModel.datasets,AI);}}return AL&&p.hasCGorCon(AL);},findElementsByAttribute:function l(AJ,AL,AK,AH){AH=!!AH;var AM=[];if(AK.constructor!==Array){AK=[AK];}var AN=function(AO){if(AH){return AO.identity&&AO.identity.tlOpt&&AO.identity.tlOpt[AL];}else{return AO.getAttribute(AL);}};function AI(AQ){var AO=AN(AQ),AP;if(AQ.hasChildNodes()){AP=AQ.firstChild;while(AP){if(AP.nodeType===1){AO=AN(AP);if(AK.indexOf(AO)!==-1){AM.push(AP);}else{AI(AP);}}AP=AP.nextSibling;}}}AI(AJ);return AM;}});mstrmojo.VisUtility.enableInVis=true;var n=mstrmojo.VisUtility;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Container","mstrmojo.util.color","mstrmojo.VisUtility");var O=mstrmojo.util.color,F=mstrmojo.hash;var C={DARK:{BASE_FILL_COLOR:"#20516b",HOVER_FILL_OPACITY:0.4,SELECTED_FILL_OPACITY:0.4,HOVER_SELECTED_FILL_OPACITY:0.65,BORDER_COLOR:"#34abeb",FONT_COLOR:"#34abeb"},LIGHT:{BASE_FILL_COLOR:"#bce8ff",HOVER_FILL_OPACITY:0.4,SELECTED_FILL_OPACITY:0.4,HOVER_SELECTED_FILL_OPACITY:0.65,BORDER_COLOR:"#34abeb",FONT_COLOR:"#007ebe"}};function H(Q,P){return{x:Q.x+P,y:Q.y+P,w:Math.max(Q.w-2*P,0),h:Math.max(Q.h-2*P,0)};}function N(P,S,U,Q){var T=Q/2,R={x:S.x+T,y:S.y+T,w:Math.max(S.w-Q,0),h:Math.max(S.h-Q,0)};P.save();P.strokeStyle=U;P.lineWidth=Q;P.strokeRect(R.x,R.y,R.w,R.h);P.restore();}function G(P){return"_"+P;}function D(R,Q,S){if(!R){return ;}var T=R.style;if(T[Q]===S){return ;}var P=G(Q);if(R[P]===undefined){R[P]=getComputedStyle(R)[Q];T[Q]=S;}}function J(S,R){if(!S){return ;}var P=G(R),Q=S[P];if(Q!==undefined){S.style[R]=Q;S[P]=undefined;}}function M(P,R){var Q=H(R,this.outerBorderWidth);N(P,R,this.outerBorderColor,this.outerBorderWidth);N(P,Q,this.innerBorderColor,this.innerBorderWidth);}function I(P,R){var Q=H(R,this.outerBorderWidth);P.save();P.fillStyle=O.getCSSColorString(this.backgroundColor,0.3);P.fillRect(Q.x,Q.y,Q.w,Q.h);P.restore();}function E(P,T,R,S,U){D(R,"color",S.FONT_COLOR);var Q=H(T,1);P.save();if(U){P.fillStyle=O.getCSSColorString(S.BASE_FILL_COLOR,S.HOVER_SELECTED_FILL_OPACITY);}else{P.fillStyle=O.getCSSColorString(S.BASE_FILL_COLOR,S.SELECTED_FILL_OPACITY);}P.fillRect(Q.x,Q.y,Q.w,Q.h);P.restore();N(P,T,S.BORDER_COLOR,1);}function B(R,P,Q){if(P&&!R){Q.selected();}else{if(!P&&R){Q.hover();}else{if(P&&R){Q.hoverSelected();}}}}function L(P,Q){return{hover:function(){I.call(this,P,Q);}.bind(this),selected:function(){M.call(this,P,Q);}.bind(this),hoverSelected:function(){M.call(this,P,Q);I.call(this,P,H(Q,1));}.bind(this)};}function A(U,V,R){var S=R.isEntityContainer,P=R.isSelected,T=R.isHovered,X=this.canvas.getContext("2d"),W=this.themeType==="dark"?C.DARK:C.LIGHT;var Q;if(S){Q={hover:function(){J(V,"color");var Y=H(U,1);X.save();X.fillStyle=O.getCSSColorString(W.BASE_FILL_COLOR,W.HOVER_FILL_OPACITY);X.fillRect(Y.x,Y.y,Y.w,Y.h);X.restore();},selected:function(){E(X,U,V,W,false);},hoverSelected:function(){E(X,U,V,W,true);}};}else{Q=L.call(this,X,U);}D(V&&V.parentNode,"zIndex",3);X.clearRect(U.x,U.y,U.w,U.h);B(T,P,Q);}function K(V,W,R){var S=R.isEntityContainer,P=R.isSelected,T=R.isHovered,X=this.canvas.getContext("2d");var U=this,Q;if(S){Q={hover:function(){J(W,"textDecoration");X.clearRect(V.x,V.y,V.w,V.h);I.call(U,X,V);},selected:function(){U.clear();D(W,"textDecoration","underline");},hoverSelected:function(){X.clearRect(V.x,V.y,V.w,V.h);I.call(U,X,V);D(W,"textDecoration","underline");}};}else{X.clearRect(V.x,V.y,V.w,V.h);Q=L.call(this,X,V);}D(W&&W.parentNode,"zIndex",3);B(T,P,Q);}mstrmojo.heatmap.vi.VisHeatMapHighlightCanvas=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.heatmap.vi.VisHeatMapHighlightCanvas",markupString:'<div id={@id}-HeatMapHighlightCanvas style="z-index: 2; position: absolute; left: {@left}px; top: {@top}px; width: {@width}px; height: {@height}px;"><canvas width={@width} height={@height}></canvas></div>',markupSlots:{canvas:function(){return this.domNode.firstChild;}},backgroundColor:"#ffffff",init:function(P){this.isOnSelectionMode=mstrmojo.emptyFn;this.alpha=0.4;this.themeType="dark";if(this._super){this._super(P);}if(this.themeType==="dark"){this.outerBorderColor="#ffffff";this.innerBorderColor="#000000";}else{this.outerBorderColor="#000000";this.innerBorderColor="#ffffff";}this.outerBorderWidth=2;this.innerBorderWidth=1;this.maskColor="#1f1f1f";},preBuildRendering:function(){var P=this.placeholder;this.width=P.offsetWidth;this.height=P.offsetHeight;if(this._super){this._super();}},hide:function(){this.domNode.style.display="none";},show:function(){this.domNode.style.display="block";},clear:function(Q){this.show();if(!Q){Q={x:0,y:0,w:this.width,h:this.height};}var P=this.canvas.getContext("2d");P.save();P.clearRect(Q.x,Q.y,Q.w,Q.h);if(this.isOnSelectionMode()){P.fillStyle=O.getCSSColorString(this.maskColor,this.alpha);P.fillRect(Q.x,Q.y,Q.w,Q.h);}P.restore();},resetCanvasRect:function(P){this.width=P.w;this.height=P.h;this.domNode.style.width=P.w+"px";this.domNode.style.height=P.h+"px";this.canvas.width=P.w;this.canvas.height=P.h;},highlight:function(U,T,S){S=F.copy(S,{isHovered:false,isSelected:false,isEntityContainer:false,isHeaderOnTop:false});var R=S.isHeaderOnTop,Q=S.isSelected,W=S.isHovered,V=this.isOnSelectionMode(),P=this.canvas.getContext("2d");this.show();if(!W&&!Q){J(T&&T.parentNode,"zIndex");J(T,"textDecoration");J(T,"color");P.clearRect(U.x,U.y,U.w,U.h);if(V){this.clear(U);}else{this.clear();}return ;}if(R){A.call(this,U,T,S);}else{K.call(this,U,T,S);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.VisUtility");var R=mstrmojo.css,A=mstrmojo.VisUtility,H=mstrmojo.array,D=mstrmojo.string,I="vis-tooltip",N=20,P=165,L=350,E=350,G="px";function Q(){var U=this.domNode;U.innerHTML="";var S=document.createElement("div");S.className=I+"-container";var V=document.createElement("table");V.className=I+"-table";for(var T=0;T<3;T++){V.appendChild(document.createElement("COL"));}S.appendChild(V);this.domNode.appendChild(S);return V;}function K(T){var S=[],U=false;H.forEach(T,function(V){if(!V.isSuper){S.push(V.v);}else{U=true;S.push("<sup>"+V.v+"</sup>");}});return{hasSuper:U,htmlText:S.join("")};}mstrmojo.VisTooltip=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.VisTooltip",init:function O(S){this._super(S);R.addWidgetCssClass(this,(S&&S.widgetClass)?[S.widgetClass,I]:I);},toggle:function M(S){var T=mstrApp.isAppStatePrintPreview&&mstrApp.isAppStatePrintPreview();if(this.domNode){this.domNode.style.display=S&&!T?"block":"none";}},displayInfo:function C(V,c,S){var U=this.domNode,d=Q.call(this),a=false,T=0,b=0,W=10,Z=false,Y=d.childNodes[0],X=d.childNodes[2];V.forEach(function(m){var s,l,u,p,e,k,q,o,w,n,t,r;if(!Z){var g=d.insertRow(-1),j=g.insertCell(-1),i=g.insertCell(-1),h=g.insertCell(-1);g.className=I+"-tr";j.className=I+"-name";i.className=I+"-space";h.className=I+"-value";if(m===null){R.addClass(g,"separator");a=true;}else{if(a){R.addClass(g,"below-separator");}if(!S){i.innerHTML=":";}s=m.n;r=!m.skipEncode;j.innerHTML=r?D.encodeHtmlString(s,true):s;u=A.getComputedFontStyle(j);p=Math.ceil(A.measureTextWidth(j.innerHTML,u,u.bonus));q=U.offsetHeight>=E?1:2;if(p>P){o=A.truncateTextToLineWithWordWrap(s,u,P,q,true);if(o.canWordWrap){j.innerHTML=r?D.encodeHtmlString(o.text,true):o.text;}else{o=A.truncateTextToLineWithWordWrap(s,u,P,1);j.innerHTML=r?D.encodeHtmlString(o,true):o;}}T=Math.min(Math.max(T,p),P);l=m.v;n=m.isTrendLineFuncToken;if(n){w=K(l);}if(!n||!w.hasSuper){if(n){l=w.htmlText;}h.innerHTML=r?D.encodeHtmlString(l,true):l;e=A.getComputedFontStyle(h);k=Math.ceil(A.measureTextWidth(h.innerHTML,e,e.bonus,null,true));if(k>P){o=A.truncateTextToLineWithWordWrap(l,e,P,m.noTruncate?100:q,true);if(!o.canWordWrap){o=A.truncateTextToLineWithWordWrap(l,e,P,1,true);}h.innerHTML=r?D.encodeHtmlString(o.text,true):o.text;k=o.maxLineLen;}b=Math.min(Math.max(b,k),P);}else{h.innerHTML=w.htmlText;e=A.getComputedFontStyle(h);k=0;H.forEach(l,function(x){x.textWidth=A.measureSuperTextWidth(x.isSuper,x.v,e,e.bonus);k+=x.textWidth;});k=Math.ceil(k);if(k>P){o=A.truncateTextToLineWithWordWrapForTokens(l,e,P,m.noTruncate?100:q,true,true);if(!o.canWordWrap){o=A.truncateTextToLineWithWordWrapForTokens(l,e,P,1,true);}h.innerHTML=K(o.text).htmlText;k=o.maxLineLen;}b=Math.min(Math.max(b,k),P);}Y.style.width=T+"px";X.style.width=b+"px";t=T+b+W;d.style.width=mstrmojo.dom.isIE9?(t+2)+"px":t+"px";a=false;}if(U.offsetHeight>=E){var f=d.lastChild;f&&f.removeChild(f.lastChild);Z=true;}}});if(c){this.moveTo(c.x,c.y);}},moveTo:function(a,Z){var Y=mstrmojo.dom.position(document.body),W=this.domNode,b=W.offsetWidth,X=W.offsetHeight,V=Y.x+Y.w,c=Y.y+Y.h,T=a+N,S=Z+N;if(T>V-b||S>c-X){if(T<=V-b){S=c-X;}else{if(S<=c-X){T=V-b;}else{T=V-b;S=Z-N-X;}}}var U=W.style;U.left=T+G;U.top=S+G;},doLayout:function B(S){var U=this.domNode.getElementsByTagName("table")[0];if(!U){return ;}var V=R.getComputedStyle(this.domNode),T=S-parseInt(V.paddingLeft,10)-parseInt(V.paddingRight,10);T-=U.rows[0].cells[0].offsetWidth;T-=10;U.getElementsByClassName(I+"-value").forEach(function(W){W.style.maxWidth=T+G;});},posTo:function J(T){var S=this.domNode.style;S.left=T.x+G;S.top=T.y+G;},renderErrMsg:function F(S){Q.call(this).insertRow(-1).insertCell(-1).innerText=S;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.heatmap.vi.VisHeatMapColorTheme","mstrmojo.dom","mstrmojo.hash","mstrmojo.css","mstrmojo.VisUtility","mstrmojo.util.color");var E=mstrmojo.util.color,G=mstrmojo.VisUtility,C=mstrmojo.hash;var H={ON:0,OFF:1,PROPORTIONAL:2};var J={LABEL_CTNR_THRES:6,LABEL_CTNR_WIDTH_THRES:32,LGD_GUTTER:5,LABEL_PADDING:5};var L=0.5;function F(R,V){var P=[R];while(P.length!==0){var U=P.shift();if(U===undefined||U.deleted){continue;}V(U);var T=U.entityChildren;if(T!==undefined){var Q=T.length,S;for(S=0;S<Q;S++){P.push(T[S]);}}}}function D(R,U,S){if(R.deleted){return ;}if(S===undefined){U(R);}else{U(R,S);}if(R.entityChildren===undefined){return ;}var P=R.entityChildren,Q=P.length,T;for(T=0;T<Q;T++){var V=P[T];if(S===undefined){D(V,U);}else{var W=S;if(!W){W=T.toString();}else{W=W+":"+T;}D(V,U,W);}}}function K(T,S){var R=parseFloat(T),P=R.toString().length,Q=T.substring(P);return R*S+Q;}function O(P,S,Q){var R;if(Q){if(P===0){R="heatmap-level-1-header-on-top";}else{if(P===1){R="heatmap-level-2-header-on-top";}else{R="heatmap-level-3-header-on-top";}}}else{if(S===1){if(P===0){R="heatmap-one-level-1";}}else{if(S===2){if(P===0){R="heatmap-multi-level-1";}else{if(P===1){R="heatmap-two-level-2";}}}else{if(S>=3){if(P===0){R="heatmap-multi-level-1";}else{if(P===1){R="heatmap-multi-level-2";}else{if(P===2){R="heatmap-multi-level-3";}}}}}}}return R;}function B(P,Q){if(!P||!Q){return false;}return !(Q.x>=P.x+P.w||Q.y>=P.y+P.h||Q.x+Q.w<=P.x||Q.y+Q.h<=P.y);}function A(S,Q){var P=Math.max(S.x,Q.x);var U=Math.max(S.y,Q.y);var R=Math.min(S.x+S.w,Q.x+Q.w)-P;var T=Math.min(S.y+S.h,Q.y+Q.h)-U;if(R<0||T<0){return{x:NaN,y:NaN,w:NaN,h:NaN};}return{x:P,y:U,w:R,h:T};}function N(P){var Q=this.domSpan;Object.keys(P||[]).forEach(function(S){if(S!=="scale"&&S!=="family"){Q.className=S;var T=P[S];if(T){Q.style.fontFamily=P.family;Q.style.fontSize=K(T,P.scale);}var R=document.defaultView.getComputedStyle(Q);P[S]={fontSize:parseInt(R.fontSize,10),fontWeight:R.fontWeight};}});}function I(Q){var P=this.bgColor,R={value:P!==undefined?P:"#ffffff",opacity:1};return E.mix(Q,R);}function M(T){var X=T.e,V=T.css,Z=T.s,P=document.createElement("div"),U=this.getLabelColor(X,Z),Q=P.style;P.className=V+" heatmap-trun-text";Q.position="absolute";Q.width=Z.w+"px";Q.height=(Z.h+0.5)+"px";Q.lineHeight=T.lh+"px";Q.zIndex=1;Q.color=U;if(T.fontSize){Q.fontSize=T.fontSize;}if(T.fontFamily){Q.fontFamily=T.fontFamily;}if(T.fontWeight){Q.fontWeight=T.fontWeight;}P.innerHTML="<span>#label</span>".replace("#label",X.text);P.firstChild.setAttribute("idx",X.idx);X.labelDomNode=P;var R=document.createElement("div"),W=R.style;W.position="absolute";W.left=Z.x+"px";W.top=Z.y+"px";W.width=Z.w+"px";W.height=Z.h+"px";R.appendChild(P);var Y=document.createElement("div");Y.className="heatmap-label-square";var S=4;Y.style.width=S+"px";Y.style.height=S+"px";Y.style.top=(T.lh-S)+"px";R.appendChild(Y);return R;}mstrmojo.heatmap.vi.VisHeatMapCanvas=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.heatmap.vi.VisHeatMapCanvas",parent:null,root:null,colorTheme:null,attributes:[],scale:1,labelSetting:0,showMetric:false,bgColor:"#333333",numImages:0,offsetX:0,offsetY:0,markupString:'<div style="position:absolute; width:{@width}px; height:{@height}px"><canvas width={@width} height={@height} style="visibility: hidden; z-index:0"></canvas><span></span></div>',markupSlots:{domCanvas:function(){return this.domNode.firstChild;},domSpan:function(){return this.domNode.childNodes[1];},domImage:function(){return this.domNode.childNodes[2];}},init:function(P){if(this._super){this._super(P);}this.canvasStepX=this.scale*this.width;this.canvasStepY=this.scale*this.height;},postBuildRendering:function(){if(!this.isFontHeightMeasured){this.measureFontHeight();}this.draw();this._super();},removeImageAndLabels:function(){var R=this.domNode,T=R.childNodes,S=T.length,P;for(P=S-1;P>1;P--){var Q=T[P];R.removeChild(Q);}this.numImages=0;},removeLabels:function(){var S=this.domNode,U=S.childNodes,T=U.length,Q=1+this.numImages,P;for(P=T-1;P>Q;P--){var R=U[P];S.removeChild(R);}},updateOffsets:function(P,Q){this.offsetX=P;this.offsetY=Q;this.removeLabels();this.drawLabels();},draw:function(P,Q){if(P!==undefined){this.offsetX=P;}if(Q!==undefined){this.offsetY=Q;}this.removeImageAndLabels();this.drawRects();this.drawLabels();},drawRects:function(){var X=this.width,f=this.height,c=this.scale,Q=Math.ceil(X*c),Z=Math.ceil(f*c),Y=this.domCanvas,g=this.domNode,P=document.createDocumentFragment(),W=this.canvasStepX,V=this.canvasStepY,T=Math.ceil(Z/V),R=Math.ceil(Q/W),U=0,e,d,b,a;var S=function(p,t){var r,j,k,o,n,w,u;if(!p.deleted){if(p.entityChildren===undefined){r=p.size;j=p.color;}else{if(p.headerSize){r=p.headerSize;j=p.headerColor;}}if(B(a,r)){var i=Math.max(r.x-a.x,0),s=Math.max(r.y-a.y,0),h=Math.min(r.x+r.w-a.x,a.w),q=Math.min(r.y+r.h-a.y,a.h);k=j.value;if(E.isGradientColor(k)&&k.or===1){o=i;n=s;w=h;u=s;}else{o=i;n=s;w=i;u=q;}b.fillStyle=E.createCanvasFillPattern(j,b,o,n,w,u);b.fillRect(i,s,h-i,q-s);}}p.idx=t;};for(e=0;e<T;e++){for(d=0;d<R;d++){a={x:d*W,y:e*V,w:W,h:V};if(e+1===T){a.h=Z-a.y;}if(d+1===R){a.w=Q-a.x;}Y.width=a.w;Y.height=a.h;b=Y.getContext("2d");b.fillStyle="rgba(0, 0, 0, 0)";b.fillRect(0,0,a.w,a.h);D(this.root,S,"");var m=Y.toDataURL();var l=document.createElement("img");l.src=m;l.style.position="absolute";l.style.left=a.x+"px";l.style.top=a.y+"px";l.draggable=false;l.setAttribute("orgx",a.x);l.setAttribute("orgy",a.y);P.appendChild(l);U++;}}Y.width=0;Y.height=0;g.style.width=Q+"px";g.style.height=Z+"px";g.appendChild(P);this.numImages=U;},drawLabels:function(){var P=this.attributes.length,X=this,S=J.LGD_GUTTER*2,b=2*J.LABEL_PADDING,Z={x:this.offsetX,y:this.offsetY,w:this.width,h:this.height},a=[],W=[{},{},{}];var R=Math.floor(Math.log(this.scale)/Math.log(2));R=Math.min(R,P-3);R=Math.max(R,0);this._ext=R;var Q=this.labelSetting===H.OFF;var c="\u2026";function V(m,k,h,l){var f=9,j=8,i=false,g=X.getTextSize(m,k,f,h,false,l.w);while(j>=1){if(g.h<l.h){f+=j;}else{if(f===9){break;}if(f>=l.w){break;}if(!i){j/=2;}i=true;f-=j;}g=X.getTextSize(m,k,f,h,false,l.w);if(i){j=j>>1;}}if(g.h>l.h&&f>9){f--;}if(f>l.w){f=l.w;}return{fontSize:f,loc:l};}function d(m,q,o,p,x,r){var t=q&&(q.w-b),k=q&&(q.h-b);var g={drop:true};var j,i,s,u,f;if(X.labelSetting===H.PROPORTIONAL){var l=mstrmojo.hash.copy(q);l.w=t;l.h=k;var n=V(o,p,r,l);s=n.fontSize;l=n.loc;m.fs=s;m.lh=s;u=X.getTextSize(o,p,s,r,false,t);if(u.h>l.h){return g;}j=u.w;i=u.h;x=s;}else{s=x;u=X.getTextSize(o,p,s,r,false,t,true);f=X.getTextSize(c,p,s,r,false).scrollWidth;i=u.h;j=u.w;m.lh=s;if(u.scrollWidth/2+f+L>t){return g;}if(i>k){return g;}}m.isLowestLevel=true;return{w:j,h:i,fontSize:x};}function Y(j,n,q,o,p,x,r){var s=q&&q.w,m=q&&q.h,u=!X.isHeaderOnTop,t={drop:true};if(u&&P>1&&j===0){s-=S;m-=S;}var g,k,l,i;if(X.showMetric){g=X.getTextSize(o,p,x,r,false);}else{if(!a[j]){a[j]={};}var f=a[j];g=f[o];if(!g){g=X.getTextSize(o,p,x,r,false,s,true);f[o]=g;}}k=g.h;l=Math.min(g.w,s);if(u){i=0;}else{i=X.getTextSize(c,p,x,r,false).scrollWidth;}if(g.scrollWidth/2+i+L>s){return t;}if(k>m){return t;}n.lh=k;return{w:l,h:k,fontSize:x};}function e(f,o,m,i,k){var j=i.w;var g=i.h;var p=i.fontSize;var n=m.x+((m.w-j)/2);var l=m.y+((m.h-g)/2);k.s={x:n,y:l,w:j,h:g};if(W[f]===undefined){W[f]={};}var h=X.getFontGroup(X.fonts,f);if(h){k.fontFamily=h.family;}k.fontSize=p+"px";W[f][o]=k;}function T(g){if(g===X.root||g.deleted||(Q&&!g.entityChildren)){return true;}var f=(X.isHeaderOnTop&&g.entityChildren)?g.headerSize:g.size;if(!B(Z,f)){return true;}if(f.w<J.LABEL_CTNR_WIDTH_THRES+2*J.LABEL_PADDING||f.h<J.LABEL_CTNR_THRES){return true;}if(!X.isHeaderOnTop){var h=g.level-R;if(h<0||h>=3){return true;}}return false;}function U(l){if(T(l)){return ;}var p,f;if(X.isHeaderOnTop){p=l.entityChildren?l.headerSize:l.size;f=l.level;}else{p=l.size;f=l.level-R;}var i,n=l.text,q=l.idx,j=O(f,P,X.isHeaderOnTop),g=X.getFontGroup(X.measuredFonts,l.level),m=g.family,h=g[j],r=h.fontSize,o=h.fontWeight,k={s:{},e:l,m:0,css:j};if(!l.entityChildren){i=d(k,p,n,m,r,o);}else{i=Y(f,k,p,n,m,r,o);}if(i.drop){return ;}e(f,q,p,i,k);}F(this.root,U);if(this.isHeaderOnTop){this.layoutLabelsOnTop(W);}else{this.layoutLabelsOnMiddle(W);}},layoutLabelsOnTop:function(S){var V=document.createDocumentFragment(),U=S.length,R,T=this;for(R=0;R<U;R++){var W=S[R],Y;for(Y in W){var Q=W[Y],X=M.call(this,Q),P=X.firstChild.style;if(Q.isLowestLevel||T.isHeaderColorsModified()){P.color=T.getLabelColor(Q.e);}if(Q.isLowestLevel&&T.labelSetting===H.PROPORTIONAL){P.wordBreak="break-all";}else{P.textOverflow="ellipsis";P.wordBreak="normal";}V.appendChild(X);}}this.domNode.appendChild(V);},layoutLabelsOnMiddle:function(n){var q=document,R=q.createDocumentFragment(),g=this;function a(t){var r=M.call(g,t);var s=r.firstChild.style;if(t.isLowestLevel&&g.labelSetting===H.PROPORTIONAL){s.wordBreak="break-all";}else{s.wordBreak="normal";}R.appendChild(r);}var l=n[0],k=n[1],j=n[2],d,e;for(d in k){var m=k[d],Q=m.s,f=m.e,W=f.parentEntity,p=l[W.idx];if(p===undefined){a(m);}if(!!p){var U=p.s,X=A(Q,U);if(X.w>5||X.h>5){var o;if(U.y<=Q.y){o=((U.y+U.h-Q.y)>>1)+1;if(p.m!==2&&(U.y-o>=W.size.y)&&(Q.y+Q.h+o<=f.size.y+f.size.h)){U.y-=o;Q.y+=o;p.m=1;}else{e=true;}}else{o=((Q.y+Q.h-U.y)>>1)+1;if(p.m!==1&&(U.y+U.h+o<=W.size.y+W.size.h)&&(Q.y-o>=f.size.y)){U.y+=o;Q.y-=o;p.m=2;}else{e=true;}}}if(e!==true){a(m);}}}for(d in l){a(l[d]);}for(d in j){e=false;var Y=j[d],P=Y.e,S=P.parentEntity,T=S.parentEntity,h=S.idx,i=T.idx,Z=k[h],b=l[i];if(Z!==undefined){var c=A(Z.s,Y.s);if(!isNaN(c.w)){e=true;}}if(e===false&&b!==undefined){var V=A(b.s,Y.s);if(!isNaN(V.w)){e=true;}}if(e!==true){a(Y);}}this.domNode.appendChild(R);},getLabelColor:function(h,Z,W){var j,R=this.colorTheme,Y=I.bind(this),f,c,P,S;if(W){S=function(e){return W(Y(e));};}else{S=Y;}if(this.isHeaderOnTop){if(!h.entityChildren){f=h.color;}else{f=h.headerColor;}f=S(f);c=E.getColorValue(f.value);j=E.getCSSColorString(R.getContrastColor(c));}else{P=h.level-this._ext;if(P===0){return"#FFFFFF";}if(h.entityChildren===undefined){f=S(h.color);c=E.getColorValue(f.value);return E.getCSSColorString(R.getContrastColor(c));}var U=[h],V=0,a=0;while(U.length!==0){var d=U.shift(),X=d.entityChildren,b=d.entityChildren.length,g;for(g=0;g<b;g++){var T=X[g];if(T.deleted){continue;}var Q=A(Z,T.size);if(T.entityChildren===undefined){if(!isNaN(Q.w)){f=S(T.color);c=E.getColorValue(f.value);if(R.isBrightColor(c)){V+=Q.w*Q.h;}else{a+=Q.w*Q.h;}}}else{if(!isNaN(Q.w)){U.push(T);}}}}if(V>a){j="#000000";}else{if(P===1){j="#e6e7e8";}else{j="#d1d3d4";}}}return j;},getEntity:function(U){var Q=U.x,P=U.y,S;var R=function(a){if(a.deleted){return ;}var Y;if(a.entityChildren===undefined){Y=a.size;}else{if(a.entityChildren&&a.headerSize!==undefined){Y=a.headerSize;}}if(Y){var W=Y.x,Z=Y.y,V=W+Y.w,X=Z+Y.h;if(Q>=W&&Q<=V&&P>=Z&&P<=X){S=a;}}};var T=function(X,Z){if(X.deleted){return ;}Z(X);var V=X.entityChildren;if(V!==undefined){var W=V.length,Y;for(Y=0;Y<W;Y++){var a=V[Y];T(a,Z);if(S!==undefined){return ;}}}};T(this.root,R);return S;},getFontGroup:function(R,Q){if(!this.isHeaderOnTop){return R.headerOnMiddle;}var P=this.attributes.length;return P===Q+1?R.headerOnTop.cell:R.headerOnTop.header;},clearFontCache:function(){this.isFontHeightMeasured=false;},measureFontHeight:function(){this.measuredFonts=C.clone(this.fonts);var P=this.measuredFonts;N.call(this,P.headerOnMiddle);N.call(this,P.headerOnTop.header);N.call(this,P.headerOnTop.cell);this.isFontHeightMeasured=true;},getTextSize:function(Y,Q,c,Z,P,R,T){function S(g){var i=this.domSpan,d,f,e;i.className="";i.innerHTML=Y;i.style.cssText="position:absolute; visibility:hidden; z-index:-1; font-family:"+Q+"; font-size:"+c+"px; font-weight:"+Z+"; font-style:"+(P?"italic":"normal")+"; line-height:"+c+"px;";if(!g){d=i.offsetWidth;f=i.offsetHeight;}if(g||(R!==undefined&&d>R)){i.style.cssText+="overflow:hidden; word-break:"+X+"; width:"+R+"px;";f=i.offsetHeight;d=i.offsetWidth;if(g){e=i.scrollWidth;}}return{w:d,h:f,scrollWidth:g?e:d};}var a,U,b,W,V;var X="break-all";if(T){X="normal";}if(typeof c==="number"){W=c+"px";}Z=Z||"normal";if(this.showMetric){b=S.call(this);}else{V={fontFamily:Q,fontSize:W,fontWeight:Z,fontStyle:P?"italic":"normal"};a=Math.ceil(G.measureTextWidth(Y.trim(),V));U=c;if(R!==undefined&&a>R){b=S.call(this,true);}else{b={w:a,h:U,scrollWidth:a};}}b.w+=L;return b;}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumFontStyle");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","DSSDateTime","ScalePlate");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumDSSGraphObject");var g=mstrmojo.chart,c=g.model,o=mstrmojo.VisUtility,Q=g.enums,E=Q.EnumFontStyle,S=c.enums,y=S.EnumDSSGraphProperty,X=S.EnumDSSGraphDataTextShowType,z=S.EnumDSSGraphObject;var F=mstrmojo.gm.EnumDataLabels;var V=[["xAxLbFntClr","yAxLbFntClr","dlFntClr","lgdFntClr"],["xAxLbFntFml","yAxLbFntFml","dlFntFml","lgdFntFml"],["xAxLbFntSz","yAxLbFntSz","dlFntSz","lgdFntSz"],["xAxLbFntStyle","yAxLbFntStyle","dlFntStyle","lgdFntFml"]];var p=[["majorGridLnThk","minerGridLnThk","majorGridLnThk","minerGridLnThk"],["majorGridLnClr","minerGridLnClr","majorGridLnClr","minerGridLnClr"],["majorGridLnStyle","minerGridLnStyle","majorGridLnStyle","minerGridLnStyle"]];var Y=[["bgFillClr"],["bgFillStyle"],["bgFillTrans"]];function U(AI){switch(AI){case y.DssGraphFontColor:return 0;case y.DssGraphFontName:return 1;case y.DssGraphFontSize:return 2;case y.DssGraphFontStyle:return 3;case y.DssGraphFontSize100:return 4;default:return -1;}}function t(AI){switch(AI){case y.DssGraphAreaColor:return 0;case y.DssGraphFillEffect:return 1;case y.DssGraphAreaAlpha:return 2;}return -1;}function w(AI){var AJ;switch(AI){case z.DssGraphX1Body:case z.DssGraphX1Label:case z.DssGraphX1Major:case z.DssGraphX1Minor:case z.DssGraphUserLabel3:case z.DssGraphUserLine3:AJ="X1";break;case z.DssGraphX2Body:case z.DssGraphX2Label:case z.DssGraphX2Major:case z.DssGraphX2Minor:case z.DssGraphUserLabel4:case z.DssGraphUserLine4:AJ="X2";break;case z.DssGraphY1Body:case z.DssGraphY1Label:case z.DssGraphY1Major:case z.DssGraphY1Minor:case z.DssGraphUserLabel1:case z.DssGraphUserLine1:AJ="Y1";break;case z.DssGraphY2Body:case z.DssGraphY2Label:case z.DssGraphY2Major:case z.DssGraphY2Minor:case z.DssGraphUserLabel2:case z.DssGraphUserLine2:AJ="Y2";break;case z.DssGraphZBody:AJ="Z";break;case z.DssGraphO1Body:case z.DssGraph2DO1Label:case z.DssGraphO1Major:case z.DssGraphO1Minor:AJ="O1";break;case z.DssGraphO2Body:case z.DssGraph2DO2Label:case z.DssGraphO2Major:case z.DssGraphO2Minor:AJ="O2";break;default:AJ="No_Axis";break;}return AJ;}function d(AI,AJ){if(!!AI===false){return undefined;}return undefined;}function W(AN,AI){if(!!AN===false){return undefined;}var AS,AQ,AP=AI.isVertical!==undefined?AI.isVertical:true,AK=AI.isGridChart||false,AT=AI.isPieShape||false,AO={Name:0,Value:0},AL=AN.gaid,AM=AN.goid,AJ=AN.gsid,AR=AN.v;if(!!AL===false){return undefined;}switch(AL){case y.DssGraphShowLBLFeeler:if(AT){AO.Name="DataLabel";if((AR&X.DssGraphDataTextValue)!==0){AO.Value=F.SHOW_VALUE_ONLY;}else{if((AR&X.DssGraphDataTextLabel)!==0){AO.Value=F.SHOW_TEXT_ONLY;}else{AO.Value=F.HIDE;}}}break;case y.DssGraphAreaColor:case y.DssGraphFillEffect:case y.DssGraphAreaAlpha:AQ=t.call(this,AL);if(AQ<0){return undefined;}if(AM===z.DssGraphBackground){AO.Name=Y[AQ][0];if(AO.Name.search("Trans")!==-1){AO.Value=AR/255*100;}else{AO.Value=AR;}}break;case y.DssGraphShowLegendText:AO.Name="LegendVisibleness";AO.Value=AR===0?false:true;break;case y.DssGraphSDShowDataText:AO.Name="ShowSeriesDataLabel";AO.Value=AR!==0;break;case y.DssGraphShowDataText:if(AT===false){AO.Name="DataLabel";AO.Value=F.HIDE;if(AR&X.DssGraphDataTextValue){AO.Value=F.SHOW_VALUE_ONLY;}else{if(AR&X.DssGraphDataTextLabel){AO.Value=F.SHOW_TEXT_ONLY;}}}break;case y.DssGraphFontColor:case y.DssGraphFontName:case y.DssGraphFontSize100:case y.DssGraphFontSize:case y.DssGraphFontStyle:AO.Value=AR;AS=w.call(this,AM);AQ=U.call(this,AL);if(AQ<0){return undefined;}if(AQ===4){AQ=3;AO.Value/=100;}if(AS==="No_Axis"){if(AM===z.DssGraphDataText){if(AT){return undefined;}AO.Name=V[AQ][2];}else{if(AM===z.DssGraphPieFeelerLabel||AM===z.DssGraphPieFeelerLabel){if(AT===false){return undefined;}AO.Name=V[AQ][2];}else{if(AM===z.DssGraphLegendText){AO.Name=V[AQ][3];}else{return undefined;}}}}else{if(AS[0]==="X"){AO.Name=V[AQ][0];}else{if(AS[0]==="Y"){AO.Name=V[AQ][1];}else{if(AS[0]==="O"){AO.Name=AP?V[AQ][0]:V[AQ][1];}else{return undefined;}}}}break;}return AO;}var T,i=String.fromCharCode,AC=mstrmojo.locales.datetime,AH=0,L=document.getElementById("measureText"),B={},h={};var m=0.03,K=0,R=0,H=0.2;function n(AJ){var AI,AK=[],AL;for(AI=0;AI<=AJ;AI++){AL=AI.toString(16);if(AL.length===1){AL="0"+AL;}AK[AI]=AL;}T=AK;return AK;}function AF(AI){var AJ=parseFloat(AI);if(isNaN(AJ)===false&&AJ!==undefined&&AJ!==null){return AJ;}return 0;}function D(AI){AI=AI.replace(/ddd/g,"EEE");AI=AI.replace(/AM\/PM/g,"a");AI=AI.replace(/tt/g,"a");AI=AI.replace(/:'/g,":");AI=AI.replace(/'\/'/g,"/");AI=AI.replace(/\\/g,"");var AJ,AL=true,AK=AI.length;for(AJ=0;AJ<AK;AJ++){if(AI[AJ]==="h"||AI[AJ]==="H"||AI[AJ]===":"){AL=true;}else{if(AI[AJ]===" "&&AL){AL=true;}}if(AI[AJ]==="m"&&AL){AI=AI.substring(0,AJ)+"M"+AI.substring(AJ+1);}}return AI;}mstrmojo.chart.common.Utility=mstrmojo.provide("mstrmojo.chart.common.Utility",{point2D:{},rect2D:{},tripleId:{create:function M(AJ,AN,AL,AK,AM){if(AJ===null||AJ===undefined){AJ=-3;}if(AN===null||AN===undefined){AN=-3;}if(AL===null||AL===undefined){AL=-3;}var AI={mObjectId:AJ,mSeriesId:AN,mGroupId:AL};if(AK!==undefined&&AK!==null){AI.angleByIndex=AK;}if(AM!==undefined&&AM!==null){AI.sliceById=AM;}return AI;},walks:function k(AM,AK){if(!!AM===false||!!AK===false){return null;}if(AM.length===1){return AK[AM[0]];}var AL=(AM&&AM.length)||0,AJ,AI=AM[AJ];for(AJ=0;AJ<AL;AJ++){if(AK[AI]===undefined){AK[AI]={};}AK=AK[AI];}return AK;},equal:function a(AI,AJ){return(AI.mObjectId===AJ.mObjectId&&AI.mSeriesId===AJ.mSeriesId&&AI.mGroupId===AJ.mGroupId);},reset:function q(AK,AM,AL,AJ,AI,AN){AK.mObjectId=AM!==undefined?AM:-3;AK.mSeriesId=AL!==undefined?AL:-3;AK.mGroupId=AJ!==undefined?AJ:-3;if(AI!==undefined&&AI!==null){AK.angleByIndex=AI;}if(AN!==undefined&&AN!==null){AK.sliceById=AN;}return AK;}},transformProperty:function A(AI,AK,AJ){if(AK===0){return W.call(this,AI,AJ);}return d.call(this,AI,AJ);},abbreviateNumber:function b(AS,AI){var AT,AJ,AU="",AL=(AS<0),AV=(this.isIntegar(AS)===false);if(AV){AI++;}if(AS<0){AI++;}var AO=AL?-AS:AS;var AP=0;if(AO>=1e+27){AO=999;AU="Y";}else{if(AO>=1e+24){AO/=1e+24;AU="Y";}else{if(AO>=1e+21){AO/=1e+21;AU="Z";}else{if(AO>=1000000000000000000){AO/=1000000000000000000;AU="E";}else{if(AO>=1000000000000000){AO/=1000000000000000;AU="P";}else{if(AO>=1000000000000){AO/=1000000000000;AU="T";}else{if(AO>=1000000000){AO/=1000000000;AU="B";}else{if(AO>=1000000){AO/=1000000;AU="M";}else{if(AO>=1000){AO/=1000;AU="K";}else{if(AO>=1){AP++;}else{if(AO>=0.001){AP++;}else{if(AO>=0.000001){AP++;}else{if(AO>=1e-9){AP++;}else{if(AO>=1e-12){AP++;}else{AL=false;}}}}}}}}}}}}}}if(this.isIntegar(AO)===false){AT=AO.toString();var AK=5,AN=2,AW;AJ=AT.indexOf(".");AW=AT.length-AJ-1;if(AW>AK||(AW>AN&&AW>AJ)){if(AW>AK&&AI-AW<0){AN=Math.max(AN,Math.min(AN,AI-AW));}else{AN=Math.max(1,Math.min(AN,AI-AW));}AO=AO.toFixed(AN);}}AT=AO.toString();if(this.isIntegar(AO)===false){var AR=AT.length-1;AJ=AT.indexOf(".");if(AJ!==-1){if(AJ>=AR){AT=AT.substring(0,AJ);}else{var AQ,AM=true;for(AQ=AR;AQ>AJ&&AM;--AQ){if(AT[AQ]!=="0"){AM=false;}}if(AM){AT=AT.substring(0,AJ);}}}}if(AL){AT="-"+AT;}AT+=AU;return AT;},getScalePlate:function AE(AI){AI=AI||false;this.mScalePlate=mstrmojo.chart.common.ScalePlate;if(AI){this.mScalePlate.clear();}return this.mScalePlate;},prepareScalePlateOptions:function AB(AK,AJ,AL){var AI={mUseLogarithmicScale:AK,mAlwaysIncludeZero:!AK&&(AJ||!!(AL&1)||!!(AL&2)),mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mUseCustomMinMax:false};return AI;},evaluateTextMargin:function P(AI){this.mTextMargins=this.mTextMargins||{};var AJ=this.mTextMargins;if(AJ[AI]){return AJ[AI];}var AK=[];AK[0]=Math.floor(AI*m+0.5);AK[1]=Math.floor(AI*K+0.5);AK[2]=Math.max(Math.floor(AI*R+0.5),1);AJ[AI]=AK;return AK;},AlmostZero:function x(AI){return(Math.abs(AI)<0.000001);},isValidNumber:function J(AI){if(typeof AI==="number"){if(AI===0){return true;}return !!AI;}return false;},isIntegar:function j(AI){return AI===+AI&&AI===(AI|0);},HasArrayIntersection:function O(AJ,AI){var AK;for(AK=0;AK<AJ.length;AK++){if(AI.indexOf(AJ[AK])!==-1){return true;}}return false;},EscapeString:function C(AI){var AK='"',AJ='\\"',AL=new RegExp(AK,"g");return String(AI).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"\\\\").replace(AL,AJ).replace(/\r\n/g,"<br/>").replace(/\r/g,"<br/>").replace(/\n/g,"<br/>");},EscapeStringForJSON:function N(AI){var AK='"',AJ='\\"',AL=new RegExp(AK,"g");return String(AI).replace(/\\/g,"\\\\").replace(AL,AJ).replace(/\r/g,"\\r").replace(/\n/g,"\\n");},TrimLastComma:function AD(AJ){var AI;if(!AJ.buf||AJ.len===-1){return ;}AI=AJ.len;var AK=String(AJ.buf[AI]);if(AK&&AK[AK.length-1]===","){AJ.buf[AI]=AK.slice(0,-1);}},decodeUTF8:function f(AI){var AJ="",AL=0,AN=0,AM=0,AK=0;while(AL<AI.length){AN=AI.charCodeAt(AL);if(AN<128){AJ+=i(AN);AL++;}else{if((AN>191)&&(AN<224)){AM=AI.charCodeAt(AL+1);AJ+=i(((AN&31)<<6)|(AM&63));AL+=2;}else{AM=AI.charCodeAt(AL+1);AK=AI.charCodeAt(AL+2);AJ+=i(((AN&15)<<12)|((AM&63)<<6)|(AK&63));AL+=3;}}}return AJ;},formatDateTimeValue:function e(AJ,AO){var AM=new mstrmojo.chart.common.DSSDateTime({ifTime:AO});var AI="";var AL="";var AP=0;while(AP<AJ.length){var AK=1;switch(AJ.charAt(AP)){case"[":AP++;while(AP<AJ.length&&AJ.charAt(AP)!=="]"){AL+=AJ.charAt(AP);AP++;}if(AL.length>0&&(AL[0]===">"||AL[0]==="<"||AL[0]==="=")){AL="";}AP++;break;case"y":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="y"){AK++;AP++;if(AK===4){break;}}if(AK===1||AK===2){AI+=this.fillZeroToWidth(AM.mnYear%100,2);}else{if(AK===3){AI+=this.fillZeroToWidth(AM.mnYear%100,2);AP--;}else{if(AK===4){AI+=AM.mnYear;}}}break;case"M":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="M"){AK++;AP++;}if(AK<3){AI+=this.fillZeroToWidth(AM.mnMonth,AK);}else{if(AK===3){AI+=AC.MONTHNAME_SHORT[AM.mnMonth];}else{AI+=AC.MONTHNAME_FULL[AM.mnMonth];}}break;case"d":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="d"){AK++;AP++;}if(AK<3){AI+=this.fillZeroToWidth(AM.mnDay,AK);}else{if(AK===3){AI+=AC.dayShortNames[AM.mnDay];}else{AI+=AC.dayNames[AM.mnDay];}}break;case"h":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="h"){AK++;AP++;}var AN=AM.mnHour;if(AN===0){AN=12;}if(AN>12){AN-=12;}AI+=this.fillZeroToWidth(AN,AK);break;case"H":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="H"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnHour,AK);break;case"m":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="m"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnMinute,AK);break;case"s":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="s"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnSecond,AK);break;case"S":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="S"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnMillisecond,AK);break;case"a":AN=AM.mnHour;if(AN<12){AI+=AC.AM_NAME;}else{AI+=AC.PM_NAME;}AP++;break;default:AI+=AJ.charAt(AP++);break;}}if(AL.length!==0){AI='<SPAN STYLE="COLOR: '+AL+'" >'+AI+"</SPAN>";}return AI;},fillZeroToWidth:function l(AM,AK){var AJ="",AL=AJ+AM;var AI=AL.length;while(AI<AK){AL="0"+AL;AI++;}return AL;},updateCache:function AG(AJ,AM,AN){var AL=(AM&&AM.length)||0,AK,AI,AO=AJ;for(AK=0;AK<AL-1;AK++){AI=AM[AK];if(!AO[AI]){AO[AI]={};}AO=AO[AI];}AO[AM[AL-1]]=AN;},measureTextHeight:function(AN,AK,AR,AO,AI){var AQ,AM=AN;if(AM===" "){AM="\u00A0";}AI=AI||"pt";if(typeof AR==="number"){AR=AR+AI;}var AJ="none",AP="normal";if(AO&E.FS_ITALIC){AJ="italic";}if(AO&E.FS_BOLD){AP="bold";}var AL={fontFamily:AK,fontSize:AR,fontStyle:AJ,fontWeight:AP};if(h&&h.H&&h.H[AK]&&h.H[AK][AR]&&h.H[AK][AR][AO]){AQ=h.H[AK][AR][AO];}else{AQ=o.measureTextHeight("H",AL,1);this.updateCache(h,["H",AK,AR,AO],AQ);}return AQ;},measureText:function u(AP,AM,AV,AQ,AK){var AJ=true,AI,AT=AV+1;var AO=AP;if(AO===" "){AO="\u00A0";}AK=AK||"pt";if(typeof AV==="number"){AV=AV+AK;}if(B&&B[AO]&&B[AO][AM]&&B[AO][AM][AV]&&B[AO][AM][AV][AQ]){return B[AO][AM][AV][AQ];}if(AJ){var AL="normal",AR="normal";if(AQ&E.FS_ITALIC){AL="italic";}if(AQ&E.FS_BOLD){AR="bold";}var AN={fontFamily:AM,fontSize:AV,fontStyle:AL,fontWeight:AR};if(h&&h.H&&h.H[AM]&&h.H[AM][AV]&&h.H[AM][AV][AQ]){AT=h.H[AM][AV][AQ];}else{AT=o.measureTextHeight("H",AN,true);this.updateCache(h,["H",AM,AV,AQ],AT);}AI=o.measureTextWidth(AP,AN,0);}else{if(!L){var AS=document.createElement("div");AS.id="measureText";AS.style.position="absolute";AS.style.top="0";AS.style.visibility="hidden";AS.style.height="auto";AS.style.width="auto";document.body.appendChild(AS);L=AS;}L.innerHTML="";L.appendChild(document.createTextNode(AO));L.style.fontFamily=AM;L.style.fontSize=AV;L.style.fontWeight="normal";L.style.fontStyle="none";if(AQ&E.FS_ITALIC){L.style.fontStyle="italic";}if(AQ&E.FS_BOLD){L.style.fontWeight="bold";}AI=L.scrollWidth+1;AT=L.scrollHeight+1;}var AU={Width:AI,Height:AT};this.updateCache(B,[AO,AM,AV,AQ],AU);return AU;},ReplaceDecimalPoint:function AA(AJ,AI){return AJ.replace(".",AI);},ReplaceMinusSign:function s(AI,AJ){return AI.replace("-",AJ);},insert:function G(AJ,AI,AK){if(typeof AJ==="string"&&typeof AI==="string"&&AK<=AJ.length){return AJ.substr(0,AK)+AI+AJ.substr(AK);}return AJ;},InsertThousandSeparator:function r(AK,AL,AP){var AI=AP.mstrDecimalPoint;var AJ=AK.indexOf(AI);if(AJ===-1){AJ=AK.length;}var AM=0;while(AM<AJ&&!this.chk_val(AK.charAt(AM))){AM++;}var AO=AK;var AN;for(AN=AJ-3;AN>AM;AN-=3){AO=this.insert(AO,AL,AN);}return AO;},chk_val:function I(AI){return/^\d+$/.test(AI);},hFormatValue:function Z(AV,AM,Ag,A5){var AT=0;var Ao=0;var Ac=AV.length;var BD=false;if(!A5){A5={};var Am=window.navigator.userLanguage||window.navigator.language;var BO=Am.split("-");this.mstrLanguageCode=BO[0];this.mstrCountryCode=BO[1]||BO[0];A5.mstrThousandSeparator=mstrmojo.locales.number.THOUSANDSEPARATOR||",";A5.mstrCurrencySymbol="$";A5.mstrDecimalPoint=mstrmojo.locales.number.DECIMALSEPARATOR||".";A5.mstrPercentSign="%";A5.mstrMinusSign="-";}while(AT<Ac){if(AV.charAt(AT)==='"'){AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){AT++;}}else{if(AV.charAt(AT)==="["){AT++;var An="";while(AT<Ac&&AV.charAt(AT)!=="]"){An+=AV.charAt(AT);AT++;}if(An.length>1&&(An.charAt(0)===">"||An.charAt(0)==="<"||An.charAt(0)==="=")){var AJ=-1;var A7=0;switch(An.charAt(0)){case">":if(An.charAt(1)>="0"&&An.charAt(1)<="9"){AJ=1;A7=1;}else{if(An.charAt(1)==="="&&An.length>2&&An.charAt(2)>="0"&&An.charAt(2)<="9"){AJ=2;A7=2;}}break;case"=":if(An.charAt(1)>="0"&&An.charAt(1)<="9"){AJ=3;A7=1;}else{if(An.charAt(1)==="="&&An.length>2&&An.charAt(2)>="0"&&An.charAt(2)<="9"){AJ=3;A7=2;}}break;case"<":if(An.charAt(1)>="0"&&An.charAt(1)<="9"){AJ=5;A7=1;}else{if(An.charAt(1)==="="&&An.length>2&&An.charAt(2)>="0"&&An.charAt(2)<="9"){AJ=4;A7=2;}}break;}if(AJ>0){var AX=An.substr(A7);var BG=parseFloat(AX);if((AJ===1&&AM>BG)||(AJ===2&&AM>=BG)||(AJ===3&&AM===BG)||(AJ===4&&AM<=BG)||(AJ===5&&AM<BG)){BD=true;}}}}else{if(AV.charAt(AT)===";"){if(BD){Ac=AT;break;}else{Ao=AT+1;AT++;}}else{AT++;}}}}if(!BD){Ao=0;}AT=Ao;var At=false;while(AT<Ac){if(AV.charAt(AT)==='"'){AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){AT++;}}else{if(AV.charAt(AT)==="["){AT++;while(AT<Ac&&AV.charAt(AT)!=="]"){AT++;}}else{if(AV.charAt(AT)==="y"||AV.charAt(AT)==="M"||AV.charAt(AT)==="d"||AV.charAt(AT)==="h"||AV.charAt(AT)==="H"||AV.charAt(AT)==="m"||AV.charAt(AT)==="s"||AV.charAt(AT)==="S"){At=true;break;}else{AT++;}}}}if(At){var BB="";if(BD){BB=AV.substr(Ao,Ac-Ao);}else{BB=AV;}return mstrmojo.num.formatByMask(BB,AM);}var BF;var Ak;var Aq=false;var AP=false;var BA=false;var Ab=false;var BL=[];var Af="K";var AY=0;var A6=false;var AW=0;var BM="";var AQ="";var Aj="";var A4="";var AU=0;var BI=0;var BH=false;var A8=A5.mstrCurrencySymbol;var Az=A5.mstrThousandSeparator;var Av=A5.mstrDecimalPoint;var A9=A5.mstrPercentSign;var A3=A5.mstrMinusSign;AT=Ao;var Ai="";if(AM<0&&!BD){while(AT<Ac&&AV.charAt(AT)!==";"){if(AV.charAt(AT)==='"'){AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){AT++;}}AT++;}AT++;if(AT>=Ac){if(AM<0){BM+="-";}AT=Ao;}}var BN=false;while(AT<Ac){var Ap=false;switch(AV.charAt(AT)){case"[":AT++;while(AT<Ac&&AV.charAt(AT)!=="]"){Aj+=AV.charAt(AT);AT++;}if(Aj.length>0&&(Aj.charAt(0)===">"||Aj.charAt(0)==="<"||Aj.charAt(0)==="=")){Aj="";}AT++;break;case'"':AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){if(AV.charAt(AT)==="K"){BA=true;Af="K";}else{if(BN){AQ+=AV.charAt(AT);}else{BM+=AV.charAt(AT);}}AT++;}AT++;break;case"#":case"0":var Aa=AV.charAt(AT);BN=true;var Ae=1;AT++;while(AT<Ac&&AV.charAt(AT)===Aa){Ae++;AT++;}if(AT+1<Ac&&AV.charAt(AT)==="-"&&AV.charAt(AT+1)===Aa){Ab=true;BL.push(Ae);AT++;while(true){Ae=0;while(AT<Ac&&AV.charAt(AT)===Aa){Ae++;AT++;}BL.push(Ae);if(AT>=Ac||AV.charAt(AT)!=="-"){break;}AT++;}}while(AT<Ac){if(AV.charAt(AT)===","){if(AT+1<Ac&&AV.charAt(AT+1)===Aa){Aq=true;}else{break;}}else{if(AV.charAt(AT)!==Aa){break;}}AT++;}break;case".":BN=true;AT++;AY=0;while(AT<Ac&&AV.charAt(AT)==="0"){AY++;AT++;}if(AY===0){while(AT<Ac&&AV.charAt(AT)==="#"){AY++;AT++;}}break;case"E":BI=6;while(AT<Ac&&AV.charAt(AT)!=="0"){if(AV.charAt(AT)==="+"&&AT<Ac&&AV.charAt(AT+1)==="0"){AP=true;}else{A4+=AV.charAt(AT);}AT++;}AU=0;while(AT<Ac&&AV.charAt(AT)==="0"){AU++;AT++;}break;case"%":BI=4;AT++;break;case"(":AT++;BM+="(";break;case")":AT++;AQ+=")";break;case"-":AT++;if(AM<0){BM+=A3;}break;case"?":AT++;break;case"/":if(AT>Ao&&AV.charAt(AT-1)==="?"&&AT+1<Ac&&AV.charAt(AT+1)==="?"){BI=5;A6=false;Ak=AT-1;while(Ak>Ao&&AV.charAt(Ak)==="?"){Ak--;}while(Ak>Ao&&AV.charAt(Ak)===" "){Ak--;}if(Ak>=Ao&&(AV.charAt(Ak)==="#"||AV.charAt(Ak)==="0")){A6=true;}AW=0;AT++;while(AT<Ac&&AV.charAt(AT)==="?"){AW++;AT++;}}else{AT++;}break;case",":if(AT>Ao&&(AV.charAt(AT-1)==="0"||AV.charAt(AT-1)==="#")){if(AT+1<Ac&&(AV.charAt(AT+1)==="K"||AV.charAt(AT+1)==="k")){BA=true;Af=AV.charAt(AT+1);AT++;}}Ak=AT+1;while(Ak<Ac){if(AV.charAt(Ak)===","){Ak++;continue;}else{break;}}if(Ak===Ac||AV.charAt(Ak)==="."){BH=true;}if(BH||(!BH&&AT+1<Ac&&AV.charAt(AT+1)===",")){while(AT<Ac&&AV.charAt(AT)===","){AM/=1000;AT++;}AT--;}AT++;break;case";":Ap=true;break;case"$":if(BN){AQ+=A8;}else{BM+=A8;}AT++;break;default:if(BN){AQ+=AV.charAt(AT);}else{BM+=AV.charAt(AT);}AT++;}if(Ap){break;}}if(AM<0){AM=-AM;}var Ax="";if(Ab){var As=0;for(BF=0;BF<BL.length;BF++){As+=BL[BF];}Ax=Ai=this.fillZeroToWidth(As,AM.toFixed());for(BF=0;BF<BL.length-1;BF++){As-=BL[BF];var Ar=Ax.length-As;Ax=Ax.slice(0,Ar)+"-"+Ax.slice(Ar);}}else{switch(BI){case 0:if(BA){AM/=1000;}var A1=AM;if(A1<0){A1=-A1;}var AI=0;while(A1>=10){A1/=10;AI++;}if(AI>=15){Ax=Ai=this.fillZeroToWidth((AM<0?-AM:AM),10);var Al=Ax.indexOf(".");if(Al!==-1){Ax=Ax.slice(0,Al)+Ax.slice(Al+1);}Ax=Ax.substr(0,16);if(Ax.charAt(15)>="5"){var AS=14;while(AS>=0&&Ax.charAt(AS)==="9"){Ax=Ax.slice(0,AS)+"0"+Ax.slice(AS+1);AS--;}var AN=Ax.charAt(AS);AN++;if(AS>=0){Ax=Ax.slice(0,AS)+AN+Ax.slice(AS+1);}else{Ax="1"+Ax;}}Ax=Ax.substr(0,15);var BE;for(BE=AI-14;BE>0;BE--){Ax+="0";}if(AM<0){Ax=A3+Ax;}}else{Ai+=(AM+Math.pow(0.1,AY+6)).toFixed(AY);Ax=Ai;Ax=this.ReplaceDecimalPoint(Ax,Av);if(AM<0){Ax=this.ReplaceMinusSign(Ax,A3);}}if(Aq){Ax=this.InsertThousandSeparator(Ax,Az,A5);}if(BA){Ax+=Af;}break;case 5:if(BA){AM/=1000;}var Ah=10;for(BF=1;BF<AW;BF++){Ah*=10;}var AK={numerator:0,denominator:1};var AR={numerator:1,denominator:1};var AO={numerator:1,denominator:2};var Aw={numerator:0,denominator:1};var Ad=AM>=0;var A2=Math.abs(AM);var A0=parseInt(A2,10);A2-=A0;while(AO.denominator<Ah){if(Math.abs(AF.call(AO)-A2)<1e-15){Aw=AO;break;}if(AF.call(AO)>A2){AR=AO;}else{AK=AO;}AO.denominator=AK.denominator+AR.denominator;AO.numerator=AK.numerator+AR.numerator;}if(AO.denominator>=Ah){if(A2-AF.call(AK)<AF.call(AR)-A2){Aw=AK;}else{Aw=AR;}}if(A0>0){Aw.numerator+=A0*Aw.denominator;}if(Aw.denominator===0){A6=false;}var BC=false;var Ay=false;var BK=Aw.numerator;if(A6){A0=Math.floor(Aw.numerator/Aw.denominator);BK=Aw.numerator%Aw.denominator;Ay=Ay||(BK!==0);if(A0>0){BC=true;Ai+=A0;if(Ay){Ai+=" ";}}}if(!Ay&&!BC&&BK===0){Ai+="0";}else{if(!Ay&&BC&&BK===0){AH++;}else{Ai+=BK;Ai+="/";Ai+=Aw.denominator;}}Ax=Ai;if(!Ad){Ax=A3+Ax;}if(Aq){Ax=this.InsertThousandSeparator(Ax,Az,A5);}if(BA){Ax+=Af;}break;case 4:AM*=100;Ai+=(AM+Math.pow(0.1,AY+6)).toFixed(AY);Ax=Ai;Ax=this.ReplaceDecimalPoint(Ax,Av);if(AM<0){Ax=this.ReplaceMinusSign(Ax,A3);}if(Aq){Ax=this.InsertThousandSeparator(Ax,Az,A5);}Ax+=A9;break;case 6:var Au=AM;var BJ=0;if(Au>1){while(Au>=10){Au/=10;BJ++;}}else{if(Au!==0){while(Au<1){Au*=10;BJ--;}}}Ai+=(Au+Math.pow(0.1,AY+6)).toFixed(AY);Ai+=A4;if(AP&&BJ>=0){Ai<<"+";}if(BJ<0){Ai<<"-";BJ=-BJ;}Ai+=this.fillZeroToWidth(BJ,AU);Ax=Ai;Ax=this.ReplaceDecimalPoint(Ax,Av);if(AM<0){Ax=this.ReplaceMinusSign(Ax,A3);}break;}}var AL=BM+Ax+AQ;var AZ=false;if(Aj.length!==0&&AZ){AL='<SPAN STYLE="COLOR: '+Aj+'" >'+AL+"</SPAN>";}return AL;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.gm._IsAnchorable","mstrmojo.ui._HasUITheme","mstrmojo.VisUtility");var D=mstrmojo.dom,E=mstrmojo.VisUtility;mstrmojo.gm.DndTooltip=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.gm._IsAnchorable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.gm.DndTooltip",left:0,top:0,zIndex:10,boundaryNodeName:"boundary",popupNodeName:"infoNode",baseTipClass:"arrow",infoNodeOffset:0,popupNodeOffset:5,anchor:null,boundary:null,utils:mstrmojo.VisChartUtils,themeClassName:"mojo-theme-light",markupString:'<div id="{@id}" class="mstrmojo-Tooltip {@cssClass}" style="top:{@top}px;left:{@left}px;z-index:{@zIndex};position:absolute;{@cssText};"><div class="mstrmojo-Tooltip-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Tooltip-content {@contentNodeCssClass}" style="{@contentNodeCssText}"><div class="content"></div><div class="arrow"><div class="after"></div><div class="before"></div></div></div></div>',markupSlots:{infoNode:function(){return this.domNode.childNodes[1];},contentNode:function(){return this.domNode.childNodes[1].firstChild;},tipNode:function(){return this.domNode.childNodes[1].lastChild;}},toggle:function A(G){if(G){this.domNode.style.display="block";}else{this.domNode.style.display="none";}},updateContent:function(G,I,H){this.set("themeClassName",mstrApp.getThemeClassName());this.fillContent(G,I,H);this.positionDialog();},fillContent:function C(I,M,K){this.anchor=I;this.anchorPosition=M;this.contentNode.innerHTML=K||this.anchor.innerText||this.anchor.textContent;this.toggle(true);var G=E.getComputedFontStyle(this.contentNode),L=this.contentNode.innerHTML,H=E.measureTextWidth(L,G),J=130;if(H<=J){this.contentNode.style.width=H+"px";}else{this.contentNode.innerHTML=E.truncateTextToLineWithWordWrap(L,G,J,3);this.contentNode.style.width=J+"px";}},getTipDimension:function B(){var H=this[this.tipNodeName],G=D.position(H.firstChild);return G;},applyPopupNodePos:function F(I,H,K,G){var M=this[this.tipNodeName],J=M.style,N=this[this.popupNodeName],L=N.style;L.top=I+"px";L.left=H+"px";J.top=(K-I)+"px";J.left=(G-H)+"px";}});}());(function(){mstrmojo.requiresCls("mstrmojo.gm.GMEnums","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.VisEnum.GMLegendFormatingPropertyTag","mstrmojo.VisUtility");var E=mstrmojo.array,D=mstrmojo.hash,A=mstrmojo.func.wrapMethods;function B(F){return F.model.controller.cmdMgr;}mstrmojo._colorPalette=mstrmojo.provide("mstrmojo._colorPalette",{listenToUpdateColorMap:function(I){if(mstrmojo.VisUtility.isOnExpressMode()){return ;}var H=this,G,F=(H.getDocModel&&H.getDocModel())||H.model.docModel;if(F){return F.attachEventListener("colorMapChanged",H.id,function(K){G=H.parent.parent;if(G.isPanelDisplaying()){I.call(H);}else{var J=G.attachEventListener("panelDisplaying",H.id,function(L){if(H.postBuilderingCalled){I.call(H);}G.detachEventListener(J);});}});}},detachUpdateColorMapListener:function(G){if(!G){return ;}var F=(this.getDocModel&&this.getDocModel())||this.model.docModel;F.detachEventListener(G);},submitUpdatesAndPersistXML:function C(H,L,F,P){if(!H||H.length===0){return ;}var G={},M=this,Q=(M.getDocModel&&M.getDocModel())||M.model.docModel,O=Q.getDataService(),I=M.model.controller||Q.controller,J=I._getXtabCallback(M);if(F){D.copy(mstrmojo.DocDataService.SUPPRESS_DATA,G);}if(P){D.copy(mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION,G);}var K=false;E.forEach(H,function(R){if(R.act==="updateElementsPropertiesMap"){K=true;}});if(K){A(Q.getUpdateColorMapCallback(),J);}B(M).execute({execute:function N(){var R=O.newUpdate(this,undefined);R.add(H,L,G);this.submitUpdate(R);},urInfo:{callback:J}});},updateColorMap:function(I,G){if(!E.isArray((G))){G=[G];I=[I];}if(I.length!==G.length){throw new Error("comb and color number mismatch");}var F=(this.getDocModel&&this.getDocModel())||this.model.docModel,J=mstrmojo.VisUtility.getUpdateColorMapAction.bind(this),H=I.map(function(L,K){return J(L,JSON.stringify({color:G[K]}));});this.submitUpdatesAndPersistXML(H,F.getUpdateColorMapCallback(),false,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.gm.GMEnums","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.VisEnum.GMLegendFormatingPropertyTag","mstrmojo.VisUtility");var N=mstrmojo.gm.EnumTRFManipulations;var J=mstrmojo.array,C=mstrmojo.hash,M=mstrmojo.func.wrapMethods,G=mstrmojo.func.composite,I=mstrmojo.VisEnum.GMLegendFormatingPropertyTag;var D={silent:false,undo:mstrmojo.emptyFn,redo:mstrmojo.emptyFn};function K(O){return O.model.controller.cmdMgr;}function L(){return(this.getDocModel&&this.getDocModel())||this.model.docModel;}function H(){return{success:function O(){this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}function E(P,R){var O,U,Q,S,T={};T.tks=this.k;T.selectorObjects=P;T.keepOnly=!!R;T.isDocVis=true;O=L.call(this);U=O.getDataService();Q=U.getGMViewFilterAction(T);S=O.getSliceCallback(T);return{action:Q,callbacks:S};}function B(Q,P){var O,S,R;O=L.call(this);R=O.getDataService();if(!this.isXMLDirty()){R.submitUpdates(Q,P);}else{S=this.getPersistAction();R.submitUpdates([Q,S],P);this.resetXMLDirtyFlag();}}function A(){var b=this.modelData||this.model.data,S=b.k,Z,Y="FormattingWidget",U,T,X,P,Q,R=[],W=[],V=this.edtModel;if(!b){console.log("warning: modelData is missing");return null;}var a=function(d,f){var c=T.createElement(f),e;if(d instanceof Object){for(e in d){if(d.hasOwnProperty(e)){var g=a(d[e],e);if(g){c.appendChild(g);}}}}else{c.setAttribute("value",d);}return c;};var O=function(c){return c.replace(/</g,"&lt;").replace(/"/g,"&quot;");};W=!!V&&!!V.getActionsWithUpdateProperty?V.getActionsWithUpdateProperty():[];X=this.createWidgetPropsXML?this.createWidgetPropsXML():null;if(!X||X.length===0){U=this.getProperties();if(this.useCompatibleXML){T=(new DOMParser()).parseFromString("<widgetProps></widgetProps>","text/xml");T.firstChild.appendChild(a(U,"fmt"));}else{T=(new DOMParser()).parseFromString("<props><widgetProps></widgetProps></props>","text/xml");T.firstChild.firstChild.appendChild(a(U,"fmt"));}X=(new XMLSerializer()).serializeToString(T);}P=O(X);Q={act:"setProperty",nodeKey:S,prs:Y,pri:4,v:P};R.push(Q);if(!!W){R=R.concat(W);}return R;}function F(P,Q,O,T){if(!(T instanceof Function)){return D;}var S=this.id;function R(U){return function(){var W=mstrmojo.all[S],V=W.getProperties();V[P]=U;T.call(W,U,true);W.getDocModel().selectVIUnit(W.parent.id,true);};}return{silent:true,undo:R(O),redo:R(Q)};}mstrmojo._VizSelectionHelper=mstrmojo.provide("mstrmojo._VizSelectionHelper",{postBuilderingCalled:false,listenToUpdateColorMap:function(R){if(mstrmojo.VisUtility.isOnExpressMode()){return ;}var Q=this,P,O=(Q.getDocModel&&Q.getDocModel())||Q.model.docModel;if(O){return O.attachEventListener("colorMapChanged",Q.id,function(T){P=Q.parent&&Q.parent.parent;if(Q.forceUpdateColorMap||(P&&P.isPanelDisplaying())){R.call(Q);}else{var S=P.attachEventListener("panelDisplaying",Q.id,function(U){if(Q.postBuilderingCalled){R.call(Q);}P.detachEventListener(S);});}});}},detachUpdateColorMapListener:function(P){if(!P){return ;}var O=(this.getDocModel&&this.getDocModel())||this.model.docModel;O.detachEventListener(P);},updateTargets:function(P){var S={},Q=this,O=L.call(this);S.fromGM=true;S.type=1;S.src=this.k;S.selectorObjects=P;function R(V){var T=Q.modelData||Q.model.data,U=T.sc;if(U!==undefined){return U[V];}return undefined;}S.keepOnly=true;S.ck=R.call(this,"ck");S.keyContext=S.ck;S.tks=R.call(this,"tks");S.ckey=R.call(this,"ckey");S.isDocVis=true;S.include=true;S.showall=R.call(this,"showall");O.slice(S);},updateAfterViewFilter:function(Q,O){var V,U,P,T,S,W,R;V=L.call(this);U=V.getDataService();T=E.call(this,Q,O);P=T.action;S=T.callbacks;R=this.model.controller||V.controller;if(this.currKeepOnlyAction){W=[C.clone(this.currKeepOnlyAction)];}else{W=E.call(this,[],false).action;}this.currKeepOnlyAction=P;R.submitUndoRedoUpdates([P],W,S);},updateAfterKeepOnly:function(Q){var P=L.call(this),O=this.model.controller||P.controller,R=M(O._getXtabCallback(this),H.call(this));O.applyKeepOnly(this,R,{keepOnly:Q,data:this.getSelections()},Q?-2:undefined);},updateAfterDrill:function(O,Y){var V=this,Z=L.call(this),X=Z.getDataService(),R=X.newUpdate(),Q=this.getSelections(),U=this.model.getSelectorDataFromViewFilter(V.model.data.vfexpr).concat({keepOnly:true,data:Q}),P=Z.getKeepOnlyOrExcludeAction(V.k,U),S=V.model.controller||Z.controller,T=S._getXtabCallback(V);R.add(O,M(Y,T));R.add(P,H.call(V));K(V).execute({execute:function W(){this.submitUpdate(R);},urInfo:{callback:R.callback}});},updateAfterSort:function(R){var P=this,O=L.call(this),S=O.getDataService(),T=O.getSliceCallback({tks:P.k});K(P).execute({execute:function Q(){var V=S.newUpdate(this,undefined),U={act:"sortGM",nodeKey:P.k,subActions:R};V.add(U,T,undefined);if(P.isXMLDirty()){V.addActions(P.getPersistAction());}this.submitUpdate(V,undefined);},urInfo:{callback:T}});},updateAfterAction:function(T,O,P,a,X){if(!T){return ;}var V=this,Q=V.parent&&V.parent.id,b=V.model.docModel,U=V.model.controller||b.controller,Z,Y,S={},W,R=X||D;if(P){Z=mstrmojo.emptyFn;W=function(){this.submitSilent(T);};}else{Z=b.getSliceCallback({tks:this.k});Z.success=G([Z.success,function(){b.selectVIUnit(Q,true);}]);W=function(){this.submit(T,Z,S);};}Y=U._getXtabCallback(V);if(O){Z=M(Z,O);Y=M(Y,O);}Y.success=G([Y.success,function(){b.selectVIUnit(Q,true);}]);if(P){C.copy(mstrmojo.DocDataService.SUPPRESS_DATA,S);}if(a){C.copy(mstrmojo.DocDataService.REQUEST_DEFN_DATA,S);}K(this).execute({execute:W,urInfo:{silent:R.silent,callback:Y,redo:R.redo,undo:R.undo}});},getProperties:mstrmojo.emptyFn,getSetPropertiesAction:A,updateAfterPropertiesChange:function(P,Q,O,R){this.updateAfterAction(A.call(this),P,Q,O,R);},setProperty:function(V,R,T){var P=T.callback,Q=!!T.suppressData,X=T.requestDefinition,S=T.clientUndoRedoCallback,W=this.getProperties(),O=W[V],U;if(V===I.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorMap(this.colorSqureIdentity.comb,R);}}else{if(W&&(W[V]===undefined||W[V].toString()!==R.toString())){W[V]=R;U=F.call(this,V,R,O,S);this.updateAfterPropertiesChange(P,Q,X,U);}}},showData:function(O){if(!this.gridData){this.gridData=this.model.data;}mstrmojo.vi.ui.ViewDataDialog.open(this.parent,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility");var A=mstrmojo.VisUtility,B=mstrmojo.hash;mstrmojo.heatmap.vi.VisHeatmapUtility=mstrmojo.provide("mstrmojo.heatmap.vi.VisHeatmapUtility",{setStepperEnabled:function(C,G,E){var F=["max","min"],D=["lt","gt"];F.forEach(function(J,H){var I=G.every(function(L){var K=D[H],M=A.getPropertyByPath(E,[L,J].join("."),K);return M===K;});C.getControl(H+1).set("enabled",I);});},getStepper:function(F,C){var E=new mstrmojo.Button(mstrmojo.Button.newIconButton(mstrmojo.desc(13607,"Increase Font Size"),"single-operator-plus",function(){F(1);},undefined,{slot:"col1Node"})),D=new mstrmojo.Button(mstrmojo.Button.newIconButton(mstrmojo.desc(13608,"Decrease Font Size"),"single-operator-minus",function(){F(-1);},undefined,{slot:"col2Node"}));C=B.copy(C,{col1Width:"50%",col2Width:"50%",children:[E,D]});return new mstrmojo.ui.editors.controls.TwoColumnContainer(C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.Label","mstrmojo.array","mstrmojo.hash","mstrmojo.Popup","mstrmojo.Box","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.PopupConfig","mstrmojo.ui.Pulldown","mstrmojo.dom","mstrmojo._FormatDefinition","mstrmojo.Button","mstrmojo.models.FormatModel","mstrmojo.VisUtility","mstrmojo.heatmap.vi.VisHeatmapUtility");var J=mstrmojo.array,B=mstrmojo.hash,I=mstrmojo.dom,D=mstrmojo.VisUtility,G=mstrmojo.heatmap.vi.VisHeatmapUtility,H=mstrmojo._FormatDefinition,L=mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS;var M=H.Families.slice(1).map(function(P){return{n:P.n,did:P.n};});function O(Q,S){var P=Q.length,R;for(R=0;R<P;R++){if(S===Q[R].did){return R;}}}function K(Q,P){Q=Q||[];J.forEach(Q,function(R){R.cssDisplay="inline-block";});return B.copy(P||{},{scriptClass:"mstrmojo.Box",cssClass:"row-container",children:Q});}function E(R,Q,S,T){var P=function(U){var V=U.value,W=R[V]&&R[V].did;S.setValue(W);};return A(R,Q,P,T);}function A(Q,P,T,S){S=S||"60px";var R=new mstrmojo.ui.Pulldown({items:Q,width:S,postselectedIndexChange:T});R.set("selectedIndex",P);return{scriptClass:"mstrmojo.Box",children:[R]};}function F(S,Q){Q=B.copy(Q,{label:mstrmojo.desc(3905,"Background"),noOpacity:false,showNoFill:true});var R=!Q.noOpacity;var V,T,P;var X="ColorClr",Y="ColorFillTrans";if(R){V=L.FILL_COLOR|L.FILL_TRANSPARENCY;T=[X,Y];P="125px";}else{V=L.FILL_COLOR;T=[X];P="60px";}var U=new mstrmojo.ui.editors.controls.FillConfigGroup({colorPickerHostWithin:true,showNoFill:Q.showNoFill,visibleControls:V,onGroupValueChange:function(Z,a){if(Z===X){S.value.setValue(a);}if(Z===Y){S.opacity.setValue(a/100);}},width:P});if(U){if(R){U.fillColorAndTrans.layoutConfig={w:{col1Node:"50%",dividerNode:"5px",col2Node:"50%"},xt:true};}U.iniChildrenComp(T);U.syncControls(function(){this.setChildValue(X,S.value.getValue());if(R){this.setChildValue(Y,S.opacity.getValue()*100);}});}var W=[{scriptClass:"mstrmojo.Box",width:"60px",children:[{scriptClass:"mstrmojo.Label",text:Q.label}]},U];return[K(W)];}var C={background:F,headerFill:F,font:function(R,S){var P=G.getStepper(function(T){if(T>0){R.scale.setValue(R.scale.getValue()+0.1);}else{R.scale.setValue(Math.max(0.1,R.scale.getValue()-0.1));}},{width:"62px"});this.attachEventListener("fontScaleChange",this.id,function(T){G.setStepperEnabled(P,[S.modelPath],T.limits);if(S.disableFontSize){P.set("enabled",false);}});var Q=[K([{scriptClass:"mstrmojo.Box",width:"60px",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3544,"Text")}]},P,E(M,O(M,R.family.getValue()),R.family)])];this.triggerFontScaleChangeEvent();return Q;},attributeColorBy:function(W,S){S=S||{};var V=mstrmojo.desc(2885,"Fill"),X=S.callback;var U="ShapeClr",Q="ShapeFillTrans",P=X&&X.onFillChanged&&X.onOpacityChanged,R=P?function(Z,Y){if(Z===U){X.onFillChanged.call(this,Y,function(a){T.syncControls(function(){this.setChildValue(U,a);});});D.setColorPickerShowAutomatic(T,Y!=="automatic");}else{if(Z===Q){X.onOpacityChanged.call(this,Y);}}}:mstrmojo.emptyFn,T=new mstrmojo.ui.editors.controls.FillConfigGroup({colorPickerHostWithin:true,onGroupValueChange:R,width:"125px"});if(T){T.fillColorAndTrans.layoutConfig={w:{col1Node:"50%",dividerNode:"5px",col2Node:"50%"},xt:true};T.iniChildrenComp([U,Q]);T.syncControls(function(){this.setChildValue(U,W.color);this.setChildValue(Q,W.opacity);});D.setColorPickerShowAutomatic(T,W.showAutomatic);}return[K([{scriptClass:"mstrmojo.Box",width:"60px",children:[{scriptClass:"mstrmojo.Label",text:V}]},T],{width:"147px"})];},metricColorByOpacity:function(Q){var R="ShapeFillTrans";var P=new mstrmojo.ui.editors.controls.FillConfigGroup({visibleControls:L.FILL_TRANSPARENCY,onGroupValueChange:function(T,S){if(T===R&&Q){Q.setValue(S/100);}},width:"60px"});if(P&&Q){P.iniChildrenComp([R]);P.syncControls(function(){this.setChildValue(R,Q.getValue()*100);});}return[K([{scriptClass:"mstrmojo.Box",width:"60px",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2885,"Fill")}]},P])];}};function N(Y,S,T){var X=[],R=this;Y.forEach(function(f){var c=f.type,b=f.model,a=C[c],e=R.getWidget();if(a){X=X.concat(a.call(e,b,f));}});if(X.length){var U=I.position(this.containerNode,true),W=S.pageX-U.x,V=S.pageY-U.y;var P={scriptClass:"mstrmojo.Popup",cssClass:"widget-inner-context-menu "+mstrApp.getThemeClassName(),locksHover:true,children:X};var Q=this._contextMenuAnchor;if(!Q||!Q.parentElement){Q=document.createElement("div");Q.style.position="absolute";this._contextMenuAnchor=Q;this.containerNode.appendChild(Q);}Q.style.left=W+1+"px";Q.style.top=V+1+"px";var Z={hostId:this.id,hostElement:Q,isHostedWithin:false};if(T){Z.alignment=T;}P.popupConfig=new mstrmojo.ui.PopupConfig(Z);P.visible=true;P.onClose=function(){this.unrender();};return P;}}mstrmojo.heatmap.vi._HasHeatmapContextMenu=mstrmojo.provide("mstrmojo.heatmap.vi._HasHeatmapContextMenu",{getWidget:function(){return this;},showContextMenu:function(P,Q,R){P=[].concat(P);this.openPopup(N.call(this,P,Q,R));},unrender:function(P){this._contextMenuAnchor=undefined;this._super(P);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.gm.DndTooltip","mstrmojo.VisUtility","mstrmojo.vi.models.EnumDragSources");var N=mstrmojo,I=N.dom,K=N.VisUtility,C=N.vi.models.EnumDragSources,J=N.array;mstrmojo.gm._SupportDndAsBlackBox=mstrmojo.provide("mstrmojo.gm._SupportDndAsBlackBox",{_mixinName:"mstrmojo.gm._SupportDndAsBlackBox",mainContainerNode:"domNode",handleDndForParentNode:true,dndAsBlackBox:true,allowDrop:function H(R){var S=R.src.data,Q=S&&S.src;if(Q===C.DATASETS||Q===C.VIZ_EDITOR||Q===C.VIZ||Q===C.ALL_OBJECT_LIST){return true;}return false;},cleanUpAfterTarget:function E(Q){this._super(Q);if(this.domNode.contains(this.dndHighlightCanvas)){this.domNode.removeChild(this.dndHighlightCanvas);}delete this.dndHighlightCanvas;if(this.dndTooltip){this.dndTooltip.destroy();}delete this.dndTooltip;},ondragenter:function M(R){if(this._super){this._super(R);}var W=this.isEmpty();if(W){R.tgt.widget=this;this.raiseEvent({name:"toggleCtrlOverlay",visible:false,controls:this.getVisEmptyMsgControls()});}var V;if(!this.dndHighlightCanvas){var Q=document.createElement("canvas"),U=I.position(this.domNode),T=I.position(this[this.mainContainerNode]);this.domNode.appendChild(Q);Q.style.position="absolute";Q.style.zIndex=1000;Q.width=T.w||U.w;Q.height=T.h||U.h;Q.style.top=(T.y-U.y)+"px";Q.style.left=(T.x-U.x)+"px";this.dndHighlightCanvas=Q;}if(!this.dndTooltip){V=document.createElement("div");document.body.appendChild(V);var S={placeholder:V,contentNodeCssClass:"gm-dnd-replace-node-tooltip",boundary:document.body};this.dndTooltip=new mstrmojo.gm.DndTooltip(S);this.dndTooltip.render();this.dndTooltip.parent=this;}this.ondragover(R);},ondragover:function B(Q){if(this._super){this._super(Q);}if(this.dndAsBlackBox){this.clearHighlightDropZoneOnGraph();this.drawBlackBoxHighlight(Q);}},ondragleave:function P(Q){var R=this.isEmpty();if(R){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});}if(this._super){this._super(Q);}},ondrop:function L(R){if(this._super){this._super(R);}if(this.dndAsBlackBox){var U=this.zonesModel,T=R.src.data,Q=T.items,S=R.getCtxtDragData().src;U.addUnitsFromDataSource(Q,T.dsid,R.actions,S===C.ALL_OBJECT_LIST?R.callback:null);}},clearHighlightDropZoneOnGraph:function G(){var R=this.dndHighlightCanvas,Q=R.getContext("2d");Q.clearRect(0,0,R.width,R.height);this.dndTooltip.toggle(false);},isMetric:function O(Q){return Q&&Q.t===4;},isAttrCategory:function D(Q){return Q&&(Q.t===12||Q.t===1||Q.t===47);},singleTypeObject:function F(Q){var T=0,S=0,R=this;J.forEach(Q.src.data.items,function(U){if(R.isAttrCategory(U)){T++;}else{if(R.isMetric(U)){S++;}}});return !(T>0&&S>0);},drawBlackBoxHighlight:function A(S){var T=this.dndHighlightCanvas,a=T.getContext("2d"),X=I.position(this[this.mainContainerNode]),Q=I.position(this.domNode),R=X.w||Q.w,Z=X.h||Q.h,W=Math.min(30,0.25*R),b=Math.min(30,0.25*Z);a.save();a.beginPath();a.rect(W,b,R-2*W,Z-2*b);a.fillStyle="#bce8ff";a.globalAlpha=0.4;a.fill();a.strokeStyle="#34abeb";a.globalAlpha=1;K.drawDashLine(a,W,b,W,Z-b,2,2);K.drawDashLine(a,W,b,R-W,b,2,2);K.drawDashLine(a,R-W,b,R-W,Z-b,2,2);K.drawDashLine(a,W,Z-b,R-W,Z-b,2,2);a.restore();if(!this.singleTypeObject(S)){var U=this.dndTooltip,Y={x:S.tgt.e.x,y:S.tgt.e.y,w:0,h:0},V=S.src.widget.avatar;if(V){Y=I.position(V);}U.placementOrder=[U.PLACEMENT_ABOVE];U.popupNodeOffset=5;U.updateContent(null,Y,"Add Attributes and Metrics");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.num","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.color","mstrmojo.chart","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var m=mstrmojo,n=mstrmojo.array,P=mstrmojo.hash,H=mstrmojo.num,G=mstrmojo.VisUtility,a=mstrmojo.chart,K=a.enums,b=K.EnumGraphMajorType,J=a.common.Utility,T=a.model,M=T.enums,u=M.EnumDSSGraphObject,z=mstrmojo.VisEnum.ControlType,w=m.gm,U=mstrmojo.gm.EnumTextAlignH,p=mstrmojo.gm.EnumTextAlignV,t=";",i=",",A="_tmsp",L=" ",Y=-20,j=mstrmojo.gm.EnumSelectionOptionLevel,AB=mstrmojo.gm.EnumShape,f=mstrmojo.color,I=mstrmojo.gm.EnumIdentityType,R=0.00001,D,Z=Math.pow(2,30),c=Math.pow(2,60);var e=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(7194,"Constant")];function k(AH,AG){var AI,AF=AH.length;if(AF!==AG.length){return false;}for(AI=0;AI<AF;AI++){if(AH[AI]!==AG[AI]){return false;}}return true;}function AA(AI,AG,AJ){var AH=false,AK=AJ+A,AF=AI[AK],AL=AG[AK];if(AG[AJ]===undefined){AH=true;}else{if((AL===undefined&&AF!==undefined)||(AL!==undefined&&AF!==undefined&&AL<AF)){AH=true;}}if(AH){AG[AJ]=AI[AJ];if(AL!==undefined){AG[AK]=AF;}}}function AE(AG,AF){var AH;for(AH in AG){if(AG.hasOwnProperty(AH)){AA(AG,AF,AH);}}return AF;}function W(AJ){var AI={},AH,AG=[],AF;n.forEach(AJ,function(AK){if(AK!==undefined){AG.push(AK);}});AF=AG.length;if(AF===1){return AG[0];}for(AH=0;AH<AF;AH++){AE(AG[AH],AI);}return AI;}function y(AF){return{n:AF,s:AF.toString(),on:AF};}function X(AH,AF,AJ){if(AF===AH){return 0;}var AG=AF-AH,AI=1;while(AG<1){AG*=10;AI/=10;}while(AG>=10){AG/=10;AI*=10;}if(AG<1.8){AI*=0.2;}else{if(AG<3.1){AI*=0.4;}else{if(AG<4.6){AI*=0.5;}else{if(AG>=8.1){AI*=2;}}}}if(AJ){AI=Math.round(AI);if(AI<1){AI=1;}}return AI;}function B(AI,AM,AO,AG){var AK=[];if(AI===AM){if(AI<0){AK.push(mstrmojo.gm.GMUtility.formatNumber(AI,"nearest"));}AK.push({n:0,s:"0",on:0});if(AI>0){AK.push(mstrmojo.gm.GMUtility.formatNumber(AI,"nearest"));}return AK;}var AF=AG>0?AG:X(AI,AM,AO);var AH=Math.ceil(AM/AF)*AF;if(AH-AM>=AF*0.9){AH=Math.floor(AM/AF)*AF;}var AL=Math.floor(AI/AF)*AF;if(AI-AL>=AF*0.9){AL=Math.ceil(AI/AF)*AF;}var AN=Math.floor((AH-AL+AF/100)/AF)+1,AJ;for(AJ=0;AJ<AN;++AJ){AK.push(mstrmojo.gm.GMUtility.formatNumber(AL+AJ*AF,"nearest"));}return AK;}function S(AF,AI){var AH;AF.mMaxTick=1;if(this.mChartContextPtr.mIsGraphMatrix){AF.mStep=this.mMinimum<0?0.2:0.1;if(AI.mUseCustomMinMax){var AG=AI;AF.mMaxTick=AG.mAxisMaxValue;AF.mMinTick=AG.mAxisMinValue;AF.mMaxTick=Math.min(1,AF.mMaxTick);AF.mMinTick=Math.max(-1,AF.mMinTick);AF.mStep=0.1;}else{if(this.mMaximum>=0.5){AF.mMaxTick=1;AF.mMinTick=Math.floor(this.mMinimum/AF.mStep)*AF.mStep;AF.mMinTick=(AF.mMinTick*this.mMinimum<0)?0:(AF.mMinTick>0?0:AF.mMinTick);if(this.mMinimum<-0.5){AF.mMinTick=-1;}}else{if(this.mMaximum>0){AF.mMaxTick=Math.ceil(this.mMaximum/AF.mStep)*AF.mStep;AF.mMinTick=-1;}else{AF.mStep=0.1;AF.mMaxTick=0;AF.mMinTick=-1;}}}}else{AF.mMinTick=(this.mMinimum<0)?-1:0;if(s.call(this,AF)){return ;}AF.mStep=this.mMajorGrid.mUseManualGrid?this.mMajorGrid.mGridInterval:(AF.mMaxTick-AF.mMinTick)/10;}for(AH=AF.mMinTick+AF.mStep;AH+a.gModuleMain.mTolerance<AF.mMaxTick;AH+=AF.mStep){AF.mTicks.push(Math.round(AH*100)/100);}}function O(AF,AK){var AJ,AG,AM=AK,AL=AM.mDrawCustomLine,AH=AM.mAxisCustomValue,AI;AF.mStep=1;if(this.mMaximum<=0){AF.mMinTick=1;AF.mMaxTick=10;if(AL&&AH<=1){AM.mAxisCustomValue=AF.mMinTick;}return ;}if(this.mMinimum<=0){AG=this.mMaximum>1?0:-1;AF.mMinTick=Math.pow(10,AG);if(AM.mUseCustomMinMax){AF.mMaxTick=this.mMaximum;AJ=Math.floor(g.call(this,this.mMaximum));if(g.call(this,this.mMaximum)===AJ){AJ--;}}else{AJ=Math.ceil(g.call(this,this.mMaximum));AF.mMaxTick=Math.pow(10,AJ);}for(AI=AG+1;AI<AJ;++AI){AF.mTicks.push(Math.pow(10,Math.floor(AI)));}if(AL&&AH<=0){AM.mAxisCustomValue=Math.max(AF.mMinTick,AM.mAxisCustomValue);}return ;}if(AM.mUseCustomMinMax){AJ=g.call(this,this.mMaximum);AG=g.call(this,this.mMinimum);AF.mMaxTick=this.mMaximum;AF.mMinTick=this.mMinimum;}else{AJ=Math.ceil(g.call(this,this.mMaximum));AG=Math.floor(g.call(this,this.mMinimum));AF.mMaxTick=Math.pow(10,AJ);AF.mMinTick=Math.pow(10,AG);}for(AI=AG+1;AI<AJ;++AI){AF.mTicks.push(Math.pow(10,Math.floor(AI)));}if(AL&&AH<=0){AM.mAxisCustomValue=AF.mMinTick;}}function q(AP,AK){var AH=AK,AF,AI;AP.mStep=d.call(this,this.mMaximum,this.mMinimum,AH.mAlwaysIncludeZero);AP.mMaxTick=Math.ceil(this.mMaximum/AP.mStep)*AP.mStep;AP.mMinTick=Math.floor(this.mMinimum/AP.mStep)*AP.mStep;AP.mMinTick=(AP.mMinTick*this.mMinimum<0)?0:AP.mMinTick;if(AH.mAlwaysIncludeZero){AP.mMaxTick=(this.mMaximum<0)?0:AP.mMaxTick;AP.mMinTick=(this.mMinimum>0)?0:AP.mMinTick;}var AJ=AP.mMaxTick-AP.mMinTick;if(AP.mStep>=AJ){return ;}if(s.call(this,AP)){return ;}AF=Math.floor((AP.mMaxTick-AP.mMinTick+AP.mStep/100)/AP.mStep)+1;var AL=this.mNumberFormat;for(AI=1;AI<AF-1;++AI){var AN=AP.mMinTick+AI*AP.mStep,AO,AG,AM;if(AP.mStep<1&&AL.mFormatType===4&&AL.mCustomFormat.indexOf("%")!==-1){AO=AN*100;if(!J.isIntegar(AO)){AG=Math.round(AO);AM=Math.abs(AO-AG);if(AM<R){AN=AG/100;}}}AP.mTicks.push(AN);}}function C(AP,AJ){var AO=AJ,AI,AF,AM,AH,AL,AK,AG,AN;AP.mMaxTick=AO.mAxisMaxValue;AP.mMinTick=AO.mAxisMinValue;if(s.call(this,AP)){return ;}if(!V.call(this)||this.mMajorGrid.mUseManualGrid){AP.mStep=d.call(this,AP.mMaxTick,AP.mMinTick,false);AI=AP.mMaxTick-AP.mMinTick;if(AP.mStep>=AI){return ;}AF=Math.floor(AI/AP.mStep);if(!(this.mChartContextPtr.mIsTimeSeriesChart)&&AI===AF*AP.mStep){for(AH=1;AH<AF;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}else{AI=AP.mMaxTick-AP.mMinTick;AM=10;AL=false;for(AH=3;AH<AF;++AH){AK=AI/AH;while(AK<1){AK*=10;}while(AK>=10){AK/=10;}if(AK===Math.floor(AK)){AM=AH;AL=true;break;}}if(AL){AP.mStep=AI/AM;for(AH=1;AH<AM;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}else{AG=Math.ceil((AP.mMinTick+AP.mStep/100)/AP.mStep)*AP.mStep;AN=Math.floor((AP.mMaxTick-AP.mStep/100-AG)/AP.mStep)+3;for(AH=0;AH<AN-2;++AH){AP.mTicks.push(AG+AH*AP.mStep);}}}}else{AI=AP.mMaxTick-AP.mMinTick;AM=10;for(AH=6;AH<=9;++AH){AK=AI/AH;while(AK<10){AK*=10;}while(AK>=100){AK/=10;}if(AK===Math.floor(AK)){AM=AH;break;}}AP.mStep=AI/AM;for(AH=1;AH<AM;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}}function E(AF,AJ){var AI,AG,AH;AF.mMaxTick=AJ.mAxisMaxValue;if(AF.mMaxTick<=this.mMinimum){this.mMinimum=AF.mMaxTick-1;}AF.mStep=d.call(this,AF.mMaxTick,this.mMinimum,AJ.mAlwaysIncludeZero&&(AF.mMaxTick>0));AI=(AJ.mAlwaysIncludeZero&&(this.mMinimum>0))?0:this.mMinimum;if(V.call(this)){AF.mMinTick=AF.mMaxTick-Math.ceil((AF.mMaxTick-AI)/AF.mStep)*AF.mStep;}else{AF.mMinTick=Math.floor(AI/AF.mStep)*AF.mStep;}if(s.call(this,AF)){return ;}AG=Math.floor((AF.mMaxTick-AF.mStep/100-AF.mMinTick)/AF.mStep)+2;for(AH=1;AH<AG-1;++AH){AF.mTicks.push(AF.mMinTick+AH*AF.mStep);}}function h(AF,AK){var AG,AJ,AH,AI;AF.mMinTick=AK.mAxisMinValue;if(AF.mMinTick>=this.mMaximum){this.mMaximum=AF.mMinTick+1;}AF.mStep=d.call(this,this.mMaximum,AF.mMinTick,AK.mAlwaysIncludeZero&&(AF.mMinTick<0));AG=(AK.mAlwaysIncludeZero&&(this.mMaximum<0))?0:this.mMaximum;if(V.call(this)){AF.mMaxTick=AF.mMinTick+Math.ceil((AG-AF.mMinTick)/AF.mStep)*AF.mStep;}else{AF.mMaxTick=Math.ceil(AG/AF.mStep)*AF.mStep;}if(s.call(this,AF)){return ;}AJ=Math.ceil((AF.mMinTick+AF.mStep/100)/AF.mStep)*AF.mStep;AH=Math.floor((AF.mMaxTick-AJ+AF.mStep/100)/AF.mStep)+2;for(AI=0;AI<AH-2;++AI){AF.mTicks.push(AJ+AI*AF.mStep);}}function d(AV,AP,AH){var AO,AJ;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}AO=0;if(AH){AO=Math.max(AV,AV-AP);AO=Math.max(AO,-AP);}else{AO=AV-AP;}if(AO===0){this.mIsShown=false;return 1;}if(AO>=1&&AO<=4&&parseInt(AO)===AO){var AW=this.PrimaryMetricIndex,AK=AW.length;for(var AR=0;AR<AK;AR++){var AN=this.mChartContextPtr.mDatasetPtr,AQ=AN.dataProvider,AI=AQ.getSeriesCount(),AM=AQ.getGroupCount(),AG=AW[AR],AL,AT;for(var AU=0;AU<AI;AU++){AL=AQ.getMetricIndexForSeries(AU);if(AL===AG){AT=true;for(var AS=0;AS<AM;AS++){var AX=AN.GetData(AU,AS);if(parseInt(AX)!==AX){AT=false;break;}}}if(AT){return 1;}}}}var AF=AO;AJ=1;while(AO<1){AO*=10;AJ/=10;}while(AO>=10){AO/=10;AJ*=10;}if(AO<1.8){AJ*=2;AJ/=10;}else{if(AO<3.1){AJ*=4;AJ/=10;}else{if(AO<4.6){AJ*=5;AJ/=10;}else{if(AO>=8.1){AJ*=2;}}}}AJ=this.postProcessStep(AJ,AF);return AJ;}function s(AF){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var AG=this.mMajorGrid;return AG.mUseManualGrid&&(AG.mGridInterval<(AF.mMaxTick-AF.mMinTick)/30);}function g(AF){return Math.log(AF)/Math.log(10);}function V(){return(this.mGraphMajorType===b.GMT_HISTOGRAM||this.mGraphMajorType===b.GMT_POLAR)&&this.mTripleId.mObjectId===u.DssGraphX1Body;}function x(AI){var AJ=this,AF=AJ.id,AH=AI.metricId,AG=new m.ui.menus.MenuConfig();(AI.options).forEach(function(AK){if(AK!==w.EnumRefLineModelType.CONST){AG.addMenuItem(e[AK],"xt",function(){AJ.toggleRefLineEnabled(AH,AK,true);});}else{AG.addEditorMenuItem(e[w.EnumRefLineModelType.CONST],AF,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:mstrmojo.expr.DTP.FLOAT,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR},onEnter:function(){this.validate();}}],fnOk:function(AM,AL){var AN=AL.constVal;if(AN.isValid()){AJ.toggleRefLineEnabled(AH,AK,true,AN.value);}}});});}});return AG;}function r(AH){var AI=this,AG=AH.metricId,AF=new m.ui.menus.MenuConfig();(AH.options).forEach(function(AL){var AJ=AL.refType,AK=e[AJ]+((AJ===w.EnumRefLineModelType.CONST)?("-["+H.toLocaleString(AL.c)+"]"):"");AF.addMenuItem(AK,"xt",function(){AI.toggleRefLineEnabled(AG,AJ,false,0,AL.modix);});});return AF;}function AC(AJ,AF){var AI=AJ.GMController,AG=AI.getForbiddenShapeForMetric(AF),AH=[];[{text:mstrmojo.desc(12097,"Bar"),value:AB.BAR},{text:mstrmojo.desc(2059,"Line"),value:AB.LINE},{text:mstrmojo.desc(9738,"Area"),value:AB.AREA},{text:mstrmojo.desc(12100,"Circle"),value:AB.CIRCLE},{text:mstrmojo.desc(12101,"Square"),value:AB.SQUARE},{text:mstrmojo.desc(12102,"Tick"),value:AB.TICK}].forEach(function(AK){if(AG.indexOf(AK.value)<0){AH.push(AK);}});return AH;}function o(AG,AF){return function(AI,AH){if(AI!==AH){AF({ctxt:{sp:AI,mid:AG}});}};}function AD(AI){var AG=AI.options,AF=this.getMenuHandler("changeShape"),AH=new mstrmojo.ui.menus.MenuConfig();AH.addRadioMenuGroup(AI.currValue,o(AI.metricId,AF),AG,"checkMark",undefined,true);return AH;}mstrmojo.gm.GMUtility=mstrmojo.provide("mstrmojo.gm.GMUtility",{mTimers:[],mUseTimer:true,timerId:0,startTimer:function Q(AG){if(this.mUseTimer){var AF=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:AF,desc:AG.functionName+": "+AG.purpose});return AF;}},endTimer:function F(AF){if(this.mUseTimer){var AJ,AI=this.mTimers;if(AF===undefined){AJ=AI.pop();}else{var AH,AG;for(AH=0;AH<AI.length;AH++){AG=AI[AH];if(AG.timerId===AF){AJ=AG;AI.splice(AH,1);AH--;}}}if(AJ){G.visPrint("%c"+AJ.desc+": "+(new Date()-AJ.timeStamp)+"ms","color: blue");}}},computeTicksForPercentchart:function(AG,AF,AH){return B(AG,AF,false,AH);},computeTicksForFlexMinMax:function(AG,AF,AH,AI){return B(AG,AF,AH,AI);},formatNumber:function(AH,AG,AF){return y(AH,AG,AF===undefined?3:AF);},sizeCalculator:{sum:function(AF,AJ,AK){var AH,AG=0,AI=0;if(AK===undefined){AK=AF.length;}AJ=AJ||1;for(AH=0;AH<AK;AH++){if(AF[AH]>0){AI+=AF[AH];AG+=1;}}if(AG>1){AI+=(AG-1)*AJ;}return AI;},add:function(AH,AF,AG){AG=AG||1;if(AF>0){AH+=(AF+AG);}return AH;},minus:function(AH,AF,AG){if(AF>0){AH-=(AF+AG);}return AH;}},replaceSpecialChars:function(AF){AF=AF.replace(/&/g,"&amp;");AF=AF.replace(/</g,"&lt;");AF=AF.replace(/>/g,"&gt;");AF=AF.replace(/"/g,"&quot;");return AF;},restoreSpecialChars:function(AF){AF=AF.replace(/&nbsp;/g," ");AF=AF.replace(/&lt;/g,"<");AF=AF.replace(/&gt;/g,">");AF=AF.replace(/&quot;/g,'"');AF=AF.replace(/&amp;/g,"&");return AF;},removeExtraSpace:function(AF){return AF.replace(/ {2,}/g," ");},stringToJSON:function(AF){if(AF===undefined){return undefined;}if(typeof AF==="string"){AF=AF.replace(/'/g,'"');return JSON.parse(AF);}return AF;},everythingToString:function(AG){if(AG===undefined){return undefined;}var AF;if(typeof AG==="object"){AF=JSON.stringify(AG.jsonObj||AG);}else{AF=AG.toString();}AF=AF.replace(/"/g,"'");return AF;},compareElementObj:function(AJ,AG){var AI=AJ.tid.toString(),AF=AG.tid.toString(),AK=AJ.eid,AH=AG.eid;if(AI!==AF){return AI>AF?1:-1;}if(AK===AH){return 0;}return AK>AH?1:-1;},isEqualComb:function(AG,AF){var AK=true,AJ,AI=AG.length,AH=AF.length;if(AI!==AH){return false;}if(AG.length>1){AG.sort(this.compareElementObj);}if(AF.length>1){AF.sort(this.compareElementObj);}for(AJ=0;AJ<AI;AJ++){if(this.compareElementObj(AG[AJ],AF[AJ])!==0){AK=false;break;}}return AK;},serializeCombination:function(AG){var AF="";if(AG.length>1){AG.sort(this.compareElementObj);}n.forEach(AG,function(AH){if(AF!==""){AF+=t;}AF+=(AH.tid+i+AH.eid);});return AF;},deserializeCombination:function(AG){var AH=AG.split(t),AF=[];n.forEach(AH,function(AL){var AI=AL.split(i);var AK=AI[0];var AJ=AI[1];AF.push({tid:AK,eid:AJ});});return AF;},getElementCombinationForMetric:function(AF){var AG=[];AG.push({tid:-1,eid:AF});return AG;},getResolvedFormatsObject:function(AF){return W(AF);},isDigitalArrayEqual:function(AG,AF){return k.call(this,AG,AF);},indexOf:function(AG,AI){var AH,AF=AG.length;for(AH=0;AH<AF;AH++){if(k(AG[AH],AI)){return AH;}}return -1;},parseAxisScaleData:function(AJ){var AH,AK,AG,AF=AJ.split(","),AI=[];for(AH=0,AK=AF.length;AH<AK;AH++){AG=AF[AH].split(":");AI.push(AG);}return AI;},parseCSSColor:function(AJ,AG){var AI=AJ.slice(1),AF=[],AH;if(AI.length===6){if(AG===true){AF[0]=AI[4];AF[1]=AI[5];AF[2]=AI[2];AF[3]=AI[3];AF[4]=AI[0];AF[5]=AI[1];}else{for(AH=0;AH<6;AH++){AF[AH]=AI[AH];}}}else{if(AG===true){for(AH=2;AH>=0;AH--){AF.push(AI[AH]);AF.push(AI[AH]);}}else{for(AH=0;AH<3;AH++){AF.push(AI[AH]);AF.push(AI[AH]);}}}return parseInt("0x"+AF.join(""),16);},RGB_BRG_Switch:function(AG){var AI=(AG>>16)&255,AH=(AG>>8)&255,AF=(AG>>0)&255;return(AF<<16)|(AH<<8)|(AI<<0);},encodeColor:function(AG){if(AG===undefined||AG===null||AG==="transparent"||AG==="default"){return AG;}var AH=false,AF={};if(AH){if(typeof AG==="object"){AF.c1=this.RGB_BRG_Switch(f.encodeColor(AG.c1));AF.c2=this.RGB_BRG_Switch(f.encodeColor(AG.c2));AF.or=AG.or;return AF;}return this.RGB_BRG_Switch(f.encodeColor(AG));}if(typeof AG==="object"){AF.c1=f.encodeColor(AG.c1);AF.c2=f.encodeColor(AG.c2);AF.or=AG.or;return AF;}return f.encodeColor(AG);},checkEquality:function(AG,AF){if(typeof AG==="object"&&AG.c1!==undefined){if(AG.c1!==AF.c1){return false;}if(AG.c2!==AF.c2){return false;}if(AG.or!==AF.or){return false;}return true;}return AG===AF;},decodeColor:function(AG){if(AG===undefined||AG===null||AG==="transparent"||AG==="default"){return AG;}var AH=false,AF={};if(AH){if(typeof AG==="object"){AF.c1=f.decodeColor(this.RGB_BRG_Switch(AG.c1));AF.c2=f.decodeColor(this.RGB_BRG_Switch(AG.c2));AF.or=AG.or;return AF;}return f.decodeColor(this.RGB_BRG_Switch(AG));}if(typeof AG==="object"){AF.c1=f.decodeColor(AG.c1);AF.c2=f.decodeColor(AG.c2);AF.or=AG.or;return AF;}return f.decodeColor(AG);},getTrendLineToggleHandler:function(AF,AH,AG){return function(){AF.switchOnOffTrendLineForMetric(AH,AG);};},getTrendLineToggleState:function(AF,AG){return AF.queryTrendLineStatusForMetric(AG);},getEditTrendLineHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.TREND_LINE,AG);};},getEditRefLineHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.REF_LINE,AG);};},getEditAxisScaleHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.AXIS_SCALE,AG);};},getEditAxisOriginHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.AXIS_ORIGIN_DEFINE,AG);};},getEditLogScaleHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.LOG_SCALE,AG);};},getOptionObjArr:function(AF,AH,AJ){if(!D){D=mstrmojo.gm.GMUtility;}var AG={},AI;if(AH!==undefined){AH=AH.toLowerCase();if(AH==="x1"){AH="x";}else{if(AH==="y1"){AH="y";}}}if(AF.length>1||(AJ&&AF.length===1)){if(AH==="x"){AG.opt=mstrmojo.desc(11712,"Bottom Axis");AG.key="XAxis";}else{if(AH==="x2"){AG.opt=mstrmojo.desc(11710,"Top Axis");AG.key="X2Axis";}else{if(AH==="y"){AG.opt=mstrmojo.desc(11715,"Left Axis");AG.key="YAxis";}else{if(AH==="y2"){AG.opt=mstrmojo.desc(11713,"Right Axis");AG.key="Y2Axis";}else{if(AH==="z"){AG.opt=mstrmojo.desc(12090,"SizeBy");AG.key="SizeBy";}}}}}AG.optLvl=j.AXIS;AG.mos=this.getMetricFormatFromIndexArray(AF);}else{if(AF.length===1){AI=this.getMetricFormat(AF[0]);AG.opt=AI.n;AG.mos=[AI];AG.key=AI.mId;AG.comb=D.getElementCombinationForMetric(AI.mId);AG.optLvl=j.METRIC;if(AH==="z"){AG.sizeBy=true;}}}return AG;},filterInValidMetricIndex:function(AG){var AF=[];n.forEach(AG,function(AH){if(AH!==Y){AF.push(AH);}});return AF;},fillBackgroundDiv:function(AG){var AF=document.createElement("div");AF.setAttribute("class","gm-bk-div");AF.style.backgroundColor="rgba(0,0,0,0)";AG.appendChild(AF);},getSubMenu:function(AK,AL,AJ,AI){var AH=AC(AK,AI),AF=AK.getMenuHandler("changeShape"),AG=AK.GMController.getOnTheFlyShapeForMetric(AI);if(AH.length>1){AL.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",AK.id,AD,{currValue:AG,options:AH,metricId:AJ});}else{AL.addRadioMenuGroup(AG,o(AJ,AF),AH,"checkMark",undefined,true);}},getReferenceLineSubMenu:function(AG,AK,AL,AF){var AM=mstrmojo.gm.EnumSubtype,AJ=AG.GMController.chartSubType;if(AL&&AJ===AM.PERCENT){return ;}var AN=AG.id,AH=AG.getAvailableRefLineTypes(AF)||[];if(AH.length>0){AK.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",AN,x,{metricId:AF,options:AH});}var AI=AG.getExistingRefLineOptions(AF)||[];if(AI.length>0){AK.addMenuItem(mstrmojo.desc(13659,"Edit Reference Line"),"xt",D.getEditRefLineHandler(AG,AF));AK.addSubMenuItem(mstrmojo.desc(13022,"Remove Reference Line"),"xt",AN,r,{metricId:AF,options:AI});}},reverseMapping:function l(AG){var AI={},AH,AF=AG.length;for(AH=0;AH<AF;AH++){AI[AG[AH]]=AH;}return AI;},longIntAnd:function(AG,AF){var AH;if(AG===AF){return AG;}if(AG>c||AF>c){throw new Error("Operand exceeds valid data range.");}if(AG<Z&&AF<Z){return AG&AF;}if(AG>=Z||AF>=Z){if(AG<AF){AH=AG;AG=AF;AF=AH;}}var AJ=Math.floor(AG/Z),AI=Math.floor(AF/Z),AL=AG-AJ*Z,AK=AF-AI*Z;return(AL&AK)+(AJ&AI)*Z;},longIntOr:function(AG,AF){var AH;if(AG===AF){return AG;}if(AG<Z&&AF<Z){return AG|AF;}if(AG<AF){AH=AG;AG=AF;AF=AH;}AH=this.longIntAnd(AG,AF);return AF-AH+AG;},parseNumeric:function(AF){return +AF||parseFloat(AF);},fillTextInDiv:function(AF,AO,AQ,AG,AR,AH,AT,AJ,AM){if(AG===undefined){AG=AF.offsetWidth;}if(AR===undefined){AR=AF.offsetHeight;}if(AJ===undefined){AJ=U.MIDDLE;}if(AM===undefined){AM=p.MIDDLE;}if(AH===undefined){AH=false;}var AN,AP,AL,AS=AH?"gm-text-body":"gm-text-body-nowrap",AI=false,AK;AN=G.measureTextWidth(AQ,AT,6);AK=G.measureTextWidth("...",AT,6);if(AN>AG&&AK>AG){return ;}AL=document.createElement("div");AL.setAttribute("class",AS);AL.setAttribute("type",z.GM_TEXT_BODY);AL.identity=AO;G.applyStyles2DomNode(AL,AT);AL.innerHTML=AQ;AF.appendChild(AL);if(AH){if(AN>AG){AP=AL.offsetHeight;}else{AP=G.measureTextHeight(AQ,AT,4);}}else{AP=G.measureTextHeight(AQ,AT,4);AI=AN>AG;}AN=Math.min(AN,AG);AL.style.width=AN+"px";if(AH){AI=AL.scrollWidth>AN||AL.scrollHeight>AP;}if(AI){AL.setAttribute("title",AQ);}else{AL.setAttribute("title","");}switch(AJ){case U.LEFT:AL.style.left="0px";AL.style.textAlign="left";break;case U.MIDDLE:AL.style.left=((AG-AN)>>1)+"px";break;case U.RIGHT:AL.style.right="0px";AL.style.textAlign="right";break;}switch(AM){case p.TOP:AL.style.top="0px";break;case p.MIDDLE:AL.style.top=((AR-AP)>>1)+"px";break;case p.BOTTOM:AL.style.bottom="0px";break;}},updateTextColorAndAlignment:function(AF,AH,AI){var AJ=AF.firstChild,AK=AJ.style,AG=AF.clientWidth,AL=AJ.clientWidth,AN=AF.clientHeight,AM=AJ.clientHeight;AK.left="auto";AK.right="auto";switch(AH){case U.LEFT:AK.left="0px";break;case U.MIDDLE:AK.left=((AG-AL)>>1)+"px";break;case U.RIGHT:AK.right="0px";break;}AK.top="auto";AK.bottom="auto";switch(AI){case p.TOP:AK.top="0px";break;case p.MIDDLE:AK.top=((AN-AM)>>1)+"px";break;case p.BOTTOM:AK.bottom="0px";break;}},toggleDisplay:function(AG,AF){if(!AG){return ;}if(AF){AG.style.display="block";}else{AG.style.display="none";}},isTrendLineAvailableForMetric:function(AJ,AK,AN){var AU=false,AR=mstrmojo.gm.EnumSubtype,AM=m.gm.EnumShape,AS=AJ.GMController,AO=AS.chartSubType,AT=AJ.model.data.dz,AH=AT.XAxis,AF=AT.YAxis,AI=AT.BreakBy,AL=AT.SliceBy,AP=AN,AG=AS.getChartInfo(),AQ=AS.getBreakByAttrsID().length>0||(AG.isABL&&((AH.MetricNames!==undefined)||(AF.MetricNames!==undefined)||(AI.MetricNames!==undefined)||(AL.MetricNames!==undefined)));if(AP===undefined){AP=AS.getOnTheFlyShapeForMetric(AK);}if(AG.isABL&&AO===AR.PERCENT){AU=true;}if(AQ&&!AG.isBubbleOrScatter&&(AP===AM.BAR||AO===AR.STACKED||(AO===AR.AUTO&&AP===AM.AREA))){AU=true;}if(AG.isABL){if(AH.TemplateUnit&&AH.TemplateUnit.length>1){AU=true;}if(AF.TemplateUnit&&AF.TemplateUnit.length>1){AU=true;}if(AH.TemplateUnit===undefined&&AF.TemplateUnit===undefined){AU=true;}}AU=AU||this.isIgnoredMetric(AJ,AK);return !AU;},isTrendLineAvailableForAnyMetric:function(AH){var AG=AH.model.data.gsi.mx,AF;for(AF in AG){if(this.isTrendLineAvailableForMetric(AH,AF)){return true;}}return false;},isIgnoredMetric:function(AI,AG){var AH=AI.GMController,AJ,AF;if(AH.bubbleSeriesNum!==undefined){AJ=AH.getMetricsOnYAxis();AF=AJ.indexOf(AG);if(AF>=AH.bubbleSeriesNum){return true;}AJ=AH.getMetricsOnXAxis();AF=AJ.indexOf(AG);if(AF>=AH.bubbleSeriesNum){return true;}}return false;},getAxisMetricsInfo:function(AK){var AF=AK.model.data.dz,AL=AK.model.data.gsi.mx,AG,AH,AJ=[];if(!AF||!AF.ColorBy||!AL){return AL;}var AI=function(AM){return(AM&&AM.TemplateMetric)||[];};AG=AI(AF.YAxis).concat(AI(AF.XAxis));n.forEach(AL,function(AM){AH=false;n.forEach(AG,function(AN){if(AM.did===AN.id){AH=true;return false;}});if(AH){AJ.push(AM);}});return AJ;},isInvalidTemplate:function N(AI){if(AI.eg){return false;}var AG=AI.gts;var AF=AG.row.length===0&&AG.col.length===0;n.forEach(AG.row,function(AL){if(AL.otp===-1){AF=true;}});var AK=AG.col;if(AK.length>0){var AH,AJ=AK.length-1;for(AH=0;AH<AJ;AH++){if(AK[AH].otp===-1){AF=true;}}}return AF;},isNoData:function(AF){return AF.eg!==undefined;},getInvalidTemplateErrMsg:function(AF){return AF||mstrmojo.desc(12094,"The Graph Matrix requires:")+"\n"+mstrmojo.desc(12095,"- at least one attribute to be placed on the row or column axis")+"\n"+mstrmojo.desc(12096,"- all metrics to be placed on the column axis, below any attributes");},initColorPickerBtnWithGradientDir:function(AG,AH){mstrmojo.func.override({showPickerForCurrentMode:function AF(){this._super();if(this.pickerMode===2&&typeof this.color!=="object"){var AI=this.gradientOrientation,AJ=AH.getChartInfo().dirc===mstrmojo.gm.EnumABLDirection.VERTICAL;AI.set("selectedIndex",n.find(AI.items,"id",AJ?0:1));}}},AG.colorPicker);},generateToolTipContent:function(AO,AJ,AF,AK,AM,AL,AR){var AI,AG,AH,AN,AP,AQ;for(AI=AO;AI<AJ;AI++){AG=AK[AI];AN=AM[AI];if(AI>AO){AH=AK[AI-1];AP=AM[AI-1];if(AG.id===AH.id){if(AN===""){continue;}if(AG.fid===AH.fid&&AN.idx===AP.idx){continue;}if(AG.n===""){AL[AL.length-1].v+=L+AN.n;continue;}}}if(AR){AL.push({n:AG.n,tid:AG.id,v:AN.n});}else{AQ=AF===undefined?AG.isRowAttribute:AF;AL.push({n:AG.n,tid:AG.id,v:AN.n,eid:AN.id,tp:AG.otp,axis:AQ?1:2,tui:AG.tui,ui:AG.tui,dpt:AG.tui+1,at:AN.at,isRowAttribute:AQ,dei:AN.dei,o:AN.o});}}},getAttributeFormCnt:function(AF){var AG;if((AF.fcnt===undefined||AF.fcnt===null)&&AF.fs){AF.fcnt=AF.fs.length||1;}if(AF.fcnt!==undefined&&AF.fcnt!==null){AG=AF.fcnt;}else{if(AF.t===47){AG=1;}else{AG=AF.cs!==undefined?AF.cs:AF.rs;}}return AG;},isTrueForBoolValue:function(AF){return AF===true||AF==="true";},computeTicksForAxis:function(AI,AG){var AH=AI.mOptions,AJ,AF={mTicks:[]};if(AG){AJ=P.copy(AH);P.copy(AG,AJ);}else{AJ=AH;}if(AI.mIsPercent){S.call(AI,AF,AJ);return AF;}if(AJ.mUseLogarithmicScale){O.call(AI,AF,AJ);return AF;}if(AI.mGraphMajorType===b.GMT_BUBBLE&&AI.mTripleId.mObjectId===u.DssGraphZBody){AF.mMinTick=AJ.mUseMinValue?AJ.mAxisMinValue:AI.mMinimum;AF.mMaxTick=AJ.mUseMaxValue?AJ.mAxisMaxValue:AI.mMaximum;if(AI.mMinTick>=AI.mMaxTick){AF.mMaxTick=AF.mMinTick+1;}return AF;}if(!AJ.mUseMaxValue&&!AJ.mUseMinValue){q.call(AI,AF,AJ);}else{if(AJ.mUseMaxValue&&AJ.mUseMinValue){C.call(AI,AF,AJ);}else{if(AJ.mUseMaxValue){E.call(AI,AF,AJ);}else{h.call(AI,AF,AJ);}}}return AF;},computeTicksForLogScale:function(AH){var AG=AH.mOptions,AF={mTicks:[]};O.call(AH,AF,AG);return AF;},destroyDisposable:function(AF,AG){if(AG){n.removeItem(AF.disposables,AG);AG.destroy();}},handleDestroy:function(AI,AH){if(!AI){return ;}var AJ,AG=0,AF=AI.disposables,AK=(AF&&AF.length)||0;while(AG<AK){AJ=AF[AG];if(!AJ.scriptClass||AH.indexOf(AJ.scriptClass)<0){this.destroyDisposable(AI,AJ);}if(AF.length<AK){AK=AF.length;}else{AG++;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMUtility","mstrmojo.color","mstrmojo.ui.menus.EditorConfig","mstrmojo.ui.menus.ToolbarEditorConfig","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.ui.editors.controls.LineConfigGroup","mstrmojo.ui.editors.controls.FillConfigGroup","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.AdvancedColorPicker");var Z=mstrmojo,I=Z.dom,K=Z.hash,a=Z.array,A=Z.css,i=Z.VisEnum.ControlType,h=mstrmojo.gm,F=mstrmojo.color,U=h.GMUtility,R=Z.VisUtility,j=h.FormatingPropertyTag,e=mstrmojo.models.FormatModel,c=e.ENUM_PROPERTY_NAMES,P=mstrmojo.chart.enums.EnumFontStyle,f=mstrmojo.VisEnum.GMLegendFormatingPropertyTag,G=mstrmojo.VisEnum.NetworkLegendFormattingCategory,V=mstrmojo.ui.editors.controls.AdvancedColorPicker,W={GLOBAL:"glb",FORMATTING:"fmt"},D={FONT_COMP:"FntCmp",FONT_FAMILY:"FntFml",FONT_STYLE:"FntStyle",FONT_SIZE:"FntSz",FONT_COLOR:"FntClr",LINE_COMP:"LnCmp",SHOW:"Shw",COLOR:"Clr",STYLE:"Style",THICKNESS:"Thk"};function N(q,n){var m=this.widget,o=m.domToolbarPH,p=this;m._lastOpened=null;o.innerHTML="";document.body.appendChild(o);A.toggleClass(o,mstrApp.getThemeClassName(),true);this.configureLegendPopup(n,o);m.toolEditor=n.newInstance({unrender:function(){}});m.toolEditorClosefn=function(r){var t=r.target,s=m.toolEditor.domNode;if(!I.contains(s,t,true,s)&&!R.isHostedPopupNode(t,"class",true,document.body)){p.hideToolbar();}};I.attachEvent(document.body,"mousedown",m.toolEditorClosefn,true);m.openPopup(this.widget.toolEditor);A.toggleClass(document.body,"hasToolbarPopup",true);}function L(n,m){var o;if(m===W.GLOBAL){o=this.readGlobalProperty(n);}else{if(m===W.FORMATTING){o=this.widget.getPropertiesOfFormatable();}}if(n.slice(-3)===D.COLOR){if(n!==j.COLOR_SQUARE_COLOR||m!==W.GLOBAL){o=U.decodeColor(o);}}return o;}function Q(n,m){var o=this;if(m===W.GLOBAL){return function(q){var p=L.call(o,n,W.GLOBAL);if(n===j.COLOR_SQUARE_COLOR){p=p.color;}if(!K.equals(q,p)){if(n.indexOf(D.COLOR)!==-1){q=U.encodeColor(q);}o.writeGlobalProperty(n,q);}};}return function(r,p){var q=L.call(o,n,W.FORMATTING);if(r!==q){if(n.indexOf(D.COLOR)!==-1){r=F.encodeColor(r);}o.widget.writeFormatableProperties(n,r,p);}};}function O(n,m){n=n||[];m=m||"";a.forEach(n,function(o){o.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",cssClass:m,children:n};}function d(n,o){n=n||[];var m=new mstrmojo.Box({children:n,cssText:o});return m;}function B(q,r,m){var p="white-space: nowrap; width: 50px;";if(q===mstrmojo.desc(3905,"Background")||q===mstrmojo.desc(6242,"Color")){p="white-space: nowrap;";}else{if(q===mstrmojo.desc(2885,"Fill")){p="white-space: nowrap; margin-right: 9px;";}}var n=new mstrmojo.Label({text:q}),o=d(n,p);return O([o,r],m);}function b(n,o,m){var p=this;n=n||{};if(n.propNames===undefined){n.propNames=o;}n.onGroupValueChange=function(q,s,r){if(s!==r&&s!==undefined){(Q.call(p,q,m))(s,r);}};return n;}function S(o,n,m){var p=this;a.forEach(n,function(q){var r=L.call(p,q,m);if(r!==undefined){o.setChildValue(q,r);}});}function C(m,p,o,n){n=b.call(this,n,p,o);K.copy({width:"140px",height:"22px",colorPickerHostWithin:true},n);var q=new mstrmojo.ui.editors.controls.FillConfigGroup(n);if(q){q.iniChildrenComp(p);S.call(this,q,p,o);}if(typeof m==="string"){return B(m,q,(n||[]).rowContainerCSSClass);}return q;}function Y(o,n,m){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolBoxBackgroundFill",children:[C.call(this,mstrmojo.desc(2885,"Fill"),o,n,K.copy({rowContainerCSSClass:"mstrmojo-ui-rowContainer"},m))]}]});}function k(q,o,s,r,n){var p=L.call(this,s,r),t=this;var m=new mstrmojo.ui.editors.controls.ColorPickerButton({showGradient:!!n,isHostedWithin:true,width:"40px",selectedValue:p,showNoFill:false,postselectedValueChange:function(u){(Q.call(t,s,r))(u.value,u.valueWas);}});if(q){m.alias=q;}if(typeof o==="string"){return B(o,m);}return m;}function l(n){var m;if(n.listenToUpdateColorMap instanceof Function){m=n.listenToUpdateColorMap(function(){n.raiseEvent({name:"colorByColorChange",type:"invalidateCache"});if(m&&n.detachUpdateColorMapListener instanceof Function){n.detachUpdateColorMapListener(m);}});}}function g(o,n){var m=L.call(this,o,n),p=this;return new mstrmojo.ui.menus.ToolbarEditorConfig({cssClass:"cbsquare-colorpicker",contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker({showAutomatic:!m.isDefaultColor,color:m.color,colorChanged:function(q){q=(this.showAutomatic&&q===V.VAL_AUTOMATIC)?"default":q;l(p.widget);(Q.call(p,o,n))(q,m.color);p.hideToolbar();},colorCanceled:function(){p.hideToolbar();}})]});}function T(s,n){var m={},r=L.call(this,n+D.FONT_STYLE,W.GLOBAL),p=L.call(this,n+D.FONT_COLOR,W.GLOBAL),o=L.call(this,n+D.FONT_FAMILY,W.GLOBAL),q=L.call(this,n+D.FONT_SIZE,W.GLOBAL);if(r!==undefined){m[c.FONT_WEIGHT]=(!isNaN(r)&&((r&P.FS_BOLD)>0));m[c.FONT_STYLE]=(!isNaN(r)&&((r&P.FS_ITALIC)>0));m[c.UNDERLINE]=(!isNaN(r)&&((r&P.FS_UNDERLINE)>0));m[c.LINE_THROUGH]=(!isNaN(r)&&((r&P.FS_STRIKETHROUGH)>0));}if(p!==undefined){m[c.COLOR]=p;}if(q!==undefined){m[c.FONT_SIZE]=q;}if(o!==undefined){m[c.FONT_FAMILY]=o;}s.setFormatSource(m);}function H(n,m){var o=null;if(m.indexOf(D.FONT_FAMILY)!==-1){o=n.fontFamily;}else{if(m.indexOf(D.FONT_STYLE)!==-1){o=n.fontStyle;}else{if(m.indexOf(D.FONT_SIZE)!==-1){o=n.fontSize;}else{if(m.indexOf(D.FONT_COLOR)!==-1){o=n.fontColor;}}}}return o;}function M(p,o,m){var n={bold:P.FS_BOLD,italic:P.FS_ITALIC,underline:P.FS_UNDERLINE,strikeout:P.FS_STRIKETHROUGH},q=this;o.forEach(function(r){var s=H(p,r);if(s){s.propName=r;if(r.indexOf(D.FONT_STYLE)!==-1){s.postselectionChange=function(t){var x=t.added,y=s.items[(x&&x[0]!==undefined)?x[0]:t.removed[0]],w=!!x,u=L.call(q,r,m),z=(u===undefined?0:u);if(w){z=z|n[y.css];}else{z=z&(~n[y.css]);}s.parent.raiseFormatValueChange(r,z,u);};}else{if(r.indexOf(D.FONT_FAMILY)!==-1){s.postselectedIndexChange=function(t){var x=t.value,w=t.valueWas;if(x!==w){var u=s.items;s.parent.raiseFormatValueChange(r,u[x].id,u[w]&&u[w].id);}};}else{if(r.indexOf(D.FONT_SIZE)!==-1){s.postselectedValueChange=function(t){var w=parseInt(t.value,10)+"pt",u=parseInt(t.valueWas,10)+"pt";if(w!==u){s.parent.parent.raiseFormatValueChange(r,w,u);}};}else{s.postselectedValueChange=function(t){s.parent.parent.raiseFormatValueChange(r,t.value,t.valueWas);};}}}}});}function X(n,q,p,o){var t=this;o=o||{};if(o.propNames===undefined){o.propNames=q;}if(o.onGroupValueChange===undefined){o.onGroupValueChange=function(u,x,w){if(x!==w&&x!==undefined){(Q.call(t,u,W.GLOBAL))(x,w);}};}var m={cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,width:"381px",height:"22px"};o=K.copy(m,o);var s=new mstrmojo.ui.editors.controls.CharacterGroup(o),r=H(s,j.LEGEND_FONT_COLOR);r.showNoFill=false;M.call(this,s,q,p);T.call(this,s,n);return s;}function J(q,p){var u=p.firstChild,z=u?u.offsetWidth:0,n=u?u.offsetHeight:0,r=document.body.offsetWidth,y=document.body.offsetHeight,s=10,t=5,x=5;if(u){u.style.left="0";u.style.right="auto";u.style.top="0";u.style.bottom="auto";}var w={w:z,h:0};var o=n>0;if(o){w.h=n;}else{return false;}if(o){p.style.left=q.x+"px";p.style.top=q.y-n-s/2+"px";}if(q.x+w.w>r){p.style.left=q.x-z+"px";}if(o){var m=0;if(q.y-n-s/2<t){m=t;p.style.top=m+"px";}else{if(q.y+s/2>y){m=Math.max(y-s-n,t);p.style.top=m+"px";}}}}function E(m,p,o,n){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[X.call(this,m,p,o,n)]}]});}mstrmojo._FormateVisLegend=mstrmojo.provide("mstrmojo._FormateVisLegend",{_mixinName:"mstrmojo._FormateVisLegend",widget:null,readGlobalProperty:undefined,writeGlobalProperty:undefined,configureLegendPopup:undefined,init:function(m){this.widget=null;if(this._super){this._super(m);}if(this.widget&&!this.widget.domToolbarPH){var n;n=document.createElement("div");n.setAttribute("class","gm-menu-placeholder");this.widget.domToolbarPH=n;}},handleRMCOnLegend:function(y){var r=y.getTarget(),s=y.e,w={x:s.pageX,y:s.pageY},u=r.getAttribute("type"),n,t,p,q=this,o=this.widget;y.cancel();y.preventDefault();if(mstrApp.isAppStatePresentation()||!mstrApp.allowWebDashboardDesign()){return ;}var x,m=function(z){switch(z){case i.LGD_COLORBOX_CTN:case i.LGD_COLORBOX:if(z===i.LGD_COLORBOX){r=r.parentNode;}t=r.firstChild.identity;if(t&&t.comb){this.widget.colorSqureIdentity=t;this.selectColorBox(r,this.fmtMode);n=g.call(this,j.COLOR_SQUARE_COLOR,W.GLOBAL);w=this.adjustColorPickerPos(r);if(!w.alignLeft){p=n.ENUM_CORNERS;n.setAlignment(p.BOTTOM_LEFT,p.TOP_RIGHT);}}break;case i.LGD_TITLE:case i.LGD_TEXT:this.selectText(true);var AA=[j.LEGEND_FONT_SIZE,j.LEGEND_FONT_FAMILY,j.LEGEND_FONT_STYLE,j.LEGEND_FONT_COLOR];n=E.call(this,"lgd",AA,W.GLOBAL);x="lgd";break;default:this.selectLegendBody();var AB=[j.LEGEND_BG_COLOR,j.LEGEND_BG_FILL_TRANSPARENCY];n=Y.call(this,AB,W.GLOBAL);x="lgd";break;}if(n){N.call(this,w,n);if(!!x){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");o.parent.selectVIUnit();var AC=o.edtModel._targetPulldown;if(AC){AC.selectItemByField("v",x);}}}};m.call(this,u);J.call(this,w,this.widget.domToolbarPH);},hideToolbar:function(){var n=this.widget,o=n.domToolbarPH,q=o.firstChild,m=o.parentNode;if(q){o.removeChild(q);}if(m){m.removeChild(o);}var p=n.toolEditor;if(p){p.unrender=function(){p._super();};p.destroy();p.unrender=function(){};delete n.toolEditor;A.toggleClass(document.body,"hasToolbarPopup",false);A.toggleClass(o,mstrApp.getThemeClassName(),false);}if(n.toolEditorClosefn){I.detachEvent(document.body,"mousedown",n.toolEditorClosefn,true);delete n.toolEditorClosefn;}},highlightText:function(m){throw new Error("subclass need to implement highlightText function");}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.VisEnum","mstrmojo.VisLegend","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.gm.GMIdentities","mstrmojo.gm.GMUtility","mstrmojo.array","mstrmojo.string","mstrmojo.hash","mstrmojo._FormateVisLegend","mstrmojo.ui._HasScroller");var Ae=mstrmojo,Ab=Ae.gm,z=Ae.dom,Aa=Ae.css,R=Ae.hash,AM=Ae.VisUtility,Z=Ab.GMUtility,O=mstrmojo.array,X=mstrmojo.string,e=Ab.ColorSquareIdentity,C=Ae.VisEnum.ControlType,i=Ab.EnumLegendSlot,AK=Ab.EnumDockPosition,m=Ab.EnumLegendSlot,AE=Ab.EnumIdentityType,AC=Ab.EnumShape,AW=Ae.VisEnum.GMLegendDataType,I=mstrmojo.desc(13966,"Size by:"),u="px",E=1.35,Y=0.75,V=5,J=20,k=J,AD=5,A=5,w=16,d=15,G=16,AH=20,q=15,Ac=1,y="setAttribute",j=3,g=2,P=8,p=15,AR=14,s=1,Q=2,f=4,Af=8,Ad=16,K=10,AT=3,AI=50,AO=-3,r=5,AP="gm-legend-lock-icon",AL=mstrmojo.desc(14442,"This metric has its axis scale set to custom min and max values"),N="http://www.w3.org/2000/svg",t="\u2026",M=/[ \-]/;function AQ(Al,An,Ag,Ao){if(!Al){return ;}var Ai,Ar,Aj,Aq,Am=Al.style,As=An===AK.TOP,Ah=An===AK.BOTTOM,Ap=An===AK.LEFT,Ak=An===AK.RIGHT;if(As||Ah){Ai=Ag;Ar=1;Aj=-1;Aq=AO;if(Ah){Aq+=Ao;}}else{if(Ap||Ak){Ai=1;Ar=Ao;Aq=-1;Aj=AO;if(Ak){Aj+=Ag;}}}Am.cssText="left:"+Aj+u+";top:"+Aq+u+";width:"+Ai+u+";height:"+Ar+u+";";}function H(Ah){var Ag=String(Ah);return Ag.indexOf(" ")>=0||Ag.indexOf("-")>=0;}function W(Ai,Ah,Aj){var Ag=typeof Ai==="string"?Z.restoreSpecialChars(Ai):Ai;return AM.measureTextWidth(Ag,Ah,Aj);}function AG(Ak,Aj,Ah,Ag){var Ai=W(Aj,Ah,K);Ak.setAttribute("measureWidth",Ai);if(Ai>Ag){Ai=Ag;}else{Ak.style.overflow="visible";}Ak.setAttribute("displayWidth",Ai);Ak.style.width=Ai+u;return Ai;}function B(Ah){var Ag;if(Ah.textContent&&typeof (Ah.textContent)!==undefined){Ag=Ah.textContent;}else{Ag=Ah.innerText;}return Ag;}function a(Ai){var Ah=Ai.getAttribute("measureWidth"),Ag=Ai.getAttribute("displayWidth");if(!Ah){Ai[y]("title","");}Ah=parseFloat(Ah,10);Ag=parseFloat(Ag,10);if((Ah-Ag)>0.1){Ai[y]("title",B(Ai));}else{Ai[y]("title","");}}function AJ(Ak,Ag,Ah,Aj){var Ai=document.createElement("div");Ai[y]("class","gm-legend-underLine");Ai.style.width=Aj-K+u;Ai.style.left=Ag+5+u;Ai.style.top=Ah+u;Ak.appendChild(Ai);}function AV(Aj,Ag,Ah){var Ai=document.createElement("div");Ai[y]("class","gm-legend-underLine-anchorPoint");Ai.style.left=Ag+u;Ai.style.top=Ah-3+u;Aj.appendChild(Ai);}function AF(Aj,Ag,Ah,Ai){AJ(Aj,Ag,Ah,Ai);AV(Aj,Ag,Ah);}function l(Ai,At,Ap,An,Ar){var Ao,Aj,Aq,Ag,As=Z.restoreSpecialChars(Ai.innerHTML),Am=As.length,Ak=0,Ah=Am,Al=false;if(Ai.scrollHeight>1.5*G){Ao=W(Ai.innerHTML,At,K);Aj=Ao-Ap+K;if(Aj>Ar){while((Ah-Ak)>1){Aq=(Ak+Ah)>>1;Ag=As.substring(0,Aq)+t;Ao=W(Ag,At,K);Aj=Ao-Ap+K;if(Aj>Ar){Ah=Aq;}else{Ak=Aq;}}Ai.innerHTML=X.encodeHtmlString(As.substring(0,Ak)+t,true);Ai[y]("title",As);Al=true;Ao=W(Ai.innerHTML,At,K);Aj=Ao-Ap+K;}AJ(Ai,0,An+G,(Aj<Ar)?Aj:Ar);}if(Ap>Ar){Ai[y]("title",As);}else{if(!Al){Ai[y]("title","");}}}function x(Ag,Ap,Al,Ah,Ao,Aq){var Ai,Ak,Am,An,Aj=document.createElement("div");Aj[y]("class","gm-legend-textcell");Aj[y]("type",C.LGD_TEXT);Aj.style.lineHeight=d+u;if(Ao){An=AG(Aj,Ap,Aq,Ao);}if(Ah&s){Ai=(AH+AR)/2+Al*AH;Am=w;}else{Ai=(q+AR)/2+Al*q;if(Ah&Af){if(Ah&Ad){Am=0;}else{Am=p;}}else{if(Ah&f){Am=P;}else{Am=0;}}}Ak=An||p+K;Aj.innerHTML=Ap;Aj.identity={objType:AE.LEGEND_TEXT};AF(Ag,Am,Ai,Ak);this.textDivs.push(Aj);Ag.appendChild(Aj);}function AY(Ag,Aj){var Ah,Al,Ak,Ai=0;if(Ag){Ak=Ag.elements;for(Ah=0,Al=Ak.length;Ah<Al;Ah++){Ai=Math.max(Ai,W(Ak[Ah].label,Aj,K));}Ai+=w+A*2+AT;}return Ai;}function U(Aj,Ai){var Am,Ag,Al,Ak=Aj.items,Ah=0;if(!Ak){return 0;}Am=Ak.length;Al=Aj.custMetrics;for(Ag=0;Ag<Am;Ag++){if(Al&&Al.indexOf(Ak[Ag])!==-1){Ah=Math.max(Ah,W(Ak[Ag],Ai,K)+P);}else{Ah=Math.max(Ah,W(Ak[Ag],Ai,K));}}return Ah;}function AN(Aj,Ai){var Ag,Al,Ak,Ah=0;if(Aj){Ak=Aj.elements;Al=Ak.length;if(Aj.caseFlag===1){Ah=U(Aj,Ai);}else{if(Aj.caseFlag===0){for(Ag=0;Ag<Al;Ag++){Ah=Math.max(Ah,W("Max: "+Ak[Ag].v,Ai,K));}Ah+=q*j;Ah=Math.max(Ah,U(Aj,Ai));}else{if(Aj.caseFlag===2){for(Ag=0;Ag<Al;Ag++){Ah=Math.max(Ah,W(Ak[Ag].v,Ai,K));}Ah+=q*Al+p;Ah=Math.max(Ah,U(Aj,Ai));}else{if(Aj.caseFlag===3){for(Ag=0;Ag<Al;Ag++){Ah=Math.max(Ah,W(Ak[Ag].v,Ai,K));}Ah+=q*r;}}}}Ah=Math.max(Ah,W(I,Ai,K));Ah+=A*3;}return Ah;}function c(Ar,Aj,Av){if(!Ar||!Ar.length||Ar.length<1){return 0;}var Ak,Ah,Au,Ag,An,Aq,Am,Ap,Ao,Ai,Al,At=k+2*Ac,As=At;for(Ak=0;Ak<Ar.length;Ak++){Am=Ar[Ak];if(Am.dataType===AW.COLOR_BY){Ap=Am.dataObj;if(Ap){Ai=2*AD+G;Au=Z.removeExtraSpace(Ap.item);Aq=W(Au,Av,K);if((Aq+2*A>Aj-2*Ac)&&H(Au)){Ai+=G;}Ag=Ap.elements;Ah=Ag.length;Ai+=A;Ai+=g;At+=Ai+AH*Ah;As+=Ai+(Ah>0?AH:0);}}else{if(Am.dataType===AW.SIZE_BY){Ao=Am.dataObj;if(Ao){Al=2*AD+G;Au=Z.removeExtraSpace(Ao.item);Aq=W(Au,Av,K);if((Aq+2*A>Aj-2*Ac)&&H(Au)){Al+=G;}An=Ao.caseFlag;if(An===1){Ah=0;}else{if(An===0){Ah=2;}else{if(Ao.caseFlag===2||An===3){Ah=Ao.elements.length;}}}Ah+=(Ao.items&&Ao.items.length)||0;Al+=q*Ah;Al+=A;Al+=g;At+=Al;As+=Al;}}}}return{height:At,minHeight:As};}function AZ(Ag,Ah){var Aj=0,Ai=0;O.forEach(Ag||[],function(Ak){var Al;if(Ak.dataType===AW.COLOR_BY){Al=AY(Ak.dataObj,Ah);if(Al>Aj){Aj=Al;}}else{if(Ak.dataType===AW.SIZE_BY){Al=AN(Ak.dataObj,Ah);if(Al>Ai){Ai=Al;}}}});return Math.max(Aj,Ai)+2*Ac;}function h(Ah,An,Al,Ak){var Ai=c(Ah,An,Ak),Ag=Ai.height,Am=Al-V*2,Aj={};Aj.autoCollapse=Ai.minHeight>Am;Aj.minHeight=Ai.minHeight;Aj.width=An;Aj.height=Math.min(Ag,Am);if(Ag>Am){Aj.cutBy=Ag-Am;}return Aj;}function F(Ah,Ai){var Aj=Ah.decodedColor||Ah.color,Ag;if(Aj.c1){Ag=Aa.buildGradient(Aj.or,Aj.c1,Aj.c2);Ai.style[Aa.convertCssToCamelCase(Ag.n)]=Ag.v;}else{Ai.style.backgroundColor=Aj;}if(Ah.image){Ai.style.backgroundImage=Ah.image;}Ai.identity=new e({objType:AE.COLOR_SQUARE,parentIdentity:this.identity,token:Ah.token,decodedColor:Ah.decodedColor,encodedColor:Ah.encodedColor,isDefaultColor:Ah.isDefaultColor});}function AS(){var Av,As,Aq,Ag,Ar,Ax,Ah,Ao,Am,Aj,Az=document,Ay=this.triBtn,Au=this.closeBtn,Al=this.cbContainer,Ai=this.sb1Container,At=this.sb2Container,An=this.cbTableContainer,Ak=null,Aw=this.height-k-A-2*Ac,Ap=this.width-2*A-2*Ac;Ay[y]("class","gm-legend-tri-button-collapsed");if(this.autoCollapse){Ay[y]("title",mstrmojo.desc(13682,"There is not enough space to display the legend"));}else{Ay[y]("title",mstrmojo.desc(13683,"Maximize Legend"));}Au.style.display="none";this.splitter.style.display="none";this.domNode.style.overflow="hidden";for(Av=0;this.dataArray&&Av<this.dataArray.length;Av++){Ag=this.dataArray[Av];if(Ag.dataType===AW.COLOR_BY){Ak=Ag.dataObj;break;}}Al.style.display=Ak?"block":"none";Ai.style.display="none";At.style.display="none";if(Ak){Aq=Ak.elements;As=Aq.length;Ar=this.cbTitle;Ar.style.display="none";Al.style.top=k+u;Al.style.width=Ap+u;An.style.top="0px";Ax=this.cbTable;Ax.innerHTML="";for(Av=0;Av<As;Av++){Ah=Az.createElement("tr");Ao=Az.createElement("td");Aj=Az.createElement("div");Am=Az.createElement("div");Aj[y]("class","gm-legend-colorbox-ctn-div");Aj[y]("type",C.LGD_COLORBOX_CTN);Aj[y]("title",Aq[Av].label);Am[y]("class","gm-legend-colorbox-div");Am[y]("type",C.LGD_COLORBOX);F.call(this,Aq[Av],Am);Ah[y]("class","gm-legend-tr");Ah.style.height=AH+u;Ao[y]("class","gm-legend-colorbox");Aj.appendChild(Am);Ao.appendChild(Aj);Ah.appendChild(Ao);Ax.appendChild(Ah);if(Ax.offsetHeight+AH>Aw){break;}}Ax.style.top="0px";Ax.style.marginLeft="0px";An.style.top=A+u;An.style.height=Ax.offsetHeight+u;}Al.style.height=Aw+u;}function n(Ai,Ah,Ak,Ag){var Aj=document.createElementNS(N,"circle");Aj.setAttribute("cx",Ah);Aj.setAttribute("cy",Ak);Aj.setAttribute("r",Ag);Aj.setAttribute("class","gm-legend-sizeby-circle");Ai.appendChild(Aj);}function AB(Ai,Aj,Am,Ah,Al,An,Ak){var Ag=document.createElementNS(N,"line");Ag.setAttribute("x1",Aj);Ag.setAttribute("y1",Am);Ag.setAttribute("x2",Ah);Ag.setAttribute("y2",Al);Ag.style.strokeWidth=An;if(Ak){Ag.setAttribute("class",Ak);}Ai.appendChild(Ag);}function AX(Ah,Av){var Au,Ai,Ak,Al,Aj,Ag,At,Am,Aw,An,Ar=Math.PI,Ao=Av.elements,Ap=Ao.length,Aq=Ap*q,As=Ah.getContext("2d"),Ax={LINE_COLOR:"#b0b0b0",MIN_WIDTH:1,MAX_WIDTH:10},Ay=AM.getPropertyByPath(this,"widget.model.data.visName")||AM.getPropertyByPath(this,"widget.model.data.vis.vn");switch(Ay){case"GraphMatrixVisualizationStyle":if(this.shapeType===AC.SQUARE||this.shapeType===AC.TICK||this.shapeType===AC.LINE||this.shapeType===AC.BAR||this.shapeType===AC.AREA||this.shapeType===AC.RECTANGLE){An="rectangle";}else{An="circle";}break;case"VIHeatMapVisualizationStyle":An="rectangle";break;default:An="circle";break;}switch(Av.caseFlag){case 0:As.save();if(mstrApp.getThemeClassName().indexOf("dark")>=0){As.strokeStyle="rgba(116, 116, 117, 0.7)";As.fillStyle="rgba(116, 116, 117, 0.7)";}else{As.strokeStyle="rgba(188, 188, 189, 0.7)";As.fillStyle="rgba(188, 188, 189, 0.7)";}Aq=q*j;Aw=Math.floor(q*0.75+0.5);Ai=Math.floor(Aw/3.5+0.5);if(An==="circle"){Al=Aw+1;Aj=q;As.beginPath();As.arc(Al,Aj,Aw,0,2*Ar,false);As.fill();As.stroke();Al=2*Al+2*Ai;Aj=Math.floor(0.53*q+0.5);As.beginPath();As.arc(Al,Aj,Ai,0,2*Ar,false);As.fill();As.stroke();}else{Al=1;Aj=q-Aw;As.beginPath();As.fillRect(Al,Aj,2*Aw,2*Aw);Al=2*Aw+2+Ai;Aj=Math.floor(0.53*q-Ai+0.5);As.beginPath();As.fillRect(Al,Aj,2*Ai,2*Ai);}As.translate(0.5,0.5);As.lineWidth=1;As.strokeStyle="#9C9C9C";Al=2*Aw+3*Ai+3;Aj=Math.floor(0.53*q+0.5);As.beginPath();As.moveTo(Al,Aj);As.lineTo(Aq,Aj);As.stroke();Al=2*Aw+2;Aj=Math.floor(1.53*q-Ai+0.5);As.beginPath();As.moveTo(Al,Aj);As.lineTo(Al+Ai,Aj+Ai);As.lineTo(Aq,Aj+Ai);As.stroke();As.restore();break;case 1:break;case 2:Ak=parseInt(Ao[0].diameter,10);Ak=Math.min(Ak,Aq);As.fillStyle="#ADADAC";As.strokeStyle="#ADADAC";if(An==="circle"){Al=Aq>>1;Aj=Al;As.arc(Al,Aj,Ak>>1,0,2*Ar,false);As.fill();As.stroke();}else{Al=(Aq-Ak)>>1;Aj=Al;As.rect(Al,Aj,Ak,Ak);As.fill();As.stroke();}break;case 3:Ag=Ax.MIN_WIDTH;At=(Ap===1?0:(Ax.MAX_WIDTH-Ax.MIN_WIDTH)/(Ap-1));Aq=Ah.width;Am=q;Al=0;Aj=q/2;As.strokeStyle=Ax.LINE_COLOR;for(Au=0;Au<Ap;Au++){As.lineWidth=Ag;As.beginPath();As.moveTo(Al,Aj);As.lineTo(Aq-Al,Aj);As.stroke();Aj+=Am;Ag+=At;}break;default:break;}}function AU(Ah,Ap){var An=1,Ag,Al=1.5*G,Ao=Ah.innerHTML,Am=Z.restoreSpecialChars(Ao),Ai=Am.split(M),Aq,Aj;var Ak=function(Ar){Aj=Am[Ar];return Aj!==undefined?Aj:"";};if(Ah.scrollHeight>Al){if(!Ai[0]){return 0;}Ag=Ai[0]+Ak(Ai[0].length);while(Ai[An]!==undefined){Aq=Ag+Ai[An];Aq+=Ak(Aq.length);Ah.innerHTML=Z.replaceSpecialChars(Aq);if(Ah.scrollHeight>Al){break;}Ag=Aq;An++;}Ah.innerHTML=Ao;}else{Ag=Am;}return W(Ag,Ap,K);}function b(Aw,Au,Av,Aq){var At,Ai,Al,Ak,Ap,As,Ao=Au.elements,Ar=Ao.length,An=[],Ax=document,Ag=Ax.createDocumentFragment(),Aj=false,Am=this.styles,Ah=Av;switch(Aq){case 0:if(Ar>0){An.push({v:"Min: "+Ao[Ar-1].v});An.push({v:"Max: "+Ao[0].v});Ar=2;}break;case 1:Ao=Au.items;O.forEach(Ao,function(Ay){An.push({v:Ay});});break;case 3:An=Ao;break;default:An=Ao;Aj=true;break;}Ar=An.length;for(At=0;At<Ar;At++){Ai=Ax.createElement("tr");Ai[y]("class","gm-legend-tr2");Ai.style.height=q+u;if(Aj){Al=Ax.createElement("td");x.call(this,Al,An[At].sign,At,Q|Af|Ad);Al[y]("class","gm-legend-sign");Ai.appendChild(Al);Ah-=p;}Ak=Ax.createElement("td");Ak[y]("class","gm-legend-desc");if(Au.custMetrics&&Au.custMetrics.indexOf(An[At].v)!==-1){x.call(this,Ak,An[At].v,At,Q|f,Ah-P,Am);As=parseInt(Ak.lastChild.style.width,10);Ap=Ax.createElement("div");Ap.setAttribute("class",AP);Ap.setAttribute("title",AL);Ak.appendChild(Ap);Ap.style.top=(q-8)/2+At*q+u;Ak.lastChild.style.marginLeft=As+u;}else{if(Aj){x.call(this,Ak,An[At].v,At,Q|Af,Ah,Am);}else{x.call(this,Ak,An[At].v,At,Q,Ah,Am);}}Ai.appendChild(Ak);Ag.appendChild(Ai);}Aw.appendChild(Ag);}function T(){var Ai="."+AP,Ag=this.domLegend.querySelectorAll(Ai),Ah;O.forEach(Ag,function(Aj){Ah=Aj.parentNode;if(Ah){Ah.removeChild(Aj);}});}function S(){var A9,A1,BE=0,BF,Aw,A3,Ax,Aj,A7,BA,An,BD,A8,Ag=this.width-2*Ac,Ar=Ag-2*A,Al=document,Ai=this.triBtn,A2=this.closeBtn,A0=this.cbContainer,As=this.cbTableContainer,BG=this.sb1Container,Am=this.sb2Container,Aq,Ao,Ak,Ap,A5,Au,A4=this.cutBy,Az=k,BB=0,Ay=this.styles,A6,BC,Av=(G+AR)/2,Ah,At;Ai[y]("class","gm-legend-tri-button");Ai[y]("title",mstrmojo.desc(13684,"Minimize Legend"));A2.style.display="block";A2[y]("title",mstrmojo.desc(12002,"Hide Legend"));this.updateSplitter();T.call(this);this.domNode.style.overflow="visible";A0.style.display="none";BG.style.display="none";Am.style.display="none";for(A1=0;this.dataArray&&A1<this.dataArray.length;A1++){Ao=this.dataArray[A1];A5=null;Au=null;if(Ao.dataType===AW.COLOR_BY){A5=Ao.dataObj;if(A5){A0.style.display="block";Ax=Z.removeExtraSpace(A5.item);Aj=A5.elements;A9=Aj.length;A0.style.top=Az+u;A0.style.width=Ar+u;BD=0;if(BB===0){Aa.addClass(this.sepLine1,"toggleHide");BB++;}BF=this.cbTitle;BF.style.display="block";AG(BF,Ax,Ay,Ar);BF.innerHTML=X.encodeHtmlString(Ax,true);BD+=BF.offsetHeight+2*AD;Ah=AU(BF,Ay);l(BF,Ay,Ah,Av,Ar);AF(BF,0,Av,(Ah<Ar)?Ah:Ar);Aw=this.cbTable;Aw.style.display="block";Aw.style.width=(Ar-AT)+u;Aw.style.marginLeft=AT+u;Aw.innerHTML="";Aw.appendChild(this.fillColorByTable(A5,0));A7=AH*A9+1;As.style.top=BD+u;Aw.style.display="table";BD+=A7+A;if(A4){BD-=A4;A7-=A4;}A0.style.height=BD+u;As.style.height=A7+u;Az+=BD+g;}}else{if(Ao.dataType===AW.SIZE_BY){Au=Ao.dataObj;if(Au){BE++;if(BE===1){Ak=BG;Ap=this.sb1Title;A3=this.sb1MetricNamesTable;Aw=this.sb1DataTable;Aq=this.sb1Canvas;}else{Ak=Am;Ap=this.sb2Title;A3=this.sb2MetricNamesTable;Aw=this.sb2DataTable;Aq=this.sb2Canvas;}Ak.style.display="block";Ax=Z.removeExtraSpace(Au.item);Aj=Au.elements;A9=Aj.length;Ak.style.top=Az+u;Ak.style.width=Ar+u;BD=0;if(BB===0){Aa.addClass(this.sepLine2,"toggleHide");BB++;}if(Au.caseFlag===0){BA=j*q;An=2*q;}else{if(Au.caseFlag===3){BA=r*q;An=A9*q;}else{BA=A9*q;An=BA;}}BF=Ap;BF.innerHTML=X.encodeHtmlString(Ax,true);BC=Au.custMetrics&&Au.custMetrics.indexOf(Ax)!==-1;if(BC){At=Ar-P;}else{At=Ar;}AG(BF,Ax,Ay,At);if(BC){A6=Al.createElement("div");A6.setAttribute("class",AP);A6.setAttribute("title",AL);Ak.appendChild(A6);A6.style.top=(BF.offsetHeight-8)/2+AD+g+u;A6.style.left=BF.offsetWidth+"px";}Ah=AU(BF,Ay);l(BF,Ay,Ah,Av,At);AF(BF,0,Av,(Ah<At)?Ah:At);BD+=BF.offsetHeight+2*AD;A8=Ar;A3.innerHTML="";if(Au.items&&Au.items.length>0){A3.style.display="block";b.call(this,A3,Au,A8,1);}else{A3.style.display="none";}A3.style.top=BD+u;A3.style.left="0"+u;A3.style.width=A8+u;BD+=A3.offsetHeight;if(BA>0){A8-=BA+A;}Aw.innerHTML="";if(Au.elements&&Au.elements.length>0){Aw.style.display="block";b.call(this,Aw,Au,A8,Au.caseFlag);}else{Aw.style.display="none";}Aq.style.position="absolute";Aq.style.top=BD+u;Aq.style.marginLeft=A+u;Aw.style.top=BD+u;Aw.style.left=(BA+A)+u;Aw.style.width=A8+u;BD+=Aw.offsetHeight+A;Ak.style.height=BD+u;Aw.style.display="table";Aq.width=BA;Aq.height=An;AX.call(this,Aq,Au);Az+=BD+g;}}}}}function o(){var Ag,Ah=this.textDivs,Ai=Ah.length;for(Ag=0;Ag<Ai;Ag++){a(Ah[Ag]);}}mstrmojo.gm.GMLegend=mstrmojo.declare(mstrmojo.VisLegend,[mstrmojo._FormateVisLegend,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.gm.GMLegend",cssClass:"gm-legend",dropZoneHighlightCss:"gm-legend-slot",dockedPositions:[{pos:m.LEFT_TOP},{pos:m.LEFT_MIDDLE},{pos:m.LEFT_BOTTOM},{pos:m.RIGHT_TOP},{pos:m.RIGHT_MIDDLE},{pos:m.RIGHT_BOTTOM}],dockPos:AK.LEFT,GMW:0,GMH:0,isMinimal:false,shapeType:undefined,legendMarkup:'<div class="gm-legend-tri-button"></div><div class="gm-legend-close-button"></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><div class="gm-legend-table-container"><table class="gm-legend-table"></table></div></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-resizer-v" draggable="false"></div><div class="gm-legend-resizeRect"></div>',init:function AA(Ah){this.styles={};this.cutBy=null;this.dataArray=null;this.textDivs=[];var Ai=Ah.placeholder,Ag=Ai.style;if(Ai){this.cssClass=Ai.getAttribute("class");if(!this.cssClass){this.cssClass="";}if(Ah.hasOwnProperty("width")===false){Ah.width=(Ag&&Ag.width)||Ai.clientWidth;}if(Ah.hasOwnProperty("height")===false){Ah.height=(Ag&&Ag.height)||Ai.clientHeight;}if(Ah.hasOwnProperty("left")===false){Ah.left=Ai.offsetLeft;}if(Ah.hasOwnProperty("top")===false){Ah.top=Ai.offsetTop;}}this._super(Ah);},setupScrollNodes:function L(){this.scrollNode=this.cbTableContainer;},getSplitterDockPos:function(){return(this.currDockedPositionIdx<3)?AK.RIGHT:AK.LEFT;},updateAlignClass:function(){var Ak=this.getDockedPosition(),Al=Ak&&Ak.pos,Ai=(Al===m.RIGHT_MIDDLE||Al===m.RIGHT_TOP||Al===m.RIGHT_BOTTOM||Al===m.RIGHT),Ag=this.domLegend,Ah=this.domNode,Aj=this.resizeRect;if(Ai){Aa.removeClass(Ag,"gm-align-left");Aa.addClass(Ag,"gm-align-right");Aa.toggleClass(Ag,"gm-legend-alignRight",true);Aa.toggleClass(Ag,"gm-legend-alignLeft",false);Aa.toggleClass(Ah,"gm-legend-alignRight",true);Aa.toggleClass(Ah,"gm-legend-alignLeft",false);Aa.toggleClass(Aj,"gm-legend-alignRight",true);Aa.toggleClass(Aj,"gm-legend-alignLeft",false);}else{Aa.removeClass(Ag,"gm-align-right");Aa.addClass(Ag,"gm-align-left");Aa.toggleClass(Ag,"gm-legend-alignRight",false);Aa.toggleClass(Ag,"gm-legend-alignLeft",true);Aa.toggleClass(Ah,"gm-legend-alignRight",false);Aa.toggleClass(Ah,"gm-legend-alignLeft",true);Aa.toggleClass(Aj,"gm-legend-alignRight",false);Aa.toggleClass(Aj,"gm-legend-alignLeft",true);}},postBuildRendering:function(){this._super();var As=this.styles,Au=this.domNode,Aj=this.domLegend.childNodes,An=Aj[2],Al=Aj[3],At=Aj[4],Ax={objType:AE.LEGEND};this.addSlots({triBtn:Aj[0],closeBtn:Aj[1],cbContainer:Aj[2],sepLine1:An.firstChild,cbTitle:An.childNodes[1],cbTableContainer:An.childNodes[2],cbTable:An.childNodes[2].firstChild,sb1Container:Al,sepLine2:Al.firstChild,sb1Title:Al.childNodes[1],sb1MetricNamesTable:Al.childNodes[2],sb1DataTable:Al.childNodes[3],sb1Canvas:Al.childNodes[4],sb2Container:At,sepLine3:At.firstChild,sb2Title:At.childNodes[1],sb2MetricNamesTable:Al.childNodes[2],sb2DataTable:At.childNodes[3],sb2Canvas:At.childNodes[4],splitter:Aj[5],resizeRect:Aj[6]});Ab.GMLegend.applyHTML5Props(As);this.bgColor=As.background||As.backgroundColor||"transparent";AM.applyStyle2Legend(As,Au,this.domLegend);var Am=this.getSplitterDockPos(),Aw=this.width-2*A-2*Ac,Ao=this.cbTitle,Ah=Ao.style,Ai=this.sb1Title,Ak=this.sb2Title,Av=Ai.style,Ag=Ak.style,Ar=this.sepLine1,Aq=this.sepLine2,Ap=this.sepLine3;Ar.style.width=Aw+u;Aq.style.width=Aw+u;Ap.style.width=Aw+u;Ah.lineHeight=G+u;Av.lineHeight=G+u;Ag.lineHeight=G+u;Ah.maxHeight=2*G+u;Av.maxHeight=2*G+u;Ag.maxHeight=2*G+u;Ao.identity={objType:AE.LEGEND_TEXT,parentIdentity:Ax};Ai.identity={objType:AE.LEGEND_TEXT,parentIdentity:Ax};Ak.identity={objType:AE.LEGEND_TEXT,parentIdentity:Ax};this.dockPos=Am;this.identity=Au.identity=Ax;this.updateAlignClass();},feedData:function(Ag,Ah){this.dataArray=Ag;this.isMinimal=Ah;this.textDivs=[];Ab.GMLegend.applyHTML5Props(this.styles);this.autoCollapseLegend();if(Ah||this.autoCollapse){AS.call(this);this.draggable=false;}else{S.call(this);this.draggable=true;}o.call(this);this.updateScrollbars();},autoCollapseLegend:function(){this.autoCollapse=this.minHeight&&(this.minHeight>(this.GMH-V*2));},updateColorBySquare:function(Ai){var Aj,Ak,Ah,Ag;if(Ai){Ag=this.domNode.querySelectorAll(".gm-legend-colorbox-div");Aj=Ai.elements;Ak=Math.min(Aj.length,Ag.length);for(Ah=0;Ah<Ak;Ah++){F.call(this,Aj[Ah],Ag[Ah]);}}},updateContainerSize:function(Ag,Ah){this.GMW=Ag;this.GMH=Ah;this.calculateDockedPositions(Ag,Ah);},updateAfterResize:function(){Ab.GMLegend.applyHTML5Props(this.styles);var Al=0,Ak=this.width,Am=this.cbContainer,Ao=this.sb1Container,Ai=this.sb2Container,Aj=this.sepLine1,Ah=this.sepLine2,Ag=this.sepLine3,An=Ak-2*A-2*Ac;O.forEach(this.dataArray||[],function(Ap){if(Ap.dataType===AW.COLOR_BY){if(Ap.dataObj){if(Am){Am.style.width=An+u;}}}else{if(Ap.dataType===AW.SIZE_BY){if(Ap.dataObj){Al++;if(Al===1&&Ao){Ao.style.width=An+u;}if(Al===2&&Ai){Ai.style.width=An+u;}}}}});if(Aj){Aj.style.width=An+u;}if(Ah){Ah.style.width=An+u;}if(Ag){Ag.style.width=An+u;}this.domLegend.style.width=this.width+u;this.domLegend.style.height=this.height+u;},updateStyle:function(Ag){this.styles=Ag;this.bgColor=Ag.background||Ag.backgroundColor||"transparent";AM.applyStyle2Legend(Ag,this.domNode,this.domLegend);},updateTitleLineHeight:function(){var Ah=this.cbTitle,Ak=Ah.style,Ai=this.sb1Title,Ag=this.sb2Title,Al=Ai.style,Aj=Ag.style;Ab.GMLegend.applyHTML5Props(this.styles);Ak.lineHeight=G+u;Al.lineHeight=G+u;Aj.lineHeight=G+u;Ak.maxHeight=2*G+u;Al.maxHeight=2*G+u;Aj.maxHeight=2*G+u;},getSplitterPosition:function(Ai){var Ah=Ai.src.startPos+Ai.tgt.pos.x-Ai.src.pos.x,Ak=Ai.src.posInfo,Aj=Ak&&Ak.min,Ag=Ak&&Ak.max;if(Aj!==undefined){Ah=Math.max(Ah,Aj);}if(Ag!==undefined){Ah=Math.min(Ah,Ag);}return Ah;},positionResizeRect:function(Ag,Ah){var Aj=Ag.src.posInfo.dockPosition===AK.LEFT,Ak=Ah-AO,Al=Aj?Ak:0,Ai=Aj?this.width-Ak:Ak;this.resizeRect.style.left=(Al-1)+u;this.resizeRect.style.width=(Ai-2)+u;},updateLegendSlot:function(Aj,Ag){var Ai=this.getDockedPosition(),Ah=Ai&&Ai.pos;if(Ah!==Aj){this.currDockedPositionIdx=Ag;this.dockPos=this.getSplitterDockPos();this.updateDropZonePosition();this.updateAlignClass();this.updateSplitter();this.widget.onLegendDropZoneChange(this.getDockedPosition());}},ondragstart:function(Ag){var Ai=Ag.src.e.target,Ah=Ag.src.data;if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(false);}if(Ai===this.splitter){Ag.src.startPos=Ai.offsetLeft;Ag.src.posInfo=this.getSplitterInfo(Ai);this.positionResizeRect(Ag,Ag.src.startPos);Aa.addClass(this.resizeRect,"resizing");}else{this.cbTableScrollTop=this.cbTableContainer.scrollTop;this._super(Ag);if(!Ah||!Ah.isScrollBar){this.clearSelectedTargets();Aa.toggleClass(this.domNode,"gm-legend-hover",false);Aa.toggleClass(this.domLegend,"active",false);this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background=this.bgColor;this.isDragging=true;}}},ondragmove:function D(Ag){var Ai=Ag.src.e.target,Ah;if(Ai===this.splitter){Ah=this.getSplitterPosition(Ag);Ai.style.left=Ah+u;this.positionResizeRect(Ag,Ah);}else{this._super(Ag);}},ondragend:function(Ag){var Ai=Ag.src.e.target;if(Ai===this.splitter){Aa.removeClass(this.resizeRect,"resizing");this.splitterMoved(this.getSplitterPosition(Ag)-Ag.src.startPos,Ag.src.posInfo);}else{this._super(Ag);var Ah=Ag.src.data;if(!Ah||!Ah.isScrollBar){this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background="transparent";this.isDragging=false;}delete this.cbTableScrollTop;}if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},onscroll:function(){var Ah,Al,Ak=this.scrollNode.scrollTop,Aj,Ai,Ag;if(this.prevScrpllTop===Ak){return ;}Al=(this.dataArray&&this.dataArray.length)||0;for(Ah=0;Ah<Al;Ah++){Ai=this.dataArray[Ah];if(Ai.dataType===AW.COLOR_BY){Ag=Ai.dataObj;break;}}if(Ag){Aj=this.cbTable;Aj.innerHTML="";Aj.appendChild(this.fillColorByTable(Ag,Math.floor(Ak/AH)));this.prevScrpllTop=Ak;this.scrollNode.scrollTop=Ak;this._super();}},fillColorByTable:function(Aw,Am){var Ax,Au,Ai,Al,Ak,An,Ao,Ap=this.styles,Ag,As=this.cutBy,Aq=this.width-2*Ac-2*A,Ar,Aj,Ah,Ay,At;Ar=Aw.elements;Au=Ar.length;Ag=document.createDocumentFragment();Aj=Aq-w-AT;Ah=0;Ay=AH*Au;At=Am*AH;function Av(Az){Ai=document.createElement("tr");Al=document.createElement("td");Ai.style.height=Az+u;Al[y]("class","gm-legend-colorbox");Ai.appendChild(Al);Ag.appendChild(Ai);}if(Am>0){Av(At);}for(Ax=Am;Ax<Au;Ax++){Ai=document.createElement("tr");Al=document.createElement("td");Ak=document.createElement("td");An=document.createElement("div");Ao=document.createElement("div");An[y]("class","gm-legend-colorbox-ctn-div");An[y]("type",C.LGD_COLORBOX_CTN);Ao[y]("class","gm-legend-colorbox-div");Ao[y]("type",C.LGD_COLORBOX);F.call(this,Ar[Ax],Ao);Ai[y]("class","gm-legend-tr");Ai.style.height=AH+u;Al[y]("class","gm-legend-colorbox");Ak[y]("class","gm-legend-desc");x.call(this,Ak,Ar[Ax].label,Ax,s,Aj,Ap);An.appendChild(Ao);Al.appendChild(An);Ai.appendChild(Al);Ai.appendChild(Ak);Ag.appendChild(Ai);Ah+=AH;if(As&&(As+Ah-AH)>Ay){Av(Ay-Ah-At);break;}}return Ag;},calculateDockedPositions:function(Ah,Ak){var Aj,Am=this.getWidth(),Ag=this.getHeight(),Ai=this.dockedPositions,Al=function(An){switch(An.pos){case i.LEFT_TOP:An.x=0;An.y=V;break;case i.LEFT_MIDDLE:An.x=0;An.y=Math.max(V,(Ak-Ag)>>1);break;case i.LEFT_BOTTOM:An.x=0;An.y=Math.max(0,Ak-Ag-V);break;case i.RIGHT_TOP:An.x=Ah-Am;An.y=V;break;case i.RIGHT_MIDDLE:An.x=Ah-Am;An.y=Math.max(V,(Ak-Ag)>>1);break;case i.RIGHT_BOTTOM:An.x=Ah-Am;An.y=Math.max(0,Ak-Ag-V);break;}};for(Aj=0;Aj<Ai.length;Aj++){Al(Ai[Aj]);}this.updateDropZonePosition();},updateDropZonePosition:function(){var Ag=this.getDockedPosition(),Ah=this.dropZoneNode.style;Ah.left=Ag.x+u;Ah.top=Ag.y+u;},updateDropZoneNode:function(Ag){this._super(Ag);this.dockPos=this.getSplitterDockPos();this.updateSplitter();},onmouseover:function(Ag){var Ai=this.domLegend,Am=Ag.getTarget(),Aj=Am.getAttribute("type"),Al=this.widget,Ah;if(this.isDragging){return ;}var Ak=R.copy(this.styles);Ak.opacity+=0.4;AM.applyStyles2DomNode(this.domNode,Ak);if(z.contains(Ai,Am,true)){Aa.addClass(Ai,"active");}if(Aj===C.LGD_COLORBOX){Am=Am.parentNode;Aj=Am.getAttribute("type");}if(Aj===C.LGD_COLORBOX_CTN){Ah=Am.firstChild.identity;if(!Ah||!Ah.comb){return ;}Aa.toggleClass(Am,"hover-colorsquare",true);return ;}if(Al.formattingMode){switch(Aj){case C.LGD_TITLE:case C.LGD_TEXT:Aa.toggleClass(Ai,"hover-txt",true);break;default:Aa.toggleClass(this.domNode,"gm-legend-hover",true);break;}}},onmouseout:function(Ah){var Aj=this.domLegend,Ag=Ah.e.toElement||Ah.e.relatedTarget,Am=Ah.getTarget(),Ak=Am.getAttribute("type"),Al=this.widget,Ai;AM.applyStyles2DomNode(this.domNode,this.styles);if(!z.contains(Aj,Ag,true)){Aa.removeClass(Aj,"active");}if(Ak===C.LGD_COLORBOX){Am=Am.parentNode;Ak=Am.getAttribute("type");}if(Ak===C.LGD_COLORBOX_CTN){Ai=Am.firstChild.identity;if(!Ai||!Ai.comb){return ;}Aa.toggleClass(Am,"hover-colorsquare",false);return ;}if(Al.formattingMode||Al.isOnFormattingMode){switch(Ak){case C.LGD_COLORBOX_CTN:case C.LGD_COLORBOX:break;case C.LGD_TITLE:case C.LGD_TEXT:Aa.toggleClass(Aj,"hover-txt",false);break;default:Aa.toggleClass(this.domNode,"gm-legend-hover",false);break;}}},onclick:function(Ag){var Aj=Ag.getTarget(),Ah=Aj.getAttribute("type"),Ai=this.widget;if(Aj===this.triBtn){if(!this.autoCollapse){this.raiseEvent({name:"gm-legend-clicked",action:(this.isMinimal?"restore":"minimize")});}}else{if(Aj===this.closeBtn){this.raiseEvent({name:"gm-legend-clicked",action:"close"});}else{if(Ah===C.LGD_COLORBOX){Aj=Aj.parentNode;Ah=Aj.getAttribute("type");}if(Ai.formattingMode||Ai.isOnFormattingMode){if(Ah===C.LGD_COLORBOX_CTN){this.selectColorBox(Aj,true);}else{if(Ah===C.LGD_TEXT||Ah===C.LGD_TITLE){this.selectText();}else{this.selectLegendBody();}}}else{this.clearSelectedColorBox();}}}z.stopPropogation(null,Ag.e);},attachClearEvent:function(){if(this.clearSelectTargetfn){return ;}var Ah=this,Ag=this.domLegend;this.clearSelectTargetfn=function(Al){var Ak=Al.target,Ai=Ah.widget.toolEditor,Aj;if(!z.contains(Ag,Ak,true,Ag)){if(Ai){Aj=Ai.domNode;if(!z.contains(Aj,Ak,true,Aj)){Ah.clearSelectedTargets();}}else{Ah.clearSelectedTargets();}}};z.attachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);},clearSelectedColorBox:function(){var Ag=this.selectedColorBox;if(Ag){Aa.toggleClass(Ag,"select",false);Aa.toggleClass(Ag,"selectfmt",false);this.selectedColorBox=undefined;}},clearSelectedText:function(){Aa.removeClass(this.domNode,"select-txt");},clearSelectedLegendBody:function(){Aa.removeClass(this.domNode,"gm-legend-select");},clearSelectedTargets:function(){this.clearSelectedColorBox();this.clearSelectedText();this.clearSelectedLegendBody();if(this.clearSelectTargetfn){z.detachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);delete this.clearSelectTargetfn;}},selectColorBox:function(Ai,Ah){var Ag=Ai.firstChild.identity;if(!Ag||!Ag.comb){return ;}this.clearSelectedText();this.clearSelectedLegendBody();if(this.selectedColorBox!==Ai){this.clearSelectedColorBox();this.selectedColorBox=Ai;if(Ah){Aa.toggleClass(Ai,"selectfmt",true);}else{Aa.toggleClass(Ai,"select",true);}this.attachClearEvent();}},selectText:function(){this.clearSelectedColorBox();this.clearSelectedLegendBody();Aa.addClass(this.domNode,"select-txt");this.attachClearEvent();},selectLegendBody:function(){this.clearSelectedColorBox();this.clearSelectedText();Aa.addClass(this.domNode,"gm-legend-select");this.attachClearEvent();},adjustColorPickerPos:function(Ag){var Aj=z.position(Ag),Ah=0,Ai={};if(this.currDockedPositionIdx<3){Ai.x=Aj.x+Aj.w+Ah;Ai.alignLeft=true;}else{Ai.x=Aj.x-Ah;Ai.alignLeft=false;}Ai.y=Aj.y+Aj.h+Ah;return Ai;},getSplitterInfo:function(Al){if(!Al){return{};}var Ah=this.dockPos,Ak={},Aj=this.width,Ag=AI,Ai=Math.floor(this.GMW/3);Ak.dockPosition=Ah;if(Ah===AK.LEFT){Ak.min=Math.min(Aj-Ai,0);Ak.max=Math.max(Aj-Ag,0);}else{if(Ah===AK.RIGHT){Ak.min=Ag;Ak.max=Ai;}}Ak.min+=AO;Ak.max+=AO;return Ak;},splitterMoved:function(Ag,Ah){if(Ag===0){return ;}if(Ah.dockPosition===AK.LEFT){Ag=-Ag;}this.raiseEvent({name:"gm-legend-resized",position:Ag});this.updateSplitter();if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},updateSplitter:function(){AQ(this.splitter,this.dockPos,this.width,this.height);this.resizeRect.style.height=this.height-2+u;}});Ab.GMLegend.applyHTML5Props=function(Ai){var Aj=parseInt(Ai.fontSize,10)||8,Ah;if(Ai.fontSize.indexOf("px")>=0){Aj=Math.floor(Aj*Y+0.5);}Ah=Math.floor(Aj/Y*E+0.5);G=Math.max(Aj,8)+9;AR=Math.floor(Aj/Y+0.5);d=Math.max(Ah,15);AH=Math.max(Ah,20)+2;q=Math.max(Ah,14)+2;Ac=parseInt(Ai.borderWidth,10)||1;var Ag=parseInt(Ai.tbHeight,10);k=isNaN(Ag)?J:Ag;};Ab.GMLegend.getLegendSize4MinMode=function(Ah,Ai){var Ak,Aj,Ag=k+2*Ac;if(Ah){Aj=Ah.elements;Ak=Aj.length;Ag+=AH*Ak;Ag+=2*A;}Ag=Math.min(Ag,Ai-V*2);return{width:w+5+7+2*Ac,height:Ag};};Ab.GMLegend.getLegendSize=function(Au,Aj,Ag,Am,Aw,An){var Ao,Ah,Av,Al,Ak=Am-V*2,As=0,Ai=0,Ar={},Aq,Ap,At;if(!Au||!Au.length||Au.length<1){return{};}if(Aj!==undefined){if(!An){An=Math.floor(AZ(Au,Aw)*Aj);}Al=Math.min(An,Math.floor(Ag/3));Al=Math.max(Al,50);return h(Au,Al,Am,Aw);}Al=Math.min(Math.floor(0.2*Ag),300);for(Ao=0;Ao<Au.length;Ao++){Ap=Au[Ao];if(Ap.dataType===AW.COLOR_BY){Aq=AY(Ap.dataObj,Aw);if(Aq>As){As=Aq;}}else{if(Ap.dataType===AW.SIZE_BY){Aq=AN(Ap.dataObj,Aw);if(Aq>Ai){Ai=Aq;}}}}Ah=Math.max(As,Ai)+2*Ac;Ar.width=Math.min(Ah,Al);Ar.scale=Ar.width/Ah;At=c(Au,Ar.width,Aw);Av=At.height;Ar.autoCollapse=At.minHeight>Ak;Ar.minHeight=At.minHeight;Ar.height=Math.min(Av,Ak);if(Av>Ak){Ar.cutBy=Av-Ak;}return Ar;};}());(function(){mstrmojo.requiresCls("mstrmojo.VisBase","mstrmojo.dom","mstrmojo.array","mstrmojo.num","mstrmojo.hash","mstrmojo.color","mstrmojo.css","mstrmojo.VisEnum","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.VisUtility","mstrmojo.util.ui._LassoSelector","mstrmojo.ui.menus._HasMenuPopup","mstrmojo._colorPalette","mstrmojo._VizSelectionHelper","mstrmojo.VisTooltip","mstrmojo.vi._MonitorsAppState","mstrmojo.heatmap.vi._HasHeatmapContextMenu","mstrmojo.netviz.ObservableModel","mstrmojo.chart.model.enums.EnumDSSDefaultFormats","mstrmojo.util.color","mstrmojo.vi.ui._IsDropTarget","mstrmojo.gm._SupportDndAsBlackBox","mstrmojo.ui.PopupConfig","mstrmojo.netviz.PropertyParser","mstrmojo.vi.viz.EnumDSSDropZones");mstrmojo.requiresClsP("mstrmojo.gm","GMLegend","EnumLegendSlot","GMUtility");mstrmojo.requiresClsP("mstrmojo.vi.ui.rw","_HasVisSelections","selectors._IsMultiUnitControl","selectors._BrushesAndHighlights","_XtabDE");mstrmojo.requiresClsP("mstrmojo.heatmap.vi","_SupportHeatmapBrushesAndHighlights","VisHeatMapColorTheme","VisHeatMapCanvas","VisHeatMapHighlightCanvas");var p=mstrmojo,BN=p.css,BS=p.array,AV=p.VisUtility,BQ=p.gm,V=BQ.GMLegend,AG=BQ.EnumLegendSlot,Az=BQ.GMUtility,A8=p.VisEnum.GMLegendDataType,H=p.chart.enums.EnumFontStyle,A6=p.VisEnum,BE=A6.GMLegendFormatingPropertyTag,A1=A6.LegendPropertyTag,Aw=A6.EnumLegendMode,t=A6.FormNameDisplayType,AM=A6.EnumColorRankMode,a=mstrmojo.hash,AZ=p.dom,Ai=p.util.color,K=p.color,F=mstrmojo.VisEnum.HEATMAP_PROPERTIES,A=mstrmojo.vi.viz.EnumDSSDropZones;var Ba=A6.SERVER_JSON_ERROR_TYPE;var Ap=["at","dei","dpt","o","tui","ui"],An=Ap.length;var k=["mousedown","mouseup","mousemove","mouseout","click","contextmenu"];var s=5;var A3={lgdBgFillClr:[15461355,1710618],lgdBgFillStyle:[0,0],lgdBgFillEff:[1,1],lgdBgFillTrans:[0,100],lgdFntSz:["8pt","8pt"],lgdFntFml:["Arial","Arial"],lgdFntStyle:[0,0],lgdFntClr:[6710886,16777215],lgdBdrShw:[false,false],lgdBdrClr:[11579568,5855577],lgdBdrThk:[1,1],lgdBdrStyle:[0,0],lm:[1,1],lwr:[undefined,undefined]},c;var AP=[{pos:AG.LEFT_TOP},{pos:AG.LEFT_MIDDLE},{pos:AG.LEFT_BOTTOM},{pos:AG.RIGHT_TOP},{pos:AG.RIGHT_MIDDLE},{pos:AG.RIGHT_BOTTOM}];var A9={VERTICAL:0,HORIZONTAL:1};var BR="Absolute value of ";var AF="-";var AX=false;function BU(){var Bd=this.modelData,Bi=Bd.gsi.mx,Bf=this.props.sizeMetricID,Bc=AV.findInArray(Bi,function(Bj){return Bj.did===Bf;}),Bg=false,Bh={min:-Infinity,max:Infinity},Be={min:Infinity,max:-Infinity};if(Bc===-1){return Bh;}this.dfs(this.root,function(Bk){if(Bk.entityChildren!==undefined){return ;}var Bm=Bk.aggValues||[],Bj=Bm[Bc],Bl=Bj.value;if(Bj.count===0||isNaN(Bl)){return ;}Bg=true;if(Bl<0){Be.hasNegativeValue=true;Bl=Math.abs(Bl);}Be.min=Math.min(Be.min,Bl);Be.max=Math.max(Be.max,Bl);});return Bg?Be:Bh;}function BI(Bd){if(!Bd||Bd.length!==3){return true;}var Bc=Bd[0];return Bd.slice(1).every(function(Be){return a.equals(Bc,Be);});}function BF(){var Bc=this;return{colorTheme:this.colorTheme,alias:"canvasObject",slot:"canvasSlot",root:this.root,width:this.heatMapSize.w,height:this.heatMapSize.h,attributes:this.levelAttributes,showMetric:this.props.showMetricValues,labelSetting:this.props.labelSize,isHeaderOnTop:this.props.isHeaderOnTop,fonts:this.props.fonts,bgColor:this.getSingleBackgroundColor(),isHeaderColorsModified:function(){return BI(Bc.props.headerColors);}};}function M(Bd,Bc){if(!Array.isArray(Bd)||!Array.isArray(Bc)){return false;}if(Bd===Bc){return true;}if(Bd.length!==Bc.length){return false;}return Bd.every(function(Be){return Bc.indexOf(Be)!==-1;});}function A7(Bd){Bd=Bd||[];var Be={name:"selectionChange",type:[],selectedEntities:Bd},Bc;if(Am.call(this)){Bc=BV(Bd);if(Bc.length>0){Be.type.push("shapeColor");Be.colorbyElements=Bc;}this.edtModelCbInitSelection=Bc;}this.raiseEvent(Be);}function BV(Bd){var Bc=Bd.filter(function(Be){var Bf=Be.colorByAttributeIds,Bg=Be.colorByElementIds;return Bf&&Bg&&Bf.length===Bg.length;}).map(function(Be){var Bf=Be.colorByAttributeIds,Bg=Be.colorByElementIds;return Bf.map(function(Bi,Bh){return{tid:Bi,eid:Bg[Bh]};});});return AV.arrayUnique(Bc,function(Be,Bf){Be=a.clone(Be);Bf=a.clone(Bf);return Az.isEqualComb(Be,Bf);});}function BD(Bi,Be){var Bg=this.getPropsInfo().attrColorByOpacity||{},Bh,Bd,Bc,Bf;Bi=Bi||[];Be=Be||[];Bh=Bi.join("|");Bd=Be.join("|");Bc=Bg[Bh]||{};Bf=Bc[Bd];if(Bf===undefined){Bf=100;}return Bf;}function AQ(Be){var Bc,Bd=AP.length;for(Bc=0;Bc<Bd;Bc++){if(Be===AP[Bc].pos){return Bc;}}return -1;}function Av(Bc){var Bd={};a.keyarray(A3).forEach(function(Be){Bd[Be]=A3[Be][Bc];});return Bd;}var y=A6.HEATMAP_LABEL_SIZE;var r={Sum:0,Avg:1,Cnt:2,Max:3,Min:4,GeoAvg:5,AESum:6};var Ar={Squarified:0,PivotByMiddle:1,SliceAndDice:2};var A0={Padding:5,headerOnTopPadding:5,MaxLegendHeight:60,AttributeColorByLegendWidth:140,LegendMenuEditorWidth:0,LegendMinWidth:15,LegendTickLength:4,LegendMaxBandWidth:400,LegendWidthPercent:0.9,LegendMinPadding:15,LegendBottomPadding:3,LegendGutter:5,LegendBandAspect:10,MinShowLabelDimension:6,DeletedListHeight:500,EditorDialogWidth:565,EditorDialogHeight:574,EditButtonWidth:0,EditButtonHeight:0,EditButtonRight:0,HeaderPixels:19};function BO(Bc){return Bc&&Bc.value!==undefined&&Bc.opacity!==undefined;}var BH=[{value:"#efefef",opacity:1},{value:"#e4e4e4",opacity:1},{value:"#e4e4e4",opacity:0.7}];var BW=["headerOnMiddle","headerOnTop.header","headerOnTop.cell"];var w=(function(){var Bc={headerOnMiddle:{scale:1,family:"Arial","heatmap-one-level-1":"14pt","heatmap-multi-level-1":"24pt","heatmap-two-level-2":"14pt","heatmap-multi-level-2":"20pt","heatmap-multi-level-3":"10pt"},headerOnTop:{header:{scale:1,family:"Arial","heatmap-level-1-header-on-top":"12pt","heatmap-level-2-header-on-top":"11pt","heatmap-level-3-header-on-top":"11pt"},cell:{scale:1,family:"Arial","heatmap-level-1-header-on-top":"12pt","heatmap-level-2-header-on-top":"12pt","heatmap-level-3-header-on-top":"12pt"}}};var Bd=a.clone(Bc);BW.forEach(function(Bf){var Be=AV.getPropertyByPath(Bd,Bf,{});Object.keys(Be).filter(function(Bg){return AV.strStartsWith(Bg,"heatmap-");}).forEach(function(Bg){Be[Bg]=AV.psPt2CssPt(Be[Bg]);});});return Bd;}());var Z={headerOnTop:{header:{max:16/12,min:8/11},cell:{max:16/12,min:8/11}},headerOnMiddle:{max:36/24,min:8/10}};var m="--";var L=16119287;function O(Bd,Bc){BW.forEach(function(Bh){var Bl=AV.getPropertyByPath(Bd,Bh,{}),Bg=AV.getPropertyByPath(Z,Bh),Bf=AV.getPropertyByPath(Bc,Bh,mstrmojo.emptyFn);var Bk,Be,Bi,Bj;if(Bg){Bk=Bl.scale;Be=Bg.max;Bi=Bg.min;Bj={valid:true,min:"gt",max:"lt"};if(Bk>=Be){Bk=Be;Bj.valid=false;Bj.max=Bk===Be?"eq":"gt";}if(Bk<=Bi){Bk=Bi;Bj.valid=false;Bj.min=Bk===Bi?"eq":"lt";}Bf(Bj,Bk);}});}function n(Bd,Bc){return Bd.reduce(function(Bi,Bh){var Be=Bh.split("."),Bf=Be.length,Bg=Bi;Be.forEach(function(Bk,Bj){if(Bj===Bf-1){Bg[Bk]=Bc(Bh);}if(Bg[Bk]===undefined){Bg[Bk]={};}Bg=Bg[Bk];});return Bi;},{});}function f(Be){var Bc=n(BW,function(){return false;}),Bd=n(BW,function(Bf){return function(Bj,Bh){var Bg=Bf.split("."),Bl=Bg.length-1,Bk=Bg[Bl],Bi=Bl===0?Bc:AV.getPropertyByPath(Bc,Bg.slice(0,Bl).join("."));if(Bi!==undefined){Bi[Bk]=Bj;}};});O(Be,Bd);this.raiseEvent({name:"fontScaleChange",type:"*",limits:Bc});}function At(Bu,Bv){var Bw=this,Bl={act:"updateTemplate",keyContext:Bw.k,actions:[]},Bq=Bl.actions,Bo=Bw.zonesModel,Bk=[AV.pick(Bu,["did","t"])],Bc={id:A.Grouping},Bg=Bw.getSelections(),Bh=Bw.modelData.datasetId,Bp="00000000000000000000000000000000",Bn=0,Be=3,Bt=Bv.headerDrill,Bm=Bv.keepParent;var Bi={datasetId:Bh,datasetType:Bh===Bp?Bn:Be};var Bj=Array.prototype.push;if(Bt&&Bg.length>0){var Bd=null,Bs=Bo.getZoneModelByZoneId(Bc.id),Br=Bg[Bg.length-1][0].tid;Bs.items.forEach(function(Bx){if(Bx.did===Br){Bd=Bx;return false;}});if(Bm){Bj.apply(Bq,Bo.getAddDropZoneUnitsActions(Bc,Bk,Bd?Bd.idx+1:0));}else{if(Bd){Bq.push(Bo.getRemoveDropZoneUnitAction(Bc,Bd));Bj.apply(Bq,Bo.getAddDropZoneUnitsActions(Bc,Bk,Bd.idx));}}}else{var Bf=Bo.getItemCountInZone(Bc.id);Bj.apply(Bq,Bo.getAddDropZoneUnitsActions(Bc,Bk,Bf,Bi));}return Bl;}function AE(Bf,Bg,Bh){var Be=Bh.needsCopy,Bd=Bh.invalidReplacement;if(Be&&Bf.total===undefined){Bf.avgTotal=Bf.total=Bf.geomProduct=Bf.max=Bf.min=Bf.value;Bf.positiveCount=Bf.value>0?1:0;}var Bc=!isNaN(Bg);Bf.value=Bc?Bg:Bd;Bf.count+=Bc?1:0;Bf.allValueCount+=1;this.aggregated=Bc;if(Bc){if(isNaN(Bf.total)){Bf.total=Bg;}else{Bf.total+=Bg;}if(isNaN(Bf.avgTotal)){Bf.avgTotal=Bg;}else{Bf.avgTotal+=Bg;}if(isNaN(Bf.max)){Bf.max=Bg;}else{Bf.max=Math.max(Bf.max,Bg);}if(isNaN(Bf.min)){Bf.min=Bg;}else{Bf.min=Math.min(Bf.min,Bg);}if(isNaN(Bf.geomProduct)){if(Bg>0){Bf.geomProduct=Bg;Bf.positiveCount++;}}else{if(Bg>0){Bf.geomProduct*=Bg;Bf.positiveCount++;}}Bf.count++;}}function Ay(Bc){return Bc.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');}var T={dftUnDel:0,dftDel:1,usrDel:2};var AS=(function(){var Bf=new window.DOMParser(),Bc,Bd;try{Bc=Bf.parseFromString("<","text/xml");Bd=Bc.getElementsByTagName("parsererror")[0].namespaceURI;return function(Bg){return Bg.getElementsByTagNameNS(Bd,"parsererror").length>0;};}catch(Be){return null;}}());function J(Bq){if(Bq.trim()===""){return{};}var Bc=new window.DOMParser(),Bl=false,Bo;try{Bo=Bc.parseFromString(Ay(Bq),"text/xml");Bl=AS&&AS(Bo);}catch(Bn){Bl=true;}if(Bl){return{};}var Bd=Bo.childNodes[0]||{},Bj=Bo.childNodes[0].childElementCount||0,Bm=Bd.firstElementChild,Be=Bm&&Bm.attributes,Bi=Be&&Be.length||0,Bk={},Bh=0,Bf,Bp,Bg;while(Bh<Bj){Bf=Bk;Be=Bm.attributes;for(Bg=0;Bg<Bi;Bg++){Bp=Be[Bg].value;if(Bg===(Bi-1)){Bf[Bp]=T.dftDel;}else{if(!Bf[Bp]){Bf[Bp]={};}Bf=Bf[Bp];}}Bh++;Bm=Bm.nextElementSibling;}return Bk;}function z(Bc){return parseInt(Bc,10);}function C(Bc){return !!(Bc&&Bc.toString()==="true");}function BG(){var Bc=this.modelData.dz,Bd=this.props;if(Bc){if(Bc.ColorBy&&Bc.ColorBy.TemplateMetric&&Bc.ColorBy.TemplateMetric[0]&&Bc.ColorBy.TemplateMetric[0].id){Bd.colorMetricID=Bc.ColorBy.TemplateMetric[0].id;this.setColorByType("metric");}else{Bd.colorMetricID=m;if(Bc.ColorBy&&Bc.ColorBy.TemplateUnit){Aa.call(this,Bd,Bc.ColorBy.TemplateUnit,Ao);this.setColorByType("attribute");}}if(Bc.SizeBy&&Bc.SizeBy.TemplateMetric&&Bc.SizeBy.TemplateMetric[0]&&Bc.SizeBy.TemplateMetric[0].id){Bd.sizeMetricID=Bc.SizeBy.TemplateMetric[0].id;}else{Bd.sizeMetricID=m;}}}function W(Bc){return AV.getPropertyByPath(Bc,"ghs.chs.items.0.items",[]);}function AJ(Bk){var Bj="",Bf=this.modelData,Be=Bf.ghs.chs.items,Bd=Be.length,Bg=Be[0].items.length,Bm=Bf.gts.col,Bh;if(Bk<0||Bk>=Bg){return"";}for(Bh=0;Bh<Bd;Bh++){var Bi=Be[Bh].items[Bk].idx;var Bl=Bm[Bh].es[Bi];var Bc=(Bl.oid!==undefined)?Bl.oid:Bl.id;Bj+=Bc+" ";}return Bj.slice(0,Bj.length-1);}function D(){var Be=this.modelData,Bf=W(Be).length,Bc=this.props.sizeMetricID,Bj=this.props.colorMetricID,Bk=[],Bh;this.metricArray=Bk;for(Bh=0;Bh<Bf;Bh++){Bk.push(AJ.call(this,Bh));}Bk.push(m);Bf++;this.sizeMetricIndex=0;this.colorMetricIndex=Bf>2?1:0;for(Bh=0;Bh<Bf;Bh++){if(Bc===Bk[Bh]){this.sizeMetricIndex=Bh;}if(Bj===Bk[Bh]){this.colorMetricIndex=Bh;}}if(Bc===undefined){Bc=Bk[this.sizeMetricIndex];this.props.sizeMetricID=Bc;}if(Bj===undefined){Bj=Bk[this.colorMetricIndex];this.props.colorMetricID=Bj;}if(this.props.sizeMetricID===m){this.props.sizeMetricEnabled=false;}if(this.props.colorMetricID===m){this.props.colorMetricEnabled=false;this.colorTheme.hasNoColorMetric=true;}if(AV.isOnExpressMode()&&this.props.colorMetricEnabled){this.setColorByType("metric");var Bd=Be.gsi.thresholds;if(!Bd||Object.keys(Be.gsi.thresholds).length===0){Be.gsi.thresholds=AV.getMockUpThresholds(this.props.colorMetricID,this.getMetricName(this.colorMetricIndex));}}this.props.hasColorInThresholds=false;if(this.isMetricColorByType()&&Be.gsi.thresholds[this.props.colorMetricID]!==undefined){var Bl=Be.gsi.thresholds[this.props.colorMetricID];for(Bh=0;Bh<Bl.length;Bh++){var Bi=Bl[Bh];if(Bi&&Bi.fmt){var Bg=Bi.fmt;if(Bg.bc===undefined&&typeof Bg.fc=="string"){Bi.fmt.bc=Bg.fc;Bi.fmt.bgs=Bi.fmt.bgs||0;this.props.hasColorInThresholds=true;}else{if(Bg.bc){this.props.hasColorInThresholds=true;break;}}}}}if(this.isMetricColorByType()&&this.props.sizeMetricEnabled===false&&this.props.hasColorInThresholds===false){this.props.showLegend=false;}}function N(Bd,Bc){return this.getAttributeIndex({id:Bd},Bc);}function Ao(Bf,Bh){var Bd=this.modelData,Be=Bd&&Bd.gts,Bg=Be&&Be.row,Bi=Bf.id,Bc=AV.isHierarchyObject(Bf)?"hid":"id";return AV.findInArray(Bg,function(Bj){return Bj[Bc]===Bi;},Bh);}function Aa(Bj,Be,Bc){var Bi=(Be||[]).length,Bf,Bg=[],Bd=[],Bk=this.modelData&&this.modelData.gts&&this.modelData.gts.row,Bh;for(Bf=0;Bf<Bi;Bf++){Bh=-1;while(true){Bh=Bc.call(this,Be[Bf],Bh+1);if(Bh!==-1){Bg.push(Bh);}else{break;}}}Bg.sort();for(Bf=0,Bi=Bg.length;Bf<Bi;Bf++){Bd.push(Bk[Bg[Bf]]);}Bj.colorAttributeIndexes=Bg;Bj.colorAttributes=Bd;}function AA(){var Bo=mstrmojo.netviz.PropertyParser,Bd=Bo.BooleanProperty,Bi=Bo.IntegerProperty,Bf=Bo.FloatProperty,Bc=Bo.StringProperty,Bg=Bo.JsonProperty;var Be=this.getProperties(),Bh={deletedList:{key:F.deletedList,type:Bg.preset({}),preSet:function(Br,Bs,Bp,Bq){return Br===undefined?Br:J(Br);}},showMetricValues:{key:F.showMetricValues,type:Bd.preset(false)},labelSize:{key:F.labelSize,type:Bi.preset(y.On),preSet:function(Br,Bs,Bp,Bq){return y[Br];},postGet:function(Br,Bt,Bp,Bq){var Bs="On";Object.keys(y).some(function(Bu){if(y[Bu]===parseInt(Br,10)){Bs=Bu;return true;}return false;});return Bs;}},showLegend:{key:F.showLegend,type:Bd.preset(true)},layout:{key:F.layout,type:Bi.preset(Ar.Squarified)},isHeaderOnTop:{key:F.headerType,type:Bd.preset(true),preSet:function(Br,Bt,Bp,Bq){if(Br===undefined){return ;}var Bs=Br.toString();if(Bs==="true"||Bs==="false"){return Bs==="true";}return z(Br)!==0;},postGet:function(Br,Bs,Bp,Bq){return Br==="true"?1:0;}},themeType:{key:F.themeType,type:Bc.preset("light"),preSet:function(Br,Bs,Bp,Bq){return z(Br)!==0?"light":"dark";},postGet:function(Br,Bs,Bp,Bq){return Br==="dark"?0:1;}},headerColors:{key:F.headerColors,type:Bg.preset(a.clone(BH)),postSet:function(Bt,Bu,Bq,Br){var Bs=true;if(Bt){if(!(Bt instanceof Array)){Bt=[Bt,Bt,Bt];}BS.forEach(Bt,function(Bv){if(!BO(Bv)){if(Bv&&Bv.color!==undefined){Bv.value=Ai.getCSSColorString(Bv.color);Bv.opacity=1;Bv.color=undefined;}else{Bs=false;return false;}}});}else{Bs=false;}var Bp=Bs?Bt:a.clone(BH);this.isDefaultHeaderColor=BI(Bp)===false;return Bp;}},fonts:{key:F.fonts,type:Bg.preset(a.clone(w)),postSet:function(Br,Bs,Bp,Bq){return a.mergeHashes(a.clone(w),Br);}},attrColorByOpacity:{key:F.attrColorByOpacity,type:Bg.preset({})},metricColorByOpacity:{key:F.metricColorByOpacity,type:Bf.preset(1)},lgdBgFillClr:{key:BE.LEGEND_BG_COLOR,type:Bg.preset(undefined)},lgdBgFillStyle:{key:BE.LEGEND_BG_FILL_STYLE,type:Bc.preset(undefined)},lgdBgFillEff:{key:BE.LEGEND_BG_FILL_EFFECT,type:Bc.preset(undefined)},lgdBgFillTrans:{key:BE.LEGEND_BG_FILL_TRANSPARENCY,type:Bc.preset(undefined)},lgdFntSz:{key:BE.LEGEND_FONT_SIZE,type:Bc.preset(undefined)},lgdFntFml:{key:BE.LEGEND_FONT_FAMILY,type:Bc.preset(undefined)},lgdFntStyle:{key:BE.LEGEND_FONT_STYLE,type:Bi.preset(undefined)},lgdFntClr:{key:BE.LEGEND_FONT_COLOR,type:Bi.preset(undefined)},lgdBdrShw:{key:BE.LEGEND_BORDER_SHOW,type:Bd.preset(undefined)},lgdBdrClr:{key:BE.LEGEND_BORDER_COLOR,type:Bc.preset(undefined)},lgdBdrStyle:{key:BE.LEGEND_BORDER_LINE_STYLE,type:Bc.preset(undefined)},lgdBdrThk:{key:BE.LEGEND_BORDER_THICKNESS,type:Bc.preset(undefined)},lm:{key:A1.LEGEND_MODE,type:Bi.preset(undefined)},LegendPosition:{key:A1.LEGEND_POSITION,type:Bi.preset(2)},lwr:{key:A1.SCALE_LEGEND_WIDTH,type:Bf.preset(undefined)}};var Bk=mstrmojo.heatmap.vi.VisHeatMapColorTheme.newInstance();Bk.initialize();this.colorTheme=Bk;this.props=new Bo().parse(Be,Bh)||{};var Bj=this.props;Bk.style=Bj.themeType;if(Bj.showLegend&&!Bj.colorByType&&Bj.sizeMetricID===m){Bj.showLegend=false;}Bj.sizeMetricEnabled=true;Bj.colorMetricEnabled=true;Bj.legendAsc=true;Bj.headerPixels=A0.HeaderPixels;var Bn="metric",Bm=this.modelData.dz,Bl;if(AV.isValidDropZone(Bm)){BG.call(this);}else{if(Be[F.metricList]){Bl=Be[F.metricList].split(",");if(Bl.length>=2){Bj.sizeMetricID=Bl[0]||m;if(z(Be[F.colorByType])===1){this.setColorByType("attribute");Bl.splice(0,1);Bj.colorAttributeIDs=Bl;Aa.call(this,Bj,Bl,N);}else{this.setColorByType(Bn);Bj.colorMetricID=Bl[1];}}else{Bj.sizeMetricID=m;}}}if(Be.rlp==="false"&&Be[F.absoluteFixed]){Bk.convertAbsoluteToBlend(this,Be);}Bk.isBlend=true;if(Be[F.blendColor]){Bk.isBlend=C(Be[F.blendColor]);}if(Be.gradientColors&&Be.bandColors){Bk.createDataProviderFromString(Be.gradientColors,Be.bandColors);}if(Be.rlp==="false"&&Be[F.absoluteFixed]){this.colorTheme.convertAbsoluteToBlend(this,Be);this.colorTheme.createDataProviderFromString(Be.gradientColors,Be.bandColors);}this.bgColor=this.getFormats()["background-color"]||Bk.getBackgroundColor();this.background={value:this.bgColor,opacity:1};D.call(this);}function e(){this.aggFunctions=[];var Bk=this.props,Bj=Bk.colorMetricID,Bm=this.aggFunctions,Bf=this.modelData,Bd=Bf.vp||{},Bg=this.metricArray,Bh=Bg.length-1,Bi;if(Bj!==m){var Bl=Bd["mle"+Bj]==="true";if(Bl){var Be=parseFloat(Bd["mlma"+Bj]);if(!isNaN(Be)){this.mlmax=Be;}Be=parseFloat(Bd["mlmi"+Bj]);if(!isNaN(Be)){this.mlmin=Be;}}}for(Bi=0;Bi<Bh;Bi++){var Bc="agf"+Bg[Bi];if(Bd[Bc]!==undefined){Bm.push(parseInt(Bd[Bc],10));}else{Bm.push(r.AESum);}}}function X(){e.call(this);var CQ=this.modelData,CV=this.props.deletedList,CF=(CQ.gts&&CQ.gts.row)||[],CJ=CF.length,Bl=(CQ.gvs&&CQ.gvs.items)||[],CB=(CQ.ghs&&CQ.ghs.rhs&&CQ.ghs.rhs.items)||[],CC=CB.length,Bq=W(CQ).length,Bs=AV.range(0,Bq).map(AV.hasValidValueInMetric.bind(this,this)),B9=this.colorMetricIndex,Be={max:-Infinity,min:Infinity};if(CJ<=0&&!AV.isOnExpressMode()){this.setError(null,Ba.NO_TEMPLATE_UNIT);return ;}if(AV.isOnExpressMode()&&(!AV.hasOnlyMetricsOnColumn(CQ)||!AV.hasNoMetricOnRow(CQ))){this.setError(mstrmojo.desc(13685,"The Heat Map requires at least one attribute on the row axis to render properly; it is recommended that two metrics be placed on the column axis as well"));return ;}if(AV.hasMergedRowCells(CQ)){this.setError(mstrmojo.desc(13686,"The HeatMap doesn't support grid data with merged row cell. Please disable cell merge and retry"));return ;}if(AV.isOnExpressMode()&&this.props.colorMetricEnabled&&Bs[B9]){BS.forEach(Bl,function(CZ){var CY=CZ&&CZ.items&&CZ.items[B9];if(CY){Be.max=Math.max(Be.max,CY.rv);Be.min=Math.min(Be.min,CY.rv);}});}this.hasNegativeSizeValue=false;this.levelAttributes=[];this.root={aggValues:[],entityChildren:[],level:0};var CT,CW=true,Bp,CO=this.model;for(CT=0;CT<CJ;CT++){Bp=CO.supportsViewFilterActions(CF[CT].id);CW=CW&&Bp;this.levelAttributes[CT]={index:CT,order:CT+1,isInLOA:CT+1>0,supportsViewFilter:Bp,name:CF[CT].n,id:CF[CT].id};}this.allSupportsViewFilter=CW;var Bz={},CA=[];for(CT=0;CT<CJ;CT++){var CN=CF[CT].fs;CA[CT]=Math.max(1,CN?CN.length:1);}this.attSpan=CA;var B0=true,By,Bk,Bi,B4,Bo,CM,CP,B5,Bw,CD,B2,Bx=Be.max,CX=Be.min,CL;for(CT=0;CT<CC;CT++){var Bn=CB[CT].items,CS,CR;var B1="",Bd=CV,Bm=this.root,CG,Bj=0,Bt,B8,CE,CI=-1,Bv;for(CS=0;CS<CJ;CS++){var Bg,CK,Bf,Bu=1;if(!(CQ.gts.row[CS].otp===47&&CQ.gts.row[CS].ost===12033)&&!!CQ.gts.row[CS].cs){Bu=CQ.gts.row[CS].cs;Bv=true;}if(Bn[Bj].etk===-1||Bn[Bj].etk==="-1"){if(Bm){Bf=Bm.aggValues;for(CR=0;CR<Bq;CR++){Bg=parseFloat(AV.getPropertyByPath(Bl,CT+".items."+CR+".rv"));if(isNaN(Bg)){continue;}Bf[CR]={AETotal:Bg};}}break;}else{var B7,CU;B8="";CE="";B5=CF[CS];Bw=CA[CS];B2=[];for(CR=0;CR<Bw;CR++,Bj+=Bu){B7=Bn[Bj].idx;if(B7===-1){continue;}CD=B5.es[B7];if(B2.indexOf(CD)===-1){B8+=CD.n+" ";if(CR===0){CE=CD.id;B1+=B7;}B2.push(CD);}}B8=B8.substring(0,B8.length-1);if(Bd){Bd=Bd[Ay(B8)];}var Bh;if(CS!==CJ-1){if(Bz[B1]!==undefined){Bm=Bz[B1];}else{CG={aggValues:[],entityChildren:[],parentEntity:Bm};Bh=Bm.entityChildren;Bh.push(CG);Bz[B1]=CG;Bm=CG;CG.deleted=false;CG.text=B8;CG.label=B8;CG.id=CE;CG.level=CS;CG.index=CT;CP=Bn[Bj-Bu];for(Bo=0;Bo!==An;Bo+=1){CM=Ap[Bo];CG[CM]=CP[CM];}}B1+=":";CU=CG;}else{var B6;if(Bz[B1]!==undefined){Bt=Bz[B1];B6=Bt.indices;B6.push(CT);for(CR=0;CR<Bq+1;CR++){CK=Bt.aggValues[CR];Bg=parseFloat(CR===Bq?1:Bl[CT].items[CR].rv);if(!Bv){AE.call(this,CK,Bg,{needsCopy:true,invalidReplacement:Bs[CR]?0:1});}}}else{Bt={indices:[],aggValues:[],parentEntity:Bm};B6=Bt.indices;B6.push(CT);Bf=Bt.aggValues;for(CR=0;CR<Bq+1;CR++){CK={};Bf[CR]=CK;Bg=parseFloat(CR===Bq?1:Bl[CT].items[CR].rv);if(isNaN(Bg)){CK.value=Bs[CR]?0:1;CK.count=0;}else{CK.value=Bg;CK.count=1;}CK.allValueCount=1;}this.aggregated=false;if(Bd){Bt.deleted=true;this.colorTheme.useDefault=false;}if(this.isMetricColorByType()&&this.props.colorMetricID!==m&&Bs[B9]){var CH=Bl[CT].items[B9],Bc=CH.ti,B3=parseFloat(CH.rv);if(B3===""||B3===undefined||B3===null){Bc=-1;}else{if(Bc===undefined){if(AV.isOnExpressMode()){if(Bx===CX){CL=0;}else{CL=(B3-CX)/(Bx-CX);}if(CL<0.1){Bc=0;}else{if(CL>=0.1&&CL<0.3){Bc=1;}else{if(CL>=0.3&&CL<0.5){Bc=2;}else{if(CL>=0.5&&CL<0.7){Bc=3;}else{if(CL>=0.7&&CL<0.9){Bc=4;}else{if(CL>=0.9){Bc=5;}}}}}}}else{Bc=-1;}}}Bt.thrColorIndex=Bc;}else{Bt.thrColorIndex=-1;}Bh=Bm.entityChildren;Bh.push(Bt);Bt.level=CJ-1;Bt.text=B8;Bt.label=B8;Bt.id=CE;Bz[B1]=Bt;CP=Bn[Bj-Bu];for(Bo=0;Bo!==An;Bo+=1){CM=Ap[Bo];Bt[CM]=CP[CM];}}CU=Bt;}if(Bn[CS].cet!==undefined){if(CS-CI!==1||(!isNaN(By)&&By!==CT)){B0=false;}if(B0){Bk=CU;CI=CS;By=CT;}if(isNaN(B4)||B4<CS){B4=CS;Bi=CU;}}}}}function Br(CZ){var Ca=[];var CY;if(CZ.entityChildren){for(CY=0;CY<Bq+1;CY++){if(!Ca[CY]){Ca[CY]={AETotal:0,isAETotalFaked:false};}}BS.forEach(CZ.entityChildren,function(Ce){var Cc=Br(Ce);var Cb,Cg,Cf,Cd;for(CY=0;CY<Bq+1;CY++){Cg=Ca[CY];Cb=Cc[CY];if(Ce.entityChildren){Cg.AETotal+=Cb.AETotal;Cg.isAETotalFaked|=Cb.isAETotalFaked;}else{Cf=Cb.total;if(Cf===undefined){Cf=Cb.value;}Cd=Cb.allValueCount!==0&&Cb.count!==0;Ca[CY].AETotal+=Cf;Ca[CY].isAETotalFaked|=!Cd;}}});for(CY=0;CY<Bq+1;CY++){if(!CZ.aggValues[CY]){CZ.aggValues[CY]=Ca[CY];}}}return CZ.aggValues;}Br(this.root);if(B0&&Bk){this.previousSelected=[Bk];}else{if(Bi){this.previousSelected=[Bi];}}}function BJ(Bg,Be,Bd){var Bc=Bg.aggValues;if(Be>=Bc.length){return NaN;}var Bf=Bc[Be];if(Bg.entityChildren===undefined&&Bf.allValueCount===1){return Bf.value;}else{return Bf.AETotal;}}function S(Be,Bd){var Bc=Bd.sizeMetricIndex,Bf=BJ(Be,Bc,Bd);if(Bf<0){Bd.hasNegativeSizeValue=true;return Math.abs(Bf);}return Bf;}function AB(Bd){var Bc={};Bc.x=Bd.x;Bc.y=Bd.y;Bc.w=Bd.w;Bc.h=Bd.h;return Bc;}function j(Be){var Bf=Be.level,Bc=this.levelAttributes.length,Bd;switch(Bc){case 1:Bd={v:1,h:1};break;case 2:switch(Bf){case 0:Bd={v:1,h:3};break;default:Bd={v:1,h:1};}break;case 3:switch(Bf){case 0:Bd={v:1,h:6};break;case 1:Bd={v:1,h:3};break;default:Bd={v:1,h:1};}break;default:switch(Bf){case 0:Bd={v:1,h:8};break;case 1:Bd={v:1,h:4};break;case 2:Bd={v:1,h:2};break;default:Bd={v:1,h:1};}}if(!this.props.isHeaderOnTop){Bd.v=Bd.h;}return Bd;}function h(Bc){return Bc.w>0&&Bc.h>0;}function BY(Bc){var Bd=AB(Bc);if(!h(Bc)){Bd.w=0;Bd.h=0;}return Bd;}function A2(Bc){var Bd=Bc.x;Bc.x=Bc.y;Bc.y=Bd;Bd=Bc.w;Bc.w=Bc.h;Bc.h=Bd;return Bc;}function Ad(Bf,Bd){var Bc=Math.max(Bf.x,Bd.x);var Bh=Math.max(Bf.y,Bd.y);var Be=Math.min(Bf.x+Bf.w,Bd.x+Bd.w)-Bc;var Bg=Math.min(Bf.y+Bf.h,Bd.y+Bd.h)-Bh;if(Be<0||Bg<0){return{x:NaN,y:NaN,w:NaN,h:NaN};}return{x:Bc,y:Bh,w:Be,h:Bg};}function AL(Bf,Bd){var Bc=BY(Bd);Bf.size=Bc;if(this.props.isHeaderOnTop&&Bf.entityChildren){var Be=this.props.headerPixels,Bg=j.call(this,Bf).v;Bf.headerSize=BY({x:Bc.x,y:Bc.y,w:Bc.w,h:Math.min(Be,Bc.h)});Bf.contentSize=BY({x:Bc.x,y:Bc.y+Be+Bg,w:Bc.w,h:Bc.h-Be-Bg});Bf.size=AB(Bf.contentSize);Bd.y=Bf.contentSize.y;Bd.h=Bf.contentSize.h;}else{delete Bf.headerSize;delete Bf.contentSize;}}function x(Bt,B6,Bx,Bg,B8){var By,Bu,Bp=Bt.r||[],Bz=Bp.length,Bo,B2,Bv,B7=false;if(Bz===0){return ;}if(Bx<B6.h){Bo=Bx;B2=B6.h;Bv=B6;}else{Bo=B6.h;B2=Bx;Bv=AB(B6);A2(Bv);B7=true;}var Bm=Bv.x,Bl=Bv.y,Bd={x:Bm,y:Bl,w:Bo,h:B2};var Bw=j.call(this,Bp[0]),B1,Bf=this;var Bi={v:Bw.v,h:Bw.h};if((B8===true&&B7!==true)||(B8===false&&B7===true)){Bi={v:Bw.h,h:Bw.v};}var B3=function B3(CB,CA){var CD=S(CB,Bf),CC=S(CA,Bf),B9;if(isNaN(CD)){if(isNaN(CC)){B9=0;}else{B9=1;}}else{if(isNaN(CC)){B9=-1;}else{B9=CD<CC?1:-1;}}return B9;};var Bq=function(CD,CE,CB){if(Br){return 1;}var CC=S(CD,CE),CA=B2*CC/Bg;var B9=(Bg<=0||CD.deleted)?0:Math.ceil(CA);if(B9>0){B4+=B9-CA;}if(CC<Bg){if(CB===0&&Bz>1){if(Bj>1){if(B9>(Bj>>1)){B9-=(Bj>>1);}}else{if(B9>1){B9--;}}if(B9+(Bz-1)*(Bj+1)>=B2){B9=B2-(Bz-1)*(Bj+1);Br=true;}}else{if(CB<Bz-1){if(Bj>1){if(B9>(Bj>>1)){B9-=Bj;}else{B9=1;}}else{if(B9>1){B9--;}}if(B4>1&&B9>1){B9--;B4-=1;}}else{B9=Math.max(B2+Bv.y-Bl,1);}}}return B9;};var Bn=0,B5,B0,Bj=Bi.v,Bh=Math.max(1,Math.floor((B2+Bj)/(1+Bj)));if(Bz>Bh){for(B1=0;B1<Bz;B1++){B5=Bp[B1];if(B5.deleted){continue;}Bn++;}}for(B0=Bz-1,B1=Bn-Bh;B1>0;B0--){B5=Bp[B0];if(!B5.deleted){Bg-=S(B5,this);B1--;}}var B4=0,Br=false;for(B0=0,B1=0,Bn=Bp.length,Bz=Math.min(Bz,Bh);B1<Bn;B0++){var Be,Bs;B5=Bp[B0];if(B5.deleted){continue;}if(B1>=Bz){Bu=0;}else{Bu=Bq(B5,this,B1);}B1++;By=Bo;var Bk={x:Bm,y:Bl,w:By,h:Bu};Be=Ad(Bk,Bd);if((B8===true&&B7!==true)||(B8===false&&B7===true)){A2(Be);}AL.call(this,B5,Be);Bl+=Bu+Bj;if(B5.entityChildren!==undefined){Bs=Math.min(Be.w,Be.h);var Bc=B5.entityChildren.slice(0);Bc.sort(B3);BX.call(this,Bc,{r:[]},Bs,Be);}}}function Y(Bl,Bw){var Be=0,Bc=Bl.r,Bp=Bc.length;if(Bp===0){return ;}var Bq,Bn=Bc[0].parentEntity,Bj=Bn.entityChildren,Bg=Bj.length;var Br,Bt,Bh;for(Br=0;Br<Bp;Br++){Bt=Bc[Br];Bh=S(Bt,this);if(!Bt.deleted&&Bh>0){Be+=Bh;}}if(Bl.t===undefined){var Bk=0;for(Br=0;Br<Bg;Br++){Bt=Bj[Br];Bh=S(Bt,this);if(!Bt.deleted&&Bh>0){Bk+=Bh;}}Bl.t=Bk;}Bt=Bc[0];var Bm=j.call(this,Bt),Bd={x:0,y:0,w:0,h:0};if(Bt===this.root){Bq=this.heatMapSize.w*this.scaleFactor*this.heatMapSize.h*this.scaleFactor;Bd.w=this.heatMapSize.w*this.scaleFactor;Bd.h=this.heatMapSize.h*this.scaleFactor;}else{if(Bn===this.root){Bq=this.heatMapSize.w*this.scaleFactor*this.heatMapSize.h*this.scaleFactor;Bd.w=this.heatMapSize.w*this.scaleFactor;Bd.h=this.heatMapSize.h*this.scaleFactor;}else{var By=Bn.size;Bq=By.w*By.h;Bd=AB(By);}if(Bl.t===0){Bq=0;}else{Bq*=Be/Bl.t;}}var Bi=Bw.w,Bs=Bw.h,Bx=false;if(Bw.h>=Bw.w){Bx=true;A2(Bw);A2(Bd);var Bu=Bi;Bi=Bs;Bs=Bu;Bm={h:Bm.v,v:Bm.h};}if((Bd.x<Bw.x)||(Bd.x+Bd.w>Bw.x+Bw.w)){if(Bm.h>1){Bi+=(Bm.h>>1);}}if((Bd.y<Bw.y)||(Bd.y+Bd.h>Bw.y+Bw.h)){if(Bm.v>1){Bs+=(Bm.v>>1);}}var Bo=Bs===0?0:Math.min(Bw.w,Math.ceil(Bq/Bs));if(Be<Bl.t&&Be>0){if(Bw.x+Bo<Bd.x+Bd.w){if(Bm.h>1){if(Bo>Bm.h>>1){Bo-=(Bm.h>>1);}}else{if(Bo>1){Bo--;}}}}x.call(this,Bl,Bw,Bo,Be,Bx);var Bv=Bw.x+Bo,Bf=Bw.w-Bo;if(Be<Bl.t&&Be>0){if(Bw.x+Bo<Bd.x+Bd.w){if(Bm.h>1){if(Bf>Bm.h){Bv+=Bm.h;Bf-=Bm.h;}}else{if(Bf>1){Bv++;Bf--;}}}}Bw.x=Bv;Bw.w=Math.max(0,Bf);if(Bx){A2(Bw);}}function Ah(Bj,Bl,Bu){var Bm,Bc=Bj.r,Bo=Bc.length;if(Bo>0&&Bu>0){var Bt=Bc[0];var Bk=0,Bp=this;if(Bj.t===undefined){BS.forEach(Bt.parentEntity.entityChildren,function(Bw){if(!Bw.deleted){Bk+=S(Bw,Bp);}});Bj.t=Bk;}else{Bk=Bj.t;}if(isNaN(Bk)||Bk<=0){return -1;}var Bn,Bq,Bd=0,Bv,Bs=false,Br;for(Br=0;Br<Bo;Br++){Bt=Bc[Br];if(!Bt.deleted){Bv=S(Bt,this);if(!isNaN(Bv)){if(Bs===false){Bq=Bn=Bv;Bs=true;}else{Bq=Math.max(Bv,Bq);Bn=Math.min(Bv,Bn);}Bd+=Bv;}}}var Be=Bu*Bd/Bk,Bh=Be/Bl,Bi=(Bl<Bh)?Bl:Bh;Bq=Bu*Bq/Bk;Bn=Bu*Bn/Bk;var Bg=Bq/(Bi*Bi);var Bf=Bn/(Bi*Bi);Bg=(Bg>1)?Bg:(1/Bg);Bf=(Bf>1)?Bf:(1/Bf);Bm=Math.max(Bg,Bf);}else{Bm=-1;}return Bm;}function BX(Bo,Bc,Bf,Bl,Bm){var Bg=[[this,Bo,Bc,Bf,Bl,Bm]];while(Bg.length){var Be=Bg.pop();var Bk=Be.shift();Bo=Be.shift();Bc=Be.shift();Bf=Be.shift();Bl=Be.shift();Bm=Be.shift();if(Bo.length===0){Y.call(Bk,Bc,Bl);}else{var Bd=Bl.w*Bl.h;var Bn;if(Bm!==undefined){Bn=Bm;}else{Bn=Ah.call(Bk,Bc,Bf,Bd);}var Bh=Bo[0],Bi=Bc.r;Bi.push(Bh);var Bj=Ah.call(Bk,Bc,Bf,Bd);if(Bn>=Bj||Bn===-1){Bo.shift();Bg.push([Bk,Bo,Bc,Bf,Bl,Bj]);}else{Bc.r.pop();Y.call(Bk,Bc,Bl);Bf=Math.min(Bl.w,Bl.h);Bg.push([Bk,Bo,{r:[],t:Bc.t},Bf,Bl]);}}}}function AN(Be){if(Be===null){return[];}var Bc=Be.slice(0),Bg=0,Bd=Bc.length,Bf;Bc.t=[];for(Bf=0;Bf<Bd;Bf++){var Bh=Bc[Bf],Bi=S(Bh,this);if(Bh.deleted||isNaN(Bi)||Bi<=0){Bc.splice(Bf,1);Bf--;Bd--;continue;}Bg+=Bi;Bc.t[Bf]=Bg;}return Bc;}function d(Bg,Bj,Bi,Bh){var Be=AB(Bj);if(Bi===true){A2(Be);}AL.call(this,Bg,Be);var Bf=Bg.entityChildren;if(Bf!==undefined){var Bc=AN.call(this,Bf),Bd=Bc.length;if(Bd>0&&Bh){Bh.push([this,Bc,0,Bd-1,Be]);}}}function BL(Bl,Bx,Bn,B3){var B4=[[this,Bl,Bx,Bn,B3]];while(B4.length){var Bh=B4.pop();var Bz=Bh[0];Bl=Bh[1];Bx=Bh[2];Bn=Bh[3];B3=Bh[4];var B1=Bl[0],Bt=j.call(Bz,B1),Bv,By,Bf,Bg,Bj,B7=false,Bu=Bn-Bx+1,Bi=(Bu>2?((Bu-1)>>1):(Bu>>1))+Bx,Br;Br=AB(B3);if(Br.w<=Br.h){A2(Br);Bt={v:Bt.h,h:Bt.v};B7=true;}Bv=AB(Br);By=AB(Br);if(Bx===Bn){B1=Bl[Bx];d.call(Bz,B1,Br,B7,B4);continue;}if(Bx+1===Bn){B1=Bl[Bx];Bf=S(B1,Bz);B1=Bl[Bn];Bg=S(B1,Bz);}else{if(Bx===0){Bf=Bl.t[Bi-1];}else{Bf=Bl.t[Bi-1]-Bl.t[Bx-1];}if(Bi===0){Bg=Bl.t[Bn];}else{Bg=Bl.t[Bn]-Bl.t[Bi-1];}}Bj=Bf/(Bf+Bg);Bv.w=Math.ceil(Bv.w*Bj);if(Bv.w<B3.w){if(Bt.h>1){if(Bv.w>(Bt.h>>1)){Bv.w-=(Bt.h>>1);}}else{if(Bv.w>1){Bv.w--;}}}if(Bx+1===Bn){By.w-=Bv.w+Bt.h;By.x+=Bv.w+Bt.h;B1=Bl[Bx];d.call(Bz,B1,Bv,B7,B4);B1=Bl[Bn];d.call(Bz,B1,By,B7,B4);continue;}var B9=AB(Br),Bm,Bq,Be=0,B2=-1,Bw=1,Bs;if(Bi>Bx){var Bk=AB(Bv);if(B7){A2(Bk);}B4.push([Bz,Bl,Bx,Bi-1,Bk]);}B9.w-=Bv.w+Bt.h;B9.x+=Bv.w+Bt.h;By.w=B9.w;By.x=B9.x;Bm=B9.w/B9.h;B1=Bl[Bi];Bs=S(B1,Bz);Bq=Bs/Bg;var B0;for(B0=Bi;B0<=Bn;B0++){B1=Bl[B0];Be+=S(B1,Bz);if(B0===Bn-1){continue;}var Bd=Be/Bg,B8=Bs/Be,B6=Bd/B8*Bm;if(B6>=1){if(Bw<1&&Bw*B6>1){B2=(B0===Bn)?B0-2:B0-1;}else{B2=B0;}break;}Bw=B6;}B2=B2<0?Bn:B2;var Bp,Bo,B5;if(Bi===0){Bp=Bl.t[B2];}else{Bp=Bl.t[B2]-Bl.t[Bi-1];}Bo=Math.min(Math.ceil(B9.w*(Bp/Bg)),B9.w);B5=Math.min(Math.ceil(B9.h*(Bs/Bp)),B9.h);if(Bo<B9.w){if(Bt.h>1){if(Bo>(Bt.h>>1)){Bo-=(Bt.h>>1);}}else{if(Bo>1){Bo--;}}}if(B5<B9.h){if(Bt.v>1){if(B5>(Bt.v>>1)){B5-=(Bt.v>>1);}}else{if(B5>1){B5--;}}}var Bc={x:B9.x,y:B9.y,w:Bo,h:B5};B1=Bl[Bi];d.call(Bz,B1,Bc,B7,B4);if(Bi<B2){B9.y+=B5+Bt.v;B9.w=Bo;B9.h-=B5+Bt.v;if(B7){A2(B9);}B4.push([Bz,Bl,Bi+1,B2,B9]);}if(B2<Bn){By.x+=Bo+Bt.h;By.w-=Bo+Bt.h;if(B7){A2(By);}B4.push([Bz,Bl,B2+1,Bn,By]);}}}function BB(Bj,Bt){var Bu=[[this,Bj,Bt]];while(Bu.length){var Bd=Bu.pop();var Bp=Bd[0];Bj=Bd[1];Bt=Bd[2];if(Bj===null||Bj.length===0){continue;}var Bi=0,Bs=Bj[0],Bw,Bm=j.call(Bp,Bs),Bv=false,Bo=Bj.length,Bg,Bf,Bh,Br;var Bq;for(Bq=0;Bq<Bo;Bq++){Bs=Bj[Bq];Bw=S(Bs,Bp);if(!Bs.deleted&&Bw>0){Bi+=Bw;}}if(Bt.w>=Bt.h){Bv=true;A2(Bt);Bm={h:Bm.v,v:Bm.h};}Bh=Bt.w;Br=Bt.h;Bg=Bt.x;Bf=Bt.y;for(Bq=0;Bq<Bo;Bq++){Bs=Bj[Bq];Bw=S(Bs,Bp);if(!Bs.deleted&&Bw>0){var Bn,Bl;Bl=Bi<=0?0:Math.ceil(Bw/Bi*Br);Bn=Bh;if(Bw<Bi){if(Bq===0||Bq===Bo-1){if(Bm.v>1){if(Bl>(Bm.v>>1)){Bl-=(Bm.v>>1);}}else{if(Bl>1){Bl--;}}}else{if(Bl>Bm.v){Bl-=Bm.v;}}}Bn=Math.max(0,Bn);Bl=Math.max(0,Bl);var Be={x:Bg,y:Bf,w:Bn,h:Bl},Bc=Ad(Be,Bt);Bf+=Bl+Bm.v;if(Bf>=Bt.y+Br){Bc.h=Bt.y+Br-Bc.y;}if(Bv){A2(Bc);}AL.call(Bp,Bs,Bc);if(Bs.entityChildren!==undefined){Bu.push([Bp,Bs.entityChildren,Bc]);}}else{var Bk={x:Bg,y:Bf,w:0,h:0};if(Bv){A2(Bk);}AL.call(Bp,Bs,Bk);continue;}}if(Bv){A2(Bt);}}}function Ac(){var Be=0;if(this.props.showLegend){Be=Math.min(Math.floor(0.2*(parseInt(this.height,10)-2*this.LayoutProperties.Padding)),this.LayoutProperties.MaxLegendHeight);}var Bj=this,Bi=AB(this.heatMapSize);Bi.x=0;var Bf=Math.min(Bi.w,Bi.h);var Bg=this.root.entityChildren;var Bc;switch(this.props.layout){case Ar.Squarified:Bc=Bg.slice(0);Bc.sort(function Bh(Bl,Bk){var Bn=S(Bl,Bj);var Bm=S(Bk,Bj);if(isNaN(Bn)){if(isNaN(Bm)){return 0;}return 1;}if(isNaN(Bm)){return -1;}return Bn<Bm?1:-1;});BX.call(this,Bc,{r:[]},Bf,Bi);break;case Ar.SliceAndDice:BB.call(this,Bg,Bi);break;case Ar.PivotByMiddle:Bc=AN.call(this,Bg);var Bd=Bc.length;if(Bd>0){BL.call(this,Bc,0,Bd-1,Bi);}break;}}function AU(Be,Bc){var Bd=mstrmojo.desc(14109,"Total of")+" {0}";return Bd.replace("{0}",Be);}function A4(Bh,Bl,Bd,Bc){var Bg=(Bh.index===undefined)?Bh.indices[0]:Bh.index;var Bn=AV.getPropertyByPath(Bl,"modelData.gvs.items",[]);var Bj=Bl.getMetricName(Bd);var Bk,Bm,Bi,Bf;if(Bd===-1){Bk=AF;}else{if(Bh.entityChildren!==undefined||Bl.aggregated){Bm=Bl.aggFunctions[Bd];Bj=AU(Bj,Bm);Bk=BJ(Bh,Bd,Bl);Bi=AV.getPropertyByPath(Bh,"aggValues."+Bd);if(Bi.isAETotalFaked||isNaN(Bk)){Bk=AF;}else{var Be=Bl.getFormatString(Bd);Bk=Bl.nf.formatByMask(Be,Bk);}}else{Bk=AV.getPropertyByPath(Bn,Bg+".items."+Bd+".v");if(Bk===""||Bk===undefined||Bk===null){Bk=AF;}}}Bf={n:Bj,v:Bk};if(Bc){Bc.push(Bf);}return Bf;}function AT(Bh,Bc){var Bg=AV.getPropertyByPath(Bh,"modelData.gts.col.0.es.length",0);var Bf=[];var Bd=Bh.sizeMetricIndex,Be=Bh.colorMetricIndex;if(Bd!==undefined&&Bd!==Bg){Bf.push(Bd);}if(!Bh.isAttributeColorByType()&&Bc.entityChildren===undefined&&Be!==undefined&&Be!==Bg&&Be!==Bd){Bf.push(Be);}AV.range(0,Bg).forEach(function(Bi){if(Bf.indexOf(Bi)===-1){Bf.push(Bi);}});return Bf;}function AI(Bu,Bg){var Bd=Bu.level,Bf=(Bu.index===undefined)?Bu.indices[0]:Bu.index,Bl=0,Bk=Bg.attSpan,Bc=Bg.modelData.ghs.rhs.items,Bw=Bc[Bf].items,Bo=Bg.modelData.gts.row,Bn;var By="",Bm="",Bh,Bi;var Bv=[];var Br,Bj,Bp,Bt,Be,Bs;for(Br=0;Br<=Bd;Br++){if(Br>0&&Br===Bd){Bv.push(null);}Bn=Bo[Br];var Bq=!!Bo[Br].cs?Bo[Br].cs:1;if(Bg.modelData.lnm===t.OFF){By=Bn.n;Bh=Bn.id;Bm="";Bs=[];for(Bp=Bl,Bt=Bl+Bk[Br];Bp<Bt;Bp++){Bj=Bw[Bp].idx;if(Bj===-1){continue;}Be=Bn.es[Bj];if(Bs.indexOf(Be)===-1){Bm+=Be.n+" ";if(Bp===Bl){Bi=Be.id;}Bs.push(Be);}}Bm=Bm.substring(0,Bm.length-1);Bv.push({n:By,v:Bm,tid:Bh,eid:Bi});}else{for(Bp=Bl,Bt=Bl+Bk[Br];Bp!==Bt;Bp++){Bj=Bw[Bp].idx;if(Bj===-1){continue;}Bv.push({n:Bn.fs[Bp-Bl].n,v:Bn.es[Bj].n});}}Bl+=Bq>1?Bq:Bk[Br];}var Bx=AT(Bg,Bu);if(AX){Bx.push(-1);}Bx.forEach(function(Bz){A4(Bu,Bg,Bz,Bv);});return Bv;}function R(Bc){return{evt:Bc,target:Bc.getTarget(),pageX:Bc.e.pageX,pageY:Bc.e.pageY,clientX:Bc.e.clientX,clientY:Bc.e.clientY};}var Ag=function(Bg,Bf){if(AV.isOnExpressMode()){return ;}var Bd=Bg.e||Bg,Bc=this.getSelectionMenuConfig();if(!mstrApp.isAppStatePresentation()&&mstrApp.allowWebDashboardDesign()&&Bf){var Be=this;Bc.addSeparator();Bc.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");Be.parent.selectVIUnit();Bf(Bg);});}if(Bc.hasMenuItems()){this.showMenu(Bc,Bd);}};function AR(Bc){if(AV.isOnExpressMode()||mstrApp.isAppStatePresentation()||!mstrApp.allowWebDashboardDesign()){return ;}Bc=Bc.e||Bc;this.showMenu(this.getBlankSpaceMenuConfig(Bc),Bc);}var Ab={BACKGROUND:"background",RECTANGLE:"rectangle",RECTANGLE_LABEL:"rectangleLabel",LEGEND_BACKGROUND:"legendBackground"};function Aq(){function Bi(Bn,Bs,Bm){var Bl=this.props,Bp=Bm.updateModel,Br=Bm.toModelValue,Bq=Bm.toModelPropName,Bo;Bl.unmarshal(Bn,Bs);Bo=Bl[Bn];if(Bp){if(Br instanceof Function){Bo=Br.call(this,Bn,Bo);}if(Bq instanceof Function){Bn=Bq.call(this,Bn);}this.observableModel[Bn].setValue(Bo,true);}return Bo;}var Bj=function(){var Bm=this.props,Bl=Bm.themeType==="light"?0:1,Bn={value:this.bgColor,opacity:A3.lgdBgFillTrans[Bl]/100};if(Bm.lgdBgFillClr){Bn.value=Az.decodeColor(Bm.lgdBgFillClr);}if(Bm.lgdBgFillTrans){Bn.opacity=Bm.lgdBgFillTrans/100;}return Bn;};var Be=function(Bl,Bn,Bm,Bp){function Bo(Bs,Br){var Bq=this.attributeColorByLegend;if(!Bq||!Bq.hasRendered){return ;}Bi.call(this,Bl,Bs,{updateModel:Br,toModelPropName:function(Bt){if(Bt===BE.LEGEND_BG_COLOR||Bt===BE.LEGEND_BG_FILL_TRANSPARENCY){return"legendBackground";}return Bt;},toModelValue:function(Bu,Bt){if(Bu===BE.LEGEND_BG_COLOR||Bu===BE.LEGEND_BG_FILL_TRANSPARENCY){return Bj.call(this);}return Bt;}});this.initHTML5Props(this.HTML5PROPS);Bq.updateStyle(this.HTML5PROPS.LEGEND);if(Bp){Bq.updateTitleLineHeight();this.hEvalSize4Legend();this.updateLegend();Bq.updateSplitter();this.updateCanvasAfterAttributeLegendChanged(AP[Bq.currDockedPositionIdx].pos,this.legendW);}}Bo.call(this,Bn);this.setProperty(Bm,this.props.marshal(Bl),{suppressData:true,clientUndoRedoCallback:Bo});}.bind(this);function Bk(Bn,Bm,Bl){return function(){function Bq(Bs,Br){Bi.call(this,Bm,Bs,a.copy(Bo,{updateModel:Br}));this.refreshWidget();if(Br&&Bp){this.parent.selectVIUnit(true);}}Bl=a.copy(Bl,{refreshPropertyPanel:true});var Bp=Bl.refreshPropertyPanel;var Bo=Bl.modelConfig;Bq.call(this,Bg[Bm].getValue(),false);this.setProperty(Bn,this.props.marshal(Bm),{suppressData:true,clientUndoRedoCallback:Bq});};}var Bf=this.props.headerColors,Bh=this.getPropsInfo(),Bc=this.isAttributeColorByType()?"attrColorByOpacity":"metricColorByOpacity",Bg=new mstrmojo.netviz.ObservableModel({isHeaderOnTop:Bh.isHeaderOnTop,labelSize:Bh.labelSize,showMetricValues:Bh.showMetricValues,layout:Bh.layout,background:this.background,headerColors:Bf[0],fonts:Bh.fonts,legendBackground:Bj.call(this),showLegend:Bh.showLegend,colorByOpacity:Bh[Bc],lgdFntSz:Bh.lgdFntSz,lgdFntFml:Bh.lgdFntFml,lgdFntClr:Bh.lgdFntClr,lgdFntStyle:Bh.lgdFntStyle}),Bd=this.id;Bg.isHeaderOnTop.attachEventListener("valueChanged",Bd,Bk(F.headerType,"isHeaderOnTop"));Bg.labelSize.attachEventListener("valueChanged",Bd,Bk(F.labelSize,"labelSize"));Bg.showMetricValues.attachEventListener("valueChanged",Bd,Bk(F.showMetricValues,"showMetricValues"));Bg.layout.attachEventListener("valueChanged",Bd,Bk(F.layout,"layout"));Bg.headerColors.attachEventListener("valueChanged",Bd,Bk(F.headerColors,"headerColors",{refreshPropertyPanel:false,modelConfig:{toModelValue:function(Bm,Bl){return Bl&&Bl[0];}}}));Bg.background.attachEventListener("valueChanged",Bd,function(Bm){this.background=Bg.background.getValue();var Bl=this.getSingleBackgroundColor();this.canvasObject.bgColor=Bl;this.highlightCanvas.backgroundColor=Bl;var Bn=K.encodeColor(this.getFormats()["background-color"],10),Bo=K.encodeColor(Bm.newValue,10);if(Bn!==Bo){AV.changeWidgetBackground(this,Bm.newValue,Bm.oldValue);}this.canvasObject.removeLabels();this.canvasObject.drawLabels();});Bg.fonts.attachEventListener("valueChanged",Bd,function(){var Bl="fonts";function Bm(Bo,Bn){function Bq(Br){return function(Bv,Bt){if(Bv.valid){return ;}var Bu=AV.getPropertyByPath(Bp,Br),Bs=AV.getPropertyByPath(Bg.fonts,Br);if(Bu&&Bs){Bu.scale=Bt;Bs.scale.setValue(Bt,true);}};}var Bp=Bi.call(this,Bl,Bo,{updateModel:Bn});O(Bp,n(BW,Bq));f.call(this,Bp);this.canvasObject.fonts=this.props.fonts;this.refreshWidget();}Bm.call(this,Bg.fonts.getValue(),false);this.setProperty(F.fonts,this.props.marshal(Bl),{suppressData:true,clientUndoRedoCallback:Bm});});Bg.legendBackground.attachEventListener("valueChanged",Bd,function(Bn){var Bl,Bm=Bn.newValue;if(isNaN(Bm)){Bm=Az.encodeColor(Bm);Bl=BE.LEGEND_BG_COLOR;}else{Bm*=100;Bl=BE.LEGEND_BG_FILL_TRANSPARENCY;}Be(Bl,Bm,Bl,false);});Bg.lgdFntSz.attachEventListener("valueChanged",Bd,function(Bl){Be("lgdFntSz",Bl.newValue,BE.LEGEND_FONT_SIZE,true);});Bg.lgdFntFml.attachEventListener("valueChanged",Bd,function(Bl){Be("lgdFntFml",Bl.newValue,BE.LEGEND_FONT_FAMILY,true);});Bg.lgdFntClr.attachEventListener("valueChanged",Bd,function(Bl){Be("lgdFntClr",Bl.newValue,BE.LEGEND_FONT_COLOR,false);});Bg.lgdFntStyle.attachEventListener("valueChanged",Bd,function(Bl){Be("lgdFntStyle",Bl.newValue,BE.LEGEND_FONT_STYLE,true);});Bg.showLegend.attachEventListener("valueChanged",Bd,function(Bl){var Bm="showLegend";function Bn(Br,Bq){var Bo=Bi.call(this,Bm,Br,{updateModel:Bq});var Bp=this.attributeColorByLegend;if(!Bp){this.reRender();return ;}this.toggleLegend(Bo);this.updateCanvasAfterAttributeLegendChanged(AP[Bp.currDockedPositionIdx].pos,(Bo?this.legendW:0));}Bn.call(this,Bl.newValue,false);this.setProperty(F.showLegend,this.props.marshal(Bm),{suppressData:true,clientUndoRedoCallback:Bn});});Bg.colorByOpacity.attachEventListener("valueChanged",Bd,function(Bl){function Bm(Bo,Bn){Bi.call(this,Bc,Bo,{updateModel:Bn,toModelPropName:function(Bp){return"colorByOpacity";}});this.refreshWidget();}Bm.call(this,Bl.newValue,false);this.setProperty(F[Bc],this.props.marshal(Bc),{suppressData:true,clientUndoRedoCallback:Bm});});return Bg;}function Bb(Bc,Bd){if(Bc===undefined||Bc===null||Bc.length===0){return false;}return Bc.every(function(Be){return Bd(Be.level);});}function AW(){var Bc=this.levelAttributes.length-1,Bd;return Bb(this.previousSelected,function(Be){if(Be===Bc){return false;}if(Bd===undefined){Bd=Be;}return Bd===Be;});}function Q(){var Bc=this.levelAttributes.length-1;return Bb(this.previousSelected,function(Bd){return Bd!==Bc;});}function Am(){var Bc=this.levelAttributes.length-1;return Bb(this.previousSelected,function(Bd){return Bd===Bc;});}function BA(Bh){var Bd={},Bg=[],Bf,Bi,Be,Bc;for(Be=0,Bc=Bh.length;Be!==Bc;Be+=1){Bf=Bh[Be];Bi=Bf&&Bf.id;if(Bi!==undefined&&!Bd.hasOwnProperty(Bi)){Bd[Bi]=true;Bg.push(Bf);}}return Bg;}function Ae(Be,Bf){var Bd=(Be.level===Bf.length-1),Bg=Be,Bc=Bf[Be.level].supportsViewFilter;if(Bd){while(Bc&&Bg.parentEntity){Bg=Bg.parentEntity;Bc=Bf[Bg.level].supportsViewFilter;}}return Bc;}function Ax(Bf,Bd){var Be,Bc;for(Be=0,Bc=Bf.length;Be!==Bc;Be++){if(!Ae(Bf[Be],Bd)){return false;}}return true;}function b(Bc,Bd){return Bd.map(function(Bf,Be){return{eid:Bf,tid:Bc[Be]};});}function BC(Bc){Bc=a.clone(Bc);this.dfs(this.root,function(Bd){var Bf=Bd.colorByAttributeIds||[],Bg=Bd.colorByElementIds||[],Be=b(Bf,Bg);if(Az.isEqualComb(Be,Bc)){this.addToSelection(Bd);}}.bind(this));}function A5(){return{type:"metricColorByOpacity",model:this.observableModel.colorByOpacity};}function AD(){var Bc=this.edtModelCbInitSelection,Bk=this.getColorByElements(),Bh=this,Bi,Bg,Be,Bd,Bf,Bj;if(Bc===undefined||Bc.length===0){return ;}Bi=Bc.length;if(Bi>1){Bg=Bk[0];}else{Be=a.clone(Bc[0]);Bd=AV.findInArray(Bk,function(Bl){return Az.isEqualComb(Be,a.clone(Bl.comb));});if(Bd===-1){return ;}Bg=Bk[Bd];}Bf={color:Bg.color,opacity:Bg.opacity,showAutomatic:Bc.some(function(Bl){return AV.isColorManuallySet(Bh,Bl);})};Bj={onFillChanged:function(Bp,Bn){var Bo=Bp,Bl=Bo==="automatic",Bm;if(Bl){Bp="default";}else{Bp=Az.encodeColor(Bp);}Bm=Bh.listenToUpdateColorMap(function(){var Bq="#ffffff",Br=Bc.length;if(Bl){if(Br===1){Bq=Az.decodeColor(AV.getCombColor(Bh,Bg.comb));}if(Bn instanceof Function){Bn(Bq);}Bo=Bq;}Bh.raiseEvent({name:"colorByColorChange",type:"invalidateCache"});Bh.raiseEvent({name:"colorByColorChange",type:"fill",fill:Bo,showAutomatic:!Bl});Bh.detachUpdateColorMapListener(Bm);});Bh.updateColorMap(Bc,AV.repeat(Bp,Bc.length));},onOpacityChanged:function(Bl){Bh.updateColorByOpacity(Bc,AV.repeat(Bl,Bc.length));Bh.raiseEvent({name:"colorByColorChange",type:"opacity",opacity:Bl});}};Bc.forEach(BC.bind(this));this.refreshHighlights();return{type:"attributeColorBy",model:Bf,callback:Bj};}function AO(){return{type:"headerFill",model:this.observableModel.headerColors,label:mstrmojo.desc(12105,"Header Fill")};}function o(Bm,Bv){var Bl=this.levelAttributes,Bs=this,Bi=function(Bx){return Bs.props.isHeaderOnTop&&Bx.level!==Bl.length-1;},Bc=Bi(Bm),Bq,Bh;if(this.props.isHeaderOnTop){var Bt=this.observableModel.fonts.headerOnTop;if(Bc){Bq=Bt.header;Bh="headerOnTop.header";}else{Bq=Bt.cell;Bh="headerOnTop.cell";}}else{Bq=this.observableModel.fonts.headerOnMiddle;Bh="headerOnMiddle";}var Br=this.root;this.preorderTraverse(Br,function(By){var Bz=By.labelDomNode;if(Bz&&Bi(By)===Bc){Bz._oldTextDecoration=Bz.style.textDecoration;Bz.style.textDecoration="underline";var B0=Bz.parentNode.querySelector(".heatmap-label-square"),Bx=getComputedStyle(Bz).color;if(B0){B0.style.background=Bx;B0.style.display="block";}}});var Bw=[];if(this.props.isHeaderOnTop&&Bm.entityChildren&&Bm.headerColor){Bw.push(AO.call(this));}if(!Bm.entityChildren&&this.isAttributeColorByType()){Bw.push(AD.call(this));}var Be=this.props.labelSize===y.Proportional;if(this.props.isHeaderOnTop&&Bc){Be=false;}Bw.push({type:"font",model:Bq,disableFontSize:Be,modelPath:Bh});var Bk,Bp=Bv.e||Bv,Bu=AV.getMetricsInDropZone(this.zonesModel,A.ColorBy)[0]||null,Bg=this.isMetricColorByType()&&Bu;if(Bg&&!Bi(Bm)){var Bo=mstrmojo.ui.PopupConfig.ENUM_CORNERS;Bp={pageX:Bp.pageX,pageY:Bp.pageY-6};Bk={host:Bo.TOP_LEFT,popup:Bo.BOTTOM_LEFT};Bw.unshift(A5.call(this));}this.closePopup();this.showContextMenu(Bw,Bp,Bk);this._lastOpened.onClose=function(){Bs.preorderTraverse(Br,function(Bx){var By=Bx.labelDomNode;if(By&&Bi(Bx)===Bc){By.style.textDecoration=By._oldTextDecoration;By._oldTextDecoration=undefined;var Bz=By.parentNode.querySelector(".heatmap-label-square");if(Bz){Bz.style.display="none";}}});};if(Bg&&!Bi(Bm)){var Bn=this._lastOpened;this._lastOpened=null;var Bj=new mstrmojo.ui.menus.MenuConfig();Bj.addMenuItem(mstrmojo.desc(13174,"Select color ranges..."),"",function(){Bs.model.openThresholdEditor(Bu,true,false);});this.showMenu(Bj,Bv);var Bd=this._lastOpened,Bf=Bd._unlockHoverCheck;Bd._unlockHoverCheck=function(By,Bx){if(!AZ.contains(Bn.domNode,AZ.eventTarget(Bx,By),true)){Bd._unlockHoverCheck=Bf;Bd._unlockHoverCheck(By,Bx);}};}this.raiseEvent({name:"formatclick",type:"format",formatValue:Bh});AV.selectPropertyPanel(this,"de");}function Au(Bc){return function(Be){var Bf=R(Be),Bd=this.getEntityByTouch(Bf);if(this.isOnFormattingMode){Bc.call(this,Bd,Be);}else{Ag.call(this,Be,Bc.bind(this,Bd));}};}function l(Bd){var Bc=this;Bc.showContextMenu({type:"background",model:Bc.observableModel.background,noOpacity:true,showNoFill:false},Bd);AV.selectPropertyPanel(Bc,0);}var U={};U[Ab.BACKGROUND]=function(Bc){if(this.isOnFormattingMode){l.call(this,Bc);}else{AR.call(this,Bc);}};var Al=Au(o);U[Ab.RECTANGLE_LABEL]=Al;U[Ab.RECTANGLE]=Al;function G(){var Bf=this.allSupportsViewFilter||Ax(this.previousSelected,this.levelAttributes),Bi=new mstrmojo.ui.menus.MenuConfig(),Bj=new mstrmojo.ui.menus.MenuConfig(),Be={filter:Bi,showData:Bj};if(!Bf){return Be;}var Bd=AV.getDrillMenuItemsCallback.bind(AV,this),Bh=Q.call(this),Bc=Am.call(this),Bg;if(Bh){Bg=Bd(this.getMenuHandler("headerDrill"));}if(Bc){Bg=Bd(this.getMenuHandler("rectangleDrill"));}Bi.addMenuItem(mstrmojo.desc(11701,"Keep only"),"xt",this.getMenuHandler("keepOnly"));Bi.addMenuItem(mstrmojo.desc(3946,"Exclude"),"xt",this.getMenuHandler("exclude"));Bj.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",this.getMenuHandler("showData"));if(Bg&&Bg().hasMenuItems()){Bi.addPopupMenuItem(mstrmojo.desc(145,"Drill"),this.id,Bg,"xt");}else{Bi.addNonInteractiveMenuItem(mstrmojo.desc(145,"Drill"),"",true);}return Be;}function i(){var Bc={};if(mstrApp.isAppStatePresentation()){return Bc;}var Bd=AW.call(this),Bi=Am.call(this),Be=this.previousSelected,Bh=function(Bj){return Bj.label;},Bf=this,Bg;if(Bd){Bg=this.getCellForNode(Be[0]);Bc=AV.getGroupAndCalculationContextMenu(this,Bg,{skipSingleAttrCheck:true,selection:BA(Be),fnCellName:Bh});}if(Bi){Bc=AV.getGroupAndCalculationContextMenuForDataPoints(this,{selection:Be,fnCellName:Bh,fnUnique:function(Bs){var Bm=[],Br=Bf.root,Bp=Bs,Bq=Bp.length,Bo,Bn,Bk,Bt,Bj,Bl;while(Bq>0){if(Bq===1){Bn=Bp[0];while(Bn!==Br){Bm.push(Bn);Bn=Bn.parentEntity;}Bq=0;}else{Bt=[];Bj={};for(Bo=0;Bo!==Bq;Bo+=1){Bn=Bp[Bo];Bk=Bn.parentEntity;Bl=Bn.id;if(!Bj.hasOwnProperty(Bl)){Bj[Bl]=true;Bm.push(Bn);}if(Bt.indexOf(Bk)===-1){Bt.push(Bk);}}Bp=Bt;Bq=Bp.length;}}return Bm;},fnMakeNode:function(Bj){return Bj;}});}return Bc;}function AK(Bd,Bc){var Be=Bd;if(!this.nf.validateFormat(Be)){Be="#,##0.00;(#,##0.00)";}return this.nf.formatByMask(Be,Bc);}mstrmojo.heatmap.vi.VisHeatMap=mstrmojo.declare(mstrmojo.VisBase,[mstrmojo.util.ui._LassoSelector,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._colorPalette,mstrmojo._VizSelectionHelper,mstrmojo.vi.ui.rw._HasVisSelections,mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl,mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights,mstrmojo.heatmap.vi._SupportHeatmapBrushesAndHighlights,mstrmojo.heatmap.vi._HasHeatmapContextMenu,mstrmojo.vi._MonitorsAppState,mstrmojo.vi.ui.rw._XtabDE,mstrmojo.vi.ui._IsDropTarget,mstrmojo.gm._SupportDndAsBlackBox],{scriptClass:"mstrmojo.heatmap.vi.VisHeatMap",selectedStyle:"background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #058CF5), color-stop(1, #015DE6));color:#FFFFFF;",selectedClass:"",insertedStyles:[],LayoutProperties:{},normalizedIdCache:{},highlightBoxWidth:3,waitIconString:mstrmojo.desc("8445","Loading"),markupString:'<div id="{@id}" class="heatmap-{@themeType}-theme mil-{@themeType} gm-{@themeType}-theme" style="width:{@width}px;height:{@height}px; left:{@left}px; top:{@top}px; z-index: {@zIndex}; position:absolute;" mstrAttach:'+k.join(",")+'><div class="heatmap-canvas-outer-container" style="padding: {@LayoutProperties.Padding}px; height:{@heatMapSize.h}px; width:{@heatMapSize.w}px; left: {@heatMapSize.x}px;"><div id ="{@id}-heatmap-canvas-container" class="heatmap-canvas-container" style="left: {@LayoutProperties.Padding}px; top: {@LayoutProperties.Padding}px; height:{@heatMapSize.h}px; width:{@heatMapSize.w}px"><div style="z-index: 1;"><div></div><div style="width: {@heatMapSize.w}px; height: {@heatMapSize.h}px;"></div></div></div></div><div></div><div style="width: {@legendSize.w}px; height: {@legendSize.h}px"></div></div>',markupSlots:{canvasSlot:function(){return this.domNode.childNodes[0].childNodes[0].childNodes[0].childNodes[0];},highlightCanvasPlaceholder:function(){return this.domNode.childNodes[0].childNodes[0].childNodes[0].childNodes[1];},canvasContainer:function(){return this.domNode.childNodes[0].childNodes[0];},canvasOuterContainer:function(){return this.domNode.childNodes[0];},containerNode:function(){return this.domNode;},scrollNode:function(){return this.domNode.childNodes[0].childNodes[0].childNodes[0];},textSpan:function(){return this.domNode.childNodes[1];},infoBoxPuppet:function(){return this.domNode.childNodes[1];},attributeColorByLegendPlaceHolder:function(){return this.domNode.childNodes[2];}},onAppStateChange:function Aj(Bc){this._super(Bc);if(!this.selectorControl){this.removeAllSelections();this.clearSelections();}this.isOnFormattingMode=(Bc.value===mstrmojo.vi.VisualInsightApp.APP_STATES.FORMATTING);},getProperties:function(){var Bc=this.modelData;return(Bc&&Bc.vp)||{};},getPropsInfo:function(){return this.props||{};},init:function(Be){this.props={};this.previousSelected=[];this._super(Be);var Bd=document.createElement("canvas");var Bc=Bd.getContext;this.nf=mstrmojo.num;if(!Bc){this.browserSupportsHtml5=false;}else{this.browserSupportsHtml5=true;}this.HTML5PROPS={};if(!c){c=new mstrmojo.VisTooltip();c.render();}this.legendType=A9.VERTICAL;this.isOnFormattingMode=false;},update:function(Bf){Az.startTimer({functionName:"VisHeatMap.update",purpose:"JSON loading and consuming, generate the labels and colors"});var Be=this._super(Bf),Bc,Bg,Bd;if(Be!==false){this.clearError();Bc=AV.getPropertyByPath(this,"model.data.egt");Bg=AV.getPropertyByPath(this,"model.data.eg");Bd=AV.getPropertyByPath(this,"model.data.err");if(Bc!==undefined||Bg!==undefined){this.setError(Bg,Bc);}if(Bd!==undefined){this.setError(Bd);}if(!this.browserSupportsHtml5){this.setError(mstrmojo.desc(8126,"Your browser does not support HTML5"));}this.modelData=this.model.data;if(!this.modelData){this.setError(mstrmojo.desc(8426,"No model provided"));}if(this.hasError()){Az.endTimer();return Be;}delete this.verticalLegendColorByElements;delete this.verticalLegendSizeByElements;delete this.colorByMetricThreshold;AA.call(this);X.call(this);if(this.hasError()){Az.endTimer();return Be;}this.loadDefinedFormat();this.observableModel=this.addDisposable(Aq.call(this));this.refreshLabelInTree();this.refreshColorInTree();}Az.endTimer();return Be;},preBuildRendering:function(){if(this.hasError()||this.waitingForData){return ;}this._super();var Bd=this.getPropsInfo(),Bc=Bd.showLegend;if(Bc&&this.legendType===A9.VERTICAL){this.defaultsLegendPop=Av.call(this,(this.props.themeType==="light"?0:1));this.initHTML5Props(this.HTML5PROPS);}this.LayoutProperties=A0;this.zIndex=null;Az.startTimer({functionName:"VisHeatMap.preBuildRendering",purpose:"layout of the rectangles"});if(Bc){if(this.isAttributeColorByType()||Bd.hasColorInThresholds){this.getVerticalLegendColorByInfo();}if(Bd.sizeMetricEnabled){this.getVerticalLegendSizeByInfo();}}this.setLayout();Ac.call(this);Az.endTimer();},setModel:function I(Bc){this._super(Bc);this.listenToUpdateColorMap(this.refreshWidget);},setError:function(Be,Bd){var Bc=AV.translateGridError(Be,Bd);this.error=Bc.msg;this.errorType=Bc.type;},clearError:function(){this.error=undefined;this.errorType=undefined;},hasError:function(){return this.error!==undefined||this.errorType!==undefined;},isEmpty:function(){return this.hasError();},getVisEmptyMsgControls:function(){var Bd=this.error,Bc=this.errorType,Be;if(!this.hasError()){return ;}switch(Bc){case Ba.NO_DATASET:case Ba.NO_TEMPLATE_UNIT:Be=[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:Bd}];break;case Ba.AE_ERROR:Be=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:AV.getVisEmptyMsg("AE_ERROR"),markupSlots:{containerNode:function(){return this.domNode;}}}];break;default:Be=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:'<div class="{@cssClass}"><div class="error-content">'+Bd+"</div></div>",markupSlots:{containerNode:function(){return this.domNode;}}}];break;}return Be;},postBuildRendering:function BZ(){if(this.waitingForData){return ;}if(this.isEmpty()){if(AV.isOnExpressMode()){AV.renderWidgetErrorRSD(this,this.error,k);}else{this._super();}return ;}Az.startTimer({functionName:"VisHeatMap.postBuildRendering",purpose:"Rendering of HeatMap"});this.initCanvas();this.renderLegend();this.hInitListeners();this.registerLassoSelector(this.canvasOuterContainer,[],false);this.lassoSelectorEnabled=true;var Be=this.getExp(),Bf=this.getRowsAndCols();AV.modifyScExp(Be,Bf,this.model,this.normalizedIdCache);var Bc=this._super();var Bd=this.previousSelected;if(Bd&&Bd.length>0){this.edtModelCbInitSelection=BV(Bd);}Az.endTimer();return Bc;},hasSizebyOrColorby:function(){var Bc=this.getPropsInfo();return Bc.colorByType||Bc.sizeMetricID!==m;},hInitListeners:function(){var Bc=this.id;if(this.attributeColorByLegend){this.legendResizeListener=this.attributeColorByLegend.attachEventListener("gm-legend-resized",Bc,function(Bd){this.onLegendResized(Bd.position);});this.legendClickListener=this.attributeColorByLegend.attachEventListener("gm-legend-clicked",Bc,function(Bd){this.onLegendClicked(Bd);});}},onLegendResized:function(Be){function Bc(){var Bf=this.attributeColorByLegend;if(Bf){this.hEvalSize4Legend();this.updateLegend();Bf.updateAfterResize();this.updateCanvasAfterAttributeLegendChanged(AP[Bf.currDockedPositionIdx].pos,this.legendW);}}function Bd(Bg,Bf){if(Bf){this.legendScale=Bg;this.legendResized=true;this.legendFixedW=undefined;Bc.call(this);}}if(this.attributeColorByLegend){this.legendFixedW=this.legendW+Be;this.legendScale=(this.legendFixedW)/(this.legendW/this.legendScale);this.legendResized=true;this.writeGlobalAttriLegndProperty(A1.SCALE_LEGEND_WIDTH,this.legendScale,{success:Bd});Bc.call(this);}},onLegendClicked:function(Bc){var Be=Bc.action,Bd=this.attributeColorByLegend,Bf={success:function(){this.hEvalSize4Legend();this.updateLegend();this.updateCanvasAfterAttributeLegendChanged(AP[Bd.currDockedPositionIdx].pos,this.legendW);}};if(Be==="close"){this.observableModel.showLegend.setValue(false);return ;}if(Be==="minimize"){this.writeGlobalAttriLegndProperty(A1.LEGEND_MODE,Aw.MINIMIZED,Bf);}else{if(Be==="restore"){this.writeGlobalAttriLegndProperty(A1.LEGEND_MODE,Aw.RESTORED,Bf);}}},unrender:function(){this.previousSelected=[];var Bd=AZ.detachEvent,Bc=AZ.TOUCHSTART;Bd(this._tn,Bc,this._tsCallback);this.hideInfoBox();if(this.attributeColorByLegend){this.attributeColorByLegend.unrender();delete this.attributeColorByLegend;}if(this.legendResizeListener){this.legendResizeListener.clear();}if(this.legendClickListener){this.legendClickListener.clear();}if(this.menuAnchor){document.body.removeChild(this.menuAnchor);this.menuAnchor=undefined;}this.destroyCanvas();this._super();},loadDefinedFormat:function(){if(this.defn&&this.defn.fmts){var Bc=this.defn.fmts;if(Bc["z-index"]){this.zIndex=Bc["z-index"];}}},refreshLabelInTree:function(){var Bc=function(Be,Bd){if(Be===this.root){return ;}Be.text=this.getLabelForEntity(Be);Be.idx=Bd;};this.dfs(this.root,Bc,"");},getColorByAttrsByID:function(Bd,Bg,Bf){var Bc=AV.isHierarchyObject(Bg)?"hid":"id",Bh=Bg.id,Be="";BS.forEach(Bd,function(Bi){if(Bi[Bc]===Bh){Bf.push(Bi.id);Be+=(Bi.dn||Bi.n)+" ";}});return Be;},getVerticalLegendColorByInfo:function(){if(this.isAttributeColorByType()){var Bw=this.attributeColorByElementsTemp;if(Bw===undefined){return ;}var Br,Bq,Bk,Bn,Be,Bl,Bm,Bf,Bt,Bv,Bs="",Bx=[],Bp=this.props.colorAttributes,Bd=Bp.length,Bg=Bw.length,Bu=this.modelData.dz.ColorBy.TemplateUnit,Bj,Bo=(Bu&&Bu.length)||0,Bc=[];for(Br=0;Br<Bo;Br++){Bj=Bu[Br];Bs+=this.getColorByAttrsByID(Bp,Bj,Bc);}Bs=Bs.substring(0,Bs.length-1);for(Br=0;Br<Bg;Br++){Be={};Bl="";Bm=[];Bf=[];Bt=Bw[Br];Bv=[];Be.color=Bt.color.value;Be.decodedColor=Be.color;Be.encodedColor=Az.encodeColor(Be.color);Be.isDefaultColor=Bt.isDefaultColor;while(Bt&&Bt.parentEntity){if(this.props.colorAttributeIndexes.indexOf(Bt.level)!==-1){Bk=Bt.id.split(";")[1];Bv.push({id:Bk,text:Bt.label});Bm.splice(0,0,Bt.id);}Bt=Bt.parentEntity;}for(Bq=0;Bq<Bv.length;Bq++){Bn=BS.find(Bv,"id",Bc[Bq]);Bl=Bl+Bv[Bn].text+" ";}Bv=[];Bl=Bl.substring(0,Bl.length-1);Be.label=Bl;for(Bq=0;Bq<Bd;Bq++){Bf.push(Bp[Bq].id);}Be.token={elements:Bm,levels:Bf};Bx.push(Be);}delete this.attributeColorByElementsTemp;this.verticalLegendColorByElements={item:Bs,elements:Bx};}else{if(this.props.hasColorInThresholds){var Bi=this.getColorByMetricThreshold(),Bh;if(Bi){Bh=AV.getColorByTitle(this.getMetricName(this.colorMetricIndex),Bi.rankMode);this.verticalLegendColorByElements={item:Bh,elements:Bi.items};}else{this.verticalLegendColorByElements=undefined;}}}},getVerticalLegendSizeByInfo:function(){var Bi=BU.call(this);if(Bi.max===Infinity&&Bi.min===-Infinity){this.verticalLegendSizeByElements=undefined;return ;}var Bj=this.getFormatString(this.sizeMetricIndex);var Bh=[],Bg,Bd=Bi.min,Be=Bi.max,Bl=(Be-Bd)/4;for(Bg=0;Bg<5;Bg++){Bh.push(AK.call(this,Bj,Be-Bg*Bl));}var Bk={},Bc;var Bf=this.getMetricName(this.sizeMetricIndex);if(Bi.hasNegativeValue){Bf=BR+Bf;}Bk.item=Bf;if(Bh.length>1){Bc=Bk.elements=[];BS.forEach(Bh,function(Bm){Bc.push({sign:"<",v:Bm});});if(Bc.length===5){Bc[0].sign="=";Bc[4].sign="=";}Bk.caseFlag=0;}if(Bh.length===1){Bk.elements=[{diameter:12,shape:"rect",sign:"=",v:Bh[0]}];Bk.caseFlag=2;}this.verticalLegendSizeByElements=Bk;},getHeaderColor:function(Bd){var Bc=a.clone(this.props.headerColors[Math.min(Bd.level,2)]);if(Bd.level!==0&&!this.props.isDefaultHeaderColor){Bc.opacity*=0.7;}return Bc;},refreshColorInTree:function(){var Bf=[],Be=[];var Bh=function(Br){if(Br===this.root){return ;}var Bp=this.props.colorAttributeIndexes,Bj=Bp[Bp.length-1];if(Br.level===Bj){var Bl,Bq=Bp.length,Bm=this.modelData.gts.row,Bk,Bs=[],Bo=[],Bt=[],Bn="";Bk=Br;for(Bl=0;Bl<=Bj;Bl++){Bs.splice(0,0,Bk);Bk=Bk.parentEntity;}for(Bl=0;Bl<Bq;Bl++){Bo.push(Bm[Bp[Bl]].id);Bn+=Bs[Bp[Bl]].id+":";Bt.push(Bs[Bp[Bl]].id);}if(Bf.indexOf(Bn)===-1){this.attributeColorByElementsTemp.push(Br);Bf.push(Bn);}this.preorderTraverse(Br,function(Bu){Bu.colorByAttributeIds=Bo;Bu.colorByElementIds=Bt;});}};if(this.isAttributeColorByType()){this.attributeColorByElementsTemp=[];this.preorderTraverse(this.root,Bh);}else{var Bc=this.modelData;if(this.props.colorMetricID!==m&&Bc.gsi.thresholds[this.props.colorMetricID]!==undefined){var Bi=Bc.gsi.thresholds[this.props.colorMetricID],Bg;for(Bg=0;Bg<Bi.length;Bg++){if(Bi[Bg].fmt&&Bi[Bg].fmt.bc){Be[Bg]=Bi[Bg].fmt.bc;}else{Be[Bg]=Ai.getCSSColorString(L);}}}}var Bd=function(Bn){if(Bn===this.root){return ;}var Bj,Bl=this.colorTheme,Bk=1,Bm,Bo,Bp;if(this.isAttributeColorByType()&&Bn.colorByAttributeIds&&Bn.colorByElementIds){Bo=Bn.colorByAttributeIds;Bp=Bn.colorByElementIds;Bm=this.model.docModel.getColorBy(Bo,Bp);Bj=Az.decodeColor(Bm.color);Bk=BD.call(this,Bo,Bp)/100;Bn.isDefaultColor=!Bm.isManual;}else{if(this.props.colorMetricID!==m&&Be.length>0&&Bn.thrColorIndex>=0){Bj=Ai.getCSSColorString(Be[Bn.thrColorIndex]);Bk=this.getPropsInfo().metricColorByOpacity;}else{Bj=Ai.getCSSColorString(L);}}Bn.color={value:Bj,opacity:Bk};if(this.props.isHeaderOnTop){Bn.headerColor=this.getHeaderColor(Bn,Bl.style==="light");}};this.dfs(this.root,Bd,"");},dfs:function(Be,Bh,Bf){if(!Be||Be.deleted){return ;}if(Bf===undefined){Bh.call(this,Be);}else{Bh.call(this,Be,Bf);}if(Be.entityChildren===undefined){return ;}var Bc=Be.entityChildren,Bd=Bc.length,Bg;for(Bg=0;Bg<Bd;Bg++){var Bi=Bc[Bg];if(Bf===undefined){this.dfs(Bi,Bh);}else{var Bj=Bf;if(!Bj){Bj=Bg.toString();}else{Bj=Bj+":"+Bg;}this.dfs(Bi,Bh,Bj);}}},preorderTraverse:function(Bd,Bh){if(Bd){var Be=Bh.call(this,Bd);if(Be===false){return ;}var Bg=Bd.entityChildren||[],Bc=Bg.length,Bf;for(Bf=0;Bf<Bc;Bf++){this.preorderTraverse(Bg[Bf],Bh);}}},getSingleBackgroundColor:function(){return this.background&&this.background.value&&(this.background.value.c1||this.background.value);},initCanvas:function(){var Bd=this,Bc=BF.call(this);this.destroyCanvas();this.addChildren(new mstrmojo.heatmap.vi.VisHeatMapCanvas(Bc));this.highlightCanvas=this.canvasObject.addDisposable(new mstrmojo.heatmap.vi.VisHeatMapHighlightCanvas({placeholder:this.highlightCanvasPlaceholder,isOnSelectionMode:function(){return Bd.previousSelected.length>0;},themeType:this.props.themeType,backgroundColor:this.getSingleBackgroundColor()}));this.highlightCanvas.render();this.highlightCanvas.parent=this;},destroyCanvas:function BP(){var Bc=this.canvasObject;if(Bc){this.highlightCanvas=null;this.removeChildren(Bc);Bc.destroy();}},scaleFactor:1,renderRectangles:function(){this.canvasObject.clearFontCache();this.refreshLabelInTree();this.refreshColorInTree();this.canvasObject.isHeaderOnTop=this.props.isHeaderOnTop;this.canvasObject.render();},renderLegend:function BM(){if(!this.props.showLegend){if(this.attributeColorByLegendPlaceHolder){this.attributeColorByLegendPlaceHolder.style.display="none";}return ;}if(!this.attributeColorByLegend){var Be=this;var Bd=this.canvasObject.addDisposable(new BQ.GMLegend({widget:this,model:this.model,placeholder:this.attributeColorByLegendPlaceHolder,currDockedPositionIdx:AQ(this.readGlobalAttriLegndProperty(A1.LEGEND_POSITION)),cutBy:this.legendCutBy,cssClass:"gm-legend",styles:this.HTML5PROPS.LEGEND,readGlobalProperty:function(Bf){return Be.readGlobalAttriLegndProperty(Bf);},writeGlobalProperty:function(Bf,Bg){if(Bf===BE.LEGEND_BG_COLOR){Be.observableModel.legendBackground.value.setValue(Az.decodeColor(Bg));}else{if(Bf===BE.LEGEND_BG_FILL_TRANSPARENCY){Be.observableModel.legendBackground.opacity.setValue(Bg/100);}else{if(Be.observableModel[Bf]){Be.observableModel[Bf].setValue(Bg);}else{Be.writeGlobalAttriLegndProperty(Bf,Bg,{success:function(){Be.reRender();}});}}}},configureLegendPopup:function(Bf,Bg){return Be.configureAttriLegendPopup(Bf,Bg);}}));Bd.render();Bd.parent=this;this.attributeColorByLegend=Bd;this.attributeColorByLegendPlaceHolder=Bd.domNode;}else{var Bc=this.attributeColorByLegend;Bc.currDockedPositionIdx=AQ(this.readGlobalAttriLegndProperty(A1.LEGEND_POSITION));this.initHTML5Props(this.HTML5PROPS);Bc.updateStyle(this.HTML5PROPS.LEGEND);Bc.updateTitleLineHeight();this.hEvalSize4Legend();this.updateLegend();Bc.updateSplitter();this.updateCanvasAfterAttributeLegendChanged(AP[Bc.currDockedPositionIdx].pos,this.legendW);}this.attributeColorByLegend.cutBy=this.legendCutBy;this.attributeColorByLegend.minHeight=this.legendMinHeight;this.attributeColorByLegend.updateContainerSize(this.getWidth(),this.getHeight());this.attributeColorByLegend.feedData([{dataType:A8.COLOR_BY,dataObj:this.verticalLegendColorByElements},{dataType:A8.SIZE_BY,dataObj:this.verticalLegendSizeByElements}],(this.readGlobalAttriLegndProperty(A1.LEGEND_MODE)===Aw.MINIMIZED));},getColorByMetricThreshold:function(){if(!this.props.hasColorInThresholds){return undefined;}var Bh;if(this.colorByMetricThreshold){Bh=this.colorByMetricThreshold;}else{var Be=this.modelData,Bi=Be.gsi.mx,Bc=this.props.colorMetricID,Bj={max:"",min:""},Bg,Bd;BS.forEach(Bi,function(Bl){if(Bl.did===Bc){Bj=Bl;return false;}});if(Bj.max===""&&Bj.min===""){this.colorByMetricThreshold=undefined;return ;}if(Be.gsi.thresholds[Bc]&&Bj){var Bk,Bf;Bk=Be.gsi.thresholds[Bc];Bg=AV.getRankMode(Bk);Bf=AV.getColorByFormatStr(this.getFormatString(this.colorMetricIndex),Bg);Bd=AV.getColorByItems(Bk,Bg,Bj.max,Bj.min,Bj.cnt,Bf,Ai.getCSSColorString(L));Bd.sort(function(Bm,Bl){var Bn;if(Bm.ceil>Bl.ceil){Bn=1;}else{if(Bm.ceil===Bl.ceil){Bn=0;}else{Bn=-1;}}return Bn;});}else{if(Bj){Bd=AV.getDefaultColorByItems(Ai.getCSSColorString(L),Bj.max,Bj.min);}else{Bd=AV.getDefaultColorByItems(Ai.getCSSColorString(L),1,0);}Bg=AM.VALUE;}Bh={rankMode:Bg,items:Bd};this.colorByMetricThreshold=Bh;}return Bh;},render:function(Bc){if(this.hasRendered&&this.unrender){this.unrender();}this._super(Bc);},reRender:function Ak(){if(this.hasError()){return ;}this._super();},loadDeleteStatus:function(Bg,Bc){if(!Bg.entityChildren){if(Bc===T.dftDel||Bc===T.usrDel){Bg.deleted=true;}else{delete Bg.deleted;}return ;}if((!Bc||Object.keys(Bc).length===0)&&!Bg.hasChildDeleted){return ;}var Bf=Bg.entityChildren,Be;for(Be=0;Be<Bf.length;Be++){var Bi=Bf[Be];var Bd=this.getEntityDisplayName(Bi);var Bh=Bc&&Bc[Bd];this.loadDeleteStatus(Bi,Bh);}},getFormatString:function Af(Bf){var Be=this.modelData,Bg=Be.nf||[],Bd=Bg.length,Bc;if(Bf>=0&&Bf<Bd){Bc=AV.getNumberFormat(Be,Bf);return Bc.replace(/\'/g,'"');}return"";},checkMetricValid:function AC(Bd){var Bc=this.modelData,Be=Bc.ghs.chs.items,Bf=Be[0]?Be[0].items.length:0;return !(Bd<0||Bd>=Bf);},getMetricName:function BK(Bj){var Bi="",Bf=this.modelData,Be=Bf.ghs.chs.items,Bd=Be.length,Bk=Bf.gts.col,Bg;if(!this.checkMetricValid(Bj)){return m;}for(Bg=0;Bg<Bd;Bg++){var Bh=Be[Bg].items[Bj].idx;var Bc=Bk[Bg].es[Bh].n;Bi+=Bc+" ";}return Bi.slice(0,Bi.length-1);},getEntityDisplayName:function AY(Bj){var Bc=Bj.level,Bg=(Bj.index===undefined)?Bj.indices[0]:Bj.index,Bo=0,Bl="",Be=this.attSpan,Bi=this.modelData.ghs.rhs.items,Bh=Bi[Bg].items,Bk=this.modelData.gts.row[Bc],Bf,Bd,Bn=[];for(Bf=0;Bf<Bc;Bf++){Bo+=!!this.modelData.gts.row[Bf].cs?this.modelData.gts.row[Bf].cs:Be[Bf];}for(Bf=Bo;Bf<Bo+Be[Bc];Bf++){var Bm=Bh[Bf].idx;if(Bm===-1){continue;}Bd=Bk.es[Bm];if(Bn.indexOf(Bd)===-1){Bl+=Bd.n+" ";Bn.push(Bd);}}Bl=Bl.substring(0,Bl.length-1);return Bl;},previousTooltip:null,previousSelected:[],drawHighlight:function(Bc){if(!Bc){return null;}var Bg=Bc===this.previousTooltip,Bd=this.props.isHeaderOnTop,Be=Bc.headerSize||Bc.size,Bf=!!Bc.entityChildren,Bh=this.highlightCanvas;Bh.highlight(Be,Bc.labelDomNode,{isHovered:Bg,isSelected:this.previousSelected.indexOf(Bc)!==-1,isEntityContainer:Bf,isHeaderOnTop:Bd});return Be;},updateEntityHighlight:function(Bc){if(!Bc){return ;}this.drawHighlight(Bc);var Bf=Bc===this.previousTooltip,Bd=this.props.isHeaderOnTop,Bg=this.highlightCanvas;if(!Bd){var Be=function(Bh,Bi){while(Bi){Bi=Bi.parentEntity;if(Bi===Bh){return true;}}return false;};(this.previousSelected||[]).forEach(function(Bh){if(Be(Bc,Bh)){Bg.highlight(Bh.size,Bh.labelDomNode,{isHovered:Bf,isSelected:true,isEntityContainer:!!Bh.entityChildren,isHeaderOnTop:false});}});}},refreshHighlights:function(Bc){if(!this.highlightCanvas){return ;}Bc=Bc||this.previousSelected||[];if(!this.props.isHeaderOnTop){Bc.sort(function(Be,Bd){var Bg=Be.level,Bf=Bd.level;if(Bg<Bf){return -1;}else{if(Bg>Bf){return 1;}else{return 0;}}});}this.highlightCanvas.clear();Bc.forEach(this.drawHighlight,this);},getLowestLevelRectangle:function(Be){var Bd=document.elementFromPoint(Be.pageX,Be.pageY);var Bc=[];while(!this.isLowestLevelRectangle(Bd)){Bd.style.display="none";Bc.push(Bd);Bd=document.elementFromPoint(Be.pageX,Be.pageY);}while(Bc.length){Bc.pop().style.display="block";}return Bd;},areaSelect:function(Be,Bf){var Bc=this.previousSelected.slice();if(!Bf.ctrlKey){this.removeAllSelections();}this.preorderTraverse(this.root,function(Bh){if(Bh===this.root||!Bh.size){return ;}if(!Bh.entityChildren&&!isNaN(Ad(Bh.size,Be).x)){this.addToSelection(Bh);return false;}});this.doSelection();this.refreshHighlights();if(!M(Bc,this.previousSelected)){A7.call(this,this.previousSelected);}var Bg,Bd=this.previousSelected;if(Bd&&Bd.length>0){Bg=AZ.position(this.canvasObject.domNode,true);this._toolbarContext={type:Ab.RECTANGLE,pos:{e:{pageX:Be.x+Bg.x,pageY:Be.y+Bg.y},getTarget:function(){return undefined;}},entity:Bd[0]};}},getEntityByTouch:function(Bi,Bo){var Bl=this.getElementBehindCurtains(Bi.evt);if(!Bl){return null;}var Bg=Bi.pageX,Be=Bi.pageY;if(Bo){var Bc=Bl,Bn=[];while(Bl!==this.domNode&&Bl.tagName.toLowerCase()!=="img"){Bn.push(Bl);Bl.style.visibility="hidden";Bl=document.elementFromPoint(Bg,Be);if(!Bl||Bl===Bc){break;}Bc=Bl;}while(Bn.length>0){var Bd=Bn.pop();Bd.style.visibility="visible";}}if(!Bl){return null;}var Bf;if(Bl!==this.domNode){if(Bl.getAttribute("idx")&&!Bo){Bf=this.getIdxObjectByTarget(Bl);}else{var Bm=AZ.position(this.canvasObject.domNode,true),Bk=Bg-Bm.x,Bh=Be-Bm.y;var Bj={x:Bk,y:Bh};Bf=this.canvasObject.getEntity(Bj);}}return Bf;},getLabelForEntity:function(Bg){if(!this.props.showMetricValues||Bg.entityChildren!==undefined){return this.getEntityDisplayName(Bg);}var Bf=this;var Be=AT(this,Bg);var Bc=Be.map(function(Bh){return A4(Bg,Bf,Bh).v;});Bc.unshift(this.getEntityDisplayName(Bg));var Bd="<span>"+Bc.join("<br>")+"</span>";return Bd;},lassoSelecting:function(){BN.removeClass(this.lassoSelector,"lasso-selector-hasContent");},lassoSelected:function(Bc){this.areaSelect({x:Bc.left,y:Bc.top,w:Bc.width,h:Bc.height},Bc);if(this.previousSelected.length){BN.addClass(this.lassoSelector,"lasso-selector-hasContent");}},lassoSelectorResized:function(Bc){this.lassoSelecting();this.lassoSelected(Bc);},configurePopup:function(Bc,Bd){Bc.hostId=this.id;Bc.hostElement=Bd;},showMenu:function(Bf,Bc){var Be=this.menuAnchor,Bd;if(!Be){Be=document.createElement("div");Be.id=this.id+"-hm-menu-anchor";Be.style.position="absolute";document.body.appendChild(Be);this.menuAnchor=Be;}Bd=Be.style;Bd.left=Bc.pageX+"px";Bd.top=Bc.pageY+"px";this.configurePopup(Bf,Be);this.openPopup(Bf.newInstance());},getSelectionMenuConfig:function(){var Bc=AV.mergeHashes(G.call(this),i.call(this)),Bd=[{name:"filter"},{name:"editGroup"},{name:"editCalculation"},{name:"createDe"},{name:"showData"},{name:"renameDe"}];return AV.mergeMenuConfigs(Bc,Bd);},getBlankSpaceMenuConfig:function(Bh){var Bd=new mstrmojo.ui.menus.MenuConfig(),Bf=this,Be=Bf.props;Bd.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){l.call(Bf,Bh);});if(this.hasSizebyOrColorby()){if(!Be.showLegend){var Bg=mstrmojo.desc(12001,"Show Legend"),Bc="showLegend";Bd.addMenuItem(Bg,"xt",this.getMenuHandler(Bc));}}return Bd;},keepOnly:function(){this.updateAfterKeepOnly(true);},exclude:function(){this.updateAfterKeepOnly(false);},getMenuHandler:function(Bd){var Bm=this._super(Bd);if(Bm!==mstrmojo.emptyFn){return Bm;}var Bi=this,Bf={keepOnly:function Bh(){Bi.keepOnly();Bi.noHighlightAfterKeepOnlyExcludeDrill=true;},exclude:function Bk(){Bi.exclude();Bi.noHighlightAfterKeepOnlyExcludeDrill=true;},showData:function Be(){Bi.showData();},rectangleDrill:function Bg(Bn){AV.doDrill(Bi,Bn.ctxt.drillUnit,At,{headerDrill:false});Bi.noHighlightAfterKeepOnlyExcludeDrill=true;},headerDrill:function Bl(Bn){AV.doDrill(Bi,Bn.ctxt.drillUnit,At,{headerDrill:true});Bi.noHighlightAfterKeepOnlyExcludeDrill=true;},showLegend:function Bj(){Bi.observableModel.showLegend.setValue(true);},hideLegend:function Bc(){Bi.observableModel.showLegend.setValue(false);}};if(Bf.hasOwnProperty(Bd)){return Bf[Bd];}return mstrmojo.emptyFn;},isClearAllEnabled:function(Bg){var Bd=this.modelData||{},Bf=AV.getPropertyByPath(Bd,"gts.row",[]),Bc,Bh,Bi=Bd.sc,Be;if(Bg){Be=Bg.id||"";Bc=AV.findInArray(Bf,function(Bj){return Be.indexOf(Bj.id)!==-1;});if(Bc!==-1){Bh=Bf[Bc];Bi=Bh.sc||Bi;}}return !!(Bi===undefined||Bi.showall);},addToSelection:function(Bc){var Bd=this.previousSelected||[];if(Bd.indexOf(Bc)===-1){Bd.push(Bc);}},removeFromSelection:function(Bc){var Be=this.previousSelected||[],Bd=Be.indexOf(Bc);if(Bd!==-1){Be.splice(Bd,1);return true;}return false;},removeAllSelections:function(Bd){var Bc=(this.previousSelected||[]).slice();this.previousSelected=[];if(!Bd&&Bc.length>0){this.raiseEvent({name:"selectionBatchRemove",entities:Bc});}return Bc;},onclick:function(Br,Bg){delete this.noHighlightAfterKeepOnlyExcludeDrill;if(!Bg){this.dismissLassoSelector();}var Bt=Br.getTarget(),Bd=false,Bl=false,Bh=false,Bp=false,Bj,Bq,Bn,Bs,Bf,Bc,Bo,Bu=Am.call(this),Be=Q.call(this),Bk;if(this.isRectangle(Bt)){Bj=this.getEntityByTouch(R(Br));if(Bj){Bk=Bj.level===this.levelAttributes.length-1;Bn=this.previousSelected;Bq=Bn.length;Bs=Bq===0;Bf=Bn.indexOf(Bj)!==-1;Bc=Br.e.ctrlKey||Br.e.metaKey;Bo=Bq>1;if(Bf&&!Bo){if(!Bg&&this.isClearAllEnabled(Bj)){Bl=true;this.removeAllSelections();}}if((Bf&&!Bc&&Bo&&!Bg)||(!Bf&&!Bc)||(Bu^Bk&&!Bf&&Bc)||(!(Bu||Be)&&Bf)){Bl=true;Bh=true;this.removeAllSelections();this.addToSelection(Bj);}if(!Bf&&Bc){Bh=true;this.addToSelection(Bj);}if(Bf&&Bc&&Bo){if(!Bg){Bp=true;this.removeFromSelection(Bj);}}Bl=Bl||Bs===(this.previousSelected.length>0);if(Bl){this.highlightCanvas.clear();}if(Bh||Bp){this.updateEntityHighlight(Bj);}if(Bl||Bh||Bp){this.doSelection();Bd=true;}if(!Bf){this.dismissLassoSelector();}}}var Bi=this.getComponentType(Br),Bm;if(!Bg){if(Bi.type===Ab.BACKGROUND||Bi.type===Ab.LEGEND_BACKGROUND){Bm=(this.previousSelected||[]).filter(this.isClearAllEnabled,this);if(Bm.length>0){Bm.forEach(function(Bv){this.removeFromSelection(Bv);},this);this.doSelection();Bd=true;this.refreshHighlights(Bm);this.refreshHighlights();}}}if(this.attributeColorByLegend){this.attributeColorByLegend.hideToolbar();}if(Bd){A7.call(this,this.previousSelected);}this._toolbarContext={type:Bi.type,pos:Br};},getElementBehindCurtains:function(Be){var Bc=[this.highlightCanvas.domNode,this.lassoSelector];BS.forEach(Bc,function(Bf){Bf._visibility=Bf.style.visibility;Bf.style.visibility="hidden";});var Bd=document.elementFromPoint(Be.e.pageX,Be.e.pageY);BS.forEach(Bc,function(Bf){Bf.style.visibility=Bf._visibility;Bf._visibility=undefined;});return Bd;},getComponentType:function(Bf){var Bd;var Be=this.getElementBehindCurtains(Bf);if(this.isRectangle(Be)){if(Be.getAttribute("idx")||(Be.tagName==="SPAN"&&Be.parentNode.getAttribute("idx"))){Bd=Ab.RECTANGLE_LABEL;}else{var Bc=this.getEntityByTouch(R(Bf));if(Bc){Bd=Ab.RECTANGLE;}else{Bd=Ab.BACKGROUND;}}}else{if(this.attributeColorByLegend.domLegend===Be){Bd=Ab.LEGEND_BACKGROUND;}else{if(Be===this.domNode){Bd=Ab.BACKGROUND;}}}return{type:Bd,target:Be};},isRectangle:function(Bc){return AZ.contains(this.canvasObject.domNode,Bc,true)||AZ.contains(this.highlightCanvas.domNode,Bc,true)||AZ.contains(this.lassoSelector,Bc,true);},isLowestLevelRectangle:function(Bc){return Bc.getAttribute&&Bc.getAttribute("idx")&&!(Bc.innerHTML);},toggleSelectAll:function(Bc){var Bd=this.modelData.gts.row[Bc.level].sc;if((Bd&&Bd.all!=="false"&&Bd.all!==false)||!this.hasGridTarget){this.selectAll=!this.selectAll;return true;}return false;},doSelection:function(){this.prepareSelectedNodesInfo();this.endSelections();},getObjectByIdx:function(Bc){if(Bc){var Bd=Bc.split(":");var Bf=this.root,Be;for(Be=0;Be<Bd.length;Be++){Bf=Bf.entityChildren[Bd[Be]];}return Bf;}return null;},setColorByType:function(Bc){if(Bc==="attribute"){this.props.colorByType="attribute";this.colorTheme.colorByType="attribute";}else{this.props.colorByType="metric";delete this.colorTheme.colorByType;}},clearChildren:function(Bc){if(!Bc){return ;}while(Bc.firstChild){Bc.removeChild(Bc.firstChild);}},setLayout:function BT(Bc){var Bf=parseInt(this.width,10),Bd=parseInt(this.height,10),Bg=this.LayoutProperties.Padding,Bh=Bf-2*Bg,Bj=Bd-2*Bg,Be=0;if(!this.legendSize){this.legendSize={};}var Bi=this.legendSize;if(this.props.showLegend){if(this.legendType===A9.VERTICAL){if(!Bc){if(this.attributeColorByLegend){Bc=AP[this.attributeColorByLegend.currDockedPositionIdx].pos;}else{Bc=this.readGlobalAttriLegndProperty(A1.LEGEND_POSITION);}}this.hEvalSize4Legend();Bi.w=this.legendW;Bi.h=this.legendH;Bh-=Bi.w;if(!this.isOnRight(Bc)){Be=Bi.w;}}}this.heatMapSize={x:Be,y:0,w:Bh,h:Bj};this.maxScale=10;},hEvalSize4Legend:function(){var Bg,Be=this.verticalLegendColorByElements,Bd=this.verticalLegendSizeByElements,Bf=this.getWidth(),Bc=this.getHeight(),Bh=this.HTML5PROPS.LEGEND,Bi;if(this.props.showLegend===false){this.legendW=this.legendH=this.legendP=0;}else{V.applyHTML5Props(Bh);this.legendP=s;if(!this.legendScale){Bi=this.readGlobalAttriLegndProperty(A1.SCALE_LEGEND_WIDTH);if(Bi){this.legendScale=Bi;this.legendResized=true;}}Bg=V.getLegendSize([{dataType:A8.COLOR_BY,dataObj:Be},{dataType:A8.SIZE_BY,dataObj:Bd}],this.legendResized?this.legendScale:undefined,Bf,Bc,Bh,this.legendFixedW);this.legendCutBy=Bg.cutBy;this.legendMinHeight=Bg.minHeight;this.legendFixedW=Bg.width;if(Bg.scale){this.legendScale=Bg.scale;}if(this.readGlobalAttriLegndProperty(A1.LEGEND_MODE)===Aw.MINIMIZED||Bg.autoCollapse){Bg=V.getLegendSize4MinMode(Be,Bc);this.legendCutBy=undefined;}this.legendW=Bg.width;this.legendH=Bg.height;}},applyLayout:function(){if(this.heatMapSize){if(this.canvasOuterContainer){var Bc=this.canvasOuterContainer.style;Bc.left=this.heatMapSize.x+"px";Bc.top=this.heatMapSize.y+"px";Bc.width=this.heatMapSize.w+"px";Bc.height=this.heatMapSize.h+"px";}if(this.canvasContainer){var Be=this.canvasContainer.style;Be.width=this.heatMapSize.w+"px";Be.height=this.heatMapSize.h+"px";}if(this.canvasObject){var Bd=this.canvasObject;Bd.width=this.heatMapSize.w;Bd.height=this.heatMapSize.h;}}},refreshWidget:function(){var Bc=BF.call(this);a.copy(Bc,this.canvasObject);this.setLayout();this.applyLayout();Ac.call(this);this.renderRectangles();this.refreshHighlights();if(this.props.showLegend){if(this.isAttributeColorByType()||this.props.hasColorInThresholds){this.getVerticalLegendColorByInfo();}if(this.props.sizeMetricEnabled){this.getVerticalLegendSizeByInfo();}}this.renderLegend();},hideInfoBox:function(){var Bd=c.domNode;if(Bd&&Bd.parentNode){var Bc=this.previousTooltip;this.previousTooltip=undefined;this.updateEntityHighlight(Bc);Bd.parentNode.removeChild(Bd);}},getIdxObjectByTarget:function(Be){var Bd=AZ.findAncestorByAttr(Be,"idx",true,this.domNode);var Bc=Bd&&Bd.value;if(!Bc){return null;}return this.getObjectByIdx(Bc);},showInfoBox:function(Bd,Bg){if(!Bd){return ;}c.toggle(true);if(Bd===this.previousTooltip){c.moveTo(Bg.x,Bg.y);return ;}var Bf=this.previousTooltip;this.previousTooltip=Bd;this.updateEntityHighlight(Bf);this.updateEntityHighlight(Bd);var Bc=Bd.headerSize||Bd.size;if(!Bc||isNaN(Bc.x)){return ;}var Be=AI(Bd,this);if(Be){if(!c.domNode.parentNode){document.body.appendChild(c.domNode);}c.displayInfo(Be,Bg);}},onmousedown:function(){this._isMouseDown=true;},onmousemove:function(Be){if(!this._isMouseDown){var Bf=R(Be);var Bd=Bf.target;if(!Bd||!this.isRectangle(Bd)){return ;}var Bc=this.getEntityByTouch(Bf);if(Bc){this.showInfoBox(Bc,{x:Be.e.pageX,y:Be.e.pageY});}}},onmouseup:function(){delete this._isMouseDown;},onmouseout:function AH(Be){var Bd=this.canvasContainer,Bc=Be.e.toElement||Be.e.relatedTarget;if(!AZ.contains(Bd,Bc,true)){this.hideInfoBox();}},oncontextmenu:function As(Bc){this.onclick(Bc,true);this.hideInfoBox();var Bd=this.getComponentType(Bc),Bf=U[Bd.type];if(Bf){Bf.call(this,Bc,Bd.target);Bc.cancel();}if(this.attributeColorByLegend){var Bg=Bc.getTarget(),Be=this.attributeColorByLegend;if(AZ.contains(Be.domNode,Bg,true)){Be.handleRMCOnLegend(Bc);}else{Be.hideToolbar();}}Bc.preventDefault();return false;},destroy:function(Bd){var Bc=this.attributeColorByLegend;if(Bc){Bc.hideToolbar();}this._super(Bd);},readGlobalAttriLegndProperty:function P(Be){var Bd=this.props,Bc,Bf;switch(Be){case BE.LEGEND_BG_COLOR:Bf=Bd.lgdBgFillClr;break;case BE.LEGEND_BG_FILL_STYLE:Bf=Bd.lgdBgFillStyle;break;case BE.LEGEND_BG_FILL_EFFECT:Bf=Bd.lgdBgFillEff;break;case BE.LEGEND_BG_FILL_TRANSPARENCY:Bf=Bd.lgdBgFillTrans;break;case BE.LEGEND_FONT_SIZE:Bf=Bd.lgdFntSz;break;case BE.LEGEND_FONT_FAMILY:Bf=Bd.lgdFntFml;break;case BE.LEGEND_FONT_STYLE:Bf=Bd.lgdFntStyle;break;case BE.LEGEND_FONT_COLOR:Bf=Bd.lgdFntClr;break;case BE.LEGEND_BORDER_SHOW:Bf=Bd.lgdBdrShw;break;case BE.LEGEND_BORDER_COLOR:Bf=Bd.lgdBdrClr;break;case BE.LEGEND_BORDER_THICKNESS:Bf=Bd.lgdBdrThk;break;case BE.LEGEND_BORDER_LINE_STYLE:Bf=Bd.lgdBdrStyle;break;case BE.COLOR_SQUARE_COLOR:Bc=this.colorSqureIdentity;if(Bc){Bf={color:Bc.decodedColor,isDefaultColor:Bc.isDefaultColor};}else{Bf={color:"#0000FF",isDefaultColor:true};}break;case A1.LEGEND_MODE:Bf=Bd.lm;break;case A1.LEGEND_POSITION:Bf=Bd.LegendPosition;break;case A1.SCALE_LEGEND_WIDTH:Bf=Bd.lwr;break;}if(Bf===undefined||((typeof Bf)==="number"&&isNaN(Bf))){Bf=this.defaultsLegendPop&&this.defaultsLegendPop[Be];}return Bf;},initHTML5Props:function(Bf){var Bd=Bf.LEGEND={},Be=function(Bh,Bg){Bh.fontWeight=(Bg&H.FS_BOLD?"bold":"normal");Bh.fontStyle=(Bg&H.FS_ITALIC?"italic":"normal");if((Bg&H.FS_STRIKETHROUGH)&&(Bg&H.FS_UNDERLINE)){Bh.textDecoration="line-through underline";}else{if(Bg&H.FS_STRIKETHROUGH){Bh.textDecoration="line-through";}else{if(Bg&H.FS_UNDERLINE){Bh.textDecoration="underline";}else{Bh.textDecoration="none";}}}},Bc=function(Bg){var Bh=["solid","dashed","dotted"];return Bh[Bg]||"none";};Bd.fontFamily=this.readGlobalAttriLegndProperty(BE.LEGEND_FONT_FAMILY);Bd.fontSize=this.readGlobalAttriLegndProperty(BE.LEGEND_FONT_SIZE);Be(Bd,this.readGlobalAttriLegndProperty(BE.LEGEND_FONT_STYLE));Bd.color=Az.decodeColor(this.readGlobalAttriLegndProperty(BE.LEGEND_FONT_COLOR));Bd.backgroundColor=Az.decodeColor(this.readGlobalAttriLegndProperty(BE.LEGEND_BG_COLOR));Bd.opacity=this.readGlobalAttriLegndProperty(BE.LEGEND_BG_FILL_TRANSPARENCY)/100;if(this.readGlobalAttriLegndProperty(BE.LEGEND_BORDER_SHOW)){Bd.borderWidth=this.readGlobalAttriLegndProperty(BE.LEGEND_BORDER_THICKNESS);Bd.borderStyle=Bc(this.readGlobalAttriLegndProperty(BE.LEGEND_BORDER_LINE_STYLE));Bd.borderColor=Az.decodeColor(this.readGlobalAttriLegndProperty(BE.LEGEND_BORDER_COLOR));}},configureAttriLegendPopup:function q(Bc,Bd){Bc.hostId=this.id;Bc.hostElement=Bd;},writeGlobalAttriLegndProperty:function(Bd,Be,Bg){var Bc=!!(Bg&&Bg.success),Bf=function(Bj,Bi){var Bh=this.props;Bh.unmarshal(Bd,Bj);if(Bc){Bg.success.call(this,Bh[Bd],Bi);}};if(Bd===BE.COLOR_SQUARE_COLOR){this.props.unmarshal(Bd,Be);this.setProperty(Bd,Be,{callback:Bg});}else{Bf.call(this,Be,false);this.setProperty(Bd,this.props.marshal(Bd),{suppressData:true,clientUndoRedoCallback:Bc?Bf:undefined});}},onLegendDropZoneChange:function g(Bc,Bd){this.setLegendSlot(Bc,Bd);},onLegendDropped:function(Bc){this.writeGlobalAttriLegndProperty(A1.LEGEND_POSITION,Bc,{success:function(Be,Bd){if(Bd){this.renderLegend();this.updateCanvasAfterAttributeLegendChanged(Be,this.legendW);}}});},setLegendSlot:function(Bd,Bg){var Bf=this.attributeColorByLegend.currDockedPositionIdx,Bh=this.canvasOuterContainer;if(Bg!==Bf){var Bc=this.isOnRight(AP[Bf].pos),Be=this.isOnRight(Bd.pos);if(Bc!==Be){Bh.style.left=Be?"0px":this.legendW+"px";}}},isOnRight:function(Bc){return(Bc===AG.RIGHT_MIDDLE||Bc===AG.RIGHT_TOP||Bc===AG.RIGHT_BOTTOM);},updateLegend:function(){var Bc=this.attributeColorByLegend;this.attributeColorByLegendPlaceHolder.style.width=this.legendW+"px";this.attributeColorByLegendPlaceHolder.style.height=this.legendH+"px";Bc.width=this.legendW;Bc.height=this.legendH;Bc.cutBy=this.legendCutBy;Bc.minHeight=this.legendMinHeight;Bc.updateContainerSize(this.getWidth(),this.getHeight());Bc.feedData([{dataType:A8.COLOR_BY,dataObj:this.verticalLegendColorByElements},{dataType:A8.SIZE_BY,dataObj:this.verticalLegendSizeByElements}],(this.readGlobalAttriLegndProperty(A1.LEGEND_MODE)===Aw.MINIMIZED));Bc.updateAfterResize();},toggleLegend:function(Bc){var Be=this.attributeColorByLegend,Bd;Bd=Be.domNode.style;if(!Bc){Be.hideToolbar();Bd.display="none";}else{if(Bd.display!=="block"){Bd.display="block";}}},updateCanvasAfterAttributeLegendChanged:function(Bc,Bg){var Bf=parseInt(this.width,10),Bd=parseInt(this.height,10),Bh=this.LayoutProperties.Padding,Bi=Bf-2*Bh-Bg,Bj=Bd-2*Bh,Be=0;if(this.props.showLegend&&!this.isOnRight(Bc)){Be=Bg;}this.heatMapSize={x:Be,y:0,w:Bi,h:Bj};this.applyLayout();Ac.call(this);this.renderRectangles();this.highlightCanvas.resetCanvasRect(this.heatMapSize);this.refreshHighlights();},getCellForNode:function u(Bd){var Bc=this.levelAttributes[Bd.level];return{at:Bd.at,dei:Bd.dei,dpt:Bd.dpt,o:Bd.o,n:Bc.name,tui:Bd.tui,ui:Bd.ui,axis:1,v:Bd.label,tid:Bc.id};},getCellUnitIndex:function E(Bc){return Bc.o;},getColorByElements:function B(){var Bc=this.verticalLegendColorByElements,Bd=this,Be;if(Bc===undefined){this.getVerticalLegendColorByInfo();Bc=this.verticalLegendColorByElements||{};}Be=(Bc.elements||[]).map(function(Bg){var Bf=Bg.token,Bi=Bf.elements||[],Bh=Bf.levels||[];return{text:Bg.label,color:Bg.color,opacity:BD.call(Bd,Bh,Bi),comb:b(Bh,Bi)};});Be.unshift({text:mstrmojo.desc(2461,"All"),color:"#ffffff",opacity:100,comb:[]});return Be;},updateColorByOpacity:function(Be,Bc){Be=[].concat(Be);Bc=[].concat(Bc);if(Be.length!==Bc.length){throw new Error("comb and opacity number not match");}var Bd=this.getPropsInfo(),Bf=Bd.attrColorByOpacity||{};Be.forEach(function(Bi,Bh){var Bk=Bi.map(function(Bl){return Bl.tid;}).join("|"),Bj=Bi.map(function(Bl){return Bl.eid;}).join("|"),Bg=Bf[Bk];if(Bg===undefined){Bg={};Bf={};}Bg[Bj]=Bc[Bh];Bf[Bk]=Bg;});this.observableModel.colorByOpacity.setValue(Bf);},execFormatHandler:function(){var Bh=function(){AV.selectPropertyPanel(this,0);}.bind(this);var Bg=this.previousSelected;if(Bg===undefined||Bg.length===0){Bh();return ;}var Bi=Am.call(this),Bd=Q.call(this),Be=this._toolbarContext,Bj,Bf,Bc;if(!Bi&&!Bd){return ;}if(Be===undefined){Bh();return ;}Bj=Be.pos;Bf=Be.type;Bc=Be.entity||this.getEntityByTouch(R(Bj));switch(Bf){case Ab.RECTANGLE_LABEL:case Ab.RECTANGLE:o.call(this,Bc,Bj);break;default:Bh();break;}},onNDECreated:function(Bc){Bc.forEach(function(Bf){var Bd=Bf.id,Be=Bf.unitId;this.dfs(this.root,function(Bg){var Bh=Bg.id||"";if(Bh.indexOf(Bd)!==-1&&Bh.indexOf(Be)!==-1){this.addToSelection(Bg);}}.bind(this));},this);this.doSelection();this.refreshHighlights();},triggerFontScaleChangeEvent:function(){f.call(this,this.props.fonts);},isAttributeColorByType:function(){return this.props.colorByType==="attribute";},isMetricColorByType:function(){return this.props.colorByType==="metric";},onselectionBatchRemove:function(Bc){this.refreshHighlights(Bc.entities);}});}());