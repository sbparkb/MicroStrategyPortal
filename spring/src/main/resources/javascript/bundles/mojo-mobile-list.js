mstrmojo.chart.model.enums.EnumDSSObjectType={DssTypeUnknown:-1,DssTypeReserved:0,DssTypeGeneric:5,DssTypeFormatBAD:46,DssTypeFilter:1,DssTypeTemplate:2,DssTypeReportDefinition:3,DssTypeMetric:4,DssTypeStyle:6,DssTypeAggMetric:7,DssTypeFolder:8,DssTypeDevice:9,DssTypePrompt:10,DssTypeFunction:11,DssTypeAttribute:12,DssTypeFact:13,DssTypeDimension:14,DssTypeTable:15,DssTypeDatamartReport:16,DssTypeFactGroup:17,DssTypeShortcut:18,DssTypeResolution:19,DssTypeMonitor:20,DssTypeAttributeForm:21,DssTypeSchema:22,DssTypeFormat:23,DssTypeCatalog:24,DssTypeCatalogDefn:25,DssTypeColumn:26,DssTypePropertyGroup:27,DssTypePropertySet:28,DssTypeDBRole:29,DssTypeDBLogin:30,DssTypeDBConnection:31,DssTypeProject:32,DssTypeServerDef:33,DssTypeUser:34,DssTypeTransmitter:35,DssTypeConfiguration:36,DssTypeRequest:37,DssTypeScript:38,DssTypeSearch:39,DssTypeSearchFolder:40,DssTypeDatamart:41,DssTypeFunctionPackageDefinition:42,DssTypeRole:43,DssTypeSecurityRole:44,DssTypeLocale:45,DssTypeConsolidation:47,DssTypeConsolidationElement:48,DssTypeScheduleEvent:49,DssTypeScheduleObject:50,DssTypeScheduleTrigger:51,DssTypeLink:52,DssTypeDbTable:53,DssTypeTableSource:54,DssTypeDocumentDefinition:55,DssTypeDrillMap:56,DssTypeDBMS:57,DssTypeMDSecurityFilter:58,DssTypePromptAnswer:59,DssTypePromptAnswers:60,DssTypeGraphStyle:61,DssTypeChangeJournalSearch:62,DssTypeNCSObjects:255,DssTypeReservedLastOne:63};(function(){mstrmojo._CanRenderChildrenOnShow=mstrmojo.provide("mstrmojo._CanRenderChildrenOnShow",{_subs_renderOnShow:null,childRenderCheck:function B(D){if(this.renderMode!=="onshow"){return this._super(D);}if(D.visible){return this._super(D);}var C=this._subs_renderOnShow;if(!C){C={};this._subs_renderOnShow=C;}if(!C[D.id]){C[D.id]=D.attachEventListener("visibleChange",this.id,"_on_child_visibleChange");}return false;},_on_child_visibleChange:function A(C){if(this.hasRendered){var E=C&&C.src;if(E&&this.childRenderCheck(E)){var D=this._subs_renderOnShow;if(D){E.detachEventListener(D[E.id]);delete D[E.id];}E.render();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,d){var Z=D.getMousePosition(D.firstTouch(b,d),b);D.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*O*F/d).toFixed(2):0,y:d?Number(b.y*O*F/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],s=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-s.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=s.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");function C(G,H,E){var F=G.createElement("input");F.name=H;F.type="hidden";F.value=E;return F;}function B(K,J){J=J.substring(J.indexOf("?")+1,J.length);var M=J.split("&"),L="",H="";var N=/\+/g,I,F;for(I=0,F=M.length;I<F;I++){var E=M[I].split("=");L=E[0];H=E[1];if(H){H=decodeURIComponent(H.replace(N," "));}var G=document.createElement("INPUT");G.type="HIDDEN";G.name=L;G.value=H;K.appendChild(G);}return false;}mstrmojo.form={createDynamicForm:function A(E){var F=document.createElement("FORM"),G=E.indexOf("?")>0;F.name="dynamic_form";F.method="POST";F.action=(G?E.substring(0,E.indexOf("?")):E);if(G){B(F,E);}document.body.appendChild(F);return F;},sendLinkAsForm:function(E,G){var F=this.createDynamicForm(E);this.send({},F.action,F.method,G,null,null,F);},sendLink:function(E,F){if(!mstrmojo.isUrlExternal(E)){mstrmojo.form.sendLinkAsForm(E,F);}else{if(mstrmojo.array.indexOf(["_new","_blank"],F)>-1){window.open(E);}else{window.location.href=E;}}},send:function D(K,L,E,N,I,G,F){var P=((I&&I.hWin)||window).document,M=F||P.createElement("form"),J=mstrApp;K=mstrmojo.addCSRFTokenToTaskParams(K);M.method=E||"POST";if(N){M.target=N;}M.action=L||J.name;G=(G!==undefined)?G:!(M.action&&M.action.indexOf("aspx")>0)&&mstrConfig.addTimeStampToPreventCaching;if(!!J.addJSessionIdToURL&&J.httpSessionId){M.action+=";jsessionid="+J.httpSessionId;}if(G){M.action+=";uxts"+mstrmojo.now();}M.appendChild(C(P,"xts",String(mstrmojo.now())));var Q;for(Q in J.persistTaskParams){K[Q]=J.persistTaskParams[Q];}if(J.servletState&&J.name){K[J.name]=J.servletState;}if(K){var H;for(H in K){if(K[H].constructor===Array){mstrmojo.array.forEach(K[H],function(R){M.appendChild(C(P,H,R));});}else{M.appendChild(C(P,H,K[H]));}}}P.body.appendChild(M);try{M.submit();}catch(O){if(N&&O.result===2147500037&&!window.open("","","width=1,height=1,left=0,top=0,scrollbars=no")){mstrmojo.alert("*This action requires popups to be allowed in the browser.*");}else{mstrmojo.err("Form submission failed for an unknown reason.");}}P.body.removeChild(M);},addURLAsHiddenInputsToForm:B};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;mstrmojo.ui._IsIncFetchList=mstrmojo.provide("mstrmojo.ui._IsIncFetchList",{_mixinName:"mstrmojo.ui._IsIncFetchList",ifDataHelper:null,supportsIncFetch:false,isFetching:false,initScroll:function A(){var G=this.ifDataHelper,F=this,E=this.scrollNode||this.domNode;this.supportsIncFetch=G&&G.hasNext();if(G&&this.supportsIncFetch){this._scroll=function D(){if(E.offsetHeight+E.scrollTop>=E.scrollHeight){F.raiseEvent({name:"incFetch",id:F.id});}};C.attachEvent(E,"scroll",this._scroll);this.attachEventListener("incFetch",this.id,function(H){if(!this.supportsIncFetch||this.isFetching){return ;}if(this.preNext){this.preNext();}this.set("isFetching",true);G.next({complete:function(I){if(F.postNext){F.postNext();}F.set("isFetching",false);},success:function(I){F.addItems(I.items);},failure:function(I){F.supportsIncFetch=false;mstrmojo.alert("Error in fetching next: "+I);}});});}},addItems:function B(D){if(this._super){this._super(D);}if(!this.ifDataHelper.hasNext()){this.supportsIncFetch=false;var E=this.scrollNode||this.domNode;C.detachEvent(E,"scroll",this._scroll);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.QueuedXHR");var F=mstrmojo.hash;function J(K,L){return function(){if(K[L]){K[L]();}};}var B=[];function H(L){var K;switch(L.cacheLevel){case mstrmojo.AjaxCall.CACHELEVEL_LOCAL:if(L._cache==null){L._cache=[];}K=L._cache;break;default:if(B==null){B=[];}K=B;break;}return K;}function E(N){var M=H(N);var P={cache:M,idx:-1},O=N.params;if("xts" in O){delete O.xts;}for(var L=0,K=M.length;L<K;L++){var Q=M[L];if(Q&&F.equals(Q.url,N.url)&&F.equals(Q.params,O)){P.idx=L;break;}}return P;}function C(L){var K=H(L),M=F.copy(L.params);delete M.xts;K.push({url:L.url,params:M,res:F.copy(L.response)});}function D(K){var L=E(K);if(L&&L.idx>=0){K.response=L.cache[L.idx].res;return true;}return false;}mstrmojo.AjaxCall=mstrmojo.declare(mstrmojo.QueuedXHR,null,{scriptClass:"mstrmojo.AjaxCall",method:"POST",url:"",params:null,onsuccess:null,onerr:null,oncomplete:null,oncancel:null,readCache:false,writeCache:false,cacheLevel:"",_cache:null,useQueue:false,init:function I(K){this._super(K);F.copy(K,this);},send:function A(){var K=this;if(this.readCache&&D(this)){this.onsuccess();return ;}this.request(this.method,this.url,{success:function(){if(K.writeCache){C(K);}if(K&&K.onsuccess){K.onsuccess();}},failure:J(K,"onerr"),complete:J(K,"oncomplete")},this.params,!this.useQueue);},cancel:function G(){this._super();if(this.oncancel){this.oncancel();}}});mstrmojo.AjaxCall.CACHELEVEL_GLOBAL="global";mstrmojo.AjaxCall.CACHELEVEL_LOCAL="local";})();(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,b=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(e){var d=parseInt(e,10),f=mstrmojo.validation.STATUSCODE;if(d===0||d===1||d>10){return{code:f.VALID};}return{code:f.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(d){var e=String(d).replace(/[^\d]/g,"");if(e.length<10){return{code:b.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:b.VALID};},VALIDATE_ZIPCODE:function G(d){var f="",e=this.dtp;if(!H.REGEXP.US_ZIP.test(d)){if(H.isNumeric(e)||H.isInt(e)){f=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(e)){f=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:b.INVALID,msg:f};}return{code:b.VALID};},VALIDATE_EMAIL:function T(d){var e=d.indexOf("@");if(e===-1){return{code:b.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(d.substring(e).indexOf(".")===-1){return{code:b.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(d)?{code:b.VALID}:{code:b.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(d){var f=this.dtp,e;if(H.isNumeric(f)||H.isInt(f)){e=String(d).replace(/[^\d]/g,"");if(e.length!==9){return{code:b.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:b.VALID};}};H.isInt=function D(d){return A[d]===1;};H.isNumeric=function Y(d){return A[d]===2||A[d]===5;};H.isString=function J(d){return A[d]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,Z=mstrmojo.num,U=mstrmojo.string,F=mstrmojo.date;function P(k,l){var h=k.dtp,j=k.constraints,n=j.allowedFormatChars||"",g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),m=mstrmojo.locales.number.THOUSANDSEPARATOR,f=mstrmojo.locales.number.DECIMALSEPARATOR,i;if(g){if(!k._intRegExp){n+="0-9-"+(k.isList?L:"")+m;k._intRegExp=new RegExp("[^"+n+"]");}i=k._intRegExp;}if(d){if(!k._numericRegExp){n+="0-9-"+(k.isList?L:"")+f+m;k._numericRegExp=new RegExp("[^"+n+"]");}i=k._numericRegExp;}return !!i&&i.test(l);}function c(k,m){var h=k.dtp,j=k.constraints,g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),f=j.min,l=j.max,i;if(f===undefined&&l===undefined){return false;}if(g||d){return Z.inNumericRange(m,f,l)!==0;}if(e){return F.inDateTimeRange(m,f,l)!==0;}return false;}function K(e,d){return !Z.isNumeric(d);}function R(g,e){var f=(g.dtp===M.DATE),d=(g.dtp===M.TIME);return(f?!F.isDate(e):(d?!F.isTime(e):!F.isDateAndOrTime(e)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function W(d){this._super(d);if(!this.constraints){this.constraints={};}var e=this.constraints;if(!e.hasOwnProperty("trigger")){e.trigger=B.NONE;}},_set_value:function(i,f){var g=this.value,e=(g!==f);if(e){this.value=f;var h=this.constraints.trigger,d=(h&B.VALUESET)>0;if(d){this.validate(f);}}return e;},validate:function O(){var f=(this.value!==null&&this.value!==undefined)?this.value:"",j=this.isList?f.split(L):[f],h,e,k,d=j.length,g;for(g=0;g<d;g++){h=this.doValidation(j[g]);e=(h.code>b.VALID);if(e){if(d>1){h.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",j[g]||" ");}break;}}k=e?"onInvalid":"onValid";if(!e&&this.autoFormat){this.format();}this.set("validationStatus",h);if(this[k]){this[k](h);}},format:function X(){var j=this.dtp,f=(A[j]===6);if(!f){return ;}var l=mstrConfig.listSep,o=this.value||"",e=this.isList?o.split(l):[o],n=j===14,m=[],d,g=mstrmojo.locales.datetime,k=e.length,h;for(h=0;h<k;h++){o=e[h];d=F.parseDateAndOrTime(o);if(d){if(n&&d.date){m.push(F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT));}else{m.push((d.date?F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT):"")+" "+(d.time?F.formatTimeInfo(d.time,g.TIMEOUTPUTFORMAT):""));}}}this.set("value",m.join(l));},isValid:function V(){var d=this.validationStatus;if(!d){this.validate();}return this.validationStatus.code===b.VALID;},clearValidation:function a(){this.set("validationStatus",{code:b.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(p){var m=this.constraints,n=m.regExp,f=m.validator,d={id:this.id,code:b.VALID,msg:""},l=this.dtp,k=(A[l]===1),e=(A[l]===2||A[l]===5),g=(A[l]===3),h=(A[l]===6),j=U.isEmpty(p),o=String(p).length,i="",s=mstrmojo.locales.validation;if(this.required&&j){d.code=b.INVALID_EMPTY;d.msg=s.requiredFieldError;return d;}p=U.trim(p);if(!j&&P(this,p)){if(k){i=s.integerDataType;}if(e){i=s.numericDataType;}if(h){i=s.dateDataType;}d.code=b.INVALID_CHAR;d.msg=s.invalidCharError.replace("#",i);return d;}if(!j&&h&&R(this,p)){d.code=b.INVALID_BAD_DATESTRING;d.msg=s.invalidDateStringError;return d;}if(!j&&(e||k)&&K(this,p)){d.code=b.INVALID_BAD_NUMERICFORMAT;d.msg=s.invalidNumericFormatError;return d;}if(!j&&(k||e||h)&&c(this,p)){d.code=b.INVALID_OUTOFRANGE;if(m.min!==null&&m.max!==null){i=s.outofRangeError.replace("# ","").replace("##",m.min).replace("###",m.max);}else{if(m.min!==null){i=s.noLessMinError.replace("##",m.min).replace("# ","");}else{if(m.max!==null){i=s.noGreaterMaxError.replace("###",m.max).replace("# ","");}}}d.msg=i;return d;}if(g&&m.minLen!==null&&m.maxLen!==null){if(o<m.minLen||o>m.maxLen){d.code=b.INVALID;d.msg=mstrmojo.desc(9211).replace(/#/,m.minLen).replace(/##/,m.maxLen);return d;}}if(n&&!n.test(p)){d.code=b.INVALID_REGEX;d.msg=mstrmojo.desc(9205);return d;}var q=f&&f.apply(this,[p]);if(q){d.code=q.code;d.msg=q.msg;return d;}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var Y=mstrmojo.css,H=mstrmojo.dom,O=mstrmojo.array,K={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},W="scrollingMode",R="scrolling",b=3;var L=H.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function J(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function P(d,c){var i=H.eventTarget(c,d),g=this.scrollNode,f=H.position(g),h=this.scrollTrackNodes,e=this.scrollBarNodes,j=function j(r){var p=i===h[r];if(p){var s=K[r],k=e[r],t=H.position(k),m=H.getMousePosition(d,c)[s.position],n=m-t[s.position],l=n>0?1:-1,q=g[s.scrollDimension],u=Math.abs(n-(t.h/2))*(q/f[s.dimension]),o={};o[s.scroll]={isStyle:false,start:g[s.scroll],stop:g[s.scroll]+(l*Math.min(q/3,500,u)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:o,duration:200,interval:10,target:g})).play();}};j.call(this,"h");j.call(this,"v");}function B(d,c){var g=this.scrollNode,f=d.type==="mousewheel",e=f?-1:1;mstrmojo.array.forEach(["h","v"],function(n){var l=K[n],i=f?"wheelDelta":"delta",k=d[i+{h:"X",v:"Y"}[n]]*e,j=Math.abs(k),h=k/j,m=j===3&&H.isFF&&!L;g[l.scroll]+=m?h*40:k;});H.stopPropogation(c,d);H.preventDefault(c,d);}function a(h){var g=K[h],f=this.scrollNode,e=H.position(f),d=e[g.dimension],i=f[g.scrollDimension],c=Math.ceil(d)/i;return A(c,d,i);}function A(d,c,e){return(!isNaN(d)&&d<1)&&(Math.abs(c-e)>b);}function C(x){var q="px",k=K[x],e=this.scrollNode,l=J.call(this),y=H.position(e),m=y[k.dimension],s=e[k.scrollDimension],d=Math.ceil(m)/s,w=this.scrollBarNodes,i=w[x],o=this.scrollTrackNodes,p=o[x],u=A(d,m,s),f=k.cls;if(!i){p=o[x]=document.createElement("div");var g=this,n=function(AA){P.call(g,AA);},j=function(AA){B.call(g,AA);},t=function(AC,AA,AB){H.attachEvent(AC,AA,AB);g.installedEventListeners.push({e:AC,evt:AA,fn:AB});};t(p,"click",n);p.className="mstrmojo-scrolltrack "+f;i=w[x]=document.createElement("div");i.className="mstrmojo-scrollbar "+f;p.appendChild(i);l.appendChild(p);var v=mstrApp.isSingleTier?"mousewheel":"wheel";t(p,v,j);t(i,v,j);}var z=i.style,h=(e[k.scroll]/e[k.scrollDimension]),c=H.delta(e,J.call(this))[k.position],r=p.style;if(u){r[k.styleDir]=c+q;z[k.styleDim]=(d*m)+q;z[k.styleDir]=(m*h)+q;}Y.toggleClass(l,k.hostCls,u);Y.toggleClass(e,k.scrollNodeCls,u);return u;}function G(){return !(mstrApp.isSingleTier&&L);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function T(c){this._super(c);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=G();}this.installedEventListeners=[];},onRender:function I(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function F(){var d=this.scrollNode;if(d){var c=H.attachMarkupEvent(this.id,d,"scroll");this.installedEventListeners.push({e:d,evt:"scroll",fn:c});}if(!this.hasCustomScrollbar){Y.addClass(d,"mstrmojo-sb-show-default");return ;}if(d){Y.addClass(J.call(this),"mstrmojo-scrollbar-host");Y.addClass(d,"mstrmojo-scrollNode");}},updateScrollbars:function Z(){if(!this.hasRendered){return ;}this.setupScrollNodes();if(!this.hasCustomScrollbar){if(this.scrollNode){this.scrollNode.style.overflowX=a.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};var c=this.scrollNode.style;c.overflowY=C.call(this,"v")?"scroll":"hidden";c.overflowX=C.call(this,"h")?"scroll":"hidden";}},onscroll:function V(){var j=this.scrollNode;if(j&&this.hasCustomScrollbar){var g=function g(k){var l=parseInt(k);return l===null||isNaN(l)?0:l;},h=H.position(j),i=h.h-g(Y.getStyleValue(j,"padding-bottom")),d=h.w-g(Y.getStyleValue(j,"padding-right")),f=this.scrollBarNodes,e=f.v,c=f.h;if(j.scrollHeight-i>0){e.style.top=((i-H.position(e).h)*(j.scrollTop/(j.scrollHeight-i)))+"px";}if(j.scrollWidth-d>0){c.style.left=((d-H.position(c).w)*(j.scrollLeft/(j.scrollWidth-d)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function E(d){var g=this.scrollNode,f=H.position(g),e=d.src.node,c=this.scrollBarNodes;if(this.isDraggingScrollBar(d)){return{isScrollBar:true,direction:e===c.v?"v":"h",scrollTop:g.scrollTop,scrollLeft:g.scrollLeft,conversionRatio:{y:g.scrollHeight/f.h,x:g.scrollWidth/f.w}};}return(this._super&&this._super(d));},isDragValid:function D(c){return this.isDraggingScrollBar(c)||(this._super&&this._super(c))||false;},isDraggingScrollBar:function S(d){var e=d.src.node,c=this.scrollBarNodes;return !!c&&(e===c.v||e===c.h);},ondragstart:function X(c){if(this.isDraggingScrollBar(c)){Y.addClass(c.src.node,R);Y.addClass(J.call(this),W);}if(this._super){this._super(c);}},shouldDragBubble:function Q(c){var d=c.src.node,e=this.scrollTrackNodes;return !!e&&(d===e.v||d===e.h);},ondragmove:function N(d){if(this.isDraggingScrollBar(d)){var l=d.tgt,c=d.src,m=l.pos,e=c.pos,i=c.node,h=this.scrollNode,k=this.scrollBarNodes,j=c.data,g={y:(m.y-e.y),x:(m.x-e.x)},f=j.conversionRatio;if(i===k.v){h.scrollTop=j.scrollTop+(g.y*f.y);}else{h.scrollLeft=j.scrollLeft+(g.x*f.x);}}if(this._super){this._super(d);}},ondragend:function N(c){if(this.isDraggingScrollBar(c)){Y.toggleClass(c.src.node,R,false);Y.toggleClass(J.call(this),W,false);}if(this._super){this._super(c);}},widgetResized:function M(){if(this._super){this._super();}this.updateScrollbars();},unrender:function U(c){O.forEach(this.installedEventListeners,function(d){H.detachEvent(d.e,d.evt,d.fn);});delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(c);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(k,Z,j,n,W,c,o,m){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(k),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=j+n,d=e[0].offsetTop,b;for(var l=1;l<=Y;l++){b=e[g].offsetTop-d+m;if(b<j){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,l+1));g+=(b>j)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(e,b,h,d,a,i){var l=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=l+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},n=function m(k,j){for(var o=k;o<j;o++){Y[W++]=l;var p=b.build(h,d,e[o],o);if(V[o]){p=p.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=p;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){n(0,a);}i=i&&b?Math.min(i,c-a):0;var f=c-i;for(var X=a;X<f;X++){Y[W++]=Z;}if(i){n(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,m,f,W,b,l){var e=(g&&g.length)||0,j=this.wrapperNodes(X),n=f.itemStatus,V=mstrmojo.css,Z=m.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(n[c]!==A){j[c].innerHTML=d.build(m,f,g[c],c);if(Z[c]){var Y=j[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===l){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var B=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(C,D){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(C,D,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,D,C,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(C,D,G){var E=C.blockCount,F={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:E,includeAncestorInfo:"true",includeObjectDesc:C.includeObjectDesc};if(C.folderLinksContextId){F.folderLinksContextId=C.folderLinksContextId;}if(C.sId){F.sessionState=C.sId;}if(D.fid){F.rootFolderID=D.fid;}else{if(D.fty){F.rootFolderType=D.fty;}}if(C.browsableTypes){F.objectType=C.browsableTypes;}if(D.blockBegin){F.blockBegin=D.blockBegin;}if(D.searchPattern){if(C.enableQuickSearch){F.quickSearch=C.enableQuickSearch;}F.searchPattern=D.searchPattern;if(D.recursive){F.recursive=D.recursive;}}this.serverRequest(F,G);},newFolder:function(F,G,E,C){var D={taskId:"createFolder",taskContentType:"json",folderID:F,name:G,description:E};this.serverRequest(D,C);},loadObjects:function A(G,H,C,F){var D=[],E=[];B.forEach(G,function(I){D.push(I.did);E.push(I.t);});if(G.length>0&&F){this.serverRequest({taskId:"getObjectInfo",objectIDs:D.join(","),objectTypes:E.join(","),includeDetails:true},H,C);}else{H.success();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var B={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:B,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,init:function E(F){this.clear();this._super(F);},setAlignment:function C(F,G){this.alignment={host:F,popup:G};},addPopupHandlers:function D(F,H,G){this.popupHandlers[F]={open:H,close:G};},clear:function A(){this.popupHandlers={};var F=this.ENUM_CORNERS;this.alignment={host:F.BOTTOM_LEFT,popup:F.TOP_LEFT};}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=B;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(K,N,G,L){var I=K.domNode,M=I.offsetWidth,D=K.scrollableIncFetch;var E=K.hasAnimation&&(!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5),J=L?1:-1,F=parseInt(M,10)*J,H=E?500:0;A(0,-F,H,{target:G,duration:H,preStart:function(){this.target.style.overflowY="hidden";},onEnd:function(){this.target.style.display="none";}});A(F,0,H,{target:N,preStart:function(){this.target.style.display="block";this.target.style.overflowY=(D?"visible":"auto");}});if(K.waiting){A(0,-F,H,{widget:K,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}else{if(this.scrollableIncFetch){E.style.overflowY="visible";}}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,hasAnimation:true,scrollableIncFetch:false,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,f=mstrmojo.array,e=mstrmojo.boxmodel,c=mstrmojo.dom;function A(i,k,h){var j=i.listSelector;if(j){j[k](i,i.itemsContainerNode,h);}}function L(i,h){var j=i.lastPagePos;if(!j||j.dragId!==h){j=e.offset(i.itemsContainerNode);j.dragId=h;i.lastPagePos=j;var k=i.scrollboxNode;i.lastScrollPos={left:k.scrollLeft,top:k.scrollTop,width:k.clientWidth,height:k.clientHeight};}}function O(k,n,i){var j=n&&n.node;if(j===k.dropCueNode||j===k.dropCueNode.firstChild){return k.dropCuePos;}var l=k.listMapper;var h=l&&l.whereDrop(k,k.itemsContainerNode,j,n.pos,{left:k.lastPagePos.left-k.lastScrollPos.left,top:k.lastPagePos.top-k.lastScrollPos.top,width:k.lastScrollPos.width,height:k.lastScrollPos.height});var m=k.dropCuePos;return((i!==false)&&m&&h&&(m.idx===h.idx)&&(m.left===h.left)&&(m.top===h.top))?m:h;}var g="attachEventListener";function D(i,h){if(i.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,i.itemsScriptClass||mstrmojo.Arr);}}return h;}function H(i,h){if(h&&h[g]){i._sub_its=h;i._sub_add=h[g]("add",i.id,"preadd");i._sub_rmv=h[g]("remove",i.id,"preremove");}}function G(h){if(h._sub_its){var i=mstrmojo.publisher;i.unsubscribe(h._sub_add);i.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var i=this.dropCueNode,h=i&&i.style;if(!h){return ;}var k=this.dropCuePos,j=!!k;if(j){h.left=k.left+"px";h.top=k.top+"px";}h.display=j?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(m){this._super(m);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,n=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||n){this.initSelections(l,j,k,n);}if(this.postInitItems){this.postInitItems();}},initItems:function I(h){return D(this,h);},preBuildRendering:function W(){var l=this.listBuilder,o=l.newContext(this);this.ctxtBuilder=o;var i=this.markupSlots,k=!!(this.renderOnScroll&&this.renderBlockSize&&i&&i.scrollboxNode),j=this.items,h=(j&&j.length)||0,m=k?this.firstRenderBlockSize:h,n=k?this.firstRenderBlockSize:0;this._eros=k;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(j,l,this,o,m,n).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var m=this.listMapper;if(m&&m.postBuildRendering){m.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var p=this.id;this._cb_scroll=function(){var i=mstrmojo.all[p];i.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var k=0,j=["itemsEffect","scrollEffect"],h=j.length;k<h;k++){var o=j[k],l=this[o];if(l&&l.constructor===Object){l=mstrmojo.insert(mstrmojo.hash.clone(l));l.widget=this;this[o]=l;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(l){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var j=0,k=["itemsEffect","scrollEffect"],h=k.length;j<h;j++){var m=this[k[j]];if(m&&m.isPlaying){m.cancel();}}this._super(l);},pauseScrollRendering:function P(j,h,i){if(j!==false){j=true;}if(this.paused===!!j){return ;}this.paused=!!j;if(j){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,i);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function b(h,l){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var m=(this.items&&this.items.length)||0;if(!m){if(l){l();}}else{var j=this.scrollboxNode,n=this.itemsContainerNode,k=mstrmojo.boxmodel.offset(n,j),p=this.listMapper,o=p.findScrollRange(n,m,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||j.scrollTop,j.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||j.scrollLeft,j.clientWidth,k.left,k.top);if(this.fillAt(o.start,o.end)){if(h){h();}var i=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[i].fill(h,l);},100);}else{if(l){l();}}}},fillAt:function M(j,i){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,j,i,this.renderBlockSize);}else{return false;}},add:function R(i,h){if(!i||!i.length){return -1;}var j=this.items;if(h==null){h=a.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(j&&j.length)||0;}if(j&&j.add){j.add(i,h);}else{this.set("items",j?f.insert(j.concat(),h,i):i);}return h;},preadd:function B(k){if(this.hasRendered){var n=this.listMapper;if(n){n.onadd(this,this.itemsContainerNode,this.ctxtBuilder,k);}var m=this.listBuilder;if(m){m.onadd(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onadd(this,k);}if(this._eros){this.onscroll();}else{var l=k.index,h=k.value.length;this.fillAt(l,l+h-1);}}if(this.onadd){this.onadd(k);}if(this._super){this._super(k);}},remove:function U(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var k=this.items;if(k){var j;if(k.remove){for(j=h.length-1;j>-1;j--){k.remove(h[j],1);}}else{k=k.concat();for(j=h.length-1;j>-1;j--){k.splice(h[j],1);}this.set("items",k);}return h[0];}return -1;},_remove:function U(j){var i=this.items;if(!i||(j==null)){return -1;}var h;if(!isNaN(j)){h=j;}else{h=this.itemIndex(j);}if(h>-1){if(i.remove){i.remove(h,1);}else{i=i.concat();i.splice(h,1);this.set("items",i);}}return h;},duplicate:function Y(m,i,j){var k=this.items,h=-1;if(!k||(m==null)){return -1;}if(!isNaN(m)){if(i===null||i===undefined){i=m+1;}m=k[m];}else{if(i===null||i===undefined){i=this.itemIndex(m)+1;}}if(m){var l;l=a.copy(j,a.clone(m));h=this.add([l],i);}return h;},preremove:function N(i){if(this.hasRendered){var k=this.listMapper;if(k){k.onremove(this,this.itemsContainerNode,this.ctxtBuilder,i);}var j=this.listBuilder;if(j){j.onremove(this,this.ctxtBuilder,i);}var h=this.listSelector;if(h){h.onremove(this,i);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(i);}if(this._super){this._super(i);}},move:function S(l,r){function p(s,i){s=parseInt(s,10);return i===1||(r>=s&&r<s+i);}var q=(this.items&&this.items.length)||0;if(r===-1||r==null||isNaN(r)){r=q;}else{r=Math.min(r,q);}var k,h,n,m;if(l.constructor===Array){h=l;n=l;m=(h&&h.length)||0;if(p(l[0],l.length)){return false;}k=f.get(this.items,l);}else{if(typeof (l)==="object"){k=[l];m=1;h=this.itemIndex(k[0]);n=[h];if(p(h,1)){return false;}}else{h=l;n=[l];m=1;if(p(h,1)){return false;}k=[this.items[h]];}}var o=0;for(var j=0;j<m;j++){if(n[j]<=r){r--;o++;}}if(o==n.length){r++;}if(k[0]!=null){this.remove(h);this.add(k,r);}return true;},itemIndex:function F(h){if(h==null){return -1;}var i=this.itemIdField;return i?f.find(this.items,i,h[i]):f.indexOf(this.items,h);},prechange:function T(k){if(this.hasRendered){var j=[this.listBuilder,this.listMapper];for(var l=0,h=j.length;l<h;l++){var m=j[l];if(m&&m.onchange){m.onchange(this,this.itemsContainerNode,this.ctxtBuilder,k);}}}},makeObservable:false,_set_items:function J(m,h){var l=this.items;h=this.initItems(h);this.items=h;if(l!==h){var k=this,j=function(){if(k.autoHide){k.set("visible",!!(h&&h.length));}k=null;},i=this.hasRendered;if(i){this.refresh(j);}else{j();}}return l!==h;},premousedown:function d(h){A(this,"premousedown",h);},premouseup:function Q(h){A(this,"premouseup",h);},scrollTo:function V(i){var h,j=this.listMapper;if(j&&j.toItem){if(!isNaN(i)){h=i;}else{h=this.itemIndex(i);}if(h>=0){j.toItem(this,h);}}},draggable:false,getDragData:function(l){L(this,l.id);var j=O(this,l.src),i=j&&j.idxActual;if((i>-1)&&this.selectedIndices[i]){var k=this.sortSelectedIndices(),h=f.get(this.items,k)||[];switch(h.length){case 1:return a.copy({html:h[0][this.itemDisplayField],index:k[0]},a.copy(h[0]));case 0:return null;default:return a.copy({html:h.length+" selections",indices:k},h);}}},dropZone:false,ondragenter:function(h){L(this,h.id);this.set("dropCuePos",O(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",O(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},isDragValid:function C(h){return h&&h.src&&h.src.data;},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(k){var i=k&&k.tgt,h=i&&i.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!c.ctrlKey(i.hWin,i.e)){var j=k.src&&k.src.data;if(j&&(j.indices||(j.index!==null))){this.remove(j.indices||j.index);}}}}},ondrop:function(q){var u=q&&q.src,p=u&&u.data;if(p){var k=O(this,q.tgt,false),r=k&&k.idx,l=(p&&p.constructor===Array),j=this.sortSelectedIndices();var n=this.items;r=Math.min(r,n&&n.length)||0;var t=true;if(u.widget===this){t=this.move(j,r);f.forEach(j,function(i){if(i<=r){r--;}});}else{this.add(l?p:[p],r);}if(t){var o=l?p.length:1,h={};for(var m=0;m<o;m++){h[r+m]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css,G=mstrmojo.array;function F(H,J){var I={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[H]||{};if(typeof J==="object"){mstrmojo.hash.copy(J,I);}return I;}var B="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,forceResetCache:false,onUpdateSearchParams:mstrmojo.emptyFn,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(4326,"Case Sensitive")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},searchNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},optionNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function E(H){var J=this;var I=J.searchTimer;if(I){window.clearTimeout(I);}J.searchTimer=window.setTimeout(function(){J.onkeyupDelayed(H);delete J._searchTimer;},parseInt(H.e.keyCode||H.e.charCode,10)===13?0:J.searchDelay);},onkeyupDelayed:function A(I){var H=I.hWin,K=I.e||H.event;var J=mstrmojo.string.trim(this.inputNode.value);if(this.searchNode){C.toggleClass(this.searchNode,["clear"],J.length>0);}this.showTaskError=false;this.click2Search=false;if(J.length==0||this.autoSubmit||this.onEnter&&K.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(I){var H=I.hWin,K=I.e||H.event,M=K.target||K.srcElement,L=M&&M.id;switch(L.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var J=this.optionNode.parentNode.style;J.display=J.display=="block"?"none":"block";}break;case"sbSearch":if(this.inputNode.value.length>0){this.clearSearch();}break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);var I=this.searchCache,H=this.rootID;if(I&&I[H]){I[H][B]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache(this.forceResetCache);var I=this.searchCache[this.rootID];if(I){var H=I[B]||"";this.inputNode.value=H;if(H.length>0){if(H.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(I){var H=this.contentWidget||this;H.set("items",I[0]);if(this.supportIncFetch){var J=I[1],L=I[2],K=this.blockCount;H.set("ifs",{np:Math.floor(J/K)+((J%K>0)?1:0),cp:Math.floor(L/K)+((L%K>0)?1:0)});}},_onsearch:function(H){this.getRootID();this._setupCache();var K=mstrmojo.string.trim(this.inputNode.value);if(K.length===0){H=true;}var L=this.token[this.taskId];if(L.test(K)){}if(this.searchPattern==K&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var M=this.rootID,J=this.searchCache[M];if((K.length<this.minSearchLength&&!this.click2Search)&&!H){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(J[M]);this.searchPattern=K;}}else{this.searchPattern=K;J[B]=this.searchPattern;var I=this.filterCache(K,J,H);if((this.click2Search||I===null)&&!H){this.blockBegin=1;this.fetch();return ;}else{this._notifyContentWidget(I);}}J[B]=K;},_setupCache:function(J){var K=this.searchCache,I=this.rootID;if(K&&(J||!K[I])){K[I]=K[I]||{};var H=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];K[I][I]=[H,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",serverRequest:function D(H,I){mstrmojo.xhr.request("POST",this.path,I,H,undefined,this.XServer,this.baseParams);},fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var H=this,I=F.apply(this,[this.taskId]);I.searchPattern=this.searchPattern;this.onUpdateSearchParams(I);var J={success:function(K){var L=K.items||K.es||[];L=[L,K.totalSize||K.sz||0,K.blockBegin||K.bb];mstrmojo.all[H.id].searchCache[H.rootID][(I.searchPattern.length==0?H.rootID:H.buildIndex(I.searchPattern))]=L;H._notifyContentWidget(L);},failure:function(K){if(H.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+K.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(H.spinnerNode){H.spinnerNode.style.display="none";}if(H.postFetch){H.postFetch();}}};this.serverRequest(I,J);},fetchPage:function(H){this.blockBegin=H*this.blockCount+1;this.fetch();},filterCache:function(J,M,I){var H=M&&M[I?this.rootID:this.buildIndex(J)];if(H){return H;}var K=this.token[this.taskId];if(K.test(J)||this.totalSize>this.blockCount){return null;}var O=J.replace(/.$/,"");H=M&&M[this.buildIndex(O)];while(H===undefined&&(O=O.replace(/.$/,"")).length>0){H=M&&M[this.buildIndex(O)];}if(H!==undefined){if(H[1]>this.blockCount){return null;}var L=H[0],N=[];G.forEach(L,function(P){if(P.n.search(new RegExp(J,this.matchCase?"":"i"))>-1){N.push(P);}});this.totalSize=N.length;return(M[this.buildIndex(J)]=[N,N.length,this.blockBegin].concat());}return null;},buildIndex:function(H){if(H.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?H.toUpperCase():H+"::0";},init:function(H){if(this._super){this._super(H);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var D=function(){var F=this.opener;if(F.direction.toLowerCase()==="up"){this.domNode.style.top=-F.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"19px",text:"",direction:"down",enabled:true,title:"",markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.text;},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function B(){if(this._super){this._super();}var F=this.popupRef;if(F){if(F.nudge){F.nudge=mstrmojo.func.composite([F.nudge,D]);}else{if(this.direction.toLowerCase()!=="down"){F.nudge=D;}}}},popupRef:null,popupOpenConfig:null,destroy:function C(F){var G=this.popupRef;if(G&&G.hasRendered){G.destroy(false);}if(this._super){this._super(F);}},togglePopup:function E(){var F=this._lastOpened;if(F&&F.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(F){this.togglePopup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css");var F="",B="row-",E=mstrmojo.css.DISPLAY_TABLE;mstrmojo.Table=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Table",cellCssClass:"",rows:-1,cols:-1,_trows:-1,cellPadding:0,cellSpacing:0,layout:null,markupString:'<table id="{@id}" class="mstrmojo-Table {@cssClass}" style="{@cssText}" cellpadding="{@cellPadding}" cellspacing="{@cellSpacing}">{@tableHtml}</table>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?E:"none";}},preBuildRendering:function G(){var I=[],P=this.cellCssClass;if(this.layout){var Q=this._trows=this.layout.length;for(var K=0;K<Q;K++){var H=this.layout[K],R=H.cells,O=R.length,L=[];for(var J=0;J<O;J++){var N=R[J],M="";M+=((N.cssClass||P)?' class="'+(N.cssClass||P)+'"':"");M+=(N.cssText?' style="'+N.cssText+'"':"");M+=(N.rowSpan?' rowspan="'+N.rowSpan+'"':"");M+=(N.colSpan?' colspan="'+N.colSpan+'"':"");L[J]="<td"+M+"></td>";}var S="";S+=(H.cssClass?' class="'+H.cssClass+'"':"");S+=(H.cssText?' style="'+H.cssText+'"':"");I[K]="<tr"+S+">"+L.join("")+"</tr>";}}else{this._trows=this.rows;var M=(P?' class="'+P+'"':""),L=[];for(var K=0;K<this.rows;K++){for(var J=0;J<this.cols;J++){L[J]="<td"+M+"></td>";}I[K]="<tr>"+L.join("")+"</tr>";}}this.tableHtml=I.join("");if(this._super){this._super();}},postBuildRendering:function C(){if(this._trows){var M={},I=this.containerNode.rows,N=I.length;for(var L=0;L<N;L++){var K=I[L].cells,H=K.length;M[B+L]=I[L];for(var J=0;J<H;J++){M[F+L+","+J]=K[J];}}this.addSlots(M);}this._super();},childRenderCheck:function D(I){if(I&&!I.hasRendered){var H=I.slot||this.defaultChildSlot;return !!this[H]||H.match(/^([\d]+),([\d]+)$/);}return false;},on_child_change_rendering:function A(L){var H=(L&&L.src)||L,O=H&&H.domNode;if(O){var U=H.slot;if(!this[U]){var M=U&&U.match(/^([\d]+),([\d]+)$/);if(M){var R=parseInt(M[1],10),V=parseInt(M[2],10),Q=this.containerNode,T=this[(B+R)],N=[];if(!T){var J=Q.rows,S=J&&J.length||0;for(var K=S;K<=R;K++){N[B+K]=Q.insertRow();}T=N[B+R];}var P=T.cells&&T.cells.length||0;for(var K=P;K<=V;K++){var I=T.insertCell(K);N[F+R+","+K]=I;if(this.cellCssClass){I.className=this.cellCssClass;}}this.addSlots(N);}}}this._super(L);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css");var B=mstrmojo.css;mstrmojo.Panel=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Panel",state:1,showTitlebar:false,markupString:'<div id="{@id}" class="mstrmojo-Panel {@cssClass}" style="position: relative;{@cssText}"><div class="mstrmojo-Panel-titlebar {@cssClass}"><img class="mstrmojo-Panel-state" src="../images/1ptrans.gif" align="absmiddle" onclick="var w = mstrmojo.all[\'{@id}\']; w.set(\'state\', w.state === 0 ? 1 : 0)" /><span class="mstrmojo-Panel-text" style="{@ttlTxtCssText}"></span><input type="button" class="mstrmojo-Panel-del" value="{@delText}" onclick="mstrmojo.all[\'{@id}\'].del()"/><div class="mstrmojo-clearMe"></div></div><div class="mstrmojo-Panel-container"></div></div>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},titlebarNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.firstChild.childNodes[1];},containerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){var C=this.titleNode;if(C){var D=this.title;C.innerHTML=(D!==null)?D:"";}},onstateChange:function(){var C=(this.state===0);for(var D in {stateNode:1,titleNode:1,containerNode:1}){if(this[D]){B.toggleClass(this[D],["closed"],C);}}},onshowTitlebarChange:function(){B.toggleClass(this.titlebarNode,["closed"],(this.showTitlebar===false));}},del:function A(){var C=this.parent;if(C&&C.remove){C.remove(this.item);}if(this.customDel){this.customDel();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.HTMLButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.HTMLButton",markupString:'<input id="{@id}" type="button" class="mstrmojo-text mstrmojo-HTMLButton mstrButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){mstrmojo.css[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.inputNode.value=this.text!=null?this.text:"";},oniconClassChange:function(){this.domNode.className="mstrmojo-text mstrmojo-HTMLButton mstrButton "+this.cssClass+" "+this.iconClass+(this.enabled?"":" disabled");}}});})();(function(){mstrmojo.requiresCls("mstrmojo._CanValidate","mstrmojo.Label","mstrmojo.Obj","mstrmojo.string","mstrmojo.color","mstrmojo.css","mstrmojo.locales");mstrmojo.locales.validation.requiredFieldError=mstrmojo.desc(6078);mstrmojo.locales.validation.invalidCharError=mstrmojo.desc(7899);mstrmojo.locales.validation.integerDataType=mstrmojo.desc(6076);mstrApp.onSessionExpired=function(){S.lastProject=null;S.lastSession=null;O.lastProject=null;O.lastSession=null;R.set("mode",W);U.set("mode",W);};var P=mstrmojo.string,G=mstrmojo.color,T=mstrmojo.hash,V=mstrmojo.dom;function L(b){return(b!=mstrmojo.mobileConfigUtil.PRJ_AUTHEN_WIN)&&(b!=mstrmojo.mobileConfigUtil.PRJ_AUTHEN_TRUSTED)&&(b!=mstrmojo.mobileConfigUtil.PRJ_AUTHEN_INTEGRATED);}var J=0,W=1,C=2,X=3;function a(b){return T.copy(b||{},{scriptClass:"mstrmojo.Table",alias:"loginBox",cssClass:"mobileConfig-loginBox",cellPadding:2,cols:2,rows:5,onwaitChange:function(){this.waitIcon.set("visible",this.wait);mstrmojo.css.toggleClass(this.domNode,["disabled"],this.wait);},restoreSession:function(){var d=this.lastProject,e=this.selectedProject,c=d&&(d.v==e.v)&&(d.iServer==e.iServer)&&(d.authMode==e.authMode);if(c){this.sessionID=this.lastSession;}return c;},closeSession:function(){if(this.sessionID!=null){if(this.parent.opener.reuseSession){this.lastSession=this.sessionID;this.lastProject=this.selectedProject;}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(c){},failure:function(){}},{taskId:"closeSessions",sessionStates:this.sessionID},false,this.selectedProject.webServer);}this.sessionID=null;}},children:[{scriptClass:"mstrmojo.Label",cssText:"width: 80px; margin:0px",text:mstrmojo.desc(4446),slot:"0,0"},{scriptClass:"mstrmojo.SelectBox",alias:"projects",cssText:"width:230px; margin:0px",showItemTooltip:true,size:1,bindings:{visible:"!this.items || this.items.length != 1"},onitemsChange:function(){if(this.items&&this.items.length>0){this.set("selectedIndex",0);}},onchange:function(){if(this.selectedItem){var c=L(this.selectedItem.authMode);this.parent.set("selectedProject",this.selectedItem);this.parent.uid.set("enabled",c);this.parent.password.set("enabled",c);}},slot:"0,1"},{scriptClass:"mstrmojo.Label",cssClass:"mobileConfig-loginBox-projectLabel",bindings:{visible:"!this.parent.projects.visible",text:"this.parent.projects.items[0].n"},slot:"0,1"},{scriptClass:"mstrmojo.Label",cssText:"width: 80px; margin:0px",text:mstrmojo.desc(1161),slot:"1,0"},{scriptClass:"mstrmojo.TextBox",cssText:"width:220px; margin:0px",alias:"uid",onkeyup:function(d){var c=d.hWin,f=d.e||c.event;if(f.keyCode===13){this.parent.loginButton.onclick();}},slot:"1,1"},{scriptClass:"mstrmojo.Label",cssText:"width: 80px; margin:0px",text:mstrmojo.desc(1162),slot:"2,0"},{slot:"2,1",scriptClass:"mstrmojo.TextBox",cssText:"width:220px; margin:0px",type:"password",alias:"password",onkeyup:function(d){var c=d.hWin,f=d.e||c.event;if(f.keyCode===13){this.parent.loginButton.onclick();}}},{slot:"3,0",scriptClass:"mstrmojo.Label",bindings:{visible:"(this.parent.projects.selectedItem.authMode === mstrmojo.mobileConfigUtil.PRJ_AUTHEN_STD || this.parent.projects.selectedItem.authMode === mstrmojo.mobileConfigUtil.PRJ_AUTHEN_LDAP) && this.parent.selectedProject.tfa"},text:mstrmojo.desc(13826)},{slot:"3,1",scriptClass:"mstrmojo.TextBox",alias:"tsvCode",bindings:{visible:"(this.parent.projects.selectedItem.authMode === mstrmojo.mobileConfigUtil.PRJ_AUTHEN_STD || this.parent.projects.selectedItem.authMode === mstrmojo.mobileConfigUtil.PRJ_AUTHEN_LDAP) && this.parent.selectedProject.tfa"},onkeyup:function(d){var c=d.hWin,f=d.e||c.event;if(f.keyCode===13){this.parent.loginButton.onclick();}}},{slot:"4,1",scriptClass:"mstrmojo.HTMLButton",alias:"loginButton",text:mstrmojo.desc(4020),cssText:"margin-left: 20px;",cssClass:"mstrButton",bindings:{enabled:"this.parent.projects.items.length > 0"},onclick:function(){var c=L(this.parent.selectedProject.authMode),d=this;mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(e){if(e!=null){d.parent.sessionID=e.sessionState;d.parent.parent.set("mode",d.parent.parent.targetMode);}},failure:function(e){mstrmojo.mobileConfigUtil.showErrorMsgBox(mstrmojo.desc(422));d.parent.parent.close();},complete:function(){d.parent.set("wait",false);}},{taskId:"login",server:d.parent.selectedProject.iServer,project:d.parent.selectedProject.project,userid:(c)?d.parent.uid.value:"",password:(c)?d.parent.password.value:"",authMode:d.parent.selectedProject.authMode,tsvCode:(c)?S.tsvCode.value:""},false,d.parent.selectedProject.webServer);d.parent.set("wait",true);}},{slot:"4,1",scriptClass:"mstrmojo.HTMLButton",cssText:"margin-left: 35px;",cssClass:"mstrButton",text:mstrmojo.desc(221),onclick:function(){this.parent.parent.close();}},{slot:"5,0",scriptClass:"mstrmojo.WaitIcon",alias:"waitIcon",cssClass:"mobileConfig-waitIcon"}]});}var F=mstrmojo.insert({id:"objectBrowserBox",alias:"objectBrowserBox",scriptClass:"mstrmojo.VBox",callbackOnSelect:function(f){var d=this.objectBrowser.currentFolder,g=d.anc.items[0],h=g.n,c=g.items&&g.items[0],e=this;while(c){h+="\\"+c.n;c=c.items&&c.items[0];}if(d!=f){h+="\\"+f.n;}var b={oi:{did:f.did,pt:h,pid:this.parent.loginBox.selectedProject.v,t:f.t,st:f.st,n:f.n,psu:e.parent.loginBox.selectedProject.webServer,fid:f.pf||d.did}};if(R.opener.allowCheckSubscription){b.csp=true;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(j){if(j!==null){b.oi.ab=j.objects[0].ab;b.oi.dsc=j.objects[0].desc;b.oi.avm=j.objects[0].avm;}else{b.oi.dsc="";b.oi.avm=0;}var m=R.opener,l=m.target,k=m.targetType,i=l[k];if(!i){l.set(k,new mstrmojo.Obj(b));}else{i.set("oi",b.oi);i.set("csp",b.csp);}},failure:function(){b.oi.dsc="";b.oi.avm=0;},complete:function(){R.close();}},{taskId:"getObjectInfo",objectIDs:f.did,objectTypes:f.t,sessionState:e.parent.loginBox.sessionID},false,e.parent.loginBox.selectedProject.webServer);},onvisibleChange:function(){if(this.visible){var b=this.objectBrowser;objBrowserDP=b.dataProvider,objBrowserSearch=b.searchUpBar.obSearchBox,config={method:"POST",path:mstrConfig.taskURL,XServer:this.parent.loginBox.selectedProject.webServer};T.copy(config,objBrowserDP);T.copy(config,objBrowserSearch);T.copy({onSelectCB:[F,"callbackOnSelect"],onCloseCB:[R,"close"],browsableTypes:R.opener.browsableTypes},b);b.sId=objBrowserSearch.sessionState=this.parent.loginBox.sessionID;objBrowserSearch.searchCache={};objBrowserSearch.objectTypes=R.opener.browsableTypes;b.browse();}this.objectBrowser.set("visible",this.visible);this.choose.set("visible",this.visible&&(this.objectBrowser.browsableTypes=="8,17153"||this.objectBrowser.browsableTypes=="8"));this.switcher.set("visible",this.visible);},children:[{id:"objectBrowser",scriptClass:"mstrmojo.ObjectBrowser",alias:"objectBrowser",folderLinksContextId:14,upButtonVisible:true,closeOnSelect:false,useAnimate:false,closeable:false},{scriptClass:"mstrmojo.HTMLButton",alias:"choose",text:mstrmojo.desc(549),cssClass:"mstrButton",cssText:"width:100px",onclick:function(){this.parent.callbackOnSelect(this.parent.objectBrowser.currentFolder);}},{scriptClass:"mstrmojo.HTMLButton",alias:"switcher",text:mstrmojo.desc(221),cssClass:"mstrButton",cssText:"width:80px",onclick:function(){R.close();}}]});var I=mstrmojo.insert({scriptClass:"mstrmojo.Table",id:"triggerSelectorBox",alias:"triggerSelectorBox",cssClass:"triggerSelectorBox",rows:3,cols:1,onvisibleChange:function(){var b=this;if(this.visible){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(d){var e=I.triggerList;if(d.objList){var c=d.objList.length>0;e.set("items",c?d.objList:[]);e.set("selectedIndex",c?0:-1);}},failure:function(){}},{taskId:"getSchedules",sessionState:b.parent.loginBox.sessionID},false,b.parent.loginBox.selectedProject.webServer);}else{this.set("items",null);}},children:[{slot:"0,0",scriptClass:"mstrmojo.Label",cssClass:"triggerListTitle",text:mstrmojo.desc(1090,"Choose a schedule:")},{slot:"1,0",scriptClass:"mstrmojo.SelectBox",alias:"triggerList",cssClass:"triggerList",size:1,showItemTooltip:true,itemDisplayField:"n",itemIdField:"id"},{slot:"2,0",scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrButton",cssText:"margin-left:10px; width:60px;",text:mstrmojo.desc(1442,"OK"),onclick:function(){var b=this.parent.triggerList.selectedItem;if(b){var c=R.opener;c.target.set(c.targetType,{oi:{did:b.id,t:b.t,n:b.n}});}R.close();}},{slot:"2,0",scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrButton",cssText:"margin-left:10px; width:80px",text:mstrmojo.desc(221,"Cancel"),onclick:function(){R.close();}}]});var E=mstrmojo.insert({scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-LwrDocumentBrowserBox",id:"lwrDocumentBrowserBox",alias:"lwrDocumentBrowserBox",visible:false,layout:[{cells:[{},{}]},{cells:[{colSpan:2}]},{cells:[{},{}]}],onvisibleChange:function(){if(this.visible){var b=this;if(!this.parent.opener.lwr){this.parent.opener.set("lwr",{ois:[]});}this.set("selectedItems",this.parent.opener.lwr.ois);this.lwrSelect.set("items",[{n:this.parent.opener.folder.oi.n,v:0},{n:"Current Selections",v:1}]);mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(c){T.forEach(c.items,function(d){d.pid=b.parent.loginBox.selectedProject.v;d.fid=b.parent.opener.folder.oi.did;d.did=d.did||d.dssid;d.t=d.t||d.tp;d.st=d.st||d.stp;d.dsc=(d.desc==undefined)?"":d.desc;d.avm=(d.avm==undefined)?0:d.avm,d.psu=b.parent.loginBox.xServer;});b.list.set("selects",b.list.selectedItems);b.set("items",c.items);},failure:function(){mstrmojo.mobileConfigUtil.showErrorMsgBox(mstrmojo.desc(422));b.parent.onClose();}},{taskID:"searchMetadata",sessionState:b.parent.loginBox.sessionID,rootFolderID:b.parent.opener.folder.oi.did,objectType:"3,55",includeAncestorInfo:true,includeObjectDesc:true,showObjectTags:true},undefined,b.parent.loginBox.xServer);}},children:[{slot:"0,0",alias:"lwrSelect",scriptClass:"mstrmojo.SelectBox",cssClass:"mstrmojo-IphoneSettingAction-SelectBox",showItemTooltip:true,size:1,onselectionChange:function(){this.parent.list.set("selects",[]);for(var b in this.parent.list.selectedIndices){this.parent.list.selects.push(this.parent.list.items[b]);}if(this.selectedItem&&this.selectedItem.v==0){this.parent.list.set("items",this.parent.items);}else{if(this.selectedItem&&this.selectedItem.v==1){this.parent.list.set("items",this.parent.list.selects);}}}},{slot:"0,1",scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrButton",cssText:"width:45px",text:"clear",onclick:function(){this.parent.list.clearSelect();}},{slot:"1,0",scriptClass:"mstrmojo.List",cssClass:"",alias:"list",id:"lwrList",selectionPolicy:"toggle",allowUnlistedValues:false,cssClass:"mstrmojo-IphoneSettingAction-List",multiSelect:true,itemIdField:"did",itemField:"n",selects:[],itemMarkupFunction:function(d,b,c){return'<div class="mstrmojo-IphoneSettingAction-ListItem"><div class="mstrmojo-checkBox-Container"><div class="mstrmojo-checkBox'+(d[c.itemCss]||"")+'"></div></div><div class="mstrmojo-text '+(d[c.itemCss]||"")+'" title="'+d[c.itemField]+'">'+(d[c.itemField]||"&nbsp;")+"</div></div>";},renderOnScroll:true,bindings:{selectedItems:"this.parent.selectedItems",items:"this.parent.items"},onitemsChange:function(){this.set("selectedIndices",[]);if(this.items&&this.selects){this.setSelectedItems(this.selects);}},onOK:function(){var b=this.items,d=this.parent.parent.opener;this.set("selects",[]);for(var c in this.selectedIndices){this.selects.push(b[c]);}this.selectedItems=this.selects;if(d){d.set("lwr",{ois:this.selectedItems});d.closePopup();}},onCancle:function(){var b=this.parent.parent;if(b){b.onClose();}}},{slot:"2,0",scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrButton",cssText:"width: 80px",text:"OK",onclick:function(){this.parent.list.onOK();}},{slot:"2,1",scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrButton",cssText:"width: 80px; margin-left: -30px",text:"Cancel",onclick:function(){this.parent.list.onCancle();}}]});var S=mstrmojo.insert(a({id:"loginBox"})),O=mstrmojo.insert(a({id:"lwrLoginBox"}));var U=mstrmojo.insert({scriptClass:"mstrmojo.Popup",id:"lwrPopup",cssClass:"mobileConfigPopup",slot:"popupNode",locksHover:true,mode:J,children:[O,E],onOpen:function(){this.lastOpener=this.lastOpener||this.opener;if(this.opener!==this.lastOpener){this.opener.popupNode.appendChild(this.lastOpener.popupRef.domNode);this.lastOpener=this.opener;}this.loginBox.projects.set("items",mstrmojo.all.mobileConfig.getProjects(this.opener.target.pid,this.opener.target.sn));this.targetMode=this.opener.mode;this.set("mode",(this.opener.reuseSession&&this.loginBox.restoreSession())?this.targetMode:W);},onmodeChange:function(){this.lwrDocumentBrowserBox.set("visible",this.mode===C);this.loginBox.set("visible",this.mode===W);},onClose:function(b){this.loginBox.closeSession();this.lwrDocumentBrowserBox.list.clearSelect();this.set("mode",J);},destroy:function(){document.body.appendChild(this.domNode);this.lastOpener={popupRef:{domNode:this.domNode}};},unrender:function(){}});var R=mstrmojo.insert({scriptClass:"mstrmojo.Popup",id:"mobileConfigPopup",cssClass:"mobileConfigPopup",slot:"popupNode",locksHover:true,mode:J,children:[S,F,I],onOpen:function(){this.lastOpener=this.lastOpener||this.opener;if(this.opener!==this.lastOpener){this.opener.popupNode.appendChild(this.lastOpener.popupRef.domNode);this.lastOpener=this.opener;}this.loginBox.projects.set("items",mstrmojo.all.mobileConfig.getProjects(this.opener.target.pid,this.opener.target.sn));this.targetMode=this.opener.mode;this.set("mode",(this.opener.reuseSession&&this.loginBox.restoreSession())?this.targetMode:W);},onmodeChange:function(){this.set("left",this.mode===W?"-305px":"-175px");this.set("top",(this.mode!==W&&mstrmojo.dom.isWK)?"-35px":"0px");this.objectBrowserBox.set("visible",this.mode===C);this.loginBox.set("visible",this.mode===W);this.triggerSelectorBox.set("visible",this.mode===X);},onClose:function(b){this.loginBox.closeSession();this.set("mode",J);},destroy:function(){document.body.appendChild(this.domNode);this.lastOpener={popupRef:{domNode:this.domNode}};},unrender:function(){}});var A=function(c,b){return T.copy(c,{scriptClass:"mstrmojo.DropDownButton",cssClass:"mobileConfig-popupButton",text:"   ",title:"",mode:b,popupRef:R});};mstrmojo.mobileConfigUtil=mstrmojo.provide("mstrmojo.mobileConfigUtil",{DEVICE_IPHONE:1,DEVICE_IPAD:2,DEVICE_PHONE_UNIVERSAL:3,DEVICE_TABLET_UNIVERSAL:4,DEVICE_BLACKBERRY:5,DEVICE_IOS:6,DEVICE_ANDROID:7,DEVICE_ALL:8,DEFAULT_WEBSERVER:1,DEFAULT_PROJECT:2,DEFAULT_IPHONE_HOMESCREEN_BUTTON:3,DEFAULT_IPHONE_CUSTOM_HOMESCREEN:4,DEFAULT_IPAD_HOMESCREEN_BUTTON:5,DEFAULT_IPAD_CUSTOM_HOMESCREEN:6,DEFAULT_PHONE_UNIVERSAL_CUSTOM_HOMESCREEN:7,DEFAULT_TABLET_UNIVERSAL_CUSTOM_HOMESCREEN:8,DEFAULT_IPAD_PRECACHE_BUTTON:9999,HOMESCREEN_DEFAULT:1,HOMESCREEN_CUSTOM:2,HOMESCREEN_RD:3,HOMESCREEN_FOLDER:4,ACT_BROWSEFOLDER:1,ACT_RUNREPORT:2,ACT_FAVOURITES:3,ACT_SETTINGS:4,ACT_SHAREDLIBRARY:5,ACT_HELP:6,ACT_CLOUD:7,STYLE_GLASS:3,STYLE_FLAT:2,STYLE_NONE:1,FILL_SOLID:0,FILL_TRANSPARENT:1,FILL_GRADIENT:2,BACKGROUND_FILL:1,BACKGROUND_IMAGE:2,TITLEBAR_REGULAR:1,TITLEBAR_IMAGE:2,ICON_DEFAULT:1,ICON_IMAGE:2,ACT_HELP_DEFAULT:1,ACT_HELP_DOCUMENT:2,LOGGING_LEVEL_WARNING:12,LOGGING_LEVEL_ERROR:14,LOGGING_LEVEL_MESSAGES:10,LOGGING_LEVEL_ALL:0,LOGGING_LEVEL_OFF:16,MEM_UNIT_MB:1,MEM_UNIT_GB:2,TIME_UNIT_DAYS:1,TIME_UNIT_HOURS:2,TIME_UNIT_MINUTES:3,AUTHEN_ANONY:1,AUTHEN_BASIC:2,AUTHEN_WIN:3,AUTHEN_INTEGRATED:4,AUTHEN_USHER:5,PRJ_AUTHEN_STD:1,PRJ_AUTHEN_WIN:2,PRJ_AUTHEN_LDAP:16,PRJ_AUTHEN_DB:32,PRJ_AUTHEN_TRUSTED:64,PRJ_AUTHEN_INTEGRATED:128,SRV_ASP:1,SRV_J2EE:0,REQ_HTTP:0,REQ_HTTPS:1,CACHE_PRELOAD_AUTO:1,CACHE_PRELOAD_OFF:2,CACHE_CLEAR_AUTO:1,CACHE_CLEAR_ONCLOSE:2,PUSH_NOTIFICATION_ON:1,PUSH_NOTIFICATION_OFF:2,OUTPUT_TYPE_ALL:1,OUTPUT_TYPE_MOBILE_CLIENT:2,getLightWeightReconcilePopup:function(){return U;},createObjBrowserDropdown:function(b){return A(b,C);},createTriggerListDropdown:function(b){return A(b,X);},makeButtonHashable:function(b){this.makeHashable(b);this.makeHashable(b,["cap","dsc","act","icn"]);this.makeHashable(b.act,["hlp","rs","fd"]);this.makeHashable(b.act.rs,["pcf"]);this.makeHashable(b.icn,["img"]);return b;},makeCSTHomescreenHashable:function(d){this.makeHashable(d);this.makeHashable(d,["rs","fd"]);if(d.cst){var e=d.cst.fmt;this.makeHashable(e);this.makeHashable(e,["btn","bkg","ttl","vw"]);this.makeHashable(e.bkg,["fll","img"]);this.makeHashable(e.ttl,["cap","img"]);this.makeHashable(e.btn,["fnt","brd","fll"]);for(var c=0,b=d.cst.btns.length;c<b;c++){this.makeButtonHashable(d.cst.btns[c]);}}else{if(d.rs){if(d.rs.sobs){var f=d.rs.sobs;for(var c=0,b=f.length;c<b;c++){this.makeHashable(f[c]);this.makeHashable(f[c],["fd","rs"]);if(f[c].rs){this.makeHashable(f[c].rs,["pcf"]);}}}if(d.rs.pb){this.makeHashable(d.rs,["pb"]);}}}},makeHashable:function(f,d){if(!f){return ;}else{if(d===undefined){T.make(f,mstrmojo.Obj);}else{for(var c=0,b=d.length;c<b;c++){var e=d[c];if(e in f){T.make(f[e],mstrmojo.Obj);}}}}},transformGradient:function(d){if(typeof d==="object"){var c=mstrmojo.css.buildGradient(0,G.decodeColor(d.sclr),G.decodeColor(d.eclr));return c.n+":"+c.v;}else{if(typeof d=="string"){var b=d.match(/#\w{6}/g);if(b!==null&&b.length==2){return{sclr:G.encodeColor(b[0]),eclr:G.encodeColor(b[1])};}}}return"";},getTransferAuth:function Z(b){var c=(b.udc===true)?mstrmojo.all.mobileConfig.data.cty.wsdc.am:b.wsc.am;return(c===this.AUTHEN_BASIC)?{transferAuthHeader:"1"}:null;},showErrorMsgBox:function Y(c){if(!c){return ;}var b=mstrmojo.all.mobileConfigTaskError;if(b){var d=b.children[0].text;if(d!=c){b.children[0].set("text",d+c);}}else{mstrmojo.insert({scriptClass:"mstrmojo.Dialog",id:"mobileConfigTaskError",title:mstrmojo.desc(3610),width:"475px",btnAlignment:"right",cssText:"border:1px solid #AAAAAA;",buttons:[{scriptClass:"mstrmojo.HTMLButton",cssText:"margin-bottom:2px",text:mstrmojo.desc(1442),preBuildRendering:function(){this.cssClass="mobileconfig-Button";},postBuildRendering:function(){this.domNode.focus();},onkeyup:function(g){var f=g.hWin,h=g.e||f.event;if(h.keyCode===13){this.onclick();}},onclick:function(e){mstrmojo.all.mobileConfigTaskError.destroy();}}],children:[{scriptClass:"mstrmojo.Label",text:c}]}).render();}},isASP:function K(){return(window.location.pathname.indexOf("/asp/")>0)?true:false;},getWebSrvUrl:function B(b){return((parseInt(b.rt,10)===0)?"http":"https")+"://"+b.nm+":"+b.po+"/"+b.pt+((parseInt(b.ty,10)===0)?"/servlet/taskProc":"/asp/taskProc.aspx");},setValidValue:function Q(d,e,b,c){if(!d){return ;}b=(b!=null)?P.trim(b):"";if(c&&d.set){d.set(e,b);}else{d[e]=b;}},validatePort:function M(b){b=parseInt(b,10);if(b<0||b>65535){return false;}},generalValidator:function H(c,d,f,b){var e={id:this.id,code:mstrmojo.validation.STATUSCODE.VALID,msg:""};if(d===mstrmojo.expr.DTP.INTEGER){c=parseInt(c,10);}if(f&&f(c)===false){e.code=mstrmojo.validation.STATUSCODE.INVALID_VALIDATOR;e.msg=b;}return e;},propertyName:function N(c,e,b,d){return{scriptClass:"mstrmojo.Label",text:c,cssText:b,slot:e,bindings:d};},obj2Xml:function D(j,i,h,e,f,c){var b=h?'<?xml version="1.0" encoding="UTF-8"?>':"",g=f?f:{_meta_usesSuper:false,_super:false,audibles:false,dead:false,defaultButton:false,defaultPrj:false,defaultSrv:false,disposables:false,id:false,pdn:false,scriptClass:false,validFlag:false},d={getArrItemName:c?c:function(m,k,l){return m.substr(0,m.length-1);},isSerializable:function(m,l,k){return(g[m]===false)?false:true;},skipNull:e,convertBoolean:false,skipFunctions:true};b+=P.json2xml(i,j,d);return b;}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+(C[B.itemType]?" t_"+C[B.itemType]:"")+(C[B.itemSubType]?" st_"+C[B.itemSubType]:"")+(C[this.itemISC]?" isc":"")+(C[B.itemViewMedia]?" vm_"+C[B.itemViewMedia]:"")+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(F){var E=F[this.itemType],D=F[this.itemSubType],B=" t"+E,C=(parseInt(E,10)===1||parseInt(E,10)===3||parseInt(D,10)===14082)?" st"+D:"",G=F[this.itemISC]?'class="mstrmojo-ListIcon isc"':"",A=(F[this.itemViewMedia]===2048||F[this.itemViewMedia]===8192)?" hvi":"";return'<span class="mstrmojo-ListIcon '+B+C+A+'"><span '+G+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length,B;if(A>0){for(B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+E.substring(0,G)+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemISC:"isc",itemViewMedia:"dvm",useDblSelect:false});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.TextBox");var A=mstrmojo.css,C=mstrmojo.dom;mstrmojo.TextArea=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextArea",markupString:'<textarea id="{@id}" class="mstrmojo-TextArea {@cssClass}"  style="{@cssText}" title="{@tooltip}" placeholder="{@placeholderText}" rows="{@rows}" cols="{@cols}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keydown,keyup,blur></textarea>',maxLength:256,onkeydown:function B(K){var I=this.inputNode,J=this.value,E=this.maxLength,F=(J&&J.length)||0,M=K.e,L=M.keyCode;this.isDeleteKeys=L===8||L===46;this.isArrowKeys=L===37||L===38||L===39||L===40;if(E!==undefined&&E<=F){var G=I.selectionEnd,H=(G!==undefined)?(G-I.selectionStart)>0:document.selection.createRange().text.length>0;if(!this.isDeleteKeys&&!this.isArrowKeys&&!H){if(C.isIE7||C.isIE8||C.isIE9){I.blur();window.setTimeout(function(){I.focus();},1);}C.preventDefault(window,M);return false;}}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.TextArea,{oncssClassChange:function D(){A.addClass(this.domNode,this.cssClass||"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(V,T){if(!V){return ;}var S=T&&T.length||0,U;for(U=S;U>0;U--){V=V.replace(new Array(U+2).join("#"),T[U-1]);}return V;},L=function L(T){if(!T){return ;}var Z=this,V=J.position(T.refNode||Z.refNode),Y=J.position(Z.domNode),X=T.position||R.RIGHT,U=0,a=0,S=9+(T.margin!==undefined?T.margin:0),W=" ";switch(X){case R.TOP:a=-Y.h-S;W+="t";break;case R.BOTTOM:a=V.h+S;W+="b";break;case R.LEFT:U=-Y.w-S;W+="l";break;case R.RIGHT:U=V.w+S;W+="r";break;}mstrmojo.hash.forEach(C(T,{left:U,top:a,contentNodeCssClass:W,visible:false}),function(b,c){this[c]=b;},this);this.set("visible",T.invalid);},A=function A(S){var W=this,U,V=S.errorCode,X=S.errorMsg,T=S.args,Y=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){U={content:V!==null?(W.generateContentHTML(Q(Y[V],T))||Y["*"]):X};}return U;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(U){var Y=this,a=Y.warningSlotName,c=Y[a],S=U&&U.lasting||6000,X=U.refNode||this.domNode,T=U.highlight!==false,b=U.closeOnClick===false?false:true,Z;if(!c){c=new mstrmojo.Tooltip({refNode:X,highlight:T,closeOnClick:b,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Y.addDisposable(c);Y[a]=c;Z=Y.closeOnClick=Y.getCloseOnClickListener();J.attachEvent(document.body,"click",Z);}var W=U.position||R.TOP,V="vi-warning vi-tooltip-";switch(W){case R.TOP:c.cssClass=V+"V";break;case R.BOTTOM:c.cssClass=V+"A";break;case R.LEFT:c.cssClass=V+"D";break;case R.RIGHT:c.cssClass=V+"C";break;}c.open(Y,A.call(Y,U));this.adjustPosition(U);if(T){P.toggleClass(c.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Y._warningTimeOut);Y._warningTimeOut=window.setTimeout(function(){Y.hideWarning();},S);},hideWarning:function H(){var T=this,S=T[T.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(T._warningTimeOut);delete T._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var T=S[S.warningSlotName];if(T.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var T=this;L.call(T[T.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(U){if(!U||!U.attachEventListener){return ;}var V=U._validationEventListener,T;if(V){U.detachEventListener(V);delete U._validationEventListener;}T=this.getValidationEvtListener();if(T){U._validationEventListener=U.attachEventListener("validationChange",this.id,T);}},this);},getValidationEvtListener:function B(){var T=this;return function S(U){var V=U.value;T[(V&&V.invalid?"show":"hide")+"Warning"](V);};},unrender:function K(S){var T=this[this.warningSlotName];if(T){T.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,T=this.parent.parent;if(R===""){T.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);T.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox");mstrmojo.MultiColumnListBox=mstrmojo.declare(mstrmojo.ListBox,null,{scriptClass:"mstrmojo.MultiColumnListBox",cssClass:"",tableCssClass:"mstrmojo-MultiColumnListBox-table",cellCssClass:"",cssText:"",width:"200px",height:"200px",autoColWidth:true,minColWidth:10,tableWidth:"100%",colCount:0,colGroups:null,colWidths:null,sortIndex:null,sortDirection:true,titleIcon:"",titleText:"",titleCssText:"",showEmptyTitlebar:false,banding:true,hideEmptyIconNode:true,cp:null,columns:null,items:null,sortable:true,resizable:true,_markupPrefix:function(){var C=this.itemRenderer;return(C&&C.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="0" cellpadding="0"><tbody>');},_markupSuffix:function(){var C=this.itemRenderer;return(C&&C.markupSuffix)||"</tbody></table>";},_itemGroupPrefix:function(C){var E=this.itemRenderer,D=this.rowCssText?'style="'+this.rowCssText+'"':"",F=this.rowCssClass+(C%2===1?" even":"");F=F?'class="'+F+'"':"";return(E&&E.itemGroupPrefix)||("<tr "+F+D+">");},_itemGroupSuffix:function(){var C=this.itemRenderer;return(C&&C.itemGroupSuffix)||"</tr>";},_itemPrefix:function(){var D=this.itemRenderer,E=this.cellCssClass?'class="'+this.cellCssClass+'"':"",C=this.cellCssText?'style="'+this.cellCssText+'"':"";return(D&&D.itemPrefix)||("<td "+E+" "+C+">");},_itemSuffix:function(){var C=this.itemRenderer;return(C&&C.itemSuffix)||"</td>";},_getItemNode:function(C){var E=this.itemsNode,D=E&&E.rows,F=D&&D[C/D.length-1];return F&&F.cells[C%D.length-1].firstChild;},itemRenderer:{icon:function(D,C,E){if(E.hideEmptyIconNode){D.icon=D.icon||"none";}return'<div><div class="mstrmojo-MultiColumnListBox-icon '+D.icon+'" title="'+D.v+'"/></div>';},text:function(D,C,E){return'<div class="mstrmojo-MultiColumnListBox-text" edt="1">'+D.v+"</div>";},icon_text:function(D,C,E){if(E.hideEmptyIconNode){D.icon=D.icon||"none";}return'<div class="mstrmojo-MultiColumnListBox-iconText"><span class="mstrmojo-MultiColumnListBox-icon '+D.icon+'" title="'+mstrmojo.string.encodeHtmlString(D.v)+'" ></span><span edt="1">'+mstrmojo.string.encodeHtmlString(D.v)+"</span></div>";},checkbox:function(D,C,E){return'<div><input class="mstrmojo-MultiColumnListBox-checkbox" type="checkbox"  '+D.v+"/></div>";},link:function(D,C,E){return'<div class="mstrmojo-MultiColumnListBox-link"><a target="'+D.target+'" href="'+D.url+'" class="mstrmojo-MultiColumnListBox-link"><span>'+D.v+"</span></a></div>";},rowHeight:20},markupString:'<div id="{@id}" class="mstrmojo-MultiColumnListBox {@cssClass}" style="{@cssText}; xxwidth:{@width}; left:{@left}; top:{@top};"><div class="mstrmojo-MultiColumnListBox-titlebar" style="width:{@width}; {@titleCssText};"><span class="mstrmojo-MultiColumnListBox-icon {@titleIcon}"></span><span class="mstrmojo-MultiColumnListBox-title">{@titleText}</span></div><div id="{@id}-MultiColumnListBox-container" class="mstrmojo-MultiColumnListBox-container" style="width:{@width};"><div id="{@id}-headersScrollBox" class="mstrmojo-MultiColumnListBox-headersScrollBox" style="xxwidth:{@width};"><div id="{@id}-headersContainer" class="mstrmojo-MultiColumnListBox-headersContainer" style="xxwidth:{@width};" onclick="mstrmojo.all[\'{@id}\'].captureDomEvent(\'sort\', self, arguments[0]);" onmousedown="mstrmojo.all[\'{@id}\'].captureDomEvent(\'mousedown\', self, arguments[0]);" >{@headersHtml}</div></div><div id="{@id}-itemsScrollBox" class="mstrmojo-MultiColumnListBox-itemsScrollBox" style="max-height:{@height}; xxwidth:{@width};" ><div id="{@id}-itemsContainer" class="mstrmojo-MultiColumnListBox-itemsContainer" style="xxwidth:{@width};" onclick="mstrmojo.all[\'{@id}\'].captureDomEvent(\'edit\', self, arguments[0]);" >{@itemsHtml}</div></div></div></div>',markupSlots:{headersContainerNode:function(){return this.domNode.lastChild.firstChild.firstChild;},itemsContainerNode:function(){return this.domNode.lastChild.lastChild.firstChild;},scrollboxNode:function(){return this.domNode.lastChild.lastChild;}},_headersHtml:null,_buildItemsMarkup:function(C,G,M,D,N,F,J){var O=[],L=0,K=this._itemGroupSuffix&&this._itemGroupSuffix();O[L++]=M;var I;for(I=C;I<=G;I++){O[L++]=(this._itemGroupPrefix&&this._itemGroupPrefix(I))||"<tr "+((I%2===1)?'class="even"':"")+">";var H,E;for(H=0,E=this.colCount;H<E;H++){O[L++]=N||"<td>";O[L++]=this.columns[H].render((J&&J[H])||this.items[I][H],I*H,this);O[L++]=F||"</td>";}O[L++]=K||"</tr>";}O[L++]=D;return O;},_buildColWidths:function(){this.colWidths=this.colWidths||[];var D=this.colWidths;if(D.length===0){var F;for(F=this.colCount-1;F>-1;F--){D[F]=this.headersNode.rows[0].cells[F].offsetWidth;}}var C=0,E;for(E=D.length-1;E>-1;E--){C+=D[E];}this.itemsNode.style.width=this.headersNode.style.width=C+"px";},_buildColGroup:function A(){this._buildColWidths();var K=this.resizingIndex,D=this.colWidths,I=this.colGroups;if(I&&I.length===2&&I[0].childNodes.length===parseInt(this.colCount,10)){if(K!==null&&K>=0){I[0].childNodes[K].style.width=D[K]+"px";I[1].childNodes[K].style.width=D[K]+"px";}}else{var C=document.createElement("colgroup"),G,E;for(G=0,E=this.colCount;G<E;G++){var F=document.createElement("col");F.style.width=D[G]+"px";C.appendChild(F);}var J=function(L,M){L[(L.firstChild.tagName.toLowerCase()!=="colgroup")?"insertBefore":"replaceChild"](M,L.firstChild);};J(this.headersNode,C);var H=C.cloneNode(true);J(this.itemsNode,H);this.colGroups=[C,H];this._webKit_repaint();}},_webKit_repaint:function(){if(mstrmojo.dom.isWK){var D=[this.headersNode,this.itemsNode];var C=function(E){var F;for(F in D){if(D[F]){D[F].style.tableLayout=E||"fixed";}}};C("auto");self.setTimeout(C,1);}},init:function(C){this._super(C);this.scrollboxHeight=parseInt(this.height,10)||200;this.cp=this.cp||new mstrmojo.MCListBoxCP();},preBuildRendering:function B(){if(this._super){this._super();}var C=this.cp;if(C.items===null&&C.columns===null&&C.ds&&C.ds.length>0){C.fetch();}else{C.dataLoaded=true;}if(this.resizable){this.cssClass+=" resizable ";}},buildRendering:function(){var F=this,I=this.cp;if(I&&I.dataLoaded&&(I.columns||I.items)){this.columns=I.columns;this.items=I.items;this.colCount=I.columns.length;this.titleIcon=I.titlebar.icon;this.titleText=I.titlebar.v;this.itemRenderer=I.itemRenderer||this.itemRenderer;if(!this.titleIcon&&!this.titleText&&!this.showEmptyTitlebar){this.titleCssText="display:none";}var C=this.columns,G=this.itemRenderer;var E;for(E=this.colCount-1;E>=0;E--){C[E].render=G[C[E].type];}var D=this.colWidths;if(!this.autoColWidth&&(!D||D.length===0)){D=[];for(E=this.colCount-1;E>-1;E--){D[E]=parseInt(C[E].width,10)||this.minColWidth;}this.colWidths=D;}this.headersHtml=this.headersHtml||this._buildItemsMarkup(0,0,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix(),C).join("");this._super();if(!this.headerNode){this.addSlots({headersNode:this.headersContainerNode.firstChild});}var H=this.itemsContainerNode;if(H.firstChild.offsetHeight>H.parentNode.clientHeight){H.style.width=(H.offsetWidth-17)+"px";this.headersContainerNode.style.width=H.style.width;}this._buildColGroup();mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",function(J){F.headersContainerNode.scrollLeft=mstrmojo.dom.eventTarget(window,J).scrollLeft;});this.hasRendered=!!this.domNode;}else{window.setTimeout(function(){F.buildRendering();},100);}return true;},onsort:function(E){if(!this.sortable){return false;}var D=E.hWin,F=E.e;var G=mstrmojo.dom.eventTarget(D,F);if(G){var C=mstrmojo.dom.findAncestorByName(G,"td",false,this.domNode);if(C){this.sortIndex=C.cellIndex;if(this.columns[C.cellIndex].sortable){this.sortDirection=!this.sortDirection;this.items=mstrmojo.array.deepSortArr(this.items,"v",this.sortIndex,this.sortDirection);this.refresh();}}}},refresh:function(){this.editor=null;this.resizeHandle=null;var C=this.headersContainerNode.scrollLeft;this._super();var D;for(D in [0,1]){var E=[this.headersNode,this.itemsNode][D];if(E&&E.firstChild.tagName.toLowerCase()!=="colgroup"){E.insertBefore(this.colGroups[D],E.firstChild);}}if(this.headersContainerNode&&this.scrollboxNode){this.headersContainerNode.scrollLeft=C;this.scrollboxNode.scrollLeft=C;}this._webKit_repaint();},reRender:function(){this.cp.columns=null;this.cp.items=null;this.cp.dataLoaded=false;this.colWidths=null;this.colGroups=null;this.headersHtml=null;this.refresh();},onedit:function(E){var D=E.hWin,F=E.e;var H=mstrmojo.dom.eventTarget(D,F);var C=mstrmojo.dom.findAncestorByName(H,"td",true);if(C&&H&&this.columns[C.cellIndex].editable){this.rowIndex=C.parentNode.rowIndex;this.cellIndex=C.cellIndex;switch(H.tagName.toLowerCase()){case"div":case"span":if(H.getAttribute("edt")){var G=this.editor||new mstrmojo.InlineEditor();if(!G.editor){G.render();G.attachEventListener("targetChange",this.id,function(I,J){this.items[this.rowIndex][this.cellIndex].v=this.editor.editor.value;});this.editor=G;this.itemsContainerNode.appendChild(G.editor);}G.setTarget(H);G.show({value:H.innerText||H.textContent,style:{top:C.offsetTop+"px",left:C.offsetLeft+"px",width:(C.clientWidth-5)+"px"}});}break;case"input":this.items[this.rowIndex][this.cellIndex].v=H.checked?"checked":"";break;}}},onmousedown:function(K){if(!this.resizable){return false;}var E=K.hWin,G=K.e;var C=mstrmojo.dom.eventTarget(E,G);if(C&&C.tagName.toLowerCase()==="td"){if(this.columns[C.cellIndex].resizable!==false){var I=C.offsetLeft+C.offsetWidth-this.itemsContainerNode.parentNode.scrollLeft;this.resizingIndex=C.cellIndex;this.startx=mstrmojo.dom.getMousePosition(G).x;var L=function(M){var N=document.createElement("div");N.className="mstrmojo-MultiColumnListBox-rzHandle";N.style.left=M+"px";return N;};var J=this.resizeHandle||L(I);if(!this.resizeHandle||!mstrmojo.dom.contains(this.domNode,J)){this.resizeHandle=J;this.scrollboxNode.parentNode.appendChild(J);}else{J.style.left=I+"px";}J.style.display="block";var H=this;var F=function(M){J.style.left=Math.max(0,I+mstrmojo.dom.getMousePosition(M).x-H.startx)+"px";};var D=function(O){if(J){J.style.display="none";mstrmojo.dom.detachEvent(document,"mousemove",F);mstrmojo.dom.detachEvent(document,"mouseup",D);}var M=H.resizingIndex;if(M>=0){H.colWidths[M]=Math.max(H.minColWidth,H.colWidths[M]+mstrmojo.dom.getMousePosition(O).x-H.startx);H._buildColGroup();H.resizingIndex=null;if(mstrmojo.dom.isIE){var N=H.itemsContainerNode.clientHeight,P=H.scrollboxNode;P.style.height=N+"px";if(P.scrollWidth>P.clientWidth){P.style.height=N+17+"px";}}}};mstrmojo.dom.attachEvent(document,"mousemove",F);mstrmojo.dom.attachEvent(document,"mouseup",D);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.MCListBoxCP=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.MCListBoxCP",ds:null,titlebar:{icon:"",text:""},itemRenderer:null,columns:null,items:null,fetch:function A(){this.dataLoaded=false;var B=this,C=new mstrmojo.SimpleXHR(),D={success:function(E){var F;for(F in E){B[F]=E[F];}B.dataLoaded=true;},failure:function(){alert("Data request failed!");}};C.request("POST",this.ds,D,{});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.InlineEditor=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.InlineEditor",target:null,visible:false,markupString:"<input id={@id} class=\"mstrmojo-InlineEditor {@cssClass}\"onblur=\"mstrmojo.all['{@id}'].captureDomEvent('blur', self, arguments[0]);\" onkeyup=\"mstrmojo.all['{@id}'].captureDomEvent('keyup', self, arguments[0]);\"/>",markupSlots:{editor:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},onvisibleChange:function(A){if(mstrmojo.dom.isFF){var B=this;this.md=this.md||function C(D){if(B.target){var E=mstrmojo.dom.eventTarget(self,D);if(!/InlineEditor/.test(E.className)){B.onblur();}}};if(this.visible){mstrmojo.dom.attachEvent(document,"mousedown",this.md);}else{mstrmojo.dom.detachEvent(document,"mousedown",this.md);}}},setTarget:function(A){this.target=A;},show:function(B){var F=this.target,A=this.editor;if(!B){B={value:F.innerText||F.textContent,style:{top:F.offsetTop+"px",left:F.offsetLeft+"px",width:F.offsetWidth+"px"}};}var E;for(E in B){var D=B[E];if(D instanceof Object){var C;for(C in D){A[E][C]=D[C];}}else{A[E]=D;}}this.set("visible",true);A.focus();},onblur:function(){var A=this.target;if(A){A[A.innerText?"innerText":"textContent"]=this.editor.value;this.set("visible",false);this.set("target",null);}},onkeyup:function(B){var A=B.hWin,C=B.e;C=C||window.event;if((C.keyCode||C.charCode)===13){this.editor.onblur(C);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var A="rszc";mstrmojo.resizableCorner={_MIN_WIDTH:10,_MIN_HEIGHT:10,_target:[],add:function(C){var B=mstrmojo.resizableCorner._target;if(C&&mstrmojo.array.indexOf(B,C)===-1){var D=document.createElement("div");D.className="rsz-corner";D.id=A+mstrmojo.resizableCorner._target.length;D.setAttribute(A,1);mstrmojo.dom.attachEvent(D,"mousedown",this.onstart);C.appendChild(D);C.setAttribute(A,1);B.push(C);}},remove:function(C){var B=mstrmojo.resizableCorner._target;var D=C.lastChild;if(!D.hasAttribute(A)){D=document.getElementById(A+mstrmojo.array.indexOf(B,C));}C.removeChild(D);mstrmojo.array.removeItem(B,C);},onstart:function(F){var C=mstrmojo.dom.eventTarget(window,F);if(C&&C.tagName.toLowerCase()==="div"&&C.hasAttribute(A)&&C.getAttribute(A)==="1"){C.ownerDocument.onselectstart=function(){return false;};var D=mstrmojo.resizableCorner._target[parseInt(C.id.replace(new RegExp(A),""),10)],H=D&&D.ownerDocument;if(D.hasAttribute(A)&&D.getAttribute(A)==="1"){var E=D.clientWidth,G=D.clientHeight,I=mstrmojo.dom.getMousePosition(F);var B=function(L){var K=mstrmojo.dom.getMousePosition(L);D.style.width=Math.max(10,E+K.x-I.x)+"px";D.style.height=Math.max(10,G+K.y-I.y)+"px";};var J=function(K){mstrmojo.dom.detachEvent(H,"mousemove",B);mstrmojo.dom.detachEvent(H,"mouseup",J);};mstrmojo.dom.attachEvent(H,"mousemove",B);mstrmojo.dom.attachEvent(H,"mouseup",J);}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller");var F=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType;function D(G){return{browseConfig:null,parent:G,next:function(J){var I=this.browseConfig;if(!I){return ;}I.blockBegin+=I.blockCount;var H={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:I.blockBegin,blockCount:I.blockCount,includeAncestorInfo:true};if(I.folderLinksContextId){H.folderLinksContextId=I.folderLinksContextId;}if(I.includeObjectDesc){H.includeObjectDesc=I.includeObjectDesc;}if(I.rootFolderID){H.rootFolderID=I.rootFolderID;}else{if(I.rootFolderType){H.rootFolderType=I.rootFolderType;}}if(I.browsableTypes){H.objectType=I.browsableTypes;}if(I.searchPattern){H.searchPattern=I.searchPattern;if(I.recursive){H.recursive=I.recursive;}}this.parent.set("waiting",true);if(I.dataProvider){I.dataProvider.serverRequest(H,J);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,H);}},hasNext:function(){var H=this.browseConfig;return(H.blockBegin+H.blockCount-1)<H.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function E(G){if(this._super){this._super(G);}this.ifDataHelper=D(this);if(G.browseConfig){this.ifDataHelper.browseConfig=G.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function B(G){var H=this.browseConfig.browsableViewMedias;if(G&&H){var I={};F.forEach(H.split(","),function(J){I[parseInt(J,10)]=true;});G=F.filter(G,function(J){return(J.t!==A.DssTypeDocumentDefinition)||I[J.dvm];});}this.add(G,-1);this.set("waiting",false);if(this._super){this._super(G);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function C(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:"!!this.parent.scrollable"}}),({scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:"!!this.parent.rightScrollable"}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E==="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E==="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof G==="object")&&(typeof G.length==="number"));};if(B(F)&&B(E)){var C;for(C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.mobileConfigUtil","mstrmojo.MultiColumnListBox","mstrmojo.InlineEditor","mstrmojo.form","mstrmojo.MCListBoxCP");var H=mstrmojo.mobileConfigUtil,M=mstrmojo.dom,K=mstrmojo.hash,F=mstrmojo.string,L=mstrmojo.validation.TRIGGER,E=mstrmojo.expr.DTP;var D=[{n:mstrmojo.desc(7778),v:H.AUTHEN_ANONY},{n:mstrmojo.desc(7227),v:H.AUTHEN_BASIC},{n:mstrmojo.desc(7779),v:H.AUTHEN_WIN}],I=K.cloneArray(D),B=[{n:mstrmojo.desc(7785),v:H.REQ_HTTP},{n:mstrmojo.desc(7786),v:H.REQ_HTTPS}],C=[{n:mstrmojo.desc(7725),v:H.DEVICE_IPHONE},{n:mstrmojo.desc(7726),v:H.DEVICE_IPAD},{n:mstrmojo.desc(8433),v:H.DEVICE_PHONE_UNIVERSAL},{n:mstrmojo.desc(8434),v:H.DEVICE_TABLET_UNIVERSAL}];I.push({n:mstrmojo.desc(5595),v:H.AUTHEN_INTEGRATED});var A=new mstrmojo.MultiColumnListBox({slot:"0,0",id:"confListTable",n:"Configuration List",renderAllItems:true,model:[],getActBtn:function J(P,O,N){return'<a class = mstrLink><span class="actionIcons '+N+'" title="'+P+'" onclick="'+O+'"></span></a>';},genActions:function G(){return this.getActBtn(mstrmojo.desc(767),"mstrmojo.all['"+this.id+"'].modifyItem(event)","actionIcons-modify")+this.getActBtn(mstrmojo.desc(3558),"mstrmojo.all['"+this.id+"'].duplicateItem(event)","actionIcons-duplicate")+this.getActBtn(mstrmojo.desc(7826),"mstrmojo.all['"+this.id+"'].urlGen(event)","actionIcons-url")+this.getActBtn(mstrmojo.desc(3559),"mstrmojo.all['"+this.id+"'].deleteItem(event)","actionIcons-delete");},getDeviceName:function(N){switch(N){case H.DEVICE_IPHONE:return mstrmojo.desc(7725);case H.DEVICE_IPAD:return mstrmojo.desc(7726);case H.DEVICE_PHONE_UNIVERSAL:return mstrmojo.desc(8433);case H.DEVICE_TABLET_UNIVERSAL:return mstrmojo.desc(8434);case H.DEVICE_BLACKBERRY:return mstrmojo.desc(7866);}},_set_model:function(Q,O){this.model=O;var N=[];if(O){for(var P=0;P<this.model.length;P++){N.push([{v:this.model[P].n,icon:(this.model[P].uptc!=-1)?"actionIcons-update":""},{v:this.getDeviceName(this.model[P].dt)},{v:this.genActions()}]);}this.columns[0].editable=true;}else{N=[[{v:"<"+mstrmojo.desc(7835,"No Configuration")+">"},{v:""},{v:""}]];this.columns[0].editable=false;}delete this.cp.items;this.cp.set("items",N);this.refresh();this.set("editor",this.getEditor());return true;},left:"20px",top:"150px",width:"100%",height:"100%",autoColWidth:false,sortable:false,resizable:false,getItemRow:function(O){var P=M.eventTarget(window,O);if(P){var N=M.findAncestorByName(P,"td",false,this.domNode);if(N){return N.parentNode.rowIndex;}}},getEditor:function(){return new mstrmojo.InlineEditor({cssClass:"mobile-InlineEditor",onblur:function(N){if(this.target&&this.editor.value&&F.trim(this.editor.value)&&(F.trim(this.editor.value)!=this.target[this.target.innerText?"innerText":"textContent"])){var P=this.target,T=P.parentNode.parentNode.parentNode.rowIndex,S=mstrmojo.all.confListTable.model[T];var O={};O=K.clone(S);O.n=this.editor.value;var R=H.obj2Xml(O,"cnf",true,false);var Q=this;mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(U){P[P.innerText?"innerText":"textContent"]=O.n;Q.setTarget(null);Q.set("visible",false);mstrmojo.all.confListTable.model[T].n=O.n;},failure:function(U){H.showErrorMsgBox(U.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"updateMobileConfigurationProperties",taskEnv:"xhr",configurationID:O.cid,configurationPropertiesXML:R},null,null);}else{this.setTarget(null);this.set("visible",false);}}});},modifyItem:function(N){this.parent.toEdit(this.model[this.getItemRow(N)].dt,this.model[this.getItemRow(N)].cid);},urlGen:function(N){mstrmojo.all.confList.urlSetting.open(null,{rowIdx:this.getItemRow(N)});},applyDuplicate:function(R,N,P){var Q="";if(P===0){Q=mstrmojo.desc(3651).replace(/##/,N);}else{Q=mstrmojo.desc(3652).replace(/###/,P).replace(/##/,N);}var O=this;mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(S){mstrmojo.all.confIndex.refreshData();},failure:function(S){O.applyDuplicate(R,N,++P);}},{taskId:"duplicateMobileConfiguration",taskEnv:"xhr",configurationID:R,configurationName:Q},null,null);},duplicateItem:function(O){var N=this.getItemRow(O);this.applyDuplicate(this.model[N].cid,this.model[N].n,0);},deleteItem:function(P){mstrmojo.all.confList.disableCurtain.set("visible",true);var O=this.getItemRow(P),R=this.model[O].cid,Q="<span>"+mstrmojo.desc(7856)+', </span><span style="font-weight:bold">'+F.htmlAngles(this.model[O].n)+"</span><span> ?</span>",N=mstrmojo.all.cnfrmDel;if(N){N.children.msg.set("text",Q);}else{mstrmojo.insert({scriptClass:"mstrmojo.Dialog",id:"cnfrmDel",title:mstrmojo.desc(3610),btnAlignment:"right",width:"475px",cssText:"border:1px solid #AAAAAA;",buttons:[{scriptClass:"mstrmojo.HTMLButton",cssText:"margin-bottom:2px",text:mstrmojo.desc(1442),preBuildRendering:function(){this.cssClass="mobileconfig-Button";},postBuildRendering:function(){this.domNode.focus();},onclick:function(S){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(T){},failure:function(T){H.showErrorMsgBox(T.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"deleteMobileConfiguration",taskEnv:"xhr",configurationID:R},null,null);mstrmojo.all.confIndex.refreshData();mstrmojo.all.confList.disableCurtain.set("visible",false);mstrmojo.all.cnfrmDel.destroy();}},{scriptClass:"mstrmojo.HTMLButton",cssText:"margin-left:15px;margin-bottom:2px",text:mstrmojo.desc(221),preBuildRendering:function(){this.cssClass="mobileconfig-Button";},onclick:function(S){mstrmojo.all.confList.disableCurtain.set("visible",false);mstrmojo.all.cnfrmDel.destroy();}}],children:[{scriptClass:"mstrmojo.Label",alias:"msg",text:Q,allowHTML:true}]}).render();}},cp:new mstrmojo.MCListBoxCP({columns:[{type:"icon_text",v:mstrmojo.desc(7765),sortable:false,editable:true,width:"400px"},{type:"text",v:mstrmojo.desc(2327),sortable:false,editable:false,width:"120px"},{type:"text",v:mstrmojo.desc(3265),sortable:false,editable:false,width:"150px"}],items:[[{v:""},{v:""},{v:""}]]})});mstrmojo.confList=mstrmojo.insert({id:"confListContainer",scriptClass:"mstrmojo.Container",markupString:"<div></div>",visible:true,markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.Table",id:"confList",rows:5,cols:1,cssText:"margin:20px 20px 20px 20px",toEdit:function(N,O){if(!N){return ;}mstrmojo.form.send((O)?{evt:3004,target:"mobileConfig",configId:O,device:N}:{evt:3004,target:"mobileConfig",device:N});},children:[A,{slot:"1,0",scriptClass:"mstrmojo.Button",enabled:true,text:mstrmojo.desc(7766),cssText:"text-decoration:underline;margin-left:10px;margin-top:8px;color:#0000FF; font-weight: bold;width:150px",onclick:function(N){this.parent.dtEdtr.open();}},{slot:"2,0",scriptClass:"mstrmojo.Popup",alias:"dtEdtr",cssClass:"greyBorder",zIndex:20,cssText:"margin-left:65px;background-color:#F5F5F2",onOpen:function(){mstrmojo.all.confList.disableCurtain.set("visible",true);},onClose:function(){mstrmojo.all.confList.disableCurtain.set("visible",false);},children:[{scriptClass:"mstrmojo.Table",cssText:"margin: 5px 5px 5px 5px",layout:[{cells:[{},{colSpan:2,cssText:"width:100px"}]},{cells:[{},{},{}]}],children:[H.propertyName(mstrmojo.desc(2327),"0,0","margin-right: 10px"),{slot:"0,1",alias:"dt",scriptClass:"mstrmojo.SelectBox",showItemTooltip:true,cssText:"width:100%",size:1,items:C,selectedItem:{v:H.DEVICE_IPHONE}},{slot:"1,1",scriptClass:"mstrmojo.Button",cssClass:"mobileconfig-Button",cssText:"margin-top:5px;margin-right:10px",text:mstrmojo.desc(1442),onclick:function(){var N=this.parent.dt.selectedItem.v;this.parent.parent.parent.toEdit(N);}},{slot:"1,2",scriptClass:"mstrmojo.Button",cssClass:"mobileconfig-Button",cssText:"margin-top:5px",text:mstrmojo.desc(221),onclick:function(){this.parent.parent.close();}}]}]},{slot:"3,0",scriptClass:"mstrmojo.Popup",cssClass:"greyBorder",zIndex:20,alias:"urlSetting",useShortURL:false,onOpen:function(){var O=this.children[0];O.hostnameVTB.validate();if(O.hostportVTB.enabled){O.hostportVTB.validate();}mstrmojo.all.confList.disableCurtain.set("visible",true);var N=this.domNode;document.body.appendChild(N);document.body.appendChild(mstrmojo.all.confList.disableCurtain.domNode);M.center(N);},onClose:function(){this.urlCurtain.set("visible",false);delete this.itmCpy;this.set("urlStr",undefined);delete this.urlStr;mstrmojo.all.confList.disableCurtain.set("visible",false);},updatePopupConfig:function(N){this.rowIdx=N.rowIdx;this.set("itmCpy",K.clone(mstrmojo.all.confListTable.model[mstrmojo.all.confList.urlSetting.rowIdx]));},buildURLParams:function(O){var N=[];for(var P in O){N.push(P+"="+O[P]);}return N.join("&");},updateURL:function(O){var c=window.location,a=c.pathname.slice(0,String(c.pathname).lastIndexOf("/")),X=this.itmCpy,V=(X.lnk.rt===H.REQ_HTTPS)?"https":"http",b=(X.dt==H.DEVICE_PHONE_UNIVERSAL||X.dt==H.DEVICE_TABLET_UNIVERSAL),Y=X.dt==H.DEVICE_BLACKBERRY,P=X.lnk.ipo?":"+X.lnk.po:"",Z=X.lnk.nm;var Q={taskId:"getMobileConfiguration"};Q.taskEnv=b?"xhr":"xml";Q.taskContentType=b?"json":"xmlanf";Q.configurationID=X.cid;if(Y){Q.taskEnv="blackberry_xml";}if(b){Q.blockTransform="flatten";}if(b||Y){Q.blockVersion="1";}var U=V+"://"+Z+P+a+"/"+mstrConfig.taskProcURL+"?"+this.buildURLParams(Q);var N="";if(X.dt==H.DEVICE_BLACKBERRY){N=U;}else{U=encodeURIComponent(U);N="mstr://?url="+U+"&authMode="+X.lnk.am+((X.cs)?("&csUrl="+encodeURIComponent(X.cs)):"")+"&dt="+X.dt;W=this;tcs=X.tcs;for(var R=0,T=tcs&&tcs.length;R<T||0;R++){N+="&trust="+encodeURIComponent(tcs[R].url);}}var S=function(d){O.set("textIconClass",d?"mstrmojo-WaitIcon":"");O.set("enabled",!d);},W=this;if(this.useShortURL&&b){S(true);N="http://tinyurl.com/api-create.php?url="+encodeURIComponent(N);mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(d){W.set("urlStr",d);S(false);},failure:function(d){W.set("urlStr",d.getResponseHeader("X-MSTR-TaskFailureMsg"));S(false);}},{taskId:"shortURL",taskEnv:"xhr",srcUrl:N});}else{this.set("urlStr",N);}},children:[{scriptClass:"mstrmojo.Table",cssText:"width:400px;height:140px;background-color:#F5F5F2",layout:[{cssClass:"mstrmojo-Editor-titlebar",cells:[{cssClass:"mstrmojo-Editor-titleCell"},{cssClass:"mstrmojo-Editor-titleCell",colSpan:2}]},{cells:[{colSpan:3}]},{cells:[{},{colSpan:2}]},{cells:[{},{colSpan:2}]},{cells:[{},{colSpan:2}]},{cells:[{},{colSpan:2}]},{cells:[{colSpan:3}]},{cells:[{},{},{}]},{cells:[{colSpan:3}]}],children:[{slot:"0,0",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Editor-title",cssText:"font-weight: bold",text:mstrmojo.desc(7794)},{slot:"0,1",scriptClass:"mstrmojo.Button",title:mstrmojo.desc(2102),iconClass:"mstrmojo-Editor-close",cssText:" float: right",onclick:function(){this.parent.parent.close();}},H.propertyName(mstrmojo.desc(7949),"1,0","margin:15px 2px 2px 15px;"),{slot:"2,0",scriptClass:"mstrmojo.Label",cssText:"margin:5px 2px 2px 15px",text:mstrmojo.desc(36)+":"},{slot:"2,1",scriptClass:"mstrmojo.ValidationTextBox",cssText:"margin:5px 15px 2px 0px;width:200px",alias:"hostnameVTB",required:true,dtp:E.CHAR,constraints:{trigger:L.ALL,validator:function(N){return H.generalValidator(N,this.dtp,function(O){if(O=="localhost"||O=="127.0.0.1"){return false;}},mstrmojo.desc(7852));}},bindings:{value:"this.parent.parent.itmCpy.lnk.nm || window.location.hostname"},onValid:function(){if(this.parent.parent.itmCpy){this.parent.parent.itmCpy.lnk.nm=this.value;this.set("isValid",true);}},onInvalid:function(){this.set("isValid",false);}},{slot:"3,0",scriptClass:"mstrmojo.CheckBox",alias:"showPrt",cssText:"margin:5px 0px 2px 11px",label:mstrmojo.desc(7950)+":",bindings:{checked:"this.parent.parent.itmCpy.lnk.ipo"},oncheckedChange:function(){if(this.checked==null){return ;}if(this.checked){this.parent.hostportVTB.validate();}else{this.parent.hostportVTB.clearValidation();this.parent.hostportVTB.set("isValid",true);}this.parent.parent.itmCpy.lnk.ipo=this.checked;}},{slot:"3,1",scriptClass:"mstrmojo.ValidationTextBox",cssText:"margin:5px 15px 2px 0px;width:200px",alias:"hostportVTB",required:true,dtp:E.INTEGER,constraints:{trigger:L.ALL,validator:function(N){return H.generalValidator(N,this.dtp,H.validatePort,mstrmojo.desc(7839).replace(/###/,65535).replace(/##/,0));}},bindings:{enabled:"this.parent.showPrt.checked",value:function(){var N=this.parent.parent.itmCpy.lnk.po;return N==-1?(window.location.port||80):N;}},onValid:function(){if(this.parent.parent.itmCpy){this.parent.parent.itmCpy.lnk.po=this.value;}this.set("isValid",true);},onInvalid:function(){this.set("isValid",false);}},H.propertyName(mstrmojo.desc(7951)+":","4,0","margin:5px 2px 2px 15px"),{slot:"4,1",scriptClass:"mstrmojo.SelectBox",showItemTooltip:true,cssText:"margin:5px 15px 2px 0px;width:205px",itemIdField:"v",size:1,items:B,bindings:{selectedItem:"{v:this.parent.parent.itmCpy.lnk.rt}"},onchange:function(){if(this.parent.parent.itmCpy){this.parent.parent.itmCpy.lnk.rt=this.selectedItem.v;}}},H.propertyName(mstrmojo.desc(7952)+":","5,0","margin:5px 2px 2px 15px",{visible:"this.parent.parent.itmCpy.dt!=5"}),{slot:"5,1",scriptClass:"mstrmojo.SelectBox",showItemTooltip:true,cssText:"margin:5px 15px 2px 0px;width:205px",itemIdField:"v",size:1,bindings:{items:function(){if(this.parent.parent.itmCpy){if(this.parent.parent.itmCpy.dt===1||this.parent.parent.itmCpy.dt===2){return I;}else{return D;}}},selectedItem:"{v:this.parent.parent.itmCpy.lnk.am}",visible:"this.parent.parent.itmCpy.dt!=5"},onchange:function(){if(this.parent.parent.itmCpy&&this.selectedItem){this.parent.parent.itmCpy.lnk.am=this.selectedItem.v;}}},{slot:"6,0",scriptClass:"mstrmojo.CheckBox",cssText:"margin:5px 15px 2px 11px",label:mstrmojo.desc(9047),oncheckedChange:function(){this.parent.parent.useShortURL=this.checked;},bindings:{checked:"this.parent.parent.useShortURL",visible:"this.parent.parent.itmCpy.dt==3||this.parent.parent.itmCpy.dt==4"}},{slot:"7,0",scriptClass:"mstrmojo.Button",cssClass:"mobileconfig-Button",cssText:"margin-right: 50px",alias:"urlBtn",text:mstrmojo.desc(7826),bindings:{enabled:"this.parent.hostnameVTB.isValid&&this.parent.hostportVTB.isValid"},markupMethods:K.copy(mstrmojo.Button.prototype.markupMethods,{ontextIconClassChange:function(){this.textNode.className="mstrmojo-Button-text  "+this.textIconClass;}}),onclick:function(){this.parent.parent.updateURL(this);}},{slot:"7,1",scriptClass:"mstrmojo.Button",cssClass:"mobileconfig-Button",cssText:"margin-left: 15px;margin-right: 15px",text:mstrmojo.desc(118),bindings:{enabled:"this.parent.hostnameVTB.isValid&&this.parent.hostportVTB.isValid"},enableBtn:function(N){this.set("enabled",N);this.parent.cancelBtn.set("enabled",N);this.parent.urlBtn.set("enabled",N);},onclick:function(){this.parent.parent.urlCurtain.set("visible",true);this.enableBtn(false);var O=mstrmojo.all.confList.urlSetting.itmCpy;var S=window.location.pathname,R=O.lnk.nm,N=O.lnk.ipo?":"+O.lnk.po:"",T=S.slice(0,String(S).lastIndexOf("/")+1);O.lnk.bu=R+N+T+mstrConfig.taskProcURL;var Q=H.obj2Xml(O,"cnf",false,false);var P=this;mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(U){mstrmojo.all.confListTable.model[mstrmojo.all.confList.urlSetting.rowIdx].lnk=O.lnk;mstrmojo.all.confList.urlSetting.close();P.enableBtn(true);},failure:function(U){H.showErrorMsgBox(U.getResponseHeader("X-MSTR-TaskFailureMsg"));P.enableBtn(true);}},{taskId:"updateMobileConfigurationProperties",taskEnv:"xhr",configurationID:O.cid,configurationPropertiesXML:Q},null,null);}},{slot:"7,2",scriptClass:"mstrmojo.Button",alias:"cancelBtn",cssClass:"mobileconfig-Button",cssText:"margin-left: 15px;margin-right: 15px",text:mstrmojo.desc(221),onclick:function(){mstrmojo.all.confList.urlSetting.close();}},{slot:"8,0",scriptClass:"mstrmojo.Panel",cssText:"text-align:center",alias:"urlShow",bindings:{state:"(this.parent.parent.urlStr)?1:0"},children:[{scriptClass:"mstrmojo.TextArea",cssText:"width:350px;height:100px;margin-bottom:15px;cursor:default",cssClass:"greyBorder",readOnly:true,bindings:{value:"this.parent.parent.parent.urlStr"}},{scriptClass:"mstrmojo.Button",enabled:true,visible:M.isAndroid,text:"Link",cssText:"margin-bottom:15px;text-decoration:underline;color:#0000FF;font-weight: bold",onclick:function(){window.location=this.parent.parent.parent.urlStr;}}]}]},{scriptClass:"mstrmojo.Label",alias:"urlCurtain",visible:false,cssClass:"confList-disableCurtain"}]},{slot:"4,0",scriptClass:"mstrmojo.Label",alias:"disableCurtain",visible:false,cssClass:"confList-disableCurtain"}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.Table","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Button","mstrmojo.confList");mstrmojo.mobileListView=mstrmojo.insert({scriptClass:"mstrmojo.Table",id:"mobileListView",placeholder:"mobileConfigView",cssText:"border: 1px solid #808080;width:100%;border-collapse: collapse;padding-left:5px",layout:[{cssClass:"mstrPanelTitleBar",cells:[{}]},{cells:[{}]}],children:[{slot:"0,0",scriptClass:"mstrmojo.HBox",cssText:"width:100%",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrPanelTitle",text:mstrmojo.desc(7764)},{scriptClass:"mstrmojo.Widget",markupString:'<a href="{@helpRef}" style="float:right" target="_new"><img class="mstrIcon-btn mstrIcon-btnHelp" src="../images/1ptrans.gif"></img></a>',title:mstrmojo.desc(1143),helpRef:(mstrApp.helpUrl||"../help/")+"MobileServer/WebHelp/Lang_"+mstrApp.localeId+"/mobileserver.htm#Configuring_MicroStrategy_Mobile.htm"}]},{slot:"1,0",scriptClass:"mstrmojo.HBox",children:[mstrmojo.all.confListContainer]}]}).render();})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.mstr.ui.IncFetchOBList");var O=mstrmojo.hash,W=mstrmojo.func,L=mstrmojo.meta.TP,F="5CECE58CC1D549F890EB61C4DB2156A3",T="E0CCB9CF22104A489CBE78D974AFD19E",Q=mstrmojo.chart.model.enums.EnumDSSObjectType,K=mstrmojo.array,D=mstrmojo.dom,X=function(f,g,a){var d=f.scrollableIncFetch,c=d?"mstrmojo.mstr.ui.IncFetchOBList":"mstrmojo.OBList",e={scriptClass:c,items:g.items,multiSelect:a};if(d){e.browseConfig={blockBegin:g.bb,blockCount:g.bc,totalSize:g.sz,folderLinksContextId:f.folderLinksContextId,rootFolderID:g.did,browsableTypes:f.browsableTypes,browsableViewMedias:f.browsableViewMedias,dataProvider:f.dataProvider};e.onwaitingChange=function(){if(f.booklet){f.booklet.set("waiting",this.waiting);}};}var b=mstrmojo.insert(e);b.render();return b;},A=function(c,d,a){var b=mstrmojo.ObjectBrowser.widgetHandler||X;return b(c,d,a);},N={success:function(c){var d=this.ob,b=c.items,e=d.pageCache[d.currentPage],a=e._w;e.items=b;a.set("items",b);this.ob=null;this.item=null;window.clearTimeout(d._btm);d.booklet.set("waiting",false);if(d.scrollableIncFetch&&a.scrollNode){a.initScroll();a.updateScrollbars();}},failure:function(a){window.alert(a.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},S=function(f,e,c){var d=c?-1:1,b=f.pageCache.length,g;for(g=f.currentPage+d;g<b&&g>=0;g+=d){var a=f.pageCache[g];if(a._k===e.k){return{steps:g-f.currentPage,cache:a};}}return null;},C=function(e,d,c,f){var g=e.currentPage+1,b=e.pageCache.length,a;for(a=g;a<b;a++){e.pageCache[a]._w.destroy();delete e.pageCache[a].items;}e.pageCache=e.pageCache.slice(0,g);f._w=c;f._k=d.k;e.pageCache[g]=f;e.cacheChange();},H=function(b){var a=mstrmojo.hash.walk("anc.items.0.items",b);this.set("canGoUp",!(!b.pf||!a));},I=function(e,d,f,c,b){delete e._btm;var a;if(!c){a=A(e,f,e.multiSelect);a.attachEventListener("change",e.id,"navigate");if(e.useDblSelect||e.useBothSglDblSelect){a.attachEventListener("dblclick",e.id,"dblselect");}}else{a=f._w;}e.obList=a;e.booklet.turn(a,b>0);window.setTimeout(function(){e.onBrowsing=false;},300);if(!c){C(e,d,a,f);}e.set("currentFolder",f);e.set("currentPage",e.currentPage+b);e.updateUpButton(f);if(e.scrollableIncFetch&&a.scrollNode){a.initScroll();a.updateScrollbars();}},P=function(c,b,a){var d=S(c,b,false);d=d||S(c,b,true);if(!d){window.clearTimeout(c._btm);c._btm=window.setTimeout(function(){c.booklet.set("waiting",true);},300);a.ob=c;a.item=b;c.getDataProvider().fetchFolderContents(c,b,a);}else{I(c,b,d.cache,true,d.steps);}},B=function(b,c,d,a){P(b,{fid:b.pageCache[b.currentPage].did,blockBegin:c,searchPattern:d,recursive:a},N);},J={success:function(b){var c=this.ob;if(c){window.clearTimeout(c._btm);if(!b.items){b.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var a=function e(f){var j=f.length,g;for(g=0;g<j;g++){var h=f[g];if(h.did===F||h.did===T){h.n=(h.did===F)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(h.items){a(h.items);}}};if(b.did===F||b.did===T){b.n=(b.did===F)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(b.anc&&b.anc.items){a(b.anc.items);}}if(b&&b.items&&c.browsableViewMedias){var d={};K.forEach(c.browsableViewMedias.split(","),function(f){d[parseInt(f,10)]=true;});b.items=K.filter(b.items,function(f){return(f.t!==Q.DssTypeDocumentDefinition)||d[f.dvm];});}if(b&&b.items&&mstrApp&&mstrApp.isSingleTier){b.items=K.filter(b.items,function(f){return(f.st!==772);});}if(b.did&&this.item.k!==b.did){this.item.k=b.did;}I(c,this.item,b,false,1);this.ob=null;this.item=null;}},failure:function(a){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(a);}else{if(a.getResponseHeader){mstrmojo.alert(a.getResponseHeader("X-MSTR-TaskFailureMsg"));}else{mstrmojo.alert(a.message);}}},complete:function(){if(this.ob){this.ob.onBrowsing=false;}}},Z=function(c){var b=c.pageCache.length,a;for(a=0;a<b;a++){c.pageCache[a]._w.destroy();}c.pageCache=[];c.currentPage=-1;c.cacheChange();},M=function(d,c,e){var a=d.onBrowseFolder;if(a){a[0][a[1]](c);}if(c&&parseInt(c.acg,10)===33){return ;}var b={};if(c){b.k=c.did;b.fid=c.did;}else{if(d.rootFolderID){b.k=d.rootFolderID;b.fid=d.rootFolderID;}else{if(d.rootFolderType){b.k=d.rootFolderType;b.fty=d.rootFolderType;}else{if(d.folderLinksContextId){b.k=d.folderLinksContextId;}}}}P(d,b,W.wrapMethods(e,O.copy(J)));},V=function(f,a,c){if(!c){return a;}var d=f.showCompletePath,h=a[0],e,b;while(h){var g;for(g=c.length-1;g>=0;g--){if(h.did===c[g].did){c.splice(g,1);h._isSc=true;}}b=h;h._open=true;h=h.items;h=h&&h[0];if(!h){b.lastLeaf=true;}}if(!d){h=a[0];while(h){if(h._isSc){a[0]=h;break;}h=h.items;h=h&&h[0];}}return a.concat(c);},U=function(b,a,c){b._naviInfo=V(b,a,c);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,browsableViewMedias:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,upButtonVisible:false,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,minSearchLength:2,showCompletePath:true,multiSelect:false,onCloseCB:null,onSelectCB:null,onBrowseFolder:null,scrollableIncFetch:false,useBothSglDblSelect:false,displaySaveLabel:false,useOldSearch:false,getDataProvider:function(){if(!this.dataProvider){this.dataProvider=mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"});}return this.dataProvider;},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"saveLabel",scriptClass:"mstrmojo.Label",cssClass:"msrmojo-save-label",text:mstrmojo.desc(3178,"Save in:"),bindings:{visible:"this.parent.parent.displaySaveLabel"}},{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var a=this.opener.parent.parent,d=this.tree,c=a._naviInfo,b=this.parent.parent.parent.extraDDItems;if(d.items!==c){d._pup=this;this.ob=a;if(b){K.forEach(b,function(e){e.isExtra=true;});c=c.concat(b);}d.set("items",c);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(e,a,b){var d=mstrmojo.WidgetTree.prototype.itemFunction(e,a,b);if(e.isExtra){if(e.cssClass){d.cssClass=e.cssClass;}d.onmousedown=e.onmousedown||mstrmojo.emptyFn;return d;}if(e._open){d.state=1;}d._ll=!!e.lastLeaf;d._pup=b._pup;d.onmousedown=function(f){var g=mstrmojo.dom.eventTarget(f.hWin,f.e),h=this._pup;if(g===this.domNode||g===this.textNode){if(!this._ll){M(h.ob,this.data);}h.close();}};d.markupMethods=O.copy(d.markupMethods);d.markupMethods.onstateChange=function(){var f=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[f]||"closed");this.itemsContainerNode.style.display=(f===1)?"block":"none";};d.useRichTooltip=true;var c=d.postBuildRendering;d.postBuildRendering=function(){if(c){c.call(d);}if(d.textNode.parentNode.clientWidth){d.textNode.style.width=(d.textNode.parentNode.clientWidth-20)+"px";}};d.premouseover=function(h){if(this.useRichTooltip){var g=this.textNode;if(g.clientWidth<g.scrollWidth){var f=D.position(g);this.richTooltip={areaId:this.id,cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.data[this.itemDisplayField],top:f.y-2,left:f.x+f.w+6};}else{this.richTooltip=null;}mstrmojo.dom.stopPropogation(h.hWin,h.e);}return true;};return d;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up One Level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:"this.parent.parent.canGoUp",visible:"this.parent.parent.upButtonVisible"}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:"this.parent.parent.closeable"},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:"this.parent.fishEyeVisible"}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",cssClass:"searchBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 3px 0; ",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,forceResetCache:true,bindings:{minSearchLength:"this.parent.parent.minSearchLength",quickSearch:"this.parent.parent.quickSearch"},serverRequest:function(a,b){this.parent.parent.getDataProvider().serverRequest(a,b);},preFetch:function(){this.objectTypes=this.parent.parent.browsableTypes||this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);},onUpdateSearchParams:function G(c){var b=this.parent.parent,a=b.sId;if(a){c.sessionState=a;}if(b.useOldSearch){c.quickSearch=0;c.nameWildcards=1;c.sortKey=6;}}}],bindings:{visible:"this.parent.searchVisible"}},{scriptClass:"mstrmojo.Booklet",cssClass:"mstrmojo-OB-booklet",alias:"booklet",hasAnimation:false,bindings:{scrollableIncFetch:"this.parent.scrollableIncFetch"}},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(b){var d=parseInt(this.height,10),a=this.np>1,c={target:this.domNode,props:{height:{start:(a?0:d),stop:(a?d:0),suffix:"px"}},onEnd:function(){if(a){this.target.style.overflow="visible";}}},e=new mstrmojo.fx.AnimateProp(c);this.domNode.style.overflow="hidden";mstrmojo.css.toggleClass(this.parent.domNode,"show-inc-fetch",this.visible);e.play();},onifsChange:function(a){var b=this.np;mstrmojo.hash.copy(a.value,this);if(this.np>1){this.children=null;this.refresh();}if((b<=1&&this.np>1)||(b>1&&this.np<=1)||(b===0&&this.np>0)){this.set("visible",this.np>1);}this.cssText="";}}],destroy:function Y(){Z(this);if(this._super){this._super();}},postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}var c=this.searchUpBar;if(c&&c.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var a=this.obSearchBox.contentWidget||this.obSearchBox;if(!this.scrollableIncFetch){a.attachEventListener("ifsChange",this.id,function(d){if(!this.scrollableIncFetch){this.obIncFetch.set("ifs",d.value);}});}}if(!this.scrollableIncFetch&&this.obIncFetch){var b=this.obIncFetch;b.attachEventListener("fetch",this.id,function(d){b.cp=d.v;b.children=null;b.refresh();B(this,(d.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}mstrmojo.css.addClass(this.domNode,"mstrmojo-ObjectBrowser");},onSearchItemsChange:function(b){var c=b.value,a=this.pageCache[this.currentPage]._w;if(!c||c.length===0){c=[{did:"empty",n:"("+mstrmojo.desc(2210,"")+")",t:"e"}];}else{if(this.browsableViewMedias){var d={};K.forEach(this.browsableViewMedias.split(","),function(e){d[parseInt(e,10)]=true;});c=K.filter(c,function(e){return(e.t!==Q.DssTypeDocumentDefinition)||d[e.dvm];});}}a.set("items",c);},navigate:function(h){var a=h.src,i=a.selectedItem,c=this.multiSelect,f=c&&a.getSelectedItems(),g=this,b=h.added&&h.added.length,e=h.removed&&h.removed.length,d=c?f.length===1&&(!e||b):!!i;if(d&&i.did==="empty"){return ;}if(d&&parseInt(i[L],10)===8){if(!this.onBrowsing){this.onBrowsing=true;M(this,i);}}else{if((i&&(!this.useDblSelect||this.useBothSglDblSelect))||f){this.select(c?f:i);}}},browseFolder:function(a,b){M(this,{did:a,n:b});},onFishEyeChange:function(a){this.goToPage(a.value);},goToPage:function(a){if(a<this.pageCache.length&&a!==this.currentPage){var c=a>this.currentPage,b=this.pageCache[a];this.set("currentPage",a);this.booklet.turn(b._w,c);this.set("currentFolder",b);H.call(this,b);}},oncurrentPageChange:function(a){if(this.fishEye){this.fishEye.setSelectedIndex(a.value);}var b=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(b.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",b.items||[]);this.obSearchBox.set("totalSize",b.sz);this.obSearchBox.set("rootID",b.did);this.obSearchBox.clearSearch();}if(!this.scrollableIncFetch&&this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(b.sz/b.bc)+((b.sz%b.bc>0)?1:0),cp:Math.floor(b.bb/b.bc)+((b.bb%b.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(b,a){O.copy(b,this);if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}Z(this);M(this,undefined,a);},close:function(){var b=this.ctx||this,a=b.onCloseCB;if(a){a[0][a[1]]();}b.set("visible",false);},select:function(b){var a=this.onSelectCB;if(a){a[0][a[1]](b);}if(this.closeOnSelect){this.close();}},dblselect:function R(b){var c=b&&b.src.selectedItem;if(!c||(c&&c.did==="empty")||c[L]===8){return ;}if(this.useBothSglDblSelect){var a=this.onDblSelectCB;if(a){a[0][a[1]](c);}if(this.closeOnSelect){this.close();}}else{this.select(c);}},goUp:function(){if(this.canGoUp){M(this,{did:this.currentFolder.pf});}},updateUpButton:function E(a){H.call(this,a);},oncurrentFolderChange:function(a){var b=a.value;U(this,b.anc.items,b.sc);},refreshContent:function(a){B(this,a);},onError:null,onheightChange:function(){var a=["titleBar","fishEye","searchUpBar","obIncFetch"],c=0,b;for(b in a){c+=parseInt(this[a[b]].domNode.offsetHeight,10);}this.booklet.set("height",parseInt(this.height,10)-c+"px");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.mobileListView");mstrmojo.insert({id:"confIndex",scriptClass:"mstrmojo.Obj",_set_children:function(B,A){this.children=A;mstrmojo.all.confListTable.set("model",this.children);return true;},refreshData:function(){var A=this;mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(B){delete A.children;if(B&&B.cnfs.length!==0){A.set("children",B.cnfs);}else{A.set("children",undefined);}},failure:function(B){delete A.children;A.set("children",undefined);mstrmojo.mobileConfigUtil.showErrorMsgBox(B.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"getMobileConfigurationIndex",taskEnv:"xhr"},false,null);},postCreate:function(){this.refreshData();}});})();