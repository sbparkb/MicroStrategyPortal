mstrmojo.chart.model.enums.EnumDSSGraphNumberFormatType={DssGraphNumberFormatDefault:-2,DssGraphNumberFormatFixed:0,DssGraphNumberFormatCurrency:1,DssGraphNumberFormatDate:2,DssGraphNumberFormatTime:3,DssGraphNumberFormatPercentage:4,DssGraphNumberFormatFraction:5,DssGraphNumberFormatScientific:6,DssGraphNumberFormatCustom:7,DssGraphNumberFormatSpecial:8,DssGraphNumberFormatGeneral:9,DssGraphNumberFormatFromGrid:10};mstrmojo.chart.model.enums.EnumDSSGraphLegendPosition={DssGraphLegendPositionFreeFloat:0,DssGraphLegendPositionRight:1,DssGraphLegendPositionLeft:2,DssGraphLegendPositionBottom:3};mstrmojo.chart.enums.EnumGraphMatrixMarkerTypeInChart={_LINE_IN_LINE:0,_DOTS_IN_LINE:1,_ISODOT_IN_LINEAREA:2,_MUTATION_IN_LINE:3,_BAR:4,_SHAPES_IN_BUBBLESCATTER:5,_SHAPES_IN_GRID:6,_TICK_CATEGORY:7,_TICK_VALUE:8,_TICK_GRID:9,_PIE:10};mstrmojo.chart.enums.EnumFontAlignment={FA_LEFT:0,FA_CENTER:1,FA_RIGHT:2};mstrmojo.chart.enums.EnumGraphMatrixMajorGraphType={_UNDEFINED:0,_AREA:1,_BAR:2,_LINE:3,_SCATTER:4,_BUBBLE:5,_PIE:6,_GRID:7};mstrmojo.chart.enums.EnumValueAxis={VA_Y1:0,VA_Y2:1,VA_BOTH:2,VA_Y3:3,VA_Y4:4};mstrmojo.chart.enums.EnumRectExpandDirection={REC_EXP_INVALID:0,REC_EXP_HORIZONTAL:1,REC_EXP_VERTICAL:2,REC_EXP_BOTH:3};mstrmojo.chart.enums.EnumGenericDirection={NONE:0,TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};mstrmojo.chart.enums.EnumFontRotation={FR_NORMAL:0,FR_45:5,FR_90:2,FR_180:3,FR_270:4,FR_315:6,FR_CUSTOME:7,FR_HOTEL:1,FR_AUTOMATIC:-1};mstrmojo.chart.model.enums.EnumDSSGraphFillEffect={DssGraphFillSimple:0,DssGraphFillGenericGradient:1,DssGraphFillWash:3,DssGraphFillPicture:4,DssGraphFillUserPicture:6,DssGraphFillBrush:13,DssGraphFillAdvancedWash:14,DssGraphFillPattern:101};mstrmojo.chart.enums.EnumOrientation={OR_HORIZONTAL:0,OR_VERTICAL:1};mstrmojo.chart.enums.EnumLineJoinType={LJT_MITER:0,LJT_BEVEL:1,LJT_ROUND:2};mstrmojo.chart.model.enums.EnumDSSGraphDataLineType={DssGraphDataLineNone:0,DssGraphDataLineMarker:1,DssGraphDataLineLine:2};mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition={_BOTTOM:0,_TOP:1,_LEFT:2,_RIGHT:3,_CENTER:4};mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition={DssGraphDTPositionCenter:0,DssGraphDTPositionOutMin:1,DssGraphDTPositionInMin:2,DssGraphDTPositionInMax:3,DssGraphDTPositionOutMax:4,DssGraphDTPositionOnSide:5,DssGraphDTPositionPieSmart:6,DssGraphDTPositionPieSmartRadial:7,DssGraphDTPositionPieSmartStacked:8};mstrmojo.chart.enums.EnumRadientGradientUsage={RG_PIESLICE:0,RG_RING:1,RG_BORDERRING:2};mstrmojo.chart.enums.EnumGraphMatrixElementSizeMode={_AUTOMATIC:0,_PROPORTIONAL:1,_MANUAL:2};mstrmojo.chart.enums.EnumLegendMarkersStyle={LMS_LeftOfText:0,LMS_RightOfText:1,LMS_CenterOnMarkers:2,LMS_AboveText:3,LMS_BelowText:4};mstrmojo.chart.model.enums.EnumVariantBool={VARIANT_TRUE:65535,VARIANT_FALSE:0};mstrmojo.chart.enums.EnumMarkerShape={MS_Rectangle:0,MS_XShape:1,MS_PlusSymbolthin:2,MS_PlusSymbolthick:3,MS_Circle:4,MS_Diamond:5,MS_Triangle:6,MS_Square:7,MS_Star:8,MS_Area:9,MS_Star45:10};mstrmojo.chart.enums.EnumTrendLineIndex={TLI_Y1:0,TLI_Y2:1,TLI_BOTH:2};mstrmojo.chart.enums.EnumAxisDirection={AD_X:0,AD_Y:1,AD_Z:2};mstrmojo.chart.enums.EnumBoxStyle={BS_NOFRAME:0,BS_SINGLE_LINE_FRAME:1,BS_DOUBLE_LINE_FRAME:2,BS_EXTRUDE:3,BS_BEVELED_FRAME:4,BS_REVERSE_BEVELED_FRAME:5};mstrmojo.chart.enums.EnumDSSExtraGraphObject={DssGraphO1Interlaced:20000,DssGraphO2Interlaced:20001,DssGraphX1Interlaced:20002,DssGraphY1Interlaced:20003,DssGraphY2Interlaced:20004,DssGraphY3Interlaced:20005,DssGraphY4Interlaced:20006,DssGraphZInterlaced:20007,DssGraphQualityBand:20008,DssGraphQualityBandTitle:20009,DssGraphY1SecondUserLine:21000,DssGraphWarningMessage:21001,DssGraphO1BracketLine:21002,DssGraphBaseLayer:21004,DssGraphMiddleWallLayer:21005,DssGraphPlotLayer:21006,DssGraphRendererLayer:21007,DssGraphBanner:22005};mstrmojo.chart.enums.EnumGraphMatrixThemeType={UNDEFINED:-1,_black:0,_white:1};mstrmojo.chart.enums.EnumGraphSubType={GST_NULL:0,GST_BIPOLAR:1,GST_DUALAXIS:2};mstrmojo.chart.enums.EnumAnchorPoint={TOP_LEFT:0,TOP_MIDDLE:1,TOP_RIGHT:2,LEFT_MIDDLE:3,CENTER:4,RIGHT_MIDDLE:5,BOTTOM_LEFT:6,BOTTOM_MIDDLE:7,BOTTOM_RIGHT:8};mstrmojo.chart.model.enums.EnumDSSGraphPictureScaleType={DssGraphPictureScaleNone:0,DssGraphPictureScale2Fit:1,DssGraphPictureScale2Frame:2,DssGraphPictureScale2Background:3,DssGraphPictureTiled:4,DssGraphPictureTiled2Frame:5,DssGraphPictureTiled2Background:6,DssGraphPictureBrickHorizontal:7,DssGraphPictureBrickVertical:8,DssGraphPictureStack:9,DssGraphPictureScaleProportional:10};mstrmojo.chart.enums.EnumLineStyle={LS_SOLID:0,LS_DASH:1,LS_DOT:2,LS_DOT_DASH:3,LS_DASH_DOT_DOT:4,LS_MEDIUM_DASH:5,LS_SHORT_DASH:6,LS_LONGEST_DASH:7,LS_LONG_DOT:8,LS_DOT_DOT_DOT:9,LS_DASH_DASH_DOT:10,LS_DASH_DASH_DOT_DOT:11,LS_LONG_DASH_DOT:12,LS_LONG_DASH_DOT_DOT:13,LS_LONG_DASH_DASH:14,LS_LONG_DASH_DASH_DASH:15,LS_GRADIENT:16,LS_NONE:99};mstrmojo.chart.model.enums.EnumDSSGraphStockLayout={DssGraphStockLayoutDefault:0,DssGraphStockLayoutVerticalLine:1,DssGraphStockLayoutCandleStick:2,DssGraphStockLayoutLine:3,DssGraphStockLayoutArea:4,DssGraphStockLayoutLineCircle:5,DssGraphStockLayoutDot:6,DssGraphStockLayoutArea2:7};mstrmojo.chart.enums.EnumGraphMatrixPiePlotType={GMPPT_CATEGORY:0,GMPPT_VALUE:1,GMPPT_GRID:2};mstrmojo.chart.enums.EnumChartStyle={_general:0,_cluster:1,_absolute:2,_stacked:3,_percent:4,_ring:5,_bullet:6,_udf:100};mstrmojo.chart.ChartConstants={kPI:3.141592653589793,kHalfSqrt2:0.70710678,kVirtualCoordinateWidth:700,kVirtualCoordinateHeight:400,kGroupLabelsRatio:0.1,kGridLineMarginFactor:10,kAngleMargin:0.1,kLabelMarginFactor:20,kVirtualMarkerSize:2,kBetweenLabels:0,kBetweenLabelLines:1,kLabelToChart:2,kNumericLabelToTick:3,kChartToChart:4,kExtra:5,kEndTickToChart:6,kEndLabelToChart:7,kBetweenLabelCenters:8,kCategoricalLabelToTick:9,kBandSide:10,kDataLabel:11,kRefLabel:12,kAxisOriginLabel:13};mstrmojo.chart.enums.EnumBoundingRectType={BRT_TOP:0,BRT_BOTTOM:1,BRT_CYLINDER:2,BRT_RING_CYLINDER:3,BRT_START_RECT:4,BRT_END_RECT:5};mstrmojo.chart.model.enums.EnumVariantType={VT_EMPTY:0,VT_NULL:1,VT_I2:2,VT_I4:3,VT_R4:4,VT_R8:5,VT_CY:6,VT_DATE:7,VT_BSTR:8,VT_DISPATCH:9,VT_ERROR:10,VT_BOOL:11,VT_VARIANT:12,VT_UNKNOWN:13,VT_DECIMAL:14,VT_I1:16,VT_UI1:17,VT_UI2:18,VT_UI4:19,VT_I8:20,VT_UI8:21,VT_INT:22,VT_UINT:23,VT_VOID:24,VT_HRESULT:25,VT_PTR:26,VT_SAFEARRAY:27,VT_CARRAY:28,VT_USERDEFINED:29,VT_LPSTR:30,VT_LPWSTR:31,VT_RECORD:36,VT_FILETIME:64,VT_BLOB:65,VT_STREAM:66,VT_STORAGE:67,VT_STREAMED_OBJECT:68,VT_STORED_OBJECT:69,VT_BLOB_OBJECT:70,VT_CF:71,VT_CLSID:72,VT_BSTR_BLOB:4095,VT_VECTOR:4096,VT_ARRAY:8192,VT_BYREF:16384,VT_RESERVED:32768,VT_ILLEGAL:65535,VT_ILLEGALMASKED:4095,VT_TYPEMASK:4095};mstrmojo.chart.enums.EnumDataSetStatus={DTST_INVALID:0,DTST_OKAY:1,DTST_DISABLED:2};mstrmojo.chart.model.enums.EnumDSSExtraGraphProperty={DssGraphOffScaleType:10139,DssGraphTypeRingPie:20015,DssGraphPieRadius:20016,DssGraphPieSliceQuadrant:20017,DssGraphUseInterlacedGrid:20018,DssGraphUseSmartBreak:20019,DssGraphSmartBreakStyle:20020,DssGraphSmartBreakStart:20021,DssGraphSmartBreakEnd:20022,DssGraphSmartBreakUsePercent:20023,DssGraphUseQualityBand:20024,DssGraphQualityBandUsePercent:20025,DssGraphQualityBandPosition:20026,DssGraphQualityBandShowTitle:20027,DssGraphUseChartArea:20028,DssGraphChartAreaNumber:20029,DssGraphChartAreaOrientation:20030,DssGraphChartAreaSpacePercentage:20031,DssGraphChartAreaDestination:20032,DssGraphChartAreaShowTitle:20033,DssGraphGaugeBorderClipped:20034,DssGraphCumulativePercentLabel:20035,DssGraphNewUseSmartLabels:20053,DssGraphIsIPhoneCharting:21000,DssGraphUseGlobalAutoScale:21001,DssGraphLegendItemText:21023,DssGraphAxisShowSecondUserLine:21024,DssGraphAxisSecondUserLineValue:21025,DssGraphCategoryLabelAreaHeight:21026,DssGraphGradientEndAlpha:21027,DssTimeSeriesYAxisLabelMinSpan:21076,DssTimeSeriesYAxisExtendHeight:21077,DssGraphMatrixUsePerfectPadding:21120,DssGraphMatrixIsValueAxisForPercentChart:21136,DssGraphMatrixDataLabelEnabled:21153,DSSGraphMatrixDataLabelRotated:21154,DssGraphMatrixInitedDataLabelRotation:21155,DSSGraphMatrixAxisAdjusted:21156,DSSGraphMatrixUseCustomMinMax:21157,DssGraphInfoReserved:30000,DssGraphInfoMajorType:30007,DssGraphInfoMinorType:30008,DssGraphInfoAutosizeHorizontal:30011,DssGraphInfoAutosizeVertical:30012,DssGraphInfoSeriesByColumn:30013,DssGraphInfoIncludeSubtotal:30014,DssGraphInfoSuppressLastLevel:30016,DssGraphInfoRecalculateChartFrame:30026,DssGraphInfoRecalculateLegend:30027,DssGraphInfoNestedLabel:30038,DssGraphInfoNestedLabelBracket:30039,DssGraphInfoUseMaxCategoriesAsMin:30048,DssGraphInfoUseZerosForGraphNulls:30049};mstrmojo.chart.model.enums.EnumDSSGraphMarkerLayout={DssGraphMarkerLeft:0,DssGraphMarkerRight:1,DssGraphMarkerCentered:2,DssGraphMarkerAbove:3,DssGraphMarkerBelow:4,DssGraphMarkerAuto:5};mstrmojo.chart.enums.EnumShowFace={SF_FRONT:1,SF_SIDE:2,SF_HIDDEN_SIDE:4};mstrmojo.chart.model.enums.EnumDSSGraphFillBevelEffect={DssGraphFillBevelNone:0,DssGraphFillBevelSmoothEdge:1,DssGraphFillBevelChiselEdge:2,DssGraphFillBevelDonut:3,DssGraphFillBevelSphere:4};mstrmojo.chart.enums.EnumObjectShape={OS_ELLIPSE:2,OS_LINE:5,OS_POLYGON:6,OS_RECTANGLE:7,OS_WEDGE:12,OS_WEDGECRUST:13,OS_POLYLINE:18,OS_PATH:24,OS_CIRCLE:100,OS_RINGSECTOR:101,OS_NORMALSECTOR:102};mstrmojo.chart.model.enums.EnumDSSGraphFontRotation={Automatic:-1,Normal:0,RotateHotel:1,Rotate90:2,Rotate180:3,Rotate270:4,Rotate45:5,Rotate315:6,Custom:7};mstrmojo.chart.enums.EnumRectCompare={NONE:-1,ExpandX:0,ExpandY:1,ShrinkX:2,ShrinkY:3,KeepX:4,KeepY:5,KeepBoth:6};mstrmojo.chart.model.enums.EnumDSSGraphAxisLabelLocation={DssGraphAxisLabelLowSide:0,DssGraphAxisLabelHighSide:1,DssGraphAxisLabelBothSides:2,DssGraphAxisLabelNeitherSide:3};mstrmojo.chart.enums.EnumLayout={LO_ABSOLUTE:0,LO_CLUSTER:1,LO_STACKED:2,LO_PERCENT:3};mstrmojo.chart.enums.EnumFormatType={FMT_UNDEFINED:0,FMT_LINE:1,FMT_FILL:2,FMT_FONT:3};mstrmojo.chart.model.enums.EnumDSSGraphGradientType={DssGraphGradientReserved:0,DssGraphGradientCircular:9,DssGraphGradientRectangular:10,DssGraphGradientLinear:14};mstrmojo.chart.model.enums.EnumShapeType={_COMBINED:-2,_GENERIC:-1,_AREA:0,_BAR:1,_LINE:2,_STEPLINE:3,_CIRCLE:4,_RECTANGLE:5,_SQUARE:6,_TICKER:7,_PIESLICE:8,_POLYGON:9,_PIE:10,_BULLET:11,_CURVE:12,_DEFAULT:100};mstrmojo.chart.enums.EnumSliceType={SLICE_STEPWISE:0,SLICE_GROUPADJACENT:1,SLICE_INDEPENDENT:2,SLICE_STRIPPED:3,SLICE_SPECIFY:4,SLICE_MIXED_GROUP:5,SLICE_MIXED_SERIES:6};mstrmojo.chart.enums.EnumDSSGraphOffScaleType={DssGraphOffScaleHide:0,DssGraphOffScaleClip:1,DssGraphOffScaleShow:2};mstrmojo.chart.Angle=mstrmojo.provide("mstrmojo.chart.Angle",{});mstrmojo.chart.enums.EnumLabelLevelOption={LLO_NORMAL:0,LLO_COMMON:1,LLO_SPECIFIC:2};mstrmojo.chart.enums.EnumImageUsage={GENERAL:0,FIRST_IMAGE_OF_SCROLL_VIEW:1,SECOND_IMAGE_OF_SCROLL_VIEW:2,IMAGE_OF_SCROLL_VIEW:4,EMPTY_IMAGE:8,OBJECT_CLIP_COMPUTATION:16,BANNER:32};mstrmojo.chart.enums.EnumAttachedPointsStyle={NORMAL:0,TOOLTIP_UPPER:1,TOOLTIP_LOWER:2,TOOLTIP_MIDDLE:3,TOOLTIP_U2L:4,TOOLTIP_TRAPEZOID:5};mstrmojo.chart.enums.EnumDSSGraphObjectManager={DssChartManager:20000,DssPlotManager:20001,DssPlot:20002,DssLegend:20003,DssAreaSeriesRenderer:20004,DssBarSeriesRenderer:20005,DssLineSeriesRenderer:20006,DssStepLineSeriesRenderer:20007};mstrmojo.chart.enums.EnumPictureFormatType={JPEG:0,PNG:1,BMP:7,GIF:100,PDF:102,SVG:103,WIN32:104,INSTRUCTIONS:105};mstrmojo.chart.enums.EnumCategoryLabelStyle={CLS_AUTOMATIC:0,CLS_NORMAL:1,CLS_STAGGER:2,CLS_MANUAL:3};mstrmojo.chart.enums.EnumLegendLayout={LL_LegendFreeFloat:0,LL_LegendOnRightSide:1,LL_LegendOnLeftSide:2,LL_LegendBelowChart:3};mstrmojo.chart.enums.EnumMajorGraphType={MGT_AREA:0,MGT_BAR:1,MGT_LINE:2,MGT_PARETO:3};mstrmojo.chart.enums.EnumCategoryAxisOidItem={OID_LABEL:0,OID_MAJOR_TICKS:1,OID_MINOR_TICKS:2};mstrmojo.chart.model.enums.EnumDSSGraphGridLineType={DssGraphGridNone:0,DssGraphGridRegular:1,DssGraphGridBoth:2,DssGraphGridInnerTicks:3,DssGraphGridOuterTicks:4,DssGraphGridSpanningTicks:5};(function(){var A;mstrmojo.chart.Polygon2D=A=mstrmojo.provide("mstrmojo.chart.Polygon2D",{});A.clone=function(D){var B=D.length,C,E=[];for(C=0;C<B;++C){E.push(D[C].clone());}return E;};}());mstrmojo.chart.enums.EnumCollectionType={CT_NO_COLLECTION:0,CT_LINE:1,CT_GENERAL_SHAPE:2,CT_TEXT:3,CT_VERTICAL_AREA:4,CT_VERTICAL_BAR:5,CT_HORIZONTAL_AREA:6,CT_HORIZONTAL_BAR:7,CT_DEPTH_LINE_OR_LINE_MARKER:8,CT_NO_FORMAT:9};mstrmojo.chart.enums.EnumNumberCategory={Default:-2,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7,Special:8,General:9,FromGrid:10};mstrmojo.chart.enums.EnumDssGraphGridChartUniformColorMode={BYX:0,BYY:1,BYBOTH:2};mstrmojo.chart.model.enums.EnumDSSGraphType={DssGraphTypeReserved:0,DssGraphTypeVertical_Area_Absolute:1,DssGraphTypeVertical_Area_Stacked:2,DssGraphTypeVertical_Area_BiPolar_Absolute:3,DssGraphTypeVertical_Area_BiPolar_Stacked:4,DssGraphTypeVertical_Area_DualAxis_Absolute:5,DssGraphTypeVertical_Area_DualAxis_Stacked:6,DssGraphTypeVertical_Area_Percent:7,DssGraphTypeHorizontal_Area_Absolute:8,DssGraphTypeHorizontal_Area_Stacked:9,DssGraphTypeHorizontal_Area_BiPolar_Absolute:10,DssGraphTypeHorizontal_Area_BiPolar_Stacked:11,DssGraphTypeHorizontal_Area_DualAxis_Absolute:12,DssGraphTypeHorizontal_Area_DualAxis_Stacked:13,DssGraphTypeHorizontal_Area_Percent:14,DssGraphTypeVertical_Bar_Side_by_Side:15,DssGraphTypeVertical_Bar_Stacked:16,DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:17,DssGraphTypeVertical_Bar_DualAxis_Stacked:18,DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:19,DssGraphTypeVertical_Bar_BiPolar_Stacked:20,DssGraphTypeVertical_Bar_Percent:21,DssGraphTypeHorizontal_Bar_Side_by_Side:22,DssGraphTypeHorizontal_Bar_Stacked:23,DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:24,DssGraphTypeHorizontal_Bar_DualAxis_Stacked:25,DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:26,DssGraphTypeHorizontal_Bar_BiPolar_Stacked:27,DssGraphTypeHorizontal_Bar_Percent:28,DssGraphTypeVertical_Line_Absolute:29,DssGraphTypeVertical_Line_Stacked:30,DssGraphTypeVertical_Line_BiPolar_Absolute:31,DssGraphTypeVertical_Line_BiPolar_Stacked:32,DssGraphTypeVertical_Line_DualAxis_Absolute:33,DssGraphTypeVertical_Line_DualAxis_Stacked:34,DssGraphTypeVertical_Line_Percent:35,DssGraphTypeHorizontal_Line_Absolute:36,DssGraphTypeHorizontal_Line_Stacked:37,DssGraphTypeHorizontal_Line_BiPolar_Absolute:38,DssGraphTypeHorizontal_Line_BiPolar_Stacked:39,DssGraphTypeHorizontal_Line_DualAxis_Absolute:40,DssGraphTypeHorizontal_Line_DualAxis_Stacked:41,DssGraphTypeHorizontal_Line_Percent:42,DssGraphTypePies:43,DssGraphTypeRing_Pie:44,DssGraphTypeMultiple_Pies:45,DssGraphTypeMultiple_Ring_Pies:46,DssGraphTypeMultiple_Proportional:47,DssGraphTypeMultiple_Proportional_Ring_Pies:48,DssGraphTypePie_Bar:49,DssGraphTypeRing_Pie_Bar:50,DssGraphTypeX_Y_Scatter:51,DssGraphTypeDualAxis_X_Y_Scatter:52,DssGraphTypeX_Y_Scatter_with_Labels:53,DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:54,DssGraphTypePolar_Coordinate_Chart:55,DssGraphTypeDualAxis_Polar_Coordinate_Chart:56,DssGraphTypeRadar_Line:57,DssGraphTypeRadar_Stacked_Area:58,DssGraphTypeDualAxis_Radar_Line:59,DssGraphTypeDualAxis_Radar_Stacked_Area:60,DssGraphTypeBubble:61,DssGraphTypeBubble_DualAxis:62,DssGraphTypeGantt_Chart:63,DssGraphTypeHiLo_Stock_Chart:64,DssGraphTypeHiLo_DualAxis_Stock_Chart:65,DssGraphTypeHiLoOpen_Stock_Chart:66,DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:67,DssGraphTypeHiLoOpenClose_Stock_Chart:68,DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:69,DssGraphTypeSpectral_Chart:70,DssGraphTypeVertical_Histogram:71,DssGraphTypeHorizontal_Histogram:72,DssGraphTypeTable_Chart:73,DssGraphTypeD3_Riser_Bars:74,DssGraphTypeD3_Riser_Pyramids:75,DssGraphTypeD3_Riser_Octogans:76,DssGraphTypeD3_Riser_Cut_Corner_Bars:77,DssGraphTypeD3_Floating_Cubes:78,DssGraphTypeD3_Floating_Spheres:79,DssGraphTypeD3_Connect_Group_Areas:80,DssGraphTypeD3_Connect_Group_Ribbons:81,DssGraphTypeD3_Connect_Group_Steps:82,DssGraphTypeD3_Connect_Series_Areas:83,DssGraphTypeD3_Connect_Series_Ribbons:84,DssGraphTypeD3_Connect_Series_Steps:85,DssGraphTypeD3_Surface:86,DssGraphTypeD3_Surface_with_Sides:87,DssGraphTypeD3_Honeycomb_Surface:88,DssGraphTypeD3_X_Y_Z_Scatter_Chart:89,DssGraphTypeD3_X_Y_Z_Scatter_with_Labels_Chart:90,DssGraphTypeVertical_Bar_Absolute:91,DssGraphTypeHorizontal_Bar_Absolute:92,DssGraphTypeBubble_With_Labels:93,DssGraphTypeBubble_DualAxis_With_Labels:94,DssGraphTypeGauge:95,DssGraphTypeFunnel:96,DssGraphTypePareto:97,DssGraphTypePareto_Percent:98,DssGraphTypeBoxPlot:99,DssGraphTypeRadar_Area_Stacked:100,DssGraphTypeRadar_Absolute_Area:101,DssGraphTypeVertical_Bar_BiPolar_Absolute:102,DssGraphTypeVertical_Bar_DualAxis_Absolute:103,DssGraphTypeHorizontal_Bar_BiPolar_Absolute:104,DssGraphTypeHorizontal_Bar_DualAxis_Absolute:105,DssGraphRadar_Line_Stacked:106,DssGraphRadar_DualAxis_Radar_Stacked_Line:107,DssGraphRadar_DualAxis_Radar_Area:108,DssGraphTypeMaxDeskTopGraphTypes:109,DssGraphTypeBarArea:201,DssGraphTypeBarLine:202,DssGraphTypeAreaLine:203,DssGraphTypeDualAxisBarArea:204,DssGraphTypeDualAxisBarLine:205,DssGraphTypeDualAxisAreaLine:206,DssGraphTypeGridChart:20000,DssGraphTypeVertical_Bar_DualAxis_Percent:20001,DssGraphTypeVertical_Line_DualAxis_Percent:20002,DssGraphTypeVertical_Area_DualAxis_Percent:20003,DssGraphTypeHorizontal_Bar_DualAxis_Percent:20004,DssGraphTypeHorizontal_Line_DualAxis_Percent:20005,DssGraphTypeHorizontal_Area_DualAxis_Percent:20006,DssGraphTypeHorizontal_CategoryPies_Absolute:21077,DssGraphTypeHorizontal_CategoryPies_Stacked:21078,DssGraphTypeHorizontal_CategoryPies_Percent:21079,DssGraphTypeVertical_CategoryPies_Absolute:21080,DssGraphTypeVertical_CategoryPies_Stacked:21081,DssGraphTypeVertical_CategoryPies_Percent:21082,DssGraphTypeScatter_Pies:21111,DssGraphTypeBubble_Pies:21121,DssGraphTypeGrid_Pies:21211,DssGraphTypeVertical_Bullet:21212,DssGraphTypeHorizontal_Bullet:21213};mstrmojo.chart.enums.EnumAxisLabelsLocation={ALL_LEFT:0,ALL_RIGHT:1,ALL_LEFT_RIGHT:2,ALL_BOTTOM:3,ALL_TOP:4,ALL_BOTTOM_TOP:5};mstrmojo.chart.enums.EnumFillType={FT_SIMPLE:0,FT_TEXTURE:4,FT_PICTURE:6,FT_GRADIENT:14,FT_PATTERN:101};mstrmojo.chart.enums.EnumInstructionName={JSONInsUndefined:0,JSONInsSaveState:1,JSONInsRestoreState:2,JSONInsClip:11,JSONInsScale:12,JSONInsRotate:13,JSONInsNewPath:101,JSONInsClosePath:102,JSONInsMoveTo:111,JSONInsLineTo:112,JSONInsBezierCurveTo:113,JSONInsAddRect:121,JSONInsAddArc:122,JSONInsAddNeedle:131,JSONInsAddGaugeMarker:132,JSONInsAddString:201,JSONInsSetLineDash:301,JSONInsSetLineWidth:302,JSONInsSetLineJoin:303,JSONInsSetFontSize:311,JSONInsSetRGBAFillColor:321,JSONInsSetRGBAStrokeColor:322,JSONInsFillPath:401,JSONInsStrokePath:402,JSONInsFillSimple:501,JSONInsFillPattern:502,JSONInsFillGradient:503,JSONInsFillEdgeType:511,JSONInsFillDonutOrSphere:512,JSONInsFillRadientGradient:513,JSONInsFillDonut2Rect:514,JSONInsFillBorderMetallic:515,JSONInsMakeDarker:521,JSONInsRestoreColor:522,JSONInsApplyLineFormat:601,JSONInsAddFormatedText:701,JSONInsApplyBeveledFrameToRectangle:801};mstrmojo.chart.model.enums.EnumDSSGraphPictureFormat={DssGraphPictureJPEG:0,DssGraphPictureGIF:1,DssGraphPicturePNG:2,DssGraphPictureWMF:3,DssGraphPictureBMP:4};mstrmojo.chart.enums.EnumGraphObjectType={GOT_AXIS_TITLE:0,GOT_AXIS_LABEL:1,GOT_AXIS_LINE:2,GOT_MAJOR_GRID:3,GOT_MINOR_GRID:4,GOT_INTERLACED_GRID:5};(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash;mstrmojo._CanSupportTransaction={_mixinName:"mstrmojo._CanSupportTransaction",updatedCellsMap:null,getUpdates:mstrmojo.emptyFn,getUpdateObject:mstrmojo.emptyFn,getKeyContext:mstrmojo.emptyFn,autoRefresh:mstrmojo.emptyFn,editNext:mstrmojo.emptyFn,buildConditions:mstrmojo.emptyFn,dataChanged:function A(G,H,F,I,D){var E=this.updateValue(G,F);this.updatedCellsMap[G]={r:H,v:F};this.controller.onTransactionUpdates(this,this.getUpdateObject(),E,D);},postBuildRendering:function B(){if(this._super){this._super();}if(!this.txModel){this.txModel=this.model.docModel||this.model;}this.updatedCellsMap=this.updatedCellsMap||{};},updateValue:function(E,D){if(this.txModel.deltaUpdate){this.txModel.deltaUpdate(this);}return false;},getUpdatedValues:function(){var E=this.updatedCellsMap,F,D,G=[];for(F in E){if(E.hasOwnProperty(F)){D={};D.v=E[F].v.v;G.push(C.copy(this.getKeyContext(F),D));}}return G;},clear:function(){this.updatedCellsMap={};},registerTxWidget:function(){function E(F,H){var G=F.node.data.k;H.txWidgets=H.txWidgets||{};H.txWidgets[G]=F;return false;}var D=this.parent;while(D){if(D.isPanelStack===true){E(this,D);}D=D.parent;}}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash,A={shpLnThk:[2],shpLnClr:[11826975,16756758],shpLnStyle:[0],shpFillClr:[11826975,16756758],shpFillStyle:[0],shpFillTrans:[80],shpFillEff:[1],shpBdrClr:[undefined],shpBdrStyle:[0],shpBdrThk:[2],lnMkShw:[false],lnMkShp:[4],lnMkSz:[3],lnMkClr:[undefined],lnMkClrEq:[true],lnMkBdrClr:[undefined],pieExpl:[false],dlFntFml:["Arial"],dlFntSz:["8pt"],dlFntStyle:[0],dlFntClr:[5066061,16514043],rfLnFntFml:["Arial"],rfLnFntSz:["8pt"],rfLnFntStyle:[0],rfLnFntClr:[5066061,16514043],lgdBgFillClr:[15461355,1710618],lgdBgFillStyle:[0],lgdBgFillEff:[1],lgdBgFillTrans:[0,0],lgdFntSz:["8pt"],lgdFntFml:["Arial"],lgdFntStyle:[0],lgdFntClr:[6710886,16777215],lgdBdrShw:[false],lgdBdrClr:[11579568,5855577],lgdBdrThk:[1],lgdBdrStyle:[0],xAxOriLnShw:[false],xAxOriLnClr:[11579568,5855577],xAxOriLnStyle:[1],xAxOriLnThk:[1],yAxOriLnShw:[false],yAxOriLnClr:[11579568,5855577],yAxOriLnStyle:[1],yAxOriLnThk:[1],xAxShw:[true],xAxLnShw:[true],xAxLnClr:[11579568,5855577],xAxLnStyle:[0],xAxLnThk:[1],xAxTtShw:[true],xAxTtFntSz:["8pt"],xAxTtFntClr:[6710886,16777215],xAxTtFntFml:["Arial"],xAxTtFntStyle:[0],xAxLbFntClr:[6710886,16777215],xAxLbFntSz:["8pt"],xAxLbFntFml:["Arial"],xAxLbFntStyle:[0],xAxLbRtt:[-1],xAxLbShw:[true],yAxShw:[true],yAxLnShw:[true],yAxLnClr:[11579568,5855577],yAxLnStyle:[0],yAxLnThk:[1],yAxTtShw:[true],yAxTtFntSz:["8pt"],yAxTtFntClr:[6710886,16777215],yAxTtFntFml:["Arial"],yAxTtFntStyle:[0],yAxLbFntClr:[6710886,16777215],yAxLbFntSz:["8pt"],yAxLbFntFml:["Arial"],yAxLbFntStyle:[0],yAxLbRtt:[-1],yAxLbShw:[true],bgFillClr:[16777215,2631720],bgFillEff:[1],bgFillStyle:[0],bgFillTrans:[100],rwHdrFillClr:[16382457,2631720],rwHdrFillEff:[1],rwHdrFillStyle:[0],rwHdrFillTrans:[100],colHdrFillClr:[16382457,2631720],colHdrFillEff:[1],colHdrFillStyle:[0],colHdrFillTrans:[100],vMatrixLnShw:[true],vMatrixLnClr:[11579568,5855577],vMatrixLnThk:[1],vMatrixLnStyle:[0],hMatrixLnShw:[true],hMatrixLnClr:[11579568,5855577],hMatrixLnThk:[1],hMatrixLnStyle:[0],allTxtFntClr:[6710886],allTxtFntSz:["8pt"],allTxtFntFml:["Arial"],allTxtFntStyle:[0],outBdrClr:[11579568,5855577],outBdrStyle:[0],outBdrThk:[1],gridLineAuto:[true],gridLnClr:[11579568,5855577],gridLnThk:[1],gridLnStyle:[0],majorGridLnShw:[1],majorGridLnClr:[11579568,5855577],majorGridLnThk:[1],majorGridLnStyle:[0],minerGridLnShw:[1],minerGridLnClr:[11579568,5855577],minerGridLnThk:[1],minerGridLnStyle:[0],rwHdrShw:[true],colHdrShw:[true],rwVlShw:[true],colVlShw:[true],rwHdrTxtFntClr:[6710886,16777215],rwHdrTxtFntSz:["8pt"],rwHdrTxtFntFml:["Arial"],rwHdrTxtFntStyle:[0],rwHdrTxtAlignH:[1],rwHdrTxtAlignV:[1],colHdrTxtFntClr:[6710886,16777215],colHdrTxtFntSz:["8pt"],colHdrTxtFntFml:["Arial"],colHdrTxtFntStyle:[0],colHdrTxtAlignH:[1],colHdrTxtAlignV:[1],rwVlTxtFntClr:[6710886,16777215],rwVlTxtFntSz:["8pt"],rwVlTxtFntFml:["Arial"],rwVlTxtFntStyle:[0],rwVlTxtAlignH:[1],rwVlTxtAlignV:[1],colVlTxtFntClr:[6710886,16777215],colVlTxtFntSz:["8pt"],colVlTxtFntFml:["Arial"],colVlTxtFntStyle:[0],colVlTxtAlignH:[1],colVlTxtAlignV:[1],ttlFntClr:[6710886,16777215],ttlFntSz:["8pt"],ttlFntFml:["Arial"],ttlFntStyle:[0],prtRdn:[false],trdDgr:[2],trdRefLnThk:[1],trdRefLnClr:[5066061,16514043],trdRefLnStyle:[0]};function B(D){var E={};C.keyarray(A).forEach(function(G){var F=A[G];E[G]=F[D]||F[0];});return E;}mstrmojo.gm.GMPropDefaults=mstrmojo.provide("mstrmojo.gm.GMPropDefaults",{propValuesLight:null,propValuesDark:null,update:function(I,H){var G,F,D=1,E=I===D?this.propValuesLight:this.propValuesDark;if(E&&H&&H[0]){F=H[0];G=H[1]!==undefined?H[1]:A[F][I];E[F]=G;}},lightTheme:function(){var D=this.propValuesLight;if(!D){D=B(0);this.propValuesLight=D;}return D;},darkTheme:function(){var D=this.propValuesDark;if(!D){D=B(1);this.propValuesDark=D;}return D;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.EnumRWUnitType");var F=mstrmojo.array;var G=2;var I={attribute:"attribute",metric:"metric",empty:"empty;"};function B(){var L=this.model.data.gts,O=(L&&L.row)||[],M=(L&&L.col)||[],N=O.concat(M);return N;}function C(){var L=this.model.scm,N=Object.keys(L||{}),P=(N&&N[0])||"",O=this.model.data.gts.row,M=this.model.data.gts.col;F.forEach(O.concat(M),function(Q){if(N.indexOf(Q.id)!==-1){P=Q.id;return false;}});return P;}mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights=mstrmojo.provide("mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights",{_mixinName:"mstrmojo.netviz._SupportNetworkBrushesAndHighlights",selectedMetricIds:null,TUSType:I.empty,init:function K(L){this.selectedMetricIds=[];if(this._super){this._super(L);}},addAttributeSelection:function(M,L,N){this.TUSType=I.attribute;this._super(M,L,N);},addMetricValueSelection:function(L){this.TUSType=I.attribute;this._super(L);},getTUSType:function(){return this.TUSType;},precessSelectedAttributes:function(M,L,O){if(!O){var N=this.getSingleAttributeSelectorControl();if(!N){this.interactor.clearSelectedTargets();this.interactor.clearSelectRules();this.clearSelections(true);}}},processSelectedMetricIds:function(M,L,O){if(!O){var N=this.getMetricSelectorControl();if(N){this.interactor.clearMetricSelectorHighlight();this.selectedMetricIds=[];}}},highlight:function(M,N){if(this._super){this._super.apply(this,arguments);}if(this.noHighlightAfterKeepOnlyExcludeDrill){return ;}var L=this.interactor;if(L){L.doHighlight(M,N);}},singleUnitSelect:function A(){var Q=this.selectedMetricIds.length>0&&this.hasMetricSelector(),S=(this.getSelections().length>0||this.clearSelectionsFlag)&&this.hasAttributeSelector();if(this.clearSelectionsFlag){delete this.clearSelectionsFlag;}Q=false;if(S&&Q){var N={multiSelect:true,type:mstrmojo.EnumRWUnitType.GRID,src:this.model.k,sliceId:1,sid:1,anchor:this.domNode,selectorObjects:[]};var T=this.getSingleAttributeSelectorControl(),R=this.model.getSelectedAttributeElementIdStr();N.selectorObjects.push({ck:T.ck,ctlKey:T.ckey,tks:T.tks,eid:R});var M=this.getMetricSelectorControl(),P=this.getSelectedMetricIdStr();N.selectorObjects.push({ck:M.ck,ctlKey:M.ckey,tks:M.tks,eid:P});this.controller.onGridSelector(this,N);}else{if(Q){var O=this.getMetricSelectorControl();this.singleMetricSelect(O);}else{if(S){var L=function(){var V={};V.tid=C.call(this);V.eid="";V.isClearAll=false;V.anchor=this.domNode;V.at=G;V.selections=this.getSelections();V.selectionType=this.getSelectionType();return V;};var U=L.call(this);this.performAction([U]);}}}},getSelectedMetricIdStr:function(M){var P=this.selectedMetricIds,O=P.join("\u001E"),Q=M.sc,N=Q.showall&&P.length===0,L=N?"OA:(All)":O;return L;},singleMetricSelect:function E(M){var O=M.sc,L=this.getSelectedMetricIdStr(M),N={type:mstrmojo.EnumRWUnitType.GRID,anchor:this.domNode,ck:O.ck,tks:O.tks,eid:L,ctlKey:O.ckey,sliceId:this.sid,isUConDS:O.isUConDS,isDocVis:true};this.controller.onGridSelector(this,N);},getSingleAttributeSelectorControl:function(){var M=null;if(this.hasAttributeSelector()){var L=C.call(this);M=this.model.scm[L];}return M;},getMetricSelectorControl:function D(){var M=B.call(this),L=null;F.forEach(M,function(N){if(N.otp===-1&&N.hasOwnProperty("sc")){L=N;return false;}});return L;},hasAttributeSelector:function J(){var M=B.call(this),L=false;F.forEach(M,function(N){if(N.otp!==-1&&N.hasOwnProperty("sc")){L=true;return false;}});return L;},hasMetricSelector:function H(){var M=B.call(this),L=false;F.forEach(M,function(N){if(N.otp===-1&&N.hasOwnProperty("sc")){L=true;return false;}});return L;},hasRSSelector:function(){return this.hasAttributeSelector()||this.hasMetricSelector();},postBuildRendering:function(){if(this.cetSelectors){var L=this.cetSelectors.attrs,M=this.cetSelectors.metrics,N=this;if(L.length>0){L.forEach(function(O){N.addAttributeSelection(O.tid,O.id,O.n);});}if(M.length>0){M.forEach(function(O){N.addMetricValueSelection(O.tid,O.id,O.n);});}}this._super();},clearSelections:function(L,M){this.clearSelectionsFlag=true;this.TUSType=I.empty;if(this._super){this._super();}if(L){this.clearSelectedHighlights(M);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var L=10,C=20,a=false,k=false,W=L,b=[],V=mstrmojo.array,J=false,P,f;var B=6,X=7,A=100,h=101,O=102,F=103;function D(o,r,p){var n=r[0],l=r[1],q;o.beginPath();o.moveTo(n,l);for(q=2;q<r.length-1;q=q+2){o.lineTo(r[q],r[q+1]);}o.lineTo(n,l);o.fillStyle=p;o.stroke();o.fill();}function g(o,r,p){var n=r[0],s=r[1],q=r[2]-n,l=r[3]-s;o.fillStyle=p;o.strokeRect(n,s,q,l);o.fillRect(n,s,q,l);}function Z(t,q,u){var o=q[0],n=q[1],s=q[2],p=q[3],r=q[4],l=q[5];t.beginPath();t.arc(o,n,p,r,l,false);t.lineTo(o+s*Math.cos(l),n+s*Math.sin(l));t.arc(o,n,s,l,r,true);t.closePath();t.fillStyle=u;t.stroke();t.fill();}function M(t,q,u){var p=q[0],o=q[1],r=q[2],s=q[3],l=q[4],n=q[5];t.scale(1,n);t.beginPath();t.arc(p,o,r,s,l,false);t.lineTo(p,o);t.arc(p,o,0,l,s,true);t.closePath();t.fillStyle=u;t.stroke();t.fill();t.scale(1,1/n);}function N(u,r,v){var p=r[0],o=r[1],s=r[2],t=r[3],l=r[4],q=r[5],n=r[6];u.scale(1,n);u.beginPath();u.arc(p,o,s,t,l,false);u.lineTo(p+s*Math.cos(l),o+s*Math.sin(l)-q);u.arc(p,o-q,s,l,t,true);u.closePath();u.fillStyle=v;u.stroke();u.fill();u.scale(1,1/n);}function E(l,o,n){l.fillStyle=n;l.beginPath();l.arc(o[0],o[1],o[2],0,Math.PI*2,true);l.stroke();l.fill();}function T(n,l){return n.Point.X-l.Point.X;}function I(n,AB,w){var AA=this.tooltipArr[w],p=n.Text,s=n.SC,l=AA.style,z=this.model.getZoomFactor(),t=mstrMobileApp.getDeviceDPI()/160,x=2*t,y=mstrApp.getScreenDimensions().w-(P*2);if(mstrApp.isTablet()){z=(z*t)+"em";}else{if(mstrMobileApp.getDeviceDPI()>240){z=(z*1.5)+"em";}else{z+="em";}}var r="font-size:"+z+";";r+="padding:"+x+"px;";r+="maxWidth:"+y+"px;";if(s){r+="border-color:#"+s;}AA.innerHTML=p;l.cssText=r;l.display="block";var v=0,q=0;var o=AA.offsetHeight,u=AA.offsetWidth;v=AB.y-o-6;q=AB.x-u-6;b.push({x:n.Point.X,y:n.Point.Y,clr:s||"#000000",top:v,left:q,width:u,height:o});}function Q(o,n,l){var q=l.left,p=Math.max(l.top,f+C);width=l.width,style=n.style,newLeft=q+width+12;if(newLeft+width<=mstrApp.getScreenDimensions().w){q=newLeft;}else{if(q<0){q=P;}}style.left=q+"px";style.top=p+"px";o.showAreaMarker(l.x,l.y,l.clr);}function e(l,AE){var z=b[AE],AB=l.tooltipArr,y=AB[AE].style,o=z.left,r=z.top,v=z.width,s=z.height,w=mstrApp.getScreenDimensions().w,x,u;if(AE>0){var t=b[AE-1],q=t.top,n=t.left,AD=n+t.width,p=n+v,AC;o=n;if(p>AD){o-=(p-AD);}else{if(p<AD){o+=(AD-p);}}if(o<0){if((v*2)+12>w){a=false;J=true;o=P;for(x=0;x<AE;x++){AC=AB[x];t=b[x];u=o+v-t.width;t.left=u;AC.style.left=o+v-t.width+"px";}}else{a=true;}}r=q-C-s;if(r<f){var AA=Math.abs(r)+f+C;for(x=0;x<AE;x++){AC=AB[x];t=b[x];q=t.top+AA;t.top=q;AC.style.top=q+"px";}r+=AA;}}else{if(o<0){if((v*2)+12>w){J=true;o=P;}else{a=true;}}if(r<f){r=f+C;}}if(!a){y.left=o+"px";z.left=o;}y.top=r+"px";z.top=r;l.showAreaMarker(z.x,z.y,z.clr);}function U(r,l,p,t){var o=r.tooltipArr[l].style,q=b[l],s=b[l-p].top,n=q.width;if(t+n>mstrApp.getScreenDimensions().w){k=true;o.display="none";return ;}o.left=t+"px";o.top=s+"px";r.showAreaMarker(q.x,q.y,q.clr);}function c(AA){var AB=b.length,n=AA.tooltipArr,q=Math.ceil(AB/2),s=0,z=1,x=Math.min(AB,L/2),l=mstrApp.getScreenDimensions().w,p,o,w,u;for(s=0;s<q;s++){e(AA,s);}if(a||J){for(s;s<x;s++){e(AA,s);}if(!J){var r=s-1,y=0,v=0,t,AC;p=b[r];o=p.left+p.width+12;for(r=s-1;r>=0;r--){w=n[r];AC=b[r].width;if(o+AC>l){v=P+AC;if(v>y){u=v;t=b[r];}}w.style.left=o+"px";}if(y>0){for(r=0;r<s;r++){w=n[r];w.style.left=(P+t.width-b[r].width)+"px";}}}}else{p=b[AB-1];o=p.left+p.width+12;for(s;s<AB;s++){U(AA,s,z,o);z+=2;if(k){break;}}if(k&&s<=x){for(s=q;s<AB;s++){e(AA,s);n[s].style.display="block";}}}}function S(){var l=this,n=b.length;if(n===0){return ;}f=mstrApp.rootView.getTitleHeight();if(n===1){Q(l,l.tooltipArr[0],b[0]);}else{c(l);}}function K(o,l,p,n){switch(o){case X:g(l,p,n);break;case A:E(l,p,n);break;case h:Z(l,p,n);break;case O:M(l,p,n);break;case F:N(l,p,n);break;default:D(l,p,n);}}mstrmojo.graph._MobileGraphAreaHelper=mstrmojo.provide("mstrmojo.graph._MobileGraphAreaHelper",{highlightArea:function j(q,o){var p=this,l=q.getContext("2d"),n="rgba(255, 255, 255, 0.5)";p.clearHighlightArea(q);l.strokeStyle="#FFFFFF";V.forEach(o,function(r){K(r.Shape,l,r.Coords,n);});},highlightAreaInInit:function G(w,t){var y=w.getContext("2d"),l=this.graphData.Areas,q="rgba(255, 255, 255, 0.5)";y.clearRect(0,0,w.width,w.height);y.strokeStyle="#FFFFFF";var n=l.length,z=286,s=259,x=341;var v=t.length/2,r,u;for(u=0;u<n;u++){var o=l[u],p=parseInt(o.OID,10);if(p!==z&&p!==s&&p!==x){continue;}if(o.SID<0||o.GID<0){continue;}for(r=0;r<v;r++){if(o.SID!==t[2*r]||o.GID!==t[2*r+1]){continue;}K(o.Shape,y,o.Coords,q);}}},clearHighlightArea:function R(n){if(n){var l=n.getContext("2d");l.clearRect(0,0,n.width,n.height);n.width=n.width;}},showAreaMarker:function H(l,p,o){if(l>=0&&p>=0){var n=this.highlightNode.getContext("2d");n.save();n.fillStyle="#FFFFFF";n.strokeStyle=o||"#000000";n.lineWidth=2;n.beginPath();n.arc(l,p,5,0,Math.PI*2,true);n.stroke();n.fill();n.fillStyle=o||"#000000";n.beginPath();n.arc(l,p,2,0,Math.PI*2,true);n.stroke();n.fill();n.restore();}},displayTooltips:function d(l,r,q){l.sort(T);var p=this.tooltipArr,s;a=false;k=false;b=[];this.clearHighlightArea(this.highlightNode);if(!p){P=8*(mstrMobileApp.getDeviceDPI()/160);p=[];for(s=0;s<L;s++){var u=document.createElement("div");u.id="mstrmojo-mobileGraph-tooltip";u.className=mstrmojo.GraphBase.tooltipCLS;document.body.appendChild(u);p[s]=u;}this.tooltipArr=p;}W=Math.min(l.length,L);var t=mstrmojo.touchManager;if(W===0&&this._touchListener){t.detachEventListener(this._touchListener);delete this._touchListener;}else{if(W>0&&!this._touchListener){this._touchListener=t.attachEventListener("touchesBegin",this.id,function(w){var x=mstrmojo.all[w.srcId];if(!(x instanceof mstrmojo.android.ui.ActionToolbarButtons||x instanceof mstrmojo.android.ui.Menu)){this.displayTooltips([],0,0);}});}}var o=null,v={},n;J=false;for(s=0;s<L;s++){n=p[s].style;n.left=-9999;n.display="none";}for(s=0;s<W;s++){o=l[s];v.x=o.Point.X+r;v.y=o.Point.Y+q;I.call(this,o,v,s);}S.call(this);window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},destroy:function Y(l){V.forEach(this.tooltipArr,function(n){document.body.removeChild(n);});delete this.tooltipArr;if(this._super){this._super(l);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom,D=Math;mstrmojo.gm._IsAnchorable={PLACEMENT_ABOVE:1,PLACEMENT_BELOW:2,PLACEMENT_LEFT:3,PLACEMENT_RIGHT:4,anchor:null,anchorPosition:null,boundary:null,boundaryPosition:null,popupNodeName:"infoNode",tipNodeName:"tipNode",baseTipClass:"arrow",infoNodeOffset:25,popupNodeOffset:0,placementOrder:[this.PLACEMENT_ABOVE,this.PLACEMENT_BELOW,this.PLACEMENT_LEFT,this.PLACEMENT_RIGHT],hasScrollbars:function G(){return(!mstrApp.isTouchApp||!mstrApp.isTouchApp());},positionDialog:function E(){if(!this.anchorPopup()){if(typeof this._super==="function"){this._super();}}},positionTipNode:function A(I){var J=this.baseTipClass,K=this[this.tipNodeName];K.className=J+" "+I;},getTipDimension:function B(){var J=this[this.tipNodeName],I=C.position(J);return I;},anchorPopup:function F(){this.positionTipNode("top");var K=this.anchor,b=this.boundary,o=this[this.popupNodeName],r=this.infoNodeOffset,h=this.popupNodeOffset,k=this.hasScrollbars(),Y=this.anchorPosition||C.position(K,true),M=this.boundaryPosition||C.position(b,true),t=M.w,L=M.h,c=o.offsetWidth,O=o.offsetHeight,U=c/2,I=O/2,W=this.getTipDimension(),g=D.min(W.h,W.w),P=D.max(W.h,W.w)/2;if(k){t-=15;L-=15;}var Z=C.contains(b,o),j=Z?0:M.y,s=t/2-U,Q=L/2-I+j,n=-1000,u=-1000;if(Z){Y.x=Y.x-M.x;Y.y=Y.y-M.y;}var f=Y.y+Y.h,N=Y.x+Y.w,e=Y.x>c,p=((N+c)<t),R=Y.y>O,l=((f+O)<L),T=this,V=function(v,x,w){return D.min(D.max(v,w),D.max(x,0));},d=function(){if((Y.x<t)&&R){var v=Y.x+(Y.w/2);T.positionTipNode("bottom");u=Y.y-g-h;Q=u-O+r;s=V(0,t-c,v-U);n=V(Y.x,N,v)-P;return true;}return false;},J=function(){if((Y.x<t)&&l){var v=Y.x+(Y.w/2);T.positionTipNode("top");u=f+h;Q=u+g-r;s=V(0,t-c,v-U);n=V(Y.x,N,v)-P;return true;}return false;},a=function(){if((Y.y<L)&&e){var v=Y.y+(Y.h/2);T.positionTipNode("right");n=Y.x-g-h;s=n-c+r;Q=V(j,L-O,v-I);u=V(Y.y,f,v)-P;return true;}return false;},X=function(){if((Y.y<L)&&p){var v=Y.y+(Y.h/2);T.positionTipNode("left");n=N+h;s=n+g-r;Q=V(j,L-O,v-I);u=V(Y.y,f,v)-P;return true;}return false;},S=[],q;for(q=0;q<this.placementOrder.length;q++){switch(this.placementOrder[q]){case this.PLACEMENT_ABOVE:S.push(d);break;case this.PLACEMENT_BELOW:S.push(J);break;case this.PLACEMENT_LEFT:S.push(a);break;case this.PLACEMENT_RIGHT:S.push(X);break;}}for(q=0;q<S.length;q++){if(S[q]()){break;}}Q=D.round(Q);s=D.round(s);u=D.round(u);n=D.round(n);this.applyPopupNodePos(Q,s,u,n);return true;},applyPopupNodePos:function H(K,J,M,I){var O=this[this.tipNodeName],L=O.style,P=this[this.popupNodeName],N=P.style;L.top=M+"px";L.left=I+"px";N.top=K+"px";N.left=J+"px";}};}());(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphObject");var A=mstrmojo.chart.model,C=A.enums,B=C.EnumDSSGraphObject;mstrmojo.chart.model.enums.EnumDSSGraphTitleName={DssGraphTitleReserved:0,DssGraphTitleTitle:B.DssGraphTitle,DssGraphTitleSubtitle:B.DssGraphSubtitle,DssGraphTitleFootnote:B.DssGraphFootnote,DssGraphTitleCategory:B.DssGraphXTitle,DssGraphTitleSeries:B.DssGraphSeriesTitle,DssGraphTitleY1:B.DssGraphY1Title,DssGraphTitleY2:B.DssGraphY2Title,DssGraphTitleY1Right:B.DssGraphY1RightTitle};})();(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphProperty");var B=mstrmojo.chart.model,C=B.enums,A=C.EnumDSSGraphProperty;mstrmojo.chart.model.enums.EnumDSSGraphRegressionType={DssGraphRegressionNone:0,DssGraphRegressionLinear:A.DssGraphShowSDLinrLine,DssGraphRegressionLog:A.DssGraphShowSDLinrLog,DssGraphRegressionPoly:A.DssGraphShowSDLinrNPoly,DssGraphRegressionExp:A.DssGraphShowSDLinrExp,DssGraphRegressionMA:A.DssGraphShowSDMOVALine,DssGraphRegressionNatLog:A.DssGraphShowSDLinrNatLog,DssGraphRegressionSTDD:A.DssGraphShowSDSTDDLine,DssGraphRegressionMean:A.DssGraphShowSDMeanLine,DssGraphRegressionPow:200};})();(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphRegressionType");var B=mstrmojo.chart.model,D=B.enums,A=D.EnumDSSGraphRegressionType;mstrmojo.chart.GraphTrendLineOptions=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphTrendLineOptions",mRegressionType:A.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeansonal:false,init:function C(E){if(E){if(E.RegressionType){this.mRegressionType=E.RegressionType;}if(E.Order){this.mOrder=E.Order;}if(E.Period){this.mPeriod=E.Period;}if(E.ShowEquation){this.mShowEquation=E.ShowEquation;}if(E.ShowCoefficients){this.mShowCoefficients=E.ShowCoefficients;}if(E.UserSeriesGraphColor){this.mUserSeriesGraphColor=E.UserSeriesGraphColor;}if(E.Seasonal){this.mSeasonal=E.Seasonal;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var S=mstrmojo.chart,M=295,B=301,H=289,C=271,T=277,E=10003,V=100200,G=20000,U=20001,O=20002,Q=20003,N=20004,P=20005,L=20006,J=20007,I=21007,A=S.gNullObjectId=-3,F=S.gNullSeriesId=-3,D=S.gNullGroupId=-3;mstrmojo.chart.TripleId=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.TripleId",mObjectId:A,mSeriesId:F,mGroupId:D,init:function R(W){if(!W){this.mObjectId=A;this.mSeriesId=F;this.mGroupId=D;}else{if((W instanceof Array)&&W.length>=3){this.mObjectId=W[0];this.mSeriesId=W[1];this.mGroupId=W[2];}else{if(W.TripleId){var X=W.TripleId;this.mObjectId=X.mObjectId;this.mSeriesId=X.mSeriesId;this.mGroupId=X.mGroupId;}else{this.mObjectId=(W.ObjectId!==undefined)?W.ObjectId:A;this.mSeriesId=(W.SeriesId!==undefined)?W.SeriesId:F;this.mGroupId=(W.GroupId!==undefined)?W.GroupId:D;}}}}});S.gNullTripleId=new mstrmojo.chart.TripleId({ObjectId:A,SeriesId:F,GroupId:D});var K=S.gAxisTripleIds={};K.Y1=new mstrmojo.chart.TripleId({ObjectId:M,SeriesId:0,GroupId:D});K.Y2=new mstrmojo.chart.TripleId({ObjectId:B,SeriesId:0,GroupId:D});K.X1=new mstrmojo.chart.TripleId({ObjectId:H,SeriesId:0,GroupId:D});K.X2=new mstrmojo.chart.TripleId({ObjectId:V,SeriesId:0,GroupId:D});K.Z=new mstrmojo.chart.TripleId({ObjectId:E,SeriesId:0,GroupId:D});K.O1=new mstrmojo.chart.TripleId({ObjectId:C,SeriesId:0,GroupId:D});K.O2=new mstrmojo.chart.TripleId({ObjectId:T,SeriesId:0,GroupId:D});mstrmojo.chart.ManagerId=new mstrmojo.chart.TripleId({ObjectId:G,SeriesId:-3,GroupId:D});mstrmojo.chart.PlotManagerId=new mstrmojo.chart.TripleId({ObjectId:U,SeriesId:F,GroupId:D});mstrmojo.chart.PlotId0=new mstrmojo.chart.TripleId({ObjectId:O,SeriesId:0,GroupId:D});mstrmojo.chart.BarRenderer0=new mstrmojo.chart.TripleId({ObjectId:P,SeriesId:0,GroupId:D});mstrmojo.chart.LineRenderer0=new mstrmojo.chart.TripleId({ObjectId:L,SeriesId:0,GroupId:D});mstrmojo.chart.AreaRenderer0=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:0,GroupId:D});mstrmojo.chart.RenderLayer2=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:2,GroupId:D});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumNumberCategory");var B=mstrmojo.chart,A=B.enums,F=A.EnumNumberCategory;mstrmojo.chart.ChartAdvFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartAdvFormat",mFormatType:F.General,mDigits:0,mGrouping:3,mCurrency:"$",mPosCurr:0,mNegFormat:3,mCustomFormat:"General",init:function E(I){var H=mstrmojo.hash;if(I&&I.ChartAdvFormat){var G=I.ChartAdvFormat;H.copy(G,this);this.mCurrency=this.mCurrency||"$";this.mCustomFormat=this.mCustomFormat||"General";}},reset:function D(H){var G=mstrmojo.hash;G.copy(H,this);},restore:function C(){this.mFormatType=F.General;this.mDigits=0;this.mGrouping=3;this.mCurrency="$";this.mPosCurr=0;this.mNegFormat=3;this.mCustomFormat="General";}});mstrmojo.chart.dNF=new B.ChartAdvFormat();mstrmojo.chart.dNF.isDefault=true;}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ChartCanvas=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartCanvas",chartContext:null});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ImageMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ImageMap",mShape:-1,mObjectID:-1,mSeriesID:-1,mGroupID:-1,mCoordinates:null,mToolTip:"",GetShape:function E(){return this.mShape;},GetObjectID:function D(){return this.mObjectID;},GetSeriesID:function C(){return this.mSeriesID;},GetGroupID:function A(){return this.mGroupID;},GetCoordinates:function B(){return this.mCoordinates;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var E=0;mstrmojo.chart.common.FractionNumber=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.FractionNumber",mDenominator:0,mNumerator:0,init:function D(F){},Copy:function B(F){this.mDenominator=F.mDenominator;this.mNumerator=F.mNumerator;},ToDouble:function A(){if(this.mDenominator===0){if(this.mNumerator>=0){return Number.POSITIVE_INFINITY;}return Number.NEGATIVE_INFINITY;}return(this.mNumerator)/this.mDenominator;},ToString:function C(L,G,K){if(this.mDenominator===0){L=false;}var J="",I=this.mNumerator,F=false;if(L){var H=parseInt(this.mNumerator/this.mDenominator);I=this.mNumerator%this.mDenominator;K=K||(I!==0);if(H>0){F=true;J=H.toString();if(K){J+=" ";}}}if(!K&&!F&&I===0){J="0";}else{if(!K&&F&&I===0){E++;}else{J+=I.toString();J+="/";J+=this.mDenominator.toString();}}if(!G){J="-"+J;}return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.GraphAxisGeneral=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphAxisGeneral",mAxisLabelsLocation:-1,mAxisDrawInReverse:false,mShowAxisLine:true,mShowAxisLabels:true,mShowAxisTitle:false,mAxisDirection:-1,mUseInterlacedGrids:false,init:function A(B){if(B.AxisLabelsLocation!==undefined){this.mAxisLabelsLocation=B.AxisLabelsLocation;}if(B.AxisDrawInReverse!==undefined){this.mAxisDrawInReverse=B.AxisDrawInReverse;}if(B.ShowAxisLine!==undefined){this.mShowAxisLine=B.ShowAxisLine;}if(B.ShowAxisLabels!==undefined){this.mShowAxisLabels=B.ShowAxisLabels;}if(B.ShowAxisTitle!==undefined){this.mShowAxisTitle=B.ShowAxisTitle;}if(B.AxisDirection!==undefined){this.mAxisDirection=B.AxisDirection;}if(B.UseInterlacedGrids!==undefined){this.mUseInterlacedGrids=B.UseInterlacedGrids;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var A=mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition;mstrmojo.chart.GMDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GMDataLabelInfo",display:false,isValid:false,SeriesId:0,GroupId:0,HostMarkerBound:null,Label:null,DataLabelLocation:A._BOTTOM,dataLabelLCenterPoints:[],CenterXOffset:0,CenterYOffset:0,dataLabelPosition:[],XIndex:0,YIndex:0,SeriesInfo:0,HostMarkerPoint:null,init:function B(C){this.dataLabelLCenterPoints=[];this.dataLabelPosition=[];this._super(C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.Vector2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Vector2D",x:0,y:0,init:function H(I){if(I){if(I.x!==undefined&&I.y!==undefined){this.x=I.x;this.y=I.y;}else{if(I.Point){this.x=I.Point.x;this.y=I.Point.y;}else{if(I.StartPoint&&I.EndPoint){this.x=I.EndPoint.x-I.StartPoint.x;this.y=I.EndPoint.y-I.StartPoint.y;}}}}},Reset:function B(I,J){this.x=I;this.y=J;},LengthSquared:function G(){return this.x*this.x+this.y*this.y;},InnerProduct:function A(I){return(this.x*I.x+this.y*I.y);},CrossProduct:function D(I){return(this.x*I.y-this.y*I.x);},IncludedAngle:function F(J){var I;I=this.InnerProduct(J)/(Math.sqrt(this.LengthSquared()*J.LengthSquared()));I=I>1?1:I;I=I<-1?-1:I;return Math.acos(I);},Length:function E(){return Math.sqrt(this.LengthSquared());},Normalize:function C(){var I=this.Length();this.x/=I;this.y/=I;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.JSONUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUtil",AppendCompoundPointerVectorToJSONObject:function A(E,C,G){var F,B,D;D=G[E]=[];B=C.length;if(B>0){for(F=0;F<B;++F){C[F].AppendToJSONObject(D);}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumShapeType","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumGraphMajorType","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixElementSizeMode");mstrmojo.requiresCls("mstrmojo.Base");var V=mstrmojo.chart,S=V.ChartConstants,C=V.common,P=V.model,k=P.enums,g=k.EnumDSSGraphMarkerShape,d=k.EnumDSSGraphType,h=k.EnumShapeType,Z=V.enums,W=Z.EnumGraphMajorType,N=Z.EnumGraphMatrixMarkerTypeInChart,c=Z.EnumGraphMatrixElementSizeMode;function q(v){var u=0.9;switch(v){case N._MUTATION_IN_LINE:case N._ISODOT_IN_LINEAREA:u=this.mHasSizeBy?0.9:0.5;break;case N._PIE:if(this.getPieShapeLayout()===W.GMT_GRID){var t=this.parentContext&&this.parentContext.mDatasetPtr&&this.parentContext.mDatasetPtr.showPieDatalabels();u=t?0.5:0.9;}break;case N._SHAPES_IN_BUBBLESCATTER:u=this.mHasSizeBy?0.9:0.5;break;case N._TICK_CATEGORY:case N._TICK_VALUE:case N._TICK_GRID:u=0.8;break;}return u;}function U(y,AB,AE,v,w,AC){v=v||false;if(w!==0){w=w||this.mMarkerShape;}if(AC===undefined||AC===null){AC=0;}var z=0,u=(w===g.DssGraphMarkerShapeNone);if(v){u=v;}var AA=AE-AC;if(this.mHasSizeBy||!u||AE===1||AA===1){var AD=u?N._LINE_IN_LINE:N._MUTATION_IN_LINE;if(u){if(AE===1){AD=N._DOTS_IN_LINE;}else{if(v){AD=N._DOTS_IN_LINE;}}}else{if(AE===1){AD=N._ISODOT_IN_LINEAREA;}}z=this.GetMaxMarkerSize(AD,AB,AE,this.mHasSizeBy);}else{if(y){if(v){AD=N._ISODOT_IN_LINEAREA;return this.GetMaxMarkerSize(AD,AB,AE,this.mHasSizeBy);}return 0;}else{if(v){AD=N._ISODOT_IN_LINEAREA;return this.GetMaxMarkerSize(AD,AB,AE,this.mHasSizeBy);}var t=this.parentContext;if(t&&t.mDatasetPtr){var x=t.mDatasetPtr.getGenericLineFormat(0,0);z=x&&x.mLineThickness;if(z<=2){z=3;}}}z=Math.max(z,this.mConstants.MinimalSize.Line);}return z;}mstrmojo.chart.GraphMatrixContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphMatrixContext",mHasSizeBy:false,mMaxSizeVal:100000,mMinSizeVal:0,mCustomScaleForSizeBy:false,mHasColorBy:false,mEstGraphWidth:600,mEstGraphHeight:400,mMarkerShape:0,mGraphType:0,mClippedPaddings:null,mHasChartWithOnlyDataMarkers:false,mIsNeedRotateDataLabel:false,mIsNeedAdjustAxis:false,mShownValueTickSet:null,mIsolatedDots:null,mConstants:null,mInputs:null,mElementsInfo:null,parentContext:null,init:function o(t){this.mShownValueTickSet=[{},{}];this.mClippedPaddings={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};if(t&&t.GraphType){this.mGraphType=t.GraphType;}this.mElementsInfo={Max:{Size:0.9,Mode:0},Min:{Size:0,Mode:0}};this.mConstants={FixedTickerSize:2,FixedDataMarkerSize:3,MinimalSize:{Bar:5,Pie:10,Band:10,Line:1,ProportionalMin:1,General:2},MaximalSize:{Bar:44,Band:100},CondenseLimit:{Percentage:10,Default:-1}};},GetAdjustThicknessValue:function X(t){switch(t){case 1:case 2:case 3:case 4:t++;break;default:break;}return t;},AddToIsolatedDotList:function s(t){if(this.mIsolatedDots===null){this.mIsolatedDots=new C.MapStructure();}this.mIsolatedDots.replaceByTripleId(t,true);},IsIsolatedDot:function j(u,t){if(this.mIsolatedDots===null){return false;}t=(t!==undefined)?t:false;if(t){if(this.mMarkerShape!==g.DssGraphMarkerShapeNone){return false;}}return(this.mIsolatedDots.findByTripleId(u)!==undefined);},IsIsolatedDotInLine:function D(t){return this.IsIsolatedDot(t,true);},GetMaxElementSizeInAreaChart:function M(v,w,t,u){return U.call(this,true,v,w,t,null,u);},GetMaxElementSizeInLineChart:function O(v,w,u,t){return U.call(this,false,v,w,u,t);},GetValueAxisPadding:function Y(u,w,v){if(v===undefined){v=true;}var t=u?(v?"X1":"X2"):(v?"Y1":"Y2");return w?this.mClippedPaddings[t].HighOffset:this.mClippedPaddings[t].LowOffset;},UpdateValueAxisPadding:function Q(v){var u,x,w,y,t;for(u=0;u<2;++u){for(t=0;t<2;++t){x=u===0;y=t===0;w=x?(y?"X1":"X2"):(y?"Y1":"Y2");if(v[w]!==undefined){this.mClippedPaddings[w].LowOffset=v[w].LowOffset;this.mClippedPaddings[w].HighOffset=v[w].HighOffset;}}}},GetMaxMarkerSize:function b(AL,AB,AJ,t){t=t===undefined?false:t;var AP=this.mElementsInfo,x=10000,AG=24,AI=12,z=AB?this.mEstGraphWidth:this.mEstGraphHeight,AC=z/(AJ*2)+0.5,v=AP.Max.Size,AD=AP.Max.Size;if(AL===N._MUTATION_IN_LINE||AL===N._ISODOT_IN_LINEAREA){v=AD;}if(AP.Max.Mode===c._AUTOMATIC){if(AL!==N._LINE_IN_LINE){x=this.mHasSizeBy?24:12;}if(AL!==N._LINE_IN_LINE&&AL!==N._DOTS_IN_LINE){x=t?AG:AI;}v=q.call(this,AL);}switch(AL){case N._LINE_IN_LINE:case N._DOTS_IN_LINE:var AN=AB?this.mEstGraphHeight:this.mEstGraphWidth,AK=AN*0.15;AK=Math.min(AK,x*2);if(AL===N._DOTS_IN_LINE){if(AJ!==1){AC=AC*2;}AK=Math.min(AK,AC);var u=AP.Min.Size;if(AP.Min.Mode===c._MANUAL){u=0;}AK=Math.max(AK/2,u);}return AK;case N._MUTATION_IN_LINE:case N._ISODOT_IN_LINEAREA:case N._SHAPES_IN_BUBBLESCATTER:var y=1;y=Math.min(this.mEstGraphHeight,this.mEstGraphWidth)*0.15;y=Math.min(y*v,x);if(AL===N._MUTATION_IN_LINE||AL===N._ISODOT_IN_LINEAREA){y=Math.min(y,AC);y=Math.ceil(y);}return y;case N._PIE:var AE=true,AH=0.2,w=this.getPieShapeLayout(),AA=Math.min(this.mEstGraphWidth,this.mEstGraphHeight);if(w===W.GMT_CATEGORY){var AF=AB?this.mEstGraphHeight:this.mEstGraphWidth;if(AA/AF<0.15){AE=false;}}y=v*AA/2;if(w===W.GMT_GRID||(w===W.GMT_CATEGORY&&!AE)){if(AP.Max.Mode===c._AUTOMATIC){y=Math.min(y,250);}}else{y*=AH;y=Math.min(y,AA);if(AP.Max.Mode===c._AUTOMATIC){y=Math.min(y,50);}}if(w===W.GMT_CATEGORY){y=Math.min(y,AC);}y=Math.floor(Math.max(y,10));return y;case N._TICK_CATEGORY:case N._TICK_VALUE:case N._TICK_GRID:x=24;var AM=24;if(AL===N._TICK_CATEGORY){AM=z/AJ;}var AO=AM*v;if(AL===N._TICK_CATEGORY){AO=Math.min(AO,x);}return AO+0.5;default:return 0;}},GetScaledSize:function p(v,x,u){if(!this.mHasSizeBy){return x;}var t=this.mElementsInfo.Min.Mode,w=this.ToRatioEx(v,(t===c._PROPORTIONAL));if(t===c._PROPORTIONAL&&u!==null&&u!==undefined){if(u===h._CIRCLE||u===h._PIE||u===h._PIESLICE||u===h._SQUARE){w=Math.sqrt(w);}}return this.GetScaledSizeWithRatio(w,x);},GetScaledSizeWithRatio:function I(y,AA,u){var t=false,v=this.mElementsInfo,w=v.Min.Mode,z;if(!(isNaN(u)||u===null)){z=u;t=true;}else{z=v.Min.Size;}if(w===c._MANUAL){z=v.Min.Size*AA;if(z<0){z=0;}if(z>AA){z=AA;}}else{if(w===c._PROPORTIONAL){return Math.max(this.mConstants.MinimalSize.ProportionalMin,y*AA);}else{if(!t){z=this.mConstants.MinimalSize.General;}}}var x=Math.max((AA-z),0);var AB=y*x+z;return Math.min(AB,AA);},ToRatio:function B(v,t,u,w){w=w||false;if(w){if(u>0){u=0;}if(t<0){t=0;}}if(u===t){return 1;}if(v>t){v=t;}if(v<u){v=u;}return Math.min((v-u)/(t-u),1);},ToRatioEx:function R(w,v){v=v||false;var t=this.mMaxSizeVal,u=this.mMinSizeVal;if(v){w=Math.abs(w);t=Math.max(Math.abs(t),Math.abs(u));u=0;}else{w=Math.min(t,w);w=Math.max(u,w);}if(this.mCustomScaleForSizeBy){return this.ToRatio(w,t,u,false);}return this.ToRatio(w,t,u,v);},getCondensedTextLimit:function e(t){switch(t){case 4:return this.mConstants.CondenseLimit.Percentage;}return this.mConstants.CondenseLimit.Default;},GetRealTripleId:function A(v,t,u){var w=800,x=new V.TripleId({TripleId:u});if(u.mSeriesId>=0){x.mSeriesId+=t*w;}if(u.mGroupId>=0){x.mGroupId+=v*w;}return x;},GetLogicalTripleId:function r(u){var v=new V.TripleId({TripleId:u}),t=341;if(u.mObjectId===t){v.mSeriesId=this.hGetLogicalId(v.mSeriesId);v.mGroupId=this.hGetLogicalId(v.mGroupId);}return v;},hGetLogicalId:function F(t){var u=800;if(t<0){return t;}t%=u;return t;},GetValueAxisZoomScale:function f(t){return 1;},checkPaddingBetweenLabels:function E(u,t,x,z){if(x===undefined){return u.HasIntersection(t);}var w=0,y=1,AA,v;if(z){AA=Math.abs(u.x+u.width/2-t.x-t.width/2);}else{AA=Math.abs(u.y+u.height/2-t.y-t.height/2);}switch(x){case w:v=this.getPadding(S.kBetweenLabelCenters);break;case y:if(z){AA-=0.5*(u.width+t.width);}else{AA-=0.5*(u.height+t.height);}v=this.getPadding(S.kBetweenLabels);break;default:return u.HasIntersection(t);}return AA<v;},checkLabelPaddingToBorder:function n(x,u,z,y){var v,t,w=this.getPadding(S.kLabelToChart);if(y){v=x.x;t=x.x+x.width;}else{v=x.y;t=x.y+x.height;}return(v>=u+w)&&(t+w<=z);},getPadding:function L(t){switch(t){case S.kBetweenLabels:return 10;case S.kBetweenLabelLines:return 5;case S.kLabelToChart:return 5;case S.kNumericLabelToTick:return 4;case S.kExtra:return 2;case S.kChartToChart:return 10;case S.kEndTickToChart:return 10;case S.kEndLabelToChart:return 5;case S.kBetweenLabelCenters:return 20;case S.kBandSide:var u=this.mElementsInfo.Max.Mode;if(u===c._AUTOMATIC){return 5;}return 0;case S.kCategoricalLabelToTick:return 5;case S.kDataLabel:return 5;case S.kRefLabel:return 5;case S.kAxisOriginLabel:return 5;default:return 0;}},getClippedOffset:function a(v,AA,u,w,z,y,t){var x=z?w.x:w.y;return{LowOffset:Math.max(y,u-Math.abs(x-v)),HighOffset:Math.max(t,u-Math.abs(AA-x))};},getSizeByPieRadius:function H(v,AC,w,z,u,y){if(v===undefined||v===null){return -1;}var AB=v.GetSizeByData(AC,w);if(AB===undefined){return -1;}var AD,t=this.mElementsInfo.Min.Mode;var AA=this.ToRatioEx(AB,t===c._PROPORTIONAL);if(t===c._PROPORTIONAL){var x=Math.max(0,y-this.mConstants.MinimalSize.Pie);AD=Math.round(x*AA+this.mConstants.MinimalSize.Pie);}else{AD=this.GetScaledSizeWithRatio(AA,y,this.mConstants.MinimalSize.Pie);}return AD;},updateGMGraphTypeWithMarkerShape:function K(t){if(t){this.mMarkerShape=t;}if(this.mMarkerShape!==202&&this.mMarkerShape!==201){return ;}switch(this.mGraphType){case d.DssGraphTypeGridChart:this.mGraphType=d.DssGraphTypeGrid_Pies;return ;case d.DssGraphTypeX_Y_Scatter:case d.DssGraphTypeDualAxis_X_Y_Scatter:case d.DssGraphTypeX_Y_Scatter_with_Labels:case d.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:this.mGraphType=d.DssGraphTypeScatter_Pies;return ;case d.DssGraphTypeBubble:case d.DssGraphTypeBubble_DualAxis:case d.DssGraphTypeBubble_With_Labels:case d.DssGraphTypeBubble_DualAxis_With_Labels:this.mGraphType=d.DssGraphTypeBubble_Pies;return ;case d.DssGraphTypeVertical_Area_Absolute:case d.DssGraphTypeVertical_Area_DualAxis_Absolute:case d.DssGraphTypeVertical_Area_BiPolar_Absolute:case d.DssGraphTypeVertical_Line_Absolute:case d.DssGraphTypeVertical_Line_BiPolar_Absolute:case d.DssGraphTypeVertical_Line_DualAxis_Absolute:case d.DssGraphTypeVertical_Bar_BiPolar_Absolute:case d.DssGraphTypeVertical_Bar_DualAxis_Absolute:case d.DssGraphTypeVertical_Bar_Absolute:case d.DssGraphTypeVertical_Bar_Side_by_Side:case d.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case d.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:this.mGraphType=d.DssGraphTypeVertical_CategoryPies_Absolute;return ;case d.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case d.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case d.DssGraphTypeHorizontal_Bar_Absolute:case d.DssGraphTypeHorizontal_Area_Absolute:case d.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case d.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case d.DssGraphTypeHorizontal_Line_Absolute:case d.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case d.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case d.DssGraphTypeHorizontal_Bar_Side_by_Side:case d.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case d.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:this.mGraphType=d.DssGraphTypeHorizontal_CategoryPies_Absolute;return ;case d.DssGraphTypeVertical_Bar_DualAxis_Stacked:case d.DssGraphTypeVertical_Bar_Stacked:case d.DssGraphTypeVertical_Bar_BiPolar_Stacked:case d.DssGraphTypeVertical_Area_BiPolar_Stacked:case d.DssGraphTypeVertical_Area_DualAxis_Stacked:case d.DssGraphTypeVertical_Area_Stacked:case d.DssGraphTypeVertical_Line_Stacked:case d.DssGraphTypeVertical_Line_BiPolar_Stacked:case d.DssGraphTypeVertical_Line_DualAxis_Stacked:this.mGraphType=d.DssGraphTypeVertical_CategoryPies_Stacked;return ;case d.DssGraphTypeHorizontal_Bar_Stacked:case d.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case d.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case d.DssGraphTypeHorizontal_Area_Stacked:case d.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case d.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case d.DssGraphTypeHorizontal_Line_Stacked:case d.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case d.DssGraphTypeHorizontal_Line_DualAxis_Stacked:this.mGraphType=d.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case d.DssGraphTypeVertical_Bar_Percent:case d.DssGraphTypeVertical_Line_Percent:case d.DssGraphTypeVertical_Area_Percent:this.mGraphType=d.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case d.DssGraphTypeHorizontal_Bar_Percent:case d.DssGraphTypeHorizontal_Line_Percent:case d.DssGraphTypeHorizontal_Area_Percent:this.mGraphType=d.DssGraphTypeVertical_CategoryPies_Percent;return ;}},isCombinationChart:function J(){return this.mMarkerShape===g.DssGraphMarkerShapeCombined;},isPieOrRingShape:function T(){return this.mMarkerShape===g.DssGraphMarkerShape2DPie||this.mMarkerShape===g.DssGraphMarkerShape2DRingPie;},getPieShapeLayout:function l(){switch(this.mGraphType){case d.DssGraphTypeHorizontal_CategoryPies_Absolute:case d.DssGraphTypeHorizontal_CategoryPies_Stacked:case d.DssGraphTypeHorizontal_CategoryPies_Percent:case d.DssGraphTypeVertical_CategoryPies_Absolute:case d.DssGraphTypeVertical_CategoryPies_Stacked:case d.DssGraphTypeVertical_CategoryPies_Percent:return W.GMT_CATEGORY;case d.DssGraphTypeScatter_Pies:return W.GMT_SCATTER;case d.DssGraphTypeBubble_Pies:return W.GMT_BUBBLE;case d.DssGraphTypeGrid_Pies:return W.GMT_GRID;default:return W.GMT_SPECTRAL;}},markerToShape:function G(t){switch(t){case g.DssGraphMarkerShapeCircle:return h._CIRCLE;case g.DssGraphMarkerShapeRectangle:case g.DssGraphMarkerShapeSquare:return h._SQUARE;case g.DssGraphMarkerShape2DPie:case g.DssGraphMarkerShape2DRingPie:return h._PIE;case g.DssGraphMarkerShapeGMTick:return h._TICKER;default:return h._GENERIC;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.HSLColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.HSLColor",h:0,s:0,l:0});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var R=mstrmojo.chart;mstrmojo.chart.Point2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Point2D",x:0,y:0,init:function P(V){if(V){if(V.Point2D){this.x=V.Point2D.x;this.y=V.Point2D.y;}else{this._super(V);}}},Reset:function A(V,W){this.x=V;this.y=W;},ResetPoint:function N(V){this.x=V.x;this.y=V.y;},DistanceSquared:function D(V){return(this.x-V.x)*(this.x-V.x)+(this.y-V.y)*(this.y-V.y);},Distance:function C(V){return Math.sqrt(this.DistanceSquared(V));},isEqual:function O(V){return(this.x===V.x&&this.y===V.y);},IsInPolygon:function I(Y){var Z=Y.length,V=false,X,W;if(Z<3){return false;}for(X=0,W=Z-1;X<Z;W=X++){if(((Y[X].y<=this.y&&this.y<Y[W].y)||(Y[W].y<=this.y&&this.y<Y[X].y))&&this.x<=(Y[W].x-Y[X].x)*(this.y-Y[X].y)/(Y[W].y-Y[X].y)+Y[X].x){V=!V;}}return V;},IsStrictlyInPolygon:function K(Z){var Y=new R.Point2D({x:this.x+0.1,y:this.y}),W=new R.Point2D({x:this.x-0.1,y:this.y}),V=new R.Point2D({x:this.x,y:this.y+0.1}),X=new R.Point2D({x:this.x,y:this.y-0.1});if(Y.IsInPolygon(Z)){return false;}if(W.IsInPolygon(Z)){return false;}if(V.IsInPolygon(Z)){return false;}return !X.IsInPolygon(Z);},Rotate:function M(W,Y){var V=this.x-W.x,X=this.y-W.y;this.x=W.x+Math.cos(Y)*V-Math.sin(Y)*X;this.y=W.y+Math.sin(Y)*V+Math.cos(Y)*X;},MiddleTo:function F(V){return new R.Point2D({x:(this.x+V.x)/2,y:(this.y+V.y)/2});},Shifted:function Q(V){return new R.Point2D({x:this.x+V.x,y:this.y+V.y});},NegativeShifted:function T(V){return new R.Point2D({x:this.x-V.x,y:this.y-V.y});},swap:function L(){var V=this.x;this.x=this.y;this.y=V;},swapPoints:function B(W){var V;V=this.x;this.x=W.x;W.x=V;V=this.y;this.y=W.y;W.y=V;},IsOnSegment:function H(Y,W,X){var V=X?0.01:-0.01;if(Math.abs(Y.x-W.x)<0.01){if((this.y-Y.y)>V&&(W.y-this.y)>V){return true;}if((this.y-W.y)>V&&(Y.y-this.y)>V){return true;}}else{if((this.x-Y.x)>V&&(W.x-this.x)>V){return true;}if((this.x-W.x)>V&&(Y.x-this.x)>V){return true;}}return false;},IsOnVerOrHorSegment:function G(W,V){if(this.y===W.y&&this.y===V.y){return(((this.x-W.x)>=0&&(V.x-this.x)>=0)||((this.x-W.x)<=0&&(V.x-this.x)<=0));}if(this.x===W.x&&this.x===V.x){return(((this.y-W.y)>=0&&(V.y-this.y)>=0)||((this.y-W.y)<=0&&(V.y-this.y)<=0));}return false;},DistanceToLine:function J(d,Z){var a=this.DistanceSquared(d),W=this.DistanceSquared(Z),Y=d.DistanceSquared(Z),c=0.01,V,b,X;if(a<c||W<c){return 0;}if(Y<c){return Math.sqrt(a);}if(a>=W+Y){return Math.sqrt(W);}if(W>=a+Y){return Math.sqrt(a);}V=new R.Point2D({x:this.x-d.x,y:this.y-d.y});b=new R.Point2D({x:Z.x-d.x,y:Z.y-d.y});X=V.x*b.y-V.y*b.x;return(X<0?-X:X)/Math.sqrt(Y);},DistanceToPolygon:function S(X){var Z=X.length,V=this.DistanceToLine(X[0],X[Z-1]),Y,W;if(this.IsInPolygon(X)){return 0;}for(W=0;W+1<Z;++W){Y=this.DistanceToLine(X[W],X[W+1]);if(V>Y){V=Y;}}return V;},rotateAndClone:function E(V,W){this.Rotate(V,W);return this;},clone:function U(){return new R.Point2D({Point2D:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=mstrmojo.chart;mstrmojo.chart.JSONParameter=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONParameter",mIsFirstFrameSet:false,mIsLastFrameSet:false,mParameterName:"",mParameterValue:null,mParameterStartValue:null,init:function E(H){this._super(H);this.mIsFirstFrameSet=!H.mIsLastFrameSet;if(this.mIsFirstFrameSet){this.mParameterStartValue=H.mParameterValue;}},SetName:function D(H){this.mParameterName=H;},GetName:function C(){return this.mParameterName;},SetValue:function G(H,I){if(I){this.mParameterValue=H;this.mIsLastFrameSet=true;}else{this.mParameterStartValue=H;this.mIsFirstFrameSet=true;}},GetValue:function A(H){return H?this.mParameterValue:this.mParameterStartValue;},AppendToJSONObject:function F(J){var H,I=function I(K,L){if(K instanceof B.Point2D){J[L]={X:K.x,Y:K.y};}else{if(K instanceof B.Rect2D){J[L]={X:K.x,Y:K.y,Width:K.width,Height:K.height};}else{if(K instanceof B.RGBColor){J[L]={R:K.mR,G:K.mG,B:K.mB};}else{J[L]=K;}}}};if(this.mIsLastFrameSet&&this.mIsFirstFrameSet){J[this.mParameterName]=[this.mParameterStartValue,this.mParameterValue];}else{if(this.mIsLastFrameSet){I(this.mParameterValue,this.mParameterName);}else{if(this.mIsFirstFrameSet){I(this.mParameterStartValue,this.mParameterName);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition","mstrmojo.chart.enums.EnumFontRotation");var D=mstrmojo.chart,G=D.enums,H=G.EnumFontRotation,A=mstrmojo.chart.model,B=A.enums,F=B.EnumDSSGraphDataTextPosition;mstrmojo.chart.LabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.LabelInfo",IsPut:false,IsClockWise:false,IsValid:false,SeriesId:0,GroupId:0,HostMarker:null,SuggestedStart:F.DssGraphDTPositionOutMin,LabelRotation:H.FR_NORMAL,Label:null,init:function I(J){this.Label=null;this.HostMarker=null;this._super(J);},IsMoved:function C(J){return(this.SuggestedStart!==J);},ToRectangle:function E(){return this.Label.GetBoundingRect();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var A="_tmsp";var B=mstrmojo.gm.GMPropertyNode=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMPropertyNode",modifiedPropertyKeys:undefined,children:undefined,dirty:undefined,jsonObj:undefined,init:function(F){this._super(F);this.children={};this.modifiedPropertyKeys=[];var G=this.jsonObj,D,C,E;for(E in G){if(G.hasOwnProperty(E)){D=G[E];C=typeof D;if(C==="object"||C==="array"){this.setProperty(E,G[E],true);}}}},setProperty:function(D,C,E){if(typeof C==="object"){this.children[D]=new B({jsonObj:C,parent:this});this.jsonObj[D]=C;}else{this.jsonObj[D]=C;this.jsonObj[D+A]=(new Date()).getTime();}if(E!==true){this.modifiedPropertyKeys.push(D);}},manuallyAddModifiedPropertyName:function(C){this.modifiedPropertyKeys.push(C);},getRawJson:function(){return this.jsonObj;},toString:function(){return JSON.stringify(this.jsonObj);},getPropertyNode:function(C){return this.children[C];},getPropertyJSONValue:function(D){var C=this.children[D];if(C){return C.jsonObj;}return this.jsonObj[D];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.gm.GMEnums");var A=mstrmojo.gm.EnumIdentityType;mstrmojo.gm.GMIdentities=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMIdentities"});mstrmojo.gm.HeaderCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.HeaderCellIdentity",eid:undefined,v:undefined,tid:undefined,n:undefined,tui:undefined,fid:undefined,o:undefined,isRowAttribute:undefined,at:undefined,dei:undefined,dpt:undefined});mstrmojo.gm.GeneralIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GeneralIdentity",objType:undefined});mstrmojo.gm.TitleCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.TitleCellIdentity",tid:undefined,fid:undefined,n:undefined,tui:undefined,isRowAttribute:undefined,otp:undefined,init:function(B){this.fid=B.fid;this.tid=B.id;this.isRowAttribute=B.isRowAttribute;if(B.isRowAttribute){this.objType=A.ROW_TITLE;}else{this.objType=A.COL_TITLE;}this.n=B.n;this.otp=B.otp;this.ost=B.ost;this.tui=B.tui;}});mstrmojo.gm.MetricAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.MetricAxisTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AttributeAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AttributeAxiTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AxisIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AxisIdentity",isNumericAxis:undefined,metricIdxArr:undefined,attrIdArr:undefined});mstrmojo.gm.ColorSquareIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.ColorSquareIdentity",init:function(B){this._super(B);this.comb=this.getElementsCombination();},getElementsCombination:function(){var B,F=this.token,C,H,G,E,I,D;if(F){D=[];C=F.levels;H=F.elements;G=F.types;B=C.length;for(E=0;E<B;E++){I={eid:H[E],tid:C[E]};if(G){I.tp=G[E];}D.push(I);}return D;}return undefined;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.MapStructure=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.MapStructure",map:null,init:function H(K){this._super(K);this.map={};},replace:function B(L,O){var N=(L&&L.length)||0,P,M,K;for(K=0,P=this.map;K<N-1;K++){M=P[L[K]];if(M===undefined){M=P[L[K]]={};}P=M;}P[L[N-1]]=O;},replaceByTripleId:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId],L);},replaceByGraphPropertyKey:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId],L);},push:function G(K,L){this.replace(K,L);},find:function F(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}return O[L[N-1]];},findByTripleId:function J(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId]);},findByGraphPropertyKey:function I(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},deleteElement:function A(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}delete O[L[N-1]];},deleteByTripleId:function E(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId]);},deleteByGraphPropertyKey:function C(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},clear:function D(){this.map={};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumFormatType");var C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONFormat",mpOriginalAddress:0,mFormatType:A.FMT_UNDEFINED,init:function D(E){if(E.Font){this.mpOriginalAddress=E.Font.id;}else{if(E.Line){this.mpOriginalAddress=E.Line.id;}else{this.mpOriginalAddress=E.id;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=0;mstrmojo.chart.FormatBase=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatBase",init:function A(C){}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatFont=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFont",mFontAlignment:0,mFontStyle:0,mFontRotation:0,mFontBox:0,mFontColor:null,mFontAlpha:0,mFontName:0,mFontSize:0,init:function D(G){G.mFormatType=A.FMT_FONT;this._super(G);E.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize","id"],G,this);},AppendToJSONObject:function F(H){var G=this.mFontColor;H.push({FormatType:this.mFormatType,Alignment:this.mFontAlignment,Style:this.mFontStyle,Rotation:this.mFontRotation,Box:this.mFontBox,Alpha:this.mFontAlpha,Name:this.mFontName,Size:this.mFontSize,Color:{R:G.mR,G:G.mG,B:G.mB}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatLine=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatLine",mLineStyle:0,mAlpha:0,mLineThickness:0,mLineThicknessPt:0,mLineColor:null,mGradient:null,init:function D(H){H.mFormatType=A.FMT_LINE;this._super(H);E.copyProps(["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","id"],H,this);this.mGradient={};var G=this.mGradient,J=H.mGradient;G.range={start:{x:0,y:0},end:{x:0,y:0}};if(J){G.valid=H.mGradient.valid||false;G.angle=H.mGradient.angle||0;G.endAlpha=H.mGradient.endAlpha||255;G.style=H.mGradient.style||1;G.colors=H.mGradient.colors.slice(0)||[];var I=J.range;if(H&&I!==undefined){if(I.start!==undefined){G.range.start.x=I.start.x;G.range.start.y=I.start.y;}if(I.end!==undefined){G.range.end.x=I.end.x;G.range.end.y=I.end.y;}}}else{G.valid=false;G.angle=0;G.endAlpha=255;G.style=1;G.colors=[];G.range={start:{x:0,y:0},end:{x:0,y:0}};}},AppendToJSONObject:function F(G){var I=this.mLineColor,H=this.mGradient;G.push({FormatType:this.mFormatType,Style:this.mLineStyle,Alpha:this.mAlpha,Thickness:this.mLineThickness,ThicknessPt:this.mLineThicknessPt,Color:{R:I.mR,G:I.mG,B:I.mB},Gradient:{Valid:H.valid,Angle:H.angle,EndAlpha:H.endAlpha,Style:H.style,Colors:H.colors.slice(0),Start:H.range.start,End:H.range.end}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.chart.common.MapStructure");mstrmojo.requiresCls("mstrmojo.gm.GMEnums");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumNumberCategory","EnumLabelLevelOption","EnumSliceType","EnumDataSetStatus");mstrmojo.requiresClsP("mstrmojo.chart","ChartAdvFormat");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumShapeType");var Am=mstrmojo.chart,b=mstrmojo.hash,P=Am.enums,AQ=Am.model.enums,Ap=P.EnumNumberCategory,An=P.EnumLabelLevelOption,AA=P.EnumDataSetStatus,c=AQ.EnumShapeType;var A5=mstrmojo.gm,C=A5.FormatingPropertyTag;var F=1,AH=2,I=3;var AU={lineShape:[C.SHAPE_LINE_COLOR,C.SHAPE_LINE_STYLE,C.SHAPE_LINE_THICKNESS],lineMarker:["lnMkBdrClr",C.LINE_MARKER_STYLE,C.LINE_MARKER_THICKNESS],shapeBorder:[C.SHAPE_BORDER_COLOR,C.SHAPE_BORDER_STYLE,C.SHAPE_BORDER_THICKNESS]};function A3(BK,BJ){BK=BK||{};var BH={mLineStyle:BK[BJ[1]]||0,mAlpha:255,mLineThickness:BK[BJ[2]]||null};if(BH.mLineThickness!==null){BH.mLineThickness=parseFloat(BH.mLineThickness);}if(BH.mLineThickness!==null&&BH.mLineThickness!==undefined){BH.mLineThicknessPt=75*BH.mLineThickness;}var BI=BK[BJ[0]];if(BI!==null&&BI!==undefined){if(typeof BI==="number"){BH.mLineColor=BI;}else{if(BI.c1!==undefined&&typeof BI.c1==="number"){BH.mLineColor=BI.c1;}}}if(BH.mLineStyle===99){BH.mAlpha=0;}return BH;}function AR(BK,BJ){BJ=BJ||"all";var BI,BH={};switch(BJ){case"lineShape":BI=AU.lineShape;return b.copyProps(BI,BK);case"targetLine":return BH;case"lineMarker":BI=AU.lineMarker;return b.copyProps(BI,BK);case"shapeBorder":case"pieSliceBorder":BI=AU.shapeBorder;return b.copyProps(BI,BK,BH);default:b.copy(BK,BH);return BH;}}function t(BI,BJ){if(BI===undefined){return ;}var BH=9;if(BI.nct!==undefined){BJ.mFormatType=BI.nct;}if(BJ.mFormatType===undefined){BJ.mFormatType=BH;}BJ.mDigits=BI.ndp||0;if(BI.nth!==undefined){BJ.mGrouping=BI.nth;}if(BJ.mGrouping===undefined){BJ.mGrouping=3;}BJ.mPosCurr=BI.ncp||0;if(BI.nnn!==undefined){BJ.mNegFormat=BI.nnn;}if(BJ.mNegFormat===undefined){BJ.mNegFormat=3;}BJ.mCurrency=((typeof BI.ncs==="string")&&BI.ncs)||"$";BJ.mCustomFormat=((typeof BI.nfs==="string")&&BI.nfs)||"General";}function Ac(){this.mHasMetrics=this.dataProvider.getMetricsCount()>0;return this.mHasMetrics;}function AL(){return false;}function y(){var BH=this.dataProvider;var BI=BH.getDimensionSize(true),BJ=BH.getDimensionSize(false);if(BI*BJ===0){return false;}this.SetDataGroup(BH.getDataGroup());this.SetSeriesByColumn(BH.getSeriesByColumn());this.dataLabelStyle=BH.getDataLabelType();this.mDataGroup=BH.getDataGroup();return true;}function M(BJ,BI,BH){if(!!BJ===false){return"";}var BL=0,BK=BJ.length;BH=BH||false;if(BK<=0){return"";}if(BI===An.LLO_COMMON){BK--;}else{if(BI===An.LLO_SPECIFIC){BL=BK-1;}}if(BH){return BJ;}if(BJ.length===1){return BJ[0].trim();}return BJ.slice(BL,BK).join(" ").trim();}function A0(BH,BK){if(this.useSliceWindow){var BJ=this.startSeries;if(BJ!==-1){if(!(BH>=BJ&&BH<=this.endSeries)){return false;}}var BI=this.startGroup;if(BI!==-1){if(!(BK>=BI&&BK<=this.endGroup)){return false;}}}return true;}mstrmojo.chart.DataSetImpl=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.DataSetImpl",mpFormatManager:null,mDataGroup:1,mStatus:AA.DTST_OKAY,mSeriesByColumn:true,mSeriesSplit:null,mDiscreteSeries:null,dataLabelStyle:-1,mHasMetrics:false,useSliceWindow:false,startSeries:-1,startGroup:-1,endSeries:-1,endGroup:-1,gp:null,init:function AX(BH){this.InitFromDataProvider(BH);this.reset();},reset:function AI(){this.resetDataWindow();this.genericFormats=undefined;this.gp={};},InitFromDataProvider:function Ax(BI){if(BI===null||BI===undefined){return false;}this.mStatus=AA.DTST_INVALID;this.dataProvider=BI.dataProvider;if(this.dataProvider===null||this.dataProvider.isValid===false){return false;}this.SetFormatManager(BI.formatManager);var BH=y.call(this);if(BH===false){return false;}Ac.call(this);this.mStatus=AA.DTST_OKAY;return this.dataProvider.isValid;},IsInSlicedWindow:function Ah(BI,BH){return A0.call(this,BI,BH);},SetDataGroup:function a(BH){if(BH>=1){this.mDataGroup=BH;}},GetSeriesCount:function AN(){return this.dataProvider.getSeriesCount();},GetClusterSeriesCount:function D(){var BH=this.GetSeriesByShape().Bar.length;if(BH===0){BH=this.GetSeriesCount();}return BH;},GetGroupCount:function As(){return this.dataProvider.getGroupCount();},SeriesGroupIndexToRowColumnIndex:function r(BL,BI,BK,BH){BK=BK!==undefined?BK:0;BH=BH||false;var BM,BJ;BM=this.dataProvider.getGraphCell(BL,BI).getRowIndex(BK);BJ=this.dataProvider.getGraphCell(BL,BI).getColIndex(BK);return{RowIndex:BM,ColumnIndex:BJ};},ShouldTakeGroupCenter:function G(){return this.dataProvider.isClusteredBarSpecialCase();},GetClusterDataGroup:function Av(){return this.dataProvider.getClusterDataGroup();},GetOneSliceRangeSimple:function T(BI,BL){var BH,BJ,BK,BM;BH=false;BK=this.GetSeriesCount();BM=this.GetGroupCount();for(BJ=0;BJ<BK;++BJ){BI.push(BJ);}for(BJ=0;BJ<BM;++BJ){BL.push(BJ);}return BH;},GetSeriesLabel:function AW(BL,BK,BJ,BH){BK=BK||0;BJ=BJ||An.LLO_NORMAL;BH=BH||false;var BI=this.dataProvider.getGraphCell(BL,0).getSeriesLabel(BK);return M.call(this,BI,BJ,BH);},GetGroupLabel:function Aw(BN,BI,BM,BK){BI=BI!==undefined?BI:0;BM=BM!==undefined?BM:An.LLO_NORMAL;BK=BK||false;var BL=this.dataProvider,BP=BL.lds.gmm.gmCtr,BJ=BL.getSeriesCount(),BQ,BO,BH;if(BP.clusteredBarSpecialCase){for(BQ=0;BQ<BJ;BQ++){BO=BL.getGraphCell(BQ,BN);if(!BO.isFaked&&!!BO){BH=BO.getGroupLabel(BI);break;}}}else{BO=BL.getGraphCell(0,BN);if(!!BO){BH=BO.getGroupLabel(BI);}}return M.call(this,BH,BM,BK);},GetGroupLabelIdentities:function d(BI){var BH=this.dataProvider.getGraphCell(0,BI);if(BH){return BH.getGroupLabelIdentities();}return[];},GetSeriesLabelIdentities:function A(BI){var BH=this.dataProvider.getGraphCell(BI,0);if(BH){return BH.getSeriesLabelIdentities();}return[];},GetMergedLabel:function E(BH,BI){return M.call(this,BH,BI,false);},GetDataGroup:function n(){return this.mDataGroup;},GetData:function AY(BK,BH,BI){BI=BI!==undefined?BI:0;var BJ=null;if(A0.call(this,BK,BH)){BJ=this.dataProvider.getGraphCell(BK,BH).getData(BI);}if(!!this.hasMetricCell===false){if(!(BJ===null||BJ===undefined||isNaN(BJ))&&typeof BJ==="number"){this.hasMetricCell=true;}}if(isNaN(BJ)===true){return null;}return BJ;},GetSizeByData:function X(BI,BH){return this.dataProvider.getGraphCell(BI,BH).getSizeByData();},GetColorByData:function K(BM,BK,BJ,BL){BL=BL||false;BJ=(BJ!==undefined)?BJ:0;var BI=this.dataProvider.getGraphCell(BM,BK);if(!!BI===false||BI.isFaked){return 0;}var BH=BI.getColorByData(BJ,false);if(!BL){if(BH&&BH.c1){BH=BH.c1;}else{if(BH==="transparent"){BH=0;}}}return BH;},GetDefaultShapeFillColor:function(){var BI=this.dataProvider,BH=BI.lds.gmm.gmCtr;return BH.property.defaultsObj.shpFillClr;},GetPieCountAtOneDataPoint:function At(BJ,BH){var BI=this.dataProvider.getGraphCell(BJ,BH);if(!!BI){if(BI.isFaked){BI=this.dataProvider.innerGetGraphCell(BJ,BH);}return BI.getSinglePieDPs().length;}return 0;},GetPieSliceCount:function H(BL,BH,BI){var BJ=this.dataProvider.getGraphCell(BL,BH);if(!!BJ){if(BJ.isFaked){BJ=this.dataProvider.innerGetGraphCell(BL,BH);}var BK=BJ.getSinglePieDPs();if(!!BK){return BK[BI].getSliceCount();}}return 0;},GetSinglePieTotal:function BD(BL,BH,BI){var BJ=this.dataProvider.getGraphCell(BL,BH);if(!!BJ){if(BJ.isFaked){BJ=this.dataProvider.innerGetGraphCell(BL,BH);}var BK=BJ.getSinglePieDPs();if(!!BK){return BK[BI].getTotalValue();}}return 100000;},GetPieSliceData:function Ag(BN,BH,BI,BJ){var BL=this.dataProvider.getGraphCell(BN,BH);if(!!BL){if(BL.isFaked){BL=this.dataProvider.innerGetGraphCell(BN,BH);}var BM=BL.getSinglePieDPs(),BK;if(!!BM){BK=BM[BI].getData(BJ);if(!!this.hasMetricCell===false){if(!(BK===null||BK===undefined||isNaN(BK))&&typeof BK==="number"){this.hasMetricCell=true;}}return BK;}}return null;},GetPieSliceColorByData:function AS(BO,BI,BK,BL,BJ){BJ=BJ||false;var BM=this.dataProvider.getGraphCell(BO,BI);if(!!BM){if(BM.isFaked){BM=this.dataProvider.innerGetGraphCell(BO,BI);}var BN=BM.getSinglePieDPs();if(!!BN){var BH=BN[BK].getColorByData(BL,false,false);if(!BJ){if(BH&&BH.c1){BH=BH.c1;}else{if(BH==="transparent"){BH=0;}}}return BH;}}return null;},GetPieSlicePercentage:function x(BM,BH,BI,BJ){var BK=this.dataProvider.getGraphCell(BM,BH);if(!!BK){if(BK.isFaked){BK=this.dataProvider.innerGetGraphCell(BM,BH);}var BL=BK.getSinglePieDPs();if(!!BL){return BL[BI].getPercentage(BJ);}}return 0;},GetAngleNumber:function u(){return this.GetPieCountAtOneDataPoint(0,0);},IsGridPieAngleBreakX:function Ad(){return this.dataProvider.isGridPieSplitAlongXAxis();},isBare:function k(BK){if(this.hasOwnProperty("hasMetricCell")){return !this.hasMetricCell;}var BO,BM,BJ,BH,BN,BL=this.GetSeriesCount(),BP=this.GetGroupCount(),BI=1,BQ=1;if(BK){BQ=this.GetAngleNumber();}for(BO=0;BO<BL;BO++){for(BM=0;BM<BP;BM++){for(BJ=0;BJ<BQ;BJ++){if(BK){BI=this.GetPieSliceCount(BO,BM,BJ);}for(BH=0;BH<BI;BH++){if(BK){BN=this.GetPieSliceData(BO,BM,BJ,BH);}else{BN=this.GetData(BO,BM);}if(!(BN===null||BN===undefined||isNaN(BN))&&typeof BN==="number"){this.hasMetricCell=true;return false;}}}}}this.hasMetricCell=false;return true;},getValueAxisNumberFormat:function BA(BT,BV,BP){BV=BV||null;BP=BP||false;var BK,BM,BJ,BX,BW,BH=this.mDataGroup,BU=this.dataProvider.isMetricOnRowAxis(),BI=this.mSeriesByColumn,BY=this.dataProvider,BL=new Am.ChartAdvFormat(),BO=new Am.ChartAdvFormat(),BS,BR,BQ;BT.mCustomFormat="General";BT.mFormatType=Ap.General;BT.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null||this.dataProvider===undefined){return false;}BK=true;BM=true;if(BP===false&&BV&&BV.length>0){this.GetMetricNumberFormat(BL,BV[0]);BS=1;for(;BS<BV.length&&BK;BS++){BJ=BV[BS];this.GetMetricNumberFormat(BO,BJ);if((BL.mFormatType!==BO.mFormatType)||(BL.mFormatType===Ap.Currency&&(BL.mCustomFormat.localeCompare(BO.mCustomFormat)!==0))){BK=false;}}if(BK){BT.reset(BL);}return true;}BJ=0;BK=true;BM=true;if(BU){BX=!BI?BY.getSeriesCount():BY.getGroupCount();BW=1;}else{BX=1;BW=BI?BY.getSeriesCount():BY.getGroupCount();}var BN;for(BS=0;BS<BX&&BK;++BS){for(BR=0;BR<BW;++BR){for(BQ=0;BQ<BH;++BQ){BN={S:BS,G:BR,D:BQ};if(BI){BN.S=BR;BN.G=BS;}if(BM){if(BV&&BV.length){BJ=this.getHostMetricIndex(BN.S,BN.G,BN.D);if(BJ===null){continue;}if(BV.indexOf(BJ)!==-1){this.getChartAdvFormatForOneCell(BN,BL,BP);BM=false;}}else{this.getChartAdvFormatForOneCell(BN,BL,BP);BM=false;}}else{BJ=this.getHostMetricIndex(BN.S,BN.G,BN.D);if(BJ===null){continue;}if(BV&&BV.indexOf(BJ)!==-1){this.getChartAdvFormatForOneCell(BN,BO,BP);if((BL.mFormatType!==BO.mFormatType)||(BL.mFormatType===Ap.Currency&&(BL.mCustomFormat.localeCompare(BO.mCustomFormat)!==0))){BK=false;}}}}}}if(BK){BT.reset(BL);}return true;},getGridDataFormat:function A4(BH,BI,BJ,BK){BH.mCustomFormat="General";BH.mFormatType=Ap.General;BH.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null){return false;}this.getChartAdvFormatForOneCell({S:BI,G:BJ,D:BK},BH,true);return true;},getGridDataFormatForPie:function Ay(BN,BO){var BP=BO.mSeriesId,BL=BO.mGroupId,BM=BO.angleByIndex,BI=BO.sliceById,BK,BJ,BH;BN.mCustomFormat="General";BN.mFormatType=Ap.General;BN.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null){return false;}BK=this.dataProvider.getGraphCell(BP,BL).getSinglePieDPs();if(BK&&BK.length>0&&BM<BK.length){BK=BK[BM];if(BK){BJ=BK.getSliceCount();if(BI<BJ){BH=BK.getMetric(BI);if(BH&&BH.fullNf){t.call(this,BH.fullNf,BN);return true;}}}}return false;},getSizeByDataFormat:function Ae(BJ,BK,BL){var BI=this.dataProvider.getGraphCell(BK,BL);if(BI){var BH=BI.getSizeByMetricFormat();if(BH.fullNf){t.call(this,BH.fullNf,BJ);}}},getChartAdvFormatForOneCell:function AP(BI,BK,BJ){BI.D=BI.D||0;BJ=BJ||false;var BH=this.dataProvider.getGraphCell(BI.S,BI.G).getFormat(BI.D);if(BH.fullNf){t.call(this,BH.fullNf,BK);}},SetFormatManager:function A6(BH){this.mpFormatManager=BH;},GetStatus:function L(){return this.mStatus;},SetSeriesByColumn:function e(BH){this.mSeriesByColumn=BH;},GetSeriesByColumn:function J(){return this.mSeriesByColumn;},getHostMetricIndex:function Y(BJ,BI,BH){BH=BH!==undefined?BH:0;return this.dataProvider.getGraphCell(BJ,BI).getMetricIndex(BH);},GetSliceGroupRange:function Al(){return{};},GetSliceFlag:function l(){return false;},EnableSlices:function Ai(){},GetThresholdFillColor:function Ao(BH,BI,BJ){return this.dataProvider.getGraphCell(BH,BI).getThreshold(BJ).Color;},GetZoomScale:function f(){return 1;},IsHeaderEmpty:function g(BH){BH=BH||false;return false;},CountMetric:function AG(){return this.dataProvider.getMetricsCount();},isMetricBySeries:function Au(){return((!this.dataProvider.isMetricOnRowAxis()&&this.mSeriesByColumn)||(this.dataProvider.isMetricOnRowAxis()&&!this.mSeriesByColumn));},GetOneMetricName:function z(BH){return this.dataProvider.getOneMetricName(BH);},GetMetricNumberFormat:function A2(BJ,BI){var BH=this.dataProvider.getMetricFormat(BI,true);t.call(this,BH.fullNf,BJ);},GetPeakValuesAcrossSeries:function p(BI,BH,BK,BJ){},GetSeriesByShape:function Af(BJ){var BI=true;if(BI){this.seriesByShapeMap=this.seriesByShapeMap||{Tick:null,Line:null,Bar:null,Area:null,Circle:null,Square:null,Pie:null,All:null};var BK=BJ||"All";var BH=this.seriesByShapeMap[BK];if(BH===null){if(BK==="All"){BH=BH=this.seriesByShapeMap[BK]=this.dataProvider.getSeriesByShape(BJ);}else{BH=this.seriesByShapeMap[BK]=this.dataProvider.getSeriesByShape(BJ).contact();}}return BH;}else{return this.dataProvider.getSeriesByShape(BJ);}},GetShapeBySeries:function V(BH){return this.dataProvider.getShapeBySeries(BH);},GetShapeByCell:function w(BJ,BH){var BI=this.dataProvider.getGraphCell(BJ,BH);if(!!BI){return BI.getShape();}return -1;},GetValueAxisBySeries:function Aj(BH){return this.dataProvider.getValueAxisBySeries(BH);},GetSeriesByValueAxis:function B(BI){if(this.mSeriesSplit===null){this.mSeriesSplit=[];}var BH=this.mSeriesSplit;if(!!BH[BI]===false){var BJ=this.dataProvider.getSeriesByValueAxis(BI);BH[BI]=BJ.slice(0);}return BH[BI];},GetShapesDistributionByValueAxis:function j(BM){if(BM===undefined){BM=2;}var BH={},BL,BO,BI,BJ,BN=this.GetSeriesCount(),BK;for(BK=0;BK<BN;++BK){if(BM===0||BM===2){BH.Primary=BH.Primary||{};}if(BM===1||BM===2){BH.Secondary=BH.Secondary||{};}BJ=this.GetValueAxisBySeries(BK);BI=this.GetShapeBySeries(BK);if(BJ===BM||BM===2){BO=BJ===0?BH.Primary:BH.Secondary;switch(BI){case 0:BL="AREA";break;case 1:BL="BAR";break;case 2:BL="LINE";break;case 4:BL="CIRCLE";break;case 5:BL="RECTANGLE";break;case 6:BL="SQUARE";break;case 7:BL="TICK";break;case 10:BL="PIE";break;default:BL="Generic";break;}BO[BL]=BO[BL]||[];BO[BL].push(BJ);}}return BH;},GetTrendLinePropertiesBySeries:function AO(BH){BH=BH||0;return{};},GetTrendLinesOfChart:function Ar(){return this.dataProvider.getTrendsOfChart();},GetTrendLineOfSeries:function N(BL){var BI=this.dataProvider.getTrendsOfChart(),BK,BH=null,BJ;if(BI&&BI.length){for(BJ=0;BJ<BI.length;++BJ){BK=BI[BJ];if(BK){if(BK.seriesId===BL){BH=BK;break;}}}}return BH;},GetReferenceLinesOfChart:function BC(){return this.dataProvider.getRefsOfChart();},GetReferenceLinesOfSeries:function S(BL){var BJ=this.dataProvider.getRefsOfChart(),BK,BH=[],BI;if(BJ&&BJ.length){for(BI=0;BI<BJ.length;++BI){BK=BJ[BI];if(BK){if(BK.seriesId===BL){BH.push(BK);}}}}return BH;},GetTextLabel:function AM(BK,BI,BH,BJ){BH=BH||0;BJ=BJ||0;return this.dataProvider.getTextLabel(BK,BI,BH,BJ);},GetBannerText:function AV(BJ,BH,BI){return"Demo Demo Demo Demo Demo Demo Demo Demo Demo Demo";},GetDiscreteSeries:function Aa(){if(this.mDiscreteSeries===null){this.mDiscreteSeries=this.dataProvider.GetDiscreteSeries().slice(0);}return this.mDiscreteSeries;},GetSeriesIndexByPriority:function BF(){return this.dataProvider.getPrioritizedSeriesIndex();},updateDataWindow:function Aq(BI){if(BI.PartialRendering===true){this.useSliceWindow=true;var BH=BI.Series;if(BH){this.startSeries=BH.Min;this.startSeries=Math.max(0,this.startSeries);this.endSeries=BH.Max;this.endSeries=Math.max(this.startSeries,this.endSeries);}var BJ=BI.Group;if(BJ){this.startGroup=BJ.Min;this.startGroup=Math.max(0,this.startGroup);this.endGroup=BJ.Max;this.endGroup=Math.max(this.startGroup,this.endGroup);}}},resetDataWindow:function A9(){this.useSliceWindow=false;this.startGroup=this.endGroup=-1;this.startSeries=this.endSeries=-1;},getBandNumber:function q(){return 3;},getTargetNumber:function BG(){return 1;},getBandsByGroup:function Q(BH,BI){return{Divisions:{Ratios:null,Metrics:null},Descent:false,Colors:null};},getBandDivision:function AK(BH,BI){return{Ratios:null,Metrics:null};},getDataLabelFontFormat:function R(){var BI=this.dataProvider.getDataLabelFontFormat(),BJ={mFontAlignment:null,mFontStyle:BI.dlFntStyle,mFontAlpha:255,mFontBox:0,mFontName:BI.dlFntFml,mFontSize:BI.dlFntSz};var BH=BI.dlFntClr;if(BH!==null&&BH!==undefined){BJ.mFontColor=BH;}return BJ;},showHideItemsOnAxis:function AF(BI){var BH,BJ=this.dataProvider.getAxisFormats(BI,"showHide");if(BI==="x1"||BI==="x2"||BI==="X1"||BI==="X2"){BH={axisBody:BJ[C.X_AXIS_LINE_SHOW]||false,axisLabels:BJ[C.X_AXIS_LABELS_SHOW]||false,majorGrids:BJ[C.MAJOR_GRID_LINES_SHOW]||false,minorGrids:BJ[C.MINOR_GRID_LINES_SHOW]||false};}else{if(BI==="y1"||BI==="y2"||BI==="Y1"||BI==="Y2"){BH={axisBody:BJ[C.Y_AXIS_LINE_SHOW]||false,axisLabels:BJ[C.Y_AXIS_LABELS_SHOW]||false,majorGrids:BJ[C.MAJOR_GRID_LINES_SHOW]||false,minorGrids:BJ[C.MINOR_GRID_LINES_SHOW]||false};}}return BH;},showSeriesDatalabel:function W(BN){if(this.dataLabelStyle===F){return false;}var BL,BK,BI,BH=this.dataProvider.getGraphCell(BN,0,true);if(BH===null||BH.isFaked){BI=this.findCell(false,BN,0);BH=this.dataProvider.getGraphCell(BN,BI,true);}if(BH){BL=BH.chtInfo&&BH.chtInfo.isPie;if(BL){var BJ,BM=BH.getSinglePieDPs()[0].getSliceCount();for(BJ=0;BJ<BM;++BJ){if(this.showPieSliceDatalabel(BN,0,0,BJ)){return true;}}}else{BK=BH.getFormattingProperties();return BK&&(!!BK[C.DATA_LABELS_SHOW]);}}return false;},showPieSliceDatalabel:function AZ(BM,BJ,BI,BL){BI=BI||0;BL=BL||0;if(this.dataLabelStyle===F){return false;}var BK,BH=this.dataProvider.getGraphCell(BM,BJ,true).getSinglePieDPs();if(BH&&BH.length>0){BH=BH[BI];if(BH){BK=BH.getFormattingProperties(BL);return BK&&(!!BK[C.DATA_LABELS_SHOW]);}return false;}return false;},showPieDatalabels:function AB(){if(this.dataLabelStyle===F){return false;}if(this.gp.showDatalabels!==undefined){return this.gp.showDatalabels;}var BI,BH,BJ=this.GetAngleNumber(),BK=this.GetPieSliceCount(0,0,0);for(BH=0;BH<BJ;++BH){for(BI=0;BI<BK;++BI){if(this.showPieSliceDatalabel(0,0,BH,BI)){this.gp.showDatalabels=true;return true;}}}this.gp.showDatalabels=false;return false;},showDatalabels:function h(){if(this.dataLabelStyle===F){return false;}if(this.gp.showDatalabels!==undefined){return this.gp.showDatalabels;}var BH,BI=this.GetSeriesCount();for(BH=0;BH<BI;++BH){if(this.showSeriesDatalabel(BH)){this.gp.showDatalabels=true;return true;}}this.gp.showDatalabels=false;return false;},onlyBarDataLabelEnabled:function AE(){var BJ,BK=this.GetSeriesCount(),BH=0,BI;if(this.dataLabelStyle===F){return false;}for(BJ=0;BJ<BK;++BJ){if(this.showSeriesDatalabel(BJ)){BI=this.GetShapeBySeries(BJ);if(BI===c._BAR){++BH;}else{return false;}}}return(BH>0);},getAllFormats:function AT(BJ){this.genericFormats=this.genericFormats||{id:{},formats:{}};var BI=this.genericFormats;for(var BH in BJ){if(BI.id[BH]!==BJ[BH]){return null;}}return BI.formats;},setAllFormats:function AT(BJ,BH){this.genericFormats=this.genericFormats||{id:{},formats:{}};var BI=this.genericFormats;BI.id=b.copy(BJ);BI.formats=BH;},getGenericLineFormat:function o(BQ,BM,BP,BK,BN){var BJ,BI,BO;if(BN==="pieSliceBorder"){BP=BP||0;var BH=this.dataProvider.getGraphCell(BQ,BM).getSinglePieDPs();BJ=BH[BP];}else{BJ=this.dataProvider.getGraphCell(BQ,BM);if(!!BJ){if(BJ.isFaked){BJ=this.dataProvider.innerGetGraphCell(BQ,BM);}}}if(BJ){BO=BJ.getFormattingProperties(BK);BI=AR(BO,BN);}var BL;switch(BN){case"lineShape":BL=["shpLnClr","shpLnStyle","shpLnThk"];break;case"targetLine":break;case"lineMarker":BL=["lnMkBdrClr",C.LINE_MARKER_STYLE,C.LINE_MARKER_THICKNESS];break;case"shapeBorder":case"pieSliceBorder":BL=["shpBdrClr","shpBdrStyle","shpBdrThk"];break;default:BL=["shpBdrClr","shpBdrStyle","shpBdrThk"];break;}return A3.call(this,BI||BO,BL);},getGenericFillFormat:function BE(BU,BP,BS,BM,BO){var BK,BR;if(BO==="pieSlice"){BS=BS||0;var BI=this.dataProvider.getGraphCell(BU,BP).getSinglePieDPs();BK=BI[BS];}else{BK=this.dataProvider.getGraphCell(BU,BP);}if(BK){BR=BK.getFormattingProperties(BM);}BR=BR||{};var BN;switch(BO){case"pieSlice":case"shape":BN=["shpFillClr","shpFillStyle","shpFillTrans","shpFillEff"];break;case"lineMarker":BN=["lnMkClr"];break;default:BN=["shpFillClr","shpFillStyle","shpFillTrans","shpFillEff"];break;}var BV={mSimpleColor:null,mAlpha:255,mFillType:0};if(BN[1]&&BR[BN[1]]!==undefined){BV.mFillType=BR[BN[1]];}if(BN[2]&&BR[BN[2]]!==undefined){BV.mAlpha=Math.round(255*BR[BN[2]]/100);}var BL=BR[BN[0]];if(BL!==null&&BL!==undefined){var BJ=0,BT=14;var BH=14,BQ=9;if(typeof BL==="string"&&BL==="transparent"){BV.mAlpha=0;return BV;}switch(BV.mFillType){case BJ:BV.mSimpleColor=BL;break;case BT:if(typeof BL==="object"){BV.mFillGradient={startGraphColor:BL.c1,endGraphColor:BL.c2,angle:1-BL.or,horizontalOffset:50,verticalOffset:50,gradientType:(BO==="pieSlice"?BQ:BH),endAlpha:255,intermediateColors:[],style:1};}break;default:BV.mFillType=BJ;if(typeof BL==="number"){BV.mSimpleColor=BL;}break;}}return BV;},getMarkerShapeInfoAt:function A8(BM,BL){var BJ,BK,BN=1,BI=false,BH=0;BJ=this.dataProvider.getGraphCell(BM,BL);if(BJ&&!!BJ.isFaked===false){BK=BJ.getFormattingProperties();BI=BK.lnMkShw;BH=BK.lnMkShp;BN=BK.lnMkSz;}return{Show:BI,Size:BN,Shape:BH};},isLogScaleAxis:function s(BH){return !!this.dataProvider.isLogScale(BH);},isGradientABL:function AD(){return this.dataProvider.isGradientABL();},getAxisOriginFormat:function AC(BJ){var BI,BK=this.dataProvider.getAxisFormats(BJ,"axisOrigin");if(BJ==="x1"||BJ==="x2"||BJ==="X1"||BJ==="X2"){BI=["xAxOriLnClr","xAxOriLnStyle","xAxOriLnThk","xAxOriLnShw"];}else{if(BJ==="y1"||BJ==="y2"||BJ==="Y1"||BJ==="Y2"){BI=["yAxOriLnClr","yAxOriLnStyle","yAxOriLnThk","yAxOriLnShw"];}}var BH=A3.call(this,BK,BI);BH.show=BK[BI[3]];BH.number=this.dataProvider.getAxisOriginValue(BJ);return BH;},getAxisTickFormat:function A1(BI,BJ){var BH,BK=this.dataProvider.getAxisFormats(BI,BJ);if(BJ==="majorTick"){BH=["majorGridLnClr","majorGridLnStyle","majorGridLnThk"];}else{BH=["minorGridLnClr","minorGridLnStyle","minorGridLnThk"];}return A3.call(this,BK,BH);},getAxisLineFormat:function Az(BJ){var BI,BH=this.dataProvider.getAxisFormats(BJ,"body");if(BJ==="x1"||BJ==="x2"||BJ==="X1"||BJ==="X2"){BI=[C.X_AXIS_LINE_COLOR,C.X_AXIS_LINE_STYLE,C.X_AXIS_LINE_THICKNESS];}else{if(BJ==="y1"||BJ==="y2"||BJ==="Y1"||BJ==="Y2"){BI=[C.Y_AXIS_LINE_COLOR,C.Y_AXIS_LINE_STYLE,C.Y_AXIS_LINE_THICKNESS];}}return A3.call(this,BH,BI);},findCell:function Ab(BN,BJ,BM){BM=BM||0;var BL,BK,BH,BI;if(BN===false){BL=this.dataProvider.getGroupCount();}else{BL=this.dataProvider.getSeriesCount();}for(BK=0;BK<BL;BK++){if(BN===false){BH=this.dataProvider.getGraphCell(BJ,BK);}else{BH=this.dataProvider.getGraphCell(BK,BJ);}if(!!BH===false||BH.isFaked){continue;}BI=BH.isIndividualFormatted();if(BM===0){if(BI===false){return BK;}}else{if(BI){return BK;}}}return -1;},getUniformAxis:function AJ(BH,BI){return null;},finalize:function A7(){this.dataProvider.resetDPCache();},allowDatalabelOverlap:function BB(){var BH=this.dataProvider;return BH&&BH.allowDatalabelOverlap();},getAxisLabelFontFormat:function Z(BJ){var BI,BK,BH,BL=this.dataProvider.getAxisFormats(BJ,"axisLabel");if(BJ==="x1"||BJ==="x2"||BJ==="X1"||BJ==="X2"){BI=[C.X_AXIS_LABELS_FONT_SIZE,C.X_AXIS_LABELS_FONT_FAMILY,C.X_AXIS_LABELS_FONT_STYLE,C.X_AXIS_LABELS_ROTATION,C.X_AXIS_LABELS_FONT_COLOR];}else{if(BJ==="y1"||BJ==="y2"||BJ==="Y1"||BJ==="Y2"){BI=[C.Y_AXIS_LABELS_FONT_SIZE,C.Y_AXIS_LABELS_FONT_FAMILY,C.Y_AXIS_LABELS_FONT_STYLE,C.Y_AXIS_LABELS_ROTATION,C.Y_AXIS_LABELS_FONT_COLOR];}}BK=BL[BI[3]];if(BK===-1){BK=0;}BH=BL[BI[4]];return{mFontSize:parseInt(BL[BI[0]],10),mFontName:BL[BI[1]],mFontStyle:BL[BI[2]],mFontRotation:BK,mFontAlignment:1,mFontBox:0,mFontColor:BH===undefined?null:BH,mFontAlpha:255};},refresh:function Ak(BH){if(BH){this.dataProvider=BH;this.reset();}},getForecastCount:function U(){var BH=this.dataProvider;return(BH.fwdSteps+BH.bwdSteps);},saveShownLabels:function O(BM){var BL=this.dataProvider,BK=BM.mLabelList,BH=BK&&BK.length,BI=[],BJ;for(BJ=0;BJ<BH;BJ++){if(BK[BJ].mIsShown){BI.push(BK[BJ].mNumber);}}BL.backupTicks=BL.backupTicks||{};BL.backupTicks[BM.Key]=BI;},fetchShownLabels:function v(BM){var BN=this.dataProvider,BJ=BN.lds.gmm,BL=BJ.gmCtr,BI,BH;var BK=function(){var BO,BP,BQ;BO=BL.mapFromChartToLDSIndex(this.rowIndex,this.colIndex);BP=BM?BJ.getLocalDataSet(BO.r,0):BJ.getLocalDataSet(0,BO.c);BQ=BP.generateDataProvider();return BQ[BO.dpIdx];};BI=BK.call(BN);BH=BI.backupTicks;return BH;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumDSSGraphDataTextShowType","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphDataLineType");var S=mstrmojo.chart,D=S.common;var N=mstrmojo.chart.model,U=N.enums,H=U.EnumDSSGraphType,I=U.EnumDSSGraphProperty,A=U.EnumDSSGraphRegressionType,T=U.EnumDSSGraphDataTextPosition,F=U.EnumDSSGraphDataTextShowType,J=U.EnumDSSGraphObject,R=U.EnumVariantBool,V=U.EnumDSSExtraGraphProperty,B=U.EnumDSSGraphDataLineType;function C(Y,X,W){var Z;if(X>=J.DssGraphX2Body&&X<=J.DssGraphX2Title){X-=99899;}if(X===J.DssGraphTrendLine){X=J.DssGraphLinrLine;Z=this.GetGraphProperty(I.DssGraphSDRegressionType,J.DssGraphRiser,Y,-3);if(Z){switch(Z){case I.DssGraphShowSDLinrLine:case A.DssGraphRegressionNone:X=J.DssGraphLinrLine;break;case I.DssGraphShowSDLinrLog:X=J.DssGraphLinrLog;break;case I.DssGraphShowSDLinrNPoly:X=J.DssGraphLinrNPoly;break;case I.DssGraphShowSDLinrExp:X=J.DssGraphLinrExp;break;case I.DssGraphShowSDMOVALine:X=J.DssGraphMovAvgLine;break;case I.DssGraphShowSDLinrNatLog:X=J.DssGraphLinrNatLog;break;case I.DssGraphShowSDSTDDLine:X=J.DssGraphStdDevLine;break;case I.DssGraphShowSDMeanLine:X=J.DssGraphMeanLine;break;}}}switch(X){case J.DssGraphFrame:case J.DssGraphPieFeelerLine:case J.DssGraphErrorBar:case J.DssGraphPieGroupLabel:case J.DssGraphDataTextConnectLine:case J.DssGraphGaugeBorder:case J.DssGraphGaugeNeedleBase:case J.DssGraphGaugeTitle:case J.DssGraphGauge:case J.DssGraphDataTextStackTotal:Y=-3;break;default:break;}switch(W){case V.DssGraphInfoAutosizeHorizontal:case V.DssGraphInfoAutosizeVertical:case V.DssGraphInfoSuppressLastLevel:case V.DssGraphInfoIncludeSubtotal:case V.DssGraphInfoNestedLabel:case V.DssGraphInfoNestedLabelBracket:case V.DssGraphInfoRecalculateChartFrame:case V.DssGraphInfoRecalculateLegend:X=-3;break;case I.DssGraphSeriesByColumn:X=-3;break;case I.DssGraphShow2DAxisLabels:if(this.mGraphType===H.DssGraphTypeGauge){Y=-3;}break;case I.DssGraphSDShowDataText:case I.DssGraphSDRegressionType:case I.DssGraphShowSDLinrCorr:case I.DssGraphShowSDLinrFormula:case I.DssGraphCurveColorAsSeries:case I.DssGraphShowStepLine:case I.DssGraphSDMarkerSize:case I.DssGraphShowMarker:case I.DssGraphShowLBLFeeler:case I.DssGraphShowFeeler:case I.DssGraphDetachSlice:case I.DssGraphDeleteSlice:case I.DssGraph2DSDSplitY:case I.DssGraphShowSDLine:case I.DssGraphShowLine:case I.DssGraphSDShowToolTip:case I.DssGraphSDToolTip:case I.DssGraphGauge1Show:case I.DssGraphGauge2Show:case I.DssGraphGauge3Show:case I.DssGraphGauge4Show:case I.DssGraphGauge5Show:case I.DssGraphGauge1Min:case I.DssGraphGauge2Min:case I.DssGraphGauge3Min:case I.DssGraphGauge4Min:case I.DssGraphGauge5Min:case I.DssGraphGauge1Max:case I.DssGraphGauge2Max:case I.DssGraphGauge3Max:case I.DssGraphGauge4Max:case I.DssGraphGauge5Max:X=J.DssGraphRiser;break;case I.DssGraph2DAngle:case I.DssGraph2DDepth:case I.DssGraphShowDataText:case I.DssGraphMarkerLayout:case I.DssGraphLegendLock:case I.DssGraphLegendBox:case I.DssGraphDepthMode:case I.DssGraphCurvedLines:case I.DssGraphGroupSpacing:case I.DssGraphRiserWidth:case I.DssGraphACMColorModel:case I.DssGraphAxisHasErrorBar:case I.DssGraphSplitYPosition:case I.DssGraphAxisHasMiddleValue:case I.DssGraphMiddleValue:case I.DssGraphConnectStackBars:case I.DssGraphShowDivBiPolar:case I.DssGraphGaugeRangeStartAngleValue:case I.DssGraphGaugeRangeStopAngleValue:case I.DssGraphGaugeBorderThicknessValue:case I.DssGraphGaugeStyleValue:case I.DssGraphGaugeShowNeedle:case I.DssGraphGaugeFancyBox:case I.DssGraphGaugeNeedleStyleValue:case I.DssGraphGaugeBorderStyleValue:case I.DssGraphPiesPerRowValue:case I.DssGraphTailShape:case I.DssGraphOBPMedian:case I.DssGraphOBPStem:case I.DssGraphOBPTail:case I.DssGraphGaugeThickness:Y=-3;break;case I.DssGraphSDMOVAFactor:case I.DssGraphPieDataValueLoc:case I.DssGraphPieDataLabelLoc:X=J.DssGraphRiser;Y=-3;break;case I.DssGraphGradient:W=I.DssGraphAreaSFX;break;case I.DssGraphFrameLocationNEW:W=I.DssGraphFrameLocation;break;case I.DssGraph3DRowTitleLocationNEW:W=I.DssGraph3DRowTitleLocation;break;case I.DssGraph3DColTitleLocationNEW:W=I.DssGraph3DColTitleLocation;break;case I.DssGraphLineAlpha:case I.DssGraphLineColor:case I.DssGraphLinePattern:case I.DssGraphLineWidth:if(this.mGraphType===H.DssGraphTypeBoxPlot&&X===J.DssGraphRiser){X=J.DssGraphOBPBox;}break;default:break;}return{ObjectId:X,SeriesId:Y,PropertyId:W};}function M(X){var Y,W,Z;Y=((X>>8)-((X>>16)<<8))<<8;W=(X-((X>>8)<<8))<<8;Z=((X>>16)-((X>>24)<<16))<<8;return(W>>8)*65536+(Y>>8)*256+(Z>>8);}function O(X){var W=-1;switch(X){case J.DssGraphX1Body:W=J.DssGraphUserLine3;break;case J.DssGraphY1RightBody:case J.DssGraphY1Body:W=J.DssGraphUserLine1;break;case J.DssGraphY2Body:W=J.DssGraphUserLine2;break;case J.DssGraphY3Body:W=J.DssGraphUserLine3;break;case J.DssGraphY4Body:W=J.DssGraphUserLine4;break;case J.DssGraphZBody:W=J.DssGraphUserLine4;break;}return W;}mstrmojo.chart.FormatManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatManager",mpTemplate:null,mIsValid:false,mpGraphPropertyPool:null,mKey:"",mHasMetrics:true,mIsUseGraphProperties:true,mGraphType:H.DssGraphTypeVertical_Bar_Side_by_Side,init:function P(W){this.mIsValid=this.ConsumeJSON(W);},ConsumeJSON:function Q(W){if(W&&W.GraphPropertyMap){this.mpGraphPropertyPool=W.GraphPropertyMap;}else{this.mpGraphPropertyPool=new D.MapStructure();}return true;},IsValid:function G(){return this.mIsValid;},GetGraphProperty:function E(a,e,h,Y){var X=this.mGraphType,c=null,b,g,d,Z,W,f;if(!this.mIsUseGraphProperties){return c;}var j=this.mpGraphPropertyPool;b=e;g=C.call(this,h,e,a);h=g.SeriesId;e=g.ObjectId;a=g.PropertyId;if(!this.mpGraphPropertyPool){return c;}if(a===V.DssGraphMatrixInitedDataLabelRotation||a===V.DSSGraphMatrixDataLabelRotated){g=j.find([h,-3,a]);if(g!==undefined){return g;}}if(a>V.DssGraphTypeRingPie&&a<=V.DssGraphInfoReserved){return c;}switch(a){case V.DssGraphInfoAutosizeHorizontal:case V.DssGraphInfoAutosizeVertical:case V.DssGraphInfoSuppressLastLevel:case V.DssGraphInfoIncludeSubtotal:case V.DssGraphInfoSeriesByColumn:case V.DssGraphInfoNestedLabel:case V.DssGraphInfoNestedLabelBracket:case V.DssGraphInfoRecalculateChartFrame:case V.DssGraphInfoRecalculateLegend:case V.DssGraphInfoUseMaxCategoriesAsMin:case V.DssGraphInfoUseZerosForGraphNulls:g=j.find([h,-3,a-V.DssGraphInfoReserved]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShowTitle:case I.DssGraphLockFontSize:case I.DssGraphShowSubtitle:case I.DssGraphShowfootnote:case I.DssGraphShowLegendText:case I.DssGraphCurvedLines:case I.DssGraphDepthMode:case I.DssGraphShow2DY1Title:case I.DssGraphShow2DY2Title:case I.DssGraphShow2DXTitle:case I.DssGraphEnhancedSeriesEffect:case I.DssGraphAxisHasErrorBar:case I.DssGraphAutoArrange:case I.DssGraphAxisHasMiddleValue:case I.DssGraphConnectStackBars:case I.DssGraph2DOrdSpaceMode:case I.DssGraphShowStepLine:case I.DssGraph2DSplitYAutomatic:case I.DssGraphFontAntiAlias:case I.DssGraphShowLBLPie:case I.DssGraphShowLBLRing:case I.DssGraphDeleteSlice:case I.DssGraph2DPie:case I.DssGraphDataTextShowConnectLine:case I.DssGraphShowSDLine:case I.DssGraphGaugeShowNeedle:case I.DssGraphSDShowToolTip:case I.DssGraphShow3DLineToLWall:case I.DssGraphShow3DLineToRWall:case I.DssGraphShow3DScatterLine:case I.DssGraphShow3DLineToFloor:case I.DssGraphSeriesByColumn:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShowDivBiPolar:case I.DssGraphShowSDLinrCorr:case I.DssGraphShowSDLinrFormula:case I.DssGraphCurveColorAsSeries:case I.DssGraph2DSDSplitY:g=j.find([-3,h,e,a]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}else{c=0;}break;case I.DssGraphFontAlign:case I.DssGraphFontRotation:case I.DssGraphFontBox:case I.DssGraphAreaAlpha:case I.DssGraphLinePattern:case I.DssGraphLineAlpha:case I.DssGraphLineWidth:case I.DssGraphFontStyle:case I.DssGraphFontAlpha:case I.DssGraphSDRiserType:case I.DssGraphSDPolyFactor:case I.DssGraphSDMOVAFactor:case I.DssGraphRiserWidth:case I.DssGraphACMColorModel:case I.DssGraphPiesPerRowValue:case I.DssGraphPieRotationValue:case I.DssGraphSplitYPosition:case I.DssGraphMiddleValue:case I.DssGraphPieHoleSizeValue:case I.DssGraphPieDepthValue:case I.DssGraphPieTiltValue:case I.DssGraphPieDataValueLoc:case I.DssGraphPieDataLabelLoc:case I.DssGraphDetachSlice:case I.DssGraph2DAngle:case I.DssGraph2DDepth:case I.DssGraphMarkerLayout:case I.DssGraphLegendLock:case I.DssGraphLegendBox:case I.DssGraphMarkerSize:case I.DssGraphGaugeRangeStartAngleValue:case I.DssGraphGaugeRangeStopAngleValue:case I.DssGraphGaugeBorderThicknessValue:case I.DssGraphGaugeStyleValue:case I.DssGraphGaugeFancyBox:case I.DssGraphGaugeNeedleStyleValue:case I.DssGraphGaugeBorderStyleValue:case I.DssGraphTailShape:case I.DssGraphGaugeThickness:g=j.find([-3,h,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphGroupSpacing:g=j.find([-3,h,e,a]);if(g!==undefined){c=(g%127);}break;case I.DssGraphShowDataText:g=j.find([-3,-3,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphShowLBLFeeler:g=j.find([-3,h===-3?0:h,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphShowFeeler:g=j.find([-3,h===-3?0:h,e,a]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAreaSFX:g=j.find([-3,h,e,a]);if(g){d=g.split(",");c={StartColor:parseInt(M.call(this,d[0]),16),EndColor:parseInt(M.call(this,d[1]),16),gradientType:parseInt(d[2]),angle:parseInt(d[3]),horizontalOffset:parseInt(d[4]),verticalOffset:parseInt(d[5])};}break;case I.DssGraphAreaCustomBevelEffect:g=j.find([-3,h,e,a]);if(g){d=g.split(",");c={type:parseInt(d[0]),lightAngle:parseInt(d[1]),intensity:parseInt(d[2]),depth:parseInt(d[3])};}break;case I.DssGraphAxisDataTextPlace:if((X>=H.DssGraphTypeX_Y_Scatter&&X<=H.DssGraphTypeDualAxis_Polar_Coordinate_Chart)||X===H.DssGraphTypeBubble||X===H.DssGraphTypeBubble_DualAxis||X===H.DssGraphTypeBubble_With_Labels||X===H.DssGraphTypeBubble_DualAxis_With_Labels||X===H.DssGraphTypeD3_X_Y_Z_Scatter_Chart||X===H.DssGraphTypeD3_X_Y_Z_Scatter_with_Labels_Chart){W=j.find([-3,-3,e,I.DssGraph2DPlaceX]);f=j.find([-3,-3,e,I.DssGraph2DPlaceY1]);if(W&&f){switch(W){case T.DssGraphDTPositionOutMin:if(f===T.DssGraphDTPositionCenter){Z=T.DssGraphDTPositionInMin;}break;case T.DssGraphDTPositionOutMax:if(f===T.DssGraphDTPositionCenter){Z=T.DssGraphDTPositionOutMin;}break;case T.DssGraphDTPositionCenter:switch(f){case T.DssGraphDTPositionCenter:Z=T.DssGraphDTPositionCenter;break;case T.DssGraphDTPositionOutMin:Z=T.DssGraphDTPositionOutMax;break;case T.DssGraphDTPositionOutMax:Z=T.DssGraphDTPositionInMax;break;}break;}c=Z;}}else{f=j.find([-3,-3,e,I.DssGraph2DPlaceY1]);if(f!==undefined){c=f;}}break;case I.DssGraphShowLine:if(X===H.DssGraphTypeBubble||X===H.DssGraphTypeBubble_DualAxis||X===H.DssGraphTypeBubble_With_Labels||X===H.DssGraphTypeBubble_DualAxis_With_Labels){g=j.find([-3,h===-3?0:h,e,I.DssGraphShowSDLine]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}}else{g=j.find([-3,h===-3?0:h,e,I.DssGraphShowSDDataLineType]);if(g===undefined){g=j.find([-3,e,I.DssGraphShowSDDataLineType]);}if(g!==undefined){c=(g&B.DssGraphDataLineLine)?true:false;}}break;case I.DssGraphShowMarker:g=j.find([-3,h===-3?0:h,e,I.DssGraphShowSDDataLineType]);if(g===undefined){g=j.find([-3,e,I.DssGraphShowSDDataLineType]);}if(g!==undefined){c=(g&B.DssGraphDataLineMarker)?true:false;}break;case I.DssGraphSDMarkerSize:g=j.find([-3,h===-3?0:h,e,I.DssGraphSDMarkerSize]);if(g===undefined){g=j.find([-3,e,I.DssGraphMarkerSize]);}if(g!==undefined){c=g;}break;case I.DssGraphSDMarkerShape:g=j.find([-3,h===-3?0:h,e,I.DssGraphMarkerShape]);if(g===undefined){g=j.find([-3,e,I.DssGraphMarkerShape]);}if(g!==undefined){c=g;}break;case I.DssGraphShowDataLabel:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextLabel)?true:false;}break;case I.DssGraphShowDataValue:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextValue)?true:false;}break;case I.DssGraphShowTotalValue:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextTotal)?true:false;}break;case I.DssGraphShowDVPercent:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextPercent)?true:false;}break;case I.DssGraphLineColor:case I.DssGraphAreaColor:case I.DssGraphFontColor:case I.DssGraphSeriesColor:g=j.find([-3,h,e,a]);if(g){c=M.call(this,parseInt(g,16));}break;case I.DssGraphFontName:g=j.find([-3,h,e,a]);if(g){c=g;}break;case -I.DssGraphFormatDataTextAdv:case I.DssGraphTextContent:case I.DssGraphSDToolTip:g=j.find([-3,h,e,a]);if(g){c=g;}break;case I.DssGraphFontSize100:g=j.find([-3,h,e,I.DssGraphFontSize]);if(g!==undefined){c=g*100;}break;case I.DssGraphFillEffect:g=j.find([h,e,a]);if(g){c=parseInt(g);}break;case I.DssGraphSDRegressionType:g=j.find([-3,h,e,I.DssGraphShowSDLinrLog]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionLog;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrNPoly]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionPoly;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrExp]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionExp;break;}g=j.find([-3,h,e,I.DssGraphShowSDMOVALine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionMA;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrLine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionLinear;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrNatLog]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionNatLog;break;}g=j.find([-3,h,e,I.DssGraphShowSDSTDDLine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionSTDD;break;}g=j.find([-3,h,e,I.DssGraphShowSDMeanLine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionMean;break;}c=A.DssGraphRegressionNone;break;case I.DssGraphShow2DAxisLabels:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisMajor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisMinor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisLine:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ExcludeZero:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleUseMax:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleUseMin:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleMax:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraph2ScaleMin:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraph2LogScale:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphManualMajor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphCountMajor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraph2ScaleEndMax:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleEndMin:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAxisNumberFormat:g=j.find([-3,h,e,a]);if(g){c=g;}break;case I.DssGraphSDShowDataText:g=j.find([-3,h,e,a]);if(!g){c=false;}else{c=g;}break;case I.DssGraph2ScaleDirection:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAxisShowUserLine:case I.DssGraphAxisUserLineValue:b=O.call(this,b);g=j.find([-3,h,b,a]);if(g!==undefined){c=g;}break;case I.DssGraphAxisAutoFit:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphOffScaleType:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;case I.DssGraphStyleMajor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;case I.DssGraphStyleMinor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;case I.DssGraphCountMinor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraphManualMinor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2DSide:g=j.find([-3,h,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphAxisStagger:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAxisScaleFreq:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;default:c=undefined;break;}return c;},PutGraphProperty:function L(c,W,b,X,Z){var a;if(!this.mIsUseGraphProperties){return ;}var Y=this.mpGraphPropertyPool;if(!Y){return ;}a=C.call(this,b,W,c);b=a.SeriesId;W=a.ObjectId;c=a.PropertyId;if(c===V.DssGraphMatrixInitedDataLabelRotation||c===V.DSSGraphMatrixDataLabelRotated){Y.replace([b,-3,c],Z);}},SetGraphType:function K(W){this.mGraphType=W;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.MapStructure","mstrmojo.chart.JSONParameter","mstrmojo.chart.enums.EnumInstructionName");var J=mstrmojo.chart,K=J.enums,N=K.EnumInstructionName;function I(P,Q){++this.mCurrentIndex;if(this.mIsFirstPass){this.mParameterList.push(new J.JSONParameter({mParameterName:P,mParameterValue:Q,mIsLastFrameSet:this.mIsLastFrame}));}}mstrmojo.chart.JSONInstruction=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONInstruction",mInstructionName:N.JSONInsUndefined,mpOriginalAddress:0,mFormatIdx:-1,mParameterList:[],mCurrentIndex:-1,mIsLastFrame:true,mIsFirstPass:true,init:function O(P){this._super(P);this.mParameterList=[];},SetInstructionName:function F(P){this.mInstructionName=P;},GetInstructionName:function H(){return this.mInstructionName;},SetSecondPass:function D(){this.mIsFirstPass=false;this.mCurrentIndex=-1;},SetLastFrame:function A(P){this.mIsLastFrame=P;},AppendToParameterList:function E(P,Q){I.call(this,P,Q);},AppendArrayToParameterList:function B(P,Q,R){if(R>0){I.call(this,P,Q);}},AppendSimpleVectorToParameterList:function M(P,Q){if(Q.length>0){I.call(this,P,Q);}},SetFormatAddress:function C(P){this.mpOriginalAddress=P;},CalculateFormatIndex:function G(S){var R=this.mpOriginalAddress,Q,T,P;if(R!==null&&R!==undefined){Q=0;P=S.length-1;while(Q<=P){T=Math.floor((Q+P)/2);if(S[T].mpOriginalAddress<R){Q=T+1;}else{if(S[T].mpOriginalAddress>R){P=T-1;}else{this.mFormatIdx=T;return ;}}}Q=0;P=S.length-1;while(Q<=P){T=Math.floor((Q+P)/2);if(S[T].id<R){Q=T+1;}else{if(S[T].id>R){P=T-1;}else{this.mFormatIdx=T;return ;}}}}},AppendToJSONObject:function L(U){var R=this.mParameterList,Q=this.mFormatIdx,T,P,S={Ins:this.mInstructionName};if(Q>=0){S.Format=Q;}P=R.length;for(T=0;T<P;T++){R[T].AppendToJSONObject(S);}U.push(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.common.MapStructure");var I=mstrmojo.chart,E=I.gNullTripleId;var G=0;mstrmojo.chart.GraphObjectManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObjectManager",mGraphObjectList:null,mGraphObjectManagerList:null,mTripleId:null,mpManager:null,mChartContextPtr:null,mGraphObjectMap:null,init:function N(O){this._super(O);this.mGraphObjectList=[];this.mGraphObjectManagerList=[];this.mTripleId=this.mTripleId||O.TripleId||E;this.mpManager=O.GraphObjectManager||null;if(this.mpManager!==null){this.mChartContextPtr=this.mpManager.mChartContextPtr;}if(G===-1){}else{if(G===1||(!!this.mpManager)===false){this.mGraphObjectMap=new mstrmojo.chart.common.MapStructure();}else{this.mGraphObjectMap=this.mpManager.mGraphObjectMap||new mstrmojo.chart.common.MapStructure();}}},getMapGenesis:function A(){return G;},AddToMapAndList:function L(O){this.AddToMap(O);this.mGraphObjectList.push(O);},AddObjectsToMapAndList:function M(Q){var P,O;O=Q.length;for(P=0;P<O;++P){this.AddToMapAndList(Q[P]);}},AddToManagerList:function H(O){this.mGraphObjectManagerList.push(O);},AddToMap:function C(O){if(O){this.mGraphObjectMap.replaceByTripleId(O.mTripleId,O);}},getGraphObjectFromList:function J(V,R){var S,T,O,U=this.mGraphObjectManagerList,Q=this.mGraphObjectList,P=this.mChartContextPtr.getUtiliy();for(S=Q.length-1;S>=0;--S){T=Q[S].mTripleId;if(P.tripleId.equal(T,V)){O={object:Q[S],find:true};return O;}}if(R){for(S=U.length-1;S>=0;--S){O=U[S].getGraphObjectFromList(V);if(O.find){return O;}}}return{object:null,find:false};},GetGraphObject:function F(U,P){var S,R,Q=this.mGraphObjectMap,T=this.mGraphObjectManagerList,O;P=(P===undefined)?true:P;if(Q){S=Q.findByTripleId(U);if(S!==undefined){return S;}if(P){O=T.length;for(R=O-1;R>=0;--R){S=T[R].GetGraphObject(U,true);if(S!==undefined){return S;}}}return null;}S=this.getGraphObjectFromList(U,P);return S;},GetGraphObjectManager:function K(U,P){if(P===undefined){P=true;}var Q,T=this.mGraphObjectManagerList,O=this.mChartContextPtr.getUtiliy();for(Q=T.length-1;Q>=0;--Q){var S=T[Q].mTripleId;if(O.tripleId.equal(S,U)){return T[Q];}if(P){var R=T[Q].GetGraphObjectManager(U,true);if(R){return R;}}}return null;},Draw:function B(){var O,P;O=this.mGraphObjectList.length;for(P=0;P<O;++P){this.mGraphObjectList[P].Draw();}},GenerateInterpolationFrame:function D(O){var Q=this.mGraphObjectManagerList.length,P,R;this.mProgress=O;for(P=0;P<Q;++P){this.mGraphObjectManagerList[P].GenerateInterpolationFrame(O);}R=this.mGraphObjectList.length;for(P=0;P<R;++P){this.mGraphObjectList[P].SetProgress(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Base","mstrmojo.chart.Point2D","mstrmojo.chart.enums.EnumRectExpandDirection");var M=mstrmojo.hash,T=mstrmojo.chart,V=T.enums,P=V.EnumRectExpandDirection;mstrmojo.chart.Rect2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Rect2D",x:0,y:0,width:0,height:0,init:function O(Y){if(Y){if(Y.Rect2D){var Z=Y.Rect2D;mstrmojo.hash.copy(Z,this);}else{this._super(Y);}}},Explode:function F(Z,Y){this.x-=Z;this.y-=Y;this.width+=(Z*2);this.height+=(Y*2);},Implode:function A(Z,Y){this.Explode(-Z,-Y);},GetTopLeft:function H(Y){return new T.Point2D({x:this.x,y:this.y});},GetBottomLeft:function G(Y){return new T.Point2D({x:this.x,y:this.y+this.height});},GetTopRight:function E(Y){return new T.Point2D({x:this.x+this.width,y:this.y});},GetBottomRight:function X(Y){return new T.Point2D({x:this.x+this.width,y:this.y+this.height});},GetCenter:function W(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y+this.height/2});},GetLeftMiddle:function C(Y){return new T.Point2D({x:this.x,y:this.y+this.height/2});},GetTopMiddle:function I(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y});},GetRightMiddle:function R(Y){return new T.Point2D({x:this.x+this.width,y:this.y+this.height/2});},GetBottomMiddle:function Q(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y+this.height});},HasIntersection:function J(Y){return(this.x<(Y.x+Y.width)&&Y.x<(this.x+this.width)&&this.y<(Y.y+Y.height)&&Y.y<(this.y+this.height));},PointInRectangle:function S(Y){return((Y.x>=this.x)&&(Y.x<=this.x+this.width)&&(Y.y>=this.y)&&(Y.y<=this.y+this.height));},Reset:function B(Y,b,Z,a){this.x=Y;this.y=b;this.width=Z;this.height=a;},copy:function N(Y){return M.copyProps(["x","y","width","height"],Y,this);},ResetRect:function D(Y){this.copy(Y);},Expand:function L(Z,Y){if((Y&P.REC_EXP_HORIZONTAL)>0){this.x-=Z;this.width+=2*Z;}if((Y&P.REC_EXP_VERTICAL)>0){this.y-=Z;this.height+=2*Z;}},clone:function U(){return new T.Rect2D({Rect2D:this});},ToPoints:function K(Y){if(Y){return{Center:this.GetCenter(),Origin:this.GetTopLeft(),Width:this.width,Height:this.height};}return{TopLeft:this.GetTopLeft(),TopRight:this.GetTopRight(),BottomLeft:this.GetBottomLeft(),BottomRight:this.GetBottomRight()};}});T.gDefaultTitlePosition=new T.Rect2D({x:15,y:15,width:670,height:21});T.gDefaultSubtitlePosition=new T.Rect2D({x:15,y:51,width:670,height:17});T.gDefaultFootnotePosition=new T.Rect2D({x:15,y:370,width:670,height:15});T.gEmptyRect=new T.Rect2D({x:0,y:0,width:0,height:0});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.HSLColor");var F=mstrmojo.chart,H=0.01;function I(N){if(N<0){N+=1;}if((N-1)>0){N-=1;}return N;}function B(P,O,N){if((N-1/6)<0){return P+(O-P)*6*N;}if((N-0.5)<0){return O;}if((N-2/3)<0){return P+(O-P)*6*(2/3-N);}return P;}mstrmojo.chart.RGBColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.RGBColor",mR:0,mG:0,mB:0,init:function M(V,Z){this._super(V);Z=Z||false;if(V!==null){if(V.Color){this.mR=V.Color.mR;this.mG=V.Color.mG;this.mB=V.Color.mB;}else{if(V.R!==undefined&&V.G!==undefined&&V.B!==undefined){this.mR=V.R;this.mG=V.G;this.mB=V.B;}else{if(V.H!==undefined&&V.S!==undefined&&V.L!==undefined){var S=V.H,Y=V.S,O=V.L;var R,T,W,N,U,X;if(Y<H){this.mR=this.mG=this.mB=(O*255);}else{R=0;if((0.5-O)>0){R=O*(1+Y);}else{R=O+Y-(O*Y);}T=2*O-R;W=S/360;N=W+1/3;U=W;X=W-1/3;N=I(N);U=I(U);X=I(X);this.mR=B(T,R,N)*255;this.mG=B(T,R,U)*255;this.mB=B(T,R,X)*255;}}else{if(typeof V==="number"){if(Z){this.mR=V&255;this.mG=(V&65280)>>8;this.mB=(V&16711680)>>16;}else{this.mB=V&255;this.mG=(V&65280)>>8;this.mR=(V&16711680)>>16;}}}}}}},ToInteger:function G(N){N=N||false;if(N){return this.mB+(this.mG<<8)+(this.mR<<16);}return this.mR+(this.mG<<8)+(this.mB<<16);},MakeDarker:function J(N){this.mR*=N;this.mG*=N;this.mB*=N;},Reset:function D(P,O,N){this.mR=P;this.mG=O;this.mB=N;},ResetFromColorValue:function L(O,N){N=N||false;if(N){this.mR=O&255;this.mG=(O&65280)>>8;this.mB=(O&16711680)>>16;}else{this.mB=O&255;this.mG=(O&65280)>>8;this.mR=(O&16711680)>>16;}},ResetFromHSLValue:function K(R){var T=R.H,Y=R.S,O=R.L;var S,U,W,N,V,X;if(Y<H){this.mR=this.mG=this.mB=(O*255);}else{S=0;if((0.5-O)>0){S=O*(1+Y);}else{S=O+Y-(O*Y);}U=2*O-S;W=T/360;N=W+1/3;V=W;X=W-1/3;N=I(N);V=I(V);X=I(X);this.mR=B(U,S,N)*255;this.mG=B(U,S,V)*255;this.mB=B(U,S,X)*255;}},Copy:function E(N){this.mR=N.mR;this.mG=N.mG;this.mB=N.mB;},ToHSL:function A(){var O,R,N,Q,P;O=Math.max(this.mR,this.mG,this.mB);R=Math.min(this.mR,this.mG,this.mB);if(O===R){P=0;}else{if(O===this.mR){if(this.mG>=this.mB){P=60*(this.mG-this.mB)/(O-R);}else{P=60*(this.mG-this.mB)/(O-R)+360;}}else{if(O===this.mG){P=60*(this.mB-this.mR)/(O-R)+120;}else{P=60*(this.mR-this.mG)/(O-R)+240;}}}N=0.5*(O+R)/255;if(O===R){Q=0;}else{if((0.5-N)>0){Q=(O-R)/(O+R);}else{Q=(O-R)/(510-(O+R));}}return new F.HSLColor({h:P,s:Q,l:P});}});var C=mstrmojo.chart.RGBColor;F.gWhite=new C({R:255,G:255,B:255});F.gBlack=new C({R:0,G:0,B:0});F.gLeaderLineColor=new C({R:37,G:108,B:83});F.gStrokeColorForDarkBackground=new C({R:254,G:254,B:254});F.gStrokeColorForLightBackground=new C({R:230,G:230,B:230});F.gColorPalette=[new C({R:62,G:117,B:167}),new C({R:92,G:151,B:70}),new C({R:248,G:215,B:83}),new C({R:23,G:185,B:51}),new C({R:255,G:138,B:14}),new C({R:156,G:57,B:164}),new C({R:144,G:173,B:207}),new C({R:31,G:171,B:242}),new C({R:255,G:255,B:204}),new C({R:255,G:204,B:153}),new C({R:0,G:51,B:0}),new C({R:128,G:0,B:0}),new C({R:49,G:255,B:49}),new C({R:0,G:0,B:255}),new C({R:255,G:128,B:64}),new C({R:99,G:101,B:255}),new C({R:255,G:0,B:0}),new C({R:255,G:255,B:0}),new C({R:0,G:255,B:0}),new C({R:255,G:0,B:255})];F.gLightColorPalette=[new C({R:31,G:119,B:180}),new C({R:214,G:39,B:40}),new C({R:44,G:160,B:44}),new C({R:255,G:127,B:14}),new C({R:148,G:103,B:189}),new C({R:188,G:189,B:34}),new C({R:23,G:190,B:207}),new C({R:127,G:127,B:127}),new C({R:174,G:199,B:232}),new C({R:255,G:152,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:187,B:120}),new C({R:197,G:189,B:5}),new C({R:219,G:219,B:141}),new C({R:158,G:218,B:229}),new C({R:199,G:199,B:199})];F.gDarkColorPalette=[new C({R:22,G:176,B:255}),new C({R:255,G:55,B:41}),new C({R:4,G:186,B:34}),new C({R:255,G:150,B:14}),new C({R:174,G:121,B:222}),new C({R:204,G:205,B:37}),new C({R:25,G:206,B:224}),new C({R:169,G:169,B:169}),new C({R:179,G:205,B:239}),new C({R:255,G:167,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:223,B:128}),new C({R:218,G:195,B:236}),new C({R:225,G:224,B:144}),new C({R:161,G:223,B:234}),new C({R:214,G:214,B:214})];}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.JSONUtil","mstrmojo.chart.enums.EnumInstructionName");var D=mstrmojo.chart,H=mstrmojo.chart.enums,K=H.EnumInstructionName,F=D.JSONUtil.prototype;mstrmojo.chart.JSONUnit=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUnit",mIsAnimated:false,mIsLastFrame:true,mIsFirstPass:true,mIsFirstFrameSet:false,mIsLastFrameSet:false,mInstructionList:[],mCurrentIndex:-1,init:function L(N){this.mInstructionList=[];if(N){this.mIsAnimated=N.mIsAnimated||false;this.mIsLastFrame=N.mIsLastFrame||false;}},AppendToJSONObject:function I(N){N.IsAnimated=this.mIsAnimated?1:0;if(this.mInstructionList.length>0){F.AppendCompoundPointerVectorToJSONObject("InstructionList",this.mInstructionList,N);}},AddInstruction:function J(O,N){if(O===undefined){O=K.JSONInsUndefined;}if(N===undefined){N=null;}++this.mCurrentIndex;if(this.mIsFirstPass){this.mInstructionList.push(new D.JSONInstruction({mInstructionName:O,mpOriginalAddress:N}));}else{this.mInstructionList[this.mCurrentIndex].SetSecondPass();}this.mInstructionList[this.mCurrentIndex].SetLastFrame(this.mIsLastFrame);return this.mInstructionList[this.mCurrentIndex];},SetAnimated:function A(N){this.mIsAnimated=N;},IsAnimated:function M(){return this.mIsAnimated;},IsValid:function E(){if(this.mInstructionList.length===0){return false;}if(this.mIsAnimated){return(this.mIsFirstFrameSet&&this.mIsLastFrameSet);}return true;},SetToFirstFrame:function G(){this.mIsFirstFrameSet=true;this.mIsLastFrame=false;this.mCurrentIndex=-1;if(this.mIsLastFrameSet){this.mIsFirstPass=false;}},SetToLastFrame:function C(){this.mIsLastFrameSet=true;this.mIsLastFrame=true;this.mCurrentIndex=-1;if(this.mIsFirstFrameSet){this.mIsFirstPass=false;}},CalculateFormatIndex:function B(O){var N,P;N=this.mInstructionList.length;for(P=0;P<N;++P){this.mInstructionList[P].CalculateFormatIndex(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.model.enums.EnumDSSGraphObject");var F=mstrmojo.chart,A=mstrmojo.chart.model,B=A.enums,G=B.EnumDSSGraphObject,C=F.gNullObjectId;function H(J){return new F.TripleId({ObjectId:J});}mstrmojo.chart.AxisObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.AxisObject",mLabelId:-1,mMajorId:-1,mMinorId:-1,mTitleId:-1,mCustomLineId:-1,mCustomLabelId:-1,init:function I(J){this.mLabelId=J.LabelId;this.mMajorId=J.MajorId;this.mMinorId=J.MinorId;this.mTitleId=J.TitleId;this.mCustomLineId=J.CustomLineId;this.mCustomLabelId=J.CustomLabelId;}});var E=mstrmojo.chart.AxisObject;var D=F.gAxisObjects=[];D.push(new E({LabelId:H.call(this,G.DssGraph2DO1Label),MajorId:H.call(this,G.DssGraphO1Major),MinorId:H.call(this,G.DssGraphO1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraph2DO2Label),MajorId:H.call(this,G.DssGraphO2Major),MinorId:H.call(this,G.DssGraphO2Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphX1Label),MajorId:H.call(this,G.DssGraphX1Major),MinorId:H.call(this,G.DssGraphX1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,G.DssGraphUserLabel3)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphY1Title),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphY2Label),MajorId:H.call(this,G.DssGraphY2Major),MinorId:H.call(this,G.DssGraphY2Minor),TitleId:H.call(this,G.DssGraphY2Title),CustomLineId:H.call(this,G.DssGraphUserLine2),CustomLabelId:H.call(this,G.DssGraphUserLabel2)}));D.push(new E({LabelId:H.call(this,G.DssGraphY3Label),MajorId:H.call(this,G.DssGraphY3Major),MinorId:H.call(this,G.DssGraphY3Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY4Label),MajorId:H.call(this,G.DssGraphY4Major),MinorId:H.call(this,G.DssGraphY4Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphX2Label),MajorId:H.call(this,G.DssGraphX2Major),MinorId:H.call(this,G.DssGraphX2Minor),TitleId:H.call(this,G.DssGraphX2Title),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,G.DssGraphUserLabel4)}));}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var C=Math,I=mstrmojo.dom,K=mstrmojo.css,E="active",L="ready",J=6,F=10,O=10,P={LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",BUTTON:"button"};mstrmojo.util.ui.LassoSelectorParamsType=null;function Q(S,R,T){return function(U){S.call(mstrmojo.all[R],U,T);};}function M(S){var U=S.view,T=I.eventTarget(window,S),R=this.lassoSelector;if(this.clickFromLassoResizer||(T!==R&&this.clickFromCreatingLasso)){I.stopPropogation(U,S);I.preventDefault(U,S);}delete this.clickFromLassoResizer;delete this.clickFromCreatingLasso;}function D(b,U){var R,d,S,Z,a=b.clientX,Y=b.clientY,T=this.lassoSelector,X=U.startX,W=U.startY,V=U.containerPos,e=a-V.x,c=Y-V.y;e=C.min(e,U.maxX);e=C.max(e,U.minX);c=C.min(c,U.maxY);c=C.max(c,U.minY);R=C.abs(e-X);d=C.abs(c-W);Z=C.min(W,c);S=C.min(X,e);T.style.width=R+"px";T.style.height=d+"px";T.style.left=S+"px";T.style.top=Z+"px";U.width=R;U.height=d;U.left=S;U.top=Z;if(R<=O&&d<=O){T.style.visibility="hidden";K.removeClass(T,E);}else{T.style.visibility="visible";K.addClass(T,E);document.body.style.cursor="crosshair";}}function H(T,W){var V=window.document,S=this.lassoSelector,U=W.width,R=W.height;I.detachEvent(V,"mousemove",W.fnMove);I.detachEvent(V,"mouseup",W.fnUp);delete W.fnMove;delete W.fnUp;document.body.style.cursor="default";if(!U||U===0||!R||R===0){this.dismissLassoSelector();}else{W.ctrlKey=T.ctrlKey;this.lassoSelected(W);this.clickFromCreatingLasso=true;K.addClass(S,L);this.positionBoxResizers();}}function N(g){var Z,c=g.view,b,a,d=I.eventTarget(window,g),R=d.getAttribute("type"),V=this.lassoSelector,S=this.lassoContainer,h=this.excludeAttrArr,U=h.length,Y,X={};delete this.clickFromLassoResizer;delete this.clickFromCreatingLasso;if(!V||!S||!this.lassoSelectorEnabled){return ;}if(I.contains(this.dropDownBtn,d,true)){return ;}for(Z=0;Z<U;Z++){if(R===h[Z]){return ;}}this.lassoSelecting();Y=I.position(S);b=g.clientX-Y.x;a=g.clientY-Y.y;X.containerPos=Y;X.maxX=Y.w;X.maxY=Y.h;X.startX=b;X.startY=a;X.minX=0;X.minY=0;X.info=this.getLassoSelectionInfo(d);X.useAsSelectorOrBrushes=this.useAsSelectorOrBrushes||((this.hasAssociatedNodes&&this.hasAssociatedNodes())||this.selectorControl);V.style.visibility="hidden";V.style.left=b+"px";V.style.top=a+"px";V.style.width="0px";V.style.height="0px";K.removeClass(V,L);S.appendChild(V);var T=this.id,e=document,W=Q(D,T,X),f=Q(H,T,X);I.attachEvent(e,"mousemove",W);I.attachEvent(e,"mouseup",f);X.fnMove=W;X.fnUp=f;I.stopPropogation(c,g);I.preventDefault(c,g);}function G(a,U){var Y=U.index,X=U.startX,W=U.startY,V=U.containerPos,f=a.clientX-V.x,e=a.clientY-V.y,T=this.lassoSelector;f=C.min(f,U.maxX);f=C.max(f,U.minX);e=C.min(e,U.maxY);e=C.max(e,U.minY);var d=f-X,c=e-W;if(Y%3===1){d=0;}if(Y===3||Y===5){c=0;}var R=U.selWidth,b=U.selHeight,S=U.selLeft,Z=U.selTop;if(d!==0){if(Y%3===0){S+=d;R-=d;}else{R+=d;}}if(c!==0){if(Y<3){Z+=c;b-=c;}else{b+=c;}}T.style.width=R+"px";T.style.left=S+"px";T.style.top=Z+"px";T.style.height=b+"px";U.width=R;U.left=S;U.height=b;U.top=Z;this.positionBoxResizers();}function B(R,U){var T=R.view,S=window.document;I.detachEvent(S,"mousemove",U.fnMove);I.detachEvent(S,"mouseup",U.fnUp);delete U.fnMove;delete U.fnUp;this.clickFromLassoResizer=true;I.stopPropogation(T,R);I.preventDefault(T,R);this.lassoSelectorResized(U);}function A(V){var T=V.view,h=I.eventTarget(window,V),U=parseInt(h.getAttribute("index"),10),a=this.lassoSelector,Z=a.offsetLeft,k=a.offsetTop,Y=Z+a.offsetWidth,g=k+a.offsetHeight,R=I.position(this.lassoContainer),f=0,c=0,d=R.w,b=R.h,e={};if(U%3===0){d=Y-F;}if(U%3===2){f=Z+F;}if(U<3){b=g-F;}if(U>=6){c=k+F;}e.minX=f;e.minY=c;e.maxX=d;e.maxY=b;e.startX=V.clientX-R.x;e.startY=V.clientY-R.y;e.index=U;e.containerPos=R;e.selWidth=a.clientWidth;e.selHeight=a.clientHeight;e.selLeft=a.offsetLeft;e.selTop=a.offsetTop;var X=this.id,j=document,S=Q(G,X,e),W=Q(B,X,e);I.attachEvent(j,"mousemove",S);I.attachEvent(j,"mouseup",W);e.fnMove=S;e.fnUp=W;I.stopPropogation(T,V);I.preventDefault(T,V);}mstrmojo.util.ui._LassoSelector=mstrmojo.provide("mstrmojo.util.ui._LassoSelector",{_mixinName:"mstrmojo.util.ui._LassoSelector",lassoContainer:undefined,lassoSelector:undefined,lassoSelectorEnabled:true,excludeAttrArr:null,boxResizers:null,useDropDownBtn:false,dropDownBtn:undefined,init:function(R){if(this._super){this._super(R);}this.excludeAttrArr=[];this.boxResizers=[];},registerLassoSelector:function(S,V,U){V=V||[];V.push(P.LASSO_SELECTOR);V.push(P.LASSO_RESIZER);V.push(P.BUTTON);this.lassoContainer=S;this.excludeAttrArr=V;this.useDropDownBtn=U||false;I.attachEvent(S,"mousedown",Q(N,this.id));I.attachEvent(S,"click",Q(M,this.id));var R=this.lassoSelector;if(!R){R=this.createLassoSelector();this.lassoSelector=R;}var T=R.parentNode;if(T){T.removeChild(R);}},createLassoSelector:function(){var U,V,S,T=this.boxResizers,R=document.createElement("div");R.setAttribute("class","lasso-selector");R.setAttribute("type",P.LASSO_SELECTOR);R.setAttribute("draggable",false);R.draggable=false;for(U=0;U<9;U++){if(U!==4){V=document.createElement("div");V.setAttribute("class","lasso-selector-resizer");V.setAttribute("type",P.LASSO_RESIZER);V.setAttribute("index",String(U));V.setAttribute("draggable",false);V.draggable=false;R.appendChild(V);T[U]=V;I.attachEvent(V,"mousedown",Q(A,this.id));}}K.addClass(T[0],["top","left"]);K.addClass(T[1],["top"]);K.addClass(T[2],["top","right"]);K.addClass(T[3],["left"]);K.addClass(T[5],["right"]);K.addClass(T[6],["bottom","left"]);K.addClass(T[7],["bottom"]);K.addClass(T[8],["bottom","right"]);if(this.useDropDownBtn===true){S=document.createElement("div");S.setAttribute("type",P.BUTTON);S.setAttribute("class","lasso-selector-dropdown-button");R.appendChild(S);I.attachEvent(S,"click",Q(this.lassoButtonClicked,this.id));this.dropDownBtn=S;}return R;},positionBoxResizers:function(){var T=this.boxResizers,S=this.lassoSelector,U=S.clientWidth,R=S.clientHeight,W=(U-J)>>1,V=(R-J)>>1;T[1].style.left=W+"px";T[3].style.top=V+"px";T[5].style.top=V+"px";T[7].style.left=W+"px";},dismissLassoSelector:function(){var R=this.lassoSelector;if(R){K.removeClass(R,[E,L]);if(R.parentNode){R.parentNode.removeChild(R);}}},isLassoSelectorActive:function(){function S(V,U){var W=V.className.split(/\s+/),T;for(T=0;T<W.length;T++){if(W[T]===U){return true;}}return false;}var R=this.lassoSelector;if(R){return S(R,E);}return false;},getLassoSelectionInfo:mstrmojo.emptyFn,lassoSelected:mstrmojo.emptyFn,lassoSelecting:mstrmojo.emptyFn,lassoButtonClicked:mstrmojo.emptyFn,lassoSelectorResized:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","RGBColor","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillBevelEffect","EnumDSSGraphGradientType","EnumDSSGraphPictureScaleType","EnumDSSGraphPictureFormat");var Q=mstrmojo.chart,I=Q.enums,W=I.EnumFillType,N=mstrmojo.chart.model,J=N.enums,Y=J.EnumDSSGraphGradientType,d=J.EnumDSSGraphPictureScaleType,n=J.EnumDSSGraphPictureFormat,S=J.EnumDSSGraphFillBevelEffect;var A=0,L=1,P=2,h=3,B=4,X=5;var D=Q.gWhite.ToInteger(),a=Q.gBlack.ToInteger();var M=["mFillType","mAlpha","mSimpleColor","mDarkerFactor"],c=[W.FT_SIMPLE,255,1],k=["startGraphColor","endGraphColor","angle","horizontalOffset","verticalOffset","gradientType","endAlpha","intermediateColors","style"],F=[null,null,0,50,50,Y.DssGraphGradientCircular,0,null,0],e=["fillFlip","scaleType","pictureFormat","nameLength","pictureFilePtr","tripleId"],f=[A,d.DssGraphPictureScaleNone,n.DssGraphPicturePNG,0,null,null],j=["type","depth","lightAngle","intensity"],U=[S.DssGraphFillBevelNone,0,270,10];var K=false;mstrmojo.chart.FormatFill=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFill",mFillType:W.FT_SIMPLE,mAlpha:255,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillPicture:null,mFillBevel:null,mDarkerFactor:1,init:function g(q){var p,o=M.length;this._super(q);if(q&&q.Bare){for(p=0;p<o;++p){this[M[p]]=null;}}else{if(q&&q.SimpleColor!==undefined){this.mSimpleColor=q.SimpleColor;}else{this.mSimpleColor=D;}if(q&&q.Alpha!==undefined){this.mAlpha=q.Alpha;}else{this.mAlpha=255;}}if(K){this.mFillPattern={foregroundColor:D,backgroundColor:a,patternId:28};this.mFillPicture={fillFlip:A,scaleType:d.DssGraphPictureScaleNone,pictureFormat:n.DssGraphPicturePNG,nameLength:0,pictureFilePtr:null,tripleId:null};this.mFillBevel={type:S.DssGraphFillBevelNone,depth:0,lightAngle:270,intensity:10};}},transformToGradient:function E(o){var p=new Q.FormatFill({SimpleColor:this.SimpleColor,Alpha:this.mAlpha});p.mFillType=W.FT_GRADIENT;var q=p.getGradient();q.startGraphColor=o.StartGraphColor;q.endGraphColor=o.EndGraphColor;q.angle=o.Angle;q.gradientType=Y.DssGraphGradientLinear;q.endAlpha=o.EndAlpha;q.style=o.Style;q.intermediateColors=o.Colors.slice(0);return p;},getGradient:function H(){if(this.mFillGradient===null){this.mFillGradient={startGraphColor:a,endGraphColor:D,angle:0,horizontalOffset:50,verticalOffset:50,gradientType:Y.DssGraphGradientCircular,endAlpha:0,intermediateColors:[],style:0};}return this.mFillGradient;},FillSimple:function R(o){o.FillSimple(this,this.mDarkerFactor,this.mSimpleColor,false);},FillGradient:function b(p,o){return p.FillGradient(this,o,this.mDarkerFactor);},EnhancedSeriesEffect:function T(t,r,o,p,s){this.mAlpha=t;if(K){var q=this.mFillBevel;q.type=r;q.depth=o;q.lightAngle=p;q.intensity=s;}},FillEdgeType:function C(p,o){p.FillEdgeType(this,o);},FillDonutOrSphere:function O(q,o,p){q.FillDonutOrSphere(this,o,p);},MakeDarker:function V(o){this.mDarkerFactor=o;},RestoreColor:function l(){this.mDarkerFactor=1;},supportAdvancedFill:function G(o){return K;},restoreDefaults:function Z(u){var p,q,s,t,r,o;if(u){o=M.length;for(p=0;p<o;++p){this[M[p]]=c[p];}this.mSimpleColor=D;t=this.mFillGradient={};o=t.length;for(p=0;p<o;++p){t[k[p]]=F[p];}t.startGraphColor=a;t.endGraphColor=D;if(K){this.mFillPattern={foregroundColor:D,backgroundColor:a,patternId:28};q=this.mFillBevel={};o=j.length;for(p=0;p<o;++p){q[j[p]]=U[p];}s=this.mFillPicture={};o=e.length;for(p=0;p<o;++p){s[e[p]]=f[p];}}}else{o=M.length;for(p=0;p<o;++p){if(this[M[p]]===null){this[M[p]]=c[p];}}if(this.mSimpleColor===null){this.mSimpleColor=D;}if(this.mFillType===0){return ;}if(this.mFillGradient===null){this.mFillGradient={};}t=this.mFillGradient;o=k.length;for(p=0;p<o;++p){if(t[k[p]]===null||t[k[p]]===undefined){t[k[p]]=F[p];}}if(t.startGraphColor===null||t.startGraphColor===undefined){t.startGraphColor=a;}if(t.endGraphColor===null||t.endGraphColor===undefined){t.endGraphColor=D;}if(K){if(this.mFillPattern===null){this.mFillPattern={};}r=this.mFillPattern;if(r.foregroundColor===undefined||r.foregroundColor===null){r.foregroundColor=D;}if(r.backgroundColor===undefined||r.backgroundColor===null){r.backgroundColor=a;}if(r.patternId===undefined||r.patternId===null){r.patternId=28;}if(this.mFillBevel===null){this.mFillBevel={};}q=this.mFillBevel;o=j.length;for(p=0;p<o;++p){if(q[j[p]]===null){q[j[p]]=U[p];}}if(this.mFillPicture===null){this.mFillPicture={};}s=this.mFillPicture;o=e.length;for(p=0;p<o;++p){s[e[p]]=f[p];}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Vector2D","Point2D","RGBColor","ChartConstants");var J=mstrmojo.chart,F=J.ChartConstants,B=mstrmojo.chart.model,C=B.enums;mstrmojo.chart.CEModuleMain=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CEModuleMain",mTolerance:0.01,mDefaultGraphWidth:700,mDefaultGraphHeight:400,mRiserCountLimit:32767,mpController:null,mGlowWidth:10,mColorParser:null,mGraphObjectMap:null,DegreeToRadian:function G(O){return O*F.kPI/180;},GetColorParser:function I(){if(this.mColorParser===null){this.mColorParser=new J.RGBColor();}return this.mColorParser;},GetGraphObjectMap:function A(){if(this.mGraphObjectMap===null){this.mGraphObjectMap=new J.common.MapStructure();}return this.mGraphObjectMap;},ResetGraphObjectMap:function K(){if(this.mGraphObjectMap){this.mGraphObjectMap.clear();}},RadianToDegree:function E(O){return(O*180/F.kPI+(O>=0?0.5:-0.5));},setController:function D(O){this.mpController=O;},GetLocalizedValue:function N(){},ShiftPolygonBy:function M(Q,R){if(R<=0){return Q;}var S,O,P=Q.length;R%=P;if(P<=1){return Q;}S=Q.slice(R,Q.length);O=Q.slice(0,R);return S.concat(O);},GetAngularBisectorIntersectionPoint:function L(O,Z,Y,S,T){var X=new J.Vector2D({x:O.x-Z.x,y:O.y-Z.y}),W=new J.Vector2D({x:Y.x-Z.x,y:Y.y-Z.y}),V=X.Length(),U=W.Length(),R=new J.Vector2D({x:X.x/V,y:X.y/V}),Q=new J.Vector2D({x:W.x/U,y:W.y/U}),P=0;if(Math.abs(R.x-Q.y)<this.mTolerance){P=S*(Q.x+R.x)/(R.y-Q.y);}else{P=S*(Q.y+R.y)/(Q.x-R.x);}T.x=Z.x+P*Q.x+S*(-Q.y);T.y=Z.y+P*Q.y+S*Q.x;},MakePolygonClockwise:function H(T){var Q=T.length,V=0,S,P,U,R,O;if(Q<3){return ;}for(S=1;S<Q;++S){if(T[S].x<T[V].x||(T[S].x<=T[V].x&&T[S].y<T[V].y)){V=S;}}P=(V+Q-1)%Q;U=new J.Vector2D({x:(T[P].x-T[V].x),y:(T[P].y-T[V].y)});P=(V+1)%Q;R=new J.Vector2D({x:(T[P].x-T[V].x),y:(T[P].y-T[V].y)});if(R.CrossProduct(U)<-this.mTolerance){for(S=0;S<Q/2;++S){O=T[S];T[S]=T[Q-S-1];T[Q-S-1]=O;}}}});J.gModuleMain=new J.CEModuleMain();}());(function(){mstrmojo.requiresCls("mstrmojo.chart.FormatBase","mstrmojo.chart.RGBColor","mstrmojo.chart.enums.EnumLineStyle");var E=mstrmojo.chart,J=E.enums,L=J.EnumLineStyle;E.gLinePatterns=[[1,0],[18,6],[3,3],[9,6,3,6],[9,3,3,3,3,3],[9,2],[3,8],[30,10],[10,10],[3,8,3,8,3,17],[12,8,12,8,3,8],[12,5,12,5,3,5,3,5],[25,10,10,10],[25,5,8,5,8,5],[35,10,25,10,10,10],[37,5,37,5,8,5,8,5]];var G=["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","mGradient"],I=[L.LS_SOLID,255,1,75,null,null];function M(){if(this.mGradient===null){this.mGradient={valid:false,angle:0,endAlpha:0,style:1,colors:[],range:{start:{x:0,y:0},end:{x:0,y:0}}};}}mstrmojo.chart.FormatLine=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatLine",mLineStyle:L.LS_SOLID,mAlpha:255,mLineThickness:1,mLineThicknessPt:75,mLineColor:0,mGradient:null,init:function K(Q){var O,N=G.length;this._super(Q);if(Q){if(Q.Line){var P=Q.Line;this.mLineStyle=P.LineStyle;this.mAlpha=P.Alpha;this.mLineThickness=P.LineThickness;this.mLineColor=P.LineColor;}else{if(Q.Bare){for(O=0;O<N;++O){this[G[O]]=null;}}else{this.mLineStyle=Q.LineStyle||L.LS_SOLID;this.mAlpha=Q.Alpha||255;this.mLineThickness=Q.LineThickness||1;this.mLineColor=Q.LineColor||0;}}}},getGradient:function C(){M.call(this);return this.mGradient;},transformToGradient:function B(N){var P=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var O=P.getGradient();O.valid=N.Valid;O.angle=N.Angle;O.endAlpha=N.EndAlpha;O.style=N.Style;O.colors=N.Colors.slice(0);O.range={start:{x:N.Start.x,y:N.Start.y},end:{x:N.End.x,y:N.End.y}};O.strokePatten=this.mLineStyle;return P;},transformToGradientFromFill:function D(N,O,Q){var R=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var P=R.getGradient();P.valid=true;P.angle=N.angle;P.endAlpha=N.endAlpha;P.style=N.style;P.colors=[];P.colors=N.intermediateColors.slice(0);P.colors.push({Color:N.endGraphColor,Step:1});P.colors.splice(0,0,{Color:N.startGraphColor,Step:0});P.range={start:{x:O.x,y:O.y},end:{x:Q.x,y:Q.y}};return R;},ApplyLineFormat:function A(N){N.ApplyLineFormat(this);},getLinePattern:function H(N){return E.gLinePatterns[N];},restoreDefaults:function F(O){var N;if(O){for(N=0;N<G.length;++N){this[G[N]]=I[N];}}else{for(N=0;N<G.length;++N){if(this[G[N]]===null){this[G[N]]=I[N];}}}if(this.mLineColor===null){this.mLineColor=E.gBlack.ToInteger();}}});mstrmojo.chart.FormatLine.getLinePattern=function H(N){return E.gLinePatterns[N];};E.gOutlineWhite=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:1,LineColor:E.gWhite.ToInteger()});E.gOutlineBlack=new E.FormatLine({LineStyle:L.LS_DASH,Alpha:255,LineThickness:2,LineColor:E.gBlack.ToInteger()});E.gLeaderLine=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:2,LineColor:E.gLeaderLineColor.ToInteger()});E.gStrokeForDarkBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForDarkBackground.ToInteger()});E.gStrokeForLightBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForLightBackground.ToInteger()});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D");var B=mstrmojo.chart,C=new B.Rect2D();mstrmojo.chart.GridDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridDataLabelInfo",mIsDisPlayed:false,mIsValid:false,mSeriesId:-3,mGroupId:-3,mXIndex:-1,mYIndex:-1,mHostMarkerBound:null,mLabelPtr:null,init:function D(E){this._super(E);this.mHostMarkerBound=C;},ToRectangle:function A(){return this.mLabelPtr.GetBoundingRect();}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.Widget","mstrmojo.ui._HasScroller");var A=mstrmojo,D=A.dom,B=A.css;mstrmojo.gm.GMScroll=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.gm.GMScroll",cssClass:undefined,bodyClass:undefined,view:undefined,direction:undefined,markupString:'<div id="{@id}" class="gm-scrollbar"><div class="{@cssClass}"><div class="{@bodyClass}"></div></div></div>',markupSlots:{domContainer:function(){return this.domNode.firstChild;},domBody:function(){return this.domNode.firstChild.firstChild;}},init:function(F){this._super(F);},addScrollListener:function(){if(this.useNativeScrollBar()){D.attachMarkupEvent(this.id,this.domContainer,"scroll");}},setupScrollNodes:function(){this.scrollNode=this.domContainer;},onscroll:function C(){this.view.updateChartsPosition(this.direction,this.getCurrentPosition());this._super();},toggleHoverState:function(F){B.toggleClass(this.domNode,"hover",F);},updateScrollPosition:function(G){var F=this.domContainer;if(this.direction==="v"){if(F.scrollTop===G){return ;}F.scrollTop=G;}else{if(F.scrollLeft===G){return ;}F.scrollLeft=G;}},updateScrollbars:function E(){var G=this.domNode.style,F;this._super();if(this.scrollNode){F=this.scrollNode.style;if(this.direction==="v"){if(F.overflowY==="scroll"){G.display="block";}else{G.display="none";}}else{if(F.overflowX==="scroll"){G.display="block";}else{G.display="none";}}}},getCurrentPosition:function(){var F=this.domContainer;if(this.direction==="v"){return F.scrollTop;}return F.scrollLeft;},useNativeScrollBar:function(){return !this.hasCustomScrollbar;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var D=mstrmojo.dom;mstrmojo.gm.DndReplaceNode=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.gm.DndReplaceNode",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;z-index:{@zIndex};position:absolute;"></div>',markupSlots:{nodesContainer:function(){return this.domNode;}},toggle:function A(E){if(E){this.nodesContainer.style.display="block";}else{this.nodesContainer.style.display="none";}},getBoundaryPosForAllNodes:function B(){var H,E=this.nodesContainer,K=E.children,I=K.length;if(I<1){return{x:0,y:0,w:0,h:0};}var F=D.position(K[0]),J=F.x+F.w,M=F.y+F.h;if(I===1){return F;}for(H=1;H<I;H++){var L=K[H],G=D.position(L);J=Math.max(J,G.x+G.w);M=Math.max(M,G.y+G.h);F.x=Math.min(F.x,G.x);F.y=Math.min(F.y,G.y);}F.w=J-F.x;F.h=M-F.y;return F;},updateNodes:function C(S,H,N){var L=this.nodesContainer,U,T,V,J,P,M,E=function(a,Z,X,W){var Y=a.style;if(X&&W){if(T.svgNodePos){X=X+T.svgNodePos.x-J;W=W+T.svgNodePos.y-P;}Y.transformOrigin=X+"px "+W+"px";Y.msTransformOrigin=X+"px "+W+"px";Y.webkitTransformOrigin=X+"px "+W+"px";}Y.transform="rotate("+Z+"deg)";Y.msTransform="rotate("+Z+"deg)";Y.webkitTransform="rotate("+Z+"deg)";};L.innerHTML="";if(!S){return ;}this.toggle(true);for(U=0;U<S.length;U++){T=S[U];M=T.nodePos;if(T.clonedNode){V=T.clonedNode;}else{V=document.createElement("div");V.innerHTML=T.nodeContent;}L.appendChild(V);if(T.isMultipleTspan){M.w=V.offsetWidth;M.h=V.offsetHeight;}V.classList.add(this.nodeCss);if(N){V.classList.add(N);}J=Math.round(M.x-Math.ceil((V.offsetWidth-M.w)/2));P=Math.round(M.y-Math.ceil((V.offsetHeight-M.h)/2));V.style.left=(J-H.x)+"px";V.style.top=(P-H.y)+"px";var O=T.transform;if(O){var K=O.indexOf("("),I=O.indexOf(")");if(K>=0&&I>=0){var F=O.substring(K+1,I).split(" "),G=parseInt(F[0],10),R,Q;if(F.length===3){R=parseInt(F[1],10);Q=parseInt(F[2],10);}E(V,G,R,Q);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget");var A=Math,E=mstrmojo.dom,G=mstrmojo.css,B=1,I=0;function F(L,N){if(isNaN(L[0])){console.log("Invalid input to function doHitTest.");return 0;}if(isNaN(N)){console.log("Invalid input to function doHitTest.");}N=N||0;var K,O,M,P=L.length;if(P<1||N<=L[0]){return 0;}if(N>L[P-1]){return P-1;}O=0;M=P-1;while(M-O>1){K=O+((M-O)>>1);if(L[K]===N){return K;}if(L[K]<N){O=K;}else{if(L[K]>N){M=K;}}}return M;}function C(L){var K=parseFloat(L);if(isNaN(K)){K=0;}return Math.floor(K+0.5);}function H(P,X){var M=P.x,V=P.y,K=M+P.w,T=V+P.h,R=X.x,O=X.y,Q=R+X.w,N=O+X.h;if(M>=Q||V>=N||K<=R||T<=O){return{flag:0};}if(M<=R&&V<=O&&K>=Q&&T>=N){return{flag:2};}var U=Math.max(M-R,0),S=Math.max(V-O,0),L=Math.min(K-R,X.w)-U,W=Math.min(T-O,X.h)-S;return{flag:1,x:U,y:S,width:L,height:W};}function D(K,N){var L,M=K.length;for(L=0;L<M;L++){if(K[L].id===N){return L;}}return -1;}mstrmojo.WidgetMatrix=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WidgetMatrix",left:0,top:0,width:100,height:100,phCss:"",nRows:1,nCols:1,chartW:100,chartH:100,fixWidth:false,fixHeight:false,depth:undefined,origin:undefined,offset:undefined,hArr:undefined,hAccArr:undefined,wArr:undefined,wAccArr:undefined,domHSBar:undefined,domVSBar:undefined,domHSBarBody:undefined,domVSBarBody:undefined,chartsPool:undefined,activeCharts:undefined,activeFlags:undefined,API:undefined,APIOwner:undefined,contentSummary:undefined,markupString:'<div class="{@cssClass}" style="position:absolute; left:{@left}px; top:{@top}px; width:{@width}px; height:{@height}px;"><div style="position:absolute; left:0px; bottom:0px; width:100%; height:100%; overflow:hidden"><div class="canvas" style="position:absolute; width:{@canvasW}px; height:{@canvasH}px"></div></div><span style="visibility:hidden"></span></div>',markupSlots:{domContainer:function(){return this.domNode.firstChild;},domCanvas:function(){return this.domNode.firstChild.firstChild;},domSpan:function(){return this.domNode.lastChild;}},init:function J(K){this.origin={x:0,y:0};this.offset={x:{s:0,e:0},y:{s:0,e:0}};this.hArr=[];this.hAccArr=[];this.wArr=[];this.wAccArr=[];this.chartsPool=[];this.activeCharts=[];this.activeFlags=[];this.contentSummary=null;this.canvasScrolled=K&&K.canvasScrolled;this.API={handleDroppedChart:undefined,getChartWidth:undefined,getChartHeight:undefined,createUnitChart:undefined,updateUnitChart:undefined,getRowSpan:function(M){return[M,M];},getColSpan:function(M){return[M,M];}};var L=K.placeholder;if(L!==undefined){this.cssClass=L.getAttribute("class");if(!this.cssClass){this.cssClass="";}if(K.hasOwnProperty("width")===false){K.width=C(L.style.width);}if(K.hasOwnProperty("height")===false){K.height=C(L.style.height);}if(K.hasOwnProperty("left")===false){K.left=C(L.style.left);}if(K.hasOwnProperty("top")===false){K.top=C(L.style.top);}}if(this._super){this._super(K);}},preBuildRendering:function(){this.resetGrid();},postBuildRendering:function(){if(this._super){this._super();}var L=this.domSpan,K;L.setAttribute("class",this.phCss);K=G.getComputedStyle(L);this.borderL=C(K.borderLeftWidth);this.borderR=C(K.borderRightWidth);this.borderT=C(K.borderTopWidth);this.borderB=C(K.borderBottomWidth);this.borderH=this.borderL+this.borderR;this.borderV=this.borderT+this.borderB;},highlightText:function(K){if(K){G.addClass(this.domNode,"highlight-label");}else{G.removeClass(this.domNode,"highlight-label");}},clearCharts:function(){this.chartsPool=[];this.activeCharts=[];this.activeFlags=[];if(this.domCanvas){this.domCanvas.innerHTML="";}},getChart:function(M,K){var L=this.chartsPool;return L[M]&&L[M][K];},addChart:function(M,K,N){var L=this.chartsPool;L[M]=L[M]||[];L[M][K]=N;},getActiveFlag:function(M,L){var K=this.activeFlags;return !!(K[M]&&K[M][L]);},setActiveFlag:function(N,M,K){var L=this.activeFlags;L[N]=L[N]||[];L[N][M]=K;},filterChartsByRow:function(Q,P){var R,M,O,L,W,N=false,U=this.nRows,T=this.contentSummary,V=T.unit,K=T.elements,S=[];for(L in Q){if(Q.hasOwnProperty(L)){W=Q[L];if(L===V){for(R=0;R<U;R++){if(D(W,K[R])!==-1){if(N){O++;}else{M=O=R;N=true;}}else{if(N){S.push({start:M,end:O,depth:P,byRow:true,att:V,elements:W});N=false;}}}if(N){S.push({start:M,end:O,depth:P,byRow:true,att:V,elements:W});}return S;}return null;}}return null;},filterChartsByCol:function(Q,P){var R,M,O,N=false,S=this.nCols,L,W,U=this.contentSummary,V=U.unit,K=U.elements,T=[];for(L in Q){if(Q.hasOwnProperty(L)){W=Q[L];if(L===V){for(R=0;R<S;R++){if(D(W,K[R])!==-1){if(N){O++;}else{M=O=R;N=true;}}else{if(N){T.push({start:M,end:O,depth:P,byRow:false});N=false;}}}if(N){T.push({start:M,end:O,depth:P,byRow:false});}return T;}return null;}}return null;},filterRelevantDimension:function(R,P){var O=this.contentSummary,Q=O.unit;if(!P.hasOwnProperty(Q)){return R;}var M,T,N=[],L=R.length,S=P[Q],K=O.elements;for(M=0;M<L;M++){T=R[M];if(D(S,K[T])!==-1){N.push(T);}}return N;},filterRelevantRows:function(L,K){return this.filterRelevantDimension(L,K);},filterRelevantCols:function(L,K){return this.filterRelevantDimension(L,K);},resize:function(L,K){this.width+=L;this.height+=K;this.offset.x.e=A.max(this.domCanvas.clientWidth-this.width,0);this.offset.y.e=A.max(this.domCanvas.clientHeight-this.height,0);this.domNode.style.width=this.width+"px";this.domNode.style.height=this.height+"px";if(this.fixHeight&&this.nRows===1){this.chartH+=K;}if(this.fixWidth&&this.nCols===1){this.chartW+=L;}},resizeAbs:function(K,M){var L=K-this.width,N=M-this.height;this.width=K;this.height=M;this.offset.x.e=A.max(this.domCanvas.clientWidth-K,0);this.offset.y.e=A.max(this.domCanvas.clientHeight-M,0);this.domNode.style.width=K+"px";this.domNode.style.height=M+"px";if(this.fixHeight&&this.nRows===1){this.resizeRow([0],[N]);this.doUpdateChartsGlobally();this.chartH=M;}if(this.fixWidth&&this.nCols===1){this.resizeCol([0],[L]);this.doUpdateChartsGlobally();this.chartW=K;}},setRowHeight:function(K,L){this.hArr[K]=L;return this.updateAccHeight(K,K);},setColWidth:function(L,K){this.wArr[L]=K;return this.updateAccWidth(L,L);},resizeRow:function(P,O,N){var M,L,K;for(M=0;M<P.length;M+=1){L=P[M];K=O[M];this.setRowHeight(L,this.getRowHeight(L)+K);}if(O[0]!==0){this.updateCanvas(0,O[0]*N);}},resizeCol:function(P,O,N){var M,L,K;for(M=0;M<P.length;M+=1){L=P[M];K=O[M];this.setColWidth(L,this.getColWidth(L)+K);}if(O[0]!==0){this.updateCanvas(O[0]*N,0);}},toggleClsByRows:function(Q,R,L,K){var N,M,P,O=this.nCols;for(N=Q;N<=R;N++){for(M=0;M<O;M++){P=this.getChart(N,M);if(P){if(L){G.addClass(P,K);}else{G.removeClass(P,K);}}}}},toggleClsByCols:function(R,K,M,L){var P,N,Q,O=this.nRows;for(N=R;N<=K;N++){for(P=0;P<O;P++){Q=this.getChart(P,N);if(Q){if(M){G.addClass(Q,L);}else{G.removeClass(Q,L);}}}}},scrollTo:function(K,P,L){var O,M,N=this.origin;if(K===undefined){K=N.x;}if(P===undefined){P=N.y;}if(K===N.x&&P===N.y){return ;}N.x=K;N.y=P;if(!this.canvasScrolled){this.domCanvas.style[E.CSS3_TRANSFORM]=E.createTranslateString(-K,-P,0);}if(L){O=this.domHSBar;M=this.domVSBar;if(O){O.scrollLeft=K;}if(M){M.scrollTop=P;}}},adjustOriginIfNeeded:function(){var R,O,L=this.origin,N=this.offset,Q=L.x,M=L.y,K=N.x,P=N.y;if(Q<K.s||Q>K.e){R=K.s;}if(M<P.s||M>P.e){O=P.s;}this.scrollTo(R,O,true);},createMiniChart:function(S,P,T,M,U,L,R,N,Q){var O=U,K=L;if(this.depth){if(this.depthOnRow){O=this.depth;}else{K=this.depth;}}S-=this.borderH;P-=this.borderV;if(this.API.createUnitChart!==undefined){if(this.APIOwner){return this.API.createUnitChart.call(this.APIOwner,S,P,T,M,O,K,R,N,this.phCss,this.isPrimary,Q);}return this.API.createUnitChart(S,P,T,M,O,K,R,N,this.phCss,this.isPrimary,Q);}return this.createMiniPH(S,P,T,M,O,K,R,N,this.phCss);},createMiniPH:function(R,O,S,M,T,L,Q,N,P){var K=document.createElement("div");K.setAttribute("row",T);K.setAttribute("col",L);K.setAttribute("class",P);K.setAttribute("rowSpan",Q);K.setAttribute("colSpan",N);K.style.width=R+"px";K.style.height=O+"px";K.style.top=S+"px";K.style.left=M+"px";return K;},updateMiniChart:function(P,L,N,M,K,O){if(L){L-=this.borderH;}if(N){N-=this.borderV;}if(this.API.updateUnitChart!==undefined){if(this.APIOwner){this.API.updateUnitChart.call(this.APIOwner,P,L,N,M,K,this.isPrimary,O);}else{this.API.updateUnitChart(P,L,N,M,K,this.isPrimary,O);}}else{if(L){P.style.width=L+"px";}if(N){P.style.height=N+"px";}if(M){P.style.top=M+"px";}if(K){P.style.left=K+"px";}}},shiftCharts:function(M,L){if(M===0&&L===0){return ;}var N,P,O=this.activeCharts,K=O.length;for(N=0;N<K;N+=1){P=O[N];if(M!==0){P.style.left=P.offsetLeft+M+"px";}if(L!==0){P.style.top=P.offsetTop+L+"px";}}},updateCanvas:function(e,c,L,j){var Z=this.domCanvas,S=Z.offsetWidth,Y=Z.offsetHeight,b=S+e,O=Y+c,M=this.domHSBarBody,W=this.domVSBarBody,P=this.offset,g=this.origin,a=g.x,X=g.y,Q=P.x.e,T=P.y.e,R=a===Q,d=X===T,f=a===0,N=X===0,V=function(){if(e===0){return ;}if(M){M.style.width=b-B+"px";}Z.style.width=b+"px";P.x.e=A.max(Q+e,0);},K=function(){if(c===0){return ;}if(W){W.style.height=O-B+"px";}Z.style.height=O+"px";P.y.e=A.max(T+c,0);},U=function(){if(L===true){a+=e;}if(j===true){X+=c;}if((a>P.x.e)){a=P.x.e;}if((X>P.y.e)){X=P.y.e;}};this.canvasW=b;this.canvasH=O;V();K();U();this.scrollTo(a,X,true);},calculateBBox:function(){var L=this.origin.x,N=this.origin.y,K=this.width,M=this.height;this._x1=L-K*I;this._x2=L+K*(I+1);this._y1=N-M*I;this._y2=N+M*(I+1);},calculateMatrixBBox:function(){var L,N,R,K,P,M,O=this.activeCharts,Q=O.length;this._minRow=this.nRows;this._maxRow=-1;this._minCol=this.nCols;this._maxCol=-1;for(L=0;L<Q;L+=1){M=O[L];N=parseInt(M.getAttribute("row"),10);R=parseInt(M.getAttribute("col"),10);K=this.API.getRowSpan(N,this.depth);P=this.API.getColSpan(R,this.depth);this._minRow=A.min(this._minRow,K[0]);this._maxRow=A.max(this._maxRow,K[1]);this._minCol=A.min(this._minCol,P[0]);this._maxCol=A.max(this._maxCol,P[1]);}},isRowInSight:function(K){this.calculateMatrixBBox();return K>=this._minRow&&K<=this._maxRow;},isColInSight:function(K){this.calculateMatrixBBox();return K>=this._minCol&&K<=this._maxCol;},detachDomCanvas:function(){this.domContainer.removeChild(this.domCanvas);},setupDomCanvas:function(){this.domContainer.appendChild(this.domCanvas);},handleDroppedChart:function(){this.calculateBBox();var P,R,Q,O,S,T,L,N,M=this.activeCharts,K=M.length;for(P=K-1;P>=0;P-=1){N=M[P];T=parseInt(N.getAttribute("row"),10);L=parseInt(N.getAttribute("col"),10);R=this.getColWidth(L);Q=this.getRowHeight(T);O=this.getColPosition(L);S=this.getRowPosition(T);if(S+Q<this._y1||S>this._y2||O+R<this._x1||O>this._x2){if(this.API.handleDroppedChart){if(this.APIOwner){this.API.handleDroppedChart.call(this.APIOwner,this.domCanvas,N);}else{this.API.handleDroppedChart(this.domCanvas,N);}}else{this.domCanvas.removeChild(N);M.splice(P,1);this.setActiveFlag(T,L,false);}}}},initAccHeight:function(){var L,M=this.nRows,K=this.manager.heightCache,N=this.hAccArr,O=N[M-1];N[0]=K[0];for(L=1;L<M;L++){N[L]=N[L-1]+K[L];}this.updateCanvas(0,N[M-1]-O);},initAccWidth:function(){var M,O=this.nCols,L=this.manager.widthCache,K=this.wAccArr,N=K[O-1];K[0]=L[0];for(M=1;M<O;M++){K[M]=K[M-1]+L[M];}this.updateCanvas(K[O-1]-N,0);},resetHGrid:function(){var K=this.nCols,L=this.chartW,O=this.domCanvas,N=L*K,M=function(S,R,Q,U,P){var T;if(P){for(T=0;T<Q;T+=1){S[T]=U;}}R[0]=U;for(T=1;T<Q;T+=1){R[T]=R[T-1]+U;}};this.canvasW=N;this.offset.x.e=A.max(this.canvasW-this.width,0);if(!this.wArr){this.wArr=[];}if(!this.wAccArr){this.wAccArr=[];}this.wArr.length=0;this.wArr.length=K;this.wAccArr.length=0;this.wAccArr.length=K;M(this.wArr,this.wAccArr,K,L,this.fixWidth);if(O){O.style.width=N+"px";}},resetVGrid:function(){var O=this.nRows,L=this.chartH,N=this.domCanvas,K=L*O,M=function(S,R,Q,U,P){var T;if(P){for(T=0;T<Q;T+=1){S[T]=U;}}R[0]=U;for(T=1;T<Q;T+=1){R[T]=R[T-1]+U;}};this.canvasH=K;this.offset.y.e=A.max(this.canvasH-this.height,0);if(!this.hArr){this.hArr=[];}if(!this.hAccArr){this.hAccArr=[];}this.hArr.length=0;this.hArr.length=O;this.hAccArr.length=0;this.hAccArr.length=O;M(this.hArr,this.hAccArr,O,L,this.fixHeight);if(N){N.style.height=K+"px";}},resetGrid:function(){this.resetHGrid();this.resetVGrid();this.clearActiveCharts();},updateGrid:function(){this.calculateBBox();if(this.activeCharts.length===0){var P=this.doRowIntersectionCheck(),M=this.doColIntersectionCheck();this.doUpdateGridXIYI(P.start,M.start);}else{this.calculateMatrixBBox();var L=this._minRow,K=this._maxRow,O=this._minCol,N=this._maxCol;this.doUpdateGridXIYI({rowStart:K+1,colStart:O});this.doUpdateGridXIYD({rowStart:K,colStart:N+1});this.doUpdateGridXDYD({rowStart:L-1,colStart:N});this.doUpdateGridXDYI({rowStart:L,colStart:O-1});}},updateCharts:function(){if(!this.shouldDrawShapeFlag){return ;}this.handleDroppedChart();var L=this.doRowIntersectionCheck(),K=this.doColIntersectionCheck();this.doUpdateCharts(L.start,L.end,K.start,K.end);},updateVLayout:function(L,K){this.origin.y=K;this.domCanvas.style.height=L+"px";this.domCanvas.style[E.CSS3_TRANSFORM]=E.createTranslateString(0,-K,0);},updateHLayout:function(K,L){this.origin.x=L;this.domCanvas.style.width=K+"px";this.domCanvas.style[E.CSS3_TRANSFORM]=E.createTranslateString(-L,0,0);},doUpdateCharts:function(L,P,Y,a,e){var Z,d,b,V,N,O,K,Q,U,S,R,f,X,W,g=this.origin,M={x:g.x,y:g.y,w:this.width,h:this.height},T={};if(e===undefined){e=false;}for(Z=L;Z<=P;Z+=1){b=this.API.getRowSpan(Z,this.depth);N=b[0];K=b[1]-b[0]+1;S=this.getRowPosition(N);f=this.getRowHeight(b);if(f<=0){continue;}T.y=S;T.h=f-this.borderV;for(d=Y;d<=a;d+=1){V=this.API.getColSpan(d,this.depth);O=V[0];Q=V[1]-V[0]+1;U=this.getColPosition(O);R=this.getColWidth(V);T.x=U;T.w=R-this.borderH;W=H(M,T);if(W.flag!==0){X=this.getChart(N,O);if(!X&&!e){X=this.createMiniChart(R,f,S,U,N,O,K,Q,W);this.addChart(N,O,X);}else{if(X){this.updateMiniChart(X,R,f,S,U,W);}}if(X){if(this.getActiveFlag(N,O)===false){this.domCanvas.appendChild(X);this.activeCharts.push(X);this.setActiveFlag(N,O,true);}}}d+=V[1]-d;}Z+=b[1]-Z;}},doUpdateChartsGlobally:function(){if(!this.shouldDrawShapeFlag){return ;}this.handleDroppedChart();var L=this.doRowIntersectionCheck(),K=this.doColIntersectionCheck();this.doUpdateCharts(L.start,L.end,K.start,K.end);},updateActiveCharts:function(){var Q,K,L,Y,V,P,Z,N,T,S,O=this.activeCharts,M=O.length,W=this.origin,U,R={x:W.x,y:W.y,w:this.width,h:this.height},X={};for(Q=0;Q<M;Q++){K=O[Q];Z=parseInt(K.getAttribute("row"),10);N=parseInt(K.getAttribute("col"),10);T=this.API.getRowSpan(Z,this.depth);S=this.API.getColSpan(N,this.depth);V=this.getRowPosition(Z);P=this.getColPosition(N);Y=this.getRowHeight(T);L=this.getColWidth(S);X.y=V;X.x=P;X.h=Y-this.borderV;X.w=L-this.borderH;U=H(R,X);this.updateMiniChart(K,L,Y,V,P,U);}},clearActiveCharts:function(){var M,Q,O,L,K=this.domCanvas,N=this.activeCharts,P=N.length;for(M=0;M<P;M++){Q=N[M];O=parseInt(Q.getAttribute("row"),10);L=parseInt(Q.getAttribute("col"),10);this.setActiveFlag(O,L,false);K.removeChild(Q);}N.length=0;},doUpdateGridXIYI:function(X){var S,P,K=this.nRows,L=this.nCols,Q=this.hArr,U=this.wArr,M=X.rowStart||0,R=X.colStart||0,V=X.rowEnd||K-1,Z=X.colEnd||L-1;if(M>V||R>Z){return ;}var Y=this.getColPosition(R),W=this.getRowPosition(M),T=false;for(S=M;S<=V;S+=1){if(W>this._y2){break;}if(Q[S]===undefined){Q[S]=this.getMiniChartHeight(S,R);T=true;}W+=Q[S];}V=S-1;for(P=R;P<=Z;P+=1){if(Y>this._x2){break;}if(U[P]===undefined){U[P]=this.getMiniChartWidth(M,P);T=true;}Y+=U[P];}Z=P-1;if(T===true){var O=this.updateAccWidth(R,Z),N=this.updateAccHeight(M,V);if(O!==0||N!==0){this.updateCanvas(O,N,false,false);}}},doUpdateGridXDYD:function(O){var X,W,S=this.nRows,T=this.nCols,Z=this.hArr,K=this.wArr,P=O.rowStart||S-1,R=O.colStart||T-1,U=O.rowEnd||0,M=O.colEnd||0;if(P<U||R<M){return ;}var N=this.getColPosition(R+1),Q=this.getRowPosition(P+1),L=N,V=Q,Y=false;for(X=P;X>=U;X-=1){if(V<this._y1){break;}if(Z[X]===undefined){Z[X]=this.getMiniChartHeight(X,R);Y=true;}V-=Z[X];}U=X+1;for(W=R;W>=M;W-=1){if(L<this._x1){break;}if(K[W]===undefined){K[W]=this.getMiniChartWidth(P,W);Y=true;}L-=K[W];}M=W+1;if(Y===true){var b=this.updateAccWidth(M,R),a=this.updateAccHeight(U,P);if(b!==0||a!==0){this.updateCanvas(b,a,true,true);this.shiftCharts(b,a);}}},doUpdateGridXIYD:function(X){var S,P,K=this.nRows,L=this.nCols,Q=this.hArr,U=this.wArr,M=X.rowStart||K-1,R=X.colStart||0,V=X.rowEnd||0,Z=X.colEnd||L-1;if(M<V||R>Z){return ;}var Y=this.getColPosition(R),W=this.getRowPosition(M+1),T=false;for(S=M;S>=V;S-=1){if(W<this._y1){break;}if(Q[S]===undefined){Q[S]=this.getMiniChartHeight(S,R);T=true;}W-=Q[S];}V=S+1;for(P=R;P<=Z;P+=1){if(Y>this._x2){break;}if(U[P]===undefined){U[P]=this.getMiniChartWidth(S,P);T=true;}Y+=U[P];}Z=P-1;if(T===true){var O=this.updateAccWidth(R,Z),N=this.updateAccHeight(V,M);if(O!==0||N!==0){this.updateCanvas(O,N,false,true);this.shiftCharts(0,N);}}},doUpdateGridXDYI:function(X){var S,P,K=this.nRows,L=this.nCols,Q=this.hArr,U=this.wArr,M=X.rowStart||0,R=X.colStart||L-1,V=X.rowEnd||K-1,Z=X.colEnd||0;if(M>V||R<Z){return ;}var Y=this.getColPosition(R+1),W=this.getRowPosition(M),T=false;for(S=M;S<=V;S+=1){if(W>this._y2){break;}if(Q[S]===undefined){Q[S]=this.getMiniChartHeight(S,R);T=true;}W+=Q[S];}V=S-1;for(P=R;P>=Z;P-=1){if(Y<this._x1){break;}if(U[P]===undefined){U[P]=this.getMiniChartWidth(S,P);T=true;}Y-=U[P];}Z=P+1;if(T===true){var O=this.updateAccWidth(Z,R),N=this.updateAccHeight(M,V);if(O!==0||N!==0){this.updateCanvas(O,N,true,false);this.shiftCharts(O,0);}}},updateAccWidth:function(O,Q){var N,K=this.nCols,L=0,M=this.wArr,P=this.wAccArr;for(N=O;N<=Q;N+=1){L+=M[N]-this.getColWidth(N)-L;P[N]+=L;}if(L!==0){for(N=Q+1;N<K;N+=1){P[N]+=L;}}return L;},updateAccHeight:function(L,M){var O,Q=this.nRows,K=0,N=this.hArr,P=this.hAccArr;for(O=L;O<=M;O+=1){K+=N[O]-this.getRowHeight(O)-K;P[O]+=K;}if(K!==0){for(O=M+1;O<Q;O+=1){P[O]+=K;}}return K;},getMiniChartWidth:function(K,L){if(this.API.getChartWidth){return Math.floor(this.API.getChartWidth(K,L)*this.manager.widthScale);}if(this.manager.API.getChartWidth){return Math.floor(this.manager.API.getChartWidth(K,L)*this.manager.widthScale);}return this.getColWidth(L);},getMiniChartHeight:function(K,L){if(this.API.getChartHeight){return Math.floor(this.API.getChartHeight(K,L)*this.manager.heightScale);}if(this.manager.API.getChartHeight){return Math.floor(this.manager.API.getChartHeight(K,L)*this.manager.heightScale);}return this.getRowHeight(K);},getRowHeight:function(N){var M,L,K=this.hAccArr;if(N instanceof Array){M=N[0]-1;L=N[1];}else{M=N-1;L=N;}return K[L]-((M===-1)?0:K[M]);},getColWidth:function(N){var M,L,K=this.wAccArr;if(N instanceof Array){M=N[0]-1;L=N[1];}else{M=N-1;L=N;}return K[L]-((M===-1)?0:K[M]);},getRowPosition:function(K){if(K===0){return 0;}return this.hAccArr[K-1];},getColPosition:function(K){if(K===0){return 0;}return this.wAccArr[K-1];},doRowIntersectionCheck:function(L,K,M){M=M||false;if(L===undefined){L=this._y1;}else{if(M){L+=this.origin.y;}}if(K===undefined){K=this._y2;}else{if(M){K+=this.origin.y;}}return{start:F(this.hAccArr,L),end:F(this.hAccArr,K)};},doColIntersectionCheck:function(L,K,M){M=M||false;if(L===undefined){L=this._x1;}else{if(M){L+=this.origin.x;}}if(K===undefined){K=this._x2;}else{if(M){K+=this.origin.x;}}return{start:F(this.wAccArr,L),end:F(this.wAccArr,K)};},getChartBBox:function(P,N,M){var K,Q,L=this.origin,O={};K=this.getColPosition(N);Q=this.getRowPosition(P);if(M){K-=L.x;Q-=L.y;}O.left=K;O.top=Q;O.width=this.getColWidth(N);O.height=this.getRowHeight(P);return O;},filterRowsByType:function(K,P,S){var M,L,Q,R,N=this.nCols,O=[];for(M=K;M<=P;M++){for(L=0;L<N;L++){Q=this.getChart(M,L);if(Q&&Q.getAttribute){R=Q.getAttribute("type");if(R===S){O.push(Q);}}}}return O;},filterColsByType:function(L,S,Q){var M,K,O,P,R=this.nRows,N=[];for(K=L;K<=S;K++){for(M=0;M<R;M++){O=this.getChart(M,K);if(O&&O.getAttribute){P=O.getAttribute("type");if(P===Q){N.push(O);}}}}return N;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","JSONFormat","FormatFill");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumFormatType");var F=mstrmojo.hash,D=mstrmojo.chart,B=D.enums,A=B.EnumFormatType,C=B.EnumFillType;mstrmojo.chart.JSONFormatFill=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFill",mFillType:0,mAlpha:0,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillBevel:null,init:function E(H){H.mFormatType=A.FMT_FILL;this._super(H);F.copyProps(["mFillType","mAlpha","mSimpleColor","mFillGradient","mFillPattern","mFillBevel","id"],H,this);},AppendToJSONObject:function G(N){var I=this.mFillBevel,H=this.mFillGradient,O=this.mFillType,K={FormatType:this.mFormatType,FillType:O,Alpha:this.mAlpha,Bevel:{FillBevelType:I.type,Depth:I.depth,LightAngle:I.lightAngle,Intensity:I.intensity}};switch(O){case C.FT_SIMPLE:var L=this.mSimpleColor;K.SimpleColor={R:L.mR,G:L.mG,B:L.mB};break;case C.FT_TEXTURE:break;case C.FT_PICTURE:break;case C.FT_GRADIENT:var M=H.startGraphColor,J=H.endGraphColor;K.Gradient={StartGraphColor:{R:M.mR,G:M.mG,B:M.mB},EndGraphColor:{R:J.mR,G:J.mG,B:J.mB},Angle:H.angle,HorizontalOffset:H.horizontalOffset,VerticalOffset:H.verticalOffset,GradientType:H.gradientType,EndAlpha:H.endAlpha,Style:H.style,IntermediateColors:H.intermediateColors.slice(0)};break;case C.FT_PATTERN:break;default:break;}N.push(K);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.WidgetMatrix","mstrmojo.array");function D(O){var N,M=[];M.length=O;for(N=0;N<O;N++){M[N]=N;}return M;}function F(Q){var N,P=this.master,R=this.hSlaves,M=this.vSlaves,S=R.length,O=M.length;for(N=0;N<S;N+=1){R[N][Q]();}for(N=0;N<O;N+=1){M[N][Q]();}if(P){P[Q]();}}function J(P){var N,O,M=this.vSlaves,R=M.length,Q=D(this.nRows);for(N=0;N<R;N++){O=M[N];if(O===this.yAxis||O===this.yAxis2){continue;}Q=O.filterRelevantRows(Q,P);}return Q;}function G(P){var N,O,M=this.hSlaves,R=M.length,Q=D(this.nCols);for(N=0;N<R;N++){O=M[N];if(O===this.xAxis||O===this.xAxis2){continue;}Q=O.filterRelevantCols(Q,P);}return Q;}function E(M,U){var S,R,Q,O,P,T,N=this.master;if(this.GMController.checkAttributeIntersection(M,["Rows","Columns","XAxis","YAxis","ColorBy","BreakBy"]).length>0){P=J.call(this,M);T=G.call(this,M);}else{P=[];T=[];}for(S=0,Q=P.length;S<Q;S++){for(R=0,O=T.length;R<O;R++){if(N.filterShapes){N.filterShapes(U,P[S],T[R],M);}}}}function H(P,N,O,M){if(O<P.start||O>P.end){return false;}if(M<N.start||M>N.end){return false;}return true;}function I(M,N,V,W){var U,T,S,Q,Y,P,R,X,O=this.master;if(this.GMController.checkAttributeIntersection(N,["Rows","Columns","XAxis","YAxis","ColorBy","BreakBy"]).length>0){R=J.call(this,N);X=G.call(this,N);}else{R=[];X=[];}for(U=0,S=R.length;U<S;U++){for(T=0,Q=X.length;T<Q;T++){Y=R[U];P=X[T];if(H(V,W,Y,P)&&O.efficientFilterShapes){if(M[Y]===undefined){M[Y]={};}if(M[Y][P]===undefined){M[Y][P]={};}O.efficientFilterShapes(M[Y][P],Y,P,N);}}}}function C(M,W,P,U,X,V){var T,S,R,O,Z,N,Q,Y;if(W.checkAttributeIntersection(M,P).length>0){Q=J.call(this,M);Y=G.call(this,M);}else{Q=[];Y=[];}for(T=0,R=Q.length;T<R;T++){for(S=0,O=Y.length;S<O;S++){Z=Q[T];N=Y[S];if(H(U,X,Z,N)){if(V[Z]===undefined){V[Z]={};}if(V[Z][N]===undefined){V[Z][N]=[];}V[Z][N].push(M);}}}}function A(S,M,U){var R,O,N,T,P,Q;for(T in S){if(S.hasOwnProperty(T)&&T!=="rowIndex"&&T!=="colIndex"){Q=S[T];for(P in Q){if(Q.hasOwnProperty(P)){N=Q[P][M];O=(N&&N.length)||0;for(R=0;R<O;R++){U.push(N[R]);}}}}}}function K(S,R){var P,N,Q,O,M=this.vSlaves,T=M.length;for(P=0;P<T;P++){Q=M[P];if(Q===this.yAxis||Q===this.yAxis2){continue;}O=Q.filterChartsByRow(S,P);if(O){for(N=0;N<O.length;N++){R.push(O[N]);}return true;}}return false;}function B(S,R){var P,N,Q,O,M=this.hSlaves,T=M.length;for(P=0;P<T;P++){Q=M[P];if(Q===this.xAxis||Q===this.xAxis2){continue;}O=Q.filterChartsByCol(S,P);if(O){for(N=0;N<O.length;N++){R.push(O[N]);}return true;}}return false;}mstrmojo.WidgetMatrixManager=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.WidgetMatrixManager",isAsynchronous:false,widthScale:1,heightScale:1,hSlaves:null,vSlaves:null,yAxis:undefined,yAxis2:undefined,xAxis:undefined,xAxis2:undefined,master:undefined,hArr:null,wArr:null,hAccArr:null,wAccArr:null,widthCache:null,heightCache:null,API:null,GMController:null,init:function(M){if(this._super){this._super(M);}this.hArr=[];this.wArr=[];this.hAccArr=[];this.wAccArr=[];this.widthCache=[];this.heightCache=[];this.hSlaves=[];this.vSlaves=[];this.API={getChartWidth:undefined,getChartHeight:undefined};},setMaster:function(M){this.master=M;},setSlaves:function(M,N){this.hSlaves=M;this.vSlaves=N;},setAxises:function(P,M,N,O){this.yAxis=P;this.xAxis=M;this.yAxis2=N;this.xAxis2=O;},setDimensions:function(R,S,Q,N){var P,M=this.heightCache,O=this.widthCache;this.nRows=R;this.nCols=S;this.chartW=Q;this.chartH=N;for(P=0;P<R;P+=1){M[P]=N;}for(P=0;P<S;P+=1){O[P]=Q;}},enableXSplitter:function(N){var M=this.xAxis,O=this.xAxis2;if(M){M.enableSplitter(N);}if(O){O.enableSplitter(N);}},enableYSplitter:function(M){var O=this.yAxis,N=this.yAxis2;if(O){O.enableSplitter(M);}if(N){N.enableSplitter(M);}},enableRowHeaderSplitter:function(M){var N,Q,O,P=this.vSlaves;for(N=0,Q=P.length;N<Q;N++){O=P[N];if(O===this.yAxis||O===this.yAxis2){continue;}O.enableSplitter(M);}},enableColHeaderSplitter:function(M){var O,Q,P,N=this.hSlaves;for(O=0,Q=N.length;O<Q;O++){P=N[O];if(P===this.xAxis||P===this.xAxis2){continue;}P.enableSplitter(M);}},enableInChartRowSplitter:function(M){var N,P,O=this.vSlaves;for(N=0,P=O.length;N<P;N++){O[N].enableRowSplitter(M);}this.master.enableRowSplitter(M);},enableInChartColSplitter:function(M){var O,P,N=this.hSlaves;for(O=0,P=N.length;O<P;O++){N[O].enableColSplitter(M);}this.master.enableColSplitter(M);},doUpdateInChartSplitters:function(P,M){this.master.doUpdateInChartSplitters(true,true);var O,R,Q=this.vSlaves,N=this.hSlaves;for(O=0,R=Q.length;O<R;O++){Q[O].doUpdateInChartSplitters(P,M);}for(O=0,R=N.length;O<R;O++){N[O].doUpdateInChartSplitters(P,M);}},binding:function(){var R,Q,S=this,O=this.master,U=this.hSlaves,P=this.vSlaves,M=U.length,T=P.length,N=this.API;if(!O){return ;}if(!N.getChartWidth){N.getChartWidth=function(Z,b){var X,a,V,Y=0,W=S.widthCache;if(b instanceof Array){a=b[0];V=b[1];}else{a=b;V=b+1;}for(X=a;X<V;X++){Y+=W[X];}return Y;};}if(!N.getChartHeight){N.getChartHeight=function(Z,b){var X,a,W,Y=0,V=S.heightCache;if(Z instanceof Array){a=Z[0];W=Z[1];}else{a=Z;W=Z+1;}for(X=a;X<W;X++){Y+=V[X];}return Y;};}for(R=0;R<M;R+=1){Q=U[R];Q.wArr=O.wArr;Q.wAccArr=O.wAccArr;Q.offset.x=O.offset.x;Q.API.getChartWidth=N.getChartWidth;Q.API.getChartHeight=N.getChartHeight;}for(R=0;R<T;R+=1){Q=P[R];Q.hArr=O.hArr;Q.hAccArr=O.hAccArr;Q.offset.y=O.offset.y;Q.API.getChartWidth=N.getChartWidth;Q.API.getChartHeight=N.getChartHeight;}this.master.API.getChartWidth=N.getChartWidth;this.master.API.getChartHeight=N.getChartHeight;},updateHSlaves:function(){if(!this.master){return ;}var N,R,Q=this.master,M=Q.origin,O=Q.domCanvas.offsetWidth,S=this.hSlaves,P=S.length;for(N=0;N<P;N++){R=S[N];R.updateHLayout(O,M.x);R.updateActiveCharts();R.updateCharts();}},updateVSlaves:function(){if(!this.master){return ;}var Q,S,R=this.master,P=R.origin,M=R.domCanvas.offsetHeight,O=this.vSlaves,N=O.length;for(Q=0;Q<N;Q++){S=O[Q];S.updateVLayout(M,P.y);S.updateActiveCharts();S.updateCharts();}},isVSlaveNodeValid:function(P,N,O){var M=(P===this.yAxis2)||(P===this.yAxis&&!O);if(N==="row"){return !M;}return M;},isHSlaveNodeValid:function(P,O,M){var N=(P===this.xAxis)||(P===this.xAxis2&&!M);if(O==="column"){return !N;}return N;},updateSubSetOfVSlaves:function(R,U){if(!this.master){return ;}var P,O,M=this.master,S=M.origin,T=M.domCanvas.offsetHeight,N=this.vSlaves,Q=N.length;for(P=0;P<Q;P++){O=N[P];if(this.isVSlaveNodeValid(O,R,U)){O.updateVLayout(T,S.y);O.updateActiveCharts();}}},updateSubSetOfHSlaves:function(S,N){if(!this.master){return ;}var R,Q,O=this.master,U=O.origin,P=O.domCanvas.offsetWidth,T=this.hSlaves,M=T.length;for(R=0;R<M;R++){Q=T[R];if(this.isHSlaveNodeValid(Q,S,N)){Q.updateHLayout(P,U.x);Q.updateActiveCharts();}}},drawCharts:function(){var M=this.master;if(!M){return ;}M.updateGrid();this.updateHSlaves();this.updateVSlaves();M.updateCharts();},dismissLassoSelector:function(){F.call(this,"dismissLassoSelector");},updateXYAxis:function(){var P=this.xAxis,N=this.xAxis2,O=this.yAxis,M=this.yAxis2;if(P){P.clearCharts();P.updateCharts();}if(N){N.clearCharts();N.updateCharts();}if(O){O.clearCharts();O.updateCharts();}if(M){M.clearCharts();M.updateCharts();}},scrollTo:function(M,O){var N=this.master;if(!N){return ;}N.scrollTo(M,O);this.translateHSlaves(M);this.translateVSlaves(O);},translateHSlaves:function(M){var N,P=this.hSlaves,O=P.length;for(N=0;N<O;N+=1){P[N].scrollTo(M,undefined);}},translateVSlaves:function(P){var O,N=this.vSlaves,M=N.length;for(O=0;O<M;O+=1){N[O].scrollTo(undefined,P);}},feedChartWidthInfo:function(M){var Q=this.master;if(!Q){return ;}Q.resetHGrid();var N,R,O=this.nCols,S=this.widthCache,P=Q.wArr;S.length=0;S.length=O;for(N=0;N<O;N++){R=M[N];if(R){R*=this.widthScale;S[N]=R;P[N]=R;}else{S[N]=this.chartW;}}Q.initAccWidth();},feedChartHeightInfo:function(M){var P=this.master;if(!P){return ;}P.resetVGrid();var O,R,N=this.nRows,S=this.heightCache,Q=P.hArr;S.length=0;S.length=N;for(O=0;O<N;O++){R=M[O];if(R){R*=this.heightScale;S[O]=R;Q[O]=R;}else{S[O]=this.chartH;}}P.initAccHeight();},resizeBorder:function(M,R,Q){var N=this.master;if(!N){return ;}var S,Y=M.nRows,V=M.nCols,W,U=[],P=[],O=[],X=0,T=0;if(!!Q){for(S=0;S<Y;S++){X+=M.getRowHeight(S);}W=Q/X;this.heightScale*=(1+W);for(S=0;S<Y;S++){if(M.hArr[S]!==undefined){U.push(S);O.push(M.getMiniChartHeight(S,0)-M.getRowHeight(S));}else{M.hArr[S]=M.getMiniChartHeight(S,0);}}N.resizeRow(U,O);M.updateAccHeight(0,Y-1);N.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartHeightScale:this.heightScale});}if(!!R){for(S=0;S<V;S++){T+=M.getColWidth(S);}W=R/T;this.widthScale*=(1+W);for(S=0;S<V;S++){if(M.wArr[S]!==undefined){P.push(S);O.push(M.getMiniChartWidth(0,S)-M.getColWidth(S));}else{M.wArr[S]=M.getMiniChartWidth(0,S);}}this.master.resizeCol(P,O);M.updateAccWidth(0,V-1);N.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartWidthScale:this.widthScale});}N.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},resizeRow:function(M,V,W){var O=this.master;if(!O){return ;}var Q,U=M.nRows,T=M.API.getRowSpan(V,M.depth),N=M.getRowHeight(T),S=W/N,R=[],P=[];this.heightScale*=(1+S);for(Q=0;Q<U;Q++){if(M.hArr[Q]!==undefined){R.push(Q);P.push(M.getMiniChartHeight(Q,0)-M.getRowHeight(Q));}else{M.hArr[Q]=M.getMiniChartHeight(Q,0);}}O.resizeRow(R,P,U);M.updateAccHeight(0,U-1);O.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartHeightScale:this.heightScale});O.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},resizeCol:function(M,V,W){var N=this.master;if(!N){return ;}var R,S=M.nCols,T=M.API.getColSpan(V,M.depth),Q=M.getColWidth(T),U=W/Q,P=[],O=[];this.widthScale*=(1+U);for(R=0;R<S;R++){if(M.wArr[R]!==undefined){P.push(R);O.push(M.getMiniChartWidth(0,R)-M.getColWidth(R));}else{M.wArr[R]=M.getMiniChartWidth(0,R);}}this.master.resizeCol(P,O,S);M.updateAccWidth(0,S-1);this.master.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartWidthScale:this.widthScale});this.master.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},resizeMiniCharts:function(N){var M=this;M.chartWidthScale=N;M.chartHeightScale=N;M.master.resizeMiniCharts(N);},resizeRowCol:function(N,Z,Y){var O=this.master;if(!O){return ;}var S,U=N.nCols,V=N.API.getColSpan(Z,N.depth),R=N.getColWidth(V),P=[],a=[],X=N.nRows,W=N.API.getRowSpan(Z,N.depth),M=N.getRowHeight(W),T=[],Q=[];this.widthScale=Y;this.heightScale=Y;for(S=0;S<X;S++){if(N.hArr[S]!==undefined){T.push(S);Q.push(N.getMiniChartHeight(S,0)-N.getRowHeight(S));}}for(S=0;S<U;S++){if(N.wArr[S]!==undefined){P.push(S);a.push(N.getMiniChartWidth(0,S)-N.getColWidth(S));}}this.master.resizeCol(P,a);this.master.resizeRow(T,Q);this.master.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartWidthScale:this.widthScale,chartHeightScale:this.heightScale});this.master.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},toggleClsByRows:function(N,Q,O,R,U){if(R===undefined){R=true;}var P,M=this.master,T=this.vSlaves,S=T.length;for(P=O;P<S;P++){T[P].toggleClsByRows(N,Q,R,U);}if(M){M.toggleClsByRows(N,Q,R,U);}},toggleClsByCols:function(O,U,P,R,T){if(R===undefined){R=true;}var Q,N=this.master,S=this.hSlaves,M=S.length;for(Q=P;Q<M;Q++){S[Q].toggleClsByCols(O,U,R,T);}if(N){N.toggleClsByCols(O,U,R,T);}},intersectCheck4Row:function(M){return this.master.doRowIntersectionCheck(0,M,true);},intersectCheck4Col:function(M){return this.master.doColIntersectionCheck(0,M,true);},getRowStartDepth:function(Q){var N,P,O,R=this.vSlaves,M=R.length;for(N=0;N<M;N++){P=R[N];if(P===this.yAxis||P===this.yAxis2){break;}O=P.API.getRowSpan(Q,N);if(O[1]===Q){return N;}}return N;},collectDepths:function L(V,U,Q,N,S){var P,O,R,M;if(N==="row"){R=this.vSlaves[V];M=R.API.getRowSpan;}else{if(N==="col"){R=this.hSlaves[V];M=R.API.getColSpan;}}if(!R){throw new Error("vSlave number does not match the depth");}if(R===this.yAxis||R===this.yAxis2||R===this.xAxis||R===this.xAxis2){for(P=U;P<Q;P++){S[P]=V;}return S;}for(P=U;P<Q;P++){var T=M(P,V),O=T[1]-T[0];if(T[1]-T[0]>0){this.collectDepths(V+1,P,P+O,N,S);P+=O;}S[T[1]]=V;}return S;},collectRowDepths:function(M){return this.collectDepths(0,0,M,"row",[]);},collectColDepths:function(M){return this.collectDepths(0,0,M,"col",[]);},getColStartDepth:function(M){var O,Q,R,N=this.hSlaves,P=N.length;for(O=0;O<P;O++){Q=N[O];if(Q===this.xAxis||Q===this.xAxis2){break;}R=Q.API.getColSpan(M,O);if(R[1]===M){return O;}}return O;},getRowOffset:function(N){var M=this.master;return M.getRowPosition(N)-M.origin.y;},getColOffset:function(M){var N=this.master;return N.getColPosition(M)-N.origin.x;},getRowHeight:function(M){return this.master.getRowHeight(M);},getColWidth:function(M){return this.master.getColWidth(M);},filterCharts:function(O){var N,R,M,Q,P=[];if(O.constructor===Array){R=O.length;for(N=0;N<R;N++){Q=O[N];delete Q.hashKey;if(!K.call(this,Q,P)){B.call(this,Q,P);}}}else{for(M in O){if(O.hasOwnProperty(M)){Q=O[M];if(!K.call(this,Q,P)){B.call(this,Q,P);}}}}return P;},isSelectionRuleEqual:function(N,M){},generateHighlightKeys:function(M){},filterShapesDeprecated:function(P){var O,Q,N,M=[];if(P.constructor===Array){Q=P.length;for(O=0;O<Q;O++){delete P[O].hashKey;E.call(this,P[O],M);}}else{for(N in P){if(P.hasOwnProperty(N)){E.call(this,P[N],M);}}}return M;},filterShapes:function(O){if(!O){return[];}var S,R,Q,P,N=this.master,T=N.doRowIntersectionCheck(),V=N.doColIntersectionCheck(),U=this.GMController,M=U.highLightShapeIndex,W=[];if(U.resetHighLightIndex){M=U.highLightShapeIndex={};this.selectHighLightShapes(M,O,T,V);}for(S=T.start,Q=T.end;S<=Q;S++){for(R=V.start,P=V.end;R<=P;R++){if(M[S]&&M[S][R]){N.selectHighLightShapes(M[S][R],S,R,W);}}}return W;},selectHighLightShapes:function(M,O,U,Y){var S,R,X,Z,Q,T,W=this.GMController,N=this.master,P=["Rows","Columns","XAxis","YAxis","ColorBy","BreakBy"],V={};if(O.constructor===Array){R=O.length;for(S=0;S<R;S++){delete O[S].hashKey;C.call(this,O[S],W,P,U,Y,V);}}else{for(X in O){if(O.hasOwnProperty(X)){C.call(this,O[X],W,P,U,Y,V);}}}for(Z in V){if(V.hasOwnProperty(Z)){T=V[Z];if(M[Z]===undefined){M[Z]={};}for(Q in T){if(T.hasOwnProperty(Q)){if(M[Z][Q]===undefined){M[Z][Q]={};}N.efficientFilterShapes(M[Z][Q],Z,Q,T[Q]);}}}}},getTheRightKey:function(b,Y){var T,M,R,O,a=this.GMController,U=a.view.model,S,X=a.getAttributeIds(),V,c,Z,N,W,Q=false,P={};for(N in Y){W=Y[N];if(X.hasOwnProperty(N)){P[N]=W;continue;}Q=true;S=U.getLinkedAttributes(N)||[];M=S.length;for(T=0;T<M;T++){if(X.hasOwnProperty(S[T])){V=S[T];break;}}Z=X[V]||[];M=Z.length;for(T=0;T<M;T++){O=W.length;for(R=0;R<O;R++){if(U.compareElementsId(Z[T].id,W[R].id)){c=Z[T];break;}}if(c){break;}}P[V]=[c];}if(!Q){return b;}return this.master.getSelectionHash(P);},resetShapeHighlightMap:function(){},constructShapeHighlightMap:function(){},resize:function(O,M){var P,S,Q=this.master,R=this.hSlaves,N=this.vSlaves;if(O===undefined){O=0;}if(M===undefined){M=0;}if(O!==0){S=R.length;for(P=0;P<S;P++){R[P].resize(O,0);}}if(M!==0){S=N.length;for(P=0;P<S;P++){N[P].resize(0,M);}}if(O!==0||M!==0){Q.resize(O,M);}},queryRowHeight:function(M){var P=this,O=this.master,N=function(Q,R){if(O.isRowInSight(Q)){P.resizeRow(P.master,Q,R);P.doUpdateChartsGlobally();}};},queryColWidth:function(N){var P=this,O=this.master,M=function(R,Q){if(O.isColInSight(R)){P.resizeCol(P.master,R,Q);P.doUpdateChartsGlobally();}};},queryMiniChart:function(N,M){var P=this.master,O=function(R,Q){if(P.isRowInSight(R)&&P.isColInSight(Q)){P.doUpdateCharts(R,R,Q,Q);}};},queryYAxis:function(N){var M=this.yAxis,O=function(P){M.doUpdateCharts(P,P,0,0);};},queryXAxis:function(N){var O=this.xAxis,M=function(P){O.doUpdateCharts(0,0,P,P);};},queryRowHeader:function(O,P){var M=this.vSlaves[P],N=function(Q){M.doUpdateCharts(Q,Q,0,0);};},queryColHeader:function(M,P){var O=this.hSlaves[P],N=function(Q){O.doUpdateCharts(0,0,Q,Q);};},queryRowSpan:function(M){var P=this,O=this.master,R=this.vSlaves,Q=R.length,N=function(T){var S;for(S=0;S<Q-1;S+=1){R[S].doUpdateCharts(T,T,0,0);}};},queryColSpan:function(M){var N=this.hSlaves,P=N.length,O=function(){var Q;for(Q=0;Q<P-1;Q+=1){N[Q].doUpdateCharts(0,0,M,M);}};},filterRowHeaders:function(O,P,Q,N){var M,R=this.vSlaves;return R[Q].filterRowsByType(O,P,N);},filterColHeaders:function(R,M,Q,P){var O,N=this.hSlaves;return N[Q].filterColsByType(R,M,P);}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.Container");mstrmojo.requiresDescs(1442,2140);var C=mstrmojo.dom;mstrmojo.ui.menus.ToolbarEditor=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._IsMenuPopup,mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.menus.ToolbarEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-ToolbarEditor mstrmojo-ui-MenuEditor {@cssClass}" style="..." mstrAttach:mouseover,mouseout,click><div class="te-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},popupConfig:null,children:null,autoCloses:false,locksHover:true,visible:true,onclick:function B(E){C.stopPropogation(null,E.e);},init:function D(F){this._super(F);var E=this.popupConfig,G=E.contents;if(!G){throw new Error("Cannot open editor without editor content.");}this.cssClass=E.cssClass;this.addChildren(G);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.ToolbarEditor","mstrmojo.hash");mstrmojo.ui.menus.ToolbarEditorConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.ToolbarEditorConfig",cssClass:"",contents:null,init:function C(D){this._super(D);this.initBindings();},clear:function A(){this._super();this.contents=null;},newInstance:function B(D){return new mstrmojo.ui.menus.ToolbarEditor(mstrmojo.hash.copy({popupConfig:this},D));}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget","mstrmojo.tooltip","mstrmojo.string","mstrmojo.array");var O=0,I=mstrmojo.array,B=mstrmojo.string;function P(){var U=this.textNode,W=this.imgNode;if(this.eg!=null){W.style.display="none";U.innerHTML=this.eg||"";U.style.display="block";}else{U.style.display="none";W.style.display="block";if(this.tooltip){W.setAttribute("ttl",this.tooltip);}var V=this.getFormats();this.retrieveGraphSrc(V.height,V.width);}}var T={6:"poly",7:"rect",100:"circle"};function H(){var d=this.as,Z=d&&d.length;if(!Z){return ;}var Y=this.id,c=Y+"_map"+O++,W=[],b=-1,X;for(X=0;X<Z;X++){var V=d[X];V.id=Y;V.aid=X;V.tooltip=B.multiReplace(V.tooltip||"",{"&#13":"<br />","&#32":" ",'"':"&quot;"});if(!isNaN(V.shape)){V.shape=this.getAreaShapeName(V.shape);}if(V.tks||V.tks===""||V.tty===1){V.extra=' href="#" ';}W[++b]=B.apply(this.areaMarkup,V);}var a='<map id="'+c+'" name="'+c+'">'+W.join("")+"</map>";if(!this.domNode){this.att='usemap="#'+c+'" ';this.map=a;}else{var U=document.createElement("div");U.innerHTML=a;if(this.mapNode){U=U.firstChild;this.mapNode.innerHTML=U.innerHTML;}else{this.imgNode.setAttribute("usemap","#"+c);this.mapNode=this.domNode.appendChild(U.firstChild);}}}var A=mstrmojo.GraphBase=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.GraphBase",cssClassPrefix:"mstrmojo-GraphBase",markupString:'<div id="{@id}" class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><img {@att}src="../images/1ptrans.gif" class="{@cssClassPrefix} {@cssImageClass}" hidefocus="true" />{@map}</div>',att:"",map:"",cAreaIdx:-1,useRichTooltip:true,markupSlots:{imgNode:function J(){return this.domNode.childNodes[1];},mapNode:function F(){return this.domNode.childNodes.length>2?this.domNode.childNodes[2]:null;},textNode:function M(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function K(){this.domNode.style.display=(this.visible)?"block":"none";}},preBuildRendering:function C(){H.call(this);return this._super();},postBuildRendering:function Q(){P.call(this);return this._super();},setModel:function L(U){this.model=U;},updatingTooltipHelper:function R(Y,h,b){var V=Y&&Y.getAttribute("aid"),U=Y&&Y.getAttribute("ttl"),X=Y.getAttribute("SC"),a={refNode:this.domNode,posType:mstrmojo.tooltip.POS_BOTTOMLEFT,contentNodeCssClass:"gp-tooltip"},g=(this.model.getZoomFactor?this.model.getZoomFactor():(this.model.docModel?this.model.docModel.getZoomFactor():1))+"em";if(V==this.cAreaIdx){return ;}this.cAreaIdx=V;a.content=U||this.defaultTooltip;var W="font-size:"+g+";";if(X){W+="border-color:#"+X;}a.contentNodeCssText=W;var d=Y.getAttribute("coords"),f=99999,e=99999;if(!b){if(d&&d.length>0){d=d.split(",");var Z=0;while(Z+1<d.length){f=Math.min(f,parseInt(d[Z++],10));e=Math.min(e,parseInt(d[Z++],10));}}}if(f===99999){f=h.x;}if(e===99999){e=h.y;}a.top=e;a.left=f;this.richTooltip=null;this.set("richTooltip",a);},redraw:function N(){if(!this.hasRendered){return false;}P.call(this);var U=this.getFormats();if(this.as&&U.height&&U.width){this.refreshMap();}return true;},refreshMap:function G(){if(this.as){H.call(this);}},getAreaShapeName:function D(U){return T[parseInt(U,10)]||"default";}});var S=A.tooltipCLS="mstrmojo-mobileGraph-Tooltip-content",E=A.canvasCLS="mobile-graph-highlight-canvas";A.hideTooltips=function(){I.forEach(document.getElementsByClassName(S),function(U){U.style.display="none";});I.forEach(document.getElementsByClassName(E),function(U){U.getContext("2d").clearRect(0,0,U.width,U.height);U.width=U.width;});};}());(function(){mstrmojo.requiresCls("mstrmojo.graph._MobileGraphAreaHelper","mstrmojo.GraphBase","mstrmojo.dom");var z=0,Ao=0,A8=0,AY=1,e=2,Y=11,W=12,AP=13,BE=101,k=102,Av=111,AW=112,A9=113,j=121,A0=122,AZ=131,s=132,AC=201,H=301,F=302,w=303,p=311,f=321,A4=322,B=401,Ay=402,Af=501,J=502,AK=503,AI=511,o=512,M=513,BC=514,An=515,BF=521,AO=522,Q=601,N=701,AR=801;var Ae=0,I=9,AE=10,Z=14;var u=0,AG=1,G=2,Ad=3,Aa=4;var l=0,Ax=1,Ac=2;var U=2,c=3;var Au=0,AJ=3,A7=4,t=6,E=13,A=14,D=101;var A3=0,At=1,Ai=2;var Ab=3.14159265;var d,a;var Ar=0,A1=1,Al=2,R=3,AA=4,BD=5,y=6,AT=7,AQ=8,AV=9;var A2=100;var A5=[[-100,-100,100,-100,100,100,-100,100],[-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[],[0,-100,100,0,0,100,-100,0],[0,-100,100,100,-100,100],[-100,-100,100,-100,100,100,-100,100],[0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100]];function Am(Cd,Bz,Cy,Bx){var Bd=Cy.InstructionList,B6=Bd.length,Bl,CB,Bw,Bv,CE,By,Bc,Bh,BL,BP,CD,B4,BT,Cs,CK,CF,Cw;for(CB=0;CB<B6;CB++){Bl=Bd[CB];if(typeof (Bl)==="undefined"){continue;}switch(Bl.Ins){case A8:break;case AY:Cd.save();break;case e:Cd.restore();break;case Y:Cd.clip();break;case W:Cd.scale(Bl.X,Bl.Y);break;case AP:if(Bl.Radian!==0){Cd.translate(Bl.Anchor.X,Bl.Anchor.Y);Cd.rotate(Bl.Radian);Cd.translate(-Bl.Anchor.X,-Bl.Anchor.Y);}break;case BE:Cd.beginPath();break;case k:Cd.closePath();break;case Av:if(Cy.IsAnimated===0){Cd.moveTo(Bl.X,Bl.Y);}else{if(Bl.CA[0]==0){Bw=Bl.X[0]*(1-Bz)+Bl.X[1]*Bz;Bv=Bl.Y[0]*(1-Bz)+Bl.Y[1]*Bz;Cd.moveTo(Bw,Bv);}else{var Bj=Math.sqrt((Bl.X[0]-Bl.BPX[0])*(Bl.X[0]-Bl.BPX[0])+(Bl.Y[0]-Bl.BPY[0])*(Bl.Y[0]-Bl.BPY[0]));var Bg=Math.sqrt((Bl.X[1]-Bl.BPX[0])*(Bl.X[1]-Bl.BPX[0])+(Bl.Y[1]-Bl.BPY[0])*(Bl.Y[1]-Bl.BPY[0]));var CH=Math.sqrt((Bl.X[0]-Bl.X[1])*(Bl.X[0]-Bl.X[1])+(Bl.Y[0]-Bl.Y[1])*(Bl.Y[0]-Bl.Y[1]));var Bi=Math.acos((Bj*Bj+Bg*Bg-CH*CH)/(2*Bj*Bg));var C1=(Bl.X[0]-Bl.BPX[0])*Math.cos(Bi)-(Bl.Y[0]-Bl.BPY[0])*Math.sin(Bi)+Bl.BPX[0]-Bl.X[1];if(C1<-0.01||C1>0.01){Bi=2*Ab-Bi;}Bw=(Bl.X[0]-Bl.BPX[0])*Math.cos(Bz*Bi)-(Bl.Y[0]-Bl.BPY[0])*Math.sin(Bz*Bi)+Bl.BPX[0];Bv=(Bl.Y[0]-Bl.BPY[0])*Math.cos(Bz*Bi)+(Bl.X[0]-Bl.BPX[0])*Math.sin(Bz*Bi)+Bl.BPY[0];Cd.moveTo(Bw,Bv);}}break;case AW:if(Cy.IsAnimated===0){Cd.lineTo(Bl.X,Bl.Y);}else{if(Bl.CA[0]==0){Bw=Bl.X[0]*(1-Bz)+Bl.X[1]*Bz;Bv=Bl.Y[0]*(1-Bz)+Bl.Y[1]*Bz;Cd.lineTo(Bw,Bv);}else{var Bj=Math.sqrt((Bl.X[0]-Bl.BPX[0])*(Bl.X[0]-Bl.BPX[0])+(Bl.Y[0]-Bl.BPY[0])*(Bl.Y[0]-Bl.BPY[0]));var Bg=Math.sqrt((Bl.X[1]-Bl.BPX[0])*(Bl.X[1]-Bl.BPX[0])+(Bl.Y[1]-Bl.BPY[0])*(Bl.Y[1]-Bl.BPY[0]));var CH=Math.sqrt((Bl.X[0]-Bl.X[1])*(Bl.X[0]-Bl.X[1])+(Bl.Y[0]-Bl.Y[1])*(Bl.Y[0]-Bl.Y[1]));var Bi=Math.acos((Bj*Bj+Bg*Bg-CH*CH)/(2*Bj*Bg));var C1=(Bl.X[0]-Bl.BPX[0])*Math.cos(Bi)-(Bl.Y[0]-Bl.BPY[0])*Math.sin(Bi)+Bl.BPX[0]-Bl.X[1];if(C1<-0.02||C1>0.02){Bi=2*Ab-Bi;}Bw=(Bl.X[0]-Bl.BPX[0])*Math.cos(Bz*Bi)-(Bl.Y[0]-Bl.BPY[0])*Math.sin(Bz*Bi)+Bl.BPX[0];Bv=(Bl.Y[0]-Bl.BPY[0])*Math.cos(Bz*Bi)+(Bl.X[0]-Bl.BPX[0])*Math.sin(Bz*Bi)+Bl.BPY[0];Cd.lineTo(Bw,Bv);}}break;case A9:if(Cy.IsAnimated===0){Cd.bezierCurveTo(Bl.CP1X,Bl.CP1Y,Bl.CP2X,Bl.CP2Y,Bl.X,Bl.Y);}else{cp1x=Bl.CP1X[0]*(1-Bz)+Bl.CP1X[1]*Bz;cp1y=Bl.CP1Y[0]*(1-Bz)+Bl.CP1Y[1]*Bz;cp2x=Bl.CP2X[0]*(1-Bz)+Bl.CP2X[1]*Bz;cp2y=Bl.CP2Y[0]*(1-Bz)+Bl.CP2Y[1]*Bz;Bw=Bl.X[0]*(1-Bz)+Bl.X[1]*Bz;Bv=Bl.Y[0]*(1-Bz)+Bl.Y[1]*Bz;Cd.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,Bw,Bv);}break;case j:if(Cy.IsAnimated===0){Cd.rect(Bl.X,Bl.Y,Bl.W,Bl.H);}else{Bw=Bl.X[0]*(1-Bz)+Bl.X[1]*Bz;Bv=Bl.Y[0]*(1-Bz)+Bl.Y[1]*Bz;By=Bl.W[0]*(1-Bz)+Bl.W[1]*Bz;CE=Bl.H[0]*(1-Bz)+Bl.H[1]*Bz;Cd.rect(Bw,Bv,By,CE);}break;case A0:if(Cy.IsAnimated===0){if(Bl.EndAngle==6.283){Bl.EndAngle=2*Ab;}Cd.arc(Bl.X,Bl.Y,Bl.Radius,Bl.StartAngle,Bl.EndAngle,Bl.AntiClockwise);}else{if(Bl.EndAngle[0]==6.283){Bl.EndAngle[0]=2*Ab;}if(Bl.EndAngle[1]==6.283){Bl.EndAngle[1]=2*Ab;}Cd.arc(Bl.X[0]*(1-Bz)+Bl.X[1]*Bz,Bl.Y[0]*(1-Bz)+Bl.Y[1]*Bz,Bl.Radius[0]*(1-Bz)+Bl.Radius[1]*Bz,Bl.StartAngle[0]*(1-Bz)+Bl.StartAngle[1]*Bz,Bl.EndAngle[0]*(1-Bz)+Bl.EndAngle[1]*Bz,Bl.AntiClockwise[0]);}break;case s:if(Cy.IsAnimated==1){var Br=Bl.Angle[0]*(1-Bz)+Bl.Angle[1]*Bz;var Bb=Bl.NeedleSize[0];var CI=Bl.BPX[0];var CG=Bl.BPY[0];var BM=Bl.MarkSize[0];var Ci=Bl.MarkShape[0];var CT={X:Bb*Math.cos(Br)+CI,Y:Bb*Math.sin(Br)*-1+CG};var B2=AL(Ci,CT,BM);C(Cd,B2,false,false);}break;case AC:case H:break;case F:Cd.lineWidth=Bl.LineWidth;break;case w:switch(Bl.Type){case A3:Cd.lineJoin="miter";break;case At:Cd.lineJoin="bevel";break;case Ai:Cd.lineJoin="round";break;}break;case p:case f:case A4:break;case B:Cd.fill();break;case Ay:Cd.stroke();break;case Af:BL=Bl.Format;Bc=Bx[BL];if(Bl.HEP==1){Bh=Bl.FC;}else{Bh=Bc.SimpleColor;}Cd.fillStyle="RGBA("+Math.round(Bh.R*Bl.DarkerFactor)+", "+Math.round(Bh.G*Bl.DarkerFactor)+", "+Math.round(Bh.B*Bl.DarkerFactor)+", "+Bc.Alpha/255+")";Cd.fill();break;case J:break;case AK:if(Cy.IsAnimated===0){BT=Bl.BoundingRect;Cw=Bl.DarkerFactor;}else{BT=Bl.BoundingRect[0];Cw=Bl.DarkerFactor[0];var Cz=Bl.BoundingRect[1];BT.X=BT.X*(1-Bz)+Cz.X*Bz;BT.Y=BT.Y*(1-Bz)+Cz.Y*Bz;BT.Width=BT.Width*(1-Bz)+Cz.Width*Bz;BT.Height=BT.Height*(1-Bz)+Cz.Height*Bz;}if(BT.Width<1||BT.Height<1){continue;}BT.Width=Math.floor(BT.Width);BT.Height=Math.floor(BT.Height);var Bc=Bx[Bl.Format];if(Bc.Bevel.FillBevelType!=Aa||Bz<1){As(Cd,Bc,BT,Cw);}else{Aj(Cd,Bc);As(Cd,Bc,BT,Cw);}break;case AI:Bc=Bx[Bl.Format];CK=Bc.Bevel;B2=AB(Bl.Polygon);var Bq=B2.length;var BS=[];for(var CC=0;CC<Bq;CC++){BS.push(B2[CC]);}while(true){Bq=BS.length;if(Bq<3){break;}var BY=[];var B3=[];var BN=false;if(Bq>3){var Cr={X:0,Y:0};for(var CC=0;((CC<(Bq-2))&&(!BN));++CC){for(var B9=CC+2;B9<(Bq-1);++B9){var Cu=b(BS[CC],BS[CC+1],BS[B9],BS[B9+1],Cr,false);Cr=Cu.interSection;if(Cu.val==1){BN=true;for(m=0;m<=CC;++m){if(!AS(BS[m],Cr)){BY.push(BS[m]);}}BY.push(Cr);for(m=B9+1;m<Bq;++m){if(!AS(BS[m],Cr)){BY.push(BS[m]);}}B3.push(Cr);for(m=B9;m>CC;--m){if(!AS(BS[m],Cr)){B3.push(BS[m]);}}break;}}if((CC!=0)&&(!BN)){var Cu=b(BS[CC],BS[CC+1],BS[0],BS[Bq-1],Cr,false);Cr=Cu.interSection;if(Cu.val==1){for(m=0;m<=CC;++m){BY.push(BS[m]);}BY.push(Cr);B3.push(Cr);for(m=Bq-1;m>CC;--m){B3.push(BS[m]);}BN=true;}}}}if(!BN){BY=BS;}var Cq=0;var Ce=BH(BY,Cq);Cq=Ce.depth;if(!Ce.mark){break;}Cq*=CK.Depth*0.01;var Bu=[];var BR=[];var B0=BY.length;for(var CC=0;CC<B0;++CC){var CW;var Bo;var Ce=Aq(BY[(CC+B0-1)%B0],BY[CC],BY[(CC+1)%B0],Cq);CW=Ce.start;Bo=Ce.end;Bu.push(CW);BR.push(Bo);}for(var CC=0;CC<B0;++CC){var CQ={X:BR[CC].X-Bu[CC].X,Y:BR[CC].Y-Bu[CC].Y};var BO=Math.sqrt(Ap(CQ));var CV={X:CQ.X/BO,Y:CQ.Y/BO};var BJ=v((540-CK.LightAngle)%360);var BU={X:Math.cos(BJ),Y:Math.sin(BJ)};var B1=AH(CV,BU);var CR=0;var B8=0;var Cg=0.1;var Ct=0.2;if(B1<-0.01){CR=(1+B1)*Cg;B8=(1+Math.abs(B1))*Ct*CK.Intensity*0.01;}else{CR=(1-Cg)+B1*Cg;B8=((1-Ct)+B1*Ct)*CK.Intensity*0.01;}var B7=CC+1;if(B7==B0){B7-=B0;}Cd.beginPath();Cd.moveTo(BY[CC].X,BY[CC].Y);Cd.lineTo(BY[B7].X,BY[B7].Y);Cd.lineTo(Bu[B7].X,Bu[B7].Y);Cd.lineTo(Bu[CC].X,Bu[CC].Y);Cd.closePath();var CP=Math.round(CR*255);if(isNaN(CP)){continue;}if(CK.FillBevelType==AG){Cd.save();Cd.clip();var BK=Cd.createLinearGradient(BR[CC].X,BR[CC].Y,Bu[CC].X,Bu[CC].Y);BK.addColorStop(0,"rgba("+CP+","+CP+","+CP+","+B8+")");BK.addColorStop(1,"rgba("+CP+","+CP+","+CP+","+0+")");Cd.fillStyle=BK;Cd.fill();Cd.restore();}else{Cd.fillStyle="RGBA("+CP+", "+CP+", "+CP+", "+B8+")";Cd.fill();}}if(BN){BS=B3;}else{break;}}if(B2.length!=0){Cd.beginPath();Cd.moveTo(B2[0].X,B2[0].Y);for(var CC=1;CC<B2.length;++CC){Cd.lineTo(B2[CC].X,B2[CC].Y);}Cd.closePath();}break;case o:Bc=Bx[Bl.Format];CK=Bc.Bevel;if(Cy.IsAnimated===0){BT=Bl.BoundingRect;CF=Bl.IsCircularShape;}else{var C0=Bl.BoundingRect[0];var Cz=Bl.BoundingRect[1];BT={X:0,Y:0,Width:0,Height:0};BT.X=C0.X*(1-Bz)+Cz.X*Bz;BT.Y=C0.Y*(1-Bz)+Cz.Y*Bz;BT.Width=C0.Width*(1-Bz)+Cz.Width*Bz;BT.Height=C0.Height*(1-Bz)+Cz.Height*Bz;}if(CK.FillBevelType===Ad){var Cx=0.2;var CM=CK.Intensity*0.01*Bc.Alpha/255;var CO=1-CK.Depth*0.01;Cs=Cd.createLinearGradient(BT.X,BT.Y,BT.X+BT.Width,BT.Y);CD="RGBA(0,0,0,"+CM+")";B4="RGBA(255,255,255,"+CM+")";Cs.addColorStop(0,CD);Cs.addColorStop(CO*Cx,CD);Cs.addColorStop(CO,B4);Cs.addColorStop(1,CD);}else{CD=Bc.SimpleColor;var BV={x:BT.X+BT.Width/2,y:BT.Y+BT.Height/2};Bk={x:0,y:0};Bf={x:0,y:0};x(BT,CK.LightAngle,BV);var BZ=Bc.Alpha/255;var Bn=BZ;if(Bc.FillType!=Au){BZ*=0.8;Bn*=0.5;CD={R:128,G:128,B:128};}var BK=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);BK.addColorStop(0,"rgba(255,255,255,"+BZ+")");BK.addColorStop(0.05+CK.Intensity*0.001,"rgba(255,255,255,"+9*BZ/(10-BZ)+")");BK.addColorStop(0.5,"rgba("+CD.R+","+CD.G+","+CD.B+","+Bn+")");BK.addColorStop(0.85+(1-CK.Intensity*0.01)*0.05,"rgba(0,0,0,"+9*BZ/(10-BZ)+")");BK.addColorStop(1,"rgba(0,0,0,"+BZ+")");Cd.fillStyle=BK;Cd.fill();if(Bc.FillType!=Au){continue;}var BI=Math.max(BT.Width,BT.Height)*0.5*(2-CK.Intensity*0.01);BI*=CF?0.75:2;Cs=Cd.createRadialGradient(BV.x,BV.y,0,BV.x,BV.y,BI);Cs.addColorStop(0,"rgba("+CD.R+","+CD.G+","+CD.B+","+BZ+")");Cs.addColorStop(0.5,"rgba("+CD.R+","+CD.G+","+CD.B+","+BZ/2+")");Cs.addColorStop(0.8,"rgba("+CD.R+","+CD.G+","+CD.B+","+BZ/10+")");Cs.addColorStop(1,"rgba("+CD.R+","+CD.G+","+CD.B+",0)");}Cd.fillStyle=Cs;Cd.fill();break;case An:Bc=Bx[Bl.Format];CK=Bc.Bevel;var Cb=Bl.CX;var Ca=Bl.CY;var Cl=Bl.Radius;var BI;var CM;switch(Bl.BorderUse){case U:CM=0.4;Bk={x:Cb+Cl*Math.cos(Ab*1.25),y:Ca+Cl*Math.sin(Ab*1.25)};Bf={x:Cb+Cl*Math.cos(Ab*0.25),y:Ca+Cl*Math.sin(Ab*0.25)};Cd.save();Cd.clip();var BK=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);BK.addColorStop(0,"rgba(0,0,0,"+CM+")");BK.addColorStop(1,"rgba(255,255,255,"+CM+")");Cd.fillStyle=BK;Cd.fill();Cd.restore();CM=0.4;BI=Cl*0.3;Bh=Bc.SimpleColor;Bk={x:Cb+BI*Math.cos(Ab*0.75),y:Ca+BI*Math.sin(Ab*0.75)};Bf={x:Cb+BI*Math.cos(Ab*1.75),y:Ca+BI*Math.sin(Ab*1.75)};Cd.save();Cd.clip();var BK=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);BK.addColorStop(0,"rgba("+Bh.R+","+Bh.G+","+Bh.B+","+0+")");BK.addColorStop(0.2,"rgba("+Bh.R+","+Bh.G+","+Bh.B+","+1+")");BK.addColorStop(0.8,"rgba("+Bh.R+","+Bh.G+","+Bh.B+","+1+")");BK.addColorStop(1,"rgba("+Bh.R+","+Bh.G+","+Bh.B+","+0+")");Cd.fillStyle=BK;Cd.fill();Cd.restore();break;case c:CM=0.6;BI=Cl*0.2;var CO=0.3;Bk={x:Cb+BI*Math.cos(Ab*1.25),y:Ca+BI*Math.sin(Ab*1.25)};Bf={x:Cb+Cl*Math.cos(Ab*0.25),y:Ca+Cl*Math.sin(Ab*0.25)};Cd.save();Cd.clip();var BK=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);BK.addColorStop(0,"rgba(255,255,255,"+CM+")");BK.addColorStop(CO,"rgba(0,0,0,"+CM+")");BK.addColorStop(1,"rgba(255,255,255,"+CM+")");Cd.fillStyle=BK;Cd.fill();Cd.restore();break;default:CM=0.4;BI=Cl-Bl.Thickness;Bk={x:Cb+BI*Math.cos(Ab*1.25),y:Ca+BI*Math.sin(Ab*1.25)};Bf={x:Cb+BI*Math.cos(Ab*0.25),y:Ca+BI*Math.sin(Ab*0.25)};Cd.save();Cd.clip();var BK=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);BK.addColorStop(0,"rgba(0,0,0,"+CM+")");BK.addColorStop(1,"rgba(255,255,255,"+CM+")");Cd.fillStyle=BK;Cd.fill();Cd.restore();break;}break;case M:Bc=Bx[Bl.Format];CK=Bc.Bevel;var CM;var CO;var Cb;var Ca;var Bm;var BX;var CN;var Bs;var Bp;var Cf;if(Cy.IsAnimated===0){Cb=Bl.CX;Ca=Bl.CY;Bm=Bl.InnerRadius;BX=Bl.OuterRadius;CN=Bl.RGUsage;Bs=Bl.HEP;if(Bs==1){Bp=Bl.ExtraDepth;Cf=Bl.ExtraIntensity;}}else{Cb=Bl.CX[0]*(1-Bz)+Bl.CX[1]*Bz;Ca=Bl.CY[0]*(1-Bz)+Bl.CY[1]*Bz;Bm=Bl.InnerRadius[0];BX=Bl.OuterRadius[0];CN=Bl.RGUsage[0];Bs=Bl.HEP[0];if(Bs==1){Bp=Bl.ExtraDepth[0];Cf=Bl.ExtraIntensity[0];}}switch(CN){case l:CM=CK.Intensity*0.01*Bc.Alpha/255;CO=1-CK.Depth*0.01;Cs=Cd.createRadialGradient(Cb,Ca,Bm,Cb,Ca,BX);CD="RGBA(0,0,0,"+CM+")";B4="RGBA(255,255,255,"+CM+")";Cs.addColorStop(0,CD);Cs.addColorStop(CO,B4);Cs.addColorStop(1,CD);Cd.fillStyle=Cs;Cd.fill();break;case Ax:CM=CK.Intensity*0.01*Bc.Alpha/255;Cs=Cd.createRadialGradient(Cb,Ca,Bm,Cb,Ca,BX);CD="RGBA(0,0,0,"+CM+")";B4="RGBA(255,255,255,"+CM+")";Cs.addColorStop(0,CD);Cs.addColorStop(1,B4);Cd.fillStyle=Cs;Cd.fill();break;case Ac:if(Bs==0){CM=CK.Intensity*0.01*Bc.Alpha/255;CO=CK.Depth*0.01;}else{CM=Cf*0.01*Bc.Alpha/255;CO=Bp*0.01;}Cs=Cd.createRadialGradient(Cb,Ca,Bm,Cb,Ca,BX);CD="RGBA(0,0,0,"+CM+")";B4="RGBA(255,255,255,"+CM+")";Cs.addColorStop(0,CD);Cs.addColorStop(CO,B4);Cs.addColorStop(1,CD);Cd.fillStyle=Cs;Cd.fill();break;}break;case BC:Bc=Bx[Bl.Format];CK=Bc.Bevel;CM=CK.Intensity*0.01*Bc.Alpha/255;CO=1-CK.Depth*0.01;CD="RGBA(0,0,0,"+CM+")";B4="RGBA(255,255,255,"+CM+")";Cs=Cd.createLinearGradient(Bl.StartPoint.X,Bl.StartPoint.Y,Bl.EndPoint.X,Bl.EndPoint.Y);Cs.addColorStop(0,CD);Cs.addColorStop(CO,B4);Cs.addColorStop(1,CD);Cd.save();Cd.clip();Cd.fillStyle=Cs;Cd.fill();Cd.restore();break;case BF:case AO:break;case Q:var Cc;BL=Bl.Format;Bc=Bx[BL];if(Bc.Gradient&&Bc.Gradient.Valid){var Cp=Bc.Gradient,Cj=Cp.Colors,Bk=Cp.Start,Bf=Cp.End;if(Cp.style==0){var Bt=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);}else{if(Cp.angle==0){Bt=Cd.createLinearGradient(Bk.x,0,Bf.x,0);}else{Bt=Cd.createLinearGradient(0,Bk.y,0,Bf.y);}}var Ba,B5=1,Co=Cj.length;if(Co>0){for(CC=0;CC<Co;CC++){Ba="RGBA("+Math.round(B5*Cj[CC].Color.mR)+", "+Math.round(B5*Cj[CC].Color.mG)+", "+Math.round(B5*Cj[CC].Color.mB)+", "+Bc.Alpha/255+")";Bt.addColorStop(Cj[CC].Step,Ba);}Cc=Bt;}else{Bh=Bc.Color;Cc="RGBA("+Bh.R+", "+Bh.G+", "+Bh.B+", "+Bc.Alpha/255+")";}}else{Bh=Bc.Color;Cc="RGBA("+Bh.R+", "+Bh.G+", "+Bh.B+", "+Bc.Alpha/255+")";}Cd.strokeStyle=Cc;Cd.stroke();break;case N:BL=Bl.Format;Bc=Bx[BL];Bh=Bc.Color;Cd.font=Bc.Size+"px "+Bc.Name;if(Bc.Style&2){Cd.font="italic "+Cd.font;}if(Bc.Style&1){Cd.font="bold "+Cd.font;}Cd.fillStyle="RGBA("+Bh.R+", "+Bh.G+", "+Bh.B+", "+Bc.Alpha/255+")";Cd.fillText(Bl.Text,Bl.StartPoint.X,Bl.StartPoint.Y);if(Bc.Style&12){Cd.beginPath();var CL=Cd.measureText(Bl.Text);if(Bc.Style&4){Cd.moveTo(Math.round(Bl.StartPoint.X),Math.round(Bl.StartPoint.Y));Cd.lineTo(Math.round(Bl.StartPoint.X+CL.width),Math.round(Bl.StartPoint.Y));}if(Bc.Style&8){Cd.moveTo(Math.round(Bl.StartPoint.X),Math.round(Bl.StartPoint.Y-Bc.Size*0.5));Cd.lineTo(Math.round(Bl.StartPoint.X+CL.width),Math.round(Bl.StartPoint.Y-Bc.Size*0.5));}Cd.strokeStyle="RGBA("+Bh.R+", "+Bh.G+", "+Bh.B+", "+Bc.Alpha/255+")";Cd.lineWidth=Math.round(Math.max(1,Bc.Size*3/40));Cd.stroke();}break;case AR:var Cv;if(Cy.IsAnimated===0){Cv=Bl.Rect;}else{Cv=Bl.Rect[0];var Cz=Bl.Rect[1];Cv.X=Cv.X*(1-Bz)+Cz.X*Bz;Cv.Y=Cv.Y*(1-Bz)+Cz.Y*Bz;Cv.Width=Cv.Width*(1-Bz)+Cz.Width*Bz;Cv.Height=Cv.Height*(1-Bz)+Cz.Height*Bz;}var CA=Bl.RotationAngle;var CJ=Bl.BevelDepth;var CU=Bl.LTColor;var CS=Bl.LTAlpha;var Cn=Bl.RBColor;var Ck=Bl.RBAlpha;var Cm={X:Cv.X+Cv.Width/2,Y:Cv.Y+Cv.Height/2};var CZ={X:0,Y:0,Width:0,Height:0};CZ.X=Cv.X;CZ.Y=Cv.Y;CZ.Width=Cv.Width;CZ.Height=Cv.Height;BB(CZ,CJ,CJ);var Be=[];Be.push(Az({X:Cv.X,Y:Cv.Y},Cm,CA));Be.push(Az({X:Cv.X+Cv.Width,Y:Cv.Y},Cm,CA));Be.push(Az({X:Cv.X+Cv.Width,Y:Cv.Y+Cv.Height},Cm,CA));Be.push(Az({X:Cv.X,Y:Cv.Y+Cv.Height},Cm,CA));var Ch=[];Ch.push(Az({X:CZ.X,Y:CZ.Y},Cm,CA));Ch.push(Az({X:CZ.X+CZ.Width,Y:CZ.Y},Cm,CA));Ch.push(Az({X:CZ.X+CZ.Width,Y:CZ.Y+CZ.Height},Cm,CA));Ch.push(Az({X:CZ.X,Y:CZ.Y+CZ.Height},Cm,CA));var BW=[];BW.push(Az({X:Cv.X,Y:Cv.Y+Cv.Height},Cm,CA));BW.push(Az({X:CZ.X,Y:CZ.Y+CZ.Height},Cm,CA));BW.push(Az({X:CZ.X,Y:CZ.Y},Cm,CA));BW.push(Az({X:CZ.X+CZ.Width,Y:CZ.Y},Cm,CA));BW.push(Az({X:Cv.X+Cv.Width,Y:Cv.Y},Cm,CA));BW.push(Az({X:Cv.X,Y:Cv.Y},Cm,CA));C(Cd,BW,false,false);Cd.fillStyle="RGBA("+CU.R+", "+CU.G+", "+CU.B+", "+CS/255+")";Cd.fill();var BQ=[];BQ.push(Az({X:Cv.X,Y:Cv.Y+Cv.Height},Cm,CA));BQ.push(Az({X:CZ.X,Y:CZ.Y+CZ.Height},Cm,CA));BQ.push(Az({X:CZ.X+CZ.Width,Y:CZ.Y+CZ.Height},Cm,CA));BQ.push(Az({X:CZ.X+CZ.Width,Y:CZ.Y},Cm,CA));BQ.push(Az({X:Cv.X+Cv.Width,Y:Cv.Y},Cm,CA));BQ.push(Az({X:Cv.X+Cv.Width,Y:Cv.Y+Cv.Height},Cm,CA));C(Cd,BQ,false,false);Cd.fillStyle="RGBA("+Cn.R+", "+Cn.G+", "+Cn.B+", "+Ck/255+")";Cd.fill();Cd.strokeStyle="RGBA(230, 230, 230, "+CS*0.5/255+")";Cd.lineWidth=1;C(Cd,Be,true,true);Cd.stroke();C(Cd,Ch,true,true);Cd.stroke();break;}}}function Aw(BI,BJ){return 1-(Math.sqrt((BJ-256)*(BJ-256)+(BI-256)*(BI-256))/(1.5*256));}function V(BM,BI,BN,BK,BJ){var BL=(BK&&BJ)?0.5:0;BM.moveTo(BI+BL,BN+BL);}function BG(BM,BI,BN,BK,BJ){var BL=(BK&&BJ)?0.5:0;BM.lineTo(BI+BL,BN+BL);}function h(BL,BI,BK,BJ){var BN=BI.length;if(BN<=0){return ;}BL.beginPath();V(BL,BI[0].X,BI[0].Y,BK,BJ);var BM=0;for(i=1;i<BN;++i){BG(BL,BI[i].X,BI[i].Y,BK,BJ);BM=i;}}function X(BK){var BJ=A5[BK];var BI=BJ.length/2;return{number:BI,points:BJ};}function AL(BR,BM,BJ){var BI=[];if(BR==AA){BI.push({X:BM.X-BJ,Y:BM.Y-BJ});BI.push({X:BM.X+BJ,Y:BM.Y-BJ});BI.push({X:BM.X+BJ,Y:BM.Y+BJ});BI.push({X:BM.X-BJ,Y:BM.Y+BJ});return BI;}var BO;var BQ;var BN=X(BR);BO=BN.number;BQ=BN.points;for(var BP=0;BP<BO;BP++){var BL=(BQ[2*BP])*BJ/A2+BM.X;var BK=(BQ[2*BP+1])*BJ/A2+BM.Y;BI.push({X:BL,Y:BK});}return BI;}function C(BN,BJ,BL,BK){var BP=BJ.length;if(BP<3){return ;}BN.beginPath();if(BL&&BK){var BI=[];for(var BM=0;BM<BP;++BM){BI.push(BJ[BM]);}var BO=BP-1;for(var BM=0;BM<BP;++BM){lNextIndex=(BM+1==BP)?0:BM+1;if(BJ[BM].X==BJ[BO].X||BJ[BM].X==BJ[lNextIndex].X){BI[BM].X+=0.5;}if(BJ[BM].Y==BJ[BO].Y||BJ[BM].Y==BJ[lNextIndex].Y){BI[BM].Y+=0.5;}BO=BM;}h(BN,BI,false,BK);}else{h(BN,BJ,false,BK);}BN.closePath();}function A6(BI,BL,BK){var BM=BI.X-BL.X;var BJ=BI.Y-BL.Y;BI.X=BL.X+Math.cos(BK)*BM-Math.sin(BK)*BJ;BI.Y=BL.Y+Math.sin(BK)*BM+Math.cos(BK)*BJ;return BI;}function Az(BI,BK,BJ){return A6(BI,BK,BJ);}function BB(BJ,BK,BI){if(BK*2>BJ.Width){BK=BJ.Width/2;}if(BI*2>BJ.Height){BI=BJ.Height/2;}return AD(BJ,-BK,-BI);}function AD(BJ,BK,BI){BJ.X-=BK;BJ.Y-=BI;BJ.Width+=(BK*2);BJ.Height+=(BI*2);return BJ;}function r(BJ,BI,BK){return S(BJ,BI)+S(BI,BK)+S(BK,BJ);}function n(BJ,BI){return Math.sqrt((BJ.X-BI.X)*(BJ.X-BI.X)+(BJ.Y-BI.Y)*(BJ.Y-BI.Y));}function P(BL,BP,BY){var BU=BY;var BK=BL.length;var BT=BP;var BV=BL[(BT+BK-1)%BK];var BS=BL[(BT+1)%BK];var BN=0;var BX={X:0,Y:0};var BW={X:BL[BP].X-BL[(BP+BK-1)%BK].X,Y:BL[BP].Y-BL[(BP+BK-1)%BK].Y};for(var BQ=(BT+2)%BK;BQ!=BT;BQ=(BQ+1)%BK){var BR=BQ-1;if(BR<0){BR+=BK;}var Ba={X:BL[BR].X-BL[BT].X,Y:BL[BR].Y-BL[BT].Y};var BZ={X:BL[BQ].X-BL[BT].X,Y:BL[BQ].Y-BL[BT].Y};if(S(BW,Ba)<0.01&&S(BW,BZ)>0.01){var BJ=b(BV,BL[BT],BL[BR],BL[BQ],BX,false);BX=BJ.interSection;BN=BQ;break;}}var BI=0;var BO={X:0,Y:0};var BM={X:BL[BP].X-BL[(BP+1)%BK].X,Y:BL[BP].Y-BL[(BP+1)%BK].Y};for(var BQ=(BT+BK-2)%BK;BQ!=BT;BQ=(BQ-1+BK)%BK){var BR=BQ+1;if(BR>=BK){BR-=BK;}var Ba={X:BL[BR].X-BL[BT].X,Y:BL[BR].Y-BL[BT].Y};var BZ={X:BL[BQ].X-BL[BT].X,Y:BL[BQ].Y-BL[BT].Y};if(S(BM,Ba)>-0.01&&S(BM,BZ)<-0.01){var BJ=b(BS,BL[BT],BL[BR],BL[BQ],BO,false);BO=BJ.interSection;BI=BQ;break;}}BU.push(BL[BT]);BU.push(BX);for(m=BN;;m=(m+1)%BK){BU.push(BL[m]);if(m==BI){break;}}BU.push(BO);return BU;}function g(BT,BQ){var BR=BT.length;if(BR==3){var BJ=BH(BT,BQ);return BJ;}else{var Ba=BT[BR-1];var BI={X:BT[1].X-BT[0].X,Y:BT[1].Y-BT[0].Y};var BU={X:-BI.X,Y:-BI.Y};var BL={X:Ba.X-BT[0].X,Y:Ba.Y-BT[0].Y};var Bb={X:-BL.X,Y:-BL.Y};var BN=false;var BS=10000000000;for(var BZ=2;BZ<BR;++BZ){var BX=BZ-1;var BY={X:BT[BZ].X-BT[BX].X,Y:BT[BZ].Y-BT[BX].Y};if(S(BU,BY)<-0.01){var BK={X:0,Y:0};var BO=b(BT[0],BT[1],BT[BX],BT[BZ],BK,false);BK=BO.interSection;if(BO.val>0){var BP={X:BK.X-BT[0].X,Y:BK.Y-BT[0].Y};if(AH(BI,BP)>0.01){var BM={X:BK.X+BY.X,Y:BK.Y+BY.Y};var BV={X:0,Y:0};var BW;var BJ=T(Ba,BT[0],BK,BM,BV,BW);BV=BJ.point;BW=BJ.val;if(BJ.mark){BN=true;if((BW<BS)&&Ak(BV,BT[BX-1],BT[BX],BT[BZ],BT[(BZ+1)%BR])){BS=BW;}}}}}else{if(S(Bb,BY)<-0.01){var BK={X:0,Y:0};var BO=b(BT[0],Ba,BT[BX],BT[BZ],BK,false);BK=BO.interSection;if(BO.val>0){var BP={X:BK.X-BT[0].X,Y:BK.Y-BT[0].Y};if(AH(BL,BP)>0.01){var BM={X:BK.x-BY.x,Y:BK.y-BY.y};var BV={X:0,Y:0};var BW;var BJ=T(BM,BK,BT[0],BT[1],BV,BW);BV=BJ.point;BW=BJ.val;if(BJ.mark){BN=true;if((BW<BS)&&Ak(BV,BT[BX-1],BT[BX],BT[BZ],BT[(BZ+1)%BR])){BS=BW;}}}}}}}return{mark:BN,depth:BS};}}function Ap(BI){return BI.X*BI.X+BI.Y*BI.Y;}function Aq(BU,BS,BR,BM){var BN={X:BU.X-BS.X,Y:BU.Y-BS.Y};var BL={X:BR.X-BS.X,Y:BR.Y-BS.Y};var BK=Math.sqrt(Ap(BN));var BJ=Math.sqrt(Ap(BL));var BQ={X:BN.X/BK,Y:BN.Y/BK};var BP={X:BL.X/BJ,Y:BL.Y/BJ};var BT=0;if(Math.abs(BQ.X-BP.X)<0.01){BT=BM*(BP.X+BQ.X)/(BQ.Y-BP.Y);}else{BT=BM*(BP.Y+BQ.Y)/(BP.X-BQ.X);}var BO={X:0,Y:0};var BI={X:0,Y:0};BO.X=BS.X+BT*BP.X;BO.Y=BS.Y+BT*BP.Y;BI.X=BO.X+BM*(-BP.Y);BI.Y=BO.Y+BM*BP.X;return{start:BI,end:BO};}function Ah(BJ,BI){var BK=AH(BJ,BI)/(Math.sqrt(Ap(BJ)*Ap(BI)));BK=(BK>1)?1:BK;BK=(BK<-1)?-1:BK;return Math.acos(BK);}function Ak(BO,BW,BV,BT,BS){var BQ={X:BW.X-BV.X,Y:BW.Y-BV.Y};var BN={X:BT.X-BV.X,Y:BT.Y-BV.Y};var BU=q(Ah(BQ,BN));if(S(BN,BQ)<-0.01){BU=360-BU;}var BK={X:BO.X-BV.X,Y:BO.Y-BV.Y};var BP=q(Ah(BK,BN));if(S(BN,BK)<-0.01){BP=360-BP;}if(2*BP>BU){return false;}var BJ={X:-BN.X,Y:-BN.Y};var BI={X:BS.X-BT.X,Y:BS.Y-BT.Y};var BR=q(Ah(BJ,BI));if(S(BI,BJ)<-0.01){BR=360-BR;}var BM={X:BO.X-BT.X,Y:BO.Y-BT.Y};var BL=q(Ah(BJ,BM));if(S(BM,BJ)<-0.01){BL=360-BL;}if(2*BL>BR){return false;}return true;}function AM(BI){return Math.sqrt(Ap(BI));}function T(BW,BV,BT,BR,BM,BZ){var Bh;var BY;var Bf={X:BV.X-BW.X,Y:BV.Y-BW.Y};var Bb={X:BR.X-BT.X,Y:BR.Y-BT.Y};var BP={X:BT.X-BV.X,Y:BT.Y-BV.Y};var Be=Math.sqrt(Ap(BP));var Bc=S(Bf,Bb);if(Bc>0.01||Bc<-0.01){var BQ={X:0,Y:0};var BS=b(BW,BV,BT,BR,BQ,false);BQ=BS.interSection;var Bd=n(BV,BQ);var BJ=n(BT,BQ);if(Bc<-0.01){var BL=Be+Bd+BJ;BM.X=(BJ*BV.X+Bd*BT.X+Be*BQ.X)/BL;BM.Y=(BJ*BV.Y+Bd*BT.Y+Be*BQ.Y)/BL;Bh=r(BV,BT,BQ)/BL;BY=true;}else{var BL=Bd+BJ-Be;if(BL<0.01){var Ba=0;if(Math.abs(S(Bf,BP))<0.01){var Bg={X:-BP.X/Be,Y:-BP.Y/Be};var BK=Math.sqrt(Ap(Bb));var BN={X:Bb.X/BK,Y:Bb.Y/BK};Ba=(Bg.Y-BN.Y)*Be/(Bg.X+BN.X);BM.X=BV.X+Ba*Bg.Y;BM.Y=BV.Y+Ba*(-Bg.X);}else{var BU={X:BP.X/Be,Y:BP.Y/Be};var BX=AM(Bf);var BO={X:-Bf.X/BX,Y:-Bf.Y/BX};Ba=(BO.Y-BU.Y)*Be/(BO.X+BU.X);BM.X=BT.X+Ba*(-BU.Y);BM.Y=BT.Y+Ba*BU.X;}Bh=Ba;BY=true;return{val:Bh,mark:BY,point:BM};}BM.X=(BJ*BV.X+Bd*BT.X-Be*BQ.X)/BL;BM.Y=(BJ*BV.Y+Bd*BT.Y-Be*BQ.Y)/BL;Bh=r(BV,BQ,BT)/BL;BY=true;}}else{if(Math.abs(S(Bf,BP))<0.01){BY=false;return{val:Bh,mark:BY,point:BM};}var BX=Math.sqrt(Ap(Bf));var BI={X:-Bf.X/BX,Y:-Bf.Y/BX};BM.X=(BV.X+BT.X+Be*BI.X)/2;BM.Y=(BV.Y+BT.Y+Be*BI.Y)/2;Bh=S(BP,BI)/2;BY=true;}return{val:Bh,mark:BY,point:BM};}function BH(BW,BT){var Bf=false;var BJ=BW.length;if(BJ==3){var BR=n(BW[0],BW[1]);var BQ=n(BW[1],BW[2]);var BP=n(BW[2],BW[0]);var BI=BR+BQ+BP;BT=r(BW[0],BW[1],BW[2])/BI;Bf=true;}else{var BO=false;var BV=10000000000;for(var Bb=0;Bb<BJ;++Bb){var Bc=BW[Bb];var Bd=BW[(Bb+BJ-1)%BJ];var Ba=BW[(Bb+1)%BJ];var BZ=BW[(Bb+2)%BJ];var BM={X:Bd.X-Bc.X,Y:Bd.Y-Bc.Y};var BK={X:Ba.X-Bc.X,Y:Ba.Y-Bc.Y};var BX={X:-BK.X,Y:-BK.Y};var BU={X:BZ.X-Ba.X,Y:BZ.Y-Ba.Y};var BS=S(BM,BK);if(BS<0.01){if(S(BX,BU)<0.01){var BN={X:0,Y:0};var BY=0;var BL=T(Bd,Bc,Ba,BZ,BN,BY);BN=BL.point;BY=BL.val;if(BL.mark){BO=true;BV=(BV>BY)?BY:BV;}}}else{if(BS>0.01){var Be=[];Be=P(BW,Bb,Be);var BL=g(Be,BY);var BY=BL.depth;if(BL.mark){BO=true;BV=(BV>BY)?BY:BV;}}}}BT=BV;Bf=BO;}return{mark:Bf,depth:BT};}function AS(BJ,BI){return(Math.abs(BJ.X-BI.X)<0.01&&Math.abs(BJ.Y-BI.Y)<0.01);}function AB(BJ){var BK=[];BK.push(BJ[0]);pcount=BJ.length;for(var BI=1;BI<pcount;BI++){if(BJ[BI-1].X==BJ[BI].X&&BJ[BI-1].Y==BJ[BI].Y){continue;}BK.push(BJ[BI]);}var BL=new Array();pcount=BK.length;for(var BI=0;BI<pcount;BI++){if(BI===pcount-1){if(BK[BI].X==BK[0].X&&BK[BI].Y==BK[0].Y){continue;}}BL.push(BK[BI]);}return BL;}function AU(BJ,BI,BM,BL){var BK=0.01;if(BL===false){BK=-0.01;}if(Math.abs(BI.X-BM.X)<0.01){if(BJ.Y-BI.Y>BK&&BM.Y-BJ.Y>BK){return true;}if(BJ.Y-BM.Y>BK&&BI.Y-BJ.Y>BK){return true;}}else{if(BJ.X-BI.X>BK&&BM.X-BJ.X>BK){return true;}if(BJ.X-BM.X>BK&&BI.X-BJ.X>BK){return true;}}return false;}function b(BS,BR,BP,BO,BN,BJ){var BK={X:BR.X-BS.X,Y:BR.Y-BS.Y};var BL={X:BO.X-BP.X,Y:BO.Y-BP.Y};if(Math.abs(S(BK,BL))<0.01){var BI={X:BP.X-BS.X,Y:BP.Y-BS.Y};if(Math.abs(S(BK,BI))<0.01){return{val:-1,interSection:BN};}else{return{val:0,interSection:BN};}}else{var BM={X:BS.X-BP.X,Y:BS.Y-BP.Y};var BQ=S(BL,BM)/S(BK,BL);BN.X=BS.X+BQ*BK.X;BN.Y=BS.Y+BQ*BK.Y;if(AU(BN,BS,BR,BJ)&&AU(BN,BP,BO,BJ)){return{val:1,interSection:BN};}else{return{val:2,interSection:BN};}}}function x(BR,BK,BM){var BJ=BK;while(BJ<0){BJ+=360;}while(BJ>=360){BJ-=360;}var BU=BR.X+BR.Width-BM.x;var BP=BM.y-BR.Y;var BW=BM.x-BR.X;var BN=BR.Y+BR.Height-BM.y;var BS=v(BJ);var BL={x:Math.cos(BS),y:-Math.sin(BS)};var BO;var BI;if(BJ>=0&&BJ<90){var BX={x:BU,y:-BP};var BT={x:-BW,y:BN};BO=O(BX,BL);BI=O(BT,BL);}else{if(BJ>=90&&BJ<180){var BY={x:-BW,y:-BP};var BV={x:BU,y:BN};BO=O(BY,BL);BI=O(BV,BL);}else{if(BJ>=180&&BJ<270){var BX={x:BU,y:-BP};var BT={x:-BW,y:BN};BO=O(BT,BL);BI=O(BX,BL);}else{var BY={x:-BW,y:-BP};var BV={x:BU,y:BN};BO=O(BV,BL);BI=O(BY,BL);}}}a.x=BM.x+BO*BL.x;a.y=BM.y+BO*BL.y;d.x=BM.x+BI*BL.x;d.y=BM.y+BI*BL.y;var BQ=-BI/(BO-BI);if(BQ<0){BQ=0;}else{if(BQ>1){BQ=1;}}return BQ;}function v(BI){return BI*Ab/180;}function q(BI){return BI*180/Ab;}function O(BJ,BI){return(BJ.x*BI.x+BJ.y*BI.y);}function AH(BJ,BI){return(BJ.X*BI.X+BJ.Y*BI.Y);}function S(BJ,BI){return(BJ.X*BI.Y-BJ.Y*BI.X);}function As(BK,Ba,BJ,BL){var BI=Ba.Gradient;var BW="RGBA("+Math.round(BL*BI.StartGraphColor.R)+", "+Math.round(BL*BI.StartGraphColor.G)+", "+Math.round(BL*BI.StartGraphColor.B)+", "+Ba.Alpha/255+")";var BU="RGBA("+Math.round(BL*BI.EndGraphColor.R)+", "+Math.round(BL*BI.EndGraphColor.G)+", "+Math.round(BL*BI.EndGraphColor.B)+", "+BI.EndAlpha/255+")";var BS;switch(BI.GradientType){case Z:if(BI.style==0){var Bc=BI.HorizontalOffset;if((BI.Angle>90&&BI.Angle<180)||BI.Angle>270){Bc=100-Bc;}var BY={x:BJ.X+BJ.Width*Bc/100,y:BJ.Y+BJ.Height*BI.VerticalOffset/100};d={x:0,y:0};a={x:0,y:0};var BM=x(BJ,BI.Angle,BY);BS=BK.createLinearGradient(d.x,d.y,a.x,a.y);BS.addColorStop(0,BU);BS.addColorStop(BM,BW);BS.addColorStop(1,BU);}else{var BP=BI.Angle==0;d={x:0,y:0};a={x:0,y:0};if(BP){d.x=BJ.X;a.x=BJ.X+BJ.Width;d.y=a.y=0;}else{d.y=BJ.Y;a.y=BJ.Y+BJ.Height;d.x=a.x=0;}BS=BK.createLinearGradient(d.x,d.y,a.x,a.y);BS.addColorStop(0,BW);var Bb=BI.IntermediateColors;for(var BZ=0;BZ<Bb.length;BZ++){var BV=Bb[BZ].Color;var BX="RGBA("+Math.round(BL*BV.mR)+", "+Math.round(BL*BV.mG)+", "+Math.round(BL*BV.mB)+", "+Ba.Alpha/255+")";BS.addColorStop(Bb[BZ].Step,BX);}BS.addColorStop(1,BU);}BK.fillStyle=BS;BK.fill();break;case I:var BY={x:BJ.X+BJ.Width*BI.HorizontalOffset/100,y:BJ.Y+BJ.Height*BI.VerticalOffset/100};var BQ=BJ.Width*1/BJ.Height;BY.y*=BQ;BS=BK.createRadialGradient(BY.x,BY.y,0,BY.x,BY.y,BJ.Width*2);BS.addColorStop(0,BW);BS.addColorStop(0.5,BU);BS.addColorStop(1,BU);BK.fillStyle=BS;BK.save();BK.scale(1,1/BQ);BK.fill();BK.restore();break;case AE:var BY={x:BJ.X+BJ.Width*BI.HorizontalOffset/100,y:BJ.Y+BJ.Height*BI.VerticalOffset/100};var BN=BI.Angle%90;var BR=q(Math.atan(BJ.Height/BJ.Width));var BO=2*BN-BR*BN/45+90+BR;d={x:0,y:0};a={x:0,y:0};var BM=x(BJ,BO,BY);var BT=BK.createLinearGradient(d.x,d.y,a.x,a.y);BW="RGBA("+Math.round(BL*BI.StartGraphColor.R)+", "+Math.round(BL*BI.StartGraphColor.G)+", "+Math.round(BL*BI.StartGraphColor.B)+", "+Ba.Alpha/(255*2-Ba.Alpha)+")";BU="RGBA("+Math.round(BL*BI.EndGraphColor.R)+", "+Math.round(BL*BI.EndGraphColor.G)+", "+Math.round(BL*BI.EndGraphColor.B)+", "+BI.EndAlpha/(255*2-BI.EndAlpha)+")";BT.addColorStop(0,BU);BT.addColorStop(BM,BW);BT.addColorStop(1,BU);BK.fillStyle=BT;BK.fill();BO=BR*BN/45+90-BR;BM=x(BJ,BO,BY);BS=BK.createLinearGradient(d.x,d.y,a.x,a.y);BW="RGBA("+Math.round(BL*BI.StartGraphColor.R)+", "+Math.round(BL*BI.StartGraphColor.G)+", "+Math.round(BL*BI.StartGraphColor.B)+", "+Ba.Alpha/(255*2)+")";BU="RGBA("+Math.round(BL*BI.EndGraphColor.R)+", "+Math.round(BL*BI.EndGraphColor.G)+", "+Math.round(BL*BI.EndGraphColor.B)+", "+BI.EndAlpha/(255*2)+")";BS.addColorStop(0,BU);BS.addColorStop(BM,BW);BS.addColorStop(1,BU);BK.fillStyle=BS;BK.fill();break;}}function Aj(BI,BK){var BJ=BK.Alpha/255;BI.fillStyle="rgba(255,255,255,"+BK.Alpha/255+")";BI.fill();}function AF(BJ){var BI=BJ.canvas;BJ.clearRect(0,0,BI.width,BI.height);}function Ag(BI){Ao=(new Date()).getTime();L(BI);}function L(BR){var BQ=BR.graphData,BS=BQ.UnitList,BT=BS.length,BL=BQ.FormatList,BW=BR.graphNode,BO=BR.highlightNode,BM=BO.getContext("2d"),BV=BR.selectionNode,BN=BV.getContext("2d"),BK=BW.getContext("2d");AF(BK);AF(BM);AF(BN);var BX=Math.min(((new Date()).getTime()-Ao)/z,1),BU=(1-BX),BP;var BI=0.3*BX*BU*BU+2.7*BU*BX*BX+BX*BX*BX;var BJ=0;for(BP=0;BP<BT;BP++){Am(BK,BI,BS[BP],BL);if(BS[BP].IsAnimated!==0){BJ=1;}}if(BX<1&&BJ===1){setTimeout(function(){L(BR);},20);}}mstrmojo.graph._CanvasGraph=mstrmojo.provide("mstrmojo.graph._CanvasGraph",{markupString:'<div class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><canvas id="{@id}" height="{@height}" width="{@width}">{@unsupportedError}</canvas>{@map}<canvas id="{@id}-highlight" class="mobile-graph-selection-canvas" height="{@height}" width="{@width}" style="position:absolute;top:0;left:0"></canvas><canvas id="{@id}-highlight" class="'+mstrmojo.GraphBase.canvasCLS+'" height="{@height}" width="{@width}" style="position:relative;top:0;left:0"></canvas></div>',unsupportedError:"This text is displayed if your browser does not support HTML5 Canvas element.",markupSlots:{graphNode:function(){return this.domNode.childNodes[1];},imgNode:function(){return this.domNode.childNodes[1];},mapNode:function(){return null;},textNode:function(){return this.domNode.firstChild;},selectionNode:function(){return this.domNode.lastChild.previousSibling;},highlightNode:function(){return this.domNode.lastChild;}},graphData:null,retrieveGraphSrc:function BA(BL,BP){var BN=this.graphNode,BQ=this.highlightNode,BM=this.selectionNode,BO=this.graphData,BK=(BO&&BO.data);if(BK&&BK.eg){var BR=this.textNode,BJ=this.imgNode;BJ.style.display="none";BQ.style.display="none";BM.style.display="none";BR.innerHTML=BK.eg||"";BR.style.display="block";BR.className="mstrmojo-message";}else{var BS=BO.GH||parseInt(BL,10),BI=BO.GW||parseInt(BP,10);BN.setAttribute("height",BS);BN.setAttribute("width",BI);BQ.style.display="block";BQ.setAttribute("height",BS);BQ.setAttribute("width",BI);BQ.style.top=-BS+"px";BM.style.display="block";BM.setAttribute("height",BS);BM.setAttribute("width",BI);this.displayTooltips([],0,0);Ag(this);if(BO.Selected){this.highlightAreaInInit(BM,BO.Selected);}}},unrender:function AN(BI){this._super(false);},invalidate:function K(){var BI=this.graphNode;if(BI){AF(BI.getContext("2d"));}},getCaptureDimensions:function AX(){var BJ=this.graphNode,BI=mstrmojo.dom.position(this.domNode,true);BI.w=BJ.width;BI.h=BJ.height;return BI;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo.css","mstrmojo.Pulldown","mstrmojo.ProgressBar");var N=mstrmojo.dom,Q=mstrmojo.css,R="disabled",C=-1;function O(){var V=this.selected,T=this.panels.length,W=this.getValidPanelsNum(V),U=this.getValidPanelsNum(T);if(W===U-1){Q.addClass(this.nextBtnNode,R);}else{Q.removeClass(this.nextBtnNode,R);}if(W===0){Q.addClass(this.prevBtnNode,R);}else{Q.removeClass(this.prevBtnNode,R);}}mstrmojo.PageNavigationPanel=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.PageNavigationPanel",markupString:'<div class="mstrmojo-PageNavPanel {@cssClass}" style="{@cssText}" mstrAttach:click><div class="header"><div class="titles"><div class="title">{@title}</div><div class="subtitle">{@subtitle}</div></div><div class="progress"></div><div class="navigation"></div></div><div class="content"></div><div class="footer"><div class="prev"><div class="btn" btnv="pre">{@prevText}</div></div><div class="pges"></div><div class="next"><div class="btn" btnv="nxt">{@nextText}</div></div></div></div>',markupSlots:{headerNode:function(){return this.domNode.firstChild;},progressBarNode:function(){return this.domNode.firstChild.childNodes[1];},navigationNode:function(){return this.domNode.firstChild.childNodes[2];},containerNode:function(){return this.domNode.childNodes[1];},footerNode:function(){return this.domNode.lastChild;},prevBtnNode:function(){return this.domNode.lastChild.firstChild;},pagesNode:function(){return this.domNode.lastChild.childNodes[1];},nextBtnNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{onsubtitleChange:function(){this.headerNode.firstChild.lastChild.innerHTML=this.subtitle||"";},onheaderVisibleChange:function(){this.headerNode.style.display=this.headerVisible?"":"none";},ontitleVisibleChange:function(){this.headerNode.firstChild.style.display=this.titleVisible?"":"none";},onsubtitleVisibleChange:function(){this.headerNode.lastChild.style.display=this.subtitleVisible?"":"none";},onheightChange:function(){var U=this.headerHeight,T=this.footerHeight;if(this.height){if(!U||!T){U=this.headerHeight=this.headerNode.offsetHeight||0;T=this.headerHeight=this.footerNode.offsetHeight||0;}this.containerNode.style.height=(parseInt(this.height,10)-U-T)+"px";}}},title:"",subtitle:"",prevText:"Prev",nextText:"Next",selected:0,headerVisible:true,titleVisible:true,subtitleVisible:true,panels:null,renderedPanels:0,init:function M(T){this.panels=[];this._super(T);},onselectedChange:function K(){var V=this.selected,T=this._lastSelected,W=this.panels[V],U=this.panels[T];if(U){U.set("visible",false);}if(W){W.set("visible",true);}this.set("subtitle",W.title);this._lastSelected=this.selected;O.call(this);if(this.navlst){this.navlst.set("value",V);}this.updatePageNode();},onrenderedPanelsChange:function J(){var T=this.panels.length,U=this.renderedPanels;if(T>0){this.updateProgressNode(Math.floor(100*U/T));}else{this.updateProgressNode(0);}},updateProgressNode:function E(T){if(this.prgbar){this.prgbar.updateProgress(T,T+"% completed");}},updatePageNode:function A(){this.pagesNode.innerHTML=(this.getValidPanelsNum(this.selected)+1)+"/"+this.getValidPanelsNum(this.panels.length);},getValidPanelsNum:function D(X){var W=0,U=this.panels||[];for(var V=0,T=U.length;V<T;V++){if(V===X){return W;}if(!U[V].isHide){W++;}}return W;},getNextValidPanel:function H(W){var U=this.panels||[];for(var V=W+1,T=U.length;V<T;V++){if(!U[V].isHide){return V;}}return C;},getPreValidPanel:function F(V){var T=this.panels||[];for(var U=V-1;U>=0;U--){if(!T[U].isHide){return U;}}return C;},showNextPanel:function I(){var U=this.selected,V=this.panels[U],T=this.getNextValidPanel(U);if(T===C){return ;}if(!V.viewed){V.viewed=true;this.set("renderedPanels",this.renderedPanels+1);}this.set("selected",T);},showPreviousPanel:function L(){var T=this.selected,V=this.panels[T],U=this.getPreValidPanel(T);if(U===C){return ;}if(!V.viewed){V.viewed=true;this.set("renderedPanels",this.renderedPanels+1);}this.set("selected",U);},update:function G(W){var V=this.panels,T=V.length,X=this.navlst,U;if(W>=T){return ;}U=this.panels[W];this.updatePageNode();O.call(this);X.items[W].css=(!U.isHide)?"enabled":"disabled";},preBuildRendering:function B(){var U,T,Z=this.panels||[],Y=[],X=0,V=this;if(Z.length>0){for(U=0,T=Z.length;U<T;U++){if(U!==this.selected){Z[U].visible=false;}else{X=U;}Y.push({n:Z[U].title,v:U,css:(X===U)?"enabled":"disabled"});}this.set("children",[{scriptClass:"mstrmojo.ProgressBar",alias:"prgbar",slot:"progressBarNode"},{scriptClass:"mstrmojo.Pulldown",alias:"navlst",slot:"navigationNode",items:Y,itemIdField:"v",defaultSelection:X,onvalueChange:function a(){var b=V.panels,c=b[V._lastSelected];V.set("selected",this.value);this.items[this.value].css="enabled";if(!c.viewed){c.viewed=true;V.set("renderedPanels",V.renderedPanels+1);}},prevalueChange:function W(){var b=V.panels;if(!b[this.value].viewed||b[this.value].isHide){this.value=V._lastSelected;}}}].concat(Z));this.set("subtitle",Z[0].title);this._lastSelected=this.selected;}this._super();},postBuildRendering:function P(){this._super();this.updateProgressNode(0);this.updatePageNode();O.call(this);},onclick:function S(Z){var X=N.eventTarget(window,Z.e),U=X.getAttribute("btnv"),Y=this.selected,V=this.panels,T=V.length,a=this.getValidPanelsNum(Y),W=this.getValidPanelsNum(T);if(U){if(U==="pre"&&a>0){this.showPreviousPanel();}else{if(U==="nxt"&&a<W-1){this.showNextPanel();}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.graph._CanvasGraph");function B(){var D=document.createElement("canvas");D.width=10;D.height=10;return D;}mstrmojo.gm.VecDrawer=mstrmojo.declare(mstrmojo.Base,[mstrmojo.graph._CanvasGraph],{scriptClass:"mstrmojo.gm.VecDrawer",init:function C(D){this._super(D);this.selectionNode=B();this.highlightNode=B();},displayTooltips:function A(){}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Vis","mstrmojo._HasOwnAvatar");var K=mstrmojo.css,I=mstrmojo.dom,F="px";function B(Q,P){return{x:Q.x-P.x,y:Q.y-P.y};}function M(Q,P){return(Q.x-P.x)*(Q.x-P.x)+(Q.y-P.y)*(Q.y-P.y);}function N(P){var Q=P.src.data;return(!Q||!Q.isScrollBar);}mstrmojo.VisLegend=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.gm.VisLegend",bodyCssClass:"",avatarCssClass:"legend-dragged",dropZoneHighlightCss:"legend-dropZone",ownAvatar:true,draggable:true,dropZone:true,dockedPositions:null,calculateDockedPositions:mstrmojo.emptyFn,widget:null,boundaryNode:null,draggableNodeName:"domLegend",legendMarkup:"",extrasMarkup:"",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;position:absolute;" mstrAttach:click,mouseover,mouseout><div class="gm-legend-bg"><div class="{@bodyCssClass}" style="width:{@width}px;height:{@height}px;text-decoration:inherit">{@legendMarkup}</div></div><div class="gm-anchor-point topLeft"></div><div class="gm-anchor-point topRight"></div><div class="gm-anchor-point bottomLeft"></div><div class="gm-anchor-point bottomRight"></div>{@extrasMarkup}</div>',markupSlots:{dropZoneNode:function(){return this.domNode;},domLegend:function(){return this.domNode.firstChild.firstChild;}},postBuildRendering:function(){this._super();this.calculateDockedPositions(this.widget.getWidth(),this.widget.getHeight());this.boundaryNode=this.widget.domNode;this.boundaryPosition=I.position(this.boundaryNode,true);},createAvatar:function D(){return this[this.draggableNodeName];},updateDropZoneNode:function C(R){var P=this.dockedPositions;if(P&&P.length>0){var W=B(R.tgt.pos,this.boundaryPosition);var U=M(W,P[0]),T=0,Q,V;for(Q=1;Q<P.length;Q++){V=M(W,P[Q]);if(V<U){U=V;T=Q;}}if(T!==this.currDockedPositionIdx){var S=this.dropZoneNode.style;S.left=P[T].x+F;S.top=P[T].y+F;if(this.widget.onLegendDropZoneChange){this.widget.onLegendDropZoneChange(P[T],T);}this.currDockedPositionIdx=T;this.updateAlignClass();return true;}}return false;},toggleDropZoneBorder:function O(P){K.toggleClass(this.dropZoneNode,this.dropZoneHighlightCss,P);},isDragValid:N,ondragstart:function E(P){if(!N(P)){return ;}this._super(P);this.toggleDropZoneBorder(true);},ondragmove:function A(P){if(!N(P)){return ;}this.updateDropZoneNode(P);this._super(P);},allowDrop:function H(P){var R=P.src,Q=R&&R.widget;return(Q&&Q!==this&&Q.parent===this.parent);},ondrop:function J(R){var P=this.domLegend;K.removeClass(P,this.avatarCssClass);var S=P.style;S.left="0";S.top="0";this.dropZoneNode.firstChild.appendChild(P);if(this.widget.onLegendDropped){var Q=this.getDockedPosition();this.widget.onLegendDropped(Q&&Q.pos);}R.dropSuccessful=true;},getDockedPosition:function G(){return this.dockedPositions&&this.dockedPositions[this.currDockedPositionIdx];},ondragend:function A(P){if(!N(P)){return ;}this._super(P);if(!P.dropSuccessful){this.ondrop(P);}this.toggleDropZoneBorder(false);},positionAvatar:function L(U){var R=this,Q=this.avatar,S=Q.style,T=this.boundaryPosition;var P=function(V,W){if(V==="x"){if(W<T.x){return T.x;}return Math.min(W,T.x+T.w-R.domNode.offsetWidth);}if(V==="y"){if(W<T.y){return T.y;}return Math.min(W,T.y+T.h-R.domNode.offsetHeight);}};S.left=P("x",U.x)+F;S.top=P("y",U.y)+F;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.AdvancedColorPickerPopup","mstrmojo.Label","mstrmojo.HBox","mstrmojo.array","mstrmojo.ui.Checkbox");function A(G,H){var E=new mstrmojo.Label({text:G}),F=[H,E];mstrmojo.array.forEach(F,function(I){I.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",children:F};}function C(){var F=this,G=F.parent.sourceColor;var E=new mstrmojo.ui.Checkbox({cssDisplay:"inline-block",checked:F.isChecked,oncheckedChange:function(){var H=this.checked;if(H){F.set("color",G);F.colorChanged(G);}}});F.addChildren([A(F.parent.checkboxLabel,E)]);}mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker=mstrmojo.declare(mstrmojo.ui.editors.controls.AdvancedColorPickerPopup,null,{scriptClass:"mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker",isChecked:false,init:function D(E){this._super(E);if(this.parent.sourceColor===this.parent.selectedValue){this.isChecked=true;}},renderContent:function B(){this._super();if(this.parent.checkboxLabel){C.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker");mstrmojo.ui.editors.controls.MarkerColorPickerButton=mstrmojo.declare(mstrmojo.ui.editors.controls.ColorPickerButton,null,{scriptClass:"mstrmojo.ui.editors.controls.MarkerColorPickerButton",sourceColor:null,checkboxLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker",alias:"colorPicker",slot:"widgetHostNode",color:this.selectedValue,colorChanged:function(A){this.parent.set("selectedValue",A);this.close();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Widget","mstrmojo.VisUtility","mstrmojo.VisEnum");var F=mstrmojo.VisUtility,H=mstrmojo.VisEnum.ControlType,B=mstrmojo.array,G=1,E=5,D=8;function I(){var R=this.labelObj,L=F.measureTextHeight(R.text,this.styles,0,100,undefined,true,true);R.textWidth=F.measureTextWidth(R.text,this.styles,0,undefined,true);R.textHeight=F.measureTextHeight(R.text,this.styles,0,this.width-2*G-2*D,"break-word",true,false);this.lineChanged=this.width<R.textWidth+2*G+2*D;if(this.lineChanged){this.actualOffsetWidth=this.width;}else{this.actualOffsetWidth=R.textWidth+2*D+2*G;}var K=Math.floor((this.height-2*G-2*E)/L);this.hasEllipsis=this.height<R.textHeight+2*G+2*E;if(this.hasEllipsis){this.domNode.setAttribute("title",R.text);this.lineCount=Math.min(this.maxLineCount,K);if(this.lineCount===0){R.truncatedText="...";}else{R.truncatedText=F.truncateTextToLineWithWordWrap(R.text,this.styles,this.width-2*G-2*D,this.lineCount,false,true);var N=R.truncatedText.split(" "),J="";for(var M=0;M<N.length;M++){var O=F.measureTextWidth(N[M],this.styles);if(O>this.width-2*G){J+="...";}else{J+=N[M];}if(M===0&&M!==N.length-1){J+=" ";}}R.truncatedText=J;}}else{var P=R.text.split(" "),Q=false;B.forEach(P,function(T){var S=F.measureTextWidth(T,this.styles);if(S>this.width-2*G-2*E){Q=true;return false;}},this);if(Q){this.domNode.setAttribute("title",R.text);}this.lineCount=Math.min(this.maxLineCount,Math.round(R.textHeight/L));}if(this.lineCount===0){this.actualOffsetHeight=this.height;}else{this.actualOffsetHeight=this.lineCount*L+2*G+2*E;}this.domNode.style.width=this.actualOffsetWidth+"px";this.domNode.style.height=this.actualOffsetHeight+"px";}function A(){var J,Q,N,L,P=document,O=P.createDocumentFragment(),M=this.domNode,T=this.styles,S=this.labelObj,R=S.extraAttributes,K=0;L=P.createElement("div");L.setAttribute("class","gm-text-body-nowrap");L.style.whiteSpace="normal";L.style.textAlign="center";L.setAttribute("type",H.GM_TEXT_BODY);L.innerHTML=this.hasEllipsis?S.truncatedText:S.text;L.container=M;L.style.width=this.actualOffsetWidth-2*G+"px";L.style.height=this.actualOffsetHeight-2*G+"px";L.style.padding=E+"px "+D+"px";F.applyStyles2DomNode(L,T);N=P.createElement("div");N.setAttribute("class","gm-textbody-unit");N.style.left=K+"px";N.style.width=this.actualOffsetWidth-2*G+"px";N.style.height=this.actualOffsetHeight-2*G+"px";for(J in R){if(R.hasOwnProperty(J)){Q=R[J];if((typeof Q)==="string"||(typeof Q)==="number"){N.setAttribute(J,String(Q));}else{N[J]=R[J];}}}N.appendChild(L);O.appendChild(N);M.appendChild(O);}function C(){var K=this.domNode,N=this.width,L=this.height,J=this.actualOffsetWidth,M=this.actualOffsetHeight;K.style.left=Math.floor((N-J)/2)+"px";K.style.top=Math.floor((L-M)/2)+"px";}mstrmojo.gm.TitleLabelCapsule=mstrmojo.declare(mstrmojo.Widget,[],{scriptClass:"mstrmojo.gm.TitleLabelCapsule",cssClass:"",width:10,height:10,labelObj:null,styles:null,actualOffsetWidth:0,actualOffsetHeight:0,hasEllipsis:false,lineChanged:false,lineCound:1,maxLineCount:2,markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px; height:auto"></div>',init:function(J){this.labelObj={};this.styles={};if(this._super){this._super(J);}},postBuildRendering:function(){I.call(this);A.call(this);C.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.VisUtility");var R=mstrmojo.css,A=mstrmojo.VisUtility,H=mstrmojo.array,D=mstrmojo.string,I="vis-tooltip",N=20,P=165,L=350,E=350,G="px";function Q(){var U=this.domNode;U.innerHTML="";var S=document.createElement("div");S.className=I+"-container";var V=document.createElement("table");V.className=I+"-table";for(var T=0;T<3;T++){V.appendChild(document.createElement("COL"));}S.appendChild(V);this.domNode.appendChild(S);return V;}function K(T){var S=[],U=false;H.forEach(T,function(V){if(!V.isSuper){S.push(V.v);}else{U=true;S.push("<sup>"+V.v+"</sup>");}});return{hasSuper:U,htmlText:S.join("")};}mstrmojo.VisTooltip=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.VisTooltip",init:function O(S){this._super(S);R.addWidgetCssClass(this,(S&&S.widgetClass)?[S.widgetClass,I]:I);},toggle:function M(S){var T=mstrApp.isAppStatePrintPreview&&mstrApp.isAppStatePrintPreview();if(this.domNode){this.domNode.style.display=S&&!T?"block":"none";}},displayInfo:function C(V,c,S){var U=this.domNode,d=Q.call(this),a=false,T=0,b=0,W=10,Z=false,Y=d.childNodes[0],X=d.childNodes[2];V.forEach(function(o){var u,n,w,r,e,l,s,q,x,p,v,t;if(!Z){var g=d.insertRow(-1),k=g.insertCell(-1),j=g.insertCell(-1),h=g.insertCell(-1);g.className=I+"-tr";k.className=I+"-name";j.className=I+"-space";h.className=I+"-value";if(o===null){R.addClass(g,"separator");a=true;}else{if(a){R.addClass(g,"below-separator");}if(!S){j.innerHTML=":";}u=o.n;t=!o.skipEncode;k.innerHTML=t?D.encodeHtmlString(u,true):u;w=A.getComputedFontStyle(k);r=Math.ceil(A.measureTextWidth(k.innerHTML,w,w.bonus));s=U.offsetHeight>=E?1:2;if(r>P){q=A.truncateTextToLineWithWordWrap(u,w,P,s,true);if(q.canWordWrap){k.innerHTML=t?D.encodeHtmlString(q.text,true):q.text;}else{q=A.truncateTextToLineWithWordWrap(u,w,P,1);k.innerHTML=t?D.encodeHtmlString(q,true):q;}}T=Math.min(Math.max(T,r),P);n=o.v;p=o.isTrendLineFuncToken;if(p){x=K(n);}if(!p||!x.hasSuper){if(p){n=x.htmlText;}h.innerHTML=t?D.encodeHtmlString(n,true):n;e=A.getComputedFontStyle(h);l=Math.ceil(A.measureTextWidth(h.innerHTML,e,e.bonus,null,true));if(l>P){q=A.truncateTextToLineWithWordWrap(n,e,P,o.noTruncate?100:s,true);if(!q.canWordWrap){q=A.truncateTextToLineWithWordWrap(n,e,P,1,true);}h.innerHTML=t?D.encodeHtmlString(q.text,true):q.text;l=q.maxLineLen;}b=Math.min(Math.max(b,l),P);}else{h.innerHTML=x.htmlText;e=A.getComputedFontStyle(h);l=0;H.forEach(n,function(y){y.textWidth=A.measureSuperTextWidth(y.isSuper,y.v,e,e.bonus);l+=y.textWidth;});l=Math.ceil(l);if(l>P){q=A.truncateTextToLineWithWordWrapForTokens(n,e,P,o.noTruncate?100:s,true,true);if(!q.canWordWrap){q=A.truncateTextToLineWithWordWrapForTokens(n,e,P,1,true);}h.innerHTML=K(q.text).htmlText;l=q.maxLineLen;}b=Math.min(Math.max(b,l),P);}Y.style.width=T+"px";X.style.width=b+"px";v=T+b+W;d.style.width=mstrmojo.dom.isIE9?(v+2)+"px":v+"px";a=false;}if(U.offsetHeight>=E){var f=d.lastChild;f&&f.removeChild(f.lastChild);Z=true;}}});if(c){this.moveTo(c.x,c.y);}},moveTo:function(a,Z){var Y=mstrmojo.dom.position(document.body),W=this.domNode,b=W.offsetWidth,X=W.offsetHeight,V=Y.x+Y.w,c=Y.y+Y.h,T=a+N,S=Z+N;if(T>V-b||S>c-X){if(T<=V-b){S=c-X;}else{if(S<=c-X){T=V-b;}else{T=V-b;S=Z-N-X;}}}var U=W.style;U.left=T+G;U.top=S+G;},doLayout:function B(S){var U=this.domNode.getElementsByTagName("table")[0];if(!U){return ;}var V=R.getComputedStyle(this.domNode),T=S-parseInt(V.paddingLeft,10)-parseInt(V.paddingRight,10);T-=U.rows[0].cells[0].offsetWidth;T-=10;U.getElementsByClassName(I+"-value").forEach(function(W){W.style.maxWidth=T+G;});},posTo:function J(T){var S=this.domNode.style;S.left=T.x+G;S.top=T.y+G;},renderErrMsg:function F(S){Q.call(this).insertRow(-1).insertCell(-1).innerText=S;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.gm._IsAnchorable","mstrmojo.ui._HasUITheme","mstrmojo.VisUtility");var D=mstrmojo.dom,E=mstrmojo.VisUtility;mstrmojo.gm.DndTooltip=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.gm._IsAnchorable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.gm.DndTooltip",left:0,top:0,zIndex:10,boundaryNodeName:"boundary",popupNodeName:"infoNode",baseTipClass:"arrow",infoNodeOffset:0,popupNodeOffset:5,anchor:null,boundary:null,utils:mstrmojo.VisChartUtils,themeClassName:"mojo-theme-light",markupString:'<div id="{@id}" class="mstrmojo-Tooltip {@cssClass}" style="top:{@top}px;left:{@left}px;z-index:{@zIndex};position:absolute;{@cssText};"><div class="mstrmojo-Tooltip-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Tooltip-content {@contentNodeCssClass}" style="{@contentNodeCssText}"><div class="content"></div><div class="arrow"><div class="after"></div><div class="before"></div></div></div></div>',markupSlots:{infoNode:function(){return this.domNode.childNodes[1];},contentNode:function(){return this.domNode.childNodes[1].firstChild;},tipNode:function(){return this.domNode.childNodes[1].lastChild;}},toggle:function A(G){if(G){this.domNode.style.display="block";}else{this.domNode.style.display="none";}},updateContent:function(G,I,H){this.set("themeClassName",mstrApp.getThemeClassName());this.fillContent(G,I,H);this.positionDialog();},fillContent:function C(I,M,K){this.anchor=I;this.anchorPosition=M;this.contentNode.innerHTML=K||this.anchor.innerText||this.anchor.textContent;this.toggle(true);var G=E.getComputedFontStyle(this.contentNode),L=this.contentNode.innerHTML,H=E.measureTextWidth(L,G),J=130;if(H<=J){this.contentNode.style.width=H+"px";}else{this.contentNode.innerHTML=E.truncateTextToLineWithWordWrap(L,G,J,3);this.contentNode.style.width=J+"px";}},getTipDimension:function B(){var H=this[this.tipNodeName],G=D.position(H.firstChild);return G;},applyPopupNodePos:function F(I,H,K,G){var M=this[this.tipNodeName],J=M.style,N=this[this.popupNodeName],L=N.style;L.top=I+"px";L.left=H+"px";J.top=(K-I)+"px";J.left=(G-H)+"px";}});}());(function(){mstrmojo.requiresCls("mstrmojo.gm.GMEnums","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.VisEnum.GMLegendFormatingPropertyTag","mstrmojo.VisUtility");var N=mstrmojo.gm.EnumTRFManipulations;var J=mstrmojo.array,C=mstrmojo.hash,M=mstrmojo.func.wrapMethods,G=mstrmojo.func.composite,I=mstrmojo.VisEnum.GMLegendFormatingPropertyTag;var D={silent:false,undo:mstrmojo.emptyFn,redo:mstrmojo.emptyFn};function K(O){return O.model.controller.cmdMgr;}function L(){return(this.getDocModel&&this.getDocModel())||this.model.docModel;}function H(){return{success:function O(){this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}function E(P,R){var O,U,Q,S,T={};T.tks=this.k;T.selectorObjects=P;T.keepOnly=!!R;T.isDocVis=true;O=L.call(this);U=O.getDataService();Q=U.getGMViewFilterAction(T);S=O.getSliceCallback(T);return{action:Q,callbacks:S};}function B(Q,P){var O,S,R;O=L.call(this);R=O.getDataService();if(!this.isXMLDirty()){R.submitUpdates(Q,P);}else{S=this.getPersistAction();R.submitUpdates([Q,S],P);this.resetXMLDirtyFlag();}}function A(){var b=this.modelData||this.model.data,S=b.k,Z,Y="FormattingWidget",U,T,X,P,Q,R=[],W=[],V=this.edtModel;if(!b){console.log("warning: modelData is missing");return null;}var a=function(d,f){var c=T.createElement(f),e;if(d instanceof Object){for(e in d){if(d.hasOwnProperty(e)){var g=a(d[e],e);if(g){c.appendChild(g);}}}}else{c.setAttribute("value",d);}return c;};var O=function(c){return c.replace(/</g,"&lt;").replace(/"/g,"&quot;");};W=!!V&&!!V.getActionsWithUpdateProperty?V.getActionsWithUpdateProperty():[];X=this.createWidgetPropsXML?this.createWidgetPropsXML():null;if(!X||X.length===0){U=this.getProperties();if(this.useCompatibleXML){T=(new DOMParser()).parseFromString("<widgetProps></widgetProps>","text/xml");T.firstChild.appendChild(a(U,"fmt"));}else{T=(new DOMParser()).parseFromString("<props><widgetProps></widgetProps></props>","text/xml");T.firstChild.firstChild.appendChild(a(U,"fmt"));}X=(new XMLSerializer()).serializeToString(T);}P=O(X);Q={act:"setProperty",nodeKey:S,prs:Y,pri:4,v:P};R.push(Q);if(!!W){R=R.concat(W);}return R;}function F(P,Q,O,T){if(!(T instanceof Function)){return D;}var S=this.id;function R(U){return function(){var W=mstrmojo.all[S],V=W.getProperties();V[P]=U;T.call(W,U,true);W.getDocModel().selectVIUnit(W.parent.id,true);};}return{silent:true,undo:R(O),redo:R(Q)};}mstrmojo._VizSelectionHelper=mstrmojo.provide("mstrmojo._VizSelectionHelper",{postBuilderingCalled:false,listenToUpdateColorMap:function(R){if(mstrmojo.VisUtility.isOnExpressMode()){return ;}var Q=this,P,O=(Q.getDocModel&&Q.getDocModel())||Q.model.docModel;if(O){return O.attachEventListener("colorMapChanged",Q.id,function(T){P=Q.parent&&Q.parent.parent;if(Q.forceUpdateColorMap||(P&&P.isPanelDisplaying())){R.call(Q);}else{var S=P.attachEventListener("panelDisplaying",Q.id,function(U){if(Q.postBuilderingCalled){R.call(Q);}P.detachEventListener(S);});}});}},detachUpdateColorMapListener:function(P){if(!P){return ;}var O=(this.getDocModel&&this.getDocModel())||this.model.docModel;O.detachEventListener(P);},updateTargets:function(P){var S={},Q=this,O=L.call(this);S.fromGM=true;S.type=1;S.src=this.k;S.selectorObjects=P;function R(V){var T=Q.modelData||Q.model.data,U=T.sc;if(U!==undefined){return U[V];}return undefined;}S.keepOnly=true;S.ck=R.call(this,"ck");S.keyContext=S.ck;S.tks=R.call(this,"tks");S.ckey=R.call(this,"ckey");S.isDocVis=true;S.include=true;S.showall=R.call(this,"showall");O.slice(S);},updateAfterViewFilter:function(Q,O){var V,U,P,T,S,W,R;V=L.call(this);U=V.getDataService();T=E.call(this,Q,O);P=T.action;S=T.callbacks;R=this.model.controller||V.controller;if(this.currKeepOnlyAction){W=[C.clone(this.currKeepOnlyAction)];}else{W=E.call(this,[],false).action;}this.currKeepOnlyAction=P;R.submitUndoRedoUpdates([P],W,S);},updateAfterKeepOnly:function(Q){var P=L.call(this),O=this.model.controller||P.controller,R=M(O._getXtabCallback(this),H.call(this));O.applyKeepOnly(this,R,{keepOnly:Q,data:this.getSelections()},Q?-2:undefined);},updateAfterDrill:function(O,Y){var V=this,Z=L.call(this),X=Z.getDataService(),R=X.newUpdate(),Q=this.getSelections(),U=this.model.getSelectorDataFromViewFilter(V.model.data.vfexpr).concat({keepOnly:true,data:Q}),P=Z.getKeepOnlyOrExcludeAction(V.k,U),S=V.model.controller||Z.controller,T=S._getXtabCallback(V);R.add(O,M(Y,T));R.add(P,H.call(V));K(V).execute({execute:function W(){this.submitUpdate(R);},urInfo:{callback:R.callback}});},updateAfterSort:function(R){var P=this,O=L.call(this),S=O.getDataService(),T=O.getSliceCallback({tks:P.k});K(P).execute({execute:function Q(){var V=S.newUpdate(this,undefined),U={act:"sortGM",nodeKey:P.k,subActions:R};V.add(U,T,undefined);if(P.isXMLDirty()){V.addActions(P.getPersistAction());}this.submitUpdate(V,undefined);},urInfo:{callback:T}});},updateAfterAction:function(T,O,P,a,X){if(!T){return ;}var V=this,Q=V.parent&&V.parent.id,b=V.model.docModel,U=V.model.controller||b.controller,Z,Y,S={},W,R=X||D;if(P){Z=mstrmojo.emptyFn;W=function(){this.submitSilent(T);};}else{Z=b.getSliceCallback({tks:this.k});Z.success=G([Z.success,function(){b.selectVIUnit(Q,true);}]);W=function(){this.submit(T,Z,S);};}Y=U._getXtabCallback(V);if(O){Z=M(Z,O);Y=M(Y,O);}Y.success=G([Y.success,function(){b.selectVIUnit(Q,true);}]);if(P){C.copy(mstrmojo.DocDataService.SUPPRESS_DATA,S);}if(a){C.copy(mstrmojo.DocDataService.REQUEST_DEFN_DATA,S);}K(this).execute({execute:W,urInfo:{silent:R.silent,callback:Y,redo:R.redo,undo:R.undo}});},getProperties:mstrmojo.emptyFn,getSetPropertiesAction:A,updateAfterPropertiesChange:function(P,Q,O,R){this.updateAfterAction(A.call(this),P,Q,O,R);},setProperty:function(V,R,T){var P=T.callback,Q=!!T.suppressData,X=T.requestDefinition,S=T.clientUndoRedoCallback,W=this.getProperties(),O=W[V],U;if(V===I.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorMap(this.colorSqureIdentity.comb,R);}}else{if(W&&(W[V]===undefined||W[V].toString()!==R.toString())){W[V]=R;U=F.call(this,V,R,O,S);this.updateAfterPropertiesChange(P,Q,X,U);}}},showData:function(O){if(!this.gridData){this.gridData=this.model.data;}mstrmojo.vi.ui.ViewDataDialog.open(this.parent,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.WidgetMatrix","mstrmojo.gm.GMEnums","mstrmojo.util.ui._HostsSplitter","mstrmojo.util.ui._LassoSelector");var K=Math,S=mstrmojo.chart,I=mstrmojo.VisUtility,U=1,P=mstrmojo.hash,T=mstrmojo.array,G=2,C=mstrmojo.VisEnum.ControlType,W=mstrmojo.gm.EnumDockPosition,A="-1";function M(b,Y,a){var c=document.createElement("div"),Z=b===W.LEFT||b===W.RIGHT,X=Z?"gm-resizer-v":"gm-resizer-h";c.setAttribute("class",X);c.setAttribute("type",C.SPLITTER);c.setAttribute("dockPosition",b);c.setAttribute("splitterType",Y);c.setAttribute("splitterId",a);c.setAttribute("draggable","false");return c;}function L(c,e,X,f){if(!c){return ;}var Z,j,a,h,d=c.style,k=e===W.TOP,Y=e===W.BOTTOM,g=e===W.LEFT,b=e===W.RIGHT;if(k||Y){Z=X;j=U;a=0;h=-G;if(Y){h+=f;}else{h-=U;}}else{if(g||b){Z=U;j=f;h=0;a=-G;if(b){a+=X;}else{h-=U;}}}d.left=a+"px";d.top=h+"px";d.width=Z+"px";d.height=j+"px";}function N(X){return X?X.firstChild:null;}function E(X){return X?X.firstChild.childNodes:[];}function V(c,f,X,e,h,b){var d,Z=f.length,a,g,Y=b[X];if(!Y){Y=e.getNormalizedFormElementId(X);b[X]=Y;}for(d=0;d<Z;d++){g=f[d].id;if(g===X){return true;}a=b[g];if(!a){a=e.getNormalizedFormElementId(g);b[g]=a;}if(h&&c!==A){if(e.compareNormalizedElementsId(a,Y)){return true;}}else{if(a===Y){return true;}}}return false;}function R(w,r,b,Y,v){var p,h,o,k,u,f,l,s=w.getSelectedObjectInfo(true),Z,q,a={},e,c=r.length,d,X,g,t;h=s.length;for(p=0;p<h;p++){q=String(s[p].tid);if(Y&&q!==A){a[p]=[q].concat(b.getLinkedAttributes(q)||[]);}else{a[p]=[q];}}for(e=0;e<c;e++){d=r[e];X=true;g=false;for(f in d){if(d.hasOwnProperty(f)){l=d[f];Z=true;t=false;for(p=0;p<h;p++){u=a[p];for(o=0,k=u.length;o<k;o++){if(u[o]===f){t=true;if(!V(f,l,s[p].eid,b,Y,v)){Z=false;}else{g=true;}break;}}if(t){break;}}if(!Z){X=false;break;}}}if(X&&g){return true;}}return false;}function O(Y){var Z,b,a={},X=Y.identity,c=X.getSelectedObjectInfo(false),d=c.length;for(Z=0;Z<d;Z++){b=c[Z];if(a[b.tid]===undefined){a[b.tid]=[{id:b.eid,n:b.v}];}else{if(b.tid===-1){a[b.tid].push({id:b.eid,n:b.v});}else{a[b.tid][0].n+=(":"+b.v);}}}return a;}mstrmojo.gm.GMContainer=mstrmojo.declare(mstrmojo.WidgetMatrix,[mstrmojo.util.ui._HostsSplitter,mstrmojo.util.ui._LassoSelector],{scriptClass:"mstrmojo.gm.GMContainer",enableLassoSelect:false,useAsSelectorOrBrushes:false,shouldDrawShapeFlag:true,rowSplitterEnabled:true,colSplitterEnabled:true,useDropDownBtn:false,useOwnSplitter:true,minChartHeight:20,minChartWidth:20,init:function Q(X){this.hSplitters=[];this.vSplitters=[];if(this._super){this._super(X);}this.API.lassoSelected=undefined;this.API.lassoSelecting=undefined;},postBuildRendering:function(){if(this._super){this._super();}var Y=this.domNode,X=this.domCanvas,Z=this.styles,b=this.splitterConfig;if(Z){I.applyStyles2DomNode(Y,Z);}if(b){var a=M(b.dockPosition,b.splitterType,b.splitterId);Y.appendChild(a);this.registerSplitter(a);L(a,b.dockPosition,this.width,this.height);this.splitter=a;}if(this.enableLassoSelect){this.registerLassoSelector(X,[C.SPLITTER],this.useDropDownBtn);}},getSplitterInfo:function F(X){if(!X){return{};}var d=X.getAttribute("isInChart")==="yes",g={};if(d===true){var e=parseInt(X.getAttribute("id"),10),a=X.getAttribute("isRowIndex")==="yes",b=a?this.API.getRowSpan:this.API.getColSpan,j=b(e,this.depth)[0];g.min=a?(this.getRowPosition(j)+this.minChartHeight):(this.getColPosition(j)+this.minChartWidth);g.index=e;g.isRowIndex=a;g.isInChart=true;}else{var f=this.splitterConfig.dockPosition,h=f===W.LEFT,c=f===W.RIGHT,k=f===W.TOP,Y=f===W.BOTTOM,Z=this.splitterConfig;if(h){g.max=K.max(this.width-this.minChartWidth,0);}else{if(c){g.min=this.minChartWidth;}else{if(k){g.max=K.max(this.height-this.minChartHeight,0);}else{if(Y){g.min=this.minChartHeight;}}}}if(Z){g.dock=Z.dockPosition;g.type=Z.splitterType;g.id=Z.splitterId;}}return g;},splitterMoved:function(X,b){if(X===0){return ;}if(b.isInChart){var Y=b.index,a=b.isRowIndex,Z=this.manager;if(a){Z.resizeRow(this,Y,X);Z.doUpdateInChartSplitters(true,false);}else{Z.resizeCol(this,Y,X);Z.doUpdateInChartSplitters(false,true);}}else{this.manager.raiseEvent({name:"splitterMoved",position:X,info:b});L(this.splitter,this.splitterConfig.dockPosition,this.width,this.height);}},enableSplitter:function(X){var Y=this.splitter;if(Y){Y.style.display=X?"block":"none";}},clearCharts:function(){this.hSplitters=[];this.vSplitters=[];if(this._super){this._super();}},resize:function(Y,X){if(this._super){this._super(Y,X);}if(this.splitterConfig){L(this.splitter,this.splitterConfig.dockPosition,this.width,this.height);}},resizeAbs:function(X,Y){if(this._super){this._super(X,Y);}if(this.splitterConfig){L(this.splitter,this.splitterConfig.dockPosition,X,Y);}},updateCharts:function(){if(this._super){this._super();}this.doUpdateInChartSplitters(true,true);},doUpdateChartsGlobally:function(){if(this._super){this._super();}},enableRowSplitter:function(X){if(X!==this.rowSplitterEnabled){this.rowSplitterEnabled=X;this.doUpdateInChartSplitters(true,false);}},enableColSplitter:function(X){if(X!==this.colSplitterEnabled){this.colSplitterEnabled=X;this.doUpdateInChartSplitters(false,true);}},createRowSplitter:function D(X){var Y=document.createElement("div");Y.setAttribute("class","gm-resizer-h");Y.setAttribute("type",C.SPLITTER);Y.setAttribute("isInChart","yes");Y.setAttribute("isRowIndex","yes");Y.setAttribute("draggable","false");Y.setAttribute("id",String(X));return Y;},createColSplitter:function B(Y){var X=document.createElement("div");X.setAttribute("class","gm-resizer-v");X.setAttribute("type",C.SPLITTER);X.setAttribute("isInChart","yes");X.setAttribute("isRowIndex","no");X.setAttribute("draggable","false");X.setAttribute("id",String(Y));return X;},positionRowSplitter:function J(c,Y,X,b){var Z=X-Y,a=b-G-U;c.style.cssText="width:"+Z+"px; height:"+U+"px; left:"+Y+"px; top:"+a+"px; display:block";},positionColSplitter:function H(c,a,Z,Y){var X=Z-a,b=Y-G-U;c.style.cssText="width:"+U+"px; height:"+X+"px; left:"+b+"px; top:"+a+"px; display:block";},doUpdateInChartSplitters:function(r,q){if(!this.useOwnSplitter){return ;}this.calculateBBox();var p,c,b,g,o,X=this.domCanvas,f=this.nRows,h=this.nCols,s=this.hSplitters,l=this.vSplitters,n=this.wAccArr,Z=this.hAccArr,d=this.doRowIntersectionCheck(),j=this.doColIntersectionCheck(),a=d.start,k=d.end,e=j.start,Y=j.end;if(r){o=this.rowSplitterEnabled;for(p=0;p<f;p++){g=l[p];if(p>=a&&p<=k&&p!==f-1&&this.getActiveFlag(p+1,e)===true){b=Z[p];if(g===undefined){g=this.createRowSplitter(p);X.appendChild(g);this.registerSplitter(g);l[p]=g;}this.positionRowSplitter(g,K.max(this._x1,0),K.min(this._x2,this.canvasW),b);g.style.display=o?"block":"none";}else{if(g){g.style.display="none";}}}}if(q){o=this.colSplitterEnabled;for(p=0;p<h;p++){g=s[p];if(p>=e&&p<=Y&&p!==h-1&&this.getActiveFlag(a,p+1)===true){c=n[p];if(g===undefined){g=this.createColSplitter(p);X.appendChild(g);this.registerSplitter(g);s[p]=g;}this.positionColSplitter(g,K.max(this._y1,0),K.min(this._y2,this.canvasH),c);g.style.display=o?"block":"none";}else{if(g){g.style.display="none";}}}}},filterShapes:function(e,X,p,q){var h=this.APIOwner.model,b=this.APIOwner.normalizedIdCache,t=!!h.docModel.als,o=this.getChart(X,p);if(!o){this.doUpdateCharts(X,X,p,p,false);o=this.getChart(X,p);}var f,d,a,k,Y,l,Z=E(o)||[],s=Z.length;for(f=0;f<s;f++){k=Z[f];if(!k){continue;}Y=k.childNodes;a=Y.length;for(d=0;d<a;d++){l=Y[d];if(l.getAttribute("type")==="shape"){if(R(l.identity,q,h,t,b)){e.push(l);}}}}},efficientFilterShapes:function(a,h,w,t){var b=this.APIOwner.model,v=this.APIOwner.normalizedIdCache,Y=!!b.docModel.als,f=this.getChart(h,w),z,y,l,d,x,q;if(!f){this.doUpdateCharts(h,h,w,w,false);f=this.getChart(h,w);}var p,o,k,s,e,X,u=E(f)||[],Z=u.length;for(p=0;p<Z;p++){s=u[p];if(!s){continue;}e=s.childNodes;k=e.length;for(o=0;o<k;o++){X=e[o];if(X.getAttribute("type")==="shape"){z=X.identity;if(z.isPie){y=z.sPieDP.graphCell;l=y.gID;d=y.sID;x=z.sliceIdx;q=a[l]&&a[l][d]&&a[l][d][x];if(q===undefined){if(a[l]===undefined){a[l]={};}if(a[l][d]===undefined){a[l][d]={};}a[l][d][x]=R(z,t,b,Y,v);}}else{y=z.gc;l=y.gID;d=y.sID;q=a[l]&&a[l][d];if(q===undefined){if(a[l]===undefined){a[l]={};}a[l][d]=R(z,t,b,Y,v);}}}}}},selectHighLightShapes:function(Z,e,s,f){var d=this.getChart(e,s),v,u,k,a,t;if(!d){this.doUpdateCharts(e,e,s,s,false);d=this.getChart(e,s);}var o,l,h,p,b,X,q=E(d)||[],Y=q.length;for(o=0;o<Y;o++){p=q[o];if(!p){continue;}b=p.childNodes;h=b.length;for(l=0;l<h;l++){X=b[l];if(X.getAttribute("type")==="shape"){v=X.identity;if(v.isPie){u=v.sPieDP.graphCell;t=v.sliceIdx;}else{u=v.gc;}k=u.gID;a=u.sID;if(Z[k]===undefined){continue;}if(v.isPie){if(Z[k][a]===undefined){continue;}if(Z[k][a][t]){f.push(X);}}else{if(Z[k][a]){f.push(X);}}}}}},getSelectionHash:function(Z){var X=P.keyarray(Z).sort(),Y=[],b,a=this.APIOwner;T.forEach(X,function(c){b=[];T.forEach(Z[c],function(d){b.push(a.model.getNormalizedFormElementId(d.id));},a);Y.push(c+"-"+b.sort().join("@"));},a);return Y.join("#");},constructShapeMap:function(h,X,o){var l=this.getChart(X,o);if(!l){this.doUpdateCharts(X,X,o,o,false);l=this.getChart(X,o);}var e,d,a,f,Y,k,q,b,Z=E(l)||[],p=Z.length;for(e=0;e<p;e++){f=Z[e];if(!f){continue;}Y=f.childNodes;a=Y.length;for(d=0;d<a;d++){k=Y[d];if(k.getAttribute("type")==="shape"){q=O.call(this,k);q=this.getSelectionHash(q);b=h[q];if(b===undefined){h[q]=[];h[q].push(k);}else{b.push(k);}}}}},intersectionCheckOnChart:function(AE,AU,AT,p,o,Ab,Aa){var AZ=this.getChart(AU,AT),b=N(AZ);if(!AZ||!b){return ;}var AR,AO,AP,s,AD,AC,AM,AW,v=AZ.offsetLeft,u=AZ.offsetTop,z=AZ.offsetWidth,AF=AZ.offsetHeight,f=E(AZ),l=f.length,q,AQ;p=Math.max(p-v,0);o=Math.min(o-v,z);Ab=Math.max(Ab-u,0);Aa=Math.min(Aa-u,AF);var c=S.ChartConstants.kPI,a=function(k,j,r,n,h,g){return h>=k&&h<=j&&g>=r&&g<=n;},e=function(h,g,k,j){return(k-h)*(k-h)+(j-g)*(j-g);},AG=function(g,j,h){return g>=j&&g<=h;},Y=function(g,j,h){while(g<h){g+=c*2;}while(g>h){g-=c*2;}return !j||!h||g>=j;},Z=function(h,g){var k=h.x2-h.x1,j=h.y2-h.y1,r=g.x2-g.x1,n=g.y2-g.y1,w=function(x,Ad,Ac,y){return x*y-Ad*Ac;};return w(k,j,g.x1-h.x1,g.y1-h.y1)*w(k,j,g.x2-h.x1,g.y2-h.y1)<=0&&w(r,n,h.x1-g.x1,h.y1-g.y1)*w(r,n,h.x2-g.x1,h.y2-g.y1)<=0;},AA=function(j,n,h,k,g){return Z({x1:j,y1:n,x2:j,y2:k},g)||Z({x1:j,y1:n,x2:h,y2:n},g)||Z({x1:h,y1:n,x2:h,y2:k},g)||Z({x1:j,y1:k,x2:h,y2:k},g);},d=function(j,Ac,h,y,w,k,g,x,Ad){var n=function(Ah,Ag){var r,Af,Ae;if(Math.abs(Ah)>g){return false;}if(Ag){r=Math.acos(Ah/g);Ae=k+g*Math.sin(r);return AG(Ae,Ac,y)&&Y(r,x,Ad)||AG(2*k-Ae,Ac,y)&&Y(-r,x,Ad);}else{r=Math.asin(Ah/g);Af=w+g*Math.cos(r);return AG(Af,j,h)&&Y(r,x,Ad)||AG(2*w-Af,j,h)&&Y(c-r,x,Ad);}};return n(j-w,true)||n(Ac-k,false)||n(h-w,true)||n(y-k,false);};for(AP=0;AP<l;AP++){AW=f[AP];if(!AW){continue;}AO=AW.childNodes.length;for(AR=0;AR<AO;AR++){s=AW.childNodes[AR];if(s.getAttribute("type")==="shape"){q=s.tagName;AQ=false;if(q==="rect"){var AJ=parseInt(s.getAttribute("x"),10),AI=parseInt(s.getAttribute("y"),10),AK=parseInt(s.getAttribute("width"),10),AV=parseInt(s.getAttribute("height"),10);AQ=Math.max(AJ,0)<=o&&Math.min(AJ+AK,z)>=p&&Math.max(AI,0)<=Aa&&Math.min(AI+AV,AF)>=Ab;}else{if(q==="circle"){AD=parseInt(s.getAttribute("cx"),10);AC=parseInt(s.getAttribute("cy"),10);AM=parseInt(s.getAttribute("r"),10);AQ=e(AD,AC,p,Ab)<AM*AM||e(AD,AC,p,Aa)<AM*AM||e(AD,AC,o,Ab)<AM*AM||e(AD,AC,o,Aa)<AM*AM||a(p-AM,o+AM,Ab,Aa,AD,AC)||a(p,o,Ab-AM,Aa+AM,AD,AC);}else{if(q==="path"){AD=s.sX;AC=s.sY;AM=s.sR||s.sOutR;if(!!AM){var AN=s.sInR||0,X=s.sRadStart,t=s.sRadEnd,AB=!!s.sRadStart,AL=AB&&(AA(p,Ab,o,Aa,{x1:AD+Math.cos(X)*AN,y1:AC+Math.sin(X)*AN,x2:AD+Math.cos(X)*AM,y2:AC+Math.sin(X)*AM})||AA(p,Ab,o,Aa,{x1:AD+Math.cos(t)*AN,y1:AC+Math.sin(t)*AN,x2:AD+Math.cos(t)*AM,y2:AC+Math.sin(t)*AM}));AQ=AL||d(p,Ab,o,Aa,AD,AC,AN,X,t)||d(p,Ab,o,Aa,AD,AC,AM,X,t)||a(p,o,Ab,Aa,AD+Math.cos(X)*AN,AC+Math.sin(X)*AN)||AG(e(p,Ab,AD,AC),AN*AN,AM*AM)&&Y(Math.atan((Ab-AC)/(p-AD))+(p>AD?0:c),X,t);}}else{if(q==="polyline"||q==="polygon"){var AH=s.pointList||[],AS=AH.length,AY,AX;if(AS>0){AQ=a(p,o,Ab,Aa,AH[0].x,AH[0].y);for(AU=1;AU<AS&&!AQ;AU++){AY=AH[AU-1];AX=AH[AU];AQ=AA(p,Ab,o,Aa,{x1:AY.x,y1:AY.y,x2:AX.x,y2:AX.y});}if(q==="polygon"&&!AQ){AQ=(new S.Point2D({x:p,y:Ab})).IsInPolygon(AH)||AA(p,Ab,o,Aa,{x1:AX.x,y1:AX.y,x2:AH[0].x,y2:AH[0].y});}}}}}}if(AQ){AE.push(s);}}}}},lassoSelecting:function(){var X=this.API.lassoSelecting;if(X){X.call(this.APIOwner);}},lassoSelected:function(Z){if(!Z||Z.left===undefined||Z.top===undefined||Z.width===undefined||Z.height===undefined){return ;}var f,d,g,n,b,h,e,o,c=[],p=[],a=this.API.lassoSelected,Y=Z.left,l=Z.top,X=Y+Z.width,k=l+Z.height;g=this.doRowIntersectionCheck(l,k);n=this.doColIntersectionCheck(Y,X);b=g.start;h=g.end;e=n.start;o=n.end;for(f=b;f<=h;f++){for(d=e;d<=o;d++){c.push({row:f,col:d});this.intersectionCheckOnChart(p,f,d,Y,X,l,k);}}Z.selectedCharts=c;Z.selectedShapes=p;if(a){a.call(this.APIOwner,Z);}},lassoSelectorResized:function(X){this.lassoSelected(X);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.Widget","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo._HasOwnAvatar");var B=mstrmojo,G=B.dom,D=B.css,F=B.VisUtility,E=B.gm.EnumDockPosition,H=B.VisEnum.ControlType,C=3;mstrmojo.VisSplitter=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.VisSplitter",cssClass:"gm-matrix-line",bodyCssClass:"gm-matrix-line-body",ctnType:H.LINE_CONTAINER,dir:"h",draggable:true,markControlType:false,markupString:'<div id="{@id}" class="{@cssClass}" type={@ctnType} style="width:{@bodyWidth}px; height:{@bodyWidth}px;"><div class="{@bodyCssClass}" type={@type} style="width:{@width}px; height:{@height}px;"></div></div>',markupSlots:{domBody:function(){return this.domNode.firstChild;}},init:function(I){this._super(I);},preBuildRendering:function(){var K=this.dir,M=this.styles,I=this.draggable,J=this.cssClass,L=this.bodyCssClass;J+=" "+K;J+=(I?" draggable":"");this.cssClass=J;L+=" "+K;L+=(I?" draggable":"");this.bodyCssClass=L;this.bodyWidth=parseInt(M.borderWidth,10)||1;},postBuildRendering:function(){this.domNode.identity=this.identity;this.domBody.identity=this.identity;F.applyStyles2DomNode(this.domBody,this.styles);if(this.markControlType){this.domNode.setAttribute("ctrlType",this.context.type);this.domBody.setAttribute("ctrlType",this.context.type);}},hide:function(){this.domNode.style.display="none";},updateSize:function(I){this.sizeInfo=I;},updateStyle:function(K){var J=this.domNode.style,I=parseInt(K.borderWidth,10)||1;this.styles=K;J.width=I+"px";J.height=I+"px";F.applyStyles2DomNode(this.domBody,K);},updatePosition:function(P){var O=P.left,N=P.top,M=P.width,I=P.height,K=this.dir,L=this.domNode.style,J=this.domBody.style;if(O!==undefined){if(K==="v"){O-=C;}L.left=O+"px";}if(N!==undefined){if(K==="h"){N-=C;}L.top=N+"px";}if(M!==undefined){L.width=M+"px";J.width=M+"px";}if(I!==undefined){L.height=I+"px";J.height=I+"px";}L.display="block";},createAvatar:function(){var J=this.domBody,M=G.position(J),I=J.cloneNode(true),K=I.style,L=D.getStyleValue(J,"borderColor");K.top=M.y+"px";K.left=M.x+"px";K.borderColor=L;return I;},isDragValid:function A(){return true;},ondragstart:function(P){var J,O,N=P.src.pos,L=this.context.dock,K=this.sizeInfo,M=Math.max(K.size-K.min,0),Q=Math.max(K.max-K.size,0),I=(this.dir==="v"?"x":"y");if(L===E.RIGHT||L===E.BOTTOM){J=N[I]-M;O=N[I]+Q;}else{J=N[I]-Q;O=N[I]+M;}this.lower=J;this.upper=O;this.startPos=P.src.pos;this._super(P);},ondragend:function(Q){this._super(Q);var O,J=this.dir,L=this.startPos,I=Q.tgt.pos,K=this.lower,P=this.upper,N=I.x,M=I.y;if(J==="v"){N=Math.max(N,K);N=Math.min(N,P);O=N-L.x;}else{M=Math.max(M,K);M=Math.min(M,P);O=M-L.y;}if(O!==0){this.raiseEvent({name:"splitterMoved",position:O,info:this.context});}},positionAvatar:function(P){var L=this.avatar,N=L.style,K=this.dir,J=this.lower,M=this.upper,I=P.x,O=P.y;if(K==="v"){I=Math.max(I,J);I=Math.min(I,M);N.left=I+"px";}else{O=Math.max(O,J);O=Math.min(O,M);N.top=O+"px";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.string","mstrmojo.Widget","mstrmojo.VisUtility");var M=mstrmojo,R=M.css,O=M.hash,H=M.VisUtility,D=M.dom,A=M.string,C=M.VisEnum.ControlType,K=5,Q=15,G=1,L=5,E=8,S=0,F=mstrmojo.desc(14442,"This metric has its axis scale set to custom min and max values");function I(){var U,W,T=0,V=this.styles,Y=this.contentData,X=Y.length;if(D.isFF){this.DOTS_WIDTH=H.measureTextWidth("W…",V,2*E+2*G);this.DOTS_WIDTH_NO_PADDING=H.measureTextWidth("W…",V,2*G);}else{this.DOTS_WIDTH=H.measureTextWidth("…",V,2*E+2*G);this.DOTS_WIDTH_NO_PADDING=H.measureTextWidth("…",V,2*G);}for(U=0;U<X;U++){W=Y[U];W.width=H.measureTextWidth(W.text,V,2*E+2*G);if(W.sort){T++;}if(W.extraAttributes.customScale){T++;}}this.nSort=T;}function J(){var c,e,b,X=false,d=this.contentData,W=d.length,Z=W,U=parseInt(this.width,10),a=(W-1)*K,Y=this.nSort*Q,T=a+Y,f,V;for(c=0;c<W;c++){delete d[c].actualWidth;}while(!X){while(Z>0){f=Math.floor((U-T)/Z);b=false;for(c=0;c<W;c++){if(d[c].actualWidth!==undefined){continue;}e=d[c].width;if(e<=f){d[c].actualWidth=e;T+=e;b=true;Z--;}}if(!b){break;}}if(Z>0){for(c=W-1;c>=0;c--){if(d[c].actualWidth===undefined){Z--;if(f<this.DOTS_WIDTH_NO_PADDING){d[c].actualWidth=-1;V=0;if(d[c].sort){V++;}if(d[c].extraAttributes.customScale){V++;}if(c>0){T-=K;}T-=V*Q;break;}else{if(f<=this.DOTS_WIDTH){d[c].noPadding=true;}}d[c].actualWidth=f;T+=f;}}if(c===0||Z===0){X=true;}}else{X=true;}}this.contentWidth=T;}function N(){var W=parseInt(this.width,10),b=parseInt(this.height,10),U=this.contentWidth,a=(W-b)>>1,V=(U-b-2*S)>>1,T=(W-U)>>1,Y=this.align,X=this.domNode,Z={};if(Y==="left"||Y==="right"){R.addClass(X,"gm-rotate-270");if(U<W){Z.width=U;}Z.top=a;if(Y==="left"){Z.left=-V;}else{Z.right=-V;}}else{if(Y==="top"||Y==="bottom"){if(U<W){Z.width=U;Z.left=T;}}else{if(Y==="center"){if(U<=W){Z.width=U;Z.right=0;Z.bottom=0;}}}}H.positionDomNode(X,Z);}function B(X,T,W){var V=(X==="left"||X==="right")?"row":"column",U=T?"ascendingly":"descendingly";return"This "+V+" is sorted "+U+" based on "+W;}function P(){var f,p,d,b,g,X,Y,T,k,l,c,o=document,U=o.createDocumentFragment(),h=this.domNode,W=this.styles,j=this.contentData,e=this.align,a=j.length,Z=parseInt(this.height,10),V=0;for(f=0;f<a;f++){b=j[f];if(b.actualWidth<0){continue;}X=b.text;g=b.extraAttributes;c=g.sortOrder;if(e==="left"||e==="right"){if(g.customScale){Y=o.createElement("div");Y.setAttribute("class","gm-lock-icon");Y.setAttribute("title",F);Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}if(g.sort){Y=o.createElement("div");Y.setAttribute("class",c?"gm-sort-icon ascend":"gm-sort-icon");Y.setAttribute("title",B(e,c,X));Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}}k=o.createElement("div");k.setAttribute("class","gm-text-body-nowrap");k.setAttribute("type",C.GM_TEXT_BODY);k.innerHTML=A.encodeHtmlString(X,true);k.container=h;k.style.width=b.actualWidth-2*G+"px";k.style.height=Z-2*G+"px";if(!b.noPadding){k.style.padding=L+"px "+E+"px";}else{k.style.padding="0px";k.innerHTML="…";}H.applyStyles2DomNode(k,W);if(e==="left"||e==="right"){k.rotated=true;}T=o.createElement("div");T.setAttribute("class","gm-textbody-unit");T.appendChild(k);if(b.actualWidth<b.width){k.setAttribute("title",X);}else{k.style.overflow="visible";}T.style.left=V+"px";T.style.width=b.actualWidth-2*G+"px";T.style.height=Z-2*G+"px";U.appendChild(T);for(p in g){if(g.hasOwnProperty(p)){d=g[p];if((typeof d)==="string"||(typeof d)==="number"){T.setAttribute(p,String(d));}else{T[p]=g[p];}}}V+=b.actualWidth;if(e!=="left"&&e!=="right"){if(g.customScale){Y=o.createElement("div");Y.setAttribute("class","gm-lock-icon");Y.setAttribute("title",F);Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}if(g.sort){Y=o.createElement("div");Y.setAttribute("class",c?"gm-sort-icon ascend":"gm-sort-icon");Y.setAttribute("title",B(e,c,X));Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}}if(f!==a-1&&j[f+1].actualWidth>0){l=o.createElement("div");l.setAttribute("class","gm-text-body-nowrap");l.innerHTML="|";l.style.left=V-2+2+"px";l.style.width=K+"px";l.style.padding="5px 2px";l.style.overflow="visible";H.applyStyles2DomNode(l,W);U.appendChild(l);V+=K;}}h.appendChild(U);}mstrmojo.VisAxisLabel=mstrmojo.declare(mstrmojo.Widget,[],{scriptClass:"mstrmojo.VisAxisLabel",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}; height:{@height}"></div>',init:function(T){this.align="left";this.styles={};this.contentData=[];this.contentWidth=0;if(this._super){this._super(T);}I.call(this);},postBuildRendering:function(){J.call(this);N.call(this);P.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.gm.DndTooltip","mstrmojo.VisUtility","mstrmojo.vi.models.EnumDragSources");var N=mstrmojo,I=N.dom,K=N.VisUtility,C=N.vi.models.EnumDragSources,J=N.array;mstrmojo.gm._SupportDndAsBlackBox=mstrmojo.provide("mstrmojo.gm._SupportDndAsBlackBox",{_mixinName:"mstrmojo.gm._SupportDndAsBlackBox",mainContainerNode:"domNode",handleDndForParentNode:true,dndAsBlackBox:true,allowDrop:function H(R){var S=R.src.data,Q=S&&S.src;if(Q===C.DATASETS||Q===C.VIZ_EDITOR||Q===C.VIZ||Q===C.ALL_OBJECT_LIST){return true;}return false;},cleanUpAfterTarget:function E(Q){this._super(Q);if(this.domNode.contains(this.dndHighlightCanvas)){this.domNode.removeChild(this.dndHighlightCanvas);}delete this.dndHighlightCanvas;if(this.dndTooltip){this.dndTooltip.destroy();}delete this.dndTooltip;},ondragenter:function M(R){if(this._super){this._super(R);}var W=this.isEmpty();if(W){R.tgt.widget=this;this.raiseEvent({name:"toggleCtrlOverlay",visible:false,controls:this.getVisEmptyMsgControls()});}var V;if(!this.dndHighlightCanvas){var Q=document.createElement("canvas"),U=I.position(this.domNode),T=I.position(this[this.mainContainerNode]);this.domNode.appendChild(Q);Q.style.position="absolute";Q.style.zIndex=1000;Q.width=T.w||U.w;Q.height=T.h||U.h;Q.style.top=(T.y-U.y)+"px";Q.style.left=(T.x-U.x)+"px";this.dndHighlightCanvas=Q;}if(!this.dndTooltip){V=document.createElement("div");document.body.appendChild(V);var S={placeholder:V,contentNodeCssClass:"gm-dnd-replace-node-tooltip",boundary:document.body};this.dndTooltip=new mstrmojo.gm.DndTooltip(S);this.dndTooltip.render();this.dndTooltip.parent=this;}this.ondragover(R);},ondragover:function B(Q){if(this._super){this._super(Q);}if(this.dndAsBlackBox){this.clearHighlightDropZoneOnGraph();this.drawBlackBoxHighlight(Q);}},ondragleave:function P(Q){var R=this.isEmpty();if(R){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});}if(this._super){this._super(Q);}},ondrop:function L(R){if(this._super){this._super(R);}if(this.dndAsBlackBox){var U=this.zonesModel,T=R.src.data,Q=T.items,S=R.getCtxtDragData().src;U.addUnitsFromDataSource(Q,T.dsid,R.actions,S===C.ALL_OBJECT_LIST?R.callback:null);}},clearHighlightDropZoneOnGraph:function G(){var R=this.dndHighlightCanvas,Q=R.getContext("2d");Q.clearRect(0,0,R.width,R.height);this.dndTooltip.toggle(false);},isMetric:function O(Q){return Q&&Q.t===4;},isAttrCategory:function D(Q){return Q&&(Q.t===12||Q.t===1||Q.t===47);},singleTypeObject:function F(Q){var T=0,S=0,R=this;J.forEach(Q.src.data.items,function(U){if(R.isAttrCategory(U)){T++;}else{if(R.isMetric(U)){S++;}}});return !(T>0&&S>0);},drawBlackBoxHighlight:function A(S){var T=this.dndHighlightCanvas,a=T.getContext("2d"),X=I.position(this[this.mainContainerNode]),Q=I.position(this.domNode),R=X.w||Q.w,Z=X.h||Q.h,W=Math.min(30,0.25*R),b=Math.min(30,0.25*Z);a.save();a.beginPath();a.rect(W,b,R-2*W,Z-2*b);a.fillStyle="#bce8ff";a.globalAlpha=0.4;a.fill();a.strokeStyle="#34abeb";a.globalAlpha=1;K.drawDashLine(a,W,b,W,Z-b,2,2);K.drawDashLine(a,W,b,R-W,b,2,2);K.drawDashLine(a,R-W,b,R-W,Z-b,2,2);K.drawDashLine(a,W,Z-b,R-W,Z-b,2,2);a.restore();if(!this.singleTypeObject(S)){var U=this.dndTooltip,Y={x:S.tgt.e.x,y:S.tgt.e.y,w:0,h:0},V=S.src.widget.avatar;if(V){Y=I.position(V);}U.placementOrder=[U.PLACEMENT_ABOVE];U.popupNodeOffset=5;U.updateContent(null,Y,"Add Attributes and Metrics");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle","EnumFontAlignment","EnumFontStyle","EnumFontRotation");var M=mstrmojo.chart,J=M.enums,H=J.EnumBoxStyle,D=J.EnumFontAlignment,R=J.EnumFontStyle,T=J.EnumFontRotation,I=M.common.Utility,N=1,S=3;var B=["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize"],F=[D.FA_CENTER,R.FS_NORMAL,T.FR_NORMAL,H.BS_NOFRAME,null,255,"Verdana",15];mstrmojo.chart.FormatFont=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFont",mFontAlignment:D.FA_CENTER,mFontStyle:R.FS_NORMAL,mFontRotation:T.FR_NORMAL,mFontBox:H.BS_NOFRAME,mFontColor:null,mFontAlpha:255,mFontName:null,mFontSize:15,init:function L(X){var W,V=B.length;this._super(X);if(X&&X.Font){var U=X.Font;mstrmojo.hash.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontAlpha","mFontName","mFontSize"],U,this);this.mFontColor=U.mFontColor;}else{if(X&&X.Bare){for(W=0;W<V;++W){this[B[W]]=null;}}}if(!this.mFontColor&&!(X&&X.Bare)){this.mFontColor=M.gBlack.ToInteger();}this.mFontName=this.mFontName||"Verdana";},ApplyFontFormat:function K(V,U){if(this.mFontSize<S){this.mFontSize=S;}if(!U){V.applyFontFormat(this);}},GetFontExtent:function A(){return Math.floor(this.mFontSize<S?S:this.mFontSize*N);},GetStringExtent:function O(V){var W,U,X;this.ApplyFontFormat(null,true);X=I.measureText(V,this.mFontName,this.mFontSize,this.mFontStyle);W=X.Width;U=X.Height;return{Width:W,Height:U};},GetStringHeight:function P(U){this.ApplyFontFormat(null,true);return I.measureTextHeight(U,this.mFontName,this.mFontSize,this.mFontStyle);},isVertical:function E(){var U=this.mFontRotation;return U===T.FR_90||U===T.FR_270;},isHorizontal:function C(){var U=this.mFontRotation;return U===T.FR_NORMAL||U===T.FR_180;},evalMargins:function Q(){return I.evaluateTextMargin(this.mFontSize);},restoreDefaults:function G(V){var U;if(V){for(U=0;U<B.length;++U){this[B[U]]=F[U];}}else{for(U=0;U<B.length;++U){if(this[B[U]]===null){this[B[U]]=F[U];}}}if(this.mFontColor===null){this.mFontColor=M.gBlack.ToInteger();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","FormatFont");var O=mstrmojo.chart;mstrmojo.chart.SubTextHolder=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.SubTextHolder",mVecStr:null,mInitVecPartition:null,mVecPartition:null,mVecSize:null,mSpaceWidth:0,mMaxWordWidth:0,init:function M(S){this._super(S);this.mVecStr=[];this.mInitVecPartition=[];this.mVecPartition=[];this.mVecSize=[];},Clear:function P(){this.mVecStr.splice(0,this.mVecStr.length);},ParseText:function K(W,c,a){var Y=this.mInitVecPartition,S,Z,V,U,T,b=[],X;S=W.split("\n");Y.splice(0,this.mInitVecPartition.length);Y.push(0);V=0;Z=S.length;for(U=0;U<Z;++U){b=S[U].split(c);V+=b.length;Y.push(V);X=b.length;for(T=0;T<X;++T){this.mVecStr.push(this.TruncateWord(b[T],a));}}this.mVecPartition=Y.concat();},TruncateWord:function E(U,S){if(S<4||S>U.length){return U;}var T=U.substr(0,S-3);T+="...";return T;},UpdateText:function B(W,T){var V,U,S,Z,X,Y;this.mVecSize.splice(0,this.mVecSize.length);V=T;U=0;S=this.mVecStr.length;for(Z=0;Z<S;Z++){X={width:0,mX_bearing:0,mX_advance:0};if(this.mVecStr[Z]===""){this.mVecSize.push(X);}else{Y=V.GetStringExtent(this.mVecStr[Z]);X.width=X.mX_advance=Y.Width;this.mVecSize.push(X);if(Y.Width>U){U=Y.Width;}}}this.mMaxWordWidth=U;Y=V.GetStringExtent(" ");this.mSpaceWidth=Y.Width;},GetMaxWidth:function Q(){var V,S,T,U;V=0;S=this.mVecPartition.length;for(T=0;T+1<S;++T){U=this.GetOneLineWidth(T);if(U>V){V=U;}}return Math.floor(V+0.5);},GetOneLineWidth:function D(W){var S=this.mVecPartition,V=this.mVecSize,U,T;U=0;for(T=S[W];T<S[W+1];T++){if(T===S[W]&&T===S[W+1]-1){U+=V[T].width;}else{if(T===S[W]&&T!==S[W+1]-1){U+=V[T].mX_advance-V[T].mX_bearing;}else{if(T!==S[W]&&T===S[W+1]-1){U+=V[T].width+V[T].mX_bearing;}else{U+=V[T].mX_advance;}}}if(T!==S[W]){U+=this.mSpaceWidth;}}return U;},GetOneWordWidth:function F(S){return this.mVecSize[S].width;},GetStringWidth:function L(U,T){var S=T.GetStringExtent(U);return S.Width;},GetSpaceWidth:function N(){return this.mSpaceWidth;},GetSpaceWidthEx:function C(S){var T=S.GetStringExtent(" ");return T.Width;},GetLineCount:function G(){return this.mVecPartition.length-1;},SetLineCount:function J(T,S){if(T<1){return ;}if(S!==0){S=S||-1;}var U=this.mVecPartition;if(T===1){U.splice(0,U.length);U.push(0);U.push(this.mVecSize.length);}else{if(this.GetLineCount()<=T){if(S===-1){return ;}if(this.GetMaxWidth()<=S){return ;}this.PartitionBy(S,true);if(this.GetLineCount()>T){U.length=T+1;U[U.length-1]=this.mVecSize.length;}}else{U.length=T+1;U[U.length-1]=this.mVecSize.length;}}},PartitionBy:function H(V,a){var U=this.mVecPartition,Y=this.mInitVecPartition,Z,X,W,T,S;a=(a!==undefined)?a:true;if(!a&&V<this.mMaxWordWidth){V=Math.floor(this.mMaxWordWidth+0.5);}U.splice(0,U.length);Z=Y.length;for(X=0;X+1<Z;++X){U.push(Y[X]);T=0;S=Y[X];for(W=Y[X];W<Y[X+1];W++){T+=this.mVecSize[W].mX_advance;if(W!==Y[X+1]-1){T+=this.mSpaceWidth;}if(T>V&&W!==S){T=0;S=W;U.push(W--);}}}if(Z>0){U.push(Y[Z-1]);}},GetOneLineString:function R(U){var S=this.mVecPartition,V="",T;for(T=S[U];T<S[U+1];T++){V=V.concat(this.mVecStr[T]);if(T!==S[U+1]-1){V=V.concat(" ");}}return V;},GetOneLineWords:function A(V){var T=this.mVecPartition,U,S=[];for(U=T[V];U<T[V+1];U++){S.push(U);}return S;},GetOneLineXBearing:function I(S){return this.mVecSize[this.mVecPartition[S]].mX_bearing;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill","JSONInstruction","JSONUtil","JSONUnit","JSONFormatFill","JSONFormatFont","JSONFormatLine");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.enums.EnumInstructionName");var d=mstrmojo.chart,L=mstrmojo.chart.enums,x=L.EnumInstructionName,t=d.JSONUtil.prototype,N=mstrmojo.hash;function F(AE,AD){return AE.mpOriginalAddress-AD.mpOriginalAddress;}function X(AE,AD){if(AE===undefined){AE=x.JSONInsUndefined;}if(AD===undefined){AD=null;}else{AD=AD.id;}if(this.mpCurrentUnit===null){this.mpCurrentUnit=new d.JSONUnit();this.mUnitList.push(this.mpCurrentUnit);}return this.mpCurrentUnit.AddInstruction(AE,AD);}function U(AF){var AD=this.mFormatMap,AE=AF.id;if(AF instanceof d.FormatFill){if(AD[AE]===undefined){AD[AE]=new d.JSONFormatFill(AF);}}else{if(AF instanceof d.FormatFont){if(AD[AE]===undefined){AD[AE]=new d.JSONFormatFont(AF);}}else{if(AF instanceof d.FormatLine){if(AD[AE]===undefined){AD[AE]=new d.JSONFormatLine(AF);}}}}}mstrmojo.chart.JSONCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.JSONCanvas",mIsJSONObjectConstructed:false,mpCurrentUnit:null,mUnitList:null,mFormatMap:null,mFormatList:null,mJSONObject:null,init:function v(AD){this._super(AD);this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};},reset:function q(){this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};this.mIsJSONObjectConstructed=false;this.mpCurrentUnit=null;},SaveToObject:function o(AE){var AD;if(!this.mIsJSONObjectConstructed){this.hConstructJSONObject();}for(AD in this.mJSONObject){AE[AD]=this.mJSONObject[AD];}return true;},saveState:function r(){X.call(this,x.JSONInsSaveState);},RestoreState:function W(){X.call(this,x.JSONInsRestoreState);},Clip:function h(){X.call(this,x.JSONInsClip);},Scale:function Q(AD,AF){var AE=X.call(this,x.JSONInsScale);AE.AppendToParameterList("X",AD);AE.AppendToParameterList("Y",AF);},Rotate:function T(AD,AF){var AE=X.call(this,x.JSONInsRotate);AE.AppendToParameterList("Anchor",AD);AE.AppendToParameterList("Radian",AF);},NewPath:function S(){X.call(this,x.JSONInsNewPath);},ClosePath:function l(){X.call(this,x.JSONInsClosePath);},MoveTo:function c(AD,AH,AF,AG){var AE=X.call(this,x.JSONInsMoveTo);AE.AppendToParameterList("X",AD);AE.AppendToParameterList("Y",AH);if(AF){AE.AppendToParameterList("CA",1);AE.AppendToParameterList("BPX",AG.x);AE.AppendToParameterList("BPY",AG.y);}else{AE.AppendToParameterList("CA",0);}},LineTo:function P(AD,AH,AF,AG){var AE;AE=X.call(this,x.JSONInsLineTo);AE.AppendToParameterList("X",AD);AE.AppendToParameterList("Y",AH);if(AF){AE.AppendToParameterList("CA",1);AE.AppendToParameterList("BPX",AG.x);AE.AppendToParameterList("BPY",AG.y);}else{AE.AppendToParameterList("CA",0);}},BezierCurveTo:function K(AG,AF,AJ,AH,AD,AI){var AE;AE=X.call(this,x.JSONInsBezierCurveTo);AE.AppendToParameterList("CP1X",AG);AE.AppendToParameterList("CP1Y",AF);AE.AppendToParameterList("CP2X",AJ);AE.AppendToParameterList("CP2Y",AH);AE.AppendToParameterList("X",AD);AE.AppendToParameterList("Y",AI);},SetRGBAFillColor:function f(AH,AF,AD,AG){var AE;AE=X.call(this,x.JSONInsSetRGBAFillColor);AE.AppendToParameterList("R",this.BoundedValue(AH*256,0,255));AE.AppendToParameterList("G",this.BoundedValue(AF*256,0,255));AE.AppendToParameterList("B",this.BoundedValue(AD*256,0,255));AE.AppendToParameterList("A",this.BoundedValue(AG,0,1));},BoundedValue:function V(AF,AE,AD){if(AF<AE){return AE;}if(AF>AD){return AD;}return AF;},SetRGBAStrokeColor:function y(AH,AF,AD,AG){var AE;AE=X.call(this,x.JSONInsSetRGBAStrokeColor);AE.AppendToParameterList("R",this.BoundedValue(AH*256,0,255));AE.AppendToParameterList("G",this.BoundedValue(AF*256,0,255));AE.AppendToParameterList("B",this.BoundedValue(AD*256,0,255));AE.AppendToParameterList("A",this.BoundedValue(AG,0,1));},FillPath:function j(){X.call(this,x.JSONInsFillPath);},StrokePath:function H(){X.call(this,x.JSONInsStrokePath);},SetLineDash:function E(AF,AE){var AD=X.call(this,x.JSONInsSetLineDash);AD.AppendArrayToParameterList("LinePattern",AF,AE);},SetLineWidth:function n(AD){var AE=X.call(this,x.JSONInsSetLineWidth);AE.AppendToParameterList("LineWidth",AD);},SetLineJoin:function I(AE){var AD=X.call(this,x.JSONInsSetLineJoin);AD.AppendToParameterList("Type",AE);},SetFontSize:function Z(AE){var AD=X.call(this,x.JSONInsSetFontSize);AD.AppendToParameterList("FontSize",AE);},AddRect:function u(AE,AH,AG,AD){var AF=X.call(this,x.JSONInsAddRect);AF.AppendToParameterList("X",AE);AF.AppendToParameterList("Y",AH);AF.AppendToParameterList("W",AG);AF.AppendToParameterList("H",AD);},AddArc:function Y(AE,AJ,AD,AH,AF,AI){var AG=X.call(this,x.JSONInsAddArc);AG.AppendToParameterList("X",AE);AG.AppendToParameterList("Y",AJ);AG.AppendToParameterList("Radius",AD);AG.AppendToParameterList("StartAngle",AH);AG.AppendToParameterList("EndAngle",AF);AG.AppendToParameterList("AntiClockwise",AI);},AddNeedle:function z(AG,AF,AH,AE){var AD=X.call(this,x.JSONInsAddNeedle);AD.AppendToParameterList("NeedleStyle",AG);AD.AppendToParameterList("BasePoint",AF);AD.AppendToParameterList("Angle",AH);AD.AppendToParameterList("Size",AE);},AddString:function b(AD,AF){var AE=X.call(this,x.JSONInsAddString);AE.AppendToParameterList("Point",AD);AE.AppendToParameterList("Text",AF);},FillSimple:function g(AH,AF,AD,AG){var AE=X.call(this,x.JSONInsFillSimple,AH);AE.AppendToParameterList("DarkerFactor",AF);if(AG){AE.AppendToParameterList("HEP",1);AE.AppendToParameterList("FC",AD);}else{AE.AppendToParameterList("HEP",0);}U.call(this,AH);},FillPattern:function w(AD){X.call(this,x.JSONInsFillPattern,AD);U.call(this,AD);},FillGradient:function s(AG,AD,AF){var AE=X.call(this,x.JSONInsFillGradient,AG);AE.AppendToParameterList("BoundingRect",AD);AE.AppendToParameterList("DarkerFactor",AF);U.call(this,AG);},FillEdgeType:function C(AF,AE){var AD=X.call(this,x.JSONInsFillEdgeType,AF);AD.AppendSimpleVectorToParameterList("Polygon",AE);U.call(this,AF);},FillRadientGradient:function G(AL,AK,AJ,AI,AH,AG,AD,AF,AM){var AE=X.call(this,x.JSONInsFillRadientGradient,AL);AE.AppendToParameterList("RGUsage",AK);AE.AppendToParameterList("CX",AJ);AE.AppendToParameterList("CY",AI);AE.AppendToParameterList("InnerRadius",AH);AE.AppendToParameterList("OuterRadius",AG);if(AD){AE.AppendToParameterList("HEP",1);AE.AppendToParameterList("ExtraDepth",AF);AE.AppendToParameterList("ExtraIntensity",AM);}else{AE.AppendToParameterList("HEP",0);}U.call(this,AL);},FillBorderMetallic:function AA(AJ,AE,AI,AH,AD,AG){var AF=X.call(this,x.JSONInsFillBorderMetallic,AJ);AF.AppendToParameterList("BorderUse",AE);AF.AppendToParameterList("CX",AI);AF.AppendToParameterList("CY",AH);AF.AppendToParameterList("Radius",AD);AF.AppendToParameterList("Thickness",AG);U.call(this,AJ);},FillDonutOrSphere:function a(AG,AD,AF){var AE=X.call(this,x.JSONInsFillDonutOrSphere,AG);AE.AppendToParameterList("BoundingRect",AD);AE.AppendToParameterList("IsCircularShape",AF);U.call(this,AG);},MakeDarker:function p(AF,AE){var AD=X.call(this,x.JSONInsMakeDarker,AF);AD.AppendToParameterList("Factor",AE);U.call(this,AF);},RestoreColor:function AC(AD){X.call(this,x.JSONInsRestoreColor,AD);U.call(this,AD);},ApplyLineFormat:function R(AD){X.call(this,x.JSONInsApplyLineFormat,AD);U.call(this,AD);},AddFormatedText:function J(AD,AG,AH,AF){var AE=X.call(this,x.JSONInsAddFormatedText,AD);AE.AppendToParameterList("StartPoint",AG);AE.AppendToParameterList("Text",AH);U.call(this,AD);},ApplyBeveledFrameToRectangle:function e(AI,AK,AH,AJ,AE,AG,AD){var AF=X.call(this,x.JSONInsApplyBeveledFrameToRectangle);AF.AppendToParameterList("Rect",AI);AF.AppendToParameterList("RotationAngle",AK);AF.AppendToParameterList("BevelDepth",AH);AF.AppendToParameterList("LTColor",AJ);AF.AppendToParameterList("LTAlpha",AE);AF.AppendToParameterList("RBColor",AG);AF.AppendToParameterList("RBAlpha",AD);},DrawGaugeMarker:function k(AF,AI,AD,AH,AG){var AE=X.call(this,x.JSONInsAddGaugeMarker);AE.AppendToParameterList("MarkSize",AI);AE.AppendToParameterList("MarkShape",AD);AE.AppendToParameterList("Angle",AH);AE.AppendToParameterList("NeedleSize",AG);AE.AppendToParameterList("BPX",AF.x);AE.AppendToParameterList("BPY",AF.y);},ApplyDonutToRect:function A(AF,AE,AG){var AD=X.call(this,x.JSONInsFillDonut2Rect,AG);AD.AppendToParameterList("StartPoint",AF);AD.AppendToParameterList("EndPoint",AE);},BeginFirstFrame:function AB(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new d.JSONUnit({mIsAnimated:true,mIsLastFrame:false});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToFirstFrame();},BeginLastFrame:function B(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new d.JSONUnit({mIsAnimated:true,mIsLastFrame:true});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToLastFrame();},EndFrame:function D(){if(this.mpCurrentUnit!==null&&this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=null;}},EndUnit:function M(){this.mpCurrentUnit=null;},hConstructJSONObject:function O(){var AE=this.mFormatList,AI=this.mUnitList,AF,AD,AG,AH,AJ;AF=this.mJSONObject={};N.forEach(this.mFormatMap,function(AL,AK,AM){AE.push(AL);});AE.sort(F);AD=AI.length;for(AG=0;AG<AD;++AG){AI[AG].CalculateFormatIndex(AE);}AF.UnitList=[];if(AD>0){if(AD===1){AH={};AI[0].AppendToJSONObject(AH);AF.UnitList.push(AH);}else{AJ=0;AH={};AI[0].AppendToJSONObject(AH);AF.UnitList.push(AH);for(AG=1;AG<AD;++AG){AH={};AI[AG].AppendToJSONObject(AH);if(AI[AG-1].IsAnimated()!==AI[AG].IsAnimated()){AF.UnitList.push(AH);AJ++;}else{AF.UnitList[AJ].InstructionList=AF.UnitList[AJ].InstructionList.concat(AH.InstructionList);}}}}t.AppendCompoundPointerVectorToJSONObject("FormatList",AE,AF);this.mIsJSONObjectConstructed=true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility","mstrmojo.chart.common.Utility","mstrmojo.chart.enums.EnumInstructionName");var Ag=mstrmojo.chart.model,AS=Ag.enums,AP=mstrmojo.VisUtility,As=AS.EnumDSSGraphGradientType,j=3.141592653589793,q={area:["gm-shape-scircle","",""],line:["gm-shape-scircle","",""],"line-sizeby":["gm-shape-sbar","",""],bar:["gm-shape-bar","","gm-shape-grid-bar"],circle:["gm-shape-circle","gm-shape-circle","gm-shape-grid-circle"],square:["gm-shape-square","gm-shape-square","gm-shape-grid-square"],ticker:["gm-shape-ticker","gm-shape-ticker","gm-shape-grid-ticker"],pie:["gm-shape-pie","gm-shape-pie","gm-shape-pie"],ring:["gm-shape-ring","gm-shape-ring","gm-shape-ring"],markerRect:["gm-shape-bar","gm-shape-bar","gm-shape-bar"],markerCircle:["gm-shape-circle","gm-shape-circle","gm-shape-circle"]},v={area:["scircle","",""],line:["scircle","",""],"line-sizeby":["sbar","",""],bar:["bar","","gbar"],circle:["circle","circle","circle"],square:["square","square","square"],ticker:["ticker","ticker","ticker"],pie:["pie","pie","pie"],ring:["ring","ring","ring"],markerRect:["gmMarker","gmMarker","gmMarker"],markerCircle:["gmMarker","gmMarker","gmMarker"]};var G=mstrmojo.chart.common.Utility;var M={mR:0,mG:0,mB:0},s={"stroke-width":0};function o(A5,A2){var A1=1,A4=2,A3=this.mStyle;if(A5===A1){A3["stroke-dasharray"]=Aj.call(this,true,A2);}else{if(A5===A4){A3["stroke-dasharray"]=Aj.call(this,false,A2);}}}function J(A1){var A3,A2=document.createElementNS(this.mXMLNS,"polygon"),A5=A1.length,A4="";for(A3=0;A3<A5;++A3){A4+=(A1[A3].x+","+A1[A3].y+" ");}A2.setAttribute("points",A4);return A2;}function z(A4,A1){var A2,A3,A5=this.getDrawOrder(A4);this.mStyle["stroke-width"]="0";this.mAttributes["class"]="gm-set-line-polygon";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A4;A2=this.hCreateSVGPolygon(A1);this.hExtendGroups(A5);A3=this.mSvg.childNodes[A5+1];A3.appendChild(A2);return{Polygon:A2,Group:A3};}function Aj(A3,A1){var A2=A1||1;return[A3?A2*3:A2,A2].join(" ");}function AE(){var A1=[].slice.call(arguments);return A1.some(function(A2){return typeof A2==="undefined";});}function r(A2,BB,A1,A7,BA,A9,A4,A3){var A5="stroke-width:3;stroke-opacity:1;fill:none;",A8="",A6=document.createElementNS(this.mXMLNS,"path");if(AE(A2,BB)){A8+=(" "+this.hMoveTo(A4,A3));A8+=(" "+this.hRelMoveTo(-A7,0));A8+=(" "+this.hRelArcTo(A7,A1,true,A7*2,0));A8+=(" "+this.hRelArcTo(A7,A1,true,-A7*2,0));}else{A8=this.hMoveTo(A2.x,A2.y),A8+=" "+this.hArcTo(A7,A1,true,BB.x,BB.y);}if(A9){A5+="stroke:rgb(255,255,255)";}else{A5+="stroke:rgb(0,0,0)";}A6.sX=A4;A6.sY=A3;A6.sR=A7;A6.sD=A8;A6.setAttribute("d",A8);A6.setAttribute("style",A5);this.mSvg.childNodes[BA+1].appendChild(A6);}mstrmojo.chart.SVGCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.SVGCanvas",mSvg:null,mG:null,mDefs:null,mXMLNS:"http://www.w3.org/2000/svg",mStyle:null,mAttributes:null,mMarkerAttributes:null,mGradientCount:0,mElements:null,seriesDrawOrder:null,init:function AV(A3){var A1;this._super(A3);A1=document.createElementNS(this.mXMLNS,"svg");A1.style.height="100%";A1.style.width="100%";A1.style.padding=0;this.mG=document.createElementNS(this.mXMLNS,"g");this.mDefs=document.createElementNS(this.mXMLNS,"defs");this.mG.appendChild(this.mDefs);A1.appendChild(this.mG);this.mStyle={};this.mSvg=A1;this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];if(A3.seriesDrawOrder&&A3.seriesDrawOrder.length){this.seriesDrawOrder=A3.seriesDrawOrder.concat();var A5=this.seriesDrawOrder,A2=A3.seriesDrawOrder,A6,A4;for(A4=0;A4<A5.length;A4++){A6=A2[A4];A5[A6]=A4;}}},reset:function AO(){this.mStyle={};this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];this.seriesDrawOrder=null;var A1=this.mG;while(A1.firstChild){A1.removeChild(A1.firstChild);}A1=this.mSvg;while(A1.firstChild){A1.removeChild(A1.firstChild);}A1.appendChild(this.mG);this.mG.appendChild(this.mDefs);},setDrawOrder:function F(A1){if(A1){this.seriesDrawOrder=A1;}},getDrawOrder:function N(A2){if(A2===-3){A2=0;}var A1=this.seriesDrawOrder;if(A1&&A1.length){if(A2>=A1.length){AP.visPrint("Drawing order,Max index exceeded");}return A1[A2];}return A2;},SaveToObject:function D(A1){A1.svg=this.mSvg;return true;},saveState:function Al(){},RestoreState:function Aw(){},Clip:function Ad(){},Scale:function Ap(A1,A2){},Rotate:function AF(A2,A1){this.SetAttribute("transform","rotate("+A1*180/j+" "+A2.x+" "+A2.y+")");},NewPath:function O(){},ClosePath:function AQ(){},MoveTo:function Ah(A1,A4,A2,A3){},LineTo:function AI(A1,A4,A2,A3){},BezierCurveTo:function W(A3,A2,A6,A4,A1,A5){},SetRGBAFillColor:function Z(A2,A3,A1,A4){},BoundedValue:function AW(A3,A2,A1){if(A3<A2){return A2;}if(A3>A1){return A1;}return A3;},SetRGBAStrokeColor:function P(A2,A3,A1,A4){},FillPath:function S(){},StrokePath:function A(){},SetLineDash:function Ar(A1,A2){},SetLineWidth:function Aa(A1){this.mStyle["stroke-width"]=A1;},SetLineJoin:function c(A1){},SetFontSize:function n(A1){},AddRect:function AA(A1,A4,A2,A3){},SetAttribute:function AL(A1,A2){this.mAttributes[A1]=A2;},SetMarkerAttribute:function Q(A1,A2){this.mMarkerAttributes[A1]=A2;},CreateSVGCircle:function E(A7,A5,BA,A9,BB,A6){var A3=A9.isPie?A9.sPieDP.graphCell.sID:A9.gc.sID,A8=this.getDrawOrder(A3),A1=document.createElementNS(this.mXMLNS,"circle"),A4=this.hToCSSStyleStr();if(BA<=10){A1.setAttribute("size","small");}A1.sX=A7;A1.sY=A5;A1.sR=BA;A1.identity=A9;A1.setAttribute("cx",A7);A1.setAttribute("cy",A5);A1.setAttribute("r",BA);A1.setAttribute("style",A4);this.hExtendGroups(A8);this.hCopyAttribute(this.mAttributes,A1);var A2=A9.getChartInfo();if(A9.objType===17179869184){A2.currentMarkerShape=-1;}this.hSetExtraAttributes(A1,A2,"circle");this.mSvg.childNodes[A8+1].appendChild(A1);if(BB){r.call(this,undefined,undefined,true,BA,A8,A6,A7,A5);}this.hResetStyleAndAttribute();},CreateSVGTextBoundingBox:function Af(A3,A2,A5,A4){var A1=this.hCreateSimpleSVGPolygon(A3,A2,true,A5);if(A5){if(this.mSvg.childNodes.length<=(A4+2)){this.hExtendGroups(A4+1);}this.mSvg.childNodes[A4+2].appendChild(A1);}else{this.mElements.push({Type:"BBox",Node:A1});}},hCreateSimpleSVGPolygon:function X(BA,A4,A1,A3){var A7=document.createElementNS(this.mXMLNS,"polygon"),A6=BA.length,A8="",A5,A9=this.hToCSSColorStr(A4),A2;if(A3){A2="stroke-width:2;stroke:rgb(0,0,0);stroke-opacity:1";}else{A2="stroke-width:1;stroke:rgb(0,0,0);stroke-opacity:1";}A2+=";stroke:"+A9;A1=A1||false;if(A1){A2+=";fill-opacity:0";}for(A5=0;A5<A6;++A5){A8+=(BA[A5].x+","+BA[A5].y+" ");}A7.setAttribute("points",A8);A7.setAttribute("style",A2);this.hCopyAttribute(this.mAttributes,A7);return A7;},CreateSVGRect:function U(A6,A5,A7,A4,BA){var A2=BA.isPie?BA.sPieDP.graphCell.sID:BA.gc.sID,A8=this.getDrawOrder(A2),A9=document.createElementNS(this.mXMLNS,"rect"),A3=this.hToCSSStyleStr();if(A7<=5||A4<=5){A9.setAttribute("size","small");}A9.identity=BA;A9.setAttribute("x",A6);A9.setAttribute("y",A5);A9.setAttribute("width",A7);A9.setAttribute("height",A4);A9.setAttribute("style",A3);this.hExtendGroups(A8);this.hCopyAttribute(this.mAttributes,A9);var A1=BA.getChartInfo();if(BA.objType===17179869184){A1.currentMarkerShape=-2;}this.hSetExtraAttributes(A9,A1);this.mSvg.childNodes[A8+1].appendChild(A9);this.hResetStyleAndAttribute();},CreateSVGSector:function Ao(BE,BD,BH,A4,A2,BI,A9,A1){var BG=BI.gc||BI.sPieDP.graphCell,BC=BG.sID,A7=this.getDrawOrder(BC),BA=document.createElementNS(this.mXMLNS,"path"),BB=this.hMoveTo(BE,BD),A8=this.hCalPoint(BE,BD,BH,A4),A5=this.hCalPoint(BE,BD,BH,A2),BF=A2-A4>Math.PI,A6=this.hToCSSStyleStr(),A3=this.hCalPoint(BE,BD,BH/2,(A4+A2)/2);BB+=(" "+this.hLineTo(A8.x,A8.y));BB+=(" "+this.hArcTo(BH,BF,true,A5.x,A5.y));BB+=(" "+this.hClosePath());BA.sX=BE;BA.sY=BD;BA.sR=BH;BA.sRadStart=A4;BA.sRadEnd=A2;BA.sD=BB;BA.sGeoCenterX=A3.x;BA.sGeoCenterY=A3.y;if(BH<=10){BA.setAttribute("size","small");}BA.setAttribute("d",BB);BA.setAttribute("style",A6);BA.identity=BI;this.hExtendGroups(A7);this.hCopyAttribute(this.mAttributes,BA);this.hSetExtraAttributes(BA,BI.getChartInfo());this.mSvg.childNodes[A7+1].appendChild(BA);if(A9){r.call(this,A8,A5,BF,BH,A7,A1,BE,BD);}this.hResetStyleAndAttribute();},CreateSVGRingSector:function l(BG,BF,A1,BB,A5,A2,BI){var BE=BI.isPie?BI.sPieDP.graphCell.sID:BI.gc.sID,BA=this.getDrawOrder(BE),BC=document.createElementNS(this.mXMLNS,"path"),A4=this.hCalPoint(BG,BF,A1,A5),A8=this.hCalPoint(BG,BF,A1,A2),A7=this.hCalPoint(BG,BF,BB,A5),A6=this.hCalPoint(BG,BF,BB,A2),BH=A2-A5>Math.PI,BD=this.hMoveTo(A7.x,A7.y),A9=this.hToCSSStyleStr(),A3=this.hCalPoint(BG,BF,(A1+BB)>>1,(A5+A2)/2);BD+=(" "+this.hArcTo(BB,BH,true,A6.x,A6.y));BD+=(" "+this.hLineTo(A8.x,A8.y));BD+=(" "+this.hArcTo(A1,BH,false,A4.x,A4.y));BD+=(" "+this.hClosePath());BC.sX=BG;BC.sY=BF;BC.sOutR=A1;BC.sInR=BB;BC.sRadStart=A5;BC.sRadEnd=A2;BC.sD=BD;BC.sGeoCenterX=A3.x;BC.sGeoCenterY=A3.y;if(A1<=10){BC.setAttribute("size","small");}BC.setAttribute("d",BD);BC.setAttribute("style",A9);BC.identity=BI;this.hExtendGroups(BA);this.hCopyAttribute(this.mAttributes,BC);this.hSetExtraAttributes(BC,BI.getChartInfo());this.mSvg.childNodes[BA+1].appendChild(BC);this.hResetStyleAndAttribute();BC.setAttribute("class","gm-shape-ring");BC.setAttribute("subtype","ring");},CreateSVGRing:function p(BA,A8,BC,A9,BE){var A2=BE.isPie?BE.sPieDP.graphCell.sID:BE.gc.sID,BB=this.getDrawOrder(A2),A6=document.createElementNS(this.mXMLNS,"path"),A5=this.hCalPoint(BA,A8,BC,Math.PI),BD=this.hCalPoint(BA,A8,BC,0),A1=this.hCalPoint(BA,A8,A9,Math.PI),A4=this.hCalPoint(BA,A8,A9,0),A7=this.hMoveTo(A5.x,A5.y),A3=this.hToCSSStyleStr();A7+=(" "+this.hArcTo(BC,true,true,BD.x,BD.y));A7+=(" "+this.hMoveTo(A4.x,A4.y));A7+=(" "+this.hArcTo(A9,true,false,A1.x,A1.y));A7+=(" "+this.hArcTo(A9,true,false,A4.x,A4.y));A7+=(" "+this.hMoveTo(BD.x,BD.y));A7+=(" "+this.hArcTo(BC,true,true,A5.x,A5.y));A6.sX=BA;A6.sY=A8;A6.sGeoCenterX=BA;A6.sGeoCenterY=A8;A6.sOutR=BC;A6.sInR=A9;A6.setAttribute("d",A7);A6.setAttribute("style",A3);A6.identity=BE;this.hExtendGroups(BB);this.hCopyAttribute(this.mAttributes,A6);this.hSetExtraAttributes(A6,BE.getChartInfo());this.mSvg.childNodes[BB+1].appendChild(A6);this.hResetStyleAndAttribute();},CreateSVGCurves:function h(BA,BC,A6,BL,BJ,A3,BI,A2){var BD,BB,A7=BA.length,A8=document.createElementNS(this.mXMLNS,"path"),A5,BK="",BG=Math.floor(A7/4),A4="",A9,BH,A1,BF,BE=(BJ&&(this.mStyle["stroke-width"]<3));this.mStyle.fill="none";if(BE){A1=this.mStyle["stroke-opacity"];BH=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BF=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;A9=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=A1;this.mStyle["stroke-width"]=BH;if(BF){this.mStyle["stroke-dasharray"]=BF;}A5=document.createElementNS(this.mXMLNS,"path");}BD=this.hToCSSStyleStr();this.hCopyAttribute(this.mAttributes,A8);for(BB=0;BB<BG;++BB){if(BB===0){BK="M "+BA[BB].x+","+BA[BB].y+" ";}BK+=("C "+BA[BB*4+1].x+","+BA[BB*4+1].y+" ");BK+=(BA[BB*4+2].x+","+BA[BB*4+2].y+" ");BK+=(BA[BB*4+3].x+","+BA[BB*4+3].y+" ");}A8.identity=BL;A8.setAttribute("style",BD);A8.setAttribute("d",BK);if(BE){this.hCopyAttribute(this.mAttributes,A5);A5.identity=BL;A5.setAttribute("style",A9);A5.setAttribute("d",BK);}if(BJ){A8.setAttribute("type","trendLine");A8.setAttribute("class","gm-set-trendline");A4="startpoint:"+A3.x+","+A3.y+";";A4+="midpoint:"+BI.x+","+BI.y+";";A4+="endpoint:"+A2.x+","+A2.y;A8.setAttribute("highlightPoints",A4);A8.setAttribute("hover-catcher","0");if(this.mSvg.childNodes.length<=(BC+2)){this.hExtendGroups(BC+1);}this.mSvg.childNodes[BC+2].appendChild(A8);if(BE){A5.setAttribute("type","trendLine");A5.setAttribute("class","gm-set-trendline");A5.setAttribute("highlightPoints",A4);A5.setAttribute("hover-catcher","1");this.mSvg.childNodes[BC+2].appendChild(A5);}}else{if(A6!==-1){if(this.mSvg.childNodes.length<=(A6+1)){this.hExtendGroups(A6);}this.mSvg.childNodes[A6+1].appendChild(A8);this.hSetExtraAttributes(A8,BL.getChartInfo());}}this.hReset();},CreateSVGPolyLineForTRLine:function AB(BC,BE,BJ,BI,A4,BG,A2){var BD,A6=document.createElementNS(this.mXMLNS,"polyline"),A3,A7=BC.length,BA="",A8,BB,BH,A1,BF,A9=(this.mStyle["stroke-width"]<3),A5;this.mStyle.fill="none";if(A9){A1=this.mStyle["stroke-opacity"];BH=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BF=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;BB=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=A1;this.mStyle["stroke-width"]=BH;if(BF){this.mStyle["stroke-dasharray"]=BF;}A3=document.createElementNS(this.mXMLNS,"polyline");}A8=this.hToCSSStyleStr();for(BD=0;BD<A7;++BD){BA+=(BC[BD].x+","+BC[BD].y+" ");}A6.identity=BJ;A6.setAttribute("points",BA);A6.setAttribute("style",A8);if(BI){A6.setAttribute("type","trendLine");A6.setAttribute("class","gm-set-trendline");}else{A6.setAttribute("type","referenceLine");A6.setAttribute("class","gm-set-referenceline");}A5="startpoint:"+A4.x+","+A4.y+";";A5+="midpoint:"+BG.x+","+BG.y+";";A5+="endpoint:"+A2.x+","+A2.y;A6.setAttribute("highlightPoints",A5);A6.setAttribute("hover-catcher","0");this.hCopyAttribute(this.mAttributes,A6);if(this.mSvg.childNodes.length<=(BE+2)){this.hExtendGroups(BE+1);}this.mSvg.childNodes[BE+2].appendChild(A6);if(A9){A3.identity=BJ;A3.setAttribute("points",BA);A3.setAttribute("style",BB);if(BI){A3.setAttribute("type","trendLine");A3.setAttribute("class","gm-set-trendline");}else{A3.setAttribute("type","referenceLine");A3.setAttribute("class","gm-set-referenceline");}A3.setAttribute("hover-catcher","1");this.hCopyAttribute(this.mAttributes,A3);this.mSvg.childNodes[BE+2].appendChild(A3);}this.hReset();},hCalPoint:function AR(A1,A6,A4,A5){var A3=A1+A4*Math.cos(A5),A2=A6+A4*Math.sin(A5);return{x:A3,y:A2};},hMoveTo:function Y(A1,A2){return"M "+A1+" "+A2;},hLineTo:function Ay(A1,A2){return"L "+A1+" "+A2;},hArcTo:function AU(A3,A2,A5,A1,A4){return"A "+A3+","+A3+" 0 "+(A2?"1":"0")+","+(A5?"1 ":"0 ")+A1+","+A4;},hClosePath:function AM(){return"Z";},hRelMoveTo:function I(A1,A4,A2,A3){return"m "+A1+" "+A4;},hRelArcTo:function AU(A3,A2,A5,A1,A4){return"a "+A3+","+A3+" 0 "+(A2?"1":"0")+","+(A5?"1 ":"0 ")+A1+","+A4;},hExtendGroups:function(A4){var A3,A2=this.mSvg,A1=A2.childNodes,A5=A1.length-1;while(A5<=A4){A3=document.createElementNS(this.mXMLNS,"g");A2.appendChild(A3);A5++;}},CreateSVGPolyLine:function AJ(A2,BF,A3,A7){var A6,A8=this.getDrawOrder(A2);var BB=0,A5=1,BE=2,BA=3,A4=4,A1=5;A7=A7||BB;this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A2;switch(A7){case BB:break;case A5:break;case BE:break;case BA:break;case A4:this.mAttributes["class"]="gm-set-originline";this.mAttributes.type="originLine";if(BF[0].x===BF[1].x){this.mAttributes.subtype="v";}else{this.mAttributes.subtype="h";}break;case A1:this.mAttributes.subtype="ticker";this.mAttributes.type="shape";this.mAttributes["class"]="gm-shape-ticker";break;default:break;}this.hExtendGroups(A8);A6=this.mSvg.childNodes[A8+1];var BD=this.hCreateSVGPolyline(BF,A6);if(A7===A1||A7===A4){if(A3.length){BD.identity=A3[0];}if(A7===A1){if(BF.length>=2){var BC=BF[0],A9=BF[1];BD.tickerCenter={x:Math.round(0.5*(BC.x+A9.x)),y:Math.round(0.5*(BC.y+A9.y))};}}}this.hResetStyleAndAttribute();},CreateSVGPolylineWithCircles:function AD(A7,A2,A6){var A3,A5,A1,A4,A8=this.getDrawOrder(A7);this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A7;this.hExtendGroups(A8);A4=this.mSvg.childNodes[A8+1];this.hCreateSVGPolyline(A2,A4);for(A3=0;A3<A2.length;++A3){A5=document.createElementNS(this.mXMLNS,"circle");A1=A6[A3];A5.identity=A1;A5.setAttribute("cx",A2[A3].x);A5.setAttribute("cy",A2[A3].y);A5.setAttribute("r","5.5");A5.style.fill=this.mStyle.stroke;this.hCopyAttribute(this.mMarkerAttributes,A5);A5.setAttribute("class","gm-shape-scircle");A5.setAttribute("type","shape");A5.setAttribute("subtype","scircle");A4.appendChild(A5);}this.hResetStyleAndAttribute();},hCreateSVGPolyline:function f(A3,A5){this.mStyle.fill="none";var A4,A2=document.createElementNS(this.mXMLNS,"polyline"),A1=A3.length,A6="",A7=this.hToCSSStyleStr();A2.pointList=A3;for(A4=0;A4<A1;++A4){A6+=(A3[A4].x+","+A3[A4].y+" ");}A2.setAttribute("points",A6);A2.setAttribute("style",A7);this.hCopyAttribute(this.mAttributes,A2);A5.appendChild(A2);return A2;},CreateSVGPolygonWithCircles:function AX(A2,BA,A3){var A4,A8,A1,A7,A6,A9;A9=z.call(this,A2,BA);A8=A9.Polygon;A6=A9.Group;var A5=BA.length;if((A5&1)!==0){return ;}for(A4=0;A4<A5/2;++A4){A1=document.createElementNS(this.mXMLNS,"circle");A7=A3[A4];A1.identity=A7;A1.setAttribute("cx",BA[A4].x);A1.setAttribute("cy",BA[A4].y);A1.setAttribute("r","5.5");A1.style.fill=this.mStyle.fill;this.hCopyAttribute(this.mMarkerAttributes,A1);A1.setAttribute("class","gm-shape-scircle");A1.setAttribute("type","shape");A1.setAttribute("subtype","scircle");A6.appendChild(A1);}A8.chartInfo=A7.getChartInfo();this.hResetStyleAndAttribute();},CreateSVGPolygonWithTrapezoid:function t(BG,A8,A5){var BF,BA,BB,A1,BM,BC,A9,BE,A7;A9=z.call(this,BG,A8);BA=A9.Polygon;BC=A9.Group;var BH=A8.length;if((BH&1)!==0||BH<4){return ;}BE=BH/2;var BJ,BI,BL,A4,BK,A3,A6,BD,A2;for(BF=0;BF<BE;++BF){BL=A4=BK=A3=null;A7=[];BJ=A8[BF];BI=A8[BH-1-BF];if(BF!==0){BL=A8[BF-1];A4=A8[BH-BF];}if(BF!==BE-1){BK=A8[BF+1];A3=A8[BH-2-BF];}if(BL){BL={x:0.5*(BL.x+BJ.x),y:0.5*(BL.y+BJ.y)};}if(A4){A4={x:0.5*(A4.x+BI.x),y:0.5*(A4.y+BI.y)};}if(BK){BK={x:0.5*(BK.x+BJ.x),y:0.5*(BK.y+BJ.y)};}if(A3){A3={x:0.5*(A3.x+BI.x),y:0.5*(A3.y+BI.y)};}A6=[BL,BJ,BK,A3,BI,A4];for(BD=0;BD<A6.length;BD++){if(A6[BD]){A7.push(A6[BD]);}}A2=J.call(this,A7);if(A2&&A5[BF]){A2.identity=A5[BF];}A2.setAttribute("class","gm-shape-sbar");A2.setAttribute("type","shape");A2.setAttribute("subtype","sbar");this.hCopyAttribute(s,A2);BC.appendChild(A2);}BA.chartInfo=BB;this.hResetStyleAndAttribute();},CreateSVGPolygonWithRects:function L(A2,BB,A3){var A4,A9,A1,A8,A7,A6,BA;BA=z.call(this,A2,BB);A9=BA.Polygon;A6=BA.Group;var A5=BB.length;if((A5&1)!==0){return ;}for(A4=0;A4<A5/2;++A4){A8=document.createElementNS(this.mXMLNS,"rect");A7=A3[A4];A1=A7.getChartInfo();A8.identity=A7;if(A1.dirc===1){A8.setAttribute("x",(BB[A4].x).toString());A8.setAttribute("y",String(BB[A4].y-3));A8.setAttribute("width",(BB[A5-A4-1].x-BB[A4].x).toString());A8.setAttribute("height","6");}else{A8.setAttribute("x",(BB[A4].x-3).toString());A8.setAttribute("y",BB[A4].y);A8.setAttribute("width","6");A8.setAttribute("height",(BB[A5-A4-1].y-BB[A4].y).toString());}this.hCopyAttribute(this.mMarkerAttributes,A8);A8.setAttribute("class","gm-shape-sbar");A8.setAttribute("type","shape");A8.setAttribute("subtype","sbar");A6.appendChild(A8);}A9.chartInfo=A1;this.hResetStyleAndAttribute();},hManipulateTextElements:function w(A3){if(A3.Tooltip){var A2=0,A1,A5=this.mElements,A4=A5.length;while(A2<A4){A1=A5[A2];if(A1.Tag&&A1.Tag==="tspan"){A1.Tooltip=A3.Tooltip;}A2++;}}},CreateSVGAxisText:function V(A4,A2,A1){var A3=this.hToCSSStyleStr(),A5=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A5);A5.setAttribute("style",A3);A5.setAttribute("type","axis-text");if(A1){A5.identity=A1;}this.hManipulateTextElements({Tooltip:A2});this.hCopyTextElements(A5,"axis-word");var A6=this.getDrawOrder(A4);this.hExtendGroups(A6);this.mSvg.childNodes[A6+1].appendChild(A5);this.hReset();},CreateSVGBannerText:function Am(A3,A1){var A2=this.hToCSSStyleStr(),A4=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A4);A4.setAttribute("style",A2);A4.setAttribute("type","banner-text");if(A1){A4.identity=A1;}this.hCopyTextElements(A4,"banner-text");var A5=this.getDrawOrder(A3);this.hExtendGroups(A5);this.mSvg.childNodes[A5+1].appendChild(A4);this.hReset();},CreateSVGGenericText:function Ai(A4,A1,A3){var A2=this.hToCSSStyleStr(),A5=document.createElementNS(this.mXMLNS,"text");A3=A3||"data-label";if(!!A1){A5.identity=A1;}this.hCopyAttribute(this.mAttributes,A5);A5.setAttribute("style",A2);this.hCopyTextElements(A5,A3);if(A4){if(this.mSvg.childNodes.length<=(A4+2)){this.hExtendGroups(A4+1);}this.mSvg.childNodes[A4+2].appendChild(A5);}else{this.mG.appendChild(A5);}this.hReset();},hCopyTextElements:function d(A9,A6){A6=A6||"axis-word";var A5,A1,A2=0;for(A5=0;A5<this.mElements.length;A5++){var A3=this.mElements[A5];if(A3){if(A3.Type==="text"){var A7=document.createElementNS(this.mXMLNS,A3.Tag),A4=A3.Attributes;for(A1 in A4){A7.setAttribute(A1,A4[A1]);}A7.setAttribute("type",A6);if(A6==="axis-word"){A7.setAttribute("Index",A2);A2++;}A7.setAttribute("class","gm-tspan");A7.textContent=A3.Content;if(A3.Tooltip){var A8=document.createElementNS(this.mXMLNS,"title");A8.textContent=A3.Tooltip;A7.appendChild(A8);}if(A3.Style){A7.setAttribute("style",A3.Style);}A9.appendChild(A7);}else{if(A3.Type==="BBox"){if(A3.Node){this.mG.appendChild(A3.Node);}}}}}},CreateSVGPolygon:function u(A1,A2,A5){var A4,A6=this.getDrawOrder(A1);var A3=this.hCreateSVGPolygon(A2,A5);this.hExtendGroups(A6);A4=this.mSvg.childNodes[A6+1];A4.appendChild(A3);this.mG.appendChild(A3);this.hResetStyleAndAttribute();},hCreateSVGPolygon:function B(A1,A5){var A3,A4=this.hToCSSStyleStr(),A6=A1.length,A2=J.call(this,A1);A2.points=A1;if(A5!==undefined){A2.identity=A5;}A2.setAttribute("style",A4);this.hCopyAttribute(this.mAttributes,A2);return A2;},AddArc:function Au(A1,A6,A5,A2,A4,A3){},AddNeedle:function Av(A3,A4,A1,A2){},AddString:function Ac(A2,A1){},FillSimple:function An(A2,A4,A3,A1){this.mStyle.fill=this.hToCSSColorStr(A3);this.mStyle["fill-opacity"]=A2.mAlpha/255;},FillPattern:function C(A1){},FillGradient:function T(A8,A3,A2){var A6,BA,A4,A7,A5=A8.getGradient();switch(A5.gradientType){case As.DssGraphGradientLinear:if(A3.width===0||A3.height===0){return ;}BA=document.createElementNS(this.mXMLNS,"linearGradient");BA.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));BA.setAttribute("x1","0%");BA.setAttribute("y1","0%");if(A5.angle===0){BA.setAttribute("x2","100%");BA.setAttribute("y2","0%");}else{BA.setAttribute("x2","0%");BA.setAttribute("y2","100%");}A7=this.hCreateLinearGradientStop(0,A5.startGraphColor,A8.mAlpha/255);BA.appendChild(A7);for(A6=0;A6<A5.intermediateColors.length;++A6){var A9=A5.intermediateColors[A6];A7=this.hCreateLinearGradientStop(A9.Step,A9.Color,A8.mAlpha/255);BA.appendChild(A7);}A7=this.hCreateLinearGradientStop(1,A5.endGraphColor,A8.mAlpha/255);BA.appendChild(A7);this.mDefs.appendChild(BA);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case As.DssGraphGradientCircular:A4=document.createElementNS(this.mXMLNS,"radialGradient");A4.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A4.setAttribute("cx",String(A3.cx));A4.setAttribute("cy",String(A3.cy));A4.setAttribute("r",String(A3.r));A4.setAttribute("gradientUnits","userSpaceOnUse");A4.setAttribute("fx",String(A3.fx));A4.setAttribute("fy",String(A3.fy));var A1=A3.startStop||0;A7=this.hCreateLinearGradientStop(A1,A5.startGraphColor,A8.mAlpha/255);A4.appendChild(A7);A7=this.hCreateLinearGradientStop(1,A5.endGraphColor,A8.mAlpha/255);A4.appendChild(A7);this.mDefs.appendChild(A4);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case As.DssGraphGradientRectangular:break;}},hCreateLinearGradientStop:function AT(A5,A3,A4){var A2=document.createElementNS(this.mXMLNS,"stop"),A1="stop-color:"+this.hToCSSColorStr(A3)+";stop-opacity:"+A4;A2.setAttribute("offset",A5*100+"%");A2.setAttribute("style",A1);return A2;},FillEdgeType:function Az(A1,A2){},FillRadientGradient:function Aq(A7,A8,A5,A4,A9,A1,A2,A6,A3){},FillBorderMetallic:function Ax(A3,A1,A5,A4,A6,A2){},FillDonutOrSphere:function At(A1,A2,A3){},MakeDarker:function R(A2,A1){},RestoreColor:function a(A1){},ApplyLineFormat:function k(A2){var A3=A2.getGradient();if(A3&&A3.valid&&A3.style===1){this.StrokeGradient(A3);o.call(this,A3.strokePatten,A2.mLineThickness);}else{var A1=this.mStyle;A1.stroke=this.hToCSSColorStr(A2.mLineColor);o.call(this,A2.mLineStyle,A2.mLineThickness);}this.mStyle["stroke-opacity"]=A2.mAlpha/255;},StrokeGradient:function AK(A7){var A3=document.createElementNS(this.mXMLNS,"linearGradient");A3.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A3.setAttribute("x1","0%");A3.setAttribute("y1","0%");if(A7.angle===0){A3.setAttribute("x2","100%");A3.setAttribute("y2","0%");}else{A3.setAttribute("x2","0%");A3.setAttribute("y2","100%");}var A4,A1=A7.colors[0].Color,A6=A7.colors[A7.colors.length-1].Color,A2=this.hCreateLinearGradientStop(0,A1,A7.endAlpha/255);A3.appendChild(A2);for(A4=1;A4<A7.colors.length-1;++A4){var A5=A7.colors[A4];A2=this.hCreateLinearGradientStop(A5.Step,A5.Color,A7.endAlpha/255);A3.appendChild(A2);}A2=this.hCreateLinearGradientStop(1,A6,A7.endAlpha/255);A3.appendChild(A2);this.mDefs.appendChild(A3);this.mStyle.stroke="url(#"+this.gradPrefix+(this.mGradientCount++)+")";},AddFormatedText:function e(A5,A1,A3,A4){var A2={Type:"text",Tag:"tspan",Attributes:{x:A1.x,y:A1.y},Content:A3};if(A4&&A4.BaselineOffset){A2.Attributes.y-=A4.BaselineOffset-0.5;A2.Style="dominant-baseline:central";}this.mElements.push(A2);},ApplyBeveledFrameToRectangle:function K(A2,A6,A1,A3,A5,A4,A7){},DrawGaugeMarker:function AZ(A4,A2,A5,A1,A3){},ApplyDonutToRect:function AY(A1,A3,A2){},BeginFirstFrame:function AH(){},BeginLastFrame:function x(){},EndFrame:function Ae(){},EndUnit:function H(){},hToCSSColorStr:function AG(A2){var A1=true;if(typeof A2==="number"){if(A1){M.mR=A2&255;M.mG=(A2&65280)>>8;M.mB=(A2&16711680)>>16;}else{M.mB=A2&255;M.mG=(A2&65280)>>8;M.mR=(A2&16711680)>>16;}}else{return"rgb("+A2.mR+","+A2.mG+","+A2.mB+")";}return"rgb("+M.mR+","+M.mG+","+M.mB+")";},hToCSSStyleStr:function g(){var A3,A2=this.mStyle,A1="";for(A3 in A2){if(A2.hasOwnProperty(A3)){A1=A1+A3+":"+A2[A3]+";";}}return A1.substr(0,A1.length-1);},hCopyAttribute:function AC(A3,A1){var A2;for(A2 in A3){if(A3.hasOwnProperty(A2)){A1.setAttribute(A2,A3[A2]);}}},hResetStyle:function A0(){this.mStyle={};},hResetElements:function Ab(){this.mElements=[];},hResetAttribute:function AN(){this.mAttributes={};this.mMarkerAttributes={};},hResetStyleAndAttribute:function y(){this.hResetStyle();this.hResetAttribute();},hReset:function Ak(){this.hResetStyle();this.hResetAttribute();this.hResetElements();},hTranslateMarkerShape:function(A1,A2){var A3="";A1=A1||0;switch(A1){case -2:A3="markerRect";break;case -1:A3="markerCircle";break;case 0:if(A2===1){A3="area";}else{if(A2===2){A3="bar";}else{if(A2===3){A3="line";}}}break;case 4:A3="circle";break;case 24:A3="square";break;case 200:A3="ticker";break;case 201:A3="pie";break;case 202:A3="ring";break;case 204:A3="line";break;case 205:A3="bar";break;case 206:A3="area";break;default:break;}return A3;},hSetExtraAttributes:function(A7,A3,BA){var A8="",A5="shape",A2="",A9=A3.tp,A6=0,A4=A3.currentMarkerShape,BB=BA||(this.hTranslateMarkerShape(A4,A9)||"bar"),A1=A3.hasSizeBy;if(BB==="line"&&A1){BB+="-sizeby";}if(A9===4||A9===5){A6=1;}else{if(A9===7){A6=2;}}if(q.hasOwnProperty(BB)){A8=q[BB][A6];}if(v.hasOwnProperty(BB)){A2=v[BB][A6];}A7.setAttribute("class",A8);A7.setAttribute("type",A5);A7.setAttribute("subtype",A2);},ApplyFontFormat:function b(BC){var A1=this.mStyle,A7=BC.mFontStyle;if(A7!==undefined){var A6=0,BA=1,A3=2,BB=3,A9=4,A4=8;A1["text-decoration"]="none";A1["font-weight"]="normal";if(!!(A7&BA)){A1["font-weight"]="bold";}if(!!(A7&A3)){A1["font-style"]="italic";}if(!!(A7&A9)&&!!(A7&A4)){A1["text-decoration"]="underline line-through";}else{if(!!(A7&A9)){A1["text-decoration"]="underline";}if(!!(A7&A4)){A1["text-decoration"]="line-through";}}}if(BC.mFontAlignment){var A8=0,A2=1,A5=2;switch(BC.mFontAlignment){case A8:A1["text-anchor"]="start";break;case A2:A1["text-anchor"]="middle";break;case A5:A1["text-anchor"]="right";break;}}A1["text-anchor"]="start";if(BC.mFontColor){A1.fill=this.hToCSSColorStr(BC.mFontColor);}if(G.isValidNumber(BC.mStrokeColor)){A1.stroke=this.hToCSSColorStr(BC.mStrokeColor);}if(BC.mStrokeWidth){A1["stroke-width"]=BC.mStrokeWidth;}if(BC.mFontAlpha){A1["fill-opacity"]=BC.mFontAlpha;}if(BC.mFontName){A1["font-family"]=BC.mFontName;}if(BC.mFontSize){A1["font-size"]=BC.mFontSize+"pt";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.num","mstrmojo.gm.GMEnums","mstrmojo.gm.GMUtility","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.VisTooltip","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.models.DropZonesModel","mstrmojo.gm.DndReplaceNode","mstrmojo.gm.DndTooltip","mstrmojo.vi.ui._CanDropFromSchema","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.ui.menus.PopupConfig","mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.color");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig","ToolbarEditorConfig");mstrmojo.requiresClsP("mstrmojo.ui.editors.controls","LineConfigGroup","FillConfigGroup","ColorPickerButton","MarkerColorPickerButton","CharacterGroup");var V=mstrmojo,Cl=V.VisUtility,P=mstrmojo.ui.editors.controls.AdvancedColorPicker,BE=V.vi,Cg=V.string,BT=V.dom,D=V.num,Cc=V.array,B6=V.css,Ax=V.hash,AC=V.color,k=mstrmojo.expr.DTP,Br=V.gm.EnumShape,Ci=V.gm.EnumGraphType,AY=V.VisEnum.ControlType,A6=BE.ui.rw.SelectionType,Cy=BE.ui.DatasetUnitMenuUtils,B1=V.gm,p=B1.GMUtility,Aa=B1.WidgetPropertyTag,C8=B1.FormatingPropertyTag,AD=V.models.FormatModel,Az=AD.ENUM_PROPERTY_NAMES,x=mstrmojo.chart.enums.EnumFontStyle,Ac=B1.EnumABLDirection,C4=BE.models.EnumDragSources,Cw=BE.models.DropZonesModel.ENUM_TARGET_POSITION,Cq=V.vi.viz.EnumDSSDropZones,z=B1.EnumIdentityType,BW=Cw.ABOVE,r=Cw.ON,C=Cw.BELOW,At=3,A8=-20,BX=14,BL=7,q=6,BS=8,d=0,B9=1,C3=2,AT="default",Cp="hdtl",s={NORMAL:"normal",HOVER:"hover",SELECTED:"selected",SH:"sh"},C5={INVALID:-1,NORMAL2HOVER:0,NORMAL2SELECTED:1,HOVER2NORMAL:2,HOVER2SELECTED:3,SELECTED2NORMAL:4,SELECTED2HOVER:5,SH2SELECTED:6,SELECTED2SH:7,SH2NORMAL:8},U={"normal-hover":C5.NORMAL2HOVER,"normal-selected":C5.NORMAL2SELECTED,"hover-normal":C5.HOVER2NORMAL,"hover-selected":C5.HOVER2SELECTED,"selected-normal":C5.SELECTED2NORMAL,"selected-hover":C5.SELECTED2HOVER,"sh-selected":C5.SH2SELECTED,"selected-sh":C5.SELECTED2SH,"sh-normal":C5.SH2NORMAL},BJ={BAR:"bar",SBAR:"sbar",GBAR:"gbar",CIRCLE:"circle",SCIRCLE:"scircle",TICKER:"ticker",SQUARE:"square",PIE:"pie",RING:"ring"},B4={GLOBAL:"glb",FORMATTING:"fmt"},X={FONT_COMP:"FntCmp",FONT_FAMILY:"FntFml",FONT_STYLE:"FntStyle",FONT_SIZE:"FntSz",FONT_COLOR:"FntClr",LINE_COMP:"LnCmp",SHOW:"Shw",COLOR:"Clr",STYLE:"Style",THICKNESS:"Thk"},Bm={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2},A1,BR=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(7194,"Constant")];var BI={};BI[z.H_MATRIX_LINE]=[AY.GM_H_MATRIX_LINE,AY.GM_H_CHART_LINE];BI[z.V_MATRIX_LINE]=[AY.GM_V_MATRIX_LINE,AY.GM_V_CHART_LINE];BI[z.GRID_LINE]=[AY.GM_H_GRID_LINE,AY.GM_V_GRID_LINE];BI[z.MINOR_GRID_LINE]=[AY.GM_H_MINOR_GRID_LINE,AY.GM_V_MINOR_GRID_LINE];BI[z.ROW_TITLE]=[AY.GM_ROW_HEADER_TITLE];BI[z.ROW_HEADER]=[AY.GM_ROW_HEADER,AY.GM_ROW_HEADER_EXTRA];BI[z.COL_TITLE]=[AY.GM_COL_HEADER_TITLE];BI[z.COL_HEADER]=[AY.GM_COL_HEADER,AY.GM_COL_HEADER_EXTRA];BI[z.ROWS_BACKGROUND]=[];BI[z.COLS_BACKGROUND]=[];BI[z.X_AXIS]=[AY.GM_XAXIS_LINE];BI[z.Y_AXIS]=[AY.GM_YAXIS_LINE];BI[z.X2_AXIS]=[AY.GM_XAXIS2_LINE];BI[z.Y2_AXIS]=[AY.GM_YAXIS2_LINE];BI[z.X_METRIC_AXIS_TITLE]=[AY.GM_XLABEL];BI[z.Y_METRIC_AXIS_TITLE]=[AY.GM_YLABEL];BI[z.X_NUMERIC]=[AY.GM_X_NUMERIC];BI[z.X_CATEGORY]=[AY.GM_X_CATEGORY];BI[z.Y_NUMERIC]=[AY.GM_Y_NUMERIC];BI[z.Y_CATEGORY]=[AY.GM_Y_CATEGORY];BI[z.X_AXIS_ORIGIN_LABEL]=[AY.GM_ORIGIN_LABEL_V];BI[z.Y_AXIS_ORIGIN_LABEL]=[AY.GM_ORIGIN_LABEL_H];BI[z.AXIS_ORIGIN]=[AY.GM_ORIGIN_LINE];var BZ={NONE:0,ROW_VALUE:1,ROW_HEADER:2,COL_VALUE:4,COL_HEADER:8};var B=Math.PI,Ab=B/180*1,Q=Ab*0.0001,Ch=10;function BN(DF){function C9(){var DH=[];Cc.forEach(DF||[],function(DK){var DI=AS(DK);var DJ=DI.getAttribute("type");if(DJ){DH.push(DJ);}});return DH;}var DE=C9(),DD=0;var DG=DE.indexOf(AY.GM_ROW_HEADER)>-1||DE.indexOf(AY.GM_ROW_HEADER_EXTRA)>-1||DE.indexOf(AY.GM_ROW_HEADER_TEXT)>-1;var DA=DE.indexOf(AY.GM_ROW_HEADER_TITLE)>-1||DE.indexOf(AY.GM_ROW_HEADER_TITLE_TEXT)>-1;var DC=DE.indexOf(AY.GM_COL_HEADER)>-1||DE.indexOf(AY.GM_COL_HEADER_EXTRA)>-1||DE.indexOf(AY.GM_COL_HEADER_TEXT)>-1;var DB=DE.indexOf(AY.GM_COL_HEADER_TITLE)>-1||DE.indexOf(AY.GM_COL_HEADER_TITLE_TEXT)>-1;if(DG){DD=DD|BZ.ROW_VALUE;}if(DA){DD=DD|BZ.ROW_HEADER;}if(DC){DD=DD|BZ.COL_VALUE;}if(DB){DD=DD|BZ.COL_HEADER;}return DD;}function As(DJ){var DN=this.widget,DT=DN.GMController,DR=DT.model,DD=DR.ldss&&DR.ldss[0],DP,DL=DT.getChartInfo(),DU=this,DE=[],DK=[],DO=DT.getMetricsOnXAxis(),DM=DT.getMetricsOnYAxis(),DC=DN.readGlobalProperty(Aa.METRIC_SHAPES);var DG=false,DQ=mstrmojo.gm.EnumSubtype,DI=DT.chartSubType,DB=DL.shape;if(DL.isABL&&DI===DQ.PERCENT){DG=true;}if(DL.isBubbleOrScatter){DE=p.filterInValidMetricIndex(DM);}else{if(DL.isABL){if(DL.dirc===B1.EnumABLDirection.HORIZONTAL){DE=p.filterInValidMetricIndex(DO);}else{DE=p.filterInValidMetricIndex(DM);}if(DD){DP=DD.srsCnt;if(DP===undefined||DP===null){DP=DD.getSeriesCount();}}if(DI===DQ.STACKED){if(DT.getBreakByAttrsID().length>0){DG=true;}if(DE&&DE.length>1&&!DT.splitPlottingMetrics){DG=true;}}else{if(DI===DQ.CLUSTERED){if(DL.isCombo){DK=DR.getMetricIDsFromIndex(DE);Cc.forEach(DK,function(DW){var DV=DC.jsonObj[DW];if(DV===Br.BAR){DG=true;}});}else{if(DB===Br.BAR){if(DT.getBreakByAttrsID().length>0){DG=true;}}else{if(DT.getBreakByAttrsID().length>0){DG=true;}if(DE&&DE.length>1&&!DT.splitPlottingMetrics){DG=true;}}}}else{if(DL.isCombo){DK=DR.getMetricIDsFromIndex(DE);if(DT.getBreakByAttrsID().length>0){Cc.forEach(DK,function(DW){var DV=DC.jsonObj[DW];if(DV===Br.BAR){DG=true;}});}}}}}}DG=DG||!p.isTrendLineAvailableForAnyMetric(DN);if(!DG&&DE&&DE.length>0){var DF=[],DA,DS,C9=[],DH=[];Cc.forEach(DE,function(DV){DA=p.getOptionObjArr.call(DT,[DV]);DF.push(DA);DS=DN.readGlobalProperty(Aa.TREND_LINE_DEF,DA);if(!DS.jsonObj.trdEnabled){DS.setProperty("trdEnabled",true);DN.getEnableTrendLineActions(DS.jsonObj,C9,DA.key);}else{DS.setProperty("trdEnabled",false);DN.getEnableTrendLineActions(DS.jsonObj,DH,DA.key);}});DJ.addToggleMenuItem(mstrmojo.desc(12160,"Enable trendline"),"xt",function(){if(C9.length>0){Cc.forEach(C9,function(DV){DN.checkCustomScaleNotificationForTrendLine(DV.metricId);});DN.submitUpdatesAndPersistXML(C9,DN.getXTabRefreshCallBack(),undefined,false,false);}},function(){if(DH.length>0){DN.submitUpdatesAndPersistXML(DH,DN.getXTabRefreshCallBack(),undefined,false,false);}},DU.id,C9.length===0);if(C9.length===0&&mstrApp.appState!==mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION){DJ.addMenuItem(mstrmojo.desc(12163,"Edit trendline..."),"xt",p.getEditTrendLineHandler(DN,DF[0].key));}}}function CX(DA){var C9="#34ABEB";DA.style.stroke=C9;return ;}function CN(C9){var DA=C9.identity.lineModel.getLineColor();C9.style.stroke=AC.decodeColor(DA)||"#000000";return ;}function Bi(DT){var C9=6,DM=6,DF=2,DS=C9/2,DD=DM/2,DJ=1,DH=1,DQ=Number.MAX_VALUE,DP=Number.MAX_VALUE;var DK=function(DX){var DV=[];var DW=DX.getAttribute("highlightPoints"),DY=DW?DW.split(";"):[];Cc.forEach(DY||[],function(Dc){var Da=Dc.indexOf(":");if(Da>-1){var DZ=Dc.substring(Da+1);var Db=DZ.split(",");Cc.forEach(Db||[],function(De,Dd){Db[Dd]=parseFloat(De,10);});DV.push(Db);}});return DV;};var DB=function(DX){var DV=[];var DW=DX.getAttribute("points");DW=DW.substring(0,DW.length-1);var DY=DW.split(" ");Cc.forEach(DY||[],function(DZ,Da){var Db=DZ.split(",");Cc.forEach(Db||[],function(Dd,Dc){Db[Dc]=parseFloat(Dd,10);});if(Da===0){DV[Da]=Db;}else{if(Da===1){DV[Da+1]=Db;}}});if(DV[0]&&DV[2]){DV[1]=[(DV[0][0]+DV[2][0])/2,(DV[0][1]+DV[2][1])/2];}return DV;};var DR=function(DW){var DV=true;Cc.forEach(DW||[],function(DX){if(!DX||DX.length!==2){DV=false;return false;}});if(DV){if(!DW||DW.length!==3){DV=false;}}return DV;};var DI=function(DZ,DX,DY,DW,DV){if(DV){return Math.min(Math.max(DZ-DX,DY),DW);}else{return DZ-DX;}};var DN=DT.getAttribute("type"),DC;if(w(DN)&&DT.hasAttribute("highlightPoints")){DC=DK(DT);}else{if(Bp(DN)||!DT.hasAttribute("highlightPoints")){DC=DB(DT);}else{DC=DK(DT);}}if(!DR(DC)){return ;}var DG=DT.parentNode&&DT.parentNode.parentNode;if(DG){var DO=DG.clientWidth,DA=DG.clientHeight;DQ=DO-(DF+C9);DP=DA-(DF+DM);}var DU=document.createElementNS("http://www.w3.org/2000/svg","rect"),DE=document.createElementNS("http://www.w3.org/2000/svg","rect");DU.setAttribute("type",AY.GM_TREND_LINE_SELECT);DU.setAttribute("class","gm-trendline-select");DU.setAttribute("x",DI(DC[0][0],DS,DJ,DQ,Bp(DN)));DU.setAttribute("y",DI(DC[0][1],DD,DH,DP,Bp(DN)));DU.setAttribute("width",C9.toString());DU.setAttribute("height",DM.toString());DE.setAttribute("type",AY.GM_TREND_LINE_SELECT);DE.setAttribute("class","gm-trendline-select");DE.setAttribute("x",DI(DC[2][0],DS,DJ,DQ,Bp(DN)));DE.setAttribute("y",DI(DC[2][1],DD,DH,DP,Bp(DN)));DE.setAttribute("width",C9.toString());DE.setAttribute("height",DM.toString());DT.parentNode.appendChild(DU);DT.parentNode.appendChild(DE);var DL=document.createElementNS("http://www.w3.org/2000/svg","rect");DL.setAttribute("type",AY.GM_TREND_LINE_SELECT);DL.setAttribute("class","gm-trendline-select");if(w(DN)){DL.setAttribute("x",DI(DC[1][0],DS,DJ,DQ));DL.setAttribute("y",DI(DC[1][1],DD,DH,DP));}else{if(Bp(DN)){DL.setAttribute("x",DI(DC[1][0],DS,DJ,DQ));DL.setAttribute("y",DI(DC[1][1],DD,DH,DP));}}DL.setAttribute("width",C9.toString());DL.setAttribute("height",DM.toString());DT.parentNode.appendChild(DL);}function y(DA){var C9=CJ(DA.parentNode,"type",AY.GM_TREND_LINE_SELECT);Cc.forEach(C9||[],function(DB){if(DB.parentNode===DA.parentNode){DA.parentNode.removeChild(DB);}});}function C1(DF){var DC=0,C9=0,DK=[],DD;if(DF.tagName==="circle"){DK.push(parseInt(DF.getAttribute("cx"),10));DK.push(parseInt(DF.getAttribute("cy"),10));}else{if(DF.tagName==="rect"){var DI=parseFloat(DF.getAttribute("x")),DH=parseFloat(DF.getAttribute("y")),DJ=parseFloat(DF.getAttribute("width")),DE=parseFloat(DF.getAttribute("height"));DK.push(DI+DJ/2);DK.push(DH+DE/2);}else{if(DF.tagName==="polygon"){var DB=DF.getAttribute("points");DB=DB.substring(0,DB.length-1);DB=DB.replace(/,/g," ");var DA=DB.split(" "),DG=DA.length;for(DD=0;DD<DG;DD++){if(DD%2===0){DC+=parseInt(DA[DD],10);}else{C9+=parseInt(DA[DD],10);}}DK.push(DC/DG*2);DK.push(C9/DG*2);}}}return DK;}function AP(DA){if(DA.constructor!==Array){DA=[DA];}var C9=[];Cc.forEach(DA||[],function(DB){var DC=Ax.copy(DB);C9.push(DC);});Cc.forEach(C9||[],function(DB){if(DB.objType===z.Y2_AXIS){DB.objType=z.Y_AXIS;}else{if(DB.objType===z.X2_AXIS){DB.objType=z.X_AXIS;}else{if(DB.objType===z.X_AXIS_ORIGIN_LINE||DB.objType===z.Y_AXIS_ORIGIN_LINE){DB.objType=z.AXIS_ORIGIN;}else{if(DB.objType===z.X_AXIS_ORIGIN_LABEL){DB.objType=z.X_NUMERIC;}else{if(DB.objType===z.X_ATTRIBUTE_AXIS_TITLE){DB.objType=z.X_METRIC_AXIS_TITLE;}else{if(DB.objType===z.Y_AXIS_ORIGIN_LABEL){DB.objType=z.Y_NUMERIC;}else{if(DB.objType===z.Y_ATTRIBUTE_AXIS_TITLE){DB.objType=z.Y_METRIC_AXIS_TITLE;}else{if(DB.objType===z.ROW_HEADER_TEXT){DB.objType=z.ROW_HEADER;}else{if(DB.objType===z.ROW_TITLE_TEXT){DB.objType=z.ROW_TITLE;}else{if(DB.objType===z.COL_HEADER_TEXT){DB.objType=z.COL_HEADER;}else{if(DB.objType===z.COL_TITLE_TEXT){DB.objType=z.COL_TITLE;}}}}}}}}}}}});return C9;}function CP(C9){if(C9.constructor!==Array){C9=[C9];}var DA=[];Cc.forEach(C9||[],function(DB){if(DB===z.X_CATEGORY){DA.push(z.X_CATEGORY);DA.push(z.X_NUMERIC);DA.push(z.X_AXIS_ORIGIN_LABEL);}else{if(DB===z.Y_CATEGORY){DA.push(z.Y_CATEGORY);DA.push(z.Y_NUMERIC);DA.push(z.Y_AXIS_ORIGIN_LABEL);}else{if(DB===z.Y_AXIS){DA.push(z.Y_AXIS);DA.push(z.Y2_AXIS);}else{if(DB===z.X_AXIS){DA.push(z.X_AXIS);DA.push(z.X2_AXIS);}else{if(DB===z.Y_METRIC_AXIS_TITLE){DA.push(z.Y_METRIC_AXIS_TITLE);DA.push(z.Y_ATTRIBUTE_AXIS_TITLE);}else{if(DB===z.X_METRIC_AXIS_TITLE){DA.push(z.X_METRIC_AXIS_TITLE);DA.push(z.X_ATTRIBUTE_AXIS_TITLE);}else{DA.push(DB);}}}}}}});return DA;}function CJ(DB,DD,DC,C9){C9=!!C9;var DE=[];if(DC.constructor!==Array){DC=[DC];}var DF=function(DG){if(C9){return DG.identity&&DG.identity.tlOpt&&DG.identity.tlOpt[DD];}else{return DG.getAttribute(DD);}};function DA(DI){var DG=DF(DI),DH;if(DI.hasChildNodes()){DH=DI.firstChild;while(DH){if(DH.nodeType===1){DG=DF(DH);if(DC.indexOf(DG)!==-1){DE.push(DH);}else{DA(DH);}}DH=DH.nextSibling;}}}DA(DB);return DE;}function Bl(DB,DA){DA=DA||[];var C9=false;Cc.forEach(DB||[],function(DC){if(DA.indexOf(DC)!==-1){C9=true;}});return C9;}function B7(C9,DC){var DB,DA=C9.dropZones;Cc.forEach(DA,function(DD){Cc.forEach(DD.items,function(DE){if(DB===undefined&&DE.did===DC){DB=DE;}});});return DB;}function Ag(DC,DB){var DA=DC.dropZones,C9=Cc.find(DA,"id",DB);return C9===-1?true:(DA[C9].items.length===0);}function n(C9){if(C9.zonesModel&&C9.zonesModel.gmZones){return C9.zonesModel.gmZones;}return C9.zonesModel;}function T(C9){var DA,DC,DB={},DD=C9.getSelectedObjectInfo(false),DE=DD.length;for(DA=0;DA<DE;DA++){DC=DD[DA];if(DC.tid!==-1){if(DB[DC.tid]===undefined){DB[DC.tid]=[{id:DC.eid,n:DC.v}];}else{DB[DC.tid][0].n+=(":"+DC.v);}}}return DB;}function v(DE,DD){if(!DE){return ;}if(DD.constructor!==Array){DD=[DD];}var DA=DE.getAttribute("class")||"",DG=" "+DA+" ",DB=false,C9=DD.length,DC;for(DC=0;DC<C9;DC++){var DF=DD[DC];if(!DG.match(new RegExp("\\s"+DF+"\\s"))){DA+=" "+DF;DB=true;}}if(DB){DE.setAttribute("class",Cg.trim(DA));}}function Bk(DD,DC){if(!DD){return ;}if(DC.constructor!==Array){DC=[DC];}var DA=" "+(DD.getAttribute("class")||"")+" ",C9=DC.length,DB;for(DB=0;DB<C9;DB++){DA=DA.replace(new RegExp("\\s"+DC[DB]+"\\s","g")," ");}DD.setAttribute("class",Cg.trim(DA));}function CB(C9,DA){var DB=U[C9+"-"+DA];if(DB===undefined){return C5.INVALID;}return DB;}function Aw(C9,DA){switch(DA){case C5.NORMAL2HOVER:v(C9,"hover");break;case C5.NORMAL2SELECTED:v(C9,"selected");break;case C5.HOVER2NORMAL:Bk(C9,"hover");break;case C5.HOVER2SELECTED:Bk(C9,"hover");v(C9,"selected");break;case C5.SELECTED2NORMAL:Bk(C9,"selected");break;case C5.SELECTED2HOVER:Bk(C9,"selected");v(C9,"hover");break;case C5.SH2SELECTED:Bk(C9,"sh");v(C9,"selected");break;case C5.SELECTED2SH:Bk(C9,"selected");v(C9,"sh");break;case C5.SH2NORMAL:Bk(C9,"sh");v(C9,"normal");break;default:break;}}function A9(C9,DE,DC,DD){var DB=C9+DC*Math.cos(DD),DA=DE+DC*Math.sin(DD);return{x:DB,y:DA};}function AE(C9,DA){return"M "+C9+" "+DA;}function Cv(C9,DA){return"L "+C9+" "+DA;}function Bo(DB,DA,DD,C9,DC){return"A "+DB+","+DB+" 0 "+(DA?"1":"0")+","+(DD?"1 ":"0 ")+C9+","+DC;}function BM(){return"Z";}function BQ(C9,DA){return"m "+C9+" "+DA;}function C0(DB,DA,DD,C9,DC){return"a "+DB+","+DB+" 0 "+(DA?"1":"0")+","+(DD?"1 ":"0 ")+C9+","+DC;}function Bn(DF,DC){var DH=DF.sX,DD=DF.sY,DI=DF.sOutR,DG=DF.sInR,DE="";if(Ba(DH,DD,DI,DG)){return DE;}DI-=DC;DG+=DC;var DB=A9(DH,DD,DI,B),DJ=A9(DH,DD,DI,0),C9=A9(DH,DD,DG,B),DA=A9(DH,DD,DG,0);DE=AE(DB.x,DB.y);DE+=(" "+Bo(DI,true,true,DJ.x,DJ.y));DE+=(" "+AE(DA.x,DA.y));DE+=(" "+Bo(DG,true,false,C9.x,C9.y));DE+=(" "+Bo(DG,true,false,DA.x,DA.y));DE+=(" "+AE(DJ.x,DJ.y));DE+=(" "+Bo(DI,true,true,DB.x,DB.y));return DE;}function AG(DI,DC){var DJ=DI.sX,DG=DI.sY,DF=(!DI.sR&&DI.sInR&&DI.sOutR),DH="";if(DJ===undefined||DG===undefined){return DH;}if(DF){DH=Bn(DI,DC);}else{var DK=DI.sR-DC*2,DB=DI.sRadStart,DD=DI.sRadEnd;DH=AE(DJ,DG);var C9=A9(DJ,DG,DK,DB),DA=A9(DJ,DG,DK,DD),DE=(DD-DB)>B;DH+=(" "+Cv(C9.x,C9.y));DH+=(" "+Bo(DK,DE,true,DA.x,DA.y));DH+=(" "+BM());}return DH;}function An(DH,DD){var DI=DH.sX,DG=DH.sY,DK=DH.sR,DC=DH.sRadStart,DE=DH.sRadEnd;if(DI===undefined||DG===undefined||DK===undefined||DC===undefined||DE===undefined){return"";}var DJ=DC+(DE-DC)/2,DA=A9(DI,DG,DD/Math.abs(Math.tan((DE-DC)/2)),DJ);DI=DA.x;DG=DA.y;DK-=(DD+DD/Math.abs(Math.sin((DE-DC)/2)));if((DE-DC)>B){DK+=(DD+1.5*DD/Math.abs(Math.sin((DE-DC)/2)));}var DF=AE(DI,DG),C9=A9(DI,DG,DK,DC),DB=A9(DI,DG,DK,DE);DF+=(" "+Cv(C9.x,C9.y));DF+=AE(DI,DG);DF+=(" "+Cv(DB.x,DB.y));return DF;}function b(DC,DE){var DK=DC.sX,DH=DC.sY,DL=DC.sOutR,DJ=DC.sInR,DB=DC.sRadStart,DF=DC.sRadEnd;if(!DB&&!DF){return Bn(DC,DE);}if(DK===undefined||DH===undefined||DL===undefined||DJ===undefined||DB===undefined||DF===undefined){return"";}DL-=DE;DJ+=DE;DB+=DE*Ab;DF-=DE*Ab;var DM=A9(DK,DH,DL,DB),DA=A9(DK,DH,DL,DF),DD=A9(DK,DH,DJ,DB),DI=A9(DK,DH,DJ,DF),C9=DF-DB>B,DG=AE(DD.x,DD.y);DG+=(" "+Bo(DJ,C9,true,DI.x,DI.y));DG+=(" "+Cv(DA.x,DA.y));DG+=(" "+Bo(DL,C9,false,DM.x,DM.y));DG+=(" "+BM());return DG;}function F(C9){var DA=C9.parentNode;while(DA){if(DA.tagName==="svg"){return DA;}DA=DA.parentNode;}return undefined;}function Ao(DD){if(DD.tagName==="svg"){return DD;}var DA,DB,C9=DD.childNodes,DC=C9.length;for(DA=0;DA<DC;DA++){DB=Ao(C9[DA]);if(DB){return DB;}}return null;}function S(DA){var DC=[],C9=DA.length;if(C9<1){return DC;}DA.sort(function(DF,DE){return DF.sRadStart-DE.sRadStart;});var DD={sRadStart:DA[0].sRadStart,sRadEnd:DA[0].sRadEnd};for(var DB=1;DB<C9;DB++){if(DD.sRadEnd>=DA[DB].sRadStart){DD.sRadEnd=Math.max(DD.sRadEnd,DA[DB].sRadEnd);}else{DC.push(DD);DD={sRadStart:DA[DB].sRadStart,sRadEnd:DA[DB].sRadEnd};}}DC.push(DD);if(DC.length>1&&Math.abs(DC[0].sRadStart+2*B-DC[DC.length-1].sRadEnd)<Q){DC[0].sRadStart=DC[0].sRadEnd;DC[0].sRadEnd=DC[DC.length-1].sRadStart;DC[0].bSeepFlag=true;DC.pop();}return DC;}function Ba(){var C9=[].slice.call(arguments);return C9.some(function(DA){return typeof DA==="undefined";});}var CO={createSVGElement:function(C9){return document.createElementNS("http://www.w3.org/2000/svg",C9);},getPiePointString:function(DJ,DH,DK,DD,DF,DL,DE){var DI="";if(Ba(DJ,DH,DK)){return DI;}if(!Ba(DE)){var DA,DC=(DD+DF)/2;DK-=DE;if(DL){DA=A9(DJ,DH,2,DC>Math.PI?DC-Math.PI:DC+Math.PI);DD-=DE/DK;DF+=DE/DK;}else{DA=A9(DJ,DH,2,DC);DD+=DE/DK;DF-=DE/DK;}DI=AE(DA.x,DA.y);}else{DI=AE(DJ,DH);}var C9=A9(DJ,DH,DK,DD),DB=A9(DJ,DH,DK,DF),DG=(DF-DD)>Math.PI;if(DL){DG=!DG;}DI+=(" "+Cv(C9.x,C9.y));DI+=(" "+Bo(DK,DG,!DL,DB.x,DB.y));DI+=(" "+BM());return DI;},getRingPointString:function(DI,DH,DK,DB,DA,DE,DL,DC){var DG="",DF=true;if(Ba(DI,DH,DK,DB)){return DG;}if(!Ba(DA,DE)&&Math.abs(DE-DA-2*B)>Q){var C9,DD,DM,DJ;if(!Ba(DC)){DB-=DC;DK+=DC;if(DL){DA-=DC/DB;DE+=DC/DB;}else{DA+=DC/DB;DE-=DC/DB;}C9=A9(DI,DH,DB,DA);DD=A9(DI,DH,DB,DE);DM=A9(DI,DH,DK,DA);DJ=A9(DI,DH,DK,DE);}else{C9=A9(DI,DH,DB,DA);DD=A9(DI,DH,DB,DE);DM=A9(DI,DH,DK,DA);DJ=A9(DI,DH,DK,DE);}DF=(DE-DA)>Math.PI;if(DL){DF=!DF;}DG+=(" "+AE(DM.x,DM.y));DG+=(" "+Cv(C9.x,C9.y));DG+=(" "+Bo(DB,DF,!DL,DD.x,DD.y));DG+=(" "+Cv(DJ.x,DJ.y));DG+=(" "+Bo(DK,DF,!!DL,DM.x,DM.y));DG+=(" "+BM());}else{if(!Ba(DC)){DB-=DC;DK+=DC;}DG+=(" "+AE(DI,DH));DG+=(" "+BQ(-DB,0));DG+=(" "+C0(DB,DF,true,DB*2,0));DG+=(" "+C0(DB,DF,true,-DB*2,0));DG+=(" "+AE(DI,DH));DG+=(" "+BQ(-DK,0));DG+=(" "+C0(DK,DF,true,DK*2,0));DG+=(" "+C0(DK,DF,true,-DK*2,0));}return DG;},getPieRingDecoratorPie:function(DE,DD,DC,C9,DB){var DA=null;if(Ba(DE.sRadStart,DE.sRadEnd)||Math.abs(DE.sRadStart+2*B-DE.sRadEnd)<Q){DA=CO.createSVGElement("circle");DA.setAttribute("cx",DD);DA.setAttribute("cy",DC);DA.setAttribute("r",DB?C9-DB:C9);}else{DA=CO.createSVGElement("path");DA.setAttribute("d",CO.getPiePointString(DD,DC,C9,DE.sRadStart,DE.sRadEnd,DE.bSeepFlag,DB));}return DA;},getPieRingDecoratorRing:function(DF,DE,DD,DC,DA,DB){var C9=null;C9=CO.createSVGElement("path");C9.setAttribute("d",CO.getRingPointString(DE,DD,DC,DA,DF.sRadStart,DF.sRadEnd,DF.bSeepFlag,DB));return C9;}};var Cz=function(DD){var DF=0,DB,DA={pie:{},ring:{}},DE,DG,DC,C9=[];for(DB=DD.length;DF<DB;DF++){DE=DD[DF];DC=DE.getAttribute("subtype");if(DC!==BJ.PIE&&DC!==BJ.RING&&DC!==BJ.CIRCLE){continue;}if(typeof DE.sR!==undefined&&Ba(DE.sInR,DE.sOutR)){DG=""+DE.sX+"-"+DE.sY+"-"+DE.sR;C9=DA.pie[DG]||(DA.pie[DG]=[]);}else{DG=""+DE.sX+"-"+DE.sY+"-"+DE.sInR+"-"+DE.sOutR;C9=DA.ring[DG]||(DA.ring[DG]=[]);}C9.push(DE);}return DA;};function o(DD,DB){if(DB!==BJ.PIE&&DB!==BJ.RING&&DB!==BJ.CIRCLE){return ;}var DC=DD.decorator,C9=DD.selectedShapes;if(DC){DD.removeChild(DC);delete DD.decorator;}if(typeof C9==="undefined"||C9.length===0){return ;}DC=DD.decorator=CO.createSVGElement("g");DC.setAttribute("type","gm-group-decorator");var DF=Cz(C9),DA=Object.keys(DF.pie),DE=Object.keys(DF.ring);Cc.forEach(DA,function(DG){var DH=DF.pie[DG],DK=DH[0].sX,DJ=DH[0].sY,DP=DH[0].sR,DI=DP<Ch;var DQ=S(DH);for(var DM=0,DO=DQ.length;DM<DO;DM++){var DR=DQ[DM];var DN=CO.getPieRingDecoratorPie(DR,DK,DJ,DP-1);DN.setAttribute("class","gm-outter-decorator");DC.appendChild(DN);if(!Ba(DR.sRadEnd,DR.sRadStart)){var DS=DR.sRadEnd-DR.sRadStart;if(DR.bSeepFlag){DS=2*B-DS;}if(DS*DP<Ch){DI=true;}}if(!DI){var DL=CO.getPieRingDecoratorPie(DR,DK,DJ,DP,3);DL.setAttribute("class","gm-inner-decorator");DC.appendChild(DL);}}});Cc.forEach(DE,function(DG){var DH=DF.ring[DG],DK=DH[0].sX,DJ=DH[0].sY,DQ=DH[0].sInR,DS=DH[0].sOutR,DI=(DS-DQ<Ch);var DP=S(DH);for(var DM=0,DO=DP.length;DM<DO;DM++){var DR=DP[DM];var DN=CO.getPieRingDecoratorRing(DR,DK,DJ,DQ+1,DS-1);DN.setAttribute("class","gm-outter-decorator");DC.appendChild(DN);if(!Ba(DR.sRadEnd,DR.sRadStart)){var DT=DR.sRadEnd-DR.sRadStart;if(DR.bSeepFlag){DT=2*B-DT;}if(DT*(DS+DQ)<Ch){DI=true;}}if(!DI){var DL=CO.getPieRingDecoratorRing(DR,DK,DJ,DQ,DS,3);DL.setAttribute("class","gm-inner-decorator");DC.appendChild(DL);}}});DD.appendChild(DC);}function G(C9,DF,DE){var DB=DE.left,DD=DE.top,DA=DB+DE.width,DC=DD+DE.height;return C9>=DB&&C9<DA&&DF>=DD&&DF<DC;}function AJ(C9){return Math.round(C9*0.1);}function Co(C9,DI,DG,DC){var DE,DD=C9.box;if(DG){var DB=DC.GMController,DH=DB.hasGroupInfoStored(),DA=DH.existing&&DH.gi,DF=this.getZoneItems(DC.currEnteredDropZoneID,DC),DJ=DH.existing?DA.length:DF.length,DK=C9.axisIndex;DE=(DI==="H"?DD.width:DD.height);if(DJ===1){DE=DE/2;}else{if(DJ>1){if(DK===0){DE=DE*0.67;}else{if(DK===DJ-1){DE=DE*0.33;}else{DE=DE*0.5;}}}}}else{if(DI==="H"){DE=3*AJ(DD.width);}else{DE=3*AJ(DD.height);}}return DE;}function E(DJ,DF,C9,DI,DH,DC){var DD,DG,DA,DB=C9.box,DE=BT.position(DC.domMainContainer);DJ=DJ-DE.x;DF=DF-DE.y;if(DH){DG=DI==="H"?DJ-DB.left:DF=DF-DB.top;DD=Co.call(this,C9,DI,DH,DC);DA=(DG<DD)?BW:C;}else{if(DI==="H"){DJ=DJ-DB.left;DD=Co.call(this,C9,DI,DH,DC);DA=(DJ<DD)?BW:(DJ>DB.width-DD)?C:At;}else{DF=DF-DB.top;DD=Co.call(this,C9,DI,DH,DC);DA=(DF<DD)?BW:(DF>DB.height-DD)?C:At;}}return DA;}function CL(DB,DL,DK){var DH=DB.length,DE=false,DD,C9,DM,DG,DC,DJ,DA,DI,DF;if(DH/2<3){return false;}DM=DB[DH-2];DG=DB[DH-1];for(DF=0;DF<DH;DF=DF+2){DD=DB[DF];C9=DB[DF+1];if(DD>DM){DC=DM;DA=DD;DJ=DG;DI=C9;}else{DC=DD;DA=DM;DJ=C9;DI=DG;}if(DD===DM&&C9===DG){continue;}if((DD<DL)===(DL<=DM)&&((DK-DJ)*(DA-DC)<(DI-DJ)*(DL-DC))){DE=!DE;}DM=DD;DG=C9;}return DE;}function g(DA){var DJ,DI,DE,DD,DL,C9,DC=DA.length,DK=this.widget,DF=DK.manager,DB,DH,DG;this.selectedTargets=this.selectedTargets||[];for(DJ=0;DJ<DC;DJ++){DD=DA[DJ];if(DD.byRow){DF.toggleClsByRows(DD.start,DD.end,DD.depth,true,"selected");this.highlightedRows.push({start:DD.start,end:DD.end});DB=DF.filterRowHeaders(DD.start,DD.end,DD.depth,AY.GM_ROW_HEADER);DH=DB.length;for(DG=0;DG<DH;DG++){this.selectedTargets.push(DB[DG]);this.selectBorders(DB[DG]);}}else{DF.toggleClsByCols(DD.start,DD.end,DD.depth,true,"selected");this.highlightedCols.push({start:DD.start,end:DD.end});DB=DF.filterColHeaders(DD.start,DD.end,DD.depth,AY.GM_COL_HEADER);DH=DB.length;for(DG=0;DG<DH;DG++){this.selectedTargets.push(DB[DG]);this.selectBorders(DB[DG]);}}DL=DD.att;C9=DD.elements;if(DL&&C9){for(DI=0,DE=C9.length;DI<DE;DI++){DK.addAttributeSelection(DL,C9[DI].id,C9[DI].n);}}}}function Cf(C9){return C9.getAttribute("status")===s.SELECTED;}function Ae(C9){return C9.getAttribute("status")===s.SH;}function CK(DC){if(DC.getAttribute("size")==="small"){if(DC.getAttribute("class")==="gm-shape-bar hover"){DC.setAttribute("class","gm-shape-bar small hover");}return undefined;}var DB=document.createElementNS("http://www.w3.org/2000/svg","rect"),C9=parseFloat(DC.getAttribute("x")),DE=parseFloat(DC.getAttribute("y")),DA=parseFloat(DC.getAttribute("width")),DD=parseFloat(DC.getAttribute("height"));DB.setAttribute("class",DC.getAttribute("subtype")===BJ.SQUARE?"gm-marker-square":"gm-marker-bar");DB.setAttribute("type","marker");DB.setAttribute("x",C9+1.5);DB.setAttribute("y",DE+1.5);DB.setAttribute("width",DA-3);DB.setAttribute("height",DD-3);DB.identity=DC.identity;return DB;}function Ca(C9,DD,DB,DA){var DC=document.createElementNS("http://www.w3.org/2000/svg","circle");DC.setAttribute("cx",C9);DC.setAttribute("cy",DD);DC.setAttribute("r",DB-DA);return DC;}function CH(DB){if(DB.getAttribute("size")==="small"){return undefined;}var C9=parseFloat(DB.getAttribute("cx")),DD=parseFloat(DB.getAttribute("cy")),DC=parseFloat(DB.getAttribute("r")),DA=Ca(C9,DD,DC,1.5);DA.setAttribute("class","gm-marker-circle");DA.setAttribute("type","marker");DA.identity=DB.identity;return DA;}function C2(C9){return C9.nodeName==="circle";}function BU(DB){if(DB.getAttribute("size")==="small"){return undefined;}var DA;if(C2(DB)){DA=Ca(DB.sX,DB.sY,DB.sR,2);}else{DA=document.createElementNS("http://www.w3.org/2000/svg","path");var C9=AG(DB,2);if(C9!==""){DA.setAttribute("d",C9);}}DA.setAttribute("class","gm-marker-pie");DA.setAttribute("type","marker");DA.identity=DB.identity;return DA;}function Am(DB){if(DB.getAttribute("size")==="small"){return undefined;}var DA=document.createElementNS("http://www.w3.org/2000/svg","path"),C9=An(DB,0.5);DA.setAttribute("class","gm-marker-outer-line");DA.setAttribute("type","marker");if(C9!==""){DA.setAttribute("d",C9);}DA.identity=DB.identity;return DA;}function AZ(DB){if(DB.getAttribute("size")==="small"){return undefined;}var DA=document.createElementNS("http://www.w3.org/2000/svg","path"),C9=An(DB,2);DA.setAttribute("class","gm-marker-inner-line");DA.setAttribute("type","marker");if(C9!==""){DA.setAttribute("d",C9);}DA.identity=DB.identity;return DA;}function Ck(DB){if(DB.getAttribute("size")==="small"){return undefined;}var DA=document.createElementNS("http://www.w3.org/2000/svg","path"),C9=b(DB,2);DA.setAttribute("class","gm-marker-ring");DA.setAttribute("type","marker");DA.setAttribute("d",C9);DA.identity=DB.identity;return DA;}function Bq(DB){if(DB.getAttribute("size")==="small"){return undefined;}var DA=document.createElementNS("http://www.w3.org/2000/svg","circle"),C9=parseFloat(DB.getAttribute("cx")),DD=parseFloat(DB.getAttribute("cy")),DC=parseFloat(DB.getAttribute("r"));DA.setAttribute("class","gm-marker-scircle");DA.setAttribute("type","marker");DA.setAttribute("cx",C9);DA.setAttribute("cy",DD);DA.setAttribute("r",DC-2);DA.identity=DB.identity;return DA;}function AQ(C9){var DB,DA=CO.createSVGElement("polygon"),DD=C9.length,DC="";for(DB=0;DB<DD;++DB){DC+=(C9[DB].x+","+C9[DB].y+" ");}DA.setAttribute("points",DC);return DA;}function Ct(C9,DA){this.x=C9;this.y=DA;}var Cu=Ct.prototype;Cu.dot=function(C9){return this.x*C9.x+this.y*C9.y;};Cu.add=function(C9){return new Ct(this.x+C9.x,this.y+C9.y);};Cu.diff=function(C9){return new Ct(this.x-C9.x,this.y-C9.y);};Cu.length=function(){return Math.sqrt(this.dot(this));};Cu.normalize=function(){var C9=this.length();this.x/=C9;this.y/=C9;return this;};Cu.scale=function(C9){return new Ct(this.x*C9,this.y*C9);};Cu.isInPolygon=function(DC){var DD=DC.length,C9=false,DB,DA;if(DD<3){return false;}for(DB=0,DA=DD-1;DB<DD;DA=DB++){if(((DC[DB].y<=this.y&&this.y<DC[DA].y)||(DC[DA].y<=this.y&&this.y<DC[DB].y))&&this.x<=(DC[DA].x-DC[DB].x)*(this.y-DC[DB].y)/(DC[DA].y-DC[DB].y)+DC[DB].x){C9=!C9;}}return C9;};function Ah(DM,DE){DE=DE||2.5;var DF=0,DI=DM.length,DD=[],DH=[],DC,DL,DG,DJ,DA;for(DF=0;DF<DI;DF++){DD.push(new Ct(DM[DF].x,DM[DF].y));}for(DF=0,DI=DD.length;DF<DI;DF++){DL=DD[DF];DC=DD[DF===0?DI-1:DF-1];DG=DD[DF===DI-1?0:DF+1];var DO=DC.diff(DL);var DN=DG.diff(DL);DO.normalize();DN.normalize();DJ=DO.dot(DN);DA=Math.sqrt((1-DJ)/2);var DB=DE/DA;var C9=DO.add(DN).normalize();var DK=DL.add(C9.scale(DB));if(!DK.isInPolygon(DD)){DK=DL.add(C9.scale(-1*DB));}DH.push(DK);}return DH;}function CU(DA){if(DA.tagName==="circle"){return CH(DA);}var C9=CO.createSVGElement("g"),DB=DA.points;C9.setAttribute("type","gm-group-decorator");var DD=AQ(DB);DD.setAttribute("class","gm-outter-decorator");C9.appendChild(DD);if(DA.getAttribute("size")==="small"){return C9;}DB=Ah(DB,2.5);var DC=AQ(DB);DC.setAttribute("class","gm-inner-decorator");C9.appendChild(DC);return C9;}function Bb(DA,DB){var C9=DA.decorator;if(C9){return C9;}if(!DB){DB=DA.getAttribute("subtype");}switch(DB){case BJ.BAR:case BJ.GBAR:case BJ.SQUARE:C9=CK(DA);break;case BJ.SCIRCLE:C9=Bq(DA);break;case BJ.CIRCLE:C9=CH(DA);break;case BJ.PIE:C9=BU(DA);break;case BJ.RING:C9=Ck(DA);break;case BJ.SBAR:C9=CU(DA);break;case BJ.TICKER:break;}if(C9){C9.source=DA;DA.decorator=C9;}return C9;}function c(DC,DD){var DA=parseFloat(DC.getAttribute("x")),DF=parseFloat(DC.getAttribute("y")),DB=parseFloat(DC.getAttribute("width")),DE=parseFloat(DC.getAttribute("height")),C9=parseInt(DC.style.strokeWidth,10);if(DC.getAttribute("size")==="small"){switch(DD){case C5.NORMAL2HOVER:case C5.SELECTED2HOVER:DC.setAttribute("x",DA-C9/2);DC.setAttribute("y",DF-C9/2);DC.setAttribute("width",DB+C9);DC.setAttribute("height",DE+C9);break;case C5.HOVER2NORMAL:case C5.HOVER2SELECTED:DC.setAttribute("x",DA+C9/2);DC.setAttribute("y",DF+C9/2);DC.setAttribute("width",DB-C9);DC.setAttribute("height",DE-C9);break;default:break;}return ;}switch(DD){case C5.NORMAL2HOVER:case C5.NORMAL2SELECTED:DC.setAttribute("x",DA+0.5);DC.setAttribute("y",DF+0.5);DC.setAttribute("width",DB-1);DC.setAttribute("height",DE-1);DC.style.strokeWidth=C9+1;break;case C5.HOVER2NORMAL:case C5.SELECTED2NORMAL:DC.setAttribute("x",DA-0.5);DC.setAttribute("y",DF-0.5);DC.setAttribute("width",DB+1);DC.setAttribute("height",DE+1);DC.style.strokeWidth=C9-1;break;default:break;}}function CY(DA,DB){var DC=DA.parentNode,C9=Bb(DA);switch(DB){case C5.NORMAL2HOVER:case C5.NORMAL2SELECTED:if(DC&&C9){DC.appendChild(C9);}break;case C5.HOVER2NORMAL:case C5.SELECTED2NORMAL:if(DC&&C9){DC.removeChild(C9);}break;default:break;}}function Cs(DA,DB){var DC=DA.parentNode,C9=Bb(DA);if(DA.tagName==="polygon"&&DA.getAttribute("subtype")===BJ.SBAR){DC=DC.parentNode;if(!DC){return ;}switch(DB){case C5.NORMAL2SELECTED:case C5.NORMAL2HOVER:if(C9&&DC){DC.appendChild(C9);}break;case C5.SELECTED2NORMAL:case C5.HOVER2NORMAL:if(C9){DC.removeChild(C9);}break;}}else{if(!DC){return ;}switch(DB){case C5.NORMAL2SELECTED:case C5.HOVER2SELECTED:if(C9){DC.appendChild(C9);}break;case C5.SELECTED2NORMAL:case C5.SELECTED2HOVER:if(C9){DC.removeChild(C9);}break;}}}function Ar(C9,DA){var DC=C9.sd,DB=C9.sD;switch(DA){case C5.NORMAL2SELECTED:case C5.HOVER2SELECTED:if(C2(C9)){C9.setAttribute("r",C9.sR-0.5);}else{if(!DC){DC=AG(C9,0.5);C9.sd=DC;}C9.setAttribute("d",DC);}C9.style.strokeWidth=2;break;case C5.SELECTED2NORMAL:case C5.SELECTED2HOVER:if(C2(C9)){C9.setAttribute("r",C9.sR);}else{if(!DB){DB=AG(C9,0);C9.sD=DB;}C9.setAttribute("d",DB);}C9.style.strokeWidth=1;break;default:break;}}function CV(DB){var DA=DB.parentNode,DC=DA&&DA.parentNode,DD=[],DG=this.widget.GMController,DF=DG.getChartInfo(),DE=DF.isABL&&(DF.shape===Br.CIRCLE||DF.shape===Br.PIE||DF.shape===Br.RING||DF.shape===Br.SQUARE);var C9=function(){DC.removeChild(DA);var DH=DC.childNodes.length,DJ=DH>0&&DC.childNodes[DH-1],DI=DJ.childNodes.length>0&&DJ.childNodes[0].nodeName==="text";if(DI){DC.insertBefore(DA,DJ);}else{DC.appendChild(DA);}};if(!DA||!DC){return ;}switch(DB.getAttribute("subtype")){case BJ.SQUARE:case BJ.SCIRCLE:if(DE){C9();}break;case BJ.PIE:case BJ.RING:case BJ.CIRCLE:if(DE){C9();}[].slice.call(DA.childNodes).forEach(function(DH){if(DH.sX===DB.sX&&DH.sY===DB.sY){DD.push(DH);}});DD.forEach(function(DH){DA.removeChild(DH);});DD.forEach(function(DH){DA.appendChild(DH);});break;}return ;}function Cd(DB,DA){if(!DB){return ;}var C9=DB.getAttribute("status")||s.NORMAL;if(DA===C9){return ;}var DC=CB(C9,DA);Aw(DB,DC);switch(DB.getAttribute("subtype")){case BJ.BAR:c(DB,DC);Cs(DB,DC);break;case BJ.SCIRCLE:CY(DB,DC);break;case BJ.GBAR:case BJ.SQUARE:case BJ.SBAR:case BJ.TICKER:Cs(DB,DC);break;default:break;}DB.setAttribute("status",DA);}function BF(DC,DA){if(!DC){return ;}var C9=DC.getAttribute("status")||s.NORMAL;if(DA===C9){return ;}var DB=CB(C9,DA);Aw(DC,DB);DC.setAttribute("status",DA);}function Aj(DD,C9){var DA=this.widget,DB=this.domMenuPH,DC=this;DB.innerHTML="";document.body.appendChild(DB);DA.configurePopup(C9,DB);DA.menuEditor=C9.newInstance({locksHover:false,unrender:function(){}});DA.menuEditorClosefn=function(DF){var DH=DF.target,DE=DA.menuEditor.domNode;if(!BT.contains(DE,DH,true,DE)&&!Cl.isHostedPopupNode(DH,"class",true,document.body)){if(DA.toolEditor){var DG=DA.toolEditor.domNode;if(!BT.contains(DG,DH,true,DG)){DC.hideContextMenu();}}else{DC.hideContextMenu();}}};BT.attachEvent(document.body,"mousedown",DA.menuEditorClosefn,true);DA.openPopup(DA.menuEditor);}function AI(DD,DA){var C9=this.widget,DB=this.domToolbarPH,DC=this;C9._lastOpened=null;DB.innerHTML="";document.body.appendChild(DB);B6.toggleClass(DB,mstrApp.getThemeClassName(),true);C9.configurePopup(DA,DB);C9.toolEditor=DA.newInstance({unrender:function(){}});C9.toolEditorClosefn=function(DF){var DH=DF.target,DG=C9.toolEditor.domNode;if(!BT.contains(DG,DH,true,DG)&&!Cl.isHostedPopupNode(DH,"class",true,document.body)){if(C9.menuEditor){var DE=C9.menuEditor.domNode;if(!BT.contains(DE,DH,true,DE)){DC.hideToolbar();}}else{DC.hideToolbar();}}};BT.attachEvent(document.body,"mousedown",C9.toolEditorClosefn,true);C9.openPopup(C9.toolEditor);B6.toggleClass(document.body,"hasToolbarPopup",true);}function AK(DD,DA){var C9=this.widget,DB=this.domToolbarPH,DC=this;if(C9._lastOpened){C9.closePopup();}C9._lastOpened=null;DB.style.top=DD.y+"px";DB.style.left=DD.x+"px";DB.innerHTML="";document.body.appendChild(DB);B6.toggleClass(DB,mstrApp.getThemeClassName(),true);C9.configurePopup(DA,DB);C9.toolEditor=DA.newInstance({unrender:function(){}});C9.toolEditorClosefn=function(DF){var DH=DF.target,DG=C9.toolEditor.domNode;if(!BT.contains(DG,DH,true,DG)&&!Cl.isHostedPopupNode(DH,"class",true,document.body)){if(C9.menuEditor){var DE=C9.menuEditor.domNode;if(!BT.contains(DE,DH,true,DE)){DC.hideToolbar();}}else{DC.hideToolbar();}}};BT.attachEvent(document.body,"mousedown",C9.toolEditorClosefn,true);C9.openPopup(C9.toolEditor);B6.toggleClass(document.body,"hasToolbarPopup",true);}function BY(DC,DB,DA,C9){var DD;if(C9===undefined){if(DA===B4.GLOBAL){if(DB===C8.BG_COLOR){DD=DC.getFormats()["background-color"];}else{DD=DC.readGlobalProperty(DB);}}else{if(DA===B4.FORMATTING){DD=DC.getPropertiesOfFormatable();}}}else{DD=DC.readGlobalProperty(C9.realPropName,C9.opt);}if(typeof DD==="object"&&DD.jsonObj){DD=DD.jsonObj[DB];}if(DB.slice(-3)===X.COLOR&&DB!==C8.BG_COLOR){DD=p.decodeColor(DD);}return DD;}function Ay(DC,DB,DA,C9){if(C9!==undefined){return function(DF){var DD=DC.readGlobalProperty(C9.realPropName,C9.opt),DE=DD.jsonObj[DB];if(DB.indexOf(X.COLOR)!==-1){DF=p.encodeColor(DF);}if(DF!==DE){DD.setProperty(DB,DF);DC.writeGlobalProperty(C9.realPropName,DD,C9.opt);}};}if(DA===B4.GLOBAL){return function(DE){var DD=BY(DC,DB,B4.GLOBAL);if(DE!==DD){if(DB.indexOf(X.COLOR)!==-1){DE=p.encodeColor(DE);}DC.writeGlobalProperty(DB,DE);}};}return function(DG){var DF=BY(DC,DB,B4.FORMATTING),DE=p.checkEquality(DG,DF);if(!DE){if(DB.indexOf(X.COLOR)!==-1){DG=p.encodeColor(DG);}var DD=DC.getPropertiesOfFormatable();if(DD&&DD.jsonObj&&!p.checkEquality(DD.jsonObj[DB],DG)){DD.setProperty(DB,DG);DC.writeFormatableProperties(DD);}}};}function Cm(DA,C9){DA=DA||[];C9=C9||"";Cc.forEach(DA,function(DB){DB.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",cssClass:C9,children:DA};}function Bu(C9,DA){return new mstrmojo.Box({children:C9||[],cssText:DA});}function CM(DD,DE,DF,C9){var DA=new mstrmojo.Label({text:DD}),DC=Bu(DA,"white-space: nowrap; margin-right:9px;");var DB=[DC,DE];if(DF){DB=[DE,DC];}return Cm(DB,C9);}function BH(DD,DB,DC,DA,C9){DB=DB||{};if(DB.propNames===undefined){DB.propNames=DC;}if(DB.onGroupValueChange===undefined){DB.onGroupValueChange=function(DE,DG,DF){if(DG!==DF&&DG!==undefined){if(DE===C8.BG_COLOR){Cl.changeWidgetBackground(DD,DG,DF);}else{Ay(DD,DE,DA,C9).call(this,DG,DF);}}};}return DB;}function CS(DC,DD,DB,DA,C9){Cc.forEach(DB,function(DE){var DF=BY(DC,DE,DA,C9);DD.syncControls(function(){DD.setChildValue(DE,DF);});});}function CI(DE,DA,DD,DC,C9,DB){DB=BH(DE,DB,DD,DC,C9);Ax.copy({cssClass:"mstrmojo-ui-ToolBarLineGroup",layoutConfig:null,width:DB.width||"125px",showNoFillInColor:false},DB);var DF=new mstrmojo.ui.editors.controls.LineConfigGroup(DB);if(DF){DF.height="22px;";DF.iniChildrenComp(DD);CS(DE,DF,DD,DC,C9);}if(typeof DA==="string"){return CM(DA,DF,false,(DB||[]).rowContainerCSSClass);}return DF;}function C7(DD,C9,DC,DB,DA){DA=BH(DD,DA,DC,DB);Ax.copy({width:DA.width||"140px",height:"22px",colorPickerHostWithin:true},DA);var DE=new mstrmojo.ui.editors.controls.FillConfigGroup(DA);if(DE){DE.iniChildrenComp(DC);CS(DD,DE,DC,DB);if(DE.children[0]&&DE.children[0].children[0]){p.initColorPickerBtnWithGradientDir(DE.children[0].children[0],DD);}}if(typeof C9==="string"){return CM(C9,DE);}return DE;}function CG(DE,DD,DG,DB,DC){var DA=DE.model.data.dz.ColorBy,DF=CI(DE,mstrmojo.desc(9736,"Border"),DD,DB,undefined,{rowContainerCSSClass:"mstrmojo-ui-rowContainer",showNoneOption:false}),C9=C7(DE,mstrmojo.desc(2885,"Fill"),DG,DB,{onGroupValueChange:function(DI,DM,DJ){if(DM!==DJ&&DM!==undefined){var DK="shpBdrClr_default",DH=DE.getPropertiesOfFormatable(),DL=DH.jsonObj[DK];if(DA.TemplateUnit&&DI===C8.SHAPE_FILL_COLOR&&DL){DF.children[1].syncControls(function(){this.setChildValue(C8.SHAPE_BORDER_COLOR,DM);});}Ay(DE,DI,DB).call(this,DM,DJ);}},showGradient:DE.interactor.isShowGradientAllowed(DC)});return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolbarBorderAndFill",children:[C9,DF]}]});}function Af(DE,DA,DD,DC,C9,DB){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[CI(DE,DA,DD,DC,C9,DB)]}]});}function Ai(DD,C9,DC,DB,DA){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[C7(DD,C9,DC,DB,DA)]}]});}function f(C9){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-FillOpacityAndBorderStyleToolbar",children:[C7(C9,mstrmojo.desc(13658,"Fill Opacity"),[C8.SHAPE_FILL_TRANSPARENCY],B4.FORMATTING,{width:"60px",visibleControls:mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS.FILL_TRANSPARENCY}),CI(C9,mstrmojo.desc(3538,"Border Style"),[C8.SHAPE_BORDER_COMBINED_STYLE],B4.FORMATTING,undefined,{width:"60px",hideColorControl:true,rowContainerCSSClass:"mstrmojo-ui-rowContainer"})]}]});}function CA(DG,DE,DD,DC,DB,C9){var DA=BY(DE,DD,DC),DF={showGradient:!!C9,isHostedWithin:true,width:"40px",selectedValue:DA,postselectedValueChange:function(DH){Ay(DE,DD,DC).call(this,DH.value,DH.valueWas);}};DG=DG||"ColorPickerButton";DB=Ax.copy(DF,DB);return new mstrmojo.ui.editors.controls[DG](DB);}function L(DD,DB,DA){var DC={sourceColor:DB,checkboxLabel:DA},C9=CA("MarkerColorPickerButton",DD,C8.LINE_MARKER_COLOR,B4.FORMATTING,DC);return CM(mstrmojo.desc(6242,"Color"),C9);}function Z(DG,DC,DB,DF,DE,DA){var DD={alias:DC},C9=CA("ColorPickerButton",DG,DF,DE,DD,DA);if(typeof DB==="string"){return CM(DB,C9);}return C9;}function Bj(DF,DE,DD,DC){var DB=DF.readGlobalProperty(DE),C9=DB.color,DG=DF.interactor;return new mstrmojo.ui.menus.ToolbarEditorConfig({cssClass:"cbsquare-colorpicker",contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker(Ax.copy(DC,{color:DB.isDefaultColor?P.VAL_AUTOMATIC:C9,autoPreviewColor:DB.isDefaultColor?C9:null,colorChanged:function(DH){DH=(this.showAutomatic&&DH===P.VAL_AUTOMATIC)?AT:DH;Ay(DF,DE,DD).call(this,DH,C9);DG.hideToolbar();},colorCanceled:function(){DG.hideToolbar();},showPickerForCurrentMode:function DA(){mstrmojo.ui.editors.controls.AdvancedColorPicker.prototype.showPickerForCurrentMode.call(this);if(this.pickerMode===2&&typeof this.color!=="object"){var DH=this.gradientOrientation,DI=DF.getChartInfo().dirc===B1.EnumABLDirection.VERTICAL;DH.set("selectedIndex",Cc.find(DH.items,"id",DI?0:1));}}}))]});}function A7(DB,DA){var DC=[],C9=[];Cc.forEach(DB,function(DD){DC.push(DD.tid);C9.push(DD.eid);});return DA.getColorBy(DC,C9);}function Ak(DD,DC,DB,C9,DE){var DA=C9.jsonObj[DC];return new mstrmojo.ui.menus.PopupConfig({contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker({color:p.decodeColor(DA),showNoFill:DE,colorChanged:function(DF){var DG=p.encodeColor(DF);if(DG!==DA){C9.setProperty(DC,DG);C9.opt=DB.opt;DD.writeGlobalProperty(DB.realPropName,C9,DB.opt);DD.raiseEventFormatableChanged();}this.parent.popupConfig.close();},colorCanceled:function(){this.parent.popupConfig.close();}})]});}function Bh(DF,DH,DK,DD){var DJ,DI,DA,DG=false,DB;if(DK.TemplateUnit||DK.MetricNames!==undefined){DB=true;DJ=(DF.getDocModel&&DF.getDocModel())||DF.model.docModel;DI=DH.identity.getSelectedObjectColorByInfo();var DC=A7(DI,DJ);DA=DC.color;DG=DC.isManual;}else{DB=false;DA=DF.readGlobalProperty(C8.SHAPE_FILL_COLOR);}var C9=p.decodeColor(DA);return new mstrmojo.ui.menus.PopupConfig({contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker(Ax.copy(DD,{color:DG?C9:P.VAL_AUTOMATIC,autoPreviewColor:DG?null:C9,colorChanged:function(DL){var DM=(this.showAutomatic&&DL===P.VAL_AUTOMATIC)?AT:p.encodeColor(DL);if(DM!==DA){if(DB){DF.updateColorByMap([DI],DM);}else{Ay(DF,C8.SHAPE_FILL_COLOR,B4.FORMATTING).call(this,DL);}}this.parent.popupConfig.close();},colorCanceled:function(){this.parent.popupConfig.close();},showPickerForCurrentMode:function DE(){mstrmojo.ui.editors.controls.AdvancedColorPicker.prototype.showPickerForCurrentMode.call(this);var DM=this.parent,DL=function DL(){DM.adjustCornersForPopupOverflow();};if(this.pickerMode===2){this.colorStyle.markupMethods=Ax.copy({onselectedIndexChange:DL},Ax.copy(this.colorStyle.markupMethods));}if(this.pickerMode===2&&typeof this.color!=="object"){var DN=this.gradientOrientation,DO=DF.getChartInfo().dirc===B1.EnumABLDirection.VERTICAL;DN.set("selectedIndex",Cc.find(DN.items,"id",DO?0:1));}DL();}}))]});}function Bd(DG,DA,DE){var C9={},DF=BY(DE,DA+X.FONT_STYLE,B4.GLOBAL),DC=BY(DE,DA+X.FONT_COLOR,B4.GLOBAL),DB=BY(DE,DA+X.FONT_FAMILY,B4.GLOBAL),DD=BY(DE,DA+X.FONT_SIZE,B4.GLOBAL);if(DF!==undefined){C9[Az.FONT_WEIGHT]=(!isNaN(DF)&&((DF&x.FS_BOLD)>0));C9[Az.FONT_STYLE]=(!isNaN(DF)&&((DF&x.FS_ITALIC)>0));C9[Az.UNDERLINE]=(!isNaN(DF)&&((DF&x.FS_UNDERLINE)>0));C9[Az.LINE_THROUGH]=(!isNaN(DF)&&((DF&x.FS_STRIKETHROUGH)>0));}C9[Az.COLOR]=DC!==undefined?DC:-1;C9[Az.FONT_SIZE]=DD!==undefined?DD:-1;C9[Az.FONT_FAMILY]=DB!==undefined?DB:-1;DG.setFormatSource(C9);}function Bz(DC,DD,DB,C9){var DA={bold:x.FS_BOLD,italic:x.FS_ITALIC,underline:x.FS_UNDERLINE,strikeout:x.FS_STRIKETHROUGH};DB.forEach(function(DE){var DF=null;if(DE.indexOf(X.FONT_STYLE)>-1){DF=DD.fontStyle;DF.postselectionChange=function(DG){var DJ=DG.added,DK=this.items[(DJ&&DJ[0]!==undefined)?DJ[0]:DG.removed[0]],DI=!!DJ,DH=BY(DC,DE,C9),DL=(DH===undefined?0:DH);if(DI){DL=DL|DA[DK.css];}else{DL=DL&(~DA[DK.css]);}this.parent.raiseFormatValueChange(DE,DL,DH);};}else{if(DE.indexOf(X.FONT_FAMILY)>-1){DF=DD.fontFamily;DF.postselectedIndexChange=function(DG){var DJ=DG.value,DI=DG.valueWas;if(DJ!==DI){var DH=this.items;this.parent.raiseFormatValueChange(DE,DH[DJ].id,DH[DI]&&DH[DI].id);}};}else{if(DE.indexOf(X.FONT_SIZE)>-1){DF=DD.fontSize;DF.postselectedValueChange=function(DG){var DI=parseInt(DG.value,10)+"pt",DH=parseInt(DG.valueWas,10)+"pt";if(DI!==DH){this.parent.parent.raiseFormatValueChange(DE,DI,DH);}};DF.validateTextInput=function(DI,DG){var DH=parseInt(DI,10);if(isNaN(DH)){return DG;}return DH.toString();};}else{if(DE.indexOf(X.FONT_COLOR)>-1){DF=DD.fontColor;DF.postselectedValueChange=function(DG){this.parent.parent.raiseFormatValueChange(DE,DG.value,DG.valueWas);};}}}}if(DF){DF.propName=DE;}});}function BD(DD,C9,DC,DB,DA,DF){if(DA===undefined){DA={};}if(DF!==undefined){DA.showNoFillInColor=DF;}DA=Ax.copy(DD.getFontToolbarProps(),DA);if(DA.propNames===undefined){DA.propNames=DC;}if(DA.onGroupValueChange===undefined){DA.onGroupValueChange=function(DG,DI,DH){if(DI!==DH&&DI!==undefined){Ay(DD,DG,B4.GLOBAL).call(this,DI,DH);}};}var DE=new mstrmojo.ui.editors.controls.CharacterGroup(DA);Bz(DD,DE,DC,DB);Bd(DE,C9,DD);return DE;}function K(DD,C9,DC,DB,DA,DE){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[BD(DD,C9,DC,DB,DA,DE)]}]});}function A3(DB,DA,C9){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.HBox",children:[L(DB,DA,C9)]}]});}function Bs(DB){var C9=Ax.keyarray(DB).sort(),DA=[],DC;C9.forEach(function(DD){DC=[];DB[DD].forEach(function(DE){DC.push(DE.id);});DA.push(DD+"-"+DC.sort().join("@"));});return DA.join("#");}function W(DC,C9){var DD,DG,DB=DC.identity,DA,DF={};if(C9){DA=DB.getSelectedObjectColorByInfo();}else{DA=DB.getSelectedObjectLowestLevel(true);}for(DD=0,DG=DA.length;DD<DG;DD++){var DE=DF[DA[DD].tid];if(DE===undefined){DF[DA[DD].tid]=[{id:DA[DD].eid}];}else{DE.push({id:DA[DD].eid});}}DF.hashKey=Bs(DF);return DF;}function A5(C9){return W.call(this,C9,true);}function AX(C9){return W.call(this,C9,false);}function Be(DB,C9){var DA,DC,DD=DB.length;for(DA=0;DA<DD;DA++){DC=DB[DA];if(DC.hashKey===C9.hashKey){return DA;}}return -1;}function B0(C9){return C9===AY.GM_SHAPE||C9===AY.MARKER;}function CT(C9){return C9===AY.GM_ROW_HEADER||C9===AY.GM_ROW_HEADER_TITLE||C9===AY.GM_ROW_HEADER_EXTRA;}function Bx(C9){return C9===AY.GM_ROW_HEADER_TITLE;}function CD(C9){return C9===AY.GM_ROW_HEADER||C9===AY.GM_ROW_HEADER_EXTRA;}function A4(C9){return C9===AY.GM_COL_HEADER||C9===AY.GM_COL_HEADER_TITLE||C9===AY.GM_COL_HEADER_EXTRA;}function R(C9){return C9===AY.GM_COL_HEADER_TITLE;}function Aq(C9){return C9===AY.GM_COL_HEADER||C9===AY.GM_COL_HEADER_EXTRA;}function h(C9){return C9===AY.GM_H_MATRIX_LINE||C9===AY.GM_V_MATRIX_LINE||C9===AY.GM_H_CHART_LINE||C9===AY.GM_V_CHART_LINE;}function Cj(C9){return C9===AY.GM_V_MATRIX_LINE||C9===AY.GM_V_CHART_LINE;}function CC(C9){return C9===AY.GM_H_MATRIX_LINE||C9===AY.GM_H_CHART_LINE;}function t(C9){return C9===AY.GM_YAXIS_LINE||C9===AY.GM_XAXIS_LINE||C9===AY.GM_YAXIS2_LINE||C9===AY.GM_XAXIS2_LINE;}function B3(C9){return C9===AY.GM_ORIGIN_LINE;}function BO(C9){return C9===AY.GM_ORIGIN_LABEL_V||C9===AY.GM_ORIGIN_LABEL_H;}function w(C9){return C9===AY.GM_TREND_LINE;}function Bp(C9){return C9===AY.GM_REF_LINE;}function BC(C9){return C9===AY.GM_XAXIS_LINE||C9===AY.GM_XAXIS2_LINE;}function CZ(C9){return C9===AY.GM_YAXIS_LINE||C9===AY.GM_YAXIS2_LINE;}function M(C9){return C9===AY.GM_XLABEL||C9===AY.GM_YLABEL;}function BP(C9){return C9===AY.GM_X_NUMERIC||C9===AY.GM_Y_NUMERIC;}function AV(C9){return C9===AY.GM_X_NUMERIC||C9===AY.GM_X_CATEGORY||C9===AY.GM_Y_NUMERIC||C9===AY.GM_Y_CATEGORY;}function Ap(C9){return C9===AY.GM_H_GRID_LINE||C9===AY.GM_V_GRID_LINE||C9===AY.GM_H_MINOR_GRID_LINE||C9===AY.GM_V_MINOR_GRID_LINE;}function BK(C9){return C9===AY.GM_H_GRID_LINE||C9===AY.GM_V_GRID_LINE;}function H(C9){return C9===AY.GM_H_MINOR_GRID_LINE||C9===AY.GM_V_MINOR_GRID_LINE;}function A0(C9){return C9===AY.GM_DATA_LABEL;}function N(DA){if(DA.constructor!==Array){DA=[DA];}var DB=this.selectedTargets||[],C9=false;DB.forEach(function(DD){var DC=DD.getAttribute("type");if(DA.indexOf(DC)>-1){C9=true;}});return C9;}function AW(DD){var C9,DG,DB,DF=DD.getAttribute("type"),DC,DE,DA,DH=false;if(DF===null&&DD.innerHTML==="|"&&DD.className==="gm-text-body-nowrap"){DF=AY.GM_SVG_Y_NUMERIC;}if(DF===null){DD=DD.parentNode;DF=DD.getAttribute("type");}if(DF===AY.LINE_CONTAINER){DD=DD.firstChild;DF=DD.getAttribute("type");}if(DF===AY.GM_AXIS_TEXT||DF===AY.GM_AXIS_WORD){DD=F(DD);DF=DD&&DD.getAttribute("type");}if(DF===AY.GM_TEXT_BODY){C9=DD.parentNode;DG=C9.getAttribute("type");switch(DG){case AY.GM_ROW_HEADER_TITLE:case AY.GM_COL_HEADER_TITLE:case AY.GM_COL_HEADER:case AY.GM_ROW_HEADER:case AY.GM_COL_HEADER_EXTRA:case AY.GM_ROW_HEADER_EXTRA:case AY.GM_YLABEL:case AY.GM_XLABEL:DB=C9;break;}}else{switch(DF){case AY.GM_YLABEL:case AY.GM_XLABEL:case AY.GM_SVG_Y_NUMERIC:case AY.GM_SVG_X_NUMERIC:case AY.GM_SVG_X_CATEGORY:case AY.GM_SVG_Y_CATEGORY:DB=DD.parentNode.parentNode;break;case AY.GM_Y_NUMERIC:case AY.GM_X_NUMERIC:case AY.GM_X_CATEGORY:case AY.GM_Y_CATEGORY:case AY.GM_COL_HEADER:case AY.GM_ROW_HEADER:case AY.GM_SHAPE:case AY.GM_SET_SHAPE:case AY.LASSO_SELECTOR:case AY.LASSO_RESIZER:case AY.GM_SVG_CHART:DB=DD;break;case AY.GM_TREND_LINE:case AY.GM_REF_LINE:DC=DD.getAttribute("hover-catcher");if(DC!==undefined&&DC!==null&&DC==="1"){DE=DD.previousElementSibling;if(DE!==null){DA=DE.getAttribute("hover-catcher");if(DA!==undefined&&DA!==null&&DA==="0"&&DE.identity===DD.identity){DH=true;}}}if(DH){DB=DE;}else{DB=DD;}break;case AY.GM_MARKER:DB=DD.source;break;default:break;}}return DB;}function AS(DD){var DB,DC=DD.getAttribute("type"),C9,DA,DF,DE=false;if(DC===null||DC===AY.GM_TEXT_BODY){DD=DD.parentNode;DC=DD.getAttribute("type");}if(DC===AY.GM_DATA_LABEL||DC===AY.GM_ORIGIN_LABEL){DD.identity=DD.parentNode.identity;}if(DC===AY.LINE_CONTAINER){DD=DD.firstChild;DC=DD.getAttribute("type");}if(DC===AY.GM_AXIS_TEXT||DC===AY.GM_AXIS_WORD){DD=F(DD);DC=DD.getAttribute("type");}switch(DC){case AY.GM_H_MATRIX_LINE:case AY.GM_V_MATRIX_LINE:case AY.GM_H_CHART_LINE:case AY.GM_V_CHART_LINE:case AY.GM_YAXIS_LINE:case AY.GM_XAXIS_LINE:case AY.GM_YAXIS2_LINE:case AY.GM_XAXIS2_LINE:case AY.GM_H_GRID_LINE:case AY.GM_V_GRID_LINE:case AY.GM_H_MINOR_GRID_LINE:case AY.GM_V_MINOR_GRID_LINE:case AY.GM_ROW_HEADER:case AY.GM_COL_HEADER:case AY.GM_COL_HEADER_EXTRA:case AY.GM_ROW_HEADER_EXTRA:case AY.GM_ROW_HEADER_TITLE:case AY.GM_COL_HEADER_TITLE:case AY.GM_Y_NUMERIC:case AY.GM_X_NUMERIC:case AY.GM_ORIGIN_LINE:case AY.GM_ORIGIN_LABEL_H:case AY.GM_ORIGIN_LABEL_V:case AY.GM_DUMMY_A:case AY.GM_DATA_LABEL:case AY.GM_YLABEL:case AY.GM_XLABEL:DB=DD;break;case AY.GM_TREND_LINE:case AY.GM_REF_LINE:C9=DD.getAttribute("hover-catcher");if(C9!==undefined&&C9!==null&&C9==="1"){DA=DD.previousElementSibling;if(DA!==null){DF=DA.getAttribute("hover-catcher");if(DF!==undefined&&DF!==null&&DF==="0"&&DA.identity===DD.identity){DE=true;}}}if(DE){DB=DA;}else{DB=DD;}break;case AY.GM_SHAPE:case AY.GM_SET_SHAPE:case AY.LASSO_SELECTOR:case AY.GM_SVG_CHART:DB=DD;break;case AY.GM_MARKER:DB=DD.source;break;case AY.GM_SVG_Y_NUMERIC:case AY.GM_SVG_X_NUMERIC:case AY.GM_SVG_X_CATEGORY:case AY.GM_SVG_Y_CATEGORY:DB=DD.parentNode.parentNode;break;default:break;}return DB;}function BB(DC,DA,C9,DB){var DF=parseInt(DC.getAttribute("row"),10),DD=parseInt(DC.getAttribute("rowSpan"),10),DE=parseInt(DC.getAttribute("depth"),10);DB.toggleClsByRows(DF,DF+DD-1,DE,DA,C9);}function a(DD,DA,C9,DC){var DB=parseInt(DD.getAttribute("col"),10),DE=parseInt(DD.getAttribute("colSpan"),10),DF=parseInt(DD.getAttribute("depth"),10);DC.toggleClsByCols(DB,DB+DE-1,DF,DA,C9);}function Bg(DB){var DL=[C8.ROW_VAVLUE_TEXT_FONT_COLOR,C8.ROW_VAVLUE_TEXT_FONT_SIZE,C8.ROW_VAVLUE_TEXT_FONT_FAMILY,C8.ROW_VAVLUE_TEXT_FONT_STYLE],DE=[C8.ROW_TEXT_TEXT_FONT_COLOR,C8.ROW_TEXT_TEXT_FONT_SIZE,C8.ROW_TEXT_TEXT_FONT_FAMILY,C8.ROW_TEXT_TEXT_FONT_STYLE],DJ=[C8.ROW_HEADER_TEXT_FONT_COLOR,C8.ROW_HEADER_TEXT_FONT_SIZE,C8.ROW_HEADER_TEXT_FONT_FAMILY,C8.ROW_HEADER_TEXT_FONT_STYLE],DA=[C8.ROW_HEADER_FILL_COLOR,C8.ROW_HEADER_FILL_TRANSPARENCY],DI=[C8.COLUMN_VAVLUE_TEXT_FONT_COLOR,C8.COLUMN_VAVLUE_TEXT_FONT_SIZE,C8.COLUMN_VAVLUE_TEXT_FONT_FAMILY,C8.COLUMN_VAVLUE_TEXT_FONT_STYLE],DS=[C8.COLUMN_TEXT_TEXT_FONT_COLOR,C8.COLUMN_TEXT_TEXT_FONT_SIZE,C8.COLUMN_TEXT_TEXT_FONT_FAMILY,C8.COLUMN_TEXT_TEXT_FONT_STYLE],DO=[C8.COLUMN_HEADER_TEXT_FONT_COLOR,C8.COLUMN_HEADER_TEXT_FONT_SIZE,C8.COLUMN_HEADER_TEXT_FONT_FAMILY,C8.COLUMN_HEADER_TEXT_FONT_STYLE],DT=[C8.COLUMN_HEADER_FILL_COLOR,C8.COLUMN_HEADER_FILL_TRANSPARENCY],DU="rwTxtTxt",DG="rwVlTxt",DQ="rwHdrTxt",DP="colTxtTxt",DD="colVlTxt",DF="colHdrTxt",DH,DM,DR,C9,DC=this.widget,DK,DN=(DC.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK);switch(DB){case AY.GM_ROW_HEADER_TITLE:DK=C8.ROW_HEADER_SHOW;DH=N.call(this,AY.GM_ROW_HEADER);DM=DH?DU:DQ;DR=DH?DE:DJ;C9=DA;break;case AY.GM_COL_HEADER_TITLE:DK=C8.COLUMN_HEADER_SHOW;DH=N.call(this,AY.GM_COL_HEADER);DM=DH?DP:DF;DR=DH?DS:DO;C9=DT;break;case AY.GM_ROW_HEADER:case AY.GM_ROW_HEADER_EXTRA:DK=C8.ROW_VALUES_SHOW;DH=N.call(this,AY.GM_ROW_HEADER_TITLE);DM=DH?DU:DG;DR=DH?DE:DL;C9=DA;break;case AY.GM_COL_HEADER:case AY.GM_COL_HEADER_EXTRA:DK=C8.COLUMN_VALUES_SHOW;DH=N.call(this,AY.GM_COL_HEADER_TITLE);DM=DH?DP:DD;DR=DH?DS:DI;C9=DT;break;}if(DN){if(DC.readGlobalProperty(DK)){return K(this.widget,DM,DR,B4.GLOBAL);}return Ai(this.widget,mstrmojo.desc(2885,"Fill"),C9,B4.GLOBAL);}return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolBoxFontAndFill",children:[CM(mstrmojo.desc(3433,"Font"),BD(DC,DM,DR,B4.GLOBAL,undefined,false),false,"mstrmojo-ui-rowContainer"),C7(DC,mstrmojo.desc(2885,"Fill"),C9,B4.GLOBAL)]}]});}function j(DA,C9){return(C9>=0)&&(C9<=DA);}function AO(DA){var C9;if(DA.textContent&&typeof (DA.textContent)!==undefined){C9=DA.textContent;}else{C9=DA.innerText;}return C9;}function CW(C9){return C9.outerHTML||new XMLSerializer().serializeToString(C9);}function Ce(C9,DD){var DB=this.selectedTargets,DC=this.selType;if(DB.length>1&&M(DC)&&BP(DD)){for(var DA=0;DA<DB.length;DA++){if(DB[DA].parentNode.parentNode===C9){return true;}}}return false;}function AB(DB){var DD=DB.parentNode.children||[],C9=DD.length,DA;for(var DC=0;DC<C9;DC++){DA=DD[DC].getAttribute("status");if(DA===s.SELECTED){return false;}}return true;}function Y(DD){var DB=this.selectedTargets||[],C9=DB.length,DF=DD.selectionInfo,DE=DF&&DF.mid;for(var DA=0;DA<C9;DA++){var DC=DB[DA].selectionInfo;if(DC&&DC.mid===DE){this.deselectTarget(DB[DA]);B6.removeClass(DB[DA],"like-normal");if(AB(DB[DA])){B6.removeClass(DB[DA].parentNode.parentNode,"like-selected");this.clearSingleSelectedMarker(DB[DA].parentNode.parentNode);}break;}}}function Au(DA){if(!DA){return ;}if(DA.tagName==="polyline"){var DE=DA.parentNode,DC=DE&&DE.children,C9,DB,DD=DC?DC.length:0;for(DB=0;DB<DD;DB++){C9=DC[DB];if(C9.tagName==="polygon"){return true;}}}return false;}function Bc(DA,C9,DC,DB){if(DA){C9.addSubMenuItem(mstrmojo.desc(145,"Drill"),"",DC,DB);}else{C9.addNonInteractiveMenuItem(mstrmojo.desc(145,"Drill"),"",true);}}function Bt(DA,C9){return Cl.getGroupAndCalculationContextMenuForDataPoints(DA,{selection:C9,fnCellName:function(DB){return DB.innerText||DB.textContent;},fnUnique:function(DD){var DG=[],DF=DA.GMController,DE=DF.dz.Rows.TemplateUnit||[],DC=DF.dz.Columns.TemplateUnit||[],DB=DE.concat(DC);DD.forEach(function(DH){DH.identity.objectInfo.forEach(function(DI){if(Cc.find(DB,"id",DI.tid)===-1){DG=DG.filter(function(DJ){return DJ.tid!==DI.tid||DJ.eid!==DI.eid;});DG.push(DI);}});});return DG;},fnMakeNode:function(DB){return{identity:DB,innerText:DB.v};}});}function AF(DB,DC,DA,C9){DC.addMenuItem(mstrmojo.desc(1388,"Rename"),"xt",function(){var DD=Cy.renameItem(DA,C9,function(DH){var DF=DB.zonesModel.gmZones,DE=DH.text.trim(),DG=function(DI,DJ){return{act:"updateTemplate",keyContext:DI.k,partialRetrieval:{nodes:[DI.k]},actions:DJ};};DF.submitDropZoneUpdates(DG(DB,[{act:"renameUnit",id:C9.did,type:C9.t,name:DE,isDynamicAlias:C9.t===4}]));},{allowEmptyText:true});DB.addDisposable(DD);});}mstrmojo.gm.GMInteractivity=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.vi.ui._CanDropFromSchema],{scriptClass:"mstrmojo.gm.GMInteractivity",widget:null,highlightedRows:[],highlightedCols:[],selectedShapes:[],selectedTargets:[],selectedMarkerLines:[],selectedBorderLines:[],hoveredShape:undefined,hoveredSetShape:undefined,hoveredTargetArr:undefined,tooltipShape:undefined,domWidget:undefined,fmtState:Bm.NORMAL,init:function(C9){this.widget=null;this.highlightedRows=[];this.highlightedCols=[];this.selectedShapes=[];this.selectedTargets=[];this.selectedMarkerLines=[];this.selectedBorderLines=[];this.hoveredShape=undefined;this.hoveredSetShape=undefined;this.hoveredTargetArr=[];this.tooltipShape=undefined;this.domWidget=undefined;this.colorByRules=[];this.colorByShapes=[];this.breakByRules=[];this.breakByShapes=[];this.fmtSelections={};if(this._super){this._super(C9);}var DA=document.createElement("div");DA.setAttribute("type",AY.GM_HIGHLIGHT_BOX);DA.setAttribute("class","gm-highlight-box");this.domHLBox=DA;DA=document.createElement("div");DA.setAttribute("class","gm-menu-placeholder");this.domMenuPH=DA;DA=document.createElement("div");DA.setAttribute("class","gm-menu-placeholder");this.domToolbarPH=DA;if(!A1){A1=new V.VisTooltip({placeholder:document.body.appendChild(document.createElement("div"))});A1.render();A1.toggle(false);}},destroy:function e(C9){delete this.domWidget;this._super(C9);},clearAll:function(){this.highlightedRows.length=0;this.highlightedCols.length=0;this.selectedShapes.length=0;this.selectedTargets.length=0;this.selectedMarkerLines.length=0;this.selectedBorderLines.length=0;this.hoveredTargetArr.length=0;this.hoveredShape=undefined;this.hoveredSetShape=undefined;this.hideTooltip();},getColorByIdentities:function(){var C9,DA=this.colorByShapes,DC=DA.length,DB=[];for(C9=0;C9<DC;C9++){DB.push(DA[C9].identity);}return DB;},getBreakByIdentities:function(){var C9,DA=this.breakByShapes,DC=DA.length,DB=[];for(C9=0;C9<DC;C9++){DB.push(DA[C9].identity);}return DB;},getIdentities:function(){var C9,DA=this.selectedShapes,DC=DA.length,DB=[];for(C9=0;C9<DC;C9++){DB.push(DA[C9].identity);}return DB;},hoverShape:function(C9){var DA=C9.parentNode.getElementsByClassName?C9.parentNode.getElementsByClassName("gm-marker-scircle"):document.getElementsByClassName("gm-marker-scircle");if(this.hoveredShape===C9||Cf(C9)){Cc.forEach(DA,function(DB){if(Cf(C9)&&DB.getAttribute("cx")===C9.getAttribute("cx")&&DB.getAttribute("cy")===C9.getAttribute("cy")){BF(DB,s.HOVER);}});return ;}Cc.forEach(DA,function(DB){BF(DB,s.NORMAL);});this.clearHoveredShape();Cd(C9,s.HOVER);this.hoveredShape=C9;},hoverOverSelectedShape:function(C9){if(Cf(C9)&&C9.getAttribute("subtype")===BJ.BAR&&C9.getAttribute("size")==="small"){this.clearHoveredShape();Cd(C9,s.HOVER);C9.sh=true;this.hoveredShape=C9;}},clearHoveredShape:function(){var C9=this.hoveredShape;if(C9&&C9.sh){Cd(C9,s.SELECTED);this.hoveredShape=undefined;delete C9.sh;}else{if(C9){Cd(C9,s.NORMAL);this.hoveredShape=undefined;}}},getTargetsWithSameTypeForDBL:function(DD){var DB=this.fmtMode,DA=[],DC=DD.getAttribute("type");if(DB){var C9=[[AY.GM_XAXIS_LINE,AY.GM_XAXIS2_LINE],[AY.GM_YAXIS_LINE,AY.GM_YAXIS2_LINE],[AY.GM_X_NUMERIC,AY.GM_X_CATEGORY,AY.GM_ORIGIN_LABEL_V],[AY.GM_Y_NUMERIC,AY.GM_Y_CATEGORY,AY.GM_ORIGIN_LABEL_H],[AY.GM_H_CHART_LINE,AY.GM_H_MATRIX_LINE],[AY.GM_V_CHART_LINE,AY.GM_V_MATRIX_LINE],[AY.GM_H_GRID_LINE,AY.GM_V_GRID_LINE],[AY.GM_H_MINOR_GRID_LINE,AY.GM_V_MINOR_GRID_LINE],[AY.GM_ORIGIN_LINE],[AY.GM_ROW_HEADER,AY.GM_ROW_HEADER_EXTRA],[AY.GM_ROW_HEADER_TITLE],[AY.GM_COL_HEADER,AY.GM_COL_HEADER_EXTRA],[AY.GM_COL_HEADER_TITLE],[AY.GM_TREND_LINE],[AY.GM_REF_LINE]];Cc.forEach(C9,function(DE){if(DE.indexOf(DC)!==-1){if(w(DC)||Bp(DC)){var DF=[DD.identity.tlOpt.key];DA=CJ(this.widget.domNode,"key",DF,true);}else{DA=CJ(this.widget.domNode,"type",DE);}return false;}},this);if(DA.length===0){DA=CJ(this.widget.domNode,"type",DC);}}else{DA=CJ(this.widget.domNode,"type",DC);}return DA;},getTargetsWithSameType:function(DE,DD){var DB=this.fmtMode,DA=[],DC=DE.getAttribute("type");if(w(DC)||Bp(DC)){if(!DD){var DF=[DE.identity.tlOpt.key];DA=CJ(this.widget.domNode,"key",DF,true);if(DA.length===0){DA.push(DE);}}else{DA.push(DE);}}else{if(DB){var C9=[[AY.GM_YAXIS_LINE,AY.GM_YAXIS2_LINE],[AY.GM_XAXIS_LINE,AY.GM_XAXIS2_LINE],[AY.GM_XLABEL],[AY.GM_YLABEL],[AY.GM_Y_NUMERIC,AY.GM_Y_CATEGORY,AY.GM_ORIGIN_LABEL_H],[AY.GM_X_NUMERIC,AY.GM_X_CATEGORY,AY.GM_ORIGIN_LABEL_V],[AY.GM_V_CHART_LINE,AY.GM_H_CHART_LINE,AY.GM_V_MATRIX_LINE,AY.GM_H_MATRIX_LINE],[AY.GM_H_GRID_LINE,AY.GM_V_GRID_LINE,AY.GM_H_MINOR_GRID_LINE,AY.GM_V_MINOR_GRID_LINE],[AY.GM_ROW_HEADER,AY.GM_ROW_HEADER_TITLE,AY.GM_ROW_HEADER_EXTRA,AY.GM_DUMMY_A],[AY.GM_COL_HEADER,AY.GM_COL_HEADER_TITLE,AY.GM_COL_HEADER_EXTRA],[AY.GM_DATA_LABEL],[AY.GM_ORIGIN_LINE]];Cc.forEach(C9,function(DG){if(DG.indexOf(DC)!==-1){DA=CJ(this.widget.domNode,"type",DG);return false;}},this);if(DA.length===0){DA.push(DE);}}else{DA.push(DE);}}return DA;},getMainContainer:function(DB){var DA=document.getElementsByClassName("gm-main-container"),C9=DA[0];Cc.forEach(DA,function(DC){if(DB&&DB.parentNode&&DB.parentNode.parentNode&&DB.parentNode.parentNode.parentNode&&DB.parentNode.parentNode.parentNode.parentNode&&DB.parentNode.parentNode.parentNode.parentNode.parentNode===DC){C9=DC;return false;}});return C9;},selectBorders:function(DD){var DB=this.fmtMode,DE=DD.getAttribute("type"),DG=this.getMainContainer(DD),C9=BT.position(DD),DH=BT.position(DG),DF={},DA,DC=[];if(DB){return ;}DF.x=C9.x-DH.x;DF.y=C9.y-DH.y;if(DE===AY.GM_ROW_HEADER){DF.h=C9.h;DF.w=DH.w-DF.x;}else{if(DE===AY.GM_COL_HEADER){DF.w=C9.w;DF.h=DH.h-DF.y;}}DA=this.getLineDiv("border-line",DF.x,DF.y,DF.w,1);DG.appendChild(DA);DC.push(DA);DA=this.getLineDiv("border-line",DF.x,DF.y,1,DF.h);DG.appendChild(DA);DC.push(DA);DA=this.getLineDiv("border-line",DF.x+DF.w,DF.y,1,DF.h);DG.appendChild(DA);DC.push(DA);DA=this.getLineDiv("border-line",DF.x,DF.y+DF.h,DF.w,1);DG.appendChild(DA);DC.push(DA);this.selectedBorderLines.push({target:DD,borderLineArray:DC});},clearSelectedBorders:function(){Cc.forEach(this.selectedBorderLines,function(C9){Cc.forEach(C9.borderLineArray,function(DA){if(DA.parentNode){DA.parentNode.removeChild(DA);}});});this.selectedBorderLines=[];},deselectBorders:function(DC){var DA,C9=[];var DB=function(DD){DD.parentNode.removeChild(DD);};for(DA=0;DA<this.selectedBorderLines.length;DA++){if(this.selectedBorderLines[DA].target===DC){Cc.forEach(this.selectedBorderLines[DA].borderLineArray,DB);}else{C9.push(this.selectedBorderLines[DA]);}}this.selectedBorderLines=C9;},updateSelectedBroders:function(){var C9=this;this.clearSelectedBorders();Cc.forEach(this.selectedTargets||[],function(DB){var DA=DB.getAttribute("type");if(DA===AY.GM_ROW_HEADER||DA===AY.GM_COL_HEADER){C9.selectBorders(DB);}});},getLineDiv:function(DB,DA,DC,C9,DD){var DE=document.createElement("div");DE.setAttribute("class",DB);DE.style.zIndex="1000";DE.style.position="absolute";DE.style.display="block";DE.style.backgroundColor="#34abeb";DE.style.left=DA+"px";DE.style.top=DC+"px";DE.style.width=C9+"px";DE.style.height=DD+"px";return DE;},selectMarkers:function(DD){var DE=DD.getAttribute("type"),DH=this.getMainContainer(DD),DA=BT.position(DD),DK=BT.position(DH),DC,DG,C9,DJ,DF,DB,DI;if(DE===AY.GM_X_NUMERIC||DE===AY.GM_X_CATEGORY){DC=DA.x-DK.x;if(DD.getAttribute("isPrimary")==="true"){DG=DA.y-DK.y-1;}else{DG=DA.y-DK.y+DA.h;}DJ=1;C9=DA.w;}else{if(DE===AY.GM_Y_NUMERIC||DE===AY.GM_Y_CATEGORY){DG=DA.y-DK.y;if(DD.getAttribute("isPrimary")==="true"){DC=DA.x-DK.x+DA.w;}else{DC=DA.x-DK.x-1;}DJ=DA.h;C9=1;}}DF=this.getLineDiv("marker-line",DC,DG,C9,DJ);DB=DD.getAttribute("row")+"."+DD.getAttribute("col");DI=Cc.find(this.selectedMarkerLines,"key",DB);if(DI===-1){DH.appendChild(DF);this.selectedMarkerLines.push({key:DB,line:DF});}},clearSelectedMarkers:function(){Cc.forEach(this.selectedMarkerLines,function(DA){var C9=DA.line;C9.parentNode.removeChild(C9);});this.selectedMarkerLines=[];},clearSingleSelectedMarker:function(DD){var DA,DC,C9,DB=DD.getAttribute("type");if(BP(DB)){DA=DD.getAttribute("row")+"."+DD.getAttribute("col");C9=Cc.find(this.selectedMarkerLines,"key",DA);if(C9!==-1){DC=this.selectedMarkerLines[C9].line;DC.parentNode.removeChild(DC);this.selectedMarkerLines.splice(C9,1);}}},selectTarget:function(DA){var C9=this;this.clearSelectedShapes();this.selectedTargets=this.selectedTargets?this.selectedTargets:[];if(DA&&DA.length>0&&Cf(DA[0])){return ;}if(Bl(DA,this.hoveredTargetArr)){this.clearHoveredTarget();}Cc.forEach(DA||[],function(DH){this.selectedTargets.push(DH);BF(DH,s.SELECTED);if(w(DH.getAttribute("type"))||Bp(DH.getAttribute("type"))){Bi.call(this.widget,DH);}var DF=DH.getAttribute("type"),DC=DH.identity,DG=this.widget,DE=DG.manager,DD=this.fmtMode;if(DD){var DB=DG.domMainContainer;if(Cj(DF)){B6.addClass(DB,"select-ml-v");}if(CC(DF)){B6.addClass(DB,"select-ml-h");}if(BC(DF)){B6.addClass(DB,"select-al-x");}if(CZ(DF)){B6.addClass(DB,"select-al-y");}if(BK(DF)){B6.addClass(DB,"select-gl-major");}if(H(DF)){B6.addClass(DB,"select-gl-minor");}if(Bx(DF)){B6.addClass(DB,"select-rh-header");}if(CD(DF)||(DF===AY.GM_DUMMY_A)){B6.addClass(DB,"select-rh-value");}if(R(DF)){B6.addClass(DB,"select-ch-header");}if(Aq(DF)){B6.addClass(DB,"select-ch-value");}}else{if(DF===AY.GM_ROW_HEADER){BB(DH,true,"selected",DE);C9.selectBorders(DH);DG.addAttributeSelection(DC.tid,DC.eid,DC.v);}if(DF===AY.GM_COL_HEADER){a(DH,true,"selected",DE);C9.selectBorders(DH);DG.addAttributeSelection(DC.tid,DC.eid,DC.v);}if(DF===AY.GM_YLABEL||DF===AY.GM_XLABEL){B6.addClass(DH,"like-normal");B6.addClass(DH.parentNode.parentNode,"like-selected");C9.selectMarkers(DH.parentNode.parentNode);}}if(DF===AY.GM_X_NUMERIC||DF===AY.GM_Y_NUMERIC||DF===AY.GM_X_CATEGORY||DF===AY.GM_Y_CATEGORY){B6.addClass(DH,"with-text");C9.selectMarkers(DH);}},this);},clearSelectedTargets:function(){var DC=this.widget,C9=DC.manager,DA=this.selectedTargets||[],DB=this;DA.forEach(function(DG){BF(DG,s.NORMAL);if(w(DG.getAttribute("type"))||Bp(DG.getAttribute("type"))){y(DG);}var DE=DG.identity,DF=DG.getAttribute("type"),DD=DC.domMainContainer;if(Cj(DF)){B6.removeClass(DD,"select-ml-v");}if(CC(DF)){B6.removeClass(DD,"select-ml-h");}if(BC(DF)){B6.removeClass(DD,"select-al-x");}if(CZ(DF)){B6.removeClass(DD,"select-al-y");}if(BK(DF)){B6.removeClass(DD,"select-gl-major");}if(H(DF)){B6.removeClass(DD,"select-gl-minor");}if(Bx(DF)){B6.removeClass(DD,"select-rh-header");}if(CD(DF)||(DF===AY.GM_DUMMY_A)){B6.removeClass(DD,"select-rh-value");}if(R(DF)){B6.removeClass(DD,"select-ch-header");}if(Aq(DF)){B6.removeClass(DD,"select-ch-value");}if(DF===AY.GM_ROW_HEADER){BB(DG,false,"selected",C9);BB(DG,false,"sh",C9);DC.removeAttributeSelection(DE.tid,DE.eid);}if(DF===AY.GM_COL_HEADER){a(DG,false,"selected",C9);a(DG,false,"sh",C9);DC.removeAttributeSelection(DE.tid,DE.eid);}if(DF===AY.GM_YLABEL||DF===AY.GM_XLABEL){B6.removeClass(DG,"like-normal");B6.removeClass(DG.parentNode.parentNode,"like-selected");DB.clearSelectedMarkers();}if(DF===AY.GM_X_NUMERIC||DF===AY.GM_Y_NUMERIC||DF===AY.GM_X_CATEGORY||DF===AY.GM_Y_CATEGORY){B6.removeClass(DG,"with-text");DB.clearSelectedMarkers();}});DB.clearSelectedBorders();this.selectedTargets=[];this.selType=undefined;},clearMetricSelectorHighlight:function(){},hoverTarget:function(C9){this.clearHoveredTarget();if(!C9||C9.length===0){return ;}this.hoveredTargetArr=C9;Cc.forEach(C9||[],function(DE){if(!Cf(DE)){BF(DE,s.HOVER);if(w(DE.getAttribute("type"))||Bp(DE.getAttribute("type"))){CX(DE);}var DC=DE.getAttribute("type"),DD=this.widget,DB=DD.manager,DA=this.fmtMode;if(DA){DD.toggleContainerCls(h(DC),"hover-ml");DD.toggleContainerCls(t(DC),"hover-al");DD.toggleContainerCls(Ap(DC),"hover-gl");DD.toggleContainerCls(CT(DC)||(DC===AY.GM_DUMMY_A),"hover-rh");DD.toggleContainerCls(A4(DC),"hover-ch");}else{if(DC===AY.GM_ROW_HEADER){BB(DE,true,"hover",DB);}if(DC===AY.GM_COL_HEADER){a(DE,true,"hover",DB);}if(DC===AY.GM_YLABEL||DC===AY.GM_XLABEL){B6.addClass(DE.parentNode.parentNode,"like-hover");}}}},this);},clearSHTargets:function(){var DD=this.widget,DA=DD.manager,DB=this.selectedTargets||[],C9=this.fmtMode,DC=this;(DB||[]).forEach(function(DF){var DE=DF.getAttribute("type");if(!C9&&!DC.isToolbarShow()){if(DE===AY.GM_ROW_HEADER){BB(DF,false,"sh",DA);BB(DF,false,"hover",DA);BB(DF,true,"selected",DA);BF(DF,s.SELECTED);}if(DE===AY.GM_COL_HEADER){a(DF,false,"sh",DA);a(DF,false,"hover",DA);a(DF,true,"selected",DA);BF(DF,s.SELECTED);}}});},hoverSelectedTarget:function(C9){if(C9&&C9.length>0&&(!Cf(C9[0])||(C9[0].getAttribute("type")!==AY.GM_ROW_HEADER&&C9[0].getAttribute("type")!==AY.GM_COL_HEADER))){this.clearSHTargets();return ;}this.clearSHTargets();Cc.forEach(C9||[],function(DE){var DC=DE.getAttribute("type"),DD=this.widget,DB=DD.manager,DA=this.fmtMode;if(!DA){if(DC===AY.GM_ROW_HEADER){BB(DE,false,"selected",DB);BB(DE,false,"hover",DB);BB(DE,true,"sh",DB);BF(DE,s.SH);}if(DC===AY.GM_COL_HEADER){a(DE,false,"selected",DB);a(DE,false,"hover",DB);a(DE,true,"sh",DB);BF(DE,s.SH);}}},this);},clearHoveredTarget:function(){var DA=this.hoveredTargetArr;Cc.forEach(DA||[],function(DB){if(w(DB.getAttribute("type"))||Bp(DB.getAttribute("type"))){BF(DB,s.NORMAL);CN(DB);}},this);var C9=this.selectedTargets||[];Cc.forEach(C9||[],function(DB){if(DA.indexOf(DB)!==-1){DA.splice(DA.indexOf(DB),1);}});Cc.forEach(DA||[],function(DF){BF(DF,s.NORMAL);var DD=DF.getAttribute("type"),DE=this.widget,DC=DE.manager,DB=this.fmtMode;if(DB){if(h(DD)){DE.toggleContainerCls(false,"hover-ml");}if(t(DD)){DE.toggleContainerCls(false,"hover-al");}if(Ap(DD)){DE.toggleContainerCls(false,"hover-gl");}if(CT(DD)||(DD===AY.GM_DUMMY_A)){DE.toggleContainerCls(false,"hover-rh");}if(A4(DD)){DE.toggleContainerCls(false,"hover-ch");}}else{if(DD===AY.GM_ROW_HEADER){BB(DF,false,"hover",DC);}if(DD===AY.GM_COL_HEADER){a(DF,false,"hover",DC);}if(DD===AY.GM_YLABEL||DD===AY.GM_XLABEL){B6.removeClass(DF.parentNode.parentNode,"like-hover");}}},this);this.hoveredTargetArr=[];},hoverSetShape:function(C9){var DA=this.hoveredSetShape;if(DA===C9){return ;}if(!Au(C9)){Bk(DA,"hover");v(C9,"hover");}this.hoveredSetShape=C9;},clearHoveredSetShape:function(){var C9=this.hoveredSetShape;if(C9){Bk(C9,"hover");this.hoveredSetShape=undefined;}},selectShape:function(DA,DD,DE,DB){if(Cf(DA)){return ;}if(DE){this.widget.toggleShapeSelectionIndex(DA.identity,true);}if(!DB){CV.call(this,DA);}Cd(DA,s.SELECTED);this.selectedShapes.push(DA);if(DA===this.hoveredShape){this.hoveredShape=undefined;}var DC=F(DA),C9=DC.selectedShapes?DC.selectedShapes:(DC.selectedShapes=[]);C9.push(DA);if(!DD){o(F(DA),DA.getAttribute("subtype"));}},selectShapes:function(C9,DC){var DD,DJ,DA=C9.length,DE=this.widget;var DI=DE.noReorderAfterShowData;for(DD=0;DD<DA;DD++){this.selectShape(C9[DD],true,DC,DI);DJ=T.call(this,C9[DD].identity);DE.addMetricValueSelection(DJ);}var DH=[],DG,DB;for(DD=0,DA=C9.length;DD<DA;DD++){DG=C9[DD];DB=F(DG);var DF=DG.getAttribute("subtype");if(DF===BJ.PIE||DF===BJ.RING||DF===BJ.CIRCLE){if(DH.indexOf(DB)>-1){continue;}else{DH.push(DB);}}}for(DD=0,DA=DH.length;DD<DA;DD++){DB=DH[DD];o(DB,"pie");}},deselectShape:function(DB,DF){var DD,DA=this.selectedShapes,DG=DA.length;for(DD=0;DD<DG;DD++){if(DA[DD]===DB){Cd(DB,s.NORMAL);DA.splice(DD,1);}}this.widget.toggleShapeSelectionIndex(DB.identity,false);var DE=F(DB),C9=DE.selectedShapes,DC=C9.indexOf(DB);if(DC>-1){C9.splice(C9.indexOf(DB),1);}else{Cl.visPrint("THIS SHOULD NEVER HAPPEN");}if(!DF){o(F(DB),DB.getAttribute("subtype"));}},toggleSelectShape:function(C9){var DB=this.widget,DA=T.call(this,C9.identity);if(Cf(C9)){this.deselectShape(C9);DB.removeMetricValueSelection(DA);return false;}this.selectShape(C9,undefined,true);DB.addMetricValueSelection(DA);return true;},clearSelectedShapes:function(){var DA,C9,DC=this.selectedShapes,DG=DC.length,DD,DF,DE,DB;for(DA=0;DA<DG;DA++){C9=DC[DA];Cd(C9,s.NORMAL);DB=T.call(this,C9.identity);this.widget.removeMetricValueSelection(DB);DE=C9.getAttribute("subtype");if(DE===BJ.PIE||DE===BJ.RING||DE===BJ.CIRCLE){DD=F(C9);DF=DD&&DD.selectedShapes;if(DD&&DF&&DF.length>0){DF.length=0;o(DD,DE);}}}DC.length=0;},clearSelectRules:function(){this.colorByRules.length=0;this.colorByShapes.length=0;this.breakByRules.length=0;this.breakByShapes.length=0;},getAreaPoint:function(DI,DH,DF,DE){var DN,DA,DB,C9,DL,DP,DM,DG,DQ=DH.dirc,DO=parseInt(DI.getAttribute("seriesID"),10),DJ=F(DI),DR=DJ.childNodes[DO+1],DD=DR.childNodes,DK=DD.length,DC=BT.position(DJ,true);if(DQ===1){DB=DE;DL="cy";DM=DC.h;}else{DB=DF;DL="cx";DM=DC.w;}for(DN=0;DN<DK;DN++){DA=DD[DN];C9=parseFloat(DA.getAttribute(DL));DP=Math.abs(C9-DB);if(DP<DM){DM=DP;DG=DA;}}return DG;},mouseOnSetShape:function(DC,C9,DG,DD){var DB,DF=C9.dirc,DA=F(DC),DE=BT.position(DA,true),DI,DH;DB=this.getAreaPoint(DC,C9,DG,DD);if(DB&&DB!==this.hoveredShape){DI=parseFloat(DB.getAttribute("cx"));DH=parseFloat(DB.getAttribute("cy"));if(!j.call(this,DF===1?DE.w:DE.h,DF===1?DI:DH)){this.hideTooltip();this.clearHoveredShape();return ;}if(BT.isFF){DE.x=DA.parentNode.getBoundingClientRect().left;DE.y=DA.parentNode.getBoundingClientRect().top;}DG=DE.x+DI;DD=DE.y+DH;this.hoverShape(DB);this.showTooltip(DB,{x:DG,y:DD});}},clearSelectedCharts:function(){var DC,C9,DE=this.highlightedRows,DF=this.highlightedCols,DB=DE.length,DD=DF.length,DA=this.widget.manager;for(DC=0;DC<DB;DC++){C9=DE[DC];DA.toggleClsByRows(C9.start,C9.end,0,false,"selected");}for(DC=0;DC<DD;DC++){C9=DF[DC];DA.toggleClsByCols(C9.start,C9.end,0,false,"selected");}DE.length=0;DF.length=0;},showTooltip:function(DA,DC){A1.toggle(true);if(DA===this.tooltipShape){A1.moveTo(DC.x,DC.y);return ;}var DB,C9=DA.identity;if(C9){DB=C9.getTooltipContent();if(DB){if(!A1.domNode.parentNode){B6.addClass(A1.domNode,["vis-tooltip-gm"]);document.body.appendChild(A1.domNode);}A1.displayInfo(DB,DC);this.tooltipShape=DA;}}},hideTooltip:function(){var C9=A1.domNode;if(C9&&C9.parentNode){C9.parentNode.removeChild(C9);this.tooltipShape=undefined;}},getToolbarConfig:function(DD,DH,DA){var Db=DH?DH.identity:undefined,DV=DH.subType,DR,DY=this.widget&&this.widget.GMController;if(!DA){return DR;}switch(DD){case AY.GM_ROW_HEADER_TITLE:case AY.GM_COL_HEADER_TITLE:case AY.GM_ROW_HEADER:case AY.GM_COL_HEADER:case AY.GM_COL_HEADER_EXTRA:case AY.GM_ROW_HEADER_EXTRA:DR=Bg.call(this,DD);break;case AY.GM_SVG_X_CATEGORY:case AY.GM_X_CATEGORY:var DU=[C8.X_AXIS_LABELS_FONT_COLOR,C8.X_AXIS_LABELS_FONT_FAMILY,C8.X_AXIS_LABELS_FONT_STYLE,C8.X_AXIS_LABELS_FONT_SIZE];DR=K(this.widget,"xAxLb",DU,B4.GLOBAL,undefined,false);break;case AY.GM_SVG_Y_CATEGORY:case AY.GM_Y_CATEGORY:var DZ=[C8.Y_AXIS_LABELS_FONT_COLOR,C8.Y_AXIS_LABELS_FONT_FAMILY,C8.Y_AXIS_LABELS_FONT_STYLE,C8.Y_AXIS_LABELS_FONT_SIZE];DR=K(this.widget,"yAxLb",DZ,B4.GLOBAL,undefined,false);break;case AY.LASSO_SELECTOR:DR=null;break;case AY.GM_SHAPE:var DI=Db.getShape(),DT=[C8.SHAPE_FILL_COLOR,C8.SHAPE_FILL_TRANSPARENCY],Da=[C8.SHAPE_LINE_COLOR,C8.SHAPE_LINE_COMBINED_STYLE],DE=[C8.SHAPE_BORDER_COLOR,C8.SHAPE_BORDER_COMBINED_STYLE],DQ=this.widget.model.data.dz.ColorBy;if(DQ.TemplateMetric&&!DQ.MetricNames){DR=f(this.widget);break;}switch(DI){case Br.TICK:DR=Af(this.widget,mstrmojo.desc(3546,"Line"),Da,B4.FORMATTING);break;case Br.LINE:if(DV===BJ.SCIRCLE||DV===BJ.SBAR){if(DY.hasSizeBy()){DR=CG(this.widget,DE,DT,B4.FORMATTING,DI);}else{DR=Af(this.widget,mstrmojo.desc(3546,"Line"),Da,B4.FORMATTING);}}else{var C9=BY(this.widget,C8.SHAPE_LINE_COLOR,B4.FORMATTING);DR=A3(this.widget,C9,mstrmojo.desc(11970,"same as line color"));}break;case Br.AREA:if(DV===BJ.SCIRCLE){DR=CG(this.widget,DE,DT,B4.FORMATTING,DI);}else{var DF=BY(this.widget,C8.SHAPE_FILL_COLOR,B4.FORMATTING);DR=A3(this.widget,DF,mstrmojo.desc(11971,"same as area color"));}break;case Br.BAR:case Br.CIRCLE:case Br.SQUARE:case Br.PIE:case Br.RING:DR=CG(this.widget,DE,DT,B4.FORMATTING,DI);break;default:DR=null;}break;case AY.GM_DATA_LABEL:var DJ=[C8.DATA_LABELS_FONT_FAMILY,C8.DATA_LABELS_FONT_SIZE,C8.DATA_LABELS_FONT_STYLE,C8.DATA_LABELS_FONT_COLOR];DR=K(this.widget,"dl",DJ,B4.GLOBAL,undefined,false);break;case AY.GM_SVG_X_NUMERIC:var DX=[C8.X_AXIS_LABELS_FONT_COLOR,C8.X_AXIS_LABELS_FONT_FAMILY,C8.X_AXIS_LABELS_FONT_STYLE,C8.X_AXIS_LABELS_FONT_SIZE];DR=K(this.widget,"xAxLb",DX,B4.GLOBAL);break;case AY.GM_SVG_Y_NUMERIC:var DC=[C8.Y_AXIS_LABELS_FONT_COLOR,C8.Y_AXIS_LABELS_FONT_FAMILY,C8.Y_AXIS_LABELS_FONT_STYLE,C8.Y_AXIS_LABELS_FONT_SIZE];DR=K(this.widget,"yAxLb",DC,B4.GLOBAL);break;case AY.GM_XLABEL:var DW=[C8.X_AXIS_TITLE_FONT_COLOR,C8.X_AXIS_TITLE_FONT_FAMILY,C8.X_AXIS_TITLE_FONT_STYLE,C8.X_AXIS_TITLE_FONT_SIZE];DR=K(this.widget,"xAxTt",DW,B4.GLOBAL,undefined,false);break;case AY.GM_YLABEL:var DK=[C8.Y_AXIS_TITLE_FONT_COLOR,C8.Y_AXIS_TITLE_FONT_FAMILY,C8.Y_AXIS_TITLE_FONT_STYLE,C8.Y_AXIS_TITLE_FONT_SIZE];DR=K(this.widget,"yAxTt",DK,B4.GLOBAL,undefined,false);break;case AY.GM_SVG_CHART:DR=Ai(this.widget,mstrmojo.desc(3905,"Background"),[C8.BG_COLOR],B4.GLOBAL,{width:"60px",visibleControls:mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS.FILL_COLOR,showNoFill:false});break;case AY.GM_TREND_LINE:var DO=[Aa.TREND_REF_LINE_COLOR,Aa.TREND_REF_LINE_COMBINED_STYLE];DR=Af(this.widget,mstrmojo.desc(3546,"Line"),DO,B4.GLOBAL,{realPropName:Aa.TREND_LINE_DEF,opt:Db.tlOpt});break;case AY.GM_REF_LINE:var DB=[Aa.TREND_REF_LINE_COLOR,Aa.TREND_REF_LINE_COMBINED_STYLE];DR=Af(this.widget,mstrmojo.desc(3546,"Line"),DB,B4.GLOBAL,{realPropName:Aa.REF_LINE_DEF,opt:Db.tlOpt});break;case AY.GM_XAXIS_LINE:case AY.GM_XAXIS2_LINE:var DN=[C8.X_AXIS_LINE_COLOR,C8.X_AXIS_LINE_COMBINED_STYLE];DR=Af(this.widget,mstrmojo.desc(3546,"Line"),DN,B4.GLOBAL);break;case AY.GM_YAXIS_LINE:case AY.GM_YAXIS2_LINE:var DS=[C8.Y_AXIS_LINE_COLOR,C8.Y_AXIS_LINE_COMBINED_STYLE];DR=Af(this.widget,mstrmojo.desc(3546,"Line"),DS,B4.GLOBAL);break;case AY.GM_V_MATRIX_LINE:case AY.GM_V_CHART_LINE:case AY.GM_H_MATRIX_LINE:case AY.GM_H_CHART_LINE:var DL=[C8.ALL_MATRIX_LINES_COLOR,C8.ALL_MATRIX_LINES_COMBINED_STYLE];DR=Af(this.widget,mstrmojo.desc(3546,"Line"),DL,B4.GLOBAL);break;case AY.GM_H_GRID_LINE:case AY.GM_V_GRID_LINE:case AY.GM_H_MINOR_GRID_LINE:case AY.GM_V_MINOR_GRID_LINE:DR=Af(this.widget,mstrmojo.desc(11991,"Grid Lines"),[C8.ALL_GRID_LINES_COLOR,C8.ALL_GRID_LINES_COMBINED_STYLE],B4.GLOBAL,undefined,{showNoneOption:false});break;case AY.GM_ORIGIN_LINE:var DG;DG=[C8.ALL_AXIS_ORIGIN_LINE_COLOR,C8.ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE];DR=Af(this.widget,mstrmojo.desc(3546,"Line"),DG,B4.GLOBAL,undefined,{showNoneOption:false});break;case AY.GM_X_NUMERIC:var DM=[C8.X_AXIS_LABELS_FONT_COLOR,C8.X_AXIS_LABELS_FONT_SIZE,C8.X_AXIS_LABELS_FONT_FAMILY,C8.X_AXIS_LABELS_FONT_STYLE,C8.X_AXIS_LABELS_ROTATION];DR=K(this.widget,"xAxLb",DM,B4.GLOBAL,undefined,false);break;case AY.GM_Y_NUMERIC:var DP=[C8.Y_AXIS_LABELS_FONT_COLOR,C8.Y_AXIS_LABELS_FONT_SIZE,C8.Y_AXIS_LABELS_FONT_FAMILY,C8.Y_AXIS_LABELS_FONT_STYLE,C8.Y_AXIS_LABELS_ROTATION];DR=K(this.widget,"yAxLb",DP,B4.GLOBAL,undefined,false);break;default:DR=null;}return DR;},getMenuConfig:function(EC,Di,DE,Dy){var D3,Do,Dw,Ds,DF,DU=this,Dn=DE?DE.selectionInfo:undefined,Dx=DE?DE.identity:undefined,Dc=DE.visGM,Du=Dc.GMController,D9=Du.getChartInfo(),Dz=Di.length,DG=new V.ui.menus.MenuConfig(),D7=(mstrApp.appState===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION),DB=function(EE,EG){var EF=function(EK){var EI=(function(){var EM;Cc.forEach(Dc.model.data.gts.row.concat(Dc.model.data.gts.col),function(EN){if(EN.id&&EN.id===EK){EM=EN.dp;D8=EN;}});return EM;}()),EJ=Dc.model.docModel.datasets,EH=function(EM,EP){var EN=Cc.find(EM,"did",EP.id),EO=EM[EN];if(EO&&!EO.hide){EP.n=EO.n;return true;}return false;},EL=Cc.filter(EI,function(EO){var EM;for(EM in EJ){var EN=EJ[EM];if(EH(EN.att,EO)){return true;}}return false;});if(EL){Di=Cc.filter(Di,function(EN){for(var EM in EL){if(EL[EM].n===EN.n){return true;}}return false;});Dz=Di.length;}else{Dz=0;}return Dz;},DZ=function(){var EH=new V.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});for(D3=0;D3<Dz;D3++){if(EG){EH.addMenuItem(Di[D3].n,"xt",Dc.getMenuHandler("selectionKeepOnlyAndShow"),{drillUnit:Di[D3]});}else{EH.addMenuItem(Di[D3].n,"xt",Dc.getMenuHandler("headerDrill"),{drillUnit:Di[D3],fromUnit:{tid:Dx.tid,isRowAttribute:Dx.isRowAttribute}});}}return EH;},ED=function(){if(EG){DG.addMenuItem(mstrmojo.desc(11698,"Drill to ##").replace("##",Di[0].n),"xt",Dc.getMenuHandler("selectionKeepOnlyAndShow"),{drillUnit:Di[0]});}else{DG.addMenuItem(mstrmojo.desc(11698,"Drill to ##").replace("##",Di[0].n),"xt",Dc.getMenuHandler("headerDrill"),{drillUnit:Di[0],fromUnit:{tid:Dx.tid,isRowAttribute:Dx.isRowAttribute}});}};Dz=EF(EE);switch(Dz){case 0:DG.addNonInteractiveMenuItem(mstrmojo.desc(145,"Drill"),"",true);break;case 1:ED();break;default:DG.addSubMenuItem(mstrmojo.desc(145,"Drill"),"",DU.id,DZ);}},D4=function(ED){var EE=DU.widget.zonesModel.gmZones,DZ=new V.ui.menus.MenuConfig();Cc.forEach(ED,function(EF){DZ.addEditorMenuItem(EF.n,EE.id,function(){return DU.getDisplayFormsMenu(EF);});});return DZ;},DH=function(){if(Dx){var EI=Dx.attrIdArr,EF=DU.widget.zonesModel.gmZones,EE=DU.widget.zonesModel.docModel.datasets,DZ=[],ED=[];if(EI&&EI.length>0){DZ=Cc.filter(EI,function(EJ){return Cy.hasMultiForms(EJ,EE);});ED=DZ.map(function(EJ){return B7(EF,EJ);});if(ED.length>0){DG.addEditorMenuItem(mstrmojo.desc(11908,"Display Attribute Forms"),EF.id,function(){return D4(ED);});}}else{var EH=Dx.tid,EG=B7(EF,EH);if(Cy.hasMultiForms(EG.did,EE)){DG.addEditorMenuItem(mstrmojo.desc(11908,"Display Attribute Forms"),EF.id,function(){return DU.getDisplayFormsMenu(EG);});}}}},DS=function(){var EH=mstrmojo.gm.EnumSubtype,ED=Du.chartSubType,EK=Dc.id;if(D9.isABL&&ED===EH.PERCENT){return ;}var EF=p.getAxisMetricsInfo(Dc),EI=function(EL){var EM=[];EF.forEach(function(EN){var EO=Dc.getAvailableRefLineTypes(EN.did);if(EO.indexOf(EL)!==-1){EM.push(EN.did);}});return EM;},EG=function(EL,EX,EN){var EM,ET,EV,EO,EW,EQ,ER=true,EU=[],EP=Dc.getPartialUpdateFilterConfigForRefLine(),ES=[];EL.forEach(function(EY){Dc.checkCustomScaleNotificationForReferenceLine(EY);EM=Dc.getReferenceOptionForMetricId(EY);if(EM===undefined){return true;}ET=Dc.getRealReferenceOptionFromAxisOption(EM,EX,EQ);EV=Dc.readGlobalProperty(Aa.REF_LINE_DEF,ET);if(EX===B1.EnumRefLineModelType.CONST){EV.setProperty(Aa.REF_CONST_VALUE,D.parseNumeric(EN));}else{EV.setProperty(Aa.REF_ENABLED,ER);}EO=ET.key.split(",")[0];if(ES[EO]){return true;}else{ES[EO]="record";}EW=Dc.processReferenceLine(Aa.REF_LINE_DEF,EV,ET);EU=EU.concat(EW.actions);});Dc.submitUpdatesAndPersistXML(EU,Dc.getXTabRefreshCallBack(),undefined,false,false,EP);},EJ=function(){var EL=[];Object.keys(B1.EnumRefLineModelType).forEach(function(EO){var EM=B1.EnumRefLineModelType[EO],EN;EN=EI(EM);if(EN.length){EL.push({refType:EM,metricIds:EN});}});return EL;},EE=function(EN){var EL=EN.refLineCfg,EM=new V.ui.menus.MenuConfig();EL.forEach(function(EP){var EO=EP.refType,EQ=EP.metricIds;if(EO!==B1.EnumRefLineModelType.CONST){EM.addMenuItem(BR[EO],"xt",function(){EG(EQ,EO,0);});}else{EM.addEditorMenuItem(BR[EO],EK,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:k.FLOAT,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR},onEnter:function(){this.validate();}}],fnOk:function(ES,ER){var ET=ER.constVal;if(ET.isValid()){EG(EQ,EO,ET.value);}}});});}});return EM;};var DZ=EJ();if(DZ.length>0){DG.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",EK,EE,{refLineCfg:DZ});}},DD=function(EK,EL){var EP=new V.ui.menus.MenuConfig();var EI=Dc.zonesModel,EE=EI.gmZones,ET=null,EN=[],EU=(function(){var DZ,EY,EX;DZ=EE.dropZones;for(EY in DZ){if(DZ.hasOwnProperty(EY)){EN=DZ[EY].items;for(EX in EN){if(EN.hasOwnProperty(EX)){if(EN[EX].did===EL.mid){ET=EN[EX];return DZ[EY];}}}}}}()),EJ={zone:EU,axis:EU&&EU.id,idx:Cc.find(EN,"id",ET.id),cnt:EN.length,item:ET,useDropzone:true};if(ET.um){EP.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){EI.editDerivedMetric(EJ,"edit");},EJ);EP.addSeparator();}if(D9.isABL){EP.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dc.getMenuHandler("sortMetricTitle"),{isAsc:true,selInfo:EL});EP.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dc.getMenuHandler("sortMetricTitle"),{isAsc:false,selInfo:EL});if(Du.firstRes.gsi.sorts[0].length!==0||Du.firstRes.gsi.sorts[1].length!==0){EP.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dc.getMenuHandler("clearSort"));}EP.addSeparator();}EP.addMenuItem(mstrmojo.desc(11700,"Axis Scale..."),"xt",p.getEditAxisScaleHandler(Dc,EL.mid));EP.addMenuItem(mstrmojo.desc(11987,"Log Scale"),"xt",p.getEditLogScaleHandler(Dc,EL.mid));EP.addMenuItem(mstrmojo.desc(11988,"Axis Origin"),"xt",p.getEditAxisOriginHandler(Dc,EL.mid));EP.addSeparator();if(EE.docModel.findDatasetIdFromUnit(ET.did)&&!EE.docModel.isFromSolrCube(ET.did)&&!EE.docModel.isFromMDXCube(ET.did)){EP.addSubMenuItem(mstrmojo.desc(11806,"Aggregate By"),"xt",EI.id,EI.getAggregateByMetricSubMenu,EJ);EP.addSeparator();}EP.addEditorMenuItem(mstrmojo.desc(5188,"Calculation"),EI.id,EI.getCalculationEditorCfg,EJ);EP.addSubMenuItem(mstrmojo.desc(12287,"Shortcut Metric"),"xt",EI.id,EI.getShortcutMetricSubMenu,EJ);EP.addMenuItem(mstrmojo.desc(13624,"New Metric..."),"xt",function(){EI.newDerivedMetric(EJ);},EJ);EP.addSeparator();if(EE.shouldShowCondensedMenu(EU,ET)){var EQ=ET.cds;var EO=EE.getCondenseLableHandler(EU,EJ,true),EM=EE.getCondenseLableHandler(EU,EJ,false);EP.addToggleMenuItem(mstrmojo.desc(13660,"Condense Label"),"",EO,EM,EE.id,EQ);}if(EE.showNumberFormat(ET)){EP.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),EE.id,EE.getNumberFormatEditorCfg,EJ);EP.addSeparator();}if(D9.isABL&&!D9.isPie){EP.addSeparator();p.getSubMenu(Dc,EP,EL.mid,EL.midx);}EP.addSeparator();var EV=Du.getMetricsOnXAxis().concat(Du.getMetricsOnYAxis()),EH=Du.model.getMetricIDsFromIndex(EV),EW=false;if(EL.mid){if(EH.indexOf(EL.mid)>=0){EW=true;}}var ES=false;if(D9.isBubbleOrScatter){var EF=Dc.GMController.getMetricsOnXAxis();if(EF.indexOf(EL.midx)>=0){ES=true;}}else{if(!EW){ES=true;}}ES=ES||!p.isTrendLineAvailableForMetric(Dc,EL.midx);if(!ES){EP.addToggleMenuItem(mstrmojo.desc(12155,"Enable trendline for ##").replace("##",EK),"xt",p.getTrendLineToggleHandler(Dc,EL.mid,true),p.getTrendLineToggleHandler(Dc,EL.mid,false),DU.id,p.getTrendLineToggleState(Dc,EL.mid));var ED=p.getOptionObjArr.call(Du,[ET.idx]),ER=Dc.readGlobalProperty(Aa.TREND_LINE_DEF,ED);if(ER.jsonObj.trdEnabled){EP.addMenuItem(mstrmojo.desc(12163,"Edit trendline..."),"xt",p.getEditTrendLineHandler(Dc,EL.mid));}}var EG=false;if(Du.isStacked&&!Du.splitPlottingMetrics){EG=true;}else{if(!EW){EG=true;}}EG=EG||p.isIgnoredMetric(Dc,EL.midx);if(!EG){p.getReferenceLineSubMenu(Dc,EP,D9.isABL,EL.mid);}EP.addSeparator();Do=EP.getMenuItems().length;if(EE.hasReplaceCandidates(EJ)){EP.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",Dc.zonesModel.id,EE.getReplaceSubMenu,EJ);}if(EL.elem&&EL.elem.firstChild){AF(Dc,EP,EL.elem.firstChild,ET);}EP.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){EE.deleteItem(EU,EJ.idx);});return EP;},Df=function(){var ED=new V.ui.menus.MenuConfig();function DZ(){function EE(){return function(EG,EF){if(EF!==EG){DU.widget.writeGlobalProperty(C8.LINE_MARKER_SHOW,EG);}};}return function(){var EF=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EH){EF.push(EH);});var EG=DU.widget.readGlobalProperty(C8.LINE_MARKER_SHOW);ED.addRadioMenuGroup(EG,EE(),EF,"checkMark",undefined,true);return ED;};}(DZ())();return ED;},Dq=function(){var DZ=new V.ui.menus.MenuConfig(),ED=Dx.getAssMetricDataLabelID(),EF=Dc.readGlobalProperty(Aa.METRIC_LEVEL_DATA_LABEL).jsonObj;function EE(EI){function EH(){return function(EM,EJ){var EK;if(EM!==EJ){if(EM!==B1.EnumDataLabels.HIDE){EF[ED]=true;var EL=true,EN;for(EN in EF){if(EN!=="AllMetrics"&&EF.hasOwnProperty(EN)){if(EF[EN]===false){EL=false;}}}if(EF.AllMetrics!==undefined){EF.AllMetrics=EL;}EI.setWidgetPropertyValue(Aa.METRIC_LEVEL_DATA_LABEL,EF);EK=[{value:true,name:Aa.METRIC_LEVEL_DATA_LABEL,option:p.getOptionObjArr.call(Du,[Du.getMetricIndexFromID(ED)])}];}EI.writeGlobalProperty(Aa.DATA_LABEL,EM,undefined,undefined,EK);}};}function EG(){var EJ=EI.readGlobalProperty(Aa.DATA_LABEL);if(!EF[ED]){return B1.EnumDataLabels.HIDE;}return EJ;}return function(){var EJ=[];if(Du.textTypeDataLabelEnabled()){EJ.push({text:mstrmojo.desc(13663,"Only Text"),value:B1.EnumDataLabels.SHOW_TEXT_ONLY});}if(Du.valueTypeDataLabelEnabled()){EJ.push({text:mstrmojo.desc(13664,"Only Value"),value:B1.EnumDataLabels.SHOW_VALUE_ONLY});}EJ.push({text:mstrmojo.desc(2057,"None"),value:B1.EnumDataLabels.HIDE});DZ.addRadioMenuGroup(EG(),EH(),EJ,"checkMark",undefined,true);return DZ;};}(EE(Dc))();return DZ;},DR=function(){var EE=this;var DZ=function(){var EG=new V.ui.menus.MenuConfig();function EH(EJ,EI){if(EJ!==EI){if(EC===AY.GM_ROW_HEADER_TITLE){Dc.writeGlobalProperty(C8.ROW_HEADER_SHOW,EJ);}else{if(EC===AY.GM_COL_HEADER_TITLE){Dc.writeGlobalProperty(C8.COLUMN_HEADER_SHOW,EJ);}}}}var EF=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EI){EF.push(EI);});if(EC===AY.GM_ROW_HEADER_TITLE){EG.addRadioMenuGroup(Dc.readGlobalProperty(C8.ROW_HEADER_SHOW),EH,EF,"checkMark",undefined,true);}else{if(EC===AY.GM_COL_HEADER_TITLE){EG.addRadioMenuGroup(Dc.readGlobalProperty(C8.COLUMN_HEADER_SHOW),EH,EF,"checkMark",undefined,true);}}return EG;};var ED="default text";if(EC===AY.GM_ROW_HEADER_TITLE){ED=mstrmojo.desc(12014,"Row Headers");}else{if(EC===AY.GM_COL_HEADER_TITLE){ED=mstrmojo.desc(12015,"Column Headers");}}DG.addSubMenuItem(ED,"xt",EE.id,DZ);},Dt=function(){var ED=function(){var EE=new V.ui.menus.MenuConfig();function EG(EI,EH){if(EI!==EH){if(EC===AY.GM_ROW_HEADER||EC===AY.GM_ROW_HEADER_EXTRA){Dc.writeGlobalProperty(C8.ROW_VALUES_SHOW,EI);if(N.call(DU,AY.GM_ROW_HEADER_TITLE)){Dc.writeGlobalProperty(C8.ROW_HEADER_SHOW,EI);}}else{if(EC===AY.GM_COL_HEADER||EC===AY.GM_COL_HEADER_EXTRA){Dc.writeGlobalProperty(C8.COLUMN_VALUES_SHOW,EI);if(N.call(DU,AY.GM_COL_HEADER_TITLE)){Dc.writeGlobalProperty(C8.COLUMN_HEADER_SHOW,EI);}}}}}var EF=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EH){EF.push(EH);});if(EC===AY.GM_ROW_HEADER||EC===AY.GM_ROW_HEADER_EXTRA){EE.addRadioMenuGroup(Dc.readGlobalProperty(C8.ROW_VALUES_SHOW),EG,EF,"checkMark",undefined,true);}else{if(EC===AY.GM_COL_HEADER||EC===AY.GM_COL_HEADER_EXTRA){EE.addRadioMenuGroup(Dc.readGlobalProperty(C8.COLUMN_VALUES_SHOW),EG,EF,"checkMark",undefined,true);}}return EE;};var DZ="default text";if(EC===AY.GM_ROW_HEADER||EC===AY.GM_ROW_HEADER_EXTRA){if(N.call(DU,AY.GM_ROW_HEADER_TITLE)){DZ=mstrmojo.desc(13665,"Row Text");}else{DZ=mstrmojo.desc(12016,"Row Values");}}else{if(EC===AY.GM_COL_HEADER||EC===AY.GM_COL_HEADER_EXTRA){if(N.call(DU,AY.GM_COL_HEADER_TITLE)){DZ=mstrmojo.desc(13666,"Column Text");}else{DZ=mstrmojo.desc(12017,"Column Values");}}}DG.addSubMenuItem(DZ,"xt",this.id,ED);},Dj=function(){var EE="no selection is made",EI;var EH=Dc.readGlobalProperty(C8.ROW_HEADER_SHOW),EG=Dc.readGlobalProperty(C8.ROW_VALUES_SHOW),EF=Dc.readGlobalProperty(C8.COLUMN_HEADER_SHOW),ED=Dc.readGlobalProperty(C8.COLUMN_VALUES_SHOW);var DZ=BN(DU.selectedTargets||[]);if(DZ===BZ.ROW_HEADER){EE=EH?mstrmojo.desc(13667,"Hide row header"):mstrmojo.desc(13668,"Show row header");EI=function(){Dc.writeGlobalProperty(C8.ROW_HEADER_SHOW,!EH);};}else{if(DZ===BZ.ROW_VALUE){EE=EG?mstrmojo.desc(13669,"Hide row value"):mstrmojo.desc(13670,"Show row value");EI=function(){Dc.writeGlobalProperty(C8.ROW_VALUES_SHOW,!EG);};}else{if(DZ===BZ.COL_HEADER){EE=EF?mstrmojo.desc(13671,"Hide column header"):mstrmojo.desc(13672,"Show column header");EI=function(){Dc.writeGlobalProperty(C8.COLUMN_HEADER_SHOW,!EF);};}else{if(DZ===BZ.COL_VALUE){EE=ED?mstrmojo.desc(13673,"Hide column value"):mstrmojo.desc(13674,"Show column value");EI=function(){Dc.writeGlobalProperty(C8.COLUMN_VALUES_SHOW,!ED);};}else{if(DZ===(BZ.ROW_VALUE|BZ.ROW_HEADER)){EE=mstrmojo.desc(13675,"Hide row text");EI=function(){Dc.writeGlobalProperty(C8.ROW_TEXT_SHOW,false);};}else{if(DZ===(BZ.COL_VALUE|BZ.COL_HEADER)){EE=mstrmojo.desc(13676,"Hide column text");EI=function(){Dc.writeGlobalProperty(C8.COLUMN_TEXT_SHOW,false);};}}}}}}DG.addMenuItem(EE,"xt",EI);},Dr=function(ED){var DZ=ED||new V.ui.menus.MenuConfig(),EF=[{text:mstrmojo.desc(6019,"Automatic"),value:B1.EnumGridLines.AUTO},{text:mstrmojo.desc(13677,"Show Major and Minor"),value:B1.EnumGridLines.SHOW},{text:mstrmojo.desc(13678,"Show Major Only"),value:B1.EnumGridLines.SHOW_MAJOR_ONLY},{text:mstrmojo.desc(2772,"Hide"),value:B1.EnumGridLines.HIDE}];function EE(){return function(EH,EG){if(EG!==EH){Dc.writeGlobalProperty(C8.ALL_GRID_LINES_SHOW,EH);}};}DZ.addRadioMenuGroup(Dc.readGlobalProperty(C8.ALL_GRID_LINES_SHOW),EE(),EF,"checkMark",undefined,true);return DZ;},C9=function(EI){var EH=Dc.zonesModel,EF=EH.gmZones,EG,EE=(function(){var DZ,EK,EJ;DZ=EF.dropZones;for(EK in DZ){EG=DZ[EK].items;for(EJ in EG){if(EG[EJ].did===EI.mid){return DZ[EK];}}}}()),ED=[];Cc.forEach(Dh,function(EK){var EJ=EK.mid,DZ=Cc.find(EG,"did",EJ);if(DZ!==-1){ED.push(EG[DZ]);}});DG.addEditorMenuItem(mstrmojo.desc(5188,"Calculation"),EH.id,function(){return mstrmojo.all[EH.id].getMultipleMetricsCalcMenus(EE,ED,true);});DG.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){EF.deleteItems(ED,true);});};if(Dn){Dn.elem=DE.elem;}var D1,Dg,DX,DO,DY,De,DM,DT,Dl,DK,DJ,DV,D6=mstrmojo.emptyFn,Dd=mstrmojo.emptyFn,EA;switch(EC){case AY.GM_ROW_HEADER_TITLE:case AY.GM_COL_HEADER_TITLE:if(Dy){Dj.call(this,DU.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK);}else{if(D7){DG.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dx});DG.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dx});if(Du.firstRes.gsi.sorts[0].length!==0||Du.firstRes.gsi.sorts[1].length!==0){DG.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dc.getMenuHandler("clearSort"));}DG.addSeparator();DB(Dx&&Dx.tid);}else{if(Dx.otp===47&&(Dx.ost===12033||Dx.ost===12032)){D1=Dc.zonesModel.gmZones;DO=(function(){var DZ,EE,ED;DZ=D1.dropZones;for(EE in DZ){DX=DZ[EE].items;for(ED in DX){if(DX[ED].did===DE.identity.tid){Dg=DX[ED];return DZ[EE];}}}}());DY={zone:DO,axis:DO&&DO.id,idx:Cc.find(DX,"id",Dg.id),cnt:DX.length,item:Dg,useDropzone:true};if(Dx.ost===12033){DG.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"eg",D1.getCreateOrEditElementGroupFunc(DY));DG.addSeparator();}DG.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dx});DG.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dx});if(Du.firstRes.gsi.sorts[0].length!==0||Du.firstRes.gsi.sorts[1].length!==0){DG.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dc.getMenuHandler("clearSort"));}DG.addSeparator();}else{D1=Dc.zonesModel.gmZones;DO=(function(){var DZ,EE,ED;DZ=D1.dropZones;for(EE in DZ){DX=DZ[EE].items;for(ED in DX){if(DX[ED].did===DE.identity.tid){Dg=DX[ED];return DZ[EE];}}}}());DY={zone:DO,axis:DO&&DO.id,idx:Cc.find(DX,"id",Dg.id),cnt:DX.length,item:Dg,useDropzone:true};De=!D1.docModel.isFromMDXCube(Dg.did);if(Dg.da&&De){DG.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){D1.editDerivedAttribute(DY);},DY);DG.addSeparator();}DG.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dx});DG.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dx});if(Du.firstRes.gsi.sorts[0].length!==0||Du.firstRes.gsi.sorts[1].length!==0){DG.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dc.getMenuHandler("clearSort"));}DG.addSeparator();EA=D1.isDynamicLink(Dg);if(D1.allowInsertNewAttribute(DO)&&!Cl.hasCGorCon(Dc,Dg)&&De&&!EA){DG.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){D1.newDerivedAttribute(DY);},DY);}DK=Dg.t===47&&D1.getUnitInfoInTemplate(Dg.did).unit.ost===12033;DJ=D1.isAttribute(Dg)?mstrmojo.desc(13295,"Create Groups..."):(DK?mstrmojo.desc(13296,"Edit Groups..."):null);if(DJ!==null&&!EA){DG.addMenuItem(DJ,"eg",D1.getCreateOrEditElementGroupFunc(DY));}DG.addSeparator();if(D1.showNumberFormat(Dg)){DG.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),D1.id,D1.getNumberFormatEditorCfg,DY);}DB(Dx&&Dx.tid);if(!EA){DH();}DG.addSeparator();}Do=DG.getMenuItems().length;if(D1.hasReplaceCandidates(DY)){DG.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",Dc.zonesModel.id,D1.getReplaceSubMenu,DY);}if(DE.elem&&DE.elem.firstChild){AF(Dc,DG,DE.elem.firstChild,Dg);}DG.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){D1.deleteItem(DO,DY.idx);});}}break;case AY.GM_ROW_HEADER:case AY.GM_COL_HEADER:if(Dy){Dj.call(this,DU.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK);}else{var DC=true,DL=Du.supportViewFilterPool;if(!DL[Dx.tid]){DC=false;}(this.selectedTargets||[]).forEach(function(ED){var DZ=ED.identity;if(!DL[DZ.tid]){DC=false;}});if(DC){DG.addMenuItem(mstrmojo.desc(11701,"Keep Only"),"xt",Dc.getMenuHandler("headerKeepOnly"),{selInfo:Dn,identity:Dx});DG.addMenuItem(mstrmojo.desc(3946,"Exclude"),"xt",Dc.getMenuHandler("headerExclude"),{selInfo:Dn,identity:Dx});DB(Dx&&Dx.tid);DG.addSeparator();}if(D7){if(DC){DG.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",Dc.getMenuHandler("selectionShowData"));}}else{var EB=DU.selectedTargets[0].identity,D8={at:EB.at,dei:EB.dei,dpt:EB.dpt,o:EB.o,n:EB.n,tui:EB.tui,ui:EB.tui,axis:EB.isRowAttribute?1:2,v:EB.v,tid:EB.tid};DV=Cl.getGroupAndCalculationContextMenu(Dc,D8,{selection:DU.selectedTargets||[],fnCellName:function(DZ){return DZ.innerText||DZ.textContent;}});["editGroup","editCalculation","createDe"].forEach(function(DZ){Cl.absorbMenuItems(DG,DV[DZ],true);});if(DC){DG.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",Dc.getMenuHandler("selectionShowData"));}if(DV.renameDe.menus.length>0){DG.addSeparator();}Cl.absorbMenuItems(DG,DV.renameDe);if(DV.renameDe.menus.length>0){Do=DG.getMenuItems().length-1;}}}break;case AY.GM_X_CATEGORY:case AY.GM_Y_CATEGORY:if(D7){DM=(DE.identity.tid||DE.identity.attrIdArr[0]);DT=Du.attributeSelectionInfo;Dl=DT[DM];DG.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:true,selInfo:Dl});DG.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:false,selInfo:Dl});if(Du.firstRes.gsi.sorts[0].length!==0||Du.firstRes.gsi.sorts[1].length!==0){DG.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dc.getMenuHandler("clearSort"));}}else{if(Dy){D6=function(){var DZ=new V.ui.menus.MenuConfig();function ED(EF){function EE(){return function(EH,EG){if(EH!==EG){if(EC===AY.GM_X_CATEGORY){EF.writeGlobalProperty(C8.X_AXIS_LABELS_SHOW,EH);}else{if(EC===AY.GM_Y_CATEGORY){EF.writeGlobalProperty(C8.Y_AXIS_LABELS_SHOW,EH);}}}};}return function(){var EG=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EH){EG.push(EH);});if(EC===AY.GM_X_CATEGORY){DZ.addRadioMenuGroup(EF.readGlobalProperty(C8.X_AXIS_LABELS_SHOW),EE(),EG,"checkMark",undefined,true);}else{if(EC===AY.GM_Y_CATEGORY){DZ.addRadioMenuGroup(EF.readGlobalProperty(C8.Y_AXIS_LABELS_SHOW),EE(),EG,"checkMark",undefined,true);}}return DZ;};}(ED(Dc))();return DZ;};DG.addSubMenuItem(mstrmojo.desc(12003,"Axis Labels"),"xt",this.id,D6);var D5=function(){var DZ=new V.ui.menus.MenuConfig();function ED(EF){function EE(){return function(EH,EG){if(EH!==EG){if(EC===AY.GM_X_CATEGORY){EF.writeGlobalProperty(C8.X_AXIS_LABELS_ROTATION,EH);}else{if(EC===AY.GM_Y_CATEGORY){EF.writeGlobalProperty(C8.Y_AXIS_LABELS_ROTATION,EH);}}}};}return function(){var EG=[];[{text:mstrmojo.desc(12284,"Automatic"),value:B1.EnumLabelRotation.AUTOMATIC},{text:mstrmojo.desc(12285,"Vertical"),value:B1.EnumLabelRotation.VERTICAL},{text:mstrmojo.desc(12286,"Horizontal"),value:B1.EnumLabelRotation.HORIZONTAL}].forEach(function(EH){EG.push(EH);});if(EC===AY.GM_X_CATEGORY){DZ.addRadioMenuGroup(EF.readGlobalProperty(C8.X_AXIS_LABELS_ROTATION),EE(),EG,"checkMark",undefined,true);}else{if(EC===AY.GM_Y_CATEGORY){DZ.addRadioMenuGroup(EF.readGlobalProperty(C8.Y_AXIS_LABELS_ROTATION),EE(),EG,"checkMark",undefined,true);}}return DZ;};}(ED(Dc))();return DZ;};if(DU.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK&&EC===AY.GM_X_CATEGORY){DG.addSubMenuItem(mstrmojo.desc(12283,"Rotation"),"xt",this.id,D5);}}else{DM=(DE.identity.tid||DE.identity.attrIdArr[0]);DT=Du.attributeSelectionInfo;Dl=DT[DM];DG.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:true,selInfo:Dl});DG.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:false,selInfo:Dl});if(Du.firstRes.gsi.sorts[0].length!==0||Du.firstRes.gsi.sorts[1].length!==0){DG.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dc.getMenuHandler("clearSort"));}DG.addSeparator();D1=Dc.zonesModel.gmZones;DO=(function(){var DZ,EE,ED;DZ=D1.dropZones;for(EE in DZ){DX=DZ[EE].items;for(ED in DX){if(DX[ED].did===DM){Dg=DX[ED];return DZ[EE];}}}}());DY={zone:DO,axis:DO&&DO.id,idx:Cc.find(DX,"id",Dg.id),cnt:DX.length,item:Dg,useDropzone:true};De=!D1.docModel.isFromMDXCube(Dg.did);if(Dg.da&&De){DG.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){D1.editDerivedAttribute(DY);},DY);}EA=D1.isDynamicLink(Dg);if(D1.allowInsertNewAttribute(DO)&&!Cl.hasCGorCon(Dc,Dg)&&De&&!EA){DG.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){D1.newDerivedAttribute(DY);},DY);}DK=Dg.t===mstrmojo.chart.model.enums.EnumDSSObjectType.DssTypeConsolidation&&D1.getUnitInfoInTemplate(Dg.did).unit.ost===12033;DJ=D1.isAttribute(Dg)?mstrmojo.desc(13295,"Create Groups..."):(DK?mstrmojo.desc(13296,"Edit Groups..."):null);if(DJ!==null&&!EA){DG.addMenuItem(DJ,"eg",D1.getCreateOrEditElementGroupFunc(DY));}DG.addSeparator();if(!EA){DH();}DG.addSeparator();if(D1.showNumberFormat(Dg)){DG.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),D1.id,D1.getNumberFormatEditorCfg,DY);DG.addSeparator();}Do=DG.getMenuItems().length;DG.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){D1.deleteItem(DO,DY.idx);});}}break;case AY.LASSO_SELECTOR:case AY.GM_SHAPE:case AY.GM_MARKER:var Db=Dx&&Dx.getShape();Ds=DE.subType;var Da=this.widget.model.data.dz.ColorBy,D0;if(Du.supportViewFilter&&DU.selectedShapes){var DA=Dc.model.data.dz,DW=[DA.SliceBy,DA.BreakBy,DA.XAxis,DA.YAxis,DA.Rows,DA.Columns],DP=[];DU.selectedShapes.forEach(function(DZ){DZ.identity.objectInfo.forEach(function(ED){DP=DP.filter(function(EE){return EE!==ED.tid;});DP.push(ED.tid);});});Cc.forEach(DW,function(DZ){if(DZ.TemplateUnit){for(var ED=DZ.TemplateUnit.length-1;ED>=0;ED--){if(DP.indexOf(DZ.TemplateUnit[ED].id)!==-1){D0=DZ.TemplateUnit[ED].id;return false;}}}});if(D0){DG.addMenuItem(mstrmojo.desc(11701,"Keep Only"),"xt",Dc.getMenuHandler("selectionKeepOnly"));DG.addMenuItem(mstrmojo.desc(3946,"Exclude"),"xt",Dc.getMenuHandler("selectionExclude"));DB(D0,true);DG.addSeparator();}}if(D7){if(D0){DG.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",Dc.getMenuHandler("selectionShowData"));DG.addSeparator();}DG.addSubMenuItem(mstrmojo.desc(11993,"Data Labels"),"",this.id,Dq);}else{if(!Dy){DV=Bt(Dc,DU.selectedShapes);["editGroup","editCalculation","createDe"].forEach(function(DZ){Cl.absorbMenuItems(DG,DV[DZ],true);});if(D0){DG.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",Dc.getMenuHandler("selectionShowData"));DG.addSeparator();}DG.addSubMenuItem(mstrmojo.desc(11993,"Data Labels"),"",this.id,Dq);if(Ds){if(!Da.TemplateMetric||Da.MetricNames!==undefined){if((Db===Br.LINE&&(Ds===BJ.SCIRCLE||Ds===BJ.SBAR))||Ds==="ticker"){DG.addPopupMenuItem(mstrmojo.desc(3523,"Line Color"),this.id,function(){return Bh(this.widget,DE.elem,Da,{showNoFill:false,showAutomatic:true,showGradient:DU.isShowGradientAllowed(Db)});});}if((Db===Br.AREA&&Ds===BJ.SCIRCLE)||Ds==="bar"||Ds==="circle"||Ds==="square"||Ds==="gbar"||Ds==="pie"||Ds==="ring"){DG.addPopupMenuItem(mstrmojo.desc(13619,"Shape Fill Color"),this.id,function(){return Bh(this.widget,DE.elem,Da,{showNoFill:true,showAutomatic:true,showGradient:DU.isShowGradientAllowed(Db)});});}}}if(Ds){if(this.isLineOrAreaPaint(Db)&&(Ds===BJ.SCIRCLE&&(Db===Br.LINE||Db===Br.AREA))||Ds==="gmMarker"){DG.addSubMenuItem(mstrmojo.desc(12159,"Marker"),"",this.id,Df);}}DG.addSeparator();if(Da.TemplateMetric&&!Da.MetricNames){var DN=Cl.getMetricsInDropZone(this.widget.zonesModel,mstrmojo.vi.viz.EnumDSSDropZones.ColorBy);DG.addMenuItem(mstrmojo.desc(13174,"Select color ranges..."),"",function(){DU.widget.model.openThresholdEditor(DN[0],true,false);});}if(D9.isABL&&!D9.isPie){var Dm=Dx&&Dx.getSelectedObjectMetricInfo(),D2=Dm&&Dm.length&&Dm[0],DQ=Dc.model.data.gts.col[Dc.model.data.gts.col.length-1].es,Dp=0;if(D2){Cc.forEach(DQ,function(DZ){if(DZ.oid===D2.eid){return false;}Dp++;});DG.addSeparator();p.getSubMenu(Dc,DG,D2.eid,Dp);}}else{if(D9.isBubbleOrScatter){DG.addSeparator();var DI=Dc.getMenuHandler("changeGlobalShape");if(DI){DG.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",Dc.id,DI);}}}if(DV.renameDe.menus.length>0){DG.addSeparator();}Cl.absorbMenuItems(DG,DV.renameDe);if(DV.renameDe.menus.length>0){Do=DG.getMenuItems().length-1;}}}break;case AY.GM_DATA_LABEL:DG.addSubMenuItem(mstrmojo.desc(11993,"Data Labels"),"",this.id,Dq);break;case AY.GM_X_NUMERIC:case AY.GM_Y_NUMERIC:if(D7){Dn=Dn?Dn:DE.selectionInfos[0];if(D9.isABL&&DE.identity&&DE.identity.objType!==z.Y_ATTRIBUTE_AXIS_TITLE&&DE.identity.objType!==z.X_ATTRIBUTE_AXIS_TITLE){DG.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dc.getMenuHandler("sortMetricTitle"),{isAsc:true,selInfo:Dn});DG.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dc.getMenuHandler("sortMetricTitle"),{isAsc:false,selInfo:Dn});if(Du.firstRes.gsi.sorts[0].length!==0||Du.firstRes.gsi.sorts[1].length!==0){DG.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dc.getMenuHandler("clearSort"));}}}else{if(Dy){D6=function(){var DZ=new V.ui.menus.MenuConfig();function ED(EF){function EE(){return function(EH,EG){if(EH!==EG){if(EC===AY.GM_X_NUMERIC){EF.writeGlobalProperty(C8.X_AXIS_LABELS_SHOW,EH);}else{if(EC===AY.GM_Y_NUMERIC){EF.writeGlobalProperty(C8.Y_AXIS_LABELS_SHOW,EH);}}}};}return function(){var EG=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EH){EG.push(EH);});if(EC===AY.GM_X_NUMERIC){DZ.addRadioMenuGroup(EF.readGlobalProperty(C8.X_AXIS_LABELS_SHOW),EE(),EG,"checkMark",undefined,true);}else{if(EC===AY.GM_Y_NUMERIC){DZ.addRadioMenuGroup(EF.readGlobalProperty(C8.Y_AXIS_LABELS_SHOW),EE(),EG,"checkMark",undefined,true);}}return DZ;};}(ED(Dc))();return DZ;};DG.addSubMenuItem(mstrmojo.desc(12003,"Axis Labels"),"xt",this.id,D6);D5=function(){var DZ=new V.ui.menus.MenuConfig();function ED(EF){function EE(){return function(EH,EG){if(EH!==EG){if(EC===AY.GM_X_NUMERIC){EF.writeGlobalProperty(C8.X_AXIS_LABELS_ROTATION,EH);}else{if(EC===AY.GM_Y_NUMERIC){EF.writeGlobalProperty(C8.Y_AXIS_LABELS_ROTATION,EH);}}}};}return function(){var EG=[];[{text:mstrmojo.desc(12284,"Automatic"),value:B1.EnumLabelRotation.AUTOMATIC},{text:mstrmojo.desc(12285,"Vertical"),value:B1.EnumLabelRotation.VERTICAL},{text:mstrmojo.desc(12286,"Horizontal"),value:B1.EnumLabelRotation.HORIZONTAL}].forEach(function(EH){EG.push(EH);});if(EC===AY.GM_X_NUMERIC){DZ.addRadioMenuGroup(EF.readGlobalProperty(C8.X_AXIS_LABELS_ROTATION),EE(),EG,"checkMark",undefined,true);}else{if(EC===AY.GM_Y_NUMERIC){DZ.addRadioMenuGroup(EF.readGlobalProperty(C8.Y_AXIS_LABELS_ROTATION),EE(),EG,"checkMark",undefined,true);}}return DZ;};}(ED(Dc))();return DZ;};if(DU.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK&&EC===AY.GM_X_NUMERIC){DG.addSubMenuItem(mstrmojo.desc(12283,"Rotation"),"xt",this.id,D5);}}else{var Dh=DE.multiMetrics;if(Dh&&Dh.length>1){C9(Dh[0]);}else{Dw=DE.metrics;if(Dw){DF=DE.selectionInfos;Dz=Dw.length;if(Dz===1){if(DF[0]&&DF[0].elem){delete DF[0].elem;}Cl.absorbMenuItems(DG,DD(Dw[0],DF[0]));}else{Cc.forEach(Dw,function(ED,DZ){DG.addSubMenuItem(ED,"",DU.id,function(){if(DF[DZ]&&DF[DZ].elem){delete DF[DZ].elem;}return DD(ED,DF[DZ]);});});if(Du.isStacked&&!Du.splitPlottingMetrics){DG.addSeparator();p.getReferenceLineSubMenu(Dc,DG,D9.isABL,DF[0].mid);}}break;}}}}break;case AY.GM_XLABEL:case AY.GM_YLABEL:if(Dy){Dd=function(){var DZ=new V.ui.menus.MenuConfig();function ED(EF){function EE(){return function(EH,EG){if(EH!==EG){if(EC===AY.GM_XLABEL){EF.writeGlobalProperty(C8.X_AXIS_TITLE_SHOW,EH);}else{if(EC===AY.GM_YLABEL){EF.writeGlobalProperty(C8.Y_AXIS_TITLE_SHOW,EH);}}}};}return function(){var EG=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EH){EG.push(EH);});if(EC===AY.GM_XLABEL){DZ.addRadioMenuGroup(EF.readGlobalProperty(C8.X_AXIS_TITLE_SHOW),EE(),EG,"checkMark",undefined,true);}else{if(EC===AY.GM_YLABEL){DZ.addRadioMenuGroup(EF.readGlobalProperty(C8.Y_AXIS_TITLE_SHOW),EE(),EG,"checkMark",undefined,true);}}return DZ;};}(ED(Dc))();return DZ;};DG.addSubMenuItem(mstrmojo.desc(13679,"Axis Title"),"xt",this.id,Dd);}else{if(D7){if(D9.isABL&&DE.identity&&DE.identity.objType!==z.Y_ATTRIBUTE_AXIS_TITLE&&DE.identity.objType!==z.X_ATTRIBUTE_AXIS_TITLE){DG.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dc.getMenuHandler("sortMetricTitle"),{isAsc:true,selInfo:Dn});DG.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dc.getMenuHandler("sortMetricTitle"),{isAsc:false,selInfo:Dn});if(Du.firstRes.gsi.sorts[0].length!==0||Du.firstRes.gsi.sorts[1].length!==0){DG.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dc.getMenuHandler("clearSort"));}}}else{if(DE.identity){if(DE.identity.objType!==z.Y_ATTRIBUTE_AXIS_TITLE&&DE.identity.objType!==z.X_ATTRIBUTE_AXIS_TITLE){var Dh=DE.multiMetrics;if(Dh&&Dh.length>1){C9(Dn);}else{Cl.absorbMenuItems(DG,DD(DE.metric,Dn));}}else{D1=Dc.zonesModel.gmZones;DO=(function(){var DZ,EE,ED;DZ=D1.dropZones;for(EE in DZ){DX=DZ[EE].items;for(ED in DX){if(DX[ED].did===DE.identity.tid){Dg=DX[ED];return DZ[EE];}}}}());DY={zone:DO,axis:DO&&DO.id,idx:Cc.find(DX,"id",Dg.id),cnt:DX.length,item:Dg,useDropzone:true};De=!D1.docModel.isFromMDXCube(Dg.did);if((Dg.t===47&&(Dg.st===12033||Dg.st===12032))||(Dx.otp===47&&(Dx.ost===12033||Dx.ost===12032))){if(Dx.ost===12033){DG.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"eg",D1.getCreateOrEditElementGroupFunc(DY));DG.addSeparator();}DG.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dx});DG.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dx});if(Du.firstRes.gsi.sorts[0].length!==0||Du.firstRes.gsi.sorts[1].length!==0){DG.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dc.getMenuHandler("clearSort"));}DG.addSeparator();}else{if(Dg.da&&De){DG.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){D1.editDerivedAttribute(DY);},DY);DG.addSeparator();}DG.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dx});DG.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dc.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dx});if(Du.firstRes.gsi.sorts[0].length!==0||Du.firstRes.gsi.sorts[1].length!==0){DG.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dc.getMenuHandler("clearSort"));}DG.addSeparator();EA=D1.isDynamicLink(Dg);if(D1.allowInsertNewAttribute(DO)&&!Cl.hasCGorCon(Dc,Dg)&&De&&!EA){DG.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){D1.newDerivedAttribute(DY);},DY);}DK=Dg.t===47&&D1.getUnitInfoInTemplate(Dg.did).unit.ost===12033;DJ=D1.isAttribute(Dg)?mstrmojo.desc(13295,"Create Groups..."):(DK?mstrmojo.desc(13296,"Edit Groups..."):null);if(DJ!==null&&!EA){DG.addMenuItem(DJ,"eg",D1.getCreateOrEditElementGroupFunc(DY));}DG.addSeparator();if(D1.showNumberFormat(Dg)){DG.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),D1.id,D1.getNumberFormatEditorCfg,DY);}DB(Dx&&Dx.tid);if(!EA){DH();}DG.addSeparator();}Do=DG.getMenuItems().length;if(D1.hasReplaceCandidates(DY)){DG.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",Dc.zonesModel.id,D1.getReplaceSubMenu,DY);}if(DE.elem&&DE.elem.firstChild){AF(Dc,DG,DE.elem.firstChild,Dg);}DG.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){D1.deleteItem(DO,DY.idx);});}}}}break;case AY.GM_ROW_HEADER_EXTRA:case AY.GM_COL_HEADER_EXTRA:if(Dy){getHeaderMenuInFmtMode.call(this);}else{Cl.absorbMenuItems(DG,DD(DE.metric,Dn));}break;case AY.GM_SVG_CHART:if(Dc.legend){if(Dc.legend.height===0&&Dc.legend.width===0){DG.addMenuItem(mstrmojo.desc(12001,"Show Legend"),"xt",function(){Dc.writeGlobalProperty("LegendVisibleness",true);});}}DG.addPopupMenuItem(mstrmojo.desc(11991,"Grid Lines"),this.id,Dr);DG.addSeparator();As.call(DU,DG);DG.addSeparator();DS();break;case AY.GM_TREND_LINE:if(!Dy){var Dk=Dc.readGlobalProperty(Aa.TREND_LINE_DEF,Dx.tlOpt);DG.addPopupMenuItem(mstrmojo.desc(3523,"Line Color"),this.id,function(){return Ak(this.widget,Aa.TREND_REF_LINE_COLOR,{realPropName:Aa.TREND_LINE_DEF,opt:Dx.tlOpt},Dk,false);});DG.addMenuItem(mstrmojo.desc(13680,"Disable trend line"),"xt",function(){Dk.setProperty(Aa.TREND_ENABLED,false);Dc.writeGlobalProperty(Aa.TREND_LINE_DEF,Dk,Dx.tlOpt);});}break;case AY.GM_REF_LINE:if(!Dy){var Dv=Dc.readGlobalProperty(Aa.REF_LINE_DEF,Dx.tlOpt);DG.addPopupMenuItem(mstrmojo.desc(3523,"Line Color"),this.id,function(){return Ak(this.widget,Aa.TREND_REF_LINE_COLOR,{realPropName:Aa.REF_LINE_DEF,opt:Dx.tlOpt},Dv,false);});DG.addMenuItem(mstrmojo.desc(13681,"Disable reference line"),"xt",function(){Dv.setProperty(Aa.REF_ENABLED,false);Dc.writeGlobalProperty(Aa.REF_LINE_DEF,Dv,Dx.tlOpt);});}break;case AY.GM_H_GRID_LINE:case AY.GM_V_GRID_LINE:case AY.GM_H_MINOR_GRID_LINE:case AY.GM_V_MINOR_GRID_LINE:Dr(DG);break;default:}if(Do){DG.fmtOptIdx=Do;}return DG;},getSelectedTargetsIdentities:function(){var DA=this.selectedTargets,C9=[];(DA||[]).forEach(function(DB){if(DB.identity){C9.push(DB.identity);}});return C9;},handleRMClick:function(DU,DS,DH,DQ){DU=this.getRealTargetForSetShape(DU,DQ);var DC,DB=this.fmtMode,DA=DQ.ctlKey||DQ.metaKey,DE=this.widget,DP=DU.getAttribute("type"),DR=this.fmtMode?AS(DU):AW(DU);var DN,DM;if(!DR&&!this.fmtMode){DR=AS(DU);}if(!DR){var DI=new V.ui.menus.MenuConfig();this.addFormatOption(DI);if(DI&&DI.menus&&DI.menus.length){this.hideTooltip();Aj.call(this,DH,DI);}return ;}DC=DR.getAttribute("type");if(B0(DC)){this.clearSelectedTargets();if(!Cf(DR)){if(DB){if(this.fmtState===Bm.NORMAL){this.fmtState=Bm.PER_COLORBY;}this.handleClickOnShapeFMT(DR,DA);DE.onFormatableTargetChanged();}else{this.handleClickOnShape(DR,DA);}}DH.x-=4;DH.y-=4;}else{if(DB){DN=this.selectedTargets||[];var DT=this.copeTargetChangeForDBLClick([DR])[0];DM=DN&&DN.indexOf(DT)!==-1;if(!DM){this.clearSelectedTargets();this.selectTarget(this.getTargetsWithSameType(DR));}}else{if(DC!==AY.LASSO_SELECTOR){DN=this.selectedTargets||[];DM=DN&&DN.indexOf(DR)!==-1;if(!DM&&!Ce.call(this,DR,DC)){if(!DA){this.clearSelectedTargets();}if(mstrApp.appState!==mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION&&(h(DC)||t(DC)||Ap(DC)||A0(DC))){this.fmtMode=true;this.selectTarget(this.getTargetsWithSameType(DR));this.fmtMode=false;}else{this.selectTarget(this.getTargetsWithSameType(DR));}}}}}if(!DB){DE.endSelections();}if(DC===AY.LASSO_SELECTOR&&this.selectedShapes.length===0){return ;}var DJ,C9,DV=DR.identity||(DR.parentNode&&DR.parentNode.identity),DG={};if(DC===AY.LASSO_SELECTOR&&!DV){DV=this.selectedShapes.length&&this.selectedShapes[0].identity;}DG.visGM=DE;DG.identity=DV;DG.selectionInfo=DR.selectionInfo;DG.metric=DR.innerText||DR.textContent||"";DG.metrics=DR.metrics;DG.selectionInfos=DR.selectionInfos;DG.subType=DR.getAttribute("subtype");DG.orgType=DP;DG.elem=DR;DG.tagName=DR.tagName;if(M(this.selType)){var DF=[],DK;DN=this.selectedTargets||[];Cc.forEach(DN,function(DW){DK=DW.selectionInfo?Cc.find(DF,"mid",DW.selectionInfo.mid):null;if(DK===-1){DF.push(DW.selectionInfo);}});DG.multiMetrics=DF;}DJ=this.getMenuConfig(DC,DS,DG,DB);C9=this.getToolbarConfig(DC,DG,DB);this.addFormatOption(DJ,DJ.fmtOptIdx);if(DJ&&DJ.menus&&DJ.menus.length){this.hideTooltip();Aj.call(this,DH,DJ);}var DO=this.domMenuPH.firstChild;if(DO&&DO.offsetTop<0){DH.y+=DO.offsetTop;}if(C9){this.hideTooltip();AI.call(this,DH,C9);}if(DV&&DV.objType!==z.GRAPH_SHAPE){var DL;if(DP===AY.GM_ROW_HEADER){DL=Ax.copy(DV);DL.objType=z.ROWS_BACKGROUND;}if(DP===AY.GM_COL_HEADER){DL=Ax.copy(DV);DL.objType=z.COLS_BACKGROUND;}if(DL){DE.raiseEventOnFormattingIdentity(AP([DL]));}else{if(DB){var DD=this.getSelectedTargetsIdentities();DE.raiseEventOnFormattingIdentity(AP(DD));}else{DE.raiseEventOnFormattingIdentity(AP([DV]));}}}this.toggleGMFade();},formatHandler:function(C9){var DE=this,DF=this.widget,DG;mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");DF.parent.selectVIUnit();C9=C9||(DE.selectedTargets.length?DE.selectedTargets:DE.selectedShapes);if(C9.length===0||C9[0].getAttribute("type")===AY.GM_DUMMY_A){DF.raiseEventOnNonFormattingIdentity(AP({objType:z.VIZ_BOX_CONTAINER}));if(DF.mousePos){DG=DE.getToolbarConfig(AY.GM_SVG_CHART,{},true);DE.hideTooltip();AK.call(DE,DF.mousePos,DG);}return ;}var DD=C9[0],DC=DD.getAttribute("type"),DB=DD.identity,DA={visGM:DF,identity:DB,subType:DD.getAttribute("subtype"),orgType:DC};this.fmtFake=true;this.highlightByFormat(DD);this.fmtFake=false;DG=DE.getToolbarConfig(DC,DA,true);if(DG){DE.hideTooltip();AK.call(DE,DF.mousePos,DG);}},highlightByFormat:function(DD){var DC=DD.getAttribute("type"),DB=this.fmtState,DE=this.widget,DF=false,DG;if(B0(DC)){this.clearSelectedTargets();if(DB===Bm.NORMAL||DB===Bm.PER_COLORBY){DG=this.handleClickOnShapeFMT(DD,DF);DB=Bm.PER_COLORBY;}else{if(DF){DG=this.handleDblClickOnShapeFMT(DD,DF);}else{DE.clearUserSelections();DG=this.handleClickOnShapeFMT(DD,DF);DB=Bm.PER_COLORBY;}}if(DG===0){DB=Bm.NORMAL;}this.fmtState=DB;DE.onFormatableTargetChanged();}else{if(CT(DC)||A4(DC)||h(DC)||t(DC)||M(DC)||AV(DC)||Ap(DC)||A0(DC)||A0(DC)||B3(DC)||BO(DC)||w(DC)||Bp(DC)){DE.clearUserSelections();this.clearSelectedTargets();this.fmtMode=true;this.selectTarget(this.getTargetsWithSameType(DD));this.fmtMode=false;}else{this.clearSelectedTargets();DE.clearUserSelections();}var DA=this.getSelectedTargetsIdentities(),C9=[];Cc.forEach(DA,function(DH){switch(DH.objType){case z.ROW_TITLE:C9.push({objType:z.ROWS_BACKGROUND});break;case z.COL_TITLE:C9.push({objType:z.COLS_BACKGROUND});break;case z.REF_LINE:case z.TREND_LINE:DH.key=DH.lineModel.trendLineModel.metricId;break;default:break;}});if(DA.length===0){DA={objType:z.VIZ_BOX_CONTAINER};}else{if(C9.length){DA=DA.concat(C9);}}DE.raiseEventOnNonFormattingIdentity(AP(DA));}},addFormatOption:function(DA,DB){var DD=this;if(mstrApp.appState===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION){return ;}if(!mstrApp.allowWebDashboardDesign()){return ;}if(DA&&DA.menus&&DA.menus.length>0){DA.addSeparator();}var C9=DD.selectedTargets.length?DD.selectedTargets:DD.selectedShapes;var DC=[];Cc.forEach(C9,function(DF){var DE=DF.cloneNode();DE.identity=DF.identity;DC.push(DE);});if(DB){DA.addMenuItem("","separator",function(){return false;},{},DB+1);DA.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){DD.formatHandler(DC);},{},DB+2);DA.addMenuItem("","separator",function(){return false;},{},DB+3);}else{DA.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){DD.formatHandler(DC);});}},copeTargetChangeForDBLClick:function(DB){var DA,C9=[];Cc.forEach(DB||[],function(DD){var DC=DD.getAttribute("type");if(DC===AY.GM_ROW_HEADER||DC===AY.GM_ROW_HEADER_EXTRA||DC===AY.GM_ROW_HEADER_TITLE||DC===AY.GM_COL_HEADER||DC===AY.GM_COL_HEADER_TITLE||DC===AY.GM_COL_HEADER_EXTRA){DA=CJ(DD,"type",[AY.GM_TEXT_BODY]);if(DA.length>0){C9.push(DA[0]);}else{C9.push(DD);}}else{C9.push(DD);}});return C9;},getRealTargetForSetShape:function(DH,DI){var DC=DH.getAttribute("type"),DE,DJ=DH,DF=this.widget,DK=DF.domGM.childNodes[0],DB,C9=this.widget.GMController.getChartInfo(),DD=Cl.getMouseOffset(DI),DL=(DI.button===2);if(DC===AY.GM_SVG_CHART){DK.style.zIndex="-2";DE=document.elementFromPoint(DI.pageX,DI.pageY);DK.style.zIndex="auto";DB=DE.getAttribute("type");if(DL&&(DB===AY.LINE_CONTAINER||DB===AY.GM_H_GRID_LINE||DB===AY.GM_V_GRID_LINE||DB===AY.GM_H_MINOR_GRID_LINE||DB===AY.GM_V_MINOR_GRID_LINE)){DJ=DE;}else{if(C9.tp===Ci.LINE&&C9.shape===Br.LINE){var DA=this.getLinePoint(DH,C9,DD.x,DD.y);if(DA){DJ=DA;}else{DJ=DE;}}}}else{if(DC===AY.GM_SET_SHAPE&&C9.tp===Ci.AREA&&C9.shape===Br.AREA){var DG=this.getAreaPoint(DH,C9,DD.x,DD.y);if(DG){DJ=DG;}}}return DJ;},handleClick:function(DR,DA,DO,C9){DR=this.getRealTargetForSetShape(DR,DO);var DE=this.widget,DN=DR.getAttribute("type"),DP=this.fmtMode?AS(DR):AW(DR),DB=this.fmtMode,DJ,DC,DI=this.fmtState;var DH=DE.isClearAllDisabled();if(!!C9){if(DP){DC=DP.getAttribute("type");if(!B0(DC)){return ;}}else{return ;}}if(!DP){if(DH){return ;}DE.clearUserSelections();this.clearSelectedTargets();if(DB){DE.raiseEventOnFormattingIdentity([]);}if(Cl.isOnExpressMode()){DE.singleUnitSelect();}return ;}DC=DP.getAttribute("type");if(DB){if(B0(DC)){this.clearSelectedTargets();if(DI===Bm.NORMAL||DI===Bm.PER_COLORBY){DJ=this.handleClickOnShapeFMT(DP,DA);DI=Bm.PER_COLORBY;}else{if(DA){DJ=this.handleDblClickOnShapeFMT(DP,DA);}else{DE.clearUserSelections();DJ=this.handleClickOnShapeFMT(DP,DA);DI=Bm.PER_COLORBY;}}if(DJ===0){DI=Bm.NORMAL;}this.fmtState=DI;DE.onFormatableTargetChanged();}else{if((DN===AY.GM_TEXT_BODY)||CT(DC)||A4(DC)||h(DC)||t(DC)||M(DC)||AV(DC)||Ap(DC)||A0(DC)||A0(DC)||B3(DC)||BO(DC)||w(DC)||Bp(DC)){DE.clearUserSelections();this.clearSelectedTargets();this.selectTarget(this.getTargetsWithSameType(DP));}else{this.clearSelectedTargets();DE.clearUserSelections();}var DD=this.getSelectedTargetsIdentities();DE.raiseEventOnFormattingIdentity(AP(DD));}}else{if(Cl.isOnExpressMode()){var DK=M(DC)&&(DP.identity&&DP.identity.mOriId);var DL=B0(DC)||CT(DC)||A4(DC);DE.processSelectedMetricIds(DL,DK,DA);DE.precessSelectedAttributes(DL,DK,DA);if(B0(DC)){this.handleClickOnShape(DP,DA);DE.endSelections();}else{if(DC===AY.GM_ROW_HEADER||DC===AY.GM_COL_HEADER||DC===AY.GM_ROW_HEADER_TITLE||DC===AY.GM_COL_HEADER_TITLE){DE.clearSelectedShapesAndCharts();this.handleClickOnTarget(DR,DA,Cp);DE.endSelections();}else{if(w(DC)||Bp(DC)){DE.clearUserSelections();this.clearSelectedTargets();this.selectTarget(this.getTargetsWithSameType(DP));}else{if(DC===AY.LASSO_RESIZER){}else{if(DE.hasMetricSelector()&&M(DC)){if(DP.identity.mOriId){DE.selectedMetricIds.push(DP.identity.mOriId);DE.endSelections();}}else{this.clearSelectedTargets();DE.clearUserSelections();}}}}}}else{if(B0(DC)){if(DH&&this.selectedShapes.indexOf(DP)>-1){return ;}this.handleClickOnShape(DP,DA);DE.endSelections();}else{if(DC===AY.GM_ROW_HEADER||DC===AY.GM_COL_HEADER||DC===AY.GM_ROW_HEADER_TITLE||DC===AY.GM_COL_HEADER_TITLE){if(DH&&this.selectedTargets.indexOf(DP)>-1){return ;}DE.clearSelectedShapesAndCharts();this.handleClickOnTarget(DR,DA,Cp);DE.endSelections();}else{if(DC===AY.GM_XLABEL||DC===AY.GM_YLABEL){DE.clearSelectedShapesAndCharts();DE.endSelections();this.handleClickOnTarget(DR,DA,DC);}else{if(w(DC)||Bp(DC)){this.clearSelectRules();DE.clearSelections(true);DE.endSelections();this.selectTarget(this.getTargetsWithSameType(DP));}else{if(DC===AY.LASSO_RESIZER){}else{var DG=this.selectedTargets.length>0&&this.selectedTargets[0],DF=DG&&DG.getAttribute("type"),DM=this.selectedShapes.length>0&&this.selectedShapes[0],DQ=DM&&DM.getAttribute("type");if(DH&&((DG&&(DF===AY.GM_ROW_HEADER||DF===AY.GM_COL_HEADER))||(DM&&B0(DQ)))){return ;}this.clearSelectRules();DE.clearSelections(true);DE.endSelections();}}}}}}}this.toggleGMFade();},deselectTarget:function(DD){var DC=this.widget,DA=DC.manager,C9=DD.identity,DB=DD.getAttribute("type");BF(DD,s.NORMAL);this.selectedTargets=(this.selectedTargets||[]).filter(function(DE){return DE!==DD;});if(DB===AY.GM_ROW_HEADER){BB(DD,false,"selected",DA);BB(DD,false,"sh",DA);DC.removeAttributeSelection(C9.tid,C9.eid);}if(DB===AY.GM_COL_HEADER){a(DD,false,"selected",DA);a(DD,false,"sh",DA);DC.removeAttributeSelection(C9.tid,C9.eid);}},toggleSelectTarget:function(DA){if(M(this.selType)){var C9=Cf(DA)||Ae(DA);Y.call(this,DA);if(C9){return false;}}else{if(Cf(DA)||Ae(DA)){this.deselectTarget(DA);this.deselectBorders(DA);return false;}}this.selectTarget(this.getTargetsWithSameType(DA));return true;},handleClickOnTarget:function(DC,DD,DB){var DA=this.fmtMode?AS(DC):AW(DC);if(!DD||this.selType!==DB){var C9=(this.selectedTargets&&this.selectedTargets.length===1&&this.selectedTargets[0]===DA);this.clearSelectedTargets();this.selType=DB;if(C9){return 0;}}this.toggleSelectTarget(DA);},handleDblClick:function(DF,C9,DG){DF=this.getRealTargetForSetShape(DF,DG);var DA,DH,DE=this.fmtMode,DC=this.fmtState,DB=DE?AS(DF):AW(DF),DD=this.widget;if(!DB){DD.clearUserSelections();this.clearSelectedTargets();if(DE){DD.raiseEventOnFormattingIdentity([]);}return ;}if(DB&&DE){DH=DB.getAttribute("type");if(B0(DH)){if(DC===Bm.NORMAL||DC===Bm.PER_SHAPE){DA=this.handleDblClickOnShapeFMT(DB,C9);DC=Bm.PER_SHAPE;}else{if(C9){DA=this.handleClickOnShapeFMT(DB,C9);}else{DD.clearUserSelections();DA=this.handleDblClickOnShapeFMT(DB,C9);DC=Bm.PER_SHAPE;}}if(DA===0){DC=Bm.NORMAL;}this.fmtState=DC;DD.onFormatableTargetChanged();}else{DD.clearUserSelections();this.clearSelectedTargets();this.selectTarget(this.copeTargetChangeForDBLClick(this.getTargetsWithSameTypeForDBL(DB)));var DI=this.getSelectedTargetsIdentities();DD.raiseEventOnFormattingIdentity(AP(DI));}}},handleDblClickOnShapeFMT:function(DE,DG){var DC,DB,C9,DD=DE.getAttribute("type"),DF=this.breakByRules,DA=this.breakByShapes;if(DD===AY.GM_MARKER){DC=DE.source;}else{DC=DE;}if(!DG){this.clearSelectRules();}DB=AX(DC);if(Cf(DC)){C9=Be(DF,DB);if(C9!==-1){DF.splice(C9,1);DA.splice(C9,1);}}else{DF.push(DB);DA.push(DC);}this.doHighlight(A6.METRICS,DF);return DF.length;},handleClickOnShapeFMT:function(DD,DF){var DB,DA,DC=DD.getAttribute("type"),DE=this.colorByRules,C9=this.colorByShapes;if(DC===AY.GM_MARKER){DB=DD.source;}else{DB=DD;}if(!DF){this.clearSelectRules();}DA=A5(DB);DE.push(DA);C9.push(DB);this.widget.GMController.resetHighLightIndex=true;this.doHighlight(A6.METRICS,DE);return DE.length;},toggleGMFade:function(DA){var C9=this.widget.domGM;DA=(DA===undefined)?this.selectedShapes.length>0:DA;B6.toggleClass(C9,"gm-fade",DA);},handleClickOnShape:function(DD,DE){var DA,DC=false,C9=this.selectedShapes,DB=DD.getAttribute("type");if(!B0(DB)){return -1;}if(DB===AY.GM_MARKER){DA=DD.source;}else{DA=DD;}if(!DE){DC=C9.length===1&&C9[0]===DA;if(!DC||!this.widget.isClearAllDisabled()){this.widget.clearSelections(true);}if(DC){return 0;}}else{this.clearSelectedTargets();}this.toggleSelectShape(DA);return this.selectedShapes.length;},getLinePoint:function(DK,DB,DJ,DH){var DC=function(DO){var DN=DO.length,DR=[],DP,DQ;for(DQ=0;DQ<DN;DQ++){DP=DO[DQ];DR.push({point:C1(DP),dom:DP});}return DR;};var DE=function(DN,DY,DT,DS){var Dc=DN[0],DV=Dc&&Dc.length||0,DX,DQ=null,Db=DY===Ac.VERTICAL,DZ=false,DP,DW,Da,DO,DR;var DU=function(Dm,Dj,Dh,Dg,Dk){var De=Dh.point[0],Dl=Dh.point[1],Dd=Dg.point[0],Di=Dg.point[1],Df=(Di-Dl)/(Dd-De);return Dk?Df*(Dm-De)+Dl-Dj:Dm-De+(Dl-Dj)/Df;};for(DR=0;DR<DV;DR++){DP=Db?DT-Dc[DR].point[0]:DS-Dc[DR].point[1];if(DR===0||DW>Math.abs(DP)){DW=Math.abs(DP);Da=DR;}if(DP<0){break;}}DO=DR;if(DO>0&&DO<DV){for(DR=0;DR<DN.length;DR++){DX=DN[DR][Da];DP=DU(DT,DS,DN[DR][DO-1],DN[DR][DO],Db);if(DP<=0){DP=Math.abs(DP);DZ=true;}if(DR===0||DP<DW){DW=DP;DQ=DX.dom;}}}return DZ?DQ:null;};var DI=DK.childNodes,DD=DI.length-1,DG,DF,C9=[],DL,DA;for(DF=0;DF<DD;DF++){DG=DI[DF+1];DA=CJ(DG,"type",AY.GM_SHAPE);DL=DC(DA);if(DL&&DL.length>0){C9.push(DL);}}var DM=DE(C9,DB.dirc,DJ,DH);return DM;},isLineOrAreaPaint:function(DE){var DC,C9,DB=0,DF=this.widget,DG=DF.GMController,DD=DF.model.data.gsi.mx,DA=function(DH){switch(DH){case Br.AREA:return"polygon";case Br.LINE:return"polyline";}};if(DE!==undefined){DC=DA(DE);}else{Cc.forEach(DD,function(){DE=DG.getOnTheFlyShapeForMetric(DB++);DC=DA(DE);if(DC){return false;}});}if(DC){C9=DF.domGM.getElementsByTagName(DC);for(DB=0;DB<C9.length;DB++){if(C9[DB].getAttribute("type")==="set-shape"){return true;}}}return false;},hoverAreaChartPoint:function(DE,C9,DC,DA){var DB=DE.parentNode,DI=Cc.filter(DB.childNodes,function(DJ){return DJ.tagName==="circle";}),DF,DD,DG;Cc.forEach(DI,function(DJ,DL){var DK=C1(DJ),DM;if(C9.dirc===Ac.VERTICAL){DM=Math.abs(DC-DK[0]);}else{DM=Math.abs(DA-DK[1]);}if(DL===0||DM<DF){DF=DM;DD=DJ;DG=DK;}});if(DD){var DH=BT.position(DB.parentNode);this.hoverShape(DD);this.showTooltip(DD,{x:DH.x+DG[0],y:DH.y+DG[1]});}},hoverLineChartPoint:function(DE,C9,DD,DB){var DH=this.getLinePoint(DE,C9,DD,DB);if(DH&&DH!==this.hoveredShape){var DG=C1(DH),DF=BT.position(DE);var DC=DF.x+DG[0],DA=DF.y+DG[1];this.hoverShape(DH);this.showTooltip(DH,{x:DC,y:DA});}},hoverLineWithDataPoint:function(DB){var DA,C9;if((DB.getAttribute("subtype")===BJ.SCIRCLE)){DA=DB.parentNode;C9=DA&&DA.querySelector(".gm-set-polyline");if(C9){this.hoverSetShape(C9);}}},handleMouseOver:function(DC,DE,C9,DD){var DB=this.fmtMode?AS(DC):AW(DC),DA;if(!DB){this.clearHoveredShape();this.clearHoveredSetShape();this.clearHoveredTarget();return ;}DA=DB.getAttribute("type");if(DA===AY.GM_SHAPE){this.clearHoveredSetShape();this.clearHoveredShape();this.clearHoveredTarget();this.hoverShape(DB);this.hoverLineWithDataPoint(DB);this.hoverOverSelectedShape(DB);}else{if(DA===AY.GM_SET_SHAPE&&DE.tp===Ci.AREA&&DE.shape===Br.AREA){this.clearHoveredShape();this.clearHoveredSetShape();this.clearHoveredTarget();this.hoverAreaChartPoint(DB,DE,C9,DD);}else{if(DA===AY.GM_SET_SHAPE){this.clearHoveredSetShape();this.clearHoveredShape();this.clearHoveredTarget();this.hoverSetShape(DB);}else{if(DA===AY.GM_SVG_CHART&&DE.tp===Ci.LINE&&DE.shape===Br.LINE){this.clearHoveredShape();this.clearHoveredSetShape();this.clearHoveredTarget();this.hoverLineChartPoint(DC,DE,C9,DD);}else{this.clearHoveredShape();this.clearHoveredSetShape();this.hoverTarget(this.getTargetsWithSameType(DB,true));if(!this.isToolbarShow()){this.hoverSelectedTarget([DB]);}}}}}},isToolbarShow:function(){return this.domToolbarPH&&this.domToolbarPH.firstChild;},isShowGradientAllowed:function(DE){var DC=this.widget,DH=DC.GMController,DI=DC.model.data.dz,DA=DI.ColorBy.TemplateUnit,DG=DI.XAxis.TemplateUnit,DB=DI.YAxis.TemplateUnit,DF=DC.model.data.gsi.mx,DD,C9=function(DK){var DJ=true;if(DK===Br.LINE||DK===Br.TICK){DJ=false;}if(DK===Br.AREA&&DA){Cc.forEach([DG,DB],function(DL){Cc.forEach(DL,function(DM){if(Cc.find(DA,"id",DM.id)!==-1){DJ=false;}return DJ;});return DJ;});}return DJ;};if(DE===undefined){for(DD in DF){DE=DH.getOnTheFlyShapeForMetric(DD);if(C9(DE)){return true;}}return false;}else{return C9(DE);}},getDisplayFormsMenu:function(DA){var C9=this.widget.zonesModel;return Cy.getDisplayFormsMenu(DA,C9.getHost(),C9.docModel.datasets,function(DB){C9.submitDropZoneUpdates(DB);});},handleRMCOnLegend:function(DE,DI){var DH=DE.getAttribute("type"),DJ=this.widget.legend,C9,DF,DB,DC,DG=this;if(DH!==AY.LGD_COLORBOX&&DH!==AY.LGD_COLORBOX_CTN){DC=new V.ui.menus.MenuConfig();if(mstrApp.appState!==mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION&&mstrApp.allowWebDashboardDesign()){DC.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");DG.widget.raiseEventOnNonFormattingIdentity(AP({objType:z.LEGEND}));switch(DH){case AY.LGD_TITLE:case AY.LGD_TEXT:DJ.selectText(true);var DK=[C8.LEGEND_FONT_SIZE,C8.LEGEND_FONT_FAMILY,C8.LEGEND_FONT_STYLE,C8.LEGEND_FONT_COLOR];C9=K(DG.widget,"lgd",DK,B4.GLOBAL,undefined,false);break;default:DJ.selectLegendBody();var DL=[C8.LEGEND_BG_COLOR,C8.LEGEND_BG_FILL_TRANSPARENCY];C9=Ai(DG.widget,mstrmojo.desc(2885,"Fill"),DL,B4.GLOBAL);break;}if(C9){DG.hideTooltip();AK.call(DG,DI,C9,true);}});Aj.call(DG,DI,DC);switch(DH){case AY.LGD_TITLE:case AY.LGD_TEXT:DJ.selectText(true);break;default:DJ.selectLegendBody();break;}}}if(!this.fmtMode&&(DH!==AY.LGD_COLORBOX)&&(DH!==AY.LGD_COLORBOX_CTN)){return false;}switch(DH){case AY.LGD_COLORBOX_CTN:case AY.LGD_COLORBOX:if(DH===AY.LGD_COLORBOX){DE=DE.parentNode;}DF=DE.firstChild.identity;if(DF&&DF.comb){this.widget.colorSqureIdentity=DF;DJ.selectColorBox(DE,this.fmtMode);C9=Bj(this.widget,C8.COLOR_SQUARE_COLOR,B4.GLOBAL,{showGradient:this.isShowGradientAllowed(),showAutomatic:true});DI=DJ.adjustColorPickerPos(DE);if(!DI.alignLeft){DB=C9.ENUM_CORNERS;C9.setAlignment(DB.BOTTOM_LEFT,DB.TOP_RIGHT);}}break;case AY.LGD_TITLE:case AY.LGD_TEXT:DJ.selectText(true);var DD=[C8.LEGEND_FONT_SIZE,C8.LEGEND_FONT_FAMILY,C8.LEGEND_FONT_STYLE,C8.LEGEND_FONT_COLOR];C9=K(this.widget,"lgd",DD,B4.GLOBAL,undefined,false);break;default:DJ.selectLegendBody();var DA=[C8.LEGEND_BG_COLOR,C8.LEGEND_BG_FILL_TRANSPARENCY];C9=Ai(this.widget,mstrmojo.desc(2885,"Fill"),DA,B4.GLOBAL);break;}if(C9){this.hideTooltip();AI.call(this,DI,C9,true);}},hideContextMenu:function(){var DB=this.domMenuPH,DD=DB.firstChild,C9=DB.parentNode,DA=this.widget;p.destroyDisposable(DA,DA.menuEditor);if(DD){DB.removeChild(DD);}if(C9){C9.removeChild(DB);}var DC=DA.menuEditor;if(DC){DA.removeChildren(DC);DC.unrender=function(){DC._super();};DC.destroy();DC.unrender=function(){};delete DA.menuEditor;}if(DA.menuEditorClosefn){BT.detachEvent(document.body,"mousedown",DA.menuEditorClosefn,true);delete DA.menuEditorClosefn;}},hideToolbar:function(){var DB=this.domToolbarPH,DD=DB.firstChild,C9=DB.parentNode,DA=this.widget;p.destroyDisposable(DA,DA.toolEditor);if(DD){DB.removeChild(DD);DA.clearUserSelections();if(DA.legend){DA.legend.clearSelectedTargets();}}if(C9){C9.removeChild(DB);}var DC=DA.toolEditor;if(DC){DA.removeChildren(DC);DC.unrender=function(){DC._super();};DC.destroy();DC.unrender=function(){};delete DA.toolEditor;B6.toggleClass(document.body,"hasToolbarPopup",false);B6.toggleClass(DB,mstrApp.getThemeClassName(),false);}if(DA.toolEditorClosefn){BT.detachEvent(document.body,"mousedown",DA.toolEditorClosefn,true);delete DA.toolEditorClosefn;}},handleMouseMove4DropZone:function(C9,DC){var DB=this.widget,DA=this.prepare4DropZoneManipulation(C9,DC,DB);if(!DA.process){return ;}},doHighlight:function(DG,DD){var C9,DF,DE=this.widget,DC=DE.manager,DA=Ax.clone(DD);DE.clearSelections(true,true);if(DG===A6.METRICS){Ax.forEach(DD,function(DN){DE.addMetricValueSelection(DN);});}else{if(DG===A6.ATTS){Ax.forEach(DD,function(DN){Ax.forEach(DN,function(DO,DP){Cc.forEach(DO,function(DQ){DE.addAttributeSelection(DP,DQ.id,DQ.n);});});});}}if(DC){if(DG===A6.METRICS){var DJ=Object.keys(DD);if(DJ[0]){DA={};var DM=DE.GMController.checkAttributeIntersection(DD[DJ[0]],["Rows","Columns","XAxis","YAxis"]);if(DM.length===1){var DI=DM[0],DL=[];Ax.forEach(DD,function(DN,DO){Ax.forEach(DN,function(DQ,DP){if(DP===DI&&DL.indexOf(DQ[0].id)===-1){DL.push(DQ[0].id);DA[DO]={};DA[DO][DP]=DQ;}});});}DF=DC.filterCharts(DA);if(DF&&DF.length>0){g.call(this,DF);}else{DA=Ax.clone(DD);C9=DC.filterShapes(DA);if(C9&&C9.length>0){this.selectShapes(C9);}}}else{DA=Ax.clone(DD);C9=DC.filterShapes(DA);if(C9&&C9.length>0){this.selectShapes(C9);}}}else{if(DG===A6.ATTS){DA=Ax.clone(DD);DF=DC.filterCharts(DA);if(DF&&DF.length>0){g.call(this,DF);}else{if(!Ax.isEmpty(DD)){DA=Ax.clone(DD);var DH=DE.model.data.dz,DK=(DH.XAxis.TemplateUnit||[]).concat(DH.YAxis.TemplateUnit||[]),DB=[];Cc.forEach(DK,function(DN){DB.push(DN.id);});C9=DC.filterShapes(DA);if(C9&&C9.length>0){this.selectShapes(C9);}}}}}}if((DF&&DF.length>0)||Ax.isEmpty(DD)||(DD&&DD.length===1&&DD[0].hashKey==="")){this.toggleGMFade(false);}DE.resetSelectionEmptyFlag();},prepare4DropZoneManipulation:function(DL,DK,DC,Dc){if(DC.isEmpty()){return{process:true,box:this.getComponentBBox(DC,AY.GM_MINI_CHART),row:0,col:0};}var DW,DF,DE,De,DJ,DI,Db,DY,DQ=BT.position(DC.domMainContainer),DX=this.getComponentBBox(DC,AY.GM_YAXIS,true),DV=this.getComponentBBox(DC,AY.GM_YAXIS),DR=this.getComponentBBox(DC,AY.GM_XAXIS),DN=this.getComponentBBox(DC,AY.GM_MINI_CHART),Da=this.getComponentBBox(DC,AY.GM_YAXIS2),DD=this.getComponentBBox(DC,AY.GM_XAXIS2),DS=this.isAxisPrimary(DC.currEnteredDropZoneID),DP=DC.manager,DH=DS?DP.yAxis:DP.yAxis2,DU=DS?DP.xAxis:DP.xAxis2,DB=DS?DP.xAxis2:DP.xAxis,DZ=DS?DP.yAxis2:DP.yAxis,DO=DP.master,Dd={process:false},C9=function(Di,Dh,Dg){Di.left+=Dh;Di.top+=Dg;};var DM=this.getZoneItems(DC.currEnteredDropZoneID,DC,true),DT=DM.length,DA=function(Dn,Dm,Dj){var Do=Dn%Dm,Dg=Dn-Do,Di=Dg+Dm-1,Dl=[],Dh,Dk;for(DW=Dg;DW<=Di;DW++){Dh=Dc==="V"?Dj.getChart(DW,0):Dj.getChart(0,DW);Dk=Dh&&Dh.labelDiv;Dk=Dk&&Dk.firstChild;if(Dk){Dl.push({node:Dk,nodePos:BT.position(Dk),nodeContent:AO(Dk)});}}return Dl;},Df=function(Dj,Dh,Dg,Di){Db=Dj&&Dj.labelDiv;DY=Dj&&Dj.combinedLabelDiv;Db=Db&&Db.firstChild;if(Db){Dd.dzId=parseInt(Db.getAttribute("dzId"),10);Dd.axisIndex=parseInt(Db.getAttribute("dzIndex"),10);if(Dg){Dd.labelNodes=DA(Dh,DT,Dg);}}if(DY&&!Di){Dd.labelNodes=[{node:DY,nodePos:BT.position(DY),clonedNode:DY.cloneNode(true)}];}return Db;},DG=function(Dj,Dh,Dg,Di){if(!Df(Dj,Dh,Dg)){Df(Di,null,null,true);}};DL=DL-DQ.x;DK=DK-DQ.y;if(G(DL,DK,DX)){DL-=DV.left;DK-=DV.top;DF=DH.doRowIntersectionCheck(DK,DK,true).start;De=DH.getChartBBox(DF,0,true);DI=DH.getChart(DF,0);C9(De,DV.left,DV.top);Dd.process=true;Dd.box=De;Dd.nearToV=((DK-De.top)<(De.height>>1))?0:1;Dd.row=DF;Dd.col=0;DG(DI,DF,DH,DZ&&DZ.getChart(DF,0));}else{if(G(DL,DK,DR)){DL-=DR.left;DK-=DR.top;DE=DU.doColIntersectionCheck(DL,DL,true).start;De=DU.getChartBBox(0,DE,true);DJ=DU.getChart(0,DE);Db=DJ.labelDiv;DY=DJ.combinedLabelDiv;C9(De,DR.left,DR.top);Dd.process=true;Dd.box=De;Dd.row=0;Dd.col=DE;Dd.nearToH=((DL-De.left)<(De.width>>1))?0:1;DG(DJ,DE,DU,DB&&DB.getChart(0,DE));}else{if(G(DL,DK,DN)){DL-=DN.left;DK-=DN.top;DO=DP.master;DF=DO.doRowIntersectionCheck(DK,DK,true).start;DE=DO.doColIntersectionCheck(DL,DL,true).start;De=DO.getChartBBox(DF,DE,true);DI=DH&&DH.getChart(DF,0);DJ=DU&&DU.getChart(0,DE);C9(De,DN.left,DN.top);Dd.process=true;Dd.box=De;Dd.row=DF;Dd.col=DE;Dd.nearToV=((DK-De.top)<(De.height>>1))?0:1;Dd.nearToH=((DL-De.left)<(De.width>>1))?0:1;if(Dc==="H"){DG(DJ,DE,DU,DB&&DB.getChart(0,DE));}else{DG(DI,DF,DH,DZ&&DZ.getChart(DF,0));}}else{if(G(DL,DK,Da)){DL-=Da.left;DK-=Da.top;if(!DH){return Dd;}DF=DH.doRowIntersectionCheck(DK,DK,true).start;De=DH.getChartBBox(DF,0,true);DI=DH.getChart(DF,0);C9(De,Da.left,Da.top);Dd.process=true;Dd.box=De;Dd.nearToV=((DK-De.top)<(De.height>>1))?0:1;Dd.row=DF;Dd.col=0;DG(DI,DF,DH,DZ&&DZ.getChart(DF,0));}else{if(G(DL,DK,DD)){DL-=DD.left;DK-=DD.top;if(!DU){return Dd;}DE=DU.doColIntersectionCheck(DL,DL,true).start;De=DU.getChartBBox(0,DE,true);DJ=DU.getChart(0,DE);C9(De,DD.left,DD.top);Dd.process=true;Dd.box=De;Dd.row=0;Dd.col=DE;Dd.nearToH=((DL-De.left)<(De.width>>1))?0:1;DG(DJ,DE,DU,DB&&DB.getChart(0,DE));}}}}}return Dd;},getBackGroundColor:function CF(C9){return B6.getComputedStyle(C9.domGM).backgroundColor;},toggleHoverEffect:function Bf(C9,DB){var DA,DD,DE,DC;if(DB){DA=C9.domNode.getElementsByClassName("disable-draggable");DD=DA.length;for(DC=DD-1;DC>=0;DC--){DE=DA[DC];B6.addClass(DE,"draggable");B6.removeClass(DE,"disable-draggable");}}else{DA=C9.domNode.getElementsByClassName("draggable");DD=DA.length;for(DC=DD-1;DC>=0;DC--){DE=DA[DC];B6.removeClass(DE,"draggable");B6.addClass(DE,"disable-draggable");}}},getComponentBBox:function(DF,DJ,DH){var DM,DL,DB,DG={};DM=DL=0;DG.left=DG.top=DG.width=DG.height=0;if(DF.isEmpty()){var DK=DF.domNode.offsetWidth,DE=DF.domNode.offsetHeight;switch(DJ){case AY.GM_ROW_HEADER:DG.height=DE;break;case AY.GM_COL_HEADER:DG.width=DK;break;case AY.GM_YAXIS:DG.height=DE;break;case AY.GM_XAXIS:DG.top=DE;DG.width=DK;break;case AY.GM_MINI_CHART:DG.width=DK;DG.height=DE;break;case AY.GM_YAXIS2:DG.height=DE;DG.left=DK;break;case AY.GM_XAXIS2:DG.width=DK;break;}return DG;}switch(DJ){case AY.GM_ROW_HEADER:DB=DF.domRowHeader;break;case AY.GM_COL_HEADER:DB=DF.domColHeader;break;case AY.GM_YAXIS:DB=DF.domYAxis;break;case AY.GM_XAXIS:DB=DF.domXAxis;break;case AY.GM_MINI_CHART:DB=DF.domGM;break;case AY.GM_YAXIS2:DB=DF.domYAxis2;break;case AY.GM_XAXIS2:DB=DF.domXAxis2;break;}var DI=function(DO){var DN=parseFloat(DO);DN=isNaN(DN)?0:DN;return Math.floor(DN+0.5);};if(DB){if(DJ===AY.GM_XAXIS2&&DF.domColHeader){DM=DI(DF.domColHeader.style.left);}DG.left=DI(DB.style.left)+DM;DG.top=DI(DB.style.top)+DL;DG.width=DI(DB.style.width);DG.height=DI(DB.style.height);}else{if(DJ===AY.GM_XAXIS2){DG.left=DF.offsetX;DG.top=DF.offsetY;DG.width=DF.GMW;DG.height=0;}}if(DH){if(DJ===AY.GM_COL_HEADER){var DA=DF.colHeaderHArr,C9=0;var DD;for(DD=0;DA&&DD<DA.length;DD++){C9+=DA[DD];}DG.height=C9;DG.width+=DI(DF.colTitleW);DG.left-=DI(DF.colTitleW);}else{if(DJ===AY.GM_ROW_HEADER){DG.top-=DI(DF.rowTitleH);DG.height+=DF.actualHeight-DG.top;}else{if(DJ===AY.GM_YAXIS){var DC=this.getComponentBBox(DF,AY.GM_COL_HEADER,true);DG.top=DC.height;DG.height=DF.actualHeight-DG.top;}}}}return DG;},getOppositeZoneID:function B2(DA){var C9=null;switch(DA){case AY.GM_XAXIS:C9=AY.GM_XAXIS2;break;case AY.GM_XAXIS2:C9=AY.GM_XAXIS;break;case AY.GM_YAXIS:C9=AY.GM_YAXIS2;break;case AY.GM_YAXIS2:C9=AY.GM_YAXIS;break;}return C9;},isZoneOnGraphDropAllowed:function Cr(C9,DG,DJ){var DK=DJ.dropZonesOnGraph[C9],DH=DK.zoneModel,DM=DG.item,DD=this.getOppositeZoneID(C9),DI=this.getZoneItems(DD,DJ,true),DA=0,DL=n(DJ),DF,DE;if(DL.isGraphDroppingAllowed(DH,DG.src,DG.item)){if(DL.isAttrCategory(DM)){}else{if(DL.isMetric(DM)){if(DI&&DI.length>0&&DL.isAttrCategory(DI[0])){return false;}if(DG.src!==C4.VIZ){for(DF in DJ.dropZonesOnGraph){var DC=this.hasMetricInGraphZone(DF,DJ,DG);if(DF!==C9&&DC){DA++;}}if(DA>=2){return false;}}if(DL.isMetricZone(DH.id)&&DI.length>0){var DN=this.getDropZoneModelByCtlType(this.isWhichAxis(C9)==="x"?AY.GM_ROW_HEADER:AY.GM_COL_HEADER,DJ),DB=false;for(DE=0;DE<DN.items.length;DE++){if(DL.isMetricName(DN.items[DE])){DB=true;}}if(DB){if(DL.isMetric(DI[0])&&DM.zone!==DI[0].zone){return false;}}}}}return true;}return false;},getDropZoneIdByCtlType:function J(C9){var DA=null;if(C9===AY.GM_ROW_HEADER){DA=Cq.Rows;}else{if(C9===AY.GM_COL_HEADER){DA=Cq.Columns;}else{if(C9===AY.GM_XAXIS||C9===AY.GM_XAXIS2){DA=Cq.XAxis;}else{if(C9===AY.GM_YAXIS||C9===AY.GM_YAXIS2){DA=Cq.YAxis;}}}}return DA;},getDropZoneModelByCtlType:function AM(DA,C9){var DB=this.getDropZoneIdByCtlType(DA);return this.getZoneModelByZoneId(DB,C9);},getZoneModelByZoneId:function Bw(DB,C9){var DA=n(C9);return DA&&DA.getZoneModelByZoneId(DB);},hasMetricInGraphZone:function Bv(DF,C9,DG){var DA=this.getZoneItems(DF,C9,true),DD=DA.length,DC,DB=n(C9);if(DD<=0){return false;}if(DG.item&&(DG.src===C4.VIZ_EDITOR||DG.src===C4.VIZ)){var DE=Cc.find(DA,"did",DG.item.did);if(DE>=0){DA.splice(DE,1);}}for(DC=0;DC<DA.length;DC++){if(DB.isMetric(DA[DC])){return true;}}return false;},getDropZoneDirection:function AL(DA){var C9=null;if(DA===AY.GM_COL_HEADER||DA===AY.GM_XAXIS||DA===AY.GM_XAXIS2){C9="H";}else{if(DA===AY.GM_ROW_HEADER||DA===AY.GM_YAXIS||DA===AY.GM_YAXIS2){C9="V";}}return C9;},isWhichAxis:function l(DA){var C9=null;if(DA===AY.GM_XAXIS||DA===AY.GM_XAXIS2){C9="x";}else{if(DA===AY.GM_YAXIS||DA===AY.GM_YAXIS2){C9="y";}}return C9;},isAxisPrimary:function A(DA){var C9=null;if(DA===AY.GM_XAXIS||DA===AY.GM_YAXIS){C9=true;}else{if(DA===AY.GM_XAXIS2||DA===AY.GM_YAXIS2){C9=false;}}return C9;},getMetricIDAndDZIdxFromAxisIdx:function AA(C9,DG,DJ,DF,DP){var DA=DF.GMController,DH=this.isWhichAxis(C9)==="x"?DA.isXDualAxis:DA.isYDualAxis,DI,DM,DN=this.getZoneItems(C9,DF),DT,DE,DD;var DR=DA.shallWeUseGroupInfo,DK=DA.hasGroupInfoStored();if(DR){DD=DK.gi;if(DG>=0&&DG<DD.length){DE=DD[DG];DM=DE.length===2&&(DJ?DE[0]:DE[1]);}DI=Cc.find(DN,"did",DM);}else{if(DH){if(!DR){var DC=DJ?DA.getPrimaryMetrics():DA.getSecondaryMetrics(),DO=DA.model.getMetricIds();if(DG>=0&&DG<DC.length){DI=DC[DG];DM=DO[DI];}}}else{DI=DG;var DS={x:DA.getMetricsOnPrimaryXAxis,x2:DA.getMetricsOnSecondaryXAxis,y:DA.getMetricsOnPrimaryYAxis,y2:DA.getMetricsOnSecondaryYAxis};var DQ=DS[C9];if(DQ&&DQ.call(DA).length===0){DM=A8;}else{if(DG>=0&&DG<DN.length){DM=DN[DI].did;}}}}DT={metricID:DM,dzIndex:DI};var DB=[],DL=0;if(DP){if(DD){if(!DJ){DB[DL++]=DE[0];}if(DG-1>=0){DB[DL++]=DD[DG-1][1];DB[DL++]=DD[DG-1][0];}DT.prevMetricDZIdx=-1;for(DL=0;DL<DB.length;DL++){if(DB[DL]!==A8){DT.prevMetricDZIdx=Cc.find(DN,"did",DB[DL]);break;}}}else{DT.prevMetricDZIdx=DG;}}return DT;},getDropZonesOnGraph:function CR(C9,DF){var DC=C9.src.data,DI=DC.item,DJ=n(DF),DG,DH,DD,DE=this;var DA=[];if(DJ.isAttrCategory(DI)){DA=[AY.GM_ROW_HEADER,AY.GM_COL_HEADER];var DB=function(DK,DM,DL){if(DJ.isAttrCategoryZone(DK)){DA.push(DM);}else{if(DJ.isMetricZone(DK)){if(DE.getZoneItems(DM,DF,true).length>0){DA.push(DM);}if(DE.getZoneItems(DL,DF,true).length>0){DA.push(DL);}}else{DA.push(DM);}}};DB(Cq.XAxis,AY.GM_XAXIS,AY.GM_XAXIS2);DB(Cq.YAxis,AY.GM_YAXIS,AY.GM_YAXIS2);}else{if(DJ.isMetric(DI)){DA=[AY.GM_XAXIS,AY.GM_YAXIS,AY.GM_XAXIS2,AY.GM_YAXIS2];}}DF.dropZonesOnGraph={};for(DG in DA){DD=DA[DG];DH={zoneModel:this.getDropZoneModelByCtlType(DD,DF),direction:this.getDropZoneDirection(DD,DF)};DF.dropZonesOnGraph[DD]=DH;}for(DD in DF.dropZonesOnGraph){if(!this.isZoneOnGraphDropAllowed(DD,DC,DF)){delete DF.dropZonesOnGraph[DD];}}},calculateDropZoneOnGraphRange:function Al(DF,DB){if(!DF.dropZonesOnGraph){this.getDropZonesOnGraph(DB,DF);}var DY=this,DM=Object.keys(DF.dropZonesOnGraph),DL=DF.actualWidth,DU=DF.actualHeight,DW=DY.getComponentBBox(DF,AY.GM_MINI_CHART),DA=DY.getComponentBBox(DF,AY.GM_ROW_HEADER),DT=DY.getComponentBBox(DF,AY.GM_YAXIS),DN=DY.getComponentBBox(DF,AY.GM_COL_HEADER,true),DG=DY.getComponentBBox(DF,AY.GM_XAXIS2),DR={x:DW.left+0.75*DW.width,y:DW.top+0.25*DW.height},DS=DM.length,DE=DB.src.data,C9=DE.item,DP=n(DF),DQ=DY.getZoneItems(DF.currEnteredDropZoneID,DF);var DJ=function(DZ){return DY.getDropZoneModelByCtlType(DZ,DF).items.length===0;},DV=false;if(!DQ&&DP.isAttrCategory(C9)&&DJ(AY.GM_YAXIS)){DV=true;}if(DF.dropZonesOnGraph[AY.GM_ROW_HEADER]){DM.splice(DM.indexOf(AY.GM_ROW_HEADER),1);DS--;if(DV){delete DF.dropZonesOnGraph[AY.GM_ROW_HEADER];}else{if(DA.width===0){if(DW.left<=1){DA.width+=30;DW.left+=30;DW.width-=30;}else{if(DT.width>0){var DH=Math.min(30,0.5*DT.width);DA.width+=DH;DT.left+=DH;DT.width-=DH;}}}DF.dropZonesOnGraph[AY.GM_ROW_HEADER].areaCoords=[[0,DG.top,DA.width,DG.top,DA.width,DU,0,DU]];}}if(DF.dropZonesOnGraph[AY.GM_COL_HEADER]){DM.splice(DM.indexOf(AY.GM_COL_HEADER),1);DS--;if(DN.height===0){if(DW.top>1){DN.height+=DW.top;DG.top+=DW.top;}else{DN.height+=30;DW.top+=30;DW.height-=30;DG.top+=30;}}DF.dropZonesOnGraph[AY.GM_COL_HEADER].areaCoords=[[0,0,DL,0,DL,DG.top,0,DG.top]];}var DX=[DW.left,DU,DW.left,DW.top+DW.height,DW.left+DW.width,DW.top+DW.height,DW.left+DW.width,DU],DD=[DA.width,DW.top,DW.left,DW.top,DW.left,DU,DA.width,DU],DK=[DW.left,DG.top,DW.left+DW.width,DG.top,DW.left+DW.width,DW.top,DW.left,DW.top],DO=[DW.left+DW.width,DG.top,DL,DG.top,DL,DU,DW.left+DW.width,DU],DI=[DA.width,DG.top,DW.left,DG.top,DW.left,DW.top,DA.width,DW.top];switch(DS){case 4:DF.dropZonesOnGraph[AY.GM_XAXIS].areaCoords=[DX,[DW.left,DW.top+DW.height,DR.x,DR.y,DW.left+DW.width,DW.top+DW.height]];DF.dropZonesOnGraph[AY.GM_YAXIS].areaCoords=[DD,[DW.left,DW.top,DR.x,DR.y,DW.left,DW.top+DW.height]];DF.dropZonesOnGraph[AY.GM_XAXIS2].areaCoords=[DK,[DW.left,DW.top,DR.x,DR.y,DW.left+DW.width,DW.top]];DF.dropZonesOnGraph[AY.GM_YAXIS2].areaCoords=[DO,[DW.left+DW.width,DW.top,DR.x,DR.y,DW.left+DW.width,DW.top+DW.height]];break;case 3:if(DM.indexOf(AY.GM_XAXIS2)<0){DR={x:DW.left+0.75*DW.width,y:DW.top+0.75*DW.height};DF.dropZonesOnGraph[AY.GM_XAXIS].areaCoords=[DX,[DW.left,DW.top+DW.height,DR.x,DR.y,DW.left+DW.width,DW.top+DW.height]];DF.dropZonesOnGraph[AY.GM_YAXIS].areaCoords=[DD,[DW.left,DW.top,DR.x,DW.top,DR.x,DR.y,DW.left,DW.top+DW.height],[DW.left,DG.top,DR.x,DG.top,DR.x,DW.top,DW.left,DW.top]];DF.dropZonesOnGraph[AY.GM_YAXIS].coordsTransferMap={2:{y:DW.top+1}};DF.dropZonesOnGraph[AY.GM_YAXIS2].areaCoords=[DO,[DR.x,DR.y,DR.x,DW.top,DW.left+DW.width,DW.top,DW.left+DW.width,DW.top+DW.height],[DR.x,DG.top,DW.left+DW.width,DG.top,DW.left+DW.width,DW.top,DR.x,DW.top]];DF.dropZonesOnGraph[AY.GM_YAXIS2].coordsTransferMap={2:{y:DW.top+1}};}else{if(DM.indexOf(AY.GM_YAXIS2)<0){DR={x:DW.left+0.25*DW.width,y:DW.top+0.25*DW.height};DF.dropZonesOnGraph[AY.GM_XAXIS].areaCoords=[DX,[DW.left,DW.top+DW.height,DR.x,DR.y,DW.left+DW.width,DR.y,DW.left+DW.width,DW.top+DW.height],[DW.left+DW.width,DR.y,DL,DR.y,DL,DU,DW.left+DW.width,DU]];DF.dropZonesOnGraph[AY.GM_XAXIS].coordsTransferMap={2:{x:DW.left+DW.width-1}};DF.dropZonesOnGraph[AY.GM_YAXIS].areaCoords=[DD,[DW.left,DW.top,DR.x,DR.y,DW.left,DW.top+DW.height]];DF.dropZonesOnGraph[AY.GM_XAXIS2].areaCoords=[DK,[DW.left,DW.top,DR.x,DR.y,DW.left+DW.width,DR.y,DW.left+DW.width,DW.top],[DW.left+DW.width,DR.y,DL,DR.y,DL,DG.top,DW.left+DW.width,DG.top]];DF.dropZonesOnGraph[AY.GM_XAXIS2].coordsTransferMap={2:{x:DW.left+DW.width-1}};}}if((DM.indexOf(AY.GM_XAXIS2)<0||DM.indexOf(AY.GM_YAXIS2)<0)){break;}break;case 2:var DC=this.isWhichAxis(DM[0])!==this.isWhichAxis((DM[1]));if(!DC){if(DM.indexOf(AY.GM_YAXIS)>=0){DF.dropZonesOnGraph[AY.GM_YAXIS].areaCoords=[[DA.width,DW.top,DR.x,DW.top,DR.x,DW.top+DW.height,DA.width,DW.top+DW.height],[DA.width,DW.top+DW.height,DR.x,DW.top+DW.height,DR.x,DU,DA.width,DU],[DA.width,DG.top,DR.x,DG.top,DR.x,DW.top,DA.width,DW.top]];DF.dropZonesOnGraph[AY.GM_YAXIS].coordsTransferMap={1:{y:DW.top+DW.height-1},2:{y:DW.top+1}};DF.dropZonesOnGraph[AY.GM_YAXIS2].areaCoords=[[DR.x,DW.top,DR.x,DW.top+DW.height,DL,DW.top+DW.height,DL,DW.top],[DR.x,DW.top+DW.height,DR.x,DU,DL,DU,DL,DW.top+DW.height],[DR.x,DG.top,DR.x,DW.top,DL,DW.top,DL,DG.top]];DF.dropZonesOnGraph[AY.GM_YAXIS2].coordsTransferMap={1:{y:DW.top+DW.height-1},2:{y:DW.top+1}};}else{if(DM.indexOf(AY.GM_XAXIS)>=0){DF.dropZonesOnGraph[AY.GM_XAXIS].areaCoords=[[DW.left,DR.y,DL,DR.y,DL,DU,DW.left,DU],[DA.width,DR.y,DW.left,DR.y,DW.left,DU,DA.width,DU]];DF.dropZonesOnGraph[AY.GM_XAXIS].coordsTransferMap={1:{x:DW.left+1}};DF.dropZonesOnGraph[AY.GM_XAXIS2].areaCoords=[[DW.left,DG.top,DL,DG.top,DL,DR.y,DW.left,DR.y],[DA.width,DG.top,DW.left,DG.top,DW.left,DR.y,DA.width,DR.y]];DF.dropZonesOnGraph[AY.GM_XAXIS2].coordsTransferMap={1:{x:DW.left+1}};}}}else{if(DM.indexOf(AY.GM_XAXIS)>=0&&DM.indexOf(AY.GM_YAXIS)>=0){DF.dropZonesOnGraph[AY.GM_XAXIS].areaCoords=[DX,DO,[DW.left,DW.top+DW.height,DW.left+DW.width,DW.top,DW.left+DW.width,DW.top+DW.height]];DF.dropZonesOnGraph[AY.GM_YAXIS].areaCoords=[DD,DK,[DW.left,DW.top,DW.left+DW.width,DW.top,DW.left,DW.top+DW.height]];if(DV){DF.dropZonesOnGraph[AY.GM_YAXIS].areaCoords.push([0,DG.top,DA.width,DG.top,DA.width,DW.top+DW.height,0,DW.top+DW.height]);DF.dropZonesOnGraph[AY.GM_YAXIS].areaCoords.push([0,DW.top+DW.height,DA.width,DW.top+DW.height,DA.width,DU,0,DU]);DF.dropZonesOnGraph[AY.GM_YAXIS].coordsTransferMap={3:{x:DW.left+1},4:{x:DW.left+1,y:DW.top+DW.height-1}};}}else{if(DM.indexOf(AY.GM_XAXIS2)>=0&&DM.indexOf(AY.GM_YAXIS2)>=0){DF.dropZonesOnGraph[AY.GM_XAXIS2].areaCoords=[DD,DK,[DW.left,DW.top,DW.left+DW.width,DW.top,DW.left,DW.top+DW.height]];DF.dropZonesOnGraph[AY.GM_YAXIS2].areaCoords=[DX,DO,[DW.left,DW.top+DW.height,DW.left+DW.width,DW.top,DW.left+DW.width,DW.top+DW.height]];if(!(DM.indexOf(AY.GM_XAXIS2)<0||DM.indexOf(AY.GM_YAXIS2)<0)){if(C9.ax===0&&C9.zone===4){DF.dropZonesOnGraph[AY.GM_YAXIS].areaCoords=[DD,[DW.left,DW.top,DR.x,DR.y,DW.left,DW.top+DW.height]];}else{if(C9.ax===0&&C9.zone===3){DF.dropZonesOnGraph[AY.GM_XAXIS].areaCoords=[DX,[DW.left,DW.top+DW.height,DR.x,DR.y,DW.left+DW.width,DW.top+DW.height]];}else{if(C9.ax===1&&C9.zone===4){DF.dropZonesOnGraph[AY.GM_YAXIS].areaCoords=[DD,[DW.left,DW.top,DR.x,DR.y,DW.left,DW.top+DW.height]];}else{if(C9.ax===1&&C9.zone===3){DF.dropZonesOnGraph[AY.GM_XAXIS2].areaCoords=[DK,[DW.left,DW.top,DR.x,DR.y,DW.left+DW.width,DW.top]];}}}}}}else{if(DM.indexOf(AY.GM_XAXIS)>=0&&DM.indexOf(AY.GM_YAXIS2)>=0){DF.dropZonesOnGraph[AY.GM_XAXIS].areaCoords=[DX,DD,[DW.left,DW.top,DW.left+DW.width,DW.top+DW.height,DW.left,DW.top+DW.height]];DF.dropZonesOnGraph[AY.GM_YAXIS2].areaCoords=[DK,DO,[DW.left,DW.top,DW.left+DW.width,DW.top,DW.left+DW.width,DW.top+DW.height]];}else{if(DM.indexOf(AY.GM_XAXIS2)>=0&&DM.indexOf(AY.GM_YAXIS)>=0){DF.dropZonesOnGraph[AY.GM_YAXIS].areaCoords=[DX,DD,[DW.left,DW.top,DW.left+DW.width,DW.top+DW.height,DW.left,DW.top+DW.height]];DF.dropZonesOnGraph[AY.GM_XAXIS2].areaCoords=[DK,DO,[DW.left,DW.top,DW.left+DW.width,DW.top,DW.left+DW.width,DW.top+DW.height]];}}}}}break;case 1:DF.dropZonesOnGraph[DM[0]].areaCoords=[[DA.width,DN.height,DL,DN.height,DL,DU,DA.width,DU]];break;}if(DF.extraTitleDiv&&DM.indexOf(AY.GM_YAXIS)>=0){DD=DF.dropZonesOnGraph[AY.GM_YAXIS].areaCoords;DD=DD.push(DI);}},getDropAvatarIcon:function AR(DB){var DC=DB.src.data,DA,C9=DB.tgtData;if(C9){if(DC.src===C4.DATASETS||DC.src===C4.ALL_OBJECT_LIST){if(C9.edge===r){DA="replace";}else{DA="add";}}else{if(DC.src===C4.VIZ_EDITOR||DC.src===C4.VIZ){if(C9.edge===r){DA="swap";}else{DA="move";}}}}else{if(DB.isDragingMultipleObj){DA="add";}}return DA;},drawReplaceHighlight:function Av(DA,DP,DD,DO,DL,DG,DF){var DB=DA.tgtData,DK=this.getBackGroundColor(DF),DJ=DF.currEnteredDropZoneID,DE;DD=Math.max(DD,0);DO=Math.max(DO,0);var DI=BT.position(DF.domMainContainer),DC=DF.dndTooltip;DB.tooltipAnchorPos={x:DD+DI.x,y:DO+DI.y,w:DL,h:DG};var DH;if(DB.isReplaceAll||(DB.highlightNodes&&DB.highlightNodes.length>1)){var C9=this.getZoneItems(DF.currEnteredDropZoneID,DF),DM=C9.length;if(DM===1){DH=mstrmojo.desc(14438,"Replace")+" "+C9[0].n;}else{if(DM>1){DH=mstrmojo.desc(14439,"Replace All")+"( "+DM+"): ";for(DE=0;DE<DM;DE++){DH+=C9[DE].n;if(DE<DM-1){DH+=", ";}}}}}else{var DN=(DB.zoneSource&&DB.zoneSource.zoneModel.items[DB.tgtIdx])||(DB.highlightNodes&&DB.highlightNodes[0]&&DB.highlightNodes[0].item);DH=mstrmojo.desc(14438,"Replace")+" "+DN.n;}DB.tooltipText=DH;DB.placementOrder=[DC.PLACEMENT_ABOVE];DB.popupNodeOffset=5;DP.save();DP.beginPath();DP.rect(DD,DO,DL,DG);DP.fillStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#bce8ff":"#20516b";DP.globalAlpha=0.4;DP.fill();DP.lineWidth=2;DP.strokeStyle=DK;DP.beginPath();DP.moveTo(DD,DO);if(DJ===AY.GM_XAXIS||DJ===AY.GM_XAXIS2||DJ===AY.GM_COL_HEADER){DP.lineTo(DD+DL,DO);DP.moveTo(DD,DO+DG);}else{if(DJ===AY.GM_YAXIS||DJ===AY.GM_YAXIS2||DJ===AY.GM_ROW_HEADER){DP.lineTo(DD,DO+DG);DP.moveTo(DD+DL,DO);}}DP.lineTo(DD+DL,DO+DG);DP.stroke();DP.strokeStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#e4f6ff":"#1f333d";DP.globalAlpha=1;DP.stroke();DP.strokeStyle="#34abeb";DP.globalAlpha=1;if(DJ===AY.GM_XAXIS||DJ===AY.GM_XAXIS2||DJ===AY.GM_COL_HEADER){Cl.drawDashLine(DP,DD,DO,DD+DL,DO,2,2);Cl.drawDashLine(DP,DD,DO+DG,DD+DL,DO+DG,2,2);}else{if(DJ===AY.GM_YAXIS||DJ===AY.GM_YAXIS2||DJ===AY.GM_ROW_HEADER){Cl.drawDashLine(DP,DD,DO,DD,DO+DG,2,2);Cl.drawDashLine(DP,DD+DL,DO,DD+DL,DO+DG,2,2);}}DP.restore();},showDndArrow:function AN(DA,DG,C9,DI,DC){var DD=BT.position(DG.canvas),DE=DC.currEnteredDropZoneID,DF,DB,DH;DF=C9-q+DD.x;DB=DI-BS+DD.y;if(DE===AY.GM_XAXIS){DH="gm-dnd-arrow below";}else{if(DE===AY.GM_XAXIS2){DH="gm-dnd-arrow above";}else{if(DE===AY.GM_YAXIS){DH="gm-dnd-arrow left";}else{if(DE===AY.GM_YAXIS2){DH="gm-dnd-arrow right";}}}}if(DC.dndArrow){DC.dndArrow.className=DH;DC.dndArrow.style.top=DB+"px";DC.dndArrow.style.left=DF+"px";DC.dndArrow.style.display="block";}},hideDndArrow:function C6(C9){if(C9.dndArrow){C9.dndArrow.style.display="none";}},drawAddHighlight:function u(DB,DU,Da,DC,DZ,DA,DG,DY){var Dc=DB.tgtData,DI=Dc&&Dc.edge,DF=DB.src.data;DY=DY||{x:0,y:0,w:DG.actualWidth,h:DG.actualHeight};var DR=DY.x,DJ=DY.y,Db=DY.w,DS=DY.h,DM=(Da===DZ),Dd=2,DK=-(Dd-1),DN=function(Df,Dg,De){return Math.max(Dg+BL,Math.min(Df,De-BL-DK));};if(DM){Da=DN(Da,DR,Db);DZ=DN(DZ,DR,Db);}else{DC=DN(DC,DJ,DS);DA=DN(DA,DJ,DS);}var DT=DM?Da-BL:Da,DQ=DM?DC:DC-BL,DO=DM?BX:DZ-Da,DX=DM?DA-DC:BX;var DP=BT.position(DU.canvas),C9=DG.dndTooltip,DL=DT+DP.x,DE=DQ+DP.y,DH=DF.items,DW=DH.length||0,DD=mstrmojo.desc(531,"Add");for(var DV=0;DV<DW;DV++){if(DV===0){DD+=" "+DH[DV].n;}else{if(DV===DW-1){DD+=" "+mstrmojo.desc(14450,"add")+" "+DH[DV].n;}else{DD+=", "+DH[DV].n;}}}Dc.tooltipText=DD;Dc.tooltipAnchorPos={x:DL,y:DE,w:DO,h:DX};Dc.placementOrder=[C9.PLACEMENT_ABOVE];if(!Dc.isAttr&&(DI===BW||DI===C)){Dc.popupNodeOffset=5;}else{Dc.popupNodeOffset=DM?-7:-3;}DU.save();DU.beginPath();DU.rect(DT,DQ,DO,DX);DU.fillStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#bce8ff":"#20516b";DU.globalAlpha=0.4;DU.fill();DU.lineWidth=2;DU.strokeStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#e4f6ff":"#1f333d";DU.globalAlpha=1;DU.beginPath();DU.moveTo(Da,DC);DU.lineTo(DZ,DA);DU.stroke();DU.strokeStyle="#34abeb";Cl.drawDashLine(DU,Da,DC,DZ,DA,2,2);DU.restore();},drawGridScale:function A2(DA,DL,DM,DJ,DI,DO,C9,DB){var DQ=DA.tgtData,DE=DQ&&DQ.edge,DF=DQ.highlightType,DD=this.getBackGroundColor(DB),DP=DB.currEnteredDropZoneID;DM=Math.max(DM,0);DJ=Math.max(DJ,0);DL.save();DL.lineWidth=2;if(DE===r){DL.strokeStyle=DD;DL.beginPath();DL.moveTo(DM,DJ);if(DP===AY.GM_XAXIS||DP===AY.GM_XAXIS2||DP===AY.GM_COL_HEADER){DL.lineTo(DM+DI,DJ);DL.moveTo(DM,DJ+DO);}else{if(DP===AY.GM_YAXIS||DP===AY.GM_YAXIS2||DP===AY.GM_ROW_HEADER){DL.lineTo(DM,DJ+DO);DL.moveTo(DM+DI,DJ);}}DL.lineTo(DM+DI,DJ+DO);DL.stroke();DL.strokeStyle="#34abeb";if(DP===AY.GM_XAXIS||DP===AY.GM_XAXIS2||DP===AY.GM_COL_HEADER){Cl.drawDashLine(DL,DM,DJ,DM+DI,DJ,2,2);Cl.drawDashLine(DL,DM,DJ+DO,DM+DI,DJ+DO,2,2);}else{if(DP===AY.GM_YAXIS||DP===AY.GM_YAXIS2||DP===AY.GM_ROW_HEADER){Cl.drawDashLine(DL,DM,DJ,DM,DJ+DO,2,2);Cl.drawDashLine(DL,DM+DI,DJ,DM+DI,DJ+DO,2,2);}}DL.beginPath();DL.rect(DM,DJ,DI,DO);DL.fillStyle="#34abeb";DL.globalAlpha=0.2;DL.fill();}else{DL.strokeStyle="#1BA11B";DL.beginPath();DL.rect(DM,DJ,DI,DO);DL.stroke();}DL.lineWidth=1;DL.beginPath();var DH,DG,DN,DK=6,DC=10;if(DP===AY.GM_XAXIS||DP===AY.GM_XAXIS2||DP===AY.GM_COL_HEADER){if(C9){if(DF!==C3){for(DH=DM+45;DH<(DM+DI);DH+=45){DL.moveTo(DH,DJ);DL.lineTo(DH,DJ+DO);}}}else{if(DF!==C3){if(DP===AY.GM_XAXIS){for(DN=1;12*DN<DI;DN++){DH=DM+12*DN;DL.moveTo(DH,DJ);if(DN%2===1){DL.lineTo(DH,DJ+DK);}else{DL.lineTo(DH,DJ+DC);}}}else{for(DN=1;12*DN<DI;DN++){DH=DM+12*DN;if(DN%2===1){DL.moveTo(DH,DJ+DO-DK);}else{DL.moveTo(DH,DJ+DO-DC);}DL.lineTo(DH,DJ+DO);}}}}}else{if(DP===AY.GM_YAXIS||DP===AY.GM_YAXIS2||DP===AY.GM_ROW_HEADER){if(C9){if(DF!==C3){for(DG=DJ+45;DG<DJ+DO;DG+=45){DL.moveTo(DM,DG);DL.lineTo(DM+DI,DG);}}}else{if(DF!==C3){if(DP===AY.GM_YAXIS){for(DN=1;12*DN<DO;DN++){DG=DJ+12*DN;if(DN%2===1){DL.moveTo(DM+DI-DK,DG);}else{DL.moveTo(DM+DI-DC,DG);}DL.lineTo(DM+DI,DG);}}else{for(DN=1;12*DN<DO;DN++){DG=DJ+12*DN;DL.moveTo(DM,DG);if(DN%2===1){DL.lineTo(DM+DK,DG);}else{DL.lineTo(DM+DC,DG);}}}}}}}DL.stroke();DL.restore();},drawRoundRect:function BV(DB,C9,DE,DA,DC,DD){DD=Math.min(DA/2,DC/2,DD||5);DB.beginPath();DB.moveTo(C9+DD,DE);DB.arcTo(C9+DA,DE,C9+DA,DE+DC,DD);DB.arcTo(C9+DA,DE+DC,C9,DE+DC,DD);DB.arcTo(C9,DE+DC,C9,DE,DD);DB.arcTo(C9,DE,C9+DA,DE,DD);DB.closePath();DB.stroke();},drawHighlightOnWholeAxis:function O(DA,DJ,DG,DF,DK,DC,DH){var DD=DA.tgtData,DB=DD.edge,DE=DD.highlightType,C9=2,DI=-(C9-2);if(DE===B9){if(DG===AY.GM_XAXIS){this.drawReplaceHighlight(DA,DJ,DF.left+d,DK.top+d,DF.width-2*DI,DK.height-2*DI,DH);}else{if(DG===AY.GM_XAXIS2){this.drawReplaceHighlight(DA,DJ,DF.left+d,DK.top+d,DF.width-2*DI,DK.height-2*DI,DH);}else{if(DG===AY.GM_YAXIS){this.drawReplaceHighlight(DA,DJ,DK.left+d,DF.top+d,DK.width-2*DI,DF.height-2*DI,DH);}else{if(DG===AY.GM_YAXIS2){this.drawReplaceHighlight(DA,DJ,DK.left+d,DF.top+d,DK.width-2*DI,DF.height-2*DI,DH);}}}}}else{if(DE===C3){if(DB===At&&DC){if(DG===AY.GM_XAXIS){this.drawAddHighlight(DA,DJ,DK.left+d,DK.top+d,DK.left+DK.width,DK.top+d,DH);}else{if(DG===AY.GM_YAXIS){this.drawAddHighlight(DA,DJ,DK.left+d+DK.width,DK.top+d,DK.left+d+DK.width,DK.top+d+DK.height,DH);}}}else{this.drawReplaceHighlight(DA,DJ,DK.left+d,DK.top+d,DK.width-2*DI,DK.height-2*DI,DH);}}else{if(DG===AY.GM_XAXIS){this.drawAddHighlight(DA,DJ,DF.left+d,DK.top+d,DF.left+d+DF.width-2*DI,DK.top+d,DH);}else{if(DG===AY.GM_XAXIS2){this.drawAddHighlight(DA,DJ,DF.left+d,DK.top+DK.height+d,DF.left+d+DF.width-2*DI,DK.top+DK.height+d,DH);}else{if(DG===AY.GM_YAXIS){this.drawAddHighlight(DA,DJ,DK.left+DK.width+d,DF.top+d,DK.left+DK.width+d,DF.top+d+DF.height-2*DI,DH);}else{if(DG===AY.GM_YAXIS2){this.drawAddHighlight(DA,DJ,DK.left+d,DF.top+d,DK.left+d,DF.top+d+DF.height-2*DI,DH);}}}}}}},drawHighlightOnHeaders:function CQ(DA,DK,DG,DL,DI){var DD=DA.tgtData,DB=DD.edge,DC=DD.tgtIdx,C9=2,DJ=-(C9-2),DF,DE,DH=0;if(DI.currEnteredDropZoneID===AY.GM_COL_HEADER){DF=DI.colHeaderHArr;}else{if(DI.currEnteredDropZoneID===AY.GM_ROW_HEADER){DF=DI.rowHeaderWArr;}}if(DC===0&&DB===BW){if(DG===AY.GM_COL_HEADER){this.drawAddHighlight(DA,DK,DL.left+d,DL.top+d,DL.left+d+DL.width-2*DJ,DL.top+d,DI);}else{if(DG===AY.GM_ROW_HEADER){this.drawAddHighlight(DA,DK,DL.left+d,DL.top+d,DL.left+d,DL.top+d+DL.height-2*DJ,DI);}}}else{if(DC===DF.length-1&&DB===C&&DG===AY.GM_ROW_HEADER){this.drawAddHighlight(DA,DK,DL.left+DL.width+d,DL.top+d,DL.left+DL.width+d,DL.top+d+DL.height,DI);}else{if(DB===r){for(DE=0;DE<DC;DE++){DH+=DF[DE]+1;}DH-=1;if(DG===AY.GM_COL_HEADER){this.drawReplaceHighlight(DA,DK,DL.left+d,DL.top+d+DH,DL.width-2*DJ,DF[DC]-2*DJ,DI);}else{if(DG===AY.GM_ROW_HEADER){this.drawReplaceHighlight(DA,DK,DL.left+d+DH,DL.top+d,DF[DC]-2*DJ,DL.height-2*DJ,DI);}}}else{for(DE=0;DE<DC;DE++){DH+=DF[DE]+1;}if(DB===C){DH+=DF[DC]+1;}DH-=1;if(DG===AY.GM_COL_HEADER){this.drawAddHighlight(DA,DK,DL.left+d,DL.top+d+DH,DL.left+d+DL.width,DL.top+d+DH,DI);}else{if(DG===AY.GM_ROW_HEADER){this.drawAddHighlight(DA,DK,DL.left+d+DH,DL.top+d,DL.left+d+DH,DL.top+d+DL.height,DI);}}}}}},updateAvatarIcon:function BG(DA,C9){var DB=DA.src.data;if(DB.setAvatarClass){DB.setAvatarClass(C9||this.getDropAvatarIcon(DA));}},onHighLightObjectChange:function(DA){if(this.fmtMode){var DB=BI,DC=[],C9;DA.identities=CP(DA.identities);Cc.forEach(DA.identities||[],function(DD){if(DB.hasOwnProperty(DD)){DC=DC.concat(DB[DD]);}});C9=CJ(this.widget.domNode,"type",DC);this.widget.clearUserSelections();this.clearSelectedTargets();this.selectTarget(C9);}},clearHighlightDropZoneOnGraph:function Cn(DD){var DB=DD.dndHighlightCanvas,C9=DB.getContext("2d");C9.clearRect(0,0,DB.width,DB.height);var DA=DD.dndHighlightNodes,DC=DD.dndTooltip;DA.toggle(false);DC.toggle(false);this.hideDndArrow(DD);},highlightDropZoneOnGraph:function B8(Dj,Db){var DF=Db.dndHighlightCanvas,DQ=DF.getContext("2d");if(!Dj.isDragingMultipleObj){var DU=Dj.tgtData,DT=DU&&DU.tgtInfo,DW=Db.currEnteredDropZoneID,Df=Dj.src.data;if(DU){var DK=DU.zonePos,DE=DT&&DT.box,DZ=BT.position(Db.domNode);if(Db.currEnteredDropZoneID===AY.GM_COL_HEADER||Db.currEnteredDropZoneID===AY.GM_ROW_HEADER){this.drawHighlightOnHeaders(Dj,DQ,DW,DK,Db);}else{if(DU.edge===r||DU.edge===At){this.drawHighlightOnWholeAxis(Dj,DQ,DW,DE,DK,Df.isAttr,Db);}else{if(DU.edge===BW||DU.edge===C){var Dg=Db.GMController,DL=Dg.hasGroupInfoStored(),DY=DL.existing&&DL.gi,DP=this.getZoneItems(Db.currEnteredDropZoneID,Db),DM=DL.existing?DY.length:DP.length,Dd=DT.axisIndex,DA=this.isAxisPrimary(DU.zoneID),DJ=DU.pivotMetricNameTo===AY.GM_COL_HEADER||DU.pivotMetricNameTo===AY.GM_ROW_HEADER,DS=this.getMetricIDAndDZIdxFromAxisIdx(Db.currEnteredDropZoneID,DU.edge===BW?DT.axisIndex-1:DT.axisIndex+1,DA,Db).metricID,DV=(DU.edge===BW&&Dd===0)||((DS===A8||DJ)&&DU.edge===BW),DI=(DU.edge===C&&Dd===DM-1)||((DS===A8||DJ)&&DU.edge===C),DD=DV||DI,DX=DD?(DP.length===1?3:5):5,DG=DD?0:2.5,DO,Dl,DN,Dk,DC,DB;if(DU.edge===BW){if(DW===AY.GM_XAXIS){DO=DE.left-DG*AJ(DE.width)+d;Dl=DK.top+d;DN=DE.left+d+(DX-DG)*AJ(DE.width);Dk=DK.top+d;}else{if(DW===AY.GM_XAXIS2){DO=DE.left-DG*AJ(DE.width)+d;Dl=DK.top+DK.height+d;DN=DE.left+(DX-DG)*AJ(DE.width)+d;Dk=DK.top+DK.height+d;}else{if(DW===AY.GM_YAXIS){DO=DK.left+DK.width+d;Dl=DE.top-DG*AJ(DE.height)+d;DN=DK.left+DK.width+d;Dk=DE.top+(DX-DG)*AJ(DE.height)+d;}else{if(DW===AY.GM_YAXIS2){DO=DK.left+d;Dl=DE.top-DG*AJ(DE.height)+d;DN=DK.left+d;Dk=DE.top+(DX-DG)*AJ(DE.height)+d;}}}}}else{if(DU.edge===C){if(DW===AY.GM_XAXIS){DO=DE.left+DE.width-(DX-DG)*AJ(DE.width)+d;Dl=DK.top+d;DN=DE.left+DE.width+DG*AJ(DE.width)+d;Dk=DK.top+d;}else{if(DW===AY.GM_XAXIS2){DO=DE.left+DE.width-(DX-DG)*AJ(DE.width)+d;Dl=DK.top+DK.height+d;DN=DE.left+DE.width+DG*AJ(DE.width)+d;Dk=DK.top+DK.height+d;}else{if(DW===AY.GM_YAXIS){DO=DK.left+DK.width+d;Dl=DE.top+DE.height-(DX-DG)*AJ(DE.height)+d;DN=DK.left+DK.width+d;Dk=DE.top+DE.height+DG*AJ(DE.height)+d;}else{if(DW===AY.GM_YAXIS2){DO=DK.left+d;Dl=DE.top+DE.height-(DX-DG)*AJ(DE.height)+d;DN=DK.left+d;Dk=DE.top+DE.height+DG*AJ(DE.height)+d;}}}}}}this.drawAddHighlight(Dj,DQ,DO,Dl,DN,Dk,Db);if(DW===AY.GM_XAXIS||DW===AY.GM_XAXIS2){DB=Dl;if(DV){DC=DO;}else{if(DI){DC=DN;}else{DC=Math.round((DO+DN)/2);}}}else{if(DW===AY.GM_YAXIS||DW===AY.GM_YAXIS2){DC=DO;if(DV){DB=Dl;}else{if(DI){DB=Dk;}else{DB=Math.round((Dl+Dk)/2);}}}}this.showDndArrow(Dj,DQ,DC,DB,Db);}}}var De=Db.dndHighlightNodes,C9=Db.dndTooltip;var DH=DU.highlightNodes,Dc=DU.tooltipText;if(DH&&DH.length>0){var Dh="gm-rotate-270",Da=DH[0].node,Di=Da&&Da.parentNode,DR=false;while(Di&&Di.classList){if(Di.classList.contains([Dh])){DR=true;break;}Di=Di.parentNode;}Dh=DR?Dh:"";De.updateNodes(DU.highlightNodes,DZ,Dh);C9.placementOrder=[C9.PLACEMENT_ABOVE];C9.popupNodeOffset=5;C9.updateContent(null,De.getBoundaryPosForAllNodes(),Dc);}else{if(DU.tooltipAnchorPos){C9.placementOrder=DU.placementOrder;C9.popupNodeOffset=DU.popupNodeOffset;C9.updateContent(null,DU.tooltipAnchorPos,Dc);}}}}},findEnteredDropZoneOnGraph:function By(C9,DH){var DE=C9.tgt.pos,DB,DA,DD=BT.position(DH.domMainContainer),DG=DE.x-DD.x,DF=DE.y-DD.y,DC=function(DM,DJ,DO){var DL=DH.dropZonesOnGraph[DM],DK=DL.areaCoords,DN=DL.coordsTransferMap,DI=function(DQ,DP){DE[DP]=DQ+DD[DP];};for(DB=0;DB<DK.length;DB++){if(CL(DK[DB],DJ,DO)){if(DN&&DN[DB]){Ax.forEach(DN[DB],DI);}return true;}}return false;};if(DH.currEnteredDropZoneID&&DH.dropZonesOnGraph[DH.currEnteredDropZoneID]){if(DC(DH.currEnteredDropZoneID,DG,DF)){return true;}}for(DA in DH.dropZonesOnGraph){if(DC(DA,DG,DF)){DH.currEnteredDropZoneID=DA;return true;}}DH.currEnteredDropZoneID=null;C9.tgtData=null;return false;},prepareDP4Axis:function(DL,C9,DG,DH){var DD=DH.GMController,DB=DD.mapFromChartToLDSIndex(DL,C9),DK=DG==="x"?DL:DB.r,DI=DG==="x"?DB.c:C9,DJ=DB.dpIdx,DC=DD.model,DE=DC.getLocalDataSet(DK,DI),DF=DE.generateDataProvider(),DA=DF[DJ];return DA;},getTgtNode4Dnd:function AU(DA,C9){return this.getTargetInfo(C9,DA&&DA.pos,true);},getZoneItems:function BA(DD,DJ,DA,DI){var DF=this.getDropZoneModelByCtlType(DD,DJ),DE=Ax.cloneArray(DF&&DF.items)||[],DL,DC,DH,DK=n(DJ);for(DC=0;DC<DE.length;DC++){if(DK.isMetricName(DE[DC])){DE.splice(DC,1);}}if(DI){for(DC=0;DC<DE.length;DC++){if(!DK.isMetric(DE[DC])){DE.splice(DC,1);}}}if(DE.length>0&&DA){if(DK.isMetric(DE[0])){var C9=DJ.GMController,DB=[],DG=[];if(DD===AY.GM_XAXIS){DB=C9.getMetricsOnPrimaryXAxis();}else{if(DD===AY.GM_YAXIS){DB=C9.getMetricsOnPrimaryYAxis();}else{if(DD===AY.GM_XAXIS2){DB=C9.getMetricsOnSecondaryXAxis();}else{if(DD===AY.GM_YAXIS2){DB=C9.getMetricsOnSecondaryYAxis();}}}}for(DC=0;DC<DB.length;DC++){DH=Cc.find(DE,"idx",DB[DC]);DL=DE[DH];DG.push(DL||{});}return DG;}if(DK.isAttrCategory(DE[0])){if(DD===AY.GM_XAXIS2||DD===AY.GM_YAXIS2){return[];}return DE;}return[];}return DE;},handleDropZoneNoChange:function I(Dj,DY,Da){var DD=n(DY),DX=DY.GMController,DL=Dj.tgtData,DG=DL.zoneSource,Dc=Dj.src.data,DC=Dc.item,Db=Dc.items,Dd=DD.getUnitIndexInZone(DG.zoneModel,DC),DE=DL.edge,Dh=DL.tgtIdx,DK=DL.tgtInfo,C9=Dj.tgt,DW=C9.pos,DV=DW.x,DU=DW.y,DI=Dd>=0,Di,DZ,Dg,DA,Df,DH,DB=this.isAxisPrimary(DY.currEnteredDropZoneID),DF=this.isWhichAxis(DY.currEnteredDropZoneID)==="x"?DX.isXDualAxis:DX.isYDualAxis;if(Db.length>1){return false;}if(DD.isMetric(DC)&&DX.shallWeUseGroupInfo){var DT=DK.axisIndex,DQ=DX.getGroupInfo(),DR=Ax.cloneArray(DQ),DP=function(Dl,Dk){for(Df=0;Df<Dk.length;Df++){DH=Dk[Df];if(DH[0]===Dl||DH[1]===Dl){return Df;}}return -1;},DM=DP(DC.did,DQ);DR=DD.fillGroupInfo(Dj,DR,DC.did,DB);if(Dc.src===C4.VIZ&&DE===At&&DM!==DT){DA=false;}else{DA=Ax.equals(DQ,DR);}}else{if(DF){var DS=DB!==Dc.isPrimary;if(DL.edge!==At||DS){DA=false;}else{DA=true;}}else{Di=Dd===Dh+1&&DL.edge===C;DZ=Dd===Dh-1&&DL.edge===BW;Dg=Dd===Dh;DA=DI&&(Dg||Di||DZ);}}if(DA){DL.edge=r;if(DY.currEnteredDropZoneID===AY.GM_COL_HEADER||DY.currEnteredDropZoneID===AY.GM_ROW_HEADER){DL.tgtIdx=Dd;}else{var De=Di?1:Dg?0:-1;if(DG.direction==="H"){DV+=De*Da;}else{DU+=De*Da;}DL.tgtInfo=this.prepare4DropZoneManipulation(DV,DU,DY,DG.direction);DL.highlightType=B9;DL.dropZoneNoChange=true;var DN=this.isAxisPrimary(DL.zoneID),DJ=this.getMetricIDAndDZIdxFromAxisIdx(DY.currEnteredDropZoneID,DL.tgtInfo.axisIndex,DN,DY),DO=DJ.dzIndex;DL.tgtIdx=DO;}}return DA;},findTargetInDropZoneOnGraph:function B5(Dj,Dd){var C9=Dj.tgt,Db=C9.pos,Df=Dj.src.data,DP=Df.item,DD=null,DS={};DD=this.getTgtNode4Dnd(C9,Dd);if(DD){DS.highlightNodes=[];DS.highlightNodes.push(DD);DS.edge=r;if(DD.dropZoneID&&DD.dropZoneID!==Dd.currEnteredDropZoneID){Dd.currEnteredDropZoneID=DD.dropZoneID;}}var DJ=Dd.dropZonesOnGraph[Dd.currEnteredDropZoneID],DN=this.getZoneItems(Dd.currEnteredDropZoneID,Dd),DG=this.getZoneItems(Dd.currEnteredDropZoneID,Dd,true),DH=this.getComponentBBox(Dd,Dd.currEnteredDropZoneID),DU=this.getComponentBBox(Dd,Dd.currEnteredDropZoneID,true),Da=Db.x,DZ=Db.y,DY=BT.position(Dd.domMainContainer),DC,Di,DL,DE=n(Dd),Dc,DO,De;Dj.tgtData=DS;DS.zonePos=DU;DS.zoneSource=DJ;DS.zoneID=Dd.currEnteredDropZoneID;if(Dd.currEnteredDropZoneID===AY.GM_COL_HEADER||Dd.currEnteredDropZoneID===AY.GM_ROW_HEADER){Da=Da-DH.left-DY.x;DZ=DZ-DH.top-DY.y;Df.isAttr=true;DS.isAttr=true;if(DD){DS.tgtIdx=DD.tgtIdx;DS.highlightType=C3;}else{DC=Dd.currEnteredDropZoneID===AY.GM_COL_HEADER?Dd.colHeaderHArr:Dd.rowHeaderWArr;if(!DC||DC.length===0){DS.tgtIdx=0;DS.edge=BW;}else{DL=Dd.currEnteredDropZoneID===AY.GM_COL_HEADER?DZ:Da;for(Di=0;Di<DC.length;Di++){if(Di===0){if(DC.length>1){if(DL<0.67*DC[Di]){DS.tgtIdx=Di;DS.edge=BW;break;}else{if(DL<DC[Di]){DS.tgtIdx=Di;DS.edge=C;break;}}}else{if(DL<0.5*DC[Di]){DS.tgtIdx=Di;DS.edge=BW;break;}else{if(DL<DC[Di]){DS.tgtIdx=Di;DS.edge=C;break;}}}}else{if(Di===DC.length-1){if(DL<0.33*DC[Di]){DS.tgtIdx=Di;DS.edge=BW;break;}else{if(Dd.currEnteredDropZoneID===AY.GM_COL_HEADER&&DL>0.67*DC[Di]&&DL<DC[Di]*1.33){DS.tgtIdx=Di;DS.edge=C;break;}else{if(Dd.currEnteredDropZoneID===AY.GM_ROW_HEADER&&DL<DC[Di]){DS.tgtIdx=Di;DS.edge=C;break;}}}}else{if(DL<0.33*DC[Di]){DS.tgtIdx=Di;DS.edge=BW;break;}else{if(DL<0.67*DC[Di]){Dj.tgtData=null;return ;}}if(DL<DC[Di]){DS.tgtIdx=Di;DS.edge=C;break;}}}DL-=DC[Di];}if(Di>=DC.length){Dj.tgtData=null;return ;}this.handleDropZoneNoChange(Dj,Dd);}}}else{var DR=this.prepare4DropZoneManipulation(Da,DZ,Dd,DJ.direction);if(!DR.process){Dj.tgtData=null;return ;}var Dh=this.isWhichAxis(Dd.currEnteredDropZoneID)==="x"?AY.GM_YAXIS:AY.GM_XAXIS,DI=this.getZoneItems(Dh,Dd,false,true),Dk=DI.length;DS.tgtIdx=0;DS.tgtInfo=DR;DS.isSideBySide=true;if(DE.isAttrCategory(DP)){if(DN.length<=0){DS.edge=At;}else{if(DE.isMetric(DN[0])){DS.edge=r;DS.highlightNodes=DR.labelNodes;DS.highlightType=C3;DS.isAttr=false;DS.isReplaceAll=true;}else{if(DE.isAttrCategory(DN[0])){DS.isAttr=true;if(DD){DS.tgtIdx=DD.dzIndex||0;DS.highlightType=C3;}else{DS.edge=At;DS.highlightType=C3;DS.tgtIdx=DN.length;}}}}Df.isAttr=true;}else{if(DE.isMetric(DP)){Dc=Dd.GMController;DO=Dc.getSplitPlottingMetrics();DS.isSideBySide=DO;if(DN.length<=0){DS.edge=At;}else{if(DE.isMetric(DN[0])){DS.isAttr=false;if(DD){DR.axisIndex=DD.axisIndex;DS.tgtIdx=this.getMetricIDAndDZIdxFromAxisIdx(Dd.currEnteredDropZoneID,DR.axisIndex,this.isAxisPrimary(Dd.currEnteredDropZoneID),Dd).dzIndex;DS.highlightType=B9;}else{if((DN.length===1&&Dk<=1)||(DN.length===2&&DG.length===1)){if(DG.length===0){DS.isSideBySide=true;DS.edge=At;}else{DS.edge=E.call(this,Da,DZ,DR,DJ.direction,false,Dd);De=Co.call(this,DR,DJ.direction,false,Dd);this.handleDropZoneNoChange(Dj,Dd,De);DS.isSideBySide=DS.edge===BW||DS.edge===C;}}else{Dc=Dd.GMController;DO=Dc.getSplitPlottingMetrics();var Dg=this.isWhichAxis(Dd.currEnteredDropZoneID)==="x",DQ=Dg?AY.GM_COL_HEADER:AY.GM_ROW_HEADER,DF=Dg?AY.GM_ROW_HEADER:AY.GM_COL_HEADER;if(DO){var DX=this.getDropZoneModelByCtlType(DF,Dd),DK=false;for(Di=0;Di<DX.items.length;Di++){if(DE.isMetricName(DX.items[Di])){DK=true;}}var DW=Dk>0&&DE.isMetric(DI[0]);if(DK&&!DW){DS.isSideBySide=true;DS.edge=At;DS.tgtIdx=DN.length;DR.axisIndex=DN.length;}else{var DA=this.isAxisPrimary(DS.zoneID),DM=this.getMetricIDAndDZIdxFromAxisIdx(Dd.currEnteredDropZoneID,DR.axisIndex,DA,Dd),DT=DM.metricID,DB=DT===A8,DV=DM.dzIndex;DS.tgtIdx=DV;if(Df.src===C4.VIZ&&!DB){DS.edge=E.call(this,Da,DZ,DR,DJ.direction,false,Dd);De=Co.call(this,DR,DJ.direction,false,Dd);if(!this.handleDropZoneNoChange(Dj,Dd,De)&&DS.edge===At){DS.pivotMetricNameTo=DE.isMetricZone(this.getDropZoneIdByCtlType(AY.GM_YAXIS))?AY.GM_XAXIS:AY.GM_YAXIS;}}else{DS.isSideBySide=true;if(DB){DS.edge=At;DV=this.getMetricIDAndDZIdxFromAxisIdx(Dd.currEnteredDropZoneID,DR.axisIndex,DA,Dd,true).prevMetricDZIdx;DS.tgtIdx=DV;}else{DS.edge=E.call(this,Da,DZ,DR,DJ.direction,true,Dd);De=Co.call(this,DR,DJ.direction,true,Dd);this.handleDropZoneNoChange(Dj,Dd,De);}}}}else{if(Df.src===C4.VIZ){DS.edge=E.call(this,Da,DZ,DR,DJ.direction,false,Dd);if(DS.edge===BW){DS.isSideBySide=true;DS.tgtIdx=0;DS.pivotMetricNameTo=DQ;}else{if(DS.edge===C){DS.isSideBySide=true;DS.tgtIdx=DN.length;DS.pivotMetricNameTo=DQ;}else{if(DS.edge===At){DS.isSideBySide=false;DS.tgtIdx=parseInt(DP.zoneIdx,10);}}}}else{DS.isSideBySide=false;DS.edge=At;DS.tgtIdx=DN.length;}}}}}else{if(DE.isAttrCategory(DN[0])){DS.edge=r;DS.highlightType=C3;DS.isAttr=true;DS.isReplaceAll=true;}}}Df.isAttr=false;}}}},ondrop:function Cx(C9,DH){var DB=C9.tgtData,DJ=DH.zonesModel;this.augmentDropContextForSchema(C9,DJ.docModel);if(DB&&!DB.dropZoneNoChange){var DD=DB.zoneSource,DI=DB.tgtIdx,DA=DB.edge,DC=DB.zoneID,DE=this.isAxisPrimary(DC),DF=DB.isSideBySide,DG=this.getDropZoneIdByCtlType(DB.pivotMetricNameTo);DJ.unitsDropped(DD.zoneModel,C9,{idx:DI,edge:DA,allowedItems:C9.src.data.items},DE,DF,DG);}},allowDrag:function AH(){},getElementFromPoint:function(DA,DG,DB){var DF,DD=[],C9=function(){var DH;for(DH=0;DH<DD.length;DH++){DD[DH].display="none";}},DE=function(){var DH;for(DH=0;DH<DD.length;DH++){DD[DH].display="block";}},DC=function(DH){if(DH&&DH.style.display!=="none"){DD.push(DH.style);}};DC(DB.dndHighlightCanvas);DC(this.domHLBox);C9();DF=document.elementFromPoint(DA,DG);DE();return DF;},getTargetInfo:function Cb(Db,DM,DY){var DN=this.getElementFromPoint(DM.x,DM.y,Db),DS=DN&&DN.parentNode,Do=DS.getAttribute("type"),DI=DN.getAttribute("type"),Dg,Dl,DP,DR,DV,DK,C9,DT=n(Db),DU=BT.position(Db.domMainContainer),Dj={},DZ=DM.x-DU.x,DX=DM.y-DU.y;if(Do===AY.GM_COL_HEADER||Do===AY.GM_COL_HEADER_TITLE){Dg=this.getDropZoneModelByCtlType(AY.GM_COL_HEADER,Db);if(Do===AY.GM_COL_HEADER_TITLE){DS=DS.parentNode.parentNode;}Dl=DS.getAttribute("depth");DP=Dg&&Dg.items[Dl];if(DY){Dj.node=DN;Dj.nodePos=BT.position(DN);Dj.tgtIdx=Dl;Dj.nodeContent=AO(DN);Dj.dropZoneID=AY.GM_COL_HEADER;}}else{if(Do===AY.GM_ROW_HEADER||Do===AY.GM_ROW_HEADER_TITLE){Dg=this.getDropZoneModelByCtlType(AY.GM_ROW_HEADER,Db);if(Do===AY.GM_ROW_HEADER_TITLE){DS=DS.parentNode.parentNode;}Dl=DS.getAttribute("depth");DP=Dg&&Dg.items[Dl];if(DY){Dj.node=DN;Dj.nodePos=BT.position(DN);Dj.tgtIdx=Dl;Dj.nodeContent=AO(DN);Dj.dropZoneID=AY.GM_ROW_HEADER;}}else{if(Do===AY.GM_YLABEL||Do===AY.GM_XLABEL||Do===AY.GM_COL_HEADER_EXTRA){DR=parseInt(DS.getAttribute("dzid"),10);DV=parseInt(DS.getAttribute("dzindex"),10);if(!isNaN(DR)&&!isNaN(DV)){Dg=this.getZoneModelByZoneId(DR,Db);if(G(DZ,DX,this.getComponentBBox(Db,AY.GM_YAXIS))){DK=AY.GM_YAXIS;C9=true;}else{if(G(DZ,DX,this.getComponentBBox(Db,AY.GM_XAXIS))){DK=AY.GM_XAXIS;C9=true;}else{if(G(DZ,DX,this.getComponentBBox(Db,AY.GM_YAXIS2))){DK=AY.GM_YAXIS2;C9=false;}else{if(G(DZ,DX,this.getComponentBBox(Db,AY.GM_XAXIS2))){DK=AY.GM_XAXIS2;C9=false;}}}}if(DK){Dl=this.getMetricIDAndDZIdxFromAxisIdx(DK,DV,C9,Db).dzIndex;DP=this.getZoneItems(DK,Db,false,true)[Dl];}if(!DP){Dl=DV;DP=Dg&&Dg.items[DV];}Dj.axisIndex=DV;Dj.dzId=DR;Dj.isPrimary=C9;Dj.sourceNode=DN;Dj.sourcePos=DM;if(DY){Dj.node=DN;Dj.nodePos=BT.position(DN);Dj.nodeContent=AO(DN);Dj.dropZoneID=DK;}}}else{if(DI===AY.GM_AXIS_WORD){var DL=BT.findAncestorByName(DN,"svg"),Dh=DL.getAttribute("type");if(Dh===AY.GM_SVG_Y_CATEGORY||Dh===AY.GM_SVG_X_CATEGORY){var Dd=DS.identity,Dn=parseInt(DN.getAttribute("Index"),10),DQ=Dd&&Dd[Dn];DR=DQ&&DQ.dzid;DV=DQ&&DQ.dzindex;if(DR!==undefined&&DV!==undefined){Dg=this.getZoneModelByZoneId(DR,Db);Dl=DV;DP=Dg&&Dg.items[Dl];Dj.dzIndex=Dl;}if(DY){if(Dh===AY.GM_SVG_Y_CATEGORY){Dj.dropZoneID=AY.GM_YAXIS;}else{Dj.dropZoneID=AY.GM_XAXIS;}var DB=BT.position(DL.parentNode),DD=BT.position(DN),DC=parseInt(DN.getAttribute("x"),10),DF=parseInt(DN.getAttribute("y"),10),DJ=DN.parentNode.style.fontSize,Dc=parseInt(DJ,10)||11;Dj.svgNodePos=DB;var DH=DN.parentNode.cloneNode(true),Dm=DH.childNodes,DO=Dm.length,DW="",Da,DA,Df,De,Dk=0;for(var Di=0;Di<DO;Di++){Da=Dm[Di];DA=parseInt(Da.getAttribute("Index"),10);Df=Dd&&Dd[DA];De=Df&&Df.dzindex;if(De===DV){Dk++;if(Dk===1){DC=parseInt(Da.getAttribute("x"),10);DF=parseInt(Da.getAttribute("y"),10);}else{Da.style.paddingLeft="5px";Dj.isMultipleTspan=true;}Da.style.fontSize=DJ;DW+=CW(Da);}}Dj.nodeContent=DW;Dj.transform=DN.parentNode.getAttribute("transform");var DG=Dj.transform&&(Dj.transform.indexOf("rotate(-90")>=0||Dj.transform.indexOf("rotate(90")>=0||Dj.transform.indexOf("rotate(270")>=0),DE=DG?DD.w:DD.h;Dj.nodePos={x:DB.x+DC,y:DB.y+DF-(DE+Dc)/2,w:Math.round(DN.getComputedTextLength()),h:DE};}}}}}}if(DP&&!DY){DP.fromZoneId=Dg.id;DP.zoneIdx=DT.getUnitIndexInZone(Dg,DP);}Dj.item=DP;if(DP){return Dj;}else{return null;}},getDragData:function Ad(DB,DA){var DE=DA.id,C9=DB.src.pos,DD=this.getTargetInfo(DA,C9);if(DD){DD.setAvatarClass=function DC(DF){var DI=V.all[DE],DG=DI.avatar;if(DG){var DH=[DI.avatarCssClass,"hasOwnAvatar",DF];DG.className=DH.join(" ");}};if(DD.item){DD.items=[];DD.items.push(DD.item);}DD.src=C4.VIZ;DD.onRemove=function(DF){DA.deleteItem(DF);};}return DD;},deleteItem:function CE(DB,C9){var DA=n(C9);DA.deleteItem(this.getZoneModelByZoneId(DB.fromZoneId,C9),DB.zoneIdx);},getShapeSelectionInfo:function(C9){return T.call(this,C9);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.gm.GMUtility");var E=mstrmojo.hash,J=mstrmojo.VisUtility,G=mstrmojo.gm.GMUtility.sizeCalculator,A=mstrmojo.gm.EnumFitTo,N=mstrmojo.gm.EnumAxisType,L=mstrmojo.gm.EnumGraphType,H=mstrmojo.gm.EnumXAxisLabelStatus,C=6,P=2,M=9,K=6,I=5;mstrmojo.gm.GMLayoutResult=null;mstrmojo.gm.GMLayoutConfig=null;function B(U,S){var R,T,Q,V=U.length;for(R=0;R<V;R++){T=U[R];Q=S[R];if(T!==undefined&&T!==Q){return true;}}return false;}function D(Q){var S,U,V=Q.length,R=0,T=0;for(S=0;S<V;S++){U=Q[S];if(U){T+=U;R+=1;}}return(R===0)?40:Math.floor(T/R+0.5);}function O(Q,U){var R,T,V=Q.length,S=0;for(R=0;R<V;R++){T=Q[R];if(T){S+=T;}else{S+=U;}}return S;}function F(U,T,Y,W){var S,Q,X,R=U.length,V=[];T=T||[];W=W||0;for(S=0;S<R;S++){X=T[S];if(X){X-=2*W;}Q=J.measureTextWidth(U[S],Y,2*W,X);V.push(Q);}return V;}mstrmojo.gm.GMLayout=mstrmojo.provide("mstrmojo.gm.GMLayout",{fitTo:A.CONTENT,xAxisType:N.ATTRIBUTE,yAxisType:N.METRIC,chartType:L.BAR,sBarWidth:0,API:{owner:undefined,getXAxisHeight:undefined,getYAxisWidth:undefined,getX2AxisHeight:undefined,getY2AxisWidth:undefined,getRowHeight:undefined,getColWidth:undefined,calculateAllXAxisStyle:undefined,calculateOneXAxisStyle:undefined},nRows:1,nCols:1,widthCache:[],heightCache:[],nLabels:0,maxXAxisWidth:undefined,maxXAxisWidthStagger:undefined,minXLabelWidth:undefined,widthRatio:undefined,heightRatio:undefined,xInfo:undefined,yInfo:undefined,calculateLayout:function(h,d,b,g,Y,n,W,Z,R){var f=this.yInfo,S=this.xInfo,e=this.widthCache,c=this.heightCache,j=E.clone(e),X=E.clone(c),V=Z.ctw!==1,Q=Z.cth!==1,U=this.xAxisType===N.METRIC,T=this.yAxisType===N.METRIC,k=U&&T,l={xAxisHeight:g,xAxis2Height:Y,yAxisWidth:n,yAxis2Width:W};if(this.fitTo===A.CONTENT){l.xScalable=S.items.length===0||U;l.yScalable=f.items.length===0||T;}else{l.xScalable=true;l.yScalable=true;l.minChartWidth=k?60:20;l.minChartHeight=k?60:20;}if(!V){e.length=0;e.length=this.nCols;}if(!Q){c.length=0;c.length=this.nRows;}var a=this.hLayout(h,d,b,l,Z,R);a.widthCacheChanged=B(j,e);a.heightCacheChanged=B(X,c);return a;},hLayout:function(t,Q,S,s,g,AE){var AB=0,Z=this.yInfo.isMetric?"":this.yInfo.items.join(" "),w=0,o=this.API,p=AE.styles,f=this.API.owner,a=0.2,R=Math.max((((Q+t)*(1-a))-t),20),k=s.xScalable,AD=s.yScalable,AA=s.xAxisHeight,X=s.xAxis2Height,Y=s.yAxisWidth,j=s.yAxis2Width,b=AA!==undefined,n=X!==undefined,c=Y!==undefined,d=j!==undefined,h=g.ctw,q=g.cth,V=Y||20,z=j||0,l=false,AC,x,u,y,T,U,v,W,r,e={};while(true){if(AB>=C){break;}if(Z!==""&&AE.syat){w=this.batchEvalTextHeight([Z],[V],p,P);}v=Q;v-=G.add(0,V,AE.va);v-=G.add(0,z,AE.va);if(k){this.hFakeWidthCache(v+AE.v,s.minChartWidth);if(this.fitTo!==A.COMPACT){this.hProcessWidthCache();}}r=this.hCheckXLabelStatus(v,g.ctw);o.owner.xLabelPlacement=r;f.layoutPaddingEchos={X1:[],X2:[],Y1:[],Y2:[]};y=b?AA:(o.getXAxisHeight.call(f,r)*g.x);T=n?X:Math.min(AE.rhMaxH,Math.max(w,(o.getXAxis2Height.call(f)*g.x2)));U=this.hCheckPageOverflowX(v+AE.v,h);W=S;W-=G.add(0,y,AE.ha);W-=G.add(0,T,AE.dx?AE.ha:AE.h);if(AD){this.hFakeHeightCache(W+AE.h,s.minChartHeight);if(this.fitTo!==A.COMPACT){this.hProcessHeightCache();}}AC=c?Y:Math.min(R,(o.getYAxisWidth.call(f)*g.y));x=d?j:(o.getYAxis2Width.call(f)*g.y2);u=this.hCheckPageOverflowY(W+AE.h,q);if(AC===V&&x===z&&u===l){break;}V=AC;z=x;l=u;AB++;}e.nRows=this.nRows;e.nCols=this.nCols;e.yAxisWidth=V;e.yAxis2Width=z;e.xAxisHeight=y;e.xAxis2Height=T;e.needHSBar=U;e.needVSBar=l;e.rotateLabelInXAxis=r;e.avgChartWidth=this.hGetChartAvgWidth(h);e.avgChartHeight=this.hGetChartAvgHeight(q);e.canvasWidth=this.hEstimateCanvasWidth(h,e.avgChartWidth);e.canvasHeight=this.hEstimateCanvasHeight(q,e.avgChartHeight);if(!U){e.pageWidth=this.hGetPageWidth(h);}if(!l){e.pageHeight=this.hGetPageHeight(q);}return e;},hCheckXLabelStatus:function(T,R){var S=this.fitTo,Q=H.NORMAL;if(S===A.CONTENT){Q=this.hCheckXLabelStatus4FitContent(T/this.nCols,R);}else{Q=this.hCheckXLabelStatus4FitPanel((T-2*I)/this.nLabels);}return Q;},hCheckXLabelStatus4FitPanel:function(U){var S=false;if(S){var Q=this.minXLabelWidth;if(Q>2*U){return H.ROTATE;}if(Q>U){return H.STAGGER;}return H.NORMAL;}else{var T=this.API.owner,R=this.API.calculateAllXAxisStyle;return R.call(T);}},hCheckXLabelStatus4FitContent:function(U,T){var R,V,Q=this.widthCache,S=(T!==1);if(S){U=65535;V=Q.length;for(R=0;R<V;R++){if(Q[R]){U=Math.min(U,Q[R]*T);}}}if(U>=this.maxXAxisWidth){return H.NORMAL;}if(U>=this.maxXAxisWidthStagger){return H.STAGGER;}return H.ROTATE;},hProcessWidthCache:function(){var S,T=this.nCols,Q=this.widthCache,R=this.minWidths;if(R){for(S=0;S<T;S++){if(R[S]){Q[S]=Math.max(Q[S],R[S]);}}}},hProcessHeightCache:function(){var S,T=this.nRows,Q=this.heightCache,R=this.minHeights;if(R){for(S=0;S<T;S++){if(R[S]){Q[S]=Math.max(Q[S],R[S]);}}}},hFakeWidthCache:function(Q,T){var S=this.widthRatio;if(!S){this.hFakeSizeCacheEvenly(Q,T,this.nCols,this.widthCache);return ;}var R=O(S,1);this.hFakeSizeCacheEvenly(Q,T,this.nCols,this.widthCache,this.widthRatio,R);},hFakeSizeCacheEvenly:function(W,R,T,X,V,Y){var U,Q=0,S=W/T;X.length=0;for(U=0;U<T;U++){if(V){S=W*(V[U]/Y);X[U]=Math.round(Q+S+5e-14)-Math.round(Q);}else{X[U]=Math.round(Q+S+5e-14)-Math.round(Q);}Q+=S;}if(R){for(U=0;U<T;U++){X[U]=Math.max(X[U],R);}}},hFakeHeightCache:function(R,T){var Q=this.heightRatio;if(!Q){this.hFakeSizeCacheEvenly(R,T,this.nRows,this.heightCache);return ;}var S=O(Q,1);this.hFakeSizeCacheEvenly(R,T,this.nRows,this.heightCache,this.heightRatio,S);},hGetChartAvgWidth:function(Q){return Math.floor(D(this.widthCache)*(Q||1));},hGetChartAvgHeight:function(Q){return Math.floor(D(this.heightCache)*(Q||1));},hEstimateCanvasWidth:function(R,Q){return Math.floor(O(this.widthCache,Q)*(R||1));},hEstimateCanvasHeight:function(R,Q){return Math.floor(O(this.heightCache,Q)*(R||1));},hGetPageWidth:function(T){var R,U=this.nCols,S=this.API.getColWidth,Q=0;T=T||1;for(R=0;R<U;R++){Q+=Math.floor(S(0,R)*T);}return Q;},hGetPageHeight:function(T){var R,U=this.nRows,S=this.API.getRowHeight,Q=0;T=T||1;for(R=0;R<U;R++){Q+=Math.floor(S(R,0)*T);}return Q;},hCheckPageOverflowX:function(S,U){var R,V=this.nCols,T=this.API.getColWidth,Q=0;U=U||1;S=Math.ceil(S);for(R=0;R<V;R++){Q+=Math.floor(T(0,R)*U);if(Q>S){return true;}}return false;},hCheckPageOverflowY:function(Q,U){var S,V=this.nRows,T=this.API.getRowHeight,R=0;U=U||1;Q=Math.ceil(Q);for(S=0;S<V;S++){R+=Math.floor(T(S,0)*U);if(R>Q){return true;}}return false;},evalTextHeight:function(Q,T,S,U){if(U===undefined){U=P;}var R=this.batchEvalTextHeight([Q],[T],S,U);return R[0];},batchEvalTextHeight:function(V,Q,a,X,U){var T,Z,Y,R=V.length,W=[];U=U===undefined?1:U;Q=Q||[];X=X||0;for(T=0;T<R;T++){Y=Q[T];if(Y){Y-=2*X;}var S=J.measureTextHeight(V[T],a,0,100,undefined,true,true);Z=J.measureTextHeight(V[T],a,2*X,Y);Z=Math.min(Z,S*U+2*X);W.push(Z);}return W;},getRowHeadersWidth:function(T,S){var Q,W,U,V=T.length,R=[];for(Q=0;Q<V;Q++){W=T[Q];U=F(W,[],S,M);R.push(Math.max.apply(null,U));}return R;},getColHeadersHeight:function(Q,U){var R,W,S,V=Q.length,T=[];for(R=0;R<V;R++){W=Q[R];S=this.batchEvalTextHeight(W,[],U,K);T.push(Math.max.apply(null,S));}return T;},getRowHeaderP1Width:function(R,V,d,W,e,T,Q){var Z,f=Q.isMetricNamesOnYAxis,Y=Q.isMetricNamesOnRows,U=Q.hasHeaderInY,X=Q.haveY2,S=Q.getChartInfo().isPie,c=Q.dz,a=c.AngleBy.TemplateMetric&&c.AngleBy.TemplateMetric.length>1,b=c.XAxis.TemplateMetric&&c.XAxis.TemplateMetric.length===1;if(R===0&&V>0&&Q.haveY1===false&&T&&(!f||(S&&a&&b))&&!(Y&&(U&&!X))){Z=F(d.items,W,e,P);return Math.max.apply(null,Z);}return 0;},getColHeaderP1Height:function(U,Q,S,Z,W,T){var X=[],V=[],Y=[];if(W.hasAndShowRT){X=this.batchEvalTextHeight(U.items,Q,Z.RH_TITLE,K,T);}if(W.hasAndShowYAAT){V=this.batchEvalTextHeight(S.items,[],Z.AXIS_TITLE_Y,K);}if(W.hasAndShowFA){Y=this.batchEvalTextHeight(S.items,[],Z.CH,K);}var R=X.concat(V).concat(Y);return Math.max.apply(null,R);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMUtility","mstrmojo.color","mstrmojo.ui.menus.EditorConfig","mstrmojo.ui.menus.ToolbarEditorConfig","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.ui.editors.controls.LineConfigGroup","mstrmojo.ui.editors.controls.FillConfigGroup","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.AdvancedColorPicker");var Z=mstrmojo,I=Z.dom,K=Z.hash,a=Z.array,A=Z.css,j=Z.VisEnum.ControlType,h=mstrmojo.gm,F=mstrmojo.color,U=h.GMUtility,R=Z.VisUtility,k=h.FormatingPropertyTag,e=mstrmojo.models.FormatModel,c=e.ENUM_PROPERTY_NAMES,P=mstrmojo.chart.enums.EnumFontStyle,f=mstrmojo.VisEnum.GMLegendFormatingPropertyTag,G=mstrmojo.VisEnum.NetworkLegendFormattingCategory,V=mstrmojo.ui.editors.controls.AdvancedColorPicker,W={GLOBAL:"glb",FORMATTING:"fmt"},D={FONT_COMP:"FntCmp",FONT_FAMILY:"FntFml",FONT_STYLE:"FntStyle",FONT_SIZE:"FntSz",FONT_COLOR:"FntClr",LINE_COMP:"LnCmp",SHOW:"Shw",COLOR:"Clr",STYLE:"Style",THICKNESS:"Thk"};function N(s,p){var o=this.widget,q=o.domToolbarPH,r=this;o._lastOpened=null;q.innerHTML="";document.body.appendChild(q);A.toggleClass(q,mstrApp.getThemeClassName(),true);this.configureLegendPopup(p,q);o.toolEditor=p.newInstance({unrender:function(){}});o.toolEditorClosefn=function(t){var v=t.target,u=o.toolEditor.domNode;if(!I.contains(u,v,true,u)&&!R.isHostedPopupNode(v,"class",true,document.body)){r.hideToolbar();}};I.attachEvent(document.body,"mousedown",o.toolEditorClosefn,true);o.openPopup(this.widget.toolEditor);A.toggleClass(document.body,"hasToolbarPopup",true);}function L(p,o){var q;if(o===W.GLOBAL){q=this.readGlobalProperty(p);}else{if(o===W.FORMATTING){q=this.widget.getPropertiesOfFormatable();}}if(p.slice(-3)===D.COLOR){if(p!==k.COLOR_SQUARE_COLOR||o!==W.GLOBAL){q=U.decodeColor(q);}}return q;}function Q(p,o){var q=this;if(o===W.GLOBAL){return function(s){var r=L.call(q,p,W.GLOBAL);if(p===k.COLOR_SQUARE_COLOR){r=r.color;}if(!K.equals(s,r)){if(p.indexOf(D.COLOR)!==-1){s=U.encodeColor(s);}q.writeGlobalProperty(p,s);}};}return function(t,r){var s=L.call(q,p,W.FORMATTING);if(t!==s){if(p.indexOf(D.COLOR)!==-1){t=F.encodeColor(t);}q.widget.writeFormatableProperties(p,t,r);}};}function O(p,o){p=p||[];o=o||"";a.forEach(p,function(q){q.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",cssClass:o,children:p};}function d(p,q){p=p||[];var o=new mstrmojo.Box({children:p,cssText:q});return o;}function B(s,t,o){var r="white-space: nowrap; width: 50px;";if(s===mstrmojo.desc(3905,"Background")||s===mstrmojo.desc(6242,"Color")){r="white-space: nowrap;";}else{if(s===mstrmojo.desc(2885,"Fill")){r="white-space: nowrap; margin-right: 9px;";}}var p=new mstrmojo.Label({text:s}),q=d(p,r);return O([q,t],o);}function b(p,q,o){var r=this;p=p||{};if(p.propNames===undefined){p.propNames=q;}p.onGroupValueChange=function(s,u,t){if(u!==t&&u!==undefined){(Q.call(r,s,o))(u,t);}};return p;}function S(q,p,o){var r=this;a.forEach(p,function(s){var t=L.call(r,s,o);if(t!==undefined){q.setChildValue(s,t);}});}function C(o,r,q,p){p=b.call(this,p,r,q);K.copy({width:"140px",height:"22px",colorPickerHostWithin:true},p);var s=new mstrmojo.ui.editors.controls.FillConfigGroup(p);if(s){s.iniChildrenComp(r);S.call(this,s,r,q);}if(typeof o==="string"){return B(o,s,(p||[]).rowContainerCSSClass);}return s;}function Y(q,p,o){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolBoxBackgroundFill",children:[C.call(this,mstrmojo.desc(2885,"Fill"),q,p,K.copy({rowContainerCSSClass:"mstrmojo-ui-rowContainer"},o))]}]});}function l(s,q,u,t,p){var r=L.call(this,u,t),v=this;var o=new mstrmojo.ui.editors.controls.ColorPickerButton({showGradient:!!p,isHostedWithin:true,width:"40px",selectedValue:r,showNoFill:false,postselectedValueChange:function(w){(Q.call(v,u,t))(w.value,w.valueWas);}});if(s){o.alias=s;}if(typeof q==="string"){return B(q,o);}return o;}function n(p){var o;if(p.listenToUpdateColorMap instanceof Function){o=p.listenToUpdateColorMap(function(){p.raiseEvent({name:"colorByColorChange",type:"invalidateCache"});if(o&&p.detachUpdateColorMapListener instanceof Function){p.detachUpdateColorMapListener(o);}});}}function g(q,p){var o=L.call(this,q,p),r=this;return new mstrmojo.ui.menus.ToolbarEditorConfig({cssClass:"cbsquare-colorpicker",contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker({showAutomatic:!o.isDefaultColor,color:o.color,colorChanged:function(s){s=(this.showAutomatic&&s===V.VAL_AUTOMATIC)?"default":s;n(r.widget);(Q.call(r,q,p))(s,o.color);r.hideToolbar();},colorCanceled:function(){r.hideToolbar();}})]});}function T(u,p){var o={},t=L.call(this,p+D.FONT_STYLE,W.GLOBAL),r=L.call(this,p+D.FONT_COLOR,W.GLOBAL),q=L.call(this,p+D.FONT_FAMILY,W.GLOBAL),s=L.call(this,p+D.FONT_SIZE,W.GLOBAL);if(t!==undefined){o[c.FONT_WEIGHT]=(!isNaN(t)&&((t&P.FS_BOLD)>0));o[c.FONT_STYLE]=(!isNaN(t)&&((t&P.FS_ITALIC)>0));o[c.UNDERLINE]=(!isNaN(t)&&((t&P.FS_UNDERLINE)>0));o[c.LINE_THROUGH]=(!isNaN(t)&&((t&P.FS_STRIKETHROUGH)>0));}if(r!==undefined){o[c.COLOR]=r;}if(s!==undefined){o[c.FONT_SIZE]=s;}if(q!==undefined){o[c.FONT_FAMILY]=q;}u.setFormatSource(o);}function H(p,o){var q=null;if(o.indexOf(D.FONT_FAMILY)!==-1){q=p.fontFamily;}else{if(o.indexOf(D.FONT_STYLE)!==-1){q=p.fontStyle;}else{if(o.indexOf(D.FONT_SIZE)!==-1){q=p.fontSize;}else{if(o.indexOf(D.FONT_COLOR)!==-1){q=p.fontColor;}}}}return q;}function M(r,q,o){var p={bold:P.FS_BOLD,italic:P.FS_ITALIC,underline:P.FS_UNDERLINE,strikeout:P.FS_STRIKETHROUGH},s=this;q.forEach(function(t){var u=H(r,t);if(u){u.propName=t;if(t.indexOf(D.FONT_STYLE)!==-1){u.postselectionChange=function(v){var y=v.added,z=u.items[(y&&y[0]!==undefined)?y[0]:v.removed[0]],x=!!y,w=L.call(s,t,o),AA=(w===undefined?0:w);if(x){AA=AA|p[z.css];}else{AA=AA&(~p[z.css]);}u.parent.raiseFormatValueChange(t,AA,w);};}else{if(t.indexOf(D.FONT_FAMILY)!==-1){u.postselectedIndexChange=function(v){var y=v.value,x=v.valueWas;if(y!==x){var w=u.items;u.parent.raiseFormatValueChange(t,w[y].id,w[x]&&w[x].id);}};}else{if(t.indexOf(D.FONT_SIZE)!==-1){u.postselectedValueChange=function(v){var x=parseInt(v.value,10)+"pt",w=parseInt(v.valueWas,10)+"pt";if(x!==w){u.parent.parent.raiseFormatValueChange(t,x,w);}};}else{u.postselectedValueChange=function(v){u.parent.parent.raiseFormatValueChange(t,v.value,v.valueWas);};}}}}});}function X(p,s,r,q){var v=this;q=q||{};if(q.propNames===undefined){q.propNames=s;}if(q.onGroupValueChange===undefined){q.onGroupValueChange=function(w,y,x){if(y!==x&&y!==undefined){(Q.call(v,w,W.GLOBAL))(y,x);}};}var o={cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,width:"381px",height:"22px"};q=K.copy(o,q);var u=new mstrmojo.ui.editors.controls.CharacterGroup(q),t=H(u,k.LEGEND_FONT_COLOR);t.showNoFill=false;M.call(this,u,s,r);T.call(this,u,p);return u;}function J(s,r){var w=r.firstChild,AA=w?w.offsetWidth:0,p=w?w.offsetHeight:0,t=document.body.offsetWidth,z=document.body.offsetHeight,u=10,v=5,y=5;if(w){w.style.left="0";w.style.right="auto";w.style.top="0";w.style.bottom="auto";}var x={w:AA,h:0};var q=p>0;if(q){x.h=p;}else{return false;}if(q){r.style.left=s.x+"px";r.style.top=s.y-p-u/2+"px";}if(s.x+x.w>t){r.style.left=s.x-AA+"px";}if(q){var o=0;if(s.y-p-u/2<v){o=v;r.style.top=o+"px";}else{if(s.y+u/2>z){o=Math.max(z-u-p,v);r.style.top=o+"px";}}}}function E(o,r,q,p){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[X.call(this,o,r,q,p)]}]});}mstrmojo._FormateVisLegend=mstrmojo.provide("mstrmojo._FormateVisLegend",{_mixinName:"mstrmojo._FormateVisLegend",widget:null,readGlobalProperty:undefined,writeGlobalProperty:undefined,configureLegendPopup:undefined,init:function(o){this.widget=null;if(this._super){this._super(o);}if(this.widget&&!this.widget.domToolbarPH){var p;p=document.createElement("div");p.setAttribute("class","gm-menu-placeholder");this.widget.domToolbarPH=p;}},handleRMCOnLegend:function(z){var t=z.getTarget(),u=z.e,x={x:u.pageX,y:u.pageY},w=t.getAttribute("type"),p,v,r,s=this,q=this.widget;z.cancel();z.preventDefault();if(mstrApp.isAppStatePresentation()||!mstrApp.allowWebDashboardDesign()){return ;}var y,o=function(AA){switch(AA){case j.LGD_COLORBOX_CTN:case j.LGD_COLORBOX:if(AA===j.LGD_COLORBOX){t=t.parentNode;}v=t.firstChild.identity;if(v&&v.comb){this.widget.colorSqureIdentity=v;this.selectColorBox(t,this.fmtMode);p=g.call(this,k.COLOR_SQUARE_COLOR,W.GLOBAL);x=this.adjustColorPickerPos(t);if(!x.alignLeft){r=p.ENUM_CORNERS;p.setAlignment(r.BOTTOM_LEFT,r.TOP_RIGHT);}}break;case j.LGD_TITLE:case j.LGD_TEXT:this.selectText(true);var AB=[k.LEGEND_FONT_SIZE,k.LEGEND_FONT_FAMILY,k.LEGEND_FONT_STYLE,k.LEGEND_FONT_COLOR];p=E.call(this,"lgd",AB,W.GLOBAL);y="lgd";break;default:this.selectLegendBody();var AC=[k.LEGEND_BG_COLOR,k.LEGEND_BG_FILL_TRANSPARENCY];p=Y.call(this,AC,W.GLOBAL);y="lgd";break;}if(p){N.call(this,x,p);if(!!y){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");q.parent.selectVIUnit();var AD=q.edtModel._targetPulldown;if(AD){AD.selectItemByField("v",y);}}}};o.call(this,w);J.call(this,x,this.widget.domToolbarPH);},hideToolbar:function(){var p=this.widget,q=p.domToolbarPH,s=q.firstChild,o=q.parentNode;if(s){q.removeChild(s);}if(o){o.removeChild(q);}var r=p.toolEditor;if(r){r.unrender=function(){r._super();};r.destroy();r.unrender=function(){};delete p.toolEditor;A.toggleClass(document.body,"hasToolbarPopup",false);A.toggleClass(q,mstrApp.getThemeClassName(),false);}if(p.toolEditorClosefn){I.detachEvent(document.body,"mousedown",p.toolEditorClosefn,true);delete p.toolEditorClosefn;}},highlightText:function(o){throw new Error("subclass need to implement highlightText function");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility","mstrmojo.Obj","mstrmojo.chart.model.enums.EnumDSSGraphRegressionType","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.chart.enums.EnumLineStyle","mstrmojo.num","mstrmojo.string");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var Z=mstrmojo,G=mstrmojo.gm,a=G.GMUtility,K=Z.VisUtility,H=Z.array,D=Z.gm.EnumGraphType,T=mstrmojo.num,C=mstrmojo.string,J=Z.chart.model.enums.EnumDSSGraphRegressionType,I=G.EnumRefLineModelType,L=G.EnumIdentityType,E=G.WidgetPropertyTag,U=G.EnumTrendRefModelLabels,M=Z.chart.model.enums.EnumDSSObjectType;var W=mstrmojo.chart,V=W.common.Utility;function F(e,c){var g=[],d=[],f,b=Math.min(e.length,c.length),h=function(k,j){return k.x>j.x?1:-1;};for(f=0;f<b;f++){d.push({x:e[f],y:c[f]});}d.sort(h);H.forEach(d,function(j){g.push(j.x);g.push(j.y);});return g;}function S(f,d){var c,e;if(this.isTrendLine===false){return undefined;}c=this.getBBSection();if(f){e=c.fl||[];}else{e=c.bl||[];}if(d){var b=[];H.forEach(e,function(g){b.push(g.join());});return b;}return e;}function P(e,b){var d=1000000000;if(e!==0&&(Math.abs(e)<0.001||Math.abs(e)>d)){return T.format(6,3,"",e);}return parseFloat(e.toFixed(b).replace(/0+$/,"")).toString();}function Q(f,c,h){var b=h,e="",g=[];H.forEach(c,function(j){if(isNaN(j)){g.push(j);}else{g.push(P(j,3));}});function d(o){var n,l="",j,r,k,q;j=o.length;for(n=j-1;n>=0;n--){r=o[n];k=parseFloat(r);q=n;if(k===0){continue;}if(l!==""){if(k>0){l+=" + ";}else{l+=" - ";k=-k;r=r.slice(1);}}if(q!==0){if(q===1){l+=r+b;}else{l+=r+b+"^("+q+")";}}else{l+=r;}}return l;}if(f==="Linear"){e=d(g);}else{if(f==="Exponential"){if(g.length<2){return g[0];}if(typeof g[1]==="string"&&g[1].slice(0,2)==="Ln"){e=g[0]+"e^("+g[1].slice(2)+b+")";}else{if(g[1]>0){e=g[1];}else{e="("+g[1]+")";}e+="^("+b+")*"+g[0];}}else{if(f==="Power"){if(g.length<2){return g[0];}e=b+"^("+g[1]+")*"+g[0];}else{if(f==="Poly"){e=d(g);}else{if(f==="Log"){if(g.length<2){return g[0];}e=g[1]+"ln("+b+")";if(g[0]!==0){if(g[0]>0){e+=" + ";e+=g[0];}else{e+=" - ";e+=(-g[0]);}}}}}}}return e;}function O(f,c,j){var b=j,d="",g=[],h=[];H.forEach(c,function(k){if(isNaN(k)){g.push(k);}else{g.push(P(k,3));}});function e(q){var o,k,t,l,s,n=[],r;k=q.length;for(o=k-1;o>=0;o--){t=q[o];l=parseFloat(t);s=o;if(l===0){continue;}r="";if(n.length){if(l>0){r+=" + ";}else{r+=" - ";l=-l;t=t.slice(1);}}if(s!==0){if(s===1){r+=t+b;n.push({v:r});}else{r+=t+b;n.push({v:r});n.push({v:"("+s+")",isSuper:true});}}else{r+=t;n.push({v:r});}}return n;}if(f==="Linear"){h=e(g);}else{if(f==="Exponential"){if(g.length<2){h.push({v:g[0]});return h;}if(typeof g[1]==="string"&&g[1].slice(0,2)==="Ln"){h.push({v:g[0]+"e"});h.push({v:"("+g[1].slice(2)+b+")",isSuper:true});}else{if(g[1]>0){h.push({v:g[1]});}else{h.push({v:"("+g[1]+")"});}h.push({v:"("+b+")",isSuper:true});h.push({v:"*"+g[0]});}}else{if(f==="Power"){if(g.length<2){h.push({v:g[0]});return h;}h.push({v:b});h.push({v:"("+g[1]+")",isSuper:true});h.push({v:"*"+g[0]});}else{if(f==="Poly"){h=e(g);}else{if(f==="Log"){if(g.length<2){h.push({v:g[0]});return h;}d=g[1]+"ln("+b+")";if(g[0]!==0){if(g[0]>0){d+=" + ";d+=g[0];}else{d+=" - ";d+=(-g[0]);}}h.push({v:d});}}}}}return h;}function N(e,c,d){var b;for(b=0;b<d;b++){e.push(c);}return e;}function X(d){var c,b=0;for(c=0;c<d.length;c++){if(d[c]!==null){b++;}}return b;}function Y(c){var b="";switch(c){case"Linear":b=mstrmojo.desc(4888,"Linear");break;case"Exponential":b=mstrmojo.desc(12022,"Exponential");break;case"Power":b=mstrmojo.desc(12023,"Power");break;case"Poly":b=mstrmojo.desc(12024,"Polynomial");break;case"Log":b=mstrmojo.desc(12021,"Logarithmic");break;}return b;}var A=mstrmojo.declare(mstrmojo.Base,null,{getTooltipContent:function(){var u,b,AH,w,q,r,AE,l,z,AA,o,p,y,AF,g,AI,n,s,d=this.objType,c=this.lineModel,AB=[],v="x",j=[];if(c){p=c.def;}if(d===L.TREND_LINE){AH=c.trendLineModel;w=AH.tmData;r=AH.dp;z=r.lds.gmm;AE=z.gmCtr;l=AE.getChartInfo();AB.push(w.mid);if(l.tp===D.BUBBLE||l.tp===D.SCATTER){y=w["x-vars"];if(y!==undefined){AB.push(AE.getMetricIndexFromID(w["x-vars"][0]));}}q=z.getMetricNamesFromIndex(AB);j.push({n:mstrmojo.desc(14440,"Trendline of"),v:q.join(", ")});var AG=false;if(p&&this.lineModel.def.incl===1){AG=true;}if(l.isABL&&AG){var h=AE.getBreakByAttributes();var AD=[],e=[];H.forEach(h,function(f){AD.push(f.n);});if(AD.length>0){var k=this.lineModel.getBBSection();if(k){var x=k.bbes;for(AA=0;AA<AD.length;AA++){e.push(h[AA].es[x[AA]].n);}j.push({n:AD.join(", "),v:e.join(", ")});}}}j.push(null);var AC=c.getFormulas();if(AC){AC=AC[0];y=w["x-vars"];AF=w["x-types"];if(y!==undefined){if(AF[0]===M.DssTypeAttribute){g=AE.getAttributeById(y[0]);if(g&&g.n){v=g.n;}}else{if(AF[0]===M.DssTypeMetric){g=AE.getMetricIndexFromID(y[0]);if(!isNaN(g)){g=z.getMetricNamesFromIndex([g]);if(g.length>0){v=g[0];}}}}}if(AC.coefficients){n=O.call(this,AC.type,AC.coefficients,C.encodeHtmlString(v,true));j.push({n:mstrmojo.desc(14441,"Trendline function"),v:n,noTruncate:true,isTrendLineFuncToken:true,skipEncode:true});}for(AI in AC){if(AC.hasOwnProperty(AI)){if(AI.indexOf("coefficients")<0){o=isNaN(AC[AI])?AC[AI]:P(AC[AI],3);if(AI.slice(-2)==="R2"&&(o===0||o==="0")){AI=AI.slice(0,AI.length-2)+"R<sup>2</sup>";s=mstrmojo.desc(6098,"N/A");}else{if(AI==="type"){AI=mstrmojo.desc(8733,"Type");s=Y(AC.type);}else{AI=(AI.slice(-2)==="R2")?AI.slice(0,AI.length-2)+"R<sup>2</sup>":AI;s=a.everythingToString(o);}}j.push({n:AI,v:s,skipEncode:true});}}}}return j;}u=c.getReferenceLineLabel(false,true);b=u.split(":");if(b.length>1){return[{n:b[0],v:b[1]}];}return[];}});var B=mstrmojo.declare(mstrmojo.Base,null,{init:function R(f){this._super(f);var d=this.trendLineModel,e=d.midx,h=d.mx,c,b,j,g;if(h&&h[e]){c=h[e].mdls;if(c){b=c.mod_c;j=d.tmData.modix;g=b[j-1];this.def=g;}}else{if(this.isTrendLine===false&&this.trendLineModel.refIsDefOnAxis){this.def=this.trendLineModel.defOnZone;}}},getSeasonalityType:function(){if(this.isTrendLine){return this.trendLineModel.dp.lds.gmm.gmCtr.firstRes.dz.sea;}return 0;},getLevel:function(){var b=this.def,c=b&&b.clientDef;if(c){if(this.isTrendLine){return c.trdLvl;}return c.refLvl;}return -1;},getLineThickness:function(){var b=this.def,c=b&&b.clientDef;if(c){return parseInt(c.trdRefLnThk,10);}return 1;},getLineColor:function(){var c=this.def,d=c&&c.clientDef,b;if(d){b=d.trdRefLnClr;if(typeof b==="string"&&b[0]==="#"){a.encodeColor(b);}return parseInt(d.trdRefLnClr,10);}return 16711680;},getLineRenderType:function(){var b=this.def,c=b&&b.clientDef;if(c){return parseInt(c.trdRefLnStyle,10);}return mstrmojo.chart.enums.EnumLineStyle.LS_DASH;},getTrendLineValuesWithForecast:function(){var f=this.getTrendLineStartingGroup(),e=this.trendLineModel.dp,c=e.getChartInfo(),k=[],g=[],j,l,b,d=false,h;j=this.getBwdData();l=this.getFwdData();if(c.tp===D.BUBBLE||c.tp===D.SCATTER){h=this.getBwdData(true);b=this.getFwdData(true);d=true;}if(j&&j.length>0){g=g.concat(j);if(d){k=k.concat(h);}}else{if(!d){N(g,undefined,f);}}g=g.concat(this.getTrendLineValues());if(d){k=k.concat(this.getTrendLineValues(true));}if(l&&l.length>0){g=g.concat(l);if(d){k=k.concat(b);}}else{if(e.fwdEnabled){if(!d){N(g,undefined,e.fwdSteps);}}}if(d){return F(k,g);}return g;},getTrendLineStartingGroup:function(){var b=this.trendLineModel.dp;if(b.bwdEnabled){return b.bwdSteps;}return 0;},getTrendLineValues:function(b){if(this.isTrendLine===false){K.visPrint("this function is only for trend line only, for reference line, call getReferenceLineValue instead");return undefined;}var g=this,l=g.seriesId,o=g.trendLineModel,n=o.tmData,j=n.trm,d=o.dp,e,c=d.innerGetGroupCount(),k,f=[],h;for(e=0;e<c;e++){k=d.innerGetGraphCell(l,e);if(b){h=k.getData(0);}else{h=k.getAssoDataWithMetricIndex(j,true);}f.push(h);}return f;},getReferenceLineLabelFont:function(){var c=this.def,b={},d=c&&c.clientDef;if(d){["rfLnFntFml","rfLnFntSz","rfLnFntStyle","rfLnFntClr"].forEach(function(e){if(e!=="rfLnFntFml"){b[e]=parseInt(d[e],10);}else{b[e]=d[e];}});return b;}return{rfLnFntFml:"Verdana",rfLnFntSz:"11pt",rfLnFntStyle:0,rfLnFntClr:0};},getReferenceLineLabel:function(x,k,AF){var AG=this,AC=false,w=this.getReferenceLineValue(),AH=AG.trendLineModel,AA=AH.midx,d,t=AH.dp,y=t.lds.gmm,b,z,AB,h,s,g=[],l=!!this.trendLineModel.defOnZone;if(!l){b=y.getMetricNumberFormat(AA);d=y.getMetricNamesFromIndex([AA])[0];}else{if(AF){if(AF.Condense){AC=true;}else{if(AF.NumberFormat){b=AF.NumberFormat;}}}else{var q=AH.direction==="horizontal",u=true,p=t.rowIndex,AD=t.colIndex,j=q?p:AD,v=(q?"y":"x")+(u?"1":"2");b=y.gmCtr.axisFormats[v][j];AC=b==="Condensed";}}if(AC){z=V.abbreviateNumber(w,5);}else{if(b){z=T.formatByMask(b,w);}else{z=w;}}var n=this.def,o=n&&n.clientDef;AB="Average";h=I.AVG;if(!!(n&&n.tp)){h=n.tp;switch(h){case I.MAX:AB=mstrmojo.desc(2125,"Maximum");break;case I.MIN:AB=mstrmojo.desc(2127,"Minimum");break;case I.AVG:AB=mstrmojo.desc(2122,"Average");break;case I.MED:AB=mstrmojo.desc(2126,"Median");break;case I.FIRST:AB=mstrmojo.desc(4046,"First");break;case I.LAST:AB=mstrmojo.desc(4049,"Last");break;case I.CONST:AB=mstrmojo.desc(7194,"Constant");break;}}if(k===true){if(h===I.CONST&&o&&!!o[E.REF_LINE_NAME]){s=o[E.REF_LINE_NAME];}else{s=l?(AB+" Axis"):(AB+" "+d);}return s+": "+z;}if(o){var f=o.refLbShw;if(!f){return"";}var e=o.refLbTp;if(e&U.DssModelLabelsType){g.push(AB);}if(e&U.DssModelLabelsMetric){if(!l){g.push(d);}else{g.push("Axis");}}if(e&U.DssModelLabelsValue){g.push(z);}if(x){return g;}return g.join(" ");}var AE;if(l){AE=[AB,"Axis",z];}else{AE=[AB,d,z];}if(x){return AE;}return AE.join(" ");},getReferenceLineValue:function(){return this.trendLineModel.tmData.inChartModel[0].model;},getReferenceLineDirection:function(){return this.trendLineModel.direction;},getBBSection:function(){var f=this,d,c,b=f.trendLineModel,e=b.tmData,g=e.inChartModel;d=f.bbIdx;c=g[d];return c;},getForcastLabelDataPairs:function(h,f){if(!this.isTrendLine){return undefined;}if(f===undefined){f=true;}var c=h?this.getFwdLabels(f):this.getBwdLabels(f),b=c.length,e=[],d,g=h?this.getFwdData():this.getBwdData();for(d=0;d<b;d++){e.push({lb:c[d],v:g[d]});}return e;},getFwdLabels:function(b){if(!this.isTrendLine){return undefined;}return S.call(this,true,b);},getFormulas:function(){if(!this.isTrendLine){return undefined;}var c=this.getBBSection(),b=c.model;return b.formulas;},getCoefficients:function(b){b=b||false;var d=this.getFormulas()[0],c=["coefficients","coefficients(seasonal)"];if(b){return(d&&(d[c[0]]||d[[c[1]]]))||[];}return(d&&d[c[0]])||[];},getTrendLineType:function(){var e=["Linear","Exponential","Power","Poly","Log"],c=[J.DssGraphRegressionLinear,J.DssGraphRegressionExp,J.DssGraphRegressionPow,J.DssGraphRegressionPoly,J.DssGraphRegressionLog],f,d,b;f=this.getFormulas();if(f){d=f[0].type;b=e.indexOf(d);if(b>=0){return c[b];}}return J.DssGraphRegressionNone;},getFwdData:function(e){if(!this.isTrendLine){return undefined;}var g=this.trendLineModel.dp;if(!g.fwdEnabled){return[];}var c=this.getBBSection(),d,f=g.getChartInfo(),b=c.model;if(e){d=[];H.forEach(b.fwdins,function(h){d.push(h[0]);});return d;}if(!c.fse&&f.isABL){return[];}return b.fwdfsts;},getBwdLabels:function(b){if(!this.isTrendLine){return undefined;}return S.call(this,false,b);},getBwdData:function(e){if(!this.isTrendLine){return undefined;}var g=this.trendLineModel.dp;if(!g.bwdEnabled){return[];}var c=this.getBBSection(),d,f=g.getChartInfo(),b=c.model;if(e){d=[];H.forEach(b.bwdins,function(h){d.push(h[0]);});return d;}if(!c.bse&&f.isABL){return[];}return b.bwdfsts;},getRefLineLabelIdentity:function(){var b={objType:L.REF_LINE_LABEL,lineModel:this,tlOpt:this.trendLineOpt};return new A(b);},getIdentity:function(){var b={objType:this.isTrendLine?L.TREND_LINE:L.REF_LINE,lineModel:this,tlOpt:this.trendLineOpt};return new A(b);},testSingleTrendLineModel:function(){var c=this.seriesId,b;if(this.isTrendLine){b=this.getTrendLineValues();K.visPrint("trend line values for seriers "+c+" : "+JSON.stringify(b));K.visPrint("fwd info :"+JSON.stringify(this.getForcastLabelDataPairs(true,true)));K.visPrint("bwd info :"+JSON.stringify(this.getForcastLabelDataPairs(false,true)));K.visPrint("values including forecast: "+JSON.stringify(this.getTrendLineValuesWithForecast()));}else{b=this.getReferenceLineValue();K.visPrint("reference line  for "+this.getReferenceLineLabel()+" : "+JSON.stringify(b));K.visPrint("direction of reference line is "+this.getReferenceLineDirection());}K.visPrint("thickness: "+this.getLineThickness());K.visPrint("line color "+this.getLineColor());K.visPrint("line style "+this.getLineRenderType());K.visPrint("-------------------------------------------------------------------");}});mstrmojo.gm.TrendLineModel=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.TrendLineModel",isTrendLine:undefined,init:function R(b){this._super(b);},getValidSeriesIndex:function(){var o=this.tmData,k=o.trm,c=this.dp,f,e,p=this.seriesIds,b=p.length,d=c.innerGetGroupCount(),g,n,h,l;for(f=0;f<b;f++){l=p[f];g=[];for(e=0;e<d;e++){n=c.innerGetGraphCell(l,e);h=n.getAssoDataWithMetricIndex(k,true);g.push(h);}if(X(g)>1){return f;}}return 0;},getSingleTrendLines:function(b){var k=this,e=this.tmData,n=this.seriesBBUnits,l=this.seriesIds,f=0,c=e.inChartModel,g=[],j,h,d;H.forEach(c,function(o){j=o.bbes;if(j){h=a.indexOf(n,j);}else{if(k.isTrendLine){h=k.getValidSeriesIndex();}else{h=0;}}d=l[h];o.seriesId=d;g.push(new B({trendLineModel:k,bbIdx:f,seriesId:d,isTrendLine:k.isTrendLine,trendLineOpt:k.trendLineOpt}));f++;});if(k.isTrendLine&&b){H.forEach(g,function(q){var p=q.getFwdLabels(false);var o=q.getBwdLabels(false);if(b.fwdLbs===undefined||b.fwdLbs.length<p.length){b.fwdLbs=p;}if(b.bwdLbs===undefined||b.bwdLbs.length<o.length){b.bwdLbs=q.getBwdLabels(false);}});}return g;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums");var C=mstrmojo.gm.EnumAxisScale,A=mstrmojo.gm.GMUtility;var B=mstrmojo.gm.GMAxisScale=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMAxisScale",axKey:undefined,rMin:undefined,rMax:undefined,mMin:undefined,mMax:undefined,logScale:false,scaleType:undefined,minMax:undefined,isCust:false,autoMin:false,autoMax:false,init:function(D){this._super(D);if(this.mMin===undefined){this.mMin=this.rMin;}if(this.mMax===undefined){this.mMax=this.rMax;}if(D.minMax!==undefined&&D.minMax!==C.CUSTOM){this.scaleType=D.minMax;}},absorbInfo:function(D){var E;if(this.axKey!==D.axKey){return ;}this.logScale=D.logScale;this.scaleType=D.scaleType;E=this.isCust=D.isCust;if(E===false){return ;}this.mMin=D.mMin;this.mMax=D.mMax;this.autoMin=D.autoMin;this.autoMax=D.autoMax;},serialize2String:function(){return[this.axKey,this.scaleType,this.mMin,this.mMax,this.rMin,this.rMax,this.logScale,this.autoMin,this.autoMax].join(":");}});mstrmojo.gm.GMAxisScale.createAxisScaleFromArr=function(D){var E={axKey:D[0],scaleType:parseInt(D[1],10),mMin:parseFloat(D[2]),mMax:parseFloat(D[3]),rMin:parseFloat(D[4]),rMax:parseFloat(D[5]),logScale:D[6]===""?undefined:A.isTrueForBoolValue(D[6]),autoMin:A.isTrueForBoolValue(D[7]),autoMax:A.isTrueForBoolValue(D[8])};E.isCust=(E.mMin!==E.rMin||E.mMax!==E.rMax)||E.scaleType===C.CUSTOM;return new B(E);};mstrmojo.gm.GMAxisScale.createAxisScaleCollectionFromArrays=function(E,D){D=D||{};E.forEach(function(F){D[F[0]]=mstrmojo.gm.GMAxisScale.createAxisScaleFromArr(F);});return D;};mstrmojo.gm.GMAxisScale.createAllMetricsAxObj=function(D){var M,I={axKey:"AllMetrics"},F=[],H=[],J,E=true,L=true,G=true;if(D.AllMetrics!==undefined){return ;}for(M in D){if(M!=="AllMetrics"&&D.hasOwnProperty(M)){J=D[M];if(I.rMin===undefined){I.rMin=J.rMin;}else{if(I.rMin>J.rMin){I.rMin=J.rMin;}}F.push(J.mMin);if(I.mMin===undefined){I.mMin=J.mMin;}else{if(I.mMin>J.mMin){I.mMin=J.mMin;}}if(I.rMax===undefined){I.rMax=J.rMax;}else{if(I.rMax<J.rMax){I.rMax=J.rMax;}}H.push(J.mMax);if(I.mMax===undefined){I.mMax=J.mMax;}else{if(I.mMax<J.mMax){I.mMax=J.mMax;}}if(I.logScale===undefined){I.logScale=J.logScale;}else{if(I.logScale!==J.logScale){E=false;}}if(I.scaleType===undefined){I.scaleType=J.scaleType;}else{if(I.scaleType!==J.scaleType){I.scaleType=C.DIFFERENT;}}if(I.autoMin===undefined){I.autoMin=J.autoMin;}else{if(I.autoMin!==J.autoMin){I.autoMin=false;L=false;}}if(I.autoMax===undefined){I.autoMax=J.autoMax;}else{if(I.autoMax!==J.autoMax){I.autoMax=false;G=false;}}}}if(!E){I.logScale=undefined;}I.isCust=(I.mMin!==I.rMin||I.mMax!==I.rMax)||I.scaleType===C.CUSTOM;if(I.scaleType===C.CUSTOM){var K=false;H.forEach(function(N){if(N!==I.mMax){K=true;}});F.forEach(function(N){if(N!==I.mMin){K=true;}});if(!L||!G){K=true;}if(K){I.scaleType=C.DIFFERENT;}}D.AllMetrics=new B(I);return D.AllMetrics;};mstrmojo.gm.GMAxisScale.serializeCollection2String=function(G){var E,F=G.AllMetrics,D=[];if(F===undefined){F=mstrmojo.gm.GMAxisScale.createAllMetricsAxObj(G);}D.push(F.serialize2String());for(E in G){if(E!=="AllMetrics"&&G.hasOwnProperty(E)){D.push(G[E].serialize2String());}}return D.join(",");};}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.VisualizationEditorUnitList");mstrmojo.gm.DndItemRenderer=mstrmojo.declare(mstrmojo.vi.ui.VisualizationEditorUnitList,null,{scriptClass:"mstrmojo.gm.DndItemRenderer",renderItem:function A(E,B){var F=this.itemRenderer,C=F&&F.render,D=document.createElement("div");D.innerHTML=C(E,B,this);return D.firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFontAlignment","EnumFontStyle","EnumFontRotation","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMAxisScale");var AO=mstrmojo.chart,V=mstrmojo.hash,AX=mstrmojo.gm,Ab=AX.GMUtility,O=mstrmojo.VisUtility,P=AX.EnumGraphType,D=AX.EnumSubtype,M=AX.EnumABLDirection,j=AX.EnumColorByType,Z=AX.EnumShape,s=AX.EnumGMZoneIds,T=mstrmojo.array,o=AX.EnumIdentityType,K=AX.FormatingPropertyTag,b=AX.WidgetPropertyTag,AW=false,J=3,AU=4,E=mstrmojo.gm.ShapeFillType,AN=true;function AJ(){var Al=this.dp,Ak=Al.lds,Ae=this.groupData.length,Ai=[],Ah=Ak.getOffsetX(),Af=Ak.getOffsetY(),Aj,Ag;for(Aj=0;Aj<Ae;Aj++){Ai.push(this.groupData[Aj].C-Ah);}Ag=this.groupData[0].R-Af;return{lr:Ag,lcs:Ai};}function AD(Ai){var Ae=parseInt(Ai,10),Al=this.dp,Ah=Al.lds,Ag=Ah.gmm,Af=Al.getMetricIds(),Ak,Aj=Al.getMetricNames();if(Ae<0){return undefined;}Ak=Ag.getFullNumberFormat();return{idx:Ae,metric:Aj[Ae],id:Af[Ae],fullNf:Ak!==undefined?Ak[Ae]:undefined};}function AP(An,Ah){var Ag=this.dataSbc,Ae,Ai,Aq,Af=this.getChartInfo(),Aj=this.lds,Ak=Aj.gmm,Ap=Ak.onlyMetricNamesOnAxisForGridPie,Ao=Ak.isMetricNamesOnXAxis,Al=-1;if(Ag===true){Ai=parseInt(An,10);Ae=parseInt(Ah,10);}else{Ae=parseInt(An,10);Ai=parseInt(Ah,10);}if(this.cache[Ae]===undefined){this.cache[Ae]=[];}if(this.cache[Ae][Ai]!==undefined){return this.cache[Ae][Ai];}if(Ap){if(Ao){Al=this.metricsOnAngleBy[Ae];}else{Al=this.metricsOnAngleBy[Ai];}}Aq=this.data[Ae][Ai];var Am=null;if(Aq){Am=new u({groupData:Aq,dp:this,chtInfo:Af,metricsOnAngleBy:Ap?[Al]:this.metricsOnAngleBy,splitPie:this.splitPie,sID:An,gID:Ah,metricIndexForLabelForGridPie:Al});this.cache[Ae][Ai]=Am;}return Am;}function X(Ak){var Ar=this,Ai,Am=this.dp.lds,Ap=Am.gmm,Aj=[s.XAXIS,s.YAXIS,s.COLORBY,s.SIZEBY,s.TOOLTIP],Af=this.chtInfo,An,Al=Ak.length;function As(At){var Au=[];T.forEach(At,function(Av){if(Av.toDelete!==true){Au.push(Av);}});return Au;}function Ao(At){if(Ap.isMetricInZone(Ak[Ai].midx,At)){An.push(At);}}if(Af.isABL){var Ag=Ar.getMetricIndex(0);var Ae=Af.dirc===M.VERTICAL?s.YAXIS:s.XAXIS;for(Ai=0;Ai<Al;Ai++){An=[];T.forEach(Aj,Ao);if(An.length===0){Ak[Ai].toDelete=true;}if(An.length===1&&An[0]===Ae){if(Ag!==Ak[Ai].midx){Ak[Ai].toDelete=true;}}}}if(Af.isBubbleOrScatter){var Ah=[];this.getMetricsIndexArray(Ah);for(Ai=0;Ai<Al;Ai++){An=[];T.forEach(Aj,Ao);if(An.length===0){Ak[Ai].toDelete=true;}if(!!!Ak[Ai].toDelete&&Ah.indexOf(Ak[Ai].midx)<=-1){if(An.indexOf(s.TOOLTIP)===-1&&An.indexOf(s.COLORBY)===-1){Ak[Ai].toDelete=true;}}}}if(Af.isPie){var Aq=[s.XAXIS,s.YAXIS,s.SIZEBY];for(Ai=0;Ai<Al;Ai++){if(Ak[Ai].toDelete===true){continue;}An=[];T.forEach(Aq,Ao);if(An.length===0){Ak[Ai].toDelete=true;}}}return As(Ak);}function AC(Ae){return(Ae.R!==undefined&&Ae.C!==undefined&&Ae.oy!==undefined&&Ae.ox!==undefined);}function AT(Aw,BA,A6){var A4=this.dp.lds,BI=this.chtInfo,Ag=A4.gmm,BB=Ag.gmCtr,Aj=BB.rowHeaderCnt,Af=BB.colHeaderCnt,A5,A8,Ap=Ag.getUnitAttributesCountOnRow(true),Ai=Ag.getUnitAttributesCountOnCol(true),At=BB.getGMHeaderCount("SliceBy"),A0=Ap,Ao=Ai,Ar,Ae,BD=Aw.length===0,Ak,BK,BG,Ah,BJ=Ag.getMetricNames(),Ax=BJ.length,BC,A3,As;var BE=this.groupData[0],A1=A4.getOffsetX(),Az=A4.getOffsetY(),A2=BE.R-Az,A7=BE.C-A1;Ar=Ap-Aj;Ae=Ai-Af;if(At>0&&BI.isPie){if(BI.isABL&&BI.dirc===AX.EnumABLDirection.HORIZONTAL){Ae-=At;Ao-=At;}else{Ar-=At;A0-=At;}}if(Ar>0){A5=A4.getRowHeaders(A2,"all",BA===true?"n&id&dei&o&at&idx":"n&idx");Ak=Ag.getRowTitleInfo();if(Aw.length>0){if(!BA){Aw.push(null);}BD=true;}Ab.generateToolTipContent(Aj,A0,true,Ak,A5,Aw,!BA);}if(Ae>0){A8=A4.getColHeaders(A7,"all",BA===true?"n&id&dei&o&at&idx":"n&idx");BK=Ag.getColTitleInfo();if(!BD&&Aw.length>0){if(!BA){Aw.push(null);}BD=true;}Ab.generateToolTipContent(Af,Ao,false,BK,A8,Aw,!BA);}if(!BA&&Ax>0){if(!BD&&Aw.length>0){if(!BA){Aw.push(null);}BD=true;}A3=[];Ah=[];Ah.push(A7);for(BG=0;BG<Ax;BG++){BC=A4.getAssoDataWithMetricIndex(A2,Ah,BG,false);A3.push({n:BJ[BG],v:BC,midx:BG});}A3=X.call(this,A3);As=A3.length;for(BG=0;BG<As;BG++){Aw.push(A3[BG]);}if(BI.isABL&&BI.sbtp===D.PERCENT){var Al=BE.grp,An=this.dp.getTotalOfGroup(Al),A9=this.getData(0),Am=mstrmojo.desc(14141,"Percent Contribution"),Ay=A9/An;Ay=(Ay*100).toFixed(2)+"%";Aw.push({n:Am,v:Ay,isPerCon:true});}}if(BA&&A6){var Av=[],BF,Aq,Au,BH;this.getMetricsIndexArray(Av);Av=Av.slice(0,this.groupData.length);Aq=Av.length;Au=Ag.getMetricIDsFromIndex(Av);BH=Ag.getMetricNamesFromIndex(Av);for(BF=0;BF<Aq;BF++){Aw.push({eid:Au[BF],n:"Metrics",tid:-1,v:BH[BF]});}}return Aw;}function AZ(Ah,Aj){var Ag=Ah.getOffsetX(),Ae=Ah.getOffsetY(),Af=Aj.R-Ae,Ai=Aj.C-Ag;return Ah.getData(Af,Ai);}function R(Ah,Ak){var Aj=this.isPie,Ai=this.gc,Ae=this.sPieDP,Ag=this.sliceIdx,Af;if(!Aj){Af=Ai.getTooltipContent(Ah,Ak);}else{Af=Ae.getTooltipContent(Ag,Ah,Ak);}return Af;}function AL(Ag,Ah){var Af,Ae;if(Ag){Ae=Ag.length;for(Af=0;Af<Ae;Af++){if(Ag[Af].id===Ah){return Af;}}}return -1;}function AB(Af,Ae){var Ai,Ag=[],Ah;Ai=this.getSelectedObjectInfo(Ae);Ah=Ab.reverseMapping(Af);T.forEach(Ai,function(Aj){if(Aj.tid===-1){Ag.push(Aj);}else{if(Ah[Aj.tid]!==undefined){Ag.push(Aj);}}});return Ag;}var f=mstrmojo.declare(mstrmojo.Base,null,{init:function AE(Aj){this._super(Aj);var An=this.gc,Am,Ao,Ah,Al,Ap,Ae,Ag,Ai=-1,Af=-1;if(this.isFaked){return ;}Am=An.dp.lds.gmm.gmCtr;Ao=Am.dz;Ah=this.hInfo;if(Ah.isAtt===false){return ;}Al=Ah.unit;Ap=["XAxis","YAxis"];if(Al.otp!==4){for(Ag=0;Ag<Ap.length;Ag++){Ae=Ao[Ap[Ag]];var Ak=AL(Ae.TemplateUnit,Al.id);if(Ak>=0){Af=Ak;if(Ag===0){Ai=J;}else{Ai=AU;}break;}}this.dzindex=Af;this.dzid=Ai;}}});var z=mstrmojo.declare(mstrmojo.Base,null,{getGraphCell:function(){var Ae;if(this.isPie){Ae=this.sPieDP.graphCell;}else{Ae=this.gc;}return Ae;},getShape:function(){var Ae=this.getChartInfo();if(Ae.isABL){return this.getGraphCell().getShape();}return Ae.shape;},getAssMetricDataLabelID:function(){var Ai,Ag=this.getGraphCell(),Ah=Ag.getGMCtr(),Aj=Ag.chtInfo;if(this.isPie===false){if(Aj.isABL){Ai=Ag.getMetric(0);}else{if(Aj.tp===P.BUBBLE||Aj.tp===P.SCATTER){Ai=Ag.getMetric(1);}else{if(!Ah.hasSizeBy()){Ai=undefined;}else{Ai=AD.call(Ag,Ah.getSizeByMetrics()[0]);}}}}else{var Ae=this.sPieDP,Af=this.sliceIdx;Ai=Ae.getMetric(Af);}if(Ai!==undefined){return Ai.id;}return undefined;},getTooltipContent:function(){return R.call(this,false);},getSelectedObjectInfo:function(Ah){var Ag=Ah?"objectInfoWithMetric":"objectInfo";if(this[Ag]){return this[Ag];}var Ae=R.call(this,true,Ah),Af=[];T.forEach(Ae,function(Ai){if(Ai){Af.push(Ai);}});if(Af.length>1){Af.sort(Ab.compareElementObj);}this[Ag]=Af;return Af;},getSelectedObjectMetricInfo:function(Ag){if(this.objectMetricInfo){return this.objectMetricInfo;}var Af,Ae=[];if(Ag){Af=Ag;}else{Af=this.getSelectedObjectInfo(true);}T.forEach(Af,function(Ah){if(Ah.tid===-1){Ae.push(Ah);}});this.objectMetricInfo=Ae;return Ae;},getSelectedObjectColorByInfo:function(){if(this.objectColorByInfo){return this.objectColorByInfo;}var Ai=[],Aj,Ag,Ak,Al,Ah,Af=false;if(this.isPie){Aj=this.sPieDP.graphCell;}else{Aj=this.gc;}Ag=Aj.dp.lds.gmm;Ak=Ag.gmCtr;if(Ag.colorType!==j.NULL){Al=Ak.getColorByAttrsID();if(Ag.colorType===j.ATT_METRICS||Ag.colorType===j.METRICS_ITEM){Af=true;}Ai=AB.call(this,Al,Af);Ah=Ak.colorByInfo.tp;if(Ah===j.METRICS_ITEM||Ah===j.ATT_METRICS){if(Aj&&Aj.chtInfo&&Aj.chtInfo.isBubbleOrScatter){var Ae=Aj.getSizeByMetricFormat();if(Ae){Ai.push({eid:Ae.id,n:"Metrics",tid:-1,v:Ae.metric});}}}}this.objectColorByInfo=Ai;return Ai;},getSelectedObjectBreakByInfo:function(Ak){var Aj=Ak?"objectBreakByInfoWithMetric":"objectBreakByInfo";if(this[Aj]){return this[Aj];}var Af,Ag,Ae,Ah,Ai,Al;if(this.isPie){Ag=this.sPieDP.graphCell;}else{Ag=this.gc;}Ae=Ag.dp.lds.gmm;Ah=Ae.gmCtr;Ai=Ah.getColorByAttrsID();Al=Ah.getBreakByAttrsID();Af=AB.call(this,Al.concat(Ai),Ak);this[Aj]=Af;return Af;},getSelectedObjectSliceByInfo:function(Af){var Ah=Af?"objectSliceByInfoWithMetric":"objectSliceByInfo";if(this[Ah]){return this[Ah];}var Ai,Am,Ag,Al,Ae,Aj,Ak;if(this.isPie){Am=this.sPieDP.graphCell;}else{Am=this.gc;}Ag=Am.dp.lds.gmm;Al=Ag.gmCtr;Ae=Al.getColorByAttrsID();Aj=Al.getBreakByAttrsID();Ak=Al.getSliceByAttrsID();Ai=AB.call(this,Aj.concat(Ae.concat(Ak)),Af);this[Ah]=Ai;return Ai;},getSelectedSliceAngleByMetric:function(){if(this.isPie){return this.sPieDP.getSelectedSliceAngleByMetric(this.sliceIdx);}return undefined;},getSelectedObjectLowestLevel:function(Af){var Ae=this.getGraphCell(),Ag=Ae.chtInfo;if(Ag.isPie){return this.getSelectedObjectSliceByInfo(Af);}return this.getSelectedObjectBreakByInfo(Af);},isEqualToObjectInfo:function(Ae,Ag){var Af=this.getSelectedObjectInfo(Ag);return Ab.isEqualComb(Af,Ae);},isEqualToIdentity:function(Ae,Af){if(!Ae){return false;}return this.isEqualToObjectInfo(Ae.getSelectedObjectInfo(Af),Af);},getChartInfo:function(){var Ae=this.gc||this.sPieDP.graphCell,Ah=Ae.dp,Ag=Ah.lds.gmm.gmCtr;var Af=Ag.getChartInfo();if(Af.isCombo){Af.currentMarkerShape=Ah.getShapeBySeries(Ae.sID);if(Af.currentMarkerShape===7){Af.currentMarkerShape=200;}else{if(Af.currentMarkerShape===2){Af.currentMarkerShape=204;}else{if(Af.currentMarkerShape===1){Af.currentMarkerShape=205;}else{if(Af.currentMarkerShape===0){Af.currentMarkerShape=206;}else{if(Af.currentMarkerShape===4){Af.currentMarkerShape=4;}else{if(Af.currentMarkerShape===5||Af.currentMarkerShape===6){Af.currentMarkerShape=24;}}}}}}}else{if(Af.isABL&&Af.ceMarkerShape===undefined){Af.ceMarkerShape=Ah.getShapeBySeries(Ae.sID);if(Af.ceMarkerShape===7){Af.ceMarkerShape=200;}else{if(Af.ceMarkerShape===2){Af.ceMarkerShape=204;}else{if(Af.ceMarkerShape===1){Af.ceMarkerShape=205;}else{if(Af.ceMarkerShape===0){Af.ceMarkerShape=206;}else{if(Af.ceMarkerShape===4){Af.ceMarkerShape=4;}else{if(Af.ceMarkerShape===5||Af.ceMarkerShape===6){Af.ceMarkerShape=24;}}}}}}}Af.currentMarkerShape=Af.ceMarkerShape;}return Af;}});var r=mstrmojo.declare(mstrmojo.Base,null,{graphCell:undefined,tot:undefined,sliceByMetrics:undefined,sliceIdentities:undefined,init:function AE(Ag){this._super(Ag);this.dataCache={};this.sliceIdentities=[];this.sliceDataLabelIdentities=[];var Ai=this.innerGetSliceCount(),Af,Ah=true,Ae=[];for(Af=0;Af<Ai;Af++){if(this.innerGetData(Af)!==0){Ae.push(Af);}else{Ah=false;}}this.allValid=Ah;this.validSlices=Ae;},innerGetSliceCount:function(){var Ai=this.graphCell,Ah=Ai.groupData,Ag=Ah.slicesOfPie,Aj=this.angleBy.length,Af=Ai.dp.lds.gmm,Ae=Af.onlyMetricNamesOnAxisForGridPie;if(Aj===0){return Ag.length;}if(Ae){Aj=1;}return Ag.length*Aj;},getInnerSliceIndex:function(Af,Ae){if(Ae){return Af;}return this.validSlices[Af];},getOutSliceIndex:function(Ag,Af){if(Af){var Ae;if(this.allValid){return Ag;}for(Ae=0;Ae<this.validSlices.length;Ae++){if(this.validSlices[Ae]===Ag){return Ae;}}}return Ag;},getSelectedSliceAngleByMetric:function(Ag){var Ai=this.getInnerSliceIndex(Ag),Ae=this.graphCell.dp.lds.gmm,Aj=this.angleBy.length;if(Aj>0){var Ah=this.getMetricNameOfSlice(Ai,true),Af=this.getMetricIndexOfSlice(Ai,true);return{n:"Metrics",tid:-1,v:Ah,eid:Ae.getMetricIDsFromIndex([Af])[0]};}return undefined;},getSliceCount:function(){return this.validSlices.length;},getTooltipContent:function(Ax,As,Ah){var Ar=this.getInnerSliceIndex(Ax),Aq,A0=this.graphCell,An=this.getSliceTitles(),Ay=this.getSliceLabel(Ar,true),Av=An.length,Ap=this.angleBy.length,Aw,Al,Am,Au,Af,Aj,Ag,Ai=A0.dp.lds.gmm,Az=Ai.gmCtr,Ak,Ae=Ai.getMetricNames();Aq=A0.getTooltipContent(As,Ah);if(Aq.length>0&&Aq[Aq.length-1]!==null){if(!As){Aq.push(null);}}Ab.generateToolTipContent(0,Av,undefined,An,Ay,Aq);if(Ap>0){Am=this.getMetricNameOfSlice(Ar,true);Ak=this.getMetricIndexOfSlice(Ar,true);if(!As){Au=this.innerGetData(Ar,Ak,false);for(Aw=0;Aw<Aq.length;Aw++){if(Aq[Aw]!==null&&(Aq[Aw].n===Am||Aq[Aw].isPerCon)){Aq[Aw].n=mstrmojo.desc(2121,"Total")+" "+Aq[Aw].n;}}Aq.push({n:Am,v:Au});Af=mstrmojo.desc(14141,"Percent Contribution");Aj=this.getPercentage(Ar,true);Aj=(Aj*100).toFixed(2)+"%";Aq.push({n:Af,v:Aj});var At=Az.colorByInfo;if(At.tp===j.METRICS&&At.metrics){var Ao=At.metrics[0].n;if(Ao!==Am){for(Aw=0;Aw<Aq.length;Aw++){if(Aq[Aw]!==null&&Aq[Aw].n===Ao){Aq[Aw].n=mstrmojo.desc(2121,"Total")+" "+Aq[Aw].n;}}Aq.push({n:Ao,v:this.innerGetData(Ar,At.metrics[0].idx,false)});}}}else{if(Ai.colorType===j.ATT_METRICS||Ai.colorType===j.METRICS_ITEM){Aq.push({n:"Metrics",tid:-1,v:Am,eid:Ai.getMetricIDsFromIndex([Ak])[0]});}}}if(!As){Al=Az.getMetricsOnTooltip();Av=Al.length;for(Aw=0;Aw<Av;Aw++){Ag=Al[Aw];Am=Ae[Ag];Au=this.innerGetData(Ar,Ag,false);Aq.push({n:Am,v:Au});}}return Aq;},getDataLabelIdentity:function(Ai,Ag){var Al=this.getOutSliceIndex(Ai,Ag);var Ak=this.sliceDataLabelIdentities;if(Ak[Al]===undefined){var Aj=this.graphCell,Af=Aj.dp.lds.gmm.cct,Ae=this.getCoordinates(Al),Ah=Ae.R*Af+Ae.C;Ak[Al]=new z({objType:o.DATA_LABEL,sPieDP:this,isPie:true,sliceIdx:Al,id:Ah});}return Ak[Al];},getIdentity:function(Ai,Ag){var Al=this.getOutSliceIndex(Ai,Ag);var Ak=this.sliceIdentities;if(Ak[Al]===undefined){var Aj=this.graphCell,Af=Aj.dp.lds.gmm.cct,Ae=this.getCoordinates(Al),Ah=Ae.R*Af+Ae.C;Ak[Al]=new z({objType:o.GRAPH_SHAPE,sPieDP:this,isPie:true,sliceIdx:Al,id:Ah});}return Ak[Al];},getCoordinates:function(At,Ag,Af){var Aq=this.getInnerSliceIndex(At,Af);var Au=this.graphCell,As=Au.dp.lds.gmm,Ah=As.onlyMetricNamesOnAxisForGridPie,Ar=this.angleBy,Ap=Ah?1:Ar.length;var Av=Au.groupData,Ae=Av.slicesOfPie,Ak,Ao,Am=Au.dp.lds,Aj=Am.getOffsetX(),Ai=Am.getOffsetY(),Aw=[],Al,An;if(Ap>0){Ak=parseInt(Aq/Ap,10);}else{Ak=Aq;}Ao=Ae[Ak];An=Ao[0];Al=An.R-Ai;Aw.push(An.C-Aj);if(Ag!==undefined){return Am.getAssoCoordinatesWithMetricIndex(Al,Aw,Ag);}if(Ap>0){return Am.getAssoCoordinatesWithMetricIndex(Al,Aw,Ar[Aq%Ap]);}return Am.getAssoCoordinatesWithMetricIndex(Al,Aw,0);},getMetricNameOfSlice:function(Ai,Ah){var Ag=this.getMetricIndexOfSlice(Ai,Ah),Aj=this.graphCell,Af=Aj.dp.lds.gmm,Ae;if(Ag<0){return"";}Ae=Af.getMetricNames();return Ae[Ag];},getMetricIndexOfSlice:function(Ae,Ak){var Ah=this.getInnerSliceIndex(Ae,Ak),Aj=this.graphCell,Am=this.angleBy,Ag=Am.length,Ai,Af=Aj.dp.lds.gmm,Al=Af.onlyMetricNamesOnAxisForGridPie;if(Ag===0){return -1;}if(Al){Ai=Aj.metricIndexForLabelForGridPie;}else{Ai=Am[Ah%Ag];}return Ai;},getMetric:function x(Ag,Af){var Ah=this.getInnerSliceIndex(Ag,Af);var Ae=this.getMetricIndexOfSlice(Ah,true);if(Ae>=0){return AD.call(this.graphCell,Ae);}return undefined;},isIndividualFormatted:function(Ah,Ag){var Ak=this.getInnerSliceIndex(Ah,Ag);var Aj=this.graphCell.getGMCtr(),Af,Ai,Ae;Af=this.getIdentity(Ak,true);Ai=Af.getSelectedObjectLowestLevel(true);Ae=Aj.getShapeFormatsWithCombination(Ai);return !!Ae;},getFormattingProperties:function(Ap,Af){var Ay,Al=this.getInnerSliceIndex(Ap,Af),Ax,As=this.graphCell.getGMCtr(),An,Aw,Ag,Au,At,Ah=K.ALL_SHAPE_FORMAT,Am,Av,Aq;An=As.getDefaultsForShape(As.getChartInfo().shape);Ax=this.getIdentity(Al,true);var Ae=As.getShapeFormatsObject();if(Ae){Aq=Ax.getSelectedObjectLowestLevel(true);Am=Ax.getSelectedObjectMetricInfo(Aq);Av=Ax.getSelectedObjectColorByInfo();}Aw=this.graphCell.getPropertyValue(Ah);Ag=As.getShapeFormatsWithCombination(Am);Au=As.getShapeFormatsWithCombination(Av);At=As.getShapeFormatsWithCombination(Aq);Ay=Ab.getResolvedFormatsObject([An,Aw,Ag,Au,At]);var Ak=this.getColorByData(Al,true),Ar;if(Ay===An){Ar=As.getVolatileDefaultsForShape(As.getChartInfo().shape);}else{Ar=Ay;}Ak=(Ak!==undefined&&Ak!==null)?Ak:Ar[K.SHAPE_FILL_COLOR];var Ai=false;if(Ak&&typeof Ak==="object"){Ai=true;}if(Ak!==undefined){Ar[K.SHAPE_LINE_COLOR]=Ar[K.SHAPE_FILL_COLOR]=Ak;if(Ay[K.LINE_MARKER_COLOR]===undefined){Ar[K.LINE_MARKER_COLOR]=Ai?Ak.c1:Ak;}if(Ay[K.LINE_MARKER_BORDER_COLOR]===undefined){Ar[K.LINE_MARKER_BORDER_COLOR]=Ai?Ak.c1:Ak;}if(Ay[K.SHAPE_BORDER_COLOR]===undefined){Ar[K.SHAPE_BORDER_COLOR]=Ai?Ak.c1:Ak;}}Ar[K.SHAPE_FILL_STYLE]=Ai?E.Gradient:E.Solid;var Aj=this.graphCell.getPropertyValue(b.METRIC_LEVEL_DATA_LABEL);if(Aj===undefined){Ar[K.DATA_LABELS_SHOW]=AN;}else{var Ao=Ax.getAssMetricDataLabelID();if(Ao!==undefined){Ar[K.DATA_LABELS_SHOW]=Aj[Ao];}else{Ar[K.DATA_LABELS_SHOW]=false;}}return Ar;},getData:function(Af,Ah,Ae){var Ag=this.validSlices[Af];return this.innerGetData(Ag,Ah,Ae);},innerGetData:function(Ak,Ah,Ao){if(this.dataCache[Ak]){return this.dataCache[Ak];}var An=this.graphCell,Ar=this.angleBy,Ai=Ar.length,Aq,Ap,Ag,Af,Aj=An.dp.lds;Aq=this.getCoordinates(Ak,Ah,true);Ag=Aq.R-Aq.oy;Af=Aq.C-Aq.ox;var Ae=false,Al=Aj.gmm,Am=Al.gmCtr;Ae=(Am.isGrid()&&Al.getMetricCount()===0);if(!Ae&&Aj.checkExcluded(Ag,Af)){return 0;}if(Ai===0&&Ah===undefined){return 1;}Ap=Aj.getData(Ag,Af,Ao,Ah);if(Ao&&isNaN(Ap)){return 0;}return Ap;},getColorByData:function(Ae,Ap,Af){var Ak=this.getInnerSliceIndex(Ae,Ap),Am;var Ao=this.graphCell,Ah=[],Al,Aq=this.angleBy,Ai=Aq.length,An,Aj=Ao.dp.lds,Ag=Aj.gmm;if(Ag.colorType===j.NULL){return null;}Al=this.getCoordinates(Ak,undefined,true);if(Ag.colorType===j.ATT_METRICS||Ag.colorType===j.METRICS_ITEM){Ao.getMetricsIndexArray(Ah);if(Aq.length!==0){Am=this.getMetricIndexOfSlice(Ae,Ap);if(Am<0){Am=Aq[Ak%Ai];}Ah.push(Am);}}An=Aj.getColorByValue(Al.R-Al.oy,Al.C-Al.ox,Ah,Af);return An;},getPercentage:function(Ah,Ag){var Ai=this.getInnerSliceIndex(Ah,Ag),Ae=Math.abs(this.innerGetData(Ai)),Af=this.getAbsTotalValue();return Ae/Af;},getSliceTitles:function(){var Ak=this.graphCell.dp.lds,Ah=Ak.gmm,Af=Ah.gmCtr,Ae=Af.getChartInfo(),Ag=Af.getGMHeaderCount("SliceBy"),Al=Ae.isABL,Aj=P,Ap=Ae.dirc,Ao=Ae.tp,An=AX.EnumABLDirection,Ai;if((Al&&Ap===An.VERTICAL)||(Ao===Aj.GRID)||(Ao===Aj.BUBBLE||Ao===Aj.SCATTER)){Ai=Ah.getRowTitleInfo();}else{Ai=Ah.getColTitleInfo();if(Ai.length>0){var Am=Ai[Ai.length-1];if(Am.otp===-1){Ai=Ai.slice(0,Ai.length-1);}}}return Ai.slice(Ai.length-Ag);},getSliceLabel:function(A0,Ag){var As=this.getInnerSliceIndex(A0,Ag);var Am=this.graphCell.dp.lds,A1=Am.gmm.gmCtr,Aq=A1.getChartInfo(),At=A1.getGMHeaderCount("SliceBy"),A2=this.graphCell,Au=this.angleBy,Ay=Au.length,Ar=Ay>0&&!Am.gmm.onlyMetricNamesOnAxisForGridPie?Ay:1,A3=A2.groupData,Ae=A3.slicesOfPie,Ak=parseInt(As/Ar,10),Ao=Ae[Ak],Ai=Am.getOffsetX(),Ah=Am.getOffsetY(),Aw,Al,An=Ao[0],Av,Az=Aq.isABL,Aj=P,Ax=Aq.dirc,Af=Aq.tp,Ap=AX.EnumABLDirection;if(At<=0){return[];}if((Az&&Ax===Ap.VERTICAL)||(Af===Aj.GRID)||(Af===Aj.BUBBLE||Af===Aj.SCATTER)){Al=An.R-Ah;Aw=An.C-Ai;Av=Am.getRowHeaders(Al,"SliceBy","n&id&tid&dei&o&at&idx");if(Av.length>At){return Av.slice(Av.length-At);}return Av;}Al=An.R-Ah;Aw=An.C-Ai;Av=Am.getColHeaders(Aw,"SliceBy","n&id&tid&dei&o&at&idx");if(Av.length>At){Av=Av.slice(0,Av.length-1);return Av.slice(Av.length-At);}return Av;},getTotalValue:function(){if(this.tot!==undefined){return this.tot;}var Af=0,Ae,Ag=this.getSliceCount();for(Ae=0;Ae<Ag;Ae++){Af=Af+this.getData(Ae);}this.tot=Af;return Af;},getAbsTotalValue:function(){if(this.tot!==undefined){return this.tot;}var Af=0,Ae,Ag=this.getSliceCount();for(Ae=0;Ae<Ag;Ae++){Af=Af+Math.abs(this.getData(Ae));}this.tot=Af;return Af;},testSinglePieDP:function(){var Ae,Aj,Al,Ai,An,Ap=this.graphCell,Am=Ap.dp.lds,Ak=Am.gmm,Af="default",Ag;Ae=this.getSliceCount();Al=this.getTotalValue();O.visPrint("the angle by metric is "+this.angleBy.join(","));function Ah(Aq){Ag.push(Aq.n);}for(Aj=0;Aj<Ae;Aj++){Ai=this.getData(Aj);if(Ak.colorType!==j.NULL){Af=this.getColorByData(Aj);}An=this.getIdentity(Aj).id;var Ao=this.getSliceLabel(Aj);Ag=[];T.forEach(Ao,Ah);O.visPrint("slice "+Aj+" ("+An+")  is "+Ai+" ("+this.getPercentage(Aj)+") with slice labels: "+Ag.join(","));O.visPrint("color is: "+Af);this.getIdentity(Aj).getTooltipContent();}}});var AA=mstrmojo.declare(mstrmojo.Base,null,{getGroupLabelIdentities:function(){var Af,Ae=[];for(Af=0;Af<10;Af++){Ae.push(new f({gc:this,isGroup:true,isFaked:true}));}return Ae;},getFormattingProperties:function(){return undefined;},getSeriesLabelIdentities:function(){var Af,Ae=[];for(Af=0;Af<10;Af++){Ae.push(new f({gc:this,isGroup:false,isFaked:true}));}return Ae;},getSinglePieDPs:function(){return null;},getFormat:function AV(){return{};},getMetric:function x(){return null;},getMetricIndex:function h(){return null;},getMetricNumberWithDataIndex:function(){return null;},getMetricFormat:function(){return null;},getAxisMetricIndexArr:function(){return null;},getData:function AZ(){return null;},getIdentity:function(){return{isFaked:true};},getSliceIdentity:function(){return null;},getAssoDataWithMetricIndex:function(){return null;},getSizeByData:function q(){return null;},getMetricsIndexArray:function AK(){return null;},getColorByData:function n(){return null;},getSeriesLabel:function C(){return null;},getGroupLabel:function Q(){var Af=this.dp,Al=Af.lds,Ah=Al.flb,Aj=Al.blb,Am=this.gIdx,Ae=Af.bwdSteps,Ai=Af.fwdSteps,Ag,Ak;if(!Af.bwdEnabled){Ae=0;}if(!Af.fwdEnabled){Ai=0;}if(Af.oriGroupCount<0){this.getGroupCount();}Ag=Af.oriGroupCount;if(Am<Ae){Ak=Aj[Am];}else{Ak=Ah[Am-Ae-Ag];}if(Ak){return Ak;}return[];},getThresholdIndex:function c(){return null;},getThreshold:function AG(){return null;},getRowIndex:function p(){return null;},getColIndex:function AM(){return null;},getTooltipContent:function(){return null;}});var u=mstrmojo.declare(mstrmojo.Base,null,{getGMCtr:function(){var Ag=this.dp,Af=Ag.lds,Ae=Af.gmm;return Ae.gmCtr;},getGroupLabelIdentities:function(Ao){if(Ao===undefined){Ao=0;}if(this.gCateAxisLbIdCache===undefined){this.gCateAxisLbIdCache=[];}if(this.gCateAxisLbIdCache[Ao]){return this.gCateAxisLbIdCache[Ao];}var Aj,Am=[],Ag,Ai,An,Ah,Af,Ak,Ae,Al;Ag=this.groupData[Ao];Ai=this.dp;An=Ai.lds;Ah=An.getOffsetX();Af=An.getOffsetY();Ak=Ag.R-Af;Ae=Ag.C-Ah;Al=An.getGroupLabel(Ak,Ae,true);for(Aj=0;Aj<Al.length;Aj++){Am.push(new f({gc:this,isGroup:true,hInfo:Al[Aj]}));}this.gCateAxisLbIdCache[Ao]=Am;return Am;},getPropertyValue:function(Ah){var Ai=this.dp,Af=Ai.lds,Ae=Af.gmm,Ag=Ae.property;return Ag.readItem(Ah);},getShapeFormatsWithCombination:function(Ae){return this.getGMCtr().getShapeFormatsWithCombination(Ae);},isIndividualFormatted:function(){var Ah=this.getGMCtr(),Af,Ag,Ae;Af=this.getIdentity();Ag=Af.getSelectedObjectLowestLevel(true);Ae=Ah.getShapeFormatsWithCombination(Ag);return !!Ae;},getFormattingProperties:function(){var Ag,Ae,Af,Ai=this.getGMCtr(),Aj,Ah;if(Ai.getChartInfo().isPie){O.visPrint("for pie chart, call getFormattingPropertiesOfSlice of SinglePieDataProvider instead");return undefined;}Af=this.getIdentity();Ae=Ai.getShapeFormatsCachedObject(Af);if(!Ae){Aj=Ai.getDefaultsMergedWithAllPropsCachedObject(this);Ah=Ai.getComboLevelPropCachedObject(Af);Ag=Ab.getResolvedFormatsObject([Aj].concat(Ah));Ae=Ai.getShapeColorFormatsCachedObject(this,Af,Ag,Ag===Aj);Ai.setShapeFormatsCachedObject(Af,Ae);}return Ae;},getSeriesLabelIdentities:function(Ao){if(Ao===undefined){Ao=0;}if(this.sCateAxisLbIdCache===undefined){this.sCateAxisLbIdCache=[];}if(this.sCateAxisLbIdCache[Ao]){return this.sCateAxisLbIdCache[Ao];}var Aj,Am=[],Ag,Ai,An,Ah,Af,Ak,Ae,Al;Ag=this.groupData[Ao];Ai=this.dp;An=Ai.lds;Ah=An.getOffsetX();Af=An.getOffsetY();Ak=Ag.R-Af;Ae=Ag.C-Ah;Al=An.getSeriesLabel(Ak,Ae,true);for(Aj=0;Aj<Al.length;Aj++){Am.push(new f({gc:this,isGroup:false,hInfo:Al[Aj]}));}this.sCateAxisLbIdCache[Ao]=Am;return Am;},getGroupElementIndexArray:function(Ak,Am){var Ag=this.groupData[Am],Ai=this.dp,Al=Ai.lds,Ah=Al.getOffsetX(),Af=Al.getOffsetY(),Aj=Ag.R-Af,Ae=Ag.C-Ah;return Al.getGroupElementIndexArray(Aj,Ae,Ak);},getBreakByElementIndexArray:function(Al){var Ak=this.dp,Aq=Ak.lds,Ai=Aq.getOffsetX(),Ag=Aq.getOffsetY(),Ah,Am,Af,Ao,Aj,Ae=Aq.getChartInfo();Ah=this.groupData[0];Am=Ah.R-Ag;Af=Ah.C-Ai;if(Ae.isABL&&Ae.dirc===M.HORIZONTAL){Aj=1;Ao=Af;}else{Ao=Am;Aj=0;}var An=Aq.getHeaderObjectList(Ao,Aj,"BreakBy");if(Al){var Ap=[];T.forEach(An,function(Ar){Ap.push(Ar.idx);});return Ap;}return An;},getSinglePieDPs:function(){if(this.pieDps){return this.pieDps;}var Ag=this.getGMCtr().getChartInfo(),Aj=Ag.isPie,Af=this.metricsOnAngleBy,Ak=this.splitPie,Ah,Am=[],Al,Ai,Ae=false,An;if(!Aj){return Am;}if(Ak){Ah=Af.length;if(Ah===0){Ae=true;Ah=1;}for(Al=0;Al<Ah;Al++){if(Ae){An=[];}else{An=Af.slice(Al,Al+1);}Ai=new r({angleBy:An,graphCell:this,chtInfo:Ag});Am.push(Ai);}}else{Ai=new r({angleBy:Af,graphCell:this,chtInfo:Ag});Am.push(Ai);}this.pieDps=Am;return Am;},getFormat:function AV(Ae){return this.getMetric(Ae);},getMetric:function x(Af){var Ae=this.getMetricIndex(Af);return AD.call(this,Ae);},getShape:function t(Ah){Ah=Ah||0;var Ae=this.getMetricIndex(Ah),Aj=this.dp,Ag=Aj.lds,Af=Ag.gmm,Ai=Af.gmCtr;return Ai.getOnTheFlyShapeForMetric(Ae);},getMetricIndex:function h(Ae){var Af=this.groupData[Ae];return Af.mIdx;},getMetricNumberWithDataIndex:function(Af){var Ae=this.dp.lds,Ag=this.getMetricIndex(Af);return Ae.getMetricNumberFormat(Ag);},getMetricFormat:function(Af){var Ae=this.dp.lds;return Ae.getMetricNumberFormat(Af);},getAxisMetricIndexArr:function(Af){var Ag=this.groupData,Ae=Ag.length,Ah;for(Ah=0;Ah<Ae;Ah++){Af.push(this.getMetricIndex(Ah));}return Af;},getData:function AZ(Ai){var Ak=this.groupData[Ai],Al=this.dp,Ah=Al.lds,Ag=Ah.getOffsetX(),Ae=Ah.getOffsetY(),Af=Ak.R-Ae,Aj=Ak.C-Ag;return Ah.getData(Af,Aj);},getIdentity:function(){if(!this.identity){var Ah=this.getGMCtr().getChartInfo().isPie,Af=this.dp.lds.gmm.cct,Ae=this.groupData[0],Ag=Ae.R*Af+Ae.C;this.identity=new z({objType:o.GRAPH_SHAPE,gc:this,id:Ag,isPie:Ah});}return this.identity;},getMarkerIdentity:function(){if(!this.mkIdentity){var Ah=this.getGMCtr().getChartInfo().isPie,Af=this.dp.lds.gmm.cct,Ae=this.groupData[0],Ag=Ae.R*Af+Ae.C;this.mkIdentity=new z({objType:o.LINE_MARKER,gc:this,id:Ag,isPie:Ah});}return this.mkIdentity;},getDataLabelIdentity:function(){if(!this.dataLabelIdentity){var Ah=this.getGMCtr().getChartInfo().isPie,Af=this.dp.lds.gmm.cct,Ae=this.groupData[0],Ag=Ae.R*Af+Ae.C;this.dataLabelIdentity=new z({objType:o.DATA_LABEL,gc:this,id:Ag,isPie:Ah});}return this.dataLabelIdentity;},getSliceIdentity:function(Ae,Ag){var Af=this.getSinglePieDPs()[Ae];return Af.getIdentity(Ag);},getAssoDataWithMetricIndex:function(Ai,An){var Ah=this.dp,Am=Ah.lds,Al=this.groupData.length,Ae=[],Ag=Am.getOffsetX(),Af=Am.getOffsetY(),Aj,Ak;for(Aj=0;Aj<Al;Aj++){Ae.push(this.groupData[Aj].C-Ag);}Ak=this.groupData[0].R-Af;return Am.getAssoDataWithMetricIndex(Ak,Ae,Ai,An);},getSizeByMetricFormat:function e(){var Aj=this.dp.getChartInfo(),Ai=this.dp,Ae=Ai.lds,Af;if(!Aj.isBubbleOrScatter){var Ah=this.getGMCtr();if(!Ah.hasSizeBy()){return undefined;}Af=Ah.getSizeByMetrics()[0];}else{var Ag=AJ.call(this);Af=Ae.getSizeByMetricIndexForBubble(Ag.lr,Ag.lcs);}return AD.call(this,Af);},getSizeByData:function q(){var Al=this.dp,Ak=Al.lds,Ae=this.groupData.length,Ai=[],Ah=Ak.getOffsetX(),Af=Ak.getOffsetY(),Aj,Ag;for(Aj=0;Aj<Ae;Aj++){Ai.push(this.groupData[Aj].C-Ah);}Ag=this.groupData[0].R-Af;return Ak.getSizeByData(Ag,Ai);},getAbsSizeByData:function y(){return Math.abs(this.getSizeByData());},getMetricsIndexArray:function AK(Am){var Aj=this.dp,Ag=Aj.getChartInfo(),Ah,Ao=Aj.lds,An=this.groupData.length,Ae=[],Ai=Ao.getOffsetX(),Af=Ao.getOffsetY(),Ak,Al;if(Ag.tp!==P.GRID){this.getAxisMetricIndexArr(Am);}if((Ag.tp===P.BUBBLE||Ag.tp===P.SCATTER)&&Ag.hasSizeBy){for(Ak=0;Ak<An;Ak++){Ae.push(this.groupData[Ak].C-Ai);}Al=this.groupData[0].R-Af;Ah=Ao.getSizeByMetricIndexForBubble(Al,Ae);Am.push(Ah);}},getColorByData:function n(An){var Ag=this.groupData[0],Ai=this.dp,Am=Ai.lds,Ah=Am.getOffsetX(),Af=Am.getOffsetY(),Al=Ag.R-Af,Ae=Ag.C-Ah,Ak=[],Aj=Am.gmm;if(Aj.colorType===j.NULL){return undefined;}if(Aj.getChartInfo().isPie){O.visPrint("not expected to call getColorByData of graph cell when in pie mode");return undefined;}if(Aj.colorType===j.ATT_METRICS||Aj.colorType===j.METRICS_ITEM){this.getMetricsIndexArray(Ak);}return Am.getColorByValue(Al,Ae,Ak,An);},isSubtotal:function AI(){},getSeriesLabel:function C(An){var Ag,Ai,Am,Aj,Ah,Af,Ak,Ae;if(this.seriesLabel===undefined){this.seriesLabel={};}if(this.seriesLabel[An]!==undefined){return this.seriesLabel[An];}Ag=this.groupData[An];Ai=this.dp;Am=Ai.lds;Aj=Am.gmm;Ah=Am.getOffsetX();Af=Am.getOffsetY();Ak=Ag.R-Af;Ae=Ag.C-Ah;if(Aj.onlyMetricNamesOnAxisForGridPie&&!Aj.isMetricNamesOnXAxis){var Al=[];Al.push(Ai.getOneMetricName(this.metricIndexForLabelForGridPie));this.seriesLabel[An]=Al;return Al;}this.seriesLabel[An]=Am.getSeriesLabel(Ak,Ae);return this.seriesLabel[An];},getGroupLabel:function Q(An){var Ag,Ai,Am,Aj,Ah,Af,Ak,Ae;if(this.groupLabel===undefined){this.groupLabel={};}if(this.groupLabel[An]!==undefined){return this.groupLabel[An];}Ag=this.groupData[An];Ai=this.dp;Am=Ai.lds;Aj=Am.gmm;Ah=Am.getOffsetX();Af=Am.getOffsetY();Ak=Ag.R-Af;Ae=Ag.C-Ah;if(Aj.onlyMetricNamesOnAxisForGridPie&&Aj.isMetricNamesOnXAxis){var Al=[];Al.push(Ai.getOneMetricName(this.metricIndexForLabelForGridPie));this.groupLabel[An]=Al;return Al;}this.groupLabel[An]=Am.getGroupLabel(Ak,Ae);return this.groupLabel[An];},getThresholdIndex:function c(){return 0;},getThreshold:function AG(){},getRowIndex:function p(Ae){var Af=this.groupData[Ae];return Af.R;},getColIndex:function AM(Ae){var Af=this.groupData[Ae];return Af.C;},getTooltipContent:function(Ag,Aj){Ag=!!Ag;Aj=!!Aj;var Af=this.gcTtpCcnt||{},Ai=Ag+","+Aj;if(Af[Ai]!==undefined){return Af[Ai];}var Ae=this.dp.lds,Ah=[];Ae.getTooltipForChartHeader(Ah,"r",Ag);Ae.getTooltipForChartHeader(Ah,"c",Ag);AT.call(this,Ah,Ag,Aj);Af[Ai]=Ah;return Ah;},testGraphCell:function k(){O.visPrint("");O.visPrint("start testing gcell...");var Aj=this.dp,Am=Aj.lds.gmm,Ag=Aj.getDataGroup(),Ao,Ar,Ak,An,Af,Al,Ap,Aq,Ae=Am.getChartInfo(),Ai=Ae.isPie,Ah;for(Ao=0;Ao<Ag;Ao++){Ar=this.getData(Ao);if(Am.colorType!==j.NULL){Ah=this.getColorByData(Ao);}O.visPrint("data with data index "+Ao+": "+Ar);if(Am.colorType!==j.NULL){O.visPrint("color with data index "+Ao+": "+Ah);}O.visPrint("sizeBy data: "+this.getSizeByData());Ak=this.getSeriesLabel(Ao);O.visPrint("series labels are: "+Ak.join());An=this.getGroupLabel(Ao);O.visPrint("group labels are: "+An.join());}if(Ai){O.visPrint("start testing pie dps");Ap=this.getSinglePieDPs();Af=Ap.length;for(Al=0;Al<Af;Al++){Aq=Ap[Al];Aq.testSinglePieDP();if(Al!==Af-1){O.visPrint("-----------------------");}}O.visPrint("end testing pie dps");}this.getTooltipContent();O.visPrint("end testing gcell...");}});mstrmojo.gm.GMDataProvider=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMDataProvider",lds:null,data:null,sbc:false,graphJSON:null,isValid:true,fwdEnabled:false,bwdEnabled:false,cache:null,getController:function(){var Af=this.lds,Ae=Af.gmm,Ag=Ae.gmCtr;return Ag;},allowDatalabelOverlap:function(){var Ae=this.getController();return Ae.getChartInfo().dlPlmt>1;},isClusteredBarSpecialCase:function(){var Ae=this.getController();return Ae.clusteredBarSpecialCase;},getChartInfo:function(){return this.lds.getChartInfo();},init:function AE(Ae){this._super(Ae);this.cache=[];var Af=this.getChartInfo();if(Af.isABL||Af.tp===P.BUBBLE||Af.tp===P.SCATTER){this.getTrendsOfChart();}},destroy:function I(){delete this.cache;},isGradientABL:function(){return this.lds.gmm.gmCtr.isGradientABL();},getTotalOfGroup:function(Ai){var Ag=this.innerGetSeriesCount(),Af=0,Ae,Ah;for(Ae=0;Ae<Ag;Ae++){Ah=this.innerGetGraphCell(Ae,Ai);Af+=Ah.getData(0);}return Af;},getAxisOriginLineIdentity:function(Ae){var Af=this.getController();return Af.getAxisOriginLineIdentity(Ae);},getAxisOriginLabelIdentity:function(Ae){var Af=this.getController();return Af.getAxisOriginLabelIdentity(Ae);},getMetricsOnAxis:function(Ag){var Ae=this.rowIndex,Ah=this.colIndex;var Af=this.getController();if(Ae===undefined||Ah===undefined){O.visPrint("row index or column index of data provider is not found");}if(Ag==="x"||Ag==="x1"||Ag==="X1"){return Ab.filterInValidMetricIndex(Af.getMetricsOnAxisOfChart(Ae,Ah,"x",true));}if(Ag==="y"||Ag==="y1"||Ag==="Y1"){return Ab.filterInValidMetricIndex(Af.getMetricsOnAxisOfChart(Ae,Ah,"y",true));}if(Ag==="x2"||Ag==="X2"){return Ab.filterInValidMetricIndex(Af.getMetricsOnAxisOfChart(Ae,Ah,"x",false));}if(Ag==="y2"||Ag==="Y2"){return Ab.filterInValidMetricIndex(Af.getMetricsOnAxisOfChart(Ae,Ah,"y",false));}return[];},isLogScale:function(Af){var Ae=this.getController();return Ae.isLogScale(Af,this.rowIndex,this.colIndex);},getNumericOption:function(Ag){var Ae=this.getMetricsOnAxis(Ag),Af=this.getController();if(Ae.length>0){return Ab.getOptionObjArr.call(Af,Ae,Ag,false);}return[];},getAxisOriginValue:function(Ai){var Ah=this.getController(),Ag=Ah.view,Ak=this.getNumericOption(Ai),Af=Ag.readGlobalProperty(b.AXIS_ORIGIN,Ak).jsonObj;if(Af){var Aj=Af[b.AXIS_ORIGIN_AUTO];var Ae=parseFloat(Af[b.AXIS_ORIGIN_VALUE]);if(Aj){return 0;}return Ae;}return 0;},getAxisFormats:function G(Af,Ai){Ai=Ai||"all";var Aj=this.getController(),Ag,Ae=Aj.getAllAxisProperties();switch(Ai){case"axisLabel":if(Af==="x1"||Af==="x2"||Af==="X1"||Af==="X2"){Ag=[K.X_AXIS_LABELS_FONT_SIZE,K.X_AXIS_LABELS_FONT_FAMILY,K.X_AXIS_LABELS_FONT_STYLE,K.X_AXIS_LABELS_ROTATION,K.X_AXIS_LABELS_FONT_COLOR];}else{if(Af==="y1"||Af==="y2"||Af==="Y1"||Af==="Y2"){Ag=[K.Y_AXIS_LABELS_FONT_SIZE,K.Y_AXIS_LABELS_FONT_FAMILY,K.Y_AXIS_LABELS_FONT_STYLE,K.Y_AXIS_LABELS_ROTATION,K.Y_AXIS_LABELS_FONT_COLOR];}}return V.copyProps(Ag,Ae);case"majorTick":case"minorTick":var Ah=Ai==="majorTick",Ak={};if(Ah){Ag=[K.MAJOR_GRID_LINES_COLOR,K.MAJOR_GRID_LINES_THICKNESS,K.MAJOR_GRID_LINES_STYLE];}else{Ag=[K.MINER_GRID_LINES_COLOR,K.MINER_GRID_LINES_THICKNESS,K.MINER_GRID_LINES_STYLE];}return V.copyProps(Ag,Ae);case"body":if(Af==="x1"||Af==="x2"||Af==="X1"||Af==="X2"){Ag=[K.X_AXIS_LINE_COLOR,K.X_AXIS_LINE_STYLE,K.X_AXIS_LINE_THICKNESS];}else{if(Af==="y1"||Af==="y2"||Af==="Y1"||Af==="Y2"){Ag=[K.Y_AXIS_LINE_COLOR,K.Y_AXIS_LINE_STYLE,K.Y_AXIS_LINE_THICKNESS];}}return V.copyProps(Ag,Ae);case"axisOrigin":if(Af==="x1"||Af==="x2"||Af==="X1"||Af==="X2"){Ag=[K.X_AXIS_ORIGIN_LINE_SHOW,K.X_AXIS_ORIGIN_LINE_COLOR,K.X_AXIS_ORIGIN_LINE_STYLE,K.X_AXIS_ORIGIN_LINE_THICKNESS];}else{if(Af==="y1"||Af==="y2"||Af==="Y1"||Af==="Y2"){Ag=[K.Y_AXIS_ORIGIN_LINE_SHOW,K.Y_AXIS_ORIGIN_LINE_COLOR,K.Y_AXIS_ORIGIN_LINE_STYLE,K.Y_AXIS_ORIGIN_LINE_THICKNESS];}}return V.copyProps(Ag,Ae);case"showHide":if(Af==="x1"||Af==="x2"||Af==="X1"||Af==="X2"){Ag=[K.X_AXIS_LINE_SHOW,K.X_AXIS_TITLE_SHOW,K.X_AXIS_LABELS_SHOW,K.MAJOR_GRID_LINES_SHOW,K.MINOR_GRID_LINES_SHOW];}else{if(Af==="y1"||Af==="y2"||Af==="Y1"||Af==="Y2"){Ag=[K.Y_AXIS_LINE_SHOW,K.Y_AXIS_TITLE_SHOW,K.Y_AXIS_LABELS_SHOW,K.MAJOR_GRID_LINES_SHOW,K.MINOR_GRID_LINES_SHOW];}}return V.copyProps(Ag,Ae);default:V.copy(Ae,Ak);return Ak;}},getDataLabelType:function(){return this.getChartInfo().dlTp;},getDataLabelFontFormat:function(){var Ah=this.getController(),Ag=mstrmojo.hash,Af=[K.DATA_LABELS_FONT_FAMILY,K.DATA_LABELS_FONT_SIZE,K.DATA_LABELS_FONT_STYLE,K.DATA_LABELS_FONT_COLOR],Ae=Ah.getDataLabelFontFormat();return Ag.copyProps(Af,Ae);},clearGraphJSON:function(){this.graphJSON=null;},resetDPCache:function S(){if(this.rCache){this.rCache={};delete this.rCache;}if(this.cCache){this.cCache={};delete this.cCache;}},innerGetGraphCell:function l(Af,Ae){return AP.call(this,Af,Ae);},getGraphCell:function g(Ah,Af){var Ag=this.getController();if(Ag.clusteredBarSpecialCase){var Ae=this.getClusterDataGroup();if(Ah>=Af*Ae&&Ah<(Af+1)*Ae){Ah=Math.round(Ah%Ae);}else{return new AA({gIdx:Af,dp:this,isFaked:true});}}return AP.call(this,Ah,Af);},countValidGraphCell:function(){var Ag,Ae,Aj,Ai,Af,Ah=0;Ag=this.innerGetGroupCount();Ae=this.innerGetSeriesCount();for(Ai=0;Ai<Ag;Ai++){for(Af=0;Af<Ae;Af++){Aj=this.innerGetGraphCell(Af,Ai);if(Aj.getData(0)!==null){Ah++;}}}return Ah;},collectElementsIndexArrayOnXVar:function(Ah){var Ak=this.getChartInfo(),Ag,Ai,Aj,Af=[],Ae=this.innerGetGroupCount();if(Ak.isABL){for(Ag=0;Ag<Ae;Ag++){Ai=this.innerGetGraphCell(0,Ag);Aj=Ai.getGroupElementIndexArray(Ah,0);Af.push(Aj);}return Af;}return undefined;},isNullGC:function(Ae){return isNaN(Ae.getData(0));},isDiscreteSeries:function(Ag){var Af=this.innerGetGroupCount(),Ai,Ae,Aj=true,Ah;for(Ah=0;Ah<Af;Ah++){Ai=this.innerGetGraphCell(Ag,Ah);if(!this.isNullGC(Ai)){if(Aj){if(Ah===Af-1){return true;}Ae=this.innerGetGraphCell(Ag,Ah+1);if(this.isNullGC(Ae)){return true;}}Aj=false;}else{Aj=true;}}return false;},GetDiscreteSeries:function AH(){var Ak=this.getChartInfo(),Ah,Ag=[],Af=this.lds.gmm,Aj=Af.gmCtr,Ai=Aj.clusteredBarSpecialCase,Ae=this.getSeriesCount();if(!Ak.isABL){return[];}for(Ah=0;Ah<Ae;Ah++){if(Ai||this.isDiscreteSeries(Ah)){Ag.push(Ah);}}return Ag;},prepareForTrendLines:function(){var Aw=this,BO=this.getChartInfo(),BP={},Ar={},BH,As,BA,A3,At,Aq,BJ,A8=this.lds,Au,BB=this.getGroupCount(),A5=this.getSeriesCount(),BL,A7,Ag=A8.gmm,Am=Ag.mx,Ap=A8.cri,Ak=A8.cci,A0=Ag.getBreakByUnits(),Az=A0.length>0,BD=Ag.gmCtr,A4=A8.validFse,Af=A8.validBse,BE=A8.validXVar,BN,Av,BK,BM,Ah,Aj=false,Ao,Ay;var A2=BD.getDependentMetricOptions();function BC(BR){var BQ;A2.forEach(function(BS){if(BR===BS.key){BQ=BS;}});return BQ;}var Al=BD.trendLineErrors={};var BG=false,A6,BF;var Ai=function(BS){var BV={MID_IN_Y1:-131072,MID_IN_Y2:-1179648,MID_IN_X1:-65536,MID_IN_X2:-1114112},BQ=Ag.dz[BF],BU=BQ&&BQ.TemplateMetric,BR=BU&&BU[BS],BT;if(BR&&BR.ax===0){if(BO.dirc===M.VERTICAL){BT=BV.MID_IN_Y1;}else{BT=BV.MID_IN_X1;}}else{if(BO.dirc===M.VERTICAL){BT=BV.MID_IN_Y2;}else{BT=BV.MID_IN_X2;}}return BT;};var Ae=function(BU){function BQ(BZ,Bb){var Ba=false;T.forEach(BZ,function(Bc){if(Bc.tmData.modix===Bb){Ba=true;}});return Ba;}var BT,BY,BV,BS;if(!BG){BT=BM;}else{BY=Aw.lds.gmm.dz;BV=BY[BF];BS=BV.mdls&&BV.mdls.mod_c[BU.modix-1];if(BS===undefined){return ;}if(BS.dua===0){BT=BF;}else{BT=A6+"2Axis";}}if(BA.indexOf(BT)<0){BA.push(BT);}if(Ar[BT]===undefined){Ar[BT]=[];}var BX,BW;if(BU){if(!BG){var BR=BD.model.getMetricIDsFromIndex([BU.mid])[0];BX=BD.view.getExistingRefLineOptions(BR);BX.forEach(function(BZ){if(BZ.modix===BU.modix){BW=BZ;}});if(!BQ(Ar[BT],BU.modix)){Ar[BT].push(new AX.TrendLineModel({tmData:BU,dp:Aw,mx:Am,isTrendLine:false,direction:Ao,refIsDefOnAxis:BG,seriesIds:[BL],midx:BT,trendLineOpt:BW,metricId:Ah,ldsCri:Ap,ldsCci:Ak}));}}else{BX=BD.view.getExistingRefLineOptionsForAxis(BT);BX.forEach(function(BZ){if(BZ.modix===BU.modix){BW=BZ;}});if(!BQ(Ar[BT],BU.modix)){Ar[BT].push(new AX.TrendLineModel({tmData:BU,dp:Aw,isTrendLine:false,direction:BO.dirc===M.VERTICAL?"horizontal":"vertical",defOnZone:BS,seriesIds:[BL],trendLineOpt:BW,refIsDefOnAxis:BG,ldsCri:Ap,ldsCci:Ak}));}}}};if(BO.isABL&&BD.isStacked&&!BD.splitPlottingMetrics){A6=BO.dirc===M.VERTICAL?"Y":"X";BF=A6+"Axis";BG=true;}this.trendLineCalculated=true;this.inDpTrMdls=BP;this.inDpRfMdls=Ar;this.seriesWithTrendLineDefined=BH=[];this.metricIndexesWithTrendLineDefined=As=[];this.metricIndexesWithRefLineDefined=BA=[];if(BO.tp===P.BUBBLE||BO.tp===P.SCATTER){Aj=true;}var Ax=1;for(BL=0;BL<A5;BL++){if(this.isClusteredBarSpecialCase()){Ax=this.getClusterDataGroup();Au=this.getGraphCell(BL,Math.round(BL/Ax));}else{Au=this.innerGetGraphCell(BL,0);}if(Au.isFaked){continue;}if(BO.isABL){A3=Au.getMetricIndex(0);}else{if(Aj===true){At=Au.getMetricIndex(0);BJ=Ag.getMetricIDsFromIndex([At])[0];A3=Au.getMetricIndex(1);}}Aq=Ag.getMetricIDsFromIndex([A3])[0];if(BE&&(A4||Af)){A7=this.collectElementsIndexArrayOnXVar(BE);this.unitElementIndexArray=A7;if(BB>1){if(A4&&A7.length>0&&Ab.indexOf(A7,A4)>=0){this.fwdEnabled=true;}if(Af&&A7.length>0&&Ab.indexOf(A7,Af)>=0){this.bwdEnabled=true;}}}if(Aj===true){this.bwdEnabled=true;this.fwdEnabled=true;}BN=BD.getTrendLinesObjectForMetric(A3,Ap,Ak,BJ,true)[0];if(BN&&BN.inChartModel[0]&&BN.inChartModel[0].model){var An=BN.inChartModel[0].model.error_message;if(An){var A1=BN.mid+","+BN.modix;if(!Al[A1]){Al[A1]=An;}}else{BH.push(BL);if(BP[A3]){BP[A3].seriesIds.push(BL);BP[A3].seriesBBUnits.push(Au.getBreakByElementIndexArray(true));}else{As.push(A3);var A9=BC(Aq);BP[A3]=new AX.TrendLineModel({tmData:BN,hasBb:Az,dp:Aw,isTrendLine:true,mx:Am,seriesBBUnits:[Au.getBreakByElementIndexArray(true)],seriesIds:[BL],midx:A3,metricId:Aq,trendLineOpt:A9,ldsCri:Ap,ldsCci:Ak});}}}if(!BG){Av=[A3];if(Aj===true){Av.push(Au.getMetricIndex(0));}for(BK=0;BK<Av.length;BK++){if(Aj){if(BK===0){Ao="horizontal";}else{Ao="vertical";}}else{if(BO.isABL){if(BO.dirc===M.VERTICAL){Ao="horizontal";}else{Ao="vertical";}}}BM=Av[BK];Ah=Ag.getMetricIDsFromIndex([BM])[0];Ay=BD.getTrendLinesObjectForMetric(BM,Ap,Ak,undefined,false);Ay.forEach(Ae);}}else{var BI=Ai(A3);Ay=BD.getTrendLinesObjectForMetric(BI,Ap,Ak,undefined,false);Ay.forEach(Ae);}}},getTrendsOfChart:function(){if(this.trendLinesOfChart){return this.trendLinesOfChart;}if(!this.trendLineCalculated){this.prepareForTrendLines();}var Ai=this.inDpTrMdls,Ag=[],Ae={},Ah=this.metricIndexesWithTrendLineDefined;if(Ah){T.forEach(Ah,function(Al){var Ak=Ai[Al],Aj=Ak.getSingleTrendLines(Ae);Ag=Ag.concat(Aj);});}function Af(Aj){if(Aj===undefined){return Aj;}var Ak;Aj.forEach(function(Al){for(Ak=0;Ak<Al.length;Ak++){Al[Ak]=Al[Ak].toString();}});return Aj;}this.trendLinesOfChart=Ag;this.fwdLbs=Ae.fwdLbs=Af(Ae.fwdLbs);this.bwdLbs=Ae.bwdLbs=Af(Ae.bwdLbs);return Ag;},getRefsOfChart:function(){if(this.refLinesOfChart){return this.refLinesOfChart;}if(!this.trendLineCalculated){this.prepareForTrendLines();}var Ah=this.inDpRfMdls,Ag=[],Af={},Ae=this.metricIndexesWithRefLineDefined;if(Ae){T.forEach(Ae,function(Ak){var Aj=Ah[Ak],Ai;Aj.forEach(function(Al){Ai=Al.getSingleTrendLines(Af);Ag=Ag.concat(Ai);});});}this.refLinesOfChart=Ag;return Ag;},getMetricsIndexOnAxis:function F(){return this.mpos;},getMinMetricValue:function AY(){},getMaxMetricValue:function A(){},getMinMaxValueForABL:function(){var Ai,Al,Af=this.innerGetSeriesCount(),Ah=this.innerGetGroupCount(),As,Aj,Aq,Ae,Ak,Ap,Ao=this.lds.gmm.gmCtr,An=Ao.hasSizeBy(),Am,Ag,Ar;for(As=0;As<Af;As++){for(Aj=0;Aj<Ah;Aj++){Aq=this.innerGetGraphCell(As,Aj);if(An){Am=Aq.getSizeByData();if(Ar===undefined){Ar=Am;}else{if(Ar>Am){Ar=Am;}}if(Ag===undefined){Ag=Am;}else{if(Ag<Am){Ag=Am;}}}Ae=Aq.dp.getDataGroup();for(Ak=0;Ak<Ae;Ak++){Ap=Aq.getData(Ak);if(Ai===undefined){Ai=Ap;}else{if(Ai>Ap){Ai=Ap;}}if(Al===undefined){Al=Ap;}else{if(Al<Ap){Al=Ap;}}}}}return{XMax:Al,XMin:Ai,YMax:Al,YMin:Ai,ZMin:Ar,ZMax:Ag};},getMinMaxValueForGrid:function(){var Am,Af,Ae=this.getSeriesCount(),Ag=this.getGroupCount(),An,Ah,Al,Ai,Ak=this.lds.gmm.gmCtr,Aj=Ak.hasSizeBy();if(Aj){for(An=0;An<Ae;An++){for(Ah=0;Ah<Ag;Ah++){Al=this.innerGetGraphCell(An,Ah);Ai=Al.getSizeByData();if(Am===undefined){Am=Ai;}else{if(Am>Ai){Am=Ai;}}if(Af===undefined){Af=Ai;}else{if(Af<Ai){Af=Ai;}}}}}return{YMax:20000,YMin:0,XMin:0,XMax:20000,ZMin:Am,ZMax:Af};},getMinMaxValueForBubbleOrScatter:function(){var Aj,Ao,Af,Al,At,Ah,Ag=this.innerGetSeriesCount(),Ai=this.innerGetGroupCount(),Au,Ak,As,Ae,An,Am,Ar=this.lds.gmm.gmCtr,Aq=Ar.hasSizeBy();for(Au=0;Au<Ag;Au++){for(Ak=0;Ak<Ai;Ak++){As=this.innerGetGraphCell(Au,Ak);Ae=As.dp.getDataGroup();if(Aq){An=As.getSizeByData();if(At===undefined){At=An;}else{if(At>An){At=An;}}if(Ah===undefined){Ah=An;}else{if(Ah<An){Ah=An;}}}for(Am=0;Am<Ae;Am++){var Ap=As.getData(Am);if(Am===0){if(Aj===undefined){Aj=Ap;}else{if(Aj>Ap){Aj=Ap;}}if(Ao===undefined){Ao=Ap;}else{if(Ao<Ap){Ao=Ap;}}}else{if(Af===undefined){Af=Ap;}else{if(Af>Ap){Af=Ap;}}if(Al===undefined){Al=Ap;}else{if(Al<Ap){Al=Ap;}}}}}}return{YMax:Al,YMin:Af,XMin:Aj,XMax:Ao,ZMin:At,ZMax:Ah};},getMetricFormat:function d(Af,Ag){Ag=Ag||false;if(Ag){var Ak=parseInt(Af,10),Ae=this,Ai=Ae.lds,Aj=Ai.gmm,Ah=Ae.getMetricIds(),Al,Am=Ae.getMetricNames();if(Ak<0){O.visPrint("invalid metric index");return undefined;}Al=Aj.getFullNumberFormat();return{idx:Ak,metric:Am[Ak],id:Ah[Ak],fullNf:Al!==undefined?Al[Ak]:undefined};}return this.lds.getMetricNumberFormat(Af);},isMetricOnRowAxis:function AR(){return false;},getMetricsCount:function Y(){var Ae=this.metrics;if(!Ae){return 0;}return Ae.es.length;},getMetricNames:function AQ(){var Af=this.lds,Ae=Af.gmm;return Ae.getMetricNames();},getMetricIds:function AS(){var Af=this.lds,Ae=Af.gmm;return Ae.getMetricIds();},getOneMetricName:function L(Af){var Ae=this.metrics;if(Ae){if(Ae.es.length-1>=Af){return Ae.es[Af].n;}}},getSeriesCount:function Ad(){return this.innerGetSeriesCount();},innerGetSeriesCount:function(){var Ae=this.dataSbc;if(Ae===true){return this.data[0].length;}return this.data.length;},getGroupCount:function H(){var Ae=this.dataSbc;if(Ae===false){return this.data[0].length;}return this.data.length;},innerGetGroupCount:function H(){var Ae=this.dataSbc;if(Ae===false){return this.data[0].length;}return this.data.length;},getDimensionSize:function U(){return 5;},getDataGroup:function B(){var Ae=this.data[0][0];if(Ae===undefined){return 1;}return Ae.length;},getSeriesByColumn:function N(){return this.sbc;},seriesGroupIndexToRowColumnIndex:function Ac(Ah,Ai,Ae,Ag){Ag=Ag||false;var Af=this.dataSbc;var Aj,Al;if(Af===true){Al=Ah;Aj=Ai;}else{Aj=Ah;Al=Ai;}var Ak=this.data[Aj][Al];if(Ak){return{Row:Ak[Ae].R,Col:Ak[Ae].C};}return{Row:-1,Col:-1};},getTextLabel:function W(Aq,Ai,Aj,As){var Ar=this.getGraphCell(Aq,Ai),Af=this.getChartInfo(),Am,Ag,Ap,Ae,Al,Ah,Ao;if(Ar!==null&&Ar!==undefined){Ap=Ar.getGMCtr();if(Af.isPie){var An=Ar.getSinglePieDPs()[Aj];var Ak=An.getSliceLabel(As);if(Ak.length===0){return"";}Al=Ap.getSliceByAttrsID();Ah=Al[Al.length-1];Ao=T.find(Ak,"tid",Ah);return Ak[Ao].n;}Am=Ar.getIdentity();Ag=Am.getSelectedObjectBreakByInfo(false);if(Ag.length===0){return"";}Ae=Ap.getBreakByAttrsID();Ah=Ae[Ae.length-1];Ao=T.find(Ag,"tid",Ah);if(Ao>=0){return Ag[Ao].v;}}return"";},isGridPieSplitAlongXAxis:function(){var Ah=this.getChartInfo(),Af=this.lds,Ae=Af.gmm,Ag=Ae.gmCtr;if(Ah.isPie&&Ah.tp===P.GRID){return Ag.isMetricNamesInZone("XAxis");}return undefined;},getMetricIndexForSeries:function(Ae){var Ah=this.getGroupCount(),Ag,Af;for(Af=0;Af<Ah;Af++){Ag=this.getGraphCell(Ae,Af);if(!Ag.isFaked){break;}}return Ag.getMetricIndex(0);},getShapeBySeries:function(Af){var Ag=this.lds.gmm.gmCtr,Ae;if(Ag.enableCombiChart===false){return Ag.markerShape;}Ae=this.getMetricIndexForSeries(Af);return Ag.getOnTheFlyShapeForMetric(Ae);},getPrioritizedSeriesIndex:function(){var Aj=this.lds.gmm.gmCtr,Ai=this.getSeriesCount(),Ag,Ae,Ah=[];if(Aj.enableCombiChart===false){var Af=[];for(Ag=0;Ag<Ai;Ag++){Af.push(Ag);}return Af;}Ae=this.getSeriesByShape();Ah=Ah.concat(Ae.Area);Ah=Ah.concat(Ae.Bar);Ah=Ah.concat(Ae.Circle);Ah=Ah.concat(Ae.Square);Ah=Ah.concat(Ae.Line);Ah=Ah.concat(Ae.Tick);return Ah;},getSeriesByShape:function(Af){var Ak=this.getSeriesCount(),Ah,Ag,Ae,Ai={Tick:[],Line:[],Bar:[],Area:[],Circle:[],Square:[],Pie:[]};function Aj(Am){var Al;switch(Am){case Z.TICK:Al=Ai.Tick;break;case Z.LINE:Al=Ai.Line;break;case Z.BAR:Al=Ai.Bar;break;case Z.AREA:Al=Ai.Area;break;case Z.CIRCLE:Al=Ai.Circle;break;case Z.SQUARE:Al=Ai.Square;break;case Z.PIE:Al=Ai.Pie;break;}return Al;}for(Ah=0;Ah<Ak;Ah++){Ag=this.getShapeBySeries(Ah);Ae=Aj(Ag);Ae.push(Ah);}if(Af===undefined){return Ai;}return Aj(Af);},getValueAxisBySeries:function(Af){var Ah=this.lds.gmm.gmCtr,Ae,Ag;Ae=this.getMetricIndexForSeries(Af);Ag=Ah.getPrimaryMetrics();if(Ag.indexOf(Ae)>=0){return 0;}return 1;},getSeriesByValueAxis:function(Aj){var Ak=this.lds.gmm.gmCtr,Ag,Af=this.getSeriesCount(),Ah,Ae=[],Ai;Ai=(Aj===0)?Ak.getPrimaryMetrics():Ak.getSecondaryMetrics();for(Ah=0;Ah<Af;Ah++){Ag=this.getMetricIndexForSeries(Ah);if(Ai.indexOf(Ag)!==-1){Ae.push(Ah);}}return Ae;},testDataProvider:function Aa(){var Af=this.getSeriesCount(),Ah=this.innerGetGroupCount(),Am=this.getMetricsCount(),Al=this.lds,Ak=Al.cci,Ag=Al.cri,Ai,Ao,Aj;O.visPrint("");O.visPrint("======================chart with index: ("+Ag+", "+Ak+")=============================");for(Ai=0;Ai<Am;Ai++){var Ae=this.getOneMetricName(Ai);O.visPrint("single metric name of "+Ai+" is: "+Ae);}for(Ao=0;Ao<Af;Ao++){for(Aj=0;Aj<Ah;Aj++){var An=this.innerGetGraphCell(Ao,Aj);if(!An.isFaked){An.testGraphCell();}}}},getResizerLineThickNess:function a(){var Af=this.lds.gmm,Ah=Af.gmCtr,Ae=Ah.view,Ag=Ae.getHTML5Props();return{MATRIX_VLINE_THICKNESS:parseInt(Ag.MATRIX_LINE_V.borderWidth,10)||1,MATRIX_HLINE_THICKNESS:parseInt(Ag.MATRIX_LINE_H.borderWidth,10)||1,AXIS_X_THICKNESS:parseInt(Ag.AXIS_LINE_X.borderWidth,10)||1,AXIS_Y_THICKNESS:parseInt(Ag.AXIS_LINE_Y.borderWidth,10)||1};},getChartRowColCount:function AF(){var Ae=this.lds.gmm;return{cir:Ae.cir,cic:Ae.cic};},isCompactMode:function v(){var Ae=this.lds.gmm,Af=Ae.gmCtr;return Af.isCompactMode();}});mstrmojo.gm.GMEnhancedDataProvider=mstrmojo.declare(mstrmojo.gm.GMDataProvider,null,{scriptClass:"mstrmojo.gm.GMEnhancedDataProvider",fwdSteps:0,bwdSteps:0,oriGroupCount:-1,getGroupCount:function(){if(AW){return this._super();}var Ae=this.bwdSteps,Af=this.fwdSteps;if(!this.bwdEnabled){Ae=0;}if(!this.fwdEnabled){Af=0;}this.oriGroupCount=this._super();if(!this.fwdSteps&&!this.bwdSteps){return this.oriGroupCount;}return Ae+this.oriGroupCount+Af;},getGraphCell:function g(Ai,Ag,Af){if(AW||Af===true){return this._super(Ai,Ag);}var Ae=this.bwdSteps,Aj=this.fwdSteps,Ah;if(!this.bwdEnabled){Ae=0;}if(!this.fwdEnabled){Aj=0;}if(this.oriGroupCount<0){this.getGroupCount();}if(!this.fwdSteps&&!this.bwdSteps){Ah=this._super(Ai,Ag);return Ah;}if(Ag<Ae||Ag>=(this.oriGroupCount+Ae)){return new AA({gIdx:Ag,dp:this,isFaked:true});}Ah=this._super(Ai,Ag-Ae);return Ah;},getClusterDataGroup:function w(){if(!!!this.mClusterDataGroup){var Ae=this.lds.gmm,Af=Ae.gmCtr;if(Af.clusteredBarSpecialCase){this.mClusterDataGroup=this.innerGetSeriesCount();}else{this.mClusterDataGroup=1;}}return this.mClusterDataGroup;},getSeriesCount:function Ad(){var Ae=this.lds.gmm,Af=Ae.gmCtr;if(!Af.clusteredBarSpecialCase){return this.innerGetSeriesCount();}return this.getGroupCount()*this.getClusterDataGroup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.VisEnum","mstrmojo.VisLegend","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.gm.GMIdentities","mstrmojo.gm.GMUtility","mstrmojo.array","mstrmojo.string","mstrmojo.hash","mstrmojo._FormateVisLegend","mstrmojo.ui._HasScroller");var Af=mstrmojo,Ac=Af.gm,AA=Af.dom,Ab=Af.css,R=Af.hash,AN=Af.VisUtility,Z=Ac.GMUtility,O=mstrmojo.array,X=mstrmojo.string,e=Ac.ColorSquareIdentity,C=Af.VisEnum.ControlType,j=Ac.EnumLegendSlot,AL=Ac.EnumDockPosition,o=Ac.EnumLegendSlot,AF=Ac.EnumIdentityType,AD=Ac.EnumShape,AX=Af.VisEnum.GMLegendDataType,I=mstrmojo.desc(13966,"Size by:"),w="px",E=1.35,Y=0.75,V=5,J=20,l=J,AE=5,A=5,x=16,d=15,G=16,AI=20,s=15,Ad=1,z="setAttribute",k=3,g=2,P=8,r=15,AS=14,u=1,Q=2,f=4,Ag=8,Ae=16,K=10,AU=3,AJ=50,AP=-3,t=5,AQ="gm-legend-lock-icon",AM=mstrmojo.desc(14442,"This metric has its axis scale set to custom min and max values"),N="http://www.w3.org/2000/svg",v="\u2026",M=/[ \-]/;function AR(Am,Ao,Ah,Ap){if(!Am){return ;}var Aj,As,Ak,Ar,An=Am.style,At=Ao===AL.TOP,Ai=Ao===AL.BOTTOM,Aq=Ao===AL.LEFT,Al=Ao===AL.RIGHT;if(At||Ai){Aj=Ah;As=1;Ak=-1;Ar=AP;if(Ai){Ar+=Ap;}}else{if(Aq||Al){Aj=1;As=Ap;Ar=-1;Ak=AP;if(Al){Ak+=Ah;}}}An.cssText="left:"+Ak+w+";top:"+Ar+w+";width:"+Aj+w+";height:"+As+w+";";}function H(Ai){var Ah=String(Ai);return Ah.indexOf(" ")>=0||Ah.indexOf("-")>=0;}function W(Aj,Ai,Ak){var Ah=typeof Aj==="string"?Z.restoreSpecialChars(Aj):Aj;return AN.measureTextWidth(Ah,Ai,Ak);}function AH(Al,Ak,Ai,Ah){var Aj=W(Ak,Ai,K);Al.setAttribute("measureWidth",Aj);if(Aj>Ah){Aj=Ah;}else{Al.style.overflow="visible";}Al.setAttribute("displayWidth",Aj);Al.style.width=Aj+w;return Aj;}function B(Ai){var Ah;if(Ai.textContent&&typeof (Ai.textContent)!==undefined){Ah=Ai.textContent;}else{Ah=Ai.innerText;}return Ah;}function a(Aj){var Ai=Aj.getAttribute("measureWidth"),Ah=Aj.getAttribute("displayWidth");if(!Ai){Aj[z]("title","");}Ai=parseFloat(Ai,10);Ah=parseFloat(Ah,10);if((Ai-Ah)>0.1){Aj[z]("title",B(Aj));}else{Aj[z]("title","");}}function AK(Al,Ah,Ai,Ak){var Aj=document.createElement("div");Aj[z]("class","gm-legend-underLine");Aj.style.width=Ak-K+w;Aj.style.left=Ah+5+w;Aj.style.top=Ai+w;Al.appendChild(Aj);}function AW(Ak,Ah,Ai){var Aj=document.createElement("div");Aj[z]("class","gm-legend-underLine-anchorPoint");Aj.style.left=Ah+w;Aj.style.top=Ai-3+w;Ak.appendChild(Aj);}function AG(Ak,Ah,Ai,Aj){AK(Ak,Ah,Ai,Aj);AW(Ak,Ah,Ai);}function n(Aj,Au,Aq,Ao,As){var Ap,Ak,Ar,Ah,At=Z.restoreSpecialChars(Aj.innerHTML),An=At.length,Al=0,Ai=An,Am=false;if(Aj.scrollHeight>1.5*G){Ap=W(Aj.innerHTML,Au,K);Ak=Ap-Aq+K;if(Ak>As){while((Ai-Al)>1){Ar=(Al+Ai)>>1;Ah=At.substring(0,Ar)+v;Ap=W(Ah,Au,K);Ak=Ap-Aq+K;if(Ak>As){Ai=Ar;}else{Al=Ar;}}Aj.innerHTML=X.encodeHtmlString(At.substring(0,Al)+v,true);Aj[z]("title",At);Am=true;Ap=W(Aj.innerHTML,Au,K);Ak=Ap-Aq+K;}AK(Aj,0,Ao+G,(Ak<As)?Ak:As);}if(Aq>As){Aj[z]("title",At);}else{if(!Am){Aj[z]("title","");}}}function y(Ah,Aq,Am,Ai,Ap,Ar){var Aj,Al,An,Ao,Ak=document.createElement("div");Ak[z]("class","gm-legend-textcell");Ak[z]("type",C.LGD_TEXT);Ak.style.lineHeight=d+w;if(Ap){Ao=AH(Ak,Aq,Ar,Ap);}if(Ai&u){Aj=(AI+AS)/2+Am*AI;An=x;}else{Aj=(s+AS)/2+Am*s;if(Ai&Ag){if(Ai&Ae){An=0;}else{An=r;}}else{if(Ai&f){An=P;}else{An=0;}}}Al=Ao||r+K;Ak.innerHTML=Aq;Ak.identity={objType:AF.LEGEND_TEXT};AG(Ah,An,Aj,Al);this.textDivs.push(Ak);Ah.appendChild(Ak);}function AZ(Ah,Ak){var Ai,Am,Al,Aj=0;if(Ah){Al=Ah.elements;for(Ai=0,Am=Al.length;Ai<Am;Ai++){Aj=Math.max(Aj,W(Al[Ai].label,Ak,K));}Aj+=x+A*2+AU;}return Aj;}function U(Ak,Aj){var An,Ah,Am,Al=Ak.items,Ai=0;if(!Al){return 0;}An=Al.length;Am=Ak.custMetrics;for(Ah=0;Ah<An;Ah++){if(Am&&Am.indexOf(Al[Ah])!==-1){Ai=Math.max(Ai,W(Al[Ah],Aj,K)+P);}else{Ai=Math.max(Ai,W(Al[Ah],Aj,K));}}return Ai;}function AO(Ak,Aj){var Ah,Am,Al,Ai=0;if(Ak){Al=Ak.elements;Am=Al.length;if(Ak.caseFlag===1){Ai=U(Ak,Aj);}else{if(Ak.caseFlag===0){for(Ah=0;Ah<Am;Ah++){Ai=Math.max(Ai,W("Max: "+Al[Ah].v,Aj,K));}Ai+=s*k;Ai=Math.max(Ai,U(Ak,Aj));}else{if(Ak.caseFlag===2){for(Ah=0;Ah<Am;Ah++){Ai=Math.max(Ai,W(Al[Ah].v,Aj,K));}Ai+=s*Am+r;Ai=Math.max(Ai,U(Ak,Aj));}else{if(Ak.caseFlag===3){for(Ah=0;Ah<Am;Ah++){Ai=Math.max(Ai,W(Al[Ah].v,Aj,K));}Ai+=s*t;}}}}Ai=Math.max(Ai,W(I,Aj,K));Ai+=A*3;}return Ai;}function c(As,Ak,Aw){if(!As||!As.length||As.length<1){return 0;}var Al,Ai,Av,Ah,Ao,Ar,An,Aq,Ap,Aj,Am,Au=l+2*Ad,At=Au;for(Al=0;Al<As.length;Al++){An=As[Al];if(An.dataType===AX.COLOR_BY){Aq=An.dataObj;if(Aq){Aj=2*AE+G;Av=Z.removeExtraSpace(Aq.item);Ar=W(Av,Aw,K);if((Ar+2*A>Ak-2*Ad)&&H(Av)){Aj+=G;}Ah=Aq.elements;Ai=Ah.length;Aj+=A;Aj+=g;Au+=Aj+AI*Ai;At+=Aj+(Ai>0?AI:0);}}else{if(An.dataType===AX.SIZE_BY){Ap=An.dataObj;if(Ap){Am=2*AE+G;Av=Z.removeExtraSpace(Ap.item);Ar=W(Av,Aw,K);if((Ar+2*A>Ak-2*Ad)&&H(Av)){Am+=G;}Ao=Ap.caseFlag;if(Ao===1){Ai=0;}else{if(Ao===0){Ai=2;}else{if(Ap.caseFlag===2||Ao===3){Ai=Ap.elements.length;}}}Ai+=(Ap.items&&Ap.items.length)||0;Am+=s*Ai;Am+=A;Am+=g;Au+=Am;At+=Am;}}}}return{height:Au,minHeight:At};}function Aa(Ah,Ai){var Ak=0,Aj=0;O.forEach(Ah||[],function(Al){var Am;if(Al.dataType===AX.COLOR_BY){Am=AZ(Al.dataObj,Ai);if(Am>Ak){Ak=Am;}}else{if(Al.dataType===AX.SIZE_BY){Am=AO(Al.dataObj,Ai);if(Am>Aj){Aj=Am;}}}});return Math.max(Ak,Aj)+2*Ad;}function h(Ai,Ao,Am,Al){var Aj=c(Ai,Ao,Al),Ah=Aj.height,An=Am-V*2,Ak={};Ak.autoCollapse=Aj.minHeight>An;Ak.minHeight=Aj.minHeight;Ak.width=Ao;Ak.height=Math.min(Ah,An);if(Ah>An){Ak.cutBy=Ah-An;}return Ak;}function F(Ai,Aj){var Ak=Ai.decodedColor||Ai.color,Ah;if(Ak.c1){Ah=Ab.buildGradient(Ak.or,Ak.c1,Ak.c2);Aj.style[Ab.convertCssToCamelCase(Ah.n)]=Ah.v;}else{Aj.style.backgroundColor=Ak;}if(Ai.image){Aj.style.backgroundImage=Ai.image;}Aj.identity=new e({objType:AF.COLOR_SQUARE,parentIdentity:this.identity,token:Ai.token,decodedColor:Ai.decodedColor,encodedColor:Ai.encodedColor,isDefaultColor:Ai.isDefaultColor});}function AT(){var Aw,At,Ar,Ah,As,Ay,Ai,Ap,An,Ak,A0=document,Az=this.triBtn,Av=this.closeBtn,Am=this.cbContainer,Aj=this.sb1Container,Au=this.sb2Container,Ao=this.cbTableContainer,Al=null,Ax=this.height-l-A-2*Ad,Aq=this.width-2*A-2*Ad;Az[z]("class","gm-legend-tri-button-collapsed");if(this.autoCollapse){Az[z]("title",mstrmojo.desc(13682,"There is not enough space to display the legend"));}else{Az[z]("title",mstrmojo.desc(13683,"Maximize Legend"));}Av.style.display="none";this.splitter.style.display="none";this.domNode.style.overflow="hidden";for(Aw=0;this.dataArray&&Aw<this.dataArray.length;Aw++){Ah=this.dataArray[Aw];if(Ah.dataType===AX.COLOR_BY){Al=Ah.dataObj;break;}}Am.style.display=Al?"block":"none";Aj.style.display="none";Au.style.display="none";if(Al){Ar=Al.elements;At=Ar.length;As=this.cbTitle;As.style.display="none";Am.style.top=l+w;Am.style.width=Aq+w;Ao.style.top="0px";Ay=this.cbTable;Ay.innerHTML="";for(Aw=0;Aw<At;Aw++){Ai=A0.createElement("tr");Ap=A0.createElement("td");Ak=A0.createElement("div");An=A0.createElement("div");Ak[z]("class","gm-legend-colorbox-ctn-div");Ak[z]("type",C.LGD_COLORBOX_CTN);Ak[z]("title",Ar[Aw].label);An[z]("class","gm-legend-colorbox-div");An[z]("type",C.LGD_COLORBOX);F.call(this,Ar[Aw],An);Ai[z]("class","gm-legend-tr");Ai.style.height=AI+w;Ap[z]("class","gm-legend-colorbox");Ak.appendChild(An);Ap.appendChild(Ak);Ai.appendChild(Ap);Ay.appendChild(Ai);if(Ay.offsetHeight+AI>Ax){break;}}Ay.style.top="0px";Ay.style.marginLeft="0px";Ao.style.top=A+w;Ao.style.height=Ay.offsetHeight+w;}Am.style.height=Ax+w;}function p(Aj,Ai,Al,Ah){var Ak=document.createElementNS(N,"circle");Ak.setAttribute("cx",Ai);Ak.setAttribute("cy",Al);Ak.setAttribute("r",Ah);Ak.setAttribute("class","gm-legend-sizeby-circle");Aj.appendChild(Ak);}function AC(Aj,Ak,An,Ai,Am,Ao,Al){var Ah=document.createElementNS(N,"line");Ah.setAttribute("x1",Ak);Ah.setAttribute("y1",An);Ah.setAttribute("x2",Ai);Ah.setAttribute("y2",Am);Ah.style.strokeWidth=Ao;if(Al){Ah.setAttribute("class",Al);}Aj.appendChild(Ah);}function AY(Ai,Aw){var Av,Aj,Al,Am,Ak,Ah,Au,An,Ax,Ao,As=Math.PI,Ap=Aw.elements,Aq=Ap.length,Ar=Aq*s,At=Ai.getContext("2d"),Ay={LINE_COLOR:"#b0b0b0",MIN_WIDTH:1,MAX_WIDTH:10},Az=AN.getPropertyByPath(this,"widget.model.data.visName")||AN.getPropertyByPath(this,"widget.model.data.vis.vn");switch(Az){case"GraphMatrixVisualizationStyle":if(this.shapeType===AD.SQUARE||this.shapeType===AD.TICK||this.shapeType===AD.LINE||this.shapeType===AD.BAR||this.shapeType===AD.AREA||this.shapeType===AD.RECTANGLE){Ao="rectangle";}else{Ao="circle";}break;case"VIHeatMapVisualizationStyle":Ao="rectangle";break;default:Ao="circle";break;}switch(Aw.caseFlag){case 0:At.save();if(mstrApp.getThemeClassName().indexOf("dark")>=0){At.strokeStyle="rgba(116, 116, 117, 0.7)";At.fillStyle="rgba(116, 116, 117, 0.7)";}else{At.strokeStyle="rgba(188, 188, 189, 0.7)";At.fillStyle="rgba(188, 188, 189, 0.7)";}Ar=s*k;Ax=Math.floor(s*0.75+0.5);Aj=Math.floor(Ax/3.5+0.5);if(Ao==="circle"){Am=Ax+1;Ak=s;At.beginPath();At.arc(Am,Ak,Ax,0,2*As,false);At.fill();At.stroke();Am=2*Am+2*Aj;Ak=Math.floor(0.53*s+0.5);At.beginPath();At.arc(Am,Ak,Aj,0,2*As,false);At.fill();At.stroke();}else{Am=1;Ak=s-Ax;At.beginPath();At.fillRect(Am,Ak,2*Ax,2*Ax);Am=2*Ax+2+Aj;Ak=Math.floor(0.53*s-Aj+0.5);At.beginPath();At.fillRect(Am,Ak,2*Aj,2*Aj);}At.translate(0.5,0.5);At.lineWidth=1;At.strokeStyle="#9C9C9C";Am=2*Ax+3*Aj+3;Ak=Math.floor(0.53*s+0.5);At.beginPath();At.moveTo(Am,Ak);At.lineTo(Ar,Ak);At.stroke();Am=2*Ax+2;Ak=Math.floor(1.53*s-Aj+0.5);At.beginPath();At.moveTo(Am,Ak);At.lineTo(Am+Aj,Ak+Aj);At.lineTo(Ar,Ak+Aj);At.stroke();At.restore();break;case 1:break;case 2:Al=parseInt(Ap[0].diameter,10);Al=Math.min(Al,Ar);At.fillStyle="#ADADAC";At.strokeStyle="#ADADAC";if(Ao==="circle"){Am=Ar>>1;Ak=Am;At.arc(Am,Ak,Al>>1,0,2*As,false);At.fill();At.stroke();}else{Am=(Ar-Al)>>1;Ak=Am;At.rect(Am,Ak,Al,Al);At.fill();At.stroke();}break;case 3:Ah=Ay.MIN_WIDTH;Au=(Aq===1?0:(Ay.MAX_WIDTH-Ay.MIN_WIDTH)/(Aq-1));Ar=Ai.width;An=s;Am=0;Ak=s/2;At.strokeStyle=Ay.LINE_COLOR;for(Av=0;Av<Aq;Av++){At.lineWidth=Ah;At.beginPath();At.moveTo(Am,Ak);At.lineTo(Ar-Am,Ak);At.stroke();Ak+=An;Ah+=Au;}break;default:break;}}function AV(Ai,Aq){var Ao=1,Ah,Am=1.5*G,Ap=Ai.innerHTML,An=Z.restoreSpecialChars(Ap),Aj=An.split(M),Ar,Ak;var Al=function(As){Ak=An[As];return Ak!==undefined?Ak:"";};if(Ai.scrollHeight>Am){if(!Aj[0]){return 0;}Ah=Aj[0]+Al(Aj[0].length);while(Aj[Ao]!==undefined){Ar=Ah+Aj[Ao];Ar+=Al(Ar.length);Ai.innerHTML=Z.replaceSpecialChars(Ar);if(Ai.scrollHeight>Am){break;}Ah=Ar;Ao++;}Ai.innerHTML=Ap;}else{Ah=An;}return W(Ah,Aq,K);}function b(Ax,Av,Aw,Ar){var Au,Aj,Am,Al,Aq,At,Ap=Av.elements,As=Ap.length,Ao=[],Ay=document,Ah=Ay.createDocumentFragment(),Ak=false,An=this.styles,Ai=Aw;switch(Ar){case 0:if(As>0){Ao.push({v:"Min: "+Ap[As-1].v});Ao.push({v:"Max: "+Ap[0].v});As=2;}break;case 1:Ap=Av.items;O.forEach(Ap,function(Az){Ao.push({v:Az});});break;case 3:Ao=Ap;break;default:Ao=Ap;Ak=true;break;}As=Ao.length;for(Au=0;Au<As;Au++){Aj=Ay.createElement("tr");Aj[z]("class","gm-legend-tr2");Aj.style.height=s+w;if(Ak){Am=Ay.createElement("td");y.call(this,Am,Ao[Au].sign,Au,Q|Ag|Ae);Am[z]("class","gm-legend-sign");Aj.appendChild(Am);Ai-=r;}Al=Ay.createElement("td");Al[z]("class","gm-legend-desc");if(Av.custMetrics&&Av.custMetrics.indexOf(Ao[Au].v)!==-1){y.call(this,Al,Ao[Au].v,Au,Q|f,Ai-P,An);At=parseInt(Al.lastChild.style.width,10);Aq=Ay.createElement("div");Aq.setAttribute("class",AQ);Aq.setAttribute("title",AM);Al.appendChild(Aq);Aq.style.top=(s-8)/2+Au*s+w;Al.lastChild.style.marginLeft=At+w;}else{if(Ak){y.call(this,Al,Ao[Au].v,Au,Q|Ag,Ai,An);}else{y.call(this,Al,Ao[Au].v,Au,Q,Ai,An);}}Aj.appendChild(Al);Ah.appendChild(Aj);}Ax.appendChild(Ah);}function T(){var Aj="."+AQ,Ah=this.domLegend.querySelectorAll(Aj),Ai;O.forEach(Ah,function(Ak){Ai=Ak.parentNode;if(Ai){Ai.removeChild(Ak);}});}function S(){var BA,A2,BF=0,BG,Ax,A4,Ay,Ak,A8,BB,Ao,BE,A9,Ah=this.width-2*Ad,As=Ah-2*A,Am=document,Aj=this.triBtn,A3=this.closeBtn,A1=this.cbContainer,At=this.cbTableContainer,BH=this.sb1Container,An=this.sb2Container,Ar,Ap,Al,Aq,A6,Av,A5=this.cutBy,A0=l,BC=0,Az=this.styles,A7,BD,Aw=(G+AS)/2,Ai,Au;Aj[z]("class","gm-legend-tri-button");Aj[z]("title",mstrmojo.desc(13684,"Minimize Legend"));A3.style.display="block";A3[z]("title",mstrmojo.desc(12002,"Hide Legend"));this.updateSplitter();T.call(this);this.domNode.style.overflow="visible";A1.style.display="none";BH.style.display="none";An.style.display="none";for(A2=0;this.dataArray&&A2<this.dataArray.length;A2++){Ap=this.dataArray[A2];A6=null;Av=null;if(Ap.dataType===AX.COLOR_BY){A6=Ap.dataObj;if(A6){A1.style.display="block";Ay=Z.removeExtraSpace(A6.item);Ak=A6.elements;BA=Ak.length;A1.style.top=A0+w;A1.style.width=As+w;BE=0;if(BC===0){Ab.addClass(this.sepLine1,"toggleHide");BC++;}BG=this.cbTitle;BG.style.display="block";AH(BG,Ay,Az,As);BG.innerHTML=X.encodeHtmlString(Ay,true);BE+=BG.offsetHeight+2*AE;Ai=AV(BG,Az);n(BG,Az,Ai,Aw,As);AG(BG,0,Aw,(Ai<As)?Ai:As);Ax=this.cbTable;Ax.style.display="block";Ax.style.width=(As-AU)+w;Ax.style.marginLeft=AU+w;Ax.innerHTML="";Ax.appendChild(this.fillColorByTable(A6,0));A8=AI*BA+1;At.style.top=BE+w;Ax.style.display="table";BE+=A8+A;if(A5){BE-=A5;A8-=A5;}A1.style.height=BE+w;At.style.height=A8+w;A0+=BE+g;}}else{if(Ap.dataType===AX.SIZE_BY){Av=Ap.dataObj;if(Av){BF++;if(BF===1){Al=BH;Aq=this.sb1Title;A4=this.sb1MetricNamesTable;Ax=this.sb1DataTable;Ar=this.sb1Canvas;}else{Al=An;Aq=this.sb2Title;A4=this.sb2MetricNamesTable;Ax=this.sb2DataTable;Ar=this.sb2Canvas;}Al.style.display="block";Ay=Z.removeExtraSpace(Av.item);Ak=Av.elements;BA=Ak.length;Al.style.top=A0+w;Al.style.width=As+w;BE=0;if(BC===0){Ab.addClass(this.sepLine2,"toggleHide");BC++;}if(Av.caseFlag===0){BB=k*s;Ao=2*s;}else{if(Av.caseFlag===3){BB=t*s;Ao=BA*s;}else{BB=BA*s;Ao=BB;}}BG=Aq;BG.innerHTML=X.encodeHtmlString(Ay,true);BD=Av.custMetrics&&Av.custMetrics.indexOf(Ay)!==-1;if(BD){Au=As-P;}else{Au=As;}AH(BG,Ay,Az,Au);if(BD){A7=Am.createElement("div");A7.setAttribute("class",AQ);A7.setAttribute("title",AM);Al.appendChild(A7);A7.style.top=(BG.offsetHeight-8)/2+AE+g+w;A7.style.left=BG.offsetWidth+"px";}Ai=AV(BG,Az);n(BG,Az,Ai,Aw,Au);AG(BG,0,Aw,(Ai<Au)?Ai:Au);BE+=BG.offsetHeight+2*AE;A9=As;A4.innerHTML="";if(Av.items&&Av.items.length>0){A4.style.display="block";b.call(this,A4,Av,A9,1);}else{A4.style.display="none";}A4.style.top=BE+w;A4.style.left="0"+w;A4.style.width=A9+w;BE+=A4.offsetHeight;if(BB>0){A9-=BB+A;}Ax.innerHTML="";if(Av.elements&&Av.elements.length>0){Ax.style.display="block";b.call(this,Ax,Av,A9,Av.caseFlag);}else{Ax.style.display="none";}Ar.style.position="absolute";Ar.style.top=BE+w;Ar.style.marginLeft=A+w;Ax.style.top=BE+w;Ax.style.left=(BB+A)+w;Ax.style.width=A9+w;BE+=Ax.offsetHeight+A;Al.style.height=BE+w;Ax.style.display="table";Ar.width=BB;Ar.height=Ao;AY.call(this,Ar,Av);A0+=BE+g;}}}}}function q(){var Ah,Ai=this.textDivs,Aj=Ai.length;for(Ah=0;Ah<Aj;Ah++){a(Ai[Ah]);}}mstrmojo.gm.GMLegend=mstrmojo.declare(mstrmojo.VisLegend,[mstrmojo._FormateVisLegend,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.gm.GMLegend",cssClass:"gm-legend",dropZoneHighlightCss:"gm-legend-slot",dockedPositions:[{pos:o.LEFT_TOP},{pos:o.LEFT_MIDDLE},{pos:o.LEFT_BOTTOM},{pos:o.RIGHT_TOP},{pos:o.RIGHT_MIDDLE},{pos:o.RIGHT_BOTTOM}],dockPos:AL.LEFT,GMW:0,GMH:0,isMinimal:false,shapeType:undefined,legendMarkup:'<div class="gm-legend-tri-button"></div><div class="gm-legend-close-button"></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><div class="gm-legend-table-container"><table class="gm-legend-table"></table></div></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-resizer-v" draggable="false"></div><div class="gm-legend-resizeRect"></div>',init:function AB(Ai){this.styles={};this.cutBy=null;this.dataArray=null;this.textDivs=[];var Aj=Ai.placeholder,Ah=Aj.style;if(Aj){this.cssClass=Aj.getAttribute("class");if(!this.cssClass){this.cssClass="";}if(Ai.hasOwnProperty("width")===false){Ai.width=(Ah&&Ah.width)||Aj.clientWidth;}if(Ai.hasOwnProperty("height")===false){Ai.height=(Ah&&Ah.height)||Aj.clientHeight;}if(Ai.hasOwnProperty("left")===false){Ai.left=Aj.offsetLeft;}if(Ai.hasOwnProperty("top")===false){Ai.top=Aj.offsetTop;}}this._super(Ai);},setupScrollNodes:function L(){this.scrollNode=this.cbTableContainer;},getSplitterDockPos:function(){return(this.currDockedPositionIdx<3)?AL.RIGHT:AL.LEFT;},updateAlignClass:function(){var Al=this.getDockedPosition(),Am=Al&&Al.pos,Aj=(Am===o.RIGHT_MIDDLE||Am===o.RIGHT_TOP||Am===o.RIGHT_BOTTOM||Am===o.RIGHT),Ah=this.domLegend,Ai=this.domNode,Ak=this.resizeRect;if(Aj){Ab.removeClass(Ah,"gm-align-left");Ab.addClass(Ah,"gm-align-right");Ab.toggleClass(Ah,"gm-legend-alignRight",true);Ab.toggleClass(Ah,"gm-legend-alignLeft",false);Ab.toggleClass(Ai,"gm-legend-alignRight",true);Ab.toggleClass(Ai,"gm-legend-alignLeft",false);Ab.toggleClass(Ak,"gm-legend-alignRight",true);Ab.toggleClass(Ak,"gm-legend-alignLeft",false);}else{Ab.removeClass(Ah,"gm-align-right");Ab.addClass(Ah,"gm-align-left");Ab.toggleClass(Ah,"gm-legend-alignRight",false);Ab.toggleClass(Ah,"gm-legend-alignLeft",true);Ab.toggleClass(Ai,"gm-legend-alignRight",false);Ab.toggleClass(Ai,"gm-legend-alignLeft",true);Ab.toggleClass(Ak,"gm-legend-alignRight",false);Ab.toggleClass(Ak,"gm-legend-alignLeft",true);}},postBuildRendering:function(){this._super();var At=this.styles,Av=this.domNode,Ak=this.domLegend.childNodes,Ao=Ak[2],Am=Ak[3],Au=Ak[4],Ay={objType:AF.LEGEND};this.addSlots({triBtn:Ak[0],closeBtn:Ak[1],cbContainer:Ak[2],sepLine1:Ao.firstChild,cbTitle:Ao.childNodes[1],cbTableContainer:Ao.childNodes[2],cbTable:Ao.childNodes[2].firstChild,sb1Container:Am,sepLine2:Am.firstChild,sb1Title:Am.childNodes[1],sb1MetricNamesTable:Am.childNodes[2],sb1DataTable:Am.childNodes[3],sb1Canvas:Am.childNodes[4],sb2Container:Au,sepLine3:Au.firstChild,sb2Title:Au.childNodes[1],sb2MetricNamesTable:Am.childNodes[2],sb2DataTable:Au.childNodes[3],sb2Canvas:Au.childNodes[4],splitter:Ak[5],resizeRect:Ak[6]});Ac.GMLegend.applyHTML5Props(At);this.bgColor=At.background||At.backgroundColor||"transparent";AN.applyStyle2Legend(At,Av,this.domLegend);var An=this.getSplitterDockPos(),Ax=this.width-2*A-2*Ad,Ap=this.cbTitle,Ai=Ap.style,Aj=this.sb1Title,Al=this.sb2Title,Aw=Aj.style,Ah=Al.style,As=this.sepLine1,Ar=this.sepLine2,Aq=this.sepLine3;As.style.width=Ax+w;Ar.style.width=Ax+w;Aq.style.width=Ax+w;Ai.lineHeight=G+w;Aw.lineHeight=G+w;Ah.lineHeight=G+w;Ai.maxHeight=2*G+w;Aw.maxHeight=2*G+w;Ah.maxHeight=2*G+w;Ap.identity={objType:AF.LEGEND_TEXT,parentIdentity:Ay};Aj.identity={objType:AF.LEGEND_TEXT,parentIdentity:Ay};Al.identity={objType:AF.LEGEND_TEXT,parentIdentity:Ay};this.dockPos=An;this.identity=Av.identity=Ay;this.updateAlignClass();},feedData:function(Ah,Ai){this.dataArray=Ah;this.isMinimal=Ai;this.textDivs=[];Ac.GMLegend.applyHTML5Props(this.styles);this.autoCollapseLegend();if(Ai||this.autoCollapse){AT.call(this);this.draggable=false;}else{S.call(this);this.draggable=true;}q.call(this);this.updateScrollbars();},autoCollapseLegend:function(){this.autoCollapse=this.minHeight&&(this.minHeight>(this.GMH-V*2));},updateColorBySquare:function(Aj){var Ak,Al,Ai,Ah;if(Aj){Ah=this.domNode.querySelectorAll(".gm-legend-colorbox-div");Ak=Aj.elements;Al=Math.min(Ak.length,Ah.length);for(Ai=0;Ai<Al;Ai++){F.call(this,Ak[Ai],Ah[Ai]);}}},updateContainerSize:function(Ah,Ai){this.GMW=Ah;this.GMH=Ai;this.calculateDockedPositions(Ah,Ai);},updateAfterResize:function(){Ac.GMLegend.applyHTML5Props(this.styles);var Am=0,Al=this.width,An=this.cbContainer,Ap=this.sb1Container,Aj=this.sb2Container,Ak=this.sepLine1,Ai=this.sepLine2,Ah=this.sepLine3,Ao=Al-2*A-2*Ad;O.forEach(this.dataArray||[],function(Aq){if(Aq.dataType===AX.COLOR_BY){if(Aq.dataObj){if(An){An.style.width=Ao+w;}}}else{if(Aq.dataType===AX.SIZE_BY){if(Aq.dataObj){Am++;if(Am===1&&Ap){Ap.style.width=Ao+w;}if(Am===2&&Aj){Aj.style.width=Ao+w;}}}}});if(Ak){Ak.style.width=Ao+w;}if(Ai){Ai.style.width=Ao+w;}if(Ah){Ah.style.width=Ao+w;}this.domLegend.style.width=this.width+w;this.domLegend.style.height=this.height+w;},updateStyle:function(Ah){this.styles=Ah;this.bgColor=Ah.background||Ah.backgroundColor||"transparent";AN.applyStyle2Legend(Ah,this.domNode,this.domLegend);},updateTitleLineHeight:function(){var Ai=this.cbTitle,Al=Ai.style,Aj=this.sb1Title,Ah=this.sb2Title,Am=Aj.style,Ak=Ah.style;Ac.GMLegend.applyHTML5Props(this.styles);Al.lineHeight=G+w;Am.lineHeight=G+w;Ak.lineHeight=G+w;Al.maxHeight=2*G+w;Am.maxHeight=2*G+w;Ak.maxHeight=2*G+w;},getSplitterPosition:function(Aj){var Ai=Aj.src.startPos+Aj.tgt.pos.x-Aj.src.pos.x,Al=Aj.src.posInfo,Ak=Al&&Al.min,Ah=Al&&Al.max;if(Ak!==undefined){Ai=Math.max(Ai,Ak);}if(Ah!==undefined){Ai=Math.min(Ai,Ah);}return Ai;},positionResizeRect:function(Ah,Ai){var Ak=Ah.src.posInfo.dockPosition===AL.LEFT,Al=Ai-AP,Am=Ak?Al:0,Aj=Ak?this.width-Al:Al;this.resizeRect.style.left=(Am-1)+w;this.resizeRect.style.width=(Aj-2)+w;},updateLegendSlot:function(Ak,Ah){var Aj=this.getDockedPosition(),Ai=Aj&&Aj.pos;if(Ai!==Ak){this.currDockedPositionIdx=Ah;this.dockPos=this.getSplitterDockPos();this.updateDropZonePosition();this.updateAlignClass();this.updateSplitter();this.widget.onLegendDropZoneChange(this.getDockedPosition());}},ondragstart:function(Ah){var Aj=Ah.src.e.target,Ai=Ah.src.data;if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(false);}if(Aj===this.splitter){Ah.src.startPos=Aj.offsetLeft;Ah.src.posInfo=this.getSplitterInfo(Aj);this.positionResizeRect(Ah,Ah.src.startPos);Ab.addClass(this.resizeRect,"resizing");}else{this.cbTableScrollTop=this.cbTableContainer.scrollTop;this._super(Ah);if(!Ai||!Ai.isScrollBar){this.clearSelectedTargets();Ab.toggleClass(this.domNode,"gm-legend-hover",false);Ab.toggleClass(this.domLegend,"active",false);this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background=this.bgColor;this.isDragging=true;}}},ondragmove:function D(Ah){var Aj=Ah.src.e.target,Ai;if(Aj===this.splitter){Ai=this.getSplitterPosition(Ah);Aj.style.left=Ai+w;this.positionResizeRect(Ah,Ai);}else{this._super(Ah);}},ondragend:function(Ah){var Aj=Ah.src.e.target;if(Aj===this.splitter){Ab.removeClass(this.resizeRect,"resizing");this.splitterMoved(this.getSplitterPosition(Ah)-Ah.src.startPos,Ah.src.posInfo);}else{this._super(Ah);var Ai=Ah.src.data;if(!Ai||!Ai.isScrollBar){this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background="transparent";this.isDragging=false;}delete this.cbTableScrollTop;}if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},onscroll:function(){var Ai,Am,Al=this.scrollNode.scrollTop,Ak,Aj,Ah;if(this.prevScrpllTop===Al){return ;}Am=(this.dataArray&&this.dataArray.length)||0;for(Ai=0;Ai<Am;Ai++){Aj=this.dataArray[Ai];if(Aj.dataType===AX.COLOR_BY){Ah=Aj.dataObj;break;}}if(Ah){Ak=this.cbTable;Ak.innerHTML="";Ak.appendChild(this.fillColorByTable(Ah,Math.floor(Al/AI)));this.prevScrpllTop=Al;this.scrollNode.scrollTop=Al;this._super();}},fillColorByTable:function(Ax,An){var Ay,Av,Aj,Am,Al,Ao,Ap,Aq=this.styles,Ah,At=this.cutBy,Ar=this.width-2*Ad-2*A,As,Ak,Ai,Az,Au;As=Ax.elements;Av=As.length;Ah=document.createDocumentFragment();Ak=Ar-x-AU;Ai=0;Az=AI*Av;Au=An*AI;function Aw(A0){Aj=document.createElement("tr");Am=document.createElement("td");Aj.style.height=A0+w;Am[z]("class","gm-legend-colorbox");Aj.appendChild(Am);Ah.appendChild(Aj);}if(An>0){Aw(Au);}for(Ay=An;Ay<Av;Ay++){Aj=document.createElement("tr");Am=document.createElement("td");Al=document.createElement("td");Ao=document.createElement("div");Ap=document.createElement("div");Ao[z]("class","gm-legend-colorbox-ctn-div");Ao[z]("type",C.LGD_COLORBOX_CTN);Ap[z]("class","gm-legend-colorbox-div");Ap[z]("type",C.LGD_COLORBOX);F.call(this,As[Ay],Ap);Aj[z]("class","gm-legend-tr");Aj.style.height=AI+w;Am[z]("class","gm-legend-colorbox");Al[z]("class","gm-legend-desc");y.call(this,Al,As[Ay].label,Ay,u,Ak,Aq);Ao.appendChild(Ap);Am.appendChild(Ao);Aj.appendChild(Am);Aj.appendChild(Al);Ah.appendChild(Aj);Ai+=AI;if(At&&(At+Ai-AI)>Az){Aw(Az-Ai-Au);break;}}return Ah;},calculateDockedPositions:function(Ai,Al){var Ak,An=this.getWidth(),Ah=this.getHeight(),Aj=this.dockedPositions,Am=function(Ao){switch(Ao.pos){case j.LEFT_TOP:Ao.x=0;Ao.y=V;break;case j.LEFT_MIDDLE:Ao.x=0;Ao.y=Math.max(V,(Al-Ah)>>1);break;case j.LEFT_BOTTOM:Ao.x=0;Ao.y=Math.max(0,Al-Ah-V);break;case j.RIGHT_TOP:Ao.x=Ai-An;Ao.y=V;break;case j.RIGHT_MIDDLE:Ao.x=Ai-An;Ao.y=Math.max(V,(Al-Ah)>>1);break;case j.RIGHT_BOTTOM:Ao.x=Ai-An;Ao.y=Math.max(0,Al-Ah-V);break;}};for(Ak=0;Ak<Aj.length;Ak++){Am(Aj[Ak]);}this.updateDropZonePosition();},updateDropZonePosition:function(){var Ah=this.getDockedPosition(),Ai=this.dropZoneNode.style;Ai.left=Ah.x+w;Ai.top=Ah.y+w;},updateDropZoneNode:function(Ah){this._super(Ah);this.dockPos=this.getSplitterDockPos();this.updateSplitter();},onmouseover:function(Ah){var Aj=this.domLegend,An=Ah.getTarget(),Ak=An.getAttribute("type"),Am=this.widget,Ai;if(this.isDragging){return ;}var Al=R.copy(this.styles);Al.opacity+=0.4;AN.applyStyles2DomNode(this.domNode,Al);if(AA.contains(Aj,An,true)){Ab.addClass(Aj,"active");}if(Ak===C.LGD_COLORBOX){An=An.parentNode;Ak=An.getAttribute("type");}if(Ak===C.LGD_COLORBOX_CTN){Ai=An.firstChild.identity;if(!Ai||!Ai.comb){return ;}Ab.toggleClass(An,"hover-colorsquare",true);return ;}if(Am.formattingMode){switch(Ak){case C.LGD_TITLE:case C.LGD_TEXT:Ab.toggleClass(Aj,"hover-txt",true);break;default:Ab.toggleClass(this.domNode,"gm-legend-hover",true);break;}}},onmouseout:function(Ai){var Ak=this.domLegend,Ah=Ai.e.toElement||Ai.e.relatedTarget,An=Ai.getTarget(),Al=An.getAttribute("type"),Am=this.widget,Aj;AN.applyStyles2DomNode(this.domNode,this.styles);if(!AA.contains(Ak,Ah,true)){Ab.removeClass(Ak,"active");}if(Al===C.LGD_COLORBOX){An=An.parentNode;Al=An.getAttribute("type");}if(Al===C.LGD_COLORBOX_CTN){Aj=An.firstChild.identity;if(!Aj||!Aj.comb){return ;}Ab.toggleClass(An,"hover-colorsquare",false);return ;}if(Am.formattingMode||Am.isOnFormattingMode){switch(Al){case C.LGD_COLORBOX_CTN:case C.LGD_COLORBOX:break;case C.LGD_TITLE:case C.LGD_TEXT:Ab.toggleClass(Ak,"hover-txt",false);break;default:Ab.toggleClass(this.domNode,"gm-legend-hover",false);break;}}},onclick:function(Ah){var Ak=Ah.getTarget(),Ai=Ak.getAttribute("type"),Aj=this.widget;if(Ak===this.triBtn){if(!this.autoCollapse){this.raiseEvent({name:"gm-legend-clicked",action:(this.isMinimal?"restore":"minimize")});}}else{if(Ak===this.closeBtn){this.raiseEvent({name:"gm-legend-clicked",action:"close"});}else{if(Ai===C.LGD_COLORBOX){Ak=Ak.parentNode;Ai=Ak.getAttribute("type");}if(Aj.formattingMode||Aj.isOnFormattingMode){if(Ai===C.LGD_COLORBOX_CTN){this.selectColorBox(Ak,true);}else{if(Ai===C.LGD_TEXT||Ai===C.LGD_TITLE){this.selectText();}else{this.selectLegendBody();}}}else{this.clearSelectedColorBox();}}}AA.stopPropogation(null,Ah.e);},attachClearEvent:function(){if(this.clearSelectTargetfn){return ;}var Ai=this,Ah=this.domLegend;this.clearSelectTargetfn=function(Am){var Al=Am.target,Aj=Ai.widget.toolEditor,Ak;if(!AA.contains(Ah,Al,true,Ah)){if(Aj){Ak=Aj.domNode;if(!AA.contains(Ak,Al,true,Ak)){Ai.clearSelectedTargets();}}else{Ai.clearSelectedTargets();}}};AA.attachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);},clearSelectedColorBox:function(){var Ah=this.selectedColorBox;if(Ah){Ab.toggleClass(Ah,"select",false);Ab.toggleClass(Ah,"selectfmt",false);this.selectedColorBox=undefined;}},clearSelectedText:function(){Ab.removeClass(this.domNode,"select-txt");},clearSelectedLegendBody:function(){Ab.removeClass(this.domNode,"gm-legend-select");},clearSelectedTargets:function(){this.clearSelectedColorBox();this.clearSelectedText();this.clearSelectedLegendBody();if(this.clearSelectTargetfn){AA.detachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);delete this.clearSelectTargetfn;}},selectColorBox:function(Aj,Ai){var Ah=Aj.firstChild.identity;if(!Ah||!Ah.comb){return ;}this.clearSelectedText();this.clearSelectedLegendBody();if(this.selectedColorBox!==Aj){this.clearSelectedColorBox();this.selectedColorBox=Aj;if(Ai){Ab.toggleClass(Aj,"selectfmt",true);}else{Ab.toggleClass(Aj,"select",true);}this.attachClearEvent();}},selectText:function(){this.clearSelectedColorBox();this.clearSelectedLegendBody();Ab.addClass(this.domNode,"select-txt");this.attachClearEvent();},selectLegendBody:function(){this.clearSelectedColorBox();this.clearSelectedText();Ab.addClass(this.domNode,"gm-legend-select");this.attachClearEvent();},adjustColorPickerPos:function(Ah){var Ak=AA.position(Ah),Ai=0,Aj={};if(this.currDockedPositionIdx<3){Aj.x=Ak.x+Ak.w+Ai;Aj.alignLeft=true;}else{Aj.x=Ak.x-Ai;Aj.alignLeft=false;}Aj.y=Ak.y+Ak.h+Ai;return Aj;},getSplitterInfo:function(Am){if(!Am){return{};}var Ai=this.dockPos,Al={},Ak=this.width,Ah=AJ,Aj=Math.floor(this.GMW/3);Al.dockPosition=Ai;if(Ai===AL.LEFT){Al.min=Math.min(Ak-Aj,0);Al.max=Math.max(Ak-Ah,0);}else{if(Ai===AL.RIGHT){Al.min=Ah;Al.max=Aj;}}Al.min+=AP;Al.max+=AP;return Al;},splitterMoved:function(Ah,Ai){if(Ah===0){return ;}if(Ai.dockPosition===AL.LEFT){Ah=-Ah;}this.raiseEvent({name:"gm-legend-resized",position:Ah});this.updateSplitter();if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},updateSplitter:function(){AR(this.splitter,this.dockPos,this.width,this.height);this.resizeRect.style.height=this.height-2+w;}});Ac.GMLegend.applyHTML5Props=function(Aj){var Ak=parseInt(Aj.fontSize,10)||8,Ai;if(Aj.fontSize.indexOf("px")>=0){Ak=Math.floor(Ak*Y+0.5);}Ai=Math.floor(Ak/Y*E+0.5);G=Math.max(Ak,8)+9;AS=Math.floor(Ak/Y+0.5);d=Math.max(Ai,15);AI=Math.max(Ai,20)+2;s=Math.max(Ai,14)+2;Ad=parseInt(Aj.borderWidth,10)||1;var Ah=parseInt(Aj.tbHeight,10);l=isNaN(Ah)?J:Ah;};Ac.GMLegend.getLegendSize4MinMode=function(Ai,Aj){var Al,Ak,Ah=l+2*Ad;if(Ai){Ak=Ai.elements;Al=Ak.length;Ah+=AI*Al;Ah+=2*A;}Ah=Math.min(Ah,Aj-V*2);return{width:x+5+7+2*Ad,height:Ah};};Ac.GMLegend.getLegendSize=function(Av,Ak,Ah,An,Ax,Ao){var Ap,Ai,Aw,Am,Al=An-V*2,At=0,Aj=0,As={},Ar,Aq,Au;if(!Av||!Av.length||Av.length<1){return{};}if(Ak!==undefined){if(!Ao){Ao=Math.floor(Aa(Av,Ax)*Ak);}Am=Math.min(Ao,Math.floor(Ah/3));Am=Math.max(Am,50);return h(Av,Am,An,Ax);}Am=Math.min(Math.floor(0.2*Ah),300);for(Ap=0;Ap<Av.length;Ap++){Aq=Av[Ap];if(Aq.dataType===AX.COLOR_BY){Ar=AZ(Aq.dataObj,Ax);if(Ar>At){At=Ar;}}else{if(Aq.dataType===AX.SIZE_BY){Ar=AO(Aq.dataObj,Ax);if(Ar>Aj){Aj=Ar;}}}}Ai=Math.max(At,Aj)+2*Ad;As.width=Math.min(Ai,Am);As.scale=As.width/Ai;Au=c(Av,As.width,Ax);Aw=Au.height;As.autoCollapse=Au.minHeight>Al;As.minHeight=Au.minHeight;As.height=Math.min(Aw,Al);if(Aw>Al){As.cutBy=Aw-Al;}return As;};}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.hash");mstrmojo.requiresCls("mstrmojo.VisEnum");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Vector2D","Point2D","CEModuleMain","TripleId","FormatLine","JSONCanvas","SVGCanvas","GraphMatrixContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumPictureFormatType","EnumGraphMajorType","EnumLineJoinType","EnumLineStyle","EnumImageUsage","EnumDSSExtraGraphObject","EnumChartStyle","EnumGraphMatrixMajorGraphType","EnumGraphMatrixThemeType","EnumDssGraphGridChartUniformColorMode","EnumAttachedPointsStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumVariantBool","EnumDSSGraphFillEffect");var CG=mstrmojo.chart,Bs=CG.enums,d=Bs.EnumPictureFormatType,g=Bs.EnumGraphMajorType,A3=Bs.EnumLineJoinType,AW=Bs.EnumImageUsage,Am=CG.common.Utility,k=CG.gModuleMain,CC=CG.gNullTripleId,AZ=CG.gNullSeriesId,M=CG.gNullGroupId,Ba=Bs.EnumLineStyle,Bk=Bs.EnumDSSExtraGraphObject,H=Bs.EnumChartStyle,a=Bs.EnumGraphMatrixMajorGraphType,BC=Bs.EnumGraphMatrixThemeType,C=Bs.EnumAttachedPointsStyle,Aj=mstrmojo.VisEnum.ControlType,Ag=mstrmojo.hash;var Az=700,BZ=400,Ad=-16383,J=16383,BU=-16383,AA=16383,AE=500,Ar=0.1667,BQ=96,T=72;var CA=mstrmojo.chart.model,Av=CA.enums,Bg=Av.EnumDSSGraphType,Bi=Av.EnumDSSGraphProperty,Bj=Av.EnumDSSGraphObject,Z=Av.EnumDSSGraphFillBevelEffect,B1=Av.EnumDSSGraphFillEffect;var v=[],AQ=new CG.TripleId();var BX=mstrmojo.chart.ChartContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartContext",mBaseLayerObject:null,mPropertyMap:null,mGraphWidth:k.mDefaultGraphWidth,mGraphHeight:k.mDefaultGraphHeight,mGraphType:Bg.DssGraphTypeReserved,mDataset:null,mFormatManager:null,mCanvas:null,mCanvasInfo:null,caKeyMap:null,mLineJoinType:A3.LJT_MITER,mIsLineWidthOdd:false,mAbsoluteFontLineSize:true,mIsFontAntiAlias:true,mFontScaleRatio:1,mAxisAutoNumberFormat:null,mSelectedAxisAutoNumberFormat:null,mThresholdColorCache:{},globalFormats:null,mManualLayoutMode:false,mRecalculateFrame:true,mIsValueAxisShown:true,mUseAnimation:false,mIsTimeSeriesChart:false,mIsUniformAxisMode:false,mIsEntireChart:true,mIsGraphMatrix:false,mThemeType:BC._black,mUniformAxisContext:null,mpGraphMatrixContext:null,mPartialRendering:false,mRenderingWindow:null,mImageUsage:AW.GENERAL,mImageFormat:d.SVG,mDebugUseNewProperties:true,mTimers:[],mUseTimer:false,init:function CN(CV){this._super(CV);this.caKeyMap={c1:"x1",c2:"x1"};this.mUseTimer=CV.UseTimer||false;this.mGraphWidth=k.mDefaultGraphWidth;this.mGraphHeight=k.mDefaultGraphHeight;this.mDataset=CV.DataSet||CV.mDatasetPtr||null;this.mThemeType=BC._black;this.mSelectedAxisAutoNumberFormat={Array:[],Format:null};},getUtiliy:function Al(){return mstrmojo.chart.common.Utility;},populateCanvas:function AX(CW){CW=CW||false;if(CW){this.mCanvas=null;}if(!!this.mCanvas){return ;}var CV="SVG";if(this.mCanvasInfo){CV=this.mCanvasInfo.type||"SVG";delete this.mCanvasInfo.type;}else{this.mCanvasInfo={type:"SVG",gradPrefix:"gmGrad",mGradientCount:0,seriesDrawOrder:this.mDataset.GetSeriesIndexByPriority()};}switch(CV){case"JSON":this.mCanvas=new CG.JSONCanvas({});break;default:this.mCanvas=new CG.SVGCanvas(this.mCanvasInfo);break;}this.mCanvasInfo=null;},startTimer:function Bu(CW){if(this.mUseTimer){var CV=CW.functionName+": "+CW.purpose;console.time(CV);this.mTimers.push(CV);}},endTimer:function Bw(){if(this.mUseTimer){var CV=this.mTimers.pop();if(CV){console.timeEnd(CV);}}},vdWidth:function Bn(CV){return Math.floor(CV*this.mGraphWidth/Az+0.5);},vdHeight:function CB(CW){var CV=this.mGraphHeight;if(this.mIsUniformAxisMode&&!this.mIsEntireChart){CV=this.mUniformAxisContext.mGraphHeight;}return Math.floor(CW*CV/BZ+0.5);},NeedAdjustedLinePath:function Bl(){var CV=this.mImageFormat;return this.mIsLineWidthOdd&&(CV!==d.PDF);},SetGraphSize:function AY(CW,CV){if(CW>0&&CV>0){this.mGraphWidth=CW;this.mGraphHeight=CV;if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}}},GetGraphType:function A5(){return this.mGraphType;},dialogSizeToPixelSize:function x(CV){return CV*Math.min(this.mGraphWidth,this.mGraphHeight)/2000;},DrawPolygon:function Bx(CX,Ca,CY,CZ,CW){if(this.mImageFormat===d.SVG){return ;}if((Ca===undefined)||(Ca===null)){Ca=true;}CY=CY||false;CZ=CZ||null;CW=CW||Ba.LS_SOLID;if(CX.length<3){return ;}this.NewPath();if(Ca&&this.NeedAdjustedLinePath()){var CV=this.hAdjustLinePath(CX);this.DrawPolyLine(CV,false,CY,CZ,CW);}else{this.DrawPolyLine(CX,false,CY,CZ,CW);}this.ClosePath();},DrawStraightLine:function Ab(CX,CV){if(this.mImageFormat===d.SVG){return ;}this.NewPath();if(this.NeedAdjustedLinePath()){var CW=0,CY=0;if(CX.x===CV.x){CW=0.5;}if(CX.y===CV.y){CY=0.5;}this.hMoveTo(CX.x+CW,CX.y+CY,true);this.hLineTo(CV.x+CW,CV.y+CY,true);}else{this.hMoveTo(CX.x,CX.y,true);this.hLineTo(CV.x,CV.y,true);}},DrawPolyLine:function AR(Cc,Cb,CY,CV,Ca){if(this.mImageFormat===d.SVG){return ;}if((Cb===undefined)||(Cb===null)){Cb=true;}CY=CY||false;CV=CV||null;Ca=Ca||Ba.LS_SOLID;if(Ca===Ba.LS_GRADIENT){Ca=Ba.LS_SOLID;}var Cd=Cc.length,CZ,CW,Ce;if(Cd<=0){return ;}var CX;if(this.NeedAdjustedLinePath()){CX=this.hAdjustLinePath(Cc);}Cd=CX.length;this.NewPath();this.hMoveTo(CX[0].x,CX[0].y,Cb,CY,CV);CW=0;for(CZ=1;CZ<Cd;++CZ){if(Ca===Ba.LS_SOLID){this.hLineTo(CX[CZ].x,CX[CZ].y,Cb,CY,CV);}else{Ce=CG.gLinePatterns[Ca];this.DrawDashedLine(CX[CW],CX[CZ],Ce);}CW=CZ;}},DrawDashedLine:function CI(CX,Ce,Cc){if(this.mImageFormat===d.SVG){return ;}var CY,Cf,Cd,CZ,Cg,CV=0,Ca=0,Cb,CW;CY=Math.sqrt((CX.x-Ce.x)*(CX.x-Ce.x)+(CX.y-Ce.y)*(CX.y-Ce.y));Cf=(Ce.x-CX.x)/CY;Cd=(Ce.y-CX.y)/CY;Cb=Cc.length;CZ=CX.x;Cg=CX.y;while(CV<CY){CW=Math.min(Cc[Ca%Cb],CY-CV);++Ca;CV+=CW;if(Ca%2===1){this.MoveTo(CZ,Cg);}CZ+=CW*Cf;Cg+=CW*Cd;if(Ca%2===1){this.LineTo(CZ,Cg);}}},isParetoChart:function BL(){return this.mGraphType===Bg.DssGraphTypePareto||this.mGraphType===Bg.DssGraphTypePareto_Percent;},isCombinationChart:function S(){var CV=this.GetGraphMatrixContext();return this.mIsGraphMatrix&&CV.isCombinationChart();},hasBarAreaInComb:function A1(){if(this.isCombinationChart()===false){return false;}var CV=this.mDatasetPtr.GetSeriesByShape();return CV.Bar.length>0||CV.Area.length>0;},getFontScale:function Af(){if(this.mAbsoluteFontLineSize){return this.mFontScaleRatio;}return 1;},vdRect:function t(CV){return(new CG.Rect2D({x:this.vdWidth(CV.x),y:this.vdHeight(CV.y),width:this.vdWidth(CV.width),height:this.vdHeight(CV.height)}));},vdPoint:function CH(CV){return(new CG.Point2D({x:this.vdWidth(CV.x),y:this.vdHeight(CV.y)}));},vdFontSize:function B4(CV){var CX=CV;if(this.mIsGraphMatrix){return CX;}if(!this.mAbsoluteFontLineSize){CX=this.vdHeight(CX);}if(!this.mIsTimeSeriesChart){CX=this.PtSizeToPixelSize(CX);CX*=this.getFontScale();if(this.mIsGraphMatrix){var CW=this.mDataset.GetZoomScale();CX=CX*CW+0.5;}if(CX===0){CX=1;}}return CX;},vdLineWidth:function A8(CW){var CV=CW;if(!this.mAbsoluteFontLineSize){CV=this.vdHeight(CV);}CV=this.PtSizeToPixelSize(CV);CV=Math.floor(CV/100+0.5);return CV;},TDGToMSTRPoint:function BM(CX,CW){var CV,CY;CV=Math.floor((CX-Ad)*this.mGraphWidth/(J-Ad)+0.5);CY=Math.floor((AA-CW)*this.mGraphHeight/(AA-BU)+0.5);return(new CG.Point2D({x:CV,y:CY}));},setCanvas:function AV(CV){this.mCanvas=CV;},saveState:function Bc(){this.mCanvas.saveState();},Rotate:function CE(CV,CW){this.mCanvas.Rotate(CV,CW);},Scale:function BW(CV,CW){this.mCanvas.Scale(CV,CW);},RestoreState:function W(){this.mCanvas.RestoreState();},Clip:function Bo(){this.mCanvas.Clip();},DrawRectangle:function N(CV,CW){if(this.mImageFormat===d.SVG){return ;}this.NewPath();if(CW&&this.NeedAdjustedLinePath()){this.mCanvas.AddRect(CV.x+0.5,CV.y+0.5,CV.width,CV.height);}else{this.mCanvas.AddRect(CV.x,CV.y,CV.width,CV.height);}},FinishTextBoundingBox:function L(CW,CV,CY){var CX=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){this.mCanvas.CreateSVGTextBoundingBox(CW,CV,CY,CX);}},FinishDrawCircle:function A6(CW,CX){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CV=this.hGetIdentity(CX.mSeriesId,CX.mGroupId);this.mCanvas.CreateSVGCircle(CW.x,CW.y,CW.r,CV);}},FinishDrawRect:function Aq(CW,CX){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CV;if(CX.mObjectId===Bj.DssGraphDataMarker){CV=this.hGetIdentityEx(CX.mSeriesId,CX.mGroupId,"marker");}else{CV=this.hGetIdentity(CX.mSeriesId,CX.mGroupId);}if(this.NeedAdjustedLinePath()){CW.x=parseInt(CW.x)===CW.x?CW.x+0.5:CW.x;CW.y=parseInt(CW.y)===CW.y?CW.y+0.5:CW.y;}this.mCanvas.CreateSVGRect(CW.x,CW.y,CW.width,CW.height,CV);}},FinishDrawPieSlice:function B6(CW,Ca,CV,CZ,Cc,Cb,CY){var CX;if(Cb===undefined){Cb=false;}if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(Cc.angleByIndex!==undefined){CX=this.hGetPieIdentity(Cc.mSeriesId,Cc.mGroupId,Cc.angleByIndex,Cc.sliceById);}else{CX=this.hGetIdentity(Cc.mSeriesId,Cc.mGroupId);}if(Cb){this.mCanvas.CreateSVGCircle(CW.x,CW.y,Ca,CX,CY,this.mThemeType===BC._white);}else{this.mCanvas.CreateSVGSector(CW.x,CW.y,Ca,CV,CZ,CX,CY,this.mThemeType===BC._white);}}},FinishDrawRingPieSlice:function s(CW,Ca,CZ,CV,CY,Cb){var CX;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(Cb.angleByIndex!==undefined){CX=this.hGetPieIdentity(Cb.mSeriesId,Cb.mGroupId,Cb.angleByIndex,Cb.sliceById);}else{CX=this.hGetIdentity(Cb.mSeriesId,Cb.mGroupId);}this.mCanvas.CreateSVGRingSector(CW.x,CW.y,Ca,CZ,CV,CY,CX);}},FinishDrawRing:function BG(Ca,CZ,CV,CW,CX){CX=CX||false;var CY;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(CX){CY=this.hGetPieIdentity(CW.mSeriesId,CW.mGroupId,CW.angleByIndex,CW.sliceById);}else{CY=this.hGetIdentity(CW.mSeriesId,CW.mGroupId);}this.mCanvas.CreateSVGRing(Ca.x,Ca.y,CZ,CV,CY);}},FinishDrawPolyline:function CR(Cj,CW,Cf,Cd,CX,Cg,CZ){var Cb=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){Cf=Cf||false;var Ci=0,Cc=1,Cl=2,Ch=3,Ca=4,Ck,Ce=CW.mObjectId,CY=this.mCanvas;var CV=Cj;if(this.NeedAdjustedLinePath()){CV=this.hAdjustLinePath(Cj);}switch(Ce){case Bj.DssGraphUserLine1:case Bj.DssGraphUserLine2:case Bj.DssGraphUserLine3:case Bj.DssGraphUserLine4:Cd=this.hGetIdentityEx(Ce-Bj.DssGraphUserLine1,0,"originLine");if(Cd){Ck=[Cd];}else{Ck=[];}CY.CreateSVGPolyLine(CW.mSeriesId,CV,Ck,Ca);break;case Bj.DssGraphO1Major:case Bj.DssGraphO2Major:case Bj.DssGraphY1Major:case Bj.DssGraphY2Major:case Bj.DssGraphX1Major:case Bj.DssGraphX2Major:case Bj.DssGraphO1Minor:case Bj.DssGraphO2Minor:case Bj.DssGraphY1Minor:case Bj.DssGraphY2Minor:case Bj.DssGraphX1Minor:case Bj.DssGraphX2Minor:Ck=[];CY.CreateSVGPolyLine(CW.mSeriesId,CV,Ck,Cl);break;case Bj.DssGraphO1Body:case Bj.DssGraphO2Body:case Bj.DssGraphX1Body:case Bj.DssGraphX2Body:case Bj.DssGraphY1Body:case Bj.DssGraphY2Body:Ck=[];CY.CreateSVGPolyLine(CW.mSeriesId,CV,Ck,Ch);break;case Bj.DssGraphTrendLine:CY.CreateSVGPolyLineForTRLine(Cj,Cb,Cd,true,CX,Cg,CZ);break;default:if(Cf){Ck=[];CY.CreateSVGPolyLine(CW.mSeriesId,CV,Ck,Ci);}else{Ck=this.hGetIdentities(CW.mSeriesId,CW.mGroupId,Cj.length);CY.CreateSVGPolylineWithCircles(CW.mSeriesId,CV,Ck);}break;}}},FinishDrawTickerShape:function By(CZ,CX,Ca){var CY=[CZ,CX],CV=this.mCanvas;if(CV instanceof mstrmojo.chart.SVGCanvas){var CW=this.hGetIdentities(Ca.mSeriesId,Ca.mGroupId,1);CV.CreateSVGPolyLine(Ca.mSeriesId,CY,CW,5);}},FinishDrawStraightLine:function X(CW,Cb,CV,CZ,Ca){var CY=this.mDataset.GetSeriesCount(),Cc=[CW],CX=this.mCanvas;Cc.push(Cb);if(this.NeedAdjustedLinePath()){Cc=this.hAdjustLinePath(Cc);}if(CX instanceof mstrmojo.chart.SVGCanvas){if(CZ){if(CV.mObjectId===Bj.DssGraphTrendLine){CX.CreateSVGPolyLineForTRLine(Cc,CY,CZ,true,CW,Ca,Cb);}else{if(CV.mObjectId===Bj.DssGraphReferenceLine){CX.CreateSVGPolyLineForTRLine(Cc,CY,CZ,false,CW,Ca,Cb);}}}else{switch(CV.mObjectId){case Bj.DssGraphO1Body:case Bj.DssGraphO2Body:case Bj.DssGraphX1Body:case Bj.DssGraphX2Body:case Bj.DssGraphY1Body:case Bj.DssGraphY2Body:var Cd=[];CX.CreateSVGPolyLine(CV.mSeriesId,Cc,Cd);return ;}Cd=this.hGetIdentities(CV.mSeriesId,CV.mGroupId,1);Cd.push(Cd[0]);CX.CreateSVGPolylineWithCircles(CV.mSeriesId,Cc,Cd);}}},FinishDrawPolygon:function Ao(Ca,Cb,CZ){var CW,CX=this.mCanvas,CY=Ca.length;if(CY<3){return ;}if(CX instanceof mstrmojo.chart.SVGCanvas){var CV=Ca;if(this.NeedAdjustedLinePath()){CV=this.hAdjustLinePath(Ca);}switch(Cb){case C.NORMAL:CW=this.hGetIdentity(CZ.mSeriesId,CZ.mGroupId);CX.CreateSVGPolygon(CZ.mSeriesId,CV,CW);break;case C.TOOLTIP_UPPER:if((CY&1)!==0){return ;}CW=this.hGetIdentities(CZ.mSeriesId,CZ.mGroupId,CY/2);CX.CreateSVGPolygonWithCircles(CZ.mSeriesId,CV,CW);break;case C.TOOLTIP_U2L:if((CY&1)!==0){return ;}CW=this.hGetIdentities(CZ.mSeriesId,CZ.mGroupId,CY/2);CX.CreateSVGPolygonWithRects(CZ.mSeriesId,CV,CW);break;case C.TOOLTIP_TRAPEZOID:if((CY&1)!==0){return ;}CW=this.hGetIdentities(CZ.mSeriesId,CZ.mGroupId,CY/2);CX.CreateSVGPolygonWithTrapezoid(CZ.mSeriesId,CV,CW);break;default:CX.CreateSVGPolygon(CZ.mSeriesId,CV);break;}}},allowOverlapBetweenDatalabels:function(){var CV=this.mDataset;return CV&&CV.allowDatalabelOverlap();},hGetLabelIdentity:function A7(CY){var CV={identity:null,type:"data-label"};switch(CY.mObjectId){case Bj.DssGraph2DO1Label:case Bj.DssGraph2DO2Label:case Bj.DssGraphY1Label:case Bj.DssGraphY2Label:case Bj.DssGraphX2Label:case Bj.DssGraphX1Label:CV.type="axis-text";break;case Bj.DssGraphUserLabel1:case Bj.DssGraphUserLabel2:case Bj.DssGraphUserLabel3:case Bj.DssGraphUserLabel4:var CX=CY.mObjectId-Bj.DssGraphUserLabel1;CV.identity=this.hGetIdentityEx(CX,0,"origin-label");CV.type=CX<=1?Aj.GM_ORIGIN_LABEL_H:Aj.GM_ORIGIN_LABEL_V;break;case Bj.DssGraphRefLineText:CV.type="ref-label";break;case Bj.DssGraphTrendLineText:CV.type="trend-label";break;default:var CW=null;if(CY.mSeriesId>=0&&CY.mGroupId>=0){if(CY.angleByIndex!==undefined){CW=this.hGetPieIdentityEx(CY.mSeriesId,CY.mGroupId,CY.angleByIndex,CY.sliceById,"data-label");}else{CW=this.hGetIdentityEx(CY.mSeriesId,CY.mGroupId,"data-label");}}CV.identity=CW;break;}return CV;},FinishDrawText:function l(CZ,CY){var CW=this.mCanvas;if(CW instanceof mstrmojo.chart.SVGCanvas){switch(CZ.mObjectId){case Bj.DssGraph2DO1Label:case Bj.DssGraph2DO2Label:case Bj.DssGraphY1Label:case Bj.DssGraphY2Label:case Bj.DssGraphX2Label:case Bj.DssGraphX1Label:CW.CreateSVGAxisText(CZ.mSeriesId,CY.Tooltip,CY.Identities);break;case Bk.DssGraphBanner:if(!CY.Identities){CY.Identities=this.hGetIdentities(CZ.mSeriesId,CZ.mGroupId,1);}CW.CreateSVGBannerText(CZ.mSeriesId,CY.Identities);break;default:var CV=this.hGetLabelIdentity(CZ);var CX=this.mDataset.GetSeriesCount();if(CV.type==="ref-label"){CV.identity=CY.Identity;}CW.CreateSVGGenericText(CX,CV.identity,CV.type);break;}}},FinishDrawCurves:function G(Ce,Cb,Ca,CV,Cc,CX){var CY=this.mDataset.GetSeriesCount(),Cd=Cb.mSeriesId,CW=this.mCanvas,CZ;if(CW instanceof mstrmojo.chart.SVGCanvas){CW.CreateSVGCurves(Ce,CY,Cd,Ca,Cb.mObjectId===Bj.DssGraphTrendLine,CV,Cc,CX);}},hGetIdentities:function BT(CY,CZ,Ca){var CX=[],CW;for(CW=0;CW<Ca;++CW){var CV=this.hGetIdentity(CY,CZ+CW);CX.push(CV);}return CX;},hGetPieIdentity:function Ax(CY,CW,CV,CX){if(CY<0){CY=0;}if(CW<0){CW=0;}if(CV===undefined||CV<0){CV=0;}if(CX===undefined||CX<0){CX=0;}return this.mDataset.dataProvider.getGraphCell(CY,CW).getSliceIdentity(CV,CX);},hGetIdentity:function AJ(CV,CW){if(CV<0){CV=0;}if(CW<0){CW=0;}return this.mDataset.dataProvider.getGraphCell(CV,CW).getIdentity();},hGetIdentityEx:function P(CY,Ca,CX){CX=CX||"generic";if(CY<0){CY=0;}if(Ca<0){Ca=0;}var CW=this.mDataset.dataProvider;switch(CX){case"data-label":return CW.getGraphCell(CY,Ca).getDataLabelIdentity();case"marker":return CW.getGraphCell(CY,Ca).getMarkerIdentity();case"originLine":case"origin-label":var CZ=["y1","y2","x1","x2"],CV=CZ[CY]||"y1";if(CX==="originLine"){return CW.getAxisOriginLineIdentity(CV);}return CW.getAxisOriginLabelIdentity(CV);default:return this.hGetIdentity(CY,Ca);}},hGetPieIdentityEx:function CD(Cc,CW,CV,CZ,CX){if(Cc<0){Cc=0;}if(CW<0){CW=0;}if(CV===undefined||CV<0){CV=0;}if(CZ===undefined||CZ<0){CZ=0;}var Ca=this.mDataset;switch(CX){case"data-label":var CY=Ca.dataProvider.getGraphCell(Cc,CW);if(!!CY){if(CY.isFaked){CY=Ca.dataProvider.innerGetGraphCell(Cc,CW);}var Cb=CY.getSinglePieDPs();if(!!Cb){return Cb[CV].getDataLabelIdentity(CZ,true);}}break;default:return this.hGetPieIdentity(Cc,CW,CV,CZ);}},getIdentity:function At(CX,Ca,Ce){Ce=Ce||"shape";var Cc=[],Cd;if(Ca==="pie"){var CZ=this.mDataset,CV=0,CW=0,Cb,CY;if(CZ){CV=CZ.GetPieCountAtOneDataPoint(CX.mSeriesId,CX.mGroupId);CW=CZ.GetPieSliceCount(CX.mSeriesId,CX.mGroupId);}for(Cb=0;Cb<CV;Cb++){for(CY=0;CY<CW;CY++){Cd=this.hGetPieIdentityEx(CX.mSeriesId,CX.mGroupId,Cb,CY,Ce);Cc.push(Cd);}}}else{Cd=this.hGetIdentityEx(CX.mSeriesId,CX.mGroupId,Ce);Cc.push(Cd);}return Cc;},hAdjustLinePath:function AT(CX){var CZ=CX.length,Ca,CW,CY;var CV=Ag.cloneArray(CX);Ca=CZ-1;for(CY=0;CY<CZ;++CY){CW=(CY+1===CZ)?0:CY+1;if(CX[CY].x===CX[Ca].x||CX[CY].x===CX[CW].x){CV[CY].x+=0.5;}if(CX[CY].y===CX[Ca].y||CX[CY].y===CX[CW].y){CV[CY].y+=0.5;}Ca=CY;}return CV;},NewPath:function D(){this.mCanvas.NewPath();},ClosePath:function AB(){this.mCanvas.ClosePath();},SetFontAntiAlias:function CF(CV){this.mIsFontAntiAlias=CV;},SaveSurfaceToObject:function Aw(CV){return this.mCanvas.SaveToObject(CV);},CalculateDepthOffset:function Ac(CY,CW,Cd){var CZ=0,CX=Math.cos(k.DegreeToRadian(CW)),Ce=Math.sin(k.DegreeToRadian(CW)),Cc,Cb,Ca,CV;if(Cd===undefined){Cd=false;}if(Cd){CZ=1/Math.sqrt(Math.pow(this.mGraphWidth*CX,2)+Math.pow(this.mGraphHeight*Ce,2));}else{CZ=Ar/AE;}Ca=this.mGraphWidth*CZ*CY;CV=this.mGraphHeight*CZ*CY;Cc=Math.floor(Ca*CX+0.5);Cb=-Math.floor(CV*Ce+0.5);return{OffsetX:Cc,OffsetY:Cb};},hApplyEnhancedSeriesEffect:function O(CW,CX){if(this.mIsGraphMatrix){return ;}var CV=CW.EnhancedSeriesEffect,CY,Ca;switch(this.mGraphType){case Bg.DssGraphTypePies:case Bg.DssGraphTypeMultiple_Pies:case Bg.DssGraphTypeMultiple_Proportional:case Bg.DssGraphTypeX_Y_Scatter:case Bg.DssGraphTypeDualAxis_X_Y_Scatter:case Bg.DssGraphTypeX_Y_Scatter_with_Labels:case Bg.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Bg.DssGraphTypeBubble:case Bg.DssGraphTypeBubble_DualAxis:case Bg.DssGraphTypeBubble_With_Labels:case Bg.DssGraphTypeBubble_DualAxis_With_Labels:CV.call(CW,204,Z.DssGraphFillBevelSphere,0,270,10);break;case Bg.DssGraphTypeRing_Pie:case Bg.DssGraphTypeMultiple_Ring_Pies:case Bg.DssGraphTypeMultiple_Proportional_Ring_Pies:CV.call(CW,204,Z.DssGraphFillBevelDonut,50,0,30);break;default:var CZ=Bs.EnumCollectionType;switch(CX){case CZ.CT_VERTICAL_AREA:CV.call(CW,204,Z.DssGraphFillBevelSphere,0,270,20);break;case CZ.CT_VERTICAL_BAR:Ca=204;CY=this.GetProperty(Bi.DssGraphDepthMode,CC);if(this.isVerticalBar()&&CY){Ca=255;}CV.call(CW,Ca,Z.DssGraphFillBevelDonut,50,0,30);break;case CZ.CT_HORIZONTAL_AREA:CV.call(CW,204,Z.DssGraphFillBevelSphere,0,180,20);break;case CZ.CT_HORIZONTAL_BAR:CV.call(CW,204,Z.DssGraphFillBevelSphere,0,270,30);break;case CZ.CT_DEPTH_LINE_OR_LINE_MARKER:CV.call(CW,204,Z.DssGraphFillBevelSphere,0,270,10);break;default:break;}break;}},GetLocation:function u(CW){var CY,CX,CV;CY=this.GetProperty(CW,CC);if(CY===null||CY===undefined){return ;}CX=this.TDGToMSTRPoint(CY.Left,CY.Top);CV=this.TDGToMSTRPoint(CY.Right,CY.Bottom);return new CG.Rect2D({x:CX.x,y:CX.y,width:CV.x-CX.x,height:CV.y-CX.y});},GetLocationRect:function CJ(CX){var CW,CV;CW=this.GetLocation(CX);if(CW){CV=new CG.Rect2D({x:CW.Left,y:CW.Top,width:CW.Right-CW.Left,height:CW.Bottom-CW.Top});}return CV;},PutLocation:function Ay(CV,CW){},GetProperty:function CM(CV,CW){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CV,this.MapObject(CW.mObjectId),CW.mSeriesId]);},GetLocalProperty:function BF(CV,CW){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CV,this.MapObject(CW.mObjectId),CW.mSeriesId]);},PutProperty:function n(CV,CW,CX){if(this.mPropertyMap===null){this.mPropertyMap=new CG.common.MapStructure();}this.mPropertyMap.push([CV,this.MapObject(CW.mObjectId),CW.mSeriesId],CX);if(CV===Bi.DssGraphType){this.mGraphType=CX;}},normalDirection:function BJ(CY,CX){var Ca=this.CalculateDepthOffset(1000,CX),CW=Ca.OffsetX,Cb=Ca.OffsetY,CV=new CG.Vector2D({x:CW,y:Cb}),CZ=CV.CrossProduct(CY);if(CZ===0){return 0;}return CZ>0?1:-1;},IsVertical:function e(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Area_Absolute:case Bg.DssGraphTypeVertical_Area_Stacked:case Bg.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Area_Percent:case Bg.DssGraphTypeVertical_Bar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_Stacked:case Bg.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Bar_Percent:case Bg.DssGraphTypeVertical_Line_Absolute:case Bg.DssGraphTypeVertical_Line_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Line_Percent:case Bg.DssGraphTypeVertical_Bar_Absolute:case Bg.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeVertical_Line_DualAxis_Percent:case Bg.DssGraphTypeVertical_Area_DualAxis_Percent:case Bg.DssGraphTypeVertical_Bullet:case Bg.DssGraphTypeVertical_CategoryPies_Absolute:case Bg.DssGraphTypeVertical_CategoryPies_Percent:case Bg.DssGraphTypeVertical_CategoryPies_Stacked:case Bg.DssGraphTypeGrid_Pies:case Bg.DssGraphTypeScatter_Pies:case Bg.DssGraphTypeBubble_Pies:return true;}switch(this.GetGraphMajorType()){case g.GMT_BUBBLE:case g.GMT_SCATTER:case g.GMT_STOCK:return true;}return false;},IsDualAxis:function y(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bg.DssGraphTypeDualAxis_X_Y_Scatter:case Bg.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Bg.DssGraphTypeDualAxis_Polar_Coordinate_Chart:case Bg.DssGraphTypeDualAxis_Radar_Line:case Bg.DssGraphTypeDualAxis_Radar_Stacked_Area:case Bg.DssGraphTypeBubble_DualAxis:case Bg.DssGraphTypeHiLo_DualAxis_Stock_Chart:case Bg.DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:case Bg.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:case Bg.DssGraphTypeBubble_DualAxis_With_Labels:case Bg.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bi.DssGraphRadar_DualAxis_Radar_Stacked_Line:case Bi.DssGraphRadar_DualAxis_Radar_Area:case Bg.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeVertical_Line_DualAxis_Percent:case Bg.DssGraphTypeVertical_Area_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}},IsStackedChart:function BN(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Area_Stacked:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Area_Stacked:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_Stacked:case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Line_Stacked:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bg.DssGraphTypeRadar_Stacked_Area:case Bg.DssGraphTypeDualAxis_Radar_Stacked_Area:case Bg.DssGraphTypeRadar_Area_Stacked:case Bi.DssGraphRadar_Line_Stacked:case Bi.DssGraphRadar_DualAxis_Radar_Stacked_Line:return true;default:return false;}},IsPieChart:function Y(){if(this.mIsGraphMatrix){switch(this.GetGraphMatrixContext().mGraphType){case Bg.DssGraphTypeVertical_CategoryPies_Absolute:case Bg.DssGraphTypeVertical_CategoryPies_Percent:case Bg.DssGraphTypeVertical_CategoryPies_Stacked:case Bg.DssGraphTypeHorizontal_CategoryPies_Absolute:case Bg.DssGraphTypeHorizontal_CategoryPies_Percent:case Bg.DssGraphTypeHorizontal_CategoryPies_Stacked:case Bg.DssGraphTypeGrid_Pies:case Bg.DssGraphTypeScatter_Pies:case Bg.DssGraphTypeBubble_Pies:return true;default:return false;}}else{return this.GetGraphMajorType()===g.GMT_PIE;}},MapObject:function Bf(CV){if(CV===Bi.DssGraphPieSlice){return Bi.DssGraphRiser;}return CV;},SplitRect:function BR(CZ,CV,CX,Cb,Ca){var CY,CW;if(CV){CY=CZ.height*CX/100;Cb.Reset(CZ.x,CZ.y,CZ.width,CZ.height-CY);Ca.Reset(CZ.x,CZ.y+Cb.height,CZ.width,CY);}else{CW=CZ.width*CX/100;Cb.Reset(CZ.x+CW,CZ.y,CZ.width-CW,CZ.height);Ca.Reset(CZ.x,CZ.y,CW,CZ.height);}},getAxisAutoNumberFormat:function AL(Cc,CZ,Cb){Cb=Cb||false;var CW=this.mDataset,CY;if(CZ&&CZ.length){var CV=this.mSelectedAxisAutoNumberFormat;if(CV.Format!==null){var Ca=true,CX=CV.Array;if(CX&&CX.length===CZ.length){for(CY=0;CY<CX.length;CX++){if(CX[CY]!==CZ[CY]){Ca=false;break;}}}if(Ca){Cc.reset(CV.Format);return ;}}CW.getValueAxisNumberFormat(Cc,CZ,Cb);CV.Array=CZ.slice(0);CV.Format=new CG.ChartAdvFormat({ChartAdvFormat:Cc});}else{var Cd=this.mAxisAutoNumberFormat;if(Cd!==null){Cc.reset(Cd);}else{CW.getValueAxisNumberFormat(Cc);this.mAxisAutoNumberFormat=new CG.ChartAdvFormat({ChartAdvFormat:Cc});}}},GetGraphMajorType:function V(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Area_Absolute:case Bg.DssGraphTypeVertical_Area_Stacked:case Bg.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Area_Percent:case Bg.DssGraphTypeHorizontal_Area_Absolute:case Bg.DssGraphTypeHorizontal_Area_Stacked:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Area_Percent:case Bg.DssGraphTypeVertical_Bar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_Stacked:case Bg.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Bar_Percent:case Bg.DssGraphTypeHorizontal_Bar_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_Percent:case Bg.DssGraphTypeVertical_Line_Absolute:case Bg.DssGraphTypeVertical_Line_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Line_Percent:case Bg.DssGraphTypeHorizontal_Line_Absolute:case Bg.DssGraphTypeHorizontal_Line_Stacked:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Line_Percent:case Bg.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Bullet:case Bg.DssGraphTypeHorizontal_Bullet:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeVertical_Line_DualAxis_Percent:case Bg.DssGraphTypeVertical_Area_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_CategoryPies_Absolute:case Bg.DssGraphTypeHorizontal_CategoryPies_Stacked:case Bg.DssGraphTypeHorizontal_CategoryPies_Percent:case Bg.DssGraphTypeVertical_CategoryPies_Absolute:case Bg.DssGraphTypeVertical_CategoryPies_Stacked:case Bg.DssGraphTypeVertical_CategoryPies_Percent:return g.GMT_CATEGORY;case Bg.DssGraphTypePies:case Bg.DssGraphTypeRing_Pie:case Bg.DssGraphTypeMultiple_Pies:case Bg.DssGraphTypeMultiple_Ring_Pies:case Bg.DssGraphTypeMultiple_Proportional:case Bg.DssGraphTypeMultiple_Proportional_Ring_Pies:case Bg.DssGraphTypePie_Bar:case Bg.DssGraphTypeRing_Pie_Bar:return g.GMT_PIE;case Bg.DssGraphTypeScatter_Pies:case Bg.DssGraphTypeX_Y_Scatter:case Bg.DssGraphTypeDualAxis_X_Y_Scatter:case Bg.DssGraphTypeX_Y_Scatter_with_Labels:case Bg.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return g.GMT_SCATTER;case Bg.DssGraphTypeBubble_Pies:case Bg.DssGraphTypeBubble:case Bg.DssGraphTypeBubble_DualAxis:case Bg.DssGraphTypeBubble_With_Labels:case Bg.DssGraphTypeBubble_DualAxis_With_Labels:return g.GMT_BUBBLE;case Bg.DssGraphTypeVertical_Bar_Absolute:case Bg.DssGraphTypeHorizontal_Bar_Absolute:return g.GMT_CATEGORY;case Bg.DssGraphTypeGrid_Pies:case Bg.DssGraphTypeGridChart:return g.GMT_GRID;case Bg.DssGraphTypeMaxDeskTopGraphTypes:return g.GMT_INVALID;default:return g.GMT_INVALID;}},isLegendByGroup:function CT(){return false;},isVerticalBar:function Bm(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Bar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_Stacked:case Bg.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Bar_Percent:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeVertical_Bullet:return true;default:return false;}},MoveTo:function BA(CV,CY,CW,CX){this.mCanvas.MoveTo(CV,CY,CW,CX);},BezierCurveTo:function Bp(CX,CW,Ca,CY,CV,CZ){this.mCanvas.BezierCurveTo(CX,CW,Ca,CY,CV,CZ);},LineTo:function AC(CV,CY,CW,CX){this.mCanvas.LineTo(CV,CY,CW,CX);},hMoveTo:function o(CV,Ca,CW,CX,CZ){var CY;CY=(CW&&this.NeedAdjustedLinePath())?0.5:0;this.MoveTo(CV+CY,Ca+CY,CX,CZ);},hLineTo:function CK(CV,Ca,CW,CX,CZ){var CY;CY=(CW&&this.NeedAdjustedLinePath())?0.5:0;this.LineTo(CV+CY,Ca+CY,CX,CZ);},SetRGBAFill:function Bd(CW,CX,CV,CY){this.mCanvas.SetRGBAFillColor(CW,CX,CV,CY);},SetRGBAStroke:function CO(CW,CX,CV,CY){this.mCanvas.SetRGBAStrokeColor(CW,CX,CV,CY);},FillPath:function AS(){this.mCanvas.FillPath();},StrokePath:function j(){this.mCanvas.StrokePath();},SetLineDash:function AO(CV,CW){this.mCanvas.SetLineDash(CV,CW);},SetLineWidth:function B5(CV){this.mCanvas.SetLineWidth(CV);},SetFormatManager:function f(CW){var CV;this.mFormatManager=CW;CV=this.mFormatManager.GetFormat(Bi.DssGraphType);this.mGraphType=CV+1;this.mFormatManager.SetGraphType(this.mGraphType);this.mIsFontAntiAlias=true;},SetFontSize:function B3(CV){this.mCanvas.SetFontSize(CV);},PtSizeToPixelSize:function r(CV){return Math.floor(CV*BQ/T+0.5);},IsReverseSeriesOrder:function A2(CY,CW,CV){var CX;if(CY===null){return false;}CX=CY.IsReverseOrder();if((CW&&CV>=180&&CV<360)||(!CW&&CV>=90&&CV<270)){CX=!CX;}return CX;},IsReverseGroupOrder:function BE(CW,CV){return((CW&&CV>=90&&CV<270)||(!CW&&CV>=0&&CV<180));},GetPointByAngleRadiusCenter:function Bh(CV,CX,CW){return new CG.Point2D({x:Math.floor(CW.x+CX*Math.cos(CV)+0.5),y:Math.floor(CW.y-CX*Math.sin(CV)+0.5)});},RectangleIntersection:function E(Cb,Ca,CZ){var CY,CW,CV,CX;if((Cb.x>(Ca.x+Ca.width))||(Ca.x>(Cb.x+Cb.width))||(Cb.y>(Ca.y+Ca.height))||(Ca.y>(Cb.y+Cb.height))){return false;}CY=Math.max(Cb.x,Ca.x);CW=Math.max(Cb.y,Ca.y);CV=Math.min(Cb.x+Cb.width,Ca.x+Ca.width)-CY;CX=Math.min(Cb.y+Cb.height,Ca.y+Ca.height)-CW;CZ.Reset(CY,CW,CV,CX);return true;},RectangleUnion:function Ap(Cb,Ca,CZ){var CY,CW,CV,CX;CY=Math.min(Cb.x,Ca.x);CW=Math.min(Cb.y,Ca.y);CV=Math.max(Cb.x+Cb.width,Ca.x+Ca.width)-CY;CX=Math.max(Cb.y+Cb.height,Ca.y+Ca.height)-CW;CZ.Reset(CY,CW,CV,CX);},getUniformAxisLabelRotateMode:function(CX){var CW=CX,CV=this.getUniformAxisContext();switch(CX){case"x":case"X":CW="X1";break;case"y":case"Y":CW="Y1";break;default:break;}return CV.mLabelRotation[CW];},getUniformAxisContext:function p(){if(this.mUniformAxisContext===null){this.mUniformAxisContext={mDataAreaLeftMargin:0,mDataAreaRightMargin:0,mDataAreaTopMargin:0,mDataAreaBottomMargin:0,mGraphHeight:400,mIsAxisTitleAndLabelRequired:true,mLabelRotation:{X1:-1,Y1:-1,X2:-1,Y2:-1},xDataLabelPadding:0,yDataLabelPadding:0,ValueAxis:{X1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},X2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Z:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false}},CategoryAxis:{X:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]},Y:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]}}};}return this.mUniformAxisContext;},isUADataAreaOutput:function Bt(){if(this.mIsUniformAxisMode){var CV=this.getUniformAxisContext();if(!CV.mIsAxisTitleAndLabelRequired){return true;}}return false;},IsBackgroundBright:function AK(){var Ci,Cf,Cj,Cg,CW,Ca,Cd,CV,CY,Ch,CX,Cb,CZ,Ce,Cc;CZ=new CG.TripleId({ObjectId:Bi.DssGraphFrame,SeriesId:AZ,GroupId:M});Ce=this.hGetColorById(CZ);Ci=Ce.Alpha;Cg=Ce.R;CW=Ce.G;Ca=Ce.B;CZ.reset(Bi.DssGraphBackground,AZ,M);Ce=this.hGetColorById(CZ);Cf=Ce.Alpha;Cd=Ce.R;CV=Ce.G;CY=Ce.B;Cj=1-(1-Ci)*(1-Cf);if(Cj>0.5){Ch=Cd*Cf*(1-Ci)+Cg*Ci;CX=CV*Cf*(1-Ci)+CW*Ci;Cb=CY*Cf*(1-Ci)+Ca*Ci;}Cc=(Ch*299+CX*587+Cb*114)/1000;return Cc>150;},hGetColorById:function CL(CZ){var Cd,Cc,CW=1,CV=255,CX=255,Ca=255,Cb;Cb=this.GetProperty(Bi.DssGraphAreaAlpha,CZ);if(Cb){CW=Cb/255;}Cb=this.GetProperty(Bi.DssGraphFillEffect,CZ);if(Cb){switch(Cb){case B1.DssGraphFillSimple:Cb=this.GetProperty(Bi.DssGraphAreaColor,CZ);if(Cb){var CY=k.GetColorParser();CY.ResetFromColorValue(Cb,true);CV=CY.mR;CX=CY.mG;Ca=CY.mB;}break;case B1.DssGraphFillAdvancedWash:Cb=this.GetProperty(Bi.DssGraphGradient,CZ);if(Cb){Cd=Cb.StartColor;Cc=Cb.EndColor;CV=(Cd.mR+Cc.mR)/2;CX=(Cd.mG+Cc.mG)/2;Ca=(Cd.mB+Cc.mB)/2;}break;default:break;}}return{R:CV,G:CX,B:Ca,Alpha:CW};},FillSimple:function BI(CX,CY,CW,CV){this.mCanvas.FillSimple(CX,CY,CW,CV);},FillPattern:function q(CV){this.mCanvas.FillPattern(CV);},FillGradient:function A0(CW,CV,CX){this.mCanvas.FillGradient(CW,CV,CX);},FillEdgeType:function BO(CW,CV){this.mCanvas.FillEdgeType(CW,CV);},FillDonutOrSphere:function AP(CX,CV,CW){this.mCanvas.FillDonutOrSphere(CX,CV,CW);},FillBorderMetallic:function b(CX,CV,CZ,CY,Ca,CW){this.mCanvas.FillBorderMetallic(CX,CV,CZ,CY,Ca,CW);},FillRadientGradient:function An(CW,Cc,Ca,CZ,Cd,CV,CX,Cb,CY){this.mCanvas.FillRadientGradient(CW,Cc,Ca,CZ,Cd,CV,CX,Cb,CY);},MakeDarker:function U(CW,CV){this.mCanvas.MakeDarker(CW,CV);},RestoreColor:function AM(CV){this.mCanvas.RestoreColor(CV);},ApplyLineFormat:function Br(CV){this.mCanvas.ApplyLineFormat(CV);},AddFormatedText:function Bb(CW,CY,CV,CX){this.mCanvas.AddFormatedText(CW,CY,CV,CX);},BeginFirstFrame:function Aa(){this.mCanvas.BeginFirstFrame();},BeginLastFrame:function Bv(){this.mCanvas.BeginLastFrame();},EndFrame:function A9(){this.mCanvas.EndFrame();},EndUnit:function c(){this.mCanvas.EndUnit();},SetLineJoin:function AI(CV){this.mLineJoinType=CV;this.mCanvas.SetLineJoin(this.mLineJoinType);},GetLineJoin:function AU(){return this.mLineJoinType;},UpdateFormatLine:function Ak(CZ,CX,CW){CW=CW||false;if(this.mIsGraphMatrix){return ;}var CY;Am.tripleId.reset(AQ,CZ.mObjectId,CZ.mSeriesId,CZ.mGroupId);if(this.mIsGraphMatrix&&AQ.mObjectId===Bi.DssGraphX1Major){AQ.mObjectId=Bi.DssGraphY1Major;}if(CX.mLineColor===null||!CW){CY=this.GetProperty(Bi.DssGraphLineColor,AQ);if(CY){var CV=k.GetColorParser();CV.ResetFromColorValue(CY,true);CX.mLineColor=CV.ToInteger();}}if(CX.mLineStyle===null||!CW){CY=this.GetProperty(Bi.DssGraphLinePattern,AQ);if(CY){CX.mLineStyle=CY;}}if(CX.mAlpha===null||!CW){CY=this.GetProperty(Bi.DssGraphLineAlpha,AQ);if(CY){CX.mAlpha=CY;}}if(CX.mLineThicknessPt===null||!CW){CY=this.GetProperty(Bi.DssGraphLineWidth,AQ);if(CY){CX.mLineThicknessPt=CY;}}},UpdateFormatFill:function AH(Cc,CX,Ca,CZ){CZ=CZ||false;if(this.mIsGraphMatrix){return ;}var Cb;Am.tripleId.reset(AQ,Cc.mObjectId,Cc.mSeriesId,Cc.mGroupId);AQ.mObjectId=this.MapObject(Cc.mObjectId);if(CX.mAlpha===null||!CZ){Cb=this.GetProperty(Bi.DssGraphAreaAlpha,AQ);if(Cb!==null&&Cb!==undefined){CX.mAlpha=Cb;}}var CW;if(CX.mFillType===null||!CZ){Cb=this.GetProperty(Bi.DssGraphFillEffect,AQ);if(Cb!==null&&Cb!==undefined){CX.mFillType=Cb;}var CY=CX.mFillType;switch(CY){case B1.DssGraphFillSimple:Cb=this.GetProperty(Bi.DssGraphAreaColor,AQ);if(Cb!==null&&Cb!==undefined){if(CX.mSimpleColor===null||!CZ){CW=k.GetColorParser();CW.ResetFromColorValue(Cb,true);CX.mSimpleColor=CW.ToInteger();}}break;case B1.DssGraphFillAdvancedWash:var CV=CX.mFillGradient;Cb=this.GetProperty(Bi.DssGraphGradient,AQ);if(Cb!==null&&Cb!==undefined){if(CV===null||!CZ){if(CV===null){CX.mFillGradient={};}CV=CX.mFillGradient;Ag.copyProps(["gradientType","angle","horizontalOffset","verticalOffset"],Cb,CV);CW=k.GetColorParser();CW.ResetFromColorValue(Cb.StartColor,true);CV.startGraphColor=CW.ToInteger();CW.ResetFromColorValue(Cb.EndColor,true);CV.endGraphColor=CW.ToInteger();}}Cb=this.GetProperty(Bi.DssGraphGradientEndAlpha,AQ);if(Cb!==null&&Cb!==undefined){if(CV.endAlpha===null||!CZ){CV.endAlpha=Cb;}}else{CV.endAlpha=CX.mAlpha;}break;case B1.DssGraphFillPattern:break;default:break;}}},UpdateFormatFont:function K(CY,CW){var CX;if(this.mIsGraphMatrix){return ;}CX=this.GetProperty(Bi.DssGraphFontColor,CY);if(CX){var CV=k.GetColorParser();CV.ResetFromColorValue(CX,true);CW.mFontColor=CV.ToInteger();}CX=this.GetProperty(Bi.DssGraphFontName,CY);if(CX){CW.mFontName=CX;}CX=this.GetProperty(Bi.DssGraphFontSize100,CY);if(CX){CW.mFontSize=Math.floor(CX/100+0.5);}CX=this.GetProperty(Bi.DssGraphFontStyle,CY);if(CX){CW.mFontStyle=CX;}CX=this.GetProperty(Bi.DssGraphFontAlpha,CY);if(CX){CW.mFontAlpha=CX;}CX=this.GetProperty(Bi.DssGraphFontAlign,CY);if(CX){CW.mFontAlignment=CX;}CX=this.GetProperty(Bi.DssGraphFontRotation,CY);if(CX){CW.mFontRotation=CX;}CX=this.GetProperty(Bi.DssGraphFontBox,CY);if(CX){CW.mFontBox=CX;}},ParseValueToFormat:function w(Cb,CX){var CV=[],CY,Ca,CW,CZ=10;Ca=0;for(CY=0;CY<6;++CY){CW=Cb.indexOf(",",Ca);CV[CY]=Cb.substring(Ca,CW);Ca=CW+1;}CV[CY]=Cb.substring(Ca);if(CV[0].length){CX.mFormatType=parseInt(CV[0],CZ);}if(CV[1].length){CX.mDigits=parseInt(CV[1],CZ);}if(CV[2].length){CX.mGrouping=parseInt(CV[2],CZ);}if(CV[3].length){CX.mPosCurr=parseInt(CV[3],CZ);}if(CV[4].length){CX.mNegFormat=parseInt(CV[4],CZ);}if(CV[5].length){CX.mCurrency=CV[5];}if(CV[6].length){CX.mCustomFormat=CV[6];}},DrawSector:function Ae(CV,CY,CW,CX){this.NewPath();this.mCanvas.AddArc(CV.x,CV.y,CY,CW,CX,false);this.LineTo(CV.x,CV.y);this.ClosePath();},DrawRingSector:function Bz(CX,CW,CV,CY,CZ){this.NewPath();this.mCanvas.AddArc(CX.x,CX.y,CW,CY,CZ,false);this.LineTo(CX.x+CV*Math.cos(CZ),CX.y+CV*Math.sin(CZ));this.mCanvas.AddArc(CX.x,CX.y,CV,CZ,CY,true);this.ClosePath();},DrawCylinder:function AF(CW,CZ,CX,CY,CV){console.alert("to be impl");},ApplyBeveledFrameToRectangle:function F(CW,Ca,CV,CX,CZ,CY,Cb){this.mCanvas.ApplyBeveledFrameToRectangle(CW,Ca,CV,CX,CZ,CY,Cb);},drawArc:function B(CV,CZ,CX,CY,CW){if(CW===undefined){CW=true;}if(CW){this.NewPath();}this.mCanvas.AddArc(CV.x,CV.y,CZ,CX,CY,false);},GetGraphMatrixContext:function BY(){if(this.mpGraphMatrixContext===null){this.mpGraphMatrixContext=new CG.GraphMatrixContext({GraphType:this.mGraphType});if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}this.mpGraphMatrixContext.parentContext=this;}return this.mpGraphMatrixContext;},HideAxisElements:function BP(CV){this.mShouldHideAxisElements=CV;},IsHidingAxisElements:function B8(){return this.mShouldHideAxisElements;},IsPercentChart:function I(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Bar_Percent:case Bg.DssGraphTypeHorizontal_Bar_Percent:case Bg.DssGraphTypeVertical_Area_Percent:case Bg.DssGraphTypeHorizontal_Area_Percent:case Bg.DssGraphTypeVertical_Line_Percent:case Bg.DssGraphTypeHorizontal_Line_Percent:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeVertical_Line_DualAxis_Percent:case Bg.DssGraphTypeVertical_Area_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;}return false;},IsGridChart:function BV(){return this.mGraphType===Bg.DssGraphTypeGridChart;},IsScatterChart:function Q(){switch(this.mGraphType){case Bg.DssGraphTypeX_Y_Scatter:case Bg.DssGraphTypeDualAxis_X_Y_Scatter:case Bg.DssGraphTypeX_Y_Scatter_with_Labels:case Bg.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return true;}return false;},IsBubbleChart:function z(){switch(this.mGraphType){case Bg.DssGraphTypeBubble:case Bg.DssGraphTypeBubble_DualAxis:case Bg.DssGraphTypeBubble_With_Labels:case Bg.DssGraphTypeBubble_DualAxis_With_Labels:return true;}return false;},IsBulletChart:function A4(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Bullet:case Bg.DssGraphTypeHorizontal_Bullet:return true;}return false;},IsBarChart:function As(CV){CV=(CV===undefined)?H._general:CV;CV=(CV>=H._ring)?H._general:CV;switch(this.mGraphType){case Bg.DssGraphTypeVertical_Bar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:return(CV===H._general||CV===H._cluster);case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:return(CV===H._general||CV===H._stacked);case Bg.DssGraphTypeVertical_Bar_Percent:case Bg.DssGraphTypeHorizontal_Bar_Percent:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Percent:return(CV===H._general||CV===H._percent);case Bg.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Bar_Absolute:case Bg.DssGraphTypeHorizontal_Bar_Absolute:case Bg.DssGraphTypeVertical_Bullet:case Bg.DssGraphTypeHorizontal_Bullet:return(CV===H._general||CV===H._absolute);}return false;},IsAdvancedBarChart:function BD(CV){CV=(CV===undefined)?H._general:CV;switch(this.mGraphType){case Bg.DssGraphTypeVertical_Bullet:case Bg.DssGraphTypeHorizontal_Bullet:return CV===H._general||CV===H._bullet;default:return false;}},IsLineChart:function Be(CV){CV=(CV===undefined)?H._general:CV;CV=(CV>=H._ring)?H._general:CV;if(CV===H._cluster){return false;}switch(this.mGraphType){case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Line_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Line_Stacked:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Stacked:return(CV===H._general||CV===H._stacked);case Bg.DssGraphTypeVertical_Line_Percent:case Bg.DssGraphTypeHorizontal_Line_Percent:case Bg.DssGraphTypeVertical_Line_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Percent:return(CV===H._general||CV===H._percent);case Bg.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Line_Absolute:case Bg.DssGraphTypeHorizontal_Line_Absolute:return(CV===H._general||CV===H._absolute);}return false;},IsAreaChart:function CP(CV){CV=(CV===undefined)?H._general:CV;CV=(CV>=H._ring)?H._general:CV;if(CV===H._cluster){return false;}switch(this.mGraphType){case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Area_Stacked:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Area_Stacked:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Stacked:return(CV===H._general||CV===H._stacked);case Bg.DssGraphTypeVertical_Area_Percent:case Bg.DssGraphTypeHorizontal_Area_Percent:case Bg.DssGraphTypeVertical_Area_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Percent:return(CV===H._general||CV===H._percent);case Bg.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Area_Absolute:case Bg.DssGraphTypeHorizontal_Area_Absolute:return(CV===H._general||CV===H._absolute);}return false;},GetGraphMatrixGraphMajorType:function CS(){var CV=this.mpGraphMatrixContext.mMarkerShape,CW=201,CY=202;if(CV===CW||CV===CY){return a._PIE;}if(this.IsBarChart()){return a._BAR;}if(this.IsLineChart()){return a._LINE;}if(this.IsAreaChart()){return a._AREA;}var CX=this.GetGraphType();switch(CX){case Bg.DssGraphTypeGridChart:return a._GRID;case Bg.DssGraphTypeX_Y_Scatter:case Bg.DssGraphTypeDualAxis_X_Y_Scatter:case Bg.DssGraphTypeX_Y_Scatter_with_Labels:case Bg.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return a._SCATTER;case Bg.DssGraphTypeBubble:case Bg.DssGraphTypeBubble_DualAxis:case Bg.DssGraphTypeBubble_With_Labels:case Bg.DssGraphTypeBubble_DualAxis_With_Labels:return a._BUBBLE;case Bg.DssGraphTypeVertical_Area_Absolute:case Bg.DssGraphTypeVertical_Area_Stacked:case Bg.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Area_Percent:case Bg.DssGraphTypeHorizontal_Area_Absolute:case Bg.DssGraphTypeHorizontal_Area_Stacked:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Area_Percent:return a._AREA;case Bg.DssGraphTypeVertical_Line_Absolute:case Bg.DssGraphTypeVertical_Line_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Line_Percent:case Bg.DssGraphTypeHorizontal_Line_Absolute:case Bg.DssGraphTypeHorizontal_Line_Stacked:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Line_Percent:return a._LINE;}return a._UNDEFINED;},GetThresholdFillColor:function h(CX,CY){var CV=true;if(CV){if(CX===this.mThresholdColorCache.mSeriesId&&CY===this.mThresholdColorCache.mGroupId){if(this.mThresholdColorCache.mUseThreshold){return this.mThresholdColorCache.mThresholdColor;}}else{var CW=this.mDatasetPtr.GetThresholdFillColor(CX,CY,0);this.mThresholdColorCache.mSeriesId=CX;this.mThresholdColorCache.mGroupId=CY;this.mThresholdColorCache.mUseThreshold=CW!==null;if(this.mThresholdColorCache.mUseThreshold){this.mThresholdColorCache.mThresholdColor=CW;return CW;}}}return null;},GetColorFromPalette:function B2(CV){var CW,CX;if(this.mIsGraphMatrix){if(this.mThemeType===BC._white){CW=CG.gLightColorPalette;}else{CW=CG.gDarkColorPalette;}}else{CW=CG.gColorPalette;}CV%=CW.length;CX=CW[CV];return CX.ToInteger();},getInt:function B0(CV){if(CV>=0){return Math.floor(CV);}return Math.ceil(CV);},transformRectToTicker:function B7(CW,CX){var CV=[],CZ,CY;if(CX){CZ={x:Math.round(CW.x),y:Math.round(CW.y+0.5*CW.height)};CY={x:Math.round(CW.x+CW.width),y:Math.round(CW.y+0.5*CW.height)};}else{CZ={x:Math.round(CW.x+0.5*CW.width),y:Math.round(CW.y)};CY={x:Math.round(CW.x+0.5*CW.width),y:Math.round(CW.y+CW.height)};}CV.push(CZ);CV.push(CY);return CV;},transformToRect:function BS(CV,Ci,CW,CX){var Ca=100,Cg=4,Ch=[4,-100,-100,100,-100,100,100,-100,100],CY,Cd,Cc;v=[];if(CW){for(CY=0;CY<Cg;++CY){Cd=Ch[2*CY+1]*Ci/Ca+CV.x;Cc=Ch[2*CY+2]*Ci/Ca+CV.y;v.push({x:Cd,y:Cc});}}else{for(CY=0;CY<Cg;++CY){Cd=Ch[2*CY+1]*Ci/Ca+CV.x;Cc=Ch[2*CY+2]*Ci/Ca+CV.y;var Cf={x:Cd,y:Cc};Cf=this.vdPoint(Cf);v.push(Cf);}}var Ce=Math.abs(v[3].x-v[2].x),CZ=Math.abs(v[3].y-v[0].y);if(CX){CX.Reset(v[0].x,v[0].y,Ce,CZ);return CX;}else{var Cb=new CG.Rect2D();Cb.x=v[0].x;Cb.y=v[0].y;Cb.width=Math.abs(v[3].x-v[2].x);Cb.height=Math.abs(v[3].y-v[0].y);return Cb;}},resetCanvas:function BH(){this.mCanvas.reset();},applyFontFormat:function Ah(CV){if(this.mImageFormat===d.SVG){this.mCanvas.ApplyFontFormat(CV);}},setDrawingOrderToCanvas:function Bq(CV){if(this.mImageFormat===d.SVG){this.mCanvas.setDrawOrder(CV);}},getDefaultThemeColor:function CU(){switch(this.mThemeType){case BC._black:return 0;case BC._white:return 16777215;default:return 16777215;}},getDefaultContrastColor:function B9(CV){CV=CV||-1;var CX=0,CW=1;switch(CV){case CX:return(this.mThemeType===BC._black?5855577:10066329);case CW:return(this.mThemeType===BC._black?16777215:3355443);default:return(this.mThemeType===BC._black?16777215:0);}},mapGraphTypeToDualAxis:function Au(CW){var CV=mstrmojo.chart.model.enums.EnumDSSGraphType;switch(CW){case CV.DssGraphTypeVertical_Bar_Side_by_Side:return CV.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side;case CV.DssGraphTypeHorizontal_Bar_Side_by_Side:return CV.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side;case CV.DssGraphTypeVertical_Bar_Stacked:return CV.DssGraphTypeVertical_Bar_DualAxis_Stacked;case CV.DssGraphTypeHorizontal_Bar_Stacked:return CV.DssGraphTypeHorizontal_Bar_DualAxis_Stacked;case CV.DssGraphTypeVertical_Bar_Percent:return CV.DssGraphTypeVertical_Bar_DualAxis_Percent;case CV.DssGraphTypeHorizontal_Bar_Percent:return CV.DssGraphTypeHorizontal_Bar_DualAxis_Percent;case CV.DssGraphTypeVertical_Bar_Absolute:return CV.DssGraphTypeVertical_Bar_DualAxis_Absolute;case CV.DssGraphTypeHorizontal_Bar_Absolute:return CV.DssGraphTypeHorizontal_Bar_DualAxis_Absolute;case CV.DssGraphTypeVertical_Line_Stacked:return CV.DssGraphTypeVertical_Line_DualAxis_Stacked;case CV.DssGraphTypeHorizontal_Line_Stacked:return CV.DssGraphTypeHorizontal_Line_DualAxis_Stacked;case CV.DssGraphTypeVertical_Line_Percent:return CV.DssGraphTypeVertical_Line_DualAxis_Percent;case CV.DssGraphTypeHorizontal_Line_Percent:return CV.DssGraphTypeHorizontal_Line_DualAxis_Percent;case CV.DssGraphTypeVertical_Line_Absolute:return CV.DssGraphTypeVertical_Line_DualAxis_Absolute;case CV.DssGraphTypeHorizontal_Line_Absolute:return CV.DssGraphTypeHorizontal_Line_DualAxis_Absolute;case CV.DssGraphTypeVertical_Area_Stacked:return CV.DssGraphTypeVertical_Area_DualAxis_Stacked;case CV.DssGraphTypeHorizontal_Area_Stacked:return CV.DssGraphTypeHorizontal_Area_DualAxis_Stacked;case CV.DssGraphTypeVertical_Area_Percent:return CV.DssGraphTypeVertical_Area_DualAxis_Percent;case CV.DssGraphTypeHorizontal_Area_Percent:return CV.DssGraphTypeHorizontal_Area_DualAxis_Percent;case CV.DssGraphTypeVertical_Area_Absolute:return CV.DssGraphTypeVertical_Area_DualAxis_Absolute;case CV.DssGraphTypeHorizontal_Area_Absolute:return CV.DssGraphTypeHorizontal_Area_DualAxis_Absolute;default:return CW;}},getAxisTripleId:function AN(CV){return CG.gAxisTripleIds[CV];},RenderClusterShapes:function BB(){var CY=this,CW=CY.mUniformAxisContext.CategoryAxis,CX=CW.X,CV=CW.Y;if(CY.isCombinationChart()||CY.IsDualAxis()){return(CX.EnforceCluster&&CX.EnforceFringe)||(CV.EnforceCluster&&CV.EnforceFringe);}return false;},checkColorByAndSizeByValue:function BK(Ca,CW,CZ,CV){CW=CW||this.mDataset;CZ=CZ||false;CV=CV||false;if(!this.mIsGraphMatrix){return true;}var CY=Ca.angleByIndex!==undefined,CX;if(CZ){if(CY===false){CX=CW.GetColorByData(Ca.mSeriesId,Ca.mGroupId);}else{CX=CW.GetPieSliceColorByData(Ca.mSeriesId,Ca.mGroupId,Ca.angleByIndex,Ca.sliceById);}if(Am.isValidNumber(CX)===false){return false;}}if(CV){CX=CW.GetSizeByData(Ca.mSeriesId,Ca.mGroupId);if(Am.isValidNumber(CX)===false){return false;}}return true;},getValueAxisKeyFromLayout:function AD(CV,CW){if(CW){return CV?"X1":"Y1";}else{return CV?"X2":"Y2";}},getAxisKeyFromObjectId:function AG(CV,CY,CW){CW=CW||false;CY=CY||false;var CX;switch(CV){case Bj.DssGraphX1Body:case Bj.DssGraphX1Label:case Bj.DssGraphX1Major:case Bj.DssGraphX1Minor:case Bj.DssGraphXTitle:case Bj.DssGraphUserLabel3:case Bj.DssGraphUserLine3:CX="X1";break;case Bj.DssGraphX2Body:case Bj.DssGraphX2Label:case Bj.DssGraphX2Major:case Bj.DssGraphX2Minor:case Bj.DssGraphX2Title:case Bj.DssGraphUserLabel4:case Bj.DssGraphUserLine4:CX="X2";break;case Bj.DssGraphY1Body:case Bj.DssGraphY1Label:case Bj.DssGraphY1Major:case Bj.DssGraphY1Minor:case Bj.DssGraphY1Title:case Bj.DssGraphUserLabel1:case Bj.DssGraphUserLine1:CX="Y1";break;case Bj.DssGraphY2Body:case Bj.DssGraphY2Label:case Bj.DssGraphY2Major:case Bj.DssGraphY2Minor:case Bj.DssGraphY2Title:case Bj.DssGraphUserLabel2:case Bj.DssGraphUserLine2:CX="Y2";break;case Bj.DssGraphZBody:CX="Z";break;case Bj.DssGraphO1Body:case Bj.DssGraph2DO1Label:case Bj.DssGraphO1Major:case Bj.DssGraphO1Minor:case Bj.DssGraphO1Title:if(CY){CX=this.caKeyMap.c1||this.IsVertical()?"X1":"Y1";}else{CX="O1";}break;case Bj.DssGraphO2Body:case Bj.DssGraph2DO2Label:case Bj.DssGraphO2Major:case Bj.DssGraphO2Minor:case Bj.DssGraphO2Title:if(CY){CX=this.caKeyMap.c1||this.IsVertical()?"X2":"Y2";}else{CX="O2";}break;default:CX="";break;}if(CW){CX=CX.toLowerCase();}return CX;},getUniformAxisInformationFromKey:function CQ(CY,CX){CX=CX||false;var CW=this.getUniformAxisContext(),CV=CW.ValueAxis;switch(CY){case"X1":case"X2":case"Y1":case"Y2":case"Z":return CV[CY];case"O1":case"O2":CV=CW.CategoryAxis;return CX?CV.Y:CV.X;default:return CV.Y1;}},getUniformAxisInformation:function R(CY,CX){var CW=this.getUniformAxisContext(),Ca=CW.ValueAxis,CV=CW.CategoryAxis,CZ;switch(CY){case Bj.DssGraphO1Body:case Bj.DssGraphO2Body:CX=CX||false;return CX?CV.Y:CV.X;case Bj.DssGraphX1Body:CZ=Ca.X1;break;case Bj.DssGraphY1Body:CZ=Ca.Y1;break;case Bj.DssGraphX2Body:CZ=Ca.X2;break;case Bj.DssGraphY2Body:CZ=Ca.Y2;break;case Bj.DssGraphZBody:CZ=Ca.Z;break;}return CZ;},mirrorPrimaryInBubbleScatter:function A(Cb){var Cc=this,CX=Cc.GetGraphMatrixContext(),CV=CX.AxisLayout;if(Cc.mIsGraphMatrix===false){return false;}if(CV===null||CV===undefined){return false;}var CY=1,Ca=2,CZ=4,CW=8;if(Cb){return !!(CV&CW);}return !!(CV&CZ);},isCompactMode:function Ai(){return this.mDataset.dataProvider.isCompactMode();}});BX.sDefaultMargin=10;BX.sDefaultMarginForTimeSeries=3;BX.sDefaultUniformAxisMargin=0;}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","ChartContext","ImageMap");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumCollectionType");var W=mstrmojo.chart,O=mstrmojo.chart.model,U=W.enums,d=O.enums,b=U.EnumCollectionType,Q=U.EnumObjectShape,F=Q.OS_RECTANGLE,f=d.EnumDSSGraphObject,S=W.gNullTripleId,c=W.gNullObjectId,M=2147483647;mstrmojo.chart.GraphObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObject",mpParentObject:null,mFormatLinePtr:null,mTripleId:S,mChartContextPtr:null,mpManager:null,mIsDetectable:true,mIsAnimationEnabled:false,mIsVirtual:false,mShapeType:0,init:function V(h){this._super(h);this.mpParentObject=h.GraphCollectionObject||null;this.mTripleId=h.TripleId||S;this.mpManager=h.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(h.Shape){this.mShapeType=h.Shape;}if(h.hasLine&&this.mTripleId.mObjectId!==c){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,b.CT_NO_COLLECTION,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;},SetAnimationEnable:function H(h){this.mIsAnimationEnabled=h;this.SetProgress(0.1);},IsLayerObject:function J(){return false;},SetFormatLine:function X(h){this.mFormatLinePtr=h;},SetLineWidth:function e(){var h;h=this.mFormatLinePtr.mLineThickness;h=(h<1)?1:h;this.hSetLineWidth(h);},ApplyLineFormat:function E(){this.mFormatLinePtr.ApplyLineFormat(this.mChartContextPtr);},SetOutlineWidth:function R(){this.hSetLineWidth(W.gOutlineWhite.mLineThickness);},SetOutlineWidthEx:function P(h){if(h>0){this.hSetLineWidth(h);}},ApplyOutlineFormat:function g(){var h=this.mChartContextPtr;if(h.IsBackgroundBright()){W.gStrokeForLightBackground.ApplyLineFormat(h);}else{W.gStrokeForDarkBackground.ApplyLineFormat(h);}},MakePolygonClockwise:function I(o){var k=o.length,q=0,n,j,p,l,h;if(k<3){return ;}for(n=1;n<k;++n){if(o[n].x<o[q].x||(o[n].x<=o[q].x&&o[n].y<o[q].y)){q=n;}}j=(q+k-1)%k;p=new W.Vector2D({x:o[j].x-o[q].x,y:o[j].y-o[q].y});j=(q+1)%k;l=new W.Vector2D({x:o[j].x-o[q].x,y:o[j].y-o[q].y});if(l.CrossProduct(p)<-W.gModuleMain.mTolerance){for(n=0;n<Math.floor(k/2);++n){h=o[n];o[n]=o[k-n-1];o[k-n-1]=h;}}},DrawOutLine:function T(){this.SetOutlineWidth();this.mChartContextPtr.DrawPolygon(this.GetClockwisePolygon());this.ApplyOutlineFormat();},PointInObject:function A(h){if(!this.mIsDetectable){return false;}return h.IsInPolygon(this.GetClockwisePolygon());},hSetLineWidth:function G(h){this.mChartContextPtr.SetLineWidth(h);this.mChartContextPtr.mIsLineWidthOdd=((h&1)===1);},GetChartAreaId:function Y(){var h=this.mpManager.mTripleId;switch(h.mObjectId){case f.DssGraphY1Body:case f.DssGraphY2Body:case f.DssGraphX2Body:case f.DssGraphO1Body:return this.mTripleId.mSeriesId;default:return this.mpManager.GetChartAreaId();}},GetBoundingRect:function L(){var h=new W.Rect2D();return h;},SetProgress:function C(h){},DistanceToPoint:function Z(h){if(!this.mIsDetectable){return M;}var j=this.GetClockwisePolygon();if(j.length<3){return M;}return h.DistanceToPolygon(j);},GetAngularBisectorIntersectionPoint:function D(v,t,s,l,n){var o={x:v.x-t.x,y:v.y-t.y};var k={x:s.x-t.x,y:s.y-t.y};var j=Math.sqrt(o.x*o.x+o.y*o.y);var h=Math.sqrt(k.x*k.x+k.y*k.y);var r={x:o.x/j,y:o.y/j};var q={x:k.x/h,y:k.y/h};var u=0;if(Math.abs(r.x-q.x)<0.01){u=l*(q.x+r.x)/(r.y-q.y);}else{u=l*(q.y+r.y)/(q.x-r.x);}var p={x:0,y:0};p.x=t.x+u*q.x;p.y=t.y+u*q.y;n.x=p.x+l*(-q.y);n.y=p.y+l*q.x;},getFormatFromParent:function a(){this.mFormatLinePtr=this.mpParentObject.mFormatLinePtr;},getBoundingPoints:function K(){var h=this.GetBoundingRect(),j=h.ToPoints(false);return{Shape:0,Points:[j.TopLeft,j.TopRight,j.BottomRight,j.BottomLeft]};},getShapeSize:function N(){return 0;},fallOut:function B(p){var j=0,o=this.mChartContextPtr,n=this.getBoundingPoints(),l=n.Points,k,h;for(k=0;k<l.length;++k){h=l[k];if(h.x<0||h.y<0||h.x>o.mGraphWidth||h.y>o.mGraphHeight){j++;}if(j>0&&!p){return true;}}return(j===l.length);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumFontAlignment","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumVariantBool","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","ChartConstants","ChartContext","FormatFont","Rect2D","FormatLine","FormatFill");var Y=mstrmojo.chart,X=mstrmojo.VisUtility,O=mstrmojo.hash,U=Y.ChartConstants,J=Y.enums,D=J.EnumCollectionType,t=D.CT_LINE,Z=J.EnumGraphMajorType,f=J.EnumDSSExtraGraphObject,N=J.EnumFontAlignment,I=J.EnumLineStyle,E=J.EnumFillType,r=Y.gNullTripleId,a=J.EnumGraphMatrixMajorGraphType,T=Y.model,M=T.enums,k=M.EnumDSSGraphMarkerShape,e=M.EnumDSSGraphType,h=M.EnumDSSGraphProperty,j=M.EnumDSSGraphObject,d=M.EnumDSSExtraGraphProperty,F=M.EnumDSSGraphFontRotation,o=M.EnumDSSGraphGridLineType,L=M.EnumDSSGraphFillEffect,C=M.EnumVariantBool,l=M.EnumShapeType,S=0,B=1,q=7;var g=0,s=1,W=2;function Q(z,AI,y){var AN,AE=this.mDataset,AK,AL=false,AF={valid:false,object:z},x=AI.mObjectId;if(x===j.DssGraphTrendLine||x===j.DssGraphReferenceLine){var AJ=x===j.DssGraphTrendLine,AQ,AO;if(AJ){AQ=AE.GetTrendLineOfSeries(AI.mSeriesId);AO=AQ;}else{AQ=AE.GetReferenceLinesOfSeries(AI.mSeriesId);if(AI.mGroupId>=0){AO=AQ[AI.mGroupId];}}if(AO){z.mLineThickness=AO.getLineThickness();z.mLineThicknessPt=75*z.mLineThickness;z.mAlpha=255;z.mLineStyle=AO.getLineRenderType();z.mLineColor=AO.getLineColor();AF.valid=true;}}if(AF.valid){return AF;}AF.valid=true;var AD;switch(AI.mObjectId){case j.DssGraphUserLine1:AD="y1";break;case j.DssGraphUserLine2:AD="x1";break;case j.DssGraphUserLine3:AD="y2";break;case j.DssGraphUserLine4:AD="x2";break;default:AF.valid=false;break;}if(AF.valid){var AM=AE.getAxisOriginFormat(AD);delete AM.show;O.copy(AM,z);return AF;}var AC="all",AA=0,AP=0,AB=AI.mGroupId;AF.valid=true;if(x===j.DssGraphRiser){if(y===l._PIE||y===l._PIESLICE){x=j.DssGraphPieSlice;}}switch(x){case j.DssGraphDataMarker:AC="lineMarker";break;case j.DssGraphRiser:if(y===l._TICKER){AC="lineShape";}else{AC="shapeBorder";}break;case j.DssGraphDataLine:AC="lineShape";AB=0;break;case j.DssGraphTargetLine:break;case j.DssGraphPieSlice:AA=AI.angleByIndex||0;AP=AI.sliceById||0;AC="pieSliceBorder";break;default:AF.valid=false;break;}if(AF.valid){AK=AE.getGenericLineFormat(AI.mSeriesId,AB,AA,AP,AC);z=O.copy(AK,z);AF.object=z;return AF;}var AG,w=this.IsVertical();switch(x){case j.DssGraphY1Major:AN="majorTick";AG="y1";break;case j.DssGraphY1Minor:AN="minorTick";AG="y1";break;case j.DssGraphY2Major:AN="majorTick";AG=w?"y2":"x2";break;case j.DssGraphY2Minor:AN="minorTick";AG=w?"y2":"x2";break;case j.DssGraphX1Major:AN="majorTick";AG="x1";break;case j.DssGraphX1Minor:AN="minorTick";AG="x1";break;case j.DssGraphX2Major:AN="majorTick";AG="x2";break;case j.DssGraphX2Minor:AN="minorTick";AG="x2";break;case j.DssGraphO1Major:AN="majorTick";AG=this.caKeyMap.c1||"x1";break;case j.DssGraphO1Minor:AN="minorTick";AG=this.caKeyMap.c1||"x1";break;case j.DssGraphO2Major:AN="majorTick";AG=this.caKeyMap.c2||"x2";break;case j.DssGraphO2Minor:AN="minorTick";AG=this.caKeyMap.c2||"x2";break;case j.DssGraphY1Body:AN="axisBody";AG="y1";break;case j.DssGraphX2Body:AN="axisBody";AG="x2";break;case j.DssGraphY2Body:AN="axisBody";AG=w?"y2":"x2";break;case j.DssGraphX1Body:AN="axisBody";AG="x1";break;case j.DssGraphO1Body:AN="axisBody";AG=this.caKeyMap.c1||"x1";break;case j.DssGraphO2Body:AN="axisBody";AG=this.caKeyMap.c2||"x2";break;}var AH;if(AL){switch(AN){case"axisBody":AH=this.globalFormats.AxisBodies;break;case"majorTick":AH=this.globalFormats.AxisMajorTicks;break;case"minorTick":AH=this.globalFormats.AxisMinorTicks;break;default:AF.valid=false;break;}AF.valid=!!AH;if(AF.valid&&AH[AG]){AF.object=AH[AG];return AF;}}AF.valid=true;switch(AN){case"axisBody":AK=AE.getAxisLineFormat(AG);break;case"majorTick":case"minorTick":AK=AE.getAxisTickFormat(AG,AN);break;default:AF.valid=false;X.visPrint("failed to get a match for this line format");break;}if(AL){switch(AN){case"axisBody":this.globalFormats.AxisBodies=this.globalFormats.AxisBodies||{};AH=this.globalFormats.AxisBodies;break;case"majorTick":this.globalFormats.AxisMajorTicks=this.globalFormats.AxisMajorTicks||{};AH=this.globalFormats.AxisMajorTicks;break;case"minorTick":this.globalFormats.AxisMinorTicks=this.globalFormats.AxisMinorTicks||{};AH=this.globalFormats.AxisMinorTicks;break;default:AF.valid=false;break;}if(AF.valid){if(AH[AG]===undefined){AH[AG]=O.copy(AK,AH[AG]);z=AH[AG];if(AN==="minorTick"&&z.mAlpha!==undefined&&z.mAlpha!==null){z.mAlpha*=0.6;}}AF.object=AH[AG];return AF;}}else{if(AF.valid){O.copy(AK,z);if(AN==="minorTick"&&z.mAlpha!==undefined&&z.mAlpha!==null){z.mAlpha*=0.6;}AF.object=z;}}return AF;}function v(w,AA,AB){var AE,z=this.mDataset,AD=0,x=0,y,AF={valid:false,object:w},AC=AA.mObjectId;if(AC===j.DssGraphRiser){if(AB===l._PIE||AB===l._PIESLICE){AC=j.DssGraphPieSlice;}}AF.valid=true;switch(AC){case j.DssGraphRiser:y="shape";break;case j.DssGraphDataMarker:y="lineMarker";break;case j.DssGraphPieSlice:y="pieSlice";AD=AA.angleByIndex!==undefined?AA.angleByIndex:0;x=AA.sliceById!==undefined?AA.sliceById:0;break;default:X.visPrint("fail to find a match for this fill format");AF.valid=false;break;}if(AF.valid){if(AA.mSeriesId>=0&&AA.mGroupId>=0){AE=z.getGenericFillFormat(AA.mSeriesId,AA.mGroupId,AD,x,y);AF.object=O.copy(AE,w);}}return AF;}function P(w){switch(w.mObjectId){case j.DssGraphUserLabel1:return j.DssGraphY1Label;case j.DssGraphUserLabel2:return j.DssGraphY2Label;case j.DssGraphUserLabel3:return j.DssGraphX1Label;case j.DssGraphUserLabel4:return j.DssGraphX2Label;default:return w.mObjectId;}}function H(x,AB,AE){var AJ,AM=false,AA=this.mDataset,AG=P.call(this,AB);if(AG===j.DssGraphDataText||AG===j.DssGraphRefLineText||AG===j.DssGraphTrendLineText){var z=0,AD=1,AK=2;AM=true;if(AE<0){switch(AG){case j.DssGraphRefLineText:AE=AD;break;case j.DssGraphTrendLineText:AE=AK;break;default:AE=z;break;}}switch(AE){case z:if(AM){var AC=this.globalFormats;if(AC.DatatextFormat===null||AC.DatatextFormat===undefined){AC.DatatextFormat=new Y.FormatFont({Bare:true});if(AA===null||AA===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:x};}AJ=AA.getDataLabelFontFormat();O.copy(AJ,AC.DatatextFormat);var w=AC.DatatextFormat;if(w&&w.mFontSize&&typeof w.mFontSize!=="number"){w.mFontSize=parseFloat(w.mFontSize);}}x=AC.DatatextFormat;}else{if(AA===null||AA===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:x};}AJ=AA.getDataLabelFontFormat();O.copy(AJ,x);}return{valid:true,object:x};case AD:var y,AF=AA.GetReferenceLinesOfSeries(AB.mSeriesId);if(AB.mGroupId>=0){y=AF[AB.mGroupId];}if(y){var AL=y.getReferenceLineLabelFont();if(AL){x.mFontColor=AL.rfLnFntClr;x.mFontSize=parseInt(AL.rfLnFntSz,10);x.mFontStyle=AL.rfLnFntStyle;x.mFontName=AL.rfLnFntFml;}}break;case AK:break;default:return{valid:false,object:x};}return{valid:false,object:x};}var AI;switch(AG){case j.DssGraphY1Label:AI="y1";break;case j.DssGraphX2Label:AI="x2";break;case j.DssGraphY2Label:AI=this.IsVertical()?"y2":"x2";break;case j.DssGraphX1Label:AI="x1";break;case j.DssGraph2DO1Label:AI=this.caKeyMap.c1||"x1";break;case j.DssGraph2DO2Label:AI=this.caKeyMap.c2||"x2";break;default:return{valid:false,object:x};}AM=false;if(AM){var AH=this.globalFormats.AxisLabelFormats;if(AH===null||AH===undefined){this.globalFormats.AxisLabelFormats={};}AH=this.globalFormats.AxisLabelFormats;if(!!AH[AI]){return AH[AI];}AH[AI]={};O.copy(AJ,AH[AI]);return AH[AI];}else{AJ=AA.getAxisLabelFontFormat(AI);O.copy(AJ,x);}return{valid:true,object:x};}function A(z,AB,w){AB=AB||0;w=w||false;var AA=this.GetGraphMatrixContext(),AF,y=this.mDataset;w=w&&AA.mHasColorBy;if(y&&w){var x;if(z.mObjectId===j.DssGraphPieSlice){var AE=z.angleByIndex||0,AD=z.sliceById||0;x=y.GetPieSliceColorByData(z.mSeriesId,z.mGroupId,AE,AD);}else{x=y.GetColorByData(z.mSeriesId,z.mGroupId,AB);}if(x!==null&&x!==undefined){AF=x;}}if(AF===undefined){if(this.mIsGraphMatrix&&!AA.mHasColorBy){AF=this.GetColorFromPalette(0);}else{if(z.mSeriesId<0&&z.mGroupId<0){AF=0;}else{var AC=z.mSeriesId;if(AC<0){AC=z.mGroupId;}AC=Math.max(0,AC);AF=this.GetColorFromPalette(AC);}}}return AF;}mstrmojo.chart.GenericContext=mstrmojo.declare(mstrmojo.chart.ChartContext,null,{scriptClass:"mstrmojo.chart.GenericContext",init:function p(w){this._super(w);this.mGraphType=e.DssGraphTypeVertical_Bar_Side_by_Side;this.mFormatManager=this.mFormatManager||w.FormatManager||null;this.mIsFontAntiAlias=true;},GetColorValue:function G(y,w,x){return A.call(this,y,w,x);},GetProperty:function c(y,AA){var w,x,z;if(y===h.DssGraphType){return this.mGraphType;}if(!this.mIsTimeSeriesChart){x=this.mFormatManager.GetGraphProperty(y,AA.mObjectId,AA.mSeriesId,AA.mGroupId);if(x!==undefined&&x!==null){return x;}}if(!this.mIsGraphMatrix){x=this._super(y,AA);if(!x){x=this._super(y,new Y.TripleId({ObjectId:AA.mObjectId}));if(!x){x=this._super(y,new Y.TripleId({SeriesId:AA.mSeriesId}));if(!x){x=this._super(y,r);}}}if(x){return x;}}switch(y){case h.DssGraphAxisNumberFormat:case -h.DssGraphFormatDataTextAdv:w="-2,0,0,0,0,$,#";return w;case h.DssGraphTextContent:switch(AA.mObjectId){case j.DssGraphY1Title:w="Y1";return w;}return w;case h.DssGraphStyleMajor:if(this.mIsGraphMatrix){switch(AA.mObjectId){case j.DssGraphY1Body:case j.DssGraphY2Body:case j.DssGraphX1Body:case j.DssGraphX2Body:w=o.DssGraphGridOuterTicks;break;default:w=o.DssGraphGridNone;break;}}else{w=o.DssGraphGridRegular;}return w;case h.DssGraphShow2DAxisMinor:case h.DssGraphShow2DAxisLine:w=!this.mIsGraphMatrix;return w;case h.DssGraph2DSide:switch(AA.mObjectId){case j.DssGraphY1Body:w=o.DssGraphAxisLabelLowSide;return w;case j.DssGraphO1Body:w=o.DssGraphAxisLabelLowSide;return w;}break;case d.DssGraphChartAreaNumber:w=3;return w;case h.DssGraphDepthMode:w=false;return w;case h.DssGraphEnhancedSeriesEffect:w=false;return w;case h.DssGraphCurveColorAsSeries:case h.DssGraphShowLegendText:case h.DssGraphShowTitle:w=true;return w;case d.DssGraphUseChartArea:case h.DssGraphShowDataValue:case h.DssGraphShowTotalValue:case d.DssGraphChartAreaOrientation:case h.DssGraphLockFontSize:w=false;return w;case h.DssGraphSDShowDataText:w=false;return w;case h.DssGraphShow2DAxisMajor:z=this.GetGraphMajorType();if(z===Z.GMT_3D_CATEGORY||z===Z.GMT_3D_SCATTER){if(AA.mObjectId===j.DssGraphY1Body){w=true;return w;}}if(this.mIsGraphMatrix){return true;}w=(this.mIsTimeSeriesChart?true:false);return w;case d.DssGraphCumulativePercentLabel:w="Cumulative Percent";return w;case d.DssGraphInfoNestedLabel:case d.DssGraphInfoNestedLabelBracket:w=false;return w;case h.DssGraphShowDataLabel:w=false;return w;case h.DssGraphLineColor:if(this.mIsTimeSeriesChart){if(AA.mSeriesId>=0){w=parseInt(this.GetColorFromPalette(AA.mSeriesId),10);return w;}switch(AA.mObjectId){case j.DssGraphO1Major:w=5460819;return w;case j.DssGraphY1Major:w=5658198;return w;case j.DssGraphO1Body:case j.DssGraphY1Body:w=13421772;return w;default:return undefined;}}if(this.mIsGraphMatrix){switch(AA.mObjectId){case j.DssGraphY1Major:case j.DssGraphX1Major:case j.DssGraphX2Major:case j.DssGraphY2Major:w=this.getDefaultContrastColor(S);break;default:return undefined;}}else{return undefined;}break;case h.DssGraphFillEffect:w=L.DssGraphFillSimple;return w;case h.DssGraphLineAlpha:if(AA.mObjectId===j.DssGraphRiser){w=0;return w;}return undefined;case h.DssGraphMarkerSize:w=33;return w;case h.DssGraph2DDepth:w=1000;return w;case h.DssGraphAxisAutoFit:z=this.GetGraphMajorType();w=z===Z.GMT_CATEGORY;return w;case h.DssGraphFontColor:if(this.mIsGraphMatrix){w=this.getDefaultContrastColor();return w;}break;default:return undefined;}return undefined;},PutGraphProperty:function V(w,x,y){this.mFormatManager.PutGraphProperty(w,x.mObjectId,x.mSeriesId,x.mGroupId,y);},GetFormatFont:function u(z){var w,x=this.mDebugUseNewProperties;w=this.GetFormatObject(z,-1,2,x);switch(z.mObjectId){case j.DssGraphPieGroupLabel:case j.DssGraphPieRingLabel:if(w.mFontAlignment===null||!x){w.mFontAlignment=N.FA_CENTER;}if(w.mFontSize===null||!x){w.mFontSize=Math.floor(w.mFontSize*3/4+1);}break;case j.DssGraphOPILBLValue:case j.DssGraphPieFeelerLabel:if(w.mFontAlignment===null||!x){w.mFontAlignment=N.FA_CENTER;}if(w.mFontSize===null||!x){w.mFontSize=q;}break;case j.DssGraphY1Label:case j.DssGraph2DO1Label:case j.DssGraph2DO2Label:case j.DssGraphX1Label:case j.DssGraphX2Label:case j.DssGraphY2Label:if(this.mIsTimeSeriesChart){w.mFontSize=14;w.mFontColor=13158600;}else{if(w.mFontColor===null||!x){w.mFontColor=this.getDefaultContrastColor();}if(w.mFontSize===null||!x){w.mFontSize=8;}}break;case j.DssGraphDataText:if(w.mFontSize===null||!x){w.mFontSize=Math.floor(U.kVirtualCoordinateHeight/45);}if(this.isVerticalBar()&&!this.IsBulletChart()){if(w.mFontRotation===null||!x){w.mFontRotation=F.Rotate90;}}break;case f.DssGraphWarningMessage:w.mFontColor=255;break;case f.DssGraphBanner:var y=this.getDefaultContrastColor(B);w.mFontColor=y;w.mFontSize=11;break;default:break;}this.UpdateFormatFont(z,w);w.mFontSize=this.vdFontSize(w.mFontSize);if(x){w.restoreDefaults(false);}return w;},GetFormatObject:function n(AC,y,x,AB){var AA,w,z;AB=AB&&(!!this.mDataset)&&this.mDebugUseNewProperties;if(AB){AA={Bare:true};}else{AA=undefined;}switch(x){case g:w=new Y.FormatLine(AA);break;case s:w=new Y.FormatFill(AA);break;case W:w=new Y.FormatFont(AA);break;default:break;}if(AB){z=this.ResolveFormat(w,AC,x,y);return z.object;}return w;},GetFormatLine:function K(y,AE,z){if(z===undefined){z=l._GENERIC;}var AD=y.mGroupId,AB=y.mObjectId,x;switch(AB){case j.DssGraphTrendLine:case j.DssGraphReferenceLine:case j.DssGraphY1Major:case j.DssGraphY2Major:case j.DssGraphY3Major:case j.DssGraphY4Major:case j.DssGraphX1Major:case j.DssGraphX2Major:case j.DssGraphO1Major:case j.DssGraphY1Minor:case j.DssGraphY2Minor:case j.DssGraphY3Minor:case j.DssGraphY4Minor:case j.DssGraphX1Minor:case j.DssGraphX2Minor:case j.DssGraphO1Minor:case j.DssGraphO1Body:case j.DssGraphX1Body:case j.DssGraphY1Body:case j.DssGraphY2Body:case j.DssGraphX2Body:case j.DssGraphY3Body:case j.DssGraphY4Body:case j.DssGraphUserLine1:case j.DssGraphUserLine2:case j.DssGraphUserLine3:case j.DssGraphUserLine4:case j.DssGraphDataLine:x=true;break;default:if(AD===-3){var w=y.mSeriesId;w=Math.max(w,0);y.mGroupId=this.mDataset.findCell(false,w,0);}x=y.mSeriesId>=0&&y.mGroupId>=0;break;}var AC=true,AA;AA=this.GetFormatObject(y,z,g,x);switch(AB){case j.DssGraphBackground:case j.DssGraphLegendArea:AA.mAlpha=0;break;case j.DssGraphRiser:case j.DssGraphDataLine:if(AE===t&&y.mSeriesId>=0){if(AA.mLineColor===null||!x){AA.mLineColor=A.call(this,y,0);}}if(AB===j.DssGraphRiser&&this.mIsGraphMatrix){if(AA.mLineColor===null||!x){AA.mLineColor=A.call(this,y,0,(y.mGroupId>=0&&y.mSeriesId>=0));}switch(z){case l._TICKER:if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()){if(AA.mLineThickness===null||!x){AA.mLineThicknessPt=200;AA.mLineThickness=2;}AC=false;}break;case l._CIRCLE:case l._RECTANGLE:case l._SQUARE:if(z===l._CIRCLE||z===l._RECTANGLE||z===l._SQUARE){if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()||this.IsBarChart()||this.IsLineChart()||this.IsAreaChart()){if(AA.mLineThickness===null||!x){AA.mLineThicknessPt=200;AA.mLineThickness=2;}AC=false;}}break;default:break;}}break;case j.DssGraphY1Major:case j.DssGraphY2Major:case j.DssGraphX1Major:case j.DssGraphX2Major:if(this.mIsTimeSeriesChart){AA.mLineStyle=I.LS_DOT;}else{if(this.mIsGraphMatrix){if(AA.mLineColor===null||!x){AA.mLineColor=this.getDefaultContrastColor(S);}}}break;default:break;}this.UpdateFormatLine(y,AA,x);if(AC||!x){AA.mLineThickness=AA.mLineThicknessPt;if(!this.mAbsoluteFontLineSize){AA.mLineThicknessPt=this.vdHeight(AA.mLineThicknessPt);}AA.mLineThickness=this.vdLineWidth(AA.mLineThickness);}if(x){AA.restoreDefaults(false);}y.mGroupId=AD;return AA;},GetFormatFill:function R(y,AE,AA){if(AA===undefined){AA=l._GENERIC;}var AD=y.mGroupId;if(AD===-3){var w=y.mSeriesId;w=Math.max(w,0);y.mGroupId=this.mDataset.findCell(false,w,0);}var x=(y.mSeriesId>=0&&y.mGroupId>=0)&&this.mDebugUseNewProperties,AC,AB=this.mpGraphMatrixContext;AC=this.GetFormatObject(y,AA,s,x);switch(y.mObjectId){case j.DssGraphPieSlice:case j.DssGraphRiser:case j.DssGraphDataLine:if(this.mIsGraphMatrix){if(AC.mFillType===null||!x){AC.mFillType=E.FT_SIMPLE;}var z=this.GetGraphMatrixGraphMajorType();switch(z){case a._BAR:case a._SCATTER:case a._BUBBLE:case a._AREA:if(AC.mAlpha===null||!x){AC.mAlpha=178.5;}break;case a._LINE:if(AB.mMarkerShape!==k.DssGraphMarkerShapeNone||y.mObjectId===j.DssGraphRiser){if(AC.mAlpha===null||!x){AC.mAlpha=178.5;}}break;default:break;}if(AB.mMarkerShape===k.DssGraphMarkerShapeGMTick){if(AC.mAlpha===null||!x){AC.mAlpha=255;}}if(AC.mSimpleColor===null||!x){AC.mSimpleColor=A.call(this,y,0,(y.mSeriesId>=0&&y.mGroupId>=0));}}else{if((y.mSeriesId>=0&&y.mGroupId===-3)){AC.mSimpleColor=Y.gColorPalette[y.mSeriesId];}else{if((y.mGroupId>=0&&y.mSeriesId===-3)){AC.mSimpleColor=Y.gColorPalette[y.mGroupId];}}}break;default:break;}this.UpdateFormatFill(y,AC,AE,x);if(x){AC.restoreDefaults(false);}y.mGroupId=AD;return AC;},ResolveFormat:function b(x,z,w,y){if(x){switch(w){case g:return Q.call(this,x,z,y);case s:return v.call(this,x,z,y);case W:return H.call(this,x,z,y);default:return{valid:false,object:x};}}return{valid:false,object:x};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.Obj","mstrmojo.num","mstrmojo.array","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMDataProvider");var t=mstrmojo,u=t.array,J=t.num,S=t.hash,AD=t.gm,B=AD.GMUtility,I=t.VisUtility,o=AD.EnumGraphType,AA=AD.EnumSubtype,AL=AD.EnumColorByType,P=AD.EnumMetricsPosition,AP=", ",R=" ",O=" ",a=AD.FormNameType;function H(AS){var AT=[];AS.forEach(function(AU){if(AU!==undefined){AT.push(AU);}});return AT;}function E(){var AX=this.attributesColorMap,Aa=this.attributesColorMapID,AY=AX.length,AT,AV,AU,AW,AS;for(AV=0;AV<AY;AV++){AW=Aa[AV];AS=typeof AW==="string"?AW.split(","):[AW];AT=AS.length;for(AU=0;AU<AT;AU++){var AZ=parseInt(AS[AU],10);if(AZ===-1){AX[AV]=undefined;Aa[AV]=undefined;}}}this.attributesColorMap=H(AX);this.attributesColorMapID=H(Aa);}function AF(AU,AS){var AT;if(AS>AU.mxIdx){return -1;}AT=AS;while(true){if(AU[AT]){return AT;}AT++;}}function Q(AY,AT,AW,AX){var AS=AY.n,AV=AY.fs&&AY.fs[AW].n,AU="";if(AV===undefined){AV=" ";}if(AT===a.OFF){if(AW===0){AU=AS;}else{AU="";}}else{if(AT===a.ON){AU=AS+" "+AV;}else{if(AT===a.FORM_NAME_ONLY){AU=AV;}else{if(AT===a.SHOW_ATT_NAME_ONCE){if(AW===0){AU=AS+" "+AV;}else{AU=AV;}}else{if(AT===a.AUTO){if(AX===1){AU=AS;}else{AU=AS+" "+AV;}}}}}}return AU;}function d(AU,AW,AY){var AZ=this.ttlDispTp,AT=[],AV,AS=AW?AU.cs:AU.rs,AX;for(AV=0;AV<AS;AV++){if(AU.otp===12){AX=S.clone(AU);AX.fid=AX.fs[AV].id;delete AX.fs;AX.isRowAttribute=AW;AX.tui=AY;AX.n=Q(AU,AZ,AV,AS);AT.push(AX);}else{AX=S.clone(AU);if(AU.fid!==undefined){AX.fid=AU.fid;}else{AX.fid=AU.id;}delete AX.fs;AX.isRowAttribute=AW;AX.tui=AY;if(AV===0){AX.n=AU.n;}else{AX.n="";}AT.push(AX);}}return AT;}function AO(AW){var AX,AS,AV,AU,AT=function(AY){if(AS!==""){AS+=O;}AS+=AY.headerText;};u.forEach(AW,function(AY){AV=0;while(AV<=AY.mxIdx){AV=AF(AY,AV);AU=AY[AV];AS="";AX=AU.forms[0];AU.cs=AX.cs;AU.rs=AX.rs;AU.headerID=AX.headerID;AU.idx=AX.idx;AU.o=AX.o;AU.tui=AX.tui;AU.ui=AX.ui;AU.um=AX.um;AU.stt=AX.stt;u.forEach(AU.forms,AT);AU.headerText=AS;AV++;}});}function AG(AY,AT,AX){var AW,AV=0,AU,AS;if(AY&&AY.length>0){AS=AY.length;for(AW=0;AW<AS;AW++){AU=AY[AW];if(!AU.fcnt){AU.fcnt=AX?AU.cs:AU.rs;if(AU.otp===-1){AU.fcnt=1;}}if(AV+AU.fcnt>AT){return{depth:AW,formIndex:AT-AV};}AV+=AU.fcnt;}}return -1;}function k(AX,AT,AV){var AS=AT.length,AW=[],AZ,AY,AU;for(AU=0;AU<AS;AU++){AY=AT[AU];if(AY>=0){AZ=(AX.es[AY])[AV];}else{AZ="-1";}AW.push(AZ);}return AW;}function s(AS){if(!AS||AS.length===0){return undefined;}var AU={},AT,AV=AS.length;for(AT=0;AT<AV;++AT){AU[AS[AT]]=AT;}return AU;}function n(AV,AW){if(AW===null||AV<=0){return -1;}var AU=0;if(AV===1){AU=AW.children[0].levelIndex;}else{var AT=AW.children[0];var AS;for(AS=1;AS<AV;++AS){AT=AT.children[0];}AU=AT.levelIndex;}return AU;}function AN(AT,Ae,Ab){if(AT===null||AT.length===0||Ae===null||Ab===null){return null;}var AW=AT.length,Ad=AT[0],AU=Ae[Ad.index];if(AW===1){return AU;}var AZ,AV,AS={},Aa=[],AY=[AU],Ac=[];for(AZ=1;AZ<AW;++AZ){AS=AT[AZ];Aa=Ae[AS.index];AY.push(Aa);Ac=[];Ab.push(Ac);var AX=AS.index-Ad.index;AV=0;var Af=0;while(AV<=AU.mxIdx){AV=AF(AU,AV+1);if(AV===-1){break;}Ac[Af]=n(AX,AU[AV]);Af=AV;}Ac[Af]=Aa.mxIdx+1;Ad=AS;AU=Aa;}return AY;}function AJ(AS){AS=AS.replace(/\(/g,"-");AS=AS.replace(/\)/g,"");AS=AS.replace("$","");AS=AS.replace(/ /g,"");AS=AS.replace(/&nbsp;/g,"");AS=AS.replace(/,/g,"");if(isNaN(AS[0])){return AS.slice(1);}return AS;}function A(AX,AV,AU,AW){if(!this.items[AX]){I.visPrint("Cannot find data at index ("+AX+", "+AV+")");}var AY=this.items[AX][AV];if(AY===undefined){return null;}if(AY===""||AY.rv===""||AY.rv==="--"){return null;}if(AU===undefined||AU===true){if(AY.rv!==undefined){return B.parseNumeric(AY.rv);}var AT=B.parseNumeric(AJ(AY.v));if(isNaN(AT)){I.visPrint("NaN from GetDataInLocalDataSet");AJ(AY.v);}return AT;}if(AY.v!==undefined){return AY.v;}var AS=this.getMetricNumberFormat(AW);if(AW!==undefined){return J.formatByMask(AS,AY.rv);}return B.parseNumeric(AY.rv);}function Z(AT,AS,AV){if(!this.items[AT]){I.visPrint("Cannot find data at index ("+AT+", "+AS+")");}var AU=this.items[AT][AS];if(AU===""){return null;}return AU[AV];}function X(Ac,Ad,Ae,AT){var Ag=[],Ab=Ae.length,Aa,AY=Ac.length,AZ=[],Af,AX;for(Aa=0;Aa<Ab;Aa++){Af=Ae[Aa];AX=Af-Ad;if(AX>=0&&AX<=AY-1){Ag.push(Ac[AX]);AZ.push(AX);}}if(AT){var AV=AZ.length;var AS=0;var AW;for(Aa=0;Aa<AV;Aa++){AW=AZ[Aa];var AU=Ac.slice(AS,AW);AT.push(AU);AS=AW+1;}}return Ag;}function h(AY,Aa,AS,Ab,Ah,Ae){var AU=Aa.length,AX,AZ=[],AT,AV,Ac,Ag,AW=0,Ad,Af;for(AX=0;AX<AU;AX++){AT=Aa[AX];if(AX===AU-1){AV=AS;}else{AV=Aa[AX+1];}Ac=AV-AT;Ag=Ac/Ab;Ad=Ag;Af=[];while(Ad--){if(Ae){if(Ad===0){AZ.push(AY[AW]);}else{if(Ah){Af.push(AY[AW]);}}AW++;}else{Af.push(AY[AW]);AW++;}}if(Ah){Ah.push(Af);}}return AZ;}function w(AW,AY,Ac,AZ,AT,AU){var AV,AX=[],Ab,Aa;Ab=(AW||[]).length;Aa=[];if(AZ){for(AV=0;AV<Ab;AV++){var Ad=AW[AV];if(Ad&&Ad.length&&AT.indexOf(Ad[0].C)!==-1){AX.push(Ad);Ac.push(Aa);Aa=[];}else{Aa.push(AW[AV]);}}}else{var AS={};(AU||[]).forEach(function(Ae){AS[Ae/AY]=true;});for(AV=0;AV<Ab;AV++){if(AS[AV]&&AV!==0){Ac.push(Aa);Aa=[];Aa.push(AW[AV]);}else{Aa.push(AW[AV]);}}Ac.push(Aa);}return AX;}function AR(AZ,Aa,Ab){var AY=Ab.length,AX,AW,Ad,Ac=AZ.length,AS=0,AV=0,AU=[],AT;for(AX=0;AX<AY;AX++){Ad=Ab[AX];AW=Ad-Aa;if(AW>=0&&AW<=Ac-1){if(AW===0){continue;}AV=AW;AT=AZ.slice(AS,AV);AU.push(AT);AS=AV;}else{if(AW>Ac-1){break;}}}AT=AZ.slice(AS);AU.push(AT);return AU;}function AK(AS){return parseInt(AS,10)===AS;}function AQ(AW,AV,Ab,AU){var AX=0,AT,AY=AW.mxIdx,Aa=[],AS,AZ=AU===0?"rs":"cs";while(AX<=AY){AT=AW[AX];if(AT){AS=AT.forms[Ab];Aa.push(AS);AX+=AS[AZ]||1;}else{AX+=1;}if(AV>0&&AX>AV){break;}}return Aa;}function U(AS,AU){var AT;if(AU==="All"){return true;}AT=AS.dropzones;if(AT){if(AT.indexOf(AU)>=0){return true;}}return false;}function l(AS,AU,AT){if(AS.ui!==AT){if(AS.pHd){l(AS.pHd,AU);}}AU.push(AS);}function g(AX,AU,AW,AY){var AT,AS=this.gts,AV;if(!AU){return ;}if(AX==="all"||AX===undefined){if(AX===undefined){I.visPrint("zoneName use 'all' instead of undefined!");}l(AU,AW);return ;}if(AU.pHd){g.call(this,AX,AU.pHd,AW,AY);}AV=(AY==="row"?AS.row:AS.col);AT=AV[AU.ui];if(U.call(this,AT,AX)){AW.push(AU);}}function b(AS){return AS.textContent||AS.innerText||AS.nodeValue||"";}function e(AY,AS,AW){var AX=[],Ab,Aa,AV,AZ,AT,AU;for(AU=0;AU<AS.length;AU++){Ab=AS[AU];Aa=AY[Ab.ui];AT=Aa.id;AV=Aa.es[Ab.idx];AZ=AW.indexOf(AT);if(AZ>=0){AX[AZ]=Ab.idx;}}return AX;}function W(AZ,AS){var AY=[],Ab,Aa,AX,AU,AW=AS.length,AV,AT;for(AT=0;AT<AW;AT++){Ab=AS[AT];AX=Ab.forms.length;Aa=AZ[Ab.ui];for(AV=0;AV<AX;AV++){AU=Aa.es[Ab.forms[AV].idx];AY.push({unit:Aa,header:AU,o:Ab.o,tui:Ab.tui,dpt:Ab.tui+1});}}return AY;}function f(AS){return B.restoreSpecialChars(AS);}function C(AY,AX){var AV=false,AU,AT;if(AX){AU=AX.split("&");if(AU.length>1){AV=true;}}if(AY===undefined){var AS;if(AV){AS={};u.forEach(AU,function(AZ){AS[AZ]="";});}else{AS="";}return AS;}if(AX){if(AV){var AW={};u.forEach(AU,function(AZ){AT=AY[AZ];if(AT!==undefined&&typeof AT==="string"){AT=f(AY[AZ]);}AW[AZ]=AT;});return AW;}return f(AY[AX]);}return AY;}function z(Ad,AU,AT,Aa){var Ab=[],Ah,Af,Ae,AX,AW=AU.length,AY,AV,AZ;for(AV=0;AV<AW;AV++){Ah=AU[AV];if(Ah.stt===1){continue;}AZ=Ah.forms.length;Ae=Ad[Ah.ui];AX=Ae.es[Ah.idx];var AS;if(Aa===true){var Ag={forms:[]};Ab.push(Ag);AS=Ag;}else{AS=Ab;}for(AY=0;AY<AZ;AY++){var Ac=Ah.forms[AY].idx;if(Ac>=0){AX=Ae.es[Ac];if(AT.length===1&&AX&&AX[AT]!==undefined){AS.push(C(AX,AT));}else{Af=Af||S.copy(Ah);S.copy(Ah.forms[AY],Af);AX.tid=Ae.id;AS.push(C(S.copy(AX,Af),AT));}if(AY===AZ-1){Af=null;}}else{AS.push("");}}}return Ab;}function AC(AX,AT,AS){var AW=[],Aa,AY,AV,AU,AZ=true;for(AU=0;AU<AT.length;AU++){Aa=AT[AU];AY=AX[Aa.ui];AV=AY.es[Aa.idx];if(C(AV,AS)!==""){AZ=false;}AW.push(C(AV,AS));}if(AZ){AW.push(C(AY,AS));}return AW;}function y(Ac,Ae){var AS=Ac.mxIdx,AW,Ad,AT=true,AU=false,Aa,Ab=-1,AZ,Af=null,AV;for(AW=0;AW<=AS;AW++){Ad=Ac[AW];if(Ad){if(AT){var AX=AF(Ac,AW+1);var AY=Ac[AX];if(AY.idx===Ad.idx){AU=true;}AT=false;if(AU===false){return ;}}AZ=Ad.idx;if(AZ!==Ab){if(Af){Af[Ae]=Aa;}Aa=1;Ab=AZ;Af=Ad;}else{delete Ac[AW];Aa++;}}}if(Af){Af[Ae]=Aa;}if(AU){for(AW=0;AW<=AS;AW++){if(Ac[AW]){AV=AW;}}Ac.mxIdx=AV;}}function r(AY,Ab){var AS=AY.mxIdx,AW,Aa,AX,AZ,AT,AV=this.getMetricCount(),AU=AV>0?AV:1;AT=(Ab==="cs");for(AW=0;AW<=AS;AW++){Aa=AY[AW];if(Aa){AX=Aa.forms[0];AZ=AX[Ab];if(!AZ){AZ=1;}if(AT){Aa.numLeaves=AZ/AU;}else{Aa.numLeaves=AZ;}Aa.levelIndex=AW;}}}function j(AZ,AS,Ac){var AT=AS.mxIdx,Aa=0,AU,Ab,AX,AY,Ad,AV,AW;for(AW=0;AW<=AT;AW++){AU=AS[AW];Ab=AU&&AU.forms[0];if(AU){while(true){Aa=AF(AZ,Aa);Ad=AZ[Aa];if(AZ.isCustomGroupWithBanding){AV=Ad.forms[1];}else{AV=Ad.forms[0];}if(!Ad.children){Ad.children=[];}AX=AV[Ac];if(!AX){AX=1;}AY=Ab[Ac];if(!AY){AY=1;}if(AV.o<=Ab.o&&(AV.o+AX)>=(Ab.o+AY)){AU.pHd=Ad;AU.pHdIdx=Aa;Ad.children.push(AU);break;}else{Aa++;}}}}}function T(AW){var AV,AS,AX=[],AU,AT,AY={};for(AV in AW){AT=AW[AV].token;if(AT){AS=AT.elements;AU=AS.join();if(AY[AU]===undefined){AY[AU]=true;AX.push(AW[AV]);}}else{AX.push(AW[AV]);}}return AX;}function D(AX,AV){var AS=AX.mxIdx,AY=0,AW,AT,AZ=AV==="r"?"rs":"cs",AU,Ab,Aa;while(AY<=AS){Ab=AX[AY];if(!Ab){AY+=1;continue;}AT=Ab.forms[0].o;Aa=Ab.forms[0][AZ]||1;if(Aa>1){AW=AY+(Ab.forms[1][AZ]||1);while(AW<Aa+AT){if(AX[AW]){AU=AX[AW].forms[0][AZ]||1;AX[AW].forms.splice(0,0,Ab.forms[0]);AW+=AU;}else{AW+=1;}}}AY+=Aa;}}var N=mstrmojo.declare(mstrmojo.Obj,null,{grpCnt:-1,srsCnt:-1,dps:null,getChartInfo:function(){return this.gmm.getChartInfo();},getTooltipForChartHeader:function(Aa,AV,Ac){var AX=this.gmm,Ab=AX.gmCtr,AY=Ab.rowHeaderCnt,AW=Ab.colHeaderCnt,AT,AZ,AU=AV==="r",AS;if(AU){if(AY===0){return ;}if(Aa.length>0){if(!Ac){Aa.push(null);}}AT=AY;AZ=AX.getRowTitleInfo();AS=this.getRowHeaders(0,"Rows","n&id&dei&o&at&idx");}else{if(AW===0){return ;}if(Aa.length>0){if(!Ac){Aa.push(null);}}AT=AW;AZ=AX.getColTitleInfo();AS=this.getColHeaders(0,"Columns","n&id&dei&o&at&idx");}B.generateToolTipContent(0,AT,AU,AZ,AS,Aa);},getColorByValue:function(Ah,Ag,Ac,AZ){var AT=this.gmm,Am=AT.gmCtr,Ai=Am.view.model.docModel,Ae=AT.globalAttrMetricsColorMap,An=AT.colorType,AW,Af,Aj=Am.palette,Aa=Aj.length,Ad=AT.attrMetricsColorMapIDMap,AX,AU,Ak,AS=Am.thresholds,AY,AV,Ab=AT.metricsColorMapID;if(AZ===undefined){AZ=true;}if(An===AL.METRICS){AY=Am.getColorByMetrics()[0];AV=this.getAssoCoordinatesWithMetricIndex(Ah,[Ag],AY);AU=this.getPropValue(Ah,AV.C-this.getOffsetX(),"ti");if(AU!==undefined){AU=parseInt(AU,10)-1;Ak=AS[AU];return(Ak.fmt&&Ak.fmt.bc)?mstrmojo.VisUtility.parseCSSColor(Ak.fmt.bc,true):Am.property.defaultsObj.shpFillClr;}if(AZ){return Am.property.defaultsObj.shpFillClr;}else{return null;}}else{if(An===AL.NULL){return null;}}AW=this.getColorByToken(Ah,Ag,Ac);if(An===AL.METRICS_ITEM){AX=Ab.indexOf(AW);}else{AX=Ad&&Ad[AW];}if(AX===undefined||AX<0){return null;}if(Am.globalColorMapping){var Al=Ae[AX];Af=Al&&Ai.getColorBy(Al.levels,Al.elements).color;}else{Af=Aj[AX%Aa];}return Af;},getColorByToken:function(Ah,Ag,Ac){var AU=this.gmm,Aj=AU.gmCtr,Al=AU.colorType,Aa=Aj.getRowColorAttrsIndex(),Af=Aj.getColColorAttrsIndex(),Ak=[],Ae,Ai,AZ,Ad,AW,AX,AS,Ab,AT;if(Al===AL.METRICS_ITEM){Ad=AU.getMetricCount();if(Ad>0){if(Ac&&Ac.length>0){u.forEach(Ac,function(Am){AS=(AU.getMetricIds())[Am];Ak.push(AS);});AW=Ak.join(AP);return AW;}AZ=Ag%Ad;AS=(AU.getMetricIds())[AZ];return AS;}I.visPrint("metric count is zero!!");return"";}if(Al===AL.ATT||Al===AL.ATT_METRICS){Ai=Aa.length;if(Ai>0){Ab=this.getHeaderObjectList(Ah,0,"all");}for(Ae=0;Ae<Ai;Ae++){AX=Aa[Ae];Ak[AX.order]=Ab[AX.index];}Ai=Af.length;if(Ai>0){AT=this.getHeaderObjectList(Ag,1,"all");}for(Ae=0;Ae<Ai;Ae++){AX=Af[Ae];Ak[AX.order]=AT[AX.index];}}else{I.visPrint("Unsupported Color By Type!");}Ai=Ak.length;for(Ae=0;Ae<Ai;Ae++){Ak[Ae]=Ak[Ae].idx;}if(Al===AL.ATT_METRICS&&Ac){var AV=Ac.length,AY;for(AY=0;AY<AV;AY++){AZ=Ac[AY];AS=(AU.getMetricIds())[AZ];Ak.push(AS);}}AW=Ak.join(AP);return AW;},getHeaderObjectList:function c(AX,AU,AZ){var AW=this.gmm,Aa=AW.modelRhs,AY=AW.modelChs,AV=[],AT,AS;if(AU===0){AS=(Aa[Aa.length-1]);if(AS){AT=AS[AX+this.oy];g.call(AW,AZ,AT,AV,AU===0?"row":"col");}}else{AS=(AY[AY.length-1]);if(AS){AT=AS[AX+this.ox];g.call(AW,AZ,AT,AV,AU===0?"row":"col");}}return AV;},getRowHeaders:function q(AW,AZ,Ad){var AY,Ab=[AW,AZ,Ad].join(":");if(this.rowHeaderPool===undefined){this.rowHeaderPool={};}AY=this.rowHeaderPool;if(AY[Ab]){return AY[Ab];}var AX=this.gmm,Ac=AX.modelRhs,AU=[],Aa,AV,AT,AS=(Ac[Ac.length-1]);if(AS){AT=AS[AW+this.oy];g.call(AX,AZ,AT,AU,"row");Aa=this.gmm.gts.row;AV=z(Aa,AU,Ad);}AY[Ab]=AV;return AV;},getColHeaders:function v(AW,AZ,Ad){var Ac,Ab=[AW,AZ,Ad].join(":");if(this.colHeaderPool===undefined){this.colHeaderPool={};}Ac=this.colHeaderPool;if(Ac[Ab]){return Ac[Ab];}var AX=this.gmm,AY=AX.modelChs,AU=[],Aa,AV,AT,AS=AY[AY.length-1];if(AS){AT=AS[AW+this.ox];g.call(AX,AZ,AT,AU,"col");Aa=this.gmm.gts.col;AV=z(Aa,AU,Ad||"n");}Ac[Ab]=AV;return AV;},getSeriesLabel:function p(Ab,AZ,Af){var AW,Ac=this.gmm,Aa,AX=[],Ag=null,AT=false,AV=this.getChartInfo(),AU=AD.EnumABLDirection,AY=AV.tp,Ad=o,AS;if(AV.isABL&&AV.dirc===AU.VERTICAL){AT=true;}else{if(AV.isABL&&AV.dirc===AU.HORIZONTAL){AT=false;}else{if(AY===Ad.BUBBLE||AY===Ad.SCATTER){AT=true;}else{if(AY===Ad.GRID){AT=true;}else{I.visPrint("need to be implemented for this chart type!");}}}}if(AT){var Ah=this.gmm.modelRhs;if(!Ah||Ah.length===0){return[];}AS=(Ah[Ah.length-1]);if(AS){AW=AS[Ab+this.oy];g.call(Ac,"YAxis",AW,AX,"row");Ag=this.gmm.gts.row;if(Af===true){Aa=W(Ag,AX);}else{Aa=z(Ag,AX,"n");}}}else{var Ae=this.gmm.modelChs;if(!Ae||Ae.length===0){return[];}AS=(Ae[Ae.length-1]);if(AS){AW=AS[this.ox+AZ];g.call(Ac,"XAxis",AW,AX,"col");Ag=this.gmm.gts.col;if(Af===true){Aa=W(Ag,AX);}else{Aa=z(Ag,AX,"n");}}}return Aa;},getGroupElementIndexArray:function(Aa,AZ,Ac){var AX,Af,Ab=this.gmm,AU=Ab.clusteredBarSpecialCase,AY=[],Ae=null,AT=false,AW=this.getChartInfo(),AV=AD.EnumABLDirection,AS;if(AU){return[-1];}if(AW.isABL&&AW.dirc===AV.VERTICAL){AT=true;}else{if(AW.isABL&&AW.dirc===AV.HORIZONTAL){AT=false;}}if(AT){var Ad=this.gmm.modelChs;if(!Ad||Ad.length===0){return[];}AS=(Ad[Ad.length-1]);if(AS){AX=AS[this.ox+AZ];g.call(Ab,"XAxis",AX,AY,"col");Ae=this.gmm.gts.col;Af=e(Ae,AY,Ac);}}else{var Ag=this.gmm.modelRhs;if(!Ag||Ag.length===0){return[];}AS=(Ag[Ag.length-1]);if(AS){AX=AS[this.oy+Aa];g.call(Ab,"YAxis",AX,AY,"row");Ae=this.gmm.gts.row;Af=e(Ae,AY,Ac);}}return Af;},getGroupLabel:function AM(Aj,Ai,AX){var Af,Ad,AU=this.gmm,AY=AU.clusteredBarSpecialCase,AS=[],Ae=null,AT=false,Ab=this.getChartInfo(),Aa=AD.EnumABLDirection,Ak=Ab.tp,AV=o,Al=AU.getMetricCount(),AW;if(AY){if(AX===true){var Ah,Ac=[];for(Ah=0;Ah<Al;Ah++){Ac.push({isAtt:false});}return Ac;}return[AU.getMetricNames()[Ai%Al]];}if(Ab.isABL&&Ab.dirc===Aa.VERTICAL){AT=true;}else{if(Ab.isABL&&Ab.dirc===Aa.HORIZONTAL){AT=false;}else{if(Ak===AV.BUBBLE||Ak===AV.SCATTER){AT=true;}else{if(Ak===AV.GRID){AT=true;}else{I.visPrint("need to be implemented for this chart type!");}}}}if(AT){var AZ=this.gmm.modelChs;if(!AZ||AZ.length===0){return[];}AW=(AZ[AZ.length-1]);if(AW){Af=AW[this.ox+Ai];g.call(AU,"XAxis",Af,AS,"col");Ae=this.gmm.gts.col;if(AX===true){Ad=W(Ae,AS);}else{Ad=z(Ae,AS,"n");}}}else{var Ag=this.gmm.modelRhs;if(!Ag||Ag.length===0){return[];}AW=(Ag[Ag.length-1]);if(AW){Af=AW[this.oy+Aj];g.call(AU,"YAxis",Af,AS,"row");Ae=this.gmm.gts.row;if(AX===true){Ad=W(Ae,AS);}else{Ad=z(Ae,AS,"n");}}}return Ad;},checkExcluded:function(AV,AU){var AX=this.gmm.getMetricCount(),AW=false,AS;for(AS=0;AS<AX;AS++){var AT=this.getData(AV,AU,true,AS);if(AT!==""&&AT!==undefined&&AT!==null&&!isNaN(AT)){AW=true;break;}}return !AW;},getData:function(AV,AT,AS,AU){var AW=this.getChartInfo();if((AW.tp===o.GRID)&&!AW.isPie){return 1234;}return A.call(this,AV,AT,AS,AU);},getPropValue:function(AT,AS,AV){var AU=this.getChartInfo();if(AU.tp===o.GRID&&AV===undefined){return 1234;}return Z.call(this,AT,AS,AV);},getAssoDataWithMetricIndex:function(AS,AW,AV,AU){var AY=this.gmm.getMetricCount(),AT=AW[0],AX=Math.floor(AT/AY)*AY;return A.call(this,AS,AX+AV,AU,AV);},getAssoCoordinatesWithMetricIndex:function(AS,AX,AW){var AZ=this.gmm.getMetricCount(),AV=this.getOffsetX(),AU=this.getOffsetY(),AT=AX[0],AY=0;if(AZ>0){AY=Math.floor(AT/AZ)*AZ;}else{AY=AT;}return{R:AS+AU,C:AY+AW+AV,ox:AV,oy:AU};},getSizeByMetricIndexForBubble:function V(AW,Ab){var AZ,Aa=this.gmm,Ac=Aa.gmCtr,AV=Ac.getSizeByMetrics(),AU=Aa.getMetricCount(),Ad,AY,AX,AT,AS;if(AV.length<=0){return -1;}if(this.splitPlottingMetrics){Ad=Ab[1];AY=Ad%AU;AS=Ac.getMetricsOnYAxis();AX=AS.indexOf(AY);AZ=AV[AX%AV.length];}else{Ad=Ab[0];AY=Ad%AU;AT=Ac.getMetricsOnXAxis();AX=AT.indexOf(AY);if(AX===-1){I.visPrint("have no size by for this metric");return -1;}AZ=AV[AX%AV.length];}return AZ;},getSizeByData:function AB(AZ,Af){var Ac,Ae=o,AW=AD.EnumABLDirection,Ad=this.gmm,Ah=Ad.gmCtr,AY=Ah.getSizeByMetrics(),AV=this.getChartInfo(),AX=Ad.getMetricCount(),Ag,AT,Ab,Aa,AU,AS;if(AV.tp!==Ae.BUBBLE){if((AV.isABL&&AV.dirc===AW.VERTICAL)||AV.tp===Ae.GRID){if(AY.length>0&&AX>0){Ac=AY[0];Ag=Af[0];AT=Math.floor(Ag/AX)*AX;return A.call(this,AZ,AT+Ac);}return -1;}if(AV.isABL&&AV.dirc===AW.HORIZONTAL){if(AY.length>0&&AX>0){Ac=AY[0];Ag=Af[0];AT=Math.floor(Ag/AX)*AX;return A.call(this,AZ,AT+Ac);}return -1;}}else{if(AY.length<=0){return -1;}if(this.splitPlottingMetrics){Ag=Af[1];Ab=Ag%AX;AT=Math.floor(Ag/AX)*AX;AS=Ah.getMetricsOnYAxis();Aa=AS.indexOf(Ab);Ac=AY[Aa%AY.length];}else{Ag=Af[0];Ab=Ag%AX;AT=Math.floor(Ag/AX)*AX;AU=Ah.getMetricsOnXAxis();Aa=AU.indexOf(Ab);if(Aa===-1){I.visPrint("have no size by for this metric");return -1;}Ac=AY[Aa];}return A.call(this,AZ,AT+Ac);}},getMetricNumberFormat:function(AT){var AS=this.gmm;return AS.getMetricNumberFormat(AT);},printAll:function(){I.visPrint("-----------------------("+this.cri+","+this.cci+")+------------------------------");var AT,AS;for(AT=0;AT<this.ht;AT++){var AU="";for(AS=0;AS<this.wd;AS++){var AV=this.items[AT][AS];if(!AV.v){I.visPrint("Why!");}AU+=(AV.v+" ");}I.visPrint(AU);}},getASingleColumn:function(AY,AZ){var AV=AY+AZ,AX=[],AT=this.ox,AS=this.oy,AW,AU;for(AW=0;AW<this.ht;AW++){for(AU=0;AU<this.wd;AU++){if(AU===AV){AX.push({R:AW+AS,C:AU+AT,mIdx:AZ});if(AK(AU+AT)===false){I.visPrint("warning");}}}}},getGraphCellSingleColumn:function(AS,AV,AW){var Ab=AV.length,AZ=[],AU=this.ox,AT=this.oy,AY,AX,Ac,Aa;for(AY=0;AY<this.ht;AY++){Ac=[];for(AX=0;AX<Ab;AX++){Aa=AV[AX];Ac.push({R:AY+AT,C:AS+Aa+AU,mIdx:Aa,grp:AW,didx:AX});if(AK(AS+Aa+AU)===false){I.visPrint("warning");}}AZ.push(Ac);}return AZ;},getGraphCellSingleRow:function(AW,AX){var AU=this.gmm.getMetricCount(),Af=this.items[AX],Aa=Af.length/AU,Ad=AW.length,Ab=[],AV=this.ox,AT=this.oy,AZ,AY,Ac,AS,Ae;for(AZ=0;AZ<Aa;AZ++){AS=AZ*AU;Ae=[];for(AY=0;AY<Ad;AY++){Ac=AW[AY];Ae.push({R:AX+AT,C:AS+Ac+AV,mIdx:Ac,grp:AX,didx:AY});if(AK(AS+Ac+AV)===false){I.visPrint("warning");}}Ab.push(Ae);}return Ab;},getGroupCount:function(){if(this.grpCnt>0){return this.grpCnt;}var AX,AT=this.getChartInfo(),AV=AT.tp,AU=AD.EnumABLDirection,AW=o,AY=this.gmm,AS=AY.clusteredBarSpecialCase,AZ=this.gmm.getMetricCount();if(AT.isABL&&AT.dirc===AU.VERTICAL){if(AS){AX=this.pmi.length;}else{if(AZ===0){AX=this.wd;}else{AX=this.wd/AZ;}}this.grpCnt=AX;return AX;}if(AT.isABL&&AT.dirc===AU.HORIZONTAL){if(AS){AX=this.pmi.length;}else{AX=this.items.length;}this.grpCnt=AX;return AX;}if(AV===AW.BUBBLE||AV===AW.SCATTER){if(!this.splitPlottingMetrics){var Aa=this.pmi;AX=Aa.length;this.grpCnt=AX;return AX;}AX=1;this.grpCnt=AX;return AX;}if(AV===AW.GRID){if(AZ===0){return this.wd;}return this.wd/AZ;}I.visPrint("LocalDataSet::getGroupCount for this type is not implemented");return 0;},getSeriesCount:function(){if(this.srsCnt>0){return this.srsCnt;}var AZ=this.getChartInfo(),AY=AD.EnumABLDirection,AV=o,AU,AT=this.gmm,AX=AT.clusteredBarSpecialCase,AW=AT.getMetricCount(),AS;if(AZ.isABL&&AZ.dirc===AY.VERTICAL){if(AX){AS=this.ht;}else{if(!this.splitPlottingMetrics){AS=this.ht*this.pmi.length;}else{AS=this.ht;}}}else{if(AZ.isABL&&AZ.dirc===AY.HORIZONTAL){if(AX){AS=this.ht;}else{if(AW===0){AU=this.wd;}else{AU=this.wd/AW;}if(!this.splitPlottingMetrics){AS=AU*this.pmi.length;}else{AS=AU;}}}else{if(AZ.tp===AV.BUBBLE||AZ.tp===AV.SCATTER){if(!this.splitPlottingMetrics){AS=this.ht;}else{AS=this.ht;}}else{if(AZ.tp===AV.GRID){if(this.items){AS=this.items.length;}else{AS=1;}}else{AS=0;I.visPrint("LocalDataSet::getSeriesCount for this type is not implemented");}}}}this.srsCnt=AS;return AS;},getDataInGroup:function(AX,Av,Ae){var Ap,Ar,Ay,At,As,Al=this.getChartInfo(),Aj=AD.EnumABLDirection,Ac=o,Au=Al.isPie,AY=this.gmm,Aw=AY.gmCtr,Aa=Aw.onlyMetricNamesOnAxisForGridPie,An=Aw.hasTotalForPie(),AU,Ag,Ai,AW,Ah,Ao,AV,AZ,Af,Aq,Am,Ax,Ad=false,AT=Aw.totalStartCols,Ak=Aw.piePartition;if(Al.tp===Ac.BUBBLE||Al.tp===Ac.SCATTER){AZ=this.splitPlottingMetrics;Af=AY.getMetricCount();if(Af===0){Af=1;}Ap=[];Aq=this.wd/Af;for(At=0;At<Aq;At++){Ax=At*Af;Am=AX;if(AZ){Am=0;}Ay=this.getGraphCellSingleColumn(Ax,Av[Am],AX);if(Au){if(!An){Ag=[];AU=AR(Ay,this.oy,Aw.piePartition);Ai=AU.length;for(As=0;As<Ai;As++){AV=mstrmojo.hash.clone(AU[As][0]);AV.fakeTotal=true;Ag.push(AV);}}else{AU=[];Ag=X(Ay,this.oy,Aw.totalRows,AU);Ai=AU.length;}for(As=0;As<Ai;As++){Ag[As].slicesOfPie=AU[As];}Ap=Ap.concat(Ag);}else{Ap=Ap.concat(Ay);}}return Ap;}if((Al.isABL&&Al.dirc===Aj.VERTICAL)||(Al.tp===Ac.GRID)){Ap=[];var Ab=this.wd/this.getGroupCount();Ax=Ab*AX;Ar=Av.length;if(Ar===0&&(Al.tp===Ac.GRID)&&Au){Ar=1;Ad=true;}for(At=0;At<Ar;At++){if(Aa){Ay=this.getGraphCellSingleColumn(Ax,[Ae],AX);}else{if(Ad){Ay=this.getGraphCellSingleColumn(Ax,[0],AX);}else{Ay=this.getGraphCellSingleColumn(Ax,Av[At],AX);}}if(Au){if(!An){Ag=[];AU=AR(Ay,this.oy,Aw.piePartition);Ai=AU.length;for(As=0;As<Ai;As++){AV=mstrmojo.hash.clone(AU[As][0]);AV.fakeTotal=true;Ag.push(AV);}}else{AU=[];Ag=X(Ay,this.oy,Aw.totalRows,AU);Ai=AU.length;}for(As=0;As<Ai;As++){Ag[As].slicesOfPie=AU[As];}Ap=Ap.concat(Ag);}else{Ap=Ap.concat(Ay);}}return Ap;}if(Al.isABL&&Al.dirc===Aj.HORIZONTAL){Ap=[];Ar=Av.length;for(At=0;At<Ar;At++){Ay=this.getGraphCellSingleRow(Av[At],AX);if(Au){if(!An){AW=[];Ah=w(Ay,AY.getMetricCount(),AW,false,AT,Ak);Ao=AW.length;for(As=0;As<Ao;As++){var AS=mstrmojo.hash.clone(AW[As][0]);AS.fakeTotal=true;Ah.push(AS);}}else{AW=[];Ah=w(Ay,AY.getMetricCount(),AW,true,AT,Ak);Ao=AW.length;}for(As=0;As<Ao;As++){Ah[As].slicesOfPie=AW[As];}Ap=Ap.concat(Ah);}else{Ap=Ap.concat(Ay);}}return Ap;}I.visPrint("LocalDataSet::getDataInGroup for this type is not implemented");},getMaxValue:function(){return 9999;},getMinValue:function(){return -9999;},getRowCount:function(){return this.ht;},getColumnCount:function(){return this.wd;},getOffsetX:function(){return this.ox;},getOffsetY:function(){return this.oy;},getMetrics:function(){var AS=this.gmm.metrics;if(!AS){I.visPrint("none metrics found!");return null;}return AS;},getMetric:function(AT){var AS=this.getMetrics();if(AS){if(AS.es.length>AT){return AS.es[AT];}return null;}return null;},clearDataProviders:function(){this.dps=null;},generateDataProvider:function K(){if(this.dps){return this.dps;}var AS=this.gmm,AV,Ap,Ax,Ar,Ah,Aq,Aj,An,Ak,Ai=this.trConfigPool,Au=AS.gmCtr,AZ,Aw=this,Av=AS.shallWeUseGroupInfo,Aa=AS.clusteredBarSpecialCase,AU=AS.onlyMetricNamesOnAxisForGridPie,As=AS.isMetricNamesOnXAxis,AT=this.splitPlottingMetrics,Ad=this.getChartInfo(),AX=o,Ab=AD.EnumABLDirection,Ac=this.metricsOnAngleBy,Ae=this.mpos,Al=this.metrics,Ag=0,Am=0,Ao=this.splitPie,At=AS.isBlankGrid;if(Ai){var Af=Ai.globalProp;if(Af){Ag=Af.trdBwdFst!==undefined?Af.trdBwdFst:0;Am=Af.trdFwdFst!==undefined?Af.trdFwdFst:0;}}if(Av){AZ=Au.getGroupInfo(true);}Ah=this.getGroupCount();if(Ad.tp===AX.BUBBLE||Ad.tp===AX.SCATTER){Ap=this.pmi;Ax=[];if(!AT){Ar=[];for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,Ap);Ar.push(Aq);}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:Ap,data:Ar,lds:this,sbc:true,dataSbc:false,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);this.dps=Ax;}else{for(Ak=0;Ak<Ap.length;Ak++){AV=Ap.slice(Ak,Ak+1);Ar=[];for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,AV);Ar.push(Aq);}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:AV,data:Ar,lds:this,sbc:true,dataSbc:false,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);}this.dps=Ax;}u.forEach(Ax,function(Az){var A0=Az.fwdLbs,Ay=Az.bwdLbs;if(A0&&A0.length>0){Aw.flb=A0;}if(Ay&&Ay.length>0){Aw.blb=Ay;}});return Ax;}if(Ad.isABL&&Ad.dirc===Ab.VERTICAL){Ap=this.pmi;Ax=[];if(!AT){Ar=[];if(Aa){for(An=0;An<Ah;An++){Aq=this.getDataInGroup(0,Ap.slice(An,An+1));Ar.push(Aq);}}else{for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,Ap);Ar.push(Aq);}}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:Ap,data:Ar,lds:this,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);this.dps=Ax;u.forEach(Ax,function(Az){var A0=Az.fwdLbs,Ay=Az.bwdLbs;if(A0&&A0.length>0){Aw.flb=A0;}if(Ay&&Ay.length>0){Aw.blb=Ay;}});}else{if(Av){u.forEach(AZ,function(Ay){AV=[];u.forEach(Ay,function(Az){if(Az!==undefined&&Az>=0){AV.push([Az]);}});Ar=[];for(An=0;An<Ah;An++){Aq=Aw.getDataInGroup(An,AV);Ar.push(Aq);}Aj=Aw.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:AV,data:Ar,lds:Aw,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);});}else{for(Ak=0;Ak<Ap.length;Ak++){AV=Ap.slice(Ak,Ak+1);Ar=[];for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,AV);Ar.push(Aq);}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:AV,data:Ar,lds:this,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);}}this.dps=Ax;u.forEach(Ax,function(Az){var A0=Az.fwdLbs,Ay=Az.bwdLbs;if(A0&&A0.length>0){Aw.flb=A0;}if(Ay&&Ay.length>0){Aw.blb=Ay;}});}return Ax;}if(Ad.isABL&&Ad.dirc===Ab.HORIZONTAL){Ap=this.pmi;Ax=[];if(!AT){Ar=[];if(Aa){for(An=0;An<Ah;An++){Aq=this.getDataInGroup(0,Ap.slice(An,An+1));Ar.push(Aq);}}else{for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,Ap);Ar.push(Aq);}}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:Ap,data:Ar,lds:this,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);this.dps=Ax;u.forEach(Ax,function(Az){var A0=Az.fwdLbs,Ay=Az.bwdLbs;if(A0&&A0.length>0){Aw.flb=A0;}if(Ay&&Ay.length>0){Aw.blb=Ay;}});}else{if(Av){u.forEach(AZ,function(Ay){AV=[];u.forEach(Ay,function(Az){if(Az!==undefined&&Az>=0){AV.push([Az]);}});Ar=[];for(An=0;An<Ah;An++){Aq=Aw.getDataInGroup(An,AV);Ar.push(Aq);}Aj=Aw.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:AV,data:Ar,lds:Aw,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);});}else{for(Ak=0;Ak<Ap.length;Ak++){AV=Ap.slice(Ak,Ak+1);Ar=[];for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,AV);Ar.push(Aq);}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:AV,data:Ar,lds:this,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);}}this.dps=Ax;u.forEach(Ax,function(Az){var A0=Az.fwdLbs,Ay=Az.bwdLbs;if(A0&&A0.length>0){Aw.flb=A0;}if(Ay&&Ay.length>0){Aw.blb=Ay;}});}return Ax;}if(Ad.tp===AX.GRID){Ap=this.pmi;Ax=[];if(!AT){Ar=[];var AW,AY;for(An=0;An<Ah;An++){if(AU){AW=[];AY=[];u.forEach(Ac||[],function(Ay){Aq=this.getDataInGroup(An,Ap,Ay);AW.push(Aq);},this);if(As){Ar=Ar.concat(AW);}else{u.forEach(AW||[],function(Ay){AY=AY.concat(Ay);});Ar.push(AY);}}else{Aq=this.getDataInGroup(An,Ap);Ar.push(Aq);}}if(AU){Ao=false;}Aj=this.addDisposable(new AD.GMDataProvider({pmi:Ap,data:Ar,lds:this,sbc:false,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao,isBlankGrid:At}));Ax.push(Aj);this.dps=Ax;}else{for(Ak=0;Ak<Ap.length;Ak++){AV=Ap.slice(Ak,Ak+1);Ar=[];for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,AV);Ar.push(Aq);}Aj=this.addDisposable(new AD.GMDataProvider({pmi:AV,data:Ar,lds:this,sbc:false,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:AV[0],splitPie:Ao,isBlankGrid:At}));Ax.push(Aj);}this.dps=Ax;}return Ax;}I.visPrint("generateDataProvider Need to be implemented!");}});mstrmojo.gm.GMDataModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gm.GMDataModel",gmCtr:undefined,modelChs:[],modelRhs:[],rp:null,cp:null,gts:null,rct:-1,cct:-1,cir:-1,cic:-1,ldss:[],plottingMetricsIndex:null,splitPlottingMetrics:null,zoneNames:["dummy","Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","AngleBy"],metrics:null,chtInfo:null,colorType:AL.ATT,metricsType:undefined,getBreakByUnits:function(){var AS=this.dz,AT=[],AU,AV=AS.BreakBy;if(AV){AU=AV.TemplateUnit;if(AU){u.forEach(AU,function(AW){AT.push(S.clone(AW));});}}return AT;},getChartInfo:function(){return this.gmCtr.getChartInfo();},getMetricNames:function(){return this.getMetricProp("n");},getMetricIds:function(){return this.getMetricProp("oid");},getFullNumberFormat:function(){return this.fullNf;},isMetricInZone:function(AY,AU){var AT=this.dz,AX,AV=false,AW,AS;AX=this.zoneNames[AU];if(AT&&AX){AS=AT[AX];AW=AS.TemplateMetric;u.forEach(AW,function(AZ){if(AZ.idx===AY){AV=true;}});}return AV;},getMetricProp:function(AY){var AW=[],AV,AU,AT=this.metrics,AX;if(!AT){return AW;}AX=AT.es;AU=AX.length;for(AV=0;AV<AU;AV++){var AS=AX[AV];if(AY){AW.push(AS[AY]);}else{AW.push(AS);}}return AW;},getUnitAttributesCountOnRow:function(AW){var Aa=this.gts.row,AY=Aa.length,AX=this.gmCtr,Ab,AT,AV,AU,AS=this.getChartInfo(),AZ=0;if(AY!==1){if(AW){u.forEach(Aa,function(Ac){AZ+=B.getAttributeFormCnt(Ac);});}else{AZ=AY;}return AZ;}if(AW){Ab=AX.getGMHeaderCount("Rows");AT=AX.getGMHeaderCount("YAxis");AV=AX.getGMHeaderCount("BreakBy");AU=AX.getGMHeaderCount("SliceBy");}else{Ab=AX.getAttributesOnDropZone("Rows","n").length;AT=AX.getAttributesOnDropZone("YAxis","n").length;AV=AX.getAttributesOnDropZone("BreakBy","n").length;AU=AX.getAttributesOnDropZone("SliceBy","n").length;}if(AS.isABL&&AS.dirc===AD.EnumABLDirection.HORIZONTAL){return Ab+AT;}return Ab+AV+AT+AU;},getUnitAttributesCountOnCol:function(AW){var AV,AT,AY=this.gts.col,AX=0;AT=AY.length;var AS=this.gts.col[AT-1];if(AS&&AS.otp===-1){AX=AT-1;}else{AX=AT;}if(AW){var AU=0;for(AV=0;AV<AX;AV++){AU+=B.getAttributeFormCnt(AY[AV]);}return AU;}else{return AX;}},getPathToHeaderObject:function(AV,AT,AX){var AU=[],AS,AW;l(AT,AU);if(AV===0){AW=this.gts.row;}else{AW=this.gts.col;}AS=z(AW,AU,AX);return AS;},collectHeaderObj:function(AS,AU,AT){l.call(this,AS,AU,AT);},getMetricCount:function(){var AS=this.metrics;if(!AS){return 0;}return(AS.es?AS.es.length:0);},getMetricNumberFormat:function(AS){var AU=this.mx,AT;if(AU){AT=AU[AS];return f(AT.numfmt);}return undefined;},init:function AI(AW){this.ldss=[];this.modelChs=[];this.modelRhs=[];this._super(AW);this.cir=this.cp.length;this.cic=this.rp.length;var AV,AU,AX=this.gts.row.length,AT=this.gts.col.length;var AS=this.gts.col[AT-1];this.mpos=-1;if(AS&&AS.otp===-1){this.metrics=AS;this.mpos=AT-1;}for(AV=0;AV<AX;AV++){this.modelRhs.push({});}for(AU=0;AU<AT;AU++){this.modelChs.push({});}this.createPlottingMetricsIndex();},createLocalDataSet:function M(Ad,Ac){var Af=this.gmCtr,Ah=Af.getChartInfo(),AZ=Af.getMetricsOnAngleBy(),AY=this.rp,AU=this.cp,AT=this.rct,Aj=this.cct,AS=this.ldss,AV,Ai,Aa;var AX=-1;var Ag=-1;if(Ac===AU.length-1){AX=Aj-AU[Ac];}else{AX=AU[Ac+1]-AU[Ac];}if(Ad===AY.length-1){Ag=AT-AY[Ad];}else{Ag=AY[Ad+1]-AY[Ad];}if(Ag===0){Ag=1;}if(AX===0){AX=1;}var AW=this.addDisposable(new N({trConfigPool:this.trConfigPool,cri:Ad,cci:Ac,ox:AU[Ac],oy:AY[Ad],wd:AX,ht:Ag,gmm:this,pmi:this.plottingMetricsIndex,metrics:this.metrics,mpos:this.mpos,splitPlottingMetrics:this.splitPlottingMetrics,metricsOnAngleBy:AZ,splitPie:Af.splitPiesInGraphCellForABL()}));AS[this.cir*Ad+Ac]=AW;this.feedLds(Ad,Ac);if(Ah.isABL){AW.fses={};AW.bses={};AW.xvar={};Ai=this.getMetricCount();for(AV=0;AV<Ai;AV++){Aa=Af.getTrendLinesObjectForMetric(AV,Ad,Ac,undefined,true)[0];if(Aa&&Aa.inChartModel[0]){var Ae=Aa.inChartModel,Ab=Aa["x-vars"];if(Ab&&Ab.length>0){AW.validXVar=Ab;}u.forEach(Ae,function(Al){var Am=Al.fse,Ak=Al.bse;if(Am&&Am.length>0){AW.validFse=Am;}if(Ak&&Ak.length>0){AW.validBse=Ak;}});}}}},feedLds:function G(AZ,AY){var Ah=this.gmCtr,Ac=Ah.firstRes,AT=Ac.gvs,AU=AT.items,Ag=this.dataRect,Ab=this.ldss,Aa=this.rp,Af=this.cp,AW=this.rct,AS=this.cct,Ad,Ae=Ab[AZ*this.cir+AY],AV,AX;if(!AU||Aa[AZ]===undefined||Af[AY]===undefined||Aa[AZ]>Ag.y+Ag.h||Af[AY]>Ag.x+Ag.w){return ;}AV=AU.slice(Aa[AZ],(Aa[AZ+1]||AW));Ad=[];for(AX=0;AX<AV.length;AX++){Ad.push(AV[AX].items.slice(Af[AY],(Af[AY+1]||AS)));}Ae.items=Ad;},feedLdss:function AE(AS,AV,AT,AU){this.dataRect={x:AS,y:AV,w:AT,h:AU};},feedChs:function AH(Ai){var Am,Aj,Af,Aa=this.modelChs,Ae=Ai.items,Ar=Ae.length,AY=this.getUnitAttributesCountOnCol(),Ap=this.gts.col,AT,Ak,AV,Ah,Al,Ad,Ac,Aq=false;for(Am=0;Am<Ar;Am++){AT=AG(this.gts.col,Am,false);Ak=AT.depth;Ac=this.gts.col[Ak];Ad=Ak;Af=Aa[Ak];AV=Ae[Am].items;Ah=AV.length;Al=null;for(Aj=0;Aj<Ah;Aj++){var AX=AV[Aj];Aq=true;if(!Af[AX.o]){Af[AX.o]={forms:[]};}else{Aq=false;}Af[AX.o].forms.push(AX);if(AX.rs!==undefined&&AX.rs>1){var AZ=AX.rs;for(var AS=0;AS<AZ-1;AS++){var Ag=S.copy(AX);Ag.rs=1;Ag.headerText="";Af[AX.o].forms.push(Ag);}}if(Al){Al.next=AX;}if(Af.mxIdx===undefined||Af.mxIdx<AX.o){Af.mxIdx=AX.o;}Al=AX;AX.headerID=AX.idx;if(AX.idx>=0){AX.headerText=this.headerInfoToProp(1,AX,"n")[0];if(AX.cet){var AU=this.cetSelectors=this.cetSelectors||{attrs:[],metrics:[]},Ao=Ac.es[lastHeaderInRow.idx];AU.attrs.push({tid:lastHeaderInRow.cet,id:Ao.id,n:Ao.n});}}else{AX.headerText="";}if(AX.fi!==undefined){if(Ap[Ak].otp===12){AX.fid=Ap[Ak].fs[AX.fi].id;}else{if(Ap[Ak].otp>=0){AX.fid=Ap[Ak].id;}}}if(AX.stt){AX.headerID=-1;if(AX.cs===undefined&&AX.rs!==undefined){AX.cs=AX.rs;}}if(Af.length===undefined){Af.length=1;}else{if(Aq){Af.length++;}}}}var Ab=this.gts.col,AW,An;for(Am=0,An=Ab.length;Am<An;Am++){AW=Ab[Am];if(typeof AW.t==="number"&&AW.t===1){if(!AW.rs||AW.rs<=1){continue;}Af=Aa[Am];Af.isCustomGroupWithBanding=true;D(Af,"c");}}for(Am=1;Am<=Ad;Am++){j(Aa[Am-1],Aa[Am],"cs");}for(Am=0;Am<AY;Am++){r.call(this,Aa[Am],"cs");}},feedRhs:function F(AT){var Ao,Am,Ap,Al=this.modelRhs,Ah=AT.items,At=this.gmCtr,Ar=this.gts.row,Ak=Ar.length,AZ=Ah.length,An;if(AZ===1){var AW=At.getAttributesOnDropZone("Rows","n"),AU=At.getAttributesOnDropZone("YAxis","n");if(this.eg||(Ak===0&&(AW.length+AU.length===0))){AZ=0;}}for(Ao=0;Ao<AZ;Ao++){var Ai=Ah[Ao].items;var Av=Ai.length;while(Av--){var As=Ai[Av];As.headerID=As.idx;An=As.tui;if(As.stt){As.headerText="Subtotal";As.headerID=-1;}else{if(As.idx>=0){As.headerText=this.headerInfoToProp(0,As,"n")[0];if(As.cet){var AX=this.cetSelectors=this.cetSelectors||{attrs:[],metrics:[]},Ag=this.gts.row[An],Aq=Ag.es[As.idx];AX.attrs.push({tid:As.cet,id:Aq.id,n:Aq.n});}}else{As.headerText="";}}if(As.fi!==undefined){As.fid=Ar[An].fs[As.fi].id;}var AS=Al[An];if(!AS[As.o]){AS[As.o]={forms:[]};if(AS.length===undefined){AS.length=1;}else{AS.length++;}}var AV=S.copy(As);AS[As.o].forms.push(AV);if(AS.mxIdx===undefined||AS.mxIdx<As.o){AS.mxIdx=As.o;}if(As.cs&&As.cs>1){var AY=As.cs,Ae,Aj;for(Ae=0;Ae<AY-1;Ae++){Aj=S.copy(As);Aj.cs=1;Aj.headerText="";AS[As.o].forms.push(Aj);}AV.cs=1;}}}var Ad,Au;for(Ao=0;Ao<Ak;Ao++){Ad=Al[Ao];Au=Ad.mxIdx;for(Am=0;Am<=Au;Am++){var Aa=Ad[Am];if(Aa&&Aa.forms){Aa.forms.reverse();}}}var Ac=this.gts.row,Ab,Af;for(Ao=0,Ap=Ac.length;Ao<Ap;Ao++){Ab=Ac[Ao];if(typeof Ab.t==="number"&&Ab.t===1){if(!Ab.cs||Ab.cs<=1){continue;}Af=Al[Ao];Af.isCustomGroupWithBanding=true;D(Af,"r");}}for(Ao=1;Ao<Ak;Ao++){j(Al[Ao-1],Al[Ao],"rs");}for(Ao=0;Ao<Ak;Ao++){r.call(this,Al[Ao],"rs");}},extractInfoLowestHeaderInfoToAttrObj:function(){AO(this.modelChs);AO(this.modelRhs);},createPlottingMetricsIndex:function(){var Ak=this.gmCtr,AW=o,AZ=Ak.getChartInfo(),Al,Ac,Ab,Ag,Ae,Ai,AU,Aa,AY,AT,Aj,AS,Af,AV,AX=AD.EnumABLDirection,Ad;Aa=Ak.getMetricsOnXAxis();AY=Ak.getMetricsOnYAxis();AT=Ak.getSizeByMetrics();Aj=Aa.length;AS=AY.length;AV=AT.length;if(AZ.isABL){AU=[];if(AZ.dirc===AX.VERTICAL){Ad=AY;}else{Ad=Aa;}Af=Ad.length;for(Ag=0;Ag<Af;Ag++){AU.push([Ad[Ag]]);}}if(AZ.tp===AW.GRID&&Ak.isPie===false){AU=[[0]];}else{if(AZ.tp===AW.GRID&&Ak.isPie===true){if(this.splitPlottingMetrics){Al=Ak.getMetricsOnAngleBy();Ac=Al.length;AU=[];for(Ab=0;Ab<Ac;Ab++){Ai=[];Ai.push(Al[Ab]);AU.push(Ai);}}else{AU=[[0]];}}else{if(AZ.tp===AW.BUBBLE||AZ.tp===AW.SCATTER){AU=[];if(this.splitPlottingMetrics){for(Ae=0;Ae<AS;Ae++){for(Ag=0;Ag<Aj;Ag++){AU.push([Aa[Ag],AY[Ae]]);}}}else{var Ah=Math.min(Aj,AS);if(AZ.tp===AW.BUBBLE){Ah=Math.min(Ah,AV);}for(Ag=0;Ag<Ah;Ag++){AU.push([Aa[Ag],AY[Ag]]);}}}}}this.plottingMetricsIndex=AU;return AU;},headerInfoToProp:function(AS,AV,AW){var AU=[AV];var AT;if(AS===0){AT=this.gts.row;}else{AT=this.gts.col;}return AC(AT,AU,AW);},collectHeadersObjects:function(AU,AW){var AS=null;var AT;if(AU===0){AS=this.modelRhs;AT=AG(this.gts.row,AW,true);}else{AS=this.modelChs;AT=AG(this.gts.col,AW,false);}var AV=AS[AT.depth];return AQ(AV,100,AT.formIndex,AU);},collectHeadersLabels:function(AS,AV){var AU=this.collectHeadersObjects(AS,AV);var AT;if(AS===0){AT=this.gts.row;}else{AT=this.gts.col;}return AC(AT,AU,"n");},getRowHeaderObj:function(AX,AT){var Aa=this.modelRhs,AV=AG(this.gts.row,AT,true),AU=AV.depth,AY=AV.formIndex,AW=Aa[AU],AZ=AX;while(AW[AZ]===undefined&&AZ>=0){AZ--;}if(AZ>=0){var AS=AW[AZ].forms[AY];if(!AS.rs){AS.rs=1;}if(AS.o<=AX&&(AS.o+AS.rs)>AX){return AS;}}I.visPrint("no row header is found! maybe we need to retrieve it from server");},getColHeaderObj:function(AZ,AS){var AW=this.modelChs,AV=AG(this.gts.col,AS,false),AU=AV.depth,AX=AV.formIndex,Aa=AW[AU],AY=AZ;while(Aa[AY]===undefined&&AY>=0){AY--;}if(AY>=0){var AT=Aa[AY].forms[AX];if(!AT.cs){AT.cs=1;}if(AT.o<=AZ&&(AT.o+AT.cs)>AZ){return AT;}}I.visPrint("no column header is found! maybe we need to retrieve it from server");},getDropZoneInfo:function Y(){},getLocalDataSet:function L(AT,AU){var AS=AT*this.cir+AU;if(!this.ldss[AS]){this.createLocalDataSet(AT,AU);}return this.ldss[AS];},linearSearchMapGridIndexToChart:function(AT,AU){var AS=AU.length-1;while(true){if(AT>=AU[AS]){return AS;}AS--;}},mapGridIndexToChart:function(AV,AW){var AS=0,AT,AU=AW.length-1;if(AV>=AW[AU]){return AU;}AU--;AT=parseInt((AS+AU)/2);while(AU>=AS){if(AW[AT]<=AV&&AW[AT+1]>AV){return AT;}else{if(AW[AT+1]<=AV){AS=AT+1;}else{AU=AT-1;}AT=parseInt((AS+AU)/2);}}return this.linearSearchMapGridIndexToChart(AV,AW);},mapChartIndexToGrid:function(AS,AT){return AT[AS];},getRowTitleInfo:function(){if(this.rwTtInfo){return this.rwTtInfo;}var AT=this.gts,AW=AT.row,AS=[],AV=AW.length,AU;for(AU=0;AU<AV;AU++){AS=AS.concat(d.call(this,AW[AU],true,AU));}this.rwTtInfo=AS;return AS;},isSepByMetricsForBubbleScatter:function(){var AS=this.gmCtr,AU=AS.getChartInfo(),AT=AU.tp;return(AT===o.BUBBLE||AT===o.SCATTER)&&(P.MetricsByColumn===this.metricsType||P.MetricsByRow===this.metricsType);},getColTitleInfo:function(){if(this.colTtInfo){return this.colTtInfo;}var AT=this.gts,AU=AT.col,AS=[],AW=AU.length,AV;for(AV=0;AV<AW;AV++){AS=AS.concat(d.call(this,AU[AV],false,AV));}this.colTtInfo=AS;return AS;},getMetricIDsFromIndex:function(AS){return k(this.metrics,AS,"oid");},getMetricIDFromIndex:function(AS){return k(this.metrics,[AS],"id")[0];},getMetricNamesFromIndex:function(AS){return k(this.metrics,AS,"n");},getMetricCondenseFromIndex:function(AS){return k(this.metrics,AS,"cds");},addColorMetricInAngle:function(){var Aa=0,AZ=0,Ag=this.metricsColorMap,AW=this.metricsColorMapID,Ac,AX,Af=this.gmCtr,AV=Af.getChartInfo(),Ae=Af.getMetricsOnAngleBy(),Ad=this.getMetricIDsFromIndex(Ae),AY=this.getMetricNamesFromIndex(Ae),AS=Ad.length,AU=Ag.length;if((AV.isPie||AV.isRing)&&AS){var AT=[];var Ab=[];for(AZ=0;AZ<AU;++AZ){for(Aa=0;Aa<AS;++Aa){Ac=Ag[AZ]+AP+AY[Aa];AX=AW[AZ]+AP+Ad[Aa];AT.push(Ac);Ab.push(AX);}}this.metricsColorMap=AT;this.metricsColorMapID=Ab;}},constructMetricColorMap:function(){var Ai=0,Af=0,Am=this.gmCtr,Aa=Am.getChartInfo(),AT=Aa.tp,Ah=Am.getMetricsOnXAxis(),AY=Am.getMetricsOnYAxis(),Al=Am.getSizeByMetrics(),Aj=Am.getMetricsOnAngleBy(),Ad=this.getMetricIDsFromIndex(Ah),AS=this.getMetricIDsFromIndex(AY),Ab=this.getMetricIDsFromIndex(Al),Ao=this.getMetricIDsFromIndex(Aj),Ak=Aa.dirc===1,AX=this.getMetricNamesFromIndex(Aj),Ag=Math.min(Ah.length,AY.length),Ac=this.getMetricNames();if(Al.length>0){Ag=Math.min(Ag,Al.length);}var An=this.metricsColorMap=[];var AU=this.metricsColorMapID=[];if(Aa.isABL){var AV=Ak?Ad:AS;var Ae=Ak?Ah:AY;for(Ai=0;Ai<AV.length;++Ai){Af=Ai;An.push(Ac[Ae[Af]]);AU.push(AV[Af]);}this.addColorMetricInAngle();}else{if(AT===o.BUBBLE||AT===o.SCATTER){var AW;var AZ;if(this.isSepByMetricsForBubbleScatter()){for(Ai=0;Ai<Ah.length;++Ai){for(Af=0;Af<AY.length;++Af){AW=Ac[Ah[Ai]]+AP+Ac[AY[Af]];AZ=Ad[Ai]+AP+AS[Af];if(AT===o.BUBBLE){AW+=(AP+Ac[Al[Af%Al.length]]);AZ+=(AP+Ab[Af%Al.length]);}An.push(AW);AU.push(AZ);}}this.addColorMetricInAngle();}else{for(Ai=0;Ai<Ag;Ai++){AW=Ac[Ah[Ai]]+AP+Ac[AY[Ai]];AZ=Ad[Ai]+AP+AS[Ai];if(AT===o.BUBBLE){AW+=(AP+Ac[Al[Ai]]);AZ+=(AP+Ab[Ai]);}An.push(AW);AU.push(AZ);}this.addColorMetricInAngle();}}else{if(Aa.isPie||Aa.isRing){for(Ai=0;Ai<Ao.length;++Ai){An.push(AX[Ai]);AU.push(Ao[Ai]);}}}}},constructAttrMetricColorMap:function(){var AX=this.attributesColorMap,AZ=this.attributesColorMapID,AS=this.metricsColorMap,AU=this.metricsColorMapID,AT,AY,AW,AV;if(!AX||!AS){return ;}AT=this.attrMetricsColorMap=[];AY=this.attrMetricsColorMapID=[];if(AX.length>0&&AS.length>0){for(AW=0;AW<AX.length;++AW){for(AV=0;AV<AS.length;++AV){AT.push(AX[AW]+R+AS[AV]);AY.push(AZ[AW]+AP+AU[AV]);}}}else{if(AX.length>0){this.attrMetricsColorMap=AX;this.attrMetricsColorMapID=AZ;}else{if(AS.length>0){this.attrMetricsColorMap=AS;this.attrMetricsColorMapID=AU;}}}},clearColorMaps:function(){this.attrMetricsColorMap=this.attributesColorMap=undefined;this.attrMetricsColorMapID=this.attributesColorMapID=undefined;this.metricsColorMap=undefined;this.attrMetricsColorMapID=this.metricsColorMapID=undefined;this.attrMetricsColorMapIDMap=undefined;this.metricsColorMapMap=undefined;},getColorByLegendInfo:function(){var AT=this,Ak=AT.gmCtr,Ai=Ak.view.model.docModel,Ae=AT.globalAttrMetricsColorMap,Ao=this.colorType,Aj=Ak.palette,Aa=Aj.length,Ag,Af=this.attrMetricsColorMap,AV,Ad=Ak.colorByInfo,Ah="",Ap=[],Al,AU,Ac,AY,An=Ak.chartInfo;if(Ao===AL.ATT||Ao===AL.ATT_METRICS||Ao===AL.METRICS_ITEM){AV=Af.length;for(Ag=0;Ag<AV;Ag++){var AX;if(Ak.globalColorMapping){Al=Ae[Ag];AU=Ai.getColorBy(Al.levels,Al.elements);AX=AU.color;Ac=!AU.isManual;}else{AX=Aj[Ag%Aa];Ac=true;}Ap.push({label:Af[Ag],color:AX,isDefaultColor:Ac,token:Al});}if(Ao===AL.ATT||Ao===AL.ATT_METRICS){u.forEach(Ad.atts,function(Aq){Ah=Ah+" "+Aq.n;});}if(Ao===AL.ATT_METRICS||Ao===AL.METRICS_ITEM){Ah=Ah+" Metrics";}Ah=Ah.trim();u.forEach(Ap,function(Aq){Aq.decodedColor=B.decodeColor(Aq.color);Aq.encodedColor=Aq.color;});Ap=T(Ap);if(An&&An.isABL){AY=An.sbtp;if(AY===AA.STACKED||AY===AA.PERCENT){this.colorByUnitIds=Ak.getColorByUnitIds(An.dirc);Ap.sort(this.compareColorByOrder.bind(this,An.dirc));}}}else{if(Ao===AL.METRICS){Ah=Ad.metrics[0].n;var AS=Ad.thresholds;var AZ=Ad.rankMode;var Am,Ab=Ad.metrics[0].id;u.forEach(AT.mx,function(Aq){if(Aq.did===Ab){Am=Aq;return false;}});if(Am){var AW=mstrmojo.VisUtility.getColorByFormatStr(this.getMetricNumberFormat(AT.gmCtr.getColorByMetrics()[0]),AZ);Ap=mstrmojo.VisUtility.getColorByItems(AS,AZ,Am.max,Am.min,Am.cnt,AW);Ah=mstrmojo.VisUtility.getColorByTitle(Ah,AZ);if(Ap===undefined||Ap.length===0){return undefined;}}}}if(Ao===AL.NULL){return undefined;}return{item:Ah,elements:Ap};},compareColorByOrder:function(AX,AY,AW){var AU,AV=this.colorByUnitIds,Aa=AY.token.levels,Ad=AY.token.elements,Ab=AW.token.elements,AT=AV.length,AZ,AS,Ac;for(AU=0;AU<AT;AU++){AZ=Aa.indexOf(AV[AU].id);Ac=AV[AU].es;if(AZ<0||Ad[AZ]===Ab[AZ]){continue;}else{if(!AV[AU].unique&&(AX===AD.EnumABLDirection.VERTICAL||(AV[AU].zone==="Rows"||AV[AU].zone==="YAxis"))){AS=1;}else{AS=-1;}return AS*(Ac.indexOf(Ad[AZ])-Ac.indexOf(Ab[AZ]));}}},adaptForGlobalColor:function(){var AW=this.dz,Aj=AW.ColorBy,Ab=Aj.TemplateUnit,Ak=this.gmCtr,Ah=[],AS=this.gts,AV=AS.row,AU=AS.col,Am,Af,Ac,AX,Aa,AT,AZ,Ad,Ai,Ae,Ag,Al,AY;u.forEach(Ab,function(Ao){var Ap=(Ao.axis==="row"?AV:AU);var An=Ao.uidx;Ah.push(Ap[An].es);});if(!Ak.globalColorMapping){return ;}Am=this.globalAttrMetricsColorMap=[];Af=Ab===undefined?0:Ab.length;Ac=this.attrMetricsColorMapID;u.forEach(Ac,function(An){An=An.toString();AX={};Aa=AX.types=[];AT=AX.levels=[];AZ=AX.elements=[];Ad=An.split(AP);Ai=Ad.length;for(Ae=0;Ae<Ai;Ae++){if(Ae<Af){Ag=Ab[Ae].id;Al=Ah[Ae];AY=Al[parseInt(Ad[Ae],10)].id;Aa.push(Ab[Ae].t);AT.push(Ag);AZ.push(AY);}else{var Ao=Ad[Ae];AT.push(-1);AZ.push(Ao);Aa.push(4);}}Am.push(AX);});return Am;},constructColorByInfo:function(){var AT=this.colorType,AS=this.dz;if(AT===AL.ATT||AT===AL.ATT_METRICS){this.constructAttrColorMap();E.call(this);this.attrMetricsColorMap=this.attributesColorMap;this.attrMetricsColorMapID=this.attributesColorMapID;if(AT===AL.ATT){this.adaptForGlobalColor();}}if(AT===AL.METRICS_ITEM||AT===AL.ATT_METRICS){this.constructMetricColorMap();this.attrMetricsColorMap=this.metricsColorMap;this.attrMetricsColorMapID=this.metricsColorMapID;if(AT===AL.METRICS_ITEM){this.adaptForGlobalColor();}}if(AT===AL.ATT_METRICS){this.constructAttrMetricColorMap();this.adaptForGlobalColor();}this.attrMetricsColorMapIDMap=s(this.attrMetricsColorMapID);this.metricsColorMapMap=s(this.metricsColorMap);},constructAttrColorMap:function(){var A8,A0,Az,Ax,Aw,BF,BA,Ap,Ao,A5,An,Ai,A2,AU,BB,Aj,Ad,Aq,A1=this.gmCtr,A7=A1.firstRes.gvs.items,BC=A1.getChartInfo(),Av=BC.tp,A4=A1.getSizeByMetrics(),AW=A1.getRowColorAttrsIndex(),A6=A1.getColColorAttrsIndex(),At=this.getMetricCount(),Au=At===0?1:At,Aa=A1.getColorByAttrsID(),BD=AW.length,AX=A6.length,Ar=[],BE=[],Am=[],Ae=[],Af=1,AV=[],AT=[],Ac=[],Ah=[],Ag=1,As=[];if(!Aa||Aa.length===0){return ;}A2=Aa.length;AU=this.attributesColorMap=[];BB=this.attributesColorMapID=[];Ai=(Av===o.GRID&&A4.length===0);An=(Av===o.GRID)&&!BC.isPie;Ap=A1.getMetricsOnXAxis();Ao=A1.getMetricsOnYAxis();A5=Math.min(Ap.length,Ao.length);if(A4.length>0){A5=Math.min(A5,A4.length);}function Ay(BH,BJ){if(An){return 1234;}var BG=A7[BH],BI=BG&&BG.items&&BG.items[BJ];if(BI===undefined||BI.rv===undefined||BI===""||BI.rv===""||BI.rv==="--"){return false;}return true;}function A3(BN,BP,BG,BJ){var BQ,BH,BI,BO,BM,BL=false,BK,BR;for(BH=0;BH<BN&&!BL;++BH){BK=BG+BH;for(BI=0;BI<BP&&!BL;++BI){BR=BJ+BI;if(BC.isABL){for(BQ=0;BQ<At;++BQ){BO=Ay(BK,BR*At+BQ);if(BO){BL=true;break;}}}else{if(Av===o.BUBBLE||Av===o.SCATTER){for(BQ=0;BQ<A5;++BQ){BO=Ay(BK,BR*At+Ap[BQ]);BM=Ay(BK,BR*At+Ao[BQ]);if(BO&&BM&&(Av===o.SCATTER||(Av===o.BUBBLE&&!isNaN(A4[BQ])))){BL=true;break;}}}else{if(Av===o.GRID&&A4.length>0){BO=Ay(BK,BR*At+A4[0]);if(BO){BL=true;break;}}}}}}return BL;}if(BD>0){Am=[];BE=AN(AW,this.modelRhs,Am);Ae=(BD===1?BE:BE[BD-1]);Af=Ae.mxIdx+1;AV=[];for(Az=0;Az<BD-1;++Az){Ar[AW[Az].order]=BE[Az][0];AV[Az]=0;}}if(AX>0){Ac=[];AT=AN(A6,this.modelChs,Ac);Ah=(AX===1?AT:AT[AX-1]);Ag=Ah.mxIdx+1;As=[];}var Ak=null,Ab=null,Al=this.rct,A9=this.cct/Au,AS=0,AY=0,AZ={};for(A0=0;A0<Af;++A0){if(BD>0){Ak=Ae[A0];if(!Ak){continue;}Al=Ak.numLeaves;Ar[AW[BD-1].order]=Ak;AV[BD-1]=A0;for(Az=BD-2;Az>=0;--Az){if(Am[Az][AV[Az]]>AV[Az+1]){break;}Aj=AV[Az];Ad=BE[Az][Aj];if(BE[Az].isCustomGroupWithBanding){Aq=Ad.forms[1].rs;}else{Aq=Ad.rs;}if(!Aq){Aq=1;}AV[Az]+=Aq;Ar[AW[Az].order]=BE[Az][AV[Az]];}}AY=0;if(AX>0){for(Aw=0;Aw<AX-1;++Aw){Ar[A6[Aw].order]=AT[Aw][0];As[Aw]=0;}}for(Ax=0;Ax<Ag;++Ax){if(AX>0){Ab=Ah[Ax];if(!Ab){continue;}A9=Ab.numLeaves;Ar[A6[AX-1].order]=Ab;As[AX-1]=Ax;for(Aw=AX-2;Aw>=0;--Aw){if(Ac[Aw][As[Aw]]>As[Aw+1]){break;}Aj=As[Aw];Ad=AT[Aw][Aj];if(AT[Aw].isCustomGroupWithBanding){Aq=Ad.forms[1].cs;}else{Aq=Ad.cs;}if(!Aq){Aq=1;}As[Aw]+=Aq;Ar[A6[Aw].order]=AT[Aw][As[Aw]];}}if(Ai||A3(Al,A9,AS,AY)){BF=Ar[0].headerID;BA=Ar[0].headerText;for(A8=1;A8<A2;++A8){BF+=AP+Ar[A8].headerID;BA+=R+Ar[A8].headerText;}if(!AZ.hasOwnProperty(BF)){AU.push(BA);BB.push(BF);AZ[BF]=true;}}AY+=A9;}AS+=Al;}},testLocalDataSet:function x(){var AY=this.cir,AS=this.cic,AV,AT,AX,AZ;for(AV=0;AV<AS;AV++){for(AT=0;AT<AY;AT++){var AU=this.getLocalDataSet(AV,AT);AU.printAll();var AW=AU.generateDataProvider();I.visPrint("========"+AW.length+" data providers for this local data set===");for(AX=0;AX<AW.length;AX++){AZ=AW[AX];I.visPrint("");I.visPrint("====start Testing data provider: "+AX+" ======");AZ.testDataProvider();I.visPrint("====end Testing data provider: "+AX+" ======");}}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine");var E=mstrmojo.chart,J=mstrmojo.chart.enums,I=J.EnumLineJoinType,H=10;function M(Q,P,O){return Q?P.x===O.x:P.y===O.y;}function F(){var S=this.mChartContextPtr,O=this.mFormatLinePtr,Q=O.getGradient(),P=O&&Q&&Q.valid;if(!S.mIsGraphMatrix||!P){this.ApplyLineFormat();}else{if(Q.style===0){this.ApplyLineFormat();}else{var R=Q.angle===1;this.Vibrate(0.01,R);this.ApplyLineFormat();}}}function L(S,R){var Q,O=S.length;for(Q=1;Q<=O*2;Q++){R.push({});}var P=Math.max(this.mFormatLinePtr.mLineThickness/2,E.gOutlineBlack.mLineThickness/1.3);var U={x:2*S[0].x-S[1].x,y:2*S[0].y-S[1].y};var T={x:2*S[O-1].x-S[O-2].x,y:2*S[O-1].y-S[O-2].y};this.GetAngularBisectorIntersectionPoint(S[1],S[0],U,P,R[0]);this.GetAngularBisectorIntersectionPoint(T,S[O-1],S[O-2],P,R[O-1]);this.GetAngularBisectorIntersectionPoint(S[O-2],S[O-1],T,P,R[O]);this.GetAngularBisectorIntersectionPoint(U,S[0],S[1],P,R[2*O-1]);for(Q=1;Q<O-1;++Q){this.GetAngularBisectorIntersectionPoint(S[Q+1],S[Q],S[Q-1],P,R[Q]);this.GetAngularBisectorIntersectionPoint(S[Q-1],S[Q],S[Q+1],P,R[2*O-1-Q]);}}mstrmojo.chart.PolyLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.PolyLineObject",mLinePoints:null,isClosePath:false,identity:null,init:function N(Q){Q.hasLine=Q.hasLine||true;Q.isClosePath=Q.isClosePath||false;this._super(Q);var P,S=this.mLinePoints=[],R=Q.PolyLine,O=R.length;for(P=0;P<O;P++){S.push(R[P]);}if(Q.Identity!==undefined&&Q.Identity!==null){this.identity=Q.Identity;}},Draw:function C(){if(this.mLinePoints.length<2){return ;}var P=this.mChartContextPtr,O=P.GetLineJoin();P.SetLineJoin(I.LJT_ROUND);this.SetLineWidth();this.SetPath();F.call(this);P.SetLineJoin(O);P.FinishDrawPolyline(this.mLinePoints,this.mTripleId,!this.mIsDetectable,this.identity,this.startPoint,this.midPoint,this.endPoint);},GetPolygons:function G(T){var R,Q,X=this.mLinePoints,U=X.length;if(U<2){return ;}var P=2/(H*H);var O=[];O.push(0);for(R=1;R+1<U;++R){var Y={x:X[R-1].x-X[R].x,y:X[R-1].y-X[R].y};var V={x:X[R+1].x-X[R].x,y:X[R+1].y-X[R].y};Y.x=Y.x/Math.sqrt(Y.x*Y.x+Y.y*Y.y);Y.y=Y.y/Math.sqrt(Y.x*Y.x+Y.y*Y.y);V.x=V.x/Math.sqrt(V.x*V.x+V.y*V.y);V.y=V.y/Math.sqrt(V.x*V.x+V.y*V.y);if(1-(Y.x*V.x+Y.y*V.y)<P){O.push(R);}}O.push(U-1);U=O.length;for(R=1;R<U;++R){var S=[];for(Q=O[R-1];Q<=O[R];++Q){S.push(X[Q]);}var W=[];L.call(this,S,W);T.push(W);}},SetPath:function D(){var R=this.mChartContextPtr,O=this.mFormatLinePtr,Q=this.mLinePoints,P=[];if(this.isClosePath){P=P.concat(Q);P.pop();R.DrawPolygon(P,true,false,0,O.mLineStyle);}else{R.DrawPolyLine(Q,true,false,0,O.mLineStyle);}},getBoundingPoints:function B(){return{Shape:1,Points:this.mLinePoints};},movePointsAgainstBorder:function A(){var V=this.mChartContextPtr,T=this.mLinePoints,O=T.length,U=V.IsVertical();if(V.mIsGraphMatrix===false){return ;}var S=this.mFormatLinePtr.mLineThickness;if(S>2){return ;}var R,P=U?V.mGraphHeight:0,Q=U?0:V.mGraphWidth;for(R=0;R<O;R++){if(U){if(T[R].y>=P){T[R].y--;}if(T[R].y<=Q){T[R].y++;}}else{if(T[R].x<=P){T[R].x++;}if(T[R].x>=P){T[R].x--;}}}},Vibrate:function K(O,R){var P,Q=this.mLinePoints;for(P=0;P+1<Q.length;P+=2){if(M.call(this,R,Q[P],Q[P+1])){if(R){Q[P+1].x+=O;}else{Q[P+1].y+=O;}}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","GraphObjectManager");mstrmojo.chart.GraphObjectAggregation=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphObjectAggregation",mGraphObjectList:null,mStartFrameGraphObjectList:null,init:function I(J){this._super(J);this.mGraphObjectList=[];this.mStartFrameGraphObjectList=[];},AddGraphObject:function F(K,J){if(J){this.mStartFrameGraphObjectList.push(K);}else{this.mGraphObjectList.push(K);}},Clear:function B(K,J){if(K){this.mStartFrameGraphObjectList=[];}if(J){this.mGraphObjectList=[];}},ObjectInRectangle:function D(J){return false;},GetClockwisePolygon:function G(){return[];},SetProgress:function H(K){var J=this.mGraphObjectList,M=J.length,L;this._super(K);for(L=0;L<M;++L){J[L].SetProgress(this.mProgress);}},OnPointDetectionEx:function C(N,L,O,J,K,M){return mstrmojo.chart.GraphObjectManager.prototype.OnPointDetectionByList.apply(this,[this.mGraphObjectList,N,L,O,J,K,M]);},Draw:function A(){var M=this.mChartContextPtr,J=this.mGraphObjectList,L=J.length,K;if(this.mIsAnimationEnabled){M.BeginFirstFrame();for(K=0;K<L;++K){this.mStartFrameGraphObjectList[K].Draw();}M.EndFrame();M.BeginLastFrame();}for(K=0;K<L;++K){J[K].Draw();}M.EndFrame();},IsLayerObject:function E(){return true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumDSSGraphFillEffect");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","GraphObject","FormatFill","ChartContext");var L=mstrmojo.chart,I=L.enums,P=I.EnumCollectionType,H=mstrmojo.chart.model,Q=H.enums,F=Q.EnumDSSGraphObject,N=Q.EnumDSSGraphFillBevelEffect,D=Q.EnumDSSGraphFillEffect;mstrmojo.chart.ShapeObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.ShapeObject",init:function J(S){if(S.hasFill===undefined){S.hasFill=true;}if(S.hasLine===undefined){S.hasLine=true;}this._super(S);if(S.hasFill&&this.mTripleId.mObjectId!==F.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,P.CT_NO_COLLECTION):this.mpParentObject.GetFormatFill();}},getRadialInfo:function K(){return null;},ApplyFillFormat:function E(Z){var Y,T=false,V,S=this.mFormatFillPtr;if(S===null){return ;}if(Z===undefined){Z=false;}if(S.mAlpha===0){if(S.supportAdvancedFill((0))){var X=S.mFillBevel.type;if(X===N.DssGraphFillBevelSmoothEdge||X===N.DssGraphFillBevelChiselEdge){if(!Z){this.FillBevel();}}}}Y=S.mSimpleColor;if(T){V=new L.FormatFill();V.mSimpleColor=Y;V.mFillType=D.DssGraphFillSimple;V.mAlpha=S.mAlpha;V.mDarkerFactor=S.mDarkerFactor;V.mFillBevel=S.mFillBevel;V.mFillGradient=S.getGradient();V.mFillPattern=S.mFillPattern;S=this.mFormatFillPtr=V;}switch(S.mFillType){case D.DssGraphFillSimple:S.FillSimple(this.mChartContextPtr);break;case D.DssGraphFillAdvancedWash:case D.DssGraphFillGenericGradient:if(S.mFillGradient.gradientType===9){var W=this.getRadialInfo();if(W){S.FillGradient(this.mChartContextPtr,W);return ;}}var U=this.GetBoundingRect();S.FillGradient(this.mChartContextPtr,U);break;case D.DssGraphFillPattern:break;case D.DssGraphFillPicture:case D.DssGraphFillUserPicture:break;default:break;}if(!Z){this.FillBevel();}},FillBevel:function G(){var S,T=this.mFormatFillPtr;if(T.supportAdvancedFill(0)===false){return ;}switch(T.mFillBevel.type){case N.DssGraphFillBevelNone:break;case N.DssGraphFillBevelSmoothEdge:case N.DssGraphFillBevelChiselEdge:if(this.SupportBevelEffect()){T.FillEdgeType(this.mChartContextPtr,this.GetClockwisePolygon());}break;case N.DssGraphFillBevelDonut:case N.DssGraphFillBevelSphere:S=this.GetBoundingRect();T.FillDonutOrSphere(this.mChartContextPtr,S,this.IsCircularShape());break;}},SupportBevelEffect:function M(){return true;},IsCircularShape:function A(){return false;},SetFormatFill:function B(S){this.mFormatFillPtr=S;},GetFormatFill:function R(){return this.mFormatFillPtr;},getFormatFromParent:function O(){var S=this.mpParentObject;this.mFormatLinePtr=S.mFormatLinePtr;this.mFormatFillPtr=S.GetFormatFill();},GetBoundingRectFromPolygon:function C(V){var T=new L.Rect2D(),X,U;T.x=V[0].x;T.y=V[0].y;var S=V[0].x,W=V[0].y;X=V.length;for(U=1;U<X;++U){T.x=Math.min(T.x,Math.floor(V[U].x));T.y=Math.min(T.y,Math.floor(V[U].y));S=Math.max(S,V[U].x);W=Math.max(W,V[U].y);}T.width=S-T.x;T.height=W-T.y;return T;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Vector2D","Point2D");var U=mstrmojo.chart,L=1e-14,I=0.1,o=0.001,S=1.732050807568877;function j(v){return(v-this.mP0.x)/(this.mP3.x-this.mP0.x);}function k(){return(this.mP0.y===this.mP1.y)&&(this.mP1.y===this.mP2.y)&&(this.mP2.y===this.mP3.y);}function Q(w){var v=1/(w+1);return(((this.mP0.y*w+3*this.mP1.y)*w+3*this.mP2.y)*w+this.mP3.y)*v*v*v;}function D(w){var v=1/(w+1);return(((this.mP1.y-this.mP0.y)*w+2*(this.mP2.y-this.mP1.y))*w+this.mP3.y-this.mP2.y)*v*v/(this.mP1.x-this.mP0.x);}function r(AC){var AB=(1-AC)*this.mP0.y+AC*this.mP1.y,w=(1-AC)*this.mP1.y+AC*this.mP2.y,AD=(1-AC)*this.mP2.y+AC*this.mP3.y,AA=(1-AC)*AB+AC*w,v=(1-AC)*w+AC*AD,z=(1-AC)*AA+AC*v,y=new U.Point2D({x:((1-AC)*this.mP0.x+AC*this.mP3.x),y:z}),x=new U.BezierCurve({P0:y,P1:v,P2:AD,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});this.mP3=y;this.mP1.Reset((2*this.mP0.x+this.mP3.x)/3,AB);this.mP2.Reset((this.mP0.x+2*this.mP3.x)/3,AA);return x;}function V(AB,z,w,AD){var y;if(-L<AB&&AB<L){if(-L<z&&z<L){return ;}y=-w/(2*z);if(y<L){return ;}AD.push(y);return ;}var AA=z*z-AB*w;if(AA<-L){return ;}if(-L<AA&&AA<L){y=-z/AB;if(y<L){return ;}AD.push(y);return ;}var v=Math.sqrt(AA),AC=(-z+v)/AB,x=(-z-v)/AB;if(AC>L){AD.push(AC);}if(x>L){AD.push(x);}}function u(w){var v=(w<0)?-1:1;return v*Math.pow(v*w,1/3);}function l(AM,AL,AI,AH,AJ){if(-L<=AM&&AM<=L){V.call(this,3*AL,3*AI/2,AH,AJ);return ;}var w=AL/AM,AE=AI/AM,AN=AH/AM,AC=AE-w*w,AB=(3*w*AE-AN)/2-w*w*w,AK=AC*AC*AC+AB*AB;if(AK>L){var AG=Math.sqrt(AK),AF=u.call(this,AB+AG)+u.call(this,AB-AG)-w;AJ.push(AF);}else{if(AK>-L){var x=u.call(this,AB);AJ.push(2*x-w);AJ.push((AB<0?0.5:-1)*x-w);}else{var AA=AB*AB-AK,y=Math.acos(AB/Math.sqrt(AA))/3,v=Math.pow(AA,1/6),AD=v*Math.cos(y);AJ.push(2*AD-w);var z=S*v*Math.sin(y);AJ.push(-AD-w+z);AJ.push(-AD-w-z);}}AJ.sort();AJ.reverse();while(AJ.length!==0&&AJ[AJ.length-1]<=L){AJ.pop();}}function d(v,w){var AA=this.mP1.y-this.mP0.y,z=this.mP2.y-this.mP1.y,y=this.mP3.y-this.mP2.y,x=v*(this.mP3.x-this.mP0.x)/3;V.call(this,AA-x,z-x,y-x,w);}function J(w,y){w.sort();w.reverse();var AA=1;while(w.length!==0){var z=1/(w[w.length-1]+1);z*=AA;w.pop();var v=this.mP0.x+(this.mP3.x-this.mP0.x)*z;if(Math.abs(v-this.mP0.x)>o&&Math.abs(this.mP3.x-v)>o){AA=z;y.push(r.call(this,z));}}y.reverse();}function b(){if(this.mP0.x<this.mP3.x){return ;}this.mP0.swapPoints(this.mP3);var v=this.mP1;this.mP1=this.mP2;this.mP2=v;}function e(y,v){var x=this.Clone();b.call(x);if(y-x.mP0.x<L){return v?x:null;}if(x.mP3.x-y<L){return v?null:x;}var w=r.call(x,j.call(x,y));return v?w:x;}function R(v){this.mP0.y-=v.mP0.y;this.mP1.y-=v.mP1.y;this.mP2.y-=v.mP2.y;this.mP3.y-=v.mP3.y;}function Y(z){var v=[],x;l.call(this,this.mP0.y,this.mP1.y,this.mP2.y,this.mP3.y,v);if(v.length===0){return ;}var w=v.length;for(x=0;x<w;++x){var y=(v[x]*this.mP0.x+this.mP3.x)/(v[x]+1);z.push(y);}}function F(v,y){var AD=this.getMinX(),AC=this.getMaxX(),x=Math.min(v.x,y.x),z=Math.max(v.x,y.x);if(z-AD<I||AC-x<I){return false;}if(z-x<I){var AA=this.evaluate(v.x);return(AA-v.y)*(y.y-AA)>-I;}x=Math.max(AD,x);z=Math.min(AC,z);var AE=(y.y-v.y)/(y.x-v.x),AB=v.y+AE*(x-v.x),w=v.y+AE*(z-v.x);return(this.evaluate(x)-AB)*(this.evaluate(z)-w)<-I;}function t(w,AC){var AB=this.getMinX(),y=this.getMaxX(),v=w.getMinX(),AA=w.getMaxX();if(y-I<v||AA-I<AB){return ;}if(AB>v){t.call(w,this,AC);return ;}var x=null,z=null;if(y<AA){x=e.call(this,v,true);z=e.call(w,y,false);}else{x=e.call(this,v,true);x=e.call(x,AA,false);z=w.Clone();b.call(z);}R.call(x,z);Y.call(x,AC);}mstrmojo.chart.BezierCurve=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.BezierCurve",mP0:null,mP1:null,mP2:null,mP3:null,mIsVertical:false,init:function n(v){if(v.P0!==undefined&&v.P1!==undefined&&v.P2!==undefined&&v.P3!==undefined){this.mP0=new U.Point2D({Point2D:v.P0});this.mP1=new U.Point2D({Point2D:v.P1});this.mP2=new U.Point2D({Point2D:v.P2});this.mP3=new U.Point2D({Point2D:v.P3});this.mIsVertical=true;}if(v.P0!==undefined&&v.F1!==undefined&&v.F2!==undefined&&v.P3!==undefined){v.IsXAlwaysIndependent=v.IsXAlwaysIndependent||false;this.mP0=new U.Point2D({Point2D:v.P0});this.mP3=new U.Point2D({Point2D:v.P3});this.mIsVertical=v.IsVertical;if(!this.mIsVertical&&!v.IsXAlwaysIndependent){this.mP0.swap();this.mP3.swap();}if(this.mP3.x-this.mP0.x<L&&this.mP0.x-this.mP3.x<L){this.mP3.x=this.mP0.x+0.01;}this.mP1=new U.Point2D({x:(2*this.mP0.x+this.mP3.x)/3,y:v.F1});this.mP2=new U.Point2D({x:(this.mP0.x+2*this.mP3.x)/3,y:v.F2});}},getStartPoint:function E(){return this.mIsVertical?this.mP0:new U.Point2D({x:this.mP0.y,y:this.mP0.x});},getEndPoint:function C(){return this.mIsVertical?this.mP3:new U.Point2D({x:this.mP3.y,y:this.mP3.x});},getMinX:function M(){return this.mP0.x<this.mP3.x?this.mP0.x:this.mP3.x;},getMaxX:function q(){return this.mP0.x<this.mP3.x?this.mP3.x:this.mP0.x;},getStartIndependent:function g(){return this.mP0.x;},getEndIndependent:function O(){return this.mP3.x;},GetApproximatePolygon:function p(AC,AG){var AH=[],AB;this.GetApproximatePolyline(AH);var AD=[],x=AH.length-1,z=this.mP1.x-this.mP0.x;AD.push((this.mP1.y-this.mP0.y)/z);for(AB=1;AB<x;++AB){var AF=x/AB-1;AD.push(D.call(this,AF));}AD.push((this.mP3.y-this.mP2.y)/z);var AA=(AC+3)/2,w=AH.length,AI=2*w;if(AG===undefined){AG=[];}for(AB=0;AB<AI;++AB){AG.push(null);}for(AB=0;AB<w;++AB){var v=new U.Vector2D({x:-AD[AB],y:1}),AE=AA/v.Length(),y=new U.Point2D({x:v.x*AE+0.5,y:(v.y*AE+0.5)});AG[AB]=AH[AB].Shifted(y);AG[AI-1-AB]=AH[AB].NegativeShifted(y);}if(!this.mIsVertical){for(AB=0;AB<AI;++AB){AG[AB].swap();}}},GetApproximatePolyline:function N(y){var x=10,v=3,z=Math.floor(this.getMaxX()-this.getMinX()+0.5)/x,AA;z=Math.max(v,z);y.push(new U.Point2D({x:this.mP0.x+0.5,y:this.mP0.y+0.5}));for(AA=1;AA<z;++AA){var AB=AA/z;var w=1/AB-1;y.push(new U.Point2D({x:((1-AB)*this.mP0.x+AB*this.mP3.x+0.5),6:(Q.call(this,w)+0.5)}));}y.push(new U.Point2D({x:this.mP3.x+0.5,y:(this.mP3.y+0.5)}));},isBefore:function Z(z,w){if(!this.mIsVertical){z.swap();}if(F.call(w,this.mP0,this.mP0.Shifted(z))||F.call(w,this.mP3,this.mP3.Shifted(z))){return true;}z.Reset(-z.x,-z.y);if(F.call(this,w.mP0,w.mP0.Shifted(z))||F.call(this,w.mP3,w.mP3.Shifted(z))){return true;}var v=Math.max(this.getMinX(),w.getMinX()),y=Math.min(this.getMaxX(),w.getMaxX());if(v-y>-0.1*I){return false;}var AA=(v+y)/2,x=new U.Point2D({x:AA,y:w.evaluate(AA)});return F.call(this,x,x.Shifted(z));},SplitAtTangentPoints:function A(AC,w){if(AC.x===0){return ;}var AB=[];d.call(this,AC.y/AC.x,AB);var AA=AB.length,z=[],y;for(y=0;y<AA;++y){var v=(AB[y]*this.mP0.x+this.mP3.x)/(AB[y]+1);if(Math.abs(this.evaluate2ndDerivative(v))>0.01*I){z.push(AB[y]);}}J.call(this,z,w);},SplitAtIntersections:function a(v,x){var AA=[];t.call(this,v,AA);if(AA.length===0){return ;}var z=[],y;var AB=AA.length;for(y=0;y<AB;++y){var w=(AA[y]-this.mP0.x);if(Math.abs(w)>o){z.push((this.mP3.x-this.mP0.x)/w-1);}}if(z.length===0){return ;}J.call(this,z,x);},GetControlPoints:function K(v){v.push(this.mP0);v.push(this.mP1);v.push(this.mP2);v.push(this.mP3);},Reverse:function c(){this.mP0.swapPoints(this.mP3);this.mP1.swapPoints(this.mP2);},MoveToStart:function X(v,y){var w=y?0.5:0,x=y&&k.call(this)?0.5:0;if(this.mIsVertical){v.MoveTo(this.mP0.x+w,this.mP0.y+x);}else{v.MoveTo(this.mP0.y+x,this.mP0.x+w);}},CurveToEnd:function f(w,z){var x=z?0.5:0,y=z&&k.call(this)?0.5:0,v=(Math.abs(this.mP0.x-this.mP1.x)<0.5)?0.5:0;if(this.mIsVertical){w.BezierCurveTo(this.mP1.x+v,this.mP1.y+y,this.mP2.x+v,this.mP2.y+y,this.mP3.x+x,this.mP3.y+y);}else{w.BezierCurveTo(this.mP1.y+y,this.mP1.x+v,this.mP2.y+y,this.mP2.x+v,this.mP3.y+y,this.mP3.x+x);}},LineToStart:function T(v,y){var w=y?0.5:0,x=y&&k.call(this)?0.5:0;if(this.mIsVertical){v.LineTo(this.mP0.x+w,this.mP0.y+x);}else{v.LineTo(this.mP0.y+x,this.mP0.x+w);}},GetMinMax:function h(){var w={MinY:Math.min(this.mP0.y,this.mP3.y)+0.5,MaxY:Math.max(this.mP0.y,this.mP3.y)+0.5};if((this.mP1.y>=w.MinY&&this.mP2.y>=w.MinY)&&(this.mP1.y<=w.MaxY&&this.mP2.y<=w.MaxY)){return w;}var v=[];d.call(this,0,v);while(v.length!==0){var x=(Q.call(this,v[v.length-1])+0.5);v.pop();w.MinY=Math.min(w.MinY,x);w.MaxY=Math.max(w.MaxY,x);}return w;},Clone:function G(){return new U.BezierCurve({P0:this.mP0,P1:this.mP1.y,P2:this.mP2.y,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});},evaluate:function W(w){var v=(w-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*v+(this.mP2.y-2*this.mP1.y+this.mP0.y)*3)*v+(this.mP1.y-this.mP0.y)*3)*v+this.mP0.y;},evaluateDerivative:function B(w){var v=(w-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*v+(this.mP2.y-2*this.mP1.y+this.mP0.y)*2)*v+(this.mP1.y-this.mP0.y))*3/(this.mP3.x-this.mP0.x);},evaluate2ndDerivative:function P(x){var AA=this.mP1.y-this.mP0.y,z=this.mP2.y-this.mP1.y,y=this.mP3.y-this.mP2.y,v=this.mP3.x-this.mP0.x,w=(x-this.mP0.x)/(this.mP3.x-this.mP0.x);return 6*(z-AA+(y-2*z+AA)*w)/(v*v);},evaluate3rdDerivative:function H(){var v=this.mP3.x-this.mP0.x;return 6*(this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)/(v*v*v);},CloneReverseShift:function s(v){if(!this.mIsVertical){v.swap();}return new U.BezierCurve({P0:this.mP3.Shifted(v),P1:this.mP2.y+v.y,P2:this.mP1.y+v.y,P3:this.mP0.Shifted(v),IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.enums.EnumLineStyle");mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Point2D");var F=mstrmojo.chart,H=F.enums,J=H.EnumLineStyle,C=F.model.enums,A=C.EnumShapeType;mstrmojo.chart.StraightLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.StraightLineObject",mDeviceStartPoint:null,mDeviceEndPoint:null,midPoint:null,identity:null,init:function I(K){if(K.hasLine===undefined){K.hasLine=true;}this._super(K);this.mDeviceStartPoint=new F.Point2D({Point2D:K.StartPoint});this.mDeviceEndPoint=new F.Point2D({Point2D:K.EndPoint});if(K.MidPoint!==undefined&&K.MidPoint!==null){this.midPoint=K.MidPoint;}if(K.Identity!==undefined&&K.Identity!==null){this.identity=K.Identity;}},Draw:function B(){var O=this.mChartContextPtr,K=this.mFormatLinePtr,M=this.mDeviceStartPoint,L=this.mDeviceEndPoint,N;this.SetLineWidth();if(K.mLineStyle===J.LS_SOLID){O.DrawStraightLine(M,L);}else{O.NewPath();N=K.getLinePattern(K.mLineStyle);O.DrawDashedLine(M,L,N);}this.ApplyLineFormat();if(this.Shape===A._TICKER){O.FinishDrawTickerShape(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId);}else{O.FinishDrawStraightLine(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId,this.identity,this.midPoint);}},getShapeSize:function D(){if(this.Shape===A._TICKER){var K=this.mChartContextPtr.GetGraphMatrixContext();return Math.round(0.5*K.mConstants.FixedTickerSize);}return 0;},GetBoundingRect:function E(){if(this.Shape===A._TICKER){this.mBBox=this.mBBox||new F.Rect2D();if(this.mBBox.width!==0){return this.mBBox;}var N=this.mDeviceStartPoint,M=this.mDeviceEndPoint,K=this.mBBox,L=Math.max(1,0.5*this.mFormatLinePtr.mLineThickness);if(N.x===M.x){K.x=Math.max(N.x-L,0);K.y=Math.min(N.y,M.y);K.width=2*L;K.height=Math.abs(N.y-M.y);}else{K.y=Math.max(N.y-L,0);K.x=Math.min(N.x,M.x);K.height=2*L;K.width=Math.abs(N.x-M.x);}return K;}else{return this._super();}},GetClockwisePolygon:function G(){var K=[new F.Point2D(),new F.Point2D(),new F.Point2D(),new F.Point2D()];var P=this.mDeviceStartPoint,M=this.mDeviceEndPoint;if(!P.isEqual(M)){var O=Math.max(this.mFormatLinePtr.mLineThickness/2,F.gOutlineBlack.mLineThickness/2);O=Math.max(O,2);var N=new F.Point2D({x:2*P.x-M.x,y:2*P.y-M.y});var L=new F.Point2D({x:2*M.x-P.x,y:2*M.y-P.y});this.GetAngularBisectorIntersectionPoint(M,P,N,O,K[0]);this.GetAngularBisectorIntersectionPoint(L,M,P,O,K[1]);this.GetAngularBisectorIntersectionPoint(P,M,L,O,K[2]);this.GetAngularBisectorIntersectionPoint(N,P,M,O,K[3]);}else{K[0].Reset(P.x-1,P.y-1);K[1].Reset(P.x+1,P.y-1);K[2].Reset(P.x+1,P.y+1);K[3].Reset(P.x-1,P.y+1);}return K;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartContext","GraphObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumBoxStyle");var F=mstrmojo.chart,H=F.enums,K=H.EnumCollectionType,C=H.EnumBoxStyle;mstrmojo.chart.GraphCollectionObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphCollectionObject",mGraphObjectCollection:[],mFormatFillPtr:null,mFormatFontPtr:null,mCollectionType:K.CT_NO_COLLECTION,init:function N(P){P.hasLine=false;this._super(P);var S=this.mChartContextPtr,R=this.mTripleId,Q=this.mCollectionType=P.CollectionType,O=P.Shape;this.mGraphObjectCollection=[];switch(this.mCollectionType){case K.CT_LINE:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);break;case K.CT_GENERAL_SHAPE:case K.CT_VERTICAL_AREA:case K.CT_VERTICAL_BAR:case K.CT_HORIZONTAL_AREA:case K.CT_HORIZONTAL_BAR:case K.CT_DEPTH_LINE_OR_LINE_MARKER:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);this.mFormatFillPtr=S.GetFormatFill(R,Q,O);break;case K.CT_TEXT:this.mFormatFontPtr=S.GetFormatFont(R);if(this.mFormatFontPtr.mFontBox!==C.BS_NOFRAME&&!S.mIsGraphMatrix){this.mFormatFillPtr=S.GetFormatFill(R,Q);this.mFormatLinePtr=S.GetFormatLine(R,Q,O);}break;case K.CT_NO_FORMAT:break;default:break;}},AddGraphObject:function G(P,O){if(O===undefined){O=true;}this.mGraphObjectCollection.push(P);P.mpParentObject=this;if(O){P.getFormatFromParent();}},ClearCollection:function J(){this.mGraphObjectCollection=[];},GetCollectionSize:function M(){return this.mGraphObjectCollection.length;},GetObjectByIndex:function D(O){return this.mGraphObjectCollection[O];},SetFormatFill:function A(O){this.mFormatFillPtr=O;},SetFormatFont:function E(O){this.mFormatFontPtr=O;},GetFormatFill:function L(){return this.mFormatFillPtr;},GetFormatFont:function B(){return this.mFormatFontPtr;},Replace:function I(O,P,Q){if(O>=0&&O<this.mGraphObjectCollection.length){if(Q===undefined){Q=true;}this.mGraphObjectCollection[O]=P;P.mpParentObject=this;if(Q){P.getFormatFromParent();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","StraightLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumAxisDirection","EnumAxisLabelsLocation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var D=mstrmojo.chart,H=D.enums,J=H.EnumAxisDirection,C=H.EnumAxisLabelsLocation,A=mstrmojo.chart.model,B=A.enums,E=B.EnumDSSGraphObject,F=D.gNullTripleId;mstrmojo.chart.CategoryAxisInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CategoryAxisInfo",mId:F,mAxisLabelsLocation:C.ALL_BOTTOM,mAxisDirection:J.AD_X,init:function K(L){this._super(L);this.mId=new D.TripleId({ObjectId:E.DssGraphO1Body,SeriesId:0});this.mAxisLabelsLocation=C.ALL_BOTTOM;this.mAxisDirection=J.AD_X;},ToX:function I(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_X;this.mAxisLabelsLocation=C.ALL_BOTTOM;},ToY:function G(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_Y;this.mAxisLabelsLocation=C.ALL_LEFT;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","BezierCurve");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");var Q=mstrmojo.chart,L=Q.enums,l=L.EnumLineJoinType,F=L.EnumLineStyle,R=103,a=0.087,c=0.01;function U(p){var q=p.x;p.x=p.y;p.y=q;}function C(p,r){var q=this.mBezierCurves,t=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),s;if(p){t.AddBezierCurveLine(p);}var u=q.length;for(s=r;s<u;++s){t.AddBezierCurveLine(q[s]);}q.splice(r,q.length-r);return t;}function f(t,AB){var y=this.mBezierCurves,z=(t.y)/t.x,AD=y.length,w,v,u;for(v=0;v<AD;++v){var s=[];y[v].SplitAtTangentPoints(t,s);if(s.length!==0){var q=s.length;for(u=0;(u+1)<q;++u){AB.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:s[u]}));}w=C.call(this,s[s.length-1],v+1);f.call(w,t,AB);AB.push(w);return ;}if((v+1)<y.length){var x=y[v].getEndIndependent(),r=y[v].evaluateDerivative(x);if(Math.abs(r-z)<Math.abs(1+r*z)*a){var AA=y[v].evaluate2ndDerivative(x),p=y[v].evaluate3rdDerivative(),AC=y[v].evaluate3rdDerivative();if((Math.abs(AA)>=0.1*c)||(p*AC<-c)){w=C.call(this,null,v+1);f.call(w,t,AB);AB.push(w);return ;}}}}}function o(u,x){var v=this.mBezierCurves,z=this.mBezierCurves.length,p=u.mBezierCurves.length,t,s,r;for(t=0;t<z;++t){for(s=0;s<p;++s){var w=[];v[t].SplitAtIntersections(u.mBezierCurves[s],w);if(w.length!==0){var q=w.length;for(r=0;(r+1)<q;++r){x.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:w[r]}));}var y=C.call(this,w[w.length-1],t+1);o.call(y,u,x);x.push(y);return ;}}}}function S(w,y){var x=this.mBezierCurves,AB=x.length,t=w.mBezierCurves.length,v,u;for(v=1;v<AB;++v){var r=x[v].getStartPoint();for(u=1;u<t;++u){var s=w.mBezierCurves[u].getStartPoint();if(Math.abs(r.x-s.x)<c&&Math.abs(r.y-s.y)<c){var z=x[v].evaluateDerivative(x[v].getStartIndependent());var p=w.mBezierCurves[u].evaluateDerivative(w.mBezierCurves[u].getStartIndependent());var q=Math.abs(z-p)<Math.abs(1+z*p)*a;if(!q){var AA=C.call(this,null,v);S.call(AA,w,y);y.push(AA);return ;}}}}}function E(r,v,u,q){var p=v.length,t;for(t=0;t<p;++t){q.push(0);}v[0]/=r[0];u[0]/=r[0];for(t=1;t<p;++t){var s=r[t]-v[t-1];v[t]/=s;u[t]=(u[t]-u[t-1])/s;}q[p-1]=u[p-1];for(t=p-2;t>=0;t--){q[t]=u[t]-v[t]*q[t+1];}}function J(y){var w=this.mBezierCurves,t=[],r=[],q=[],z=y.length,s;for(s=0;s<z;++s){var x,u;if(s===0){x=0;u=1;}else{if(s===y.length-1){x=y.length-2;u=y.length-1;}else{x=s-1;u=s+1;}}var p=this.mIsVertical?y[x].y:y[x].x,v=this.mIsVertical?y[u].y:y[u].x;q.push(v-p);}for(s=0;s<y.length;++s){t.push(4);}t[0]-=2;t[t.length-1]-=2;for(s=0;s<y.length;++s){r.push(1);}var AA=[];E.call(this,t,r,q,AA);for(s=0;s<z-1;++s){if(this.mIsVertical){w.push(new Q.BezierCurve({P0:y[s],F1:y[s].y+AA[s],F2:y[s+1].y-AA[s+1],P3:y[s+1],IsVertical:this.mIsVertical}));}else{w.push(new Q.BezierCurve({P0:y[s],F1:y[s].x+AA[s],F2:y[s+1].x-AA[s+1],P3:y[s+1],IsVertical:this.mIsVertical}));}}}function O(AG){var s=this.mChartContextPtr,AC=this.mFormatLinePtr.mLineStyle,z,w,AH;if(s.mImageFormat===R){return ;}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||s.mUseAnimation){return ;}s.NewPath();var u=AG.length;if(u<2){return ;}var p=Q.FormatLine.getLinePattern(AC),v=p.length,AB=0,r=0,q=[],AA=[];for(z=0;z<u;++z){AA.push(0);q.push(0);}var AF=AG[0].x;var AE=AG[0].y;var AD=0.05;if(AC===F.LS_DOT_DOT_DOT){AD=0.03;p[v-1]*=3;}else{if(AC===F.LS_DOT){AD=0.005;}}for(AH=0;AH<=1;AH+=AD/u){for(z=1;z<u;++z){for(w=0;w<u-z;++w){if(z===1){q[w]=AG[w].x*(1-AH)+AG[w+1].x*AH;AA[w]=AG[w].y*(1-AH)+AG[w+1].y*AH;continue;}q[w]=q[w]*(1-AH)+q[w+1]*AH;AA[w]=AA[w]*(1-AH)+AA[w+1]*AH;}}r+=Math.sqrt((AF-q[0])*(AF-q[0])+(AE-AA[0])*(AE-AA[0]));if(r>=p[AB]){if(AB%2===0){if(this.mIsVertical){s.MoveTo(AF,AE);s.LineTo(q[0],AA[0]);}else{s.MoveTo(AE,AF);s.LineTo(AA[0],q[0]);}}AB=(AB+1)%v;r=0;AF=q[0];AE=AA[0];}}}mstrmojo.chart.CurveLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.CurveLineObject",mBezierCurves:[],mIsVertical:false,isClosePath:false,identity:null,startPoint:null,midPoint:null,endPoint:null,init:function h(p){this.mBezierCurves=[];if(p.hasLine===undefined){p.hasLine=true;}if(p.IsVertical===undefined){p.IsVertical=true;}if(p.IsClosePath===undefined){p.IsClosePath=false;}p.GraphCollectionObject=p.GraphCollectionObject||null;this._super(p);this.isClosePath=p.IsClosePath;if(p.BezierCurvePtr){this.mBezierCurves.push(p.BezierCurvePtr);this.mIsVertical=p.BezierCurvePtr.mIsVertical;}else{this.mIsVertical=p.IsVertical;if(p.Points){J.call(this,p.Points);}}if(p.Identity){this.identity=p.Identity;}},Draw:function e(){var u=this.mChartContextPtr,v=this.mBezierCurves,t=u.GetLineJoin(),AG,y,AF=[],AB=[],AH,w,AD,AC,AI,x,z,AE,AJ;if(v.length===0){return ;}u.SetLineJoin(l.LJT_ROUND);this.SetLineWidth();y=v.length;if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||u.mUseAnimation){u.NewPath();v[0].MoveToStart(u);for(AG=0;AG<y;++AG){v[AG].CurveToEnd(u);}}else{for(AG=0;AG<y;++AG){v[AG].GetControlPoints(AF);O.call(this,AF);this.ApplyLineFormat();}}if(this.isClosePath){u.ClosePath();}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||u.mUseAnimation){this.ApplyLineFormat();}u.SetLineJoin(t);for(AG=0;AG<y;++AG){var AA=v[AG],s=new Q.Point2D({Point2D:AA.mP0}),r=new Q.Point2D({Point2D:AA.mP1}),q=new Q.Point2D({Point2D:AA.mP2}),p=new Q.Point2D({Point2D:AA.mP3});if(!this.mIsVertical){s.swap();r.swap();q.swap();p.swap();}AB.push(s);AB.push(r);AB.push(q);AB.push(p);}if((this.startPoint===undefined||this.startPoint===null)&&(this.endPoint===undefined||this.endPoint===null)&&(this.midPoint===undefined||this.midPoint===null)){AH=AB.length;this.startPoint={x:AB[0].x,y:AB[0].y};this.endPoint={x:AB[AH-1].x,y:AB[AH-1].y};if(y%2===0){this.midPoint={x:AB[AH/2-1].x,y:AB[AH/2-1].y};}else{w=(y-1)/2;AD=(v[w].mP0.x+v[w].mP3.x)/2;AC=v[w].evaluate(AD);if(!this.mIsVertical){AI=AD;AD=AC;AC=AI;}this.midPoint={x:AD,y:AC};}}else{if(!this.mIsVertical){U.call(this,this.startPoint);U.call(this,this.midPoint);U.call(this,this.endPoint);}}u.FinishDrawCurves(AB,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},DrawOutLine:function k(){var s=this.mChartContextPtr,p=this.mBezierCurves,q;this.SetOutlineWidth();s.NewPath();p[0].MoveToStart(s);var r=p.length;for(q=0;q<r;++q){p[q].CurveToEnd(s);}this.ApplyOutlineFormat();},PointInObject:function K(s){var r=this.mBezierCurves,q=(this.mFormatLinePtr.mLineThickness<4)?4:this.mFormatLinePtr.mLineThickness,p=r.length,u,t;for(u=0;u<p;++u){t=[];r[u].GetApproximatePolygon(q,t);if(s.IsInPolygon(t)){return true;}}return false;},ObjectInRectangle:function j(u){var q=this.mBezierCurves,p=(this.mFormatLinePtr.mLineThickness<1)?1:this.mFormatLinePtr.mLineThickness,v=q.length,t,r,s;for(t=0;t<v;++t){s=[];q[t].GetApproximatePolygon(p,s);for(r=0;r<s.length;++r){if(!u.PointInRectangle(s[r])){return false;}}}return true;},AddBezierCurveLine:function W(p){var q=this.mBezierCurves;if(q.length===0){this.mIsVertical=p.mIsVertical;}q.push(p);},GetClockwisePolygon:function B(){return[];},MoveToStart:function V(p){var q=this.mChartContextPtr;this.mBezierCurves[0].MoveToStart(q,p&&q.NeedAdjustedLinePath());},CurveToEnd:function b(s){var t=this.mChartContextPtr,p=this.mBezierCurves,r=p.length,q;for(q=0;q<r;++q){p[q].CurveToEnd(t,s&&t.NeedAdjustedLinePath());}},DashedCurveToEnd:function N(q,u){var v=this.mChartContextPtr,w=this.mBezierCurves,AF=w.length,AM,AK,AG;for(AM=0;AM<AF;++AM){var AL=[];w[AM].GetControlPoints(AL);var AN=AL.length;if(AN<4){return ;}var r=(u&&v.NeedAdjustedLinePath()),AP=r?0.5:0,AB=r&&(AL[0].y===AL[1].y&&AL[1].y===AL[2].y&&AL[2].y===AL[3].y)?0.5:0,p=(Math.abs(AL[0].x-AL[1].x)<0.5)?0.5:0;AL[1].x+=p;AL[1].y+=AB;AL[2].x+=p;AL[2].y+=AB;AL[3].x+=AP;AL[3].y+=AB;var AI=Q.FormatLine.getLinePattern(q),AH=AI.length,AO=0,s=0,AA=[],AE=[];for(AM=0;AM<AN;++AM){AE.push(0);AA.push(0);}var AD=AL[0].x,AC=AL[0].y;var z=0.05;if(q===F.LS_DOT_DOT_DOT){z=0.03;AI[AH-1]*=2;}else{var AJ=11.2;for(AK=0;AK<AH;++AK){if(AK%2===0){AI[AK]*=AJ;}}}for(AG=0;AG<=1;AG+=z/AN){for(AM=1;AM<AN;++AM){for(AK=0;AK<AN-AM;++AK){if(AM===1){AA[AK]=AL[AK].x*(1-AG)+AL[AK+1].x*AG;AE[AK]=AL[AK].y*(1-AG)+AL[AK+1].y*AG;continue;}AA[AK]=AA[AK]*(1-AG)+AA[AK+1]*AG;AE[AK]=AE[AK]*(1-AG)+AE[AK+1]*AG;}}s+=Math.sqrt((AD-AA[0])*(AD-AA[0])+(AC-AE[0])*(AC-AE[0]));if(s>=AI[AO]){if(AO%2===0){if(this.mIsVertical){v.MoveTo(AD,AC);v.LineTo(AA[0],AE[0]);}else{v.MoveTo(AC,AD);v.LineTo(AE[0],AA[0]);}}AO=(AO+1)%AH;s=0;AD=AA[0];AC=AE[0];}}}},LineToStart:function P(p){var q=this.mChartContextPtr;this.mBezierCurves[0].LineToStart(q,p&&q.NeedAdjustedLinePath());},getStartPoint:function X(){return this.mBezierCurves[0].getStartPoint();},getEndPoint:function D(){var p=this.mBezierCurves;return p[p.length-1].getEndPoint();},evaluate:function T(s){var q=this.mBezierCurves,u=q.length,r;for(r=0;(r+1)<u;++r){var p=q[r].getMinX();var t=q[r].getMaxX();if(p-s<c&&s-t<c){return q[r].evaluate(s);}}return q[q.length-1].evaluate(s);},GetMinMax:function d(){var p=this.mBezierCurves,t=p.length,r,q,s;if(t>0){r=p[0].GetMinMax();for(q=1;q<t;++q){s=p[q].GetMinMax();if(s.MinY<r.MinY){r.MinY=s.MinY;}if(s.MaxY>r.MaxY){r.MaxY=s.MaxY;}}}return r;},GetApproximatePolyline:function M(s){var p=this.mBezierCurves,r,q,u,v,t;p[0].GetApproximatePolyline(s);u=p.length;for(r=1;r<u;++r){v=[];p[r].GetApproximatePolyline(v);t=v.length;for(q=1;q<t;++q){s.push(v[q]);}}},CloneReverseShift:function n(s){var p=this.mBezierCurves,r=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),q;for(q=p.length-1;q>-1;--q){r.AddBezierCurveLine(p[q].CloneReverseShift(s));}return r;},Clone:function I(){var p=this.mBezierCurves,r=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),s=p.length,q;for(q=0;q<s;++q){r.AddBezierCurveLine(p[q].Clone());}return r;},Reverse:function Z(){var p=this.mBezierCurves,r=p.length,q;for(q=0;q<r;++q){p[q].Reverse();}p.reverse();},getMinX:function H(){var p=this.mBezierCurves,r=Number.MAX_VALUE,t=p.length,q;for(q=0;q<t;++q){var s=p[q].getMinX();if(s<r){r=s;}}return r;},getMaxX:function g(){var q=this.mBezierCurves,p=Number.MIN_VALUE,t=q.length,r;for(r=0;r<t;++r){var s=q[r].getMaxX();if(s>p){p=s;}}return p;},isBefore:function G(v,t){var q=this.mBezierCurves,u=q.length,p=t.mBezierCurves.length,s,r;for(s=0;s<u;++s){for(r=0;r<p;++r){if(q[s].isBefore(v,t.mBezierCurves[r])){return true;}}}return false;},SplitAtTangentPoints:function A(q,p){if(!this.mIsVertical){q.swap();}if(q.x===0){return ;}f.call(this,q,p);},SplitAtIntersections:function Y(s,p){var r=[];o.call(this,s,r);p=r;S.call(this,s,p);var t=r.length,q;for(q=0;q<t;++q){S.call(r[q],s,p);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect");mstrmojo.requiresClsP("mstrmojo.chart","Polygon2D","ShapeObject","FormatLine");var H=mstrmojo.chart,M=H.enums,K=M.EnumLineJoinType,Q=M.EnumLineStyle,B=mstrmojo.chart.model,C=B.enums,J=C.EnumDSSGraphObject,N=C.EnumDSSGraphFillBevelEffect;function I(){var X=this.mChartContextPtr,V=this.mFormatLinePtr,S=this.mDevicePolygon,R=S.length,W,T=[],U;if(V.mLineStyle!==Q.LS_SOLID&&V.mLineStyle!==Q.LS_GRADIENT&&!X.mUseAnimation){X.NewPath();X.MoveTo(S[R-1].x,S[R-1].y);W=R-1;for(U=0;U<R;++U){T=V.getLinePattern(V.mLineStyle);X.DrawDashedLine(S[W],S[U],T);W=U;}X.ClosePath();}}mstrmojo.chart.PolygonObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PolygonObject",mDevicePolygon:[],mHasHole:false,mPointsStyle:0,init:function P(T){var R,S;this._super(T);this.mDevicePolygon=[];if(T){if(T.Polygon!==undefined){R=T.Polygon.length;for(S=0;S<R;++S){this.mDevicePolygon.push(T.Polygon[S]);}}else{if(T.Points!==undefined){R=T.Points.length;for(S=0;S<R;++S){this.mDevicePolygon.push(T.Points[S]);}}}if(T.HasHole!==undefined){this.mHasHole=T.HasHole;}}},Draw:function A(){var Y=this.mChartContextPtr,R=this.mDevicePolygon,T=Y.GetLineJoin(),U=[],V,W=[],X=0,S;Y.SetLineJoin(K.LJT_ROUND);this.SetLineWidth();Y.DrawPolygon(R,false);this.ApplyFillFormat();if(this.mHasHole){V=Math.floor(R.length/2);U=U.concat(R.slice(0,V-1));Y.DrawPolygon(U,true);if(this.mFormatLinePtr||this.mFormatLinePtr.mLineStyle===Q.LS_SOLID){this.ApplyLineFormat();}U.splice(0,U.length);U=U.concat(R.slice(V+1,R.length));Y.DrawPolygon(U,true);I.call(this);this.ApplyLineFormat();}else{if(Y.mIsTimeSeriesChart&&this.mTripleId.mObjectId===J.DssGraphRiser){X=Math.floor(R.length/2);for(S=0;S<X;++S){W.push(R[S]);}Y.DrawPolyLine(W,true);}else{if(Y.NeedAdjustedLinePath()){Y.DrawPolygon(R,true);}}I.call(this);this.ApplyLineFormat();}Y.SetLineJoin(T);Y.FinishDrawPolygon(R,this.mPointsStyle,this.mTripleId);},PointInObject:function E(S){var R=this.mDevicePolygon;if(!this.mIsDetectable){return false;}if(R.length<3){return false;}return S.IsInPolygon(R);},DrawOutLine:function G(){var U=this.mChartContextPtr,R=this.mDevicePolygon,S=[],T;if(R.length<3){return ;}this.SetOutlineWidth();if(this.mHasHole){T=Math.floor(R.length/2);S=S.concat(R.slice(0,T-1));U.DrawPolygon(S,true);this.ApplyOutlineFormat();S.splice(0,S.length);S=S.concat(R.slice(T+1,R.length));U.DrawPolygon(S,true);this.ApplyOutlineFormat();}else{U.DrawPolygon(R,true);this.ApplyOutlineFormat();}},ObjectInRectangle:function D(T){var R=this.mDevicePolygon,U=R.length,S;if(!this.mIsDetectable){return false;}if(U<3){return false;}for(S=0;S<U;++S){if(!T.PointInRectangle(R[S])){return false;}}return true;},GetBoundingRect:function F(){return this.GetBoundingRectFromPolygon(this.mDevicePolygon);},GetClockwisePolygon:function L(){var R=H.Polygon2D.clone(this.mDevicePolygon);this.MakePolygonClockwise(R);return R;},FillBevel:function O(){var W=this.mFormatFillPtr;if(W.supportAdvancedFill(0)===false){return ;}var S=this.mDevicePolygon,V=W.mFillBevel.type,T=[],R,U;if(S.length<3){return ;}if(this.mHasHole&&(V===N.DssGraphFillBevelChiselEdge||V===N.DssGraphFillBevelSmoothEdge)){T=T.concat(S);R=T.length;S.splice(0,R);for(U=0;(U+1)*2<R;++U){S[0]=T[U];S[1]=T[U+1];S[2]=T[R-2-U];S[3]=T[R-1-U];this._super();}S.splice(0,S.length);this.mDevicePolygon=S.concat(T);}else{this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","ImageMap","FormatLine","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumMarkerShape","EnumLineStyle","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject");var X=mstrmojo.chart,T=X.enums,N=T.EnumObjectShape.OS_CIRCLE,W=T.EnumMarkerShape,B=T.EnumLineStyle,C=T.EnumGraphMajorType,O=mstrmojo.hash,R=103,P=X.model,b=P.enums,I=b.EnumDSSGraphMarkerShape,J=b.EnumDSSGraphObject,E=10,a=31,D=100,H=[[4,-100,-100,100,-100,100,100,-100,100],[12,-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[12,-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[12,-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[0],[4,0,-100,100,0,0,100,-100,0],[3,0,-100,100,100,-100,100],[4,-100,-100,100,-100,100,100,-100,100],[10,0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[7,0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100],[8,-100,-100,0,-50,100,-100,50,0,100,100,0,50,-100,100,-50,0]];X.gMarkerShapeMap=[I.DssGraphMarkerShapeRectangle,I.DssGraphMarkerShapePlainX,I.DssGraphMarkerShapePlus,I.DssGraphMarkerShapeFatPlus,I.DssGraphMarkerShapeCircle,I.DssGraphMarkerShapeDiamond,I.DssGraphMarkerShapeTriangle1,I.DssGraphMarkerShapeSquare,I.DssGraphMarkerShapeStar5,I.DssGraphMarkerShapeHouse,I.DssGraphMarkerShapeStar45];X.gMarkerShapeDict=[];function c(f){var e=H.length,h=X.gMarkerShapeMap,j=X.gMarkerShapeDict,g=false,d;if(j.length===0){for(d=0;d<h.length;d++){j[h[d]]=d;}}if(g){for(d=0;d<e;++d){if(h[d]===f){return d;}}}else{return j[f]||0;}return 0;}function L(){var d=this.mPolygon=[],g=this.mMarkerShape,k=this.mMarkerSize,f=this.mMarkerPosition;var n,h,e,p=false,l,j;if(g===W.MS_Circle){if(p){for(n=0;n<360;n+=E){h=X.gModuleMain.DegreeToRadian(n);d.push(new X.Point2D({x:f.x+k*Math.cos(h),y:f.y+k*Math.sin(h)}));}}else{d.push(new X.Point2D({x:f.x-k,y:f.y-k}));d.push(new X.Point2D({x:f.x+k,y:f.y-k}));d.push(new X.Point2D({x:f.x+k,y:f.y+k}));d.push(new X.Point2D({x:f.x-k,y:f.y+k}));}return ;}var r=H[g];var q=r[0];if(this.mIsIsometric){for(e=0;e<q;++e){l=r[2*e+1]*k/D+f.x;j=r[2*e+2]*k/D+f.y;d.push(new X.Point2D({x:l,y:j}));}}else{var o;for(e=0;e<q;++e){l=r[2*e+1]*k/D+f.x;j=r[2*e+2]*k/D+f.y;o={x:l,y:j};o=this.mChartContextPtr.vdPoint(o);d.push(o);}}}function S(f){var d={drawBorder:true,shapeSize:f},e=this.mFormatLinePtr;if(e&&f>=e.mLineThickness+1&&e.mLineStyle!==B.LS_NONE){d.shapeSize=f-e.mLineThickness;}else{d.drawBorder=false;}return d;}mstrmojo.chart.MarkerObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.MarkerObject",mMarkerSize:0,mMarkerShape:I.DssGraphMarkerShapeNone,mMarkerPosition:null,mIsIsometric:true,mPolygon:null,mIsShown:true,init:function U(d){d.hasLine=d.MarkerSize>=2;this._super(d);var e=this.mChartContextPtr;this.mMarkerPosition=new X.Point2D({Point2D:d.MarkerPosition});this.mMarkerShape=c.call(this,d.MarkerShape);this.mIsIsometric=d.IsIsometric;this.mMarkerSize=d.MarkerSize;this.mIsShown=true;if(d.IsDialogSize){this.mMarkerSize=e.dialogSizeToPixelSize(d.MarkerSize);}},fallOut:function A(j){var n=this.mChartContextPtr,f=n.mGraphWidth,g=n.mGraphHeight,e=this.mMarkerPosition,d=e.x,l=e.y,k=this.mMarkerSize;if(j){return d+k<0||d-k>f||l+k<0||l-k>g;}else{return(d-k>=0&&d+k<=f)&&(l-k>=0&&l+k<=g);}},Draw:function Q(){if(!this.mIsShown){return ;}var e=this.mChartContextPtr,d=e.GetGraphMajorType();if(e.mPartialRendering){if(this.fallOut(true)){return ;}}if(this.mIsAnimationEnabled&&d===C.GMT_BUBBLE){e.BeginFirstFrame();this.SetProgress(0);this.DoDraw();e.EndFrame();e.BeginLastFrame();}this.DoDraw();if(this.mIsAnimationEnabled&&d===C.GMT_BUBBLE){this.mChartContextPtr.EndFrame();}},DoDraw:function Z(){var e=this.mChartContextPtr;var n,f,o,j,p,l,g,h,q,d,k;p=this.mMarkerSize;n=S.call(this,p);this.mMarkerSize=n.shapeSize;q=n.drawBorder;if(q){this.SetLineWidth();}this.setMarkerPath(false);this.ApplyFillFormat();if(e.NeedAdjustedLinePath()){this.setMarkerPath(true);}if(q&&this.mFormatLinePtr.mLineStyle!==B.LS_SOLID&&!e.mUseAnimation){if(this.mMarkerShape===W.MS_Circle){n=X.FormatLine.getLinePattern(this.mFormatLinePtr.mLineStyle);f=this.mMarkerSize*Math.abs(2*Math.PI);o=0;j=0;l=n.length;g=Math.PI/5;h=0;while(o<f){d=Math.min(n[j%l],f-o);k=d/this.mMarkerSize;++j;if(g>k){k=g;}o+=k*this.mMarkerSize;if(j%2===1){e.NewPath();e.drawArc(this.mMarkerPosition,this.mMarkerSize,h,h+k,false);this.ApplyLineFormat();}h+=k;}}}if(q){this.ApplyLineFormat();}if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){e.FinishDrawCircle({x:this.mMarkerPosition.x,y:this.mMarkerPosition.y,r:this.mMarkerSize},this.mTripleId);}else{e.FinishDrawPolygon(this.mPolygon,0,this.mTripleId);}this.mMarkerSize=p;},setMarkerPath:function F(f){var h=this.mChartContextPtr,e,g=this.mMarkerSize,d=this.mMarkerShape;if(h.mImageFormat===R){return ;}if(this.mPolygon===null){L.call(this);}if(d===I.DssGraphMarkerShapeCircle){h.drawArc(this.mMarkerPosition,g,0,Math.PI*2);}else{h.DrawPolygon(this.mPolygon,f);}},GetBoundingRect:function K(){if(this.mPolygon===null){L.call(this);}return this.GetBoundingRectFromPolygon(this.mPolygon);},GetClockwisePolygon:function Y(){if(this.mPolygon===null){L.call(this);}return X.Polygon2D.clone(this.mPolygon);},SetMarkerShape:function G(e){var d=c.call(this,e);if(this.mMarkerShape===d){return ;}this.mMarkerShape=d;L.call(this);},getRadialInfo:function V(){if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){var d={r:this.mMarkerSize,cx:this.mMarkerPosition.x,cy:this.mMarkerPosition.y,fx:0,fy:0};d.fx=d.cx;d.fy=d.cy;return d;}return null;},getShapeSize:function M(){return this.mMarkerSize;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGenericDirection","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","FormatLine","Rect2D");var U=mstrmojo.chart,L=mstrmojo.chart.model,W=L.enums,C=W.EnumShapeType,G=W.EnumDSSGraphObject,M=U.FormatLine,P=mstrmojo.chart.enums,A=P.EnumLineStyle,N=P.EnumGenericDirection,R=P.EnumRectExpandDirection,E=U.model.enums.EnumDSSGraphMarkerShape;var H=new U.Rect2D();function D(){var Z=[],Y=this.mRect;if(this.mBorderOpenType===N.NONE){Z.push(Y.GetTopLeft());Z.push(Y.GetTopRight());Z.push(Y.GetBottomRight());Z.push(Y.GetBottomLeft());Z.push(Y.GetTopLeft());}else{Z.push(Y.GetBottomLeft());Z.push(Y.GetTopLeft());Z.push(Y.GetTopRight());Z.push(Y.GetBottomRight());var X=0;switch(this.mBorderOpenType){case N.BOTTOM:break;case N.LEFT:X=1;break;case N.TOP:X=2;break;case N.RIGHT:X=3;break;default:break;}if(X!==0){Z=U.gModuleMain.ShiftPolygonBy(Z,X);}}return Z;}function S(Z,Y){var X,a=[];if(this.mChartContextPtr.mImageFormat===103){return a;}if(Y){X=Z.GetBottomLeft();if(X.x>1){X.x--;}a.push(X);X=Z.GetTopLeft();if(X.x>1){X.x--;}if(X.y>1){X.y--;}a.push(X);X=Z.GetTopRight();if(X.y>1){X.y--;}a.push(X);a.push(Z.GetBottomRight());}else{X=Z.GetTopLeft();if(X.x>0){X.x--;}if(X.y>0){X.y--;}a.push(X);X=Z.GetTopRight();if(X.y>0){X.y--;}a.push(X);a.push(Z.GetBottomRight());X=Z.GetBottomLeft();if(X.x>0){X.x--;}a.push(X);}return a;}function T(Y){var c=this.mChartContextPtr,X=this.mFormatLinePtr.mLineStyle,b,a,Z;if(X!==A.LS_SOLID){c.NewPath();b=M.getLinePattern(X);a=new U.Point2D({x:Y.x+0.5,y:Y.y+0.5});Z=new U.Point2D({x:Y.x+0.5+Y.width,y:Y.y+0.5});c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5+Y.width;Z.y=Y.y+0.5+Y.height;c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5;Z.y=Y.y+0.5+Y.height;c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5;Z.y=Y.y+0.5;c.DrawDashedLine(a,Z,b);}}function K(Y,X){if(X){if(Y.x>1){--Y.x;++Y.width;}if(Y.y>1){--Y.y;++Y.height;}}else{if(Y.x>0){--Y.x;++Y.width;}if(Y.y>0){--Y.y;++Y.height;}}}function B(Z){var Y=this.mFormatLinePtr,X=Y.mLineThickness,a=true;if(X>=1){var b=X/2;if(this.mShapeType===C._BAR){switch(this.mBorderOpenType){case N.BOTTOM:if((Z.width>X)&&(Z.height>b)){Z.Expand(-b,R.REC_EXP_HORIZONTAL);Z.y+=b;}else{a=false;}break;case N.LEFT:if((Z.height>X)&&(Z.width>b)){Z.Expand(-b,R.REC_EXP_VERTICAL);Z.wdith-=b;}else{a=false;}break;case N.TOP:if((Z.width>X)&&(Z.height>b)){Z.Expand(-b,R.REC_EXP_HORIZONTAL);Z.y-=b;}else{a=false;}break;case N.RIGHT:if((Z.height>X)&&(Z.width>b)){Z.Expand(-b,R.REC_EXP_VERTICAL);Z.wdith+=b;}else{a=false;}break;default:if(Z.height>X&&Z.width>X){Z.Expand(-b,R.REC_EXP_BOTH);}else{a=false;}break;}}else{if(Z.height>X&&Z.width>X){Z.Expand(-b,R.REC_EXP_BOTH);}else{a=false;}}}return a;}function F(){var Z=this.mChartContextPtr,f=this.mFormatLinePtr,a=Z.mIsGraphMatrix,d=Z.GetGraphMatrixContext(),c=(this.mShapeType===C._TICKER)||(d.mMarkerShape===E.DssGraphMarkerShapeGMTick);if(this.mTripleId.mObjectId===G.DssGraphRiser&&Z.mPartialRendering){if(this.fallOut(true)){return ;}}var b=B.call(this,this.mRect);Z.DrawRectangle(this.mRect,false);this.ApplyFillFormat();H.ResetRect(this.mRect);var X=f.mLineThickness;this.SetLineWidth();if(a){if(c===false){var e=this.mTripleId.mObjectId;if(e===G.DssGraphRiser){if(Z.IsBarChart()){b=true;this.SetOutlineWidthEx(X);var h=Z.IsVertical(),Y=S.call(this,H,h);if((Y.length===4)&&((h&&this.mBorderOpenType!==N.BOTTOM)||(!h&&this.mBorderOpenType!==N.LEFT))){Y[0].swapPoints(Y[1]);Y[2].swapPoints(Y[3]);Z.DrawPolyLine(Y,true);}}else{if(Z.IsGridChart()||Z.IsLineChart()||Z.IsBubbleChart()||Z.IsScatterChart()){b=true;Z.DrawRectangle(H,true);}}}}}else{if(Z.NeedAdjustedLinePath()&&!a){if(this.mBorderOpenType!==N.NONE){var g;g=D.call(this);Z.DrawPolyLine(g,true);}else{Z.DrawRectangle(H,true);}}else{Z.DrawRectangle(this.mRect,true);}}if(b){if(!a){T.call(this,this.mRect);}this.ApplyLineFormat();}else{this.hSetLineWidth(0);}Z.FinishDrawRect(H,this.mTripleId);}mstrmojo.chart.RectangleObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.RectangleObject",mRect:null,mBorderOpenType:0,init:function Q(X){if(X.hasFill===undefined){X.hasFill=true;}if(X.hasLine===undefined){X.hasLine=true;}this.mpParentObject=X.GraphCollectionObject||null;this.mTripleId=X.TripleId;this.mpManager=X.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(X.Shape){this.mShapeType=X.Shape;}if(X.hasLine&&this.mTripleId.mObjectId!==-3){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,0,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;if(X.hasFill&&this.mTripleId.mObjectId!==G.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,0):this.mpParentObject.GetFormatFill();}if(X&&X.Area){this.mRect=new U.Rect2D({Rect2D:X.Area});}this.mIsVirtual=X.IsVirtualMarker||false;},Draw:function O(){var X=this.mChartContextPtr;if(this.mIsVirtual){return ;}if(this.mIsAnimationEnabled){X.BeginFirstFrame();this.SetProgress(0);F.call(this);X.EndFrame();X.BeginLastFrame();}F.call(this);if(this.mIsAnimationEnabled){X.EndFrame();}},GetClockwisePolygon:function V(){var X=this.mRect;return[X.GetTopLeft(),X.GetTopRight(),X.GetBottomRight(),X.GetBottomLeft()];},GetBoundingRect:function I(X){X=X||false;if(X){return this.mRect;}return new U.Rect2D({Rect2D:this.mRect});},getShapeSize:function J(){return Math.round(Math.max(0.5*this.mRect.width,0.5*this.mRect.height)+0.5);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","FormatFont","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresCls("mstrmojo.chart.common.Utility","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumAnchorPoint","EnumBoxStyle","EnumFontAlignment","EnumFontRotation","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var t=mstrmojo.chart,X=t.enums,l=t.model,d=l.enums,K=X.EnumCollectionType,u=X.EnumGraphMajorType,r=mstrmojo.VisUtility,AD=X.EnumAnchorPoint,j=X.EnumBoxStyle,f=X.EnumFontAlignment,P=X.EnumFontRotation,M=X.EnumRectExpandDirection,AH=d.EnumDSSGraphObject,V=t.common.Utility;var AM=true;var R=false,c=65280,z=0.03,U=0,Y=0,T=0.2,F=0.85,e=0,G=0;var AI=new t.Point2D(),q=new t.Point2D(),Z=new t.Point2D(),v=new t.Rect2D(),N=new t.Rect2D();function o(AX){var AW=this.mChartContextPtr,AT=true,AU,AV=AW.IsVertical();if(!AT){return 0;}if(AV){switch(AX.mObjectId){case AH.DssGraphY1Label:case AH.DssGraphY2Label:return(0.5*this.mFontHeight);case AH.DssGraphX1Label:if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){AU=this.GetTransformedRect(true);return(0.5*AU.height)+1;}return 0;default:return 0;}}if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){switch(AX.mObjectId){case AH.DssGraphX1Label:case AH.DssGraphX2Label:case AH.DssGraph2DO1Label:AU=this.GetTransformedRect(true);return(0.5*AU.height)+1;default:return 0;}}return 0;}function AB(AV){var AT=true;var AU=this.mChartContextPtr;if(AT){switch(AV.mObjectId){case AH.DssGraph2DO1Label:case AH.DssGraph2DO2Label:if(AU.IsGridChart()||AU.IsVertical()){return Math.ceil(0.25*this.mFontHeight);}return 0;case AH.DssGraphDataText:return Math.ceil(0.2*this.mFontHeight);default:return 0;}}return 0;}function AG(){if(!this.mIsShown||!this.mText.localeCompare("")){return false;}if(!this.mIsOnScreen){return false;}if(this.mChartContextPtr.mImageFormat===103){var AT=this.rect;return(AT.width>0&&AT.height>0);}return true;}function w(Ab,AY,AU){var AX=this.mSubTextHolder,Aa=this.mFormatFontPtr,AZ,AV,AT=0,AW=AX.mVecPartition[Ab];for(AV=0;AV<AY-AW;AV++){AZ=AU[AV];if(AZ.Truncated){AT+=AX.GetStringWidth(AZ.Word,Aa);}else{AT+=AX.GetOneWordWidth(AZ.Index);}if(AU.length>0){AT+=AX.GetSpaceWidth();}}return AT;}function AS(){var AV=this.mChartContextPtr,AU=this.mpParentObject;this.mFormatFontPtr=(AU===null)?AV.GetFormatFont(this.mTripleId):AU.GetFormatFont();var AT=this.mFormatFontPtr;if(AT.mFontBox!==j.BS_NOFRAME&&AV.mIsGraphMatrix===false){if(AU===null){this.mFormatFillPtr=AV.GetFormatFill(this.mTripleId,K.CT_NO_COLLECTION);if(!R){this.mFormatLinePtr=AV.GetFormatLine(this.mTripleId,K.CT_NO_COLLECTION,-1);}}else{this.mFormatFillPtr=AU.GetFormatFill();if(!R){this.mFormatLinePtr=AU.mFormatLinePtr;}}}}function D(AU){AU=AU||false;var AT=8,AV=this.mFormatFontPtr;if(AV){if(AU){AT=AV.GetStringExtent("H").Height;}else{AT=AV.GetFontExtent();}}AT=Math.floor(AT*F+0.5);return AT;}function J(){var AT=this.mFormatFontPtr,AY=this.mChartContextPtr,AV,AX,AU;this.mFontHeight=D.call(this,true);if(AY.mIsGraphMatrix){var AW=AT.evalMargins();this.mWidthEdgeMargin=AW[0]||0;this.mHeightEdgeMargin=AW[1]||0;this.mTextLineSpace=AW[2]||0;}else{AX=this.mChartContextPtr.GetGraphMajorType();AU=(AX===u.GMT_3D_SCATTER||AX===u.GMT_3D_CATEGORY);AV=AT.mFontBox!==j.BS_NOFRAME;this.mDoubleLineMargin=this.mDoubleLineMargin||0;this.mDoubleLineMargin=Math.floor(AT.mFontSize*T+0.5);if(this.mDoubleLineMargin===0){this.mDoubleLineMargin=1;}this.mWidthEdgeMargin=Math.floor(AT.mFontSize*z+0.5);if((this.mWidthEdgeMargin===0&&AV)||AU){this.mWidthEdgeMargin=1;}this.mHeightEdgeMargin=Math.floor(AT.mFontSize*U+0.5);if((this.mHeightEdgeMargin===0&&AV)||AU){this.mHeightEdgeMargin=1;}this.mTextLineSpace=Math.floor(AT.mFontSize*Y+0.5);if(this.mTextLineSpace===0){this.mTextLineSpace=1;}switch(AT.mFontBox){case j.BS_NOFRAME:break;case j.BS_SINGLE_LINE_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin;this.mHeightEdgeMargin+=this.mDoubleLineMargin;break;case j.BS_DOUBLE_LINE_FRAME:case j.BS_BEVELED_FRAME:case j.BS_REVERSE_BEVELED_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin*2;this.mHeightEdgeMargin+=this.mDoubleLineMargin*2;break;}}}function AK(){var AT=0;switch(this.mFormatFontPtr.mFontRotation){case P.FR_45:AT=45;break;case P.FR_90:AT=90;break;case P.FR_180:AT=180;break;case P.FR_270:AT=270;break;case P.FR_315:AT=315;break;default:break;}return t.gModuleMain.DegreeToRadian(-AT);}function h(){var AV;var AT=[],AU=this.rect;AI.x=AU.x+AU.width/2;AI.y=AU.y+AU.height/2;AV=AK.call(this);AT.push(new t.Point2D({x:AU.x,y:AU.y}).rotateAndClone(AI,AV));AT.push(new t.Point2D({x:AU.x+AU.width,y:AU.y}).rotateAndClone(AI,AV));AT.push(new t.Point2D({x:AU.x+AU.width,y:AU.y+AU.height}).rotateAndClone(AI,AV));AT.push(new t.Point2D({x:AU.x,y:AU.y+AU.height}).rotateAndClone(AI,AV));return AT;}function y(AZ,AV,Ab){var AX,AW,AU,AT,AY,Aa=AZ.length;for(AX=1;AX<=Aa;++AX){AW=AZ.substring(0,Aa-AX);AU=AW.concat("...");AY=this.mFormatFontPtr.GetStringExtent(AU);AT=AY.Width;if(AT<AV){Ab.Text=AU;Ab.TextWidth=AT;return true;}}return false;}function L(AY,Ah,AX,AZ){var Aj={},Ab=AY.length;AZ=AZ||false;if(AZ){var Ad=0,Ai=0,Ag=true,Ak=this.mSubTextHolder,AT=Ak.GetSpaceWidthEx(this.mFormatFontPtr),AU=this.mFormatFontPtr.GetStringExtent("...").Width,AV="",Ac=-1;if(AU>Ah){return false;}var Af;for(Af=0;Af<Ab;Af++){Ai=Ak.GetOneWordWidth(AY[Af]);if(Ad+(Af>0?AT:0)>Ah-AU){break;}if(Ad+Ai+(Af>0?AT:0)>Ah-AU){break;}AV=AV.concat(Ak.mVecStr[AY[Af]]);if(Af>0){AV=AV.concat(" ");}Ad+=Ai+(Af>0?AT:0);Ac=Af;}var Ae,Aa=0;for(Ae=0;Ae<=Ac;Ae++){Aa=AY[Ae];AX.Texts.push({Truncated:true,Index:Aa,Word:Ak.mVecStr[Aa]});}if(Af>=Ab){r.visPrint("where is the truncated word....");return true;}Ah-=Ad;if(Ag===false&&Ac!==-1){Ah-=AT;}Aa=AY[Af];var AW="";AW=AW.concat(Ak.mVecStr[Aa]);if(y.call(this,AW,Ah,Aj)){AX.Texts.push({Truncated:true,Highlighted:false,Index:Aa,Word:Aj.Text});Ad+=Aj.TextWidth;}else{r.visPrint("Should have truncated, but...");AX.Texts.push({Truncated:false,Highlighted:false,Index:Aa,Word:Ak.mVecStr[Aa]});Ad+=((Aa===0?0:AT)+Ak.GetOneWordWidth(Aa));}AX.TextWidth=Ad;AX.TextXBearing=0;return true;}if(y.call(this,AY,Ah,Aj)){AX.TextWidth=Aj.TextWidth;AX.TextXBearing=0;AX.Texts.push({Truncated:true,Highlighted:false,Index:-1,Word:Aj.Text});return true;}return false;}function AQ(Ag,Ab){var AT=this.mChartContextPtr,Aa=this.mSubTextHolder,AV={TextWidth:0,TextXBearing:0,Texts:[]},AX,AU,AW;Ab=Ab||false;AU=Aa.GetOneLineWidth(Ag);AX=Aa.GetOneLineString(Ag);if(AU<=this.rect.width+(AM?4:0)){AV.TextXBearing=Aa.GetOneLineXBearing(Ag);AV.TextWidth=AU;if(Ab){var AY,Af=-1,Ac=Aa.GetOneLineWords(Ag);for(AY=0;AY<Ac.length;AY++){Af=Ac[AY];AV.Texts.push({Index:Af,Word:Aa.mVecStr[Af],Highlighted:false,Truncated:false});}}else{AV.Texts.push({Index:-1,Word:AX,Highlighted:false,Truncated:false});}return AV;}var AZ=AT.mIsGraphMatrix,Ae=Ab?Aa.GetOneLineWords(Ag):AX;if(AZ&&!AT.isUADataAreaOutput()){if(this.mFormatFontPtr.mFontRotation===P.FR_90){var Ad=this.GetBoundingRect(true);if(Ad.y+AU>AT.mGraphHeight){if(L.call(this,Ae,AT.mGraphHeight,AV,Ab)){this.mIsTruncated=true;return AV;}}}if(this.rect.x<0&&AU>this.rect.width+this.rect.x){if(L.call(this,Ae,this.rect.width+this.rect.x,AV,Ab)){this.mIsTruncated=true;return AV;}}}if(L.call(this,Ae,this.rect.width,AV,Ab)){this.mIsTruncated=true;return AV;}this.mIsTruncated=true;AW=this.mFormatFontPtr.GetStringExtent(AV.Text);AV.TextWidth=AW.Width;AV.TextXBearing=0;AV.Texts.push({Index:-1,Word:AZ?"":"...",Highlighted:false,Truncated:true});return AV;}function O(Ae,Ah,Ac){var AW=this.mChartContextPtr,Aa,Ad,AT,Ag,AX=this.mFormatFontPtr,Ab;Ac=Ac||false;Aa=AQ.call(this,Ah,Ac);Ad=Aa.Text;AT=Aa.Texts;Ab=Aa.TextWidth;switch(this.mFormatFontPtr.mFontAlignment){case f.FA_LEFT:Ae.x+=this.mWidthEdgeMargin;break;case f.FA_CENTER:Ae.x+=Math.floor((this.rect.width-Ab)/2+0.5);break;case f.FA_RIGHT:Ae.x+=Math.floor(this.rect.width-Ab-this.mWidthEdgeMargin+0.5);break;}if(AW.mIsGraphMatrix&&!AW.isUADataAreaOutput()){if(this.rect.x<0&&this.mIsTruncated){Ae.x=this.rect.width+this.rect.x-Ab+0.5;}if(AX.mFontRotation===P.FR_90){var AU=this.GetBoundingRect();if(AU.y+AU.height>AW.mGraphHeight&&this.mIsTruncated){var Ai=this.mSubTextHolder.GetOneLineWidth(Ah),Ak=Ai-Ab;Ae.x-=Ak/2;Ae.x+=Ak;}}}if(AT===undefined){return ;}e=AB.call(this,this.mTripleId);G=o.call(this,this.mTripleId);var Aj={x:Ae.x,y:Ae.y-e},Af,AV,AY;for(Ag=0;Ag<AT.length;Ag++){Ad=AT[Ag];Ae.x=Aj.x;Ae.y=Aj.y;if(Ag>0){AY=w.call(this,Ah,Ad.Index,AT);Ae.x+=AY;}AV={};if(G!==0){AV={BaselineOffset:G};}Af=Ae;if(Ad.Highlighted){var AZ=AX.mFontColor;AX.mFontColor=c;AW.AddFormatedText(AX,Af,Ad.Word,AV);AX.mFontColor=AZ;}else{AW.AddFormatedText(AX,Af,Ad.Word,AV);}}}function W(){var AV,AZ=this.mChartContextPtr,AW=false;if(AZ.mIsGraphMatrix){if(this.showBBox){AV=h.call(this);AZ.DrawPolygon(AV,true);if(this.mTripleId.mObjectId===AH.DssGraphDataText){AW=true;}this.mChartContextPtr.FinishTextBoundingBox(AV,this.BBoxColor,AW);}else{if(V.isValidNumber(this.BBoxColor)){var AY=true,AX=true;if(AY){var AT=1,AU=new t.FormatFont({Font:this.mFormatFontPtr});AU.mStrokeColor=this.BBoxColor;AU.mStrokeWidth=this.mChartContextPtr.isCombinationChart()?0.01:0.5;if(AX){AU.mFontStyle=AT;}this.mFormatFontPtr=AU;}}}}else{if(R||this.mFormatFontPtr.mFontBox!==j.BS_NOFRAME){AV=h.call(this);AZ.DrawPolygon(AV,false,null,null,null);this.ApplyFillFormat();}}return this.mFormatFontPtr;}mstrmojo.chart.TextObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.TextObject",clientDrag:false,rect:null,mFormatFontPtr:null,mText:"",mSubTextHolder:null,mIsShown:true,mWidthEdgeMargin:0,mHeightEdgeMargin:0,mTextLineSpace:0,mFontHeight:0,mIsRectCalculated:false,mTextWidthLimit:-1,mIsStringent:true,mLineCount:-1,mIsTruncated:false,mOnMarker:false,mIsOnScreen:true,init:function AJ(AT){AT.hasLine=false;AT.hasFill=false;if(AT.hasLine||AT.hasFill){this._super(AT);}else{this.mpParentObject=AT.GraphCollectionObject||null;this.mTripleId=AT.TripleId||t.gNullTripleId;this.mpManager=AT.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(AT.Shape){this.mShapeType=AT.Shape;}}if(AT.Identity!==undefined&&AT.Identity!==null){this.identity=AT.Identity;}this.rect=this.rect||new t.Rect2D();this.mSubTextHolder=new t.SubTextHolder();if(AT&&AT.OnMarker){this.mOnMarker=AT.OnMarker;}AS.call(this);J.call(this);},GetFormatFont:function AP(){return this.mFormatFontPtr;},SetText:function AR(AT,AV){if(AV===undefined){AV=-1;}this.mText=AT;this.mIsRectCalculated=false;if(this.mText!==""){var AU=this.mSubTextHolder;AU.Clear();AU.ParseText(this.mText," ",AV);AU.UpdateText(this.mChartContextPtr,this.mFormatFontPtr);}},GetBoundingRectEx:function AO(AV){var AT=this.mFormatFontPtr.mFontRotation;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AU=this.rect;if(AT!==P.FR_NORMAL){if(AT===P.FR_90||AT===P.FR_270){AV.Reset(AU.x,AU.y,AU.width,AU.height);var AX=AU.x+0.5*AU.width,AW=AU.y+0.5*AU.height;AV.width=this.rect.height;AV.height=this.rect.width;AV.x=AX-0.5*AV.width;AV.y=AW-0.5*AV.height;}else{var AY=this.GetBoundingRectFromPolygon(h.call(this));AV.ResetRect(AY);}}else{AV.Reset(AU.x,AU.y,AU.width,AU.height);}},GetBoundingRect:function AA(AT){var AV=this.mFormatFontPtr.mFontRotation,AU;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}if(AV!==P.FR_NORMAL){if(AV===P.FR_90||AV===P.FR_270){AU=new t.Rect2D({Rect2D:this.rect});var AW=this.rect,AY=AW.x+0.5*AW.width,AX=AW.y+0.5*AW.height;AU.width=this.rect.height;AU.height=this.rect.width;AU.x=AY-0.5*AU.width;AU.y=AX-0.5*AU.height;}else{AU=this.GetBoundingRectFromPolygon(h.call(this));}}else{AT=AT||false;if(AT){return this.rect;}AU=new t.Rect2D({Rect2D:this.rect});}return AU;},GetClockwisePolygon:function I(){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}return h.call(this);},CalculateDeviceRect:function AL(){var AZ=this.mSubTextHolder,Ab=this.rect,AT=this.mFontHeight,AW=this.mTextWidthLimit,AY=this.mTextLineSpace,AX=this.mWidthEdgeMargin,Aa=this.mHeightEdgeMargin,AU=1,AV=this.mLineCount;if(Ab.width===0||Ab.height===0){if(AW===-1&&AV===-1){AU=AZ.GetLineCount();Ab.width=AZ.GetMaxWidth();Ab.height=(AT+(AU===1?0:AY))*AU;Ab.Explode(AX,Aa);}else{if(AW!==-1&&AV===-1){AZ.PartitionBy(AW,this.mIsStringent);AU=AZ.GetLineCount();Ab.height=(AT+(AU===1?0:AY))*AU+Aa*2;if(this.mIsStringent){Ab.width=Math.min(AZ.GetMaxWidth(),AW)+AX*2;}else{Ab.width=AZ.GetMaxWidth()+AX*2;}}else{if(AW===-1&&AV!==-1){AZ.SetLineCount(AV);AU=AZ.GetLineCount();Ab.width=AZ.GetMaxWidth();Ab.height=(AT+(AU===1?0:AY))*AU;Ab.Explode(AX,Aa);}else{AZ.SetLineCount(AV,AW);AU=AZ.GetLineCount();Ab.height=(AT+(AU===1?0:AY))*AU+Aa*2;if(this.mIsStringent){Ab.width=Math.min(AZ.GetMaxWidth(),AW)+AX*2;}else{Ab.width=AZ.GetMaxWidth()+AX*2;}}}}}else{if(AW===-1){if(AZ.GetMaxWidth()>Ab.width){AZ.PartitionBy(Ab.width);}}else{if(AZ.GetMaxWidth()>AW){AZ.PartitionBy(AW,this.mIsStringent);if(this.mIsStringent){Ab.width=Math.min(AZ.GetMaxWidth(),AW)+AX*2;}else{Ab.width=AZ.GetMaxWidth()+AX*2;}}}AU=AZ.GetLineCount();Ab.height=(AT+(AU===1?0:AY))*AU+Aa*2;}this.mIsRectCalculated=true;},GetLineCount:function C(){return this.mSubTextHolder.GetLineCount();},SetTextWidthLimit:function x(AU,AT){if(AT===undefined){AT=true;}this.mTextWidthLimit=AU;this.mIsStringent=AT;this.mIsRectCalculated=false;},SetRect:function B(AT){this.rect.copy(AT);},SetRotation:function AC(AV){var AU=this.mFormatFontPtr.mFontRotation;if(AV!==AU){var AT=new t.FormatFont({Font:this.mFormatFontPtr});AT.mFontRotation=AV;this.mFormatFontPtr=AT;}},MoveTo:function s(AV,AU,AT){AT=AT||AD.TOP_LEFT;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AW=this.rect;switch(AT){case AD.TOP_LEFT:AW.x=AV;AW.y=AU;break;case AD.CENTER:AW.x=AV-AW.width/2;AW.y=AU-AW.height/2;break;case AD.TOP_MIDDLE:AW.x=AV-AW.width/2;AW.y=AU;break;case AD.TOP_RIGHT:AW.x=AV-AW.width;AW.y=AU;break;case AD.LEFT_MIDDLE:AW.x=AV;AW.y=AU-AW.height/2;break;case AD.RIGHT_MIDDLE:AW.x=AV-AW.width;AW.y=AU-AW.height/2;break;case AD.BOTTOM_LEFT:AW.x=AV;AW.y=AU-AW.height;break;case AD.BOTTOM_MIDDLE:AW.x=AV-AW.width/2;AW.y=AU-AW.height;break;case AD.BOTTOM_RIGHT:AW.x=AV-AW.width;AW.y=AU-AW.height;break;}},MoveToCenter:function AF(AU,AT){this.rect.x=Math.round(AU-this.rect.width/2);this.rect.y=Math.round(AT-this.rect.height/2);},GetTransformedRect:function H(AU){var AT,AX,AV;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AW=this.mFormatFontPtr.mFontRotation;if(AW===P.DssGraphFontRotate45||AW===P.DssGraphFontRotate315){AV=new t.Rect2D({Rect2D:this.rect});AT=new t.Point2D({x:AV.x+AV.width*0.5,y:AV.y+AV.height*0.5});AX=(AW===P.DssGraphFontRotate45)?1:-1;AV.x=Math.floor((AT.x-AX*AT.y)*Math.SQRT1_2+(AV.x-AT.x)+0.5);AV.y=Math.floor((AX*AT.x+AT.y)*Math.SQRT1_2+(AV.y-AT.y)+0.5);}else{AV=this.GetBoundingRect(AU);}return AV;},GetTransformedRectEx:function AN(AV){var AX,AW,AU;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AT=this.mFormatFontPtr.mFontRotation;if(AT===P.FR_45||AT===P.FR_315){AV.ResetRect(this.rect);AX=AV.x+AV.width*0.5;AW=AV.y+AV.height*0.5;AU=(AT===P.FR_45)?1:-1;AV.x=Math.floor((AX-AU*AW)*Math.SQRT1_2+(AV.x-AX)+0.5);AV.y=Math.floor((AU*AX+AW)*Math.SQRT1_2+(AV.y-AW)+0.5);}else{this.GetBoundingRectEx(AV);}},HasOverlapForSameRotation:function A(AT,AU,AW){AU=AU||0;AW=AW||M.REC_EXP_INVALID;var AV=this.GetTransformedRect(true),AX=AT.GetTransformedRect(true),AY=AU/2;if(AY>0){v.ResetRect(AV);N.ResetRect(AX);v.Expand(AY,AW);N.Expand(AY,AW);return v.HasIntersection(N);}return AV.HasIntersection(AX);},strokeBBox:function E(AU){var AT=false,AV=this.mChartContextPtr;if(AU===undefined){if(AT){AU=AV.getDefaultContrastColor();}else{AU=AV.getDefaultThemeColor();}}this.BBoxColor=AU;},Draw:function AE(){var AZ=this.mChartContextPtr,AX=this.mFormatFontPtr,AU,AY,AW,AV,AT=false;if(AG.call(this)===false){return ;}if(isNaN(this.rect.x)||isNaN(this.rect.y)){return ;}this.mIsTruncated=false;AX=W.call(this);AX.ApplyFontFormat(AZ,false);switch(this.mTripleId.mObjectId){case AH.DssGraph2DO1Label:case AH.DssGraph2DO2Label:AT=true;break;default:AT=false;break;}if(AX.mFontRotation!==P.FR_NORMAL){AZ.saveState();Z.x=this.rect.x+this.rect.width/2;Z.y=this.rect.y+this.rect.height/2;AZ.Rotate(Z,AK.call(this));}AU=this.mSubTextHolder.GetLineCount();AY=this.mFontHeight+this.mTextLineSpace;AW=Math.max((this.rect.height-AY*AU)/2,0);for(AV=0;AV<AU;AV++){q.x=this.rect.x;q.y=this.rect.y+AW+(AV+1)*this.mFontHeight;O.call(this,q,AV,AT);}if(AX.mFontRotation!==P.FR_NORMAL){AZ.RestoreState();}AZ.FinishDrawText(this.mTripleId,{OnMarker:this.mOnMarker,Tooltip:this.mIsTruncated?this.mText:null,Identities:this.IdentityMap,Identity:this.identity});},getFormatFromParent:function p(){var AT=this.mpParentObject;this.mFormatLinePtr=AT.mFormatLinePtr;this.mFormatFillPtr=AT.GetFormatFill();this.mFormatFontPtr=AT.GetFormatFont();},GetBoundingRectNoRotation:function b(AT){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}AT=AT||false;if(AT){return this.rect;}return new t.Rect2D({Rect2D:this.rect});},RestoreWidthAndHeight:function S(){this.mSubTextHolder.ParseText(this.mText," ",-1);this.rect.width=0;this.rect.height=0;this.mTextWidthLimit=-1;this.mIsStringent=true;this.mLineCount=-1;this.CalculateDeviceRect();},Restore:function g(AT){if(AT===undefined){this.RestoreWidthAndHeight();return ;}this.rect.width=0;this.rect.height=0;this.rect.x=0;this.rect.y=0;this.mTextWidthLimit=(AT.TextWidthLimit!==undefined)?AT.TextWidthLimit:-1;this.mLineCount=(AT.LineCount!==undefined)?AT.LineCount:-1;this.mIsStringent=(AT.Stringent!==undefined)?AT.Stringent:true;if(AT.Restroke!==undefined&&AT.Restroke){this.SetText(this.mText,this.mTextWidthLimit);}},GetOneLineHeight:function a(){return this.mFontHeight;},getWidthHeightMargin:function k(AT){return AT?this.mWidthEdgeMargin:this.mHeightEdgeMargin;},possibleTruncate:function n(){return this.mTextWidthLimit>0&&this.rect.width>this.mTextWidthLimit&&!this.mIsStringent;},getDevicePolygon:function Q(){return h.call(this);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Angle","Rect2D","ChartContext","ShapeObject","ImageMap","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumObjectShape","EnumBoundingRectType","EnumRadientGradientUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphFillBevelEffect");var f=mstrmojo.chart,O=f.enums,AL=O.EnumLineJoinType,D=O.EnumBoundingRectType,o=O.EnumRadientGradientUsage,n=f.gModuleMain,Y=f.model,R=Y.enums,j=R.EnumDSSGraphFillBevelEffect,AH=0,v=0,g=1,I=8;function Z(){var AO=this.mFormatFillPtr;AO.MakeDarker(0.75);this.ApplyFillFormat(true);AO.RestoreColor();}function A(){if(this.mIsOutline){this.ApplyOutlineFormat();}else{var AO=this.mBoundingRectType;if((AO===D.BRT_TOP)||(AO===D.BRT_BOTTOM)){this.ApplyFillFormat();}else{Z.call(this);}this.ApplyLineFormat();}}function X(){var AP=n.mGlowWidth,AQ=this.mChartContextPtr,AO=this.mSliceInfo;AQ.DrawRingSector(AO.mCenter,AO.mRadius+AP,AO.mRadius,n.DegreeToRadian(AO.mStartAngle),n.DegreeToRadian(AO.mEndAngle));AQ.saveState();AQ.Clip();AQ.RestoreState();}function L(){var AR=this.mChartContextPtr,AQ=this.mSliceInfo,AP=new f.Point2D({x:AQ.mCenter.x,y:AQ.mCenter.y-AQ.mDepth}),AO=AQ.mRadius*(AQ.mRingPieFactor*0.01);if(this.mIsOutline){AR.drawArc(AP,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AR.drawArc(AP,AO,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AR.DrawRingSector(AP,AQ.mRadius,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);this.ApplyFillFormat();AR.drawArc(AP,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AR.drawArc(AP,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function z(){var AQ=this.mChartContextPtr,AP=this.mSliceInfo,AO=AP.mRadius*(AP.mRingPieFactor*0.01);if(this.mIsOutline){AQ.drawArc(AP.mCenter,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AQ.drawArc(AP.mCenter,AO,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AQ.DrawRingSector(AP.mCenter,AP.mRadius,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);this.ApplyFillFormat();AQ.drawArc(AP.mCenter,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AQ.drawArc(AP.mCenter,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function AC(){var AQ=this.mSliceInfo,AP=new f.Point2D({x:AQ.mCenter.x,y:AQ.mCenter.y-AQ.mDepth});var AO=AQ.mRadius*(AQ.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AP,AQ.mRadius,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function S(){var AP=this.mSliceInfo,AO=AP.mRadius*(AP.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AP.mCenter,AP.mRadius,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function l(AQ){var AS=this.mSliceInfo,AR,AW=0;if(AQ===v){AR=AS.mStartAngle%360;if((AR<=90)||(AR>=270)){return ;}AW=this.mStartAngleRadian;}else{AR=AS.mEndAngle%360;if((AR>=90)&&(AR<=270)){return ;}AW=this.mEndAngleRadian;}var AU=AS.mRadius;var AT=AS.mRadius;AU*=Math.cos(AW);AT*=Math.sin(AW);var AY=new f.Point2D({x:AS.mCenter.x,y:AS.mCenter.y});AY.x+=AU;AY.y+=AT;var AV=new f.Point2D({x:AS.mCenter.x,y:AS.mCenter.y});AV.x+=AU*(AS.mRingPieFactor*0.01);AV.x+=AT*(AS.mRingPieFactor*0.01);var AP=[];AP.push(AV);AP.push(AY);var AO=new f.Point2D({x:AY.x,y:AY.y-AS.mDepth});AP.push(AO);var AX=new f.Point2D({x:AV.x,y:AV.y-AS.mDepth});AP.push(AX);this.mChartContextPtr.DrawPolygon(AP);if(AQ===v){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function F(AO,AS,AU){var AT=this.mSliceInfo;if(this.mIsOutline&&AO){return ;}var AR=n.DegreeToRadian(AS);var AQ=n.DegreeToRadian(AU);var AP=AT.mRadius;if(AO){AP*=(AT.mRingPieFactor*0.01);}this.mChartContextPtr.DrawCylinder(AT.mCenter,AP,AR,AQ,AT.mDepth);if(AO){this.SetBoundingRectType(D.BRT_RING_CYLINDER);}else{this.SetBoundingRectType(D.BRT_CYLINDER);}this.SetCylinderStart(AS);this.SetCylinderEnd(AU);A.call(this);}function N(){var AQ=this.mSliceInfo,AP=AQ.mStartAngle,AO=AQ.mEndAngle;if(AP<180){if(AO<180){F.call(this,false,AP,AO);}else{if(AO<=360){F.call(this,true,180,AO);F.call(this,false,AP,180);}else{F.call(this,true,180,360);F.call(this,false,AP,180);F.call(this,false,360,AO);}}}else{if(AP<360){if(AO<=360){F.call(this,true,AP,AO);}else{if(AO<540){F.call(this,true,AP,360);F.call(this,false,360,AO);}else{F.call(this,true,AP,360);F.call(this,true,540,AO);F.call(this,false,360,540);}}}else{if(AP<540){if(AO<540){F.call(this,false,AP,AO);}else{F.call(this,true,540,AO);F.call(this,false,AP,540);}}else{F.call(this,true,AP,AO);}}}}function B(){N.call(this);l.call(this,v);l.call(this,g);}function x(){var AO=this.mSliceInfo;if(this.mOneSeries){if(AO.mIs2DCircular){z.call(this);}else{N.call(this);L.call(this);}this.mChartContextPtr.FinishDrawRing(AO.mCenter,AO.mRadius,AO.mRadius*AO.mRingPieFactor/100,this.mTripleId,true);}else{if(AO.mIs2DCircular){S.call(this);}else{B.call(this);AC.call(this);}this.mChartContextPtr.FinishDrawRingPieSlice(AO.mCenter,AO.mRadius,AO.mRadius*AO.mRingPieFactor/100,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId);}}function G(){var AP=this.mSliceInfo,AO=new f.Point2D({x:AP.mCenter.x,y:AP.mCenter.y-AP.mDepth});this.mChartContextPtr.drawArc(AO,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function H(){var AO=this.mSliceInfo;this.mChartContextPtr.drawArc(AO.mCenter,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function k(){var AP=this.mSliceInfo,AO=new f.Point2D({x:AP.mCenter.x,y:AP.mCenter.y-AP.mDepth});this.mChartContextPtr.DrawSector(AO,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function h(){var AO=this.mSliceInfo;this.mChartContextPtr.DrawSector(AO.mCenter,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function AN(AP){var AU=this.mSliceInfo,AT,AS=0;if(AP===v){AT=AU.mStartAngle%360;if((AT<=90)||(AT>=270)){return ;}AS=this.mStartAngleRadian;}else{AT=AU.mEndAngle%360;if((AT>=90)&&(AT<=270)){return ;}AS=this.mEndAngleRadian;}var AR=new f.Point2D({x:AU.mCenter.x,y:AU.mCenter.y});AR.x+=AU.mRadius*Math.cos(AS);AR.y+=AU.mRadius*Math.sin(AS);var AQ=[];AQ.push(AU.mCenter);AQ.push(AR);var AO=new f.Point2D({x:AR.x,y:AR.y-AU.mDepth});AQ.push(AO);var AV=new f.Point2D({x:AU.mCenter.x,y:AU.mCenter.y-AU.mDepth});AQ.push(AV);this.mChartContextPtr.DrawPolygon(AQ);if(AP===v){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function AD(){var AQ=this.mSliceInfo,AP=AQ.mStartAngle,AO=AQ.mEndAngle;if(AP<180){if(AO<180){F.call(this,false,AP,AO);}else{if(AO<=360){F.call(this,false,AP,180);}else{F.call(this,false,AP,180);F.call(this,false,360,AO);}}}else{if(AP<360){if(AO<=360){AH++;}else{if(AO<540){F.call(this,false,360,AO);}else{F.call(this,false,360,540);}}}else{if(AP<540){if(AO<540){F.call(this,false,AP,AO);}else{F.call(this,false,AP,540);}}else{AH++;}}}}function M(){AD.call(this);AN.call(this,v);AN.call(this,g);}function P(){var AO=this.mSliceInfo;if(this.mOneSeries){if(AO.mIs2DCircular){H.call(this);}else{AD.call(this);G.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AO.mCenter,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,true,this.mIsWhitenOuterBorder);}else{if(AO.mIs2DCircular){h.call(this);}else{M.call(this);k.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AO.mCenter,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,false,this.mIsWhitenOuterBorder);}}function AK(AP){var AS=this.mSliceInfo,AO={mStartAngle:AS.mStartAngle,mEndAngle:AS.mEndAngle};this.ConvertAngle(AO);if(AO.mStartAngle>AO.mEndAngle){var AQ=[{mStartAngle:0,mEndAngle:AO.mEndAngle},{mStartAngle:AO.mStartAngle,mEndAngle:360}];if(AP.mStartAngle>AP.mEndAngle){return true;}return this.GetIntersectionAngle(AP,AQ[0])||this.GetIntersectionAngle(AP,AQ[1]);}if(AP.mStartAngle>AP.mEndAngle){var AR=[{mStartAngle:0,mEndAngle:AP.mEndAngle},{mStartAngle:AP.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AO,AR[0])||this.GetIntersectionAngle(AO,AR[1]);}return this.GetIntersectionAngle(AO,AP);}function c(Ab){var Ad,AU,AV=this.mSliceInfo,AW=AV.mCenter,Ac=AV.mRadius;if(AV.mIs2DCircular){Ad=(Ab.x-AW.x);AU=(Ab.y-AW.y);var AS=Math.sqrt(Ad*Ad+AU*AU);if(((Ac-AS)>-n.mTolerance)&&((AS-(Ac*AV.mRingPieFactor/100))>-n.mTolerance)){var Ae=n.RadianToDegree(Math.acos(Ad/AS));if(AU<-n.mTolerance){Ae=360-Ae;}if((Ae>=AV.mStartAngle)&&(Ae<=AV.mEndAngle)){return true;}Ae+=360;if((Ae>=AV.mStartAngle)&&(Ae<=AV.mEndAngle)){return true;}return false;}return false;}Ad=(Ab.x-AW.x);var AR,AO,Aa,AQ,AX,Af=(Ac*Ac-Ad*Ad),AT=Ac*Ac*(AV.mRingPieFactor*AV.mRingPieFactor/10000)-Ad*Ad;if(Af<-n.mTolerance){return false;}if(AT<-n.mTolerance){AR=n.RadianToDegree(Math.asin(Math.sqrt(Af)/Ac));AU=(Ab.y-(AW.y-AV.mDepth));AQ=new f.Angle();AX=new f.Angle();if(Ad>n.mTolerance){AQ.mEndAngle=AR;AQ.mStartAngle=360-AR;AO=Math.sqrt(Ad*Ad+AU*AU);if(AU>n.mTolerance){AX.mEndAngle=n.RadianToDegree(Math.asin(AU/AO));}else{AX.mEndAngle=360+n.RadianToDegree(Math.asin(AU/AO));}AU-=AV.mDepth;AO=Math.sqrt(Ad*Ad+AU*AU);if(AU>n.mTolerance){AX.mStartAngle=n.RadianToDegree(Math.asin(AU/AO));}else{AX.mStartAngle=360+n.RadianToDegree(Math.asin(AU/AO));}}else{AQ.mStartAngle=180-AR;AQ.mEndAngle=180+AR;AO=Math.sqrt(Ad*Ad+AU*AU);AX.mStartAngle=180-n.RadianToDegree(Math.asin(AU/AO));AU-=AV.mDepth;AO=Math.sqrt(Ad*Ad+AU*AU);AX.mEndAngle=180-n.RadianToDegree(Math.asin(AU/AO));}Aa=new f.Angle();if(!this.GetIntersectionConvertedAngles(AQ,AX,Aa)){return false;}return AK.call(this,Aa);}AR=n.RadianToDegree(Math.asin(Math.sqrt(Af)/Ac));var AP=n.RadianToDegree(Math.asin(Math.sqrt(AT)/(Ac*AV.mRingPieFactor)));AU=(Ab.y-(AW.y-AV.mDepth));var AZ=new f.Angle();var AY=new f.Angle();AX={};if(Ad>n.mTolerance){AZ.mStartAngle=360-AR;AZ.mEndAngle=360-AP;AY.mStartAngle=AP;AY.mEndAngle=AR;AO=Math.sqrt(Ad*Ad+AU*AU);if(AU>n.mTolerance){AX.mEndAngle=n.RadianToDegree(Math.asin(AU/AO));}else{AX.mEndAngle=360+n.RadianToDegree(Math.asin(AU/AO));}AU-=AV.mDepth;AO=Math.sqrt(Ad*Ad+AU*AU);if(AU>n.mTolerance){AX.mStartAngle=n.RadianToDegree(Math.asin(AU/AO));}else{AX.mStartAngle=360+n.RadianToDegree(Math.asin(AU/AO));}}else{AZ.mStartAngle=180-AR;AZ.mEndAngle=180-AP;AY.mStartAngle=180+AP;AY.mEndAngle=180+AR;AO=Math.sqrt(Ad*Ad+AU*AU);AX.mStartAngle=180-n.RadianToDegree(Math.asin(AU/AO));AU-=AV.mDepth;AO=Math.sqrt(Ad*Ad+AU*AU);AX.mEndAngle=180-n.RadianToDegree(Math.asin(AU/AO));}Aa=[new f.Angle(),new f.Angle()];if(!this.GetIntersectionConvertedAngles(AZ,AX,Aa[0])){if(!this.GetIntersectionConvertedAngles(AY,AX,Aa[1])){return false;}return AK.call(this,Aa[1]);}if(!this.GetIntersectionConvertedAngles(AY,AX,Aa[1])){return AK.call(this,Aa[0]);}return(AK.call(this,Aa[0])||AK.call(this,Aa[1]));}function t(AT){var AW,AV,AO,AS=this.mSliceInfo,AZ=AS.mCenter,AR=AS.mRadius;if(AS.mIs2DCircular){AW=(AT.x-AZ.x);AV=(AT.y-AZ.y);AO=Math.sqrt(AW*AW+AV*AV);if((AR-AO)>-n.mTolerance){if(AO<n.mTolerance){return false;}var AP=n.RadianToDegree(Math.acos(AW/AO));if(AV<-n.mTolerance){AP=360-AP;}if((AP>=AS.mStartAngle)&&(AP<=AS.mEndAngle)){return true;}AP+=360;if((AP>=AS.mStartAngle)&&(AP<=AS.mEndAngle)){return true;}return false;}return false;}AW=(AT.x-AZ.x);var Ab,AX,AY,Aa=AR*AR-AW*AW;if(Aa<-n.mTolerance){return false;}var AQ=n.RadianToDegree(Math.asin(Math.sqrt(Aa)/AR));AV=(AT.y-(AZ.y-AS.mDepth));Ab={mStartAngle:0,mEndAngle:0};AX={mStartAngle:0,mEndAngle:0};if(AW>n.mTolerance){Ab.mEndAngle=AQ;Ab.mStartAngle=360-AQ;AY=Math.sqrt(AW*AW+AV*AV);if(AV>n.mTolerance){AX.mEndAngle=n.RadianToDegree(Math.asin(AV/AY));}else{AX.mEndAngle=360+n.RadianToDegree(Math.asin(AV/AY));}AV-=AS.mDepth;AY=Math.sqrt(AW*AW+AV*AV);if(AV>n.mTolerance){AX.mStartAngle=n.RadianToDegree(Math.asin(AV/AY));}else{AX.mStartAngle=360+n.RadianToDegree(Math.asin(AV/AY));}}else{Ab.mStartAngle=180-AQ;Ab.mEndAngle=180+AQ;AY=Math.sqrt(AW*AW+AV*AV);AX.mStartAngle=180-n.RadianToDegree(Math.asin(AV/AY));AV-=AS.mDepth;AY=Math.sqrt(AW*AW+AV*AV);AX.mEndAngle=180-n.RadianToDegree(Math.asin(AV/AY));}var AU={mStartAngle:0,mEndAngle:0};if(!this.GetIntersectionConvertedAngles(Ab,AX,AU)){return false;}return AK.call(this,AU);}function AA(AU){var Ae,AR=this.mSliceInfo,AY=AR.mDepth,AS=AR.mCenter,Ac=AR.mRadius,AQ=n.DegreeToRadian(AR.mStartAngle),AV=n.DegreeToRadian(AR.mEndAngle);var Ab=new f.Point2D({x:AS.x+Ac*Math.cos(AQ),y:AS.y+Ac*Math.sin(AQ)});var AW=new f.Point2D({x:AS.x+Ac*Math.cos(AV),y:AS.y+Ac*Math.sin(AV)});if(this.mBoundingRectType===D.BRT_TOP){Ab.y-=AY;AW.y-=AY;}var Ag=new f.Point2D({x:Math.min(Ab.x,AW.x),y:Math.min(Ab.y,AW.y)});var AX=new f.Point2D({x:Math.max(Ab.x,AW.x),y:Math.max(Ab.y,AW.y)});if(AR.mIsRingPie){Ae=Ac*(AR.mRingPieFactor/100);var AP=new f.Point2D({x:AS.x+Ae*Math.cos(AQ),y:AS.y+Ae*Math.sin(AQ)});var Aa=new f.Point2D({x:AS.x+Ae*Math.cos(AV),y:AS.y+Ae*Math.sin(AV)});if(this.mBoundingRectType===D.BRT_TOP){AP.y-=AY;Aa.y-=AY;}Ag.x=Math.min(Ag.x,AP.x);Ag.y=Math.min(Ag.y,AP.y);AX.x=Math.max(AX.x,AP.x);AX.y=Math.max(AX.y,AP.y);Ag.x=Math.min(Ag.x,Aa.x);Ag.y=Math.min(Ag.y,Aa.y);AX.x=Math.max(AX.x,Aa.x);AX.y=Math.max(AX.y,Aa.y);}else{Ag.x=Math.min(Ag.x,AS.x);AX.x=Math.max(AX.x,AS.x);var AZ=AS.y;if(this.mBoundingRectType===D.BRT_TOP){AZ-=AY;}Ag.y=Math.min(Ag.y,AZ);AX.y=Math.max(AX.y,AZ);}var AO;for(AO=(AR.mStartAngle/90+1)*90;AO<AR.mEndAngle;(AO+=90)){var Ad=n.DegreeToRadian(AO);var Af=new f.Point2D({x:AS.x+Ac*Math.cos(Ad),y:AS.y+Ac*Math.sin(Ad)});if(this.mBoundingRectType===D.BRT_TOP){Af.y-=AY;}Ag.x=Math.min(Ag.x,Af.x);Ag.y=Math.min(Ag.y,Af.y);AX.x=Math.max(AX.x,Af.x);AX.y=Math.max(AX.y,Af.y);if(AR.mIsRingPie){Ae=Ac*(AR.mRingPieFactor/100);var AT=new f.Point2D({x:AS.x+Ae*Math.cos(Ad),y:AS.y+Ae*Math.sin(Ad)});if(this.mBoundingRectType===D.BRT_TOP){AT.y-=AY;}Ag.x=Math.min(Ag.x,AT.x);Ag.y=Math.min(Ag.y,AT.y);AX.x=Math.max(AX.x,AT.x);AX.y=Math.max(AX.y,AT.y);}}AU.x=Ag.x;AU.y=Ag.y;AU.width=AX.x-Ag.x;AU.height=AX.y-Ag.y;}function K(AX){var AV=this.mSliceInfo,AQ=AV.mDepth,Ab=AV.mCenter,Aa=AV.mRadius;if(this.mBoundingRectType===D.BRT_RING_CYLINDER){Aa*=(AV.mRingPieFactor/100);}var AU=n.DegreeToRadian(this.mCylinderStart);var AP=n.DegreeToRadian(this.mCylinderEnd);var AO=new f.Point2D({x:Ab.x+Aa*Math.cos(AU),y:Ab.y+Aa*Math.sin(AU)});var AT=new f.Point2D({x:Ab.x+Aa*Math.cos(AP),y:Ab.y+Aa*Math.sin(AP)});var AW=new f.Point2D({x:Math.min(AO.x,AT.x),y:Math.min(AO.y-AQ,AT.y-AQ)});var AR=new f.Point2D({x:Math.max(AO.x,AT.x),y:Math.max(AO.y,AT.y)});var AS;for(AS=(this.mCylinderStart/90+1)*90;AS<this.mCylinderEnd;(AS+=90)){var AZ=n.DegreeToRadian(AS);var AY=new f.Point2D({x:Ab.x+Aa*Math.cos(AZ),y:Ab.y+Aa*Math.sin(AZ)});AW.x=Math.min(AW.x,AY.x);AW.y=Math.min(AW.y,(AY.y-AQ));AR.x=Math.max(AR.x,AY.x);AR.y=Math.max(AR.y,AY.y);}AX.x=AW.x;AX.y=AW.y;AX.width=AR.x-AW.x;AX.height=AR.y-AW.y;}function r(AQ){var AV=this.mSliceInfo,AT=AV.mRadius,AO=AV.mDepth,AS=AV.mCenter,AR=AV.mRingPieFactor,AU=(this.mBoundingRectType===D.BRT_START_RECT)?AV.mStartAngle:AV.mEndAngle;if(AU>=360){AU-=360;}var AP=n.DegreeToRadian(AU);if(AV.mIsRingPie){AQ.width=(AT*(1-AR/100)*Math.abs(Math.cos(AP)));AQ.height=(AO+AT*(1-AR/100)*Math.abs(Math.sin(AP)));}else{AQ.width=(AT*Math.abs(Math.cos(AP)));AQ.height=(AO+Math.abs(AT*Math.sin(AP)));}if(AU<90){if(AV.mIsRingPie){AQ.x=(AS.x+AT*(AR/100)*Math.cos(AP));AQ.y=(AS.y-AO+AT*(AR/100)*Math.sin(AP));}else{AQ.x=AS.x;AQ.y=AS.y-AO;}}else{if(AU<180){AQ.x=(AS.x+AT*Math.cos(AP));if(AV.mIsRingPie){AQ.y=(AS.y-AO+AT*(AR/100)*Math.sin(AP));}else{AQ.y=AS.y-AO;}}else{if(AU<270){AQ.x=(AS.x+AT*Math.cos(AP));AQ.y=(AS.y-AO+AT*Math.sin(AP));}else{AQ.y=(AS.y-AO+AT*Math.sin(AP));if(AV.mIsRingPie){AQ.x=(AS.x+AT*(AR/100)*Math.cos(AP));}else{AQ.x=AS.x;}}}}}mstrmojo.chart.PieSliceObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PieSliceObject",mSliceInfo:null,mBoundingRectType:D.BRT_TOP,mCylinderStart:0,mCylinderEnd:0,mOneSeries:false,mIsOutline:false,mStartAngleRadian:0,mEndAngleRadian:0,mMiddleAngleRadian:0,mMiddleAngle:0,mIsShown:false,mIsWhitenOuterBorder:false,init:function AF(AQ){if(AQ.TripleId){AQ.TripleId.angleByIndex=AQ.AngleIndex||0;AQ.TripleId.sliceById=AQ.SliceId||0;}this._super(AQ);this.mSliceInfo={};var AP=this.mSliceInfo;AP.mStartAngle=AQ.StartAngle;AP.mEndAngle=AQ.EndAngle;AP.mRingPieFactor=AQ.RingPieFactor;AP.mIsRingPie=AQ.IsRing;AP.mIs2DCircular=AQ.Is2DCircular;AP.mScale=AQ.Scale;AP.mCenter=AQ.Center;AP.mRadius=AQ.Radius;AP.mDepth=AQ.Depth;this.mOneSeries=AQ.OneSeries;this.mIsShown=AQ.IsShown;this.mStartAngleRadian=n.DegreeToRadian(AP.mStartAngle);this.mEndAngleRadian=n.DegreeToRadian(AP.mEndAngle);this.mMiddleAngleRadian=0.5*(this.mStartAngleRadian+this.mEndAngleRadian);this.mMiddleAngle=(0.5*(AP.mStartAngle+AP.mEndAngle));var AO=this.mMiddleAngle;if(AO>=360){AO%=360;}this.mMiddleAngleQuadrant=Math.floor(AO/90+1);if(!this.mOneSeries){AP.mCenter.x+=(AQ.Explode*Math.cos(this.mMiddleAngleRadian));AP.mCenter.y+=(AQ.Explode*Math.sin(this.mMiddleAngleRadian));}this.mIsWhitenOuterBorder=AQ.IsWhitenOuterBorder||false;},SetCylinderStart:function Q(AO){this.mCylinderStart=AO;},SetCylinderEnd:function e(AO){this.mCylinderEnd=AO;},SetBoundingRectType:function s(AO){this.mBoundingRectType=AO;},SetDrawOutline:function AG(AO){this.mIsOutline=AO;},GetSliceInfo:function y(){return this.mSliceInfo;},GetMiddleAngleQuadrant:function T(){return this.mMiddleAngleQuadrant;},GetMiddleAngle:function a(){return this.mMiddleAngle;},GetMiddleAngleRadian:function q(){return this.mMiddleAngleRadian;},Draw:function AB(){if(this.mIsShown){this.SetLineWidth();this.mIsOutline=false;if(this.mSliceInfo.mIsRingPie){x.call(this);}else{P.call(this);}}},DrawOutLine:function AJ(){if(this.mIsShown){var AQ=this.mChartContextPtr,AP=this.mSliceInfo;if(!(AP.mIsRingPie)&&AP.mIs2DCircular){X.call(this);}var AO=this.mChartContextPtr.GetLineJoin();AQ.SetLineJoin(AL.LJT_BEVEL);this.SetOutlineWidth();if(!AP.mIs2DCircular){AQ.Scale(1,AP.mScale);}this.mIsOutline=true;if(AP.mIsRingPie){x.call(this);}else{P.call(this);}if(!AP.mIs2DCircular){AQ.Scale(1,1/AP.mScale);}AQ.SetLineJoin(AO);}},PointInObject:function J(AP){if(this.mIsShown&&this.mFormatLinePtr){var AO=false;if(this.mSliceInfo.mIsRingPie){AO=c.call(this,AP);}else{AO=t.call(this,AP);}return AO;}return false;},GetBoundingRect:function w(AO){if(AO===undefined){AO=new f.Rect2D();}var AS=this.mFormatFillPtr,AR=this.mSliceInfo,AQ=AR.mCenter,AP=AR.mRadius;switch(this.mBoundingRectType){case D.BRT_TOP:case D.BRT_BOTTOM:if(AS.supportAdvancedFill(0)&&AS.mFillBevel.type===j.DssGraphFillBevelSphere){AO.x=AQ.x-AP;AO.y=AQ.y-AR.mDepth-AP;AO.width=2*AP;AO.height=2*AP;}else{AA.call(this,AO);}break;case D.BRT_CYLINDER:case D.BRT_RING_CYLINDER:K.call(this,AO);break;case D.BRT_START_RECT:case D.BRT_END_RECT:r.call(this,AO);break;}return AO;},FillBevel:function u(){var AU=this.mFormatFillPtr,AS=this.mSliceInfo,AT=this.mChartContextPtr;if(AU.supportAdvancedFill(0)===false){return ;}if(AU.mFillBevel.type===j.DssGraphFillBevelDonut){var AO=0;if(AS.mIsRingPie){AO=AS.mRadius*AS.mRingPieFactor/100;}var AR=AS.mCenter.x;var AQ=AS.mCenter.y;if(!(AS.mIs2DCircular)){AQ-=AS.mDepth;}AT.saveState();AT.Clip();AT.FillRadientGradient(AU,o.RG_PIESLICE,AR,AQ,AO,AS.mRadius);AT.RestoreState();}else{if(AU.mFillBevel.type===j.DssGraphFillBevelSphere){var AP=AU.mFillBevel.lightAngle;AU.mFillBevel.lightAngle=270;f.ShapeObject.prototype.FillBevel.apply(this,[]);AU.mFillBevel.lightAngle=AP;}}},ConvertAngle:function AE(AO){while(AO.mStartAngle<0){AO.mStartAngle+=360;}while(AO.mStartAngle>360){AO.mStartAngle-=360;}while(AO.mEndAngle<0){AO.mEndAngle+=360;}while(AO.mEndAngle>360){AO.mEndAngle-=360;}},GetIntersectionConvertedAngles:function U(AP,AO,AR){var AS,AQ;if(AP.mStartAngle>AP.mEndAngle){AS=[{mStartAngle:0,mEndAngle:AP.mEndAngle},{mStartAngle:AP.mStartAngle,mEndAngle:360}];if(AO.mStartAngle>AO.mEndAngle){AQ=[{mStartAngle:0,mEndAngle:AO.mEndAngle},{mStartAngle:AO.mStartAngle,mEndAngle:360}];var AT={mStartAngle:0,mEndAngle:0};this.GetIntersectionAngle(AS[0],AQ[0],AT);AR.mEndAngle=AT.mEndAngle;this.GetIntersectionAngle(AS[1],AQ[1],AT);AR.mStartAngle=AT.mStartAngle;return true;}return this.GetIntersectionAngle(AO,AS[0],AR)||this.GetIntersectionAngle(AO,AS[1],AR);}if(AO.mStartAngle>AO.mEndAngle){AQ=[{mStartAngle:0,mEndAngle:AO.mEndAngle},{mStartAngle:AO.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AP,AQ[0],AR)||this.GetIntersectionAngle(AP,AQ[1],AR);}return this.GetIntersectionAngle(AP,AO,AR);},GetIntersectionAngle:function W(AR,AQ,AS){var AO=(AR.mStartAngle>AQ.mStartAngle)?AR.mStartAngle:AQ.mStartAngle;var AP=(AR.mEndAngle>AQ.mEndAngle)?AQ.mEndAngle:AR.mEndAngle;if(AO>AP){return false;}if(AS){AS.mStartAngle=AO;AS.mEndAngle=AP;}return true;},ElementDrawRingPieTop:function d(){AC.call(this);},ElementDrawNormalPieTop:function b(){k.call(this);},ElementFillSide:function C(){Z.call(this);},GetClockwisePolygon:function E(){var AO=[],AT=this.mSliceInfo;var AP=new f.Point2D({x:AT.mCenter.x,y:AT.mCenter.y});if(!(AT.mIs2DCircular)){AP.y-=AT.mDepth;}AO.push(new f.Point2D({x:AP.x,y:AP.y*AT.mScale}));var AS;for(AS=AT.mStartAngle;AS-AT.mEndAngle<0;AS+=I){var AR=n.DegreeToRadian(AS);AO.push(new f.Point2D({x:AP.x+AT.mRadius*Math.cos(AR),y:((AP.y+AT.mRadius*Math.sin(AR))*AT.mScale)}));}var AQ=n.DegreeToRadian(AT.mEndAngle);AO.push(new f.Point2D({x:AP.x+AT.mRadius*Math.cos(AQ),y:(AP.y+AT.mRadius*Math.sin(AQ))*AT.mScale}));return AO;},IsCircularShape:function AI(){return true;},SetWhitenOuterBorder:function V(AO){this.mIsWhitenOuterBorder=AO;},getRadialInfo:function AM(){var AP=this.mSliceInfo,AO={r:AP.mRadius,cx:AP.mCenter.x,cy:AP.mCenter.y,fx:0,fy:0};AO.fx=AO.cx;AO.fy=AO.cy;if(AP.mIsRingPie){AO.startStop=AP.mRingPieFactor/100;}return AO;},getShapeSize:function p(){if(this.mSliceInfo){return this.mSliceInfo.mRadius||0;}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","FormatFill","FormatLine","PieSliceObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixPiePlotType","EnumGraphMatrixMarkerTypeInChart");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphNumberFormatType");var c=mstrmojo.chart,b=mstrmojo.VisUtility,V=c.ChartConstants,X=c.enums,R=X.EnumGraphMatrixPiePlotType,J=X.EnumGraphMatrixMarkerTypeInChart,S=c.model,g=S.enums,N=g.EnumDSSGraphObject,E=g.EnumShapeType,L=g.EnumDSSGraphMarkerShape,f=0,O=1,I=1,A=2,W=3;var P=new c.TripleId(),U=new c.ChartAdvFormat();function e(){var j=this.mChartContextPtr,h=j.GetGraphMatrixContext();this.mMinSizeByTotal=0;if(!this.mHasSizeBy){return this.mMinSizeByTotal;}this.mMinSizeByTotal=h.mMinSizeVal;return this.mMinSizeByTotal;}function d(){var j=this.mChartContextPtr,h=j.GetGraphMatrixContext();if(!this.mHasSizeBy){this.mMaxSizeByTotal=1;return this.mMaxSizeByTotal;}this.mMaxSizeByTotal=h.mMaxSizeVal;return this.mMaxSizeByTotal;}function F(){var j=this.mChartContextPtr,h=j.GetGraphMatrixContext();d.call(this);e.call(this);if(h.mMarkerShape===L.DssGraphMarkerShape2DPie){this.mPieOption.mLayout=f;}else{this.mPieOption.mLayout=O;}}function Z(n,o,q,k){var j=this.mChartContextPtr.GetGraphMatrixContext(),l,p,h=2;if(this.mHasSizeBy){h=j.getSizeByPieRadius(this.mDatasetPtr,n,o,this.mMaxSizeByTotal,this.mMinSizeByTotal,this.mPieOption.mMaxRadius);if(h>=0&&h<1){h=1;}}else{h=this.mPieOption.mMaxRadius;}l=1;if(this.mPlotType===R.GMPPT_VALUE){p=k||this.mDatasetPtr.GetPieCountAtOneDataPoint(n,o);l=(q+1)/p;h=l*h;if(p>1){h-=1;}}return h;}function D(h,j,l){var n,k,q,p,o=this.mDatasetPtr,r=this.mPieOption,t={};t.Angles=[];t.ValidSeriesNumber=0;t.ValidSeriesIndex=[];t.IsValid=false;n=360-r.mPieRotation;t.Angles.push(n);t.ValidSeriesIndex.splice(0,t.ValidSeriesIndex.length);k=this.mDatasetPtr.GetPieSliceCount(h,j,0);q=0;for(p=0;p<k;++p){var s=o.GetPieSlicePercentage(h,j,l,p);if(s!==null){if(s<=1||s>=-1){++t.ValidSeriesNumber;t.ValidSeriesIndex.push(p);}q+=s;if(p===(k-1)){n=720-r.mPieRotation;}else{n=Math.round(Math.abs(360*q)+1)+(360-r.mPieRotation);}}else{if(p===(k-1)){n=720-r.mPieRotation;}}if(n>720-r.mPieRotation){n=720-r.mPieRotation;}t.Angles.push(n);}t.IsValid=true;return t;}function Q(AB,v){var n=this.mChartContextPtr,AC=n.GetGraphMatrixContext(),z="",r,w=this.mDatasetPtr,AA=new c.TripleId({ObjectId:N.DssGraphDataText,SeriesId:AB.mSeriesId,GroupId:AB.mGroupId}),u,y,h,x=w.dataLabelStyle,j,q=v.GetSliceInfo(),l,k,AD,t,s,o=false,p=5;if(w.showPieSliceDatalabel(AB.mSeriesId,AB.mGroupId,AB.angleByIndex,AB.sliceById)===false){return null;}AA.angleByIndex=AB.angleByIndex;AA.sliceById=AB.sliceById;if(n.mIsGraphMatrix){p=AC.getPadding(V.kDataLabel);}switch(x){case A:r=w.GetPieSliceData(AB.mSeriesId,AB.mGroupId,AB.angleByIndex,AB.sliceById);if(r===undefined||r===null){return null;}U.restore();w.getGridDataFormatForPie(U,AB);u=new c.NumberObject({TripleId:AA,GraphObjectManager:this.mpManager,Number:r,NumberFormat:U,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(u!==undefined&&u!==null){z=u.mText;}h=u;break;case W:y=w.GetTextLabel(AB.mSeriesId,AB.mGroupId,AB.angleByIndex,AB.sliceById);z=y;h=new c.TextObject({TripleId:AA,GraphObjectManager:this.mpManager,GraphCollectionObject:null});break;}if(h!==undefined&&h!==null&&z!==""){h.SetText(z);j=h.GetBoundingRect();}else{return null;}l=v.GetMiddleAngleRadian();AD=(q.mRadius+p)*Math.cos(l);t=(q.mRadius+p)*Math.sin(l);k=v.GetMiddleAngleQuadrant();if(k===2||k===3){o=true;}s=j.height*0.5*Math.sin(l);if(o){h.MoveToCenter(q.mCenter.x+AD-(j.width+1)/2,q.mCenter.y+t+s);}else{h.MoveToCenter(q.mCenter.x+AD+(j.width+1)/2,q.mCenter.y+t+s);}return h;}function C(AF,u,k,AD,x,AC,z,p,l){var r={mObjectId:N.DssGraphPieSlice,mSeriesId:AF,mGroupId:u},o=this.mChartContextPtr,AB=o.getUtiliy().tripleId,AA=this.mPieOption,v=o.mIsGraphMatrix,t,q,j,s=(this.mPlotType===R.GMPPT_VALUE),n=AA.mLayout,h,y;var AE=l||this.mDatasetPtr.GetPieCountAtOneDataPoint(iSeriesId,u);if(AC>=z){return null;}AB.reset(P,r.mObjectId,r.mSeriesId,r.mGroupId,k,AD);if(o.checkColorByAndSizeByValue(P,this.mDatasetPtr,this.mHasColorBy,false)===false){return null;}if(z-AC===360){p=true;}t=((n===O)||(s&&k>0));if(t){if(n===O){if(s&&k>0){AA.mRingFactor=(1-1/(k+1)*0.3)*100;}else{AA.mRingFactor=70;}}else{AA.mRingFactor=100/(k+1);}}q=Z.call(this,AF,u,k);if(q<=0){return null;}j=new c.PieSliceObject({TripleId:r,AngleIndex:k,SliceId:AD,GraphObjectManager:this.mpManager,Explode:0,StartAngle:AC,EndAngle:z,RingPieFactor:AA.mRingFactor,IsRing:t,Is2DCircular:true,Scale:AA.mScale,Center:x,Radius:q,MaxRadius:AA.mMaxRadius,Depth:AA.mDepthInChart,OneSeries:p,ParentObject:null,IsShown:true,Shape:E._PIESLICE,hasFill:true});if(v){var w=this.mDatasetPtr.showPieDatalabels();if(w&&!(s&&k<AE-1)){h=Q.call(this,r,j);if(h!==undefined&&h!==null){h.mIsShown=false;y=new c.GMDataLabelInfo({SeriesId:AF,GroupId:u,isValid:true,Label:h});y.HostMarkerPoint=x;y.HostMarkerBound=new c.Rect2D({x:x.x-q,y:x.y-q,height:2*q,width:2*q});this.dataLabels.push(y);}}}return j;}function H(){var k,h=this.mChartContextPtr.GetGraphMatrixContext(),j=J._PIE;if(this.mPlotType===R.GMPPT_CATEGORY){var l=this.mChartContextPtr.IsVertical(),n=this.mDatasetPtr.GetGroupCount();k=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);return h.GetMaxMarkerSize(j,l,n*k);}else{if(this.mPlotType===R.GMPPT_VALUE){return h.GetMaxMarkerSize(j,true,1,this.mHasSizeBy);}}return 0;}function G(n){var v=this.mPieCircles,w=v.length,q,o,p=false,l=[],t=[],r=[],u,s,k,h;for(q=0;q<w;++q){p=false;h=v[q];for(o=0;o<l.length;++o){if(h.mCenter.x===l[o].x&&h.mCenter.y===l[o].y&&h.mRadius===t[o]){p=true;break;}}if(!p){u=h.mCenter;s=h.mRadius;t.push(s);l.push(u);r.push(h);}}n.CirclePieObjects=n.CirclePieObjects.concat(r);}mstrmojo.chart.PiePlotRenderer=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.PiePlotRenderer",mDatasetPtr:null,mChartContextPtr:null,mMaxSizeByTotal:0,mMinSizeByTotal:0,mHasColorBy:false,mHasSizeBy:false,mPlotType:R.GMPPT_CATEGORY,mPieOption:{mLayout:f,mRingFactor:70,mScale:1,mDepthInChart:0,mPieRotation:90},mpManager:null,dataLabels:[],shownDataLabels:[],mPieCircles:[],init:function Y(h){this._super(h);this.mpManager=h.GraphObjectManager;this.mChartContextPtr=h.ChartContext;this.mDatasetPtr=h.Dataset;this.mPieOption={mLayout:f,mRingFactor:70,mScale:1,mMaxRadius:10,mDepthInChart:0,mPieRotation:90};this.mPieOption.mLayout=h.Layout;this.mPlotType=h.PlotType;if(h.MaxRadius){this.mPieOption.mMaxRadius=h.MaxRadius;}else{this.mPieOption.mMaxRadius=H.call(this);}this.mHasColorBy=this.mChartContextPtr.GetGraphMatrixContext().mHasColorBy;this.mHasSizeBy=this.mChartContextPtr.GetGraphMatrixContext().mHasSizeBy;this.dataLabels=[];this.shownDataLabels=[];this.mPieCircles=[];if(h.shownDatalabels!==undefined&&h.shownDataLabels!==null){this.shownDataLabels=h.shownDataLabels;}F.call(this);},getShapeSizeAt:function a(l,j,h,k){if(k===undefined){k=true;}if(k){return this.mPieOption.mMaxRadius;}return Z.call(this,l,j,h);},drawSinglePie:function B(k,s,j,t,h){var l=[],p,x,v,n,u,y,z,o={},w;if(t.x<0||t.y<0){return l;}n=Z.call(this,k,s,j,h);o.mCenter=t;o.mRadius=n;u=D.call(this,k,s,j);if(!u.IsValid){return l;}x=u.ValidSeriesIndex;p=u.ValidSeriesNumber;v=u.Angles;var AA=h||this.mDatasetPtr.GetPieCountAtOneDataPoint(k,s),q=(this.mPlotType===R.GMPPT_VALUE),r=((this.mPieOption.mLayout===O)||(q&&j>0));if(p===0){b.visPrint("pieplotRenderer::Should not reach here");}else{if(p===1){y=C.call(this,k,s,j,x[0],t,360-this.mPieOption.mPieRotation,720-this.mPieOption.mPieRotation,true,AA);if(y){y.SetWhitenOuterBorder(q&&j<AA-1&&!r);l.push(y);}this.mPieCircles.push(o);}else{for(w=0;w<p;++w){z=x[w];y=C.call(this,k,s,j,z,t,v[z],v[z+1],false,AA);if(y){y.SetWhitenOuterBorder(q&&j<AA-1&&!r);l.push(y);}}this.mPieCircles.push(o);}}return l;},SetInfo:function T(j,h,k){this.mPieOption.mLayout=j;this.mPieOption.mMaxRadius=k;this.mPlotType=h;},enableDataLabel:function M(l,k){var n=this.mChartContextPtr,j=n.mIsGraphMatrix,h=n.GetGraphMatrixContext();if(j){G.call(this,l);l.PlaceDataLabels(this.dataLabels,k);}},GetPieRadius:function K(h,j,k){return Z.call(this,h,j,k);}});}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","FractionNumber","Utility");mstrmojo.requiresClsP("mstrmojo.chart","TextObject","ChartAdvFormat","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumDSSGraphProperty");var c=mstrmojo.chart,K=c.enums,b=mstrmojo.VisUtility,d=K.EnumGraphMajorType,h=K.EnumNumberCategory,N=5,t=5;var V=mstrmojo.chart.model,M=V.enums,n=M.EnumDSSGraphType,u=M.EnumDSSGraphObject,s=M.EnumDSSGraphProperty,F=mstrmojo.num,D=mstrmojo.chart.common,G=D.Utility,A=G.tripleId;var B=["[SF:-3]","[SF:-6]","[SF:-9]"];var j=new c.TripleId(),l=new c.ChartAdvFormat(),L=new c.ChartAdvFormat(),g=new c.ChartAdvFormat();function Y(z){switch(z){case u.DssGraphY1Label:case u.DssGraphY2Label:case u.DssGraphY3Label:case u.DssGraphY4Label:case u.DssGraphX1Label:case u.DssGraphX2Label:return true;}return false;}function O(z){switch(z.mObjectId){case u.DssGraphUserLabel1:return u.DssGraphY1Label;case u.DssGraphUserLabel2:return u.DssGraphY2Label;case u.DssGraphUserLabel3:return u.DssGraphX1Label;case u.DssGraphUserLabel4:return u.DssGraphX2Label;default:return z.mObjectId;}}function E(AC){var z,AA=this.mSuffix,AB=AC;if(AB.length&&this.mNumber<0){if(AB[0]==="-"&&this.mPrefix!=="-"){AB=AB.substring(1);this.mPrefix="-"+this.mPrefix;}}z=this.mPrefix;if(this.mHasBracket){if(AB.length>=2&&AB[0]==="("&&AB[AB.length-1]===")"){AB="("+z+AB.substring(1,AB.length-2)+AA+")";}else{AB=z+AB+AA;}}else{AB=z+AB+AA;}if(this.mIsFinal){this.SetText(AB);}else{this.mText=AB;}}function S(z){return(z.search(/\?\/[0-9\?]/)!==-1);}function T(z){return z.replace(/[^"]E-/,"E");}function v(AF,AE,AJ,AH){var AC,AD,AB,AG,z,AI,AA;AA=AJ;AC=new D.FractionNumber();AD=new D.FractionNumber();AB=new D.FractionNumber();AG=new D.FractionNumber();AD.mNumerator=0;AD.mDenominator=AB.mDenominator=AB.mNumerator=1;AG.mDenominator=AD.mDenominator+AB.mDenominator;AG.mNumerator=AD.mNumerator+AB.mNumerator;AI=AF>=0;AF=Math.abs(AF);z=Math.floor(AF);AF-=z;while(AG.mDenominator<AA){if(Math.abs(AG.ToDouble()-AF)<1e-15){AC.Copy(AG);break;}if(AG.ToDouble()>AF){AB.Copy(AG);}else{AD.Copy(AG);}AG.mDenominator=AD.mDenominator+AB.mDenominator;AG.mNumerator=AD.mNumerator+AB.mNumerator;}if(AG.mDenominator>=AA){if(AF-AD.ToDouble()<AB.ToDouble()-AF){AC.Copy(AD);}else{AC.Copy(AB);}}if(z>0){AC.mNumerator+=z*AC.mDenominator;}return AC.ToString(AE,AI,AH);}function W(AF,AA,AC){var AD,AB,AH,z=10,AG,AI;AI=AA.indexOf("# ",0);AG=(AI!==-1);for(AD=5;AD>0;AD--){AH="/";for(AB=0;AB<AD;AB++){AH+="?";}AI=AA.indexOf(AH,0);if(AI!==-1){for(AB=1;AB<AD;AB++){z*=10;}break;}}var AE;AE=v(AF,AG,z,AC);return AE;}function r(AL,AF){var AC,AN,AM,AJ=AF.lastIndexOf("/"),AA=AF.substr(AJ+1,AF.length);AC=(AA.indexOf("?")===-1);if(AC){var AE=AL<0,AK=(AF.indexOf("# ",0)!==-1),z,AB=AA.ToInteger();AL=Math.abs(AL);z=Math.floor(AL);AL-=z;var AG=Math.floor(AL*AB+0.5);z+=AG/AB;AG%=AB;if(!AK){AG+=z*AB;z=0;}if(z===0&&AG===0){return"0";}if(z!==0){AM=z.ToString();if(AG!==0){AM+=" ";}}if(AG!==0){AM=AG.ToString();AM+="/";AM+=AB.ToString();}AN=AM;if(AE){AN="-"+AN;}return AN;}var AI=this.mTripleId.mObjectId,AD=Y.call(this,AI),AH=AI===u.DssGraphDataText;AN=W(AL,AF,!AD&&!AH);return AN;}function C(AE){var AD,AC,AA,z="",AB="";AD='"';AC=AE.indexOf(AD);if(AC===-1){return{Format:AE,HasLeftOver:true,Prefix:z,Suffix:AB};}AA=AE.indexOf(AD,AC+1);if(AA===-1){return{Format:AE,HasLeftOver:false,Prefix:z,Suffix:AB};}if(AC===0){z=AE.substring(1,AA);AE=AE.substring(AA+1);}AC=AE.lastIndexOf(AD);if(AC===-1){return{Format:AE,HasLeftOver:true,Prefix:z,Suffix:AB};}AA=AE.lastIndexOf(AD,AC-1);if(AA===-1){return{Format:AE,HasLeftOver:false,Prefix:z,Suffix:AB};}if(AC===AE.length-1){AB=AE.substring(AA+1,AC);AE=AE.substring(0,AA);}return{Format:AE,HasLeftOver:true,Prefix:z,Suffix:AB};}function R(AC,AJ){AJ=AJ||false;var AL,AN="",AD="",AG,AM,AF,AA,AB,AE,AI,z,AK=false,AH;AG=AC.indexOf(";");AL=false;if(AG!==-1){AN=AC.substring(0,AG);AD=AC.substring(AG+1);}else{AN=AC;if(AJ===false){AD=AN;AK=true;}}AM=AD.length>0;AF=AM;if(AF){AF=AD[0]==="[";if(AF){AB=AD.indexOf("]");AF=AB!==-1;if(AF){AA=AD.substring(0,AB+1);AD=AD.substring(AB+1);}}}if(AD.length>=2){AL=(AD[0]==="("&&AD[AD.length-1]===")");}if(AL){AD=AD.substring(1,AD.length-1);}AE=false;if(this.mNumber>=0){AH=C.call(this,AN);AN=AH.Format;AE=AH.HasLeftOver;AI=AH.Prefix;z=AH.Suffix;AH=C.call(this,AD);AD=AH.Format;}else{AH=C.call(this,AD);AD=AH.Format;AE=AH.HasLeftOver;AI=AH.Prefix;z=AH.Suffix;AH=C.call(this,AN);AN=AH.Format;}if(AL){AD="("+AD+")";}if(AF){AD=AA+AD;}if(AM){if(AK){AC=AD;}else{AC=AN+";"+AD;}}else{AC=AN;}return{Format:AC,HasLeftOver:AE,HasBracket:AL,Prefix:AI,Suffix:z};}function J(AA,AD){AD=(AD!==undefined)?AD:true;var z,AC,AE,AB;if(this.mPrefix.length>0||this.mSuffix.length>0){return AA;}z=AA.substring(0);AB=R.call(this,z,AD);z=AB.Format;AC=AB.Prefix;AE=AB.Suffix;if(AC.length){this.mPrefix=AC;}if(AE.length){this.mSuffix=AE;}return z.substring(0);}function P(z,AA,AD){var AC,AB;AC=this.mNumber;if(this.mNumber<0&&AA>=2&&AA!==5){AC=-this.mNumber;}AB=G.hFormatValue(z,AC);if(this.mNumber<0){if(AA===3||AA===4){AB="("+AB+")";}if(AA===2||AA===4||AA===5){this.mColor=255;}}E.call(this,AB);}function x(AH,AK){var AD,AJ,AB,z,AE,AF=-1,AC=-1,AG=["[SF:-3]","[SF:-6]","[SF:-9]"];AD=AH.mCustomFormat[0];z=AH.mCustomFormat.length;AJ=AH.mCustomFormat[z-1];AE=AH.mCustomFormat.substring(0);if(AD==="K"){AF=1;AC=0;AB="K";}else{if(AJ==="K"){AF=z;AC=0;AB="K";}else{if(AD==="M"){AF=1;AC=1;AB="M";}else{if(AJ==="M"){AF=z;AC=1;AB="M";}else{if(AD==="B"){AF=1;AC=2;AB="B";}else{if(AJ==="B"){AF=z;AC=2;AB="B";}}}}}}if(AF!==-1){AE.replace(/([KMB])/g,'"$1"');var AA;var AI=AE.indexOf(";");if(AI!==-1){if(AD===AB){AA='"'+AB+'"'+B[AC];}else{AA=B[AC]+'"'+AB+'"';}AE.replace(";",";"+AG[AC]);}AE=B[AC]+AE;}P.call(this,AE,AH.mNegFormat,AK);}function Q(AA,AG){var AC,z=AA.mCustomFormat.substring(0);AC=R.call(this,z);this.mHasBracket=this.mHasBracket||AC.HasBracket;z=AC.Format;var AD=!AC.HasLeftOver,AB=AC.HasBracket,AE=AC.Prefix,AF=AC.Suffix;if(AE.length){this.mPrefix=AE.substring(0);}if(AF.length){this.mSuffix=AF.substring(0);}AA.mCustomFormat=z.substring(0);if(AD){AA.mCustomFormat=J.call(this,AA.mCustomFormat);}P.call(this,AA.mCustomFormat,AA.mNegFormat,AG);}function X(AD){var AC,AB,AA,z=AD.length;if(z===0){return{Format:AD,Base:1};}if(AD[z-1]!==","){return{Format:AD,Base:1};}if(AD===","){return{Format:AD,Base:1000};}AB=AD.reverse();AC=AB.search(/[^,]/);if(AC===-1){AA=Math.pow(1000,z);return{Format:"",Base:AA};}AA=Math.pow(1000,AC);return{Format:AD.substring(0,z-1),Base:AA};}function I(AX,AJ){var AW=this.mNumber,AZ,AS,AH,AL,AF,AP,AG,AB,AE,AQ,AC,AA,AU,AV,AN,AR,AD,AM,AO,z,AT;if(AX===null){E.call(this,G.hFormatValue("General",this.mNumber));}else{L.restore();AZ=AX.getGridDataFormat(L,(this.mTripleId.mSeriesId<0)?0:this.mTripleId.mSeriesId,(this.mTripleId.mGroupId<0)?0:this.mTripleId.mGroupId,this.mColumnOffset);if(AZ!==true){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AS=L.mCustomFormat.substring(0);if(S.call(this,AS)){L.mFormatType=h.Fraction;}if(L.mFormatType===h.Fraction){AH=L.mCustomFormat.substring(0);AL=r.call(this,this.mNumber,AH);E.call(this,AL);return ;}L.mCustomFormat=J.call(this,L.mCustomFormat);AH=L.mCustomFormat.substring(0);T.call(this,AH);var AY=X.call(this,AH);AF=AY.Base;AH=AY.Format;this.mNumber/=AF;if(this.replaceQuestionMarkWithHash(AH)){AP=AH.indexOf(".");AG=AH.length-AP-1;AN=G.hFormatValue(AH,this.mNumber);AB=AN.indexOf(".");AE=0;if(AB===-1){AB=AN.length;AG=AE;}else{AE=AN.length-AP-1;}AP-=AB;AG-=AE;if(AP>0){this.mPrefix="";for(AT=0;AT<AP;AT++){this.mPrefix+=" ";}}if(AG>0){this.mSuffix="";for(AT=0;AT<AP;AT++){this.mSuffix+=" ";}}E.call(this,AN);this.mNumber=AW;return ;}if(L.mFormatType===h.Scientific){AH.replace("#","0");}AQ=".";AF=1;AC=AH.lastIndexOf(AQ);AA=this.mNumber;if(AC!==-1&&L.mFormatType===h.Custom){var AI=this.AdjustFormatStringWithDot(AH,AC);AF=AI.BASE;AH=AI.STRING;AA/=AF;}else{if(L.mFormatType===h.Custom){AU=AH.length;if(AU>2){var AK=AH[AU-1];if(AH[AU-2]==="\\"&&(AK==="B"||AK==="b"||AK==="M"||AK==="m"||AK==="K"||AK==="k")){AV=AH[AU-1];AR='"';AH=AH.substring(0,AU-2);AH+=AR;AH+=AV;AH+=AR;AD="";AF=this.getBaseForCustomFormatting(AH);AA/=AF;AH+=AR;AH+=AD;AH+=AR;}}}}AM=false;if(AH.indexOf("* -")!==-1){AM=this.mNumber<0;if(AM){AH.replace("* -","* ");}}if(AH===""){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AN=G.hFormatValue(AH,AA);AO=AN.length;if(AN.length){z=L.mNegFormat>=3&&AN[0]==="("&&AN[AO-1]===")";if(z&&AN.length>this.mPrefix.length&&this.mPrefix.length&&this.mNumber<0){AN="("+this.mPrefix+AN.substring(1);this.mPrefix=this.mSuffix="";}}if(AM){this.mText=AN;AG=this.mText.search(/[0-9]/);if(AG!==-1){if(AG>0){AN=this.mText.substring(0,AG);}AN=AN+"-"+this.mText.substring(AG);}}E.call(this,AN);this.mNumber=AW;}}function U(AT,AG,AI){var AR,AQ,AS,AK,AE,AP,AH,AJ,AM,AC,AN,AD,z,AB,AO,AA,AL;switch(AG.mFormatType){case h.Default:b.visPrint("should not reach here.");break;case h.General:E.call(this,G.hFormatValue("",this.mNumber));break;case h.FromGrid:I.call(this,AT,AI);break;case h.Fixed:x.call(this,AG,AI);break;case h.Date:case h.Time:AE=AG.mCustomFormat.substring(0);AE.replace(/[:(tt)]/g,"");E.call(this,G.hFormatValue(AE,this.mNumber));break;case h.Percentage:AE=AG.mCustomFormat.substring(0);P.call(this,AE,AG.mNegFormat,AI);break;case h.Fraction:AE=AG.mCustomFormat.substring(0);AK=r.call(this,this.mNumber,AE);E.call(this,AK);break;case h.Special:AR=new c.ChartAdvFormat({ChartAdvFormat:AG});if(AR.mCustomFormat.localeCompare("#####")===false&&this.mNumber===0){AR.mCustomFormat[4]="0";}E.call(this,G.hFormatValue(AR.mCustomFormat,this.mNumber));break;case h.Currency:AR=new c.ChartAdvFormat({ChartAdvFormat:AG});Q.call(this,AR,AI);break;case h.Scientific:AE=AG.mCustomFormat.substring(0);AE.replace("#","0");E.call(this,F.formatByMask(AE,this.mNumber));break;default:AS=this.mNumber;AH=false;AR=new c.ChartAdvFormat({ChartAdvFormat:AG});AJ=AR.mCustomFormat.substring(0);if(AJ==="?"){AJ="0";}if(AR.mFormatType===h.Custom){AM=S.call(this,AJ);if(AM){AK=r.call(this,this.mNumber,AJ);E.call(this,AK);return ;}AJ=T.call(this,AJ);AP=X.call(this,AJ);AC=AP.Base;AJ=AP.Format;this.mNumber/=AC;if(this.replaceQuestionMarkWithHash(AJ)){AN=AJ.indexOf(".");AD=AJ.length-AN-1;AL=G.hFormatValue(AJ,this.mNumber);z=AL.indexOf(".");AB=0;if(z===-1){z=AL.length;AD=AB;}else{AB=AL.length-AN-1;}AN-=z;AD-=AB;if(AN>0){this.mPrefix="";for(AQ=0;AQ<AN;AQ++){this.mPrefix+=" ";}}if(AD>0){this.mSuffix="";for(AQ=0;AQ<AN;AQ++){this.mSuffix+=" ";}}E.call(this,AL);this.mNumber=AS;return ;}if(AJ.indexOf("* -")!==-1){AJ.replace("* -","* ");AH=true;}}AO=".";AA=AJ.lastIndexOf(AO);if(AA!==-1){var AF=this.AdjustFormatStringWithDot(AJ,AA);AC=AF.BASE;AJ=AF.STRING;this.mNumber/=AC;}E.call(this,G.hFormatValue(AJ,this.mNumber));if(AH&&this.mNumber<0){AL=this.mText.substring(0);AD=AL.search(/[0-9]/);if(AD!==-1){if(AD>0){this.mText=AL.substring(0,AD);}this.mText=this.mText+"-"+AL.substring(AD);E.call(this,this.mText);}}this.mNumber=AS;break;}}function a(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}return this.expectCondense===true;}function o(AD,AI,AF){var z=this.mChartContextPtr,AC,AH=this.mChartContextPtr.mIsGraphMatrix,AG=O.call(this,this.mTripleId);if(z.mIsTimeSeriesChart&&AG===u.DssGraphY1Label){this.SetNumberFormatForTimeSeries(AD);return ;}if(AH===false){return ;}if(Y.call(this,AG)){if(this.shouldCondense){this.SetNumberFormatForTimeSeries(AD);return ;}g.reset(AD);AC=this.mNumber;if(g.mFormatType===h.Default){var AA=z.getAxisKeyFromObjectId(AG),AB=z.getUniformAxisInformationFromKey(AA),AJ=AB.Metrics;if(AJ===undefined||AJ.length===0){AJ=[0];}z.getAxisAutoNumberFormat(g,AJ);g.mCustomFormat=J.call(this,g.mCustomFormat);}U.call(this,AF,g,AI);var AE=this.mChartContextPtr.GetGraphMatrixContext();if(a.call(this)){if(this.mText.length>AE.getCondensedTextLimit(g.mFormatType)){this.mNumber=AC;this.mPrefix=this.mSuffix="";this.SetNumberFormatForTimeSeries(AD);}}}}mstrmojo.chart.NumberObject=mstrmojo.declare(mstrmojo.chart.TextObject,null,{scriptClass:"mstrmojo.chart.NumberObject",mNumber:0,mColor:-1,mIsFinal:false,mIsAbbreviated:false,mColumnOffset:0,mHasBracket:false,mPrefix:"",mSuffix:"",expectCondense:false,shouldCondense:false,init:function w(z){if(z.Locale===undefined){z.Locale=0;}this._super(z);this.mNumber=z.Number;this.mIsFinal=z.IsFinal!==undefined?z.IsFinal:true;this.mColumnOffset=z.ColumnOffset!==undefined?z.ColumnOffset:0;this.mPrefix="";this.mSuffix="";if(z.ExpectCondense){this.expectCondense=z.ExpectCondense;}if(z.ShouldCondense){this.shouldCondense=z.ShouldCondense;}this.SetNumberFormat(z.NumberFormat,z.Locale,z.DataSet);},SetNumberFormat:function Z(AD,AJ,AE){var z=this.mChartContextPtr,AF,AC=this.mChartContextPtr.mIsGraphMatrix,AG=O.call(this,this.mTripleId),AI,AH,AA,AB;if(z.mIsTimeSeriesChart&&AG===u.DssGraphY1Label){return o.call(this,AD,AJ,AE);}if(z.mIsGraphMatrix&&Y.call(this,AG)){return o.call(this,AD,AJ,AE);}l.reset(AD);AA=l.mFormatType;AF=z.GetGraphMajorType();A.reset(j,this.mTripleId.mObjectId);if(((AG===u.DssGraphDataText||AG===u.DssGraphRiser)&&(AF===d.GMT_SCATTER||AF===d.GMT_BUBBLE))&&!AC){switch(this.mColumnOffset){case 0:A.reset(j,u.DssGraphX1Body);break;case 1:A.reset(j,u.DssGraphY1Body);break;case 2:A.reset(j,u.DssGraphZBody);break;default:break;}AI=z.GetProperty(s.DssGraphAxisNumberFormat,j);if(AI){z.ParseValueToFormat(AI,l);}switch(this.mColumnOffset){case 0:A.reset(j,u.DssGraphX1Label);break;case 1:A.reset(j,u.DssGraphY1Label);break;default:break;}}AG=j.mObjectId;if(Y.call(this,AG)){if(AC===false){if(((AA===h.FromGrid)||(AA===h.Default))){if(z.mGraphType===n.DssGraphTypePareto_Percent){l.mFormatType=h.General;}else{z.getAxisAutoNumberFormat(l);l.mCustomFormat=J.call(this,l.mCustomFormat);}}}}else{if(AA===h.Default){l.mFormatType=h.FromGrid;}if(AG===u.DssGraphDataText&&AA===h.FromGrid&&AF===d.GMT_HISTOGRAM){l.mFormatType=h.General;}}if((this.mNumber>1000000000000000||this.mNumber<-1000000000000000)&&AA===h.Currency){AH="0";for(AB=0;AB<l.mDigits;AB++){if(AB===0){AH+=".";}AH+="0";}AH+="E+00";l.mCustomFormat=AH.substr(0);l.mFormatType=h.Scientific;}U.call(this,AE,l,AJ);},Draw:function q(){var AA=this.mFormatFontPtr,z=this.mColor;if(z>=0){var AB=z;if(AA){AB=AA.mFontColor;AA.mFontColor=z;}this._super();if(AA){AA.mFontColor=AB;}}else{this._super();}},replaceQuestionMarkWithHash:function y(AD){var AB,AA,AC,z="";if(AD.length===0){return false;}AA=AD.length;AB=0;for(AC=0;AC<AA;AC++){if(z.indexOf(AD[AC])===-1){z+=AD[AC];}if(AD[AC]==="."){AB++;}}if(z===".?"||z==="?."){if(AB===1){AD.replace("?","#");return true;}}return false;},AddTextBeforeNumber:function H(AB){var z,AA;z=new c.Rect2D();this.SetRect(z);AA=AB+"\n"+this.mText;this.SetText(AA);this.mIsFinal=true;},getBaseForCustomFormatting:function p(AC){var AF="",AI="",AE=1000,AA='"',AG=AC.lastIndexOf(AA);if(AG!==-1&&AG===AC.length-1){AG=AC.lastIndexOf(AA,AG-1);if(AG!==-1){if(AG!==0&&!(AG===1&&AC.charAt(0)==="-")){if(AC.lastIndexOf("(",AG-1)===-1){var AB=AC.substr(AG,AC.length);AI=AB.replace(/"""/gi,"");AC=AC.substr(0,AG);}}}}AG=AC.length-1;var z=1,AH=AC.charAt(AG),AD=true;switch(AH){case"K":case"k":z*=AE;AF=AH;AG-=1;break;case"M":case"m":z*=AE*AE;AF=AH;AG-=1;break;case"B":case"b":z*=AE*AE*AE;AF=AH;AG-=1;break;default:AD=false;break;}AC=AC.substr(0,AG+1);if(AD){AG=AC.length-1;if(AC.charAt(AG)===","){AC=AC.substr(0,AG);}return{BASE:z,STRING:AC,TAG:AF,SUFFIX:AI};}var AJ=",";while(AG>0){if(AC.charAt(AG)!==AJ){break;}AG--;z*=AE;}AC=AC.substr(0,AG+1);return{BASE:z,STRING:AC,TAG:AF,SUFFIX:AI};},AdjustFormatStringWithDot:function e(AG,AJ){var AB=".",AD=",",AO=0,AH=0,AC=1,AN="",AP=".",AM=AJ-1;while(AM>=0){if(AG[AM]===AD){AH++;AC*=1000;}else{break;}AM--;AN+=AD;}AN+=AB;if(!(AO===0&&AH===0)){var AA=0,AF=AG.indexOf(AN),z="";while(AF!==-1){z=z.concat(AG.substr(AA,AF-AA));AA=AF+AN.length;z=z.concat(AP);AF=AG.indexOf(AN,AA);}z+=AG.substr(AA,AG.length);AG=z;}var AI,AE,AK,AL=AG.lastIndexOf(AB);while(AL!==-1){AK=AG.lastIndexOf(AD,AL);if((AK!==-1)&&(AK<AL)&&(AL-AK>1)&&(AL-AK<4)){AE="";AE=AE.concat(AG.substr(0,AK+1));for(AI=0;AI<4-(AL-AK);AI++){AE=AE.concat(AG[AK+1]);}AE=AE.concat(AG.substr(AK+1));AG=AE;}AL=AG.lastIndexOf(AB,AL-1);}return{BASE:AC,STRING:AG};},SetNumberFormatForTimeSeries:function k(AE){var AA=this.mChartContextPtr,AC=this.mNumber,AI,AB,AD=AA.mIsGraphMatrix;if(AE.mFormatType===0&&!AD){var AH;if(this.mNumber>0){AH=AA.getInt(AC);AI="$"+AH.ToString();}else{AC=-AC;AH=AA.getInt(AC);AI="($"+AH.ToString()+")";}E.call(this,AI);return ;}this.mIsAbbreviated=this.mIsAbbreviated||AD;var AG=this.mTripleId.mObjectId,AF=AD&&Y.call(this,AG),z=AF?t:N;AI=G.abbreviateNumber(this.mNumber,z);E.call(this,AI);},GetNumberFromText:function f(){if(this.mText!==""){var z=parseFloat(this.mText);if(G.isValidNumber(z)){return z;}return null;}return null;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","GraphObjectManager","ShapeObject","TextObject","StraightLineObject","GraphCollectionObject","PolygonObject","PolyLineObject","GraphAxisGeneral","AxisObject","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphTitleName","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphAxisLabelLocation");var Ae=mstrmojo.chart,AX=Ae.ChartConstants,N=Ae.enums,AA=N.EnumCollectionType,Ab=N.EnumGraphMajorType,Aj=N.EnumDSSExtraGraphObject,Ap=N.EnumAnchorPoint,Z=N.EnumAxisLabelsLocation,Ai=N.EnumAxisDirection,V=N.EnumGraphObjectType,AH=Ae.gNullGroupId,o=Ae.gNullTripleId,AC=Ae.gNullObjectId,F=0,E=1,AG=2,r=3,q=4,p=5,n=6,u=7,AE=8,D=100,Am=2;var AV=mstrmojo.chart.model,AJ=AV.enums,Au=AJ.EnumDSSGraphProperty,Av=AJ.EnumDSSGraphObject,AO=AJ.EnumDSSGraphTitleName,Ah=AJ.EnumDSSExtraGraphProperty,H=AJ.EnumDSSGraphFontRotation,Aw=AJ.EnumDSSGraphGridLineType,O=AJ.EnumDSSGraphAxisLabelLocation;var g=1,AF=2,b=4,x=8;var X=null,M=null,L=null,AZ=null,w=null;function AR(){if(!this.mUseDepth){return ;}var A2=this.mDeviceDataArea,A1=this.mDepthOffset;A2.x+=A1.x;A2.y+=A1.y;this.mUseDepth=false;}function Ar(A1){switch(A1.mGridStyle){case Aw.DssGraphGridRegular:case Aw.DssGraphGridBoth:A1.mGridStyle=Aw.DssGraphGridRegular;break;case Aw.DssGraphGridInnerTicks:case Aw.DssGraphGridOuterTicks:case Aw.DssGraphGridSpanningTicks:A1.mShowGridLines=false;break;default:A1.mGridStyle=Aw.DssGraphGridRegular;}}function T(A4,A8,A9){var BB,A6,A5,A1,BC,A7,BD,A3=this.mDeviceDataArea,A2=true,BA=true;if(this.IsVerticalAxis()){A2=(A4.x===A3.x);BA=(A4.x+A4.width===A3.x+A3.width);}else{A2=(A4.y+A4.height===A3.y+A3.height);BA=(A4.y===A3.y);}if(A2&&BA){this.generateGridsByArea(A9);this.MoveGraphObjectList(A8);return ;}BB=this.mUseDepth;A6=A3;A5=this.mMajorGrid.mShowGridLines;A1=this.mMinorGrid.mShowGridLines;BC=this.mMajorGrid.mGridStyle;A7=this.mMinorGrid.mGridStyle;BD=this.mAxisInfo.mAxisLabelsLocation;this.mDeviceDataArea=A4;if(A2||BA){if(A2){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;}else{this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;}if(!this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){AR.call(this);}}else{AR.call(this);Ar.call(this,this.mMajorGrid);Ar.call(this,this.mMinorGrid);}this.generateGridsByArea(A9);this.MoveGraphObjectList(A8);this.mUseDepth=BB;this.mDeviceDataArea.ResetRect(A6);this.mMajorGrid.mShowGridLines=A5;this.mMinorGrid.mShowGridLines=A1;this.mMajorGrid.mGridStyle=BC;this.mMinorGrid.mGridStyle=A7;this.mAxisInfo.mAxisLabelsLocation=BD;}function AL(A1){var A4=this.mDeviceDataArea,A3,A2;switch(A1){case Z.ALL_BOTTOM:A3=A4.GetBottomLeft();A2=A4.GetBottomRight();if(this.mChartContextPtr.mIsTimeSeriesChart){A3.x=0;}break;case Z.ALL_TOP:A3=A4.GetTopLeft();A2=A4.GetTopRight();break;case Z.ALL_LEFT:A3=A4.GetTopLeft();A2=A4.GetBottomLeft();break;case Z.ALL_RIGHT:A3=A4.GetTopRight();A2=A4.GetBottomRight();break;default:A3=null;A2=null;break;}return{Start:A3,End:A2};}function Az(A1){var A5,A2,A4,A3;if(this.mUseDepth){return ;}A3=AL.call(this,A1);A5=A3.Start;A2=A3.End;A4=new Ae.StraightLineObject({TripleId:this.mTripleId,GraphObjectManager:this,StartPoint:A5,EndPoint:A2,GraphCollectionObject:this.mpAxisLineSet});this.mManagerGraphObjectList.push(A4);this.mpAxisLineSet.AddGraphObject(A4);}function B(){var A2,A3,A5,A6,A9=[],A1,A7,A8,A4;A5=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;A6=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;if(this.hasDepthAxisLine(A5)){A8=AL.call(this,A5);}else{if(this.hasDepthAxisLine(A6)){A8=AL.call(this,A6);}else{return ;}}A2=A8.Start;A3=A8.End;A9.push(A2);A9.push(A3);A9.push(A3.Shifted(this.mDepthOffset));A9.push(A2.Shifted(this.mDepthOffset));A4=new Ae.TripleId({ObjectId:Av.DssGraphFrame});A1=new Ae.PolygonObject({TripleId:A4,GraphObjectManager:this,Polygon:A9});A1.mIsDetectable=false;A7=A1.GetFormatFill();A7.MakeDarker(this.IsVerticalAxis()?0.8:0.6);this.mManagerGraphObjectList.push(A1);}function e(BA,A5,A7,A9,BB,A1){var A3,A8,A4,A2,A6;A8=this.mChartContextPtr.CalculateDepthOffset(A7,this.mDepthDirection,true);A3=new Ae.Point2D({x:A8.OffsetX,y:A8.OffsetY});A1.splice(0,A1.length);A4=new Ae.Point2D();A2=new Ae.Point2D();A4.init({Point2D:A9});A2.init({Point2D:BB});if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){A4.init({Point2D:BB});A2.init({Point2D:A9});}A2=A2.Shifted(this.mDepthOffset);A6=new Ae.Point2D();A6.Reset(0,0);if(this.IsVerticalAxis()){A6.x=this.IsLeftDirection()?A7:-A7;}else{A6.y=this.IsDownDirection()?-A7:A7;}switch(A5){case Aw.DssGraphGridRegular:A1.push(A4);A1.push(A4.Shifted(this.mDepthOffset));A1.push(A2);break;case Aw.DssGraphGridBoth:if(this.hasDepthAxisLine(BA)||this.HasLabelsOnBothSides()){A1.push(A4.Shifted(A6));}A1.push(A4);A1.push(A4.Shifted(this.mDepthOffset));A1.push(A2);if(!this.hasDepthAxisLine(BA)||this.HasLabelsOnBothSides()){A1.push(A2.Shifted(-A6));}break;case Aw.DssGraphGridInnerTicks:if(this.hasDepthAxisLine(BA)){A1.push(A4);A1.push(A4.Shifted(A3));}else{A1.push(A2);A1.push(A2.Shifted(A6));}break;case Aw.DssGraphGridOuterTicks:if(this.hasDepthAxisLine(BA)){A1.push(A4.Shifted(A6));A1.push(A4);}else{A1.push(A2);A1.push(A2.Shifted(-A6));}break;case Aw.DssGraphGridSpanningTicks:if(this.hasDepthAxisLine(BA)){A1.push(A4.Shifted(A6));A1.push(A4);A1.push(A4.Shifted(A3));}else{A1.push(A2.Shifted(A6));A1.push(A2.Shifted(-A6));}break;}}mstrmojo.chart.Axis=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Axis",mDeviceDataArea:null,mTickLength:-1,mUseDepth:false,mDepth:0,mDepthDirection:0,mDepthOffset:null,mManagerGraphObjectList:null,mpMajorGridSet:null,mpMinorGridSet:null,mpAxisLabelSet:null,mpAxisLineSet:null,mIsUniformAxis:false,maxLabelLength:-1,hasLabelCreated:false,hasMajorTickCreated:false,hasMinorTickCreated:false,mLabelInterval:0,resizeAction:-1,mLabelList:null,restrictWidth:null,restrictHeight:null,mIsShown:true,mIntegrity:15,init:function AK(A1){this._super(A1);var A2=this.mChartContextPtr;this.mLabelList=[];if(this.mUseDepth){this.mDepthOffset=new Ae.Point2D();}this.mManagerGraphObjectList=[];if(!!A1.IsUA){this.mIsUniformAxis=true;}if(this.mIsUniformAxis){this.restrictHeight=this.restrictWidth=-1;}this.mAxisInfo=new Ae.GraphAxisGeneral(A1);this.mMajorGrid={mShowGridLines:true,mGridStyle:Aw.DssGraphGridRegular,mUseManualGrid:false,mGridInterval:0};this.mMinorGrid={mShowGridLines:false,mGridStyle:Aw.DssGraphGridNone,mUseManualGrid:false,mGridInterval:0};switch(A1.AxisDirection){case Ai.AD_X:this.mTickLength=A2.mGraphHeight/D+1;break;case Ai.AD_Y:this.mTickLength=A2.mGraphWidth/D+1;break;case Ai.AD_Z:this.mTickLength=2;break;}this.mTickLength=Math.max(4,this.mTickLength);},SetDeviceDataArea:function I(A1){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new Ae.Rect2D({Rect2D:A1});}else{this.mDeviceDataArea.ResetRect(A1);}},IsReverseOrder:function W(){return this.mAxisInfo.mAxisDrawInReverse;},SetIntegrity:function s(A1){this.mIntegrity=A1;if((A1&g)===0){this.mAxisInfo.mShowAxisLine=false;this.mMajorGrid.mGridStyle=Aw.DssGraphGridNone;}if((A1&AF)===0){this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Aw.DssGraphGridNone;}if((A1&x)===0){this.mMinorGrid.mShowGridLines=false;this.mMinorGrid.mGridStyle=Aw.DssGraphGridNone;}if((A1&b)===0){this.mAxisInfo.mShowAxisLabels=false;}},HasLabelsOnBothSides:function Aa(){return(this.mAxisInfo.mAxisLabelsLocation===Z.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===Z.ALL_LEFT_RIGHT)&&!(this.mChartContextPtr.mIsTimeSeriesChart);},IsVerticalAxis:function J(){return this.mAxisInfo.mAxisDirection===Ai.AD_Y;},IsLeftDirection:function An(){return this.mDepthDirection>90&&this.mDepthDirection<270;},IsDownDirection:function z(){return this.mDepthDirection>180;},HasOuterTicks:function AT(A1){return A1===Aw.DssGraphGridOuterTicks||A1===Aw.DssGraphGridBoth||A1===Aw.DssGraphGridSpanningTicks;},HasTwoGridLineParts:function AI(A1){return this.HasLabelsOnBothSides()&&(A1===Aw.DssGraphGridInnerTicks||A1===Aw.DssGraphGridOuterTicks||A1===Aw.DssGraphGridSpanningTicks);},IsLogarithmic:function Ao(){return false;},getIndex:function Q(){switch(this.mTripleId.mObjectId){case Av.DssGraphO1Body:return F;case Av.DssGraphO2Body:return E;case Av.DssGraphX1Body:return AG;case Av.DssGraphY1Body:return r;case Av.DssGraphY2Body:return q;case Av.DssGraphY3Body:return p;case Av.DssGraphY4Body:return n;case Av.DssGraphZBody:return u;case Av.DssGraphX2Body:return AE;default:return 0;}},GetInterlacedGridId:function A0(){return Aj.DssGraphO1Interlaced+this.getIndex();},ReserveTitleArea:function d(A4){var A2,A1,A6,A3,A5;if(!this.mAxisInfo.mShowAxisTitle){return ;}A2=this.getIndex();A1=Ae.gAxisObjects[A2].mTitleId;if(A1.mObjectId===Ae.gNullObjectId){return ;}A6=new Ae.TripleId({ObjectId:A1.mObjectId,SeriesId:Ae.gNullSeriesId,GroupId:AH});A3=new Ae.Rect2D();this.InitObjectSet(A6,V.GOT_AXIS_TITLE);A5=new Ae.TextObject({TripleId:A6,GraphObjectManager:this,rect:A3,ParentObject:this.mpAxisTitleSet});this.mpAxisTitleSet.AddGraphObject(A5);A5.SetText(this.mAxisTitle);this.mGraphObjectList.push(A5);this.ReserveTitle(A4,false);},ReserveTitle:function AY(A6,A3){var A5,A2,A1,A4;if(!this.mAxisInfo.mShowAxisTitle){return ;}A5=this.mGraphObjectList[0];A2=A5.GetBoundingRect();A1=A3?-1:1;A4=((this.IsVerticalAxis()?A2.width:A2.height)+Am)*A1;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:A6.height-=A4;break;case Z.ALL_TOP:if(this.mTripleId.mObjectId===Av.DssGraphO1Body){A6.height-=A4;}else{A6.y+=A4;A6.height-=A4;}break;case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:A6.x+=A4;A6.width-=A4;break;case Z.ALL_RIGHT:if(this.mTripleId.mObjectId===Av.DssGraphO1Body){A6.x+=A4;A6.width-=A4;}else{A6.width-=A4;}break;}},UpdateTitleLocation:function Aq(A6){var A5,A3,A2,A1,A4,A7;if(!this.mAxisInfo.mShowAxisTitle){return ;}A5=this.mGraphObjectList[0];if(this.mChartContextPtr.mManualLayoutMode&&!this.mChartContextPtr.mRecalculateFrame){this.MoveTitleForManual(A5);return ;}A3=A5.GetBoundingRect();A2=this.GetLabelOffset(this.mAxisInfo.mAxisLabelsLocation);if(this.IsVerticalAxis()){A1=A6.y+A6.height/2+A2.y;}else{A1=A6.x+A6.width/2+A2.x;}A4=(this.IsVerticalAxis()?A3.width:A3.height)/2+Am;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:A5.MoveTo(A1,A6.y+A6.height+A4,Ap.CENTER);break;case Z.ALL_TOP:if(this.mTripleId.mObjectId===Av.DssGraphO1Body){A5.MoveTo(A1,A6.y+A6.height+A4,Ap.CENTER);}else{A5.MoveTo(A1,A6.y-A4,Ap.CENTER);}break;case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:A5.MoveTo(A6.x-A4,A1,Ap.CENTER);break;case Z.ALL_RIGHT:if(this.mTripleId.mObjectId===Av.DssGraphO1Body){A5.MoveTo(A6.x-A4,A1,Ap.CENTER);}else{A5.MoveTo(A6.x+A6.width+A4,A1,Ap.CENTER);}break;}A7=A5.mTripleId;A3=A5.GetBoundingRectNoRotation();this.mChartContextPtr.PutLocation(this.getAxisTitleLocationId(A7.mObjectId),A3);},generateAxisLine:function Ax(A1){this.CreateAxisLine();return this.MoveGraphObjectList(A1);},CreateAxisLine:function k(){var A1;if(this.mUseDepth){B.call(this);return ;}if(!this.mAxisInfo.mShowAxisLine){return ;}A1=new Ae.TripleId({ObjectId:this.mTripleId.mObjectId});this.InitObjectSet(A1,V.GOT_AXIS_LINE);switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM_TOP:Az.call(this,Z.ALL_BOTTOM);Az.call(this,Z.ALL_TOP);break;case Z.ALL_LEFT_RIGHT:Az.call(this,Z.ALL_LEFT);Az.call(this,Z.ALL_RIGHT);break;default:Az.call(this,this.mAxisInfo.mAxisLabelsLocation);break;}},ReserveDepthAxisLine:function Al(A4,A2,A1){var A3;if(!this.mUseDepth){return ;}A3=new Ae.Point2D({Point2D:this.mDepthOffset});A3.x=Math.abs(A3.x);A3.y=Math.abs(A3.y);if(A2){A3.x=-A3.x;A3.y=-A3.y;}if(this.mAxisInfo.mAxisDirection===Ai.AD_X||A1){if(this.mDepthDirection<180){A4.y+=A3.y;A4.height-=A3.y;}else{A4.height-=A3.y;}}else{if(this.mAxisInfo.mAxisDirection===Ai.AD_Y||A1){if(this.mDepthDirection<90||this.mDepthDirection>270){A4.width-=A3.x;}else{A4.x+=A3.x;A4.width-=A3.x;}}}},TrimMarginsForDepthAxis:function AQ(A4,A5){var A3,A1,A2;A3=A4;A1=A5;if(!this.mUseDepth){A2={HighMargin:A1,LowMargin:A3};return A2;}if(this.IsVerticalAxis()){if(this.mDepthDirection<180){A1+=this.mDepthOffset.y;}else{A3-=this.mDepthOffset.y;}}else{if(this.mDepthDirection<90||this.mDepthDirection>270){A1-=this.mDepthOffset.x;}else{A3+=this.mDepthOffset.x;}}A1=(A1>=0)?A1:0;A3=(A3>=0)?A3:0;A2={HighMargin:A1,LowMargin:A3};return A2;},getDepthMargin:function y(A4,A5){if(!this.mUseDepth){return null;}var A2=this.mDepthOffset,A3=A4,A1=A5;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_LEFT:case Z.ALL_RIGHT:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A2.y>0){A3=A2.y;}else{A1=-A2.y;}}else{if(A2.y>0){A1=A2.y;}else{A3=-A2.y;}}break;case Z.ALL_BOTTOM:case Z.ALL_TOP:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A2.x>0){A1=A2.x;}else{A3=-A2.x;}}else{if(A2.x>0){A3=A2.x;}else{A1=-A2.x;}}break;case Z.ALL_LEFT_RIGHT:case Z.ALL_BOTTOM_TOP:break;default:return null;}return{highMargin:A1,lowMargin:A3};},GetLabelOffset:function S(A1,A2){if(!A2){A2=new Ae.Point2D();}A2.Reset(0,0);if((!this.mUseDepth)||this.hasDepthAxisLine(A1)){return A2;}A2.ResetPoint(this.mDepthOffset);return A2;},GenerateGridLinesEx:function Af(){this.GenerateGridLines(this.mDeviceDataArea,0,this.mGraphObjectList);},GenerateGridLines:function c(A2,A3,A1){if((this.mMajorGrid.mShowGridLines&&this.mMajorGrid.mGridStyle!==Aw.DssGraphGridNone)||(this.mMinorGrid.mShowGridLines&&this.mMinorGrid.mGridStyle!==Aw.DssGraphGridNone)){T.call(this,A2,A1,true);}},GenerateInterlacedGrids:function a(A2,A3,A1){if(this.mAxisInfo.mUseInterlacedGrids){T.call(this,A2,A1,false);}},MoveGraphObjectList:function C(A2){var A1,A3;A1=this.mManagerGraphObjectList.length;for(A3=0;A3<A1;++A3){A2.push(this.mManagerGraphObjectList[A3]);}this.mManagerGraphObjectList.splice(0,this.mManagerGraphObjectList.length);},GenerateOneLineObject:function At(A4,A3,A2){var A1;A1=new Ae.PolyLineObject({TripleId:A4,GraphObjectManager:this,PolyLine:A3,GraphCollectionObject:A2});A2.AddGraphObject(A1);this.mManagerGraphObjectList.push(A1);},SetDepthAndDirection:function Ac(A3,A1){var A2;this.mUseDepth=true;this.mDepth=A3;this.mDepthDirection=A1;A2=this.mChartContextPtr.CalculateDepthOffset(this.mDepth,this.mDepthDirection);this.mDepthOffset.x=A2.OffsetX;this.mDepthOffset.y=A2.OffsetY;},getAxisTitleLocationId:function Ad(A1){switch(A1){case AO.DssGraphTitleCategory:return Au.DssGraphTitleXLocation;case AO.DssGraphTitleY1:return Au.DssGraphTitleY1Location;case AO.DssGraphTitleY2:return Au.DssGraphTitleY2Location;case AO.DssGraph3DRowTitle:return Au.DssGraph3DRowTitleLocationNEW;case AO.DssGraph3DColTitle:return Au.DssGraph3DColTitleLocationNEW;case AO.DssGraph3DLYTitle:return Au.DssGraph3DLYTitleLocation;case AO.DssGraph3DRYTitle:return Au.DssGraph3DRYTitleLocation;default:return 0;}},MoveLabel:function AW(A7,A1,A3,A9){var A6,A4,BB,A5,A2;if(A9===undefined){A9=Ae.Axis.gLabelMargin;}A6=A7.GetTransformedRect(true);BB=A7.mFormatFontPtr.mFontRotation;if(X===null){X=new Ae.Point2D();}else{X.Reset(0,0);}switch(BB){case H.Rotate45:case H.Rotate315:case H.Normal:if(BB===H.Rotate45||BB===H.Rotate315){A4=(BB===H.Rotate45)?1:-1;A3.Reset((A3.x-A4*A3.y)*Math.SQRT1_2,(A4*A3.x+A3.y)*Math.SQRT1_2);A1.Reset((A1.x-A4*A1.y)*Math.SQRT1_2,(A4*A1.x+A1.y)*Math.SQRT1_2);}X.Reset(A6.width/2,A6.height/2);break;case H.Rotate90:X.Reset(A6.width/2,(A6.height+1)/2);break;case H.Rotate180:X.Reset((A6.width+1)/2,(A6.height+1)/2);break;case H.Rotate270:X.Reset((A6.width+1)/2,A6.height/2);break;case H.Custom:break;default:}A5=0.1;var BA=0,A8=0;if(Math.abs(A3.x)<A5||Math.abs(A3.y)<A5){if(Math.abs(A3.x)<A5&&A3.y<0){X.y=A6.height-X.y;}else{if(A3.x<0&&Math.abs(A3.y)<A5){X.x=A6.width-X.x;}}A2=X.x*Math.abs(A3.x)+X.y*Math.abs(A3.y)+A9;BA=A1.x+A2*A3.x;A8=A1.y+A2*A3.y;}else{if(A3.x>0&&A3.y<0){X.y=-(A6.height-X.y);}else{if(A3.x<0&&A3.x>0){X.x=-(A6.width-X.x);}else{if(A3.x<0&&A3.y<0){X.Reset(-(A6.width-X.x),-(A6.height-X.y));}}}BA=A1.x+A9*A3.x+X.x;A8=A1.y+A9*A3.y+X.y;}if(BB===H.Rotate45||BB===H.Rotate315){A4=(BB===H.Rotate45)?-1:1;BA=(BA-A4*A8)*Math.SQRT1_2;A8=(A4*BA+A8)*Math.SQRT1_2;}A7.MoveTo(Math.floor(BA+(BA<0?-0.5:0.5)),Math.floor(A8+(A8<0?-0.5:0.5)),Ap.CENTER);},MoveTitleForManual:function AM(A3){if(!this.mChartContextPtr.mManualLayoutMode){return ;}var A2=A3.mTripleId,A1=this.mChartContextPtr.GetLocationRect(this.getAxisTitleLocationId(A2.mObjectId));if(A1){A3.SetRect(A1);A3.CalculateDeviceRect();}else{A3.mIsShown=false;}},InitObjectSet:function AN(A4,A3){var A2,A1=AA.CT_LINE;switch(A3){case V.GOT_AXIS_TITLE:A2=this.mpAxisTitleSet;A1=AA.CT_TEXT;break;case V.GOT_AXIS_LABEL:A2=this.mpAxisLabelSet;A1=AA.CT_TEXT;break;case V.GOT_AXIS_LINE:A2=this.mpAxisLineSet;break;case V.GOT_MAJOR_GRID:A2=this.mpMajorGridSet;break;case V.GOT_MINOR_GRID:A2=this.mpMinorGridSet;break;case V.GOT_INTERLACED_GRID:A2=this.mpInterlacedGridSet;A1=AA.CT_GENERAL_SHAPE;break;default:}if(A2!==null&&A2!==undefined){return ;}if(this.mTripleId.mSeriesId>0){A2=this.GetGraphObject(A4,false);}if(!A2){A2=new Ae.GraphCollectionObject({TripleId:A4,GraphObjectManager:this,CollectionType:A1});this.AddToMap(A2);}switch(A3){case V.GOT_AXIS_TITLE:this.mpAxisTitleSet=A2;break;case V.GOT_AXIS_LABEL:this.mpAxisLabelSet=A2;break;case V.GOT_AXIS_LINE:this.mpAxisLineSet=A2;break;case V.GOT_MAJOR_GRID:this.mpMajorGridSet=A2;break;case V.GOT_MINOR_GRID:this.mpMinorGridSet=A2;break;case V.GOT_INTERLACED_GRID:this.mpInterlacedGridSet=A2;break;default:}},LoadProperties:function AS(){var A4,A7,A6=this.mChartContextPtr,A5,A3,A1,A2;if(A6.mIsGraphMatrix){A7=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Aw.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){A4=A6.GetProperty(Au.DssGraphStyleMajor,A7);if(this.mMajorGrid.mShowGridLines&&A4){this.mMajorGrid.mGridStyle=A4;}}return ;}A7=new Ae.TripleId({ObjectId:this.mTripleId.mObjectId});A4=A6.GetProperty(Au.DssGraphShow2DAxisLabels,A7);if(A4){this.mAxisInfo.mShowAxisLabels=A4!==false;}if(A6.GetGraphMajorType()===Ab.GMT_GAUGE){return ;}A5=0;switch(this.mTripleId.mObjectId){case Av.DssGraphO1Body:A5=Au.DssGraphShow2DXTitle;break;case Av.DssGraphO2Body:A5=Au.DssGraphShowTitleSeries;break;case Av.DssGraphX1Body:A5=Au.DssGraphShow2DXTitle;break;case Av.DssGraphY1Body:A5=Au.DssGraphShow2DY1Title;break;case Av.DssGraphY2Body:case Av.DssGraphX2Body:A5=Au.DssGraphShow2DY2Title;break;case Av.DssGraphY3Body:case Av.DssGraphY4Body:break;case Av.DssGraphZBody:A5=Au.DssGraphShow3DColTitle;break;default:}A4=A6.GetProperty(A5,o);if(A5!==0&&A4){this.mAxisInfo.mShowAxisTitle=A4!==false;}if(A6.isUADataAreaOutput()){this.mAxisInfo.mShowAxisLabels=false;this.mAxisInfo.mShowAxisTitle=false;}A3=this.mAxisInfo.mShowAxisTitle;if(A3){A2=Ae.gAxisObjects[this.getIndex()].mTitleId;A4=A6.GetProperty(Au.DssGraphTextContent,A2);if(A2.mObjectId!==AC&&A4){this.mAxisTitle=A4;}}A4=A6.GetProperty(Ah.DssGraphUseInterlacedGrid,A7);if(A4){this.mAxisInfo.mUseInterlacedGrids=A4!==false;}A4=A6.GetProperty(Au.DssGraphShow2DAxisMajor,A7);if(A4){this.mMajorGrid.mShowGridLines=A4!==false;}A4=A6.GetProperty(Au.DssGraphStyleMajor,A7);if(this.mMajorGrid.mShowGridLines&&A4){this.mMajorGrid.mGridStyle=A4;}A4=A6.GetProperty(Au.DssGraphShow2DAxisMinor,A7);if(A4){this.mMinorGrid.mShowGridLines=A4!==false;}A4=A6.GetProperty(Au.DssGraphStyleMinor,A7);if(this.mMinorGrid.mShowGridLines&&A4){this.mMinorGrid.mGridStyle=A4;}A4=A6.GetProperty(Au.DssGraphManualMinor,A7);if(A4){this.mMinorGrid.mUseManualGrid=A4!==false;}A4=A6.GetProperty(Au.DssGraphCountMinor,A7);if(A4){this.mMinorGrid.mGridInterval=A4;}A4=A6.GetProperty(Au.DssGraphShow2DAxisLine,A7);if(A4){this.mAxisInfo.mShowAxisLine=A4;}switch(A6.GetGraphMajorType()){case Ab.GMT_POLAR:case Ab.GMT_RADAR:return ;default:break;}A4=A6.GetProperty(Au.DssGraph2DSide,A7);if(A4){if(A4===O.DssGraphAxisLabelLowSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;}else{if(A4===O.DssGraphAxisLabelHighSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;}else{if(A4===O.DssGraphAxisLabelBothSides){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT_RIGHT:Z.ALL_BOTTOM_TOP;}}}}},generateGridsByArea:function t(){},GetOneGridLine:function Y(A2,A5,A4,A1,A3,A6){if(this.mUseDepth){e.call(this,A2,A5,A4,A1,A3,A6);return ;}A6.splice(0,A6.length);M=new Ae.Point2D({Point2D:A1});L=new Ae.Point2D({Point2D:A3});A6.push(M);A6.push(L);if(AZ===null){AZ=new Ae.Point2D();}else{AZ.Reset(0,0);}if(w===null){w=new Ae.Point2D();}else{w.Reset(0,0);}if(this.IsVerticalAxis()){if(A2===Z.ALL_RIGHT){w.x=A4;}else{AZ.x=-A4;}}else{if(A2===Z.ALL_TOP){w.y=-A4;}else{AZ.y=A4;}}switch(A5){case Aw.DssGraphGridRegular:break;case Aw.DssGraphGridBoth:A6[0].x+=AZ.x;A6[0].y+=AZ.y;if(this.HasLabelsOnBothSides()){A6[1].x-=AZ.x;A6[1].y-=AZ.y;}else{A6[1].x+=w.x;A6[1].y+=w.y;}break;case Aw.DssGraphGridInnerTicks:if(A2!==Z.ALL_RIGHT&&A2!==Z.ALL_TOP){A6[1].x=A6[0].x-AZ.x;A6[1].y=A6[0].y-AZ.y;}else{A6[0].x=A6[1].x-w.x;A6[0].y=A6[1].y-w.y;}break;case Aw.DssGraphGridOuterTicks:if(A2!==Z.ALL_RIGHT&&A2!==Z.ALL_TOP){A6[1].x=A6[0].x+AZ.x;A6[1].y=A6[0].y+AZ.y;}else{A6[0].x=A6[1].x+w.x;A6[0].y=A6[1].y+w.y;}break;case Aw.DssGraphGridSpanningTicks:if(A2!==Z.ALL_RIGHT&&A2!==Z.ALL_TOP){A6[1].x=A6[0].x-AZ.x;A6[1].y=A6[0].y-AZ.y;A6[0].x+=AZ.x;A6[0].y+=AZ.y;}else{A6[0].x=A6[1].x-w.x;A6[0].y=A6[1].y-w.y;A6[1].x+=w.x;A6[1].y+=w.y;}break;default:}},hasDepthAxisLine:function f(A1){if(!this.mUseDepth){return false;}switch(A1){case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:return(this.mDepthDirection<90||this.mDepthDirection>270);case Z.ALL_RIGHT:return(this.mDepthDirection>90&&this.mDepthDirection<270);case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:return(this.mDepthDirection<180);case Z.ALL_TOP:return(this.mDepthDirection>180);default:return false;}},TrimAxisPadding:function P(){},resetRestrictSpace:function As(A1){if(A1!==undefined){this.restrictWidth=A1.width;this.restrictHeight=A1.height;}else{this.restrictWidth=this.restrictHeight=-1;}},GetAxisLabelRotation:function Ak(){},isBaseLineQualified:function G(A1){return false;},liftedFromZero:function Ay(){return false;},SetTrimWithPadding:function AB(){},GetPositionAtTick:function j(){},getLabelRotation:function AP(){if(this.mpAxisLabelSet){var A1=this.mpAxisLabelSet.GetFormatFont();return A1.mFontRotation;}return -1;},GetOuterTickLength:function l(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength;}return 0;},updateMaxLabelLength:function AU(A2,A1){if(A2>0){if(A1===undefined){A1=false;}if(A1){A2=this.calculateMaxAxisSpace(A2);}}this.maxLabelLength=A2;},calculateMaxAxisSpace:function R(A2){var A1=this.mChartContextPtr.GetGraphMatrixContext();A2-=(this.GetOuterTickLength()+A1.getPadding(AX.kLabelToChart));if(this instanceof mstrmojo.chart.CategoryAxis){A2-=A1.getPadding(AX.kCategoricalLabelToTick);}else{A2-=A1.getPadding(AX.kNumericLabelToTick);}return Math.max(A2,0);},getNextStatus:function Ag(A2){var A4=-1,A5=1,A9=!this.IsVerticalAxis(),A8=0,A7=1,A6=2,A3=this.getStatus(),A1=this.mLabelInterval;if(A9){if(A2===A8){if(A1>1){A3=A4;}}else{if(A2===A6){if(A1>=2&&A3!==A5){A3=A4;}}}}else{if(A2===A7){if(A1!==1){A3=A4;}}else{if(A1<2){A3=A4;}}}return A3;},clearTickObjects:function AD(A7,A5){var A4,A2=this.mChartContextPtr.getUtiliy().tripleId,A3=this.mGraphObjectList,A1=A3.length,A6=A5?this.mpMajorGridSet:this.mpMinorGridSet;if(A6){A6.ClearCollection();}for(A4=A1-1;A4>=0;A4--){if(A2.equal(A3[A4].mTripleId,A7)){A3.splice(A4,1);}}},restoreLabels:function K(A2){var A4;if(this.hasLabelCreated){var A3,A1=this.mpAxisLabelSet.GetCollectionSize(),A6=A1<=0,A5;if(A1===0){A1=this.mLabelList.length;}for(A4=0;A4<A1;++A4){if(A6){A3=this.mLabelList[A4];}else{A3=this.mpAxisLabelSet.GetObjectByIndex(A4);}if(!!A3===false){continue;}A5={Stringent:true,Restroke:true,TextWidthLimit:this.maxLabelLength,DivideByWord:true};if(this instanceof mstrmojo.chart.CategoryAxis&&this.mChartContextPtr.mIsGraphMatrix){if(this.mWordWrap===false){A5.LineCount=1;}else{A5.LineCount=2;}}A3.Restore(A5);if(A2){A3.mIsShown=true;}}}},checkShownLabelCount:function v(A5){var A6=this.mLabelList,A1=A6.length,A2=0,A7=-2,A3=-1;for(var A4=0;A4<A1;A4++){if(A6[A4]&&A6[A4].mIsShown){A2++;}if(A5!==undefined&&A2>=A5){return A7;}}if(A5!==undefined){return A3;}return A2;},checkCondense:function A(){return false;},getCondenseStatus:function U(){return undefined;},getUniformAxisLabelsInfo:function h(A4){var A3=0,A5=[],A1=this.mLabelList.length;while(A3<A1){var A2=this.mLabelList[A3];if(A2.mIsShown){if(A4){if(A4.CheckTruncated){if(A2.mIsTruncated===false){continue;}}}A5.push({Text:A2.mText,Rect:A2.GetBoundingRect()});}++A3;}return A5;}});Ae.Axis.gLabelMargin=4;}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","RectangleObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle");var D=mstrmojo.chart,B=mstrmojo.chart.enums,C=B.EnumBoxStyle;function A(){var N=this.mChartContextPtr,L=this.mBoxStyle,M=this.mFormatFillPtr.mAlpha,I,K,H,J,G;I=4;K=new D.Rect2D({Rect2D:this.mRect});K.Implode(I,I);N.DrawRectangle(this.mRect,false);this.ApplyFillFormat();if(L===C.BS_BEVELED_FRAME||L===C.BS_REVERSE_BEVELED_FRAME){H=D.gBlack.ToInteger();J=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.153:0.353));G=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.353:0.153));N.ApplyBeveledFrameToRectangle(this.mRect,0,I,H,J,H,G);}else{if(L===C.BS_DOUBLE_LINE_FRAME){if(L===C.BS_DOUBLE_LINE_FRAME){N.DrawRectangle(K,true);this.ApplyLineFormat();}}}this.SetLineWidth();N.DrawRectangle(this.mRect,true);this.hSetBorderStyle(this.mRect);this.ApplyLineFormat();}mstrmojo.chart.FancyBoxObject=mstrmojo.declare(mstrmojo.chart.RectangleObject,null,{scriptClass:"mstrmojo.chart.FancyBoxObject",mBoxStyle:C.BS_NOFRAME,init:function F(G){this._super(G);this.mBoxStyle=G.BoxStyle||C.BS_NOFRAME;},Draw:function E(){if(this.mBoxStyle===C.BS_NOFRAME){this.mChartContextPtr.DrawRectangle(this.mRect,false);this.ApplyFillFormat();}else{A.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Point2D","Rect2D","PolyLineObject","PolygonObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFontRotation","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var $C=mstrmojo.chart,$M=mstrmojo.chart.model,$MODEL_ENUMS=$M.enums,$CHART_ENUMS=$C.enums,$FR=$MODEL_ENUMS.EnumDSSGraphFontRotation,$GO=$MODEL_ENUMS.EnumDSSGraphObject,$SHP=$MODEL_ENUMS.EnumShapeType,$GMDLP=$CHART_ENUMS.EnumGraphMatrixDataLabelPosition,kOffset=[[0,0],[0,1],[1,0],[1,1]],kGridGeneric=1,kGridOccupy=2,kGridObject=4,kGridCircle=8,k_MaxCount=10000000;function hPointToIndex(point,isUseFloorValue){var x=point.x-this.Origin.x,y=point.y-this.Origin.y,xIndex,yIndex;if(isUseFloorValue===undefined){isUseFloorValue=true;}if(isUseFloorValue){xIndex=Math.floor(x/this.XUnit);yIndex=Math.floor(y/this.YUnit);}else{xIndex=Math.ceil(x/this.XUnit);yIndex=Math.ceil(y/this.YUnit);}return{flag:!(xIndex<0||yIndex<0),col:xIndex,row:yIndex};}function hGetRectPosition(rect,adjustValue){var x,y,xCover,yCover,temp,result;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;if(x<0||y<0||xCover>this.XCount||yCover>this.YCount||x+xCover>this.XCount||y+yCover>this.YCount){if(!adjustValue){result=null;}else{result={x:Math.max(0,x),y:Math.max(0,y),xRange:Math.min(xCover,this.XCount),yRange:Math.min(yCover,this.YCount)};}}else{result={x:x,y:y,xRange:xCover,yRange:yCover};}return result;}function hIndexToPoint(x,y,point){if(point){point.x=this.Origin.x+x*this.XUnit;point.y=this.Origin.y+y*this.YUnit;return point;}return new $C.Point2D({x:this.Origin.x+x*this.XUnit,y:this.Origin.y+y*this.YUnit});}function hIsOccupiedByHostMarkerRect(hostMarker,x,y){var lX,lY,lXRange,lYRange,lRetVal;lRetVal=hGetRectPosition.call(this,hostMarker,true);lX=lRetVal.x;lY=lRetVal.y;lXRange=lRetVal.xRange;lYRange=lRetVal.yRange;return(x>=lX&&x<=lX+lXRange&&y>=lY&&lY<=lY+lYRange);}function hIsOccupiedByHostMarkerCircle(center,radius,x,y){var i,xIndex,yIndex,point=new $C.Point2D();for(i=0;i<4;++i){xIndex=x+kOffset[i][0];yIndex=y+kOffset[i][1];point=hIndexToPoint.call(this,xIndex,yIndex,point);if(point.Distance(center)<radius){return true;}}return false;}function hGetApproximateCenterFromTopLeft(topLeftPoint,xOffset,yOffset){var point=new $C.Point2D({Point2D:topLeftPoint});point.x+=Math.ceil((0.5*xOffset)*this.XUnit);point.y+=Math.ceil((0.5*yOffset)*this.YUnit);return point;}function hCountOverlapsInRect(startX,startY,xCover,yCover,point,limit){var count=0,i,j,matrix=this.Matrix,tempPoint;for(j=0;j<yCover;++j){for(i=0;i<xCover;++i){count+=matrix[startY+j][startX+i];if(count>limit){return count;}}}tempPoint=hIndexToPoint.call(this,startX,startY);point.x=tempPoint.x;point.y=tempPoint.y;return count;}function hTreatTiltOccupation(occupy,isAdd,is45){return true;}function hGetRectRange(rect){var x,y,xCover,yCover,temp;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;return{xRange:xCover,yRange:yCover};}function hDirection(point1,point2,point3){var dir1,dir2;dir1=new $C.Vector2D({StartPoint:point1,EndPoint:point3});dir2=new $C.Vector2D({StartPoint:point1,EndPoint:point2});return dir1.CrossProduct(dir2);}function hOnSegment(point1,point2,point3){var xMax,xMin,yMax,yMin;if(point1.x<point2.x){xMin=point1.x;xMax=point2.x;}else{xMin=point2.x;xMax=point1.x;}if(point1.y<point2.y){yMin=point1.y;yMax=point2.y;}else{yMin=point2.y;yMax=point1.y;}return !(point3.x<xMin||point3.x>xMax||point3.y<yMin||point3.y>yMax);}function hSegmentsIntersection(point1,point2,point3,point4){var d1=hDirection.call(this,point3,point4,point1),d2=hDirection.call(this,point3,point4,point2),d3=hDirection.call(this,point1,point2,point3),d4=hDirection.call(this,point1,point2,point4);if(d1*d2<0&&d3*d4<0){return true;}if(d1===0&&hOnSegment.call(this,point3,point4,point1)){return true;}if(d2===0&&hOnSegment.call(this,point3,point4,point2)){return true;}if(d3===0&&hOnSegment.call(this,point1,point2,point3)){return true;}if(d4===0&&hOnSegment.call(this,point1,point2,point4)){return true;}return false;}function hSearchAlongAxes(point,markerCenter,originIndex,xyOffset,rectCover,alreadyHasOnePlacement,isYFirst){var position=new $C.Point2D(),limit=1,outerStart,innerStart,outerRange,innerRange,outerOffset,innerOffset,outerCover,innerCover,needCheckForFullAccommodation,i,j,startX,startY,tempPoint1,tempPoint2,distSqr1,distSqr2,result=null;if(isYFirst===undefined){isYFirst=true;}outerStart=isYFirst?originIndex.x:originIndex.y;innerStart=originIndex.x+originIndex.y-outerStart;outerRange=isYFirst?this.XCount:this.YCount;innerRange=this.XCount+this.YCount-outerRange;outerOffset=isYFirst?xyOffset.x:xyOffset.y;innerOffset=xyOffset.x+xyOffset.y-outerOffset;outerCover=isYFirst?rectCover.x:rectCover.y;innerCover=rectCover.x+rectCover.y-outerCover;needCheckForFullAccommodation=(xyOffset.x===-1);for(i=outerStart;
/*lIsFound && */
(i>=0&&i<outerRange);i+=outerOffset){if(i+outerCover>outerRange||i+outerCover<0){continue;}for(j=innerStart;
/*lIsFound &&*/
(j>=0&&j<innerRange);j+=innerOffset){if(j+innerCover>innerRange||j+innerCover<0){continue;}startX=isYFirst?i:j;startY=i+j-startX;if(startX<0||startY<0){continue;}if(hCountOverlapsInRect.call(this,startX,startY,rectCover.x,rectCover.y,position,limit)<=limit){if(alreadyHasOnePlacement){tempPoint1=hGetApproximateCenterFromTopLeft.call(this,point,rectCover.x,rectCover.y);distSqr1=tempPoint1.DistanceSquared(markerCenter);tempPoint2=hGetApproximateCenterFromTopLeft.call(this,position,rectCover.x,rectCover.y);distSqr2=tempPoint2.DistanceSquared(markerCenter);if(distSqr1>distSqr2){result=position;}}else{result=position;alreadyHasOnePlacement=true;}if(!needCheckForFullAccommodation||(isYFirst&&needCheckForFullAccommodation&&(startX+rectCover.x)<=originIndex.x)){return result;}if(isYFirst){i=originIndex.x-rectCover.x;j=innerStart;}}}}return result;}function hSearchInAreas(position,markerCenter,originX,originY,width,height){var atLeastOneFound=false,eachArea,addX,addY,offset,originIndex,xyOffset,rectCover;for(eachArea=0;eachArea<4;++eachArea){addX=(eachArea===0||eachArea===1)?-1:1;addY=(eachArea===1||eachArea===2)?-1:1;offset=(eachArea===0||eachArea===1)?0:1;originIndex=new $C.Point2D({x:originX+offset,y:originY});xyOffset=new $C.Point2D({x:addX,y:addY});rectCover=new $C.Point2D({x:width,y:height});atLeastOneFound=(hSearchAlongAxes.call(this,position,markerCenter,originIndex,xyOffset,rectCover,atLeastOneFound)!==null);}return atLeastOneFound;}function hAreTwoRectsFitPadding(rectDataLabel,rect,padding){return((rectDataLabel.x+rectDataLabel.width+padding<=rect.x)||(rectDataLabel.x>=rect.x+rect.width+padding)||(rectDataLabel.y+rectDataLabel.height+padding<=rect.y)||(rectDataLabel.y>=rect.y+rect.height+padding));}function hAreTwoObjectsFitPadding(center,radius,rectDataLabel,padding){return !((center.Distance(rectDataLabel.GetTopLeft())<radius+padding)||(center.Distance(rectDataLabel.GetBottomLeft())<radius+padding)||(center.Distance(rectDataLabel.GetTopRight())<radius+padding)||(center.Distance(rectDataLabel.GetBottomRight())<radius+padding));}function hPopulateOneColumn(columnObject,columnElementCount,defaultValue){var oneColumnVector=[];for(var i=0;i<columnElementCount;i++){oneColumnVector[i]=defaultValue===0?0:[];}columnObject.push(oneColumnVector);}function hPopulateGrid(props){var propRect,propUnit,propRectWidth,propRectHeight,propUnitWidth,propUnitHeight,i=0,j=0,matrixType,gridOccupyCircleVector;props.MatrixType=props.MatrixType||15;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];if(props&&props.Rect&&props.Unit){propRect=props.Rect;propUnit=props.Unit;propRectWidth=propRect.width;propRectHeight=propRect.height;propUnitWidth=propUnit.width;propUnitHeight=propUnit.height;matrixType=props.MatrixType;this.IsValid=((propRectWidth*propRectHeight>propUnitWidth*propUnitHeight)&&(propRectWidth>=propUnitWidth)&&(propRectHeight>=propUnitHeight));if(!this.IsValid){return false;}this.Origin=propRect.GetTopLeft();this.XCount=Math.ceil(propRectWidth/propUnitWidth);this.YCount=Math.ceil(propRectHeight/propUnitHeight);this.XUnit=propUnitWidth;this.YUnit=propUnitHeight;for(i=0;i<this.YCount;++i){if(matrixType&kGridGeneric){hPopulateOneColumn.call(this,this.Matrix,this.XCount,0);}if(matrixType&kGridOccupy){hPopulateOneColumn.call(this,this.MatrixOccupy,this.XCount,1);}if(matrixType&kGridObject){hPopulateOneColumn.call(this,this.MatrixOccupyObject,this.XCount,1);}if(matrixType&kGridCircle){hPopulateOneColumn.call(this,this.MatrixOccupyCircleObject,this.XCount,1);}}return true;}return false;}mstrmojo.chart.GridMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridMap",IsValid:false,Metric:0,XUnit:0,YUnit:0,XCount:0,YCount:0,Origin:null,Matrix:null,MatrixOccupy:null,MatrixOccupyObject:null,MatrixOccupyCircleObject:null,dataLabelPadding:5,initialized:false,init:function init(props){this.initialized=hPopulateGrid.call(this,props);},populate:function populate(props){this.initialized=this.initialized||hPopulateGrid.call(this,props);},destroy:function destroy(){this.initialized=this.IsValid=false;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];},ToMetric:function ToMetric(){var i,j,count=0,xCount=this.XCount,yCount=this.YCount;for(i=0;i<yCount;++i){for(j=0;j<xCount;++j){if(this.Matrix[i][j]>=2){++count;}}}return count;},ToInspectedMetric:function ToInspectedMetric(shapeInfo){var density={Max:-100,Min:10000000000,Occupied:0,Total:0},rect=shapeInfo.BoundingBox,range=hGetRectPosition.call(this,rect,true),isPie=shapeInfo.Shape===$SHP._PIE,position=shapeInfo.Position,isCircle=isPie||(shapeInfo.Shape===$SHP._CIRCLE),inspectPoint=new $C.Point2D(),x=range.x,y=range.y,i,j,k,radius=shapeInfo.Size,restrictRadius=0,xRange=range.xRange,yRange=range.yRange;if(isPie&&shapeInfo.ExclusiveRect){restrictRadius=0.5*shapeInfo.ExclusiveRect.width;}for(i=0;i<range.xRange;++i){for(j=0;j<range.yRange;++j){x=range.x+i;y=range.y+j;if(x>=this.XCount||y>=this.YCount){continue;}var shouldCount=false;if(isCircle){for(k=0;k<4;++k){var distance,tempIndexY=y+kOffset[k][0],tempIndexX=x+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}inspectPoint=hIndexToPoint.call(this,tempIndexX,tempIndexY,inspectPoint);distance=inspectPoint.Distance(position);if(distance<radius&&distance>=restrictRadius){shouldCount=true;break;}}}else{shouldCount=true;}if(shouldCount){var metric=this.Matrix[y][x];density.Max=Math.max(metric,density.Max);density.Min=Math.min(metric,density.Min);density.Occupied+=metric;}}}density.Total=range.xRange*range.yRange;return density;},veryDense:function veryDense(){return false;},UpdateMatrixCircle:function UpdateMatrixCircle(center,radius,isAdd){var x,y,xRange,yRange,occupyArea=new $C.Rect2D({x:center.x-radius,y:center.y-radius,height:radius*2,width:radius*2}),returnVal,delta=isAdd?1:-1,i,j,gridCellIndexPie,xIndex,yIndex,k,addMetric=0,matrix=this.Matrix,tempIndexX,tempIndexY,point=new $C.Point2D();returnVal=hGetRectPosition.call(this,occupyArea,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){gridCellIndexPie=false;xIndex=x+i;yIndex=y+j;if(xIndex>=this.XCount||yIndex>=this.YCount){continue;}for(k=0;k<4;++k){tempIndexY=y+i+kOffset[k][0];tempIndexX=x+j+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}point=hIndexToPoint.call(this,tempIndexX,tempIndexY,point);if(point.Distance(center)<radius){gridCellIndexPie=true;break;}}if(gridCellIndexPie){matrix[yIndex][xIndex]+=delta;if(matrix[yIndex][xIndex]===1){++addMetric;}}}}this.Metric+=addMetric;return true;},UpdateMatrixDataLabelMarker:function UpdateMatrixDataLabelMarker(isDataLabel,occupy){var x,y,xRange,yRange,i,j,xIndex,yIndex,matrix=this.Matrix,addMetric=0,returnVal;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;matrix[yIndex][xIndex]+=k_MaxCount;if(matrix[yIndex][xIndex]===k_MaxCount){addMetric++;}}}this.Metric+=addMetric;return true;},UpdateMatrixPolyLine:function UpdateMatrixPolyLine(occupy,isAdd){var linePoints,i,numberOfLinePoints;if(isAdd===undefined){isAdd=true;}if(occupy===null||occupy===undefined){return false;}linePoints=occupy.mLinePoints;numberOfLinePoints=linePoints.length;for(i=0;i<numberOfLinePoints-1;++i){this.UpdateMatrixLineSegment(linePoints[i],linePoints[i+1],isAdd);}return true;},UpdateMatrixLineSegment:function UpdateMatrixLineSegment(segmentStart,segmentEnd,isAdd){var startPoint=new $C.Point2D({Point2D:segmentStart}),endPoint=new $C.Point2D({Point2D:segmentEnd}),tempPoint,startX,startY,endX,endY,deltaX,deltaY,ratio,temp,interEnd,tempStartY,tempEndX,tempEndY,i,j,matrix=this.Matrix,addMetric=0,subtractMetric=0,yOffset,yExchanged,xIndex,yIndex,delta;if(segmentStart.x>segmentEnd.x){tempPoint=startPoint;startPoint=endPoint;endPoint=tempPoint;}temp=hPointToIndex.call(this,startPoint);startX=temp.col;startY=temp.row;temp=hPointToIndex.call(this,endPoint);endX=temp.col;endY=temp.row;if(startPoint.x!==endPoint.x){deltaX=endPoint.x-startPoint.x;deltaY=endPoint.y-startPoint.y;ratio=deltaY/deltaX;interEnd=new $C.Point2D({Point2D:endPoint});tempStartY=startY;for(i=startX;i<=endX;++i){if(i<0||i>=this.XCount){continue;}deltaX=(i+1)*this.XUnit-startPoint.x;if(i===endX){deltaX=endPoint.x-startPoint.x;}yOffset=deltaX*ratio;interEnd.x=(i+1)*this.XUnit;interEnd.y=startPoint.y+yOffset;temp=hPointToIndex.call(this,interEnd);tempEndX=temp.col;tempEndY=temp.row;yExchanged=false;if(tempStartY>tempEndY){temp=tempStartY;tempStartY=tempEndY;tempEndY=temp;yExchanged=true;}for(j=tempStartY;j<=tempEndY;++j){if(j<0||j>=this.YCount){continue;}xIndex=i;yIndex=j;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}if(!yExchanged){tempStartY=tempEndY;}}}else{if(startY>endY){temp=startY;startY=endY;endY=temp;}for(i=startY;i<=endY;++i){if(i<0||i>=this.YCount){continue;}if(startX<0||startX>=this.XCount){break;}xIndex=startX;yIndex=i;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygon:function UpdateMatrixPolygon(occupy,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);if(occupy.PointInObject(vertex)){occupied=true;break;}}if(!occupied){vertex=hIndexToPoint.call(this,xIndex,yIndex);currentUnit=new $C.Rect2D({x:vertex.x,y:vertex.y,width:this.XUnit,height:this.YUnit});for(k=0;k<polygonPoints.length;++k){if(currentUnit.PointInRectangle(polygonPoints[k])){occupied=true;break;}}}if(!occupied){len=polygonPoints.length;for(k=0;k<4;++k){occupied=false;for(l=0;l<len;++l){var lP1,lP2,lP3,lP4;lP1=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);lP2=hIndexToPoint.call(this,xIndex+kOffset[(k+1)%4][0],yIndex+kOffset[(k+1)%4][1]);lP3=polygonPoints[l];lP4=polygonPoints[(l+1)%len];occupied=hSegmentsIntersection.call(this,lP1,lP2,lP3,lP4);if(occupied){break;}}if(occupied){break;}}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygonWithCanvas:function UpdateMatrixPolygonWithCanvas(occupy,canvas,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}var ctx=canvas.getContext("2d");ctx.globalAlpha=0.01;ctx.beginPath();ctx.moveTo(polygonPoints[0].x,polygonPoints[0].y);for(i=1;i<polygonPoints.length;i++){ctx.lineTo(polygonPoints[i].x,polygonPoints[i].y);}ctx.closePath();ctx.fill();var imagedata=ctx.getImageData(0,0,canvas.width,canvas.height);var data=imagedata.data;function getAlpha(x,y){var i=((y*canvas.width)+x)*4;var a=data[i+3];return a/2;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);var alpha=getAlpha(vertex.x,vertex.y);if(alpha>0){occupied=true;break;}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixRect:function UpdateMatrixRect(occupy,isAdd,rotation){var isTilt,delta,x,y,xRange,yRange,lVal,i,j,addMetric=0,subtractMetric=0,matrix=this.Matrix,indexX,indexY;if(isAdd===undefined){isAdd=true;}rotation=rotation||$FR.Normal;isTilt=(rotation===$FR.Rotate45||rotation===$FR.Rotate315);if(isTilt){return hTreatTiltOccupation.call(this,occupy,(rotation===$FR.Rotate45));}delta=isAdd?1:-1;lVal=hGetRectPosition.call(this,occupy,true);x=lVal.x;y=lVal.y;xRange=lVal.xRange;yRange=lVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){indexY=y+i;indexX=x+j;matrix[indexY][indexX]+=delta;if(isAdd&&matrix[indexY][indexX]===2){addMetric++;}if(!isAdd&&matrix[indexY][indexX]===0){subtractMetric++;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixOccupyCircleObject:function UpdateMatrixOccupyCircleObject(occupy,center,radius){var x,y,xRange,yRange,i,j,xIndex,yIndex,circleOccupied={},returnVal,circleMatrix=this.MatrixOccupyCircleObject;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){if((yIndex<circleMatrix.length)&&(xIndex<circleMatrix[yIndex].length)){circleOccupied.c=center;circleOccupied.r=radius;circleMatrix[yIndex][xIndex].push(circleOccupied);}}}}return true;},UpdateMatrixOccupyObject:function UpdateMatrixOccupyObject(occupy,occupiedObject){var x,y,xRange,yRange,xIndex,yIndex,returnVal,i,j,rectMatrix=this.MatrixOccupyObject;returnVal=hGetRectPosition.call(this,occupy);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;rectMatrix[yIndex][xIndex].push(occupiedObject);}}return true;},UpdateMatrixOccupy:function UpdateMatrixOccupy(isDataLabel,occupy,dataLabelIndex){var x,y,xRange,yRange,returnVal,i,j,occupyMatrix=this.MatrixOccupy,xIndex,yIndex;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(isDataLabel){occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:1});}else{occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:0});}}}},IsFitPaddingWithBorder:function IsFitPaddingWithBorder(occupy,frame){var dataLabelPadding=this.dataLabelPadding;if(occupy.x<frame.x+dataLabelPadding||occupy.x+occupy.width+dataLabelPadding>frame.x+frame.width){return false;}if(occupy.y<frame.y+dataLabelPadding||occupy.y+occupy.height+dataLabelPadding>frame.y+frame.height){return false;}return true;},IsAccomdatableConsiderRotation:function IsAccomdatableConsiderRotation(hostMarker,occupy,position,rotation){var isFound,xCover,yCover,returnVal,markerPosition,col,row,rowColInfo;if(rotation===undefined){rotation=$FR.Normal;}returnVal=hGetRectRange.call(this,occupy);xCover=returnVal.xRange;yCover=returnVal.yRange;if((xCover>this.XCount)||(yCover>this.YCount)){return false;}markerPosition=hostMarker.GetCenter();rowColInfo=hPointToIndex.call(this,markerPosition);if(!rowColInfo.flag){return false;}row=rowColInfo.row;col=rowColInfo.col;isFound=hSearchInAreas.call(this,position,markerPosition,col,row,xCover,yCover);return isFound;},IsAccomdatableDataLabel:function IsAccomdatableDataLabel(hostMarker,occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=2){return false;}if(count===1){if(!hIsOccupiedByHostMarkerRect.call(this,hostMarker,x+j,y+i)){return false;}}}}return true;},IsAccomdatableConsiderLocation:function IsAccomdatableConsiderLocation(occupy,location){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<=xRange;++j){switch(location){case $GMDLP._TOP:if(i===yRange){continue;}break;case $GMDLP._BOTTOM:if(i===-1){continue;}break;case $GMDLP._LEFT:if(j===xRange){continue;}break;case $GMDLP._RIGHT:if(j===-1){continue;}break;default:}count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableConsiderLabelPaddingOnly:function IsAccomdatableConsiderLabelPaddingOnly(occupy,isExceptDataLabel){var returnVal,x,y,xRange,yRange,xIndex,yIndex,count,i;if(isExceptDataLabel){returnVal=this.IsAccomdatableNoPadding(occupy);if(!returnVal){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}return true;}return this.IsAccomdatableNoPadding(occupy);},IsAccomdatableNoPadding:function IsAccomdatableNoPadding(occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableCircle:function IsAccomdatableCircle(center,radius,occupy){var lX,lY,lXRange,lYRange,lVal,lCount,i,j;lVal=hGetRectPosition.call(this,occupy,false);if(lVal===null){return false;}lX=lVal.x;lY=lVal.y;lXRange=lVal.xRange;lYRange=lVal.yRange;for(i=0;i<lYRange;++i){for(j=0;j<lXRange;++j){lCount=this.Matrix[lY+i][lX+j];if(lCount>=2){return false;}if(lCount===1){if(!hIsOccupiedByHostMarkerCircle.call(this,center,radius,lX+j,lY+i)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingCircle:function IsAccomdatableConsiderAccuDistPaddingCircle(center,radius,occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,objects,i,j,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableCircle(center,radius,occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingRect:function IsAccomdatableConsiderAccuDistPaddingRect(occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,i,j,objects,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableNoPadding(occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}return true;},ToDraw:function ToDraw(graphObjManager){var xCount=this.XCount,yCount=this.YCount,matrix=this.Matrix,gridCellOccupied=[],i,j,k,gridPoints,point,tripleId,gridCell,formatLine;for(i=0;i<xCount;++i){for(j=0;j<yCount;++j){if(matrix[i][j]>=1){gridPoints=[];for(k=0;k<5;++k){point=hIndexToPoint.call(this,j+kOffset[k%4][0],i+kOffset[k%4][1]);gridPoints.push(point);}tripleId=new $C.TripleId({ObjectId:$GO.DssGraphDataLine});gridCell=new $C.PolyLineObject({TripleId:tripleId,GraphObjectManager:graphObjManager,PolyLine:gridPoints});formatLine=gridCell.mFormatLinePtr;formatLine.mLineColor=65280;formatLine.mLineThickness=1;gridCellOccupied.push(gridCell);}}}return gridCellOccupied;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GridMap","TextObject","ChartContext","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixDataLabelPosition");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumShapeType");var I=mstrmojo.chart,G=I.ChartConstants,D=I.model,E=D.enums,M=I.enums,H=E.EnumDSSGraphMarkerShape,J=M.EnumGraphMatrixDataLabelPosition,C=E.EnumShapeType,L={};function A(){var U=this.ChartContext,g=U.IsPieChart(),c=(U.IsBubbleChart()||U.IsScatterChart()),a=this.SinglePointObjects.length,Y,d=new I.Rect2D(),b,f=this.GridMap,X=this.PolyLineObjects,R=this.PolygonObjects,V=this.RectangleObjects,e=this.DataAreaFrame,W=this.CirclePieObjects;for(Y=0;Y<a;++Y){d.Reset(0,0,0,0);b=this.SinglePointObjects[Y].GetBoundingRect();if(U.RectangleIntersection(b,e,d)){f.UpdateMatrixRect(d);}}a=X.length;for(Y=0;Y<a;++Y){f.UpdateMatrixPolyLine(X[Y]);}a=R.length;var T=document.createElement("canvas");T.width=this.ChartContext.mGraphWidth;T.height=this.ChartContext.mGraphHeight;for(Y=0;Y<a;++Y){f.UpdateMatrixPolygonWithCanvas(R[Y],T);}a=V.length;for(Y=0;Y<a;++Y){d.Reset(0,0,0,0);if(U.RectangleIntersection(V[Y],e,d)){f.UpdateMatrixRect(d);if(c){f.UpdateMatrixOccupyObject(d,V[Y]);}}}a=W.length;for(Y=0;Y<a;++Y){var Q=W[Y].mCenter,Z=W[Y].mRadius,S=new I.Rect2D({x:Q.x-Z,y:Q.y-Z,height:Z*2,width:Z*2});f.UpdateMatrixCircle(Q,Z,true);if(g){f.UpdateMatrixOccupyCircleObject(S,Q,Z);}}}function K(S,b){var R=this.ChartContext,Y=R.IsLineChart(),T=R.IsAreaChart(),Z=(R.IsBubbleChart()||R.IsScatterChart()),a=false,V=R.GetGraphMatrixContext(),X=S,W,U,Q=b.HostMarkerPoint;W=V.mMarkerShape;if(W===H.DssGraphMarkerShapeCircle||W===H.DssGraphMarkerShapeRectangle||W===H.DssGraphMarkerShapeSquare){a=true;}if((Y&&!a)||T){if(S===J._BOTTOM){X=J._TOP;}else{if(S===J._TOP){X=J._BOTTOM;}}}else{if(Z){U=new I.Rect2D({x:0,y:0,width:R.mGraphWidth,height:R.mGraphHeight});if(S===J._BOTTOM){if(Q.y<=U.height/2){X=J._TOP;}else{X=J._BOTTOM;}}else{if(S===J._TOP){if(Q.y<=U.height/2){X=J._BOTTOM;}else{X=J._TOP;}}}}}return X;}function B(Y,X,Q){var R=Y.HostMarkerPoint,V=Y.CenterXOffset,S=Y.CenterYOffset,U=R.x,T=R.y,W=Y.Label.GetBoundingRect(true);switch(X){case J._BOTTOM:T+=S+Q+W.height*0.5;break;case J._TOP:T-=S+Q+W.height*0.5;break;case J._LEFT:U-=V+Q+W.width*0.5;break;case J._RIGHT:U+=V+Q+W.width*0.5;break;default:break;}Y.Label.MoveToCenter(U,T);}function F(Q,R,S){if(Q.x+Q.width+S<=R.x||Q.x>=R.x+R.width+S){return true;}return(Q.y+Q.height+S<=R.y||Q.y>=R.y+R.height+S);}mstrmojo.chart.DataLabelManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.DataLabelManager",GridMap:null,DataAreaFrame:null,ChartContext:null,seriesOptions:[],SinglePointObjects:[],PolygonObjects:[],PolyLineObjects:[],RectangleObjects:[],CirclePieObjects:[],init:function N(R){var T=this.ChartContext,Q,S;if(R&&R.DataArea){this.DataAreaFrame=R.DataArea;L.height=2;L.width=2;if(T!==null&&T!==undefined){Q=T.GetGraphMatrixContext();S=Q.getPadding(G.kDataLabel);}this.GridMap=new I.GridMap({Rect:this.DataAreaFrame,Unit:L,dataLabelPadding:S});}this.allowOverlap=(T&&T.allowOverlapBetweenDatalabels())||false;this.SinglePointObjects=[];this.PolygonObjects=[];this.PolyLineObjects=[];this.RectangleObjects=[];this.CirclePieObjects=[];this.seriesOptions=[];},PlaceDataLabels:function P(h,n,Q){var Y=false,a=this.ChartContext,w=a.GetGraphMatrixContext(),d=a.IsLineChart(),V=a.IsAreaChart(),W=a.IsPieChart(),f=(a.IsBubbleChart()||a.IsScatterChart()),z=w.isCombinationChart(),x,v,t,r,X,q,y,Z,o=new I.Rect2D(),U,T,u,c,S,g,l,e,s,b=w.getPadding(G.kDataLabel);this.allowOverlap=(a&&a.allowOverlapBetweenDatalabels())||false;this.GridMap.populate();s=this.GridMap;Z=w.mMarkerShape;Q=Q||!(a.isCombinationChart()||a.IsDualAxis());if(Z===H.DssGraphMarkerShapeCircle||Z===H.DssGraphMarkerShapeRectangle||Z===H.DssGraphMarkerShapeSquare){Y=true;}A.call(this);x=h.length;for(v=0;v<x;++v){var R=h[v],p=R.isValid;if(!p){continue;}if(z){T=R.SeriesId;u=R.SeriesInfo;c=this.seriesOptions[u];if(c){S=c.mRealSereisType;if(S===C._LINE||S===C._GENERIC){d=true;}else{if(S===C._CIRCLE||S===C._SQUARE||S===C._RECTANGLE){d=true;Y=true;}else{if(S===C._AREA){V=true;}else{if(S===C._PIE){W=true;}}}}}}y=this.allowOverlap;for(t=J._BOTTOM;t<=J._RIGHT;++t){if(W&&t>0){break;}X=J._BOTTOM;if(!W){X=K.call(this,t,R);B.call(this,R,X,b);}U=R.Label.GetBoundingRectNoRotation(true);q=this.DataAreaFrame;if(this.allowOverlap===false){y=s.IsFitPaddingWithBorder(U,q);if(!y){continue;}if(d&&Y){y=s.IsAccomdatableConsiderLocation(U,X);}else{if((d&&!W)||V){y=s.IsAccomdatableConsiderLabelPaddingOnly(U,true);}else{if(f){y=s.IsAccomdatableConsiderAccuDistPaddingRect(U);}else{if(W){y=s.IsAccomdatableConsiderAccuDistPaddingCircle(R.HostMarkerPoint,R.HostMarkerBound.width/2,U);}}}}if(!y){continue;}g=(n!==undefined&&n!==null)?n.length:0;for(r=0;r<g;++r){l=n[r];if(l.mIsShown){e=l.GetBoundingRect(true);y=F.call(this,U,e,b);if(!y){break;}}}}if(y){R.display=true;R.DataLabelLocation=X;o.Reset(0,0,0,0);if(a.RectangleIntersection(U,this.DataAreaFrame,o)){s.UpdateMatrixDataLabelMarker(true,o);if(f||W){s.UpdateMatrixOccupyObject(o,U);}}R.Label.mIsShown=true;if(n!==undefined&&n!==null){n.push(R.Label);}break;}}if(!y){R.Label.mIsShown=false;}}if(Q){this.GridMap.destroy();}return true;},UpdateMatrixDataLabel:function O(Q){return this.GridMap.UpdateMatrixDataLabelMarker(true,Q);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Point2D","GraphObjectManager","TripleId","FormatFont","ChartContext","GraphCollectionObject","FancyBoxObject","MarkerObject","FormatFill","StraightLineObject","TextObject","Rect2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMarkerShape","EnumBoxStyle","EnumLineStyle","EnumLegendLayout","EnumLegendMarkersStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantType","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphMarkerLayout","EnumDSSGraphLegendPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");var V=mstrmojo.chart,M=mstrmojo.chart.enums,L=M.EnumCollectionType.CT_TEXT,U=M.EnumMarkerShape,S=M.EnumBoxStyle,G=M.EnumLineStyle,K=M.EnumLegendLayout,r=M.EnumLegendMarkersStyle,o=V.gNullTripleId,N=0.75,s=16,A=0.5,h=0.15,c=0.9,F=1742,P=725,D=2;var T=mstrmojo.chart.model,O=T.enums,f=O.EnumDSSGraphMarkerShape,a=O.EnumDSSGraphType,d=O.EnumDSSGraphProperty,e=O.EnumDSSGraphObject,E=O.EnumVariantBool,B=E.VARIANT_FALSE,Z=O.EnumDSSExtraGraphProperty,p=O.EnumDSSGraphMarkerLayout,I=O.EnumDSSGraphLegendPosition;var C=0;function X(t){this.mLegendMarkerSize=t.mFontSize<s?t.mFontSize:s;this.mLegendMarkerSize=Math.floor(this.mLegendMarkerSize*N+1.5);if(this.mLegendMarkerSize<2){this.mLegendMarkerSize=2;}this.mItemMargin=Math.floor(this.mLegendMarkerSize*0.3);this.mEdgeMargin=Math.floor(this.mLegendMarkerSize*0.8);}function n(AI,z){var v=this.mChartContextPtr,AE=this.mDatasetPtr,t=this.mGraphOptionsLegend,AG,w,AF,AD,x,y,u,AC,AK,AA,AL,AB,AH,AJ;AG=AE.GetSeriesCount();w=new V.Rect2D();AJ=this.mLegendItemCount;for(AF=0;AF<AJ;++AF){AD=new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AF});x=new V.TextObject({TripleId:AD,GraphObjectManager:this,GraphCollectionObject:z});x.mIsShown=false;z.AddGraphObject(x);u=v.mGraphType;if(AF>=AG&&u!==a.DssGraphTypeGridChart){if(v.mGraphType===a.DssGraphTypePareto_Percent){AC=v.GetProperty(d.DssGraphCumulativePercentLabel,new V.TripleId({SeriesId:AF-AG}));if(AC){y=AC;}else{y="Cumulative Percent";}}else{if(u>=a.DssGraphTypeHiLo_Stock_Chart&&u<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){y=this.mStockMetricValue[this.mLegendItemIndexToStockMetricIndex[AF]];}}}else{if(t.mIsByGroup){y=AE.GetGroupLabel(AF,false);}else{y=AE.GetSeriesLabel(AF,false);}}x.SetText(y);AH=x.GetBoundingRect();this.AddToMapAndList(x);if(AH.width>w.width){w.width=AH.width;}}if(!v.mManualLayoutMode||t.mReposition){AA=Math.floor(AI.width*h+0.5);if(t.mLegendPosition===I.DssGraphLegendPositionBottom){AA=AI.width;}AK=(w.width<AA)?w.width:AA;}else{AL=v.GetLocation(d.DssGraphLegendLocation);if(AL.width===0){AA=Math.floor(AI.width*h+0.5);AK=(w.width<AA)?w.width:AA;}else{AK=AL.width-2*this.mEdgeMargin;if(t.mLegendMarkersStyle===p.DssGraphMarkerLeft||t.mLegendMarkersStyle===p.DssGraphMarkerRight){AK-=this.mLegendMarkerSize*(1+A);}}}w.width=0;for(AF=0;AF<AJ;++AF){AB=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AF}));AB.SetTextWidthLimit(AK);AH=AB.GetBoundingRect();if(AH.height>w.height){w.height=AH.height;}if(AH.width>w.width){w.width=AH.width;}}return w;}function Y(){var t=this.mChartContextPtr.mGraphType;switch(t){case a.DssGraphTypeVertical_Area_Stacked:case a.DssGraphTypeVertical_Area_BiPolar_Stacked:case a.DssGraphTypeVertical_Area_DualAxis_Stacked:case a.DssGraphTypeVertical_Area_Percent:case a.DssGraphTypeVertical_Bar_Stacked:case a.DssGraphTypeVertical_Bar_DualAxis_Stacked:case a.DssGraphTypeVertical_Bar_BiPolar_Stacked:case a.DssGraphTypeVertical_Bar_Percent:case a.DssGraphTypeVertical_Line_Stacked:case a.DssGraphTypeVertical_Line_BiPolar_Stacked:case a.DssGraphTypeVertical_Line_DualAxis_Stacked:case a.DssGraphTypeVertical_Line_Percent:case a.DssGraphRadar_Line_Stacked:case a.DssGraphTypePareto:case a.DssGraphTypePareto_Percent:return true;default:return false;}}function J(AV,AG){var y=this.mGraphOptionsLegend,Ac=n.call(this,AV,AG),AX=new V.Rect2D(),Ae=this.mItemMargin,AJ=this.mItemMargin,AA=this.mDatasetPtr.GetSeriesCount(),AS=new V.Rect2D({x:0,y:0,width:this.mLegendMarkerSize,height:this.mLegendMarkerSize}),AE=0,Ai=0,AZ,Aj,AC,AI,AN,Ab,AO,AH,AQ,v,AT,Af,t,z,AP,Ad,AK,AD,AU,AY,u,AF,x,Aa,AM,AL,AB,Ah,w,Ag,AR;switch(y.mLegendMarkersStyle){case p.DssGraphMarkerLeft:case p.DssGraphMarkerRight:AE=Math.floor(Ac.width+AS.width*(1+A));Ai=Ac.height;break;case p.DssGraphMarkerCentered:AE=Ac.width;Ai=Ac.height;break;case p.DssGraphMarkerAbove:case p.DssGraphMarkerBelow:AE=Ac.width;Ai=Math.floor(Ac.height+AS.height*(1+A));break;default:break;}if(Ai===0){Ai=1;}if(AE===0){AE=1;}AZ=0;Aj=0;AC=this.mLegendItemCount;switch(y.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:AI=Math.floor((AV.height-Ae)/(Ai+Ae));if(AI===0){AI=1;}AZ=Math.floor(this.mLegendItemCount/AI);if(AZ*AI<this.mLegendItemCount){AZ++;}Aj=Math.floor(this.mLegendItemCount/AZ);if(Aj*AZ<this.mLegendItemCount){Aj++;}break;case I.DssGraphLegendPositionBottom:AI=Math.floor((AV.width-AJ)/(AE+AJ));if(AI===0){AI=1;}Aj=Math.floor(this.mLegendItemCount/AI);if(Aj*AI<this.mLegendItemCount){Aj++;}AZ=Math.floor(this.mLegendItemCount/Aj);if(Aj*AZ<this.mLegendItemCount){AZ++;}break;case I.DssGraphLegendPositionFreeFloat:AN=this.mChartContextPtr.GetLocation(d.DssGraphLegendLocation);AX.y=AN.y;AX.x=AN.x;if(!y.mRecalculate){AX.width=AN.width;AX.height=AN.height;Ab=Math.floor((AX.height-this.mEdgeMargin*2+D)/Ai);AO=Math.floor((AX.width-this.mEdgeMargin*2+D)/AE);if(Ab*AO<AC){AC=Ab*AO;Aj=Ab;AZ=AO;}else{AZ=Math.floor(this.mLegendItemCount/Ab);if(AZ===0){AZ=1;}if(AZ*Ab<this.mLegendItemCount){AZ++;}Aj=Math.floor(this.mLegendItemCount/AZ);if(Aj*AZ<this.mLegendItemCount){Aj++;}}if(Aj>0){Ae=Math.floor((AX.height-Aj*Ai-this.mEdgeMargin*2)/Aj);}if(AZ>0){AJ=Math.floor((AX.width-AZ*AE-this.mEdgeMargin*2)/AZ);}}else{AI=Math.floor((AV.height-Ae)/(Ai+Ae));if(AI===0){AI=1;}AZ=Math.floor(this.mLegendItemCount/AI);if(AZ*AI<this.mLegendItemCount){AZ++;}Aj=Math.floor(this.mLegendItemCount/AZ);if(Aj*AZ<this.mLegendItemCount){Aj++;}}break;default:break;}if(y.mLegendPosition!==I.DssGraphLegendPositionFreeFloat||y.mRecalculate){AX.height=Math.floor(Ai*Aj+Ae*Aj+this.mEdgeMargin*2);AX.width=Math.floor(AE*AZ+AJ*AZ+this.mEdgeMargin*2);if(y.mRecalculate){if(!this.mIsExpanded){AH=this.mChartContextPtr.mGraphWidth;AQ=this.mChartContextPtr.mGraphHeight;if(AX.x+AX.width>AH){AX.width=AH-AX.x;}if(AX.y+AX.height>AQ){AX.height=AQ-AX.y;}}}}if(this.mIsExpanded){switch(y.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:this.mArea.width=AX.width*1.8+530;if(this.mArea.width>F){this.mArea.width=F;}this.mChartContextPtr.SetGraphSize(this.mArea.x+this.mArea.width+this.mChartContextPtr.vdWidth(C),this.mChartContextPtr.mGraphHeight);break;case I.DssGraphLegendPositionBottom:this.mArea.height=AX.height*0.4+400;if(this.mArea.height>P){this.mArea.height=P;}this.mChartContextPtr.SetGraphSize(this.mChartContextPtr.mGraphWidth,this.mArea.y+this.mArea.height+this.mChartContextPtr.vdHeight(C));break;case I.DssGraphLegendPositionFreeFloat:v=this.mChartContextPtr.mGraphWidth;AT=this.mChartContextPtr.mGraphHeight;if(AX.x+AX.width>this.mChartContextPtr.mGraphWidth){v=AX.x+AX.width+this.mChartContextPtr.vdWidth(C);}if(AX.y+AX.height>this.mChartContextPtr.mGraphHeight){AT=AX.y+AX.height+this.mChartContextPtr.vdHeight(C);}this.mChartContextPtr.SetGraphSize(v,AT);break;default:break;}}switch(y.mLegendPosition){case I.DssGraphLegendPositionRight:AX.y=Math.floor(this.mArea.y+this.mArea.height/2-AX.height/2);AX.x=Math.floor(this.mArea.x+this.mArea.width-AX.width);break;case I.DssGraphLegendPositionLeft:AX.y=Math.floor(this.mArea.y+this.mArea.height/2-AX.height/2);AX.x=this.mArea.x;break;case I.DssGraphLegendPositionBottom:AX.y=this.mArea.y+this.mArea.height-AX.height;AX.x=Math.floor(this.mArea.x+(this.mArea.width-AX.width)/2);break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}if(!this.mChartContextPtr.mManualLayoutMode||y.mReposition){this.mChartContextPtr.PutLocation(d.DssGraphLegendLocation,AX);}for(Af=0;Af<AC;++Af){t=Math.floor(Af/AZ);z=Af-t*AZ;AP=0;switch(y.mLegendMarkersStyle){case p.DssGraphMarkerRight:AP=AJ;break;case p.DssGraphMarkerCentered:case p.DssGraphMarkerAbove:case p.DssGraphMarkerBelow:AP=AJ/2;break;}Ad=new V.Point2D();Ad.x=AX.x+(AE+AJ)*z+this.mEdgeMargin+AP;Ad.y=Math.floor(AX.y+(Ai+Ae)*t+this.mEdgeMargin+Ae/2);AK=new V.Point2D();AD=new V.Point2D();switch(y.mLegendMarkersStyle){case p.DssGraphMarkerLeft:AK.x=Math.floor(Ad.x+AS.width/2);AK.y=Math.floor(Ad.y+Ai/2);AD.x=Math.floor(Ad.x+AS.width*(1+A));AD.y=Ad.y;break;case p.DssGraphMarkerRight:AK.x=Math.floor(Ad.x+AE-AS.width/2);AK.y=Math.floor(Ad.y+Ai/2);AD.x=Ad.x;AD.y=Ad.y;break;case p.DssGraphMarkerCentered:AK.x=Math.floor(Ad.x+AE/2);AK.y=Math.floor(Ad.y+Ai/2);AD.x=Ad.x;AD.y=Ad.y;break;case p.DssGraphMarkerAbove:AK.x=Math.floor(Ad.x+AE/2);AK.y=Math.floor(Ad.y+AS.height/2);AD.x=Ad.x;AD.y=Ad.y+AS.height*(1+A);break;case p.DssGraphMarkerBelow:AK.x=Math.floor(Ad.x+AE/2);AK.y=Math.floor(Ad.y+Ai-AS.height/2);AD.x=Ad.x;AD.y=Ad.y;break;default:break;}AU=Y.call(this)?(this.mLegendItemCount-Af-1):Af;AY=new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AU});AF=this.mChartContextPtr.mGraphType;if(AF>=a.DssGraphTypeHiLo_Stock_Chart&&AF<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart&&Af>=AA){var AW=this.mLegendItemIndexToStockMetricIndex[Af];if(AW===undefined){break;}x=AW.value;if(this.mStockMetricLayout[x]===e.DssGraphMetricVerticalLine||this.mStockMetricLayout[x]===e.DssGraphMetricLine){Aa=new V.Point2D({Point2D:AK});AM=this.mLegendMarkerSize/2;AL=this.mStockMetricLayout[x]===e.DssGraphMetricVerticalLine?new V.Point2D({x:Aa.x,y:Math.floor(Aa.y-1.75*AM)}):new V.Point2D({x:Math.floor(Aa.x-1.75*AM),y:Aa.y});AB=this.mStockMetricLayout[x]===e.DssGraphMetricVerticalLine?new V.Point2D({x:Aa.x,y:Math.floor(Aa.y+1.75*AM)}):V.Point2D({x:Math.floor(Aa.x+1.75*AM),y:Aa.y});Ah=new V.StraightLineObject({TripleId:AY,GraphObjectManager:this,StartPoint:AL,EndPoint:AB});w=new V.FormatLine({LineStyle:G.LS_SHORT_DASH,Alpha:255,LineThickness:1,LineColor:V.gBlack.ToInteger()});Ah.SetFormatLine(w);this.mLegendMarkerLines.push(Ah);u=new V.MarkerObject({TripleId:AY,GraphObjectManager:this,MarkerPosition:AK,MarkerShape:U.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});u.mIsShown=false;}else{Ag=this.mStockMetricLayout[x]===e.DssGraphMetricBar?f.DssGraphMarkerShapeRectangle:f.DssGraphMarkerShapeHouse;u=new V.MarkerObject({TripleId:AY,GraphObjectManager:this,MarkerPosition:AK,MarkerShape:Ag,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});u.SetFormatFill(new V.FormatFill({SimpleColor:V.gBlack.ToInteger()}));}}else{u=new V.MarkerObject({TripleId:AY,GraphObjectManager:this,MarkerPosition:AK,MarkerShape:U.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});}this.AddToMapAndList(u);AR=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AU}));AR.SetRect(Ac);AR.MoveTo(AD.x,AD.y);AR.mIsShown=true;}return AX;}function W(){var t=this.mDatasetPtr;if(!this.mGraphOptionsLegend.mIsByGroup){return t.GetSeriesCount();}return t.GetGroupCount();}function Q(){var z=this.mChartContextPtr,x,w,y=[],v,t,u;x=z.GetLocationRect(d.DssGraphLegendLocation);w=new V.Point2D({x:Math.floor(x.x+x.width/2),y:Math.floor(x.y+x.height/2)});y[0]=w.Distance(new V.Point2D({x:z.mGraphWidth,y:Math.floor(z.mGraphHeight/2)}));y[1]=w.Distance(new V.Point2D({x:0,y:Math.floor(z.mGraphHeight/2)}));y[2]=w.Distance(new V.Point2D({x:Math.floor(z.mGraphWidth/2),y:z.mGraphHeight}));v=y[0];t=0;for(u=1;u<3;++u){if(y[u]<v){v=y[u];t=u;}}return(t+1);}function H(){var AA=this.mChartContextPtr,u=this.mGraphOptionsLegend,x,t,y,z,w,v;x=AA.GetProperty(d.DssGraphShowLegendText,o);if(x){u.mShowLegend=(x!==B);}x=AA.GetProperty(d.DssGraphMarkerLayout,o);if(x){u.mLegendMarkersStyle=x;}x=AA.GetProperty(d.DssGraphLegendLock,o);if(x){u.mLegendPosition=x;if(!AA.mManualLayoutMode&&u.mLegendPosition===K.LL_LegendFreeFloat){u.mLegendPosition=K.LL_LegendOnRightSide;}}if(AA.mManualLayoutMode){u.mLegendPosition=K.LL_LegendFreeFloat;x=AA.GetProperty(d.DssGraphInfoRecalculateLegend,o);if(x){u.mRecalculate=x!==B;if(u.mRecalculate){x=AA.GetProperty(Z.DssGraphInfoRecalculateChartFrame,o);if(x){u.mReposition=x!==B;if(u.mReposition){u.mLegendPosition=Q.call(this);}}}}x=AA.GetProperty(d.DssGraphAxisAutoFit,o);if(x){u.mAxisLabelsAutoFit=x!==B;}if(u.mAxisLabelsAutoFit){u.mRecalculate=true;u.mReposition=true;u.mLegendPosition=Q.call(this);}}u.mIsByGroup=AA.isLegendByGroup();if(!AA.mManualLayoutMode||u.mRecalculate){x=AA.GetProperty(Z.DssGraphInfoAutosizeHorizontal,o);t=AA.GetProperty(Z.DssGraphInfoAutosizeVertical,o);if(x&&t){this.mIsExpanded=x!==B&&t!==B;}this.mIsExpanded=false;}this.mLegendItemCount=W.call(this);w=AA.mGraphType;if(w===a.DssGraphTypePareto_Percent){y=false;z=1;x=AA.GetProperty(Z.DssGraphUseChartArea,o);if(x){y=x!==B;}if(y){x=AA.GetProperty(Z.DssGraphChartAreaNumber,o);if(x){z=x;if(z>this.mLegendItemCount){z=this.mLegendItemCount;}}}this.mLegendItemCount+=z;}else{if(w>=a.DssGraphTypeHiLo_Stock_Chart&&w<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){for(v=0;v<3;++v){x=AA.GetProperty(d.DssGraphShowMetric1+v,o);if(x){if(x!==B){this.mLegendItemIndexToStockMetricIndex[this.mLegendItemCount++]=v;x=AA.GetProperty(d.DssGraphMetric1Value+v,o);if(x){this.mStockMetricValue[v]=x;}x=AA.GetProperty(d.DssGraphMetric1Style+v,o);if(x){this.mStockMetricLayout[v]=x;}}}}}}}mstrmojo.chart.Legend=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Legend",mDatasetPtr:null,mLegendArea:null,mArea:null,mGraphOptionsLegend:null,mStockMetricLayout:null,mStockMetricValue:null,mLegendMarkerLines:null,mItemMargin:0,mEdgeMargin:0,mLegendMarkerSize:0,mIsExpanded:false,mLegendItemCount:0,mLegendItemIndexToStockMetricIndex:null,init:function l(t){this._super(t);this.mDatasetPtr=t.DataSet||null;this.mLegendArea=t.Area?new V.Rect2D({Rect2D:t.Area}):null;this.mArea=t.Area?new V.Rect2D({Rect2D:t.Area}):null;this.mGraphOptionsLegend={mShowLegend:true,mShowSeriesTitles:true,mLegendPosition:K.LL_LegendOnRightSide,mLegendMarkersStyle:r.LMS_LeftOfText,mLegendBoxStyle:S.BS_NOFRAME,mLegendItemsNum:0,mAxisLabelsAutoFit:true,mVertical:true,mRecalculate:false,mReposition:false,mIsByGroup:false};this.mStockMetricLayout=[0,0,0];this.mStockMetricValue=new Array(3);this.mLegendMarkerLines=[];this.mLegendItemIndexToStockMetricIndex={};H.call(this);},GenerateMapAndList:function k(){var y=this.mChartContextPtr,x,u,v,w,t;x=new V.TripleId({ObjectId:e.DssGraphLegendText});u=new V.GraphCollectionObject({TripleId:x,GraphObjectManager:this,CollectionType:L});this.AddToMap(u);v=y.GetFormatFont(new V.TripleId({ObjectId:e.DssGraphLegendText}));u.SetFormatFont(v);X.call(this,v);this.mLegendArea=J.call(this,this.mArea,u);w=y.GetProperty(d.DssGraphLegendBox,o);if(w===null||w===undefined){w=S.BS_NOFRAME;}x=new V.TripleId({ObjectId:e.DssGraphLegendArea});t=new V.FancyBoxObject({TripleId:x,GraphObjectManager:this,BoxStyle:w,Area:this.mLegendArea});this.AddToMapAndList(t);},GetLegendArea:function j(){return this.mLegendArea;},CalculateFrame:function R(x,w,v){var t,u;t=this.GetLegendArea();switch(this.mGraphOptionsLegend.mLegendPosition){case I.DssGraphLegendPositionRight:if(t.width<this.mArea.width*c){v.width=t.x-x-this.mArea.x;}break;case I.DssGraphLegendPositionLeft:if(t.width<this.mArea.width*c){u=this.mArea.x+this.mArea.width;v.x=t.x+t.width+x;v.width=u-v.x;}break;case I.DssGraphLegendPositionBottom:if(t.height<this.mArea.height*c){v.height=t.y-w-this.mArea.y;}break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}},Draw:function b(){var v=this.mGraphObjectList,w=this.mLegendMarkerLines,t,u;v[0].Draw();t=w.length;for(u=0;u<t;++u){w[u].Draw();}t=v.length;for(u=1;u<t;++u){v[u].Draw();}},SetFormatLineOfLegendMarkerLine:function g(AA,AD,w){var u=this.mChartContextPtr,x,y,AC,z,t,AB;if(w===undefined){w=false;}x=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AD}));if(!x){return false;}y=x.mMarkerPosition;AC=x.mMarkerSize;z=u.mIsGraphMatrix?1:1.75;t=w?new V.Point2D({x:y.x,6:y.y-z*AC}):new V.Point2D({x:y.x-z*AC,y:y.y});AB=w?new V.Point2D({x:y.x,y:y.y+z*AC}):new V.Point2D({x:y.x+z*AC,y:y.y});var v=new V.StraightLineObject({TripleId:new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AD}),GraphObjectManager:this,StartPoint:t,EndPoint:AB});v.SetFormatLine(AA);this.mLegendMarkerLines.push(v);return true;},UpdateFormatForLegendMarker:function q(t,z,w,y,u){if(t<0||t>=this.mLegendItemCount){return ;}y=(y!==undefined)?y:false;u=(u!==undefined)?u:false;var x=new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:t});var v=this.GetGraphObject(x);if(!v){return ;}if(z){v.SetFormatFill(z);}if(w){if(y){this.SetFormatLineOfLegendMarkerLine(w,t,u);}else{v.SetFormatLine(w);}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphRegressionType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumDSSGraphOffScaleType","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphTrendLineOptions","GraphObject","Axis","FormatLine","Point2D","BezierCurve","CurveLineObject");mstrmojo.requiresCls("mstrmojo.VisUtility");var f=mstrmojo.chart,g=f.model.enums,d=mstrmojo.VisUtility,Y=f.enums,N=Y.EnumDSSGraphOffScaleType,U=g.EnumDSSGraphType,E=g.EnumShapeType,c=Y.EnumLineJoinType,C=Y.EnumLineStyle,D=g.EnumDSSGraphRegressionType,F=1e-10,K=100,I=0.25,J=0.01,h=0.15,O=0.3,a=1,P=1.001,B=0,R=1;function Q(j){var k=j.x;j.x=j.y;j.y=k;}function H(o){var k,j,n,l,q=this.mCoefficients,p=this.mTrendLineOptions.mRegressionType;j=o.length;for(k=0;k<j;++k){n=o[k];if(typeof (n)==="number"){q.push(n);}else{if(typeof (n)==="string"&&p===D.DssGraphRegressionExp){if(n.indexOf("Ln")===0){l=n.substr(2);n=parseFloat(l);if(isNaN(n)){return false;}this.subType=R;q.push(n);}}else{return false;}}}if((j===1)&&(p===D.DssGraphRegressionExp||p===D.DssGraphRegressionLog||p===D.DssGraphRegressionPow)){this.deformed=true;}return true;}function X(n,l){var j=n.mOptions.mOffScaleType,k;n.mOptions.mOffScaleType=N.DssGraphOffScaleShow;k=n.GetPositionByValue(l);n.mOptions.mOffScaleType=j;return k;}function b(AD){var p=this.mChartContextPtr,z=this.mFormatLinePtr.mLineStyle,u,s,AE;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||p.mUseAnimation){return ;}p.NewPath();var q=AD.length;if(q<2){return ;}var k=f.FormatLine.getLinePattern(z),r=k.length,w=0,o=0,l=[],v=[];for(u=0;u<q;++u){v.push(0);l.push(0);}var AC=AD[0].x;var AB=AD[0].y;var AA=0.05;if(z===C.LS_DOT_DOT_DOT){AA=0.03;k[r-1]*=3;}else{if(z===C.LS_DOT){AA=0.005;}}for(AE=0;AE<=1;AE+=AA/q){for(u=1;u<q;++u){for(s=0;s<q-u;++s){if(u===1){l[s]=AD[s].x*(1-AE)+AD[s+1].x*AE;v[s]=AD[s].y*(1-AE)+AD[s+1].y*AE;continue;}l[s]=l[s]*(1-AE)+l[s+1]*AE;v[s]=v[s]*(1-AE)+v[s+1]*AE;}}o+=Math.sqrt((AC-l[0])*(AC-l[0])+(AB-v[0])*(AB-v[0]));if(o>=k[w]){if(w%2===0){if(this.mIsVertical){p.MoveTo(AC,AB);p.LineTo(l[0],v[0]);}else{p.MoveTo(AB,AC);p.LineTo(v[0],l[0]);}}w=(w+1)%r;o=0;AC=l[0];AB=v[0];}}}function A(o,k,l,q,n){var p,j={};j.usedDefaultValueX=false;switch(o){case D.DssGraphRegressionLog:p=k;k*=l;if(k-p>n){k=p+n;j.usedDefaultValueX=true;}j.startX=k;break;case D.DssGraphRegressionExp:k+=l/Math.pow(q,k*0.25);j.startX=k;break;case D.DssGraphRegressionPoly:k+=l;j.startX=k;break;}return j;}function e(j,z,w,r,y,v,p,l){var AB=0,o,n=0,u,s,k,t,x,q,AA;for(x=z;x<w;){l.push(x);l.push(G.call(this,x));q=x;AA=A.call(this,j,x,r,p,y);x=AA.startX;t=AA.usedDefaultValueX;if(!t){AB=L.call(this,q);n=L.call(this,x);}o=Math.abs(AB);u=Math.abs(n-AB);if(v===0){s=this.mpXAxis.GetPositionByValue(q);k=this.mpXAxis.GetPositionByValue(x);}while(!t&&(x<w)&&((v===0&&Math.abs(k-s)<5)||(v!==0&&Math.abs(x-q)<v)||(o<=K&&o>I&&u<h*o)||(o<=I&&o>J&&u<O*o)||(o<=J&&u<a*o))){AA=A.call(this,j,x,r,p,y);x=AA.startX;t=AA.usedDefaultValueX;if(!t){n=L.call(this,x);u=Math.abs(n-AB);}if(v===0){k=this.mpXAxis.GetPositionByValue(x);}}if(x>=w){l.push(w);l.push(G.call(this,w));return ;}}}function W(){var n=this.mTrendLineOptions.mRegressionType,x,j=this.mTrendLineDataValues,r=this.mCoefficients,w=r.length-1,k=j.length,AE=[],l,AB,v,AA,t,AF,AD,o,q,z,AC=16,y,p;o=[];for(x=0;2*x<k-k%2;++x){if(j[2*x]!==null&&j[2*x+1]!==null){AE.push(j[2*x]);AE.push(j[2*x+1]);}}l=AE.length;if(l<2){this.isValid=false;return ;}AB=AE[0];v=AE[l-l%2-2];y=(v-AB)/AC;AA=G.call(this,AB);t=G.call(this,v);AF=this.mpXAxis.GetPositionByValue(AB);AD=this.mpYAxis.GetPositionByValue(AA);this.startPoint={x:AF,y:AD};AF=this.mpXAxis.GetPositionByValue(v);AD=this.mpYAxis.GetPositionByValue(t);this.endPoint={x:AF,y:AD};if(y<F){this.deformed=true;}if(this.deformed){o.push(AE[0]);o.push(AE[1]);o.push(AE[l-l%2-2]);o.push(AE[l-l%2-1]);}else{var u=this.mpXAxis.GetValueForUnit(),s;if(u!==undefined&&u!==null){s=5*u;}else{s=0;}switch(n){case D.DssGraphRegressionNone:break;case D.DssGraphRegressionLinear:o=AE;break;case D.DssGraphRegressionLog:if(r[1]!==0){q=1+Math.SQRT2/Math.pow(Math.abs(r[1]),0.25);}q=Math.max(q,P);e.call(this,n,AB,v,q,y,s,0,o);break;case D.DssGraphRegressionExp:if(this.subType===R){p=Math.pow(Math.E,r[1]);}else{p=r[1];}if((r[0]!==0)&&(p!==0)){q=Math.pow(24/Math.abs(r[0]),0.25)/Math.abs(Math.log(p));q=Math.min(q,y);q=Math.max(q,s);e.call(this,n,AB,v,q,y,s,p,o);break;}else{for(z=AB;z<v;){o.push(z);o.push(G.call(this,z));z+=y;if(z>=v){o.push(v);o.push(G.call(this,v));break;}}}break;case D.DssGraphRegressionPow:for(z=AB;z<v;){o.push(z);o.push(G.call(this,z));z+=y;if(z>=v){o.push(v);o.push(G.call(this,v));break;}}break;case D.DssGraphRegressionPoly:q=1;if(w>1){q=1/Math.pow(Math.abs(r[w]),1/w);}else{q=y;}q=Math.min(y,q);q=Math.max(q,s);e.call(this,n,AB,v,q,y,s,0,o);break;default:break;}}this.mCalcValues=o;}function G(n){var l=this.mTrendLineOptions.mRegressionType,p,o=this.mCoefficients,j,k;switch(l){case D.DssGraphRegressionNone:p=null;break;case D.DssGraphRegressionLinear:p=null;break;case D.DssGraphRegressionLog:p=o[0]+o[1]*Math.log(n);break;case D.DssGraphRegressionExp:switch(this.subType){case B:p=o[0]*Math.pow(o[1],n);break;case R:p=o[0]*Math.pow(Math.E,o[1]*n);break;}break;case D.DssGraphRegressionPow:p=o[0]*Math.pow(n,o[1]);break;case D.DssGraphRegressionPoly:j=o.length-1;p=o[0];for(k=1;k<=j;++k){p+=o[k]*Math.pow(n,k);}break;default:p=null;break;}return p;}function L(n){var l=this.mTrendLineOptions.mRegressionType,p,o=this.mCoefficients,j,k;switch(l){case D.DssGraphRegressionNone:p=null;break;case D.DssGraphRegressionLinear:p=null;break;case D.DssGraphRegressionLog:p=o[1]/n;break;case D.DssGraphRegressionExp:switch(this.subType){case B:p=o[0]*Math.log(o[1])*Math.pow(o[1],n);break;case R:p=o[0]*o[1]*Math.pow(Math.E,o[1]*n);}break;case D.DssGraphRegressionPow:p=o[0]*o[1]*Math.pow(n,o[1]-1);break;case D.DssGraphRegressionPoly:j=o.length-1;p=0;for(k=1;k<=j;++k){p+=o[k]*k*Math.pow(n,k-1);}break;default:p=null;break;}return p;}function T(r,o,q,p,k){var j,n=q,l=p;if(r){if(n>k){if(l>o&&l<k){n=(o+2*l)/3;}else{n=(o+2*k)/3;}}if(l<o||l<n){l=(n+k)/2;}}else{if(n<k){if(l<o&&l>k){n=(o+2*l)/3;}else{n=(o+2*k)/3;}}if(l>o||l>n){l=(n+k)/2;}}j={control1:n,control2:l};return j;}function S(r,l,o,n,k){var j,p=this.mCoefficients,q;if(r===D.DssGraphRegressionPow){if((p[1]<0&&p[0]>0)||(p[1]>0&&p[0]<0)){j=T(false,l,o,n,k);}else{if((p[1]>0&&p[0]>0)||(p[1]<0&&p[0]<0)){j=T(true,l,o,n,k);}}}else{if(r===D.DssGraphRegressionLog){if(p[1]>0){j=T(true,l,o,n,k);}else{if(p[1]<0){j=T(false,l,o,n,k);}}}else{if(r===D.DssGraphRegressionExp){if(this.subType===R){q=Math.pow(Math.E,p[1]);}else{q=p[1];}if((q<1&&p[0]>0)||(q>1&&p[0]<0)){j=T(false,l,o,n,k);}else{if((q>1&&p[0]>0)||(q<1&&p[0]<0)){j=T(true,l,o,n,k);}}}}}if(j===undefined||j===null){j={control1:o,control2:n};}return j;}mstrmojo.chart.TrendLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.TrendLineObject",mpXAxis:null,mpYAxis:null,mTrendLineOptions:null,mDataArea:null,mDepthOffset:null,mIsVertical:false,mTextPtr:null,mRealObjectId:U.DssGraphTypeReserved,mCurveLinePtr:null,mMinXLogical:0,mMaxXLogical:0,mMinYLogical:0,mMaxYLogical:0,mTrendLineType:0,mCoefficients:[],mTrendLineDataValues:[],mCalcValues:[],mBezierCurves:[],identity:null,isValid:null,subType:B,deformed:false,startPoint:{},midPoint:{},endPoint:{},init:function Z(k){var j=0,l;this._super(k);this.deformed=false;this.mCoefficients=[];this.mTrendLineDataValues=[];if(k){if(k.RealObjectId){this.mRealObjectId=k.RealObjectId;}if(k.XAxis){this.mpXAxis=k.XAxis;}if(k.YAxis){this.mpYAxis=k.YAxis;}if(k.TrendLineOptions){this.mTrendLineOptions=k.TrendLineOptions;}this.mDataArea=k.DataArea||new f.Rect2D();this.mDepthOffset=k.DepthOffset||new f.Point2D();this.mIsVertical=k.IsVertical||false;if(k.Coefficients){this.isValid=H.call(this,k.Coefficients);}else{this.isValid=false;}if(k.TrendLineValues){this.mTrendLineDataValues=k.TrendLineValues;}if(k.Identity){this.identity=k.Identity;}}this.startPoint={};this.midPoint={};this.endPoint={};this.mCalcValues=[];W.call(this);this.mBezierCurves=[];if(!this.mIsVertical){j=this.mDepthOffset.x;this.mDepthOffset.x=this.mDepthOffset.y;this.mDepthOffset.y=j;}if(this.mpXAxis){l=this.mpXAxis.GetMinMaxLogicalCoord();this.mMinXLogical=l.Min;this.mMaxXLogical=l.Max;}if(this.mpYAxis){l=this.mpYAxis.GetMinMaxLogicalCoord();this.mMinYLogical=l.Min;this.mMaxYLogical=l.Max;}},Draw:function V(){var j=this.mChartContextPtr,o=this.mBezierCurves,l=j.GetLineJoin(),n,u,r=[];if(!this.isValid){return ;}j.SetLineJoin(c.LJT_ROUND);this.SetLineWidth();u=o.length;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||j.mUseAnimation){j.NewPath();o[0].MoveToStart(j);for(n=0;n<u;++n){o[n].CurveToEnd(j);}}else{for(n=0;n<u;++n){o[n].GetControlPoints(r);b.call(this,r);this.ApplyLineFormat();}}if(this.isClosePath){j.ClosePath();}if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||j.mUseAnimation){this.ApplyLineFormat();}j.SetLineJoin(l);for(n=0;n<u;++n){var k=o[n],t=new f.Point2D({Point2D:k.mP0}),s=new f.Point2D({Point2D:k.mP1}),q=new f.Point2D({Point2D:k.mP2}),p=new f.Point2D({Point2D:k.mP3});if(!this.mIsVertical){t.swap();s.swap();q.swap();p.swap();Q.call(this,this.startPoint);Q.call(this,this.midPoint);Q.call(this,this.endPoint);}r.push(t);r.push(s);r.push(q);r.push(p);}j.FinishDrawCurves(r,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},CreateTrendLine:function M(){var AR,AQ,n=this.mTrendLineOptions,AF=n.mRegressionType,z,y,k,AX,AM,AO=[],AP,AD=new f.Point2D(),u=new f.Point2D(),AH,AG,AL,AK,w,v,AT,AJ,AW,x,AU,AC,AB,t,s,o,l,AA,AS=this.mTrendLineDataValues,AE=AS.length,p,r,AN=this.mBezierCurves,AI=0,AV,q=null;if(!this.isValid){return q;}AE=AE-(AE%2);if(AF===D.DssGraphRegressionLinear){if(n.mSeasonal){for(AR=0;2*AR<AE;++AR){z=AS[2*AR];y=AS[2*AR+1];if(z!==null&&z!==undefined&&y!==null&&y!==undefined){k=X.call(this,this.mpXAxis,z);AX=X.call(this,this.mpYAxis,y);if(k!==undefined&&k!==null&&AX!==undefined&&AX!==null){AM=new f.Point2D({x:k,y:AX});AO.push(AM);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AR)+" and "+(2*AR+1));d.visPrint("\tvalueX = "+z+", valueY = "+y);d.visPrint("\tx = "+k+", y = "+AX);}}}if(AO.length>=2){AC=AO[0].x;t=AO[AE-1].x;o=(AC+t)/2;for(AR=0;AR<AE;++AR){if(AO[AR].x===o){l=AO[AR].y;break;}else{if(AR<AE-1&&AO[AR].x<o&&AO[AR+1].x>o){AA=(AO[AR+1].y-AO[AR].y)/(AO[AR+1].x-AO[AR].x);l=AO[AR].y+AA*(o-AO[AR].x);break;}}}this.midPoint.x=o;this.midPoint.y=l;}}else{for(AR=0;AR*2<AE;++AR){z=AS[2*AR];y=AS[2*AR+1];if(z!==null&&z!==undefined&&y!==null&&y!==undefined){k=X.call(this,this.mpXAxis,z);AX=X.call(this,this.mpYAxis,y);if(k!==undefined&&k!==null&&AX!==undefined&&AX!==null){AM=new f.Point2D({x:k,y:AX});AO.push(AM);break;}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AR)+" and "+(2*AR+1));d.visPrint("\tvalueX = "+z+", valueY = "+y);d.visPrint("\tx = "+k+", y = "+AX);}}}for(AQ=(AE/2)-1;AQ>AR;--AQ){z=AS[2*AQ];y=AS[2*AQ+1];if(z!==null&&z!==undefined&&y!==null&&y!==undefined){k=X.call(this,this.mpXAxis,z);AX=X.call(this,this.mpYAxis,y);if(k!==undefined&&k!==null&&AX!==undefined&&AX!==null){AM=new f.Point2D({x:k,y:AX});AO.push(AM);break;}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AQ)+" and "+(2*AQ+1));d.visPrint("\tvalueX = "+z+", valueY = "+y);d.visPrint("\tx = "+AM.x+", y = "+AM.y);}}}if(AO.length>=2){o=(AO[0].x+AO[1].x)/2;l=(AO[0].y+AO[1].y)/2;this.midPoint.x=o;this.midPoint.y=l;}}if(AO.length>=2){AP=new f.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AO,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}q=AP;}else{p=this.mCalcValues;r=p.length;if(this.deformed){z=p[0];y=p[1];if(z!==null&&z!==undefined&&y!==null&&y!==undefined){k=X.call(this,this.mpXAxis,z);AX=X.call(this,this.mpYAxis,y);if(k!==undefined&&k!==null&&AX!==undefined&&AX!==null){AM=new f.Point2D({x:k,y:AX});AO.push(AM);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: 0 and 1");d.visPrint("\tvalueX = "+z+", valueY = "+y);d.visPrint("\tx = "+k+", y = "+AX);}}z=p[2];y=p[3];if(z!==null&&z!==undefined&&y!==null&&y!==undefined){k=X.call(this,this.mpXAxis,z);AX=X.call(this,this.mpYAxis,y);if(k!==undefined&&k!==null&&AX!==undefined&&AX!==null){AM=new f.Point2D({x:k,y:AX});AO.push(AM);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: 2 and 3");d.visPrint("\tvalueX = "+z+", valueY = "+y);d.visPrint("\tx = "+AM.x+", y = "+AM.y);}}if(AO.length>=2){o=(AO[0].x+AO[1].x)/2;l=(p[0].y+AO[1].y)/2;this.midPoint.x=o;this.midPoint.y=l;AP=new f.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AO,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}q=AP;}else{for(AR=0;2*AR+3<2*r;++AR){AH=p[2*AR];AG=p[2*AR+1];AL=p[2*AR+2];AK=p[2*AR+3];if(AH!==undefined&&AH!==null&&AG!==undefined&&AG!==null&&AL!==undefined&&AL!==null&&AK!==undefined&&AK!==null){x=L.call(this,AH);AU=L.call(this,AL);w=AG+x*((2*AH+AL)/3-AH);v=AK+AU*((AH+2*AL)/3-AL);if(AF===D.DssGraphRegressionExp||AF===D.DssGraphRegressionLog||AF===D.DssGraphRegressionPow){AW=S.call(this,AF,AG,w,v,AK);w=AW.control1;v=AW.control2;}AC=X.call(this,this.mpXAxis,AH);AB=X.call(this,this.mpYAxis,AG);t=X.call(this,this.mpXAxis,AL);s=X.call(this,this.mpYAxis,AK);AT=X.call(this,this.mpYAxis,w);AJ=X.call(this,this.mpYAxis,v);if(AC!==undefined&&AC!==null&&AB!==undefined&&AB!==null&&t!==undefined&&t!==null&&s!==undefined&&s!==null&&AT!==undefined&&AT!==null&&AJ!==undefined&&AJ!==null){AD=new f.Point2D({x:AC,y:AB});u=new f.Point2D({x:t,y:s});AN.push(new f.BezierCurve({P0:AD,F1:AT,F2:AJ,P3:u,IsVertical:this.mIsVertical}));}else{d.visPrint("Trendline point calculation abnormal:");if(AC===undefined||AC===null||AB===undefined||AB===null){d.visPrint("\tdata point #: "+(2*AR)+" and "+(2*AR+1));d.visPrint("\tvalueX = "+AH+", valueY = "+AG);d.visPrint("\tx = "+AC+", y = "+AB);}if(t===undefined||t===null||s===undefined||s===null){d.visPrint("\tdata point #: "+(2*AR+2)+" and "+(2*AR+3));d.visPrint("\tvalueX = "+AL+", valueY = "+AK);d.visPrint("\tx = "+t+", y = "+s);}}}}AI=AN.length;AC=AN[0].mP0.x;t=AN[AI-1].mP3.x;o=(AC+t)/2;AQ=-1;for(AR=0;AR<AI;++AR){if(AN[AR].mP0.x===o){l=AN[AR].mP0.y;AQ=AR;break;}else{if(AN[AR].mP3.x===o){l=AN[AR].mP3.y;AQ=AR+1;break;}else{if(AN[AR].mP0.x<o&&AN[AR].mP3.x>o){AQ=AR;break;}}}}if(l!==undefined){this.midPoint.x=o;this.midPoint.y=l;}else{if(AQ<AI){l=AN[AQ].evaluate(o);this.midPoint.x=o;this.midPoint.y=l;}}AV=new f.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this,IsVertical:true,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});for(AR=0;AR<AI;++AR){AV.AddBezierCurveLine(AN[AR]);}q=AV;}}return q;}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Axis","TripleId","Rect2D","CategoryAxisInfo","ChartConstants","StraightLineObject","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumCategoryAxisOidItem","EnumCategoryLabelStyle","EnumRectCompare","EnumChartStyle","EnumImageUsage","EnumRectExpandDirection","EnumGraphMatrixMajorGraphType","EnumLabelLevelOption");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType");var At=mstrmojo.chart,Ak=At.ChartConstants,Q=At.enums,A8=Q.EnumAnchorPoint,An=Q.EnumGraphMajorType,g=Q.EnumAxisLabelsLocation,Ax=Q.EnumAxisDirection,Y=Q.EnumGraphObjectType,c=Q.EnumCategoryAxisOidItem,G=Q.EnumCategoryLabelStyle,AK=Q.EnumImageUsage,Au=Q.EnumLabelLevelOption,AL=Q.EnumChartStyle,Ag=Q.EnumRectCompare,AQ=At.gNullGroupId,AS=At.gNullSeriesId;var Ai=mstrmojo.chart.model,AR=Ai.enums,A9=AR.EnumDSSGraphType,BE=AR.EnumDSSGraphProperty,BF=AR.EnumDSSGraphObject,J=AR.EnumDSSGraphFontRotation,BQ=AR.EnumDSSGraphGridLineType,Ae=0,BA=1,BI=2,C=3;var x=new At.Point2D(),AZ=new At.Point2D(),BL=new At.Rect2D(),Ay=new At.Rect2D(),H=new At.Rect2D(),v=new At.Rect2D(),Ac=new At.Rect2D();function h(BS,BR){if(BR===undefined){BR=-3;}switch(this.mTripleId.mObjectId){case BF.DssGraphO1Body:return new At.TripleId({ObjectId:BF.DssGraph2DO1Label,GroupId:BS,SeriesId:BR});case BF.DssGraphO2Body:return new At.TripleId({ObjectId:BF.DssGraph2DO2Label,GroupId:BS,SeriesId:BR});default:return new At.TripleId({ObjectId:BF.DssGraph2DO1Label,GroupId:BS,SeriesId:BR});}}function u(BT,BW,BS){var BR=BW||0,BV=BT||0,BU=(this.mAxisInfo.mAxisDirection===Ax.AD_X)?BS.width:BS.height;if(BR<0){BR=0;}if(BV<0){BV=0;}if(BU<=0||BU<BR+BV){return ;}BU-=BR+BV;this.mLowTrim=BR;this.mHighTrim=BV;if(this.mAxisInfo.mAxisDirection===Ax.AD_X){BS.x+=BR;BS.width=BU;}if(this.mAxisInfo.mAxisDirection===Ax.AD_Y){BS.y+=BV;BS.height=BU;}}function AN(BS){var BT,BU=this.mLabelList,BR=BU.length;for(BT=0;BT<BR;BT++){if(BU[BT]){BU[BT].Restore({LineCount:BS});}}}function j(BR,BV){var BU=this.mChartContextPtr,BS=BU.GetGraphMatrixContext(),BV=BV||BS.getPadding(Ak.kLabelToChart),BT=BR.GetBoundingRect(true);return(BT.y>=BV&&BT.y+BT.height+BV<=BU.mGraphHeight);}function I(){var BU=this.mChartContextPtr,BX=BU.GetGraphMatrixContext(),BW=BU.RenderClusterShapes(),BV=this.mDatasetPtr,BZ=false,BR=BW;if(BW===false){if(BX.isCombinationChart()){var BS=BU.mUniformAxisContext.CategoryAxis,BY=this.IsVerticalAxis()?"Y":"X";BW=BS[BY].EnforceFringe;if(BW){return true;}var BT=BV.GetSeriesByShape().Bar;BR=BZ=BT&&BT.length>0;BR=BR||BW;}else{BR=BU.IsBarChart()&&BU.IsAdvancedBarChart(AL._bullet)===false;}}return BR;}function Aw(){if(I.call(this)){var BX=this.mChartContextPtr,BS=BX.GetGraphMatrixContext(),BT=false,BV=false;if(BS.isCombinationChart()){var BR=BX.mUniformAxisContext.CategoryAxis,BU=this.IsVerticalAxis()?"Y":"X";BT=BR[BU].EnforceCluster;if(BT){return true;}var BW=this.mDatasetPtr.GetSeriesByShape().Bar;BV=BW&&BW.length>0;return(BX.IsBarChart(AL._cluster)||(BV&&!BX.IsPercentChart()&&!BX.IsStackedChart()));}return BX.IsBarChart(AL._cluster);}return false;}function Aj(){var BU=this.mChartContextPtr;if(BU.mPartialRendering&&BU.mRenderingWindow){var BS,BR,BT=BU.mRenderingWindow;if(this.IsVerticalAxis()){BS=BT.y;BR=BS+BT.height;}else{BS=BT.x;BR=BS+BT.width;}this.screenWindow={Min:this.getGroupSlotAt(BS)-1,Max:this.getGroupSlotAt(BR)+1};}}function Ab(BX,BV){if(BX===0&&BV===0){return 0;}var BR=0,Bg,BT=this.mChartContextPtr,BZ=BT.mIsGraphMatrix,Bc=BT.GetGraphMatrixContext(),BS=this.mCategoryOption.mLabelStyle,Bd=BZ?Bc.getPadding(Ak.kLabelToChart):0,BY=this.mLevelSize,BU=BZ?Bc.getPadding(Ak.kCategoricalLabelToTick):this.mLevelSpace,BW,Bf=this.mGroupCount;switch(BS){case G.CLS_NORMAL:case G.CLS_MANUAL:case G.CLS_AUTOMATIC:BY.push(Math.max(BX,BV));BR=Math.max(BX,BV)+BU;break;default:Bg=this.mpAxisLabelSet.GetFormatFont().mFontRotation;if(Bg===J.Rotate45||Bg===J.Rotate315){BX=0;var Be=this.getGroupSize(),Bb,Ba;for(BW=0;BW<(Bf+1)/2;++BW){Bb=this.mLabelList[BW].GetBoundingRectNoRotation(true);Ba=Math.max(Bb.width,Bb.height)*Math.SQRT1_2;if(Ba>Be){Ba+=(Ba-Be);}BX=Math.max(BX,(Ba+0.5));}}BY.push(BX);BY.push(BV);BR=BX+BU+BV+this.mLevelSpace;break;}return BR+Bd;}function Z(BR){var BS=this.mDeviceDataArea;return(BR>BS.x&&BR<BS.x+BS.width);}function L(BR){var BS=this.mDeviceDataArea;return(BR>BS.y&&BR<BS.y+BS.height);}function BM(){return this.mTripleId.mObjectId===BF.DssGraphO2Body;}function Ao(BR){return this.mGroupOrder.length===0?BR:this.mGroupOrder[BR];}function BH(BS,BV){var BU,BT,BR;BR=BS.length;for(BU=0;BU<BR;++BU){BT=new At.StraightLineObject({TripleId:BV.mTripleId,GraphObjectManager:this,StartPoint:BS[BU],EndPoint:BS[BU].Shifted(this.mDepthOffset),ParentObject:BV});BV.AddGraphObject(BT);this.mManagerGraphObjectList.push(BT);}}function n(BW,BU){var BV,BT,BS,BR,BX=this.mDeviceDataArea,BY;if(this.mChartContextPtr.mIsTimeSeriesChart){BR=this.mShownLabelList.length;for(BV=0;BV<BR;++BV){BT=this.mShownLabelList[BV].mTripleId.mGroupId;if(!this.IsVerticalAxis()){BS=new At.Point2D({x:this.getGroupMiddlePos(BT),y:BX.GetBottomMiddle().y});BW.push(BS);BS=new At.Point2D({x:this.getGroupMiddlePos(BT),y:BX.GetTopMiddle().y});BU.push(BS);}else{BS=new At.Point2D({x:BX.GetLeftMiddle().x,y:this.getGroupMiddlePos(BT)});BW.push(BS);BS=new At.Point2D({x:BX.GetRightMiddle().x,y:this.getGroupMiddlePos(BT)});BU.push(BS);}}}else{BY=this.mGroupCount;for(BV=0;BV<BY;++BV){if(this.mAxisCross&&BV===0){continue;}if(!this.IsVerticalAxis()){BS=new At.Point2D({x:this.getGroupMiddlePos(BV),y:BX.y+BX.height});BW.push(BS);BS=new At.Point2D({x:this.getGroupMiddlePos(BV),y:BX.y});BU.push(BS);}else{BS=new At.Point2D({x:BX.x,y:this.getGroupMiddlePos(BV)});BW.push(BS);BS=new At.Point2D({x:BX.x+BX.width,y:this.getGroupMiddlePos(BV)});BU.push(BS);}}}}function O(){var BU=this.mMajorGrid;if(!BU.mShowGridLines||(BU.mGridStyle!==BQ.DssGraphGridRegular&&BU.mGridStyle!==BQ.DssGraphGridBoth)){return ;}var BT=At.gAxisObjects[this.getIndex()].mMajorId;this.InitObjectSet(BT,Y.GOT_MAJOR_GRID);var BS=[],BR=[];n.call(this,BS,BR);BH.call(this,BR,this.mpMajorGridSet);}function w(Bb,Be){var BZ=this.mMinorGrid,Ba=this.mDeviceDataArea,BU=1,BR,BT,BX,Bc=this.mGroupCount,BY,BW,BV,BS,Bd;if(BZ.mUseManualGrid){BU=(BZ.mGridInterval);}BR=Math.floor(BU/2);BT=this.getGroupSize()/(BU+1);BX=((BU%2)===0)?BR:(BR+1);for(BY=0;BY<Bc;++BY){for(BW=-BR;BW<=BX;++BW){if((BW!==0)){if(BY===this.mGroupCount-1){if((BU%2)!==0&&BW===BX){continue;}}BV=(BT*BW+(BW>=0?0.5:-0.5));if(!this.IsVerticalAxis()){BS=this.getGroupMiddlePos(BY)+BV;if(Z.call(this,BS)){Bb.push(new At.Point2D({x:BS,y:Ba.y+Ba.height}));Be.push(new At.Point2D({x:BS,y:Ba.y}));}}else{Bd=this.getGroupMiddlePos(BY)+BV;if(L.call(this,Bd)){Bb.push(new At.Point2D({x:Ba.x,y:Bd}));Be.push(new At.Point2D({x:Ba.x+Ba.width,y:Bd}));}}}}}}function Ah(){var BT=this.mMinorGrid;if(!BT.mShowGridLines||(BT.mGridStyle!==BQ.DssGraphGridRegular&&BT.mGridStyle!==BQ.DssGraphGridBoth)){return ;}var BR=At.gAxisObjects[this.getIndex()].mMinorId;this.InitObjectSet(BR,Y.GOT_MINOR_GRID);var BU=[],BS=[];w.call(this,BU,BS);BH.call(this,BS,this.mpMinorGridSet);}function p(){}function M(BR,BS){return BR;}function BG(BT,BR){var BS=Au.LLO_NORMAL;if(this.mChartContextPtr.mIsGraphMatrix){return{Option:BS,Index:BR};}return{Option:BS,Index:BR};}function AH(BT,Bc,Bd){if(Bd){var BX=this.mDatasetPtr,BU=Bd.length,Be=BT?BX.GetSeriesLabelIdentities(Bc):BX.GetGroupLabelIdentities(Bc),Bb=Be.length,BZ=1,BS=[],BV=0,BY,BW;for(BY=0;BY<BU;++BY){var Ba=Bd[BY],BR=Ba.match(/ /g);if(BR){BZ=BR.length+1;}for(BW=0;BW<BZ;++BW){if(BY<Bb){BS[BV]=Be[BY];}else{BS[BV]=null;}BV++;}}return BS;}return null;}function q(){var BY=this.mChartContextPtr,BV=this.mLabelList,BR=BV.length,BT,BX=BM.call(this),BS,BW,BU;if(BY.mImageUsage===AK.GENERAL){for(BU=0;BU<BR;BU++){BT=BV[BU];if(BT&&BT.texts){if(BT.mIsShown===false){delete BT.texts;continue;}BS=BT.mTripleId.mGroupId;BW=AH.call(this,BX,BS,BT.texts);if(BW&&BW.length){BT.IdentityMap=BW;delete BT.texts;}}}}}function Am(Be,BU){BU=BU||false;var BT=this.mChartContextPtr,BS=!this.IsVerticalAxis(),Bc,Bd,BW=this.mDatasetPtr,BX=Au.LLO_NORMAL,BZ;if(BS&&this.mIsUniformAxis){var BY=BT.getUniformAxisContext(),BR=BY.CategoryAxis.X.Truncation;if(BR){var Ba=-1,Bb=BR.Indices,BV=BR.Texts;if(Bb&&Bb.length){Ba=Bb.indexOf(Be);if(Ba!==-1){Bc=BV[Ba];if(Bc){return Bc;}}}}}if(BM.call(this)){BZ=BG.call(this,false,Be);Be=BZ.Index;BX=BZ.Option;Bd=BW.GetSeriesLabel(Be,0,BX,BU);Bc=BW.GetMergedLabel(Bd,BX);if(BT.mImageUsage===AK.GENERAL&&BU){return{Text:Bc,Texts:Bd};}return{Text:Bc};}BZ=BG.call(this,true,Be);Be=Ao.call(this,BZ.Index);BX=BZ.Option;Bd=BW.GetGroupLabel(Be,0,BX,BU);Bc=BW.GetMergedLabel(Bd,BX);if(BT.mImageUsage===AK.GENERAL&&BU){return{Text:Bc,Texts:Bd};}return{Text:Bc};}function r(BR){var BU=this.mChartContextPtr;if(BU.mPartialRendering){var BT=BR.mTripleId.mGroupId,BS=this.screenWindow;return BT>=BS.Min&&BT<=BS.Max;}return true;}function z(BR){switch(this.mAxisInfo.mAxisLabelsLocation){case g.ALL_BOTTOM:case g.ALL_TOP:case g.ALL_LEFT:case g.ALL_RIGHT:return this.mAxisInfo.mAxisLabelsLocation;}if(this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP){if(BR<this.mLabelSubIndex){return g.ALL_BOTTOM;}return g.ALL_TOP;}if(BR<this.mLabelSubIndex){return g.ALL_LEFT;}return g.ALL_RIGHT;}function AP(BR){var BS=this.HasOuterTicks(this.mMajorGrid.mGridStyle)||this.HasOuterTicks(this.mMinorGrid.mGridStyle);if(this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===g.ALL_LEFT_RIGHT){return BS;}return BS&&(BR===this.mAxisInfo.mAxisLabelsLocation);}function l(BS,BU,BR){var BT=this.mDeviceDataArea;switch(BS){case g.ALL_BOTTOM:BR.Reset(0,1);return BT.y+BT.height+BU;case g.ALL_TOP:BR.Reset(0,-1);return BT.y-BU;case g.ALL_LEFT:BR.Reset(-1,0);return BT.x-BU;case g.ALL_RIGHT:BR.Reset(1,0);return BT.x+BT.width+BU;default:return 0;}}function V(){if(this.mIsUniformAxis===false){return false;}return this.restrictWidth>=0&&this.restrictHeight>=0;}function AO(BY,BX){var Ba=BX,BV=this.getLabelRotation(),BW=(BV===J.Rotate90),BS=V.call(this)&&BW,BU=this.mChartContextPtr.getUniformAxisContext();if(V.call(this)){if(BW){if(this.maxLabelLength===-1){var BR=this.mAxisInfo.mAxisDirection===Ax.AD_X;if(BR&&BW&&(this.resizeAction===Ag.ShrinkX||this.resizeAction===Ag.ExpandX)){Ba=1000;}else{Ba=this.calculateMaxAxisSpace(this.restrictHeight);}}else{Ba=this.maxLabelLength;}}else{Ba=this.calculateMaxAxisSpace(this.restrictWidth);BY.rect.width=BY.rect.height=0;BY.mIsRectCalculated=false;}}else{var BZ=false,BT=BU.CategoryAxis.X;if(BT.Layout===C){BZ=true;}if(!this.IsVerticalAxis()){if(BW||BZ){var Bb=BU.CategoryAxis.X.LabelWidthLimit;if(Bb){Ba=Bb;BS=true;}if((BW||BZ)&&!V.call(this)){BS=true;Ba=1000;}}else{if(!this.mWordWrap){Ba=1000;}}}}return{Stringent:BS,WidthLimit:Ba};}function AM(){if(this.mPaddingOnSide===-1){var BU=this.mDatasetPtr,BW=this.mChartContextPtr;if(!BW.mIsGraphMatrix){this.mPaddingOnSide=0;}else{if(I.call(this)){var BS=1,BV=this.mGroupCount;if(Aw.call(this)===false){BS=(BV+0.5);}else{BS=BV*BU.GetClusterSeriesCount()+0.5;}var BR=0,BT=this.mDeviceDataArea;switch(this.mAxisInfo.mAxisDirection){case Ax.AD_X:BR=BT.width;break;case Ax.AD_Y:BR=BT.height;break;case Ax.AD_Z:break;}this.mPaddingOnSide=BR/BS/4;}else{this.mPaddingOnSide=0;}this.mPaddingOnSide=Math.round(this.mPaddingOnSide);}}return this.mPaddingOnSide;}function P(){var BR=0;switch(this.mAxisInfo.mAxisDirection){case Ax.AD_X:BR=this.mDeviceDataArea.width;break;case Ax.AD_Y:BR=this.mDeviceDataArea.height;break;case Ax.AD_Z:break;}return BR-2*AM.call(this);}function AE(BY,Ba,BS){var BT,BZ,BU=this.mChartContextPtr,BV=!this.IsVerticalAxis(),BR=false;if(BV){BT=0;if(BU.mManualLayoutMode){BT=(Ba*this.getGroupSize(true)+0.5);}else{BT=BZ=Ba*this.getGroupSize(true);if(BU.mIsGraphMatrix===false){BT=Math.floor((BZ*Math.max(1,((P.call(this)/10)/BZ))-At.Axis.gLabelMargin+0.5));if(this.mAxisCross||BU.mIsTimeSeriesChart){BT=Math.min(BT,BS);}}BT=Math.max(1,BT);}if(this.mIsUniformAxis){var BX=AO.call(this,BY,BT);BT=BX.WidthLimit;BR=BR||BX.Stringent;}BY.mSubTextHolder.SetLineCount(1);BY.SetTextWidthLimit(BT,BR);}else{BT=this.mDeviceDataArea.width;if(!this.mIsUniformAxis){BT=BT/2;}else{var BW=BU.getUniformAxisContext(),Bb=BW.CategoryAxis.Y;BT=Bb.LabelWidthLimit||BT;}if(this.mIsUniformAxis){if(V.call(this)){BY.rect.width=BY.rect.height=0;BY.mIsRectCalculated=false;}}BY.SetTextWidthLimit(BT);}}function Av(BW,BS,BT){BT=(BT!==undefined)?BT:false;var BV=this.mDeviceDataArea,BR,BU;if(this.IsVerticalAxis()){BR=BV.x+BV.width/2;BU=this.getGroupMiddlePos(BW.mGroupId,BT);}else{BR=this.getGroupMiddlePos(BW.mGroupId,BT);BU=BV.y+BV.height;}BS.MoveTo(BR,BU,A8.CENTER);}function a(BY,BU,BX,BS){var BR,BV,BW;if(BS===undefined){if(this.maxLabelLength>0){BS=this.maxLabelLength;}else{BS=1000;}}var BT=BY.mGroupId;BR=this.mLabelList[BT];if(BR===undefined){BW=BY;BR=new At.TextObject({TripleId:BW,GraphObjectManager:this,GraphCollectionObject:this.mpAxisLabelSet,hasFill:false,hasLine:false});BV=Am.call(this,BW.mGroupId,true);BR.SetText(BV.Text);delete BV.Text;if(BV.Texts){BR.texts=BV.Texts;delete BV.Texts;}this.mLabelList[BT]=BR;}AE.call(this,BR,BU,BS);if(BX){Av.call(this,BY,BR);}return BR;}function BK(BV,BX,BW,BT){var BU=BW,BS=BT,BR;if(this.mUseDepth){BR=this.getDepthMargin(0,0);BU=BU-BR.lowMargin;BS=BS-BR.highMargin;}BU=(BU<0)?0:BU;BS=(BS<0)?0:BS;return{LowMargin:BU>BV?BU-BV:0,HighMargin:BS>BX?BS-BX:0};}function AC(BZ,BV,BS,BW,BX){var BY,BT;v.ResetRect(BW);Ac.ResetRect(BX);if(this.mChartContextPtr.mIsGraphMatrix){var BU=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ak.kLabelToChart);var BR=0;if(this.IsVerticalAxis()){v.y-=BU;v.height+=BU;Ac.height+=BU;}else{v.x-=(BU+BR);v.width+=BU+BR;Ac.width+=BU;}}BY=this.IsVerticalAxis()?Ac.y+Ac.height-(BS.y+BS.height):BS.x-v.x;BT=this.IsVerticalAxis()?BS.y-v.y:Ac.x+Ac.width-(BS.x+BS.width);return BK.call(this,BZ,BV,BY,BT);}function BJ(BX,BY,BW){BW=BW||0;var BS,BU,BV,BZ,BT=this.mChartContextPtr,BR={x:0,y:0,width:BT.mGraphWidth,height:BT.mGraphHeight};if(BY){BS=BX.x-BW;BU=BX.x+BX.width+BW;BV=BR.x;BZ=BR.x+BR.width;}else{BS=BX.y-BW;BU=BX.y+BX.height+BW;BV=BR.y;BZ=BR.y+BR.height;}return !(BS>=BV&&BU<=BZ);}function AG(Ba,BY,BX,BT,BW){var BS=this.mChartContextPtr,BR=0,BU=1,BZ=false,BV=BS.GetGraphMatrixContext();if(Ba){switch(BX){case Ae:case C:case BA:if(BY){BZ=BV.checkPaddingBetweenLabels(BT,BW,BR,true);}else{BZ=BV.checkPaddingBetweenLabels(BT,BW,BU,true);}break;default:BZ=BV.checkPaddingBetweenLabels(BT,BW,BU,true);break;}}else{BZ=BV.checkPaddingBetweenLabels(BT,BW,BU,false);}return BZ;}function AF(BT,BS){var BR;var BU=h.call(this,BT,-3);BR=BR||a.call(this,BU,BS,true);return BR;}function AJ(BU,BV,BR,BZ,BS,BX,BW){var BY=false,BT=this.mChartContextPtr;if(!BU){BY=BV.HasIntersection(BR);BY=BY||(BT.mIsGraphMatrix&&AG.call(this,BZ,BS,BX,BR,BV));}if(BZ&&!BS){BY=BY||(BT.mIsGraphMatrix&&BJ.call(this,BV,BZ,BW));}return BY;}function AJ(BU,BV,BR,BZ,BS,BX,BW){var BY=false,BT=this.mChartContextPtr;if(!BU){BY=BV.HasIntersection(BR);BY=BY||(BT.mIsGraphMatrix&&AG.call(this,BZ,BS,BX,BR,BV));}if(BZ&&!BS){BY=BY||(BT.mIsGraphMatrix&&BJ.call(this,BV,BZ,BW));}return BY;}function BO(BU,Bd,Bb,BX){var BW,Ba=new At.Rect2D(),Bc,BV=true,Bf=!this.IsVerticalAxis(),BT=this.mChartContextPtr,BZ=0,BS=this.mPlotGroupCount,BY=this.mCategoryOption.mLabelStyle,BR=this.getLabelRotation()===J.Rotate90||this.getLabelRotation()===J.Rotate270,Be={Overlapped:false,MaxSpace:Bb};if(BT.mIsGraphMatrix){BZ=BT.GetGraphMatrixContext().getPadding(Ak.kLabelToChart);}Ay.Reset(0,0,0,0);for(BW=Bd;BW<BS;BW+=BU){Bc=AF.call(this,BW,BU);BX.push(Bc);Bc.GetTransformedRectEx(Ba);Be.Overlapped=AJ.call(this,BV,Ba,Ay,Bf,BR,BY,BZ);if(Be.Overlapped){Be.MaxSpace=Bb;return Be;}if(BV===true){BV=false;Ay.ResetRect(Ba);}else{Ay.ResetRect(Ba);Bb=Math.max(Bb,this.IsVerticalAxis()?Ba.width:Ba.height);Be.MaxSpace=Bb;}}if(Bd>=BU){BV=true;Ay.Reset(0,0,0,0);for(BW=Bd;BW>=0;BW-=BU){Bc=AF.call(this,BW,BU);if(BW!==Bd){BX.unshift(Bc);}Ba=Bc.GetTransformedRect(true);Be.Overlapped=AJ.call(this,BV,Ba,Ay,Bf,BR,BY,BZ);if(Be.Overlapped){Be.MaxSpace=Bb;return Be;}if(BV===true){BV=false;Ay.ResetRect(Ba);}else{Ay.ResetRect(Ba);Bb=Math.max(Bb,this.IsVerticalAxis()?Ba.width:Ba.height);Be.MaxSpace=Bb;}}}Be.Overlapped=false;return Be;}function AB(BR,BS){if(this.IsVerticalAxis()){this.mDeviceDataArea.y+=BS;this.mDeviceDataArea.height-=BS+BR;}else{this.mDeviceDataArea.x+=BR;this.mDeviceDataArea.width-=BR+BS;}}function U(BV,BS,BT,BR,BU){if(!BV){return ;}if(this.IsVerticalAxis()){if(BT>0){BR.mIsShown=false;}if(BS>0){BU.mIsShown=false;}}else{if(BS>0){BR.mIsShown=false;}if(BT>0){BU.mIsShown=false;}}}function AW(){var BT=this.mChartContextPtr,BR=BT.getUniformAxisContext();if(BT.mIsGraphMatrix){var BS=BR.CategoryAxis.X;return !!BS.ForbideStagger===false;}return true;}function e(Bd,BU,Bl,BZ,Ba,Bk,Bi,BT,Bm,BY){var Be,Bf,BW,Bh,Bc,BV,Bb,Bj,BS,BX,BR=[],Bg;BW={MaxSpace1:Bk,MaxSpace2:Bi,Overlapped:true};Bh=this.mPlotGroupCount-((this.mPlotGroupCount&1)===0?1:2);Be=h.call(this,Bh);BV=a.call(this,Be,2,true,BU*2);Bc=BV.GetBoundingRect();Bb=AC.call(this,Bd,BU,BZ,BT,Bc);BS=Bb.LowMargin;BX=Bb.HighMargin;if(BS>Bm||BX>BY){this.mDeviceDataArea=BZ;BS=Math.max(Bm,BS);BX=Math.max(BY,BX);if(!Bl){AB.call(this,BS,BX);}BW.MaxSpace1=0;Bb=BO.call(this,2,0,Bk,BR);BW.MaxSpace1=Bb.MaxSpace;if(Bb.Overlapped){return BW;}}else{BR=BR.concat(Ba);}Bb=BO.call(this,2,1,Bi,BR);BW.MaxSpace2=Bi=Bb.MaxSpace;if(Bb.Overlapped){return BW;}Bj=Bk+this.mLevelSpace+Bi+this.mLevelSpace;if(this.HasLabelsOnBothSides()){Bj+=Bj;}if(Bj*2>(this.IsVerticalAxis()?this.mDeviceDataArea.width:this.mDeviceDataArea.height)){return BW;}BV=(this.mPlotGroupCount&1)===0?BR[BR.length-1]:BR[Math.floor(this.mPlotGroupCount/2)];U.call(this,Bl,BS,BX,BR[0],BV);Ba.splice(0,Ba.length);Bg=BR.length;for(Bf=0;Bf<Bg;++Bf){Ba.push(BR[Bf]);}BW.Overlapped=false;return BW;}function B(BR){return e.call(this,BR.LowMargin,BR.HighMargin,BR.FixedMargin,BR.BackupRect2D,BR.LabelArray,BR.MaxSpace_1,BR.MaxSpace_2,BR.FirstRect,BR.LowLabelMargin,BR.HighLabelMargin);}function BP(BX,Bc,BU){Bc=Bc||0;var BT=this.mPlotGroupCount-1,BZ=Bc,BY,BW=false,Bb,BV,BS=this.mCategoryOption.mLabelStyle,BR=!this.IsVerticalAxis(),Ba;if(this.mPlotGroupCount<2){return 1;}if(BR&&this.mIsUniformAxis){if(BS===BA){if(BU===1){return BS;}}if(BS===BI){if(BU===2){return BS;}}}while(BT>BZ){BY=Math.floor((BT+BZ+1)/2);BV=h.call(this,BY);Ba=a.call(this,BV,BU,true);Bb=Ba.GetTransformedRect(true);if(BX.HasIntersection(Bb)){BZ=BY;BW=true;}else{BW=false;if(BT===BY){break;}BT=BY;}}return BW?this.mGroupCount:Math.max(BT-Bc,BU);}function BD(BR,BT,BS){switch(BR){case g.ALL_BOTTOM:BT.height-=BS;break;case g.ALL_TOP:BT.y+=BS;BT.height-=BS;break;case g.ALL_LEFT:BT.x+=BS;BT.width-=BS;break;case g.ALL_RIGHT:BT.width-=BS;break;}}function k(BR){var BS=this.mAxisInfo.mAxisLabelsLocation;switch(BS){case g.ALL_BOTTOM:case g.ALL_TOP:case g.ALL_LEFT:case g.ALL_RIGHT:BR.push(BS);break;}if(BS===g.ALL_BOTTOM_TOP){BR.push(g.ALL_BOTTOM);BR.push(g.ALL_TOP);}else{if(BS===g.ALL_LEFT_RIGHT){BR.push(g.ALL_LEFT);BR.push(g.ALL_RIGHT);}}}function W(Bb){var Ba,BW,BU,BY,BV=Bb.FirstLabel,BS=this.mChartContextPtr,BX=BS.mIsGraphMatrix,Bc=this.mCategoryOption.mManualSkip,BT=this.mDeviceDataArea,Bd=this.mAxisInfo.mAxisDirection===Ax.AD_Y,BR=this.mCategoryOption.mLabelStyle,BZ=new At.Rect2D({Rect2D:BT});switch(Bb.Interval){case 1:if(!this.IsVerticalAxis()&&Bb.FirstLabel.possibleTruncate()){BR=C;}else{BR=BA;}break;case 2:BW=this.getLabelRotation();Ba=(BW===J.Rotate90)||(BW===J.Rotate270);BU=true;if(BX){BU=BU&&!Bd&&!Ba;if(BU){BU=AW.call(this)&&(BV.mTripleId.mGroupId===0);}}else{}if(BU){BY=B.call(this,Bb);Bb.MaxSpace_1=BY.MaxSpace1;Bb.MaxSpace_2=BY.MaxSpace2;BU=BY.Overlapped===false;}if(BU){if(BX&&this.mPlotGroupCount===2){BT.ResetRect(BZ);BR=C;Bc=2;}else{BR=BI;}}else{BT.ResetRect(BZ);BR=G.CLS_MANUAL;Bc=2;}break;default:BR=G.CLS_MANUAL;Bc=Bb.Interval;break;}this.mCategoryOption.mManualSkip=Bc;this.mCategoryOption.mLabelStyle=BR;}function A4(BY){var BU=this.mpAxisLabelSet;if(BU){var Bd=BU.GetFormatFont();if(!!Bd===false){return 1;}var Bc=this.getGroupSize(true),Bb=BY.mGroupId,BW=this.mDatasetPtr,BT;if(BM.call(this)){BT=BW.GetSeriesLabel(Bb);}else{BT=BW.GetGroupLabel(Bb);}var BX=Bd.mFontRotation,BS=this.mChartContextPtr,BZ=BS.getUniformAxisContext(),BR=BZ.CategoryAxis,Be=Bd.GetStringExtent(BT);if(BX===J.Rotate180||BX===J.Normal){var Ba=2;if(this.IsVerticalAxis()){if(Be.Height>=Bc){Ba=Math.ceil(Be.Height/Bc);return Math.min(Ba,this.mGroupCount);}}else{if(Be.Width>=Bc){Ba=Math.ceil(Be.Width/Bc);return Math.min(Ba,this.mGroupCount);}}if(this.IsVerticalAxis()===false){var BV=BR.X;if(BV&&BV.Layout===BI){return Math.min(2,this.mGroupCount);}}}else{if(BX===J.Rotate90||BX===J.Rotate270){if(Be.Height>=Bc){return Math.min(2,this.mGroupCount);}}}}return 1;}function A3(Bt,Bb,Bv,Bm){Bm=(Bm!==undefined)?Bm:0;var BZ,Bk,Bj,Br=this.mChartContextPtr,Bh,BU,Bu,Bq,BR,BW,BT,Bd=this.mGroupCount,Bn=this.mShownLabelList,Bw=this.mLabelList,Bc=0,By=0,Bp,Be,Bz,B2,BS,B0,Bf,B1,Bl;this.mLevelSize.splice(0,this.mLevelSize.length);Bk=Bj=0;if(Bd<1){return 0;}var Bg=Br.getUniformAxisLabelRotateMode("x"),BY=this.IsVerticalAxis()?"Y":"X";BS=Bg===-1;Bh=Br.mIsGraphMatrix?Bm:0;BU=Bd-1;Bh=AX.call(this,BY,Bh,BU);if(!Br.mManualLayoutMode||Br.mRecalculateFrame){Bu=h.call(this,Bh);BT=A4.call(this,Bu);Bq=a.call(this,Bu,BT,true);BR=Bq.GetBoundingRect(true);BW=Bq.GetTransformedRect(true);BT=BP.call(this,BW,Bh,BT);H.ResetRect(this.mDeviceDataArea);var BV=this.mDeviceDataArea;while(BT<=Bd){BV.ResetRect(H);Bk=0;Bj=0;if(true){Bu=h.call(this,Bh);AE.call(this,Bq,BT,Bt*2);Av.call(this,Bu,Bq);BR=Bq.GetBoundingRect(true);}Bk=this.IsVerticalAxis()?BR.width:BR.height;Bp=parseInt(BU/BT)*BT;Bu=h.call(this,Bp);if(this.mIsUniformAxis){Be=a.call(this,Bu,BT,true);}else{Be=a.call(this,Bu,BT,true,2*Bb);}Bz=Be.GetBoundingRect(true);if(this.mChartContextPtr.GetGraphType()===A9.DssGraphTypeGridChart&&BY==="X"){Bc=0;By=0;this.mLowTrim=0;this.mHighTrim=0;}else{Bl=AC.call(this,Bt,Bb,BV,BR,Bz);Bc=Bl.LowMargin;By=Bl.HighMargin;this.mLowTrim=Bc;this.mHighTrim=By;}if(!Bv){AB.call(this,Bc,By);}if(!this.IsVerticalAxis()){B0=this.getLabelRotation();Bf=(B0===J.Rotate90);if(Bf===false){Bu=h.call(this,Bh);AE.call(this,Bq,BT,Bt*2);Av.call(this,Bu,Bq);BR=Bq.GetBoundingRect(true);if(BJ.call(this,BR,true,5)){if(BS){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mLabelInterval=-1;this.mCategoryOption.mLabelStyle=C;return 0;}else{Bq.mIsShown=false;Bh++;}}}}Bn.splice(0,Bn.length);if(this.mGroupCount===1&&!this.IsVerticalAxis()){if(BV.width<BR.width){B0=this.getLabelRotation();Bf=(B0===J.Rotate90)||(B0===J.Rotate270);if(Bf){Bq.mIsShown=false;Bk=Bj=0;break;}BT=2;this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;Bw.splice(0,Bw.length);this.mLabelList.push(Bq);Bn.push(Bq);BR=Bq.GetBoundingRect();return BR.height+5;}}Bl=BO.call(this,BT,Bh,Bk,Bn);Bk=Bl.MaxSpace;if(Bl.Overlapped){++BT;}else{this.mLabelInterval=BT;if(Bn.length>=1){U.call(this,Bv,Bc,By,Bn[0],Bn[Bn.length-1]);if(this.mChartContextPtr.GetGraphType()===A9.DssGraphTypeGridChart&&BY==="X"){Bz=Bn[Bn.length-1].GetBoundingRect(true);if(BJ.call(this,Bz,true,0)){Bn.splice(Bn.length-1,1);}}}break;}}B1={Interval:BT,FirstLabel:Bq,LowMargin:Bt,HighMargin:Bb,BackupRect2D:H,FirstRect:BR,FixedMargin:Bv,MaxSpace_1:Bk,MaxSpace_2:Bj,LabelArray:Bn,LowLabelMargin:Bc,HighLabelMargin:By};W.call(this,B1);Bk=B1.MaxSpace_1;Bj=B1.MaxSpace_2;if(Br.mIsGraphMatrix){var Bo=[],Ba=this.mGraphObjectList,Bx=Ba.length,BX=Bn.length;for(B2=0;B2<BX;++B2){Bn[B2].mIsShown=true;Bo.push(Bn[B2].mTripleId.mGroupId);}var Bs,Bi;Bi=Bw.length;for(B2=0;B2<Bi;B2++){if(Bw[B2]){Bw[B2].mIsShown=false;}}Bi=Bn.length;for(B2=0;B2<Bi;B2++){Bs=Bn[B2].mTripleId.mGroupId;if(Bw[Bs]){Bw[Bs].mIsShown=true;}else{Bw[Bs]=Bn[B2];}}}else{Bw=Bw.concat(Bn);}}this.hasLabelCreated=true;BZ=Ab.call(this,Bk,Bj);return BZ;}function BC(BR){this.mDeviceDataArea.ResetRect(BR.Rect2D);this.mLevelSize.splice(0,this.mLevelSize.length);this.mShownLabelList.splice(0,this.mShownLabelList.length);return A3.call(this,BR.LowMargin,BR.HighMargin,BR.FixedMargin,BR.StartIndex);}function AX(BS,BZ,BX){var BW,BR,BT,BY,BV=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ak.kLabelToChart);var BU=function(){BW=h.call(this,BZ);BR=A4.call(this,BW);BT=a.call(this,BW,BR,true);BY=BT.GetBoundingRect(true);while(BZ<=BX){if((BS==="Y"&&BY.y>=BV)||(BS==="X"&&BY.x>0)){break;}BZ++;BW=h.call(this,BZ);BR=A4.call(this,BW);BT=a.call(this,BW,BR,true);BY=BT.GetBoundingRect(true);}};if(BS==="Y"){BU.call(this);}else{if(this.mChartContextPtr.GetGraphType()===A9.DssGraphTypeGridChart&&BS==="X"){BU.call(this);}}return BZ;}function A5(){if(this.mLabelInterval<=1){return 0;}var BR=this.mGroupCount%this.mLabelInterval;if(BR<=0){BR=this.mLabelInterval;}return Math.ceil((BR+1)/2)-1;}function Af(BS){var BT=[[BF.DssGraph2DO1Label,BF.DssGraph2DO2Label],[BF.DssGraphO1Major,BF.DssGraphO2Major],[BF.DssGraphO1Minor,BF.DssGraphO2Minor]],BR=1;if(this.mTripleId.mObjectId===BF.DssGraphO1Body){BR=0;}return BT[BS][BR];}function F(BT){if(BT<0){return true;}var BX=new At.TripleId({ObjectId:Af.call(this,c.OID_LABEL)});this.InitObjectSet(BX,Y.GOT_AXIS_LABEL);var BV=this.mpAxisLabelSet.mFormatFontPtr,BS=4+2*BV.GetStringHeight("H"),BU=this.mChartContextPtr.GetGraphMatrixContext(),BW=this.mGroupCount,BR=BU.getPadding(Ak.kEndLabelToChart)*2+BS*BW+BU.getPadding(Ak.kBetweenLabels)*(BW-1);return BR<BT;}function A6(BS){var BT=this.mChartContextPtr,BR={Skip:false,Space:-1};if(!BT.mIsGraphMatrix){return BR;}if(!BS){if(this.resizeAction===-1||this.maxLabelLength===-1){return BR;}this.mWordWrap=F.call(this,this.mDeviceDataArea.height);if(this.resizeAction===Ag.ShrinkX||this.resizeAction===Ag.ExpandX){BR.Skip=!this.mWordWrap;BR.Space=Ab.call(this,this.maxLabelLength,0);}}else{if(this.resizeAction===-1||this.maxLabelLength===-1){return BR;}if(this.resizeAction===Ag.ExpandY||this.resizeAction===Ag.ShrinkY){if(this.getStatus()===2){this.mWordWrap=F.call(this,this.mDeviceDataArea.height);BR.Skip=!this.mWordWrap;this.mLevelSize.splice(0,this.mLevelSize.length);BR.Space=Ab.call(this,this.maxLabelLength,0);}}}return BR;}function Aa(BS){var BV=this.mChartContextPtr;if(!BV.mIsGraphMatrix){return false;}var Bc=BV.GetGraphMatrixContext(),Ba,Be,BW,BT=this.mPlotGroupCount,Bb=0,BR=1,Bd=this.getLabelRotation()===J.Rotate90,BU=1,BY,BZ=0,BX=0,Bf;for(BY=0;BY<BT;BY+=BU){Ba=h.call(this,BY,-3);Be=a.call(this,Ba,BU,false);if(this.maxLabelLength===-1){Be.Restore({Stringent:false,Restroke:true});}Bf=Be.GetBoundingRect(true);BW=Bd?Bf.height:Bf.width;if(BY%2===0){BZ+=BW;}else{BX+=BW;}}if(BS===BR){BW=Math.max(BZ,BX)+Math.ceil(BT/2)*Bc.getPadding(Ak.kBetweenLabels);}else{if(BS===Bb){BW=BZ+BX+(BT-1)*Bc.getPadding(Ak.kBetweenLabels);}else{BW=BZ+BX+(BT-1)*Bc.getPadding(Ak.kBetweenLabels);}}BW+=2*Bc.getPadding(Ak.kLabelToChart);return BW<=this.mDeviceDataArea.width;}function o(){var BT=V.call(this),BR=this.mChartContextPtr,BU=BR.getUniformAxisContext(),BZ=this.mAxisInfo.mAxisDirection===Ax.AD_X,BS=BU.CategoryAxis.X,BW=this.mpAxisLabelSet.GetFormatFont(),BX=false;if(this.mIsUniformAxis&&BZ&&BS){var BV=BR.getUniformAxisLabelRotateMode("x");if(BV===J.Automatic){if(BS.Layout){var BY=this.mCategoryOption;BY.mLabelStyle=BS.Layout;if(BT){this.restoreLabels();}if(BY.mLabelStyle===1||BY.mLabelStyle===2){BW.mFontRotation=J.Normal;}else{BW.mFontRotation=J.Rotate90;}BX=true;}}else{BX=true;BW.mFontRotation=BV;}}if(!BX){if(BT){this.restoreLabels();if(BT&&this.maxLabelLength===-1){BW.mFontRotation=J.Normal;}}if(this.mIsUniformAxis&&BZ&&BW.mFontRotation===J.Normal){if(Aa.call(this,1)===false){BW.mFontRotation=J.Rotate90;}}}}function d(BZ,BS,Bd,BY,Bj){var BV=this.mChartContextPtr,BU={Rect2D:BS,LowMargin:Bd,HighMargin:BY,FixedMargin:Bj,StartIndex:0},Bi;Bi=BC.call(this,BU);if(BV.mIsGraphMatrix===false){return Bi;}BU={Rect2D:BS,LowMargin:Bd,HighMargin:BY,FixedMargin:Bj,StartIndex:0};var Bf,Be=this.mCategoryOption.mLabelStyle,Bc=600,Bb=800,Bg=this.mLabelInterval;if(BZ){Bf=BV.getUniformAxisLabelRotateMode("x");if(Be!==BI&&Bg!==1&&this.mPlotGroupCount<=Bc){if(Bf===J.Automatic||Bf===J.Rotate90){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;}AN.call(this,1);BU.StartIndex=(Bg>=3)?A5.call(this):0;Bi=BC.call(this,BU);if(Be===C&&Bg>=3&&BV.GetGraphType()===Y.DssGraphTypeGridChart){BU.StartIndex=A5.call(this);Bi=BC.call(this,BU);}}}else{if(Bg>1&&this.mGroupCount>1){var Bh=this.checkShownLabelCount();if(Bh>=2){}else{if(Bh===1){var BW=true,BX=A5.call(this),BT=this.mLabelList[BX],BR=this.mShownLabelList[0],Ba=BR&&BT;if(Ba){BW=BR.mTripleId.mGroupId!==BT.mTripleId.mGroupId;}if(Ba&&BW){if(j.call(this,BT)){BR.mIsShown=false;BT.mIsShown=true;this.mShownLabelList=[];this.mShownLabelList.push(BT);BW=false;}}if(BW){BU.StartIndex=A5.call(this);Bi=BC.call(this,BU);}}}}}return Bi;}function b(BZ,BW,BV){var Ba=this.mLabelList,BY=[],BS,BU,Bc,BR,BT=V.call(this),Bb=this.mAxisInfo.mAxisDirection===Ax.AD_X,BX;BL.ResetRect(this.mDeviceDataArea);k.call(this,BY);Bc=A6.call(this,Bb);if(Bc.Skip&&BT){if(BT){this.restoreLabels();if(this.mLowTrim!==undefined&&this.mHighTrim!==undefined){if(this.mLowTrim>=0&&this.mHighTrim>=0){AB.call(this,this.mLowTrim,this.mHighTrim);}}}return Bc.Space;}o.call(this);BS=d.call(this,Bb,BL,BZ,BW,BV);BX=BY.length;for(BU=0;BU<BX;++BU){BR=BS;if(AP.call(this,BY[BU])){BR+=this.mTickLength;}BD.call(this,BY[BU],this.mDeviceDataArea,BR);}if(this.HasLabelsOnBothSides()){BX=Ba.length;for(BU=0;BU<BX;++BU){Ba.push(Ba[BU]);}}this.mLabelSubIndex=this.mLabelList.length/(this.HasLabelsOnBothSides()?2:1);if(this.hasLabelCreated){q.call(this);}}function AV(BR){switch(this.mAxisInfo.mAxisDirection){case Ax.AD_X:switch(BR){case g.ALL_BOTTOM:if(this.mDepthDirection>0&&this.mDepthDirection<180){return true;}break;case g.ALL_TOP:if(this.mDepthDirection>=180&&this.mDepthDirection<360){return true;}break;}break;case Ax.AD_Y:switch(BR){case g.ALL_LEFT:if(!(this.mDepthDirection>=90&&this.mDepthDirection<270)){return true;}break;case g.ALL_RIGHT:if(this.mDepthDirection>=90&&this.mDepthDirection<270){return true;}break;}break;}return false;}function A1(BR,BU){var BT,BS=this.mChartContextPtr.GetGraphMatrixContext(),BV=AP.call(this,BR)?this.mTickLength:0;if(this.mIsGraphMatrix){BV+=BS.getPadding(Ak.kCategoricalLabelToTick);}else{BV+=this.mLevelSpace*BU;}for(BT=0;BT+1<BU;++BT){BV+=this.mLevelSize[BT];}return BV;}function Al(){var BW,Be,BV,BX,Ba,BS,Bb,Bg=1,Bf=2,BZ=this.mShownLabelList,BR=BZ.length,BU=this.mChartContextPtr,BY=BU.getUniformAxisContext(),Bd=this.mIsUniformAxis,Bc=this.mCategoryOption,BT=BY.CategoryAxis.X;x.Reset(0,0);AZ.Reset(0,0);for(BW=0;BW<BR;++BW){Be=z.call(this,BW);BV=BZ[BW];if(!(BV.mIsShown)){continue;}BV.mIsOnScreen=r.call(this,BV);if(!BV.mIsOnScreen){continue;}BX=this.getGroupMiddlePos(BV.mTripleId.mGroupId,true);BS=Bg;if(Bc.mLabelStyle===G.CLS_STAGGER&&!(BU.mIsTimeSeriesChart)){Bb=(BW>=this.mLabelSubIndex)?(BW-this.mLabelSubIndex):BW;if(Bb>=Math.floor((this.mLabelSubIndex+1)/2)){BS=Bf;}if(Bd){if(BT.StartRow&&BT.StartRow===Bf){BS=Bf+Bg-BS;}}}Ba=A1.call(this,Be,BS);x.x=0;x.y=1;AZ.x=BX;AZ.y=l.call(this,Be,Ba,x);if(this.IsVerticalAxis()){AZ.swap();}if(this.mUseDepth){if(!AV.call(this,Be)){AZ.x+=this.mDepthOffset.x;AZ.y+=this.mDepthOffset.y;}}this.MoveLabel(BV,AZ,x,0);}}function Aq(BT,BV,BR){var BS=this.mAxisCross?this.getGroupMiddlePos(BT):(this.getGroupStartPos(BT)+0.5),BU=this.mAxisCross?this.getGroupMiddlePos(BT+1):(this.getGroupStartPos(BT)+this.getGroupSize()+0.5);BV.y=this.mDeviceDataArea.y;BR.y=this.mDeviceDataArea.y;if(this.IsVerticalAxis()){BV.x=this.mDeviceDataArea.x+this.mDeviceDataArea.width;BR.x=BV.x;BV.y=BS;BR.y=BU;}else{BV.y=this.mDeviceDataArea.y;BR.y=BV.y;BV.x=BS;BR.x=BU;}}function AU(BS,BZ,BY,BW,BT,BX){var BU=this.mChartContextPtr.getUtiliy().tripleId,BV,BR=[];BV=BU.create(BS,this.mTripleId.mSeriesId,M());this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,BY,this.mTickLength,BW,BT,BR);this.GenerateOneLineObject(BV,BR,BX);if(this.HasTwoGridLineParts(BY)){BR.splice(0,BR.length);this.GetOneGridLine(this.IsVerticalAxis()?g.ALL_RIGHT:g.ALL_TOP,BY,this.mTickLength,BW,BT,BR);this.GenerateOneLineObject(BV,BR,BX);}}function As(){var BV=At.gAxisObjects[this.getIndex()].mMajorId,BU=[],BS=[],BT,BR;n.call(this,BU,BS);this.InitObjectSet(BV,Y.GOT_MAJOR_GRID);BR=BU.length;for(BT=0;BT<BR;++BT){AU.call(this,BF.DssGraphO1Major,BT,this.mMajorGrid.mGridStyle,BU[BT],BS[BT],this.mpMajorGridSet);}}function A0(){var BS=[],BV=[],BU=At.gAxisObjects[this.getIndex()].mMinorId,BT,BR;w.call(this,BS,BV);this.InitObjectSet(BU,Y.GOT_MINOR_GRID);BR=BS.length;for(BT=0;BT<BR;++BT){AU.call(this,BF.DssGraphO1Minor,BT,this.mMinorGrid.mGridStyle,BS[BT],BV[BT],this.mpMinorGridSet);}}function t(BR){return BR?this.mPlotGroupCount:this.mGroupCount;}function AI(BR){return BR?this.mPlotGroupSize:this.mGroupSize;}mstrmojo.chart.CategoryAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.CategoryAxis",mLevelSpace:4,mLevelSize:null,mShownLabelList:null,mGroupOrder:null,mLabelSubIndex:0,mCategoryOption:null,mAxisCross:false,mGroupSize:-1,mPlotGroupSize:-1,mPlotGroupCount:0,mGroupCount:1,mDatasetPtr:null,mPaddingOnSide:-1,mWordWrap:true,screenWindow:null,init:function AT(BR){this._super(BR);if(this.mChartContextPtr.mIsGraphMatrix){this.mLevelSpace=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ak.kBetweenLabelLines);}this.mLevelSize=[];this.mShownLabelList=[];this.mGroupOrder=[];this.mCategoryOption={mLabelStyle:G.CLS_AUTOMATIC,mManualSkip:0};if(this.mChartContextPtr.mIsUniformAxisMode){this.mIsShown=this.mIsUniformAxis;}if(BR.AxisDirection===Ax.AD_X){this.mAxisInfo.mAxisLabelsLocation=g.ALL_BOTTOM;}if(BR.AxisDirection===Ax.AD_Y){this.mAxisInfo.mAxisLabelsLocation=g.ALL_LEFT;}this.mDatasetPtr=null;this.mWordWrap=false;this.LoadProperties();},SetDataset:function AD(BR){this.mGroupSize=-1;var BS=this.mDatasetPtr=BR;if(BS!==null){if(BM.call(this)){this.mGroupCount=BS.GetSeriesCount();}else{this.mGroupCount=BS.GetGroupCount();}this.mPlotGroupCount=this.mGroupCount;}},getSubGroupMiddlePos:function Az(BV,BU,BS,BW){if(BS<=0){return 0;}BW=BW||false;if(BS===1){return this.getGroupMiddlePos(BV);}var BR=this.getGroupSize(BW),BT=this.getGroupStartPos(BV,BW);BT+=BR/(2*BS);return BT+BU*(BR/BS);},getGroupMiddlePos:function BB(BR,BS){BS=(BS!==undefined)?BS:false;return Math.round(this.getGroupStartPos(BR,BS)+this.getGroupSize()/2);},getFloatGroupMiddlePos:function BN(BR,BS){BS=(BS!==undefined)?BS:false;return this.getGroupStartPos(BR,BS)+this.getGroupSize()/2;},getGroupStartPos:function f(BS,BT){BT=(BT!==undefined)?BT:false;var BR=0;switch(this.mAxisInfo.mAxisDirection){case Ax.AD_X:BR=this.mDeviceDataArea.x+AM.call(this);break;case Ax.AD_Y:BR=this.mDeviceDataArea.y+AM.call(this);break;}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mAxisCross){BR-=this.getGroupSize(BT)*0.5;}}else{if(this.mAxisCross){BR-=this.getGroupSize(BT)*0.5;}}return BR+this.getGroupSize(BT)*BS;},getGroupSize:function T(BS){BS=(BS!==undefined)?BS:false;var BR=AI.call(this,BS);if(BR!==-1){return BR;}BR=0;var BT=t.call(this,BS);if(this.mDatasetPtr!==null){if(!this.mAxisCross){if(BT===0){BT=1;}BR=P.call(this)/BT;}else{if(BT>1){BR=P.call(this)/(BT-1);}else{BR=P.call(this)*2;}}}return BR;},GenerateMapAndList:function AA(){var BW,BY,BT=this.mGraphObjectList,BV=this.mpAxisLabelSet,BU=this.mLabelList,BR;if(this.mIsShown===false){return ;}Aj.call(this);if(BU.length!==0){Al.call(this);if(this.mChartContextPtr.mIsGraphMatrix){var BS=[],BX=At.gAxisObjects[this.getIndex()].mLabelId;for(BW=0;BW<BT.length;BW++){if(BT[BW]&&BT[BW].mTripleId.mObjectId!==BX.mObjectId){BS.push(BT[BW]);}}BT=this.mGraphObjectList=[];BV.ClearCollection();BR=BU.length;for(BW=0;BW<BR;++BW){if(BU[BW]){BT.push(BU[BW]);BV.AddGraphObject(BU[BW]);}}for(BW=0;BW<BS.length;BW++){BT.push(BS[BW]);}}else{BR=BU.length;for(BW=0;BW<BR;++BW){if(BU[BW]){BT.push(BU[BW]);BV.AddGraphObject(BU[BW]);}}}}if(this.mAxisInfo.mShowAxisTitle){BY=this.getAdjustedTitleArea();this.UpdateTitleLocation(BY);}},getAdjustedTitleArea:function E(){var BU=new At.Rect2D({Rect2D:this.mDeviceDataArea}),BT,BS,BR=this.mLevelSize.length;if(this.IsVerticalAxis()){BS=g.ALL_LEFT;if(BS===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===g.ALL_LEFT_RIGHT){BU.x-=AP.call(this,BS)?this.mTickLength:0;for(BT=0;BT<BR;++BT){BU.x-=this.mLevelSpace;BU.x-=this.mLevelSize[BT];}if(!AV.call(this,BS)){BU.x+=this.mDepthOffset.x;}}}else{BS=g.ALL_BOTTOM;if(BS===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP){BU.height+=AP.call(this,BS)?this.mTickLength:0;for(BT=0;BT<BR;++BT){BU.height+=this.mLevelSpace;BU.height+=this.mLevelSize[BT];}if(!AV.call(this,BS)){BU.height+=this.mDepthOffset.y;}}}return BU;},generateInterlacedSection:function AY(){var BV=new At.TripleId({ObjectId:this.GetInterlacedGridId(),SeriesId:AS,GroupId:AQ}),BS,BR=[],BT,BU=this.mGroupCount;this.InitObjectSet(BV,Y.GOT_INTERLACED_GRID);for(BS=0;BS<BU;BS+=2){if(this.mAxisCross&&BS===BU-1){continue;}BR.splice(0,BR.length);this.getInterlacedSectionPolygon(BS,BR);BT=new At.PolygonObject({TripleId:BV,GraphObjectManager:this,Polygon:BR,GraphCollectionObject:this.mpInterlacedGridSet});this.mpInterlacedGridSet.AddGraphObject(BT);this.mManagerGraphObjectList.push(BT);}},getInterlacedSectionPolygon:function s(BW,Ba){var BX=this.mUseDepth,BU=this.mDeviceDataArea,BV=this.mDepthDirection,BR=this.mDepthOffset,BZ=new At.Point2D(),BY=new At.Point2D(),BT,BS;Aq.call(this,BW,BZ,BY);BT=new At.Point2D({Point2D:BZ});BS=new At.Point2D({Point2D:BY});if(!this.IsVerticalAxis()){BT.y=BU.GetBottomLeft().y;BS.y=BT.y;if(BX&&BV>=180&&BV<360){BT.swapPoints(BZ);BS.swapPoints(BY);}}else{BT.x=BU.x;BS.x=BT.x;if(BX&&BV>=90&&BV<270){BT.swapPoints(BZ);BS.swapPoints(BY);}}if(BX){Ba.push(BT);Ba.push(BS);Ba.push(BS.Shifted(BR));Ba.push(BY.Shifted(BR));Ba.push(BZ.Shifted(BR));Ba.push(BT.Shifted(BR));}else{Ba.push(BT);Ba.push(BS);Ba.push(BY);Ba.push(BZ);}},AdjustTitleArea:function Ar(BR){if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(BR);}},AdjustDataArea:function A(BR,BT,BV,BX){var BW;if(!this.mIsShown){return ;}if(BT===undefined){BT=1000;}if(BV===undefined){BV=1000;}if(BX===undefined){BX=false;}if(this.mUseDepth){this.ReserveDepthAxisLine(BR);}if(this.mDatasetPtr!==null&&this.mAxisInfo.mShowAxisLabels){if(this.mUseDepth){var BS=this.TrimMarginsForDepthAxis(BT,BV);BT=BS.LowMargin;BV=BS.HighMargin;BV=BS.HighMargin;}BW=At.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(BW,Y.GOT_AXIS_LABEL);if(this.mChartContextPtr.mIsGraphMatrix&&this.mAxisInfo.mAxisDirection===Ax.AD_Y){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Normal;}this.SetDeviceDataArea(BR);b.call(this,BT,BV,BX);var BU=this.mDeviceDataArea;BU.width=Math.max(BU.width,0);BU.height=Math.max(BU.height,0);BR.ResetRect(BU);}},generateGridsByArea:function y(BR){if(BR){if(this.mMajorGrid.mShowGridLines){As.call(this);}if(this.mMinorGrid.mShowGridLines){A0.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){this.generateInterlacedSection();}}},getMinMaxLogicalCoord:function Ap(){if(this.mAxisCross){return{min:1,max:(this.mGroupCount>1)?this.mGroupCount:2};}return{min:0.5,max:this.mGroupCount+0.5};},GenerateGridsOnMiddleWall:function N(BS,BR){var BT=this.mDeviceDataArea;this.mDeviceDataArea=BS;p.call(this);O.call(this);Ah.call(this);if(!this.mManagerGraphObjectList.empty()){this.MoveGraphObjectList(BR);}this.mDeviceDataArea=BT;},getTotalGroupCount:function X(){var BS=this.mDatasetPtr.GetSliceFlag(),BR;this.mDatasetPtr.EnableSlices(false);BR=this.mDatasetPtr.GetGroupCount();this.mDatasetPtr.EnableSlices(BS);return BR;},LoadProperties:function Ad(){var BU,BS;this._super();if(!this.mIsShown){return ;}var BT=this.mChartContextPtr,BR=this.mCategoryOption;if(!BT.mIsGraphMatrix){BU=new At.TripleId({ObjectId:this.mTripleId.mObjectId});BS=BT.GetProperty(BE.DssGraphAxisAutoFit,BU);if(BS!==null&&BS!==undefined){if(BS!==false){BR.mLabelStyle=G.CLS_NORMAL;}else{BS=BT.GetProperty(BE.DssGraphAxisStagger,BU);if(BS!==null&&BS!==undefined){if(BS!==false){BR.mLabelStyle=G.CLS_STAGGER;}else{BR.mLabelStyle=G.CLS_MANUAL;BS=BT.GetProperty(BE.DssGraphAxisScaleFreq,BU);if(BS){BR.mManualSkip=BS;if(BR.mManualSkip<1){BR.mManualSkip=1;}}}}}}switch(BT.GetGraphMajorType()){case An.GMT_RADAR:case An.GMT_3D_CATEGORY:return ;case An.GMT_CATEGORY:if(BT.isParetoChart()){return ;}break;default:break;}}},TrimAxisPadding:function R(BV){var BW=this.mChartContextPtr,BS=BW.getUniformAxisContext(),BU=BS.CategoryAxis;if(BW.mIsGraphMatrix===false){return ;}var BT,BR="X";if(this.IsVerticalAxis()){BR="Y";}if(this.mIsUniformAxis===false){BT=BU[BR];this.mHighTrim=BT.Trims[1]||0;this.mLowTrim=BT.Trims[0]||0;}u.call(this,this.mHighTrim,this.mLowTrim,BV);},ResetAxisPadding:function D(){this.mPaddingOnSide=-1;},getStatus:function K(){var BU=0,BR=1,BV=2,BT=this.getLabelRotation(),BS=this.mLabelInterval;if(BT===J.Rotate90){return BV;}if(BS===1){return BU;}if(BS===2&&this.mCategoryOption.mLabelStyle===G.CLS_STAGGER){return BR;}return BV;},getGroupSlotAt:function A7(BS){var BT=this.getGroupStartPos(0),BR=this.getGroupSize();return Math.ceil((BS-BT)/BR)-1;},getGridLinePosition:function A2(){return[];},getBandings:function S(){var BY=[],BX=0,BU=0,BT,BW=this.mGroupCount,BV=this.mChartContextPtr,BS;if(BW===1){if(this.IsVerticalAxis()){BU=BV.mGraphHeight;}else{BU=BV.mGraphWidth;}BY.push({Start:BX,Size:BU});}else{var BR=this.getGroupSize(true);for(BS=0;BS<BW;++BS){if(BS===0){BX=0;BU=this.getGroupStartPos(1,true);}else{if(BS===BW-1){if(this.IsVerticalAxis()){BU=BV.mGraphHeight;}else{BU=BV.mGraphWidth;}BT=BY[BS-1];BX=BT.Start+BT.Size;BU=BU-BX;}else{BT=BY[BS-1];BX=BT.Start+BT.Size;BU=BR;}}BY.push({Start:BX,Size:BU});}}return BY;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","Axis","ChartAdvFormat","NumberObject","AxisObject","Vector2D","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphOffScaleType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumNumberCategory","EnumCollectionType","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphMarkerShape");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresCls("mstrmojo.gm.GMUtility");var AL=mstrmojo.hash,Bd=mstrmojo.chart,BZ=Bd.ChartConstants,BG=Bd.enums,BV=mstrmojo.VisUtility,b=BG.EnumGraphMajorType,Ar=BG.EnumDSSGraphOffScaleType,a=BG.EnumAnchorPoint,U=BG.EnumAxisLabelsLocation,h=BG.EnumAxisDirection,AM=BG.EnumGraphObjectType,t=BG.EnumCollectionType,AK=Bd.gNullObjectId,BY=Bd.model,AW=BY.enums,f=AW.EnumDSSGraphMarkerShape,A2=AW.EnumDSSGraphType,A5=AW.EnumDSSGraphProperty,A7=AW.EnumDSSGraphObject,A6=AW.EnumDSSExtraGraphProperty,BK=AW.EnumDSSGraphFontRotation,q=AW.EnumDSSGraphGridLineType,r=BG.EnumRectExpandDirection,T=BG.EnumGraphMatrixMajorGraphType,AP=Bd.common.Utility,BA=mstrmojo.gm,AD=BA.GMUtility,BU=0.00001,Bc=0,AH=1e-14,AB=10000,Ba=0.1;var AF=new Bd.Rect2D(),Bm=new Bd.Rect2D(),O=new Bd.Rect2D(),R=null,F=null,AA=null,V=null,w=new Bd.TripleId();function A1(Bn){switch(Bn){case A7.DssGraphY2Body:case A7.DssGraphX2Body:return true;}return false;}function BR(Bu,Bt,Bp){var Bs=Bu,Bq=10,Bn=this.mChartContextPtr,Br=Bn.mGraphWidth,Bo=Bn.mGraphHeight,Bw=this.IsVerticalAxis();if(Bp===undefined){var Bv=Bw?Bo:Br;if((Bw^Bt)===0){Bp=0.5*Bu;}else{Bp=0.5*(Bv-Bu);}}Bp=Bt?-Bp:Bp;if(!Bw){Bp=-Bp;}Bs+=Bp;if(Bs<Bq||Bs+Bq>(Bw?Bo:Br)){return null;}return Bs;}function X(){if(this.hasLabelCreated){var Bo,Bp=this.mLabelList,Bn=Bp.length;for(Bo=0;Bo<Bn;Bo++){if(Bp[Bo]&&Bp[Bo].mIsShown){return true;}}return false;}return e.call(this);}function Af(){var Bo=this.mChartContextPtr,Bw=Bo.GetGraphMatrixContext(),Bx={Include:false,DrawFromZero:false};if(Bw.isCombinationChart()){var Bs=Bo.mDataset,Br=Bs.GetSeriesByShape(),Bz=this.mTripleId.mObjectId,By=false,Bv=A1.call(this,Bz),Bt=Br.Bar,Bq=Br.Area,Bp=0,Bn=0;var B1=Bs.GetSeriesCount();if(Bo.IsDualAxis()){var Bu=Bv?1:0,B0=Bv?"Secondary":"Primary";Br=Bs.GetShapesDistributionByValueAxis(Bu)[B0];Bt=Br.BAR;Bq=Br.AREA;B1=Bs.GetSeriesByValueAxis(Bu).length;By=(Bt&&Bt.indexOf(Bu)!==-1)||(Bq&&Bq.indexOf(Bu)!==-1);}else{By=((Bt&&Bt.length>0)||(Bq&&Bq.length>0));}By=!!By;Bx.Include=By;if(Bt&&Bt.length>0){Bp=Bt.length;}if(Bq&&Bq.length>0){Bn=Bq.length;}Bx.DrawFromZero=(Bn+Bp===B1);}return Bx;}function K(Bn){return Math.log(Bn)/Math.log(10);}function E(){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var Bn=this.mMajorGrid;return Bn.mUseManualGrid&&(Bn.mGridInterval<(this.mMaxTick-this.mMinTick)/30);}function S(){return this.mOptions.mUseMinValue&&this.mOptions.mShowMinLabel;}function BX(B3,Bx,Bp){var Bw,Br;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}Bw=0;if(Bp){Bw=Math.max(B3,B3-Bx);Bw=Math.max(Bw,-Bx);}else{Bw=B3-Bx;}if(Bw===0){this.mIsShown=false;return 1;}if(Bw>=1&&Bw<=4&&parseInt(Bw)===Bw){var B4=this.PrimaryMetricIndex,Bs=B4.length;for(var Bz=0;Bz<Bs;Bz++){var Bv=this.mChartContextPtr.mDatasetPtr,By=Bv.dataProvider,Bq=By.getSeriesCount(),Bu=By.getGroupCount(),Bo=B4[Bz],Bt,B1;for(var B2=0;B2<Bq;B2++){Bt=By.getMetricIndexForSeries(B2);if(Bt===Bo){B1=true;for(var B0=0;B0<Bu;B0++){var B5=Bv.GetData(B2,B0);if(parseInt(B5)!==B5){B1=false;break;}}}if(B1){return 1;}}}}var Bn=Bw;Br=1;while(Bw<1){Bw*=10;Br/=10;}while(Bw>=10){Bw/=10;Br*=10;}if(Bw<1.8){Br*=2;Br/=10;}else{if(Bw<3.1){Br*=4;Br/=10;}else{if(Bw<4.6){Br*=5;Br/=10;}else{if(Bw>=8.1){Br*=2;}}}}Br=this.postProcessStep(Br,Bn);return Br;}function Az(){return this.mGraphMajorType===b.GMT_HISTOGRAM&&this.mTripleId.mObjectId===A7.DssGraphX1Body;}function As(){return(this.mGraphMajorType===b.GMT_HISTOGRAM||this.mGraphMajorType===b.GMT_POLAR)&&this.mTripleId.mObjectId===A7.DssGraphX1Body;}function J(){var Bn=this.mChartContextPtr;if(Bn.mIsGraphMatrix){return !this.IsVerticalAxis();}if(!this.mChartContextPtr.mManualLayoutMode&&this.mTripleId.mObjectId===A7.DssGraphX1Body&&!this.IsVerticalAxis()){switch(this.mGraphMajorType){case b.GMT_HISTOGRAM:case b.GMT_SCATTER:case b.GMT_BUBBLE:return true;default:break;}}return false;}function AJ(){var B5,Bq,By,B4,Bp,B1=0,Bv=this.mOptions,B3,Bs,Bw,Br=0;var Bo=this.mChartContextPtr,Bu=Bo.mIsGraphMatrix,Bn=Bo.getUniformAxisLabelRotateMode("x");B5=[];this.GetTicks(B5);if(B5.length<2){if(!Bu||Bn===BK.Automatic){return ;}}By=Bd.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(By,AM.GOT_AXIS_LABEL);Bp=this.mpAxisLabelSet.GetFormatFont();if(Bu){if(Bn!==BK.Automatic){Bp.mFontRotation=Bn;return ;}}B3=B5.length;B4=50;Bq=false;AF.Reset(0,0,0,0);Bp.mFontRotation=BK.Normal;if(!Bu&&B3>=2){if(this.mOptions.mUseMinValue){B1=1;Br=1;}if(this.mOptions.mUseMaxValue){B3--;}}var Bz,B0=B1,B2=this.mChartContextPtr.GetGraphMatrixContext();for(Bz=0;B1<B3;B1++){if(this.hasLabelCreated){Bs=this.mLabelList[B1];}Bs=Bs||new Bd.NumberObject({TripleId:By,GraphObjectManager:this,Number:B5[B1],NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});Bs.MoveTo(this.ValueToPosition(B5[B1]),B4,a.CENTER);Bw=Bs.GetBoundingRect(true);if(B1!==Br){if(Bu){var Bx=(B1===1&&Bv.mUseMinValue)||(B1===B3-1&&Bv.mUseMaxValue);if(!Bx){var Bt=1;Bq=Bw.HasIntersection(AF)||B2.checkPaddingBetweenLabels(AF,Bw,Bt,true);}}else{Bq=Bw.HasIntersection(AF);}}AF.ResetRect(Bw);}this.hasLabelCreated=this.mpAxisLabelSet.GetCollectionSize()===B3;if(Bq){Bp.mFontRotation=Bu?BK.Rotate90:BK.Rotate270;}else{Bp.mFontRotation=BK.Normal;}this.maxLabelLength=this.fakeMaxLabelLength;if(this.maxLabelLength!==-1){this.restoreLabels(true);for(Bz=0;B0<B3;B0++){Bs=this.mLabelList[B0];Bs.MoveTo(this.ValueToPosition(B5[B0]),B4,a.CENTER);}}}function Ab(){switch(this.mChartContextPtr.GetGraphType()){case A2.DssGraphTypeVertical_Area_DualAxis_Absolute:case A2.DssGraphTypeVertical_Area_DualAxis_Stacked:case A2.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case A2.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case A2.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case A2.DssGraphTypeVertical_Bar_DualAxis_Stacked:case A2.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case A2.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case A2.DssGraphTypeVertical_Line_DualAxis_Absolute:case A2.DssGraphTypeVertical_Line_DualAxis_Stacked:case A2.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case A2.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case A2.DssGraphTypeVertical_Bar_DualAxis_Absolute:case A2.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:return true;default:return false;}}function g(){if(this.mUseDepth){return(A1.call(this,this.mTripleId.mObjectId)===false||!(Ab.call(this)));}return this.mAxisInfo.mShowAxisLine;}function y(Bp,Bn){var Bo;Bo=new Bd.NumberObject({TripleId:Bp,GraphObjectManager:this,Number:Bn,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectedCondense:this.mCondenseLabels});this.mGraphObjectList.push(Bo);this.mpAxisLabelSet.AddGraphObject(Bo);}function Bl(){var Bp,Bn,Bq,Bo;Bp=[];this.GetTicks(Bp);Bn=Bp.length;Bq=this.mLabelObjectId;for(Bo=0;Bo<Bn;++Bo){y.call(this,Bq,Bp[Bo]);}}function AC(Bv,Bo,Bt){var Bq=this.mChartContextPtr,Bw=this.mOptions,Bn=Bo,Bs=Bt;var Bp=Bq.mIsGraphMatrix&&Bw.mUseCustomMinMax;if(!Bq.mIsTimeSeriesChart&&!Bp){if(Bq.mIsGraphMatrix){var Bu=1e-9,Br=Math.abs((Bv-this.mMaxTick)/(this.mMaxTick-this.mMinTick));if((Bv<this.mMinTick||(Bv>this.mMaxTick&&Br>Bu))&&Bw.mOffScaleType===Ar.DssGraphOffScaleHide){return{Flag:false,Value:Bv,Min:Bn,Max:Bs};}if(Bv>this.mMaxTick&&Bw.mOffScaleType===Ar.DssGraphOffScaleHide){Bv=this.mMaxTick;}}else{if((Bv<this.mMinTick||Bv>this.mMaxTick)&&Bw.mOffScaleType===Ar.DssGraphOffScaleHide){return{Flag:false,Value:Bv,Min:Bn,Max:Bs};}}if(Bw.mOffScaleType===Ar.DssGraphOffScaleClip){Bv=(Bv>this.mMaxTick)?this.mMaxTick:Bv;Bv=(Bv<this.mMinTick)?this.mMinTick:Bv;}}Bn=this.mMinTick;Bs=this.mMaxTick;if(this.IsLogarithmic()){if(Bv<=0){return{Flag:false,Value:Bv,Min:Bn,Max:Bs};}Bv=K.call(this,Bv);Bn=K.call(this,Bn);Bs=K.call(this,Bs);}return{Flag:true,Value:Bv,Min:Bn,Max:Bs};}function C(){}function AY(Bq){if(AA===null){AA=new Bd.Point2D();}else{V.Reset(0,0);}if(V===null){V=new Bd.Point2D();}else{V.Reset(0,0);}var Bo=AA,Bs=V,Bp=this.mDeviceDataArea,Bn,Br;Bn=this.IsVerticalAxis()?Bp.x:Bp.x+Bp.width;Br=this.IsVerticalAxis()?Bp.y:Bp.y+Bp.height;Bo.Reset(Bn,Br);Bs.Reset(Bp.x+Bp.width,Bp.y);if(this.IsVerticalAxis()){Bo.y=this.ValueToPosition(Bq);Bs.y=Bo.y;}else{Bo.x=this.ValueToPosition(Bq);Bs.x=Bo.x;}return{LowEnd:Bo,HighEnd:Bs};}function Bj(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Br=this.mOptions;if(Br.mUseCustomMinMax||Br.mUseLogarithmicScale){return ;}var Bp=false,Bn=false,Bq=[];this.GetTicks(Bq);if(Bq.length>=2){var Bo=Bq.length;Bn=((Math.abs(this.mMaximum-Bq[Bo-2])<Ba*this.mStep));Bp=((Math.abs(this.mMinimum-Bq[1])<Ba*this.mStep));if(this.mIsPercent){Bn=false;}}if(Bn&&Bp){this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;Br.mUseMinValue=true;Br.mShowMinLabel=false;Br.mUseMaxValue=true;Br.mShowMaxLabel=false;}else{if(Bn){this.mMaxTick=this.mMaximum;Br.mUseMaxValue=true;Br.mShowMaxLabel=false;}else{if(Bp){this.mMinTick=this.mMinimum;Br.mUseMinValue=true;Br.mShowMinLabel=false;}else{Bc++;}}}if(Br.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}function Ay(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}if(this.mGraphMajorType===b.GMT_BUBBLE&&this.mTripleId.mObjectId===A7.DssGraphZBody){return ;}Bj.call(this);}function v(){var Br=this.mChartContextPtr;if(!Br.mIsGraphMatrix){return false;}var Bq=Br.mDataset;if(!Bq){return false;}if(!this.mIsUniformAxis){var Bp=Br.GetGraphMatrixContext();if(Bp.isPieOrRingShape()===false&&Bq.showDatalabels()===false){return true;}if(Bp.isPieOrRingShape()===true&&Bq.showPieDatalabels()===false){return true;}}if(this.mPrimaryMetrics){if(!!this.mNumberFormat.isDefault){this.mNumberFormat=new Bd.ChartAdvFormat();}var Bo=Bq.getValueAxisNumberFormat(this.mNumberFormat,this.mPrimaryMetrics);if(this.mIsPercent===false){return Bo;}}var Bn=this.mNumberFormat;if(this.mIsPercent){Bn.mFormatType=4;Bn.mCustomFormat="0%";return true;}return false;}function AT(Bq){var Bo,Bp,Bn;for(Bo=0;Bo<2;Bo++){Bp=(Bo===0)?this.mHighTicksToLabel:this.mLowTicksToLabel,Bn=Bp[Bq];if(Bn&&Bn.mIsShown){return Bn;}}return null;}function AX(Bs,Bp){var Bq,Br=this.mChartContextPtr;if(Br.mIsGraphMatrix){if(this.IsVerticalAxis()){if(Bp.y===Br.mGraphHeight){--Bp.y;--Bs.y;}}if(Br.isUADataAreaOutput()){var Bo=Br.GetGraphMatrixContext().getPadding(BZ.kEndTickToChart),Bn=Br.getUniformAxisContext();if(this.IsVerticalAxis()){if(Bn.mDataAreaRightMargin>=0){if(Bs.x+Bn.mDataAreaRightMargin<=Br.mGraphWidth){Bs.x+=Bn.mDataAreaRightMargin;}else{Bs.x=Br.mGraphWidth;}}if(Bn.mDataAreaLeftMargin>=0){if(Bp.x>=Bn.mDataAreaLeftMargin){Bp.x-=Bn.mDataAreaLeftMargin;}}Bq=Br.mGraphHeight;if(Math.abs(Bp.y-Bq)<Bo||Math.abs(Bp.y)<Bo){return false;}}else{if(Bn.mDataAreaBottomMargin>=0){if(Bp.y+Bn.mDataAreaBottomMargin<=Br.mGraphHeight){Bp.y+=Bn.mDataAreaBottomMargin;}else{Bp.y=Br.mGraphHeight;}}if(Bn.mDataAreaTopMargin>=0){if(Bs.y>=Bn.mDataAreaTopMargin){Bs.y-=Bn.mDataAreaTopMargin;}}Bq=Br.mGraphWidth;if(Math.abs(Bp.x)<Bo||Math.abs(Bs.x-Bq)<Bo){return false;}}}}return true;}function Ae(Bw,Bx,By,Bq){var Bz,B0,Bs,Bt,Bo=[],Bp=this.mChartContextPtr,Bn=Bq?this.hasMajorTickCreated:this.hasMinorTickCreated,Br;if(Bx>this.mMaxTick||Bx<this.mMinTick){return ;}if(Bp.mIsGraphMatrix){if(this.mAxisInfo.mAxisDirection>=h.AD_Z){return ;}if(Bp.isUADataAreaOutput()){var Bv=Bp.GetGraphMatrixContext().mShownValueTickSet[this.mAxisInfo.mAxisDirection];if(Bv[Bx]===undefined){return ;}}if(this.mIsUniformAxis){if(this.mAxisInfo.mShowAxisLabels===false){return ;}var Bu=AT.call(this,Bx);if(!Bu||!Bu.mIsShown){return ;}}}Br=AY.call(this,Bx);Bz=Br.LowEnd;B0=Br.HighEnd;if(!AX.call(this,B0,Bz)){return ;}Bs=Bq?this.mMajorGrid.mGridStyle:this.mMinorGrid.mGridStyle;Bt=Math.floor(Bq?this.mTickLength:this.mTickLength*2/3+1);this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,Bs,Bt,Bz,B0,Bo);this.GenerateOneLineObject(Bw,Bo,By);if(this.HasTwoGridLineParts(Bs)){Bo.splice(0,Bo.length);this.GetOneGridLine(this.IsVerticalAxis()?U.ALL_RIGHT:U.ALL_TOP,Bs,Bt,Bz,B0,Bo);this.GenerateOneLineObject(Bw,Bo,By);}}function u(Bo,Bq,Bn){var Bp=Bo?this.mHighTicksToLabel:this.mLowTicksToLabel;Bp[Bq]=Bn;}function Be(Bp,Bq){var Bo,Bn=this.mpAxisLabelSet.GetCollectionSize(),Br=Bp?this.mHighTicksToLabel:this.mLowTicksToLabel;Br={};if(Bq<0||Bq>=Bn){return ;}for(Bo=Bq;Bo<Bn;Bo++){var Bs=this.mpAxisLabelSet.GetObjectByIndex(Bo);if(Bs){u.call(this,Bp,Bs.mNumber,Bs);}}}function Q(Bn,Bp){if(Bp<=0){return 0;}var Bu=this.mOptions,Bt=this.mMaxTick,Br=this.mMinTick,Bs=this.mMaximum,Bq=this.mMinimum,Bo;if(Bu.mUseLogarithmicScale){Bs=Bs<=0?-1:K.call(this,Bs);Bq=Bq<=0?-1:K.call(this,Bq);Bt=K.call(this,Bt);Br=K.call(this,Br);}Bo=Bn?Bt-Bs:Bq-Br;Bo=Math.abs(Bo);return Bo/(Bt-Br)*Bp;}function BI(){var Bp,Bq,Bn,Bo;if(this.mIsUniformAxis){Bp=this.mTripleId;}else{Bp=Bd.gAxisObjects[this.getIndex()].mMajorId;}if(this.hasMajorTickCreated){this.clearTickObjects(Bp,true);this.hasMajorTickCreated=false;}this.InitObjectSet(Bp,AM.GOT_MAJOR_GRID);if(this.mChartContextPtr.mIsGraphMatrix){Ae.call(this,Bp,this.mMinTick,this.mpMajorGridSet,true);Ae.call(this,Bp,this.mMaxTick,this.mpMajorGridSet,true);}else{Bq=true;Bn=this.mChartContextPtr.GetProperty(A5.DssGraphLineAlpha,new Bd.TripleId({ObjectId:A7.DssGraphFrame}));if(Bn){Bq=(Bn>0);}if(!Bq||this.mAxisInfo.mAxisDrawInReverse){Ae.call(this,Bp,this.mMinTick,this.mpMajorGridSet,true);}if(!Bq||!this.mAxisInfo.mAxisDrawInReverse){Ae.call(this,Bp,this.mMaxTick,this.mpMajorGridSet,true);}}for(Bo=0;Bo<this.mTicks.length;++Bo){Ae.call(this,Bp,this.mTicks[Bo],this.mpMajorGridSet,true);}this.hasMajorTickCreated=true;}function P(){var Bq,Bp=this.mOptions,Bn,Bs,Br,Bo;Bq=1;if(Bp.mUseLogarithmicScale){Bq=8;}else{if(this.mMinorGrid.mUseManualGrid){Bq=Math.floor(this.mMinorGrid.mGridInterval);}}if(this.mIsUniformAxis){Bn=this.mTripleId;}else{Bn=Bd.gAxisObjects[this.getIndex()].mMinorId;}if(this.hasMinorTickCreated){this.clearTickObjects(Bn,false);this.hasMinorTickCreated=false;}this.InitObjectSet(Bn,AM.GOT_MINOR_GRID);Bs=this.mStep/(Bq+1);for(Br=0;Br<this.mTicks.length;++Br){Bs=Bp.mUseLogarithmicScale?this.mTicks[Br]:Bs;for(Bo=1;Bo<=Bq;++Bo){Ae.call(this,Bn,this.mTicks[Br]+Bo*Bs,this.mpMinorGridSet,false);}}if(this.mTicks.length===0){Bs=Math.floor(Bp.mUseLogarithmicScale?this.mMinTick:(this.mMaxTick-this.mMinTick)/(Bq+1));for(Bo=1;Bo<=Bq;++Bo){Ae.call(this,Bn,this.mMinTick+Bo*Bs,this.mpMinorGridSet,false);}return ;}Bs=Bp.mUseLogarithmicScale?this.mMinTick:Bs;for(Bo=1;Bo<=Bq;++Bo){Ae.call(this,Bn,this.mTicks[0]-Bo*Bs,this.mpMinorGridSet,false);}this.hasMinorTickCreated=true;}function Aj(){if(this.mpAxisLabelSet===null){return ;}if(this.mCondenseLabels!==true){return ;}var Br=this.mpAxisLabelSet.GetCollectionSize()-1,Bs,Bn=null,Bp=true,Bq,Bo,Bu,Bv=0;while(Br>=0){Bo=this.mpAxisLabelSet.GetObjectByIndex(Br);Bq=0;if(Bo.mIsShown){if(Bp){Bs=Bo.mText;Bn=Bo;Bp=false;Bu=Bn.GetNumberFromText();if(Bu!==null){Bq=Bu;Bv=Math.abs(Bq-Bn.mNumber);}}else{var Bt=Bo.mText;if(Bt===Bs){if(Bn.mIsShown){if(Bv>0){Bn.mIsShown=false;}}Bu=Bo.GetNumberFromText();if(Bu!==null){Bq=Bu;if(Math.abs(Bq-Bo.mNumber)>0){Bo.mIsShown=false;}}else{Bo.mIsShown=false;}}else{Bs=Bt;Bn=Bo;Bu=Bn.GetNumberFromText();if(Bu){Bq=Bu;Bv=Math.abs(Bq-Bo.mNumber);}else{Bv=0;}}}}Br--;}}function Bk(){var Bq=this.mChartContextPtr;if(Bq.mIsGraphMatrix&&!Bq.isUADataAreaOutput()){if(this.mAxisInfo.mAxisDirection>=h.AD_Z){return ;}var Bo=Bq.GetGraphMatrixContext(),Bn=Bo.mShownValueTickSet[this.mAxisInfo.mAxisDirection]={},Bp=function(Br){AL.forEach(Br,function(Bs){if(Bs.mIsShown){Bn[Bs]=true;}});};Bp(this.mHighTicksToLabel);Bp(this.mLowTicksToLabel);}}function Ax(Bo,Bq,Bp){var Bn=this.ValueToFloatPosition(Bo),Br=Bq+0.5*Bp,Bs=this.mChartContextPtr;if(Bn>=Br&&Bn+Br<=Bs.mGraphWidth){return true;}return false;}function e(){var Bo=this.mChartContextPtr,Bs=Bo.GetGraphMatrixContext(),Bt=this.mDeviceDataArea,Bv=this.IsVerticalAxis(),Bn,Bw=this.mpAxisLabelSet.mFormatFontPtr,Bp=Bs.getPadding(BZ.kEndLabelToChart);if(Bv){Bn=Math.max(Bt.height,Bo.mGraphHeight);}else{Bn=Math.max(Bt.width,Bo.mGraphWidth);}if(Bn<Bw.mFontSize+2*Bp){return false;}if(Bn<Bw.GetStringHeight("H")+2*Bp){return false;}if(Bt.width>=0&&Bt.height>0){var Bu=[];this.GetTicks(Bu);var Bq,Br=Bu.length;for(Bq=0;Bq<Br;Bq++){if(Ax.call(this,Bu[Bq],Bp,Bw.mFontSize)===true){return true;}}}return true;}function BP(Bp){if(this.mOptions.mUseMaxValue||Bp>this.mDeviceDataArea.height){return false;}var Bn,Bo=(this.mMaxTick-this.mMinTick)/(this.mDeviceDataArea.height-Bp)*this.mDeviceDataArea.height;for(Bn=this.mMaxTick;Bn<Bo;Bn+=this.mStep){this.mTicks.push(Bn);}this.mMaxTick=Bo;return true;}function L(Bp){var Bq=this.mChartContextPtr,Bo=0,Bn=0;if(Bq.mIsGraphMatrix){Bn=Bo=Bq.GetGraphMatrixContext().getPadding(BZ.kChartToChart);if(Bp){Bn=Bo=0;}else{if(this.mMaxTick<=0){Bo=0;}if(this.mMinTick>=0){Bn=0;}}}return{LowPadding:Bn,HighPadding:Bo};}function Ah(){var Br=this.mChartContextPtr,Bo=0,Bn=Br.GetGraphMatrixContext(),Bq=Br.mDataset.GetGroupCount();if(Br.mIsGraphMatrix===false){return 0;}if(Bn.isCombinationChart()){var Bp=Br.mDataset.GetSeriesByShape();if(Bp.Circle&&Bp.Circle.length){return Bn.getPadding(BZ.kExtra);}if(Bp.Square&&Bp.Square.length){return Bn.getPadding(BZ.kExtra);}if(Bp.Circle&&Bp.Circle.length){return Bn.getPadding(BZ.kExtra);}if((Bp.Line&&Bp.Line.length)||(Bp.Area&&Bp.Area.length)){if(Bq===1){return Bn.getPadding(BZ.kExtra);}}return 0;}switch(Br.GetGraphMatrixGraphMajorType()){case T._BUBBLE:case T._SCATTER:case T._PIE:Bo=Bn.getPadding(BZ.kExtra);break;case T._LINE:case T._AREA:if(Bq===1||Bn.mMarkerShape!==f.DssGraphMarkerShapeNone){Bo=Bn.getPadding(BZ.kExtra);}break;}return Bo;}function W(Bv,CA,B6,B5){var Bq=this.mChartContextPtr,Bz=0,Br=0,B0=0,B9=0,B4=0,B7=0,Bx=0,Bw=B6,Bo=B5,B2=this.mTripleId.mObjectId===A7.DssGraphY1Body||this.mTripleId.mObjectId===A7.DssGraphX1Body,Bu=this.mAxisInfo.mAxisDirection===h.AD_X,Bs=this.mOptions.mUseCustomMinMax,Bn=!Bs||(Bs&&!this.mOptions.mUseMinValue),Bp=!Bs||(Bs&&!this.mOptions.mUseMaxValue),B1=Bq.mUniformAxisContext,B8=Bq.GetGraphMatrixContext();if(Bp){Bz=Ah.call(this);B7=B8.GetValueAxisPadding(Bu,true,B2);B7=B7>0?B7+Bz:B7;Br=Q.call(this,true,CA-B7-Bx);B9=B7-Br;Bw=Math.max(Bw,B9);}if(Bn){Bz=Ah.call(this);Bx=B8.GetValueAxisPadding(Bu,false,B2);Bx=Bx>0?Bx+Bz:Bx;B0=Q.call(this,false,CA-B7-Bx);B4=Bx-B0;Bo=Math.max(Bo,B4);}var By=0,Bt=Bu?B1.mDataAreaRightMargin:B1.mDataAreaTopMargin,B3=Bu?B1.mDataAreaLeftMargin:B1.mDataAreaBottomMargin;if(!Bv){By=Bw;if(Bt>=0&&Bt<By){Bw=By-Bt;}else{Bw=0;}By=Bo;if(B3>=0&&B3<By){Bo=By-B3;}else{Bo=0;}}return{HighPadding:Bw,LowPadding:Bo};}function G(Bq,Bp,Bt,Bo){var Bn=Bt,Bs=Bp,Br=(this.mAxisInfo.mAxisDirection===h.AD_X)?Bo.width:Bo.height;if(Bn<0){Bn=0;}if(Bs<0){Bs=0;}if(Br<=0||Br<Bn+Bs){return ;}Br-=Bn+Bs;this.mLowTrim=Bn;this.mHighTrim=Bs;if(!Bq){this.mIsTrimmedWithPadding=true;}if(this.mAxisInfo.mAxisDirection===h.AD_X){Bo.x+=Bn;Bo.width=Br;}if(this.mAxisInfo.mAxisDirection===h.AD_Y){Bo.y+=Bs;Bo.height=Br;}}function n(){if(this.mChartContextPtr.mIsGraphMatrix&&this.mOptions.mUseCustomMinMax){return AB;}return 32757;}function AU(Bs,Bu){var Bt=this.mChartContextPtr,Bn=0,Bq=Bs-1;if(!Bt.mIsGraphMatrix){return -1;}if(this.mIsPercent&&!this.mOptions.mUseCustomMinMax){if(Bu&&this.mMaxTick===1){return Bq;}if(this.mMinTick===-1){return Bn;}}var Bp,Br=Bt.GetGraphMatrixContext().getPadding(BZ.kEndLabelToChart),Bo=this.mGraphObjectList;if(Bu){while(Bq>=0){Bp=Bo[Bq];if(!Bp.mIsShown){Bq--;continue;}if(Ak.call(this,Bp,Br)){return Bq;}Bp.mIsShown=false;Bq--;}}else{while(Bn<=Bq){Bp=Bo[Bn];if(!Bp.mIsShown){Bn++;continue;}if(Ak.call(this,Bp,Br)){return Bn;}Bp.mIsShown=false;Bn++;}}return -1;}function BB(B8,Bt,Bo,Bs,Bp){var B1=true,B5=this.mChartContextPtr.mIsGraphMatrix,B7=B5&&this.mIsPercent,Bu=1,B3=this.mLabelSpan,Bq=this.mOptions,Br=this.mGraphObjectList,By=Br[Bs],Bv=By;while(B1){B1=false;var B4=B7?Bs-Bu:Bs+Bu,B6=B7?(B4>=Bt):(B4<Bo);while(B6){var B2=Br[B4];if(B2.HasOverlapForSameRotation(Bv,B3,Bp)){B1=true;Bv=By;++Bu;break;}else{Bv=B2;}B4+=B7?-Bu:Bu;B6=B7?(B4>=Bt):(B4<Bo);}}var Bz=this.mIsPercent?(Bs-Bt)/Bu:(Bo-Bs)/Bu;Bz=Math.floor(Bz);if(Bz<3){return Bu;}var B0,Bn,Bw=AU.call(this,Bo,false),Bx=AU.call(this,Bo,true);if(Bw===-1||Bx===-1){return Bu;}if(this.mIsPercent){if(Bw<=Bs-Bz*Bu){return Bu;}if(Bw===0&&Bq.mUseMinValue&&Bq.mShowMinLabel&&this.mMinTick!==-1){Bw++;}B0=(Bs-Bw)/Bu;Bn=(Bs-B0*Bu)-Bw;Bu+=Bn/B0;}else{if(Bx>=Bs+Bz*Bu){return Bu;}B0=(Bx-Bs)/Bu;Bn=Bx-(Bs+B0*Bu);Bu+=Math.floor(Bn/B0);}return Bu;}function B(Bx,Bp,Br,Bo,Bw){var Bt,Bn=this.mChartContextPtr,Bu=Bn.mIsGraphMatrix,By=Bn.mIsTimeSeriesChart;if(this.mOptions.mShowMaxLabel){if((!Bu&&!By)||(Bu&&this.mIsPercent)){var Bq=((Bp-1-Br)%Bo);if(Bq!==0){Bt=this.mGraphObjectList[Bp-1];Bt.mIsShown=true;var Bs=Bp-1-Bq,Bv=this.mGraphObjectList[Bs];if(Bt.HasOverlapForSameRotation(Bv,this.mLabelSpan,Bw)&&(Bs>Bx||!this.mOptions.mShowMinLabel)){Bv.mIsShown=false;}}}else{if(Bu&&this.mOptions.mUseMaxValue&&Bp-Bx>2){Bt=this.mGraphObjectList[Bp-1];Bt.mIsShown=false;}}}}function AG(Bp){var Bn,Bo=this.mChartContextPtr.mIsGraphMatrix;if(this.mOptions.mShowMinLabel){if(Bo){if(this.mIsPercent&&this.mMinTick===-1){Bn=this.mGraphObjectList[Bp];Bn.mIsShown=true;}else{if(this.mIsPercent&&this.mOptions.mUseMinValue){Bn=this.mGraphObjectList[Bp];Bn.mIsShown=false;}}}}}function BH(Bv,Bo,Bs,Bp,Bq,Bx,Bw){var Bt=Bo,Br=Bq?1:-1,Bn=0,Bu=Bq?(Bp?Bt-Bs<=0:Bt-Bs<0):(Bp?Bt-Bs>=0:Bt-Bs>0);while(Bu){if(Bq){Bn=Bt-Bx;}else{Bn=Bx-Bt;}if(Bn%Bv!==0){this.mGraphObjectList[Bt].mIsShown=false;}else{if(Bw&&Bw(Bt,Bv,Bo,Bs)){this.mGraphObjectList[Bt].mIsShown=false;}}Bt+=Br;Bu=Bq?(Bp?Bt-Bs<=0:Bt-Bs<0):(Bp?Bt-Bs>=0:Bt-Bs>0);}}function x(Bo,Bp,Bv,Bq,Bn){var Bt=Bn,Bu=function(By,Bx,B0,Bz){return By===Bz;},Bw=function(By,Bx,B0,Bz){return By<Bx+Bz;};if(this.mChartContextPtr.mIsGraphMatrix&&this.mIsPercent){if(this.mMinTick===-1){if(this.mMaxTick===0){BH.call(this,Bt,Bp,Bq,true,true,0,Bu);}else{var Bs=(Bq-Bp)/Bn,Br=(Bq-Bp)/Bs;BH.call(this,Br,Bq-1,Bp,false,false,Bq,Bw);Bt=Br;}}else{BH.call(this,Bt,Bq-1,Bp,true,false,Bq);}}else{BH.call(this,Bt,Bq+1,Bv,false,true,Bq);}return Bt;}function k(Bw,Bt,Bp){if(Bt>this.mMaxTick||Bt<this.mMinTick){return ;}var Bu={},Bv={},Bs,Bx=false,Bn=[];Bs=AY.call(this,Bt);Bu.x=Bs.LowEnd.x;Bu.y=Bs.LowEnd.y;Bv.x=Bs.HighEnd.x;Bv.y=Bs.HighEnd.y;var Bo=this.mChartContextPtr;if(Bo.mIsGraphMatrix){if(this.IsVerticalAxis()){Bx=Bu.y===Bo.mGraphHeight||Bu.y===0;}else{Bx=Bu.x===Bo.mGraphWidth||Bu.x===0;}}if(Bx){return ;}if(Bo.mIsGraphMatrix){if(this.IsVerticalAxis()){Bu.x=Math.min(Bu.x,0);Bv.x=Math.max(Bv.x,Bo.mGraphWidth);}else{Bv.y=Math.min(Bv.y,0);Bu.y=Math.max(Bu.y,Bo.mGraphHeight);}}if(this.mUseDepth){if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){Bu.swapPoints(Bv);}Bn.push(Bv.Shifted(this.mDepthOffset));}Bn.push(Bv);Bn.push(Bu);var Bq=new Bd.TripleId({ObjectId:Bp,SeriesId:0,GroupId:0}),Br;if(this.mTripleId.mSeriesId>0){Br=this.mpManager.GetGraphObject(Bq,false);}if(!Br){Br=new Bd.GraphCollectionObject({TripleId:Bq,GraphObjectManager:this,CollectionType:t.CT_LINE});this.mpManager.AddToMap(Br);}var By=new Bd.PolyLineObject({TripleId:Bq,GraphObjectManager:this,PolyLine:Bn,GraphCollectionObject:Br});Br.AddGraphObject(By);Bw.push(By);}function AQ(){this.mTicks.splice(0,this.mTicks.length);var Bn=AD.computeTicksForAxis(this);this.mMaxTick=Bn.mMaxTick;this.mMinTick=Bn.mMinTick;this.mTicks=Bn.mTicks;this.mStep=Bn.mStep;}function BT(Br){var Bq,Bn,Bp,Bo;Bq=0;Bn=this.mTicks.length+(this.mOptions.mShowMinLabel?1:0)+(this.mOptions.mShowMaxLabel?1:0);for(Bp=0;Bp<Bn;++Bp){Bo=this.mGraphObjectList[Bp+this.mLabelStartIndex];Bo.GetBoundingRectEx(Bm);if(Br){Bq=(Bq<Bm.width)?Bm.width:Bq;}else{Bq=(Bq<Bm.height)?Bm.height:Bq;}}return Bq;}function Ac(Bt,Br,Bv){var Bo,Bn,Bu,Bs,Bq=true,Bp=this.mLabelArea;Bo=this.mGraphObjectList[Bt];if(!!Bo===false){return ;}if(this.mUseDepth){Bn=new Bd.Point2D();this.GetLabelOffset(Br,Bn);Bu=Bn.x;Bs=Bn.y;}else{Bu=Bs=0;}if(R===null){R=new Bd.Point2D();}else{R.Reset(0,0);}if(F===null){F=new Bd.Point2D();}else{F.Reset(1,0);}switch(Br){case U.ALL_BOTTOM:case U.ALL_BOTTOM_TOP:R.x=this.ValueToPosition(Bv)+Bu;R.y=Bp.y+Bp.height;F.x=0;F.y=1;break;case U.ALL_TOP:R.x=this.ValueToPosition(Bv)+Bu;R.y=Bp.y;F.x=0;F.y=-1;break;case U.ALL_LEFT:case U.ALL_LEFT_RIGHT:R.x=Bp.x;R.y=this.ValueToPosition(Bv)+Bs;F.x=-1;F.y=0;break;case U.ALL_RIGHT:R.x=Bp.x+Bp.width;R.y=this.ValueToPosition(Bv)+Bs;F.x=1;F.y=0;break;default:Bq=false;break;}if(Bq){this.MoveLabel(Bo,R,F);}}function Bf(){var Bs,Bv=[],Bo,Bw,Bq,Br;this.GetTicks(Bv);if(Bv.length===0){return ;}Bo=new Bd.Rect2D({Rect2D:this.mLabelArea});if(this.mIsStagger){Bq=BT.call(this,this.IsVerticalAxis());if(this.IsVerticalAxis()){Bo.x-=Bq;Bo.width+=Bq*2;}else{Bo.x-=Bq;Bo.height+=Bq*2;}}else{var Bp,Bn,Bu=3,Bx=this.mGraphObjectList,Bt=Bx.length;if(this.hasLabelCreated){Bn=this.IsVerticalAxis()?this.mLabelArea.height:this.mLabelArea.width;Bn-=this.mChartContextPtr.GetGraphMatrixContext().getPadding(BZ.kEndLabelToChart)+4;Bp=Bn>Bu;if(Bp===false){for(Bs=0;Bs<Bt;Bs++){Bx[Bs].mIsShown=false;}return ;}}}Bw=new Bd.Rect2D({Rect2D:this.mLabelArea});Br=Bv.length;for(Bs=0;Bs<Br;++Bs){this.mLabelArea=(Bs&1)===0?Bw:Bo;Ac.call(this,Bs+this.mLabelStartIndex,this.mAxisInfo.mAxisLabelsLocation,Bv[Bs]);}this.HideOverlappedLabels(this.mLabelStartIndex,this.mLabelStartIndex+Bv.length);if(this.HasLabelsOnBothSides()){for(Bs=0;Bs<Br;++Bs){this.mLabelArea=(Bs&1)===0?Bw:Bo;Ac.call(this,Bs+Br+this.mLabelStartIndex,this.IsVerticalAxis()?U.ALL_RIGHT:U.ALL_TOP,Bv[Bs]);}this.HideOverlappedLabels(this.mLabelStartIndex+Br,this.mLabelStartIndex+2*Br);}Bk.call(this);}function BN(Bo,Bu){var Bw,Bn=this.mChartContextPtr,Bs=Bn.mIsGraphMatrix,Bt=Bo+(S.call(this)||Bs?1:0),Bp=false,Bx=this.mLabelList,Br=Bx.length,Bv=Bn.GetGraphMatrixContext().getPadding(BZ.kLabelToChart),Bq;for(Bq=Bt;Bq<Br;Bq++){Bw=Bx[Bq];if(Ak.call(this,Bw,Bv)){Bp=true;break;}}if(!Bs){return{Start:Bt,PaddingPossible:Bp};}if(this.mIsPercent){return{Start:Bu-1,PaddingPossible:Bp};}if(Bp){return{Start:Bq,PaddingPossible:Bp};}return{Start:Bt,PaddingPossible:Bp};}function A0(){var Bu=0,Bt=0,Bv,Bn=this.mChartContextPtr,Br=Bn.GetGraphMatrixContext(),Bp=this.mOptions,Bo=this.mAxisInfo,Bs=this.mDeviceDataArea,Bq;if(this.mLabelStartIndex>=this.mGraphObjectList.length){return{LowMargin:Bu,HighMargin:Bt};}if(Bp.mUseCustomMinMax){return{LowMargin:Bu,HighMargin:Bt};}if(this.mUseDepth){this.ReserveDepthAxisLine(Bs,false,this.mTripleId.mObjectId!==A7.DssGraphX1Body);}O.Reset(0,0,0,0);Bv=this.mLabelList[this.mLabelStartIndex];Bv.GetBoundingRectEx(O);Bq=this.ValueToPosition(Bv.mNumber);if(Bo.mAxisDrawInReverse){Bt=this.IsVerticalAxis()?O.height/2-(Bq-Bs.y):O.width/2-(Bs.x+Bs.width-Bq);Bt=(Bt<0)?0:Bt;}else{if(Bn.mIsGraphMatrix){if(this.mIsPercent&&this.mMinTick===-1){Bu=this.IsVerticalAxis()?O.height/2-(Bs.y+Bs.height-Bq):O.width/2-(Bq-Bs.x);Bu+=Br.getPadding(BZ.kLabelToChart);}else{Bu=0;}Bu=Math.max(Bu,0);}else{Bu=this.IsVerticalAxis()?O.height/2-(Bs.y+Bs.height-Bq):O.width/2-(Bq-Bs.x);Bu=(Bu<0)?0:Bu;}}O.Reset(0,0,0,0);Bv=this.mLabelList[this.mLabelList.length-1];Bv.GetBoundingRectEx(O);Bq=this.ValueToPosition(Bv.mNumber);if(!Bo.mAxisDrawInReverse){Bt=this.IsVerticalAxis()?O.height/2-(Bq-Bs.y):O.width/2-(Bs.x+Bs.width-Bq);if(Bn.mIsGraphMatrix){if(this.mIsPercent&&this.mMaxTick===1){Bt+=Br.getPadding(BZ.kLabelToChart);}else{Bt=0;}}Bt=(Bt<0)?0:Bt;}else{Bu=this.IsVerticalAxis()?O.height/2-(Bs.y+Bs.height-Bq):O.width/2-(Bq-Bs.x);Bu=(Bu<0)?0:Bu;}if(!this.mUseDepth){return{LowMargin:Bu,HighMargin:Bt};}var Bw=this.getDepthMargin(0,0);Bu=(Bu<Bw.lowMargin)?0:Bu-Bw.lowMargin;Bt=(Bt<Bw.highMargin)?0:Bt-Bw.highMargin;return{LowMargin:Bu,HighMargin:Bt};}function Ak(Bo,Bq){var Bp=this.mChartContextPtr,Bn=Bo.GetBoundingRect(true);if(this.IsVerticalAxis()){return(Bn.y>=Bq&&Bn.y+Bn.height+Bq<=Bp.mGraphHeight);}return(Bn.x>=Bq&&Bn.x+Bn.width+Bq<=Bp.mGraphWidth);}function d(Bq){var Bp=this.mChartContextPtr;if(Bq.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Bq.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Bq.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<AH){var Bo=Bp.mIsGraphMatrix;if(this.mMinimum<-AH||this.mMinimum>AH){var Bn=Math.abs(this.mMinimum)*0.5;if(Bo===false){this.mMaximum=this.mMaximum+Bn;this.mMinimum=this.mMinimum-Bn;}else{if(this.mMaximum>0){this.mMinimum=0;}else{this.mMaximum=0;}}}else{if(Bo===false||Bo&&this.mMinimum!==this.mMaximum){this.mMinimum=-6;this.mMaximum=6;}}}}mstrmojo.chart.ValueAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.ValueAxis",mLargerGridInterval:false,mIsPercent:false,mMinimum:-1,mMaximum:-1,mMaxTick:-1,mMinTick:-1,mStep:-1,mLabelStartIndex:0,mTicks:null,mLabelSpan:0,mIsStagger:false,mNumberFormat:null,mLabelArea:null,mGraphMajorType:b.GMT_CATEGORY,mLabelObjectId:null,mIsMaxZoom:false,mPrimaryMetrics:-1,mHighTicksToLabel:null,mLowTicksToLabel:null,mIsTrimmedWithPadding:false,mCondenseLabels:null,init:function Bg(Bs){Bs.AxisLabelsLocation=U.ALL_LEFT;this._super(Bs);this.mOptions={mUseLogarithmicScale:false,mAlwaysIncludeZero:true,mDrawFromZero:true,mUseMinValue:false,mUseMaxValue:false,mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mDrawSecondCustomLine:false,mUseSmartScaleBreak:false,mOffScaleType:Ar.DssGraphOffScaleHide,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mAxisSecondCustomValue:0,mUseCustomMinMax:false};var Bw,Bo=this.mChartContextPtr,Bu=this.mTripleId.mObjectId;this.mTicks=[];this.mHighTicksToLabel={};this.mLowTicksToLabel={};this.mLargerGridInterval=Bs.LargerGridInterval;this.mIsPercent=Bs.IsPercent;this.mMinimum=Math.min(Bs.Max,Bs.Min);this.mMaximum=Math.max(Bs.Max,Bs.Min);this.mLabelStartIndex=0;this.mIsStagger=false;this.mLabelObjectId=null;this.mIsMaxZoom=false;if(Bs.IsShown!==null){this.mIsShown=Bs.IsShown;}if(Bo.mIsTimeSeriesChart){this.mIsShown=true;}if(Bo.mIsUniformAxisMode){this.mIsShown=!Bo.isUADataAreaOutput();}if(this.mIsUniformAxis||Bo.mIsGraphMatrix===false){this.mNumberFormat=new Bd.ChartAdvFormat({});}else{this.mNumberFormat=Bd.dNF;}if(Bs.PrimaryMetricIndex!==null){this.mPrimaryMetrics=Bs.PrimaryMetricIndex;}else{this.mPrimaryMetrics=[];}if(this.mDeviceDataArea===null){this.mDeviceDataArea=new Bd.Rect2D();this.mDeviceDataArea.width=this.mDeviceDataArea.height=-1;}this.mGraphMajorType=Bo.GetGraphMajorType();if(this.mIsUniformAxis===false){if(this.mGraphMajorType===b.GMT_HISTOGRAM){this.mIsShown=this.mIsShown||(this.mTripleId.mObjectId===A7.DssGraphY1Body);if(this.mTripleId.mObjectId===A7.DssGraphX1Body){this.mMaximum+=(this.mMinimum===this.mMaximum)?10:(this.mMaximum-this.mMinimum)*0.01;}}}var Bp=this.mAxisInfo,Bq=this.mOptions,Br=Bo.GetGraphMatrixContext(),Bv=Br.AxisLayout;if(Bs.AxisDirection===h.AD_Y){if(Bu!==A7.DssGraphY1Body){Bp.mAxisLabelsLocation=U.ALL_RIGHT;}else{if(Bo.IsBubbleChart()||Bo.IsScatterChart()){var Bt=4;if(Bv&Bt){Bp.mAxisLabelsLocation=U.ALL_RIGHT;}}}}else{if(Bs.AxisDirection===h.AD_X){if(Bu===A7.DssGraphY1Body||Bu===A7.DssGraphX1Body){Bp.mAxisLabelsLocation=U.ALL_BOTTOM;if(Bo.IsBubbleChart()||Bo.IsScatterChart()){var Bn=8;if(Bv&Bn){Bp.mAxisLabelsLocation=U.ALL_TOP;}}}else{Bp.mAxisLabelsLocation=U.ALL_TOP;}}}this.hLoadProperties();d.call(this,Bq);AQ.call(this);if(Bq.mUseLogarithmicScale&&Bo.IsStackedChart()){this.mMaximum=Bq.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Bq.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var Bx=AD.computeTicksForLogScale(this);this.mMaxTick=Bx.mMaxTick;this.mMinTick=Bx.mMinTick;this.mTicks=Bx.mTicks;this.mStep=Bx.mStep;}Ay.call(this);},IsBaseAtZero:function Bi(){var Bn=this.mOptions;return Bn.mDrawFromZero&&!Bn.mUseLogarithmicScale;},hLoadProperties:function A9(){var Bo=this.mChartContextPtr,By=Bo.mIsGraphMatrix,Bu=Bo.GetGraphMatrixContext(),Br=this.mOptions,Bw,Bz;AP.tripleId.reset(w,this.mTripleId.mObjectId);if(By){var Bt=Bo.hasBarAreaInComb()||Bo.IsBarChart()||Bo.IsAreaChart()||Bo.IsPercentChart()||(Bo.IsStackedChart()&&this.mMaximum*this.mMinimum<0);Br.mDrawFromZero=Bt;Br.mAlwaysIncludeZero=Bt;if(Bu.isCombinationChart()){var Bv=Af.call(this);Br.mAlwaysIncludeZero=Br.mAlwaysIncludeZero||Bv.Include;Br.mDrawFromZero=Br.mDrawFromZero||Bv.DrawFromZero;}if(this.mLabelSpan===0){this.mLabelSpan=Bu.getPadding(BZ.kBetweenLabels);}var B0=Bo.getUniformAxisInformation(this.mTripleId.mObjectId);if(B0.CustomScale){Br.mUseCustomMinMax=B0.CustomScale;Br.mUseMaxValue=!B0.AutoMax;Br.mUseMinValue=!B0.AutoMin;Br.mAxisMaxValue=B0.Max;Br.mAxisMinValue=B0.Min;}var Bq=this.mDatasetPtr||Bo.mDataset,Bn=Bo.getAxisKeyFromObjectId(this.mTripleId.mObjectId);if(Bn==="Z"){return ;}var Bp=Bq.getAxisOriginFormat(Bn);Br.mDrawCustomLine=Bp.show||false;Br.mAxisCustomValue=Bp.number||0;Br.mUseLogarithmicScale=Bq.isLogScaleAxis(Bn);if(Br.mUseLogarithmicScale){Br.mAlwaysIncludeZero=false;Br.mDrawFromZero=false;}}else{Bw=Bo.GetProperty(A5.DssGraph2ExcludeZero,w);if(Bw){Br.mAlwaysIncludeZero=Bw!==false;}if(Bo.mIsTimeSeriesChart){Br.mShowMinLabel=false;}else{Bw=Bo.GetProperty(A5.DssGraph2ScaleEndMin,w);if(Bw){Br.mShowMinLabel=Bw!==false;}}Bw=Bo.GetProperty(A5.DssGraph2ScaleEndMax,w);if(Bw){Br.mShowMaxLabel=Bw!==false;}if(Bo.mImageUsage===0){Bw=Bo.GetProperty(A5.DssGraph2LogScale,w);if(!this.mIsPercent&&Bw){Br.mUseLogarithmicScale=Bw!==false;}Bw=Bo.GetProperty(A5.DssGraph2ScaleUseMin,w);if(Bw){Br.mUseMinValue=Bw!==false;}Bw=Bo.GetProperty(A5.DssGraph2ScaleUseMax,w);if(Bw){Br.mUseMaxValue=Bw!==false;}Bw=Bo.GetProperty(A6.DssGraphOffScaleType,w);if(Bw){Br.mOffScaleType=Bw;}Bw=Bo.GetProperty(A5.DssGraph2ScaleMin,w);if(Br.mUseMinValue&&Bw){Br.mAxisMinValue=Bw;}Bw=Bo.GetProperty(A5.DssGraph2ScaleMax,w);if(Br.mUseMaxValue&&Bw){Br.mAxisMaxValue=Bw;}if(Br.mUseMinValue&&Br.mUseMaxValue){if(Br.mAxisMinValue>Br.mAxisMaxValue){Bz=Br.mAxisMinValue;Br.mAxisMinValue=Br.mAxisMaxValue;Br.mAxisMaxValue=Bz;}else{if(Br.mAxisMinValue===Br.mAxisMaxValue){Bz=Br.mAxisMinValue===0?10:Math.abs(Br.mAxisMinValue);Br.mAxisMaxValue=Br.mAxisMaxValue+Bz*0.5;Br.mAxisMinValue=Br.mAxisMinValue-Bz*0.5;}}}}}var Bx=false;if(By){Bx=v.call(this);}if(!Bx){Bw=Bo.GetProperty(A5.DssGraphAxisNumberFormat,w);if(Bw){Bo.ParseValueToFormat(Bw,this.mNumberFormat);}}if(this.mGraphMajorType===b.GMT_BUBBLE&&this.mTripleId.mObjectId===A7.DssGraphZBody){return ;}if(Bo.mIsGraphMatrix){var Bs=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=q.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){Bw=Bo.GetProperty(A5.DssGraphStyleMajor,Bs);if(this.mMajorGrid.mShowGridLines&&Bw){this.mMajorGrid.mGridStyle=Bw;}}return ;}if(Bo.mImageUsage===0&&!Bo.mIsGraphMatrix){Bw=Bo.GetProperty(A5.DssGraph2ScaleDirection,w);if(Bw){this.mAxisInfo.mAxisDrawInReverse=Bw!==false;}if(this.mGraphMajorType===b.GMT_GAUGE){return ;}Bw=Bo.GetProperty(A5.DssGraphAxisShowUserLine,w);if(Bw){Br.mDrawCustomLine=Bw!==false;}Bw=Bo.GetProperty(A6.DssGraphAxisShowSecondUserLine,w);if(Bw){Br.mDrawSecondCustomLine=Bw!==false;}Bw=Bo.GetProperty(A5.DssGraphManualMajor,w);if(Bw){this.mMajorGrid.mUseManualGrid=Bw!==false;}Bw=Bo.GetProperty(A5.DssGraphCountMajor,w);if(this.mMajorGrid.mUseManualGrid&&Bw){this.mMajorGrid.mGridInterval=Bw;}if(Az.call(this)){Bw=Bo.GetProperty(A5.DssGraphAxisStagger,w);if(Bw){this.mIsStagger=Bw!==false;}return ;}Bw=Bo.GetProperty(A5.DssGraphAxisUserLineValue,w);if(Br.mDrawCustomLine&&Bw){Br.mAxisCustomValue=Bw;}Bw=Bo.GetProperty(A6.DssGraphAxisSecondUserLineValue,w);if(Br.mDrawSecondCustomLine&&Bw){Br.mAxisSecondCustomValue=Bw;}}},GetStep:function Z(){return this.mStep;},IsLogarithmic:function AZ(){return this.mOptions.mUseLogarithmicScale;},ReserveTitleAndLabels:function Ai(Bt,Br,Bp){var Bn,Bs,Bo;if(!this.mIsShown||!this.mChartContextPtr.mIsValueAxisShown){return ;}if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(Bt);this.mLabelStartIndex=1;}else{this.mLabelStartIndex=0;}if(this.mAxisInfo.mShowAxisLabels){this.mDeviceDataArea.ResetRect(Bt);if(this.mLabelObjectId===null){this.mLabelObjectId=Bd.gAxisObjects[this.getIndex()].mLabelId;}if(J.call(this)){this.fakeMaxLabelLength=this.maxLabelLength;this.maxLabelLength=-1;this.restoreLabels(true);AJ.call(this);}else{this.restoreLabels(true);this.InitObjectSet(this.mLabelObjectId,AM.GOT_AXIS_LABEL);}if(e.call(this)===false){return ;}this.GenerateTickLabels();if(Br<1000){if(this.mUseDepth&&this.mTripleId.mObjectId===A7.DssGraphX1Body){var Bq=this.TrimMarginsForDepthAxis(Br,Bp);Br=Bq.LowMargin;Bp=Bq.HighMargin;}Bo=A0.call(this);Bn=Bo.LowMargin;Bs=Bo.HighMargin;Bn=Bn>Br+this.mLowTrim?Bn-Br-this.mLowTrim:0;Bs=Bs>Bp+this.mHighTrim?Bs-Bp-this.mHighTrim:0;if(this.IsVerticalAxis()){Bt.y+=Bs;Bt.height-=Bs+Bn;}else{Bt.x+=Bn;Bt.width-=Bn+Bs;}if(this.mIsUniformAxis){if(Bn>0){this.mLowTrim+=Bn;}if(Bs>0){this.mHighTrim+=Bs;}}}this.hReserveLabelOrTickArea(Bt,true,false);}},CreateAxisLine:function BQ(){if(this.mChartContextPtr.mIsValueAxisShown){}else{return ;}if(!this.mIsShown&&!this.mUseDepth){return ;}if(g.call(this)){this._super();}},GenerateTickLabels:function Al(){if(this.hasLabelCreated){return ;}this.mLabelList.splice(0,this.mLabelList.length);var Bp=this.mChartContextPtr.mIsGraphMatrix;Bl.call(this);if(Bp){Be.call(this,true,0);}var Bo,Bn=this.mpAxisLabelSet.GetCollectionSize();if(this.mAxisInfo.mAxisLabelsLocation===U.ALL_LEFT_RIGHT||this.mAxisInfo.mAxisLabelsLocation===U.ALL_BOTTOM_TOP){Bl.call(this);if(Bp){Be.call(this,false,Bn);}}Bn=this.mpAxisLabelSet.GetCollectionSize();for(Bo=0;Bo<Bn;Bo++){this.mLabelList.push(this.mpAxisLabelSet.GetObjectByIndex(Bo));}this.hasLabelCreated=true;},GetTicks:function A4(Bo){if(this.mOptions.mShowMinLabel){Bo.push(this.mMinTick);}var Bn;for(Bn=0;Bn<this.mTicks.length;++Bn){Bo.push(this.mTicks[Bn]);}if(this.mOptions.mShowMaxLabel){Bo.push(this.mMaxTick);}},hReserveLabelOrTickArea:function Aa(Bs,Bt,Bo,Bu){var Bn=this.mAxisInfo.mAxisLabelsLocation,Bq,Bp;if(Bt){Bp=Bu!==undefined?Bu:BT.call(this,this.IsVerticalAxis());var Br=this.mChartContextPtr.mpGraphMatrixContext.getPadding(BZ.kLabelToChart);Bq=(Bp*(this.mIsStagger?2:1)+Bd.Axis.gLabelMargin)+Br;}else{Bq=this.GetOuterTickLength();}if(Bo){Bq=-Bq;}if(this.IsVerticalAxis()){if(Bn===U.ALL_LEFT||Bn===U.ALL_LEFT_RIGHT){Bs.x+=Bq;Bs.width-=Bq;}if(Bn===U.ALL_RIGHT||Bn===U.ALL_LEFT_RIGHT){Bs.width-=Bq;}}else{if(Bn===U.ALL_BOTTOM||Bn===U.ALL_BOTTOM_TOP){Bs.height-=Bq;}if(Bn===U.ALL_TOP||Bn===U.ALL_BOTTOM_TOP){Bs.y+=Bq;Bs.height-=Bq;}}},ValueToPosition:function l(Bo,Bn){if(Bn===undefined){if(this.mOptions.mOffScaleType!==Ar.DssGraphOffScaleHide){Bn=false;}else{Bn=true;}}if(Bn){Bo=(Bo>this.mMaxTick)?this.mMaxTick:Bo;Bo=(Bo<this.mMinTick)?this.mMinTick:Bo;}return Math.floor(this.ValueToFloatPosition(Bo)+0.5);},ValueToPosition2:function AS(Bs,Bp,Br){var Bo=this.mMinTick;var Bn=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bs=Bs<=0?-1:K.call(this,Bs);Bo=K.call(this,Bo);Bn=K.call(this,Bn);}var Bq=this.mAxisInfo.mAxisDrawInReverse?(Bn-Bs):(Bs-Bo);return Bp+((Br-Bp)*Bq/(Bn-Bo));},ValueToFloatPosition:function Aw(Bv){var Bw=0,Bs=this.mMinTick,Bp=this.mMaxTick,Br=this.mOptions,Bu=this.mDeviceDataArea,Bq=this.mAxisInfo,Bt;if(Br.mUseLogarithmicScale){Bv=Bv<=0?-1:K.call(this,Bv);Bs=K.call(this,Bs);Bp=K.call(this,Bp);}Bt=Bq.mAxisDrawInReverse?(Bv-Bs):(Bp-Bv);if(Bp===Bs){return Bw;}if(Bq.mAxisDirection===h.AD_Y){Bw=Bu.y+Bt/(Bp-Bs)*Bu.height;}else{Bw=Bu.x+Bu.width-Bt/(Bp-Bs)*Bu.width;}var Bn=n.call(this),Bo=-Bn;if(Bw>Bn){Bw=Bn;this.mIsMaxZoom=true;}else{if(Bw<Bo){Bw=Bo;this.mIsMaxZoom=true;}}return Bw;},ValueToPositionCheckLogScale:function p(Bs,Bp,Br){var Bq,Bo,Bn;Bq=this.mMinTick;Bo=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bs=Bs<=0?-1:K.call(this,Bs);Bq=K.call(this,Bq);Bo=K.call(this,Bo);}Bn=this.mAxisInfo.mAxisDrawInReverse?(Bo-Bs):(Bs-Bq);return Bp+((Br-Bp)*Bn/(Bo-Bq));},ValueToPositionCheckValue:function BW(Bu,Br,Bt){var Bs,Bo,Bq,Bn,Bp;Bs=0;Bo=0;Bq=AC.call(this,Bu,Bs,Bo);Bu=Bq.Value;Bs=Bq.Min;Bo=Bq.Max;if(!Bq.Flag){return{Flag:false};}Bn=this.mAxisInfo.mAxisDrawInReverse?(Bo-Bu):(Bu-Bs);Bp=Br+Math.floor((Bt-Br)*Bn/(Bo-Bs));return{Flag:true,Position:Bp};},GetValueForUnit:function Bh(){var Bq=this.mAxisInfo,Bo,Bt=this.mDeviceDataArea,Bs=(this.mMinTick+this.mMaxTick)/2,Br=0,Bn=0,Bp=AC.call(this,Bs,Br,Bn);Br=Bp.Min;Bn=Bp.Max;if(!this.mOptions.mUseLogarithmicScale&&Bp.Flag){if(Bq.mAxisDirection===h.AD_Y){Bo=(Bn-Br)/Bt.height;}else{Bo=(Bn-Br)/Bt.width;}}return Bo;},GetOuterTickLength:function BD(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength/2;}return 0;},AdjustDeviceDataArea:function Ad(Bo,Bn){if(this.mIsShown&&this.mAxisInfo.mShowAxisLabels){this.hReserveLabelOrTickArea(Bo,false,Bn);}if(this.mIsShown||this.mUseDepth){this.ReserveDepthAxisLine(Bo,Bn);}},UpdateTitleAndLabelArea:function AR(Bo){var Bp=this.mChartContextPtr,Bn=this.mAxisInfo;if(!this.mIsShown||!Bp.mIsValueAxisShown){return ;}if(this.mLabelArea===null||this.mLabelArea===undefined){this.mLabelArea=new Bd.Rect2D({Rect2D:Bo});}else{this.mLabelArea.ResetRect(Bo);}if(Bn.mShowAxisLabels&&X.call(this)){Bf.call(this);this.hReserveLabelOrTickArea(Bo,true,true);}if(Bn.mShowAxisTitle){this.UpdateTitleLocation(Bo);this.ReserveTitle(Bo,true);}},HideCustomPercentOverlappedLabels:function BS(){BV.visPrint("To be impl with percetn in custom scale");},HideOverlappedLabels:function Ao(Bu,Bp){var By,Bv,Bq,B8,Br=this.mChartContextPtr,B6=Br.mIsGraphMatrix,Bo=this.IsVerticalAxis()?r.REC_EXP_VERTICAL:r.REC_EXP_HORIZONTAL;if(Bp-Bu<2){return ;}var B9=this.mIsPercent&&B6,CA=BN.call(this,Bu,Bp),Bt=CA.Start,B2=this.mLabelList,Bs=this.mGraphObjectList,B4=CA.PaddingPossible;By=Bs[Bt];Bv=By;if(B4===false){var B5,B7=B2.length;for(B5=0;B5<B7;B5++){if(B2[B5]){B2[B5].mIsShown=false;}}return ;}if(S.call(this)||(!this.mIsPercent&&B6)){Bv=Bs[Bu];var B0=B6?Bv:By;if(Bv.HasOverlapForSameRotation(By,this.mLabelSpan,Bo)){B0.mIsShown=false;}}var Bw,Bx=this.mOptions,B1=this.mGraphMajorType,B3=this.mTripleId.mObjectId,Bn=Bp;if(Bn-Bu>2&&!B9){if(Bx.mUseMaxValue&&Bx.mShowMaxLabel){Bn--;}}Bw=BB.call(this,B9,Bu,Bn,Bt,Bo);Bw=x.call(this,B9,Bu,Bn,Bt,Bw);B.call(this,Bu,Bp,Bt,Bw,Bo);AG.call(this,Bu);if(By.mIsShown){var Bz=Br.GetGraphMatrixContext().getPadding(BZ.kEndLabelToChart);By.mIsShown=Ak.call(this,By,Bz);}if((B1===b.GMT_POLAR&&B3===A7.DssGraphX1Body)||(B1===b.GMT_RADAR&&B3===A7.DssGraphO1Body)){Bq=((Bp-1-Bt)%Bw);B8=Bs[Bp-1-Bq];if(B8.HasOverlapForSameRotation(Bv)){B8.mIsShown=false;}}if(B4){AU.call(this,Bp,true);AU.call(this,Bp,false);}this.mLabelInterval=Bw;},ValueToBubbleSize:function D(Bn,Bt){var Br,Bv,Bq,Bs,Bu,Bp,Bo=this.mChartContextPtr;Bt=(Bt>this.mMaxTick)?this.mMaxTick:Bt;Bt=(Bt<this.mMinTick)?this.mMinTick:Bt;Br=this.mMinTick;Bv=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bt=Bt<=0?-1:(K.call(this,Bt));Br=K.call(this,Br);Bv=K.call(this,Bv);}Bq=Math.min(Bo.mGraphHeight,Bo.mGraphWidth)*Bn;Bs=Bq/5000;Bu=Bq/1000;Bp=Bs+((Bt-Br)*(Bu-Bs)/(Bv-Br));return Math.ceil(Bp);},GetBottomPosition:function AV(Bn){if(this.mChartContextPtr.mIsGraphMatrix){Bn=Bn||false;if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(this.GetBaseValue(Bn),false);}}return this.ValueToPosition(this.mMinTick);},GetAxisOriginValue:function Am(){var Bn=this.mOptions;if(Bn.mDrawCustomLine){return Bn.mAxisCustomValue;}return null;},GetBasePosition:function Au(Bo,Bn){Bo=Bo||false;if(Bn===null||Bn===undefined){Bn=this.GetBaseValue(Bo);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(Bn,false);}}return this.ValueToPosition(Bn);},GetMinTick:function Aq(){return this.mMinTick;},GetMaxTick:function BE(){return this.mMaxTick;},GetBaseValue:function At(Bo){Bo=Bo||false;var Bp=this.mChartContextPtr,Bn=this.mOptions;if(Bp.mIsGraphMatrix){if(Bo&&Bn.mDrawCustomLine){if(AP.isValidNumber(Bn.mAxisCustomValue)){return Bn.mAxisCustomValue;}}if(Bn.mUseCustomMinMax&&Bn.mDrawFromZero){return 0;}}if(this.mMaxTick<0){return this.mMaxTick;}if(!Bn.mDrawFromZero||this.mMinTick>0||this.mMaxTick<0){return this.mMinTick;}return 0;},GetPositionByValue:function An(Bo){var Bn=this.GetFloatPositionByValue(Bo);if(Bn===null){return Bn;}Bn=Math.floor(Bn+0.5);return Bn;},GetFloatPositionByValue:function BM(Bu){var Bo=0,Bt=0,Bq,Bv,Bs;Bs=AC.call(this,Bu,Bo,Bt);Bu=Bs.Value;Bo=Bs.Min;Bt=Bs.Max;if(!Bs.Flag){return null;}var Bp=this.mAxisInfo,Br=this.mDeviceDataArea;Bq=Bp.mAxisDrawInReverse?(Bu-Bo):(Bt-Bu);Bv=0;if(Bt===Bo){return Bv;}if(Bp.mAxisDirection===h.AD_Y){Bv=Br.y+Bq*Br.height/(Bt-Bo);}else{Bv=Br.x+Br.width-Bq*Br.width/(Bt-Bo);}var Bn=n.call(this);if(Bv>Bn){Bv=Bn;this.mIsMaxZoom=true;}if(Bv<-Bn){Bv=-Bn;this.mIsMaxZoom=true;}return Bv;},GenerateCustomLine:function c(Bn,Bq){var Bs=this.mOptions,Bp=this.mDeviceDataArea;if(this.mChartContextPtr.mIsGraphMatrix){if(this.mPrimaryMetrics.length===0){return ;}}if(!Bs.mDrawCustomLine&&!Bs.mDrawSecondCustomLine){return ;}var Bo,Br;if(this.mChartContextPtr.mIsGraphMatrix){Br=Bd.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bo=Bp;}else{Br=Bd.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bo=new Bd.Rect2D({Rect2D:this.mDeviceDataArea});Bp.ResetRect(Bn);}if(Bs.mDrawCustomLine){k.call(this,Bq,Bs.mAxisCustomValue,Br);}if(this.mTripleId.mObjectId===A7.DssGraphY1Body&&Bs.mDrawSecondCustomLine){k.call(this,Bq,Bs.mAxisSecondCustomValue,A7.DssGraphY1SecondUserLine);}Bp.ResetRect(Bo);},GenerateMapAndList:function A3(){},generateGridsByArea:function AO(Bp){if(!this.mIsShown){return ;}var Bo=this.mMajorGrid,Bn=this.mMinorGrid;if(Bp){if(Bo.mShowGridLines&&Bo.mGridStyle!==q.DssGraphGridNone){BI.call(this);}if(Bn.mShowGridLines&&Bn.mGridStyle!==q.DssGraphGridNone){P.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){C.call(this);}}},GetNumberFormat:function A(){return this.mNumberFormat;},GetTrimWithPadding:function Ap(){return this.mIsTrimmedWithPadding;},GetPositionAtTick:function Bb(Bn){var Bo=this.GetFloatPositionByValue(Bn);if(Bo!==null){return Bo;}return 0;},GetMaxMinDataInput:function BL(){return{Max:this.mMaximum,Min:this.mMinimum};},GetMaxMinDataInputPosition:function M(){var Bn=this.GetPositionByValue(this.mMinimum),Bo=this.GetPositionByValue(this.mMaximum);return{LowBoundary:Bn,HighBoundary:Bo};},postProcessStep:function s(Bn,Bp){var Bo=Bn,Bt=this.mChartContextPtr;switch(this.mGraphMajorType){case b.GMT_HISTOGRAM:case b.GMT_POLAR:case b.GMT_SCATTER:case b.GMT_BUBBLE:case b.GMT_3D_SCATTER:case b.GMT_GANTT:break;case b.GMT_GAUGE:break;case b.GMT_CATEGORY:if(!this.IsVerticalAxis()&&!Bt.mIsGraphMatrix){this.mLargerGridInterval=true;}break;default:if(!this.IsVerticalAxis()&&!Bt.mIsGraphMatrix){this.mLargerGridInterval=true;}break;}if(this.mLargerGridInterval){if(Bp<Bo*7){Bo*=2;}else{Bo*=4;}}if(Bt.mIsGraphMatrix){var Br=this.mChartContextPtr.GetGraphMatrixContext().GetValueAxisZoomScale(this.mTripleId.mObjectId);if(Br>1){Bo/=Br;}if(Math.abs(this.mMaximum)<0.3&&Math.abs(this.mMinimum)<0.3){var Bs=Math.ceil(this.mMaximum/Bo)*Bo,Bq=Math.floor(this.mMinimum/Bo)*Bo;if(Bs<Bq+Bo){Bo/=2;}}}return Bo;},GetLogicalCoord:function z(Bq){var Bo=0,Bs=this.mDeviceDataArea,Bp=this.mMinTick,Bn=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bp=K.call(this,Bp);Bn=K.call(this,Bn);}var Br=this.IsVerticalAxis()?(Bn-Bp)*(Bq-Bs.y)/Bs.height:(Bn-Bp)*(Bs.x+Bs.width-Bq)/Bs.width;Bo=this.mAxisInfo.mAxisDrawInReverse?Bp+Br:Bn-Br;if(this.mOptions.mUseLogarithmicScale){Bo=Math.pow(10,Bo);}return Bo;},GetSlopeFactor:function BO(Bo){var Bn=this.IsVerticalAxis()?-this.mDeviceDataArea.height:this.mDeviceDataArea.width;if(this.mOptions.mUseLogarithmicScale){Bn/=((Math.log(this.mMaxTick)-Math.log(this.mMinTick))*Bo);}else{Bn/=(this.mMaxTick-this.mMinTick);}return this.mAxisInfo.mAxisDrawInReverse?-Bn:Bn;},GetMinMaxLogicalCoord:function A8(){return{Min:this.mMinTick,Max:this.mMaxTick};},GenerateLabelsFor3D:function BF(){},GetGridLinePositionsFor3D:function H(){},OnZooming:function N(){},getStatus:function Y(){var Bp=0,Bq=2,Bo=this.getLabelRotation(),Bn=this.mLabelInterval;if(Bo===BK.Rotate90){return Bq;}if(Bn===1){return Bp;}return Bq;},getCondenseStatus:function j(){return this.mCondenseLabels;},checkCondense:function I(Bn){this.mCondenseLabels=Bn;return this.mCondenseLabels;},isBaseLineQualified:function AN(Bn){Bn=Bn||0;return this.mMaxTick>Bn&&this.mMinTick<Bn;},liftedFromZero:function AE(){return this.mMinTick===0&&this.mLowTrim>0;},getBandings:function Av(){var Bp=0,Bn,Bo=this.mChartContextPtr;if(this.IsVerticalAxis()){Bn=Bo.mGraphHeight;}else{Bn=Bo.mGraphWidth;}return[{Start:Bp,Size:Bn}];},formatAsLabel:function Ag(Bo){var Bp=Bd.gAxisObjects[this.getIndex()].mLabelId,Bn=new Bd.NumberObject({TripleId:Bp,GraphObjectManager:this,Number:Bo,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});return Bn.mText;},getGridLinePosition:function BC(Bv){if(!!(this.mIntegrity&4)===false){return[];}if(Bv===undefined){Bv=true;}var Bo,Bs,By=[];var B2=this.mLabelList,Bw=B2.length;var Br=10,Bp=this.mChartContextPtr,Bt=Bp.mGraphWidth,Bq=Bp.mGraphHeight,B1=this.IsVerticalAxis();for(Bs=0;Bs<Bw;Bs++){if(B2[Bs].mIsShown){Bo=this.ValueToPosition(B2[Bs].mNumber);if(Bo<Br||Bo+Br>(B1?Bq:Bt)){continue;}By.push(Bo);}}if(Bv){return By;}var Bz,B0,Bn=[];Bw=By.length;if(Bw===0){return Bn;}else{var Bx,Bu;for(Bs=1;Bs<Bw;Bs++){Bo=0.5*(By[Bs-1]+By[Bs]);if(Bs===1){Bx=Math.abs(Bo-By[Bs-1]);}else{if(Bs===Bw-1){Bu=Math.abs(Bo-By[Bs-1]);}}Bn.push(Bo);}B0=!B1?Bw-1:0;Bz=By[B0];Bo=BR.call(this,Bz,false,Bx);if(Bo!==null){Bn.push(Bo);}B0=B1?Bw-1:0;Bz=By[B0];Bo=BR.call(this,Bz,true,Bu);if(Bo!==null){Bn.push(Bo);}}return Bn;},TrimDeviceDataArea:function BJ(Bo){var Bp=this.mChartContextPtr,Bn;Bn=Bp.getUniformAxisInformation(this.mTripleId.mObjectId);if(Bn.PerCell){return this.TrimAxisPadding(Bo,false);}this.mLowTrim=Bn.Trims[0];this.mHighTrim=Bn.Trims[1];G.call(this,false,this.mHighTrim,this.mLowTrim,Bo);},refresh:function AI(Bo,Bq){if(Bo==="clipping"){var Bs=this.mChartContextPtr,Br=this.mOptions;if(this.mMaximum!==Bq.max||this.mMinimum!==Bq.min){this.mMaximum=Bq.max;this.mMinimum=Bq.min;Br.mAxisMaxValue=Bq.max;Br.mAxisMinValue=Bq.min;d.call(this,this.mOptions);this.mTicks=[];this.mMaxTick=this.mMinTick=-1;this.mStep=-1;AQ.call(this);if(Br.mUseLogarithmicScale&&Bs.IsStackedChart()){this.mMaximum=Br.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Br.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var Bn=AD.computeTicksForLogScale(this);this.mMaxTick=Bn.mMaxTick;this.mMinTick=Bn.mMinTick;this.mTicks=Bn.mTicks;this.mStep=Bn.mStep;}Ay.call(this);}var Bp={x:0,y:0,width:Bs.mGraphWidth,height:Bs.mGraphHeight};this.TrimAxisPadding(Bp,false);}},TrimAxisPadding:function o(Br,Bq){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Bp,Bn,Bo,Bs,Bt=this.mOptions.mUseCustomMinMax;this.mLowTrim=this.mHighTrim=0;Bp=L.call(this,Bt);Bn=Bp.LowPadding;Bo=Bp.HighPadding;Bs=this.mAxisInfo.mAxisDirection===h.AD_X?Br.width:Br.height;Bs-=(Bo+Bn);Bp=W.call(this,Bq,Bs,Bo,Bn);Bn=Bp.LowPadding;Bo=Bp.HighPadding;G.call(this,Bq,Bo,Bn,Br);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","TrendLineObject","Rect2D","TripleId","TrendLineObject","ChartContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumValueAxis","EnumTrendLineIndex","EnumAnchorPoint","EnumCollectionType","EnumGraphMajorType","EnumFontRotation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var Z=mstrmojo.chart,V=Z.enums,c=V.EnumCollectionType,C=V.EnumGraphMajorType,X=V.EnumValueAxis,J=V.EnumAnchorPoint,d=Z.gNullTripleId,B=Z.gNullObjectId,R=mstrmojo.chart.model,e=R.enums,I=e.EnumDSSGraphType,K=e.EnumDSSGraphMarkerShape,L=e.EnumDSSGraphProperty,a=e.EnumDSSGraphDataTextPosition,M=e.EnumDSSGraphObject;mstrmojo.chart.Plot=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Plot",mDatasetPtr:null,mLegendPtr:null,mSeriesId:null,mDataArea:null,mTrendLines:null,mPostTrendLineObjects:null,mHasSizeBy:false,mHasColorBy:false,mPartialRendering:false,mClippedElementSize:null,shownDataLabels:[],shownRefLabels:[],dataLabelManager:null,axisOriginLabels:[],DPCount:0,seriesDPCount:[],init:function W(h){this._super(h);this.mSeriesId=[];this.mTrendLines=[[],[]];this.mPostTrendLineObjects=[];var j=this.mChartContextPtr,g=j.GetGraphMatrixContext();this.mHasSizeBy=g.mHasSizeBy;this.mHasColorBy=g.mHasColorBy;this.mPartialRendering=j.mPartialRendering;this.mClippedElementSize={};this.shownDataLabels=[];this.shownRefLabels=[];this.dataLabelManager=null;this.axisOriginLabels=[];if(h.Area){this.mDataArea=new Z.Rect2D({Rect2D:h.Area});}this.DPCount=0;this.seriesDPCount=[];},Draw:function T(g){var h=false;if(g&&g.Skip){g.Skip--;h=true;}this._super();if(!h){this.DrawTrendLinesAndEquationsInArea(this.mDataArea,false);this.DrawTrendLinesAndEquationsInArea(this.mDataArea,true);this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function b(){var g=this.mDataArea;this.DrawTrendLinesAndEquationsInArea(g,false);this.DrawTrendLinesAndEquationsInArea(g,true);},OnRectangleSelection:function H(j,h,g){g=g||0;return h;},SetDataArea:function F(g){if(this.mDataArea===null){this.mDataArea=new Z.Rect2D({Rect2D:g});}else{this.mDataArea.ResetRect(g);}},MoveLabel:function Y(o,r,v,j,g,n){var t,l,q,s,k,u,h,p;if(o===null){return ;}t=o.GetBoundingRect();l=t.width/2;q=t.height/2;s=r;k=v;if(j){u=s;s=k;k=u;}p=s;if(n===a.DssGraphDTPositionOutMin||n===a.DssGraphDTPositionInMin){p=k;}h=j?-1:1;switch(n){case a.DssGraphDTPositionCenter:p=s.MiddleTo(k);break;case a.DssGraphDTPositionInMin:case a.DssGraphDTPositionOutMax:if(g){p.y-=q*h;}else{p.x+=l*h;}break;case a.DssGraphDTPositionOutMin:case a.DssGraphDTPositionInMax:if(g){p.y+=q*h;}else{p.x-=l*h;}break;default:break;}o.MoveTo(p.x,p.y,J.CENTER);},AddLegendMarkerToCollection:function G(h,s,k,o,u,r,p){var j=this.mChartContextPtr,t,l,n,g,q;if(this.mLegendPtr===null||s===null){return ;}if(j.mIsGraphMatrix){return ;}k=k||false;u=u||K.DssGraphMarkerShapeRectangle;p=p||false;if(o===undefined){o=true;}if(r===undefined){r=true;}g=j.mGraphType;t=new Z.TripleId({ObjectId:M.DssGraphLegendMarker,SeriesId:h});l=this.mLegendPtr.GetGraphObject(t);if(l){if(k){n=l;s.AddGraphObject(l,false);if(r&&g!==I.DssGraphTypePareto_Percent){t.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(j.GetFormatLine(t,c.CT_LINE),h,p);}t.mObjectId=M.DssGraphRiser;n.SetFormatLine(j.GetFormatLine(t,c.CT_NO_COLLECTION));n.SetFormatFill(j.GetFormatFill(t,c.CT_DEPTH_LINE_OR_LINE_MARKER));n.mIsShown=o;if(o){n.SetMarkerShape(u);}}else{q=j.GetGraphMajorType();s.AddGraphObject(l);if(q===C.GMT_BUBBLE){if(r){t.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(j.GetFormatLine(t,c.CT_LINE),h);}if(o){n=l;n.SetMarkerShape(u);}}if(g===I.DssGraphTypePareto_Percent||q===C.GMT_GAUGE){if(o){n=l;n.SetMarkerShape(u);}}if(q===C.GMT_STOCK){if(r){t.mObjectId=M.DssGraphRiser;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(j.GetFormatLine(t,c.CT_LINE),h,p);}if(o){n=l;n.SetMarkerShape(u);}}}}},CreateTrendLine:function P(r,q,t,j,l,k,g,o,p,h,n,s){},AdjustTrendLineEquation:function N(h,g){},DrawTrendLinesAndEquationsInArea:function U(g,h){var n=this.mChartContextPtr,k=h?this.mTrendLines[1]:this.mTrendLines[0],j;if(k.length===0){return ;}n.saveState();n.DrawRectangle(g,true);n.Clip();for(j=0;j<k.length;++j){k[j].Draw();}n.RestoreState();for(j=0;j<k.length;++j){var l=k[j].mTextPtr;if(l!==null){l.Draw();}}},DrawPostTrendLineObjects:function f(){var j=this.mPostTrendLineObjects,g=j.length,h;for(h=0;h<g;++h){j[h].Draw();}},LoadTrendLineProperties:function D(j,h){var n=this.mChartContextPtr;if(n.mIsGraphMatrix||!!h){return ;}if(n.mIsGraphMatrix){var g=this.mDatasetPtr.GetTrendLinePropertiesBySeries(j);if(g){h.mRegressionType=g.RegressionType||h.mRegressionType;if(g.Order!==null&&g.Order!==undefined){h.mOrder=g.Order;}if(g.Period!==null&&g.Period!==undefined){h.mPeriod=g.Period;}h.mShowCoefficients=g.ShowCoefficients||h.mShowCoefficients;h.mShowEquation=g.ShowEquation||h.mShowEquation;h.mUserSeriesGraphColor=g.UserSeriesGraphColor||h.mUserSeriesGraphColor;}}else{var k,l=new Z.TripleId({ObjectId:M.DssGraphRiser,SeriesId:j});k=n.GetProperty(L.DssGraphSDRegressionType,l);if(k){h.mRegressionType=k;}k=n.GetProperty(L.DssGraphSDPolyFactor,l);if(k){h.mOrder=k;}k=n.GetProperty(L.DssGraphSDMOVAFactor,l);if(k){h.mPeriod=k;}k=n.GetProperty(L.DssGraphShowSDLinrCorr,l);if(k){h.mShowCoefficients=k;}k=n.GetProperty(L.DssGraphShowSDLinrFormula,l);if(k){h.mShowEquation=k;}l.mObjectId=B;k=n.GetProperty(L.DssGraphCurveColorAsSeries,l);if(k){h.mUserSeriesGraphColor=k;}}},LoadValueAxisInfo:function S(k,g){var o=this.mChartContextPtr,j=this.mSeriesId,h,n,l;if(g){if(o.mIsGraphMatrix){l=this.mDatasetPtr.GetValueAxisBySeries(j[k]);}else{h=o.GetProperty(L.DssGraph2DSplitYAutomatic,d);if(h===null||h===undefined){l=(k%2===0)?X.VA_Y1:X.VA_Y2;}else{n=new Z.TripleId({ObjectId:L.DssGraphRiser,SeriesId:j[k]});h=o.GetProperty(L.DssGraph2DSDSplitY,n);if(h){l=h?X.VA_Y2:X.VA_Y1;}}}}else{l=X.VA_Y1;}return l;},GetDataset:function Q(){return this.mDatasetPtr;},SetDataset:function O(g){this.mDatasetPtr=g;},AddSeries:function E(g){this.mSeriesId.push(g);},GetMaxElementOffsetClippedByBoundary:function A(h,j){var g={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},k=this.mChartContextPtr;if(k.IsBarChart()||k.mGraphType===I.DssGraphTypeGridChart){return g;}if(k.IsLineChart()||k.IsAreaChart()){return g;}return g;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Plot","CategoryAxis");var B=mstrmojo.chart;mstrmojo.chart.GridBasePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.GridBasePlot",mHasXAxis:false,mHasYAxis:false,mMarkerShape:0,mXaxis:null,mYaxis:null,mDataArea:null,init:function E(F){this._super(F);this.mMarkerShape=4;this.mHasXAxis=true;this.mHasYAxis=true;this.mDataArea=new B.Rect2D();},AssignSeries:function A(F){},AssignAxis:function D(G,F){if(F){this.mYAxis=G;}else{this.mXAxis=G;}},AssignDataArea:function C(F,G){this.mDataArea.ResetRect(F);if(G){this.mYAxis.SetDeviceDataArea(F);}else{this.mXAxis.SetDeviceDataArea(F);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","NumberObject","Rect2D","TextObject");var A=mstrmojo.chart;mstrmojo.chart.CategoryPlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.CategoryPlot",createRiserLabel:function C(G,F,K,H,E){var L,D=this.realComboChart;if((K===null&&H==="")||E===null){return null;}if(K){L=new A.NumberObject({TripleId:G,GraphObjectManager:this,Number:F,NumberFormat:K,GraphCollectionObject:E,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr,IsFinal:(H==="")});if(L===null){return null;}if(H&&H!==""){L.AddTextBeforeNumber(H);}if(D){L.strokeBBox();}this.AddToMap(L);E.AddGraphObject(L);return L;}var J=new A.Rect2D({x:0,y:0,width:0,height:0}),I=new A.TextObject({TripleId:G,GraphObjectManager:this,rect:J,GraphCollectionObject:E,clientDrag:true});if(I!==null){I.SetText(H);if(D){I.strokeBBox();}this.AddToMap(I);E.AddGraphObject(I);return I;}return null;},ReserveAreaForDataLabels:function B(D){}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","TripleId","Plot","GridMap","LabelInfo","TextObject","StraightLineObject","PolyLineObject","NumberObject","GraphCollectionObject","MarkerObject","DataLabelManager","GMDataLabelInfo","ChartConstants","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumCollectionType","EnumAnchorPoint","EnumImageUsage","EnumFontRotation","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumDSSGraphDataTextShowType","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphDataTextPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresCls("mstrmojo.VisUtility");var Ap=mstrmojo.chart;var Aq=Ap.gModuleMain,Ak=Ap.ChartConstants,AP=mstrmojo.VisUtility,R=Ap.enums,AM=R.EnumCollectionType,Al=R.EnumGraphMajorType,A2=R.EnumAnchorPoint,M=R.EnumFontRotation,Aj=R.EnumGraphMatrixMarkerTypeInChart,d=R.EnumGraphMatrixElementSizeMode,AO=R.EnumImageUsage,s=R.EnumGraphMatrixPiePlotType,n=Ap.common,AD=Ap.gNullTripleId,As=Ap.gNullGroupId,Ah=mstrmojo.chart.model,AT=Ah.enums,A5=AT.EnumDSSGraphProperty,Q=AT.EnumDSSGraphRegressionType,Ag=AT.EnumDSSGraphDataTextPosition,Ae=AT.EnumDSSGraphDataTextShowType,A1=AT.EnumDSSGraphDataTextPosition,A6=AT.EnumDSSGraphObject,Au=AT.EnumDSSExtraGraphProperty,c=AT.EnumShapeType,A9=AT.EnumDSSGraphMarkerShape;var F=-1,A8=0.7,AJ=2,J=3,AB=1,z=2,y=3,w=4,v=5,u=6,b=1,A4=1,O=2,A3=3,L=4;var Af=new Ap.Point2D();function k(BG,BF){var BH;if(BG.cannotFitVertically===true&&BF.cannotFitVertically===false){return 1;}if(BG.cannotFitVertically===false&&BF.cannotFitVertically===true){return -1;}if(BG.cannotFitHorizontally===true&&BF.cannotFitHorizontally===false){return 1;}if(BG.cannotFitHorizontally===false&&BF.cannotFitHorizontally===true){return -1;}BH=BG.overlapRefLabelCount-BF.overlapRefLabelCount;if(BH<0){return -1;}else{if(BH>0){return 1;}else{BH=BG.overlapRefLineCount-BF.overlapRefLineCount;if(BH<0){return -1;}else{if(BH>0){return 1;}else{BH=BG.overlapDataLabelCount-BF.overlapDataLabelCount;if(BH<=0){return -1;}else{return 1;}}}}}}function Av(){var BF={ConnectDataPoint:false,ShowDataLabel:false,MarkerSize:33,MarkerShape:4,ValueAxisIndex:0,SeriesID:0,IsNullData:[],TrendLineOptions:{mRegressionType:Q.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true}};return BF;}function r(BK){var BH,BO=this.labelMatrix.length,BF=this.mDataArea.width,BN=this.mDataArea.height,BL,BG=this.mChartContextPtr,BJ=0.25;if(BG.mIsGraphMatrix){var BI=BG.GetGraphMatrixContext(),BM=BI.mConstants.FixedTickerSize;if(BI.mMarkerShape===A9.DssGraphMarkerShapeGMTick){BN=BM;BF=this.minRadius*BJ;}else{BN=BF=this.minRadius*BJ;}}else{for(BH=0;BH<BO;++BH){BL=this.labelMatrix[BH].Label.GetBoundingRectNoRotation(true);BF=Math.min(BL.width,BF);BN=Math.min(BL.height,BN);if(this.isBubbleChart){BF=Math.min(this.labelMatrix[BH].HostMarker.width,BF);BN=Math.min(this.labelMatrix[BH].HostMarker.height,BN);}}if(!this.isBubbleChart){BF=Math.min(this.labelMatrix[0].HostMarker.width,BF);BN=Math.min(this.labelMatrix[0].HostMarker.height,BN);}if(BF>1){BF=Math.round(BF*BJ);}if(BN>1){BN=Math.round(BN*BJ);}}BK.width=Math.max(BF,1);BK.height=Math.max(BN,1);}function G(BF){return 3;}function AE(BJ,BK){var BH=BK.Size,BF=BK.Position,BG=BH+BF.y<BJ.y||BF.y-BH>BJ.y+BJ.height,BI=BH+BF.x<BJ.x||BF.x-BH>BJ.x+BJ.width;return !BI&&!BG;}function U(BN){var BG=this.mChartContextPtr,BI,BF=5;if(BG.mPartialRendering===false){return false;}if(BG.mIsGraphMatrix){BI=BG.GetGraphMatrixContext();BF=BI.getPadding(Ak.kDataLabel);if(AE.call(this,BG.mRenderingWindow,BN)===false){return true;}}if(this.shapeCanvas===null){var BK=new Ap.Rect2D();r.call(this,BK);this.shapeCanvas=new Ap.GridMap({Rect:this.mDataArea,Unit:BK,MatrixType:1,dataLabelPadding:BF});if(F<0){F=G.call(this,1);}}var BL,BM=this.shapeCanvas;if(BM.veryDense()){return true;}BL=BM.ToInspectedMetric(BN);if(BL.Min>=F-1||((BL.Occupied/BL.Total)>=F-1&&BL.Min>0)){return true;}var BJ=BN.BoundingBox,BH=BN.Position,BO=BN.Size;switch(BN.Shape){case c._CIRCLE:BM.UpdateMatrixCircle(BH,BO,true);break;case c._PIE:BM.UpdateMatrixCircle(BH,BO,true);if(BN.ExclusiveRect){BM.UpdateMatrixCircle(BH,BO*A8,false);}break;case c._TICKER:case c._RECTANGLE:BM.UpdateMatrixRect(BJ,true);break;default:console.alert("Bubble partial rendering: shape not support yet");break;}return false;}function H(BL,BM,BF){var BG=this.mChartContextPtr,BJ=BG.GetGraphMatrixContext(),BN,BK,BQ;switch(BL){case A9.DssGraphMarkerShapeGMTick:var BO=Math.round(BJ.mConstants.FixedTickerSize*0.5),BP=Math.round(0.5*BF);BN=new Ap.Rect2D();BN.x=BM.x-BP;BN.y=BM.y-BO;BN.width=2*BP;BN.height=2*BO;BK=c._TICKER;break;case A9.DssGraphMarkerShape2DPie:case A9.DssGraphMarkerShape2DRingPie:var BH=0;if(BL===A9.DssGraphMarkerShape2DRingPie){BH=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new Ap.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BG,Layout:BH,MaxRadius:this.maxUnitRadius,PlotType:s.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}var BI=this.mPieRenderer.GetPieRadius(0,0,0);BN=BG.transformToRect(BM,BI,true);BK=c._PIE;if(BH===1){BQ=BG.transformToRect(BM,BI*A8,true);}break;case A9.DssGraphMarkerShapeSquare:case A9.DssGraphMarkerShapeRectangle:BN=BG.transformToRect(BM,BF,true);BK=c._RECTANGLE;break;default:BN=BG.transformToRect(BM,BF,true);BK=c._CIRCLE;break;}return{BoundingBox:BN,Shape:BK,ExclusiveRect:BQ};}function Az(BI,BG,BH){var BJ,BK,BF;BJ=this.mDatasetPtr.GetData(this.VecSeriesInfo[BI].SeriesID,BG,0);if(BJ===null){return false;}BF=this.xAxis.GetPositionByValue(BJ);if(BF===null){return false;}BH.x=BF;BJ=this.mDatasetPtr.GetData(this.VecSeriesInfo[BI].SeriesID,BG,1);if(BJ===null){return false;}BK=(this.VecSeriesInfo[BI].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;BF=BK.GetPositionByValue(BJ);if(BF===null){return false;}BH.y=BF;return true;}function BC(BG,BN){var BQ,BO,BF=this.mChartContextPtr,BK=BF.GetGraphMatrixContext(),BH=this.mDatasetPtr,BI=this.VecSeriesInfo,BM,BP,BJ=c._CIRCLE,BL=BK.mMarkerShape;if(BF.mIsGraphMatrix){if(this.isBubbleChart){BM=BH.GetSizeByData(this.VecSeriesInfo[BG].SeriesID,BN);if(BM===null){return null;}BP=this.maxUnitRadius;if(BL===A9.DssGraphMarkerShapeGMTick){BJ=c._TICKER;BP=BK.GetScaledSize(BM,BP,BJ);}else{if(BL===A9.DssGraphMarkerShape2DPie||BL===A9.DssGraphMarkerShape2DRingPie){BJ=c._PIE;BP=BK.GetScaledSize(BM,BP,BJ);BP=Math.max(BP,BK.mConstants.MinimalSize.Pie);}else{if(BL!==A9.DssGraphMarkerShapeCircle){BJ=c._SQUARE;}BP=BK.GetScaledSize(BM,BP,BJ);}}BQ=BP;this.maxRadius=Math.max(this.maxRadius,BP);this.minRadius=Math.min(this.minRadius,BP);}else{BQ=this.maxUnitRadius;this.minRadius=this.maxRadius=this.maxUnitRadius;}}else{if(this.isBubbleChart){BO=0;BM=BH.GetProperty(A5.DssGraphMarkerSize,AD);if(BM){BO=BM;}BM=BH.GetData(this.VecSeriesInfo[BG].SeriesID,BN,2);if(BM===null){BI[BG].IsNullData[BN]=true;}else{BI[BG].IsNullData[BN]=false;BQ=this.zAxis.ValueToBubbleSize(BO,BM);}}else{BQ=BI[BG].MarkerSize;}}if(BQ){BQ=Math.max(BQ,1);BQ=Math.floor(BQ);}return BQ;}function g(BH,BG,BO,BI){var BN,BJ,BF,BK,BL,BM=null;if(BO===0){BN=this.xAxis;}else{if(BO===1){BN=(this.VecSeriesInfo[BH].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;}else{if(BO===2){BN=this.zAxis;}}}if(BN===null){return BM;}BJ=this.mDatasetPtr.GetData(this.VecSeriesInfo[BH].SeriesID,BG,BO);if(BJ===null){return BM;}BF=BN.GetNumberFormat();BK=new Ap.TripleId({ObjectId:A6.DssGraphDataText,SeriesId:this.VecSeriesInfo[BH].SeriesID,GroupId:BG});BL=new Ap.NumberObject({TripleId:BK,GraphObjectManager:this,Number:BJ,NumberFormat:BF,GraphCollectionObject:BI,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:BO});if(BL!==null){BM=BL.mText;}return BM;}function Ai(BK,BF,BG,BJ){var BI,BH;BI=BK.GetBoundingRectNoRotation();BH=BI;BK.SetRect(BH);return Math.sqrt((BH.x-BF.x)*(BH.x-BF.x)+(BH.y-BF.y)*(BH.y-BF.y));}function AI(BK,BO,BU,BR){var BP=false,BM=false,BN=2,BQ,BF=0,BJ,BT=0,BI=0,BH,BS,BG,BL=this.isSmarted?BR:this.labelLocation;switch(BU){case M.FR_90:case M.FR_270:BP=true;break;case M.FR_45:case M.FR_315:BM=true;break;default:break;}if(BM){BN=1.414;}BQ=BK.GetBoundingRectNoRotation();if((BL===Ag.DssGraphDTPositionOutMin)||(BL===Ag.DssGraphDTPositionInMin)){BF=BM?BO.height/2+BO.width/2:BO.width;}else{BF=BM?BO.width/2+BO.height/2:BO.height;}BJ=BF;switch(BL){case Ag.DssGraphDTPositionCenter:BT=BI=0;break;case Ag.DssGraphDTPositionOutMin:BT=1;BJ+=(BP||BM)?BQ.Height/BN:BQ.Width/2;break;case Ag.DssGraphDTPositionInMin:BT=-1;BJ+=(BP||BM)?BQ.Height/BN:BQ.Width/2;break;case Ag.DssGraphDTPositionInMax:BI=-1;BG=BP?BQ.Width:BQ.Height;BJ+=(BP||BM)?BG/BN:BQ.Height/2;break;case Ag.DssGraphDTPositionOutMax:BI=1;BG=BP?BQ.Width:BQ.Height;BJ+=(BP||BM)?BG/BN:BQ.Height/2;break;default:break;}BH=BO.GetCenter().x+BT*BJ;BS=BO.GetCenter().y+BI*BJ;BK.MoveTo(BH,BS,A2.CENTER);return BF;}function AS(BJ,BM,BH,BG){var BF=BH.GetCenter(),BL=(BG.y+BG.height-BF.y)<0,BN=(BG.x+BG.width-BF.x)<0,BK=(BG.x-BF.x)*(BG.x+BG.width-BF.y),BI=(BG.y-BF.y)*(BG.y+BG.height-BF.y);if(BI<=0){BJ.x=BN?BH.x:BH.x+BH.width;BJ.y=BN?Math.round(BH.y+0.5*BH.height):Math.round(BH.y+0.5*BH.height);BM.y=BF.y;BM.x=BN?BG.x+BG.width:BG.x;}else{BJ.x=BL?Math.round(BH.x+0.5*BH.width):Math.round(BH.x+0.5*BH.width);BJ.y=BL?BH.y:BH.y+BH.height;if(BK<=0){BM.x=BF.x;BM.y=BL?BG.y+BG.height:BG.y;}else{if(BN){BM.x=BL?BG.x+BG.width:BG.x+BG.width;BM.y=BL?BG.y+BG.height:BG.y;}else{BM.x=BL?BG.x:BG.x;BM.y=BL?BG.y+BG.height:BG.y;}}}}function BE(BH,BG,BK,BL,BJ){var BI=0,BF=0;switch(BJ){case Ag.DssGraphDTPositionOutMin:BI=1;BH.x=BK.x+BK.width;BH.y=BK.y+0.5*BK.height;BL-=BK.width/2;break;case Ag.DssGraphDTPositionInMin:BI=-1;BH.x=BK.x;BH.y=BK.y+0.5*BK.height;BL-=BK.width/2;break;case Ag.DssGraphDTPositionInMax:BF=-1;BH.x=BK.x+0.5*BK.width;BH.y=BK.y;BL-=BK.height/2;break;case Ag.DssGraphDTPositionOutMax:BF=1;BH.x=BK.x+0.5*BK.width;BH.y=BK.y;BL-=BK.height/2;break;}BG.x=BH.x+BI*BL;BG.y=BH.y+BF*BL;}function Ac(BI,BL,BN,BH){var BF,BJ,BM,BK,BG;if(BI===null){return ;}BF=AI.call(this,BI,BL,BN,this.labelLocation);if(this.dataLabelLine){BJ=new Ap.Point2D();BM=new Ap.Point2D();BE.call(this,BJ,BM,BL,BF,this.labelLocation);BK=new Ap.TripleId({ObjectId:A6.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3});BG=new Ap.StraightLineObject({TripleId:BK,GraphObjectManager:this,Start:BJ,End:BM});this.mGraphObjectList.push(BG);BH.AddGraphObject(BG);}}function Ad(BL,BK,BJ){var BG=this.mDatasetPtr,BM=BG.dataLabelStyle,BI="",BH,BF,BN;switch(BM){case AJ:BH=g.call(this,BL,BK,0,BJ);BF=g.call(this,BL,BK,1,BJ);BI="("+BH+", "+BF+")";break;case J:BI=BG.GetTextLabel(this.VecSeriesInfo[BL].SeriesID,BK);break;}BN=new Ap.TextObject({TripleId:new Ap.TripleId({ObjectId:A6.DssGraphDataText,SeriesId:this.VecSeriesInfo[BL].SeriesID,GroupId:BK}),GraphObjectManager:this,GraphCollectionObject:BJ});BN.SetText(BI);this.mPostTrendLineObjects.push(BN);return BN;}function Ax(BL){var BH,BI=this.VecSeriesInfo.length,BF=BL.length,BK,BJ;if(BF>0){BL.splice(0,BF);}for(BH=0;BH<BI;++BH){var BG=this.VecSeriesInfo[BH].ShowDataLabel;if(BG){BK=new Ap.TripleId({ObjectId:A6.DssGraphDataText,SeriesId:this.VecSeriesInfo[BH].SeriesID});BJ=new Ap.GraphCollectionObject({TripleId:BK,GraphObjectManager:this,CollectionType:AM.CT_TEXT});BL.push(BJ);this.AddToMap(BJ);}}}function K(BM){var BI,BL=this.VecSeriesInfo,BK=BL.length,BH=BM.length,BF,BJ;if(BH>0){BM.splice(0,BH);}for(BI=0;BI<BK;++BI){var BG=BL[BI].ShowDataLabel;if(BG){BF=new Ap.TripleId({ObjectId:A6.DssGraphDataText,SeriesId:BL[BI].SeriesID});BJ=new Ap.GraphCollectionObject({TripleId:BF,GraphObjectManager:this,CollectionType:AM.CT_TEXT});BM.push(BJ);this.AddToMap(BJ);}}}function x(){if(this.mChartContextPtr.mIsGraphMatrix){return(this.xAxis&&this.xAxis.mOptions.mUseCustomMinMax)||(this.y1Axis&&this.y1Axis.mOptions.mUseCustomMinMax)||(this.y2Axis&&this.y2Axis.mOptions.mUseCustomMinMax);}return false;}function Aa(BG){var BF=this.mDataArea,BH=x.call(this);if(BH){if(BG.x<BF.x||BG.x+BG.width>BF.x+BF.width){return false;}if(BG.y<BF.y||BG.y+BG.height>BF.y+BF.height){return false;}}return true;}function AY(BQ,BV){var BO=this.VecSeriesInfo,BK=BO.length,BG=this.waitingList,BJ,BI,BS=null,BN=0,BU,BT,BM,BR;if(BG&&this.waitingList.length){var BP=this.waitingList,BL=BP.length,BH;this.hiddenMarkers=this.hiddenMarkers||[];BS=this.hiddenMarkers;for(BJ=0;BJ<BL;BJ++){BH=BP[BJ].Id;BS[BH.mSeriesId]=BS[BH.mSeriesId]||[];BS[BH.mSeriesId][BH.mGroupId]=1;}}for(BJ=0;BJ<BK;++BJ){BN=0;BU=BO[BJ].SeriesID;BT=BO[BJ].IsNullData.length;for(BI=0;BI<BT;++BI){if(BS&&BS[BU][BI]!==undefined){if(!BO[BJ].IsNullData[BI]){++BN;}continue;}var BF=BO[BJ].ShowDataLabel;if(!BF){this.standAloneMarkers.push(BQ[BJ][BN++]);continue;}if(!BO[BJ].IsNullData[BI]){BM=new Ap.GMDataLabelInfo();BM.isValid=true;BM.GroupId=BI;BM.SeriesId=BU;BM.HostMarkerBound=BQ[BJ][BI];BM.HostMarkerPoint=BM.HostMarkerBound.GetCenter();BM.Label=Ad.call(this,BJ,BI,BV[BJ]);if(!Aa.call(this,BM.HostMarkerBound)){BM.isValid=false;continue;}if(BM.Label===null||BM.Label===undefined){BM.isValid=false;continue;}else{}this.mDataLabels.push(BM);BV[BJ].AddGraphObject(BM.Label);}}}delete this.hiddenMarkers;}function C(BH){var BK,BJ,BI=BH.length,BG=0,BF=[];for(BK=0;BK<BI;++BK){if(BH[BK].length>0){BG=BH[BK].length;for(BJ=0;BJ<BG;++BJ){BF.push(BH[BK][BJ]);}}}return BF;}function BB(BG){var BF=this.mDataArea;if(BG.x<BF.x||BG.y<BF.y){return true;}return(BG.x+BG.width>BF.x+BF.width||BG.y+BG.height>BF.y+BF.height);}function W(BG,BJ,BK,BF){var BI=Math.max(BG.y,BJ.y),BH=BG.y+BJ.y-BI;if(BH>BF.y||BI<BF.y){return false;}BI=Math.max(BG.x,BJ.x);BH=BG.x+BJ.x-BI;return !(BH>Math.max(BK.x,BF.x)||BI<Math.min(BK.x,BF.x));}function AK(BG,BJ,BK,BF){var BI=Math.max(BG.x,BJ.x),BH=BG.x+BJ.x-BI;if(BH>BF.x||BI<BF.x){return false;}BI=Math.max(BG.y,BJ.y);BH=BG.y+BJ.y-BI;return !(BH>Math.max(BK.y,BF.y)||BI<Math.min(BK.y,BF.y));}function Z(BJ,BK,BI){var BG=true,BF=BI.length,BH;for(BH=0;BH<BF;++BH){BG=(BH===0)||(BH===2);if(BG){if(W.call(this,BJ,BK,BI[BH],BI[(BH+1)%BF])){return true;}}else{if(AK.call(this,BJ,BK,BI[BH],BI[(BH+1)%BF])){return true;}}}return false;}function f(BS,BR){var BH=1,BN,BW,BQ,BO,BI,BX,BJ,BU,BL=[],BP,BM,BK,BV,BG,BF,BT;switch(BS.LabelRotation){case M.FR_NORMAL:case M.FR_CUSTOME:case M.FR_90:case M.FR_180:case M.FR_270:case M.FR_HOTEL:break;case M.FR_45:break;case M.FR_315:BH=-1;break;}BN=BS.Label.GetBoundingRectNoRotation();BW=BN.GetCenter();BQ=0.5*BN.width;BO=0.5*BN.height;BI=Math.sqrt(BQ*BQ+BO*BO);for(BT=0;BT<4;++BT){BJ=(BT===0||BT===3)?-1:1;BU=(BT===0||BT===1)?-1:1;BX=new Ap.Point2D({x:BJ*BQ,y:BU*BO});BL.push(BX);}for(BT=0;BT<4;BT++){BP=(BT===0||BT===3)?180:0;BM=Math.atan(BL[BT].x/BL[BT].y);BK=Aq.RadianToDegree(BM);BK+=(BP+BH*45);BV=Aq.DegreeToRadian(BK);BG=Math.round(BI*Math.cos(BV))+BW.x;BF=Math.round(BI*Math.sin(BV))+BW.y;BX=new Ap.Point2D({x:BG,y:BF});BR.push(BX);}}function e(BH,BK,BL,BJ){var BG=BK.length,BF=0,BI=0;BL=BL||false;BJ=BJ||false;if(!BJ){for(BI=0;BI<BG;++BI){if(BH.HasIntersection(BK[BI])){++BF;}}}else{AP.visPrint("Checking label overlap with tilt targets has not been implemented yet.");}return BF;}function q(BM,BF,BH){var BK=0,BG=BF.length,BO=((BM.LabelRotation===M.FR_45)||(BM.LabelRotation===M.FR_315)),BJ=[],BI=0,BN,BL;BH=BH||false;if(BO){f.call(this,BM,BJ);for(BI=0;BI<BG;++BI){BN=[];BN.push(BF[BI].GetBottomLeft());BN.push(BF[BI].GetBottomRight());BN.push(BF[BI].GetTopRight());BN.push(BF[BI].GetTopLeft());if(!BH){if(Z.call(this,BJ[0],BJ[1],BN)||Z.call(this,BJ[1],BJ[2],BN)||Z.call(this,BJ[2],BJ[3],BN)||Z.call(this,BJ[3],BJ[0],BN)){++BK;}}else{AP.visPrint("We currently do not support tilt rectangle against tilt targets");}}}else{BL=BM.Label.GetBoundingRect();BK=e.call(this,BL,BF,false,BH);}return BK;}function B(BL){var BK,BH,BG=this.mDataArea,BJ,BF,BM,BI;BJ=this.standAloneMarkers.length;BF=new Ap.Rect2D();for(BH=0;BH<BJ;++BH){BF.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.standAloneMarkers[BH],BG,BF)){BL.UpdateMatrixRect(BF);}}BJ=this.labelMatrix.length;for(BK=0;BK<BJ;++BK){BF.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.labelMatrix[BK].HostMarker,BG,BF)){BL.UpdateMatrixRect(BF);}if(this.labelMatrix[BK].IsPut){BM=this.labelMatrix[BK].Label.GetBoundingRectNoRotation();if(this.mChartContextPtr.RectangleIntersection(BM,BG,BF)){BL.UpdateMatrixRect(BF,true,this.labelMatrix[BK].LabelRotation);}}}BI=Math.round(0.95*BL.XCount*BL.YCount);return BL.Metric<BI;}function N(BI,BM,BL){var BG=new Ap.Point2D(),BH=new Ap.Point2D(),BF=new Ap.TripleId({ObjectId:A6.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3}),BK,BJ;if(!BI.IsValid){return false;}if(BI.IsPut){if(BI.SuggestedStart===Ag.DssGraphDTPositionPieSmart){if(this.dataLabelLine||(!this.dataLabelLine&&BI.IsMoved(this.labelLocation))){BK=BI.Label.GetBoundingRect();AS.call(this,BG,BH,BI.HostMarker,BK);}else{return false;}}else{if(this.dataLabelLine||(!this.dataLabelLine&&BI.IsMoved(this.labelLocation))){BE.call(this,BG,BH,BI.HostMarker,BL,BI.SuggestedStart);}else{return false;}}BJ=new Ap.StraightLineObject({TripleId:BF,GraphObjectManager:this,StartPoint:BG,EndPoint:BH,GraphCollectionObject:BM});this.mGraphObjectList.push(BJ);BM.AddGraphObject(BJ);return true;}if(this.dataLabelLine){BE.call(this,BG,BH,BI.HostMarker,BL,BI.SuggestedStart);}else{return false;}BJ=new Ap.StraightLineObject({TripleId:BF,GraphObjectManager:this,StartPoint:BG,EndPoint:BH,GraphCollectionObject:BM});this.mGraphObjectList.push(BJ);BM.AddGraphObject(BJ);return true;}function a(BI,BJ){var BN=this.labelMatrix.length,BL=new Ap.Point2D(),BO=new Ap.Rect2D(),BG,BM,BF,BK,BH;for(BK=0;BK<BN;++BK){BH=this.labelMatrix[BK];if(!BH.IsPut){BG=BH.Label.GetBoundingRectNoRotation();BM=BI.IsAccomdatableConsiderRotation(BH.HostMarker,BG,BL,BH.LabelRotation);if(BM){BH.IsPut=true;BH.SuggestedStart=A1.DssGraphDTPositionPieSmart;BF=Ai.call(this,BH.Label,BH.HostMarker,BL,BH.LabelRotation);BG=BH.Label.GetBoundingRectNoRotation();N.call(this,BH,BJ,BF);this.AddToMap(BH.Label);BO.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(BG,this.mDataArea,BO)){BI.UpdateMatrixRect(BO,true,BH.LabelRotation);}}}}return true;}function Ar(BK){var BH,BM,BF,BJ,BL,BI,BG=this.VecSeriesInfo.length;BF=this.isBubbleChart?A6.DssGraphRiser:A6.DssGraphDataLine;BJ=this.isBubbleChart?AM.CT_GENERAL_SHAPE:AM.CT_LINE;for(BH=0;BH<BG;++BH){BM=this.VecSeriesInfo[BH];BL=new Ap.TripleId({ObjectId:BF,SeriesId:BM.SeriesID,GroupId:As});BI=new Ap.GraphCollectionObject({TripleId:BL,GraphObjectManager:this,CollectionType:BJ});BK.push(BI);this.AddToMap(BK[BH]);if(!this.mChartContextPtr.mIsGraphMatrix){this.AddLegendMarkerToCollection(BM.SeriesID,BK[BH],!this.isBubbleChart,true,BM.MarkerShape,BM.ConnectDataPoint);}}}function BA(BI){var BG=this.labelMatrix.length,BL,BK,BH,BJ,BF;for(BJ=0;BJ<BG;++BJ){BF=this.labelMatrix[BJ];BL=BF.Label.mTripleId;BH=M.FR_NORMAL;BK=this.mChartContextPtr.GetProperty(A5.DssGraphFontRotation,BL);if(BK){BH=BK;}if(!BF.IsPut){Ac.call(this,BF.Label,BF.HostMarker,BH,BI);this.AddToMap(BF.Label);}}}function AZ(BK,BI,BF,BG){var BH,BJ;if(this.labelLocation===Ag.DssGraphDTPositionOutMin){BK.SuggestedStart=Ag.DssGraphDTPositionInMin;}BJ=AI.call(this,BK.Label,BK.HostMarker,BK.LabelRotation,BK.SuggestedStart);BH=BK.ToRectangle();if(BB.call(this,BH)||(q.call(this,BK,BI)>0)||(q.call(this,BK,this.standAloneMarkers)>0)||(q.call(this,BK,BF)>0)){if(BK.SuggestedStart>=Ag.DssGraphDTPositionOutMax){return false;}++BK.SuggestedStart;if(BK.SuggestedStart===this.labelLocation){++BK.SuggestedStart;}if(BK.SuggestedStart>Ag.DssGraphDTPositionOutMax){return false;}return AZ.call(this,BK,BI,BF,BG);}BF.push(BH);BK.IsPut=true;N.call(this,BK,BG,BJ);return true;}function AF(BL,BO,BG){var BN=this.labelMatrix.length,BJ=0,BK,BF,BM,BI,BH;for(BH=0;BH<BN;++BH){BK=this.labelMatrix[BH];BF=AI.call(this,BK.Label,BK.HostMarker,BK.LabelRotation,this.labelLocation);BM=BK.ToRectangle();BI=(BB.call(this,BM)||(q.call(this,BK,BL)>0)||(q.call(this,BK,this.standAloneMarkers)>0)||(q.call(this,BK,BO)>0));if(!BI){BO.push(BM);BK.IsPut=true;BK.SuggestedStart=this.labelLocation;N.call(this,BK,BG,BF);++BJ;this.AddToMap(BK.Label);continue;}if(AZ.call(this,BK,BL,BO,BG)){++BJ;this.AddToMap(BK.Label);}else{BK.SuggestedStart=this.labelLocation;}}return BJ;}function t(BL,BQ){var BN,BI=this.VecSeriesInfo.length,BK,BH,BG=0,BP,BO,BJ,BM;for(BH=0;BH<BI;++BH){BN=this.VecSeriesInfo[BH];BK=0;BP=this.VecSeriesInfo[BH].SeriesID;BO=this.VecSeriesInfo[BH].IsNullData.length;for(BG=0;BG<BO;++BG){var BF=this.VecSeriesInfo[BH].ShowDataLabel;if(!BF){this.standAloneMarkers.push(BL[BH][BK++]);continue;}if(!this.VecSeriesInfo[BH].IsNullData[BG]){BJ=new Ap.LabelInfo();BJ.IsValid=true;BJ.GroupId=BG;BJ.SeriesId=BP;BJ.HostMarker=BL[BH][BK++];BJ.Label=Ad.call(this,BH,BG,BQ[BH]);if(BJ.Label===null){BJ.IsValid=false;continue;}else{}this.labelMatrix.push(BJ);BQ[BH].AddGraphObject(BJ.Label);}}}}function S(BQ,BH){var BO,BM=this.VecSeriesInfo.length,BK,BI=0,BG,BL,BR,BT=0,BN,BP,BS,BJ;for(BK=0;BK<BM;++BK){BO=this.VecSeriesInfo[BK];var BF=this.mDatasetPtr.showSeriesDatalabel(BO.SeriesID);if(BF){BL=new Ap.TripleId({ObjectId:A6.DssGraphDataText,SeriesId:BO.SeriesID});BG=new Ap.GraphCollectionObject({TripleId:BL,GraphObjectManager:this,CollectionType:AM.CT_TEXT});BR=BQ[BK];BT=0;BP=BO.IsNullData.length;for(BI=0;BI<BP;++BI){if(BO.IsNullData[BI]){continue;}BS=Ad.call(this,BK,BI,BG);BG.AddGraphObject(BS);this.AddToMap(BS);BL=BS.mTripleId;BJ=M.FR_NORMAL;BN=this.mChartContextPtr.GetProperty(A5.DssGraphFontRotation,BL);if(BN){BJ=BN;}Ac.call(this,BS,BR[BT++],BJ,BH);}if(BG.GetCollectionSize()>0){this.AddToMap(BG);}}}}function A(){var BL=this.mChartContextPtr,BI=this.dataLabelManager,BH,BF=this.mDataLabels,BG=BF.length,BJ=[],BK=new Ap.Rect2D({x:0,y:0,width:BL.mGraphWidth,height:BL.mGraphHeight});if(BI===null||BI===undefined){BI=this.dataLabelManager=new Ap.DataLabelManager({DataArea:BK});BI.ChartContext=BL;}BI.RectangleObjects=BI.RectangleObjects.concat(this.standAloneMarkers);for(BH=0;BH<BG;++BH){BJ.push(BF[BH].HostMarkerBound);}BI.RectangleObjects=BI.RectangleObjects.concat(BJ);return BI;}function AW(){var BF=this.mDataLabels,BH=BF.length,BG;for(BG=0;BG<BH;++BG){BF[BG].CenterXOffset=BF[BG].HostMarkerBound.width/2;BF[BG].CenterYOffset=BF[BG].HostMarkerBound.height/2;}}function P(){var BV=this.VecSeriesInfo.length,BG,BQ,BT,BU,BH,BL,BK,BJ,BP,BW,BR,BS,BM=this.mDatasetPtr,BI=this.mChartContextPtr,BF,BN,BO;if(this.mTrendLineObjects===null){this.mTrendLineObjects=[];}if(BM.isBare(BI.IsPieChart())){return ;}for(BT=0;BT<BV;++BT){BQ=this.VecSeriesInfo[BT];BG=BQ.SeriesID;BJ=this.mDatasetPtr.GetTrendLineOfSeries(BG);BU=BQ.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BK=new Ap.TripleId({ObjectId:A6.DssGraphTrendLine,SeriesId:BG});if(BJ){BP=BJ.getTrendLineType();if(BP!==Q.DssGraphRegressionNone){BW=BJ.getIdentity();BH=BJ.getTrendLineValuesWithForecast();BL=BJ.getTrendLineValues();if(E(BL)<=1){continue;}BR=BJ.getCoefficients(true);BS=BR.length-1;if(BH&&BH.length){BF={mRegressionType:BP,mOrder:BS,mPeriod:0,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeasonal:false};BN=new Ap.TrendLineObject({TripleId:BK,GraphObjectManager:this,GraphCollectionObject:null,TrendLineOptions:BF,XAxis:this.xAxis,YAxis:BU,TrendLineValues:BH,Coefficients:BR,IsVertical:true,Identity:BW});if(BN!==undefined&&BN!==null){BO=BN.CreateTrendLine();if(BO!==undefined&&BO!==null){this.mTrendLineObjects.push(BO);}}}}}}}function AC(BI,BP,BL,BF,BH,BO,BN,BK,BJ,BM){var BG={};BG.rect=new Ap.Rect2D({x:0,y:0,width:BF+2*BJ,height:BP+2*BJ});switch(BI){case AB:if(BM){BG.xOffset=BO+BJ+BH;BG.yOffset=BJ+BL;BG.rect.x=BO;BG.rect.y=0;}else{BG.xOffset=BK-BJ-BH;BG.yOffset=BO-BJ-BL;BG.rect.x=BK-2*BJ-BF;BG.rect.y=BO-2*BJ-BP;}break;case z:if(BM){BG.xOffset=BO-BJ-BH;BG.yOffset=BJ+BL;BG.rect.x=BO-2*BJ-BF;BG.rect.y=0;}else{BG.xOffset=BK-BJ-BH;BG.yOffset=BO+BJ+BL;BG.rect.x=BK-2*BJ-BF;BG.rect.y=BO;}break;case y:if(BM){BG.xOffset=BO+BJ+BH;BG.yOffset=BN/2;BG.rect.x=BO;BG.rect.y=BN/2-BJ-BL;}else{BG.xOffset=BK/2;BG.yOffset=BO-BJ-BL;BG.rect.x=BK/2-BJ-BH;BG.rect.y=BO-2*BJ-BP;}break;case w:if(BM){BG.xOffset=BO-BJ-BH;BG.yOffset=BN/2;BG.rect.x=BO-2*BJ-BF;BG.rect.y=BN/2-BJ-BL;}else{BG.xOffset=BK/2;BG.yOffset=BO+BJ+BL;BG.rect.x=BK/2-BJ-BH;BG.rect.y=BO;}break;case v:if(BM){BG.xOffset=BO+BJ+BH;BG.yOffset=BN-BJ-BL;BG.rect.x=BO;BG.rect.y=BN-2*BJ-BP;}else{BG.xOffset=BJ+BH;BG.yOffset=BO-BJ-BL;BG.rect.x=0;BG.rect.y=BO-2*BJ-BP;}break;case u:if(BM){BG.xOffset=BO-BJ-BH;BG.yOffset=BN-BJ-BL;BG.rect.x=BO-2*BJ-BF;BG.rect.y=BN-2*BJ-BP;}else{BG.xOffset=BJ+BH;BG.yOffset=BO+BJ+BL;BG.rect.x=0;BG.rect.y=BO;}break;}return BG;}function Am(BJ,BQ,BM,BK,BH,BF){var BN=BJ.rect,BL,BI,BG,BO,BP;if(BN.y<0||BN.y+BN.height>BQ){BJ.cannotFitVertically=true;return ;}if(BN.x<0||BN.x+BN.width>BM){BJ.cannotFitHorizontally=true;}BL=BH.length;for(BI=0;BI<BL;++BI){BG=BH[BI].GetBoundingRect();if(BN.HasIntersection(BG)){++BJ.overlapRefLabelCount;}}BL=BF.length;for(BI=0;BI<BL;++BI){BP=BF[BI];if(BP.isVertical){if(BN.x<BP.position&&BN.x+BN.width>BP.position){++BJ.overlapRefLineCount;}}else{if(BN.y<BP.position&&BN.y+BN.height>BP.position){++BJ.overlapRefLineCount;}}}BL=BK.length;for(BI=0;BI<BL;++BI){BO=BK[BI];if(BO.mIsShown){BG=BO.GetBoundingRect();if(BN.HasIntersection(BG)){++BJ.overlapDataLabelCount;BJ.overlapDataLabels.push(BK[BI]);}}}}function AG(Ba,BV,BN){var BH=this.mChartContextPtr,BZ=BH.GetGraphMatrixContext(),BG=BZ.getPadding(Ak.kRefLabel),BM=BN.length,BK,BL,BS,BP,BJ,BQ,BF,BX,BW,BT,BI,BO,BU,BR,BY;for(BX=0;BX<BM;++BX){BK=BN[BX];BL=new Ap.TextObject({TripleId:BK.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:BK.identity});if(BL!==null){BL.SetText(BK.labelText);for(BW=0;BW<2;++BW){if(BW===1){BI=BL.mText;BL.SetText(BI[0]+"...");BL.rect.height=0;BL.rect.width=0;}BF=BL.GetBoundingRect();BP=BF.height;BQ=BP/2;BS=BF.width;BJ=BS/2;BR=[];for(BT=AB;BT<=u;++BT){BO={};BO.position=BT;BO.cannotFitVertically=false;BO.cannotFitHorizontally=false;BO.overlapRefLabelCount=0;BO.overlapRefLineCount=0;BO.overlapDataLabelCount=0;BO.overlapDataLabels=[];BU=AC.call(this,BT,BP,BQ,BS,BJ,BK.position,Ba,BV,BG,BK.isVertical);BO.xOffset=BU.xOffset;BO.yOffset=BU.yOffset;BO.rect=BU.rect;Am.call(this,BO,Ba,BV,this.shownDataLabels,this.shownRefLabels,BN);BR.push(BO);}BR.sort(k);if(BR[0].cannotFitVertically){break;}if(BR[0].cannotFitHorizontally){if(BX===0){continue;}else{break;}}BL.MoveTo(BR[0].xOffset,BR[0].yOffset,A2.CENTER);BL.mIsShown=true;BY=BR[0].overlapDataLabelCount;for(BT=0;BT<BY;++BT){BR[0].overlapDataLabels[BT].mIsShown=false;}this.mPostTrendLineObjects.push(BL);this.shownRefLabels.push(BL);break;}}}}function An(){var BR=this.VecSeriesInfo.length,BH,BU,Bc,BY,Bd,BV,Ba=[],BJ,Bb,BS,BI,BZ,Bj,Bh,BO,BK,Bi,Be,BG,BM={},Bg,BF,BP=this.mDatasetPtr,BX=BP.GetSeriesCount()*BP.GetGroupCount(),BL=this.mChartContextPtr,BW=BL.mGraphWidth,Bf=BL.mGraphHeight,BN,BQ=[];if(this.mReferenceLineObjects===null){this.mReferenceLineObjects=[];}if(BL.mPartialRendering===false){BX=this.DPCount;}for(Bc=0;Bc<BR;++Bc){BU=this.VecSeriesInfo[Bc];BH=BU.SeriesID;BS=this.mDatasetPtr.GetReferenceLinesOfSeries(BH);Bd=BU.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BF={};BF.Condense=Bd.mCondenseLabels;if(!BF.Condense){if(Bd.mNumberFormat.isDefault){var BT=new Ap.ChartAdvFormat();BL.getAxisAutoNumberFormat(BT,Bd.mPrimaryMetrics);Bd.mNumberFormat=BT;}BF.NumberFormat=Bd.mNumberFormat.mCustomFormat;}BN=BS.length;for(BY=0;BY<BN;++BY){BJ=new Ap.TripleId({GroupId:BY,ObjectId:A6.DssGraphReferenceLine,SeriesId:BH});Bg=new Ap.TripleId({ObjectId:A6.DssGraphRefLineText,SeriesId:BH,GroupId:BY});Ba=[];Bb=BS[BY];if(Bb){Bj=Bb.getIdentity();BV=Bb.getReferenceLineValue();Bh=Bb.getReferenceLineDirection();BI=Bb.getReferenceLineLabel(false,false,BF);BZ=Bb.getLevel();if(BX===0){continue;}if(BV===null&&BV===undefined){continue;}BO=(Bh!=="horizontal");if(BO){Bi=this.xAxis.GetPositionByValue(BV);}else{Bi=Bd.GetPositionByValue(BV);}if(Bi!==null){Be=1;if(BO){if(Bi===0){Bi=1;}else{if(Bi===BW){--Bi;}}BG=Bf-1;Ba.push(new Ap.Point2D({x:Bi,y:Be}));Ba.push(new Ap.Point2D({x:Bi,y:BG}));BM.x=Bi;BM.y=(Ba[0].y+Ba[1].y)/2;}else{if(Bi===0){Bi=1;}else{if(Bi===Bf){--Bi;}}BG=BW-1;Ba.push(new Ap.Point2D({x:Be,y:Bi}));Ba.push(new Ap.Point2D({x:BG,y:Bi}));BM.x=(Ba[0].x+Ba[1].x)/2;BM.y=Bi;}BK=new Ap.StraightLineObject({TripleId:BJ,GraphObjectManager:this,StartPoint:Ba[0],EndPoint:Ba[1],GraphCollectionObject:null,Identity:Bj,Shape:c._LINE,MidPoint:BM});if(BK!==null){if(!BK.mFormatLinePtr){BK.mFormatLinePtr=new Ap.FormatLine();}this.mReferenceLineObjects.push(BK);BQ.push({tripleId:Bg,identity:Bj,isVertical:BO,position:Bi,labelText:BI});}}else{AP.visPrint("Reference line point calculation abnormal:");AP.visPrint("\tref line #: "+BY+" direction: "+Bh);AP.visPrint("\tvalue = "+BV);if(BO){AP.visPrint("\tx = "+Bi);}else{AP.visPrint("\ty = "+Bi);}}}}}AG.call(this,Bf,BW,BQ);}function p(){var BG=this.mTrendLineObjects.length,BF;for(BF=0;BF<BG;++BF){this.mTrendLineObjects[BF].Draw();}}function X(){var BG=this.mReferenceLineObjects,BF;for(BF=0;BF<BG.length;++BF){BG[BF].Draw();}}function E(BH){var BG,BF=0;for(BG=0;BG<BH.length;BG++){if(BH[BG]!==null){BF++;}}return BF;}function Aw(BQ,BL){if(!BL){return ;}var BI=this.mChartContextPtr,BN=this.mDatasetPtr,Ba=this.mChartContextPtr.GetGraphMatrixContext(),Bb=BI.mIsGraphMatrix,BO,BV,Be,BH,BX,BT,BZ,BU,BG,Bc,BW;var BP=BN.showDatalabels();if(Bb&&BP){Bc=this.dataLabelManager;if(Bc===null||Bc===undefined){BW=new Ap.Rect2D({x:0,y:0,width:BI.mGraphWidth,height:BI.mGraphHeight});Bc=this.dataLabelManager=new Ap.DataLabelManager({DataArea:BW});Bc.ChartContext=BI;}if(Ba.mMarkerShape===A9.DssGraphMarkerShape2DPie||Ba.mMarkerShape===A9.DssGraphMarkerShape2DRingPie){this.mPieRenderer.enableDataLabel(Bc,this.shownDataLabels);BU=this.mPieRenderer.dataLabels;BT=BU.length;for(BZ=0;BZ<BT;++BZ){BG=BU[BZ].Label;if(BG.mIsShown){this.AddToMapAndList(BG);}}}else{BV=[];K.call(this,BV);AY.call(this,BQ,BV);AW.call(this);Bc=A.call(this);Bc.PlaceDataLabels(this.mDataLabels,this.shownDataLabels);}}else{if(this.isSmarted){BO=[];Be=[];BH=[];BX=C.call(this,BQ);if(BX){Be=BX;}Ax.call(this,BO);t.call(this,BQ,BO);var BK=new Ap.TripleId({ObjectId:A6.DssGraphDataTextConnectLine,SeriesId:this.TripleId.mSeriesId,GroupId:this.TripleId.mGroupId}),BJ=new Ap.GraphCollectionObject({TripleId:BK,GraphObjectManager:this,CollectionType:AM.CT_LINE});var Bd=this.labelMatrix.length,BM=AF.call(this,Be,BH,BJ);if(BM===Bd){return ;}if(BM===0){BL=false;}else{var BS=new Ap.Rect2D(),BY,BF;r.call(this,BS);BY=new Ap.GridMap({Rect:this.mDataArea,Unit:BS,dataLabelPadding:5});BF=B.call(this,BY);if(BF){var BR=function BR(Bg,Bf){return Bg.HostMarker.x-Bf.HostMarker.x;};this.labelMatrix.sort(BR);a.call(this,BY,BJ);}else{BA.call(this,BJ);}}if(BJ.GetCollectionSize()){this.AddToMap(BJ);}if(!this.isSmarted){if(this.isSmarted){this.mPostTrendLineObjects.splice(0,this.mPostTrendLineObjects.length);}if(!this.dataLabelLine){S.call(this,BQ);}else{BJ=new Ap.GraphCollectionObject({TripleId:BK,GraphObjectManager:this,CollectionType:AM.CT_LINE});S.call(this,BQ,BJ);if(BJ.GetCollectionSize()>0){this.AddToMap(BJ);}}}}}}function D(){var BH=this.mChartContextPtr,BF=this.mDataArea,BG=this.mPostTrendLineObjects;if(BH.mIsGraphMatrix){BG=[];}this.y1Axis.GenerateCustomLine(BF,BG);if(this.mChartContextPtr.IsDualAxis()){this.y2Axis.GenerateCustomLine(BF,BG);}this.xAxis.GenerateCustomLine(BF,BG);if(BH.mIsGraphMatrix&&BG.length){this.mGraphObjectList=BG.concat(this.mGraphObjectList);}}function I(BI){var BM=this.mChartContextPtr,BJ=BM.mGraphHeight,BH=BM.mGraphWidth,BL,BG,BK,BF;if(BI===undefined||BI===null){return false;}BL=BI.mOptions;BG=BL.mAxisCustomValue;BK=BI.IsVerticalAxis();BF=BI.ValueToPosition(BG);if(!BL.mDrawCustomLine){return false;}if(BG>BI.mMaxTick||BG<BI.mMinTick){return false;}if(BF===0){return false;}if(BK){if(BF===BJ){return false;}}else{if(BF===BH){return false;}}return true;}function AL(BK,BR,BF,BQ,BO,BM,BH,BI){var BG={},BL=BR/2,BJ=BF/2,BN=BI.IsVerticalAxis(),BP;if(BI.mTripleId.mObjectId===A6.DssGraphY2Body){BP=A3;}else{if(BI.mTripleId.mObjectId===A6.DssGraphX2Body){BP=L;}else{BP=BN?A4:O;}}BG.rect=new Ap.Rect2D({x:0,y:0,width:BF+2*BH,height:BR+2*BH});switch(BK){case 0:switch(BP){case A4:BG.xOffset=BH+BJ;BG.yOffset=BQ-BH-BL;BG.rect.y=BQ-2*BH-BR;BG.rect.x=0;break;case O:BG.xOffset=BQ-BH-BJ;BG.yOffset=BO-BH-BL;BG.rect.y=BO-2*BH-BR;BG.rect.x=BQ-2*BH-BF;break;case A3:BG.xOffset=BM-BH-BJ;BG.yOffset=BQ-BH-BL;BG.rect.y=BQ-2*BH-BR;BG.rect.x=BM-2*BH-BF;break;case L:BG.xOffset=BQ-BH-BJ;BG.yOffset=BH+BL;BG.rect.y=0;BG.rect.x=BQ-2*BH-BF;break;}break;case 1:switch(BP){case A4:BG.xOffset=BH+BJ;BG.yOffset=BQ+BH+BL;BG.rect.y=BQ;BG.rect.x=0;break;case O:BG.xOffset=BQ+BH+BJ;BG.yOffset=BO-BH-BL;BG.rect.y=BO-2*BH-BR;BG.rect.x=BQ;break;case A3:BG.xOffset=BM-BH-BJ;BG.yOffset=BQ+BH+BL;BG.rect.y=BQ;BG.rect.x=BM-2*BH-BF;break;case L:BG.xOffset=BQ+BH+BJ;BG.yOffset=BH+BL;BG.rect.y=0;BG.rect.x=BQ;break;}break;}return BG;}function Ay(BJ,BP,BM,BK,BG,BH){var BN=BJ.rect,BL,BI,BF,BO;if(BN.y<0||BN.y+BN.height>BP){return false;}if(BN.x<0||BN.x+BN.width>BM){return false;}BL=BH.length;for(BI=0;BI<BL;++BI){BF=BH[BI].GetBoundingRect(true);if(BN.HasIntersection(BF)){return false;}}BL=BG.length;for(BI=0;BI<BL;++BI){BF=BG[BI].GetBoundingRect(true);if(BN.HasIntersection(BF)){return false;}}BL=BK.length;for(BI=0;BI<BL;++BI){BO=BK[BI];if(BO.mIsShown){BF=BO.GetBoundingRect(true);if(BN.HasIntersection(BF)){return false;}}}return true;}function AR(BH){var BK=this.mChartContextPtr,BV=BK.mGraphWidth,BZ=BK.mGraphHeight,BX=BK.mpGraphMatrixContext,BO=BH.mOptions.mAxisCustomValue,BM=BH.Key==="Y1"||BH.Key==="Y2",BP=this.mDatasetPtr.fetchShownLabels(BM),Ba=BP&&BP[BH.Key],BJ=Ba&&Ba.length,BN,BI=false,BW,Bd,BG,BL,BS,BF,BQ,BR,Bc,BY,BU,BT,Bb=BX.getPadding(Ak.kAxisOriginLabel);BS=Ap.gAxisObjects[BH.getIndex()].mCustomLabelId;for(BW=0;BW<BJ&&!BI;++BW){BN=Ba[BW];if(BN===BO){BI=true;}}if(BI){return ;}Bd=new Ap.NumberObject({TripleId:BS,GraphObjectManager:this,Number:BO,NumberFormat:BH.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BH.mCondenseLabels});if(Bd===null||Bd===undefined){return ;}BL=Bd;BG=Bd.mText;BL.SetText(BG);BF=BL.GetBoundingRect(true);BQ=BF.height;BR=BF.width;Bc=BH.ValueToPosition(BO);BY=false;for(BW=0;BW<=1&&!BY;++BW){BU={};BT=AL.call(this,BW,BQ,BR,Bc,BZ,BV,Bb,BH);BU.xOffset=BT.xOffset;BU.yOffset=BT.yOffset;BU.rect=BT.rect;BY=Ay.call(this,BU,BZ,BV,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(BY){BL.MoveTo(BU.xOffset,BU.yOffset,A2.CENTER);BL.mIsShown=true;this.mPostTrendLineObjects.push(BL);this.axisOriginLabels.push(BL);}}function AV(BK,BN,BG,BF,BL,BI){var BH={},BM=BN/2,BJ=BG/2;BH.rect=new Ap.Rect2D({x:0,y:0,width:BG+2*BI,height:BN+2*BI});switch(BK){case 0:BH.xOffset=BF+BI+BJ;BH.yOffset=BL-BI-BM;BH.rect.x=BF;BH.rect.y=BL-2*BI-BN;break;case 1:BH.xOffset=BF-BI-BJ;BH.yOffset=BL-BI-BM;BH.rect.x=BF-2*BI-BG;BH.rect.y=BL-2*BI-BN;break;case 2:BH.xOffset=BF-BI-BJ;BH.yOffset=BL+BI+BM;BH.rect.x=BF-2*BI-BG;BH.rect.y=BL;break;case 3:BH.xOffset=BF+BI+BJ;BH.yOffset=BL+BI+BM;BH.rect.x=BF;BH.rect.y=BL;break;}return BH;}function A0(BH){var BK=this.mChartContextPtr,BW=BK.mGraphWidth,Bb=BK.mGraphHeight,BY=BK.mpGraphMatrixContext,BF,BR,BT,BJ,BO,BM,BL,BZ,BU,BI,BN,BG,BQ,BS,Ba,BP,BV,BX,Bc=BY.getPadding(Ak.kAxisOriginLabel);BO=this.xAxis;BU=Ap.gAxisObjects[BO.getIndex()].mCustomLabelId;BF=BH?this.y1Axis:this.y2Axis;BR=BF.mOptions.mAxisCustomValue;BT=BF.ValueToPosition(BR);BJ=new Ap.NumberObject({TripleId:BU,GraphObjectManager:this,Number:BR,NumberFormat:BF.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BO.mCondenseLabels});BM=BO.mOptions.mAxisCustomValue;BL=BO.ValueToPosition(BM);BZ=new Ap.NumberObject({TripleId:BU,GraphObjectManager:this,Number:BM,NumberFormat:BO.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BO.mCondenseLabels});BI="("+BZ.mText+", "+BJ.mText+")";BN=new Ap.TextObject({TripleId:BU,GraphObjectManager:this,GraphCollectionObject:null});BN.SetText(BI);BG=BN.GetBoundingRect(true);BQ=BG.height;BS=BG.width;Ba=false;for(BX=0;BX<4&&!Ba;++BX){BP={};BV=AV.call(this,BX,BQ,BS,BL,BT,Bc);BP.xOffset=BV.xOffset;BP.yOffset=BV.yOffset;BP.rect=BV.rect;Ba=Ay.call(this,BP,Bb,BW,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(Ba){BN.MoveTo(BP.xOffset,BP.yOffset,A2.CENTER);BN.mIsShown=true;this.mPostTrendLineObjects.push(BN);this.axisOriginLabels.push(BN);}}function AN(){var BH=0,BG,BF,BI;BG=I.call(this,this.y1Axis);BF=I.call(this,this.y2Axis);BI=I.call(this,this.xAxis);if((BG||BF)&&BI){BH=true;}if(BH){A0.call(this,BG);}else{if(BG){AR.call(this,this.y1Axis);}if(BF){AR.call(this,this.y2Axis);}if(BI){AR.call(this,this.xAxis);}}}function l(BV,BU){var BM=this.mChartContextPtr,BP=null,BJ,BF,BN,BI,BL=BV.Id,BQ=BV.MarkerType,BO=BV.Shape,BH=BV.Position,BS=BV.Size,BG=[];if(BM.mIsGraphMatrix){var BR=BV.BoundingBox;if(U.call(this,BV)){if(this.waitingList===null){this.waitingList=[];}this.waitingList.push(BV);return[];}BJ=null;switch(BQ){case A9.DssGraphMarkerShapeGMTick:var BT=BM.transformRectToTicker(BR,true);if(BT.length>=2){BP=new Ap.StraightLineObject({TripleId:BL,GraphObjectManager:this,StartPoint:BT[0],EndPoint:BT[1],GraphCollectionObject:null,Shape:c._TICKER});}else{return[];}break;case A9.DssGraphMarkerShape2DPie:case A9.DssGraphMarkerShape2DRingPie:var BK=0;if(BQ===A9.DssGraphMarkerShape2DRingPie){BK=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new Ap.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BM,Layout:BK,PlotType:s.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}BF=this.mDatasetPtr.GetPieCountAtOneDataPoint(BL.mSeriesId,BL.mGroupId);for(BI=0;BI<BF;++BI){BN=this.mPieRenderer.drawSinglePie(BL.mSeriesId,BL.mGroupId,BI,BH,BF);BG=BG.concat(BN);}break;case A9.DssGraphMarkerShapeSquare:case A9.DssGraphMarkerShapeRectangle:BP=new Ap.RectangleObject({TripleId:BL,GraphObjectManager:this,GraphCollectionObject:null,Area:BR,Shape:BO});break;default:BP=new Ap.MarkerObject({TripleId:BL,GraphObjectManager:this,MarkerPosition:BH,MarkerShape:BQ,IsIsometric:true,MarkerSize:BS,GraphCollectionObject:BJ,IsDialogSize:false,Shape:BO});break;}}else{BP=new Ap.MarkerObject({TripleId:BL,GraphObjectManager:this,MarkerPosition:BH,MarkerShape:BQ,IsIsometric:true,MarkerSize:BS,GraphCollectionObject:BU,IsDialogSize:!this.isBubbleChart});}if(BP!==null&&BP!==undefined){BG.push(BP);this.AddToMap(BP);if(BU){BU.AddGraphObject(BP);}}return BG;}function BD(BV,BN,BF,BT,BO){var BG=this.VecSeriesInfo[BT].MarkerShape,BK=0,BM=this.VecSeriesInfo[BT].IsNullData.length,BU,BS,BR,BP,BH,BJ,BW,BI,BL,BQ;BQ=new Ap.TripleId({ObjectId:A6.DssGraphRiser,SeriesId:this.VecSeriesInfo[BT].SeriesID});BU=new Ap.GraphCollectionObject({TripleId:BQ,GraphObjectManager:this,CollectionType:AM.CT_GENERAL_SHAPE});for(BS=0;BS<BM;++BS){if(this.VecSeriesInfo[BT].IsNullData[BS]){continue;}BH=BF[BK];BJ=this.isBubbleChart?BO:BU;BW=new Ap.TripleId({ObjectId:A6.DssGraphRiser,SeriesId:this.VecSeriesInfo[BT].SeriesID,GroupId:BS});BP={MarkerShape:BG,Size:BH,Position:BN,Id:BW,MarkerType:this.VecSeriesInfo[BT].MarkerShape};BI=l.call(this,BP,BO);if(BI.length>0){for(BR=0;BR<BI.length;++BR){this.mGraphObjectList.push(BI[BR]);this.AddToMap(BI[BR]);BJ.AddGraphObject(BI[BR]);BL=BI[BR].GetBoundingRect();BV[BT].push(BL);}}}if(!this.isBubbleChart){this.AddToMap(BU);}}function A7(BK,BH,BJ){var BG,BI,BF;if(BK.length===0){return ;}if(this.VecSeriesInfo[BH].ConnectDataPoint){BG=this.isBubbleChart?null:BJ;BF=new Ap.TripleId({ObjectId:A6.DssGraphDataLine,SeriesId:this.VecSeriesInfo[BH].mSeriesId,GroupId:As});BI=new Ap.PolyLineObject({TripleId:BF,GraphObjectManager:this,PolyLine:BK,Parent:BG});this.mGraphObjectList.push(BI);this.AddToMap(BI);if(!this.isBubbleChart){BJ.AddGraphObject(BI);}}}function AA(BL,BG){Ar.call(this,BL);var BJ,BI,BO=this.VecSeriesInfo,BM=BO.length,BS=this.mDatasetPtr.GetGroupCount(),BR,BK,BQ,BH,BP,BN=false;for(BJ=0;BJ<BM;++BJ){BH=[];BP=[];var BF=BO[BJ].ShowDataLabel;BN=BN||BF;for(BI=0;BI<BS;++BI){BK=new Ap.Point2D();BR=Az.call(this,BJ,BI,BK);this.VecSeriesInfo[BJ].IsNullData.push(!BR);if(!BR){continue;}BQ=BC.call(this,BJ,BI);if(BQ===undefined){continue;}BH.push(BK);BP.push(BQ);}A7.call(this,BH,BJ,BL[BJ]);BD.call(this,BG,BH,BP,BJ,BL[BJ]);}return{IsLabelPossible:BN,MarkerRectangles:BG};}function AX(BQ){var BX,BU,BP=this.VecSeriesInfo,Bb=BP.length,BH=this.mDatasetPtr.GetGroupCount(),BG,Bg,BY,BK=this.mGraphObjectList,Bf=this.drawBySize,Ba=[],BL=false,BJ=this.mChartContextPtr,BZ=BJ.GetGraphMatrixContext(),BI=BZ.mMarkerShape,BS=BI===A9.DssGraphMarkerShape2DPie||BI===A9.DssGraphMarkerShape2DRingPie,BF=BJ.mPartialRendering,Be=[],BW=function BW(Bj,Bi){if(Bj.Size<Bi.Size){return 1;}if(Bj.Size>Bi.Size){return -1;}return 0;};for(BX=0;BX<Bb;++BX){var Bd=BP[BX].ShowDataLabel;BL=BL||Bd;for(BU=0;BU<BH;++BU){Bg=new Ap.Point2D();BG=Az.call(this,BX,BU,Bg);BP[BX].IsNullData.push(!BG);if(!BG){continue;}BY=BC.call(this,BX,BU);if(BY===undefined){continue;}var Bh=new Ap.TripleId({ObjectId:A6.DssGraphRiser,SeriesId:BP[BX].SeriesID,GroupId:BU});if(BJ.checkColorByAndSizeByValue(Bh,this.mDatasetPtr,this.mHasColorBy&&!BS,this.mHasSizeBy)===false){BP[BX].IsNullData[BP[BX].IsNullData.length-1]=true;continue;}var BR=H.call(this,BI,Bg,BY);BR.Id=Bh;BR.Position=Bg;BR.Size=BY;BR.MarkerType=BP[BX].MarkerShape;Ba.push(BR);++this.DPCount;if(this.seriesDPCount[BX]===undefined||this.seriesDPCount[BX]===null){this.seriesDPCount[BX]=1;}else{++this.seriesDPCount[BX];}}}if(Bf||BF){Ba.sort(BW);if(BF){Ba.reverse();}}var BT;for(BX=0;BX<Ba.length;BX++){var BM=l.call(this,Ba[BX],null);for(BT=0;BT<BM.length;++BT){var Bc=Ba[BX],BN=Bc.Id.mSeriesId,BO=Bc.Id.mGroupId;BI=Bc.MarkerType;var BV=BI===A9.DssGraphMarkerShape2DPie||BI===A9.DssGraphMarkerShape2DRingPie;BQ[BN][BO]=Bc.BoundingBox;if(BV){this.AddToMap(BM[BT]);}Be.push(BM[BT]);}}if(BF){Be.reverse();this.shapeCanvas=null;}for(BX=0;BX<Be.length;BX++){BK.push(Be[BX]);}return{IsLabelPossible:BL,MarkerRectangles:BQ};}function h(BJ,BK,BN,BM){var BH=this.mChartContextPtr,BL=BH.GetGraphMatrixContext(),BF,BI,BG;if(BH.mIsGraphMatrix&&!BM){BL=BH.GetGraphMatrixContext();if(BL.isPieOrRingShape()){BF=BL.GetMaxMarkerSize(Aj._PIE,true,1,this.isBubbleChart);}else{if(BL.mMarkerShape===A9.DssGraphMarkerShapeGMTick){BF=BL.GetMaxMarkerSize(Aj._TICK_VALUE,true,this.isBubbleChart);}else{BF=BL.GetMaxMarkerSize(Aj._SHAPES_IN_BUBBLESCATTER,false,0,this.isBubbleChart);}}return Math.round(BF);}BI=BJ.width;BG=BJ.height;return Math.round(Math.min(BI/BK+0.5,BG/BN+0.5)*0.5);}function j(){var BI,BF,BJ=this.mDatasetPtr.GetSeriesCount(),BH=this.mDatasetPtr.GetGroupCount(),BG;if(this.mDatasetPtr.GetSeriesByColumn()){BI=BH;BF=BJ;}else{BF=BH;BI=BJ;}if(BI*BF===0){return 0;}BG=h.call(this,this.mDataArea,BI,BF,false);if(BG<3){BG=3;}return BG;}mstrmojo.chart.ValuePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.ValuePlot",dataLabelLine:false,isBubbleChart:false,isSmarted:false,maxUnitRadius:-1,maxRadius:-10,minRadius:10000,labelFormat:Ae.DssGraphDataTextSeriesDependent|Ae.DssGraphDataTextLabel,labelLocation:Ag.DssGraphDTPositionCenter,xAxis:null,y1Axis:null,y2Axis:null,zAxis:null,VecSeriesInfo:[],standAloneMarkers:[],labelMatrix:[],drawBySize:false,mPieRenderer:null,mDataLabels:[],mTrendLineObjects:null,mReferenceLineObjects:null,waitingList:null,shapeCanvas:null,viewPort:null,init:function AU(BF){var BG;this._super(BF);BG=this.mChartContextPtr;this.xAxis=null;this.y1Axis=null;this.y2Axis=null;this.zAxis=null;this.VecSeriesInfo=[];this.standAloneMarkers=[];this.labelMatrix=[];this.isBubbleChart=(BG.GetGraphMajorType()===Al.GMT_BUBBLE);this.drawBySize=this.isBubbleChart&&this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];},OnRectangleSelection:function o(BN,BQ,BL){BL=BL||0;var BG=this.mChartContextPtr;if(BL===0&&this.waitingList){var BP=this.waitingList,BJ=BP.length,BI,BO,BM,BK,BF,BH=(BP[0].Shape===c._PIE)?"pie":"shape";for(BI=0;BI<BJ;BI++){BO=BP[BI].Position.x;BM=BP[BI].Position.y;if((BO>=BN.x&&BO<=BN.x+BN.width)&&(BM>=BN.y&&BM<=BN.y+BN.height)){BF=BP[BI].Id;BK=BG.getIdentity(BF,BH);BQ.push(BK);}}}},GenerateMapAndList:function AH(){var BF,BL=[],BK,BJ,BM=this.mChartContextPtr,BH=BM.mIsGraphMatrix,BG=this.VecSeriesInfo.length;this.maxUnitRadius=j.call(this);BF=[];for(BK=0;BK<BG;++BK){BF.push([]);}if(BM.mImageUsage!==AO.GENERAL){return ;}var BI;if(BH){BI=AX.call(this,BF);}else{BI=AA.call(this,BL,BF);}BF=BI.MarkerRectangles;BJ=BI.IsLabelPossible;Aw.call(this,BF,BJ);P.call(this);An.call(this);D.call(this);AN.call(this);},Draw:function At(){var BH=this.drawBySize,BJ=this.mChartContextPtr,BG=this.VecSeriesInfo.length;if(BH){var BF=[],BI;for(BI=0;BI<BG;BI++){BF[BI]=0;}BJ.setDrawingOrderToCanvas(BF);}Ap.GraphObjectManager.prototype.Draw.apply(this,[]);p.call(this);X.call(this);this.DrawPostTrendLineObjects();},AssignValueAxis:function T(BG,BF){switch(BF){case 0:this.xAxis=BG;break;case 1:this.y1Axis=BG;break;case 2:this.y2Axis=BG;break;case 3:this.zAxis=BG;break;default:break;}},AssignSeriesInfo:function Y(BH,BK){var BG=BH.length,BJ,BI,BF;for(BF=0;BF<BG;++BF){BI=Av.call(this);this.VecSeriesInfo.push(BI);BJ=BH[BF];this.VecSeriesInfo[BF].SeriesID=BJ;this.VecSeriesInfo[BF].ValueAxisIndex=BK[BJ];}this.LoadProperties();},GetMaxElementRadius:function AQ(){var BG=new Ap.TripleId(),BF=this.mChartContextPtr.GetProperty(Au.DssGraphMatrixUsePerfectPadding,BG);if(BF===null||BF===undefined){return 0;}return this.maxUnitRadius;},GetMaxElementOffsetClippedByBoundary:function V(BH,BT){var Bd={LowOffset:0,HighOffset:0},BK=this.mChartContextPtr,BZ=BK.GetGraphMatrixContext(),BU,BM,Bf,BL,BS,BR,BQ,BP,BX,BJ,BW,BV,BI,BY;if(BT===undefined){BT=true;}if(!BK.mIsGraphMatrix){return Bd;}var BG=BH?(BT?"X1":"X2"):(BT?"Y1":"Y2"),BF=this.mClippedElementSize;if(BF[BG]!==undefined){return BF[BG];}if(this.maxUnitRadius<0){this.maxUnitRadius=j.call(this);}BX=this.mDatasetPtr.GetSeriesCount();BJ=this.mDatasetPtr.GetGroupCount();var BO={LowOffset:0,HighOffset:0};var BN={LowOffset:0,HighOffset:0};for(BW=0;BW<BX;++BW){for(BV=0;BV<BJ;++BV){Af.Reset(0,0);BI=Az.call(this,BW,BV,Af);if(!BI){continue;}BY=BC.call(this,BW,BV);if(BY===undefined){continue;}var Be=0,Bb=0;var Bc=0,Ba=0;Bd={LowOffset:0,HighOffset:0};BU=this.xAxis;BM=this.y1Axis;if(BU===null||BM===null){BF[BG]=Bd;return ;}Bf=BU.GetMaxMinDataInput();BL=BM.GetMaxMinDataInput();BS=BU.GetPositionByValue(Bf.Min);BR=BM.GetPositionByValue(BL.Min);if(BS===null||BR===null){BF[BG]=Bd;return ;}BQ=BU.GetPositionByValue(Bf.Max);BP=BM.GetPositionByValue(BL.Max);if(BQ===null||BP===null){BF[BG]=Bd;return ;}Be=BO.LowOffset;Bb=BO.HighOffset;BO=BZ.getClippedOffset(BS,BQ,BY,Af,true,Be,Bb);Be=Math.max(BO.LowOffset,Be);Bb=Math.max(BO.HighOffset,Bb);BF.X1=BO;Bc=BN.LowOffset;Ba=BN.HighOffset;BN=BZ.getClippedOffset(BR,BP,BY,Af,false,Bc,Ba);Bc=Math.max(BN.LowOffset,Bc);Ba=Math.max(BN.HighOffset,Ba);BF.Y1=BN;}}if(BF.X1){BF.X2=mstrmojo.hash.copy(BF.X1);}else{BF.X1=BF.X2={LowOffset:0,HighOffset:0};}if(BF.Y1){BF.Y2=mstrmojo.hash.copy(BF.Y1);}else{BF.Y1=BF.Y2={LowOffset:0,HighOffset:0};}return BF[BG];},refresh:function Ao(BF,BG){if(BF==="clipping"){this.mDataArea.width=this.mChartContextPtr.mGraphWidth;this.mDataArea.height=this.mChartContextPtr.mGraphHeight;this.maxUnitRadius=-1;this.mClippedElementSize={};}else{}},LoadProperties:function Ab(){var BH,BL,BF,BK=this.isBubbleChart?A5.DssGraphShowSDLine:A5.DssGraphShowLine,BJ,BM=this.mChartContextPtr,BG=BM.GetGraphMatrixContext(),BI=BM.mIsGraphMatrix;for(BJ=0;BJ<this.VecSeriesInfo.length;++BJ){BH=this.VecSeriesInfo[BJ];BF=new Ap.TripleId({ObjectId:A6.DssGraphRiser,SeriesId:BH.SeriesID});if(BI){BH.MarkerShape=BG.mMarkerShape;}else{BL=BM.GetProperty(A5.DssGraphSDMarkerShape,BF);if(BL){BH.MarkerShape=BL;}else{BH.MarkerShape=A9.DssGraphMarkerShapeCircle;}}switch(BH.MarkerShape){case A9.DssGraphMarkerShapeCircle:case A9.DssGraphMarkerShapeRectangle:case A9.DssGraphMarkerShapeSquare:case A9.DssGraphMarkerShape2DPie:case A9.DssGraphMarkerShape2DRingPie:break;default:this.drawBySize=false;break;}if(BM.mImageUsage!==0){return ;}BL=BM.GetProperty(BK,BF);if(BL){BH.ConnectDataPoint=BL;}BL=BM.GetProperty(A5.DssGraphSDShowDataText,BF);if(BL){BH.ShowDataLabel=BL;}if(BI){BH.ShowDataLabel=this.mDatasetPtr.showSeriesDatalabel(BF.mSeriesId);}this.LoadTrendLineProperties(this.VecSeriesInfo[BJ].SeriesID,BH.TrendLineOptions);}BL=BM.GetProperty(A5.DssGraphNewUseSmartLabels,AD);if(BL){this.isSmarted=BL;}BL=BM.GetProperty(A5.DssGraphAxisDataTextPlace,AD);if(BL){this.labelLocation=BL;}BL=BM.GetProperty(A5.DssGraphShowDataText,AD);if(BL){this.labelFormat=BL;}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumAnchorPoint","EnumGraphMatrixMarkerTypeInChart","EnumLineStyle","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode","EnumCollectionType","EnumFontStyle");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","PiePlotRenderer","Rect2D","Vector2D","NumberObject","MarkerObject","FormatFill","Point2D","GMDataLabelInfo");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure","mstrmojo.VisUtility");var AT=mstrmojo.chart,Y=AT.common,P=AT.enums,AP=AT.ChartConstants,AB=mstrmojo.VisUtility,AY=P.EnumLayout,AD=P.EnumOrientation,AA=P.EnumValueAxis,Ac=P.EnumAnchorPoint,AN=P.EnumGraphMatrixMarkerTypeInChart,AW=P.EnumAxisDirection,z=P.EnumImageUsage,a=P.EnumGraphMatrixPiePlotType,y=P.EnumCollectionType;var AM=AT.model,AC=AM.enums,Ag=AC.EnumDSSGraphMarkerShape,O=AC.EnumDSSGraphRegressionType,AL=AC.EnumDSSGraphDataTextPosition,U=AC.EnumShapeType,AF=P.EnumGraphMatrixElementSizeMode,Af=AC.EnumDSSGraphObject,E=P.EnumFontStyle;var D=AT.common.Utility;var AR=1e-10,v=0.00001,w=2,G=3,n=1,l=2,k=3,h=4,f=5,d=6;var r=new AT.ChartAdvFormat(),Aa=new AT.Point2D(),x=new AT.Point2D(),L=new AT.Point2D();function W(Am,Al){var An;if(Am.cannotFitVertically===true&&Al.cannotFitVertically===false){return 1;}if(Am.cannotFitVertically===false&&Al.cannotFitVertically===true){return -1;}if(Am.cannotFitHorizontally===true&&Al.cannotFitHorizontally===false){return 1;}if(Am.cannotFitHorizontally===false&&Al.cannotFitHorizontally===true){return -1;}An=Am.overlapRefLabelCount-Al.overlapRefLabelCount;if(An<0){return -1;}if(An>0){return 1;}An=Am.overlapRefLineCount-Al.overlapRefLineCount;if(An<0){return -1;}if(An>0){return 1;}An=Am.overlapDataLabelCount-Al.overlapDataLabelCount;return An;}function q(Al){switch(Al){case U._CIRCLE:return Ag.DssGraphMarkerShapeCircle;case U._RECTANGLE:return Ag.DssGraphMarkerShapeRectangle;case U._SQUARE:return Ag.DssGraphMarkerShapeSquare;case U._TICKER:return Ag.DssGraphMarkerShapeGMTick;default:return Ag.DssGraphMarkerShapeNone;}}function Aj(An,Am,Ar,Ay,Ao,Al,Aw){var At=-1,As=-1,Av=-1,Au=new AT.Point2D({x:-1,y:-1}),Aq=this.mpABLPlotContext,Ap=Aq.mCategoryAxisPtr,Ax=Aq.mValueAxis;if(this.mIsVertical){At=Ap.getSubGroupMiddlePos(Am,Ay,Al);Av=Ax[this.mSeriesInfo[An].mValueAxis].GetPositionByValue(Ar);if(Av!==null){As=Av;}}else{As=Ap.getSubGroupMiddlePos(Ar,Ao,Aw);Av=Ax[this.mSeriesInfo[An].mValueAxis].GetPositionByValue(Am);if(Av!==null){At=Av;}}if(At>=0&&As>=0){Au.x=At;Au.y=As;}return Au;}function e(Ax,Ap,Az,Am){var Ao=0,Ar,Al,Aq,An=1,Au=1,Ay,At,Av=[Ax,Ap,Az];if(this.mPieCentersPool===null){this.mPieCentersPool=new Y.MapStructure();}var As=this.mPieCentersPool.find(Av);if(As!==null&&As!==undefined){return As;}Ay=Am||this.mDatasetPtr.GetPieCountAtOneDataPoint(this.mSeriesInfo[Ax].mSeriesId,Ap);if(this.mIsVertical){An=Ay;}else{Au=Ay;}At=this.GetData(Ax,Ap);if(At!==null){Ao=At;}Al=this.mSeriesInfo[Ax].mSeriesId;Ar=Ap;Aq=Az;if(this.mIsVertical){var Aw;Aw=Ao;Ao=Ar;Ar=Aw;Aw=Al;Al=Aq;Aq=Aw;}As=Aj.call(this,Ax,Ao,Ar,Al,Aq,An,Au);this.mPieCentersPool.replace(Av,As);return As;}function Z(){var Am=this.mTrendLineObjects.length,Al;for(Al=0;Al<Am;++Al){this.mTrendLineObjects[Al].Draw();}}function R(){var Am=this.mReferenceLineObjects.length,Al;for(Al=0;Al<Am;++Al){this.mReferenceLineObjects[Al].Draw();}}function B(An){var Am,Al=0;for(Am=0;Am<An.length;Am++){if(An[Am]!==null){Al++;}}return Al;}function j(Ao,An,Au,Aw,As,Am){var Aq,Ap,Al,Av,Ax,Ar,At;if(this instanceof mstrmojo.chart.BarSeriesRenderer){Aq={groupID:An,seriesInfoID:Ao,groupIndex:0,useFloat:!Am};if(Am){Ap=this.GetRiserStartPosAndSize(Aq);Av=Aw.GetPositionByValue(Au);}else{Ap=this.GetRiserStartPosAndSize(Aq);Av=Aw.GetFloatPositionByValue(Au);}Al=Ap.Start+Ap.Size/2;}else{if(this instanceof mstrmojo.chart.AreaSeriesRenderer||this instanceof mstrmojo.chart.LineSeriesRenderer){if(Am){Al=this.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(An);Av=Aw.GetPositionByValue(Au);}else{Al=this.mpABLPlotContext.mCategoryAxisPtr.getFloatGroupMiddlePos(An);Av=Aw.GetFloatPositionByValue(Au);}}}Ax=As?Al:Av;Ar=As?Av:Al;At=new AT.Point2D({x:Ax,y:Ar});return At;}function b(Aq){var Ao,Al,An,Ap,Am,Ar;An=Aq.length;if(An<=2){Al=Aq;}else{Al=[];Al.push(Aq[0]);for(Ao=0;Ao+2<An;++Ao){Ar=false;if((Math.abs(Aq[Ao].x-Aq[Ao+1].x)>AR)&&(Math.abs(Aq[Ao+1].x-Aq[Ao+2].x)>AR)){Ap=(Aq[Ao+1].y-Aq[Ao].y)/(Aq[Ao+1].x-Aq[Ao].x);Am=(Aq[Ao+2].y-Aq[Ao+1].y)/(Aq[Ao+2].x-Aq[Ao+1].x);if(Math.abs(Ap-Am)<v){Ar=true;}}else{if((Math.abs(Aq[Ao].x-Aq[Ao+1].x)<=AR)&&(Math.abs(Aq[Ao+1].x-Aq[Ao+2].x)<=AR)){Ar=true;}else{if((Math.abs(Aq[Ao].x-Aq[Ao+1].x)>AR)&&(Math.abs(Aq[Ao+1].x-Aq[Ao+2].x)<=AR)){if(Math.abs(Aq[Ao+1].y-Aq[Ao+2].y)<=AR){Ar=true;}}}}if(!Ar){Al.push(Aq[Ao+1]);}}Al.push(Aq[An-1]);}return Al;}function o(Ao,Av,Ar,Al,An,Au,At,Aq,Ap,As){var Am={};Am.rect=new AT.Rect2D({x:0,y:0,width:Al+2*Ap,height:Av+2*Ap});switch(Ao){case n:if(As){Am.xOffset=Au+Ap+An;Am.yOffset=Ap+Ar;Am.rect.x=Au;Am.rect.y=0;}else{Am.xOffset=Aq-Ap-An;Am.yOffset=Au-Ap-Ar;Am.rect.x=Aq-2*Ap-Al;Am.rect.y=Au-2*Ap-Av;}break;case l:if(As){Am.xOffset=Au-Ap-An;Am.yOffset=Ap+Ar;Am.rect.x=Au-2*Ap-Al;Am.rect.y=0;}else{Am.xOffset=Aq-Ap-An;Am.yOffset=Au+Ap+Ar;Am.rect.x=Aq-2*Ap-Al;Am.rect.y=Au;}break;case k:if(As){Am.xOffset=Au+Ap+An;Am.yOffset=At/2;Am.rect.x=Au;Am.rect.y=At/2-Ap-Ar;}else{Am.xOffset=Aq/2;Am.yOffset=Au-Ap-Ar;Am.rect.x=Aq/2-Ap-An;Am.rect.y=Au-2*Ap-Av;}break;case h:if(As){Am.xOffset=Au-Ap-An;Am.yOffset=At/2;Am.rect.x=Au-2*Ap-Al;Am.rect.y=At/2-Ap-Ar;}else{Am.xOffset=Aq/2;Am.yOffset=Au+Ap+Ar;Am.rect.x=Aq/2-Ap-An;Am.rect.y=Au;}break;case f:if(As){Am.xOffset=Au+Ap+An;Am.yOffset=At-Ap-Ar;Am.rect.x=Au;Am.rect.y=At-2*Ap-Av;}else{Am.xOffset=Ap+An;Am.yOffset=Au-Ap-Ar;Am.rect.x=0;Am.rect.y=Au-2*Ap-Av;}break;case d:if(As){Am.xOffset=Au-Ap-An;Am.yOffset=At-Ap-Ar;Am.rect.x=Au-2*Ap-Al;Am.rect.y=At-2*Ap-Av;}else{Am.xOffset=Ap+An;Am.yOffset=Au+Ap+Ar;Am.rect.x=0;Am.rect.y=Au;}break;}return Am;}function AQ(Ap,Aw,As,Aq,An,Al){var At=Ap.rect,Ar,Ao,Am,Au,Av;if(At.y<0||At.y+At.height>Aw){Ap.cannotFitVertically=true;return ;}if(At.x<0||At.x+At.width>As){Ap.cannotFitHorizontally=true;}Ar=An.length;for(Ao=0;Ao<Ar;++Ao){Am=An[Ao].GetBoundingRect();if(At.HasIntersection(Am)){++Ap.overlapRefLabelCount;}}Ar=Al.length;for(Ao=0;Ao<Ar;++Ao){Av=Al[Ao];if(Av.isVertical){if(At.x<Av.position&&At.x+At.width>Av.position){++Ap.overlapRefLineCount;}}else{if(At.y<Av.position&&At.y+At.height>Av.position){++Ap.overlapRefLineCount;}}}Ar=Aq.length;for(Ao=0;Ao<Ar;++Ao){Au=Aq[Ao];if(Au.mIsShown){Am=Au.GetBoundingRect();if(At.HasIntersection(Am)){++Ap.overlapDataLabelCount;Ap.overlapDataLabels.push(Aq[Ao]);}}}}function t(A8,A3,At){var An=this.mChartContextPtr,A7=An.GetGraphMatrixContext(),Am=A7.getPadding(AP.kRefLabel),As=At.length,Aq,Ar,A0,Ax,Ap,Ay,Al,A5,A4,A1,Ao,Av,A2,Az,A6,Au=this.mpABLPlot.shownDataLabels,Aw=this.mpABLPlot.shownRefLabels;for(A5=0;A5<As;++A5){Aq=At[A5];Ar=new AT.TextObject({TripleId:Aq.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:Aq.identity});if(Ar!==null){Ar.SetText(Aq.labelText);for(A4=0;A4<2;++A4){if(A4===1){Ao=Ar.mText;Ar.SetText(Ao[0]+"...");Ar.rect.height=0;Ar.rect.width=0;}Al=Ar.GetBoundingRect();Ax=Al.height;Ay=Ax/2;A0=Al.width;Ap=A0/2;Az=[];for(A1=n;A1<=d;++A1){Av={};Av.position=A1;Av.cannotFitVertically=false;Av.cannotFitHorizontally=false;Av.overlapRefLabelCount=0;Av.overlapRefLineCount=0;Av.overlapDataLabelCount=0;Av.overlapDataLabels=[];A2=o.call(this,A1,Ax,Ay,A0,Ap,Aq.position,A8,A3,Am,Aq.isVertical);Av.xOffset=A2.xOffset;Av.yOffset=A2.yOffset;Av.rect=A2.rect;AQ.call(this,Av,A8,A3,Au,Aw,At);Az.push(Av);}Az.sort(W);if(Az[0].cannotFitVertically){break;}if(Az[0].cannotFitHorizontally){if(A5===0){continue;}else{break;}}Ar.MoveTo(Az[0].xOffset,Az[0].yOffset,Ac.CENTER);Ar.mIsShown=true;A6=Az[0].overlapDataLabelCount;for(A1=0;A1<A6;++A1){Az[0].overlapDataLabels[A1].mIsShown=false;}this.mpABLPlot.mPostTrendLineObjects.push(Ar);Aw.push(Ar);break;}}}}mstrmojo.chart.SeriesRenderer=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.SeriesRenderer",mDeviceDataArea:null,mpABLPlot:null,mGroupCount:0,mSeriesCount:0,mDatasetPtr:null,mLegendPtr:null,mSeriesInfo:null,mCumulateData:null,mSeriesNumber:null,mTextCollection:null,mTrendLineObjects:null,mReferenceLineObjects:null,mpABLPlotContext:null,mIsVertical:true,mUseDepth:false,mHasNegativeValue:false,mDepth:0,mDepthDirection:0,mStartLevel:0,mGroupIdMapPerSeries:[],mHasSizeBy:false,mHasColorBy:false,mClippedMarkerSize:null,mPieRenderer:null,mPieCentersPool:null,renderSequence:null,init:function AE(Am){this._super(Am);this.mSeriesInfo=[];this.mCumulateData=[[],[]];this.mClippedMarkerSize={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};this.mSeriesNumber=[0,0];this.mTextCollection=[];this.mTrendLineObjects=[];this.mReferenceLineObjects=[];this.mDatasetPtr=Am.DataSet;this.mLegendPtr=Am.Legend;this.mDepth=0;this.mDepthDirection=0;this.mHasNegativeValue=false;this.mpABLPlot=this.mpManager;this.mGroupCount=this.mDatasetPtr.GetGroupCount();var Ao=this.mpABLPlotContext=this.mpABLPlot.mABLPlotContext;this.mIsVertical=(Ao.mABLOptions.mOrientation===AD.OR_VERTICAL);this.mUseDepth=Ao.mABLOptions.mUseDepth;if(this.mUseDepth){this.mDepth=this.mpABLPlot.unitLevelDepth;this.mDepthDirection=Ao.mABLOptions.mDepthDirection;}var An=this.mChartContextPtr,Al=An.GetGraphMatrixContext();this.mHasSizeBy=Al.mHasSizeBy;this.mHasColorBy=Al.mHasColorBy;this.renderSequence=[];},AddSeries:function Ai(Am,Ao,Al,An){this.mSeriesInfo.push({mSeriesId:Am,mSeriesIndex:Ao,mDataIndex:Al,mValueAxis:An});++this.mSeriesNumber[An];},GetMinMaxValue:function Q(A1,Ap,Aw,At){var Am=this.mChartContextPtr,As,Ay,Az,Av=[],Aq,Ao,An,A0=this.mSeriesInfo,Au,Al;if(A0.length===0){return{Min:Ap,Max:Aw,AreInitialized:At};}if(Am.mIsUniformAxisMode){var Ar=Am.getUniformAxisContext(),Ax=Ar.ValueAxis;if(Am.IsVertical()===false){if(A1===0){return{Min:Ax.X1.Min,Max:Ax.X1.Max,AreInitialized:true};}else{return{Min:Ax.X2.Min,Max:Ax.X2.Max,AreInitialized:true};}}if(A1===0){return{Min:Ax.Y1.Min,Max:Ax.Y1.Max,AreInitialized:true};}return{Min:Ax.Y2.Min,Max:Ax.Y2.Max,AreInitialized:true};}As=Am.mIsTimeSeriesChart&&this.mpABLPlotContext.mABLOptions.mUseGlobalAutoScale;Ay=0;Az=this.mDatasetPtr.GetDataGroup();for(Aq=0;Aq<A0.length;++Aq){if(A0[Aq].mValueAxis===A1){if(As){Av.push(A0[Aq].mSeriesId);}else{for(Ao=0;Ao<this.mGroupCount;++Ao){for(An=0;An<Az;++An){Ay=this.GetData(Aq,Ao,false,An);if(Ay!==null){continue;}if(!At){At=true;Ap=Ay;Aw=Ay;}else{Aw=Math.max(Ay,Aw);Ap=Math.min(Ay,Ap);}}}}}}if(As&&Av.length!==0){Au=0;Al=0;Ay=this.mDatasetPtr.GetPeakValuesAcrossSeries(Al,Au,Av,0);Aw=(Ay.Max>Aw)?Ay.Max:Aw;Ap=(Ay.Min<Ap)?Ay.Min:Ap;At=true;}return{Min:Ap,Max:Aw,AreInitialized:At};},GetData:function AH(Ar,As,Ap,Am){var Aw=this.mpABLPlotContext,Au=Aw.mABLOptions,Ao=this.mpABLPlot,Av=Au.mLayout,Az=this.mSeriesInfo,Aq=this.mDatasetPtr,Ax=Az[Ar].mValueAxis,Ay,At,Al,An;Ap=Ap||false;Am=Am||0;if((Av===AY.LO_STACKED)||(Av===AY.LO_PERCENT)){Ay=this.hGetCumulateData(Ax,Az[Ar].mDataIndex,As);At=Aq.GetData(Az[Ar].mSeriesId,As,Am);if(At!==null){if(Ap){Al=Aw.mValueAxis[Ax].GetBaseValue();Ay=(Ay-Al-At)+Al;if(D.AlmostZero(Ay)){Ay=0;}}if(Av===AY.LO_PERCENT){An=Ao.getGroupTotals(As,Ax);if(An===0){Ay=0;}else{Ay/=An;}}return Ay;}if(Av===AY.LO_PERCENT){An=Ao.getGroupTotals(As,Ax);if(An===0){Ay=0;}else{Ay/=An;}}return null;}At=Aq.GetData(Az[Ar].mSeriesId,As,Am);if(At!==null){Ay=At;}else{Ay=null;}return Ay;},SetDeviceDataArea:function I(Al){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AT.Rect2D({Rect2D:Al});}else{this.mDeviceDataArea.ResetRect(Al);}}},IsReverseSeriesOrder:function c(An){var Al=this.mpABLPlotContext.mValueAxis,Am;if(An>=Al.length){return false;}Am=Al[An];return this.mChartContextPtr.IsReverseSeriesOrder(Am,this.mIsVertical,this.mDepthDirection);},IsReverseGroupOrder:function p(){return this.mChartContextPtr.IsReverseGroupOrder(this.mIsVertical,this.mDepthDirection);},PriorToNextSeries:function N(Am){var Ap=this.mChartContextPtr,An,Ao,Al=false;An=this.mIsVertical?new AT.Vector2D({x:1,y:0}):new AT.Vector2D({x:0,y:1});Ao=Ap.normalDirection(Am,this.mDepthDirection)*Ap.normalDirection(An,this.mDepthDirection);if(Ao===0){Al=this.mIsVertical?(Am.y>0):(Am.x<0);}else{Al=Ao>0;}return Al;},CreateTotalLabel:function S(As,Am,Aq){var At=this.mSeriesInfo,Ap=true,Ao=0,An,Ar,Al;for(An=0;An<At.length;++An){if(At[An].mValueAxis===As&&this.mpABLPlotContext.mSeriesOptions[At[An].mSeriesIndex].mShowDataLabels){Ar=this.mDatasetPtr.GetData(At[An].mSeriesId,Am);if(Ar!==null){Ao+=Ar;if(Ap){Ap=false;}}}}if(Ap){return null;}Al=new AT.NumberObject({TripleId:new AT.TripleId({ObjectId:401,SeriesId:As,GroupId:Am}),GraphObjectManager:this,Number:Ao,NumberFormat:this.mpABLPlotContext.mSeriesOptions[0].mGraphNumberFormat,GraphCollectionObject:Aq,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr});this.AddToMap(Al);Aq.AddGraphObject(Al);return Al;},GetUpmostIndexByValueAxisAndGroup:function M(Ar,Ao){var Ap=this.mSeriesInfo,Am,An,Aq,Al;Am=-1;Al=Ap.length;for(An=Al-1;An>-1;--An){if(Ap[An].mValueAxis===Ar){Aq=this.mDatasetPtr.GetData(Ap[An].mSeriesId,Ao);if(Aq!==null){Am=An;if(Aq>0){break;}}}}return Am;},createRiserLabel:function AU(Al,Am,Ap){var Au=this.mSeriesInfo,At=Au[Al],Ao=this.mpABLPlotContext.mABLOptions,An,Aq,As=null,Ar="";An=this.mDatasetPtr.GetData(At.mSeriesId,Am);if(An===null){return null;}Aq=0;if(((Ao.mLayout===AY.LO_STACKED)||(Ao.mLayout===AY.LO_PERCENT))&&(!Ao.mShowCumulate)){Aq=An;if(Ao.mLayout===AY.LO_PERCENT&&Ao.mShowAsPercentage){Aq/=this.mpABLPlot.getGroupTotals(Am,At.mValueAxis);}}else{if(Ao.mLayout===AY.LO_PERCENT&&!Ao.mShowAsPercentage){Aq=this.hGetCumulateData(At.mValueAxis,At.mDataIndex,Am);}else{Aq=this.GetData(Al,Am);if(Aq===null||Aq===undefined){return null;}}}Ao.mShowValue=true;if(Ao.mShowValue){As=this.mpABLPlotContext.mSeriesOptions[At.mSeriesIndex].mGraphNumberFormat;}if(Ao.mShowLabel){Ar=this.mDatasetPtr.GetSeriesLabel(At.mSeriesId,false);}return this.mpABLPlot.createRiserLabel(new AT.TripleId({ObjectId:Af.DssGraphDataText,SeriesId:At.mSeriesId,GroupId:Am}),Aq,As,Ar,Ap);},AddTextToMapAndList:function AJ(){},GetIndexFromSeriesId:function Ak(Ao){var An=this.mSeriesInfo,Al=An.length,Am;for(Am=0;Am<Al;++Am){if(An[Am].mSeriesId===Ao){return Am;}}return -1;},AddLegendMarkerToCollection:function u(Ap,Am,Al,An,Ao,Aq){Al=Al||false;An=(An===undefined)?true:An;Ao=Ao||Ag.DssGraphMarkerShapeRectangle;Aq=(Aq===undefined)?true:Aq;this.mpABLPlot.AddLegendMarkerToCollection(this.mSeriesInfo[Ap].mSeriesId,Am,Al,An,Ao,Aq);},MoveLabel:function AO(Az,Ay,A7,A5,Al){var A3=this.mSeriesInfo,A0=this.mpABLPlotContext.mABLOptions,BA,Au,A9,As,Ax,Ar,Am,At,A2,A4,Aq,Ap,Ao,A6,A8,An,Aw,Av,A1,BB;if(Ay===null||Ay===undefined){return ;}BA=this.mpABLPlotContext.mValueAxis[A3[Al].mValueAxis].IsReverseOrder();Au=BA;A9=BA?-1:1;As=0;BB=this.GetData(Al,Az);if(BB!==null&&BB!==undefined){As=BB;}if(BB&&(As<0)){A9=-A9;Au=!Au;}x.Reset(A7.x,A7.y);L.Reset(A5.x,A5.y);Ax=x;Ar=L;if(this.mIsVertical){if(Au){if(Ax.y<Ar.y){Ax.swapPoints(Ar);}}else{if(Ar.y<Ax.y){Ax.swapPoints(Ar);}}}else{if(Au){if(Ar.x<Ax.x){Ax.swapPoints(Ar);}}else{if(Ax.x<Ar.x){Ax.swapPoints(Ar);}}}Am=Ay.GetBoundingRect();At=Math.floor(Am.width/2);A2=Math.floor(Am.height/2);Aa.Reset(Ax.x,Ax.y);A4=Aa;Aq=Ay.mTripleId;Ap=(Aq.mObjectId===Af.DssGraphDataTextStackTotal);Ao=Ap?AL.DssGraphDTPositionOutMax:A0.mTextPosition;if(Ao===AL.DssGraphDTPositionOutMin||Ao===AL.DssGraphDTPositionInMin){A4.x=Ar.x;A4.y=Ar.y;}switch(Ao){case AL.DssGraphDTPositionCenter:A4.x=(A4.x+Ar.x)/2;A4.y=(A4.y+Ar.y)/2;break;case AL.DssGraphDTPositionInMin:case AL.DssGraphDTPositionOutMax:if(this.mIsVertical){A4.y-=A2*A9;}else{A4.x+=At*A9;}break;case AL.DssGraphDTPositionOutMin:case AL.DssGraphDTPositionInMax:if(this.mIsVertical){A4.y+=A2*A9;}else{A4.x-=At*A9;}break;default:break;}if(Ap&&A0.mTextPosition===AL.DssGraphDTPositionOutMax){A6=this.GetUpmostIndexByValueAxisAndGroup(AA.VA_Y1,Az);A8=this.mpManager.GetGraphObject(new AT.TripleId({ObjectId:Af.DssGraphDataText,SeriesId:A3[A6].mSeriesId,GroupId:Az}));if(!A8){Ay.MoveTo(A4.x,A4.y,Ac.CENTER);return ;}An=A8.GetBoundingRect();Aw=A8.GetFormatFont();Av=Ay.GetFormatFont();A1=Aw.mFontSize+Av.mFontSize;if(this.mIsVertical){if(Aw.isHorizontal()||Av.isHorizontal()){A4.y-=Math.floor(An.height+A1/3)*A9;}else{if(Aw.isVertical()){A4.x+=A1;}else{A4.x+=Math.floor(A1*Math.SQRT2);}}}else{if(Aw.isVertical()||Av.isVertical()){A4.x+=Math.floor(An.width+A1/3)*A9;}else{if(Aw.isHorizontal()){A4.y+=A1;}else{A4.y+=Math.floor(A1*Math.SQRT2);}}}}Ay.MoveTo(A4.x,A4.y,Ac.CENTER);},updateGroupStackInfoWithBase:function AI(Aw,Ap,A0){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}function Az(A5,A4){var A3=A4+1;for(;A3<A5.length;A3++){if(A5[A3]!==null&&A5[A3]!==undefined){return Math.min(A5[A3],A0);}}return A0;}function Aq(A5,A4){var A3=A4-1;for(;A3>=0;A3--){if(A5[A3]!==null&&A5[A3]!==undefined){return Math.max(A5[A3],A0);}}return A0;}var As=this.mStackedGroupInfos,Am;if(As[Aw]&&As[Aw][Ap]){return As[Aw][Ap];}var Ax=As[Aw],Au,A1=[],An=this.mSeriesInfo,Av=An.length;var Ar=[],At=[];for(Au=0;Au<Av;Au++){var Ao=this.GetData(Au,Ap),A2={Min:Ao,Max:Ao,SeriesIndex:Au};(Ao>=0)?Ar.push(A2):At.unshift(A2);}Am=At.concat(Ar);var Al=[],Ay=-1;for(Au=0;Au<Am.length;Au++){A1[Am[Au].SeriesIndex]=Au;Al.push(Am[Au].Max);}for(Au=0;Au<Am.length;Au++){if(Am[Au].Max!==null&&Am[Au].Max!==undefined){if(Am[Au].Max>=A0){Am[Au].Min=Aq(Al,Au);}else{Am[Au].Max=Az(Al,Au);}}}Ax[Ap]=Am;As[Aw+2][Ap]=A1;return Ax[Ap];},getGroupStackedInformation:function AS(Ax,Ar){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}var Ao=this.mStackedGroupInfos;if(Ao[Ax]&&Ao[Ax][Ar]){return Ao[Ax][Ar];}var Al=Ao[Ax],At,Am=[],Au=this.mSeriesInfo,Aq=Au.length;var As=[],Ap=[];for(At=0;At<Aq;At++){var Av=this.GetData(At,Ar,true),Aw=this.GetData(At,Ar),An={Min:Math.min(Av,Aw),Max:Math.max(Av,Aw),SeriesIndex:At};(Aw>=0)?As.push(An):Ap.unshift(An);}Al[Ar]=Ap.concat(As);for(At=0;At<Al[Ar].length;At++){Am[Al[Ar][At].SeriesIndex]=At;}Ao[Ax+2][Ar]=Am;return Al[Ar];},getSeriesOffsetIntoStackedInfo:function J(Ar,Ao,Am){var Aq=this.mStackedGroupInfos;if(Aq[Ar+2]&&Aq[Ar+2][Ao]){return Aq[Ar+2][Ao][Am];}var Al=Aq[Ar],Ap=Al[Ao],An;for(An=0;An<Ap.length;An++){if(Ap[An].SeriesIndex===Am){return An;}}return Am;},analyzeGroupInfo:function T(Ar,Aq,Ap){this.groupStackAnalysis=this.groupStackAnalysis||[[],[]];if(this.groupStackAnalysis[Ar][Aq]){return this.groupStackAnalysis[Ar][Aq];}var Al=this.groupStackAnalysis[Ar],Ao=this.getGroupStackedInformation(Ar,Aq),An,Am={Reverse:3};if(Ao&&Ao.length){An=Ao.length-1;if(Ao[An].Max<=Ap){Am={Reverse:0,CeilUpdated:An};}else{if(Ao[0].Min>=Ap){Am={Reverse:1,FloorUpdated:0};}else{for(An=0;An<Ao.length;An++){if(Ao[An].Max>=Ap){Am.FloorUpdated=An;Am.CeilUpdated=An>0?An-1:-1;}}}}}else{Am={Reverse:4};}Al[Aq]=Am;return Al[Aq];},UpdateCumulateData:function AZ(A1,Av,Az){var Au=this.mSeriesInfo,Ar=this.mDatasetPtr,An=this.mGroupCount,At=this.mCumulateData,A3,Am,Al,A0,Ay,Ax,Aw,As=this.mChartContextPtr.IsDualAxis(),A4=Az!==undefined&&Az>=0,Ao,A2,A5,Ap;if(A4){var Aq=Ar.GetValueAxisBySeries(Az);if(Aq!==A1){return Av;}}A3=Au.length;if(A3===0){return Av;}A0=A3;if(As){Am=this.mSeriesNumber[0];Al=A3-Am;}for(Ay=0;Ay<An;++Ay){Ao=(Av&&Av.positive[Ay])||0;A2=(Av&&Av.negative[Ay])||0;for(Ax=0;Ax<A3;++Ax){if(A4){if(Au[Ax].mSeriesId!==Az){continue;}}if(Au[Ax].mValueAxis===A1){A5=Ar.GetData(Au[Ax].mSeriesId,Ay);Ap=0;if(A5!==null&&A5!==undefined){Ap=A5;if(Ap<0){this.mHasNegativeValue=true;Ap+=A2;A2=Ap;}else{Ap+=Ao;Ao=Ap;}}else{Ap=Ao;}if(A4){if(Ap>=0){Av.positive[Ay]=Ap;}else{Av.negative[Ay]=Ap;}if(As){A0=A1===AA.VA_Y1?Am:Al;}Aw=Ay*A0+Au[Ax].mDataIndex;At[A1][Aw]=Ap;}else{At[A1].push(Ap);if(Ax===A3-1){if(Ap>=0){Av.positive[Ay]=Ap;}else{Av.negative[Ay]=Ap;}}}}}}return Av;},AddBaseToCumulateData:function AK(Ao,An){var Al=this.mCumulateData[Ao].length,Am;for(Am=0;Am<Al;++Am){this.mCumulateData[Ao][Am]+=An;}},drawSingleDataPoint:function V(Aw,Av,Am,As){var Aq=this.mChartContextPtr,Az=Aq.GetGraphMatrixContext(),An=0,Ay,Ax,A2,Ar,Al,A0,Au=[],At=this.mpABLPlot.shownDataLabels;var Ao=Az.mMarkerShape;if(Ao===Ag.DssGraphMarkerShape2DPie||Ao===Ag.DssGraphMarkerShape2DRingPie){if(this.mPieRenderer===null){var A1=0;if(Ao===Ag.DssGraphMarkerShape2DRingPie){A1=1;}this.mPieRenderer=new AT.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:this.mChartContextPtr,Layout:A1,PlotType:a.GMPPT_CATEGORY,ShownDataLabel:At});}var Ap=this.mPieRenderer;An=this.mDatasetPtr.GetPieCountAtOneDataPoint(Aw.mSeriesId,Aw.mGroupId);for(Ay=0;Ay<An;++Ay){if(Aq.checkColorByAndSizeByValue(Aw,this.mDatasetPtr,false,this.mHasSizeBy)===false){Au.push({Object:null,ShapeSize:Ar});continue;}if(Aq.mImageUsage===z.GENERAL){A2=e.call(this,Aw.mSeriesId,Aw.mGroupId,Ay,An);Al=Ap.drawSinglePie(Aw.mSeriesId,Aw.mGroupId,Ay,A2,An);for(Ax=0;Ax<Al.length;Ax++){if(Al[Ax]){Au.push({Object:Al[Ax],ShapeSize:Al[Ax].getShapeSize()});}}}else{if(Aq.mImageUsage===z.OBJECT_CLIP_COMPUTATION){Ar=Ap.getShapeSizeAt(Aw.mSeriesId,Aw.mGroupId,Ay,!this.mHasSizeBy);Au.push({Object:null,ShapeSize:Ar});}}}}else{if(Am===U._COMBINED){Am=this.mDatasetPtr.GetShapeByCell(Aw.mSeriesId,Aw.mGroupId);if(Am===U._GENERIC){Am=U._CIRCLE;}}A0=this.drawSinglePoint(Aw,Av,Am,As);Au.push(A0);}return Au;},drawSinglePoint:function Ae(A0,Az,Ao,Ay){var Ar=(Ao!==undefined)?Ao!==U._LINE:false,At=this.mChartContextPtr,A3=At.GetGraphMatrixContext(),Au=this.mGroupCount,A4,Aq,As,A2,Ap,Ax,An,A1=this.mDatasetPtr.getForecastCount();if(At.checkColorByAndSizeByValue(A0,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return{Object:null,ShapeSize:0};}if(Ay===U._AREA){Ar=false;}As=q.call(this,Ao);if(At.RenderClusterShapes()){if(!(Au===1&&Ao===2)){Au*=this.mSeriesInfo.length;}}if(As===Ag.DssGraphMarkerShapeGMTick){A2=A3.GetMaxMarkerSize(AN._TICK_CATEGORY,At.IsVertical(),Au);}else{if(Ao===U._AREA||Ay===U._AREA){A2=A3.GetMaxElementSizeInAreaChart(this.mIsVertical,Au,!Ar,A1);}else{A2=A3.GetMaxElementSizeInLineChart(this.mIsVertical,Au,!Ar,As);}}Aq=this.mDatasetPtr.GetGroupCount();if(this.mHasSizeBy){A4=this.mDatasetPtr.GetSizeByData(A0.mSeriesId,A0.mGroupId);if(A4!==null&&A4!==undefined){if(As===Ag.DssGraphMarkerShapeNone&&(A3.mMaxSizeVal===A3.mMinSizeVal)){if(!Ar&&Aq>=3){A2=A3.GetAdjustThicknessValue(A3.mConstants.MinimalSize.General);}A2=Math.round(Math.max(A2,1));}else{A2=A3.GetScaledSize(A4,A2,Ao);A2=Math.max(Math.round(A2),A3.mConstants.MinimalSize.General);}}}if(At.mImageUsage===z.OBJECT_CLIP_COMPUTATION){var Aw=A2;if(As===Ag.DssGraphMarkerShapeGMTick){Aw=Math.round(0.5*(this.mIsVertical?A3.mConstants.FixedTickerSize:A2));}return{Object:null,ShapeSize:Aw};}if(As===Ag.DssGraphMarkerShapeNone){As=Ag.DssGraphMarkerShapeCircle;}if(As===Ag.DssGraphMarkerShapeGMTick){var Am,Al,Av=Math.round(0.5*A2);if(At.IsVertical()){Am={x:Az.x-Av,y:Az.y};Al={x:Az.x+Av,y:Az.y};}else{Am={y:Az.y-Av,x:Az.x};Al={y:Az.y+Av,x:Az.x};}Ap=new AT.StraightLineObject({TripleId:A0,GraphObjectManager:this,StartPoint:Am,EndPoint:Al,GraphCollectionObject:null,Shape:U._TICKER});}else{if(As===Ag.DssGraphMarkerShapeSquare||As===Ag.DssGraphMarkerShapeRectangle){An=this.mChartContextPtr.transformToRect(Az,A2,true);Ap=new AT.RectangleObject({TripleId:A0,GraphObjectManager:this,GraphCollectionObject:null,Area:An,Shape:U._RECTANGLE,hasFill:true});}else{Ap=new AT.MarkerObject({TripleId:A0,GraphObjectManager:this,MarkerPosition:Az,MarkerShape:As,IsIsometric:true,MarkerSize:A2,GraphCollectionObject:null,IsDialogSize:false,Shape:U._CIRCLE,hasFill:true});}}if(A3.mMarkerShape===Ag.DssGraphMarkerShapeNone){A3.AddToIsolatedDotList(A0);if(A0.mObjectId!==Af.DssGraphDataMarker){Ax=new AT.TripleId({ObjectId:Af.DssGraphDataMarker,SeriesId:A0.mSeriesId,GroupId:A0.mGroupId});A3.AddToIsolatedDotList(Ax);}}return{Object:Ap,ShapeSize:Ap.getShapeSize()};},getCorrectGroupIdInSeriesPoints:function Ad(Al,An){var Am=this.mGroupIdMapPerSeries[Al];if(Am!==null&&Am!==undefined){return Am;}return An;},prepareTransitionalGradient:function g(Al,Aq,Ar){var Ao,An,Ap={Effective:false};if(Ar!==undefined){Ar=Math.min(Aq.length,Ar);}else{Ar=Aq.length;}Ap.Colors=[];for(Ao=0;Ao<Ar;Ao++){var Am=this.mDatasetPtr.GetColorByData(Al.mSeriesId,Al.mGroupId+Ao);if(Am===null){Am=this.mDatasetPtr.GetDefaultShapeFillColor();}if(Ao===0){An=Am;Ap.StartGraphColor=Am;}else{if(Ao===Ar-1){Ap.EndGraphColor=Am;Ap.Effective=Ap.Effective||Am!==An;}else{Ap.Colors.push({Color:Am,Step:Ao/(Ar-1)});Ap.Effective=Ap.Effective||Am!==An;}}}Ap.Style=1;Ap.EndAlpha=255;Ap.Angle=this.mChartContextPtr.IsVertical()?0:1;return Ap;},getMaxElementOffsetClippedByBoundary:function AG(Al,Ao,Am){var Ap=Ao?(Am?"X1":"X2"):(Am?"Y1":"Y2");if(this.mClippedMarkerSize[Ap]){var An=this.mClippedMarkerSize[Ap];Al.LowOffset=Math.max(An.LowOffset,Al.LowOffset);Al.HighOffset=Math.max(An.HighOffset,Al.HighOffset);}else{Al.LowOffset=Math.max(0,Al.LowOffset);Al.HighOffset=Math.max(0,Al.HighOffset);}},CreateOneDataMarker:function F(Am,Av,Au,A1,Ay,A8){var A0=this.mSeriesInfo[Am],Aq=this.mChartContextPtr,A2=new AT.TripleId({ObjectId:Af.DssGraphRiser,SeriesId:A0.mSeriesId,GroupId:Av}),A4=Aq.GetGraphMatrixContext(),Aw=this.mDatasetPtr,Ao=Aw.GetShapeBySeries(A0.mSeriesId),A5=(Ao===U._LINE||Ao===U._GENERIC),Az=(Ao===U._AREA),Ar=A4.IsIsolatedDot(A2),At=A4.mHasSizeBy,A6,Ax,Al,As;A8=A8||false;var A7,Ap=Ag.DssGraphMarkerShapeCircle;if(A4.mMarkerShape===Ag.DssGraphMarkerShapeCombined){A6=(Ao===U._CIRCLE||Ao===U._RECTANGLE||Ao===U._SQUARE);}else{A6=(A4.mMarkerShape===Ag.DssGraphMarkerShapeCircle||A4.mMarkerShape===Ag.DssGraphMarkerShapeRectangle||A4.mMarkerShape===Ag.DssGraphMarkerShapeSquare);}A7=(!Ar&&!A6&&!At);if(!A7){return ;}Al=this.mDatasetPtr.getMarkerShapeInfoAt(A0.mSeriesId,Av);A7=(Al.Show||A8)&&Ap!==undefined;if(!A7){return ;}Ap=Al.Shape;Au=null;var A9=new AT.TripleId({ObjectId:Af.DssGraphDataMarker,SeriesId:A0.mSeriesId,GroupId:Av}),A3=Al.Size||3;if(A8){Ap=Ag.DssGraphMarkerShapeCircle;A3=A4.mConstants.FixedDataMarkerSize;}if(Ap===Ag.DssGraphMarkerShapeCircle){Ax=new AT.MarkerObject({TripleId:A9,MarkerPosition:A1,MarkerShape:Ap,IsIsometric:true,MarkerSize:A3,GraphCollectionObject:Au,GraphObjectManager:this,IsDialogSize:false,Shape:U._CIRCLE});}else{if(Ap===Ag.DssGraphMarkerShapeRectangle||Ap===Ag.DssGraphMarkerShapeSquare){var An=this.mChartContextPtr.transformToRect(A1,A3,true);Ax=new AT.RectangleObject({TripleId:A9,GraphObjectManager:this,GraphCollectionObject:Au,Area:An,Shape:U._RECTANGLE});}}As=this.mGraphObjectList;if(A5){As.push(Ax);}else{if(Az){As.push(Ax);}}},CreateAllDataLabels:function A(){var Ao,Am,Ap,Aq,Av=this.mTextCollection,An,At,Aw=true,As=this.mDataLabels,Ar=this.mSeriesInfo,Al,Au;Ap=new AT.TripleId({ObjectId:Af.DssGraphDataText});if(Aw){Aq=new AT.GraphCollectionObject({TripleId:Ap,GraphObjectManager:this,CollectionType:y.CT_TEXT});}for(Ao=0;Ao<Ar.length;++Ao){Au=Ar[Ao].mSeriesId;if(this.mDatasetPtr.showSeriesDatalabel(Au)===false){continue;}if(!Aw){Aq=new AT.GraphCollectionObject({TripleId:Ap,GraphObjectManager:this,CollectionType:y.CT_TEXT});}Av.push(Aq);for(Am=0;Am<this.mGroupCount;++Am){An=this.mDatasetPtr.GetData(Au,Am);if(An!==undefined&&An!==null){At=this.CreateOneDataLabel(Au,Am,An,Aq);if(At!==null&&At!==undefined){Al=new AT.GMDataLabelInfo({SeriesId:Au,GroupId:Am,SeriesInfo:Ao,isValid:true,Label:At});At.mIsShown=false;As.push(Al);this.AddToMapAndList(At);}}}}},hGetCumulateData:function X(An,Am,Al){return this.mCumulateData[An][Al*this.mSeriesNumber[An]+Am];},GetAccompanyPoints:function Ab(An,Ap){var Ao=new AT.Point2D(),Al=new AT.Point2D(),Am={};Ao.x=An.x;Ao.y=An.y;Al.x=An.x;Al.y=An.y;if(this.mIsVertical){Ao.y-=Ap;Al.y+=Ap;}else{Ao.x-=Ap;Al.x+=Ap;}Am.lowPoint=Ao;Am.highPoint=Al;return Am;},CreateOneDataLabel:function Ah(A0,Aq,Al,Aw){var Ar=Al,Au="",Ax,At,Ao,A1,Ap,Az,Ay,As,Av,An=this.mpABLPlot.realComboChart,Am;At=new AT.TripleId({ObjectId:Af.DssGraphDataText,SeriesId:A0,GroupId:Aq});Ap=this.mDatasetPtr;Ay=this.mpABLPlotContext;As=Ay.mABLOptions;Av=As.mLayout;if(Av===AY.LO_STACKED||Av===AY.LO_PERCENT){Ar=Ap.GetData(A0,Aq);}Az=Ap.dataLabelStyle;switch(Az){case w:Ax=this.mSeriesInfo[0].mValueAxis;r.restore();Ap.getGridDataFormat(r,A0,Aq,0);Ao=new AT.NumberObject({TripleId:At,GraphObjectManager:this,Number:Ar,NumberFormat:r,GraphCollectionObject:Aw,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(Ao){Au=Ao.mText;A1=Ao;}break;case G:Au=this.mDatasetPtr.GetTextLabel(A0,Aq);A1=new AT.TextObject({TripleId:At,GraphObjectManager:this,GraphCollectionObject:Aw});break;}if(Au.length!==0){A1.SetText(Au);if(An){Am=A1.mFormatFontPtr;Am.mFontStyle=E.FS_BOLD;A1.strokeBBox();}return A1;}return null;},Draw:function AV(){this._super();Z.call(this);R.call(this);},updateSeriesRenderSequence:function s(Am,As,Ao){var Aq,An,Ap=0,Ar=this.renderSequence,Al=Ar.length;if(Ao===undefined){Ao=true;}As=Ao?As:0;for(Aq=0;Aq<Al;Aq++){An=Ar[Aq];if(An!==null&&An!==undefined){Ap++;Am[Aq]=An+As;}}if(Ao){return As+Ap;}return 0;},populateRenderSequence:function AX(Ap){if(Ap){this.renderSequence=Ap;}else{var Am,An=this.renderSequence,Ao=this.mSeriesInfo,Al=Ao.length;An.splice(0,An.length);for(Am=0;Am<Al;Am++){An[Ao[Am].mSeriesId]=Am;}}},evalBarStyleUnitWidth:function H(Al,Ao,Aq){var Ar=this.mChartContextPtr,An=Ar.GetGraphMatrixContext(),Am={unitWidth:0,columns:1,riserGap:0,groupGap:0,overlapRatio:0,gapRatio:10};if(Aq===undefined){Aq=10;var Ap=An.mElementsInfo;if(Ap.Max.Mode===AF._MANUAL){Aq=Ap.Max.Size*100;if(Aq<1){Aq=1;}if(Aq>100){Aq=99;}Am.gapRatio=100-Aq;}}else{Am.gapRatio=Aq;}Am.columns=Ao||this.mSeriesInfo.length;Am.unitWidth=(Al*(1-Am.gapRatio/100)/Am.columns);if(Ar.mIsGraphMatrix){if(Am.unitWidth>2){Am.unitWidth-=1;}if(An.mElementsInfo.Max.Mode===AF._AUTOMATIC){Am.unitWidth=Math.min(Am.unitWidth,An.mConstants.MaximalSize.Bar);}if(this.mHasSizeBy===false){if(!Ar.isCompactMode()){Am.unitWidth=Math.max(Am.unitWidth,An.mConstants.MinimalSize.Bar);}}Am.gapRatio=(1-Am.unitWidth*Am.columns/Al)*100;Am.riserGap=0;Am.groupGap=Al*Am.gapRatio/100;}return Am;},GenerateTrendLine:function K(){var A5=this.mpABLPlotContext,Av,A6,As=A5.mCategoryAxisPtr,BH,BF,BD,A0,BE,BK,Az,BB,BG=this.mDatasetPtr,A2=this.mChartContextPtr,A1=this.mSeriesInfo,At=A1.length,An,A3,A9,Ao,Ar,A4,A7=[],Au,A8,BJ,BA,Am,Al,Aw,Ax,Ap,BI,Ay={},BC={},Aq={};if(BG.isBare(A2.IsPieChart())){return ;}if(As.mAxisInfo.mAxisDirection===AW.AD_X){A6=true;}else{A6=false;}for(BH=0;BH<At;++BH){A7=[];An=A1[BH];A3=An.mSeriesId;Av=BG.GetTrendLineOfSeries(A3);Ao=An.mValueAxis;Ar=A5.mValueAxis[Ao];Au=new AT.TripleId({ObjectId:Af.DssGraphTrendLine,SeriesId:A3});if(!!Av===false){continue;}A0=Av.getTrendLineType();if(A0===O.DssGraphRegressionNone){continue;}BA=Av.getIdentity();BK=Av.getTrendLineValuesWithForecast();Az=Av.getTrendLineValues();BE=Av.getSeasonalityType();if(B(Az)<=1){continue;}if(!!BK===false||BK.length===0){continue;}BB=BK.length;if(A0===O.DssGraphRegressionLinear){if(BE!==0){for(BF=0;BF<BB;++BF){A9=BK[BF];if(A9!==null&&A9!==undefined){A4=j.call(this,BH,BF,A9,Ar,A6,true);if(A4.x!==null&&A4.y!==null){A7.push(A4);}else{AB.visPrint("Trendline point calculation abnormal:");AB.visPrint("\tseries #: "+BH+", data point #:"+BF);AB.visPrint("\tvalue = "+A9);AB.visPrint("\tx = "+A4.x+", y = "+A4.y);}}}A7=b.call(this,A7);BI=A7.length;if(BI>=2){Ax=A7[0].x;Ap=A7[BI-1].x;Am=(Ax+Ap)/2;for(BH=0;BH<BI;++BH){if(A7[BH].x===Am){Al=A7[BH].y;break;}else{if(BH<BI-1&&A7[BH].x<Am&&A7[BH+1].x>Am){Aw=(A7[BH+1].y-A7[BH].y)/(A7[BH+1].x-A7[BH].x);Al=A7[BH].y+Aw*(Am-A7[BH].x);break;}}}BC.x=Am;BC.y=Al;}}else{for(BF=0;BF<BB;++BF){A9=BK[BF];if(A9!==null&&A9!==undefined){A4=j.call(this,BH,BF,A9,Ar,A6,true);if(A4.x!==null&&A4.y!==null){A7.push(A4);break;}else{AB.visPrint("Trendline point calculation abnormal:");AB.visPrint("\tseries #: "+BH+", data point #:"+BF);AB.visPrint("\tvalue = "+A9);AB.visPrint("\tx = "+A4.x+", y = "+A4.y);}}}for(BD=BB-1;BD>BF;--BD){A9=BK[BD];if(A9!==null&&A9!==undefined){A4=j.call(this,BH,BD,A9,Ar,A6,true);if(A4.x!==null&&A4.y!==null){A7.push(A4);break;}else{AB.visPrint("Trendline point calculation abnormal:");AB.visPrint("\tseries #: "+BH+", data point #:"+BD);AB.visPrint("\tvalue = "+A9);AB.visPrint("\tx = "+A4.x+", y = "+A4.y);}}}BI=A7.length;if(BI>=2){Am=(A7[0].x+A7[1].x)/2;Al=(A7[0].y+A7[1].y)/2;BC.x=Am;BC.y=Al;}}if(BI>=2){Ay.x=A7[0].x;Ay.y=A7[0].y;Aq.x=A7[BI-1].x;Aq.y=A7[BI-1].y;A8=new AT.PolyLineObject({TripleId:Au,GraphObjectManager:this,PolyLine:A7,Shape:U._LINE,Identity:BA,startPoint:Ay,midPoint:BC,endPoint:Aq});if(A8!==null){this.mTrendLineObjects.push(A8);}}}else{for(BF=0;BF<BB;++BF){A9=BK[BF];if(A9!==null&&A9!==undefined){A4=j.call(this,BH,BF,A9,Ar,A6,false);if(A4.x!==null&&A4.y!==null){A7.push(A4);}else{AB.visPrint("Trendline point calculation abnormal:");AB.visPrint("\tseries #: "+BH+", data point #:"+BF);AB.visPrint("\tvalue = "+A9);AB.visPrint("\tx = "+A4.x+", y = "+A4.y);}}}if(A7.length>=2){BJ=new AT.CurveLineObject({TripleId:Au,GraphObjectManager:this,Points:A7,IsVertical:A6,Identity:BA,Shape:U._CURVE});if(BJ!==undefined&&BJ!==null){this.mTrendLineObjects.push(BJ);}}}}},GenerateRefLine:function C(){var Ap=this.mpABLPlotContext,At=this.mChartContextPtr,A7=At.mGraphWidth,BE=At.mGraphHeight,A0=this.mSeriesInfo.length,Ao,A3,BB,A8,Au,BC,A4,BG,A9=[],Aq,BA,A1,An,A6,BI,As,Ar,BH,BD,Am,Av={},BF,Al,Ay=this.mDatasetPtr,Ax,Az=[],Aw,A5=Ay.GetSeriesCount()*Ay.GetGroupCount();if(At.mPartialRendering===false){A5=this.mpABLPlot.DPCount;}for(BB=0;BB<A0;++BB){A3=this.mSeriesInfo[BB];Ao=A3.mSeriesId;A1=Ay.GetReferenceLinesOfSeries(Ao);Au=A3.mValueAxis;BC=Ap.mValueAxis[Au];Al={};Al.Condense=BC.mCondenseLabels;if(!Al.Condense){if(BC.mNumberFormat.isDefault){var A2=new AT.ChartAdvFormat();At.getAxisAutoNumberFormat(A2,BC.mPrimaryMetrics);BC.mNumberFormat=A2;}Al.NumberFormat=BC.mNumberFormat.mCustomFormat;}Aw=A1.length;for(A8=0;A8<Aw;++A8){A9=[];BA=A1[A8];if(BA){BI=BA.getIdentity();A4=BA.getReferenceLineValue();BG=BA.getReferenceLineDirection();Ax=(BG!=="horizontal");An=BA.getReferenceLineLabel(false,false,Al);As=BA.getRefLineLabelIdentity();if(A5===0){continue;}Aq=new AT.TripleId({ObjectId:Af.DssGraphReferenceLine,SeriesId:Ao,GroupId:A8});BF=new AT.TripleId({ObjectId:Af.DssGraphRefLineText,SeriesId:Ao,GroupId:A8});if(A4!==null&&A4!==undefined){BH=BC.GetPositionByValue(A4);if(BH!==null&&BH!==undefined){BD=1;if(Ax){if(BH===0){BH=1;}else{if(BH===A7){--BH;}}Am=BE-1;A9.push(new AT.Point2D({x:BH,y:BD}));A9.push(new AT.Point2D({x:BH,y:Am}));Av.x=BH;Av.y=(A9[0].y+A9[1].y)/2;}else{if(BH===0){BH=1;}else{if(BH===BE){--BH;}}Am=A7-1;A9.push(new AT.Point2D({x:BD,y:BH}));A9.push(new AT.Point2D({x:Am,y:BH}));Av.x=(A9[0].x+A9[1].x)/2;Av.y=BH;}Ar=new AT.StraightLineObject({TripleId:Aq,GraphObjectManager:this,StartPoint:A9[0],EndPoint:A9[1],GraphCollectionObject:null,Identity:BI,Shape:U._LINE,MidPoint:Av});if(Ar!==null){if(!Ar.mFormatLinePtr){Ar.mFormatLinePtr=new AT.FormatLine();}this.mReferenceLineObjects.push(Ar);Az.push({tripleId:BF,identity:As,isVertical:Ax,position:BH,labelText:An});}}else{AB.visPrint("Reference line point calculation abnormal:");AB.visPrint("\tseries #: "+BB+"ref line #: "+A8);AB.visPrint("\tvalue = "+A4);AB.visPrint("\ty = "+BH);}}}}}t.call(this,BE,A7,Az);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,M=O.enums,B=M.EnumOrientation,P=O.gNullObjectId,L=O.gNullTripleId;var J=mstrmojo.chart.model,Q=J.enums,E=Q.EnumDSSGraphType,F=Q.EnumDSSGraphObject,K=Q.EnumVariantBool.VARIANT_FALSE,R=Q.EnumDSSExtraGraphProperty;mstrmojo.chart.PlotManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.PlotManager",mLegendPtr:null,mDatasetPtr:null,mGraphType:E.DssGraphTypeVertical_Bar_Side_by_Side,mPlotArea:null,mChartAreaOptions:null,mRecalculateFrame:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,init:function N(S){this._super(S);this.mChartAreaOptions={useChartArea:false,chartAreaNumber:1,orientation:B.OR_VERTICAL,vecPercentageHeightOrWidth:[],seriesDistribution:[]};this.mPlotArea=S.Area||null;this.mChartContextPtr=S.GraphObjectManager.mChartContextPtr;},SetDataset:function G(S){this.mDatasetPtr=S;},SetMarginInfo:function H(V,T,S,U){this.mLeftMargin=V;this.mRightMargin=T;this.mTopMargin=S;this.mBottomMargin=U;},LoadProperties:function I(){var Z,U,b,W,X,S=[],V=[],a=[];var T=this.mChartContextPtr,Y=this.mChartAreaOptions;this.mGraphType=T.mGraphType;this.mRecalculateFrame=T.mRecalculateFrame;if(!T.mIsGraphMatrix){Z=T.GetProperty(R.DssGraphUseChartArea,P);if(Z){Y.useChartArea=Z!==K;}}U=this.mDatasetPtr.GetSeriesCount();b=1;W=0;if(Y.useChartArea){Z=T.GetProperty(R.DssGraphChartAreaNumber,P);if(Z){Y.chartAreaNumber=Z;if(Y.chartAreaNumber>U){Y.chartAreaNumber=U;}}Z=T.GetProperty(R.DssGraphChartAreaOrientation,P);if(Z){Y.orientation=(Z!==K?B.OR_VERTICAL:B.OR_HORIZONTAL);}for(X=0;X<Y.chartAreaNumber;X++){Z=T.GetProperty(R.DssGraphChartAreaSpacePercentage,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphFrame,SeriesId:X}));if(Z&&Z>=0){Y.vecPercentageHeightOrWidth.push(Z/100);b-=Z/100;}else{Y.vecPercentageHeightOrWidth.push(-1);W++;}}}else{Y.chartAreaNumber=1;Y.vecPercentageHeightOrWidth.push(1);}for(X=0;X<Y.chartAreaNumber;X++){Y.seriesDistribution.push(S);}this.mDatasetPtr.GetOneSliceRangeSimple(V,a);for(X=0;X<U;X++){if(T.mIsGraphMatrix){Y.seriesDistribution[X%Y.chartAreaNumber].push(V[X]);}else{Z=T.GetProperty(R.DssGraphChartAreaDestination,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphRiser,SeriesId:X}));if(Y.useChartArea&&Z){Y.seriesDistribution[Z].push(X);}else{Y.seriesDistribution[X%Y.chartAreaNumber].push(V[X]);}}}if(W>0){for(X=0;X<Y.chartAreaNumber;X++){if(Y.vecPercentageHeightOrWidth[X]<=0){Y.vecPercentageHeightOrWidth[X]=b/W;}}}},CalculateChartAreas:function A(W,a){var c,S,Y,V,Z=this.mChartAreaOptions,U,T,X,b;c=0;if(Z.orientation===B.OR_VERTICAL){S=W.height/20;b=Z.chartAreaNumber;for(V=0;V<b;V++){U=(W.height-S*(Z.chartAreaNumber-1))*Z.vecPercentageHeightOrWidth[V];a.push(new mstrmojo.chart.Rect2D({x:W.x,y:W.y+(W.height-S*(b-1))*c+S*V,width:W.width,height:U}));c+=Z.vecPercentageHeightOrWidth[V];}X=a[Z.chartAreaNumber-1];X.height=W.y+W.height-X.y;}else{Y=W.width/20;b=Z.chartAreaNumber;for(V=0;V<b;V++){T=(W.width-Y*(Z.chartAreaNumber-1))*Z.vecPercentageHeightOrWidth[V]+0.5;a.push(new mstrmojo.chart.Rect2D({x:W.x+(W.width-Y*(b-1))*c+Y*V,y:W.y,widht:T,height:W.height}));c+=Z.vecPercentageHeightOrWidth[V];}X=a[b-1];X.width=W.x+W.width-X.x;}},RectangleUnion:function C(S,U,T){T.x=Math.min(S.x,U.x);T.y=Math.min(S.y,U.y);T.width=Math.max(S.x+S.width,U.x+U.width)-T.x;T.height=Math.max(S.y+S.height,U.y+U.height)-T.y;},RectangleIntersection:function D(S,U,T){if((S.x>(U.x+U.width))||(U.x>(S.x+S.width))||(S.y>(U.y+U.height))||(U.y>(S.y+S.height))){return false;}T.x=Math.max(S.x,U.x);T.y=Math.max(S.y,U.y);T.width=Math.min(S.x+S.width,U.x+U.width)-T.x;T.height=Math.min(S.y+S.height,U.y+U.height)-T.y;return true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","Point2D","RectangleObject","TextObject","NumberObject","GraphCollectionObject","GridDataLabelInfo","GridBasePlot","CategoryAxis","PiePlotRenderer","MarkerObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixElementSizeMode","EnumGraphMatrixMarkerTypeInChart","EnumAnchorPoint");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.common","Utility","MapStructure");var W=mstrmojo.chart,T=W.ChartConstants,J=W.enums,q=J.EnumAnchorPoint,C=J.EnumCollectionType,Q=J.EnumGraphMatrixMarkerTypeInChart,p=J.EnumGraphMatrixElementSizeMode,U=J.EnumGraphMatrixPiePlotType,S=mstrmojo.chart.model,O=S.enums,u=O.EnumDSSGraphMarkerShape,t=O.EnumDSSGraphObject,v=O.EnumShapeType,B=W.common,F=B.Utility,V=F.tripleId;var P=new W.Rect2D(),AG=new W.Point2D(),AE=new W.Point2D(),s=new W.ChartAdvFormat(),r=new W.Point2D();var L=0,d=1,b=2;var M=1,N=2,X=3;function K(AJ,AI){if(AJ.mYIndex===AI.mYIndex){return AJ.mXIndex-AI.mXIndex;}return AJ.mYIndex-AI.mYIndex;}function AA(){var AI=this.mXAxis,AO=this.mYAxis,AM=this.mDatasetPtr;if(this.mPartialRendering){var AK=this.mChartContextPtr,AQ={PartialRendering:true,Group:{},Series:{}},AJ,AN,AR,AL,AP=AK.mRenderingWindow;AJ=AP.x;AN=AJ+AP.width;AR=AP.y;AL=AR+AP.height;if(AI){AN=AI.getGroupSlotAt(AN)+1;AJ=AI.getGroupSlotAt(AJ)-1;}if(AO){AL=AO.getGroupSlotAt(AL)+1;AR=AO.getGroupSlotAt(AR)-1;}if(this.mDatasetPtr.GetSeriesByColumn()){if(AO){AQ.Group.Max=AL;AQ.Group.Min=AR;}if(AI){AQ.Series.Max=AN;AQ.Series.Min=AJ;}}else{if(AO){AQ.Series.Max=AL;AQ.Series.Min=AR;}if(AI){AQ.Group.Max=AN;AQ.Group.Min=AJ;}}AM.updateDataWindow(AQ);}else{AM.resetDataWindow();}}function AB(AP){if(!AP){var AK=this.mChartContextPtr.GetGraphMatrixContext(),AO=AK.mElementsInfo;if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle){var AN=AO.Max.Size,AL=1;var AJ=this.mAutoFitMarkerRect;this.mAdjustMarkerRect=new W.Rect2D({Rect2D:AJ});var AI=this.mAdjustMarkerRect;if(AO.Max.Mode===p._MANUAL){AL=Math.min(AL,AN);if(AL<1){AI.width=AJ.width*AL;AI.height=AJ.height*AL;}}}if(this.mMarkerShape===u.DssGraphMarkerShapeGMTick){var AM=new W.Rect2D();AM.width=AK.mConstants.FixedTickerSize;AM.height=AK.GetMaxMarkerSize(Q._TICK_CATEGORY,false,this.mYArity);this.mAdjustMarkerRect=AM;}}return this.mAdjustMarkerRect;}function l(){var AI=this.mSeriesSet.length,AK=this.mDatasetPtr.GetGroupCount(),AJ=this.mDatasetPtr;if(this.mIsSeriesByCol){this.mXArity=AI;this.mYArity=AK;}else{this.mXArity=AK;this.mYArity=AI;}if(this.mXArity===0&&!this.mHasXAxis){this.mXArity=1;}if(this.mXArity===0&&!AJ.mHasMetrics){this.mXArity=1;}if(this.mYArity===0&&!this.mHasYAxis){this.mYArity=1;}if(this.mYArity===0&&!AJ.mHasMetrics){this.mYArity=1;}}function AD(){return this.mDatasetPtr.IsGridPieAngleBreakX();}function h(){var AK=this.mChartContextPtr,AN=AK.GetGraphMatrixContext(),AJ=AN.mElementsInfo,AS=0,AQ=this.mMarkerShape,AU=AQ===u.DssGraphMarkerShape2DPie||AQ===u.DssGraphMarkerShape2DRingPie,AP=1,AI=1,AM=2500,AO=1,AV,AT,AL;if(AQ!==u.DssGraphMarkerShapeRectangle){if(this.mHasXAxis){AT=this.mXAxis.getGroupSize();}else{AT=this.mDataArea.width;}if(this.mHasYAxis){AL=this.mYAxis.getGroupSize();}else{AL=this.mDataArea.height;}if(AU){if(AJ.Max.Mode===p._AUTOMATIC){AM=250;}AS=this.mDatasetPtr.GetAngleNumber();var AR=AD.call(this);if(AR){AP=AS;}else{AI=AS;}if(AJ.Max.Mode===p._AUTOMATIC){AO=this.mDatasetPtr.showDatalabels()?0.5:0.9;if(AO<0){AO=0.1;}AO=Math.min(AO,1);}}if(AJ.Max.Mode===p._MANUAL){AO=AJ.Max.Size;if(AO<0){AO=0.1;}AO=Math.min(AO,1);}AV=0.5*Math.min(AT/AP,AL/AI);if(AQ!==u.DssGraphMarkerShapeCircle||AV>=4){AV-=1;}AV=Math.max(AV,1);AV*=AO;AV=Math.min(AV,AM);AV=Math.max(AV,1);return Math.floor(AV);}return 1;}function E(){var AN=this.mDatasetPtr,AL=this.mDataArea,AM=this.mXAxis,AK=this.mYAxis,AJ=this.mAutoFitMarkerRect,AO=this.mChartContextPtr,AI=this.mpManager.mPlotOption;this.mIsAutoFitMode=AI.mIsAutoFitMode;this.mMaxDataVal=AI.mMaxDataVal;this.mMinDataVal=AI.mMinDataVal;this.mUniformColorMode=AN.GetSeriesByColumn()?b:d;if(this.mHasXAxis){AJ.width=AM.getGroupSize();}else{AJ.width=AL.width;}if(this.mHasYAxis){AJ.height=AK.getGroupSize();}else{AJ.height=AL.height;}this.mMarkerShape=AI.mMarkerShape;if(this.mMarkerShape===u.DssGraphMarkerShapeNone){this.mMarkerShape=u.DssGraphMarkerShapeRectangle;}this.mIsSeriesByCol=AN.GetSeriesByColumn();if(this.mHasXAxis){this.mPreXCoord=AM.getGroupStartPos(0);}else{this.mPreXCoord=AL.x;}if(this.mHasYAxis){this.mPreYCoord=AK.getGroupStartPos(0);}else{this.mPreYCoord=AL.y;}l.call(this);AB.call(this,false);this.mMinMarkerSize=1;this.mMaxMarkerSize=h.call(this);this.mDataGroup=AN.GetDataGroup();}function c(AI,AJ){if(this.mHasColorBy===false){return this.mMarkerCollectionSet[0]||null;}return null;}function e(AI,AK,AJ){if(!AJ){return ;}if(this.mLegendPtr===null||this.mLegendPtr===undefined){return ;}if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function j(AN,AJ,AM,AI){var AL=AN?AI.x:AI.y,AO=0,AK;if(AN){AO=AJ?this.mXAxis.getGroupMiddlePos(AM+1):this.mXAxis.getGroupMiddlePos(AM-1);AK=(AO+AL)/2;}else{AO=AJ?this.mYAxis.getGroupMiddlePos(AM+1):this.mYAxis.getGroupMiddlePos(AM-1);AK=(AO+AL)/2;}var AP=AK-Math.floor(AK);if(AP!==0){AK-=0.5;}if(AK===0){AK=1;}return AK;}function Y(AV,AT){var AX=1,AN=0,AQ=v._RECTANGLE,AJ=false,AM=this.mDatasetPtr.dataProvider;AG.x=this.mXAxis.getGroupMiddlePos(AV);AG.y=this.mYAxis.getGroupMiddlePos(AT);P.Reset(0,0,0,0);if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle){if(this.mXArity*this.mYArity===1){P=AB.call(this,true);}else{var AS=0,AL=0;if(!this.resizerLine){this.resizerLine=AM.getResizerLineThickNess();}if(!this.chartInfo){this.chartInfo=AM.getChartRowColCount();}if(AV===0){AS=this.mDataArea.x+AX+AN;AL=j.call(this,true,true,AV,AG);}else{if(AV===this.mXArity-1){AS=j.call(this,true,false,AV,AG);AL=this.mDataArea.x+this.mDataArea.width;}else{AS=j.call(this,true,false,AV,AG);AL=j.call(this,true,true,AV,AG);}}if(AV===this.mXArity-1){if(AM.colIndex!==this.chartInfo.cir-1){AL-=this.resizerLine.MATRIX_VLINE_THICKNESS;}else{AL-=parseInt(this.resizerLine.MATRIX_VLINE_THICKNESS/2);}}P.x=AS;P.width=AL-AS;P.width=Math.max(0,P.width);if(AT===0){AS=this.mDataArea.y+AX;AL=j.call(this,false,true,AT,AG);}else{if(AT===this.mYArity-1){AS=j.call(this,false,false,AT,AG);AL=this.mDataArea.y+this.mDataArea.height;}else{AS=j.call(this,false,false,AT,AG);AL=j.call(this,false,true,AT,AG);}}if(AM.rowIndex!==0&&AT===0){AS+=this.resizerLine.MATRIX_HLINE_THICKNESS;}if(AM.rowIndex===this.chartInfo.cic-1&&AT===this.mYArity-1){AL-=this.resizerLine.AXIS_X_THICKNESS;}P.y=AS;P.height=AL-AS;P.height=Math.max(0,P.height);if(P.width>AX){P.width-=AX+AN*2;}if(P.height>AX){P.height-=AX+AN;}}}else{AJ=true;AQ=v._TICKER;var AU=AB.call(this,true);AE.x=AE.y=0;if(this.mHasXAxis){AE.x=this.mXAxis.getGroupMiddlePos(AV);}else{AE.x=this.mDataArea.GetCenter().x;}if(this.mHasYAxis){AE.y=this.mYAxis.getGroupMiddlePos(AT);}else{AE.y=this.mDataArea.GetCenter().y;}P.width=AU.width;P.height=AU.height;P.x=AE.x-0.5*P.width;P.y=AE.y-0.5*P.height;}if(this.mMinDataVal===this.mMaxDataVal){return P;}var AP=this.mChartContextPtr.GetGraphMatrixContext(),AO=AP.mElementsInfo.Max;if(this.mIsAutoFitMode){if(AO.Mode===p._AUTOMATIC){return P;}if(AO.Mode===p._MANUAL&&AO.Size===1){return P;}}var AK,AI;if(AO.Mode===p._MANUAL&&AO.Size!==1){var AR=AO.Size;AK=Math.round((1-AR)*0.5*P.width);AI=Math.round((1-AR)*0.5*P.height);P.x+=AK;P.y+=AI;P.width-=2*AK;P.height-=2*AI;}if(this.mIsAutoFitMode){return P;}var AW=0;if(this.mIsSeriesByCol){AW=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AV],AT);}else{AW=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AT],AV);}AK=0.5*P.width;AI=0.5*(P.height-AP.GetScaledSize(AW,P.height,AQ)+0.5);if(AJ){P.x+=AK-1;P.y+=AI;P.width=AP.mConstants.FixedTickerSize;}else{AK=0.5*(P.width-AP.GetScaledSize(AW,P.width,AQ)+0.5);P.x+=AK;P.y+=AI;P.width-=2*AK;}P.height-=2*AI;return P;}function x(AK,AN,AU,AL,AJ,AR){var AP=-1,AO=-1,AI,AS,AM,AT,AQ=new W.Point2D({x:-1,y:-1});if(this.mHasXAxis){AP=this.mXAxis.getSubGroupMiddlePos(AK,AU,AJ);}else{AI=this.mDataArea.x;AM=this.mDataArea.width/AJ;AP=AI+AM*AU+AM/2;}if(this.mHasYAxis){AO=this.mYAxis.getSubGroupMiddlePos(AN,AL,AR);}else{AT=this.mDatasetPtr.GetSeriesCount();AI=this.mDataArea.y;AS=this.mDataArea.height/AT;AM=this.mDataArea.height/AR/AT;AO=AI+AS*AN+AM*AL+AM/2;}if(AP>=0&&AO>=0){AQ.x=AP;AQ.y=AO;}return AQ;}function R(AR,AM,AU){var AS=[AR,AM,AU],AQ,AL,AO,AJ,AN,AK=1,AP=1;if(this.mPieCentersPool===null){this.mPieCentersPool=new B.MapStructure();}var AI=this.mPieCentersPool.find(AS);if(AI!==null&&AI!==undefined){return AI;}AL=AM;AJ=AU;AO=AR;AN=AU;var AT=this.mDatasetPtr.GetPieCountAtOneDataPoint(AR,AM);if(AD.call(this)){AJ=AU;AK=AT;}else{AN=AU;AP=AT;}AQ=x.call(this,AL,AO,AJ,AN,AK,AP);this.mPieCentersPool.replace(AS,AQ);return AQ;}function g(AJ,AM){var AL=this.mDataArea,AK=AJ,AI=AM;if(this.mIsSeriesByCol){if(this.mHasXAxis){AK=this.mSeriesSet.length>AJ?this.mSeriesSet[AJ]:AJ;}AI=AM;}else{AK=AJ;if(this.mHasYAxis){AI=this.mSeriesSet.length>AM?this.mSeriesSet[AM]:AM;}}if(this.mHasXAxis){r.x=this.mXAxis.getGroupMiddlePos(AK);}else{r.x=AL.x+AL.width/2;}if(this.mHasYAxis){r.y=this.mYAxis.getGroupMiddlePos(AI);}else{r.y=AL.y+AL.height/2;}return r;}function o(AJ,AO){var AI,AN,AL=v._SQUARE,AK=this.mChartContextPtr.GetGraphMatrixContext(),AM=AK.mMarkerShape;if(this.mIsAutoFitMode){AI=this.mMaxMarkerSize;}else{if(this.mMinDataVal===this.mMaxDataVal){return this.mMaxMarkerSize;}if(AM===u.DssGraphMarkerShapeCircle){AL=v._CIRCLE;}else{if(AM===u.DssGraphMarkerShape2DPie||AM===u.DssGraphMarkerShape2DRingPie){AL=v._PIE;}}if(this.mIsSeriesByCol){AN=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AJ],AO);}else{AN=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AO],AJ);}AI=AK.GetScaledSize(AN,this.mMaxMarkerSize,AL);}return AI;}function A(AQ,AP){var AO=this.mChartContextPtr,Aa=t.DssGraphRiser,AX,AU,AN=this.mMarkerShape,AS=(AN===u.DssGraphMarkerShape2DPie||AN===u.DssGraphMarkerShape2DRingPie),AK=null,AM,AW,Ab,AI,AR=[],AJ;AX=(this.mSeriesSet.length>AQ)?this.mSeriesSet[AQ]:AQ;AU=new W.TripleId({ObjectId:Aa,SeriesId:AX,GroupId:AP});if(!this.mIsSeriesByCol){AU.mSeriesId=(this.mSeriesSet.length>AP)?this.mSeriesSet[AP]:AP;AU.mGroupId=AQ;}if(this.mDatasetPtr&&this.mDatasetPtr.useSliceWindow){if(this.mDatasetPtr.IsInSlicedWindow(AU.mSeriesId,AU.mGroupId)===false){return AR;}}if(AO.checkColorByAndSizeByValue(AU,this.mDatasetPtr,this.mHasColorBy&&!AS,this.mHasSizeBy)===false){return AR;}var AL=v._RECTANGLE,Ac=c.call(this,AQ,AP);e.call(this,AQ,AP,Ac);if(AN===u.DssGraphMarkerShapeRectangle||AN===u.DssGraphMarkerShapeGMTick){AJ=Y.call(this,AQ,AP);if(AN===u.DssGraphMarkerShapeGMTick){AL=v._TICKER;}if(AJ.width<=0){AJ.width=1;}if(AJ.height<=0){AJ.height=1;}if(AN===u.DssGraphMarkerShapeRectangle){AK=new W.RectangleObject({TripleId:AU,GraphObjectManager:this,Area:AJ,GraphCollectionObject:Ac,IsOnlyForToolTip:false,Shape:AL});}else{var AV=AO.transformRectToTicker(AJ,false);if(AV.length>=2){AK=new W.StraightLineObject({TripleId:AU,GraphObjectManager:this,StartPoint:AV[0],EndPoint:AV[1],GraphCollectionObject:null,Shape:AL});}else{return AR;}}}else{if(AS){var AZ=0;if(AN===u.DssGraphMarkerShape2DRingPie){AZ=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new W.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:AO,Layout:0,PlotType:U.GMPPT_GRID,MaxRadius:this.mMaxMarkerSize,ShownDataLabels:this.shownDataLabels});}AM=this.mDatasetPtr.GetPieCountAtOneDataPoint(AU.mSeriesId,AU.mGroupId);for(AW=0;AW<AM;++AW){Ab=R.call(this,AU.mSeriesId,AU.mGroupId,AW);AI=this.mPieRenderer.drawSinglePie(AU.mSeriesId,AU.mGroupId,AW,Ab,AM);AR=AR.concat(AI);}}else{var AT=g.call(this,AQ,AP),AY=o.call(this,AQ,AP);if(AY<=0){return AR;}if(AN===u.DssGraphMarkerShapeSquare){AJ=this.mChartContextPtr.transformToRect(AT,AY,true,AJ);AK=new W.RectangleObject({TripleId:AU,GraphObjectManager:this,GraphCollectionObject:null,Area:AJ,Shape:AL});}else{AL=v._CIRCLE;AK=new W.MarkerObject({TripleId:AU,MarkerPosition:AT,MarkerShape:AN,IsIsometric:true,MarkerSize:AY,GraphObjectManager:this,GraphCollectionObject:Ac,Shape:AL});}}}if(AR.length===0&&AK){AR.push(AK);}return AR;}function n(AK,AO,AN,AI,AM){var AL=new W.TripleId(t.DssGraphDataText,AN,AI);s.restore();this.mDatasetPtr.getSizeByDataFormat(s,AN,AI);var AJ=new W.NumberObject({TripleId:AL,GraphObjectManager:this,Number:AK,NumberFormat:s,GraphCollectionObject:AM,Locale:0,clientDrag:false,DataSet:null});if(AJ){AO=AJ.mText;}return AO;}function D(AO,AN){var AL="",AQ=(this.mSeriesSet.length>AO)?this.mSeriesSet[AO]:AO,AK=AN,AM=this.mChartContextPtr.GetGraphMatrixContext(),AJ=this.mDatasetPtr,AP=AJ.dataLabelStyle;if(!this.mIsSeriesByCol){AQ=(this.mSeriesSet.length>AN)?this.mSeriesSet[AN]:AN;AK=AO;}if((AP===N)&&AM.mHasSizeBy){var AI;if(this.mIsSeriesByCol){AI=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AO],AN);}else{AI=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AN],AO);}if(!!AI===false){return null;}AL=n.call(this,AI,AL,AQ,AK,null);}var AR=new W.TextObject({TripleId:new W.TripleId({ObjectId:t.DssGraphDataText,SeriesId:AQ,GroupId:AK}),GraphObjectManager:this,OnMarker:true});AR.SetText(AL);return AR;}function Z(AJ,AM){if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle||this.mMarkerShape===u.DssGraphMarkerShapeGMTick){return new W.Rect2D({Rect2D:Y.call(this,AJ,AM)});}var AI=g.call(this,AJ,AM),AK=o.call(this,AJ,AM),AL=Math.floor(AK+0.5);return new W.Rect2D({x:AI.x-AL,y:AI.y-AL,width:AL*2,height:AL*2});}function k(){var AL,AI,AN=this.mXArity,AK=this.mYArity,AO;for(AL=0;AL<AN;++AL){for(AI=0;AI<AK;++AI){var AP=(this.mSeriesSet.length>AL)?this.mSeriesSet[AL]:AL;var AJ=AI;if(!this.mIsSeriesByCol){AP=(this.mSeriesSet.length>AI)?this.mSeriesSet[AI]:AI;AJ=AL;}if(this.mDatasetPtr.showSeriesDatalabel(AP)===false){continue;}var AM=new W.GridDataLabelInfo();AM.mIsValid=true;AM.mGroupId=AJ;AM.mSeriesId=AP;AM.mXIndex=AL;AM.mYIndex=AI;AM.mHostMarkerBound=Z.call(this,AL,AI);AM.mLabelPtr=D.call(this,AL,AI);if(AM.mLabelPtr===null||AM.mLabelPtr===undefined){AM.mIsValid=false;continue;}else{}this.mDataLabels.push(AM);}}}function AC(){var AK,AI=286,AP=this.mChartContextPtr,AM=AP.GetGraphMatrixContext(),AJ,AL,AN=this.mMarkerCollectionSet;AN.splice(0,AN.length);var AO;if(this.mHasColorBy){return ;}if(AP.mIsGraphMatrix){AL=AM.markerToShape(AM.mMarkerShape);}if(AL!==v._PIE){AK=V.create(AI,0,0);AJ=new W.GraphCollectionObject({TripleId:AK,GraphObjectManager:this,CollectionType:C.CT_GENERAL_SHAPE,Shape:AL});AN.push(AJ);}else{}}function f(AJ){var AK=this.mDataLabels,AM=AK[AJ].mHostMarkerBound,AL={x:AM.x+0.5*AM.width,y:AM.y+0.5*AM.height},AN=AL.x,AI=AL.y;AN+=AM.width%2;AI+=AM.height%2;AK[AJ].mLabelPtr.MoveTo(AN,AI,q.CENTER);}function I(AI,AJ){return AJ*this.mXArity+AI;}function AF(AI,AJ){return new W.Rect2D({x:AI.x-AJ,y:AI.y-AJ,width:AI.width+2*AJ,height:AI.height+2*AJ});}function G(AJ,AK){var AI=new W.Rect2D({x:0,y:0,width:this.mChartContextPtr.mGraphWidth,height:this.mChartContextPtr.mGraphHeight});if(AJ.x<AI.x+AK||AJ.x+AJ.width+AK>=AI.x+AI.width){return false;}return !(AJ.y<AI.y+AK||AJ.y+AJ.height+AK>=AI.y+AI.height);}function H(){var AR,AP,AI=this.mDataLabels,AY=AI.length,AL=this.mChartContextPtr,AX=AL.GetGraphMatrixContext(),AM=AX.getPadding(T.kDataLabel),AW,AS,AQ,AU,AZ={};for(AW=0;AW<AY;++AW){AU=I.call(this,AI[AW].mXIndex,AI[AW].mYIndex);AZ[AU]=AW;}for(AW=0;AW<AY;++AW){var AJ,AV,AT,AN,AK=false;f.call(this,AW);AJ=this.mDataLabels[AW].mLabelPtr.GetBoundingRectNoRotation(true);AT=AF.call(this,AJ,AM);AV=G.call(this,AJ,AM);if(!AV){continue;}AR=AI[AW].mXIndex;AP=AI[AW].mYIndex;for(AS=AR-1;AS<=AR+1;AS++){if(AS<0||AS>=this.mXArity){continue;}for(AQ=AP-1;AQ<=AP+1;AQ++){if(AQ<0||AQ>=this.mYArity){continue;}if(AS===AR&&AQ===AP){continue;}AU=I.call(this,AS,AQ);AN=AZ[AU];if(AN>=AI.length){continue;}if(!!AI[AN]===false){continue;}if(AI[AN].mIsValid===false||!!AI[AN].mLabelPtr===false){continue;}AK=AT.HasIntersection(AI[AN].mHostMarkerBound);if(AK){break;}if(AI[AN].mIsDisPlayed){var AO=AI[AN].mLabelPtr.GetBoundingRectNoRotation(true);AK=AK||AT.HasIntersection(AO);}if(AK){break;}}if(AK){break;}}if(!AK){AI[AW].mIsDisPlayed=true;AI[AW].mLabelPtr.mIsShown=true;this.AddToMapAndList(this.mDataLabels[AW].mLabelPtr);}else{AI[AW].mLabelPtr.mIsShown=false;}}}function a(){var AN,AI=this.mChartContextPtr;if(AI.mIsGraphMatrix){var AO=AI.GetGraphMatrixContext();if(this.mDatasetPtr.showDatalabels()){var AJ=this.dataLabelManager;if(AJ===null||AJ===undefined){AN=new W.Rect2D({x:0,y:0,width:AI.mGraphWidth,height:AI.mGraphHeight});AJ=this.dataLabelManager=new W.DataLabelManager({DataArea:AN});AJ.ChartContext=AI;}if(AO.mMarkerShape===u.DssGraphMarkerShape2DPie||AO.mMarkerShape===u.DssGraphMarkerShape2DRingPie){var AM=[];this.mPieRenderer.enableDataLabel(AJ,AM);var AK,AP=this.mPieRenderer.dataLabels,AL=AP.length;for(AK=0;AK<AL;++AK){var AQ=AP[AK].Label;if(AQ.mIsShown){this.AddToMapAndList(AQ);}}}else{k.call(this);this.mDataLabels.sort(K);H.call(this);}}}}mstrmojo.chart.GridChartPlot=mstrmojo.declare(mstrmojo.chart.GridBasePlot,null,{scriptClass:"mstrmojo.chart.GridChartPlot",mXArity:0,mYArity:0,mDataGroup:1,mIsSeriesByCol:false,mIsAutoFitMode:false,mDataLabelTextMode:0,mMaxDataVal:0,mMinDataVal:0,mMaxMarkerSize:0,mMinMarkerSize:0,mPreXCoord:0,mPreYCoord:0,mUniformColorMode:0,mSeriesSet:null,mMarkerCollectionSet:null,mAutoFitMarkerRect:null,mAdjustMarkerRect:null,mDataLabels:null,mPieRenderer:null,mPieCentersPool:null,init:function z(AI){this._super(AI);this.mSeriesSet=[];this.mMarkerCollectionSet=[];this.mDataLabels=[];this.mAutoFitMarkerRect=new W.Rect2D();this.mAdjustMarkerRect=new W.Rect2D();},AssignSeries:function w(AI){this.mSeriesSet=AI.slice();},GetMaxElementRadius:function AH(){if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle){return Math.min(this.mAdjustMarkerRect.width,this.mAdjustMarkerRect.height);}return this.mMaxMarkerSize;},GenerateMapAndList:function y(){var AL=this.mDatasetPtr,AI=this.mDataArea,AN,AM,AJ,AP,AQ;if(AL===null||AL===undefined){return ;}if((AL.mHasMetrics)&&(this.mSeriesSet.length===0)){return ;}if(AI.width*AI.height===0){return ;}AA.call(this);E.call(this);AC.call(this);AP=this.mXArity;AQ=this.mYArity;for(AN=0;AN<AP;++AN){for(AM=0;AM<AQ;++AM){var AK=A.call(this,AN,AM),AO=AK.length;for(AJ=0;AJ<AO;++AJ){this.AddToMapAndList(AK[AJ]);}}}if(this.mChartContextPtr.mImageUsage===0){a.call(this);}AL.resetDataWindow();}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","CategoryAxis","PlotManager","GridChartPlot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,K=O.enums,A=K.EnumOrientation,E=K.EnumDSSGraphObjectManager,H=O.model,P=H.enums,D=P.EnumDSSGraphProperty;var C=new O.Rect2D(),B=new O.Rect2D();mstrmojo.chart.PlotOption=mstrmojo.provide("mstrmojo.chart.PlotOption",{});function R(S){var T,U;if(this.mChartContextPtr.mIsGraphMatrix){U=O.PlotId0;}else{U=new O.TripleId();U.mObjectId=E.DssPlot;U.mSeriesId=S;}T=new O.GridChartPlot({TripleId:U,GraphObjectManager:this,Area:O.gEmptyRect});T.SetDataset(this.mDatasetPtr);return T;}function Q(U,S){var T=this.mChartAreaOptions.chartAreaNumber,W=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet,V;W[0].SetDeviceDataArea(U);for(V=0;V<T;++V){this.mPlots[V].AssignDataArea(S[V],!this.mIsReuseYAxis);}}function N(Z,V){if(V){var X=new O.Rect2D({Rect2D:Z}),a=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;a[0].AdjustTitleArea(X);a[0].AdjustDataArea(X,0,0,true);return X;}var Y=!(this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet,b=Y.length,S=[],W,U;this.CalculateChartAreas(Z,S);for(U=0;U<b;++U){Y[U].AdjustTitleArea(S[U]);Y[U].AdjustDataArea(S[U],0,0,true);}W=S;var T=W.length;C.Reset(0,0,0,0);B.ResetRect(W[0]);for(U=1;U<T;++U){if(!this.RectangleIntersection(B,W[U],C)){B.Reset(0,0,0,0);break;}B.ResetRect(C);}return B;}function F(S){var T=new O.CategoryAxisInfo(),U,X,V,W=this.mDatasetPtr.GetSeriesByColumn();if(this.mIsReuseYAxis){T.ToY(!W);}else{T.ToX(W);}U=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;if(U.length===0){X=new O.CategoryAxis({TripleId:T.mId,GraphObjectManager:this,AxisLabelsLocation:T.mAxisLabelsLocation,AxisDirection:T.mAxisDirection});X.SetDataset(this.mDatasetPtr);U.push(X);}this.mPlots[S].AssignAxis(U[0],this.mIsReuseYAxis);if(this.mIsReuseYAxis){T.ToX(W);}else{T.ToY(!W);}T.mId.mSeriesId=S;V=(!this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet;X=new O.CategoryAxis({TripleId:T.mId,GraphObjectManager:this,AxisLabelsLocation:T.mAxisLabelsLocation,AxisDirection:T.mAxisDirection});X.SetDataset(this.mDatasetPtr);V.push(X);this.mPlots[S].AssignAxis(V[S],!this.mIsReuseYAxis);}function M(){var S=this.mChartContextPtr.GetGraphMatrixContext();if(S){this.mPlotOption.mIsAutoFitMode=!S.mHasSizeBy;this.mPlotOption.mMaxDataVal=S.mMaxSizeVal;this.mPlotOption.mMinDataVal=S.mMinSizeVal;this.mPlotOption.mMarkerShape=S.mMarkerShape;}}mstrmojo.chart.GridChartPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.GridChartPlotManager",mPlots:null,mXAxisSet:null,mYAxisSet:null,mIsReuseYAxis:false,mPlotOption:{},init:function L(S){this._super(S);this.mPlots=[];this.mXAxisSet=[];this.mYAxisSet=[];this.mPlotOption={mIsAutoFitMode:false,mMaxDataVal:100000,mMinDataVal:0,mMarkerShape:4};this.mIsReuseYAxis=false;},Draw:function J(){this._super();var U=this.mYAxisSet.length,V=this.mXAxisSet.length,T=this.mPlots.length,S;for(S=0;S<U;++S){this.mYAxisSet[S].Draw();}for(S=0;S<V;++S){this.mXAxisSet[S].Draw();}for(S=0;S<T;++S){this.mPlots[S].Draw();}},LoadProperties:function G(){this._super();this.mIsReuseYAxis=(this.mChartAreaOptions.mOrientation===A.OR_HORIZONTAL);M.call(this);},GenerateMapAndList:function I(){var S=this.mPlotArea,d=this.mChartAreaOptions,T=this.mGraphObjectManagerList,U=this.mChartContextPtr,Y,a;if(S.width*S.height===0){return ;}if(this.mDatasetPtr===null||this.mDatasetPtr===undefined){return ;}this.LoadProperties();var e=d.chartAreaNumber;for(Y=0;Y<e;++Y){var W=R.call(this,Y);W.AssignSeries(d.seriesDistribution[Y]);W.mLegendPtr=this.mLegendPtr;this.mPlots.push(W);F.call(this,Y);}a=this.mPlots.length;for(Y=0;Y<a;++Y){T.push(this.mPlots[Y]);}a=this.mXAxisSet.length;for(Y=0;Y<a;++Y){T.push(this.mXAxisSet[Y]);}a=this.mYAxisSet.length;for(Y=0;Y<a;++Y){T.push(this.mYAxisSet[Y]);}var c=N.call(this,S,true),V=N.call(this,c,false);if(V.width<0){V.width=0;}if(V.height<0){V.height=0;}var b=S.y+Math.max(c.y-S.y,V.y-c.y),f=S.y+S.height-Math.max(S.y+S.height-(c.y+c.height),c.y+c.height-(V.y+V.height))-b;V.y=b;V.height=f;if(U.mManualLayoutMode&&!this.mRecalculateFrame){V=S;}else{}var X=[];this.CalculateChartAreas(V,X);if(U.isUADataAreaOutput()){var Z=U.getUniformAxisContext();X[0].x=Z.mDataAreaLeftMargin;X[0].y=Z.mDataAreaTopMargin;X[0].width=U.mGraphWidth-X[0].x-Z.mDataAreaRightMargin;X[0].height=U.mGraphHeight-X[0].y-Z.mDataAreaBottomMargin;this.mXAxisSet[0].TrimAxisPadding(X[0],false);this.mYAxisSet[0].TrimAxisPadding(X[0],false);V=X[0];}Q.call(this,V,X);a=this.mPlots.length;for(Y=0;Y<a;++Y){this.mPlots[Y].GenerateMapAndList();}a=this.mXAxisSet.length;for(Y=0;Y<a;++Y){this.mXAxisSet[Y].GenerateMapAndList();}a=this.mYAxisSet.length;for(Y=0;Y<a;++Y){this.mYAxisSet[Y].GenerateMapAndList();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumValueAxis","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","ValuePlot","GraphObjectManager");var d=mstrmojo.chart,Z=d.enums,B=Z.EnumGraphMajorType,D=Z.EnumAxisDirection,A=Z.EnumOrientation,c=Z.EnumValueAxis,f=Z.EnumDSSGraphObjectManager,Y=d.gNullTripleId,T=mstrmojo.chart.model,h=T.enums,J=h.EnumDSSGraphType,K=h.EnumDSSGraphProperty,M=h.EnumDSSGraphObject;var G=new d.Rect2D(),I=new d.Rect2D();function F(j){var k=this.mChartContextPtr;return k.mirrorPrimaryInBubbleScatter(j);}function P(k,j,l){var n=this.mChartContextPtr;if(n.mIsGraphMatrix===false){return k;}if(k==="X1"||k==="Y1"){if(F.call(this,l)){k=k[0]+"2";j=(k==="X2")?4:2;}}return{Key:k,Index:j};}function N(){var j=this.mChartContextPtr.GetGraphType();return((j===J.DssGraphTypeDualAxis_X_Y_Scatter)||(j===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels)||(j===J.DssGraphTypeBubble_DualAxis)||(j===J.DssGraphTypeBubble_DualAxis_With_Labels));}function b(){return(this.mChartAreaOptions.orientation===A.OR_VERTICAL);}function O(p,n){var k=this.Y1Axis[n],q,o=new d.Rect2D({Rect2D:p}),l,r,j;k.TrimDeviceDataArea(o);k.SetDeviceDataArea(o);l=new d.Rect2D({Rect2D:o});k.AdjustDeviceDataArea(l,true);r=new d.Rect2D({Rect2D:l});if(N.call(this)){q=this.Y2Axis[n];q.TrimDeviceDataArea(o);q.SetDeviceDataArea(o);j=new d.Rect2D({Rect2D:o});q.AdjustDeviceDataArea(j,true);this.RectangleUnion(l,j,r);}k.UpdateTitleAndLabelArea(r);if(N.call(this)){q.UpdateTitleAndLabelArea(r);}}function C(k,l){var j=0,n=[this.XAxis,this.Y1Axis,this.Y2Axis];if(((l===1||l===2)&&b.call(this))||(l===0&&!b.call(this))){j=k;}return n[l][j];}function E(t,x){var n=0,s=0,o=Number.MAX_VALUE,w=-o,l,v,r=0,u=[],q=0,AA,k,j,z=false;if(this.mChartContextPtr.mIsUniformAxisMode){var p=this.mChartContextPtr.getUniformAxisContext(),y=p.ValueAxis;switch(x){case 0:o=y.X1.Min;w=y.X1.Max;l=y.X1.Metrics.concat();break;case 1:o=y.Y1.Min;w=y.Y1.Max;l=y.Y1.Metrics.concat();break;case 2:o=y.Y2.Min;w=y.Y2.Max;l=y.Y2.Metrics.concat();break;case 3:o=y.Z.Min;w=y.Z.Max;l=[];break;case 4:o=y.X2.Min;w=y.X2.Max;l=y.X2.Metrics.concat();break;default:o=y.Y1.Min;w=y.Y1.Max;l=y.Y1.Metrics.concat();break;}return{Min:o,Max:w,Metrics:l};}if(x===1||x===2){s=1;}else{if(x===3){s=2;}}v=this.mDatasetPtr.GetGroupCount();if(t===-3){r=this.mDatasetPtr.GetSeriesCount();for(n=0;n<r;++n){u.push(n);}}else{u=this.mChartAreaOptions.seriesDistribution[t];}AA=u.length;for(n=0;n<v;++n){for(q=0;q<AA;++q){if((x===0||x===3)||((x===1||x===2)&&((x-1)===this.VecSeriesVAIndex[u[q]]))){k=this.mDatasetPtr.GetData(u[q],n,s);}if(k!==null){j=k;if(!z){z=true;}if(o>j){o=j;}if(w<j){w=j;}}}}if(o>w){o=0;w=0;}if(z){return{Min:o,Max:w};}}function L(r){var k=[],j,n,q=this.Y1Axis.length,l,p,o;j=N.call(this);for(n=0;n<q;++n){p=new d.Rect2D({Rect2D:r});o=new d.Rect2D({Rect2D:r});if(j){this.Y2Axis[n].ReserveTitleAndLabels(o,this.mBottomMargin,this.mTopMargin);p=o;p.y=r.y;p.height=r.height;}this.Y1Axis[n].ReserveTitleAndLabels(p,this.mBottomMargin,this.mTopMargin);if(j){o=p;o.y=r.y;o.height=r.height;}this.Y1Axis[n].AdjustDeviceDataArea(p,false);k.push(p);if(j){this.Y2Axis[n].AdjustDeviceDataArea(o,false);}k.push(o);}l=k.length;I.ResetRect(k[0]);G.Reset(0,0,0,0);var s;for(n=1;n<l;++n){if(!this.RectangleIntersection(I,k[n],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function X(n){var p=[],l,j=this.XAxis.length,k,q,o;for(l=0;l<j;++l){o=this.XAxis[l];q=new d.Rect2D({Rect2D:n});o.ReserveTitleAndLabels(q,this.mLeftMargin,this.mRightMargin);o.AdjustDeviceDataArea(q,false);p.push(q);}I.ResetRect(p[0]);G.Reset(0,0,0,0);k=p.length;for(l=1;l<k;++l){if(!this.RectangleIntersection(I,p[l],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function S(p){var n,l,q=this.Y1Axis.length,k=this.XAxis.length,o=this.mChartAreaOptions.chartAreaNumber;for(n=0;n<q;++n){if(b.call(this)){this.Y1Axis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);}}else{for(l=0;l<o;++l){this.Y1Axis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);}}}}for(n=0;n<k;++n){if(b.call(this)){for(l=0;l<o;++l){this.XAxis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);}}else{this.XAxis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);}}}function e(j){}function U(){var l,n=this.Y1Axis.length,j=this.Y2Axis.length,k=this.XAxis.length;for(l=0;l<n;++l){this.Y1Axis[l].generateAxisLine(this.mGraphObjectList);}if(N.call(this)){for(l=0;l<j;++l){this.Y2Axis[l].generateAxisLine(this.mGraphObjectList);}}for(l=0;l<k;++l){this.XAxis[l].generateAxisLine(this.mGraphObjectList);}}function Q(){var l=this.mChartContextPtr.GetGraphMajorType(),j=0,k;if(l===B.GMT_SCATTER||l===B.GMT_BUBBLE){j=this.mDatasetPtr.GetSeriesCount();k=this.mChartContextPtr.GetGraphType();if(k===J.DssGraphTypeX_Y_Scatter||k===J.DssGraphTypeX_Y_Scatter_with_Labels||k===J.DssGraphTypeBubble||k===J.DssGraphTypeBubble_With_Labels){return j>=1;}if(k===J.DssGraphTypeDualAxis_X_Y_Scatter||k===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels||k===J.DssGraphTypeBubble_DualAxis||k===J.DssGraphTypeBubble_DualAxis_With_Labels){return j>=2;}}return false;}function H(l,r,s,j){var p=this.mChartContextPtr.getAxisTripleId(l),n=new d.ValueAxis({TripleId:p,GraphObjectManager:this,Min:r.Min,Max:r.Max,LargerGridInterval:false,PrimaryMetricIndex:r.Metrics,IsPercent:false,AxisDirection:s,IsShown:j,Key:l});var k=this.mChartContextPtr;if(k.mIsGraphMatrix&&n.mIsUniformAxis===false){var o=k.getUniformAxisInformation(p.mObjectId),q=o.CondenseEnforced;n.checkCondense(!!q);}return n;}function g(l,k,p,r,n,j){var q=E.call(this,k,p);if(q){var o=H.call(this,l,q,r,n);j.push(o);this.mGraphObjectManagerList.push(o);}}mstrmojo.chart.ValuePlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.ValuePlotManager",ValuePlot:[],XAxis:[],Y1Axis:[],Y2Axis:[],ZAxis:[],VecSeriesVAIndex:[],init:function a(j){this._super(j);this.ValuePlot=[];this.XAxis=[];this.Y1Axis=[];this.Y2Axis=[];this.ZAxis=[];this.VecSeriesVAIndex=[];},Draw:function W(){var o,l=0,p=[this.XAxis,this.Y2Axis,this.Y1Axis],n,k=this.ValuePlot;d.GraphObjectManager.prototype.Draw.apply(this,[]);for(o=0;o<=2;++o){n=p[o];for(l=0;l<n.length;++l){n[l].Draw();}}for(o=0;o<k.length;++o){k[o].Draw();}},GenerateMapAndList:function V(){var o=this.mChartContextPtr,p=this.mPlotArea,AE=this.mGraphObjectManagerList,q=o.isUADataAreaOutput(),x,z,u,v,k,AB,AC,AD=0,l,r,j,AG,AF,y,n,t=[],w,s;if(p.width<=0||p.height<=0){return ;}this.LoadProperties();if(!Q.call(this)){return ;}if(b.call(this)){z=P.call(this,"X1",0,true);g.call(this,z.Key,-3,z.Index,D.AD_X,!q,this.XAxis);for(AD=0;AD<this.mChartAreaOptions.chartAreaNumber;++AD){z=P.call(this,"Y1",1,false);g.call(this,z.Key,AD,z.Index,D.AD_Y,!q,this.Y1Axis);if(N.call(this)){z=P.call(this,"Y2",2,false);g.call(this,z.Key,AD,z.Index,D.AD_Y,!q,this.Y2Axis);}}}else{z=P.call(this,"Y1",1,false);g.call(this,z.Key,-3,z.Index,D.AD_Y,!q,this.Y1Axis);if(N.call(this)){z=P.call(this,"Y2",2,false);g.call(this,z.Key,-3,z.Index,D.AD_Y,!q,this.Y2Axis);}for(AD=0;AD<this.mChartAreaOptions.chartAreaNumber;++AD){z=P.call(this,"X1",0,true);g.call(this,z.Key,AD,z.Index,D.AD_X,!q,this.XAxis);}}if(o.GetGraphMajorType()===B.GMT_BUBBLE){if(o.isUADataAreaOutput()){l=o.getUniformAxisContext();x={Metrics:[]};x.Min=l.ValueAxis.Z.Min;x.Max=l.ValueAxis.Z.Max;}else{x=E.call(this,-3,3);}if(x){AB=H.call(this,"Z",x,D.AD_Z,false);this.ZAxis.push(AB);AE.push(AB);}}j=X.call(this,p);this.mLeftMargin+=j.x-p.x;this.mRightMargin+=p.x+p.width-(j.x+j.width);this.mTopMargin+=j.y-p.y;this.mBottomMargin+=p.y+p.height-(j.y+j.height);j.width=Math.max(0,j.width);j.height=Math.max(0,j.height);r=L.call(this,j);r.width=Math.max(0,r.width);r.height=Math.max(0,r.height);AF=p.y+Math.max(j.y-p.y,r.y-j.y);y=p.y+p.height-Math.max(p.y+p.height-(j.y+j.height),j.y+j.height-(r.y+r.height))-AF;r.y=AF;r.height=y;AG=p.x+Math.max(j.x-p.x,r.x-j.x);n=p.x+p.width-Math.max(p.x+p.width-(j.x+j.width),j.x+j.width-(r.x+r.width))-AG;r.x=AG;r.width=n;if(o.mManualLayoutMode&&!this.mRecalculateFrame){r=p;}else{}this.CalculateChartAreas(r,t);if(o.isUADataAreaOutput()){var AA=o.getUniformAxisContext();t[0].x=AA.mDataAreaLeftMargin;t[0].y=AA.mDataAreaTopMargin;t[0].width=o.mGraphWidth-t[0].x-AA.mDataAreaRightMargin;t[0].height=o.mGraphHeight-t[0].y-AA.mDataAreaBottomMargin;r=t[0];}if(b.call(this)){j=new d.Rect2D({Rect2D:r});u=this.XAxis[0];u.TrimDeviceDataArea(j);u.SetDeviceDataArea(j);u.AdjustDeviceDataArea(j,true);u.UpdateTitleAndLabelArea(j);for(AD=0;AD<this.mChartAreaOptions.chartAreaNumber;++AD){O.call(this,t[AD],AD);}}else{O.call(this,r,0);for(AD=0;AD<this.mChartAreaOptions.chartAreaNumber;++AD){u=this.XAxis[AD];j=new d.Rect2D({Rect2D:t[AD]});u.TrimDeviceDataArea(j);u.SetDeviceDataArea(j);u.AdjustDeviceDataArea(j,true);u.UpdateTitleAndLabelArea(j);}}if(o.mManualLayoutMode&&!this.mRecalculateFrame){r=p;}for(AD=0;AD<this.mChartAreaOptions.chartAreaNumber;++AD){if(!o.mIsGraphMatrix){AC=new d.TripleId({ObjectId:M.DssGraphFrame,SeriesId:AD});w=new d.RectangleObject({TripleId:AC,GraphObjectManager:this,Area:t[AD]});this.AddToMapAndList(w);}e.call(this,t);S.call(this,t);U.call(this);u=C.call(this,AD,0);v=C.call(this,AD,1);if(N.call(this)){k=C.call(this,AD,2);}if(o.mIsGraphMatrix){AC=d.PlotId0;}else{AC=new d.TripleId({ObjectId:f.DssPlot,SeriesId:AD});}s=new d.ValuePlot({TripleId:AC,GraphObjectManager:this,Area:t[AD]});this.ValuePlot.push(s);AE.push(s);s.SetDataset(this.mDatasetPtr);s.mLegendPtr=this.mLegendPtr;s.AssignValueAxis(u,0);s.AssignValueAxis(v,1);if(N.call(this)){s.AssignValueAxis(k,2);}if(o.GetGraphMajorType()===B.GMT_BUBBLE){s.AssignValueAxis(this.ZAxis[0],3);}s.AssignSeriesInfo(this.mChartAreaOptions.seriesDistribution[AD],this.VecSeriesVAIndex);s.GenerateMapAndList();}if(o.isUADataAreaOutput()){l=o.getUniformAxisContext();t[0].x=l.mDataAreaLeftMargin;t[0].y=l.mDataAreaTopMargin;t[0].width=o.mGraphWidth-t[0].x-l.mDataAreaRightMargin;t[0].height=o.mGraphHeight-t[0].y-l.mDataAreaBottomMargin;r.ResetRect(t[0]);}},LoadProperties:function R(){var q=this.mChartContextPtr,l=this.VecSeriesVAIndex,k,j,n,p,o;this._super();k=this.mDatasetPtr.GetSeriesCount();l.splice(0,l.length);for(j=0;j<k;++j){p=new d.TripleId({ObjectId:M.DssGraphRiser,SeriesId:j});l[j]=c.VA_Y1;if(N.call(this)){o=q.GetProperty(K.DssGraph2DSplitYAutomatic,Y);if(o){n=q.GetProperty(K.DssGraph2DSDSplitY,p);if(n){l[j]=(n===false)?c.VA_Y1:c.VA_Y2;}}else{l[j]=(j%2===0)?c.VA_Y1:c.VA_Y2;}}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","MarkerObject","SeriesRenderer","Plot","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumGraphMatrixElementSizeMode","EnumGraphMatrixDataLabelPosition","EnumFontRotation","EnumAnchorPoint","EnumImageUsage","EnumGenericDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphProperty","EnumDSSGraphObject");var AF=mstrmojo.chart,AC=AF.ChartConstants,I=AF.enums,h=I.EnumCollectionType,AJ=I.EnumLayout,o=I.EnumOrientation,k=I.EnumValueAxis,AL=I.EnumAnchorPoint,B=I.EnumFillType,AX=I.EnumGenericDirection,j=I.EnumImageUsage,t=I.EnumGraphMatrixElementSizeMode,W=I.EnumGraphMatrixDataLabelPosition,D=I.EnumFontRotation,AB=mstrmojo.chart.model,n=AB.enums,AS=n.EnumDSSGraphMarkerShape,N=n.EnumShapeType,AQ=n.EnumDSSGraphObject,A=AF.common.Utility;var AN=0,r=1,x=2,R=3;var z=new AF.Rect2D(),O=new AF.Rect2D();function L(){var Ab=this.mSeriesInfo,AZ=0,Ac=0,Aa,AY=Ab.length;for(Aa=0;Aa<AY;++Aa){if(Ab[Aa].mValueAxis===k.VA_Y1){AZ=1;}if(Ab[Aa].mValueAxis===k.VA_Y2){Ac=1;}}return AZ+Ac;}function e(AZ){var AY=0;switch(this.mBarRenderType){case r:AY=AZ.seriesInfoID;break;case x:if(L.call(this)>1&&!this.mpABLPlotContext.mABLOptions.mSplitDualAxes){AY=this.mSeriesInfo[AZ.seriesInfoID].mValueAxis;}break;}return AY;}function S(Ac){var AZ=this.mChartContextPtr.GetGraphMatrixContext(),Ad=this.mDatasetPtr,Ab=this.mSeriesInfo,Ae,Aa,AY;if(AZ&&this.mHasSizeBy){Ae=Ad.GetSizeByData(Ab[Ac.seriesInfoID].mSeriesId,Ac.groupID);Ae=Ae||0;Aa=AZ.GetScaledSize(Ae,this.mBarWidth,N._BAR);Aa=Math.max(Aa,1);if(this.mBarRenderType===x){AY=Aa;if(AY%2===0){AY++;}return AY;}return Aa;}return this.mBarWidth;}function P(Ah,Ak){var AZ,Al,Ae,Af,Ag,Aa,Ai,AY,Aj,Ab,Ad=this.mpABLPlotContext,Ac=false;if(Ah.useFloat!==undefined){Ac=Ah.useFloat;}Ak=Ak||this.mBarWidth;Af=Ad.mCategoryAxisPtr;Aa=Ah.groupID;if(Ad.takeGroupCenter){Aj=this.mDatasetPtr.GetClusterDataGroup();Ai=Af.getFloatGroupMiddlePos(Aa);if(Aj<=1){Ai=Ai-0.5*Ak;}else{Ab=Ah.seriesInfoID%Aj;Ai-=0.5*Aj*Ak;Ai+=Ab*Ak;}}else{Ag=e.call(this,Ah);Ai=Af.getGroupStartPos(Aa)+this.mSpaceBetweenGroup/2+(Ak+this.mSpaceBetweenRiser)*Ag;}AZ=Math.floor(Ai+0.5);if(this.mChartContextPtr.mIsGraphMatrix){Al=Ak;if(this.mHasSizeBy){if(!this.mUseDepth){AY=S.call(this,Ah);Ae=Al-AY;Ai+=Ae*0.5;AZ=Math.round(Ai);Al=Math.round(AY);}}else{Al=(Ac?(Ai+Ak):Math.round(Ai+Ak))-AZ;}}else{Al=(Ac?(Ai+Ak):Math.round(Ai+Ak))-AZ;}if(Al===0&&Ak>=0.5){Al=1;}return{Start:AZ,Size:Al};}function H(AZ){var AY,Aa;if(this.mBarOptions.mColorBySeries){if(AZ<0||AZ>=this.mSeriesInfo.length){return true;}}else{Aa=this.mDatasetPtr.GetGroupCount();if(AZ<0||AZ>=Aa){return true;}}AY=(this.mAddedLegendMarkerSet[AZ]!==undefined);if(!AY){this.mAddedLegendMarkerSet[AZ]=true;}return AY;}function p(Ae,Aa){var Ad,Ac,AZ,Ab,AY,Af;Af=Aa.length;for(Ad=0;Ad<(Af-1);++Ad){Ac=Aa[Ad].GetBoundingRect();AZ=Aa[Ad+1].GetBoundingRect();Ab=this.mpABLPlotContext.mValueAxis[Ae].IsReverseOrder()?1:-1;if(Ac.HasIntersection(AZ)){AY=new AF.Point2D({x:Math.floor(AZ.x+AZ.height/2),y:Ac.y});if(Ab===1){AY.y+=Ac.height;}AY.y+=Math.floor(Ab*AZ.height/2);Aa[Ad+1].MoveTo(AY.x,AY.y,AL.CENTER);}}}function AM(Af,AY,Ae){var Ag,Ad,AZ,Ac,Ab,Aa=this.mBarRenderType,Ah;Ag=this.createRiserLabel(Af.seriesInfoID,Af.groupID,Ae);if(Ag===null){return null;}if(Aa===x||Aa===R){Ag.mOnMarker=true;}Ad=this.mIsVertical?AY.GetTopMiddle():AY.GetRightMiddle();AZ=this.mIsVertical?AY.GetBottomMiddle():AY.GetLeftMiddle();Ac=false;Ab=this.GetData(Af.seriesInfoID,Af.groupID);if(Ab!==null&&Ab!==undefined){Ah=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[Af.seriesInfoID].mValueAxis];Ac=(Ab<0)^Ah.IsReverseOrder();}if(Ac){Ad.swapPoints(AZ);}this.MoveLabel(Af.groupID,Ag,Ad,AZ,Af.seriesInfoID);return Ag;}function T(Aa,Ac){var Ab=this.mSeriesInfo,AZ,AY=Ab.length;for(AZ=0;AZ<AY;++AZ){if(Ac===k.VA_BOTH||Ab[AZ].mValueAxis===Ac){Aa.push(AZ);}}}function AG(){var AZ=this.mpABLPlotContext.mABLOptions;var Aa=k.VA_Y1,AY=k.VA_Y2;if(AZ.mUseDepth&&L.call(this)>1&&AZ.mDualAxes&&!AZ.mSplitDualAxes){if((AZ.mOrientation===o.OR_VERTICAL&&AZ.mDepthDirection>=90&&AZ.mDepthDirection<270)||(AZ.mOrientation===o.OR_HORIZONTAL&&AZ.mDepthDirection>=0&&AZ.mDepthDirection<180)){Aa=k.VA_Y2;AY=k.VA_Y1;}}return{First:Aa,Second:AY};}function X(Ab,Ad){if(Ad.length===0){return Ad;}var AZ,AY=[],Aa,Ac;for(AZ in Ad){if(Ad.hasOwnProperty(AZ)){Ac=Ad[AZ];Aa=this.mDatasetPtr.GetData(Ac,Ab);if(Aa!==null&&Aa<0){AY.unshift(Ac);}else{AY.push(Ac);}}}return AY;}function M(Af,AZ,Ae){var Ad=this.mpABLPlotContext.mABLOptions,Aa=Ad.mDepthDirection,AY=Ad.mOrientation,Ab=this.mBarRenderType,Ac=false;switch(this.mBarRenderType){case AN:Ac=false;break;case r:if(Ad.mUseDepth&&((AY===o.OR_VERTICAL&&Aa>=90&&Aa<270)||(AY===o.OR_HORIZONTAL&&Aa>0&&Aa<180))){Ac=true;}break;case x:case R:if((Ad.mUseDepth)&&((AY===o.OR_VERTICAL&&Aa>=180&&Aa<360)||(AY===o.OR_HORIZONTAL&&Aa>=90&&Aa<270))){Ac=true;}break;}AZ.splice(0,AZ.length);T.call(this,AZ,Ae);if(AZ.length===0){return ;}if(Ab===x||(Ab===R&&Ae!==k.VA_BOTH)){AZ=X.call(this,Af,AZ);var Ag=this.mpABLPlotContext.mValueAxis[Ae];if(Ag.IsReverseOrder()){Ac=!Ac;}}if(Ac&&AZ.length>0){AZ.reverse();}}function U(){var Ab=this.mpABLPlotContext,Aa=this.mBarOptions;if(this.mBarColumns===-1){this.mBarColumns=1;switch(this.mBarRenderType){case r:this.mBarColumns=this.mSeriesInfo.length;break;case x:if(L.call(this)>1&&!Ab.mABLOptions.mSplitDualAxes){this.mBarColumns=2;}break;}var AY=this.mGroupSize,AZ=this.evalBarStyleUnitWidth(AY,this.mBarColumns,Aa.mGapWidth);this.mBarWidth=AZ.unitWidth;this.mSpaceBetweenRiser=AZ.riserGap;this.mSpaceBetweenGroup=AZ.groupGap;}}function l(){switch(this.mpABLPlotContext.mABLOptions.mLayout){case AJ.LO_ABSOLUTE:if(this.mChartContextPtr.GetGraphMatrixContext().isCombinationChart()){return r;}return AN;case AJ.LO_CLUSTER:return r;case AJ.LO_STACKED:return x;case AJ.LO_PERCENT:return R;default:return r;}}function AO(Ab,AZ){var AY,Aa;AY=this.mDatasetPtr.GetColorByData(Ab.mSeriesId,Ab.mGroupId);if(AY){Aa=new AF.FormatFill();Aa.mFillType=B.FT_SIMPLE;Aa.mAlpha=255*0.7;Aa.mSimpleColor=AY;AZ.SetFormatFill(Aa);}}function J(){if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function E(){}function AK(Ad,AY,Ak){var Ab,Ag,Ac,Al,AZ=this.mpABLPlot,Aa=this.mpABLPlotContext,Ai=this.mSeriesInfo[Ad.seriesInfoID].mValueAxis,Aj=Aa.mValueAxis[Ai],Af=Aj.mOptions.mDrawFromZero,Ah=Aj.GetAxisOriginValue();Aj.mOptions.mDrawFromZero=(Ah===null||Ah===0);Ab=this.hPrepareData(Ad);if(A.isValidNumber(Ab)===false){return ;}Ag=this.hPrepareRect(Ad,Ab);Al=Ag.Rect;Ac=Ag.AboveBase;if(!this.hUpdateBarRect(Ad,Al,Ac,Ab)){Aj.mOptions.mDrawFromZero=Af;return ;}if(Al.width<=0||Al.height<=0){Aj.mOptions.mDrawFromZero=Af;return ;}if(!Ak){var Ae=this.hPrepareRectangleObject(Ad,Al,Ac);if(Ae){this.hPostProcessOneBar(Ad,Ae);++AZ.DPCount;if(AZ.seriesDPCount[Ad.seriesInfoID]===undefined||AZ.seriesDPCount[Ad.seriesInfoID]===null){AZ.seriesDPCount[Ad.seriesInfoID]=1;}else{++(AZ.seriesDPCount[Ad.seriesInfoID]);}}}Aj.mOptions.mDrawFromZero=Af;}function AH(Ac,AZ,Ae){var Aa,Ad,AY,Ab=[];if((Ae===k.VA_BOTH&&this.mBarRenderType===x)||this.mBarRenderType===R){Aa=AG.call(this);Ad=Aa.First;AY=Aa.Second;M.call(this,Ac,AZ,Ad);M.call(this,Ac,Ab,AY);if(Ab.length>0){AZ=AZ.concat(Ab);}}else{M.call(this,Ac,AZ,Ae);}return AZ;}function g(Ah,Aj){var Ai=this.mChartContextPtr,Ag=1500,AY=-1,AZ=-1;if(this.mBarRenderType===r&&!this.mDatasetPtr.ShouldTakeGroupCenter()){if(Aj>=Ag&&Ai.mPartialRendering){var Ab,Ae,Ak=this.mBarWidth,Ad=Ai.mRenderingWindow,Af=Ai.IsVertical(),Aa=this.mpABLPlotContext,Ac=Aa.mCategoryAxisPtr;if(Af){Ab=Ad.x;Ae=Ab+Ad.width;}else{Ab=Ad.y;Ae=Ab+Ad.height;}AY=Ab-Ac.getGroupStartPos(Ah)-this.mSpaceBetweenGroup/2;AY=Math.round(AY/(Ak+this.mSpaceBetweenRiser))-1;AY=Math.max(AY,0);AZ=Ae-Ac.getGroupStartPos(Ah)-this.mSpaceBetweenGroup/2;AZ=Math.round(AZ/(Ak+this.mSpaceBetweenRiser))+1;AZ=Math.min(AZ,Aj-1);return[AY,AZ];}}return[];}function Y(Af){var AZ=this.mpABLPlotContext,Al=this.IsReverseGroupOrder(),Ak,Ah,Ag=[],AY=[],Aa,Ab,Ad=[],Ai=[],Ae,Ac,Aj;Ak=this.mDatasetPtr.GetGroupCount();for(Aj=0;Aj<Ak;++Aj){Ah=Aj;if(Al){Ah=Ak-1-Ah;}Ag=AH.call(this,Ah,Ag,Af);Aa=Ag.length;Ac=g.call(this,Ah,Aa);for(Ab=0;Ab<Aa;++Ab){if(Ac.length===2&&(Ab<Ac[0]||Ab>Ac[1])){continue;}Ae={groupID:Ah,seriesInfoID:Ag[Ab]};AK.call(this,Ae,AY);}if(this.mBarRenderType===r){Aa=AY.length;for(Ab=0;Ab<Aa;++Ab){if(AZ.mSeriesOptions[AY[Ab].first].mValueAxis===k.VA_Y1){Ad.push(AY[Ab].second);}else{Ai.push(AY[Ab].second);}}if(Ad.length!==0){p.call(this,k.VA_Y1,Ad);}if(Ai.length!==0){p.call(this,k.VA_Y2,Ai);}}AY.splice(0,AY.length);}}function AU(AZ){var Ac=this.mChartContextPtr;if(Ac.mIsGraphMatrix&&this.mHasColorBy){return null;}if(this.mGroupCount<2){return null;}var AY,Aa=this.mDatasetPtr;AY=new AF.TripleId({ObjectId:AQ.DssGraphRiser});if(this.mBarOptions.mColorBySeries){AY.mSeriesId=this.mSeriesInfo[AZ.seriesInfoID].mSeriesId;}else{AY.mSeriesId=AZ.groupID;}var Ab=this.GetGraphObject(AY);if(Ab===undefined){if(Ac.mIsGraphMatrix){if(Aa.findCell(true,AY.mSeriesId,1)!==-1){Ab=null;return Ab;}}if(Ab===undefined){Ab=new AF.GraphCollectionObject({TripleId:AY,GraphObjectManager:this,CollectionType:(this.mIsVertical?h.CT_VERTICAL_BAR:h.CT_HORIZONTAL_BAR)});}this.AddToMap(Ab);}return this.GetGraphObject(AY);}function V(AZ){if(this.mChartContextPtr.mIsGraphMatrix){var AY=this.mpABLPlotContext.mValueAxis[AZ];if(AY){return AY.mOptions.mUseCustomMinMax;}return false;}return false;}function b(AY,AZ){if(AY.x<AZ||AY.x+AY.width+AZ>this.mChartContextPtr.mGraphWidth){return false;}return(!(AY.y<AZ||AY.y+AY.height+AZ>this.mChartContextPtr.mGraphHeight));}function f(AY,AZ,Aa){if(AY.x+AY.width+Aa<=AZ.x||AY.x>=AZ.x+AZ.width+Aa){return true;}return(AY.y+AY.height+Aa<=AZ.y||AY.y>=AZ.y+AZ.height+Aa);}function AW(Af,Aj,Ah,Ae){var Ag,Ac=0,Ab=0,Aa,Ai,AZ=this.mChartContextPtr,Ad=AZ.GetGraphMatrixContext(),AY=5;if(AZ.mIsGraphMatrix){AY=Ad.getPadding(AC.kDataLabel);}if(Ae){Aj.GetFormatFont().mFontRotation=D.FR_90;}else{Aj.GetFormatFont().mFontRotation=D.FR_NORMAL;}Ag=Aj.GetBoundingRect();switch(Ah){case W._BOTTOM:Ac=0;Ab=(Af.height+Ag.height)/2+AY;break;case W._TOP:Ac=0;Ab=-1*((Af.height+Ag.height)/2+AY);break;case W._LEFT:Ac=-1*((Af.width+Ag.width)/2+AY);Ab=0;break;case W._RIGHT:Ac=(Af.width+Ag.width)/2+AY;Ab=0;break;case W._CENTER:Ac=0;Ab=0;break;}Aa=Af.GetCenter().x+Af.width%2+Ac;Ai=Af.GetCenter().y+Af.height%2+Ab;Aj.MoveTo(Aa,Ai,AL.CENTER);}function Q(Aj,Ah,Ag,Af,Ac,Ae){var Aa=this.mChartContextPtr,Ad=Aa.GetGraphMatrixContext(),AZ,Ai=this.mpABLPlotContext.mABLOptions,Ab=Ai.mLayout,AY=Ai.mOrientation;if(Ac===null||Ac===undefined){Ac=false;}if(Ae===null||Ae===undefined){Ae=false;}if(Ac){AZ=Ae;}else{AZ=Ad.mIsNeedRotateDataLabel;}if(AY===o.OR_VERTICAL){if(Ab===AJ.LO_ABSOLUTE||Ab===AJ.LO_CLUSTER){if(Ag-Af<0){AW.call(this,Aj,Ah,W._BOTTOM,AZ);}else{AW.call(this,Aj,Ah,W._TOP,AZ);}}else{if(this.mSeriesInfo.length===1){if(Ag-Af<0){AW.call(this,Aj,Ah,W._BOTTOM,AZ);}else{AW.call(this,Aj,Ah,W._TOP,AZ);}}else{AW.call(this,Aj,Ah,W._CENTER,AZ);}}}else{if(Ab===AJ.LO_ABSOLUTE||Ab===AJ.LO_CLUSTER){if(Ag-Af<0){AW.call(this,Aj,Ah,W._LEFT,AZ);}else{AW.call(this,Aj,Ah,W._RIGHT,AZ);}}else{if(this.mSeriesInfo.length===1){if(Ag-Af<0){AW.call(this,Aj,Ah,W._LEFT,AZ);}else{AW.call(this,Aj,Ah,W._RIGHT,AZ);}}else{AW.call(this,Aj,Ah,W._CENTER,AZ);}}}}function q(Am,Af,Ag,Ah,AY,Ai){var Aa=this.mChartContextPtr,Ad=this.mDatasetPtr,Al=Aa.mIsGraphMatrix,Ac={},Ae=new AF.TripleId({ObjectId:AQ.DssGraphDataText}),Ak=-3,Aj,Ab;if(Al){var AZ=Ad.showSeriesDatalabel(Am.mSeriesId);if(AZ){Ac.SeriesId=Am.mSeriesId;Ac.GroupId=Af.groupID;Ac.SeriesInfo=Af.seriesInfoID;Ac.HostMarkerBound=Ah;Aj=this.mSGMapLabel[Ak];if(Aj===null||Aj===undefined){this.mSGMapLabel[Ak]=new AF.GraphCollectionObject({TripleId:Ae,GraphObjectManager:this,CollectionType:h.CT_TEXT});}var An=false;if(An&&this.mBarRenderType===r){Ab=this.CreateOneDataLabel(Af.groupID,this.mSeriesInfo[Af.seriesInfoID].mSeriesId,AY,this.mSGMapLabel[Ak]);}else{Ab=this.CreateOneDataLabel(this.mSeriesInfo[Af.seriesInfoID].mSeriesId,Af.groupID,AY,this.mSGMapLabel[Ak]);}if(Ab!==null&&Ab!==undefined){Ac.Label=Ab;Ab.mIsShown=false;Q.call(this,Ah,Ab,AY,Ai);this.mDataLabels.push(Ac);this.AddToMapAndList(Ab);}}}}function AP(Ai,AZ,Ad,Ab,Al){var Ao,Aj,Ag,Af,Am,Aa,Ac,Ak,Ah,An,AY,Ap,Ae;Ao=this.hPrepareData(Ai);if(Ao===null||Ao===undefined){return ;}Aj=this.hPrepareRect(Ai,Ao);Am=new AF.Rect2D({Rect2D:Aj.Rect});Ag=Aj.AboveBase;Af=Aj.AxisOriginValue;if(Am.width<0||Am.height<0){return ;}Aa=new AF.Rect2D();Aa.x=Am.x;Aa.y=Am.y;Aa.width=Am.width;Aa.height=Am.height;if(!this.hUpdateBarRect(Ai,Am,Ag,Ao)){return ;}AZ.push(Am);if(Al){Ac=false;Ak=new AF.TripleId({ObjectId:AQ.DssGraphDataText});Ah=new AF.GraphCollectionObject({TripleId:Ak,GraphObjectManager:this,CollectionType:h.CT_TEXT});if(Ac&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===r){An=this.CreateOneDataLabel(Ai.groupID,this.mSeriesInfo[Ai.seriesInfoID].mSeriesId,Ao,Ah);}else{An=this.CreateOneDataLabel(this.mSeriesInfo[Ai.seriesInfoID].mSeriesId,Ai.groupID,Ao,Ah);}if(An!==null&&An!==undefined){Q.call(this,Am,An,Ao,Af,true,Ab);AY=An.GetBoundingRect();Ad.push(AY);}}else{Ak=new AF.TripleId({ObjectId:AQ.DssGraphDataText});Ap=this.mSeriesInfo[Ai.seriesInfoID].mSeriesId;Ak.mSeriesId=Ap;Ae=this.mSGMapLabel[Ap];if(Ae===null||Ae===undefined){this.mSGMapLabel[Ap]=new AF.GraphCollectionObject({TripleId:Ak,GraphObjectManager:this,CollectionType:h.CT_TEXT});}q.call(this,Ak,Ai,Am,Aa,Ao,Af);}}function AD(Al,Ai,Aj,AY){var Ae=this.IsReverseGroupOrder(),An,Af=this.mpABLPlotContext.mCategoryAxisPtr,Ab=false,Am,Ak,AZ=[],Aa,Ad,Ah,Ag,Ac;Al.splice(0,Al.length);Ai.splice(0,Ai.length);if(this.mChartContextPtr.mIsGraphMatrix){An=Af.mGroupCount;}else{An=this.mDatasetPtr.GetGroupCount();}for(Am=0;Am<An;++Am){Ak=Am;if(Ae){Ak=An-1-Ak;}if(Ab&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===r){Aa=this.mDatasetPtr.GetGroupCount();for(Ad=0;Ad<Aa;++Ad){AZ.push(Ad);}}else{AZ=AH.call(this,Ak,AZ,k.VA_BOTH);}Ac=AZ.length;for(Ah=0;Ah<Ac;++Ah){Ag={};Ag.groupID=Ak;Ag.seriesInfoID=AZ[Ah];AP.call(this,Ag,Al,Ai,Aj,AY);}}}function w(Aj){var Ak=[],Ai=[],Al=[],Ag=0,Ae,Ad,Ac,AZ,Af,Aa,Ab=this.mChartContextPtr,Ah=Ab.GetGraphMatrixContext(),AY=5;if(Ab.mIsGraphMatrix){AY=Ah.getPadding(AC.kDataLabel);}AD.call(this,Ak,Ai,Aj,true);for(Ae=0;Ae<Ai.length;++Ae){AZ=b.call(this,Ai[Ae],AY);if(!AZ){continue;}Af=true;for(Ad=0;Ad<Ak.length;++Ad){if(Ae===Ad){continue;}Aa=f.call(this,Ai[Ae],Ak[Ad],AY);if(!Aa){Af=false;break;}}if(!Af){continue;}for(Ac=0;Ac<Al.length;++Ac){Aa=f.call(this,Ai[Ae],Al[Ac],AY);if(!Aa){Af=false;break;}}if(Af){++Ag;Al.push(Ai[Ae]);}}return Ag;}function u(){var AY,AZ;if(this.mSeriesInfo.length===0){return false;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();U.call(this);AY=w.call(this,false);AZ=w.call(this,true);return(AZ>AY);}function AV(AY){var Ab=this.mChartContextPtr,Aa=Ab.mIsGraphMatrix,AZ;if(Aa&&Ab.mIsUniformAxisMode){AZ=Ab.getUniformAxisContext();if(AY.x<AZ.mDataAreaLeftMargin||AY.x+AY.width>Ab.mGraphWidth-AZ.mDataAreaRightMargin){return false;}if(AY.y<AZ.mDataAreaTopMargin||AY.y+AY.height>Ab.mGraphHeight-AZ.mDataAreaBottomMargin){return false;}}return true;}function AI(Ag){var Am,Al,Ak,Aj,Ab=this.mChartContextPtr,An=Ab.GetGraphMatrixContext(),Aq,AY,AZ=this.mDataLabels,Ao,Af=Ab.allowOverlapBetweenDatalabels(),Aa,Ah,Ac,Ae,Ai=new AF.Rect2D({x:0,y:0,width:Ab.mGraphWidth,height:Ab.mGraphHeight}),Ap=this.mpABLPlot.dataLabelManager,Ad=5;if(Ab.mIsGraphMatrix){Ad=An.getPadding(AC.kDataLabel);}if(Ap===null||Ap===undefined){Ap=this.mpABLPlot.dataLabelManager=new AF.DataLabelManager({DataArea:Ai});Ap.ChartContext=Ab;}Ao=AZ.length;for(Am=0;Am<Ao;++Am){for(Aj=0;Aj<4;++Aj){if(An.mMarkerShape===AS.DssGraphMarkerShapeGMTick){AY=Aj;AW.call(this,AZ[Am].HostMarkerBound,AZ[Am].Label,AY,false);}else{if(Aj>0){break;}}Aq=AZ[Am].Label.GetBoundingRect();Ah=Af||b.call(this,Aq,Ad);if(!Ah){continue;}Ac=true;for(Al=0;Al<Ao;++Al){if(Al===Am){continue;}Ae=Af||f.call(this,Aq,AZ[Al].HostMarkerBound,Ad);if(!Ae){Ac=false;break;}}if(!Ac){continue;}Aa=Ag.length;for(Ak=0;Ak<Aa;++Ak){Ae=Af||f.call(this,Aq,Ag[Ak].GetBoundingRect(),Ad);if(!Ae){Ac=false;break;}}if(V.call(this,this.mSeriesInfo[AZ[Am].SeriesInfo].mValueAxis)){if(!AV.call(this,Aq)){Ac=false;}}if(Ac){if(!Af){Ap.UpdateMatrixDataLabel(Aq);}Ag.push(AZ[Am].Label);AZ[Am].IsDisplayed=true;AZ[Am].Label.mIsShown=true;if(An.mMarkerShape===AS.DssGraphMarkerShapeGMTick){break;}}}}}mstrmojo.chart.BarSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.BarSeriesRenderer",mSGMapLabel:[],mpSeriesLineInfo:null,mBarRenderType:AN,mBarWidth:0,mGroupSize:0,mSpaceBetweenRiser:0,mSpaceBetweenGroup:0,mBarColumns:-1,mBarOptions:null,mAddedLegendMarkerSet:null,mDataLabels:null,init:function s(AY){this._super(AY);this.mSGMapLabel=[];this.mAddedLegendMarkerSet=[];this.mDataLabels=[];this.mBarOptions={mOverlap:0,mGapWidth:40,mRiserShape:0,mShowErrorBar:false,mHasMiddleValue:false,mMiddleValueSize:50,mShowSeriesLines:false,mColorBySeries:true};this.LoadProperties();},SetDeviceDataArea:function F(AY){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AF.Rect2D({Rect2D:AY});}else{this.mDeviceDataArea.ResetRect(AY);}}this.mBarRenderType=l.call(this);},AddTextToMapAndList:function AA(AY,AZ){var Ab,Aa,Ad,Ac,Ae,Af;Ad=this.mSGMapLabel.length;for(Aa=0;Aa<Ad;++Aa){Ae=this.mSGMapLabel[Aa];if(Ae!==null&&Ae!==undefined){Ac=Ae.GetCollectionSize();for(Ab=0;Ab<Ac;++Ab){AZ.push(Ae.GetObjectByIndex(Ab));}Af=Ae.mTripleId;AY.push(Af,Ae);}}this.mSGMapLabel.splice(0,this.mSGMapLabel.length);this._super(AY,AZ);},CreateTrendLine:function Z(Aa,AZ,AY){this._super(Aa,AZ,AY);},GenerateMapAndList:function a(AY){var AZ=this.mChartContextPtr;if(AZ.mImageUsage!=j.OBJECT_CLIP_COMPUTATION){return this.GenerateByValueAxis(k.VA_BOTH,AY);}},GenerateByValueAxis:function G(Ac,Aa){var Ab=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();U.call(this);Y.call(this,Ac);if(Ab.mIsGraphMatrix){if(Ab.mImageUsage===j.GENERAL){if(this.mDatasetPtr.showDatalabels()){var AZ=[],AY=[];AD.call(this,AZ,AY,false,false);AI.call(this,Aa);}this.GenerateTrendLine();this.GenerateRefLine();}}this.populateRenderSequence();},LoadProperties:function y(){var Ac=this.mChartContextPtr,Aa=this.mBarOptions,Ab,AY=Ac.GetGraphMatrixContext(),AZ=AY.mElementsInfo;if(Ac.mIsGraphMatrix){Aa.mColorBySeries=!this.mChartContextPtr.isLegendByGroup();Aa.mGapWidth=10;if(AZ.Max.Mode===t._MANUAL){Ab=AZ.Max.Size*100;if(Ab<1){Ab=1;}if(Ab>100){Ab=99;}Aa.mGapWidth=100-Ab;}}if(Ac.mImageUsage!==0){return ;}},ShouldRotateDataLabel:function v(){var AZ=this.mChartContextPtr.GetGraphMatrixContext(),Aa=this.mpABLPlotContext.mABLOptions,AY=Aa.mOrientation,Ab=Aa.mLayout;if(AZ.mMarkerShape===AS.DssGraphMarkerShapeGMTick){return false;}if(AY===o.OR_HORIZONTAL){return false;}if(AZ.isCombinationChart()&&(Ab===AJ.LO_ABSOLUTE)){Ab=AJ.LO_CLUSTER;}if(Ab===AJ.LO_ABSOLUTE||this.mSeriesInfo.length===1){return u.call(this);}if(Ab===AJ.LO_CLUSTER){return true;}return false;},GetSeriesOrderByType:function d(AZ,AY,Aa){return AH.call(this,AZ,AY,Aa);},GetRiserStartPosAndSize:function c(AZ,AY){return P.call(this,AZ,AY);},hUpdateBarRect:function AR(Ah,Ai,Af,AZ){var Ab=this.mChartContextPtr,Ag,Al,Ad,AY,Ak=this.mpABLPlotContext,Am=Ak.mABLOptions,Ac=this.mDatasetPtr,Aj=this.mSeriesInfo,Aa=Am.mOrientation,Ae=Am.mLayout;if(!Ab.mIsGraphMatrix){return true;}if(AZ!==0&&(this.mBarRenderType===x||this.mBarRenderType===R)){AZ=Ac.GetData(Aj[Ah.seriesInfoID].mSeriesId,Ah.groupID,0);}if(AZ!==0){if(Aa===o.OR_VERTICAL&&Ai.height===0){Ai.height=1;}if(Aa===o.OR_HORIZONTAL&&Ai.width===0){Ai.width=1;}}if(Ai.width*Ai.height===0){return false;}Ag=this.mSeriesInfo[Ah.seriesInfoID].mValueAxis;Al=Ak.mValueAxis[Ag];if(Al===null){return false;}z.ResetRect(Ai);Ad=Al.GetBasePosition(true);AY=Al.GetBaseValue(true);if(Ad===null||AY===null){return false;}if(Aa===o.OR_VERTICAL){if(Al.isBaseLineQualified()){if(z.y===Ad){if(Af){--(z.y);--(z.y);}else{}if(z.height>1&&Ae===AJ.LO_STACKED){++(z.y);--(z.height);}}else{if(z.y+z.height===Ad){if(z.height>1){z.height--;}else{z.y--;}}}}else{if(z.y===Ad){if(AZ>=AY){--(z.y);--(z.y);}else{if(z.height>1){z.y++;z.height--;}}}if(z.y+z.height===Ad&&z.height===1){if(AZ>=AY){--(z.y);++(z.height);}}}}if(Aa===o.OR_HORIZONTAL){if(Al.isBaseLineQualified()){if(z.x===Ad){if(Af){++(z.x);}else{--(z.x);--(z.x);}if(z.width>1&&Ae===AJ.LO_STACKED){--(z.width);}}else{if(z.x+z.width===Ad){if(z.width>1){}else{z.x--;}}}}else{if(z.x===Ad){if(Af&&AZ>AY){if(z.x>Ad){z.width+=z.x;z.x=Ad;}}}if(z.x+z.width===Ad){--(z.x);++(z.width);}}}Ai.copy(z);return true;},hPrepareData:function K(AZ){var Aa,Ac=this.mChartContextPtr,AY;Aa=this.GetData(AZ.seriesInfoID,AZ.groupID);if(Aa===null){if(Ac.mIsGraphMatrix===false){AY=AU.call(this,AZ);if(AY){if(this.mBarOptions.mColorBySeries&&!H.call(this,AZ.seriesInfoID)){this.AddLegendMarkerToCollection(AZ.seriesInfoID,AY);}}}}else{var Ab={mSeriesId:this.mSeriesInfo[AZ.seriesInfoID].mSeriesId,mGroupId:AZ.groupID};if(Ac.checkColorByAndSizeByValue(Ab,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){Aa=null;}}return Aa;},hPrepareRect:function C(Ai,Ar,Ah){var Aa=this.mpABLPlotContext,Ag=Aa.mABLOptions,Ac=this.mSeriesInfo[Ai.seriesInfoID].mValueAxis,Am=Aa.mValueAxis[Ac];var Af=Am.GetAxisOriginValue(),Ap=Am.GetBaseValue(true),Ab=Ar>Ap,Ao=P.call(this,Ai,Ah),AZ=Ao.Start,Aj=Ao.Size,AY=Am.GetBasePosition(true),An=Am.GetPositionByValue(Ar);O.Reset(0,0,0,0);if(An===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ab};}if(this.mBarRenderType===x||this.mBarRenderType===R){var Ae,As=false,Ak,Al,Ad;if(Af===null||Af===0||this.mBarRenderType===R){As=true;}else{Ak=this.updateGroupStackInfoWithBase(Ac,Ai.groupID,Af);Al=this.getSeriesOffsetIntoStackedInfo(Ac,Ai.groupID,Ai.seriesInfoID);var Aq=Ak[Al];if(Aq.Max===null||Aq.Min===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ab};}AY=Am.ValueToPosition(Aq.Min);An=Am.ValueToPosition(Aq.Max);}if(As){if(this.mBarRenderType===x&&Am.mOptions.mUseLogarithmicScale&&Ai.seriesInfoID===0){Ae=Ap;}else{Ae=this.GetData(Ai.seriesInfoID,Ai.groupID,true);}Ad=this.GetData(Ai.seriesInfoID,Ai.groupID);AY=Am.GetPositionByValue(Ae);An=Am.GetPositionByValue(Ad);}if(AY===null||An===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ab};}Ab=(Ad>=Ap);}switch(Ag.mOrientation){case o.OR_VERTICAL:O.x=AZ;O.y=Math.min(AY,An);O.width=Aj;O.height=Math.abs(AY-An);break;case o.OR_HORIZONTAL:O.x=Math.min(AY,An);O.y=AZ;O.width=Math.abs(AY-An);O.height=Aj;break;}return{Rect:O,AboveBase:Ab,AxisOriginValue:(Af||0)};},hPostProcessOneBar:function AT(Ab,Ad){var AY=AU.call(this,Ab);if(Ad!==null){var AZ=this.mBarOptions;if(AY){AY.AddGraphObject(Ad);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mHasColorBy&&!this.mChartContextPtr.mDebugUseNewProperties){var Ac=Ad.mTripleId;AO.call(this,Ac,Ad);}}this.mGraphObjectList.push(Ad);this.AddToMap(Ad);if(AZ.mColorBySeries&&!H.call(this,Ab.seriesInfoID)){this.AddLegendMarkerToCollection(Ab.seriesInfoID,AY);}else{if(!this.mBarOptions.mColorBySeries&&this.mChartContextPtr.mIsGraphMatrix){if(this.mAddedLegendMarkerSet[Ab.groupID]===null&&this.mLegendPtr!==null){var Aa;if(AY){Aa=AY.GetFormatFill();}else{Aa=Ad.GetFormatFill();}this.mLegendPtr.UpdateFormatForLegendMarker(Ab.groupID,Aa,null);this.mAddedLegendMarkerSet[Ab.groupID]=true;}}}}},hPrepareRectangleObject:function AE(Ae,Ag,AY){if(Ag.width<0||Ag.height<0){return null;}var AZ=this.mChartContextPtr,Ac=this.mpABLPlot.mABLPlotContext,Ad=Ac.mABLOptions,Af=AU.call(this,Ae),Aa=new AF.TripleId({ObjectId:AQ.DssGraphRiser,SeriesId:this.mSeriesInfo[Ae.seriesInfoID].mSeriesId,GroupId:Ae.groupID}),Ab;if(Ad.mUseDepth){console.alert("Missing method for depth rectangle object");}else{Ab=new AF.RectangleObject({TripleId:Aa,GraphObjectManager:this,Area:Ag,GraphCollectionObject:Af,Shape:N._BAR,hasFill:true});if(AZ.mIsGraphMatrix){if(AY){Ab.mBorderOpenType=this.mIsVertical?AX.BOTTOM:AX.LEFT;}else{Ab.mBorderOpenType=this.mIsVertical?AX.TOP:AX.RIGHT;}}}if(AZ.mUseAnimation){Ab.SetAnimationEnable(true);Ab.SetProgress(1);}return Ab;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","MarkerObject","NumberObject","Point2D","SeriesRenderer","PolyLineObject","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumAttachedPointsStyle","EnumImageUsage","EnumGraphMatrixElementSizeMode","EnumValueAxis");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType","EnumDSSExtraGraphProperty");var f=mstrmojo.chart,O=f.enums,E=O.EnumCollectionType,AC=O.EnumDSSExtraGraphObject,p=O.EnumMajorGraphType,Q=O.EnumLayout,J=O.EnumOrientation,F=O.EnumValueAxis,P=O.EnumAttachedPointsStyle,L=O.EnumImageUsage,AJ=O.EnumGraphMatrixElementSizeMode,AB=f.gNullGroupId,Z=f.model,S=Z.enums,AF=S.EnumDSSGraphMarkerShape,AE=S.EnumDSSGraphObject,AG=S.EnumShapeType;var K=new f.TripleId(),U=new f.Point2D(),C=new f.Point2D();U.Reset(-2,-2);C.Reset(-1,-1);U.dangling=true;C.isNull=true;mstrmojo.chart.LineSeriesOptions=mstrmojo.provide("mstrmojo.chart.LineSeriesOptions",{});function b(){if(this.mExpectedLineCount===undefined){var AU=this.mSeriesInfo,AT,AW,AS=0,AV=this.mDatasetPtr,AR=AU.length;for(AT=0;AT<AR;AT++){AW=AU[AT].mSeriesId;if(AV.GetShapeBySeries(AW)===AG._LINE){AS++;}}this.mExpectedLineCount=AS;}return this.mExpectedLineCount;}function d(){return{mShowStepLine:false,mShowMarkers:true,mMarkerShape:0,mMarkerSize:50};}function AQ(AV){if(!this.mSupportDiscretePoints){return ;}var AR=[],AT=0,AW=new f.Point2D(),AZ=this.mVecGroupIdMapPerSeries,AS,AX;if(this.discreteMatrix===undefined){this.discreteMatrix=[];}var AU=[];AZ.splice(0,AZ.length);AX=this.mGroupCount;for(AS=0;AS<AX;++AS){if(this.GetLinePoint(AV,AS,AW)){AR[AT]=AS;AT++;}else{if(AR.length>0){var AY=AR.concat();AZ.push(AY);}AR.splice(0,AR.length);AT=0;AU.push(AS);}}AU.push(AX);this.discreteMatrix[AV]=AU;if(AR.length>0){AZ.push(AR);}}function y(){if(this.mChartContextPtr.mUseAnimation){return this.mProgress===1;}return true;}function h(){return true;}function M(AY,AV){var AU=-1,AT,AR,AS=this.clusterInfo,AW=this.mpABLPlotContext,AX=AW.mCategoryAxisPtr;AT=this.mSeriesInfo[AY].mDataIndex;if(AS.Circle){AU=AS.Circle.indexOf(AT);}if(AU===-1&&AS.Tick){AU=AS.Tick.indexOf(AT);}if(AU===-1&&AS.Square){AU=AS.Square.indexOf(AT);}if(AU===-1){AU=AT%AS.columns;}AR=AX.getGroupStartPos(AV)+0.5*AS.groupGap+(AS.unitWidth+AS.riserGap)*AU+0.5*AS.unitWidth;AR=Math.floor(AR+0.5);return AR;}function z(AV,AY,AT){var AR=this.mChartContextPtr;if(AR.RenderClusterShapes()&&this.mpABLPlotContext.takeGroupCenter===false){if(this.clusterInfo===undefined){var AU,AS=this.mDatasetPtr.GetClusterSeriesCount(),AZ=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),Ab=this.evalBarStyleUnitWidth(AZ,AS);this.clusterInfo=mstrmojo.hash.copy(Ab);if(AU){var Aa=this.clusterInfo;Aa.Circle=AU.Circle.concat();Aa.Tick=AU.Tick.concat();Aa.Square=AU.Square.concat();}}var AW=M.call(this,AV,AY),AX=new f.Point2D({Point2D:AT});if(this.mIsVertical){AX.x=AW;}else{AX.y=AW;}return AX;}return AT;}function N(Ad,AS,Ac,Aa){var Ai,Ar,Ao,Am,Ak,Ah,Al,AV=false,AX,AT=Ad.shape,AW,Ag,An=Ac[Aa],AU=this.mChartContextPtr,Ab=this.mDatasetPtr,Ae=this.mSinglePointObjects,Aq=AU.GetGraphMatrixContext(),As,Ap;Ar=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AS].mValueAxis];if(Ar){AV=true;Ai=Ar.GetMaxMinDataInputPosition();AW=Ai.LowBoundary;Ag=Ai.HighBoundary;Al="y1";var AR=Ar.mTripleId.mObjectId;Al=AU.getAxisKeyFromObjectId(AR);AX=this.mClippedMarkerSize[Al];}As=An.length;var At;var Af,Aj,AZ,Au,AY;for(Ao=0;Ao<As;++Ao){Ak=new f.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:this.mSeriesInfo[AS].mSeriesId,GroupId:this.getCorrectGroupIdInSeriesPoints(Ao,Aa)});At=z.call(this,AS,Ak.mGroupId,An[Ao]);Ah=this.drawSingleDataPoint(Ak,At,AT);Ap=Ah.length;for(Am=0;Am<Ap;++Am){if(Ah[Am].Object){this.AddToMapAndList(Ah[Am].Object);}}Af=Ab.showSeriesDatalabel(Ak.mSeriesId);if(Ah.length>0){if(Ah[0].Object!==null&&Ah[0].Object!==undefined&&Af){Ae.push(Ah[0].Object);}Ad.AlreadyInMapAndList=true;Ad.Obj=Ah[0];if(AV){Ap=Ah.length;for(Am=0;Am<Ap;++Am){Aj=Ah[Am];AZ=AX.LowOffset;Au=AX.HighOffset;AY=Aj.ShapeSize;if(AY===undefined){if(Aj.Object){AY=Aj.Object.getShapeSize();}else{AY=0;}}Ai=Aq.getClippedOffset(AW,Ag,AY,An[Ao],!AU.IsVertical(),AZ,Au);AX.LowOffset=AZ=Ai.LowOffset;AX.HighOffset=Au=Ai.HighOffset;}}}}Ad.AlreadyInMapAndList=true;Ad.Obj=null;return Ad;}function AA(AU){var AX=this.mChartContextPtr,AS,AV=[];if(AX.mIsGraphMatrix&&this.mGroupCount===1){AS=new f.Point2D();if(!this.GetLinePoint(AU,0,AS)){return ;}AV.push(AS);var AW=[];AW.push(AV);var AR={};var AT=j.call(this,AU);AR.shape=AT;N.call(this,AR,AU,AW,0);if(AR.AlreadyInMapAndList===false){this.AddToMapAndList(AR.Obj);}}}function o(AY,AT,AS){var AR,AV,AX=true,AU=0,AW=100;for(AR=0;AR<AS;++AR){AV=this.mDatasetPtr.GetSizeByData(AY,AT+AR);if(AV!==null){if(AX){AU=AV;AX=false;}else{if(AU!==AV){return true;}}}if(AR>AW){return true;}}return false;}function I(Ai,AY,AW,AS,AR){var AU=this.mChartContextPtr,Af=AY[AW],Ad=new f.TripleId({ObjectId:AE.DssGraphDataLine,SeriesId:this.mSeriesInfo[AS].mSeriesId,GroupId:AW}),Aa,Ae,AX=this.mDatasetPtr,Ah;Ad.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,Ad.mGroupId);Aa=new f.PolyLineObject({TripleId:Ad,GraphObjectManager:this,PolyLine:Af,GraphCollectionObject:this.mLineCollections[AS],Shape:AG._LINE});Ae=Aa.mFormatLinePtr;Aa.movePointsAgainstBorder();Af=Aa.mLinePoints;var Ab=Ai&&this.mDatasetPtr.isGradientABL();if(Ab){var Ag,AV,AZ=Af.length,Ac,AT={Valid:true,Angle:AU.IsVertical()?0:1,EndAlpha:255,Style:1,Colors:[],Start:{x:Af[0].x,y:Af[0].y},End:{x:Af[AZ-1].x,y:Af[AZ-1].y}};Ah=Af.length;for(Ag=0;Ag<Ah;++Ag){AV=Ag/(Af.length-1);Ac=AX.GetColorByData(Ad.mSeriesId,Ad.mGroupId+Ag);AT.Colors.push({Step:AV,Color:Ac});}Aa.mFormatLinePtr=Ae.transformToGradient(AT);this.AddToMapAndList(Aa);}if(AX.showSeriesDatalabel(Ad.mSeriesId)){this.mPolyLineObjects.push(Aa);}return{Obj:Aa,AlreadyInMapAndList:Ab};}function l(AR,AY,AU,AX,AW){var AV=this.mChartContextPtr.GetGraphMatrixContext(),AZ=AV.GetScaledSizeWithRatio(AU,AY)/2,AT=new f.Point2D({Point2D:AR}),AS=new f.Point2D({Point2D:AR});if(this.mIsVertical){AT.y-=AZ;AS.y+=AZ;}else{AT.x-=AZ;AS.x+=AZ;}AX.x=AT.x;AX.y=AT.y;AW.x=AS.x;AW.y=AS.y;}function w(AW,Ae,AX){var AZ=this.mChartContextPtr.GetGraphMatrixContext(),AR=AZ.mElementsInfo.Min.Mode,AS,AU,AV=[],AY=[],Ab=0,Aa,Ad,AT,Af,Ac;Ac=Ae.length;for(AU=0;AU<Ac;++AU){AS=Ae[AU];Aa=this.mDatasetPtr.GetSizeByData(AW.mSeriesId,AW.mGroupId+AU);if(Aa!==null){Ab=AZ.ToRatioEx(Aa,(AR===AJ._PROPORTIONAL));if(Ab<0){Ab=0;}}Ad=new f.Point2D();AT=new f.Point2D();l.call(this,AS,AX,Ab,Ad,AT);AV.push(Ad);AY.push(AT);}AY.reverse();Af=AV.concat(AY);return Af;}function V(As,Af,Ad,AT,AS){var Ae=this.mDatasetPtr,Ab=Af[Ad],An,Am,Ao,Ag,AW,AU=null,AX=this.mChartContextPtr,Ac=this.mSeriesInfo,Aq=AX.GetGraphMatrixContext(),Ai=Aq.GetAdjustThicknessValue(AS),Al=new f.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:Ac[AT].mSeriesId,GroupId:Ad}),Ar,Aj,AY,Ah,Aa,Ak,AR;Al.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,Al.mGroupId);Ag=w.call(this,Al,Ab,Ai);if(AX.mImageUsage===L.GENERAL){AU=new f.PolygonObject({TripleId:Al,GraphObjectManager:this,Polygon:Ag,Shape:AG._POLYGON});AU.mPointsStyle=P.TOOLTIP_TRAPEZOID;}var Ap=this.mpABLPlotContext.mValueAxis[Ac[AT].mValueAxis];if(Ap){Aj=Ap.GetMaxMinDataInputPosition();AY=Aj.LowBoundary;Ah=Aj.HighBoundary;AR=Ap.mTripleId.mObjectId;Ak=AX.getAxisKeyFromObjectId(AR);Aa=this.mClippedMarkerSize[Ak];}if(As&&AU){Am=AU.mFormatFillPtr;AW=this.prepareTransitionalGradient(Al,Ab);Ao=Am.transformToGradient(AW);AU.SetFormatFill(Ao);}Ar=Ag.length;var AZ,AV=2+2;for(An=0;An<Ar;++An){AZ=this.mChartContextPtr.IsVertical()?Ag[An].y:Ag[An].x;if(this.mChartContextPtr.IsVertical()){if(AZ<Ah){Aa.HighOffset=Math.max(Aa.HighOffset,Ah-AZ);Aa.HighOffset=Math.max(Aa.HighOffset,AV);}if(AY<AZ){Aa.LowOffset=Math.max(Aa.LowOffset,AZ-AY);Aa.LowOffset=Math.max(Aa.LowOffset,AV);}}else{if(AZ-Ah>0){Aa.HighOffset=Math.max(Aa.HighOffset,AZ-Ah);Aa.HighOffset=Math.max(Aa.HighOffset,AV);}if(AY-AZ>0){Aa.LowOffset=Math.max(Aa.LowOffset,AY-AZ);Aa.LowOffset=Math.max(Aa.LowOffset,AV);}}}if(AU){this.AddToMapAndList(AU);if(Ae.showSeriesDatalabel(Al.mSeriesId)){this.mPolygonObjects.push(AU);}}return{Obj:AU,AlreadyInMapAndList:true};}function v(AU,AV,AS){var AT=this.mChartContextPtr,AW=4,AY=AT.GetGraphMatrixContext(),AX=AY.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount,false,AF.DssGraphMarkerShapeNone),AR=false,AZ=true;if(this.mHasSizeBy){AZ=(AX<=AW)&&!o.call(this,this.mSeriesInfo[AU].mSeriesId,this.getCorrectGroupIdInSeriesPoints(0,AV),AS[AV].length);if(AY.mMaxSizeVal===AY.mMinSizeVal){AX=Math.max(AY.mElementsInfo.Max.Size,AY.mConstants.MinimalSize.Line);}}AR=AR||this.mHasColorBy;if(AZ){return I.call(this,AR,AS,AV,AU,AX);}return V.call(this,AR,AS,AV,AU,AX);}function j(AS){var AW=this.mChartContextPtr,AU=AW.GetGraphMatrixContext(),AT,AR=AU.mMarkerShape;if(AW.mIsGraphMatrix){if(AW.isCombinationChart()){var AV=this.mDatasetPtr;AS=this.mSeriesInfo[AS].mSeriesId;AT=AV.GetShapeBySeries(AS);return AT;}switch(AR){case AF.DssGraphMarkerShapeCircle:return AG._CIRCLE;case AF.DssGraphMarkerShapeRectangle:case AF.DssGraphMarkerShapeSquare:return AG._SQUARE;case AF.DssGraphMarkerShape2DPie:case AF.DssGraphMarkerShape2DRingPie:return AG._PIE;case AF.DssGraphMarkerShapeGMTick:return AG._TICKER;default:return AG._LINE;}}else{return 0;}}function T(AT,AU,AR){var AS=this.mChartContextPtr,AV,AW,AY=AS.mIsGraphMatrix,AZ={Obj:null,AlreadyInMapAndList:false};if(AY){var AX=j.call(this,AT);AZ.shape=AX;if(AR[AU].length===1){if(this.mDatasetPtr.ShouldTakeGroupCenter()&&AS.isCombinationChart()){if(AZ.shape===AG._LINE){AZ.shape=AG._CIRCLE;}}return N.call(this,AZ,AT,AR,AU);}switch(AX){case AG._CIRCLE:case AG._SQUARE:case AG._PIE:case AG._TICKER:case AG._COMBINED:return N.call(this,AZ,AT,AR,AU);default:return v.call(this,AT,AU,AR);}}AV=new f.TripleId({ObjectId:AE.DssGraphDataLine,SeriesId:this.mSeriesInfo[AT].mSeriesId,GroupId:AU});AW=new f.PolyLineObject({TripleId:AV,GraphObjectManager:this,PolyLine:AR[AU],GraphCollectionObject:this.mLineCollections[AT]});AZ.Obj=AW;return AZ;}function B(AT,AS){var AY=this.discreteMatrix,AV=0,AU,AW,AZ;if(AY&&AY[AT]){AZ=AY[AT];AW=AZ.length;for(AU=0;AU<AW;AU++){if(AS>=AV&&AS<AZ[AU]){return AU;}AV=AZ[AU];}}var AR=[],AX;AV=0;this.GetLinePointSet(AT,AR);AX=AR.length;for(AU=0;AU<AX;++AU){if(AS>=AV&&AS<AV+AR[AU].length){return AS;}AV+=AR[AU].length;}return AS;}function u(AW,AT,AV){var AR,AS=new f.Point2D(),AU=new f.Point2D();AS.x=AT.x;AS.y=AT.y;AU.x=AT.x;AU.y=AT.y;AR={HighPoint:AS,LowPoint:AU};if(AW){AU.y-=AV;AS.y+=AV;}else{AU.x-=AV;AS.y+=AV;}return AR;}function g(AT,AV,AS){var AR=this.mChartContextPtr.GetGraphMatrixContext(),AU=AR.GetScaledSizeWithRatio(AS,AV)/2;return u.call(this,this.mIsVertical,AT,AU);}function H(AX,Af){var AR=new f.Point2D(),AU,Ab=true,AZ=this.mChartContextPtr.GetGraphMatrixContext(),AS=AZ.mElementsInfo.Min.Mode,AY,Ag,Ac,AW=0,Ae,Aa=1,Ad,AV,AT={};this.GetLinePoint(AX,Af,AR);AU=AZ.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount);if(AZ.mHasSizeBy){Ab=false;if(AZ.mMaxSizeVal===AZ.mMinSizeVal){AU=Math.max(AZ.mElementsInfo.Max.Size,AZ.mConstants.MinimalSize.Line);Ab=true;}}if(Ab){AV=B.call(this,AX,Af);AY=new f.TripleId({ObjectId:AE.DssGraphDataLine,SeriesId:this.mSeriesInfo[AX].mSeriesId,GroupId:AV});Ag=this.GetGraphObject(AY);if(Ag!==undefined&&Ag!==null){Ac=Ag.mFormatLinePtr;AU=Ac.mLineThickness;AW=AU/2;}Ae=u.call(this,this.mIsVertical,AR,AW);}else{Ad=this.mDatasetPtr.GetData(this.mSeriesInfo[AX].mSeriesId,Af,AZ.mSizeIndex,false);if(Ad!==null&&Ad!==undefined){Aa=AZ.ToRatioEx(Ad,(AS===AJ._PROPORTIONAL));if(Aa<0){Aa=0;}}Ae=g.call(this,AR,AU,Aa);}AT.XCenterOffset=(Ae.HighPoint.x-Ae.LowPoint.x)/2;AT.YCenterOffset=(Ae.HighPoint.y-Ae.LowPoint.y)/2;return AT;}function AN(Ad){var AX=new f.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:Ad.SeriesId,GroupId:Ad.GroupId}),AS=this.mChartContextPtr,Aa=AS.GetGraphMatrixContext(),Ab=Aa.IsIsolatedDot(AX),AT,AR=new f.Point2D(),Ac=0,AW=0,AV,AY,AU=this.mDatasetPtr,AZ;if(this.GetLinePoint(Ad.SeriesInfo,Ad.GroupId,AR)){if(Aa.mMarkerShape===AF.DssGraphMarkerShapeCombined){AZ=AU.GetShapeBySeries(Ad.SeriesId);AT=(AZ===AG._CIRCLE||AZ===AG._RECTANGLE||AZ===AG._TICKER||AZ===AG._SQUARE);}else{AT=(Aa.mMarkerShape===AF.DssGraphMarkerShapeCircle||Aa.mMarkerShape===AF.DssGraphMarkerShapeRectangle||Aa.mMarkerShape===AF.DssGraphMarkerShapeGMTick||Aa.mMarkerShape===AF.DssGraphMarkerShapeSquare);}if(Ab||AT){AV=this.GetGraphObject(AX);if(AV!==null&&AV!==undefined){if(AV.mMarkerSize!==undefined&&AV.mMarkerSize!==null&&AV.MarkerPosition!==undefined&&AV.MarkerPosition!==null){Ac=AV.mMarkerSize;AW=Ac;AR.x=AV.MarkerPosition.x;AR.y=AV.MarkerPosition.y;}else{if(AV instanceof mstrmojo.chart.RectangleObject&&AV.mRect!==undefined&&AV.mRect!==null){Ac=AV.mRect.width/2;AW=AV.mRect.height/2;AR.x=AV.mRect.x+Ac;AR.y=AV.mRect.y+AW;}else{if(AV instanceof mstrmojo.chart.StraightLineObject){AR.x=0.5*(AV.mDeviceStartPoint.x+AV.mDeviceEndPoint.x);AR.y=0.5*(AV.mDeviceStartPoint.y+AV.mDeviceEndPoint.y);}}}}}else{AY=H.call(this,Ad.SeriesInfo,Ad.GroupId);if(AY!==null&&AY!==undefined){Ac=AY.XCenterOffset;}AW=AY.YCenterOffset;}Ad.HostMarkerPoint=AR;Ad.CenterXOffset=Ac;Ad.CenterYOffset=AW;return true;}return false;}function a(){var AT,AS=this.mDataLabels,AR=AS.length;for(AT=0;AT<AR;++AT){AS[AT].isValid=AN.call(this,AS[AT]);}}function W(){var AR=this.mpABLPlot.dataLabelManager,AT=this.mChartContextPtr,AS=new f.Rect2D({x:0,y:0,width:AT.mGraphWidth,height:AT.mGraphHeight});if(AR===null||AR===undefined){AR=this.mpABLPlot.dataLabelManager=new f.DataLabelManager({DataArea:AS});AR.ChartContext=AT;}AR.SinglePointObjects=AR.SinglePointObjects.concat(this.mSinglePointObjects);AR.PolyLineObjects=AR.PolyLineObjects.concat(this.mPolyLineObjects);AR.PolygonObjects=AR.PolygonObjects.concat(this.mPolygonObjects);AR.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AR;}function n(){var AU=this.mDataLabels.length,AT,AS,AR;for(AR=0;AR<AU;++AR){AS=this.mDataLabels[AR];if(AS.display){AT=AS.GroupId;this.CreateOneDataMarker(AS.SeriesInfo,AS.GroupId,this.mMarkerCollections[AS.SeriesInfo],AS.HostMarkerPoint,AT,true);}}}function AO(AR){var AS=this.mChartContextPtr,AV=this.mDatasetPtr,AY=AS.GetGraphMatrixContext(),Ab,AZ,AT=this.mpABLPlot;if(AS.mIsGraphMatrix){AZ=AV.showDatalabels();Ab=(AY.mMarkerShape===AF.DssGraphMarkerShape2DPie||AY.mMarkerShape===AF.DssGraphMarkerShape2DRingPie);}if(AZ){var AU=AT.dataLabelManager;if(AU===null||AU===undefined){var AX=new f.Rect2D({x:0,y:0,width:AS.mGraphWidth,height:AS.mGraphHeight});AU=AT.dataLabelManager=new f.DataLabelManager({DataArea:AX});AU.ChartContext=AS;}if(Ab){var Ae=this.mPieRenderer;Ae.enableDataLabel(this.mpABLPlot.dataLabelManager,AR);var AW,Aa=Ae.dataLabels,Ad,Ac=Aa.length;for(AW=0;AW<Ac;++AW){Ad=Aa[AW].Label;if(Ad.mIsShown){this.AddToMapAndList(Ad);}}}else{this.CreateAllDataLabels();a.call(this);AU=W.call(this);AU.PlaceDataLabels(this.mDataLabels,AR);n.call(this);}}}mstrmojo.chart.LineSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.LineSeriesRenderer",mLineCollections:null,mMarkerCollections:null,mVecSeriesPoints:null,mLineSeriesOptions:null,mDepth:0,mInitialized:false,mIsByValueAxis:false,mGroupIdMapPerSeries:null,mVecGroupIdMapPerSeries:null,mHasCreatedMarkers:false,mDataLabels:null,mSinglePointObjects:null,mPolyLineObjects:null,mPolygonObjects:null,init:function AL(AR){this._super(AR);this.mDepth=this.mpABLPlot.unitLevelDepth;this.mLineCollections=[];this.mMarkerCollections=[];this.mVecSeriesPoints=[];this.mLineSeriesOptions=[];this.mGroupIdMapPerSeries=[];this.mVecGroupIdMapPerSeries=[];this.mSupportDiscretePoints=this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];this.mSinglePointObjects=[];this.mPolyLineObjects=[];this.mPolygonObjects=[];},GenerateMapAndList:function AK(AT){var AX=this.mChartContextPtr,AS,AU,AW=mstrmojo.chart.RenderLayer2,AV=this.mSeriesInfo,AR=this.mLineSeriesOptions;if(AV.length===0){return ;}for(AS=0;AS<AV.length;++AS){AR.push(d());if(AX.mIsGraphMatrix){AR[this.mLineSeriesOptions.length-1].mShowMarkers=false;}this.loadSeriesProperties(AS);}this.GenerateLineCollections();this.GenerateMarkerCollections();AU=new f.GraphObjectAggregation({TripleId:AW,GraphObjectManager:this});this.mGraphObjectList.push(AU);this.GenerateInterpolationFrame(1);if(AX.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AX.mImageUsage===L.GENERAL){this.CreateAllSeriesLabels(AT);this.GenerateTrendLine();this.GenerateRefLine();this.populateRenderSequence();}},GenerateByValueAxis:function x(AU,AR){var AT=this.mSeriesInfo,AS;if(AT.length===0){return ;}if(!this.mInitialized){for(AS=0;AS<AT.length;++AS){this.mLineSeriesOptions.push(d());this.loadSeriesProperties(AS);}this.GenerateLineCollections();this.GenerateMarkerCollections();this.mInitialized=true;this.mIsByValueAxis=true;}this.mGraphObjectList.push(new f.GraphObjectAggregation({TripleId:new f.TripleId({ObjectId:AC.DssGraphRendererLayer,SeriesId:AU,GroupId:AB}),GraphObjectManager:this}));this.GenerateInterpolationFrame(1);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AU===F.VA_Y1){this.CreateAllSeriesLabels();}},loadSeriesProperties:function t(AR){if(this.mChartContextPtr.mImageUsage!==0){return ;}},LoadStepLine:function c(AR){this.mLineSeriesOptions[AR].mShowStepLine=false;},GenerateMapAndListForSeries:function r(AW){var AS=this.mChartContextPtr,AR=[],AT,AX,AY,AV,Ac,Ab,AZ;if(this.mGroupCount<2&&this.mSupportDiscretePoints){AA.call(this,AW);return ;}AQ.call(this,AW);this.GetLinePointSet(AW,AR);AT=y.call(this);if(!this.mpABLPlotContext.mABLOptions.mUseDepth){var Aa=this.mGraphObjectList,AU=this.mLineCollections;if(AR&&AR.length){if(this.mpABLPlotContext.mABLOptions.mCurvedLines){AZ=AR.length;for(AX=0;AX<AZ;++AX){AY=new f.TripleId({ObjectId:AE.DssGraphDataLine,SeriesId:this.mSeriesInfo[AW].mSeriesId,GroupId:AX});AV=null;if(AV){Aa.push(AV);}if(AT){this.mGraphObjectMap.push(AY,AV);AU[AW].AddGraphObject(AV);}}}else{AZ=AR.length;for(AX=0;AX<AZ;++AX){if(AS.mIsGraphMatrix){this.mGroupIdMapPerSeries=this.mVecGroupIdMapPerSeries[AX];}else{this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);}Ac=false;Ab=T.call(this,AW,AX,AR);AV=Ab.Obj;Ac=Ab.AlreadyInMapAndList;if(AS.mIsTimeSeriesChart){AV.mIsDetectable=false;}if(!Ac&&AV){Aa.push(AV);if(AT){this.AddToMap(AV);AU[AW].AddGraphObject(AV);}}}}}}},GenerateByValueAxisAndGroup:function AD(AX,AT){var AU,Ab,AV=[],Ac=[],AZ=[],AY,AR,Aa,AS,AW;if(this.mGroupCount<2){return ;}if((AT===-1)||this.mHasNegativeValue){this.GenerateOrderedDepthLine(AX,AT,false);}else{Ab=this.IsReverseSeriesOrder(AX);AW=this.mSeriesInfo.length;for(AU=0;AU<AW;++AU){AY=Ab?this.mSeriesInfo.length-AU:AU;if(this.mSeriesInfo[AY].mValueAxis===AX){AR=new f.Point2D();Aa=new f.Point2D();if(this.GetLinePoint(AY,AT-1,AR)&&this.GetLinePoint(AY,AT,Aa)){AV.push([AR,Aa]);Ac.push(AY);AZ.push(true);}}}AW=AV.length;for(AU=0;AU+1<AW;++AU){AS=new f.Vector2D({x:AV[AU+1][0],y:AV[AU+1][1]});if(this.PriorToNextSeries(AS,AT)){this.GenerateDepthLine(Ac[AU],AT,AV[AU]);AZ[AU]=false;}}for(AU=AV.length-1;AU>=0;--AU){if(AZ[AU]){this.GenerateDepthLine(Ac[AU],AT,AV[AU]);}}}},GetLinePointSet:function e(AX,AT){var AW=[],AV=this.mSupportDiscretePoints?0:1,AU,AS,AR,AY=this.mGroupCount;for(AU=0;AU<AY;++AU){AR=new f.Point2D();if(this.GetLinePoint(AX,AU,AR)){AW.push(AR);}else{if(AW.length>AV){AS=AW.slice(0);AT.push(AS);}AW.length=0;}}if(AW.length>AV){AT.push(AW);}},GetLinePoint:function AH(AY,Ad,AW){var AU=this.mChartContextPtr,Aa=0,AZ=0,Ac,AX,AS,AR=false,Ae,AV,AT,Ab;if(!this.GetFinalLinePoint(AY,Ad,AW,false)){return false;}if(this.mProgress===1){return true;}if(this.mUseDepth){Ab=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[AY].mSeriesIndex);Aa=Ab.OffsetX;AZ=Ab.OffsetY;}if(AU.mOldChartManager!==null){AX=AU.mOldChartManager;Ac=AX.GetGraphObjectManager(this.mTripleId,true);}AS=new f.Point2D({Point2D:AW});if(Ac!==null){Ae=Ac;AR=Ae.GetFinalLinePoint(AY,Ad,AS,true);if(!AR){AV=Ae.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(Ad);if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){if(this.mDeviceDataArea){if(AV>this.mDeviceDataArea.y+this.mDeviceDataArea.height){AV=this.mDeviceDataArea.y+this.mDeviceDataArea.height;}if(AV<this.mDeviceDataArea.y){AV=this.mDeviceDataArea.y;}AS.y=AV+AZ;}}else{if(this.mDeviceDataArea){if(AV>this.mDeviceDataArea.x+this.mDeviceDataArea.width){AV=this.mDeviceDataArea.x+this.mDeviceDataArea.width;}if(AV<this.mDeviceDataArea.x){AV=this.mDeviceDataArea.x;}AS.x=AV+Aa;}}}}if(!AR){AT=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AY].mValueAxis].GetBasePosition();if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){AS.x=AT+Aa;}else{AS.y=AT+AZ;}}AW.x=AS.x+(AW.x-AS.x)*this.mProgress;AW.y=AS.y+(AW.y-AS.y)*this.mProgress;return true;},GetFinalLinePoint:function D(AX,Ae,AS,Ad){var Af,AV=this.mVecSeriesPoints,AW=this.mpABLPlotContext,AT=this.mpABLPlot,Aa=0,AZ=0,AY,AR,Ac,Ab;if(Ad&&(AX>=AV.length||Ae>=AV[AX].length)){return false;}while(AV.length<=AX){Af=[];AV.push(Af);}while(AV[AX].length<=Ae){AV[AX].push(U);}var AU=AV[AX][Ae];if(AU.x!==-2&&!!AU.dangling===false){if(AU.x===-1&&AU.isNull){return false;}AS.ResetPoint(AU);return true;}if(Ad){return false;}AV[AX][Ae]=C;if(this.mUseDepth){Ab=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[AX].mSeriesIndex);Aa=Ab.OffsetX;AZ=Ab.OffsetY;}AY=this.GetData(AX,Ae);if(AY===null){return false;}K.mSeriesId=this.mSeriesInfo[AX].mSeriesId;K.mGroupId=Ae;if(this.mDatasetPtr.GetShapeBySeries(K.mSeriesId)===AG._LINE){if(this.mChartContextPtr.checkColorByAndSizeByValue(K,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return false;}}AR=Math.floor(AW.mCategoryAxisPtr.getGroupMiddlePos(Ae));Ac=AW.mValueAxis[this.mSeriesInfo[AX].mValueAxis].GetPositionByValue(AY);if(Ac===null){return false;}if(AW.mABLOptions.mOrientation===J.OR_HORIZONTAL){AS.x=Ac+Aa;AS.y=AR+AZ;}else{AS.x=AR+Aa;AS.y=Ac+AZ;}AV[AX][Ae]=new f.Point2D({Point2D:AS});++AT.DPCount;if(AT.seriesDPCount[this.mSeriesInfo[AX].mSeriesId]===undefined||AT.seriesDPCount[this.mSeriesInfo[AX].mSeriesId]===null){AT.seriesDPCount[this.mSeriesInfo[AX].mSeriesId]=1;}else{++(AT.seriesDPCount[this.mSeriesInfo[AX].mSeriesId]);}return true;},GenerateDepthLine:function Y(AT,AS,AR){},GenerateLineCollections:function R(){var AR=this.mChartContextPtr,AT,AS,AY,AX,AU,Aa,AV,AW=AR.GetGraphMatrixContext(),AZ=AR.mIsGraphMatrix;AS=this.mUseDepth?E.CT_DEPTH_LINE_OR_LINE_MARKER:E.CT_LINE;AY=this.mUseDepth?AE.DssGraphRiser:AE.DssGraphDataLine;AX=this.mSeriesInfo.length;if(AZ){if(AR.isLegendByGroup()){AX=this.mGroupCount;}AS=E.CT_LINE;}for(AT=0;AT<AX;++AT){Aa=this.mSeriesInfo[AT].mSeriesId;AU=new f.TripleId({ObjectId:AY,SeriesId:Aa});if(AW.isCombinationChart()===false&&AW.isPieOrRingShape()){AV=null;}else{AV=new f.GraphCollectionObject({TripleId:AU,GraphObjectManager:this,CollectionType:AS});}this.mLineCollections.push(AV);if(this.mpABLPlotContext.mABLOptions.mMajorGraphType!==p.MGT_PARETO||this.mUseDepth){if(!AZ){this.AddLegendMarkerToCollection(AT,this.mLineCollections[AT],true,this.mLineSeriesOptions[AT].mShowMarkers,this.mLineSeriesOptions[AT].mMarkerShape,this.mpABLPlotContext.mABLOptions.mShowLines);}}}},GenerateMarkerCollections:function A(){var AS,AV,AT=this.mLineSeriesOptions,AR=this.mGraphObjectMap,AU=this.mMarkerCollections,AW,AX;AS=this.mSeriesInfo.length;for(AV=0;AV<AS;++AV){if(AT[AV].mShowMarkers&&(!this.mUseDepth)){AW=new f.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:this.mSeriesInfo[AV].mSeriesId});AX=new f.GraphCollectionObject({TripleId:AW,GraphObjectManager:this,CollectionType:E.CT_DEPTH_LINE_OR_LINE_MARKER});AR.push(AW,AX);AU.push(AX);}else{AU.push(null);}}},CreateSeriesMarkers:function G(AT){var AS,AR,AU;AU=this.mGroupCount;for(AS=0;AS<AU;++AS){AR=new f.Point2D();if(this.GetLinePoint(AT,AS,AR)){this.CreateMarker(AT,AS,this.mMarkerCollections[AT],AR);}}},CreateAllSeriesLabels:function AI(AS){var Ad,Ac,AX,AW,AV,Af,Aa,Ae,Ab,AU,AZ,AR=this.mpABLPlotContext,AY=AR.mABLOptions,AT=AR.mSeriesOptions,Ag=this.mGroupCount;if(this.mChartContextPtr.mIsGraphMatrix){AO.call(this,AS);return ;}AZ=this.mSeriesInfo.length;for(AX=0;AX<AZ;++AX){if(AT[this.mSeriesInfo[AX].mSeriesIndex].mShowDataLabels){Ad=new f.TripleId({ObjectId:AE.DssGraphDataText,SeriesId:this.mSeriesInfo[AX].mSeriesId});Ac=new f.GraphCollectionObject({TripleId:Ad,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Ac);for(AW=0;AW<Ag;++AW){AV=this.createRiserLabel(AX,AW,Ac);if(AV!==null){Af=new f.Point2D();Aa=new f.Point2D();this.GetMinMaxPoint(AX,AW,Af,Aa);this.MoveLabel(AW,AV,Aa,Af,AX);}}}}if((AY.mMajorGraphType===p.MGT_LINE)&&(AY.mLayout===Q.LO_STACKED)&&(!AY.mShowCumulate)&&(AY.mShowValue)&&(AY.mShowTotal)){Ad=new f.TripleId({ObjectId:AE.DssGraphDataTextStackTotal,SeriesId:this.mTripleId.mSeriesId});Ac=new f.GraphCollectionObject({TripleId:Ad,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Ac);if(AY.mDualAxes){for(AX=0;AX<Ag;++AX){Ae=this.CreateTotalLabel(F.VA_Y1,AX,Ac);Ab=this.CreateTotalLabel(F.VA_Y2,AX,Ac);if(Ae!==null){Af=new f.Point2D();Aa=new f.Point2D();AU=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AX);this.GetMinMaxPoint(AU,AX,Af,Aa);this.MoveLabel(AX,Ae,Aa,Af,AU);}if(Ab!==null){Af=new f.Point2D();Aa=new f.Point2D();AU=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y2,AX);this.GetMinMaxPoint(AU,AX,Af,Aa);this.MoveLabel(AX,Ab,Aa,Af,AU);}}}else{for(AX=0;AX<Ag;++AX){AV=this.CreateTotalLabel(F.VA_Y1,AX,Ac);if(AV!==null){Af=new f.Point2D();Aa=new f.Point2D();AU=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AX);this.GetMinMaxPoint(AU,AX,Af,Aa);this.MoveLabel(AX,AV,Aa,Af,AU);}}}}},CreateMarker:function AM(AS,AT,AU,AX){var AR=this.mChartContextPtr,AV,Aa,AW;AV=new f.TripleId({ObjectId:AE.DssGraphDataMarker,SeriesId:this.mSeriesInfo[AS].mSeriesId,GroupId:AT});if(AR.mIsTimeSeriesChart){var AZ=this.GetData(AS,AT-1);var AY=this.GetData(AS,AT+1);if((AT>0&&AZ!==null)||(AT<this.mGroupCount-1&&AY!==null)){return ;}Aa=4;AW=new f.MarkerObject({TripleId:AV,GraphObjectManager:this,MarkerPosition:AX,MarkerShape:AF.DssGraphMarkerShapeCircle,IsIsometric:true,MarkerSize:Aa,GraphCollectionObject:AU,IsDialogSize:false});AU.AddGraphObject(AW);this.mGraphObjectList.push(AW);}else{if(AR.mIsGraphMatrix){this.CreateOneDataMarker(AS,AT,AU,AX,AT);}else{}}},GetMinMaxPoint:function AP(AW,AV,AT,AU){var AS,AX,AR;AS=new f.Point2D();if(!this.GetFinalLinePoint(AW,AV,AS,false)){return ;}AX=this.mChartContextPtr.dialogSizeToPixelSize(this.mLineSeriesOptions[AW].mMarkerSize);AR=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AW].mValueAxis].IsReverseOrder();if(this.mIsVertical){if(AR){AT.Reset(AS.x,AS.y-AX);AU.Reset(AS.x,AS.y+AX);}else{AT.Reset(AS.x,AS.y+AX);AU.Reset(AS.x,AS.y-AX);}}else{if(AR){AT.Reset(AS.x+AX,AS.y);AU.Reset(AS.x-AX,AS.y);}else{AT.Reset(AS.x-AX,AS.y);AU.Reset(AS.x+AX,AS.y);}}},GetPointPair:function q(AU,AS,AT,AR){return this.GetLinePoint(AU,AS-1,AT)&&this.GetLinePoint(AU,AS,AR);},GenerateOrderedDepthLine:function s(AT,AR,AS){},GenerateInterpolationFrame:function X(AS){var AV,AT,AR,AU;this.mProgress=AS;AV=this.mGraphObjectList.length;AR=this.mGraphObjectList.concat();this.mGraphObjectList.splice(0,AV);for(AT=0;AT<AV;++AT){AU=AR[AT];if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AU.SetAnimationEnable(true);}AU.SetProgress(AS);this.GenerateFrameInOnePlot(AU,AS<0.5);}this.mGraphObjectList=AR.concat();this._super(AS);},GenerateFrameInOnePlot:function k(Aa,Ab){var AT=this.mChartContextPtr,AY=AT.GetGraphMatrixContext(),AS=this.mpABLPlotContext,AW=AS.mABLOptions,AV,Af,Ad,AX,AR,Ac=this.mGroupCount;if(this.mIsByValueAxis){var AZ=F.VA_BOTH;if(AW.mLayout===Q.LO_STACKED){if(AW.mCurvedLines){this.GenerateByValueAxisAndGroup(AZ,-1);}else{Af=this.IsReverseGroupOrder();for(AV=1;AV<this.mGroupCount;++AV){Ad=Af?Ac-AV:AV;this.GenerateByValueAxisAndGroup(AZ,Ad);}}}else{var Ae=this.mSeriesInfo,AU=this.mSeriesInfo.length;for(AV=0;AV<AU;++AV){if(Ae[AV].mValueAxis===AZ){this.GenerateMapAndListForSeries(AV);}}}}else{if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){AX=this.mSeriesInfo.length;for(AV=0;AV<AX;++AV){if(AW.mShowLines){this.GenerateMapAndListForSeries(AV);}if(!(AT.mIsGraphMatrix&&AY.isPieOrRingShape())){this.CreateSeriesMarkers(AV);this.mHasCreatedMarkers=true;}}}else{if(AW.mShowLines){if(AW.mCurvedLines){this.GenerateByValueAxisAndGroup(F.VA_Y2,-1);this.GenerateByValueAxisAndGroup(F.VA_Y1,-1);}else{Af=this.IsReverseGroupOrder();for(AV=1;AV<Ac;++AV){Ad=Af?Ac-AV:AV;this.GenerateByValueAxisAndGroup(F.VA_Y2,Ad);}for(AV=1;AV<Ac;++AV){Ad=Af?Ac-AV:AV;this.GenerateByValueAxisAndGroup(F.VA_Y1,Ad);}}}}}if(AT.mIsGraphMatrix===false){if(!this.mHasCreatedMarkers){AX=this.mSeriesInfo.length;for(AV=0;AV<AX;++AV){this.CreateSeriesMarkers(AV);}}}AR=this.mGraphObjectList.length;for(AV=0;AV<AR;++AV){Aa.AddGraphObject(this.mGraphObjectList[AV],Ab);}this.mGraphObjectList.splice(0,this.mGraphObjectList.length);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Point2D","Vector2D","Polygon2D","SeriesRenderer","CategoryPlot","MarkerObject","NumberObject","Plot","ChartConstants","GraphObjectAggregation","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumValueAxis","EnumShowFace","EnumAttachedPointsStyle","EnumPictureFormatType","EnumImageUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape");var j=mstrmojo.chart,d=j.ChartConstants,O=mstrmojo.chart.enums,S=O.EnumAttachedPointsStyle,C=O.EnumCollectionType,q=O.EnumMajorGraphType,T=O.EnumLayout,D=O.EnumValueAxis,AA=O.EnumDSSExtraGraphObject,J=O.EnumImageUsage,z=O.EnumPictureFormatType,b=mstrmojo.chart.model,V=b.enums,AC=V.EnumDSSGraphObject,AD=V.EnumDSSGraphMarkerShape,AE=V.EnumShapeType,R=V.EnumDSSGraphFillEffect,y=j.gNullGroupId;var K=new j.Rect2D(),w=new j.TripleId();var A=new j.Point2D();A.Reset(-1,-1);A.isNull=true;function v(){var AN,AM,AL,AO,AP,AK=this.mAreaCollection;AK.splice(0,AK.length);AN=this.mIsVertical?C.CT_VERTICAL_AREA:C.CT_HORIZONTAL_AREA;AM=this.mSeriesInfo.length;for(AL=0;AL<AM;++AL){AO=new j.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:this.mSeriesInfo[AL].mSeriesId});AP=new j.GraphCollectionObject({TripleId:AO,GraphObjectManager:this,CollectionType:AN});AK.push(AP);this.AddToMap(AK[AL]);this.AddLegendMarkerToCollection(AL,AK[AL]);}}function F(AL){var AQ,AM,AP,AO,AN,AK,AR;AQ=this.mSeriesInfo[AL].mSeriesId;AP=new j.TripleId({ObjectId:AC.DssGraphDataText,SeriesId:AQ,GroupId:y});AM=new j.GraphCollectionObject({TripleId:AP,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AM);AO=this.mFinalSeriesPolygons[AL];AR=this.mGroupCount;for(AN=0;AN<AR;++AN){if(AO[AN].x!==-1){AK=this.createRiserLabel(AL,AN,AM);this.MoveLabel(AN,AK,AO[AN],AO[2*this.mGroupCount-1-AN],AL);}}}function B(AP,AN){var AM,AO,AK,AL;for(AM=0;AM<this.mGroupCount;++AM){AO=this.CreateTotalLabel(AP,AM,AN);if(AO!==null){AK=this.GetUpmostIndexByValueAxisAndGroup(AP,AM);AL=this.mFinalSeriesPolygons[AK];this.MoveLabel(AM,AO,AL[AM],AL[2*this.mGroupCount-1-AM],AK);}}}function e(){var AM,AL,AQ,AO,AK,AP=this.mpABLPlotContext,AN=AP.mABLOptions;AM=this.mSeriesInfo.length;for(AL=0;AL<AM;++AL){if(AP.mSeriesOptions[this.mSeriesInfo[AL].mSeriesIndex].mShowDataLabels){F.call(this,AL);}}if(AN.mMajorGraphType===q.MGT_AREA&&AN.mLayout===T.LO_STACKED&&!AN.mShowCumulate&&AN.mShowValue&&AN.mShowTotal){AO=this.mpManager.mTripleId;AQ=new j.TripleId({ObjectId:AC.DssGraphDataTextStackTotal,SeriesId:AO.mSeriesId,GroupId:y});AK=new j.GraphCollectionObject({TripleId:AQ,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AK);B.call(this,D.VA_Y1,AK);if(AN.mDualAxes){B.call(this,D.VA_Y2,AK);}}}function r(){}function n(AK){var AL=AK,AN=this.mpABLPlotContext.mABLOptions.mLayout,AM=this.mChartContextPtr.mIsGraphMatrix;if(AM&&(AN===T.LO_STACKED||AN===T.LO_PERCENT)){if(AK>=0&&AK<this.mSeriesDrawingOrder.length){AL=this.mSeriesDrawingOrder[AK];}}return AL;}function G(AL){var AM=0,AK=0;this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);while(AM<this.mGroupCount){if(AL[AM].x===-1){++AM;continue;}this.mGroupIdMapPerSeries[AK]=AM;++AM;AK++;}}function k(AN){this.mGroupRangeList.splice(0,this.mGroupRangeList.length);if(AN.length===0){return ;}var AM=0,AQ,AP,AL,AO,AK;AK=AN.length;for(AO=0;AO<AK;++AO){AQ=AM+AN[AO].length/2;AP=this.getCorrectGroupIdInSeriesPoints(AM,AM);AL=this.getCorrectGroupIdInSeriesPoints(AQ-1,AQ-1);this.mGroupRangeList.push({Start:AP,End:AL});AM=AQ;}}function L(AS,AQ){var AW=[],AT=[],AX,AV,AN,AM,AU,AL=this.mChartContextPtr,AP=AL.mIsGraphMatrix,AR=AL.mIsTimeSeriesChart;AX=0;AV=AS.length;AU=(AR||AP)?0:1;for(AN=0;AN*2<=AV;++AN){if(AS[AN].x!==-1){continue;}if(AN-AX>AU){var AK=2*(AN-AX);for(AM=AX;AM<AN;++AM){AW[AM-AX]=AS[AM];AW[AK-1-(AM-AX)]=AS[AV-1-AM];}AT.push(AW);AQ.push(AW);AW=[];}AX=AN+1;}if(AX<AV/2){var AY=AV/2-AX;if(AY>AU){if(AX===0){AT.push(AS);AQ.push(AS);}else{if(AX<AV/2){var AO=AY*2,AZ=AS.slice(AX,AX+AO);AT.push(AZ);AQ.push(AZ);}}}}G.call(this,AS);k.call(this,AT);return AT;}function W(AK,AL){if(AK<0||AK>=this.mGroupRangeList.length){return AL;}return this.mGroupRangeList[AK].Start;}function AF(AO,AL,AR){var AN=new j.TripleId({TripleId:AO}),AM=null,AQ=this.mChartContextPtr;if(AL.length===2){AN.mObjectId=AC.DssGraphDataMarker;var AP=4,AK=AD.DssGraphMarkerShapeCircle;AM=new j.MarkerObject({TripleId:AN,MarkerPosition:AL[0],MarkerShape:AK,IsIsometric:true,MarkerSize:AP,GraphObjectManager:this,GraphCollectionObject:AR});return AM;}if(AQ.mImageUsage===J.OBJECT_CLIP_COMPUTATION){return AM;}AM=new j.PolygonObject({TripleId:AN,GraphObjectManager:this,Polygon:AL,ParentObject:AR,Shape:AE._POLYGON});if(AQ.mIsGraphMatrix&&this.mChartContextPtr.mImageFormat===z.SVG){AM.mPointsStyle=S.TOOLTIP_UPPER;}return AM;}function a(AK,AL,AO){var AN=new j.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:this.mSeriesInfo[AK].mSeriesId,GroupId:y}),AP=this.mAreaCollection[AK],AM;AM=AF.call(this,AN,AL,AO,AP);if(AM){this.mGraphObjectList.push(AM);AP.AddGraphObject(AM);}}function AI(AV,AK,AS){var AL=this.mChartContextPtr,AP=AL.GetGraphMatrixContext(),AW=AV.GetMaxMinDataInputPosition(),AT=AV.mTripleId.mObjectId,AQ=AW.LowBoundary,AR=AW.HighBoundary,AN;if(this.mIsVertical){AN=(AT===AC.DssGraphY1Body)?"Y1":"Y2";}else{AN=(AT===AC.DssGraphX1Body)?"X1":"X2";}var AM=this.mClippedMarkerSize[AN],AU=AM.LowOffset,AO=AM.HighOffset;AW=AP.getClippedOffset(AQ,AR,AS,AK,!this.mIsVertical,AU,AO);AM.LowOffset=AU=AW.LowOffset;AM.HighOffset=AO=AW.HighOffset;}function AB(AQ,AT,AP){if(!this.mChartContextPtr.mIsGraphMatrix){return AQ;}var AO,AN=0,AU=false,AM;if(AT.IsBaseAtZero()){AO=AT.GetPositionByValue(0);if(AO!==null){AN=AO;if(AT.isBaseLineQualified()){var AS=AQ.length;if(AS%2===0&&AS>=4){var AK=AS/2,AR,AL;AR=AQ.slice(0,AK);AL=AQ.slice(AK,AQ.length+1);if(AP&&AL[0].y===AN){AU=true;for(AM=0;AM<AK;++AM){if(AR[AM].y!==AL[AK-1-AM].y){AL[AK-1-AM].y--;}}}if(!AP&&AL[0].x===AN){AU=true;for(AM=0;AM<AK;++AM){if(AR[AM].x!==AL[AK-1-AM].x){AL[AK-1-AM].x++;}}}if(AU){AQ.splice(0,AQ.length);AQ=AR.concat(AL);}}}}}return AQ;}function M(AO,AQ){if(!this.mChartContextPtr.mIsGraphMatrix){return AO;}var AK=AO.length,AN;if(AK%2===0&&AK>=4){var AM=AK/2,AP,AL;AP=AO.slice(0,AM);AL=AO.slice(AM,AO.length+1);for(AN=0;AN<AM;++AN){if(AQ){if(AP[AN].y!==AL[AM-1-AN].y){AL[AM-1-AN].y++;}}else{if(AP[AN].x!==AL[AM-1-AN].x){AL[AM-1-AN].x--;}}}AO.splice(0,AO.length);AO=AP.concat(AL);return AO;}return AO;}function t(AY,AO,AU,AM){var Aa=this.mChartContextPtr.mIsGraphMatrix,Ab,AZ,Ad,AR;if(!Aa){a.call(this,AY,AU,AM);}var AN=this.mpABLPlotContext.mValueAxis,AV=new j.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:this.mSeriesInfo[AY].mSeriesId,GroupId:AO});if(AU.length===1){return ;}if(AU.length<=2){var AS=this.drawSinglePoint(AV,AU[0],AE._CIRCLE,AE._AREA);Ab=AS.Object;if(this.mDatasetPtr.showSeriesDatalabel(this.mSeriesInfo[AY].mSeriesId)){if(Ab!==undefined&&Ab!==null){this.mSinglePointObjects.push(Ab);}}AR=AS.ShapeSize;if(AR===undefined){if(Ab){AR=Ab.getShapeSize();}else{AR=0;}}AZ=AN[this.mSeriesInfo[AY].mValueAxis];if(AZ){AI.call(this,AZ,AU[0],AR);}}else{var AW=this.mHasColorBy&&this.mDatasetPtr.isGradientABL();AZ=AN[this.mSeriesInfo[AY].mValueAxis];Ad=AU.slice(0);Ad=AB.call(this,Ad,AZ,this.mIsVertical);if(AV.mSeriesId!==0){Ad=M.call(this,Ad,this.mIsVertical);Ab=AF.call(this,AV,Ad,AM,null);}else{Ab=AF.call(this,AV,Ad,AM,null);}if(AW){var AX=Ad;if(Ab){var AP=this.prepareTransitionalGradient(AV,AX,AX.length/2),AQ=Ab.GetFormatFill(),Ac=AQ.transformToGradient(AP);Ab.SetFormatFill(Ac);if(AP.Effective){var AT=Ac.getGradient(),AL=Ab.mFormatLinePtr.transformToGradientFromFill(AT,AX[0],AX[AX.length/2-1]);Ab.SetFormatLine(AL);}}}var AK=Ab&&(Ab instanceof j.MarkerObject);if(AK){AZ=AN[this.mSeriesInfo[AY].mValueAxis];if(AZ){AR=Ab.getShapeSize();AI.call(this,AZ,AU[0],AR);}}}if(Ab){this.mGraphObjectList.push(Ab);this.AddToMap(Ab);}}function g(AK,AM){var AP=AM.length/2,AO=AM.length-1,AN=[],AL;if(AK.mSeriesId===0&&this.mIgnoreBasesSeriesBorder){delete this.mIgnoreBasesSeriesBorder;return null;}AN.push(AM[AO]);for(AL=0;AL<=AP;++AL){AN.push(AM[AL]);}return new j.PolyLineObject({TripleId:AK,GraphObjectManager:this,PolyLine:AN});}function I(AM,AU,AP){var AL=this.mChartContextPtr,AV=this.mSeriesInfo[AM],AS=AV.mSeriesId,AT=new j.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:AS,GroupId:AU}),AK,AN,AW,AO;if(AP.length<4){return ;}if(!AL.mIsGraphMatrix){return ;}AK=this.GetGraphObject(AT);if(AK!==undefined&&AK!==null){AN=new j.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:AS});AW=g.call(this,AN,AP,AM);if(AW){AO=AW.mFormatLinePtr;AO.mLineThickness=2;var AR=AK.mFormatLinePtr,AQ=AK.GetFormatFill();if(AR){AO=mstrmojo.hash.copy(AR,AO);}else{if(AQ){AO.mLineColor=AQ.mSimpleColor;}}}if(AW){AW.mIsDetectable=false;this.mGraphObjectList.push(AW);}}}function x(AN,AU,AR){var AL=this.mChartContextPtr,AM=this.mDatasetPtr,AP,AV=this.mSeriesInfo[AN],AT=AV.mSeriesId,AS,AK,AO,AW,AQ;if(AR.length<4){return ;}if(!AL.mIsGraphMatrix){return ;}AP=AM.showSeriesDatalabel(AT);if(AP){AS=new j.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:AT,GroupId:AU});AK=this.GetGraphObject(AS);if(AK!==undefined&&AK!==null){AO=new j.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:AT});AW=g.call(this,AO,AR,AN);if(AW===null){return ;}AQ=AW.mFormatLinePtr;AQ.mLineThickness=2;AQ.mAlpha=255;this.mAreaBoundForDataLabel.push(AW);}}}function H(AK,AM){var AP,AQ,AS,AL,AT=[],AO=this.mChartContextPtr.mIsGraphMatrix;var AN=n.call(this,AK);AP=this.mSeriesPolygons[AN];if(AP.length<4&&!AO){return ;}this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);this.mGroupRangeList.splice(0,this.mGroupRangeList.length);AQ=L.call(this,AP,AT);AS=AQ.length;for(AL=0;AL<AS;++AL){var AR=-3;if(AO){AR=W.call(this,AL,AR);}t.call(this,AN,AR,AQ[AL],AM);I.call(this,AN,AR,AT[AL],AM);x.call(this,AN,AR,AT[AL],AM);}}function l(){}function Q(AL,AN){var AM=this.mSeriesPolygons[AL];if(AM[AN-1].x===-1||AM[AN].x===-1){return ;}var AK=[];AK[0]=AM[AN-1];AK[1]=AM[AN];AK[2]=AM[AM.length-AN-1];AK[3]=AM[AM.length-AN];return AK;}function U(AQ,AM){var AU,AR=[],AS=[],AL=[],AP,AN,AV,AT,AK,AO;if(this.mHasNegativeValue){l.call(this,AQ,AM);return ;}AU=this.IsReverseSeriesOrder(AQ);AP=this.mSeriesInfo.length;for(AO=0;AO<AP;++AO){AN=AU?AP-1-AO:AO;if(this.mSeriesInfo[AN].mValueAxis===AQ){AV=Q.call(this,AN,AM);if(AV===undefined){continue;}AR.push(AV);AS.push(AN);AL.push(true);}}AT=AR.length;for(AO=0;AO+1<AT;++AO){if(AU){AK=new j.Vector2D({StartPoint:AR[AO][3],EndPoint:AR[AO][2]});}else{AK=new j.Vector2D({StartPoint:AR[AO][0],EndPoint:AR[AO][1]});}if(this.PriorToNextSeries(AK,AM)){r.call(this,AS[AO],AR[AO],AM);AL[AO]=false;}}for(AO=AT-1;AO>=0;--AO){if(AL[AO]){r.call(this,AS[AO],AR[AO],AM);}}}function o(AP){var AL,AO,AN,AM=this.mSeriesInfo,AK=AM.length;if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){for(AL=0;AL<AK;++AL){if(AP===AM[AL].mValueAxis||AP===D.VA_BOTH){H.call(this,AL,this.mUseDepth);}}}else{AO=this.IsReverseGroupOrder();if(this.mpABLPlotContext.mABLOptions.mCurvedLines){l.call(this,AP,0);}else{for(AL=1;AL<this.mGroupCount;++AL){AN=AO?this.mGroupCount-AL:AL;U.call(this,AP,AN);}}for(AL=0;AL<AK;++AL){if(AP===AM[AL].mValueAxis||AP===D.VA_BOTH){H.call(this,AL,false);}}}}function Y(AL,AM,AN,AK){if(AL){if(AN){return AK.y<AM;}return AK.y<=AM;}if(AN){return AK.x>AM;}return AK.x>=AM;}function E(Ag){var AK=this.mpABLPlotContext,AQ=this.mpABLPlot,AV=[],An=0,Al=0,Ad,Aj,AP,Aq,AY,AO,Af,AW,AR,Ab,Ak,AT,Am,AU,AN,Ai=false,AX=false,AZ=false,Ao=this.mpABLPlotContext.mABLOptions.mLayout,Ah=this.mChartContextPtr.mIsGraphMatrix,AM=this.mGroupCount;if(this.mUseDepth){Ad=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[Ag].mSeriesIndex);An=Ad.OffsetX;Al=Ad.OffsetY;}AP=this.mSeriesInfo[Ag].mValueAxis;Aj=AK.mValueAxis[AP];AU=Aj.GetAxisOriginValue();AW=Aj.mOptions.mDrawFromZero;Aj.mOptions.mDrawFromZero=(AU===null||AU===0)&&(Aj.mOptions.mUseLogarithmicScale===false);AO=Aj.GetBasePosition(true);Aq=Aj.GetBaseValue(true);AN=Aj.GetPositionByValue(AU!==null?AU:0);if(AN===null){AN=-100;}AY=Aj.GetBasePosition(AU);for(Af=0;Af<AM;++Af){AR=0;Ad=this.GetData(Ag,Af);Ab=(Ad===null);if(Ad!==null){AR=Ad;++AQ.DPCount;if(AQ.seriesDPCount[this.mSeriesInfo[Ag].mSeriesId]===undefined||AQ.seriesDPCount[this.mSeriesInfo[Ag].mSeriesId]===null){AQ.seriesDPCount[this.mSeriesInfo[Ag].mSeriesId]=1;}else{++(AQ.seriesDPCount[this.mSeriesInfo[Ag].mSeriesId]);}}Ak=0;Ad=Aj.GetPositionByValue(AR);if(Ad!==null){Ak=Ad;}if(Ah&&Ab){AV[Af]=A;AV[AM*2-Af-1]=A;continue;}if((this.mIsAbsolute&&Ab)||Ad===null){AV[Af]=A;AV[AM*2-Af-1]=A;continue;}AT=AK.mCategoryAxisPtr.getGroupMiddlePos(Af);if(!this.mIsAbsolute){var AS=Ao===T.LO_STACKED,AL=Aj.mOptions.mUseCustomMinMax,Ap=Aj.mOptions.mUseLogarithmicScale;if(Aj.mOptions.mDrawFromZero||T.LO_PERCENT===Ao||(AS&&!AL&&Ap)){if((AS&&!AL&&Ap)&&(Ag===0)){Am=Aq;}else{Am=0;Ad=this.GetData(Ag,Af,true);if(Ad!==null){Am=Ad;}}Ad=Aj.GetPositionByValue(Am);if(Ad!==null){AO=Ad;}else{AV[Af]=A;AV[AM*2-Af-1]=A;continue;}}else{var Aa=this.updateGroupStackInfoWithBase(AP,Af,AU);var Ac=this.getSeriesOffsetIntoStackedInfo(AP,Af,Ag);var Ar=Aa[Ac];AO=Aj.ValueToPosition(AR>=Aq?Ar.Min:Ar.Max);Ak=Aj.ValueToPosition(AR>=Aq?Ar.Max:Ar.Min);}}if(Ak===AY&&AR!==Aq){if(this.mIsAbsolute&&this.mSeriesInfo.length===1){if(this.mIsVertical){Al=AR>0?-1:1;}else{An=AR>0?1:-1;}}else{if(Ag===0){this.mIgnoreBasesSeriesBorder=true;}}}if(this.mIsVertical){AV[Af]=new j.Point2D({x:AT+An,y:Ak+Al});AV[AM*2-Af-1]=new j.Point2D({x:AT+An,y:AO+Al});}else{AV[Af]=new j.Point2D({x:Ak+An,y:AT+Al});AV[AM*2-Af-1]=new j.Point2D({x:AO+An,y:AT+Al});}if(!AZ&&Ah){var Ae=AV[Af];var As=Y.call(this,this.mIsVertical,AN,true,Ae);Ai=Ai||As;AX=AX||!As;Ae=AV[AM*2-Af-1];As=Y.call(this,this.mIsVertical,AN,false,Ae);Ai=Ai||As;AX=AX||!As;AZ=AX&&Ai;}}Aj.mOptions.mDrawFromZero=AW;return{POLYGON:AV,CROSS:AZ};}function p(){var AN=this.mFinalSeriesPolygons,AT=this.mSeriesPolygons,AL,AK,AM,AV,AU,AO=this.mpABLPlotContext.mABLOptions.mLayout;this.mSeriesDrawingOrder.splice(0,this.mSeriesDrawingOrder.length);AM=this.mSeriesInfo.length;for(AL=0;AL<AM;++AL){var AP=E.call(this,AL);var AR=AP.POLYGON;AU=AP.CROSS;AN.push(AR);if((AO===T.LO_STACKED||AO===T.LO_PERCENT)&&this.mChartContextPtr.mIsGraphMatrix){if(AU){this.mSeriesDrawingOrder.unshift(AL);}else{this.mSeriesDrawingOrder.push(AL);}}}AT.splice(0,AT.length);var AQ;AM=AN.length;for(AL=0;AL<AM;++AL){AQ=[];AV=AN[AL].length;for(AK=0;AK<AV;++AK){var AS=new j.Point2D();this.GetAreaPointByProgress(AL,AK,this.mProgress,AS);AQ.push(AS);}AT.push(AQ);}}function s(AL){var AK;for(AK=0;AK<this.mSeriesInfo.length;++AK){if(AL===this.mSeriesInfo[AK].mValueAxis||AL===D.VA_BOTH){h.call(this,AK);}}}function h(AK){var AT=this.mSeriesInfo,AQ=this.mSeriesPolygons[AK],AS=this.mChartContextPtr.mIsGraphMatrix,AM,AP,AN,AU,AO=d.kVirtualMarkerSize,AL,AR=AQ.length;for(AL=0;AL*2<AR;++AL){if(AQ[AL].x===-1){continue;}AM=this.mDatasetPtr.GetData(AT[AK].mSeriesId,AL,0);if(AM===null||AM===undefined){continue;}if(AS){this.CreateOneDataMarker(AK,AL,null,AQ[AL],AL);}else{AP=new j.Rect2D({x:AQ[AL].x-AO/2,y:AQ[AL].y-AO/2,height:AO,width:AO});AN=new j.TripleId({ObjectId:AC.DssGraphDataMarker,SeriesId:AT[AK].mSeriesId,GroupId:AL});AU=new j.RectangleObject({TripleId:AN,GraphObjectManager:this,Area:AP,GraphCollectionObject:null,IsOnlyForToolTip:true,IsVirtualMarker:true});this.AddToMapAndList(AU);}}}function AJ(AS){var AQ=this.mFinalSeriesPolygons[AS.SeriesInfo],AR=0,AO=0,AK=this.mChartContextPtr,AP=AK.GetGraphMatrixContext(),AL=AK.getUtiliy().tripleId,AN,AM;AL.reset(w,AC.DssGraphRiser,AS.SeriesId,AS.GroupId);AN=AP.IsIsolatedDot(w);if(AQ[AS.GroupId].x===-1){return false;}if(AN){AM=this.GetGraphObject(w);if(AM!==null&&AM!==undefined&&AM.mMarkerSize!==undefined&&AM.mMarkerSize!==null){AR=AM.mMarkerSize;}AO=AR;}AS.HostMarkerPoint=AQ[AS.GroupId];AS.CenterXOffset=AR;AS.CenterYOffset=AO;return true;}function c(){var AM,AL=this.mDataLabels,AK=AL.length;for(AM=0;AM<AK;++AM){AL[AM].isValid=AJ.call(this,AL[AM]);}}function X(){var AK=this.mpABLPlot.dataLabelManager,AM=this.mChartContextPtr,AL=new j.Rect2D({x:0,y:0,width:AM.mGraphWidth,height:AM.mGraphHeight});if(AK===null||AK===undefined){AK=this.mpABLPlot.dataLabelManager=new j.DataLabelManager({DataArea:AL});AK.ChartContext=AM;}AK.SinglePointObjects=AK.SinglePointObjects.concat(this.mSinglePointObjects);AK.PolyLineObjects=AK.PolyLineObjects.concat(this.mAreaBoundForDataLabel);AK.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AK;}function P(){var AL=this.mDataLabels,AK=AL.length,AM;for(AM=0;AM<AK;++AM){if(AL[AM].display){this.CreateOneDataMarker(AL[AM].SeriesInfo,AL[AM].GroupId,null,AL[AM].HostMarkerPoint,-3,true);}}}function f(AL){if(this.mChartContextPtr.mIsGraphMatrix){if(this.mDatasetPtr.showDatalabels()){this.CreateAllDataLabels();c.call(this);var AK=X.call(this);AK.PlaceDataLabels(this.mDataLabels,AL);P.call(this);}}else{e.call(this);}}mstrmojo.chart.AreaSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.AreaSeriesRenderer",mAreaCollection:null,mSeriesPolygons:null,mFinalSeriesPolygons:null,mIsAbsolute:false,mIsPolygonSplit:false,mSeriesDrawingOrder:null,mGroupRangeList:null,mSinglePointObjects:null,mHasCreatedMarkers:false,mAreaBoundForDataLabel:null,mDataLabels:null,init:function AH(AK){this._super(AK);this.mAreaCollection=[];this.mSeriesPolygons=[];this.mFinalSeriesPolygons=[];this.mSeriesDrawingOrder=[];this.mGroupRangeList=[];this.mIsAbsolute=this.mpABLPlot.isAbsoluteOrCluster();this.mProgress=1;this.mSinglePointObjects=[];this.mAreaBoundForDataLabel=[];this.mDataLabels=[];},GenerateMapAndList:function AG(AK){var AL=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}v.call(this);p.call(this);var AQ=new j.TripleId({ObjectId:AA.DssGraphRendererLayer,SeriesId:D.VA_BOTH}),AO=new j.GraphObjectAggregation({TripleId:AQ,GraphObjectManager:this}),AT=this.mGraphObjectList;AT.splice(0,AT.length);this.GenerateInterpolationFrame(1,AO);if(AL.mUseAnimation){this.GenerateInterpolationFrame(0,AO);}AT.push(AO);if(AL.mImageUsage===J.GENERAL){f.call(this,AK);this.GenerateTrendLine();this.GenerateRefLine();}if(this.mSeriesDrawingOrder&&this.mSeriesDrawingOrder.length){var AN=this.renderSequence,AM=this.mSeriesDrawingOrder,AU=this.mSeriesInfo,AP,AS=this.mSeriesDrawingOrder.length;AN.splice(0,AN.length);for(AP=0;AP<AS;AP++){var AR=AM[AP];AR=AU[AR].mSeriesId;AN[AR]=AP;}}else{this.populateRenderSequence();}},GenerateByValueAxis:function u(AR){var AO=[],AN=[],AL,AK,AM=this.mGraphObjectList,AQ,AP;if(this.mSeriesPolygons.length===0){v.call(this);p.call(this);}AQ=new j.TripleId({ObjectId:AA.DssGraphRendererLayer,SeriesId:AR,GroupId:y});AP=new j.GraphObjectAggregation({TripleId:AQ,GraphObjectManager:this});AO.push(AP);this.GenerateInterpolationFrame(1,AP);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0,AP);}AL=AM.length;for(AK=0;AK<AL;AK++){AN.push(AM[AK]);}AM.splice(0,AL);AM.splice(0,AL);for(AK=0;AK<AL;++AK){AM.push(AN[AK]);}if(AR===D.VA_Y1){e.call(this);this.GenerateTrendLine();this.GenerateRefLine();}},GenerateInterpolationFrame:function Z(AK,AL){var AS=this.mSeriesPolygons,AP=this.mGraphObjectList,AW=AP.slice(0),AN=this.mFinalSeriesPolygons.length,AO,AM,AQ,AU,AR,AV,AT;this.mProgress=AK;AS.splice(0,AS.length);for(AO=0;AO<AN;++AO){AQ=[];AU=this.mFinalSeriesPolygons[AO].length;for(AM=0;AM<AU;++AM){AR=new j.Point2D();this.GetAreaPointByProgress(AO,AM,this.mProgress,AR);AQ.push(AR);}AS.push(AQ);}AV=AL.mTripleId.mSeriesId;if(AV===D.VA_BOTH){if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){o.call(this,D.VA_BOTH);s.call(this,D.VA_BOTH);}else{o.call(this,D.VA_Y2);o.call(this,D.VA_Y1);s.call(this,D.VA_Y2);s.call(this,D.VA_Y1);}}else{o.call(this,AV===D.VA_Y1?D.VA_Y1:D.VA_Y2);s.call(this,AV===D.VA_Y1?D.VA_Y1:D.VA_Y2);}AL.Clear(AK<0.5,AK>=0.5);AT=AP.length;for(AO=0;AO<AT;++AO){AL.AddGraphObject(AP[AO],AK<0.5);}if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AL.SetAnimationEnable(true);AL.SetProgress(AK);}AP.splice(0,AP.length);AP=AP.concat(AW);this._super(AK);},GetAreaPointByProgress:function N(AP,AS,AK,AU){var AQ=this.mFinalSeriesPolygons,AM=this.mChartContextPtr,AT=false,AO=[],AN,AV;if(AQ[AP][AS].x===-1&&AQ[AP][AS].y===-1){AU.x=-1;AU.y=-1;return ;}if(!!AM.mpOldChartManager){AN=AM.mpOldChartManager;var AR=AN.GetGraphObjectManager(this.mTripleId,true);if(AR!==null){AV=AR;AO=AV.mFinalSeriesPolygons.slice(0);AT=true;}}if(AT&&AP<AO.length&&AS<AO[AP].length&&!(AO[AP][AS].x===-1&&AO[AP][AS].y===-1)){AU.x=AO[AP][AS].x+(AQ[AP][AS].x-AO[AP][AS].x)*AK;AU.y=AO[AP][AS].y+(AQ[AP][AS].y-AO[AP][AS].y)*AK;}else{var AL=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AP].mValueAxis].GetBasePosition();if(this.mIsVertical){AU.x=AQ[AP][AS].x;AU.y=AL-(AL-AQ[AP][AS].y)*AK;}else{AU.x=AL-(AL-AQ[AP][AS].x)*AK;AU.y=AQ[AP][AS].y;}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","StraightLineObject","MarkerObject","SeriesRenderer","BarSeriesRenderer","Plot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumOrientation","EnumGraphMatrixThemeType","EnumValueAxis","EnumFontRotation","EnumFontRotation","EnumGenericDirection");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var W=mstrmojo.chart,J=W.enums,F=J.EnumOrientation,V=J.EnumGraphMatrixThemeType,B=J.EnumCollectionType,E=J.EnumFontRotation,P=mstrmojo.chart.model,L=P.enums,b=L.EnumDSSGraphDataTextPosition,j=L.EnumDSSGraphObject;var R=W.ChartConstants,G=mstrmojo.chart.common.Utility,a=0.9,K=5,Z=0,Q=2,d=3,M=4,D=100,X=10,C=3,f=1,I=1;function k(x){var r={},v,q,p=[0.1,0.2,0.3],t,w,u,s=this.mChartContextPtr;if(this.oneGroupBandColors){return this.oneGroupBandColors;}this.oneGroupBandColors=null;switch(this.bandOptions.ColorMode){case Q:v=7697781;break;case Z:t=new W.TripleId([j.DssGraphRiser,C,x]);w=this.GetGraphObject(t,true);if(w&&w.mFormatFillPtr){u=w.mFormatFillPtr.mSimpleColor;}else{u=s.GetColorValue(t,0,true);}v=u;break;case M:q=[16711680,65280,16776960];break;case d:q=[255,16776960,65280];break;default:break;}if(v){r.Color=v;}if(q){if(this.bandOptions.DescentLayout){r.Colors=q.reverse();}else{r.Colors=q;}}r.Alphas=p;this.oneGroupBandColors=r;return r;}function O(z,q){q=q||0;var w,AB,s;w=this.mDatasetPtr.getBandDivision(z,q);if(w.Metrics&&w.Metrics.length){w=w.Metrics;AB=[];var y,r=this.mpABLPlotContext,v=this.mSeriesInfo[q].mValueAxis,AA=r.mValueAxis[v],u=AA.mMinTick,p=AA.mMaxTick-u,t=w.length;for(s=0;s<t;++s){if(s===t-1){y=1;}else{y=w[s];y=Math.max(y-u/p,0);y=Math.min(y,1);}AB.push(y);}}else{if(w.Ratios&&w.Ratios.length){AB=w.Ratios;}}return(AB||[3/11,6/11,1]);}function A(y,q){q=q||0;if(this.oneGroupBandValues){return this.oneGroupBandValues;}var t=O.call(this,y,q),r=this.mpABLPlotContext,w=this.mSeriesInfo[q].mValueAxis,z=r.mValueAxis[w],v=z.mMinTick,p=z.mMaxTick-v,x=[],s,u=t.length;for(s=0;s<u;++s){x.push(v+t[s]*p);}this.oneGroupBandValues=x;return x;}function Y(){if(this.mBarWidth<=0){var u=this.mBarOptions,v=this.bandOptions;if(this.mBarColumns===-1){u.mGapWidth=0;this.mBarColumns=1;var q=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),t=v.Width.Padding;this.mBarWidth=(q-2*t)*v.Width.Ratio;this.mBarWidth=Math.round(this.mBarWidth);var s=this.bandOptions.Width.Limit;this.mBarWidth=Math.min(this.mBarWidth,s.Max);this.mBarWidth=Math.max(this.mBarWidth,s.Min);this.mBarWidth=Math.round(this.mBarWidth);v.Width.Padding=t=Math.max((q-this.mBarWidth)/2,0);this.mSpaceBetweenRiser=0;this.mSpaceBetweenGroup=t*2;}}var p=this.mBarWidth,r;if(G.isIntegar(p)){r=p%3;this.bulletWidth=(p-r)/3+r;}else{this.bulletWidth=p/3;}}function o(AB,z){var AG=AB.seriesInfoID,x=AG>=C&&AG<C+f,t=z.mRect,v=0,r=this.mpABLPlotContext,AA=r.mABLOptions,AE=r.mCategoryAxisPtr,w=AB.groupID;this.hPostProcessOneBar(AB,z);if(x){switch(AA.mOrientation){case F.OR_VERTICAL:v=Math.abs(AE.getGroupMiddlePos(w)-t.GetBottomMiddle().x);t.x+=v;break;case F.OR_HORIZONTAL:v=Math.abs(AE.getGroupMiddlePos(w)-t.GetLeftMiddle().y);t.y-=v;break;}}else{var u=this.mSeriesInfo[AB.seriesInfoID].mValueAxis,AF=r.mValueAxis[u],q=A.call(this,AB.groupID),p=AB.seriesInfoID,AD=q[p],s=AF.ValueToPosition(AD),AH=AF.ValueToPosition(AF.mMinTick);switch(AA.mOrientation){case F.OR_VERTICAL:if(AB.seriesInfoID!==0){AD=q[p-1];AH=AF.ValueToPosition(AD);}t.y=s;t.height=Math.abs(s-AH);break;case F.OR_HORIZONTAL:if(AB.seriesInfoID!==0){AD=q[p-1];AH=AF.ValueToPosition(AD);}t.x=AH;t.width=Math.abs(s-AH);break;}var y=z.mFormatFillPtr,AC=k.call(this,AB.groupID);y.mSimpleColor=AC.Color||AC.Colors[AB.seriesInfoID]||255;y.mAlpha=AC.Alphas[AB.seriesInfoID]*255||255;}}function S(s,w){var t=s.seriesInfoID,u=t>=C&&t<C+f,y={Bar:null,AddToMapAndList:false};var q=this.PrepareData(s,u);if(q===null||q===undefined){return y;}var v=this.hPrepareRect(s,q,u?this.bulletWidth:this.mBarWidth),x=v.Rect,p=v.AboveBase;if(u){if(!this.hUpdateBarRect(s,x,p,q)){return y;}}if(x.width<=0||x.height<=0){return y;}if(!w){var r=this.hPrepareRectangleObject(s,x,p);if(r){o.call(this,s,r);}y.Bar=r;y.AddToMapAndList=true;}return y;}function U(AA,AD,w){w=w||0;AD=AD||false;if(AD){return ;}var t=this.mChartContextPtr,AG=t.GetGraphMatrixContext(),q=this.mpABLPlotContext,AC=this.mDatasetPtr.GetData(AA.seriesInfoID,AA.groupID),v=this.mSeriesInfo[w].mValueAxis,AF=q.mValueAxis[v],y=q.mABLOptions,z,AB,AE=[],s=new W.Point2D(),r=new W.Point2D(),u=new W.TripleId([j.DssGraphRiser,0,AA.groupID]),AH=new W.TripleId([j.DssGraphDataLine,AA.seriesInfoID,AA.groupID]);AB=this.GetGraphObject(u);if(AB){var p=AB.GetBoundingRect();switch(y.mOrientation){case F.OR_VERTICAL:s.x=p.GetLeftMiddle().x;r.x=p.GetRightMiddle().x;s.y=r.y=AF.ValueToPosition(AC);break;case F.OR_HORIZONTAL:s.y=p.GetTopMiddle().y;r.y=p.GetBottomMiddle().y;s.x=r.x=AF.ValueToPosition(AC);break;}}else{var x=this.GetRiserStartPosAndSize(AA);switch(y.mOrientation){case F.OR_VERTICAL:s.x=x.Start;r.x=x.Start+x.Size;s.y=r.y=AF.ValueToPosition(AC);break;case F.OR_HORIZONTAL:s.y=x.Start;r.y=x.Start+x.Size;s.x=r.x=AF.ValueToPosition(AC);break;}}AE.push(s);AE.push(r);z=new W.StraightLineObject({TripleId:AH,GraphObjectManager:this,StartPoint:AE[0],EndPoint:AE[1],GraphCollectionObject:null});if(z){this.AddToMapAndList(z);}}function H(x,AA,AD,r,AG,s){var u,v,AB,AC,t=this.mChartContextPtr,w=this.mIsVertical,AE;r=r||false;u=w?AD.GetTopMiddle():AD.GetRightMiddle();v=w?AD.GetBottomMiddle():AD.GetLeftMiddle();AB=false;AC=this.GetData(AA.seriesInfoID,AA.groupID);if(AC!==null){AE=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AA.seriesInfoID].mValueAxis];AB=(AC<0)^AE.IsReverseOrder();}else{return false;}if(AG===undefined){AG=0;}if(s===undefined){s=this.mIsVertical?t.mGraphHeight:t.mGraphWidth;}var p=x.GetBoundingRect(),AF=t.GetGraphMatrixContext();if(AB){u.swapPoints(v);AG=0;s=AE.GetBasePosition();}var z=AF.getPadding(R.kLabelToChart),y=this.mpABLPlotContext.mABLOptions,q=y.mTextPosition;switch(q){case b.DssGraphDTPositionCenter:break;case b.DssGraphDTPositionInMin:case b.DssGraphDTPositionOutMax:if(r){if(AB){if(w){u.y-=z;}else{u.x+=z;}}else{if(w){u.y+=z;}else{u.x-=z;}}}else{if(AB){if(w){u.y+=z;}else{u.x-=z;}}else{if(w){u.y-=z;}else{u.x+=z;}}}break;case b.DssGraphDTPositionOutMin:case b.DssGraphDTPositionInMax:break;default:break;}this.MoveLabel(AA.groupID,x,u,v,AA.seriesInfoID);p=x.GetBoundingRect();return AF.checkLabelPaddingToBorder(p,AG,s,!this.mIsVertical);}function T(p,q){var r=q.rect;if(this.mIsVertical){return !(r.GetBottomMiddle().y>=p&&r.GetTopMiddle().y<=p);}return !(r.GetRightMiddle().x>=p&&r.GetLeftMiddle().x<=p);}function h(s,t,r,v){v=v||false;var q=new W.Rect2D({Rect:s}),p,u;if(this.mIsVertical){if(r){if(v){q.height-=Math.max(0,t-q.y);q.y=Math.max(t,q.y);}else{q.height+=Math.max(0,q.y-t);q.y=Math.min(t,q.y);}}else{if(v){q.height-=Math.max(0,t-q.y);}else{q.height+=Math.max(0,q.y-t);}}}else{if(r){if(v){q.width=t-q.x;}else{q.width=t-q.x;}}else{if(v){q.width-=Math.max(t-q.x,0);q.x=t;}else{q.width+=Math.max(q.x-t,0);q.x=t;}}}return{Valid:true,Rect:q,Low:p,High:u};}function l(AB){var AE=new W.TripleId({ObjectId:j.DssGraphRiser,SeriesId:this.mSeriesInfo[AB.seriesInfoID].mSeriesId,GroupId:AB.groupID}),w=I>0,u=w,y,AH,AL=this.GetGraphObject(AE),AI,AK,AF;if(!AL){return null;}AH=AL.GetBoundingRect();AE.mObjectId=j.DssGraphDataText;if(this.mSGMapLabel[AE.mSeriesId]===undefined){this.mSGMapLabel[AE.mSeriesId]=new W.GraphCollectionObject({TripleId:AE,GraphObjectManager:this,CollectionType:B.CT_TEXT});}var z=this.mSGMapLabel[AE.mSeriesId],AC=0,AD=true,t=this.mDatasetPtr.GetData(AE.mSeriesId,AE.mGroupId),v=this.createRiserLabel(AB.seriesInfoID,AB.groupID,z);if(v===null){return null;}if(u){var s=this.mDatasetPtr.GetData(C+f,AE.mGroupId);if(s){if(s===0||s===t){u=false;}else{u=(s>0&&t>=0)||(s<0&&t<=0);if(u){AD=(s>t&&t>=0)||(s<t&&t<=0);}}}else{u=false;}}for(AI=0;AI<2;++AI){if(y===true){return v;}if(AI===1){v.SetRotation(E.FR_90);}y=H.call(this,v,AB,AH);if(u&&AD&&y){y=T.call(this,AC,v);if(!y){AK=h.call(this,AH,AC,(t>=0),false);if(AK.Valid){y=H.call(this,v,AB,AK.Rect,false,AK.High,AK.Low);}}}if(!y){var x=this.mpABLPlotContext.mABLOptions,p=x.mTextPosition,AG=p;x.mTextCollection=b.DssGraphDTPositionInMax;y=H.call(this,v,AB,AH,true);if(u&&!AD&&y){y=T.call(this,AC,v);if(!y){AK=h.call(this,AH,AC,(t>=0),true);if(AK.Valid){y=H.call(this,v,AB,AK.Rect,true,AK.High,AK.Low);}}}var r=true,AJ=false;if(this.mIsVertical){AJ=AH.height<=v.height;}else{AJ=AH.width<=v.width;}if(r){AF=this.mChartContextPtr.getDefaultContrastColor();var AA=1,q=new W.FormatFont({Font:v.mFormatFontPtr});q.mStrokeColor=AF;if(AJ){q.mFontStyle=AA;}v.mFormatFontPtr=q;}x.mTextCollection=AG;}}return v;}function N(AA,w,AC){var s=w,AB={groupID:AA,seriesInfoID:0},q=true,AE=true,x=true,p=true;var v,AD,z;if(q){for(v=0;v<f;++v){AB.seriesInfoID=s[C+v];AD=S.call(this,AB,AC);if(AD.Bar===null){return ;}}}else{return ;}if(AE){for(v=0;v<C;++v){AB.seriesInfoID=s[v];AD=S.call(this,AB,AC);}}if(x){for(v=0;v<I;++v){AB.seriesInfoID=s[C+f+v];z=U.call(this,AB,AC);}}if(p){for(v=0;v<f;++v){AB.seriesInfoID=s[C+v];var y=this.mpABLPlotContext.mABLOptions,u=y.mShowValue,t=this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AB.seriesInfoID].mSeriesIndex].mShowDataLabels;y.mShowValue=true;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AB.seriesInfoID].mSeriesIndex].mShowDataLabels=true;var r=l.call(this,AB);if(r){r.mTripleId.mSeriesID=C+f+I;this.AddToMapAndList(r);}y.mShowValue=u;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AB.seriesInfoID].mSeriesIndex].mShowDataLabels=t;}}}function g(v){var q=this.IsReverseGroupOrder(),r,u=[],p,s;var t=this.mDatasetPtr.GetGroupCount();for(s=0;s<t;++s){r=s;if(q){r=t-1-r;}u=this.GetSeriesOrderByType(r,u,v);p=u.length;A.call(this,r,v);k.call(this,r);N.call(this,r,u);this.oneGroupBandValues=null;this.oneGroupBandColors=null;}this.GenerateTrendLine();this.GenerateRefLine();}mstrmojo.chart.BulletSeriesRenderer=mstrmojo.declare(mstrmojo.chart.BarSeriesRenderer,null,{scriptClass:"mstrmojo.chart.BulletSeriesRenderer",bandOptions:null,bulletWidth:0,oneGroupBandValues:null,oneGroupBandColors:null,labelCollection:null,init:function n(p){this._super(p);this.bandOptions={DescentLayout:false,Width:{Ratio:a,Padding:K,Limit:{Max:D,Min:X}},ColorMode:Q,PositionByMetric:false};},GenerateByValueAxis:function e(p){this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();Y.call(this);if(this.mSeriesInfo.length===0){return ;}g.call(this,p);},PrepareData:function c(q,r){if(r){return this.hPrepareData(q);}var p=A.call(this,q.groupID);return p[q.seriesInfoID];}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","BarSeriesRenderer","AreaSeriesRenderer","LineSeriesRenderer","BulletSeriesRenderer","Plot","GraphObjectManager","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumMajorGraphType","EnumGraphSubType","EnumOrientation","EnumValueAxis","EnumAnchorPoint","EnumTrendLineIndex");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumShapeType","EnumDSSGraphObject");var R=mstrmojo.hash,f=mstrmojo.chart,Z=f.ChartConstants,M=f.enums,g=M.EnumMajorGraphType,O=M.EnumLayout,j=M.EnumGraphSubType,K=M.EnumOrientation,E=M.EnumValueAxis,a=M.EnumTrendLineIndex,p=M.EnumAnchorPoint,l=f.gNullTripleId,W=mstrmojo.chart.model,Q=W.enums,v=Q.EnumShapeType,q=Q.EnumDSSGraphType,t=Q.EnumDSSGraphProperty,S=Q.EnumDSSGraphDataTextShowType,u=Q.EnumDSSGraphObject,V=0,b=1,r=2,AC=1,N=2,z=3,L=4;var AD=new f.TripleId();function AF(){var AG=this.mChartContextPtr,AH=this.mABLPlotContext,AK=AH.mABLOptions,AJ,AO={positive:[],negative:[]},AL=this.mAreaSeriesRendererPtr,AP=this.mBarSeriesRendererPtr,AN=this.mLineSeriesRendererPtr;if((AK.mLayout===O.LO_STACKED)||(AK.mLayout===O.LO_PERCENT)){if(AG.isCombinationChart()){var AM=this.mSeriesId,AI=AM.length;for(AJ=0;AJ<AI;++AJ){if(AL){AO=AL.UpdateCumulateData(E.VA_Y1,AO,AM[AJ]);}if(AP){AO=AP.UpdateCumulateData(E.VA_Y1,AO,AM[AJ]);}if(AN){AO=AN.UpdateCumulateData(E.VA_Y1,AO,AM[AJ]);}}if(AK.mDualAxes){AO={positive:[],negative:[]};for(AJ=0;AJ<AI;++AJ){if(AL){AO=AL.UpdateCumulateData(E.VA_Y2,AO,AM[AJ]);}if(AP){AO=AP.UpdateCumulateData(E.VA_Y2,AO,AM[AJ]);}if(AN){AO=AN.UpdateCumulateData(E.VA_Y2,AO,AM[AJ]);}}}}else{if(AL){AO=AL.UpdateCumulateData(E.VA_Y1,AO);}if(AP){AO={positive:[],negative:[]};AO=AP.UpdateCumulateData(E.VA_Y1,AO);}if(AN){AO={positive:[],negative:[]};AN.UpdateCumulateData(E.VA_Y1,AO);}if(AK.mDualAxes){AO={positive:[],negative:[]};if(AL){AO=AL.UpdateCumulateData(E.VA_Y2,AO);}if(AP){AO={positive:[],negative:[]};AO=AP.UpdateCumulateData(E.VA_Y2,AO);}if(AN){AO={positive:[],negative:[]};AN.UpdateCumulateData(E.VA_Y2,AO);}}}}}function U(){var AK=[],AI=[this.mAreaSeriesRendererPtr,this.mBarSeriesRendererPtr,this.mLineSeriesRendererPtr],AG=AI.length,AH,AJ=0;for(AH=0;AH<AG;AH++){if(AI[AH]){AJ=AI[AH].updateSeriesRenderSequence(AK,AJ);}}return AK;}function y(){var AH=this.mABLPlotContext,AK=AH.mCategoryAxisPtr,AI=this.mDatasetPtr;this.DPCount=0;this.seriesDPCount.splice(0,this.seriesDPCount.length);if(this.mPartialRendering){var AG=this.mChartContextPtr,AM={PartialRendering:true,Group:{}},AJ,AN,AL=AG.mRenderingWindow,AO=AG.IsVertical();if(AO){AJ=AL.x;AN=AJ+AL.width;}else{AJ=AL.y;AN=AJ+AL.height;}AM.Group.Max=AK.getGroupSlotAt(AN)+1;AM.Group.Min=AK.getGroupSlotAt(AJ)-1;AM.Data={Max:-1,Min:-1};AI.updateDataWindow(AM);}else{AI.resetDataWindow();}}function AE(){var AH=this.mDatasetPtr,AO,AI,AN=E.VA_Y1,AG,AL,AJ,AP,AM,AK;AO=AH.GetGroupCount();AI=this.mSeriesId.length;if(this.mChartContextPtr.IsDualAxis()){AG=AH.GetSeriesByValueAxis(E.VA_Y2);}else{AG=[];}for(AL=0;AL<AO;++AL){AP=AM=0;for(AJ=0;AJ<AI;++AJ){AK=AH.GetData(this.mSeriesId[AJ],AL);if(AK!==null&&AK!==undefined){if(AG.indexOf(this.mSeriesId[AJ])!==-1){AN=E.VA_Y2;if(AK>0){AM+=AK;}else{AM+=Math.abs(AK);}}else{AN=E.VA_Y1;if(AK>0){AP+=AK;}else{AP+=Math.abs(AK);}}}}this.groupTotals[0].push(AP);this.groupTotals[1].push(AM);}}function c(){var AP=this.mABLPlotContext.mABLOptions,AJ=this.mABLPlotContext.mSeriesOptions,AI=this.mChartContextPtr,AV,AM,AL,AN,AO,AT,AR,AU=0;if(AI.mIsGraphMatrix&&AI.isCombinationChart()){var AS,AK=this.mDatasetPtr.GetSeriesByShape(),AH=[AK.Tick,AK.Line,AK.Square,AK.Circle,AK.Bar,AK.Area,AK.Pie],AQ=[v._TICKER,v._LINE,v._SQUARE,v._CIRCLE,v._BAR,v._AREA,v._PIE];AR=AH.length;for(AM=0;AM<AR;++AM){AS=AH[AM];AT=AQ[AM];if(AS&&AS.length){++AU;for(AL=0;AL<AS.length;AL++){AJ[AS[AL]].mRealSeriesType=AT;}}}this.countOfTypes=AU;this.realComboChart=(AU>1);return ;}var AG=AI.getUtiliy().tripleId;AN=AJ.length;for(AM=0;AM<AN;++AM){switch(AJ[AM].mSeriesType){case v._AREA:AJ[AM].mRealSeriesType=v._AREA;break;case v._BAR:AJ[AM].mRealSeriesType=v._BAR;break;case v._LINE:if(AP.mCurvedLines){AJ[AM].mRealSeriesType=v._LINE;}else{AO=AG.create(u.DssGraphRiser,this.mSeriesId[AM]);AV=AI.GetProperty(t.DssGraphShowStepLine,AO);if(AV!==undefined&&AV!==null){if(AV){AJ[AM].mRealSeriesType=v._STEPLINE;}else{AJ[AM].mRealSeriesType=v._LINE;}}}break;case v._PIE:AJ[AM].mRealSereisType=v._LINE;break;case v._DEFAULT:if(AP.mMajorGraphType===g.MGT_AREA){AJ[AM].mRealSeriesType=v._AREA;}else{if(AP.mMajorGraphType===g.MGT_BAR){AJ[AM].mRealSeriesType=v._BAR;}else{if(AP.mCurvedLines){AJ[AM].mRealSeriesType=v._LINE;}else{AO=AG.create(u.DssGraphRiser,this.mSeriesId[AM]);AV=AI.GetProperty(t.DssGraphShowStepLine,AO);if(AV!==undefined&&AV!==null){if(AV){AJ[AM].mRealSeriesType=v._STEPLINE;}else{AJ[AM].mRealSeriesType=v._LINE;}}else{AJ[AM].mRealSeriesType=v._LINE;}}}}break;}}}function Y(AH){var AM=this.mChartContextPtr,AL=this.mABLPlotContext,AJ=AL.mABLOptions,AG=AL.mSeriesOptions,AK;var AI=AM.getUtiliy().tripleId;AI.reset(AD,u.DssGraphRiser,this.mSeriesId[AH]);if(!AM.mIsGraphMatrix){AK=AM.GetProperty(t.DssGraphSDRiserType,AD);if(AK){switch(AK){case V:AG[AH].mSeriesType=v._DEFAULT;break;case b:if(AJ.mMajorGraphType===g.MGT_LINE){AG[AH].mSeriesType=v._BAR;}else{AG[AH].mSeriesType=v._LINE;}break;case r:if(AJ.mMajorGraphType===g.MGT_AREA){AG[AH].mSeriesType=v._BAR;}else{AG[AH].mSeriesType=v._AREA;}break;default:AG[AH].mSeriesType=AK;break;}}}AG[AH].mValueAxis=this.LoadValueAxisInfo(AH,AJ.mDualAxes);if(AM.mImageUsage!==0){return ;}this.LoadTrendLineProperties(this.mSeriesId[AH],AG[AH].mTrendLineOptions);if(AM.mIsGraphMatrix===false){AG[AH].mGraphNumberFormat=new f.ChartAdvFormat();AK=AM.GetProperty(-t.DssGraphFormatDataTextAdv,AD);if(AK){AM.ParseValueToFormat(AK,AG[AH].mGraphNumberFormat);}}}function I(){var AL=this.mChartContextPtr,AK=this.mABLPlotContext,AH=AK.mABLOptions,AI;this.SetGraphType(AL.mGraphType);if(AL.mImageUsage!==0){return ;}if(AL.mIsGraphMatrix){return ;}var AJ=new f.TripleId({SeriesId:this.mTripleId.mSeriesId});AI=AL.GetProperty(t.DssGraphShowDataText,AJ);if(AI){AH.mTextShowType=AI;AH.mShowCumulate=(AI&S.DssGraphDataTextAbs)===0;}var AG=21001;AI=AL.GetProperty(AG,AJ);if(AI){AH.mUseGlobalAutoScale=AI;}AI=AL.GetProperty(t.DssGraphDepthMode,AJ);if(AI){AH.mUseDepth=AI;}AI=AL.GetProperty(t.DssGraph2DDepth,AJ);if(AI){AH.mDepth=AI;}AI=AL.GetProperty(t.DssGraph2DAngle,AJ);if(AI){AH.mDepthDirection=AI;}AI=AL.GetProperty(t.DssGraphShowLine,AJ);if(AI){AH.mShowLines=AI;}AI=AL.GetProperty(t.DssGraphShowDivBiPolar,AJ);if(AI){AH.mShowAxisSplit=AI;}AI=AL.GetProperty(t.DssGraphShowDataLabel,AJ);if(AI){AH.mShowLabel=AI;}AI=AL.GetProperty(t.DssGraphShowDataValue,AJ);if(AI){AH.mShowValue=AI;}AI=AL.GetProperty(t.DssGraphShowDVPercent,AJ);if(AI){AH.mShowAsPercentage=AI;}AI=AL.GetProperty(t.DssGraphShowTotalValue,AJ);if(AI){AH.mShowTotal=AI;}AI=AL.GetProperty(t.DssGraphCurvedLines,AJ);if(AI){AH.mCurvedLines=AI;}AI=AL.GetProperty(t.DssGraphAxisDataTextPlace,AJ);if(AI){AH.mTextPosition=AI;}AI=AL.GetProperty(t.DssGraphSplitYPosition,AJ);if(AI){AH.mSplitAxisPosition=AI;}}function AA(AI){var AM=this.mChartContextPtr,AH=AM.GetGraphMatrixContext();if(AM.mIsGraphMatrix){if(AH.isCombinationChart()){var AJ=AM.mImageUsage===mstrmojo.chart.enums.EnumImageUsage.OBJECT_CLIP_COMPUTATION;var AK=this.mDatasetPtr,AL=AK.GetSeriesByShape(),AG=((AL.Square&&AL.Square.length)||(AL.Circle&&AL.Circle.length)||(AL.Tick&&AL.Tick.length));if((AL.Bar&&AL.Bar.length)){if(!AJ||AK.onlyBarDataLabelEnabled()){this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AI,{TripleId:f.BarRenderer0}));}}if(AL.Area&&AL.Area.length){this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AI,{TripleId:f.AreaRenderer0}));}if((AL.Line&&AL.Line.length)||AG){if(!AJ||(AJ&&!(AL.Line.length===1&&AK.GetGroupCount()===1))){this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AI,{TripleId:f.LineRenderer0}));}}return true;}if(AM.IsBarChart()){if(AM.IsBulletChart()){this.mBarSeriesRendererPtr=new f.BulletSeriesRenderer(R.copy(AI,{TripleId:f.BarRenderer0}));}else{this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AI,{TripleId:f.BarRenderer0}));}}else{if(AM.IsLineChart()){this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AI,{TripleId:f.LineRenderer0}));}else{if(AM.IsAreaChart()){this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AI,{TripleId:f.AreaRenderer0}));}else{return false;}}}return true;}this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AI,{TripleId:f.AreaRenderer0}));this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AI,{TripleId:f.BarRenderer0}));this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AI,{TripleId:f.LineRenderer0}));return true;}function P(AR,AI){var AP=AA.call(this,AR);if(!AP){return ;}var AN=this.mAreaSeriesRendererPtr,AT=this.mBarSeriesRendererPtr,AS=this.mLineSeriesRendererPtr;var AL=[[0,0],[0,0],[0,0],[0,0]],AG=[],AO,AK=0,AJ=this.mDatasetPtr,AH=this.mChartContextPtr,AQ=this.mSeriesId,AM=AQ.length;if(AH.isCombinationChart()){AG=AJ.GetSeriesIndexByPriority();}for(AO=0;AO<AM;++AO){if(AG&&AG.length>AO){AK=AG[AO];}else{AK=AO;}switch(AI[AK].mRealSeriesType){case v._AREA:if(AN){AN.AddSeries(AQ[AK],AK,AL[v._AREA][AI[AK].mValueAxis],AI[AK].mValueAxis);++AL[v._AREA][AI[AK].mValueAxis];}break;case v._BAR:if(AT){AT.AddSeries(AQ[AK],AK,AL[v._BAR][AI[AK].mValueAxis],AI[AK].mValueAxis);++AL[v._BAR][AI[AK].mValueAxis];}break;case v._TICKER:case v._LINE:case v._SQUARE:case v._CIRCLE:case v._PIE:if(AS){AS.AddSeries(AQ[AK],AK,AL[v._LINE][AI[AK].mValueAxis],AI[AK].mValueAxis);++AL[v._LINE][AI[AK].mValueAxis];}break;default:}}}function C(AL,AS,AG,AR,AP,AN,AI,AJ){var AH={},AM=AS/2,AK=AG/2,AO=AJ.IsVerticalAxis(),AQ;if(AJ.mTripleId.mObjectId===u.DssGraphY2Body){AQ=AO?z:L;}else{AQ=AO?AC:N;}AH.rect=new f.Rect2D({x:0,y:0,width:AG+2*AI,height:AS+2*AI});switch(AL){case 0:switch(AQ){case AC:AH.xOffset=AI+AK;AH.yOffset=AR-AI-AM;AH.rect.y=AR-2*AI-AS;AH.rect.x=0;break;case N:AH.xOffset=AR-AI-AK;AH.yOffset=AP-AI-AM;AH.rect.y=AP-2*AI-AS;AH.rect.x=AR-2*AI-AG;break;case z:AH.xOffset=AN-AI-AK;AH.yOffset=AR-AI-AM;AH.rect.y=AR-2*AI-AS;AH.rect.x=AN-2*AI-AG;break;case L:AH.xOffset=AR-AI-AK;AH.yOffset=AI+AM;AH.rect.y=0;AH.rect.x=AR-2*AI-AG;break;}break;case 1:switch(AQ){case AC:AH.xOffset=AI+AK;AH.yOffset=AR+AI+AM;AH.rect.y=AR;AH.rect.x=0;break;case N:AH.xOffset=AR+AI+AK;AH.yOffset=AP-AI-AM;AH.rect.y=AP-2*AI-AS;AH.rect.x=AR;break;case z:AH.xOffset=AN-AI-AK;AH.yOffset=AR+AI+AM;AH.rect.y=AR;AH.rect.x=AN-2*AI-AG;break;case L:AH.xOffset=AR+AI+AK;AH.yOffset=AI+AM;AH.rect.y=0;AH.rect.x=AR;break;}break;}return AH;}function k(AK,AQ,AN,AL,AH,AI){var AO=AK.rect,AM,AJ,AG,AP;if(AO.y<0||AO.y+AO.height>AQ){return false;}if(AO.x<0||AO.x+AO.width>AN){return false;}AM=AI.length;for(AJ=0;AJ<AM;++AJ){AG=AI[AJ].GetBoundingRect(true);if(AO.HasIntersection(AG)){return false;}}AM=AH.length;for(AJ=0;AJ<AM;++AJ){AG=AH[AJ].GetBoundingRect(true);if(AO.HasIntersection(AG)){return false;}}AM=AL.length;for(AJ=0;AJ<AM;++AJ){AP=AL[AJ];if(AP.mIsShown){AG=AP.GetBoundingRect(true);if(AO.HasIntersection(AG)){return false;}}}return true;}function D(){var Ad=this.mABLPlotContext.mValueAxis,Aj=this.mABLPlotContext.mABLOptions,AM=this.mChartContextPtr,AZ=AM.mGraphWidth,Ah=AM.mGraphHeight,Ae=AM.mpGraphMatrixContext,AG=Aj.mOrientation,AO=AG===1,AT=this.mDatasetPtr.fetchShownLabels(AO),AJ,AS,Af,Ab,Aa,Ai,AL,AQ,AR,AK,Am,AH,AW,AU,AV,Al,AY,AN,AI,AX,Ak=Ae.getPadding(Z.kAxisOriginLabel),Ag,AP;Af=Ad.length;for(Ab=0;Ab<Af;++Ab){AJ=Ad[Ab];AW=f.gAxisObjects[AJ.getIndex()].mCustomLabelId;AS=AJ.mOptions;AR=AS.mAxisCustomValue;Ai=AT&&AT[AJ.Key];AL=Ai&&Ai.length;AK=false;if(!AS.mDrawCustomLine){continue;}for(Aa=0;Aa<AL&&!AK;++Aa){AQ=Ai[Aa];if(AQ===AR){AK=true;}}if(AK){continue;}if(AR>AJ.mMaxTick||AR<AJ.mMinTick){continue;}var Ac={};if(AJ.mIsPercent){Ac.mFormatType=4;Ac.mCustomFormat="0%";}else{Ac=AJ.mNumberFormat;}Al=new f.NumberObject({TripleId:AW,GraphObjectManager:this,Number:AR,NumberFormat:Ac,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:AJ.mCondenseLabels});if(Al===null||Al===undefined){continue;}AN=Al;AI=Al.mText;AN.SetText(AI);AH=AN.GetBoundingRect(true);AU=AH.height;AV=AH.width;Am=AJ.ValueToPosition(AR);AP=AJ.IsVerticalAxis();if(Am===0){continue;}if(AP){if(Am===Ah){continue;}}else{if(Am===AZ){continue;}}Ag=false;for(Aa=0;Aa<=1&&!Ag;++Aa){AY={};AX=C.call(this,Aa,AU,AV,Am,Ah,AZ,Ak,AJ);AY.xOffset=AX.xOffset;AY.yOffset=AX.yOffset;AY.rect=AX.rect;Ag=k.call(this,AY,Ah,AZ,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(Ag){AN.MoveTo(AY.xOffset,AY.yOffset,p.CENTER);AN.mIsShown=true;this.mPostTrendLineObjects.push(AN);this.axisOriginLabels.push(AN);}}}function T(){return{mSeriesOptions:[],mValueAxis:[],mABLOptions:{mGraphType:q.DssGraphTypeVertical_Line_Absolute,mMajorGraphType:g.MGT_LINE,mLayout:O.LO_ABSOLUTE,mOrientation:K.OR_VERTICAL,mGraphSubType:j.GST_NULL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mShowAxisSplit:true,mShowLabel:false,mShowValue:false,mShowAsPercentage:false,mShowTotal:true,mShowCumulate:false,mCurvedLines:false,mShowLines:true,mUseGlobalAutoScale:true,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mTextPosition:4,mTextShowType:S.DssGraphDataTextValue,mTotalNumberFormat:null}};}mstrmojo.chart.ABLPlot=mstrmojo.declare(mstrmojo.chart.CategoryPlot,null,{scriptClass:"mstrmojo.chart.ABLPlot",mAreaSeriesRendererPtr:null,mBarSeriesRendererPtr:null,mLineSeriesRendererPtr:null,mABLPlotContext:null,mDepthLevel:null,mAxesAreas:null,unitLevelDepth:0,takeGroupCenter:false,groupTotals:null,groupOrder:null,countOfTypes:0,realComboChart:false,init:function x(AG){this._super(AG);this.mDepthLevel=[];this.groupTotals=[[],[]];this.mAxesAreas=[];this.groupOrder=[];this.mABLPlotContext=T.call(this);this.mABLPlotContext.takeGroupCenter=this.mChartContextPtr.mDatasetPtr.ShouldTakeGroupCenter();},getLayout:function J(){return this.mABLPlotContext.mABLOptions.mLayout;},getOrientation:function AB(){return this.mABLPlotContext.mABLOptions.mOrientation;},isAbsoluteOrCluster:function F(){var AG=this.mABLPlotContext.mABLOptions.mLayout;return AG===O.LO_ABSOLUTE||AG===O.LO_CLUSTER;},GenerateMapAndList:function w(){var AL=this.mChartContextPtr,AH=this.mABLPlotContext,AP=AH.mABLOptions,AM=this.mDataArea,AO,AN,AU,AY,AQ=this.shownDataLabels;if(AM.width<=0||AM.height<=0){return ;}y.call(this);var AK=this.mAxesAreas;if(AP.mDualAxes&&AP.mSplitDualAxes){AO=new f.Rect2D();AN=new f.Rect2D();this.mChartContextPtr.SplitRect(AM,AP.mOrientation===K.OR_VERTICAL,AP.mSplitAxisPosition,AO,AN);AK.push(AO);AK.push(AN);}else{AO=new f.Rect2D({x:AM.x,y:AM.y,width:AM.width,height:AM.height});AK.push(AO);if(AP.mDualAxes){AN=new f.Rect2D({x:AM.x,y:AM.y,width:AM.width,height:AM.height});AK.push(AN);}}var AR=this.mABLPlotContext.mValueAxis,AV,AW=AR.length,AG=this.mAreaSeriesRendererPtr,AT=this.mBarSeriesRendererPtr,AZ=this.mLineSeriesRendererPtr,AI=this.mGraphObjectManagerList,AS=this.mGraphObjectMap,AJ=this.mPostTrendLineObjects;if(AL.mIsGraphMatrix===false){for(AU=0;AU<AW;++AU){AV=AR[AU];if(!AV.IsBaseAtZero()&&AV.mOptions.mUseLogarithmicScale===false){AY=AV.GetBaseValue();if(AG){AG.AddBaseToCumulateData(AU,AY);}if(AT){AT.AddBaseToCumulateData(AU,AY);}if(AZ){AZ.AddBaseToCumulateData(AU,AY);}}}}if(AG){AG.SetDeviceDataArea(AM);}if(AT){AT.SetDeviceDataArea(AM);}if(AZ){AZ.SetDeviceDataArea(AM);}if(!(AP.mDualAxes&&AP.mSplitDualAxes&&AP.mUseDepth)){if(AG){AG.GenerateMapAndList(AQ);AI.push(AG);}if(AT){AT.GenerateMapAndList(AQ);AI.push(AT);}if(AZ){AZ.GenerateMapAndList(AQ);AI.push(AZ);}}if(AP.mDualAxes){if(AP.mSplitDualAxes){this.AdjustTrendLineEquation(AK[0],a.TLI_Y1);this.AdjustTrendLineEquation(AK[1],a.TLI_Y2);}else{this.AdjustTrendLineEquation(AM,a.TLI_BOTH);}}else{this.AdjustTrendLineEquation(AM,a.TLI_Y1);}AW=AR.length;this.axisOriginLines=[];var AX=this.axisOriginLines;for(AU=0;AU<AW;++AU){AV=AR[AU];if(this.mChartContextPtr.mIsGraphMatrix){AV.GenerateCustomLine(AK[AU],AX);}else{AV.GenerateCustomLine(AK[AU],AJ);}}D.call(this);if(AG){AG.AddTextToMapAndList(AS,AJ);}if(AT){AT.AddTextToMapAndList(AS,AJ);}if(AZ){AZ.AddTextToMapAndList(AS,AJ);}this.mDatasetPtr.resetDataWindow();},Draw:function s(){var AG=this.mChartContextPtr,AH=this.mDataArea,AO=this.mAreaSeriesRendererPtr,AR=this.mBarSeriesRendererPtr,AQ=this.mLineSeriesRendererPtr;var AP=this.axisOriginLines;if(AP&&AP.length){var AK,AM=AP.length;for(AK=0;AK<AM;AK++){AP[AK].Draw();}}if(this.mAreaSeriesRendererPtr){var AI=U.call(this);AG.setDrawingOrderToCanvas(AI);}if(AG.mIsTimeSeriesChart){var AN=new f.Rect2D({x:AH.x+1,y:AH.y,width:AH.width-1,height:AH.height});AG.DrawRectangle(AN,false);AG.saveState();AG.Clip();if(AO){AO.Draw();}if(AR){AR.Draw();}if(AQ){AQ.Draw();}this._super();this.DrawPostTrendLineObjects();AG.RestoreState();}else{var AJ=this.mABLPlotContext,AL=AJ.mABLOptions;if(!AL.mDualAxes||!AL.mSplitDualAxes||!AL.mUseDepth){if(AO){AO.Draw();}}if(AR){AR.Draw();}if(!AL.mDualAxes||!AL.mSplitDualAxes||!AL.mUseDepth){if(AQ){AQ.Draw();}}this._super({Skip:1});if(this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquations();}this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function e(){if(!this.mChartContextPtr.mIsTimeSeriesChart&&this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[0],false);if(this.mABLPlotContext.mABLOptions.mDualAxes){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[1],true);}}},AddValueAxis:function A(AG){this.mABLPlotContext.mValueAxis.push(AG);},SetCategoryAxis:function h(AL){var AG=this.mChartContextPtr,AJ=this.mABLPlotContext,AH,AO,AI,AP,AM,AK,AN=AJ.mCategoryAxisPtr=AL;AH=false;if(AG.mIsTimeSeriesChart){AH=true;}else{AO=AG.GetProperty(t.DssGraph2DOrdSpaceMode,l);if(AO){AH=AO;}}AI=AJ.mABLOptions.mMajorGraphType!==g.MGT_BAR;AP=true;AM=this.mSeriesId.length;for(AK=0;AK<AM;++AK){if(AJ.mSeriesOptions[AK].mRealSeriesType===v._BAR){AP=false;break;}}AN.mAxisCross=(AH&&AI&&AP);if(AG.mIsGraphMatrix&&AG.IsLineChart()){if(this.mDatasetPtr.GetGroupCount()<=1){AN.mAxisCross=false;}}},GetDepthOffset:function B(AG){return this.mChartContextPtr.CalculateDepthOffset(this.mDepthLevel[AG]*this.unitLevelDepth,this.mABLPlotContext.mABLOptions.mDepthDirection);},getGroupTotals:function o(AG,AH){return this.groupTotals[AH][AG];},Init:function n(){var AJ,AG,AL=this.mABLPlotContext,AI=AL.mSeriesOptions;AI.splice(0,AI.length);AG=this.mSeriesId.length;for(AJ=0;AJ<AG;++AJ){var AK={mSeriesType:v._DEFAULT,mRealSeriesType:v._LINE,mValueAxis:E.VA_Y1,mShowDataLabels:false,mTrendLineOptions:null,mGraphNumberFormat:f.dNF};if(this.mChartContextPtr.mIsGraphMatrix==false){AK.mTrendLineOptions=new f.GraphTrendLineOptions();}AI.push(AK);}I.call(this);for(AJ=0;AJ<AG;++AJ){Y.call(this,AJ);}c.call(this);var AH={GraphObjectManager:this,DataSet:this.mDatasetPtr,Legend:this.mLegendPtr};P.call(this,AH,AI);AE.call(this);AF.call(this);},SetGraphType:function d(AH){var AG=this.mABLPlotContext.mABLOptions;AG.mGraphType=AH;switch(AH){case q.DssGraphTypeVertical_Area_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Area_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Area_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Area_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Area_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Area_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Area_Percent:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Area_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Area_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Area_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Area_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Area_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Area_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Area_Percent:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Bar_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Bar_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Bar_Percent:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bar_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bar_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Bar_Percent:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Line_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Line_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Line_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Line_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Line_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Line_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Line_Percent:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Line_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Line_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Line_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Line_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Line_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Line_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Line_Percent:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bullet:case q.DssGraphTypeVertical_Bar_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bullet:case q.DssGraphTypeHorizontal_Bar_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Bar_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Area_DualAxis_Percent:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Area_DualAxis_Percent:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Bar_DualAxis_Percent:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Percent:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Line_DualAxis_Percent:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Line_DualAxis_Percent:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;}switch(AG.mGraphSubType){case j.GST_NULL:AG.mDualAxes=false;AG.mSplitDualAxes=false;break;case j.GST_DUALAXIS:AG.mDualAxes=true;AG.mSplitDualAxes=false;break;case j.GST_BIPOLAR:AG.mDualAxes=true;AG.mSplitDualAxes=true;break;}},GetMinMaxValue:function H(AN,AJ,AG,AL){var AI,AM=this.mChartContextPtr;if(AM.mIsUniformAxisMode){var AH=AM.getUniformAxisContext(),AK=AH.ValueAxis;if(AN===E.VA_Y1){if(AM.IsVertical()===false){return{Min:AK.X1.Min,Max:AK.X1.Max,AreInitialized:true};}return{Min:AK.Y1.Min,Max:AK.Y1.Max,AreInitialized:true};}if(AM.IsVertical()===false){return{Min:AK.X2.Min,Max:AK.X2.Max,AreInitialized:true};}return{Min:AK.Y2.Min,Max:AK.Y2.Max,AreInitialized:true};}if(this.mAreaSeriesRendererPtr){AI=this.mAreaSeriesRendererPtr.GetMinMaxValue(AN,AJ,AG,AL);}if(this.mBarSeriesRendererPtr){AI=this.mBarSeriesRendererPtr.GetMinMaxValue(AN,AI.Min,AI.Max,AI.AreInitialized);}if(this.mLineSeriesRendererPtr){AI=this.mLineSeriesRendererPtr.GetMinMaxValue(AN,AI.Min,AI.Max,AI.AreInitialized);}return{Min:AI.Min,Max:AI.Max,AreInitialized:AI.AreInitialized};},ShouldRotateDataLabel:function X(){return this.mBarSeriesRendererPtr.ShouldRotateDataLabel();},GetMaxElementOffsetClippedByBoundary:function G(AO,AR){var AH={LowOffset:0,HighOffset:0},AN,AI,AL,AP;if(AR===undefined||AR===null){AR=true;}if(!this.mChartContextPtr.mIsGraphMatrix){return AH;}var AJ=AO?(AR?"X1":"X2"):(AR?"Y1":"Y2"),AG=this.mClippedElementSize;if(AG[AJ]!==undefined){return AG[AJ];}for(AI=0;AI<2;++AI){for(AL=0;AL<2;++AL){var AQ=[this.mLineSeriesRendererPtr,this.mAreaSeriesRendererPtr],AM=(AL===0),AK=(AI===0),AS=AM?(AK?"X1":"X2"):(AK?"Y1":"Y2");AH={LowOffset:0,HighOffset:0};AP=AQ.length;for(AN=0;AN<AP;++AN){if(AQ[AN]){AQ[AN].getMaxElementOffsetClippedByBoundary(AH,AM,AK);}}AG[AS]=AH;}}return AG[AJ];}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","CategoryPlot","ABLPlot","Axis","CategoryAxis","ValueAxis","GraphObjectManager","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumLayout","EnumOrientation","EnumValueAxis","EnumAxisLabelsLocation","EnumAxisDirection","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSExtraGraphProperty","EnumDSSGraphObject","EnumVariantBool");var W=mstrmojo.chart,M=W.enums,X=M.EnumGraphMajorType,d=M.EnumDSSGraphObjectManager.DssPlot,N=M.EnumLayout,J=M.EnumOrientation,E=M.EnumValueAxis,a=M.EnumAxisLabelsLocation,A=M.EnumAxisDirection,q=W.gNullTripleId,T=mstrmojo.chart.model,O=T.enums,g=O.EnumDSSGraphType,j=O.EnumDSSGraphProperty,f=O.EnumDSSExtraGraphProperty,l=O.EnumDSSGraphObject,B=O.EnumVariantBool.VARIANT_FALSE;var n=new W.Rect2D(),k=new W.Rect2D(),C=new W.Rect2D(),I=new W.Rect2D(),H=new W.Rect2D(),K=new W.Rect2D(),L=new W.Rect2D();function P(){var y=this.mChartContextPtr,w=this.mDatasetPtr,t=y.GetGraphMatrixContext(),x=false,u=false,v;if(y.mIsGraphMatrix&&this.mOrientation===J.OR_VERTICAL){var s=this.mCategoryPlots[0];v=y.GetProperty(f.DssGraphMatrixInitedDataLabelRotation,q);if(v){x=v;}if(!x){if(y.isCombinationChart()&&!w.onlyBarDataLabelEnabled()){y.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,q,true);t.mIsNeedRotateDataLabel=false;y.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,q,false);return ;}if(y.IsBarChart()||(y.isCombinationChart()&&w.onlyBarDataLabelEnabled())){u=s.ShouldRotateDataLabel();y.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,q,true);t.mIsNeedRotateDataLabel=u;y.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,q,u);}}}}function b(z,u){var AB=this.mChartContextPtr;if(AB.mIsGraphMatrix){u.Reset(z.x,z.y,z.width,z.height);return ;}var t,v,AA,s,w=new W.Rect2D();Z.call(this,z,w);w.width=Math.max(0,w.width);w.height=Math.max(0,w.height);this.mLeftMargin+=w.x-z.x;this.mRightMargin+=z.x+z.width-(w.x+w.width);this.mTopMargin+=w.y-z.y;this.mBottomMargin+=z.y+z.height-(w.y+w.height);this.ReserveAreaCategoryAxis(w,u);if(u.width<0){u.width=0;}if(u.height<0){u.height=0;}if(this.mOrientation===J.OR_HORIZONTAL){t=z.x+Math.max(w.x-z.x,u.x-w.x);v=z.x+z.width-Math.max(z.x+z.width-(w.x+w.width),w.x+w.width-(u.x+u.width))-t;u.x=t;u.width=v;}else{AA=z.y+Math.max(w.y-z.y,u.y-w.y);s=z.y+z.height-Math.max(z.y+z.height-(w.y+w.height),w.y+w.height-(u.y+u.height))-AA;u.y=AA;u.height=s;}}function Y(s){var v=this.mChartContextPtr,u,t;u=v.GetGraphMajorType();if(v.mIsGraphMatrix){t=W.PlotId0;}else{t=new W.TripleId({ObjectId:d,SeriesId:s});}switch(u){case X.GMT_CATEGORY:return new W.ABLPlot({TripleId:t,GraphObjectManager:this,Area:W.gEmptyRect});default:break;}return null;}function Z(v,AG){var t=this.mChartContextPtr,u=[],AA=this.mVecY1Axis.length,x,AE,AB,w,AC,z,y,s,AF;for(x=0;x<AA;++x){AE=this.mOrientation===J.OR_VERTICAL?this.mBottomMargin:this.mLeftMargin;AB=this.mOrientation===J.OR_VERTICAL?this.mTopMargin:this.mRightMargin;w=AE;if(t.mIsGraphMatrix){L.ResetRect(v);K.ResetRect(v);}else{K=new W.Rect2D({Rect2D:v});L=new W.Rect2D({Rect2D:v});}if(this.mDualAxes){AC=AB;if(this.mSplitDualAxes){z=new W.Rect2D();y=new W.Rect2D();t.SplitRect(L,t.IsVertical(),this.mSplitAxisPosition,z,y);if(this.mOrientation===J.OR_VERTICAL){AC+=z.height;w+=y.height;}else{AC+=z.width;w+=y.width;}}this.mVecY2Axis[x].ReserveTitleAndLabels(K,AE,AC);if(!this.mSplitDualAxes){L.ResetRect(K);if(this.mOrientation===J.OR_VERTICAL){L.y=v.y;L.height=v.height;}else{L.x=v.x;L.width=v.width;}}if(this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&K.y>v.y){s=K.y+K.height;K.y=v.y+(K.y-v.y)*100/this.mSplitAxisPosition;K.height=s-K.y;}if(this.mOrientation===J.OR_HORIZONTAL&&K.x+K.width<v.x+v.width){K.width=v.width-(v.x+v.width-(K.x+K.width))*100/this.mSplitAxisPosition;}}}this.mVecY1Axis[x].ReserveTitleAndLabels(L,w,AB);if(this.mDualAxes&&this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&L.y+L.height<v.y+v.height){L.height=(v.y+v.height-(L.y+L.height))*100/this.mSplitAxisPosition;}if(this.mOrientation===J.OR_HORIZONTAL&&L.x>v.x){var AD=L.x+L.width;L.x=v.x+(L.x-v.x)*100/this.mSplitAxisPosition;L.width=AD-L.x;}}if(this.mDualAxes&&!this.mSplitDualAxes){K.ResetRect(L);if(this.mOrientation===J.OR_VERTICAL){K.y=v.y;K.height=v.height;}else{K.x=v.x;K.width=v.width;}}this.mVecY1Axis[x].AdjustDeviceDataArea(L,false);u.push(L);if(this.mDualAxes){this.mVecY2Axis[x].AdjustDeviceDataArea(K,false);u.push(K);}}n.Reset(0,0,0,0);k.ResetRect(u[0]);AF=u.length;for(x=1;x<AF;++x){if(!this.RectangleIntersection(k,u[x],n)){k.Reset(0,0,0,0);break;}k.ResetRect(n);}AG.ResetRect(k);}function r(t,v){var x=this.mChartContextPtr,u=x.mUniformAxisContext,s=new W.Rect2D({Rect2D:v});if(x.mIsGraphMatrix){var w=0;if(x.IsVertical()){w=u.yDataLabelPadding||0;w-=s.y;if(w){s.y+=w;s.height-=w;}}else{w=u.xDataLabelPadding||0;w-=x.mGraphWidth-s.x-s.width;if(w){s.width-=w;}}}return s;}function Q(s,u){var t=this.mChartContextPtr,AC=this.mVecY1Axis,AB=this.mVecY2Axis,AA=AC[u],z=AB[u],x,w,y,v;if(this.mDualAxes&&this.mSplitDualAxes){y=new W.Rect2D({Rect2D:s});x=new W.Rect2D();w=new W.Rect2D();t.SplitRect(y,t.IsVertical(),this.mSplitAxisPosition,x,w);AA.SetDeviceDataArea(x);AA.AdjustDeviceDataArea(x,true);AA.UpdateTitleAndLabelArea(x);z.SetDeviceDataArea(w);z.AdjustDeviceDataArea(w,true);z.UpdateTitleAndLabelArea(w);}else{if(this.mDualAxes){x=r.call(this,0,s);if(AC.length){AA.TrimDeviceDataArea(x);}AA.SetDeviceDataArea(x);AA.AdjustDeviceDataArea(x,true);w=r.call(this,1,s);if(AB.length){z.TrimDeviceDataArea(w);}z.SetDeviceDataArea(w);if(!t.mIsGraphMatrix){v=new W.Rect2D({Rect2D:x});z.AdjustDeviceDataArea(w,true);this.RectangleUnion(x,w,v);AA.UpdateTitleAndLabelArea(v);z.UpdateTitleAndLabelArea(v);}}else{x=r.call(this,0,s);if(AC.length){AA.TrimDeviceDataArea(x);}AA.SetDeviceDataArea(x);if(!t.mIsGraphMatrix){AA.AdjustDeviceDataArea(x,true);v=new W.Rect2D({Rect2D:x});AA.UpdateTitleAndLabelArea(v);}}}}function R(){var t=this.mGraphObjectList,u,v,s;u=this.mVecY1Axis.length;for(s=0;s<u;++s){this.mVecY1Axis[s].generateAxisLine(t);if(this.mDualAxes){this.mVecY2Axis[s].generateAxisLine(t);}}v=this.mVecO1Axis.length;for(s=0;s<v;++s){this.mVecO1Axis[s].generateAxisLine(t);}}function e(w){var s=this.mChartContextPtr,AA=this.mGraphObjectList,AC=this.mChartAreaOptions,AB=AC.chartAreaNumber,v,u,z,t,y,x;z=this.mVecY1Axis.length;for(v=0;v<z;++v){if(!this.isMutipleValueAxis()){for(u=0;u<AB;++u){if(this.mDualAxes&&this.mSplitDualAxes){y=new W.Rect2D();x=new W.Rect2D();s.SplitRect(w[u],s.IsVertical(),this.mSplitAxisPosition,y,x);this.mVecY1Axis[v].GenerateGridLines(y,u,AA);this.mVecY2Axis[v].GenerateGridLines(x,u,AA);}else{this.mVecY1Axis[v].GenerateGridLines(w[u],u,AA);if(this.mDualAxes){this.mVecY2Axis[v].GenerateGridLines(w[u],u,AA);}}}}else{if(this.mDualAxes&&this.mSplitDualAxes){y=new W.Rect2D();x=new W.Rect2D();s.SplitRect(w[v],s.IsVertical(),this.mSplitAxisPosition,y,x);this.mVecY1Axis[v].GenerateGridLines(y,v,AA);this.mVecY2Axis[v].GenerateGridLines(x,v,AA);}else{this.mVecY1Axis[v].GenerateGridLines(w[v],v,AA);if(this.mDualAxes){this.mVecY2Axis[v].GenerateGridLines(w[v],v,AA);}}}}t=this.mVecO1Axis.length;for(v=0;v<t;++v){if(this.isMutipleValueAxis()){for(u=0;u<AB;++u){this.mVecO1Axis[v].GenerateGridLines(w[u],u,AA);}}else{this.mVecO1Axis[v].GenerateGridLines(w[v],v,AA);}}}function D(t,s){var x=this.mChartContextPtr,w,u;I.Reset(t.x,t.y,t.width,t.height);H.Reset(t.x,t.y,t.width,t.height);if(!x.mIsGraphMatrix){if(x.mManualLayoutMode&&!this.mRecalculateFrame){I.ResetRect(this.mPlotArea);}else{x.PutLocation(j.DssGraphFrameLocationNEW,I);}s.splice(0,s.length);this.CalculateChartAreas(I,s);}else{s.splice(0,s.length);s.push(H);}if(x.isUADataAreaOutput()){var v=x.mUniformAxisContext;H.x=v.mDataAreaLeftMargin;H.y=v.mDataAreaTopMargin;H.width=x.mGraphWidth-H.x-v.mDataAreaRightMargin;H.height=x.mGraphHeight-H.y-v.mDataAreaBottomMargin;if(this.mVecO1Axis.length){this.mVecO1Axis[0].TrimAxisPadding(H,false);}I.ResetRect(H);this.mCategoryPlots[0].SetDataArea(H);if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);Q.call(this,H,0);}else{Q.call(this,I,0);this.mVecO1Axis[0].SetDeviceDataArea(H);}return ;}w=this.mChartAreaOptions.chartAreaNumber;for(u=0;u<w;++u){this.mCategoryPlots[u].SetDataArea(s[u]);}if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);for(u=0;u<this.mChartAreaOptions.chartAreaNumber;++u){Q.call(this,s[u],u);}}else{Q.call(this,I,0);for(u=0;u<this.mChartAreaOptions.chartAreaNumber;++u){this.mVecO1Axis[u].SetDeviceDataArea(s[u]);}}}function c(u,t){var y=this.mChartContextPtr,v;D.call(this,u,t);var s=this.mDatasetPtr.showDatalabels();if(s){P.call(this);if(!y.mIsGraphMatrix){var x=new W.Rect2D({Rect2D:u}),w=this.mCategoryPlots.length;for(v=0;v<w;++v){this.mCategoryPlots[v].ReserveAreaForDataLabels(u);}if(u.width!==x.width||u.height!==x.height){D.call(this,u,t);}}else{this.ShouldRotateDataLabel();}}}function G(v,w,AB,AD,s){var u=this.mChartContextPtr,y=u.getAxisTripleId(v),x=u.getUniformAxisInformation(y.mObjectId),AA=x.Metrics,AC=(this.mOrientation===J.OR_VERTICAL?A.AD_Y:A.AD_X),t=new W.ValueAxis({TripleId:y,GraphObjectManager:this,Min:w,Max:AB,PrimaryMetricIndex:AA,LargerGridInterval:AD!==1||(this.mDualAxes&&this.mSplitDualAxes),IsPercent:this.mLayout===N.LO_PERCENT,AxisDirection:AC,IsShown:s,Key:v});if(u.mIsGraphMatrix&&t.mIsUniformAxis===false){var z=x.CondenseEnforced;t.checkCondense(!!z);}return t;}mstrmojo.chart.CategoryPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.CategoryPlotManager",mGraphType:g.DssGraphTypeVertical_Line_Absolute,mLayout:N.LO_ABSOLUTE,mOrientation:J.OR_VERTICAL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mDataAreaSplitX:50,mCategoryPlots:null,mVecO1Axis:null,mVecY1Axis:null,mVecY2Axis:null,init:function p(s){this._super(s);this.mCategoryPlots=[];this.mVecO1Axis=[];this.mVecY1Axis=[];this.mVecY2Axis=[];this.mChartContextPtr=s.GraphObjectManager.mChartContextPtr;},GenerateMapAndList:function o(){var AC=this.mChartAreaOptions,z=AC.chartAreaNumber,y=this.mPlotArea,u=this.mCategoryPlots,x=this.mChartContextPtr,t=this.mGraphObjectManagerList,AQ,AO,s,AT,AR,AL,AP,AA,AE,AH,AW,AB,AK,AD=[],w,AI,AS;var AN="Y1",AF=this.mVecO1Axis,AV=this.mVecY1Axis,AU=this.mVecY2Axis;if(y.width<=0||y.height<=0){return ;}this.LoadProperties();for(AQ=0;AQ<z;++AQ){s=Y.call(this,AQ);s.SetDataset(this.mDatasetPtr);s.mLegendPtr=this.mLegendPtr;u.push(s);AS=AC.seriesDistribution[AQ].length;for(AO=0;AO<AS;++AO){u[AQ].AddSeries(AC.seriesDistribution[AQ][AO]);}s.Init();}var v;if(this.isMutipleValueAxis()){v=x.getAxisTripleId("O1");var AJ=new W.CategoryAxis({TripleId:v,GraphObjectManager:this,AxisLabelsLocation:a.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});AF.push(AJ);for(AQ=0;AQ<z;++AQ){AT=false;AR=false;AL=[0,0];AP=[0,0];AI=u[AQ].GetMinMaxValue(E.VA_Y1,AL[0],AP[0],AT);AL[0]=AI.Min;AP[0]=AI.Max;AT=AI.AreInitialized;if(this.mDualAxes){AI=u[AQ].GetMinMaxValue(E.VA_Y2,AL[1],AP[1],AR);AL[1]=AI.Min;AP[1]=AI.Max;AR=AI.AreInitialized;}u[AQ].SetCategoryAxis(AJ);if(x.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AN="X1";}AA=G.call(this,AN,AL[0],AP[0],z,AT);AV.push(AA);u[AQ].AddValueAxis(AA);if(this.mDualAxes){AN="Y2";if(x.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AN="X2";}AE=G.call(this,AN,AL[1],AP[1],z,AR);AU.push(AE);u[AQ].AddValueAxis(AE);}}}else{AT=false;AR=false;AL=[0,0];AP=[0,0];for(AQ=0;AQ<z;++AQ){AI=u[AQ].GetMinMaxValue(E.VA_Y1,AL[0],AP[0],AT);AL[0]=AI.Min;AP[0]=AI.Max;AT=AI.AreInitialized;if(this.mDualAxes){AI=u[AQ].GetMinMaxValue(E.VA_Y2,AL[1],AP[1],AR);AL[1]=AI.Min;AP[1]=AI.Max;AR=AI.AreInitialized;}v=x.mIsGraphMatrix?x.getAxisTripleId("O1"):new W.TripleId({ObjectId:l.DssGraphO1Body,SeriesId:AQ});AH=new W.CategoryAxis({TripleId:v,GraphObjectManager:this,AxisLabelsLocation:a.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});u[AQ].SetCategoryAxis(AH);AF.push(AH);}if(x.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AN="X1";}AA=G.call(this,AN,AL[0],AP[0],z,AT);AV.push(AA);for(AQ=0;AQ<z;++AQ){u[AQ].AddValueAxis(AA);}if(this.mDualAxes){AN="Y2";if(x.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AN="X2";}AE=G.call(this,AN,AL[1],AP[1],z,AR);AU.push(AE);for(AQ=0;AQ<z;++AQ){u[AQ].AddValueAxis(AE);}}}AW=this.mVecO1Axis.length;AB=this.mVecY1Axis.length;AK=this.mVecY2Axis.length;if(this.mUseDepth){for(AQ=0;AQ<AW;++AQ){AF[AQ].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AQ=0;AQ<AB;++AQ){AV[AQ].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AQ=0;AQ<AK;++AQ){AU[AQ].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}}AS=AF.length;for(AQ=0;AQ<AS;++AQ){AF[AQ].SetDataset(this.mDatasetPtr);}for(AQ=0;AQ<AW;++AQ){t.push(this.mVecO1Axis[AQ]);}for(AQ=0;AQ<AB;++AQ){t.push(this.mVecY1Axis[AQ]);if(this.mDualAxes){t.push(this.mVecY2Axis[AQ]);}}C.Reset(0,0,0,0);b.call(this,y,C);c.call(this,C,AD);w=u.length;for(AQ=0;AQ<w;++AQ){t.push(u[AQ]);u[AQ].GenerateMapAndList();}for(AQ=0;AQ<AW;++AQ){AV[AQ].GenerateMapAndList();}for(AQ=0;AQ<AB;++AQ){AV[AQ].GenerateMapAndList();if(this.mDualAxes){AU[AQ].GenerateMapAndList();}}var AG=x.mIsGraphMatrix,AM=x.isUADataAreaOutput();if(!(AG&&AM)){if(this.mUseDepth){R.call(this);e.call(this,AD);}else{e.call(this,AD);R.call(this);}}},LoadProperties:function V(){var t,u=this.mChartContextPtr;this._super();var s=this.mGraphType=u.mGraphType;if(!(u.mIsTimeSeriesChart)){if(!u.mIsGraphMatrix){t=u.GetProperty(j.DssGraphDepthMode,q);if(t){this.mUseDepth=(t!==B);}t=u.GetProperty(j.DssGraph2DDepth,q);if(t){this.mDepth=t;}t=u.GetProperty(j.DssGraph2DAngle,q);if(t){this.mDepthDirection=t;}}this.mOrientation=u.IsVertical()?J.OR_VERTICAL:J.OR_HORIZONTAL;this.mDualAxes=u.IsDualAxis();}if((s>=g.DssGraphTypeVertical_Area_Percent)&&(s<=g.DssGraphTypeHorizontal_Line_Percent)&&(s%7===0)){this.mLayout=N.LO_PERCENT;}if(this.mLayout!==N.LO_PERCENT&&(s>=g.DssGraphTypeVertical_Bar_DualAxis_Percent&&s<=g.DssGraphTypeHorizontal_Area_DualAxis_Percent)){this.mLayout=N.LO_PERCENT;}},isMutipleValueAxis:function S(){var s=this.mChartAreaOptions;return(this.mOrientation===s.mOrientation);},ReserveAreaCategoryAxis:function F(w,AE){var t=this.mChartContextPtr,v=[],z=[],x,y,AB,AA,u,AD,s,AC;if(!this.isMutipleValueAxis()){this.CalculateChartAreas(w,z);}x=this.mVecO1Axis.length;for(y=0;y<x;++y){if(t.mIsGraphMatrix){k.ResetRect(this.isMutipleValueAxis()?w:z[y]);}else{k=this.isMutipleValueAxis()?new W.Rect2D({Rect2D:w}):new W.Rect2D({Rect2D:z[y]});}this.mVecO1Axis[y].AdjustTitleArea(k);if(t.mIsTimeSeriesChart){this.mVecO1Axis[y].AdjustDataArea(k,0,0,true);}else{AB=this.mOrientation===J.OR_HORIZONTAL?this.mBottomMargin:this.mLeftMargin;AA=this.mOrientation===J.OR_HORIZONTAL?this.mTopMargin:this.mRightMargin;this.mVecO1Axis[y].AdjustDataArea(k,AB,AA);}if(t.mRecalculateFrame){if(this.mOrientation===J.OR_VERTICAL){u=w.x;s=w.width;if(y===0){if(k.x>w.x){u=k.x;s-=(k.x-w.x);}}if(y===this.mVecO1Axis.length-1){if(w.x+w.width>k.x+k.width){s=k.x+k.width-u;}}k.x=u;k.width=s;}else{AD=w.y;AC=w.height;if(y===0){if(k.y>w.y){AD=k.y;AC-=(k.y-w.y);}}if(y===this.mVecO1Axis.length-1){if(w.y+w.height>k.y+k.height){AC=k.y+k.height-AD;}}k.y=AD;k.height=AC;}}v.push(k);}k.ResetRect(v[0]);for(y=1;y<v.length;++y){if(!this.RectangleIntersection(k,v[y],n)){k.Reset(0,0,0,0);break;}k.ResetRect(n);}AE.ResetRect(k);},Draw:function h(){var t=this.mCategoryPlots,v,x,w,s,u;this._super();v=this.mVecY1Axis.length;for(u=0;u<v;++u){this.mVecY1Axis[u].Draw();}x=this.mVecY2Axis.length;for(u=0;u<x;++u){this.mVecY2Axis[u].Draw();}w=this.mVecO1Axis.length;for(u=0;u<w;++u){this.mVecO1Axis[u].Draw();}s=t.length;for(u=0;u<s;++u){t[u].Draw();}},ShouldRotateDataLabel:function U(){var z=this.mChartContextPtr,x=this.mDatasetPtr,s=z.GetGraphMatrixContext(),w=x.showDatalabels(),u=false,y=false;if(w&&z.mIsGraphMatrix&&x.onlyBarDataLabelEnabled()){var t=this.mCategoryPlots[0],v;if(this.mOrientation===J.OR_VERTICAL){v=z.GetProperty(f.DssGraphMatrixInitedDataLabelRotation,W.gNullTripleId);if(v!==undefined&&v!==null){y=v;}if(y){v=z.GetProperty(f.DSSGraphMatrixDataLabelRotated,W.gNullTripleId);if(v!==undefined&&v!==null){s.mIsNeedRotateDataLabel=v;return ;}}u=t.ShouldRotateDataLabel();s.mIsNeedRotateDataLabel=u;z.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,W.gNullTripleId,true);z.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,W.gNullTripleId,u);}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlotManager","TripleId","Rect2D","RectangleObject","TextObject","Legend","GridChartPlotManager","ValuePlotManager");var W=mstrmojo.chart,R=W.enums,A=R.EnumDSSExtraGraphObject,B=R.EnumGraphMajorType,J=W.ChartContext,X=R.EnumDSSGraphObjectManager,K=X.DssLegend,Y=W.gNullTripleId,C=W.gNullSeriesId,E=W.gNullGroupId;var M=mstrmojo.chart.model,Z=M.enums,D=Z.EnumDSSGraphType,F=Z.EnumDSSGraphProperty,G=Z.EnumDSSGraphObject,U=Z.EnumVariantBool,Q=U.VARIANT_FALSE,a=Z.EnumDSSExtraGraphProperty;function P(g,f){var j=this.mChartContextPtr,e=this.mGraphObjectList,d,b,c;f=f||false;if(!this.isSupportedChartType()||f){d="Graph Type Not Supported";b=new W.TextObject({TripleId:new W.TripleId({ObjectId:A.DssGraphWarningMessage}),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}if(!this.checkDataset()){d="Insufficient Data To Plot";b=new W.TextObject({TripleId:new W.TripleId([A.DssGraphWarningMessage,C,E]),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}var h=j.mImageUsage===32;if(h){d=this.mDatasetPtr.GetBannerText();b=new W.TextObject({TripleId:new W.TripleId([A.DssGraphBanner,0,0]),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}return false;}mstrmojo.chart.ChartManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.ChartManager",mGraphType:D.DssGraphTypeVertical_Bar_Side_by_Side,mPlotManagers:null,mDatasetPtr:null,mLegendPtr:null,mHighlightLayerObjectPtr:null,mIsTitleShown:false,mIsSubtitleShown:false,mIsFootnoteShown:false,mIsLegendShown:false,mIsExpanded:false,mIsInitialized:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,mAxisLabelsAutoFit:true,init:function T(b){this._super(b);this.mPlotManagers=[];},GenerateMapAndList:function N(){var j=this.mChartContextPtr,f,g,e,h,c,b,d;this.LoadProperties();f=new W.Rect2D({x:0,y:0,width:j.mGraphWidth,height:j.mGraphHeight});if(P.call(this,f)===true){this.mIsInitialized=true;return ;}if(!j.mIsGraphMatrix){g=j.GetProperty(F.DssGraph2ScaleDirection,new W.TripleId({ObjectId:G.DssGraphO1Body,SeriesId:-3}));if(g){this.mDatasetPtr.mReverseGroup=(g!==Q);}else{this.mDatasetPtr.mReverseGroup=false;}e=this.CreateBackground();this.mGraphObjectList.unshift(e);this.AddToMap(e);}h=null;c=null;switch(j.GetGraphMajorType()){case B.GMT_GRID:this.CalculateLayout(f);c=new W.GridChartPlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;case B.GMT_BOX:case B.GMT_CATEGORY:this.CalculateLayout(f);c=new W.CategoryPlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;case B.GMT_PIE:break;case B.GMT_SCATTER:case B.GMT_BUBBLE:this.CalculateLayout(f);c=new W.ValuePlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;default:P.call(this,f,true);break;}if(c!==null&&c!==undefined){this.mGraphObjectManagerList.unshift(c);c.SetDataset(this.mDatasetPtr);c.mLegendPtr=this.mLegendPtr;if(j.mIsTimeSeriesChart){this.mRightMargin=0;}c.SetMarginInfo(this.mLeftMargin,this.mRightMargin,this.mTopMargin,this.mBottomMargin);this.mPlotManagers.push(c);b=this.mPlotManagers.length;for(d=0;d<b;++d){this.mPlotManagers[d].GenerateMapAndList();}}this.mIsInitialized=true;},LoadProperties:function L(){var f=this.mChartContextPtr,d,e,c,b;d=f.GetProperty(F.DssGraphType,Y);if(d){this.mGraphType=d;}if(f.mIsTimeSeriesChart||f.mIsGraphMatrix){this.mIsTitleShown=false;this.mIsSubtitleShown=false;this.mIsFootnoteShown=false;this.mIsLegendShown=false;return ;}e=f.GetGraphMajorType();if(e!==B.GMT_3D_CATEGORY&&e!==B.GMT_HISTOGRAM&&e!==B.GMT_BOX){d=f.GetProperty(F.DssGraphShowLegendText,Y);if(d){this.mIsLegendShown=d!==Q;}}d=f.GetProperty(F.DssGraphShowTitle,Y);if(d){this.mIsTitleShown=d!==Q;}d=f.GetProperty(F.DssGraphShowSubtitle,Y);if(d){this.mIsSubtitleShown=d!==Q;}d=f.GetProperty(F.DssGraphShowfootnote,Y);if(d){this.mIsFootnoteShown=d!==Q;}c=false;if(!f.mManualLayoutMode){c=true;}else{d=f.GetProperty(a.DssGraphInfoRecalculateLegend,Y);if(d){if(d!==Q){c=true;}}}if(c){d=f.GetProperty(a.DssGraphInfoAutosizeHorizontal,Y);b=f.GetProperty(a.DssGraphInfoAutosizeVertical,Y);if(d&&b){this.mIsExpanded=(d!==Q&&b!==Q);}}if(f.mManualLayoutMode){d=f.GetProperty(F.DssGraphAxisAutoFit,new W.TripleId({ObjectId:G.DssGraphO1Body}));if(d){this.mAxisLabelsAutoFit=d!==Q;}if(this.mAxisLabelsAutoFit){f.mRecalculateFrame=true;}}},CreateBackground:function I(){var d=this.mChartContextPtr,c,b;c=new W.TripleId({ObjectId:G.DssGraphBackground,SeriesId:C,GroupId:E});b=new W.Rect2D({x:0,y:0,width:d.mGraphWidth,height:d.mGraphHeight});return new W.RectangleObject({TripleId:c,GraphObjectManager:this,Area:b});},isSupportedChartType:function V(){var c=this.mChartContextPtr,b;b=c.GetGraphMajorType();switch(b){case B.GMT_CATEGORY:case B.GMT_PIE:case B.GMT_BUBBLE:case B.GMT_SCATTER:case B.GMT_GRID:case B.GMT_BOX:return true;default:return false;}},checkDataset:function H(){var c=this.mDatasetPtr.GetSeriesCount(),e=this.mChartContextPtr;if(this.mDatasetPtr.CountMetric()===0&&this.mChartContextPtr.mIsGraphMatrix){var b=this.mDatasetPtr.IsHeaderEmpty(true),d=this.mDatasetPtr.IsHeaderEmpty(false);return(!d||!b);}return true;},CalculateLayout:function S(z){var h=this.mChartContextPtr,AA,t,AE,n,AG,f,v,AC,k,o,l,b,u,p,y,AF,x,e,d,j,q,AB,AD,s,w,c,r,g;AA=0;t=0;if(h.mIsTimeSeriesChart){g=J.sDefaultMarginForTimeSeries;AA=g;t=g;this.mRightMargin=0;}else{if(h.mIsUniformAxisMode&&!(h.mIsEntireChart)){g=J.sDefaultUniformAxisMargin;AA=g;t=g;this.mRightMargin=t;}else{g=J.sDefaultMargin;AA=h.vdHeight(g);t=h.vdWidth(g);this.mRightMargin=t;}}AE=z.x+z.width;n=z.y+z.height;z.x+=t;z.y+=AA;AE-=this.mRightMargin;n-=AA;z.width=AE-z.x;z.height=n-z.y;this.mLeftMargin=t;this.mTopMargin=AA;this.mBottomMargin=AA;if(h.mIsTimeSeriesChart){return ;}AG=null;if(this.mIsTitleShown){f=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultTitlePosition);v=new W.TripleId({ObjectId:G.DssGraphTitle});c=h.GetProperty(F.DssGraphTextContent,v);if(c){x=c;}else{x="Graph Title";}AG=new W.TextObject({TripleId:v,GraphObjectManager:this,rect:f});AG.SetText(x);this.AddToMapAndList(AG);if(!h.mManualLayoutMode||h.mRecalculateFrame){AC=AG.GetBoundingRect();n=z.y+z.height;z.y=AC.y+AC.height+AA;z.height=n-z.y;if(z.height<0){z.height=0;}}if(h.mManualLayoutMode){f=h.GetLocation(F.DssGraphTitleLocation);AG.SetRect(f);AG.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(F.DssGraphTitleLocation,AC);}}}k=null;if(this.mIsSubtitleShown){l=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultSubtitlePosition);o=new W.TripleId({ObjectId:G.DssGraphSubtitle});c=h.GetProperty(F.DssGraphTextContent,o);x=(c===null||c===undefined)?("Graph Subtitle"):c;k=new W.TextObject({TripleId:o,GraphObjectManager:this,rect:l});k.SetText(x);this.AddToMapAndList(k);if(!h.mManualLayoutMode||h.mRecalculateFrame){k.MoveTo(l.x,z.y);b=k.GetBoundingRect();n=z.y+z.height;z.y=b.y+b.height+AA;z.height=n-z.y;if(z.height<0){z.height=0;}}if(h.mManualLayoutMode){l=h.GetLocation(W.DssGraphSubTitleLocation);k.SetRect(l);k.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(W.DssGraphTitleLocation,b);}}}u=null;if(this.mIsFootnoteShown){y=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultFootnotePosition);p=new W.TripleId({ObjectId:G.DssGraphFootnote});c=h.GetProperty(F.DssGraphTextContent,p);if(c===null||c===undefined){x="Graph Footnote";}else{x=c;}u=new W.TextObject({TripleId:p,GraphObjectManager:this,rect:y});u.SetText(x);this.AddToMapAndList(u);if(!h.mManualLayoutMode||h.mRecalculateFrame){AF=u.GetBoundingRect();u.MoveTo(y.x,z.y+z.height-AF.height);z.height=(z.y+z.height-AA-AF.height)-z.y;if(z.height<0){z.height=0;}}if(h.mManualLayoutMode){y=h.GetLocation(F.DssGraphFootnoteLocation);u.SetRect(y);u.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(F.DssGraphTitleLocation,AF);}}}e=h.mGraphWidth;d=h.mGraphHeight;if(this.mIsLegendShown&&!h.mIsGraphMatrix){j=this.mDatasetPtr.GetSeriesCount();if(j===1){q=this.mDatasetPtr.GetSeriesLabel(0,false);if(q===""){this.mIsLegendShown=false;}}}if(this.mIsLegendShown){if(z.height>0){this.mLegendPtr=new W.Legend({TripleId:new W.TripleId({ObjectId:K}),GraphObjectManager:this,DataSet:this.mDatasetPtr,Area:z});this.mLegendPtr.GenerateMapAndList();this.mGraphObjectManagerList.push(this.mLegendPtr);if(!h.mManualLayoutMode||h.mRecalculateFrame){AB=new W.Rect2D({Rect2D:z});this.mLegendPtr.CalculateFrame(t,AA,z);this.mLeftMargin+=z.x-AB.x;this.mRightMargin+=AB.x+AB.width-(z.x+z.width);this.mBottomMargin+=AB.y+AB.height-(z.y+z.height);if(!h.mManualLayoutMode){if(this.mIsExpanded){if(AG!==null&&AG!==undefined){f=h.vdRect(W.gDefaultTitlePosition);AG.SetRect(f);AG.CalculateDeviceRect();h.PutLocation(F.DssGraphTitleLocation,f);}if(k!==null&&k!==undefined){l=h.vdRect(W.gDefaultSubtitlePosition);k.SetRect(l);k.CalculateDeviceRect();h.PutLocation(F.DssGraphSubTitleLocation,l);}if(u!==null&&u!==undefined){y=h.vdRect(W.gDefaultFootnotePosition);u.SetRect(y);u.CalculateDeviceRect();h.PutLocation(F.DssGraphFootnoteLocation,y);}}}}}}if(h.mManualLayoutMode&&!h.mRecalculateFrame){AD=h.mGraphWidth;s=h.mGraphHeight;if(this.mIsExpanded){h.SetGraphSize(e,d);}if(this.mIsExpanded){h.SetGraphSize(AD,s);}}else{if(!this.mChartContextPtr.mIsGraphMatrix){w=15;c=h.GetProperty(F.DssGraphFontSize100,new W.TripleId({ObjectId:G.DssGraphDataText,SeriesId:0}));if(c){w=Math.floor(c/100+0.5);}if(w>this.mTopMargin){r=w-this.mTopMargin;if(r>z.height/10){r=z.height/10;}z.y+=r;z.height-=r;this.mTopMargin=w;}}}},Draw:function O(){var b,d,c;if(!this.mIsInitialized){this.GenerateMapAndList();}b=this.mGraphObjectList.length;if(b>0){this.mGraphObjectList[0].Draw();}d=this.mPlotManagers.length;for(c=0;c<d;++c){this.mPlotManagers[c].Draw();}if(this.mLegendPtr!==null&&this.mLegendPtr!==undefined){this.mLegendPtr.Draw();}for(c=1;c<b;++c){this.mGraphObjectList[c].Draw();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","GenericContext","GraphObjectManager","ChartManager","Point2D","NumberObject","ChartAdvFormat");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory","EnumLabelLevelOption","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMajorGraphType","EnumAxisLabelsLocation","EnumGraphMatrixMarkerTypeInChart","EnumFontRotation","EnumRectCompare");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphFillEffect","EnumDSSGraphStockLayout");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var Au=mstrmojo.chart,Q=Au.enums,As=Q.EnumGraphMajorType,l=Q.EnumGraphMatrixMajorGraphType,Ay=Q.EnumAxisDirection,f=Q.EnumAxisLabelsLocation,v=Q.EnumGraphMatrixMajorGraphType,I=Q.EnumFontRotation,Ao=Q.EnumGraphMatrixMarkerTypeInChart,Ak=Q.EnumRectCompare,AU=Q.EnumImageUsage,Z=mstrmojo.hash,Ad=Au.gNullTripleId,An=mstrmojo.chart.model,Aa=An.enums,BA=Aa.EnumDSSGraphType,BB=Aa.EnumDSSGraphProperty,BC=Aa.EnumDSSGraphObject,AW=Aa.EnumVariantBool,AR=AW.VARIANT_FALSE,Ax=Aa.EnumDSSExtraGraphProperty,AY=mstrmojo.chart.common.Utility,Ab=AY.tripleId;var W=0,r=2147483647,A2=0,Af=2,Y=0;var AH=new Au.Rect2D();var AJ=new Au.TripleId();var AP=new Au.ChartAdvFormat();var AV=20;function S(BL){var BM=1,BR=2,BN=4,BQ=8;var BP=this.mDatasetPtr.showHideItemsOnAxis(BL),BO=0;if(BP.axisLabels){BO=BO|BN;}if(BP.majorGrids){BO=BO|BR;}if(BP.minorGrids){BO=BO|BQ;}if(BP.axisBody){BO=BO|BM;}return BO;}function Aw(BP){var BO={HighTrim:0,LowTrim:0,isCaTrim:true};if(this.mUniformAxisPtr){var BN,BQ=this.mChartContextPtr,BM=BQ.getUniformAxisContext(),BL=BM.CategoryAxis;BN=BP?BL.X:BL.Y;BO.HighTrim=BN.Trims[1];BO.LowTrim=BN.Trims[0];}return BO;}function AE(){var BN={PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};if(this.mUniformAxisPtr){var BM,BP=this.mUniformAxisPtr,BQ=this.mChartContextPtr,BL=BQ.getUniformAxisContext(),BO=BL.ValueAxis;switch(BP.Key){case"x2":case"X2":BM=BO.X2;BN.SecondaryLowTrim=BM.Trims[0];BN.SecondaryHighTrim=BM.Trims[1];break;case"y2":case"Y2":BM=BO.Y2;BN.SecondaryLowTrim=BM.Trims[0];BN.SecondaryHighTrim=BM.Trims[1];break;case"x":case"x1":case"X":case"X1":BM=BO.X1;BN.PrimaryLowTrim=BM.Trims[0];BN.PrimaryHighTrim=BM.Trims[1];break;default:BM=BO.Y1;BN.PrimaryLowTrim=BM.Trims[0];BN.PrimaryHighTrim=BM.Trims[1];break;}}return BN;}function z(BU){var BS=this.mChartContextPtr.GetGraphMatrixContext(),BV=BU.ShapeType||BS.mMarkerShape;BS.mGraphType=this.mGraphType;BS.updateGMGraphTypeWithMarkerShape(BV);if(BU.DataAreaPaddings){BS.UpdateValueAxisPadding(BU.DataAreaPaddings);}if(BU.ColorBy){var BT=BU.ColorBy;BS.mHasColorBy=BT.HasColorBy||false;}if(BU.SizeBy){var BZ=BU.SizeBy;BS.mHasSizeBy=BZ.HasSizeBy||BS.mHasSizeBy;BS.mMaxSizeVal=BZ.Max||BS.mMaxSizeVal;BS.mMinSizeVal=BZ.Min||BS.mMinSizeVal;BS.mCustomScaleForSizeBy=BZ.mCustomScaleForSizeBy||BZ.CustomScaleForSizeBy;}var BP=this.mChartContextPtr,BY=BP.GetGraphMajorType();BS.mHasSizeBy=(BY===As.GMT_BUBBLE)||BS.mHasSizeBy;var BN=1,Ba=2,BX=4,BL=8;BS.AxisLayout=BU.AxisLayout||(BN|Ba);if(BU.ElementInfo){var BR=BS.mElementsInfo.Max,BO=BS.mElementsInfo.Min,BM=BU.ElementInfo;if(BM.Max){var BW=BM.Max;BR.Mode=BW.Mode||BR.Mode;BR.Size=BW.Size||BR.Size;}if(BM.Min){var BQ=BM.Min;BO.Mode=BQ.Mode||BO.Mode;BO.Size=BQ.Size||BO.Size;}}}function t(BT){var BP=this.mChartContextPtr,BS=BP.getUniformAxisContext();if(BT.UniformAxisPaddings){var BQ=BT.UniformAxisPaddings;this.UpdateUniformAxisMargins(BQ);if(BP.IsGridChart()===false){var BW=BS.ValueAxis,BN=BW.X1,BM=BW.X2,BV=BW.Y1,BU=BW.Y2;BU.Trims[1]=BQ.ySecondaryHighTrim;BM.Trims[1]=BQ.xSecondaryHighTrim;BU.Trims[0]=BQ.ySecondaryLowTrim;BM.Trims[0]=BQ.xSecondaryLowTrim;BV.Trims[1]=BQ.yPrimaryHighTrim;BN.Trims[1]=BQ.xPrimaryHighTrim;BV.Trims[0]=BQ.yPrimaryLowTrim;BN.Trims[0]=BQ.xPrimaryLowTrim;BM.perCell=BQ.x2PerCell;BU.PerCell=BQ.y2PerCell;BV.PerCell=BQ.yPerCell;BN.PerCell=BQ.xPerCell;}if(BP.IsBubbleChart()===false&&BP.IsScatterChart()===false){var BR=BS.CategoryAxis,BO=BR.X,BL=BR.Y;BO.Trims[0]=BQ.xCaLowTrim;BO.Trims[1]=BQ.xCaHighTrim;BL.Trims[0]=BQ.yCaLowTrim;BL.Trims[1]=BQ.yCaHighTrim;}}BS.mIsAxisTitleAndLabelRequired=false;}function BG(BL){switch(BL){case BC.DssGraphY1Body:case BC.DssGraphY2Body:case BC.DssGraphY3Body:case BC.DssGraphY4Body:case BC.DssGraphX1Body:case BC.DssGraphX2Body:return true;}return false;}function AI(){var BL=this.mChartContextPtr.mGraphType;switch(BL){case BA.DssGraphTypeX_Y_Scatter:case BA.DssGraphTypeDualAxis_X_Y_Scatter:case BA.DssGraphTypeX_Y_Scatter_with_Labels:case BA.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case BA.DssGraphTypeBubble:case BA.DssGraphTypeBubble_DualAxis:case BA.DssGraphTypeBubble_With_Labels:case BA.DssGraphTypeBubble_DualAxis_With_Labels:case BA.DssGraphTypeHorizontal_Line_Absolute:case BA.DssGraphTypeHorizontal_Line_Stacked:case BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Line_Percent:case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_Stacked:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Bar_Percent:case BA.DssGraphTypeHorizontal_Bar_Absolute:case BA.DssGraphTypeHorizontal_Area_Absolute:case BA.DssGraphTypeHorizontal_Area_Stacked:case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Area_Percent:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case BA.DssGraphTypeHorizontal_Line_DualAxis_Percent:case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function A3(){switch(this.mChartContextPtr.mGraphType){case BA.DssGraphTypeHorizontal_Line_Absolute:case BA.DssGraphTypeHorizontal_Line_Stacked:case BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Line_Percent:case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_Stacked:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Bar_Percent:case BA.DssGraphTypeHorizontal_Bar_Absolute:case BA.DssGraphTypeHorizontal_Area_Absolute:case BA.DssGraphTypeHorizontal_Area_Stacked:case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Area_Percent:case BA.DssGraphTypeGridChart:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case BA.DssGraphTypeHorizontal_Line_DualAxis_Percent:case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function At(BL,BM){if(BL){return AI.call(this)?1:0;}return A3.call(this)?0:1;}function Ae(BN,BR,BM,BO,BQ,BS){BN.mDataAreaBottomMargin=BN.mDataAreaTopMargin=BN.mDataAreaRightMargin=BN.mDataAreaLeftMargin=0;return ;var BL,BP;if(BQ){if(BO>=0){BN.mDataAreaLeftMargin=BR.x;}else{if(BN.mDataAreaLeftMargin<BR.x){BN.mDataAreaLeftMargin=BR.x;}}BN.mDataAreaRightMargin=BM-(BR.x+BR.width);BN.mDataAreaLeftMargin=Math.max(0,BN.mDataAreaLeftMargin);BN.mDataAreaRightMargin=Math.max(0,BN.mDataAreaRightMargin);BL=BN.mDataAreaLeftMargin;BP=BN.mDataAreaRightMargin;}else{BN.mDataAreaTopMargin=BR.y;BN.mDataAreaBottomMargin=BM-(BR.y+BR.height);if(BN.mDataAreaBottomMargin<0){BN.mDataAreaBottomMargin=0;}BN.mDataAreaTopMargin=Math.max(0,BN.mDataAreaTopMargin);BN.mDataAreaBottomMargin=Math.max(0,BN.mDataAreaBottomMargin);BL=BN.mDataAreaBottomMargin;BP=BN.mDataAreaTopMargin;}}function AG(){var BM,BN=this.mChartContextPtr;if(BN.mIsGraphMatrix){var BL=BN.getUniformAxisContext();BM=BL.ValueAxis.Y2;return BM.Metrics.length>0;}return BN.IsDualAxis();}function g(BN,BO){if(At.call(this,BN,BO)===0){return true;}var BP=this.mChartContextPtr,BL=BP.getValueAxisKeyFromLayout(BN,BO),BM=BP.getUniformAxisContext().ValueAxis;return BM[BL].Metrics.length>0;}function Az(){var BM=this.mChartContextPtr,BL;if(BM.mIsGraphMatrix){BM.mAbsoluteFontLineSize=true;BM.mManualLayoutMode=false;this.mFontAntiAlias=true;BM.mIsFontAntiAlias=this.mFontAntiAlias;return ;}if(!BM.mIsTimeSeriesChart){BL=BM.GetProperty(BB.DssGraphLockFontSize,Ad);if(BL){BM.mAbsoluteFontLineSize=(BL!==AR);}else{BM.mAbsoluteFontLineSize=true;}BL=BM.GetProperty(BB.DssGraphSeriesByColumn,Ad);if(BL){this.mDatasetPtr.mSeriesByColumn=(BL!==AR);}else{this.mDatasetPtr.mSeriesByColumn=true;}}BL=BM.GetProperty(BB.DssGraphAutoArrange,Ad);if(BL){BM.mManualLayoutMode=(BL===AR);if(BL===AR){BL=BM.GetProperty(Ax.DssGraphInfoRecalculateChartFrame,Ad);if(BL){BM.mRecalculateFrame=(BL!==AR);}else{BM.mRecalculateFrame=false;}}}else{BM.mManualLayoutMode=false;}BL=BM.GetProperty(BB.DssGraphFontAntiAlias,Ad);if(BL){this.mFontAntiAlias=BL;}else{this.mFontAntiAlias=true;}BM.SetFontAntiAlias(this.mFontAntiAlias);}function A7(BO,BN,BP,BM){BN=(BN!==undefined)?BN:-1;BP=(BP!==undefined)?BP:true;this.mAxisLayoutHighPadding=0;this.mAxisLayoutLowPadding=0;if(g.call(this,BO,BP)===false){BM.CanSkip=true;return ;}var BQ=this.mChartContextPtr;BM.IsPrimary=BP;BM.MaxLabelLength=BN;var BL=BQ.getUniformAxisContext();BL.mIsAxisTitleAndLabelRequired=true;BQ.mIsEntireChart=false;Az.call(this);if(g.call(this,BO,BP)===false){BM.CanSkip=true;}}function BK(){this.mAxisLayoutHighPadding=this.mUniformAxisPtr.mHighTrim||0;this.mAxisLayoutLowPadding=this.mUniformAxisPtr.mLowTrim||0;}function AT(BP,BO,BL,BQ,BN){if(this.mVisualMode===A2){BN.CanSkip=true;return ;}if(BP){if(BO<=AV&&AI.call(this)){BN.CanSkip=true;return ;}}else{if(BL<=AV&&A3.call(this)===false){BN.CanSkip=true;return ;}}var BR=this.mChartContextPtr;BR.SetGraphSize(BO,BL);BR.mIsEntireChart=false;var BM=BR.getUniformAxisContext();BM.mIsAxisTitleAndLabelRequired=true;if(BQ===undefined){BQ=true;}BN.IsPrimary=BQ;if(BN===undefined){BN={SkipLayout:false};}else{if(BN&&BN.SkipLayout){BN.SkipLayout=BN.SkipLayout&&(this.mUniformAxisPtr!==null);}else{BN.SkipLayout=false;}}BR.populateCanvas();}function b(BM,BT){var BN=200,BQ=201,BL=202,BW=4,BO=1,BX=24,BP=this.mChartContextPtr,BV=BP.GetGraphMatrixContext(),BR=BP.mGraphType;BP.mGraphType=BM;var BU=BP.GetGraphMajorType(),BS=BV.isCombinationChart()||BT===203;if(BT===BN){if(BU===As.GMT_CATEGORY){if(BP.IsBarChart()){switch(BM){case BA.DssGraphTypeVertical_Bar_Absolute:case BA.DssGraphTypeVertical_Bar_Side_by_Side:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Bar_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Bar_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeHorizontal_Line_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Absolute:case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;}}else{if(BP.IsAreaChart()){switch(BM){case BA.DssGraphTypeVertical_Area_Absolute:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Area_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Area_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Area_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Area_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Area_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Area_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Area_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Area_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Area_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Area_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}else{if(BT===BQ||BT===BL){if(BP.IsAreaChart()){switch(BM){case BA.DssGraphTypeVertical_Area_Absolute:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Area_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Area_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Area_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Area_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Area_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Area_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Area_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Area_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Area_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Area_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BP.IsBarChart()){switch(BM){case BA.DssGraphTypeVertical_Bar_Absolute:case BA.DssGraphTypeVertical_Bar_Side_by_Side:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Bar_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Bar_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case BA.DssGraphTypeVertical_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Bar_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case BA.DssGraphTypeVertical_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BT===BW||BT===BO||BT===BX){if(BP.IsAreaChart()){switch(BM){case BA.DssGraphTypeVertical_Area_Absolute:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Area_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Area_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Area_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Area_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Area_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Area_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Area_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Area_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Area_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Area_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BP.IsBarChart()){switch(BM){case BA.DssGraphTypeVertical_Bar_Side_by_Side:case BA.DssGraphTypeVertical_Bar_Absolute:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Absolute:case BA.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Absolute:case BA.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Bar_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Bar_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BS){if(BP.IsBarChart()){switch(BM){case BA.DssGraphTypeVertical_Bar_Absolute:case BA.DssGraphTypeVertical_Bar_Side_by_Side:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Bar_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case BA.DssGraphTypeVertical_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Bar_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Absolute:case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Line_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BP.IsAreaChart()){switch(BM){case BA.DssGraphTypeVertical_Area_Absolute:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Area_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Area_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Area_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Area_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Area_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Area_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Area_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Area_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Area_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Area_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}}}BP.mGraphType=BR;return BM;}function H(BP,BO,BM){var BL=BM.length,BN;for(BN=0;BN<BL;++BN){if(BM[BN].si===BP&&BM[BN].gi===BO){return true;}}return false;}function q(BO,BZ,BT,BR,BQ,BY){var Ba={},BP=this.mChartContextPtr,BS,BW;if(BP.mCanvas===null){BP.populateCanvas();}BO=BO||1014;BZ=BZ||694;Ba.GW=BO;Ba.GH=BZ;BP.SaveSurfaceToObject(Ba);var BX=this.mChartContextPtr.GetProperty(BB.DssGraphSeriesByColumn,Ad),BV,BL;if(BX&&BX!==AR){BV=BR;BL=BT;}else{BV=BT;BL=BR;}var BM=[];BW=BM.length;if(BW>0){Ba.Areas=[];for(BS=0;BS<BW;++BS){var BN={};var BU=new Au.TripleId({ObjectId:BM[BS].GetObjectID(),SeriesId:BM[BS].GetSeriesID(),GroupId:BM[BS].GetGroupID()});if(BU.mObjectId!==BC.DssGraphRiser&&BU.mObjectId!==BC.DssGraphDataMarker&&BU.mObjectId!==BC.DssGraphPieSlice&&BU.mObjectId!==BC.DssGraphLegendMarker&&BU.mObjectId!==BC.DssGraphLegendText&&BU.mObjectId!==BC.DssGraph2DO1Label){continue;}if(!H.call(this,BU.mSeriesId,BU.mGroupId,BY)){continue;}BN.OID=BU.mObjectId;BN.SID=BU.mSeriesId;BN.GID=BU.mGroupId;BN.Shape=BM[BS].GetShape();BN.Coords=BM[BS].GetCoordinates();Ba.Areas.push(BN);}}if(BY.length>0){BW=BY.length;Ba.Selected=[];for(BS=0;BS!==BW;++BS){Ba.Selected.push(BY[BS].sid);Ba.Selected.push(BY[BS].gid);}}return Ba;}function B(BQ){if(BQ){var BP=this.mChartContextPtr,BN=this.mChartManagerPtr;if(!(BP&&BN&&BP.mIsGraphMatrix)){return ;}if(BP.mPartialRendering&&(BP.IsBubbleChart()||BP.IsScatterChart())){var BM=BN.GetGraphObjectManager(Au.PlotId0),BL,BO=false;if(BM&&BM.waitingList){BL=BM.waitingList;if(BO){BQ.hiddenItems=BQ.hiddenItems||[];BL.forEach(function(BR){BQ.hiddenItems.push({x:BR.Position.x,y:BR.Position.y,shp:BR.Shape,sz:BR.Size,id:null});});}else{BQ.hiddenItems=BM.waitingList;delete BM.waitingList;}}}}}function N(){this.mDatasetPtr.finalize();var BL=this.mChartManagerPtr;BL.Draw();}function A4(){var BL=this.mChartContextPtr;if(BL.GetGraphMatrixGraphMajorType()===v._AREA&&BL.IsVertical()){return 1;}return 2;}function AN(BM,BO,BN,BL){if(BN===null||BN===undefined){return ;}if(BL){if(BO){BN.ResetAxisPadding();BN.SetDataset(this.mDatasetPtr);BN.AdjustTitleArea(BM);BN.AdjustDataArea(BM,Y,Y,false);}else{BN.TrimAxisPadding(BM);BN.ReserveTitleAndLabels(BM,Y,Y);BN.AdjustDeviceDataArea(BM,false);}}else{if(BO){BN.TrimAxisPadding(BM,false);BN.SetDeviceDataArea(BM);BN.ResetAxisPadding();BN.GenerateMapAndList();}else{BN.TrimAxisPadding(BM,false);BN.SetDeviceDataArea(BM);BN.AdjustDeviceDataArea(BM,true);BN.UpdateTitleAndLabelArea(BM);BN.GenerateGridLinesEx();}}}function C(BM,BT,BS){var BN=this.mChartContextPtr;if(!BN.mIsGraphMatrix){return null;}var BO=null;if(BT){BO=this.mUniformAxisPtr;}else{var BL=[BC.DssGraphO1Body,BC.DssGraphX1Body,BC.DssGraphY1Body,BC.DssGraphY2Body];if(!BS&&!BN.IsDualAxis()){BS=true;}if(BN.GetGraphType()===BA.DssGraphTypeGridChart){var BP=new Au.CategoryAxisInfo(),BR=this.mDatasetPtr.mSeriesByColumn;if(!BM){BP.ToY(!BR);}else{BP.ToX(BR);}Ab.reset(AJ,BP.mId.mObjectId,BP.mId.mSeriesId,BP.mId.mGroupId);}else{var BQ;if(BN.IsVertical()){BQ=BM?0:2;}else{BQ=BM?2:0;}if(!BS){BQ++;}Ab.reset(AJ,BL[BQ],0,-3);}BO=this.mChartManagerPtr.GetGraphObjectManager(AJ,true);}return BO;}function BE(BN){var BS=this.mChartContextPtr,BL=false;if(BS.mIsTimeSeriesChart){BL=true;}else{var BP=BS.GetProperty(BB.DssGraph2DOrdSpaceMode,Au.gNullTripleId);if(BP){BL=BP;}}var BM,BO=BS.GetGraphType();if(BO>=BA.DssGraphTypeVertical_Line_Absolute&&BO<=BA.DssGraphTypeHorizontal_Line_Percent){BM=true;}var BR=this.mDatasetPtr.GetGroupCount(),BQ=(BR<=1&&BM);BN.mAxisCross=(BL&&BM&&!BQ);}function AQ(BL,BR,BS){var BQ=BR[BL.toUpperCase()],BN=BQ.CondenseLabel,BO=BS.PrimaryMetricIndex,BP=BO.length>=1?BO[0]:-1,BM=BN[BP],BT=BS.getCondenseStatus();if(BM!==null&&BM!==undefined){if(BT!==undefined){if(BT!==BM){BS.checkCondense(BM);}}}}function AS(BS,BV){BV=(BV!==undefined)?BV:true;var Be="X1",Bc="X1",BP=C.call(this,BS,true,BV),BQ=0,Ba=BS?Ay.AD_X:Ay.AD_Y,BN=this.mChartContextPtr,BU=BN.getUniformAxisContext(),BT=BU.ValueAxis;var BW=At.call(this,BS,BV)===BQ,BY,BZ,BO,Bb,BX;if(BP){if(BW===false){BX=BP.getCondenseStatus();if(BX===null){BY=Be;AQ.call(this,BY,BT,BP);}}return BP;}var BR=1;if(BW){var BL=BN.GetGraphType();if(BL===BA.DssGraphTypeGridChart){var Bd=this.mDatasetPtr.mSeriesByColumn;if(BS){Bc=!Bd?"O1":"O2";}else{Bc=Bd?"O1":"O2";Be="Y1";}}else{Bc="O1";if(!BS){Be="Y1";}}if(Bc==="O1"){BN.caKeyMap.c1=Be;}else{BN.caKeyMap.c2=Be;}BP=this.mUniformAxisPtr=new Au.CategoryAxis({TripleId:BN.getAxisTripleId(Bc),mChartContextPtr:this.mChartContextPtr,GraphObjectManager:this.mChartManagerPtr,AxisLabelsLocation:f.ALL_BOTTOM,AxisDirection:Ba,IsUA:true});BE.call(this,BP);BZ=S.call(this,Be);BP.SetIntegrity(BZ);}else{if(!BS){Be="Y1";Bc="Y1";}var BM=BS?BT.X1:BT.Y1;if(BV===false){Be=BS?"X2":"Y2";BM=BT[Be];Bc=BS?"X2":"Y2";}BO=BM.Metrics;BP=this.mUniformAxisPtr=new Au.ValueAxis({mChartContextPtr:this.mChartContextPtr,TripleId:BN.getAxisTripleId(Bc),GraphObjectManager:this.mChartManagerPtr,Min:BM.Min,Max:BM.Max,LargerGridInterval:false,IsPercent:BN.IsPercentChart(),AxisDirection:Ba,IsShown:true,PrimaryMetricIndex:BO,IsUA:true});BY=Be;AQ.call(this,BY,BT,BP);Bb=BT[BY.toUpperCase()];if(Bb.Valid===false){BP.SetIntegrity(BR);}else{BY=Be;if(BY==="x"){BY="X1";}BZ=S.call(this,BY);BP.SetIntegrity(BZ);}}BP.mIsUniformAxis=true;BP.Key=Be;return BP;}function AK(BT,BS,BL,BO){var BN,BP,BR,BM=this.mChartContextPtr,BQ=BM.getUniformAxisContext();if(BS===false){if(BT){BN=BL?"X1":"Y1";}else{BN=BL?"X2":"Y2";}BP=BQ.ValueAxis[BN];BP.Trims[0]=BO.mLowTrim||0;BP.Trims[1]=BO.mHighTrim||0;}else{BN=BL?"X":"Y";BR=BQ.CategoryAxis[BN];BR.Trims[0]=BO.mLowTrim||0;BR.Trims[1]=BO.mHighTrim||0;}}function L(BM,BQ,BO,BP){if(BP===undefined){BP=true;}this.mChartContextPtr.resetCanvas();this.mDatasetPtr.finalize();var BN=AS.call(this,BQ,BP);BN.SetDeviceDataArea(BM);AN.call(this,BM,BO,BN,false);BN.resetRestrictSpace();AK.call(this,BP,BO,BQ,BN);var BL=At.call(this,BQ,BP)===1;if(BL){this.mDatasetPtr.saveShownLabels(BN);}BN.Draw();}function F(BQ,BR,BY){var BO=this.mChartContextPtr,BS=BO.mDataset,Ba,BV=BO.getUniformAxisContext(),BZ=BV.ValueAxis,BN=BR?"X":"Y",BX;BN+=BY?"1":"2";BX=BZ[BN].Max;var BU=true;var BM=BS.showDatalabels();if(BM){BU=(BS.dataLabelStyle===2);}var BL=BX,BT,BW=null;if(BU){AP.restore();this.mDatasetPtr.getValueAxisNumberFormat(AP,BQ);var BP=new Au.NumberObject({TripleId:new Au.TripleId({ObjectId:BC.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,Number:BL,NumberFormat:AP,GraphCollectionObject:BW,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(BP){BT=BP.mText;}Ba=BP;}else{BT=BS.GetTextLabel(0,0);Ba=new Au.TextObject({TripleId:new Au.TripleId({ObjectId:BC.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,GraphCollectionObject:BW});}if(Ba){Ba.SetText(BT);}return Ba;}function Al(BO,Bo,BN,BX,Bi){var BQ=this.mChartContextPtr,Bb=this.mDatasetPtr,Bh,Bf=BQ.getUniformAxisContext(),BV=this.mUniformAxisPtr,BR=new Au.Rect2D(),BT=false,Bk,BM,Bd,BY,BS,Ba,BZ,BU,Be,BW,BP,BL,Bl;BR.ResetRect(BO);Bh=BQ.GetProperty(Ax.DSSGraphMatrixDataLabelRotated,Au.gNullTripleId);var Bc=Bb.showDatalabels();if(Bc&&BQ.IsBarChart()&&Bh!==null){var Bg=Bh,Bn=Bf.ValueAxis,Bj=BX?"X":"Y";Bj+=Bi?"1":"2";Bk=Bn[Bj].Max;BL=F.call(this,Bo,BX,Bi);if(BX){BL.GetFormatFont().mFontRotation=I.FR_NORMAL;}else{if(Bg){BL.GetFormatFont().mFontRotation=I.FR_90;}else{BL.GetFormatFont().mFontRotation=I.FR_NORMAL;}}BM=BL.GetBoundingRect();Bd=5;BY=BV.GetMaxTick();BS=BV.GetMinTick();Ba=BV.GetPositionByValue(BY);BZ=BV.GetPositionByValue(BS);BU=BV.GetPositionByValue(Bk);if(BX){if(BN-BU<Bd*2+BM.width){Be=BN-(Bd*2+BM.width);BW=(BY-BS)/(Bk-BS);BP=Ba-BZ-BW*(Be-BZ);BP+=2;var Bm=(Be>BZ);if(Bm&&BP/(Ba-BZ)<0.2){BR.width-=BP;BT=true;BO.ResetRect(BR);BV.dataLabelPadding=BP;}}}else{if(Bk>0&&BU<Bd*2+BM.height){Be=Bd*2+BM.height;BW=(BY-BS)/(Bk-BS);BP=BZ-Ba-BW*(BZ-Be);BP+=2;Bl=(Be>BU);if(Bl&&BP/(BZ-Ba)<0.2){BR.y+=BP;BR.height-=BP;BT=true;BO.ResetRect(BR);BV.dataLabelPadding=BP;}}}}return BT;}function A8(BN,Bj,BX,Bf){return Al.call(this,BN,Bj,BX,true,Bf);var Be,BO=0,BP=this.mChartContextPtr,BZ=BP.mDataset,Bd=BP.getUniformAxisContext(),Bg=this.mUniformAxisPtr,BQ=new Au.Rect2D(),BS=false;BQ.ResetRect(BN);Be=BP.GetProperty(Ax.DSSGraphMatrixDataLabelRotated,Au.gNullTripleId);var Ba=BZ.showDatalabels();if(Ba&&BP.IsBarChart()&&Be!==null){var Bh=Bd.ValueAxis.X1.Max,BL=F.call(this,Bj,true);if(!!BL===false){return BS;}BL.GetFormatFont().mFontRotation=I.FR_NORMAL;var BM=BL.GetBoundingRect(),Bb=5,BV=Bg.GetMaxTick(),BR=Bg.GetMinTick();var BY,BW,BT;BY=Bg.GetPositionByValue(BV);BW=Bg.GetPositionByValue(BR);BT=Bg.GetPositionByValue(Bh);if(BX-BT<Bb*2+BM.width){var Bc=BX-(Bb*2+BM.width),BU=(BV-BR)/(Bh-BR);BO=BY-BW-BU*(Bc-BW);BO+=2;var Bi=(Bc>BW);if(Bi&&BO/(BY-BW)<0.2){BQ.width-=BO;BS=true;BN.ResetRect(BQ);Bg.dataLabelPadding=BO;}}}return BS;}function P(BN,Bl,Bd,Bh){return Al.call(this,BN,Bl,Bd,false,Bh);var BP=this.mChartContextPtr,BZ=this.mDatasetPtr,Bg,Be=BP.getUniformAxisContext(),BV=this.mUniformAxisPtr,BQ=new Au.Rect2D(),BS=false,Bj,Bi,BM,Bb,BW,BR,BY,BX,BT,Bc,BU,BO,BL,Bk;BQ.ResetRect(BN);Bg=BP.GetProperty(Ax.DSSGraphMatrixDataLabelRotated,Au.gNullTripleId);var Ba=BZ.showDatalabels();if(Ba&&BP.IsBarChart()&&Bg!==null){var Bf=Bg;Bj=Be.ValueAxis.Y1.Max;Bi=Be.ValueAxis.Y1.Min;BL=F.call(this,Bl,false);if(Bf){BL.GetFormatFont().mFontRotation=I.FR_90;}else{BL.GetFormatFont().mFontRotation=I.FR_NORMAL;}BM=BL.GetBoundingRect();Bb=5;BW=BV.GetMaxTick();BR=BV.GetMinTick();BY=BV.GetPositionByValue(BW);BX=BV.GetPositionByValue(BR);BT=BV.GetPositionByValue(Bj);if(Bj>0&&BT<Bb*2+BM.height){Bc=Bb*2+BM.height;BU=(BW-BR)/(Bj-BR);BO=BX-BY-BU*(BX-Bc);BO+=2;Bk=(Bc>BT);if(Bk&&BO/(BX-BY)<0.2){BQ.y+=BO;BQ.height-=BO;BS=true;BN.ResetRect(BQ);BV.dataLabelPadding=BO;}}}return BS;}function a(BQ,BS,BR){var BO=false,BN=false,BL=Ak.NONE,BM=this.mChartContextPtr.getUniformAxisContext(),BP=this.mUniformAxisSpace;if(BS<0||BR<0){BP.width=BS;BP.height=BR;return BL;}BO=BS===BP.width;BN=BR===BP.height;if(BO&&BN){BL=Ak.KeepBoth;}else{if(BO){BL=BR>BP.height?Ak.ExpandY:Ak.ShrinkY;}else{if(BN){BL=BS>BP.width?Ak.ExpandX:Ak.ShrinkX;}else{BL=Ak.NONE;if(BQ){BL=BS>BP.width?Ak.ExpandX:Ak.ShrinkX;}else{BL=BR>BP.height?Ak.ExpandY:Ak.ShrinkY;}}}}BP.width=BS;BP.height=BR;return BL;}function E(BM,BL){var BN=this.mChartContextPtr;if(this.mInitialized){return false;}if(BN.GetGraphMajorType()===As.GMT_HISTOGRAM){this.mDatasetPtr.mIsForHistogram=true;}BN.SetGraphSize(BM,BL);Az.call(this);this.mChartManagerPtr=new Au.ChartManager({mTripleId:Au.ManagerId,mDatasetPtr:this.mDatasetPtr,mChartContextPtr:BN});this.mChartManagerPtr.GenerateMapAndList();this.mInitialized=true;return true;}function AB(BL){switch(BL){case BA.DssGraphTypeVertical_Area_Absolute:case BA.DssGraphTypeVertical_Area_Stacked:case BA.DssGraphTypeVertical_Area_BiPolar_Absolute:case BA.DssGraphTypeVertical_Area_BiPolar_Stacked:case BA.DssGraphTypeVertical_Area_DualAxis_Absolute:case BA.DssGraphTypeVertical_Area_DualAxis_Stacked:case BA.DssGraphTypeVertical_Area_Percent:case BA.DssGraphTypeHorizontal_Area_Absolute:case BA.DssGraphTypeHorizontal_Area_Stacked:case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Area_Percent:case BA.DssGraphTypeD3_Connect_Group_Areas:case BA.DssGraphTypeD3_Connect_Group_Ribbons:case BA.DssGraphTypeD3_Connect_Series_Areas:case BA.DssGraphTypeD3_Connect_Series_Ribbons:case BA.DssGraphTypeD3_Surface:case BA.DssGraphTypeD3_Surface_with_Sides:case BA.DssGraphTypeD3_Honeycomb_Surface:return 2;default:return 1;}}function w(BV,BT,BL,BR){var BU=BV?BR:BL,BS=BV?BL:BR,BM=BL,BP=true,BN,BQ,BO=AS.call(this,BV,BT);BQ=BO.resizeAction=a.call(this,BV,BU,BS);if(BQ===Ak.KeepBoth){return BO;}if(BL>=0){BO.resetRestrictSpace(this.mUniformAxisSpace);}if(BV){BN=this.isAxisLabelRotated(BV,BT);if(BN){if(!(BQ===Ak.ShrinkX||BQ===Ak.ShrinkY||BQ===Ak.ExpandY)){BM=-1;BP=false;}}else{if(BO.getLabelRotation()===I.FR_NORMAL&&BO.resizeAction===Ak.ExpandX){BM=BR;BP=false;}else{BM=-1;BP=false;}}}BO.updateMaxLabelLength(BM,BP);return BO;}function Aj(){if(this.mUniformAxisSpace===null){this.mUniformAxisSpace={width:0,height:0,x:0,y:0};this.mUniformAxisSpace.width=-1;}}mstrmojo.chart.ChartImpl=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.chart.ChartImpl",mFontAntiAlias:true,mDatasetPtr:null,mFormatManager:null,mChartManagerPtr:null,mOldChartManager:null,mChartContextPtr:null,mInitialized:false,mUniformAxisSpace:null,mUniformAxisPtr:null,mVisualMode:null,init:function Ac(BL){this._super(BL);this.mDatasetPtr=this.mDatasetPtr||BL.DataSet||null;this.mChartContextPtr=this.addDisposable(new Au.GenericContext(BL));this.mFormatManager=this.mFormatManager||BL.FormatManager||null;this.mVisualMode=Af;},SetData:function AO(BM){var BL=this.mDatasetPtr=BM;this.mChartContextPtr.mDataset=BM;BL.SetFormatManager(this.mFormatManager);},GetOptions:function y(BL,BP,BM,BO){var BN,BQ=Ab.create(BL,BP,BM);BN=this.mChartContextPtr.GetProperty(BO,BQ);if(BN){return BN;}switch(BO){case BB.DssGraphAutoArrange:return{Value:this.mChartContextPtr.mManualLayoutMode,IsValid:true};case BB.DssGraphType:case BB.DssGraphEnhancedSeriesEffect:case BB.DssGraphCurvedLines:case BB.DssGraphFontAntiAlias:case BB.DssGraphInfoSuppressLastLevel:case BB.DssGraphInfoIncludeSubtotal:case BB.DssGraphInfoNestedLabel:case BB.DssGraphInfoNestedLabelBracket:case BB.DssGraph2DSplitYAutomatic:case BB.DssGraphAxisNumberFormat:return{Value:this.mChartContextPtr.GetProperty(BO,BQ),IsValid:true};case BB.DssGraph2ScaleDirection:if(BL===BB.DssGraphO1Body){return{Value:this.mDatasetPtr.mReverseGroup,IsValid:true};}break;case BB.DssGraphSeriesByColumn:return{Value:this.mDatasetPtr.mSeriesByColumn,IsValid:true};}return{IsValid:false};},OnRectangleSelection:function n(BM,BN){var BL=[],BP=[],BQ,BR=this.mChartManagerPtr,BO=new Au.Rect2D({x:BM.x,y:BM.y,width:BM.w,height:BM.h});BQ=BR.GetGraphObjectManager(Au.PlotId0);if(!!BQ===false){return BP;}BQ.OnRectangleSelection(BO,BP,BN.outPut);return BP;},SaveImageToObject:function Av(BP,BM,BQ,BL,BO,BN){BP=BP||1014;BM=BM||694;E.call(this,BP,BM);N.call(this);return q.call(this,BP,BM,BQ,BL,BO,BN);},PlainDraw:function J(BL,BM){var BN=this.mChartContextPtr;BL=BL||BN.mGraphWidth;BM=BM||BN.mGraphHeight;return E.call(this,BL,BM);},GetDataGroup:function u(){if(this.mChartContextPtr.mIsGraphMatrix){return this.mDatasetPtr.GetDataGroup();}return 1;},setCanvasProps:function A5(BL){if(this.mChartContextPtr){this.mChartContextPtr.mCanvasInfo=Z.copy(BL,this.mChartContextPtr.mCanvasInfo);}},SetFormatManager:function BD(BL){this.mFormatManager=BL;this.mChartContextPtr.SetFormatManager(BL);this.mDatasetPtr.SetFormatManager(BL);},IsDataEnough:function O(){if(this.mChartContextPtr.mIsGraphMatrix){return true;}var BM,BL;BM=this.mDatasetPtr.GetGroupCount();BL=AB.call(this,this.mChartContextPtr.mGraphType);return BM>=BL;},DrawUniformYAxis:function BJ(BM,BU,BT,BS){var BN=this.mChartContextPtr;BN.startTimer({functionName:"DrawUniformYAxis",purpose:"render uniform Y axis",caller:arguments.caller||"unknown"});BS=BS||{};AT.call(this,false,BM,BU,BT,BS);if(BS.CanSkip){BN.endTimer();return q.call(this,BM,BU,false,false,false,[]);}BT=BS.IsPrimary;var BQ=BN.getUniformAxisContext();if(BS.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(g.call(this,false,BT)===false){BN.endTimer();return q.call(this,BM,BU,false,false,false,[]);}var BR=A3.call(this),BL=Math.round(BS.dataLabelPadding||0),BP=BQ.mDataAreaTopMargin,BV=BU-BP-BQ.mDataAreaBottomMargin,BO=new Au.Rect2D({x:(BT?BM:0),y:BP,width:0,height:BV});if(BL){BO.y=BL;BO.height-=BL;}L.call(this,BO,false,BR,BT);}BN.endTimer();return q.call(this,BM,BU,false,false,false,[]);},DrawUniformXAxis:function U(BM,BV,BT,BS){var BN=this.mChartContextPtr;this.mChartContextPtr.startTimer({functionName:"DrawUniformXAxis",purpose:"render uniform X axis",caller:arguments.caller||"unknown"});BS=BS||{};AT.call(this,true,BM,BV,BT,BS);if(BS.CanSkip){BN.endTimer();return q.call(this,BM,BV,false,false,false,[]);}BT=BS.IsPrimary;var BQ=BN.getUniformAxisContext();if(BS.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(g.call(this,true,BT)===false){BN.endTimer();return q.call(this,BM,BV,false,false,false,[]);}var BR=!AI.call(this),BL=Math.round(BS.dataLabelPadding||0),BW=BQ.mDataAreaLeftMargin,BP=0,BU=BM-BW-BQ.mDataAreaRightMargin,BO=new Au.Rect2D({x:BW,y:(BT?BP:BV),width:BU,height:0});if(BL){BO.width-=BL;}L.call(this,BO,true,BR,BT);}BN.endTimer();return q.call(this,BM,BV,false,false,false,[]);},DrawDataAreaForUniformAxis:function AL(BO,BL,BN){this.mChartContextPtr.startTimer({functionName:"DrawDataAreaForUniformAxis",purpose:"render data area for the mini chart",caller:arguments.caller||"unknown"});if(this.mVisualMode===A2){return q.call(this,BO,BL,false,false,false,[]);}var BQ=this.mChartContextPtr,BM=BQ.getUniformAxisContext();BM.xDataLabelPadding=BN.xDataLabelPadding||0;BM.yDataLabelPadding=BN.yDataLabelPadding||0;BM.mIsAxisTitleAndLabelRequired=false;this.mInitialized=false;BQ.mIsEntireChart=false;this.mChartContextPtr.populateCanvas();E.call(this,BO,BL);N.call(this);BM.xDataLabelPadding=0;BM.yDataLabelPadding=0;BQ.endTimer();var BP=q.call(this,BO,BL,false,false,false,[]);B.call(this,BP);return BP;},GetUniformAxisMargins:function D(){var BN=this.mChartContextPtr,BM=BN.getUniformAxisContext(),BL={LEFT:BM.mDataAreaLeftMargin,RIGHT:BM.mDataAreaRightMargin,TOP:BM.mDataAreaTopMargin,BOTTOM:BM.mDataAreaBottomMargin};return BL;},UpdateUniformAxisMargins:function A9(BM){var BN=this.mChartContextPtr,BL=BN.getUniformAxisContext();if(BM.LEFT){BL.mDataAreaLeftMargin=BM.LEFT;}if(BM.RIGHT){BL.mDataAreaRightMargin=BM.RIGHT;}if(BM.TOP){BL.mDataAreaTopMargin=BM.TOP;}if(BM.BOTTOM){BL.mDataAreaBottomMargin=BM.BOTTOM;}},GetUniformAxisLabelsInfo:function BH(BN,BO,BM){var BL=AS.call(this,BN);if(BL){return BL.getUniformAxisLabelsInfo(BM);}return[];},GetPositionAtTick:function x(BP,BL,BS){var BM=this.mChartContextPtr,BY,BO,BV,BX;if(!BM.mIsGraphMatrix){return 0;}var BR=BM.getUniformAxisContext();if(!BR){return 0;}var BN=this.mUniformAxisPtr;if(BN){var BU=BN.mTripleId.mObjectId;if(BG.call(this,BU)){var BW=BN.mDeviceDataArea;if(!BN.GetTrimWithPadding()){var BT=new Au.Rect2D();if(BL){BY=BR.mDataAreaLeftMargin;BO=0;BV=BS-BY-BR.mDataAreaRightMargin;BT.Reset(BY,BO,BV,0);}else{BY=0;BO=BR.mDataAreaTopMargin;BX=BS-BO-BR.mDataAreaBottomMargin;BT.Reset(BY,BO,0,BX);}BN.TrimAxisPadding(BT,false);BN.SetDeviceDataArea(BT);BN.SetTrimWithPadding(false);}var BQ=BN.GetPositionAtTick(BP);BN.SetDeviceDataArea(BW);return BQ;}}return 0;},getZeroLineInfo:function AX(BP,BO,BN){var BM={};BM.Qualified=this.IsZeroBaseLineQualified(BP,BO);if(BM.Qualified){var BL=this.mUniformAxisPtr;if(BL===null||BL===undefined){this.mUniformAxisPtr=AS.call(this,BP,BO);}BM.Position=this.GetPositionAtTick(0,BP,BN);BM.Shapes=this.mDatasetPtr.GetShapesDistributionByValueAxis();}else{BM.Position=-1;BM.Shapes={};}return BM;},IsZeroBaseLineQualified:function k(BT,BR){BT=BT||false;if(BR===undefined){BR=true;}this.useOriginFormatForZeroLine=false;var BM=this.mChartContextPtr;if(!BM.mIsGraphMatrix){return false;}if(BM.IsBarChart()===false&&BM.IsLineChart()===false&&BM.IsAreaChart()===false){return false;}var BO=this.mUniformAxisPtr;if(BO){var BS=BO.mTripleId.mObjectId;if(BG.call(this,BS)){if(BO.isBaseLineQualified()){return true;}else{if(BM.isCombinationChart()===false){return false;}if(BO.liftedFromZero()){var BU=this.mDatasetPtr.GetShapesDistributionByValueAxis();var BL=BU.Primary;if(BR&&BL&&(BL.BAR&&BL.BAR.length||BL.AREA&&BL.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}BL=BU.Secondary;if(!BR&&BL&&(BL.BAR&&BL.BAR.length||BL.AREA&&BL.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}}}}}else{var BN,BQ=BM.getUniformAxisContext();if(BQ.ValueAxis){if(BR){BN=BT?"X1":"Y1";}else{BN=BT?"X2":"Y2";}var BP=BQ.ValueAxis[BN];if(BP){return BP.Min<0&&BP.Max>0;}}}return false;},GetAxisLabelRotation:function A6(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}var BL=this.mUniformAxisPtr;if(BL===null){return false;}return BL.getLabelRotation();},GetShownNumericTicks:function AD(BL){var BN=this.mChartContextPtr;if(BN.mIsGraphMatrix){var BM=BN.GetGraphMatrixContext();return BL?BM.mShownValueTickSet[0]:BM.mShownValueTickSet[1];}},SetShowNumericTicks:function o(BN,BL){var BO=this.mChartContextPtr;if(BO.mIsGraphMatrix){var BM=BO.GetGraphMatrixContext();if(BL){BM.mShownValueTickSet[0]=BN;}else{BM.mShownValueTickSet[1]=BN;}}},refreshChartComponents:function AM(BN){var BO=this.mChartContextPtr,BR=BO.IsVertical(),BU=BO.IsGridChart(),BY=BO.IsBarChart()||BO.IsAreaChart()||BO.IsLineChart(),BP=BO.IsBubbleChart()||BO.IsScatterChart();var BW=BN.size;if(BW){BO.SetGraphSize(BW.w,BW.h);}var Bd=BN.dataProvider;if(Bd){this.mDatasetPtr.refresh(Bd);}var BZ="Y1",Bb,BL=this.mChartManagerPtr,BM;var BQ=BN.plot;if(BQ){var Bc={mObjectId:20002,mSeriesId:0,mGroupId:-3};var Ba=BL.GetGraphObjectManager(Bc);if(Ba){Ba.refresh(BN.purpose,BQ);}}var BS=BN.primaryValueAxis;if(BS){if(BY&&!BR){BZ="X1";}Bb=BO.getAxisTripleId(BZ);BM=BL.GetGraphObjectManager(Bb);if(BM){BM.refresh(BN.purpose,BS);}}BZ="X1";var BX=BN.secondaryValueAxis;if(BX){if(BP){BZ="X1";}Bb=BO.getAxisTripleId(BZ);BM=BL.GetGraphObjectManager(Bb);if(BM){BM.refresh(BN.purpose,BX);}}BZ="O1";var BV=BN.primaryCategoryAxis;if(BV){Bb=BO.getAxisTripleId(BZ);BM=BL.GetGraphObjectManager(Bb);if(BM){BM.refresh(BN.purpose,BV);}}var BT=BN.secondaryCategoryAxis;if(BT){}},GetDataAreaPadding:function BI(){var BN=this.mChartContextPtr,Bg=BN.GetGraphMatrixContext(),BV={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},Be,Bd;if(!BN.mIsGraphMatrix){return BV;}var Bh=function(Bm){var Bl=0;Bm.forEach(function(Bn){Bl+=Bn;});return Bl;};var BU;var BM;if(Bg.isCombinationChart()){var Bb=this.mDatasetPtr.GetSeriesByShape(),BP=0,BR=0,BW=0,Bk=0,Ba=0;if(Bb.Circle){BR=Bb.Circle.length;}if(Bb.Square){BW=Bb.Square.length;}if(Bb.Line){Ba=Bb.Line.length;}if(Bb.Area){Bk=Bb.Area.length;}if(Bb.Bar){BP=Bb.Bar.length;}BU=this.mDatasetPtr;BM=BU.GetDiscreteSeries();if(!(BR>0||BW>0||(Bg.mHasSizeBy&&Ba>0)||(!Bg.mHasSizeBy&&(Ba>0||Bk>0)&&BM.length>0&&(AY.HasArrayIntersection(BM,Bb.Line)||AY.HasArrayIntersection(BM,Bb.Area))))){return BV;}if(BP===BU.GetSeriesCount()){return BV;}}else{if(BN.IsBarChart()||BN.mGraphType===BA.DssGraphTypeGridChart||(Bg.mMarkerShape===200&&BN.IsBubbleChart()===false&&BN.IsScatterChart()===false)){return BV;}}var Bf=BN.IsAreaChart()||BN.IsLineChart(),Bi=Bg.isCombinationChart()===false;if(Bi===false){Bi=Bh([BP,Bk,Ba,BW,BR])<=1;}if(Bi&&BN.GetGraphMajorType()===As.GMT_CATEGORY){var BX=2;BU=this.mDatasetPtr;BM=BU.GetDiscreteSeries();if(Bg.mHasSizeBy===false&&(!(Bf&&BM.length>0)||(Bf&&BU.GetGroupCount()<=1&&BU.GetSeriesCount<=1))){var BQ=this.GetMaxElementRadius(BN.mGraphWidth,BN.mGraphHeight);if(BN.IsLineChart()){BQ=Math.max(BQ,BX);}BV.Y1.LowOffset=BV.Y1.HighOffset=BV.Y2.LowOffset=BV.Y2.HighOffset=BQ;BV.X2.LowOffset=BV.X2.HighOffset=BQ;BV.X1.LowOffset=BV.X1.HighOffset=BQ;return BV;}}var BS=true;if(BS){if(BN.IsScatterChart()){BQ=this.GetMaxElementRadius(BN.mGraphWidth,BN.mGraphHeight);BV.Y1.LowOffset=BV.Y1.HighOffset=BV.Y2.LowOffset=BV.Y2.HighOffset=BQ;BV.X2.LowOffset=BV.X2.HighOffset=BQ;BV.X1.LowOffset=BV.X1.HighOffset=BQ;return BV;}}var BY=BN.getUniformAxisContext();BY.mIsAxisTitleAndLabelRequired=false;BN.mImageUsage=AU.OBJECT_CLIP_COMPUTATION;E.call(this,BN.mGraphWidth,BN.mGraphHeight);BN.mImageUsage=AU.GENERAL;var Bc=Au.PlotId0,Bj=this.mChartManagerPtr.GetGraphObjectManager(Bc);if(!Bj){return BV;}var BO;for(Be=0;Be<2;++Be){for(Bd=0;Bd<2;++Bd){var BT=Be===0,BZ=Bd===0,BL=BT?(BZ?"X1":"X2"):(BZ?"Y1":"Y2");BO=Bj.GetMaxElementOffsetClippedByBoundary(BT,BZ);BV[BL].LowOffset=BO.LowOffset;BV[BL].HighOffset=BO.HighOffset;}}return BV;},GetUniformYAxisWidth:function Ah(BW,BL,BV){this.mChartContextPtr.startTimer({functionName:"GetUniformYAxisWidth",purpose:"Create uniform Y axis instance and do axis layout",caller:arguments.caller||"unknown"});Aj.call(this);var BU={};A7.call(this,false,BL,BV,BU);if(BU.CanSkip){return 0;}BL=BU.MaxLabelLength;BV=BU.IsPrimary;var BN=this.mChartContextPtr,BQ=BN.mDataset,BS=BN.getUniformAxisContext(),BT=A3.call(this),BX,BP,BY,BR=900,BO;AH.Reset(Y,Y,BW,BW-A4.call(this)*Y);BN.SetGraphSize(BW,BW-A4.call(this)*Y);BP=w.call(this,false,BV,BL,BW);if(BP.resizeAction===Ak.KeepBoth){return this.mUniformAxisSpace.width;}AH.width=Math.max(AH.width,0);AH.height=Math.max(AH.height,0);if(BP.restrictWidth===-1){AH.width=Math.max(AH.width,BR);}else{AH.width=Math.min(BP.restrictWidth,BR);}BO=AH.width;AN.call(this,AH,BT,BP,true);var BM=BQ.showDatalabels();if(!BT&&BM){this.AdjustingAxisPaddingForDataLabel(AH,false,BW,BW);}Ae.call(this,BS,AH,BW,BL,false,BV);BX=0;this.mUniformAxisPtr=BP;if(BV){BY=AH.x+BX;}else{BY=BO-(AH.x+AH.width)-Y+BX;}if(this.mUniformAxisSpace.width===-1){BP.restrictWidth=this.mUniformAxisSpace.width=BY;}BK.call(this);BN.endTimer();return Math.max(BY,0);},GetUniformXAxisHeight:function j(BN,BL,BV){this.mChartContextPtr.startTimer({functionName:"GetUniformXAxisHeight",purpose:"Create uniform X axis instance and do axis layout",caller:arguments.caller||"unknown"});Aj.call(this);var BU={};A7.call(this,true,BL,BV,BU);if(BU.CanSkip){return 0;}BL=BU.MaxLabelLength;BV=BU.IsPrimary;var BO=this.mChartContextPtr,BQ=BO.mDataset,BR=BO.getUniformAxisContext(),BT=!AI.call(this),BS=400,BM,BW,BP,BX;AH.Reset(0,0,BN,BS);BO.SetGraphSize(BN,BS);BP=w.call(this,true,BV,BL,BN);if(BP.resizeAction===Ak.KeepBoth){return this.mUniformAxisSpace.height;}AN.call(this,AH,BT,BP,true);BM=BQ.showDatalabels();if(!BT&&BM){this.AdjustingAxisPaddingForDataLabel(AH,true,BN,BV);}Ae.call(this,BR,AH,BN,BL,true,BV);BW=0;this.mUniformAxisPtr=BP;if(BV){BX=BS-(AH.y+AH.height)-Y+BW;}else{BX=AH.y;}if(this.mUniformAxisSpace.height===-1){BP.restrictHeight=this.mUniformAxisSpace.height=BX;}BK.call(this);BO.endTimer();return Math.max(BX,0);},UpdatePartialRenderingWindow:function G(BM,BN,BL){BM=BM||false;var BO=this.mChartContextPtr;if(BO.IsScatterChart()||BO.IsBubbleChart()){BO.mPartialRendering=BM;}else{BO.mPartialRendering=BM&&(BN!==undefined);if(BO.mPartialRendering){BO.mPartialRendering=BO.mPartialRendering&&(BN.x!==undefined&&BN.y!==undefined&&BN.width!==undefined&&BN.height!==undefined);}}if(BO.mPartialRendering){if(BO.mRenderingWindow===null){BO.mRenderingWindow={};}if(BN){Z.copy(BN,BO.mRenderingWindow);}}else{BO.mRenderingWindow=null;}if(BL!==undefined){if(BO.mPartialRendering){this.mVisualMode=BL;}else{this.mVisualMode=Af;}}},updateUniformXAxisLayout:function A(BO){var BM=BO,BL=this.mChartContextPtr.getUniformAxisContext(),BR=BL.CategoryAxis.X,BN=1,BQ=2,BP=3,BS=4;BR.Layout=BM.Layout;if(BM.Layout===BS){BR.Layout=BN;BR.ForbideStagger=true;}else{if(BM.Layout===BP){BR.ForbideStagger=true;}else{BR.ForbideStagger=false;}}BR.StartRow=0;if(BR.Layout===BQ){BR.StartRow=BM.StartRow;}if(BM.LabelWidthLimit!==undefined){BR.LabelWidthLimit=BM.LabelWidthLimit;}BR.EnforceCluster=(!!BM.EnforceCluster)||BR.EnforceCluster;BR.EnforceFringe=(!!BM.EnforceFringe)||BR.EnforceFringe;},updateUniformAxisLabelRotation:function A1(BP,BN){if(BN===undefined){BN=-1;}var BM={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};var BO=this.mChartContextPtr,BL=BO.getUniformAxisContext();if(BN===-1){if(BP===undefined){return ;}switch(BP){case BM.NORMAL:case BM.STAGGER:BL.mLabelRotation.X1=I.FR_AUTOMATIC;break;default:BL.mLabelRotation.X1=I.FR_90;break;}}else{if(BN===2){BL.mLabelRotation.X1=I.FR_90;}else{BL.mLabelRotation.X1=I.FR_NORMAL;}}},EnableUniformAxis:function V(BR,BN){BN=BN||false;var BS=this.mChartContextPtr,BZ=BS.getUniformAxisContext(),Bh=BZ.ValueAxis,Bf,BO,Be=Bh.X1,Bd=Bh.X2,BV=Bh.Z,BQ=Bh.Y1,BP=Bh.Y2;Bf=AY.isValidNumber(BR.YMinValue);BO=AY.isValidNumber(BR.YMaxValue);BQ.Valid=Bf&&BO;BQ.Min=parseFloat(Bf?BR.YMinValue:0);BQ.Max=parseFloat(BO?BR.YMaxValue:0);BQ.CustomScale=(BR.YCustomScale!==undefined)?BR.YCustomScale:false;BQ.CondenseLabel=(BR.YCondenseLabel!==undefined)?BR.YCondenseLabel:{};BQ.CondenseEnforced=BR.YCondenseEnfored||false;BQ.AutoMin=BR.YAutoMin;BQ.AutoMax=BR.YAutoMax;Bf=AY.isValidNumber(BR.Y2MinValue)||AY.isValidNumber(BR.X2MinValue);BO=AY.isValidNumber(BR.Y2MaxValue)||AY.isValidNumber(BR.X2MaxValue);BP.Valid=Bf&&BO;BP.Min=parseFloat(AY.isValidNumber(BR.Y2MinValue)?BR.Y2MinValue:(AY.isValidNumber(BR.X2MinValue)?BR.X2MinValue:0));BP.Max=parseFloat(AY.isValidNumber(BR.Y2MaxValue)?BR.Y2MaxValue:(AY.isValidNumber(BR.X2MaxValue)?BR.X2MaxValue:0));BP.CustomScale=(BR.Y2CustomScale!==undefined)?BR.Y2CustomScale:((BR.X2CustomScale!==undefined)?BR.X2CustomScale:false);BP.CondenseLabel=(BR.Y2CondenseLabel!==undefined)?BR.Y2CondenseLabel:(BR.X2CondenseLabel!==undefined?BR.X2CondenseLabel:{});BP.CondenseEnforced=BR.Y2CondenseEnfored||BR.X2CondenseEnfored||false;BP.AutoMin=BR.Y2AutoMin;BP.AutoMax=BR.Y2AutoMax;Bf=AY.isValidNumber(BR.XMinValue);BO=AY.isValidNumber(BR.XMaxValue);Be.Valid=Bf&&BO;Be.Min=parseFloat(Bf?BR.XMinValue:0);Be.Max=parseFloat(BO?BR.XMaxValue:0);Be.CustomScale=(BR.XCustomScale!==undefined)?BR.XCustomScale:false;Be.CondenseLabel=(BR.XCondenseLabel!==undefined)?BR.XCondenseLabel:{};Be.CondenseEnforced=BR.XCondenseEnfored||false;Be.AutoMin=BR.XAutoMin;Be.AutoMax=BR.XAutoMax;Bf=AY.isValidNumber(BR.X2MinValue);BO=AY.isValidNumber(BR.X2MaxValue);Bd.Valid=Bf&&BO;Bd.Min=parseFloat(Bf?BR.X2MinValue:0);Bd.Max=parseFloat(BO?BR.X2MaxValue:0);Bd.CustomScale=(BR.X2CustomScale!==undefined)?BR.X2CustomScale:false;Bd.CondenseLabel=(BR.X2CondenseLabel!==undefined)?BR.X2CondenseLabel:{};Bd.CondenseEnforced=BR.X2CondenseEnfored||false;Bd.AutoMin=BR.X2AutoMin;Bd.AutoMax=BR.X2AutoMax;BV.Min=parseFloat(AY.isValidNumber(BR.ZMinValue)?BR.ZMinValue:0);BV.Max=parseFloat(AY.isValidNumber(BR.ZMaxValue)?BR.ZMaxValue:0);BV.CustomScale=(BR.ZCustomScale!==undefined)?BR.ZCustomScale:false;BV.AutoMin=BR.ZAutoMin;BV.AutoMax=BR.ZAutoMax;BZ.mGraphHeight=(BR.GraphHeight!==undefined)?BR.GraphHeight:0;if(BN){return ;}BS.mIsUniformAxisMode=true;BS.mIsGraphMatrix=true;if(BR.XMetrics){Be.Metrics.splice(0,Be.Metrics.length);Be.Metrics=Be.Metrics.concat(BR.XMetrics);}if(BR.YMetrics){BQ.Metrics.splice(0,Bh.Y1.Metrics.length);BQ.Metrics=Bh.Y1.Metrics.concat(BR.YMetrics);}if(BR.Y2Metrics){BP.Metrics.splice(0,BP.Metrics.length);BP.Metrics=BP.Metrics.concat(BR.Y2Metrics);}if(BR.X2Metrics){Bd.Metrics.splice(0,Bd.Metrics.length);Bd.Metrics=Bd.Metrics.concat(BR.X2Metrics);}if(BR.ZMetrics){BV.Metrics.splice(0,BV.Metrics.length);BV.Metrics=BV.Metrics.concat(BR.ZMetrics);}if(BR.LabelPlacement!==undefined){this.updateUniformAxisLabelRotation(BR.LabelPlacement,BR.xAxisRotateMode);}if(BR.XCategoryAxis){var Bg=BR.XCategoryAxis,Bb=BZ.CategoryAxis.X,BT=3;Bb.Truncation={Idices:[],Texts:[]};if(Bb.Layout!==BT){Bb.Truncation.Idices=BR.TruncatedIdices;Bb.Truncation.Texts=BR.TruncatedTexts;}this.updateUniformXAxisLayout(Bg);}if(BR.YCategoryAxis){var BY=BR.YCategoryAxis;var BU=BZ.CategoryAxis.Y;if(BY.LabelWidthLimit!==undefined){BU.LabelWidthLimit=BY.LabelWidthLimit;}BU.EnforceCluster=(!!BY.EnforceCluster)||BU.EnforceCluster;BU.EnforceFringe=(!!BY.EnforceFringe)||BU.EnforceFringe;}if(BS.IsScatterChart()||BS.IsBubbleChart()){var Bc=BS.GetGraphMatrixContext(),Ba=Bc.AxisLayout;if(Ba===null||Ba===undefined){return ;}var BM=1,BX=2,BW=4,BL=8;if(!!(Ba&BW)){BQ.Min=parseFloat((BR.Y2MinValue!==undefined)?BR.Y2MinValue:0);BQ.Max=parseFloat((BR.Y2MaxValue!==undefined)?BR.Y2MaxValue:0);BQ.CustomScale=(BR.Y2CustomScale!==undefined)?BR.Y2CustomScale:false;BQ.CondenseLabel=(BR.Y2CondenseLabel!==undefined)?BR.Y2CondenseLabel:{};BQ.Metrics.splice(0,BQ.Metrics.length);BQ.Valid=BP.Valid;if(BR.Y2Metrics){BQ.Metrics=BQ.Metrics.concat(BR.Y2Metrics);}BP.Metrics.splice(0,BP.Metrics.length);}if(!!(Ba&BL)){Be.Min=parseFloat((BR.X2MinValue!==undefined)?BR.X2MinValue:0);Be.Max=parseFloat((BR.X2MaxValue!==undefined)?BR.X2MaxValue:0);Be.CustomScale=(BR.X2CustomScale!==undefined)?BR.X2CustomScale:false;Be.CondenseLabel=(BR.X2CondenseLabel!==undefined)?BR.X2CondenseLabel:{};Be.Metrics.splice(0,Be.Metrics.length);Be.Valid=BP.Valid;if(BR.X2Metrics){Be.Metrics=Bh.Y1.Metrics.concat(BR.X2Metrics);}BP.Metrics.splice(0,BP.Metrics.length);}}},AdjustingAxisPaddingForDataLabel:function d(BT,BN,BR,BS){var BL=this.mChartContextPtr,BM=BL.getValueAxisKeyFromLayout(BN,BS),BO;var BQ=BL.getAxisTripleId(BM);BO=BL.getUniformAxisInformation(BQ.mObjectId);var BV=BO.Metrics||[];var BU=BL.GetProperty(Ax.DSSGraphMatrixUseCustomMinMax,BQ),BP;if(BU){BP=BU;if(BP){return false;}}if(BN){return A8.call(this,BT,BV,BR,BS);}return P.call(this,BT,BV,BR,BS);},ShouldRotateDataLabel:function Ag(BM,BV){var BN=this.mChartContextPtr,BP=this.mDatasetPtr,BS=BP.showDatalabels(),BT=BN.GetGraphMatrixContext();var BU=false;if(BS){BU=BN.IsBarChart();if(!BU&&BN.isCombinationChart()){var BL=BP.GetSeriesByShape().Bar,BO=BP.GetSeriesCount();BU=(BL.length===BO);if(!BU&&BL.length){BU=true;for(var BQ=0;BQ<BO;BQ++){if(BL.indexOf(BQ)===-1&&BP.showSeriesDatalabel(BQ)){BU=false;break;}}}}}if(BU){this.mInitialized=false;var BR=BN.getUniformAxisContext();BR.mIsAxisTitleAndLabelRequired=false;BN.mIsEntireChart=false;E.call(this,BM,BV);}return{Rotation:BT.mIsNeedRotateDataLabel,Adjust:BU};},ShouldAdjustValueAxis:function M(BN,BL,BO,BM){return false;},GetMaxElementRadius:function AZ(BM,BY,BT){var BN=this.mChartContextPtr,BS=BN.GetGraphMatrixContext(),BL=BN.GetGraphType(),BQ=BN.GetGraphMatrixGraphMajorType(),BX=this.mDatasetPtr.GetGroupCount(),BU;BT=BT||false;switch(BQ){case l._GRID:case l._SCATTER:case l._BUBBLE:return BS.GetMaxMarkerSize(Ao._SHAPES_IN_BUBBLESCATTER,false,BX,BS.mHasSizeBy);case l._AREA:BU=((BL>=BA.DssGraphTypeVertical_Area_Absolute&&BL<=BA.DssGraphTypeVertical_Area_Percent));return BS.GetMaxElementSizeInAreaChart(BU,BX);case l._LINE:BU=((BL>=BA.DssGraphTypeVertical_Line_Absolute&&BL<=BA.DssGraphTypeVertical_Line_Percent));if(BS.isCombinationChart()){var BW=0,BV=0,BR=0,BP=4,BO=this.mDatasetPtr.GetSeriesByShape();if(BO.Line&&BO.Line.length>0){BW=BS.GetMaxElementSizeInLineChart(BU,BX,false,BR);}if((BO.Circle&&BO.Circle.length>0)||(BO.Square&&BO.Square.length>0)){BV=BS.GetMaxElementSizeInLineChart(BU,BX,true,BP);}return Math.max(BW,BV);}return BS.GetMaxElementSizeInLineChart(BU,BX);case l._PIE:if(this.mDatasetPtr){BX*=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);}BU=this.mChartContextPtr.IsVertical();return BS.GetMaxMarkerSize(Ao._PIE,BU,BX,BS.mHasSizeBy);case l._BAR:return 0;default:break;}return 0;},setGraphType:function AF(BL){this.mGraphType=this.mChartContextPtr.mGraphType=BL;},setThemeType:function h(BL){this.mChartContextPtr.mThemeType=BL;},getCondenseStatus:function c(){var BM,BL=this.mUniformAxisPtr;if(BL){BM=BL.mCondenseLabels;}return BM;},enableCondense:function Aq(BM,BL){var BN=this.mUniformAxisPtr;if(BN){BN.checkCondense(BM,BL);}},isAxisLabelRotated:function AA(BN,BO){var BM=this.mUniformAxisPtr;if(BM===null){return false;}var BL=BM.getLabelRotation();return BL===I.FR_90;},liftedFromZero:function BF(){if(this.mUniformAxisPtr){if(this.mMinTick!==undefined){return this.mMinTick===0&&this.mLowTrim>0;}}return false;},configureChart:function Ar(BL){var BN=this.mChartContextPtr;BN.mIsUniformAxisMode=true;BN.mIsGraphMatrix=true;if(BL.ThemeType){this.setThemeType(BL.ThemeType);}if(BL.Usage){BN.mImageUsage=BL.Usage;}if(BL.Timer!==undefined){BN.mUseTimer=BL.Timer||false;}if(BN.mImageUsage===AU.BANNER){return ;}var BM;BM=BL.isABL&&BL.Extremes&&((BL.Extremes.X2Metrics&&BL.Extremes.X2Metrics.length)||(BL.Extremes.Y2Metrics&&BL.Extremes.Y2Metrics.length));if(BL.GraphType){if(BM){BL.GraphType=BN.mapGraphTypeToDualAxis(BL.GraphType);}if(BL.ShapeType){this.setGraphType(b.call(this,BL.GraphType,BL.ShapeType));}else{this.setGraphType(BL.GraphType);}}if(BL.GraphSize){BN.SetGraphSize(BL.GraphSize.W,BL.GraphSize.H);}if(BL.Extremes){this.EnableUniformAxis(BL.Extremes,false);}if(BL.OutputType){BN.mImageFormat=BL.OutputType;}t.call(this,BL);z.call(this,BL);},resetCanvas:function Ap(){var BL=this.mChartContextPtr;BL.resetCanvas();},updateUniformAxis:function s(BO){var BN=this.mUniformAxisPtr,BM=BN.mDeviceDataArea.width,BL=BN.mDeviceDataArea.height;if(!BN){return q.call(this,BM,BL,false,false,false,[]);}if(BO.Redraw){BN.Draw();}return q.call(this,BM,BL,false,false,false,[]);},getUniformAxisBanding:function AC(){var BL=true,BM=this.mUniformAxisPtr;if(BL&&BM){return BM.getBandings();}return[];},getUniformAxisGridLinePosition:function K(BM){var BL=true,BN=this.mUniformAxisPtr;if(BL&&BN){return BN.getGridLinePosition(BM);}return[];},echoCondenseStatus:function T(BO,BM){var BN=this.mUniformAxisPtr;if(BN===null){return ;}var BL=BN.getCondenseStatus();if(BL!==undefined){BO[BM]=BL;}},echoLayoutPaddings:function A0(BN,BL){var BM=this.mUniformAxisPtr;if(BM===null){return ;}BN[BL]=BN[BL]||{};BN[BL].HighOffset=this.mAxisLayoutHighPadding||0;BN[BL].LowOffset=this.mAxisLayoutLowPadding||0;},UpdateValueAxisPadding:function Am(BM){var BL=this.mChartContextPtr.GetGraphMatrixContext();BL.UpdateValueAxisPadding(BM);},getUniformAxisTrims:function Ai(BM,BN){var BL=(BM&&AI.call(this)===false)||(!BM&&A3.call(this));if(BL){return Aw.call(this,BM);}else{return AE.call(this);}},getUniformAxisFormat:function R(){var BL=this.mUniformAxisPtr;if(!!BL){if(BL.mCondenseLabels){return"Condensed";}if(BL.mNumberFormat){return BL.mNumberFormat.mCustomFormat;}}return undefined;},formatAsUniformAxisLabel:function p(BL){if(!!this.mUniformAxisPtr===false){return undefined;}return this.mUniformAxisPtr.formatAsLabel(BL);},getAxisPadding:function e(BO){var BM=0,BP=1,BN=2;if(BO===BM){return{L:0,H:(this.mUniformAxisPtr&&this.mUniformAxisPtr.dataLabelPadding||0)};}else{if(BO===BP){var BL=this.mAxisLayoutLowPadding||0;var BQ=this.mAxisLayoutHighPadding||0;return{L:BL,H:BQ};}else{return{L:0,H:0};}}},getStatistics:function X(BM){var BU={},Ba,BW,Bb,BN,BR=0,BY,BX;Ba=Au.PlotId0;switch(BM.Type){case BR:var BV=0,BO=this.mChartContextPtr,BT=this.mDatasetPtr;var BZ=BT.GetSeriesCount(),BL=BT.GetGroupCount();BU.Total=BZ*BL;if(BO.IsScatterChart()||BO.IsBubbleChart()){BW=this.mChartManagerPtr.GetGraphObjectManager(Ba);if(BW){Bb=BW.mGraphObjectList;BN=Bb.length;for(BY=0;BY<BN;++BY){if(Bb[BY].mTripleId.mObjectId===BC.DssGraphRiser){BV++;}}BU.Displayed=BV;}}else{if(BO.IsBarChart()||BO.IsAreaChart()||BO.IsLineChart()||BO.IsGridChart()){if(BT.endSeries!==-1||BT.endGroup!==-1){var Bd=Math.max(BT.startSeries,0),BQ=Math.max(BT.startGroup,0),BS=BT.endSeries===-1?BZ:BT.endSeries,BP=BT.endGroup===-1?BL:BT.endGroup;BU.Displayed=(BP-BQ)*(BS-Bd);}else{BW=this.mChartManagerPtr.GetGraphObjectManager(Ba);if(BW){var Bc=[BW.AreaSeriesRenderer,BW.mBarSeriesRendererPtr,BW.mLineSeriesRendererPtr];for(BX=0;BX<Bc.length;++BX){if(Bc[BX]){Bb=Bc[BX].mGraphObjectList;BN=Bb.length;for(BY=0;BY<BN;++BY){if(Bb[BY].mTripleId.mObjectId===BC.DssGraphRiser){BV++;}}}}BU.Displayed=BV;}}}}break;default:break;}return BU;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.FormatManager","mstrmojo.chart.DataSetImpl","mstrmojo.chart.ChartImpl","mstrmojo.chart.CEModuleMain");var B=mstrmojo.chart,D=B.common;mstrmojo.chart.MsiChart=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.MsiChart",mUniversalProperty:null,createFormatManager:function E(L,H){var M,J,G;if(H.map&&H.map.gpp){M=H.map.gpp;}else{M=new D.MapStructure();var K;if(L){G=L.gp.length;for(J=0;J<G;++J){K=L.gp[J];M.push([-3,K.gsid,K.goid,K.gaid],K.v);}}H.map=H.map||{};H.map.gpp=M;}var I=new B.FormatManager({GraphPropertyMap:M});return I;},createDataSet:function C(G){return new B.DataSetImpl(G);},createChartFromFormatManager:function A(J,I,G,K){B.gModuleMain.ResetGraphObjectMap();this.mUniversalProperty=this.mUniversalProperty||{};var H=new B.ChartImpl({mDatasetPtr:J,mFormatManager:I,GDFFile:G,UseTimer:K});H.mChartContextPtr.globalFormats=this.mUniversalProperty;return H;},setController:function F(G){B.gModuleMain.setController(G);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.string","mstrmojo.Obj","mstrmojo.Box","mstrmojo.Label","mstrmojo.Table","mstrmojo.VisEnum","mstrmojo.VisAxisLabel","mstrmojo.VisUtility","mstrmojo.PageNavigationPanel","mstrmojo._CanSupportTransaction","mstrmojo._Formattable","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.vi.viz.EnumDSSDropZones");mstrmojo.requiresClsP("mstrmojo.gm","GMEnums","TrendLineModel","GMDataModel","VecDrawer","GMUtility","GMIdentities","GMAxisScale");mstrmojo.requiresClsP("mstrmojo.chart","DataSetImpl","ChartImpl","MsiChart");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var As=100,h=100;var f=mstrmojo,B3=f.VisUtility,Ba=f.css,Ao=f.hash,Bx=f.array,A3=f.string,B7=f.chart,B4=B7.model,A2=B4.enums,v=mstrmojo.mstr.EnumDSSXMLObjectTypes,AR=mstrmojo.gm.EnumTrendLineModelType,BV=f.gm,A0=BV.GMAxisScale,BX=BV.EnumTrendRefModelLabels,l=BV.GMUtility,Bf=BV.EnumSelectionOptionLevel,C=f.num,B5=BV.EnumABLDirection,F=BV.EnumContextMenu,BW=f.VisEnum.ControlType,B8=f.vi.viz.EnumDSSDropZones,BH=BV.EnumColorByType,L=BV.EnumDrawingAPI,Af=BV.EnumXAxisLabelStatus,B9=BV.EnumABLDirection,Ai=BV.EnumShape,B=BV.EnumAxis,BS=A2.EnumDSSGraphType,AO=BV.EnumFitTo,Bl=BV.EnumAxisType,B1=BV.EnumGraphType,BK=BV.EnumSizeByType,BD=BV.EnumAxis,AY=BV.EnumTheme,AG=BV.EnumMetricsPosition,k=B7.common.Utility,Bz=BV.EnumShape,BL=BV.EnumSubtype,Bm=BV.EnumAxisScale,Ak=BV.EnumMaxSizeType,Bq=BV.EnumMinSizeType,b=BV.EnumIdentityType,AW=BV.WidgetPropertyTag,BJ=BV.FormatingPropertyTag,AV=BV.EnumRefLineModelType,CB=BV.StackExetrmeId,Y=BV.DualAxisSubAxisBit,A4=false,Bs="00000000000000000000000000000000",AM=0,An="_tmsp",AU=0,Au=-20,w=0,H=5,r=5,S=2,CI=0,A9=1,x=3,e=0,BY=16,Az=32,Br=1,A8=2,Bg=4,P=8,A6=["MAX","MIN","AVG","MED","FIRST","LAST","CONST"],BP=[mstrmojo.desc(5417,"Max"),mstrmojo.desc(5416,"Min"),mstrmojo.desc(12151,"Avg"),mstrmojo.desc(12152,"Med"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(12153,"Const")],E={isZeroPadding:true,X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},I={x:{first:"top",second:"bottom"},y:{first:"right",second:"left"}},p=[16756758,2701311,2275844,956159,14580142,2477516,14732825,11119017,15715763,9873407,9101208,8437759,15516634,9494752,15392673,14079702],Bn=[11826975,1381846,1810715,950271,12407690,2276796,13614615,8355711,15255470,9869567,9101208,7912447,14004421,9296859,15063710,13092807];mstrmojo.requiresDescs(2058,2460,12091,12092);var Bk=[2,9,16,23,30,37];var Aa=[7,14,21,28,35,42];var Ah=l.filterInValidMetricIndex,Z=l.getOptionObjArr;function Ac(CL){var CM=true,AS;for(AS in CL){if(CL.hasOwnProperty(AS)){CM=false;break;}}return CM;}function AB(CL,CP){var CQ=false,AS=["XAxis","YAxis"],CN=AS.length,CM,CO;for(CO=0;CO<CN;CO++){CM=CL&&CL[AS[CO]];if(CM){CQ=!Ac(CM);if(CQ){break;}}}return CQ||CP.isPie;}function j(){this.rwHdrSmrs=[];this.colHdrSmrs=[];delete this.mulAttsOnAxisForABL;delete this.ttlDispTp;delete this.chartInfo;delete this.defaultsForShape;delete this.rowHeaderCnt;delete this.colHeaderCnt;delete this.model;delete this.isPie;this.splitPlottingMetrics=undefined;this.metricInfos={};this.sharedPool={};this.metricSelectionInfo={};this.attributeSelectionInfo={};this.axisScaleCache=null;}function CK(AS,CR){var CM=this.getChartInfo();if(!CM.isABL){this.removeGroupInfo();}var CQ=(CR===1||CR===8)||(CR===15||CR===22)||(CR===29||CR===36)||(CR===91||CR===92);if(CQ){var CO;var CS=AS.dz,CN=CS.XAxis,CL=CS.YAxis,CP=CS.BreakBy;if(CM.dirc===BV.EnumABLDirection.VERTICAL){CO=this.getMetricsOnYAxis();}else{CO=this.getMetricsOnXAxis();}if(CO.length>1){if(CM.dirc===BV.EnumABLDirection.VERTICAL){if((CN.MetricNames!==undefined&&(!CN.TemplateUnit||CN.TemplateUnit.length===0))||(CP.MetricNames!==undefined&&(!CN.TemplateUnit||CN.TemplateUnit.length===0))){this.clusteredBarSpecialCase=true;}}else{if((CL.MetricNames!==undefined&&(!CL.TemplateUnit||CL.TemplateUnit.length===0))||(CP.MetricNames!==undefined&&(!CL.TemplateUnit||CL.TemplateUnit.length===0))){this.clusteredBarSpecialCase=true;}}}}this.isGridPie=CM.isGrid&&CM.isPie;this.onlyMetricNamesOnAxisForGridPie=Bd.call(this);this.isMetricNamesOnXAxis=BI.call(this,"XAxis");this.isMetricNamesOnYAxis=BI.call(this,"YAxis");this.isMetricNamesOnRows=BI.call(this,"Rows");this.isMetricNamesOnColumns=BI.call(this,"Columns");if(CM.isABL){if(AH.call(this,"XAxis","n").length>1||AH.call(this,"YAxis","n").length>1){this.mulAttsOnAxisForABL=true;}}}function BG(AS){var CP=B1;var CT=this.view,CW,CO;var CX=CT.getWidgetPropertyValue(AW.SHAPE);var CQ=CT.getWidgetPropertyValue(AW.SUB_TYPE);var CR=this.getChartType();var CN=[Bz.CIRCLE,Bz.SQUARE,Bz.PIE,Bz.RING,Bz.TICK];var CL=CN.concat([Bz.BAR]);var CY=function(CZ){var Cg=false,Ca=false;if(CR!==CP.BAR&&CR!==CP.LINE&&CR!==CP.AREA){return{enableComb:false,hasBarShape:false};}var Cd=1,Cc,Ce=[],Cb=[],Ch=[];var Ci=CZ.dz,Cj=Ci.XAxis.TemplateMetric&&Ci.XAxis.TemplateMetric.concat()||[];Cj=Cj.concat(Ci.YAxis.TemplateMetric&&Ci.YAxis.TemplateMetric.concat()||[]);Cj.forEach(function(Ck){Ce.push(Ck.id);Ch.push(Ck.ax);});var Cf=Ci.visProp.fmt.metricShapes||"{}";Cj=JSON.parse(Cf.replace(/'/g,'"'));Ce.forEach(function(Ck){if(Cj.hasOwnProperty(Ck)){Cb.push(Cj[Ck]);}});Ca=Cb.length&&Cb[0]===Cd;for(Cc=1;Cc<Cb.length;Cc++){Cg=Cg||Cb[Cc]!==Cb[Cc-1];Ca=Ca||Cb[Cc]===Cd;if(Cg&&Ca){break;}}return{enableComb:Cg,hasBarShape:Ca};};var CV=CY(AS);if(CQ!==undefined){CW=CQ;}if(((CR===CP.BUBBLE||CR===CP.SCATTER)&&CN.indexOf(CX)===-1)||((CR===CP.GRID)&&(CL.indexOf(CX)===-1))){CX=Bz.CIRCLE;}var CM=[4,24,201,202,200];var CU=CN.indexOf(CX);if(CU>=0&&CU<CN.length){this.ceMarkerShape=CM[CU];}var CS=BA.call(this,CR,CW,this.chartDirection,CX,CV.enableComb,CV.hasBarShape);this.chartSubType=CS.subType;CO=CS.ceChartType;this.ceChartType=CO;this.markerShape=CS.shape;this.isPercentage=Ar(CO,Aa);this.isStacked=Ar(CO,Bk.concat(Aa));}function Bo(CM){var CQ=CM.dm.rct;var CL=CM.dm.cct;var CN=CM.ptt.row;var CP=CM.ptt.col;var CO=this,AS=CM.dz;if(CN.length===0){CN.push(0);}if(CP.length===0){CP.push(0);}if(CQ<0){CQ=CM.dm.rct=CM.gvs.items.length;}if(CL<0){CL=CM.dm.cct=CM.gvs.items[0].items.length;}CO.rowHeaderCnt=Bw(AS.Rows);CO.colHeaderCnt=Bw(AS.Columns);}function z(CL,AS){if(this.isBubbleOrScatter()){return this.getAxisLayout4CE(CL,AS);}else{return this.axisLayout;}}function AI(AS){var CL=document.createElement("div");CL.innerHTML=AS;return CL.innerText;}function CF(CO){var CP=CO.es,CL=CO.fs,CN=CO.otp,AS=CL&&CL.length;if(CP){Bx.forEach(CP,function(CQ){CQ.n=l.restoreSpecialChars(CQ.n);CQ.n=A3.decodeHtmlString(CQ.n);CQ.n=CQ.n.trim();});}if(CN===12&&AS){for(var CM=0;CM<CP.length;CM++){switch(CL[CM%AS].bftp){case 5:break;case 7:CP[CM].n=AI(CP[CM].n);break;default:}}}}function U(CO,CQ){var CL=this.model,AS,CM,CN,CP;AS=this.mapFromChartToLDSIndex(CO,CQ);CM=CL.getLocalDataSet(AS.r,AS.c);CN=CM.generateDataProvider();CP=CN[AS.dpIdx];return CP;}function CC(CL,CM){this.layoutPaddingEchos=this.layoutPaddingEchos||{X1:[],X2:[],Y1:[],Y2:[]};var AS=CL?"X2":"Y2";if(CM){AS=CL?"X1":"Y1";}return this.layoutPaddingEchos[AS];}function BC(CL,CM){this.condenseEchos=this.condenseEchos||{X1:[],X2:[],Y1:[],Y2:[]};var AS=CL?"X2":"Y2";if(CM){AS=CL?"X1":"Y1";}return this.condenseEchos[AS];}function Q(){return true;}function CG(CM){if(this.enableCombiChart){return false;}var AS=CM.shape;if(AS===Ai.BAR||CM.tp===B1.GRID){return true;}if(AS===Ai.TICK){var CL=this.getChartInfo();return CL.isABL;}return false;}function CE(CQ,CM,CP){var CO,AS=CQ.shape;if(this.enableCombiChart){CO=U.call(this,CM,CP);var CN=CO.getSeriesByShape();if(CN.Circle.length||CN.Square.length){return false;}if(CN.Line.length&&this.hasSizeBy()){return false;}var CL=CO.GetDiscreteSeries();if(CL.length){if(CN.Line.length){if(k.HasArrayIntersection(CL,CN.Line)){return false;}}if(CN.Area.length){if(k.HasArrayIntersection(CL,CN.Area)){return false;}}}return true;}if(CG.call(this,CQ)){return true;}if(AS===Ai.AREA){CO=U.call(this,CM,CP);return CO.getGroupCount()>=2&&CO.GetDiscreteSeries().length===0;}if(AS===Ai.LINE){CO=U.call(this,CM,CP);return !this.hasSizeBy()&&CO.getGroupCount()>=2&&CO.GetDiscreteSeries().length===0;}return false;}function A7(AS,CQ,CM,CP){var CS=this.view.getDefaultProperties(),CR=AS[CM]||{},CL=this.getChartInfo(),CN=(CQ.fmt||CQ.fms),CO;if(CN.length===0){CN={};}else{if(typeof CN==="string"){CN=JSON.parse(l.restoreSpecialChars(CN));}}CR.modix=CP;CR[AW.TREND_TYPE]=CQ.tp;CR[AW.TREND_LEVEL]=CQ.lv;CR[AW.TREND_ENABLED]=CQ.enabl===1;CR.fmt=CN;[AW.TREND_REF_LINE_THICKNESS,AW.TREND_REF_LINE_COLOR,AW.TREND_REF_LINE_STYLE].forEach(function(CT){CO=CN[CT];if(CO===undefined){CR[CT]=CS[CT];}else{CR[CT]=CO;}});if(CL.isABL){CR[AW.TREND_INCLUDE_BREAK_BY]=(CQ.incl===1);}if(CQ.cst.vv!==""&&!isNaN(CQ.cst.vv)){CR[AW.TREND_POLY_DEGREE]=parseFloat(CQ.cst.vv);}CR.existing=true;CQ.clientDef=CR;AS[CM]=CR;}function J(CL,CP,AS){var CM,CO,CN=this.view;[BJ.REF_LABELS_FONT_FAMILY,BJ.REF_LABELS_FONT_SIZE,BJ.REF_LABELS_FONT_STYLE,BJ.REF_LABELS_FONT_COLOR].forEach(function(CQ){CO=CN.getWidgetPropertyValue(CQ);CM=CL[CQ];if((typeof CO==="object")&&(CM===undefined||typeof CM!=="object"||(CO[CQ+An]>CM[CQ+An]))){AS[CQ]=CO[CQ];CL[CQ]=CO;}else{if(CM===undefined){AS[CQ]=CP[CQ];}else{if(typeof CM!=="object"){AS[CQ]=CM;}else{AS[CQ]=CM[CQ];}}}});}function G(CO,CS,AS,CP){var CL=this.getChartInfo();if(CL.isBubbleOrScatter){if(CS.tp===AV.FIRST||CS.tp===AV.LAST){return ;}}var CT=this.view.getDefaultProperties(),CR=CO[AS]||{},CQ={},CM=(CS.fmt||CS.fms),CN;CQ.modix=CP;CQ[AW.REF_TYPE]=CS.tp;CQ[AW.REF_LEVEL]=CS.lv;if(CM.length===0){CM={};}else{if(typeof CM==="string"){CM=JSON.parse(l.restoreSpecialChars(CM));}}CQ.fmt=CM;[AW.TREND_REF_LINE_THICKNESS,AW.TREND_REF_LINE_COLOR,AW.TREND_REF_LINE_STYLE].forEach(function(CU){CN=CM[CU];if(CN===undefined){CQ[CU]=CT[CU];}else{CQ[CU]=CN;}});J.call(this,CM,CT,CQ);CQ[AW.REF_ENABLED]=CS.enabl===1;CQ[AW.REF_SHOW_LABEL]=(CS.la!==BX.DssModelLabelsNone&&CS.la!==BX.DssModelLabelsReserved);CQ[AW.REF_LABEL_TYPE]=CS.la;CQ[AW.REF_CONST_VALUE]=CS.cst.vv;if(CS.tp===AV.CONST){CQ[AW.REF_LINE_NAME]=CS.lin;}CQ.existing=true;if(CR[CS.tp]===undefined){CR[CS.tp]=[];}CR[CS.tp].push(CQ);CS.clientDef=CQ;CO[AS]=CR;}function BQ(AS,CL){if(!AS&&!CL){return true;}if(AS&&CL){return(AS.x===CL.x&&AS.y===CL.y&&AS.width===CL.width&&AS.height===CL.height&&AS.flag===CL.flag);}return false;}function B0(CP){var CO=[],CN=[],AS=CP.length,CM,CL;for(CM=0;CM<AS;CM++){CL=CP[CM];if(CL.actionId===27){CO.push(CL);}else{CN.push(CL);}}CO=CO.concat(CN.reverse());return CO;}function Aq(CR){var CS=CR.cellHandle,CV=CR.mid,CX=this.getMetricSortInfo(),CN=this.getChartInfo();if(CS&&CX.metricId===CV){var CY=this.xtabModel,CZ=this.getRowHeadersByCell(CS),CO=CZ.headers,CL=CX.elements||[],CQ=CL.length,CP;if(CQ===CO.length){for(CP=0;CP<CQ;CP++){if(CN.isABL&&this.isStacked){var CU=CO[CP].id,AS=CL[CP],CW,CT,CM=CU[2];if(CM!==":"){CM=";";}CW=CU.split(CM)[1];CT=AS.split(CM)[1];if(this.isAttrInZone(CW,"ColorBy")||this.isAttrInZone(CT,"BreakBy")){if(CW!==CT){return false;}}else{if(CY.getNormalizedFormElementId(CL[CP])!==CY.getNormalizedFormElementId(CO[CP].id)){return false;}}}else{if(CY.getNormalizedFormElementId(CL[CP])!==CY.getNormalizedFormElementId(CO[CP].id)){return false;}}}this.updateSortIndex(CS);this.showMetricSortIcon=true;return true;}}return false;}function AE(CQ,CP,CL,CR,CN,CS,CM,AS,CO){return{sortIndex:CQ,sortType:CP,objType:CL,objID:CR,ascending:CN,axisIndex:CS,subtotalsPosition:CM,eIds:AS,formId:CO,actionId:26};}function W(AS){return(this.getColTitleInfo(true).items)[AS];}function a(AS){return(this.getRowTitleInfo(true).items)[AS];}function q(AS,CX){var CY=this.firstRes,CV=CY.gsi,CP=CX.id,CS=0,CL=1,CQ=2,CR,CT=CV.sorts[AS-1],CO,CW,CN,CM,CU;for(CR=0;CR<CT.length;CR++){CO=CT[CR];CW=CO.key.split("!");CN=CW[CS];CM=CW[CL];CU=CW[CQ];if(CM===CP){if(CO.isAsc===true){return CI;}return A9;}}return x;}function K(CO){var CN=this.chartType,AS=this.metricsType,CM=this.dz.SizeBy.TemplateMetric,CL=(CM&&CM.length)||0;if(CO===undefined){CO=this.getMetricsOnYAxis();}return((CN===B1.BUBBLE)||(CN===B1.SCATTER))&&(CO.length>1&&CL>1)&&(AS===AG.MetricsByColumn||AS===AG.MetricsByRow);}function Ae(){return this.getSizeByMetrics().length;}function AA(CP,CQ,CO){if(this.fakeGroupInfo===false){if(CQ===false){return[];}return CP;}var CL=CP.length,CN,AS=Math.ceil(CL/2),CM=[];for(CN=0;CN<CL;CN++){if(CQ){if(CN%2===0){CM.push(CP[CN]);}}else{if(CN%2===1){CM.push(CP[CN]);}}}if(CO&&CM.length<AS){CM.push(Au);}return CM;}function BB(AS,CM){var CL=[];Bx.forEach(AS,function(CN){CL.push(CM[CN]);});return CL;}function AC(CN,CM){var CL=this.model,AS=CL.getMetricNumberFormat(CM);return C.formatByMask(AS,CN);}function AX(CN,AS){var CM,CP,CO=AS.row,CL=AS.col;for(CM=0,CP=CO.length;CM<CP;CM++){if(CO[CM].id===CN){return true;}}for(CM=0,CP=CL.length;CM<CP;CM++){if(CL[CM].id===CN){return true;}}return false;}function c(CS,CT){var CO,CL,CM=CT.docModel.datasets,AS=CS.gts,CQ=CS.datasetId,CN=CM[CQ]||{},CP=CN.att||[],CR=[];if(CP){for(CO=0,CL=CP.length;CO<CL;CO++){if(!AX(CP[CO].did,AS)){CR.push(CP[CO]);}}}return CR;}function N(CM,CN){var CL=function CL(CP){return CP.did===CN;},AS=CM.docModel,CO=AS.getDatasetUnits(["att"],CL);if(CO&&CO[0]){return CO[0];}return undefined;}function Bc(AS,CO){var CN={},CM,CL;CM=Math.max(AS.LowOffset,CO.LowOffset);CL=Math.max(AS.HighOffset,CO.HighOffset);CN.LowOffset=CM;CN.HighOffset=CL;return CN;}function Bu(CM,CL){if(CM.isZeroPadding&&CL.isZeroPadding){return CM;}var AS={};AS.X1=Bc(CM.X1,CL.X1);AS.X2=Bc(CM.X2,CL.X2);AS.Y1=Bc(CM.Y1,CL.Y1);AS.Y2=Bc(CM.Y2,CL.Y2);return AS;}function CD(AS,CL){var CM={};CM.Y1=AS.Y1;CM.Y2=AS.Y2;CM.X1=CL.X1;CM.X2=CL.X2;return CM;}function AD(CL,CN){var AS=this.condenseEchos,CM={};if(AS===undefined){return{X1:false,X2:false,Y1:false,Y2:false};}CM.X1=AS.X1[CN]||false;CM.X2=AS.X2[CN]||false;CM.Y1=AS.Y1[CL]||false;CM.Y2=AS.Y2[CL]||false;return CM;}function By(CL,CO,CM,AS){CL=CL||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};CO=CO||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};CM=CM||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};AS=AS||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};var CN={};CN.xPrimaryHighTrim=CL.PrimaryHighTrim||0;CN.xPrimaryLowTrim=CL.PrimaryLowTrim||0;CN.yPrimaryHighTrim=CO.PrimaryHighTrim||0;CN.yPrimaryLowTrim=CO.PrimaryLowTrim||0;CN.xSecondaryHighTrim=CM.SecondaryHighTrim||0;CN.xSecondaryLowTrim=CM.SecondaryLowTrim||0;CN.ySecondaryHighTrim=AS.SecondaryHighTrim||0;CN.ySecondaryLowTrim=AS.SecondaryLowTrim||0;return CN;}function O(AS,CL){AS=AS||{LowTrim:0,HighTrim:0};CL=CL||{LowTrim:0,HighTrim:0};return{xCaHighTrim:AS.HighTrim,yCaHighTrim:CL.HighTrim,xCaLowTrim:AS.LowTrim,yCaLowTrim:AS.LowTrim};}function T(CP,CL){var CM={},CR=this.getChartInfo();CM.TOP=CP.TOP;CM.BOTTOM=CP.BOTTOM;CM.LEFT=CL.LEFT;CM.RIGHT=CL.RIGHT;var AS=false,CO,CN=CR.isABL&&CR.dirc===B5.VERTICAL,CQ=true;if(CQ){if(CN){AS=true;CO=CP;}else{AS=true;CO=CL;}}return CM;}function Ar(CM,CL){var AS=CL.length,CN;for(CN=0;CN<AS;CN++){if(CM===CL[CN]){return true;}}return false;}function AZ(CP,AS){var CO=AS.col,CM,CN,CQ,CL,CR;if(CO){CM=CO.length;CN=CO[CM-1];if(CN&&CN.otp===-1&&CN.es){CR=CN.es;CQ=CR.length;for(CL=0;CL<CQ;CL++){if(CR[CL].oid===CP){return CL;}}}}return Au;}function Aj(CN){var CM,CL,AS,CP,CQ,CO=this.metricsOnDropZone[CN];if(!CO){CM=this.gts;CL=this.dz[CN];AS=CL.TemplateMetric;CO=[];if(AS&&AS.length>0){CQ=AS.length;for(CP=0;CP<CQ;CP++){CO.push(AZ.call(this,AS[CP].id,CM));}}this.metricsOnDropZone[CN]=CO;}return CO;}function Al(CL,AS){if(CL.index<AS.index){return -1;}if(CL.index>AS.index){return 1;}return 0;}function A1(CP){var CN,AS,CQ,CO,CL,CM=[];CO=this.colorByInfo;if(CO.tp===BH.ATT||CO.tp===BH.ATT_METRICS){CQ=CO.atts;AS=CQ.length;for(CN=0;CN<AS;CN++){CL=CQ[CN];if(CL.axis===CP){CM.push({index:CL.uidx,order:CN});}}return CM.sort(Al);}return[];}function Aw(CN,CP,CL,CO){var CM,AS=CN.length;for(CM=0;CM<AS;CM++){if(CP===CN[CM]&&(CO===undefined||CO===CL[CM])){return CM;}}return -1;}function Ax(CL,CS,CP,CV,CU){var CO,CM,CW,CQ=CP.length,AS,CN,CT;if(CQ>0&&(CL===undefined||CS===undefined)){B3.visPrint("the extreme is likely missing");return{min:0,max:99999999};}if(CQ===0){return undefined;}var CR=false;for(CO=0;CO<CQ;CO++){CN=CP[CO];if(CN===undefined||CN===Au){return undefined;}CT=Aw(CS,CN,CV,CU);if(CT>=0){AS=CL[CT];if(!CR&&AS.length>=1){CM=l.parseNumeric(AS[0]);CW=l.parseNumeric(AS[1]);CR=true;}else{if(CM>l.parseNumeric(AS[0])){CM=l.parseNumeric(AS[0]);}if(CW<l.parseNumeric(AS[1])){CW=l.parseNumeric(AS[1]);}}}else{B3.visPrint("the metric "+CN+" Not Found in extremes from back end");return{min:0,max:99999999};}}return{min:CM,max:CW};}function o(CQ,CS,AS,CP){var CN=this.extrs,CO,CL,CR,CM,CV,CU;if(CQ!==Bm.GLOBAL){CM=this.mapFromChartToLDSIndex(AS,CP);CV=CM.r;CU=CM.c;}if(CS==="XAxis"||CS==="X2Axis"){CS="x";}else{if(CS==="YAxis"||CS==="Y2Axis"){CS="y";}else{if(CS==="SizeBy"){CS="z";}}}if(CQ===Bm.GLOBAL){if(CN.g){CL=CN.g.ex;CO=CN.g.mids;CR=CN.g.etp;}}else{if(CQ===Bm.PERROWCOL){if(CS!=="z"){var CT=(CS==="y"?CN.r:CN.c);if(CT){CO=CT.mids;CL=CT.ex[(CS==="y"?CV:CU)];CR=CT.etp;}}else{if(CN.all){CO=CN.all.mids;CL=CN.all.ex[CV][CU];CR=CN.all.etp;}}}else{if(CQ===Bm.PERCELL){if(CN.all){CO=CN.all.mids;CL=CN.all.ex[CV][CU];CR=CN.all.etp;}}}}return{mids:CO,exObj:CL,etp:CR};}function d(CL,AS){var CO=this.chartSubType,CM=false,CN=BV.EnumShape.BAR;AS=AS||[];Bx.forEach(AS,function(CP){if(CP===CN){CM=true;}});if(CL&&(CL.min!==undefined&&CL.max!==undefined)){if(CL.min>0){if(CM){CL.min=0;}if(CO===BL.PERCENT){CL.max=1;CL.min=0;}}if(CL.max<0){if(CM){CL.max=0;}if(CO===BL.PERCENT){CL.min=-1;CL.max=0;}}}return CL;}function Ap(CL,CN,CM){var AS;if(CM==="YAxis"){AS=Ah(this.getMetricsOnAxisOfChart(CL,CN,"y",true,true));}else{if(CM==="Y2Axis"){AS=Ah(this.getMetricsOnAxisOfChart(CL,CN,"y",false,true));}else{if(CM==="XAxis"){AS=Ah(this.getMetricsOnAxisOfChart(CL,CN,"x",true,true));}else{if(CM==="X2Axis"){AS=Ah(this.getMetricsOnAxisOfChart(CL,CN,"x",false,true));}else{B3.visPrint("to support");}}}}return AS;}function y(CN,CR,CP,CQ){var AS=CP[0];if(AS!=="X"&&AS!=="Y"){return null;}this.axisScaleCache=this.axisScaleCache||{};this.axisScaleCache[CQ]=this.axisScaleCache[CQ]||{};this.axisScaleCache[CQ][CP]=this.axisScaleCache[CQ][CP]||{};var CL=CQ,CO=null,CM=this.axisScaleCache[CQ][CP];CM=CM||{};if(CP[0]==="X"){if(CL===Bm.GLOBAL||CL===Bm.PERROWCOL){CO=CM[CR];}}else{if(CP[0]==="Y"){if(CL===Bm.GLOBAL||CL===Bm.PERROWCOL){CO=CM[CN];}}else{}}if(!!CO){return CO;}return null;}function AF(CO,CR,CP,CM,CQ){var AS=CP[0];if(AS!=="X"&&AS!=="Y"){return ;}this.axisScaleCache=this.axisScaleCache||{};this.axisScaleCache[CQ]=this.axisScaleCache[CQ]||{};this.axisScaleCache[CQ][CP]=this.axisScaleCache[CQ][CP]||{};var CL=CQ,CN=this.axisScaleCache[CQ][CP];CN=CN||{};if(CP[0]==="X"){if(CL===Bm.GLOBAL||CL===Bm.PERROWCOL){CN[CR]=CM;}}else{if(CP[0]==="Y"){if(CL===Bm.GLOBAL||CL===Bm.PERROWCOL){CN[CO]=CM;}}else{}}}function AP(CQ,CX,CN,CM){var CP=this.getChartInfo(),CZ=this,CS=CP.dirc,CO=BV.EnumABLDirection,Cc,CY,Cb,CR,CV,CT,CU,AS,Ca,CL=[],CW;if(CM===undefined){CM=this.axisScale;}CR=y.call(this,CQ,CX,CN,CM);if(!!CR){return CR;}Ca=Ap.call(CZ,CQ,CX,CN);Bx.forEach(Ca,function(Cd){CL.push(CZ.getOnTheFlyShapeForMetric(Cd));});CW=o.call(this,CM,CS===CO.VERTICAL?"y":"x",CQ,CX);Cc=CW.exObj;CY=CW.mids;Cb=CW.etp;CR={};if(CS===CO.VERTICAL){if(this.isStacked&&!this.splitPlottingMetrics){CT=(CN==="YAxis")&&Ax(Cc,CY,[CB.PRIMARY_Y_AXIS],Cb,e);AS=(CN==="Y2Axis")&&Ax(Cc,CY,[CB.SECONDARY_Y_AXIS],Cb,e);}else{CT=(CN==="YAxis")&&Ax(Cc,CY,Ca,Cb,e);AS=(CN==="Y2Axis")&&Ax(Cc,CY,Ca,Cb,e);}if(CT){CT=d.call(CZ,CT,CL);CR.min=CR.YMin=CT.min;CR.max=CR.YMax=CT.max;}if(AS){AS=d.call(CZ,AS,CL);CR.min=CR.Y2Min=AS.min;CR.max=CR.Y2Max=AS.max;}}else{if(this.isStacked&&!this.splitPlottingMetrics){CV=(CN==="XAxis")&&Ax(Cc,CY,[CB.PRIMARY_X_AXIS],Cb,e);CU=(CN==="X2Axis")&&Ax(Cc,CY,[CB.SECONDARY_X_AXIS],Cb,e);}else{CV=(CN==="XAxis")&&Ax(Cc,CY,Ca,Cb,e);CU=(CN==="X2Axis")&&Ax(Cc,CY,Ca,Cb,e);}if(CV){CV=d.call(CZ,CV,CL);CR.min=CR.XMin=CV.min;CR.max=CR.XMax=CV.max;}if(CU){CU=d.call(CZ,CU,CL);CR.min=CR.X2Min=CU.min;CR.max=CR.X2Max=CU.max;}}AF.call(this,CQ,CX,CN,CR,CM);return CR;}function Ad(CM,CV,CP,CW){var CQ,CO,CN,CS,CR,CX,CU,CT,CL,CY,AS;if(CW===undefined){CW=this.axisScale;}CQ=y.call(this,CM,CV,CP,CW);if(!!CQ){return CQ;}CS=o.call(this,CW,"x",CM,CV);CU=CS.exObj;CL=CS.mids;CO=CS.etp;CR=o.call(this,CW,"y",CM,CV);CT=CR.exObj;CY=CR.mids;CN=CR.etp;CX=Ap.call(this,CM,CV,CP);if(CP==="YAxis"){AS=Ax(CT,CY,CX,CN,e);CQ={YMin:AS&&AS.min,YMax:AS&&AS.max};}else{if(CP==="Y2Axis"){AS=Ax(CT,CY,CX,CN,e);CQ={Y2Min:AS&&AS.min,Y2Max:AS&&AS.max};}else{if(CP==="XAxis"){AS=Ax(CU,CL,CX,CO,e);CQ={XMin:AS&&AS.min,XMax:AS&&AS.max};}else{if(CP==="X2Axis"){AS=Ax(CU,CL,CX,CO,e);CQ={X2Min:AS&&AS.min,X2Max:AS&&AS.max};}else{B3.visPrint("to support");}}}}CQ.min=AS&&AS.min;CQ.max=AS&&AS.max;AF.call(this,CM,CV,CP,CQ,CW);return CQ;}function Ay(CN,CQ){var CL,CP,CO,AS,CM,CR=AZ(CN,this.gts);CL=o.call(this,Bm.GLOBAL);CP=CL.exObj;CO=CL.mids;AS=CL.etp;if(CQ===true){CM=Ax(CP,CO,[CR],AS,BY);}else{CM=Ax(CP,CO,[CR],AS,e);}return CM;}function Bj(CO,CR){var CQ=this.getChartInfo(),AS={},CN=this,CP=["YAxis","Y2Axis","XAxis","X2Axis"],CL,CM;CM=CQ.isABL?AP:Ad;CP.forEach(function(CS){CL=CM.call(CN,CO,CR,CS);Ao.copy(CL,AS);});return AS;}function Bh(CL){var AS=["AllMetrics","XAxis","X2Axis","YAxis","Y2Axis","SizeBy"];return(AS.indexOf(CL)<0);}function A5(CP,CN,CM){var CS,CO,Ca=0,CU=1,CZ=2,CQ=3,CR,CW,CV=this.axisScale,CT,AS,CY,CX;if(CP!==undefined){CT=(this.model.getMetricIDsFromIndex([CP]))[0];}if(CV!==Bm.CUSTOM){return CV;}CX=this.view.getWidgetPropertyValue(AW.AXIS_SCALE_DATA);CW=parseInt(CX[0][CU],10);if(CW!==Bm.DIFFERENT){if(CM!==undefined){CM.min=parseFloat(CX[0][CZ]);CM.max=parseFloat(CX[0][CQ]);}return CW;}for(CS=1,CO=CX.length;CS<CO;CS++){CR=CX[CS];var CL=CR[Ca];if(CN!==undefined&&CL===CN){AS=parseInt(CR[CU],10);if(CM!==undefined){CM.min=parseFloat(CR[CZ]);CM.max=parseFloat(CR[CQ]);}break;}if(CT!==undefined&&CT===CL){CY=parseInt(CR[CU],10);if(CM!==undefined){CM.min=parseFloat(CR[CZ]);CM.max=parseFloat(CR[CQ]);}}}return AS!==undefined?AS:CY;}function AT(CQ){var CL=Bh(CQ),CM,CP=[],AS,CO=0,CR=0,CN=this;if(CL){AS=this.getMetricIndexFromID(CQ);return[this.getOnTheFlyShapeForMetric(AS)];}CM=Ap.call(this,CO,CR,CQ);Bx.forEach(CM,function(CS){CP.push(CN.getOnTheFlyShapeForMetric(CS));});return CP;}function B6(CL,CU,CV){var CW=this,CM=this.getChartInfo(),CZ=o.call(this,Bm.GLOBAL),CQ,CT,CX,CS,CR,CY=Bh(CL);var AS;var CO={};if(CY){var CP=AZ.call(this,CL,this.gts);AS=A5.call(this,CP,undefined,CO);}else{AS=A5.call(this,undefined,CL,CO);}if(!CV){if(AS===Bm.CUSTOM){return{min:CO.min,max:CO.max,scaleType:AS};}}if(!CY){if(CL==="SizeBy"){CQ=CZ.exObj;CT=CZ.mids;CX=CZ.etp;if(CM.tp===B1.BUBBLE||CM.tp===B1.SCATTER){CR=Ah(this.getMetricsOnAxisOfChart(0,0,"z"));}else{CR=this.getSizeByMetrics();}CS=Ax(CQ,CT,CR,CX,BY);}else{var CN=CM.isABL?AP:Ad;CS=CN.call(this,0,0,CL,Bm.GLOBAL);}}else{CS=Ay.call(this,CL,CU);}if(CS){if(CM.isABL&&AS!==Bm.CUSTOM){CS=d.call(CW,CS,AT.call(CW,CL));}return{min:CS.min,max:CS.max,scaleType:AS};}B3.visPrint("getGlobalExtremeForAxisOrMetric getting faked extreme");return{min:0,max:99999999,scaleType:AS};}function Bv(Cn,Co,Cv,Ch){var Cy=this.getChartInfo(),CV=this,Cj=0,CU=1,Ca=2,Cu=3,Ce=7,Cz=8,CX=Ch.length,Cr,Ck,CQ,Cp,Cq=false,Cw,Cc,CP,Ci,CW,Cm,CS,Ct,CR,AS,Cl,CL,Cd,Cx=["Dumy","x","y","z","x2","y2"],Cb=["Dumy","XAxis","YAxis","SizeBy","X2Axis","Y2Axis"];Cd=Cx[Cb.indexOf(Cn)];var CO=true,CY;if(Cd==="x2"){Cd="x";CO=false;}if(Cd==="y2"){Cd="y";CO=false;}for(Cr=1;Cr<CX;Cr++){Ck=Ch[Cr];CQ=Ck[Cj];if(CQ===Cn){Cq=true;Cp=parseInt(Ck[CU],10);if(Cp===Bm.CUSTOM){Cc=parseFloat(Ck[Cu]);Cw=parseFloat(Ck[Ca]);CP=l.isTrueForBoolValue(Ck[Ce]);Ci=l.isTrueForBoolValue(Ck[Cz]);return{max:Cc,min:Cw,autoMin:CP,autoMax:Ci};}if(Cn==="SizeBy"){CR=o.call(this,Cp,Cn,Co,Cv);CW=CR.exObj;Cm=CR.mids;CS=CR.etp;if(Cy.tp===B1.BUBBLE||Cy.tp===B1.SCATTER){Cl=Ah(this.getMetricsOnAxisOfChart(Co,Cv,"z"));}else{Cl=this.getSizeByMetrics();}Ct=Ax(CW,Cm,Cl,CS,BY);}else{CY=Cy.isABL?AP:Ad;Ct=CY.call(this,Co,Cv,Cn,Cp);}return{max:Ct.max,min:Ct.min,autoMin:false,autoMax:false};}}AS=this.gts;var CN,Cg,Cf,CM,Cs=Ah(this.getMetricsOnAxisOfChart(Co,Cv,Cd,CO));if(Cq===false){var CZ=true;Cc=Cw=undefined;for(Cr=1;Cr<CX;Cr++){Ck=Ch[Cr];CQ=Ck[Cj];Cp=parseInt(Ck[CU],10);if(Bh(CQ)){CL=AZ.call(this,CQ,AS);if(Ar(CL,Cs)){if(Cp===3){Cg=parseFloat(Ck[Cu]);CN=parseFloat(Ck[Ca]);Cf=l.isTrueForBoolValue(Ck[Ce]);CM=l.isTrueForBoolValue(Ck[Cz]);}else{CR=o.call(this,Cp,Cn,Co,Cv);CW=CR.exObj;Cm=CR.mids;CS=CR.etp;Ct=Ax(CW,Cm,[CL],CS,Cn==="SizeBy"?BY:e);if(Cy.isABL&&Cn!=="SizeBy"){var CT=CV.getOnTheFlyShapeForMetric(CL);Ct=d.call(CV,Ct,[CT]);}Cg=Ct.max;CN=Ct.min;Cf=false;CM=false;}if(CZ){Cw=CN;Cc=Cg;CP=Cf;Ci=CM;}else{Cw=Cw<CN?Cw:CN;Cc=Cc>Cg?Cc:Cg;CP=CP===Cf?CP:false;Ci=Ci===CM?Ci:false;}CZ=false;}}}return{max:Cc,min:Cw,autoMin:CP,autoMax:Ci};}}function Ab(CS,Cc,Ca){var CR=1,CY=2,CZ=3,CL=7,CN=8,Cd,CT,CW;Cd=Ca[0];CW=parseInt(Cd[CR],10);if(CW===Bm.CUSTOM){var CM,CO,CV,CX;CM=parseFloat(Cd[CY]);CO=parseFloat(Cd[CZ]);CV=l.isTrueForBoolValue(Cd[CL]);CX=l.isTrueForBoolValue(Cd[CN]);CT={XMin:CM,XMax:CO,YMin:CM,YMax:CO,ZMin:CM,ZMax:CO,X2Min:CM,X2Max:CO,Y2Min:CM,Y2Max:CO,XAutoMin:CV,XAutoMax:CX,X2AutoMin:CV,X2AutoMax:CX,YAutoMin:CV,YAutoMax:CX,Y2AutoMin:CV,Y2AutoMax:CX,ZAutoMin:CV,ZAutoMax:CX};}else{var AS,Cb,CP,CQ,CU;AS=Bv.call(this,"XAxis",CS,Cc,Ca);Cb=Bv.call(this,"YAxis",CS,Cc,Ca);CQ=Bv.call(this,"X2Axis",CS,Cc,Ca);CU=Bv.call(this,"Y2Axis",CS,Cc,Ca);CP=Bv.call(this,"SizeBy",CS,Cc,Ca);CT={XMin:AS.min,XMax:AS.max,YMin:Cb.min,YMax:Cb.max,ZMin:CP.min,ZMax:CP.max,X2Min:CQ.min,X2Max:CQ.max,Y2Min:CU.min,Y2Max:CU.max,XAutoMin:AS.autoMin,XAutoMax:AS.autoMax,X2AutoMin:CQ.autoMin,X2AutoMax:CQ.autoMax,YAutoMin:Cb.autoMin,YAutoMax:Cb.autoMax,Y2AutoMin:CU.autoMin,Y2AutoMax:CU.autoMax,ZAutoMin:CP.autoMin,ZAutoMax:CP.autoMax};}return CT;}function BO(){var CN=this.colorByInfo,CL,CQ,CP,AS,CO,CM;if(CN.tp===BH.METRICS){CM=CN.colorByMetricIndex;CL=o.call(this,Bm.GLOBAL,"c",0,0);CQ=CL.exObj;CP=CL.mids;AS=CL.etp;CO=Ax(CQ,CP,[CM],AS,Az);return CO;}return undefined;}function BR(CL){var AS;if(CL==="x1"){AS="x";}else{if(CL==="y1"){AS="y";}else{AS=CL;}}return AS.toUpperCase();}function BZ(CZ,Cf){var CM,CX=this.getChartInfo(),CQ=B1,CN=this.axisScale,CL,CY,CS,Ca,CV,CU,AS,Cb,CP,Ce,CW=this.getSizeByMetrics(),CR=CW.length>0;if(CN===Bm.CUSTOM){Ce=this.view.getWidgetPropertyValue(AW.AXIS_SCALE_DATA);}if(CX.isABL){if(CN===Bm.CUSTOM){Ca=Ab.call(this,CZ,Cf,Ce);if(CX.isABL&&this.chartSubType===BL.PERCENT){if(CR){var Ci=CW[0];if(A5.call(this,Ci,"SizeBy")===Bm.CUSTOM){CV=this.model.mx[Ci].max;CU=this.model.mx[Ci].min;Ca.ZMin=Ca.ZMin*(CV-CU)+CU;Ca.ZMax=Ca.ZMax*(CV-CU)+CU;}}}}else{Ca=Bj.call(this,CZ,Cf);if(CR){var Cd=o.call(this,CN,"z",CZ,Cf);CL=Cd.exObj;CY=Cd.mids;CS=Cd.etp;AS=Ax(CL,CY,CW,CS,BY);if(AS){Ca.ZMin=AS.min;Ca.ZMax=AS.max;}}}}else{if(CX.tp===CQ.BUBBLE||CX.tp===CQ.SCATTER){CP=Ah(this.getMetricsOnAxisOfChart(CZ,Cf,"z"));if(CN===Bm.CUSTOM){Ca=Ab.call(this,CZ,Cf,Ce);}else{Ca=Bj.call(this,CZ,Cf);if(CR){Cb=o.call(this,CN,"z",CZ,Cf);CL=Cb.exObj;CY=Cb.mids;CS=Cb.etp;AS=Ax(CL,CY,CP,CS,BY);if(AS){Ca.ZMin=AS.min;Ca.ZMax=AS.max;}}}if(CR&&CP.length>0&&Ca.ZMin===undefined&&Ca.ZMax===undefined){var CO=this.sizeByMetricsSharedInAxis;if(CO.length>1){var Cc=[],CT=[];CO.forEach(function(Cj){Cc.push(Ca[BR(Cj)+"Min"]);CT.push(Ca[BR(Cj)+"Max"]);});Ca.ZMin=Cc.sort()[0];Ca.ZMax=CT.sort()[CT.length-1];}else{if(CO.length===1){var Ch=this.collisionSizeByMetric;var Cg=A5.call(this,Ch[0],BR(CO[0])+"Axis");if(Cg===Bm){Ca.ZMin=Ca[BR(CO[0])+"Min"];Ca.ZMax=Ca[BR(CO[0])+"Max"];}else{if(Cg!==Bm.GLOBAL){Cg=Bm.PERCELL;}Cb=o.call(this,Cg,"z",CZ,Cf);CL=Cb.exObj;CY=Cb.mids;CS=Cb.etp;AS=Ax(CL,CY,CP,CS,undefined);if(AS){Ca.ZMin=AS.min;Ca.ZMax=AS.max;}}}}}}else{if(CX.tp===CQ.GRID){if(CN===Bm.CUSTOM){Ca=Ab.call(this,CZ,Cf,Ce);}else{Cb=o.call(this,CN,"z",CZ,Cf);CL=Cb.exObj;CY=Cb.mids;CS=Cb.etp;AS=Ax(CL,CY,CW,CS,BY);if(AS){Ca={ZMin:AS.min,ZMax:AS.max};}else{Ca={};}}}}}CM={YMinValue:Ca.YMin,YMaxValue:Ca.YMax,Y2MinValue:Ca.Y2Min,Y2MaxValue:Ca.Y2Max,XMinValue:Ca.XMin,XMaxValue:Ca.XMax,X2MinValue:Ca.X2Min,X2MaxValue:Ca.X2Max,ZMinValue:Ca.ZMin,ZMaxValue:Ca.ZMax};Ao.copyProps(["XAutoMin","XAutoMax","X2AutoMin","X2AutoMax","YAutoMin","YAutoMax","Y2AutoMin","Y2AutoMax","ZAutoMin","ZAutoMax"],Ca,CM);return CM;}function BU(CP,CO){var CN=false,CL=this,AS,CM=false;Bx.forEach(CP,function(CQ){if(CQ===undefined||CQ<0){CM=true;}else{AS=A5.call(CL,CQ,CO);if(AS===Bm.CUSTOM){CN=true;}}});return{emptyAxis:CM,customAxisEnabled:CN};}function BT(CO,CR){var CM,CP,CN,AS,CL,CQ;CP=BZ.call(this,0,0);CM={origMin:CP.ZMinValue,origMax:CP.ZMaxValue};CN=CM.origMin;AS=CM.origMax;if(CR&&CN<0){CQ=this.getSizeByExtremeForNegativeProportionalMode(CO);CN=CQ.min||CN;AS=CQ.max||AS;}CL=[AS];if(CN!==AS){CL.push(CN);}return CL;}function Am(CM){if(CM===undefined){CM=true;}var Cf,Ca=this.getMetricsOnXAxis(),CX=this.getMetricsOnYAxis(),CT=this.getChartInfo(),CP=CT.tp,Ck=this.getSizeByMetrics(),CN=this.getColorByMetrics(),Cg=this.model,CW=Cg.getMetricNames(),Cb=BB(Ck,CW),Cj=this.markerShape,Cm=[],Cl=[],CS=0,Cc=true,Ch=0,Ce=0,CR=[],CZ=true,CL=this.model.cic,Ci=this.model.cir,AS,CU,CQ,CY,CV,CO,Cd;Cf=Math.min(Ca.length,CX.length);if(Ck.length>0){Cf=Math.min(Cf,Ck.length);}if(Cb&&Cb[0]&&Cj!==Ai.AREA){if((!K.call(this)&&this.getSizeByScaleType(0)===Bm.GLOBAL)||(!K.call(this)&&this.getSizeByScaleType(0)===Bm.CUSTOM)||(!K.call(this)&&(CL===1&&Ci===1&&((CP===B1.BUBBLE||CP===B1.SCATTER)||CP===B1.GRID||CT.isABL)))){AS=BT.call(this,Ck[0],this.property.readItem(AW.MIN_SIZE_TYPE)===Bq.PROPORTIONAL);CU=AS.length;CQ=0;CY=0;CV="";for(Ch=0;Ch<CU;Ch++){CY=AS[Ch];if(isNaN(CY)){CV="NaN";}else{CV=AC.call(this,CY,Ck[0]);CZ=false;}Cm.push({diameter:CQ,value:CV,num:CY});}CO=Cm.length;if(CO>0){Cd=false;if(Cd){for(Ch=0;Ch<CO;++Ch){Cm[Ch].value=l.formatNumber(Cm[Ch].num,"up").s;}}}}else{Cc=false;for(Ch=0;Ch<Cb.length;Ch++){CZ=false;if(!CZ){break;}}}if(Cb.length>1&&!K.call(this)){for(Ce=0;Ce<Cf;Ce++){if(CT.isPie&&CN&&CN.indexOf(Ck[Ce])!==-1){Cl[Ce]="Total of "+Cb[Ce];}else{Cl[Ce]=Cb[Ce];}}}else{for(Ce=0;Ce<Cb.length;Ce++){if(CT.isPie&&CN&&CN.indexOf(Ck[Ce])!==-1){Cl[Ce]="Total of "+Cb[Ce];}else{Cl[Ce]=Cb[Ce];}}}if(Cj===Ai.CIRCLE||Cj===Ai.LINE){CS=BK.CIRCLE;}else{CS=BK.SQUARE;}for(Ch=0;Ch<Cb.length;Ch++){if(this.getSizeByScaleType(Ch)===Bm.CUSTOM){CR.push(Cb[Ch]);}}}if(CZ){Cl=[];}return{sizeByDataProvider:Cm,sizeByTitles:Cl,sizebyType:CS,sizeByMode:Cc,sizeByScaleType:CR};}function BA(CN,CR,CQ,CM){var CL=B1,CS=BV.EnumABLDirection,AS,CO,CP=(CN===CL.BAR||CN===CL.LINE||CN===CL.AREA);if(CP){if(CM!==Ai.BAR){if(CR===BL.CLUSTERED){CR=BL.ABSOLUTE;}}else{if(CR===BL.ABSOLUTE){CR=BL.CLUSTERED;}}if(CN===CL.BAR){if(CR===BL.ABSOLUTE){if(CM===Ai.BAR){CR=BL.CLUSTERED;}}}}if(CP&&CR===BL.AUTO){if(CM===Bz.AREA){CR=BL.STACKED;}else{if(CM===Bz.BAR){CR=BL.CLUSTERED;}else{CR=BL.ABSOLUTE;}}}if(CP&&CM===Bz.BAR&&CR===BL.ABSOLUTE){CR=BL.CLUSTERED;}if(CN===CL.AREA){if(CQ===CS.VERTICAL){switch(CR){case BL.ABSOLUTE:AS=1;break;case BL.STACKED:AS=2;break;case BL.PERCENT:AS=7;break;}}else{switch(CR){case BL.ABSOLUTE:AS=8;break;case BL.STACKED:AS=9;break;case BL.PERCENT:AS=14;break;}}}else{if(CN===CL.BAR){if(CQ===CS.VERTICAL){switch(CR){case BL.CLUSTERED:AS=15;break;case BL.ABSOLUTE:AS=91;break;case BL.STACKED:AS=16;break;case BL.PERCENT:AS=21;break;}}else{switch(CR){case BL.CLUSTERED:AS=22;break;case BL.ABSOLUTE:AS=92;break;case BL.STACKED:AS=23;break;case BL.PERCENT:AS=28;break;}}}else{if(CN===CL.LINE){if(CQ===CS.VERTICAL){switch(CR){case BL.ABSOLUTE:AS=29;break;case BL.STACKED:AS=30;break;case BL.PERCENT:AS=35;break;}}else{switch(CR){case BL.ABSOLUTE:AS=36;break;case BL.STACKED:AS=37;break;case BL.PERCENT:AS=42;break;}}}else{if(CN===CL.BUBBLE){AS=61;}else{if(CN===CL.SCATTER){AS=51;}else{if(CN===CL.GRID){AS=20000;}else{B3.visPrint("the ce chart type is not found");}}}}}}switch(CM){case Bz.AREA:CO=Ai.AREA;break;case Bz.BAR:CO=Ai.BAR;break;case Bz.LINE:CO=Ai.LINE;break;case Bz.CIRCLE:CO=Ai.CIRCLE;break;case Bz.SQUARE:CO=Ai.SQUARE;break;case Bz.TICK:CO=Ai.TICK;break;case Bz.PIE:CO=Ai.PIE;break;case Bz.RING:CO=Ai.RING;break;}return{ceChartType:AS,shape:CO,subType:CR};}function Bt(CP,CT,CM,CW){var CY=this.hasGroupInfoStored(),CN=this.gts,CV=[],CZ=this.dz,CO,CL,CQ,CS,CX,AS,CR;if(this.shallWeUseGroupInfo&&CT&&CY.existing){var CU=CY.gi;if(CM===true){Bx.forEach(CU,function(Cb){var Ca=Cb[0];if(Ca!==Au){Cb[0]=AZ.call(this,Ca,CN);}Ca=Cb[1];if(Ca!==Au){Cb[1]=AZ.call(this,Ca,CN);}});}Bx.forEach(CU,function(Ca){if(CT===true){CV.push(Ca[CP]);}else{if(Ca[CP]!==Au){CV.push(Ca[CP]);}}});return CV;}CO=this.getChartInfo();if(CO.isABL){if(CO.dirc===B5.VERTICAL){if(CW==="x"){return CV;}CL=CZ.YAxis;}else{if(CW==="y"){return CV;}CL=CZ.XAxis;}}else{if(CW==="x"){CL=CZ.XAxis;}else{CL=CZ.YAxis;}}CQ=CL.TemplateMetric;Bx.forEach(CQ,function(Ca){CS=Ca.idx;CX=Ca.id;AS=parseInt(Ca.ax,10);CR=(AS===Y.PRIMARY);if((CP===0&&CR===true)||(CP===1&&CR===false)){if(CM){CV.push(CS);}else{CV.push(CX);}}});return CV;}function CJ(){var CL,AS,CM=this.getChartInfo();if(CM.isABL){if(CM.dirc===B5.VERTICAL){CL=this.getMetricsOnYAxis();}else{CL=this.getMetricsOnXAxis();}}else{if(CM.tp===B1.GRID){CL=[];}else{CL=this.getMetricsOnYAxis();AS=this.bubbleSeriesNum;if(CM.isBubbleOrScatter&&AS!==undefined){CL=CL.slice(0,AS);}}}return CL;}function t(AS){var CL=[1,2,7,15,91,16,21,29,30,35];if(Ar(AS,CL)){return 1;}return 0;}function CA(AS){var CL=[8,9,14,22,92,23,28,36,37,42];if(Ar(AS,CL)){return 1;}return 0;}function X(CN,AS){if(!CN||AS>=CN.length){return 1;}var CM,CL=0;for(CM=0;CM<AS;CM++){CL+=(CN[CM]||0);}return CL%2+1;}function AL(CR,CQ,CS,CN,CL){var CM,AS=CL.items.slice(CQ,CQ+CN),CO=AS.length,CP=[];for(CM=0;CM<CO;CM++){CP.push({items:AS[CM].items.slice(CR,CR+CS)});}return CP;}function Bb(AS,CP){var CN=[];var CO=0;var CL=Math.floor(AS/CP);var CM=CP;while(CM--){CN.push(CO);CO+=CL;}CN.push(AS);return CN;}function Bw(AS){var CM=AS.TemplateUnit,CL=0;if(CM){Bx.forEach(CM,function(CN){CL+=l.getAttributeFormCnt(CN);});}return CL;}function n(CO,CL,CN){var CM=CL.length,AS;for(AS=0;AS<CM;AS++){if(CO===CL[AS][CN]){return AS;}}return -1;}function BN(CM){var CP=CM.gsi,CO=CP.mx,CN=CM.nf,CL,AS=CO&&CO.length;for(CL=0;CL<AS;CL++){if(typeof CN[CL].nfs!=="string"){CN[CL].nfs=B3.getNumberFormat(CM,CL);}if(CO[CL].numfmt===undefined){CO[CL].numfmt=CN[CL].nfs;}}}function B2(AS,CQ){var CN=CQ.gts,CM=CN.row,CO=CN.col,CL;[CO,CM].forEach(function(CS){if(!CL&&CS){var CR=CS[CS.length-1];if(CR&&CR.otp===-1&&CR.es){CL=CR.es;}}});function CP(CU,CT,CW,CV){var CS=n(CU.id,CT,"id");if(CS>=0){var CY=CT[CS],CR=CY.dropzones=CY.dropzones||[],CX=Ao.clone(CY.fs);CU.uidx=CS;CU.axis=CW;CU.fs=CX;CU.fcnt=CX&&CX.length;CU.n=CY.n;CU.cs=CY.cs;CU.rs=CY.rs;CR.push(CV);}}["Rows","Columns","SizeBy","AngleBy","Angle","SliceBy","ColorBy","XAxis","YAxis","BreakBy","AdditionalMetrics"].forEach(function(CV){var CX=AS[CV];if(CX){var CT=0,CS=CX.TemplateUnit,CU;if(CS){while(CT<CS.length){CU=CS[CT];if(CU.t===v.Dimension){var CR=[];CM.concat(CO).forEach(function(CY){if(CY.hid===CU.id){CR.push({id:CY.id,t:CY.t,srcUnit:CU});}});Array.prototype.splice.apply(CS,[CT,1].concat(CR));CT+=CR.length;}else{CT++;}}CS.forEach(function(CZ,CY){CZ.idx=CY;});}(CS||[]).forEach(function(CY){CP(CY,CM,"row",CV);CP(CY,CO,"col",CV);});var CW=CX.TemplateMetric;if(CL&&CW){CW.forEach(function(CZ){var CY=n(CZ.id,CL,"oid");if(CY>=0){CZ.idx=CY;CZ.n=CL[CY].n;CL[CY].cds=CZ.cds;}});}}});}function AJ(CM){var CN=["XAxis","YAxis","BreakBy","Rows","Columns","SliceBy"],CP,CL,AS=CN.length,CO,CQ=[];for(CO=0;CO<AS;CO++){CL=CN[CO];CP=CM[CL];if(CP&&CP.MetricNames!==undefined){CQ.push(CL);}}if(CQ.length===1){switch(CQ[0]){case"XAxis":return AG.MetricsByXAxis;case"YAxis":return AG.MetricsByYAxis;case"BreakBy":return AG.MetricsByBreakBy;case"Rows":return AG.MetricsByRow;case"Columns":return AG.MetricsByColumn;case"SliceBy":return AG.MetricsBySlice;}}else{if(CQ.length===2){if((CQ[0]==="XAxis"&&CQ[1]==="YAxis")||(CQ[1]==="XAxis"&&CQ[0]==="YAxis")){return AG.MetricsByAxis;}B3.visPrint("the metricsBy item is incorrect #1");return AG.MetricsByRow;}}if(CQ.length>2){B3.visPrint("the metricsBy item is incorrect #2");return AG.MetricsByRow;}if(CQ.length===0){return AG.MetricsByRow;}}function BE(){var AS=this.dz,CO=this.getChartInfo(),CM=CO.isABL,CN=AS.Rows.MetricNames!==undefined,CL=AS.YAxis.TemplateUnit===undefined;return CM&&CN&&CL;}function V(){var AS=this.dz,CM=AS.Columns.MetricNames!==undefined,CL=AS.XAxis.TemplateMetric===undefined;return CM&&CL;}function BI(CM){var AS=this.dz,CL=AS[CM];return(CL.MetricNames!==undefined);}function BF(CN){var AS=this.dz,CL=AS[CN],CM=Object.keys(CL);return BI.call(this,CN)&&CM.length===1;}function Bd(){var CP=this.getChartInfo(),CO=CP.isPie,CM=CP.isGrid,CN=BF.call(this,"XAxis")||BF.call(this,"YAxis"),AS=this.getMetricsOnAngleBy(),CL=AS.length>=2;return CM&&CO&&CN&&CL;}function AH(CU,CL){var CW=this.dz,CR=[],CQ,CP,CS,CV,CT,CN,CM,CO,AS=this.gts;CT=CW[CU].TemplateUnit;if(CT){CQ=CT.length;for(CP=0;CP<CQ;CP++){CS=CT[CP];CN=CS.axis;if(CN==="row"){CM=AS.row;}else{CM=AS.col;}CO=CS.uidx;CV=CM[CO];if(CL){CR.push(CV[CL]);}else{CR.push(CV);}}}return CR;}function At(CY,AS){var Ca=CY.ColorBy,CS=[],CT,CP,CW,CV,CU=Ca.TemplateUnit,CQ=Ca.TemplateMetric,CZ=false,CN=false,CO=false,CL=BH.NULL;if(CU&&CU.length>0){CZ=true;}if(CQ&&CQ.length>0){CV=CQ[0].idx;CN=true;}if(Ca.MetricNames!==undefined){CO=true;}if(!(CO||CQ||CZ)){return{tp:BH.NULL};}if(CZ){if(CO){CL=BH.ATT_METRICS;}else{CL=BH.ATT;}CT=CU.length;for(CP=0;CP<CT;CP++){CS.push(CU[CP]);}return{tp:CL,atts:CS};}if(CO){CL=BH.METRICS_ITEM;return{tp:CL};}if(CN){CL=BH.METRICS;CW=AS.gsi;this.thresholds=CW.thresholds;var CM=CW.mx[CV].did,CX=this.thresholds&&this.thresholds[CM],CR;if(!CX){return{tp:BH.NULL};}CR=B3.getRankMode(CX);return{tp:CL,metrics:CQ,rankMode:CR,colorByMetricIndex:CV,thresholds:CX};}}function g(CL,CM,AS){var CN=document.createElement("div");CN.setAttribute("class","gm-zero-line horizontal");CN.style.width=CL+"px";CN.style.top=CM+"px";CN.style.left="0px";if(AS){Ba.addClass(CN,"dashed");}else{Ba.addClass(CN,"nondashed");}return CN;}function BM(CL,CM,AS){var CN=document.createElement("div");CN.setAttribute("class","gm-zero-line vertical");CN.style.height=CL+"px";CN.style.top="0px";CN.style.left=CM+"px";if(AS){Ba.addClass(CN,"dashed");}else{Ba.addClass(CN,"nondashed");}return CN;}function AQ(CS){var CL,AS,CN,CR,CM=CS.dataProvider,CT=Q.call(this),CO,CQ=this.defn,CP=CQ.gpp;if(this.ChartFactory===undefined){this.ChartFactory=new B7.MsiChart();this.ChartFactory.setController(this.controller);}CN=this.ChartFactory;AS=this.sharedFormatManager;if(!AS){AS=CN.createFormatManager(CP,this.sharedPool);}if(CT){this.sharedFormatManager=AS;}CL=CN.createDataSet({dataProvider:CM,formatManager:AS});if(CL===null){return null;}if(CL.GetStatus(true)===0){return null;}CR=this.addDisposable(CN.createChartFromFormatManager(CL,AS,null,this.view.enableCETimer));CO=CR.IsDataEnough();if(!CO){return null;}if(this.useCECanvas){CR.setCanvasProps({type:"JSON"});}else{CR.setCanvasProps({type:"SVG",gradPrefix:"gmGrad",mGradientCount:++AU,seriesDrawOrder:CL.GetSeriesIndexByPriority()});}return CR;}function A(CL){var CU=CL?CL.length:0,CT,CS,CQ,AS,CW,CM,CO;var CR=function(CZ){var CX,CY=-1;if(CZ&&CZ.indexOf&&CZ.indexOf("idx")>=0){CX=CZ.split(":");if(CX&&CX.length===2){CY=parseInt(CX[1]);}}return CY;};var CP=function(Cd,Cf){var CZ=this.getChartInfo(),Cc,Cb=null,Cg=this.dz,CY,Ca,Ce,CX;if(CZ.dirc===B5.VERTICAL){CY=Cg.YAxis;Ce=CY.TemplateMetric;Cc=Ce&&Ce.length>0&&Ce[Cd];if(Cc){CX=parseInt(Cc.ax,10);if(CX===Y.PRIMARY&&Cf||CX===Y.SECONDARY&&!Cf){Cb=Cc.id;}}}else{if(CZ.dirc===B5.HORIZONTAL){Ca=Cg.XAxis;Ce=Ca.TemplateMetric;Cc=Ce&&Ce.length>0&&Ce[Cd];if(Cc){CX=parseInt(Cc.ax,10);if(CX===Y.PRIMARY&&Cf||CX===Y.SECONDARY&&!Cf){Cb=Cc.id;}}}}return Cb;};var CN=function(CY,CX,Cb){var Ca=CY[CX],CZ=Cb?0:1;if(Ca[0]===Au||Ca[1]===Au){CY[CX]=undefined;}else{Ca[CZ]=Au;}};for(CT=0;CT<CU;CT++){CS=CL[CT];CQ=CS[0];AS=CR(CQ);if(AS>=0){CO=CP.call(this,AS,true);if(CO){CS[0]=CO;}else{CN(CL,CT,true);}}CW=CS[1];CM=CR(CW);if(CM>=0){CO=CP.call(this,CM,false);if(CO){CS[1]=CO;}else{CN(CL,CT,false);}}}var CV=[];for(CT=0;CT<CU;CT++){if(CL[CT]!==undefined){CV.push(CL[CT]);}}this.setGroupInfo(CV);return CV;}function AN(AS,CS,CO,CM,CQ){var CP=document.createElement("div"),CN=(CM==="x"?CS:AS)-CO,CL,CR;CN=CN>0?CN:0;CL=CM==="x"?AS:CN;CR=CM==="x"?CN:CS;CP.style.position="absolute";CP.style.width=CL+"px";CP.style.height=CR+"px";CP.style[I[CM][CQ?"first":"second"]]="0px";return CP;}mstrmojo.gm.GMController=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gm.GMController",dualAxisEnabled:false,model:undefined,firstRes:undefined,view:undefined,drawer:undefined,manager:undefined,horizontalMode:false,enablePartialRendering:false,chartType:-1,isBlankGrid:false,chartSubType:BL.AUTO,chartDirection:-1,rowHeaderCnt:2,colHeaderCnt:2,splitPlottingMetrics:undefined,inChartLayout:undefined,mWd:0,mHt:0,isEmpty:false,ceChartType:BS.DssGraphTypeVertical_Line_Absolute,isPercentage:false,isStacked:false,isPie:false,piePartition:undefined,totalRows:undefined,totalStartCols:undefined,useCECanvas:false,maxPadding:undefined,maxRowPadding:undefined,maxColPadding:undefined,axisScale:Bm.GLOBAL,axisScaleCache:null,freezeChart:A4,markerShape:undefined,ceMarkerShape:undefined,palette:Bn,isLarge:false,metricsType:AG.MetricsByColumn,fakeGroupInfo:false,shallWeUseGroupInfo:false,enableCombiChart:false,pureAreaChart:false,globalColorMapping:true,ttlDispTp:undefined,mulAttsOnAxisForABL:false,trendlineDefined:false,clusteredBarSpecialCase:false,init:function(AS){this.rhStyles=null;this.chStyles=null;this.xTitleStyles=null;this.yTitleStyles=null;if(this._super){this._super(AS);}this.bandings=[];this.chartInstancePool=[];this.yZeroAxisPos=[];this.xZeroAxisPos=[];this.y2ZeroAxisPos=[];this.x2ZeroAxisPos=[];this.disabledUnits=[];this.yMajorGridLinePos=[];this.yMinorGridLinePos=[];this.xMajorGridLinePos=[];this.xMinorGridLinePos=[];this.xAxisTrims=[];this.x2AxisTrims=[];this.yAxisTrims=[];this.y2AxisTrims=[];this.caAxisTrims=[[],[]];this.axisFormats={x1:[],x2:[],y1:[],y2:[]};this.dz=AS.firstRes.dz;this.gts=AS.firstRes.gts;this.highLightShapeIndex={};this.resetHighLightIndex=true;this.metricsOnDropZone={};this.hasTotal=undefined;this.heightCache=[];this.widthCache=[];},postInit:function(){var AS=this.firstRes,CL=this.xtabModel;this.consumeJSON(AS);this.getAxisScaleMode();this.setupDualAxis();this.composeCustomString();this.configureTrendLineBubbleForecast(AS);if(!AS.eg){this.initMaxMinSizeProps();this.initChartingDetails();}if(AS){this.disabledUnits=c(AS,CL);}},getMetricInGSIMx:function(AS){var CL=this.firstRes.gsi.mx;return CL[AS];},valueTypeDataLabelEnabled:function(){var CL=this.view;if(CL.noData){return false;}var AS=this.getShowDataLabelOptions();return AS.length>0;},isGradientABL:function(){var CL=this.colorByInfo,CO=this.getChartInfo(),AS,CN=false,CM=[];if(CO.isABL===false){return false;}if(CL.tp===BH.ATT){AS=AH.call(this,"YAxis","id");AS=AS.concat(AH.call(this,"XAxis","id"));CM=AH.call(this,"ColorBy","id");Bx.forEach(CM,function(CP){if(AS.indexOf(CP)>=0){CN=true;return false;}});return CN;}else{if(CL.tp===BH.NULL||CL.tp===BH.METRICS_ITEM){return false;}}return true;},textTypeDataLabelEnabled:function(){var AS=this.getChartInfo();if(AS.isPie){return this.getUnitsCountInSliceBy()>0;}return this.getBreakByAttributes().length>0;},checkAttributeIntersection:function(AS,CL){var CR=this.dz,CP,CO,CQ,CN=Ao.clone(AS||{}),CT=[],CM=this.view.model,CS=!!CM.docModel.als;if(this.view.interactor.fmtMode||this.view.interactor.fmtFake){return["mockid"];}Bx.forEach(CL||[],function(CU){CP=CR[CU];CO=CP.TemplateUnit;Bx.forEach(CO||[],function(CV){CQ=[CV.id];if(CS){CQ=CQ.concat(CM.getLinkedAttributes(CV.id)||[]);}Bx.forEach(CQ,function(CW){if(CN.hasOwnProperty(CW)){CT.push(CW);delete CN[CW];return false;}});});});return CT;},isSeasonalityEnabled:function(){var CQ=this,CN=this.getChartInfo(),CP=false,CS=this.xtabModel,CO,CR;if(CN.isABL){var AS=AH.call(this,"YAxis","id");AS=AS.concat(AH.call(this,"XAxis","id"));AS.forEach(function(CU){CO=N(CS,CU);CR=CQ.getAttributeById(CU);if(CO&&CR){var CT=CO.fs,CV=CR.fs;Bx.forEach(CT,function(CW){if((CW.bftp===1||CW.bftp===8)&&Bx.find(CV,"id",CW.fid)!==-1){CP=true;}});}});if(CP){var CM=false,CL=this.trConfigPool;Ao.forEach(CL,function(CT){var CU=CT[AW.TREND_TYPE];if(CU){CM=CM||(CU!==AR.LOG&&CU!==AR.POW);}});if(!CM){CP=false;}}}return CP;},getGlobalExtremeForAxisOrMetric:function(CM,CL,AS){return B6.call(this,CM,CL,AS);},getAttributeById:function(CQ){var CM,AS=this.gts,CO=AS.row,CL=AS.col,CN=CO.length,CP=CL.length;for(CM=0;CM<CN;CM++){if(CO[CM].id===CQ){return CO[CM];}}for(CM=0;CM<CP;CM++){if(CL[CM].id===CQ){return CL[CM];}}return null;},initMaxMinSizeProps:function(){var CQ=this.view,CM=CQ.getWidgetPropertyValue(AW.MAX_SIZE_TYPE),CR=CQ.getWidgetPropertyValue(AW.MAX_SIZE_VALUE),CO=CQ.getWidgetPropertyValue(AW.MIN_SIZE_TYPE),CN=CQ.getWidgetPropertyValue(AW.MIN_SIZE_VALUE),CL=function(CS){if(CS===Ak.MANUAL){return 2;}return 0;},AS=function(CS){if(CS===Bq.MANUAL){return 2;}if(CS===Bq.PROPORTIONAL){return 1;}return 0;};this.sizeInfo=this.sizeInfo||{};var CP=this.sizeInfo;CP.Max={Mode:CL(CM),Size:CR};CP.Min={Mode:AS(CO),Size:CN};CP.ProportionalMinMax=CO===Bq.MANUAL;},initChartingDetails:function(){var CL=this.model,AS=this.mapFromChartToLDSIndex(0,0),CM=CL.getLocalDataSet(AS.r,AS.c),CN=CM.generateDataProvider(),CO=CN[AS.dpIdx];this.chartingDetails={nSeries:CO.innerGetSeriesCount()};},getAxisModeForAxis:function(CL,CP,CO,CN){var AS=this.getMetricsOnAxisOfChart(CL,CP,CO,CN);if(AS&&AS[0]!==undefined){var CM;if(CO==="x"||CO==="y"){CM=CO.toUpperCase()+(CN?"":"2")+"Axis";}else{CM="SizeBy";}return A5.call(this,AS[0],CM);}return undefined;},isPerCellScaleOn:function(CL,CP,AS){var CO,CN,CM;if(AS==="y"||AS==="y1"){CO="y";CM=true;}else{if(AS==="y2"){CO="y";CM=false;}else{if(AS==="x"||AS==="x1"){CO="x";CM=true;}else{CO="x";CM=false;}}}CN=this.getAxisModeForAxis(CL,CP,CO,CM);return CN===Bm.PERCELL;},composeCustomString:function(){var Ca=this,CZ=this.property,CU=CZ.readItem(AW.AXIS_SCALE),CL=CZ.readItem(AW.AXIS_SCALE_DATA),CN=[],Cd=[],AS=this.getNumericAxisOptions(true,undefined,undefined,CN,Cd),CO={},Cc={},CY,CT,CS=Ca.getChartInfo(),CV,CM,Cb,CP,CR,CX,CW,CQ=[];AS.forEach(function(Ce){CV=Ce.key;if(CV!=="AllMetrics"){if(Ce.sizeBy||Ce.key==="SizeBy"){CQ.push(CV);}CY=Ca.getGlobalExtremeForAxisOrMetric(CV,Ce.sizeBy,true);if(CS.isABL){CY=d.call(Ca,CY,AT.call(Ca,CV));}if(CY.scaleType===undefined||isNaN(CY.scaleType)){CY.scaleType=Bm.GLOBAL;}CM={axKey:CV,rMin:CY.min,rMax:CY.max,minMax:CU,logScale:false,isCust:false,scaleType:CY.scaleType};CT=new A0(CM);CO[CV]=CT;}});if(CL){Cc=A0.createAxisScaleCollectionFromArrays(CL,Cc);CW=A0.serializeCollection2String(Cc);for(Cb in CO){if(CO.hasOwnProperty(Cb)){CP=CO[Cb];CR=Cc[Cb];if(CR){if(CU===Bm.CUSTOM){CP.absorbInfo(CR);}else{CP.logScale=CR.logScale===true;}if(CQ.indexOf(Cb)>=0){CP.logScale=false;}}}}}this.sizeByMetricsSharedInAxis=CN;this.collisionSizeByMetric=Cd;CX=A0.serializeCollection2String(CO);if(CW!==CX){CZ.updateItem(AW.AXIS_SCALE_DATA,CX);}},getBreakByAttributes:function(){return AH.call(this,"BreakBy");},getSliceByAttributes:function(){return AH.call(this,"SliceBy");},isMetricNamesInZone:function(AS){return BI.call(this,AS);},isAttrInZone:function(CN,CM){var CL=[],AS=AH.call(this,CM);AS.forEach(function(CO){if(CO.id){CL.push(CO.id);}});return CL.indexOf(CN)!==-1;},getSelectedObjectsInfo:function(AS,CN){var CM=[],CL;Bx.forEach(AS,function(CO){CL=CO.identity;CM.push(CL.getSelectedObjectInfo(CN));});return CM;},isEmptyBreakby:function(){var CL=this.getHostStructure(),AS=CL.BreakBy.length;return AS;},isEmptyVis:function(){var CQ=this.getHostStructure(),CP=this.isPie,CM=CQ.Rows.length,CO=CQ.Columns.length,CL=CQ.XAxis.length,CR=CQ.YAxis.length,CN=CQ.SliceBy.length,AS=CQ.AngleBy.length;if(CP&&this.getChartType()===B1.GRID){return this.isBlankGrid;}if(CM>0||CO>0||CL>0||CR>0){return false;}if(CP){if(CN>0||AS>0){return false;}}return true;},getHostStructure:function(){var CP,CR,CW,CM,CX=this.dz||this.firstRes.dz,CL=["Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","AngleBy"],CU=CL.length,CS={},AS=this.gts,CT=this,CO=CT.xtabModel.data,CV=CO.gsi||{},CN=(CV.rows||[]).concat(CV.cols||[]),CY={},CQ=function(Cb){if(Cb.srcUnit){Cb=Cb.srcUnit;if(CR.filter(function(Cd){return Cb.id===Cd.id;}).length>0){return ;}}var Ca=Ao.copy(Cb,{zone:CP+1});var CZ;if(Cb.t!==4){if(Cb.axis!==undefined&&Cb.uidx!==undefined){CZ=AS[Cb.axis][Cb.uidx];}}var Cc=N(CT.xtabModel,Cb.id);if(Cc&&Cc.fs){Ca.fs=Cc.fs;}if(CY[Cb.id]){Ca.st=CY[Cb.id];}if(CZ){Ca.at=CZ.at;}CR.push(Ca);};CN.forEach(function(CZ){if(CZ.hasOwnProperty("st")&&CZ.hasOwnProperty("did")){CY[CZ.did]=CZ.st;}});for(CP=0;CP<CU;CP++){CW=CL[CP];CM=CX[CW]||CX.Angle;CR=CS[CW]=[];if(CM.TemplateUnit){Bx.forEach(CM.TemplateUnit,CQ);}if(CM.TemplateMetric){Bx.forEach(CM.TemplateMetric,CQ);}if(CM.MetricNames!==undefined){CR.push({n:"Metric Names",id:Bs,t:AM,zone:CP+1});}}return CS;},updatePalette:function(AS){if(AS===AY.DARK){this.palette=p;}else{this.palette=Bn;}},initYAxisMargins:function(){var AS,CM=this.getChartCountInCol(),CL=this.yAxisMargins=[];for(AS=0;AS<CM;AS++){CL.push(-1);}},initXAxisMargins:function(){var CL,AS=this.getChartCountInRow(),CM=this.xAxisMargins=[];for(CL=0;CL<AS;CL++){CM.push(-1);}},formatChartInstancePool:function(){var CL,CM,AS=this.chartInstancePool;CM=this.getChartCountInCol();for(CL=0;CL<CM;CL++){AS[CL]=[];}},configureTrendLine:function(CO){var CW=CO.gsi.mx,AS=this.getChartInfo(),CR=this,CS,CQ,CV,CU={},CN=false,CT={},CX,CP;if(AS.tp===B1.GRID){return ;}if(AS.isABL){CU={globalProp:{trdFwdFst:0,trdBwdFst:0,trdFstEnabled:false,trdSeason:CO.dz.sea!==undefined?parseInt(CO.dz.sea,10):0}};}else{CU={};if(AS.tp===B1.BUBBLE||AS.tp===B1.SCATTER){CN=true;}}CX=CU.globalProp;Bx.forEach(CW,function(CZ){CV=CZ.did;CU[CV]={min:CZ.min,max:CZ.max};if(CZ.foreBwd!==undefined||CZ.foreFwd!==undefined){CU[CV].trdBwdFst=CZ.foreBwd;CU[CV].trdFwdFst=CZ.foreFwd;if(!CN){CX.trdFstEnabled=CX.trdFstEnabled||CZ.fstEnabled!==false;}}CS=CZ.mdls;if(CS){if(AS.isABL){CX.trdFwdFst=CX.trdFwdFst<CZ.foreFwd?CZ.foreFwd:CX.trdFwdFst;CX.trdBwdFst=CX.trdBwdFst<CZ.foreBwd?CZ.foreBwd:CX.trdBwdFst;}CQ=CS.mod_c;CP=1;Bx.forEach(CQ,function(Ca){if(Ca.tp>=AV.MAX&&Ca.tp<=AV.CONST){G.call(CR,CT,Ca,CV,CP);}else{A7.call(CR,CU,Ca,CV,CP);}CP++;});}});if(AS.isABL&&this.isStacked&&!this.splitPlottingMetrics){var CY=AS.dirc===B5.VERTICAL?"Y":"X",CM=CY+"Axis",CL=CO.dz[CM];CS=CL.mdls;if(CS){CQ=CS.mod_c;CP=1;Bx.forEach(CQ,function(Ca){if(Ca.tp>=AV.MAX&&Ca.tp<=AV.CONST){var CZ=Ca.dua===0?CM:CY+"2Axis";G.call(CR,CT,Ca,CZ,CP);}else{B3.visPrint("No way entering this branch");A7.call(CR,CU,Ca,CV,CP);}CP++;});}}this.trConfigPool=CU;this[AW.REF_LINE_DEF]=CT;},hasRefLineInOppositeAxis:function(CQ){var CR=this.dz||this.firstRes.dz,AS=this.getChartInfo(),CL=false;if(AS.isABL&&this.isStacked&&!this.splitPlottingMetrics){var CS=AS.dirc===B5.HORIZONTAL?"Y":"X",CM=CS+"Axis",CN=CR[CM],CP,CO;CP=CN.mdls;if(CP){CO=CP.mod_c;Bx.forEach(CO,function(CT){if(CT.tp>=AV.MAX&&CT.tp<=AV.CONST){if(CT.dua===CQ){CL=true;return false;}}});}}return CL;},getBubbleForcastExtremeForPieWithTotal:function(CN){var CS,CP,CM,AS,CL,CV=this.model.getMetricCount(),CQ=this.getMetricIndexFromID(CN.did),CX=this.totalRows||[],CY=CX.length,CR=this.firstRes.gvs.items,CU,CW,CO,CT;AS=CR.length;for(CS=0;CS<CY;CS++){CL=CX[CS];if(CL<AS){CU=CR[CL].items||[];CP=CQ;CM=CU.length;while(CP<CM){CW=CU[CP];if(CW!==undefined){CW=parseFloat(CW.rv);if(!isNaN(CW)){if(CO===undefined||CO>CW){CO=CW;}if(CT===undefined||CT<CW){CT=CW;}}}CP+=CV;}}}if(CO!==undefined){return{min:CO,max:CT};}return{min:CN.min,max:CN.max};},configureTrendLineBubbleForecast:function(CN){var CT=CN.gsi.mx,AS=this.getChartInfo(),CR=this,CS,CQ,CO,CP={},CM=false,CL=false;if(AS.tp===B1.GRID){return ;}if(AS.tp===B1.BUBBLE||AS.tp===B1.SCATTER){CM=true;}if(this.isPie&&this.hasTotalForPie()){CL=true;}Bx.forEach(CT,function(CU){CS=CU.did;if(CM){if(CL){CO=CR.getBubbleForcastExtremeForPieWithTotal(CU);}else{CO={min:CU.min,max:CU.max};}CQ={min:CO.min,max:CO.max};CP[CS]=CQ;CQ[AW.TREND_BUBBLE_FORE_FWD]=CQ[AW.TREND_BUBBLE_MAX]=CO.max;CQ[AW.TREND_BUBBLE_FORE_BWD]=CQ[AW.TREND_BUBBLE_MIN]=CO.min;if(CU.foreBwd!==undefined||CU.foreFwd!==undefined){CQ[AW.TREND_BUBBLE_FORE_FWD]=CU.foreFwd;CQ[AW.TREND_BUBBLE_FORE_BWD]=CU.foreBwd;CQ[AW.TREND_BUBBLE_FORE_ENABLED]=CU.fstEnabled!==false;}}});this[AW.TREND_BUBBLE_FORE_DEF]=CP;},getTrendLineJSON:function(AS){return AS.trendref;},getTrendLineObjectsForMetricAtScale:function(CP,CU,CN,CM,CT,CO){var CR=this.trendLineJSON,AS=CR[CO],CS,CV,CQ,CL=[];if(AS){Bx.forEach(AS,function(CW){CV=undefined;CS=CW["x-vars"];if(CW.mid===CP&&(CM===undefined||(CS&&CS[0]===CM))){CV=Ao.copy(CW,{});if(CO==="g"){CV.inChartModel=CV.models;}else{if(CO==="all"){CV.inChartModel=CV.models[CU][CN];}else{if(CO==="r"){CV.inChartModel=CV.models[CU];}else{CV.inChartModel=CV.models[CN];}}}delete CV.models;}if(CV){CQ=isNaN(CV.inChartModel[0].model);if((CQ===true&&CT===true)||(!CQ&&!CT)){CL.push(CV);}}});}return CL;},getTrendLinesObjectForMetric:function(CN,AS,CP,CM,CQ){var CO=this,CR=["g","all","r","c"],CL=[];CR.forEach(function(CS){CL=CL.concat(CO.getTrendLineObjectsForMetricAtScale(CN,AS,CP,CM,CQ,CS));});return CL;},isLogScale:function(CM,CR,CW){var CV=this,CN=CV.view,CU,CL=CV.getChartInfo(),CZ;if(CL.isABL&&CL.sbtp===BV.EnumSubtype.PERCENT){return false;}if(CV.logScaleCache===undefined){CV.logScaleCache=[{},{}];}var CP,CS=CM[0]==="y"||CM[0]==="Y",CQ=CM==="y"||CM==="Y"||CM==="y1"||CM==="Y1"||CM==="x"||CM==="X"||CM==="x1"||CM==="X1";CZ=CV.logScaleCache[CS?1:0];if(CS){CP=CZ[CR]=CZ[CR]||{};}else{CP=CZ[CW]=CZ[CW]||{};}if(CQ){if(CP.Primary!==undefined){return CP.Primary;}}else{if(CP.Secondary!==undefined){return CP.Secondary;}}var CX;if(CS){if(CQ){CX="YAxis";}else{CX="Y2Axis";}}else{if(CQ){CX="XAxis";}else{CX="X2Axis";}}var AS=Ap.call(this,CR,CW,CX);if(AS&&AS.length>0){CU=Z.call(CV,AS,CM,false);}if(!CU||CU.length===0){return undefined;}var CT,CY,CO;CT=CN.getWidgetPropertyValue(AW.AXIS_SCALE_DATA);CO=A0.createAxisScaleCollectionFromArrays(CT);CY=CO[CU.key];if(CY){if(CQ){CP.Primary=CY.logScale;}else{CP.Secondary=CY.logScale;}return CY.logScale;}return false;},checkDataLabelType:function(){var AS=this.property.readItem(AW.DATA_LABEL);if(AS===undefined||((AS===2)&&!this.valueTypeDataLabelEnabled())||(AS===3&&!this.textTypeDataLabelEnabled())){this.property.updateItem(AW.DATA_LABEL,1);}this.checkMetricLevelDataLabel();},checkMetricLevelDataLabel:function(){var CL=this.property.readItem(AW.DATA_LABEL),CN=this.getShowDataLabelOptions(),AS,CM;if(CL===2&&CN.length===1){AS=this.property.readItem(AW.METRIC_LEVEL_DATA_LABEL);if(AS){CM=CN[0].key;if(AS[CM]===false){AS[CM]=true;this.property.updateItem(AW.METRIC_LEVEL_DATA_LABEL,AS);}}}},consumeJSON:function(CY){var CU,CS,CQ,Cm,Ca,Ce,Cd,Cb,Ck=this,Ch=CY;j.call(this);var Cl=this.view.model.data.dz.visProp.fmt.th;if(Cl!==undefined&&Cl!==null){if(typeof Cl==="number"){this.view.theme=Cl;}else{if(typeof Cl==="string"){this.view.theme=parseInt(Cl,10);}}}var CW=CY.dz,CL=CW.visProp.fmt;Ck.trendLineJSON=this.getTrendLineJSON(CY);Ck.ttlDispTp=CY.lnm;Ck.fmt=CL;Ck.extrs=CY.extrs;var AS=CY.gts;Ck.th=[];Bx.forEach(AS.row,function(Cn){CF(Cn);var Co=N(Ck.xtabModel,Cn.id);if(Co&&Co.t){Cn.t=Co.t;}if(Cn.cs===undefined){Cn.cs=1;}});Bx.forEach(AS.col,function(Cn){CF(Cn);var Co=N(Ck.xtabModel,Cn.id);if(Co&&Co.t){Cn.t=Co.t;}if(Cn.rs===undefined){if(Cn.opt!==-1){Cn.rs=1;}}});B2(CW,CY);BN(CY);Bo.call(this,CY);CQ=Ch.dm.rct;Cm=Ch.dm.cct;CU=Ch.ptt.row;CS=Ch.ptt.col;BG.call(this,CY);Cb=At.call(this,CW,CY);if(Cb.tp===BH.METRICS){var CV=Cb.metrics[0].id;Ck.thresholds=CY.gsi.thresholds[CV];}Ck.colorByInfo=Cb;Ck.metricsType=AJ.call(this,CW);CK.call(this,CY,this.ceChartType);Ck.configureTrendLine(CY);if(Ch.gvs.items){Ca=AL(0,0,Cm,CQ,Ch.gvs);}this.model=this.addDisposable(new BV.GMDataModel({ttlDispTp:this.ttlDispTp,eg:Ch.eg,rp:CU,cp:CS,rct:CQ,cct:Cm,gts:Ch.gts,fullNf:Ch.nf,mx:Ch.gsi.mx,dz:CW,trConfigPool:this.trConfigPool,clusteredBarSpecialCase:this.clusteredBarSpecialCase,onlyMetricNamesOnAxisForGridPie:this.onlyMetricNamesOnAxisForGridPie,isMetricNamesOnXAxis:this.isMetricNamesOnXAxis,colorType:Cb.tp,gmCtr:this,metricsType:this.metricsType,splitPlottingMetrics:this.getSplitPlottingMetrics(),getMetricsOnXAxis:this.getControllerAPI(L.GET_METRICS_ON_X),getMetricsOnYAxis:this.getControllerAPI(L.GET_METRICS_ON_Y),getSizeByMetrics:this.getControllerAPI(L.GET_METRICS_ON_SIZE_BY),property:this.property,isBlankGrid:this.isBlankGrid}));Ce=this.model;var CX=this.getChartInfo();if(CX.isABL&&this.getSplitPlottingMetrics()){Cd=this.getSecondaryMetrics();if(Cd.length>0){this.shallWeUseGroupInfo=true;}}Ce.shallWeUseGroupInfo=this.shallWeUseGroupInfo;Ck.shouldDrawShapeFlag=AB(CW,CX);if(!this.shallWeUseGroupInfo){this.removeGroupInfo();}else{this.updateGroupInfo();}if(Ch.gvs.items){Ce.feedLdss(0,0,Cm,CQ,Ca);}if(Ch.ghs.chs.items){Ce.feedChs(Ch.ghs.chs);}if(Ch.ghs.rhs.items){Ce.feedRhs(Ch.ghs.rhs);}if(Ce.cetSelectors){this.view.cetSelectors=Ce.cetSelectors;delete Ce.cetSelectors;}Ce.extractInfoLowestHeaderInfoToAttrObj();Ce.constructColorByInfo();this.inChartLayout=this.getSubChartsLayout();if(this.isPie){this.preprocessForPie(CY);}var CP=this.getRowTitleInfo(true),CT=this.getColTitleInfo(true),Cc=this.attributeSelectionInfo;if(CP&&CP.items){Bx.forEach(CP.items,function(Cn){Cc[Cn.id]=Cn;});}if(CT&&CT.items){Bx.forEach(CT.items,function(Cn){Cc[Cn.id]=Cn;});}var Cg=this.getYAxisInfo(),CM=this.getXAxisInfo();this.xIsNumeric=CM.isMetric;this.yIsNumeric=Cg.isMetric;this.axisLayout=this.getAxisLayout4CE();this.enablePartialRendering=this.view.getWidgetPropertyValue(AW.PARTIAL_RENDER)==="true";if(CX.isBubbleOrScatter&&(this.metricsType!==AG.MetricsByRow&&this.metricsType!==AG.MetricsByColumn)){var CO=this.getMetricsOnXAxis(),CN=this.getMetricsOnYAxis(),Ci=this.getSizeByMetrics(),Cf=Math.min(CO.length,CN.length);if(Ci.length>0){Cf=Math.min(Cf,Ci.length);}this.bubbleSeriesNum=Cf;}if(CX.isABL){var CZ=AH.call(this,"YAxis","n"),Cj=AH.call(this,"XAxis","n"),CR=AH.call(this,"BreakBy","n");if(CZ.length+Cj.length===0&&CR.length>0){this.specialSortable=true;}}},getAxisOriginLineIdentity:function(AS){var CM=AS+"axOrLnId";if(this[CM]){return this[CM];}var CL,CN=["x1","x2"],CO=CN.indexOf(AS)!==-1?b.X_AXIS_ORIGIN_LINE:b.Y_AXIS_ORIGIN_LINE;CL=new mstrmojo.gm.GeneralIdentity({objType:CO});this[CM]=CL;return CL;},getAxisOriginLabelIdentity:function(AS){var CM=AS+"axOrLbId";if(this[CM]){return this[CM];}var CL,CN=["x1","x2"],CO=CN.indexOf(AS)!==-1?b.X_AXIS_ORIGIN_LABEL:b.Y_AXIS_ORIGIN_LABEL;CL=new mstrmojo.gm.GeneralIdentity({objType:CO});this[CM]=CL;return CL;},getAllAxisProperties:function(){var AS=this.view;return AS.getAllAxisProperties();},printExtremes:function(){var CN=this,CM,CL,CQ,CP,AS,CO;CP=CN.getChartCountInCol();AS=CN.getChartCountInRow();for(CM=0;CM<CP;CM++){for(CL=0;CL<AS;CL++){CQ=U.call(this,CM,CL);CO=BZ.call(CN,CM,CL);B3.visPrint("("+CM+", "+CL+")"+JSON.stringify(CO));}}},getGraphShapeCount:function(CP){var CR=this,CO,CN,CL,CQ=0,AS=0,CM=0,CS,CT;CP=CP||false;CS=CR.getChartCountInCol();CT=CR.getChartCountInRow();for(CO=0;CO<CS;CO++){for(CN=0;CN<CT;CN++){CL=U.call(this,CO,CN);AS=CL.innerGetSeriesCount();CM=CL.innerGetGroupCount();if(CP&&AS>0&&CM>0){return CS*CT*AS*CM;}CQ+=AS*CM;}}return CQ;},getColorByMetricExtremes:function(){return BO.call(this);},getCategoricalAxisLabelsInfo:function(CL,CT,CN,CW){CW=CW||{purpose:"content"};var CV=false,CU=0,Cb=0,CY,Cc,AS,CZ,CX=[],Cd,CQ=B1,CS=this.getChartInfo();if(CS.isABL&&CS.dirc===B5.VERTICAL&&CN==="y"){CV=true;}else{if(CS.isABL&&CS.dirc===B5.HORIZONTAL&&CN==="x"){CV=true;}else{CY=U.call(this,CL,CT);Cc=CY.innerGetSeriesCount();AS=CY.innerGetGroupCount();CZ=CY.getGroupCount();CV=(Cc===0||AS===0);}}if(CV){switch(CW.purpose){case"count":return 0;default:return CX;}}if(CS.tp===CQ.GRID){switch(CW.purpose){case"count":return CN==="x"?AS:Cc;default:if(CN==="x"){for(Cb=0;Cb<AS;Cb++){Cd=CY.getGraphCell(CU,Cb);CX.push(Cd.getGroupLabel(0).join(" "));}}else{for(CU=0;CU<Cc;CU++){Cd=CY.getGraphCell(CU,Cb);CX.push(Cd.getSeriesLabel(0).join(" "));}}return CX;}}switch(CW.purpose){case"count":var Ce=0;if(CZ===AS){for(Cb=0;Cb<AS;Cb++){Cd=CY.innerGetGraphCell(CU,Cb);if(!Cd.isFaked){Ce++;}}}else{Ce=CZ;}return Ce;default:if(CZ===AS){for(Cb=0;Cb<AS;Cb++){Cd=CY.innerGetGraphCell(CU,Cb);if(!Cd.isFaked){CX.push(Cd.getGroupLabel(0).join(" "));}}}else{var CP=CY.bwdLbs||[],CR=CP.length,Ca=CY.fwdLbs||[],CO,CM;for(Cb=0;Cb<CZ;Cb++){if(Cb<CR){CO=(CP[Cb]).join(" ");}else{if(Cb>=CR+AS){CM=Ca[Cb-(CR+AS)];if(CM){CO=CM.join(" ");}else{CO="";}}else{Cd=CY.innerGetGraphCell(CU,Cb-CR);CO=Cd.getGroupLabel(0).join(" ");}}CX.push(CO);}}return CX;}},getColorByLegendInfo:function(){var AS=this.model;return AS.getColorByLegendInfo();},getSizeByLegendInfo:function(){return this.getAdaptedSizeByDataProvider();},constructSizebyDataProvider:function(){return Am.call(this);},getSizeByExtremeForNegativeProportionalMode:function(CS){var CR,CP,CM,AS,CU,CW,CN,CO,CX,CT,CL,CV=this.model.getMetricCount(),CQ=this.firstRes.gvs.items;AS=CQ.length;for(CR=0;CR<AS;CR++){CU=CQ[CR].items||[];CP=CS;CM=CU.length;while(CP<CM){CN=CU[CP];if(CN!==undefined){CN=parseFloat(CN.rv);if(!isNaN(CN)){CW=Math.abs(CN);if(CO===undefined||CO>CW){CO=CW;CX=CN;}if(CT===undefined||CT<CW){CT=CW;CL=CN;}}}CP+=CV;}}return{min:CX,max:CL};},getAdaptedSizeByDataProvider:function(){var AS=this.constructSizebyDataProvider(),CP,CN={},CO=mstrmojo.desc(13966,"Size by:"),CM,CL=[];if(!AS.sizeByTitles||AS.sizeByTitles.length<=0){return null;}CN.custMetrics=AS.sizeByScaleType;CM=AS.sizeByTitles.length;Bx.forEach(AS.sizeByTitles,function(CQ){CL.push(CQ);});if(CM>1){CN.items=CL;}if(AS.sizeByMode===true&&AS.sizeByDataProvider.length>1){CN.item=CM>1?CO:AS.sizeByTitles[0];CP=CN.elements=[];Bx.forEach(AS.sizeByDataProvider,function(CQ){CP.push({sign:"<",v:CQ.value});});if(CP.length===5){CP[0].sign="=";CP[4].sign="=";}CN.caseFlag=0;return CN;}if(AS.sizeByMode===true&&AS.sizeByDataProvider.length===1){CN.caseFlag=2;CN.item=CM>1?CO:AS.sizeByTitles[0];CN.elements=[{diameter:12,shape:"rect",sign:"=",v:AS.sizeByDataProvider[0].value}];return CN;}CN.item=CO;CN.items=CL;CN.elements=[];CN.caseFlag=1;return CN;},getXAxisLabels:function(CL){var AS=0;return this.getCategoricalAxisLabelsInfo(AS,CL,"x");},getYAxisLabels:function(AS){var CL=0;return this.getCategoricalAxisLabelsInfo(AS,CL,"y");},countXAxisLabels:function(CL){var AS=0;return this.getCategoricalAxisLabelsInfo(AS,CL,"x",{purpose:"count"});},countYAxisLabels:function(AS){var CL=0;return this.getCategoricalAxisLabelsInfo(AS,CL,"y",{purpose:"count"});},estimateXAxisSize:function(CQ,CM,CO){var CN,CU,AS=CQ.length,CR=0,CS=0,CP=20,CL=20,CT=this.view.HTML5PROPS.AXIS_LABEL_X;for(CN=0;CN<AS;CN++){CU=B3.measureTextSize(CQ[CN],CT,0);CR=Math.max(CR,CU.width);CS=Math.max(CS,CU.height);}if(CM===Af.STAGGER){CP=(CR+H)*((AS+1)>>1)+H;CL=CS*2+H*3;}else{if(CM===Af.ROTATE){CP=CS*AS+H*(AS+1);CL=CR+H*2;}else{CP=CR*AS+H*(AS+1);CL=CS+H*2;}}if(CO&&!CM&&CP>CO){CP=CO;}if(CP<AS*5){CP=AS*5;}return{width:CP,height:CL};},estimateYAxisSize:function(CN){var CM,CV,CO,CL,AS=CN.length,CS=0,CT=0,CU=this.view.HTML5PROPS.AXIS_LABEL_Y,CP="H",CR,CQ=true;for(CM=0;CM<AS;CM++){CV=B3.measureTextSize(CN[CM],CU,0);CS=Math.max(CS,CV.width);if(CQ){if(CR===undefined){CR=B3.measureTextSize(CP,CU,1).height;CR=Math.round(CR*0.85);}CT=CR;}else{CT=Math.max(CT,CV.height);}}CO=CS+H*2;CL=CT*AS+H*(2*AS);return{width:CO,height:CL};},initLayouter:function(CV){var CR,CQ,Cb=this,Cc=this.view.getWidgetPropertyValue(AW.FIT_TO),CT=this.getChartCountInCol(),CU=this.getChartCountInRow(),CL=this.getXAxisInfo(),CZ=this.getYAxisInfo(),CX=function(){var Cf,Cg,Ci,Ce=0,Ch=0,Cd=Math.min(10,CU);for(Cf=0;Cf<Cd;Cf++){Ci=Cb.getXAxisLabels(Cf);Cg=Cb.estimateXAxisSize(Ci,Af.NORMAL).width;Ch=Math.max(Ch,Cg);Ce+=Ci.length;if(Ce>100){break;}}return Ch;},CN=function(){var Cf,Cg,Ci,Ce=0,Ch=0,Cd=Math.min(10,CU);for(Cf=0;Cf<Cd;Cf++){Ci=Cb.getXAxisLabels(Cf);Cg=Cb.estimateXAxisSize(Ci,Af.STAGGER).width;Ch=Math.max(Ch,Cg);Ce+=Ci.length;if(Ce>100){break;}}return Ch;},Ca=function(Ch){var Cg,Cl,Cd,Ce,Cj,Ci=0,Cf=Ch.length,Ck=Cb.view.HTML5PROPS.AXIS_LABEL_Y;for(Cg=0;Cg<Cf;Cg++){Cl=Ch[Cg];Cd=B3.measureTextWidth(Cl,Ck,0);if(Cl.length>10){Ce=Cl.substr(0,10)+"...";Cj=B3.measureTextWidth(Ce,Ck,0);Cd=Math.min(Cd,Cj);}Ci=Math.max(Ci,Cd);}return Ci;},CM=function(){var Ce,Cf,Cd=0;for(Ce=0;Ce<CU;Ce++){Cf=Cb.countXAxisLabels(Ce);Cd+=Cf;}return Cd;},CP=function(){var Cd,Cf,Ce=[];for(Cd=0;Cd<CU;Cd++){Cf=Cb.getXAxisLabels(Cd);Ce=Ce.concat(Cf);}return Ce;},CY=function(){var Cd,Cf,Ce=[];for(Cd=0;Cd<CU;Cd++){Cf=Cb.countXAxisLabels(Cd);Ce.push(Cf);}return Ce;},CS=function(){var Cd,Cf,Ce=[];for(Cd=0;Cd<CT;Cd++){Cf=Cb.countYAxisLabels(Cd);Ce.push(Cf);}return Ce;},CW=function(){var Cg,Cd,Ch,Cf=1,Ce=Cb.getChartInfo(),Cm=Ce.shape,Cl=Cb.chartSubType,Cj=Cb.chartType,Ck=r,Ci=[];if(Cm===Ai.BAR&&Cl===BL.CLUSTERED&&Cj!==B1.GRID){Cf=Cb.chartingDetails.nSeries;}if(Cm===Ai.PIE||Cm===Ai.RING){Ck=Math.max(24,Ck);}else{if((Cm===Ai.LINE||Cm===Ai.AREA)&&!Ce.isCombo){Ck=S;}}for(Cg=0;Cg<CU;Cg++){Ch=Cb.countXAxisLabels(Cg);Cd=(Cf*Ck)*(Ch+0.5);Ci.push(Math.floor(Cd+0.5));}return Ci;},AS=function(){var Cg,Cl,Ch,Cf=1,Ce=Cb.getChartInfo(),Cm=Ce.shape,Ck=Cb.chartSubType,Cj=Cb.chartType,Cd=r,Ci=[];if(Cm===BV.EnumShape.BAR&&Ck===BL.CLUSTERED&&Cj!==B1.GRID){Cf=Cb.chartingDetails.nSeries;}if(Cm===BV.EnumShape.PIE||Cm===BV.EnumShape.RING){Cd=Math.max(24,Cd);}else{if((Cm===Ai.LINE||Cm===Ai.AREA)&&!Ce.isCombo){Cd=S;}}for(Cg=0;Cg<CT;Cg++){Ch=Cb.countYAxisLabels(Cg);Cl=(Cf*Cd)*(Ch+0.5);Ci.push(Math.floor(Cl+0.5));}return Ci;},CO=function(Cg){var Cd,Ch,Ce,Cf=[];if(!Cg||Cg.length===0){for(Cd=0;Cd<CT;Cd++){Cf.push(Cd%2);}return Cf;}Ch=Cg.length;Cf=[0];Ce=Cg[0];for(Cd=1;Cd<Ch;Cd++){Cf.push(Ce%2);Ce+=Cg[1];}return Cf;};CV.fitTo=Cc;CV.chartType=this.chartType;CV.nRows=CT;CV.nCols=CU;CV.xInfo=CL;CV.yInfo=CZ;CV.xAxisType=CL.isMetric?Bl.METRIC:Bl.ATTRIBUTE;CV.yAxisType=CZ.isMetric?Bl.METRIC:Bl.ATTRIBUTE;CV.widthCache=this.widthCache;CV.heightCache=this.heightCache;CV.minWidths=CL.isMetric?null:CW();CV.minHeights=CZ.isMetric?null:AS();CR=CL.isMetric?undefined:CY();CQ=CZ.isMetric?undefined:CS();if(Cc===AO.CONTENT){CV.maxXAxisWidth=CL.isMetric?undefined:CX();CV.maxXAxisWidthStagger=CL.isMetric?undefined:CN();delete CV.widthRatio;delete CV.heightRatio;}else{CV.nLabels=CM();CV.minXLabelWidth=CL.isMetric?undefined:Ca(CP());CV.widthRatio=CR;CV.heightRatio=CQ;}this.widthRatio=CR;this.heightRatio=CQ;this.bandingFlags=CO(CQ);CV.API.owner=this;CV.API.getXAxisHeight=this.getXAxisHeight;CV.API.getXAxis2Height=this.getXAxis2Height;CV.API.getYAxisWidth=this.getYAxisWidth;CV.API.getYAxis2Width=this.getYAxis2Width;CV.API.getRowHeight=this.getControllerAPI(L.GET_CHART_HEIGHT);CV.API.getColWidth=this.getControllerAPI(L.GET_CHART_WIDTH);CV.API.calculateAllXAxisStyle=this.getControllerAPI(L.LAYOUT_ALL_X_AXIS_LABELS);CV.API.calculateOneXAxisStyle=this.getControllerAPI(L.LAYOUT_ONE_X_AXIS_LABELS);},preprocessForPie:function(Cb){var Ca=this.getChartInfo(),CM=false,CS=this.model,CT=B1,Cd=Ca.dirc,CW=BV.EnumABLDirection,CQ=Ca.tp,Cc=this.getUnitsCountInSliceBy(),CZ=this.piePartition=[],CX=this.totalRows=[],CN=this.totalStartCols=[],CV,Cl,Cf,Cg,Ce,CY,CP,CO,Ch,Ck,CU,AS=0,CR;if(!CM){CY=this.dz;CP=CY.SliceBy;CO=CP.TemplateUnit;if(CO&&CO.length>0){AS=CO[0].uidx;}else{B3.visPrint("actually, it should be a bubble chart. not implemented!");}}CV=CS.rct;Cl=CS.cct;Cg=CS.getUnitAttributesCountOnRow();Ce=CS.getUnitAttributesCountOnCol();Ck=CS.getMetricCount();var CL,Ci;if((Ca.isABL&&Cd===CW.VERTICAL)||(CQ===CT.BUBBLE||CQ===CT.SCATTER)||(CQ===CT.GRID)){CL=function(){if(CV>0){CZ.push(0);}if(!isNaN(AS)){AS=Cj(Cb.gts,"row",AS);for(Cf=0;Cf<CV;Cf++){CR=CS.getRowHeaderObj(Cf,AS);if(CR&&CR.stt===1){if(Cf+1<CV){CZ.push(Cf+1);}}}}Ch=CZ.length;for(Cf=1;Cf<Ch;Cf++){CX.push(CZ[Cf]-1);}CX.push(CV-1);};Ci=function(){CU=Cg-1-Cc;var Co=0,Cm,Cn,Cr=[],Ct=[];if(CU>=0){var Cq=this.gts.row[CU];Cq.fcnt=Cq.fcnt||Cq.cs||Cq.rs||1;if(Cq.t===1&&Cq.fcnt>1){var Cs=CS.modelRhs[CU];Cf=0;while(Cf<=Cs.mxIdx){if(Cs[Cf]){CZ.push(Cf);}Cf++;}}else{Cm=this.getBreakByAttributeIndices(true);Cn=Bx.indexOf(Cm,CU)>=0;if(Cn){for(var Cp=Cm.length-1;Cp>=0;Cp--){Co=0;for(Cf=0;Cf<Cm[Cp];Cf++){Co+=this.gts.row[Cf].cs||1;}Cr=this.getPiePartitions(Co,true);if(Cr.length>Ct.length){Ct=Cr;}if(Ct.length===CV){break;}}CZ=this.piePartition=Ct;}else{for(Cf=0;Cf<CU;Cf++){Co+=this.gts.row[Cf].cs||1;}CZ=this.piePartition=this.getPiePartitions(Co,true);}}}else{CZ.push(0);}};if(CM){Ci.call(this);}else{if(this.hasTotalForPie()){CL.call(this);}else{Ci.call(this);}}}else{if(Ca.isABL&&Cd===CW.HORIZONTAL){CL=function(){if(Cl>0){CZ.push(0);}if(!isNaN(AS)){AS=Cj(Cb.gts,"col",AS);for(Cf=0;Cf<Cl;Cf++){CR=CS.getColHeaderObj(Cf,AS);if(CR&&CR.stt===1){CZ.push(Cf);}}}Ch=CZ.length;for(Cf=1;Cf<Ch;Cf++){CN.push(CZ[Cf]);}CN.push(Cl-Ck);};Ci=function(){CU=Ce-1-Cc;var Cm,Cn,Cp=[],Cq=[];if(CU>=0){Cm=this.getBreakByAttributeIndices(false);Cn=Bx.indexOf(Cm,CU)>=0;if(Cn){for(var Co=Cm.length-1;Co>=0;Co--){Cp=this.getPiePartitions(Cm[Co],false);if(Cp.length>Cq.length){Cq=Cp;}if(Cq.length===Cl){break;}}CZ=this.piePartition=Cq;}else{CZ=this.piePartition=this.getPiePartitions(CU,false);}}else{CZ.push(0);}};if(CM){Ci.call(this);}else{if(this.hasTotalForPie()){CL.call(this);}else{Ci.call(this);}}}}function Cj(Cr,Cn,Cq,Co){Cq=Cq||0;if(!!!Cr){return Cq;}Co=Co||0;var Cp,Cs,Cm,Cu="cs",Ct=Co;if(Cn.toLowerCase()==="row"){Cm=Cr.row;}else{Cm=Cr.col;Cu="rs";}for(Cp=0;Cm&&Cp<Cq;Cp++){Cs=Cm[Cp];Ct+=(Cs[Cu]||1);}return Ct;}},getBreakByAttributeIndices:function Bp(CS){var CM=this.dz.BreakBy,CR=CM&&CM.TemplateUnit||[],CO,CN,AS,CL=this.gts,CP=CS?CL.row:CL.col,CQ=[];if(CR.length>0){for(CO=0;CO<CR.length;CO++){AS=CR[CO];for(CN=0;CN<CP.length;CN++){if(CP[CN].t===12&&AS.id===CP[CN].id){CQ.push(CN);break;}}}}return CQ;},getPiePartitions:function Ag(CV,CX){var CT=this.model,CU=CX?CT.rct:CT.cct,CS,CQ,AS,CP,CW,CR,CL,CO,CN,CM=[];for(CS=0;CS<CU;CS++){AS=CX?CT.getRowHeaderObj(CS,CV):CT.getColHeaderObj(CS,CV);CP=[];CT.collectHeaderObj(AS,CP);CW=CP.length;CR=[];for(CQ=0;CQ<CW;CQ++){CL=CP[CQ];CR.push(CL.idx);}CO=CR.join(",");if(CN!==CO){CM.push(CS);CN=CO;}}return CM;},hasTotalForPie:function(){if(this.hasTotal!==undefined){return this.hasTotal;}var CN,AS=this.dz,CM,CP=false,CO=this.getUnitsCountInSliceBy()>0,CL=["XAxis","YAxis","SizeBy"];for(CN=0;CN<3;CN++){CM=AS[CL[CN]];if(CM&&CM.TemplateMetric&&CM.TemplateMetric.length>0){CP=true;break;}}this.hasTotal=CP&&CO;return this.hasTotal;},setCEChartType:function(AS){if(AS&&this.ceChartType===AS){return false;}if(AS===undefined){AS=this.ceChartType;}this.ceChartType=AS;this.isPercentage=Ar(AS,[7,21,35,14,28,42]);this.isStacked=Ar(AS,[2,16,21,28,30,9,23,37]);return true;},getUnitsCountInSliceBy:function(){return this.getSliceByAttrsID().length;},getCellHandler:function(CM,AS,CQ,CV,CO){var CR=this.model,CS,CN,CW,CU,CP;if(CQ!==Au){CN=this.mapFromChartToLDSIndex(CM,AS);CS=CN.r;CW=CN.c;CU=CR.mapChartIndexToGrid(CS,CR.rp);CP=CR.mapChartIndexToGrid(CW,CR.cp);if(CO){var CT=this.piePartition,CX,CL=0;if(CV===B5.VERTICAL){CX=this.totalRows;if(CX.length>0&&CT.length>0){CL=CX[0]-CT[0];CU+=CL;}}else{if(CV===B5.HORIZONTAL){CX=this.totalStartCols;if(CX.length>0&&CT.length>0){CL=CX[0]-CT[0];CP+=CL;}}}}return{row:CU+this.gts.col.length,col:CP+CQ+this.gts.row.length};}return undefined;},getYAxisInfo:function(CZ,CN,CV,CS,CR){var CU=this,CM=this.getChartInfo(),CQ=this.model,CL=[],CP,CY=true,CT,AS,CO,CX=this.onlyMetricNamesOnAxisForGridPie,CW=this.isMetricNamesOnXAxis;if(this.chartType===B1.GRID||(CA(this.ceChartType))||CX){CY=false;}CR=false;if(CY){if(CM.isABL||CR){if(CV===false){CO=this.getSecondaryMetrics(CS);CT=CQ.getMetricNamesFromIndex(CO);AS=CQ.getMetricIDsFromIndex(CO);}else{CO=this.getPrimaryMetrics(CS);CT=CQ.getMetricNamesFromIndex(CO);AS=CQ.getMetricIDsFromIndex(CO);}if(CZ!==undefined&&CN!==undefined){Bx.forEach(CO,function(Ca){CL.push(CU.getCellHandler(CZ,CN,Ca,CM.dirc,CM.isPie));});}}else{if(CV===false){CO=this.getMetricsOnSecondaryYAxis();}else{CO=this.getMetricsOnPrimaryYAxis();}if(CM.isBubbleOrScatter&&this.bubbleSeriesNum!==undefined){CO=CO.slice(0,this.bubbleSeriesNum);}CT=CQ.getMetricNamesFromIndex(CO);AS=CQ.getMetricIDsFromIndex(CO);}}else{if(CX&&!CW){CT=["Metric Names"];AS=["0"];CO=this.getMetricsOnAngleBy();}else{CT=AH.call(this,"YAxis","n");AS=AH.call(this,"YAxis","id");}}return{isMetric:CY,items:CT,ids:AS,cellHandlers:CL,mtsIdxArr:CO,displayItems:CP};},getXAxisInfo:function(CZ,CN,CV,CS){var CU=this,CR=this.model,CO=this.chartType,CM=this.getChartInfo(),CL=[],CQ,CY=true,CT,AS,CP,CX=this.onlyMetricNamesOnAxisForGridPie,CW=this.isMetricNamesOnXAxis;if((t(this.ceChartType))||CO===B1.GRID||CX){CY=false;}if(CY){if(CM.isABL){if(CV===false){CP=this.getSecondaryMetrics(CS);CT=CR.getMetricNamesFromIndex(CP);AS=CR.getMetricIDsFromIndex(CP);}else{CP=this.getPrimaryMetrics(CS);CT=CR.getMetricNamesFromIndex(CP);AS=CR.getMetricIDsFromIndex(CP);}if(CZ!==undefined&&CN!==undefined){Bx.forEach(CP,function(Ca){CL.push(CU.getCellHandler(CZ,CN,Ca,CM.dirc,CM.isPie));});}}else{if(CV===false){CP=this.getMetricsOnSecondaryXAxis();}else{CP=this.getMetricsOnPrimaryXAxis();}if(CM.isBubbleOrScatter&&this.bubbleSeriesNum!==undefined){CP=CP.slice(0,this.bubbleSeriesNum);}CT=CR.getMetricNamesFromIndex(CP);AS=CR.getMetricIDsFromIndex(CP);}}else{if(CX&&CW){CT=["Metric Names"];AS=["0"];CP=this.getMetricsOnAngleBy();}else{CT=AH.call(this,"XAxis","n");AS=AH.call(this,"XAxis","id");}}return{isMetric:CY,items:CT,ids:AS,cellHandlers:CL,mtsIdxArr:CP,displayItems:CQ};},getRowTitleInfo:function(CL){var CN=this.model,CM=CN.getRowTitleInfo(),CO=this.rowHeaderCnt,AS=[];if(CO<CM.length){CM.slice(0,CO);}Bx.forEach(CM,function(CP){if(CL){AS.push(CP);}else{AS.push(CP.n);}});return{items:AS};},getColTitleInfo:function(CL){var CN=this.model,CM=CN.getColTitleInfo(),CO=this.colHeaderCnt,AS=[];if(CO<CM.length){CM.slice(0,CO);}Bx.forEach(CM,function(CP){if(CL){AS.push(CP);}else{AS.push(CP.n);}});return{items:AS};},isGrid:function(){return this.chartType===B1.GRID;},isBubble:function(){return this.chartType===B1.BUBBLE;},isScatter:function(){return this.chartType===B1.SCATTER;},isBubbleOrScatter:function(){var AS=this.chartType;return AS===B1.BUBBLE||AS===B1.SCATTER;},clearLayoutInfo:function(){this.widthCache=[];this.heightCache=[];},updateChartInfo:function(){delete this.chartInfo;},getChartInfo:function(){var CQ=this.chartInfo;if(CQ){return CQ;}var CO=B1,CP=this.chartType,CM=false,CL=this.property,CN=CL&&CL.readItem(AW.DATA_LABEL),AS=(CL&&CL.readItem(AW.DATA_LABELS_PLACEMENT))||1;if(CP===CO.AREA||CP===CO.BAR||CP===CO.LINE){CM=true;}this.chartInfo={tp:CP,sbtp:this.chartSubType,dirc:this.chartDirection,shape:this.markerShape,ceMarkerShape:this.ceMarkerShape,isABL:CM,isPie:this.isPie,isRing:false,hasSizeBy:this.hasSizeBy(),isCombo:this.enableCombiChart,isBubbleOrScatter:this.isBubbleOrScatter(),isGrid:this.isGrid(),dlTp:CN,dlPlmt:AS};return this.chartInfo;},getDrillableAttributes:function(){return["Year","Month"];},getDebugMenu:function(){var CL=[],AS=this.enablePartialRendering;if(AS){CL.push({n:"Disable Partial Rendering",did:F.DISABLE_PARTIAL_RENDERING});}else{CL.push({n:"Enable Partial Rendering",did:F.ENABLE_PARTIAL_RENDERING});}if(l.mUseTimer){CL.push({n:"Disable Timer",did:F.DISABLE_TIMER});}else{CL.push({n:"Enable Timer",did:F.ENABLE_TIMER});}if(this.view.enableCETimer){CL.push({n:"Disable CE Timer",did:F.DISABLE_CE_TIMER});}else{CL.push({n:"Enable CE Timer",did:F.ENABLE_CE_TIMER});}CL.push({n:"Print Extremes",did:F.OUTPUT_EXTREMES});CL.push({n:"Print #DataPoints",did:F.OUTPUT_DATA_COUNT});return CL;},getContextMenuData:function(CL){var AS=[];if(CL===BW.GM_ROW_HEADER_TITLE){AS.push({n:"CIRCLE",did:F.CIRCLE});AS.push({n:"SQUARE",did:F.SQUARE});AS.push({n:"PIE",did:F.PIE});AS.push({n:"TICKER",did:F.TICKER});AS.push({n:"RING",did:F.RING});}else{if(CL===BW.GM_COL_HEADER_TITLE){AS.push({n:"Print Extremes",did:F.OUTPUT_EXTREMES});AS.push({n:"Open Legend",did:F.OPEN_LEGEND});AS.push({n:"Switch Combination Chart",did:F.COMBINATION});}}return AS;},getChartType:function(){if(this.chartType===undefined||B1.UNDEFINED){var CP=this.firstRes,AS=CP.dz,CO=AS.XAxis,CL=AS.YAxis,CN,CM=this.view.getWidgetPropertyValue(AW.SHAPE);if(CO.TemplateMetric&&CL.TemplateMetric){if(this.hasSizeBy()){CN=B1.BUBBLE;}else{CN=B1.SCATTER;}}else{if(!CO.TemplateMetric&&!CL.TemplateMetric){CN=B1.GRID;if((!CO.TemplateUnit||CO.TemplateUnit.length===0)&&(!CL.TemplateUnit||CL.TemplateUnit.length===0)){this.isBlankGrid=true;}}else{if(CM===Bz.LINE){CN=B1.LINE;}else{if(CM===Bz.BAR){CN=B1.BAR;}else{if(CM===Bz.AREA){CN=B1.AREA;}else{if(CM===Bz.PIE){CN=B1.BAR;}else{if(CM===Bz.RING){CN=B1.BAR;}else{CN=B1.BAR;}}}}}if(CL.TemplateMetric){this.chartDirection=BV.EnumABLDirection.VERTICAL;}else{this.horizontalMode=true;this.chartDirection=BV.EnumABLDirection.HORIZONTAL;}}}this.chartType=CN;this.isPie=(CM===Bz.PIE||CM===Bz.RING);if(this.isPie){this.isBlankGrid=false;}if(CP.eg!==undefined){this.isBlankGrid=true;}}return this.chartType;},getChartDirection:function(){if(this.chartDirection===undefined){this.getChartType();}return this.chartDirection;},getMetricsOnAxisOfChart:function(CR,Cd,CM,CY,CW){var CS,CN,CP=this.getChartInfo(),CX=CP.dirc,CT,CQ,Cf,CV,CZ,CO,Ca,Cc,CU,AS,CL,Cb,Ce;if(CP.tp===B1.GRID){return[];}if(CM==="y"&&CP.isABL&&CX===1){return[];}if(CM==="x"&&CP.isABL&&CX===2){return[];}this.metricsOnAxisCache=this.metricsOnAxisCache||{};this.metricsOnAxisCache[CM]=this.metricsOnAxisCache[CM]||{};Ce=(CM==="y"||CM==="z")?CR:Cd;Ce+="#"+(CY?1:0)+"#"+(CW?1:0);Cb=this.metricsOnAxisCache[CM][Ce];if(Cb!==undefined){return Cb;}CS=this.mapFromChartToLDSIndex(CR,Cd);CN=this.splitPlottingMetrics;CT=this.getMetricsOnXAxis();CQ=this.getMetricsOnYAxis();Cf=CT.concat(CQ);CV=this.getPrimaryMetrics(true);CZ=this.getSecondaryMetrics(true);CO=this.getSizeByMetrics();Cc=this.inChartLayout||this.getSubChartsLayout();Ca=Math.min(CT.length,CQ.length);if(CO.length>0){Ca=Math.min(Ca,CO.length);}if(!CN){if(CM==="y"){if(CP.isABL){if(CY===false){Cb=CZ;}else{Cb=CV;}}else{if(CP.tp===B1.BUBBLE||CP.tp===B1.SCATTER){if((this.haveY1&&CY!==false)||(!this.haveY1&&CY===false)){Cb=CQ.slice(0,Ca);}}}}else{if(CM==="x"){if(CP.isABL){if(CY===false){Cb=CZ;}else{Cb=CV;}}else{if(CP.tp===B1.BUBBLE||CP.tp===B1.SCATTER){if((this.haveX1&&CY!==false)||(!this.haveX1&&CY===false)){Cb=CT.slice(0,Ca);}}}}else{if(CP.tp===B1.BUBBLE||CP.tp===B1.SCATTER){if(CO.length>0){Cb=CO.slice(0,Ca);}}else{Cb=CO;}}}}else{if(CM==="y"){if(CP.isABL&&CX===2){CU=CY?"YAxis":"Y2Axis";AS=CY?CV[0]:CZ[0];if(AS!==undefined){CL=A5.call(this,AS,CU);}if(this.metricsType===AG.MetricsByRow){if(CY===false){Cb=CZ.length>0?[CZ[CS.inchtRow]]:[];}else{Cb=CV.length>0?[CV[CS.inchtRow]]:[];}}else{if(CW&&this.metricsType===AG.MetricsByColumn&&CL===Bm.PERCELL){Cb=[Cf[Cd%Cf.length]];}else{if(CY===false){Cb=CZ;}else{Cb=CV;}}}}else{if(CP.tp===B1.BUBBLE||CP.tp===B1.SCATTER){if((this.haveY1&&CY!==false)||(!this.haveY1&&CY===false)){Cb=CQ.length>0?[CQ[CR%Cc.r]]:[];}}}}else{if(CM==="x"){if(CP.isABL&&CX===1){CU=CY?"XAxis":"X2Axis";AS=CY?CV[0]:CZ[0];if(AS!==undefined){CL=A5.call(this,AS,CU);}if(this.metricsType===AG.MetricsByColumn){if(CY===false){Cb=CZ.length>0?[CZ[CS.inchtCol]]:[];}else{Cb=CV.length>0?[CV[CS.inchtCol]]:[];}}else{if(CW&&this.metricsType===AG.MetricsByRow&&CL===Bm.PERCELL){Cb=[Cf[CR%Cf.length]];}else{if(CY===false){Cb=CZ;}else{Cb=CV;}}}}else{if(CP.tp===B1.BUBBLE||CP.tp===B1.SCATTER){if((this.haveX1&&CY!==false)||(!this.haveX1&&CY===false)){Cb=CT.length>0?[CT[Cd%Cc.c]]:[];}}}}else{if((CP.tp===B1.BUBBLE||CP.tp===B1.SCATTER)&&CO.length>0){Cb=CO.length>0?[CO[CR%CO.length]]:[];}else{Cb=CO;}}}}Cb=Cb||[];this.metricsOnAxisCache[CM][Ce]=Cb;return Cb;},getSubChartsLayout:function(){var CR=this.splitPlottingMetrics,CN=this.getChartInfo(),CM,AS=this.shallWeUseGroupInfo,CL=this.metricsType;if(!CR){return{r:1,c:1};}var CP=B1,CS=this.model.plottingMetricsIndex;if(CN.tp===CP.BUBBLE||CN.tp===CP.SCATTER){var CQ=this.getMetricsOnXAxis();var CO=this.getMetricsOnYAxis();return{r:CO.length,c:CQ.length};}if(CL===AG.MetricsByRow){if(AS&&CN.isABL){CM=this.getGroupInfo();return{r:CM.length,c:1};}return{r:CS.length,c:1};}if(CL===AG.MetricsByColumn){if(AS&&CN.isABL){CM=this.getGroupInfo();return{r:1,c:CM.length};}return{r:1,c:CS.length};}B3.visPrint("getSubChartsLayout need to be implemented for this chart type");return{r:1,c:1};},getChartCountInCol:function(){return this.model.cic*this.inChartLayout.r;},getChartCountInRow:function(){return this.model.cir*this.inChartLayout.c;},getSplitPlottingMetrics:function(){var CL=B1;if(this.chartType===CL.GRID&&this.isPie===false){this.splitPlottingMetrics=false;}else{if(this.chartType===CL.GRID&&this.isPie&&this.getMetricsOnAngleBy().length===0){this.splitPlottingMetrics=false;}else{if(this.chartType===CL.GRID&&this.isPie&&BI.call(this,"SliceBy")){this.splitPlottingMetrics=false;}else{var AS=this.metricsType;this.splitPlottingMetrics=(AS===AG.MetricsByRow||AS===AG.MetricsByColumn);}}}return this.splitPlottingMetrics;},reRenderGM:function(){this.widthCache.length=0;this.heightCache.length=0;this.view.reRender();},hideContextMenu:function(){var AS=this.view.contextMenu;if(AS!==undefined){AS.hideContextMenu();}},getAxisScaleMode:function(){var CL=this.view.getWidgetPropertyValue(AW.AXIS_SCALE),AS,CM;if(CL){this.axisScale=CL;if(CL===Bm.CUSTOM){CM=this.view.getWidgetPropertyValue(AW.AXIS_SCALE_DATA);if(CM&&CM.length>0){AS=parseInt(CM[0][1],10);if(AS<=Bm.PERCELL){this.axisScale=AS;}else{this.axisScale=Bm.CUSTOM;}}}}else{this.axisScale=Bm.GLOBAL;}return this.axisScale;},getPerCellSetting:function(AS,CL){return{xPerCell:this.isPerCellScaleOn(AS,CL,"x1")||false,x2PerCell:this.isPerCellScaleOn(AS,CL,"x2")||false,y2PerCell:this.isPerCellScaleOn(AS,CL,"y2")||false,yPerCell:this.isPerCellScaleOn(AS,CL,"y1")||false};},getChartUniformAxisTrims:function(AS,CT){var CL,CY=this.yAxisTrims,CR=this.xAxisTrims,CV=CY[AS],CX=CR[CT];var CU=this.y2AxisTrims,CO=this.x2AxisTrims,CZ=CU[AS],CS=CO[CT];CL=By.call(this,CX,CV,CS,CZ);var CQ=this.caAxisTrims[0],CN=this.caAxisTrims[1],CW=CQ[CT],CM=CN[AS],CP;CP=O.call(this,CW,CM);CL=mstrmojo.hash.copy(CP,CL);return CL;},getChartUniformAxisMargins:function(CN,CQ){var CM=this.yAxisMargins,CP=this.xAxisMargins,AS=CM[CN],CO=CP[CQ],CL;if(!CO){B3.visPrint("cannot find the x-axis margin");}if(!AS){B3.visPrint("cannot find the y-axis margin");}CL=T.call(this,AS,CO);return CL;},getDataAreaPadding:function(CY,Ce){var Cc=this.axisScale,CS=this.maxDataAreaPaddingCache,CT=Bm,CN,CZ,Cb,Ca,CP,CL,AS,CU;if(Cc===CT.PERCELL){if(CS&&CS[CY]&&CS[CY][Ce]){return CS[CY][Ce];}else{return null;}}if(Cc===CT.PERROWCOL||Cc===CT.GLOBAL||Cc===CT.CUSTOM){var CV;if(this.dataAreaPaddingGlobalZero){CV={X1:{HighOffset:0,LowOffset:0},Y1:{HighOffset:0,LowOffset:0},X2:{HighOffset:0,LowOffset:0},Y2:{HighOffset:0,LowOffset:0}};}else{if(!CS){return null;}if(CY>=As){CY=0;}if(Ce>=h){Ce=0;}CN=CS.length;CZ=CS[0].length;var Cf,CQ;if(this.maxRowPadding===undefined){Cf=this.maxRowPadding=[];for(Cb=0;Cb<CN;Cb++){CP=CS[Cb][0];for(Ca=0;Ca<CZ;Ca++){if(Ca!==0){CP=Bu(CP,CS[Cb][Ca]);}}Cf.push(CP);}}if(this.maxColPadding===undefined){CQ=this.maxColPadding=[];for(Ca=0;Ca<CZ;Ca++){AS=CS[0][Ca];for(Cb=0;Cb<CN;Cb++){if(Cb!==0){AS=Bu(AS,CS[Cb][Ca]);}}CQ.push(AS);}}Cf=this.maxRowPadding;CQ=this.maxColPadding;CP=Cf[CY];AS=CQ[Ce];if(Cc===CT.GLOBAL||Cc===CT.CUSTOM){CL=this.inChartLayout;CU=CL.r;for(Cb=CY%CN;Cb<CN;Cb+=CU){CP=Bu(CP,Cf[Cb]);}CU=CL.c;for(Cb=Ce%CZ;Cb<CZ;Cb+=CU){AS=Bu(AS,CQ[Cb]);}}CV=CD(CP,AS);}var Cg,CX,CM,CO,Cd=this.layoutPaddingEchos,CR=[Ce,Ce,CY,CY],CW=["X1","X2","Y1","Y2"];if(Cd){for(CX=0;CX<CW.length;CX++){Cg=CW[CX];CO=CR[CX];CM=Cd[Cg][CO];if(CM){CV[Cg].HighOffset=Math.max(CV[Cg].HighOffset,(CM.HighOffset||0));CV[Cg].LowOffset=Math.max(CV[Cg].LowOffset,(CM.LowOffset||0));}}}return CV;}},getMetricNameOnAngleBy:function(CL){function CM(CQ){var CP,CO,CN;CP=this.dz;CO=CP.AngleBy||CP.Angle;if(CO){CN=CO.TemplateMetric;}if(CN&&CN.length>CQ){return CN[CQ];}return null;}var AS=CM.call(this,CL);if(AS){return AS.n;}return"";},getMetricsOnAngleBy:function(){return Aj.call(this,"AngleBy");},getMetricsOnXAxis:function(){return Aj.call(this,"XAxis");},setGroupInfo:function(AS){var CL=this.view;if(CL.GMController===undefined){CL.GMController=this;}CL.setWidgetPropertyValue(AW.GROUP_INFO,JSON.stringify(AS));},removeGroupInfo:function(){this.setGroupInfo([]);},updateGroupInfo:function(){var CN=this.view,CM=this.getGroupInfo(),CO=[],CL=[Au,Au],AS=this.gts;Bx.forEach(CM,function(CP){if(CP[0]!==Au){CL[0]=AZ.call(this,CP[0],AS);}if(CP[1]!==Au){CL[1]=AZ.call(this,CP[1],AS);}if(CL[0]!==Au||CL[1]!==Au){CO.push(CP);}});CN.setWidgetPropertyValue(AW.GROUP_INFO,JSON.stringify(CO));},hasGroupInfoStored:function(){var CL,AS=this.view.getWidgetPropertyValue(AW.GROUP_INFO);if(AS){AS=AS.replace(/'/g,'"');CL=JSON.parse(AS);}if(CL&&CL.length>0){if(AS.indexOf("idx")>=0){CL=A.call(this,CL);}return{existing:true,gi:CL};}return{existing:false};},getDummyGroupInfo:function(CN,CU,CL){var CV=this.model;var CS=[],CQ,CR=this.getPrimaryMetrics(),CM=this.getSecondaryMetrics(),Ca=(CV&&CV.getMetricIds())||[],CY=BB(CR,Ca),AS=BB(CM,Ca);if(CN){var CZ=function(Cc){var Cb;for(Cb=0;Cb<Cc.length;Cb++){if(Cc[Cb]===CN){Cc.splice(Cb,1);break;}}};CZ(CY);CZ(AS);if(CL){if(CU){CY=[CN].concat(CY);}else{AS=[CN].concat(AS);}}else{if(CU){CY=CY.concat([CN]);}else{AS=AS.concat([CN]);}}}var CP=CY.length,CO=AS.length,CT=Math.max(CP,CO);for(CQ=0;CQ<CT;CQ++){var CX,CW;CX=(CY[CQ]!==undefined?CY[CQ]:Au);CW=(AS[CQ]!==undefined?AS[CQ]:Au);CS.push([CX,CW]);}return CS;},getMetricIndexFromID:function(AS){return AZ.call(this,AS,this.gts);},getGroupInfo:function(CN){var CO=this.view,CL=this.gts,CM=[];if(CO.GMController===undefined){CO.GMController=this;}var AS=this.hasGroupInfoStored();if(AS.existing){CM=AS.gi;}else{CM=this.getDummyGroupInfo();CO.setWidgetPropertyValue(AW.GROUP_INFO,JSON.stringify(CM));}if(CN===true){Bx.forEach(CM,function(CQ){var CP=CQ[0];if(CP!==Au){CQ[0]=AZ.call(this,CP,CL);}CP=CQ[1];if(CP!==Au){CQ[1]=AZ.call(this,CP,CL);}});}return CM;},haveMetricAxisTitle:function(CP){var CL=this.haveX1||this.haveX2,CN=this.haveY1||this.haveY2,CQ=this.getChartInfo(),AS=this.model&&this.model.dz,CO=AS.XAxis,CM=AS.YAxis;if(CQ.isABL){CL=!!CO.TemplateMetric;CN=!!CM.TemplateMetric;}if(CP==="x"){return CL;}if(CP==="y"){return CN;}return CN||CL;},haveAxisTitle:function(AS){var CO=this.haveX1||this.haveX2,CS=this.haveY1||this.haveY2,CM=this.getChartInfo(),CR=CM.dirc,CQ,CP,CN,CL=this.metricsType;if(CM.isABL){CP=this.getMetricsOnYAxis();CQ=this.getMetricsOnXAxis();CN=CQ.concat(CP);if(CN.length===1){if(CQ.length===1){CO=false;}else{CS=false;}}else{if(CR===B5.VERTICAL){if(CL===AG.MetricsByRow||CL===AG.MetricsByYAxis){CO=false;}else{if(CL===AG.MetricsByXAxis){if(this.hasAttributesInDropzone("XAxis")){CO=false;}else{CO=true;CS=false;}}else{CO=false;CS=false;}}}else{if(CL===AG.MetricsByColumn||CL===AG.MetricsByXAxis){CS=false;}else{if(CL===AG.MetricsByYAxis){if(this.hasAttributesInDropzone("YAxis")){CS=false;}else{CO=false;CS=true;}}else{CO=false;CS=false;}}}}}if(AS==="x"){return CO;}if(AS==="y"){return CS;}return CS||CO;},haveAttributeAxisTitle:function(CM){var AS=this.haveX1||this.haveX2,CL=this.haveY1||this.haveY2;AS=this.hasAttributesInDropzone("XAxis");CL=this.hasAttributesInDropzone("YAxis");if(CM==="x"){return AS;}if(CM==="y"){return CL;}return CL||AS;},getShapeForOption:function(CP){if(this.view.noData){return[];}var AS=this.metricShapeArr,CL=this.model.colorType,CN,CQ=this.getChartInfo(),CO=[];if(!CQ.isABL||!this.enableCombiChart){return[CQ.shape];}if(CP!==undefined&&(CL===BH.ATT_METRICS||CL===BH.METRICS_ITEM)){var CM;Bx.forEach(CP.comb,function(CR){if(CR.tp===4){CM=CR.eid;return false;}});if(CM!==undefined){CN=this.getMetricIndexFromID(CM);}}if(CP!==undefined&&CP.optLvl===Bf.METRIC){CN=this.getMetricIndexFromID(CP.key);}if(CN===undefined||CN===Au){Bx.forEach(AS,function(CR){if(CR!==undefined&&CR>=0){CO.push(CR);}});return CO;}return[AS[CN]];},getOnTheFlyShapeForMetric:function(CM){var AS=this.getForbiddenShapeForMetric(CM),CL=this.getResolvedShapeForMetric(CM);if(AS.indexOf(CL)>=0){return Ai.LINE;}return CL;},getResolvedShapeForMetric:function(CP){var CM=this.model,CN=CM&&CM.getMetricIDsFromIndex([CP])[0],CL=this.property.generalProps,CO=CL.metricShapes,AS;if(CO){AS=CO[CN];}if(AS!==undefined){return AS;}return this.markerShape;},getForbiddenShapeForMetric:function(CO){var CR=this,CM=[],CT,CS=[],AS=this.getChartInfo(),CL=this.getPrimaryMetrics(false),CN=this.getSecondaryMetrics(false);if(AS.isABL){if(CN.indexOf(CO)>=0){CT=this.hasGroupInfoStored();if(CT.existing){var CQ=this.getGroupInfo(true);CQ.forEach(function(CV){if(CV[1]===CO&&CV[0]>=0){CM.push(CV[0]);}});}else{CM=CL;}}}var CU=false,CP=false;CM.forEach(function(CV){var CW=CR.getResolvedShapeForMetric(CV);if(CW===Ai.BAR){CU=true;}else{if(CW===Ai.AREA){CP=true;}}});if(CU){CS.push(Ai.BAR);}if(CP){CS.push(Ai.AREA);}return CS;},getPrimaryMetrics:function(AS){if(!this.horizontalMode){return this.getMetricsOnPrimaryYAxis(AS);}return this.getMetricsOnPrimaryXAxis(AS);},getSecondaryMetrics:function(AS){if(!this.horizontalMode){return this.getMetricsOnSecondaryYAxis(AS);}return this.getMetricsOnSecondaryXAxis(AS);},getMetricsOnPrimaryXAxis:function(CL){var AS=Bt.call(this,0,CL,true,"x");if(AS){return AS;}var CM=this.getMetricsOnXAxis();return AA.call(this,CM,true,CL);},getMetricsOnSecondaryXAxis:function(CL){var AS=Bt.call(this,1,CL,true,"x");if(AS){return AS;}var CM=this.getMetricsOnXAxis();return AA.call(this,CM,false,CL);},getMetricsOnPrimaryYAxis:function(CL){var AS=Bt.call(this,0,CL,true,"y");if(AS){return AS;}var CM=this.getMetricsOnYAxis();return AA.call(this,CM,true,CL);},getMetricsOnSecondaryYAxis:function(CL){var AS=Bt.call(this,1,CL,true,"y");if(AS){return AS;}var CM=this.getMetricsOnYAxis();return AA.call(this,CM,false,CL);},getMetricsOnYAxis:function(){return Aj.call(this,"YAxis");},getMetricsOnTooltip:function(){return Aj.call(this,"AdditionalMetrics");},getSliceByAttrsID:function(){var CL=this.getSliceByAttributes(),AS=[];Bx.forEach(CL,function(CM){AS.push(CM.id);});return AS;},getBreakByAttrsID:function(){var CL=this.getBreakByAttributes(),AS=[];Bx.forEach(CL,function(CM){AS.push(CM.id);});return AS;},getColorByAttrsID:function(){var CN,CL=[],CM,AS,CO;CN=this.colorByInfo;if(CN.tp===BH.ATT||CN.tp===BH.ATT_METRICS){CO=CN.atts;AS=CO.length;for(CM=0;CM<AS;CM++){CL.push(CO[CM].id);}return CL;}return[];},getRowColorAttrsIndex:function(){return A1.call(this,"row");},getColColorAttrsIndex:function(){return A1.call(this,"col");},getColorByUnitIds:function(CY){var CP,CM,CS,CT,CU=[],CX,CR,CO,CQ=[],CW=this,CV=false,CL=false;if(CY===BV.EnumABLDirection.VERTICAL){CO=["Rows","YAxis","Columns","XAxis"];}else{CO=["Columns","XAxis","Rows","YAxis"];}CO.forEach(function(CZ){CR=AH.call(CW,CZ,"id");Bx.forEach(CR,function(Ca){CQ.push({id:Ca,zone:CZ});});if((CZ==="Rows"||CZ==="Columns")&&CW.dz[CZ].MetricNames!==undefined){CQ.push({id:-1,zone:CZ});}});CT=this.colorByInfo;if(CT.tp===BH.METRICS_ITEM||CT.tp===BH.ATT_METRICS){CV=true;}if(CT.tp===BH.ATT||CT.tp===BH.ATT_METRICS||CT.tp===BH.METRICS_ITEM){CS=CT.atts;CM=(CS&&CS.length)||0;Bx.forEach(CQ,function(CZ){if(CZ.id===-1&&CV){CU.push({id:-1,unique:false,zone:CZ.zone,es:CW.getMetricIdsOfABLChart(CY)});CL=true;return ;}for(CP=0;CP<CM;CP++){CX=CS[CP];if(CZ.id===CX.id){CU.push({id:CX.id,unique:false,zone:CZ.zone,es:CW.getElementsOfAttr(CX)});break;}}});if(!CL&&CV){CU.push({id:-1,unique:true,es:this.getMetricIdsOfABLChart(CY)});}var AS=[],CN;for(CP=0,CN=CU.length;CP<CN;CP++){AS.push(CU[CP].id);}for(CP=0;CP<CM;CP++){CX=CS[CP];if(AS.indexOf(CX.id)<0){CU.push({id:CX.id,unique:true,es:this.getElementsOfAttr(CX)});}}}return CU;},getElementsOfAttr:function(AS){var CL=this.gts,CQ=CL.row,CM=CL.col,CO=(AS.axis==="row"?CQ:CM),CN=AS.uidx,CP=[];Bx.forEach(CO[CN].es,function(CR){CP.push(CR.id);});return CP;},getMetricIdsOfABLChart:function(CM){var CO,CP,CN=[],CQ,CL=this.dz,AS;if(CM===BV.EnumABLDirection.VERTICAL){CQ="YAxis";}else{CQ="XAxis";}AS=CL[CQ].TemplateMetric;if(AS&&AS.length>0){CP=AS.length;for(CO=0;CO<CP;CO++){CN.push(AS[CO].id);}}return CN;},splitPiesInGraphCellForABL:function(){if(this.chartType===5){return true;}return this.metricsType!==AG.MetricsBySlice;},getSizeByScaleType:function(AS){var CL,CN="SizeBy",CM;CL=this.getSizeByMetrics();CM=CL[AS];return A5.call(this,CM,CN);},getSizeByMetrics:function(){var CQ,CL,CR,CM,AS,CS,CO,CP="SizeBy",CN=this.metricsOnDropZone[CP];if(!CN){AS=this.gts;CS=this.dz[CP];CO=this.chartType;CQ=CS.TemplateMetric;CN=[];if(CQ&&CQ.length>0){CM=this.getMetricsOnYAxis();if(K.call(this,CM)){CR=Math.min(CQ.length,CM.length);}else{if((CO===B1.BUBBLE)||(CO===B1.SCATTER)){CR=CQ.length;}else{CR=1;}}for(CL=0;CL<CR;CL++){CN.push(AZ.call(this,CQ[CL].id,AS));}}this.metricsOnDropZone[CP]=CN;}return CN;},getColorByMetrics:function(){return Aj.call(this,"ColorBy");},getAttributesOnDropZone:function(AS,CL){return AH.call(this,AS,CL);},getGMHeaderCount:function(CL){var AS=this.dz;return Bw.call(this,AS[CL]);},setupDualAxis:function(){var CR,CN,CQ=this.getChartInfo(),CM,CP,CO=this;this.haveX1=false;this.haveX2=false;this.haveY1=false;this.haveY2=false;this.drawX1Numeric=false;this.drawX2Numeric=false;this.drawY1Numeric=false;this.drawY2Numeric=false;if(CQ.isABL){if(this.horizontalMode){CN=this.getYAxisInfo();if(CN.items.length>0){this.haveY1=true;}if(this.clusteredBarSpecialCase){this.haveY1=true;}}else{CR=this.getXAxisInfo();CM=this.getMetricsOnPrimaryYAxis();CP=this.getMetricsOnSecondaryYAxis();if(CR.items.length>0){this.haveX1=true;}if(this.clusteredBarSpecialCase){this.haveX1=true;}}}var CL=function(CT,CS){if(CT.length>0){if(CS==="XAxis"){CO.haveX1=true;}else{if(CS==="XAxis2"){CO.haveX2=true;}else{if(CS==="YAxis"){CO.haveY1=true;}else{if(CS==="YAxis2"){CO.haveY2=true;}}}}Bx.forEach(CT,function(CU){if(CU===undefined||CU<0){return ;}if(A5.call(CO,CU,CS)!==Bm.PERCELL){if(CS==="XAxis"){CO.drawX1Numeric=true;}else{if(CS==="XAxis2"){CO.drawX2Numeric=true;}else{if(CS==="YAxis"){CO.drawY1Numeric=true;}else{if(CS==="YAxis2"){CO.drawY2Numeric=true;}}}}}else{if(CS==="XAxis"){CO.drawX1Numeric=CO.drawX1Numeric||CO.getChartCountInCol()===1;}else{if(CS==="XAxis2"){CO.drawX2Numeric=CO.drawX2Numeric||CO.getChartCountInCol()===1;}else{if(CS==="YAxis"){CO.drawY1Numeric=CO.drawY1Numeric||CO.getChartCountInRow()===1;}else{if(CS==="YAxis2"){CO.drawY2Numeric=CO.drawY2Numeric||CO.getChartCountInRow()===1;}}}}}});}};CL(this.getMetricsOnPrimaryXAxis(),"XAxis");CL(this.getMetricsOnSecondaryXAxis(),"XAxis2");CL(this.getMetricsOnPrimaryYAxis(),"YAxis");CL(this.getMetricsOnSecondaryYAxis(),"YAxis2");if(CO.clusteredBarSpecialCase){if(CQ.dirc===B9.VERTICAL){this.drawX1Numeric=true;}else{this.drawY1Numeric=true;}}if(this.isBubbleOrScatter()){var AS=this.axisLayout;this.haveY1=(AS&A8)!==0;this.haveY2=(AS&Bg)!==0;this.haveX1=(AS&Br)!==0;this.haveX2=(AS&P)!==0;}if(this.onlyMetricNamesOnAxisForGridPie){if(this.isMetricNamesOnXAxis){this.haveX1=true;}else{this.haveY1=true;}}if(CQ.isGrid&&CQ.isPie){if(this.isMetricNamesOnRows){this.haveY1=true;}}CN=this.getYAxisInfo();if(CQ.isGrid&&CN.items.length>0&&CN.isMetric===false){this.haveY1=true;}},setupAxisLayout:function(){var Cb,CP=0,Cg=false,CU=false,CW=false,CY=false,CX=false,CN=false,CL=false,AS=false,CM=false,CV=false,CT=this.chartType,Cj=this.chartDirection,CR=this.metricsType,CQ=this.getXAxisInfo(),Ca=this.getXAxisInfo(undefined,undefined,false,undefined),Cd=this.getYAxisInfo(),Ch=this.getYAxisInfo(undefined,undefined,false,undefined),Ci=this.getMetricsOnAngleBy(),Cc=CT===B1.AREA||CT===B1.BAR||CT===B1.LINE,Ce=this.isPie,CO=this.isGrid(),Ck=this.isBubbleOrScatter();if(Cc){if(Cj===B9.VERTICAL){Cb=Cd.items.length;if(Ch&&Ch.items){CP=Ch.items.length;}if(Cb>0&&CP>0){CU=true;}if(CU){if(CR===AG.MetricsByRow){CW=true;}else{CW=true;AS=true;}}else{if((Cb<=1&&CP<=1)||CR===AG.MetricsByRow){CW=true;}else{if(CR===AG.MetricsByColumn){CY=true;CX=true;}else{if(CR===AG.MetricsByXAxis||CR===AG.MetricsByBreakBy){if(CQ.items.length===0){if(this.chartSubType!==BL.STACKED&&this.chartSubType!==BL.PERCENT){CN=true;}}else{CW=true;AS=true;}}}}}}else{Cb=CQ.items.length;if(Ca&&Ca.items){CP=Ca.items.length;}if(Cb>0&&CP>0){Cg=true;}if(Cg){if(CR===AG.MetricsByColumn){CY=true;}else{CY=true;CM=true;}}else{if((Cb<=1&&CP<=1)||CR===AG.MetricsByColumn){CY=true;}else{if(CR===AG.MetricsByRow){if(BE.call(this)){CV=true;}CW=true;}else{if(CR===AG.MetricsByYAxis||CR===AG.MetricsByBreakBy){if(Cd.items.length===0){CL=true;}else{CY=true;CM=true;}}}}}}}else{if(CO){if(Ce&&Ci.length>1){if(CR===AG.MetricsByRow){CW=true;CY=false;this.haveY1=true;}if(CR===AG.MetricsByColumn){CW=false;CY=true;CX=true;}}}else{if(Ck){if(CR===AG.MetricsByRow||CR===AG.MetricsByColumn){CW=true;CY=true;}else{CW=true;CY=true;AS=true;CM=true;}}}}var Cf=this.dz.XAxis.TemplateUnit;if(Cf&&Cf.length>0){CY=true;}var CZ=this.view.getWidgetPropertyValue(BJ.Y_AXIS_TITLE_SHOW),CS=this.view.getWidgetPropertyValue(BJ.X_AXIS_TITLE_SHOW);if(CZ===undefined){CZ=this.view.getWidgetPropertyDefaultValue(BJ.Y_AXIS_TITLE_SHOW,{isMetric:this.yIsNumeric});}if(CS===undefined){CS=this.view.getWidgetPropertyDefaultValue(BJ.X_AXIS_TITLE_SHOW,{isMetric:this.xIsNumeric});}if(!CZ){CW=false;}if(!CS){if(CY&&!CX){CY=false;}}this.isXDualAxis=Cg;this.isYDualAxis=CU;this.hasHeaderInY=CW;this.hasFooterInX=CY;this.isFooterAbove=CX;this.metricNameInX=CN;this.metricNameInY=CL;this.combineMetricNameInX=CM;this.combineMetricNameInY=AS;this.metricNamesOnRowMetricsOnXAxis=CV;this.metricNamesOnColumnMetricsOnYAxis=V.call(this);},getAxisLayout4CE:function(CR,CQ){var CT=0,CU,CS,CN;var CM,CV,AS,CP;if(CR!==undefined&&CQ!==undefined){CN=this.chartAxisLayouts=this.chartAxisLayouts||{x:[],y:[]};CU=CN.y;CS=CN.x;var CO=0,CL=0;if(CS[CQ]===undefined){CM=this.getXAxisInfo(CR,CQ,true,false,true);CV=this.getXAxisInfo(CR,CQ,false,false,true);if(CM.items.length>0){CO|=Br;}if(CV.items.length>0){CO|=P;}CS[CQ]=CO;}else{CO=CS[CQ];}if(CU[CR]===undefined){AS=this.getYAxisInfo(CR,CQ,true,false,true);CP=this.getYAxisInfo(CR,CQ,false,false,true);if(AS.items.length>0){CL|=A8;}if(CP.items.length>0){CL|=Bg;}CU[CR]=CL;}else{CL=CU[CR];}CT|=CO;CT|=CL;}else{CM=this.getXAxisInfo(CR,CQ,true,false);CV=this.getXAxisInfo(CR,CQ,false,false);AS=this.getYAxisInfo(CR,CQ,true,false);CP=this.getYAxisInfo(CR,CQ,false,false);if(CM.items.length>0){CT|=Br;}if(AS.items.length>0){CT|=A8;}if(CP.items.length>0){CT|=Bg;}if(CV.items.length>0){CT|=P;}}return CT;},getYAxisWidth4FitWindow:function(CP){var CM,CQ,AS,CN=0,CL=this.getChartCountInCol(),CO=this.getControllerAPI(L.GET_CHART_HEIGHT);CL=Math.min(CL,As);for(CM=0;CM<CL;CM++){CQ=U.call(this,CM,0);AS=this.getSingleYAxisWidth(CO(CM,0),CQ,CM,0,CP);CN=Math.max(CN,AS);}return CN;},getYAxisWidth4FitContent:function(AS){if(AS){return this.getNumericYAxisWidth(true);}return this.getCategoricalYAxisWidth();},getYAxisWidth:function(){if(this.metricNamesOnRowMetricsOnXAxis){var CO=this.getXAxisInfo(0,0),CP=[CO.items],CL=this.view.HTML5PROPS.RH,CN=this.view.layouter;var CQ=CN.getRowHeadersWidth(CP,CL);if(CQ&&CQ.length>0){this.haveY1=true;return CQ[0];}}var CR,CM=0,CS=this.view.getWidgetPropertyValue(AW.FIT_TO),AS=this.getYAxisInfo(undefined,undefined,true,false);if(this.isBubbleOrScatter()){CR=this.axisLayout;if((CR&A8)===0){return 0;}}if(AS.items.length===0&&!this.metricNameInY){if(this.hasHeaderInY&&!this.haveY2){return this.view.textHeightInY+2*w;}return 0;}if(!AS.isMetric||this.drawY1Numeric){if(CS===AO.CONTENT){CM=this.getYAxisWidth4FitContent(AS.isMetric);}else{CM=this.getYAxisWidth4FitWindow(true);}}if(this.hasHeaderInY&&this.haveY1){CM+=this.view.textHeightInY+2*w;}return CM;},getYAxis2Width:function(){var AS,CM,CL=this.getYAxisInfo(undefined,undefined,false,true);if(this.isBubbleOrScatter()){AS=this.axisLayout;if((AS&Bg)===0){return 0;}}if(CL.items.length===0){if(this.hasHeaderInY&&!this.haveY1){CM=this.view.textHeightInY+2*w;return CM;}return 0;}if(!CL.isMetric){return 0;}CM=this.drawY2Numeric?this.getNumericYAxisWidth(false):0;if(this.hasHeaderInY){CM+=this.view.textHeightInY+2*w;}return CM;},getCategoricalYAxisWidth:function(){var CL,CO,CM,CN=0,AS=this.getChartCountInCol();for(CL=0;CL<AS;CL++){CO=this.getYAxisLabels(CL);CM=this.estimateYAxisSize(CO).width;CN=Math.max(CN,CM);}return CN;},getNumericYAxisWidth:function(CP){var AS=-1,CN=this.getControllerAPI(L.GET_CHART_HEIGHT),CM,CL,CO;var CR=this.getChartCountInCol();for(CM=0;CM<CR;CM++){var CQ=U.call(this,CM,0);CL=this.getSingleYAxisWidth(CN(CM,0),CQ,CM,0,CP);if(CL>AS){AS=CL;}}return AS;},getXAxisHeight:function(CM){var CL,AS,CN=this.getXAxisInfo();if(this.isBubbleOrScatter()){CL=this.axisLayout;if((CL&Br)===0){return 0;}}if(CN.items.length===0&&!this.metricNameInX){if(this.metricNameInX&&!this.haveX2){return this.view.textHeightInX+w*2;}return 0;}if(CN.isMetric){AS=this.drawX1Numeric?this.getNumericXAxisHeight(CM,true):0;if(this.hasFooterInX&&!this.isFooterAbove){AS+=this.view.textHeightInX+2*w;}}else{AS=this.getCategoricalXAxisHeight(CM);if(this.hasFooterInX){AS+=this.view.textHeightInX+2*w;}}return AS;},getXAxis2Height:function(CN){var CL,CM=this.view,CO=CM.rowHeaderMaxHeightWithoutX2;if(!this.haveX2){return CO;}if(this.isBubbleOrScatter()){CL=this.axisLayout;if((CL&P)===0){return CO;}}var AS=this.drawX2Numeric?this.getNumericXAxisHeight(CN,false):0;if(this.hasFooterInX&&!this.isFooterAbove){AS+=this.view.textHeightInX+2*w;}return Math.max(CO,AS);},getCategoricalXAxisHeight:function(AS){return this.getNumericXAxisHeight(AS,true);},getNumericXAxisHeight:function(CR,CQ){var CL=0,AS=this.getControllerAPI(L.GET_CHART_WIDTH),CO,CN,CS;var CP=this.getChartCountInRow(),CM=this.view.getWidgetPropertyValue(AW.SCALE_CHART_WIDTH);CP=Math.min(CP,h);for(CO=0;CO<CP;CO++){CN=U.call(this,0,CO);CS=this.getSingleXAxisHeight(AS(0,CO)*CM,CN,0,CO,CR,CQ);CL=Math.max(CL,CS);}return CL;},getSingleYAxisWidth:function(CO,CM,AS,CQ,CR){var CP=this.getAxisChartInstance(CM,AS,CQ,"y",CR,0,CO,true),CL;if(CP===null){return 0;}CL=CP.GetUniformYAxisWidth(CO,-1,CR);var CN=BC.call(this,false,CR);CP.echoCondenseStatus(CN,AS);var CS=CC.call(this,false,CR);CP.echoLayoutPaddings(CS,AS);return CL;},getSingleXAxisHeight:function(CS,CL,AS,CO,CT,CP){var CN=this.getAxisChartInstance(CL,AS,CO,"x",CP,CS,0,true),CR;if(CN===null){return 0;}CR=CN.GetUniformXAxisHeight(CS,-1,CP);var CM=BC.call(this,true,CP);CN.echoCondenseStatus(CM,CO);var CQ=CC.call(this,true,CP);CN.echoLayoutPaddings(CQ,CO);return CR;},getCategoricalColWidth:function(CP){var CO=this.getXAxisLabels(CP),CL=this.xLabelPlacement,AS=this.view.GMW,CM=this.view.layouter.minWidths,CN;CN=this.estimateXAxisSize(CO,CL,AS).width;if(CM&&CM[CP]){CN=Math.max(CN,CM[CP]);}return CN;},checkBarColumnsForAxisPadding:function s(CM,AS){var CQ=this.getChartInfo(),CP=this.hasBarChart,CN=this.isCombo,CL=CP&&(CN||CQ.sbtp===BV.EnumSubtype.AUTO||CQ.sbtp===BV.EnumSubtype.CLUSTERED);var CO=-1;if(CP){var CR=U.call(this,CM,AS);CO=CR.getGroupCount();if(CL){CO*=CR.innerGetSeriesCount();}CO+=0.5;}return CO;},getCategoricalRowHeight:function(CN){var CO=this.getYAxisLabels(CN);var CM=this.estimateYAxisSize(CO).height;var CL=this.checkBarColumnsForAxisPadding(CN,0);if(CL>0){CM+=2*Math.round(CM/(4*CL-2));}var AS=this.view.layouter.minHeights;if(AS&&AS[CN]){CM=Math.max(CM,AS[CN]);}return CM;},getColHeaderSummary:function(CN){if(this.colHdrSmrs[CN]){return this.colHdrSmrs[CN];}var CP,CT,CO,AS,CM,CU,CV,CQ=this.model,CR=this.getChartCountInRow(),CS=[];for(CP=0;CP<CR;CP++){CU=this.mapFromChartToLDSIndex(CN,CP).c;CV=CQ.mapChartIndexToGrid(CU,CQ.cp);CO=CQ.getColHeaderObj(CV,CN);AS=CQ.headerInfoToProp(1,CO,"n&id");CM=AS[0].id;CT=CQ.getColTitleInfo()[CO.tui].id;CS.push(CM);}var CL={unit:CT,elements:CS};this.colHdrSmrs.push(CL);return CL;},getRowHeaderSummary:function(CM){if(this.rwHdrSmrs[CM]){return this.rwHdrSmrs[CM];}var CO,CN,CL,CV,AS,CQ,CT,CP=this.model,CS=this.getChartCountInCol(),CR=[];for(CO=0;CO<CS;CO++){CQ=this.mapFromChartToLDSIndex(CO,CM).r;CT=CP.mapChartIndexToGrid(CQ,CP.rp);CN=CP.getRowHeaderObj(CT,CM);AS=CP.headerInfoToProp(0,CN,"n&id");CL=AS[0].id;CV=CP.getRowTitleInfo()[CN.tui].id;CR.push(CL);}var CU={unit:CV,elements:CR};this.rwHdrSmrs.push(CU);return CU;},getRowHeadersByCell:function AK(CU){var CW=this.model,CZ=CW.getMetricCount(),CN=CW.getUnitAttributesCountOnRow(),CR=CW.getUnitAttributesCountOnCol(),CQ=["fi","headerID","headerText","id","idx","levelIndex","n","ui","tui"],CP,CS,CY,CL,CT,CV,CX,CO,CM,AS=[];if(CU){CS=CU.row-this.gts.col.length;CY=CU.col-this.gts.row.length;CL=CY%CZ;CT=CW.getMetricProp(undefined);CO=Ao.copy(CT[CL],{});CO.gvsRI=CS;CO.gvsCI=CY;}else{return{metricObj:undefined,headers:undefined};}if(this.horizontalMode){CO.axis=B.DssAxisRows;if(this.specialSortable){CO.axis=B.DssAxisColumns;}for(CP=0;CP<CR;CP++){CV=W.call(this,CP);if(this.specialSortable&&CV.dropzones.indexOf("BreakBy")>=0){continue;}CX=Ao.copyProps(CQ,CW.getColHeaderObj(CY,CP),{});CM=CW.headerInfoToProp(1,CX,"n&id");Ao.copy(CM[0],CX);AS.push(CX);}}else{CO.axis=B.DssAxisColumns;if(this.specialSortable){CO.axis=B.DssAxisRows;}for(CP=0;CP<CN;CP++){CV=a.call(this,CP);if(this.specialSortable&&CV.dropzones.indexOf("BreakBy")>=0){continue;}CX=Ao.copyProps(CQ,CW.getRowHeaderObj(CS,CP),{});CM=CW.headerInfoToProp(0,CX,"n&id");Ao.copy(CM[0],CX);AS.push(CX);}}return{metricObj:CO,headers:AS};},getMetricSortInfo:function CH(){var Ca=this.firstRes,CY=Ca.gsi,CL=CY.sorts[0],CR=CY.sorts[1],CO=CL.concat(CR),CU=0,AS=1,CT=4,CX=4,CS,CZ,CQ,CN,CM,CP,CW,CV={};if(this.metricSortInfo){return this.metricSortInfo;}for(CS=0;CS<CO.length;CS++){CQ=CO[CS];CZ=CQ.key.split("!");CN=parseInt(CZ[CU]);CM=CZ[AS];CP=CZ[CT];if(CN===CX){CW=CP!==""?CP.split(""):[];CV={metricId:CM,elements:CW,order:CQ.isAsc};}}this.metricSortInfo=CV;return CV;},updateSortIndex:function R(AS){var CM=this.view,CL=CM.getWidgetPropertyValue(AW.SORT_INDEX);if(CL&&(CL.row!==AS.row||CL.col!==AS.col)){CM.setWidgetPropertyValue(AW.SORT_INDEX,AS);}},getUpdateMetricSortAction:function M(CN,AS,CM){var CP,CL,CO=this.getChartInfo();this.sortingMetric=true;CL=this.getMetricSortDefinition(CN,AS);CP=this.getSortActions(CL);if(CO.isABL&&CM){this.fakeSortActionsStackTotal(CP);}return{act:"sortGM",nodeKey:this.view.k,subActions:CP};},getControllerAPI:function Be(CL){var Ch=this,CX=this.view,CT=Ch.getChartInfo(),CN=Ch.model;var AS=function(Cm,Cl){var Cp,Cj,Cn=0;if(Cl instanceof Array){Cp=Cl[0];Cj=Cl[1];}else{Cp=+Cl;Cj=+Cl+1;}var Co=function(){var Cq;for(Cq=Cp;Cq<Cj;Cq++){if(Ch.widthCache[Cq]===undefined){return false;}}return true;};var Ck;if(Ch.manager.isAsync&&Co()===false){for(Ck=Cp;Ck<Cj;Ck++){if(Ch.widthCache[Ck]===undefined){Ch.manager.queryColWidth(Ck);Cn+=Ch.manager.chartW||Ch.manager.master.chartW;}else{Cn+=Ch.widthCache[Ck];}}}else{for(Ck=Cp;Ck<Cj;Ck++){if(Ch.widthCache[Ck]===undefined){Ch.widthCache[Ck]=Ch.getCategoricalColWidth(Ck);}Cn+=Ch.widthCache[Ck];}}return Cn;};var CQ=function(Cm,Cl){var Cp,Cj,Cn=0;if(Cm instanceof Array){Cp=Cm[0];Cj=Cm[1];}else{Cp=+Cm;Cj=+Cm+1;}var Co=function(){var Cq;for(Cq=Cp;Cq<Cj;Cq++){if(Ch.heightCache[Cq]===undefined){return false;}}return true;};var Ck;if(Ch.manager.isAsync&&Co()===false){for(Ck=Cp;Ck<Cj;Ck++){if(Ch.heightCache[Ck]===undefined){Ch.manager.queryRowHeight(Ck);Cn+=Ch.manager.chartH||Ch.manager.master.chartH;}else{Cn+=Ch.heightCache[Ck];}}}else{for(Ck=Cp;Ck<Cj;Ck++){if(Ch.heightCache[Ck]===undefined){Ch.heightCache[Ck]=Ch.getCategoricalRowHeight(Ck);}Cn+=Ch.heightCache[Ck];}}return Cn;};var Cd=function(Cn,Cm){if(Cm===undefined){Cm=0;}var Co=Ch.mapFromChartToLDSIndex(Cn,0).r,Cq=CN.mapChartIndexToGrid(Co,CN.rp),Cj=CN.getRowHeaderObj(Cq,Cm),Cr=CN.mapGridIndexToChart(Cj.o,CN.rp),Cp=CN.mapGridIndexToChart(Cj.o+Cj.rs-1,CN.rp),Ck=Cp-Cr+1,Cl=Ch.inChartLayout.r;Cr*=Cl;Cp=Cr+Ck*Cl-1;return[Cr,Cp];};var CY=function(Cn,Cm){if(Cm===undefined){Cm=0;}var Cp=Ch.mapFromChartToLDSIndex(0,Cn).c,Cl=CN.mapChartIndexToGrid(Cp,CN.cp),Cj=CN.getColHeaderObj(Cl,Cm),Cr=CN.mapGridIndexToChart(Cj.o,CN.cp),Co=CN.mapGridIndexToChart(Cj.o+Cj.cs-1,CN.cp),Ck=Co-Cr+1,Cq=Ch.inChartLayout.c;Cr*=Cq;Co=Cr+Ck*Cq-1;return[Cr,Co];};var Cg=function(Cr,C5,Cx,C2,Co,Cn,Cj,Cq,Cs){var Cp,Cm,Cw,C1,Ct,C0,C4,Cl,Cz,Cv=Ch.view,C3=Cv.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cu=Cv.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Ck=Cv.getWidgetPropertyValue(BJ.ROW_VALUES_SHOW);Cp=Ch.mapFromChartToLDSIndex(Co,Cn).r;Cm=CN.mapChartIndexToGrid(Cp,CN.rp);Cw=CN.getRowHeaderObj(Cm,Cn);Cl=Cw.fid;C0=CN.headerInfoToProp(0,Cw,"n&id");C1=C0[0].n;Ct=C0[0].id;C4=Cw.tui;Cz=CN.getRowTitleInfo()[C4];var Cy=document.createElement("div");Cy.setAttribute("row",Co);Cy.setAttribute("col","0");Cy.setAttribute("rowSpan",Cj);Cy.setAttribute("colSpan",Cq);Cy.setAttribute("depth",Cn);Cy.setAttribute("class",Cs);Cy.setAttribute("type",BW.GM_ROW_HEADER);Cy.setAttribute("text",C1);Cy.style.width=Cr+"px";Cy.style.height=C5+"px";Cy.style.top=Cx+"px";Cy.style.left=C2+"px";if(Ck){l.fillTextInDiv(Cy,{objType:b.ROW_HEADER_TEXT},C1,Cr,C5,false,Ch.rhStyles,C3,Cu);}l.fillBackgroundDiv(Cy);Cy.selectionInfo=[[{eid:Ct,v:C1,tid:Cz.id,n:Cz.n,isRowAttribute:true,tui:C4}]];Cy.identity=new mstrmojo.gm.HeaderCellIdentity({objType:b.ROW_HEADER,eid:Ct,v:C1,tid:Cz.id,n:Cz.n,tui:C4,fid:Cl,isRowAttribute:true,o:Cw.o,dpt:Cw.dpt,dei:Cw.dei,at:Cw.at});return Cy;};var CR=function(Cj,Cq,Cm,Cs,Cl){Cj.style.width=Cq+"px";Cj.style.height=Cm+"px";Cj.style.top=Cs+"px";Cj.style.left=Cl+"px";var Cp=Ch.view,Cr=Cj.getAttribute("text"),Ck=Cp.getWidgetPropertyValue(BJ.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cn=Cp.getWidgetPropertyValue(BJ.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Co=Cp.getWidgetPropertyValue(BJ.COLUMN_VALUES_SHOW);Cj.innerHTML="";if(Co){l.fillTextInDiv(Cj,{objType:b.COL_HEADER_TEXT},Cr,Cq,Cm,false,Ch.chStyles,Ck,Cn);}l.fillBackgroundDiv(Cj);};var CS=function(Cj,Cq,Cm,Cs,Cl){Cj.style.width=Cq+"px";Cj.style.height=Cm+"px";Cj.style.top=Cs+"px";Cj.style.left=Cl+"px";var Cp=Ch.view,Cr=Cj.getAttribute("text"),Ck=Cp.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cn=Cp.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Co=Cp.getWidgetPropertyValue(BJ.ROW_VALUES_SHOW);Cj.innerHTML="";if(Co){l.fillTextInDiv(Cj,{objType:b.ROW_HEADER_TEXT},Cr,Cq,Cm,false,Ch.rhStyles,Ck,Cn);}l.fillBackgroundDiv(Cj);};var Cf=function(Cr,C5,Cx,C2,Cp,Cn,Cj,Cq,Cs){var Co,Cm,Cw,C0,C1,Ct,C4,Cz,Cl,Cv=Ch.view,C3=Cv.getWidgetPropertyValue(BJ.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cu=Cv.getWidgetPropertyValue(BJ.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Ck=Cv.getWidgetPropertyValue(BJ.COLUMN_VALUES_SHOW);Co=Ch.mapFromChartToLDSIndex(Cp,Cn).c;Cm=CN.mapChartIndexToGrid(Co,CN.cp);Cw=CN.getColHeaderObj(Cm,Cp);Cl=Cw.fid;C0=CN.headerInfoToProp(1,Cw,"n&id");C1=C0[0].n;Ct=C0[0].id;C4=Cw.tui;Cz=CN.getColTitleInfo()[C4];var Cy=document.createElement("div");Cy.setAttribute("row","0");Cy.setAttribute("col",Cn);Cy.setAttribute("rowSpan",Cj);Cy.setAttribute("colSpan",Cq);Cy.setAttribute("depth",Cp);Cy.setAttribute("class",Cs);Cy.setAttribute("type",BW.GM_COL_HEADER);Cy.setAttribute("text",C1);Cy.style.width=Cr+"px";Cy.style.height=C5+"px";Cy.style.top=Cx+"px";Cy.style.left=C2+"px";if(Ck){l.fillTextInDiv(Cy,{objType:b.COL_HEADER_TEXT},C1,Cr,C5,false,Ch.chStyles,C3,Cu);}l.fillBackgroundDiv(Cy);Cy.selectionInfo=[[{eid:Ct,v:C1,tid:Cz.id,n:Cz.n,isRowAttribute:false,tui:C4}]];Cy.identity=new mstrmojo.gm.HeaderCellIdentity({objType:b.COL_HEADER,eid:Ct,v:C1,tid:Cz.id,n:Cz.n,tui:C4,fid:Cl,isRowAttribute:false,o:Cw.o,dpt:Cw.dpt,dei:Cw.dei,at:Cw.at});return Cy;};var CZ=function(Cu,C4,Cx,C3,Cq,Cp,Cj,Cs,Cv){var Cy,Cm,Cl,C1,Co="",Cz=document.createElement("div"),C0=[""],Cn,Ct,C2=C0.length,Cw=Ch.view,Ck=Cw.getWidgetPropertyValue(BJ.COLUMN_VALUES_SHOW);if(Ch.metricsType===AG.MetricsByColumn&&Ch.isFooterAbove){Cm=Ch.getYAxisInfo(Cq,Cp,Ch.haveY1);C0=Cm.items;if(CT.isPie){Cn=Ch.getMetricsOnAngleBy();if(!Cm.isMetric){C0=CN.getMetricNamesFromIndex(Cn);}Ct=CN.getMetricIDsFromIndex(Cn);}C2=C0.length;Co=BW.GM_COL_HEADER_EXTRA;}Cl=B8.YAxis;C1=Cp%C2;Cy=C0[C1];Cz.setAttribute("row","0");Cz.setAttribute("col",Cp);Cz.setAttribute("rowSpan",Cj);Cz.setAttribute("colSpan",Cs);Cz.setAttribute("depth",Cq);Cz.setAttribute("class",Cv);Cz.setAttribute("type",Co);Cz.setAttribute("text",Cy);if(Cy!==""){Cz.setAttribute("dzId",Cl);Cz.setAttribute("dzIndex",C1);}Cz.style.width=Cu+"px";Cz.style.height=C4+"px";Cz.style.top=Cx+"px";Cz.style.left=C3+"px";if(Ck&&Cy!==""){l.fillTextInDiv(Cz,{objType:b.COL_HEADER_TEXT},Cy,Cu,C4,false,Ch.chStyles);}l.fillBackgroundDiv(Cz);if(Ch.metricsType===AG.MetricsByColumn&&Ch.isFooterAbove){if(CT.isPie){Cz.selectionInfo={mid:Ct[Cp],midx:Cn[Cp]};}else{var Cr=Cm.cellHandlers;Cz.selectionInfo={mid:Cm.ids[C1],midx:Cm.mtsIdxArr[C1],cellHandle:Cr[C1]};}}return Cz;};var Ca=function(Cr,C2,Cu,C0,Co,Cn,Cj,Cq,Cs){var Cv,C1,Cl,Cy,Cm="",Cw=document.createElement("div"),Cx=[""],Cz=Cx.length,Ct=Ch.view,Ck=Ct.getWidgetPropertyValue(BJ.ROW_VALUES_SHOW);if(Ch.metricsType===AG.MetricsByRow&&Ch.metricNamesOnRowMetricsOnXAxis){C1=Ch.getXAxisInfo(Co,Cn);Cx=C1.items;Cz=Cx.length;Cm=BW.GM_ROW_HEADER_EXTRA;}Cl=B8.XAxis;Cy=Co%Cz;Cv=Cx[Cy];Cw.setAttribute("row",Co);Cw.setAttribute("col",0);Cw.setAttribute("rowSpan",Cj);Cw.setAttribute("colSpan",Cq);Cw.setAttribute("depth",Cn);Cw.setAttribute("class",Cs);Cw.setAttribute("type",Cm);Cw.setAttribute("text",Cv);if(Cv!==""){Cw.setAttribute("dzId",Cl);Cw.setAttribute("dzIndex",Cy);}Cw.style.width=Cr+"px";Cw.style.height=C2+"px";Cw.style.top=Cu+"px";Cw.style.left=C0+"px";if(Ck){l.fillTextInDiv(Cw,{objType:b.ROW_TITLE_TEXT},Cv,Cr,C2,false,Ch.rhStyles);}l.fillBackgroundDiv(Cw);if(Ch.metricsType===AG.MetricsByRow&&Ch.metricNamesOnRowMetricsOnXAxis){var Cp=C1.cellHandlers;Cw.selectionInfo={mid:C1.ids[Cy],midx:C1.mtsIdxArr[Cy],cellHandle:Cp[Cy]};}return Cw;};var Ci=function(Cj,Cq,Cm,Cs,Cl){Cj.style.width=Cq+"px";Cj.style.height=Cm+"px";Cj.style.top=Cs+"px";Cj.style.left=Cl+"px";var Cp=Ch.view,Cr=Cj.getAttribute("text"),Ck=Cp.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cn=Cp.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Co=Cp.getWidgetPropertyValue(BJ.ROW_VALUES_SHOW);Cj.innerHTML="";if(Co){l.fillTextInDiv(Cj,{objType:b.ROW_HEADER_TEXT},Cr,Cq,Cm,false,Ch.rhStyles,Ck,Cn);}l.fillBackgroundDiv(Cj);};var CM=function(DC,DM,DF,DJ,Cw,Cq,DN,Cm,DG,Cn,DH){if(Ch.metricNamesOnRowMetricsOnXAxis){DG="gm-rowheader-cell-dummy";return Ca(DC,DM,DF,DJ,Cw,Cq,DN,Cm,DG);}var DO=document.createElement("div");DO.setAttribute("class",DG);DO.setAttribute("row",Cw);DO.setAttribute("col",Cq);DO.setAttribute("rowSpan",DN);DO.setAttribute("colSpan",Cm);if(Ch.clusteredBarSpecialCase){DO.setAttribute("type",BW.GM_Y_NUMERIC);}else{DO.setAttribute("type",Ch.yIsNumeric?BW.GM_Y_NUMERIC:BW.GM_Y_CATEGORY);}DO.style.width=DC+"px";DO.style.height=DM+"px";DO.style.top=DF+"px";DO.style.left=DJ+"px";DO.style.backgroundColor="rgba(0,0,0,0)";DO.drawAxis=true;if(Cw%2===1&&Ch.view.getWidgetPropertyValue(AW.BANDING)){Ba.addClass(DO,"banding");}var DL,C5,C3,DU,DQ,Cj,DA,C8,DT,Cv,Ck=B8.YAxis,C6,Cz,DP=[],DD=0,C1=false,Cu=false,Cl,C0,DB,C2,DE,C7,Cx=Ch.isGrid(),DK=Ch.isPie,C9=Ch.haveX1,DI=CT.isABL&&Ch.splitPlottingMetrics;DU=Ch.mapFromChartToLDSIndex(Cw,Cq);DQ=Ch.getXAxisInfo(Cw,Cq,true,DI);Cj=Ch.getXAxisInfo(Cw,Cq,false,DI);DA=Ch.getYAxisInfo(Cw,Cq,Cn,DI);if(Cx&&DK){DT=Ch.model.getMetricNamesFromIndex(Ch.getMetricsOnAngleBy());Ck=B8.Angle;}else{if(DA.isMetric){DT=DA.items;Cz=DA.cellHandlers;}else{DT=[];}}if(DA.isMetric&&CT.isABL&&Ch.splitPlottingMetrics){C1=true;if(DA.mtsIdxArr[DU.inchtRow]<0){Cu=true;}}if(DA.isMetric&&!Cu){if(Cn===false){C7=Ah(Ch.getMetricsOnAxisOfChart(Cw,Cq,"y",false));}else{C7=Ah(Ch.getMetricsOnAxisOfChart(Cw,Cq,"y",true));}DO.drawAxis=true;Bx.forEach(C7,function(DW){if(DW===undefined||DW<0){DO.drawAxis=false;}else{var DV=Cn?"YAxis":"Y2Axis";if(A5.call(Ch,DW,DV)===Bm.PERCELL){DO.drawAxis=(Ch.getChartCountInRow()===1);}}});DE=new BV.AxisIdentity({isNumericAxis:true,objType:b.Y_NUMERIC,metricIdxArr:C7});}else{if(!DA.isMetric){DE=new BV.AxisIdentity({isNumericAxis:false,objType:b.Y_CATEGORY,attrIdArr:DA.ids});}}if(!Cu&&Ch.hasHeaderInY){if(DT.length===0&&DQ.isMetric){DT=C9?DQ.items:Cj.items;Cz=C9?DQ.cellHandlers:Cj.cellHandlers;Ck=B8.XAxis;}Cv=DT.length;DD=Ch.view.textHeightInY+2*w;C8=document.createElement("div");DO.metrics=[];var Cr,DS,DR=[],C4=[];if(Ch.combineMetricNameInY){for(DL=0;DL<Cv;DL++){C4.push(DL);DO.metrics.push(DT[DL]);}}else{if(C1){C6=DU.inchtRow;}else{C6=Cw%Cv;}C4.push(C6);DO.metrics.push(DT[C6]);}for(DL=0;DL<C4.length;DL++){C6=C4[DL];C5=DT[C6];Cr={};Cr.extraAttributes={};C3=Cr.extraAttributes;Cr.text=C5;C3.dzId=Ck;C3.dzIndex=C6;C3.type=BW.GM_YLABEL;if(CT.isABL&&Cz){if(Cz[C6]){DB=(Cz[C6].col-Ch.gts.row.length)%CN.getMetricCount();DS=Ch.getMetricInGSIMx(DB);Cl=CN.getMetricIDsFromIndex([DB])[0];C0=CN.getMetricIDFromIndex(DB);C3.selectionInfo=C3.identity=new BV.MetricAxisTitleIdentity({n:C5,mid:Cl,mOriId:C0,midx:DB,cellHandle:Cz[C6],objType:b.Y_METRIC_AXIS_TITLE});C2=Ch.metricSelectionInfo;if(!C2[Cl]){C2[Cl]=C3.selectionInfo;}}else{C3.selectionInfo=C3.identity=new BV.MetricAxisTitleIdentity({objType:b.Y_METRIC_AXIS_TITLE});}if(Aq.call(Ch,C3.selectionInfo)){Cr.sort=true;C3.sort=true;C3.sortOrder=Ch.metricSortInfo.order;C8.innerHTML+=Ch.metricSortInfo.order?"asc":"desc";}}else{if(CT.isBubbleOrScatter){DB=DA.mtsIdxArr[C6];DS=Ch.getMetricInGSIMx(DB);Cl=CN.getMetricIDsFromIndex([DB])[0];C0=CN.getMetricIDFromIndex(DB);C3.selectionInfo=C3.identity=new BV.MetricAxisTitleIdentity({n:C5,mid:Cl,mOriId:C0,midx:DB,objType:b.Y_METRIC_AXIS_TITLE});C2=Ch.metricSelectionInfo;if(!C2[Cl]){C2[Cl]=C3.selectionInfo;}}}C3.customScale=(A5.call(Ch,DB,"YAxis")===Bm.CUSTOM);DP.push(C3.selectionInfo);DR.push(Cr);}DO.appendChild(C8);var Cy=new mstrmojo.VisAxisLabel({placeholder:C8,width:DM+"px",height:Ch.view.textHeightInY+"px",cssClass:"gm-yaxis-cell-label",styles:Ch.yTitleStyles,align:Cn?"left":"right",contentData:DR});Cy.render();Cy.parent=CX;Ch.addDisposable(Cy);if(C4.length===1){DO.labelDiv=Cy.domNode;}else{DO.combinedLabelDiv=Cy.domNode;}}else{if(!Cu&&DA.isMetric){if(DT.length===0&&DQ.isMetric){DT=C9?DQ.items:Cj.items;Cz=C9?DQ.cellHandlers:Cj.cellHandlers;Ck=B8.XAxis;}Cv=DT.length;DO.metrics=[];var C4=[];for(DL=0;DL<Cv;DL++){C4.push(DL);DO.metrics.push(DT[DL]);}for(DL=0;DL<C4.length;DL++){C6=C4[DL];C5=DT[C6];C3={};C3.dzId=Ck;C3.dzIndex=C6;C3.type=BW.GM_YLABEL;if(CT.isABL&&Cz){if(Cz[C6]){DB=(Cz[C6].col-Ch.gts.row.length)%CN.getMetricCount();Cl=CN.getMetricIDsFromIndex([DB])[0];C0=CN.getMetricIDFromIndex(DB);C3.selectionInfo=C3.identity=new BV.MetricAxisTitleIdentity({n:C5,mid:Cl,mOriId:C0,midx:DB,cellHandle:Cz[C6],objType:b.Y_METRIC_AXIS_TITLE});C2=Ch.metricSelectionInfo;if(!C2[Cl]){C2[Cl]=C3.selectionInfo;}}else{C3.selectionInfo=C3.identity=new BV.MetricAxisTitleIdentity({objType:b.Y_METRIC_AXIS_TITLE});}}else{if(CT.isBubbleOrScatter){DB=DA.mtsIdxArr[C6];Cl=CN.getMetricIDsFromIndex([DB])[0];C0=CN.getMetricIDFromIndex(DB);C3.selectionInfo=C3.identity=new BV.MetricAxisTitleIdentity({n:C5,mid:Cl,mOriId:C0,midx:DB,objType:b.Y_METRIC_AXIS_TITLE});C2=Ch.metricSelectionInfo;if(!C2[Cl]){C2[Cl]=C3.selectionInfo;}}}DP.push(C3.selectionInfo);}}}DO.selectionInfos=DP;var Ct=AN(DC,DM,DD,"y",Cn);DO.setAttribute("isPrimary",Cn);DO.appendChild(Ct);if(!Cu&&DO.drawAxis){var Cs=Ch.view.getWidgetPropertyValue(Cn?AW.SCALE_Y:AW.SCALE_Y2),Co=Cs!==undefined&&Cs!==1;Ch.drawYAxis(Ct,DC-DD,DM,Cw,DU.r,Cq,false,DU.dpIdx,Co,Cn,DH,Ch.hasHeaderInY);}else{if(Ch.view.getWidgetPropertyValue(AW.BANDING)){var Cp=[{Start:0,Size:DM}];Ch.drawInChartBanding(DO,Cp,Ch.bandingFlags[Cw]);}}DO.subRegion=DH;if(DE){DO.identity=DE;}return DO;};var CV=function(DB,DK,DE,DI,Cw,Cq,DL,Cn,DF,Co,DG){var DM=document.createElement("div");DM.setAttribute("row",Cw);DM.setAttribute("col",Cq);DM.setAttribute("rowSpan",DL);DM.setAttribute("colSpan",Cn);DM.setAttribute("class",DF);if(Ch.clusteredBarSpecialCase){DM.setAttribute("type",BW.GM_X_NUMERIC);}else{DM.setAttribute("type",Ch.xIsNumeric?BW.GM_X_NUMERIC:BW.GM_X_CATEGORY);}DM.innerHTML="";DM.style.width=DB+"px";DM.style.height=DK+"px";DM.style.top=DE+"px";DM.style.left=DI+"px";DM.style.backgroundColor="rgba(0,0,0,0)";DM.drawAxis=true;var DS=Ch.mapFromChartToLDSIndex(Cw,Cq),DH=CT.isABL&&Ch.splitPlottingMetrics,DO=Ch.getXAxisInfo(Cw,Cq,Co,DH),C9=Ch.getYAxisInfo(Cw,Cq,true,DH),C4=Ch.getYAxisInfo(Cw,Cq,false,DH),Cv=Ch.haveY1,DC=0,C8,Cu,Ck=B8.XAxis,C6,DR,Cx,DN=[],Cz=false,Ct=false,Cm,Cy,DA,C0,C7,DD;if(DO.isMetric){DR=DO.items;Cx=DO.cellHandlers;}else{DR=[];}if(DO.isMetric&&CT.isABL&&Ch.splitPlottingMetrics){Cz=true;if(DO.mtsIdxArr[DS.inchtCol]<0){Ct=true;}}if(DO.isMetric&&!Ct){if(Co===false){C7=Ah(Ch.getMetricsOnAxisOfChart(Cw,Cq,"x",false));}else{C7=Ah(Ch.getMetricsOnAxisOfChart(Cw,Cq,"x",true));}DM.drawAxis=true;Bx.forEach(C7,function(DV){if(DV===undefined||DV<0){DM.drawAxis=false;}else{var DU=Co?"XAxis":"X2Axis";if(A5.call(Ch,DV,DU)===Bm.PERCELL){DM.drawAxis=(Ch.getChartCountInCol()===1);}}});DD=new BV.AxisIdentity({isNumericAxis:true,objType:b.X_NUMERIC,metricIdxArr:C7});}else{if(!DO.isMetric){DD=new BV.AxisIdentity({isNumericAxis:false,objType:b.X_CATEGORY,attrIdArr:DO.ids});}}if(!Ct&&Ch.hasFooterInX){var DJ,C5,C1,Cr,DQ,DP=[],C3=[],Cp;C8=document.createElement("div");DC=Ch.view.textHeightInX+2*w;if(DO.isMetric&&!Ch.isFooterAbove){DM.appendChild(C8);if(DR.length===0&&C9.isMetric){DR=Cv?C9.items:C4.items;Cx=Cv?C9.cellHandlers:C4.cellHandlers;Ck=B8.YAxis;}Cu=DR.length;DM.metrics=[];if(Ch.combineMetricNameInX){for(DJ=0;DJ<Cu;DJ++){C3.push(DJ);DM.metrics.push(DR[DJ]);}}else{if(Cz){C6=DS.inchtCol;}else{C6=Cq%Cu;}C3.push(C6);DM.metrics.push(DR[C6]);}for(DJ=0;DJ<C3.length;DJ++){C6=C3[DJ];C5=DR[C6];Cr={};Cr.extraAttributes={};C1=Cr.extraAttributes;Cr.text=C5;C1.dzId=Ck;C1.dzIndex=C6;C1.type=BW.GM_XLABEL;if(CT.isABL&&Cx){if(Cx[C6]){DA=(Cx[C6].col-Ch.gts.row.length)%CN.getMetricCount();DQ=Ch.getMetricInGSIMx(DA);Cm=CN.getMetricIDsFromIndex([DA])[0];Cy=CN.getMetricIDFromIndex(DA);C1.selectionInfo=C1.identity=new BV.MetricAxisTitleIdentity({n:C5,mid:Cm,mOriId:Cy,midx:DA,cellHandle:Cx[C6],objType:b.X_METRIC_AXIS_TITLE});C0=Ch.metricSelectionInfo;if(!C0[Cm]){C0[Cm]=C1.selectionInfo;}}else{C1.selectionInfo=C1.identity=new BV.MetricAxisTitleIdentity({objType:b.X_METRIC_AXIS_TITLE});}if(Aq.call(Ch,C1.selectionInfo)){Cr.sort=true;C1.sort=true;C1.sortOrder=Ch.metricSortInfo.order;C8.innerHTML=Ch.metricSortInfo.order?"asc":"desc";}}else{if(CT.isBubbleOrScatter){DA=DO.mtsIdxArr[C6];DQ=Ch.getMetricInGSIMx(DA);Cm=CN.getMetricIDsFromIndex([DA])[0];C1.selectionInfo=C1.identity=new BV.MetricAxisTitleIdentity({n:C5,mid:Cm,midx:DA,objType:b.X_METRIC_AXIS_TITLE});C0=Ch.metricSelectionInfo;if(!C0[Cm]){C0[Cm]=C1.selectionInfo;}}}C1.customScale=(A5.call(Ch,DA,"XAxis")===Bm.CUSTOM);DN.push(C1.selectionInfo);DP.push(Cr);}Cp=new mstrmojo.VisAxisLabel({placeholder:C8,width:DB+"px",height:Ch.view.textHeightInX+"px",cssClass:(Co?"gm-xaxis-cell-label":"gm-x2axis-cell-label"),styles:Ch.xTitleStyles,align:Co?"bottom":"top",contentData:DP});Cp.render();Cp.parent=CX;if(!Co&&!Ch.drawX2Numeric){var Cl=Cp.domNode,Cj={};Cj.top=(DK-DC)>>1;B3.positionDomNode(Cl,Cj);}Ch.addDisposable(Cp);if(C3.length===1){DM.labelDiv=Cp.domNode;}else{DM.combinedLabelDiv=Cp.domNode;}}else{if(!DO.isMetric){DM.appendChild(C8);DP=[];if(DO.items.length>0){Bx.forEach(DO.items,function(DV,DU){Cr={text:DV,extraAttributes:{type:BW.GM_XLABEL,dzId:B8.XAxis,dzIndex:DU,identity:new BV.AttributeAxisTitleIdentity({n:DV,tid:DO.ids[DU],objType:b.X_ATTRIBUTE_AXIS_TITLE})}};DP.push(Cr);});}Cp=new mstrmojo.VisAxisLabel({placeholder:C8,width:DB+"px",height:Ch.view.textHeightInX+"px",cssClass:"gm-xaxis-cell-label",styles:Ch.xTitleStyles,align:"bottom",contentData:DP});Cp.render();Cp.parent=CX;Ch.addDisposable(Cp);if(DP.length===1){DM.labelDiv=Cp.domNode;}else{if(DP.length>1){DM.combinedLabelDiv=Cp.domNode;}}}}}else{if(!Ct&&!Ch.hasFooterInX&&DO.isMetric){if(DR.length===0&&C9.isMetric){DR=Cv?C9.items:C4.items;Cx=Cv?C9.cellHandlers:C4.cellHandlers;Ck=B8.YAxis;}Cu=DR.length;DM.metrics=[];var DJ,C5,C1,C3=[];for(DJ=0;DJ<Cu;DJ++){C3.push(DJ);DM.metrics.push(DR[DJ]);}for(DJ=0;DJ<C3.length;DJ++){C6=C3[DJ];C5=DR[C6];C1={};C1.dzId=Ck;C1.dzIndex=C6;C1.type=BW.GM_XLABEL;if(CT.isABL&&Cx){DA=(Cx[C6].col-Ch.gts.row.length)%CN.getMetricCount();Cm=CN.getMetricIDsFromIndex([DA])[0];C1.selectionInfo=C1.identity=new BV.MetricAxisTitleIdentity({n:C5,mid:Cm,midx:DA,cellHandle:Cx[C6],objType:b.X_METRIC_AXIS_TITLE});C0=Ch.metricSelectionInfo;if(!C0[Cm]){C0[Cm]=C1.selectionInfo;}}else{if(CT.isBubbleOrScatter){DA=DO.mtsIdxArr[C6];Cm=CN.getMetricIDsFromIndex([DA])[0];Cy=CN.getMetricIDFromIndex(DA);C1.selectionInfo=C1.identity=new BV.MetricAxisTitleIdentity({n:C5,mid:Cm,mOriId:Cy,midx:DA,objType:b.X_METRIC_AXIS_TITLE});C0=Ch.metricSelectionInfo;if(!C0[Cm]){C0[Cm]=C1.selectionInfo;}}}DN.push(C1.selectionInfo);}}}DM.selectionInfos=DN;var Cs=AN(DB,DK,DC,"x",Co);DM.setAttribute("isPrimary",Co);DM.appendChild(Cs);if(!Ct&&DM.drawAxis){var DT=Ch.view.getWidgetPropertyValue(Co?AW.SCALE_X:AW.SCALE_X2),C2=DT!==undefined&&DT!==1;Ch.drawXAxis(Cs,DB,DK-DC,Cw,Cq,DS.c,false,DS.dpIdx,C2,Co,DG);}DM.subRegion=DG;if(DD){DM.identity=DD;}return DM;};var CP=function(){var Cq,Cp,Cs,Co,Cv,Cw,Cm,Cl=Ch.getChartInfo(),Cx=Cl.isBubbleOrScatter&&this.hasSizeBy(),Ck=Cl.isBubbleOrScatter&&!this.hasSizeBy(),Cn=false;Ch.dataAreaPaddingGlobalZero=CG.call(this,CT);if(Ch.dataAreaPaddingGlobalZero){return ;}Ch.maxRowPadding=undefined;Ch.maxColPadding=undefined;if(Ch.maxDataAreaPaddingCache){delete Ch.maxDataAreaPaddingCache;}var Cj=Ch.maxDataAreaPaddingCache=[];Cv=Ch.getChartCountInCol();Cw=Ch.getChartCountInRow();Cx=Cx&&(Cw*Cv>=1);var Cr=Math.min(Cv,As),Cu=Math.min(Cw,h);for(Cq=0;Cq<Cr;Cq++){Cm=[];Cj.push(Cm);for(Cp=0;Cp<Cu;Cp++){Cn=CE.call(this,CT,Cq,Cp);if(Cn){Cm.push(Ao.clone(E));}else{if(Ck){Cs=Cs||Ch.queryChartInstance(0,0,false,true);Co=Co||Cs.GetDataAreaPadding();}else{if(Cx){var Ct={purpose:"clipping"};Cs=Ch.getSharedChartInstance(Cq,Cp,Ct);}else{Cs=Ch.queryChartInstance(Cq,Cp,false,true);}Co=Cs.GetDataAreaPadding();}Cm.push(Co);}}}};var CU=function(Cs,Cn,Ct,Cl,Cu,Ck,Cr,Cm,Co,Cq,Cp){var Cj=document.createElement("div");Cj.setAttribute("chartDiv",1);Cj.svg=!this.useCECanvas;Cj.setAttribute("row",Cu);Cj.setAttribute("col",Ck);Cj.setAttribute("rowSpan",Cr);Cj.setAttribute("colSpan",Cm);Cj.setAttribute("class",Co);Cj.setAttribute("type",BW.GM_MINI_CHART);Cj.innerHTML="";Cj.style.width=Cs+"px";Cj.style.height=Cn+"px";Cj.style.top=Ct+"px";Cj.style.left=Cl+"px";if(Ch.view.getWidgetPropertyValue(AW.BANDING)&&!Ch.bandings[Cu]){Ch.bandings[Cu]=[{Start:0,Size:Cn}];}Ch.drawOnDiv(Cj,Cs,Cn,Cu,Ck,true,Co,Cp);l.fillBackgroundDiv(Cj);if(Cu%2===1&&Ch.view.getWidgetPropertyValue(AW.BANDING)){Ba.addClass(Cj,"banding");}Cj.subRegion=Cp;return Cj;};var CW=function(Ck,Cr,Cn,Cu,Cm,Cp,Cq){var Ct=false;var Cl=parseInt(Ck.style.width,10);var Cs=parseInt(Ck.style.height,10);if(Cr&&Ck.style.width!==Cr+"px"){Ck.style.width=Cr+"px";Cl=Cr;Ct=true;}if(Cn&&Ck.style.height!==Cn+"px"){Ck.style.height=Cn+"px";Cs=Cn;Ct=true;}if(Cu){Ck.style.top=Cu+"px";}if(Cm){Ck.style.left=Cm+"px";}if(Ch.enablePartialRendering&&!BQ(Ck.subRegion,Cq)){Ct=true;Ck.subRegion=Cq;}var Cj=parseInt(Ck.getAttribute("row"),10),Co=parseInt(Ck.getAttribute("col"),10);if(Cj%2===1&&Ch.view.getWidgetPropertyValue(AW.BANDING)){Ba.addClass(Ck,"banding");}else{Ba.removeClass(Ck,"banding");}if(Ct){Ck.innerHTML="";Ch.drawOnDiv(Ck,Cl,Cs,Cj,Co,true,"",Cq);l.fillBackgroundDiv(Ck);}};var Ce=function(DO,DE,DN,DG,DK,Co,DI){if(Ch.metricNamesOnRowMetricsOnXAxis){return Ci(DO,DE,DN,DG,DK);}var DM,Cq=false,Ck=B8.YAxis,C7;var C4=parseInt(DO.style.width,10);var DC=parseInt(DO.style.height,10);if(DE&&DO.style.width!==DE+"px"){DO.style.width=DE+"px";C4=DE;Cq=true;}if(DN&&DO.style.height!==DN+"px"){DO.style.height=DN+"px";DC=DN;Cq=true;}if(DG){DO.style.top=DG+"px";}if(DK){DO.style.left=DK+"px";}var DH=parseInt(DO.getAttribute("row"),10);var DS=parseInt(DO.getAttribute("col"),10);var DU=Ch.mapFromChartToLDSIndex(DH,DS);if(DH%2===1&&Ch.view.getWidgetPropertyValue(AW.BANDING)){Ba.addClass(DO,"banding");}else{Ba.removeClass(DO,"banding");}if(Ch.enablePartialRendering&&!BQ(DO.subRegion,DI)){Cq=true;DO.subRegion=DI;}if(Cq||Ch.forceUpdateAxis()){var DJ=CT.isABL&&Ch.splitPlottingMetrics,DQ=Ch.getXAxisInfo(DH,DS,true,DJ),Cj=Ch.getXAxisInfo(DH,DS,false,DJ),DB=Ch.getYAxisInfo(DH,DS,Co,DJ),DF=0,C8,C9,DP=[],Cv,Cn,DT,C1,Cw=Ch.isGrid(),DL=Ch.isPie,DA=Ch.haveX1,C0=false,Cu=false;if(Cw&&DL){C1=Ch.getMetricsOnAngleBy();DT=Ch.model.getMetricNamesFromIndex(C1);Ck=B8.Angle;}else{if(DB.isMetric){C1=DB.mtsIdxArr;DT=DB.items;}else{C1=[];DT=[];}}if(DB.isMetric&&CT.isABL&&Ch.splitPlottingMetrics){C0=true;if(DB.mtsIdxArr[DU.inchtRow]<0){Cu=true;}}DO.innerHTML="";var Cy=DB.cellHandlers,DD,Cm,Cz,C2;if(!Cu&&Ch.hasHeaderInY){if(!DN){DN=DO.clientHeight;}if(DT.length===0&&DQ.isMetric){DT=DA?DQ.items:Cj.items;C1=DA?(DQ.isMetric?DQ.mtsIdxArr:[]):(Cj.isMetric?Cj.mtsIdxArr:[]);Ck=B8.XAxis;}Cv=DT.length;DF=Ch.view.textHeightInY+2*w;C8=document.createElement("div");Cn=Ch.model.getMetricIDsFromIndex(C1);DO.metrics=[];var C6,C3,Cr,DR=[],C5=[];if(Ch.combineMetricNameInY){for(DM=0;DM<Cv;DM++){C5.push(DM);DO.metrics.push(DT[DM]);}}else{if(C0){C7=DU.inchtRow;}else{C7=DH%Cv;}C5.push(C7);DO.metrics.push(DT[C7]);}for(DM=0;DM<C5.length;DM++){C7=C5[DM];C6=DT[C7];C9=Ch.metricSelectionInfo[Cn[C7]];Cr={};Cr.extraAttributes={};C3=Cr.extraAttributes;Cr.text=C6;C3.dzId=Ck;C3.dzIndex=C7;C3.type=BW.GM_YLABEL;DP.push(C9);if(C9){C3.selectionInfo=C3.identity=C9;if(Aq.call(Ch,C3.selectionInfo)){Cr.sort=true;C3.sort=true;C3.sortOrder=Ch.metricSortInfo.order;C8.innerHTML+=Ch.metricSortInfo.order?"asc":"desc";}C3.customScale=(A5.call(Ch,C3.selectionInfo.midx,"YAxis")===Bm.CUSTOM);}DR.push(Cr);}DO.appendChild(C8);var Cx=new mstrmojo.VisAxisLabel({placeholder:C8,width:DN+"px",height:Ch.view.textHeightInY+"px",cssClass:"gm-yaxis-cell-label",styles:Ch.yTitleStyles,align:Co?"left":"right",contentData:DR});Cx.render();Cx.parent=CX;Ch.addDisposable(Cx);if(C5.length===1){DO.labelDiv=Cx.domNode;DO.combinedLabelDiv=undefined;}else{DO.labelDiv=undefined;DO.combinedLabelDiv=Cx.domNode;}}else{if(!Cu&&DB.isMetric){if(DT.length===0&&DQ.isMetric){DT=DA?DQ.items:Cj.items;Cy=DA?DQ.cellHandlers:Cj.cellHandlers;Ck=B8.XAxis;}Cv=DT.length;DO.metrics=[];var C5=[];for(DM=0;DM<Cv;DM++){C5.push(DM);DO.metrics.push(DT[DM]);}for(DM=0;DM<C5.length;DM++){C7=C5[DM];C6=DT[C7];C3={};C3.dzId=Ck;C3.dzIndex=C7;C3.type=BW.GM_YLABEL;if(CT.isABL&&Cy){if(Cy[C7]){DD=(Cy[C7].col-Ch.gts.row.length)%CN.getMetricCount();Cm=CN.getMetricIDsFromIndex([DD])[0];Cz=CN.getMetricIDFromIndex(DD);C3.selectionInfo=C3.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:Cz,midx:DD,cellHandle:Cy[C7],objType:b.Y_METRIC_AXIS_TITLE});C2=Ch.metricSelectionInfo;if(!C2[Cm]){C2[Cm]=C3.selectionInfo;}}else{C3.selectionInfo=C3.identity=new BV.MetricAxisTitleIdentity({objType:b.Y_METRIC_AXIS_TITLE});}}else{if(CT.isBubbleOrScatter){DD=DB.mtsIdxArr[C7];Cm=CN.getMetricIDsFromIndex([DD])[0];Cz=CN.getMetricIDFromIndex(DD);C3.selectionInfo=C3.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:Cz,midx:DD,objType:b.Y_METRIC_AXIS_TITLE});C2=Ch.metricSelectionInfo;if(!C2[Cm]){C2[Cm]=C3.selectionInfo;}}}DP.push(C3.selectionInfo);}}}DO.selectionInfos=DP;var Ct=AN(C4,DC,DF,"y",Co);DO.setAttribute("isPrimary",Co);DO.appendChild(Ct);if(!Cu&&DO.drawAxis){var Cs=Ch.view.getWidgetPropertyValue(Co?AW.SCALE_Y:AW.SCALE_Y2),Cl=Cs!==undefined&&Cs!==1;Ch.drawYAxis(Ct,C4-DF,DC,DH,DU.r,DS,true,DU.dpIdx,Cl,Co,DI);}else{if(Ch.view.getWidgetPropertyValue(AW.BANDING)){var Cp=[{Start:0,Size:DN}];Ch.drawInChartBanding(DO,Cp,Ch.bandingFlags[DH]);}}}};var CO=function(DM,DD,DL,DF,DJ,Co,DH){var Cq=false,DR,Ck=B8.XAxis,C9,DN=[],Cn,C7;var C3=parseInt(DM.style.width,10);var DB=parseInt(DM.style.height,10);if(DD&&DM.style.width!==DD+"px"){DM.style.width=DD+"px";C3=DD;Cq=true;}if(DL&&DM.style.height!==DL+"px"){DM.style.height=DL+"px";DB=DL;Cq=true;}if(DF){DM.style.top=DF+"px";}if(DJ){DM.style.left=DJ+"px";}if(Ch.enablePartialRendering&&!BQ(DM.subRegion,DH)){Cq=true;DM.subRegion=DH;}var DG=parseInt(DM.getAttribute("row"),10);var DQ=parseInt(DM.getAttribute("col"),10);var DS=Ch.mapFromChartToLDSIndex(DG,DQ);if(Cq||Ch.forceUpdateAxis()){var DI=CT.isABL&&Ch.splitPlottingMetrics,DO=Ch.getXAxisInfo(DG,DQ,Co,DI),DA=Ch.getYAxisInfo(DG,DQ,true,DI),C5=Ch.getYAxisInfo(DG,DQ,false,DI),Cv=Ch.haveY1,DE=0,C8,Cu,Cy=false,Ct=false;DR=DO.isMetric?DO.items:[];var Cz=DO.isMetric?DO.mtsIdxArr:[];if(DO.isMetric&&CT.isABL&&Ch.splitPlottingMetrics){Cy=true;if(DO.mtsIdxArr[DS.inchtCol]<0){Ct=true;}}DM.innerHTML="";var Cw=DO.cellHandlers,DC,Cm,Cx,C0;if(!Ct&&Ch.hasFooterInX){if(!DD){DD=DM.clientWidth;}var DK,C6,C1,Cr,DP=[],C4=[],Cp;C8=document.createElement("div");DE=Ch.view.textHeightInX+2*w;if(DO.isMetric&&!Ch.isFooterAbove){DM.appendChild(C8);if(DR.length===0&&DA.isMetric){DR=Cv?DA.items:C5.items;Cz=Cv?(DA.isMetric?DA.mtsIdxArr:[]):(C5.isMetric?C5.mtsIdxArr:[]);Ck=B8.YAxis;}Cu=DR.length;Cn=Ch.model.getMetricIDsFromIndex(Cz);DM.metrics=[];if(Ch.combineMetricNameInX){for(DK=0;DK<Cu;DK++){C4.push(DK);DM.metrics.push(DR[DK]);}}else{if(Cy){C7=DS.inchtCol;}else{C7=DQ%Cu;}C4.push(C7);DM.metrics.push(DR[C7]);}for(DK=0;DK<C4.length;DK++){C7=C4[DK];C6=DR[C7];C9=Ch.metricSelectionInfo[Cn[C7]];Cr={};Cr.extraAttributes={};C1=Cr.extraAttributes;Cr.text=C6;C1.dzId=Ck;C1.dzIndex=C7;C1.type=BW.GM_XLABEL;DN.push(C9);if(C9){C1.selectionInfo=C1.identity=C9;if(Aq.call(Ch,C1.selectionInfo)){Cr.sort=true;C1.sort=true;C1.sortOrder=Ch.metricSortInfo.order;C8.innerHTML+=Ch.metricSortInfo.order?"asc":"desc";}}C1.customScale=(A5.call(Ch,C1.selectionInfo.midx,"XAxis")===Bm.CUSTOM);DP.push(Cr);}Cp=new mstrmojo.VisAxisLabel({placeholder:C8,width:DD+"px",height:Ch.view.textHeightInX+"px",cssClass:(Co?"gm-xaxis-cell-label":"gm-x2axis-cell-label"),styles:Ch.xTitleStyles,align:Co?"bottom":"top",contentData:DP});Cp.render();Cp.parent=CX;if(!Co&&!Ch.drawX2Numeric){var Cl=Cp.domNode,Cj={};Cj.top=(DL-DE)>>1;B3.positionDomNode(Cl,Cj);}Ch.addDisposable(Cp);if(C4.length===1){DM.labelDiv=Cp.domNode;DM.combinedLabelDiv=undefined;}else{DM.labelDiv=undefined;DM.combinedLabelDiv=Cp.domNode;}}else{if(!DO.isMetric){DM.appendChild(C8);DP=[];if(DO.items.length>0){Bx.forEach(DO.items,function(DV,DU){Cr={text:DV,extraAttributes:{type:BW.GM_XLABEL,dzId:B8.XAxis,dzIndex:DU,identity:new BV.AttributeAxisTitleIdentity({n:DV,tid:DO.ids[DU],objType:b.X_ATTRIBUTE_AXIS_TITLE})}};DP.push(Cr);});}Cp=new mstrmojo.VisAxisLabel({placeholder:C8,width:DD+"px",height:Ch.view.textHeightInX+"px",cssClass:"gm-xaxis-cell-label",styles:Ch.xTitleStyles,align:"bottom",contentData:DP});Cp.render();Cp.parent=CX;Ch.addDisposable(Cp);if(DP.length===1){DM.labelDiv=Cp.domNode;}else{if(DP.length>1){DM.combinedLabelDiv=Cp.domNode;}}}}}else{if(!Ct&&!Ch.hasFooterInX&&DO.isMetric){if(DR.length===0&&DA.isMetric){DR=Cv?DA.items:C5.items;Cw=Cv?DA.cellHandlers:C5.cellHandlers;Ck=B8.YAxis;}Cu=DR.length;DM.metrics=[];var DK,C6,C1,C4=[];for(DK=0;DK<Cu;DK++){C4.push(DK);DM.metrics.push(DR[DK]);}for(DK=0;DK<C4.length;DK++){C7=C4[DK];C6=DR[C7];C1={};C1.dzId=Ck;C1.dzIndex=C7;C1.type=BW.GM_XLABEL;if(CT.isABL&&Cw){DC=(Cw[C7].col-Ch.gts.row.length)%CN.getMetricCount();Cm=CN.getMetricIDsFromIndex([DC])[0];Cx=CN.getMetricIDFromIndex(DC);C1.selectionInfo=C1.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:Cx,midx:DC,cellHandle:Cw[C7],objType:b.X_METRIC_AXIS_TITLE});C0=Ch.metricSelectionInfo;if(!C0[Cm]){C0[Cm]=C1.selectionInfo;}}else{if(CT.isBubbleOrScatter){DC=DO.mtsIdxArr[C7];Cm=CN.getMetricIDsFromIndex([DC])[0];Cx=CN.getMetricIDFromIndex(DC);C1.selectionInfo=C1.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:Cx,midx:DC,objType:b.X_METRIC_AXIS_TITLE});C0=Ch.metricSelectionInfo;if(!C0[Cm]){C0[Cm]=C1.selectionInfo;}}}DN.push(C1.selectionInfo);}}}DM.selectionInfos=DN;var Cs=AN(C3,DB,DE,"x",Co);DM.setAttribute("isPrimary",Co);DM.appendChild(Cs);if(!Ct&&DM.drawAxis){var DT=Ch.view.getWidgetPropertyValue(Co?AW.SCALE_X:AW.SCALE_X2),C2=DT!==undefined&&DT!==1;Ch.drawXAxis(Cs,C3,DB-DE,DG,DQ,DS.c,true,DS.dpIdx,C2,Co,DH);}}},Cc=function(Cx,Cs,Cp,Ct,Cn){if(Cx.length<=0){return Af.NORMAL;}Cn=Cn||false;var Cu=0,Cw=0,C1=Cp,C2=10,Co=5,Cy=[],Cr=Cx.length,Cv=Cs-C1*2,Cl=Cx.length,Cj=Cv/Cl;var C0=function(){var C5,C7,C4,C3,C6=Ch.view.HTML5PROPS.AXIS_LABEL_Y;for(C5=0;C5<Cr;C5++){C7=Cx[C5];C4=B3.measureTextWidth(C7,C6,0);C3=C1+(C5+0.5)*Cj-0.5*C4;Cy.push({Size:C4,Start:C3});}};var Cz=function(C4){var C5=C4.Start,C3=C5+C4.Size;return(C5>=Co&&C3<=Cs-Co);};var Ck=function(C6,C9,C7){var C5,C8,C4,C3=false;for(C5=C9;C5<C6.length;C5+=C7){C8=C6[C5];if(Cz(C8)===false){return true;}if(C5>=C7){C4=C6[C5-C7];if(C4.Start+C4.Size+C2>C8.Start){return true;}}}return C3;};C0();if(Ck(Cy,0,1)===false){return Af.NORMAL;}var Cq=false,Cm=false;Cq=Ck(Cy,0,2)===false;Cm=Ck(Cy,1,2)===false;if(Cq&&Cm){return Af.STAGGER;}if(Ct){return Af.ROTATE;}else{return Af.HORI_DROP;}},Cb=function(){var Cp,Cq,Cl,Cv,Ct=Ch.view,Cm=1,Co=0,Cr=this.getChartCountInRow(),Cu=this.property.readItem(BJ.X_AXIS_LABELS_ROTATION),Cn=Ct.getWidgetPropertyValue(AW.SCALE_CHART_WIDTH),Cj=Ch.getControllerAPI(L.GET_CHART_WIDTH),Cs=Math.min(100,Cr),Ck=Af.NORMAL;if(Cu===undefined){Cu=-1;}Cv=Cu===-1||Cu===2;for(Cp=0;Cp<Cs;Cp++){Cq=Ch.getXAxisLabels(Cp);Cl=Cj(0,Cp)*Cn;Cm=this.checkBarColumnsForAxisPadding(0,Cp);if(Cm>0){Co=Math.round(Cl/Cm/4);}Ck=Math.max(Ck,Cc(Cq,Cl,Co,Cv));if(Ck===Af.ROTATE){break;}}return Ck;};switch(CL){case L.GET_CHART_WIDTH:return AS;case L.GET_CHART_HEIGHT:return CQ;case L.GET_ROW_HEADER:return Cg;case L.UPDATE_ROW_HEADER:return CS;case L.GET_COLUMN_HEADER:return Cf;case L.UPDATE_COLUMN_HEADER:return CR;case L.GET_EXTRA_COLUMN_HEADER:return CZ;case L.CREATE_UNIT_Y_AXIS:return CM;case L.CREATE_UNIT_X_AXIS:return CV;case L.GET_FULL_FLEDGED_CHART:return CU;case L.GET_ROW_SPAN:return Cd;case L.GET_COLUMN_SPAN:return CY;case L.GET_METRICS_ON_X:return this.getMetricsOnXAxis;case L.GET_METRICS_ON_Y:return this.getMetricsOnYAxis;case L.GET_METRICS_ON_SIZE_BY:return this.getSizeByMetrics;case L.UPDATE_MINI_CHART:return CW;case L.UPDATE_Y_AXIS:return Ce;case L.UPDATE_X_AXIS:return CO;case L.MAX_RADIUS_CALC:return CP;case L.LAYOUT_ALL_X_AXIS_LABELS:return Cb;case L.LAYOUT_ONE_X_AXIS_LABELS:return Cc;}},getUnifiedMetricCondense:function(CM,CN,Cb,Ci){var Ck=this,Ca=this.getMetricCondense(CM),Cc=CN==="y"?Ck.model.cic:Ck.model.cir,CV=CN==="y"?Ck.inChartLayout.r:Ck.inChartLayout.c,AS,CW,CZ,CQ=false,Ch,Cj,CU,CR,CT,CL,CY,CP,Cf,CX,CS=CN.toUpperCase()+(Cb?"":"2"),Cg,Cl=this.isBubbleOrScatter();if(!Ca){return false;}else{Ca=false;}for(var Ce=0;Ce<Cc;Ce++){if(CN=="y"){CL=Ci+Ce*CV;CY=0;}else{CL=0;CY=Ci+Ce*CV;}AS=Ck.isLogScale(CS,CL,CY);CX=BZ.call(this,CL,CY);Cj=CX[CS+"MinValue"];Ch=CX[CS+"MaxValue"];CW=Ck.getOnTheFlyShapeForMetric(Ap.call(Ck,CL,CY,CS+"Axis"));CZ=0;if(Ck.chartSubType===3&&!Cl){CZ=2;}else{if(Ck.chartSubType===5&&!Cl){CQ=true;CZ=1;}}Cg=!!(CZ&1)?10:6;CP=k.prepareScalePlateOptions(AS,CW,CZ);Cf=k.getScalePlate(true);if(Cf){CX=Cf.getMaxMinTickValue(CP,CZ,Ch,Cj);if(CQ){CT="0%";}else{CT=Ck.model.getMetricNumberFormat(CM);if(CT.match("%")!==null){var Cd=this.model,CO=Cd.getFullNumberFormat()[CM];if(CO&&CO.nct===4){Cg=10;}}}CU=C.formatByMask(CT,CX.Max);CR=C.formatByMask(CT,CX.Min);if(CU.length>Cg||CR.length>Cg){Ca=true;break;}}}return Ca;},getMetricCondense:function(CL){var AS=this.getMetricFormat(CL);return AS&&AS.cds===true;},getMetricFormat:function(CP){var CL=this.model,CM,CN=false,CO,AS;if(CP>=0){CM=CL.getMetricIDsFromIndex([CP])[0];CO=CL.getMetricNamesFromIndex([CP])[0];CN=CL.getMetricCondenseFromIndex([CP])[0];AS=CL.getMetricNumberFormat(CP);return{mId:CM,n:CO,nf:AS,cds:CN};}return{};},getMetricFormatFromIndexArray:function(AS){var CL=[],CM=this;Bx.forEach(AS,function(CN){CL.push(CM.getMetricFormat(CN));});return CL;},hasTheSameFormat:function(AS,CO){var CN=this,CM=CN.getMetricFormat(AS),CL=CN.getMetricFormat(CO);return CM.nf===CL.nf;},hasCustomOnAxis:function(){var CN,CL,CO,CM;CL=Ah(this.getMetricsOnYAxis());CN=Ah(this.getMetricsOnXAxis());CO=BU.call(this,CN,"XAxis");CM=BU.call(this,CL,"YAxis");var AS=false;if(!CO.emptyAxis&&CO.customAxisEnabled){AS=true;}if(!CM.emptyAxis&&CM.customAxisEnabled){AS=true;}return AS;},populateChartRefreshment:function(AS,CT,CU){var CO=U.call(this,AS,CT);CO.rowIndex=AS;CO.colIndex=CT;CU.dataProvider=CO;var CL=this.getControllerAPI(L.GET_CHART_WIDTH);var CR=this.getControllerAPI(L.GET_CHART_HEIGHT);var CP=this.view.getWidgetPropertyValue(AW.SCALE_CHART_WIDTH);var CN=this.view.getWidgetPropertyValue(AW.SCALE_CHART_HEIGHT);CU.size={w:CL(AS,CT)*CP,h:CR(AS,CT)*CN};var CQ=BZ.call(this,AS,CT);var CM=this.getChartInfo(),CS=B1;if(CM.tp===CS.BUBBLE){CU.primaryValueAxis={min:CQ.YMinValue,max:CQ.YMaxValue};CU.secondaryValueAxis={min:CQ.XMinValue,max:CQ.XMaxValue};}else{}if(CM.tp===CS.BUBBLE){CU.plot={};}else{}},getSharedChartInstance:function(AS,CP,CR){this.sharedCharts=this.sharedCharts||{};var CO=null,CS,CL=CR.purpose;if(CL==="clipping"){this.sharedCharts[CL]=this.sharedCharts[CL]||{};var CQ,CM,CN=this.sharedCharts[CL];CS="x:",CQ=Ah(this.getMetricsOnAxisOfChart(AS,CP,"x",true));CS+=CQ.join("-")+"; y:";CM=Ah(this.getMetricsOnAxisOfChart(AS,CP,"y",true));CS+=CM.join("-");CO=CN[CS];}else{CO=this.sharedCharts[CL];}if(CO){this.populateChartRefreshment(AS,CP,CR);CO.refreshChartComponents(CR);}else{CO=this.queryChartInstance(AS,CP,false,true);if(CL==="dataLabelRotation"){if(CO.mDatasetPtr.showDatalabels()===false){return null;}CO.PlainDraw();}if(CL==="clipping"){this.sharedCharts[CR.purpose][CS]=CO;}else{this.sharedCharts[CR.purpose]=CO;}}return CO;},queryChartInstance:function(Cf,Cn,CS,Cb){var Ce,CV,Co,Ca,Cj,Ch,CT,CP,Cg,Cd=this.chartsPosIdMap,Cc=this.getChartInfo();if(!Cd){Cd=this.chartsPosIdMap={};}if(!Cd[Cf]){Cd[Cf]={};}if(Cd[Cf][Cn]){l.destroyDisposable(this,mstrmojo.all[Cd[Cf][Cn]]);}Ch=U.call(this,Cf,Cn);Ch.rowIndex=Cf;Ch.colIndex=Cn;CT=BZ.call(this,Cf,Cn);CP=this.hasSizeBy();Cg={HasSizeBy:CP};if(CP){Cg.Max=CT.ZMaxValue;Cg.Min=CT.ZMinValue;}Ce=this.hGetChartInstance({dataProvider:Ch});Cd[Cf][Cn]=Ce.id;CT.GraphHeight=400;CT.LabelPlacement=this.xLabelPlacement;Cg={HasSizeBy:CP};if(CP){Cg.Max=CT.ZMaxValue;Cg.Min=CT.ZMinValue;}var Ck={Extremes:CT,SizeBy:Cg};if(Cb){var CN=this.getControllerAPI(L.GET_CHART_WIDTH);var CX=this.getControllerAPI(L.GET_CHART_HEIGHT);var CO=this.view.getWidgetPropertyValue(AW.SCALE_CHART_WIDTH);var CM=this.view.getWidgetPropertyValue(AW.SCALE_CHART_HEIGHT);Ck.GraphSize={W:CN(Cf,Cn)*CO,H:CX(Cf,Cn)*CM};}if(CS){CV=this.getDataAreaPadding(Cf,Cn);Co=this.getChartUniformAxisMargins(Cf,Cn);Ca=this.getChartUniformAxisTrims(Cf,Cn);Cj=this.getPerCellSetting(Cf,Cn);mstrmojo.hash.copy(Ca,Co);mstrmojo.hash.copy(Cj,Co);Ck.DataAreaPaddings=CV;Ck.UniformAxisPaddings=Co;}Ck.isABL=Cc.isABL;Ck.GraphType=this.ceChartType;this.completePropForCE(Ck,{dataProvider:Ch});var Cm,AS,CZ,CR;Cm=Ah(this.getMetricsOnAxisOfChart(Cf,Cn,"x",true));AS=Ah(this.getMetricsOnAxisOfChart(Cf,Cn,"y",true));CZ=Ah(this.getMetricsOnAxisOfChart(Cf,Cn,"x",false));CR=Ah(this.getMetricsOnAxisOfChart(Cf,Cn,"y",false));var CY=BU.call(this,Cm,"XAxis"),CL=BU.call(this,AS,"YAxis"),Cp=BU.call(this,CZ,"XAxis"),CU=BU.call(this,CR,"YAxis");if(CY.emptyAxis===false){CT.XCustomScale=CY.customAxisEnabled;CT.XMetrics=Cm;}if(CL.emptyAxis===false){CT.YCustomScale=CL.customAxisEnabled;CT.YMetrics=AS;}if(Cp.emptyAxis===false){CT.X2CustomScale=Cp.customAxisEnabled;CT.X2Metrics=CZ;}if(CU.emptyAxis===false){CT.Y2CustomScale=CU.customAxisEnabled;CT.Y2Metrics=CR;}CT.XCategoryAxis=CT.XCategoryAxis||{};CT.YCategoryAxis=CT.YCategoryAxis||{};var Ci=(this.chartSubType===BL.CLUSTERED||this.chartSubType===BL.ABSOLUTE),CQ=(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&Ci,CW=(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart;CT.XCategoryAxis.EnforceCluster=CQ;CT.XCategoryAxis.EnforceFringe=CW;CT.YCategoryAxis.EnforceCluster=CQ;CT.YCategoryAxis.EnforceFringe=CW;var Cl=AD.call(this,Cf,Cn);CT.X1CondenseEnfored=Cl.X1;CT.YCondenseEnfored=Cl.Y1;CT.X2CondenseEnfored=Cl.X2;CT.Y2CondenseEnfored=Cl.Y2;Ck.ElementInfo=this.sizeInfo;Ck.AxisLayout=z.call(this,Cf,Cn);Ck.Extremes=CT;Ce.configureChart(Ck);return Ce;},calculateRadius:function(){this.getControllerAPI(L.MAX_RADIUS_CALC).call(this);},decideDataLabelRotation:function(){var Cc=this,Cb=false,Cd=this.getChartInfo(),AS=this.hasBarChart,CP=this.isCombo;var CV=0,CX=U.call(this,0,0),CY=CX&&CX.getSeriesCount()||0;if(!!CX===false||CY===0){return ;}if(CP){for(;CV<CY;i++){Cb=Cb||CX.getShapeBySeries()===1;}}else{Cb=this.markerShape===1&&Cd.isABL;}if(Cb===false){return ;}var CN={purpose:"dataLabelRotation"},CW=Cc.getSharedChartInstance(0,0,CN);if(!!CW===false){return ;}if(CW.mDatasetPtr&&CW.mDatasetPtr.showDatalabels()===false){return ;}var CO=CW.mChartContextPtr,CS=CW.mDatasetPtr,CU=CO.mGraphWidth,CZ=CO.mGraphHeight;var CL=CO.IsBarChart();if(!CL&&CO.isCombinationChart()){var Ca=CS.GetSeriesByShape().Bar,CY=CS.GetSeriesCount();CL=(Ca.length===CY);if(!CL&&Ca.length){CL=true;}}if(CL){CW.PlainDraw();}else{return ;}var CQ=21155,CM=mstrmojo.chart.gNullTripleId;CO.PutGraphProperty(CQ,CM,null);var CT=CW.ShouldRotateDataLabel(CU,CZ);var CR=0;if(CT.Adjust&&(CO.IsBarChart(1)||CW.mDatasetPtr.GetSeriesCount()===1)){var CX=U.call(this,0,0);if(CO.IsVertical()){CW=this.getAxisChartInstance(CX,0,0,"y",true,0,CZ,false);if(CW!==null){CW.GetUniformYAxisWidth(CZ,-1,true);}else{if(CO.IsDualAxis()){CW.GetUniformYAxisWidth(CZ,-1,false);}}this.YAxisDataLabelPadding=CW&&CW.getAxisPadding(CR).H||0;}else{CW=this.getAxisChartInstance(CX,0,0,"x",true,0,CU,false);if(CW!==null){CW.GetUniformXAxisHeight(CU,-1,true);}else{if(CO.IsDualAxis()){CW.GetUniformXAxisHeight(CU,-1,false);}}this.XAxisDataLabelPadding=CW&&CW.getAxisPadding(CR).H||0;}}},setupAxisCondense:function(){var CQ=this,CM={},CP={},CO={},CS={},CL=this.getXAxisInfo(),AS=this.getYAxisInfo(),CT=this.getXAxisInfo(undefined,undefined,false),CN=this.getYAxisInfo(undefined,undefined,false),CR=function(Ca,CX,Cc){var CZ,CY,CU,CW,Cb,Cd=CX==="y"?CQ.inChartLayout.r:CQ.inChartLayout.c,CV;for(CZ=0;CZ<Cd;CZ++){if(CX==="y"){CV=CQ.getMetricsOnAxisOfChart(CZ,0,CX,Cc);}else{CV=CQ.getMetricsOnAxisOfChart(0,CZ,CX,Cc);}CW=CV.length;if(CW===1){CU=CV[0];Ca[CU]=CQ.getUnifiedMetricCondense(CU,CX,Cc,CZ);}else{if(CW>1){Cb=false;for(CY=0;CY<CW;CY++){CU=CV[CY];if(CQ.getUnifiedMetricCondense(CU,CX,Cc,CZ)){Cb=true;break;}if(CQ.chartSubType!==5){if(CY!==0&&!CQ.hasTheSameFormat(CU,CV[0])){Cb=true;break;}}}for(CY=0;CY<CW;CY++){CU=CV[CY];Ca[CU]=Cb;}}}}};if(CL.isMetric){CR(CM,"x",true);}if(AS.isMetric){CR(CP,"y",true);}if(CT.isMetric){CR(CO,"x",false);}if(CN.isMetric){CR(CS,"y",false);}this.xCondense=CM;this.yCondense=CP;this.x2Condense=CO;this.y2Condense=CS;},getRowHeadersToCalcWidth:function(){var CN=this.rowHeaderCnt,CM=[],CL,AS=this.model;for(CL=0;CL<CN;CL++){CM.push(AS.collectHeadersLabels(0,CL));}return CM;},getColHeadersToCalcWidth:function(){var CN=this.colHeaderCnt,CM=[],CL,AS=this.model;for(CL=0;CL<CN;CL++){CM.push(AS.collectHeadersLabels(1,CL));}return CM;},createACanvas:function D(CO,CM,AS,CN){var CL=document.createElement("canvas");CL.width=CO;CL.height=CM;CL.style.zIndex=8;CL.style.top=CN+"px";CL.style.left=AS+"px";CL.style.position="absolute";return CL;},parseNumericAxisFormat:function u(CO,CR,CQ,CL){var AS=CO?"x":"y";var CN=Ah(this.getMetricsOnAxisOfChart(CQ,CL,AS,CR));var CP="General",CM=this.model;CN.forEach(function(CT,CS){var CU=CM.getMetricNumberFormat(CT);if(!!CU&&CU.hasOwnProperty("nfs")){CU=CU.nfs;if(CP===undefined){CP=CU;}else{if(CP!==CU){CP="General";return CP;}}}});return CP;},postDrawCollecting:function Bi(CP,AS,CW,CU,CR,CT,CZ){var CN=CU.getUniformAxisTrims(CP,CW),CS,Cb,Ca,CL,CQ;var CX=CT,CO=0,CM=CR;if(!CP){CO=CR;CM=0;CX=CZ;}if(CU.IsZeroBaseLineQualified(CP,CW)){CS=CU.GetPositionAtTick(0,CP,CX);}else{CS=null;}var CY=0,CV=1;Cb=AS?CU.getUniformAxisGridLinePosition(true):[];Ca=AS?CU.getUniformAxisGridLinePosition(false):[];CL=AS?(CU.getUniformAxisFormat()||this.parseNumericAxisFormat(CP,CW,CO,CM)):"";CQ=!!CU.useOriginFormatForZeroLine?CV:CY;return{MajorGrids:Cb,MinorGris:Ca,ZeroPos:CS,ZeroStyle:CQ,AxisTrims:CN,AxisFormat:CL};},drawYAxis:function(CY,CU,Cj,CO,Cb,CS,Cg,CM,Ce,Cf,CX,CL){var Cc,Ch=this.model,AS=this.yIsNumeric,CT=Cf?this.yZeroAxisPos:this.y2ZeroAxisPos,Cp=this.yMajorGridLinePos,Cm=this.yMinorGridLinePos,CP=Ch.getLocalDataSet(Cb,CS),Cr=CP.generateDataProvider(),Cl=this.yAxisMargins;var Cd=Cr[CM];if(Cg===true){Cd.clearGraphJSON();}var CZ=this.getAxisChartInstance(Cd,CO,0,"y",Cf,CU,Cj,true);if(CZ&&CZ.newBorn){CZ.GetUniformYAxisWidth(Cj,-1,Cf);Cl[CO]=CZ.GetUniformAxisMargins();delete CZ.newBorn;}var Cq=true;if(CZ&&!CL){Cq=!!CZ.visited;}if(!CZ){CZ=this.getAxisChartInstance(Cd,CO,0,"y",Cf,CU,Cj,true);CZ.GetUniformYAxisWidth(Cj,-1,Cf);Cl[CO]=CZ.GetUniformAxisMargins();}else{if(Cq||Ce){CZ.configureChart({GraphSize:{W:CU,H:Cj},ElementInfo:this.sizeInfo,AxisLayout:z.call(this,CO,0),Timer:this.view.enableCETimer});CZ.GetUniformYAxisWidth(Cj,CU,Cf);Cl[CO]=CZ.GetUniformAxisMargins();}else{Cl[CO]=CZ.GetUniformAxisMargins();}}CZ.UpdatePartialRenderingWindow(this.enablePartialRendering,CX,CX?CX.flag:2);var CR={};if(this.YAxisDataLabelPadding>0&&this.YAxisDataLabelPadding<Cj){CR.dataLabelPadding=this.YAxisDataLabelPadding;}var Ci=CZ.DrawUniformYAxis(CU,Cj,Cf,CR),Ca=Ci.svg;if(this.useCECanvas){var Ck=null;if(!this.drawer){Ck=this.drawer=new BV.VecDrawer();}else{Ck=this.drawer;}Ck.graphData=Ci;var CV=Ck.graphNode=this.createACanvas(CU,Cj,0,0);if(Cf){CV.style.left="";CV.style.right="0px";}else{CV.style.left="0px";CV.style.right="";}CY.appendChild(CV);Ck.retrieveGraphSrc(Cj,CU);}else{if(this.clusteredBarSpecialCase){Ca.setAttribute("type",BW.GM_SVG_Y_NUMERIC);}else{Ca.setAttribute("type",this.yIsNumeric?BW.GM_SVG_Y_NUMERIC:BW.GM_SVG_Y_CATEGORY);}Ca.style.position="absolute";CY.appendChild(Ca);AU=CZ.mChartContextPtr.mCanvas.mGradientCount;}if(this.view.getWidgetPropertyValue(AW.BANDING)){Cc=CZ.getUniformAxisBanding();this.bandings[CO]=Cc;this.drawInChartBanding(CY.parentNode,Cc,this.bandingFlags[CO]);}var CN,CW=this.postDrawCollecting(false,AS,Cf,CZ,CO,CU,Cj);Cp[CO]=CW.MajorGrids;Cm[CO]=CW.MinorGris;CT[CO]=CW.ZeroPos;CN=CW.AxisTrims;if(CN.isCaTrim){var Co=this.caAxisTrims[1];Co[CO]=CN;}else{var CQ=Cf?this.yAxisTrims:this.y2AxisTrims;CQ[CO]=CN;}if(AS){var Cn=this.axisFormats["y"+(Cf?"1":"2")];Cn[CO]=CW.AxisFormat;}CZ.visited=true;},getAxisChartInstance2:function(CP,CO,CU,CY){var CZ=this.model,CL=this.getControllerAPI(L.GET_CHART_WIDTH),CS=this.getControllerAPI(L.GET_CHART_HEIGHT),CM=this.view.getWidgetPropertyValue(AW.SCALE_CHART_WIDTH),AS=this.view.getWidgetPropertyValue(AW.SCALE_CHART_HEIGHT),CV=this.mapFromChartToLDSIndex(CP,CO),CW=CU==="x"?CP:CV.r,CR=CU==="x"?CV.c:CO,CN=CV.dpIdx,CQ=CZ.getLocalDataSet(CW,CR),Cb=CQ.generateDataProvider(),CX=Cb[CN],CT=CL(CP,CO)*CM,Ca=CS(CP,CO)*AS;return this.getAxisChartInstance(CX,CP,CO,CU,CY,CT,Ca,true);},getAxisChartInstance:function(CX,CR,CP,CU,CY,CT,Cd,CQ){var CL,CV,CN;var Cc=Ah(this.getMetricsOnAxisOfChart(CR,CP,CU,CY));var CS=BU.call(this,Cc,CU==="x"?"XAxis":"YAxis");var Cb=(CY===false)?CU.toUpperCase()+"2AxisChart":CU.toUpperCase()+"AxisChart";var AS=CU==="x"&&{Layout:this.xLabelPlacement,StartRow:X(this.widthRatio,CP),EnforceCluster:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&CZ,EnforceFringe:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart};CQ=CQ||false;if(CS.emptyAxis){return null;}if(CQ&&!this.forceUpdateAxis()){if(CX[Cb]){if(CU==="x"){var Cf=this.property.readItem(BJ.X_AXIS_LABELS_ROTATION);CX[Cb].updateUniformAxisLabelRotation(this.xLabelPlacement,Cf);CX[Cb].updateUniformXAxisLayout(AS);}CN=this.getDataAreaPadding(CR,CP);if(!!CN){CX[Cb].UpdateValueAxisPadding(CN);}if(CX[Cb].newBorn){delete CX[Cb].newBorn;}return CX[Cb];}}l.destroyDisposable(this,CX&&CX[Cb]);CX.rowIndex=CR;CX.colIndex=CP;CX.EnforedCondense=CX.EnforedCondense||{};CV=this.hGetChartInstance({dataProvider:CX,isAxis:true});CL=BZ.call(this,CR,CP);var Ca,Ce=CU.toUpperCase()+"MinValue";Ca=CL[Ce];if(Ca!==undefined&&Ca<0&&this.msgCenter){if(this.isLogScale(CY?CU:CU+"2",CR,CP)){var CW=this.view;if(CW.logScaleChanged){var CO=mstrmojo.desc(13656,"Data less than or equal to zero has been removed from the graph");this.msgCenter[CO]=true;CW.logScaleChanged=false;}}}CL.GraphHeight=400;CL.LabelPlacement=this.xLabelPlacement;CL.xAxisRotateMode=this.property.readItem(BJ.X_AXIS_LABELS_ROTATION);if(CY===false){CX[Cb]=CV;CL[CU.toUpperCase()+"2Metrics"]=Cc;CL[CU.toUpperCase()+"2CustomScale"]=CS.customAxisEnabled;CL[CU.toUpperCase()+"2CondenseLabel"]=this[CU+"2Condense"];CL[CU.toUpperCase()+"2CondenseEnfored"]=CX.EnforedCondense[CU.toUpperCase()+"2"]||false;}else{CX[Cb]=CV;CL[CU.toUpperCase()+"Metrics"]=Cc;CL[CU.toUpperCase()+"CustomScale"]=CS.customAxisEnabled;CL[CU.toUpperCase()+"CondenseLabel"]=this[CU+"Condense"];CL[CU.toUpperCase()+"CondenseEnfored"]=CX.EnforedCondense[CU.toUpperCase()]||false;}if(this.forceUpdateAxis()){CN=this.getDataAreaPadding(CR,CP);if(!!CN){CX[Cb].UpdateValueAxisPadding(CN);}}var CZ=(this.chartSubType===BL.CLUSTERED||this.chartSubType===BL.ABSOLUTE);if(CU==="x"){CL.XCategoryAxis=AS;}else{CL.YCategoryAxis={EnforceCluster:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&CZ,EnforceFringe:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart};}var CM={Extremes:CL};this.completePropForCE(CM,{dataProvider:CX,isAxis:true});CM.AxisLayout=z.call(this,CR,CP);CV.configureChart(CM);CV.newBorn=true;return CV;},drawXAxis:function(CX,CS,Ci,Ca,CM,CQ,Ce,CL,Cc,Cd,CW){var Cf=this.model,Cj=this.xIsNumeric,CR=Cd?this.xZeroAxisPos:this.x2ZeroAxisPos,Cn=this.xMajorGridLinePos,Cm=this.xMinorGridLinePos,CO=Cf.getLocalDataSet(Ca,CQ),Cp=CO.generateDataProvider(),Cb=Cp[CL],Ch=this.xAxisMargins;if(Ce===true){Cb.clearGraphJSON();}var CY=this.getAxisChartInstance(Cb,0,CM,"x",Cd,CS,Ci,true);if(CY&&CY.newBorn){CY.GetUniformXAxisHeight(CS,-1,Cd);Ch[CM]=CY.GetUniformAxisMargins();delete CY.newBorn;}var Co=true;if(CY){Co=!!CY.visited;}if(!CY){CY=this.getAxisChartInstance(Cb,0,CM,"x",Cd,CS,Ci,true);CY.GetUniformXAxisHeight(CS,-1,Cd);Ch[CM]=CY.GetUniformAxisMargins();}else{if(Co||Cc){CY.configureChart({GraphSize:{W:CS,H:Ci},ElementInfo:this.sizeInfo,AxisLayout:z.call(this,0,CM),Timer:this.view.enableCETimer});CY.GetUniformXAxisHeight(CS,Ci,Cd);Ch[CM]=CY.GetUniformAxisMargins();}else{Ch[CM]=CY.GetUniformAxisMargins();}}CY.UpdatePartialRenderingWindow(this.enablePartialRendering,CW,CW?CW.flag:2);var CP={};if(this.XAxisDataLabelPadding>0&&this.XAxisDataLabelPadding<CS){CP.dataLabelPadding=this.XAxisDataLabelPadding;}var Cg=CY.DrawUniformXAxis(CS,Ci,Cd,CP),CZ=Cg.svg;if(this.useCECanvas){var Cl=null;if(!this.drawer){Cl=this.drawer=new BV.VecDrawer();}else{Cl=this.drawer;}Cl.graphData=Cg;var CU=Cl.graphNode=this.createACanvas(CS,Ci,0,0);if(Cd){CU.style.top="0px";CU.style.bottom="";}else{CU.style.top="";CU.style.bottom="0px";}CX.appendChild(CU);Cl.retrieveGraphSrc(Ci,CS);}else{if(this.clusteredBarSpecialCase){CZ.setAttribute("type",BW.GM_SVG_X_NUMERIC);}else{CZ.setAttribute("type",this.xIsNumeric?BW.GM_SVG_X_NUMERIC:BW.GM_SVG_X_CATEGORY);}CZ.style.position="absolute";CX.appendChild(CZ);AU=CY.mChartContextPtr.mCanvas.mGradientCount;}var CN,CV=this.postDrawCollecting(true,Cj,Cd,CY,CM,CS,Ci);Cn[CM]=CV.MajorGrids;Cm[CM]=CV.MinorGris;CR[CM]=CV.ZeroPos;CN=CV.AxisTrims;if(CN.isCaTrim){var CT=this.caAxisTrims[0];CT[CM]=CN;}else{var AS=Cd?this.xAxisTrims:this.x2AxisTrims;AS[CM]=CN;}if(Cj){var Ck=this.axisFormats["x"+(Cd?"1":"2")];Ck[CM]=CV.AxisFormat;}CY.visited=true;},mapFromChartToLDSIndex:function(CM,CR){var CO=this.inChartLayout,CP=Math.floor(CM/CO.r),AS=Math.floor(CR/CO.c),CL=CM%CO.r,CQ=CR%CO.c,CN=CL*CO.c+CQ;return{r:CP,c:AS,dpIdx:CN,inchtRow:CL,inchtCol:CQ};},drawInChartZeroLine:function(CL,CU,CP,AS,CR){var CQ,CT=this.xZeroAxisPos[CR],CS=this.yZeroAxisPos[AS],CM=this.x2ZeroAxisPos[CR],CO=this.y2ZeroAxisPos[AS],CN=false;if(this.chartType===B1.BAR){if(this.axisFormat.xAxOriLnShw){CT=CM=null;}else{CN=true;}if(this.axisFormat.yAxOriLnShw){CS=CO=null;}else{CN=true;}}if(CS){CQ=g(CU,CS,CN);CL.appendChild(CQ);}if(CO){CQ=g(CU,CO,CN);CL.appendChild(CQ);}if(CT){CQ=BM(CP,CT,CN);CL.appendChild(CQ);}if(CM){CQ=BM(CP,CM,CN);CL.appendChild(CQ);}},drawInChartBanding:function(AS,CR,CP){var CN,CL,CT,CO,CM=CR.length,CQ=document,CS=CQ.createElement("div");CS.setAttribute("class","gm-banding-container");for(CN=0;CN<CM;CN++){CL=CR[CN].Start;CT=CR[CN].Size;CO=CQ.createElement("div");CO.setAttribute("class","gm-banding-div");CO.style.top=CL+"px";CO.style.height=CT+"px";if(CN%2!==CP){Ba.addClass(CO,"odd");}CS.appendChild(CO);}AS.appendChild(CS);},drawOnDiv:function(CR,CN,CZ,CT,Cd,CX,CO,CQ){var Cf=this.bandings,AS=CQ?CQ.flag:2,CM,Ce,CW,CS;CW=U.call(this,CT,Cd);if(CW.isBlankGrid){var Cg=this.getChartInfo();if(Cg.isGrid===false){return ;}}if(CX===true){CW.clearGraphJSON();}CM=CN;Ce=CZ;CW.r=CT;CW.c=Cd;var CY=CW.graphJSON;if(!CY){CS=this.queryChartInstance(CT,Cd,true,true);var Cc=true;if(this.enablePartialRendering){if(this.isBubbleOrScatter()){var Cb=1000;Cc=(CW.getGroupCount()>Cb);}}CS.UpdatePartialRenderingWindow(this.enablePartialRendering&&Cc,CQ,AS);var CL={xDataLabelPadding:this.XAxisDataLabelPadding,yDataLabelPadding:this.YAxisDataLabelPadding};CY=CS.DrawDataAreaForUniformAxis(CM,Ce,CL);CW.graphJSON=CY;}CR.hiddenItems=CY.hiddenItems;var CU=CY.svg;if(this.useCECanvas){var Ca=null;if(!this.drawer){Ca=this.drawer=new BV.VecDrawer();}else{Ca=this.drawer;}Ca.graphData=CY;var CP;CP=Ca.graphNode=this.createACanvas(CM,Ce,0,0);CR.appendChild(CP);Ca.retrieveGraphSrc(Ce,CM);}else{CU.setAttribute("type",BW.GM_SVG_CHART);CR.appendChild(CU);AU=CS.mChartContextPtr.mCanvas.mGradientCount;}this.drawInChartZeroLine(CR,CN,CZ,CT,Cd);if(this.view.getWidgetPropertyValue(AW.BANDING)){if(this.yIsNumeric){var CV=[{Start:0,Size:CZ}];this.drawInChartBanding(CR,CV,this.bandingFlags[CT]);}else{if(Cf[CT]!==undefined){this.drawInChartBanding(CR,Cf[CT],this.bandingFlags[CT]);}}}},hasSizeBy:function(){var AS=this.dz.SizeBy.TemplateMetric;return(AS&&AS.length>0)||false;},hasColorBy:function(){var AS=this.view;if(AS.noData){return false;}return this.model.colorType!==BH.NULL;},isAxisAttributeInColorBy:function Av(){var AS=this.dz,CQ=AS.XAxis,CM=AS.YAxis,CP=AS.ColorBy,CO=(CQ.TemplateUnit||[]).concat(CM.TemplateUnit||[]),CR=CP.TemplateUnit||[],CL=function(CS){return typeof CS.MetricNames!=="undefined";};if((CL(CQ)||CL(CM))&&CL(CP)){return true;}for(var CN=0;CN<CO.length;++CN){if(Bx.find(CR,"n",CO[CN].n)>=0){return true;}}return false;},completePropForCE:function(CN,CO){var CM=CO.graphSize,CQ=this.getChartInfo(),CL=this.model,AS,CP;if(this.useCECanvas){CP=105;}else{CP=103;}AS={isABL:CQ.isABL,OutputType:CP,GraphType:this.ceChartType,ThemeType:this.view.theme,ColorBy:{HasColorBy:CL.colorType!==BH.NULL},ElementInfo:this.sizeInfo};if(CM){AS.GraphSize=CM;}if(this.enableCombiChart){AS.ShapeType=203;}else{if(this.ceMarkerShape){AS.ShapeType=this.ceMarkerShape;}}Ao.copy(AS,CN);},hGetChartInstance:function(CM){var AS=CM.dataProvider,CL=AQ.call(this,CM);if(!CL){B3.visPrint("chart instance is invalid");AS.testDataProvider();}return CL;},getStyleEffectsOptions:function(){var CO=this.view;if(CO.noData){return[];}var AS=[],CL,CM=this,CN=this.getColorByOptions();AS.push({opt:mstrmojo.desc(2058,"All"),optLvl:Bf.ALL_SHAPE,comb:-1});CL=this.getMetricsOnYAxis();CL=CL.concat(this.getMetricsOnXAxis());Bx.forEach(CL,function(CQ){AS.push(Z.call(CM,[CQ]));});if(CN){AS.push(CN);}var CP=CO.identity;if(CP&&CP.identityArr&&CP.identityArr.length>0){AS.push({opt:mstrmojo.desc(12091,"Selected Elements"),optLvl:Bf.ITSELF,comb:-1});}return AS;},getColorByOptions:function(){var CN=this.view;if(CN.noData){return[];}var CM,CR=[],CQ=this.model,CP=CQ.colorType,CT,AS,CO,CS;function CL(CY){var CX,CV=[],Ca=CY.levels,CZ=CY.elements,CW=CY.types,CU=Ca.length;for(CX=0;CX<CU;CX++){CV.push({eid:CZ[CX],tid:Ca[CX],tp:CW[CX]});}return CV;}if(CP===BH.ATT||CP===BH.ATT_METRICS||CP===BH.METRICS_ITEM){CT=CQ.getColorByLegendInfo();AS=CT.item;CO=CT.elements;Bx.forEach(CO,function(CU){CR.push({opt:CU.label,comb:CL(CU.token),optLvl:Bf.COLOR_BY});});CS=CN.arrayOfComb;if(CS&&CS.length>1){CR.push({opt:mstrmojo.desc(12092,"Multiple Elements"),comb:[],key:"multiple",optLvl:Bf.COLOR_BY});}CM={opt:AS,optLvl:Bf.COLOR_BY,comb:-1,subOptions:CR};if(CP===BH.METRICS_ITEM){CM.isMetricNames=true;}return CM;}return undefined;},getNumericAxisOptions:function(Ce,CP,Cc,CN,Cf){var CU=this.view;if(CU.noData){return[];}var CQ=this.getChartInfo(),CZ=[],Cd=this,CM=this.inChartLayout,CO=CM.r,CV=CM.c,CS=[],CL=[],AS=[],CY=[],CX=[],CT,Cb,CR,Ca;if(CQ.tp!==B1.GRID){for(CT=0;CT<CO;CT++){CL=Ah(this.getMetricsOnAxisOfChart(CT,0,"y",true));if(CL.length>0){if(!Cc){CS.push(Z.call(Cd,CL,"y",CP));}CZ=CZ.concat(CL);}AS=Ah(this.getMetricsOnAxisOfChart(CT,0,"y",false));if(AS.length>0){if(!Cc){CS.push(Z.call(Cd,AS,"y2",CP));}CZ=CZ.concat(AS);}}for(Cb=0;Cb<CV;Cb++){CY=Ah(this.getMetricsOnAxisOfChart(0,Cb,"x",true));if(CY.length>0){if(!Cc){CS.push(Z.call(Cd,CY,"x",CP));}CZ=CZ.concat(CY);}CX=Ah(this.getMetricsOnAxisOfChart(0,Cb,"x",false));if(CX.length>0){if(!Cc){CS.push(Z.call(Cd,CX,"x2",CP));}CZ=CZ.concat(CX);}}}if(Cc){CZ.forEach(function(Cg){CS.push(Z.call(Cd,[Cg],"x",CP));});}if(Ce){var CW=false;CR=this.getSizeByMetrics();Ca=[];Bx.forEach(CR,function(Cg){if(CZ.indexOf(Cg)<0){Ca.push(Cg);}else{CW=true;if(Cf){Cf.push(Cg);}}});if(CQ.isBubbleOrScatter&&!this.splitPlottingMetrics&&CW){}else{if(Ca.length>0){CZ=CZ.concat(Ca);CS.push(Z.call(Cd,Ca,"z"));}}if(CN&&CW){Bx.forEach(CR,function(Cg){if(CL.indexOf(Cg)>=0){CN.push("y1");}if(AS.indexOf(Cg)>=0){CN.push("y2");}if(CY.indexOf(Cg)>=0){CN.push("x1");}if(CX.indexOf(Cg)>=0){CN.push("x2");}});}}if(CS.length>1){CS.unshift({opt:mstrmojo.desc(2460,"All Metrics"),mos:this.getMetricFormatFromIndexArray(CZ),key:"AllMetrics"});}return CS;},getDependentMetricOptions:function(){var CN=this.view;if(CN.noData){return[];}var AS,CM=this,CL=[];AS=CJ.call(this);Bx.forEach(AS,function(CO){CL.push(Z.call(CM,[CO]));});return CL;},getIndependentMetricOptions:function(){var CN=this.view;if(CN.noData){return[];}var AS=[],CM=this,CO=this.getChartInfo(),CL=[];if(CO.tp===B1.BUBBLE||CO.tp===B1.SCATTER){AS=this.getMetricsOnXAxis();}Bx.forEach(AS,function(CP){CL.push(Z.call(CM,[CP]));});return CL;},getRealReferenceOptionFromAxisOption:function(CL,AS,CP){var CO=this.view;if(CO.noData){return[];}var CN=Ao.clone(CL),CM=AS-1;CN.opt=CN.opt+" - "+BP[CM];CN.key=CN.key+","+A6[CM];CN.refType=AS;if(CP!==undefined){CN.modix=CP;}return CN;},getReferenceAxisOption:function(){var CM=this.view;if(CM.noData){return[];}var CL=false,AS=[],CN;if(this.isStacked&&!this.splitPlottingMetrics){CL=true;}CN=this.getNumericAxisOptions(false,CL,!CL);CN.forEach(function(CO){if(CO.key!=="AllMetrics"){AS.push(CO);}});return AS;},getReferenceLineOptions:function(){var CM=this.view;if(CM.noData){return[];}var AS=[],CL=this,CN;CN=this.getReferenceAxisOption();CN.forEach(function(CP){var CO;for(CO in AV){if(AV.hasOwnProperty(CO)){AS.push(CL.getRealReferenceOptionFromAxisOption(CP,AV[CO]));}}});return AS;},getEnabledReferenceLineOptions:function(CL){var CN=this.view;if(CN.noData||CL===undefined){return[];}var AS=CL.key.split(",")[0],CR=this[AW.REF_LINE_DEF],CM=CR[AS],CO=[],CQ,CS;var CP=function(CU){var CV={};CV.refType=parseInt(CS,10);CV.key=AS+","+A6[CS-1]+","+CU.modix;CV.opt=AS+" - "+BP[CS-1];if(CV.refType===AV.CONST){CV.c=parseFloat(CU[AW.REF_CONST_VALUE]);CV.lin=CU[AW.REF_LINE_NAME];}CV.modix=CU.modix;CV.existing=true;CO.push(CV);};for(CS in CM){if(CM.hasOwnProperty(CS)){var CT=parseInt(CS,10);CQ=CM[CT];Bx.forEach(CQ,CP);}}return CO;},getShowDataLabelOptions:function(){var CN=this.view;if(CN.noData){return[];}if(this.dlOptions){return this.dlOptions;}var CM=this,CO=this.getChartInfo(),AS,CL=[];if(CO.isPie){AS=this.getMetricsOnAngleBy();}else{if(CO.tp!==B1.GRID){AS=CJ.call(this);}else{AS=this.getSizeByMetrics();}}Bx.forEach(AS,function(CP){CL.push(Z.call(CM,[CP]));});if(CL.length>1){CL.unshift({opt:mstrmojo.desc(2460,"All Metrics"),mos:this.getMetricFormatFromIndexArray(AS),key:"AllMetrics"});}this.dlOptions=CL;return CL;},getAttributeSortPlusExistedMetricSort:function(CQ,CM){if(CQ.dropzones===undefined){CQ=this.attributeSelectionInfo[CQ.tid];}var AS=false,CO=this.view,CN=CO.getWidgetPropertyValue(AW.SORT_INDEX),CL=CO.getWidgetPropertyValue(AW.SORT_ORDER);var CP=this.getChartInfo();if(CP.isABL&&(CQ.dropzones.indexOf("XAxis")>=0||CQ.dropzones.indexOf("YAxis")>=0)){AS=true;if(CN){this.property.removeItem(AW.SORT_INDEX);this.property.removeItem(AW.SORT_ORDER);}}if(!CN){CN=null;}if(AS||!this.showMetricSortIcon){return this.getMetricSortDefinition(null,CL,CQ,CM);}return this.getMetricSortDefinition(CN,CL,CQ,CM);},getMetricSortDefinition:function(CW,CQ,Cd,CO){var Ca=[],Cn=this,CY=this.getChartInfo(),Cg=this.model,Co=Cg.getMetricCount(),Ch,CL=[],AS=[],Cb={},CN=null,CM=this.colHeaderCnt,Cm=this.rowHeaderCnt,CX,CP,Cp,Ck,Cj,Cl=["fi","headerID","headerText","id","idx","levelIndex","n","ui","tui"],Ce,CU,Ci=Cg.getUnitAttributesCountOnRow(),Cf=Cg.getUnitAttributesCountOnCol(),CT=false,CV,CS;var CR=false,Cc=false;if(CY.isABL&&this.sortingMetric){if(CY.dirc===B5.VERTICAL){CR=true;}else{Cc=true;}}if(Cd===undefined){Cd=null;}if(CO===undefined){CO=true;}for(Ch=0;Ch<Cf;++Ch){CN=W.call(this,Ch);if(CN){if(!CR||CN.dropzones.indexOf("XAxis")<0){if(Cd&&!Cd.isRowAttribute&&(Cd.tui===Ch)){AS.push({unit:CN,isAsc:CO});}else{Cb=CN;if(Cb.otp===12||Cb.otp===47){CU=q.call(this,BD.DssAxisColumns,CN);if(CT){AS.push({unit:CN,isAsc:CU!==A9});}else{if(CU!==x){AS.push({unit:CN,isAsc:CU!==A9});}}}}}}}for(Ch=0;Ch<Ci;Ch++){CN=a.call(this,Ch);if(CN){if(!Cc||CN.dropzones.indexOf("YAxis")<0){if(Cd&&Cd.isRowAttribute&&(Cd.tui===Ch)){CL.push({unit:CN,isAsc:CO});}else{Cb=CN;if(Cb.otp===12||Cb.otp===47){CU=q.call(this,BD.DssAxisRows,CN);if(CT){CL.push({unit:CN,isAsc:CU!==A9});}else{if(CU!==x){CL.push({unit:CN,isAsc:CU!==A9});}}}}}}}if(CY.isABL===false){return CL.concat(AS);}if(CW){CP=CW.row-this.gts.col.length;Cp=CW.col-this.gts.row.length;Ck=Cp%Co;Cj=Cg.getMetricProp(undefined);Ce=Ao.copy(Cj[Ck],{});Ce.gvsRI=CP;Ce.gvsCI=Cp;}var CZ=[];if(this.horizontalMode){Ca=Ca.concat(CL);if(CW){Ce.axis=B.DssAxisRows;if(Cn.specialSortable){Ce.axis=B.DssAxisColumns;}for(Ch=0;Ch<Cf;Ch++){CX=W.call(this,Ch);if(Cn.specialSortable&&CX.dropzones.indexOf("BreakBy")>=0){continue;}CV=Ao.copyProps(Cl,Cg.getColHeaderObj(Cp,Ch),{});CS=Cg.headerInfoToProp(1,CV,"n&id");Ao.copy(CS[0],CV);CZ.push(CV);}CZ.push(Ce);}Ca=Ca.concat(AS);if(CW){Ca.push({unit:Ce,isAsc:CQ,elements:CZ});}}else{Ca=Ca.concat(AS);Ca=Ca.concat(CL);if(CW){Ce.axis=B.DssAxisColumns;if(Cn.specialSortable){Ce.axis=B.DssAxisRows;}for(Ch=0;Ch<Ci;Ch++){CX=a.call(this,Ch);if(Cn.specialSortable&&CX.dropzones.indexOf("BreakBy")>=0){continue;}CV=Ao.copyProps(Cl,Cg.getRowHeaderObj(CP,Ch),{});CS=Cg.headerInfoToProp(0,CV,"n&id");Ao.copy(CS[0],CV);CZ.push(CV);}CZ.push(Ce);Ca.push({unit:Ce,isAsc:CQ,elements:CZ});}}return Ca;},getSortActions:function(Cj){var Ch=-1,CZ=-1,CY=[],CX,CV,Cf=false,CT=this.firstRes,Cg=CT.gsi,CL=Cg.sorts[0],CS=Cg.sorts[1],CP=false,Cl=false,Cd,Cb,Cc,CM,Ce,CO,CQ;if(CL){if(CL.length>0){CP=true;}}if(CS){if(CS.length>0){Cl=true;}}if(CP&&Cl){CY.push({actionId:27,axisName:B.DssAxisRows});CY.push({actionId:27,axisName:B.DssAxisColumns});}else{if(CP){CY.push({actionId:27,axisName:B.DssAxisRows});}else{if(Cl){CY.push({actionId:27,axisName:B.DssAxisColumns});}}}for(Cd=0;Cd<Cj.length;Cd++){var Ck=Cj[Cd],Ci=Ck.isAsc,AS=Ck.unit,CR,CN,CX=AS.otp;if(AS.otp===4){CX=4;CR=[];if(Ck.elements){for(Cb=0;Cb<Ck.elements.length;Cb++){CR.push(Ck.elements[Cb]);}}var CW=null;for(Cb=0;Cb<CR.length;Cb++){var CU=CR[Cb];if(CU.otp===4){CW=CU;CV=CW.oid;break;}}if(CW!==null){if(Ck.elements){Ce=AS.axis;if(Ce===B.DssAxisRows){CN=this.gts.col;}else{if(Ce===B.DssAxisColumns){CN=this.gts.row;}}}CM=CN.sorts;if(!CM){CM={sortCollection:[]};CN.sorts=CM;}Cc={sortType:4,subtotalsPosition:0};CM.sortCollection.push(Cc);Cc.isAsc=Ci;Cc.metricID=CV;Cc.elements=CR;Cc.objectID=CV;Cc.objectType=CX;}if(Ce===B.DssAxisRows&&Ch>0){Cc.subtotalsPosition=Ch;}else{if(Ce===B.DssAxisColumns&&CZ>0){Cc.subtotalsPosition=CZ;}}CY=CY.concat(AE.call(this,Cd,1,CX,CV,Ci,Ce,Cc.subtotalsPosition,CR,null));}else{if(CX===12||(CX===47&&(AS.ost===12033||AS.ost===12032))){var Ca=(CX===47&&AS.ost===12033);CO=AS;Ce=CO.isRowAttribute?B.DssAxisRows:B.DssAxisColumns;CQ=CO.fid;CV=CO.id;var Cm;if(Ce===B.DssAxisRows){Cm=this.gts.row;}else{if(Ce===B.DssAxisColumns){Cm=this.gts.col;}}CM=Cm.sorts;if(!CM){CM={sortCollection:[]};Cm.sorts=CM;}Cc={sortType:2,subtotalsPosition:0};CM.sortCollection.push(Cc);Cc.isAsc=Ci;Cc.attributeID=CV;Cc.formID=CQ;Cc.objectID=CV;Cc.objectType=CX;if(Ce===B.DssAxisRows&&Ch>0){Cc.subtotalsPosition=Ch;}else{if(Ce===B.DssAxisColumns&&CZ>0){Cc.subtotalsPosition=CZ;}}CY=CY.concat(AE.call(this,Cd,CX===47?(Ca?24:10):3,CX,CV,Ci,Ce,Cc.subtotalsPosition,null,CQ));}}}return B0(CY);},fakeSortActionsStackTotal:function(CR){if(CR&&CR.length){var AS,CN;for(AS=0;AS<CR.length;AS++){if(CR[AS]&&CR[AS].eIds){CN=CR[AS];break;}}var CQ=CN&&CN.eIds;if(CN&&CQ&&CQ.length){for(AS=0;AS<CQ.length;AS++){if(CQ[AS].otp===4){continue;}var CP=CQ[AS],CM,CL=CP.id[2];if(CL!==":"){CL=";";}CM=CP.id.split(CL)[1];if(CM){if(this.isAttrInZone(CM,"ColorBy")||this.isAttrInZone(CM,"BreakBy")){CP.headerText=CP.n="StackedTotal";var CO=CP.id.split(CL);CP.id="DB:"+CO[1]+":-1";}}}}}},getShapeFormatsObject:function(){var AS;AS=this[AW.FORMATS_ON_COMBINATION];if(!this.shapeFormatsRead){AS=this.view.getWidgetPropertyValue(AW.FORMATS_ON_COMBINATION);this[AW.FORMATS_ON_COMBINATION]=AS;this.shapeFormatsRead=true;}return AS;},setShapeFormatsWithCombination:function(CN,AS){var CL,CM;CL=this.getShapeFormatsObject();if(CL===undefined){CL=this[AW.FORMATS_ON_COMBINATION]={};}CM=l.serializeCombination(CN);if(Object.keys(AS).length<=0){delete CL[CM];}else{CL[CM]=AS;}this.view.setWidgetPropertyValue(AW.FORMATS_ON_COMBINATION,CL);},getShapeFormatsWithCombination:function(CM){if(CM===undefined||CM.length===0){return undefined;}var AS,CL;AS=this.getShapeFormatsObject();if(AS){CL=l.serializeCombination(CM);return AS[CL];}return undefined;},getDataLabelFontFormat:function(){var CM=this.property,AS=[BJ.DATA_LABELS_FONT_FAMILY,BJ.DATA_LABELS_FONT_SIZE,BJ.DATA_LABELS_FONT_STYLE,BJ.DATA_LABELS_FONT_COLOR],CL={};AS.forEach(function(CN){CL[CN]=CM.readItem(CN);});return CL;},getDefaultsForShape:function(CM){var CL=this.defaultsForShape;if(!CL){CL=this.defaultsForShape={};}if(CL[CM]){return CL[CM];}var CO=this.view,CN=CO.getDefaultProperties(),AS=CO.model.data.dz.visProp.fmt,CQ={},CP=[BJ.SHAPE_LINE_THICKNESS,BJ.SHAPE_LINE_COLOR,BJ.SHAPE_LINE_STYLE,BJ.SHAPE_FILL_COLOR,BJ.SHAPE_FILL_STYLE,BJ.SHAPE_FILL_TRANSPARENCY,BJ.SHAPE_FILL_EFFECT,BJ.SHAPE_FILL_COLOR_DEFAULT,BJ.SHAPE_BORDER_STYLE,BJ.SHAPE_BORDER_THICKNESS,BJ.LINE_MARKER_SHOW,BJ.LINE_MARKER_SHAPE,BJ.LINE_MARKER_SIZE,BJ.LINE_MARKER_COLOR_EQUAL,BJ.PIE_EXPLODE,BJ.DATA_LABELS_FONT_FAMILY,BJ.DATA_LABELS_FONT_SIZE,BJ.DATA_LABELS_FONT_STYLE,BJ.DATA_LABELS_FONT_COLOR];this.property.updateDefaults(CN,AS);Bx.forEach(CP,function(CR){CQ[CR]=CN[CR];});if(CM===Bz.PIE||CM===Bz.RING){CQ[BJ.SHAPE_FILL_TRANSPARENCY]=70;CQ[BJ.SHAPE_BORDER_THICKNESS]=1;}else{CQ[[BJ.SHAPE_FILL_TRANSPARENCY]]=70;}if(CM===Bz.BAR){CQ[BJ.SHAPE_BORDER_THICKNESS]=1;}CL[CM]=CQ;return CQ;},getVolatileDefaultsForShape:function(AS){var CL=this.volDefaultsForShape;if(!CL){CL=this.volDefaultsForShape={};}if(CL[AS]){return CL[AS];}var CM=this.getDefaultsForShape(AS);CL[AS]=Ao.copy(CM);return CL[AS];},refineShapeFormatsObject:function(){var CL=this[AW.FORMATS_ON_COMBINATION];var CR=["metricLevelProp","colorByLevelProp","concreteLevelProp"];this.levelPropCache={};var CP=this.getColorByAttrsID()||[];var CQ=this.getBreakByAttrsID()||[];CQ=CQ.filter(function(CS){return CP.indexOf(CS)===-1;});function CO(CT){var CU=CQ.some(function(CV){return CT.indexOf(CV)!==-1;});if(CU){return CR[2];}var CS=CP.some(function(CV){return CT.indexOf(CV)!==-1;});if(CS){return CR[1];}return CR[0];}for(var CN in CL){var CM=CO(CN);this.levelPropCache[CM]=true;}var AS=this.view.model.data.dz.ColorBy;if("MetricNames" in AS&&!AS.TemplateUnit){this.levelPropCache.colorByLevelProp=true;}},clearShapeFormatsCache:function(AS){switch(AS){default:}delete this.levelPropCache;delete this.sharePropCache;delete this.allPropFormatsRead;delete this.allPropFormatsCache;delete this.lineMarkerShowCache;delete this.metricLvlDLRead;delete this.metricLvlDLCache;delete this.shapeColorCache;delete this.shapeColorFormatsCache;delete this.shapeFormatsCache;},getDefaultsMergedWithAllPropsCachedObject:function(AS){if(!this.sharePropCache){var CM=this.getDefaultsForShape(this.chartInfo.shape);var CL=this.getAllPropsFormatsCachedObject(AS);this.sharePropCache=l.getResolvedFormatsObject([CM,CL]);this.sharePropCache.lnMkShw=this.getLineMarkerShowCachedObject(AS);}return this.sharePropCache;},getLineMarkerShowCachedObject:function(AS){this.lineMarkerShowCache=this.lineMarkerShowCache||AS.getPropertyValue(BJ.LINE_MARKER_SHOW);return this.lineMarkerShowCache;},getAllPropsFormatsCachedObject:function(AS){if(!this.allPropFormatsRead){this.allPropFormatsCache=AS.getPropertyValue(BJ.ALL_SHAPE_FORMAT);this.allPropFormatsRead=true;}return this.allPropFormatsCache;},getMetricDataLabelCachedObject:function(CO,CN){var CL=true;if(!this.metricLvlDLRead){this.metricLvlDLCache=CO.getPropertyValue(AW.METRIC_LEVEL_DATA_LABEL);this.metricLvlDLRead=true;}var CP=this.metricLvlDLCache;var AS=CL;if(CP===undefined){AS=CL;}else{var CM=CN.assMetricDLIDCache=CN.assMetricDLIDCache||CN.getAssMetricDataLabelID();if(CM!==undefined){AS=CP[CM];}else{AS=false;}}return AS;},getShapeFormatsCachedObject:function(AS){this.shapeFormatsCache=this.shapeFormatsCache||[];AS.idx="idx" in AS?AS.idx:this.shapeFormatsCache.length;return this.shapeFormatsCache[AS.idx];},setShapeFormatsCachedObject:function(CL,AS){this.shapeFormatsCache[CL.idx]=AS;},getComboLevelPropCachedObject:function(CL){var CO,CM,CN,AS=this.getShapeFormatsObject();if(!AS){return ;}if(!this.levelPropCache){this.refineShapeFormatsObject();}if(!CL.concreteCombStr&&this.levelPropCache.concreteLevelProp){CN=CL.getSelectedObjectLowestLevel(true);CL.concreteCombStr=(CN===undefined||CN.length===0)?"":l.serializeCombination(CN);}if(!CL.metricCombStr&&this.levelPropCache.metricLevelProp){CO=CL.getSelectedObjectMetricInfo();CL.metricCombStr=(CO===undefined||CO.length===0)?"":l.serializeCombination(CO);}if(!CL.colorByCombStr&&this.levelPropCache.colorByLevelProp){CM=CL.getSelectedObjectColorByInfo();CL.colorByCombStr=(CM===undefined||CM.length===0)?"":l.serializeCombination(CM);}return[AS[CL.concreteCombStr],AS[CL.metricCombStr],AS[CL.colorByCombStr]];},getShapeColorCachedObject:function(CL,AS){this.shapeColorCache=this.shapeColorCache||[];return this.shapeColorCache[AS.idx]=this.shapeColorCache[AS.idx]||CL.getColorByData();},getShapeColorFormatsCachedObject:function(CR,CO,CN,CT){var CL=CN,CS=mstrmojo.gm.ShapeFillType,CU=this.getMetricDataLabelCachedObject(CR,CO),CP=this.getShapeColorCachedObject(CR,CO),CQ=CP+(CU?"T":"F");this.shapeColorFormatsCache=this.shapeColorFormatsCache||{};if(CT){if(this.shapeColorFormatsCache[CQ]){return this.shapeColorFormatsCache[CQ];}else{CL=this.shapeColorFormatsCache[CQ]=Ao.copy(CN);}}CP=(CP!==undefined&&CP!==null)?CP:CL[BJ.SHAPE_FILL_COLOR];var AS=false;if(CP&&typeof CP==="object"){AS=true;}if(CP!==undefined){CL[BJ.SHAPE_LINE_COLOR]=CL[BJ.SHAPE_FILL_COLOR]=CP;var CV=CR.getPropertyValue(BJ.LINE_MARKER_COLOR);if(CV===undefined){CL[BJ.LINE_MARKER_COLOR]=AS?CP.c1:CP;}else{CL[BJ.LINE_MARKER_COLOR]=CV;}if(CL[BJ.LINE_MARKER_BORDER_COLOR]===undefined){CL[BJ.LINE_MARKER_BORDER_COLOR]=AS?CP.c1:(CV!==undefined?CV:CP);}if(CL[BJ.SHAPE_BORDER_COLOR]===undefined){CL[BJ.SHAPE_BORDER_COLOR]=AS?CP.c1:CP;}}CL[BJ.SHAPE_FILL_STYLE]=AS?CS.Gradient:CS.Solid;if(AS&&this.chartInfo.isABL){var CM=CR.getShape();if(CM===Ai.LINE||CM===Ai.TICK){CL[BJ.SHAPE_FILL_STYLE]=CS.Solid;CL[BJ.SHAPE_LINE_COLOR]=CL[BJ.SHAPE_FILL_COLOR]=CP.c1;}}CL[BJ.DATA_LABELS_SHOW]=CU;return CL;},forceUpdateAxis:function(){var AS=this.view;if(AS){return AS.forceUpdateAxis;}return false;},forceUpdateCharts:function(){var AS=this.view;if(AS){return AS.forceUpdateCharts;}return false;},clearLogScaleCahce:function(){delete this.logScaleCache;},resetDataLabelType:function(){var AS=this.chartInfo;if(AS){AS.dlTp=this.property.readItem(AW.DATA_LABEL);}},resetDataLabelPlacement:function(){var AS=this.chartInfo;if(AS){AS.dlPlmt=this.property.readItem(AW.DATA_LABELS_PLACEMENT);}},clearDataLabelFormatCache:function(){var AS=this.ChartFactory;if(AS&&AS.mUniversalProperty){delete AS.mUniversalProperty.DatatextFormat;}},resetDefaultShapeProp:function(){delete this.defaultsForShape;delete this.volDefaultsForShape;},formatAsAxisLabel:function(CM,CL){if(!CM||CM.length<=0){return undefined;}var AS;if(this.chartSubType===BL.PERCENT){AS=C.formatByMask("#%",CL);}else{AS=this.formatValue(CM,CL);}return AS;},formatValue:function(CV,CT){var CO,CU,CS,CP,CR,CN,CL=this.inChartLayout,CQ=CL.r,CM=CL.c,AS=this.mericsAxisMapCache;CU=this.getMetricIndexFromID(CV[0]);if(!AS){AS=this.mericsAxisMapCache={};}if(AS[CU]!==undefined){return this.formatMetricsValueUniformly(CV,CT,AS[CU]);}for(CO=0;CO<CQ;CO++){CP=Ah(this.getMetricsOnAxisOfChart(CO,0,"y",true));if(CP.indexOf(CU)>=0){AS[CU]={row:CO,col:0,axisName:"y",isPrimary:true};return this.formatMetricsValueUniformly(CV,CT,AS[CU]);}CN=Ah(this.getMetricsOnAxisOfChart(CO,0,"y",false));if(CN.indexOf(CU)>=0){AS[CU]={row:CO,col:0,axisName:"y",isPrimary:false};return this.formatMetricsValueUniformly(CV,CT,AS[CU]);}}for(CO=0;CO<CM;CO++){CS=Ah(this.getMetricsOnAxisOfChart(0,CO,"x",true));if(CS.indexOf(CU)>=0){AS[CU]={row:0,col:CO,axisName:"x",isPrimary:true};return this.formatMetricsValueUniformly(CV,CT,AS[CU]);}CR=Ah(this.getMetricsOnAxisOfChart(0,CO,"x",false));if(CR.indexOf(CU)>=0){AS[CU]={row:0,col:CO,axisName:"x",isPrimary:false};return this.formatMetricsValueUniformly(CV,CT,AS[CU]);}}return AC.call(this,CT,CU);},getMetricInfo:function(CO){this.metricInfos=this.metricInfos||{};var CQ=this.metricInfos;if(!!CQ[CO]){return CQ[CO];}var AS=this.gts,CM=AS.col,CP=CM.length;if(CP&&CM[CP-1].otp===-1){var CN=CM[CP-1].es;CN.forEach(function(CR){if(CR.oid===CO){CQ[CO]=Ao.copy(CR,{});}});var CL=this.firstRes.gnf;CL.forEach(function(CR){if(CR.id===CO){CQ[CO].nf=Ao.copy(CR,{});}});}},formatMetricsValueUniformly:function(Cd,CX,AS){var CT,CQ,CP=AS.row,CO=AS.col,CN=AS.axisName,CY=AS.isPrimary,CM=this.condenseEchos,CU=this.mapFromChartToLDSIndex(CP,CO),CV=CN==="x"?CP:CU.r,CS=CN==="x"?CU.c:CO,CL=CU.dpIdx,CR=this.model.getLocalDataSet(CV,CS),Cf=CR.generateDataProvider(),CW=Cf[CL],CZ=CN.toUpperCase()+(CY?"AxisChart":"2AxisChart");if(CW[CZ]){return CW[CZ].formatAsUniformAxisLabel(CX);}CQ=CN==="x"?CO:CP;CZ=CN.toUpperCase();if(CY){CZ=CZ+"1";}else{CZ=CZ+"2";}CM=CM&&CM[CZ];CT=CM&&CM[CQ];if(CT){return k.abbreviateNumber(CX,5);}else{CZ=CZ.toLowerCase();if(CY){CZ=CZ[0];}CZ=CZ+"Condense";if(this[CZ]){return k.abbreviateNumber(CX,5);}}var Ce=this,Cc=[],Cb="General";Cd.forEach(function(Ch){var Cg=Ce.getMetricInfo(Ch);if(Cg&&Cg.nf){Cc.push(Cg.nf);}});if(Cc.length){var Ca=1;Cb=Cc[0].nfs;for(;Ca<Cc.length;Ca++){if(Cc[Ca].nfs!=Cb){Cb="General";break;}}}return C.formatByMask(Cb,CX);},hasAttributesInDropzone:function(CL){var AS=this.dz[CL].TemplateUnit;return(AS&&AS.length>0);},getAttributeIds:function(){if(!this.attributeIds){var CM=this.gts.row,AS=this.gts.col,CL={};Bx.forEach(CM,function(CN){if(CN.otp!==-1&&CN.otp!==4){CL[CN.id]=CN.es;}});Bx.forEach(AS,function(CN){if(CN.otp!==-1&&CN.otp!==4){CL[CN.id]=CN.es;}});this.attributeIds=CL;}return this.attributeIds;},getDataProvider:function(AS,CL){return U.call(this,AS,CL);},isOneDotCase:function(){var AS=this.model,CM,CL,CN;CM=AS.getLocalDataSet(0,0);if(this.chartDirection===BV.EnumABLDirection.VERTICAL){CN=AS.getMetricCount();if(CN===0){CL=CM.wd;}else{CL=CM.wd/CN;}}else{CL=CM.items.length;}return CL<2;},isCompactMode:function(){return this.view.getWidgetPropertyValue(AW.FIT_TO)===AO.COMPACT;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.chart.enums.EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMLegend","GMController","GMProperty","GMAxisScale","GMPropertyNode","GMPropDefaults");var j=mstrmojo,An=j.gm,Ao=j.func.wrapMethods,Q=j.array,Y=j.hash,J=An.GMProperty,Ar=An.GMUtility,F=j.VisUtility,T=An.EnumShape,Al=An.EnumSubtype,r=An.EnumGridLines,n=An.EnumTheme,q=An.EnumLegendSlot,AJ=An.EnumTrendRefModelLabels,t=An.EnumRefLineModelType,K=An.EnumSelectionOptionLevel,Z=An.GMPropDefaults,H=An.EnumGraphType,p=An.EnumColorByType,Aq=j.chart.enums.EnumLineStyle,Ab=An.EnumCombinedLineStyle,Ak=An.EnumShapeFormatStatus,o=An.FormatingPropertyTag,AQ=An.WidgetPropertyTag,L=An.GMAxisScale,s=An.EnumAxisScale,AW=An.EnumIdentityType,B=j.VisEnum.ControlType,AY=An.GMPropertyNode,AH=j.VisEnum.VIS_CARDLIMIT.NON_GRID,AT={n:"Metric Names",did:"00000000000000000000000000000000",t:0,cs:1};var AS="_tmsp",g="_default",S="allVal",AP="rfLnFnt",Ad=true;var AF={lgdBgFillClr:"lgdBgFillStyle",shpFillClr:"shpFillStyle",bgFillClr:"bgFillStyle",rwHdrFillClr:"rwHdrFillStyle",colHdrFillClr:"colHdrFillStyle"};var z=[{pos:q.LEFT_TOP},{pos:q.LEFT_MIDDLE},{pos:q.LEFT_BOTTOM},{pos:q.RIGHT_TOP},{pos:q.RIGHT_MIDDLE},{pos:q.RIGHT_BOTTOM}];var x=[o.MAJOR_GRID_LINES_COLOR,o.MAJOR_GRID_LINES_THICKNESS,o.MAJOR_GRID_LINES_STYLE,o.MINER_GRID_LINES_COLOR,o.MINER_GRID_LINES_THICKNESS,o.MINER_GRID_LINES_STYLE];var D=[AQ.AXIS_SCALE,AQ.AXIS_SCALE_DATA,AQ.SUB_TYPE,AQ.OUTSIDE_BORDER,AQ.SELECTION_TYPE,AQ.SELECTIONS,AQ.AXIS_SCALE_MANUAL_MIN,AQ.AXIS_SCALE_MANUAL_MAX,AQ.SINGLE_AXIS_SCALE_TYPE,AQ.TREND_LINE_DEF,AQ.REF_LINE_DEF,o.OUTSIDE_BORDER_SHOW,o.OUTSIDE_BORDER_COLOR,o.OUTSIDE_BORDER_STYLE,o.OUTSIDE_BORDER_THICKNESS,o.COLOR_SQUARE_COLOR];var b=[o.MAJOR_GRID_LINES_SHOW,o.MAJOR_GRID_LINES_COLOR,o.MAJOR_GRID_LINES_THICKNESS,o.MAJOR_GRID_LINES_STYLE,o.MINOR_GRID_LINES_SHOW,o.MINER_GRID_LINES_COLOR,o.MINER_GRID_LINES_THICKNESS,o.MINER_GRID_LINES_STYLE,o.X_AXIS_LINE_SHOW,o.X_AXIS_LINE_COLOR,o.X_AXIS_LINE_STYLE,o.X_AXIS_LINE_THICKNESS,o.X_AXIS_TITLE_SHOW,o.X_AXIS_TITLE_CONTENT,o.X_AXIS_TITLE_FONT_COLOR,o.X_AXIS_TITLE_FONT_FAMILY,o.X_AXIS_TITLE_FONT_STYLE,o.X_AXIS_TITLE_FONT_SIZE,o.X_AXIS_LABELS_FONT_COLOR,o.X_AXIS_LABELS_FONT_SIZE,o.X_AXIS_LABELS_FONT_FAMILY,o.X_AXIS_LABELS_FONT_STYLE,o.X_AXIS_LABELS_ROTATION,o.X_AXIS_LABELS_SHOW,o.Y_AXIS_LINE_SHOW,o.Y_AXIS_LINE_COLOR,o.Y_AXIS_LINE_STYLE,o.Y_AXIS_LINE_THICKNESS,o.Y_AXIS_TITLE_SHOW,o.Y_AXIS_TITLE_CONTENT,o.Y_AXIS_TITLE_FONT_SIZE,o.Y_AXIS_TITLE_FONT_COLOR,o.Y_AXIS_TITLE_FONT_FAMILY,o.Y_AXIS_TITLE_FONT_STYLE,o.Y_AXIS_LABELS_FONT_SIZE,o.Y_AXIS_LABELS_FONT_COLOR,o.Y_AXIS_LABELS_FONT_FAMILY,o.Y_AXIS_LABELS_FONT_STYLE,o.Y_AXIS_LABELS_ROTATION,o.Y_AXIS_LABELS_SHOW,o.MAJOR_GRID_LINES_SHOW,o.MAJOR_GRID_LINES_COLOR,o.MAJOR_GRID_LINES_THICKNESS,o.MAJOR_GRID_LINES_STYLE,o.MINOR_GRID_LINES_SHOW,o.MINER_GRID_LINES_COLOR,o.MINER_GRID_LINES_THICKNESS,o.MINER_GRID_LINES_STYLE,o.X_AXIS_ORIGIN_LINE_SHOW,o.X_AXIS_ORIGIN_LINE_COLOR,o.X_AXIS_ORIGIN_LINE_STYLE,o.X_AXIS_ORIGIN_LINE_THICKNESS,o.Y_AXIS_ORIGIN_LINE_SHOW,o.Y_AXIS_ORIGIN_LINE_COLOR,o.Y_AXIS_ORIGIN_LINE_STYLE,o.Y_AXIS_ORIGIN_LINE_THICKNESS];var W=[AQ.METRIC_SHAPES,AQ.LOG_SCALE,AQ.TREND_LINE_DEF,AQ.TREND_BUBBLE_FORE_DEF,AQ.REF_LINE_DEF,AQ.AXIS_ORIGIN,AQ.FORMATS_ON_COMBINATION,o.ALL_SHAPE_FORMAT,AQ.METRIC_LEVEL_DATA_LABEL];var l={UNKNOW:-1,UPDATE_CHARTS:1,CHART_SCALE:2,SPLITTER_LINE_SCALE:3,UPDATE_ALL:4};var h=[o.ROW_TEXT_SHOW,o.ROW_HEADER_SHOW,o.ROW_VALUES_SHOW,o.COLUMN_TEXT_SHOW,o.COLUMN_HEADER_SHOW,o.COLUMN_VALUES_SHOW,o.ALL_ROW_COLUMN_SHOW,o.ROW_TEXT_TEXT_FONT_FAMILY,o.ROW_TEXT_TEXT_FONT_SIZE,o.ROW_TEXT_TEXT_FONT_STYLE,o.ROW_HEADER_TEXT_FONT_FAMILY,o.ROW_HEADER_TEXT_FONT_SIZE,o.ROW_HEADER_TEXT_FONT_STYLE,o.ROW_VAVLUE_TEXT_FONT_FAMILY,o.ROW_VAVLUE_TEXT_FONT_SIZE,o.ROW_VAVLUE_TEXT_FONT_STYLE,o.COLUMN_TEXT_TEXT_FONT_FAMILY,o.COLUMN_TEXT_TEXT_FONT_SIZE,o.COLUMN_TEXT_TEXT_FONT_STYLE,o.COLUMN_HEADER_TEXT_FONT_FAMILY,o.COLUMN_HEADER_TEXT_FONT_SIZE,o.COLUMN_HEADER_TEXT_FONT_STYLE,o.COLUMN_VAVLUE_TEXT_FONT_FAMILY,o.COLUMN_VAVLUE_TEXT_FONT_SIZE,o.COLUMN_VAVLUE_TEXT_FONT_STYLE,o.ALL_ROW_COLUMN_TEXT_FONT_FAMILY,o.ALL_ROW_COLUMN_TEXT_FONT_SIZE,o.ALL_ROW_COLUMN_TEXT_FONT_STYLE,o.V_MATRIX_LINES_SHOW,o.H_MATRIX_LINES_SHOW,o.ALL_MATRIX_LINES_SHOW,o.V_MATRIX_LINES_COMBINED_STYLE,o.H_MATRIX_LINES_COMBINED_STYLE,o.ALL_MATRIX_LINES_COMBINED_STYLE,o.X_AXIS_LINE_SHOW,o.X_AXIS_LINE_COMBINED_STYLE,o.Y_AXIS_LINE_SHOW,o.Y_AXIS_LINE_COMBINED_STYLE,o.ALL_AXIS_LINE_SHOW,o.ALL_AXIS_LINE_COMBINED_STYLE,o.ALL_LINE_SHOW,o.ALL_LINE_COMBINED_STYLE,o.X_AXIS_TITLE_SHOW,o.Y_AXIS_TITLE_SHOW,o.ALL_AXIS_TITLE_SHOW,o.X_AXIS_TITLE_CONTENT,o.Y_AXIS_TITLE_CONTENT,o.ALL_AXIS_TITLE_CONTENT,o.X_AXIS_LABELS_SHOW,o.Y_AXIS_LABELS_SHOW,o.ALL_AXIS_LABELS_SHOW,o.X_AXIS_LABELS_ROTATION,o.Y_AXIS_LABELS_ROTATION,o.ALL_AXIS_LABELS_ROTATION,o.X_AXIS_TITLE_FONT_FAMILY,o.X_AXIS_TITLE_FONT_STYLE,o.X_AXIS_TITLE_FONT_SIZE,o.Y_AXIS_TITLE_FONT_FAMILY,o.Y_AXIS_TITLE_FONT_STYLE,o.Y_AXIS_TITLE_FONT_SIZE,o.ALL_AXIS_TITLE_FONT_FAMILY,o.ALL_AXIS_TITLE_FONT_STYLE,o.ALL_AXIS_TITLE_FONT_SIZE,o.X_AXIS_LABELS_FONT_SIZE,o.X_AXIS_LABELS_FONT_FAMILY,o.X_AXIS_LABELS_FONT_STYLE,o.Y_AXIS_LABELS_FONT_SIZE,o.Y_AXIS_LABELS_FONT_FAMILY,o.Y_AXIS_LABELS_FONT_STYLE,o.ALL_AXIS_LABELS_FONT_SIZE,o.ALL_AXIS_LABELS_FONT_FAMILY,o.ALL_AXIS_LABELS_FONT_STYLE,o.ALL_TEXT_FONT_SIZE,o.ALL_TEXT_FONT_FAMILY,o.ALL_TEXT_FONT_STYLE,AQ.AXIS_SCALE_DATA,AQ.FIT_TO];var N=[o.X_AXIS_ORIGIN_LINE_SHOW,o.X_AXIS_ORIGIN_LINE_COMBINED_STYLE,o.Y_AXIS_ORIGIN_LINE_SHOW,o.Y_AXIS_ORIGIN_LINE_COMBINED_STYLE,o.ALL_AXIS_ORIGIN_LINE_SHOW,o.ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE,AQ.TREND_LINE_DEF,AQ.REF_LINE_DEF,o.MODIFIED_DEF_FILL_COLOR,o.SHAPE_FILL_TRANSPARENCY,o.SHAPE_LINE_COMBINED_STYLE,o.SHAPE_BORDER_COLOR,o.SHAPE_BORDER_COMBINED_STYLE,o.LINE_MARKER_SHOW,o.LINE_MARKER_COLOR,o.REF_LABELS_FONT_FAMILY,o.REF_LABELS_FONT_STYLE,o.REF_LABELS_FONT_SIZE];var I=[AQ.SCALE_CHART_WIDTH,AQ.SCALE_CHART_HEIGHT];var C=[AQ.SCALE_ROW_HEADERS,AQ.SCALE_COL_HEADERS,AQ.SCALE_Y,AQ.SCALE_Y2,AQ.SCALE_X,AQ.SCALE_X2,AQ.SCALE_V_EXTRA_LINE];var Ac=[o.ALL_TEXT_FONT_COLOR,o.ALL_TEXT_FONT_STYLE,o.ALL_AXIS_LABELS_FONT_COLOR,o.ALL_AXIS_LABELS_FONT_STYLE];var AZ=[AQ.BANDING,AQ.AXIS_SCALE_DATA,AQ.AXIS_ORIGIN,AQ.MAX_SIZE_TYPE,AQ.MAX_SIZE_VALUE,AQ.MIN_SIZE_TYPE,AQ.MIN_SIZE_VALUE];var Ap=[o.SHAPE_LINE_COMBINED_STYLE,o.SHAPE_BORDER_COMBINED_STYLE,o.SHAPE_FILL_TRANSPARENCY];function AG(At){var As=typeof At;if(As==="object"||As==="array"){return new AY({jsonObj:At,parent:undefined});}return At;}function AM(As){var Au=1,At;if(As===Ab.NONE){At=Aq.LS_NONE;Au=0;}else{if(As===Ab.DASHED){At=Aq.LS_DASH;}else{if(As===Ab.DOTTED){At=Aq.LS_DOT;}else{At=Aq.LS_SOLID;if(As===Ab.THICK){Au=2;}}}}return{ceLnStyle:At,thk:Au};}function AE(){var As={},At=this.getShowDataLabelOptions();At.forEach(function(Au){As[Au.key]=Ad;});return As;}function M(As){var Av=this.getShowDataLabelOptions(),Au=true,At;Av.forEach(function(Aw){At=Aw.key;if(At!=="AllMetrics"){if(As[At]===undefined){As[At]=false;}if(As[At]===false){Au=false;}}});As.AllMetrics=Au;}function X(As){if(typeof As==="boolean"){return As===true?1:0;}return As;}function Ae(Au,At){var As=AG({});As.setProperty(Au,At,true);return As.jsonObj;}function AX(Ax){var Au={},Az,As=Ax.existing,At,Ay={},A0={rfLnFntClr:true,rfLnFntFml:true,rfLnFntStyle:true,rfLnFntSz:true,trdRefLnClr:true,trdRefLnStyle:true,trdRefLnThk:true},Aw={metricId:"metricId",trdTp:"lineType",trdLvl:"lineLevel",trdSeason:"seasonality",trdIncBB:"includeBreakby",trdEnabled:"enabled",dropzoneId:"dropzoneId",refTp:"lineType",refLvl:"lineLevel",refLbTp:"lineLabel",trdDgr:"lineConstant",refCstVl:"lineConstant",refEnabled:"enabled",modix:"lineIndex",trdFstEnabled:"enabled",trdBbForeEnabled:"enabled",trdBwdFst:"min",trdFwdFst:"max",trdBbForeBwd:"min",trdBbForeFwd:"max",subAxis:"subAxis",refLnName:"refLnName"};if(Ax.trdRefLnCmbStyle!==undefined){var Av=AM(Ax.trdRefLnCmbStyle);Ax.trdRefLnStyle=Av.ceLnStyle;Ax.trdRefLnThk=Av.thk;}for(Az in Ax){if(Ax.hasOwnProperty(Az)){if(A0[Az]===true){if(Az.indexOf(AP)>=0&&As){Ay[Az]=Ae(Az,Ax[Az]);}else{Ay[Az]=X(Ax[Az]);}}else{At=Aw[Az];if(At!==undefined){Au[At]=X(Ax[Az]);}}}}Au.format=Ar.replaceSpecialChars(JSON.stringify(Ay));return Au;}function AV(At,A0,Az){var A6=this.GMController,Av=A0.key.split(",")[0],A8=this.model.data,Ax,A3,A7=At.jsonObj,A2=["existing","trdBwdFst","trdDgr","trdEnabled","trdFwdFst","trdIncBB","trdLvl","trdTp","refLvl","refTp","refEnabled","refCstVl"],A5,A1=false,A4,Aw,Au,As;if(A7.modix===undefined){return true;}A5=A7.modix-1;if(Av.indexOf("Axis")>=0){A3=A8.dz[Av[0]+"Axis"].mdls;}else{Ax=A6.getMetricIndexFromID(Av);A3=A8.gsi.mx[Ax].mdls;}A4=A3.mod_c[A5];Aw=A4.fms;if(Aw===""||Aw===undefined){As={};}else{Au=Ar.restoreSpecialChars(Aw);As=JSON.parse(Au);}if(A7.trdRefLnCmbStyle!==undefined){var Ay=AM(A7.trdRefLnCmbStyle);A7.trdRefLnStyle=Ay.ceLnStyle;A7.trdRefLnThk=Ay.thk;As.trdRefLnStyle=A7.trdRefLnStyle;As.trdRefLnThk=Ay.thk;}Q.forEach(At.modifiedPropertyKeys,function(A9){if(A2.indexOf(A9)!==-1){A1=true;}var BA=A7[A9];if(As[A9]!==undefined){if(A9.indexOf(AP)>=0){As[A9]=Ae(A9,BA);}else{As[A9]=X(BA);}}if(A9===AQ.REF_LINE_NAME){A4.lin=BA;}});A4.fms=Ar.replaceSpecialChars(JSON.stringify(As));if(!Az){A4.la=A7.refLbTp;}return A1;}function AK(Aw){var Ay=this.GMController[AQ.REF_LINE_DEF],At=Aw.key.split(","),As=At[0],A0=At[1],Au=Ay[As]||{},Az=t[A0],Ax=Au[Az],Av;Q.forEach(Ax,function(A1){if(A1.modix===Aw.modix){Av=A1;return false;}});return Av;}function AN(At,Aw,Ax){var Ay=Aw.modifiedPropertyKeys,Az=Aw.jsonObj,As=Ay.length,Av,Au;for(Av=0;Av<As;Av++){Au=Ay[Av];if(Az[Au]==="default"){delete At[Au];delete At[Au+AS];continue;}At[Au]=Az[Au];if(Ax!==true){At[Au+AS]=Az[Au+AS];}}return At;}function k(Au){var At,Av,As=[AQ.TREND_SEASONALITY,AQ.TREND_FORECAST_ENABLED,AQ.TREND_BWD_FORECAST,AQ.TREND_FWD_FORECAST];for(At=0,Av=Au.length;At<Av;At++){if(As.indexOf(Au[At])>=0){return true;}}return false;}function AD(){var At=this.getDefaultProperties(),As=this;x.forEach(function(Au){As.setWidgetPropertyValue(Au,At[Au]);});}function f(At){var As=this;At.forEach(function(Au){if(x.indexOf(Au)>=0){As.setWidgetPropertyValue(o.GRID_LINE_AUTO,false);}});}function Af(Au){var As=typeof Au,At;if(As==="number"||As==="string"){At=mstrmojo.gm.ShapeFillType.Solid;}else{At=mstrmojo.gm.ShapeFillType.Gradient;}return At;}function U(At,As){if(typeof As==="object"&&At.indexOf(AP)>=0){return As[At];}return As;}function AO(At,Av,Au,As){if(!As&&At.indexOf(AP)>=0){Av=Ae(At,Av);}if(Au===undefined){var Ax=AF[At];if(Ax){this.setWidgetPropertyValue(Ax,Af(Av));}this.setWidgetPropertyValue(At,(Av&&Av.jsonObj)||Av);}else{var Aw=this.getWidgetPropertyValue(At);if(Aw===undefined){Aw={};}Aw[Au.key]=(Av&&Av.jsonObj)||Av;this.setWidgetPropertyValue(At,Aw);}}function V(Aw,At,As){var Ay,Ax,A0=this,A2,Av,Au,Az,A3=false,A1=this.GMController,A4;if(Aw===AQ.METRIC_SHAPES){A2=At.modifiedPropertyKeys[0];Ax={key:A2};Ay=this.readGlobalProperty(AQ.TREND_LINE_DEF,Ax);if(Ay.jsonObj[AQ.TREND_ENABLED]){Av=A1.getMetricIndexFromID(A2);Au=Ar.isTrendLineAvailableForMetric(this,Av);Az=Ar.isTrendLineAvailableForMetric(this,Av,At.jsonObj[A2]);if(Au!==Az){A3=true;}}}else{if(Aw===AQ.SHAPE){if(As.isABL&&As.dirc===An.EnumABLDirection.HORIZONTAL){A4=A1.getMetricsOnXAxis();}else{if(As.isBubbleOrScatter||(As.isABL&&As.dirc===An.EnumABLDirection.VERTICAL)){A4=A1.getMetricsOnYAxis();}}Q.forEach(A4,function(A5){A2=A1.model.getMetricIDsFromIndex([A5])[0];Ax={key:A2};Ay=A0.readGlobalProperty(AQ.TREND_LINE_DEF,Ax);if(Ay.jsonObj[AQ.TREND_ENABLED]){Au=Ar.isTrendLineAvailableForMetric(A0,A5);Az=Ar.isTrendLineAvailableForMetric(A0,A5,At);if(Au!==Az){A3=true;return false;}}});}}return A3;}function Ag(At,Av,Ax){if(this.skipSuppressDataCheck){return false;}if(D.indexOf(At)>=0){return true;}if(V.call(this,At,Av,Ax)){return true;}if(At===AQ.SHAPE){var As=this.readGlobalProperty(At),Au=this.GMController,Aw;if(Au.getUnitsCountInSliceBy()>0&&(T.PIE===As||T.RING===As)){return true;}Aw=this.readGlobalProperty(AQ.SUB_TYPE);if((T.AREA===As||T.AREA===Av)&&Aw===Al.AUTO){return true;}}return false;}function AL(Ay,Aw){var Ax=this.GMController,Az=this.getChartInfo();Aw.puFiltersConfig={};if(Ax.showMetricSortIcon){var Av=this.getWidgetPropertyValue(AQ.SORT_INDEX),At=this.getWidgetPropertyValue(AQ.SORT_ORDER),Au=(Ay===Al.STACKED||Ay===Al.PERCENT||(Ay===Al.AUTO&&Az.tp===H.AREA)),As=Ax.getUpdateMetricSortAction(Av,At,Au);Aw.actions.push(As);}}function Aj(At,As){At=parseInt(At,10);if(As===Aq.LS_NONE||At===0){return Ab.NONE;}if(As===Aq.LS_DASH){return Ab.DASHED;}if(As===Aq.LS_DOT){return Ab.DOTTED;}if(As===Aq.LS_SOLID){if(At===1){return Ab.THIN;}return Ab.THICK;}}function Ah(Au,At){var As={};if(At){Q.forEach(Au,function(Av){if(Av===AQ.TREND_REF_LINE_COMBINED_STYLE){As[AQ.TREND_REF_LINE_THICKNESS]=At[AQ.TREND_REF_LINE_THICKNESS];As[AQ.TREND_REF_LINE_STYLE]=At[AQ.TREND_REF_LINE_STYLE];As[AQ.TREND_REF_LINE_COMBINED_STYLE]=Aj(At[AQ.TREND_REF_LINE_THICKNESS],At[AQ.TREND_REF_LINE_STYLE]);}else{As[Av]=At[Av];}});}return As;}function y(Av,A1,Ax){var BC,Ay,A0,BB,BA=this.GMController,Az=this.model.data.dz.visProp.fmt.allShpFmt,A2,Au=BA.getDefaultsForShape(BA.getChartInfo().shape),Aw=[];if(Av===K.ALL_SHAPE){Aw.push(Au);Ay=o.ALL_SHAPE_FORMAT;A0=this.getWidgetPropertyValue(Ay);Aw.push(A0);}else{if(Av===K.COLOR_BY){Q.forEach(Ax,function(BD){Aw.push(Au);A2=BA.getShapeFormatsWithCombination(BD);if(A2){Aw.push(A2);}else{Aw.push(Ar.stringToJSON(Az));}});}else{if(Av===K.METRIC){Q.forEach(Ax,function(BD){Aw.push(Au);Aw.push(BA.getShapeFormatsWithCombination(BD));});}else{if(Av===K.ITSELF){Q.forEach(A1,function(BD){if(BD.isPie){Aw.push(BD.sPieDP.getFormattingProperties(BD.sliceIdx));}else{BB=BD.getGraphCell();Aw.push(BB.getFormattingProperties());}});}}}}BC=Ar.getResolvedFormatsObject(Aw);var A3=BC.shpFillClr,A9;if(BC===Au){A9=BA.getVolatileDefaultsForShape(BA.getChartInfo().shape);}else{A9=BC;}if(A3!==undefined){A9[o.SHAPE_LINE_COLOR]=A9[o.SHAPE_FILL_COLOR]=A3;}var A6=false,A5=false,As=false,A7,A4;var At=[],A8;Q.forEach(Aw,function(BD){if(BD!==undefined){At.push(BD);}});A8=At.length;for(A7=1;A7<A8;A7++){A4=At[A7];if(A4[o.LINE_MARKER_COLOR]!==undefined){As=true;}if(A4[o.LINE_MARKER_BORDER_COLOR]!==undefined){A5=true;}if(A4[o.SHAPE_BORDER_COLOR]!==undefined){A6=true;}}if(!As){delete A9[o.LINE_MARKER_COLOR];}if(!A5){delete A9[o.LINE_MARKER_BORDER_COLOR];}if(!A6){delete A9[o.SHAPE_BORDER_COLOR];}return A9;}function AB(As){[o.SHAPE_LINE_COMBINED_STYLE,o.SHAPE_BORDER_COMBINED_STYLE].forEach(function(At){var Aw=At.replace("CmbStyle","Thk"),Av=At.replace("CmbStyle","Style"),Au=As[Aw],Ax=As[Av];if(Au!==undefined&&Ax!==undefined){As[At]=Aj(Au,Ax);}});}function w(At,As){if(!At){return ;}Q.forEach(Ap,function(Au){if(At[Au]!==undefined){if(As[Au]===undefined){As[Au]=[];}As[Au].push({val:At[Au],tmsp:At[Au+AS]});}});}function AU(Ay,Au){var At,As,Ax,Aw,Av;Q.forEach(Ap,function(Az){At=Ay[Az];As=Au[Az+AS];Ax=false;Av=false;Aw=undefined;Q.forEach(At,function(A0){if(As!==undefined&&A0.tmsp!==undefined&&A0.tmsp>As){Ax=true;}if(Aw===undefined){Aw=A0.val;}else{if(Aw!==A0.val){Av=true;}}});if(As===undefined||Ax){if(Av){Au[Az]=undefined;}else{if(Aw!==undefined){Au[Az]=Aw;}}}});}function u(As,Au){var At;Q.forEach(Au,function(Av){At=false;Q.forEach(As,function(Aw){if(Aw.tp===4&&Aw.eid===Av.eid){At=true;return false;}});if(!At){return false;}});return true;}function AA(Aw,At,As){var Au=[],Av=Ar.reverseMapping(At);Q.forEach(Aw,function(Ax){if(Ax.tid===-1){if(As){Au.push(Ax);}}else{if(Av[Ax.tid]!==undefined){Au.push(Ax);}}});return Au;}function R(Au,At,As){var Aw={},Av=[];Au.forEach(function(Ay){var Ax=AA(Ay,At,As),Az=Ar.serializeCombination(Ax);if(Aw[Az]===undefined){Aw[Az]=true;Av.push(Ax);}});return Av;}function G(){var As=this.model.data||{},At=F.getPropertyByPath(As,"gts.row",[]),Av=F.getPropertyByPath(As,"gts.col",[]),Au=At.concat(Av);return Au;}function AI(As){if(!As||As.length<=0){return undefined;}var At,Au=true,Av=As.length;if(Av===1){return As[0];}for(At=1;At<Av;At++){if(As[At]!==As[At-1]){Au=false;break;}}if(Au){return As[0];}return undefined;}function P(Aw,At,Av,Au){var Ay,Ax,As={};["jsonObj","modifiedPropertyKeys","opt"].forEach(function(Az){if(Aw.hasOwnProperty(Az)){As[Az]=Y.clone(Aw[Az]);}});Ay=As.jsonObj;if(Av){for(Ax in At){if(At.hasOwnProperty(Ax)){Ay[Ax]=At[Ax];}}}else{Q.forEach(Au||As.modifiedPropertyKeys,function(Az){if(At.hasOwnProperty(Az)){Ay[Az]=At[Az];}});}return As;}function E(Ax,Av,Ay,Au){var At,Aw,As=[];for(At in Ay){if(((Au&&At==="AllMetrics")||(!Au&&At!=="AllMetrics"))&&Ay.hasOwnProperty(At)){Aw={};Aw.modifiedPropertyKeys=Y.clone(Av);Aw.jsonObj=Y.clone(Ay[At]);As.push({name:Ax,value:Aw,option:{key:At}});}}return As;}function a(As,At){return As===AQ.REF_LINE_DEF&&At[S].modifiedPropertyKeys[0]===AQ.REF_LINE_NAME;}function d(){return{suppressData:true,needRefresh:true,actions:[],undoRedoCallback:undefined};}function e(Ax,At,A1){var Aw,Au=A1.length,As,Av,Az,Ay,A0;if(Ax===AQ.REF_LINE_DEF||Ax===AQ.TREND_LINE_DEF){Ax=At.modifiedPropertyKeys[0];A0=Ax;if(Ax===o.REF_LABELS_FONT_COLOR||Ax===AQ.TREND_REF_LINE_COLOR){return false;}if(Ax===AQ.TREND_REF_LINE_COMBINED_STYLE){A0=AQ.TREND_REF_LINE_THICKNESS;}if(!At.jsonObj.fmt){return true;}A1=[];A1.push(At.jsonObj.fmt[A0]);Au=A1.length;At=At.jsonObj[A0];}if(Au<=0){return true;}if(Ax.indexOf("FntStyle")>=0){Az=At&1;Ay=At&2;for(Aw=0;Aw<Au;Aw++){As=A1[Aw];if(typeof As==="object"){As=As[Ax];}if((Az!==(As&1))||(Ay!==(As&2))){return true;}}return false;}if(Ax.indexOf("LnCmbStyle")>=0){if(A0===o.TREND_REF_LINE_THICKNESS){Av=At;}else{Av=AM(At).thk;}for(Aw=0;Aw<Au;Aw++){if((Av!==2&&A1[Aw]===2)||(Av===2&&A1[Aw]!==2)){return true;}}return false;}return true;}mstrmojo.gm._GMPropertyHandler=mstrmojo.provide("mstrmojo.gm._GMPropertyHandler",{scriptClass:"mstrmojo.gm._GMPropertyHandler",getWidgetPropertyDefaultValue:function(At,As){return this.property.readItemDefault(At,As);},getWidgetPropertyValue:function(As){return this.property.readItem(As);},setWidgetPropertyValue:function(At,As){if(At===o.V_MATRIX_LINES_SHOW||At===o.H_MATRIX_LINES_SHOW){this.property.removeItem(AQ.MATRIX_LINES);}if(At===o.X_AXIS_LINE_SHOW||At===o.Y_AXIS_LINE_SHOW){this.property.removeItem(AQ.AXES);}this.property.updateItem(At,As);},removeWidgetProperty:function(As){this.property.removeItem(As);},getWidgetProps:function(){return this.property.generalProps;},isXMLDirty:function(){return this.property.isXMLDirty();},resetXMLDirtyFlag:function(){this.property.resetXMLDirtyFlag();},readGlobalProperty:function(A3,A2){if(A3.indexOf("CmbStyle")!==-1){var A5=A3.replace("CmbStyle","Thk"),A6=A3.replace("CmbStyle","Style"),A0=this.readGlobalProperty(A5,A2),BC=this.readGlobalProperty(A6,A2);if(A0===undefined||BC===undefined){return undefined;}return Aj(A0,BC);}if(A3===AQ.TREND_BUBBLE_MAX||A3===AQ.TREND_BUBBLE_MIN){var A9=this.getGlobalExtremeForAxisOrMetric(A2.key,A2.sizeBy);if(A3===AQ.TREND_BUBBLE_MAX){return A9.max;}return A9.min;}if(A3===o.COLOR_SQUARE_COLOR){var A8=this.colorSqureIdentity;if(A8){return{color:A8.decodedColor,isDefaultColor:A8.isDefaultColor};}return{color:"#0000FF",isDefaultColor:true};}if(A3===AQ.TREND_LINE_DEF){var As=this.GMController.trConfigPool,A1,Av;if(A2===undefined){return AG.call(this,As.globalProp||{});}A1=Y.clone(As[A2.key]);Av=this.makeDefaultsObjectAtOption(A3);Y.copy(A1,Av);Av.trdRefLnCmbStyle=Aj(Av.trdRefLnThk,Av.trdRefLnStyle);return AG.call(this,Av);}if(A3===AQ.TREND_BUBBLE_FORE_DEF){var A4=this.GMController[AQ.TREND_BUBBLE_FORE_DEF],Ax=A4[A2.key],BG=this.makeDefaultsObjectAtOption(A3);Y.copy(Ax,BG);return AG.call(this,BG);}if(A3===AQ.REF_LINE_DEF){var A7=AK.call(this,A2),BB=this.makeDefaultsObjectAtOption(A3);Y.copy(A7,BB);BB.trdRefLnCmbStyle=Aj(BB.trdRefLnThk,BB.trdRefLnStyle);return AG.call(this,BB);}if(A3===AQ.AXIS_SCALE_DATA){var Az,Aw;Az=this.getWidgetPropertyValue(A3);Aw=L.createAxisScaleCollectionFromArrays(Az);if(A2===undefined){return AG.call(this,Aw);}return AG.call(this,Aw[A2.key]);}if(A3===AQ.METRIC_LEVEL_DATA_LABEL){var At=this.getWidgetPropertyValue(AQ.METRIC_LEVEL_DATA_LABEL);if(!At){At=AE.call(this);}else{M.call(this,At);}if(!A2){return new AY({jsonObj:At,parent:undefined});}if(At[A2.key]!==undefined){return At[A2.key];}return this.makeDefaultsObjectAtOption(A3);}if(A3===AQ.AXIS_ORIGIN){var BA=this.getWidgetPropertyValue(AQ.AXIS_ORIGIN);if(!BA){BA=this.createAxisOriginObject();}if(!A2){return new AY({jsonObj:BA,parent:undefined});}if(BA[A2.key]!==undefined){return new AY({jsonObj:BA[A2.key],parent:undefined});}return new AY({jsonObj:this.makeDefaultsObjectAtOption(A3),parent:undefined});}if(A3===o.LINE_MARKER_COLOR){var Ay={},BE=this.GMController,Au=BE.model.colorType,BF=this.getWidgetPropertyValue(o.LINE_MARKER_COLOR),BD;if(BF===undefined){if(Au===p.NULL){BD=BE.getVolatileDefaultsForShape(BE.getChartInfo().shape);}Ay[o.LINE_MARKER_COLOR]=BD&&BD[o.SHAPE_FILL_COLOR];Ay[o.LINE_MARKER_COLOR+g]=true;}else{Ay[o.LINE_MARKER_COLOR]=BF;Ay[o.LINE_MARKER_COLOR+g]=false;}return AG(Ay);}return this.readPropertiesUniformly(A3,A2);},readPropertiesUniformly:function(Aw,Ax){var Ay,Av,Au,As,Az,A0,At=J.getUnderlyingPropertyNameWithAll(Aw);Ay=At.length;if(Ay>1){Au=this.getWidgetPropertyValue(At[0]);for(Av=1;Av<Ay;Av++){As=U(At[Av],this.getWidgetPropertyValue(At[Av]));if(As!==Au){if(Aw===o.ALL_GRID_LINES_SHOW){if(Au===r.SHOW&&As===r.HIDE){return r.SHOW_MAJOR_ONLY;}}return undefined;}}return Au;}Az=this.getWidgetPropertyValue(Aw);if(Ax!==undefined){if(Az!==undefined){A0=Az[Ax.key];if(A0!==undefined){return new AY({jsonObj:A0,parent:undefined});}A0=this.makeDefaultsObjectAtOption(Aw);}else{A0=this.makeDefaultsObjectAtOption(Aw);}return AG(A0);}if(Az!==undefined){return AG(Az);}if(W.indexOf(Aw)>=0){return new AY({jsonObj:{},parent:undefined});}return undefined;},writeGlobalProperty:function AR(Ax,Ay,At,Aw,As){var Au=this,Az,Av=d();Au.GMController.clearShapeFormatsCache();if(Ax!==""&&Ax!==undefined){if(this.syning){return ;}if(Ax===o.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorByMap([this.colorSqureIdentity.comb],Ay);}return ;}if(Ax.indexOf("CmbStyle")!==-1){Av=this.processCombineLineStyle(Ax,Ay,At);}else{if(Ax===AQ.TREND_LINE_DEF){Av=this.processTrendLine(Ax,Ay,At);}else{if(Ax===AQ.REF_LINE_DEF){Av=this.processReferenceLine(Ax,Ay,At);}else{if(Ax===AQ.TREND_BUBBLE_FORE_DEF){Av=this.processTrendLineForcast(Ax,Ay,At,Aw);}else{if(Ax===AQ.AXIS_SCALE_DATA){Av=this.processAxisScale(Ax,Ay,At,Aw);}else{if(Ax===AQ.METRIC_LEVEL_DATA_LABEL){Av=this.processMetricLevelDataLabel(Ax,Ay,At);}else{if(Ax===AQ.AXIS_ORIGIN){Av=this.processAxisOrigin(Ax,Ay,At);}else{if(Ax===o.ALL_GRID_LINES_SHOW){Av=this.processGridLineShow(Ax,Ay);}else{if(Ax===o.LINE_MARKER_COLOR){Av=this.processLineMarkColor(Ax,Ay);}else{Av=this.processPropertiesUniformly(Ax,Ay,At,As);}}}}}}}}}}if(Aw){return ;}Az=this.getPropertyUpdateCallback(Ax,Ay,At,As,Av.suppressData);if(Av.suppressData){Au.partialUpdate(Ax,{allVal:Ay},Av.needRefresh,At);if(Az.success){Az.success();}}this.submitUpdatesAndPersistXML(Av.actions,Az,Av.undoRedoCallback,Av.suppressData,false,Av.puFiltersConfig);},getRaiseEventCallback:function(Av,Aw,At,As){var Au=this.id;return{success:function(){var Ax=j.all[Au];Ax.syning=true;if(Av===o.MODIFIED_DEF_FILL_COLOR){Ax.raiseEventShapeFormattingChanged(o.SHAPE_FILL_COLOR);}else{Ax.raiseEventGlobalPropertyChanged(Av,Aw,At||{});}if(As){As.forEach(function(Ay){Ax.raiseEventGlobalPropertyChanged(Ay.name,Ay.value,Ay.option);});}Q.forEach(J.propertyMap[Av],function(Ay){Ax.raiseEventGlobalPropertyChanged(Ay,Ax.readGlobalProperty(Ay,At),At||{});});Ax.syning=false;}};},getPropertyUpdateCallback:function(Ax,Au,Ay,Aw,As){var Az=false,At,A0={},Av;if(Ax===AQ.SHAPE||Ax===AQ.METRIC_SHAPES||Ax===AQ.SUB_TYPE){Az=true;}if(!Az){Av=this.getRaiseEventCallback(Ax,Au,Ay,Aw);Ao(Av,A0);}if(!As){if(Az){Ao(this.getXTabRefreshCallBack(),A0);}else{Ao(this.getDocModelSliceCallback(),A0);}}else{if(Az){At=this.zonesModel.getUpdateCallback();Ao(At,A0);}}return A0;},processCombineLineStyle:function(Au,As,Aw){var Az=this,Av=this.id,Ax=d(),A0=this.readGlobalProperty(Au,Aw),A1=[],Ay,At=function(A7,A6){var A5=Au.replace("CmbStyle","Thk"),A3=Au.replace("CmbStyle","Style"),A4=AM(A6),A2=A4.thk,A8=A4.ceLnStyle;A7.writeGlobalProperty(A5,A2,Aw,true);A7.writeGlobalProperty(A3,A8,Aw,true);};J.getUnderlyingPropertyNameWithAll(Au.replace("CmbStyle","Thk")).forEach(function(A2){A1.push(Az.getWidgetPropertyValue(A2));});At(this,As);Ax.needRefresh=e(Au,As,A1);Ay=Ax.needRefresh;Ax.undoRedoCallback={undo:function(){var A2=j.all[Av];At(A2,A0);A2.doUpdateOnUndoRedo(Au,A0,{allVal:A0},Ay,Aw,undefined);},redo:function(){var A2=j.all[Av];At(A2,As);A2.doUpdateOnUndoRedo(Au,As,{allVal:As},Ay,Aw,undefined);}};return Ax;},processTrendLine:function(Ax,Av,Ay){var A6,A4,A5,Az,A2=this,A1=d(),Au=Av.modifiedPropertyKeys,As=false,Aw=false,A0=this.GMController.trConfigPool,At=this.getChartInfo(),A3=At.isABL;if(Ay===undefined){A1.suppressData=false;A6=Av.jsonObj;Au.forEach(function(A7){if(A7===AQ.TREND_SEASONALITY){As=true;}else{Aw=true;}});for(A4 in A0){if(A4.length===32&&A0.hasOwnProperty(A4)){A5=A0[A4];if(A5.existing&&(As||Aw)){A2.collectABLForecastActions(A6,A4,A1.actions);}}}}else{A5=Av.jsonObj;if(A3){A6=this.readGlobalProperty(Ax,undefined).jsonObj;}else{A6=undefined;}Az=Ah(Au,A5.fmt);A1.suppressData=!AV.call(A2,Av,Ay,true);A2.collectTrendLineAction(A5,A1.actions,Ay.key);this.checkCustomScaleNotificationForTrendLine(Ay.key);if(A3){if(k(Au)){A2.collectABLForecastActions(A6,Ay.key,A1.actions);}if(Au[0]===AQ.TREND_TYPE&&this.isSeasonalityEnabled()&&(A5[AQ.TREND_TYPE]===An.EnumTrendLineModelType.LOG||A5[AQ.TREND_TYPE]===An.EnumTrendLineModelType.POW)){this.trendSeasonalityError=true;}}A1.needRefresh=e(Ax,Av,[]);this.getUndoRedoCallBackForTrdRefLine(A1,Ax,Av,Az,A1.needRefresh,Ay,true);}return A1;},getPartialUpdateFilterConfigForRefLine:function(){return{data:{include:{dz:true,gsi:true,ghs:true,trendref:true}}};},processReferenceLine:function(Ax,As,Ay){var A1=this,Az,A0=d(),A3=this.GMController,At=As.modifiedPropertyKeys,A2=As.jsonObj,Aw=false,Av=Ay.key.split(","),Au=Av[0],A4=Av[1];if(At[0]===AQ.REF_CONST_VALUE){As.setProperty(AQ.REF_ENABLED,true);}if(At.indexOf(AQ.REF_SHOW_LABEL)>=0){Aw=true;}if(At.indexOf(AQ.REF_ENABLED)>=0&&As.jsonObj[AQ.REF_ENABLED]){Aw=true;}if(Aw){if(A2[AQ.REF_SHOW_LABEL]){if(A2[AQ.REF_LABEL_TYPE]<=0){As.setProperty(AQ.REF_LABEL_TYPE,AJ.DssModelLabelsType);}}else{As.setProperty(AQ.REF_LABEL_TYPE,AJ.DssModelLabelsNone);}}Az=Ah(At,AK.call(this,Ay));A0.puFiltersConfig=this.getPartialUpdateFilterConfigForRefLine();if(A3.isStacked&&!A3.splitPlottingMetrics){A2.dropzoneId=(Au==="YAxis"||Au==="Y2Axis")?4:3;A2.subAxis=Au.search("2")>=0?1:0;}else{A2.metricId=Au;}A2[AQ.REF_TYPE]=t[A4];if(A2[AQ.REF_ENABLED]===false&&At.indexOf(AQ.REF_ENABLED)>=0){A0.suppressData=false;A1.collectRemoveRefLineAction(A2,A0.actions);}else{A0.suppressData=!AV.call(A1,As,Ay,false);if(A3.isStacked&&!A3.splitPlottingMetrics){Au=undefined;}A1.collectRefLineAction(A2,A0.actions,Au);}A0.needRefresh=e(Ax,As,[]);this.getUndoRedoCallBackForTrdRefLine(A0,Ax,As,Az,A0.needRefresh,Ay,false);return A0;},processTrendLineForcast:function(Ax,Az,Av,Aw){var At=d(),Ay=this.GMController;At.suppressData=false;if(Aw){AN((Ay[AQ.TREND_BUBBLE_FORE_DEF])[Av.key],Az,true);}var Au=Az.jsonObj,As=AX(Au);if(typeof As.max==="number"){As.max=String(As.max);}if(typeof As.min==="number"){As.min=String(As.min);}As.metricId=Av.key;At.actions.push(this.getUpdateForecastInfoAction(As));return At;},generateUndoRedoConfigForAxisConfig:function(Az,Av,A0,Ay,At){var A2,As,Ax={},A1=Ay?this.undoPropValConfig:this.redoPropValConfig,Au=this.undoPropValConfig.modifiedKeys,Aw=A1[Az];Ax[Az]=At?L.serializeCollection2String(Aw):Aw;if(A1.hasOwnProperty(AQ.AXIS_SCALE)){Ax[AQ.AXIS_SCALE]=A1[AQ.AXIS_SCALE];}As=E(Az,Au,Aw,A0.key!=="AllMetrics");if(Ay){A2=P(Av,Aw[A0.key],false,Au);return{undoPropValConfig:Ax,associatedOptionsForUndo:As,undoValue:A2};}delete this.undoPropValConfig;delete this.redoPropValConfig;return{redoPropValConfig:Ax,associatedOptionsForRedo:As,redoValue:Av};},updateUndoRedoConfigForAxisConfig:function(At,Ax,Aw,Au){if(!this.undoPropValConfig){this.undoPropValConfig={modifiedKeys:[]};}if(!this.redoPropValConfig){this.redoPropValConfig={};}var As=At?this.undoPropValConfig:this.redoPropValConfig,Av=function(Az,A0){var Ay;if(Q.isArray(A0)){Ay=Az[Ax];Q.forEach(A0,function(A1){if(Ay.indexOf(A1)<0){Ay.push(A1);}});}else{if(typeof A0==="object"){Ay=Y.clone(A0);}else{Ay=A0;}}Az[Ax]=Ay;};if(Au||!As.hasOwnProperty(Ax)){Av(As,Aw);}},processAxisScale:function(Az,Av,A0,A3){var A5,A4,Ay,A1,Aw,Au,A2=d(),At=Av.modifiedPropertyKeys;A4=this.getWidgetPropertyValue(Az);Ay=L.createAxisScaleCollectionFromArrays(A4);this.updateUndoRedoConfigForAxisConfig(true,Az,Ay);if(Av.jsonObj.scaleType!==s.CUSTOM&&At[0]!==AQ.LOG_SCALE){A2.suppressData=false;A2.puFiltersConfig={data:{include:{extrs:true}}};}if(At[0]!==AQ.LOG_SCALE){this.updateUndoRedoConfigForAxisConfig(true,AQ.AXIS_SCALE,this.getWidgetPropertyValue(AQ.AXIS_SCALE));this.setWidgetPropertyValue(AQ.AXIS_SCALE,s.CUSTOM);this.updateUndoRedoConfigForAxisConfig(false,AQ.AXIS_SCALE,s.CUSTOM,true);}else{this.logScaleChanged=true;}if(At[0]===AQ.SINGLE_AXIS_SCALE_TYPE&&Av.jsonObj[AQ.SINGLE_AXIS_SCALE_TYPE]!==s.CUSTOM){Av.setProperty(AQ.AXIS_SCALE_MANUAL_MIN,Av.jsonObj[AQ.AXIS_SCALE_REAL_MIN]);Av.setProperty(AQ.AXIS_SCALE_MANUAL_MAX,Av.jsonObj[AQ.AXIS_SCALE_REAL_MAX]);Av.setProperty(AQ.AXIS_SCALE_AUTO_MIN,false);Av.setProperty(AQ.AXIS_SCALE_AUTO_MAX,false);}if(A0.key==="AllMetrics"){var As=[AQ.AXIS_SCALE_AUTO_MIN,AQ.AXIS_SCALE_AUTO_MAX,AQ.AXIS_SCALE_MANUAL_MIN,AQ.AXIS_SCALE_MANUAL_MAX,AQ.SINGLE_AXIS_SCALE_TYPE];var Ax=As.indexOf(At[0]);if(Ax>=0){Q.forEach(As,function(A6){if(At.indexOf(A6)<0){At.push(A6);}});}for(A5 in Ay){if(A5!=="AllMetrics"&&Ay.hasOwnProperty(A5)){AN(Ay[A5],Av,true);}}}else{AN(Ay[A0.key],Av,true);}delete Ay.AllMetrics;A1=L.serializeCollection2String(Ay);this.setWidgetPropertyValue(AQ.AXIS_SCALE_DATA,A1);if(!A2.suppressData){this.setWidgetPropertyValue("axScaleModified",1);}this.updateUndoRedoConfigForAxisConfig(true,"modifiedKeys",At,true);this.updateUndoRedoConfigForAxisConfig(false,Az,Ay,true);if(!A3){Aw=this.generateUndoRedoConfigForAxisConfig(Az,Av,A0,true,true);Au=this.generateUndoRedoConfigForAxisConfig(Az,Av,A0,false,true);this.getUndoRedoCallBackForAxisConfig(A2,Az,Aw,Au,true,A0);}return A2;},processMetricLevelDataLabel:function(Av,At,Ax){var A0=d(),A1,Aw=this.id,A3=true,A2=this.readGlobalProperty(Av),Ay=A2.jsonObj,As=Ay[Ax.key],Au,Az=Y.clone(Ay);if(Ax.key==="AllMetrics"){for(A1 in Ay){if(Ay.hasOwnProperty(A1)){Ay[A1]=At;}}}else{Ay[Ax.key]=At;for(A1 in Ay){if(A1!=="AllMetrics"&&Ay.hasOwnProperty(A1)){if(Ay[A1]===false){A3=false;}}}if(Ay.AllMetrics!==undefined){Ay.AllMetrics=A3;}}this.setWidgetPropertyValue(Av,Ay);Au=Ay;A0.undoRedoCallback={undo:function(){var A4=j.all[Aw];A4.setWidgetPropertyValue(Av,Az);A4.doUpdateOnUndoRedo(Av,As,{allVal:As},true,Ax,undefined);},redo:function(){var A4=j.all[Aw];A4.setWidgetPropertyValue(Av,Au);A4.doUpdateOnUndoRedo(Av,At,{allVal:At},true,Ax,undefined);}};return A0;},processAxisOrigin:function(Aw,As,Ax){var A3,Av,Au,Ay=d(),At=As.modifiedPropertyKeys,A2=this.readGlobalProperty(Aw),A0=A2.jsonObj,Az=true,A1=null;if(At[0]===AQ.AXIS_ORIGIN_AUTO&&As.jsonObj[AQ.AXIS_ORIGIN_AUTO]===true){As.jsonObj[AQ.AXIS_ORIGIN_VALUE]=0;At.push(AQ.AXIS_ORIGIN_VALUE);}this.updateUndoRedoConfigForAxisConfig(true,Aw,A0);if(Ax.key==="AllMetrics"){if(At[0]===AQ.AXIS_ORIGIN_VALUE){At.push(AQ.AXIS_ORIGIN_AUTO);}for(A3 in A0){if(A0.hasOwnProperty(A3)){AN(A0[A3],As);}}if(A0.AllMetrics===undefined){A0.AllMetrics=Y.copy(As.jsonObj);}}else{AN(A0[Ax.key],As);Y.forEach(A0,function(A4,A5){if(A5!=="AllMetrics"){Az=Az&&A4.axOriAuto;if(A1===null){A1=A4.axOriValue;}else{if(A1!==undefined){if(A1!==A4.axOriValue){A1=undefined;}}}}});A0.AllMetrics={axOriAuto:Az,axOriValue:A1};}this.setWidgetPropertyValue(Aw,A0);this.setWidgetPropertyValue(o.X_AXIS_ORIGIN_LINE_SHOW,true);this.setWidgetPropertyValue(o.Y_AXIS_ORIGIN_LINE_SHOW,true);this.updateUndoRedoConfigForAxisConfig(true,"modifiedKeys",At,true);this.updateUndoRedoConfigForAxisConfig(false,Aw,A0,true);Av=this.generateUndoRedoConfigForAxisConfig(Aw,As,Ax,true,false);Au=this.generateUndoRedoConfigForAxisConfig(Aw,As,Ax,false,false);this.getUndoRedoCallBackForAxisConfig(Ay,Aw,Av,Au,true,Ax);return Ay;},processGridLineShow:function(Av,Aw){var As=d(),Au=this.id,Ax=this.readGlobalProperty(Av),At=function(A0,A1){var Az=A1,Ay=A1;if(A1===r.SHOW_MAJOR_ONLY){Az=r.SHOW;Ay=r.HIDE;}A0.setWidgetPropertyValue(o.MAJOR_GRID_LINES_SHOW,Az);A0.setWidgetPropertyValue(o.MINOR_GRID_LINES_SHOW,Ay);};At(this,Aw);As.undoRedoCallback={undo:function(){var Ay=j.all[Au];At(Ay,Ax);Ay.doUpdateOnUndoRedo(Av,Ax,{allVal:Ax},true,undefined,undefined);},redo:function(){var Ay=j.all[Au];At(Ay,Aw);Ay.doUpdateOnUndoRedo(Av,Aw,{allVal:Aw},true,undefined,undefined);}};return As;},processLineMarkColor:function(Ay,Az){var Ax=this.id,Aw=d(),Av=this.readGlobalProperty(Ay),Au=Y.clone(Az),At=function(A4,A2,A3){var A0=A3?A2:Y.clone(A2),A5=A2.jsonObj[Ay],A1;if(A5==="default"){A4.removeWidgetProperty(Ay);}else{A4.setWidgetPropertyValue(Ay,A5);}A1=A4.readGlobalProperty(Ay);A0.jsonObj[Ay]=A1.jsonObj[Ay];A0.jsonObj[Ay+g]=A1.jsonObj[Ay+g];return A0;},As=function(A2){var A1=j.all[Ax],A0=At(A1,A2);A1.doUpdateOnUndoRedo(Ay,A0,{allVal:A0},true,undefined,undefined);};Av.modifiedPropertyKeys.push(Ay);At(this,Az,true);Aw.undoRedoCallback={undo:function(){As(Av);},redo:function(){As(Au);}};return Aw;},processPropertiesUniformly:function(Ax,At,Ay,Av){var A0=this,Az=d(),Au,As=this.getChartInfo(),Aw={},A1=[];if(Ax===AQ.SUB_TYPE){AL.call(this,At,Az);}Au=J.getUnderlyingPropertyNameWithAll(Ax);Q.forEach(Au,function(A2){if(Az.suppressData){Az.suppressData=!Ag.call(A0,A2,At,As);}Aw[A2]=A0.getWidgetPropertyValue(A2);if(Ay&&Aw[A2]){Aw[A2]=Aw[A2][Ay.key];}if(A2.indexOf("FntStyle")>=0||A2.indexOf("LnThk")>=0){A1.push(Aw[A2]);}AO.call(A0,A2,At,Ay);});Az.needRefresh=e(Ax,At,A1);this.getUndoRedoCallBackForUniformProperty(Az,Ax,At,Aw,Az.needRefresh,Ay,Av);return Az;},getUndoRedoCallBackForUniformProperty:function(Az,Av,At,Ay,A0,Ax,Au){var Aw=this.id,As;if(Az.suppressData){if(Au&&Au[0]){As=Y.clone(Au);As[0].value=false;}Az.undoRedoCallback={undo:function(){var A4,A1,A2=j.all[Aw],A3=[];for(A4 in Ay){if(Ay.hasOwnProperty(A4)){A1=Ay[A4];AO.call(A2,A4,A1,Ax,true);A1=U(A4,A1);A3.push(A1);}}A2.doUpdateOnUndoRedo(Av,AI(A3),Ay,A0,Ax,As);},redo:function(){var A1=j.all[Aw],A2=J.getUnderlyingPropertyNameWithAll(Av);Q.forEach(A2,function(A3){AO.call(A1,A3,At,Ax);});A1.doUpdateOnUndoRedo(Av,At,{allVal:At},A0,Ax,Au);}};}},getUndoRedoCallBackForTrdRefLine:function(Ay,Au,As,Ax,A0,Aw,At){var Av=this.id,Az;if(Ay.suppressData){Az=P(As,Ax,true);Ay.undoRedoCallback={undo:function(){var A1=j.all[Av];AV.call(A1,Az,Aw,At);A1.doUpdateOnUndoRedo(Au,Az,{allVal:Az},A0,Aw,undefined);},redo:function(){var A1=j.all[Av];AV.call(A1,As,Aw,At);A1.doUpdateOnUndoRedo(Au,As,{allVal:As},A0,Aw,undefined);}};}},getUndoRedoCallBackForAxisConfig:function(At,Az,As,Av,Au,Aw){var Ax=this.id,Ay;if(At.suppressData){Ay=function(A1,A0){var A2;for(A2 in A0){if(A0.hasOwnProperty(A2)){A1.setWidgetPropertyValue(A2,A0[A2]);}}};At.undoRedoCallback={undo:function(){var A0=j.all[Ax];Ay(A0,As.undoPropValConfig);A0.doUpdateOnUndoRedo(Az,As.undoValue,{allVal:As.undoValue},Au,Aw,As.associatedOptionsForUndo);},redo:function(){var A0=j.all[Ax];Ay(A0,Av.redoPropValConfig);A0.doUpdateOnUndoRedo(Az,Av.redoValue,{allVal:Av.redoValue},Au,Aw,Av.associatedOptionsForRedo);}};}},doUpdateOnUndoRedo:function(Aw,Ax,At,Au,Av,As){var Ay;this.partialUpdate(Aw,At,Au,Av,true);Ay=this.getPropertyUpdateCallback(Aw,Ax,Av,As,true);if(Ay.success){Ay.success();}},processChangeShape:function AC(Az){var Av=[],Aw=this,Ay=Aw.GMController.dz,Au=Ay.SliceBy.TemplateUnit||[],As=Ay.AngleBy.TemplateMetric||[],At=Ay.SizeBy.TemplateMetric||[],Ax=G.call(Aw);this.zonesModel.CARDLIMIT=AH;this.zonesModel.checkAndWarnLargeItemsForAddUnits(Ax,function(){if(Ay.SliceBy.MetricNames!==undefined){Au.push(AT);}if(Az===T.AREA){Q.forEach(At,function(A0){A0.zone=8;if(!A0.did){A0.did=A0.id;}A0.cs=1;});Av=At;}if(Az!==T.PIE&&Az!==T.RING){Q.forEach(Au,function(A0){A0.zone=6;if(!A0.did){A0.did=A0.id;}A0.cs=1;});Q.forEach(As,function(A0){A0.zone=10;if(!A0.did){A0.did=A0.id;}A0.cs=1;});Av=(Av||[]).concat((As.concat(Au||[])));}if(Av.length>0){Aw.changeShapeProperty(AQ.SHAPE,Az);Aw.zonesModel.gmZones.deleteItems(Av);}else{Aw.writeGlobalProperty(AQ.SHAPE,Az);}});},getPartialUpdateType:function(As){if(h.indexOf(As)>=0){return l.UPDATE_ALL;}if(N.indexOf(As)>=0){return l.UPDATE_CHARTS;}if(C.indexOf(As)>=0){return l.SPLITTER_LINE_SCALE;}if(I.indexOf(As)>=0){return l.CHART_SCALE;}return l.UNKNOW;},partialUpdate:function(Av,As,A0,Aw,Au){var At,Ay,Az=this,Ax=false;if(this.noData){return ;}Ar.startTimer({functionName:"VisGraphMatrix.partialUpdate",purpose:"Partial update of GraphMatrix ("+this.k+")"});At=J.getUnderlyingPropertyNameWithAll(Av);this.resetAxisProps(At);this.resetHTML5Props();this.configureTrendAndRefLine(Av);this.resetGMCtrlCache(Av,As);this.setUpForceUpdateFlag(Av);Ax=a(Av,As);if(A0&&!Ax){Ax=this.handlePartialUpdate(this.getPartialUpdateType(Av),Au);}if(!Ax){if(Ac.indexOf(Av)>=0){At=[Av];}At.forEach(function(A1){Ay=Az.updateSingleProperty(A1,As,A0,Aw);Ax=Ax||Ay;});}this.clearForceUpdateFlag();if(!Ax){this.clientRerenderGraphMatrix();}Ar.endTimer();},handlePartialUpdate:function(As,At){var Au=this.GMController;switch(As){case l.UPDATE_CHARTS:this.updateCharts();break;case l.UPDATE_ALL:Au.reRenderGM();break;case l.CHART_SCALE:if(At){Au.reRenderGM();}else{this.onControlResized();}break;case l.SPLITTER_LINE_SCALE:if(At){Au.reRenderGM();}else{this.onControlResized(false,false,true,true);}break;default:return false;}return true;},updateSingleProperty:function(Aw,As,A1,Ax){var At,Ay={},Au=this.manager,A2=this.HTML5PROPS,Av=As[S],A0=As.hasOwnProperty(Aw)?As[Aw]:Av,Az=this.GMController;switch(Aw){case o.BG_COLOR:case o.BG_FILL_TRANSPARENCY:break;case o.ROW_HEADER_FILL_COLOR:case o.ROW_HEADER_FILL_TRANSPARENCY:this.updateRowValueBackground();this.updateHeaderTitle("row","bg");break;case o.ROW_HEADER_TEXT_FONT_COLOR:case o.ROW_HEADER_TEXT_FONT_STYLE:case o.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:case o.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:this.updateHeaderTitle("row","font");break;case o.ROW_VAVLUE_TEXT_FONT_COLOR:case o.ROW_VAVLUE_TEXT_FONT_STYLE:case o.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:case o.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:Au.updateSubSetOfVSlaves("row",Az.metricNamesOnRowMetricsOnXAxis);break;case o.COLUMN_HEADER_FILL_COLOR:case o.COLUMN_HEADER_FILL_TRANSPARENCY:this.updateColumnValueBackground();this.updateHeaderTitle("col","bg");break;case o.COLUMN_HEADER_TEXT_FONT_COLOR:case o.COLUMN_HEADER_TEXT_FONT_STYLE:case o.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:case o.COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:this.updateHeaderTitle("col","font");break;case o.COLUMN_VAVLUE_TEXT_FONT_COLOR:case o.COLUMN_VAVLUE_TEXT_FONT_STYLE:case o.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:case o.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:Au.updateSubSetOfHSlaves("column",Az.metricNamesOnColumnMetricsOnYAxis);break;case o.V_MATRIX_LINES_COLOR:case o.V_MATRIX_LINES_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-matrix-line.v",A2.MATRIX_LINE_V);break;case o.H_MATRIX_LINES_COLOR:case o.H_MATRIX_LINES_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-matrix-line.h",A2.MATRIX_LINE_H);break;case o.X_AXIS_LINE_COLOR:case o.X_AXIS_LINE_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-axis-line.h",A2.AXIS_LINE_X);break;case o.Y_AXIS_LINE_COLOR:case o.Y_AXIS_LINE_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-axis-line.v",A2.AXIS_LINE_Y);break;case o.X_AXIS_ORIGIN_LINE_COLOR:case o.X_AXIS_ORIGIN_LINE_COMBINED_STYLE:this.updateOriginLineStyle(Aw,"v",".gm-set-originline",A0);break;case o.Y_AXIS_ORIGIN_LINE_COLOR:case o.Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:this.updateOriginLineStyle(Aw,"h",".gm-set-originline",A0);break;case o.Y_AXIS_TITLE_FONT_COLOR:case o.Y_AXIS_TITLE_FONT_STYLE:this.updateAxisTitleFontStyle("yaxis");break;case o.Y_AXIS_LABELS_FONT_COLOR:case o.Y_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("yaxis",Aw);break;case o.X_AXIS_TITLE_FONT_COLOR:case o.X_AXIS_TITLE_FONT_STYLE:this.updateAxisTitleFontStyle("xaxis");break;case o.X_AXIS_LABELS_FONT_COLOR:case o.X_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("xaxis",Aw);break;case o.ALL_AXIS_LABELS_FONT_COLOR:case o.ALL_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("allaxis",Aw);break;case o.GRID_LINE_AUTO:case o.ALL_GRID_LINES_SHOW:case o.MAJOR_GRID_LINES_SHOW:case o.MINOR_GRID_LINES_SHOW:case o.ALL_GRID_LINES_COLOR:case o.ALL_GRID_LINES_COMBINED_STYLE:case o.MAJOR_GRID_LINES_COLOR:case o.MAJOR_GRID_LINES_COMBINED_STYLE:case o.MINER_GRID_LINES_COLOR:case o.MINER_GRID_LINES_COMBINED_STYLE:this.hPlaceHGridLines(A2.GRID_LINE_MAJOR,A2.GRID_LINE_MINOR);this.hPlaceVGridLines(A2.GRID_LINE_MAJOR,A2.GRID_LINE_MINOR);break;case AQ.LEGEND_VISIBLE:case AQ.LEGEND_MODE:case AQ.SCALE_LEGEND_WIDTH:case o.LEGEND_BG_COLOR:case o.LEGEND_BG_FILL_TRANSPARENCY:case o.LEGEND_FONT_COLOR:case o.LEGEND_FONT_STYLE:case o.LEGEND_FONT_SIZE:case o.LEGEND_FONT_FAMILY:this.legendPartialUpdate(Aw,A1);break;case AQ.LEGEND_POSITION:if(this.legend){this.legend.updateLegendSlot(A0,this.getLegendDockPosIdx(A0));}break;case o.ALL_TEXT_FONT_COLOR:case o.ALL_TEXT_FONT_STYLE:this.updateHeaderTitle("row","font");this.updateHeaderTitle("col","font");Au.updateVSlaves();Au.updateHSlaves();if(As.hasOwnProperty(S)){this.updateChartFontStyle(Aw,"all-text",Av);}else{if(Aw.indexOf("FntClr")>=0){Ay.dl=o.DATA_LABELS_FONT_COLOR;Ay.rfl=o.REF_LABELS_FONT_COLOR;}else{if(Aw.indexOf("FntStyle")>=0){Ay.dl=o.DATA_LABELS_FONT_STYLE;Ay.rfl=o.REF_LABELS_FONT_STYLE;}}this.updateChartFontStyle(Aw,B.GM_ORIGIN_LABEL);this.updateChartFontStyle(Ay.dl,B.GM_DATA_LABEL,As[Ay.dl]);this.updateChartFontStyle(Ay.rfl,B.GM_REF_LABEL,As[Ay.rfl]);}if(this.legend){this.legend.updateStyle(A2.LEGEND);}break;case AQ.BANDING:case AQ.AXIS_ORIGIN:case AQ.MAX_SIZE_TYPE:case AQ.MAX_SIZE_VALUE:case AQ.MIN_SIZE_VALUE:case AQ.DATA_LABEL:case AQ.DATA_LABELS_PLACEMENT:case AQ.METRIC_LEVEL_DATA_LABEL:case o.DATA_LABELS_FONT_FAMILY:case o.DATA_LABELS_FONT_SIZE:this.updateAxisAndCharts(Aw);break;case AQ.MIN_SIZE_TYPE:if(Aw===AQ.MIN_SIZE_TYPE&&this.needLegend&&Az.hasSizeBy()){this.sizeByData=Az.getSizeByLegendInfo();}this.updateAxisAndCharts(Aw);this.hUpdateLegend();break;case o.DATA_LABELS_FONT_STYLE:if(A1){this.updateAxisAndCharts(Aw);}else{this.updateChartFontStyle(Aw,B.GM_DATA_LABEL,A0);}break;case o.DATA_LABELS_FONT_COLOR:this.updateChartFontStyle(Aw,B.GM_DATA_LABEL,A0);break;case AQ.REF_LINE_DEF:At=A0.modifiedPropertyKeys[0];if(At===AQ.TREND_REF_LINE_COMBINED_STYLE||At===AQ.TREND_REF_LINE_COLOR){this.updateTrdAndRefLineStyle(".gm-set-referenceline",A0,Ax);}else{this.updateChartFontStyle(Aw,B.GM_REF_LABEL,A0);}break;case AQ.TREND_LINE_DEF:this.updateTrdAndRefLineStyle(".gm-set-trendline",A0,Ax);break;case o.REF_LABELS_FONT_COLOR:case o.REF_LABELS_FONT_STYLE:this.updateChartFontStyle(Aw,B.GM_REF_LABEL,A0);break;default:return false;}return true;},getHTML5Props:function(){return this.HTML5PROPS;},resetHTML5Props:function(){var As=this.property,At=this.HTML5PROPS;As.initHTML5Props(At);this.applyHTML5Props(At);this.adjustRHAndCHOpacity();this.postFillGMControllerStyle();},adjustRHAndCHOpacity:function(){var Av=this.HTML5PROPS;var As=Av.BK;var Au=Av.RH_BK;var At=Av.CH_BK;if(As.backgroundColor===Au.backgroundColor){if(Au.opacity<=As.opacity){Au.opacity=0;}else{Au.opacity-=As.opacity;}}if(As.backgroundColor===At.backgroundColor){if(At.opacity<=As.opacity){At.opacity=0;}else{At.opacity-=As.opacity;}}},getAllAxisProperties:function(){var As={},Au=this.GMController,At=this;if(Au.axisFormat){return Au.axisFormat;}b.forEach(function(Av){As[Av]=At.readGlobalProperty(Av);});Au.axisFormat=As;return As;},resetAxisProps:function(Au){var At=this.GMController.axisFormat,Aw=this,Av,As;if(At){Au.forEach(function(Ax){if(Ax.indexOf("CmbStyle")>=0){Av=Ax.replace("CmbStyle","Thk");As=Ax.replace("CmbStyle","Style");}b.forEach(function(Ay){if((Ay===Ax)||(Av&&Ay===Av)||(As&&Ay===As)){At[Ay]=Aw.readGlobalProperty(Ay);}});});}},getDefaultProperties:function(){var Av=(this.theme===n.LIGHT?Z.lightTheme():Z.darkTheme()),At=this.getDocModel(),As=false;if(At){var Au=At.getCurrentPaletteColors();if(Au&&Au.length){Av.shpFillClr=Av.shpLnClr=Au[0];As=true;}}if(!As){Z.update(this.theme,["shpFillClr"]);Z.update(this.theme,["shpLnClr"]);}return Av;},configureTrendAndRefLine:function Aa(As){if(As===AQ.TREND_LINE_DEF||As===AQ.REF_LINE_DEF||As.indexOf("allTxtFnt")>=0||As.indexOf(AP)>=0){this.GMController.configureTrendLine(this.getData());}},isLogScaleChanged:function Am(At){var As=At[AQ.AXIS_SCALE_DATA]||At[S];return !!(As&&As.modifiedPropertyKeys&&As.modifiedPropertyKeys[0]===AQ.LOG_SCALE);},resetGMCtrlCache:function A(At,Au){var As=this.GMController;if(At===AQ.MAX_SIZE_TYPE||At===AQ.MAX_SIZE_VALUE||At===AQ.MIN_SIZE_TYPE||At===AQ.MIN_SIZE_VALUE){As.initMaxMinSizeProps();}else{if(At===AQ.AXIS_SCALE_DATA){As.getAxisScaleMode();As.setupDualAxis();if(this.isLogScaleChanged(Au)){As.clearLogScaleCahce();As.msgCenter={};}}else{if(At===AQ.DATA_LABEL){As.resetDataLabelType();As.checkMetricLevelDataLabel();}else{if(At===AQ.DATA_LABELS_PLACEMENT){As.resetDataLabelPlacement();As.checkMetricLevelDataLabel();}else{if(At.indexOf("dlFnt")>=0||At.indexOf("allTxtFnt")>=0){As.clearDataLabelFormatCache();}else{if(At===o.MODIFIED_DEF_FILL_COLOR||At===o.SHAPE_BORDER_COMBINED_STYLE||At===o.SHAPE_LINE_COMBINED_STYLE){As.resetDefaultShapeProp();}else{if(At===o.SHAPE_FILL_TRANSPARENCY){As.resetDefaultShapeProp();}else{if(At===AQ.AXIS_ORIGIN){delete As.axisFormat;}}}}}}}}},getColorByComb:function O(Au){var At,Aw=Au.levels,Av=Au.elements,Ax=Aw.length,As=[];for(At=0;At<Ax;At++){As.push({tid:Aw[At],eid:Av[At]});}return As;},updateLegendColorByOpacity:function Ai(){if(!this.colorByData){return ;}var As=this.GMController,Ax=As.getDefaultsForShape(As.getChartInfo().shape),Aw=this.property.readItem(o.ALL_SHAPE_FORMAT),Av,At,Au=this;if(As.colorByInfo.tp===p.METRICS){At=Ar.getResolvedFormatsObject([Ax,Aw]);this.colorByData.elements.forEach(function(Ay){Ay.opacity=At[o.SHAPE_FILL_TRANSPARENCY]/100;});}else{this.colorByData.elements.forEach(function(Ay){Av=As.getShapeFormatsWithCombination(Au.getColorByComb(Ay.token));At=Ar.getResolvedFormatsObject([Ax,Aw,Av]);Ay.opacity=At[o.SHAPE_FILL_TRANSPARENCY]/100;});}},setUpForceUpdateFlag:function(At){if(At.indexOf("AxTt")>=0||At.indexOf("AxLb")>=0||At.indexOf("allTxtFnt")>=0){this.forceUpdateAxis=true;}var As=this;Q.forEach(AZ,function(Au){if(Au===At){As.forceUpdateAxis=true;return false;}});},clearForceUpdateFlag:function c(){delete this.forceUpdateAxis;},updateDummyANodeStyle:function(As){var At=this.domDummyA;if(At.style.display!=="none"){F.applyStyles2DomNode(At,As);At.setAttribute("type",B.GM_DUMMY_A);}},updateHeaderTitle:function(A2,Av){var A0=A2==="row"?".gm-rowheader-title":".gm-colheader-title",At=this.domNode.querySelectorAll(A0),Ay,Au=At.length,As,Aw,Az,A1=this.HTML5PROPS,A3,Ax;if(A2==="row"){A3=A1.RH_BK;Ax=A1.RH_TITLE;Aw=this.getWidgetPropertyValue(o.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL);Az=this.getWidgetPropertyValue(o.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL);}else{A3=A1.CH_BK;Ax=A1.CH_TITLE;Aw=this.getWidgetPropertyValue(o.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL);Az=this.getWidgetPropertyValue(o.COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL);}for(Ay=0;Ay<Au;Ay++){As=At[Ay];if(Av==="bg"){F.applyStyles2DomNode(As,A3);}else{if(As.getAttribute("type")===null){F.applyStyles2DomNode(As.firstChild.firstChild,Ax);}else{Ar.updateTextColorAndAlignment(As,Aw,Az);}}}},updateHeaderValueFontStyle:function(Aw){var Av=Aw==="row"?"div.gm-rowheader-cell, div.gm-rowheader-cell-dummy":"div.gm-colheader-cell, div.gm-colheader-cell-dummy",At=this.domNode.querySelectorAll(Av),Au,Az=At.length,Ay,As,Ax;if(Aw==="row"){As=this.getWidgetPropertyValue(o.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL);Ax=this.getWidgetPropertyValue(o.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL);}else{As=this.getWidgetPropertyValue(o.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL);Ax=this.getWidgetPropertyValue(o.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL);}for(Au=0;Au<Az;Au++){Ay=At[Au];if(Ay.getAttribute("class").indexOf("gm-colheader-cell-dummy")>=0&&!this.GMController.metricNamesOnColumnMetricsOnYAxis){continue;}Ar.updateTextColorAndAlignment(Ay,As,Ax);}},updateAxisTitleFontStyle:function(Av){var Au=Av==="yaxis"?".gm-yaxis-cell-label .gm-text-body-nowrap":".gm-xaxis-cell-label .gm-text-body-nowrap, .gm-x2axis-cell-label .gm-text-body-nowrap",As=this.domNode.querySelectorAll(Au),At,Ax=As.length,Aw=this.HTML5PROPS[Av==="yaxis"?"AXIS_TITLE_Y":"AXIS_TITLE_X"];for(At=0;At<Ax;At++){F.applyStyles2DomNode(As[At],Aw);}},updateRowValueBackground:function(){var As=this.domRowHeader.childNodes,At,Av=As.length,Au=this.HTML5PROPS.RH_BK;for(At=0;At<Av;At++){F.applyStyles2DomNode(As[At],Au);}if(this.GMController.metricNamesOnRowMetricsOnXAxis){F.applyStyles2DomNode(this.domYAxis,Au);}},updateColumnValueBackground:function(){var As=this.domColHeader.childNodes,At,Av=As.length,Au=this.HTML5PROPS.CH_BK;for(At=0;At<Av;At++){if(At===Av-1&&this.colHeaderExtraH>0&&!this.GMController.metricNamesOnColumnMetricsOnYAxis){break;}F.applyStyles2DomNode(As[At],Au);}},updateMatrixLineStyle:function(Aw,Av){var As=this.domNode.querySelectorAll(Aw),At,Au,Ax=As.length;for(Au=0;Au<Ax;Au++){At=As[Au].firstChild;F.applyStyles2DomNode(At,Av);}},updateOriginLineStyle:function(Az,A2,A1,Au){var At=this.domNode.querySelectorAll(A1),Ay,Av=At.length,Aw,As,Ax,A0;if(Az.indexOf("Clr")>=0){Aw=Ar.decodeColor(Au);for(Ay=0;Ay<Av;Ay++){if(At[Ay].getAttribute("subtype")===A2){At[Ay].style.stroke=Aw;}}}else{if(Az.indexOf("CmbStyle")>=0){As=AM(Au);Ax=As.thk;A0=As.ceLnStyle;if(A0===Aq.LS_DOT){A0="1 1";}else{if(A0===Aq.LS_DASH){A0="3 1";}else{A0="";}}for(Ay=0;Ay<Av;Ay++){if(At[Ay].getAttribute("subtype")===A2){At[Ay].style.strokeDasharray=A0;At[Ay].style.strokeWidth=Ax;}}}}},updateTrdAndRefLineStyle:function(A1,At,Az){var Au=At.modifiedPropertyKeys[0],As=this.domNode.querySelectorAll(A1),Ay,Av=As.length,Aw,Ax,A0,A2=Az.key;if(Au===AQ.TREND_REF_LINE_COLOR){Aw=Ar.decodeColor(At.jsonObj[Au]);for(Ay=0;Ay<Av;Ay++){if(A2===As[Ay].identity.tlOpt.key){As[Ay].style.stroke=Aw;}}}else{if(Au===AQ.TREND_REF_LINE_COMBINED_STYLE){Ax=At.jsonObj[AQ.TREND_REF_LINE_THICKNESS];A0=At.jsonObj[AQ.TREND_REF_LINE_STYLE];if(A0===Aq.LS_DOT){A0="1 1";}else{if(A0===Aq.LS_DASH){A0="3 1";}else{A0="";}}for(Ay=0;Ay<Av;Ay++){if(A2===As[Ay].identity.tlOpt.key){As[Ay].style.strokeDasharray=A0;As[Ay].style.strokeWidth=Ax;}}}}},updateAxisLabelFontStyle:function(Au,Av){var At=this.manager,As=this.GMController;if(Au==="yaxis"){At.updateSubSetOfVSlaves("axis",As.metricNamesOnRowMetricsOnXAxis);}else{if(Au==="xaxis"){At.updateSubSetOfHSlaves("axis",As.metricNamesOnColumnMetricsOnYAxis);}else{At.updateSubSetOfVSlaves("axis",As.metricNamesOnRowMetricsOnXAxis);At.updateSubSetOfHSlaves("axis",As.metricNamesOnColumnMetricsOnYAxis);}}this.updateChartFontStyle(Av,B.GM_ORIGIN_LABEL);},updateChartFontStyle:function(A0,A2,Au){var Ay,As,A3,Ax,A4,Aw,A1,Az,A6,At=this.domNode.querySelectorAll(".gm-chart .gm-tspan"),Av=At.length,A5=this.HTML5PROPS;switch(A2){case B.GM_ORIGIN_LABEL:if(A0.indexOf("FntClr")>=0){Aw={p:"fill",v:A5.AXIS_LABEL_X.color};A1={p:"fill",v:A5.AXIS_LABEL_Y.color};}else{if(A0.indexOf("FntStyle")>=0){Aw={p:"textDecoration",v:A5.AXIS_LABEL_X.textDecoration||"none"};A1={p:"textDecoration",v:A5.AXIS_LABEL_Y.textDecoration||"none"};}}break;case B.GM_DATA_LABEL:case"all-text":Aw=this.getPropValue(A0,Au);break;case B.GM_REF_LABEL:if(Au.opt){As=Au.opt.key;A0=Au.modifiedPropertyKeys[0];Au=Au.jsonObj[A0];}else{Au=U(A0,Au);}Aw=this.getPropValue(A0,Au);break;default:break;}for(Ay=0;Ay<Av;Ay++){Ax=At[Ay].getAttribute("type");if(A2==="all-text"){A4=At[Ay].parentNode.style;A4[Aw.p]=Aw.v;}else{if(Ax&&Ax.indexOf(A2)>=0){A4=At[Ay].parentNode.style;switch(A2){case B.GM_ORIGIN_LABEL:if(Ax.indexOf("v")>=0){A4[Aw.p]=Aw.v;}else{A4[A1.p]=A1.v;}break;case B.GM_DATA_LABEL:A4[Aw.p]=Aw.v;break;case B.GM_REF_LABEL:if(As){Az=At[Ay].parentNode;if(Az){A6=Az.identity;}if(A6&&A6.tlOpt){A3=A6.tlOpt.key;}if(A3===As){A4[Aw.p]=Aw.v;}}else{A4[Aw.p]=Aw.v;}break;default:break;}}}}},getPropValue:function(As,At){var Au;if(As.indexOf("FntClr")>=0){Au=Ar.decodeColor(At);return{p:"fill",v:Au};}if(As.indexOf("FntStyle")>=0){if((At&8)&&(At&4)){Au="line-through underline";}else{if(At&8){Au="line-through";}else{if(At&4){Au="underline";}else{Au="none";}}}return{p:"textDecoration",v:Au};}},updateCharts:function(){var As=this.manager.master;As.clearCharts();As.updateCharts();this.updateSelections();},updateAxisAndCharts:function(Au){var At=this.manager,As=this.GMController;if(Au!==AQ.BANDING){this.hCalcRadiusAndMargin(true);}At.updateSubSetOfVSlaves("axis",As.metricNamesOnRowMetricsOnXAxis);At.updateSubSetOfHSlaves("axis",As.metricNamesOnColumnMetricsOnYAxis);if(Au===AQ.AXIS_ORIGIN){var Av=this.HTML5PROPS;this.hPlaceHGridLines(Av.GRID_LINE_MAJOR,Av.GRID_LINE_MINOR);this.hPlaceVGridLines(Av.GRID_LINE_MAJOR,Av.GRID_LINE_MINOR);}this.updateCharts();},legendPartialUpdate:function(Av,As){var Au=true,At,Aw=this.HTML5PROPS;if(!this.legend){this.hInitLegend();}At=this.legend;if(Av===o.LEGEND_FONT_STYLE){Au=As;}else{if((Av===o.LEGEND_BG_COLOR)||(Av===o.LEGEND_FONT_COLOR)||(Av===o.LEGEND_BG_FILL_TRANSPARENCY)){Au=false;}}At.updateStyle(Aw.LEGEND);if(Au){At.updateTitleLineHeight(Aw.LEGEND);this.onControlResized(false,true,false,true);At.updateAfterResize();At.updateSplitter();}},getLegendDockPosIdx:function(Au){var As,At=z.length;for(As=0;As<At;As++){if(Au===z[As].pos){return As;}}return -1;},makeDefaultsObjectAtOption:function(At){var As,Au=this.getDefaultProperties();if(W.indexOf(At)>=0){switch(At){case AQ.METRIC_SHAPES:As=this.getWidgetPropertyValue(AQ.SHAPE);break;case AQ.LOG_SCALE:break;case AQ.METRIC_LEVEL_DATA_LABEL:As=false;break;case AQ.TREND_LINE_DEF:As={};As[AQ.TREND_TYPE]=An.EnumTrendLineModelType.BEST_FIT;As[AQ.TREND_LEVEL]=An.EnumTrendRefLevel.DssModelLevelPerCell;As[AQ.TREND_ENABLED]=false;As[AQ.TREND_INCLUDE_BREAK_BY]=!!this.getChartInfo().isABL;[AQ.TREND_POLY_DEGREE,AQ.TREND_REF_LINE_THICKNESS,AQ.TREND_REF_LINE_COLOR,AQ.TREND_REF_LINE_STYLE].forEach(function(Av){As[Av]=Au[Av];});break;case AQ.TREND_BUBBLE_FORE_DEF:As={};As[AQ.TREND_BUBBLE_FORE_FWD]=987654321;As[AQ.TREND_BUBBLE_FORE_BWD]=-987654321;As[AQ.TREND_BUBBLE_FORE_ENABLED]=false;break;case AQ.REF_LINE_DEF:As={};As[AQ.REF_TYPE]=t.AVG;As[AQ.REF_ENABLED]=false;As[AQ.REF_SHOW_LABEL]=true;As[AQ.REF_LABEL_TYPE]=AJ.DssModelLabelsType|AJ.DssModelLabelsValue;As[AQ.REF_LEVEL]=An.EnumTrendRefLevel.DssModelLevelPerCell;[AQ.TREND_REF_LINE_THICKNESS,AQ.TREND_REF_LINE_COLOR,AQ.TREND_REF_LINE_STYLE,o.REF_LABELS_FONT_FAMILY,o.REF_LABELS_FONT_SIZE,o.REF_LABELS_FONT_STYLE,o.REF_LABELS_FONT_COLOR].forEach(function(Av){As[Av]=Au[Av];});As[AQ.TREND_REF_LINE_STYLE]=1;break;case AQ.AXIS_ORIGIN:As={};As[AQ.AXIS_ORIGIN_AUTO]=true;As[AQ.AXIS_ORIGIN_VALUE]=0;break;case AQ.FORMATS_ON_COMBINATION:break;case o.ALL_SHAPE_FORMAT:break;}}else{F.visPrint(At+"is not in COMPLEX_PROPERTY object! Add it in if it is complex property");}return As;},createAxisOriginObject:function(){var As={},Au=this,Av=AQ.AXIS_ORIGIN,At=this.getNumericAxisOptions(false);At.forEach(function(Aw){As[Aw.key]=Au.makeDefaultsObjectAtOption(Av);});if(As.AllMetrics===undefined){As.AllMetrics=this.makeDefaultsObjectAtOption(Av);}return As;},getPropertiesOfFormatable:function(){var A0=this,A2=A0.getDocModel(),Av,Au=this.curSelOptLvl,Ay,A1=this.arrayOfComb,At,Ax;if(this.interactor.fmtState===Ak.PER_COLORBY){Ay=this.interactor.getColorByIdentities();Av=true;}else{Ay=this.interactor.getBreakByIdentities();}At=y.call(this,Au,Ay,A1);if(Av&&A1&&A1[0]){var A3=[],As=[];Q.forEach(A1[0],function(A4){A3.push(A4.tid);As.push(A4.eid);});if(As.length>0){var Aw=A2.getColorBy(A3,As);At[o.SHAPE_LINE_COLOR]=At[o.SHAPE_FILL_COLOR]=Aw.color;At[o.SHAPE_FILL_COLOR_DEFAULT]=!Aw.isManual;At[o.SHAPE_LINE_COLOR+g]=!Aw.isManual;}}var Az=At[o.SHAPE_FILL_COLOR];if(At[o.LINE_MARKER_COLOR]===undefined){At[o.LINE_MARKER_COLOR]=Az;At[o.LINE_MARKER_COLOR+g]=true;}else{At[o.LINE_MARKER_COLOR+g]=false;}if(At[o.LINE_MARKER_BORDER_COLOR]===undefined){At[o.LINE_MARKER_BORDER_COLOR]=Az;At[o.LINE_MARKER_BORDER_COLOR+g]=true;}else{At[o.LINE_MARKER_BORDER_COLOR+g]=false;}if(At[o.SHAPE_BORDER_COLOR]===undefined){At[o.SHAPE_BORDER_COLOR]=Az;At[o.SHAPE_BORDER_COLOR+g]=true;}else{At[o.SHAPE_BORDER_COLOR+g]=false;}AB.call(this,At);if(Au===K.ALL_SHAPE||Au===K.METRIC){Ax=Y.clone(At);this.updateConflictShapeFormat(Ax,Au);return AG(Ax);}return AG(At);},updateConflictShapeFormat:function(Az,Av){var At=this.getStyleEffectsOptions(),Ax,Aw,Ay=this,Au=this.arrayOfComb&&this.arrayOfComb[0],As={};Q.forEach(At,function(A0){Ax=A0.optLvl;if(Ax===K.METRIC&&Av===K.ALL_SHAPE){Aw=y.call(Ay,Ax,undefined,[A0.comb]);w(Aw,As);}else{if(Ax===K.COLOR_BY){Q.forEach(A0.subOptions,function(A1){if(!A1.key||A1.key!=="multiple"){if(Av===K.ALL_SHAPE||(Av===K.METRIC&&u(A1.comb,Au))){Aw=y.call(Ay,Ax,undefined,[A1.comb]);w(Aw,As);}}});}}});AU(As,Az);},writeFormatableProperties:function(A6){var A5,As,A7,BF,A4,BA,Ay,A0,BG=this,BE=this.GMController,A8=BE.model,BI=this.identity,A9=A6.jsonObj,Az=A6.modifiedPropertyKeys,BH=true,Ax=Az.indexOf(o.SHAPE_FILL_COLOR),BB=Az.indexOf(o.SHAPE_LINE_COLOR),Au=true;if(Ax>-1||BB>-1){BH=false;if(!BE.hasColorBy()){BG.writeGlobalProperty(o.MODIFIED_DEF_FILL_COLOR,A9[Az[0]]);return ;}}if(!BI){return ;}A5=BI.objType;if(A5===AW.SHAPE_COLLECTION){var A2,At=this.curSelOptLvl,Aw=this.arrayOfComb;if(this.interactor.fmtState===Ak.PER_COLORBY){A2=this.interactor.getColorByIdentities();}else{A2=this.interactor.getBreakByIdentities();}Az.forEach(function(BO){if(BO.indexOf("CmbStyle")!==-1){var BM=BO.replace("CmbStyle","Thk"),BK=BO.replace("CmbStyle","Style"),BL=AM(A9[BO]),BJ=BL.thk,BN=BL.ceLnStyle;A6.setProperty(BM,BJ);A6.setProperty(BK,BN);}});if(At===K.ALL_SHAPE){A0=o.ALL_SHAPE_FORMAT;BA=this.getWidgetPropertyValue(A0);BG.mergeModifiedFormatsForSingleShape(undefined,At,A6);}else{if(At===K.COLOR_BY||At===K.METRIC||At===K.ITSELF){A0=AQ.FORMATS_ON_COMBINATION;BA=this.getWidgetPropertyValue(A0);Q.forEach(Aw,function(BJ){if(Az[0]!==o.SHAPE_FILL_COLOR&&Az[0]!==o.SHAPE_LINE_COLOR){BG.mergeModifiedFormatsForSingleShape(BJ,At,A6);}});}}Ay=this.getWidgetPropertyValue(A0);if(At!==K.ALL_SHAPE&&Az){if(Aw){if(A8.colorType===p.ATT){Au=false;}A7=BE.getColorByAttrsID();As=R(Aw,A7,Au);}else{As=this.collectUniqueCombination(A2,K.COLOR_BY);}if(Ax>=0||BB>=0){BF=Az[Ax>=0?Ax:BB];A4=A6.jsonObj[BF];}}}if(!BH){this.updateColorByMap(As,A4);}else{var BD=this.id,A3=Az[0],Av=function(){BG.GMController.clearShapeFormatsCache();BG.partialUpdate(A3,{allVal:A6},true);BG.raiseEventShapeFormattingChanged(A3);},A1=function(BJ){var BK=j.all[BD];if(A0===AQ.FORMATS_ON_COMBINATION){BK.GMController[A0]=Y.clone(BJ);}BK.setWidgetPropertyValue(A0,BJ);Av();},BC={undo:function(){A1(BA);},redo:function(){A1(Ay);}};Av();this.submitUpdatesAndPersistXML(undefined,undefined,BC,true);}},mergeModifiedFormatsForSingleShape:function(Au,Aw,As){var At,Av,Ax=this.GMController;if(Aw===K.ALL_SHAPE){At=o.ALL_SHAPE_FORMAT;Av=this.getWidgetPropertyValue(At);if(Av===undefined){Av={};}AN(Av,As);this.setWidgetPropertyValue(At,Av);}else{Av=Ax.getShapeFormatsWithCombination(Au);if(Av===undefined){Av={};}AN(Av,As);Ax.setShapeFormatsWithCombination(Au,Av);}},collectUniqueCombination:function(At,Aw){var Ax={},Au,Av,As=[];Q.forEach(At,function(Ay){if(Aw===K.ITSELF){Au=Ay.getSelectedObjectLowestLevel(true);}else{if(Aw===K.COLOR_BY){Au=Ay.getSelectedObjectColorByInfo();}else{if(Aw===K.METRIC){Au=Ay.getSelectedObjectMetricInfo();}}}Av=Ar.serializeCombination(Au);if(Ax[Av]===undefined){Ax[Av]=true;As.push(Au);}});return As;},getTrendRefInfo:function(As){return AX(As);},changeShapeProperty:function v(At,Au){var As=this;if(this.syning){return ;}As.setWidgetPropertyValue(At,Au.jsonObj||Au);},updateColorByMap:function(Ay,Au){var At=JSON.stringify({color:Au}),As=this.getDocModel(),Aw=[],Ax=As.getUpdateColorMapCallback(),Av=F.getUpdateColorMapAction.bind(this);Q.forEach(Ay,function(Az){Aw.push(Av(Az,At));});this.submitUpdatesAndPersistXML(Aw,Ax,undefined,false,true);if(this.forceUpdateColorMap){if(Ax.success&&Aw.length>0){Ax.success({defn:{epm:Aw[0].epm}});}}},checkCustomScale:function(At){var Au=false,As=this.getWidgetPropertyValue(AQ.AXIS_SCALE_DATA);Q.forEach(As||[],function(Aw){if(Aw.length>1){if(Aw[0]===At){var Av=parseInt(Aw[1],10);if(Av===s.CUSTOM){Au=true;return false;}}}});return Au;},abandonCustomAxisScale:function(){if(this.GMController.hasCustomOnAxis()){this.setWidgetPropertyValue(AQ.AXIS_SCALE,s.GLOBAL);}},absorbAxisOrigin:function(){var As=this.getWidgetPropertyValue(AQ.AXIS_ORIGIN),At=this.createAxisOriginObject();if(As){Y.forEach(At,function(Aw,Ax){if(As[Ax]){At[Ax]=As[Ax];}});}var Au=true;var Av=null;Y.forEach(At,function(Aw,Ax){if(Ax!=="AllMetrics"){Au=Au&&Aw.axOriAuto;if(Av===null){Av=Aw.axOriValue;}else{if(Av!==undefined){if(Av!==Aw.axOriValue){Av=undefined;}}}}});At.AllMetrics={axOriAuto:Au,axOriValue:Av};this.setWidgetPropertyValue(AQ.AXIS_ORIGIN,At);},resetAxisOrigin:function(){this.removeWidgetProperty(AQ.AXIS_ORIGIN);},clearChartScale:function(){this.removeWidgetProperty(AQ.SCALE_CHART_WIDTH);this.removeWidgetProperty(AQ.SCALE_CHART_HEIGHT);},persistOnTheFlyShape:function(Ay){var Ax=this.GMController,Au=Ax.model,Av=Au.getMetricIDsFromIndex([Ay])[0],Aw=Ax.getResolvedShapeForMetric(Ay),As=Ax.getOnTheFlyShapeForMetric(Ay);if(Aw!==As){var At=this.readGlobalProperty(AQ.METRIC_SHAPES);At.setProperty(Av,As);this.setWidgetPropertyValue(AQ.METRIC_SHAPES,At.jsonObj);}},updateMetricShape:function(Av){var As=this.readGlobalProperty(AQ.METRIC_SHAPES),At=Av.did,Au=As.jsonObj,Aw=false;if(As!==undefined&&Au.hasOwnProperty(At)){delete Au[At];delete Au[At+AS];Aw=true;}if(Aw){this.setWidgetPropertyValue(AQ.METRIC_SHAPES,Au);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.hash","mstrmojo.VisBase","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.VisTooltip","mstrmojo.VisSplitter","mstrmojo.VisAxisLabel","mstrmojo.gm.TitleLabelCapsule","mstrmojo.MenuButton","mstrmojo.WidgetMatrix","mstrmojo.WidgetMatrixManager","mstrmojo._HasOwnAvatar","mstrmojo._VizSelectionHelper","mstrmojo.vi.ui._IsDropTarget","mstrmojo.gm._SupportDndAsBlackBox","mstrmojo.vi.models.EnumDragSources","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.vi._MonitorsAppState","mstrmojo.chart.enums.EnumLineStyle","mstrmojo.vi.ui.rw._XtabDE","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.chart.common.Utility","mstrmojo.vi.ui.rw.VizBox","mstrmojo.vi.ui.VIDragUnit");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVizStyles","EnumVisualizationTemplates");mstrmojo.requiresClsP("mstrmojo.vi.ui.rw","_HasVisSelections","selectors._IsMultiUnitControl","selectors._BrushesAndHighlights");mstrmojo.requiresClsP("mstrmojo.ui.menus","ToolbarEditorConfig","MenuConfig","_HasMenuPopup");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMLegend","GMLayout","GMContainer","GMController","GMInteractivity","GMProperty","GMPropertyNode","GMPropDefaults","DndItemRenderer","GMAxisScale","GMIdentities","_SupportGraphMatrixBrushesAndHighlights","GMScroll","_GMPropertyHandler");mstrmojo.requiresDescs(12093,12094,12095,12096,12097,12098,12099,12100,12101,12102,12103,12104,13165);var S=true,t=mstrmojo,A2=t.vi.viz,A7=t.gm,A8=t.func.wrapMethods,b=t.array,A5=t.css,AX=t.dom,q=t.num,h=t.hash,U=t.VisUtility,B=A2.EnumDSSDropZones,z=A2.EnumVizStyles,Ay=z.GRAPH_MATRIX,Ax=A2.EnumVisualizationTemplates,BB=A7.GMUtility,AQ=A7.GMUtility.sizeCalculator,c=A7.GMLegend,d=A7.EnumShape,Ac=A7.WidgetPropertyTag,AF=A7.FormatingPropertyTag,l=A7.EnumTRFManipulations,j=150,x=5,C=250,o=0.75,Q=0.2,O=1,A4=1,D=1,AE=1,AU=15,Ae=15,Au=5,AN=1,As=t.vi.models.EnumDragSources,Aw=t.VisEnum.GMLegendDataType,AA=A7.EnumTheme,J=A7.EnumLegendMode,AJ=A7.EnumLegendSlot,AK=A7.EnumGridLines,R=A7.EnumClickType,V=A7.EnumGraphType,An=A7.EnumContextMenu,G=t.VisEnum.ControlType,Ak=A7.EnumDockPosition,Aj=A7.EnumIdentityType,Az=A7.EnumShapeFormatStatus,A9=A7.Enum3DGMapping,W=A7.EnumSelectionOptionLevel,Af="_tmsp",AI=A7.EnumColorByType,AG=A7.EnumFitTo;var N=["mstrmojo.gm.GMProperty","mstrmojo.gm.GMInteractivity","mstrmojo.vi.models.GMDropZones","mstrmojo.vi.models.CombineDropZonesModel","mstrmojo.vi.models.editors.GMEditorModel","mstrmojo.Model","mstrmojo.gm.GMController","mstrmojo.ui.menus.Menu","mstrmojo.ui.menus.ToolbarEditor"];function Ai(){var BD=this.chartResizeListener,BI=this.splitterListeners,BG=this.lassoListener,BE=this.legendResizeListener,BF=this.legendClickListener,BH=this.updateSelectionsListener;if(BD){BD.clear();delete this.chartResizeListener;}if(BI){BI.forEach(function(BJ){BJ.clear();});this.splitterListeners=[];}if(BG){BG.clear();delete this.lassoListener;}if(BE){BE.clear();delete this.legendResizeListener;}if(BF){BF.clear();delete this.legendClickListener;}if(BH){BH.clear();delete this.updateSelectionsListener;}}var Aa=[];function AZ(){var BD=this.GMController,BE=BD.getGraphShapeCount(true);if(BE>10000){j=800;}else{j=150;}}function Av(){var BF,BK,BI=this.GMController,BL=BI.getColTitleInfo(true),BD=this.colHeaderHArr.length,BM=this.HTML5PROPS,BG=BI.getAttributesOnDropZone("Rows").length>0?2:3,BE,BJ;var BH=function(){BJ=this.rowHeaderMaxHeightWithoutX2;BE=U.measureTextHeight("Test Text",BM.RH_TITLE,0,100,undefined,true,true);BJ=Math.max(BJ,BE*BG+2*AN+2*Au);return BI.haveX2?65535:BJ;};this.colHeaderMaxHeightArr=[];for(BF=0;BF<BD;BF++){BK=BL.items[BF].n;BE=U.measureTextHeight(BK,BM.CH_TITLE,0,100,undefined,true,true);BJ=BE*BG+2*AN+2*Au;this.colHeaderMaxHeightArr.push(Math.max(BJ,this.colHeaderHArr[BF]));}this.rowHeaderMaxHeight=BH.call(this);}function AM(BD,BE,BF){BE.clearCachedXMLDoc();BE.updateDefaults(this.getDefaultProperties(),BD);BE.setTemplateObjectMapping(BF);BE.consumeJsonFmt(BD);BE.initFromXML();}function Aq(BF,BG,BI){var BD=BF.gts,BH=true,BE=BI.supportViewFilterPool={};b.forEach(BD.row,function(BJ){var BL=BJ.id,BK;if(BL&&BL!==""){BK=BG.supportsViewFilterActions(BJ.id);if(!BK){BH=false;}BE[BJ.id]=BK;}});b.forEach(BD.col,function(BJ){var BL=BJ.id,BK;if(BL&&BL!==""){BK=BG.supportsViewFilterActions(BJ.id);if(!BK){BH=false;}BE[BJ.id]=BK;}});BI.supportViewFilter=BH;}function k(BP){var BJ=this,BH=this.readGlobalProperty(Ac.METRIC_SHAPES),BO=BP.chartType,BN=(BO===V.AREA||BO===V.BAR||BO===V.LINE),BF=false,BD,BM,BG,BE=false,BI=false,BQ;if(!BN||BH===undefined){BF=false;}else{var BL=BP.model;BQ=BH.jsonObj;BM=BP.getMetricsOnYAxis();BM=BM.concat(BP.getMetricsOnXAxis());BD=BL.getMetricIDsFromIndex(BM);b.forEach(BD,function(BR){if(BQ[BR]!==undefined){BF=true;}});b.forEach(BM,function(BR){if(BP.getForbiddenShapeForMetric(BR).length>0){BF=true;BJ.persistOnTheFlyShape(BR);}});BE=true;BI=false;var BK=BP.metricShapeArr=[];b.forEach(BM,function(BR){BG=BP.getOnTheFlyShapeForMetric(BR);BK[BR]=BG;if(BG!==d.AREA){BE=false;}if(BG===d.BAR){BI=true;}});}BP.enableCombiChart=BF;BP.hasBarChart=BI;BP.pureAreaChart=BE;}function AY(BF){var BD=BF.dz;if(!BD){BD=BF.dz={};}var BE=["Rows","Columns","XAxis","YAxis","BreakBy","ColorBy","SizeBy","SliceBy","AdditionalMetrics","AngleBy","visProp"];b.forEach(BE,function(BG){if(!BD[BG]){BD[BG]={};}});if(!BD.visProp.fmt){BD.visProp.fmt={};}}function w(BP){var BD=this.GMController,BX=BD.getChartInfo();if(BX.isBubbleOrScatter){var BS=BP.selectedCharts,BM,BG,BT,BH,BL,BW,BI,BJ,BU,BO,BE,BZ,BN=this.masterViewer,BR,BQ;var BF=function(Bd,Bc,Bf,Be,Bb,Ba){return Bb>=Bd&&Bb<=Bc&&Ba>=Bf&&Ba<=Be;},BY=function(Bb,Ba,Bd,Bc){return(Bd-Bb)*(Bd-Bb)+(Bc-Ba)*(Bc-Ba);};var BK=function(Bk,Bl,Bj){var Bf=Bl.BoundingBox.x,Be=Bl.BoundingBox.y,Bb=Bl.Size,Bh=Bk.offsetLeft,Bg=Bk.offsetTop,Bi=Bk.offsetWidth,Ba=Bk.offsetHeight,Bd=Bj.left,Bn=Bj.top,Bc=Bd+Bj.width,Bm=Bn+Bj.height;Bd=Math.max(Bd-Bh,0);Bc=Math.min(Bc-Bh,Bi);Bn=Math.max(Bn-Bg,0);Bm=Math.min(Bm-Bg,Ba);return BY(Bf,Be,Bd,Bn)<Bb*Bb||BY(Bf,Be,Bd,Bm)<Bb*Bb||BY(Bf,Be,Bc,Bn)<Bb*Bb||BY(Bf,Be,Bc,Bm)<Bb*Bb||BF(Bd-Bb,Bc+Bb,Bn,Bm,Bf,Be)||BF(Bd,Bc,Bn-Bb,Bm+Bb,Bf,Be);};var BV=BS?BS.length:0;for(BR=0;BR<BV;BR++){BM=BS[BR];BU=BM.row;BO=BM.col;BG=BN.getChart(BU,BO);BW=BD.getDataProvider(BU,BO);BT=BG&&BG.hiddenItems;BL=BT?BT.length:0;for(BQ=0;BQ<BL;BQ++){BH=BT[BQ];BE=BH.Id.mGroupId;BZ=BH.Id.mSeriesId;if(BK(BG,BH,BP)){BI=BW.getGraphCell(BZ,BE).getIdentity();BJ=this.interactor.getShapeSelectionInfo(BI);this.addMetricValueSelection(BJ);}}}}}function g(BF,BI,BG){var BP=BI.firstChild,BU=BG.firstChild,BH=BP?BP.offsetWidth:0,BE=BP?BP.offsetHeight:0,BJ=BU?BU.offsetWidth:0,BR=BU?BU.offsetHeight:0,BQ=document.body.offsetWidth,BM=document.body.offsetHeight,BL=10,BT=5,BV=5;if(BP){BP.style.left="0";BP.style.right="auto";BP.style.top="0";BP.style.bottom="auto";}if(BU){BU.style.left="0";BU.style.right="auto";BU.style.top="0";BU.style.bottom="auto";}var BD={w:Math.max(BH,BJ),h:0};var BN=BE>0,BO=BR>0;if(BN&&BO){BD.h=BE+BR+BL;}else{if(BN){BD.h=BE;}else{if(BO){BD.h=BR;}else{return false;}}}if(BN){BI.style.left=BF.x+"px";BI.style.top=BF.y-BE-BL/2+"px";}if(BO){BG.style.left=BF.x+"px";BG.style.top=BF.y+BL/2+"px";}if(BF.x+BD.w>BQ){BI.style.left=BF.x-BH+"px";BG.style.left=BF.x-BJ+"px";}if(BN){var BK=0;if(BF.y-BE-BL/2<BT){BK=BT;BI.style.top=BK+"px";BG.style.top=BK+BE+BL+"px";}else{if(BF.y+BL/2+BR>BM){BK=Math.max(BM-BR-BL-BE,BT);BI.style.top=BK+"px";BG.style.top=BK+BE+BL+"px";}}}else{if(BO){var BS=0;if(BF.y+BL/2+BR>BM){BS=Math.max(BM-BV-BR,BT);BG.style.top=BS+"px";}}}}function AD(BK,BJ,BL){var BF=AX.position(BL),BH=BF.x,BN=BF.x+BF.w,BE=BF.y+BF.h,BM=false,BI,BD;b.forEach(BJ||[],function(BQ){var BP=AX.position(BQ),BT=BP.x,BR=BP.x+BP.w,BO=BP.y,BV={xLeft:Math.max(BT,BH),xRight:Math.min(BR,BN),yTop:BE,yBottom:BO},BU=BK.pageX,BS=BK.pageY;BM=BU>=BV.xLeft&&BU<=BV.xRight&&BS>=BV.yTop&&BS<=BV.yBottom;return !BM;});if(BM&&BK.target&&BK.target.getAttribute("type")==="marker"){BI=BK.target.getAttribute("class");BD="no-hover-"+BI;BK.target.setAttribute("class",BD);BK.target.setAttribute("type","no-hover-marker");Aa.push(BK.target);}else{var BG=[];b.forEach(Aa,function(BO){BD=BO.getAttribute("class");BI=BD.substring(9);if(BO===BK.target&&BM){BG.push(BO);}else{BO.setAttribute("class",BI);BO.setAttribute("type","marker");}});Aa=BG;}return BM;}function Ab(BD){var BF=this.GMController,BG=BF.getChartInfo(),BE;if(BG.isABL){BE=0;}else{if(BG.isBubbleOrScatter){BE=1;}else{BE=2;}}if(BD||(this.lastChartType!==undefined&&BE!==this.lastChartType)){this.raiseEvent({name:"regenerateToolbar"});}this.lastChartType=BE;}function AC(){return{success:function BD(){this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}function Ap(BF,BD,BG){var BE=new mstrmojo.ui.editors.controls.CharacterGroup(BF);BE.setFormatSource(BD);if(BG!=="undefined"){BE.fontColor.showNoFill=BG;}return BE;}function u(BI){var BF=this,BG,BH,BE,BD;BG=BF.parent.boxContent;BD=BG.model.docModel;BH=BG.fmts.ttl;BE=BG.getFontToolbarProps();if(BE.onGroupValueChange===undefined){BE.onGroupValueChange=function(BJ,BL,BK){BD.changeUnitFormatProperty(BF.parent,[{formatType:2,propertyName:BJ,newValue:BL,oldValue:BK}]);};}return Ap(BE,BH,BI);}function f(BE){var BD=this;return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[u.call(BD,BE)]}]});}function A1(BD){return mstrmojo.hash.copy(BD,{act:"operateTRFLine",tks:this.k,partialRetrieval:this.model.getDataService().newRetrievalKeysConfig().addNode(this.k)});}function v(BF,BD){var BE=this.readGlobalProperty(Ac.METRIC_LEVEL_DATA_LABEL);BE.setProperty(BF,BD);this.writeGlobalProperty(Ac.METRIC_LEVEL_DATA_LABEL,BE,undefined);}function Ao(BD){return BD.model.controller.cmdMgr;}function Z(BD){return{act:"setProperty",nodeKey:this.getData().k,prs:"FormattingWidget",pri:4,v:BB.replaceSpecialChars(BD)};}function AP(BH,BG,BE){var BJ,BD,BI="block",BF=BH.style;for(BJ in BG){if(BG.hasOwnProperty(BJ)){BD=BG[BJ];if((typeof BD)==="number"){if((BJ==="width"||BJ==="height")&&BD===0){BI="none";}BD+="px";}BF[BJ]=BD;}}BF.backgroundColor="rgba(0,0,0,0)";if(!BE&&!BG.hasOwnProperty("display")){BF.display=BI;}}function e(BH,BV,BG){var BS,BL,BJ=1-Q,BQ=this.GMInfo,BP=BQ.yAxisWidth,BE=BQ.yAxis2Width,BK=BQ.xAxisHeight,BR=BQ.xAxis2Height,BM=this.getWidth(),BT=this.getHeight(),BN=this.rowHeaderW,BO=this.colHeaderH,BU=this.actualWidth,BI=this.actualHeight,BD=(BG&&BG.min!==undefined)?BG.min:20,BF=(BG&&BG.max!==undefined)?BG.max:65535;if(BH===G.GM_YAXIS){return{size:BP,min:BD,max:Math.min(BF,Math.floor(BM*BJ-BN-BE))};}if(BH===G.GM_YAXIS2){return{size:BE,min:BD,max:Math.min(BF,Math.floor(BM*BJ-BN-BP))};}if(BH===G.GM_XAXIS){return{size:BK,min:BD,max:Math.min(BF,Math.floor(BT*BJ-BO-BR))};}if(BH===G.GM_XAXIS2){return{size:BR,min:BD,max:Math.min(BF,Math.floor(BT*BJ-BO-BK))};}BS=this.rowHeaderWArr[BV];if(BH===G.GM_V_MATRIX_LINE){return{size:BS,min:BD,max:Math.min(BF,Math.floor(BM*BJ-BP-BE-BN+BS))};}BS=this.colHeaderHArr[BV];if(BH===G.GM_H_MATRIX_LINE){return{size:BS,min:BD,max:Math.min(BF,Math.floor(BT*BJ-BK-BR-BO+BS))};}BL=this.manager;if(BH===G.GM_V_CHART_LINE){return{size:BL.getColWidth(BV),min:BD,max:BF};}if(BH===G.GM_H_CHART_LINE){return{size:BL.getRowHeight(BV),min:BD,max:BF};}if(BH===G.GM_V_EXTRA_LINE){return{size:this.rowHeaderExtraW,min:BD,max:Math.min(BF,Math.floor(BM*BJ))};}BS=BU-BP-BE-BN;if(BH===G.GM_RIGHT_BORDER){return{size:BS,min:BD,max:Math.min(BF,Math.floor(BM-BP-BE-BN))};}BS=BI-BK-BR-BO;if(BH===G.GM_BOTTOM_BORDER){return{size:BS,min:BD,max:Math.min(BF,Math.floor(BT-BK-BR-BO))};}}function A3(BF,BE){var BG=!BE?this.getDependentMetricOptions():this.getIndependentMetricOptions(),BD;BG.forEach(function(BH){if(BF===BH.key){BD=BH;}});return BD;}function M(BD){var BF=this.getReferenceAxisOption(),BE;BF.forEach(function(BG){if(BG.key===BD){BE=BG;return false;}});return BE;}function AH(BE,BD){var BF;if(BE&&BD){BE.style.display="none";BF=document.elementFromPoint(BD.pageX,BD.pageY);BE.style.display="block";}return BF||BE;}function AS(BK,BI){var BF=this.scrollNode;if(!BF){return ;}var BL=BF.xPos=BF.xPos||0,BJ=BF.yPos=BF.yPos||0,BH=BF.xPos+BI.deltaX,BG=BF.yPos+BI.deltaY,BE=BF.offsetWidth-BF.parentNode.offsetWidth,BD=BF.offsetHeight-BF.parentNode.offsetHeight;BG=(BG<0)?0:BG;BG=(BG>BD)?BD:BG;BH=(BH<0)?0:BH;BH=(BH>BE)?BE:BH;if(BJ===BG&&BL===BH){return ;}switch(BK){case"v":BJ=BF.yPos=BG;break;case"h":BL=BF.xPos=BH;break;default:BJ=BF.yPos=BG;BL=BF.xPos=BH;}BF.style[AX.CSS3_TRANSFORM]=AX.createTranslateString(-BL,-BJ,0);this.onscroll();}function AR(BF){var BE=BF.target||BF.srcElement,BD=BE.getAttribute("ctrlType");if(BD===G.GM_CHART_ROW||BD===G.GM_CHART_COL){AS.call(this,"both",BF);}}mstrmojo.gm.VisGraphMatrix=mstrmojo.declare(mstrmojo.VisBase,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.gm._SupportDndAsBlackBox,mstrmojo._VizSelectionHelper,mstrmojo.vi.ui.rw._HasVisSelections,mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl,mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights,mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights,mstrmojo.vi._MonitorsAppState,mstrmojo.vi.ui.rw._XtabDE,mstrmojo.gm._GMPropertyHandler],{scriptClass:"mstrmojo.gm.VisGraphMatrix",cssClass:"gm-light-theme",menuCssClass:"gm-context-menu-light",theme:AA.LIGHT,noData:false,zIndex:1,sBarWidth:11,textHeightInX:20,textHeightInY:20,lines:null,masterViewer:undefined,slaveRowHeaders:[],slaveColHeaders:[],slaveYAxis:undefined,slaveYAxis2:undefined,slaveXAxis:undefined,slaveXAxis2:undefined,manager:undefined,chartResizeListener:undefined,splitterListeners:undefined,lassoListener:undefined,updateSelectionsListener:undefined,interactor:undefined,mousePos:undefined,layouter:mstrmojo.gm.GMLayout,svgPool:[],normalizedIdCache:{},formattingMode:false,enableTooltip:true,enableShapeHover:true,curSelOptLvl:undefined,enableCETimer:false,initFlagForContextMenu:true,preClickType:R.NONE,trendLineNotifications:null,referencefLineNotifications:null,handleDndForParentNode:true,avatarCssClass:"mstrmojo-VIUnitList",mainContainerNode:"domMainContainer",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px; position:absolute; height:{@height}px; left:{@left}px; top:{@top}px; z-index:{@zIndex};" mstrAttach:click,scroll,mouseover,mousemove,mouseout,mousedown,mouseup,contextmenu><div class="gm-main-container"><div class="gm-tableheader"></div><div class="gm-colheader"></div><div class="gm-rowheader"></div><div class="gm-yaxis"></div><div class="gm-container"></div><div class="gm-yaxis"></div><div></div><div class="gm-xaxis"></div><div></div><div class="gm-dummy-a"></div><div class="gm-dummy-b"></div></div><div class="gm-legend"></div><div class="gm-message"></div></div>',markupSlots:{domMainContainer:function(){return this.domNode.firstChild;},domTabHeader:function(){return this.domNode.firstChild.childNodes[0];},domColHeader:function(){return this.domNode.firstChild.childNodes[1];},domRowHeader:function(){return this.domNode.firstChild.childNodes[2];},domYAxis:function(){return this.domNode.firstChild.childNodes[3];},domGM:function(){return this.domNode.firstChild.childNodes[4];},domYAxis2:function(){return this.domNode.firstChild.childNodes[5];},domVSBar:function(){return this.domNode.firstChild.childNodes[6];},domXAxis:function(){return this.domNode.firstChild.childNodes[7];},domHSBar:function(){return this.domNode.firstChild.childNodes[8];},domDummyA:function(){return this.domNode.firstChild.childNodes[9];},domDummyB:function(){return this.domNode.firstChild.childNodes[10];},domLegend:function(){return this.domNode.childNodes[1];},domMessage:function(){return this.domNode.childNodes[2];}},init:function(BD){this.lines={axes:{},borders:{},vlines:{},hlines:{},rows:[],cols:[],hMajorGridLines:[],hMinorGridLines:[],vMajorGridLines:[],vMinorGridLines:[],axisSplitters:{}};this.HTML5PROPS={};this._super(BD);this.property=this.addDisposable(new A7.GMProperty());this.interactor=this.addDisposable(new A7.GMInteractivity({widget:this,fmtMode:this.formattingMode}));this.initFlagForContextMenu=true;this.trendLineNotifications=[];this.referencefLineNotifications=[];this.splitterListeners=[];this.enableDomDommy=false;},onAppStateChange:function Ah(BD){this._super(BD);this.closePopup();},getContainerMenuItems:function(BE){if(!this.noData){var BF=this.getMenuHandler("changeGlobalShape");if(BF){BE.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",this.id,BF);}}var BD=this.getMenuHandler("debug");if(BD){}},raiseEventCMSelection:function(BD,BE){var BF={name:"onContextMenuSelection",identityType:BD};if(BE!==undefined){BF.metricId=BE;}this.raiseEvent(BF);return BF;},raiseEventFormatableChanged:function(BD,BG,BE){if(BD===undefined&&BG===undefined&&BE===undefined){this.raiseEvent(this.lastFormatableChangedObj);return this.lastFormatableChangedObj;}var BF={name:"formattingObjectChanged",identity:BD};BF.selectionlevel=BG;if(BE){BF.arrayOfComb=BE;}this.identity=BD;this.curSelOptLvl=BG;this.arrayOfComb=BE;this.raiseEvent(BF);this.lastFormatableChangedObj=BF;return BF;},raiseEventGlobalPropertyChanged:function(BF,BE,BD){var BG={name:"propertyChanged",n:BF,opt:BD,v:BE};this.raiseEvent(BG);return BG;},raiseEventOnFormattingIdentity:function(BD){if(this.formattingMode){var BE={name:"nonShapeFormatableChanged",identities:BD};this.raiseEvent(BE);return BE;}},raiseEventOnNonFormattingIdentity:function(BD){var BE={name:"nonShapeFormatableChanged",identities:BD};this.raiseEvent(BE);return BE;},raiseEventShapeFormattingChanged:function(BD){var BE=this.getPropertiesOfFormatable();BE.modifiedPropertyKeys=[BD];if(BD===AF.SHAPE_FILL_COLOR){BE.modifiedPropertyKeys.push(AF.SHAPE_BORDER_COLOR);}this.raiseEventGlobalPropertyChanged("ShapeFormatting",BE);},absorbGraphStyle:function(){var BI=this,BD,BE=this.getChartInfo(),BM=mstrmojo.chart.common.Utility,BG=this.defn.gpp,BF=BG&&BG.gp,BH;BD={isGridChart:BE.isGrid,isPieShape:BE.isPie,isVertical:BE.dirc===A7.EnumABLDirection.VERTICAL};var BL,BK=1,BJ=false;b.forEach(BF,function(BN){BH=BM.transformProperty(BN,0,BD);if(BH&&BH.Name){BJ=false;switch(BH.Name){case"ShowSeriesDataLabel":if(!BL){BL=BL||BH.Value;}break;case"DataLabel":BK=BH.Value;BJ=BD.isPieShape;break;default:BJ=true;break;}if(BJ&&BI.property.readItem(BH.Name,true)===undefined){BI.setWidgetPropertyValue(BH.Name,BH.Value);}}});if(BL===false){BI.setWidgetPropertyValue("DataLabel",1);}else{if(BL===true){BI.setWidgetPropertyValue("DataLabel",BK);}}},postFillGMControllerStyle:function AT(){var BE=this.GMController,BD=this.HTML5PROPS;BE.rhStyles=BD.RH;BE.chStyles=BD.CH;BE.xTitleStyles=BD.AXIS_TITLE_X;BE.yTitleStyles=BD.AXIS_TITLE_Y;},checkTemplateAndDropzone:function(){var BH=this,BF=BH.getData(),BM=BF.dz,BD=BF.gts;if(!!BF.eg){return true;}var BJ=BD,BG=BJ.row,BE=BJ.col,BL;[BE,BG].forEach(function(BO){if(!BL&&BO){var BN=BO[BO.length-1];if(BN&&BN.otp===-1&&BN.es){BL=BN.es;}}});var BI=["Rows","Columns","SizeBy","AngleBy","SliceBy","ColorBy","XAxis","YAxis","BreakBy","AdditionalMetrics"],BK=true;b.forEach(BI,function(BO){var BN=BM[BO],BP;if(BN){BP=BN.TemplateMetric;if(BP){b.forEach(BP,function(BQ){BK=BK&&(b.find(BL,"oid",BQ.id)!==-1);});}}});return BK;},update:function AB(BG){var BL=this._super(BG);if(!BL){return BL;}if(!this.checkTemplateAndDropzone()){mstrmojo.err({name:"Currently we do not support metric selector targeting to Widget",message:"Attribute/Metric in Dropzone doesn't match Grid Template"});return BL;}var BM=this,BT=BM.model,BS=this.getData(),BR,BF,BP,BO=this.property,BQ=BT.docModel,BH=BQ.datasets,BE,BI;if(U.isOnExpressMode()){this.noData=BS.eg!==undefined;if(!BS.eg){this.INVALID_TEMP=BB.isInvalidTemplate(BS);}if(this.noData||this.INVALID_TEMP){this.errorMsg=BB.getInvalidTemplateErrMsg(BS.eg);return BL;}}BM.sid=BS.sid;AY(BS);BB.startTimer({functionName:"VisGraphMatrix.update",purpose:"JSON loading & consuming ("+this.k+")"});BR=BS.dz;BF=BR.visProp.fmt;var BN,BK={},BJ,BD={};for(BE in BH){if(BH.hasOwnProperty(BE)){BI=BH[BE];BJ=BI.did;BN=BI.att.concat(BI.mx);b.forEach(BN,function(BU){BK[BU.did]=BU.t;BD[BU.did]=BJ;});}}this.itemId2DsIdMap=BD;AM.call(this,BF,BO,BK);BB.destroyDisposable(this,this.GMController);BP=this.GMController=this.addDisposable(new A7.GMController({view:this,property:this.property,defn:this.defn,firstRes:BS,xtabModel:BT}));BP.msgCenter={};this.noData=!!BS.eg;if(!this.noData){BP.postInit();this.absorbGraphStyle();this.resetHTML5Props();BP.checkDataLabelType();this.absorbAxisOrigin();Aq.call(this,BS,BT,BP);k.call(this,BP);BP.updateChartInfo();BO.setController(this.GMController);Ab.call(this,true);}else{this.errorMsg=BS.eg;}BB.endTimer();return BL;},getVisType:function F(){var BH=this.getWidgetPropertyValue("visType");if(BH===undefined){var BG=this.GMController.chartType,BF=this.getChartInfo(),BD=A7.EnumABLDirection.VERTICAL;if(BF.isCombo){BH=Ax.GRAPHCOMBINATIONBARAREADUALAXIS;}else{if(BF.isGrid){var BE=this.getWidgetPropertyValue(Ac.SHAPE);if(BE===d.LINE){BG=V.LINE;}else{if(BE===d.BAR){BG=V.BAR;}else{if(BE===d.AREA){BG=V.AREA;}else{if(BE===d.PIE){BG=V.BAR;}else{if(BE===d.RING){BG=V.BAR;}else{BG=V.BAR;}}}}}}switch(BG){case V.AREA:BH=(BF.dirc===BD)?Ax.GRAPHMATRIXVERTICALAREAAUTOMATIC:Ax.GRAPHMATRIXHORIZONTALAREAAUTOMATIC;break;case V.BAR:BH=(BF.dirc===BD)?Ax.GRAPHMATRIXVERTICALBARAUTOMATIC:Ax.GRAPHMATRIXHORIZONTALBARAUTOMATIC;break;case V.LINE:BH=(BF.dirc===BD)?Ax.GRAPHMATRIXVERTICALLINEAUTOMATIC:Ax.GRAPHMATRIXHORIZONTALLINEAUTOMATIC;break;case V.SCATTER:case V.BUBBLE:BH=Ax.GRAPHMATRIXBUBBLECIRCLEMM;break;case V.PIE:BH=Ax.GRAPHMATRIXPIE;break;case V.GRID:break;}}}return{s:Ay,vt:BH};},setInteractive:function(BD){this.enableTooltip=BD;this.enableShapeHover=BD;},getFlushGraphPropertyAction:function(BE){var BK=[],BF,BD,BJ,BH,BG,BI=false;b.forEach(BE,function(BL){BF=BL.n;BH=BL.v;BG=A9[BF];if(BG!==undefined){BI=true;BD=BG.split("_");BJ=BD.join("\u001e");BK[BJ]=BH;}});},isInCombinationMode:function(){var BD=this.GMController;return BD.enableCombiChart;},trendLineCouldBeEnabled:function(){return true;},refLineCouldBeEnabled:function(){return true;},isAttributeMetricChart:function(){var BD=this.GMController;return BD.isABL;},getGraphFormatsForSingleShape:function(BG,BH){var BF,BE,BD,BI,BJ=this.GMController;if(BH===W.ALL_SHAPE){BE=AF.ALL_SHAPE_FORMAT;BD=this.getWidgetPropertyValue(BE);return BD;}if(BH===W.ITSELF_RESOLVED){BI=BG.getGraphCell();return BI.getFormattingProperties();}if(BH===W.ITSELF){BF=BG.getSelectedObjectLowestLevel(true);}else{if(BH===W.COLOR_BY){BF=BG.getSelectedObjectColorByInfo();}else{if(BH===W.METRIC){BF=BG.getSelectedObjectMetricInfo();}}}return BJ.getShapeFormatsWithCombination(BF);},clientRerenderGraphMatrix:function(){this.update();this.GMController.reRenderGM();},updateColorMapCallback:function(){this.colorByData=this.GMController.getColorByLegendInfo();this.GMController.clearShapeFormatsCache();this.updateCharts();if(this.legend){this.legend.updateColorBySquare(this.colorByData);}this.raiseEventShapeFormattingChanged(AF.SHAPE_FILL_COLOR);},applyHTML5Props:function(BD){O=parseInt(BD.MATRIX_LINE_V.borderWidth,10)||1;A4=parseInt(BD.MATRIX_LINE_H.borderWidth,10)||1;D=parseInt(BD.AXIS_LINE_Y.borderWidth,10)||1;AE=parseInt(BD.AXIS_LINE_X.borderWidth,10)||1;AU=Math.floor((parseInt(BD.AXIS_TITLE_X.fontSize,10)||11)/o+0.5);Ae=Math.floor((parseInt(BD.AXIS_TITLE_Y.fontSize,10)||11)/o+0.5);BD.AXIS_TITLE_X.lineHeight=AU+"px";BD.AXIS_TITLE_Y.lineHeight=Ae+"px";AU+=12;Ae+=12;},getAddTRLineAction:function(BE){var BD=A1.call(this,BE);BD.rm=l.AddTRLine;return BD;},getUpdateTRLineAction:function(BE){var BD=A1.call(this,BE);BD.rm=l.UpdateTRLine;return BD;},getRemoveTRLineAction:function(BE){var BD=A1.call(this,BE);BD.rm=l.RemoveTRLine;return BD;},getUpdateForecastInfoAction:function(BE){var BD=A1.call(this,BE);BD.rm=l.UpdateForecastInfo;return BD;},collectTrendLineAction:function(BE,BG,BD){var BF;BF=this.getTrendRefInfo(BE);if(BD){BF.metricId=BD;}if(BE.existing){BG.push(this.getUpdateTRLineAction(BF));}else{BG.push(this.getAddTRLineAction(BF));}},collectRefLineAction:function(BF,BG,BD){var BE;BE=this.getTrendRefInfo(BF);if(BD){BE.metricId=BD;}if(BF.existing){BG.push(this.getUpdateTRLineAction(BE));}else{BG.push(this.getAddTRLineAction(BE));}},collectAddRefLineAction:function(BE,BF){var BD;BD=this.getTrendRefInfo(BE);BF.push(this.getAddTRLineAction(BD));},collectRemoveRefLineAction:function(BE,BF){var BD;BD=this.getTrendRefInfo(BE);if(BE.existing){BF.push(this.getRemoveTRLineAction(BD));}},collectABLForecastActions:function(BD,BE,BI){var BG={},BF=BD[Ac.TREND_SEASONALITY];BG[Ac.TREND_SEASONALITY]=BF;BG[Ac.TREND_FORECAST_ENABLED]=BD[Ac.TREND_FORECAST_ENABLED];BG[Ac.TREND_BWD_FORECAST]=BD[Ac.TREND_BWD_FORECAST];BG[Ac.TREND_FWD_FORECAST]=BD[Ac.TREND_FWD_FORECAST];var BH=this.getTrendRefInfo(BG);BH.metricId=BE;BI.push(this.getUpdateForecastInfoAction(BH));},getEnableTrendLineActions:function(BE,BF,BD){BF=BF||[];this.collectTrendLineAction(BE,BF,BD);return BF;},getEnableRefLineActions:function(BE,BF,BD){BF=BF||[];this.collectRefLineAction(BE,BF,BD);return BF;},onFormatableTargetChanged:function(BH){var BL,BM,BE,BD=this.interactor.fmtState,BK,BI,BN,BG;if(this.syning){return ;}if(BH&&BH.optLvl===W.COLOR_BY){BD=this.interactor.fmtState=Az.PER_COLORBY;}if(BD===Az.PER_COLORBY){BL=this.interactor.getColorByIdentities();}else{BL=this.interactor.getBreakByIdentities();}if(!BH){var BF=this.GMController.model.colorType;if(BD!==Az.PER_SHAPE&&(BF===AI.NULL||BF===AI.METRICS)){BE=W.ALL_SHAPE;U.visPrint("Changed to ALL");}else{BE=(BD===Az.PER_COLORBY?W.COLOR_BY:W.ITSELF);BN=this.collectUniqueCombination(BL,BE);U.visPrint("Changed to Color By by Mouse Action");}this.curSelOptLvl=BE;}else{BE=BH.optLvl;this.curSelOptLvl=BE;if(BH.key==="none"){this.clearSelections(true);}else{if(BE===W.ALL_SHAPE){U.visPrint("Changed to ALL");}else{if(BE===W.ITSELF){U.visPrint("Changed to Selected Elements");BN=this.collectUniqueCombination(BL,BE);}else{if(BE===W.COLOR_BY){BM={};BK=BH.comb;BN=[BK];b.forEach(BK,function(BO){if(!BM[BO.tid]){BM[BO.tid]=[{id:BO.eid}];}else{BM[BO.tid].push({id:BO.eid});}});U.visPrint("Changed to Color By Option "+BH.opt);}else{if(BE===W.METRIC){BI=BH.comb;BM={};b.forEach(BI,function(BO){if(!BM[BO.tid]){BM[BO.tid]=[{id:BO.eid}];}else{BM[BO.tid].push({id:BO.eid});}});U.visPrint("Changed to Metric By Option "+BH.opt);}}}}}}BG={objType:Aj.SHAPE_COLLECTION,identityArr:BL};var BJ;if(BI){BJ=[BI];}else{if(BN){BJ=BN;}else{BJ=undefined;}}this.syning=true;this.raiseEventFormatableChanged(BG,BE,BJ);this.syning=false;},submitUpdatesAndPersistXML:function Ag(BH,BP,BF,BD,BO,BJ){BH=BH||[];if(this.isXMLDirty()){BH.push(this.getPersistAction());}if(BH.length===0){return ;}var BK=this,BI,BG,BE={},BN=BK.getDocModel(),BM=BN.getDataService();if(BJ){BG=this.model.getDataService().newRetrievalKeysConfig();BG.addNode(this.k,BJ);BH[0].partialRetrieval=BG;}if(BD){h.copy(mstrmojo.DocDataService.SUPPRESS_DATA,BE);}if(BO){h.copy(mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION,BE);}if(BD&&BF){BI={silent:true,undo:BF.undo,redo:BF.redo};}else{BI={callback:this.getUnSilentUndoRedoCallback(BH,BN)};}Ao(BK).execute({execute:function BL(){var BQ=BM.newUpdate(this,undefined);BQ.add(BH,BP,BE);if(!BD){this.submitUpdate(BQ);}else{this.submitSilent(BQ.actions);}BK.resetXMLDirtyFlag();},urInfo:BI});},getModelController:function(){return this.model.controller||this.getDocModel().controller;},getXTabRefreshCallBack:function(){return this.getModelController()._getXtabCallback(this);},getDocModelSliceCallback:function(){return this.getDocModel().getSliceCallback({tks:this.k});},getUnSilentUndoRedoCallback:function(BG,BE){var BF=this.getXTabRefreshCallBack(),BD=false;b.forEach(BG,function(BH){if(BH.act==="updateElementsPropertiesMap"){BD=true;return false;}});if(BD){A8(BE.getUpdateColorMapCallback(),BF);}return BF;},outputLog4PartialRender:function Ad(){if(S&&window.console){if(this.GMController.enablePartialRendering){U.visPrint("# Partial Rendering: ON");}else{U.visPrint("# Partial Rendering: OFF");}}},hEvalSizeIteratively:function A6(){this.hEvalSize4Headers();Av.call(this);this.hEvalSize4GMArea();if(!this.getWidgetPropertyValue(AF.COLUMN_HEADER_SHOW)){return ;}var BH,BL,BI,BE=this.layouter,BJ=this.GMController,BG=false,BM=BJ.getColTitleInfo(true),BK=this.hGetColTitleWidth(),BD=this.colHeaderHArr.length,BN=this.HTML5PROPS,BF=BJ.getAttributesOnDropZone("Rows").length>0?2:3;for(BH=0;BH<BD;BH++){BL=BM.items[BH].n;BI=BE.batchEvalTextHeight([BL],[BK],BN.CH_TITLE,Au+AN,BF)[0];if(BI>this.colHeaderHArr[BH]){this.colHeaderHArr[BH]=BI;BG=true;}}if(BG){Av.call(this);this.hEvalSize4GMArea();}},isEmpty:function X(){return this.noData||!this.GMController||this.GMController.isEmptyVis();},getVisEmptyMsgControls:function A(){var BD;if(this.noData){if(this.model.data.egt===2){BD=U.getVisEmptyMsg("AE_ERROR");}else{BD=U.getVisEmptyMsg("NODATA_OTHERERROR");}}else{BD=U.getVisEmptyMsg();}return[{scriptClass:"mstrmojo.Container",markupString:BD,markupSlots:{containerNode:function(){return this.domNode;}}}];},renderErrorMessage:function Am(BE){var BF=this.domMessage,BD=document.createElement("div");BF.style.cssText+="position:relative;";BD.className="mstrmojo-message gm-error-msg";BD.innerText=BE;BF.appendChild(BD);},displayOtherNotificationMessage:function(){var BE=this.GMController,BD=BE.msgCenter;if(BD){h.forEach(BD,function(BF,BG){mstrmojo.notify(BG,null);});delete BE.msgCenter;}},displayTrendLineErrorMessages:function(){var BE,BH=this.GMController,BF=BH.trendLineErrors;if(BF){for(BE in BF){if(BF.hasOwnProperty(BE)){t.notify(BF[BE]);}}}delete BH.trendLineErrors;var BD=this.trendLineNotifications,BG=this.referenceLineNotifications;b.forEach([BD,BG],function(BI){b.forEach(BI,function(BJ){t.notify(BJ);});});this.trendLineNotifications=[];this.referenceLineNotifications=[];if(BH.trendlineDefined&&BH.mulAttsOnAxisForABL){t.notify(mstrmojo.desc(12281,"Trend lines are disabled due to multiple attributes on independent axis."));}if(this.trendSeasonalityError){t.notify(mstrmojo.desc(14105,"The seasonality feature is unavailable with logarithmic and power trend line models."));delete this.trendSeasonalityError;}},setModel:function L(BD){this._super(BD);this.listenToUpdateColorMap(this.updateColorMapCallback);},postBuildRendering:function(){if(this.waitingForData){return ;}if(!this.checkTemplateAndDropzone()){mstrmojo.err({name:"Currently we do not support metric selector targeting to Widget",message:"Attribute/Metric in Dropzone doesn't match Grid Template"});return ;}if(U.isOnExpressMode()){var BF=this.model.docModel.thm.did,BD=(BF==="F1FED8AC42B57AC1B0E9518FED0F89D6"?"mojo-theme-dark":"mojo-theme-light"),BE=document.getElementsByClassName("mstrmojo-OIVMPage ");if(BE.length===1){BE[0].setAttribute("class","mstrmojo-OIVMPage "+BD);}}this.postBuilderingCalled=true;var BH=this.HTML5PROPS;if(U.isOnExpressMode()){if(this.isEmpty()||this.INVALID_TEMP){this.renderErrorMessage(this.errorMsg||mstrmojo.desc(12093,"Filter excludes all data"));this._super();return ;}}else{if(this.isEmpty()){this._super();return ;}}if(!this.hValidateInput()||this.INVALID_TEMP){return ;}this.applyHTML5Props(BH);this.setTheme(this.theme);this.hResetLocalVars();if(!this.noData){BB.startTimer({functionName:"VisGraphMatrix.postBuildRendering",purpose:"Layout of GraphMatrix ("+this.k+")"});this.adjustRHAndCHOpacity();this.hInitHelpers();this.hPrepareDataAndCE();this.hEvalSize4Legend();this.hEvalSizeIteratively();this.hCalcRadiusAndMargin(true);this.hDecideDataLabelRotation();this.initGMScroll();this.hLayoutControls();this.hFillContents();this.hInitLegend();this.hInitWidgetMatrixes();this.updateRowValueBackground();this.updateColumnValueBackground();this.hUpdateLegend();this.hPlaceRHResizers(BH.MATRIX_LINE_V);this.hPlaceCHResizers(BH.MATRIX_LINE_H);this.hPlaceYResizers(BH.AXIS_LINE_Y);this.hPlaceXResizers(BH.AXIS_LINE_X);this.hPlaceOutBorders();this.outputLog4PartialRender();BB.endTimer();BB.startTimer({functionName:"WidgetMatrixManager.drawCharts",purpose:"Rendering of GraphMatrix ("+this.k+")"});this.manager.drawCharts();BB.endTimer();this.hPlaceRowResizers(BH.MATRIX_LINE_H);this.hPlaceColResizers(BH.MATRIX_LINE_V);this.hPlaceHGridLines(BH.GRID_LINE_MAJOR,BH.GRID_LINE_MINOR);this.hPlaceVGridLines(BH.GRID_LINE_MAJOR,BH.GRID_LINE_MINOR);this.hPlaceYSplitters(BH.MATRIX_LINE_V);this.hInitListeners();var BG=this;setTimeout(function(){BG.updateScrollBars();},0);}this.displayTrendLineErrorMessages();this.displayOtherNotificationMessage();this.initFlagForContextMenu=false;this.attachEventListener("highLightObjectChange",this.interactor.id,this.interactor.onHighLightObjectChange);var BI=this.getExp(),BJ=this.getRowsAndCols();U.modifyScExp(BI,BJ,this.model,this.normalizedIdCache);if(this._super){this._super();}AZ.call(this);},updateScrollBars:function(){this.vSBar.updateScrollbars();this.hSBar.updateScrollbars();if(this.masterViewer){this.scrollNode=this.masterViewer.domContainer.firstChild;}},updateChartsPosition:function(BH,BF){var BG=this.scrollNode;if(!BG){return ;}var BL=BG.xPos||0,BK=BG.yPos||0,BJ=BF,BI=BF,BE=BG.offsetWidth-BG.parentNode.offsetWidth,BD=BG.offsetHeight-BG.parentNode.offsetHeight;BI=(BI<0)?0:BI;BI=(BI>BD)?BD:BI;BJ=(BJ<0)?0:BJ;BJ=(BJ>BE)?BE:BJ;if(BH==="v"){if(BK===BI){return ;}BK=BG.yPos=BI;}else{if(BL===BJ){return ;}BL=BG.xPos=BJ;}BG.style[AX.CSS3_TRANSFORM]=AX.createTranslateString(-BL,-BK,0);this.onscroll();},onBrushing:function s(BE){if(BE.keys.indexOf(this.k)!==-1){var BG=this.manager,BD=BE.from.getSelectionHash(),BH=[],BI,BK=-1,BF=-1,BJ=this.GMController;h.forEach(BD,function(BM){var BL=this.GMController.checkAttributeIntersection(BM,["Rows","Columns"]);b.forEach(BL,function(BN){var BO={};BO[BN]=BM[BN];BH.push(BO);});},this);BI=BG.filterCharts(BH);b.forEach(BI,function(BL){if(BL.byRow){BK=BK<0?BL.start:Math.min(BK,BL.start);}else{BF=BF<0?BL.start:Math.min(BF,BL.start);}});if(BK>=0){this.updateChartsPosition("v",BG.master.getRowPosition(BK));}if(BF>=0){this.updateChartsPosition("h",BG.master.getColPosition(BF));}BJ.resetHighLightIndex=true;}if(this._super){this._super(BE);}},onscroll:function At(){var BD,BI,BF=this,BE=this.manager,BH=this.HTML5PROPS,BG=this.scrollNode;if(!BG){return ;}if(!this._timeout){this._timeout=window.setTimeout(function(){BD=BG.xPos;BI=BG.yPos;BF.vSBar.updateScrollPosition(BI);BF.hSBar.updateScrollPosition(BD);BB.startTimer({functionName:"VisGraphMatrix.onscroll.annonymous",purpose:"Rendering of GraphMatrix (after scrolling) ("+this.k+")"});BF.outputLog4PartialRender();BE.drawCharts();BF.updateSelections();BB.endTimer();delete BF._timeout;},j);}BD=BG.xPos;BI=BG.yPos;BE.scrollTo(BD,BI);BF.hPlaceRowResizers(BH.MATRIX_LINE_H);BF.hPlaceColResizers(BH.MATRIX_LINE_V);BF.hPlaceHGridLines(BH.GRID_LINE_MAJOR,BH.GRID_LINE_MINOR);BF.hPlaceVGridLines(BH.GRID_LINE_MAJOR,BH.GRID_LINE_MINOR);BF.interactor.updateSelectedBroders();},onmouseover:function(BN){if(!this.hasRendered||this.INVALID_TEMP||this.noData){return ;}var BH=this.getRealTarget(BN),BE=this.interactor,BD=this.GMController.getChartInfo(),BI=BN.e,BJ=this,BL=this.vSBar,BO=this.hSBar,BF=this.domNode;b.forEach([BJ.domGM,BJ.domRowHeader,BJ.domYAxis,BJ.domYAxis2],function(BP){if(AX.contains(BP,BH,true,BF)){BL.toggleHoverState(true);return false;}});b.forEach([BJ.domGM,BJ.domColHeader,BJ.domXAxis],function(BP){if(AX.contains(BP,BH,true,BF)){BO.toggleHoverState(true);return false;}});var BK=BE.domMenuPH.getElementsByClassName("mstrmojo-ui-Menu"),BM=BE.domToolbarPH.firstChild;if(BE.fmtMode&&AD(BI,BK,BM)){return ;}var BG=U.getMouseOffset(BI);BE.handleMouseOver(BH,BD,BG.x,BG.y);},onmouseout:function(BE){if(!this.hasRendered||this.INVALID_TEMP||this.noData){return ;}var BF=this.domNode,BD=BE.e.toElement||BE.e.relatedTarget,BG=this;b.forEach([BG.domGM,BG.domRowHeader,BG.domYAxis,BG.domYAxis2],function(BH){if(!AX.contains(BH,BD,true,BF)){BG.vSBar.toggleHoverState(false);return false;}});b.forEach([BG.domGM,BG.domColHeader,BG.domXAxis],function(BH){if(!AX.contains(BH,BD,true,BF)){BG.hSBar.toggleHoverState(false);return false;}});if(!AX.contains(BF,BD,true)){this.interactor.hideTooltip();this.interactor.clearHoveredTarget();this.interactor.clearHoveredSetShape();this.interactor.clearHoveredShape();this.interactor.clearSHTargets();}},oncontextmenu:function Al(BM){delete this.noHighlightAfterKeepOnlyExcludeDrill;delete this.noReorderAfterShowData;if(!this.hasRendered||U.isOnExpressMode()){return ;}this.raiseEventOnNonFormattingIdentity([]);var BN=this.getDocModel(),BE=BN&&BN.getSelectedViUnit(),BK=(BE instanceof mstrmojo.vi.ui.rw.VizBox)&&BE.titleBar;if(BK&&BK.onclick){BK.onclick();}var BF=BM.e,BG=this.getRealTarget(BM),BI={x:BF.pageX+2,y:BF.pageY+2},BJ=this.GMController.disabledUnits,BD=this.interactor,BL=this.legend,BH=BG.identity||(BG.parentNode&&BG.parentNode.identity);this.mousePos={x:BF.pageX+2,y:BF.pageY+2};this.closePopup();if(BL&&AX.contains(BL.domNode,BG,true)){BD.handleRMCOnLegend(BG,h.clone(BI));if(BH&&BH.objType!==Aj.GRAPH_SHAPE){this.raiseEventOnFormattingIdentity([BH]);}}else{BD.handleRMClick(BG,BJ,h.clone(BI),BF);}this.preClickType=R.RIGHT_CLICK;g.call(this,BI,this.interactor.domToolbarPH,this.interactor.domMenuPH);if(BF!==null){AX.stopPropogation(BF.hWin,BF);AX.preventDefault(BF.hWin,BF);}},getRealTarget:function(BD){return BD.getTarget();},clearUserSelections:function(){if(this.isClearAllDisabled()){return false;}this.interactor.clearSelectRules();this.clearSelections(true);this.endSelections();return true;},resetSelectionEmptyFlag:function(){this.selectionEmptyFlag=h.isEmpty(this.getSelectionHash());},endSelections:function(){if(h.isEmpty(this.getSelectionHash())){if(!this.selectionEmptyFlag){this.selectionEmptyFlag=true;this._super();}}else{this.selectionEmptyFlag=false;this._super();}},closePopup:function(){var BD=this.interactor;if(BD){BD.hideToolbar();BD.hideContextMenu();}if(this._super){this._super();}this._lastOpened=null;},onmousedown:function(BD){this.shouldNotTriggerClick=false;var BF=this.vSBar.domNode,BE=this.hSBar.domNode,BG=BD.getTarget();if(AX.contains(BE,BG)||AX.contains(BF,BG)){this.shouldNotTriggerClick=true;}},onclick:function(BP){delete this.noHighlightAfterKeepOnlyExcludeDrill;delete this.noReorderAfterShowData;if(this.shouldNotTriggerClick){this.shouldNotTriggerClick=false;return ;}if(this.noData||this.INVALID_TEMP){return ;}this.raiseEventOnNonFormattingIdentity([]);var BN=this,BE=this.interactor,BI=this.getRealTarget(BP),BG=BP.hWin,BJ=BP.e,BD=BJ.ctrlKey||BJ.metaKey,BO=this._timeoutClick;this.mousePos={x:BJ.pageX+2,y:BJ.pageY+2};this.closePopup();if(this.enableDomDommy&&(BI===this.domDummyA||BI===this.domDummyB)){var BL=this.GMController.getDebugMenu();this.showContextMenu(BP,BL);return ;}this.hideContextMenu();if(this.formattingMode){if(BO){AX.stopPropogation(BG,BJ);window.clearTimeout(BO);delete this._timeoutClick;BE.handleDblClick(BI,BD,BJ);this.preClickType=R.DOUBLE_CLICK;}else{this._timeoutClick=window.setTimeout(function(){BE.handleClick(BI,BD,BJ);delete BN._timeoutClick;BN.preClickType=R.LEFT_CLICK;},C);}}else{if(BO){window.clearTimeout(BO);delete this._timeoutClick;}var BM=BI.getAttribute("type");if(BM===G.LASSO_SELECTOR){var BQ=this.manager.master.lassoSelector;var BH=AH(BQ,BJ);BE.handleClick(BH,BD,BJ,BQ);}else{if(BM===G.LINE_CONTAINER){var BK=AH(BI,BJ);var BF=BK&&BK.getAttribute("type");if(BF===G.GM_SHAPE||BF===G.GM_MARKER){BE.handleClick(BK,BD,BJ);}else{BE.handleClick(BI,BD,BJ);}}else{BE.handleClick(BI,BD,BJ);}}this.preClickType=R.LEFT_CLICK;}},onmousemove:function(BP){if(!this.hasRendered||this.INVALID_TEMP||this.noData){return ;}var BI,BF,BG=BP.e,BH=this.getRealTarget(BP),BK=BH.getAttribute("type"),BD=this.GMController.getChartInfo(),BE=this.interactor,BO;var BL=BE.domMenuPH.getElementsByClassName("mstrmojo-ui-Menu"),BM=BE.domToolbarPH.firstChild;if(BE.fmtMode&&AD(BG,BL,BM)){BE.hideTooltip();return ;}var BN=this.enableTooltip;if(!BN){return ;}if(BK===G.GM_SVG_CHART){BE.hideTooltip();BO=this.domGM.childNodes[0];BO.style.zIndex="-2";BI=document.elementFromPoint(BG.pageX,BG.pageY);BO.style.zIndex="auto";BF=BI.getAttribute("type");if(BE.fmtMode&&(BF===G.LINE_CONTAINER||BF===G.GM_H_GRID_LINE||BF===G.GM_V_GRID_LINE||BF===G.GM_H_MINOR_GRID_LINE||BF===G.GM_V_MINOR_GRID_LINE)){BE.handleMouseOver(BI);}else{BE.handleMouseOver(BH,BD,U.getMouseOffset(BG).x,U.getMouseOffset(BG).y);}}else{if(BK===G.LASSO_SELECTOR){var BQ=this.manager.master.lassoSelector;BI=AH(BQ,BG);BF=BI.getAttribute("type");if(BF===G.GM_SHAPE||BF===G.GM_MARKER){BE.handleMouseOver(BI,BD,U.getMouseOffset(BG).x,U.getMouseOffset(BG).y);BE.showTooltip(BI,{x:BG.pageX,y:BG.pageY});}else{BE.handleMouseOver(BI,BD,U.getMouseOffset(BG).x,U.getMouseOffset(BG).y);BE.hideTooltip();}}else{if(BK===G.GM_SHAPE||BK===G.GM_MARKER||BK===G.GM_TREND_LINE||BK===G.GM_REF_LINE){BE.handleMouseOver(BH,BD,U.getMouseOffset(BG).x,U.getMouseOffset(BG).y);BE.showTooltip(BH,{x:BG.pageX,y:BG.pageY});}else{if(BK===G.GM_SET_SHAPE){if(BD.tp===V.AREA&&BD.shape===d.AREA){BE.handleMouseOver(BH,BD,U.getMouseOffset(BG).x,U.getMouseOffset(BG).y);}else{BE.hideTooltip();}}else{if(BK===G.LINE_CONTAINER){var BJ=AH(BH,BG);BF=BJ.getAttribute("type");if(BF===G.GM_SHAPE||BF===G.GM_MARKER){BE.handleMouseOver(BJ,BD,U.getMouseOffset(BG).x,U.getMouseOffset(BG).y);BE.showTooltip(BJ,{x:BG.pageX,y:BG.pageY});}else{BE.hideTooltip();}}else{BE.hideTooltip();}}}}}},destroy:function(){var BD=this.interactor;if(BD){this.closePopup();}Ai.call(this);this.hResetLocalVars();this._super();if(this.GMController===mstrmojo.gm.GMLayout.API.owner){mstrmojo.gm.GMLayout.API={};}delete this.GMController;},unrender:function(){var BE=this.interactor,BF=this,BD=this.lines;if(BE){BE.hideTooltip();}Ai.call(this);var BG=function(BH){BH=typeof BH==="string"?BF[BH]:BH;if(BH){BH.unrender();BF.removeChildren(BH,true);}};["Row","Col"].forEach(function(BI){var BH="slave"+BI+"Headers",BJ=BF[BH];BJ.forEach(BG);BF[BH]=[];});["slaveXAxis","slaveYAxis","slaveXAxis2","slaveYAxis2","masterViewer","legend"].forEach(function(BH){BG(BH);delete BF[BH];});b.forEach(Object.keys(BD),function(BI){var BH=BD[BI];if(b.isArray(BH)){BH.forEach(BG);BD[BI]=[];}else{b.forEach(Object.keys(BH),function(BK){var BJ=BH[BK];BG(BJ);delete BH[BK];});}});BB.handleDestroy(this,N);BB.handleDestroy(this.GMController,["mstrmojo.gm.GMDataModel"]);if(this.GMController){delete this.GMController.manager;}this._super();},hResetLocalVars:function(){this.sBarWidth=11;BB.destroyDisposable(this,this.manager);this.manager=undefined;BB.destroyDisposable(this,this.masterViewer);this.masterViewer=undefined;this.slaveRowHeaders=[];this.slaveColHeaders=[];this.slaveYAxis=undefined;this.slaveXAxis=undefined;this.slaveYAxis2=undefined;this.slaveXAxis2=undefined;this.yAxisFixed=false;this.yAxis2Fixed=false;this.xAxisFixed=false;this.xAxis2Fixed=false;this.lines={axes:{},borders:{},vlines:{},hlines:{},rows:[],cols:[],hMajorGridLines:[],hMinorGridLines:[],vMajorGridLines:[],vMinorGridLines:[],axisSplitters:{}};this.textHeightInX=AU;this.textHeightInY=Ae;},hValidateInput:function(){var BE=parseInt(this.width,10),BD=parseInt(this.height,10);if(isNaN(BE)||isNaN(BD)){return false;}return true;},hInitHelpers:function(){var BE,BD;BE=this.addDisposable(new mstrmojo.WidgetMatrixManager({GMController:this.GMController,widthScale:this.getWidgetPropertyValue(Ac.SCALE_CHART_WIDTH),heightScale:this.getWidgetPropertyValue(Ac.SCALE_CHART_HEIGHT)}));BD=this.interactor;BD.domWidget=this.domNode;BD.clearAll();this.manager=this.GMController.manager=BE;this.interactor=BD;},hPrepareDataAndCE:function(){var BD=this.GMController,BE=BD.hasColorBy(),BF=BD.hasSizeBy();this.needLegend=BE||BF;this.colorByData=BE?BD.getColorByLegendInfo():null;this.sizeByData=BF?BD.getSizeByLegendInfo():null;this.needLegend=!!this.colorByData||!!this.sizeByData;BD.setupAxisCondense();BD.setupAxisLayout();},hDecideDataLabelRotation:function(){var BD=this.GMController;BD.decideDataLabelRotation();},hCalcRadiusAndMargin:function(BE){var BD=this.GMController;BD.calculateRadius();if(BE){BD.initYAxisMargins();BD.initXAxisMargins();}},hInitLegend:function(){if(!this.needLegend){return ;}var BF=this.isShapeCombonation(),BD;if(BF.shapeType===undefined){BD=this.getChartInfo().shape;}else{BD=BF.shapeType;}if(BD===d.LINE&&this.GMController.isOneDotCase()){BD=d.CIRCLE;}BB.destroyDisposable(this,this.legend);var BG=this.HTML5PROPS,BE=new A7.GMLegend({widget:this,shapeType:BD,placeholder:this.domLegend,currDockedPositionIdx:this.getLegendDockPosIdx(this.getWidgetPropertyValue(Ac.LEGEND_POSITION)),cutBy:this.legendCutBy,styles:BG.LEGEND,model:this.model});BE.render();BE.parent=this;this.legend=this.addDisposable(BE);this.domLegend=BE.domNode;},hUpdateLegend:function(){var BD=this.legend;if(BD){BD.cutBy=this.legendCutBy;BD.minHeight=this.legendMinHeight;BD.updateContainerSize(this.getWidth(),this.actualHeight);BD.feedData([{dataType:Aw.COLOR_BY,dataObj:this.colorByData},{dataType:Aw.SIZE_BY,dataObj:this.sizeByData}],this.getWidgetPropertyValue(Ac.LEGEND_MODE)===J.MINIMIZED);}},hInitListeners:function(){var BK=this,BE=this.id,BN=this.legend,BG=this.manager,BM=this.GMController,BO=this.lines,BL=BO.axes,BF=BO.hlines,BJ=BO.vlines,BH=BO.borders&&BO.borders.bottom,BI=BO.borders&&BO.borders.right;this.chartResizeListener=BG.attachEventListener("MiniChartResized",BE,function(BP){var BQ=BP.chartWidthScale,BR=BP.chartHeightScale;if(BQ){BM.initXAxisMargins();this.writeGlobalProperty(Ac.SCALE_CHART_WIDTH,BQ);}if(BR){BM.initYAxisMargins();this.writeGlobalProperty(Ac.SCALE_CHART_HEIGHT,BR);}});this.updateSelectionsListener=BG.attachEventListener("UpdateSelections",BE,function(){BK.updateSelections();});h.keyarray(BL).forEach(function(BP){BK.splitterListeners.push(BL[BP].attachEventListener("splitterMoved",BE,function(BQ){BK.onSplitterMoved(BQ.position,BQ.info);}));});h.keyarray(BJ).forEach(function(BP){BK.splitterListeners.push(BJ[BP].attachEventListener("splitterMoved",BE,function(BQ){BK.onSplitterMoved(BQ.position,BQ.info);}));});h.keyarray(BF).forEach(function(BP){BK.splitterListeners.push(BF[BP].attachEventListener("splitterMoved",BE,function(BQ){BK.onSplitterMoved(BQ.position,BQ.info);}));});if(BH){this.splitterListeners.push(BH.attachEventListener("splitterMoved",BE,function(BP){BK.onSplitterMoved(BP.position,BP.info);}));}if(BI){this.splitterListeners.push(BI.attachEventListener("splitterMoved",BE,function(BP){BK.onSplitterMoved(BP.position,BP.info);}));}if(BN){this.legendResizeListener=BN.attachEventListener("gm-legend-resized",BE,function(BP){BK.onLegendResized(BP.position);});this.legendClickListener=BN.attachEventListener("gm-legend-clicked",BE,function(BP){BK.onLegendClicked(BP);});}var BD=[{node:BK.domRowHeader,dirc:"v"},{node:BK.domColHeader,dirc:"h"},{node:BK.domGM,dirc:"both"},{node:BK.domYAxis,dirc:"v"},{node:BK.domYAxis2,dirc:"v"},{node:BK.domXAxis,dirc:"h"}];b.forEach(BD,function(BP){if(BP.node){U.addWheelListener(BP.node,AS.bind(BK,BP.dirc));}});if(BK.domMainContainer){U.addWheelListener(BK.domMainContainer,AR.bind(BK));}},hLayoutLegend:function(BF){var BE=this.legendIsRight(BF),BD=this.domMainContainer;if(BE){BD.style.left="0px";}else{BD.style.left=this.legendW+this.legendP+O+"px";}},hEvalSize4Headers:function(){var BD=this.GMController,BQ=this.HTML5PROPS,BL=BD.getRowHeadersToCalcWidth(),BR=BD.getColHeadersToCalcWidth(),BF=BD.getRowTitleInfo(),BG=BD.getColTitleInfo(),BP=BD.getYAxisInfo(undefined,undefined,BD.haveY1),BJ=this.layouter,BU=this.getWidgetPropertyValue(AF.ROW_HEADER_SHOW),BN=this.getWidgetPropertyValue(AF.ROW_VALUES_SHOW),BS=this.getWidgetPropertyValue(AF.COLUMN_HEADER_SHOW),BK=this.getWidgetPropertyValue(AF.COLUMN_VALUES_SHOW),BM=this.getWidgetPropertyValue(AF.Y_AXIS_TITLE_SHOW),BI=function(BW,BX){var BV,BY=BW.length;for(BV=0;BV<BY;BV++){BW[BV]*=(BX[BV]||1);}},BT=function(BW,BX){var BV;BW.length=BX;for(BV=0;BV<BX;BV++){BW[BV]=0;}},BE=function(){var BW=BL.length>0,Bd=BU,Bb=BP.items.length>0&&!BP.isMetric,BY=BM,BX=BD.hasFooterInX&&BD.isFooterAbove,Bc=BK;var Ba=BW&&Bd,BV=Bb&&BY,BZ=BX&&Bc;return{hasAndShowRT:Ba,hasAndShowYAAT:BV,hasAndShowFA:BZ};};this.rowHeaderWArr=BJ.getRowHeadersWidth(BL,BQ.RH);this.colHeaderHArr=BJ.getColHeadersHeight(BR,BQ.CH);this.rowHeaderExtraW=BJ.getRowHeaderP1Width(BL.length,BR.length,BG,this.colHeaderHArr,BQ.CH_TITLE,BS,BD);if(BD.isGridPie&&BL.length===0&&BP.items.length===0&&BD.isMetricNamesOnColumns){BP.items.push("Metric Names");}var BH=BD.getAttributesOnDropZone("Columns").length>0?2:3;this.rowHeaderMaxHeightWithoutX2=BJ.getColHeaderP1Height(BF,this.rowHeaderWArr,BP,BQ,BE(),BH);this.colHeaderExtraH=this.rowHeaderMaxHeightWithoutX2;if(this.rowHeaderExtraW===0){this.removeWidgetProperty(Ac.SCALE_V_EXTRA_LINE);}else{var BO=this.getWidgetPropertyValue(Ac.SCALE_V_EXTRA_LINE);this.rowHeaderExtraW*=BO;}BI(this.rowHeaderWArr,this.getWidgetPropertyValue(Ac.SCALE_ROW_HEADERS));BI(this.colHeaderHArr,this.getWidgetPropertyValue(Ac.SCALE_COL_HEADERS));if(!BU&&!BN){BT(this.rowHeaderWArr,BL.length);}if(!BS&&!BK){BT(this.colHeaderHArr,BR.length);}},hEvalSize4Legend:function(){var BH,BF=this.colorByData,BE=this.sizeByData,BG=this.getWidth(),BD=this.getHeight(),BI=this.HTML5PROPS.LEGEND,BJ;if(!this.needLegend||this.getWidgetPropertyValue(Ac.LEGEND_VISIBLE)===false){this.legendW=this.legendH=this.legendP=0;}else{c.applyHTML5Props(BI);this.legendP=x;BJ=this.getWidgetPropertyValue(Ac.SCALE_LEGEND_WIDTH);if(BJ==="undefined"||this.legendScale!==BJ){this.legendScale=BJ;this.legendResized=true;this.legendFixedW=undefined;delete this.legendFixedW;}BH=c.getLegendSize([{dataType:Aw.COLOR_BY,dataObj:BF},{dataType:Aw.SIZE_BY,dataObj:BE}],this.legendResized?this.legendScale:undefined,BG,BD,BI,this.legendFixedW);this.legendCutBy=BH.cutBy;this.legendMinHeight=BH.minHeight;this.legendFixedW=BH.width;if(BH.scale){this.legendScale=BH.scale;}if(this.getWidgetPropertyValue(Ac.LEGEND_MODE)===J.MINIMIZED||BH.autoCollapse){BH=c.getLegendSize4MinMode(BF,BD);this.legendCutBy=undefined;}this.legendW=BH.width;this.legendH=BH.height;}},legendIsRight:function(BD){BD=BD||this.getWidgetPropertyValue(Ac.LEGEND_POSITION);return BD===AJ.RIGHT_MIDDLE||BD===AJ.RIGHT_TOP||BD===AJ.RIGHT_BOTTOM;},hEvalSize4GMArea:function(){var BR,BE=this.GMController,BS=BE.isXDualAxis,BI=BE.isYDualAxis,BK=this.manager,BM=this.layouter,BO=this.GMInfo,BQ=this.xAxisFixed?BO.xAxisHeight:undefined,BU=this.yAxisFixed?BO.yAxisWidth:undefined,BG=this.yAxis2Fixed?BO.yAxis2Width:undefined,BH=this.xAxis2Fixed?BO.xAxis2Height:undefined,BP=this.getWidth(),BL=this.getHeight(),BF=this.rowHeaderWArr,BT=this.colHeaderHArr,BD=this.legendIsRight(),BJ=this.getWidgetPropertyValue(Ac.SCALE_ALL),BN=this.getWidgetPropertyValue(AF.Y_AXIS_TITLE_SHOW);if(this.legendW>0){BP-=this.legendW+this.legendP+O;}this.actualWidth=BP;this.actualHeight=BL;this.rowHeaderW=AQ.sum(BF,O);this.colHeaderH=AQ.sum(BT,A4);BR=AQ.add(0,this.rowHeaderW,O);BR=AQ.add(BR,this.rowHeaderExtraW,O);BP-=BR;BL-=AQ.add(0,this.colHeaderH,A4);BE.initLayouter(BM);BO=BM.calculateLayout(BR,BP,BL,BQ,BH,BU,BG,BJ,{h:0,v:0,ha:AE,va:D,ob:0,dx:BS,dy:BI,rb:(BD&&this.legendW>0),styles:this.HTML5PROPS.RH_TITLE,syat:BN,rhMaxH:this.rowHeaderMaxHeight});if(BO.widthCacheChanged){BK.feedChartWidthInfo(BE.widthCache);BK.updateHSlaves();BE.initXAxisMargins();}if(BO.heightCacheChanged){BK.feedChartHeightInfo(BE.heightCache);BK.updateVSlaves();BE.initYAxisMargins();}this.colHeaderExtraH=BO.xAxis2Height;BL-=AQ.add(0,this.colHeaderExtraH,BE.haveX2?AE:A4);BL-=AQ.add(0,BO.xAxisHeight,AE);BP-=AQ.add(0,BO.yAxisWidth,D);BP-=AQ.add(0,BO.yAxis2Width,D);this.GMW=(BO.pageWidth)||BP;this.GMH=(BO.pageHeight)||BL;this.actualWidth-=BP-this.GMW;this.actualHeight-=BL-this.GMH;this.GMInfo=BO;this.autoSetPRFlag();},autoSetPRFlag:function(){var BE=this.GMController;if(BE.isBubbleOrScatter()){BE.enablePartialRendering=true;return ;}var BG=1.2;var BF=BE.getChartCountInCol()*BE.getChartCountInRow();if(BF<=1){var BD=(this.GMInfo.avgChartWidth/this.GMW>=BG)||(this.GMInfo.avgChartHeight/this.GMH>=BG);if(BD){BE.enablePartialRendering=BE.getGraphShapeCount()>10000;}}else{BG=2;if((this.GMInfo.avgChartWidth/this.GMW>=BG)||(this.GMInfo.avgChartHeight/this.GMH>=BG)){BE.enablePartialRendering=true;}}},initGMScroll:function(){var BD,BE;BB.destroyDisposable(this,this.vSBar);BD=new A7.GMScroll({view:this,placeholder:this.domVSBar,cssClass:"gm-vsbar",bodyClass:"gm-vsbar-body",direction:"v"});BD.render();BD.addScrollListener();this.vSBar=this.addDisposable(BD);BB.destroyDisposable(this,this.hSBar);BE=new A7.GMScroll({view:this,placeholder:this.domHSBar,cssClass:"gm-hsbar",bodyClass:"gm-hsbar-body",direction:"h"});BE.render();BE.addScrollListener();this.hSBar=this.addDisposable(BE);},hLayoutControls:function(){var BO=this.GMController,BI=this.GMInfo,BR=BI.yAxisWidth,BP=BI.yAxis2Width,BD=BI.xAxisHeight,BL=this.rowHeaderW,BK=AQ.sum([BL,this.rowHeaderExtraW],O),BJ=AQ.sum([BK,BR],O),BN=this.colHeaderH,BG=AQ.sum([BN,this.colHeaderExtraH],A4),BH=BJ+(BO.haveY1?D:O),BF=BG+(BO.haveX2?AE:A4),BM=BH+this.GMW+(BO.haveY2?D:0),BE=BF+this.GMH+(BO.haveX1?AE:0),BQ=this.HTML5PROPS.LEGEND;this.offsetX=BH;this.offsetY=BF;this.offsetX2=BM;this.offsetY2=BE;AP(this.domLegend,{width:this.legendW,height:this.legendH});U.applyStyle2Legend(BQ,this.domLegend);AP(this.domMainContainer,{width:this.actualWidth,height:this.actualHeight});AP(this.domTabHeader,{width:BJ,height:BG});AP(this.domColHeader,{width:this.GMW,height:BG,left:BH});AP(this.domRowHeader,{width:BK,height:this.GMH,top:BF});AP(this.domYAxis,{width:BR,height:this.GMH,left:(BK===0)?0:(BK+O),top:BF});AP(this.domGM,{width:this.GMW,height:this.GMH,left:BH,top:BF});AP(this.domYAxis2,{width:BP,height:this.GMH,left:BM,top:BF});AP(this.domXAxis,{width:this.GMW,height:BD,left:BH,top:BE});AP(this.domDummyA,{width:BK,height:BD,top:BE});AP(this.domDummyB,{width:BR,height:BD,left:BK+O,top:BE});this.hLayoutLegend();this.hLayoutScrollBars(BH,BF,BM,BE,BD,BP);},hLayoutScrollBars:function(BG,BF,BJ,BE,BD,BK){var BH=this.GMInfo,BI=this.vSBar,BL=this.hSBar;AP(BI.domNode,{height:this.GMH,width:this.sBarWidth,top:BF,left:BJ+BK-this.sBarWidth});AP(BI.domBody,{height:BH.canvasHeight});AP(BL.domNode,{width:this.GMW,height:this.sBarWidth,left:BG,top:BE+BD-this.sBarWidth});AP(BL.domBody,{width:BH.canvasWidth});},hGetRowTitleHeight:function(){var BD=this.colHeaderHArr.length;if(this.colHeaderExtraH>0){return this.colHeaderExtraH;}return this.colHeaderHArr[BD-1];},hGetColTitleWidth:function(){var BE=this.rowHeaderWArr.length,BD=this.GMInfo;if(this.rowHeaderExtraW>0){return this.rowHeaderExtraW;}if(BD.yAxisWidth>0){return BD.yAxisWidth;}return this.rowHeaderWArr[BE-1];},getCellForNode:function y(BD){return BD.identity;},getCellUnitIndex:function I(BD){return(BD.o!==undefined)?BD.o:BD._ei;},hFillContents:function(){var BN=this,BK=this.GMInfo,BQ=this.HTML5PROPS,BP=this.GMController,BH=BN.getWidgetPropertyValue(AF.ROW_HEADER_SHOW),BG=BN.getWidgetPropertyValue(AF.COLUMN_HEADER_SHOW),BJ=function(){var Bg,BZ,BS,BY,BT,Bi=BN.domTabHeader,Bf=BN.rowHeaderWArr.length,Be=BN.colHeaderHArr.length,Bb=BN.rowHeaderExtraW>0||BN.colHeaderExtraH>0,BU=BN.GMController,Bd=0,BR=0,BV=BP.getRowTitleInfo(true),BW=BP.getColTitleInfo(true),Bh=BP.getYAxisInfo(),BX,Bj=[],Ba;BN.rowTitleH=BY=BN.hGetRowTitleHeight();BN.colTitleW=BT=BN.hGetColTitleWidth();Bi.innerHTML="";for(Bg=0;Bg<Bf;Bg++){Bj=[];BZ=document.createElement("div");BZ.setAttribute("class","gm-rowheader-title");AP(BZ,{width:BN.rowHeaderWArr[Bg],height:BY,left:Bd},true);BZ.setAttribute("type",G.GM_ROW_HEADER_TITLE);BZ.setAttribute("depth",String(Bg));U.applyStyles2DomNode(BZ,BQ.RH_BK);Bi.appendChild(BZ);BZ.identity=new A7.TitleCellIdentity(BV.items[Bg]);if(BH&&BV.items[Bg].n){Ba={text:BV.items[Bg].n,extraAttributes:{type:G.GM_ROW_HEADER_TITLE}};Bj.push(Ba);BX=new mstrmojo.gm.TitleLabelCapsule({width:BN.rowHeaderWArr[Bg],height:BY,cssClass:"gm-rowheader-title",styles:BQ.RH_TITLE,labelObj:Bj[0],maxLineCount:BP.getAttributesOnDropZone("Columns").length>0?2:3});BX.render();BX.parent=BN;BN.addDisposable(BX);BS=BX.domNode;U.applyStyles2DomNode(BS,BQ.RH_BK);if(BS.firstChild&&BS.firstChild.firstChild){U.applyStyles2DomNode(BS.firstChild.firstChild,BQ.RH_TITLE);}BS.identity=new A7.TitleCellIdentity(BV.items[Bg]);BZ.appendChild(BS);}Bd+=BN.rowHeaderWArr[Bg]+O;}for(Bg=0;Bg<Be;Bg++){Bj=[];BZ=document.createElement("div");BZ.setAttribute("class","gm-colheader-title");AP(BZ,{width:BT,height:BN.colHeaderHArr[Bg],top:BR,right:0},true);BZ.setAttribute("type",G.GM_COL_HEADER_TITLE);BZ.setAttribute("depth",String(Bg));U.applyStyles2DomNode(BZ,BQ.CH_BK);Bi.appendChild(BZ);BZ.identity=new A7.TitleCellIdentity(BW.items[Bg]);if(BG&&BW.items[Bg].n){Ba={text:BW.items[Bg].n,extraAttributes:{type:G.GM_COL_HEADER_TITLE}};Bj.push(Ba);BX=new mstrmojo.gm.TitleLabelCapsule({width:BT,height:BN.colHeaderHArr[Bg],cssClass:"gm-colheader-title",styles:BQ.CH_TITLE,labelObj:Bj[0],maxLineCount:BP.getAttributesOnDropZone("Rows").length>0?2:3});BX.render();BX.parent=BN;BN.addDisposable(BX);BS=BX.domNode;U.applyStyles2DomNode(BS,BQ.CH_BK);if(BS.firstChild&&BS.firstChild.firstChild){U.applyStyles2DomNode(BS.firstChild.firstChild,BQ.CH_TITLE);}BS.identity=new A7.TitleCellIdentity(BW.items[Bg]);BZ.appendChild(BS);}BR+=BN.colHeaderHArr[Bg]+A4;}var Bc=BN.getWidgetPropertyValue(AF.Y_AXIS_TITLE_SHOW);if(Bc===undefined){Bc=BN.getWidgetPropertyDefaultValue(AF.Y_AXIS_TITLE_SHOW,{isMetric:BU.yIsNumeric});}if(Bb&&BK.yAxisWidth>0&&Bc&&Bh.isMetric===false&&Bh.items.length>0){Bj=[];if(Bh.isMetric===false&&Bh.items.length>0){b.forEach(Bh.items,function(Bl,Bk){Ba={text:Bl,extraAttributes:{type:G.GM_YLABEL,dzId:B.YAxis,dzIndex:Bk,identity:new A7.AttributeAxisTitleIdentity({n:Bl,tid:Bh.ids[Bk],objType:Aj.Y_ATTRIBUTE_AXIS_TITLE})}};Bj.push(Ba);});}BX=new mstrmojo.VisAxisLabel({width:BT+"px",height:Math.min(BY,BN.textHeightInY)+"px",cssClass:"gm-yaxis-cell-label",styles:BU.yTitleStyles,align:"center",contentData:Bj});BX.render();BX.parent=BN;BN.addDisposable(BX);BX.domNode.style.bottom=Math.max((BY-BN.textHeightInY)/2,0)+"px";BX.domNode.style.right=Math.max((BT-BX.contentWidth)/2,0)+"px";Bi.appendChild(BX.domNode);BN.extraTitleDiv=BX.domNode;}else{BN.extraTitleDiv=undefined;}},BM=function BM(){var BT,BU,BS=0,BR=BN.domRowHeader.childNodes;for(BT=0;BT<BN.rowHeaderWArr.length;BT++){if(BR[BT]){BU=BR[BT];}else{BU=document.createElement("div");BN.domRowHeader.appendChild(BU);}BU.setAttribute("class","gm-rowheader-lv2");AP(BU,{width:BN.rowHeaderWArr[BT],height:BN.GMH,left:BS,"z-index":BN.rowHeaderWArr.length-1-BT});BS+=BN.rowHeaderWArr[BT]+O;if(BN.slaveRowHeaders[BT]){BN.slaveRowHeaders[BT].resizeAbs(BN.rowHeaderWArr[BT],BN.GMH);}}},BE=function BE(){var BT,BU,BR=0,BS=BN.domColHeader.childNodes;for(BT=0;BT<BN.colHeaderHArr.length;BT++){if(BS[BT]){BU=BS[BT];}else{BU=document.createElement("div");BN.domColHeader.appendChild(BU);}BU.setAttribute("class","gm-colheader-lv2");AP(BU,{width:BN.GMW,height:BN.colHeaderHArr[BT],top:BR,"z-index":BN.colHeaderHArr.length-1-BT});BR+=BN.colHeaderHArr[BT]+A4;if(BN.slaveColHeaders[BT]){BN.slaveColHeaders[BT].resizeAbs(BN.GMW,BN.colHeaderHArr[BT]);}}if(BN.colHeaderExtraH>0){if(BS[BT]){BU=BS[BT];}else{BU=document.createElement("div");BN.domColHeader.appendChild(BU);}BN.domXAxis2=BU;BU.setAttribute("class","gm-colheader-lv2");AP(BU,{width:BN.GMW,height:BN.colHeaderExtraH,top:BR});if(BN.slaveColHeaders[BT]){BN.slaveColHeaders[BT].resizeAbs(BN.GMW,BN.colHeaderExtraH);}}else{BN.domXAxis2=null;}},BD=function(){var BS,BR=BN.domYAxis.childNodes;if(BR[0]){BS=BR[0];}else{BS=document.createElement("div");BN.domYAxis.appendChild(BS);}AP(BS,{position:"absolute",width:BK.yAxisWidth,height:BN.GMH});if(BN.slaveYAxis){BN.slaveYAxis.resizeAbs(BK.yAxisWidth,BN.GMH);}},BI=function(){var BS,BR=BN.domYAxis2.childNodes;if(BR[0]){BS=BR[0];}else{BS=document.createElement("div");BN.domYAxis2.appendChild(BS);}AP(BS,{position:"absolute",width:BK.yAxis2Width,height:BN.GMH});if(BN.slaveYAxis2){BN.slaveYAxis2.resizeAbs(BK.yAxis2Width,BN.GMH);}},BF=function(){var BS,BR=BN.domXAxis.childNodes;if(BR[0]){BS=BR[0];}else{BS=document.createElement("div");BN.domXAxis.appendChild(BS);}AP(BS,{position:"absolute",width:BN.GMW,height:BK.xAxisHeight});if(BN.slaveXAxis){BN.slaveXAxis.resizeAbs(BN.GMW,BK.xAxisHeight);}},BO=function(){var BT,BS=BN.masterViewer,BR=BN.domGM.childNodes;if(BR[0]){BT=BR[0];}else{BT=document.createElement("div");BN.domGM.appendChild(BT);}AP(BT,{position:"absolute",width:BN.GMW,height:BN.GMH});if(BS){BS.resizeAbs(BN.GMW,BN.GMH);}},BL=function(){var BR=BN.legend;if(BR){BR.width=BN.legendW;BR.height=BN.legendH;}};BJ();BM();BE();BD();BI();BF();BO();BL();},hPlaceOutBorders:function(BH){var BK,BI,BP=this.actualWidth,BO=this.actualHeight,BU=document,BS=this.domMainContainer,BE=this.lines.borders,BG=this.getWidgetPropertyValue(Ac.OUTSIDE_BORDER),BR=this.HTML5PROPS.MATRIX_LINE_V,BF=this.HTML5PROPS.MATRIX_LINE_H,BQ=parseInt(BR.borderWidth,10)||0,BT=this.getWidgetPropertyValue(Ac.FIT_TO),BD=this.legendIsRight(BH),BJ=this.getWidth(),BL=this.getHeight(),BM=this.legendW,BN=1;if(!BG){BI=BE.left;if(BI){BI.hide();}BI=BE.right;if(BI){BI.hide();}BI=BE.top;if(BI){BI.hide();}BI=BE.bottom;if(BI){BI.hide();}return ;}BI=BE.left;if(BM>0&&!BD){if(!BI){BK=BU.createElement("div");BI=new mstrmojo.VisSplitter({placeholder:BK,type:G.GM_V_MATRIX_LINE,identity:{objType:Aj.V_MATRIX_LINE},styles:BR,dir:"v",parent:this,draggable:false});this.addDisposable(BI);BI.render();BK=BI.domNode;BS.appendChild(BK);BE.left=BI;}BI.updatePosition({left:0,height:BO});}else{if(BI){BI.hide();}}BI=BE.right;if((BM<=0&&((BJ-BP)>BN))||(BM>0&&(BD||((BJ-BP-BM-this.legendP)>BN)))){if(!BI){BK=BU.createElement("div");BI=new mstrmojo.VisSplitter({placeholder:BK,type:G.GM_V_MATRIX_LINE,identity:{objType:Aj.V_MATRIX_LINE},styles:BR,dir:"v",parent:this,context:{dock:Ak.RIGHT,type:G.GM_RIGHT_BORDER},draggable:BT===AG.CONTENT});this.addDisposable(BI);BI.render();BK=BI.domNode;BS.appendChild(BK);BE.right=BI;}BI.updatePosition({left:BP,height:BO});BI.updateSize(e.call(this,G.GM_RIGHT_BORDER));}else{if(BI){BI.hide();}}BI=BE.bottom;if((BL-BO)>BN){if(!BI){BK=BU.createElement("div");BI=new mstrmojo.VisSplitter({placeholder:BK,type:G.GM_H_MATRIX_LINE,identity:{objType:Aj.H_MATRIX_LINE},styles:BF,dir:"h",parent:this,context:{dock:Ak.BOTTOM,type:G.GM_BOTTOM_BORDER},draggable:BT===AG.CONTENT});this.addDisposable(BI);BI.render();BK=BI.domNode;BS.appendChild(BK);BE.bottom=BI;}BI.updatePosition({top:BO,width:BP+BQ});BI.updateSize(e.call(this,G.GM_BOTTOM_BORDER));}else{if(BI){BI.hide();}}},hPlaceYResizers:function(BM){var BD,BN,BE=this.GMInfo,BG=BE.yAxisWidth,BJ=BE.yAxis2Width,BL=this.actualHeight,BK=document,BF=this.domMainContainer,BI=this.lines.axes,BH=this.getWidgetPropertyValue(AF.Y_AXIS_LINE_SHOW);if(!BH){BN=BI.y1;if(BN){BN.domNode.style.display="none";}BN=BI.y2;if(BN){BN.domNode.style.display="none";}return ;}BN=BI.y1;if(BG>0){if(!BN){BD=BK.createElement("div");BN=new mstrmojo.VisSplitter({placeholder:BD,cssClass:"gm-axis-line",type:G.GM_YAXIS_LINE,identity:{objType:Aj.Y_AXIS},styles:BM,dir:"v",context:{dock:Ak.RIGHT,type:G.GM_YAXIS},parent:this});this.addDisposable(BN);BN.render();BD=BN.domNode;BF.appendChild(BD);BI.y1=BN;}BN.updatePosition({left:this.offsetX-D,height:BL-BE.xAxisHeight});BN.updateSize(e.call(this,G.GM_YAXIS));}else{if(BN){BN.hide();}}BN=BI.y2;if(BJ>0){if(!BN){BD=BK.createElement("div");BN=new mstrmojo.VisSplitter({placeholder:BD,cssClass:"gm-axis-line",type:G.GM_YAXIS2_LINE,identity:{objType:Aj.Y2_AXIS},styles:BM,dir:"v",context:{dock:Ak.LEFT,type:G.GM_YAXIS2},parent:this});this.addDisposable(BN);BN.render();BD=BN.domNode;BF.appendChild(BD);BI.y2=BN;}BN.updatePosition({left:this.offsetX2-D,height:BL-BE.xAxisHeight});BN.updateSize(e.call(this,G.GM_YAXIS2));}else{if(BN){BN.hide();}}},hPlaceXResizers:function(BN){var BE,BO,BK=this.GMController,BG=this.GMInfo,BD=BG.xAxisHeight,BJ=BG.xAxis2Height,BF=this.actualWidth,BM=document,BH=this.domMainContainer,BI=this.lines.axes,BL=this.getWidgetPropertyValue(AF.X_AXIS_LINE_SHOW);if(!BL){BO=BI.x1;if(BO){BO.domNode.style.display="none";}BO=BI.x2;if(BO){BO.domNode.style.display="none";}return ;}BO=BI.x1;if(BD>0){if(!BO){BE=BM.createElement("div");BO=new mstrmojo.VisSplitter({placeholder:BE,cssClass:"gm-axis-line",type:G.GM_XAXIS_LINE,identity:{objType:Aj.X_AXIS},styles:BN,dir:"h",context:{dock:Ak.TOP,type:G.GM_XAXIS},parent:this});this.addDisposable(BO);BO.render();BE=BO.domNode;BH.appendChild(BE);BI.x1=BO;}BO.updatePosition({top:this.offsetY2-AE,width:this.rowHeaderW?BF:BF-BG.yAxis2Width-BG.yAxisWidth,left:this.rowHeaderW?0:BG.yAxisWidth});BO.updateSize(e.call(this,G.GM_XAXIS));}else{if(BO){BO.hide();}}BO=BI.x2;if(BJ>0&&BK.haveX2){if(!BO){BE=BM.createElement("div");BO=new mstrmojo.VisSplitter({placeholder:BE,cssClass:"gm-axis-line",type:G.GM_XAXIS2_LINE,identity:{objType:Aj.X2_AXIS},styles:BN,dir:"h",context:{dock:Ak.BOTTOM,type:G.GM_XAXIS2},parent:this});this.addDisposable(BO);BO.render();BE=BO.domNode;BH.appendChild(BE);BI.x2=BO;}BO.updatePosition({top:this.offsetY-AE,width:this.rowHeaderW?BF:BF-BG.yAxis2Width-BG.yAxisWidth,left:this.rowHeaderW?0:BG.yAxisWidth});BO.updateSize(e.call(this,G.GM_XAXIS2));}else{if(BO){BO.hide();}}},hPlaceColResizers:function(BN){var BM=this.getWidgetPropertyValue(AF.V_MATRIX_LINES_SHOW),BE=this.lines.cols;if(!BM){BE.forEach(function(Bc){if(Bc){Bc.hide();}});return ;}var BX,BT,BP,BU,BI,Ba,Bb=document,BD=Bb.createDocumentFragment(),BS=this.manager,BF=this.GMController,BJ=!(BF.haveX2||BF.isFooterAbove),BH=this.GMInfo.xAxis2Height,BV=this.GMInfo.nCols,BK=BS.intersectCheck4Col(this.GMW),BR=BK.start,BG=BK.end,BW=this.actualHeight,BZ=this.domMainContainer,BO=this.offsetX,BY=this.colHeaderHArr,BQ=BY.length;BW=AQ.minus(BW,this.GMInfo.xAxisHeight,AE);var BL=BS.collectColDepths(BV);for(BX=0;BX<BV;BX++){BP=BE[BX];if(BX>=BR&&BX<BG&&BX<BV-1){Ba=BL[BX];BI=BS.getColOffset(BX+1)+BO;BU=AQ.sum(BY,A4,Ba);if(Ba===BQ&&BJ){BU=AQ.add(BU,BH,A4);}if(!BP){BT=Bb.createElement("div");BP=new mstrmojo.VisSplitter({placeholder:BT,type:G.GM_V_CHART_LINE,identity:{objType:Aj.V_MATRIX_LINE},styles:BN,dir:"v",context:{dock:Ak.RIGHT,type:G.GM_CHART_COL,depth:BX},markControlType:true,parent:this});this.addDisposable(BP);BP.render();BT=BP.domNode;BD.appendChild(BT);BE[BX]=BP;this.splitterListeners.push(BP.attachEventListener("splitterMoved",this.id,function(Bc){this.onSplitterMoved(Bc.position,Bc.info);}));}BP.updatePosition({left:BI-A4,top:BU,height:BW-BU});BP.updateSize(e.call(this,G.GM_V_CHART_LINE,BX));}else{if(BP){BP.hide();}}}BZ.appendChild(BD);},hPlaceVGridLines:function(BW,Bf){var Bb,Ba,BY,BM,BP,BU,BR,BF=0,BD=0,BX=this.GMH,BV=0,BG=this.lines,Be=BG.vMajorGridLines,BK=BG.vMinorGridLines,BH=this.GMController,BL=BH.xMajorGridLinePos,BZ=BH.xMinorGridLinePos,BT=this.manager,BO=BT.intersectCheck4Col(this.GMW),BS=BO.start,BI=BO.end,Bd=this.domGM,BQ=0,Bg=document,BE=Bg.createDocumentFragment(),BJ=this.getWidgetPropertyValue(AF.MAJOR_GRID_LINES_SHOW),BN=this.getWidgetPropertyValue(AF.MINOR_GRID_LINES_SHOW)===AK.SHOW,Bc=false;if(BJ===AK.AUTO){Bc=(this.GMInfo.nRows===1&&this.GMInfo.nCols===1);}else{if(BJ===AK.SHOW){Bc=true;}}for(Bb=BS;Bb<=BI;Bb++){BM=BT.getColOffset(Bb)+BQ;if(Bc){BP=BL[Bb];if(!BP){continue;}for(Ba=0,BY=BP.length;Ba<BY;Ba++,BF++){BR=Be[BF];if(!BR){BU=Bg.createElement("div");BR=new mstrmojo.VisSplitter({placeholder:BU,type:G.GM_V_GRID_LINE,identity:{objType:Aj.GRID_LINE},styles:BW,dir:"v",cssClass:"gm-grid-line-major",bodyCssClass:"gm-grid-line-body-major",draggable:false,parent:this});this.addDisposable(BR);BR.render();BU=BR.domNode;BE.appendChild(BU);Be[BF]=BR;}BR.updateStyle(BW);BR.updatePosition({top:BV,left:BM+BP[Ba],height:BX});}}if(BN){BP=BZ[Bb];for(Ba=0,BY=BP.length;Ba<BY;Ba++,BD++){BR=BK[BD];if(!BR){BU=Bg.createElement("div");BR=new mstrmojo.VisSplitter({placeholder:BU,type:G.GM_V_MINOR_GRID_LINE,identity:{objType:Aj.MINOR_GRID_LINE},styles:Bf,dir:"v",cssClass:"gm-grid-line-minor",bodyCssClass:"gm-grid-line-body-minor",draggable:false,parent:this});this.addDisposable(BR);BR.render();BU=BR.domNode;BE.appendChild(BU);BK[BD]=BR;}BR.updateStyle(Bf);BR.updatePosition({top:BV,left:BM+BP[Ba],height:BX});}}}for(Ba=BF,BY=Be.length;Ba<BY;Ba++){BR=Be[Ba];if(BR){BR.hide();}}for(Ba=BD,BY=BK.length;Ba<BY;Ba++){BR=BK[Ba];if(BR){BR.hide();}}Bd.appendChild(BE);},hPlaceHGridLines:function(BU,Bf){var Bb,Ba,BV,BT,BP,BS,BQ,BF=0,BD=0,BW=this.GMW,BL=0,BG=this.lines,Be=BG.hMajorGridLines,BJ=BG.hMinorGridLines,BH=this.GMController,BK=BH.yMajorGridLinePos,BY=BH.yMinorGridLinePos,BR=this.manager,BN=BR.intersectCheck4Row(this.GMH),BO=BN.start,BX=BN.end,Bd=this.domGM,BZ=0,Bg=document,BE=Bg.createDocumentFragment(),BI=this.getWidgetPropertyValue(AF.MAJOR_GRID_LINES_SHOW),BM=this.getWidgetPropertyValue(AF.MINOR_GRID_LINES_SHOW)===AK.SHOW,Bc=false;if(BI===AK.AUTO){Bc=(this.GMInfo.nRows===1&&this.GMInfo.nCols===1);}else{if(BI===AK.SHOW){Bc=true;}}for(Bb=BO;Bb<=BX;Bb++){BT=BR.getRowOffset(Bb)+BZ;if(Bc){BP=BK[Bb];if(!BP){continue;}for(Ba=0,BV=BP.length;Ba<BV;Ba++,BF++){BQ=Be[BF];if(!BQ){BS=Bg.createElement("div");BQ=new mstrmojo.VisSplitter({placeholder:BS,type:G.GM_H_GRID_LINE,identity:{objType:Aj.GRID_LINE},styles:BU,dir:"h",cssClass:"gm-grid-line-major",bodyCssClass:"gm-grid-line-body-major",draggable:false,parent:this});this.addDisposable(BQ);BQ.render();BS=BQ.domNode;BE.appendChild(BS);Be[BF]=BQ;}BQ.updateStyle(BU);BQ.updatePosition({top:BT+BP[Ba],left:BL,width:BW});}}if(BM){BP=BY[Bb];for(Ba=0,BV=BP.length;Ba<BV;Ba++,BD++){BQ=BJ[BD];if(!BQ){BS=Bg.createElement("div");BQ=new mstrmojo.VisSplitter({placeholder:BS,type:G.GM_H_MINOR_GRID_LINE,identity:{objType:Aj.MINOR_GRID_LINE},styles:Bf,dir:"h",cssClass:"gm-grid-line-minor",bodyCssClass:"gm-grid-line-body-minor",draggable:false,parent:this});this.addDisposable(BQ);BQ.render();BS=BQ.domNode;BE.appendChild(BS);BJ[BD]=BQ;}BQ.updateStyle(Bf);BQ.updatePosition({top:BT+BP[Ba],left:BL,width:BW});}}}for(Ba=BF,BV=Be.length;Ba<BV;Ba++){BQ=Be[Ba];if(BQ){BQ.hide();}}for(Ba=BD,BV=BJ.length;Ba<BV;Ba++){BQ=BJ[Ba];if(BQ){BQ.hide();}}Bd.appendChild(BE);},hPlaceRowResizers:function(BL){var BK=this.getWidgetPropertyValue(AF.H_MATRIX_LINES_SHOW),BF=this.lines.rows;if(!BK){BF.forEach(function(BX){if(BX){BX.hide();}});return ;}var BU,BP,BM,BQ,BG,BW=document,BD=BW.createDocumentFragment(),BO=this.manager,BN=this.GMInfo.nRows,BH=BO.intersectCheck4Row(this.GMH),BJ=BH.start,BS=BH.end,BR=this.actualWidth,BV=this.domMainContainer,BT=this.offsetY,BE=this.rowHeaderWArr;var BI=BO.collectRowDepths(BN);for(BU=0;BU<BN;BU++){BM=BF[BU];if(BU>=BJ&&BU<BS&&BU<BN-1){BQ=BO.getRowOffset(BU+1)+BT;BG=AQ.sum(BE,O,BI[BU]);if(!BM){BP=BW.createElement("div");BM=new mstrmojo.VisSplitter({placeholder:BP,type:G.GM_H_CHART_LINE,identity:{objType:Aj.H_MATRIX_LINE},styles:BL,dir:"h",context:{dock:Ak.BOTTOM,type:G.GM_CHART_ROW,depth:BU},markControlType:true,parent:this});this.addDisposable(BM);BM.render();BP=BM.domNode;BD.appendChild(BP);BF[BU]=BM;this.splitterListeners.push(BM.attachEventListener("splitterMoved",this.id,function(BX){this.onSplitterMoved(BX.position,BX.info);}));}BM.updatePosition({top:BQ,left:BG,width:BR-BG});BM.updateSize(e.call(this,G.GM_H_CHART_LINE,BU));}else{if(BM){BM.hide();}}}BV.appendChild(BD);},hPlaceRHResizers:function(BP){var BJ,BE,BQ,BL=this.colHeaderH,BK=0,BI=this.rowHeaderWArr,BG=BI.length,BN=this.actualHeight,BM=document,BH=this.domMainContainer,BO=this.lines.vlines,BF=this.GMController,BD=this.getWidgetPropertyValue(AF.V_MATRIX_LINES_SHOW);for(BJ=0;BJ<BG;BJ++){BK+=BI[BJ];BQ=BO[BJ];if(!BD||BI[BJ]===0){if(BQ){BQ.hide();}continue;}if(BJ===BG-1||((BJ===BG-2)&&(BF.haveY1===false))){BL=0;}if(!BQ){BE=BM.createElement("div");BQ=new mstrmojo.VisSplitter({placeholder:BE,type:G.GM_V_MATRIX_LINE,identity:{objType:Aj.V_MATRIX_LINE},styles:BP,dir:"v",context:{dock:Ak.RIGHT,type:G.GM_ROW_HEADER,depth:BJ},parent:this});this.addDisposable(BQ);BQ.render();BE=BQ.domNode;BH.appendChild(BE);BO[BJ]=BQ;}BQ.updatePosition({left:BK,top:BL,height:BN-BL-this.GMInfo.xAxisHeight});BQ.updateSize(e.call(this,G.GM_V_MATRIX_LINE,BJ));BK+=O;}BQ=BO[BJ];if(this.rowHeaderExtraW>0){BK+=this.rowHeaderExtraW;if(!BD){if(BQ){BQ.hide();}}else{if(!BQ){BE=BM.createElement("div");BQ=new mstrmojo.VisSplitter({placeholder:BE,type:G.GM_V_MATRIX_LINE,identity:{objType:Aj.V_MATRIX_LINE},styles:BP,dir:"v",context:{dock:Ak.RIGHT,type:G.GM_V_EXTRA_LINE},parent:this});this.addDisposable(BQ);BQ.render();BE=BQ.domNode;BH.appendChild(BE);BO[BJ]=BQ;}BQ.updatePosition({left:BK,top:0,height:BN-this.GMInfo.xAxisHeight});BQ.updateSize(e.call(this,G.GM_V_EXTRA_LINE));}}else{if(BQ){BQ.hide();}}},hPlaceCHResizers:function(BQ){var BJ,BD,BR,BH=this.rowHeaderW,BF=this.GMController,BM=0,BN=this.GMInfo.xAxis2Height,BK=this.colHeaderHArr,BG=BK.length,BE=this.actualWidth,BP=document,BI=this.domMainContainer,BL=this.lines.hlines,BO=this.getWidgetPropertyValue(AF.H_MATRIX_LINES_SHOW);for(BJ=0;BJ<BG;BJ++){BM+=BK[BJ];BR=BL[BJ];BH=this.rowHeaderW;if(!BO||BK[BJ]===0){if(BR){BR.hide();}continue;}if(BJ===BG-1){BH=0;}if((BJ!==BG-1)&&(BF.haveY1===false)&&this.colTitleW){BH-=this.colTitleW;if(this.domTabHeader.offsetWidth===this.colTitleW){BH=0;}}if(!BR){BD=BP.createElement("div");BR=new mstrmojo.VisSplitter({placeholder:BD,type:G.GM_H_MATRIX_LINE,identity:{objType:Aj.H_MATRIX_LINE},styles:BQ,dir:"h",context:{dock:Ak.BOTTOM,type:G.GM_COL_HEADER,depth:BJ},parent:this});this.addDisposable(BR);BR.render();BD=BR.domNode;BI.appendChild(BD);BL[BJ]=BR;}BR.updatePosition({top:BM,left:BH,width:BE-BH});BR.updateSize(e.call(this,G.GM_H_MATRIX_LINE,BJ,{max:this.colHeaderMaxHeightArr[BJ]}));BM+=A4;}BR=BL[BJ];if(this.colHeaderExtraH>0){BM+=BN;if(!BO){if(BR){BR.hide();}}else{if(!BR){BD=BP.createElement("div");BR=new mstrmojo.VisSplitter({placeholder:BD,type:G.GM_H_MATRIX_LINE,identity:{objType:Aj.H_MATRIX_LINE},styles:BQ,dir:"h",context:{dock:Ak.BOTTOM,type:G.GM_XAXIS2},parent:this});this.addDisposable(BR);BR.render();BD=BR.domNode;BI.appendChild(BD);BL[BJ]=BR;}BR.updatePosition({top:BM,width:BE});BR.updateSize(e.call(this,G.GM_XAXIS2,undefined,{max:this.rowHeaderMaxHeight}));}}else{if(BR){BR.hide();}}},hPlaceYSplitters:function(BS){var BI=function(Bc){if(!Bc.haveY1||!Bc.hasHeaderInY){return false;}var BX=Bc.isMetricNamesInZone("Rows"),Bb=Bc.getMetricsOnXAxis(),BY=Bc.getMetricsOnPrimaryXAxis(),Ba=Bb&&Bb.length,BV=BY&&BY.length,BZ=Bc.getAttributesOnDropZone("YAxis"),BU=BZ&&BZ.length,BW=Bc.getChartInfo();if(BW.isGrid&&BW.isPie){Bb=Bc.getMetricsOnAngleBy();Ba=Bb&&Bb.length;}return BX&&Ba>=2&&BU>=1&&(Ba===BV||BV===0);};var BE,BT,BG=this.GMInfo,BL=BG.yAxisWidth,BN=BG.yAxis2Width,BQ=this.GMH,BO=document,BH=this.domMainContainer,BJ=this.lines.axisSplitters,BP=this.GMController,BF=this.getWidgetPropertyValue(AF.V_MATRIX_LINES_SHOW),BM=BF&&BI(BP),BR=false,BD=0,BK=this.textHeightInY+2*BD;if(!BM){BT=BJ.y1Splitter;if(BT){BT.domNode.style.display="none";}}else{BT=BJ.y1Splitter;if(BL>BK){if(!BT){BE=BO.createElement("div");BT=new mstrmojo.VisSplitter({placeholder:BE,type:G.GM_V_MATRIX_LINE,identity:{objType:Aj.V_MATRIX_LINE},styles:BS,dir:"v",draggable:false,parent:this});this.addDisposable(BT);BT.render();BE=BT.domNode;BH.appendChild(BE);BJ.y1Splitter=BT;}BT.updatePosition({left:this.offsetX-BL+BK-D,top:this.offsetY,height:BQ});}else{if(BT){BT.hide();}}}if(!BR){BT=BJ.y2Splitter;if(BT){BT.domNode.style.display="none";}}else{BT=BJ.y2Splitter;if(BN>BK){if(!BT){BE=BO.createElement("div");BT=new mstrmojo.VisSplitter({placeholder:BE,type:G.GM_V_MATRIX_LINE,identity:{objType:Aj.V_MATRIX_LINE},styles:BS,dir:"v",draggable:false,parent:this});this.addDisposable(BT);BT.render();BE=BT.domNode;BH.appendChild(BE);BJ.y2Splitter=BT;}BT.updatePosition({left:this.offsetX2+BN-BK-D,top:this.offsetY,height:BQ});}else{if(BT){BT.hide();}}}},hInitWidgetMatrixes:function(){var Bc=this,BT=this.GMInfo,Ba=Bc.GMController,BN=Ba.manager,BY=A7.EnumDrawingAPI,BV=Ba.getControllerAPI(BY.GET_CHART_WIDTH),BU=Ba.getControllerAPI(BY.GET_CHART_HEIGHT),BS=Ba.getControllerAPI(BY.GET_ROW_HEADER),BR=Ba.getControllerAPI(BY.GET_COLUMN_HEADER),BQ=Ba.getControllerAPI(BY.CREATE_UNIT_Y_AXIS),BP=Ba.getControllerAPI(BY.CREATE_UNIT_X_AXIS),BO=Ba.getControllerAPI(BY.GET_FULL_FLEDGED_CHART),BM=Ba.getControllerAPI(BY.GET_ROW_SPAN),BL=Ba.getControllerAPI(BY.GET_COLUMN_SPAN),BG=Ba.getControllerAPI(BY.UPDATE_MINI_CHART),BF=Ba.getControllerAPI(BY.UPDATE_Y_AXIS),BE=Ba.getControllerAPI(BY.UPDATE_X_AXIS),BD=Ba.getControllerAPI(BY.GET_EXTRA_COLUMN_HEADER),Be=Ba.getControllerAPI(BY.UPDATE_ROW_HEADER),Bd=Ba.getControllerAPI(BY.UPDATE_COLUMN_HEADER),Bb=[],BX=[],BK=function(){var Bg,Bk=Bc.rowHeaderWArr.length,Bf=Bc.domRowHeader.childNodes,Bj,Bi,Bh;for(Bg=0;Bg<Bk;Bg++){Bj={name:"rh",manager:BN,depth:Bg,depthOnRow:false,placeholder:Bf[Bg],phCss:"gm-rowheader-cell",nRows:BT.nRows,nCols:1,chartW:Bc.rowHeaderWArr[Bg],chartH:BT.avgChartHeight,fixWidth:true,contentSummary:Ba.getRowHeaderSummary(Bg),useOwnSplitter:false};Bi=Bc.addDisposable(new A7.GMContainer(Bj));Bh=Bi.API;Bh.createUnitChart=BS;Bh.updateUnitChart=Be;Bh.getRowSpan=BM;Bi.render();Bc.slaveRowHeaders.push(Bi);BX.push(Bi);}},BJ=function(){var Bg,Bi,Bh,Bk,Bj=Bc.colHeaderHArr.length,Bf=Bc.domColHeader.childNodes;for(Bg=0;Bg<Bj;Bg++){Bk={name:"ch",manager:BN,depth:Bg,depthOnRow:true,placeholder:Bf[Bg],phCss:"gm-colheader-cell",nRows:1,nCols:BT.nCols,chartW:BT.avgChartWidth,chartH:Bc.colHeaderHArr[Bg],fixHeight:true,contentSummary:Ba.getColHeaderSummary(Bg),useOwnSplitter:false};Bi=Bc.addDisposable(new A7.GMContainer(Bk));Bh=Bi.API;Bh.createUnitChart=BR;Bh.updateUnitChart=Bd;Bh.getColSpan=BL;Bi.render();Bc.slaveColHeaders.push(Bi);Bb.push(Bi);}if(Bc.colHeaderExtraH>0){Bk={manager:BN,placeholder:Bf[Bg],phCss:" gm-colheader-cell-dummy",nRows:1,nCols:BT.nCols,chartW:BT.avgChartWidth,chartH:Bc.colHeaderExtraH,fixHeight:true,useOwnSplitter:false};Bi=Bc.slaveXAxis2=Bc.addDisposable(new A7.GMContainer(Bk));Bh=Bi.API;if(Ba.haveX2){Bi.isPrimary=false;Bh.createUnitChart=BP;Bh.updateUnitChart=BE;}else{Bh.createUnitChart=BD;Bh.updateUnitChart=Bd;}Bi.render();Bi.domNode.style.backgroundColor="rgba(0,0,0,0)";Bc.slaveColHeaders.push(Bi);Bb.push(Bi);}},BZ=function(){var Bh={name:"y",manager:BN,placeholder:Bc.domYAxis.childNodes[0],phCss:"gm-yaxis-cell",nRows:BT.nRows,nCols:1,chartW:BT.yAxisWidth,chartH:BT.avgChartHeight,fixWidth:true,useOwnSplitter:false},Bg=Bc.slaveYAxis=Bc.addDisposable(new A7.GMContainer(Bh)),Bf=Bg.API;Bg.isPrimary=true;Bf.createUnitChart=BQ;Bf.updateUnitChart=BF;Bg.render();BX.push(Bg);},BW=function(){var Bf={name:"y2",manager:BN,placeholder:Bc.domYAxis2.childNodes[0],phCss:"gm-yaxis-cell",nRows:BT.nRows,nCols:1,chartW:BT.yAxis2Width,chartH:BT.avgChartHeight,fixWidth:true,useOwnSplitter:false},Bh=Bc.slaveYAxis2=Bc.addDisposable(new A7.GMContainer(Bf)),Bg=Bh.API;Bh.isPrimary=false;Bg.createUnitChart=BQ;Bg.updateUnitChart=BF;Bh.render();BX.push(Bh);},BI=function(){var Bg={name:"x",manager:BN,placeholder:Bc.domXAxis.childNodes[0],phCss:"gm-xaxis-cell",nRows:1,nCols:BT.nCols,chartH:BT.xAxisHeight,chartW:BT.avgChartWidth,fixHeight:true,useOwnSplitter:false};var Bf=Bc.slaveXAxis=Bc.addDisposable(new A7.GMContainer(Bg)),Bh=Bf.API;Bf.isPrimary=true;Bh.createUnitChart=BP;Bh.updateUnitChart=BE;Bf.render();Bb.push(Bf);},BH=function(){var Bh={name:"master",manager:BN,placeholder:Bc.domGM.childNodes[0],phCss:"gm-chart",nRows:BT.nRows,nCols:BT.nCols,chartW:BT.avgChartWidth,chartH:BT.avgChartHeight,enableLassoSelect:!Bc.formattingMode,APIOwner:Bc,useOwnSplitter:false,canvasScrolled:true,useAsSelectorOrBrushes:Bc.hasAssociatedNodes()||Bc.selectorControl,shouldDrawShapeFlag:Ba.shouldDrawShapeFlag},Bf=Bc.masterViewer=Bc.addDisposable(new A7.GMContainer(Bh)),Bg=Bf.API;Bg.createUnitChart=BO;Bg.updateUnitChart=BG;Bg.lassoSelected=Bc.lassoSelected;Bg.lassoSelecting=Bc.lassoSelecting;Bf.render();Bf.domNode.style.overflow="hidden";AX.attachMarkupEvent(Bc.id,Bf.domContainer,"scroll");};BN.setDimensions(BT.nRows,BT.nCols,BT.avgChartWidth,BT.avgChartHeight);BN.API.getChartWidth=BV;BN.API.getChartHeight=BU;BK();BJ();BZ();if(Ba.haveY2){BW();}BI();BH();BN.master=this.masterViewer;BN.hSlaves=Bb;BN.vSlaves=BX;BN.binding();BN.yAxis=this.slaveYAxis;BN.xAxis=this.slaveXAxis;BN.yAxis2=this.slaveYAxis2;BN.xAxis2=this.slaveXAxis2;this.addChildren(Bb);this.addChildren(BX);this.addChildren(this.masterViewer);},setTheme:function(BD){if(BD===AA.DARK){this.cssClass="gm-dark-theme";this.menuCssClass="gm-context-menu-dark";}else{this.cssClass="gm-light-theme";this.menuCssClass="gm-context-menu-light";}this.theme=BD;if(this.domNode){this.domNode.setAttribute("class",this.cssClass);}this.GMController.updatePalette(BD);},onLegendDropped:function(BD){this.writeGlobalProperty(Ac.LEGEND_POSITION,BD);},onLegendDropZoneChange:function n(BD){this.hLayoutLegend(BD.pos);this.hPlaceOutBorders(BD.pos);},lassoSelecting:function(){this.shouldNotTriggerClick=false;this.interactor.clearSelectedCharts();},lassoSelected:function(BE){var BD=this.interactor;BD.clearSelectedTargets();if(!BE.ctrlKey){this.clearSelections();BD.clearSelectedShapes();BD.clearSelectedCharts();this.GMController.highLightShapeIndex={};}BD.selectShapes(BE.selectedShapes,true);w.call(this,BE);this.endSelections();this.shouldNotTriggerClick=true;BD.toggleGMFade();},getReplaceType:function(){var BE=this.GMController,BF=BE.getChartInfo(),BD=(BF.isABL&&BF.dirc===A7.EnumABLDirection.HORIZONTAL);if(BD||BF.tp===V.BUBBLE||BF.tp===V.SCATTER){return 0;}return 1;},getSliceAttrNum:function(){var BF=this.GMController,BG=BF.getChartInfo(),BE=BF.getUnitsCountInSliceBy(),BD=(BG.isABL&&BG.dirc===A7.EnumABLDirection.HORIZONTAL);if(BG.isPie&&BE>0){if((this.getReplaceType()===0&&!BD)||(this.getReplaceType()===1&&BD)){return BE;}return 0;}return 0;},getMenuHandler:function P(BH){var BU=this,BJ=BU.interactor,BT=BU.GMController,BL,BK,BD;BD=this._super(BH);if(BD!==mstrmojo.emptyFn){return BD;}var BE=function(){BL=BT.getChartInfo();var Bj=new mstrmojo.ui.menus.MenuConfig();var Bb=[{id:12097,desc:"Bar",v:d.BAR},{id:12098,desc:"Line",v:d.LINE},{id:12099,desc:"Area",v:d.AREA},{id:12100,desc:"Circle",v:d.CIRCLE},{id:12101,desc:"Square",v:d.SQUARE},{id:12102,desc:"Tick",v:d.TICK},{id:12103,desc:"Ring",v:d.RING},{id:12104,desc:"Pie",v:d.PIE}];var BZ={Area:true,Line:true},Bd={Area:true,Line:true,Bar:true},Ba={},Bc=BL.isBubbleOrScatter?Bd:BZ;if(BL.isABL){Bc=Ba;}var Bh=[];Bb.forEach(function(Bk){if(!Bc[Bk.desc]){Bh.push(Bk);}});var Bi=BU.readGlobalProperty(Ac.METRIC_SHAPES).jsonObj,Be=Object.keys(Bi),Bf=false,Bg=BU.readGlobalProperty("Shape");Be=b.filter(Be,function(Bk){return Bk.indexOf(Af)<0;});if(Be.length>0){b.forEach(Be,function(Bk){if(Bi[Bk]!==Bg){Bf=true;}});}Bh.forEach(function(Bk){Bj.addMenuItem(mstrmojo.desc(Bk.id,Bk.desc),Bf?"":(d[Bk.desc.toUpperCase()]===Bg)?"on":"",function(){BU.setWidgetPropertyValue(Ac.METRIC_SHAPES,{});BU.processChangeShape(Bk.v);});});return Bj;};var BW=function(Bc){var BZ=Bc.ctxt,Ba=BZ.dtlb,Bb=BZ.mid;v.call(BU,Bb,Ba);};var BI=function(Bc){var BZ=Bc.ctxt,Bd=BZ.sp,Bb=BZ.mid,Ba;Ba=BU.readGlobalProperty(Ac.METRIC_SHAPES);Ba.setProperty(Bb,Bd);BU.writeGlobalProperty(Ac.METRIC_SHAPES,Ba,undefined);};var BX=function(){BU.updateAfterKeepOnly(true);BU.noHighlightAfterKeepOnlyExcludeDrill=true;};var BR=function(){BU.updateAfterKeepOnly(false);BU.noHighlightAfterKeepOnlyExcludeDrill=true;};var BY=function(Ba){var BZ=Ba.ctxt.drillUnit;BU.updateAfterKeepOnlyAndShow(BZ);BU.noHighlightAfterKeepOnlyExcludeDrill=true;};var BP=function(){BK=BT.getSelectedObjectsInfo(BJ.selectedShapes);BU.showData(BK);BU.noReorderAfterShowData=true;};var BV=function(){BU.updateAfterKeepOnly(true);BU.noHighlightAfterKeepOnlyExcludeDrill=true;};var BM=function(){BU.updateAfterKeepOnly(false);BU.noHighlightAfterKeepOnlyExcludeDrill=true;};var BS=function(Ba){var BZ=Ba.ctxt.drillUnit,Bb=Ba.ctxt.fromUnit;BU.updateAfterKeepOnlyAndShow(BZ,Bb);BU.noHighlightAfterKeepOnlyExcludeDrill=true;};var BF=function(Bd){var Ba=Bd.ctxt,BZ,Bf,Bc,Be,Bb;BZ=Ba.isAsc;Bb=Ba.identity;Bf=Ba.selInfo;BT.sortingMetric=false;if(Bb||Bf){Bc=BT.getAttributeSortPlusExistedMetricSort(Bb||Bf,BZ);Be=BT.getSortActions(Bc);BU.updateAfterSort(Be);}else{U.visPrint("undefined identity or selection info");}};var BO=function(BZ){var Bh=BZ.ctxt,Bg,Be,Bf,Bc;Bg=Bh.isAsc;Be=Bh.selInfo;Bc=Be.cellHandle;if(Bc){BT.sortingMetric=true;Bf=BT.getMetricSortDefinition(Bc,Bg);var Bd=BT.getSortActions(Bf);BU.setWidgetPropertyValue(Ac.SORT_ORDER,Bg);BU.setWidgetPropertyValue(Ac.SORT_INDEX,Bc);var Ba=BT.getChartInfo(),Bb=true;if(Bb&&Ba.isABL&&BT.isStacked){BT.fakeSortActionsStackTotal(Bd);}BU.updateAfterSort(Bd);}else{U.visPrint("undefined cell handle");}};var BN=function(Bc){var Ba=Bc.ctxt,Bb=Ba.axis;var BZ=-1;switch(Bb){case B.Rows:Bb=1;break;case B.Columns:Bb=2;break;case BZ:break;}BU.model.controller.onGetAdvSortData(BU,Bb,Ba.item.t);};var BQ=function(){var BZ=BT.getSortActions([]);BU.removeWidgetProperty(Ac.SORT_ORDER);BU.removeWidgetProperty(Ac.SORT_INDEX);BU.updateAfterSort(BZ);};var BG=function(){var BZ=BU.GMController.getDebugMenu();BU.showContextMenu(null,BZ);};switch(BH){case"selectionKeepOnly":return BX;case"selectionExclude":return BR;case"selectionKeepOnlyAndShow":return BY;case"selectionShowData":return BP;case"headerKeepOnly":return BV;case"headerExclude":return BM;case"headerDrill":return BS;case"sortAttributeTitle":return BF;case"advancedSort":return BN;case"clearSort":return BQ;case"sortMetricTitle":return BO;case"changeShape":return BI;case"showDataForMetric":return BW;case"changeGlobalShape":return BE;case"debug":return BG;case"attributeAddToFilter":case"attributeUseAsSelector":case"attributeFormat":case"sortAxisAttribute":case"advancedSortAxisAttribute":case"attributeRename":case"attributeRemove":case"attributeNew":case"filterOnSelection":case"createGroup":case"createCalculationDE":case"showMarker":case"hideMarker":case"dataLabelShowValue":case"dataLabelShowText":case"dataLabelHide":case"metricFormat":case"metricRename":case"metricRemove":case"metricNew":case"metricAddToFilter":break;}return mstrmojo.emptyFn;},showContextMenu:function(BE,BG){var BK=this.contextMenu,BF=this,BD=this.GMController,BJ,BI,BH;if(BE!==null){BI=BE.e;BH=BE.hWin;BJ=AX.position(this.getRealTarget(BE));BJ.y+=BJ.h;BJ.x-=1;}else{BJ={x:0,y:0,w:0,h:0};}if(BK){BK.hideContextMenu();BK.unrender();delete this.contextMenu;}BK=new mstrmojo.MenuButton({cmCssClass:this.menuCssClass,zIndex:1000,cm:BG,dynamicUpdate:true,executeCommand:function(BL){switch(BL.did){case An.OUTPUT_EXTREMES:BD.printExtremes();break;case An.OUTPUT_DATA_COUNT:U.visPrint("# Data Points in Total: "+BD.getGraphShapeCount());U.visPrint("Count of Chart is "+BD.getChartCountInCol()*BD.getChartCountInRow());break;case An.ENABLE_PARTIAL_RENDERING:BD.enablePartialRendering=true;BF.writeGlobalProperty(Ac.PARTIAL_RENDER,true);break;case An.DISABLE_PARTIAL_RENDERING:BD.enablePartialRendering=false;BF.writeGlobalProperty(Ac.PARTIAL_RENDER,false);break;case An.ENABLE_TIMER:BB.mUseTimer=true;break;case An.DISABLE_TIMER:BB.mUseTimer=false;break;case An.ENABLE_CE_TIMER:BF.enableCETimer=true;break;case An.DISABLE_CE_TIMER:BF.enableCETimer=false;break;default:break;}}});this.contextMenu=BK;BK.set("cmPos",BJ);BK.render();BK.showContextMenu();if(BE!==null){AX.stopPropogation(BH,BI);AX.preventDefault(BH,BI);}},hideContextMenu:function(){var BD=this.contextMenu;if(BD){BD.hideContextMenu();}},onSplitterMoved:function(BD,BF){var BH,BG=this.manager,BI=this.GMInfo,BJ=BF.dock,BK=BF.type,BE=BF.depth,BM=0,BL=0;if(BK===G.GM_CHART_ROW){BG.resizeRow(BG.master,BE,BD);return ;}if(BK===G.GM_CHART_COL){BG.resizeCol(BG.master,BE,BD);return ;}if(BJ===Ak.RIGHT){BM=BD;}else{if(BJ===Ak.LEFT){BM=-BD;}else{if(BJ===Ak.TOP){BL=-BD;}else{BL=BD;}}}if((BK===G.GM_ROW_HEADER||BK===G.GM_YAXIS)&&BM===0){return ;}if((BK===G.GM_COL_HEADER||BK===G.GM_XAXIS)&&BL===0){return ;}if(BK===G.GM_RIGHT_BORDER||BK===G.GM_BOTTOM_BORDER){BG.resizeBorder(BG.master,BM,BL);return ;}if(BK===G.GM_ROW_HEADER){BH=this.getWidgetPropertyValue(Ac.SCALE_ROW_HEADERS)[BE];BH*=(1+BM/this.rowHeaderWArr[BE]);this.rowHeaderWArr[BE]+=BM;this.writeGlobalProperty(Ac.SCALE_ROW_HEADERS,BH,{key:BE});}else{if(BK===G.GM_COL_HEADER){BH=this.getWidgetPropertyValue(Ac.SCALE_COL_HEADERS)[BE];BH*=(1+BL/this.colHeaderHArr[BE]);this.colHeaderHArr[BE]+=BL;this.writeGlobalProperty(Ac.SCALE_COL_HEADERS,BH,{key:BE});}else{if(BK===G.GM_YAXIS){BH=this.getWidgetPropertyValue(Ac.SCALE_Y);BH*=(1+BM/BI.yAxisWidth);BI.yAxisWidth+=BM;this.yAxisFixed=true;this.writeGlobalProperty(Ac.SCALE_Y,BH);}else{if(BK===G.GM_YAXIS2){BH=this.getWidgetPropertyValue(Ac.SCALE_Y2);BH*=(1+BM/BI.yAxis2Width);BI.yAxis2Width+=BM;this.yAxis2Fixed=true;this.writeGlobalProperty(Ac.SCALE_Y2,BH);}else{if(BK===G.GM_XAXIS){BH=this.getWidgetPropertyValue(Ac.SCALE_X);BH*=(1+BL/BI.xAxisHeight);BI.xAxisHeight+=BL;this.xAxisFixed=true;this.writeGlobalProperty(Ac.SCALE_X,BH);}else{if(BK===G.GM_XAXIS2){BH=this.getWidgetPropertyValue(Ac.SCALE_X2);BH*=(1+BL/BI.xAxis2Height);BI.xAxis2Height+=BL;this.xAxis2Fixed=true;this.writeGlobalProperty(Ac.SCALE_X2,BH);}else{if(BK===G.GM_V_EXTRA_LINE){BH=this.getWidgetPropertyValue(Ac.SCALE_V_EXTRA_LINE);BH*=(1+BM/this.rowHeaderExtraW);this.rowHeaderExtraW+=BM;this.writeGlobalProperty(Ac.SCALE_V_EXTRA_LINE,BH);}}}}}}}},onLegendResized:function(BE){var BD=this.legend;if(BD){this.legendFixedW=this.legendW+BE;this.legendScale=(this.legendFixedW)/(this.legendW/this.legendScale);this.legendResized=true;this.writeGlobalProperty(Ac.SCALE_LEGEND_WIDTH,this.legendScale);}},onLegendClicked:function(BD){var BE=BD.action;if(BE==="close"){this.writeGlobalProperty(Ac.LEGEND_VISIBLE,false);}else{if(BE==="minimize"){this.writeGlobalProperty(Ac.LEGEND_MODE,J.MINIMIZED);}else{if(BE==="restore"){this.writeGlobalProperty(Ac.LEGEND_MODE,J.RESTORED);}}}},onControlResized:function(BD,BG,BE,BH){BB.startTimer({functionName:"VisGraphMatrix.onControlResized",purpose:"Partial update of GraphMatrix ("+this.k+")"});var BF=this.HTML5PROPS;if(BG){this.hEvalSize4Legend();}if(BD){this.hEvalSizeIteratively();}else{this.hEvalSize4GMArea();this.hDecideDataLabelRotation();}this.hCalcRadiusAndMargin(BE);this.hLayoutControls();this.hFillContents();this.updateRowValueBackground();this.updateColumnValueBackground();this.hUpdateLegend();if(BH){this.outputLog4PartialRender();this.manager.drawCharts();this.updateSelections();}this.hPlaceRHResizers(BF.MATRIX_LINE_V);this.hPlaceCHResizers(BF.MATRIX_LINE_H);this.hPlaceYResizers(BF.AXIS_LINE_Y);this.hPlaceXResizers(BF.AXIS_LINE_X);this.hPlaceYSplitters(BF.MATRIX_LINE_V);this.hPlaceOutBorders();this.hPlaceRowResizers(BF.MATRIX_LINE_H);this.hPlaceColResizers(BF.MATRIX_LINE_V);this.hPlaceHGridLines(BF.GRID_LINE_MAJOR,BF.GRID_LINE_MINOR);this.hPlaceVGridLines(BF.GRID_LINE_MAJOR,BF.GRID_LINE_MINOR);BB.endTimer();this.updateScrollBars();},configurePopup:function AW(BD,BE){BD.hostId=this.id;BD.hostElement=BE;},getPersistAction:function(BD){BD=BD||this.property.getXMLString();return Z.call(this,BD);},getDragData:function BA(BE){var BD=this.interactor;return BD.getDragData(BE,this);},deleteItem:function BC(BE){var BD=this.interactor;return BD.deleteItem(BE,this);},createAvatar:function Y(BH,BE){var BD=document.createElement("div"),BG=BE.src.data,BF=BG.item,BI;if(!BF){return ;}if(!this.itemRenderer){this.itemRenderer=new mstrmojo.vi.ui.VIDragUnit();}BI=this.itemRenderer.getUnitAvatar(BE);A5.addClass(BI,"isAvatar");BD.appendChild(BI);BD.style.margin="10px 0 0 10px";return BD;},positionAvatar:function r(BF){if(!this.avatar){return ;}var BD=this.avatar,BE=BD.style;BE.left=BF.x-BD.offsetWidth/2+"px";BE.top=BF.y-BD.offsetHeight-13+"px";},isDragValid:function AO(BD){var BE=BD.src.data;return !!(BE&&BE.item)||this._super(BD);},allowDrop:function K(BG){var BH=BG.src.data,BD=BH&&BH.src,BF=this.interactor;BG.dndGM=true;if(BD===As.DATASETS||BD===As.VIZ_EDITOR||BD===As.VIZ||BD===As.ALL_OBJECT_LIST){var BE=BH.items;if(BE&&BE.length===1){BF.getDropZonesOnGraph(BG,this);if(Object.keys(this.dropZonesOnGraph).length>0){return true;}}else{return true;}}return false;},isDragingMultipleObj:function H(BF){var BE,BG=BF.src.data,BD=BG&&BG.items;if(BF.isDragingMultipleObj===undefined){BF.isDragingMultipleObj=false;for(BE=1;BE<BD.length;BE++){if(BD[BE].t!==BD[BE-1].t){BF.isDragingMultipleObj=true;break;}}}return BF.isDragingMultipleObj;},ondragenter:function T(BF){var BK=this.isEmpty();if(BK){this.actualWidth=this.domNode.offsetWidth;this.actualHeight=this.domNode.offsetHeight;}var BJ,BI,BE=this.interactor;if(!this.dndHighlightCanvas){var BD=document.createElement("canvas"),BH=AX.position(this.domNode),BG=AX.position(this.domMainContainer);this.domNode.appendChild(BD);BD.style.position="absolute";BD.style.zIndex=1000;BD.width=BG.w||BH.w;BD.height=BG.h||BH.h;BD.style.top=(BG.y-BH.y)+"px";BD.style.left=(BG.x-BH.x)+"px";this.dndHighlightCanvas=BD;}if(!this.dndHighlightNodes){BJ=document.createElement("div");this.domNode.appendChild(BJ);BI={placeholder:BJ,top:0,left:0,zIndex:20,nodeCss:"gm-dnd-highlight-node"};this.dndHighlightNodes=new A7.DndReplaceNode(BI);this.dndHighlightNodes.render();this.dndHighlightNodes.parent=this;}if(!this.dndTooltip){BJ=document.createElement("div");document.body.appendChild(BJ);BI={placeholder:BJ,contentNodeCssClass:"gm-dnd-replace-node-tooltip",boundary:document.body};this.dndTooltip=new A7.DndTooltip(BI);this.dndTooltip.render();this.dndTooltip.parent=this;}if(!this.dndArrow){BJ=document.createElement("div");document.body.appendChild(BJ);this.dndArrow=BJ;}BF.dndGM=true;this.setInteractive(false);BE.clearHoveredShape();BE.hideTooltip();BE.toggleHoverEffect(this,false);this.dndAsBlackBox=this.isDragingMultipleObj(BF);if(!this.isDragingMultipleObj(BF)){BE.calculateDropZoneOnGraphRange(this,BF);this.ondragover(BF);}if(this._super){this._super(BF);}},ondragover:function AV(BE){var BD=this.interactor;BE.dndGM=true;if(!this.isDragingMultipleObj(BE)){BD.clearHighlightDropZoneOnGraph(this);if(BD.findEnteredDropZoneOnGraph(BE,this)){BD.findTargetInDropZoneOnGraph(BE,this);BD.highlightDropZoneOnGraph(BE,this);}}BD.updateAvatarIcon(BE);if(this._super){this._super(BE);}},ondragleave:function AL(BE){BE.dndGM=true;var BF=AX.position(this.domMainContainer),BG=BE.tgt&&BE.tgt.pos,BD=(BG.x>BF.x&&BG.x<BF.x+BF.w)&&(BG.y>BF.y&&BG.y<BF.y+BF.h);if(BD){BE.tgt.widget=this;}else{this._super(BE);}},ondrop:function E(BE){var BD=this.interactor;BE.dndGM=true;BD.ondrop(BE,this);this._super(BE);},cleanUpAfterTarget:function Ar(BD){BD.dndGM=true;this._super(BD);this.setInteractive(true);this.interactor.toggleHoverEffect(this,true);if(this.domNode.contains(this.dndHighlightCanvas)){this.domNode.removeChild(this.dndHighlightCanvas);}delete this.dndHighlightCanvas;if(document.body.contains(this.dndArrow)){document.body.removeChild(this.dndArrow);}delete this.dndArrow;if(this.dndHighlightNodes){this.dndHighlightNodes.destroy();}delete this.dndHighlightNodes;if(this.dndTooltip){this.dndTooltip.destroy();}delete this.dndTooltip;this.dropZonesOnGraph=null;this.currEnteredDropZoneID=null;},toggleContainerCls:function(BE,BD){var BF=this.domMainContainer;if(BE){A5.addClass(BF,BD);}else{A5.removeClass(BF,BD);}},toggleContainerCls2:function(BE,BD){var BF=this.domMainContainer;if(BE){A5.addClass(BF,BD);}else{A5.removeClass(BF,BD);}},updateSelections:function(){this.highlight(this.getSelectionType(),this.getSelectionHash());},clearSelectedShapesAndCharts:function(){var BD=this.interactor,BE=this.manager;if(BE){BE.dismissLassoSelector();}if(BD){BD.clearSelectedShapes();BD.clearSelectedCharts();}},clearSelectedHighlights:function(BF){var BD=this.interactor,BE=this.manager;if(BE){BE.dismissLassoSelector();}if(BD){BD.clearSelectedShapes();BD.clearSelectedCharts();BD.clearSelectedTargets();}if(!BF){this.GMController.highLightShapeIndex={};}},toggleShapeSelectionIndex:function(BJ,BE){var BL,BI,BG,BM,BH,BN,BF,BK=this.GMController,BD=BK.highLightShapeIndex;BK.resetHighLightIndex=false;if(BJ.isPie){BL=BJ.sPieDP.graphCell;BM=BJ.sliceIdx;}else{BL=BJ.gc;}BH=BL.dp;BN=BH.rowIndex;BF=BH.colIndex;BI=BL.gID;BG=BL.sID;if(BD[BN]===undefined){BD[BN]={};}if(BD[BN][BF]===undefined){BD[BN][BF]={};}BD=BD[BN][BF];if(BD[BI]===undefined){BD[BI]={};}if(BJ.isPie){if(BD[BI][BG]===undefined){BD[BI][BG]={};}BD[BI][BG][BM]=BE;}else{BD[BI][BG]=BE;}},getNumericAxisOptions:function(BD){var BE=this.GMController;return BE.getNumericAxisOptions(BD);},getStyleEffectsOptions:function(){var BD=this.GMController;return BD.getStyleEffectsOptions();},getColorByOptions:function(){var BE=this.GMController,BD=BE.getColorByOptions();if(!BD){return[];}return BD.subOptions;},getTitleRMCPopup:function(){if(!this.parent.boxContent.formattingMode){return ;}var BD={name:"titleBarRMC"};this.raiseEvent(BD);return f.call(this,false);},getFontToolbarProps:function(){return{cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,width:"381px",height:"22px"};},getChartInfo:function(){return this.GMController.getChartInfo();},getHostStructure:function(){return this.GMController.getHostStructure();},getDependentMetricOptions:function(){return this.GMController.getDependentMetricOptions();},getIndependentMetricOptions:function(){return this.GMController.getIndependentMetricOptions();},getReferenceAxisOption:function(){return this.GMController.getReferenceAxisOption();},getRealReferenceOptionFromAxisOption:function(BE,BD,BF){return this.GMController.getRealReferenceOptionFromAxisOption(BE,BD,BF);},getReferenceLineOptions:function(){return this.GMController.getReferenceLineOptions();},getEnabledReferenceLineOptions:function(BD){return this.GMController.getEnabledReferenceLineOptions(BD);},getShowDataLabelOptions:function(){return this.GMController.getShowDataLabelOptions();},isSeasonalityEnabled:function(){return this.GMController.isSeasonalityEnabled();},formatAsAxisLabel:function(BD,BE){return this.GMController.formatAsAxisLabel(BD,BE);},isShapeCombonation:function(){var BE=this.GMController,BD=BE.metricShapeArr,BH=false,BG,BI=(BD&&BD.length)||0,BF;if(BE.enableCombiChart){if(BI===0){BH=true;}else{if(BI===1){BH=false;}else{for(BG=1;BG<BI;BG++){if(BD[BG]!==BD[BG-1]){BH=true;break;}}}}if(!BH){BF=BD[0];}}return{isComb:BH,shapeType:BF};},isMajorGridLineShow:function(){var BE=this.getWidgetPropertyValue(AF.MAJOR_GRID_LINES_SHOW),BF=this.GMInfo,BD=false;if(BE===AK.AUTO){BD=BF&&(BF.nRows===1&&BF.nCols===1);}else{if(BE===AK.SHOW){BD=true;}}return BD;},getReferenceOptionForMetricId:function(BE){var BG=false,BF=this.getReferenceAxisOption(),BD;BF.forEach(function(BI){var BH=BI.mos;BH.forEach(function(BJ){if(BJ.mId===BE){BD=BI;BG=true;return false;}});if(BG){return false;}});return BD;},copyTrendLineInfoForSwap:function(BH,BJ){var BF,BE,BP,BO,BR,BQ,BM=[],BL=[],BI=[],BN,BK,BG=4,BD="00000000000000000000000000000000";b.forEach(BJ.items,function(BS){if(BS.t===BG&&BS.id!==BD){BM.push(BS);}});b.forEach(BH.items,function(BS){if(BS.t===BG&&BS.id!==BD){BL.push(BS);}});BN=Math.min(BL.length,BM.length);for(BK=0;BK<BN;BK++){BF=A3.call(this,BM[BK].did,true);BP=this.readGlobalProperty(Ac.TREND_LINE_DEF,BF);BR=BP.jsonObj;if(BR.trdEnabled){return BI;}}for(BK=0;BK<BN;BK++){BE=A3.call(this,BL[BK].did);BO=this.readGlobalProperty(Ac.TREND_LINE_DEF,BE);BQ=BO.jsonObj;if(BQ.trdEnabled){BF=A3.call(this,BM[BK].did,true);BP=this.readGlobalProperty(Ac.TREND_LINE_DEF,BF);BP.setProperty(Ac.TREND_ENABLED,true);BP.setProperty(Ac.TREND_LEVEL,BQ.trdLvl);BP.setProperty(Ac.TREND_TYPE,BQ.trdTp);if(BQ.trdDgr){BP.setProperty(Ac.TREND_POLY_DEGREE,BQ.trdDgr);}this.collectTrendLineAction(BP.jsonObj,BI,BF.key);}}return BI;},queryTrendLineStatusForMetric:function(BE){var BD=A3.call(this,BE),BF=this.readGlobalProperty(Ac.TREND_LINE_DEF,BD);return(BF.jsonObj[Ac.TREND_ENABLED]);},switchOnOffTrendLineForMetric:function(BF,BD){if(BD){this.checkCustomScaleNotificationForTrendLine(BF);}var BE=A3.call(this,BF),BG=this.readGlobalProperty(Ac.TREND_LINE_DEF,BE);BG.setProperty(Ac.TREND_ENABLED,BD);this.writeGlobalProperty(Ac.TREND_LINE_DEF,BG,BE);},getExistingRefLineOptions:function(BE){var BD=this.getReferenceOptionForMetricId(BE);return this.getEnabledReferenceLineOptions(BD);},getExistingRefLineOptionsForAxis:function(BD){var BE=M.call(this,BD);return this.getEnabledReferenceLineOptions(BE);},getAvailableRefLineTypes:function(BE){if(BB.isIgnoredMetric(this,this.GMController.getMetricIndexFromID(BE))){return[];}var BF=this.getExistingRefLineOptions(BE),BD=this.getChartInfo().isBubbleOrScatter?[A7.EnumRefLineModelType.FIRST,A7.EnumRefLineModelType.LAST]:[];return h.valarray(A7.EnumRefLineModelType).filter(function(BG){return BD.indexOf(BG)===-1&&(BG===A7.EnumRefLineModelType.CONST||b.find(BF,"refType",BG)===-1);});},toggleRefLineEnabled:function(BG,BE,BF,BJ,BK){if(BF){this.checkCustomScaleNotificationForReferenceLine(BG);}var BH=this.getReferenceOptionForMetricId(BG),BD=this.getRealReferenceOptionFromAxisOption(BH,BE,BK),BI=this.readGlobalProperty(Ac.REF_LINE_DEF,BD);BI.setProperty(Ac.REF_ENABLED,BF);if(BE===A7.EnumRefLineModelType.CONST){BI.setProperty(Ac.REF_CONST_VALUE,q.parseNumeric(BJ));}this.writeGlobalProperty(Ac.REF_LINE_DEF,BI,BD);},copyRefLineInfoForSwap:function p(){var BH=this.GMController,BJ=BH.getChartInfo(),BD=0;if(!BJ.isABL||!BH.isStacked||BH.splitPlottingMetrics){return[];}var BG=this.getReferenceAxisOption(),BE,BF=this,BI=[];if(BG){b.forEach(BG,function(BL){BE=BL.key;if(BE==="YAxis"||BE==="Y2Axis"||BE==="XAxis"||BE==="X2Axis"){BD=BE.search("2")>=0?1:0;if(!BH.hasRefLineInOppositeAxis(BD)){var BK=BF.getEnabledReferenceLineOptions(BL);b.forEach(BK,function(BM){var BN=BF.readGlobalProperty(Ac.REF_LINE_DEF,BM),BP=BN.jsonObj;BP.dropzoneId=(BE==="YAxis"||BE==="Y2Axis")?4:3;BP.subAxis=BD;if(BP.refEnabled){var BO=h.clone(BP);BO.dropzoneId=BP.dropzoneId===3?4:3;BF.collectAddRefLineAction(BO,BI);}});}}});}return BI;},updateAfterKeepOnlyAndShow:function a(Be,BK){var Bh=this,Ba=1,BW=2,BY=3,BN=4,BT=5;var BH=Bh.model,Bb=Bh.getDocModel(),BX=Bb.getDataService(),BP=BX.newUpdate(this);var BQ={act:"updateTemplate",keyContext:Bh.k,actions:[]},BJ,BR=true,BZ=BQ.actions,Bg=Bh.GMController,BS=Bg.getChartInfo(),Bc=BS.tp,BU=Bh.zonesModel,BV=BU.gmZones,BO={did:undefined,t:12},BD={id:undefined,items:[]},Bi=BU.getUpdateCallback(),BL=this.getXTabRefreshCallBack();if(BK){BD.id=BK.isRowAttribute?Ba:BW;BO.did=Be.did;BO.t=Be.t;if(Bb.prefs&&Bb.prefs.rtprnt){BR=parseInt(Bb.prefs.rtprnt,10)===1;}else{if(BH.xtab.defn.tkp!==undefined){BR=parseInt(BH.xtab.defn.tkp,10)===-1;}}var BG,Bd=BV.getZoneModelByZoneId(BD.id);Bd.items.forEach(function(Bj){if(Bj.did===BK.tid){BG=Bj;return false;}});if(BR){BZ.push(BU.getAddDZUnitAction(BD,BO,BG?BG.uidx+1:0));}else{if(BG){BZ.push(BV.getRemoveDropZoneUnitAction(BD,BG));BZ.push(BU.getAddDZUnitAction(BD,BO,BG.uidx));}}}else{if(Bc===V.BUBBLE||Bc===V.SCATTER){BD.id=BT;BO.did=Be.did;BO.t=Be.t;BJ=BV.getItemCountInZone(BD.id);BZ.push(BU.getAddDZUnitAction(BD,BO,BJ));}else{if(BS.isABL||Bc===V.GRID){if(Bc===V.GRID||BS.dirc===mstrmojo.gm.EnumABLDirection.VERTICAL){b.forEach(BU.moveAttributesToZone(BY,BW),function(Bj){BZ.push(Bj);});BD.id=BY;BO.did=Be.did;BO.t=Be.t;BZ.push(BU.getAddDZUnitAction(BD,BO,0));}else{b.forEach(BU.moveAttributesToZone(BN,Ba),function(Bj){BZ.push(Bj);});BD.id=BN;BO.did=Be.did;BO.t=Be.t;BZ.push(BU.getAddDZUnitAction(BD,BO,0));}}}}BP.add(BQ,A8(Bi,BL));var BI=Bh.getSelections(),BE=BH.getSelectorDataFromViewFilter(Bh.model.data.vfexpr).concat({keepOnly:true,data:BI}),Bf=AC.call(Bh),BF=BH.getKeepOnlyActionsForAssociatedNodes(BE,Bf);if(BI&&BI.length>0){BP.add(BF.actions,BF.callback);}Ao(Bh).execute({execute:function BM(){this.submitUpdate(BP);},urInfo:{callback:BP.callback}});},isClearAllDisabled:function A0(){var BD=this.findSelectorControl();if(!!BD&&!BD.showall){return true;}return false;},execFormatHandler:function(){var BD=this.interactor;if(BD){BD.formatHandler();}},onNDECreated:function(BE){var BG=BE[0],BF=this.model.data.gts.row.concat(this.model.data.gts.col),BD;this.clearSelections();b.forEach(BF,function(BH){if((BH.t===47||BH.otp===47)&&BH.ost===12033&&BH.id===BG.unitId){b.forEach(BH.es,function(BI){if(BI.n===BG.n&&BI.id&&BI.id.indexOf(BG.id)>-1){BD=BI;}if(BD){return false;}});if(BD){return false;}}});if(BD){this.addAttributeSelection(BG.unitId,BD.id,BD.n);this.interactor.doHighlight(t.vi.ui.rw.SelectionType.ATTS,h.clone(this.getSelectionHash()));}},checkCustomScaleNotificationForTrendLine:function(BD){if(this.checkCustomScale(BD)){this.trendLineNotifications.push(mstrmojo.desc(14443,"The trend line might not be displayed, as a custom scale has been applied to this metric."));}},checkCustomScaleNotificationForReferenceLine:function(BD){if(this.checkCustomScale(BD)){this.referenceLineNotifications.push(mstrmojo.desc(14444,"The reference line might not be displayed, as a custom scale has been applied to this metric."));}}});}());