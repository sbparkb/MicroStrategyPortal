var xmjd=mstrmojo&&mstrmojo.descriptors;var mstrmojo={descriptors:xmjd||{},meta:{TP:"t",STP:"st"},emptyFn:function(){},tstid:function(B){var A;if(B){if(typeof (B)==="object"){A=B.tstid;}else{A=B;}}return A?'tstid="'+A+'"':"";},getMissingFn:function getMissingFn(){return function(){var C=this.scriptClass,A;try{for(A in this){if(this[A]===arguments.callee){C+="."+A;break;}}}catch(B){}throw new Error("Missing abstract method: "+C);};},now:function now(){return new Date().getTime();},usesFrames:false};(function(){mstrmojo.global=(function(){var F=function(){return this;};return F.call(null);}());mstrmojo.dbg=mstrmojo.emptyFn;mstrmojo.dbg_stack=mstrmojo.emptyFn;mstrmojo.dbg_xhr=mstrmojo.emptyFn;mstrmojo.dbg_profile=mstrmojo.emptyFn;mstrmojo.debugBundles=(function(){return(window.mstrConfig&&(mstrConfig.debugFlags!==undefined)&&((mstrConfig.debugFlags&4)>0));})();mstrmojo.platform={};mstrmojo.prompt={};mstrmojo.settings={};mstrmojo.models={datasets:{},template:{}};mstrmojo.ui={editors:{controls:{}},menus:{},pathbar:{}};mstrmojo.prefs={};mstrmojo.ACL={};mstrmojo.CMS={};mstrmojo.storage={};mstrmojo.maps={};mstrmojo.maps.androidmap={};mstrmojo.maps.jsmap={};mstrmojo.graph={};mstrmojo.IPA={};mstrmojo.IPA.Monitors={};mstrmojo.IPA.Alerts={};mstrmojo.IPA.Environment={};mstrmojo.IPA.Groups={};mstrmojo.IPA.Heartbeat={};mstrmojo.IPA.Managers={};mstrmojo.sm={};mstrmojo.sort={};mstrmojo.ME={};mstrmojo.architect={ui:{editors:{},panels:{},factories:{}},obj:{},menu:{},projectmanagement:{}};mstrmojo.warehouse={ui:{editors:{}},obj:{},dbroles:{},menu:{}};mstrmojo.plugins={};mstrmojo.gmaps={};mstrmojo.DI={controller:{},model:{},ui:{dialogs:{}}};mstrmojo.Refine={};mstrmojo.qb={bigquery:{},es:{},mdx:{},menu:{},thirdParty:{}};mstrmojo.WH={};mstrmojo.fe={};mstrmojo.txEditor={};mstrmojo.condTx={};mstrmojo.threshold={};mstrmojo.express={ui:{}};mstrmojo.rw={model:{},xtab:{}};mstrmojo.util={ui:{}};mstrmojo.android={controllers:{},factories:{},inputControls:{},large:{controllers:{},factories:{},ui:{}},medium:{controllers:{},factories:{},ui:{nativebar:{}}},selectors:{},ui:{},nativedialog:{}};mstrmojo.vi={controllers:{},factories:{},models:{editors:{}},enums:{},ui:{menus:{},editors:{},rw:{selectors:{},xtab:{}},tabs:{},toolbars:{},tutorial:{}},viz:{},util:{}};mstrmojo.onetier={controllers:{},vi:{acl:{},prefs:{model:{}},ui:{tutorial:{}}}};mstrmojo.config={vi:{},onetier:{}};mstrmojo.chart={common:{},enums:{},model:{enums:{}}};mstrmojo.gm={};mstrmojo.heatmap={vi:{}};mstrmojo.netviz={};mstrmojo.imagelayout={};mstrmojo.iphone={};mstrmojo.winphone={};mstrmojo.mstr={search:{}};mstrmojo.mstr.ui={};mstrmojo.gmaps={};mstrmojo.esrimap={};mstrmojo.examples={};mstrmojo.home={controllers:{},models:{},views:{},ui:{}};mstrmojo.err=function D(H){var G=H.name+': "'+H.message+'"';if(mstrmojo.debug){if(H.fileName){G+=" at\n    "+H.fileName;}if(H.hasOwnProperty("lineNumber")){G+=": "+H.lineNumber;}else{if(H.hasOwnProperty("line")&&H.sourceURL){var F=H.sourceURL.split("/");G+="("+F[F.length>1?F.length-1:0]+":"+H.line+")";}}}this.dbg(G);if(mstrmojo.Dialog){mstrmojo.error({longDesc:H.message},null,{title:H.name});}else{window.alert(G);}};mstrmojo.confirm=function B(F){return window.confirm(F);};mstrmojo.alert=function E(F){window.alert(F);};var C=!!(/return true/.test(String(function(){return true;})));mstrmojo.mixin=function A(J,H){if(J){H=H||{};var I=/this\.\_super/;var G=function(N,M){return function L(){var P=this._super;this._super=M;var O=N.apply(this,arguments||[]);this._super=P;return O;};};var F=J.__onmixin__;if(F){delete J.__onmixin__;}var K;for(K in J){if((typeof J[K]==="function")&&(!C||I.test(J[K]))){H[K]=G(J[K],H[K]);}else{H[K]=J[K];}}if(F){J.__onmixin__=F;}}return H;};}());(function(){var $XHR;var $MISSING={};var getApp=function(){return mstrmojo.global.mstrApp||{};},getJsRoot=function(){return getApp().jsRoot||"../javascript/";},getJsBundlesRoot=function(){return getJsRoot()+"bundles/";},getJsMojoRoot=function(){return getApp().jsMojoRoot||"../javascript/mojo/js/source/";},isIE=!!document.all;function getXHR(){$XHR=self.XMLHttpRequest?new XMLHttpRequest():(self.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null);}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){if(params.hasOwnProperty(p)){url[++x]=p+"="+encodeURIComponent(params[p]);}}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function syncXHR(method,baseUrl,params){var result=null;method=method.toUpperCase();if(!$XHR){getXHR();}if($XHR){try{var m=null,app=window.mstrApp;if(window.microstrategy!==undefined&&microstrategy){m=microstrategy;}params.taskContentType=params.taskContentType||"json";params.taskEnv="xhr";params.xts=mstrmojo.now();params=mstrmojo.addCSRFTokenToTaskParams(params);var ptp=(app&&app.persistTaskParams)||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}$XHR.open(method,appendUrlParams(method,baseUrl,params),false);if(method!=="POST"){params=null;}else{params=encodeParams(params);$XHR.setRequestHeader("Content-type","application/x-www-form-urlencoded");}$XHR.send(params);result=$XHR.responseText||null;}catch(localerr){if(window.console){window.console.log(localerr);}}}return result;}function _jsGet(file,nullCheck){var js=mstrmojo.loadFileSync(file);if(js){try{eval(js);return nullCheck?!!eval(nullCheck):true;}catch(localerr){window.alert("JavaScript compile error:\n\nFile: "+file+"\n\nError: "+localerr.message);}}return false;}mstrmojo.requiresBundle=function reqBundle(bundleName){return _jsGet(getJsBundlesRoot()+bundleName);};mstrmojo.loadFileSync=function loadFileSync(file){var result=null;if(!$XHR){getXHR();}if($XHR){try{$XHR.open("GET",file+((window.mstrConfig&&mstrConfig.webVersion)?"?v="+mstrConfig.webVersion:""),false);$XHR.send(null);result=$XHR.responseText||null;}catch(localerr){}if(!isIE&&$XHR.abort){$XHR.abort();}}return result;};mstrmojo.insertCSSLinks=function insertCSSLinks(files){var css,firsthead;if(files&&files.length>0){firsthead=document.getElementsByTagName("head")[0];files.forEach(function(file){css=document.createElement("link");css.setAttribute("id",file.replace(/[^a-zA-Z0-9]/g,""));css.setAttribute("rel","stylesheet");css.setAttribute("type","text/css");css.setAttribute("href",file);firsthead.appendChild(css);});}};mstrmojo.loader={loaded:{mstrmojo:true,"mstrmojo.loader":true},isLoaded:function isLd(fqcn){var o;try{o=eval(fqcn);}catch(localerr){}if(o){this.loaded[fqcn]=true;}return !!o;},load:function ld(fqcn){if($MISSING[fqcn]){return false;}if(this.loaded[fqcn]||this.isLoaded(fqcn)){return true;}if(_jsGet(this.fqcnToFile(fqcn),fqcn)){this.loaded[fqcn]=true;return true;}$MISSING[fqcn]=true;return false;},fqcnToFile:function fqcnToFile(fqcn){if(fqcn.match(/^mstrmojo\.plugins\./)){var pluginName=fqcn.substring(17,fqcn.indexOf(".",17));fqcn="../plugins/"+pluginName+"/javascript/"+getJsMojoRoot()+fqcn.replace("mstrmojo.plugins."+pluginName+".","").replace(/\./gm,"/");}else{if(fqcn.match(/^mstrmojo\./)){fqcn=getJsMojoRoot()+fqcn.replace("mstrmojo.","").replace(/\./gm,"/");}else{fqcn=getJsRoot()+fqcn.replace(/\./gm,"/");}}return fqcn+".js";}};var $LOADER=mstrmojo.loader,isLoaded=$LOADER.loaded;var reqCache={},addPackagesToReqCache=function addPkg(n,ns){var ps=n.split("."),klen=ps.length,k;for(k=1;k<klen;k++){var s=ps.slice(0,k).join(".");if(!reqCache[s]){ns.push(s);reqCache[s]=true;}}},loadInputScripts=function loadInputScripts(ns){var jlen=ns.length,j;for(j=0;j<jlen;j++){if(!$LOADER.load(ns[j])){window.alert("Warning: Javascript class not found:\n"+ns[j]);break;}}};mstrmojo.requiresCls=function reqCls(){var argLen=arguments.length,ns=[],i,len;for(i=0,len=argLen;i<len;i++){var n=arguments[i];if(!n||isLoaded[n]||$MISSING[n]){continue;}else{if(reqCache[n]){loadInputScripts([n]);reqCache[n]=false;continue;}}if(!n.match(/^mstrmojo\.plugins\./)){addPackagesToReqCache(n,ns);}ns.push(n);reqCache[n]=true;}loadInputScripts(ns);return true;};mstrmojo.requiresClsP=function reqClsP(){var argLen=arguments.length,ns=[],pkgName=arguments[0],i,len;addPackagesToReqCache(pkgName,ns);for(i=1,len=argLen;i<len;i++){var n=pkgName+"."+arguments[i];if(!n||isLoaded[n]||$MISSING[n]){continue;}else{if(reqCache[n]){loadInputScripts([n]);reqCache[n]=false;continue;}}if(!n.match(/^mstrmojo\.plugins\./)){ns.push(n);reqCache[n]=true;}}loadInputScripts(ns);return true;};var $DESCRIPTORS=mstrmojo.descriptors,descPrefix="mstrWeb.";function populateDescriptors(ds){if(ds){var dlen=ds.length,di;for(di=0;di<dlen;di++){var d=ds[di];$DESCRIPTORS[d.key]=d.v;}}}mstrmojo.populateDescriptors=populateDescriptors;if(window.mstrConfig!==undefined){populateDescriptors(mstrConfig.mstrDescs&&mstrConfig.mstrDescs.descriptors);mstrConfig.mstrDescs=null;}if(window.mstrApp!==undefined){populateDescriptors(mstrApp.mstrDescs&&mstrApp.mstrDescs.descriptors);}var requestDescriptor=function(prefix,ids){var ns=[],len=ids.length,i;for(i=0;i<len;i++){var k=ids[i];if(k&&!($DESCRIPTORS.hasOwnProperty(prefix+k))){ns.push(k);}}if(ns.length>0){var response=syncXHR("POST",(window.mstrConfig&&mstrConfig.taskURL)||"taskProc",{taskId:"getDescriptors",keys:ns.join(","),prefix:prefix});if(response){var r=eval("("+response+")");populateDescriptors(r&&r.descriptors);}}};mstrmojo.requiresDescsWPrefix=function reqDescP(prefix){var args=[].slice.call(arguments);args[0]=null;requestDescriptor(prefix,args);};mstrmojo.requiresDescs=function reqDesc(){if(window.mstrConfig!==undefined&&!mstrConfig.onMobileDevice){requestDescriptor(descPrefix,arguments);}};mstrmojo.desc=function desc(descID,defText){if(descID!==null&&descID!==undefined){mstrmojo.requiresDescs(descID);if($DESCRIPTORS.hasOwnProperty(descPrefix+descID)){return $DESCRIPTORS[descPrefix+descID];}defText=defText||"No string descriptor found for descID="+descID;}var decDefText="["+defText+"]";$DESCRIPTORS[descPrefix+descID]=decDefText;return decDefText;};mstrmojo.descP=function descP(prefix,descID,defText){mstrmojo.requiresDescsWPrefix(prefix,descID);if($DESCRIPTORS.hasOwnProperty(prefix+descID)){return $DESCRIPTORS[prefix+descID];}defText=defText||"No string descriptor found for descID="+descID;var decDefText="*"+defText+"*";$DESCRIPTORS[prefix+descID]=decDefText;return decDefText;};mstrmojo.provide=function prv(fqcn,cls){isLoaded[fqcn]=!!cls;return cls;};mstrmojo.invalidateCls=function rel(fqcn){reqCache[fqcn]=false;isLoaded[fqcn]=false;eval(fqcn+" = null");};var mx=mstrmojo.mixin;mstrmojo.declare=function declare(SuperCls,mixins,config){function Constr(props){if((!props||!props.dontInit)&&this.init){this.init(props);}}if(SuperCls){Constr.prototype=new SuperCls({dontInit:true});Constr.prototype.constructor=Constr;}var proto=Constr.prototype;var cnt=(mixins&&mixins.length)||0,i;for(i=0;i<cnt;i++){mx(mixins[i],proto);}if(config){mx(config,proto);if(config.scriptClass){isLoaded[config.scriptClass]=true;}}return Constr;};mstrmojo.findAncestor=function findAncestor(src,property,value,limitClass){var ancestor=src&&src.parent;while(ancestor&&(!limitClass||!(ancestor instanceof limitClass))){var targetProperty=ancestor[property];if(targetProperty!==undefined){if(value!==undefined&&value!==null){if(targetProperty===value){return ancestor;}}else{return ancestor;}}ancestor=ancestor.parent;}return null;};mstrmojo.isDescendant=function isDescendant(parent,child){var ancestor;if(!child||!parent){return false;}ancestor=child.parent;while(ancestor){if(ancestor===parent){return true;}ancestor=ancestor.parent;}return false;};mstrmojo.getCSRFToken=function getCSRFToken(url){var tkn=null;try{if(url){if(url.indexOf("validateRandNum=")>=0){return tkn;}if(this.isUrlExternal(url)){return tkn;}}if(window.mstrApp&&mstrApp.validateRandNum){tkn=mstrApp.validateRandNum;}else{if(window.mstrConfig&&mstrConfig.validateRandNum){tkn=mstrConfig.validateRandNum;}else{if(window.microstrategy!==undefined&&microstrategy&&microstrategy.validateRandNum){tkn=microstrategy.validateRandNum;}}}}catch(err){}return tkn;};mstrmojo.addCSRFTokenToURL=function addCSRFTknToURL(url){if(!url){return"";}var tkn=mstrmojo.getCSRFToken(url);if(tkn&&tkn.length>0){if(url.indexOf("?")>-1){url+="&";}else{url+="?";}url+="validateRandNum="+tkn;}return url;};mstrmojo.addCSRFTokenToTaskParams=function addCSRFTknToTaskParams(params){if(params){var tkn=mstrmojo.getCSRFToken();if(tkn&&tkn.length>0){params.validateRandNum=tkn;}}return params;};mstrmojo.getInstance=function getInstance(config){var Clazz=mstrmojo.hash.walk(config.scriptClass,window);if(Clazz){return new Clazz(config);}return null;};mstrmojo.isUrlExternal=function isUrlExternal(url){var curURL=window.location.href;var servletName=window.mstrApp&&mstrApp.name,taskProcName=window.mstrConfig.taskURL&&mstrConfig.taskURL,isSameWebApp=(url.indexOf("?")===0||url.indexOf(servletName)===0||url.indexOf("./"+servletName)===0||url.indexOf(taskProcName)===0||url.indexOf("./"+taskProcName)===0||url.indexOf(curURL)===0||((curURL.indexOf("?")>0)&&(url.indexOf(curURL.substring(0,curURL.indexOf("?")))===0)));return !isSameWebApp;};mstrmojo.resolveFeature=function resolveFeature(feature){var features=mstrApp.features;return features&&features[feature];};mstrmojo.getStyleRoot=function getStyleRoot(){var c=mstrConfig||{},styleRoot=c.styleRoot||"../style";return styleRoot;};}());(function(){function G(O,U,T,Q,S,P,R){if(U>P){return false;}return(!R)||(O===0)||((O<Q)&&(U>=S-(P-S)));}function M(R,O,V,U,Q,T,P,S){if(V>P){return false;}return(!S)||((O<Q)&&(V>=T-R.getHeight()));}function N(O,Q,P){O.renderMode="scroll";O.render();O.numChildrenRendered=0;Q.numChildrenRendered++;if(P&&!O.builtChildren){O.buildChildren();}}function E(){return this.useScrollBuffer?this.scrollBuffer:0;}mstrmojo._CanRenderDocOnScroll=mstrmojo.provide("mstrmojo._CanRenderDocOnScroll",{_mixinName:"mstrmojo._CanRenderDocOnScroll",renderMode:"scroll",scrollBuffer:0,preBuildRendering:function K(){if(!!mstrApp.features["ignore-incremental-rendering"]){this.renderMode=null;}if(this._super){this._super();}},postBuildRendering:function B(){if(this.renderMode===null){return this._super();}this.renderChildren();return true;},childRenderOnAddCheck:function(O){if(this.renderMode===null){return this._super(O);}return false;},renderChildren:function L(){var P;if(this.renderMode==="scroll"){var Q=this;while(Q){if(Q.scrollboxNode&&(Q.scrollboxWidthFixed||Q.scrollboxHeightFixed)&&Q.connectScrollbox){P=Q;break;}Q=Q.parent;}}if((this.renderMode!=="scroll")||!P){this._super();return ;}if(this.containerNode){this.scrollboxOwner=P;P.connectScrollbox(this);this.numChildrenRendered=0;var O=this.numChildren;if(O===undefined){this.numChildren=O=this._getModelChildNodes(this.node,false,0,0,true).total;}this.sectionsToRender=O;this.subsectionsToRender=0;if(O){this._startSubsectionThread(false);}}if(this.resizeOrReposition){this.resizeOrReposition();}},onscroll:function I(){if(!this.renderingSubsections){this.useScrollBuffer=true;this._startSubsectionThread(true);}},_startSubsectionThread:function A(R){var P=this;var Q=function(T,S){if(P[T]){if(S){self.clearTimeout(P[T]);}else{self.clearInterval(P[T]);}delete P[T];}};var O=function(T){P.renderingSubsections=false;var S=function(){Q("renderCtlsTimer");P.showRenderStatus(false);P.renderCtrlsInViewport();P.raiseEvent({name:"afterScroll"});P=null;};if(T){P.renderCtlsTimer=self.setTimeout(S,P.scrollboxOwner.scrollInterval+1);}else{S();}};Q("renderSubsTimer");Q("renderCtlsTimer",true);this.renderingSubsections=true;if((this.sectionsToRender||this.subsectionsToRender)&&!this._renderSubsectionsToScroll()){this.showRenderStatus(true);this.renderSubsTimer=self.setInterval(function(){if(P._renderSubsectionsToScroll()){Q("renderSubsTimer");O(R);}else{P.showRenderStatus(true);}},this.scrollboxOwner.scrollInterval);}else{O(R);}},showRenderStatus:function F(P,U){var T=this.parent;if(!T||!T.showStatus){return ;}var O=U,Q;if(P){var R=this.numChildrenRendered,S=this.numChildren;Q=S&&parseInt(100*R/S,10);O="*Rendering section "+R+" of "+S+".*";}T.showStatus(P,O,Q);},_renderSubsectionsToScroll:function J(){var Z=this.scrollboxOwner,a=Z.scrollboxTop,R=Z.scrollboxLeft,U=Z.scrollboxBottom+E.call(this),p=Z.scrollboxRight,b=U-a,X=0,W=0,V=null,d=null,Y,j;U+=1;function k(){V=W;d=V+b;}var O=this.numChildren,T=this.children||[],Q=this.model,g=this.node,f=false;for(j=0;j<O;j++){var o=T[j];if(!o){o=this.addChildren(this.builder.build(this._getModelChildNodes(g,false,j,1,true).nodes,Q))[0];T=this.children||[];}var P=f;f=!!o.defn.horiz;Y=(j>0&&o.node.data.bh);if((!f&&P)||(Y&&P)){X=0;W+=T[j-1].getHeight();if(W>U){return true;}if((d!==null)&&(W>d)){return false;}}if(!o.hasRendered){if(!G(X,W,R,p,a,U,f)){if(f){continue;}else{return true;}}this._renderSection(o,j);this.sectionsToRender--;this.subsectionsToRender+=(o.children&&o.children.length)||0;if(V===null){k();}}var S=o.children||[],h=null,e,l;for(e=0,l=S.length;e<l;e++){h=S[e];if(!h.hasRendered){if(!M(h,X,W,R,p,a,U,f)){if(f){break;}else{return true;}}N(h,o);this.subsectionsToRender--;if(V===null){k();}}if(f){X+=h.getWidth();if(X>p){break;}}else{W+=h.getHeight();if(W>U){return true;}if((d!==null)&&(W>d)){return false;}}}}return true;},_renderSection:function H(O,P){N(O,this,true);},_getModelChildNodes:function(Q,P,S,O,R){return this.model.getChildren(Q,P,S,O,R);},renderCtrlsInViewport:function D(){var X=this.scrollboxOwner,Z=X.scrollboxTop,P=X.scrollboxLeft,S=X.scrollboxBottom+E.call(this),p=X.scrollboxRight,U=0,T=0,e=false,R=this.children||[],O,V,h,Y;var d=function(s){if(e){U+=s.getWidth();}else{T+=s.getHeight();}};var l=function(z,t,x,AB,w){var u=parseInt(t,10)||0,AA=parseInt(x,10);return(isNaN(AA))?(z+u<=w):mstrmojo.boxmodel.rangeIntersect(z+u,z+u+AA,AB,w);};for(h=0,Y=(R&&R.length)||0;h<Y;h++){var q=R[h];O=e;e=!!q.defn.horiz;V=(h>0&&q.node.data.bh);if((!e&&O)||(V&&O)){U=0;T+=R[h-1].getHeight();if(T>S){return ;}}if(!q.hasRendered){if(!e){return ;}continue;}var k=q.children,Q=(k&&k.length)||0,b,g;for(b=0;b<Q;b++){g=k[b];if(!g.hasRendered){break;}if(g.builtChildren&&(g.numChildrenRendered===((g.children&&g.children.length)||0))){d(g);}else{if((T+g.getHeight()>=Z)&&(!e||(U+g.getWidth()>=P))){var r=g.children,a=(r&&r.length)||0;if(!a&&!g.builtChildren){g.buildChildren();r=g.children;a=(r&&r.length)||0;}var f=[],j;for(j=0;j<a;j++){var o=r[j];if(o.hasRendered){continue;}var W=o.getFormats()||{};if(l(T,W.top,W.height,Z,S)&&l(U,W.left,W.width,P,p)){o.render();f.push(o);}}g.performCanGrowCanShrink(f,true);}d(g);}if((e&&U>p)||(!e&&T>S)){break;}}}},unrender:function C(P){var O=this.scrollboxOwner;if(O){O.disconnectScrollbox(this);}this._super(P);}});}());(function(){mstrmojo.boxmodel=mstrmojo.provide("mstrmojo.boxmodel",{rangeIntersect:function E(J,H,I,G){if(J<I){return I<=H;}if(J>I){return J<=G;}return true;},px2Inches:function C(H,G){G=parseInt(G,10);return mstrmojo.NumberFormat.getInstance(mstrConfig.decimalSep,mstrConfig.thousandsSep).format(parseFloat((G/H.zf/H.dpi).toFixed(4)));},offset:function F(I,H){var L=I,G=0,K=0;while(I){G+=I.offsetLeft;K+=I.offsetTop;I=I.offsetParent;if(I===H){break;}}var J;for(J=L&&L.parentNode;J&&J!==H;J=J.parentNode){if(J.scrollTop){K-=J.scrollTop;}if(J.scrollLeft){G-=J.scrollLeft;}}return{left:G,top:K};},convert2px:function D(K,I){if(!/px$/.test(I)){var H=document.createElement("img"),G=H.style,J;G.zIndex=-1;G.left=I;K.appendChild(H);J=G.pixelLeft;K.removeChild(H);return J+"px";}return I;},getEdgeQuadrantByPoint:function B(I,H){var G=H.x-I.x,M=H.y-I.y,J=I.w,L=I.h,K=[["Left","Bottom"],["Top","Right"]];if(M>L/J*G){K=K[0];}else{K=K[1];}return(M<-L/J*G+L)?K[0]:K[1];},isPtInPolygon:function A(I,K){var G=I.x,J=I.y,H=false;K.forEach(function(N,L){var M=K[L-1]||K[K.length-1];if((N.y>=J)!==(M.y>=J)){if((G<(M.x-N.x)*(J-N.y)/(M.y-N.y)+N.x)){H=!H;}}});return H;}});}());mstrmojo.vi.viz.EnumWidgetTypes={GRID:0,GRAPH_MATRIX:1,HEATMAP:2,NETWORK:3,IMAGELAYOUT:4,ESRIMAP:5,GOOGLEMAP:6,CUSTOM:7};(function(){function X(a){var b=[].slice.call(a),d=b[b.length-1],e=function(g,f){return g===f;};if(/function|string/.test(typeof d)){e=typeof d==="function"?d:function(g,f){return g[d]===f[d];};b=b.slice(0,b.length-1);}return{sets:b,compareFunc:e};}mstrmojo.array=mstrmojo.provide("mstrmojo.array",{indexOf:function D(b,e){var a=(b&&b.length)||0,d;for(d=0;d<a;d++){if(b[d]==e){return d;}}return -1;},indexOfMulti:function T(a,b){var g=[],f={},e=0,d=this;d.forEach(a,function(j,h){d.forEach(b,function(k,l){var o=(k===j);if(o){g[l]=f[l]=h;e++;}return !o;});});return{indices:g.length?g:null,map:f,count:e};},forEach:function R(b,h,e){var a=(b&&b.length)||0,d;for(d=0;d<a;d++){var g=d===(a-1);if(e){if(h.call(e,b[d],d,b,g)===false){break;}}else{if(h(b[d],d,b,g)===false){break;}}}return b;},map:function Y(b,g){var a=(b&&b.length)||0,d=[],e;for(e=0;e<a;e++){d[e]=g(b[e],e);}return d;},filter:function I(d,e,f){var j=[],h=0,b=(d&&d.length)||0,a=(f&&f.max)||0,g;for(g=0;g<b;g++){if(e(d[g],g,d)){j[h]=d[g];h++;if(a&&h>=a){break;}}}return j;},filterOne:function L(a,b){var d=this.filter(a,b,{max:1});if(d.length){return d[0];}return null;},ensureArray:function P(a){return[].concat(a||[]);},find:function M(b,g,d){var a=(b&&b.length)||0,e;for(e=0;e<a;e++){var f=b[e];if(f&&f[g]==d){return e;}}return -1;},distinct:function B(b,g){if(b.reduce&&!g){return b.reduce(function(j,h){if(j.indexOf(h)<0){j.push(h);}return j;},[]);}var a=(b&&b.length)||0,d,f,e=[];for(d=0;d<a;d++){f=b[d];if((f!==undefined)&&((g&&this.find(e,g,f[g])<0)||(!g&&this.indexOf(e,f)<0))){e.push(f);}}return e;},findBin:function E(d,j,k,b){var g=(b||d.length)-1,e=0,a,f=j[k];while(g-e>1){if(d[a=g+e>>1][k]<f){e=a;}else{g=a;}}if(d[e][k]===f){return e;}return d[g][k]===f?g:-1;},search:function H(k,e,g){var f=k.length,d=-1,b,j=e.toUpperCase(),a=e.length;while(f-d>1){if(k[b=f+d>>1][g].substr(0,a).toUpperCase()<j){d=b;}else{f=b;}}return f;},findMulti:function Q(h,d,o){if(!o){return{indices:null,map:{},count:0};}var l=o.length,r=[],b={},p=0,f=(h&&h.length)||0,g;for(g=0;g<f;g++){var q=h[g][d],e;for(e=0;e<l;e++){if(o[e][d]===q){r[e]=g;b[e]=g;p++;break;}}}return{indices:r,map:b,count:p};},removeItem:function W(a,d){var b=this.indexOf(a,d);if(b>-1){this.removeIndices(a,b,1);}return b;},removeItems:function N(a,g,b){var d=this.findMulti(a,g,b);if(d.count){var f=d.indices.concat().sort(this.numSorter).slice(0,d.count),e;for(e=f.length-1;e>-1;e--){a.splice(f[e],1);}}},numSorter:function Z(e,d){return Number(e)-Number(d);},stringSorter:function J(f,e){var d=f.toLowerCase(),g=e.toLowerCase();if(d<g){return -1;}if(d>g){return 1;}return 0;},removeIndices:function O(a,d,b){a.splice(d,b);},insert:function F(b,a,d){if(!b){b=[];}if(a===null||a===undefined){a=b.length;}Array.prototype.splice.apply(b,[a,0].concat(d));return b;},hash:function C(b,e){e=e||{};var a=(b&&b.length)||0,d;for(d=0;d<a;d++){e[b[d]]=true;}return e;},get:function U(b,f){if(!f){return null;}var d=[],a=f.length,e;for(e=0;e<a;e++){d[e]=b[f[e]];}return d;},deepSortArr:function G(b,e,a,d){return b.sort(function(h,f){var j=h[a][e],g=f[a][e];if(!d){return(j<=g);}return(j>g)?-1:1;});},isArray:function(a){var b=Array.isArray;if(b){return b(a);}return Object.prototype.toString.call(a)==="[object Array]";},some:function K(b,d){if(!b){return false;}if(b.some){return b.some(d);}var a=false;this.forEach(b,function(f,e){a=d(f,e,b);return !a;});return a;},difference:function V(){if(arguments.length<2){throw new Error("difference should get at least 2 parameters");}var e=X(arguments),b=e.sets,d=e.compareFunc,f=b[0],a=[].concat.apply([],b.slice(1));return f.filter(function(g){return !a.some(function(h){return d(g,h);});});},intersection:function S(){if(arguments.length<2){throw new Error("intersection should get at least 2 parameters");}var f=X(arguments),d=f.sets,e=f.compareFunc,a=d[0],b=d.slice(1);b.forEach(function(g){a=a.filter(function(h){return g.some(function(j){return e(h,j);});});});return a;},fnReduceNumber:function A(a,b){return a+b;}});}());(function(){mstrmojo._HasRelativeUrls=mstrmojo.provide("mstrmojo._HasRelativeUrls",{_mixinName:"mstrmojo._HasRelativeUrls",relativeUrls:[],update:function A(C){this._super(C);var B=this,D=mstrApp.getConfiguration().getHostUrlByProject(mstrApp.getCurrentProjectId());mstrmojo.array.forEach(this.relativeUrls,function(F){var E=B[F];if(E&&(E.indexOf("://")===-1&&E.indexOf("data:")!==0)){B[F]=D+E;}});}});}());mstrmojo.mstr.EnumDSSXMLObjectTypes={Generic:-2,Unknown:-1,Reserved:0,Filter:1,Template:2,ReportDefinition:3,Metric:4,Style:6,AggMetric:7,Folder:8,SubscriptionDevice:9,Prompt:10,Function:11,Attribute:12,Fact:13,Dimension:14,Table:15,DatamartReport:16,FactGroup:17,Shortcut:18,Resolution:19,Monitor:20,AttributeForm:21,Schema:22,Format:23,Catalog:24,CatalogDefn:25,Column:26,PropertySet:28,DBRole:29,DBLogin:30,DBConnection:31,Project:32,ServerDef:33,User:34,Configuration:36,Request:37,Script:38,Search:39,SearchFolder:40,Datamart:41,FunctionPackageDefinition:42,Role:43,SecurityRole:44,Locale:45,Consolidation:47,ConsolidationElement:48,ScheduleEvent:49,ScheduleObject:50,ScheduleTrigger:51,Link:52,DbTable:53,TableSource:54,DocumentDefinition:55,DrillMap:56,DBMS:57,MDSecurityFilter:58,PromptAnswer:59,PromptAnswers:60,ObjectTag:65,ReservedLastOne:66};(function(){mstrmojo.hash=mstrmojo.provide("mstrmojo.hash",{copy:function B(S,R){if(S){R=R||{};var T;for(T in S){R[T]=S[T];}}return R;},copyProps:function C(T,V,R){R=R||{};if(V){var U=(T&&T.length)||0,S;for(S=0;S<U;S++){var W=T[S];if(V[W]!==undefined){R[W]=V[W];}}}return R;},forEach:function I(U,T,S){if(U){var R;for(R in U){if(S){if(T.call(S,U[R],R,U)===false){break;}}else{if(T(U[R],R,U)===false){break;}}}}return U;},walk:function P(V,S){if(!S){S=mstrmojo.global;}var U=V.split(".");if(U.length===1){return S[V];}var T=(U&&U.length)||0,R;for(R=0;R<T;R++){S=S[U[R]];if(!S){break;}}return S;},isEmpty:function F(S){if(!S){return true;}var R;for(R in S){if(S[R]!==null&&S[R]!==undefined){return false;}}return true;},clear:function G(S){if(S){var R;for(R in S){delete S[R];}}return S;},any:function J(U,V){var T;if(U){var S=this.keyarray(U);if(S.length>0){var R=S[0];T=V?R:U[R];}}return T;},clone:function M(V){if(!V){return null;}var X;if(V.constructor===Array){X=V.concat();var W=X[0];if(W&&typeof W==="object"){var R=X.length,U;for(U=0;U<R;U++){X[U]=this.clone(V[U]);}}}else{X={};var T;for(T in V){var S=V[T];if(S&&typeof S==="object"){X[T]=this.clone(S);}else{X[T]=S;}}}return X;},cloneArray:function E(S){var T=[],R=(S&&S.length)||0,U;for(U=0;U<R;U++){T[U]=this.clone(S[U]);}return T;},keyarray:function K(T,U){var R=[],S;if(T){if(Object.keys&&!U){R=Object.keys(T);}else{for(S in T){R.push(U?Number(S):S);}}}return R;},valarray:function L(T){var R=[];if(T){var S;for(S in T){R.push(T[S]);}}return R;},equals:function Q(Y,X){var S=mstrmojo.hash,W=(Y&&X)||(!Y&&!X&&(Y===X));if(W&&Y){W=(Y.constructor===X.constructor);if(W){if(Y.constructor===Array){var V=Y.length;W=(V===X.length);if(W&&V){var T;for(T=0;T<V;T++){W=W&&S.equals(Y[T],X[T]);}}}else{if(typeof Y==="object"){var Z=S.keyarray(Y),U=S.keyarray(X);W=Z.length===U.length;if(W){var R;for(R in Y){W=W&&(S.equals(Y[R],X[R]));}}}else{W=(Y===X);}}}}return W;},obj2array:function O(W){var X;for(X in W){var V=W[X];if(V&&typeof V==="object"){W[X]=this.obj2array(V);}}var S=W.isArray;if(S!==undefined&&S===true){var U=[],R=W.length,T;for(T=0;T<R;T++){U.push(W[T]);}return U;}return W;},min:function D(U,V,W){var R=null,T;if(U){for(T in U){var S=V?U[T]:T;if(W){S=Number(S);}if((R===null)||(S<R)){R=S;}}}return R;},max:function N(U,V,W){var R=null,T;if(U){for(T in U){var S=V?U[T]:T;if(W){S=Number(S);}if((R===null)||(S>R)){R=S;}}}return R;},make:function A(S,T,R){if(!S||!T){return null;}if(S.attachEventListener){return S;}if(T.makeObservable){S=T.makeObservable(S,R)||S;}else{this.copy(T.prototype,S);if(S.init){S=S.init(R)||S;}}return S;},mergeHashes:function H(R,S){R=this.clone(R)||{};if(S){mstrmojo.array.forEach(mstrmojo.array.distinct(this.keyarray(S).concat(this.keyarray(R))),function(T){var V=R[T],U=S[T];if(!V){R[T]=U;}else{if(V&&U){if(typeof V==="object"){if(V.constructor===Array){R[T]=V.concat(U);}else{R[T]=this.mergeHashes(V,U);}}else{R[T]=U;}}}},this);}return R;}});}());mstrmojo.vi.viz.EnumVizStyles={GRAPH_MATRIX:"GraphMatrixVisualizationStyle",NETWORK:"NetworkVisualizationStyle",HEAT_MAP:"VIHeatMapVisualizationStyle",GOOGLE_MAP:"GoogleMapVisualizationStyle",ESRI_MAP:"ESRIMapVisualizationStyle",IMAGE_LAYOUT:"ImageLayoutVisualizationStyle"};mstrmojo.mstr.EnumWebFunctionType={WebFunctionTypeReserved:0,WebFunctionTypeGeneric:1,WebFunctionTypeRankQual:2,WebFunctionTypePercentQual:3};(function(){mstrmojo._IsGraphDataService=mstrmojo.provide("mstrmojo._IsGraphDataService",{handleUserSingleTap:function A(D,E,B,G,C,F){if(mstrApp.onMobileDevice()){mstrApp.serverRequest({taskId:"handleUserSingleTap",sliceID:D,nodekey:E,x:B,y:G,selectable:C},F);}}});}());(function(){function AL(Ar,As){return As||(Ar||window).event;}mstrmojo.PositionType=null;var Ao=!!document.all,AJ=document.documentMode,t=navigator.userAgent,k=false,h=false,f=false,e=false,R=false,w=false;if(Ao){if(window.mstrConfig&&mstrConfig.isEdgeModeEnabled){k=!!t.match(/MSIE 6/);h=((!!t.match(/MSIE 7/)&&!AJ)||AJ===7);f=(AJ===8);e=(AJ===9);R=(AJ===10);w=(!AJ||AJ<=9);}else{k=!!t.match(/MSIE 6/);h=!!t.match(/MSIE 7/);f=!!t.match(/MSIE 8/);e=!!t.match(/MSIE 9/);R=!!t.match(/MSIE 10/);w=!R;}}var d=!Ao&&!!t.match(/Firefox/),o=0,u=!!t.match(/Android/),Af=!!t.match(/iPad/),AP=!!t.match(/iPhone/),AX=!!document.createTouch||u,s=!!t.match(/PlayBook/),O=!!t.match(/Windows Phone/),Ap=!Ao&&!!t.match(/Trident.*rv/),b=d?"-moz-":(Ao||Ap)?"":"-webkit-",AK=d?"Moz":(R||Ap)?"":Ao?"ms":"webkit",AU=((R||Ap)?"t":"T"),AO=AK+AU+"ransition";function Aj(){return AK+AU+"ransform";}function AH(){return AO+"Property";}function S(){return AO+"Duration";}function N(){return(R||d)?"transitionend":"webkitTransitionEnd";}function g(){return AK+"BoxShadow";}var Am=Aj(),Ac=AH(),AC=S(),A=N(),q=g();function AT(){if(!o&&d){var Ar=t.match(/.*Firefox\/([\d|\.]*).*/);if(Ar){o=parseFloat(Ar[1]);}}return o;}function AZ(){var As=0,Aw=0,At=window,Au=document,Ar=Au.body,Av=Au.documentElement;if(typeof At.pageYOffset==="number"){Aw=At.pageYOffset;As=At.pageXOffset;}else{if(Ar&&(Ar.scrollLeft||Ar.scrollTop)){Aw=Ar.scrollTop;As=Ar.scrollLeft;}else{if(Av&&(Av.scrollLeft||Av.scrollTop)){Aw=Av.scrollTop;As=Av.scrollLeft;}}}return{x:As,y:Aw};}function AI(Ar){Ar=Ar||0;Ar=String(Ar);return((Ar.indexOf("%",0))!==-1)?Ar:(Ar+"px");}function AR(At,Ax,Aw,Av,Au){if(!mstrmojo.dom.isWinPhone){Av=(Av||false||this.isHWAccelerated);}else{Av=false;}var As=Au+(Av?"3d":"")+"(",Ar=Av?(","+Aw+")"):")";return As+At+","+Ax+Ar;}var Ad=2,V=3;function x(Ax,Aw,A0){var Az=Ax.style,At=Az.display,Av=this.windowDim(),Au=AZ();Az.display="block";var Ay=Av.w-Ax.clientWidth,A1=Math.max(Av.h-Ax.clientHeight,0),Ar={4:0,5:Ay,3:Ay/2},As={1:0,3:A1/2,2:A1};Az.left=Ar[Aw]+Au.x+"px";Az.top=As[A0]+Au.y+"px";Az.display=At;}function p(Au,At,Av,Ar){if(Au.addEventListener){return Au.addEventListener(At,Av,!!Ar);}Av._id=Av._id||p.guid++;Au.events=Au.events||{};var As=Au.events[At];if(!As){As=Au.events[At]={};if(Au["on"+At]){As[0]=Au["on"+At];}}As[Av._id]=Av;function Aw(Az){Az=Az||window.event;var Ay=this.events[Az.type],Ax;for(Ax in Ay){Ay[Ax].call(this,Az);}}Au["on"+At]=Aw;}p.guid=1;function j(At,As,Au,Ar){if(!At){return ;}if(At.removeEventListener){At.removeEventListener(As,Au,!!Ar);}else{if(At.events&&At.events[As]){delete At.events[As][Au._id];}}}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:t,isIE:Ao,isIE6:k,isIE7:h,isIE8:f,isIE9:e,isIE10:R,isIEW3C:Ap,isNSIE:w,isDXIE:w,isFF:d,isWK:!!t.match(/AppleWebKit/),isSafari:!!t.match(/Safari/)&&!t.match(/Chrome/),isChrome:!!t.match(/AppleWebKit/)&&t.match(/Chrome/),isHWAccelerated:!u,isAndroid:u,isIPad:Af,isPlayBook:s,isWinPhone:O,isMobile:Af||AP||O||u,supportsTouches:AX,TOUCHSTART:AX?"touchstart":"mousedown",TOUCHMOVE:AX?"touchmove":"mousemove",TOUCHEND:AX?"touchend":"mouseup",TOUCHCANCEL:AX?"touchcancel":"",RESIZE:AX?"orientationchange":"resize",CSS3_PREFIX:b,CSS3_BOXSHADOW:q,CSS3_TRANSFORM:Am,CSS3_TRANSITION:AO,CSS3_TRANSITION_PROPERTY:Ac,CSS3_TRANSITION_DURATION:AC,CSS3_TRANSITION_END:A,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh"},htmlFeatures:{FILE_READER:"fr"},MOUSE_BUTTON:{LEFT:1,RIGHT:2},supports:function B(Ar){var As=this.isFF&&AT();switch(Ar){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||As>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||As>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);case this.htmlFeatures.FILE_READER:return !!(window.FileReader);}return false;},getOSInfo:function AQ(){var Aw="Unknown",As=navigator.appVersion,Av=navigator.userAgent,Au=Aw;var Ar=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];var At;for(At=0;At<Ar.length;At++){var Ay=Ar[At];if(Ay.r.test(Av)){Au=Ay.s;break;}}var Ax=Aw;if(/Windows/.test(Au)){Ax=/Windows (.*)/.exec(Au)[1];Au="Windows";}switch(Au){case"Mac OS X":Ax=/Mac OS X (10[\.\_\d]+)/.exec(Av)[1];break;case"Android":Ax=/Android ([\.\_\d]+)/.exec(Av)[1];break;case"iOS":Ax=/OS (\d+)_(\d+)_?(\d+)?/.exec(As);Ax=Ax[1]+"."+Ax[2]+"."+(Ax[3]|0);break;}return{name:Au,version:Ax};},transEndEvtNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},replace:function r(At,Ar){if(At&&Ar){var As=At.parentNode;if(As){As.replaceChild(Ar,At);}}return Ar;},attachEvent:function X(At,As,Au,Ar){if(At.addEventListener){return At.addEventListener(As,Au,!!Ar);}return At.attachEvent("on"+As,Au);},detachEvent:function Ab(At,As,Au,Ar){if(!At){return ;}if(At.removeEventListener){At.removeEventListener(As,Au,!!Ar);}else{At.detachEvent("on"+As,Au);}},attachMarkupEvent:function AA(Au,At,Ar){var As=function(Av){mstrmojo.all[Au].captureDomEvent(Ar,window,Av);};this.attachEvent(At,Ar,As);return As;},attachOneTimeEvent:function W(Au,As,Av,Ar){var At=function(Aw){Av(Aw);if(Ar){j(this,As,At);}else{mstrmojo.dom.detachEvent(this,As,At);}};if(Ar){p(Au,As,At);}else{this.attachEvent(Au,As,At);}Au=null;return At;},attachMouseMoveEvents:function D(Au,Ar){var At=this,As=function(Av){if(Ar){Ar(Av);}At.detachEvent(document,"mousemove",Au);At.detachEvent(document,"mouseup",As);};At.attachEvent(document,"mousemove",Au);At.attachEvent(document,"mouseup",As);},captureDomEvent:function AN(Aw,Au,As,Av,At){var Ar=mstrmojo.all[Aw];if(Ar){Ar.captureDomEvent(Au,As,Av,At);}},translate:function L(At,As,Aw,Av,Ar,Au){Ar=(Ar&&" "+Ar)||"";At.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(As,Aw,Av,Au)+Ar;},createTranslateString:function P(Ar,Au,At,As){Ar=AI(Ar);Au=AI(Au);At=AI(At);return AR(Ar,Au,At,As,"translate");},createScaleString:function z(Ar,Au,At,As){Ar=Ar||0;Au=Au||0;At=At||0;return AR(Ar,Au,At,As,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function C(At,Ar,Au,Aw){var As=At.id+"-"+Ar,Av=this._bufferConnects[As];if(!Av){Av=this._bufferConnects[As]={elId:At.id,eventName:Ar,timer:null,bufferSize:Aw,listeners:[],callback:function(Ax){mstrmojo.dom._callback(Ax,mstrmojo.global,As);return true;}};this.attachEvent(At,Ar,Av.callback);}Av.listeners.push(Au);},_callback:function Ai(Av,Ar,At){var Au=this._bufferConnects[At],Aw=Au&&Au.timer;if(Au&&!Aw){var As=(Au.bufferSize===null)?this._bufferSize:Au.bufferSize;if(Au.bufferSize){Au.timer=Ar.setTimeout(function(){mstrmojo.dom.updateBuffers(At);},As);}else{mstrmojo.dom.updateBuffers(At);}}},updateBuffers:function H(Au){var Av=this._bufferConnects[Au],As=Av&&Av.listeners,Ar=(As&&As.length)||0,At;for(At=0;At<Ar;At++){As[At]();}if(Av&&Av.timer){delete Av.timer;}},detachBufferedEvent:function AF(As,Aw,Ax){if(!As){return ;}var Az=As.id+"-"+Aw,At=this._bufferConnects[Az],Av=At&&At.listeners,Ay=(Av&&Av.length)||0,Au;if(Ay){for(Au=Ay-1;Au>-1;Au--){if(Av[Au]===Ax){Av.splice(Au,1);}}if(!Av.length){this.detachEvent(As,Aw,At.callback);delete this._bufferConnects[Az];if(At.timer){var Ar=mstrmojo.global;Ar.clearTimeout(At.timer);}}}},eventTarget:function AD(Ar,As){As=AL(Ar,As);return As.target||As.srcElement;},isMac:function AB(){return this.getOSInfo().name.toLowerCase().indexOf("mac")>=0;},isMetaKey:function J(Ar,Au){var At=this.getOSInfo().name.toLowerCase().indexOf("mac")>=0,As=AL(Ar,Au)||{};return(As.ctrlKey&&!At)||(As.metaKey&&At);},ctrlKey:function Al(Ar,As){return(AL(Ar,As)||{}).ctrlKey;},shiftKey:function AE(Ar,As){return(AL(Ar,As)||{}).shiftKey;},metaKey:function Z(Ar,As){return(AL(Ar,As)||{}).metaKey;},getButton:function AV(Ar,As){return((Number(AL(Ar,As).button))===2)?2:1;},isPrimaryMouseBtn:function Ag(As,Ar){return this.getButton(Ar||window,As)===1;},getMousePosition:function l(Au,At){At=At||window;var As,Ax;if(mstrmojo.dom.isIE){Au=Au||At.event;var Av=document,Ar=Av.body,Aw=Av.documentElement;As=Au.clientX+Ar.scrollLeft+(Aw.scrollLeft||0);Ax=Au.clientY+Ar.scrollTop+(Aw.scrollTop||0);}else{As=Au.pageX;Ax=Au.pageY;}return{x:As,y:Ax};},position:function AW(As,At){var Aw={x:0,y:0,w:0,h:0};if(As&&As.getBoundingClientRect){try{Aw=As.getBoundingClientRect();}catch(Av){Aw={left:0,top:0,right:0,bottom:0,height:0,width:0};}Aw={x:Aw.left,y:Aw.top,w:Aw.right-Aw.left,h:Aw.bottom-Aw.top};if(this.isIE6||this.isIE7){var Ar=As.ownerDocument;if(Ar){var Ay=Ar.documentElement,Ax=Ay.getBoundingClientRect();Aw.x-=Ax.left;Aw.y-=Ax.top;}}}if(At){var Au=AZ();Aw.x+=Au.x;Aw.y+=Au.y;}return Aw;},delta:function F(At,Ar){Ar=Ar||document.body;var As=this.position(At),Au=this.position(Ar);return{x:Math.round(As.x-Au.x),y:Math.round(As.y-Au.y)};},windowDim:function Q(){var Ar=0,At=0,Au=window,Av=document,Aw=Av.documentElement,As=Av.body;if(typeof (Au.innerWidth)=="number"&&typeof (Au.innerHeight)=="number"){Ar=Au.innerWidth;At=Au.innerHeight;}else{if(Aw&&(Aw.clientWidth||Aw.clientHeight)){Ar=Aw.clientWidth;At=Aw.clientHeight;}else{if(As&&(As.clientWidth||As.clientHeight)){Ar=As.clientWidth;At=As.clientHeight;}}}return{w:Ar,h:At};},center:function AM(Ar){x.call(this,Ar,V,V);},bottomCenter:function E(Ar){x.call(this,Ar,V,Ad);},clearBrowserHighlights:function K(Ar){Ar=Ar||self;if(!Ar.getSelection){var Ax=Ar.document,Aw=Ax&&Ax.selection,Au=Aw&&Aw.empty;if(Au){try{Aw.empty();}catch(At){}}}else{var As=Ar.getSelection,Av=As&&Ar.getSelection();if(Av&&!Av.isCollapsed){if(Av.empty){Av.empty();}else{if(Av.removeAllRanges){Av.removeAllRanges();}}}}},findAncestorByAttr:function AS(Av,At,As,Ar){var Aw=As?Av:Av&&Av.parentNode;while(Aw&&(Aw!==Ar)){var Au=Aw.getAttribute&&Aw.getAttribute(At);if(Au!=null){return{node:Aw,value:Au};}Aw=Aw.parentNode;}return null;},findAncestorByName:function Ak(At,Aw,As,Ar){Aw=Aw&&Aw.toLowerCase();var Au=As?At:At&&At.parentNode;while(Au&&(Au!==Ar)){var Av=Au.nodeName;if(Av&&(Av.toLowerCase()===Aw)){return Au;}Au=Au.parentNode;}return null;},contains:function I(Au,Av,As,Ar){var At=Av;if(!As){At=At.parentNode;}while(At){if(At===Au){return true;}if(At===Ar){break;}At=At.parentNode;}return false;},toggleSelection:function Aq(As,Ar){As.setAttribute("unselectable",Ar?"off":"on");mstrmojo.css.toggleClass(As,"unselectable",!Ar);As.onselectstart=function(){return Ar;};if(!Ar){this.clearBrowserHighlights();}},preventDefault:function U(Ar,As){As=As||Ar.event;if(As.preventDefault){As.preventDefault();}else{As.returnValue=false;}},stopPropogation:function M(Ar,As){As=As||Ar.event;if(As.stopPropagation){As.stopPropagation();}else{As.cancelBubble=true;}},firstTouch:function AY(Ar,As){return As&&As.touches&&As.touches.length?As.touches[0]:(As||Ar.event);},firstChangedTouch:function Ae(Ar,As){return As&&As.changedTouches&&As.changedTouches.length?As.changedTouches[0]:(As||Ar.event);},isLandscape:function T(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function Aa(Ar){while(Ar){var As=Ar.mstrmojoId;if(As!==null&&As!==undefined){return mstrmojo.all[As];}Ar=Ar.parentNode;}return null;},setCaret:function G(Ar,At){if(Ar.setSelectionRange){Ar.focus();Ar.setSelectionRange(At,At);}else{if(Ar.createTextRange){var As=Ar.createTextRange();As.move("character",At);As.select();}}},setInputSelection:function Y(Ar){if(Ar.select){Ar.focus();Ar.select();}else{if(Ar.createTextRange){Ar.createTextRange().select();}}},setElementSelection:function a(At){if(window.getSelection){var Ar=document.createRange(),As=window.getSelection();Ar.selectNodeContents(At);As.removeAllRanges();As.addRange(Ar);}else{if(document.body.createTextRange){var Au=document.body.createTextRange();Au.moveToElementText(At);Au.select();}}},getHorizontalScroll:function An(){return AZ().x;},getVerticalScroll:function AG(){return AZ().y;},removeNode:function Ah(At){var As=document.getElementById(At),Ar=As&&As.parentNode;if(Ar){return Ar.removeChild(As);}}});}());(function(){mstrmojo.android.NativeBridge=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.android.NativeBridge",selectNavItem:function A(F){var D=F.queryKey,E={act:parseInt(D.act,10),fromNav:D.fromNav==="true",n:D.n};mstrApp.rootController.jumpTo(E);},selectLastOpenedDoc:function C(F){var D=F.queryKey,E={renderIdx:parseInt(D.renderIdx,10),did:D.did,n:D.n,projectID:D.projectID,st:parseInt(D.st,10),ttl:D.ttl,xId:D.xId,hsc:D.hsc==="true"};mstrApp.rootController.jumpTo(E);},goUp:function B(){mstrApp.closeAllDialogs();mstrApp.rootController.goUp();}});}());mstrmojo.warehouse.EnumObjectTypes={FILTER:1,METRIC:4,ATTRIBUTE:12,FACT:13,DIMENSION:14,TABLE:15,TABLE_LOGICAL_VIEW:151,TABLE_PARTITION:152,FORM:21,COLUMN:26,DBROLE:29,PROJECT:32,TRANSFORMATION:43,DBTABLE:53,LAYER:70,RELATIONSHIP:99,COMPOUND_FORM:1001,RELATIONSHIP_ATTRIBUTE:1002};(function(){mstrmojo.android._HasLingeringListSelections=mstrmojo.provide("mstrmojo.android._HasLingeringListSelections",{_mixinName:"mstrmojo.android._HasLingeringListSelections",selectionPolicy:"reselect",noLinger:false,canItemLinger:function D(E){return true;},setClearHandler:function C(F){if(this.noLinger){return ;}var E=this.selectedIndex,G=this.id;if(E>-1&&this.canItemLinger(this.items[E])){this._clearHandler=window.setTimeout(function(){var H=mstrmojo.all[G];if(H){if(H.selectedIndex===E){H.clearSelect();}delete H._clearHandler;}},F);}},postBuildRendering:function A(){this._super();this.setClearHandler(800);},preselectionChange:function B(E){var F=this._clearHandler;if(F){window.clearTimeout(F);delete this._clearHandler;}}});}());(function(){mstrmojo.StringBuffer=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.StringBuffer",append:function A(C){if(!this.buf){this.reset();}this.buf[++this.len]=C;return this;},reset:function B(){this.buf=[];this.len=-1;}});mstrmojo.StringBuffer.prototype.toString=function(D){var C=this.buf;return(C&&C.join(D||""))||"";};}());(function(){function I(J,K){if(!K&&J===this._inFullScreen){return ;}delete this._inFlash;var L=this;if(!K){this._inFullScreen=J;}if(!J&&K){this._inFlash=true;}mstrMobileApp[(J?"enter":"exit")+"FullScreen"]();if(!J){if(K){L._flashHandle=window.setTimeout(function(){delete L._flashHandle;I.call(L,true,true);},2000);}}}function F(P,O,J){if(!O&&P===!!this._inFullScreen){return ;}delete this._inFlash;var N=this.domNode;if(!N){return ;}var K=N.style,S=!!this.controller,R=this,M=(this.fullscreenDirection==="up")?"top":"bottom",Q=function(){K.position=P?"absolute":"static";if(S){mstrApp.rootView.doLayout();}},L=function(){if(S){mstrMobileApp[(P?"enter":"exit")+"FullScreen"]();}};if(!O){this._inFullScreen=P;if(P||!J){Q();}}if(!P){if(parseInt(K[M],10)===0){Q();L();return ;}if(O){this._inFlash=true;}}if(J){mstrmojo.dom.attachOneTimeEvent(N,"webkitTransitionEnd",function(){if(!P){if(!O){Q();}else{R._flashHandle=window.setTimeout(function(){delete R._flashHandle;F.call(R,true,true,true);},3000);}}else{if(R.onEnterFullScreenEnd){R.onEnterFullScreenEnd();}}if(!O){L();}});}else{L();}this["on"+(P?"Enter":"Exit")+"FullScreen"]();K.webkitTransitionDuration=J?"":0;K[M]=P?-N.offsetHeight+"px":0;}function D(J,K,M){var L=mstrApp.isActionBarNative()?I:F;L.call(this,J,M,K);}function H(){var J=this._flashHandle;if(J){window.clearTimeout(J);delete this._flashHandle;}}mstrmojo.android.ui._CanBeFullScreen=mstrmojo.provide("mstrmojo.android.ui._CanBeFullScreen",{fullscreenDirection:"up",onEnterFullScreen:mstrmojo.emptyFn,onExitFullScreen:mstrmojo.emptyFn,resetFullScreen:function E(){if(this._inFullScreen){delete this._inFullScreen;D.call(this,true,false);}},enterFullScreen:function A(){D.call(this,true,true);},flashFullScreen:function G(){if(this._inFullScreen&&!this._inFlash){D.call(this,false,true,true);}},exitFullScreen:function C(J){H.call(this);D.call(this,false,J);},cancelFlashFullScreen:function B(){if(this._inFullScreen&&this._inFlash){H.call(this);D.call(this,true,false,true);}}});}());(function(){mstrmojo.func=mstrmojo.provide("mstrmojo.func",{composite:function D(E){if(!E||!E.length){return mstrmojo.emptyFn;}return function(){var F=E.length,G;for(G=0;G<F;G++){E[G].apply(this,arguments);}};},wrapMethods:function C(J,H){function I(L,K){K=K||{};mstrmojo.hash.forEach(L,function(M,N){K[N]=(K.hasOwnProperty(N)&&typeof M==="function")?mstrmojo.func.composite([M,K[N]]):M;});return K;}if(arguments.length<3){return I(J,H);}var F=arguments.length,G=[].slice.call(arguments,0,F-1).reverse(),E=arguments[F-1];mstrmojo.array.forEach(G,function(K){E=I(K,E);});return E;},override:function A(G,E){var F=function(J,I){return function H(){var L=this._super,K;this._super=I||mstrmojo.emptyFn;try{K=J.apply(this,arguments||[]);}finally{this._super=L;}return K;};};E=E||{};mstrmojo.hash.forEach(G,function(H,I){E[I]=F(H,E[I]);});return E;},throttle:function(G,I,E){var F,K,N,L=null,J=0,M=E||{};var H=function(){J=M.leading===false?0:mstrmojo.date.now();L=null;N=G.apply(F,K);F=K=null;};return function(){var O=mstrmojo.date.now();if(!J&&M.leading===false){J=O;}var P=I-(O-J);F=this;K=arguments;if(P<=0){clearTimeout(L);L=null;J=O;N=G.apply(F,K);F=K=null;}else{if(!L&&M.trailing!==false){L=setTimeout(H,P);}}return N;};},debounce:function(H,J,G){var M,L,F,K,N,E=mstrmojo.date.now;var I=function(){var O=E()-K;if(O<J){M=setTimeout(I,J-O);}else{M=null;if(!G){N=H.apply(F,L);F=L=null;}}};return function(){F=this;L=arguments;K=E();var O=G&&!M;if(!M){M=setTimeout(I,J);}if(O){N=H.apply(F,L);F=L=null;}return N;};},addMethods:function B(F,E){E=E||{};mstrmojo.hash.forEach(F,function(G,H){if(!E.hasOwnProperty(H)&&typeof G==="function"){E[H]=G;}});return E;}});}());(function(){var B=1,C=2,A=4;mstrmojo._IsThresholdConditionTarget=mstrmojo.provide("mstrmojo._IsThresholdConditionTarget",{_mixinName:"mstrmojo._IsThresholdConditionTarget",update:function D(G){var E=G.data.tta;var F=(E&B)>0,H=(E&C)>0;if(F&&this.preservedEnabled===undefined){this.preservedEnabled=!!this.enabled;}if(H&&this.preservedVisible===undefined){this.preservedVisible=!!this.visible;}this.set("enabled",F?false:this.preservedEnabled!==undefined?this.preservedEnabled:this.enabled);this.set("visible",H?false:this.preservedVisible!==undefined?this.preservedVisible:this.visible);this.set("required",(E&A)>0);if(this._super){this._super(G);}}});}());(function(){function A(C){return C.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");}mstrmojo._ImageHelper=mstrmojo.provide("mstrmojo._ImageHelper",{getImage:function B(D){var E=mstrApp,C=E.getConfiguration();if(D){if(D.indexOf("\\")>=0){D=D.replace(/\\/g,"/");}D=A(D);if(D===decodeURI(D)){D=encodeURI(D);}}if(C&&D&&D.indexOf("://")===-1){D=C.getHostUrlByProject(E.getCurrentProjectId())+D;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(D)):D;}});}());(function(){mstrmojo.models.template.MetricValue=mstrmojo.declare(null,null,{init:function G(H){this.data=H.data;this.value=H.value;},getValue:function B(){return this.value.v;},getThresholdType:function D(){return this.value.ty;},getRawValue:function A(){return this.value.rv;},getCSS:function C(){return this.data.css[this.value.cni].n;},getThresholdValue:function F(H){if(this.value.ti===undefined){return H;}return this.data.th[this.value.ti].n;},getFillColor:function E(H){if(this.value.ci===undefined){return H;}return this.data.fc[this.value.ci].n;}});}());(function(){var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",G=String.fromCharCode;function D(H){H=H.replace(/\r\n/g,"\n");var I="";for(var K=0;K<H.length;K++){var J=H.charCodeAt(K);if(J<128){I+=G(J);}else{if((J>127)&&(J<2048)){I+=G((J>>6)|192);I+=G((J&63)|128);}else{I+=G((J>>12)|224);I+=G(((J>>6)&63)|128);I+=G((J&63)|128);}}}return I;}function F(L){var H="",J=0,M=0,K=0,I=0;while(J<L.length){M=L.charCodeAt(J);if(M<128){H+=G(M);J++;}else{if((M>191)&&(M<224)){K=L.charCodeAt(J+1);H+=G(((M&31)<<6)|(K&63));J+=2;}else{K=L.charCodeAt(J+1);I=L.charCodeAt(J+2);H+=G(((M&15)<<12)|((K&63)<<6)|(I&63));J+=3;}}}return H;}mstrmojo.base64=mstrmojo.provide("mstrmojo.base64",{decodeHttpHeader:function E(K){var I=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(K&&K.indexOf("=?UTF-8?B?")===0){var J="",H;while((H=I.exec(K))!==null){J+=mstrmojo.base64.decode(H[1]);}return J;}return K;},encode:function B(J){var H="";var Q,O,M,P,N,L,K;var I=0;J=D(J);while(I<J.length){Q=J.charCodeAt(I++);O=J.charCodeAt(I++);M=J.charCodeAt(I++);P=Q>>2;N=((Q&3)<<4)|(O>>4);L=((O&15)<<2)|(M>>6);K=M&63;if(isNaN(O)){L=K=64;}else{if(isNaN(M)){K=64;}}H+=A.charAt(P)+A.charAt(N)+A.charAt(L)+A.charAt(K);}return H;},decode:function C(J){var H="",I=0;var Q,O,M,P,N,L,K;J=J.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(I<J.length){P=A.indexOf(J.charAt(I++));N=A.indexOf(J.charAt(I++));L=A.indexOf(J.charAt(I++));K=A.indexOf(J.charAt(I++));Q=(P<<2)|(N>>4);O=((N&15)<<4)|(L>>2);M=((L&3)<<6)|K;H+=G(Q);if(L!==64){H+=G(O);}if(K!==64){H+=G(M);}}H=F(H);return H;}});})();mstrmojo.mstr.EnumExpressionType={ExpressionReserved:0,ExpressionGeneric:1,FilterSingleBaseFormQual:2,FilterMultiBaseFormQual:3,FilterJointFormQual:4,FilterListQual:5,FilterListFormQual:6,FilterJointListQual:7,FilterJointListFormQual:8,FilterSingleBaseFormExpression:9,FilterSingleMetricQual:10,FilterMultiMetricQual:11,FilterMetricExpression:12,FilterEmbedQual:13,FilterBranchQual:14,FilterRelationshipQual:15,FilterAllAttributeQual:16,FilterAttributeIDQual:17,FilterAttributeDESCQual:18,ExpressionAggMetric:19,ExpressionBanding:20,FilterReportQual:21,ExpressionMDXSAPVariable:22,ExpressionSQLQueryQual:23,ExpressionCanceledPrompt:24,ExpressionElementList:25,ExpressionElementSingle:26};mstrmojo.android.EnumMenuOptions=mstrmojo.provide("mstrmojo.android.EnumMenuOptions",{HOME:1,SETTINGS:2,HELP:4,LEARN:8,ALL:255,REFRESH:256,FULL_SCREEN:512,GROUP_BY:768,PAGE_BY:1024,REPROMPT:1280,DELETE:1536,SEARCH:1792,SCAN:2048,MAP_ROADMAP:2304,MAP_SAT:2560,MAP_HYBRID:2816,MAP_TERRAIN:3072,DOC_LAYOUTS:3328,TRANSACTIONS_QUEUE:3584,ADD_SERVER:3840,ADD_PROJECT:4096,ABOUT:4352,SHARE:4608,ABOUT_RESULTSET:4864,ANNOTATION:5120});(function(){var N={Min:15872549,Max:1489202,Invalid:0,NoColorMetric:16119287};var G={LeftToRight:0,RightToLeft:1,Center:2,None:3};function K(T,f,X){if(T<0||T>1){return 0;}var U=256,W=T*U,P,V,Y,S=f>>16,R=X>>16,a=(f&65280)>>8,Z=(X&65280)>>8,Q=(f&255),d=(X&255);P=S+Math.floor((W*(R-S)/U));V=a+Math.floor((W*(Z-a)/U));Y=Q+Math.floor((W*(d-Q)/U));return Y+(V<<8)+(P<<16);}function F(Q,T){var S=Q>>16,R=(Q&65280)>>8,P=(Q&255);S=Math.floor((1-T)*S);R=Math.floor((1-T)*R);P=Math.floor((1-T)*P);return P+(R<<8)+(S<<16);}function J(P){var W=[],U,Q,S=P.dp,R=S.length,X,Y;if(P==null||P.length==0){return[];}for(var T=0;T<R;T++){Q={};var X,V;if(T>0){X=U;U=Y;}else{U=S[T];}if(T<R-1){Y=S[T+1];}Q.sv=(T==0)?U.v:(X.v+U.v)/2;Q.ev=(T==R-1)?U.v:(Y.v+U.v)/2;Q.c=U.c;Q.d=(T==0)?G.LeftToRight:(T==R-1?G.RightToLeft:G.Center);W[T]=Q;}return W;}function E(X){var P=[],T,Q,S=X.dp,R=S.length;if(X==null||X.length==0){return[];}for(var U=0;U<R;U++){T={};Q=S[U];var Y=Q.s,W=Q.e;T.c=Q.c;switch(Q.d){case G.LeftToRight:T.v=Q.s;break;case G.RightToLeft:T.v=Q.e;case G.Center:case G.None:default:var V=(Q.s+Q.e)/2;T.v=V;break;}P[U]=T;}return P;}function D(T,Y){var P=[],Q=[],V=[];if(this.min==this.max||isNaN(T)||isNaN(Y)||T==Y){P[0]=L.call(this,T);P[1]=L.call(this,Y);Q[0]=1;Q[1]=1;V[0]=0;V[1]=1;}else{if(this.min<this.max){var X,S=this.blend.dp,R=S.length,W=0;P[W]=L.call(this,T);Q[W]=1;V[W]=0;W++;for(var U=0;U<R;U++){X=S[U];if(X.v>=T&&X.v<=Y){P[W]=X.c;Q[W]=1;V[W]=(X.v-T)/(Y-T);W++;}}P[W]=L.call(this,Y);Q[W]=1;V[W]=1;}}return{c:P,a:Q,r:V};}function A(T,d){var P=[],Q=[],V=[];if(this.min==this.max||isNaN(T)||isNaN(d)||T==d){P[0]=B.call(this,T);P[1]=B.call(this,d);Q[0]=1;Q[1]=1;V[0]=0;V[1]=1;}else{if(this.min<this.max){var S=this.band.dp,R=S.length,e=0.4,Y,b,g,X=0;if(T<0){P[X]=B(T);Q[X]=1;V[X]=0;X++;if(d<1){P[X]=B(d);Q[X]=1;V[X]=1;X++;}}for(var U=0;U<R;U++){Y=S[U];if(Y.s>d||Y.e<T){continue;}b=Y.c;g=F(b,e);var f=Math.max(Y.s,T),Z=Math.min(Y.e,d);if(Z!=f){switch(Y.d){case G.LeftToRight:case G.RightToLeft:case G.Center:if(f==Y.s){P[X]=(Y.d!=G.LeftToRight)?g:b;}else{P[X]=B.call(this,f);}V[X]=(f-T)/(d-T);Q[X]=1;X++;if(Y.d==G.Center){var W=(Y.s+Y.e)/2;if(W>f&&W<Z){P[X]=b;V[X]=(W-T)/(d-T);Q[X]=1;X++;}}if(Z==Y.e){P[X]=(Y.d!=G.RightToLeft)?g:b;}else{P[X]=B.call(this,Z);}V[X]=(Z-T)/(d-T);Q[X]=1;X++;break;case G.None:default:P[X]=b;V[X]=(f-T)/(d-T);Q[X]=1;X++;P[X]=b;V[X]=(Z-T)/(d-T);Q[X]=1;X++;break;}}}if(d>1){if(T>1){P[X]=B.call(this,T);V[X]=0;Q[X]=1;X++;}P[X]=B.call(this,d);V[X]=1;Q[X]=1;}}}return{c:P,a:Q,r:V};}function I(R,U){var S=0.4,Q=F(U.c,S),P,T;switch(U.d){case G.LeftToRight:if(R<U.s){return U.c;}if(R>U.e){return Q;}if(U.s==U.e){return K(0.5,U.c,Q);}T=(R-U.s)/(U.e-U.s);return K(T,U.c,Q);case G.RightToLeft:if(R<U.s){return Q;}if(R>U.e){return U.c;}if(U.s==U.e){return K(0.5,Q,U.c);}T=(R-U.s)/(U.e-U.s);return K(T,Q,U.c);case G.Center:P=(U.s+U.e)/2;if(R<U.s||R>U.e){return Q;}if(U.s==U.e){return Q;}if(R<=P){T=(R-U.s)/(P-U.s);return K(T,Q,U.c);}T=(R-P)/(U.e-P);return K(T,U.c,Q);case G.None:default:return U.c;}}function L(Y){if(isNaN(Y)){return N.Invalid;}if(this.max==this.min){return this.blendEqualColor;}var R=this.blend.dp,Q=R.length;if(!this.valid){var a=R[0],U=R[Q-1];if(Y<this.min){return a.c;}return U.c;}var S,W=R[0],Z=W.v,V=W.c,X,T;for(S=1;S<Q;S++){W=R[S];if(W.v>=Y){break;}Z=W.v;V=W.c;}S=Math.min(S,Q-1);W=R[S];X=W.v;T=W.c;if(Y<Z){return V;}if(Y>X){return T;}if(Z==X){return K(0.5,V,T);}var P=(Y-Z)/(X-Z);return K(P,V,T);}function B(Q){if(isNaN(Q)){return N.Invalid;}if(this.min==this.max){return this.bandEqualColor;}var U=this.band.dp,P=U.length;if(!this.valid){var S=U[0],T=U[P-1];if(Q<this.min){return I(T.s,S);}else{return I(T.e,T);}}for(var R=0;R<P;R++){c=U[R];if(c.s===c.e){continue;}if(c.s<=Q&&Q<=c.e){return I(Q,c);}}}function O(Q,P){this.blend.dp=[];var S=this.blend.dp,R;R={};R.c=Q;R.v=0;S[0]=R;R={};R.c=P;R.v=1;S[1]=R;}function M(Q,P){this.band.dp=[];var S=this.band.dp,R;R={};R.d=G.LeftToRight;R.s=0;R.e=0.5;R.c=Q;S[0]=R;R={};R.d=G.LeftToRight;R.s=0.5;R.e=1;R.c=P;S[1]=R;}function C(q,S,o){var U=[],T=0,X,k,a=this.min,e=this.max,R=o.legendTickCount,Q={},P,W=!isNaN(this.min)&&!isNaN(this.max);if(this.min>=this.max||this.blend.dp.length<=2){var h=(e-a)/R;for(var g=0;g<q;g++){Q={x:T,w:Math.floor(S/R)};T+=Q.w;if(W){X=a+g*h;k=X+h;P=this.getColor((X+k)/2);}else{X="Null";k="Null";P=0;}U.push({r:Q,c:P,sv:X,ev:k});}}else{var Z=this.blend.dp,b=Z.length;for(var g=0;g<b;g++){var j=Z[g],V,Y;if(g==0){X=a;}else{V=Z[g-1];X=a+(e-a)*(j.v+V.v)/2;}if(g==b-1){k=e;}else{Y=Z[g+1];k=a+(e-a)*(j.v+Y.v)/2;}Q={x:T,w:Math.floor(S*(k-X)/(e-a))};T+=Q.w;if(W){P=this.getColor((X+k)/2);}else{X="Null";k="Null";P=0;}U.push({r:Q,c:P,sv:X,ev:k});}}this.tooltipInfo=U;}function H(q,U,p){var W=[],V=0,Y,o,f=this.min,g=this.max,S=p.legendTickCount,R={},Q,a,X=!isNaN(this.min)&&!isNaN(this.max);if(this.min>=this.max){for(var h=0;h<q;h++){R={x:V,w:Math.floor(U/S)};a+=R.w;if(X){a=Y+" < "+ms+" < "+o;Q=this.getColor(f);}else{Y="Null";o="Null";Q=0;}W.push({r:R,c:Q,sv:Y,ev:o});}}else{var T,P;if(this.isFixedColorBanding){T=this.initMax;P=this.initMin;}else{T=g;P=f;}var Z=this.band.dp,e=Z.length;if(e<=2){for(var h=0;h<e;h++){var k=Z[h];if(h==0){Y=P;}else{Y=P+(T-P)*k.s;}if(h==e-1){o=T;}else{o=P+(T-P)*k.e;}if(Y<f){Y=f;}if(o>g){o=g;}if(Y>o&&o>=g){Y=g;o=g;}else{if(o<Y&&Y<=f){Y=f;o=f;}}R={x:V,w:Math.floor(U*(o-Y)/(g-f)/2)};V+=R.w;if(X){o=(Y+o)/2;Q=this.getColor((Y+o)/2);}else{Y="Null";o="Null";Q=0;}W.push({r:R,c:Q,sv:Y,ev:o});V+=R.w;var j=U*(o-Y)/(g-f)/2;R={x:V,w:Math.ceil(j)};if(h>0){var b=W[W.length-1].r;if(R.x<b.x+b.w+1){b.w=R.x-b.x;}}V+=Math.floor(j);if(X){Y=(Y+o)/2;Q=this.getColor((Y+o)/2);}else{Y="Null";o="Null";Q=0;}W.push({r:R,c:Q,sv:Y,ev:o});}}else{for(var h=0;h<e;h++){var k=Z[h];if(h==0){Y=p.props.legendAsc?P:T;}else{Y=p.props.legendAsc?P+(T-P)*k.s:T+(P-T)*k.s;}if(h==e-1){o=p.props.legendAsc?T:P;}else{o=p.props.legendAsc?P+(T-P)*k.e:T+(P-T)*k.e;}if(Y<f){Y=f;}if(o>g){o=g;}if(Y>o&&o>=g){Y=g;o=g;}else{if(o<Y&&Y<=f){Y=f;o=f;}}var j=U*(o-Y)/(g-f);R={x:V,w:Math.ceil(j)};if(h>0){var b=W[W.length-1].r;if(R.x<b.x+b.w+1){b.w=R.x-b.x;}}if(h==e-1){R.w=U-V;}V+=Math.floor(j);var r=p.props.legendAsc?" < ":" > ";if(X){Q=this.getColor((Y+o)/2);}else{Y="Null";o="Null";Q=0;}if(r){W.push({r:R,c:Q,sv:Y,ev:o});}else{W.push({r:R,c:Q,sv:Y,ev:o,sign:">"});}}}}this.tooltipInfo=W;}mstrmojo.VisHeatMapColorTheme={newInstance:function(){return{initialize:function T(){this.blend={};this.band={};this.valid=true;this.blendEqualColor=0;this.bandEqualColor=0;this.isBlend=true;this.setDefaultDataProvider();this.checkMinMax();},getGradientFillInfo:function W(b,Z){var e,a;if(isNaN(b)||isNaN(Z)){if(this.isBlend){return D.call(this,b,Z);}else{return A.call(this,b,Z);}}if(this.min==this.max){if(b<this.min){e=0;}else{e=1;}if(Z<this.max){a=0;}else{a=1;}}else{if(this.isFixedColorBanding){var f=this.initMax-this.initMin;e=(b-this.initMin)/f;a=(Z-this.initMin)/f;}else{var f=this.max-this.min;e=(b-this.min)/f;a=(Z-this.min)/f;}}if(this.isBlend){return D.call(this,e,a);}else{return A.call(this,e,a);}},checkMinMax:function U(){var f=this.min,Z=this.max;if(f>Z){this.valid=false;}else{if(f==Z){f=Z=1;var h=this.blend.dp,a=h.length,g,d;for(var e=a-1;e>=0;e--){g=h[e];if(e==a-1&&g.v<=f){this.blendEqualColor=g.c;break;}if(e==0&&g.c>=f){this.blendEqualColor=g.c;break;}if(e>0&&g.c>=f){var b=h[e-1];if(b.c<f){d=(f-b.v)/(g.v-b.v);this.blendEqualColor=K(d,b.c,g.c);break;}}}h=this.band.dp;a=h.length;for(var e=0;e<a;e++){g=h[e];if((e==0&&g.s>=f)||(e==a-1&&g.e<=f)||(g.s<=f&&g.e>=f)){this.bandEqualColor=g.c;break;}}}}},setDefaultDataProvider:function Y(){O.call(this,N.Min,N.Max);M.call(this,N.Min,N.Max);this.useDefault=true;},getColor:function Q(Z){if(this.hasNoColorMetric){return N.NoColorMetric;}var a=NaN;if(isNaN(Z)){a==0;}else{if(this.min==this.max){a=Z<this.min?0:1;}else{if(this.isFixedColorBanding){a=(Z-this.initMin)/(this.initMax-this.initMin);}else{a=(Z-this.min)/(this.max-this.min);}}}if(this.isBlend){return L.call(this,a);}else{return B.call(this,a);}},isBrightColor:function X(f){var d=f>>16,a=(f&65280)>>8,Z=(f&255),e=(d*299+a*587+Z*114)/1000;if(e>150){return true;}return false;},getContrastColor:function P(Z){if(this.isBrightColor(Z)){return 0;}return 16777215;},createTooltipInfo:function S(b,a,f){var e=0;if(this.min>=this.max){e=1;}else{var Z;if(this.isBlend){Z=this.blend.dp.length;e=(Z<=2)?5:Z;}else{Z=this.band.dp.length;e=(Z<=2)?4:Z;}}if(this.isBlend){C.call(this,e,a,f);}else{H.call(this,e,a,f);}},getTooltipInfo:function R(Z){var b=this.tooltipInfo;for(var a=0;a<b.length;a++){var e=b[a],d=e.r;if(Z>=d.x&&Z<d.x+d.w){return a;}}return a-1;},getMaxMinByMetricID:function(g,a){var b=g.gts.col,k=b.length,f=0,h=null;range={min:null,max:null};for(f=0;f<k&&h==null;f++){var o=b[f].es,Z=o.length,e;for(e=0;e<Z;e++){if(o[e].oid==a){h=e;break;}}}if(h==null){return range;}var d=g.gvs.items,k=d.length;for(f=0;f<k;f++){var l=parseFloat(d[f].items[h].rv);if(range.min==null){range.min=l;}if(range.max==null){range.max=l;}if(range.min>l){range.min=l;}if(range.max<l){range.max=l;}}return range;},convertFixedValueToBlendString:function(e,d){var k="";if(e.length%2==0){var Z=e.length,a=d.min,f=d.max,b=0;var j=f-a;k="0,"+e[1];for(b=2;b<Z-2;b+=2){var h=parseInt(e[b]);if(h<a||h>f){continue;}else{var g=(h-a)/j;k+=","+g+","+e[b+1];}}k+=",1,"+e[Z-1];}return k;},convertFixedValueToBandString:function(f,e){var o=f.split(","),g=o.length,b,k=e.max-e.min;var h="";if(g%4===0){for(b=0;b<g;b+=4){var Z=0;for(Z=0;Z<2;Z++){var p,l=o[b+Z];if(l==="min"){p=e.min;}else{if(l==="max"){p=e.max;}else{p=parseFloat(o[b+Z]);}}if(!isNaN(p)){o[b+Z]=String((p-e.min)/k);}else{console.log("warning: invalid band string. In heatmap color theme");}}}for(b=0;b<g;b++){h+=(o[b]+",");}h=h.substring(0,h.length-1);}else{console.log("warning: Invalid band color string. In heatmap color theme");}return h;},convertAbsoluteToBlend:function(b,e){this.useDefault=false;this.isColorBanding=true;var Z=e.abs.replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");Z=(new window.DOMParser()).parseFromString(Z,"text/xml");var d=Z.getElementsByTagName("m")[0];b.absoluteColorID=d.getAttribute("id");this.isFixedColorBanding=true;this.fixedBandingArray=d.getAttribute("bl").split(",");var a;if(!isNaN(this.min)&&!isNaN(this.max)){a={max:this.max,min:this.min};}else{a=this.getMaxMinByMetricID(b.model,b.absoluteColorID);this.max=a.max;this.min=a.min;}if(isNaN(this.initMax)||isNaN(this.initMin)){a=this.getMaxMinByMetricID(b.model,b.absoluteColorID);this.max=a.max;this.min=a.min;this.initMax=a.max;this.initMin=a.min;}e.bandColors=this.convertFixedValueToBandString(d.getAttribute("ba"),a);e.gradientColors=this.convertFixedValueToBlendString(this.fixedBandingArray,a);},createDataProviderFromString:function V(g,f){var Z=g.split(","),a=0,e;this.blend.dp=[];this.useDefault=false;e=this.blend.dp;if(Z.length%2==0){while(a<Z.length){var d={};d.v=parseFloat(Z[a]);a++;d.c=parseInt(Z[a]);a++;e[e.length]=d;}}a=0;Z=f.split(",");this.band.dp=[];e=this.band.dp;if(Z.length%4==0){while(a<Z.length){var d={};d.s=parseFloat(Z[a]);a++;d.e=parseFloat(Z[a]);a++;d.c=parseInt(Z[a]);a++;var b=Z[a];switch(b){case"leftToRight":d.d=G.LeftToRight;break;case"rightToLeft":d.d=G.RightToLeft;break;case"center":d.d=G.Center;break;default:d.d=G.None;}a++;e[e.length]=d;}}}};}};})();mstrmojo.EnumReadystate={IDLE:1,WAITING:3,ERROR:4,SUCCESS:5,CANCELLED:6,TIMEOUT:7};mstrmojo.vi.viz.EnumVisualizationTemplates={UNKNOWN_GRAPHMATRIX_TYPE:-1,GRID:0,HEATMAP:1,GOOGLEMAP:2,PIE:3,RING:4,GRAPHMATRIXVERTICALBARSTACKED:6,GRAPHMATRIXVERTICALBARCLUSTERED:7,GRAPHMATRIXVERTICALBARPERCENT:8,GRAPHMATRIXHORIZONTALBARSTACKED:9,GRAPHMATRIXHORIZONTALBARCLUSTERED:10,GRAPHMATRIXHORIZONTALBARPERCENT:11,GRAPHMATRIXVERTICALLINESTACKED:12,GRAPHMATRIXVERTICALLINECLUSTERED:13,GRAPHMATRIXVERTICALLINEPERCENT:14,GRAPHMATRIXHORIZONTALLINESTACKED:15,GRAPHMATRIXHORIZONTALLINECLUSTERED:16,GRAPHMATRIXHORIZONTALLINEPERCENT:17,GRAPHMATRIXSCATTERCIRCLEMM:18,GRAPHMATRIXSCATTERGRIDCIRCLEAA:19,GRAPHMATRIXBUBBLECIRCLEMM:21,GRAPHMATRIXBUBBLEGRIDCIRCLEAA:22,GRAPHMATRIXSCATTERSQUAREAM:23,GRAPHMATRIXSCATTERSQUAREMM:24,GRAPHMATRIXSCATTERGRIDSQUAREAA:25,GRAPHMATRIXBUBBLESQUAREAM:26,GRAPHMATRIXBUBBLESQUAREMM:27,GRAPHMATRIXBUBBLEGRIDSQUAREAA:28,GRAPHHORIZONTALBARCLUSTERED:29,GRAPHMATRIXVERTICALAREASTACKED:30,GRAPHMATRIXVERTICALAREAPERCENT:31,GRAPHMATRIXVERTICALAREACLUSTERED:32,GRAPHMATRIXHORIZONTALAREASTACKED:40,GRAPHMATRIXHORIZONTALAREAPERCENT:41,GRAPHMATRIXHORIZONTALAREACLUSTERED:42,GRAPHHORIZONTALBARDUALAXISCLUSTERED:33,GRAPHHORIZONTALBARDUALAXISABSOLUTE:34,GRAPHHORIZONTALLINEABSOLUTE:35,GRAPHHORIZONTALLINEDUALAXISABSOLUTE:36,GRAPHHORIZONTALAREAABSOLUTE:37,GRAPHHORIZONTALAREADUALAXISABSOLUTE:38,GRAPHVERTICALBARCLUSTERED:39,GRAPHVERTICALBARDUALAXISCLUSTERED:43,GRAPHVERTICALBARDUALAXISABSOLUTE:44,GRAPHVERTICALBARDUALAXISSTACKED:45,GRAPHVERTICALLINEABSOLUTE:46,GRAPHVERTICALLINESTACKED:47,GRAPHVERTICALLINEPERCENT:48,GRAPHVERTICALLINEDUALAXISABSOLUTE:49,GRAPHVERTICALLINEDUALAXISSTACKED:50,GRAPHVERTICALAREAABSOLUTE:51,GRAPHVERTICALAREAPERCENT:52,GRAPHVERTICALAREASTACKED:53,GRAPHVERTICALAREADUALAXISABSOLUTE:54,GRAPHVERTICALAREADUALAXISSTACKED:55,GRAPHCOMBINATIONBARAREA:56,GRAPHCOMBINATIONBARAREADUALAXIS:57,NETWORK:58,IMAGELAYOUT:59,GOOGLEMAPDENSITY:60,GRAPHMATRIXPIE:61,GRAPHMATRIXRING:62,GRAPHHORIZONTALBARABSOLUTE:63,GRAPHHORIZONTALBARPERCENT:64,GRAPHHORIZONTALBARSTACKED:65,GRAPHVERTICALBARABSOLUTE:66,GRAPHVERTICALBARPERCENT:67,GRAPHVERTICALBARSTACKED:68,ESRIMAP:69,GRAPHMATRIXVERTICALBARAUTOMATIC:70,GRAPHMATRIXHORIZONTALBARAUTOMATIC:71,GRAPHMATRIXVERTICALLINEAUTOMATIC:72,GRAPHMATRIXHORIZONTALLINEAUTOMATIC:73,GRAPHMATRIXVERTICALAREAAUTOMATIC:74,GRAPHMATRIXHORIZONTALAREAAUTOMATIC:75};(function(){mstrmojo._Fetchable=mstrmojo.provide("mstrmojo._Fetchable",{_mixinName:"mstrmojo._Fetchable",blockBegin:1,blockCount:-1,concat:false,items:null,size:function A(){var B=this.items;return(B&&B.length)||0;},next:function(B){if(this.hasNext()){this.getItems(this.blockBegin+this.blockCount,B);}},previous:function(B){if(this.hasPrevious()){var C=this.blockBegin-this.blockCount;C=C<0?0:C;this.getItems(C,B);}},getItems:function(G,E){E=E||{};var D=this,C=mstrmojo.emptyFn,B=E.success||C,F=E.failure||C,H=E.complete||C;this._retrieveItems(G,{success:function(I){D.blockBegin=G;D.set("items",(D.concat?(D.items||[]).concat(I.items||[]):(I.items||[])));if(I.totalSize){D.totalSize=I.totalSize;}B(I);},failure:function(I){F(I);},complete:function(I){H(I);}});},_retrieveItems:function(C,B){alert("Object which mixes in this mixin has not implemented this method - _retrieveItems().");},hasNext:function(){return(((this.concat?1:this.blockBegin)+((this.items&&this.items.length)||0))<(this.totalSize+1));},hasPrevious:function(){return this.blockBegin>1;}});}());mstrmojo.chart.model.enums.EnumDSSBaseFormType={DssBaseFormReserved:0,DssBaseFormDateTime:1,DssBaseFormNumber:2,DssBaseFormText:3,DssBaseFormPicture:4,DssBaseFormUrl:5,DssBaseFormEmail:6,DssBaseFormHTMLTag:7,DssBaseFormDate:8,DssBaseFormTime:9,DssBaseFormSymbol:10,DssBaseFormBigDecimal:11};mstrmojo.EnumRWUnitType={LAYOUT:0,HEADER:2,FOOTER:3,SUBSECTION:4,DETAILS:5,PAGEHEADER:6,PAGEFOOTER:7,PANELSTACK:8,PANEL:9,GRID:521,GRAPH:522,GRIDGRAPH:527,RECTANGLE:101,IMAGE:102,LINE:105,TEXTFIELD:106,HTMLCONTAINER:107,SELECTOR:111,ROUNDEDRECTANGLE:112,VISUALIZATION:114,MOJOVISUALIZATION:115};(function(){function D(K){var J=this.h.idx;if(J!==-1){return this.t.es[J][K];}return"";}mstrmojo.models.template.Header=mstrmojo.declare(null,null,{init:function H(J){this.h=J.h;this.t=J.t;},getName:function A(){return D.call(this,"n");},getElementId:function I(){return D.call(this,"id");},getObjectId:function B(){return D.call(this,"oid");},getElementIndex:function G(){return this.h.idx;},getActionType:function F(){return this.h.at;},isTotal:function E(){return this.h.otr===1;},getFormIndex:function C(){return this.h.fi;}});}());mstrmojo.mstr.EnumDSSXMLBaseFormType={DssXmlBaseFormReserved:0,DssXmlBaseFormHidden:-1,DssXmlBaseFormDateTime:1,DssXmlBaseFormNumber:2,DssXmlBaseFormText:3,DssXmlBaseFormPicture:4,DssXmlBaseFormUrl:5,DssXmlBaseFormEmail:6,DssXmlBaseFormHTMLTag:7,DssXmlBaseFormDate:8,DssXmlBaseFormTime:9,DssXmlBaseFormSymbol:10,DssXmlBaseFormBigDecimal:11,DssXmlBaseFormPhoneNumber:12};mstrmojo.mstr.EnumDSSXMLBaseFormType.convertDataType2BaseFormType=function(B){var A={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2};return A[B]||0;};(function(){function E(H,G,F){return H>=G&&H<=F;}function A(G,F){return{start:G,end:F};}function C(I,G){var L=this.renderedRowsArr,K=B.call(this,I,1),J=K.index,H=L[J],F;if(!K.between){if(H&&I>H.end+1){J++;L.splice(J,0,A(I,G));}else{L.splice(J,0,A(I,G));}H=L[J];}else{H.end=Math.max(H.end,G);}while(J<L.length-1){J++;F=L[J];if(H.end+1>=F.start){H.end=Math.max(H.end,F.end);L.splice(J,1);J--;}else{break;}}}function B(G,L){var K=this.renderedRowsArr,H=0,I=K.length-1,F,J;while(H<=I){F=(H+I)/2|0;J=K[F];if(E(G,J.start,J.end+L||0)){return{between:true,index:F};}else{if(G<J.start){I=F-1;}else{H=F+1;}}}return{between:false,index:F};}mstrmojo._RowRendTracker=mstrmojo.provide("mstrmojo._RowRendTracker",{_mixinName:"mstrmojo._RowRendTracker",renderedRowsArr:undefined,init:function D(F){this._super(F);this.renderedRowsArr=[];},markPages:function(G,F){C.call(this,G,F);},searchRow:function(H){var G=B.call(this,H,0),F;if(G.between){F=this.renderedRowsArr[G.index];return{rendered:true,min:F.start,max:F.end};}return null;},unMarkAllPages:function(){this.renderedRowsArr.length=[];}});}());(function(){function B(J,E){if(!E.domNode){return 0;}var K="_fixed"+J;if(E[K]){return E[K];}var H=E.getFormats(),I=J.toLowerCase();if(H&&H.hasOwnProperty(I)){var F=H[I];if(F.charAt(F.length-1)!=="%"){var G=parseInt(F,10);if(!isNaN(G)){E[K]=G;return G;}}}return(E.domNode["client"+J]||0);}mstrmojo._ContainsDocObjects=mstrmojo.provide("mstrmojo._ContainsDocObjects",{getHeight:function D(){return B("Height",this);},getWidth:function A(){return B("Width",this);},getMaxZIndex:function C(){var F=0;mstrmojo.array.forEach(this.children,function E(G){F=Math.max(F,G.getFormats()["z-index"]);});return F;}});}());(function(){mstrmojo.vi._MonitorsAppState=mstrmojo.provide("mstrmojo.vi._MonitorsAppState",{onAppStateChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("appStateChange",this.id,"onAppStateChange");}}});}());(function(){var C="xviPopopNode";function A(G){var H={};H[C]=G;return H;}mstrmojo.ui.menus._IsMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._IsMenuPopup",{init:function E(G){this._super(G);var J=this.popupConfig;if(!J){throw new Error("Cannot instantiate popup without supplying the popupConfig property.");}this.addDisposable(J);var H=mstrmojo.all[J.hostId],I=J.hostElement;if(J.isHostedWithin&&H&&I){H.addSlots(A(I));this.slot=C;}},closeAllMenus:function F(){var G=this.opener;if(G&&G.closePopup){G.closePopup();}if(G&&G.closeAllMenus){G.closeAllMenus();}},open:function B(H,G){if(this._super){this._super(H,G);}},close:function D(G){if(this.slot===C){this.opener.removeSlots(A(null));}if(this._super){this._super(G);}this.destroy();var H=mstrmojo.all[this.popupConfig.hostId];if(H){H.closePopup();}}});}());(function(){mstrmojo.BarcodeReader=mstrmojo.provide("mstrmojo.BarcodeReader",{_callback:null,_callbackId:0,readBarcodes:function B(G,I,C,F,D){this._callbackId++;var H=String(this._callbackId);this._callback=I;var E="mstrmojo.BarcodeReader.onBarcodeResult";if(G){G.blockBegin=0;G.blockCount=-1;G.serverUrl=mstrApp.getConfiguration().getTaskUrlByProject(mstrApp.getCurrentProjectId());}mstrMobileApp.readBarcodes(H,C,(G&&JSON.stringify(G))||null,(F&&JSON.stringify(F))||null,D||null,E);},onBarcodeResult:function A(F,C,D){var E=this._callback;if(F!==this._callbackId||(!E)){return ;}delete this._callback;if(C==-1){E.success(D);}else{if(C!=0){E.failure(D||"Error reading bare code.");}}}});}());(function(){function A(C){return function B(H){if(!this.domNode){return 0;}var G=this.children;if(H!==undefined&&!isNaN(H)){G=(G&&[G[H-1]]);}var E=(G&&G.length)||0,D=0,F;for(F=0;F<E;F++){D+=G[F]["get"+C]();}return D;};}mstrmojo._CanMeasureChildren=mstrmojo.provide("mstrmojo._CanMeasureChildren",{getHeight:A("Height"),getWidth:A("Width")});}());(function(){var E=[];function H(L,K){E.push({n:L,args:K});}function I(N,M,K){var L=false;switch(N._loadingStatus){case 0:if(google&&google.maps&&google.maps.Geocoder){N._loadingStatus=2;L=true;}else{H(M,K);N._loadScript();}break;case 1:H(M,K);break;case 2:L=true;break;}return L;}mstrmojo.GeoLocation=mstrmojo.provide("mstrmojo.GeoLocation",{_altitude:null,_latitude:null,_longitude:null,_callbacks:[],_getPos:function(){if(mstrMobileApp&&mstrMobileApp.getGeoLocation){mstrmojo.GeoLocation._getPos=function(){mstrMobileApp.getGeoLocation("mstrmojo.GeoLocation.updateLocation");};}else{if(navigator&&navigator.geolocation){mstrmojo.GeoLocation._getPos=function(){navigator.geolocation.getCurrentPosition(function(K){mstrmojo.GeoLocation.updateLocation(K);},function(K){switch(K.code){case K.TIMEOUT:alert("Retrieve Geo Position: Timeout, please try it again ");break;case K.PERMISSION_DENIED:alert("Retrieve Geo Position: Permission to use location service has been denied ");break;case K.POSITION_UNAVAILABLE:alert("Retrieve Geo Position: Position unavaiable ");break;}mstrmojo.GeoLocation.updateLocation(K);},{maximumAge:10000,timeout:10000});};}else{mstrmojo.GeoLocation._getPos=function(){alert("no available Geo Location service");};}}mstrmojo.GeoLocation._getPos();},getCurrentLocation:function(K){this._callbacks.push(K);if(!this._pending){this._pending=true;this._getPos();}},updateLocation:function(P){var M=mstrmojo.GeoLocation;var L,K;var O=P&&P.coords;var N=P&&P.err;if(O){M._latitude=O.latitude;M._longitude=O.longitude;K=M._callbacks;for(L=0;L<K.length;L++){K[L].success(O.latitude,O.longitude);}}else{if(N){K=M._callbacks;for(L=0;L<K.length;L++){K[L].failure("Error in updating geo location information."+N);}}else{K=M._callbacks;for(L=0;L<K.length;L++){K[L].failure("Error in updating geo location information.");}}}M._callbacks=[];M._pending=false;},getCurrentAddress:function(K){this.getCurrentLocation({success:function(N,L,M){mstrmojo.GeoLocation.findAddress({lat:N,lng:L},{success:K.success&&K.success||mstrmojo.emptyFn,failure:K.failure&&K.failure||mstrmojo.emptyFn});},failure:K.failure&&K.failure||mstrmojo.emptyFn});},count:null,cbs:null,getUniqId:function D(){var K;if(!this.count){K=this.count=1;}else{K=this.count++;}return"fa"+K;},findAddress:function F(L,K){if(!mstrMobileApp||!mstrMobileApp.useNativeMap||!mstrMobileApp.useNativeMap()){this.findAddressUsingJsAPI(L,K);}else{this.findAddressUsingNativeAPI(L,K);}},findAddressUsingJsAPI:function J(M,K){if(I(this,"findAddress",[M,K])){var L=new google.maps.Geocoder();L.geocode({location:new google.maps.LatLng(M.lat,M.lng)},function(O,N){if(N==google.maps.GeocoderStatus.OK&&O[0]){K.success(O);}else{K.failure(O,N);}});}},findAddressUsingNativeAPI:function G(M,K){var L=this.getUniqId();if(this.cbs==null){this.cbs={};}this.cbs[L]=function(N){if(N.status=="OK"){K.success(N.results);}else{K.failure(N.results,N.status);}};mstrMobileApp.findAddress(M.lat,M.lng,"mstrmojo.GeoLocation.findAddressCallback",L);},findAddressCallback:function B(L,K,M){this.cbs[M].apply(mstrmojo.GeoLocation,[L]);},_loadingStatus:0,_loadScriptCallBack:function A(){this._loadingStatus=2;for(var K=0;K<E.length;K++){var L=E[K];mstrmojo.GeoLocation[L.n].apply(mstrmojo.GeoLocation,L.args);}},_loadScript:function C(){this._loadingStatus=1;var K=document.createElement("script");K.type="text/javascript";K.src="http://maps.google.com/maps/api/js?sensor=false&callback=mstrmojo.GeoLocation._loadScriptCallBack";document.body.appendChild(K);}});})();(function(){mstrmojo._ReportDataService=mstrmojo.provide("mstrmojo._ReportDataService",{_mixinName:"mstrmojo._ReportDataService",getPageByTree:function A(C){mstrApp.serverRequest({taskId:"getPageByTree",msgID:this.msgId},C);},pageByUnitsToKeys:function B(F){var C=[],D;for(D=0;D<F.length;D++){var E=F[D];if(mstrApp.useBinaryFormat){C.push(E.v);}else{C=C.concat([E.id,E.tp,E.v]);}}return C.join("\u001F");}});}());mstrmojo.mstr.EnumNodeType={NodeReserved:0,NodeFormShortcut:1,NodeElementsObject:2,NodeConstant:3,NodeOperator:4,NodeShortcut:5,NodeTime:6,NodeRelationship:7,NodeResidue:8,NodeMe:9,NodeBigDecimal:10,NodeGroup:14,NodeRef:15};(function(){mstrmojo._HasDrillLinks=mstrmojo.provide("mstrmojo._HasDrillLinks",{_mixinName:"mstrmojo._HasDrillLinks",update:function A(E){this._super(E);var B=E.defn.dl,F=E.data.dl,D=this.drillLinkItems=((B&&B.items)||[]).concat((F&&F.items)||[]).sort(function(H,G){return H.index-G.index;}),C;for(C=D.length-1;C>=0;C--){if(C&&D[C].index===D[C-1].index){D.splice(C,1);}}if(B&&B.target){for(C=0;C<D.length;C++){D[C].target=B.target;}}}});}());(function(){var A=/^mstrmojo./;mstrmojo.DynamicClassFactory={newComponent:function(C,B,F){var H=C.prototype.scriptClass.replace(A,"");for(var E=0,D=B&&B.length||0;E<D;E++){if(!B[E]._mixinName){throw new Error('Mixins must have a "_mixinName" property to be used with DynamicClassFactory');}H+="_"+B[E]._mixinName.replace(A,"");}var G=mstrmojo[H];if(!G){G=mstrmojo.declare(C,B,F);mstrmojo[H]=G;}return G;}};}());mstrmojo.chart.enums.EnumFontStyle={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};(function(){mstrmojo._HasPopup=mstrmojo.provide("mstrmojo._HasPopup",{_mixinName:"mstrmojo._HasPopup",_lastOpened:null,openPopup:function A(G,E){var C=!!G&&(typeof G==="string")&&!G.match(/\./)&&!!this[G],D=mstrmojo.registry.ref(C?this[G]:G);if(D&&D.open){if(C){this[G]=D;}if(D.disposable!==false){this.addDisposable(D);}var J=D.slot&&this[D.slot];if(J){if(D.parent!==this){if(this.addChildren){this.addChildren([D]);}else{var I=false,F=D.domNode||D.placeholder;if(F&&typeof F==="string"){F=document.getElementById(F);}if(!F){I=true;F=document.createElement("span");D.placeholder=F;}if(I||(F.parentNode!==J)){J.appendChild(F);}}}}try{D.open(this,E);}catch(H){console.log("Error opening popup: "+H);}this._lastOpened=D;}},closePopup:function B(){var C=this._lastOpened;if(C&&C.visible&&C.close){C.close();delete this._lastOpened;}}});}());(function(){mstrmojo.url=mstrmojo.provide("mstrmojo.url",{isAbsoluteURL:function(A){return(/^(http|https|ftp|file):\/\//i.test(A));},getAbsoluteURL:function(A,B){if(this.isAbsoluteURL(A)){return A;}if(B){return B+(/\/$/.test(B)?"":"/")+A;}return"http://"+A;}});}());mstrmojo._ShowsStatus=mstrmojo.provide("mstrmojo._ShowsStatus",{showStatus:function showStatus(A,G,D){var C=this._STATUS;if(!this.hasRendered||!C){return ;}var E=C.style;if(!A){if(this.showingStatus){E.display="none";}}else{if(C){var F=this._STATUS_TXT;if(F){F.innerHTML=G||"";}var B=this._STATUS_BAR;if(B){B.style.width=(D||0)+"%";}if(!this.isStatusBarPositioned){E.top=Math.max((this.scrollboxHeight||0)-50,12)+"px";this.isStatusBarPositioned=true;}if(!this.showingStatus){E.display="block";}}}this.showingStatus=A;},updateStatus:function updateStatus(A,B){this.showStatus(this.showingStatus,A,B);}});mstrmojo.mstr.EnumNodeDimty={NodeDimtyReserved:0,NodeDimtyNone:1,NodeDimtyContinuation:2,NodeDimtyExclusiveContinuation:3,NodeDimtyOutputLevel:4,NodeDimtyBreakBy:5,NodeDimtyEmbedded:6,NodeDimtyUnspecified:7};(function(){mstrmojo._IsSelectorTarget=mstrmojo.provide("mstrmojo._IsSelectorTarget",{_mixinName:"mstrmojo._IsSelectorTarget",setDirty:function A(C){var D=(C?"add":"remove")+"DirtyKey",B=this.parent;if(B&&B[D]){this.parent[D](this.k);}}});}());mstrmojo.mstr.EnumFunction={FunctionCustom:-1,FunctionReserved:0,FunctionPlus:1,FunctionMinus:2,FunctionTimes:3,FunctionDivide:4,FunctionUnaryMinus:5,FunctionEquals:6,FunctionNotEqual:7,FunctionGreater:8,FunctionLess:9,FunctionGreaterEqual:10,FunctionLessEqual:11,FunctionSum:12,FunctionCount:13,FunctionAvg:14,FunctionMin:15,FunctionMax:16,FunctionBetween:17,FunctionLike:18,FunctionAnd:19,FunctionOr:20,FunctionNot:21,FunctionIn:22,FunctionRank:23,FunctionAbs:24,FunctionRunningSum:25,FunctionRunningAvg:26,FunctionMovingSum:28,FunctionMovingAvg:27,FunctionProduct:29,FunctionMedian:30,FunctionMode:31,FunctionStdev:32,FunctionVar:33,FunctionGeomean:34,FunctionEqualEnhanced:35,FunctionNotEqualEnhanced:36,FunctionGreaterEqualEnhanced:37,FunctionLessEqualEnhanced:38,FunctionBetweenEnhanced:39,FunctionBanding:40,FunctionBandingC:41,FunctionBandingP:42,FunctionNotLike:43,FunctionNotBetween:44,FunctionIntersect:45,FunctionIntersectIn:46,FunctionNullToZero:47,FunctionZeroToNull:48,FunctionApplySimple:49,FunctionApplyAggregation:50,FunctionApplyLogic:51,FunctionApplyComparison:52,FunctionApplyRelative:53,FunctionIsNull:54,FunctionIsNotNull:55,FunctionUcase:56,FunctionNotIn:57,FunctionNTile:58,FunctionPercentile:59,FunctionMovingMax:60,FunctionMovingMin:61,FunctionMovingDifference:62,FunctionMovingStdev:63,FunctionExpWghMovingAvg:64,FunctionMovingCount:65,FunctionRunningMax:66,FunctionRunningMin:67,FunctionRunningStdev:68,FunctionRunningCount:69,FunctionExpWghRunningAvg:70,FunctionNotBetweenEnhanced:71,FunctionConcat:72,FunctionFirstInRange:73,FunctionLastInRange:74,FunctionValueSegment:75,FunctionContains:76,FunctionBeginsWith:77,FunctionEndsWith:78,FunctionNotContains:79,FunctionNotBeginsWith:80,FunctionNotEndsWith:81,FunctionCase:82,FunctionCaseV:83,FunctionStdevP:84,FunctionRunningStdevP:85,FunctionMovingStdevP:86,FunctionNTileS:87,FunctionNTileVS:88,FunctionVarP:89,FunctionCurrentDate:90,FunctionDayOfMonth:91,FunctionDayOfWeek:92,FunctionDayOfYear:93,FunctionWeek:94,FunctionMonth:95,FunctionQuarter:96,FunctionYear:97,FunctionCurrentDateTime:98,FunctionCurrentTime:99,FunctionHour:100,FunctionMinute:101,FunctionSecond:102,FunctionMilliSecond:103,FunctionConcatNoBlank:104,FunctionLength:105,FunctionLower:106,FunctionLTrim:107,FunctionPosition:108,FunctionRTrim:109,FunctionSubStr:110,FunctionInitCap:111,FunctionTrim:112,FunctionRightStr:113,FunctionLeftStr:114,FunctionGreatest:115,FunctionLeast:116,FunctionFirst:117,FunctionLast:118,FunctionAdd:134,FunctionAverage:135,FunctionMultiply:136,FunctionBandingM:137,FunctionOLAPSum:138,FunctionOLAPAvg:139,FunctionOLAPCount:140,FunctionOLAPMax:141,FunctionOLAPMin:142,FunctionLag:143,FunctionLead:144,FunctionPercentRank:166,FunctionTuple:1000};mstrmojo.mstr.EnumDataType={DataTypeUnknown:-1,DataTypeReserved:0,DataTypeInteger:1,DataTypeUnsigned:2,DataTypeNumeric:3,DataTypeDecimal:4,DataTypeReal:5,DataTypeDouble:6,DataTypeFloat:7,DataTypeChar:8,DataTypeVarChar:9,DataTypeLongVarChar:10,DataTypeBinary:11,DataTypeVarBin:12,DataTypeLongVarBin:13,DataTypeDate:14,DataTypeTime:15,DataTypeTimeStamp:16,DataTypeShort:21,DataTypeLong:22,DataTypeMBChar:23,DataTypeBool:24,DataTypePattern:25,DataTypeBigDecimal:30,DataTypeCellFormatData:31,DataTypeInt64:34};mstrmojo.android.EnumOrientationTypes={PORTRAIT:1,LANDSCAPE:2};(function(){mstrmojo.models.template.Title=mstrmojo.declare(null,null,{init:function G(J){this.title=J.title;},getActionType:function(){return this.title.at;},getDrillPath:function(){return this.title.dp;},getHeaderValues:function B(){return this.title.es;},getHeaderName:function F(J){return this.title.es[J].n;},getHeaderId:function F(J){return this.title.es[J].id;},getForms:function E(){return this.title.fs;},getFormId:function D(){return this.title.fid;},getFormType:function I(){return this.title.ftp;},getUnitId:function H(){return this.title.id;},getLinkMap:function C(){return this.title.lm;},getName:function A(){return this.title.n;},getUnitDssType:function(){return this.title.otp;},getSelectorControl:function(){return this.title.sc;}});}());mstrmojo.LoadedExternalJSURLs={};function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function requiresMethod(B){if(!B){return false;}if(typeof this[B]==="function"){return true;}var A=this[B]||(this.methods&&(this.methods[B]||this.methods["*"]));if(typeof A==="string"){this.requiresCls(A);return typeof this[B]==="function";}return false;},requiresCls:function req(mixins,callback){if(mixins){if(typeof mixins==="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin,i,len;for(i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(C,B){var A=this[C];if(A){var E,D=false;if(typeof A==="string"){E=mstrmojo.registry.ref(A);this[C]=E;D=true;}else{E=A;}if(E&&(D||B)){E.parent=this;if(E.startup){E.startup();}}return E;}return null;},requiresExternalScripts:function requiresExternalScripts(F,G,C){if(F&&F instanceof Array){if(F.length===0){if(G){G.call(C);}return false;}if(F[0]&&F[0].forceReload===false&&mstrmojo.LoadedExternalJSURLs[F[0].url]){F.splice(0,1);return this.requiresExternalScripts(F,G,C);}var A=document.createElement("script"),D=!!document.all,B=F[0].url;if(B.substr(0,7)==="file://"){B=B.substr(7);}else{if(mstrApp.isSingleTier&&B.substr(0,4)!=="http"){B="http:"+B;}}A.type="text/javascript";A.src=B;if(!F[0].callbackParamName){if(D){A.onreadystatechange=function(){if(A.readyState==="loaded"||A.readyState==="complete"){A.onreadystatechange=null;if(F.length>1){mstrmojo.LoadedExternalJSURLs[F.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(F,G);}else{if(F.length===1){mstrmojo.LoadedExternalJSURLs[F[0].url]=true;if(G){G.call(C);}}}}};}else{A.onload=function(){A.onload=null;if(F.length>1){mstrmojo.LoadedExternalJSURLs[F.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(F,G);}else{if(F.length===1){mstrmojo.LoadedExternalJSURLs[F[0].url]=true;if(G){G.call(C);}}}};}}else{if(F[0].callbackParamName.length!==0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy===true){var E=this;window.setTimeout(function(){E.requiresExternalScripts(F,G,C);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;A.src+="&"+F[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=F;mstrmojo._LoadsScript.callback=G;mstrmojo._LoadsScript.esScritsContext=C;}}document.getElementsByTagName("head")[0].appendChild(A);}}});mstrmojo.vi.models.EnumDragSources={DATASETS:1,VIZ_EDITOR:2,FILTERS:3,ALL_OBJECT_LIST:4,VIZ:5};(function(){function Q(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.lastChild)?U.lastChild:F(U,S);return T?D(T,S):null;}}function F(S,R){return(S===R)?null:(S.previousSibling||F(S.parentNode,R));}function D(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.lastChild){return D(S.lastChild);}else{return D(F(S,R));}}}function I(R){return R.textContent||R.nodeValue||R.innerText;}function M(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.firstChild)?U.firstChild:B(U,S);return T?E(T,S):null;}}function B(S,R){return(S===R)?null:(S.nextSibling||B(S.parentNode,R));}function E(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.firstChild){return E(S.firstChild);}else{return E(B(S,R));}}}mstrmojo.range=mstrmojo.provide("mstrmojo.range",{EDGE:{EDGE_BEGIN:1,EDGE_END:2,EDGE_MIDDLE:-1},getEdgeInfo:function P(T,U){var R=0,S;if(T.nodeType===1){if(window.getSelection){S=document.createRange();S.selectNode(T);R=S.toString().length;}else{S=document.body.createTextRange();S.moveToElementText(T);R=S.text.length;}}else{R=I(T).length;}return U===R?this.EDGE.EDGE_END:(U===0?this.EDGE.EDGE_BEGIN:this.EDGE.EDGE_MIDDLE);},collapseOnNode:function K(U,S){if(!U.offsetParent){return ;}var T=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(U);R.collapse(S);T.removeAllRanges();T.addRange(R);}else{R.moveToElementText(U);R.collapse(S);R.select();}},collapseOnTextNode:function L(U,V){var T=this.getSelection(),S=this.getRange();if(window.getSelection){var R=M(U,true);S.setStart(R,V);S.collapse(true);T.removeAllRanges();T.addRange(S);}else{S.moveToElementText(U);S.collapse(true);S.move("character",V);S.select();}},collapseOnTextNodeIE:function C(S,T){var U=M(S,true),R;while(U!==null){R=I(U).length;if(R>=T){this.collapseOnTextNode(U,T);break;}else{T-=R;U=M(U,false);}}},getRangeInfo:function J(X,f){var Z=null,l,d=this.getRange(),b;if(X&&X===d.startContainer){var h=d.startContainer.firstChild,U=h&&h.firstChild,e=U&&U.firstChild;if(e){d.setStart(e,d.startOffset);d.setEnd(e,d.endOffset);}}if(window.getSelection){var W=function(p,s,q){var o=p.cloneRange();o.collapse(q);o.setStartBefore(s);return o.toString().length;},S=d.startContainer,g=d.startOffset;if(S.nodeType===1){g=W(d,S,true);}Z={collapsed:d.collapsed,startContainer:S,startOffset:f?f.startOffset:g};if(!d.collapsed){var V=d.endContainer,R=d.endOffset;if(V.nodeType===1){R=W(d,V,false);}Z.endContainer=V;Z.endOffset=R;}Z.range=d;}else{var k,a,Y=function(s,t){var q=s.duplicate(),o=document.body.createTextRange(),p;q.collapse(t);p=q.parentElement();o.moveToElementText(p);o.setEndPoint("EndToStart",q);return{container:p,offset:o.text.length};},j=Y(d,true),T;Z={collapsed:(d.compareEndPoints("StartToEnd",d)===0),startContainer:j.container,startOffset:j.offset};if(!Z.collapsed){T=Y(d,false);Z.endContainer=T.container;Z.endOffset=T.offset;}}return Z;},collapse:function O(S){if(window.getSelection){var T=this.getSelection();if(S){T.collapseToStart();}else{T.collapseToEnd();}}else{var R=this.getRange();R.collapse(S);R.select();}},selectSingleNode:function H(T){var S=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(T);S.removeAllRanges();S.addRange(R);}else{R.moveToElementText(T);R.select();}},selectMultipleNodes:function N(W,S,X,U){var V=this.getSelection(),T=this.getRange();if(window.getSelection){T.setStart(W,S);T.setEnd(X,U);V.removeAllRanges();V.addRange(T);}else{W=(W.nodeType===3)?W.parentNode:W;T.moveToElementText(W);T.move("character",S);X=(X.nodeType===3)?X.parentNode:X;var R=document.body.createTextRange();R.moveToElementText(X);R.move("character",U);T.setEndPoint("EndToStart",R);T.select();}},getSelection:function G(){if(window.getSelection){return window.getSelection();}else{return document.selection;}},getRange:function A(){if(window.getSelection){selection=window.getSelection();if(selection.rangeCount>0){return selection.getRangeAt(0);}else{return document.createRange();}}else{return document.selection.createRange();}}});}());mstrmojo.chart.model.enums.EnumDSSObjectType={DssTypeUnknown:-1,DssTypeReserved:0,DssTypeGeneric:5,DssTypeFormatBAD:46,DssTypeFilter:1,DssTypeTemplate:2,DssTypeReportDefinition:3,DssTypeMetric:4,DssTypeStyle:6,DssTypeAggMetric:7,DssTypeFolder:8,DssTypeDevice:9,DssTypePrompt:10,DssTypeFunction:11,DssTypeAttribute:12,DssTypeFact:13,DssTypeDimension:14,DssTypeTable:15,DssTypeDatamartReport:16,DssTypeFactGroup:17,DssTypeShortcut:18,DssTypeResolution:19,DssTypeMonitor:20,DssTypeAttributeForm:21,DssTypeSchema:22,DssTypeFormat:23,DssTypeCatalog:24,DssTypeCatalogDefn:25,DssTypeColumn:26,DssTypePropertyGroup:27,DssTypePropertySet:28,DssTypeDBRole:29,DssTypeDBLogin:30,DssTypeDBConnection:31,DssTypeProject:32,DssTypeServerDef:33,DssTypeUser:34,DssTypeTransmitter:35,DssTypeConfiguration:36,DssTypeRequest:37,DssTypeScript:38,DssTypeSearch:39,DssTypeSearchFolder:40,DssTypeDatamart:41,DssTypeFunctionPackageDefinition:42,DssTypeRole:43,DssTypeSecurityRole:44,DssTypeLocale:45,DssTypeConsolidation:47,DssTypeConsolidationElement:48,DssTypeScheduleEvent:49,DssTypeScheduleObject:50,DssTypeScheduleTrigger:51,DssTypeLink:52,DssTypeDbTable:53,DssTypeTableSource:54,DssTypeDocumentDefinition:55,DssTypeDrillMap:56,DssTypeDBMS:57,DssTypeMDSecurityFilter:58,DssTypePromptAnswer:59,DssTypePromptAnswers:60,DssTypeGraphStyle:61,DssTypeChangeJournalSearch:62,DssTypeNCSObjects:255,DssTypeReservedLastOne:63};mstrmojo.VisEnum={ControlType:{BUTTON:"button",LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",SPLITTER:"splitter",GM_ROW_HEADER:"rh",GM_ROW_HEADER_TEXT:"rhtext",GM_ROW_HEADER_EXTRA:"rhext",GM_COL_HEADER:"ch",GM_COL_HEADER_TEXT:"chtext",GM_COL_HEADER_EXTRA:"chext",GM_YAXIS:"y",GM_XAXIS:"x",GM_YLABEL:"y-label",GM_XLABEL:"x-label",GM_ROW_HEADER_TITLE:"rht",GM_ROW_HEADER_TITLE_TEXT:"rhttext",GM_COL_HEADER_TITLE:"cht",GM_COL_HEADER_TITLE_TEXT:"chttext",GM_MINI_CHART:"chart",GM_TEXT_BODY:"text-body",GM_SHAPE:"shape",GM_MARKER:"marker",GM_SET_SHAPE:"set-shape",GM_YAXIS2:"y2",GM_XAXIS2:"x2",GM_TREND_LINE:"trendLine",GM_TREND_LINE_HOVER:"trendLineHover",GM_TREND_LINE_SELECT:"trendLineSelect",GM_REF_LINE:"referenceLine",GM_REF_LINE_HOVER:"referenceLineHover",GM_REL_LINE_SELECT:"referenceLineSelect",GM_HIGHLIGHT_BOX:"highlight-box",GM_AXIS_TEXT:"axis-text",GM_AXIS_WORD:"axis-word",GM_SVG_X_NUMERIC:"svg-x-numeric",GM_SVG_X_CATEGORY:"svg-x-category",GM_SVG_Y_NUMERIC:"svg-y-numeric",GM_SVG_Y_CATEGORY:"svg-y-category",GM_X_NUMERIC:"x-numeric",GM_X_CATEGORY:"x-category",GM_Y_NUMERIC:"y-numeric",GM_Y_CATEGORY:"y-category",GM_SVG_CHART:"svg-chart",GM_DATA_LABEL:"data-label",GM_YAXIS_LINE:"y-line",GM_XAXIS_LINE:"x-line",GM_YAXIS2_LINE:"y2-line",GM_XAXIS2_LINE:"x2-line",LGD_TITLE:"lgd-title",LGD_TEXT:"lgd-text",LGD_COLORBOX:"lgd-colorbox",LGD_COLORBOX_CTN:"lgd-colorbox-ctn",LGD_CANVAS:"lgd-canvas",LINE_CONTAINER:"line-ctn",GM_V_MATRIX_LINE:"v-line",GM_H_MATRIX_LINE:"h-line",GM_V_CHART_LINE:"v-ctline",GM_H_CHART_LINE:"h-ctline",GM_CHART_ROW:"ct-row",GM_CHART_COL:"ct-col",GM_H_GRID_LINE:"h-gline",GM_V_GRID_LINE:"v-gline",GM_H_MINOR_GRID_LINE:"h-gline-minor",GM_V_MINOR_GRID_LINE:"v-gline-minor",GM_ORIGIN_LINE:"originLine",GM_ORIGIN_LABEL:"origin-label",GM_ORIGIN_LINE_H:"origin-line-h",GM_ORIGIN_LINE_V:"origin-line-v",GM_ORIGIN_LABEL_H:"origin-label-h",GM_ORIGIN_LABEL_V:"origin-label-v",GM_DUMMY_A:"dummy-a",GM_V_EXTRA_LINE:"v-extra-line",GM_REF_LABEL:"ref-label",GM_RIGHT_BORDER:"border-r",GM_BOTTOM_BORDER:"border-b"},GMDropZoneID:{ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10},NETWORK_LOCAL_PROPS:{ZOOM_FACTOR:"zf",NODE_POSITION:"np"},NETWORK_PROPERTIES:{showLegend:"showLegend",showEdgeDirection:"showedgearrow",showTransition:"animatelayout",nodeSizeAggregation:"nodesizeaggfunc",minNodeSize:"minns",maxNodeSize:"maxns",themeType:"th",circleLabelFont:"BubFnt",modifiedNodes:"mn",layoutMode:"layout",legendPosition:"legendposition",dragMode:"mode",bubbleStyle:"bbs",propsCategory:"pc",lgdBgFillClr:"lgdBgFillClr",lgdBgFillTrans:"lgdBgFillTrans",lgdFntClr:"lgdFntClr",lgdFntSz:"lgdFntSz",lgdFntFml:"lgdFntFml",lgdFntStyle:"lgdFntStyle"},NETWORK_LAYOUT:{CIRCULAR:"circular",LINEAR:"linear",FORCE_DIRECTED:"forceDirected"},NETWORK_DRAG_MODE:{pan:0,select:1},NETWORK_AGGREGATION_METHOD:{"Count of":0,"Sum of":1,"Average of":2,"Min of":3,"Max of":4},NETWORK_MIN_NODE_SIZE_TYPE:{PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3},NETWORK_MAX_NODE_SIZE_TYPE:{AUTOMATIC:1,MANUAL:2},NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE:[0,0.2],HEATMAP_PROPERTIES:{showLegend:"showLegend",deleteButton:"ed",showMetricValues:"mv",labelSize:"lb",layout:"la",themeType:"th",headerType:"he",deletedList:"dl",refreshType:"rt",metricList:"ml",colorByType:"cbt",absoluteFixed:"abs",blendColor:"blc",background:"bg",legendBackground:"lbg",headerColors:"hcl",fonts:"fts",propsCategory:"pc",attrColorByOpacity:"acbo",metricColorByOpacity:"mcbo"},HEATMAP_LABEL_SIZE:{On:0,Off:1,Proportional:2},MAPS_PROPERTIES:{SHOW_LEGEND:"showLegend"},VIS_CARDLIMIT:{GRID:250,NON_GRID:8000},GMLegendDataType:{COLOR_BY:1,SIZE_BY:2},GMLegendFormatingPropertyTag:{LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",COLOR_SQUARE_COLOR:"clrSqrClr"},LegendPropertyTag:{LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr"},EnumLegendMode:{RESTORED:1,MINIMIZED:2},EnumColorRankMode:{INVALID:-1,VALUE:0,TOP:1,BOTTOM:2,TOP_PERCENT:3,BOTTOM_PERCENT:4},FormNameDisplayType:{OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4},SERVER_JSON_ERROR_TYPE:{EMPTY_DATA:0,NO_DATASET:1,AE_ERROR:2,NO_TEMPLATE_UNIT:3},NETWORK_CIRCLE_BORDER_WIDTH:8,IMAGELAYOUT_PROPERTIES:{DISPLAY_MODE:"mt",MAX_SIZE_TYPE:"ty",MAX_SIZE_VALUE:"val",MIN_SIZE_TYPE:"mst",MIN_SIZE_VALUE:"msv",MAP_FILE_PATH:"mf",SHAPE_FILL_OPC_PER:"shapeFillTrans",SHAPE_FILL_COLOR:"shapeClr",SHAPE_BORDER_STYLE:"shapeBorderCmbStyle",SHAPE_BORDER_COLOR:"shapeBorderClr",DATA_LABEL_SWITCH:"dls",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",BLANK_MAP_BORDER_STYLE:"blankMapBorderStyle",BLANK_MAP_BORDER_COLOR:"blankMapBorderClr",BLANK_MAP_COLOR:"blankMapClr",DEFAULT_MAP_COLOR:"dftMapClr",DEFAULT_BUBBLE_COLOR:"dftBubbleClr",DEFAULT_MAP_BORDER_COLOR:"dftMapBorderClr",DEFAULT_BUBBLE_BORDER_COLOR:"dftBubbleBorderClr",LEGEND_FONT_SIZE:"lgFntSz",LEGEND_FONT_FAMILY:"lgFntFml",LEGEND_FONT_COLOR:"lgFntClr",LEGEND_FONT_STYLE:"lgFntStyle",LEGEND_BACKGROUND_COLOR:"lgBgClr",LEGEND_OPC_PER:"lgBgFillTrans",LEGEND_POSITION:"lgPos",LEGEND_SHOW:"lgShow",LEGEND_MODE:"lgMode",LEGEND_SCALE:"lgScale",H_MATRIX_LINE_COLOR:"hMatrixLnClr",V_MATRIX_LINE_COLOR:"vMatrixLnClr",ALL_MATRIX_LINE_COLOR:"allMatrixLnClr",H_MATRIX_LINE_STYLE:"hMatrixLnCmbStyle",V_MATRIX_LINE_STYLE:"vMatrixLnCmbStyle",ALL_MATRIX_LINE_STYLE:"allMatrixLnCmbStyle"}};(function(){function E(N,M){var O=N.st;if(!O||O===2048||O==="Project"){this.openFolder(N);}else{if(M||!mstrApp.isTablet()||this.orientation){this.openItem(N);}else{this.rootCtrl.updateItemProperties("",N,this.id,this.isItemAvail(N));}}}mstrmojo.android.controllers._HasFolderView=mstrmojo.provide("mstrmojo.android.controllers._HasFolderView",{_mixinName:"mstrmojo.android.controllers._HasFolderView",start:function B(N){this._super(N);var M=mstrmojo.publisher,O=this.id;mstrmojo.array.forEach([M.CONNECTIVITY_CHANGED_EVENT,M.RECONCILE_END_EVENT],function(P){M.subscribe(M.NO_SRC,P,function(){var Q=this.view;if(Q.hasRendered){Q.refresh();}},O);});},initFolderView:function I(){var M=this.view=this.newView("Folder",{cssClass:"folder-browser",multiSelect:false,hasEvenRows:!mstrApp.isTablet()||!this.orientation,postselectionChange:function(N){var O=N.added;if(O){E.call(this.controller,this.items[O[0]]);}}});return M;},executeItem:function D(M){var N=this.nextController;if(N){N.destroy();this.rootCtrl.updateFolder(this.view);}if(mstrApp.isTablet()&&!this.orientation){E.call(this,M,true);}else{this.view.singleSelect(M._renderIdx);}},onorientationChange:function L(){this._super();var N=this.view;if(N&&mstrApp.isTablet()){N.set("hasEvenRows",!this.orientation);if(N.hasRendered&&N.domNode&&N.domNode.parentNode){var M=N.scrollerConfig;if(M&&M.origin){M.offsetIdx=N.getOffsetIndex();M.origin.y=0;N.updateScroller();}this.syncItemProperties();}}},syncItemProperties:function K(){if(mstrApp.isTablet()&&!this.orientation){var M=this.view,N=M&&M.getSelectedItems&&M.getSelectedItems()[0];if(N){this.rootCtrl.updateItemProperties("",N,this.id,this.isItemAvail(N));}else{this.updatePropertiesMsg();}}},getDefaultMessage:function A(){return"";},updatePropertiesMsg:function H(){var M=this.view;this.rootCtrl.updateItemProperties(this.getDefaultMessage(M&&M.items));},canItemLinger:function J(M){if(!mstrApp.isTablet()){return true;}var N=M.st;if(N===2048||N==="Project"||this.orientation){return true;}return false;},itemLongPressed:function G(M){var N=this.id;if(!mstrApp.isTablet()||this.orientation){this.rootCtrl.updateItemProperties("",M,N,this.isItemAvail(M));return true;}return false;},isItemAvail:function C(N,M){if(mstrMobileApp.isOnline()||N.act===5||N.act===3){return true;}if(N.t===8&&(N.st==="Project"||N.systemFolder)){var O=mstrApp.getConfiguration().getProject(N.did);return !!(O&&O.realPid);}return M?false:this.isItemCached(N);},isItemCached:function F(N){var Q=N.t,M=N.st;if(!(Q===3||Q===55||M===2048||M==="Project")){return false;}if(M===2048&&mstrMobileApp.isOnline()){return true;}var O=N.pid||N.projectID;if(!O){var P=mstrApp.getConfiguration().getProject(mstrApp.getCurrentProjectId());O=P&&P.realPid;}return !!(O&&mstrMobileApp.isCached(O,N.sub_id||N.did,(N.sub_id)?-1:M));}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources");function D(H){this.cleanUpAfterTarget(H);var G=H.tgtData;if(G){delete H.tgtData;}var I=this.getContextDragData(H);if(I&&I.setAvatarClass){I.setAvatarClass("");}}mstrmojo.vi.ui._IsDropTarget=mstrmojo.provide("mstrmojo.vi.ui._IsDropTarget",{_mixinName:"mstrmojo.vi.ui._IsDropTarget",dropZone:true,getDropAvatarIcon:function B(G){return"add";},getContextDragData:function F(G){return G.getCtxtDragData();},cleanUpAfterTarget:mstrmojo.emptyFn,ondragenter:function A(G){var H=this.getContextDragData(G);if(H&&H.setAvatarClass){H.setAvatarClass(this.getDropAvatarIcon(G));}if(this._super){this._super(G);}},ondragleave:function E(G){D.call(this,G);if(this._super){this._super(G);}},ondrop:function C(G){D.call(this,G);if(this._super){this._super(G);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.models.template.Title");mstrmojo.models.template.Titles=mstrmojo.declare(null,null,{init:function D(G){var F=this.gridData=G.data,E=F.gts;this.titles=G.isRow?E.row:E.col;},size:function C(){return this.titles.length;},getTitle:function B(E){return new mstrmojo.models.template.Title({title:this.titles[E]});},getCSS:function A(E){return this.gridData.css[this.titles[E].cni].n;}});}());(function(){mstrmojo.requiresCls("mstrmojo.models.template.Header");mstrmojo.models.template.Headers=mstrmojo.declare(null,null,{init:function D(K){var O=this.isRow=K.isRow,J=this.data=K.data,L=J.gts,G=J.ghs,F=this.hs=O?G.rhs:G.chs,M=this.i=K.i,N=0,I;this.titles=O?L.row:L.col;this.headers=F.items&&F.items[M]&&F.items[M].items;if(O&&this.headers){N=this.titles.length-this.headers.length;if(N){for(I=M-1;I>=0;I--){var E=F.items[I].items,H=E.length-this.headers.length;if(H>0){this.headers=E.slice(0,H).concat(this.headers);if(this.titles.length===this.headers.length){break;}}}}}},size:function B(){var E=this.headers;return(!E?0:E.length);},getHeader:function C(H){var F=this.headers,G=F&&F[H],E=H;if(G&&mstrApp&&mstrApp.isVI){E=isNaN(G.tui)?G.ui:G.tui;}return G&&new mstrmojo.models.template.Header({h:G,t:this.titles[this.isRow?E:this.i]});},getCSS:function A(F){var E=this.headers;return E&&this.data.css[E[F].cni].n;},getHeaderCell:function(F){var E=this.headers;return E&&E[F];}});}());(function(){mstrmojo.requiresCls("mstrmojo.EnumReadystate");var C=mstrmojo.EnumReadystate;function E(G){return(G.getKey&&G.getKey())||G.k;}mstrmojo._IsDocController={_mixinName:"mstrmojo._IsDocController",_getXtabCallback:function(L,H){var G={},J=G[E(L)]=L.defn,K=this,I=K.model;return I.newCallback({submission:function(){if(J.set){J.set("readyState",C.WAITING);}},success:function(N){var M=N.pukeys,O=M&&M.split("\u001E");if(M){G=I.getUnitDefinitions(M);}I.partialUpdate(N.data,G,N.defn,O,N.puFilters);},failure:function(M){if(!(mstrApp.isSingleTier&&M.code===403)){mstrmojo.alert(M.code+": "+M.message);}},complete:function(){if(J.set){J.set("readyState",C.IDLE);}K.docRequestComplete();}});},_addNodeKeyToAction:function(G,H){H.nodeKey=E(G);return H;},onGridSelector:function(H,K){var G=this.model,J=[].concat(G.getTargetInfoWin(K.ifw)).concat(G.getTargetInfoWin(K.tks));if(J&&J.length){var I;for(I=0;I<J.length;I++){G.showInfoWin(J[I],K.anchor,"h",true);}}K.sid=H.sid;G.slice(K);},onVisSelector:function(H,J){if(J.anchor){var G=this.model,I=G.getTargetInfoWin(J.tks);if(I&&I.length){G.showInfoWin(I[0],J.anchor,"h",true);}}if(H.xtabModel&&H.xtabModel.docModel&&H.xtabModel.docModel.slice){H.xtabModel.docModel.slice(J);}},isInRequest:function D(){var G=!!this._inProcess;if(!G){this._inProcess=true;}return G;},docRequestComplete:function F(){this._inProcess=false;},nudgeWidget:mstrmojo.emptyFn,getGroupByElements:function B(I){var M=[],L;while(I){L=I.node&&I.node.data&&I.node.data.pbes;if(L){break;}I=I.parent;}if(L){var J=this.model.data.elems;var H=L.length,K;for(K=0;K<H;K++){var G=L[K];M.push(isNaN(G)?G:J&&J[G]);}}return M;},setData:function A(H,J){var G=this.view,I=J;if(J&&G&&G.unloadLayouts){G.unloadLayouts(null,false);I=false;}this.model.loadLayout(H,I);if(this.hasPageBy&&this.hasPageBy()){this.getPageByTree(true);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.EnumReadystate");var D=mstrmojo.EnumReadystate;var A=1200;var C=function(F,E){if(E){E.style.display=F?"block":"none";}};mstrmojo._HasWaitIcon={waitHandle:null,postBuildRendering:function B(){if(!this._rsl){var E=this.id;this._rsl=this.defn.attachEventListener("readyStateChange",E,function(G){if(!this.hasRendered){return ;}switch(G.value){case D.WAITING:if(!this.waitIcon&&this.domNode){var H=document.createElement("div");H.className="mojo-overlay-wait";H.innerHTML='<div class="overlay"></div><div class="icon"></div>';this.domNode.appendChild(H);this.addSlots({waitIcon:H});}var F=this.waitIcon;if(A){this.waitHandle=window.setTimeout(function(){if(mstrmojo.all[E]){mstrmojo.all[E].waitHandle=null;}C(true,F);},A);}else{C(true,F);}break;case D.IDLE:if(this.waitHandle){window.clearTimeout(this.waitHandle);this.waitHandle=null;}C(false,this.waitIcon);break;}});}return this._super();}};}());(function(){mstrmojo.requiresCls("mstrmojo.android.EnumMenuOptions");var C=mstrmojo.android.EnumMenuOptions,D=C.TRANSACTIONS_QUEUE;function B(){return mstrApp.getTransactionNotificationController();}function A(){return(!this.hsc&&(this.st===14081));}mstrmojo.android.controllers._SupportsQueuedTransactions=mstrmojo.provide("mstrmojo.android.controllers._SupportsQueuedTransactions",{_mixinName:"mstrmojo.android.controllers._SupportsQueuedTransactions",getTxnToolbarButton:function F(G){var H=B();if(H&&H.hasTransactionQueue((A.call(this))?this.did:null)){G.addToolbarBtn(D,mstrmojo.desc(9262,"Transactions Queue"),D,true,18);}return G;},handleMenuItem:function E(I,G){if(I===D){var H,J;if(A.call(this)){H=this.did;J=this.ttl;}B().showNotificationBoard(this,H,J);}else{this._super(I,G);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.base64","mstrmojo.func","mstrmojo.hash");mstrmojo.XhrCallbackType=null;function decodeHeader(value){var rEncoded=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(value&&value.indexOf("=?UTF-8?B?")===0){var decMsg="",result;while((result=rEncoded.exec(value))!==null){decMsg+=mstrmojo.base64.decode(result[1]);}return decMsg;}return value;}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){url[++x]=p+"="+encodeURIComponent(params[p]);}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function sendXhr(xhr,method,baseUrl,params){method=method.toUpperCase();var app=mstrApp,m=window.microstrategy;if(this.isTask){params=mstrmojo.addCSRFTokenToTaskParams(params);params.taskContentType=params.taskContentType||"json";params.taskEnv=params.taskEnv||"xhr";params.xts=new Date().getTime();params[mstrApp.name]=mstrApp.servletState||"";baseUrl=baseUrl||mstrConfig.taskURL;}var ptp=app.persistTaskParams||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}xhr.open(method,appendUrlParams(method,baseUrl,params),this.async);if(method!=="POST"){xhr.send(null);}else{xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");xhr.send(encodeParams(params));}if(this.async===false){xhr.onreadystatechange();}}function createXhr(){var methods=[function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}],cnt=methods.length,i;for(i=0;i<cnt;i++){var xhr;try{xhr=methods[i]();}catch(e){continue;}createXhr=methods[i];return xhr;}throw new Error("mstrmojo.SimpleXHR: Could not create an XHR object.");}function evalResponse(rt){var rtn=null;try{rtn=eval("("+rt+")");}catch(ex){rtn=rt&&mstrmojo.string.trim(rt);}return rtn;}var MSI_SERVER_NAME_NOT_INITIALIZED=2147760371,MSI_INVALID_SESSION_ID=2147760372,E_MSI_USERMGR_USER_NOTFOUND=2147758245,E_MSI_CONNECT_FAILED=2147759877;function isSessionExpiredError(res){var c=res&&res.getResponseHeader("X-MSTR-TaskErrorCode");c=(c<0)?(4294967296+parseInt(c,10)):c;switch(c){case MSI_SERVER_NAME_NOT_INITIALIZED:case MSI_INVALID_SESSION_ID:case E_MSI_USERMGR_USER_NOTFOUND:case E_MSI_CONNECT_FAILED:return true;}return false;}function xhrSupportsProgress(xhr){return !!(xhr&&xhr.upload&&xhr.upload.onprogress);}mstrmojo.SimpleXHR=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.SimpleXHR",isTask:true,async:true,init:function init(props){mstrmojo.hash.copy(props,this);},onreadystatechange:function onreadystatechange(xhr,callback,prevRequest){if(xhr.readyState!==4){return ;}if(typeof callback!=="object"){return ;}try{if((xhr.status===200)||(xhr.status===304)){this.response=callback.textResponse?xhr.responseText:evalResponse(xhr.responseText);if(typeof callback.success==="function"){callback.success(this.response);}}else{if(xhr.status!==0){var app=mstrApp,sessionExp=app&&app.onSessionExpired;if(sessionExp&&isSessionExpiredError(xhr)){sessionExp.call(app,prevRequest);}else{var orig=xhr.getResponseHeader;xhr.getResponseHeader=function(name){return decodeHeader(orig.apply?orig.apply(xhr,[name]):orig(name));};if(typeof callback.failure==="function"){callback.failure(xhr);}}}}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(typeof callback.complete==="function"){callback.complete();}if(!isSessionExpiredError(xhr)&&!prevRequest.params.notRestartSessionManager){var sm=mstrApp.sessionManager;if(sm&&sm.restart){sm.restart();}}}},cancel:function(){var didCancel=false;var xhr=this.xhr;if(xhr){delete xhr.onreadystatechange;xhr.isAborted=true;if(xhr.readyState<4){xhr.abort();didCancel=true;}this.xhr=null;}return didCancel;},request:function request(method,baseUrl,callback,params,webSvrUrl,useResFeed,webSrvParams){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("POST",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{var xhr=createXhr();xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(this,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=(function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback));}this.xhr=xhr;sendXhr.call(this,xhr,method,baseUrl,params);}}});mstrmojo.QueuedXHR=mstrmojo.declare(mstrmojo.SimpleXHR,null,{scriptClass:"mstrmojo.QueuedXHR",queue:null,requestCount:0,retryDelay:1,lookup:null,cancel:function cancel(){var didCancel=this._super();while(this.queue.length){var x=this.queue.pop();var cb=x.callback;if(cb&&cb.complete){cb.complete();}}this.queue=[];this.requestCount--;return didCancel;},init:function init(){this.queue=[];this.lookup=[];},request:function request(method,baseUrl,callback,params,override,webSvrUrl,useResFeed,webSrvParams,useCache){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("POST",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{if(this.requestCount>0&&!override){this.queue.push({method:method,baseUrl:baseUrl,callback:callback,params:params});}else{if(this.requestCount>0){this.cancel();}this.requestCount++;var lu=null,oriParams=null;if(useCache){lu=this._searchForCacheRequest(params);oriParams=mstrmojo.hash.copy(params);}if(lu){try{if(callback.success){window.setTimeout(function(){callback.success(lu.res);},10);}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(callback.complete){callback.complete();}this.advanceQueue();}}else{var xhr=this.xhr=createXhr();callback=mstrmojo.func.wrapMethods(callback,{complete:(function(ths){return function(){ths.advanceQueue();};}(this)),success:(function(ths){return function(){if(useCache){ths.lookup.push({params:oriParams,res:ths.response});}};}(this))});xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(this,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=(function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback));}sendXhr.call(this,xhr,method,baseUrl,params);}}}},upload:function upload(method,baseUrl,callback,params,data,config,override,webSrvParams,useCache){if(this.isTask){params=mstrmojo.addCSRFTokenToTaskParams(params);}if(this.requestCount>0&&!override){this.queue.push({method:method,baseUrl:baseUrl,callback:callback,params:params,data:data,config:config});}else{if(this.requestCount>0){this.cancel();}this.requestCount++;var lu=null,oriParams=null;if(useCache){lu=this._searchForCacheRequest(params);oriParams=mstrmojo.hash.copy(params);}if(lu){try{if(callback.success){window.setTimeout(function(){callback.success(lu.res);},10);}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(callback.complete){callback.complete();}this.advanceQueue();}}else{var xhr=this.xhr=createXhr();var self=this;callback=mstrmojo.func.wrapMethods(callback,{complete:(function(ths){return function(){ths.advanceQueue.call(ths);};}(this)),success:(function(ths){return function(){if(useCache){ths.lookup.push({params:oriParams,res:ths.response});}};}(this))});var handleProgress=function(event){callback.progress(event,config);};var url=baseUrl;xhr.open("POST",url,false);var formData=new FormData();var a;for(a in params){formData.append(a,params[a]);}if(data){if(params.fileName){formData.append("myFile",data,params.fileName);}else{formData.append("myFile",data);}}if(xhrSupportsProgress(xhr)&&callback.progress){xhr.upload.onprogress=handleProgress;}xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(self,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));xhr.send(formData);}}},advanceQueue:function advanceQueue(){this.requestCount--;if(this.queue.length===0){this.requestCount=0;return ;}var req=this.queue.shift();if(req.params.taskId==="importFile"){this.upload(req.method,req.baseUrl,req.callback,req.params,req.data,req.config);}else{this.request(req.method,req.baseUrl,req.callback,req.params,true);}},_searchForCacheRequest:function _searchForCacheRequest(params){var i;for(i in this.lookup){if(mstrmojo.hash.equals(params,this.lookup[i].params)){return this.lookup[i];}}return null;},hasRequests:function hasRequests(){return this.requestCount>0||mstrmojo.jsonp.hasRequests();}});mstrmojo.xhr=new mstrmojo.QueuedXHR();mstrmojo.jsonp={jsc:new Date().getTime(),timeToWait:20000,requestCount:0,request:function(url,params,callback){var head=document.getElementsByTagName("head")[0]||document.documentElement,jsonp="jsonp"+(this.jsc++),script=document.createElement("script");params.jsonp=jsonp+"(@R@);";params.taskContentType="jsonp";params.taskEnv="jsonp";params.xts=new Date().getTime();window[jsonp]=function(response){mstrmojo.jsonp.requestCount--;if(!response){if(callback.timeout){callback.timeout();}}else{if(response.status===200){callback.success(response.content);}else{var res={status:response.status,getResponseHeader:function(name){switch(name){case"X-MSTR-TaskFailureMsg":return response.errorMsg;case"X-MSTR-TaskErrorCode":return response.errorCode;}}};if(mstrApp.onSessionExpired&&isSessionExpiredError(res)){if(callback.onSessionExpired){callback.onSessionExpired();}else{mstrApp.onSessionExpired();}}else{callback.failure(res);}}}if(window[jsonp]){if(callback.complete){callback.complete();}window[jsonp]=undefined;try{delete window[jsonp];}catch(e){}head.removeChild(script);}};head.insertBefore(script,head.firstChild);this.requestCount++;script.src=appendUrlParams("GET",url,params);setTimeout(function(){var fn=window[jsonp];if(fn){fn();}},this.timeToWait);},hasRequests:function(){return this.requestCount>0;}};}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash");var E=mstrmojo.func.wrapMethods;function B(L,I,K,H,J){return E({success:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("success",I.target,JSON.stringify(I.memo),JSON.stringify(M));}},complete:function(){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("complete",I.target,JSON.stringify(I.memo));}J.removeCallback(K,H);},failure:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("failure",I.target,JSON.stringify(I.memo),JSON.stringify(M));}}},L);}mstrmojo._CanProxyCallback=mstrmojo.provide("mstrmojo._CanProxyCallback",{_mixinName:"mstrmojo._CanProxyCallback",callbacks:null,isCallbackReceiver:false,newCallback:function D(O){return O;var K=this.callbacks,I=mstrmojo.hash.copy(O),P=(O.index!==undefined)?String(O.index):"index",N=arguments.callee.caller.arguments,L,J,M,H=O.method||"anonymous";if(!K){K=this.callbacks={};}if(!K[H]){K[H]={};}if(!this.isCallbackReceiver){for(J=0,M=N.length;J<M;J++){L=N[J];if(L&&L.target){I=B(I,L,H,P,this);break;}}}if(!O.method){I.proxy=this.getCallbackMemo();}K[H][P]=I;return I;},anonymous:function(J,K,I,H){if(!this.isCallbackReceiver){K=B(K,H,"anonymous","index",this);mstrApp.serverRequest(J,K,I);}},getCallback:function C(K,J){var H=J||"index",I=this.callbacks;return I&&I[K]&&I[K][H];},removeCallback:function G(K,J){var H=J||"index",I=this.callbacks;if(I&&I[K]){delete I[K][H];if(mstrmojo.hash.isEmpty(I[K])){delete I[K];}}},getCallbackMemo:function F(I,H){return{target:'mstrmojo.all["'+this.id+'"].receiveCallback',memo:{method:I||"anonymous",index:H||"index"}};},receiveCallback:function A(L,J,K){var M=J.method,I=J.index,H=this.getCallback(M,I);if(H&&L&&H[L]){H[L](K);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash");var B=mstrmojo.func.wrapMethods,C=mstrmojo.hash;function L(M){return function(){var O=this,N=[].slice.call(arguments),P=N.pop();N.push(mstrmojo.func.wrapMethods({success:function(Q){O.setData(Q);},prompts:function(Q){O.setPrompts(O.getDataService().getPrompts());}},P));this.submitToDataService(M,N);};}function A(M,N){if(N){M.data=N;}M.setPrompts(M.getDataService().getPrompts());}mstrmojo._IsRptModel={_mixinName:"mstrmojo._IsRptModel",setPrompts:function D(M){this.prompts=M;if(M){M.host=this;}},getDataService:function H(){return this.dataService;},execute:function I(O,P){var M=this,N=C.copy(O,{dssId:O.did});if(O.forceExec){N.execFlags=1;N.doNotUpdateCaches=true;}this.getDataService().execute(N,B({success:function(Q){A(M,Q);},prompts:function(){A(M);}},P));},refresh:function F(N,O){var M=this;this.getDataService().getResults(null,B({success:function(P){A(M,P);}},O));},answerPrompts:function E(N){var M=this;this.getDataService().answerPrompts(this.prompts,B({success:function(O){M.data=O;}},N));},submitToDataService:function G(M,N){var O=this.getDataService();O[M].apply(O,N);},getPageByTree:function J(M){this.submitToDataService.call(this,"getPageByTree",[M]);},sort:L("sort"),pivot:L("pivot"),drillGrid:L("drillGrid"),drill2Grid:L("drill2Grid"),linkToObject:L("linkToObject"),pageBy:L("pageBy"),addQuickGroup:L("addQuickGroup"),setData:function K(M){this.data=M;if(!this.prompts){this.setPrompts(this.dataService.getPrompts());}}};}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui._CanBeFullScreen");function L(N,M){return function(O){return M?parseInt(O[N],10):O[N];};}mstrmojo.android.ui.ActionBarNative=mstrmojo.declare(null,[mstrmojo.android.ui._CanBeFullScreen],{scriptClass:"mstrmojo.android.ui.ActionBarNative",isActive:false,reset:mstrmojo.emptyFn,setUpStatus:function J(M){if(this.isActive!==M){mstrMobileApp.setUpStatus(M);this.isActive=M;}},setNavigation:function E(N,M){mstrMobileApp.setNavigation(N.map(L("n")),N.map(L("act",parseInt)),N.map(L("fromNav")),M);},clearNavigation:mstrmojo.emptyFn,restoreNavigation:function G(){mstrMobileApp.restoreNavigation();},selectNavigationItem:function H(N){var M=N.act;if(M){mstrMobileApp.selectNavigationItem(M);}},getNavList:mstrmojo.emptyFn,hasNavigationItems:function B(){return mstrMobileApp.hasNavigationItems();},setLastOpened:function D(M){mstrMobileApp.setLastOpened(M.map(L("renderIdxArr",parseInt)),M.map(L("did")),M.map(L("n")),M.map(L("projectID")),M.map(L("st",parseInt)),M.map(L("ttl")),M.map(L("xId")),M.map(L("hsc")));},updateTitle:function I(M){mstrMobileApp.setTitle(M);},updateToolbar:function K(N,M){mstrMobileApp.setSysMenu(N,M.groups,M.labels,M.actions,M.checked,M.icons,M.types);},setActionToolbarStatus:function C(M){mstrMobileApp.setActionToolbarStatus(M);},enterFullScreen:function A(){this._super();mstrMobileApp.enterFullScreen();},exitFullScreen:function F(){this._super();mstrMobileApp.exitFullScreen();},onEnterFullScreen:mstrmojo.emptyFn,onExitFullScreen:mstrmojo.emptyFn,propogateMenuVisibleChange:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.StringBuffer");var G=mstrmojo.dom,T=mstrmojo.hash,P=mstrmojo.array;function X(){T.forEach(this.ifwMap,function(a){a.destroy();});this.ifwMap={};}function A(){var a=[],d=null,b=null;T.forEach(this.ifwMap,function(e){if(e.visible){a.push({psId:e.psId,psKey:e.psKey,autoCloseLocks:e.autoCloseLocks,lockInfoWinId:e.lockIW?e.lockIW.id:false,anchorPos:e.anchorPosition||G.position(e.anchor,true),anchorOrn:e.anchorOrientation});}});if(a.length>0){d=this.getSelectedLayoutWidget();b=d&&d.getScrollPos();}return{ifwRecords:a,docScrollRecord:b};}function O(f){var a=(f&&f.ifwRecords)||[],b=f&&f.docScrollRecord,d=this.getSelectedLayoutWidget(),e=this,g={};if(a.length>0){if(b&&d){d.scrollTo(b);}P.forEach(a,function(h){if(h.lockInfoWinId){g.lockInfoWinId=h.lockInfoWinId;}e.showInfoWindow(h.psId,h.psKey,g,null,h.anchorOrn,h.anchorPos,h.autoCloseLocks);});}}function K(){if(mstrmojo.DICPopup&&mstrmojo.DICPopup.cancel){mstrmojo.DICPopup.cancel();}}function S(){P.forEach(this.xtabStyleSheets,function(b){var a=b.parentNode;if(a){a.removeChild(b);}});}function Z(b,f){var d=this.getLayout(b),a=d.docGroupBy,e=this.controller;if(a){a.set("data",f.groupbys);d.gb=f;}if(e.getPageByTree){e.getPageByTree(true);}}mstrmojo._IsRwDocument=mstrmojo.provide("mstrmojo._IsRwDocument",{_mixinName:"mstrmojo._IsRwDocument",updateXtabStyles:function M(h,d){var q=this.xtabStyleSheets&&this.xtabStyleSheets[0],p=this.styleList||{},b=function(x,u){var w;for(w in u){var t=u[w].css||"";if(u[w].app){t=(x[w]||"")+t;}x[w]=t;}return x;},r=document;if(!p[h]){p[h]=b({},this.model.getSelectedXtabStyles(h));}b(p[h],d);if(!this.xtabStyleSheets){this.xtabStyleSheets=[];q=this.xtabStyleSheets[0]=r.getElementsByTagName("head")[0].appendChild(r.createElement("style"));}var s=new mstrmojo.StringBuffer(),f,g;for(f in p){for(g in p[f]){s.append(p[f][g]);}s.append("\n");}var e=s.toString();if(q&&e){q=q.styleSheet||q;if(G.isWK){var o=q.firstChild;if(o){o.nodeValue=e;}else{q.appendChild(r.createTextNode(e));}}else{if(G.isIE){q.cssText=e;var l,k,a,j;for(l=1;q.rules.length===4095&&r.styleSheets.length<31;l++){k=q.rules[4094];a=new RegExp(k.selectorText,"i");j=e.search(a);if(j===-1){break;}j=e.indexOf("}",j+1);e=e.slice(j+1);if(!this.xtabStyleSheets[l]){this.xtabStyleSheets[l]=r.getElementsByTagName("head")[0].appendChild(r.createElement("style"));}q=this.xtabStyleSheets[l].styleSheet;q.cssText=e;}}else{q.innerHTML=e;}}}this.styleList=p;},postBuildRendering:function W(){var a=document.getElementsByTagName("head")[0];P.forEach(this.xtabStyleSheets,function(b){a.appendChild(b);});return this._super();},buildChildren:function B(f){var k;try{var g=this.model;if(g){var h=this.buildSubs||{},t=g.id+"-partialUpdate",b=g.id+"-rebuildLayout",o=g.id+"-updateStyles",e=g.id+"-showInfoWin",d=this.id;var l=this,q=function(){P.forEach(l.getLayouts(),function(r){if(r.k!==g.currlaykey){r.defn.loaded=false;}});};if(h[t]===undefined){var p=function a(AB){var u=this.model,s=u&&u.getLayoutDataCache(u.getCurrentLayoutKey()),r=AB&&AB.ids;if(T.isEmpty(s)||!r){return ;}P.forEach(AB.tree.layouts,function(AD){if(AD.k===u.currlaykey){this.updateXtabStyles(AD.k,AD.xtabStyles);if(AD.gbys){Z.call(this,AD.k,AD.gbys);}return false;}return true;},this);var x=T.forEach,AC=false,z={update:r.upd,refresh:r.tgts,adjustSectionSize:r.secs};x(r.ifws,function(AF,AE){var AD=mstrmojo.all[AF+"_ifw"];if(AD&&AD.visible){this.updateInfoWindowPS(AF,AE);}},this);x(z,function(AE,AD){x(AE,function(AH,AL){var AG=mstrmojo.all[AL],AK;if(AG&&AG[AD]!==undefined){var AJ=s[AL],AF=(AD==="update"?AJ:null),AI=AD;if(AD==="update"){if(AG.updateForPU){AI="updateForPU";}else{AG.node=AJ;}}else{if(AD==="refresh"&&AG.refreshForPU){AI="refreshForPU";}}AK=AG[AI](AF);if(AD==="adjustSectionSize"&&AK){AC=AC||(!!AK.heightReduced);}}},this);},this);var w=this.getSelectedLayoutWidget();if(AC){w.notifyScrollListeners();}var AA=w.docLayout;if(AA){AA.resizeOrReposition();}if(AB&&AB.unloadCache){q();}};h[t]=g.attachEventListener("partialUpdate",d,p);}h[b]=h[b]||g.attachEventListener("rebuildLayout",d,function(r){var u=r&&r.restoreIW,s;if(u){s=A.call(this);this.model.aws=null;}this.onLayoutRebuilt(this.rebuildLayout(r.src.currlaykey,this.getLayouts()));if(r&&r.unloadCache){q();}if(u){O.call(this,s);}});h[o]=h[o]||g.attachEventListener("updateStyles",d,function(r){this.updateXtabStyles(r.key,r.updatedStyles);});h[e]=h[e]||g.attachEventListener("showInfoWin",d,function(r){this.showInfoWindow(r.psId,r.psKey,r.anchor,r.invalidate,r.anchorOrientation,r.anchorPosition);});this.updateXtabStyles(g.getCurrentLayoutKey());g.attachEventListener("refresh",this.id,function(){this.refresh();});}k=this._super(f);}catch(j){mstrmojo.err(j);}return k;},updateInfoWindowPS:mstrmojo.emptyFn,showInfoWindow:function J(b,w,l,p,s,t,AF){var e=this.model,h=e.getLayoutDataCache(e.getCurrentLayoutKey()),AA=this.builder,a=h[b]&&h[b].defn,g=a&&a.iwpl,z=b+"_ifw",AE=mstrmojo.all[z],AB=this.domNode,d=mstrmojo.DocInfoWindow.PLACEMENT.FIXED,AC=function(AG,AH,AI,AK,AJ){if(g===d){if(AH){var AL=G.delta(AH,AB);AG.popPosition={left:(AL&&AL.x)?AK+AL.x:AK,top:(AL&&AL.y)?AJ+AL.y:AJ};}else{if(AI){AG.popPosition={left:(AI.scrollboxLeft)?AK-AI.scrollboxLeft:AK,top:(AI.scrollboxTop)?AJ-AI.scrollboxTop:AJ};}else{AG.popPosition={left:AK,top:AJ};}}}};var r=this.getLayout(e.getCurrentLayoutKey());if(AE){if(p){AE.refresh();}AE.anchorOrientation=s;AE.anchorPosition=t;if(g===d&&AE._ifwpdn.style.display==="none"){AE._ifwpdn=document.getElementById(AE._ifwpdn.id);}AC(AE,AE._ifwpdn,r,AE._ifwfl,AE._ifwft);AE.open(this,{anchor:l,boundary:AB});}else{var j={opener:this,anchor:l,anchorOrientation:s,boundary:AB,parent:this,builder:AA,model:this.model,psKey:w,psId:b,id:z,autoCloses:true,locksHover:true,closeOnClick:false,autoCloseLocks:AF,anchorPosition:t};if(g){g=parseInt(g,10);j.placement=g;if(g===d){var k=a.fmts,f=j._ifwfl=k&&k.left&&parseInt(k.left.replace("px",""),10),x=j._ifwft=k&&k.top&&parseInt(k.top.replace("px",""),10),o=h[b]&&h[b].p,u=o&&e.getUnitInstance(o.k,o.wid),q=j._ifwpdn=u&&u.domNode;AC(j,q,r,f,x);}}AE=AA.newInfoWindow(j);this.renderInfoWindow(AE);var AD=this.ifwMap=(this.ifwMap||{});AD[b]=AE;}},renderInfoWindow:function L(a){a.render();},_lockInfoWinContainer:function I(d){var g=this.ifwMap,b=function(h,j){return function(){h.releaseLock(j);};},a;for(a in g){var e=g[a],f=d.xtab;if(e&&f&&G.contains(e.infoNode,f.domNode,true,document.body)){e.registerLock(f);d.onClose=b(e,f);break;}}},unrender:function V(a){X.call(this);this._super(a);S.call(this);},getLayouts:function Q(){return this._layouts;},getLayout:function U(a){a=a||this.model.getCurrentLayoutKey();var b=this.getLayouts();return b[P.find(b,"k",a)];},getSelectedLayoutWidget:mstrmojo.emptyFn,needLoadLayout:function R(a,b){return a.defn&&(b&&b.reload||a.defn.loaded===false||(this.model.zt&&(window.mstrMobileApp!==undefined)&&(a.defn.lastOrientation!==mstrMobileApp.getOrientation())));},getNewLayout:function F(b,h,a,l,d){var g=this,e=g.model,k=b.layoutKey,f=h[P.find(h,"k",k)];if(this.needLoadLayout(f,b)){var j=l.success;l.success=function(o){e.replaceLayout(k,o,false);e.currlaykey=k;if(a){g.selectLayout(f,false,null,d);}var p=g.rebuildLayout(k,h);if(g.controller.getPageByTree){g.controller.getPageByTree(true);}j(p);};this.loadDocLayout(b,l,d);}else{if(a){this.selectLayout(f,true,{success:function(o){T.copyProps(["bs"],o,e);}},d);}if(!f.hasRendered){f=this.rebuildLayout(k,h);if(g.controller.getPageByTree){g.controller.getPageByTree(true);}}l.success(f);}},selectLayout:function E(e,f,h,g){var a=this.model,b=e.k,d=(b!==a.currlaykey);a.currlaykey=b;if(this.controller){this.controller.updateZoom();}this.restoreLayoutState(e);if(f&&d){this.setCurrentDocLayout(b,h,g);}else{if(h&&h.complete){h.complete();}}return e;},rebuildLayout:function C(b,h){var e=this.model,d=P.find,f=h[d(h,"k",b)],a=e.getChildren(this.node,false);var g=a[d(a,"k",b)];if(window.mstrMobileApp!==undefined){g.defn.lastOrientation=mstrMobileApp.getOrientation();}var j=this.replaceLayout(f,g);this.updateXtabStyles(b,e.getSelectedXtabStyles(b));X.call(this);K();return j;},destroy:function Y(){X.call(this);if(this._super){this._super();}S.call(this);},replaceLayout:mstrmojo.emptyFn,restoreLayoutState:mstrmojo.emptyFn,onLayoutRebuilt:mstrmojo.emptyFn,unloadGbLayuts:function H(d){var j=this.getLayouts(),f=this.model.getCurrentLayoutKey(),h,g,l,b,e,a;h=this.getLayout();b=h.gb&&h.gb.groupbys;for(e=0;e<b.length;e++){l=b[e];if(l.k===d){a=l.unit.target.did;break;}}for(g=0;g<j.length;g++){h=j[g];if(h.k===f){continue;}b=h.gb&&h.gb.groupbys;if(b&&b.length){for(e=0;e<b.length;e++){l=b[e];if(l.unit.target.did===a){h.defn.loaded=false;break;}}}}},loadDocLayout:function N(a,d,b){this.model.getDataService().loadDocLayout(a,d,b);},setCurrentDocLayout:function D(a,d,b){this.model.getDataService().setCurrentDocLayout(a,d,b);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var B=mstrmojo.dom,E=100;function I(K,J){return function(L){mstrmojo.all[K][(J?"move":"show")+"Tooltip"](L,self);};}function A(){var K=this.tooltipNode||this.domNode,M=this.id,J,L="_ontooltip"+(this.isDynamicTooltip?"move":"over");if(!this._ontooltipout){this._ontooltipout=function(N){mstrmojo.all[M].hideTooltip(N,self);};}if(!this[L]){this[L]=I(M,this.isDynamicTooltip);}K=[].concat(K);for(J=0;J<K.length;J++){K[J].removeAttribute("title");B.attachEvent(K[J],(this.isDynamicTooltip?"mousemove":"mouseover"),this[L]);B.attachEvent(K[J],"mouseout",this._ontooltipout);}}mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,isDynamicTooltip:false,tooltipNode:null,tooltipOpenDelay:700,hasOpenTooltip:false,postBuildRendering:function(){var J=this._super();if(this.useRichTooltip){A.call(this);}return J;},onuseRichTooltipChange:function H(){if(this.hasRendered){var K=this.tooltipNode||this.domNode,J;if(this.useRichTooltip){A.call(this);}else{if(this._ontooltipout){if(K&&K.constructor!==Array){K=[K];}for(J=0;J<K.length;J++){B.detachEvent(K[J],this.isDynamicTooltip?"mousemove":"mouseover",this["_ontooltip"+(this.isDynamicTooltip?"move":"over")]);B.detachEvent(K[J],"mouseout",this._ontooltipout);}}this.hideTooltip();}}},showTooltip:function G(M,L){var K=this;if(!K.hasOpenTooltip&&(!mstrApp.isInteractive||mstrApp.isInteractive&&mstrApp.isInteractive())){mstrmojo.requiresCls("mstrmojo.tooltip");if(this.updateTooltipConfig){this.updateTooltipConfig(M);}window.clearTimeout(this._tooltipTimeOut);if(mstrmojo.dom.isIE){var N={};for(var J in M){N[J]=M[J];}M=N;}var O=this.richTooltip?this.richTooltip.areaId:undefined;this._tooltipTimeOut=window.setTimeout(function(){if(K._closeTooltipTimeout){window.clearTimeout(K._closeTooltipTimeout);delete K._closeTooltipTimeout;}mstrmojo.tooltip.open(K,M,L);K.tooltip.onmouseover=function(){if(K.richTooltip&&K.richTooltip.enableHover){window.clearTimeout(K._closeTooltipTimeout);window.clearTimeout(K._deactivationTimeout);if(K.tooltip){K.tooltip.onmouseout=function(P){if(!B.contains(this.domNode,P.e.toElement||P.e.relatedTarget)){K.hideTooltip();}};}}};K.hasOpenTooltip=true;K._hasActiveArea=true;K._tooltipAreaId=O;window.clearTimeout(K._deactivationTimeout);delete K._deactivationTimeout;},(this._hasActiveArea&&O&&O===this._tooltipAreaId)?0:this.tooltipOpenDelay);}},moveTooltip:function C(J,L){if(this._tooltipTimeOut){window.clearTimeout(this._tooltipTimeOut);this._tooltipTimeOut=null;mstrmojo.tooltip.close();}var N=this,K=J,M=L;this._tooltipTimeOut=setTimeout(function(){mstrmojo.tooltip.open(N,K,M);},this.tooltipOpenDelay);},hideTooltip:function F(){var J=this;window.clearTimeout(this._tooltipTimeOut);if(this._closeTooltipTimeout){window.clearTimeout(this._closeTooltipTimeout);}if(this._hasActiveArea&&!this._deactivationTimeout){this._deactivationTimeout=window.setTimeout(function(){delete J._deactivationTimeout;delete J._hasActiveArea;delete J._tooltipAreaId;},100);}mstrmojo.requiresCls("mstrmojo.tooltip");if(J.richTooltip&&J.richTooltip.enableHover){this._closeTooltipTimeout=window.setTimeout(function(){mstrmojo.tooltip.close();delete J._closeTooltipTimeout;},E);}else{mstrmojo.tooltip.close();}this.hasOpenTooltip=false;},unrender:function D(M){var N=this.tooltipNode||this.domNode,L;if(N&&N.constructor!==Array){N=[N];}if(N){var O=this._ontooltipover,K=this._ontooltipout,J=this._ontooltipmove;for(L=0;L<N.length;L++){if(O){B.detachEvent(N[L],"mouseover",O);}if(K){B.detachEvent(N[L],"mouseout",K);}if(J){B.detachEvent(N[L],"mousemove",J);}}}this._super(M);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;mstrmojo.ui._IsIncFetchList=mstrmojo.provide("mstrmojo.ui._IsIncFetchList",{_mixinName:"mstrmojo.ui._IsIncFetchList",ifDataHelper:null,supportsIncFetch:false,isFetching:false,initScroll:function A(){var G=this.ifDataHelper,F=this,E=this.scrollNode||this.domNode;this.supportsIncFetch=G&&G.hasNext();if(G&&this.supportsIncFetch){this._scroll=function D(){if(E.offsetHeight+E.scrollTop>=E.scrollHeight){F.raiseEvent({name:"incFetch",id:F.id});}};C.attachEvent(E,"scroll",this._scroll);this.attachEventListener("incFetch",this.id,function(H){if(!this.supportsIncFetch||this.isFetching){return ;}if(this.preNext){this.preNext();}this.set("isFetching",true);G.next({complete:function(I){if(F.postNext){F.postNext();}F.set("isFetching",false);},success:function(I){F.addItems(I.items);},failure:function(I){F.supportsIncFetch=false;mstrmojo.alert("Error in fetching next: "+I);}});});}},addItems:function B(D){if(this._super){this._super(D);}if(!this.ifDataHelper.hasNext()){this.supportsIncFetch=false;var E=this.scrollNode||this.domNode;C.detachEvent(E,"scroll",this._scroll);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,f){var Z=D.getMousePosition(D.firstTouch(b,f),b);D.preventDefault(b,f);if(!this.dragging){var T=5,j=Math.abs;if((this.scrollsHoriz&&j(Z.x-this.pos.x)>T)||(this.scrollsVert&&j(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},g={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=g;this.maxPos={x:Math.max(g.x-Y.x,0),y:Math.max(g.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,f);var d=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(d.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(d.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),h=this.lastDragTime;this.nextLastDragTime=h;this.lastDragTime=U;if((U-h)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),d=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-d.x,y:W.y-d.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),f=T?(new Date())-T:0,V={x:f?Number(b.x*O*F/f).toFixed(2):0,y:f?Number(b.y*O*F/f).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;mstrmojo._FillsBrowser=mstrmojo.provide("mstrmojo._FillsBrowser",{_mixinName:"mstrmojo._FillsBrowser",getBrowserDimensions:function E(G){if(G){return{w:G.innerWidth,h:G.innerHeight};}var F=C.windowDim(),H=(C.isFF||C.isWK)?0:2;return{w:Math.max(F.w,0)+"px",h:Math.max(F.h-H,0)+"px"};},preBuildRendering:function A(){var H=this._super(),G=this.getBrowserDimensions();if(!this.browserResized||this.browserResized(G)!==true){this.height=G.h;this.width=G.w;}if(!this._listenerProc){window._monitor=this;var I=this.id,F=this._listenerProc=function(K){var J=K||window.event;mstrmojo.all[I].monitorWindow(J);};C.attachEvent(window,"resize",F);}return H;},destroy:function B(F){if(this._listenerProc){C.detachEvent(window,"resize",this._listenerProc);}this._super(F);},monitorWindow:function D(F){var I=F.currentTarget,H=this.getBrowserDimensions(),G={w:(I?I.innerWidth+"px":H.w),h:(I?I.innerHeight+"px":H.h)};if((G.h===this.height&&G.w===this.width)||parseInt(G.h,10)<=20||parseInt(G.w,10)<=20){return ;}if(!this.browserResized||this.browserResized(G,true)!==true){if(G.h!==this.height){this.set("height",G.h);}if(G.w!==this.width){this.set("width",G.w);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var B="mstrmojo-floating-toolbar-lightbox";var G="mstrmojo-floating-toolbar";var M="mstrmojo-floating-toolbar-cell";var I="mstrmojo-fixed-toolbar-lightbox";var A="mstrmojo-fixed-toolbar";var N="mstrmojo-fixed-toolbar-cell";var H=" hasToolBar";var E="mstrmojo-Button mstrmojo-InteractiveButton mstrmojo-oivmSprite ";var D="mstrmojo-Button-text";var L=27;mstrmojo._HasToolbar=mstrmojo.provide("mstrmojo._HasToolbar",{_mixinName:"mstrmojo._HasToolbar",postBuildRendering:function C(){this._super();var O=this.getToolbarCfg();if(!O||this.defn.ttl){return ;}var S=this.containerNode;if(S){var Q=this._createToolbar(G,M);Q.className=B;S.className+=H;S.insertBefore(Q,S.firstChild);var P=this.domNode,R=mstrmojo.boxmodel.offset(P,this.parent&&this.parent.domNode);if(R.top<L){Q.style.top=(L-R.top)+"px";}}},_createToolbar:function F(V,a){var S=this.getToolbarCfg(),Y=this,W=document,P=W.createElement("div"),U=W.createElement("table"),X=W.createElement("tr"),R=W.createElement("td");P.appendChild(U);U.className=V;R.className=a;X.appendChild(R);U.appendChild(X);var Z=function(b){Y.onClick(b);},T;for(T in S){var O=W.createElement("div");O.className=E+S[T].css[0];var Q=W.createElement("div");Q.className=D;Q.nodeValue="&nbsp;";Q.setAttribute("ix",T);Q.setAttribute("cix","0");O.appendChild(Q);R.appendChild(O);O.onclick=Z;}return P;},renderToolbar:function K(Q){if(!this.getToolbarCfg()){return ;}var P=Q.firstChild,O=this._createToolbar(A,N);O.className=I;if(P){Q.insertBefore(O,P);}else{Q.appendChild(O);}},onClick:function J(U,P){var V=mstrmojo.dom,O=V.eventTarget(P,U),S=O.getAttribute("cix"),R=O.getAttribute("ix");var Q=this.toolbarCfg[R],T=Q.callback;if(T&&this[T]&&this[T]()){S=++S%Q.css.length;O.parentNode.className=E+Q.css[S];O.setAttribute("cix",S);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var J=mstrmojo.dom;var I=1,C=2;function E(P){var Q=this.defn,R=Q.vc,S=Q.hc;if(!P||P.length===0||(!R&&!S)){return{};}return{v:!!R,h:!!S};}function B(P){return parseInt(this.getFormats()[(P===I)?"height":"width"],10);}function H(Q){var P=this.getFormats()["max-"+((Q===I)?"height":"width")];return P&&parseInt(P,10);}function G(T,S){var Q=this.defn,R=T&&(T.dimNode||T.domNode),P=Q.ck&&Q.ck[T&&(T.k||T.content.k)];if(R&&P&&(P&S)>0){return R;}return null;}function F(Q,T,S,Y){var P=parseInt(S.style[(T===I)?"top":"left"],10)||(Q.fmts&&parseInt(Q.fmts[(T===I)?"top":"left"],10))||0;if(!!Y){return P+Y;}var R=(Q.fmts&&Q.fmts.fx)||{},U=(!J.isIE7&&(R.rt===1||R.rt===3))?((T===I)?C:I):T,W=(U===I)?"Height":"Width";Y=S["offset"+W]+(R.ds||0);if(!J.isDXIE&&((T===I&&R.rt===3)||(T===C&&R.rt===1))){P=P-Y;}var V=P+Y;if(J.isIE7&&W==="Width"&&Q instanceof mstrmojo.XtabBase){var X=Q.contentNode.offsetWidth;if(V<X){V+=X;}}return V;}function L(P,Q,R){if(P>Q){if(R){P=Math.min(P,R);}return P;}return Q;}function D(V,T,U){var P=this.getCanGrowShrinkNode(),R=(V===I)?"Height":"Width",Q=R.toLowerCase(),S=parseInt(P.style[Q],10);if(T&&T!==S&&!(T<S&&!!U)){S=T;P.style[Q]=S+"px";this.afterCanGrowShrink();}this["_fixed"+R]=S;}function A(W,S,U){var V=H.call(this,S),X=B.call(this,S),T=W.length,Q;for(Q=0;Q<T;Q++){var P=W[Q],R=G.call(this,P,S);if(!R){continue;}X=L(F.call(this,P,S,R),X,V);if(X===V){break;}}D.call(this,S,X,U);}function O(U,T,Q,S){var R=G.call(this,U,T);if(!R){return ;}var P=F.call(this,U,T,R,Q);D.call(this,T,L(P,B.call(this,T),H.call(this,T)),S);}mstrmojo._CanGrowOrShrink=mstrmojo.provide("mstrmojo._CanGrowOrShrink",{getCanGrowShrinkNode:function N(){return this.domNode;},performCanGrowCanShrink:function M(Q,R){var P=E.call(this,Q);if(P.v){A.call(this,Q,I,R);}if(P.h){A.call(this,Q,C,R);}},fixedSizeCanGrowShrink:function K(V,P,T,U){var R=E.call(this,V&&[V]);var S=parseInt(P,10),Q=parseInt(T,10);if(R.v&&!isNaN(S)){O.call(this,V,I,S,U);}if(R.h&&!isNaN(Q)){O.call(this,V,C,Q,U);}},afterCanGrowShrink:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array");var H=mstrmojo.array,G=mstrmojo.dom;mstrmojo._IsDocXtab={_mixinName:"mstrmojo._IsDocXtab",isDocXtab:true,formatHandlers:{domNode:["RW","T","font"],msgNode:["height","background-color"],viewport:["D","background-color","B","fx"]},preBuildRendering:function B(){var I=this.getFormats(),L="",K=function K(M){if(I[M]){var N=this[M]||I[M];this[M]=N;if(this.isFullScreenWidget){I[M]=N;}this[M+"Limit"]=parseInt(N,10);}};K.call(this,"height");K.call(this,"width");var J=function(P,O){var M=I[P];if(M&&M.charAt(M.length-1)!=="%"){var N=parseInt(M,10);if(!isNaN(N)){if(O){N-=O;}L+=P+":"+N+"px;";}}return null;};J("height",0);J("width",0);this.scrollboxNodeCssText=L;return this._super();},postBuildRendering:function D(){var J=this._super();var I=this.gridData;if((I.afw||I.afc)&&this.hasCustomScrollbar&&!this.node.data.eg&&this.scrollboxNode.firstChild){this.scrollboxNode.firstChild.style.width=this.getFormats().width;}return J;},resize:function A(){this.clearCache();var K=this.getFormats(),J=parseInt(K.height,10),I=parseInt(K.width,10);if(I>0&&J>0){if(!this.visible&&this.forcedHidden){this.set("visible",true);this.forcedHidden=false;}H.forEach([this.scrollboxNode,this.viewport],function(M){var L=M.style;L.height=J+"px";L.width=I+"px";});if(this.scrollboxNode){this.scrollboxHeightFixed=J&&(J!=="auto");if(this.scrollboxHeightFixed){this.scrollboxHeight=parseInt(J,10);this.scrollboxBottom=this.scrollboxTop+J;}if(this.lockHeadersCase){this.heightLimit=J;this.resizeScrollBox(G.isIE);}}this.delegateGridAction(function(L){if(L&&L.onscroll){L.onscroll();}},"scrollOnResize");if(!(this.gridData&&this.gridData.eg)){this.onGridWidthChanged();}if(this.lockHeadersCase){this._refreshClonedNodes();}}else{if(this.visible){this.set("visible",false);this.forcedHidden=true;}}},renderPortalState:function E(){this.clearCache();this.unrender();this.render();},unrender:function F(I){this.clearCache();if(this._super){this._super(I);}},defaultAction:function C(N,I){if(this._super(N,I)){var M=this.model.sti,L=M&&M.titleId,K=M&&M.deselectCurrent;this._currentSelectedTD=K?undefined:N;if(L){var J=this.zone;this.delegateGridAction(function(P){var O=P.domNode,Q=O&&O.firstChild;if(!J&&Q&&(N.offsetParent===Q||N.offsetParent===O)){J=P;}},"defaultClickAction");if(J){J.clearHilites(L);if(!K){J.setHilites(L,N);}J.hiliteKey=L;this.model.sti=null;}}return true;}return false;}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var G=mstrmojo.dom,H=Math;var D=1,F=2,J=4,E=5,A=6;function B(t){var M=this.anchor;if(!M){return false;}var V=this.baseTipClass,W=this[this.tipNodeName];W.className=V+" top";var j=this[this.boundaryNodeName],z=this[this.popupNodeName],g=this.anchorOffset,w=this.anchorOrientation,s=this.hasScrollbars(),d=mstrmojo.hash.copy(this.anchorPosition||G.position(M,true)),P=G.position(j,true),AD=P.w,N=P.h,k=z.offsetWidth,R=z.offsetHeight,Z=k/2,K=R/2,b=G.position(W),q=H.min(b.h,b.w),T=H.max(b.h,b.w)/2,o=parseInt(this.placement,10);if(t){d=G.position(M,true);}if(s){AD-=15;N-=15;}var e=G.contains(j,z),r=e?0:P.y,AC=AD/2-Z,U=N/2-K+r,x=-1000,AE=-1000,O,p=["borderBottomColor","borderTopColor","borderRightColor","borderLeftColor"],AF=0;if(e){d.x=d.x-P.x;d.y=d.y-P.y;}var l=d.y+d.h,Q=d.x+d.w,AA=((Q+k)<AD),X=d.y>R,u=((l+R)<N),a=function(AG,AI,AH){return H.min(H.max(AG,AH),H.max(AI,0));},S=function(){if((d.x<AD)&&(u||X)){var AG=d.x+(d.w/2),AH=(o===J&&u)||!X;if(AH){O="top";AE=l;AF=0;U=l+q-g;}else{O="bottom";AE=d.y-q;AF=1;U=AE-R+g;}AC=a(0,AD-k,AG-Z);x=a(d.x,Q,AG)-T;return true;}return false;},h=function(){if((d.y<N)&&(AA||d.x>k)){var AG=d.y+(d.h/2),AH=!(o===E&&d.x>k)&&AA;if(AH){O="left";x=Q;AF=2;AC=Q+q-g;}else{O="right";x=d.x-q;AF=3;AC=x-k+g;}U=a(r,N-R,AG-K);AE=a(d.y,l,AG)-T;return true;}return false;},Y=[S,h],AB=0;if(o===F){U=this.popPosition.top;AC=this.popPosition.left;AE=-1000;x=-1000;O=null;}else{if(o===E||o===A||(o===D&&w==="h")){Y.reverse();}for(AB;AB<2;AB++){if(Y[AB]()){break;}}U=H.round(U);AC=H.round(AC);AE=H.round(AE);x=H.round(x);}W.className=V+" "+(O||"hidden");var f=W.style,L=z.style;f.top=AE+"px";f.left=x+"px";if(this.tipNodeColor){mstrmojo.array.forEach(p,function(AG){f[AG]="";});f[p[AF]]=this.tipNodeColor;}L.top=U+"px";L.left=AC+"px";return true;}mstrmojo._IsAnchorable={anchor:null,anchorPosition:null,boundaryNodeName:"curtainNode",popupNodeName:"editorNode",tipNodeName:"tipNode",baseTipClass:"mstrmojo-Editor-tip",anchorOffset:25,anchorOrientation:"v",placement:D,popPosition:null,hasScrollbars:function C(){return(!mstrApp.isTouchApp||!mstrApp.isTouchApp());},prepareAnchor:mstrmojo.emptyFn,positionDialog:function I(K){this.prepareAnchor();if(!B.apply(this,[K])){if(typeof this._super==="function"){this._super();}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var E=mstrmojo.dom;var P=mstrmojo.dom;var O="mousedown";function S(U){var T=U[U.hotSlot||"domNode"];if(T){if(!U._closeCallback){var W=U.id,V=function(X){return function(Z){var Y=mstrmojo.all[W];if(Y&&!Y.ignoreHover){Y["auto"+X](Z,self);}};};U._uncloseCallback=V("Unclose");U._closeCallback=V("Close");}E.attachEvent(T,"mouseover",U._uncloseCallback);E.attachEvent(T,"mouseout",U._closeCallback);}}function B(U){if(U._closeCallback){var T=U[U.hotSlot||"domNode"];if(T){E.detachEvent(T,"mouseover",U._uncloseCallback);E.detachEvent(T,"mouseout",U._closeCallback);}}}function F(V,U){var T=V;while(T){if(T.open||T.openPopup){if(T.set){T.set("ignoreHover",U);}else{T.ignoreHover=U;}}T=T.opener||T.parent;if(T&&T.shouldPropagateLockHover&&!T.shouldPropagateLockHover()){break;}}}function D(){var T=this._lockHoverCallback;if(T){E.detachEvent(document.body,O,T,true);delete this._lockHoverCallback;}}mstrmojo._CanAutoClose=mstrmojo.provide("mstrmojo._CanAutoClose",{autoCloses:false,autoCloseDelay:100,locksHover:false,hotSlot:null,closeOnClick:false,curtainNode:null,postBuildRendering:function Q(){this._super();if(this.autoCloses){S(this);}this.oncloseOnClickChange();},onautoClosesChange:function L(){var T=(this.autoCloses)?S:B;T(this);},oncloseOnClickChange:function H(){if(!this.curtainNode){return ;}var V=this,U="click",T=(mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp());if(T){U="touchstart";}E.attachEvent(V.curtainNode,U,function(){V.close();if(T){mstrmojo.touchManager.notify([]);}});},autoUnclose:function G(){var T=this._autoCloseTimer;if(T){self.clearTimeout(T);delete this._autoCloseTimer;}},autoClose:function J(){if(this.ignoreHover){return ;}if(this._autoCloseTimer){self.clearTimeout(this._autoCloseTimer);}if(this.opener){if(this.autoCloseDelay){var T=this.opener.id;this._autoCloseTimer=self.setTimeout(function(){mstrmojo.all[T].closePopup();},this.autoCloseDelay);}else{this.opener.closePopup();}}},destroy:function R(T){D.call(this);this._super(T);},lockHover:function N(){F(this,true);if(!this._lockHoverCallback){var U=this.id,T=this._lockHoverCallback=function(V){mstrmojo.all[U]._unlockHoverCheck(V,self);};if((E.isIE7||E.isIE8)&&window.event&&(window.event.type===O)&&this.opener){this.opener._ignoreMousedown=true;}E.attachEvent(document.body,O,T,true);}},unlockHover:function M(){F(this,false);D.call(this);},_unlockHoverCheck:function C(X,T){var U=this.opener;if(U&&U._ignoreMousedown){delete U._ignoreMousedown;return ;}var W=E.eventTarget(T,X);if(!P.contains(this.domNode,W,true,document.body)){var V=P.findWidget(W);while(V){if(V===this){return ;}V=V.parent||V.opener;}if(U&&U.onPopupAutoClosed){U.onPopupAutoClosed(X,T);}this.close();}},open:function I(U,T){if(this.autoCloses){this.autoUnclose();}this._super(U,T);if(this.locksHover){this.lockHover();}},close:function K(T){if(this.locksHover){this.unlockHover();}this._super(T);},shouldPropagateLockHover:function A(){return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",P="mousemove",R="mouseup";function G(Y){if(E.isPrimaryMouseBtn(Y)){B.startDragCheck(self,Y);}}var V,Q,A="mstrmojo-dnd-avatar",U;function F(Z,Y){if(Y!==undefined&&Y!==null){Q.innerHTML=Y;}U.left=Z.x+"px";U.top=Z.y+"px";}function L(Z,Y){if(!V){V=I.createElement("div");U=V.style;V.className=A;V.innerHTML='<div class="'+A+'-inner"></div>';Q=V.firstChild;I.body.appendChild(V);}F(Z,Y);U.display="block";}function S(){if(U){U.display="none";}}function H(Y){var Z=++B.ctxt.moveCount;if(Z>=B.minMoves){B.stopDragCheck();if((Y.buttons===1||Y.buttons===undefined||E.isIE9)&&(Y.which===1||Y.button===0||E.isIE8)){B.startDrag(self,Y);}}}function O(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDragCheck();delete B.ctxt;}}function D(Y){B.onDragMove(self,Y);}function C(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDrag(window,Y);}}function N(b){var Z=mstrmojo.hash.copy(b,{}),a=Z.hWin=Z.hWin||window,Y=Z.e=Z.e||a.event;Z.node=E.eventTarget(a,Y);Z.pos=E.getMousePosition(Y,a);return Z;}function J(Z){var Y=E.findWidget(Z);while(Y){if(Y.draggable){return Y;}Y=Y.parent;}return null;}function T(Y){var a=Y.src,Z=J(a.node);if(!Z){return null;}if(Z.getDragAction){Y.action=Z.getDragAction(Y);}a.widget=Z;a.data=Z.getDragData&&Z.getDragData(Y);if(Z.isDragValid){if(!Z.isDragValid(Y)){if(!Z.shouldDragBubble||Z.shouldDragBubble(Y)!==true){Y.src.node=Z.domNode.parentNode;return T(Y);}return null;}}if(Z.ondragstart){Z.ondragstart(Y);}return Z;}function X(a,Z){var Y=E.findWidget(a),b=Z.tgt&&Z.tgt.widget;while(Y){if(Y.dropZone){if(Y===b){return Y;}if(Y.allowDrop&&Y.allowDrop(Z)){return Y;}}Y=Y.parent;}return null;}function W(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(Y,Z){delete this.ctxt;var a=N({hWin:Y,e:Z});this.ctxt={src:a,moveCount:0,last:M.copy(a.pos),getDirection:function(b){return !!this.dir[b];},getCtxtDragData:function(){var b=this.src;return(b&&b.data)||{};},getCtxtDropData:function(){var b=this.tgt;return(b&&b.data)||{};}};if(this.minMoves){E.attachEvent(I,P,H);E.attachEvent(I,R,O);}else{this.startDrag(Y,Z);}},stopDragCheck:function(){E.detachEvent(I,P,H);E.detachEvent(I,R,O);},startDrag:function(Y,b){var Z=this.ctxt;Z.id=mstrmojo.now();var a=T(Z);if(!a){return ;}E.clearBrowserHighlights(Y);E.preventDefault(self,b);E.attachEvent(I,P,D);E.attachEvent(I,R,C);var f=window.mstrApp;if(f&&f.setInteractive){this._changeAppStatus=f.setInteractive(false);}if(!a.ownAvatar){var d=Z.src;L(d.pos,d.data&&d.data.html);}},stopDrag:function(Y,g){E.detachEvent(I,P,D);E.detachEvent(I,R,C);var b=this.ctxt,a=b.tgt||{},Z=N({hWin:Y,e:g,data:a.data}),f=X(Z.node,b);Z.widget=f;b.tgt=Z;if(f){if(f.ondrop){f.ondrop(b);}else{W.call(f);}}var d=b.src.widget;if(d&&d.ondragend){d.ondragend(b);}if(d&&!d.ownAvatar){S();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(d,g){if(E.isSafari){E.clearBrowserHighlights();}var Y=this.ctxt,b=Y.tgt||{},Z=b.widget,f=N({hWin:d,e:g,data:b.data}),k=f.widget=X(f.node,Y),j=Y.last,a=f.pos;Y.dir={x:a.x>j.x,y:a.y>j.y};Y.last=M.copy(f.pos);Y.tgt=f;if(Z!==k){if(Z){if(Z.ondragleave){Z.ondragleave(Y);}else{W.call(Z);}}if(k){Y.tgt.data=(k.getDropData&&k.getDropData(Y))||{};if(k.ondragenter){k.ondragenter(Y);}else{if(k.set){k.set("allowingDrop",true);}}}}if(k){if(k.ondragover){k.ondragover(Y);}}var h=Y.src.widget;if(h&&h.ondragmove){h.ondragmove(Y);}if(h&&!h.ownAvatar){F(f.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(W){mstrmojo.hash.copy(W,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var W=this;this.delayTimer=window.setTimeout(function(){W._start();W=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function U(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var W=this.ease;if(typeof W==="string"){this.ease=mstrmojo.registry.ref(W);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var X=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function Y(){if(X){X.exec();X.counter++;if(X.counter>=X.steps){X._end();X=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function T(){if(this.getTarget){this.target=this.getTarget();}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var X=this.target;if(X&&this.slot&&X.scriptClass){var Y=X[this.slot];if(Y){this.widget=X;this.target=Y;}}}}}if(!this.target){var W=this;while(W=W.parent){if(!W||W.domNode){break;}}if(W){this.widget=W;this.target=W[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(Z,a){var X=Z.children,W=(X&&X.length)||0,Y;for(Y=0;Y<W;Y++){X[Y][a]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(Z){this._super(Z);var Y=this.children;mstrmojo.registry.refArray(Y);var W=(Y&&Y.length)||0,X;for(X=0;X<W;X++){Y[X].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function U(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var Y=this.props,Z;for(Z in Y){var X=Y[Z],W=X.ease;if(typeof W==="string"){X.ease=mstrmojo.registry.ref(W,{dontInst:true});}}this._super();},exec:function P(){var Z=this.props,a;for(a in Z){var X=Z[a],W=(X.ease||mstrmojo.ease.sin)(this.counter,X.start,X.stop-X.start,this.steps-1);if(X.fn){W=X.fn(W);}if(X.suffix){W+=X.suffix;}var Y=X.isStyle===false?this.target:this.target.style;Y[a]=W;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var a=this.srcProp,Y;if(a){var W=this.widget||this.parent;Y=W&&W[a];if((Y!=null)&&(typeof (Y)!=="string")){Y=String(Y);}}this.stop=Y;this._dynStop=true;}if(this.stop==null){this.stop="";}var Z=this.target,b=null,X=1;if(Z){Z.innerHTML="";b=document.createTextNode("");Z.appendChild(b);X=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=b;this.charGroupSize=X;},exec:function(){var X=this.targetTextNode;if(!X){return ;}var W;if(this.counter>=this.steps-1){W=this.stop;}else{if(this.counter===0){W="";}else{W=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}X.nodeValue=W;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function U(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(W){if(W==null){W=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(W*100,10)+")";}else{this.target.style.opacity=W;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function U(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function V(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(Y,X,Z){var W=Math.pow(10,Z||2);if(X){return parseInt(W*Y/X,10)/W;}return parseInt(W*Y,10)/W;}mstrmojo.ease={linear:function L(X,W,Z,Y){if(X===Y){return W+Z;}if(X===0){return W;}return W+Z*I(X,Y);},sin:function A(X,W,Z,Y){return W+Z*Math.sin((Math.PI/2)*X/Y);},cos:function B(X,W,Z,Y){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},sincos:function K(X,W,Z,Y){if(X>Y/2){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}return W+Z*Math.sin((Math.PI/2)*X/Y);},cossin:function Q(X,W,Z,Y){if(X>Y/2){return W+Z*Math.sin((Math.PI/2)*X/Y);}return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},bounce:function G(X,W,Z,Y){if((X/=Y)<(1/2.75)){return Z*(7.5625*X*X)+W;}if(X<(2/2.75)){return Z*(7.5625*(X-=(1.5/2.75))*X+0.75)+W;}if(X<(2.5/2.75)){return Z*(7.5625*(X-=(2.25/2.75))*X+0.9375)+W;}return Z*(7.5625*(X-=(2.625/2.75))*X+0.984375)+W;},shake:function J(X,W,Z,Y){if(X<Y/2){return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*X/Y;}return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*(1-X/Y);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var J=mstrmojo.dom;var Y=5;var l=1;var V=2;var N=4;var k=0;var O=true;var I=0;var F=86400000;mstrmojo.VisChartUtils=mstrmojo.provide("mstrmojo.VisChartUtils",{getScreenZoomFactor:function Z(){if(I==0){if(mstrMobileApp){var r=mstrMobileApp.getDeviceDPI();console.log("dpi:"+r);I=r/160;}else{I=1;}}return I;},changeElementSize:function a(u,AA,z){if(AA=="fontSize"||AA=="height"||AA=="line-height"){var x=mstrmojo.css.getStyleValue(u,AA);var t=Math.round(z*parseInt(x));u.style[AA]=t+"px";}else{if(AA=="font"){var w=mstrmojo.css.getStyleValue(u,"fontSize");var t=Math.round(z*parseInt(w));var s=mstrmojo.css.getStyleValue(u,"fontWeight");var r=mstrmojo.css.getStyleValue(u,"fontFamily");u.style.font=s+" "+t+"px "+r;}}},rgbaStr2rgba:function L(r){var t=null;r=r.replace(/ /g,"");var s=r.indexOf("rgba");if(s>=0){r=r.substring(s+5,r.length-1);t=r.split(",");}return t;},fillBackground:function b(u,r,AE,s,x){var w=s||u.context,t=r||u.canvas.width,AB=AE||u.canvas.height,AC=u.themeColor||"#000000",AA=null,AD=x||1;if(!w){w=u.canvas.getContext("2d");if(!w){return ;}}w.save();if(u.noBackground){}else{if(!u.isAndroid&&!u.isTimeSeries){AA=w.createLinearGradient(0,0,0,AB/2);w.fillStyle=AC;w.fillRect(0,0,t,AB);w.globalAlpha=0.4;AA.addColorStop(0,"#fff");AA.addColorStop(0.1,"#fff");AA.addColorStop(1,AC);w.fillStyle=AA;w.rect(0,0,t,AB/2);w.fill();w.globalAlpha=0.1;w.fillStyle="#fff";w.fillRect(0,0,t,AB/2);}else{if(u.isTimeSeries){var z=u.formatProp;AA=w.createLinearGradient(0,0,0,AB);w.globalAlpha=z.backgroundAlpha;w.fillStyle=this.rgb2rgbStr(z.backgroundClr)||"#000000";w.rect(0,0,t,AB);w.fill();}else{w.globalAlpha=AD;w.fillStyle=AC;w.fillRect(0,0,t,AB);}}}w.restore();},rgb2rgbStr:function W(s,t){var r="";if(!s||s.length!=3){return r;}if(t||t==0){r="rgba("+s[0]+","+s[1]+","+s[2]+","+t+")";}else{r="rgb("+s[0]+","+s[1]+","+s[2]+")";}return r;},getRGBWithOpacity:function R(s,r,t){if(isNaN(r)){return ;}if(!t){t=[255,255,255];}var u=[];for(color in s){u[color]=parseInt(s[color]*(1-r)+t[color]*r);}return u;},fillMasterChartBackground:function S(AA,s,r,u,AG,z,w){var AB=w||AA.context,x=u||AA.canvas.width,AE=AG||AA.canvas.height,AF=AA.themeColor,AD=null;var AC=AA.formatProp;AB.save();AB.globalAlpha=AC.backgroundAlpha;AB.fillStyle=this.rgb2rgbStr(AC.backgroundClr)||"#000000";AB.fillRect(0,0,x,r+AG+z);AB.globalAlpha=1;AB.strokeStyle=this.rgb2rgbStr(AA.formatProp.textClr,0.5);AB.lineWidth=1;var t=r+0.5;this.drawLineSet(this,[{x:s,y:t},{x:s+x,y:t}],false,AB);t=r+AE-0.5;this.drawLineSet(this,[{x:s,y:t},{x:s+x,y:t}],false,AB);AB.restore();},drawLineSetWithSplit:function(x,AC,AB,s,z){var t=AC.length,AA=Math.ceil(t/z),r,u;for(var w=0;w<AA;w++){r=w*z;u=Math.min(r+z+1,t);this.drawLineSet(x,AC.slice(r,u),AB,s);}},drawLineSet:function M(w,AD,AC,r){var x=null,t=AD.length,AB=null;if(r){x=r;}else{x=w.context;}var z=null,s=false;x.beginPath();var u=0;while(u<t){if(AD[u]){x.moveTo(AD[u].x,AD[u].y);z=AD[u];s=true;u++;break;}u++;}var AA=false;for(;u<t;u++){AB=AD[u];if(AB){if(!AA){x.lineTo(AB.x,AB.y);s=false;}else{x.moveTo(AB.x,AB.y);s=true;z=AB;AA=false;}}else{if(!AA){AA=true;if(s){x.arc(z.x,z.y,1,0,Math.PI*2,false);}}}}if(AC){x.closePath();x.fill();}else{x.stroke();}},getMinYPosition:function H(s,w,r){var u=w,t;while(u<=r){if(s[u]){t=s[u].y;break;}u++;}for(u=w;u<=r;u++){if(s[u]){t=Math.min(t,s[u].y);}}return t;},drawLineAreaWithSplit:function(z,AF,r,w,u,AA,s,AB){var t=w-r+1,AD=Math.ceil(t/AB),AE,AC;for(var x=0;x<AD;x++){AE=r+x*AB;AC=Math.min(AE+AB,r+t-1);this.drawLineArea(z,AF,AE,AC,u,AA,s);}},drawLineArea:function M(x,r,AB,w,AA,AF,t){var AE=null,AI=r.length,AD=null,AJ=0,AC=0;if(t){AE=t;}else{AE=x.context;}var u=null,AH=false;AE.save();AE.lineWidth=0;AE.beginPath();var AK=AB,z;while(AK<=w){if(r[AK]){AJ=r[AK].x;AE.moveTo(AJ,AA);u=r[AK];AH=true;break;}AK++;}z=AK;var AG=false;for(;AK<=w;AK++){AD=r[AK];if(AD){if(!AG){AE.lineTo(AD.x,AD.y);AH=false;AC=AD.x;}else{AJ=AD.x;AE.moveTo(AJ,AA);if(AK+1<=w&&r[AK+1]){AE.lineTo(AD.x,AD.y);}u=AD;AG=false;z=AK;}}else{if(!AG){AG=true;if(!AH){AE.lineTo(AC,AA);AE.lineTo(AJ,AA);var s=this.getMinYPosition(r,z,AK)||0;AE.fillStyle=this.rgb2rgbStr(AF,1);AE.globalAlpha=0.65;AE.fill();}}}}if(!AH){AE.lineTo(AC,AA);AE.lineTo(AJ,AA);var s=this.getMinYPosition(r,z,w)||0;AE.closePath();AE.fillStyle=this.rgb2rgbStr(AF,1);AE.globalAlpha=0.65;AE.fill();}AE.restore();},drawRectangle:function o(AA,r,AC,t,z,AB,u){var s=null;if(u){s=u;}else{s=AA.context;}if(AB){s.fillRect(r,AC,t,z);}else{s.strokeRect(r,AC,t,z);}},drawArc:function Q(u,AC,AB,z,AA,s,t,AD,r){var w=null;if(r){w=r;}else{w=u.context;}w.beginPath();w.arc(AC,AB,z,AA,s,t);if(AD){w.fill();}else{w.stroke();}},drawRoundRect:function K(u,s,AC,t,z,AA,AB){AA=Math.min(t/2,z/2,AA);u.beginPath();u.moveTo(s+AA,AC);u.arcTo(s+t,AC,s+t,AC+z,AA);u.arcTo(s+t,AC+z,s,AC+z,AA);u.arcTo(s,AC+z,s,AC,AA);u.arcTo(s,AC,s+t,AC,AA);u.closePath();if(AB){u.fill();}else{u.stroke();}},drawHalfRoundedRectangle:function q(u,AC,AB,AD,z,s,AE,t){var AA=null;if(t){AA=t;}else{AA=u.context;}AA.beginPath();AA.moveTo(AC+AD,AB);AA.lineTo(AC+s,AB);AA.arcTo(AC,AB,AC,AB+s,s);AA.lineTo(AC,AB+z-s);AA.arcTo(AC,AB+z,AC+s,AB+z,s);AA.lineTo(AC+AD,AB+z);if(AE){AA.fill();}else{AA.stroke();}},drawStartEndPoints:function X(AB,AH,u,x){var w=AH.length;var AC=null,t=AB.startEndPointRadius;if(u){AC=u;}else{AC=AB.context;}AC.save();var AE="#f0f43e",AD="#f0f43e",AF="#663300";if(AB.startPointColor){AE=AB.startPointColor;}if(AB.endPointColor){AD=AB.endPointColor;}else{var AG=AH[0].y,AA=AH[w-1].y;if(AG>AA){AD="#008000";}else{if(AG<AA){AD="#8d1616";}else{AD=AE;}}}if(AB.otherPointColor){AF=AB.otherPointColor;}if(x&l&&AH[0]){AC.strokeStyle=AE;AC.fillStyle=AE;this.drawArc(this,AH[0].x,AH[0].y,t,0,Math.PI*2,true,true,AC);}if(x&V&&AH[w-1]){AC.strokeStyle=AD;AC.fillStyle=AD;this.drawArc(this,AH[w-1].x,AH[w-1].y,t,0,Math.PI*2,true,true,AC);}if(x&N){AC.strokeStyle=AF;AC.fillStyle=AF;for(var z=1;z<w-1;z++){if(AH[z]){this.drawArc(this,AH[z].x,AH[z].y,t,0,Math.PI*2,true,true,AC);}}}AC.restore();},getColor:function T(r){return(parseInt(r.themeColor.substr(1),16)>8388607)?"#000000":"#ffffff";},drawHighlightLine:function e(s,z){var r=s.context,x=s.margin,u=x.l,t=s.isTimeSeries?s.chartWidth+x.l:s.getWidth()-x.r;r.save();r.globalAlpha=1;r.strokeStyle=this.rgb2rgbStr(s.formatProp.textClr,0.35);r.lineWidth=1;r.lineCap="round";while(u<t){r.beginPath();r.moveTo(u,z);u+=2;r.lineTo(u,z);r.stroke();u+=3;}r.restore();},addLabel:function p(AJ,AK,AI,AG,s,AC,AD){var AF=document.createElement("div");AF.className="mstrmojo-Chart-lbl";AF.style.color=this.rgb2rgbStr(AJ.formatProp.textClr,0.8);AF.innerHTML=AK;if(s){AF.style.width=s+"px";}var z=null;var AE=0;if(AJ.isTimeSeries){if(AD.w>=0){z=AJ.xdiv;AE=AJ.animationCanvas.width;}else{z=AJ.domNode.getElementsByClassName("mstrmojo-chart-ylbl-div")[0];if(!z){z=document.createElement("div");z.id="mstrmojo-chart-ylbl-div";z.className="mstrmojo-chart-ylbl-div";AJ.domNode.appendChild(z);}z.style.width=AJ.margin.l-1+"px";}}else{z=AJ.domNode;AE=AJ.getWidth();}z.appendChild(AF);var u=AF.offsetWidth||(AJ.getTextWidth&&AJ.getTextWidthByElem(AK,AF));var AH=AF.offsetHeight||22*(I||1);var t=s||u||100;var AB=AJ.xLabelPadding/2;var AA=AJ.yLabelPadding/2;if(AD.w>=0&&AJ.isTimeSeries&&AJ._scroller.origin){var AL=AI-AJ._scroller.origin.x;if(AL<=0&&(AL+u/2>-AJ.maxYLblWidth)){AJ.needRedrawVerticalLine=true;z.removeChild(AF);return null;}var r=AL-AJ.getChartWidthOnScreen();if((r-u/2)<=0&&r>=0){AJ.needRedrawVerticalLine=true;z.removeChild(AF);return null;}}if(AD.w>=0){AI=AI-t/2;}if(AD.h>=0&&((AG>=AD.y-AA&&AG<=AD.y+AD.h)||(AG+AH>=AD.y-AA&&AG+AH<=AD.y+AD.h)||(AG+AH>=AJ.canvas.height-AJ.margin.b))){z.removeChild(AF);return null;}if(AD.w>=0&&(((AI>=AD.x&&AI<AD.x+AD.w+AB))||AI<AD.x||AI<AJ.margin.l||AI+t>AE)){z.removeChild(AF);return null;}if(AJ.isTimeSeries&&AD.h>=0){z.style.top=(AJ.margin.t-AH/2)+"px";z.style.height=(AJ.canvas.height-AJ.margin.t-AJ.margin.b-1+AH/2)+"px";this.translateCSS(AI,(AG-AJ.margin.t)+AH/2,AC,AF);}else{this.translateCSS(AI,AG,AC,AF);AF.style.maxHeight=AH+"px";}AD.x=AI;AD.y=AG;if(AD.h>=0){AD.h=AH;}if(AD.w>=0){AD.w=t;AF.style.textAlign="center";}return AF;},addDataLabel:function p(s,u,z,t){var r=(s.margin.l>s.margin.r)?Y:s.getWidth()-s.margin.r+Y,x=(s.margin.l>s.margin.r)?s.margin.l:s.margin.r;return this.addLabel(s,u,r,z-10,x-Y*2,false,t);},translateCSS:function g(r,w,s,u){var t="translate("+r+"px,"+w+"px)";if(s){t+=" rotate(45deg)";}u.style[J.CSS3_TRANSFORM]=t;},getTouchXYOnWidget:function B(s,r,w){var u=mstrmojo.TouchScroller,t=(u&&w.parent&&u.getScrollPositionTotals(w.parent))||{x:0,y:0};s=s-w.offsetLeft+t.x;r=r-w.offsetTop+t.y;return{touchX:s,touchY:r};},getYValue:function A(w,s){var r=w.canvas.height,u=w.margin,t=w.model.mvalues;return r-u.b-4-((parseFloat(s)-t[0])*w.RTY);},getMasterYValue:function f(u,s,w){var r=u.masterCanvas.height,t=u.model.mvalues;return r-w.b-3-((parseFloat(s)-t[0])*u.MRTY);},getSeriesIndexAndYValue:function C(AC,r,AD){var AE=AC.model.series,x=AE.length,AA=0;y=this.getYValue(AC,AE[AA].rv[r])||0;var AB=AD-y<0?-(AD-y):AD-y,t=AB;for(var z=1;z<x;z++){var u=this.getYValue(AC,AE[z].rv[r])||0;AB=AD-u<0?-(AD-u):AD-u;if(AB<t){y=u;t=AB;AA=z;}}return{y:y,si:AA};},getLabelWidthForMargin:function j(r,u){var t=document.createElement("div");t.className="mstrmojo-Chart-lbl";t.innerHTML=u;r.domNode.appendChild(t);var s=t.offsetWidth||60;r.domNode.removeChild(t);return s+Y*2;},animateLineSet:function U(AE,t,AC,AA){var AF=[],AD=AE.animationContext,u=AC.length;AD.clearRect(0,0,AE.getWidth(),AE.canvas.height);if(!AA.index){AA.index=0;}else{if(AA.index>=AA.rate){this.drawLineSet(AE,AC,false,AD);AE.drawLabels();if(AE.isFillLinesArea){this.fillLinesArea(AE,AC.slice(0));}if(AE.isDrawStartEndPoints){this.drawStartEndPoints(AE,AC,AD,AE.isDrawStartEndPoints);}return ;}}for(var z=0;z<u;z++){var s=AC[z],r=t[z];AF[z]={x:(AA.index*(s.x-r.x)/AA.rate)+r.x,y:(AA.index*(s.y-r.y)/AA.rate)+r.y};}this.drawLineSet(AE,AF,false,AD);var AB=this;AA.index++;window.setTimeout(function(){AB.animateLineSet(AE,t,AC,AA);},40);},fillLinesArea:function G(s,x){var t=s.canvas.height;x.push({x:s.getWidth()-s.margin.r,y:t-s.margin.b});x.push({x:s.margin.l,y:t-s.margin.b});var z=new Array();if(s.fillinColor){mstrmojo.requiresCls("mstrmojo.color");var u=mstrmojo.color.hex2rgb(s.fillinColor).join(",");z[0]="rgba("+u+", 0.8)";z[1]="rgba("+u+", 0.2)";}else{z=["rgba(255,128,0,0.8)","rgba(255,128,0,0.2)"];}var r=s.animationContext;var u=r.createLinearGradient(0,0,0,t);u.addColorStop(0,z[0]);u.addColorStop(0.75,z[1]);r.fillStyle=u;this.drawLineSet(s,x,true,r);},convertRawValueToMilliseconds:function h(t){var u=Number(t),r=u-((Date.UTC(1970,1,1)-Date.UTC(1899,12,30))/F)-k,s=new Date(r*F);return new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()).getTime();},getAncestorBgColor:function D(t){var z=null,x=t,AD=x.modelData?x.modelData:x.model,AC=null;if(x.hasOwnProperty("xtabModel")&&x.xtabModel.hasOwnProperty("docModel")){AC=x.xtabModel.docModel;}if(AC&&AC.defn&&AC.defn.layouts&&AC.defn.layouts.length>0){var AB=AC.defn.layouts,u;var s;for(s in AB){if(AB[s].loaded){u=AB[s];}}if(u&&u.hasOwnProperty("units")){var w=u.units;var AA=AD.parent;while(AA){var r=AA.k||null;if(w[r]&&w[r].fmts&&w[r].fmts["background-color"]){z=w[r].fmts["background-color"];break;}else{AA=AA.parent||null;}}if(!z){if(u.fmts&&u.fmts["background-color"]){z=u.fmts["background-color"];}}}}return z;},isLightColor:function d(x){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,z,s,AA,AD,AC,w=false;if(x){var AE,AB;if(/^(rgba|RGBA)/.test(x)){AB=x.replace(/rgba\(|RGBA\(/,"");AB=AB.replace(")","");AE=AB.split(",");s=AE[0];AA=AE[1];AD=AE[2];}else{if(/^(rgb|RGB)/.test(x)){AB=x.replace(/rgb\(|RGB\(/,"");AB=AB.replace(")","");AE=AB.split(",");s=AE[0];AA=AE[1];AD=AE[2];}else{if(t.test(x)){if(x.length===4){AE="#";for(z=1;z<4;z++){AE+=x.slice(z,z+1).concat(x.slice(z,z+1));}x=AE;}var u=[];for(z=1;z<7;z+=2){u.push(parseInt("0x"+x.slice(z,z+2)));}s=u[0];AA=u[1];AD=u[2];}}}AC=(s*299+AA*587+AD*114)/1000;if(AC>150){w=true;}}return w;},getPointDistanceSquare:function E(s,r){return(s.x-r.x)*(s.x-r.x)+(s.y-r.y)*(s.y-r.y);},truncateTextToLine:function(s,AE,AI){AE.className=s.className;AE.style.whiteSpace="nowrap";var z=AE.innerHTML=s.innerHTML;var u=parseInt(s.offsetWidth)-parseInt(s.style.width);var AG=AI*parseInt(s.style.width)+u;var w=z;if(AE.offsetWidth>AG){var AA=0,t=z.length-1;while(AA<=t){var AD=Math.round((AA+t)/2);var AH=z.substr(0,AD+1);var AF=z.substr(0,AD+2);AE.innerHTML=AH;var AC=AE.offsetWidth;AE.innerHTML=AF;var x=AE.offsetWidth;if(AC<=AG&&x>AG){break;}else{if(AC>AG){t=AD-1;}else{if(x<=AG){AA=AD+1;}}}}w=z.substr(0,AD+1);if(w.length<z.length){if(w.charAt(w.length-1)===" "){w=w.substr(0,w.length-1);}var AB=w.lastIndexOf(" ");var r=w.length-1-AB;if(r>=2&&r<=8){w=w.substr(0,w.length-r-1)+"...";}else{w=w.substr(0,w.length-3)+"...";}}}s.innerHTML=w;},getLen:function(u,t,s,r){t.innerHTML=u;var w=t.offsetWidth+s-r;return w;},splitWordIfTooLong:function(w,AH,AE,AA,AC){var AG=w.split(" ");var AB=[];var AD=AG.length;var x=0;var u=0;for(x=0;x<AD;x++){var s=AG[x];while(true){var AI=this.getLen(s,AH,AC,AA);if(AI>AE){var AF=(AE/AI)*s.length;var r=Math.round(AF);while(r>0){var z=s.substr(0,r);var t=this.getLen(z,AH,AC,AA);if(t<=AE){AB.push(z);break;}else{r--;}}s=s.substr(r,s.length-r);}else{AB.push(s);break;}}}return AB.join(" ");},truncateTextToLineWithWordWrap:function(AR,AN,AK){AN.className=AR.className;AN.style.whiteSpace="nowrap";var AJ=7;var AB=-1;if(AR.style&&AR.style.width&&AR.style.width.length>0){AB=parseFloat(AR.style.width);}if(AB<0){AB=parseFloat(mstrmojo.css.getComputedStyle(AR).width);}var AL=AR.innerHTML;var AQ=parseFloat(AR.offsetWidth)-AB;AL=this.splitWordIfTooLong(AL,AN,AB,AQ,AJ);var AD=AL.split(" ");var w=[];var AG=[];var AP=0;var r=0;var AI=AD.length;AN.innerHTML="&nbsp;";var AS=AN.offsetWidth-AQ;AG.push(0);for(AP=0;AP<AI;AP++){var s=this.getLen(AD[AP],AN,AJ,AQ);if(s>AB){var AC=AD[AP];var AO=(AB/s)*AC.length;AD[AP]=AC.substr(0,parseInt(AO));s=AB;}w.push(s);r+=s;AG.push(r);if(AP!==AI-1){r+=AS;}}var AF=0,AM=0;var AE=AK;for(;AM<AG.length;){var AA=AG[AM]-AG[AF];if(AF>0&&AM!=AF){AA-=AS;}var z=AG[AM+1]-AG[AF];if(AF>0&&AM+1!=AF){z-=AS;}if(AA<=AB&&((AM+1==AG.length)||(z>AB))){AE--;if(AE==0||AM===AI){break;}else{AF=AM;AM++;}}else{AM++;}}if(AM>AI){AM=AI;}var AH=AG[AM]-AG[AF];if(AF>0&&AM!=AF){AH-=AS;}var AT;if(AM>=AI&&AH<AB){AT=AD.join(" ");}else{AT=AD.slice(0,AM).join(" ");var u=this.getLen("...",AN,AJ,AQ);if(AH+u<=AB){AT+="...";}else{if(AT.charAt(AT.length-1)===" "){AT=AT.substr(0,AT.length-1);}var x=AT.lastIndexOf(" ");var t=AT.length-1-x;if(t===3){AT=AT.substr(0,AT.length-3)+" ...";}else{AT=AT.substr(0,AT.length-3)+"...";}}}AR.innerHTML=AT;},getLen2:function(z,s,r){var t=r;var u=t.getContext("2d");u.font=s;u.textAlign="center";u.fillStyle="blue";var x=u.measureText(z);var w=x.width;return w;},splitWordIfTooLong2:function(x,AE,w,z){var AG=x.split(" ");var AC=[];var AD=AG.length;var AA=0;var u=0;for(AA=0;AA<AD;AA++){var s=AG[AA];while(true){var AH=this.getLen2(s,w,z);if(AH>AE){var AF=(AE/AH)*s.length;var r=Math.max(Math.round(AF),1);while(r>0){var AB=s.substr(0,r);var t=this.getLen2(AB,w,z);if(t<=AE||r==1){AC.push(AB);break;}else{r--;}}s=s.substr(r,s.length-r);}else{AC.push(s);break;}}}return AC.join(" ");},getComputedFontStyle:function P(r){var s=r.fontStyle+" "+r.fontWeight+" "+r.fontSize+"/"+r.fontVariant+" "+r.fontFamily;return s;},truncateTextToLineWithWordWrap2:function(AU,AN,AE,AM){var AD=-1;if(AU.style&&AU.style.width&&AU.style.width.length>0){var AR=0;var AT=mstrmojo.css.getComputedStyle(AU);if(AT.paddingLeft){AR+=parseFloat(AT.paddingLeft);}if(AT.paddingRight){AR+=parseFloat(AT.paddingRight);}var AS=AU.offsetWidth;AD=AS?AS-AR:parseInt(AU.style.width);}if(AD<0){AU.innerHTML="...";return ;}var AA=mstrmojo.css.getComputedStyle(AU);var t=this.getComputedFontStyle(AA);AN=this.splitWordIfTooLong2(AN,AD,t,AE);var AG=AN.split(" ");var x=[];var AJ=[];var AQ=0;var r=0;var AL=AG.length;var AV=this.getLen2(" ",t,AE);AJ.push(0);for(AQ=0;AQ<AL;AQ++){var s=this.getLen2(AG[AQ],t,AE);if(s>AD){var AF=AG[AQ];var AP=(AD/s)*AF.length;AG[AQ]=AF.substr(0,parseInt(AP));s=AD;}x.push(s);r+=s;AJ.push(r);if(AQ!==AL-1){r+=AV;}}var AI=0,AO=0;var AH=AM;for(;AO<AJ.length;){var AC=AJ[AO]-AJ[AI];if(AI>0&&AO!=AI){AC-=AV;}var AB=AJ[AO+1]-AJ[AI];if(AI>0&&AO+1!=AI){AB-=AV;}if(AC<=AD&&((AO+1==AJ.length)||(AB>AD))){AH--;if(AH==0||AO===AL){break;}else{AI=AO;AO++;}}else{AO++;}}if(AO>AL){AO=AL;}var AK=AJ[AO]-AJ[AI];if(AI>0&&AO!=AI){AK-=AV;}var AW;if(AO>=AL&&AK<AD){AW=AG.join(" ");}else{AW=AG.slice(0,AO).join(" ");var w=this.getLen2("...",t,AE);if(AK+w<=AD){AW+="...";}else{if(AW.charAt(AW.length-1)===" "){AW=AW.substr(0,AW.length-1);}var z=AW.lastIndexOf(" ");var u=AW.length-1-z;if(u===3){AW=AW.substr(0,AW.length-3)+" ...";}else{AW=AW.substr(0,AW.length-3)+"...";}}}AU.innerHTML=AW;return AW.indexOf("...")>-1;},truncateDivContent:function(x,AC,t){AC.innerHTML=x;if(AC.offsetHeight>t){var z=0,s=x.length-1;while(z<=s){var AD=Math.round((z+s)/2);var AF=x.substr(0,AD+1);var AE=x.substr(0,AD+2);AC.innerHTML=AF;var AB=AC.offsetHeight;AC.innerHTML=AE;var w=AC.offsetHeight;if(AB<=t&&w>t){break;}else{if(AB>t){s=AD-1;}else{if(w<=t){z=AD+1;}}}}var u=x.substr(0,AD+1);if(u.length<x.length){if(u.charAt(u.length-1)===" "){u=u.substr(0,u.length-1);}var AA=u.lastIndexOf(" ");var r=u.length-1-AA;if(r>=2&&r<=8){u=u.substr(0,u.length-r-1)+"...";}else{u=u.substr(0,u.length-3)+"...";}}return u;}else{return x;}},positionTooltip:function(AK,t,AP,AA){if(!AK||!t||!AP){return ;}if(isNaN(AA)){AA=45;}var AM=AP.offsetWidth,AB=AP.offsetHeight,x=AK.offsetWidth,AJ=AK.offsetHeight,AF=AK.style,AC=0,AN=0;function z(){return x+AA<t.x&&AJ<AB;}function u(){return AJ+AA<t.y&&x<AM;}function w(){return t.x+AA+x<AM&&AJ<AB;}function AE(){return t.y+AA+AJ<AB&&x<AM;}function s(){return t.x>x/2&&(AM-t.x)>x/2;}function r(){return t.y>AJ/2&&(AB-t.y)>AJ/2;}function AO(){return u()&&z();}function AL(){return u()&&s();}function AI(){return u()&&w();}function AQ(){return z()&&r();}function AH(){return AE()&&z();}function AR(){return w()&&r();}function AG(){return AE()&&s();}function AD(){return AE()&&w();}if(AO()){AC=t.x-AA-x;AN=t.y-AA-AJ;}else{if(AL()){AC=t.x-x/2;AN=t.y-AA-AJ;}else{if(AI()){AC=t.x+AA;AN=t.y-AA-AJ;}else{if(AQ()){AC=t.x-AA-x;AN=t.y-AJ/2;}else{if(AH()){AC=t.x-AA-x;AN=t.y+AA;}else{if(AR()){AC=t.x+AA;AN=t.y-AJ/2;}else{if(AG()){AC=t.x-x/2;AN=t.y+AA;}else{if(AD()){AC=t.x+AA;AN=t.y+AA;}}}}}}}}AF.left=AC+"px";AF.top=AN+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom");function G(J){return(J&&J.id);}mstrmojo._HasScrollbox=mstrmojo.provide("mstrmojo._HasScrollbox",{_mixinName:"mstrmojo._HasScrollbox",scrollListeners:null,scrollListenerCount:0,scrollInterval:50,scrollboxNode:undefined,scrollTo:function F(L,K){var J=this.scrollboxNode;J.scrollLeft=L.x;J.scrollTop=L.y;if(K){this.notifyScrollListeners(L);}},connectScrollbox:function E(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(!L){L={};this.scrollListeners=L;}if(!L[J]){L[J]=K;this.scrollListenerCount++;if(this.scrollListenerCount===1){this._attachScrollDom();}}},disconnectScrollbox:function D(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(L&&L.hasOwnProperty(J)){delete this.scrollListeners[J];this.scrollListenerCount--;if(!this.scrollListenerCount){this._detachScrollDom();}}},notifyScrollListeners:function C(K){var N=K||this.getScrollPos(),M=N.y,L=N.x;this.scrollboxTop=M;this.scrollboxLeft=L;this.scrollboxRight=L+this.scrollboxWidth;this.scrollboxBottom=M+this.scrollboxHeight;var J=this.scrollListeners,O;for(O in J){J[O].onscroll(this);}},getScrollPos:function H(){var J=this.scrollboxNode;return{x:J.scrollLeft,y:J.scrollTop};},_attachScrollDom:function A(){var M=this.scrollboxNode;if(M){var L=this.usesTouches;if(!L){if(!this.scrollCallback){var K=this.id;this.scrollCallback=function(){mstrmojo.all[K].notifyScrollListeners();};}mstrmojo.dom.attachBufferedEvent(M,"scroll",this.scrollCallback,this.scrollInterval);}if(this.scrollboxTop===null){this.scrollboxTop=L?0:M.scrollTop;}if(this.scrollboxLeft===null){this.scrollboxLeft=L?0:M.scrollLeft;}var J=function(P){var O=P.toLowerCase();var N=M.style[O];return(!isNaN(N)&&N.charAt(N.length-1)!=="%")?parseInt(N,10):M["client"+P];};if(this.scrollboxHeight===null){this.scrollboxHeight=J("Height");}if(this.scrollboxWidth===null){this.scrollboxWidth=J("Width");}this.scrollboxBottom=this.scrollboxTop+this.scrollboxHeight;this.scrollboxRight=this.scrollboxLeft+this.scrollboxWidth;this._attachedScrollbox=M;}},_detachScrollDom:function I(){var J=this._attachedScrollbox;if(J&&this.scrollCallback){mstrmojo.dom.detachBufferedEvent(J,"scroll",this.scrollCallback,this.scrollInterval);}delete this._attachedScrollbox;},scrollboxTop:null,scrollboxLeft:null,scrollboxHeight:null,scrollboxBottom:null,buildRendering:function B(){this._detachScrollDom();this._super();if(this.scrollListenerCount){this._attachScrollDom();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var N=/\{\@(en@)?([^\}]+)\}/gm,J=/\</gm,R=/\>/gm,E=/\S/,Q=["$","^","=","!",":","/",".","*","+","?","|","(",")","[","]","{","}","\\"],F=new RegExp("(\\"+Q.join("|\\")+")","g"),S={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;",u0009:"&#x09;","\n":"&#x0A;","\r":"&#x0D;",'"':"&quot;"},C={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;"," ":"&nbsp;","\n":"<br/>","\r":"&nbsp;&nbsp;&nbsp;&nbsp;","'":"&#039;",'"':"&quot;"},M={"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":" ","<br/>":"\n","&nbsp;&nbsp;&nbsp;&nbsp;":"\r","&#039;":"'","&quot;":'"'},D={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#039;",'"':"&quot;","\u20ac":"&#8364;"},K={"&amp;":"&","&lt;":"<","&gt;":">","&#039;":"'","&quot;":'"',"&#8364;":"\u20ac"};var L=function(V){if(V===null){return"null";}var W=typeof V;if(W!=="object"){return W;}if(V.length===undefined){return"object";}return"array";};var T={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};mstrmojo.string=mstrmojo.provide("mstrmojo.string",{multiReplace:function G(W,Z,Y){var V;Y=Y||[];if(!W){return"";}var X=[];for(V in Z){if(mstrmojo.array.indexOf(Y,V)===-1){X.push(V.k||V);}}return W.replace(new RegExp(X.join("|"),"g"),function(a){var b=Z[a];return b.v||b;});},trim:function P(V){return(V&&V.replace)?V.replace(/^\s+/,"").replace(/\s+$/,""):V;},startsWith:function U(W,V){return W.length>=V.length&&W.substring(0,V.length)==V;},ellipsize:function A(X,W){var V=this.trim(X.substr(0,(W||1)-1));if(V!==X){V+="&hellip;";}return V;},isEmpty:function I(V){return(V===null)||(V===undefined)||!(E.test(V));},regEscape:function O(V){return V.replace(F,"\\$1");},encodeXMLAttribute:function(V){return mstrmojo.string.multiReplace(V,S);},encodeHtmlString:function(W,V,X){if(!W||!W.replace){return W;}if(X){return mstrmojo.string.multiReplace(W,D);}return mstrmojo.string.multiReplace(W,C,V?[" "]:[]);},decodeHtmlString:function(W,V){return V?mstrmojo.string.multiReplace(W,K):mstrmojo.string.multiReplace(W,M);},htmlAngles:function(V){if(!mstrmojo.string.isEmpty(V)){V=String(V);return V.replace(J,"&lt;").replace(R,"&gt;");}return V;},apply:function H(V,X){if(!V){return"";}var W=this;return V.replace(N,function Y(b,d,e){var Z;try{Z=mstrmojo.hash.walk(e,X);}catch(a){}Z=(Z===null||Z===undefined)?"":Z;return(!!d)?W.encodeHtmlString(Z,true):Z;});},json2xml:function(V,l,o){if(!(l instanceof Array)){l=[l];}var W=o&&o.isSerializable,k=(o.convertBoolean!==false),q=o&&o.skipFunctions,j,b;var e=[],Z=[],d,Y,a;for(j=0,b=l.length;j<b;j++){var h=l[j];for(d in h){if(q&&typeof h[d]==="function"){continue;}if(W){var p=W(d,l,j);if(p!==true){if(p===false){continue;}else{if(p.att){e.push(p.att);}if(p.child){Z.push(p.child);}continue;}}}Y=h[d];a=L(Y);switch(a){case"array":var f,g;Z.push("<"+d+">");for(f=0,g=Y.length;f<g;f++){var X=o.getArrItemName(d,Y,f)||f;Z.push(this.json2xml(X,Y[f],o));}Z.push("</"+d+">");break;case"object":Z.push(this.json2xml(d,Y,o));break;case"string":e.push(d+'="'+mstrmojo.string.encodeXMLAttribute(Y)+'"');break;case"boolean":e.push(d+'="'+(k?(Y?"-1":"0"):Y)+'"');break;case"null":if(!o.skipNull){e.push(d+'="'+o.nullValue+'"');}break;default:e.push(d+'="'+Y+'"');break;}}}return"<"+V+" "+e.join(" ")+">"+Z.join("")+"</"+V+">";},escape4HTMLText:function B(d){if(!d||!d.replace){return d;}var Z=/"/gm;var X="&quot;";var e=/&/gm;var b="&amp;";var a=/</gm;var V="&lt;";var Y=/>/gm;var W="&gt;";return d.replace(e,b).replace(Z,X).replace(a,V).replace(Y,W);},parseUri:function(Z,W){W=W||T;var V=W.parser[((W.strictMode)?"strict":"loose")].exec(Z),Y={},X=14;while(X--){Y[W.key[X]]=V[X]||"";}Y[W.q.name]={};Y[W.key[12]].replace(W.q.parser,function(b,a,d){if(a){Y[W.q.name][a]=d;}});return Y;},removeSpecialChars:function(V){return V.replace(/[^a-zA-Z0-9]/g,"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,M=mstrmojo.hash;function J(U){if(U!==null){return(U.constructor!==Array)?[U]:U;}return null;}function F(f,d,Y){if(!d){return null;}var g=[],V=f.selectedIndices,U=f.allIdx,a=f.noneIdx;if(f.multiSelect&&(a>-1)&&(I.indexOf(d,a)>-1)){return g;}var X,Z,e=f.items,b=f.itemIdField,W=f.selectedItems,j;if(f.multiSelect&&(U>-1)&&(I.indexOf(d,f.allIdx)>-1)){for(X=0,Z=e.length;X<Z;X++){if(!V[X]){g.push(X);V[X]=true;f.selectedIndex=X;f.selectedItem=e[X];}}}else{for(X=0,Z=d.length;X<Z;X++){var h=d[X];if(!V[h]){V[h]=true;if(Y){g.push({idx:h,positions:Y});}else{g.push(h);}f.selectedIndex=h;j=f.selectedItem=e[h];if(W){W[j[b]]=j;}}}}return g;}function D(X,U){var W=[],Y=X.selectedIndices,Z=X.selectedItems,V;for(V in Y){delete Y[V];if(U){W.push({idx:parseInt(V,10),positions:U});}else{W.push(parseInt(V,10));}}X.selectedIndex=-1;X.selectedItem=null;if(Z){X.selectedItems={};}return W;}function T(f,e,Y){if(!e){return null;}var a=[],V=f.selectedIndices,h=I.indexOf,U=f.allIdx,b=f.noneIdx,d=f.itemIdField,W=f.selectedItems;if(f.multiSelect&&(((U>-1)&&(h(e,U)>-1))||((b>-1)&&(h(e,b)>-1)))){return D(f);}if(e.length>0&&V[U]){if(h(e,U)<0){e.push(U);}}var Z=e.length,X;for(X=0;X<Z;X++){var g=e[X];if(V[g]){delete V[g];if(Y){a.push({idx:g,positions:Y});}else{a.push(g);}if(W){delete W[f.items[g][d]];}if(f.selectedIndex===g){f.selectedIndex=-1;f.selectedItem=null;}}}return a;}function C(X,Y,V,U){if(U){return ;}if(this.raiseEvent){if((X&&X.length)||(Y&&Y.length)){try{this.raiseEvent({name:"selectionChange",added:X,removed:Y});}catch(W){T(this,X);F(this,Y);throw W;}}}}function B(V){var W=this.itemIdField,U=this.items;if(typeof V==="object"&&W){return I.find(U,W,V[W]);}return I.indexOf(U,V);}mstrmojo._ListSelections={multiSelect:false,allIdx:-1,noneIdx:-1,itemIdField:"",items:null,selectedIndices:null,selectedIndex:-1,selectedIndices_bindEvents:"selectionChange",selectedIndex_bindEvents:"selectionChange",selectedItem:null,selectedItem_bindEvts:"selectionChange",allowUnlistedValues:true,selectedItems:null,supportsIncFetch:false,init:function(U){this._super(U);if(this.supportsIncFetch&&this.itemIdField){this.selectedItems={};}if(!this.items){this.items=[];}if(!this.selectedIndices){this.selectedIndices={};if(this.selectedIndex>-1){this._set_selectedIndex("selectedIndex",this.selectedIndex,true);}else{if(this.selectedItem){this._set_selectedItem("selectedItem",this.selectedItem,true);}}}},addItems:function K(e){e=J(e);if(!e){return ;}var a=this.items,U=this.items.length,W=this.selectedItems,Y=[],V;a=this.items=a.concat(e);V=a.length;if(W){var Z=this.itemIdField,X,d;for(X=U;X<a.length;X++){d=a[X];if(W[d[Z]]){Y.push(X);}}}if(Y&&Y.length){F(this,Y);}if(V>U){var b=this.itemsContainerNode;if(b){b.innerHTML+=this._buildItemsMarkup(U,V-1).join("");}}},addSelectedItems:function S(U){this.selectItems(U,false);},setSelectedItems:function L(U){this.selectItems(U,true);},selectItems:function R(d,f){d=J(d);if(!d){return ;}if(f&&this.selectedItems){this.selectedItems={};}var W=this.selectedItems,a=this.itemIdField,U=[],Y=this.items.length,Z=[],V=this.allowUnlistedValues,e,b,X;for(X=0;X<d.length;X++){e=d[X];b=B.call(this,e);if(b<0){if(W===null){if(V){U.push(e);b=Y++;Z.push(b);}}else{W[e[a]]=e;}}else{Z.push(b);}}if(U.length>0){this.addItems(U);}if(Z.length>0){if(f){this.select(Z);}else{this.addSelect(Z);}}},unselectItems:function A(V){V=J(V);if(!V){return ;}var a=this.selectedItems,W=[],Z=this.itemIdField,Y,U,X;if(a===null){return ;}for(X=0;X<V.length;X++){Y=V[X];if(a){delete a[Y[Z]];}U=B.call(this,Y);if(U<0){W.push(U);}}if(W.length>0){this.removeSelect(W);}},getSelectedItems:function G(){if(this.selectedItems){return M.valarray(this.selectedItems);}return I.get(this.items,M.keyarray(this.selectedIndices,true));},singleSelect:function(V,W,U){if(V!==-1){this.select([V],W,U);}},singleSelectByField:function O(V,W,U){this.singleSelect(I.find(this.items,W,V),U);},toggleSelect:function Q(U){var W,V;if(this.selectedIndices[U]){V=T(this,[U]);}else{W=F(this,[U]);}C.call(this,W,V,[U]);},select:function(W,V,U){W=J(W);if(!W){return ;}var Y=D(this,U),a=F(this,W,U),X;if(this.selectionPolicy!=="reselect"){for(X=Y.length-1;X>=0;X--){var Z=I.indexOf(a,Y[X]);if(Z>-1){Y.splice(X,1);a.splice(Z,1);}}}C.call(this,a,Y,W,V);},rangeSelect:function H(V,U){var a=this.selectedIndex,Y=a,Z=this.allIdx,W=[],X;if(V===Z||this.selectedIndices[Z]){W.push(Z);}else{if(Y===-1&&this.selectedIndices){for(X in this.selectedIndices){Y=parseInt(X,10);break;}}Y=Y===-1?0:Y;if(Y>V){Y=V;V=a;}for(X=Y;X<=V;X++){W.push(X);}}this.select(W,U);this.selectedIndex=a;},clearSelect:function(U){C.call(this,null,D(this),[],U);if(!U){this.raiseEvent({name:"clearSelection"});}},addSelect:function(X,U,V){X=J(X);if(!X){return ;}var W=F(this,X,V),Z=null,Y=this.noneIdx;if(this.multiSelect&&(Y>-1&&I.indexOf(X,Y)>-1)){Z=T(this,X);}C.call(this,W,Z,X,U);},removeSelect:function(W,U,V){W=J(W);if(!W){return ;}C.call(this,null,T(this,W,V),W,U);},_set_selectedIndices:function P(W,d,U){if(this.selectedItems){this.selectedItems={};}var V=this.selectedIndices;if(V===d){return false;}if(!V){V={};this.selectedIndices=V;}if(!d){d={};}var a=this.selectedIndex,Z=[],b;for(b in V){if(!d[b]){b=parseInt(b,10);delete V[b];Z.push(b);if(a===b){this.selectedIndex=-1;this.selectedItem=null;}}}var g=[],e=this.items,Y=this.itemIdField,f;for(b in d){if(!V[b]){b=parseInt(b,10);V[b]=true;g.push(b);this.selectedIndex=b;f=this.selectedItem=e[b];if(this.selectedItems){this.selectedItems[f[Y]]=f;}}}if(U!==true){var X=[];for(b in d){if(V[b]){b=parseInt(b,10);X.push(b);}}C.call(this,g,Z,X);}return(g.length||Z.length);},_set_selectedIndex:function N(X,V,U){var W={};if(V>-1){W[V]=true;}return this._set_selectedIndices("selectedIndices",W,U);},_set_selectedItem:function E(X,W,V){var U=B.call(this,W);if((U<0)&&(W!==null&&W!==undefined)&&this.allowUnlistedValues&&this.items){this.set("items",this.items.concat(W));U=this.items.length-1;}return this._set_selectedIndex("selectedIndex",U,V);},_addSelections:function(U){return F(this,U);},_removeAll:function(){return D(this);}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var B={};var E={};mstrmojo.publisher=mstrmojo.provide("mstrmojo.publisher",{publish:function F(H,Q,L){var M=B[H]&&B[H][Q],O;if(!M){return ;}for(O in M){var J=null;if(O){J=mstrmojo.all[O];if(!J){delete M[O];continue;}}var R=M[O].methods;if(R){var P=J||mstrmojo.global,I;for(I in R){if(P[I]){P[I](L);}}}var N=M[O]&&M[O].functions,S=(N&&N.length)||0;if(S){var K;if(J){for(K=S-1;K>-1;K--){if(N[K]){N[K].apply(J,[L]);}}}else{for(K=S-1;K>-1;K--){if(N[K]){N[K](L);}}}}}},subscribe:function D(I,N,R,J){var S=B[I];if(!S){S={};B[I]=S;}var M=S[N];if(!M){M={};S[N]=M;}var K=M[J||""];if(!K){K={};M[J||""]=K;}if(typeof R==="function"){var L=K.functions;if(!L){L=[];K.functions=L;}L.push(R);}else{var H=K.methods;if(!H){H={};K.methods=H;}H[R]=true;}var Q=E,P=Q[J||""];if(!P){P={};Q[J||""]=P;}var O=P[I];if(!O){O={};P[I]=O;}O[N]=true;return{id:I,type:N,callback:R,listener:J,clear:function(){mstrmojo.publisher.unsubscribe(this);}};},unsubscribe:function C(I){var R=B[I.id],O=R&&R[I.type],L=O&&O[I.listener||""];if(!L){return ;}var K=mstrmojo.array,Q=mstrmojo.hash,P=typeof I.callback,M=false;if(P==="function"){var N=L.functions;if(N){K.removeItem(N,I.callback);if(!N.length){delete L.functions;if(Q.isEmpty(L.methods)){M=true;}}}}else{var J=L.methods;if(J){delete J[I.callback];if(Q.isEmpty(J)){delete L.methods;if(!L.functions||!L.functions.length){M=true;}}}}if(M){delete O[I.listener||""];if(Q.isEmpty(O)){delete R[I.type];}}},hasSubs:function G(K,J){var I=B[K],H=I&&I[J];return !!H;},clearSubscriptions:function A(I){if(!I){I="";}var P=B,M=mstrmojo.hash,H;if(P[I]){delete P[I];}var O=E[I];if(O){for(H in O){var N=P[H],L=O[H],K;if(!N){continue;}for(K in L){var J=N[K];if(!J){continue;}delete J[I];if(M.isEmpty(J)){delete N[K];}}}}delete E[I];}});mstrmojo.publisher.NO_SRC="NO_SRC";mstrmojo.publisher.CONNECTIVITY_CHANGED_EVENT="CONNECTIVITY_CHANGED";mstrmojo.publisher.RECONCILE_END_EVENT="RECONCILE_END";}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var W=this._sourceFn;if(!W){var V=this.source;if(V!=null){if(typeof (V)=="string"){if(!(V.match("return "))&&!(V.match(/\;\s*\S/))){V="return "+V;}W=new Function(V);}else{if(typeof (V)=="function"){W=V;}}this._sourceFn=W;}}var S,X=this.parent;if(W){try{S=W.apply(X,[]);}catch(U){}}var T=this.setter,Y=this.destination;if(T==null){X[Y]=S;}else{if(typeof (T)=="string"){X[T](Y,S);}else{if(typeof (T)=="function"){T.apply(X,[Y,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var T=this._chains;if(!T){this._parseChains();T=this._chains;}for(var S in T){this._attachChain(T[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var T=this._chains;if(T){for(var S in T){this._detachChain(T[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var U=this._chains;var T=this.source;if(T&&(typeof (T)=="function")){T=T.toString&&T.toString();}if(!T){return ;}function S(b,f,V,X){var W=b,Z;while(Z=W.match(f)){var d=Z[0],a=d.length,e=true;d=d.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var Y in U){if(Y.substr(0,a)===d){e=false;break;}else{if(d.indexOf(Y)===0){delete U[Y];}}}if(e){U[d]={host:(V==null)?null:Z[V],parts:Z[X].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}W=W.substr(Z.index+a);}}if(D.test(T)){S(T,O,null,1);}if(R.test(T)){S(T,M,1,2);}if(B.test(T)){S(T,L,1,2);}},_attachChain:function Q(S,U){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var e=S.evt2idx,h=S.idx2evt,Z=S.parts;var f=(U>=0)?U:0,b=this.id,W=mstrmojo.all,d=(U>0)?W[h[f-1].context][Z[f-1]]:(S.host?W[S.host]:this.parent),T=Z[f];var V=mstrmojo.array;while(d&&T){if(d.attachEventListener){var g=d[T+"_bindEvents"]||(T+"Change");if(typeof (g)=="string"){g=[g];}var Y=[];for(var a=0,X=g.length;a<X;a++){Y[a]=d.attachEventListener(g[a],b,"_callback");}for(var a=0;a<g.length;a++){e[d.id+"_"+g[a]]=f;}h[f]={context:d.id,evts:g,subs:Y};}d=d[T];T=S.parts[++f];}},_detachChain:function G(S,T){var U=mstrmojo.all,k=S.idx2evt,e=S.evt2idx,a=this.id;var Y=(T>-1)?T:0,b=k.length;if(Y<b){for(;Y<b;Y++){var Z=k[Y];if(!Z){break;}var W=Z.context,d=U[W],h=Z.evts;if(d&&d.detachEventListener){var l=Z.subs;for(var g=0,V=l.length;g<V;g++){d.detachEventListener(l[g]);}}k[Y]=null;for(var X=0,f=h.length;X<f;X++){delete e[W+"_"+h[X]];}}}},_callback:function I(T){this.exec();if(!T||!T.name||!T.src){return ;}var U=T.src.id+"_"+T.name,W=this._chains;for(var X in W){var V=W[X],S=V.evt2idx[U];if(S!=null){this._detachChain(V,S+1);this._attachChain(V,S+1);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],s=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-s.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=s.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array;function A(E){var D=(E&&E.gts&&E.gts.col)||[],G=(E&&E.gts&&E.gts.row)||[];var F=C.filter(D.concat(G),function(H){return H.otp===-1;})[0];return{tpltProp:E.prop,mxProp:C.map((F&&F.es)||[],function(H){var I={};I[H.oid]=mstrmojo.hash.copy(H.prop,{n:H.n,t:H.otp});return I;})};}mstrmojo._IsDocumentTemplate=mstrmojo.provide("mstrmojo._IsDocumentTemplate",{_mixinName:"mstrmojo._IsDocumentTemplate",gridInfo:null,tmsProps:null,update:function B(D){if(D&&D.data){this.gridInfo=D.data.gsi;this.tmsProps=A(D.data);}if(this._super){return this._super(D);}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash,A=null;function B(D){return mstrmojo.DICFactory.createDIC(C.copy({dic:this.dic,owner:this.owner,group:this},D));}mstrmojo.DICFactory=mstrmojo.provide("mstrmojo.DICFactory",{createDIC:function(G){var E=G.dic,F=mstrmojo.DICConfig.getDICClass(E),D;if(F){if(G.k===undefined){G.k=G.opener&&G.opener.id;}G.showByDefault=mstrmojo.DICConfig.showDICByDefault(G.dic,G.openerType);G.hasPreview=mstrmojo.DICConfig.hasDICPreview(G.dic,G.openerType);G.canSlice=mstrmojo.DICConfig.canSlice(G.dic,G.openerType);D=new F(G);}return D;},createDICPopup:function(D,E){return mstrmojo.DICPopup.getInstance(D,E);},createDICGroup:function(F){var I=C.copy(F,{scriptClass:"mstrmojo.Widget",widgetsMap:{},dic:null,owner:null,groupMembers:{},postCreate:function(){var L=this.dic,K=this.openerType,J=mstrmojo.DICConfig;this.showByDefault=J.showDICByDefault(L,K);this.hasPreview=J.hasDICPreview(L,K);},addDIC:function D(J,K){this.groupMembers[J]=K;},showPopupDIC:function H(K){if(!this.showByDefault){var J=this.widgetsMap[K],L=this.groupMembers[K];if(!L){return ;}if(!J){J=this.widgetsMap[K]=B.call(this,L);}J.showInPopup();}},render:function G(){if(this.showByDefault||this.hasPreview){var L=this.groupMembers,K=this,J;C.forEach(L,function(N,M){if(!N.hasRendered){K.widgetsMap[M]=J=B.call(K,N);if(K.showByDefault){J.render();}else{if(K.hasPreview&&J.enabled){J.renderPreview();}}N.hasRendered=true;}});}},destroy:function E(){C.forEach(this.widgetsMap,function(J){J.destroy();});this.widgetsMap={};}});return mstrmojo.insert(I);}});}());mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){document.msCSSOMElementFloatMetrics=true;mstrmojo.requiresCls("mstrmojo.hash");var S=mstrmojo.hash,H="containerNode",G="auto",Q="px";var I={v:G,c:undefined,sv:G};function E(d,g,f){var h=this._layoutWidgets[g],l=d.slot||H,j=h.f,k=h.p,e=(j&&j[l]!==undefined),b=(k&&k[l]!==undefined);if(l&&((!f&&e)||b)){return e?j[l]:(h.x*parseInt(k[l],10)/100)+Q;}return d[(g==="h")?"height":"width"];}function K(j,e,b){if(j.ignoreLayout){return ;}var d=(e===G)||e==="NaNpx",g=(b===G)||b==="NaNpx";var f=j.getLayoutOffsets&&j.getLayoutOffsets();if(f){if(!d){e=(parseInt(e,10)-f.h)+Q;}if(!g){b=(parseInt(b,10)-f.w)+Q;}}if(j.setDimensions){j.setDimensions(e,b);}else{if(j.set){if(!d){j.set("height",e);}if(!g){j.set("width",b);}}}}function Z(f){var d=this.children,j,l;for(j=0,l=(d&&d.length)||0;j<l;j++){var e=d[j],o=e.slot||H;if(o){var k=E.call(this,e,"h",f),p=E.call(this,e,"w",f);this.setSlotDimensions(o,k,p);K(e,k,p);var b=E.call(this,e,"h",f),g=E.call(this,e,"w",f);if(b!==k||g!==p){K(e,b,g);}this.setSlotDimensions(o,b,g);}}this.afterLayout();}function B(){var d=this.children,b=this._layoutWidgets;S.forEach(this.slotNames,function(j,k){if(!j||this.skipsSlotLayout(k)){return ;}var g=(b.h&&b.h.getSlotSizeInfo(k,d))||I,e=(b.w&&b.w.getSlotSizeInfo(k,d))||I,f=g.c||e.c;mstrmojo.array.forEach(f,function(h){K(h,g.v,e.v);});this.setSlotDimensions(k,g.sv,e.sv);},this);this.afterLayout();}function D(d){var b=this.layoutConfig.xt?B:Z;b.call(this,d);}function T(k,f,h){var j=k.slot||H,g=f&&f.a;if(!g||g[j]===undefined){return ;}var b=this[j]["offset"+h],e=g[j];if(b===e){return ;}f.x-=(b-e);g[j]=b;}function J(b){this.beforeLayout();var d=this._layoutWidgets,e=b.src;T.call(this,e,d.h,"Height");T.call(this,e,d.w,"Width");D.call(this,true);}function O(e,h){if(!e){return null;}var b=this.children,t=h.toLowerCase(),j=parseInt(this[t],10),l=j,p={},r={},g={},d={},q={},k,o,f,u,s;for(s in e){if(!e.hasOwnProperty(s)){continue;}u=e[s];if(u.match(/px$/)){j-=parseInt(u,10);p[s]=u;}else{if(u.match(/%$/)){r[s]=u;}else{if(u.match(/all/)){q[s]=l;}else{g[s]=u;}}}}if(!S.isEmpty(g)&&!S.isEmpty(r)){for(k=0,o=(b&&b.length)||0;k<o;k++){f=b[k];s=f.slot||H;if(s&&g[s]&&!f.ignoreLayout){if(f.hasRendered){d[s]=this[s]["offset"+h];j-=d[s];}else{d[s]=0;f.attachEventListener((f instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,J);}}}}return{f:S.isEmpty(p)?undefined:p,p:S.isEmpty(r)?undefined:r,a:S.isEmpty(d)?undefined:d,n:S.isEmpty(q)?undefined:q,x:j,getSlotSizeInfo:function(AE,z){if(!e[AE]){return I;}var x=mstrmojo.array.filter(z,function(AG){var AF=AG.slot;return AF===AE||(AE===H&&!AF);}),AC,AD;var w=p[AE];if(w){AD=w;}var AB=r[AE];if(AB){AD=(this.x*parseInt(AB,10)/100)+Q;}if(g[AE]){AD=d[AE];if(AD){AD+=Q;}else{AD=G;}AC=G;}var AA=q[AE];if(AA){AD=AC=AA+Q;}AD=AD||"0px";return{v:AD,c:x,sv:AC||AD};}};}function R(d){var b=this.domNode;if(!b||!this.layoutConfig){return ;}b.style[d]=this[d];this.doLayout();}mstrmojo._HasLayout=mstrmojo.provide("mstrmojo._HasLayout",{_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",ignoreLayout:false,beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,layoutConfig:null,init:function V(b){this._super(b);this.layoutConfig=S.clone(this.layoutConfig);},preBuildRendering:function C(){var e=this.cssText||"";var b=this.height;if(b&&b!==G){e+="height:"+this.height+";";}var d=this.width;if(d&&d!==G){e+="width:"+this.width+";";}this.cssText=e;return(this._super)?this._super():true;},postBuildRendering:function W(){this.doLayout();return this._super();},modifyLayoutConfig:function Y(e,d){var b=this.layoutConfig=this.layoutConfig||{};b.h=S.copy(e,b.h);b.w=S.copy(d,b.w);this.doLayout();},getLayoutOffsets:mstrmojo.emptyFn,set:function P(e,b){var d=this._super(e,b);if(e==="visible"&&this._pendingLayoutOnVisible){delete this._pendingLayoutOnVisible;this.doLayout();}return d;},doLayout:function A(){var b=this.layoutConfig;if(!b||(this.height===G&&this.width===G)){return ;}if(b.xt){if(!this.visible){this._pendingLayoutOnVisible=true;return ;}}this.beforeLayout();this._layoutWidgets={h:O.call(this,b.h,"Height"),w:O.call(this,b.w,"Width")};D.call(this,false);this.widgetResized();},browserResized:function F(b){this.setDimensions(b.h,b.w);return true;},onwidthChange:function N(){R.call(this,"width");},onheightChange:function M(){R.call(this,"height");},skipsSlotLayout:function(b){return false;},adjustParentDimensions:function L(){var d=this.parent,b=d&&d._layoutWidgets;if(b){T.call(d,this,b.h,"Height");T.call(d,this,b.w,"Width");}},setDimensions:function U(f,d){var e=(f===G)||f==="NaNpx",g=(d===G)||d==="NaNpx";if((!e&&parseInt(this.height,10)!==parseInt(f,10))||(!g&&parseInt(this.width,10)!==parseInt(d,10))){if(!e){this.height=f;}if(!g){this.width=d;}var b=this.domNode,j=b&&b.style;if(j){if(!e){j.height=f;}if(!g){j.width=d;}this.doLayout();}return true;}return false;},setSlotDimensions:function X(f,e,d){var b=this[f]&&this[f].style;if(!b){return ;}if(e!==G&&e!==undefined&&e!=="NaNpx"&&b.height!==e&&parseInt(e)>=0){b.height=e;}if(d!==G&&d!==undefined&&d!=="NaNpx"&&b.width!==d&&parseInt(d)>=0){b.width=d;}}});mstrmojo._HasLayout.getSlotSize=function a(f,g){var d=f&&f.prototype.layoutConfig;if(d){var e=d.h,b=d.w;return{h:(e&&e[g])||undefined,w:(b&&b[g])||undefined};}return null;};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.all={};var E=mstrmojo.all,G=mstrmojo.hash;var A=0;function D(){var I;while(!I){var H="mstr"+(A++);if(!E[H]){I=H;}}return I;}mstrmojo.registry=mstrmojo.provide("mstrmojo.registry",{add:function F(H){if(!H){return ;}var I=H.id;if(!I){H.id=I=D();}else{if(E[I]){throw new Error("Tried to register 2 objects with same id: "+I);}}E[I]=H;},remove:function C(H){if(H&&H.id){delete E[H.id];}},dumpAll:function(){var H;for(H in E){var I=E[H].id;if(I){mstrmojo.dbg(I+"("+(E[H].scriptClass||"[unknown class]")+")");}}},ref:function B(I,H){H=H||{};if(I){var L=I;while(L){switch(typeof L){case"string":if(H.skipLoadChecks!==true){mstrmojo.requiresCls(L);}L=G.walk(L,window);break;case"function":return(H.dontInst!==true)?new L():L;case"object":if(L.constructor===Object){var K=L.scriptClass;if(K){if(H.skipLoadChecks!==true){mstrmojo.requiresCls(K);}var J=G.walk(K,window);if(J){return new J((H.clone===true)?G.clone(L):L);}return null;}return L;}return L;default:return null;}}}return null;}});mstrmojo.insert=mstrmojo.registry.ref;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var H=mstrmojo.array,B=mstrmojo.hash,J=B.isEmpty;var G=1;function D(Q){return(typeof Q==="object")?Q:{};}function E(R,Q){B.forEach(Q,function(S,V){var T=R[V];if(T===undefined){delete Q[V];return true;}S=Q[V]=D(S);T=R[V]=D(T);if(J(S)&&J(T)){throw (G);}else{if(J(T)){delete R[V];if(J(R[V])){E(R,Q);}}else{if(J(S)){delete R[V];if(J(R[V])){E(R,Q);}}else{try{E(R[V],Q[V]);}catch(U){switch(U){case G:R[V]=Q[V]={};break;}}}}}});}function I(Q){B.forEach(Q,function(R){B.forEach(R,function(U,S){var T=U.include,W=U.exclude;if(J(T)||J(W)){return true;}if(!J(T)&&!J(W)){try{E(W,T);}catch(V){switch(V){case G:R[S]={};break;}}}});});return Q;}function F(S,R,Q){B.forEach(S,function(U,T){if(U===true||J(U)){Q.push(R+T);}else{F(U,R+T+".",Q);}});return Q;}function P(Q){B.forEach(Q,function(R){B.forEach(R,function(U,S){var T=[];F(U.include,"",T);F(U.exclude,"!",T);R[S]=T.join(";");});});return Q;}function K(Q,R){B.forEach(Q,function(S,U){var T=R[U];if(T!==undefined){if(S!==true&&T!==true){K(S,T);}else{if(S===true&&T!==true){R[U]=true;}else{if(S!==true&&T===true){Q[U]=true;}}}}});}function L(R,S){var Q=true;B.forEach(R,function(Y,T){var W=S[T];if(W){var U=Y.include,Z=Y.exclude,X=W.include,V=W.exclude;if(!J(V)&&!J(Z)){Q=false;return Q;}if(!J(X)&&!J(U)){K(X,U);}}return Q;});return Q;}function C(S,Q){Q=Q||{};if(S){var R=Q;H.forEach(S.split("."),function(W,U,T,V){R[W]=V?true:{};R=R[W];});}return Q;}mstrmojo.rw.model.RetrievalKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.RetrievalKeysConfig",init:function M(){this.nodes=[];this.filters={};},addNode:function A(R,T){var S=this.filters,Q=S[R];if(!Q){this.nodes.push(R);Q=S[R]={data:{},defn:{}};}if(T){if(L(Q,T)){S[R]=B.mergeHashes(Q,T);}else{throw ("The new filters for node key ## cannot be merged with the filters currently defined".replace("##",R));}}return this;}});mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig=function O(T){var Q={},U={},S={};H.forEach(T,function R(W){var V=W.partialRetrieval;if(V){H.forEach(V.nodes,function(X){U[X]=true;});S=B.mergeHashes(S,V.filters);delete W.partialRetrieval;}H.forEach(W.actions,R);});if(!J(U)){Q.nodes=B.keyarray(U);}if(!J(S)){Q.filters=P(I(S));}return Q;};mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters=function N(R){var Q=function(T){var S={};B.forEach(T,function(W,V){var U=S[V]={serialized:W,include:{},exclude:{}};H.forEach(W.split(";"),function(Y){var X=Y.indexOf("!")===0;Y=X?Y.slice(1):Y;C(Y,X?U.exclude:U.include);});});return S;};return{data:Q(R.data),defn:Q(R.defn)};};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var E=mstrmojo.hash;var B=function(G){return(mstrmojo.now()-G.getTime());};mstrmojo.storage.DOMStorage=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.storage.DOMStorage",mIsSupported:false,mStorageObj:null,itemTimeToLive:3600,init:function F(G){E.copy(G,this);return this;},isSupported:function C(){return this.mIsSupported;},checkVersion:function A(G){var H=this.getItem("__version__");if(H&&H<G){mstrmojo.dbg("DOMStorage data is old - clearing, v="+H);this.clear();}this.setItem("__version__",G,-1);return this;},length:function(){return(this.mIsSupported?this.mStorageObj.length:0);},_keyExpired:function D(G){return(G&&(G.ts>0)&&(mstrmojo.now()>G.ts));},key:function(G){return(this.mIsSupported?this.mStorageObj.key(G):null);},getItemAsString:function(H){var G=this.getItem(H);if(G){if(typeof G=="object"){G=JSON.stringify(G);}else{G=G+"";}}return G;},getItem:function(H){var G=null;if(this.mIsSupported){var J=this.mStorageObj.getItem(H);if(J){try{J=JSON.parse(J);}catch(I){}if(this._keyExpired(J)){this.removeItem(H);}else{G=J.data;}}}return G;},setItem:function(H,J,G){G=G||this.itemTimeToLive;try{if(this.mIsSupported){this.mStorageObj.removeItem(H);var L=(G>0)?(mstrmojo.now()+(G*1000)):-1;var I={ts:L,data:J};this.mStorageObj.setItem(H,JSON.stringify(I));}}catch(K){if(K!==QUOTA_EXCEEDED_ERR){throw K;}}finally{}return this;},removeItem:function(G){if(this.mIsSupported){this.mStorageObj.removeItem(G);}return this;},clear:function(){if(this.mIsSupported){this.mStorageObj.clear();}return this;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var C=mstrmojo.hash,E=mstrmojo.array;function D(F){return function(G){F[G]=true;};}mstrmojo.rw.model.UpdateKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.UpdateKeysConfig",init:function B(){this.nodes=[];this.selectors={};this.objects={};}});mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig=function A(J){var F={},K={},G={},I={};E.forEach(J,function H(M){var L=M.partialUpdate;if(L){E.forEach(L.nodes,D(K));E.forEach(L.selectors,D(G));E.forEach(L.objects,function(N){if(!I[N.id]||N.flag>I[N.id].flag){I[N.id]=N;}});delete M.partialUpdate;}E.forEach(M.actions,H);});if(!C.isEmpty(K)){F.nodes=C.keyarray(K);}if(!C.isEmpty(G)){F.selectors=C.keyarray(G);}if(!C.isEmpty(I)){F.objects=C.valarray(I);}return F;};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresDescs(521,522,523,524,525,526,529,530,534,535,546,547,587,686,687,688,696,746,1101,1102,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,2171,2202,2203,2204,2219,2220,2784,2785,2786,2795,2796,3086,3344,3852,3853,3854,3855,3856,3857,3858,3859,3860,3861,3862,3863,3945,3946,4406,4407,5282,5283,5924,5925,6076,6077,6078,6079,6080,6081,6082,7899,7900,7901,7902,7903,9379,9380,9381,9382,9383,9384,9385,12298,13889,13890,13896,13897);mstrmojo.locales=mstrmojo.provide("mstrmojo.locales",{load:function(C){var A=this;if(this.isLoaded){C();C=null;}else{var B={taskId:"getLocaleInfo"};if(mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){B.sessionState=mstrApp.sessionState;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(D){A.update(D);C();C=null;if(mstrmojo.expr){mstrmojo.expr.onLocaleUpdated();}mstrmojo.locales.isLoaded=true;},failure:function(D){alert(D.getResponseHeader("X-MSTR-TaskFailureMsg"));}},B);}},update:function(A){if(A){mstrmojo.hash.copy(mstrmojo.hash.obj2array(A),this);}},isLoaded:false,datetime:{MONTHNAME_SHORT:[mstrmojo.desc(3852,"Jan"),mstrmojo.desc(3853,"Feb"),mstrmojo.desc(3854,"Mar"),mstrmojo.desc(3855,"Apr"),mstrmojo.desc(3856,"May"),mstrmojo.desc(3857,"Jun"),mstrmojo.desc(3858,"Jul"),mstrmojo.desc(3859,"Aug"),mstrmojo.desc(3860,"Sep"),mstrmojo.desc(3861,"Oct"),mstrmojo.desc(3862,"Nov"),mstrmojo.desc(3863,"Dec")],MONTHNAME_FULL:[mstrmojo.desc(1956,"January"),mstrmojo.desc(1957,"February"),mstrmojo.desc(1958,"March"),mstrmojo.desc(1959,"April"),mstrmojo.desc(1960,"May"),mstrmojo.desc(1961,"June"),mstrmojo.desc(1962,"July"),mstrmojo.desc(1963,"August"),mstrmojo.desc(1964,"September"),mstrmojo.desc(1965,"October"),mstrmojo.desc(1966,"November"),mstrmojo.desc(1967,"December")],dayShortNames:["S","M","T","W","T","F","S"],dayNames:[mstrmojo.desc(9379,"Sunday"),mstrmojo.desc(9380,"Monday"),mstrmojo.desc(9381,"Tuesday"),mstrmojo.desc(9382,"Wednesday"),mstrmojo.desc(9383,"Thursday"),mstrmojo.desc(9384,"Friday"),mstrmojo.desc(9385,"Saturday")],DATEINPUTFORMATS:["M/d/yy","M/d/yyyy","MMM d, yy"],TIMEINPUTFORMATS:["h:mm a","H:mm","h:mm:ss a","H:mm:ss","h:mm:ss a z"],DATEOUTPUTFORMAT:"M/d/yyyy",TIMEOUTPUTFORMAT:"h:mm:ss a",DATEDISPLAYFORMAT:"M/d/yy",TIMEDISPLAYFORMAT:"h:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:mstrmojo.desc(3945,"Include")},{did:"2",n:mstrmojo.desc(3946,"Exclude")}],BranchQual:[{did:"19",n:mstrmojo.desc(5282,"AND")},{did:"20",n:mstrmojo.desc(5283,"OR")},{did:"21",n:mstrmojo.desc(12298,"NOT")},{did:"19_21",n:mstrmojo.desc(5924,"AND NOT")},{did:"20_21",n:mstrmojo.desc(5925,"OR NOT")}],RootOperator:[{did:"19",n:mstrmojo.desc(534,"All selections")},{did:"20",n:mstrmojo.desc(535,"Any selection")}],ExprType:[{did:"2",n:mstrmojo.desc(546,"Qualify")},{did:"5",n:mstrmojo.desc(547,"Select")}],DimtyLevels:[{did:"1",n:mstrmojo.desc(2171,"Default")},{did:"2",n:mstrmojo.desc(3086,"Metric")},{did:"3",n:mstrmojo.desc(3344,"Report")}],Attribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,76",n:mstrmojo.desc(686,"Contains"),t:1,tp:1},{did:"1,79",n:mstrmojo.desc(2784,"Does not contain"),t:1,tp:1},{did:"1,77",n:mstrmojo.desc(687,"Begins with"),t:1,tp:1},{did:"1,80",n:mstrmojo.desc(2785,"Does not begin with"),t:1,tp:1},{did:"1,78",n:mstrmojo.desc(688,"Ends with"),t:1,tp:1},{did:"1,81",n:mstrmojo.desc(2786,"Does not end with"),t:1,tp:1},{did:"1,18",n:mstrmojo.desc(525,"Like"),t:1,tp:1},{did:"1,43",n:mstrmojo.desc(526,"Not Like"),t:1,tp:1},{did:"1,54",n:mstrmojo.desc(2202,"Is Null"),t:1,tp:1},{did:"1,55",n:mstrmojo.desc(2203,"Is Not Null"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1}],Metric:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,54",n:mstrmojo.desc(2202,"Is Null"),t:1,tp:1},{did:"1,55",n:mstrmojo.desc(2203,"Is Not Null"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1},{did:"2,1",n:mstrmojo.desc(529,"Highest"),t:2,tp:2},{did:"2,2",n:mstrmojo.desc(530,"Lowest"),t:2,tp:2},{did:"3,1",n:mstrmojo.desc(4407,"Highest %"),t:3,tp:3},{did:"3,2",n:mstrmojo.desc(4406,"Lowest %"),t:3,tp:3}],MetricRP:[{did:"2,13",n:mstrmojo.desc(13897,"Rank between highest"),t:2,tp:2},{did:"2,4",n:mstrmojo.desc(1101,"Exclude highest"),t:2,tp:2},{did:"2,3",n:mstrmojo.desc(13896,"Rank between lowest"),t:2,tp:2},{did:"2,5",n:mstrmojo.desc(1102,"Exclude lowest"),t:2,tp:2},{did:"3,13",n:mstrmojo.desc(13890,"Between highest")+"%",t:3,tp:3},{did:"3,4",n:mstrmojo.desc(1101,"Exclude highest")+"%",t:3,tp:3},{did:"3,3",n:mstrmojo.desc(13889,"Between lowest")+"%",t:3,tp:3},{did:"3,5",n:mstrmojo.desc(1102,"Exclude lowest")+"%",t:3,tp:3}],MDXAttribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1}],MDXMetric:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1}],SAPAttribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1}],Element:[{did:"1,22",n:mstrmojo.desc(2219,"In List"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2220,"Not In List"),t:1,tp:1}]},validation:{requiredFieldError:mstrmojo.desc(6078,"This field is required."),invalidCharError:mstrmojo.desc(7899,"This field contains invalid characters for #."),invalidDateStringError:mstrmojo.desc(7900,"This field contains invalid date/time string."),invalidNumericFormatError:mstrmojo.desc(7901,"This field contains numeric value with incorrect format."),outofRangeError:mstrmojo.desc(6079,"This field should be # between ## and ###."),noLessMinError:mstrmojo.desc(6081,"This field should be # greater than or equal to ##."),noGreaterMaxError:mstrmojo.desc(6080,"This field should be # less than or equal to ###."),failRegexTestError:mstrmojo.desc(6082,"This field failed regular expression validation."),invalidValueInListError:mstrmojo.desc(7902,"One of the value (#) in this list is not valid."),integerDataType:mstrmojo.desc(6076,"an Integer value"),numericDataType:mstrmojo.desc(6077,"a Number value"),dateDataType:mstrmojo.desc(7903,"a Date/Time value")},color:{colors:[{n:"Black",v:"#000000"},{n:"Brown",v:"#993300"},{n:"Olive Green",v:"#333300"},{n:"Dark Green",v:"#003300"},{n:"Dark Teal",v:"#003366"},{n:"Dark Blue",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grey-80%",v:"#333333"},{n:"Dark Red",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Dark Yellow",v:"#808000"},{n:"Green",v:"#008000"},{n:"Teal",v:"#008080"},{n:"Blue",v:"#0000FF"},{n:"Blue-Grey",v:"#666699"},{n:"Grey-50%",v:"#808080"},{n:"Red",v:"#FF0000"},{n:"Light Orange",v:"#FF9900"},{n:"Lime",v:"#99CC00"},{n:"Sea Green",v:"#339966"},{n:"Aqua",v:"#33CCCC"},{n:"Light Blue",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Grey-40%",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gold",v:"#FFCC00"},{n:"Yellow",v:"#FFFF00"},{n:"Bright Green",v:"#00FF00"},{n:"Turquoise",v:"#00FFFF"},{n:"Sky Blue",v:"#00CCFF"},{n:"Plum",v:"#993366"},{n:"Grey-25%",v:"#C0C0C0"},{n:"Rose",v:"#FF99CC"},{n:"Tan",v:"#FFCC99"},{n:"Light Yellow",v:"#FFFF99"},{n:"Light Green",v:"#CCFFCC"},{n:"Light Turquoise",v:"#CCFFFF"},{n:"Pale Blue",v:"#99CCFF"},{n:"Lavender",v:"#CC99FF"},{n:"White",v:"#ffffff"}],userPalette:[{n:"#F00E0E",v:"#F00E0E"},{n:"#080000",v:"#080000"},{n:"#E81A1A",v:"#E81A1A"},{n:"#6E0909",v:"#6E0909"},{n:"#4F2828",v:"#4F2828"},{n:"#141212",v:"#141212"},{n:"#D60202",v:"#D60202"},{n:"#C40404",v:"#C40404"}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,B=mstrmojo.hash,D="u;",C="-1";mstrmojo.elementHelper=mstrmojo.provide("mstrmojo.elementHelper",{buildElemsTerseID:function F(P,O,R){var N,M;for(M in P){N=P[M];if(N.v){var Q=N.v.split(";");if(Q&&Q.length>1){Q[1]=O;if(R&&Q.length>2){Q.pop();}N.v=Q.join(";");}}}return P;},buildElemsCountStr:function K(P,N){P=(!P||!P.length)?[]:P;N=(!N||!N.length)?[]:N;var O=P.length,M=N.length;if(I.find(N,"v",D)>-1){M-=1;}if(I.find(N,"v",C)>-1){M-=1;}if(I.find(P,"v",D)>-1||I.indexOf(P,D)>-1){O=M;}return this.buildElemsCountStrByNum(O,M);},buildElemsCountStrByNum:function K(N,M){if(N===M){if(M===0){return"";}return M.toString();}else{if(M===0){return N+" "+mstrmojo.desc(514);}else{if(N>M){return"("+M+")";}}}return mstrmojo.desc(4891,"").replace("##",String(N)).replace("###",String(M));},browseElements:function G(O,P,N){var M={doNotHold:!(N&&mstrApp.serverProxy),silent:true};mstrApp.serverRequest(mstrmojo.hash.copy(N,P),O,M);},getIdPresentation:function J(P){if(!!P){var O=P.charAt(0),M,N,Q;if((O>="g"&&O<="w")||(O>="V"&&O<="Z")){N=false;for(Q=1;Q<P.length;++Q){if(N){N=false;}else{switch(P.charAt(Q)){case";":return"terseLong";case"\\":N=true;break;}}}return"terse";}if(O>="B"&&O<="Q"){if(P.length>2){M=P.charAt(1);if(M>="A"&&M<="Q"){if(P.charAt(2)===":"){return"oldLong";}}}}if(P.length>=33&&P.charAt(32)===":"){return"old";}}return null;},isNullElem:function H(M){if(!M){return true;}var P=this.getIdPresentation(M),N=false,O;switch(P){case"terse":case"terseLong":O=M.substring(1,M.length).split(";");N=O[0].indexOf(this.TERSE_NULL)>-1;break;case"old":case"oldLong":N=M.indexOf(this.OLD_NULL)>-1;break;}return N;},isNonGroupNull:function(O){var M=O.eid||(O._e&&O._e.id),N=M&&M.split(":")[0];return N&&N===this.NON_GROUP_NULL;},getAttributeId:function L(O){var N,M;if(O){M=O.split(";");N=M[1];}return N;},getElementValue:function A(N){var O,M;if(N){M=N.split(";");if(M.length>2){O=M[0]+" "+M[2];}else{O=M[0];}}return O;},isAttributeIdsLinked:function E(N,M,O){var Q=false,P=B.keyarray(O);I.forEach(P,function(R){if(R===N){I.forEach(O[R],function(S){if(S===M){Q=true;return false;}});}if(Q){return false;}});return Q;},ELEM_ALL_ID:"u;",ELEM_DUMMY_ID:"-1",ELEM_SEPARATOR:"\u001E",OLD_NULL:"~!@@~~!@@~",TERSE_NULL:"\\N",NON_GROUP_NULL:"n00000000000000000000000000000000"});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array,B=mstrmojo.hash;mstrmojo.models.datasets.DataInterface=mstrmojo.provide("mstrmojo.models.datasets.DataInterface",{getFormsByAttrId:function A(F,E){var D=[];E=E||[];B.forEach(E,function(G){C.forEach(G.att||[],function(H){if(H.did===F){D=D.concat(H.fs||[]);return false;}});});D=C.filter(D,function(G){return !!G.obf;});return C.distinct(D,"fid");}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash;mstrmojo._CanSupportTransaction={_mixinName:"mstrmojo._CanSupportTransaction",updatedCellsMap:null,getUpdates:mstrmojo.emptyFn,getUpdateObject:mstrmojo.emptyFn,getKeyContext:mstrmojo.emptyFn,autoRefresh:mstrmojo.emptyFn,editNext:mstrmojo.emptyFn,buildConditions:mstrmojo.emptyFn,dataChanged:function A(G,H,F,I,D){var E=this.updateValue(G,F);this.updatedCellsMap[G]={r:H,v:F};this.controller.onTransactionUpdates(this,this.getUpdateObject(),E,D);},postBuildRendering:function B(){if(this._super){this._super();}if(!this.txModel){this.txModel=this.model.docModel||this.model;}this.updatedCellsMap=this.updatedCellsMap||{};},updateValue:function(E,D){if(this.txModel.deltaUpdate){this.txModel.deltaUpdate(this);}return false;},getUpdatedValues:function(){var E=this.updatedCellsMap,F,D,G=[];for(F in E){if(E.hasOwnProperty(F)){D={};D.v=E[F].v.v;G.push(C.copy(this.getKeyContext(F),D));}}return G;},clear:function(){this.updatedCellsMap={};},registerTxWidget:function(){function E(F,H){var G=F.node.data.k;H.txWidgets=H.txWidgets||{};H.txWidgets[G]=F;return false;}var D=this.parent;while(D){if(D.isPanelStack===true){E(this,D);}D=D.parent;}}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.mstr.ElementDataService=mstrmojo.provide("mstrmojo.mstr.ElementDataService",{getElements:function A(C,D){var B=mstrmojo.hash.copy(C,{});B.taskId=B.taskId||"browseElements";mstrApp.serverRequest(B,D,{showWait:true,hideWait:true,delay:true,silent:B.silent});}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var A=mstrmojo.array;mstrmojo.fe._IsRelationTreeNode=mstrmojo.provide("mstrmojo.fe._IsRelationTreeNode",{createSetHtml:'<span class="mstrmojo-textset mstrmojo-create-set-text" mstrAttach:click >'+mstrmojo.desc(12034,"Create a Set")+"</span>",syncRootOperator:function(){var F=this.parent,H=function(){var J=this.parent,I=[];if(J){I=J.ctxtBuilder.itemWidgets;}return I;},E,D,B,C,G;if(F){E=H.call(this);B=E.length;D=A.find(E,"noRelationOperator",true)!==-1;for(C=0;C<B;C++){G=E[C];G&&G.set("noRelationOperator",D);}this.set("noRelationOperator",D);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var L=10,C=20,a=false,l=false,W=L,b=[],V=mstrmojo.array,J=false,P,g;var B=6,X=7,A=100,j=101,O=102,F=103;function D(q,t,r){var p=t[0],o=t[1],s;q.beginPath();q.moveTo(p,o);for(s=2;s<t.length-1;s=s+2){q.lineTo(t[s],t[s+1]);}q.lineTo(p,o);q.fillStyle=r;q.stroke();q.fill();}function h(q,t,r){var p=t[0],u=t[1],s=t[2]-p,o=t[3]-u;q.fillStyle=r;q.strokeRect(p,u,s,o);q.fillRect(p,u,s,o);}function Z(w,s,x){var q=s[0],p=s[1],u=s[2],r=s[3],t=s[4],o=s[5];w.beginPath();w.arc(q,p,r,t,o,false);w.lineTo(q+u*Math.cos(o),p+u*Math.sin(o));w.arc(q,p,u,o,t,true);w.closePath();w.fillStyle=x;w.stroke();w.fill();}function M(w,s,x){var r=s[0],q=s[1],t=s[2],u=s[3],o=s[4],p=s[5];w.scale(1,p);w.beginPath();w.arc(r,q,t,u,o,false);w.lineTo(r,q);w.arc(r,q,0,o,u,true);w.closePath();w.fillStyle=x;w.stroke();w.fill();w.scale(1,1/p);}function N(x,t,z){var r=t[0],q=t[1],u=t[2],w=t[3],o=t[4],s=t[5],p=t[6];x.scale(1,p);x.beginPath();x.arc(r,q,u,w,o,false);x.lineTo(r+u*Math.cos(o),q+u*Math.sin(o)-s);x.arc(r,q-s,u,o,w,true);x.closePath();x.fillStyle=z;x.stroke();x.fill();x.scale(1,1/p);}function E(o,q,p){o.fillStyle=p;o.beginPath();o.arc(q[0],q[1],q[2],0,Math.PI*2,true);o.stroke();o.fill();}function T(p,o){return p.Point.X-o.Point.X;}function I(p,AF,AA){var AE=this.tooltipArr[AA],r=p.Text,u=p.SC,o=AE.style,AD=this.model.getZoomFactor(),w=mstrMobileApp.getDeviceDPI()/160,AB=2*w,AC=mstrApp.getScreenDimensions().w-(P*2);if(mstrApp.isTablet()){AD=(AD*w)+"em";}else{if(mstrMobileApp.getDeviceDPI()>240){AD=(AD*1.5)+"em";}else{AD+="em";}}var t="font-size:"+AD+";";t+="padding:"+AB+"px;";t+="maxWidth:"+AC+"px;";if(u){t+="border-color:#"+u;}AE.innerHTML=r;o.cssText=t;o.display="block";var z=0,s=0;var q=AE.offsetHeight,x=AE.offsetWidth;z=AF.y-q-6;s=AF.x-x-6;b.push({x:p.Point.X,y:p.Point.Y,clr:u||"#000000",top:z,left:s,width:x,height:q});}function Q(q,p,o){var s=o.left,r=Math.max(o.top,g+C);width=o.width,style=p.style,newLeft=s+width+12;if(newLeft+width<=mstrApp.getScreenDimensions().w){s=newLeft;}else{if(s<0){s=P;}}style.left=s+"px";style.top=r+"px";q.showAreaMarker(o.x,o.y,o.clr);}function f(o,AI){var AD=b[AI],AF=o.tooltipArr,AC=AF[AI].style,q=AD.left,t=AD.top,z=AD.width,u=AD.height,AA=mstrApp.getScreenDimensions().w,AB,x;if(AI>0){var w=b[AI-1],s=w.top,p=w.left,AH=p+w.width,r=p+z,AG;q=p;if(r>AH){q-=(r-AH);}else{if(r<AH){q+=(AH-r);}}if(q<0){if((z*2)+12>AA){a=false;J=true;q=P;for(AB=0;AB<AI;AB++){AG=AF[AB];w=b[AB];x=q+z-w.width;w.left=x;AG.style.left=q+z-w.width+"px";}}else{a=true;}}t=s-C-u;if(t<g){var AE=Math.abs(t)+g+C;for(AB=0;AB<AI;AB++){AG=AF[AB];w=b[AB];s=w.top+AE;w.top=s;AG.style.top=s+"px";}t+=AE;}}else{if(q<0){if((z*2)+12>AA){J=true;q=P;}else{a=true;}}if(t<g){t=g+C;}}if(!a){AC.left=q+"px";AD.left=q;}AC.top=t+"px";AD.top=t;o.showAreaMarker(AD.x,AD.y,AD.clr);}function U(t,o,r,w){var q=t.tooltipArr[o].style,s=b[o],u=b[o-r].top,p=s.width;if(w+p>mstrApp.getScreenDimensions().w){l=true;q.display="none";return ;}q.left=w+"px";q.top=u+"px";t.showAreaMarker(s.x,s.y,s.clr);}function d(AE){var AF=b.length,p=AE.tooltipArr,s=Math.ceil(AF/2),u=0,AD=1,AB=Math.min(AF,L/2),o=mstrApp.getScreenDimensions().w,r,q,AA,x;for(u=0;u<s;u++){f(AE,u);}if(a||J){for(u;u<AB;u++){f(AE,u);}if(!J){var t=u-1,AC=0,z=0,w,AG;r=b[t];q=r.left+r.width+12;for(t=u-1;t>=0;t--){AA=p[t];AG=b[t].width;if(q+AG>o){z=P+AG;if(z>AC){x=z;w=b[t];}}AA.style.left=q+"px";}if(AC>0){for(t=0;t<u;t++){AA=p[t];AA.style.left=(P+w.width-b[t].width)+"px";}}}}else{r=b[AF-1];q=r.left+r.width+12;for(u;u<AF;u++){U(AE,u,AD,q);AD+=2;if(l){break;}}if(l&&u<=AB){for(u=s;u<AF;u++){f(AE,u);p[u].style.display="block";}}}}function S(){var o=this,p=b.length;if(p===0){return ;}g=mstrApp.rootView.getTitleHeight();if(p===1){Q(o,o.tooltipArr[0],b[0]);}else{d(o);}}function K(q,o,r,p){switch(q){case X:h(o,r,p);break;case A:E(o,r,p);break;case j:Z(o,r,p);break;case O:M(o,r,p);break;case F:N(o,r,p);break;default:D(o,r,p);}}mstrmojo.graph._MobileGraphAreaHelper=mstrmojo.provide("mstrmojo.graph._MobileGraphAreaHelper",{highlightArea:function k(s,q){var r=this,o=s.getContext("2d"),p="rgba(255, 255, 255, 0.5)";r.clearHighlightArea(s);o.strokeStyle="#FFFFFF";V.forEach(q,function(t){K(t.Shape,o,t.Coords,p);});},highlightAreaInInit:function G(AA,w){var AC=AA.getContext("2d"),o=this.graphData.Areas,s="rgba(255, 255, 255, 0.5)";AC.clearRect(0,0,AA.width,AA.height);AC.strokeStyle="#FFFFFF";var p=o.length,AD=286,u=259,AB=341;var z=w.length/2,t,x;for(x=0;x<p;x++){var q=o[x],r=parseInt(q.OID,10);if(r!==AD&&r!==u&&r!==AB){continue;}if(q.SID<0||q.GID<0){continue;}for(t=0;t<z;t++){if(q.SID!==w[2*t]||q.GID!==w[2*t+1]){continue;}K(q.Shape,AC,q.Coords,s);}}},clearHighlightArea:function R(p){if(p){var o=p.getContext("2d");o.clearRect(0,0,p.width,p.height);p.width=p.width;}},showAreaMarker:function H(o,r,q){if(o>=0&&r>=0){var p=this.highlightNode.getContext("2d");p.save();p.fillStyle="#FFFFFF";p.strokeStyle=q||"#000000";p.lineWidth=2;p.beginPath();p.arc(o,r,5,0,Math.PI*2,true);p.stroke();p.fill();p.fillStyle=q||"#000000";p.beginPath();p.arc(o,r,2,0,Math.PI*2,true);p.stroke();p.fill();p.restore();}},displayTooltips:function e(o,t,s){o.sort(T);var r=this.tooltipArr,u;a=false;l=false;b=[];this.clearHighlightArea(this.highlightNode);if(!r){P=8*(mstrMobileApp.getDeviceDPI()/160);r=[];for(u=0;u<L;u++){var x=document.createElement("div");x.id="mstrmojo-mobileGraph-tooltip";x.className=mstrmojo.GraphBase.tooltipCLS;document.body.appendChild(x);r[u]=x;}this.tooltipArr=r;}W=Math.min(o.length,L);var w=mstrmojo.touchManager;if(W===0&&this._touchListener){w.detachEventListener(this._touchListener);delete this._touchListener;}else{if(W>0&&!this._touchListener){this._touchListener=w.attachEventListener("touchesBegin",this.id,function(AA){var AB=mstrmojo.all[AA.srcId];if(!(AB instanceof mstrmojo.android.ui.ActionToolbarButtons||AB instanceof mstrmojo.android.ui.Menu)){this.displayTooltips([],0,0);}});}}var q=null,z={},p;J=false;for(u=0;u<L;u++){p=r[u].style;p.left=-9999;p.display="none";}for(u=0;u<W;u++){q=o[u];z.x=q.Point.X+t;z.y=q.Point.Y+s;I.call(this,q,z,u);}S.call(this);window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},destroy:function Y(o){V.forEach(this.tooltipArr,function(p){document.body.removeChild(p);});delete this.tooltipArr;if(this._super){this._super(o);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");function C(G,H,E){var F=G.createElement("input");F.name=H;F.type="hidden";F.value=E;return F;}function B(K,J){J=J.substring(J.indexOf("?")+1,J.length);var M=J.split("&"),L="",H="";var N=/\+/g,I,F;for(I=0,F=M.length;I<F;I++){var E=M[I].split("=");L=E[0];H=E[1];if(H){H=decodeURIComponent(H.replace(N," "));}var G=document.createElement("INPUT");G.type="HIDDEN";G.name=L;G.value=H;K.appendChild(G);}return false;}mstrmojo.form={createDynamicForm:function A(E){var F=document.createElement("FORM"),G=E.indexOf("?")>0;F.name="dynamic_form";F.method="POST";F.action=(G?E.substring(0,E.indexOf("?")):E);if(G){B(F,E);}document.body.appendChild(F);return F;},sendLinkAsForm:function(E,G){var F=this.createDynamicForm(E);this.send({},F.action,F.method,G,null,null,F);},sendLink:function(E,F){if(!mstrmojo.isUrlExternal(E)){mstrmojo.form.sendLinkAsForm(E,F);}else{if(mstrmojo.array.indexOf(["_new","_blank"],F)>-1){window.open(E);}else{window.location.href=E;}}},send:function D(K,L,E,N,I,G,F){var P=((I&&I.hWin)||window).document,M=F||P.createElement("form"),J=mstrApp;K=mstrmojo.addCSRFTokenToTaskParams(K);M.method=E||"POST";if(N){M.target=N;}M.action=L||J.name;G=(G!==undefined)?G:!(M.action&&M.action.indexOf("aspx")>0)&&mstrConfig.addTimeStampToPreventCaching;if(!!J.addJSessionIdToURL&&J.httpSessionId){M.action+=";jsessionid="+J.httpSessionId;}if(G){M.action+=";uxts"+mstrmojo.now();}M.appendChild(C(P,"xts",String(mstrmojo.now())));var Q;for(Q in J.persistTaskParams){K[Q]=J.persistTaskParams[Q];}if(J.servletState&&J.name){K[J.name]=J.servletState;}if(K){var H;for(H in K){if(K[H].constructor===Array){mstrmojo.array.forEach(K[H],function(R){M.appendChild(C(P,H,R));});}else{M.appendChild(C(P,H,K[H]));}}}P.body.appendChild(M);try{M.submit();}catch(O){if(N&&O.result===2147500037&&!window.open("","","width=1,height=1,left=0,top=0,scrollbars=no")){mstrmojo.alert("*This action requires popups to be allowed in the browser.*");}else{mstrmojo.err("Form submission failed for an unknown reason.");}}P.body.removeChild(M);},addURLAsHiddenInputsToForm:B};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var G=mstrmojo.array,E=mstrmojo.desc(2412,"Default"),H=mstrmojo.desc(3433,"Font"),B=mstrmojo.desc(3434,"Number"),C=mstrmojo.desc(3435,"Alignment"),A=mstrmojo.desc(2886,"Borders"),F=mstrmojo.desc(3905,"Background");var L=[{n:E,v:"pru"}];G.forEach(["Arial","Arial Black","Arial Narrow","Arial Unicode MS","Batang","Book Antiqua","Bookman Old Style","Comic Sans MS","Courier New","Garamond","Haettenschweiler","Helvetica","Impact","Lucida Console","Lucida Sans Unicode","Map Symbols","Marlett","Monotype Corsiva","Monotype Sorts","MS Gothic","MS Outlook","Microsoft Sans Serif","MT Extra","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings"],function(M){L.push({n:M,v:M});});function K(N,M,O){return(M&&M>=N)?K(N,M-O,O).concat(M):[];}var J=K(2,12,1);J=J.concat(K(14,24,2));J=J.concat(K(36,48,12));J=J.concat(K(72,72,1));var D=[{n:E,v:"pru"}];G.forEach(J,function(M){D.push({n:String(M),v:String(M)});});mstrmojo._FormatDefinition={Formats:[{n:H},{n:B},{n:C},{n:mstrmojo.desc(3436,"Color and Lines")}],FormatTarget:[{n:mstrmojo.desc(7942,"Element Header"),v:1,p:"header_format"},{n:mstrmojo.desc(7943,"Element Value"),v:2,p:"grid_format"},{n:mstrmojo.desc(7944,"Individual Items Header"),v:3,p:"child_header_format"},{n:mstrmojo.desc(7945,"Individual Items Value"),v:4,p:"child_grid_format"}],MetricFormatTarget:[{n:mstrmojo.desc(9710,"Metric Headers"),v:1,p:"header_format"},{n:mstrmojo.desc(9711,"Metric Values"),v:2,p:"grid_format"}],MetricValueFormats:[{n:B},{n:C},{n:H},{n:A},{n:F}],MetricHeaderFormats:[{n:B},{n:C},{n:H},{n:A},{n:F},{n:mstrmojo.desc(12139,"Chart")}],NumberFormatCategory:{Automatic:-3,Default:-2,General:9,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7},DefaultFormat:{FormattingAlignment:{Horizontal:"1",Vertical:"1",TextWrap:"0",TextDirection:"0"},FormattingBorder:{HInsideStyle:"1",VInsideStyle:"1",TopStyle:"1",LeftStyle:"1",BottomStyle:"1",RightStyle:"1",HInsideColor:"0",VInsideColor:"0",TopColor:"0",LeftColor:"0",BottomColor:"0",RightColor:"0",Border3DStyle:"0",Border3DWeight:"0",Border3DBottomColor:"0",Border3DLeftColor:"0",Border3DRightColor:"0",Border3DTopColor:"0"},FormattingFont:{Name:"Arial",Bold:"0",Italic:"0",Size:"10",Strikeout:"0",Underline:"0",Color:"0",Script:"0"},FormattingNumber:{Category:"9",DecimalPlaces:"0",ThousandSeparator:"-1",CurrencySymbol:"$",CurrencyPosition:"0",Format:"General",NegativeNumbers:"3"},FormattingPadding:{LeftPadding:"1",RightPadding:"1",TopPadding:"1",BottomPadding:"1",LineSpacing:"0"},FormattingPatterns:{FillColor:"16777215",PatternColor:"8650752",PatternStyle:"1",FillStyle:"0",ApplyToGraphThreshold:"0",GradientColor:"16777215",GradientAngle:"0",GradientXOffset:"0",GradientYOffset:"0",SelectorSelectionColor:"16167264",SelectorSelectionFillStyle:"0",SeriesFillColor:"pru",SeriesPatternColor:"8650752",SeriesPatternStyle:"1",SeriesFillStyle:"0",SeriesApplyToGraphThreshold:"0",SeriesGradientColor:"16777215",SeriesGradientAngle:"0",SeriesGradientXOffset:"0",SeriesGradientYOffset:"0",SeriesSelectorSelectionColor:"16167264",SeriesSelectorSelectionFillStyle:"0"}},Families:L,Sizes:D,SizesInVI:D.slice(7,19),Styles:[{n:E,v:"pru"},{n:mstrmojo.desc(3440,"Regular"),v:"0,0"},{n:mstrmojo.desc(2718,"Bold"),v:"-1,0",v2:"-1,"},{n:mstrmojo.desc(2719,"Italic"),v:"0,-1",v2:",-1"},{n:mstrmojo.desc(3441,"Bold Italic"),v:"-1,-1"}],Effects:[{n:"Underline",v:0},{n:"Strike",v:1}],Category:[{n:E,v:-2},{n:mstrmojo.desc(2378,"General"),v:9},{n:mstrmojo.desc(2050,"Fixed"),v:0},{n:mstrmojo.desc(2051,"Currency"),v:1},{n:mstrmojo.desc(2052,"Date"),v:2},{n:mstrmojo.desc(2170,"Time"),v:3},{n:mstrmojo.desc(2053,"Percentage"),v:4},{n:mstrmojo.desc(2054,"Fraction"),v:5},{n:mstrmojo.desc(2055,"Scientific"),v:6},{n:mstrmojo.desc(2056,"Custom"),v:7}],MaxNegativeDidigts:30,FixedNegative:[{n:"-1,234.12",v:1,f:"#,##0.00"},{n:"-1,234.12",r:true,v:5,f:"#,##0.00;[RED]-#,##0.00"},{n:"1,234.12",r:true,v:2,f:"#,##0.00;[RED]#,##0.00"},{n:"(1,234.12)",v:3,f:"#,##0.00;(#,##0.00)"},{n:"(1,234.12)",r:true,v:4,f:"#,##0.00;[RED](#,##0.00)"}],CurrencyNegative:[{n:"-$1,234.12",v:1,f:'"$"#,##0.00'},{n:"-$1,234.12",r:true,v:5,f:'"$"#,##0.00;[RED]-"$"#,##0.00'},{n:"$1,234.12",r:true,v:2,f:'"$"#,##0.00;[RED]"$"#,##0.00'},{n:"($1,234.12)",v:3,f:'"$"#,##0.00;("$"#,##0.00)'},{n:"($1,234.12)",r:true,v:4,f:'"$"#,##0.00;[RED]("$"#,##0.00)'}],CurrencyPosition:[{n:mstrmojo.desc(2194,"Left"),v:0},{n:mstrmojo.desc(2195,"Right"),v:1},{n:mstrmojo.desc(2183,"Left with space"),v:2},{n:mstrmojo.desc(2182,"Right with space"),v:3}],Date:[{n:mstrmojo.desc(2231,"4/7"),v:"m/d"},{n:mstrmojo.desc(2232,"04/07"),v:"mm/dd"},{n:mstrmojo.desc(2233,"4/7/98"),v:"m/d/yy"},{n:mstrmojo.desc(2234,"04/07/98"),v:"mm/dd/yy"},{n:mstrmojo.desc(2235,"04/07/1998"),v:"mm/dd/yyyy"},{n:mstrmojo.desc(2236,"7-Apr"),v:"d-mmm"},{n:mstrmojo.desc(2237,"7-Apr-98"),v:"d-mmm-yy"},{n:mstrmojo.desc(2238,"Apr-98"),v:"mmm-yy"},{n:mstrmojo.desc(2239,"Apr '98"),v:"mmm 'yy"},{n:mstrmojo.desc(2240,"April 1998"),v:"mmmm yyyy"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2243,"April 7, 1998"),v:"mmmm d, yyyy"}],Time:[{n:mstrmojo.desc(2244,"15:41"),v:"h:mm"},{n:mstrmojo.desc(2245,"3:41 PM"),v:"h:mm AM/PM"},{n:mstrmojo.desc(2246,"15:41:46"),v:"h:mm:ss"},{n:mstrmojo.desc(2247,"3:41:46 PM"),v:"h:mm:ss AM/PM"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2250,"04/07/98 15:41"),v:"mm/dd/yy h:mm"},{n:mstrmojo.desc(2248,"04/07/98 3:41 PM"),v:"mm/dd/yy h:mm AM/PM"}],PercentNegative:[{n:"-12.12%",v:1,f:"0.00%"},{n:"-12.12%",r:true,v:5,f:"0.00%;[RED]-0.00%"},{n:"12.12%",r:true,v:2,f:"0.00%;[RED]0.00%"},{n:"(12.12%)",v:3,f:"0.00%;(0.00%)"},{n:"(12.12%)",r:true,v:4,f:"0.00%;[RED](0.00%)"}],Fraction:[{n:"12 1/3",v:"# ?/?"},{n:"37/3",v:"?/?"},{n:"12 26/81",v:"# ??/??"},{n:"998/81",v:"??/??"}],TextDirection:[{n:E,v:"pru"},{n:mstrmojo.desc(4601,"Horizontal"),v:0},{n:mstrmojo.desc(5156,"-90 Degree"),v:-90}],Horizontal:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2378,"General"),v:1},{n:mstrmojo.desc(2194,"Left"),v:2},{n:mstrmojo.desc(2193,"Center"),v:3},{n:mstrmojo.desc(2195,"Right"),v:4},{n:mstrmojo.desc(2068,"Justify"),v:6}],Vertical:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2256,"Top"),v:1},{n:mstrmojo.desc(2067,"Center"),v:2},{n:mstrmojo.desc(2257,"Bottom"),v:3}],TextWrap:[{v:0},{v:-1}],BorderStyles:[{n:E,v:"pru"},{n:mstrmojo.desc(2258,"None"),v:0},{n:mstrmojo.desc(2259,"Dashed"),v:3},{n:mstrmojo.desc(2260,"Dotted"),v:4},{n:mstrmojo.desc(2261,"Hair"),v:7},{n:mstrmojo.desc(2262,"Thin"),v:1},{n:mstrmojo.desc(2264,"Thick"),v:5},{n:mstrmojo.desc(2265,"Double"),v:6}],extractModel:function(O,Q,N){var S=N||this.DefaultFormat,R;for(R in O){var M=O[R];if(!M.attachEventListener){if(!mstrmojo.hash.isEmpty(M)){Q[R]=M;}}else{var P;for(P in M){if(S[R]&&S[R][P]){if(!Q[R]){Q[R]={};}Q[R][P]=M[P];}}}}},getAvailableFonts:function I(){var M={success:function(O){if(O.name==="fontPicker"){var N=[{n:E,v:"pru"}];mstrmojo.array.forEach(O.shortcuts,function(P){N.push({n:P.attributes[1].value,v:P.attributes[1].value});});mstrmojo._FormatDefinition.Families=N;}}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,M,{taskId:"getSystemPickerJson",name:"fontPicker"},false,null,true);},getStandardFormat:function(N,M){var P=mstrmojo.hash.clone(M||this.DefaultFormat),O;N=N||{};for(O in P){N[O]=N[O]||{};}for(O in N){if(!N[O].attachEventListener){N[O]=mstrmojo.hash.make(N[O],mstrmojo.Obj);}}return N;},saveFormatModel:function(Q,W,N,X){var V=X||this.DefaultFormat,S,M;for(S=0;S<N.length;S++){var R=N[S],P=W[R]||null,U=Q[R];if(U===undefined){delete W[R];continue;}for(M in V){var T=V[M],O;if((!P&&!U)||(P&&!P[M]&&!U[M])){continue;}for(O in T){if(U[M]===undefined||U[M]===""||U[M][O]==="pru"||U[M][O]===undefined){if(P&&P[M]&&(P[M][O]!==undefined&&P[M][O]!==null&&P[M][O]!=="pru")){P[M][O]="pru";}}else{P=P||{};P[M]=P[M]||{};P[M][O]=U[M][O];}}}if(P){W[R]=P;}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var H="#000000",E=Math.round;function N(X){return("0"+parseInt(X,10).toString(16)).slice(-2);}mstrmojo.color=mstrmojo.provide("mstrmojo.color",{rgbStr2rgb:function V(X){return X.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i).slice(1);},rgbStr2hex:function F(X){if(X.indexOf("rgb")>=0){var Y=this.rgbStr2rgb(X);return"#"+this.rgb2hex(Y[0],Y[1],Y[2]);}return X;},rgb2hex:function B(Z,Y,X){return N(Z)+N(Y)+N(X);},rgb2hsv:function U(X,f,k){var a=Math.min(X,f,k),l=Math.max(X,f,k),e=0,q,p;p=l/255;q=(l!==0)?(parseFloat(l)-parseFloat(a))/parseFloat(l):0;if(q===0){e=0;}else{var j=l-a,Y=(l-X)/j,Z=(l-f)/j,o=(l-k)/j;if(X===l){e=o-Z;}else{if(f===l){e=2+Y-o;}else{e=4+Z-Y;}}e=e/6;if(e<0){e=e+1;}}return[E(e*360),E(q*100),E(p*100)];},rgb2hsl:function D(X,d,e){X/=255;d/=255;e/=255;var f=Math.max(X,d,e),Z=Math.min(X,d,e),Y=(f+Z)/2,a,k;if(f===Z){a=k=0;}else{var j=f-Z;k=Y>0.5?j/(2-f-Z):j/(f+Z);switch(f){case X:a=(d-e)/j+(d<e?6:0);break;case d:a=(e-X)/j+2;break;case e:a=(X-d)/j+4;break;}a/=6;}return[a,k,Y];},hsl2rgb:function C(e,k,d){var a=function a(h,g,b){if(b<0){b+=1;}if(b>1){b-=1;}if(b<1/6){return h+(g-h)*6*b;}if(b<1/2){return g;}if(b<2/3){return h+(g-h)*(2/3-b)*6;}return h;},X,f,j;if(k===0){X=f=j=d;}else{var Y=d<0.5?d*(1+k):d+k-d*k,Z=2*d-Y;X=a(Z,Y,e+1/3);f=a(Z,Y,e);j=a(Z,Y,e-1/3);}return[E(X*255),E(f*255),E(j*255)];},hsl2hex:function I(Z,Y,X){return"#"+mstrmojo.array.map(this.hsl2rgb(Z,Y,X),function(a){return N(a);}).join("");},hex2rgb:function P(a){var X=this.fixFullHexValue("#"+a.replace("#","")),Y=[],Z;X=X.replace("#","");for(Z=0;Z<3;Z++){Y.push(parseInt(X.substr(Z*2,2),16));}return Y;},hex2bgr:function K(X){return this.hex2rgb(X).reverse();},hex2hsv:function S(Y){var X=this.hex2rgb(Y);return this.rgb2hsv(X[0],X[1],X[2]);},hex2hsl:function W(X){return this.rgb2hsl.apply(this,this.hex2rgb(X));},hsv2rgb:function G(j,x,u){j=j/360;x=x/100;u=u/100;var X,k,o;if(x===0){X=u*255;k=u*255;o=u*255;}else{var a=j*6;if(a===6){a=0;}var f=Math.floor(a);var Z=u*(1-x);var Y=u*(1-x*(a-f));var w=u*(1-x*(1-(a-f)));var l,d,e;switch(f){case 0:l=u;d=w;e=Z;break;case 1:l=Y;d=u;e=Z;break;case 2:l=Z;d=u;e=w;break;case 3:l=Z;d=Y;e=u;break;case 4:l=w;d=Z;e=u;break;default:l=u;d=Z;e=Y;break;}X=l*255;k=d*255;o=e*255;}return[E(X),E(k),E(o)];},hsv2hex:function L(a,Z,X){var Y=this.hsv2rgb(a,Z,X);return this.rgb2hex(Y[0],Y[1],Y[2]);},getContrastingColor:function M(a,Y,X){var Z=this.hex2rgb(a);return(((Z[0]*299)+(Z[1]*587)+(Z[2]*114))/1000<125)?Y:X;},getHighlightColor:function R(h,e){var X,f,j,k,l=this.hex2rgb(!e?"#FFCE7F":"#EFE6D8"),d=parseInt(h[0],10),Z=parseInt(h[1],10),p=parseInt(h[2],10),a=parseInt(l[0],10),Y=parseInt(l[1],10),o=parseInt(l[2],10);X=(d*a)/255;f=(Z*Y)/255;j=(p*o)/255;k=d*0.3+Z*0.59+p*0.11;if(k<85){X=X+(63*(85-k)/85);X=X>255?255:X;f=f+(63*(85-k)/85);f=f>255?255:f;j=j+(63*(85-k)/85);j=j>255?255:j;}return"#"+this.rgb2hex(E(X),E(f),E(j));},get3DBorderColor:function Q(Z,e){var Y=parseInt(Z[0],10)*0.3+parseInt(Z[1],10)*0.59+parseInt(Z[2],10)*0.11;var d=parseInt(Z[0],10);var a=parseInt(Z[1],10);var X=parseInt(Z[2],10);switch(e){case"light":if(Y>150){d=d*0.9;a=a*0.9;X=X*0.9;}else{d=d*0.6+102;a=a*0.6+102;X=X*0.6+102;}break;case"dark":if(Y>10){d=d*0.4;a=a*0.4;X=X*0.4;}else{d=d*0.8+30;a=a*0.8+30;X=X*0.8+30;}break;}return"#"+this.rgb2hex(E(d),E(a),E(X));},encodeColor:function J(X,Y){if(Y!==undefined&&(X===null||X.length===0||X==="undefined")){X=Y;}if(X==="transparent"){return -1;}if(parseInt(X,10)===-2){return -2;}if(X.substring(0,1)==="#"){X=X.substring(1);}return parseInt(X.substring(4)+X.substring(2,4)+X.substring(0,2),16);},decodeColor:function A(X){X=parseInt(X,10);if(X===0){return H;}var Y=16777216+(X&255)*65536+(X&65280)+(X&16711680)/65536;return"#"+Y.toString(16).substring(1).toUpperCase();},fixFullHexValue:function T(X){if(X&&X.length===4){return X.replace(/([0-9a-f])/ig,"$1$1");}return X;},findMidColorHex:function O(a,Z){var b=this.hex2rgb(a),X=this.hex2rgb(Z),Y=[];b.forEach(function(d,e){Y.push(parseInt((d+X[e])/2,10));});return("#"+this.rgb2hex(Y[0],Y[1],Y[2]));}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var G=mstrmojo.array;function B(){var H=this.buildConfig=this.buildConfig||{};H.pk=this.k;H.fgk=this.defn&&this.defn.fgk;return H;}mstrmojo._HasBuilder={builder:null,postBuildRendering:function D(){if(!this.builtChildren){this.buildChildren();}return this._super();},getChildren:function F(){return this.model.getChildren(this.node,false);},buildChildren:function E(H){if(!this.builder||!this.model){return false;}var J=this.children;if(J&&J.length){this.set("children",[]);}var I=this.builder.build(this.getChildren(),this.model,B.call(this));if(!H){this.addChildren(I);}this.builtChildren=true;return H?I:true;},rebuildChildren:function C(K){var H=this.children.slice(0),I=this.model,J=[];K=K||H.slice(0);K.forEach(function(P){var N=G.indexOf(H,P),O=P.k;if(N===-1){throw new Error("Invalid child requested rebuild in mstrmojo._HasBuilder::rebuildChild.");}this.removeChildren(P);P.destroy();J.push(O);},this);var L=I.getChildrenByKey(this.node,false,J);var M=this.builder.build(L,I,B.call(this));this.addChildren(M);return M;},rebuildChild:function A(H){return this.rebuildChildren([H])[0];}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var E="*",A=".",C="-",J="_",H="<";var M=new RegExp("[\\"+E+"\\"+A+"\\"+C+"\\"+J+"\\"+H+"]","g"),G=E+"$&";mstrmojo.Serializer={scriptClass:"mstrmojo.Serializer",serializeValueGroup:function F(B){mstrmojo.array.forEach(B,function(D,K){B[K]=mstrmojo.Serializer.serializeValues(D);});return C+this.serializeValues(B)+J;},serializeValues:function I(D){var B=[];mstrmojo.array.forEach(D,function(K){if(typeof K==="Boolean"){K=K?"1":"0";}B.push(String(K).replace(M,G));});return B.join(A);}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var B=mstrmojo.array;function A(C){if(C.parent){if(C.parent.shouldEllipsizeChildren===undefined){mstrmojo.mixin(mstrmojo._HasEllipsis,C.parent);}C.parent.set("shouldEllipsizeChildren",true);}}mstrmojo._HasEllipsis=mstrmojo.provide("mstrmojo._HasEllipsis",{shouldEllipsize:false,shouldEllipsizeChildren:false,doEllipsize:function(){if(this.shouldEllipsizeChildren){B.forEach(this.children,function(D,C){if(D.hasRendered&&D.doEllipsize){D.doEllipsize();}});}},onshouldEllipsizeChange:function(){this._onEllipsizeFlagChange(this.shouldEllipsize,this.shouldEllipsizeChildren);},onshouldEllipsizeChildrenChange:function(){this._onEllipsizeFlagChange(this.shouldEllipsizeChildren,this.shouldEllipsize);},_onEllipsizeFlagChange:function(D,C){if(D&&!C){A(this);this.markupMethods=mstrmojo.mixin({onvisibleChange:function(){if(this._super){this._super();}if(this.visible&&this.hasRendered){this.doEllipsize();}}},mstrmojo.hash.copy(this.markupMethods));}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var E=mstrmojo.array;mstrmojo._IsPanelStack=mstrmojo.provide("mstrmojo._IsPanelStack",{_mixinName:"mstrmojo._IsPanelStack",TTL_SRC_PANEL:0,model:null,selectedIdx:undefined,init:function J(O){this._super(O);var N=this.defn;if(!N){N=this.defn=this.node&&this.node.defn;this.titleSrc=this.titleSrc||N.ttlSrc;}var M=this.selectedKey=this.defn.selKey=this.node.data.selKey;this.set("selectedIdx",E.find(this.node.data.panels,"k",M));N.attachEventListener("selKeyChange",this.id,function(P){this.set("selectedKey",P.value);});},addChildren:function L(O,U,S){var T=this.getFormats(),Q=T&&T.overflow,P=O.length,R;for(R=0;R<P;R++){var N=O[R],V=N.k;if(V){N.selected=N.visible=V===this.selectedKey;if(Q){var M=N.getFormats()||N.createEmptyFormats();if(M){M.overflow=Q;}}}}return this._super(O,U,S);},refresh:function F(){if(this.hasRendered){var M=this.defn.newSelKey||this.selectedKey;E.forEach(this.children,function(O){var N=O.k;if(N){O._delayRefresh=(N!==M);if(!O._delayRefresh){O.refresh();}}});}delete this.defn.newSelKey;},selectPanel:function B(N,O,M){var P=this.model.getDataService(),Q=P.newUpdateWithoutCmd();this.selectPanelDeferred(Q,N,O,M);if(Q.actions&&Q.actions.length>0){P.addSuppressData(Q.extras);Q.submit();}},selectPanelDeferred:function(P,N,O,M){if(N!==this.selectedKey){this.defn.set("selKeyChange",N);this.model.selectPanelDeferred(P,this.k,N,this.node.data.wid,O,M);}},onselectedKeyChange:function K(N){var O=0,R,M,P;E.forEach(this.children,function(T,S){var U=T.k;if(U){if(N.value===U){M=T;P=S-O;T.set("visible",true);T.set("selected",true);}else{if(N.valueWas===U){R=T;T.set("selected",false);T.set("visible",false);}}if(M&&R){return false;}}else{O++;}return true;});if(this.titleSrc===this.TTL_SRC_PANEL&&this.title){var Q=M&&M.title;this.set("title",Q);this.defn.ttl=Q;}this.prevSelectIdx=this.selectedIdx;this.set("selectedIdx",P);this.raiseEvent({name:"panelSelected",key:M.k});return{on:M,off:R};},getSelectedPanel:function D(){var M=0,N=this.selectedIdx,O;E.forEach(this.children,function(Q,P){if(Q.k){if(P-M===N){O=Q;return false;}}else{M++;}return true;});return O;},setDirtyChildren:function H(M){var N=this.selectedKey;E.forEach(this.children,function(P){var O=P.k;if(O){P[((M||O!==N)?"add":"remove")+"DirtyKey"](O);}});},clearDirtyChild:function I(O){var N=this.children,M=N[E.find(N,"k",O)];if(M){M.removeDirtyKey(M.k);}},isPanelStack:true,checkRequiredObjects:function C(){var M=this.txWidgets||{},N=true,O;for(O in M){N&=!!M[O].checkRequiredObjects();}return N;},updateSelectedIdx:mstrmojo.emptyFn,unrender:function G(M){delete this.defn.newSelKey;this._super(M);},switchToPanel:function A(M,N){if(N!==undefined){this.set("selectedIdx",N);}else{this.updateSelectedIdx(M);}this.children[this.selectedIdx]&&this.selectPanel(this.children[this.selectedIdx].k);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.string","mstrmojo.models.template.Titles","mstrmojo.models.template.MetricValue","mstrmojo.models.template.Headers","mstrmojo.models.datasets.DataInterface");var O=mstrmojo.array,U=mstrmojo.hash,D=mstrmojo.string,E=mstrmojo.models.datasets.DataInterface,h=D.decodeHtmlString;var G=-1,F=1,W=2,P=3;var N=1,H=2,d=3;function b(l){var o={};U.forEach(l,function(r,q){var p=[];O.forEach(r,function(s){p.push({fillColor:s.fillclr,text:s.n});});o[q]=p;});return o;}function k(q){var AC=this.getTotalRows(),s=this.data,w=[],z=s.gts.col[0],p=z?z.es:[],AB=p.length,t=0;q=U.copy(q,{minAttribute:1,minMetric:1});if(AC<q.minAttribute||AB<q.minMetric){throw"Error";}do{var o=this.getRowHeaders(t),r,l={},x=o.size();for(r=0;r<x;r++){while(r<x&&o.getHeader(r).getFormIndex()!==undefined){r++;}if(r<x){var u=o.getHeader(r);l[u.t.n]=u.getName();}}for(r=0;r<p.length;r++){var AA=this.getMetricValue(t,r).value;l[p[r].n]={v:AA.v,rv:AA.rv};}w.push(l);t++;}while(t<AC);return w;}function K(o){var l=[],p=this.data.gts.row;O.forEach(p,function(r,q){O.forEach(o,function(s){if(r.id===s.id){l[q]=true;}});});return l;}function Q(AR){var z=this.getTotalRows(),AT=this.data,x=[],AB=AT.gts.col[0],s=AB?AB.es:[],AI=s.length,w,AM=0;AR=U.copy(AR,{minAttribute:1,minMetric:1,colorByInfo:[],hasTitleName:false,hasSelection:false,needDecode:false});if(z<AR.minAttribute||AI<AR.minMetric){throw"Error";}var l=AR.needDecode,AO=AR.hasTitleName,AN=AR.hasSelection,AU=AR.hasThreshold,AG=AR.colorByInfo;var AS=AU?b(AT.th):undefined;w=K.call(this,AG);do{var p=this.getRowHeaders(AM),r={},AK,AJ=[],AQ=AG.length,o={headers:[],values:[],colorInfo:[]};for(AK=0;AK<p.size();AK++){var AL=p.getHeader(AK),AD=AL.getName(),AW=AL.t,u={name:l?h(AD):AD};if(AO){var AV=AW&&AW.n;u.tname=l?h(AV):AV;}if(AN){var AF=AW&&AW.id,AA=AL.getElementId();u.attributeSelector={n:AD,tid:AF,eid:AA,isSelectAttr:true};r[AF]=[{n:AD,id:AA}];}if(AQ&&w[AK]===true){var AC=AL.getElementId();AJ.push(AC);}o.headers.push(u);}if(AQ){o.colorInfo=AJ;}for(AK=0;AK<s.length;AK++){var AH=this.getMetricValue(AM,AK).value,AP={v:AH.v,rv:AH.rv};if(AU){var t=AS[AK],q=t&&t[AH.ti];if(q){AP.threshold=q;}}if(AO){var AE=this.getColTitles().titles[0].es[AK].n;AP.name=l?h(AE):AE;}o.values.push(AP);}if(AN){o.metricSelector=r;}x.push(o);AM++;}while(AM<z);return x;}function A(AH){var AK=this.data,r=this.getTotalRows(),s=AK.gts.col[0],p=s?s.es:[],w=p.length,x={},z=[],AB,AC=0,AA;AH=U.copy(AH,{minAttribute:1,minMetric:1,descKey:"name",childrenKey:"children",hasTitleName:false,hasSelection:false,needDecode:false,nestedLevel:undefined,colorByInfo:[]});if(r<AH.minAttribute||w<AH.minMetric){throw"Error";}var q=AH.descKey,t=AH.childrenKey,l=AH.needDecode,AE=AH.hasTitleName,AD=AH.hasSelection,o=AH.nestedLevel||0,AJ=AH.hasThreshold,u=AH.colorByInfo,AF=u.length;var AI=AJ?b(AK.th):undefined;x[q]="root";AB=K.call(this,u);var AG=function(Ac,AM,AT,AV,AP){var AQ=(Ac[t]=Ac[t]||[]),Ad=AM.getHeader(AT),Af=Ad&&Ad.t,Aa=Af&&Af.id,AY=Ad&&Ad.getName(),AU=AM&&AM.headers&&AM.headers.length||0,Ae,AX=Ad&&Ad.getElementId(),AL=O.filterOne(AQ,function(Ah){return(Ah._eid===AX);});Ae=O.some(AB,function(Ai,Ah){return Ai&&((AT-Ah)%AU===0);});if(AF&&Ae){z.push(AX);}if(!AL||(AT===o-1)){AL={_eid:AX};var AS=(Ad!==undefined);if(AS){AL[q]=l?h(AY):AY;}if(AE&&AS){var Ag=Af&&Af.n;AL.tname=l?h(Ag):Ag;}if(AD&&AS){AL.attributeSelector={n:AY,tid:Aa,eid:AX,isSelectAttr:true};}AQ.push(AL);}if(AD&&AS){AP[Aa]=[{n:AY,id:AX}];}if(AT<AM.size()-1&&(!o||(AT<o-1))){AG.call(this,AL,AM,AT+1,AV,AP);}else{var AW=this.getMetricValue(AV,0).value;if(AW){AL.value=AW.rv;AL.formattedValue=AW.v;}if(AF){AL.colorInfo=z;z=[];}AL.values=[];for(AA=0;AA<p.length;AA++){var Ab=this.getMetricValue(AV,AA).value,AN={v:Ab.v,rv:Ab.rv};if(AJ){var AR=AI[AA],AO=AR&&AR[Ab.ti];if(AO){AN.threshold=AO;}}if(AE){var AZ=this.getColTitles().titles[0].es[AA].n;AN[q]=l?h(AZ):AZ;}AL.values.push(AN);}if(AD){AL.metricSelector=AP;}}};do{AG.call(this,x,this.getRowHeaders(AC),0,AC,{});AC++;}while(AC<r);return x;}function C(l,o){var p=[];O.forEach((l.row||[]).concat(l.col||[]),function(q){if((q.id===o)&&(q.fs)){p=p.concat(q.fs);}});return p;}mstrmojo.models.template.DataInterface=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.models.template.DataInterface",data:null,init:function(l){this.data=l;},getRowTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:true});},getColTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:false});},getTotalRows:function V(){if(this.data.eg){return 0;}var p=this.data,o=p&&p.ghs,l=o&&o.rhs,q=l&&l.items;return(q&&q.length)||0;},getTotalColHeaderRows:function T(){var l=this.data.ghs.chs.items;return(l&&l.length)||0;},getTotalCols:function Y(){return this.getColHeaders(0).size();},getRowHeaders:function J(l){return new mstrmojo.models.template.Headers({data:this.data,i:l,isRow:true});},getColHeaders:function a(l){return new mstrmojo.models.template.Headers({data:this.data,i:l,isRow:false});},getMetricValue:function I(p,l){var o=this.data;return new mstrmojo.models.template.MetricValue({data:o,value:o.gvs.items&&o.gvs.items[p].items[l]});},getColumnHeaderCount:function M(){var l=this.data.gvs.items;return l?l[0].items.length:0;},getCSSString:function g(){return this.data.cssString;},isEmpty:function S(){var l=this.data.gsi;return !l||(!l.rows.length&&!l.cols.length&&!l.mx.length);},getAggregatePadding:function f(){var o=this.data.gsi&&this.data.gsi.fmts,p=function(r,q){return r+q;},l=function(r){var q=0;return["ch","rh","va"].map(function(s){var t=false;return r.map(function(u){if(o[s]&&o[s].hasOwnProperty(u)){if(!t){t=true;q++;}return o[s][u];}return 0;}).reduce(p)/r.length;}).reduce(p)/(q||1);};if(!o){return null;}return{v:l(["tp","bp"]),h:l(["rp","lp"])};},getColResizeScenario:function B(){var l=this.data;if(l.afw){return F;}else{if(l.afc===false){return P;}else{return W;}}},getColResizeInfo:function L(s){var t=this.data,q={v:this.getColResizeScenario(),widths:null};var u=t.gsi,o=t.gts||{},z=[],r=t.twm||{},w=r.top||[],x=r.bottom||[],p=0,l=function(AB,AA){if(u){u[AB].every(function(AD){var AE=AD.did,AF=C(o,AE),AC=E.getFormsByAttrId(AE,s);(AF.length?AF:[]).forEach(function(AI,AH){var AJ=AC[O.find(AC,"fid",AI.id)],AG=(x&&x[p])||{};z.push({n:AD.n+(AC.length?(" - "+AJ.fnm):""),did:AE,depth:AH+1,t:AD.t||4,width:parseInt(AG.w||0,10),widthModel:{top:(w&&w[p])||{},bottom:AG}});p++;});return !AA;});}};l("rows",false);l("mx",u.tma===1);q.widths=z;return q;},getRowResizeScenario:function R(){return !!this.data.rh?P:W;},getRowResizeInfo:function X(){var o=this.data,l=o.rh;return{v:this.getRowResizeScenario(),height:(l===undefined||l==="")?o.xrh:l};},getColumnHeaderData:function j(){var t=this.data,AA=t.gts,z=t.gts.rec,AB=[],o=[],w=AA.row;O.forEach(w,function(AD){var AC=AD.fs,AE=AD.otp===G;if(AC&&AC.length>1){O.forEach(AC,function(){AB.push(AD);});}else{AB.push(AD);}if(AE){o=AD.es;}});var s=AA.col;if(s&&s.length>0){var r=t.ghs,p=r.chs,l=p.items,x=l[l.length-1].items,q=function q(AC){var AD=AC.pi,AE=AD&&AD.ci,AF=AD&&AD.ri;if(AC.mix!==undefined){return AC;}if(AF===undefined||AE===undefined){return ;}return q(l[AF].items[AE]);};O.forEach(s,function(AC){var AD=AC.otp===G;if((AD&&(!z||w.length===0))){AB.push(AC);}if(AD){o=AC.es;}});var u=AB.length;O.forEach(x,function(AC){delete AC._ridx;});if(o.length>0){O.forEach(x,function(AF){var AC=q(AF);var AG=AC?AC.mix:(AF.pi?0:AF.idx),AE=o[AG]||o[0];var AD=AE._ridx=AE._ridx||[];if(AD.length===0){O.forEach(x,function(AI,AJ){var AH=q(AI);if(!AC||AH.mix===AG){AD.push(u+AJ);}});}AB.push(AE);});}}else{if(o.length>0){AB.push(o[0]);}}return AB;},getUnitById:function Z(p){var o=this.data.gsi,l=null;[o.rows,o.cols,o.mx].some(function(q,r){if(r===2){r=-2;}q.some(function(s,t){if(s.did===p){l={axis:r+1,depth:t+1,unit:s};}return !!l;});return !!l;});return l;},getRawData:function e(l,o){switch(l){case H:return k.call(this,o);case d:return Q.call(this,o);}return A.call(this,o);}});mstrmojo.models.template.DataInterface.inflateGridData=function(p){var q=p.gvs,o=p.ghs;if(p.egt===undefined&&(p.eg===undefined||p.eg===null)&&!!q&&U.isEmpty(q)){var l={v:"",rv:""},r={items:(o.chs.cws||[0]).map(function(){return l;})};q.items=o.rhs.items?o.rhs.items.map(function(){return r;}):[];q.show=true;}};mstrmojo.models.template.DataInterface.ENUM_GRID_RESIZE={FIT_TO_WINDOW:F,FIT_TO_CONTENTS:W,FIXED:P};mstrmojo.models.template.DataInterface.ENUM_RAW_DATA_FORMAT={TREE:N,ROWS:H,ROWS_ADV:d};}());(function(){mstrmojo.requiresCls("mstrmojo.locales");var X=function(){return mstrmojo.locales.datetime;},L=mstrmojo.string;mstrmojo.date=mstrmojo.provide("mstrmojo.date",{monthNumbers:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},REGEXPS:{DATES:{},TIMES:{}},CACHE:{PARSEDATE:{CONTAINS:{},EQUALS:{}},PARSETIME:{CONTAINS:{},EQUALS:{}}},now:Date.now||function D(){return new Date().getTime();},isDate:function Y(b,g,a){var e=this.parseDate(b,a);var f=!!(e&&this.doesDateExist(e.month,e.day,e.year));if(g){if(f){var d=this.formatDateInfo(e,X().DATEOUTPUTFORMAT);if(a){return{match:e.match,formatted:d};}return d;}return null;}return !!f;},formatDateInfo:function R(e,g){if(!g){return"";}var a=e.day,f=e.month,d=e.year;var b=g.replace(/dd/g,this.formatInteger(a,2)).replace(/d/g,Number(a)).replace(/yyyy/g,Number(d)).replace(/yy/g,this.formatInteger(Number(d)%100,2)).replace(/MMM/g,"~~~~").replace(/MM/g,"@@").replace(/M/g,"^").replace(/MMMM/g,X().MONTHNAME_FULL[Number(f)-1]).replace(/\~\~\~\~/g,X().MONTHNAME_SHORT[Number(f)-1]).replace(/\@\@/g,this.formatInteger(f,2)).replace(/\^/g,Number(e.month));return b;},parseDate:function Z(o,g,k){if(o==null){return false;}if(typeof o!=="string"){o=String(o);}o=L.trim(o);var a=this.CACHE.PARSEDATE[g?"CONTAINS":"EQUALS"],d=a[o];if(d||(d===null)){return d;}var b=null;var j;if(k){j=[k];}else{j=[].concat(X().DATEINPUTFORMATS);j.unshift(X().DATEOUTPUTFORMAT);}var e,f;for(e=0,f=j.length;e<f;e++){var h=this._buildRegExp4DateFormat(j[e]),l=h&&o.match(g?h.reContains:h.reEquals);if(l){b={match:l[0],year:h.yearIndex&&this.fourDigitYear(l[h.yearIndex]),day:h.dayIndex&&parseInt(Number(l[h.dayIndex]),10),month:h.monthIndex&&this.numericMonth(l[h.monthIndex])};break;}}a[o]=b;return b;},isTime:function I(b,f,a){var g=this.parseTime(b,a);var e=!!(g&&this.doesTimeExist(g.hour,g.min,g.sec));if(f){if(e){var d=this.formatTimeInfo(g,X().TIMEOUTPUTFORMAT);if(a){return{match:g.match,formatted:d};}return d;}return null;}return !!e;},parseTime:function J(p,g,l){if(p==null){return false;}if(typeof p!=="string"){p=String(p);}p=L.trim(p);var a=this.CACHE.PARSETIME[g?"CONTAINS":"EQUALS"],d=a[p];if(d||(d===null)){return d;}var b=null;var k;if(l){k=[l];}else{k=[].concat(X().TIMEINPUTFORMATS);k.unshift(X().TIMEOUTPUTFORMAT);}var e,f;for(e=0,f=k.length;e<f;e++){var j=this._buildRegExp4TimeFormat(k[e]),o=j&&p.match(g?j.reContains:j.reEquals);if(o){var h=j.ampmIndex&&o[j.ampmIndex];b={match:o[0],hour:j.hourIndex&&this.capitalHour(o[j.hourIndex],h),min:j.minIndex&&parseInt(Number(o[j.minIndex]),10),sec:j.secIndex&&parseInt(Number(o[j.secIndex]),10)};break;}}a[p]=b;return b;},formatTimeInfo:function S(e,b){if(!b){return"";}var d=!(Number(e.hour)%12)?12:(Number(e.hour)%12),a=b.replace(/HH/g,this.formatInteger(e.hour,2)).replace(/H/g,Number(e.hour)).replace(/hh/g,this.formatInteger(d,2)).replace(/h/g,d).replace(/mm/g,this.formatInteger(Number(e.min)||0,2)).replace(/m/g,Number(e.min)||0).replace(/ss/g,this.formatInteger(Number(e.sec)||0,2)).replace(/s/g,Number(e.sec)||0).replace(/a/g,(Number(e.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/tt/g,(Number(e.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/AM\/PM/g,(Number(e.hour)<12)?X().AM_NAME:X().PM_NAME);return a;},doesTimeExist:function G(g,b,f){var e=parseInt(g,10);if(e>=0&&e<=23){var a=parseInt(b,10);if(a>=0&&a<=59){if(!f){return true;}var d=parseInt(f,10);if(d>=0&&d<=59){return true;}}}return false;},capitalHour:function C(a,b){a=parseInt(Number(a),10);if(b&&(b.match(X().AM_NAME)||b.match(/AM/i))){return a%12;}if(b&&(b.match(X().PM_NAME)||b.match(/PM/i))){return 12+(a%12);}return a;},getTimeStamp:function O(){var b=new Date();var a=[b.getMonth()+1,b.getDate(),b.getFullYear()];var f=[b.getHours(),b.getMinutes(),b.getSeconds()];var e=(f[0]<12)?"AM":"PM";f[0]=(f[0]<12)?f[0]:f[0]-12;f[0]=f[0]||12;for(var d=1;d<3;d++){if(f[d]<10){f[d]="0"+f[d];}}return a.join("-")+" "+f.join(":")+" "+e;},isDateAndOrTime:function V(a,b){return this.isDateTime(a,b)||this.isDate(a,b)||this.isTime(a,b);},isDateTime:function B(l,a){var f=this.parseDateAndOrTime(l),j=f&&f.date,e=f&&f.time,h=!!j&&!!e&&this.doesDateExist(j.month,j.day,j.year)&&this.doesTimeExist(e.hour,e.min,e.sec);if(a){if(h){var b=this.formatDateInfo(j,X().DATEOUTPUTFORMAT),d=this.formatTimeInfo(e,X().TIMEOUTPUTFORMAT),k=l.indexOf(j.match),g=l.indexOf(e.match);return(g<k)?d+" "+b:b+" "+d;}return null;}return !!h;},parseDateAndOrTime:function Q(b,a,g){var d=this.parseDate(b,true,a);var e=L.trim((d&&d.match)?b.replace(d.match,""):b),f=this.parseTime(e,false,g);if(!d&&!f){return null;}return{date:d,time:f};},inDateTimeRange:function P(d,f,j){var b=this.parseDateAndOrTime(d),g=b&&b.date,k=b&&b.time;if(!g&&!k){return 0;}if(f!=null){var e=this.parseDateAndOrTime(f);if(g&&e&&e.date){var l=this.compareDate(g,e.date);if(l<0){return -1;}if(l==0){if(k&&e.time&&(this.compareTime(k,e.time)<0)){return -1;}}}}if(j!=null){var a=this.parseDateAndOrTime(j);if(g&&a&&a.date){var h=this.compareDate(g,a.date);if(h>0){return 1;}if(h==0){if(k&&a.time&&(this.compareTime(k,a.time)>0)){return 1;}}}}return 0;},compareDate:function A(d,a){if(d===a){return 0;}var e=typeof d==="string"?this.parseDate(d):d,b=typeof a==="string"?this.parseDate(a):a;if(!e){return -1;}if(!b){return 1;}return(e.year-b.year)||(e.month-b.month)||(e.day-b.day)||0;},compareTime:function K(b,a){if(b===a){return 0;}var e=typeof b==="string"?this.parseTime(b):b,d=typeof a==="string"?this.parseTime(a):a;if(!e){return -1;}if(!d){return 1;}return(e.hour-d.hour)||(e.min-d.min)||(e.sec-d.sec)||0;},compareDateTime:function U(b,a){return this.compareDate(b,a)||this.compareTime(b,a);},compareDateAndOrTime:function E(j,g){if(j===g){return 0;}var b=typeof j==="string"?this.parseDateAndOrTime(j):j,a=typeof g==="string"?this.parseDateAndOrTime(g):g;if(!b){return -1;}if(!a){return 1;}var h=b.date,f=a.date,e=b.time,d=a.time;return this.compareDate(h,f)||this.compareTime(e,d);},_buildRegExp4DateFormat:function N(d){if(!d){return null;}var f=this.REGEXPS.DATES[d];if(!f){if(!this.REGEXPS.MONTHNAME_FULL){this.REGEXPS.MONTHNAME_FULL=X().MONTHNAME_FULL.join("|");this.REGEXPS.MONTHNAME_SHORT=X().MONTHNAME_SHORT.join("|");}f=this.REGEXPS.DATES[d]={};f.formatStr=d;var b=f.reStr=d.replace(/([^M|d|y|\s])/g,"\\$1").replace(/dd/g,"~~~~").replace(/d/g,"(\\d{1,2})").replace(/\~\~\~\~/g,"(\\d\\d)").replace(/yyyy/g,"(\\d\\d\\d\\d)").replace(/yy/g,"(\\d\\d)").replace(/MMMM/g,"@@@@").replace(/MMM/g,"@@@").replace(/MM/g,"(\\d\\d)").replace(/M/g,"(\\d{1,2})").replace("@@@@","("+this.REGEXPS.MONTHNAME_FULL+")").replace("@@@","("+this.REGEXPS.MONTHNAME_SHORT+")");f.reEquals=new RegExp("^"+b+"$");f.reContains=new RegExp("^"+b+"\\b");var g=[{key:"monthIndex",index:d.indexOf("M")},{key:"dayIndex",index:d.indexOf("d")},{key:"yearIndex",index:d.indexOf("y")}];g.sort(function(j,h){return j.index-h.index;});var a=1,e;for(e=0;e<3;e++){f[g[e].key]=g[e].index>-1?a++:null;}}return f;},_buildRegExp4TimeFormat:function F(e){if(!e){return null;}var g=this.REGEXPS.TIMES[e];if(!g){if(!this.REGEXPSTR_AMPM){this.REGEXPSTR_AMPM=[X().AM_NAME,X().PM_NAME,String(X().AM_NAME).toLowerCase(),String(X().PM_NAME).toLowerCase()].join("|");}g=this.REGEXPS.TIMES[e]={};g.formatStr=e;var d=e.replace(/\'\'/g,'"');var h=d.match(/\'(.+?)\'/g);d.replace(/\'(.+?)\'/g,"*");d=d.replace(/([^H|h|m|s|z|Z|a|t|\s|A|P|M|\/])/g,"\\$1").replace(/HH|hh/g,"(\\d\\d)").replace(/H|h/g,"(\\d{1,2})").replace(/mm/g,"(\\d\\d)").replace(/m/g,"(\\d{1,2})").replace(/ss/g,"(\\d\\d)").replace(/s/g,"(\\d{1,2})").replace(/a/g,"("+this.REGEXPSTR_AMPM+")").replace(/AM\/PM/,"("+this.REGEXPSTR_AMPM+")").replace(/tt/g,"("+this.REGEXPSTR_AMPM+")").replace(/z|Z/g,"(.+?)");var f,a;for(f=1,a=(h&&h.length)||0;f<a;f++){d=d.replace(/\*/,h[f]);}d=d.replace(/\"/g,"'");g.reEquals=new RegExp("^"+d+"$");g.reContains=new RegExp(d);var j=[{key:"hourIndex",index:e.search(/h|H/)},{key:"minIndex",index:e.indexOf("m")},{key:"secIndex",index:e.indexOf("s")},{key:"ampmIndex",index:e.search(/tt|a|AM\/PM/)},{key:"zoneIndex",index:e.search(/z|Z/)}];j.sort(function(l,k){return l.index-k.index;});var b=1;for(f=0;f<5;f++){g[j[f].key]=j[f].index>-1?b++:null;}}return g;},doesDateExist:function M(e,a,b){var d=new Date(b,e-1,a);return b==d.getFullYear()&&e==d.getMonth()+1&&a==d.getDate();},fourDigitYear:function T(b){b=parseInt(Number(b),10);if(!isNaN(b)){var a=(X().TWODIGITYEARSTART%100)||0;if(b>=0&&b<=a){b=2000+b;}else{if(b>a&&b<100){b=1900+b;}}}return b;},numericMonth:function W(f){var e=parseInt(Number(f),10),d=mstrmojo.array;if(!isNaN(e)){return e;}var a=(f&&f.length)||0,b=-1;if(a){if(a<=3){b=d.indexOf(X().MONTHNAME_SHORT,f);}if(b===-1){b=d.indexOf(X().MONTHNAME_FULL,f);}}return b+1;},formatInteger:function H(d,b){var g=String(d),f=Math.max(b-g.length,0);if(f>0){var a=[g],e;for(e=1;e<=f;e++){a.push("0");}g=a.reverse().join("");}return g;},getFirstDateOfMonth:function(b,a){return new Date(b,a-1,1);},getDateObject:function(h,a,g,e,f,b){h=h||0;a=a||1;g=g||1;e=e||0;f=f||0;b=b||0;return new Date(h,a-1,g,e,f,b);},getDateFromDateInfo:function(a){return this.getDateObject(a.date&&a.date.year,a.date&&a.date.month,a.date&&a.date.day,a.time&&a.time.hour,a.time&&a.time.min,a.time&&a.time.sec);},getDateJson:function(a){return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),min:a.getMinutes(),sec:a.getSeconds()};},isLeapYear:function(a){return !(a%400)||(!(a%4)&&!!(a%100));},getDaysOfMonth:function(d,a){var b=[31,28,31,30,31,30,31,31,30,31,30,31];if(a==2&&this.isLeapYear(d)){return 29;}return b[a-1];},getPreMonth:function(b,a){if(a===1){return{y:b-1,m:12};}return{y:b,m:a-1};},getNextMonth:function(b,a){if(a===12){return{y:b+1,m:1};}return{y:b,m:a+1};}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.string","mstrmojo.array");var N=mstrmojo.locales,I=mstrmojo.string,Q=window.mstrConfig,F=mstrmojo.array,K=function(){return mstrmojo.locales.number.THOUSANDSEPARATOR;},R=function(){return mstrmojo.locales.number.DECIMALSEPARATOR;},C=Q.units,T={CM:1,IN:2,MM:3,PT:4,PC:5,PX:6},A={1:"cm",2:"in",3:"mm",4:"pt",5:"pc",6:"px"},E={DEFAULT:-2,FIXED:0,CURR:1,PERCENT:4,FRACTION:5,SCIENTIFIC:6,GENERAL:9};var G=96;String.prototype.reverse=function(){var W="",V;for(V=this.length;V>0;--V){W+=this.charAt(V-1);}return W;};function M(V,X){V=V||"";X=X||V.match(/\".+?\"/g)||[];for(var W=0;W<X.length;W++){V=V.replace(X[W],X[W].substring(1,X[W].length-1).replace(/\$/g,"$$$$"));}return V;}function U(a){var V=86400000,Z=new Date(1900,0,1,0,0,0,0),W=Math.floor(a)-1,Y=a-W-1;if(a>=59){W--;}var X=new Date(Z.getTime()+(W*V));X.setTime(X.getTime()+Y*V+500);return X;}function H(Z,h,l){var a={"d+":Z.getDate(),"h+|H":Z.getHours(),"s+":Z.getSeconds()},V=N.datetime,b;if(/(y+)/.test(h)){var Y=Z.getFullYear().toString(),g=RegExp.$1,X=g.length===2,W=Y.length;h=h.replace(g,Y.substr(X?W-2:0,X?2:W));}if(/(^\[h\])/.test(h)&&l){h=h.replace(RegExp.$1,""+(Math.floor(l*24)));}if(/(\"?:\"?mm)/.test(h)){var d=Z.getMinutes();h=h.replace(RegExp.$1,":"+(RegExp.$1.length===1?d:("00"+d).substr(d.toString().length)));}if(/(AM\/PM)/.test(h)){var j=a["h+"],e=j>11;a["h+"]=j-(e?12:0);h=h.replace(RegExp.$1,e?"PM":"AM");}for(b in a){if(new RegExp("("+b+")").test(h)){h=h.replace(RegExp.$1,RegExp.$1.length===1?a[b]:("00"+a[b]).substr((a[b].toString()).length));}}if(/(mmmm)/.test(h)){h=h.replace(RegExp.$1,V.MONTHNAME_FULL[Z.getMonth()]);}else{if(/(mmm)/.test(h)){h=h.replace(RegExp.$1,V.MONTHNAME_SHORT[Z.getMonth()].substr(0,3));}else{if(/((m|M)+)/.test(h)){var f=(Z.getMonth()+1).toString();h=h.replace(RegExp.$1,RegExp.$1.length===1?f:("00"+f).substr(f.length));}}}return M(h);}function O(W,Z){var X=0,V=Z.length,Y=0;for(;X<V;X++){if(Z[X]==="0"){Y++;}else{if(Z[X]==="#"){if(Y<W){Y++;}}else{continue;}}}return Y;}mstrmojo.num=mstrmojo.provide("mstrmojo.num",{isInt:function D(V){var Y=K(),X=new RegExp("^(-)?[0-9]{1,3}(\\"+Y+"[0-9]{3})*$"),W=new RegExp("^(-)?[0-9]+$");return(String(V).indexOf(Y)&&X.test(V))||W.test(V);},isNumeric:function P(Y,Z){var X=R(),a=K(),W=new RegExp("^(-)?[0-9]{1,3}(\\"+a+"[0-9]{3})*(\\"+X+"[0-9]+)?$"),V=new RegExp("^(-)?[0-9]*(\\"+X+")?[0-9]+$");return(String(Y).indexOf(a)&&W.test(Y))||V.test(Y);},parseInteger:function L(V,W){if(!this.isInt(V)){return Number.NaN;}return parseInt(this.toString(V,true),W);},parseNumeric:function B(V){if(!this.isNumeric(V)){return Number.NaN;}return parseFloat(this.toString(V,true));},inNumericRange:function S(W,X,V){W=this.parseNumeric(W);V=(V!=null)?this.parseNumeric(String(V)):Number.NaN;X=(X!=null)?this.parseNumeric(String(X)):Number.NaN;if(V!=Number.NaN&&(W>V||isNaN(W))){return 1;}if(X!=Number.NaN&&(W<X||isNaN(W))){return -1;}return 0;},convertToUSUnits:function(Y,X,W){var V=Y;X=X||C;switch(parseInt(X,10)){case T.CM:V=parseFloat(this.toString(Y))/2.54+"";break;case T.MM:V=parseFloat(this.toString(Y))/25.4+"";break;case T.PT:V=parseFloat(this.toString(Y))/72+"";break;case T.PC:V=parseFloat(this.toString(Y))/6+"";break;case T.PX:V=parseFloat(this.toString(Y))/G+"";break;}return W?V:this.toLocaleString(V);},convertToLocalUnits:function(Y,X,W){var V;X=X||C;switch(parseInt(X,10)){case T.CM:V=(parseFloat(this.toString(Y))*2.54).toFixed(4)+"";break;case T.MM:V=(parseFloat(this.toString(Y))*25.4).toFixed(4)+"";break;case T.PT:V=(parseFloat(this.toString(Y))*72).toFixed(4)+"";break;case T.PC:V=(parseFloat(this.toString(Y))*6).toFixed(4)+"";break;case T.PX:V=(parseFloat(this.toString(Y))*G)+"";break;default:V=parseFloat(this.toString(Y)).toFixed(4)+"";}return W?V:this.toLocaleString(V);},convertUnits:function(W,X,V){return this.convertToLocalUnits(this.convertToUSUnits(V,W,true),X,true);},toLocaleString:function(V){return(V+"").replace(".",R());},toString:function(X,V){if(V===true){var W=this.getThousandSepRegex();if(W){X=String(X).replace(W,"");}}return String(X).replace(R(),".");},getThousandSepRegex:function(){if(this.thousandSeparatorRegex==null){this.thousandSeparatorRegex=new RegExp(K().replace(/(\W){1}/g,"\\$1"),"g");}return this.thousandSeparatorRegex;},addSeparators:function(X,W){var V=W;if(W=="."||W=="*"||W=="\\"){V="\\"+W;}return X.reverse().replace(/(\d{3})/g,"$1"+W).reverse().replace(new RegExp("^(-)?"+V),"$1");},format:function(Z,Y,d,V){var b="",a=(Y>0)?".":"",W=[];d=(d)?d:"";for(var X=0;X<Y;X++){W.push("0");}W=W.join("");switch(Z){case E.GENERAL:b="0.00";break;case E.PERCENT:b="0"+a+W+"%";break;case E.SCIENTIFIC:b="0"+a+W+"E+00";break;default:b='"'+d+'"#,##0'+a+W;}return this.formatByMask(b,V);},getDecimalLength:function J(X){var V=X.indexOf("."),Y=0;if(V!==-1){var W=X.substr(V+1,X.length).match(/\d+/);if(W&&W.length>0){Y=W[0].length;}}return Y;},formatByMask:function(AE,AU){var AB,t;if(isNaN(AU)){AB=new Date(AU);if(isNaN(AB)){return AU;}t=true;}if(AE==="General"){return String(parseFloat(AU).toFixed(2));}var s=String(AE).split(";"),o="",Y=s[0],k="\u00A4",AN=/"[^"]*"/g,l=(AE&&AE.replace(AN,k).replace(/\[.*\]/g,k))||"",AT=["m","y","d","h","s"],AJ=false;F.forEach(AT,function(j){AJ=AJ||l.indexOf(j,0)!==-1;});if(AJ){if(window.SSF){o=window.SSF.format(AE,AU);}if(o!==""){return o;}else{return H(t?AB:U(AU),AE,AU);}}var AI=Y.indexOf("E+"),f=Y.indexOf("%"),x=Y.match(/\".+?\"/g),z=Y.indexOf("?/?")>-1,AC=(AI!=-1)?E.SCIENTIFIC:((f!=-1)?E.PERCENT:((x)?E.CURR:z?E.FRACTION:E.FIXED)),r="",AP="",p=false,W=new String(AU),e=this.parseNumeric(AU)||parseFloat(AU);if(x){if(Y.match(/\[\$.+?\]/g)){for(var g=0;g<x.length;g++){Y=Y.replace(x[g],x[g].substring(1,x[g].length-1));if(x[g].match(/\[\$.+?\]/g)){x[g]=x[g].replace(/\[\$.+?\]/g,x[g][x[g].indexOf("[$")+2]);}}Y=Y.replace(/\[\$.+?\]/g,'"#"'.replace("#",Y[Y.indexOf("[$")+2]));}r=M(Y,x);r=r.replace(Y.replace(/\".+?\"/g,""),k);}if(e<0){W=W.substring(1,W.length);e=-e,p=true;if(s.length>1){var b=s[1].replace(/\[.*\]/,"");AP=M(b.replace(s[0],k));}}var d=function(AX,j){return(j)?j.replace(k,AX):"-"+AX;};if(AC==E.FRACTION){var AM,AL,AS,q=10,AA,w=0,AG,AO,Z,X=false,AD;if(AE.indexOf("# ")>-1){X=true;}for(AM=5;AM>0;AM--){AD="/";for(AL=0;AL<AM;AL++){AD+="?";}if(AE.indexOf(AD)>-1){for(AL=1;AL<AM;AL++){q*=10;}break;}}if(X){w=Math.floor(Number(e));e-=w;}AO=q/2;AS=-1;AG=e*q;for(AM=q-1;AM>=2;AM--){Z=(AG*AM)/q;Z=Z-Math.floor(Z);Z=Z*q;if(Math.abs(Z-q)<Z){Z=Math.abs(Z-q);}Z=Z/AM;if(Z<AO){AO=Z;AS=AM;}else{if((Z==AO)&&(Z==0)){AO=Z;AS=AM;}}}AA=Math.round(AS*AG/q);for(AM=AS;AM>=2;AM--){if((AA%AM==0)&&(AS%AM==0)){AA=AA/AM;AS=AS/AM;break;}}if(AS==q){AS=1;AA=0;}if(AA==0){AS=1;}if(AA==AS){if(X){o=""+(w+1);}else{o="1";}}else{if(X&&w>0){if(AA==0){o=w;}else{o=w+" "+AA+"/"+AS;}}else{if(AA==0){o="0";}else{o=AA+"/"+AS;}}}if(p){o=d(o,AP);}}else{if(AC==E.SCIENTIFIC){if(e!=0){var AV=Math.floor(Math.log(e)/Math.LN10),AK=e/Math.pow(10,AV),AW=Y.substring(0,AI),h=AW.indexOf("."),AF=Y.length-Y.indexOf("E+")-(""+Math.abs(AV)).length-2,AM,V=AV<0;AV=Math.abs(AV);for(AM=0;AM<AF;AM++){AV="0"+AV;}o+=Number(AK).toFixed((h!=-1)?AW.length-h-1:0);o=((p)?d(o,AP):o)+"E"+(V?"-":"+")+AV;}else{o="0";}}else{if(AC==E.PERCENT){Y=Y.substring(0,Y.length-1);W=String(e*100);}var h=Y.indexOf("."),a=0,AR,u=h>=0?Y.substring(0,h):Y;if(u.match(/[#0\?],$/)){e/=1000;W=String(e);}AR=this.getDecimalLength(W);if(h!=-1){a=O(AR,Y.substr(h+1,Y.length));}o=String(parseFloat(W).toFixed(Math.min(a,20)));var AQ=o.split(".");var AH=Y.replace(/"[^"]*"/g,"").match(/[#\d]+[^\.\d#]+[#\d]+/);if(AH!==null){AQ[0]=this.addSeparators(AQ[0],K());}o=AQ.join(R());if(AC==E.CURR){o=r.replace(k,o);if(o===r&&window.SSF){o=window.SSF.format(AE,AU);}}if(AC==E.PERCENT){o+="%";}if(p){o=d(o,AP);}}}return o;},validateFormat:function(V){var W=true,X=String(V).split(";");if(X[1]&&X[1].indexOf(X[0])<0){W=false;}return W;},generateUniqueID:function(V){var X="0123456789ABCDEF".split(""),Y=[];for(var W=0;W<V;W++){Y[W]=X[0|Math.random()*16];}return Y.join("");},countOfDecimals:function(W,X){var V=String(W);return V.length-(V.indexOf(X!==undefined?X:R())+1);}});mstrmojo.num.UNIT=T;mstrmojo.num.UNIT_SYMBOL=A;})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.locales");var d=mstrmojo.array,P=mstrmojo.meta.TP,G=mstrmojo.meta.STP,O=mstrmojo.hash,F={ANDOR:14,MQ:10,MC:12,AQ:2,AL:6,AC:9,AE:5,F:13,R:21,B:20,XML:1,RLS:15},B={};var W;for(W in F){B[F[W]]=true;}var a={};a[F.AQ]="a";a[F.AL]="a";a[F.AC]="a";a[F.AE]="a";a[F.MQ]="m";a[F.MC]="m";a[F.F]="f";a[F.R]="r";a[F.XML]="p";var K={};K[F.MQ]=["not","m","fn","fnt","cs","dmy","idcsi"];K[F.MC]=["not","m","fn","fnt","m2","m3","p","dmy","idcsi"];K[F.AE]=["not","a","fn","es","a2","fm2","p"];K[F.AQ]=["not","a","fm","fn","cs"];K[F.AL]=["not","a","fm","fn","cs"];K[F.AC]=["not","a","fm","a2","fm2","a3","fm3","fn","cs"];K[F.R]=["not","r"];K[F.F]=["not","f"];K[F.XML]=["not","n","p"];var M={};M[F.MQ]="METRIC_FNS";M[F.MC]="METRIC_FNS";M[F.AQ]="FORM_FNS";M[F.AL]="FORM_FNS";M[F.AC]="FORM_FNS";M[F.AE]="ELEM_FNS";var N={FILTER:1,REPORT:3,METRIC:4,FOLDER:8,PROMPT:10,FUNCTION:11,ATTR:12,FACT:13,DIM:14,FORM:21,ROLE:43,CONS:47},b={FILTER:256,CUSTOMGROUP:257,PROMPT:2560,PROMPT_BOOLEAN:2561,PROMPT_LONG:2562,PROMPT_STRING:2563,PROMPT_DOUBLE:2564,PROMPT_DATE:2565,PROMPT_OBJECTS:2566,PROMPT_ELEMENTS:2567,PROMPT_EXPRESSION:2568,PROMPT_EXPRESSION_DRAFT:2569,PROMPT_DIMTY:2570,PROMPT_BIGDECIMAL:2571,REPORT_GRID:768,REPORT_GRAPH:769,REPORT_ENGINE:770,REPORT_TEXT:771,REPORT_DATAMART:772,REPORT_BASE:773,REPORT_GRIDGRAPH:774,REPORT_NONINTERACTIVE:775,REPORT_CUBE:776,REPORT_EMMACUBE:779,CONS:12032,NDE:12033},T={a:N.ATTR,a2:N.ATTR,m:N.METRIC,m2:N.METRIC,r:N.REPORT,f:N.FILTER,p:N.PROMPT},U={f:b.FILTER};var V={};V[F.MQ]=N.METRIC;V[F.MC]=N.METRIC;V[F.AQ]=N.ATTR;V[F.AL]=N.ATTR;V[F.AC]=N.ATTR;V[F.AE]=N.ATTR;V[F.F]=N.FILTER;V[F.R]=N.REPORT;var J=function(e){var H=e.length,h={},g;for(g=0;g<H;g++){var j=e[g];h[j.did]=j.n;}return h;},E=function(f){var H=f.length,g;for(g=0;g<H;g++){var e=f[g];if("tp" in e){e.t=e.tp;}}return f;},X=function(f,h){var H=f.length,g;for(g=0;g<H;g++){var e=f[g];if("tp" in e){if(h){e.t=h;}else{delete e.t;}}}return f;},Z=function(e,g){if(!g){g=[];}g.length=0;var f,H;for(f=0,H=e.length;f<H;f++){g[f]=e[f];}return g;},L={0:[{did:"1,76"},{did:"1,79"},{did:"1,77"},{did:"1,80"},{did:"1,78"},{did:"1,81"},{did:"1,18"},{did:"1,43"}],1:[{did:"2,1"},{did:"2,2"},{did:"3,1"},{did:"3,2"}]};var R={0:[{did:"1,22"},{did:"1,57"}]};mstrmojo.expr=mstrmojo.provide("mstrmojo.expr",{ET:F,ETs:B,ET2TGT:a,ET2COND:K,ET2TP:V,FN:{EQUAL:6,NOT_EQUAL:7,GREATER:8,LESS:9,GREATER_EQUAL:10,LESS_EQUAL:11,IN_LIST:22,NOT_IN_LIST:57,BETWEEN:17,NOT_BETWEEN:44,IS_NULL:54,IS_NOT_NULL:55,AND:19,OR:20,NOT:21,SEARCH:158},FN_MRP:{BETWEEN:3,EXCLUDE_TOP:4,EXCLUDE_BOTTOM:5,BETWEEN_DESCENDING:13},FNT:{DEF:1,RANK:2,PER:3},FN_SEP:",",TP:N,STP:b,DMY_TP:{ATTR:-1,DIM:-2},DTP:{UNKNOWN:-1,INTEGER:1,UNSIGNED:2,NUMERIC:3,DECIMAL:4,REAL:5,DOUBLE:6,FLOAT:7,CHAR:8,VARCHAR:9,LONGVARCHAR:10,BINARY:11,VARBIN:12,LONGVARBIN:13,DATE:14,TIME:15,TIMESTAMP:16,SHORT:21,LONG:22,MBCHAR:23,BOOLEAN:24,PATTERN:25,BIGDECIMAL:30},BFTP:{RESERVED:0,HIDDEN:-1,DATETIME:1,NUMBER:2,TEXT:3,PICTURE:4,URL:5,EMAIL:6,TAG:7,DATE:8,TIME:9,SYMBOL:10,BIGDECIMAL:11,PHONENUMBER:12},METRIC_DTP:3,FN_DTP:{NUM:0,CHAR:1,DATE:2},DTP2PROMPT_STP:{"-1":b.PROMPT,1:b.PROMPT_LONG,2:b.PROMPT_LONG,3:b.PROMPT_LONG,4:b.PROMPT_DOUBLE,5:b.PROMPT_DOUBLE,6:b.PROMPT_DOUBLE,7:b.PROMPT_DOUBLE,8:b.PROMPT_STRING,9:b.PROMPT_STRING,10:b.PROMPT_STRING,14:b.PROMPT_DATE,15:b.PROMPT_DATE,16:b.PROMPT_DATE,21:b.PROMPT_LONG,22:b.PROMPT_LONG,23:b.PROMPT_STRING,24:b.PROMPT_BOOLEAN,30:b.PROMPT_BIGDECIMAL},DTP2FN_DTP:{"-1":0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1,9:1,10:1,11:0,12:0,13:0,14:0,15:0,16:0,21:0,22:0,23:1,24:0,25:1,30:0,34:0},fnCstCount:function A(g,e){var h=this.FN,j=this.FN_MRP,H=this.FNT;if(e===H.DEF||e===undefined){switch(g){case h.BETWEEN:case h.NOT_BETWEEN:return 2;case h.IS_NULL:case h.IS_NOT_NULL:return 0;}}else{if(e===H.PER||e===H.RANK){switch(g){case j.BETWEEN:case j.BETWEEN_DESCENDING:return 2;}}}return 1;},fn_List:function S(e,H){var g=this.FN;return e==g.IN_LIST||e==g.NOT_IN_LIST;},fn_AC_MC:function Y(e,H){var g=this.FN;return(e==g.EQUAL)||(e==g.NOT_EQUAL)||(e==g.GREATER)||(e==g.LESS)||(e==g.GREATER_EQUAL)||(e==g.LESS_EQUAL);},fnName:function Q(j,h,e,g){var H=this[M[j]];if(H&&H.constructor===Object){H=H[this.DTP2FN_DTP[g]]||H["*"];}if(j===F.MQ){H=H.concat(mstrmojo.locales.expression.MetricRP);}var f=d.find(H,"did",(e||1)+this.FN_SEP+h);if(f>-1){return H[f].n;}return"";},findTargets:function I(q,g,s){if(!s){s={};}if(q){var p;for(p in T){var AC=q[p];if(AC){if(!AC[P]){AC[P]=T[p];}if(!AC[G]&&U[p]){AC[G]=U[p];}s[AC[g]]=AC;}}if(q.dmy){var l=this.TP.ATTR,w=this.DMY_TP.ATTR,f=q.dmy.uts,AB,e;for(AB=0,e=(f&&f.length)||0;AB<e;AB++){var o=f[AB];if(o&&o.utp===w){var j=o.utgt;if(!j.t){j.t=l;}s[j[g]]=j;}}}var H=q.nds,r,z;for(r=0,z=(H&&H.length)||0;r<z;r++){this.findTargets(H[r],g,s);}var x=q.cs,AA=x&&x.length;if(AA){for(r=0;r<AA;r++){this.findTargets(x[r],g,s);}}}return s;},onLocaleUpdated:function(){var e=mstrmojo.locales.expression,H=mstrmojo.expr;H.BRANCH_FNS=O.copy(J(e.BranchQual),H.BRANCH_FNS);H.ELEM_FNS=Z(X(e.Element,"fn"),H.ELEM_FNS);H.METRIC_FNS={"*":X(d.filter(e.Metric.concat(e.MetricRP),function(f){return f.did&&(d.find(R["0"],"did",f.did)<0);}))};H.FORM_FNS={0:X(d.filter(e.Attribute,function(f){return f.did&&(d.find(L["0"],"did",f.did)<0);})),1:X(d.filter(e.Attribute,function(f){return f.did&&(d.find(L["1"],"did",f.did)<0);})),2:X(d.filter(e.Attribute,function(f){return f.did&&(d.find(L["0"],"did",f.did)<0)&&(d.find(L["1"],"did",f.did)<0);}))};H.DIMTYLEVELS=Z(X(e.DimtyLevels),H.DIMTYLEVELS);},getSortedObjectsByTypeGroup:function D(g){var H=0,e=1,f=2;function h(j){switch(j.t){case N.METRIC:return e;case N.ATTR:case N.DIM:case N.CONS:return H;case N.FILTER:return j.st===b.CUSTOMGROUP?H:f;default:return f;}}return g.slice(0).sort(function(p,o){var q=h(p)-h(o);if(q){return q;}var l=p.n.toUpperCase(),k=o.n.toUpperCase(),j=l.localeCompare(k);if(j){return j;}return p.n.localeCompare(o.n);});},mapBaseFormTypeToDataType:function C(f){f=parseInt(f);if(f===NaN){return -1;}var e=this.BFTP,H=this.DTP;switch(f){case e.DATETIME:return H.TIMESTAMP;case e.DATE:return H.DATE;case e.TIME:return H.TIME;case e.NUMBER:return H.REAL;case e.TEXT:return H.CHAR;case e.BIGDECIMAL:return H.BIGDECIMAL;default:return H.CHAR;}}});mstrmojo.expr.onLocaleUpdated();}());(function(){mstrmojo.requiresCls("mstrmojo.storage.DOMStorage");var A=4;mstrmojo.storage.DOMLocalStorage=mstrmojo.declare(mstrmojo.storage.DOMStorage,null,{scriptClass:"mstrmojo.storage.DOMLocalStorage",init:function(B){this._super(B);try{this.mIsSupported=("localStorage" in window)&&(window.localStorage!==null);this.mStorageObj=this.mIsSupported?window.localStorage:null;this.checkVersion(A);}catch(C){this.mIsSupported=false;}}});$LS=mstrmojo.global.localStore=new mstrmojo.storage.DOMLocalStorage({itemTimeToLive:(3600*24)});})();(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var A=false,D="mstrmojo.Binding",I="bindings",H=mstrmojo.registry;function B(K){var L;for(L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function C(K,M){if(!A){mstrmojo.requiresCls(D);A=true;}var N;for(N in K){var J=K[N];if(J===null||J===undefined){continue;}var L=typeof J;if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=H.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function E(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[I]);if(K){delete this[I];this._set_bindings(I,K);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children,J=(M&&M.length)||0;if(J){var L;for(L=0;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function G(){var J=this.bindings;if(J){B(J);delete this.bindings;}},_set_bindings:function F(L,J){var K=this[I];if(J!==K){if(K){B(K);}this[I]=J;if(J){C(J,this);}return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var D=mstrmojo.registry,K=mstrmojo.array,I=mstrmojo.publisher;function G(Q,R){if(R){R.parent=Q;var P=D.ref(R);if(R!==P){delete R.parent;}return P;}return null;}function L(Q,R){var P=R.alias;if(P!==null&&P!==""){Q[P]=R;}}function N(Q,R){var P=R.alias;if(R.parent===Q){delete R.parent;}if((P!==null&&P!=="")&&(Q[P]===R)){delete Q[P];}}function A(T,Q){var P=Q&&Q.length,S,R;if(P){S=[];for(R=0;R<P;R++){var U=G(T,Q[R]);if(!U){continue;}S.push(U);L(T,U);}}return S;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,children:null,postCreateChildren:mstrmojo.emptyFn,onaddChild:null,onremoveChild:null,initChildren:function F(){var P="children",Q=this[P];if(!Q){return ;}this[P]=null;this._set_children(P,Q,true);this.postCreateChildren();},_set_children:function E(S,Q,P){var R=this.children;if(Q!==R){if(R){this.removeChildren(null,P);}this.addChildren(Q,0,P);}return false;},destroyChildren:function C(S){var R=this.children,P=(R&&R.length)||0,Q;if(P){for(Q=P-1;Q>-1;Q--){var T=R[Q];if(T&&T.destroy){T.destroy(S);if(!S){N(this,T);}}}if(!S){R.length=0;}}},invalidateChildren:function B(){mstrmojo.array.forEach(this.children,function(P){P.invalidate();});},invalidate:function H(){this.invalidateChildren();},addChildren:function O(U,Q,R){if(!U){return U;}var T=U.constructor===Array,P=A(this,T?U:[U]);if(P&&P.length){var S=this.children||[];if(Q===null||Q===undefined){Q=S.length;}this.children=K.insert(S,Q,P);if(!R&&(this.onaddChild||I.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:P,index:Q});}}return T?P:(P&&P[0]);},removeChildren:function J(V,R){var T=this.children,U=V?[V]:(this.children||[]).concat(),Q=U.length,P=-1,S;if(Q){for(S=Q-1;S>-1;S--){N(this,U[S]);}if(V){P=K.removeItem(T,V);}else{if(T){T.length=0;P=0;}}if(!R&&(this.onremoveChild||I.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:U,index:P});}}return P;},removeAndDestroyChild:function M(R,P,Q){if(R){if(R.parent!==this){throw"Unable to remove an object that is not in the children collection.";}this.removeChildren(R,P);R.destroy(Q);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher");var C=mstrmojo.publisher;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function F(N,H){var G=false,K=this["_set_"+N],I=this[N];if(K){G=K.apply(this,arguments);}else{this[N]=H;G=(I!==H);}if(G){var L=N+"Change",M=this.audibles||{},J=(M[N]===true)||((M[N]!==false)&&(M["*"]!==false));if(J&&(this["pre"+L]||this["on"+L]||this["post"+L]||C.hasSubs(this.id,L))){this.raiseEvent({name:L,prop:N,value:H,valueWas:I});}}return this;},raiseEvent:function B(H){var M=H&&H.name;if(!M){return null;}H.src=this;this.preHandleEvent(H);var K=["pre","on","post"],L=false,I,G;for(I=0,G=K.length;I<G;I++){var J=K[I]+M;if(this[J]){if(this[J](H)===false){L=true;break;}}}if(!L){this.postHandleEvent(H);C.publish(this.id,M,H);}return H;},preHandleEvent:mstrmojo.emptyFn,postHandleEvent:mstrmojo.emptyFn,attachEventListener:function A(G,H,I){return C.subscribe(this.id,G,I,H);},detachEventListener:function E(G){C.unsubscribe(G);},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.string","mstrmojo.StringBuffer");mstrmojo._XMLNode=mstrmojo.declare(null,null,{nodeName:null,init:function N(O){mstrmojo.hash.copy(O,this);},addChild:function F(P){var O=new mstrmojo._XMLNode({nodeName:P});return this.appendNode(O);},appendNode:function J(O){if(O){if(!this.children){this.children=[];}this.children.push(O);O.parent=this;}return O;},addAttribute:function L(O,P){if(O!=null){if(!this.attributes){this.attributes={};}this.attributes[O]=P;}return this;},addText:function M(O){this._addToStringMember("text",O);return this;},addRawXML:function K(O){this._addToStringMember("rawXML",O);return this;},getXMLString:function I(){var O=new mstrmojo.StringBuffer();this.buildXMLString(O);return O.toString();},buildXMLString:function E(O){O=O||new mstrmojo.StringBuffer();O.append("<").append(this.nodeName).append(" ");this._buildAttributesXMLString(O).append(">").append(((this.text!=null)?this._escapeString(this.text):"")).append(((this.rawXML!=null)?this.rawXML:""));this._buildChildrenXMLString(O).append("</").append(this.nodeName).append(">");return O;},_buildAttributesXMLString:function D(O){var Q=this.attributes;if(Q){var R;for(R in Q){if(Q[R]!=null){var P=String(Q[R]);switch(R){case"et":case"nt":case"dmt":case"ddt":case"fnt":case"tp":case"stp":break;default:P=this._escapeString(P);}O.append(R+'="'+P+'" ');}}}return O;},_escapeString:function C(O){return mstrmojo.string.escape4HTMLText(O);},_buildChildrenXMLString:function H(P){var R=this.children;var O=R&&R.length;if(O){var Q;for(Q=0;Q<O;Q++){if(R[Q]&&R[Q].buildXMLString){R[Q].buildXMLString(P);}}}return P;},_addToStringMember:function A(O,Q){var P=this[O];if(P==null){this[O]=Q;}else{this[O]=P+Q;}}});mstrmojo.XMLBuilder=mstrmojo.declare(null,null,{root:null,curNode:null,addChild:function F(O){if(!this.root){this.currentNode=this.root=new mstrmojo._XMLNode({nodeName:O});}else{this.currentNode=this.currentNode.addChild(O);}return this;},appendNode:function J(O){if(!this.root){this.currentNode=this.root=O;}else{this.currentNode=this.currentNode.appendNode(O);}return this;},addAttribute:function L(O,P){if(this.currentNode){this.currentNode.addAttribute(O,P);}else{alert("no root node");}return this;},addText:function M(O){if(this.currentNode){this.currentNode.addText(O);}else{alert("no root node");}return this;},addRawXML:function K(O){if(this.currentNode){this.currentNode.addRawXML(O);}else{alert("no root node");}return this;},closeElement:function G(){this.currentNode=this.currentNode.parent;},toString:function B(){if(this.root){return this.root.getXMLString();}return"";}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.hash");var M=mstrmojo.string,L=mstrmojo.hash,E=mstrmojo.dom;var R=mstrmojo.usesFrames?null:document.createElement("span");var J=/mstrAttach:([\w,]+)/g;var Q;function U(a){if(Q===undefined){Q=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return a.replace(J,function Z(h,k){var d=k.split(","),f=[],b=d.length,g;for(g=0;g<b;g++){var j=d[g];if(j){if(Q){if(j.indexOf("mouse")>-1){continue;}else{if(j==="click"){j="touchend";}}}f.push("on"+j+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+j+"', self, event)\"");}}return f.join(" ");});}var N="preBuildRendering",C="buildRendering",B="postBuildRendering";function X(b){var a=b.markupString;if(a.match(/mstrAttach:/)){a=U(a);if(b.markupString===b.constructor.prototype.markupString){b.constructor.prototype.markupString=a;}}var Z=M.apply(a,b);if(Z){if(mstrmojo.usesFrames){var e=(b.domNode&&b.domNode.ownerDocument)||window.document;if(!R||R.ownerDocument!==e){R=e.createElement("span");}}R.innerHTML=Z;var f=R.removeChild(R.firstChild);f.mstrmojoId=b.id;return f;}return null;}function A(b){var a=b.markupSlots,Z,d;if(a){Z={};for(d in a){Z[d]=a[d].call(b);}}return Z;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{markupString:null,markupMethods:null,markupSlots:null,onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function Y(){if((this[N]&&this[N]()===false)||(this[C]()===false)||(this[B]&&this[B]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var Z="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,Z)){this.raiseEvent({name:Z});}return true;},buildDom:function T(){return X(this);},postBuildDom:null,preBuildRendering:mstrmojo.emptyFn,buildRendering:function F(){var Z=this.domNode,a=this.buildDom();this.domNode=a;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(A(this));this.paint();if(a){var e=Z;if(!e){e=this.placeholder;if(e){if(typeof e==="string"){e=document.getElementById(e);}delete this.placeholder;}}if(e){E.replace(e,a);}}var b="onchildRenderingChange",d=this.parent;if(d&&d[b]){d[b](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function S(b){if(this.hasRendered){if(!b){try{var Z=this.domNode;if(Z.parentNode){Z.parentNode.removeChild(Z);}if(mstrmojo.dom.isIE&&Z.outerHTML!=="undefined"){Z.outerHTML="";}}catch(a){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function K(){var a=this.markupMethods;if(!a){return ;}var e=this,f=function(k){var j=a[k];if(j){try{j.apply(e,[true]);}catch(h){throw new Error(["Error in markup method.","Script class: "+e.scriptClass,"Widget id: "+e.id,"Method name: "+k,"Err: "+h.message].join("\n\n"));}}};var d=a.sequence,Z,b,g;if(d){Z=d.length||0;for(b=0;b<Z;b++){f(d[b]);}}else{for(g in a){f(g);}}},redraw:function P(){return false;},refresh:function D(Z){if(this.hasRendered){if(this.redraw()!==true){var a=this.domNode;this.unrender(true);this.placeholder=a;if(Z){Z();}this.render();}}},set:function I(d,Z){this._super(d,Z);if(this.domNode){var a=this.markupMethods,b=a&&a["on"+d+"Change"];if(b){b.apply(this);}}return this;},slotNames:null,addSlots:function G(a){var Z=this.slotNames,b;if(!Z){Z={};this.slotNames=Z;}for(b in a){this[b]=a[b];Z[b]=true;}},removeSlots:function H(Z){if(Z){var a=this.slotNames,b;for(b in Z){delete this[b];if(a){delete a[b];}}}},captureDomEvent:function W(b,Z,d,a){if(this.enabled!==false){this.raiseEvent(mstrmojo._HasMarkup.newDomEvent(b,Z,d||Z.event,a));}},playEffect:function V(a){var Z=this[a];if(Z&&Z.constructor===Object){Z=mstrmojo.insert(mstrmojo.hash.clone(Z));Z.widget=this;this[a]=Z;}if(Z){Z.play();}}});mstrmojo._HasMarkup.addMarkupMethods=function O(a,Z){a.prototype.markupMethods=L.copy(Z,L.copy(a.prototype.markupMethods));};mstrmojo._HasMarkup.MSTRDomEventType=null;mstrmojo._HasMarkup.newDomEvent=function(d,Z,b,a){return{name:d,hWin:Z,e:b,config:a,ctrlKey:E.ctrlKey(Z,b),shiftKey:E.shiftKey(Z,b),metaKey:E.isMetaKey(Z,b),cancel:function(){E.stopPropogation(Z,b);},preventDefault:function(){E.preventDefault(Z,b);},getTarget:function(){return E.eventTarget(Z,b);}};};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var T=mstrmojo.dom,K=mstrmojo.string,X=mstrmojo.array;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:T.isNSIE?"block":"table",DISPLAY_CELL:T.isNSIE?"block":"table-cell",MINHEIGHT:T.isIE6?"height":"minHeight",addClass:function L(e,d){if(e){if(d.constructor!==Array){d=[d];}var Z=e.className||"",g=" "+Z+" ",a=false,Y=d.length,b;for(b=0;b<Y;b++){var f=d[b];if(!g.match(new RegExp("\\s"+f+"\\s"))){Z+=" "+f;a=true;}}if(a){e.className=K.trim(Z);}}return e;},removeClass:function N(d,b){if(!d){return ;}if(b.constructor!==Array){b=[b];}var Z=" "+(d.className||"")+" ",Y=b.length,a;for(a=0;a<Y;a++){Z=Z.replace(new RegExp("\\s"+b[a]+"\\s","g")," ");}d.className=K.trim(Z);},addWidgetCssClass:function M(e,b){var Z=e.cssClass,d=(Z&&Z.split(" "))||[],a;b=[].concat(b);for(a=0;a<b.length;a++){var Y=b[a];if(X.indexOf(d,Y)===-1){d.push(Y);}}e.cssClass=d.join(" ");},removeWidgetCssClass:function F(f,d){var Z=f.cssClass,e=(Z&&Z.split(" "))||[],b;d=[].concat(d);for(b=0;b<d.length;b++){var Y=d[b];var a=X.indexOf(e,Y);if(a!==-1){e.splice(a,1);}}f.cssClass=e.join(" ");},toggleClass:function S(a,Z,Y){if(Y){this.addClass(a,Z);}else{this.removeClass(a,Z);}},applyShadow:function G(d,e,b,a,Y){var Z=d.style;if(T.isDXIE){Z.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+e+"px, OffY="+b+"px, Color='"+Y+"')";}else{if(T.isFF||T.isWK||T.isIE10){Z[T.CSS3_BOXSHADOW]=e+"px "+b+"px "+a+"px "+Y;}}},removeShadow:function B(Z){var Y=Z.style;if(T.isFF||T.isWK||T.isIE10){Y[T.CSS3_BOXSHADOW]="";}},setOpacity:function U(Z,b){if(T.isDXIE&&!T.isIE9){var d=Z.currentStyle.filter;var Y=null;if(d.length>0){Y=Z.filters["DXImageTransform.Microsoft.Alpha"];}if(Y){Y.opacity=b;Y.enabled=(b!==100);}else{if(b<100){var a="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")";Z.style.filter=(d||"")+" "+a;}}}else{Z.style.opacity=b/100-(T.isIE9?0.00001:0);}},buildGradient:function O(Z,b,Y){if(T.supports(T.cssFeatures.GRADIENTS)){var a={};if(T.isDXIE){a.n="filter";a.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+Z+",StartColorStr='"+b+"',EndColorStr='"+Y+"')";}else{if(T.isFF){a.n="background-image";a.v="-moz-linear-gradient("+((Z===0)?"top":"left")+","+b+","+Y+")";}else{if(T.isWK){a.n="background";a.v="-webkit-gradient(linear,"+((Z===0)?"left top, left bottom":"left top, right top")+",from("+b+"),to("+Y+"))";}else{if(T.isIE10||T.isIEW3C){a.n="background";a.v="linear-gradient("+((Z===0)?"to bottom":"to right")+","+b+","+Y+")";}}}}return a;}return null;},buildRoundCorners:function Q(e,d){if(T.supports(T.cssFeatures.ROUND_CORNERS)){var Z=e+"px";var g=Z+(d?" "+Z+" 0 0":"")+";";if(T.isFF||T.isWinPhone||T.isIE10){return"border-radius:"+g;}if(T.isWK){if(!d){return"-webkit-border-radius:"+Z+";";}var f=["left","right"],b=[],Y=-1,a;for(a=0;a<2;a++){b[++Y]="-webkit-border-top-"+f[a]+"-radius:"+Z;b[++Y]="-webkit-border-bottom-"+f[a]+"-radius:0";}return b.join(";");}}return"";},getBorderWidthsOrPaddings:function D(Z,f){var g={t:0,r:0,b:0,l:0,h:0,w:0};if(!Z){return g;}var d=Z.split(" "),Y=d.length,e;for(e=0;e<Y;e++){d[e]=Math.round(f*parseFloat(d[e])/72);}if(Y<4){if(Y===1){d[1]=d[2]=d[3]=d[0];}else{d[3]=d[1];if(Y===2){d[2]=d[0];}}}g.t=d[0];g.r=d[1];g.b=d[2];g.l=d[3];g.h=g.t+g.b;g.w=g.l+g.r;return g;},getBorderWidths:function H(Z,Y){return this.getBorderWidthsOrPaddings(Z,Y);},getPaddings:function C(Z,Y){return this.getBorderWidthsOrPaddings(Z,Y);},parkAfterFade:function A(Y){var Z=Y.target.style;if(Z.opacity===0){Z.left="-10000px";window.setTimeout(function(){Z.opacity=0.99;},0);return true;}return false;},getStyleValue:function I(Y,d){var a=(d==="float"),b;if(Y.currentStyle){d=a?"styleFloat":d;b=Y.currentStyle[d];}else{if(document.defaultView&&document.defaultView.getComputedStyle){d=a?"cssFloat":d;var Z=document.defaultView.getComputedStyle(Y,null);b=Z?Z[d]:null;}}return b;},getComputedStyle:function R(Y,a){var Z=(window.getComputedStyle)?function(b,d){return window.getComputedStyle(b,d||null);}:function(b){return b.currentStyle||{};};mstrmojo.css.getComputedStyle=Z;return Z(Y,a);},getCssTextFromObj:function E(a){var Z="",Y;for(Y in a){Z+=Y+":"+a[Y]+";";}return Z;},onTransitionEnd:function W(a,Y){var Z="transition",b=window.Modernizr;if(b.testProp(Z)){T.attachOneTimeEvent(a,T.transEndEvtNames[b.prefixed(Z)],Y);}else{window.setTimeout(Y,0);}},flashClass:function P(Z,Y,b){this.toggleClass(Z,Y,true);var a=this;window.setTimeout(function(){a.toggleClass(Z,Y,false);},b);},convertCssToCamelCase:function J(Y){return Y.replace(/\-([a-z])/gi,function(Z,a){return a.toUpperCase();});},printCSSInfo:function V(d){var h=document.styleSheets,o=h.length,e,f;for(f=0;f<o;f++){var g=h[f],k=g.cssRules,a=k?k.length:0,l=0;for(e=0;e<a;e++){var Y=k[e].selectorText;if(Y){try{l+=Y.split(",").length;}catch(b){}}}var Z=g.href;if(!d||(Z&&X.indexOf(Z,d)>-1)){console.log("Stylesheet: "+Z||"Inline CSS Block");console.log("Total rules: "+a);console.log("Total selectors: "+l);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){var D={};var B="XHRServerTransport";mstrmojo.XHRServerTransport={serverRequest:function A(I,G,F){var E=mstrmojo.all[I],H=D[G]=new mstrmojo.SimpleXHR();$MAPF(true,B,"transportRequest");if(F.params&&!F.params.sessionState&&mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){F.params.sessionState=mstrApp.sessionState;}H.request(F.config.method||"POST",F.taskURL||mstrConfig.taskURL,{success:function(J){if(J.mstrerr){J.code=J.mstrerr.code;J.message=J.mstrerr.message;}E.response(G,true,J);},failure:function(J){E.response(G,false,{code:J.getResponseHeader("X-MSTR-TaskErrorCode"),message:J.getResponseHeader("X-MSTR-TaskFailureMsg")});},complete:function(){delete D[G];},textResponse:F.callback.textResponse},F.params);},cancelRequest:function C(F){var G=D[F],E=false;if(G){E=G.cancel();delete D[F];}$MAPF(false,B,"transportRequest");return E;}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.QueuedXHR");var F=mstrmojo.hash;function J(K,L){return function(){if(K[L]){K[L]();}};}var B=[];function H(L){var K;switch(L.cacheLevel){case mstrmojo.AjaxCall.CACHELEVEL_LOCAL:if(L._cache==null){L._cache=[];}K=L._cache;break;default:if(B==null){B=[];}K=B;break;}return K;}function E(N){var M=H(N);var P={cache:M,idx:-1},O=N.params;if("xts" in O){delete O.xts;}for(var L=0,K=M.length;L<K;L++){var Q=M[L];if(Q&&F.equals(Q.url,N.url)&&F.equals(Q.params,O)){P.idx=L;break;}}return P;}function C(L){var K=H(L),M=F.copy(L.params);delete M.xts;K.push({url:L.url,params:M,res:F.copy(L.response)});}function D(K){var L=E(K);if(L&&L.idx>=0){K.response=L.cache[L.idx].res;return true;}return false;}mstrmojo.AjaxCall=mstrmojo.declare(mstrmojo.QueuedXHR,null,{scriptClass:"mstrmojo.AjaxCall",method:"POST",url:"",params:null,onsuccess:null,onerr:null,oncomplete:null,oncancel:null,readCache:false,writeCache:false,cacheLevel:"",_cache:null,useQueue:false,init:function I(K){this._super(K);F.copy(K,this);},send:function A(){var K=this;if(this.readCache&&D(this)){this.onsuccess();return ;}this.request(this.method,this.url,{success:function(){if(K.writeCache){C(K);}if(K&&K.onsuccess){K.onsuccess();}},failure:J(K,"onerr"),complete:J(K,"oncomplete")},this.params,!this.useQueue);},cancel:function G(){this._super();if(this.oncancel){this.oncancel();}}});mstrmojo.AjaxCall.CACHELEVEL_GLOBAL="global";mstrmojo.AjaxCall.CACHELEVEL_LOCAL="local";})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.fx.AnimateProp");var S=mstrmojo.css;var Q=10;function C(W,Z,Y){W.pauseScrollRendering(true);var X=W.scrollboxNode,V=W.animate?W.scrollEffect:null;if(V&&V.play){if(V.isPlaying){V.cancel();}V.props={scrollTop:{start:X.scrollTop,stop:Z,isStyle:false}};V.onEnd=function(){W.pauseScrollRendering(false,null,Y);};V.play();}else{X.scrollTop=Z;W.pauseScrollRendering(false,null,Y);}}function K(d,f,V){var W=4;if(!V){V=0;}var g=Math.round(d.renderBlockSize/2);d.fillAt(Math.max(0,f-g),f+g);var b=d.itemsContainerNode,a=b.childNodes[f],Z=d.listMapper.itemOffsetTop(d,b,null,a),e=parseInt(d.scrollboxNode.clientHeight/2,10)-a.offsetHeight/2,X=Math.max(0,d.spacerMargin+Z-e);if(Math.abs(d.scrollboxNode.scrollTop-X)>2){C(d,X,d.renderOnScroll?function(){if(V<=W){K(d,f,V++);}}:null);}else{var Y=d.animate?d.scrollEffect:null;if(Y&&Y.isPlaying&&Y.cancel){Y.cancel();d.pauseScrollRendering(false);}}}function J(X){var Y=X.itemsContainerNode,V=Y.lastChild,W=V?V.offsetTop+V.offsetHeight-Y.firstChild.offsetTop:0;return W;}function U(W){var V=J(W),X=Math.max(0,parseInt((W.scrollboxNode.clientHeight-V)/2,10));C(W,Math.max(0,W.spacerMargin-X));}function H(X){var V=X.selectedIndex,W=V>-1;X.set("hasSelection",W);if(!X.domNode){return ;}if(W){K(X,V);}else{U(X);}}function E(W){var Y=W.scrollboxNode,V=J(W),X=V>Y.clientHeight/2;S.toggleClass(W.upArrowNode,["enabled"],X);S.toggleClass(W.downArrowNode,["enabled"],X);}function N(V,W){var X=V.scrollboxNode;X.scrollTop=Math.min(Math.max(X.scrollTop+W,0),X.scrollHeight-X.offsetHeight);}function B(W,V){if(!W._scrollInter){var X=Q*(V?-1:1);W._scrollInter=window.setInterval(function(){N(W,X);},50);}}function R(V){if(V._scrollInter){window.clearInterval(V._scrollInter);V._scrollInter=null;}}mstrmojo._IsDial=mstrmojo.provide("mstrmojo._IsDial",{markupString:'<div id="{@id}" class="mstrmojo-Dial {@cssClass}" style="position:relative;"><div class="mstrmojo-Dial-uparrow"  onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], true)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], true)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"></div><div class="mstrmojo-Dial-scrollbox {@cssClass}" style="position:relative;{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-Dial-spacer" style="{@spacerCssText}"><div class="mstrmojo-Dial-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div></div></div><div class="mstrmojo-Dial-dnarrow" onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], false)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], false)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.childNodes[1];},spacerNode:function(){return this.domNode.childNodes[1].firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},upArrowNode:function(){return this.domNode.childNodes[0];},downArrowNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){S.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);}},animate:true,itemsEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:500,interval:25,slot:"itemsContainerNode",preStart:function(){var W=this.widget[this.slot],V=(W&&W.offsetWidth)||0;this.props=V?{left:{start:-V,stop:0,suffix:"px",isStyle:true}}:{};},revertOnCancel:false},scrollEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:250,interval:25,slot:"scrollboxNode",revertOnCancel:false},multiSelect:false,holdJumpOnly:true,audibles:{"*":true,hasSelection:false},initSpacer:function I(){var V=(this.cssText||"").match(/height:\s*(\d*)px/);if(V){this.spacerMargin=parseInt(Number(V[1])/2,10);var W=this.spacerMargin+"px";this.spacerCssText="padding-top: "+W+"; padding-bottom: "+W+";";}else{this.spacerMargin=0;delete this.spacerCssText;}},center:function T(){H(this);},preBuildRendering:function(){this.initSpacer();return this._super();},postBuildRendering:function D(){this._super();this.center();E(this);},refreshScroll:function G(){this.center();E(this);},prechange:function O(V){this._super(V);if(this.hasRendered){if(!this.multiSelect||(V&&V.added&&V.added.length)){this.center();}}},onclickarrow:function A(X,W,V){N(this,Q*(V?-1:1));},onmouseoverarrow:function L(X,W,V){if(!this.holdJumpOnly){B(this,V);}},onmouseoutarrow:function M(X,W,V){R(this);},onmousedownarrow:function F(X,W,V){if(this.holdJumpOnly){B(this,V);}},onmouseuparrow:function P(X,W,V){R(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.css");var E=null;function D(H){var G=1;if(H.tstp===769){G=2;}else{if(H.tstp===774){G=3;}}return G;}function B(K){var G=mstrApp.name,J=G+"?",H=-1,I=function(M,L){J+=M+"="+L+"&";};if(!!K){switch(K.ttp){case 3:I("evt","4001");I("reportID",K.tid);H=D(K);if(H!==-1){I("reportViewMode",H);}break;case 55:if(K.tstp===14080){I("evt","32001");I("documentID",K.tid);}else{if(K.tvmd&(8192|2048)&&!((K.tvmd&2048&&mstrApp.features["run-vi-flash"]))){I("evt","3140");I("documentID",K.tid);if(mstrmojo.dom.isIE6||mstrmojo.dom.isIE7||mstrmojo.dom.isIE8){mstrmojo.alert(mstrmojo.desc(12187,"To work with HTML5 dashboards, please turn off your browser Compatibility View or update your browser to one of the following browser versions: Chrome, Firefox, Safari, Internet Explorer 9 or above."));return null;}}else{I("evt","2048001");I("objectID",K.tid);I("visMode","0");}}break;}}return J;}mstrmojo._HasDocLink=mstrmojo.provide("mstrmojo._HasDocLink",{_mixinName:"mstrmojo._HasDocLink",url:"",target:"",linkEnabled:true,ifw:"",update:function F(G){var H=G.defn;this.url=G.data.url||H.url;if(H.target){this.target=H.target;}if(H.ifw){this.ifw=H.ifw;}this._super(G);},postBuildRendering:function A(){if(this.url||this.ifw){mstrmojo.css.addClass(this.domNode,"hasLink");}var H=this.controller&&this.controller.view,G=H&&H.getCurrentLayout&&H.getCurrentLayout();if(G&&G.addLinkInfo){G.addLinkInfo(this.id,{url:this.url,target:this.target,src:this});}return this._super();},setLinkEnabled:function C(K){this.linkEnabled=K;var J=this.domNode;if(!J){return ;}var L=J.childNodes,I=L[L.length-1],G=this.id+"_mask",H=(I.id===G)?I:null;if(K){if(H){J.removeChild(H);delete this._mask;}}else{if(!H){H=document.createElement("div");H.className="mstrmojo-DocLinkMask";H.id=G;H.innerHTML="&nbsp;";J.appendChild(H);}}},cancelDocLink:false,onclick:function(){if(E===null){var H=this,G=function(){if(H.linkEnabled&&!H.isEditing){var K=H.drillLinkItems,I=K&&K[0],J=H.url||(I&&I.url);if(H.ifw){H.model.showInfoWin(H.ifw,(H.getAnchor&&H.getAnchor())||H.domNode,"v",true);}else{if(J){H.model.executeLink(J,H.target,H);}else{if(H.node&&H.node.data&&H.node.data.tid){J=B(H.node.data);if(!!J){H.model.executeLink(J,H.target,H);}}}}}};E=window.setTimeout(function(){if(!H.cancelDocLink){G();}H.cancelDocLink=false;E=null;},200);}},hasActiveLink:function(){var I=false;if(this.linkEnabled){var J=this.drillLinkItems,G=J&&J[0],H=this.url||(G&&G.url);if(this.node&&this.node.data&&this.node.data.tid){I=true;}else{if(H){I=true;}}}return I;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.string","mstrmojo.DICFactory");var N=3,A=8,U=2,W=2,S=mstrmojo.css,B="********",Q=mstrmojo.hash;var K=null;function H(a,Z){if(a){var X=this.dicWidget;if(X&&X.setDirtyFlag){X.setDirtyFlag(a,Z);}else{if(a.className!=="flag-container"){var Y=document.createElement("div");Y.className="flag-container";Y.style.right="10px";Y.innerHTML='<div class="dirty-cell"/>';Z.insertBefore(Y,a);}}}}function R(Y,X){if(Y.className==="flag-container"){X.removeChild(Y);}}function E(a,Y,Z,X){return'<rwf rw_tree_type="'+this.tt+'" rw_node_key="'+this.fgk+'" rw_field_key="'+this.k+'" key="'+this.key+'" columns="'+this.cls+'" types="'+Z+'" '+Y+X+' dt="'+a.dt+'" />';}mstrmojo._IsEditableTextfield={_mixinName:"mstrmojo._IsEditableTextfield",preBuildRendering:function T(){if(!this.edb){var Z=this.node.data,X=this.node.defn,Y=Z.dic||X.txi.dic,a=(this.rv==="")?this.value:this.rv;if(Y.psw){this.v=B;a=this.rv="";}if(Y.ipt===W){Y.vls=this.vls||[];this.dk=Y.k;this.ddic=true;}this.dt=Y.dt;this.dicWidget=mstrmojo.DICFactory.createDIC({dic:Q.copy(Y,{req:this.req}),enabled:!!this.enabled,owner:this,k:0,dv:this.value,value:a,openerType:U,popupTitle:X.n});if(this.shouldReplaceValueNode()){if(!K){K=Q.clone(this.formatHandlers);}this.formatHandlers.domNode=["T","z-index","D","B","F","P","text-align","background-color","fx","white-space","overflow"];delete this.formatHandlers.valueNode;}}this.set("cssClass",this.edb?"":"editable-field");this._super();},shouldReplaceValueNode:function P(){return this.dicWidget.showByDefault||this.dicWidget.hasPreview;},postBuildRendering:function L(){this._super();if(this.edb){return ;}var X=this.dicWidget,Z=this.valueNode.innerHTML;if(mstrmojo.string.isEmpty(Z)){this.valueNode.innerHTML=Z+"1";this.valueNode.style.height=this.valueNode.clientHeight+"px";this.valueNode.innerHTML=Z;}if(X.showByDefault){X.render();}else{if(this.enabled){if(X.hasPreview){X.openerNode=this.domNode;X.renderPreview(this.value);}else{X.openerNode=this.valueNode;}mstrmojo.dom.attachEvent(X.openerNode,mstrApp.isMobile?mstrmojo.dom.TOUCHEND:"click",function(){X.showInPopup();});}else{S.addClass(this.domNode,"disabled");return ;}}if(this.shouldReplaceValueNode()){Q.copy(K,this.formatHandlers);}this.registerTxWidget();this.addToTraversalList();if(this.mdf&&this.sci){var Y=this.domNode;H.call(this,Y.firstChild,Y);}},getKeyContext:function F(){return{dt:this.dt||0,k:this.dk||undefined};},getUpdates:function D(){var d=this.getUpdatedValues()[0],X=mstrmojo.array.find(this.vls,"v",d.v),Y=this.dicWidget,b=this.ddic&&(X===-1),Z,a="";if(Y.canSlice||b){a=E.call(this,d,"",A,"");}if(!b){Z=d.k?('rw_control_key="'+d.k+'" element_id="'+this.vls[X].eid+'" '):"";a+=E.call(this,d,Z,N,'value="'+mstrmojo.string.encodeXMLAttribute(String(d.v))+'"');}return a;},updateValue:function M(f,Y){if(this._super){this._super(f,Y);}var h=this.valueNode,b=this.domNode,e=this.dicWidget,g=Y.v,X=Y.dv,a=mstrmojo.array.find(this.vls,"v",g),Z=this.ddic&&(a===-1);if(this.rv!==g){if(this.req){S.removeClass(b,"required");}this.rv=g;this.v=X;this.mdf=Z?0:1;if(!e.showByDefault){if(e.hasPreview){e.renderPreview();}else{h[h.innerText!==undefined?"innerText":"textContent"]=this.psw?B:(!X?"\u00a0":mstrmojo.string.decodeHtmlString(X,false));}}if(this.req){S.removeClass(b,"required");}if(this.sci&&!Z){H.call(this,b.firstChild,b);}else{R.call(this,b.firstChild,b);}}if(this.txar){return true;}return false;},applyPasswordMask:function O(){this.psw=true;this.v=B;this.rv="";},getUpdateObject:function I(){var Z={fieldKey:this.k,wid:this.wid,newValue:mstrmojo.string.encodeXMLAttribute(String(this.rv)),dataType:this.dt},X=-1,Y=this.getUpdatedValues()[0];if(Y.k!==undefined){Z.controlKey=Y.k;X=mstrmojo.array.find(this.vls,"v",Y.v);Z.elementId=X>=0?this.vls[X].eid:"";}return{nodeKey:this.fgk,cells:[Z],retrieveData:false,autoRefresh:false};},autoRefresh:function(X){this.model.sendTransactionUpdates(X);},update:function J(X){if(this._super){this._super(X);}var Z=X.data,Y=X.defn;if(Z.vls){this.vls=Z.vls;}else{delete this.vls;}this.cell=X.data;this.value=Z.v||"";this.rv=(Z.rv===undefined)?this.value:Z.rv;this.tca=Z.tca||0;this.dt=Z.dt;this.key=Z.key||"";this.cls=Z.cls||"";this.wid=Z.wid;this.edb=Z.edb;this.mdf=Z.mdf;this.sci=Y.txi.sci;this.req=this.required||Y.txi.dic.req;this.tt=Y.tt;this.fgk=Y.fgk;this.txar=Y.txi.txar;this.txck=Y.txi.dic.ckey;},addToTraversalList:function V(){if(mstrmojo.DICConfig.isKeyNavigable(this.dicWidget.dic)){var X=this.parent.traversalList,Y=this.domNode;if(!X){X=this.parent.traversalList=[];}X.push({x:Y.offsetLeft,y:Y.offsetTop,h:Y.offsetHeight,refField:this});}},editNext:function G(){var d=this.parent.traversalList,a,X,Z,b=0;if(!d){return false;}if(!d.isSorted){for(a=0,X=d.length;a<X;a++){b+=d[a].h;}Z=b/X;d.sort(function(g,e){var h=Math.floor(g.y/Z),f=Math.floor(e.y/Z);if(h<f){return -1;}if(h>f){return 1;}if(g.x<e.x){return -1;}if(g.x>e.x){return 1;}return(g.y<e.y)?-1:1;});d.isSorted=true;}for(a=0,X=d.length;a<X;a++){if(d[a].refField.k===this.k){break;}}if(a<X){do{a++;if(a>=X){a%=X;}if(a===parseInt(this.k,10)){return false;}var Y=d[a].refField.dicWidget;if(Y){if(!Y.showByDefault){Y.showInPopup();}else{Y.focus();}return true;}}while(true);}},checkRequiredObjects:function C(){if(this.req&&!this.mdf&&!this.edb){S.addClass(this.domNode,"required");return false;}return true;}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var J={T:["top","left"],D:["height","width"],B:["border","border-color","border-style","border-width"],F:["font","color","text-decoration"],P:["padding"],BG:["background-color","fx"],RW:[]};J.RW=["z-index"].concat(J.T.concat(J.D));var D=mstrmojo.dom,O=mstrmojo.css;function N(T,V,S){var U=T[V]||[];U.push(S);T[V]=U;}function L(W,V){var U=((W&&W.fmts)||null);if(V){var Y=W.thresholds,T=Y&&Y[V];if(T){var X={},Z;for(Z in U){X[Z]=T[Z]||U[Z];}for(Z in T){var S=T[Z];X[Z]=(typeof S==="string")?(S+" !important"):S;}U=X;}}return U;}mstrmojo._Formattable=mstrmojo.provide("mstrmojo._Formattable",{_mixinName:"mstrmojo._Formattable",formatHandlers:null,thresholdId:null,getCacheKey:function E(){return"css_cache"+(this.thresholdId||"");},update:function G(T){var S=true;this.invisible=!!(T&&T.data&&T.data.invisible);if(this._super){S=this._super(T);}return S;},buildCSSFormatString:function H(U,e){var j=this.formatHandlers[U],l=j.src?e[j.src]:e;if(!l){return null;}var b=j.props||j;if(!b){return null;}var X=[],h=-1;var V=b.length-1;for(V;V>=0;V--){var k=b[V];var d=J[k]||[k];var a=d.length-1;for(a;a>=0;a--){k=d[a];var T=l[k];if(T!==undefined){if(k==="fx"){var Y=T,S={};var g=Y.gd;if(g){this.formatGradient(g,S);}var W=parseInt(Y.rt,10);if(W){if(W===1||W===3){this.formatTextRotation(Y.rt,S);}}if(Y.ds){this.formatDropShadow(Y,S);}var Z;for(Z in S){X[++h]=Z+":"+S[Z].join(" ");}}else{X[++h]=k+":"+T;}}}}if(this.invisible){X.push("visibility:hidden");}return X.join(";")+";";},applyCSSFormatToNode:function I(U,S){var V=this[U],T=V&&V.style;if(T){this.buildCSSFormatString(U,S).split(";").forEach(function(W){var X=W.split(":");T[O.convertCssToCamelCase(X[0])]=X[1];});}},clearSlotBackgroundCSS:function F(T){var U=this[T],S=U&&U.style;if(S){S.background="transparent none 0 0 no-repeat";S.filter="none";}},preBuildRendering:function B(){this._super();var V=this.formatHandlers,S=this.getFormats();if(V&&S){var W=this.defn=this.defn||{},X=this.getCacheKey(),U=W[X];if(!U){U=W[X]={};for(var T in V){var Z=T+"CssText";this[Z]=U[Z]=this.buildCSSFormatString(T,S)||"";}}else{var Y;for(Y in U){this[Y]=U[Y];}}}return true;},formatGradient:function P(S,U){var T=O.buildGradient(S.t,S.sc,S.ec);if(T){N(U,T.n,T.v);}},formatDropShadow:function K(W,U){if(D.supports(D.cssFeatures.DROP_SHADOW)){var V=W.ds;if(D.isDXIE){N(U,"filter","progid:DXImageTransform.Microsoft.DropShadow(Color='#66000000',Positive='true',OffX="+V+",OffY="+V+")");}else{var S=[V,V],T=parseInt(W.rt,10);if(T===1||T===3){S[((T===1)?1:0)]=-V;}N(U,(D.isWK?"-webkit-":"")+"box-shadow",S.join("px ")+"px 3px 0px #888");}}},formatTextRotation:function C(T,S){if(D.supports(D.cssFeatures.TEXT_ROTATION)){if(D.isDXIE){N(S,"filter","progid:DXImageTransform.Microsoft.BasicImage(rotation="+T+")");}else{var U=(T===1)?90:-90;N(S,D.CSS3_PREFIX+"transform-origin","top left");N(S,D.CSS3_PREFIX+"transform","rotate("+U+"deg)");}}},getFormats:function R(){if(!this.fmts){this.fmts=L.call(this,this.defn,this.thresholdId);}return this.fmts;},clearFormats:function A(){this.fmts=undefined;},createEmptyFormats:function(){return(this.fmts=this.fmts||{});},clearCache:function Q(){delete this.defn[this.getCacheKey()];},unrender:function M(S){if(this.thresholdId){this.fmts=null;}this._super(S);}});mstrmojo._Formattable.getBorderWidths=function(W){var V=W.getFormats(),S=(V.border)?V.border.match(/(\d*|\d*\.\d*)pt/)[0]:V["border-width"],U=W.model,T=U.docModel;return O.getBorderWidths(S,(T&&T.dpi)||U.dpi);};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.color","mstrmojo.hash","mstrmojo.array");var AF=mstrmojo.color,V=mstrmojo.hash,BI=mstrmojo.array,BE=mstrmojo.css,e=mstrmojo.num;var BG=1,Ao=2,Ap=3,A2=4,AW=5,AX=6;var BN="FormattingFont",I="FormattingAppearance",X="FormattingAlignment",Ad="FormattingSize",Q="FormattingPatterns",F="FormattingBorder",A1="FormattingOrder",E="FormattingView",O="FormattingSelector",Ar="Template Formatting",L="FormattingPadding",Am="AnalyticalEngineProperties",Au="RWDocumentProperties",BB="FormattingPage",N="Mobile",T="VLDB Select";var Al=1;var h="n",M="h",BJ="w",AD="wm",A8="pw",W="ml",A9="mr",u="upwalw",r="ff",Ag="fsz",BC="fw",AE="fit",BD="fun",o="fst",t="fc",U="alh",s="alv",Aa="atw",AK="atd",a="textOverflow",Ak="bc",D="bgs",H="btc",Aj="brc",AT="bbc",q="blc",k="bts",BL="brs",A3="bbs",AZ="bls",AQ="borderColor",Ay="borderStyle",d="zIndex",AR="showTitleBar",j="title",Ax="ctrlStyle",x="ctrlOrientation",Aw="ctrlOrientationBehavior",g="ctrlMultiselect",C="ciwm",BA="cmcy",Az="sec",p="easow",AJ="layoutXml",J="lockAspectRatio",Ai="ism",f="shw",A0="mg",BK="lhv",Y="gridVPadding",Af="gridHPadding",Ae="ln",AI="sar",B="hnv",Ac="iw",AY="ih",AM="tsp",AU="visible",R="rf",BM="jad",An="jdc",A4="fs",A7="ssc",b="sstyle",AC="hgl";function P(BO){return BO;}function AO(BO){return parseInt(BO,10);}var AB={name:"encode",_def:P};AB[Ap]=function(BO){return BO?1:0;};AB[Ao]=function(BO){if(BO==="transparent"){return -1;}if(BO.length===4){BO=BO.replace(/([0-9a-f])/ig,"$1$1");}BO=AF.rgbStr2hex(BO);return parseInt(BO.substring(5)+BO.substring(3,5)+BO.substring(1,3),16);};AB[A2]=AO;AB[BG]=function(BO){if(typeof BO==="number"){return e.toLocaleString(BO);}return P(BO);};AB[AX]=function(BQ){if(BQ==="none"){return 0;}var BP=BQ.match(/([0-9]+[,\.]?[0-9]*pt)/)[0],BO=BQ.match(/pt ([\w\W]*)/)[1];if(BP==="2pt"){return 5;}switch(BO){case"solid":return 1;case"dashed":return 3;case"dotted":return 4;default:throw new Error("Invalid border style value in FormatModel::encodeValue.");}};var BH={name:"decode",_def:P};BH[Ap]=function(BO){return parseInt(BO,10)===1;};BH[Ao]=function(BO){if(BO===-1){return"transparent";}if(typeof BO==="number"){return AF.decodeColor(BO);}if(BO.length===4){return BO.replace(/([0-9a-f])/ig,"$1$1");}return AF.rgbStr2hex(BO);};BH[A2]=AO;BH[AX]=function(BQ){if(BQ===undefined||BQ===0){return"none";}var BP="1pt",BO="solid";if(BQ===5){BP="2pt";}if(BQ===3){BO="dashed";}else{if(BQ===4){BO="dotted";}}return BP+" "+BO;};function A5(){return this.pn.toLowerCase();}function AL(BO,BQ,BR){var BP=document.createElement("div");BP.style[BR||BQ]=BO[BQ];return BP;}function G(BO){return function(){return AF.rgbStr2hex(BO.apply(this,arguments));};}function Ah(){var BO=A5.call(this);return BO==="underline"?BO:"line-through";}var At={name:"extract"},S=At._def=function(BO,BQ,BR){var BP=AL(BO,BQ||this.getFormatBlockName(),BR);return BP.style[this.getCssName()];};At[Ao]=G(S);function w(BO){return S.call(this,BO,this.getFormatBlockName())===A5.call(this);}function A(BO){var BP=S.call(this,BO,this.getFormatBlockName(),this.getCssName());return BP.indexOf(Ah.call(this))>-1;}function As(BO){var BP=this.getFormatBlockName();return AF.rgbStr2hex(S.call(this,BO,BP,BP+this.pn));}var BF={name:"resolve"},Z=BF._def=function(BO,BR,BQ,BS){BQ=BQ||this.getFormatBlockName();var BP=AL(BO,BQ);BP.style[BS||this.getCssName()]=BR;return BP.style[BE.convertCssToCamelCase(BQ)];};BF[Ao]=function(BO,BQ,BP,BR){if(BQ.or!==undefined){return BQ;}return AF.rgbStr2hex(Z.call(this,BO,BQ,BP,BR));};function AS(BO,BP){return Z.call(this,BO,BP?A5.call(this):"normal");}function AP(BP,BR){var BQ=(BP[this.getFormatBlockName()]||"").split(" "),BO=Ah.call(this);if(BR){if(BQ.indexOf(BO)===-1){BQ.push(BO);}}else{BQ=BQ.filter(function(BS){return BS!==BO;});}return Z.call(this,BP,BQ.join(" "));}var Ab={name:"update"},A6=Ab._def=function(BO,BP){BO[this.getFormatBlockName()]=this.resolve(BO,BP);return BO;};var AN={};AN[h]={ps:I,pn:"Name",pt:BG};AN[M]={ps:Ad,pn:"Height",pt:BG};AN[BJ]={ps:Ad,pn:"Width",pt:BG};AN[AD]={ps:Ad,pn:"WidthMode",pt:A2};AN[A8]={ps:BB,pn:"PageWidth",pt:BG};AN[W]={ps:BB,pn:"MarginLeft",pt:BG,fn:"margin-left"};AN[A9]={ps:BB,pn:"MarginRight",pt:BG,fn:"margin-right"};AN[u]={ps:BB,pn:"UsePageWidthAsLayoutWidth",pt:Ap};AN[r]={ps:BN,pn:"Name",pt:BG,fn:"font",cn:"fontFamily",extract:function(){return S.apply(this,arguments).replace(/['"]/g,"");}};AN[Ag]={ps:BN,pn:"Size",pt:A2,fn:"font",cn:"fontSize"};AN[BC]={ps:BN,pn:"Bold",pt:Ap,fn:"font",cn:"fontWeight",extract:w,resolve:AS};AN[AE]={ps:BN,pn:"Italic",pt:Ap,fn:"font",cn:"fontStyle",extract:w,resolve:AS};AN[BD]={ps:BN,pn:"Underline",pt:Ap,fn:"text-decoration",extract:A,resolve:AP};AN[o]={ps:BN,pn:"Strikeout",pt:Ap,fn:"text-decoration",extract:A,resolve:AP};AN[t]={ps:BN,pn:"Color",pt:Ao};AN[U]={ps:X,pn:"Horizontal",pt:A2,fn:"text-align"};AN[Aa]={ps:X,pn:"TextWrap",pt:Ap,fn:"white-space"};AN[AK]={ps:X,pn:"TextDirection",pt:A2};AN[s]={ps:X,pn:"Vertical",pt:A2};AN[a]={ps:Ad,pn:"TextOverflow",pt:Ap};AN[Ak]={ps:Q,pn:"FillColor",pt:Ao,x:Al,fn:"background-color",update:function(BO,BQ){var BP=BO.fx;if(BQ.or!==undefined){if(!BP){BP=BO.fx={};}var BR=BP.gd=BP.gd||{};BR.ec=BQ.c2;BR.sc=BQ.c1;BR.t=BQ.or;delete BO[this.getFormatBlockName()];BO.fx=BP;}else{if(BP){delete BP.gd;}A6.call(this,BO,BQ);}return BO;}};AN[D]={ps:Q,pn:"FillStyle",pt:A2};AN[A7]={ps:Q,pn:"SelectorSelectionColor",pt:Ao};AN[b]={ps:Q,pn:"SelectorSelectionFillStyle",pt:A2};AN[H]={ps:F,pn:"TopColor",pt:Ao,fn:"border",extract:As};AN[Aj]={ps:F,pn:"RightColor",pt:Ao,fn:"border",extract:As};AN[AT]={ps:F,pn:"BottomColor",pt:Ao,fn:"border",extract:As};AN[q]={ps:F,pn:"LeftColor",pt:Ao,fn:"border",extract:As};AN[AQ]={ps:F,pn:["TopColor","RightColor","BottomColor","LeftColor"],pt:Ao,fn:"border",extract:As,resolve:G(function(BO,BQ){var BR=this.getFormatBlockName(),BP=Z.call(this,BO,BQ,BR,BR+"Color"),BS=BP.indexOf("rgb");if(BS>-1){BP=BP.slice(0,BS)+AF.rgbStr2hex(BP.slice(BS));}return BP;})};AN[Ay]={ps:F,pn:["TopStyle","RightStyle","BottomStyle","LeftStyle"],pt:AX,fn:"border",extract:As,resolve:function(BO,BR){var BP=BR.split(" "),BS=this.getFormatBlockName();BO[BS]=Z.call(this,BO,BP[0],BS,BS+"Width");var BQ=Z.call(this,BO,BP[1]||"none",BS,BS+"Style"),BT=BQ.indexOf("rgb");if(BT>-1){BQ=BQ.slice(0,BT)+AF.rgbStr2hex(BQ.slice(BT));}if(BQ.indexOf("#")===-1&&BQ.indexOf("transparent")===-1){BQ+=" transparent";}return BQ;}};AN[k]={ps:F,pn:"TopStyle",pt:AX,fn:"border",extract:As};AN[BL]={ps:F,pn:"RightStyle",pt:AX,fn:"border"};AN[A3]={ps:F,pn:"BottomStyle",pt:AX,fn:"border",extract:As};AN[AZ]={ps:F,pn:"LeftStyle",pt:AX,fn:"border",extract:As};AN[d]={ps:A1,pn:"ZIndex",pt:A2,fn:"z-index"};AN[AR]={ps:E,pn:"ShowTitleBar",pt:Ap};AN[j]={ps:E,pn:"Title",pt:BG};AN[Ax]={ps:O,pn:"Style",pt:A2};AN[x]={ps:O,pn:"Orientation",pt:A2};AN[Aw]={ps:O,pn:"OrientationBehavior",pt:A2};AN[g]={ps:O,pn:"Multiselect",pt:Ap};AN[C]={ps:O,pn:"ItemWidthMode",pt:A2};AN[BA]={ps:O,pn:"MetricConditionType",pt:A2};AN[Az]={ps:O,pn:"ShowElementCount",pt:A2};AN[p]={ps:O,pn:"ExportAsShownOnWeb",pt:A2};AN[AJ]={ps:Ad,pn:"LayoutXML",pt:AW};AN[J]={ps:Ad,pn:"LockAspectRatio",pt:Ap};AN[Ai]={ps:Ad,pn:"ImageSizeMode",pt:A2};AN[AY]={ps:Ad,pn:"ImageHeight",pt:BG};AN[Ac]={ps:Ad,pn:"ImageWidth",pt:BG};AN[AM]={ps:Au,pn:"layoutBarPosition",pt:Ap};AN[A4]={ps:Au,pn:"ExecutionFullScreenMode",pt:Ap};AN[AU]={ps:I,pn:"Visible",pt:Ap};AN[Ae]={ps:Ar,pn:"LongNames",pt:BG};AN[AI]={ps:Am,pn:"ShowAllRows",pt:BG};AN[B]={ps:Am,pn:"HideNullZeroValues",pt:BG};AN[Af]={ps:L,pn:["LeftPadding","RightPadding"],pt:BG};AN[Y]={ps:L,pn:["TopPadding","BottomPadding"],pt:BG};AN.rowsshw={ps:Ar,pn:"ShowRowHeaders",pt:BG};AN.rowsmg={ps:Ar,pn:"MergeCells",pt:BG};AN.rowslhv={ps:Ar,pn:"LockRowHeaders",pt:BG};AN.colsshw={ps:Ar,pn:"ShowColumnHeaders",pt:BG};AN.colsmg={ps:Ar,pn:"MergeColumnCells",pt:BG};AN.colslhv={ps:Ar,pn:"LockColumnHeaders",pt:BG};AN[R]={ps:N,pn:"RefreshFrequency",pt:A2};AN[BM]={ps:T,pn:"Join Across Datasets",pt:A2};AN[An]={ps:T,pn:"MCE Join To Get Data Combination",pt:A2};AN[AC]={ps:I,pn:"Highlight",pt:A2};BI.forEach(V.keyarray(AN),function(BO){var BP=AN[BO];BP.getFormatBlockName=function(){var BR=this.fn;if(!BR){var BQ=this.pn;BR=BQ.charAt(0).toLowerCase()+BQ.substr(1);}return BR;};BP.getCssName=function(){var BQ=this.getFormatBlockName.call(this),BR=this.cn;if(!BR){BR=BE.convertCssToCamelCase(BQ);}return BR;};BI.forEach([AB,BH,At,BF,Ab],function(BQ){var BR=BQ.name;BP[BR]=BP[BR]||BQ[BP.pt]||BQ._def;});});function Av(BR,BQ,BO){var BP=BO[BR.ps]=BO[BR.ps]||{};BQ=BR.encode(BQ);BI.forEach([].concat(BR.pn),function(BS){BP[BS]=BQ;});return BO;}function AH(BU,BT,BO){var BS=BU.x;if(BS){if((BS&Al)>0){var BR=!!BT.c1,BQ=0;if(BR){Av(BU,BT.c1,BO);var BP=BO[Q];BP.GradientColor=BU.encode(BT.c2);BP.GradientAngle=BT.or?0:90;BP.GradientXOffset=0;BP.GradientYOffset=0;BQ=2;}else{if(BU.encode(BT)===-1){BQ=1;}else{Av(BU,BT,BO);}}return Av(AN[D],BQ,BO);}}return null;}mstrmojo.models.FormatModel={getFormatUpdate:function AV(BP,BS,BO){var BR=AN[BP];if(!BR){throw new Error("Invalid property "+BP+" in FormatModel::getFormatUpdate.");}BO=BO||{};var BQ=AH.call(this,BR,BS,BO);if(BQ){return BQ;}return Av(BR,BS,BO);},getFormatPropertyInfo:function l(BO){return AN[BO];},getValueFromUpdate:function K(BP,BQ){var BS=AN[BP],BO=null;try{BO=BQ[BS.ps][BS.pn];}catch(BR){}return BO;},getGradientValues:function AG(BP){var BO=BP.fx&&BP.fx.gd;if(BO){var BR={c1:BO.sc,c2:BO.ec,or:BO.t};return BR;}if(BP[D]===2){var BQ={c1:BP.bc,c2:BP.gdc,or:BP.gda===90?0:1};return BQ;}return null;},decodeValue:function AA(BO,BP){return AN[BO].decode(BP);},updateFormatBlock:function Aq(BO,BP,BQ){return AN[BP].update(BO,BQ);},getFormatBlockValue:function z(BO,BP){return AN[BP].extract(BO);},GradientType:null,FormatObjectType:null,PROPERTY_INFO_TYPE:null,ENUM_PROPERTY_NAMES:{NAME:h,HEIGHT:M,WIDTH:BJ,WIDTH_MODE:AD,PAGE_WIDTH:A8,MARGIN_LEFT:W,MARGIN_RIGHT:A9,USE_PAGE_WIDTH_AS_LAYOUT_WIDTH:u,FONT_FAMILY:r,FONT_SIZE:Ag,FONT_WEIGHT:BC,FONT_STYLE:AE,UNDERLINE:BD,LINE_THROUGH:o,COLOR:t,TEXT_ALIGN:U,VERTICAL_ALIGN:s,TEXT_WRAP:Aa,TEXT_DIRECTION:AK,TEXT_OVERFLOW:a,BACKGROUND_COLOR:Ak,FILL_STYLE:D,BORDER_TOP_COLOR:H,BORDER_RIGHT_COLOR:Aj,BORDER_BOTTOM_COLOR:AT,BORDER_LEFT_COLOR:q,BORDER_TOP_STYLE:k,BORDER_RIGHT_STYLE:BL,BORDER_BOTTOM_STYLE:A3,BORDER_LEFT_STYLE:AZ,BORDER_COLOR:AQ,BORDER_STYLE:Ay,Z_INDEX:d,SHOW_TITLE_BAR:AR,TITLE:j,CONTROL_STYLE:Ax,CONTROL_ORIENTATION:x,CONTROL_ORIENTATION_BEHAVIOR:Aw,CONTROL_MULTISELECT:g,CONTROL_ITEM_WIDTH_MODE:C,CONTROL_METRIC_CONDITION_TYPE:BA,CONTROL_SHOW_ELEMENT_COUNT:Az,CONTROL_EXPORT_AS_SHOWN_ON_WEB:p,LAYOUT_XML:AJ,LOCK_ASPECT_RATIO:J,IMAGE_SIZE_MODE:Ai,SHOW_HEADER:f,MERGE_HEADER:A0,LOCK_HEADER:BK,LONG_NAME:Ae,SHOW_ALL_ROWS:AI,HIDE_NULL:B,IMAGE_WIDTH:Ac,IMAGE_HEIGHT:AY,VISIBLE:AU,LAYOUT_TAB_POSITION:AM,GRID_VERTICAL_PADDING:Y,GRID_HORIZONTAL_PADDING:Af,REFRESH:R,JOIN_ACROSS_DATASET:BM,MCE_JOIN_TO_GET_DATA_COMBINATION:An,FULL_SCREEN_MODE:A4,SELECTOR_SELECTION_COLOR:A7,SELECTOR_SELECTION_FILL_STYLE:b,VIZ_HIGHLIGHTING:AC}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.expr","mstrmojo.css");var G=mstrmojo.array,F=mstrmojo.expr,H=mstrmojo.css;mstrmojo._IsExprNode=mstrmojo.provide("mstrmojo._IsExprNode",{ind:function B(){var L=this.parent;if(L&&L.indent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.indent(K);}}},out:function D(){var L=this.parent;if(L&&L.outdent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.outdent(K);}}},andOrTxt:function A(){var M=this.parent,K=M&&M.data,L="",N=this.data;if(K&&(K.et===F.ET.ANDOR)&&K.fn){L=K.fn+(N&&N.not?"_"+F.FN.NOT:"");L=F.BRANCH_FNS[L];}return'<span class="mstrmojo-text mstrmojo-andor">'+L+"</span>";},getPrefixAndOrToolsMarkup:function(){return('<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5896,"Ungroup Conditions")+"</span>");},premousedown:function J(K){var L=mstrmojo.dom.eventTarget(K.hWin,K.e);if(this.prefixHoverNode&&mstrmojo.dom.contains(this.prefixHoverNode,L,false)){mstrmojo.dom.stopPropogation(K.hWin,K.e);return ;}if(this._super){this._super(K);}},isSelectableArea:function E(K){return true;},childIndex:function I(){var M=this.parent,K=M&&M.data,L=K&&K.nds,N=this.data;if(L&&N){return G.indexOf(L,N);}return -1;},toggleGroupBorder:function C(K){H.toggleClass(this.parent.itemsContainerNode.childNodes[this.childIndex()-1].firstChild,"upgroup",K);H.toggleClass(this.domNode,"downgroup",K);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var G=mstrmojo.dom,J=mstrmojo.css,H="selected";function B(S,T,U,R,W){var V=W.listHooks[S];if(V&&V.call(W,T,U,R)){return ;}J.toggleClass(T,H,S==="select");}function I(U,T,S){var V=this[U],R=V?V.split(T):[];this[U]=mstrmojo.array.distinct(R.concat(S.split(T))).join(T);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,init:function Q(R){this._super(R);this._shiftStartIndex=-1;},getItemMarkup:function O(S,R){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';},getItemDisplayName:function E(R){return R.n||"";},getItemProps:function K(V,R){var S=!!this.selectedIndices[R],W={tag:"div",sel:S,cls:"",n:this.getItemDisplayName(V),style:"",idx:R,addCls:function T(Y){I.call(this,"cls"," ",Y);},addStyle:function U(Y){I.call(this,"style",";",Y);},title:V.title||""};if(S){W.addCls(H);}var X=V.cls;if(X){W.addCls(X);}return W;},itemRenderer:{render:function A(S,R,T){S._renderIdx=R;return mstrmojo.string.apply(T.getItemMarkup(S,R),T.getItemProps(S,R));},select:function L(S,T,R,U){B("select",S,T,R,U);},unselect:function D(S,T,R,U){B("unselect",S,T,R,U);}},onclick:function P(R){try{var T=this.getItemFromTarget(R.getTarget());if(T){R.cancel();this.doItemSelect(T,R||{});}}catch(S){mstrApp.onerror(S);}},doItemSelect:function F(k,b){var R=b.hWin,j=b.e,d=k._renderIdx,W=k._positionIdx,S=G.isMetaKey(R,j),Z=G.shiftKey(R,j),Y=this.multiSelect,U=this.useListModKeys,f=this._shiftStartIndex,X=this.selectedIndices;if(Y&&U&&Z&&f>-1){var h=[],T=[],V=Math.min(f,d),l=Math.max(f,d),g;for(g=0;g<this.items.length;g++){if(V<=g&&g<=l){if(!X[g]){h.push(g);}}else{if(X[g]){T.push(g);}}}this.addSelect(h);this.removeSelect(T);}else{if(Y&&(!U||S)){var a=(X[d])?"remove":"add";this[a+"Select"](d,false,W);}else{this.singleSelect(d,false,W);}this._shiftStartIndex=d;}},onclearSelection:function N(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function C(S){var R=G.findAncestorByAttr(S,"idx",true,this.domNode);return(R&&R.node)||null;},getItemFromTarget:function M(T){var S=this.getItemNodeFromTarget(T),R=S&&parseInt(S.getAttribute("idx"),10);if(R!==null&&!isNaN(R)&&this.items){return this.items[R];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=H;}());(function(){mstrmojo.requiresCls("mstrmojo.css");var F=mstrmojo.css,E="px",J="hasOwnAvatar",I={x:0,y:0};function B(L){var K=this.createAvatar(L.src.node,L);if(K){F.addClass(K,[this.avatarCssClass,J]);this.avatar=L.avatar=document.body.appendChild(K);}}function C(){var K=this.avatar;if(K){K.parentNode.removeChild(K);delete this.avatar;F.removeClass(K,[this.avatarCssClass,J]);}}mstrmojo._HasOwnAvatar=mstrmojo.provide("mstrmojo._HasOwnAvatar",{_mixinName:"mstrmojo._HasOwnAvatar",draggable:true,ownAvatar:true,avatarCssClass:"",restrictedToAxis:undefined,isDragValid:function H(K){if(this._super){return this._super(K);}return false;},ondragstart:function D(K){B.call(this,K);this.positionAvatar(K.src.pos,K);if(this._super){this._super(K);}},ondragmove:function A(K){this.positionAvatar(K.tgt.pos,K);if(this._super){this._super(K);}},ondragend:function A(K){C.call(this);if(this._super){this._super(K);}},createAvatar:mstrmojo.emptyFn,positionAvatar:function G(O,L){var N=this.avatar.style,M=this.restrictedToAxis,K=(L&&L.dragOffsets)||I;if(M!=="y"){N.left=O.x+K.x+E;}if(M!=="x"){N.top=O.y+K.y+E;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.css");var B="tx-touch",E=100,D='<div class="mstrmojo-dicPreview dicx{@t} {@x}" ontouchstart="mstrmojo.all[\'{@id}\'].previewTouchStart()";><div><div>{@v}</div></div></div>';mstrmojo.android._HasPreviewButton=mstrmojo.provide("mstrmojo.android._HasPreviewButton",{_mixinName:"mstrmojo.android._HasPreviewButton",renderPreview:function F(){var I=this.openerNode,J=this.group||this,H=(J.openerType===2)||!!this.dic.dm||this.dicChanged;this.renderPreviewButton(I,H?this.dv:I.innerHTML);},renderPreviewButton:function A(K,N){var Q=this.dic,O=Q.t,P=this.group||this,M=false,J=true,I=mstrmojo.DICConfig.TYPES,R=[];switch(O){case I.SLIDER:case I.TEXTAREA:J=!Q.dm;break;case I.SWITCH:case I.TOGGLE:case I.RATING:case I.STEPPER:case I.LIKERTSCALE:J=false;break;}if(P.openerType===2){M=J;}if(J){var L=K.style;L.border="";L.padding="";R.push("arw");if(M){R.push("prv");}}var H=this.id;K.innerHTML=mstrmojo.string.apply(D,{t:O,v:N||"&nbsp;",id:H,x:R.join(" ")});this._previewNode=K.firstChild;if(this.inlineExtraCssText){this._previewNode.style.cssText+=" "+this.inlineExtraCssText;}},setDirtyFlag:function C(K,J){var H=this._previewNode,I=H&&H.firstChild;mstrmojo.css.addClass(I||J,"tx-active");},previewTouchStart:function G(){var H=this;mstrmojo.css.addClass(H._previewNode,B);if(this._holdTimer){clearTimeout(this._holdTimer);}this._holdTimer=setTimeout(function(){delete H._holdTimer;mstrmojo.css.removeClass(H._previewNode,B);},E);}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.hash","mstrmojo.css");var F=mstrmojo.hash,C=mstrmojo.css;var D="open";function E(G){return G?G.popupConfig.hostElement:null;}mstrmojo.ui.menus._HasMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._HasMenuPopup",F.copy(mstrmojo._HasPopup));mstrmojo.ui.menus._HasMenuPopup.openPopup=function A(I,G){var H=this._lastOpened;if(H){this.closePopup();}mstrmojo._HasPopup.openPopup.call(this,I,G);C.addClass(E(I),D);};mstrmojo.ui.menus._HasMenuPopup.closePopup=function B(){C.removeClass(E(this._lastOpened),D);mstrmojo._HasPopup.closePopup.call(this);};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash");var K=1,B=2;function N(Q,P){return D(Q,P)&&Q.o===P.o;}function D(Q,P){return Q&&P&&Q.ui===P.ui&&Q.axis===P.axis&&Q.mix===P.mix;}function A(T,Q,R){var S=R.getCellTitleId(Q),P=R.getCellUnitIndex(Q);R.selections[S]=R.selections[S]||{};R.selections[S][P]=R.selections[S][P]||[];R.selections[S][P].push(T);M(T,Q,R);}function M(T,Q,R){if(Q){var S=R.getCellTitleId(Q),P=R.getCellUnitIndex(Q);if(!R.selectionsForCopy){R.selectionsForCopy={};}R.selectionsForCopy[S]=R.selectionsForCopy[S]||{};R.selectionsForCopy[S][P]=R.selectionsForCopy[S][P]||[];R.selectionsForCopy[S][P].push(T);C(T);}}function O(Q){var U=Q.selectionsForCopy;for(var T in U){for(var S in U[T]){for(var R=0,P=U[T][S].length;R<P;R++){J(U[T][S][R]);}}}Q.selections={};Q.selectionsForCopy={};}function C(P){mstrmojo.css.setOpacity(P,50);if(P.nodeName.toLowerCase()==="td"&&mstrmojo.dom.isIE8){mstrmojo.css.addClass(P,"showGridBorder");}}function J(P){mstrmojo.css.setOpacity(P,100);if(P.nodeName.toLowerCase()==="td"&&mstrmojo.dom.isIE8){mstrmojo.css.addClass(P,"showGridBorder");}}function F(R,S){if(R.mix===undefined){var V=S.gridData.gts[R.axis===K?"row":"col"],Q=V[R.tui||R.ui],U=0;for(var T=0,P=V.length;T<P;T++){if(V[T].id===Q.id){U++;}}return U;}return 0;}function H(){var Q="_xtabSelectionsHiddenField",P;P=document.getElementById(Q);if(!P){P=document.createElement("textarea");P.id=Q;P.style.opacity=0;P.style.position="absolute";P.style.top=0;P.style.height=0;P.style.width=0;document.body.appendChild(P);}return P;}function G(){var W="",Y={},R,b=[],g=[],Q={},S={},P=this.selectionsForCopy,V=mstrmojo.hash,X=mstrmojo.array,e=function(h,j){if(h.hasOwnProperty("mix")){return j.es[h.mix].n;}else{return j.n;}},T,Z,U,f,d,a=0;V.forEach(P,function(j,h){V.forEach(j,function(k){X.forEach(k,function(l){a++;Z=l.offsetLeft;U=l.offsetTop;if(!Y[Z]){Y[Z]={};}R=Y[Z];R[U]=l.innerText;if(X.indexOf(b,Z)==-1){b.push(Z);}if(X.indexOf(b,U)==-1){g.push(U);}f=this.getCellForNode(l);d=this.model.getCellTitleInfo(f).title;if((!d.id&&d.axis==K)||(d.id&&d.axis==B)){S[U]=e.call(this,f,d);}else{Q[Z]=e.call(this,f,d);}},this);},this);},this);b.sort(function(j,h){return j-h;});g.sort(function(j,h){return j-h;});if(a>1&&!V.isEmpty(S)){W="\t";}if(a>1&&!V.isEmpty(Q)){X.forEach(b,function(h){W+=(Q[h]||"")+"\t";});W+="\n";}X.forEach(g,function(h){if(a>1&&!V.isEmpty(S)){W+=(S[h]||"")+"\t";}X.forEach(b,function(j){W+=(Y[j][h]||"")+(a>1?"\t":"");});if(a>1){W+="\n";}});T=H();T.value=W;T.focus();T.select();}mstrmojo._XtabSelections={lastSelectedTD:null,singleSelectForCopy:function I(P){var U=this.getCellForNode(P),b,d,Z,a=U&&U.mix!=undefined,S=function(f,e){e=e||{};f=f||{};if(a){return f.mix==e.mix;}else{return f.mix==e.mix&&f.ui==e.ui;}};Z=mstrmojo.dom.findAncestorByName(P,"table",false);d=Z.rows;for(var V=0,W=d.length;V<W;V++){var Y=d[V].cells;for(var T=0,R=Y.length;T<R;T++){var Q=Y[T],X=this.getCellForNode(Q);if(Q!=P&&S(X,U)){M(Q,X,this);}}}},singleSelect:function E(Q,Y){var W=this.getCellForNode(Q),g=Q.parentNode;if(Y){var V=this.getCellTitleId(W),b=this.getCellUnitIndex(W);selectedTitle=this.selections[V];selectedUnit=selectedTitle&&selectedTitle[b];if(selectedUnit){for(var X=0,Z=selectedUnit.length;X<Z;X++){J(selectedUnit[X]);}delete selectedTitle[b];return ;}}var U=F(W,this);if(W.axis===K){for(var X=0,P=0,Z=g.cells.length;X<Z&&P<U;X++){var S=g.cells[X],a=this.getCellForNode(S);if(N(a,W)){A(S,a,this);P++;}}}else{if(W.axis===B){var e=mstrmojo.dom.findAncestorByName(Q,"table",false),f=e.rows;for(var X=0,P=0,Z=f.length;X<Z&&P<U;X++){var d=f[X].cells;for(var T=0,R=d.length;T<R;T++){var S=d[T],a=this.getCellForNode(S);if(N(a,W)){A(S,a,this);P++;break;}}}}else{A(Q,W,this);}}},rangeSelect:function L(k,l){var f=this.getCellForNode(k),P=this.getCellForNode(l);if(D(f,P)){if(f.o>P.o||f._ei>P._ei){var q=k;k=l;f=this.getCellForNode(k);l=q;P=this.getCellForNode(l);}var a=F(f,this),Q=f.axis,o=mstrmojo.dom.findAncestorByName(k,"table",false),X=o.rows,g=k.parentNode,r=g.rowIndex,Z=g.cells,d=l.parentNode.rowIndex;if(Q===K){for(var e=r;e<=d;e++){var R=X[e].cells,S=false;for(var b=0,h=R.length,T=0;b<h&&T<a;b++){var V=R[b],Y=this.getCellForNode(V);if(D(Y,f)){A(V,Y,this);T++;}}}}else{if(Q===B){for(var e=0,h=X.length,p=0;e<h&&p<a;e++){var R=X[e].cells,W=false;for(var b=0,U=R.length;b<U;b++){var V=R[b],Y=this.getCellForNode(V);if(N(Y,f)){W=true;}if(W){A(V,Y,this);}if(N(Y,P)){break;}}if(W){p++;}}}else{if(r==d){for(var e=k.cellIndex,h=l.cellIndex;e<=h;e++){var V=Z[e],Y=this.getCellForNode(V);A(V,Y,this);}}else{for(var e=r,h=d;e<=h;e++){var R=X[e].cells;for(var b=0,U=R.length;b<U;b++){var V=R[b],Y=this.getCellForNode(V);if(D(Y,f)){A(V,Y,this);break;}}}}}}}},doSelection:function(W,V,T){var X=mstrmojo.dom,P=X.ctrlKey(V,W),Q=X.shiftKey(V,W);if(!P){O(this);}var U=this.getCellForNode(T);var R=U&&(U.mix===undefined&&U.o!==undefined),S=U&&(U.mix!==undefined&&(U._lp||U._tp));if(R||S){if(Q){this.rangeSelect(this.lastSelectedTD,T);}else{this.singleSelect(T,P);this.lastSelectedTD=T;}}else{this.singleSelectForCopy(T,P);}G.call(this);}};})();(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var Y=mstrmojo.css,H=mstrmojo.dom,O=mstrmojo.array,K={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},W="scrollingMode",R="scrolling",b=3;var L=H.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function J(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function P(e,d){var k=H.eventTarget(d,e),h=this.scrollNode,g=H.position(h),j=this.scrollTrackNodes,f=this.scrollBarNodes,l=function l(w){var t=k===j[w];if(t){var x=K[w],o=f[w],z=H.position(o),q=H.getMousePosition(e,d)[x.position],r=q-z[x.position],p=r>0?1:-1,u=h[x.scrollDimension],AA=Math.abs(r-(z.h/2))*(u/g[x.dimension]),s={};s[x.scroll]={isStyle:false,start:h[x.scroll],stop:h[x.scroll]+(p*Math.min(u/3,500,AA)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:s,duration:200,interval:10,target:h})).play();}};l.call(this,"h");l.call(this,"v");}function B(e,d){var h=this.scrollNode,g=e.type==="mousewheel",f=g?-1:1;mstrmojo.array.forEach(["h","v"],function(r){var p=K[r],k=g?"wheelDelta":"delta",o=e[k+{h:"X",v:"Y"}[r]]*f,l=Math.abs(o),j=o/l,q=l===3&&H.isFF&&!L;h[p.scroll]+=q?j*40:o;});H.stopPropogation(d,e);H.preventDefault(d,e);}function a(j){var h=K[j],g=this.scrollNode,f=H.position(g),e=f[h.dimension],k=g[h.scrollDimension],d=Math.ceil(e)/k;return A(d,e,k);}function A(e,d,f){return(!isNaN(e)&&e<1)&&(Math.abs(d-f)>b);}function C(AD){var u="px",o=K[AD],f=this.scrollNode,p=J.call(this),AE=H.position(f),q=AE[o.dimension],x=f[o.scrollDimension],e=Math.ceil(q)/x,AC=this.scrollBarNodes,k=AC[AD],s=this.scrollTrackNodes,t=s[AD],AA=A(e,q,x),g=o.cls;if(!k){t=s[AD]=document.createElement("div");var h=this,r=function(AG){P.call(h,AG);},l=function(AG){B.call(h,AG);},z=function(AI,AG,AH){H.attachEvent(AI,AG,AH);h.installedEventListeners.push({e:AI,evt:AG,fn:AH});};z(t,"click",r);t.className="mstrmojo-scrolltrack "+g;k=AC[AD]=document.createElement("div");k.className="mstrmojo-scrollbar "+g;t.appendChild(k);p.appendChild(t);var AB=mstrApp.isSingleTier?"mousewheel":"wheel";z(t,AB,l);z(k,AB,l);}var AF=k.style,j=(f[o.scroll]/f[o.scrollDimension]),d=H.delta(f,J.call(this))[o.position],w=t.style;if(AA){w[o.styleDir]=d+u;AF[o.styleDim]=(e*q)+u;AF[o.styleDir]=(q*j)+u;}Y.toggleClass(p,o.hostCls,AA);Y.toggleClass(f,o.scrollNodeCls,AA);return AA;}function G(){return !(mstrApp.isSingleTier&&L);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function T(d){this._super(d);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=G();}this.installedEventListeners=[];},onRender:function I(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function F(){var e=this.scrollNode;if(e){var d=H.attachMarkupEvent(this.id,e,"scroll");this.installedEventListeners.push({e:e,evt:"scroll",fn:d});}if(!this.hasCustomScrollbar){Y.addClass(e,"mstrmojo-sb-show-default");return ;}if(e){Y.addClass(J.call(this),"mstrmojo-scrollbar-host");Y.addClass(e,"mstrmojo-scrollNode");}},updateScrollbars:function Z(){if(!this.hasRendered){return ;}this.setupScrollNodes();if(!this.hasCustomScrollbar){if(this.scrollNode){this.scrollNode.style.overflowX=a.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};var d=this.scrollNode.style;d.overflowY=C.call(this,"v")?"scroll":"hidden";d.overflowX=C.call(this,"h")?"scroll":"hidden";}},onscroll:function V(){var l=this.scrollNode;if(l&&this.hasCustomScrollbar){var h=function h(o){var p=parseInt(o);return p===null||isNaN(p)?0:p;},j=H.position(l),k=j.h-h(Y.getStyleValue(l,"padding-bottom")),e=j.w-h(Y.getStyleValue(l,"padding-right")),g=this.scrollBarNodes,f=g.v,d=g.h;if(l.scrollHeight-k>0){f.style.top=((k-H.position(f).h)*(l.scrollTop/(l.scrollHeight-k)))+"px";}if(l.scrollWidth-e>0){d.style.left=((e-H.position(d).w)*(l.scrollLeft/(l.scrollWidth-e)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function E(e){var h=this.scrollNode,g=H.position(h),f=e.src.node,d=this.scrollBarNodes;if(this.isDraggingScrollBar(e)){return{isScrollBar:true,direction:f===d.v?"v":"h",scrollTop:h.scrollTop,scrollLeft:h.scrollLeft,conversionRatio:{y:h.scrollHeight/g.h,x:h.scrollWidth/g.w}};}return(this._super&&this._super(e));},isDragValid:function D(d){return this.isDraggingScrollBar(d)||(this._super&&this._super(d))||false;},isDraggingScrollBar:function S(e){var f=e.src.node,d=this.scrollBarNodes;return !!d&&(f===d.v||f===d.h);},ondragstart:function X(d){if(this.isDraggingScrollBar(d)){Y.addClass(d.src.node,R);Y.addClass(J.call(this),W);}if(this._super){this._super(d);}},shouldDragBubble:function Q(d){var e=d.src.node,f=this.scrollTrackNodes;return !!f&&(e===f.v||e===f.h);},ondragmove:function N(e){if(this.isDraggingScrollBar(e)){var p=e.tgt,d=e.src,q=p.pos,f=d.pos,k=d.node,j=this.scrollNode,o=this.scrollBarNodes,l=d.data,h={y:(q.y-f.y),x:(q.x-f.x)},g=l.conversionRatio;if(k===o.v){j.scrollTop=l.scrollTop+(h.y*g.y);}else{j.scrollLeft=l.scrollLeft+(h.x*g.x);}}if(this._super){this._super(e);}},ondragend:function N(d){if(this.isDraggingScrollBar(d)){Y.toggleClass(d.src.node,R,false);Y.toggleClass(J.call(this),W,false);}if(this._super){this._super(d);}},widgetResized:function M(){if(this._super){this._super();}this.updateScrollbars();},unrender:function U(d){O.forEach(this.installedEventListeners,function(e){H.detachEvent(e.e,e.evt,e.fn);});delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(d);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom");var D=mstrmojo.dom,H=D.position,I=Math;function F(U,P,N){var O=this._ellTestNodes||{},K=O[U],M=mstrmojo.css.getComputedStyle(P),J=["width","height"];if(N){J.reverse();}var S=J[0],Q=J[1];if(!K||!D.contains(this.domNode,K.n,true,document.body)){var L=P.cloneNode(true);L.removeAttribute("id");L.removeAttribute("onclick");var T=L.style;T.position="absolute";T.top="-10000px";T.maxHeight=T.maxWidth="none";T[S]="auto";P.parentNode.appendChild(L);var R=parseInt(M["max-"+S],10);if(isNaN(R)){R=parseInt(M[S],10);}K=O[U]={n:L,m:R,d:S.substr(0,1)};if(K.m>0){this._ellTestNodes=O;}}else{K.n.innerHTML=P.innerHTML;}K.n.style[Q]=M[Q];return K;}function B(K,L){var M=this.ellipsisText;switch(this.ellipsisPosition){case"middle":var J=I.floor(L/2);return K.slice(0,J).join("")+M+K.slice(-J).join("");case"end":return K.slice(0,L).join("")+M;default:return K.join("");}}var G=4;mstrmojo._SupportsEllipsisText=mstrmojo.provide("mstrmojo._SupportsEllipsisText",{_mixinName:"mstrmojo._SupportsEllipsisText",ellipsisText:"\u2026",ellipsisPosition:"end",ellipsize:function A(U,P,O){var V=P.innerHTML;if(!V){return false;}var K=F.call(this,U,P,O),M=function(){var W=H(K.n)[K.d];return(W<=K.m);};if(M()){return false;}var L=K.n,J=V.split(""),R=0,N=J.length,Q,S;while(R<N){var T=I.floor((R+N)/2);V=L.innerHTML=B.call(this,J,T);if(M()){R=T+1;}else{N=T-1;}if(N-R<G){for(S=R-1;S<N+1;S++){V=L.innerHTML=B.call(this,J,S);if(!M()){break;}Q=V;}}if(Q){P.innerHTML=Q;break;}}return true;},ellipsizeElements:function C(T,O,N){var L=F.apply(this,arguments),M=function(){var U=H(L.n)[L.d];return(U<=L.m);};if(M()){return false;}var Q=this.ellipsisText;var P=this;var K=document.createElement("span");K.innerHTML=Q;var J=function(Y,X){var U=Y.slice(0,X).concat([K]);var W=document.createElement("div");for(var V=0;V<U.length;V++){W.appendChild(U[V]);}return W.innerHTML;};var S=function(V,Z,Y,U){var b=0,W=Z.length,a,f,d;var X=function(g){while(g.hasChildNodes()){g.removeChild(g.lastChild);}};while(b<W){var e=I.floor((b+W)/2);if(U){f=Y.call(P,Z,e);V.nodeValue=f;}else{X(V);f=Y.call(P,Z,e);V.innerHTML=f;}if(M()){b=e+1;}else{W=e-1;}if(W-b<G){d=b==0?0:b-1;for(;d<W+1;d++){if(U){f=Y.call(P,Z,d);V.nodeValue=f;}else{X(V);f=Y.call(P,Z,d+1);V.innerHTML=f;}if(!M()){if(!U){V.removeChild(V.lastChild);a=f=V.innerHTML;}break;}if(!U){V.removeChild(V.lastChild);f=V.innerHTML;}a=f;}}if(a){if(U){V.nodeValue=a;}else{V.innerHTML=a;}break;}}};var R=function(X){if(X.nodeType==3){var Y=X.nodeValue;if(!Y){return false;}S(X,Y.split(""),B,true);return true;}else{var V=X.childNodes;if(!V||V.length===0){return false;}var W=[];for(var U=0;U<V.length;U++){W[U]=V[U];}if(W.length!=1||W[0].nodeType!=3){S(X,W,J,false);}return R(X.lastChild);}};O.style.visibility="visible";L.n.style.visibility="hidden";R(L.n);O.style.visibility="hidden";L.n.style.visibility="visible";return true;},unrender:function E(J){delete this._ellTestNodes;this._super(J);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.string","mstrmojo.css");var K=mstrmojo.css,N=mstrmojo.string,H=mstrmojo.dom,L=13,C=27;function I(S){if(this._editComplete){return ;}var W,Q=false,V=this.text,T=false;if(S===C){W=V;T=true;Q=true;}if(!S||(!this.allowNewLine&&S===L)){var R=this[this.editableSlot],U=R.innerText||R.textContent||"";if(!this.allowNewLine){W=U.replace(/\n/g,"");}else{W=U;}Q=true;if(!this.allowEmptyText&&W.length===0){W=V;T=true;}}if(Q){this._editComplete=true;W=W.replace(/\u00A0/g,"\u0020");this.text=W;this.set("isEditing",false);this.onTextEditComplete(W!==V,V);delete this._editComplete;}if(T){this.refresh();}}function E(Q){var R={dblclick:"editOnDoubleClick",click:"editOnClick"};if(this[R[Q.name]]&&Q.getTarget()===this[this.editableSlot]){this.set("isEditing",true);}}function F(S,R,Q){if(typeof R["on"+Q]!=="function"){H.attachMarkupEvent(S,R,Q);}}mstrmojo._HasEditableText=mstrmojo.provide("mstrmojo._HasEditableText",{_mixinName:"mstrmojo._HasEditableText",editableSlot:"domNode",editButtonSlot:null,isEditing:false,editOnClick:true,allowEmptyText:false,allowNewLine:false,editOnDoubleClick:false,onTextEditComplete:mstrmojo.emptyFn,postBuildRendering:function A(){this._super();var S=this.editableSlot,Q=this[S],T=this[this.editButtonSlot||S];K.addClass(Q,"hasEditableText");this.text=this.text||Q.innerText||Q.textContent||"";Q.innerHTML=N.encodeHtmlString(this.text,true).replace(/ (?= )/g,"&nbsp;");var R=this.id;if(this.editOnClick){F(R,T,"click");}F(R,T,"dblclick");F(R,Q,"blur");F(R,Q,"keyup");F(R,Q,"keydown");},onclick:function P(Q){E.call(this,Q);if(this._super){this._super(Q);}},ondblclick:function G(Q){E.call(this,Q);},onblur:function M(){I.call(this);},onkeyup:function B(R){var Q=window.event||R.e;I.call(this,Q.keyCode);},onkeydown:function J(R){var Q=window.event||R.e;if(Q.keyCode===L){I.call(this,Q.keyCode);R.cancel();}},_set_text:function D(S,Q){var R=this.text;this.text=Q;if(this.hasRendered){this[this.editableSlot].innerHTML=N.encodeHtmlString(Q||"",true);}return(R!==Q);},onisEditingChange:function O(){if(this.hasRendered){var Q=this[this.editableSlot],R=!!this.isEditing;Q.contentEditable=R;Q.spellcheck=false;K.toggleClass(Q,"editable",R);if(R){Q.focus();H.setElementSelection(Q);}else{Q.blur();Q.scrollLeft=0;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(l,Z,k,r,W,d,s,q){if(!Z){return{start:0,end:0};}var f=this.wrapperNodes(l),j=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,g=k+r,e=f[0].offsetTop,b;for(var o=1;o<=Y;o++){b=f[j].offsetTop-e+q;if(b<k){X=j;}else{if(b>g){V=j;}}var a=Math.round(Z/Math.pow(2,o+1));j+=(b>k)?-a:a;j=Math.min(Math.max(0,j),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(d,V,X,b,W){var Y=this._nd2iw(d,V,X),e,a,f;if(Y){a=this._iw2idx(d,V,Y);e=a;f=this.itemOffsetTop(d,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+f+Z/2){e++;f+=Z;}}else{return d.dropCuePos;}return{left:0,top:f,idx:e,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(f,b,l,e,a,o){var p=this.itemWrapperPrefix(l),h=this.itemWrapperSuffix,Z=p+this.itemWrapperPrefill+h,Y=[this.markupPrefix],W=1,V=l.selectedIndices||{},r=function q(k,j){for(var t=k;t<j;t++){Y[W++]=p;var u=b.build(l,e,f[t],t);if(V[t]){u=u.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=u;Y[W++]=h;}};var d=(f&&f.length)||0;a=a&&b?Math.min(a,d):0;if(a){r(0,a);}o=o&&b?Math.min(o,d-a):0;var g=d-o;for(var X=a;X<g;X++){Y[W++]=Z;}if(o){r(g,d);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,h,e,q,g,W,b,o){var f=(h&&h.length)||0,l=this.wrapperNodes(X),r=g.itemStatus,V=mstrmojo.css,Z=q.selectedIndices||{};for(var d=W,j=Math.min(b+1,f),a=0;d<j;d++){if(r[d]!==A){l[d].innerHTML=e.build(q,g,h[d],d);if(Z[d]){var Y=l[d].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===o){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(h,X,d,l){if(X&&l){var e=this.wrapperNodes(X);if(e){var W=mstrmojo.css,o=d.itemStatus,k;for(var b=0,V=l.removed,g=V&&V.length;b<g;b++){k=V[b];if(o[k]){W.removeClass(e[k].firstChild,["selected"]);}}for(var Z=0,f=l.added,Y=f&&f.length;Z<Y;Z++){k=f[Z];if(o[k]){W.addClass(e[k].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.css");mstrmojo.android.selectors._SupportsHoriz=mstrmojo.provide("mstrmojo.android.selectors._SupportsHoriz",{_mixinName:"mstrmojo.android.selectors._SupportsHoriz",scrollerConfig:{bounces:false,showScrollbars:false},minItemHeight:25,getItemProps:function A(H,D){var G=this._super(H,D),F=this.height,I=this.items.length,E;G.tag="label";G.n=G.n||"&nbsp";if(this.isHoriz){if(F){E=F;}if(this.itemWidthMode===0){G.style+="width:"+Math.floor(100/I)+"%;";}}else{if(F){E=Math.round(parseInt(F,10)/I);E=Math.max(E,this.minItemHeight);E+="px";}}if(E){G.style+="line-height:"+E+";";}return G;},init:function C(E){this._super(E);if(this.isHoriz){this.cssDisplay="table";var D=["horiz"];if(this.itemWidthMode===0){D.push("fixedWidth");}mstrmojo.css.addWidgetCssClass(this,D);}},updateScrollerConfig:function B(){var G=this._super(),K=this.itemsContainerNode,F="Height",D="y",J="v",E={};if(this.isHoriz){F="Width";D="x";J="h";}G.scrollEl=K;var L=this[F.toLowerCase()];if(L){L=parseInt(L,10);var I=Math.max(K["offset"+F]-L,0),H=G[J+"Scroll"]=(I!==0);if(H){E[D]={start:0,end:I};}}G.offset=E;G.origin=G.origin||{x:0,y:0};return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.publisher","mstrmojo._Provider");var G=mstrmojo.hash,A=mstrmojo.array,B=mstrmojo.registry,D=mstrmojo.publisher;mstrmojo.Arr=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Arr",postApplyProperties:null,postCreate:null,length_bindEvents:["add","remove"],init:function H(K){var J;if(K&&K.data){J=K.data;delete K.data;}else{if(K){J=K;K=null;}}if(!J||J.constructor!==Array){J=[];}G.copy(mstrmojo.Arr.prototype,J);if(K){G.copy(K,J);}if(J.postApplyProperties){J.postApplyProperties();}B.add(J);if(J.postCreate){J.postCreate();}return J;},destroy:function E(){D.clearSubscriptions(this.id);B.remove(this);},add:function I(L,J,K){var M=L&&L.length;if(M){if(J==null){J=this.length;}A.insert(this,J,L);if(!K&&(this.onadd||D.hasSubs(this.id,"add"))){this.raiseEvent({name:"add",value:L,index:J});}}},remove:function F(J,L,K){if(L==null){L=1;}if((J!=null)&&L){var M=this.splice(J,L);if(!K&&(this.onremove||D.hasSubs(this.id,"remove"))){this.raiseEvent({name:"remove",value:M,index:J});}}}});mstrmojo.Arr.makeObservable=function C(J,K){if(!J){return ;}if(!K){K={};}K.data=J;return this.prototype.init(K);};})();(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var B=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(mstrmojo.Base,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",id:"",init:function I(J){this.disposables=[];this._super(J);B.add(this);if(this.postCreate){this.postCreate();}},addDisposable:function G(M){var K=this.disposables,L,J;if(M.constructor===Array){for(L=0,J=M.length;L<J;L++){K.push(M[L]);}}else{K.push(M);}return M;},destroyDisposables:function D(J){F.forEach(this.disposables,function(K){if(K.destroy){K.destroy(J);}else{if(K.clear){K.clear();}}});this.disposables=[];},throwAbstractMethodError:function A(J){throw new Error(this.scriptClass+" must implement "+J+".");},destroy:function H(J){if(this.destroyed){return ;}this._super(J);this.destroyDisposables(J);B.remove(this);delete this.parent;this.destroyed=true;}});var C=mstrmojo.Obj;C.free=function E(J){if(J instanceof C){J.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,b=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(f){var e=parseInt(f,10),g=mstrmojo.validation.STATUSCODE;if(e===0||e===1||e>10){return{code:g.VALID};}return{code:g.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(e){var f=String(e).replace(/[^\d]/g,"");if(f.length<10){return{code:b.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(e)){return{code:b.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:b.VALID};},VALIDATE_ZIPCODE:function G(e){var g="",f=this.dtp;if(!H.REGEXP.US_ZIP.test(e)){if(H.isNumeric(f)||H.isInt(f)){g=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(f)){g=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:b.INVALID,msg:g};}return{code:b.VALID};},VALIDATE_EMAIL:function T(e){var f=e.indexOf("@");if(f===-1){return{code:b.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(e.substring(f).indexOf(".")===-1){return{code:b.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(e)?{code:b.VALID}:{code:b.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(e){var g=this.dtp,f;if(H.isNumeric(g)||H.isInt(g)){f=String(e).replace(/[^\d]/g,"");if(f.length!==9){return{code:b.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(e)){return{code:b.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:b.VALID};}};H.isInt=function D(e){return A[e]===1;};H.isNumeric=function Y(e){return A[e]===2||A[e]===5;};H.isString=function J(e){return A[e]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,Z=mstrmojo.num,U=mstrmojo.string,F=mstrmojo.date;function P(o,p){var j=o.dtp,l=o.constraints,r=l.allowedFormatChars||"",h=(A[j]===1),e=(A[j]===2),f=(A[j]===6),q=mstrmojo.locales.number.THOUSANDSEPARATOR,g=mstrmojo.locales.number.DECIMALSEPARATOR,k;if(h){if(!o._intRegExp){r+="0-9-"+(o.isList?L:"")+q;o._intRegExp=new RegExp("[^"+r+"]");}k=o._intRegExp;}if(e){if(!o._numericRegExp){r+="0-9-"+(o.isList?L:"")+g+q;o._numericRegExp=new RegExp("[^"+r+"]");}k=o._numericRegExp;}return !!k&&k.test(p);}function d(o,q){var j=o.dtp,l=o.constraints,h=(A[j]===1),e=(A[j]===2),f=(A[j]===6),g=l.min,p=l.max,k;if(g===undefined&&p===undefined){return false;}if(h||e){return Z.inNumericRange(q,g,p)!==0;}if(f){return F.inDateTimeRange(q,g,p)!==0;}return false;}function K(f,e){return !Z.isNumeric(e);}function R(h,f){var g=(h.dtp===M.DATE),e=(h.dtp===M.TIME);return(g?!F.isDate(f):(e?!F.isTime(f):!F.isDateAndOrTime(f)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function W(e){this._super(e);if(!this.constraints){this.constraints={};}var f=this.constraints;if(!f.hasOwnProperty("trigger")){f.trigger=B.NONE;}},_set_value:function(k,g){var h=this.value,f=(h!==g);if(f){this.value=g;var j=this.constraints.trigger,e=(j&B.VALUESET)>0;if(e){this.validate(g);}}return f;},validate:function O(){var g=(this.value!==null&&this.value!==undefined)?this.value:"",k=this.isList?g.split(L):[g],j,f,l,e=k.length,h;for(h=0;h<e;h++){j=this.doValidation(k[h]);f=(j.code>b.VALID);if(f){if(e>1){j.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",k[h]||" ");}break;}}l=f?"onInvalid":"onValid";if(!f&&this.autoFormat){this.format();}this.set("validationStatus",j);if(this[l]){this[l](j);}},format:function X(){var k=this.dtp,g=(A[k]===6);if(!g){return ;}var o=mstrConfig.listSep,r=this.value||"",f=this.isList?r.split(o):[r],q=k===14,p=[],e,h=mstrmojo.locales.datetime,l=f.length,j;for(j=0;j<l;j++){r=f[j];e=F.parseDateAndOrTime(r);if(e){if(q&&e.date){p.push(F.formatDateInfo(e.date,h.DATEOUTPUTFORMAT));}else{p.push((e.date?F.formatDateInfo(e.date,h.DATEOUTPUTFORMAT):"")+" "+(e.time?F.formatTimeInfo(e.time,h.TIMEOUTPUTFORMAT):""));}}}this.set("value",p.join(o));},isValid:function V(){var e=this.validationStatus;if(!e){this.validate();}return this.validationStatus.code===b.VALID;},clearValidation:function a(){this.set("validationStatus",{code:b.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(u){var q=this.constraints,s=q.regExp,g=q.validator,e={id:this.id,code:b.VALID,msg:""},p=this.dtp,o=(A[p]===1),f=(A[p]===2||A[p]===5),h=(A[p]===3),j=(A[p]===6),l=U.isEmpty(u),t=String(u).length,k="",x=mstrmojo.locales.validation;if(this.required&&l){e.code=b.INVALID_EMPTY;e.msg=x.requiredFieldError;return e;}u=U.trim(u);if(!l&&P(this,u)){if(o){k=x.integerDataType;}if(f){k=x.numericDataType;}if(j){k=x.dateDataType;}e.code=b.INVALID_CHAR;e.msg=x.invalidCharError.replace("#",k);return e;}if(!l&&j&&R(this,u)){e.code=b.INVALID_BAD_DATESTRING;e.msg=x.invalidDateStringError;return e;}if(!l&&(f||o)&&K(this,u)){e.code=b.INVALID_BAD_NUMERICFORMAT;e.msg=x.invalidNumericFormatError;return e;}if(!l&&(o||f||j)&&d(this,u)){e.code=b.INVALID_OUTOFRANGE;if(q.min!==null&&q.max!==null){k=x.outofRangeError.replace("# ","").replace("##",q.min).replace("###",q.max);}else{if(q.min!==null){k=x.noLessMinError.replace("##",q.min).replace("# ","");}else{if(q.max!==null){k=x.noGreaterMaxError.replace("###",q.max).replace("# ","");}}}e.msg=k;return e;}if(h&&q.minLen!==null&&q.maxLen!==null){if(t<q.minLen||t>q.maxLen){e.code=b.INVALID;e.msg=mstrmojo.desc(9211).replace(/#/,q.minLen).replace(/##/,q.maxLen);return e;}}if(s&&!s.test(u)){e.code=b.INVALID_REGEX;e.msg=mstrmojo.desc(9205);return e;}var w=g&&g.apply(this,[u]);if(w){e.code=w.code;e.msg=w.msg;return e;}return e;}});}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.hash","mstrmojo.string","mstrmojo.array");var A=mstrmojo.num,D=mstrmojo.hash,C=mstrmojo.string,B=mstrmojo.array;mstrmojo.MetricSelectorUtility=mstrmojo.provide("mstrmojo.MetricSelectorUtility",{_GENERIC:1,_RANK:2,_PERCENT:3,OP:{_EQUALS:0,_NOT_EQUALS:1,_GREATER:2,_GREATER_EQUAL:3,_LESS:4,_LESS_EQUAL:5,_BETWEEN:6,_NOT_BETWEEN:7,_IN:8,_NOT_IN:9,_IS_NULL:10,_IS_NOT_NULL:11},OP_NAMES:[{n:mstrmojo.desc(2795,"Equals"),v:0},{n:mstrmojo.desc(2796,"Does not equals"),v:1},{n:mstrmojo.desc(521,"Greater than"),v:2},{n:mstrmojo.desc(522,"Greater than or equal to"),v:3},{n:mstrmojo.desc(523,"Less than"),v:4},{n:mstrmojo.desc(524,"Less than or equal to"),v:5},{n:mstrmojo.desc(696,"Between"),v:6},{n:mstrmojo.desc(746,"Not between"),v:7},{n:mstrmojo.desc(587,"In"),v:8},{n:mstrmojo.desc(2204,"Not In"),v:9},{n:mstrmojo.desc(2202,"Is null"),v:10},{n:mstrmojo.desc(2203,"Is not null"),v:11}],RANK_OP_NAMES:[{n:mstrmojo.desc(529,"Highest"),v:1},{n:mstrmojo.desc(530,"Lowest"),v:2},{n:mstrmojo.desc(4407,"Highest %"),v:3},{n:mstrmojo.desc(4406,"Lowest %"),v:4}],Q:{_G:0,_RT:1,_RB:2,_PT:3,_PB:4},MRPFN:{TOP:1,BOTTOM:2,BETWEEN:3,EXCLUDETOP:4,EXCLUDEBOTTOM:5,NOTBETWEEN:6,EQUALS:7,DIFFERENTFROM:8,EQUALSDESCENDING:15,NOTEQUALSDESCENDING:16,GREATERTHANDESCENDING:4,GREATERTHANEQUALSDESCENDING:18,LESSTHANDESCENDING:20,LESSTHANEQUALSDESCENDING:1,BETWEENDESCENDING:13,NOTBETWEENDESCENDING:14,INDESCENDING:22,NOTINDESCENDING:24,EQUALSASCENDING:7,NOTEQUALSASCENDING:8,GREATERTHANASCENDING:5,GREATERTHANEQUALSASCENDING:17,LESSTHANASCENDING:19,LESSTHANEQUALSASCENDING:2,BETWEENASCENDING:3,NOTBETWEENASCENDING:6,INASCENDING:21,NOTINASCENDING:23},FN:{EQUALS:6,NOTEQUALS:7,GREATERTHAN:8,GREATERTHANEQUALS:10,LESSTHAN:9,LESSTHANEQUALS:11,BETWEEN:17,NOTBETWEEN:44,ISNULL:54,ISNOTNULL:55,IN:22,NOTIN:57,CONTAINS:76,NOTCONTAINS:79,BEGINSWITH:77,NOTBEGINSWITH:80,ENDSWITH:78,NOTENDSWITH:81,LIKE:18,NOTLIKE:43,AND:19,OR:20,NOT:21,RANK:23,RANKPERCENT:59,TUPLE:1000},F:[[6,7,8,10,9,11,17,44,22,57,54,55],[15,16,4,18,20,1,13,14,22,24],[7,8,5,17,19,2,3,6,21,23]],EnumNumberCategory:{Default:-2,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7,Special:8,General:9,FromGrid:10},typeHelperCls:{0:"MetricValueSliderHelper",defaultCls:"MetricRankSliderHelper"},ErrorType:{_GENERIC:mstrmojo.desc(11689,"Invalid Number"),_RANK:mstrmojo.desc(11856,"Please enter value between ## and ###.")},getQuaByFunc:function(I,J){var F=this.F,E=this.Q,H=E._G,G=function(K){return B.indexOf(F[1],K)!==-1;};if(G(I)){H=(J===this._RANK)?E._RT:E._PT;}else{H=(J===this._RANK)?E._RB:E._PB;}return H;},getFuncInfo:function(H,I){var G={},F=this.Q,E=this.F;G[F._G]={ft:this._GENERIC,f:E[0][H]};G[F._RT]={ft:this._RANK,f:E[1][H]};G[F._RB]={ft:this._RANK,f:E[2][H]};G[F._PT]={ft:this._PERCENT,f:E[1][H]};G[F._PB]={ft:this._PERCENT,f:E[2][H]};return G[I]||{};},getOpIdxByfunc:function(G,H){if(!G||!H){return -1;}var E=this.F,F=-1;switch(H){case this._GENERIC:F=B.indexOf(E[0],G);break;case this._RANK:case this._PERCENT:F=B.indexOf(E[1],G);if(F===-1){F=B.indexOf(E[2],G);}break;}return F;},getIncludeByOp:function(F){var E=this.OP;return F===E._EQUALS||F===E._GREATER_EQUAL||F===E._LESS_EQUAL||F===E._BETWEEN||F===E._IN;},formatNumber:function(F,H,E){var I,G=this.Q,J=E.fm;if(!A.validateFormat(J)){J="#,##0.00;(#,##0.00)";}if(F===G._G){I=(J)?A.formatByMask(J,H):A.format(E.cat,E.dp,E.curr,H);}else{if(F===G._RB||F===G._RT){I=String(parseInt(H,10));}else{if(F===G._PB||F===G._PT){I=parseFloat(H)+"%";}}}return I;},doValidation:function(N,H,K){var J=H.qua,L=H.low,G=H.high,I=this.Q,O=J===I._RT||J===I._RB,E=J===I._PT||J===I._PB,M="",F;if(C.isEmpty(N)){M="emptyValueVIWarning";}else{if(!(A.isNumeric(N)||(E&&String(N).match(/^\d+(\.\d+)?%$/)))){M="invalidValueVIWarning";}else{if((J===I._PT||J===I._PB)&&A.inNumericRange(parseFloat(N),L,G)){M="outOfRangeVIWarning";F=E?["0","100%"]:[L,G];}else{if(O&&!A.isInt(N)){M="notIntegerVIWarning";}}}}return D.copy(K,{invalid:!!M,errorCode:M,args:F||[]});}});}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.VisChartUtils");var L=0;var N=mstrmojo.num;var F=[{n:1,s:""},{n:1000,s:"K"},{n:1000000,s:"M"},{n:1000000000,s:"B"},{n:1000000000000,s:"T"},{n:1000000000000000,s:"Q"}];var M=3;var K=5;function D(T,P,S){var R=function(V,U){return U?Math.floor(V):Math.ceil(V);};var Q=R(T/P,S)*P;if(Q.toString().indexOf(".")>=0&&P<1&&Q>1){Q=parseFloat(Q.toFixed(2));}if(Q>0&&Q<1&&P>1/1000){Q=parseInt(R(Q*100,S))/100;}return Q;}function H(U,V){if(!V){V=",";}var P=U.length;for(var S=0;S<P;S++){var T=U[S].rv,Q=T.length;for(var R=0;R<Q;R++){if(Number(T[R])){break;}T[R]=T[R].replace(V,".");}}}mstrmojo.VisChartData=mstrmojo.provide("mstrmojo.VisChartData",{process:function B(T){if((!T.baseModel&&T.model)||T.model.vp){this.setDerivedModel(T);var P=T.baseModel,V=P.colHeaders,g=V.length,Y=V[g-1].items[0].ds;if(Y&&Y!=="."){H(P.series,Y);}else{if(!Y){H(P.series);}}}var R=T.model;var Q=R.series,a=Q.length;if(a<=0){return ;}var W=!T.isLinearChart&&T.isDrawAxis&&T.drawYAxisLabels,Z="";L=0;var U=new Array();if(Q&&Q[0]&&Q[0].rv.length){for(var d=0;d<a;d++){var X=Q[d].rv,f=X.length,b=U.length;for(var e=0;e<f;e++){var h=X[e];if(!h||h.length==0){continue;}if(L===0){L=Q[d].v[e].indexOf("%")>=0?100:1;}U[b]=parseFloat(h);if(W&&U[b].toString().length>Z.length){Z=U[b].toString();}b++;}}U=U.sort(function S(k,j){return k-j;});}R.mvalues=U;if(W){R.mls=Z;R.ylbls=U;}},setDerivedModel:function I(Z){var R=Z.model,b=R.series,S=b.length,Y=R.ri,a=R.rowHeaders,X=R.colHeaders;var W=typeof (R.vp)!=="undefined"&&R.vp.rl&&R.vp.rl.length>0?R.vp.rl:null;Z.baseModel=R;var Q=b[0].rv.length,V=0;if(W&&Z.isTimeSeries){var T=parseInt(W[0].rs),P=W[0].sr;for(var U=0;U<a.length;U++){if(a[U].id==P){V=Q-(a[U].l*T)>=0?Q-(a[U].l*T):0;break;}}}Z.model={categories:R.categories,mtrcs:R.mtrcs,series:b,colHeaders:X,rowHeaders:a,rne:Q,rns:V,ri:Y};},processLinearData:function G(b){this.process(b);var T=b.model;var a=T.mvalues,d=b.getMaxValue(),U=b.getMinValue();var V=this.generateAxisLabels(b,d,U);T.mvalues=V;var e=b.isDrawAxis&&b.drawYAxisLabels;var Q=b.isTimeSeries?b.formatProp.condenseLabels:true;if(e){var X=this.condenseLabels(V,M);if(Q){var R=this.checkDuplicatedCondensed(X.condensedLabels);if(R){for(S=M+1;S<K;++S){X=this.condenseLabels(V,S);R=this.checkDuplicatedCondensed(X.condensedLabels);if(!R){break;}}if(R){Q=false;}}T.mls=X.maxLabel;T.ylbls=X.condensedLabels;}if(!Q){var Z=[];var P="";var W=T.colHeaders[T.colHeaders.length-1].items;var Y=W&&W[0]&&W[0].f||"";for(var S=0;S<V.length;S++){Z[S]=N.formatByMask(Y,V[S]);if(Z[S].toString().length>P.length){P=Z[S].toString();}}T.mls=P;T.ylbls=Z;}}},checkDuplicatedCondensed:function E(P){var Q=false;for(var R=1;R<P.length;R++){if(P[R]==P[R-1]){Q=true;break;}}return Q;},condenseLabels:function J(Q,P){var U=Q.length;var R="";var T=new Array();for(var S=0;S<U;S++){T[S]=this.formatNumber(Q[S],P);if(T[S].toString().length>R.length){R=T[S].toString();}}return{condensedLabels:T,maxLabel:R};},generateAxisLabels:function A(T,W,R,X){var S=new Array();if(W==R){if(R<0){S.push(R);}S.push(0);if(R>0){S.push(R);}return S;}var P=this.calInterval(W,R,X);if(T.isTimeSeries&&T.formatProp.useCustomAxisScale){var Q=W;var V=R;}else{var Q=D(W,P,false);var V=D(R,P,true);}if((R-V)>0.9*P){V=D(R,P,false);}if((Q-W)>0.9*P){Q=D(W,P,true);}S=new Array();if(P<((Q-V)/30)){S.push(V);S.push(Q);}else{var U=V;while(U<=Q){S.push(U);if(U==V){U=Math.ceil((V+P/100)/P)*P;}else{U=Math.ceil((U+P)*1000)/1000;}}if(S[S.length-1]<Q){S.push(Q);}}return S;},formatNumber:function C(T,Q){var U="",a=1,S=T*L;if(S<0){S=-T*L;a=-1;U="-";}if(S<=1+0.000001){a*=S;if(S.toString().length<=Q){U+=S;}else{var W=2;U+=S.toFixed(W);for(var V=U.length-1;V>=0;--V){if(U.charAt(V)=="."){break;}else{if(U.charAt(V)!="0"){++V;break;}}}if(V<U.length){U=U.substr(0,V);}}}else{var P=Math.log(S)/Math.LN10+0.000001;var R=parseInt(P/3);if(R>=F.length){R=F.length-1;}var d=S/F[R].n;var Y=d.toString();if(Y.length>Q){var X=Y.indexOf(".");var Z=X<0?0:Y.length-X+1,e=X<0?Y.length:X;var b=Q-e-1;Y=d.toFixed(b<0?0:b);}a*=parseFloat(Y)*F[R].n;U+=Y+F[R].s;}return U;},calInterval:function O(P,R,S){var Q,T=(P-R);if(T==0){if(P==0){P=1;R=-1;}else{P=P*2;R=R/2;}T=P-R;}Q=1;if(T<1){while(T<1){T*=10;Q/=10;}}else{if(T>=10){while(T>=10){T/=10;Q*=10;}}}if(T<1.8){Q*=0.2;}else{if(T<3.1){Q*=0.4;}else{if(T<4.6){Q*=0.5;}else{if(T>=8.1){Q*=2;}}}}if(S){Q=Math.round(Q);if(Q<1){Q=1;}}else{if((Q>0&&Q<1)&&(parseInt(Q.toFixed(2)*100)/100)>0){Q=parseInt(Q.toFixed(2)*100)/100;}}return Q;}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.num","mstrmojo.array","mstrmojo.DICFactory");var F=1,J=0,L=1,N=2,G=".",I=mstrmojo.dom,K=mstrmojo.css,E=mstrmojo.hash,D=mstrmojo.Enum_Keys.TAB,H=function(Q){return(Q>=1&&Q<=7)||Q==21||Q==22||Q==30;},C=function(T,R){if(I.isIE&&!/px$/.test(R)){var Q=document.createElement("img"),S;Q.style.zIndex=-1;Q.style.left=R;T.appendChild(Q);S=Q.style.pixelLeft;T.removeChild(Q);return S+"px";}return R;},B=function(Q,R){return parseInt(C(Q,K.getStyleValue(Q,R)),10)||0;},M=function(Q){return{lp:B(Q,"paddingLeft"),rp:B(Q,"paddingRight"),tp:B(Q,"paddingTop"),bp:B(Q,"paddingBottom")};},P=function(R){var Q=K.getComputedStyle(R)||R.currentStyle;return{fontFamily:Q.fontFamily,fontSize:C(R,Q.fontSize),fontStyle:Q.fontStyle,fontVariant:Q.fontVariant,fontWeight:Q.fontWeight,textAlign:Q.textAlign};},O=function(S,Q){var R=mstrmojo.findAncestor(S,"scriptClass","mstrmojo.DocInfoWindow");if(!!R){R[Q?"registerLock":"releaseLock"](this);}};mstrmojo._IsInputControl={_mixinName:"_IsInputControl",dic:null,owner:null,openerNode:null,popupStyle:J,items:null,applyOnEnter:true,lv:null,init:function(T){if(this._super){this._super(T);}var V=this.dic,U=V.dt,S=mstrmojo.expr.DTP,R,Q=[];if(mstrApp.useBinaryFormat){if(U==S.DATE||U==S.TIME||U==S.TIMESTAMP){R=mstrmojo.date.parseDateAndOrTime(this.value);if(R){if(U!=S.TIME){Q.push(mstrmojo.date.formatDateInfo(R.date,mstrmojo.locales.datetime.DATEOUTPUTFORMAT));}if(U!=S.DATE){Q.push(mstrmojo.date.formatTimeInfo(R.time,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT));}this.value=Q.join(" ");}}}this.lv=this.value;if(V.wm&&V.w===undefined){V.wm=0;}},showByDefault:false,hasPreview:false,getItems:function(){var X=this.dic,R=[],V,T,Q=0,U=String(X.itv),S=U&&U.indexOf(G),W=H(X.dt);if(S>=0){Q=U.substring(S+1).length;}if(parseInt(X.ipt,10)===0){for(V=0,T=X.min;T<X.max+0.00001;V++,T+=X.itv){R[V]={n:mstrmojo.num.toLocaleString(Q>0?T.toFixed(Q):T),v:T};}}else{R=X.vls;mstrmojo.array.forEach(R,function(Y){if(Y.n===undefined){Y.n=W?mstrmojo.num.toLocaleString(Y.v):Y.v;}});}return R;},font:null,onfontChange:function(){if(this.getInputNode){var Q=this.getInputNode(),R=this.font;E.forEach(R,function(T,S){Q.style[S]=T;});}},getOpenerNodeStyle:function(){var Q=this.group&&this.group.ons,R=this.openerNode;if(!Q){Q=M(R);Q.hp=Q.lp+Q.rp;Q.vp=Q.tp+Q.bp;Q.iw=Math.max(0,R.clientWidth-Q.hp);Q.ih=Math.max(0,R.clientHeight-Q.vp);if(this.group){this.group.ons=Q;}}return Q;},onvalueChange:function(){if(this._super){this._super();}this.dicChanged=true;if(this.showByDefault&&(!this.isDicWidgetReady||this.isDicWidgetReady())){this.applyChanges();}else{if(this.popupStyle!==J&&this.popup&&this.popup.enableApply){this.popup.enableApply();}}},preBuildRendering:function(){if(this._super){this._super();}this.openerNode=this.openerNode||this.owner.domNode;if(this.showByDefault){this.openerStyle=this.getOpenerNodeStyle();if(this.inlineExtraCssText){this.cssText+=" "+this.inlineExtraCssText;}}if(!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}},postBuildRendering:function(){var T=this.openerNode;if(this._super){this._super();}if(!mstrmojo.isDescendant(this.owner,this)){if(this.showByDefault){var S=this.domNode;if(!(this.handleDisable()||this.enabled)){var Q=document.createElement("div"),R=document.createElement("div");Q.className="DIC-Container";R.className="curtain";Q.appendChild(S);Q.appendChild(R);S=Q;}T.innerHTML="";T.appendChild(S);}this.set("font",P(T));}if(mstrmojo.DICConfig.isKeyNavigable(this.dic)){this.registerKeyEvents(this.domNode);}},applyChanges:function(){var W=this.lv,Q=this.getCurValue?this.getCurValue():this.value,V=this.openerNode,S=this.getDisplayValue?this.getDisplayValue():Q,U=this.dic.dt,R=mstrmojo.expr.DTP,T=mstrmojo.locales.datetime;if(String(Q)!==String(W)){if(mstrApp.useBinaryFormat){if(U==R.TIME||U==R.TIMESTAMP){Q=Q.replace(new RegExp(T.AM_NAME),"AM").replace(new RegExp(T.PM_NAME),"PM");}}this.lv=Q;this.dv=S;if(this.owner&&this.owner.dataChanged){this.owner.dataChanged(this.k,W,{dv:S,v:Q},V,this.dic.k);}}return true;},cancelChanges:function A(){this.value=this.lv;},showInPopup:function(){this.popup=mstrmojo.DICFactory.createDICPopup(this.owner,this);if(this.focus&&!mstrApp.useBinaryFormat){this.focus();}this.setInfoWindowLock(true);},lockPopup:function(){this.setInfoWindowLock(false);},renderPreview:null,onTabDown:function(Q){mstrmojo.dom.preventDefault(window,Q);if(this.applyChanges()!==false){if(this.popup){this.popup.close();}this.owner.editNext(this.k);this.cleanup();}},cleanup:mstrmojo.emptyFn,registerKeyEvents:function(R){var Q=this;I.attachEvent(R,"keydown",function(S){var T=S||window.event;if(T.keyCode===D){Q.onTabDown(S);}});if(I.isIE){I.attachEvent(R,"keyup",function(S){var T=S||window.event;if(T.keyCode===D){Q.focus();}});}},setInfoWindowLock:function(Q){O.call(this,this.owner,Q);},handleDisable:function(){return true;}};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");var B="FolderDataService";mstrmojo.FolderDataService=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.FolderDataService",getData:function A(F,G,E){$MAPF(true,B);try{var C=(F&&F.did)||this.did,D=F.rtf;F=mstrmojo.hash.copy(F,{taskId:"folderBrowse",styleName:"MojoFolderStyle",includeObjectDesc:true,objectType:"8,3,55",useEncoding:true,dereferenceShortcuts:false});if(D){F.did=D.did;F.folderID=D.did;}else{if(F&&!F.systemFolder){F.folderID=C;}}if(E){F.refresh=true;}mstrApp.serverRequest(F,G,{src:B+"::getData",showWait:true,hideWait:true,delay:false});return false;}finally{$MAPF(false,B);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var B=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(C,D){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(C,D,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,D,C,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(C,D,G){var E=C.blockCount,F={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:E,includeAncestorInfo:"true",includeObjectDesc:C.includeObjectDesc};if(C.folderLinksContextId){F.folderLinksContextId=C.folderLinksContextId;}if(C.sId){F.sessionState=C.sId;}if(D.fid){F.rootFolderID=D.fid;}else{if(D.fty){F.rootFolderType=D.fty;}}if(C.browsableTypes){F.objectType=C.browsableTypes;}if(D.blockBegin){F.blockBegin=D.blockBegin;}if(D.searchPattern){if(C.enableQuickSearch){F.quickSearch=C.enableQuickSearch;}F.searchPattern=D.searchPattern;if(D.recursive){F.recursive=D.recursive;}}this.serverRequest(F,G);},newFolder:function(F,G,E,C){var D={taskId:"createFolder",taskContentType:"json",folderID:F,name:G,description:E};this.serverRequest(D,C);},loadObjects:function A(G,H,C,F){var D=[],E=[];B.forEach(G,function(I){D.push(I.did);E.push(I.t);});if(G.length>0&&F){this.serverRequest({taskId:"getObjectInfo",objectIDs:D.join(","),objectTypes:E.join(","),includeDetails:true},H,C);}else{H.success();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");var A="SubscriptionsDataService";mstrmojo.SubscriptionsDataService=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.SubscriptionsDataService",getSubscriptions:function B(D,C){$MAPF(true,A);try{mstrApp.serverRequest({taskId:"getSubscriptions"},D,{src:A+"::getSubscriptions",override:true,showWait:!C,hideWait:!C,delay:false,skipLogin:true,noTaskURL:true});return false;}finally{$MAPF(false,A);}}});}());(function(){var B={1:"f",2:"tm",3:"rd",4:"mt",7:"amt",8:"fd",10:"p",11:"fun",12:"at",21:"fm"};function A(C){return B[C]||"resv";}mstrmojo.mstr.WebOI=mstrmojo.declare(mstrmojo.Obj,null,{did:"",t:0,st:0,n:"",desc:"",ab:"",icp:"",xml:"",getXML:function(){return this.xml||this.buildShortXML().toString();},buildShortXML:function(C){C=C||new mstrmojo.XMLBuilder();C.addChild(A(this.t));this.buildShortObjectAttributes(C);this.buildTypeSpecificShortXML(C);C.closeElement();return C;},buildShortObjectAttributes:function(C){C.addAttribute("did",this.did);C.addAttribute("tp",this.t);C.addAttribute("stp",this.st);C.addAttribute("n",this.n);},buildTypeSpecificBody:function(C){},buildShortObjectElt:function(C){C.addChild(A(this.t));this.buildShortObjectAttributes(C);C.closeElement();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.StepperContentProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.StepperContentProvider",item:null,renderer:null,min:null,max:null,interval:1,minField:"min",maxField:"max",valField:"value",intField:"interval",canLoop:false,next:mstrmojo.emptyFn,prev:mstrmojo.emptyFn,hasPrev:mstrmojo.emptyFn,hasNext:mstrmojo.emptyFn,renderItemAt:mstrmojo.emptyFn,setVal:mstrmojo.emptyFn,getVal:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.color","mstrmojo.hash","mstrmojo.num","mstrmojo.storage.DOMLocalStorage","mstrmojo.StringBuffer","mstrmojo.android.EnumMenuOptions");mstrmojo.requiresDescs(1089,1143,7830,7831,7832,7859,7860,7861,7862,8621);var $A=mstrmojo.array,$AFE=$A.forEach,$HASH=mstrmojo.hash,$MENUS=mstrmojo.android.EnumMenuOptions,_cacheKey="CacheEnabled",_verifyJsonKey="VerifyJson",_diagnosticModeKey="DiagnosticMode",EnumHSButtonType={FOLDER:1,RESULTSET:2,REPORTS:3,SETTINGS:4,SHAREDLIBRARY:5,SUBSCRIPTIONS:8,HELP:6};function isObject(o){return(typeof o==="object");}function getColor(clr){if(isObject(clr)){if(clr.tp){return"transparent";}clr=clr.clr;}return mstrmojo.color.decodeColor(clr);}function findServer(project){var servers=this.getWebServersList(),res=null;$AFE(servers,function(server){$AFE(server.pl,function(proj){if(proj===project){res=server;return false;}});return !res;});return res;}function iterateProjects(searchConfig,serversNode,projectCache){var serverCache=projectCache?projectCache.servers:[],projectFound=false;$AFE(serversNode,function(server){$AFE(server.pl,function(project){var id=project.pid;if(id!==undefined){if(projectCache){projectCache[id]=project;serverCache[id]=server;}if(project[searchConfig.n]===searchConfig.v){projectFound=true;return false;}}});if(projectFound){return false;}});return projectFound;}function reconcileHSType(hsType){var projectID=getHSProjectID.call(this,hsType),hscNode=this._cfg.hsc,projectExists;if(!projectID){return ;}projectExists=iterateProjects({n:"pid",v:projectID},this.getWebServersList());if(!projectExists){hscNode.tp=1;switch(hsType){case 3:delete hscNode.rs;break;case 4:delete hscNode.fd;break;}}}function getHSProjectID(hsType){var projectID,hscNode=this._cfg.hsc;switch(hsType){case 3:projectID=hscNode.rs.oi.pid;break;case 4:projectID=hscNode.fd.oi.pid;break;}return projectID;}function buildCustomHomeScreen(hsc,asFolder){var ths=this,cst=hsc.cst,btns=[],hscType=ths.getHomeScreenType(),devType=ths.getDeviceType();if(hscType===1&&devType!==4){var addSubsButton=true;$AFE(cst.btns,function(btn){if((btn.act===EnumHSButtonType.SUBSCRIPTIONS)||(btn.act===EnumHSButtonType.REPORTS)){addSubsButton=false;return false;}});if(addSubsButton&&(hscType===1||(devType===4&&hscType===2&&cst.fmt.vw.rpt))){btns.push({act:EnumHSButtonType.SUBSCRIPTIONS,txt:mstrmojo.desc(1089,"Subscriptions"),dsc:""});}}$AFE(cst.btns,function(btn){var xlt=ths.xlat[$A.find(ths.xlat,"act",btn.act)],txt=xlt?(btn.cap===xlt.dcp?xlt.cap:btn.cap):btn.cap,dsc=xlt?xlt.dsc:btn.dsc,b={};if(asFolder){b.n=txt;b.desc=dsc;}else{b.txt=txt;b.dsc=dsc;}var icon=btn.icn;if(isObject(icon)){b.icn=icon.img;}var action=btn.act;if(isObject(action)){var objInfo=(action.fd&&action.fd.oi)||(action.rs&&action.rs.oi)||action.rs;b.did=objInfo.did;b.t=objInfo.t;b.st=objInfo.st;b.pid=objInfo.pid;b.ab=objInfo.ab;b.csp=!!(action.fd&&action.fd.csp);}else{b.act=action;if(b.act===EnumHSButtonType.SETTINGS&&!ths.getGeneralSettings().uas){b=null;}}if(b){btns.push(b);}});var config={btns:btns,fmt:{},ttl:""},fmt=cst.btns?cst.fmt:cst;if(fmt){var bgFmt=fmt.bkg,btnFmt=fmt.btn;config.fmt={bg:{tp:bgFmt.tp,v:(bgFmt.tp===1)?getColor(bgFmt.fll.clr):bgFmt.img},btn:{bc:getColor(btnFmt.brd),bg:getColor(btnFmt.fll),c:getColor(btnFmt.fnt),sty:btnFmt.stl}};config.ttl=fmt.ttl.cap;}if(devType===4){config.hlp=fmt.vw.hlp;}return config;}function _loadConfiguration(){var cfg=mstrMobileApp.getConfiguration();return eval("("+cfg+")");}function _initializePrjCache(cfg){cfg._hostUrls={};cfg._projects={servers:{}};}function _clearCachedValues(){delete this._hsType;delete this._hsCfg;delete this._wsl;delete this._gnl;}function _reinit(){this._cfg=_loadConfiguration();_clearCachedValues.call(this);_initializePrjCache(this);}mstrmojo.MobileConfiguration=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.MobileConfiguration",_cfg:null,_hostUrls:null,_projects:null,xlat:null,init:function init(props){var xl=this.xlat=[],md=mstrmojo.desc;xl.push({act:5,cap:md(7832),dsc:md(7859),dcp:"Shared Library"});xl.push({act:4,cap:md(7831),dsc:md(7861),dcp:"Settings"});xl.push({act:6,cap:md(1143),dsc:md(7862),dcp:"Help"});xl.push({act:3,cap:md(7830),dsc:md(7860),dcp:"Reports"});xl.push({act:EnumHSButtonType.SUBSCRIPTIONS,cap:md(1089),dsc:md(7860),dcp:"Subscriptions"});this._super(props);this._cfg=this._cfg||_loadConfiguration();_initializePrjCache(this);this.cacheEnabled=$LS.getItem(_cacheKey)||false;this.binaryMode=mstrMobileApp.useBinaryFormat();this.verifyJson=$LS.getItem(_verifyJsonKey)===true;this.diagnosticMode=mstrMobileApp.getDiagnosticMode();},getConfiguration:function(){return this._cfg;},saveConfiguration:function(silently){_clearCachedValues.call(this);_initializePrjCache(this);mstrMobileApp.saveConfiguration(JSON.stringify(this._cfg),!!silently);},reloadDefaultConfiguration:function(){mstrMobileApp.reloadDefaultConfiguration();_reinit.call(this);},reload:function reload(){_reinit.call(this);},setWebServerList:function(wsl){this._wsl=this._cfg.cty.wsl=wsl;_initializePrjCache(this);return this;},getWebServersList:function(){if(!this._wsl){this._wsl=this._cfg.cty.wsl||[];}return this._wsl;},getGeneralSettings:function(){if(!this._gnl){this._gnl=this._cfg.gnl;}return this._gnl;},getDefaultServerCreds:function(){var cty=this._cfg.cty;cty.wsdc=cty.wsdc||{am:1,lo:"",ps:""};return cty.wsdc;},getBackgroundSyncSettings:function(){var gnl=this.getGeneralSettings();gnl.bss=gnl.bss||{ebs:false,ui:4,tod:0,wo:false,co:false};gnl.bss.wo=gnl.bss.wo||false;gnl.bss.co=gnl.bss.co||false;return gnl.bss;},setDefaultServerCreds:function(sd){var cty=this._cfg.cty;$HASH.copy(sd,cty.wsdc);return this;},getCacheEnabled:function(){return false;},setCacheEnabled:function(c){this.cacheEnabled=c;$LS.setItem(_cacheKey,c,-1);},getBinaryMode:function(){return this.binaryMode;},setBinaryMode:function(v){if(this.binaryMode!==v){this.binaryMode=v;mstrApp.serverProxy.closeAllSessions();mstrApp.useBinaryFormat=v;mstrMobileApp.setBinaryFormat(v);}},getDeviceType:function(){return this._cfg.dt;},isSubscriptionEnabled:function(){return this.getHomeScreenType()!=2?true:!!this._cfg.hsc.cst.fmt.vw.rpt;},getVerifyJson:function(){return this.verifyJson;},getDiagnosticMode:function(){return this.diagnosticMode;},setDiagnosticMode:function(v){if(this.diagnosticMode!==v){this.diagnosticMode=v;$LS.setItem(_diagnosticModeKey,v,-1);mstrApp.diagnosticMode=v;mstrMobileApp.setDiagnosticMode(v);}},getSettingsAllowed:function getSettingsAllowed(){return this.getGeneralSettings().uas;},isMenuAllowed:function isMenuAllowed(menuItem,menuMask){if((menuMask&menuItem)>0){var generalSettings=this.getGeneralSettings(),vw=this._cfg.hsc.cst?this._cfg.hsc.cst.fmt.vw:{stg:true,hlp:true};switch(menuItem){case $MENUS.SETTINGS:return !!generalSettings.uas&&!!vw.stg;case $MENUS.HELP:return !!vw.hlp;case $MENUS.SHARE:var project=this.getProject(mstrApp.getCurrentProjectId());return(!!generalSettings.es&&project&&!!project.es);case $MENUS.LEARN:return !!generalSettings.slml;default:return true;}}return false;},reconcileHomescreen:function reconcileHomescreen(){var ths=this,hsType=ths.getHomeScreenType(),hs=this._cfg.hsc;switch(hsType){case 1:break;case 2:var btns=[];$AFE(hs.cst.btns,function(btn){var action=btn.act;if(isObject(action)){var objInfo=(action.fd&&action.fd.oi)||(action.rs&&action.rs.oi)||action.rs;if(ths.getProject(objInfo.pid)!==undefined){btns.push(btn);}}else{btns.push(btn);}});if(!btns.length){btns.push({act:5,cap:mstrmojo.desc(7832),icn:1});}hs.cst.btns=btns;break;case 3:case 4:reconcileHSType.call(this,hsType);break;}},getHomeScreenType:function(){if(!this._hsType){var hscNode=this._cfg.hsc;if(hscNode){this._hsType=(typeof hscNode==="number")?hscNode:hscNode.tp;}}return this._hsType;},getHomeScreen:function(asFolder){if(!this._hsCfg){var type=this.getHomeScreenType(),hsc=this._cfg.hsc,cfg;switch(type){case 1:case 2:cfg=buildCustomHomeScreen.call(this,hsc,asFolder);break;case 3:cfg=hsc.rs;if(cfg.oi){cfg=cfg.oi;}break;case 4:cfg=hsc.fd;cfg.hlp=true;break;}this._hsCfg=cfg;}return this._hsCfg;},getProjectByRealPid:function getProjectByRealPid(realPid){var proj;$AFE(this.getWebServersList(),function(server){$AFE(server.pl,function(project){if(realPid===project.realPid){proj=project;return false;}});if(proj){return false;}});return proj;},getProjectByServerAndProjectName:function getProjectByServerAndProjectName(serverName,port,projName){var proj;$AFE(this.getWebServersList(),function(server){$AFE(server.pl,function(project){if((serverName===project.sn)&&(projName===project.pn)){if((port===undefined)||(!!port&&parseInt(port,10)===project.sp)){proj=project;return false;}}});if(proj){return false;}});return proj;},getHostUrlByRealPid:function getHostUrlByRealPid(realPid){var proj=this.getProjectByRealPid(realPid);return this.getHostUrlByProject((proj&&proj.pid)||realPid);},getWebServerUrlByProject:function getWebServerUrlByProject(projectId){var servUrl=this.getHostUrlByProject(projectId);return servUrl.replace(/(servlet\/|asp\/)$/,"");},getCurrentProjectWebServerUrl:function getCurrentProjectWebServerUrl(){return this.getWebServerUrlByProject(mstrApp.getCurrentProjectId());},getHostUrlByProject:function getHostUrlByProject(projectId){var urls=this._hostUrls;if(!urls[projectId]){var server=this.getServerByProjectId(projectId);if(server===undefined){throw new Error("Could not find server for project, pid="+projectId);}var hostUrl=new mstrmojo.StringBuffer();hostUrl.append("http");if(server.rt){hostUrl.append("s");}hostUrl.append("://"+server.nm);var port=server.po;if(port){hostUrl.append(":"+port);}hostUrl.append("/"+server.pt+"/");hostUrl.append(((server.ty===0)?"servlet":"asp")+"/");urls[projectId]=hostUrl.toString();}return urls[projectId];},getTaskUrlByProject:function getTaskUrlByProject(projectId){var server=this.getServerByProjectId(projectId);if(server===undefined){throw new Error("Could not find server for project, pid="+projectId);}return this.getHostUrlByProject(projectId)+mstrConfig.taskURL+((server.ty===1)?".aspx":"");},getProject:function getProject(projectId){var projects=this._projects;if(!projects[projectId]){iterateProjects({n:"pid",v:projectId},this.getWebServersList(),projects);}return projects[projectId];},getProjectHash:function getProjectHash(){var _result={},serverList=this.getWebServersList();if(serverList.length<1){return _result;}var projects=this._projects,dummyProjectID=mstrmojo.num.generateUniqueID(64);iterateProjects({n:"pid",v:dummyProjectID},serverList,projects);_result=$HASH.clone(projects);delete _result.servers;return _result;},getProjectList:function getProjectList(){var projectList=[];$HASH.forEach(this.getProjectHash(),function(project){projectList.push({did:project.pid,n:project.pn,desc:project.sn,st:"Project",t:8,rtf:project.rtf});});return projectList;},clearLoginInfoForProject:function clearLoginInfoForProject(pid){var cfg=this.getConfiguration(),server=this.getServerByProjectId(pid),project=this.getProject(pid),creds=project.udc?server.pdc:project.pc;creds.lo=creds.ps="";},getLoginInfo:function(projectId){var cfg=this.getConfiguration(),server=this.getServerByProjectId(projectId),serverCreds=server.wsc,wsuid=serverCreds.lo||"",wspwd=serverCreds.ps||"",wsam=serverCreds.am,project=this.getProject(projectId),projectCreds=project.pc,uid=projectCreds.lo||"",pwd=projectCreds.ps||"",am=projectCreds.am;if(server.udc){var wsdc=cfg.cty.wsdc;wsam=wsdc.am;wsuid=wsdc.lo||"";wspwd=wsdc.ps||"";}if(project.udc){var pdc=server.pdc;uid=pdc.lo;pwd=pdc.ps;am=pdc.am;}return{server:server,project:project,wsuid:wsuid,wspwd:wspwd,wsam:wsam,uid:uid,pwd:pwd,am:am};},updateLoginInfo:function updateLoginInfo(projectId,loginInfo){var server=this.getServerByProjectId(projectId),project=this.getProject(projectId),creds=project.udc?server.pdc:project.pc,serverCreds=server.udc?this.getDefaultServerCreds():server.wsc;if(loginInfo.updateCfgAfterLogin&1){serverCreds.lo=loginInfo.wsuid;serverCreds.ps=loginInfo.wspwd;}if(loginInfo.updateCfgAfterLogin&2){creds.lo=loginInfo.uid;creds.ps=loginInfo.pwd;}this.saveConfiguration(false);},getProjectCount:function(){var wsl=this.getWebServersList(),count=0,i=0;for(i=0;i<wsl.length;i++){if(wsl[i].pl){count+=wsl[i].pl.length;}}return count;},getServerByProjectId:function(projectId){var projects=this._projects,servers=projects.servers;if(!servers[projectId]){iterateProjects({n:"pid",v:projectId},this.getWebServersList(),projects);}return servers[projectId];},setPid:function setPid(project){var oldPid=project.pid,oldRealPid=project.realPid,projCache=this._projects,serverCache=projCache.servers,pid=mstrmojo.num.generateUniqueID(32),server=findServer.call(this,project);if(oldPid){delete projCache[oldPid];delete serverCache[oldPid];}if(oldRealPid){delete projCache[oldRealPid];delete serverCache[oldRealPid];}project.pid=pid;delete project.realPid;projCache[pid]=project;serverCache[pid]=server;},setRealPid:function setRealPid(project,value){if(typeof project==="string"){project=this.getProject(project);if(!project){return ;}}var oldRealPid=project.realPid,projCache=this._projects,serverCache=projCache.servers,server=findServer.call(this,project);if(oldRealPid&&oldRealPid!==project.pid){delete projCache[oldRealPid];delete serverCache[oldRealPid];}project.realPid=value;projCache[value]=project;serverCache[value]=server;this.saveConfiguration(true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Obj","mstrmojo.string","mstrmojo.hash","mstrmojo.expr","mstrmojo.mstr.EnumNodeDimty");var D=mstrmojo.array,P=mstrmojo.expr,J=P.ET,I=P.TP,K=mstrmojo.mstr.EnumNodeDimty,N=P.ET2TGT,M=P.ET2COND,B=mstrmojo.meta.TP;function O(S,A){var R=(A&&A.did)?A.did.split(P.FN_SEP):null,E=R&&parseInt(R[0],10),Q=R&&parseInt(R[1],10),T=S.et;S.fnt=E;S.fn=Q;if(T!=J.AE&&P.fn_List(Q,E)){S.et=J.AL;S.a2=null;S.cs=null;}else{if(T==J.AL&&!P.fn_List(Q,E)){S.et=J.AQ;S.cs=null;}else{if(T==J.MC&&!P.fn_AC_MC(Q,E)){S.et=J.MQ;S.m2=null;}else{if(T==J.AC&&!P.fn_AC_MC(Q,E)){S.et=J.AQ;S.a2=null;}}}}switch(Q){case P.FN.IS_NULL:case P.FN.IS_NOT_NULL:S.a2=null;S.a3=null;S.fm2=null;S.fm3=null;S.m2=null;S.m3=null;S.cs=null;break;case P.FN.BETWEEN:case P.FN.NOT_BETWEEN:break;default:S.a3=null;S.fm3=null;S.m3=null;while(S.cs&&S.cs.length>1){S.cs.pop();}}}function F(W,X,Y){var E=true,A=2+X;switch(Y.t){case I.PROMPT:var U=W.cs,V;if(!U){U=[];W.cs=U;}U[X]={};V=U[X];V.p=Y;W["a"+A]=null;W["m"+A]=null;switch(W.et){case J.AC:W.et=J.AQ;break;case J.MC:W.et=J.MQ;break;}break;case I.METRIC:W["a"+A]=null;W.cs=null;W.et=J.MC;W["m"+A]=Y;break;case I.ATTR:W["m"+A]=null;W.cs=null;W.et=J.AC;W["a"+A]=Y;W["fm"+A]=null;break;default:W["a"+A]=null;W["m"+A]=null;var U=W.cs;if(!U){U=[];W.cs=U;}if("did" in Y){W["a"+A]=null;W["fm"+A]=null;W["m"+A]=null;if(U[X]&&U[X].p){U[X].p=null;}}else{if(Y&&Y.v!=null){U[X]=Y;}else{if(U[X]){U=U.splice(X,1);}}E=false;}if(!Y.skipET){switch(W.et){case J.MC:W.et=J.MQ;break;case J.AC:W.et=J.AQ;break;case J.AL:if(!("did" in Y)&&Y.v){var Q,S=Y.dtp,U=[];Q=Y.v.split(mstrConfig.listSep);for(var R=0,T=Q.length;R<T;R++){U.push({v:mstrmojo.string.trim(Q[R]),dtp:S});}W.cs=U;}break;}}}return E;}var H={};H[J.AQ]={target:1,fm:1,fn:1,cs:1};H[J.AL]={target:1,fm:1,fn:1,cs:1};H[J.AE]={target:1,fn:1,es:1};H[J.AC]={target:1,a2:1,a3:1,fm:1,fm2:1,fm3:1,fn:1};H[J.MQ]={target:1,fn:1,cs:1,dmy:1};H[J.MC]={target:1,fn:1,m2:1,m3:1,dmy:1};H[J.F]={target:1};H[J.R]=H[J.F];H[J.XML]={target:1};var G=function(A){return A!==null&&A!==undefined;};var L=function(W){if(!W||!G(W.et)){return false;}var V=true,A=H[W.et],T=W.cs,S;V=V&&(!A.target||W[N[W.et]]);V=V&&(!A.fm||W.fm);V=V&&(!A.fn||G(W.fn));var R=P.fnCstCount(W.fn,W.fnt);if(V&&A.cs){for(S=0;S<R;S++){V=V&&T&&G(T[S]);}}if(V){var U=[N[W.et],"fm"];for(var E=0;E<2;E++){for(S=0;S<R;S++){var X=U[E]+(2+S);V=V&&(!A[X]||W[X]);}}}V=V&&(!A.es||W.es&&(W.es.length>0));var Q=W.dimtyTypes;V=V&&(!A.dmy||Q[K.NodeDimtyUnspecified]||Q[K.NodeDimtyNone]||(Q[K.NodeDimtyOutputLevel]&&W.dmy&&W.dmy.uts&&(W.dmy.uts.length>0)));return V;};mstrmojo.ConditionModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ConditionModel",completed:false,init:function(A){if(this._super){this._super(A);}this._updateCompleted();},edit:function(l,Y){var S=this[l],k=true;this.etWas=this.et;switch(l){case"not":Y=!!(Y&&Y.did===P.FN.NOT);S=!!this.not;if(Y===S){return ;}this.not=!!Y||null;break;case"target":var AC=this.et;if(Y){switch(Y[B]){case I.ATTR:case I.CONS:S=this.a;if(AC!==J.AQ&&AC!==J.AE){this.et=J.AQ;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}if(AC!==J.AE){this.fn=null;this.fnt=null;}this.fm=null;this.fm2=null;this.fm3=null;this.cs=null;break;case I.METRIC:S=this.m;if((AC!==J.MQ)&&(AC!==J.MC)){this.et=J.MQ;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.r=null;this.f=null;this.cs=null;this.dmt=K.NodeDimtyUnspecified;}this.m2=null;break;case I.REPORT:S=this.r;if(AC!==J.R){this.et=J.R;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.f=null;}break;case I.FILTER:S=this.f;if(AC!==J.F){this.et=J.F;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;}break;case I.PROMPT:S=this.prms&&this.prms[0];if(AC!==J.XML){this.et=J.XML;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}break;}}this.es=null;this[N[this.et]]=Y;break;case"fm":if(Y&&Y[B]==="fn"){this.et=J.AE;this.fm=null;O(this,Y);}else{this.fm=Y;if(Y&&(this.et==J.AE)){this.et=J.AQ;}this.fnt=null;this.fn=null;this.cs=null;this.a2=null;this.fm2=null;}break;case"fm2":case"fm3":this[l]=Y;break;case"fn":O(this,Y);break;case"es":var AF=this.es;if(Y&&Y.removed&&AF){D.removeItems(AF,Y.itemIdField,Y.removed);}if(Y&&Y.added){if(!AF){AF=Y.added.concat();this.es=AF;}else{D.insert(AF,AF.length,Y.added);}}break;case"c0":k=F(this,0,Y);break;case"c1":k=F(this,1,Y);break;case"dmy":var z=this.dmy;if(!z){z={cc:true,fres:true,uts:[]};this.dmy=z;}var t=z&&z.uts;if(!t){t=[];z.uts=t;this.dmt=K.NodeDimtyOutputLevel;}var Q={};Q[P.TP.ATTR]=true;Q[P.TP.DIM]=true;if(Y&&Y.removed){var f=[],A=false,W=[],R=false;for(var j=0,T=Y.removed,E=T.length;j<E;j++){var V=T[j],AB=V[B] in Q;if(AB){R=true;}else{A=true;}var h=AB?W:f;h.push(V);}if(A){D.removeItems(t,"did",f);}if(R){var AE={};for(var d=0,Z=t&&t.length;d<Z;d++){var X=t[d];if(X&&X.utgt){AE[X.utgt.did]=d;}}var U=[];for(var AA=0,x=W.length;AA<x;AA++){var g=AE[W[AA].did];if(g>-1){U.push(g);}}U.sort(D.numSorter);for(var s=U.length-1;s>-1;s--){t.splice(U[s],1);}}}if(Y&&Y.added){var AG=[],o=P.DMY_TP.DIM,q=P.DMY_TP.ATTR;for(var AD=0,w=Y.added,e=w.length;AD<e;AD++){var p=w[AD];AG.push((p[B] in Q)?{utgt:p,utp:p[B]===I.DIM?o:q,agg:1,flt:2,gb:true,rps:0,n:p.n}:p);}D.insert(t,t.length,AG);}break;}this._updateCompleted();if(k){this.raiseEvent({name:"edit",prop:l,value:Y,valueWas:S});}},get:function C(){var A=M[this.et]||[];A.push("et");return mstrmojo.hash.copyProps(A,this);},_updateCompleted:function(){this.set("completed",L(this));}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo._HasChildren","mstrmojo.Binding","mstrmojo._HasBindings");mstrmojo.Model=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.Model",init:function A(C){this._super(C);if(this.children){this.initChildren();}if(!this.parent){this.initBindings();}},destroy:function B(C){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(C);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo.dom","mstrmojo.array");var R=Math,U=mstrmojo.publisher.hasSubs,Q=mstrmojo.hash,F=Q.forEach,a=mstrmojo.dom;var S=0.15;var e=1,T=2;var B={y:{edge:["top","bottom"],size:0},x:{edge:["left","right"],size:0},clsName:"mstrmojo-touch-scroll-indicator",init:function Y(){var j=this.y,h=this.x;if(!j.i){var k=j.i=document.createElement("div");k.className=this.clsName;var l=h.i=k.cloneNode(false);document.body.appendChild(k);document.body.appendChild(l);}},setGradient:function Z(r,k,s,o){var q=r.i,j=r.edge[k?1:0];var p=R.min(R.round(R.min(R.abs(s)/200,1)*100),o/2),h="left top",l="left bottom";if(k){l=h;if(j==="bottom"){h="left bottom";}else{h="right top";}}else{if(j==="left"){l="right top";}}if(p!==r.size){q.style.background="-webkit-gradient(linear, "+h+", "+l+", from(rgba(39, 104, 162, .4)), to(rgba(39, 104, 162, 0)), color-stop("+(p/100)+", rgba(39, 104, 162, 0)))";r.size=p;}},scrollAxis:function D(l,x,p,u,k){var AD=x-p,j=k[l]=(AD!==0);if(!j){this.hide(l);return ;}var q=this[l],t=q.i,h=t.style,r=(l==="y"),s=(AD>0),w=this.clsName+" "+q.edge[s?1:0];if(!q.size||t.className!==w){t.className=w;var z="px",AE=3,AA=u.y,o=u.x,AB=100,AC=u.w;if(r){if(s){AA+=u.h-AB-AE;}}else{AC=AB;AB=u.h;if(s){o+=u.w-AC-AE;}}h.top=AA+z;h.left=o+z;h.width=AC+z;h.height=AB+z;h.display="block";}this.setGradient(q,s,AD,r?u.h:u.w);},scroll:function D(l,k,q,p,t){var s=k.x,r=k.y;if(s!==q||r!==p){this.init();var o=this._widgetPosition;if(!o){var h=l.indicatorEl||t;o=mstrmojo.dom.position(h.parentNode);}var j=l._outOfBounds||{};this.scrollAxis("y",r,p,o,j);this.scrollAxis("x",s,q,o,j);this._widgetPosition=o;l._outOfBounds=j;}else{this.hideAll();delete l._outOfBounds;}},hide:function M(j){var h=this[j];if(h.size!==undefined){h.i.style.display="none";h.i.className=this.clsName;h.size=0;}},hideAll:function b(){this.hide("y");this.hide("x");delete this._widgetPosition;}};function W(h,j){return j?R.max(R.min(R.round(h),j.end),j.start):h;}function O(h,k,j){j.name=k;j.id=h.identifier;h.raiseEvent(j);}function G(){var j="scrollDone",h=this.origin;if(U(this.id,j)&&h){O(this,j,{x:h.x,y:h.y});}this.stopDeceleration();}function I(k,j,p){var o=k.scrollEl;if(!o){G.call(k);return ;}var l={x:j.x||0,y:j.y||0};F(k._scrollBarEls,function(AC,w){var AH=(w==="x"),AB=l[w],q=AC.length,AD=AC.ratio,z=AC.viewportSize,u=6/q,t=AC["base"+(AH?"Left":"Top")],AA=t+z-q,s=R.round(t+(AD*AB));if(s<t){s=t-AB;q+=AB;}else{if(s>AA){var AG=(AB-k.offset[w].end)*AD;s=R.min(AA+AG,z+t-6)-1;q-=AG;}}var AF=0,r=[AF,AF,AF],x=[1,1,1],AE=AH?0:1;r[AE]=(s-t);x[AE]=R.min(R.max(q/AC.length,u),1);a.translate(AC,r[0],r[1],r[2]," scale3d("+x.join(",")+")");});if(p){p+="ms";}if(k._isHosted){var h=o.parentNode;h.scrollTop=l.y;h.scrollLeft=l.x;}else{o.style[a.CSS3_TRANSITION_DURATION]=p||"0";a.translate(o,-l.x,-l.y,0,k.transform,k.useTranslate3d);}if(U(k.id,"scrollMoved")){O(k,"scrollMoved",{x:j.x,y:j.y});}}function J(h,j,k){return R.ceil(1+R.log(h/R.abs(j))/R.log(1-k));}function E(h,o,k,j,l){return h+(o*(k*(1-R.pow(1-l,j))/l));}function N(AI,AS,p,AO,AA,AN,u){var t=AI.offset[p];if(!t){return AS;}var o=AI._outOfBounds,j=o&&o[p],x=t.incFetch,z=AI.friction,s=t.start,r=t.end,AJ=AO?r:s;AA=R.abs(AA);if(j){AO=(AS<s);AJ=AO?s:r;}var AR=AO?1:-1;if(j&&(AO||!x)){var w=S*3,AQ=1/(1-z),l=w/R.pow((1-z),(R.log(1-R.abs(AS-AJ)*(1-AQ)/w)/R.log(AQ))-1);var AG=R.round(E(AS,AR,l,AN,z));if(AO?(AG>=AJ):(AG<=AJ)){G.call(AI);return AJ;}return AG;}var AM=t.pageSize,AL=t.supportedEdges;var q=E(AS,AR,AA,AN,z),AB=(q<=s),k=(q>=r);if(AB||k){if(x&&((AB&&((AL&e)>0))||(k&&((AL&T)>0)))){if(q-r>=AM){q=r+AM;AJ=q;}if(!AI.STATUS_INC_FETCH){AI.STATUS_INC_FETCH=true;O(AI,"incFetch",{edge:k?T:e});}}else{if(AI.bounces){var AP=z*2,AC=AI.bounceVelocity,h=AI.bounceTime,AK=AI.bounceDistance;if(!AI.hasBounced){AC[p]=R.abs(S/R.pow(1-z,u-AN-1));h[p]=J(S,AC[p],AP);AK[p]=R.abs(E(q,AR,AC[p],h[p],AP)-q);AI.raiseEvent({name:"bounceOut",id:AI.identifier,axis:p,direction:AO,value:R.round(q)});AI.hasBounced=true;}var AF=Math.floor(AK[p]/2);var AE=E(AJ,AR,AC[p],AN,AP),AH=R.abs(AE-AJ);if(R.abs(AH)<AF){return AE;}if(R.abs(AH)>=AK[p]){G.call(AI);return AJ;}var AD=AF-(AH-AF);return R.round(AJ-(AO?-AD:AD));}q=AJ;}}return R.round(q);}function P(j){var h=this._scrollListener;if(h){if(!j||j!==h.el){a.detachEvent(h.el,"scroll",h.fn);delete this._scrollListener;return true;}return false;}return true;}mstrmojo.TouchScroller=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.TouchScroller",scrollEl:null,identifier:"",hScroll:false,vScroll:false,offset:null,origin:null,transform:"",friction:0.0015,frameRate:60,bounces:true,hasBounced:false,bounceDistance:{},bounceTime:{},bounceVelocity:{},showScrollbars:false,showIndicators:true,useTranslate3d:true,STATUS_INC_FETCH:false,init:function Y(h){this._super(h);B.init();},initScroller:function X(j){Q.copy(j,this);var o=this.scrollEl;if(o){var l=this._isHosted=false;if(l){var h=o.parentNode;if(P.call(this,h)){h.style.overflow="auto";var p=this.id,k=this._scrollListener={el:h,fn:function(q){var r=mstrmojo.all[p].origin,s=q.target;r.x=s.scrollLeft;r.y=s.scrollTop;}};a.attachEvent(h,"scroll",k.fn);}this.showScrollbars=false;}}},canScroll:function L(){return this.vScroll||this.hScroll;},updateScrollBars:function H(r,l){var p=this.scrollEl;if(!this.showScrollbars||!p){return ;}var j=this._scrollBarEls;if(!j){var o=this;j=this._scrollBarEls={x:"hScroll",y:"vScroll"};F(j,function(s,t){if(o[s]){var u=document.createElement("div");u.className="mstrmojo-touch-scrollBar "+t+"Axis";(l||p.parentNode).appendChild(u);j[t]=u;}else{delete j[t];}});}if(!r){var h=this.scrollEl.parentNode;r={top:0,right:h.clientWidth,bottom:h.clientHeight,left:0};}var q=9,k={x:{left:r.left,top:r.bottom-q,x:r.right-r.left,d:"Width"},y:{left:r.right-q,top:r.top,x:r.bottom-r.top,d:"Height"}};F(j,function(AA,u){var AF=AA.style,AD=k[u],w=AD.d,z=AA.parentNode,AE=AD.x;var t=AD.left,AC=AD.top,AB=AE/p["offset"+w],s=Math.min(Math.round(AE*AB),AE);AA.baseLeft=t;AA.baseTop=AC;AA.ratio=AB;AA.viewportSize=AE;AA.length=s;AF.left=t+"px";AF.top=AC+"px";AF[w.toLowerCase()]=s+"px";});},toggleScrollBars:function C(h){F(this._scrollBarEls,function(j){j.style.opacity=h?1:0;});},scrollTo:function(j,p,l){if(!this.canScroll()&&!(j===0&&p===0)){I(this,{x:0,y:0});return ;}var o=this.offset,k=this.origin,h={x:(this.hScroll)?W(j,o.x):0,y:(this.vScroll)?W(p,o.y):0};I(this,h,l);k.x=h.x;k.y=h.y;},scrollToEnd:function(j,p,l){var k=this.origin,o=this.offset,h={x:0,y:0};if(k&&o){mstrmojo.array.forEach([j,p],function(r,q){var t=q?"y":"x",s=o[t];h[t]=r?(s&&s.end)||0:k[t];});}this.scrollTo(h.x,h.y,l);},scroll:function D(p){if(this._isHosted){return ;}var l=this.offset,x=this.scrollEl,AA=p.delta,AB=AA.x,z=AA.y;if(!x){return ;}if(!l&&this.showIndicators){B.scroll(this,{x:(this.noHScroll)?0:-AB,y:(this.noVScroll)?0:-z},0,0,x);return ;}var w=this.origin,q={x:(this.hScroll)?R.round(w.x-AB):0,y:(this.vScroll)?R.round(w.y-z):0},t=W(q.x,l.x),s=W(q.y,l.y);if(!l.scrollPast){if(this.showIndicators){B.scroll(this,q,t,s,x);}q.x=t;q.y=s;}else{var o=(t!==q.x),r=(s!==q.y),h=(o||r),k=this._outOfBounds,j="";if(k){if(o!==(k.x===true)||r!==(k.y===true)){j="scrollIn";}}else{if(h){j="scrollOut";}}if(j){if(U(this.id,j)){var u=p.direction;O(this,j,{x:{position:q.x,direction:u.x},y:{position:q.y,direction:u.y}});}if(h){this._outOfBounds={x:o,y:r};}else{delete this._outOfBounds;}}}I(this,q);},scrollEnd:function V(z){B.hideAll();if(!this.canScroll()||this._isHosted){return ;}var AH=this.id,AA=this.friction,AP=1/(1-AA),AI=this.origin,l=z.velocity,AN=z.direction,AG=new Date(),o=this._outOfBounds,u=this.offset,AO={x:this.hScroll,y:this.vScroll},AB={},AR={},AQ={},w={},q={},x={},s={},r={},AK={},AM=function(AU){x[AU]=S;var AT=u[AU],AS=(o&&o[AU]),AV=(AS&&(!AT||!u.scrollPast));AR[AU]=(AO[AU]&&!AV)?AI[AU]-z.delta[AU]:AI[AU];if(AT){s[AU]=AT.start;r[AU]=AT.end;if(AS){if(!AV){AN[AU]=(AR[AU]<s[AU]);AK[AU]=(AN[AU])?s[AU]:r[AU];if(AN[AU]||!AT.incFetch){x[AU]=S*3;l[AU]=x[AU]/R.pow((1-AA),(R.log(1-R.abs(AR[AU]-AK[AU])*(1-AP)/x[AU])/R.log(AP))-1);}}else{AR[AU]=W(AI[AU]-z.delta[AU],AT);}}}AB[AU]=(AO[AU]&&!AV)?R.abs(l[AU]):0;AQ[AU]=(AN[AU]||false)?1:-1;w[AU]=J(x[AU],AB[AU],AA);q[AU]=E(AR[AU],AQ[AU],AB[AU],w[AU],AA);};AM("x");AM("y");AI.x=AR.x;AI.y=AR.y;var AE=(AB.x>0),AD=(AB.y>0);if(!u.scrollPast&&!AE&&!AD){G.call(this);var p,AJ,AC,k,AL;for(p in u){AJ=u[p];AL=AJ.supportedEdges;AC=((AJ.start===AR[p])&&((AL&e)>0));k=((AJ.end===AR[p])&&((AL&T)>0));if(AJ.incFetch&&(AC||k)){this.STATUS_INC_FETCH=true;O(this,"incFetch",{edge:k?T:e});}}return ;}this.hasBounced=false;this.bounceDistance={};this.bounceTime={};this.bounceVelocity={};this.decelerating=true;var j=Math.round(1000/this.frameRate),t=AG,AF,h={x:AE,y:AD};this.decelerationTimer=window.setTimeout(function(){var AS=mstrmojo.all[AH],AT=AS.origin,AX=new Date(),AY=(AX-AG),AW;if(AS._halt){G.call(AS);return ;}AF=AX-t;t=AX;if(AF>(j+5)){j=j+R.round((AF-j)/2);}for(AW in h){if(h[AW]){var AV=N(AS,AR[AW],AW,AN[AW],AB[AW],AY,w[AW]);if(!isNaN(AV)){AT[AW]=AV;}}}I(AS,AT);var AU=(AY>w.x&&AY>w.y);if(!AU&&!AS.bounces){AU=true;mstrmojo.hash.forEach(u,function(Ab,Aa){var AZ=AT[Aa];if(AZ!==Ab.end&&AZ!==Ab.start){AU=false;return false;}});}if(AU){G.call(AS);}else{if(AS.decelerating){AS.decelerationTimer=window.setTimeout(arguments.callee,j);}}},j);},stopDeceleration:function A(){var h=!!this.decelerating;if(h){if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}delete this.decelerating;this.toggleScrollBars(false);}delete this._outOfBounds;delete this.hasBounced;delete this.bounceDistance;delete this.bounceTime;delete this.bounceVelocity;delete this._halt;return h;},haltScroller:function K(){this._halt=!!this.decelerating;},unrender:function d(){delete this.scrollEl;},destroy:function f(){this.stopDeceleration();P.call(this);this._super();}});mstrmojo.TouchScroller.getScrollPositionTotals=function g(o){var k=o.parent,h=o._scroller,j=mstrmojo.hash.copy((h&&h.origin)||{x:0,y:0});if(k){var l=mstrmojo.TouchScroller.getScrollPositionTotals(k);j.x+=l.x;j.y+=l.y;}return j;};mstrmojo.TouchScroller.ScrollIndicators=B;mstrmojo.TouchScroller.EnumIncFetchEdges={start:e,end:T};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.func","mstrmojo.array");mstrmojo.android.nativedialog.Dialog=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.android.nativedialog.Dialog",init:function(F){this._super(F);this.config={};},show:function C(){this.populateConfig();mstrMobileApp.showDialog(JSON.stringify(this.config));},populateConfig:function D(){this.config.type=this.type;this.config.mojoId=this.id;this.config.title=this.title||"";if(this.buttons&&this.buttons.length){this.addNegativeButton(this.buttons[0]);this.addPositiveButton(this.buttons[1]);}},addNegativeButton:function A(F){if(!!F){this.config.negativeButtonText=F.text;var G;if(!!F.onclick){G=mstrmojo.func.composite([F.onclick,function(){this.close();}]);}else{G=function(){this.close();};}this.onNegativeButtonClick=G;}},addPositiveButton:function B(F){if(!!F){this.config.positiveButtonText=F.text;this.onPositiveButtonClick=mstrmojo.func.composite([F.onclick,function(){this.close();}]);}},close:function E(){if(this.onClose){this.onClose();}this.destroy();}});}());(function(){mstrmojo.requiresCls("mstrmojo._Fetchable","mstrmojo.hash");var E=mstrmojo.hash;function A(){var F=mstrApp.modelFactory;if(F){return F.newDataService("Element");}return mstrApp.viewFactory.newElementDataService();}function D(F){var I,H,G;I=-1;G=0;while(G>=0){I++;G=F.indexOf(":",G);if(G>=0){G++;}}H=-1;G=0;while(G>=0){H++;G=F.indexOf("*:",G);if(G>=0){G++;}}if(I<H+1){alert("Unexpected format for element ID "+F);}return I-H;}mstrmojo.requiresCls("mstrmojo.XMLBuilder","mstrmojo.Obj");mstrmojo.mstr.WebElements=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._Fetchable],{scriptClass:"mstrmojo.mstr.WebElements",source:null,items:null,duplicate:function(){return new mstrmojo.mstr.WebElements({source:E.copy(this.source),browseConfig:E.copy(this.browseConfig)});},browseConfig:null,init:function(F){var G=F&&F.browseConfig;if(G){this.blockBegin=G.blockBegin||1;this.blockCount=G.blockCount||15;}if(this._super){this._super(F);}},getBrowseConfig:function(G){var F=this.browseConfig;return{attributeID:(this.source&&this.source.did)||0,blockBegin:G||1,blockCount:this.blockCount||-1,filterXML:(F.filter&&F.filter.getXML())||"",shortFilterXML:F.shortFilterXML||"",searchPattern:F.searchPattern||"",matchCase:!!F.matchCase,dataSourcesXML:F.dataSources||"",targetAttributeID:(F.searchTarget&&F.searchTarget.did)||"",searchForms:F.searchForms||""};},_retrieveItems:function(H,G){var F=this;A().getElements(this.getBrowseConfig(H),{success:function(I){if(G&&G.success){G.success({items:F.convertElems(I.items),totalSize:I.totalSize});}},failure:function(I){if(G&&G.failure){G.failure(I);}}});},convertElems:function C(G){var F=[],H;G=G||[];for(H=0;H<G.length;H++){var I=G[H];F[H]={vi:H,v:I.dssid,n:I.n,t:I.emt};}return F;},buildShortXML:function B(F){F.addChild("mi");F.addChild("es");if(this.source!=null){this.source.buildShortObjectElt(F);}var I=[].concat(this.items);I.sort(function(N,M){var L=N.n,K=M.n,J;if(L===K){J=0;}else{if(L<K){J=-1;}else{J=1;}}return J;});var H;for(H=0;H<I.length;H++){var G=I[H];F.addChild("e");F.addAttribute("ei",G.v);F.addAttribute("emt",G.t);F.addAttribute("art",D(G.v));F.addAttribute("disp_n",G.n);F.closeElement();}F.closeElement();F.closeElement();}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");mstrmojo.touchManager=new mstrmojo.Obj({notify:function(u,w){return this.raiseEvent({name:"touchesBegin",srcId:u,touch:w});}});var V=mstrmojo.dom,r=V.attachEvent,s=V.detachEvent,B=Math,W=window.mstrConfig,Q=false,J=null,j=W&&W.allowDefaultTouches;var h=10,D=250,F=400,Y=100;var g="Begin",N="End",d="Move",S="Cancel";var o=1,p=2,C=3,P=4;var K={};K[o]="Select";K[p]="Swipe";K[C]="Multi";K[P]="Tap";r(document.body,V.TOUCHMOVE,function(u){if(!W||!W.allowDefaultTouches){if(u.preventDefault){u.preventDefault();return false;}}return true;});function X(u){var w=u.identifier;return(w===undefined)?1:w;}function k(z,AA,x,w){if(Q){var u=w?X(w)+" ":"";window.console.log(z+":"+(x?" "+x.scriptClass+" "+x.id:"")+" "+u+(AA||""));}}function l(u){return(J===u);}function T(u){if(!l(u)){return ;}k("detachWinEvts","",u);s(window,V.TOUCHMOVE,u._tmCallback,true);s(window,V.TOUCHEND,u._teCallback,true);s(window,V.TOUCHCANCEL,u._teCallback,true);J=null;}function U(u){if(l(u)){return ;}var w=J;if(w){k("forced deactivation","",w);T(w);}k("attachWinEvts","",u);r(window,V.TOUCHMOVE,u._tmCallback,true);r(window,V.TOUCHEND,u._teCallback,true);r(window,V.TOUCHCANCEL,u._teCallback,true);J=u;}function M(w,u){return"touch"+((u&&K[u])||"")+(w||"");}function Z(x,z,w){var u=M(z,w);return(x[u]!==undefined)?u:"";}function q(z,AB,AC,x,w){w=w||z.gestures[AC.id];var AA=(w&&w.bubbleTarget)||z,u=Z(AA,AB,x);if(u){k("fire",u,AA);AC.methodName=u;return AA[u](AC);}k("no handler",M(AB,x),AA);return true;}function e(AE,AF,u,AA){var AB=u.pageX,z=u.pageY,AC=AE.timeStamp,w=X(u),AJ={x:B.round(AB-AF.pageX),y:B.round(z-AF.pageY)};var AI={id:w,evt:AE,pageX:AB,pageY:z,clientX:u.clientX,clientY:u.clientY,target:u.target,delta:AJ,date:AC,stop:function(){k("event stopped",w);AE.stopPropagation();AE.cancelBubble=true;}};if(AA){var x=AC-AA.date,AH=AA.delta,AD={x:B.abs(AJ.x-AH.x),y:B.abs(AJ.y-AH.y)};AI.velocity={x:AD.x/x,y:AD.y/x};AI.isVertical=(AD.y>AD.x);AI.accelDelta=AD;var AG=AI.direction={};if(AB!==AA.pageX){AG.x=(AB<AA.pageX);}else{if(AB!==AF.pageX){AG.x=(AB<AF.pageX);}}if(z!==AA.pageY){AG.y=(z<AA.pageY);}else{if(AB!==AF.pageX){AG.y=(z<AF.pageY);}}}return AI;}function I(z,u,x,w){return{s:z,p1:u,p2:x,evt:w,target:w.target};}function L(w,u){if(w){w.gestures[u]=null;}}function a(w,u){T(w);q(w,N,u);}function G(u){if(u._selectHandle){window.clearTimeout(u._selectHandle);delete u._selectHandle;k("cancelSelect","",u);}}function H(AC,AE){var AA=AE.which;if(AA&&AA===3){k("ignore","right mouse click",AC);return ;}var AD=AC.gestures,AB=AE.touches||[AE],u=(AE.changedTouches&&AE.changedTouches[0])||AE,AH=l(AC),AI=e(AE,u,u),AG=I(AI,AI,AI,AE);k("touchBegin","",AC,u);if(AB.length>1){if(!AH){AI.stop();k("ignore","cross widget multitouch",AC,u);var z=J;if(z&&z.onCrossWidgetMultitouch!==undefined){k("call onCrossWidgetMultitouch for","",z);z.onCrossWidgetMultitouch();}return false;}}else{if(AH){k("forced deactivation","",AC,u);T(AC);AH=false;}}if(AC.singleNode&&u.target!==AC._tn){k("ignore","target is not touch node",AC,u);return ;}if(mstrmojo.touchManager.notify(AC.id,AI).ignore){AI.stop();return ;}if(!AH){var x=AI.target.tagName;x=x&&x.toLowerCase();if(x==="select"||x==="input"){k("ignore","target is input or select",AC,u);if(AC.monitorInputs){q(AC,null,AI,P);}return ;}}AD[AI.id]=AG;if(AH){if(!AC.multiTouch){G(AC);var w=AB[AB.length-2],AF=AD[X(w)];q(AC,S,w,AF.action,AF);}else{AG.action=C;if(AC._singleTouch){G(AC);AC._singleTouch.action=C;delete AC._singleTouch.bubbleTarget;delete AC._singleTouch;q(AC,g,AI,C);}}AI.stop();return ;}if(!V.contains(AC._tn,AE.target,true,AC.domNode)){delete AD[AI.id];return ;}AC._singleTouch=AG;if(q(AC,g,AI)===false){return ;}AI.stop();if(Z(AC,g,o)){AC._selectHandle=window.setTimeout(function(){AG.action=o;if(q(AC,g,AI,o)===false){a(AC,AI);}delete AC._selectHandle;},F);}U(AC);}function t(AA,AB){var AD=(AB.changedTouches&&AB.changedTouches[0])||AB,w=AA.gestures[X(AD)];if(!w){return ;}var x=e(AB,w.s,AD,w.p2),z=w.action;w.p2=w.p1;w.p1=x;if(!z&&(B.abs(x.delta.x)>h||B.abs(x.delta.y)>h)){z=w.action=p;G(AA);if(!Z(AA,g,z)&&!Z(AA,d,z)){x.methodName=M(g,z);return AA.bubbleTouchEvent(x);}if(q(AA,g,x,z)===false){a(AA,x);return ;}}if(z){var u=w.lastMove||w.s.date,AC=x.date-u;if(!mstrApp.isTouchApp()||AC>=Y){w.lastMove=x.date;q(AA,d,x,z);}}}function E(AA,AC){var u=(AC.changedTouches&&AC.changedTouches[0])||AC,AD=(AC.touches&&AC.touches.length)||0,AB=AA.gestures,AG=X(u),AF=AB[AG];if(!AF){k("No gesture",AG,AA,u);return ;}var z=AF.action,AH=e(AC,AF.s,u,AF.p2);if(!z){G(AA);if(!AF.wasMulti){z=P;}}if(AD===0){T(AA);AA.gestures=[];k("gestures","clear all",AA,u);}else{AB[AG]=null;k("gestures","clear single",AA,u);}L(AF.bubbleTarget,AG);switch(z){case p:case o:AH.stop();q(AA,N,AH,z,AF);break;case C:if(AD<2){q(AA,N,AH,z,AF);if(AD===1){var x=AC.touches[0],AE=e(AC,x,x),w=I(AE,AE,AE,AC);w.wasMulti=true;AB[X(x)]=w;AA._singleTouch=w;}}if(AD>0){return ;}break;case P:if(!Z(AA,null,z)){break;}var AI=AA._tapHandler;if(AI){window.clearTimeout(AI.h);}if(AH.date-AF.s.date<F){if(q(AA,"Before",AH,z,AF)===false){break;}if(!AA.multiTap){AH.count=1;q(AA,null,AH,z,AF);}else{if(AI){AI.count++;}else{AI=AA._tapHandler={count:1};}AI.h=window.setTimeout(function(){AH.count=AI.count;q(AA,null,AH,z,AF);delete AA._tapHandler;},D);}}else{delete AA._tapHandler;}break;}q(AA,N,AH,undefined,AF);}function b(w){var u=w._tn;if(!u){return ;}if(!w._tmCallback){w._tsCallback=function(x){H(w,x);};w._tmCallback=function(x){t(w,x);};w._teCallback=function(x){E(w,x);};}r(u,V.TOUCHSTART,w._tsCallback);}mstrmojo._TouchGestures=mstrmojo.provide("mstrmojo._TouchGestures",{_mixinName:"mstrmojo._TouchGestures",singleNode:false,multiTouch:false,touchNode:null,multiTap:false,monitorInputs:false,postBuildRendering:function O(){if(this._super){this._super();}this._tn=this.touchNode||this.domNode;this.gestures=[];b(this);},bubbleTouchEvent:function f(AC){var z=AC.methodName,u=AC.id,w=this.gestures[u],x=this.parent;while(x){var AB=x[z],AA=x.touchBegin;if(AB&&(!AA||q(x,g,AC)!==false)){AC.methodName=z;L(w.bubbleTarget,u);w.bubbleTarget=x;x.gestures[u]=w;k("bubble",((this.k)?" "+this.k:"")+"] bubbled "+z+" to ["+x.scriptClass+((x.k)?" "+x.k:"")+"]",this,AC);return AB.call(x,AC);}x=x.parent;}return false;},unrender:function A(w){if(l(this)){T(this);}var u=this._tn;if(u){V.detachEvent(u,V.TOUCHSTART,this._tsCallback);}this._super(w);},restoreDefaultTouches:function R(u){if(W){W.allowDefaultTouches=u&&j;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.Obj");var K=mstrmojo.hash;var P=0;var F=[];var J={};var L=false;function I(T){var U=T.callback;if(U.submission){U.submission(T.id,this.userInteractionRequired(T),T);}this.submitRequest(T);}function G(){if(F.length&&!L){I.call(this,F.shift());}}mstrmojo.ServerProxy=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ServerProxy",transport:null,cnt:0,request:function E(e,a,U,V){if(U){this.cancelRequests();}var X=this.id,Y=this.transport,T=mstrmojo.now()+a.taskId+P++,W=e.canceled||mstrmojo.emptyFn;e.canceled=function(f){W();e.complete(true);return Y.cancelRequest(f);};e=mstrmojo.func.wrapMethods(e,{complete:function(f){mstrmojo.all[X].deleteRequest(f);}});var Z=!K.isEmpty(this._requests),b=this.createRequest(T,e,a,V),d=(L||Z)&&!V.doNotHold;if(d){F.push(b);}else{I.call(this,b);}return T;},hasRequests:function O(){return !K.isEmpty(this._requests)||L;},createRequest:function Q(V,X,W,T){var U=this._requests;if(!U){U=this._requests={};}U[V]={id:V,callback:X,params:W,config:T};return U[V];},submitRequest:function M(T){this.transport.serverRequest(this.id,T.id,T);},cancelRequests:function S(){var T=false;K.forEach(this._requests,function(U){if(U.gotResponse===undefined){T|=U.callback.canceled(U.id);}});this._requests={};F=[];return T;},cancelRequest:function B(X){var U=false,W=this._requests[X],V,T=F.length;for(V=0;V<T;V++){if(F[V]===W){break;}}if(V<T){F.splice(V,1);delete this._requests[X];U|=W.callback.canceled(W.id);}return U;},response:function A(X,T,V){$MAPF(false,"AndroidServerTransport","transportRequest");var W=this.getRequest(X);if(W){W.gotResponse=true;var Y=W.callback,U=(T&&!V.mstrerr)?"success":"failure";try{if(Y[U]){Y[U](V,W);}}finally{Y.complete(X);}}G.call(this);},deleteRequest:function N(U){var T=this._requests;delete T[U];},getRequest:function H(U){var T=this._requests;return T&&T[U];},userInteractionRequired:function C(T){return false;},addLoadingGraph:function D(T){J[T]=true;L=true;},removeLoadingGraph:function R(T){delete J[T];if(K.isEmpty(J)){L=false;G.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.StringBuffer","mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo._IsGraphDataService","mstrmojo.func","mstrmojo._ImageHelper","mstrmojo.rw.model.RetrievalKeysConfig","mstrmojo.rw.model.UpdateKeysConfig");var a=mstrmojo.hash,A=a.copy,R=mstrmojo.array,AR=mstrmojo.dom,u=mstrmojo.func,AJ=[mstrmojo.desc(8445,"Loading")],Ak=mstrmojo.array.ensureArray,N=0;function T(BI){BI=BI||{};BI.preserveUndo=true;return BI;}function Ah(BM,BN,BI){if(this.blockRequests){throw ("The data service is currently ignoring all requests to the server.");}var BJ=N++,BL=this.getTxUpdates(BJ);BI=BI||{};BI.src=Ah.caller.name;if(!mstrmojo.string.isEmpty(BL)){BM.updateChanges=BL;}BM.zoomFactor=this.model.getZoomFactor();var BK=this.cmdMgr;if(!BI.preserveUndo&&BK){BK.onSubmitUpdates();}mstrApp.serverRequest(BM,this.wrapCallback(BN,BJ),BI);}function L(BK,BJ,BI){a.copy({unitType:BJ.defn&&BJ.defn.t,unitKey:BJ.k},BK);if(BI.layoutKey){a.copy({toKey:BI.layoutKey,analysisSectionType:BI.analysisSectionType},BK);}else{a.copy({toKey:BI.parentKey},BK);}return BK;}function Am(BJ){BJ=BJ||{};var BI=window.mstrMobileApp?this.model.controller.getContentDimensions():mstrApp.getContentDimensions();if(BI){BJ.styleName="RWDocumentMobileStyle";BJ.availableWidth=BI.w;BJ.availableHeight=BI.h;}else{BJ.innerWidth=mstrmojo.dom.windowDim().w;BJ.innerHeight=mstrmojo.dom.windowDim().h;}return BJ;}function BD(BJ){var BI=BJ&&BJ.style,BK=BI&&BI.params;return BK&&BK.treesToRender;}function B(BI,BJ){return{act:"moveUnit",toKey:BI,unitType:BJ};}function Al(BI){return BI.split("\u001E")[2];}function K(BJ,BN){if(BJ!==mstrmojo.DocDataService.UNDO_KEY){return BJ;}if(!this.undoSectionKey){var BM=this.undoSectionKey=this.model.getNextKey(),BK=this.undoFGKey=this.model.getNextKey();BN.addActions({act:"addUndoSection",cbKey:this.cbKey,nodeKey:BM,fgKey:BK});var BL=this;BN.addCallbacks({failure:function BI(){delete BL.undoSectionKey;}});}return this.undoSectionKey;}function Ag(BK,BJ){var BI={dsid:BK.dsid,formula:BK.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(BK.tokenStreamXML),name:BK.alias,afb:BK.afb,sfb:BK.sfb};if(BJ){BI.Ids=["$GUID_135"];}return this.getAddDerivedMetricToDatasetAction(BI);}function AI(BL,BO,BJ,BP,BI,BK){var BM=[this.getNodeKeyFromKeyContext(BO)];if(!BK){BM=Ak(BP).concat(BM);}var BN={act:BL,keyContext:BO,tgtKey:BJ,partialRetrieval:{nodes:BM}};if(!BI){BN.partialUpdate={selectors:[Al(BO)]};}return BN;}mstrmojo.DocDataService=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsGraphDataService,mstrmojo._ImageHelper],{scriptClass:"mstrmojo.DocDataService",defaultStyle:{params:{treesToRender:2}},cmdMgr:null,stid:-1,blockRequests:false,init:function Ae(BI){this._super(BI);this.cmdMgr=this.model.controller.cmdMgr;},wrapCallback:function AX(BM,BJ){var BK=this;return u.wrapMethods({success:function BL(BN){if(BN){BK.model.bs=BK.rwb=BN.bs||BK.rwb;BK.msgId=BN.mid||BK.msgId;BK.cbKey=BN.cbKey||BK.cbKey;if(BN.stid!==undefined){BK.stid=BN.stid;}}BK.clearTxUpdates(BJ);},failure:function BI(){BK.resetTxUpdates(BJ);}},BM);},getNodeKeyFromKeyContext:function V(BI){return BI.split("\u001E")[1];},refresh:function Ar(BK,BL){var BJ=!!BK.useRefreshProgress,BI=BJ?[mstrmojo.desc(10078,"Refreshing data. Please wait.")]:AJ;delete BK.useRefreshProgress;BK=Am(BK);Ah.call(this,A(BK,{taskId:"docRefresh",rwb:this.rwb,rePrompt:false,fresh:false,regenerate:false}),BL,{showProgress:true,hideProgress:true,progressStateText:BI,useRefreshProgress:BJ});},saveRW:function Au(BI,BJ){Ah.call(this,A(BI,{taskId:"saveRW",msgID:this.msgId}),BJ);},saveThresholds:function f(BJ,BK,BI){Ah.call(this,A(BJ,{taskId:"saveThresholds"}),BK,BI);},getThresholds:function A7(BJ,BK,BI){Ah.call(this,A(BJ,{taskId:"getThresholds"}),BK,BI);},browseElements:function AF(BI,BJ){Ah.call(this,A(BI,{taskId:"browseElements",styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30}),BJ);},removeUnit:function U(BJ,BK){var BI=A(BJ,{act:"removeUnit"});this.submitTemplateUpdates(BI.nodeKey,BI,BK);},removeLayout:function AM(BJ,BI,BK){this.submitUpdates({act:"removeLayout",unitKey:BJ,isCurrent:BI},BK);},moveLayout:function s(BK,BI,BJ){this.submitUpdates(this.getMoveNodeAction(BK,BI,BJ),mstrmojo.DocDataService.EMPTY_CALLBACK,mstrmojo.DocDataService.SUPPRESS_DATA);},getMacroCopyNodeAction:function Ai(BJ,BI,BL){var BK={act:"macroCopyUnit",newKey:BL,partialRetrieval:this.newRetrievalKeysConfig().addNode(BL)};L(BK,BJ,BI);return BK;},getMacroMoveNodeAction:function AB(BJ,BI){var BK={act:"macroMoveUnit",partialRetrieval:this.newRetrievalKeysConfig().addNode(BJ.k)};L(BK,BJ,BI);return BK;},getMoveNodeAction:function o(BM,BI,BJ){var BL=BM.defn,BK=BL?BL.t:mstrmojo.EnumRWUnitType.LAYOUT;var BN=B(BI,BK);BN.unitKey=BM.k;if(BJ!==undefined){BN.index=BJ;}return BN;},getMoveControlAction:function Z(BL,BJ,BI){var BK=B(BJ,mstrmojo.EnumRWUnitType.SELECTOR);BK.keyContext=BL;if(BI){BK.partialRetrieval={nodes:Ak(BI)};}return BK;},addMoveControlAction:function H(BL,BK,BJ,BI){BL.addActions(this.getMoveControlAction(BK,K.call(this,BJ,BL),BI));},getSetCtrlSourceAction:function AG(BJ,BK,BI){return{act:"setControlSource",keyContext:BJ,unitId:BK,unitType:BI,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BJ)),partialUpdate:{selectors:[Al(BJ)]}};},getRemoveCtrlTargetAction:function F(BK,BJ,BL,BI){return AI.call(this,"removeControlTarget",BK,BJ,BL,BI);},getClearCtrlTargetAction:function A3(BI){return{act:"clearControlTarget",keyContext:BI};},getAddCtrlTargetAction:function Ap(BM,BJ,BN,BO,BI,BK){var BL=AI.call(this,"addControlTarget",BM,BJ,BN,BI,BK);BL.isUC=!BO;return BL;},getAddCtrlTargetDatasetAction:function A0(BJ,BI){return{act:"addControlTargetDataset",keyContext:BJ,tgtDid:BI};},getRemoveCtrlTargetDatasetAction:function e(BJ,BI){return{act:"removeControlTargetDataset",keyContext:BJ,tgtDid:BI};},getClearCtrlTargetDatasetAction:function AL(BI){return{act:"clearControlTargetDataset",keyContext:BI};},getChangeControlElementSource:function BC(BJ,BI){return{act:"changeControlElementSource",keyContext:BJ,ctlElementSrc:BI};},getSetAttributesJoinTypeAction:function Ab(BI,BJ){return{act:"setAttributesJoinType",nodeKey:BI,value:BJ,partialRetrieval:this.newRetrievalKeysConfig().addNode(BI)};},getSetMetricJoinTypeAction:function AT(BK,BM,BI,BJ,BL){return{act:"setMetricJoinType",nodeKey:BK,unitId:BM,dataType:BI,unitType:BJ,value:BL,partialRetrieval:this.newRetrievalKeysConfig().addNode(BK)};},getTxUpdates:function AQ(BJ){var BI=this.model;return BI&&BI.getTransactionUpdates&&BI.getTransactionUpdates(BJ);},clearTxUpdates:function Af(BJ){var BI=this.model;if(BI&&BI.clearTransactionUpdates){BI.clearTransactionUpdates(BJ);}},resetTxUpdates:function C(BJ){var BI=this.model;if(BI&&BI.resetTransactionUpdates){BI.resetTransactionUpdates(BJ);}},loadDocLayout:function J(BK,BM,BL){var BJ={act:"setCurrentLayout",unitKey:BK.layoutKey,disablePU:true},BI={style:{params:{treesToRender:3}},params:Am.call(this)};if(BL){BL.add(BJ,BM,BI);}else{this.submitUpdates(BJ,BM,BI);}},checkMissingCredentials:function w(BI,BJ){Ah.call(this,A(BI,{taskId:"checkMissingCredentials"}),BJ);},setCurrentDocLayout:function Ao(BI,BM,BL){var BK={act:"setCurrentLayout",unitKey:BI},BJ={config:{silent:(BM===null)}};BM=BM||null;if(BL){BL.add(BK,BM,BJ);}else{this.submitUpdates(BK,BM,BJ);}if(window.mstrMobileApp!==undefined){mstrMobileApp.clearWebViewCache(false);}},fetchDocPage:function A4(BI,BJ){Ah.call(this,{taskId:"fetchDocPage",rwb:this.rwb,pos:BI},BJ);},requestPanelChangeDeferred:function BB(BO,BN,BI,BJ,BL,BM){var BK={act:"setCurrentPanel",unitKey:BN};if(BI){BK.partialRetrieval={nodes:BI.split(",")};}BO.add(BK,BM,{config:{showProgress:BL,hideProgress:BL,progressStateText:AJ},style:{params:{treesToRender:BJ?3:0}}});},getGraphSelectionAction:function D(BM,BI,BK,BP,BO,BJ){var BN=this.model.getCurrentLayoutDef(),BQ=(BN&&BN.dzf)||1,BL={act:"graphSelector",nodeKey:BM,sliceID:BK,x:Math.round(BP/BQ),y:Math.round(BO/BQ)};if(BJ){BL.usePartialUpdate="0";}else{BL.partialUpdate={selectors:BI.split("\u001E")};}return BL;},getSelectorElementsAction:function p(BK){var BJ={act:"setSelectorElements",keyContext:BK.ck,ctlKey:BK.ctlKey,elemList:mstrmojo.string.decodeHtmlString(BK.eid),isVisualization:!!BK.isDocVis},BI=BK.include;if(BI!==undefined){BJ.include=!!BI;}if(BK.tks){BJ.tks=BK.tks;}if(BK.disablePU){BJ.usePartialUpdate="0";}else{if(BK.ignoreTargetData){BJ.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BK.ck));}else{BJ.partialUpdate={selectors:BK.ctlKey.split("\u001F")};}}return BJ;},getUpdateTransactionAction:function BG(BJ){var BI={act:"updateTransaction"};if(BJ){if(BJ.ctlKey){BI.partialUpdate={selectors:[BJ.ctlKey]};}}return BI;},getSelectorFromGMAction:function k(BJ){var BI={act:"setSelectorFromGM",keyContext:BJ.ck,ctlKey:BJ.ctlKey,keepOnly:!!BJ.keepOnly,selectorObjects:BJ.selectorObjects,isVisualization:!!BJ.isDocVis,include:!!BJ.include};if(BJ.tks){BI.tks=BJ.tks;}if(BJ.disablePU){BI.usePartialUpdate="0";}else{BI.partialUpdate={selectors:[BJ.ctlKey]};}return BI;},getGMViewFilterAction:function AE(BJ){var BI={act:"keepOnlyGM",selectorObjects:BJ.selectorObjects,isVisualization:!!BJ.isDocVis,keepOnly:!!BJ.keepOnly};if(BJ.tks){BI.tks=BJ.tks;}if(BJ.disablePU){BI.usePartialUpdate="0";}else{BI.partialUpdate={selectors:[BJ.ctlKey]};}return BI;},setMultiDocSelectorElements:function AC(BI,BJ,BL){var BK={taskId:"setMultiDocSelectorElements",rwb:this.rwb,multiSelect:BJ,selectorObjects:BI};Ah.call(this,BK,BL,{showWait:true,hideWait:true,delay:true});},setDocSelectorTexts:function Q(BN,BP,BR,BO,BQ,BJ,BI,BK,BM){var BL={taskId:"setDocSelectorTexts",rwb:this.rwb,unitKeyContext:BN,ctlTexts:BP,ctlKey:BR,zoomFactor:BJ};if(AR.isAndroid||BI){BL.taskId="androidSetDocSelectorElements";}if(BO!==null&&BO!==undefined){BL.include=BO;}if(BK!==null&&BK!==undefined){BL.usePartDisplay=BK;}if(BM!==null&&BM!==undefined){BL.treesToRender=BM;}Ah.call(this,BL,BQ);},getSelectorExpressionAction:function q(BK){var BJ={act:"setSelectorExpression",keyContext:BK.ck,ctlType:BK.type,objId:BK.srcid,objType:BK.srct,expFunction:BK.f,expFunctionType:BK.ft,include:!!BK.include,qt:BK.qt,unset:!!BK.unset};if(BK.disablePU){BJ.usePartialUpdate="0";}else{BJ.partialUpdate={selectors:[BK.ckey]};}if(BK.changeQual){BJ.changeQual=BK.changeQual;}var BI=BK.cs;if(BI!==null&&BI!==undefined){BJ.expConstants=BI;BJ.dataType=BK.dtp;}if(BK.fid){BJ.fid=BK.fid;}return BJ;},getMultiUnitSelectorAction:function A9(BI){return{act:"multiUnitSelection",keyContext:BI.ck,sels:BI.selections,partialUpdate:{selectors:[BI.ctlKey]}};},getRemoveCtrlAction:function Aj(BJ,BI){return{act:"removeControl",key:BJ,partialUpdate:{selectors:[BJ]},partialRetrieval:{nodes:Ak(BI)}};},getAddCtrlAction:function Aa(BP,BN,BJ,BO,BK,BQ,BI,BL,BR){if(isNaN(BR)){BR=1;}var BM={act:"addControl",parentKey:BP,nodeKey:BN,ctlKey:BJ,isUC:!!BK,unitType:BQ||-1,unitId:BI||"",targetKeys:Ak(BL),ctlType:BR,gpType:BR,partialRetrieval:{nodes:Ak(BO)}};if(!BM.isUC){BM.partialUpdate={selectors:[BJ]};}return BM;},getSaveGraphPropertiesAction:function j(BI,BJ){return{act:"saveGraphProperties",nodeKey:BI,properties:BJ};},getSelectorIncludeAction:function Aw(BJ){var BI=BJ.ckey;return{act:"setSelectorInclude",keyContext:BJ.ck,ctlKey:BI,ctlType:BJ.type,include:BJ.include,partialUpdate:{selectors:[BI]}};},getSelectorShowAllAction:function O(BI){return{act:"setSelectorShowAll",keyContext:BI.ck,ctlKey:BI.ckey,ctlType:BI.type,showAll:BI.showAll,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BI.ck))};},getUnsetSelectorAction:function d(BL){var BK=BL.ckey,BI=BL.ck,BJ={act:"unsetSelector",keyContext:BI,ctlKey:BK,ctlType:BL.type};if(BL.ignoreTargetData){BJ.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BI));}else{BJ.partialUpdate={selectors:[BK]};}return BJ;},getChangeFilteringAction:function At(BI,BL,BK,BJ){return{act:"changeFiltering",nodeKey:BI,filterMode:BL,isUC:BK,partialRetrieval:{nodes:(BJ?Ak(BJ):[])}};},getAddDerivedMetricToDatasetAction:function Az(BI){return{act:"addDerivedMetricToDataset",dsid:BI.dsid,formula:BI.formula,isTokenStream:BI.isTokenStream,name:BI.name,newObjectIds:BI.Ids,afb:BI.afb,sfb:BI.sfb};},getEditDocUnitPropAction:function AA(BI){return{act:"editDocUnitProp",dsid:BI.dsid,formId:BI.formId,unitId:BI.unitId,unitType:BI.unitType,prop:BI.prop,value:BI.value};},getRWGraphImage:function BF(BM,BQ){var BL=mstrApp,BI=this.id,BJ={taskId:"getRWGraphImage",taskEnv:"xhr",imgType:4,messageID:this.msgId,nodeKey:BM.k,sliceID:parseInt(BM.sid,10),width:parseInt(BM.w,10),height:parseInt(BM.h,10)};if(BL.onMobileDevice()&&BL.useBinaryFormat){window.setTimeout(function(){Ah.call(mstrmojo.all[BI],BJ,BQ,T());},0);}else{if(BM.encodeImage){BJ.taskContentEncoding="base64";delete BJ.taskEnv;Ah.call(this,BJ,{success:function BR(BS){BQ.success("data:image/png;base64,"+BS);},failure:function BK(BS){(BQ.failure||BL.onerror)(BS);}},T());}else{var BO=BL.getConfiguration(),BN=BL.getCurrentProjectId(),BP=new mstrmojo.StringBuffer();BJ.__ts__=new Date().getTime();BJ.sessionState=BL.getSessionState(BN);a.forEach(BJ,function(BS,BT){BP.append(BT+"="+encodeURIComponent(BS));});BQ.success(BO.getTaskUrlByProject(BN)+"?"+BP.toString("&"));}}},getImage:function BE(BJ){var BK=mstrApp,BI=BK.getConfiguration();if(BI&&BJ&&BJ.indexOf("://")===-1){BJ=BI.getHostUrlByProject(BK.getCurrentProjectId())+BJ;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(BJ)):BJ;},setGridDisplayMode:function r(BK,BJ,BL,BI){a.copy({params:{suppressData:true}},BI);this.submitUpdates({act:"setGridDisplayMode",unitKey:BK,displayMode:BJ},BL,BI);},setDocZoom:function G(BI,BJ){this.submitUpdates(A(BI,{act:"setDocZoom",disablePU:true}),BJ,{style:{params:{treesToRender:3}}});},sortGrid:function AK(BI,BJ){this.submitTemplateUpdates(BI.nodeKey,A({act:"sort"},BI),BJ);},getAdvSortData:function Ad(BI,BJ){this.rwExecute(A(BI,{styleName:"RWGridStyle"}),BJ);},rwExecute:function A6(BI,BJ){Ah.call(this,A(BI,{taskId:"RWExecute",rwb:this.rwb,messageID:this.msgId}),BJ);},pivot:function l(BI,BJ){this.submitTemplateUpdates(BI.nodeKey,{act:"pivot",unitId:BI.unitId,unitType:BI.unitType,attFormId:BI.attFormId,axis:BI.axis,unitPos:BI.unitPos},BJ);},resizeXtabColumn:function A2(BI,BJ){this.submitUpdates([this.getUpdateTemplateAction(BI.nodeKey,BI),{act:"format",unitType:52,unitKey:BI.nodeKey,formatType:1,format:{FormattingSize:{WidthMode:2}}}],BJ);},showTotals:function S(BI,BJ){this.submitTemplateUpdates(BI.nodeKey,{act:"showTotals",unitId:BI.unitId,unitType:BI.unitType,subtotalType:BI.subtotalType,clearSubtotalType:BI.clearSubtotalType},BJ);},drillGrid:function AH(BI,BJ){this.submitUpdates(this.getDrillGridAction(BI),BJ,{config:{showProgress:true,hideProgress:true,progressStateText:AJ,delay:true}});},getDrillGridAction:function A8(BJ){var BI={act:"gridDrillWithin",messageID:this.msgId,nodeKey:BJ.nodeKey,sliceId:BJ.sliceId,drillPathIndex:BJ.drillPathIndex,drillPathKey:BJ.drillPathKey,elementList:BJ.drillElements,retainParent:BJ.retainParent,partialUpdate:{nodes:[BJ.nodeKey]}};if(BJ.x){BI.x=BJ.x;BI.y=BJ.y;}return BI;},changeDocGroupBy:function M(BK,BL,BI){var BJ={act:"changeDocGroupBy",disablePU:true};if(BK.flags){BJ.flags=BK.flags;}if(BK.groupbyKey){BJ.gbKey=BK.groupbyKey;BJ.elemId=BK.elementId;}else{BJ.gbUnits=BK.gbUnits;}this.submitUpdates(BJ,BL,{config:BI,style:{params:{treesToRender:3}},params:Am.call(this)});},retrieveServerJson:function b(BK,BT,BL){var BN=this.model,BO=BN.controller,BR={},BI,BJ,BP;var BQ=BK.nodes;if(BQ){BR.partialRetrieval=BQ;}var BS=BK.slices;if(BS){BR.slices=BS;}if(BL){BI=BL.style;BJ=BL.config;BP=BL.params;}if(!BJ){BJ={showProgress:true,hideProgress:true,progressStateText:AJ};}var BU=BK.style=a.clone(this.defaultStyle);A(BI.params,BU.params);var BM={taskId:"getServerJSONResults",styleName:"ServerJsonRWDStyle",compress:1,rwb:this.rwb,messageID:this.msgId,stateID:-1,params:JSON.stringify(BR),treesToRender:BU.params.treesToRender};A(BP,BM);BJ.preserveUndo=(BL&&BL.preserveUndo)||false;Ah.call(this,BM,BT,BJ);},downloadGridData:function I(BJ,BK){var BI={act:"gridIncrementalFetch",nodeKey:BJ.nodeKey,rowPosition:BJ.rowPosition,maxRows:BJ.maxRows,colPosition:BJ.colPosition,sliceId:BJ.sliceId,maxColumns:BJ.maxColumns,partialRetrieval:this.newRetrievalKeysConfig().addNode(BJ.nodeKey)};if(BJ.partialUpdate){BI.partialUpdate=BJ.partialUpdate;}this.submitUpdates(BI,BK,a.copy(T(),{noUpdate:true,config:{silent:true}}));},txMarkRows:function AP(BI,BJ){Ah.call(this,{taskId:"markRow",rwb:this.rwb,nodeKey:BI.nodeKey,sliceId:BI.sliceId,rowOrdinal:BI.rowOrdinal,actionType:BI.actionType},BJ);},txChangeData:function t(BI,BJ){Ah.call(this,{taskId:"changeData",rwb:this.rwb,nodeKey:BI.nodeKey,sliceId:BI.sliceId,cells:BI.cells,autoRefresh:BI.autoRefresh},BJ);},sendTransactionActions:function Y(BJ,BK){var BI={taskId:"DocTransaction",rwb:this.rwb,keyContext:BJ.keyContext,actions:BJ.actions,messageID:this.msgId};if(BJ.txrcd){BI.isPending=BJ.txrcd.pending;BI.timestamp=BJ.txrcd.timestamp;}Ah.call(this,BI,BK,{silent:!!BK});},newUpdate:function Ay(BK,BJ){var BI=new mstrmojo.DocDataService.Update(BJ);BI.ds=this;BI.cmd=BK;return BI;},newUpdateWithoutCmd:function h(BJ){var BI=new mstrmojo.DocDataService.Update(BJ);BI.ds=this;return BI;},newRetrievalKeysConfig:function AZ(){return new mstrmojo.rw.model.RetrievalKeysConfig();},newUpdateKeysConfig:function P(){return new mstrmojo.rw.model.UpdateKeysConfig();},submitCmd:function A5(BJ,BI){this.newUpdate(BJ,BI).submit();},submitUpdates:function Ac(BR,BW,BO){BR=Ak(BR);var BN={actions:BR},BI,BL,BT,BK=false;R.forEach(BR,function BQ(BY){if(BY.disablePU){BK=true;delete BY.disablePU;}R.forEach(BY.actions,BQ);return !BK;});if(!BK){var BJ=mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig(BR),BV=mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig(BR);if(!a.isEmpty(BJ)){BN.partialRetrieval=BJ;}if(!a.isEmpty(BV)){BN.partialUpdate=BV;}}if(BO){BI=BO.style;BL=BO.config;BT=BO.params;}if(!BL){BL={showProgress:true,hideProgress:true,progressStateText:AJ};}if(!BI){BN.style=this.defaultStyle;}else{var BX=BN.style=a.clone(this.defaultStyle);A(BI.params,BX.params);}BN.style.name=(BI&&BI.name)||mstrApp.styleName;var BP={taskId:"mojoRWManipulation",rwb:this.rwb,messageID:this.msgId,stateID:-1,params:JSON.stringify(BN)};A(BT,BP);BL.preserveUndo=(BO&&BO.noUpdate)||false;var BS=this,BU=true,BM=u.override({success:function(BY,BZ){if(BY.status===2){BU=false;BS.submitUpdates([],BW,BO);}else{BU=true;return this._super(BY,BZ);}},complete:function(){if(this._super&&BU){this._super();}}},A(BW));if(!(BO&&BO.hideCancel)){BL.waitBoxCfg=a.copy({showCancel:true},BL.waitBoxCfg);}if(BO&&BO.message){BL.waitBoxCfg=a.copy({message:BO.message},BL.waitBoxCfg);}Ah.call(this,BP,BM,BL);},submitTemplateUpdates:function x(BI,BK,BL,BJ){this.submitUpdates(this.getUpdateTemplateAction(BI,BK),BL,BJ);},getUpdateTemplateAction:function AW(BI,BK,BJ){return{act:"updateTemplate",keyContext:BI,partialRetrieval:this.newRetrievalKeysConfig().addNode(BI,BJ),actions:Ak(BK)};},addUpdateTemplateAction:function BA(BK,BI,BJ){BK.addActions(this.getUpdateTemplateAction(BI,BJ));},applySegment:function AN(BJ,BI,BK){Ah.call(this,{taskId:"applySegment",rwb:this.rwb,segmentID:BJ,nodeKey:BI},BK);},getPageByTree:function AO(BI){mstrApp.serverRequest({taskId:"getPageByTree",msgID:this.msgId},BI);},getUserDICubeInfo:function W(BI,BJ){Ah.call(this,{taskId:"getUserDICubeInfo",cubeIds:BI.join(",")},BJ);},applySorts:function Ax(BJ,BK,BI,BL){Ah.call(this,{taskId:"applySorts",key:BJ,sortType:BK,sortList:BI},BL,mstrmojo.DocDataService.PROGRESS_CONFIG);},getAddNewDerivedMetricToDatasetSubmitFunc:function Av(BJ){var BI=this;return function(BM){var BN=BI.model,BL=BN.controller,BK=a.copy(BM,BJ),BO=[Ag.call(BI,BK,false)],BP=BN.getDatasetsUpdateCallback();BL.submitUndoRedoUpdates(BO,null,BP,{style:{params:{treesToRender:1}}});};},getAddNewDerivedMetricToXtabSubmitFunc:function An(BJ){var BI=this;return function(BN){var BO=BI.model,BM=BO.controller,BL=a.copy(BN,BJ),BK=BL.idx,BQ=[],BR=u.wrapMethods(BO.getDatasetsUpdateCallback(),BM._getXtabCallback(BL.host));BQ.push(Ag.call(BI,BL,true));if(BL.replace){BQ.push(BI.getUpdateTemplateAction(BL.nodeKey,[BL.host.model.getRemoveTemplateUnitAction({did:BL.replace.did,t:BL.replace.t})]));}else{BK++;}var BP=BI.getUpdateTemplateAction(BL.nodeKey,[BL.host.model.getAddTemplateUnitAction({did:"$GUID_135",t:4},BL.dsid,BL.zoneid,BK),{act:"renameUnit",id:"$GUID_135",type:4,name:BL.alias,isDynamicAlias:true}]);BQ.push(BP);BM.submitUndoRedoUpdates(BQ,null,BR);};},getAddNewDerivedMetricToDropzoneSubmitFunc:function AD(BJ){var BI=this;return function(BP){var BQ=BI.model,BR=BQ.controller,BT=a.copy(BP,BJ),BV=BT.host.zonesModel,BW=BT.idx,BO=[],BK=[],BU={id:BT.zoneid},BS={did:"$GUID_135",t:4},BX=u.wrapMethods(BQ.getDatasetsUpdateCallback(),BR._getXtabCallback(BT.host));BO.push(Ag.call(BI,BT,true));if(BT.replace){var BM={did:BT.replace.did,t:BT.replace.t};BK.push(BV.getRemoveDropZoneUnitAction(BU,BM));}else{BW++;}BK.push(BV.getAddDropZoneUnitAction(BU,BS,BW,{datasetId:BT.dsid}));var BL=(BJ.zoneid===4)?1:2,BN=BV.getAddMetricNameAction(BJ.host,BL);if(BN){BO.push(BN);}if(!BT.replace&&BV.gmZones){BN=BV.gmZones.getUpdateGroupInfoActionForNewMetric(BJ.zoneid,BW,true);if(BN){BO.push(BN);}}BV.checkAndAddThresholdAction(BT.zoneid,BS,BK);BO.push(BI.getUpdateTemplateAction(BT.nodeKey,BK));BR.submitUndoRedoUpdates(BO,null,BX);};},getEditDerivedMetricSubmitFunc:function g(BJ){var BI=this;return function(BM){var BO=BI.model,BL=BO.controller,BK=a.copy(BM,BJ),BN=BJ.nodeKey,BP={act:"editDM",formula:BK.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(BK.tokenStreamXML),afb:BJ.afb,sfb:BJ.sfb,dsid:BK.dsid||"",did:BK.did},BQ=[BO.addUpdateObjects(BP,{id:BK.did,type:4,flag:mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS.DATA_CHANGE})],BR=u.wrapMethods(BO.getDatasetsUpdateCallback(),BL.getPartialUpdateCallback());if(BN){BQ.push(BI.getUpdateTemplateAction(BN,[{act:"renameUnit",id:BK.did,type:4,name:BK.alias,isDynamicAlias:true}]));}else{BP.name=BK.alias;}BL.submitUndoRedoUpdates(BQ,null,BR);};},resetSelections:function A1(BJ,BI,BK){Ah.call(this,{taskId:"resetSelections",rwb:this.rwb,unitKeyContext:BJ||"",usePartDisplay:BI?"0":"1",treesToRender:BI?3:2},BK);},setPreference:function E(BI,BJ){Ah.call(this,{taskId:"setPreference",prefs:BI},BJ);},getObjectInfo:function AU(BI,BJ){Ah.call(this,A(BI,{taskId:"getObjectInfo"}),BJ,T());},addSuppressData:function Aq(BI){if(BD(BI)===mstrmojo.DocDataService.EnumTreesToRender.NONE){a.copy({params:{suppressData:true}},BI);}},uploadImageToServer:function(BK,BL){var BJ={taskId:"importImage",imageFieldName:"imageData",isEdit:1,fieldKey:BK.fieldKey,fieldName:BK.fieldName,imageName:encodeURIComponent(BK.imageName),imageSize:BK.imageSize,nodeKey:BK.nodeKey,sectionKey:BK.sectionKey};if(mstrApp.isSingleTier){var BI=";base64,";BJ.rwNodeKey=BK.fieldGroupKey;BJ.imageData=BK.base64Str.split(BI)[1]||BK.base64Str;mstrApp.serverRequest(BJ,BL);}else{BJ.msgID=this.msgId;BJ.imageData=BK.imageData;mstrmojo.xhr.upload("POST",mstrConfig.taskURL,BL,BJ);}}});mstrmojo.DocDataService.Update=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.DocDataService.Update",actions:null,callback:null,extras:null,init:function Ae(BI){A(BI,this);this.actions=this.actions||[];this.callback=this.callback||{};this.extras=this.extras||{};},addActions:function AY(BI){this.actions=this.actions.concat(Ak(BI));},addCallbacks:function As(BI){this.callback=u.wrapMethods(this.callback,BI);},addExtras:function AS(BJ){var BI=BD(BJ),BK=BD(this.extras);this.extras=A(BJ,this.extras);if(BI!==undefined&&BK!==undefined){this.extras.style.params.treesToRender|=BK;}},addUpdate:function AV(BI){this.add(BI.actions,BI.callback,BI.extras);},setTreesToRender:function BH(BI){if(BI){this.addExtras({style:{params:{treesToRender:BI}}});}return this.extras.style.params.treesToRender;},add:function X(BJ,BK,BI){if(BJ){this.addActions(BJ);}if(BK){this.addCallbacks(BK);}if(BI){this.addExtras(BI);}},submit:function z(){var BJ=this.actions,BK=this.callback,BI=this.extras;if(this.cmd){this.cmd.submit(BJ,BK,BI);}else{this.ds.submitUpdates(BJ,BK,BI);}}});mstrmojo.DocDataService.PUInfoType=null;mstrmojo.DocDataService.ExtrasType=null;mstrmojo.DocDataService.PROGRESS_CONFIG={showProgress:true,hideProgress:true,progressStateText:AJ,delay:true};mstrmojo.DocDataService.UNDO_KEY="undo";mstrmojo.DocDataService.REQUEST_DEFN_DATA={style:{params:{treesToRender:3}}};mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION={style:{params:{treesToRender:1}}};mstrmojo.DocDataService.REQUEST_ONLY_DATASETS={style:{params:{treesToRender:0}}};mstrmojo.DocDataService.SUPPRESS_DATA={params:{suppressData:true}};mstrmojo.DocDataService.EMPTY_CALLBACK={success:mstrmojo.emptyFn};mstrmojo.DocDataService.CopyMoveDestinationType=null;mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS={FORMAT_CHANGE:1,DATA_CHANGE:2};mstrmojo.DocDataService.EnumTreesToRender={NONE:0,DEFN:1,DATA:2,BOTH:3};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip","mstrmojo.css");mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",slot:"",alias:"",parent:null,init:function A(C){this._super(C);var D=this.parent;if(!D||D.hasInitBindings){this.initBindings();}},destroy:function B(C){if(this.hasRendered){this.unrender(C);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn,widgetResized:mstrmojo.emptyFn});mstrmojo.Widget.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};mstrmojo.Widget.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};mstrmojo.Widget.topMarkupMethod=function(){var C=this.top;if(C){this.domNode.style.top=C;}};mstrmojo.Widget.leftMarkupMethod=function(){var C=this.left;if(C){this.domNode.style.left=C;}};mstrmojo.Widget.heightMarkupMethod=function(){var C=this.height;if(C){this.domNode.style.height=C;}this.widgetResized();};mstrmojo.Widget.widthMarkupMethod=function(){var C=this.width;if(C){this.domNode.style.width=C;}this.widgetResized();};mstrmojo.Widget.enabledMarkupMethod=function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);};}());(function(){mstrmojo.requiresCls("mstrmojo.func");mstrmojo.ResSetLink=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ResSetLink",SAME_PROMPT:1,DO_NOT_ANSWER:2,CLOSE:3,DYNAMIC:4,STATIC:5,CURRENT_UNIT:6,ALL_VALID_UNITS:7,USE_DEFAULT_ANSWER:8,DYNAMIC_OR_SAME_PROMPT:9,toXml:function A(){var K=this,D=function(Q,R){return" "+Q+'="'+R+'"';},C=function(Q,R){return D(Q,mstrmojo.string.encodeXMLAttribute(R));},G=new mstrmojo.StringBuffer(),E=function(R,S){var Q=mstrmojo.string.multiReplace(S.disp_n,{"&nbsp;":" "});R.append("<e"+C("ei",S.ei)+C("disp_n",Q)+D("emt",S.emt)+"/>");};var I=this.prms,B=I&&I.length;if(B||K.aopam!=K.DO_NOT_ANSWER){G.append("<hl"+D("mid",K.mid)+D("srct",K.srct)+D("aopam",K.aopam)+">");if(B){G.append("<prms>");for(var F=0;F<B;F++){var P=I[F];G.append("<prm"+D("id",P.id)+D("am",P.am)+D("pt",P.pt));if(P.orid){G.append(D("orid",P.orid)+D("ortp",P.ortp));}G.append(">");switch(P.am){case K.DO_NOT_ANSWER:case K.CLOSE:case K.USE_DEFAULT_ANSWER:case K.SAME_PROMPT:break;case K.STATIC:G.append('<pa ia="1"><es>');var O=P.pa.es,N=O&&O.length||0;for(var J=N-1;J>=0;--J){var H=O[J];E(G,H);}G.append("</es></pa>");break;case K.DYNAMIC:case K.ALL_VALID_UNITS:case K.CURRENT_UNIT:case K.DYNAMIC_OR_SAME_PROMPT:var M=P.pa;if(M){G.append('<pa ia="1">');var L=M.a;if(L){G.append("<a"+D("id",L.id)+C("n",L.n)+">");}if(P.pt===1){G.append(mstrmojo.string.encodeXMLAttribute(M.v));}else{G.append("<es"+D("dispForms",L&&L.dispForms>=0?L.dispForms:"")+">");var O=M.es;N=O&&O.length||0;for(var J=N-1;J>=0;--J){var H=O[J];E(G,H);}G.append("</es>");if(L){G.append("</a>");}}G.append("</pa>");}break;}G.append("</prm>");}G.append("</prms>");}G.append("</hl>");}return G.toString();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._IsRptModel");mstrmojo.GraphModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsRptModel],{scriptClass:"mstrmojo.GraphModel"});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var B={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:B,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,init:function E(F){this.clear();this._super(F);},setAlignment:function C(F,G){this.alignment={host:F,popup:G};},addPopupHandlers:function D(F,H,G){this.popupHandlers[F]={open:H,close:G};},clear:function A(){this.popupHandlers={};var F=this.ENUM_CORNERS;this.alignment={host:F.BOTTOM_LEFT,popup:F.TOP_LEFT};}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=B;}());(function(){var I=mstrmojo.array,B=function(L,M){var O=-1;if(L==null||M==null){}else{var N=this.childNodes;O=I.indexOf(N,M);if(O<0){}}return O;},A=function(L){if(L.parentNode){L.parentNode.removeChild(L);}L.parentNode=this;};mstrmojo.mstr.WebNode=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.mstr.WebNode",exprType:0,nodeType:0,dataType:-1,dimType:1,childNodes:null,parentNode:null,getChildCount:function K(){return(this.childNodes&&this.childNodes.length)||0;},insertBefore:function H(L,M){var N=this.childNodes,O=B.call(this,L,M);if(O<0){A.call(this,L);I.insert(N,O,L);}},insertAfter:function F(L,M){var N=this.childNodes,O=B.call(this,L,M);if(O<0){A.call(this,L);I.insert(N,O+1,L);}},replaceChild:function G(L,M){var N=this.childNodes,O=B.call(this,L);if(O<0){A.call(this,L);M.parentNode=null;N[O]=L;}},removeChild:function J(L){L.parentNode=null;I.removeItem(this.childNodes,L);},appendChild:function C(L){if(L){A.call(this,L);if(!this.childNodes){this.childNodes=[];}this.childNodes.push(L);}},buildShortXML:function E(L){L.addChild("nd").addAttribute("et",this.exprType).addAttribute("nt",this.nodeType).addAttribute("dmt",this.dimType).addAttribute("ddt",this.dataType);var N=this.childNodes;if(N&&N.length){var M;for(M=0;M<N.length;M++){N[M].buildShortXML(L);}}this.buildTypeSpecificShortXML(L);L.closeElement();},buildTypeSpecificShortXML:function D(L){}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var F=mstrmojo.hash,M="pending",D="failed";function L(O){if(mstrApp.isHosted()){O.success({});}else{mstrApp.serverRequest({taskId:"getOfflineTransaction"},O,{noTaskURL:true,skipLogin:true});}}function C(O){var P=true;F.forEach(O,function(Q){if(Q.pending&&Q.pending.length>0){P=false;}});return P;}function I(){var O=this;L({success:function(R){var P=false,Q,T,S;O.emptyTransactionQueue=F.isEmpty(R);F.forEach(O.prjModel,function(V,U){if(!R[U]){Q=O.prjModel[U];if(Q&&Q.list){delete O.prjModel[U];P=true;}}});F.forEach(R,function(V,U){var W=mstrApp.getConfiguration().getProjectByRealPid(U);if(!W){return ;}Q=O.prjModel[U];if(!Q){Q=O.prjModel[U]={pid:W.pid,realPid:U,pn:W.pn,list:V};P=true;}else{if(!F.equals(Q.list,V)){Q.list=V;P=true;}}});if(P){S={};F.forEach(O.prjModel,function(U){if(U){T=F.clone(U.list);F.copy(T,S);F.forEach(T,function(V){V.p=U;});}});O.ntfBoardModel.docsTx=S;O.ntfBoardModel.raiseEvent({name:"recordChanged",data:O.ntfBoardModel.docsTx});}}});}mstrmojo.OfflineTransactionModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.OfflineTransactionModel",lastSubmission:false,emptyTransactionQueue:true,ntfBoardModel:null,prjModel:null,init:function N(O){this._super(O);this.prjModel={};this.ntfBoardModel=new mstrmojo.Obj({docsTx:{},getOfflineRecords:function P(Q){return Q?this.docsTx[Q]:this.docsTx;}});I.call(this);},getBoardModel:function A(){return this.ntfBoardModel;},hasOfflineTransactions:function K(){return !this.emptyTransactionQueue;},editTransactionRecord:function G(Q,P,O,U){var T=this.ntfBoardModel,S=T.docsTx[Q].p,R=mstrApp.getContentDimensions();mstrApp.serverRequest({taskId:"editOfflineTransaction",projectId:S.realPid,documentId:Q,isPending:P,timeStamp:O,availableWidth:R.w,availableHeight:R.h},U,{projectId:S.pid,skipLogin:true});},deleteTransactionRecord:function E(Q,U,T,Y){var P=this.ntfBoardModel,R=P.docsTx[Q],O=R.p,V=R[U?M:D],X,S,W=this;mstrApp.serverRequest({taskId:"deleteOfflineTransaction",projectId:O.realPid,documentId:Q,isPending:U,timeStamp:T},{success:function(){X=mstrmojo.array.find(V,"timestamp",T);if(X!==-1){V.splice(X,1);}if(R.pending.length===0&&R.failed.length===0){delete P.docsTx[Q];if(F.isEmpty(P.docsTx)){W.emptyTransactionQueue=true;}S=W.prjModel[O.realPid];if(S){delete S.list[Q];if(F.isEmpty(S.list)){delete W.prjModel[O.realPid];}}P.raiseEvent({name:"recordChanged",data:P.docsTx});}if(Y.success){Y.success(V);}}},{noTaskURL:true,skipLogin:true});},submitOfflineTransaction:function B(){if(!this.lastSubmission||!this.emptyTransactionQueue){F.forEach(this.prjModel,function(P,O){if(P&&P.list&&!F.isEmpty(P.list)&&!C(P.list)){mstrApp.submitTransactionQueue(O,"submitOfflineTransaction");}});}},onSubmitDone:function H(O){this.lastSubmission=O;this.refresh();},refresh:function J(){I.call(this);}});mstrmojo.OfflineTransactionModel.PENDING=M;mstrmojo.OfflineTransactionModel.FAILED=D;}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");function B(J,I){this.raiseEvent({name:"viCompBuilt",type:J,widget:I});}mstrmojo.vi.models.VIComponentMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.VIComponentMap",init:function G(I){this._super(I);this.relativePanels={};this.comps={};},addRelativePanel:function H(I){this.relativePanels[I]=true;},isRelativePanel:function F(I){return !!this.relativePanels[I];},isComponent:function C(J,I){return this.getComponentKey(J)===I;},getComponent:function A(I){return this.comps[I];},getComponentKey:function D(J){var I=this.getComponent(J);return(I&&I.k)||"";},createComponent:function E(L,K,J){B.call(this,L);var I=new K(J);this.comps[L]=I;B.call(this,L,I);return I;}});mstrmojo.vi.models.VIComponentMap.TYPES={FILTER_STACK:1,FILTER_PANEL:2,PAGEBY_STACK:3,PAGEBY_PANEL:4,VIZ_CONTENT:5,MAIN_CONTENT:6};}());(function(){mstrmojo.requiresDescs(8409);mstrmojo.prompt.WebPrompt=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.prompt.WebPrompt",promptType:0,prs:null,pt:0,pin:0,loc:null,title:"",mn:"",req:false,min:null,max:null,dataSourcesXML:"",getStyle:mstrmojo.emptyFn,getDisplayValue:mstrmojo.emptyFn,validate:function F(K){if(this.isAnswerEmpty(K)&&this.req){throw new Error(mstrmojo.desc(8409,"This prompt (#) requires an answer.").replace("#",this.title));}},prepareAnswer:function E(L){var K=L&&L.success;if(K){K();}},getAnswerXML:function C(){var K=new mstrmojo.XMLBuilder();this.buildShortPa(K);return K.toString();},buildShortAnswerXML:function I(K){return K;},buildShortPa:function G(K){K.addChild("pa");K.addAttribute("pt",this.pt);var L=this.loc;if(L){K.addAttribute("pin",L.pin);K.addAttribute("did",L.did);K.addAttribute("tp",L.t);}this.buildShortAnswerXML(K);K.closeElement();},populateAnswer:function H(K){},setAnswerValue:mstrmojo.emptyFn,isAnswerEmpty:function J(K){return false;},populate:function D(L){this.promptType=L.ptp;this.pt=L.dptp;this.mn=L.mn;this.pin=L.pin;this.title=L.ttl;this.loc=L.loc;this.min=L.min||"";this.max=L.max||"";this.req=L.reqd;this.dataSourcesXML=L.dsrcs;var K=this.prs={};mstrmojo.array.forEach(L.prs,function(M){K[M.n]=M.v;});this.hasAnswer=L.hasAns;},buildAnswerObject:function B(){return{};},supported:function A(){return true;}});mstrmojo.prompt.WebPrompt.TYPES={CONSTANT_PROMPT:1,CONSTANT_GEO_PROMPT:1.5,ELEMENTS_PROMPT:2};mstrmojo.prompt.WebPrompt.STYLES={TEXT:1,LIST:2,STEPPER:3,SWITCH:4,SLIDER:5,CALENDAR:6,TIME:7,GEO:8,BARCODE:9};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.maps.AndroidMapModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.maps.AndroidMapModel",getVisProps:function(){return this.data.vp;},setPrompts:function E(M){},getDataService:function G(){},execute:function H(M,N){},answerPrompts:function F(M){},getPageByTree:function J(M){},sort:function D(M,N){},pivot:function K(M,N){},drillGrid:function L(M,N){},drill2Grid:function C(M,N){},linkToObject:function A(M,N){},pageBy:function I(M,N){},saveRWProps:function B(N,P,O,M,Q){}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo._IsList","mstrmojo.dom");mstrmojo.android._IsList=mstrmojo.provide("mstrmojo.android._IsList",mstrmojo.hash.copy(mstrmojo._IsList,{_mixinName:"mstrmojo.android._IsList",getItemIdxTouch:function A(I){var H=mstrmojo.dom.findAncestorByAttr(I.target,"idx",true,this.domNode),G=H&&parseInt(H.value,10);return(G!==null&&!isNaN(G))?G:-1;},resetListState:function B(){this.clearSelect(true);var G=this.scrollerConfig;if(G){delete this.scrollerConfig.origin;}},restoreListState:function C(G,I){var J={};J[G]=true;this.selectedIndices=J;this.selectedIndex=G;var H=this.scrollerConfig;if(H){H.origin=I;}},touchSelectEnd:function E(G){this.touchTap(G);}}));var F=mstrmojo.android._IsList;var D=F.onclick;F.onclick=mstrmojo.emptyFn;F.touchTap=function(G){this._listTarget=G.target;D.call(this,G);};}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebPrompt");mstrmojo.prompt.WebUnsupportedPrompt=mstrmojo.declare(mstrmojo.prompt.WebPrompt,null,{scriptClass:"mstrmojo.prompt.WebUnsupportedPrompt",answerXml:"",populate:function C(F){this._super(F);if(F.ans&&F.ans.xml){this.answerXml=F.ans.xml;}},getAnswerXML:function E(){return this.answerXml;},buildShortPa:function D(F){F.addRawXML(this.answerXml);},buildAnswerObject:function B(){var F=this._super();if(this.answerXml){F.ans={xml:this.answerXml};}return F;},supported:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebPrompt","mstrmojo.locales","mstrmojo.num","mstrmojo.date","mstrmojo.mstr.EnumDataType");mstrmojo.requiresDescs(8398,8399,8400,8401,8402,8403,8404,8405,8406);var X=mstrmojo.prompt.WebPrompt.STYLES,a=function(){return mstrmojo.locales.datetime;},L=mstrmojo.mstr.EnumDataType,Y=mstrmojo.num,R=mstrmojo.date,W=Math;function B(d){var f=parseFloat(this.min,10),b=parseFloat(this.max,10),e=!isNaN(f),g=!isNaN(b);if(e&&d<f){return -1;}else{if(g&&d>b){return 1;}else{return 0;}}}var Z={};Z[L.DataTypeBool]=function(b){if("0"!==b||"1"!==b){throw new Error(mstrmojo.desc(8398,"Invalid answer: #. Boolean values required.").replace("#",b));}};Z[L.DataTypeBigDecimal]=Z[L.DataTypeLong]=Z[L.DataTypeDouble]=Z[L.DataTypeDecimal]=Z[L.DataTypeReal]=Z[L.DataTypeInteger]=Z[L.DataTypeFloat]=Z[L.DataTypeNumeric]=function(b){if(!isNaN(b)){var d=parseFloat(b,10);switch(B.call(this,d)){case -1:throw new Error(mstrmojo.desc(8399,"Invalid answer: #. Answer is smaller than the minimum limit: ##.").replace("##",this.min).replace("#",Y.toLocaleString(b)));case 1:throw new Error(mstrmojo.desc(8400,"Invalid answer: #. Answer is bigger than the maximum limit: ##.").replace("##",this.max).replace("#",Y.toLocaleString(b)));}}else{if(b){throw new Error(mstrmojo.desc(8401,"Not a number"));}}};Z[L.DataTypeChar]=function(b){if(b){switch(B.call(this,(b&&b.length)||0)){case -1:throw new Error(mstrmojo.desc(8402,"Invalid answer: #. The length of the answer is smaller than the minimum limit: ##.").replace("##",this.min).replace("#",b));case 1:throw new Error(mstrmojo.desc(8403,"Invalid answer: #. The length of the answer is bigger than the maximum limit: ##.").replace("##",this.max).replace("#",b));}}};Z[L.DataTypeDate]=function(b){switch(mstrmojo.date.inDateTimeRange(b,this.min,this.max)){case -1:throw new Error(mstrmojo.desc(8404,"Invalid answer: #. The date/time is earlier than the earliest limit: ##.").replace("##",this.min).replace("#",b));case 1:throw new Error(mstrmojo.desc(8405,"Invalid answer: #. The date/time is later than the latest limit: ##.").replace("##",this.max).replace("#",b));}};function J(d){d=String(d);var b=d.indexOf(".");return(b==-1)?0:d.length-b-1;}function Q(k){var f=this.prs.Interval||1;if(!k){f=-f;}var j=parseFloat(this.getDisplayValue(true,true),10),h=parseFloat(f,10),e=W.pow(10,W.max(J(j),J(h)));var d=parseInt((W.round(j*e)+W.round(h*e)),10)/e,b={v:d,s:true};try{this.validate(d);}catch(g){b.s=false;}return b;}function O(d){var b=Q.call(this,d);if(b.s){this.answer=String(b.v);}}mstrmojo.prompt.WebConstantPrompt=mstrmojo.declare(mstrmojo.prompt.WebPrompt,null,{scriptClass:"mstrmojo.prompt.WebConstantPrompt",answer:"",preAnswer:"",defAnswer:"",dataType:8,isNumericDataType:function D(){switch(this.dataType){case L.DataTypeInteger:case L.DataTypeUnsigned:case L.DataTypeNumeric:case L.DataTypeDecimal:case L.DataTypeReal:case L.DataTypeDouble:case L.DataTypeFloat:case L.DataTypeShort:case L.DataTypeLong:case L.DataTypeBigDecimal:return true;default:return false;}},getStyle:function G(){var b=this._style;if(!this._style){var d=this.prs;switch(d.DisplayStyle){case"Stepper":b=X.STEPPER;break;case"Switch":b=X.SWITCH;break;case"Slider":b=X.SLIDER;break;case"Text box":if(this.dataType===14){b=X[(d.ShowTime==="-1")?"TIME":"CALENDAR"];break;}b=X.TEXT;break;case"Barcode":b=X.BARCODE;break;}if(!b){throw new Error(mstrmojo.desc(8406,"WebConstantPrompt::getStyle - Unknown prompt style."));}this._style=b;}return b;},getDisplayValue:function K(o,e){var j=this.answer||this.defAnswer,g=(j===undefined||j===null),b=this.getStyle();switch(b){case X.STEPPER:if(o&&(g||(this.dataType===6&&isNaN(parseFloat(j,10))))){var f=parseFloat(this.min,10),l=parseFloat(this.max,10);if(isNaN(f)||isNaN(l)){j=0;}else{if(0>f&&l>0){j=0;}else{j=(Math.abs(f-0)>Math.abs(l-0))?l:f;}}if(e){this.setAnswerValue(String(j));}}break;case X.SWITCH:var k=this.prs,h=k.OnValue,d=k.OffValue;if(o&&(j!==h&&j!==d)){j=d;if(e){this.answer=d;}}j=(j===h);break;case X.SLIDER:if(o&&(g||j==="")){j=this.min;if(e){this.setAnswerValue(String(j));}}break;}return(b==X.SWITCH)?j:this.isNumericDataType()?mstrmojo.num.toLocaleString(String(j)):j;},validate:function T(b){b=(b===undefined||b===null)?this.answer:b;this._super(b);this._validateFn(b);},isAnswerEmpty:function F(b){b=(b===undefined||b===null)?this.answer:b;return(b===undefined||b===null||b==="");},populate:function M(g){this.answer=g&&g.ans&&g.ans.text;this.dataType=g&&g.datatp;this._validateFn=Z[this.dataType];this._super(g);var f=this.prs;if(f.DisplayStyle==="Wheel"){f.DisplayStyle="Stepper";}switch(f.DisplayStyle){case"Switch":if(f.OnValue===undefined||f.OnValue===null){f.OnValue="1";}if(f.OffValue===undefined||f.OffValue===null){f.OffValue="0";}break;case"Slider":case"Stepper":this.interval=parseFloat(this.prs.Interval)||1;this.min=Y.parseNumeric(this.min);this.max=Y.parseNumeric(this.max);if(!this.min){this.min=0;}if(this.answer===undefined||this.answer===null||this.answer<this.min){this.answer=this.min;}if(this.answer>this.max){this.answer=this.max;}break;case"Text box":if(this.dataType===14&&f.ShowTime==="-1"){this.interval=parseFloat(this.prs.Interval)||1;var h=R.parseDateAndOrTime((this.answer||""));var e=R.parseDateAndOrTime((this.min||""));var b=R.parseDateAndOrTime((this.max||""));defaultTimeInfo={match:"12:00:00 AM",hour:0,min:0,sec:0};var d=R.formatTimeInfo(defaultTimeInfo,a().TIMEOUTPUTFORMAT);if(h&&!h.time){this.answer=this.answer+" "+d;}if(e&&!e.time){this.min=this.min+" "+d;}if(b&&!b.time){this.max=this.max+" "+d;}}break;}},populateAnswer:function P(b){if(b&&b.text){this.answer=b.text;}},buildAnswerObject:function S(){var b=this._super();b.ans={text:this.answer};return b;},setAnswerValue:function C(b){if(this.isNumericDataType()){b=mstrmojo.num.toString(b,false);}this.validate(b);this.answer=b;},getAnswerXML:function V(){return this.answer;},buildShortAnswerXML:function I(b){b.addText(this.isNumericDataType()?mstrmojo.num.toLocaleString(this.answer||""):(this.answer||""));},stepUp:function H(){if(this.getStyle()===X.STEPPER){O.call(this,true);}},canStepUp:function U(){return(this.getStyle()===X.STEPPER&&Q.call(this,true).s);},stepDown:function E(){if(this.getStyle()===X.STEPPER){O.call(this,false);}},canStepDown:function N(){return(this.getStyle()===X.STEPPER&&Q.call(this,false).s);},toggleSwitch:function A(){if(this.getStyle()===X.SWITCH){var d=this.prs,b=(this.getDisplayValue(true,false))?d.OffValue:d.OnValue;this.set("answer",b);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebPrompt","mstrmojo.array");var E=mstrmojo.array;mstrmojo.prompt.WebGeoConstantPrompt=mstrmojo.declare(mstrmojo.prompt.WebPrompt,null,{scriptClass:"mstrmojo.prompt.WebGeoConstantPrompt",promptType:1.5,geos:null,getStyle:function F(){return mstrmojo.prompt.WebPrompt.STYLES.GEO;},getDisplayValue:function D(){var L=this._isErr;if(L){return"Error while updating location: "+L;}var K=this,J="";E.forEach(this.geos,function(M){var N=M.answer;if(N===""){J="&lt;Update Current Location&gt;";return false;}else{var O=M.prs.GeographicCoordinate;if(typeof (O)=="undefined"||O!="1"){K.la=N;}else{K.lo=N;}}});if(K.displayLoc){J=K.displayLoc;}else{K.mn="Searching...";if(typeof (K.la)=="undefined"){K.la="";}if(typeof (K.lo)=="undefined"){K.lo="";}if(!(K.la==""&&K.lo=="")){J="("+K.la+","+K.lo+")";}}return J;},getDisplayLocation:function(L){var K=this,M=this.la,J=this.lo;if(M!=""&&J!=""){mstrmojo.GeoLocation.findAddress({lat:M,lng:J},{success:function(N){K.mn="";K.displayLoc=N[0].formatted_address;L.updateItem(K._renderIdx);},failure:function(O,N){K.mn="";}});}},validate:function G(K,J){return true;},buildShortPa:function H(J){E.forEach(this.geos,function(K){K.buildShortPa(J);});},add:function I(K){var J=this.geos=this.geos||[];J.push(K);},setAnswerValue:function C(L,K){try{delete this.displayLoc;this.validate(L,K);this.setLocation(L,K);}catch(J){this.setError(J);return false;}return true;},setError:function B(J){this._isErr=J;},setLocation:function A(K,J){E.forEach(this.geos,function(L){switch((L.prs&&L.prs.GeographicCoordinate)||"0"){case"0":L.set("answer",String(K));break;case"1":L.set("answer",String(J));break;}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumNodeType","mstrmojo.mstr.WebNode");mstrmojo.mstr.WebFormShortcutNode=mstrmojo.declare(mstrmojo.mstr.WebNode,null,{scriptClass:"mstrmojo.mstr.WebFormShortcutNode",nodeType:mstrmojo.mstr.EnumNodeType.NodeFormShortcut,attribute:null,form:null,buildTypeSpecificShortXML:function A(C){var B=this.attribute;if(B){B.buildShortObjectElt(C);}var D=this.form;if(D){D.buildShortObjectElt(C);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumExpressionType","mstrmojo.mstr.EnumNodeDimty","mstrmojo.mstr.EnumFunction","mstrmojo.mstr.EnumNodeType","mstrmojo.mstr.EnumWebFunctionType","mstrmojo.mstr.WebNode");var B=mstrmojo.mstr.ExpressionType,E=mstrmojo.mstr.EnumNodeDimty,C=mstrmojo.mstr.EnumFunction,F=mstrmojo.mstr.EnumNodeType,G=mstrmojo.mstr.EnumWebFunctionType;var A=function(H){H=parseInt(H,10);return H===B.FilterSingleMetricQual||H===B.FilterMetricExpression||H===B.FilterMultiMetricQual;};mstrmojo.mstr.WebOperatorNode=mstrmojo.declare(mstrmojo.mstr.WebNode,null,{scriptClass:"mstrmojo.mstr.WebOperatorNode",nodeType:F.NodeOperator,func:C.FunctionReserved,funcType:G.WebFunctionTypeGeneric,property:"",onExprTypeChange:function(){if(A(this.exprType)){this.dimType=E.NodeDimtyUnspecified;}},on_set_func:function(M,H){var J=false,L=parseInt(this.funcType,10);if(L===G.WebFunctionTypePercentQual||L===G.WebFunctionTypeRankQual){var K=H;switch(K){case EnumWebMRPFunction.WebMRPFunctionTop:this.func=C.FunctionLessEqual;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBottom:this.func=C.FunctionLessEqual;this.property='<pr ix="4" v="-1"/>';break;case EnumWebMRPFunction.WebMRPFunctionBetween:this.func=C.FunctionBetween;if(J){this.property="";}else{this.property='<pr ix="4" v="0"/>';}break;case EnumWebMRPFunction.WebMRPFunctionExcludeTop:this.func=C.FunctionGreater;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionExcludeBottom:this.func=C.FunctionGreater;this.property='<pr ix="4" v="-1"/>';break;case EnumWebMRPFunction.WebMRPFunctionNotBetween:this.func=C.FunctionNotBetween;if(J){this.property="";}else{this.property='<pr ix="4" v="0"/>';}break;case EnumWebMRPFunction.WebMRPFunctionEquals:this.func=C.FunctionEquals;this.property="";break;case EnumWebMRPFunction.WebMRPFunctionDifferentFrom:this.func=C.FunctionNotEqual;this.property="";break;case EnumWebMRPFunction.WebMRPFunctionBanding:this.func=C.FunctionBanding;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBandingC:this.func=C.FunctionBandingC;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBandingP:this.func=C.FunctionBandingP;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBandingM:this.func=C.FunctionBandingM;this.property='<pr ix="4" v="0"/>';break;default:}if(L===G.WebFunctionTypePercentQual){this.property+='<pr ix="5" v="0"/>';}else{this.property+='<pr ix="5" v="-1"/>';}var I=null;if(this.childNodes&&this.childNodes.length>0){I=this.childNodes[0];}if(I!=null){I.setPropertyStr(property);}}else{this.func=H;}},buildTypeSpecificShortXML:function D(I){I.addChild("op").addAttribute("fnt",this.func).closeElement();var H=this.property;if(H){I.addChild("prs").addRawXML(H).closeElement();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumDataType","mstrmojo.mstr.EnumNodeType","mstrmojo.mstr.WebNode");var B=mstrmojo.mstr.EnumNodeType,A=mstrmojo.mstr.EnumDataType;mstrmojo.mstr.WebConstantNode=mstrmojo.declare(mstrmojo.mstr.WebNode,null,{scriptClass:"mstrmojo.mstr.WebTimeNode",nodeType:B.NodeConstant,value:"",type:A.DataTypeUnknown,buildTypeSpecificShortXML:function C(D){D.addChild("cst").addAttribute("ddt",this.type).addText(this.value).closeElement();}});})();(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumNodeType","mstrmojo.mstr.WebNode");mstrmojo.mstr.WebTimeNode=mstrmojo.declare(mstrmojo.mstr.WebNode,null,{scriptClass:"mstrmojo.mstr.WebTimeNode",nodeType:mstrmojo.mstr.EnumNodeType.NodeTime,value:"",time:null,buildTypeSpecificShortXML:function A(B){B.addText(this.value);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom");function Z(a,d){if(!mstrmojo.DocInfoWindow){return ;}var b=a;while(b){if(b instanceof mstrmojo.DocInfoWindow){b[d?"registerScrollLock":"releaseScrollLock"](this);break;}b=b.parent;}}var L=mstrmojo.array,C=mstrmojo.dom,P=mstrmojo.hash,W=mstrmojo.css,F="px";var B=false;function K(a,d){if(!mstrmojo.DocInfoWindow){return ;}var b=a;while(b){if(b instanceof mstrmojo.DocInfoWindow){b[d?"registerLock":"releaseLock"](this);this.lockIW=d?b:null;break;}b=b.parent;}}var A=mstrmojo.ui.PopupConfig.ENUM_CORNERS,T=A.TOP_LEFT,R=A.TOP_RIGHT,H=A.BOTTOM_RIGHT,G=A.BOTTOM_LEFT;function I(a){return(a===G||a===T);}function X(a){return(a===R||a===H);}function N(a){return(a===H||a===G);}function Q(a){return(a===R||a===T);}function U(j,d,r,x){var AB=r.x,AA=r.y,w=r.w||0,l=r.h||0,b=x.w,s=x.h,u=j.alignment,g=u.popup,f=u.host,z=X(f),AC=N(f),t=false,p=false,e=false,q=false;if(I(g)){var h=AB+b+(z?w:0);t=d.w<h;}if(Q(g)){var o=AA+s+(AC?l:0);p=d.h<o;}if(X(g)){var k=AB-b+(z?w:0);e=k<0;}if(N(g)){var a=AA-s+(AC?l:0);q=a<0;}return{top:q,bottom:p,left:e,right:t};}function E(b){var a=this.popupConfig;if(a){P.forEach(a.popupHandlers,function(e,f){var d=e[b?"open":"close"];if(d){d.call(mstrmojo.all[f]||d,!!b);}});}}function J(b){var a=this.popupConfig;if(a&&!a.isHostedWithin){var d=this.hostProxy;if(d){d.style.display=b?"":"none";}}}function Y(a){return a!==undefined&&a!==null&&!isNaN(a);}mstrmojo._IsPopup={visible:false,lockIWForScroll:false,disposable:true,opener:null,onOpen:mstrmojo.emptyFn,onClose:mstrmojo.emptyFn,popupConfig:null,hostProxy:undefined,open:function M(d,a){E.call(this,true);if(this.updatePopupConfig){this.updatePopupConfig(a,d);}else{P.forEach(a,function(g,f){this.set(f,g);},this);}var b="popup-mid-render";this.set("opener",d);if(!this.hasRendered){var e=this.visible;this.visible=false;this.render();W.addClass(this.domNode,b);this.set("visible",e);}if(this.nudge){this.domNode.style.top="-10000px";}J.call(this,true);this.set("visible",true);if(this.lockIWForScroll){Z.call(this,this.opener,true);}if(a&&a.lockIW){K.call(this,a.lockIW,true);}if(this.nudge){this.nudge();}this.adjustCornersForPopupOverflow();this.onOpen();W.removeClass(this.domNode,b);},adjustCornersForPopupOverflow:function V(){var o=this.popupConfig;if(!o){return false;}var AM=(o.includeScroll!==undefined)?o.includeScroll:true;var r=o.position||C.position(o.anchorElement||o.hostElement,AM);if(!o.isHostedWithin){var AC=this.hostProxy,u=this.hostProxy=document.createElement("div");document.body.appendChild(u);u.appendChild(this.domNode);if(AC){AC.parentNode.removeChild(AC);}var f=u.style,w={x:"left",y:"top",w:"width"};u.className=o.hostProxyCssClass;f.position="absolute";f.background="none";f.height="0";L.forEach(["x","y","w"],function(AP){var AO=r[AP];if(Y(AO)){f[w[AP]]=AO+F;}});}var AJ=o.ENUM_CORNERS,AA=AJ.BOTTOM_LEFT,k=AJ.BOTTOM_RIGHT,j=AJ.TOP_RIGHT,AF=AJ.TOP_LEFT;var AG=U(o,C.position(document.body),r,C.position(this.domNode)),AB=AG.right,s=AG.bottom,e=AG.left,z=AG.top,AE=o.alignment,t=AE.popup,AN=AE.host,h=t,d=AN;if(AB||e){if(I(d)){d=Q(d)?j:k;}else{if(X(d)){d=Q(d)?AF:AA;}}if(AB&&I(h)){h=Q(h)?j:k;}else{if(e&&X(h)){h=Q(h)?AF:AA;}}}if(s||z){if(I(d)){d=Q(d)?AA:AF;}else{if(X(d)){d=Q(d)?k:j;}}if(s&&Q(h)){h=I(h)?AA:k;}else{if(z&&N(h)){h=I(h)?AF:j;}}}if(z||AB||s||e){if(B){console.log("Overflow directions: "+JSON.stringify(AG));}this._orgalgn={host:AN,popup:t};o.setAlignment(d,h);}if(!o.isHostedWithin){if(Y(r.y)&&Y(r.h)){this.hostProxy.style.top=(r.y+(N(h)?(o.alignWithAnchor===true?r.h:0):(o.alignWithAnchor===true?0:r.h)))+F;}}var AD=N(d),AI=X(d),AH=N(h),q=X(h),l="auto",b="100%",a="0";var x=l,AK=l,p=l,g=l;if(AH){p=AD?a:b;}else{x=AD?b:a;}if(q){AK=AI?a:b;}else{g=AI?b:a;}var AL=this.domNode.style;AL.top=x;AL.right=AK;AL.bottom=p;AL.left=g;return true;},close:function O(b){if(this.onClose){this.onClose(b);}J.call(this,false);if(this.lockIWForScroll){Z.call(this,this.opener,false);}this.set("visible",false);this.set("opener",null);if(this.lockIW){K.call(this,this.lockIW,false);}E.call(this,false);var a=this._orgalgn;if(a){this.popupConfig.setAlignment(a.host,a.popup);}},buildRendering:function D(){var a=this._super();if(a){if(!this.parent&&!this.domNode.parentElement){document.body.appendChild(this.domNode);}}return a;},unrender:function S(a){if(this.popupConfig&&!this.popupConfig.isHostedWithin&&this.hostProxy){document.body.removeChild(this.hostProxy);delete this.hostProxy;}this._super(a);}};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.StringBuffer","mstrmojo.ResSetLink");var j=1,S=2;var E=2,K=4,D=5;var V=1,N=4;var g=mstrmojo.array;function H(k,l){return k[((l===j)?"row":"col")];}function B(k,o){var l=o.lm;return l&&l[k.mix||0];}function b(l,s,AB){var x=new mstrmojo.ResSetLink({mid:this.getMessageId(),srct:2,aopam:s.daMode});var t=s.ans,AA=t&&t.length;if(AA){var u=x.prms=[],o=0;for(o=0;o<AA;o++){var AE=t[o];var p=AE.pid,r=parseInt(AE.m,10),AD={id:p,am:r,pt:AE.pt};u.push(AD);if(AE.po){AD.orid=AE.po.did;AD.ortp=AE.po.t;}switch(r){case x.DO_NOT_ANSWER:case x.CLOSE:case x.USE_DEFAULT_ANSWER:case x.SAME_PROMPT:break;case x.STATIC:var k=AE.es,AC=(k&&k.length)||0,w;AD.pa={es:[]};for(w=AC-1;w>=0;--w){var q=k[w];AD.pa.es.push({ei:q.id,disp_n:q.n,emt:1});}break;case x.DYNAMIC:case x.ALL_VALID_UNITS:case x.CURRENT_UNIT:case x.DYNAMIC_OR_SAME_PROMPT:if(AB.els){A.call(this,AE,AB,AD,r,x);}else{J.call(this,AE,AB,AD,r,x);}break;}}}return x;}function A(t,l,k,s,r){var q=t.dunits,o=l.els,p=k.pa={};g.forEach(o,function(u){if(g.find(q,"id",u.id)>=0){if(s!==r.DYNAMIC&&s!==r.DYNAMIC_OR_SAME_PROMPT){p.a={id:u.id,n:u.disp_n,dispForms:u.dfi};}if(t.pt===1){p.v=u.v;}else{p.es=[];p.es.push({ei:u.ei,emt:u.emt,disp_n:u.disp_n});}}});}function J(AB,w,AA,q,s,r){var t=AB.dunits;if(t&&t.length&&w){var u=AA.pa={};var p=w,o=(w.mix!==undefined)&&(w._lp||w._tp);if(o){p=w._lp||w._tp;}var l=parseInt(p.axis,10);while(p){var x=this.getPTitle(p,l);if(x&&g.find(t,"id",x.id)>=0){if(q!==s.DYNAMIC&&q!==s.DYNAMIC_OR_SAME_PROMPT){u.a={id:x.id,n:x.n,dispForms:x.dfi};}if(AB.pt===1){u.v=p.v;break;}else{var k=p._e.id,z=p._e.n;u.es=[];u.es.push({ei:k,emt:1,disp_n:z});}if(q===s.CURRENT_UNIT){break;}}p=this.getPCellParentNode(p,l);if(o&&!p&&l===j){l=S;p=w._tp;}}}}function Q(o){var l=this.getCellTitleInfo(o[0]),q=[],s=function(t){if(t){if(mstrApp.useBinaryFormat){if(t._e){q.push(t.axis+"A"+(t.ui+1)+"A"+t._e.id);}s(t._p);}else{q.push(t.axis+"A"+(t.ui+1)+"A"+t.o);}}},p,k;if(!l.isSrcTitle){for(p=0,k=o.length;p<k;p++){var r=o[p];if(r.mix!==undefined&&(r._lp||r._tp)){s(r._lp);s(r._tp);}else{s(r);}}}return(mstrApp.useBinaryFormat)?q:q.join(",");}mstrmojo.XtabModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.XtabModel",getMessageId:function R(){return this.data.mid;},getCellTitleInfo:function d(l,q){var o=q?q.gts:this.data.gts;var p=null;if(l&&l.mix===undefined){p=H(o,l.axis)[l.tui||l.ui];}else{var k=function(t){var r=(t&&t.length)||0,s;for(s=r-1;s>=0;--s){if(parseInt(t[s].otp,10)===-1){return t[s];}}return null;};p=k(o.col)||k(o.row);}return{isSrcTitle:!!l&&(l.o===undefined)&&!((l.mix!==undefined)&&(l._lp||l._tp)),title:p};},getCellInfo:function I(l){var k=this.getCellTitleInfo(l),o={isTitle:false,isHeader:false,isMetric:false};if(l&&(l.hasOwnProperty("mix")||l.otp===-1)){o.isMetric=true;if(l._e){o.isHeader=true;}}if(k.isSrcTitle){o.isTitle=true;}return o;},getCellLinksInfo:function f(l,o){if(!o){var k=this.getCellTitleInfo(l);o=k&&k.title;}return B(l,o);},getAllDrillPathsForCell:function Z(l,o){if(!o){var k=this.getCellTitleInfo(l);o=k&&k.title;}return o.dp||[];},getCellDrillsInfo:function G(k,o){var l=this.getAllDrillPathsForCell(k,o);return l&&l[k.mix||0];},getLinkDrillAction:function O(k){return this.getActionObject(k);},getAction:function U(k){return this.getActionObject(k);},getActionObject:function L(l){var k=l[0]&&l[0].at,o=null;if(k){if((k&N)>0){o={h:"onLink",a:this.getLinkAction(l[0])};}else{if((k&V)>0){o={h:"onDrill",a:this.getDrillAction(l)};}}}return o;},getSortAction:function F(AC,u){var q=this.getCellTitleInfo(AC),z=q.title,AB=this.data.gts[((AC.axis===j)?"row":"col")+"SubPos"],l=[],p=z.axis,s,x,w,AA,AD;u=(u===null||u===undefined)?!(AC&&AC.so):u;if(q.isSrcTitle){s=E;x=z.id;w=z.otp;AA=z.fid;}else{s=K;w=4;p=g.find(this.data.gts.col,"otp",-1)>-1?j:S;AB=this.data.gts.rowSubPos;AD=z.stt;var t,k;do{t=AC._e;if(t){if(t.oid){x=t.oid;}else{k=t.id.replace(/;/g,"\\;");l.push(k);}}AC=AC._p;}while(AC);}var r={sortType:s,axis:p,isAsc:u,unitID:x,unitType:w,elementList:l.join(";"),subTotalsPos:AB};if(x){r.unitID=x;}if(AA){r.formId=AA;}if(AD){r.sortType=D;r.stt=AD;}var o;if((s===K)||(s===D)){o=["","",r.elementList||"",r.axis];}else{o=[r.formId,"21","",r.axis];}o=[r.unitType,r.unitID].concat(o);r.sortKey=o.join("!");return r;},getSubTotalsPos:function X(){var k=this.data.gts;if(k){return[k.rowSubPos,k.colSubPos];}return[0,0];},getPivotAction:function M(AB,o){var z=false,AC=AB.hasOwnProperty("mix"),k=AC?null:AB.axis,AA=(AC?AB.idx:AB.ui)+1,l=(AB.otp===-1);if(!isNaN(o)){k=parseInt(o,10);AA=1;if(AC){AC=false;l=true;}}else{var s=(o==="u"||o==="l"||o==="b");if(!AC){var r=H(this.data.gts,k),q=0,p={},u=false;mstrmojo.array.forEach(r,function(AD){if(p[AD.id]){p[AD.id].frm++;}else{q++;p[AD.id]={pos:q,frm:1};if(AD.id===AB.id){u=true;}else{if(u){return false;}}}});AA=p[AB.id].pos;var w=AB.fix;if(w){if(!s||w>1){if(s||w!==p[AB.id].frm){AA=w;z=true;}}}}if(o==="b"){AA=1;}else{AA=AA+(s?-1:1);}}var t={act:"pivot",unitPos:AA};if(z){t.attFormId=AB.fid;}else{if(!AC){t.axis=k;}}if(!l){var x=AC?AB._e:AB;if(!z){t.unitType=x.otp;}t.unitId=AC?x.oid:AB.id;}return t;},isPvtButtonVisible:function e(t,o){var q=t.axis,p=H(this.data.gts,q),s=t.ui,l=t.hasOwnProperty("mix");if(o==="b"&&s===0){return false;}if(!isNaN(o)){if(parseInt(o,10)===q){return false;}if(l){return !!p[t.ui]._hid;}return true;}var r=p[t.ui].es,k=l?r.length:p.length;if(k===1){return false;}if(q===(l?S:j)){if(o==="u"||o==="d"){return false;}}else{if(o==="l"||o==="r"){return false;}}if(l?t._e===r[0]:s===0){if(o==="l"||o==="u"){return false;}}if(l?t._e===r[k-1]:s===k-1){if(o==="r"||o==="d"){return false;}}return true;},getDrillAction:function C(k,o){var l=o||this.getCellDrillsInfo(k[0]);return{srcMsgId:this.data.mid,sliceId:this.xtab.sid,isWithin:l.within,drillPathKey:l.k,drillPathIndex:l.dpi,drillElements:Q.call(this,k)};},isVis:function a(){if(this.xtab){return this.xtab.isVis&&this.xtab.isVis();}else{var k=this.controller&&this.controller.view;if(k&&k.isVis){return k.isVis();}}return false;},getPTitle:function h(o,l){var k;if(this.isVis()){k=o.titleInfo;}else{k=H(this.data.gts,l)[o.tui];}return k;},getPCellParentNode:function P(o,l){var k;if(this.isVis()){k=(l==j)?o._lp:o._tp;}else{k=o._p;}return k;},getLinkAction:function T(o,l){var k,p;if(this.isVis()){o=o.node;p=o.titleInfo;}else{k=this.getCellTitleInfo(o);p=k.title;}return this.getLinkActionImpl(o,p,l);},getLinkActionImpl:function Y(AA,u,x){var o=B(AA,u),w=o&&o.links,AB=(o&&o.onw)?"_blank":"";if(x===null||x===undefined){x=(o&&o.di)||0;}var r=w&&w[x];if(!r){return null;}var p={linkInfo:r,linkTarget:AB};var k=r.url;if(k){var q="&CurrentElement";if(AA&&u&&k.indexOf(q)>-1){k=k.replace(q,AA._e.id);}p.url=k;}else{var s=r.target,z,l;switch(parseInt(s&&s.t,10)){case 55:if(parseInt(s.st,10)===14081){if(s.dvm&(8192|2048)&&!((s.dvm&2048&&mstrApp.features["run-vi-flash"]))){z=3140;if(mstrmojo.dom.isIE6||mstrmojo.dom.isIE7||mstrmojo.dom.isIE8){mstrmojo.alert(mstrmojo.desc(12187,"To work with HTML5 dashboards, please turn off your browser Compatibility View or update your browser to one of the following browser versions: Chrome, Firefox, Safari, Internet Explorer 9 or above."));return null;}}else{z=2048001;}l="objectID";}else{z=32001;l="documentID";}break;case 3:z=4001;l="reportID";p.reportViewMode=((parseInt(s.st,10)===769)?2:1);break;default:return null;}p.evt=z;p[l]=s.did;p.srcMsgId=this.getMessageId();var t=b.call(this,o,r,AA);if(t){p.link=t;}return p;}},getDownloadAction:function W(p,l,r,o,q,k){return{xtabId:q,rowPosition:p,maxRows:l,colPosition:r,maxColumns:o,memo:k};}});}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,g=mstrmojo.array,f=mstrmojo.boxmodel,d=mstrmojo.dom;function A(k,o,j){var l=k.listSelector;if(l){l[o](k,k.itemsContainerNode,j);}}function L(k,j){var l=k.lastPagePos;if(!l||l.dragId!==j){l=f.offset(k.itemsContainerNode);l.dragId=j;k.lastPagePos=l;var o=k.scrollboxNode;k.lastScrollPos={left:o.scrollLeft,top:o.scrollTop,width:o.clientWidth,height:o.clientHeight};}}function O(o,r,k){var l=r&&r.node;if(l===o.dropCueNode||l===o.dropCueNode.firstChild){return o.dropCuePos;}var p=o.listMapper;var j=p&&p.whereDrop(o,o.itemsContainerNode,l,r.pos,{left:o.lastPagePos.left-o.lastScrollPos.left,top:o.lastPagePos.top-o.lastScrollPos.top,width:o.lastScrollPos.width,height:o.lastScrollPos.height});var q=o.dropCuePos;return((k!==false)&&q&&j&&(q.idx===j.idx)&&(q.left===j.left)&&(q.top===j.top))?q:j;}var h="attachEventListener";function D(k,j){if(k.makeObservable){j=j||[];if(!j[h]){mstrmojo.hash.make(j,k.itemsScriptClass||mstrmojo.Arr);}}return j;}function H(k,j){if(j&&j[h]){k._sub_its=j;k._sub_add=j[h]("add",k.id,"preadd");k._sub_rmv=j[h]("remove",k.id,"preremove");}}function G(j){if(j._sub_its){var k=mstrmojo.publisher;k.unsubscribe(j._sub_add);k.unsubscribe(j._sub_rmv);delete j._sub_add;delete j._sub_rmv;delete j._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var k=this.dropCueNode,j=k&&k.style;if(!j){return ;}var o=this.dropCuePos,l=!!o;if(l){j.left=o.left+"px";j.top=o.top+"px";}j.display=l?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(p){this._super(p);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,q=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||q){this.initSelections(l,j,k,q);}if(this.postInitItems){this.postInitItems();}},initItems:function I(j){return D(this,j);},preBuildRendering:function W(){var p=this.listBuilder,s=p.newContext(this);this.ctxtBuilder=s;var k=this.markupSlots,o=!!(this.renderOnScroll&&this.renderBlockSize&&k&&k.scrollboxNode),l=this.items,j=(l&&l.length)||0,q=o?this.firstRenderBlockSize:j,r=o?this.firstRenderBlockSize:0;this._eros=o;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(l,p,this,s,q,r).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var p=this.listMapper;if(p&&p.postBuildRendering){p.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var r=this.id;this._cb_scroll=function(){var s=mstrmojo.all[r];s.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var l=0,k=["itemsEffect","scrollEffect"],j=k.length;l<j;l++){var q=k[l],o=this[q];if(o&&o.constructor===Object){o=mstrmojo.insert(mstrmojo.hash.clone(o));o.widget=this;this[q]=o;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(o){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var k=0,l=["itemsEffect","scrollEffect"],j=l.length;k<j;k++){var p=this[l[k]];if(p&&p.isPlaying){p.cancel();}}this._super(o);},pauseScrollRendering:function P(l,j,k){if(l!==false){l=true;}if(this.paused===!!l){return ;}this.paused=!!l;if(l){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(j,k);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var j=this;this._fillTmr=self.setTimeout(function(){j.fill();j=null;},50);}}if(this._super){this._super();}},fill:function b(j,p){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var q=(this.items&&this.items.length)||0;if(!q){if(p){p();}}else{var l=this.scrollboxNode,r=this.itemsContainerNode,o=mstrmojo.boxmodel.offset(r,l),t=this.listMapper,s=t.findScrollRange(r,q,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||l.scrollTop,l.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||l.scrollLeft,l.clientWidth,o.left,o.top);if(this.fillAt(s.start,s.end)){if(j){j();}var k=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[k].fill(j,p);},100);}else{if(p){p();}}}},fillAt:function M(l,k){var j=this.listMapper;if(j){return j.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,l,k,this.renderBlockSize);}else{return false;}},add:function R(k,j){if(!k||!k.length){return -1;}var l=this.items;if(j==null){j=a.min(this.selectedIndices,false,true);if(j!==null&&j!==undefined){j++;}}if(j==null||j===-1){j=(l&&l.length)||0;}if(l&&l.add){l.add(k,j);}else{this.set("items",l?g.insert(l.concat(),j,k):k);}return j;},preadd:function B(l){if(this.hasRendered){var q=this.listMapper;if(q){q.onadd(this,this.itemsContainerNode,this.ctxtBuilder,l);}var p=this.listBuilder;if(p){p.onadd(this,this.ctxtBuilder,l);}var k=this.listSelector;if(k){k.onadd(this,l);}if(this._eros){this.onscroll();}else{var o=l.index,j=l.value.length;this.fillAt(o,o+j-1);}}if(this.onadd){this.onadd(l);}if(this._super){this._super(l);}},remove:function U(j){if(j==null){return -1;}if(j.constructor!==Array){return this._remove(j);}var l=this.items;if(l){var k;if(l.remove){for(k=j.length-1;k>-1;k--){l.remove(j[k],1);}}else{l=l.concat();for(k=j.length-1;k>-1;k--){l.splice(j[k],1);}this.set("items",l);}return j[0];}return -1;},_remove:function U(l){var k=this.items;if(!k||(l==null)){return -1;}var j;if(!isNaN(l)){j=l;}else{j=this.itemIndex(l);}if(j>-1){if(k.remove){k.remove(j,1);}else{k=k.concat();k.splice(j,1);this.set("items",k);}}return j;},duplicate:function Y(q,k,l){var o=this.items,j=-1;if(!o||(q==null)){return -1;}if(!isNaN(q)){if(k===null||k===undefined){k=q+1;}q=o[q];}else{if(k===null||k===undefined){k=this.itemIndex(q)+1;}}if(q){var p;p=a.copy(l,a.clone(q));j=this.add([p],k);}return j;},preremove:function N(k){if(this.hasRendered){var o=this.listMapper;if(o){o.onremove(this,this.itemsContainerNode,this.ctxtBuilder,k);}var l=this.listBuilder;if(l){l.onremove(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onremove(this,k);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(k);}if(this._super){this._super(k);}},move:function S(o,u){function s(x,w){x=parseInt(x,10);return w===1||(u>=x&&u<x+w);}var t=(this.items&&this.items.length)||0;if(u===-1||u==null||isNaN(u)){u=t;}else{u=Math.min(u,t);}var l,j,q,p;if(o.constructor===Array){j=o;q=o;p=(j&&j.length)||0;if(s(o[0],o.length)){return false;}l=g.get(this.items,o);}else{if(typeof (o)==="object"){l=[o];p=1;j=this.itemIndex(l[0]);q=[j];if(s(j,1)){return false;}}else{j=o;q=[o];p=1;if(s(j,1)){return false;}l=[this.items[j]];}}var r=0;for(var k=0;k<p;k++){if(q[k]<=u){u--;r++;}}if(r==q.length){u++;}if(l[0]!=null){this.remove(j);this.add(l,u);}return true;},itemIndex:function F(j){if(j==null){return -1;}var k=this.itemIdField;return k?g.find(this.items,k,j[k]):g.indexOf(this.items,j);},prechange:function T(l){if(this.hasRendered){var k=[this.listBuilder,this.listMapper];for(var p=0,j=k.length;p<j;p++){var q=k[p];if(q&&q.onchange){q.onchange(this,this.itemsContainerNode,this.ctxtBuilder,l);}}}},makeObservable:false,_set_items:function J(q,j){var p=this.items;j=this.initItems(j);this.items=j;if(p!==j){var o=this,l=function(){if(o.autoHide){o.set("visible",!!(j&&j.length));}o=null;},k=this.hasRendered;if(k){this.refresh(l);}else{l();}}return p!==j;},premousedown:function e(j){A(this,"premousedown",j);},premouseup:function Q(j){A(this,"premouseup",j);},scrollTo:function V(k){var j,l=this.listMapper;if(l&&l.toItem){if(!isNaN(k)){j=k;}else{j=this.itemIndex(k);}if(j>=0){l.toItem(this,j);}}},draggable:false,getDragData:function(p){L(this,p.id);var l=O(this,p.src),k=l&&l.idxActual;if((k>-1)&&this.selectedIndices[k]){var o=this.sortSelectedIndices(),j=g.get(this.items,o)||[];switch(j.length){case 1:return a.copy({html:j[0][this.itemDisplayField],index:o[0]},a.copy(j[0]));case 0:return null;default:return a.copy({html:j.length+" selections",indices:o},j);}}},dropZone:false,ondragenter:function(j){L(this,j.id);this.set("dropCuePos",O(this,j.tgt));},ondragover:function(j){this.set("dropCuePos",O(this,j.tgt));},ondragleave:function(j){this.set("dropCuePos",null);},isDragValid:function C(j){return j&&j.src&&j.src.data;},ondragstart:function(j){if(!(j&&j.src&&j.src.data)){return false;}},allowCopy:false,ondragend:function(o){var k=o&&o.tgt,j=k&&k.widget;if(j===this){}else{if(this.tree&&j&&j.tree===this.tree){if(!this.allowCopy||!d.ctrlKey(k.hWin,k.e)){var l=o.src&&o.src.data;if(l&&(l.indices||(l.index!==null))){this.remove(l.indices||l.index);}}}}},ondrop:function(u){var z=u&&u.src,t=z&&z.data;if(t){var l=O(this,u.tgt,false),w=l&&l.idx,o=(t&&t.constructor===Array),k=this.sortSelectedIndices();var q=this.items;w=Math.min(w,q&&q.length)||0;var x=true;if(z.widget===this){x=this.move(k,w);g.forEach(k,function(s){if(s<=w){w--;}});}else{this.add(o?t:[t],w);}if(x){var r=o?t.length:1,j={};for(var p=0;p<r;p++){j[w+p]=true;}this.set("selectedIndices",j);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocLine=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocLine",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocLine" title="{@tooltip}" style="{@domNodeCssText}"></div>',formatHandlers:{domNode:["RW","border-top","border-left","fx"]},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function B(C){if(this.thresholdId||C.data.tid){delete this.fmts;}this.thresholdId=C.data.tid;this.set("visible",!C.data.hidden);if(this._super){this._super(C);}},getFormats:function A(){var C=this._super();if(C&&parseInt(C.height,10)===0){C.height="1px";}return C;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocRoundRectangle=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocRoundRectangle",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocRoundRectangle" title="{@tooltip}" style="{@domNodeCssText}"><div class="mstrmojo-DocRoundRectangle-l1" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l2" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l3" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div style="{@rectNodeCssText}{@rectNodeGradCssText}"></div><div class="mstrmojo-DocRoundRectangle-l3" style="{@bCornersCssText}{@bCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l2" style="{@bCornersCssText}{@bCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l1" style="{@bCornersCssText}{@bCornersCssGradText}"></div></div>',markupSlots:{rectNode:function(){return this.domNode.childNodes[3];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},formatHandlers:{domNode:["top","left","width","z-index","fx"],rectNode:["height","background-color"],tCorners:["background-color"],bCorners:["background-color"]},update:function C(D){if(this.thresholdId||D.data.tid){delete this.fmts;}this.thresholdId=D.data.tid;this.set("visible",!D.data.hidden);},preBuildRendering:function B(){var F=this._super();var G=this.getFormats(),D=!!this.defn.topc,I=D?4:8,H="(\\d*px)",E=Math.max(parseInt(G.height,10)-I,0);if(G.height==="100%"){H="(100%)";E=this.parent.getHeight()-I;}this.rectNodeCssText=this.rectNodeCssText.replace(new RegExp("(.*height:)"+H+"(.*)"),"$1"+E+"px$3");if(D){this.bCornersCssText="display:none;";}return F;},formatGradient:function A(E,H){var F=mstrmojo.css.buildGradient(E.t,E.sc,E.ec);if(!F){return ;}var D=F.n+":"+F.v+";",G="background-color:";this.rectNodeGradCssText=D;if(E.t===0){this.tCornersCssGradText=G+E.sc+";";this.bCornersCssGradText=G+E.ec+";";}else{this.tCornersCssGradText=this.bCornersCssGradText=D;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.Widget");var R=["(",")","{","}","-","+","*","/","<",">","|","~",","],G={" ":true,"@":true},Q=null;function J(V){if(!Q){Q={};var U,T;for(U=0,T=R.length;U<T;U++){Q[R[U]]=true;}}return Q.hasOwnProperty(V);}function S(V){if(!V){return false;}var T=V.length,U,W;for(U=0;U<T;U++){W=V.charAt(U);if(J(W)||G[W]){return true;}}return false;}function A(T){return S(T)?"["+T+"]":T;}var M={8:true,9:true,10:true};var C=function(U,T){return M[U]&&!/^\".*\"$/.test(T)?'"'+T+'"':T;};var D=function(U,T,V){var W=typeof V==="undefined"?true:M[V];return U.tp===261&&T.length>=2&&W?(/^\s+$/.test(T.substr(1,T.length-2))?T:T.substr(1,T.length-2)):T;};mstrmojo.ME.MetricToken=mstrmojo.declare(mstrmojo.Widget,null,{data:null,markupString:'<span id={@id} class="mstrmojo-token {@cssClass}"></span>',active:false,markupMethods:{ondataChange:function(){var U=this.data,T=mstrmojo.string.encodeHtmlString(String(U.v));if(U.v===","){this.domNode.innerHTML=T+"&nbsp;";}else{if(U.tp===259&&U.v==="Desc"){this.domNode.innerHTML="&nbsp;"+T;}else{this.domNode.innerHTML=T;}}mstrmojo.css.toggleClass(this.domNode,["mstr"],this.isMstrO());mstrmojo.css.toggleClass(this.domNode,["nfn"],!this.isFunction());mstrmojo.css.toggleClass(this.domNode,["invalid"],U.sta===-1);},onactiveChange:function(){mstrmojo.css.toggleClass(this.domNode,["active"],this.active);}},isMstrO:function P(){return !!this.data.oi||!!this.data.rfd;},isFunction:function B(){return this.isMstrO()&&(this.data.oi&&this.data.oi.t==11);},brackets:A,length:function E(){return this.data.v.toString().length;},isDelimiter:function O(){return this.data.isDelimiter||(this.length()===1&&J(this.data.v));},split2Tokens:function H(W){var V=this.data,U=V&&V.v.toString(),X=U.substring(0,W),T=U.substring(W);return[{v:X,isNew:true},{v:T,isNew:true}];},mergeTo:function I(U){var W=this.data,V=W&&W.v.toString(),T=U.data.v.toString();return{v:V+T,isNew:true};},brackets:A,setItemInfo:function N(T){var U=this.data;U.v=this.brackets(T.n);U.oi=T;U.sta=1;U.isNew=true;this.set("data",U);this.paint();},spliceContent:function K(Z,X,U){var Y=this.data,W=Y&&Y.v.toString(),a=W.substring(0,Z);X=(X===null||X===undefined)?(W.length-Z):X;var T=W.substring(Z+X),V=a+(U||"")+T;Y.v=V;Y.isNew=true;Y.sta=1;Y.ift=(this.isAttributeToken()||Y.at)&&(Y.v.indexOf("@")>=0);if(Y.ift){Y.at=Y.oi||Y.at;}else{delete Y.at;}delete Y.oi;delete Y.exv;delete Y.extp;delete Y.tp;this.set("data",Y);this.paint();},isAttributeToken:function F(){return this.data&&this.data.oi&&this.data.oi.t===12;},setFormInfo:function L(U){var V=this.data,T=V.oi||V.at;V.v=this.brackets(T.n)+"@"+this.brackets(U.n);V.exv=U.did;V.extp=8;V.sta=1;V.isNew=true;V.oi=V.at;delete V.at;this.set("data",V);this.paint();}});mstrmojo.ME.MetricToken.isDelimiter=J;mstrmojo.ME.MetricToken.brackets=A;mstrmojo.ME.MetricToken.quotes=C;mstrmojo.ME.MetricToken.unquotes=D;mstrmojo.ME.MetricToken.QUOTABLE_DATATYPES=M;mstrmojo.ME.MetricToken.argDelimiter={".":",",",":";"}[mstrConfig&&mstrConfig.decimalSep]||",";})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");var E=mstrmojo.Widget;mstrmojo.ui._IsPulldown=mstrmojo.provide("mstrmojo.ui._IsPulldown",{scriptClass:"mstrmojo.ui._IsPulldown",markupString:'<div id="{@id}" style="{@cssText}" class="mstrmojo-ui-Pulldown {@cssClass}" mstrAttach:mousedown,click><div class="mstrmojo-ui-Pulldown-text {@cssTextClass}" title="{@title}" style="{@labelCssText}">{@value}</div><div class="container"></div></div>',markupSlots:{selectedNode:function D(){return this.domNode.firstChild;},containerNode:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:E.visibleMarkupMethod,onheightChange:E.heightMarkupMethod,onwidthChange:E.widthMarkupMethod,onvalueChange:function F(){this.selectedNode.innerHTML=this.value||"";},onenabledChange:mstrmojo.Widget.enabledMarkupMethod},getPopupList:mstrmojo.emptyFn,anchorSlot:"selectedNode",postBuildRendering:function B(){this._super();this.getPopupList().set("items",this.items);var G=this.selectedIndex,H=this.selectedIndices;if(G!==undefined){this.set("selectedIndex",G);}if(H!==undefined){this.set("selectedIndices",mstrmojo.hash.copy(H||{}));}},onitemsChange:function C(){var G=this.getPopupList();if(G){G.set("items",this.items);}},onPopupWidgetOpened:function(){var G=this.getPopupList();if(G&&(!G.items||G.items.length===0)){G.close();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css");var C=mstrmojo.css,E=mstrmojo.desc(14058,"Show Details"),A=mstrmojo.desc(14059,"Hide Details"),F=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div>'+F+'</div><div class="toggle-details-link" >'+E+'</div><div class="error-details">{@en@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];}},markupMethods:{onshowDetailsChange:function(){var H=this.showDetails;this.toggleDetailsNode.innerHTML=H?A:E;C.toggleClass(this.domNode,"show-details",H);this.updateScrollbars();}},shortDesc:undefined,longDesc:undefined,showDetails:false,init:function G(H){this._super(H);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function B(H){var J=H.getTarget(),I,K=this.longDesc;if(J===this.contactNode){I="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(K?("&body="+encodeURI("Detail:\r\n"+K)):"");mstrApp.openPage(I,"_self");}else{if(J===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);}}},setupScrollNodes:function D(){this.scrollNode=this.scrollNode;}});})();(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.css","mstrmojo.string","mstrmojo._IsExprNode","mstrmojo._HasPopup","mstrmojo.Widget");var O=mstrmojo.dom,B=mstrmojo.css,E=mstrmojo.string.htmlAngles,M=mstrmojo.expr,N=M.ET,K=M.FN,A=M.BRANCH_FNS[K.NOT],D={};D[K.BETWEEN]=1;D[K.NOT_BETWEEN]=1;var C={"*":function(Q,P){return Q?('<span class="mstrmojo-unknown">'+(E(Q.n||Q.xml)||"...")+"</span>"):null;}};function H(Q,P,S,R){return S&&((R?'<span class="mstrmojo-ListIcon t'+R+'"></span>':"")+'<span class="mstrmojo-text mstrmojo-embedobj">'+E(S)+"</span>");}C[N.R]=function(Q,P){return H(Q,P,Q.r&&Q.r.n,Q.r&&Q.r.t);};C[N.F]=function(Q,P){return H(Q,P,Q.f&&Q.f.n,Q.f&&Q.f.t);};C[N.XML]=function(Q,P){return H(Q,P,Q.n||Q.p&&Q.p.n||Q.xml,Q.p&&Q.p.t);};C[N.AE]=function(V,S){var R=[];if(V&&V.a&&V.a.n){R.push('<span class="mstrmojo-text mstrmojo-attr">'+E(V.a.n)+"</span>");if(V.fn!==M.FN.IN_LIST){R.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(V.et,V.fn,V.fnt))+"</span>");}var U=V.es,P=U&&U.length||0;if(P){R.push('<span class="mstrmojo-elems">');var Q=R.length;for(var T=0;T<P;T++){R[Q++]='<span class="mstrmojo-text mstrmojo-elem">';R[Q++]=E(U[T].n);if(T<P-1){R[Q++]=", ";}R[Q++]="</span>";}R[Q++]="</span>";}else{R.push('<span class="mstrmojo-text mstrmojo-emptyelems">(Empty)</span>');}}return R.join("");};C[N.AQ]=function(W,X){var T=[];if(W&&W.a&&W.a.n){T.push('<span class="mstrmojo-text mstrmojo-attr">'+E(W.a.n)+"</span>");if(W.fm&&W.fm.n){T.push('<span class="mstrmojo-text mstrmojo-form">'+E(W.fm.n)+"</span>");if(W.fn!=null){T.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(W.et,W.fn,W.fnt,W.fm.dtp))+"</span>");var P=M.fnCstCount(W.fn,W.fnt);if(W.et===N.AC){if(P>=1){if(W.a2&&W.a2.n){T.push('<span class="mstrmojo-text mstrmojo-attr2">'+E(W.a2.n)+"</span>");if(W.fm2&&W.fm2.n){T.push('<span class="mstrmojo-text mstrmojo-form2">'+E(W.fm2.n)+"</span>");}}if(P>1){T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");if(W.a3&&W.a3.n){T.push('<span class="mstrmojo-text mstrmojo-attr3">'+E(W.a3.n)+"</span>");if(W.fm3&&W.fm3.n){T.push('<span class="mstrmojo-text mstrmojo-form3">'+E(W.fm3.n)+"</span>");}}}}}else{if(W.et===N.AL){var U=W.cs,Y=[];for(var R=0,V=U.length;R<V;R++){Y.push(U[R].v);}T.push('<span class="mstrmojo-text mstrmojo-c1">'+Y.join(mstrConfig.listSep)+"</span>");}else{if(P>=1){var U=W.cs,S=U&&U[0];T.push('<span class="mstrmojo-text mstrmojo-c1">'+E(S&&S.p&&S.p.n||S&&S.v)+"</span>");if(P>1){var Q=U&&U[1];T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");T.push('<span class="mstrmojo-text mstrmojo-c1">'+E(Q&&Q.p&&Q.p.n||Q&&Q.v)+"</span>");}}}}}}}return T.join("");};C[N.AC]=C[N.AQ];C[N.AL]=C[N.AQ];C[N.MQ]=function(g,j){var f=[],Z=g&&g.m,l=Z&&Z.n;if(l){var Q=g.fnt,U=M.FNT.PER,e=M.FNT.RANK;l=Q===U?mstrmojo.desc(2787,"Percentage of ##").replace("##",l):Q===e?mstrmojo.desc(2788,"Rank of ##").replace("##",l):l;f.push('<span class="mstrmojo-text mstrmojo-metric">'+E(l)+"</span>");if(g.fn!=null){f.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(g.et,g.fn,Q,M.DTP.REAL))+"</span>");var X=M.fnCstCount(g.fn,Q);if(g.et==M.ET.MC){if(X>=1){var k=(g.m2&&g.m2.n)||"?";f.push('<span class="mstrmojo-text mstrmojo-m2">'+E(k)+"</span>");if(X>1){f.push('<span class="mstrmojo-text mstrmojo-btwn">'+j.betweenText+"</span>");var S=(g.m3&&g.m3.n)||"?";f.push('<span class="mstrmojo-text mstrmojo-m3">'+E(S)+"</span>");}}}else{if(X>=1){var R=g.cs,a=R&&R[0];var P=function(h){var d=h.v;if(g.fnt==U){if(d.replace){h.v=d.replace(/%$/,"");}d=h.v+"%";}return d;};f.push('<span class="mstrmojo-text mstrmojo-c1">'+E(a&&a.p&&a.p.n||a&&a.v&&P(a))+"</span>");if(X>1){var Y=R&&R[1];f.push('<span class="mstrmojo-text mstrmojo-btwn">'+j.betweenText+"</span>");f.push('<span class="mstrmojo-text mstrmojo-c2">'+E(Y&&Y.p&&Y.p.n||Y&&Y.v&&P(Y))+"</span>");}}}var b=g.dmy&&g.dmy.uts,W=b&&b.length;if(W){f.push('<span class="mstrmojo-text mstrmojo-at">'+j.atText+"</span>");f.push('<span class="mstrmojo-dmy">');for(var V=0;V<W;V++){var T=b[V];f.push('<span class="mstrmojo-text mstrmojo-dmyunit">');f.push(E(T.utgt?T.utgt.n:T.n));if(V<W-1){f.push(",");}f.push("</span>");}f.push("</span>");}}}return f.join("");};C[N.MC]=C[N.MQ];function G(P){var Q=P.data;if(Q.not){return'<span class="mstrmojo-text mstrmojo-not">'+A+"</span>";}return"";}function F(P){var R=P.data,Q=C[R&&R.et]||C["*"];return G(P)+((Q&&Q(R,P))||('<span class="mstrmojo-text">'+P.emptyText+"</span>"));}mstrmojo.ConditionNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.ConditionNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){B.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},oneditableChange:function(){B.toggleClass(this.textNode,["editable"],this.editable);},onselectedChange:function(){B.toggleClass(this.condNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=F(this);this.textPostfixNode.innerHTML=this.getConditionTextPostfix();}},betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),init:function L(P){this._super(P);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());},getConditionTextPostfix:function(){return"";},del:function J(){var P=this.parent;if(P&&P.remove&&this.data){P.remove(this.data);}},isEmpty:function(){var Q=this.data,P=Q&&Q.et,R=P&&mstrmojo.expr.ET2TGT[P];return !(R&&Q[R]);},isSelectableArea:function(P){return O.contains(this.condNode,P,true);},preclick:function I(P){var R=null,Q=O.eventTarget(P.hWin,P.e);if(O.contains(this.prefixNode,Q,true)){R="andor";}else{if(O.contains(this.textNode,Q,true)){R="condition";}else{if(O.contains(this.textPostfixNode,Q,true)){O.stopPropogation(P.hWin,P.e);return false;}}}P.part=R;}});mstrmojo.ConditionNode.getFunctionNode=F;})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.string");function C(H,D,E){var K=[];var G=H.optionRenderer,I=G&&G.render;if(I&&typeof I==="function"){var L=H.options,J=Math.min(E,((L&&L.length)||0)),F;for(F=D;F<J;F++){K.push(I(L[F],F,H));}}return K.join("");}mstrmojo.DropDownList=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DropDownList",title:"",selectCssClass:"",tooltip:"",cssDisplay:"inline",value:"",unset:false,options:null,optionValueField:"v",optionNameField:"n",idx:-1,renderedOptions:"",markupString:'<span id="{@id}"  class="mstrmojo-DropDownList {@cssClass}">{@title}<select id="{@id}_select" class="mstrmojo-DropDownList-select {@selectCssClass}"  style="{@cssText}" title="{@tooltip}"onchange="mstrmojo.all[\'{@id}\'].set(\'selected\', this.options[this.selectedIndex].value);">{@renderedOptions}</select><div class = "strikeoutContainer"></div></span>',markupSlots:{selectNode:function(){return this.domNode.getElementsByTagName("select")[0];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onidxChange:function(){var D=this.domNode.getElementsByTagName("select");if(D&&D.length){D[0].selectedIndex=this.idx;}},onvalueChange:function(){var I=this.selectNode,G=I.options,F=this.value,E,H;for(H=0;H<G.length;H++){var D=G[H].value.toString()===F;if(D){E=H;if(F!==""){mstrmojo.css.toggleClass(G[H],"selected",D);}break;}}if(I.length>0&&E>0&&this.unset){if(this.options[0].v==="-1"){I.remove(0);E--;}this.unset=false;}this.set("idx",E);},onwidthChange:function(){var D=this.width;if(D>=0){this.selectNode.style.width=D+"px";}}},_set_selected:function(G,D){var E=this.selectNode,F=this[G]!==D;this[G]=D;if(E){this.set("value",D);}return F;},preBuildRendering:function A(){var F=this;if(F.unset){F.idx=0;}var E=F.options,D=(E&&E.length)||0;if(D){F.renderedOptions=C(F,0,D);}return this._super();},optionRenderer:{render:function(E,D,F){return mstrmojo.string.apply(F.getOptionMarkup(E),F.getOptionProps(E,D));}},getOptionMarkup:function(D){return'<option value="{@en@v}" class="{@cls}" style="{@style}" {@sel}>{@en@n}</option>';},getOptionProps:function B(F,D){var G=this,H=F[G.optionValueField],E=D===parseInt(G.idx,10);G.selected=G.value=E?H.toString():G.value;return{cls:E?"selected":"",v:H===undefined?"":H,n:F[G.optionNameField]||"",style:"",sel:E?"selected":""};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string");var B=mstrmojo.string;mstrmojo.Label=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Label",allowHTML:false,text:"",title:"",markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" title="{@title} "mstrAttach:click></div>',markupMethods:{ontitleChange:function(){this.domNode.title=this.title;},ontextChange:function(){var C=this.text;C=B.isEmpty(C)?"":C.toString();this.domNode.innerHTML=this.allowHTML?C:B.encodeHtmlString(C,true);},oncssTextChange:mstrmojo.Widget.cssTextMarkupMethod,onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Widget.enabledMarkupMethod},autoHide:false,_set_text:function A(E,C){if(this.autoHide){this.set("visible",(C!==null)&&(C!=="")&&(C!==undefined));}var D=this.text;this.text=C;return(D!==C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var C=mstrmojo.dom,B=mstrmojo.hash,E=mstrmojo.css;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",enabled:true,selected:false,markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:function(){E.toggleClass(this.domNode,"disabled",!this.enabled);},onselectedChange:function(){E.toggleClass(this.domNode,"selected",this.selected);},ontextChange:function(){this.textNode.innerHTML=this.text;},ontitleChange:function(){this.domNode.title=this.title;},onwidthChange:mstrmojo.Widget.widthMarkupMethod},oniconClassChange:function D(J){var K=this.domNode;if(this.hasRendered&&K){K.className=K.className.replace(J.valueWas,"")+" "+J.value;}},onclick:mstrmojo.emptyFn,ontouchend:function I(J){this.onclick(J);}});mstrmojo.Button.newIconButton=function H(L,O,M,J,N){var K={scriptClass:"mstrmojo.Button",title:L,cssClass:O,text:"",onclick:M};if(J){K.bindings=J;}B.copy(N,K);return K;};function F(M,N,J,P){var L=[];if(J){L.push(J);}var O=P&&P.cssClass;if(O){L.push(O);delete P.cssClass;}var K={scriptClass:"mstrmojo.Button",cssClass:L.join(" "),text:M};if(N){K.onclick=N;}return B.copy(P,K);}mstrmojo.Button.newInteractiveButton=function G(M,N,P,O){var L={glowClass:"glow"};if(P&&(C.isFF||C.isWK)){B.copy({onmousedown:function J(){E.applyShadow(this.domNode,0,0,10,P);},onmouseup:function K(){E.removeShadow(this.domNode);}},L);}return F(M,N,"mstrmojo-InteractiveButton",B.copy(O,L));};mstrmojo.Button.newWebButton=function A(K,J,M,L){return F(K,J,"mstrmojo-WebButton"+(M?" hot":""),L);};mstrmojo.Button.newActionButton=function(K,L,M){var J=mstrmojo.Button.newWebButton(K,L,false,M);J.cssClass=J.cssClass+" action-button";return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo._IsAnchorable");var B=1,H=2,E=3,G=4;var F="title",D="content";mstrmojo.VisTextTooltip=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsAnchorable],{scriptClass:"mstrmojo.VisTextTooltip",left:0,top:0,zIndex:10,boundaryNodeName:"boundary",popupNodeName:"infoNode",baseTipClass:"mstrmojo-vis-tip",anchorOffset:1,anchorOrientation:"h",anchor:null,boundary:null,tipNodeColor:"#ffffff",utils:mstrmojo.VisChartUtils,touchAreaType:D,markupString:'<div id="{@id}" class="{@cssClass}" style="top:{@top}px;left:{@left}px;z-index:{@zIndex};position:absolute;{@cssText};"><div class="mstrmojo-vis-text-tooltip" style="display: block"></div><div class="mstrmojo-vis-tip" style="display: block"></div></div>',markupSlots:{infoNode:function(){return this.domNode.firstChild;},tipNode:function(){return this.domNode.childNodes[1];}},toggle:function A(I){if(I){this.domNode.style.display="block";}else{this.domNode.style.display="none";}},updateContent:function(I,K,J){this.fillContent(I,K,J);this.positionDialog();},fillContent:function C(I,K,J){this.anchor=I;this.touchAreaType=K;this.domNode.firstChild.innerHTML=J||this.anchor.innerText;this.toggle(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo.dom");var F=mstrmojo.array,C=mstrmojo.css,G=mstrmojo.string,B=mstrmojo.dom,A="unselected",D="inline-block";function H(L){var K=mstrApp.getConfiguration();if(L===decodeURI(L)){L=encodeURI(L);}if(K&&L&&L.indexOf("://")===-1){L=K.getHostUrlByProject(mstrApp.getCurrentProjectId())+L;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(L)):L;}mstrmojo.ImageToggle=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ImageToggle",unset:null,useAnimation:true,markupString:'<div class="mstrmojo-ImageToggle {@cssClass}" style="{@cssText}" tabindex="{@tabIndex}"  mstrAttach:click,blur,keydown ></div>',tabIndex:0,markupMethods:{onimageListChange:function(){var P=this.imageList&&this.imageList.slice(),M=this,N=this.unset,L,O,K;if(!G.isEmpty(N)&&P){P.push({n:N,v:N,_ust:true});}if(this.domNode&&P){M.domNode.innerHTML="";M.domNode.style.minHeight=Math.min(20,M.height)+"px";M.domNode.style.minWidth=Math.min(20,M.width)+"px";M._loadedImgs=P.length;mstrmojo.array.forEach(P,function(R,Q){O=document.createElement("div");O.style.cssText="display:none;font-size:0px !important;line-height:"+M.height+"px !important;";K=document.createElement("img");K.alt=K.title=R.v;K.style.verticalAlign="middle";K.style.maxHeight=M.height+"px";K.style.maxWidth=(M.width-1)+"px";if(!mstrmojo.dom.isIE){K.onerror=function(){this.src="../images/image_not_found.jpg";};}O.appendChild(K);M.domNode.appendChild(O);K.src=(R.n&&H(R.n))||"../images/image_not_found.jpg";if(R._ust){M.ustImgIdx=Q;}M._imgs[Q]=O;});this._setSelectedValue();}},onvalueChange:function(){this._setSelectedValue();}},imageList:null,value:null,selectedIndex:-1,preBuildRendering:function E(){if(this._super){this._super();}this._imgs=[];},_setSelectedValue:function I(){var M=this,L=this.selectedIndex,O=this.imageList;if(O){if(O[L]){M._imgs[L].style.display="none";}F.forEach(this.imageList,function(P,Q){if(P.v==M.value){C.removeClass(M.domNode,A);M.selectedIndex=Q;M._imgs[Q].style.display=D;return ;}});if(this.selectedIndex===-1){if(!this.unset){C.addClass(this.domNode,A);}else{var N=this._imgs[this.ustImgIdx],K=N.lastChild;K.alt=K.title=this.value;N.style.display=D;}}}},onclick:function J(){var M=this.imageList,N=M&&M.length,O=300,U=this.selectedIndex,L=U,K=this.domNode,S,R,Q,T,P=this;Q=(U===-1&&this.ustImgIdx!==null)?this._imgs[this.ustImgIdx]:this._imgs[U];U=(U+1)%N;T=this._imgs[U];C.removeClass(K,A);this.selectedIndex=U;if(this.useAnimation){R=new mstrmojo.fx.FadeIn({duration:O,interval:(B.isIE8?(O/3):(O/10)),target:T,preStart:function(){this.target.style.display=D;}});S=new mstrmojo.fx.FadeOut({duration:O,interval:(B.isIE8?(O/3):(O/10)),target:Q,onEnd:function(){Q.style.display="none";if(L===-1){P._imgs.splice(P.ustImgIdx,1);K.removeChild(Q);delete P.ustImgIdx;}R.play();}});if(Q){S.play();}else{R.play();}}else{if(Q){Q.style.display="none";if(L===-1){P._imgs.splice(P.ustImgIdx,1);K.removeChild(Q);delete P.ustImgIdx;}}T.style.display=D;}this.value=this.imageList[U].v;},onkeydown:function(L){var K=L.hWin,M=L.e||K.event;if(M.keyCode===mstrmojo.Enum_Keys.SPACE){mstrmojo.dom.preventDefault(K,M);this.onclick();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget","mstrmojo._ListSelections");var E=mstrmojo.dom;mstrmojo.ListBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBase",selectionPolicy:null,itemRenderer:null,icnCssText:"",icnCss:"",markupString:'<div id="{@id}" tstid="{@tstid}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',markupSlots:{itemsContainerNode:function G(){return this.domNode.firstChild;},scrollboxNode:function A(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},autoHide:false,itemsContainerNode:null,_markupPrefix:null,_markupSuffix:null,_itemPrefix:null,_itemSuffix:null,init:function J(K){this._super(K);if(this.autoHide){this.visible=!!(this.items&&this.items.length);}},buildRendering:function D(){this.itemsHtml="";var K=(this.renderOnScroll?this.items&&((this.renderIndex+1)*this.renderBlockSize):this.items&&this.items.length);if(K){this.itemsHtml=this._buildItemsMarkup(0,K-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");}this._super();delete this.itemsHtml;this.addSlots({itemsNode:this.itemsContainerNode.firstChild});},_buildItemsMarkup:function B(K,N,U,L,V,M){var W=[],Q=0;W[Q++]=U||"";var P=this.itemRenderer,T=P&&P.render;if(T&&typeof T==="function"){var R=this.items,S=Math.min(N+1,((R&&R.length)||0)),O;for(O=K;O<S;O++){W[Q++]=V||"";W[Q++]=T(R[O],O,this);W[Q++]=M||"";}}W[Q+1]=L||"";return W;},onselectionChange:function H(V){if(!V){return ;}var S=this.itemRenderer;if(!S){return ;}var O=S.unselect,R=this.items||[],W=V.removed,N,M,L,P,X;if(O&&W){for(P=0,X=W.length;P<X;P++){N=W[P];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){O(L,R[N],M,this);}}}var K=S.select,U=V.added,Q,T;if(K&&U){for(Q=0,T=U.length;Q<T;Q++){N=U[Q];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){K(L,R[N],M,this);}}}if(this.onchange){this.onchange({added:V.added,removed:V.removed});}},_set_items:function C(N,K){this.renderIndex=0;if(this.autoHide){this.set("visible",!!(K&&K.length));}var M=this.items;this.items=K;if(M!==K){var L=this.hasRendered;if(L){this.unrender(false);}this.clearSelect();if(L){this.render();}return true;}return false;},onItemContextMenu:mstrmojo.emptyFn,oncontextmenu:function F(K){E.preventDefault(window,K.e);var M=K.getTarget(),L=this.getItemFromTarget&&this.getItemFromTarget(M);if(L){if(this.onItemContextMenu(L,K)){K.cancel();}}},_getItemNode:function I(K){var L=this.itemsContainerNode;return(L&&L.childNodes[K])||null;},renderOnScroll:false});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash","mstrmojo.css","mstrmojo.string");function A(C,B){return mstrmojo.hash.copy(B,{label:"",tabIndex:"",cssDisplay:"inline",name:null,markupString:'<span id="{@id}" class="'+C+' {@cssClass}" style="{@cssText}" title="{@tooltip}"><input id="{@id}_input"  type="{@type}" name="{@name}" value="{@value}" tabIndex="{@tabIndex}" mstrAttach:click tstid="{@tstid}"/><label for="{@id}_input">{@label}</label></span>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},labelNode:function(){return this.domNode.childNodes[1];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onenabledChange:function(){this.inputNode.disabled=!this.enabled;mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,"disabled");},onlabelChange:function(){this.labelNode.innerHTML=mstrmojo.string.encodeHtmlString(this.label);},oncheckedChange:function(){this.inputNode.checked=this.checked;}},checked:false,preclick:function(){this.set("checked",this.inputNode.checked);},isChecked:function(){return this.inputNode.checked;}});}mstrmojo.CheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox",{scriptClass:"mstrmojo.CheckBox",type:"checkbox"}));mstrmojo.ImageCheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox mstrmojo-ImageCheckBox",{scriptClass:"mstrmojo.CheckBox",type:"image",cssDisplay:"block",preclick:function(){this.set("checked",!this.checked);},postCreate:function(){this.markupMethods=mstrmojo.hash.copy(this.markupMethods);this.markupMethods.oncheckedChange=function(){mstrmojo.css.toggleClass(this.inputNode,["checked"],this.checked);};},postBuildRendering:function(){this.inputNode.src=this.src||"../images/1ptrans.gif";if(this._super){return this._super();}return true;}}));mstrmojo.RadioButton=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-RadioButton",{scriptClass:"mstrmojo.RadioButton",type:"radio",postBuildRendering:function(){if(mstrmojo.dom.isIE){this.inputNode.checked=this.checked;}}}));}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(K,N,G,L){var I=K.domNode,M=I.offsetWidth,D=K.scrollableIncFetch;var E=K.hasAnimation&&(!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5),J=L?1:-1,F=parseInt(M,10)*J,H=E?500:0;A(0,-F,H,{target:G,duration:H,preStart:function(){this.target.style.overflowY="hidden";},onEnd:function(){this.target.style.display="none";}});A(F,0,H,{target:N,preStart:function(){this.target.style.display="block";this.target.style.overflowY=(D?"visible":"auto");}});if(K.waiting){A(0,-F,H,{widget:K,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}else{if(this.scrollableIncFetch){E.style.overflowY="visible";}}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,hasAnimation:true,scrollableIncFetch:false,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo._IsInputControl");mstrmojo.DefaultDIC=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DefaultDIC",isDummy:true,showInPopup:function(){mstrmojo.alert("The control style has not been supported yet.");}});}());(function(){var regExH=/"height", "[0-9.]+"/g;var regExW=/"width", "[0-9.]+"/g;var regExH1=/height="?[0-9.]+"?/g;var regExW1=/width="?[0-9.]+"?/g;mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable","mstrmojo._IsSelectorTarget");mstrmojo.DocVisualization=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget],{scriptClass:"mstrmojo.DocVisualization",markupString:'<div id={@id} class="mstrmojo-docvisualization" title="{@tooltip}" style="{@domNodeCssText}">{@htmlText}</div>',formatHandlers:{domNode:["RW","T","B","fx"]},update:function update(node){if(this._super){this._super(node);}var d=node.data;this.htmlText=d.htmlText;this.jsText=d.jsText;this.selData=d.selData;this.ctrLink=d.ctrLink;this.vp=d.vp;this.eg=d.eg;if(this.eg){this.htmlText=this.eg;}},preBuildRendering:function(){if(this._super){this._super();}var fmts=this.getFormats();if(!fmts){return ;}var h=fmts.height;if(h){h=h.replace("px","");}var w=fmts.width;if(w){w=w.replace("px","");}if(this.jsText){this.jsText=this.jsText.replace(regExH,'"height", "'+h+'"').replace(regExW,'"width", "'+w+'"');}},postBuildRendering:function pstBldRnd(){if(this._super){this._super();}eval(this.jsText);},resize:function(){if(this.eg){return ;}var embedNode=this.domNode.firstChild.firstChild.firstChild;if(!embedNode){return ;}var fmts=this.getFormats();var h=fmts.height;if(h){h=h.replace("px","");}var w=fmts.width;if(w){w=w.replace("px","");}if(mstrmojo.dom.isIE){embedNode.firstChild.setAttribute("height",h);embedNode.firstChild.setAttribute("width",w);}else{embedNode.innerHTML=embedNode.innerHTML.replace(regExH1,'height="'+h+'"').replace(regExW1,'width="'+w+'"');}},makeSelections:function(selections){var shuffledData={},i,j,attId,e;for(i=0;i<selections.length;i++){var attIdI=selections[i].attId;if(!shuffledData[attIdI]){shuffledData[attIdI]=[];}shuffledData[attIdI]=shuffledData[attIdI].concat(selections[i].values);}var sep="\u001E",sep1="\u001F";var ckJoined="",eidJoined="",cklJoined="";var tksArray=[];for(attId in shuffledData){var sd=this.getSelectionData(attId);if(!sd){continue;}var ctrLink=this.ctrLink[attId];var values=shuffledData[attId];if(sd&&values&&values.length>0){sd.sel=values;sd.ias=false;for(e in values){if(e==="u;"){sd.ias=true;break;}}}if(ctrLink.gbTargets){var t=ctrLink.targets=[],gbt=ctrLink.gbTargets,cgbmap=this.model.getCGBMap();for(j=0;j<gbt.length;j++){var targetKey=cgbmap[gbt[j]];if(targetKey){t.push(targetKey);}}delete ctrLink.gbTargets;}ckJoined+=ctrLink.ctxt+sep1;eidJoined+=values.join(sep)+sep1;cklJoined+=ctrLink.ck+sep1;tksArray=tksArray.concat(ctrLink.targets);}ckJoined=ckJoined.substring(0,ckJoined.length-1);eidJoined=eidJoined.substring(0,eidJoined.length-1);cklJoined=cklJoined.substring(0,cklJoined.length-1);if(tksArray.length===0){return ;}var evt={ck:ckJoined,eid:eidJoined,src:this.k,tks:tksArray.join(sep),type:this.defn.t,ctlKey:cklJoined,include:true,isDocVis:true};this.model.slice(evt);},getAllSelectionData:function(){return this.selData;},getSelectionData:function(attId){var selData=this.selData,k;if(selData&&selData.attl){var attl=selData.attl;if(attId){return attl[attId];}return attl[attl.keys()[0]];}},saveVisProps:function(widgetPropsXml){mstrApp.docModel.updateUnitFormat(this,1,{FormattingWidget:{WidgetProps:widgetPropsXml}},{success:function(){}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.array","mstrmojo._HasChildren");var G=mstrmojo.array;function E(P){if(!this.shouldPropagateEnabled){return ;}var O=this._disabledChildren;G.forEach(P,function(Q){if(Q.enabled){O.push(Q.id);Q.set("enabled",false);}});}function J(){G.forEach(this._disabledChildren,function(O){var P=mstrmojo.all[O];if(P&&P.parent===this){P.set("enabled",true);}},this);this._disabledChildren=[];}mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",containerNode:null,preserveChildDomOrder:true,shouldPropagateEnabled:false,init:function M(P){this._super(P);this._disabledChildren=[];this.attachEventListener("addChild",this.id,function(Q){if(this.shouldPropagateEnabled&&!this.enabled){E.call(this,Q.value);}});if(this.children){this.initChildren();}var O=this.parent;if(!O||O.hasInitBindings){this.initBindings();}},destroy:function H(O){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(O);},unrender:function I(Q){var R=this.children,O=(R&&R.length)||0,P;for(P=O-1;P>-1;P--){R[P].unrender(true);}this._super(Q);},postBuildRendering:function A(){if(this._super()!==false){this.renderChildren();return true;}return false;},renderChildren:function L(){var Q=this.children,O=(Q&&Q.length)||0,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}}},childRenderCheck:function D(P){if(P&&!P.hasRendered){var O=P.slot||this.defaultChildSlot;return !!this[O];}return false;},addChildren:function N(R,P,Q){var O=this._super(R,P,Q);if(O){this.childRenderOnAddCheck(O);}return O;},removeChildren:function F(V,R){var U=V?[V]:(this.children||[]),O=U.length,S;for(S=O-1;S>-1;S--){var Q=U[S],P=Q&&Q.domNode;if(P){var T=this[(Q.slot||this.defaultChildSlot)];if(P.parentNode===T){T.removeChild(P);}}}return this._super(V,R);},childRenderOnAddCheck:function B(Q){if(this.hasRendered&&Q){var O=Q.length,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}else{if(R&&R.hasRendered){this.onchildRenderingChange(R);}}}}},onchildRenderingChange:function K(O){var W=O&&O.domNode;if(!W){return ;}var P=this.defaultChildSlot,V=O.slot||P,Y=this[V],Q=this.children;if(!Y){if(W.parentNode){W.parentNode.removeChild(W);}}else{if(W.parentNode===Y){return ;}if(!this.preserveChildDomOrder){Y.appendChild(W);}else{var R,U;for(U=Q.length-1;U>=0;U--){var X=Q[U];if(X===O){break;}if(V===(X.slot||P)){var Z=X.domNode;if(Z&&Z.parentNode===Y){R=Z;}}}if(R){Y.insertBefore(W,R);}else{Y.appendChild(W);}}}if(mstrmojo.publisher.hasSubs(this.id,"childrenRendered")){var S=Q.length,T;for(T=0;T<S;T++){if(!Q[T].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}},propagateChildProps:function C(S){var R=this[S],Q=this.children||[],O=Q.length,P;for(P=0;P<O;P++){Q[P].set(S,R);}}});mstrmojo.Container.enabledMarkupMethod=function(){mstrmojo.Widget.enabledMarkupMethod.apply(this,arguments);if(this.shouldPropagateEnabled){if(this.enabled){J.call(this);}else{E.call(this,this.children);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._TouchGestures","mstrmojo.array","mstrmojo.dom","mstrmojo.css");var X=mstrmojo.css,b=mstrmojo.emptyFn,T=mstrmojo.dom,G=32,d=mstrmojo.css,J={SINGLE:1,INCLUDE:2,EXCLUDE:3},Y={CONTINUOUS_STEPS:-1,UNSET:-4641},Z={},E=function(f){if(!Z[f.id+"cw"]){var g=parseInt(X.getComputedStyle(f.sliderContainer).width,10);if(isNaN(g)){g=parseInt(X.getComputedStyle(f.domNode.parentNode).width,10);}Z[f.id+"cw"]=g;}return Z[f.id+"cw"];},D=function(q,g,k){var j=q.type!==J.SINGLE,o=G,h=!!g?(g-(o/2)):parseInt(k.style.left,10),r=q.steps,s=E(q)-o,p=Math.round(s/(r-(!j?1:0))),f=j?q.rightStep:r-1;return Math.min(f,Math.round(h/p));},C=function(g){var j=g.rangeContainer.style,h=parseInt(j.width,10)-G,k=parseInt(j.left,10),f=g.steps,o=E(g)-G,l=Math.round(o/f);return Math.max(0,Math.min(Math.round((k+h)/l),f));},M=function(j,k){var g=j.steps,f=E(j),h=G;return Math.min(f-h,Math.max(0,((f/(g-1)*k)-h/2)))+"px";},B=function(h,j){var g=h.steps,f=E(h)-G;return((f/g)*j)+"px";},e=function(j,l,g){var h=j.steps,f=E(j)-G,k=g-l;return((k*f)/h)+G+"px";},W=function(g,h){var f=g.singleHandle;if(f){f.style.left=M(g,h);}},P=function(k,l,h){var f=k.rangeContainer,j,g=(k.rangeLHandle.clientWidth||G)+5;if(f){var o=k.innerRangeContainer.style;j=f.style;j.left=B(k,l);j.width=e(k,l,h);o.left=parseInt(j.left,10)+g+"px";o.width=Math.max(parseInt(j.width,10)-(2*g),0)+"px";}},A=function(h,f,o){var g=h.type!==J.SINGLE,k=D(h,f,o),p=g?"leftStep":"singleStep",j;if(k!==h[p]){h.set(p,k);this.step=k;}else{j=g?P:W;j(h,k,h.rightStep);}},H=function(g,l,k){var f=g.rangeContainer,h,j=g.leftStep,o=(k===f||k===g.innerRangeContainer);if(k===g.rangeRHandle||o){h=C(g);j+=o?h-g.rightStep:0;P(g,j,h);if(g.rightStep!==h){g.set("rightStep",h);if(o){g.set("leftStep",j);}}}else{if(k===g.rangeLHandle){A(g,l,f);}}},R=function(f,g){switch(f.type){case J.SINGLE:A(f,null,f.singleHandle);break;case J.EXCLUDE:case J.INCLUDE:H(f,null,g);break;}},I=function(r,k){var p=r.rangeContainer,g=p.style,h=parseInt(g.width,10),l=parseInt(g.left,10),f=r.leftStep,q=r.rightStep,j=q,o=f;if(k>0&&k<l&&f>0){j--;o--;}else{if(k>(l+h)&&k<E(r)){j++;o++;}}P(r,o,j);r.set("leftStep",o);r.set("rightStep",j);},Q=function(k,j,l,f,g){var h=l.style.width;if(h===""){h=X.getComputedStyle(l).width;}f=Math.min(Math.max(0,f+(g||0)),E(k)-parseInt(h,10));j.style.left=f+"px";return f;},V=function(q,o,g,k){var j=q.rangeContainer,h=q.rangeLHandle,r=E(q)-G,p=Math.round(r/q.steps),l=g-k,f;if(l>=(p+G)){f=Q(q,j,h,o,k);if((o+k)>0){j.style.width=l+"px";}return f;}},a=function(q,l,g,j){var h=q.rangeContainer,o=E(q)-parseInt(h.style.left,10),k=g+j,r=E(q)-G,p=Math.round(r/q.steps),f;if(k>=(p+G)){f=Math.min(o,k);h.style.width=f+"px";return f;}},O=function(h){var j,k,f,g;switch(h.type){case J.SINGLE:j=parseInt(this.step,10)===Y.UNSET?D(h,null,h.singleHandle):this.step;g=h.buildSummary(j);this.step=Y.UNSET;break;case J.EXCLUDE:case J.INCLUDE:k=D(h,null,h.rangeContainer);f=C(h);g=h.buildSummary(null,k,f);break;}return g;};mstrmojo.android.selectors.MobileSliderSelector=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._TouchGestures,mstrmojo._ListSelections],{width:0,type:Y.UNSET,value:Y.UNSET,steps:Y.UNSET,include:Y.UNSET,initState:b,buildSummary:b,updateMinMaxLabels:b,flushSelections:b,step:Y.UNSET,singleStep:Y.UNSET,leftStep:Y.UNSET,rightStep:Y.UNSET,cssDisplay:"block",scriptClass:"mstrmojo.android.selectors.MobileSliderSelector",useRichTooltip:true,markupString:'<div class="mstrmojo-sliderSel" id="{@id}"><div></div><div class="mstrmojo-sliderSelSummary">&nbsp;</div><div class="mstrmojo-sliderSelScrollerContainer"><div class="mstrmojo-sliderSelScrollerHandle" style="display:none;"><div class="mstrmojo-sliderSelScrollerHandle1 leftHandle"><div></div></div><div class="mstrmojo-sliderSelScrollerHandle1 rightHandle"><div></div></div></div><div class="mstrmojo-sliderSelScrollerHandle2" style="display:none;"><div></div></div><div class="mstrmojo-sliderSelScrollerHandleArea" style="display:none;position:absolute"></div></div><div class="mstrmojo-sliderSelLabels"><label class="mstrmojo-sliderSelLL">&nbsp;</label><label class="mstrmojo-sliderSelLR">&nbsp;</label></div></div>',markupSlots:{editor:function(){return this.domNode.childNodes[0];},summary:function(){return this.domNode.childNodes[1];},sliderContainer:function(){return this.domNode.childNodes[2];},innerRangeContainer:function(){return this.domNode.childNodes[2].childNodes[2];},rangeContainer:function(){return this.domNode.childNodes[2].childNodes[0];},rangeLHandle:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[0];},rangeRHandle:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[1];},singleHandle:function(){return this.domNode.childNodes[2].childNodes[1];},minLabel:function(){return this.domNode.childNodes[3].childNodes[0];},maxLabel:function(){return this.domNode.childNodes[3].childNodes[1];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},ontypeChange:function(){var h,g="none",j="mstrmojo-sliderSelScrollerContainer",f="Handle1";switch(this.type){case J.SINGLE:h="block";break;case J.EXCLUDE:j="mstrmojo-sliderSelScrollerContainerExcl";f="Handle2";g="block";break;case J.INCLUDE:g="block";break;}this.rangeContainer.style.display=g;this.innerRangeContainer.style.display=g;this.sliderContainer.className=j;this.rangeLHandle.className="mstrmojo-sliderSelScrollerHandleX leftHandle".replace("HandleX",f);this.rangeRHandle.className="mstrmojo-sliderSelScrollerHandleX rightHandle".replace("HandleX",f);this.singleHandle.style.display=h;},onconstantsChange:function(){this.updateMinMaxLabels();},onvalueChange:function(){O(this);}},postBuildRendering:function U(){var f=this._super();this.initState();var g=this.tooltipNode||this.domNode;T.detachEvent(g,"mouseover",this._ontooltipover);T.detachEvent(g,"mouseout",this._ontooltipout);return f;},onsingleStepChange:function(){W(this,this.singleStep);},onleftStepChange:function(){P(this,this.leftStep,this.rightStep);},onrightStepChange:function(){P(this,this.leftStep,this.rightStep);},touchSwipeBegin:function(o){var l=o.target;if(!l){return false;}this.touchTap(o);var f=this._glowing=[];d.addClass(l,"glow");f.push(l);this._sliderTarget=l;var g=this.singleHandle,h=this.rangeContainer,k,j;switch(l){case g:k=g.style.left;Z.shl=parseInt(!!k?k:0,10);break;case h:case this.innerRangeContainer:case this.rangeLHandle:case this.rangeRHandle:j=h.style;k=j.left;Z.icl=parseInt(!!k?k:0,10);Z.icw=parseInt(j.width,10);break;case this.sliderContainer:d.addClass(g,"glow");f.push(g);break;default:this.bubbleTouchEvent(o);}this._initTooltip();if(this.type===J.SINGLE){this.touchSelectMove(o,true);}},touchSwipeMove:function(p,k){var q=p.target;if(!q){return false;}q=this._sliderTarget;var g=this.singleHandle,j=this.rangeContainer,f=this.rangeLHandle,h=this.rangeRHandle,o=p.delta.x,l;switch(q){case g:l=Q(this,g,g,Z.shl,o);break;case h:l=a(this,Z.icl,Z.icw,o);break;case f:l=V(this,Z.icl,Z.icw,o);break;case j:case this.innerRangeContainer:if(this.type===J.INCLUDE){l=Q(this,j,j,Z.icl,o);}break;case this.sliderContainer:l=Q(this,g,g,p.clientX-T.position(this.sliderContainer,true).x);break;}this._updateTooltip(p.evt,q,l,k);},touchSwipeEnd:function(k){var j=(k.target===this.sliderContainer)?this.singleHandle:this._sliderTarget,f=this.leftStep,h=this.rightStep,g=this.singleStep;mstrmojo.array.forEach(this._glowing,function(l){d.removeClass(l,"glow");});R(this,j);if(f!==this.leftStep||h!==this.rightStep||g!==this.singleStep){this.flushSelections();}this.hideTooltip(k.evt,this);},touchTap:function(k){var o=k.target;if(!o){return false;}var p=this.sliderContainer,g=k.clientX,q=(p===o),h=g-T.position(p,true).x,j=this.leftStep,f=this.rightStep,t=this.singleStep;switch(this.type){case J.SINGLE:if(q){A(this,h,this.singleHandle);}break;case J.INCLUDE:if(q){I(this,h);}break;}if(j!==this.leftStep||f!==this.rightStep||t!==this.singleStep){O(this);this.flushSelections();}},touchSelectBegin:function(f){this.touchSwipeBegin(f);},touchSelectMove:function(f){this.touchSwipeMove(f,true);},touchSelectEnd:function(f){this.touchSwipeEnd(f);},touchEnd:function F(f){this.hideTooltip(f.evt,this);},_initTooltip:function S(){this.set("richTooltip",{refNode:this.domNode,posType:mstrmojo.tooltip.POS_BOTTOMCENTER,contentNodeCssClass:"mstrmojo-sliderTip"});},_updateTooltip:function N(f,r,l,j){this.showTooltip(f,this);var k=T.position(this.sliderContainer,false),h=T.position(this.domNode,false),g=mstrmojo.boxmodel.offset(this.sliderContainer),o=(k.y<90),p=this.richTooltip,q=O(this),s;if(j){s=(G/2);}else{s=r.style.width;if(s===""){s=X.getComputedStyle(r).width;}s=parseInt(s,10)/2;}p.content='<div class="mstrmojo-sliderTip-top">'+q+'</div><div class="mstrmojo-sliderTip-bottom'+(o?" down":"")+'"></div>';p.top=h.y-g.top-20+(o?100:0);p.left=l+s+(h.x-g.left);this.richTooltip=null;this.set("richTooltip",p);},onselectionChange:function L(){if(this.onchange){this.onchange();}if(this.makeSelection){this.makeSelection({selItem:this.type===J.SINGLE?this.singleHandle:this.rangeContainer});}},slideHosted:function(h,g,f){if(h!==null&&h!==undefined){this.set("singleStep",h);}if(g!==null&&g!==undefined){this.set("leftStep",g);}if(f!==null&&f!==undefined){this.set("rightStep",f);}this.flushSelections();O(this);}});var K=mstrmojo.android.selectors.MobileSliderSelector;K.TYPES=J;K.FLAGS=Y;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocRectangle=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocRectangle",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocRectangle" title="{@tooltip}" style="{@domNodeCssText}"></div>',markupMethods:{onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";}},onwidthChange:function(){if(this.width){this.domNode.style.width=this.width+"px";}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},formatHandlers:{domNode:["RW","B","background-color","fx"]},preBuildRendering:function A(){var D=this._super(),C=this.defn;if(C.r){this.domNodeCssText+=mstrmojo.css.buildRoundCorners(C.r,C.topc);}return D;},postBuildRendering:function(){var E=this._super();var D=this.fmts;if(D){var C=D.border||D["border-width"],F=C&&(parseInt(C,10)/72*this.model.dpi);if(F){if(D.height==="100%"){this.set("height",this.domNode.clientHeight-2*F);}if(D.width==="100%"){this.set("width",this.domNode.clientWidth-2*F);}}}return E;},update:function B(C){if(this.thresholdId||C.data.tid){delete this.fmts;}this.thresholdId=C.data.tid;this.set("visible",!C.data.hidden);if(this._super){this._super(C);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget");mstrmojo.StickySections=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.StickySections",markupString:'<div id="{@id}" style="{@cssText};overflow:hidden"><div class="mstrmojo-StickySections {@cssClass}">{@currentSectionTitle}</div></div>',oncurrentSectionTitleChange:function B(C){this.domNode.lastChild.innerHTML=this.currentSectionTitle;},onMove:function A(G){var F=0;if(G.isNextRowNewSection){var C=G.position,D=G.rowStart,E=(D>C)?(this.domNode.offsetHeight+1):0;F=(D-C)-E;}mstrmojo.dom.translate(this.domNode.lastChild,0,F,0,"",true);if(G.sectionName&&G.sectionName!==this.currentSectionTitle){this.set("currentSectionTitle",G.sectionName);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var B="mstrmojo-Image";mstrmojo.Image=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Image",markupString:'<div id="{@id}" class="'+B+' {@cssClass}" style="{@cssText}" mstrAttach:click><image src="{@src}" mstrAttach:load /></div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onsrcChange:function(){var C=this.imgNode;if(C){C.src=this.src||"../javascript/mojo/css/images/1ptrans.gif";}},oncssClassChange:function(){var C=this.domNode;if(C){C.className=this.cssClass||B;}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},src:"",getImageSize:function A(){var C=this.imgNode;return{w:C.clientWidth,h:C.clientHeight};}});mstrmojo.Image.baseCssClass=B;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.BarcodeReader","mstrmojo._IsInputControl","mstrmojo.android._HasPreviewButton");var A=mstrmojo.array;mstrmojo.android.inputControls.BarcodeDIC=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.BarcodeDIC",markupString:"<div></div>",showInPopup:function(){var C=this;var E={success:function(F){if(F!==""){if(!!C.dic.em){C.value=C.dic.vls[parseInt(F,10)].v;}else{C.value=F;}C.applyChanges();}},failure:function(F){}};var D={barcodeDIC:true};if(!!C.dic.em){var B=[];A.forEach(C.dic.vls,function(G,F){B[F]=G.m||G.v;});D.vls=B;}mstrmojo.BarcodeReader.readBarcodes(D,E,this.popupTitle);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._RowRendTracker","mstrmojo.array","mstrmojo.chart.model.enums.EnumDSSBaseFormType");var T="<tr>";var e=['<table cellspacing="0" cellpadding="0" style="table-layout:',null,";width:",null,';mstr-tablestyle-slot" ',null,">",null,"<tbody>"];var W="&nbsp;";var I="fsbp_1 ";var b="fsbp_2 ";var B="fsbp_3 ";var Z=1,a=2,F=3,g=4,L=5,V={1:" stack-top",2:" stack-middle",3:" stack-bottom",4:" stack-bottom-last",5:" no-stack",6:" stack-full"},O=1,A=3;var f=mstrmojo.css,Q=mstrmojo.array,d=mstrmojo.chart.model.enums.EnumDSSBaseFormType;var K=4;function E(l,k){for(var o=0,j=l.length;o<j;o++){var q=l[o];var p=k.rows[q.rows].cells[q.cells];if(p){mstrmojo.css.addClass(p,I);}}}function X(l){var p=l.indexOf('src="');if(p<0){return l;}var o=l.substring(p+5),k=o.indexOf('"'),q;o=o.substring(0,k);q=o;var j=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model.dataService;if(j&&j.getImage){q=j.getImage(o);}return l.replace(o,q);}var R=(function(){var r=/\n/g,k="<br/>",AD=/<a\s[^>]+>/gi,AB="<a ",q='<a target="_blank" ',z="target=";var AA='<a href="',x='" target="_blank">',u="</a>",t="<span>",o="</span>",s='<span rabtn class="raBtn ',l='"></span>',w="icon-expand",AC="icon-collapse",p="<span>",j="</span>";return function(AN,AL){var AO=(AN.v||AN.n||W).replace(r,k),AP=AN.ts===d.DssBaseFormUrl,AJ=AN.ts===d.DssBaseFormHTMLTag,AG=AN.lv!==undefined;if(AP){AO=AA+AO+x+AO+u;}else{if(AJ){(AO.match(AD)||[]).forEach(function(AQ){if(AQ.indexOf(z)===-1){AO=AO.replace(AQ,AQ.replace(AB,q));}});}}if((AN.css&&AN.css.indexOf("hl")>-1)||AP){AO=t+AO+o;}if(AG){var AH=AN.lv,AE="&nbsp;&nbsp;&nbsp;&nbsp;",AF="",AK="",AM="",AI;for(AI=0;AI<AH;AI++){AF+=AE;}if(AN.hcd&&AN.fi===undefined){AM=s+(AN.epd?AC:w)+l;}else{AF+=AE;}if(AN.axis===1){AK=p+AF+j;}AO=AK+AM+AO;}return AO;};}());mstrmojo.GridBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._RowRendTracker],{scriptClass:"mstrmojo.GridBase",markupString:'<span id="{@id}" class="mstrmojo-Grid {@cssClass}" style="{@cssText}"></span>',markupSlots:{gridContainerNode:function(){return this.domNode;}},autoFitWindow:false,tableLayout:null,numAutoHeightRows:0,cp:null,rc:0,cc:0,cws:null,rh:null,totalColWidth:0,start:0,end:0,forceFixedSizes:true,hiliteCellsMap:null,eiMap:null,init:function J(j){this._super(j);},numColumnCanMerge:0,preBuildRendering:function D(){var j=this.cp;if(!j){return ;}j.initContent();this.rc=j.rc||0;this.cws=j.colWidths||[];this.cc=this.cws.length;this.tdWidths=j.tdWidths||[];this.tdCnt=this.tdWidths?this.tdWidths.length:0;this.start=0;this.end=this.rc-1;this.numAutoHeightRows=j.getNumAutoHeightRows&&j.getNumAutoHeightRows()||0;this.hiliteCellsMap={};this.eiMap={};this.posMap=[];this.thPosMap=[];this.totalColWidth=0;},buildRendering:function H(k){var j=this._super(k);this.renderGrid();return j;},renderGrid:function U(k){var j=this.getGridContainer();this.preBuildGridTable();this.buildGridTable(j,k);this.postBuildGridTable();},getGridContainer:function h(){return this.gridContainerNode;},buildGridTable:function G(l,j){var k=this.getTableStartMarkup();var t=this.getTableEndMarkup();if(j){this.mergeHdrsAcrossBlks=true;}var r=this.buildTableRowsMarkup(this.start,this.end,k,t).join("");if(j){var p=document.createElement("div");p.innerHTML=r;var s=l.firstChild,u=s&&s.tBodies,o=p.firstChild.tBodies[0],q=this.matchedHdrsAcrossBlks;s.appendChild(o);if(q&&q.length>0){E(q,u[u.length-2]);}}else{l.innerHTML=r;}this.markPages(this.start,this.end);},getTableStartMarkup:function P(){var k=this._getGridWidths(),j=e;j[1]=k.tableLayout;j[3]=k.totalColWidths;j[5]=this.tableCssClass?"class="+this.tableCssClass:"";j[7]="<colgroup>"+k.colgroup+"</colgroup>";if(this.tbodyStyle){j[8]='<tbody style="'+this.tbodyStyle+'">';}return j.join("");},getTableEndMarkup:function N(){return"</tbody></table>";},_getGridWidths:function Y(){var t={};var p="",l=[],s="fixed",k=this.cws,q=k.length;if(q){p=0;l=[];for(var o=0;o<q;o++){if(k[o].w!==""){p+=parseInt(k[o].w,10);}}for(o=0;o<q;o++){var j=k[o];if(j.w!==""&&!this.autoFitWindow){var r=parseInt(j.w,10);if(mstrmojo.dom.isIE7){if(r===0){l.push('<col style="width:0%;display:none"></col>');}else{l.push('<col style="width:'+(r/p*100)+'%"></col>');}}else{if(mstrmojo.dom.isWK&&r===0){l.push('<col style="width:-1px"></col>');}else{l.push('<col style="width:'+j.w+'"></col>');}}}else{l.push("<col />");s="auto";}}this.totalColWidth=p;}t.colgroup=l.join("");s=this.tableLayout||s;if(this.autoFitWindow){s=this.tableLayout||s||"fixed";p="100%";}else{if(s==="fixed"){p+="px";}else{p="auto";}}t.totalColWidths=p;t.tableLayout=s;return t;},_CELL_MARKUP:['<td rowSpan="',null,'" colSpan="',null,'" class="',null,'" ei="',null,'" style="',null,'" r="',null,'">',null,"</td>"],buildTableRowsMarkup:function S(AV,AE,A2,u,AG){var Al=[],Ax=0;Al[Ax++]=A2||"<table><tbody>";var AY=this.cp,AH=this.acws,AX=this.rowMerge,AC=this.headerOffset,q=this.mxPos,AK=!!AY.gemh,Ah=AY.getRowHeight(),Av=this._CELL_MARKUP,Ak=Ah?'<tr style="height:'+(Ah?Ah+"px":"")+'">':T;var AA=true,AT=true,Ar=[],An;var Ay=function Ay(r){var j=-1;mstrmojo.array.forEach(AH,function(A4,A3){r=r-A4;if(r<0){j=A3;return false;}});return j;};var AD=function AD(A3,r){var j=-1;mstrmojo.hash.forEach(AY.gemh,function(A4,A5){if(A3<=A5&&A3+r>A5){j=A5;return false;}});return j;};var AM=function AM(A5,A6,A4){var A3="",r,j;j=A5.gemh&&A5.gemh[A6];if(j){r=Ay(A4);if(j[r]&&j[r].v===0||q===A4){A3+=I;}}j=A5.gsmh&&A5.gsmh[A6];if(j){r=Ay(A4);if(j[r]&&j[r].v===0||q===A4){A3+=B;}}return A3;};var Aq,AR,AI,Au=[],Aw,Am,AF=0,l=0,s,x,Ae=AY.colWidths&&AY.colWidths.length,Aa=0,p=0,k=AG||((A2&&A2.indexOf("table-layout:fixed;")!==-1)?"fixed":"auto");if(AH&&AK){for(Aw=0;Aw<AH.length-1;Aw++){p+=AH[Aw];}}p=p||this.numColumnCanMerge;if(k==="fixed"){Aq=[];for(AR=0,AI=this.cws.length;AR<AI;AR++){if(window.parseFloat(this.cws[AR].w)<=0){Aq[AR]=true;}else{Aq[AR]=false;}}}this.matchedHdrsAcrossBlks=[];for(var Ao=AV;Ao<=AE;Ao++){AF=0;An=Ax++;Al[An]=Ao<this.numAutoHeightRows?T:Ak;var AL=AY.getRowCells(Ao);var Aj=AE+1-Ao;var Ai=0;x=AX;s="";if(!this.mergeHdrsAcrossBlks){if(AA&&AV>0&&AL.length<AY.colWidths.length){var Ag=AY.getUnmergedCells(AV),AO;if(Ag){Ai=Ag.length;}for(Aw=0,AI=Ai;Aw<AI;Aw++){var AQ=Ag[Aw],AB=AQ.rs;if(AB>Aj){Av[1]=Aj;Av[5]=b+AQ.css;}else{Av[1]=AB||1;Av[5]=B+AQ.css;}if(Aq&&Aq[l+AF]){Av[5]+=" nwFixedWidth0 ";}if(AB&&AB>1){Au.push(AB);}AF+=AQ.cs||1;if(AQ.cet){Av[5]+=" mstrmojo-selected-cell";this.addHilitePosition(AQ.cet,Ao,Aw);}if(AQ._ei){this.addExtraInfoMap(AQ._ei,Ao,Aw);Av[5]+=" pt";}Av[9]="";Av[13]=W;Av[3]=AQ.cs;if(AQ._ei===undefined){AO=AY.getRowCells(AQ.o+(AY.cps[0]&&AY.cps[0].rc||0));AQ=Q.filterOne(AO,function(j){return j.dpt===AQ.dpt&&j.idx===AQ.idx;});}Av[7]=AQ._ei;Av[11]=Ao;if(AK){if(x){s=AM(AY,Ao-AC,Aw);}if(!!s){Av[5]=s+Av[5];}else{x=false;}s=AM(AY,AD(Ao-AC,Av[1]),Aw);if(!!s){Av[5]=I+Av[5];x=true;}}Al[Ax++]=Av.join("");}AA=false;}}Aa=Ae;AI=AL.length;var A1;for(A1=0;A1<AI;A1++){Aa-=AL[A1].cs||1;}for(A1=0;A1<AI;A1++){var Ac=AL[A1],Ad;Ac.colIx=Aa;if(Ac.rs&&Ac.rs>Aj){Av[1]=Aj;Av[5]=I+Ac.css;if(Ac._ei){this.addExtraInfoMap(Ac._ei,Ao,A1);}}else{Av[1]=Ac.rs||1;Av[5]=Ac.css;}if(Aq&&Aq[l+AF]){if((Ac.cs==undefined)||((Ac.cs!=undefined)&&(Ac.cs==1))){Av[5]+=" nwFixedWidth0 ";}}if(Ac.rs&&Ac.rs>1){Au.push(Ac.rs);}AF+=Ac.cs||1;if(Ac.rowType!==Z){Av[5]+=" xtab-td ";}if(Ac.cet){Av[5]+="sc_"+this.parent.k;this.addHilitePosition(Ac.cet,Ao,A1);}if(Ac.lv){Av[5]+=" ra ";}Ad=Ac.rowType;if(Ad){Av[5]+=V[Ad]||"";var AJ=AY.getRowHeight(Ad);if(AJ){Al[An]='<tr style="height:'+(AJ?AJ+"px":"")+'">';}}Av[3]=Ac.cs||1;Av[7]=Ac._ei!==undefined?Ac._ei:"";if(Ac.fs||Ac._e){this.addTitleHeaderPositionMap(Ao,A1+Ai,Ac);}if(Ac._ei!=null){this.addPositionMap(Ac._ei,Ao,A1+Ai);}Av[11]=Ao;if(Ac.ts===K){var AP=Ac.v;if(this.imgCacheMap){var As=this.imgCacheMap,Am=AP&&AP.replace(/\\/g,"/");if(As.cachedImg[Am]){Ac.v=AP=As.baseURL+As.cachedImg[Am];}else{if(Am&&!As.unCachedImg[Am]){As.unCachedImg[Am]=Am;}}}else{var w=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model.dataService;if(w&&w.getImage){AP=w.getImage(AP);}}if(Ac.rowType){var o=(AY.getRowHeight(Ac.rowType)||AY.rh||Ah),Ap=o,AU=this.tdWidths,Af=Ac.colIdx,AZ=0,At=0;var A0=AY.getPadding(O),AW=AY.getPadding(A);if(Ac.rowType===Z||Ac.rowType===g){At=o>(A0+AW)?(o-A0-AW):0;}else{if(Ac.rowType===a||Ac.rowType===F){At=o>2*AW?(o-2*AW):0;}else{if(Ac.rowType===L){At=o>(AW*2)?(o-AW*2):0;}}}if(Af!=="undefined"&&Af>-1&&AU&&AU.length>Af){var AN=AU[Af]&&AU[Af].w;if(AN!=="undefined"){AZ=parseInt(AN,10);}}var AS=AZ>30?(AZ-30):0;Av[13]='<div><div style="top:'+(-parseInt(Ap/2,10))+"px;height:"+(o-1)+"px;line-height:"+(o-1)+'px !important;">&nbsp;<img style="max-height:'+At+"px; max-width: "+AS+'px;" src="'+AP+'"></img></div></div>';}else{Av[9]="";var Az="",z=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model,t=z.getZoomFactor();if(t!=1){Az='onload="this.style.height='+t+"*this.offsetHeight+'px';\"";}Av[13]='<img src="'+AP+'" '+Az+"></img>";if(Ac.css&&Ac.css.indexOf("hl")>-1){Av[13]="<span>"+Av[13]+"</span>";}}}else{Av[9]="";if(mstrApp.useBinaryFormat&&Ac.v&&Ac.v.indexOf("img")>=0){Ac.v=X.call(this,Ac.v);}Av[13]=R(Ac,AY);}if(A1<p){if(Ao===AV&&this.mergeHdrsAcrossBlks){var Ab=this.rowHdsAcrossBlks;if(AT&&Ac.v&&Ab&&Ab[A1]){if(Ac.v===Ab[A1].v){Av[1]=Ac.rs||1;Av[5]=B+Ac.css;Av[13]="";this.matchedHdrsAcrossBlks.push(Ab[A1]);}else{AT=false;}}}if(AK){if(x){s=AM(AY,Ao-AC,Aa);if(!!s){Av[5]=s+Av[5];if(s.indexOf(B)>=0&&Ao-AC>1){Av[13]=W;}}else{x=false;}s=AM(AY,AD(Ao-AC,Av[1]),Aa);if(!!s){Av[5]=I+Av[5];x=true;}}}if(Av[1]>=Aj&&Ac.v){Ar.push({rows:Ao-AV,cells:A1,v:Ac.v});}}Aa+=Ac.cs||1;Al[Ax++]=Av.join("");}Al[Ax++]="</tr>";for(A1=Au.length-1;A1>=0;A1--){Am=Au[A1];if(Am<=1){Au.pop();}else{Au[A1]=--Am;}}l=Au.length;}Al[Ax++]=u||"</tbody></table>";this.rowHdsAcrossBlks=Ar;return Al;},addHilitePosition:function(k,l,j){var o=this.hiliteCellsMap[k];if(!o){this.hiliteCellsMap[k]={pos:[],nodes:[]};}this.hiliteCellsMap[k].pos.push({row:l,cell:j,page:0});},addExtraInfoMap:function(k,j,l){if(!this.eiMap[k]){this.eiMap[k]=[];}this.eiMap[k].push({row:j,cell:l,page:0});},addPositionMap:function(k,j,l){if(!this.posMap[k]){this.posMap[k]={row:j,cell:l,page:0};}},addTitleHeaderPositionMap:function(j,l,k){this.thPosMap.push({row:j,cell:l,page:0,obj:k});},clearHilites:function(o){var s=this.hiliteCellsMap[o],q=s&&s.nodes,p=this.parent;if(q){if(q.length==0&&s.pos){q=this.getNodesByPositions(s.pos);}for(var l=0,k=q.length;l<k;l++){var r=q[l],j=p.getCellForNode(r);if(j){delete j.cet;}f.removeClass(r,"sc_"+p.k);}this.hiliteCellsMap[o].nodes=[];}},setHilites:function(k,l){f.addClass(l,"sc_"+this.parent.k);if(!this.hiliteCellsMap[k]){this.hiliteCellsMap[k]={pos:[],nodes:[]};}this.hiliteCellsMap[k].nodes.push(l);var j=this.parent.getCellForNode(l);if(j){j.cet=k;}},getNodesByPositions:function(p){var o=this.tableNode,j=[];for(var l in p){var k=p[l];j.push(o.tBodies[0].rows[k.row].cells[k.cell]);}return j;},preBuildGridTable:function C(){},postBuildGridTable:function M(){this.addSlots({tableNode:this.gridContainerNode&&this.gridContainerNode.firstChild});}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css,G=mstrmojo.array;function F(H,J){var I={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[H]||{};if(typeof J==="object"){mstrmojo.hash.copy(J,I);}return I;}var B="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,forceResetCache:false,onUpdateSearchParams:mstrmojo.emptyFn,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(4326,"Case Sensitive")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},searchNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},optionNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function E(H){var J=this;var I=J.searchTimer;if(I){window.clearTimeout(I);}J.searchTimer=window.setTimeout(function(){J.onkeyupDelayed(H);delete J._searchTimer;},parseInt(H.e.keyCode||H.e.charCode,10)===13?0:J.searchDelay);},onkeyupDelayed:function A(I){var H=I.hWin,K=I.e||H.event;var J=mstrmojo.string.trim(this.inputNode.value);if(this.searchNode){C.toggleClass(this.searchNode,["clear"],J.length>0);}this.showTaskError=false;this.click2Search=false;if(J.length==0||this.autoSubmit||this.onEnter&&K.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(I){var H=I.hWin,K=I.e||H.event,M=K.target||K.srcElement,L=M&&M.id;switch(L.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var J=this.optionNode.parentNode.style;J.display=J.display=="block"?"none":"block";}break;case"sbSearch":if(this.inputNode.value.length>0){this.clearSearch();}break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);var I=this.searchCache,H=this.rootID;if(I&&I[H]){I[H][B]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache(this.forceResetCache);var I=this.searchCache[this.rootID];if(I){var H=I[B]||"";this.inputNode.value=H;if(H.length>0){if(H.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(I){var H=this.contentWidget||this;H.set("items",I[0]);if(this.supportIncFetch){var J=I[1],L=I[2],K=this.blockCount;H.set("ifs",{np:Math.floor(J/K)+((J%K>0)?1:0),cp:Math.floor(L/K)+((L%K>0)?1:0)});}},_onsearch:function(H){this.getRootID();this._setupCache();var K=mstrmojo.string.trim(this.inputNode.value);if(K.length===0){H=true;}var L=this.token[this.taskId];if(L.test(K)){}if(this.searchPattern==K&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var M=this.rootID,J=this.searchCache[M];if((K.length<this.minSearchLength&&!this.click2Search)&&!H){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(J[M]);this.searchPattern=K;}}else{this.searchPattern=K;J[B]=this.searchPattern;var I=this.filterCache(K,J,H);if((this.click2Search||I===null)&&!H){this.blockBegin=1;this.fetch();return ;}else{this._notifyContentWidget(I);}}J[B]=K;},_setupCache:function(J){var K=this.searchCache,I=this.rootID;if(K&&(J||!K[I])){K[I]=K[I]||{};var H=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];K[I][I]=[H,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",serverRequest:function D(H,I){mstrmojo.xhr.request("POST",this.path,I,H,undefined,this.XServer,this.baseParams);},fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var H=this,I=F.apply(this,[this.taskId]);I.searchPattern=this.searchPattern;this.onUpdateSearchParams(I);var J={success:function(K){var L=K.items||K.es||[];L=[L,K.totalSize||K.sz||0,K.blockBegin||K.bb];mstrmojo.all[H.id].searchCache[H.rootID][(I.searchPattern.length==0?H.rootID:H.buildIndex(I.searchPattern))]=L;H._notifyContentWidget(L);},failure:function(K){if(H.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+K.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(H.spinnerNode){H.spinnerNode.style.display="none";}if(H.postFetch){H.postFetch();}}};this.serverRequest(I,J);},fetchPage:function(H){this.blockBegin=H*this.blockCount+1;this.fetch();},filterCache:function(J,M,I){var H=M&&M[I?this.rootID:this.buildIndex(J)];if(H){return H;}var K=this.token[this.taskId];if(K.test(J)||this.totalSize>this.blockCount){return null;}var O=J.replace(/.$/,"");H=M&&M[this.buildIndex(O)];while(H===undefined&&(O=O.replace(/.$/,"")).length>0){H=M&&M[this.buildIndex(O)];}if(H!==undefined){if(H[1]>this.blockCount){return null;}var L=H[0],N=[];G.forEach(L,function(P){if(P.n.search(new RegExp(J,this.matchCase?"":"i"))>-1){N.push(P);}});this.totalSize=N.length;return(M[this.buildIndex(J)]=[N,N.length,this.blockBegin].concat());}return null;},buildIndex:function(H){if(H.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?H.toUpperCase():H+"::0";},init:function(H){if(this._super){this._super(H);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css");var C=mstrmojo.Widget;mstrmojo.ui.Checkbox=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ui.Checkbox",markupString:'<div id="{@id}" class="mstrmojo-ui-Checkbox {@cssClass}" mstrAttach:click></div>',markupMethods:{onvisibleChange:C.visibleMarkupMethod,oncheckedChange:function B(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},onenabledChange:C.enabledMarkupMethod},checked:false,onclick:function A(){this.set("checked",!this.checked);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasEditableText","mstrmojo.css","mstrmojo.string","mstrmojo.dom");var C=mstrmojo.css,A=mstrmojo.dom,F=mstrmojo.string,E=function(H){this._super&&this._super(H);A.stopPropogation(H.hWin,H.e);},G=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.DynamicNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasEditableText],{scriptClass:"mstrmojo.fe.DynamicNode",markupString:'<div id="{@id}" class="mstrmojo-dynamic {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-dynamic-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-dynamic-prefix-text"  mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">'+G+'<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-onhoverparent mstrmojo-dynamicNode" title="'+mstrmojo.desc(13229,"Add this condition to the target list of a selector.")+'"><span class="mstrmojo-dynamicNode-info"><span class="mstrmojo-textset"></span></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" ></img></span><span class="mstrmojo-textset mstrmojo-rename-text" mstrAttach:click >'+mstrmojo.desc(1388,"Rename")+"</span>"+G+"</div></div>",markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},dynamicNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.lastChild.firstChild.lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},createSetNode:function(){return this.domNode.lastChild.lastChild;},renameNode:function(){return this.domNode.lastChild.childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){C.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){C.toggleClass(this.dynamicNode,["selected"],this.selected);},onisEditingChange:function(){C.toggleClass(this.domNode,["renaming"],this.isEditing);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=this.data.ph.n;},onglowChange:function(){var H=this;C.toggleClass(H.dynamicNode,["glow"],this.glow);if(this.glow){setTimeout(function(){C.toggleClass(H.dynamicNode,["glow"],false);H.glow=false;},1000);}},onnoRelationOperatorChange:function(){C.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){C.toggleClass(this.dynamicNode,["noRelation"],this.noRelation);}},editableSlot:"textNode",editButtonSlot:"renameNode",init:function(H){var J=H.data;if(J){var I=H.tree.nameFactory;if(J.ph.n){I.setName(J.ph.n,this);}else{J.ph.n=I.getNewName(this,mstrmojo.desc(12033,"Dynamic Condition")+" ");}}this._super(H);},_set_data:function(K,H){var I=this.data,J=(I!==H);if(J){this.data=H;this.text=H.ph.n;}return J;},preclick:function D(H){var J=null,I=A.eventTarget(H.hWin,H.e);if(A.contains(this.prefixNode,I,true)){J="andor";}else{if(A.contains(this.createSetOptNode,I,true)&&!this.noRelationOperator&&!this.noRelation){J="createSetOpt";}else{if(A.contains(this.createSetNode,I,true)&&!this.noRelation){J="createSet";}else{if(A.contains(this.renameNode,I,true)){this.set("isEditing",true);}}}}H.part=J;},isEmpty:function(){var I=this.data,H=I&&I.ph;return !(H&&H.n);},del:function B(){var I=this.parent,H=this.tree.nameFactory;if(I&&I.remove&&this.data){I.remove(this.data);H.removeName(this.data.ph.n);}},onkeyup:E,onkeydown:E,onTextEditComplete:function(){var J=this.tree,K=J.nameFactory,H=F.trim(this.text||""),I=this.data.ph.n;if(H&&H!==I){if(K.isNameExist(H)){K.names[H].set("glow",true);this.set("isEditing",true);}else{K.changeName(I,H,this);this.data.ph.n=H;}}},isSelectableArea:function(H){return mstrmojo.dom.contains(this.dynamicNode,H,true);},avatarCssCls:"mstrmojo-FE mstrmojo-dynamicNode",getAvatarNode:function(){return this.dynamicNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.dom","mstrmojo.num","mstrmojo._TouchGestures");var O=mstrmojo.dom,S=mstrmojo.css,D=Math.min,E=Math.max,Q=Math.round,N=mstrmojo.num,F=N.countOfDecimals;function B(){var a=document.defaultView.getComputedStyle,Z=[this.leftNode,this.rightNode],e=["border-left-width","padding-left","margin-left","border-right-width","padding-right","margin-right"],d=[0,0],Y,X;for(Y=0;Y<Z.length;Y++){var b=a(Z[Y]);for(X=0;X<e.length;X++){d[Y]+=parseInt(b.getPropertyValue(e[X]),10)||0;}}this._lnExt=d[0];this._rnExt=d[1];if(!this._thumbLen){this._thumbLen=parseInt(this.thumbNode.offsetWidth,10);}this._length=this.domNode.clientWidth;this._effLen=Q(this._length-this._thumbLen);this._unitLen=this._effLen/(this.max-this.min);}function V(Y){var b=this.min,a=this._unitLen,Z=this._thumbLen/2,X=Q((Y-b)*a);this.leftNode.style.width=(X+Z-this._lnExt)+"px";this.rightNode.style.width=(this._effLen-X+Z-this._rnExt)+"px";O.translate(this.thumbNode,E(D(X,(this.max-b)*a),0),0);}function T(Y,Z){var X=this.interval;return D(E(this.min,parseFloat(Y,10)+Q(Z/this._unitLen/X)*X),this.max).toFixed(this._intervalDecimals);}function H(X){return T.call(this,this.min,X-O.position(this.domNode,true).x-this._thumbLen/2);}function J(X){return function(Y){return this["touchSelect"+X](Y);};}mstrmojo.ui.MobileSlider=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._TouchGestures],{markupString:'<div class="mstrmojo-MobileSlider" style="visibility:hidden;"><div class="v"></div><div class="bk"></div><div class="th"><div></div></div><div class="min">{@minText}</div><div class="max">{@maxText}</div></div>',markupSlots:{leftNode:function(){return this.domNode.childNodes[0];},rightNode:function(){return this.domNode.childNodes[1];},thumbNode:function(){return this.domNode.childNodes[2];},minNode:function(){return this.domNode.childNodes[3];},maxNode:function(){return this.domNode.childNodes[4];}},markupMethods:{onvalueChange:function(){if(this.hasRendered){V.apply(this,[this.value]);}if(this.slidingValue!==this.value){this.set("slidingValue",this.value);}},onslidingValueChange:function(){if(this.hasRendered){V.apply(this,[this.slidingValue]);}}},value:0,slidingValue:0,max:10,min:0,interval:1,_intervalDecimals:0,init:function M(X){this._super(X);this._intervalDecimals=F(this.interval,".");},onintervalChange:function K(Y,X){this._intervalDecimals=F(X,".");},preBuildRendering:function C(){this.minText=N.toLocaleString(this.min);this.maxText=N.toLocaleString(this.max);this._super();},postBuildRendering:function R(){this._super();B.call(this);V.call(this,this.value);this.domNode.style.visibility="visible";},resize:function U(){B.call(this);V.call(this,this.value);},touchBegin:function L(X){X.stop();},touchSelectBegin:function A(Y){var X=Y.target;if(!X||X!==this.thumbNode){return this.bubbleTouchEvent(Y);}S.addClass(this.domNode,"active");this.slidingValue=this.value;},touchSelectMove:function G(X){this.set("slidingValue",T.apply(this,[this.value,X.delta.x||0]));},touchSelectEnd:function I(X){S.removeClass(this.domNode,"active");this.set("slidingValue",T.apply(this,[this.value,X.delta.x||0]));this.set("value",this.slidingValue);},touchSwipeBegin:J("Begin"),touchSwipeMove:J("Move"),touchSwipeEnd:J("End"),onclick:function W(Y,X){this.touchTap({clientX:O.getMousePosition(Y.e,X).x});},touchTap:function P(X){this.set("value",H.call(this,X.clientX));}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport");var BasicAggMap={"8107C31BDD9911D3B98100C04F2233EA":"Sum","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C32CDD9911D3B98100C04F2233EA":"Product",B2C0FA4020C711D6AD1400C04F0423DE:"Greatest","8107C330DD9911D3B98100C04F2233EA":"Var","8107C32FDD9911D3B98100C04F2233EA":"Stdev","8107C32DDD9911D3B98100C04F2233EA":"Median",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31CDD9911D3B98100C04F2233EA":"Count","8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",B2C0FA4120C711D6AD1400C04F0423DE:"Least"},RankMap={"8107C326DD9911D3B98100C04F2233EA":"Rank"},OLAPAggMap={D221F90EB35540E3A1204ED6CC9A8267:"Avg",D221F90FB35540E3A1204ED6CC9A8267:"Count",D221F910B35540E3A1204ED6CC9A8267:"Max",D221F911B35540E3A1204ED6CC9A8267:"Min",D221F90DB35540E3A1204ED6CC9A8267:"Sum"},MovingAggMap={"8107C32ADD9911D3B98100C04F2233EA":"Avg","8107C350DD9911D3B98100C04F2233EA":"Count","8107C34BDD9911D3B98100C04F2233EA":"Max","8107C34CDD9911D3B98100C04F2233EA":"Min","8107C32BDD9911D3B98100C04F2233EA":"Sum"},RunningAggMap={"8107C329DD9911D3B98100C04F2233EA":"Avg","8107C354DD9911D3B98100C04F2233EA":"Count","8107C351DD9911D3B98100C04F2233EA":"Max","8107C352DD9911D3B98100C04F2233EA":"Min","8107C328DD9911D3B98100C04F2233EA":"Sum"},BandingMap={"8107C337DD9911D3B98100C04F2233EA":"Banding","8107C338DD9911D3B98100C04F2233EA":"BandingC","8107C339DD9911D3B98100C04F2233EA":"BandingP"};function _sortFunctions(fcts){var fs=function(a,b){return mstrmojo.array.stringSorter(a.n,b.n);},i,len;fcts=fcts.sort(fs);for(i=0,len=fcts.length;i<len;i++){fcts[i].fns=fcts[i].fns.sort(fs);}return fcts;}function getFuncCatIndex(fcts,funcDid){var len=fcts.length,ci;for(ci=0;ci<len;ci++){var fns=fcts[ci].fns;if(mstrmojo.array.find(fns,"did",funcDid)>-1){return ci;}}return -1;}function buildTaskParams(params){var qse=mstrApp&&mstrApp.useQuickSearch&&mstrApp.useQuickSearch();params=mstrmojo.hash.copy(params,{taskId:"searchMetadata",recursive:true,styleName:"MojoFolderStyle",includeObjectDesc:true,includeAncestorInfo:false});if(qse){params.quickSearch=qse;params.nameWildcards=16;params.sortKey=-1;}return params;}function serverRequest(callback,taskParams){if(mstrApp.serverRequest){mstrApp.serverRequest(taskParams,callback);}else{window.$MAPF=function(){return false;};this.getServerProxy().request(callback,taskParams,false,{});}}mstrmojo.ME.MetricDataService=mstrmojo.provide("mstrmojo.ME.MetricDataService",{rootFolderTypes:{ALL:39,FILTERS:4,METRICS:5,FACTS:29,SCHEMA:24,ATTRIBUTES:26,TRANSFORMATIONS:38},blockCount:10,suggestCount:10,suggestDelay:200,noCache:true,functions:null,metricComponents:null,functionsDetails:null,getServerProxy:function getServerProxy(){if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}return this.serverProxy;},getMetricDefintion:function getMetricDefintion(params,callbacks){var taskParams={taskId:"getMetricDefinition",metricId:params.id,outputFlags:65599};if(params.msgID){taskParams.msgID=params.msgID;}serverRequest.call(this,callbacks,taskParams);},validateMetric:function validateMetric(params,callbacks){var taskParams={taskId:"validateMetric",metricId:params.metricId,tokenStreamXML:params.tokenStreamXML,metricXML:params.metricXML,outputFlags:327695};if(mstrmojo.string.isEmpty(params.metricId)){taskParams.isNew=true;}if(params.msgID){taskParams.msgID=params.msgID;}if(params.formID){taskParams.frmid=params.formID;}if(params.isIDForm){taskParams.isIDForm=params.isIDForm;}if(params.objectType){taskParams.objectType=params.objectType;}serverRequest.call(this,callbacks,taskParams);},getMetricComponents:function getMetricComponents(params,callbacks){var me=this,mc=this.metricComponents;if(!this.noCache&&mc&&mc.items.length==mc.sz){callbacks.success(mc);return ;}callbacks.success=mstrmojo.func.composite([callbacks.success,function(res){if(me.metricComponents&&me.metricComponents.items){me.metricComponents.items.push(res.items);}else{me.metricComponents=res;}}]);var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||24,objectType:params.objectType||"12,13,43"});serverRequest.call(this,callbacks,taskParams);},getAttributes:function getAttributes(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||26,objectType:12});serverRequest.call(this,callbacks,taskParams);},getFacts:function getFacts(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||29,objectType:13});serverRequest.call(this,callbacks,taskParams);},getMetrics:function getMetrics(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||5,objectType:4});if(params.isVerify){taskParams.nameWildcards=2;}serverRequest.call(this,callbacks,taskParams);},getFunctions:function getFunctions(callbacks){var me=this,wss=window.sessionStorage,fcts=this.functions||(wss&&wss.getItem("functions")),localeId=wss&&wss.getItem("mstrLocaleId"),cLocaleId=mstrApp&&mstrApp.localeId;if(fcts&&localeId==cLocaleId){fcts=_sortFunctions(eval("("+fcts+")").fncs);callbacks.success(fcts);}else{var cb={failure:callbacks.failure,textResponse:true},taskParams={taskId:"getSystemFunctions",includeFunctionDetails:true,functionFlags:2|2147483648,includeFunctionHelpTopic:true};cb.success=function(res){if(typeof res==="string"||!mstrApp.isSingleTier){if(wss){wss.setItem("functions",res);wss.setItem("mstrLocaleId",cLocaleId);}me.functions=res;fcts=_sortFunctions(eval("("+res+")").fncs);}else{fcts=_sortFunctions(res.fncs);me.functions=JSON.stringify(res);}callbacks.success(fcts);};serverRequest.call(this,cb,taskParams);}},getAggFunctions:function getAggFunctions(){if(this._aggFunctions){return this._aggFunctions;}var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.array.filter(fcts[this.getBasicCategoryIndex(fcts)].fns,function(item){var did=item.did,retVal;if(did!=="B2C0FA4020C711D6AD1400C04F0423DE"&&did!=="B2C0FA4120C711D6AD1400C04F0423DE"){retVal=BasicAggMap[did];}return retVal;});return fcts;},getOLAPAggFunctions:function getOLAPAggFunctions(type){var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.array.filter(fcts[this.getOLAPCategoryIndex(fcts)].fns,function(item){switch(type){case"moving":return MovingAggMap[item.did];case"running":return RunningAggMap[item.did];case"olap":default:return OLAPAggMap[item.did];}return false;});return fcts;},getFunctionCatList:function getFunctionCatList(){if(this._functionCatList){return this._functionCatList;}var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.hash.make(fcts,mstrmojo.Arr);this._functionCatList=fcts;return fcts;},getCategoryIndex:function getCategoryIndex(funcDid,fcts){return getFuncCatIndex(fcts||this.getFunctionCatList(),funcDid);},getBasicCategoryIndex:function getBasicCategoryIndex(fcts){var Agg_Func_Greatest="B2C0FA4020C711D6AD1400C04F0423DE";return getFuncCatIndex(fcts||this.getFunctionCatList(),Agg_Func_Greatest);},getDataMiningCatIndex:function getDataMiningCatIndex(fcts){var DataMining_Func_MiningModel="F17CD4F3FF134D91B80DDAB9CA73C919";return getFuncCatIndex(fcts||this.getFunctionCatList(),DataMining_Func_MiningModel);},getDateTimeCategoryIndex:function getDateTimeCategoryIndex(fcts){var DateTime_Func_Date="C50F2A4F75AE49D6B20E00224967B500";return getFuncCatIndex(fcts||this.getFunctionCatList(),DateTime_Func_Date);},getStringCategoryIndex:function getStringCategoryIndex(fcts){var String_Func_Concat="6F7DF5FF449111D5BEA300B0D01A55EF";return getFuncCatIndex(fcts||this.getFunctionCatList(),String_Func_Concat);},getOLAPCategoryIndex:function getBasicCategoryIndex(fcts){var OLAP_Func_Avg="D221F90EB35540E3A1204ED6CC9A8267";return getFuncCatIndex(fcts||this.getFunctionCatList(),OLAP_Func_Avg);},getInternalCategoryIndex:function getInternalCategoryIndex(fcts){var INTER_Func_Band="8107C337DD9911D3B98100C04F2233EA";return getFuncCatIndex(fcts||this.getFunctionCatList(),INTER_Func_Band);},getFunctionDetails:function getFunctionDetails(params,callbacks){var taskParams={taskId:"getSystemFunctions",functionId:params.did,includeFunctionDetails:true,includeFunctionHelpTopic:true};serverRequest.call(this,callbacks,taskParams);},getTransformations:function getTransformations(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||38,objectType:43});serverRequest.call(this,callbacks,taskParams);},getFilters:function getFilters(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||4,objectType:1});serverRequest.call(this,callbacks,taskParams);},getAttributeForms:function getAttributeForms(params,callbacks){var taskParams={taskId:"getAttributeForms",attributeID:params.attributeID,displayedForms:params.displayedForms,styleName:"WidgetElementListStyle"};serverRequest.call(this,callbacks,taskParams);},getSubtotalFunctions:function getSubTotalFunctions(params,callbacks){var taskParams=buildTaskParams({objectType:"1025,1026",searchPattern:""});serverRequest.call(this,callbacks,taskParams);},isBasicAggMap:function isBasicAggMap(did){var retVal=!!BasicAggMap[did];if(did==="B2C0FA4020C711D6AD1400C04F0423DE"||did==="B2C0FA4120C711D6AD1400C04F0423DE"){retVal=false;}return retVal;},isOLAPAgg:function isOLAPAgg(did){return !!OLAPAggMap[did];},isMovingAgg:function isMovingAgg(did){return !!MovingAggMap[did];},isRunningAgg:function isRunningAgg(did){return !!RunningAggMap[did];},isBanding:function isBanding(did){return !!BandingMap[did];},isOLAP:function isOLAP(did){var fcts=this.getFunctionCatList(),olapFns=fcts[this.getOLAPCategoryIndex(fcts)].fns;return mstrmojo.array.find(olapFns,"did",did)>-1;},isRank:function isRank(did){return !!RankMap[did];},isScalar:function isScalar(fctOi){return(fctOi||{}).sqt===3;},getFunctionHelpTopic:function getFunctionHelpTopic(h){return'<a href="'+((mstrApp.helpUrl||"../help/")+"FunctionsRef/index.html?context=functionsref&topic="+(h||""))+'" target="_new">'+mstrmojo.desc(5811,"Details ...")+"</a>";},sortFunctions:function sortFunctions(functions){var allfuncs={},fs=function(a,b){return mstrmojo.array.stringSorter(a.n,b.n);};mstrmojo.array.forEach(functions,function(funcs){mstrmojo.array.forEach(funcs&&funcs.fns,function(func){if(func&&func.did){allfuncs[func.did]=func;}});});return mstrmojo.hash.valarray(allfuncs).sort(fs);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo._TouchGestures","mstrmojo.TouchScroller");var L=mstrmojo.array.forEach,E=mstrmojo.hash.forEach,Z=mstrmojo.dom;function O(f,g){var e;for(e in f){Z.translate(f[e],g[0],g[1],g[2]);}}function R(f){var e=Math.abs;return{x:(e(f.accelDelta.x)<e(f.accelDelta.y)),y:(e(f.accelDelta.y)<e(f.accelDelta.x))};}function J(f,g){f.raiseEvent({name:"scrolledOut",value:g.value,axis:g.axis,direction:g.direction});}function Q(f,k,p,l,q,e,j,g){var o=new mstrmojo.TouchScroller({scrollEl:f,vScroll:p,hScroll:l,frameRate:q,showScrollbars:e,offset:k,origin:{x:0,y:0},bounces:false,useTranslate3d:false,indicatorEl:g});if(j){o.friction=j;}return o;}function B(e){var f;for(f in e){if(e[f].decelerating){e[f].stopDeceleration();}}}var S={x:false,y:false};function U(){var e=S;if(!e.x){return"x";}if(!e.y){return"y";}return null;}var P={x:false,y:false};function N(h,j){var f=U(),g=h.scrollerConfig.scrollPast;if(!f||!g){return !!f&&!g;}function e(o){var k=h.viewport,l=h._TSN[o],s=h._scroller[o],t=h.tPos[o],p=j[o],u=P[o],q=(o==="x")?"y":"x",x=h._scroller[q],w=P[q],r;if(!x[0].decelerating&&w){e(q);}if(t<=0&&p>0){if(!u){if(w){return false;}O(l,[0,0,0]);for(r in s){s[r].scrollEl=k;}P[o]=true;}}else{if(u){O([k],[0,0,0]);for(r in s){s[r].scrollEl=l[r];}P[o]=false;}}return true;}return e(f);}function F(o,e){var j=e.axis,h=o.scrollboxHeightFixed,l=e.name;if(o.ss){var k=o.zones._BR.getRowInfoByPosition(e[j]);k.position=e[j];o.ss.onMove(k);}o.tPos[j]=e[j];if(l==="scrollDone"){E(o._scroller,function(p){L(p,function(q){q.toggleScrollBars(false);});});if(!N(o,e)){return true;}}if(j==="y"){var g=function(p){if(!o._isDownloading&&(-p<=o._TMAX[j])){if(o.onScrolledToLastRow){o.onScrolledToLastRow();}}};if(l==="scrollDone"){delete o._isDecelerating;if(o._cachedDownload){o.dataDownloaded();}else{g(e.y);}if(h){var f=e.y;o.notifyScrollListeners({x:e.x,y:Math.max(f,0)});}}else{if(l==="scrollDecel"){o._isDecelerating=true;g(e.fY);if(h){o.notifyScrollListeners({x:e.fX,y:e.fY});}}else{if(l==="scrollOut"){o._isDecelerating=true;g(e.y.position);}}}}}function I(h,g){var e=Math.abs,j={};var f=j[g]={start:h._TMIN[g],end:e(h._TMAX[g])};j.scrollPast=h.scrollerConfig.scrollPast;if(g==="y"){if(h.useSeamlessIncFetch){f.incFetch=!h.endFetching;f.pageSize=h.scrollboxHeight-((parseInt(h.gridData.rh,10)||25)*4);}}return j;}function W(e){e._scroller={x:[],y:[]};var f=e._viewportCoords;E(e._TSN,function(j,k){var p=I(e,k),l=(k==="y"),o=(k==="x"),g=j.length;L(j,function(t,s){var r=Q(t,p,l,o,e.frameRate,(s===g-1)&&e.scrollerConfig.showScrollbars,e.scrollerFriction,e.domNode);r.updateScrollBars(f,e.domNode);e._scroller[k][s]=r;});var q=e._scroller[k][0],h=["scrollDone","scrollMoved"];if(q){if(l){h=h.concat(["scrollDecel","scrollOut"]);}L(h,function(r){q.attachEventListener(r,e.id,function(s){s.axis=k;F(e,s);});});}});}function A(f){if(this.hasRendered){this[f+"Limit"]=parseInt(this[f],10);if(this.zones){var e=this;window.setTimeout(function(){if(e.hasRendered){e.setOffsets(true);e.setupScrollers();}},0);}}}mstrmojo._HasXtabTouchScroll=mstrmojo.provide("mstrmojo._HasXtabTouchScroll",{noScrolling:false,useTouchScrolling:true,scrollerConfig:{showScrollbars:false,scrollPast:false},_TSN:null,tPos:{x:0,y:0},_TMIN:{x:0,y:0},setupTNs:function T(){this._TSN.x=this._TSN.y=[this.domNode];},touchBegin:function X(j){if(!this.noScrolling){j.stop();if(!this._isDownloading){if(this.toolbarMgr){this.toolbarMgr.closeToolbar();}var h=this._scroller,f=this._TMIN,e=this._TMAX;E(this.tPos,function(k,l){if(k>=f[l]&&k<=Math.abs(e[l])){B(h[l]);}});}var g=this._scroller.x;E(g,function(k){k.origin.x=g[0].origin.x;});}return true;},touchSwipeBegin:function V(l){if(this.noScrolling){return this.bubbleTouchEvent(l);}if(this._isDownloading){return false;}S=R(l);var g=S.y?"x":"y",e=this._scroller[g][0],j=e.offset,h=j[g][l.direction[g]?"end":"start"];if(!j.scrollPast&&h===e.origin[g]){var k=this.bubbleTouchEvent(l);if(k!==undefined){return k;}}var f=this._scroller;if(!N(this,l.delta)){return true;}if(!S.x){B(f.x);}if(!S.y){B(f.y);}E(this._scroller,function(p,o){if(!S[o]){L(p,function(q){q.toggleScrollBars(true);});}});return true;},touchSwipeMove:function D(f){if(!N(this,f.delta)){return true;}var e=this._scroller;L(["x","y"],function(g){if(!S[g]){E(e[g],function(h){h.scroll(f);});}});},touchSwipeEnd:function Y(l){var f=S,h=null,k=l.delta,j=l.direction;if(!f.x&&k.x!==0){h="x";j=j.x?"left":"right";}if(!f.y&&k.y!==0){h="y";j=j.y?"up":"down";}if(h){J(this,{axis:h,value:this.tPos[h],direction:j});var e=this._scroller[h],g;if(!f[h]){for(g in e){e[g].scrollEnd(l);}}}},gridPagesRendered:function C(){if(this._super){this._super();}this.setOffsets(true);},renderEmptyGrid:function G(){if(this._super){this._super();}this.noScrolling=true;},postBuildRendering:function b(){if(this._super){this._super();}if(this.zones&&!this.gridData.eg){var e=this;window.setTimeout(function(){if(e.hasRendered){e._TSN={x:[],y:[]};e.setupTNs();e.setupScrollers();}},0);}},setOffsets:function d(){var h=this,g=this.domNode,f=this.zones,k=f._TR,e=f._BL,j=(!this.isFullScreenWidget&&this.isDocXtab),l=this._viewportCoords={top:k?k.cp.rc*parseInt(this.gridData.rh,10):0,right:j?this.widthLimit:parseInt(this.width,10),bottom:j?this.heightLimit:parseInt(this.height,10),left:e?e.totalColWidth:0};E(this._scroller,function(p,o){L(p,function(q){q.offset=I(h,o);q.updateScrollBars(l,g);var r=q.origin;if(r){q.scrollTo(r.x,r.y);}});});},setupScrollers:function H(){var g=this.gridData,f=this._TMAX,e=this.noScrolling=((g&&g.co)||(!this.scrollerConfig.scrollPast&&f.x===0&&f.y===0));if(!e&&!this._scroller){P={x:false,y:false};O(this._TSN.x,[0,0,0]);O(this._TSN.y,[0,0,0]);W(this);}},onwidthChange:function M(){A.call(this,"width");if(this._super){this._super();}},onheightChange:function K(){A.call(this,"height");if(this._super){this._super();}},unrender:function a(e){E(this._scroller,function(f){L(f,function(g){g.destroy();});});delete this._scroller;if(this._super){this._super(e);}}});}());(function(){mstrmojo.requiresCls("mstrmojo._TouchGestures","mstrmojo.css","mstrmojo.dom","mstrmojo.hash");mstrmojo.android.ui._IsTouchLink=mstrmojo.provide("mstrmojo.android.ui._IsTouchLink",mstrmojo.hash.copy(mstrmojo._TouchGestures,{_mixinName:"mstrmojo.android.ui._IsTouchLink",ontouchend:function(B){if(!this.linkEnabled){return ;}if(!B.e.handled){var C=this.domNode,A=document.createElement("div"),D=this.id;A.className="activeLink on";C.appendChild(A);window.setTimeout(function(){var E=mstrmojo.all[D];if(E&&E.hasRendered){mstrmojo.dom.attachOneTimeEvent(A,"webkitTransitionEnd",function(){C.removeChild(A);});mstrmojo.css.removeClass(A,"on");}},200);this.onclick();}}}));}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.WebOI","mstrmojo.mstr.WebElements");mstrmojo.mstr.WebAttribute=mstrmojo.declare(mstrmojo.mstr.WebOI,null,{scriptClass:"mstrmojo.mstr.WebAttribute",t:12,elemTotalSize:0,browseConfig:null,init:function(A){var B=this.browseConfig={};if(A){if(A.bb){B.blockBegin=A.bb;delete A.bb;}if(A.bc){B.blockCount=A.bc;delete A.bc;}if(A.sz){this.totalSize=A.sz;delete A.sz;}}this.browseConfig={};this._super(A);},getElements:function(A){A=mstrmojo.hash.copy((this.browseConfig||{}),(A||{}));return new mstrmojo.mstr.WebElements({source:this,totalSize:this.totalSize||0,browseConfig:A});}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog");mstrmojo.android.nativedialog.DatePickerDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.DatePickerDialog",type:7,populateConfig:function A(){this._super();var B=this.children[0].dtValue.date;this.config.year=B.year;this.config.month=B.month;this.config.day=B.day;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog");mstrmojo.android.nativedialog.TimePickerDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.TimePickerDialog",type:6,populateConfig:function A(){this._super();var C=this.children[0],B=(C.dtValue||C.value).time;this.config.hour=B.hour;this.config.min=B.min;this.config.is24Hour=C.is24HourMode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog");mstrmojo.android.nativedialog.AlertDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.AlertDialog",type:4,populateConfig:function A(){this._super();var B=this.children&&this.children.length&&this.children[0];this.config.text=B.text;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog");mstrmojo.android.nativedialog.EditTextDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.EditTextDialog",type:3,populateConfig:function A(){this._super();var B=this.children&&this.children.length&&this.children[0];this.config.textValue=B.textValue||B.value;this.config.textType=B.textType||B.type;this.config.rows=B.rows;if(!!this.validator){this.config.validator=this.validator;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog","mstrmojo.num");var B=mstrmojo.num.countOfDecimals;mstrmojo.android.nativedialog.SliderDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.SliderDialog",type:5,populateConfig:function A(){this._super();var D=this.children[0],C=D.sliderBar||D;this.config.min=C.min;this.config.max=C.max;this.config.interval=C.interval;this.config.value=D.value;this.config.dv=D.value||D.dv;this.config.intervalDecimal=B(this.config.interval,".");}});}());(function(){mstrmojo.requiresCls("mstrmojo.TouchScroller","mstrmojo.dom");var I=0,L=1,K=2,T=3,J="CellInfo",V="Drill",S="Link",D=25,B=40,H=55,E=6,C=4,O=false,N="InfoViewer-Tab",G="InfoViewer-TabWrapper",U="InfoViewer-nTab",P="showAll",F="drillTo",M="linkTo",R="glow",Q=mstrmojo.css,A=[];A[N]=A[U]=function(Z){var X=Z.className;if(X==N){X=Z.parentNode.className;}for(var Y=0,W=this.tabs.length;Y<W;Y++){if(X.indexOf(this.tabs[Y].name)>-1){this.setCurrentTab(Y);break;}}this.xtab.magnifier.resizeAndPosition();};A[F]=function(){mstrApp.closeDialog();this.xtab.controller.onDrill(this.xtab,this.drillPaths[0].act);};A[M]=function(W){mstrApp.closeDialog();this.xtab.controller.onLink(this.xtab,this.linkPaths[W.getAttribute("lnk")].act);};A[P]=function(W){this.tabs[this.currentTabIndex].expanded=true;Q.removeClass(this.xtab.magnifier.containerNode,"hideMore");this.xtab.magnifier.resizeAndPosition();};mstrmojo.XtabMagnifierHelper=mstrmojo.declare(mstrmojo.Obj,null,{xtab:null,cellInfo:null,selectedCell:null,drillPaths:null,linkPaths:null,tabs:[],currentTabIndex:0,init:function(X){this._super(X);O=mstrApp.isTablet();var W=mstrMobileApp.getDeviceDPI();if(W<=120){B=26;H=35;D=15;}else{if(W<=160){B=35;H=46;D=20;}else{if(W<=213){B=46;H=61;D=26;}else{if(W<=240){B=53;H=69;D=30;}else{B=70;H=92;D=40;}}}}if(!O){C=3;}this.titleHeight=H;},glowOnTap:function(a){var Y=[G,P,F,M],X=a.className;if(X==N){a=a.parentNode;X=a.className;}for(var Z=0,W=Y.length;Z<W;Z++){if(X.indexOf(Y[Z])>-1){Q.addClass(a,R);setTimeout(function(){Q.removeClass(a,R);},200);break;}}},handleTouchTap:function(W){this.glowOnTap(W);for(n in A){if(W.className.indexOf(n)>-1){A[n].call(this,W);}}},handleTouchSwipe:function(d){if(!O){var Y=d.direction.x,b=d.delta,X=this.currentTabIndex,Z=this.tabs.length,W=parseInt(this.xtab.magnifier.width,10),a=isNaN(W)?50:W*0.2;if(Math.abs(b.x)>a){if(b.x>0){X=(X+Z-1)%Z;}else{X=(X+Z+1)%Z;}if(X!=this.currentTabIndex){this.setCurrentTab(X);this.xtab.magnifier.resizeAndPosition();}}}},resolveTouchEvent:function(a){var f=a.pageX,e=a.pageY,Y=document.elementFromPoint(f,e),g=this.xtab,W=g.zones,X,d;while(Y){var b=Y.className;if(!X&&Y.tagName==="TD"&&b&&b.toLowerCase().indexOf("xtab-td")>=0){X=Y;}if(/mstrmojo-XtabZone/.test(b)){for(var Z in W){if(Y==W[Z].domNode){d=W[Z];}}break;}Y=Y.parentNode;}if(X&&d){return{cell:X,zone:d,pos:{x:f-D,y:e-D,w:D*2,h:D*2}};}return null;},resolveInfoToDisplay:function(p){var g=p.cell,AD=p.zone,AH=this.xtab,b=AH.lockHeadersCase,t=parseInt(g.getAttribute("r"),10),Y,d,f,AA,e,AF,h,q,AE,a,AA,w,z,AC,u,W,X=[],AG=this,s=function(r,k,j){if(j){AG.selectedCell=k;X.unshift({title:r,value:k});}else{X.push({title:r,value:k});}};delete this.selectedCell;if(b==I||b==L){t=t-(Math.max(AH.titlesCP.rc,AH.chsCP.rc)||0);}else{if(AD.slot=="_TR"||AD.slot=="_TL"){t=-1;}}if(t<0){Y=AH.getCellForNode(g);if(Y&&Y.o!==undefined){s(AH.model.getCellTitleInfo(Y).title,Y,true);}else{return null;}}else{d=AH.rhsCP.getUnmergedCells(t)||[];f={rh:d.concat(AH.rhsCP.getRowCells(t)),vs:AH.valuesCP.getRowCells(t),ch:[]};for(AA=0,w=AH.chsCP.rc;AA<w;AA++){f.ch.push(AH.chsCP.getRowCells(AA));}e=g.cellIndex;if(b==I||b==K||AD.slot=="_BL"){if(g.parentNode.sectionRowIndex===0){AF=e;}else{AF=e+d.length;}}else{AF=e+f.rh.length;}h=f&&f.rh.length;if(AF>=h){AF-=h;for(z=0,AC=f.ch.length;z<AC;z++){q=0;for(u=0,W=f.ch[z].length;u<W;u++){AE=f.ch[z][u];a=(AE&&AE.cs)||1;if((AF>=q)&&(AF<q+a)){if(AE.mix!==undefined){s(AE,f.vs[AF],true);}else{if(AE.ui!=null||AE.tui!=null){s(AH.model.getCellTitleInfo(AE).title,AE);}}break;}q+=a;}}if(!this.selectedCell){s(null,f.vs[AF],true);}AF=-1;}for(AA=0,w=h;AA<w;AA++){AE=f.rh[AA];s(AH.model.getCellTitleInfo(AE).title,AE,AA==AF);if(AA==AF){break;}}}this.cellInfo=X;if(this.cellInfo){this.tabs=[];this.tabs.push({name:J,label:mstrmojo.desc(10638,"Info"),expanded:false,content:this.cellInfo});var Z=this.selectedCell,l=(Z.v!==undefined)&&!!(Z.at&1),o=!!(Z.at&4);if(l){this.drillPaths=[];this.drillPaths.push({n:AH.model.getCellDrillsInfo(Z).n,act:AH.model.getDrillAction([Z])});this.tabs.push({name:V,label:mstrmojo.desc(145,"Drill"),expanded:false,content:this.drillPaths});}else{this.drillPaths=null;}if(o){this.linkPaths=[];var x=AH.model.getCellLinksInfo(Z);for(var AA=0,AB=x.links.length;AA<AB;AA++){this.linkPaths.push({n:x.links[AA].n,act:AH.model.getLinkAction(Z,AA)});}this.tabs.push({name:S,label:mstrmojo.desc(8149,"Link"),expanded:false,content:this.linkPaths});}else{this.linkPaths=null;}}return this.cellInfo;},createTitle:function(Y){var Z=[],b=0,a=this.tabs,X=a.length,d,W;for(;b<X;b++){d=a[b];if(O){Z.push('<div class="',G," ",d.name,'" style="height:'+(H-E)+'px;" >');Z.push('<div class="',N,'">',d.label,"</div>");Z.push("</div>");}else{Z.push('<div class="',U," ",d.name,'" >',d.label,"</div>");}}Y.style.lineHeight=Y.style.height=H+"px";Y.innerHTML=Z.join("");this.setCurrentTab();},createContent:function(d){var Y=this.cellInfo,W=this.drillPaths,X=this.linkPaths,b=[],g=[],f=this.xtab,Z=function(h,k,j){function o(t,r){var p=[],q=(r==="value"&&!O)?B/2:B;p.push('<td><div class="',r,'" style="line-height:',q,"px;max-height:",B,'px;" >');if(t){if(t.ts==4){var l=(t.n||t.v),s=f.controller&&f.controller.model&&f.controller.model.dataService;if(s&&s.getImage){l=s.getImage(l);}p.push('<img src="'+l+'"/>');}else{p.push(t.n||t.v||"&nbsp;");}}p.push("</div></td>");return p.join("");}g.push('<tr style="height:',B,'px">',o(h,"title"),o(k,"value"),"</tr>");},a,e;if(Y==null){return ;}for(a=0,e=Y.length;a<e;a++){Z(Y[a].title,Y[a].value);}b.push('<table class="content">');b.push(g.join(""));b.push("</table>");if(W){b.push('<div class="actionMenu hide">');for(var a=0,e=W.length;a<e;a++){b.push('<div class="drillTo" style="line-height:',B,'px">',W[a].n,"</div>");}b.push("</div>");}if(X){b.push('<div class="actionMenu hide">');for(var a=0,e=X.length;a<e;a++){b.push('<div class="linkTo" style="line-height:',B,'px" lnk="',a,'">',X[a].n,"</div>");}b.push("</div>");}b.push('<div class="',P,'" style="line-height:',B,'px" >'+mstrmojo.desc(8995,"See all...")+"</div>");d.innerHTML=b.join("");},setCurrentTab:function(g){var X=g||0,f=this.tabs,Y=f[X],W=f.length,d=this.xtab.magnifier,f=d.titleNode.children,Z=d.containerNode.children,b,e,a;this.currentTabIndex=X;for(b=0;b<W;b++){Q.toggleClass(f[b],"selected",b==X);if(!O){if(W<=2){Q.toggleClass(f[b],"left",b!=X);}else{Q.toggleClass(f[b],"left",b==(X+W-1)%W);}Q.toggleClass(f[b],"right",b==(X+W+1)%W);}}for(b=0,e=Z.length-1;b<e;b++){Q.toggleClass(Z[b],"hide",b!=X);if(b==X){this.contentNode=Z[b];}}Q.toggleClass(d.containerNode,"hideMore",!Y.expanded&&Y.content.length>C);},getContentHeight:function(){function a(d){var e=d.content,f=e.length,b=d.expanded;return(!b&&f>C)?(B+1)*(C+1):(B+1)*f;}var Z=this.tabs;if(O){return a(Z[this.currentTabIndex]);}else{var X=0;for(var Y=0,W=Z.length;Y<W;Y++){X=Math.max(a(Z[Y]),X);}return X;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.TouchScroller");var C={v:{axis:"y",dimension:"height"},h:{axis:"x",dimension:"width"}};mstrmojo.android._IsIncFetchList=mstrmojo.provide("mstrmojo.android._IsIncFetchList",{_mixinName:"mstrmojo.android._IsIncFetchList",supportsIncFetch:true,ifDataHelper:null,ifDirection:"v",supportedEdges:mstrmojo.TouchScroller.EnumIncFetchEdges.end,initScroller:function B(E){this._super(E);var F=this.ifDataHelper;if(F){E.attachEventListener("incFetch",this.id,function(G){if(!this.supportsIncFetch){return ;}var H=this;F.next({success:function(J,I){H.addItems(I||J.items);H._scroller.STATUS_INC_FETCH=false;},failure:function(I){mstrmojo.alert("Error in fetching next: "+I);}},G.edge);});}},updateScrollerConfig:function D(){var E=this._super(),I=this.supportsIncFetch,F=this.ifDirection,H=C[F];if(E[F+"Scroll"]){var G=E.offset[H.axis];G.incFetch=I;G.supportedEdges=this.supportedEdges;G.pageSize=I?(parseInt(this[H.dimension],10)-100):0;this.scrollerConfig=E;}return E;},addItems:function A(E){this._super(E);this.supportsIncFetch=((this.ifDataHelper.totalSize===-1)||(this.items.length<this.ifDataHelper.totalSize));if(this.updateScroller){this.updateScroller();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.TouchScroller","mstrmojo.hash");var H=mstrmojo.hash;mstrmojo._HasTouchScroller=mstrmojo.provide("mstrmojo._HasTouchScroller",{_meta_usesSuper:true,scrollerConfig:{},allowTouchBubble:true,scrollerSetupDelay:undefined,init:function M(S){this._super(S);this.scrollerConfig=H.clone(this.scrollerConfig);},updateScrollerConfig:function P(){return this.scrollerConfig;},updateScroller:function F(V,W){var S=this._scroller;if(S){var T=this.updateScrollerConfig();S.initScroller(T);if(!V){var U=T.origin;if(U){S.scrollTo(U.x,U.y,W);}}S.updateScrollBars();}},initScroller:mstrmojo.emptyFn,useSelectScroll:false,postBuildRendering:function Q(){var S=this._scroller;if(!S){S=this._scroller=new mstrmojo.TouchScroller();this.initScroller(S);}else{S.haltScroller();}if(!this.layoutConfig){var U=this.id,T=this.scrollerSetupDelay;if(!isNaN(T)){window.setTimeout(function(){mstrmojo.all[U].updateScroller();},T);}else{this.updateScroller();}}this._super();},afterLayout:function G(){this._super();this.updateScroller();},getScrollPos:function A(){return H.copy(this._scroller.origin||{x:0,y:0});},shouldTouchBubble:function I(V){if(!this.allowTouchBubble){return false;}var S=this._scroller,U=V.isVertical,T=U?"y":"x";return(!S[(U?"v":"h")+"Scroll"]||S.offset[T][V.direction[T]?"end":"start"]===S.origin[T]);},touchBegin:function L(S){this._scroller.haltScroller();return(this._super&&this._super(S))||true;},touchSwipeBegin:function J(S){if(this.shouldTouchBubble(S)){if(this.bubbleTouchEvent(S)===false){this._touchCanceled=true;}return ;}if(this._super){this._super(S);}this._scroller.toggleScrollBars(true);},touchSelectBegin:function B(S){if(this._super){this._super(S);}if(this.useSelectScroll){this.touchSwipeBegin(S);}},touchSwipeMove:function C(S){if(!this._touchCanceled){if(this._super){this._super(S);}}this._scroller.scroll(S);},touchSelectMove:function E(S){if(!this._touchCanceled){if(this._super){this._super(S);}}if(this.useSelectScroll){this.touchSwipeMove(S);}},touchSwipeEnd:function N(S){S.evt.handled=true;if(!this._touchCanceled){if(this._super){this._super(S);}}this._scroller.scrollEnd(S);},touchSelectEnd:function K(S){if(this._touchCanceled){return ;}if(this._super){this._super(S);}if(this.useSelectScroll){this.touchSwipeEnd(S);}},touchEnd:function D(S){if(this._touchCanceled){delete this._touchCanceled;return ;}if(this._super){this._super(S);}},unrender:function O(T){var S=this._scroller;if(S){S.unrender();}delete this.scrollerConfig.scrollEl;this._super(T);},destroy:function R(){if(this._scroller){this._scroller.destroy();delete this._scroller;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.TouchScroller");var E=mstrmojo.dom,A=Math;function F(K,L){return(L)?A.max(A.min(A.round(K),L.end),L.start):K;}mstrmojo._NeedSyncScroller=mstrmojo.provide("mstrmojo._NeedSyncScroller",{init:function J(K){if(this._super){this._super(K);}if(!this.lisenters){this.lisenters=[];}},initScroller:function H(K){if(this._super){this._super(K);}this._scrollMovedListener=this._scroller.attachEventListener("scrollMoved",this.id,function(L){this.onScrollMoved(L);});this._scrollDoneListener=this._scroller.attachEventListener("scrollDone",this.id,function(L){this.onScrollDone(L);});},onScrollMoved:function B(K){if(this._super){this._super(K);}this.syncScroller(K,true);},onScrollDone:function G(K){if(this._super){this._super(K);}this.syncScroller(K,false);},syncScroller:function C(O,N){if(!O||O.x==undefined||O.y==undefined){return ;}var M=this.lisenters,L=this.lisenters.length;for(var P=0;P<L;P++){var K=M[P]._scroller,Q=K.offset;K.origin={x:K.hScroll?O.x:0,y:K.vScroll?O.y:0};E.translate(K.scrollEl,-K.origin.x,-K.origin.y,0,K.transform,K.useTranslate3d);K.toggleScrollBars(N);mstrmojo.hash.forEach(K._scrollBarEls,function(b,W){var h=(W==="x"),a=O[W],R=b.length,d=b.ratio,Y=b.viewportSize,V=6/R,U=b["base"+((h)?"Left":"Top")],Z=U+Y-R,T=A.round(U+(d*a));if(T<U){T=U-a;R+=a;}else{if(T>Z){var g=(a-K.offset[W].end)*d;T=A.min(Z+g,Y+U-6)-1;R-=g;}}var f=0,S=[f,f,f],X=[1,1,1],e=(h)?0:1;S[e]=(T-U);X[e]=A.min(A.max(R/b.length,V),1);E.translate(b,S[0],S[1],S[2]," scale3d("+X.join(",")+")");});}},addSyncScroller:function D(K){this.lisenters.push(K);},destroy:function I(){this.lisenters=null;if(this._scrollDoneListener){this._scroller.detachEventListener(this._scrollDoneListener);delete this._scrollDoneListener;}if(this._scrollMovedListener){this._scroller.detachEventListener(this._scrollMovedListener);delete this._scrollMovedListener;}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.boxmodel","mstrmojo.Model","mstrmojo._CanProxyCallback","mstrmojo.EnumRWUnitType","mstrmojo.models.template.DataInterface","mstrmojo.StringBuffer","mstrmojo.EnumReadystate");var Al=mstrmojo.EnumRWUnitType,K=mstrmojo.EnumReadystate,R=mstrmojo.hash,Ay=R.forEach,Aw=mstrmojo.func.wrapMethods,Au=mstrmojo.Obj.free,M=mstrmojo.array,AL=mstrmojo.boxmodel,C=mstrmojo.mixin,b="\u001E";var F={},T={},N=[11826975,1381846,1810715,950271,12407690,2276796,13614615,8355711,15255470,9869567,9101208,7912447,14004421,9296859,15063710,13092807];mstrmojo.MultiRWUnitFormatEventsType=null;var AM={isObservable:function(A6){var A5=A6&&A6.t;if((!A5&&A5!==Al.LAYOUT)||!this.hasOwnProperty(A5)||A6.scriptClass){return false;}return(A5!==Al.SUBSECTION||!A6.dt);},makeObservable:function(A5){var A6=A5.audibles=this[A5.t]||{};if(A6.hasOwnProperty("readyState")){A5.readyState=K.IDLE;}return new mstrmojo.Model(A5);}};AM[Al.PANELSTACK]={"*":false,selKey:true,readyState:true};AM[Al.GRID]={"*":false,readyState:true,ds:true};AM[Al.GRAPH]={"*":false,readyState:true,ds:true};AM[Al.GRIDGRAPH]={"*":false,qsm:true,ds:true};AM[Al.SUBSECTION]={"*":false,resize:true,adjustSize:true};AM[Al.VISUALIZATION]={"*":false,ds:true};AM[Al.SELECTOR]={"*":false,cek:true,ds:true,readyState:true};AM[Al.MOJOVISUALIZATION]={"*":false,ds:true};AM[Al.LAYOUT]={"*":false,readyState:true};var Ag={};function An(A5){return Ag[A5]||Ag["*"];}Ag["*"]={update:function o(A6,A7,A5,A8){R.copy(A5,A7);}};Ag[Al.PANEL]=C({update:function o(A6,A7,A5,A8){delete A7.layoutXML;this._super(A6,A7,A5);}},Ag["*"]);function g(BA,BB){var A6=BA.layoutMap&&BA.layoutMap[BB];if(A6){if(!A6.t){A6.t=Al.LAYOUT;}if(AM.isObservable(A6)){A6=BA.layoutMap[BB]=this.addDisposable(AM.makeObservable(A6));}return A6;}var A5=BA.layouts,A9=(A5&&A5.length)||0,A8;for(A8=0;A8<A9;A8++){if(A5[A8].k===BB){var A7=A5[A8];if(!A7.t){A7.t=Al.LAYOUT;}if(AM.isObservable(A7)){A5[A8]=this.addDisposable(AM.makeObservable(A7));}return A5[A8];}}return null;}function AC(A8,BA,A7,A6){var A5=g.call(this,A8,BA);if(A7===BA){A5._lkz=BA;return A5;}if(A5){var A9=A5.units[A7];if(A9){if(parseInt(A9.t,10)===Al.GRIDGRAPH){if(!A5.units[A7+"_0"]){A5.units[A7+"_0"]={ck:A9.ck,fmts:A9.fmts.gd,txi:A9.txi,t:Al.GRID};A5.units[A7+"_1"]={ck:A9.ck,fmts:A9.fmts.gp,t:Al.GRAPH};}}if(!A6&&AM.isObservable(A9)){A9=A5.units[A7]=AM.makeObservable(A9);this.disposables.push(A9);}A9._lkz=BA;}}return A5&&A5.units[A7];}function AS(A9,A8,A7,A5){var A6=this.getChildren(A9,A8,0);return(mstrApp.isMobile?(M.filter(A6,function(BC){var BA=A7&&A7.indexOf(BC.defn.t),BB=BC.defn.dk;return A5?(BA>-1&&BB===-1):(BA<0||BB!==-1);})):(A5?[]:A6));}var I=function(A5,A6){var A7=new mstrmojo.StringBuffer();if(A6){A7.append("*l"+A6);}A7.append("*k"+A5.k);if(A5.hasOwnProperty("wid")){A7.append("*x"+A5.wid);}A7.append("*t"+this.buildTime);return A7.toString();};function AI(A7){var A6,A5,BA=this.delta,A8=this.pendingUpdate=this.pendingUpdate||{},A9=[];if(!R.isEmpty(BA)){A9.push("<updates>");for(A6 in BA){if(BA.hasOwnProperty(A6)){A5=BA[A6];A9.push(A5.getUpdates());}}A8[A7]=BA;this.delta={};A9.push("</updates>");}return A9.join("");}function A1(BA,A6){var A9;if(BA){var A5=M.isArray(BA)?BA:BA.split(A6||b),A8=A5.length,A7;for(A7=0;A7<A8;A7++){A9=A9||{};A9[A5[A7]]=AC.call(this,this.defn,this.currlaykey,A5[A7]);}}return A9;}function r(A5,A6){return mstrmojo.all[I.call(this,{k:A5,wid:A6},this.currlaykey)];}function Ah(A6,A5){var A7=this.getLayoutUnitDefn(A6,A5);return(A7&&A7.t===Al.PANELSTACK&&A7.ifw);}function Aj(A6,A5){return !A5||(A6.wid===A5);}function f(A9,BH){var BC=this,BI=BC.getSliceCallback(BH),A7=BI.shared,BJ=BH.tks,A6=BH.eid,BF=BC.getDataService();if(!BJ){return ;}var BE=AC.call(BC,BC.defn,BC.currlaykey,A6);if(!BE){return ;}var BB=A6,BD=A7.tgtDefs[BJ],A5=function(){BD.set("selKey",A6);},A8;BD.newSelKey=A6;if(BE.l){var BA=BE.dirtyKeys;if(!!BA){BB=R.keyarray(BA).join(",");A7.orignalTargetDefs=A7.tgtDefs=A1.call(BC,BB,",");A8=function(){A5();Ay(A7.dataCacheUpdate.upd,function(BK,BL){var BM=mstrmojo.all[BL];if(BM&&BM.setDirty){BM.setDirty(false);}});};}else{if(BH.skipServerCall){A5();return ;}BF.requestPanelChangeDeferred(A9,A6,null,false,false,BC.newCallback({method:"slice",success:A5}));return ;}}else{A8=function(){A5();BE.l=true;};}var BG=BI.success;BI.success=function(BL){if(!BC.checkStatus(BL)){return ;}BC.updateDefnCache(BL.defn,[A6]);BG(BL);A8();var BK=r.call(BC,BH.tks,0);if(BK){BK.clearDirtyChild(A6);}};BF.requestPanelChangeDeferred(A9,A6,BB,true,!BH.hasLoader,BI);}function W(A6,A5){if(A6.defn&&A6.defn.t>=Al.GRID){mstrmojo.models.template.DataInterface.inflateGridData(A6.data);}A5[A6.id]=A6;return A6;}function AP(BO,BE,A5,BB){var BH=this.currlaykey,A8;if(BO){A8=BO.defn;BH=(A8&&A8._lkz)||BO.k;}var BZ=this.getLayoutDataCache(BH),BP=(!A5&&!R.isEmpty(BZ)),BV;if(!BO){BV=this.data;}else{var BD=BO.data||BO;if(BP){BV=BZ[I.call(this,BD,BH)];BV=(BV&&BV.data)||BV||BD;}else{BV=BD;}}if(!!BV.sections){this._buildingLayoutKey=BV.k;}var A6=BV?this.extractChildren(BV):[],BJ=[];var BS=(A6&&A6.length)||0;if(BS){A8=this.defn;var BL=!BO,BG=BO?BH:null,BA=(BO&&((BO.defn)?BO.defn.t:AC.call(this,A8,BG,BO.k).t));var A7=(BA===Al.GRIDGRAPH),BT=(BA===Al.DETAILS),BR,BQ;A6=BE(A6);for(BR=0,BQ=A6.length;BR<BQ;BR++){var BX=A6[BR];if(A7){BX.k=BO.k;BX.wid=BO.data.wid;}var Bb=BX.k,BN=I.call(this,BX,BG),BW;if(!BL&&!A5&&Ah.call(this,Bb,BG)){var BU=this.getLayoutUnitDefn(Bb),BK=W({data:BX,defn:BU,id:BN,k:Bb,p:BV},BZ);if(!this.infoWinByKey||!this.infoWinByKey[Bb]){var A9=this.infoWindows=this.infoWindows||{};var BY=this.infoWinByKey=this.infoWinByKey||{};A9[BU.n]=BY[Bb]=BK;}continue;}if(A7){BN+="_"+BR;BW=AC.call(this,A8,BG,BX.k+"_"+BR);}else{BW=AC.call(this,A8,BG||BX.k,BX.k);}if(BT){BW.dt=true;}if(BZ===null&&(BW.t===Al.LAYOUT)){BZ=this.getLayoutDataCache(BX.k);}var Ba;if(BW.t===Al.PANEL&&BZ[BN]&&BP){var BC=this.extractChildren(BX)||[],BI=this.extractChildren(BZ[BN].data)||[],BF=false;if(BC.length!=BI.length){M.forEach(BI,function(Bd){var Bc=M.find(BC,"k",Bd.k);if(Bc>-1){BC[Bc]=Bd;BF=true;}});if(BF){BI.splice(0,BI.length);M.forEach(BC,function(Bc){BI.push(Bc);});}}Ba=BX;}else{Ba=BP?(BZ[BN]&&BZ[BN].data)||BX:BX;}var BM={k:BX.k,id:BN,defn:BW,data:Ba};if(!BZ[BN]){W(BM,BZ);}BJ.push(BM);}}return BB?{nodes:BJ,total:BS}:BJ;}function A2(BB,A6,BA){var A5=AL.px2Inches,A7=this.getZoomProps(),A9=1,A8=2;if((BA&A9)>0){BB.FormattingPosition={Left:A5(A7,A6.x||0),Top:A5(A7,A6.y||0)};}if((BA&A8)>0){BB.FormattingSize={Height:A5(A7,A6.h||0),Width:A5(A7,A6.w||0)};}}function w(A6){function A5(A8,A7){return A8<A7?-1:(A8>A7?1:0);}A6.sort(function(A8,A7){var A9=A5(A8.levelID,A7.levelID);return A9!==0?A9:A5(A8.elemID,A7.elemID);});return A6;}function Az(A5,A6){return A5.map(function(A7){return A7[A6];}).join(b);}function J(A5){return Az(A5,"levelID");}function A0(A5){return Az(A5,"elemID");}function AJ(A6){if(A6){T={};}F={};var A5=this.defn.epm;if(A5){A5.forEach(function(A7){A7.epmv.forEach(function(A8){var BA=w(A8.k.chn.map(function(BD){var BC=BD.emt!==2;return{levelID:BC?BD.at.did:"-1",elemID:BC?BD.ei:BD.mt.did};})),BB=J(BA),A9=A0(BA);if(!F[BB]){F[BB]={};}F[BB][A9]=JSON.parse(A8.v.vv);});});}}function a(A5){if(A5){A5=mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters(A5);}return A5;}function AF(){var A6=this.data&&this.data.layouts,A5=A6[M.find(A6,"k",this.getCurrentLayoutKey())],A8=A5&&A5.gbys&&A5.gbys.groupbys,A7=false;M.forEach(A8,function(A9){if(A9.unit&&A9.unit.elms&&A9.unit.elms[A9.unit.idx].v==="u;"){A7=true;return false;}});return A7;}mstrmojo.DocModel=mstrmojo.declare(mstrmojo.Model,[mstrmojo._CanProxyCallback],{scriptClass:"mstrmojo.DocModel",audibles:{"*":false,data:true,tsp:true},features:null,dataCache:null,searchElemsCache:null,controller:null,sdp:null,dpi:96,keySeed:0,currlaykey:"",init:function AU(A5){this._super(A5);if(!this.features){this.features=new mstrmojo.Model();this.disposables.push(this.features);}this.ondefnChange();AJ.call(this);this.buildTime=mstrmojo.now();},hasFeatures:function AR(A9){var A7=this.features;if(!A7){return false;}var A6=A9.split(","),A5=A6.length,A8;for(A8=0;A8<A5;A8++){var BA=A6[A8],BB=BA.match(/^!/);if(BB){BA=BA.replace("!","");}if(!!BB===!!A7[BA]){return false;}}return true;},makeObservable:function AT(A5){return AM.makeObservable(A5);},checkStatus:function Av(A5){if(parseInt(A5.status,10)===4){A5.message=mstrmojo.desc(5781,"Request timed out.");mstrmojo.err(A5);return false;}return true;},getDataService:function Ae(){var A6=this.dataService;if(!A6){var A5={rwb:this.bs,msgId:this.mid,stid:this.stid,cbKey:this.cbKey,model:this};if(mstrApp.modelFactory){A6=mstrApp.modelFactory.newDataService("Document",A5);}else{A6=mstrApp.viewFactory.newDocDataService(A5);}this.dataService=A6;this.disposables.push(A6);}return A6;},getNextKey:function Am(){return"W"+this.keySeed++;},resetKeySeed:function D(A5){this.keySeed=A5;},getWidgetId:function H(A5,A6){return I.call(this,A5,A6||this.getCurrentLayoutKey());},getUIState:function S(){return{};},ondefnChange:function x(){var BA=this.defn,A7=BA&&BA.layouts,A6={};if(BA){BA.layoutMap=A6;var A9=(A7&&A7.length)||0,A8;for(A8=0;A8<A9;A8++){var A5=A7[A8];A6[A5.k]=A5;}}},extractChildren:function z(A5){return(A5.sections||A5.subsections||A5.objects||A5.panels||A5.layouts||A5.children);},getChildren:function O(A7,A6,BA,A5,A9){BA=BA||0;var A8=function(BB){return BB.slice(BA,BA+(A5||BB.length));};return AP.call(this,A7,A8,A6,A9);},getChildrenByKey:function AO(A7,A6,A5,A9){var A8=function(BB){var BA=[],BC;M.forEach(A5,function(BD){BC=M.find(BB,"k",BD);if(BC!==-1){BA.push(BB[BC]);}});return BA;};return AP.call(this,A7,A8,A6,A9);},getTargetDefn:function AN(A5){return A1.call(this,A5);},getUnitDefinitions:function(A6,A5){return A1.call(this,A6,A5);},getUnitInstance:function t(A5,A6){return mstrmojo.all[I.call(this,{k:A5,wid:A6},this.currlaykey)];},getFirstUnitInstanceByName:function AA(A8){var A5=g.call(this,this.defn,this.currlaykey);if(A5){var A6=A5.units,A7;for(A7 in A6){var A9=A6[A7];if(A9.n===A8){return this.getUnitInstance(A7,1);}}}return null;},getLayoutUnitDefn:function B(A6,A5){return AC.call(this,this.defn,A5||this.currlaykey,A6);},getRawLayoutUnitDefn:function U(A6,A7,A5){return AC.call(this,A7||this.defn,A5||this.currlaykey,A6,true);},getSelectedKey:function Aq(A5){return(!A5&&this.currlaykey)||null;},getCurrentLayoutKey:function s(){return this.currlaykey;},getLayoutDefn:function AW(A5){var A6=this.defn,A7=A6&&A6.layouts;return A7&&A7[M.find(A7,"k",A5)];},getCurrentLayoutDef:function AZ(){return this.getLayoutDefn(this.getCurrentLayoutKey());},replaceLayout:function Ax(BD,A6,BE){var BA=this.defn,A9=this.data,A7=A6&&A6.defn,A5=A6&&A6.data,BF=this.dataCache;if(BF&&BF[BD]){BF[BD]={};}var BC=(A9&&A9.layouts)||(BA&&BA.layouts),A8,BB=false;for(A8=(BC&&BC.length-1)||0;A8>=0;A8--){if(BC[A8].k===BD){break;}}if(BE&&A8<0){A8=M.find(A5.layouts||A7.layouts,"k",BD);BB=true;}this.bs=A6.bs;if(A5){if(BB){M.insert(A9.layouts,A8,[A5.layouts[A8]]);}else{A9.layouts[A8]=A5.layouts[A8];}A9.elems=A5.elems;}if(A7){if(BB){M.insert(BA.layouts,A8,[A7.layouts[A8]]);}else{BA.layouts[A8]=A7.layouts[A8];}this.ondefnChange();}},loadLayout:function Z(A5,A7,A6){this.replaceLayout(A5.currlaykey,A5);this.raiseEvent({name:"rebuildLayout",unloadCache:!!A7,restoreIW:!!A6});},getLayoutDataNode:function A3(A6){var A5=this.data&&this.data.layouts;return M.filterOne(A5,function(A7){return A7.k===A6;});},getLayoutDataCache:function p(A6){if(!A6){return null;}var A5=this.dataCache;if(!A5){A5=this.dataCache={};}if(!A5[A6]){A5[A6]={};}return A5[A6];},saveRW:function Ao(A6,A8){var A7=mstrmojo.desc,A5=this.getDataService();A5.saveRW({objName:A6||this.n,folderID:this.pfid,saveAsFlags:1},A8||{success:function(A9){mstrmojo.alert(A7(3819,"Document Saved")+": "+A9.n);}});},saveAsRW:function A4(A7,A6){var A5=this,A8=mstrmojo.hash.copy(A7,{evt:3102,applyChanges:false,executionMode:2,parentFolderID:mstrApp.saveFolderId||A5.sfid||A5.pfid,saveFromDesignMode:false,rwb:A5.bs});if(A6){A8.target=A6;A8.saveAsOrigin=13;}mstrmojo.form.send(A8,null,"post");},saveDocProps:function AH(A5,A6,A7,BB){var BA=this.getDataService(),A9=A7?null:mstrmojo.DocDataService.SUPPRESS_DATA,A8=[{act:"setDocumentProperties",props:A5}];R.forEach(A5.RWDocumentProperties,function(BD,BC,BE){BE[BC]=String(BD);});if(A6){this.controller.cmdMgr.execute({execute:function(){this.submit(A8,BB||{},A9);},urInfo:A6});}else{BA.submitUpdates(A8,BB||{},R.copy(A9,{preserveUndo:true}));}},partialUpdate:function AD(BA,A5,A8,A7,A6){if(A8){this.updateDefnCache(A8,A7,A6);}if(BA){var A9=this.updateDataCache(BA,A5,undefined,A6);this.raiseEvent({name:"partialUpdate",tree:BA,ids:A9});return A9;}},refreshDefinition:function Y(A8,A7,A6,A9){var A5=this.getLayoutUnitDefn(A8,A6||this.getCurrentLayoutKey());if(!A5){return ;}An(A5.t).update(this,A5,A7,A9);},loadPartialData:function AB(BA,A6){var A8={};A8[A6]=AC.call(this,this.defn,this.currlaykey,A6);var A7=this.updateDataCache(BA,A8),A5=this.getLayoutDataCache(this.getCurrentLayoutKey()),A9=this;M.forEach(BA.layouts,function(BB){var BC=BB&&BB.xtabStyles;if(BC){A9.raiseEvent({name:"updateStyles",key:BB.k,updatedStyles:BC});}});Ay(A7,function(BC,BB){if(BB==="upd"){Ay(BC,function(BE,BF){var BD=mstrmojo.all[BF];if(BD&&BD.update){BD.update(A5[BF]);}});}});},updateDefnCache:function A(A6,BC,A9){var BF=this.currlaykey,A8=g.call(this,A6,BF),BH=g.call(this,this.defn,BF),BD=function(BI,BJ){var BK;for(BK in BJ){if(BI[BK]===undefined){BI[BK]=BJ[BK];}}},BG=A8&&A8.units,BE=BH&&BH.units,A7=A8&&A8.cgbMap,A5=BH&&BH.cgbMap,BA=A9&&a(A9).defn,BB=this;M.forEach(BC,function(BI){BB.refreshDefinition(BI,BG[BI],null,BA&&BA[BI]);});if(BG){BD(BE,BG);}if(A7){BD(A5,A7);this.raiseEvent({name:"CGBMapChange",cgbMap:A5});}},deleteDataCache:function P(A6){var A5=this.getLayoutDataCache(this.getCurrentLayoutKey());if(A5[A6]){delete A5[A6];}},updateDataCache:function AV(BE,BD,A5,A9){var A7=this.getLayoutDataCache(this.getCurrentLayoutKey()),A6=A9&&a(A9).data,BF={ifws:{},upd:{},tgts:{},def:{},secs:{}},BA=function(BL,BG){var BK=A7[BL];if(A6){var BJ=mstrmojo.all[BL];if(BJ){var BH=BK.k,BI=A6[BH];if(BI){if(!R.isEmpty(BI.exclude)){R.copy(BG.data,BK.data);}else{BG.data=R.copyProps(BI.serialized.split(";"),BG.data,BK.data);}}}}W(BG,A7);};function BC(BU,BZ,BH,BK){var BM=false,BR=this.getChildren(BU,true),BQ;if(!BR.length){return ;}if(BH){BQ=mstrmojo.all[BU.id];BM=!BU.id||!!BQ;}var BL=BU.defn,BI=BU.data,BW;if(BL&&BL.t===Al.PANELSTACK&&BL.od){BW=BI.selKey;}var BV,BP,Ba=function(Bb){return(Bb.k===BP);};for(BV in BR){var BS=BR[BV],BT=BS.id,BJ=null,BX;BP=BS.k;if(BZ){var BN=this.extractChildren(BZ);if(BN){BX=M.filterOne(BN,Ba);if(!BX){BN.push(R.clone(BS.data));}}else{R.copy(R.clone(BU.data),BZ);}}if(mstrmojo.all[BT]){BM=true;}if(BD.hasOwnProperty(BP)){if(Ah.call(this,BP)&&Aj(BS.data,A5)){BA(BT,BS);if(!BK){BF.ifws[BP]=this.infoWinByKey[BP].id;}}BJ=BP;if(BM){if(BW&&BW!==BP){continue;}if(!BK){BF.tgts[BT]=true;}var BG=BQ&&BQ.defn,BY=BG&&BG.t,BO=BG&&BG.ck;if(BY===Al.SUBSECTION&&(BO&&BO.hasOwnProperty(BP))){BF.secs[BQ.id]=true;}}}if((BK||BJ)&&(!BW||BW===BP)){BA(BT,BS);BF.def[BP]=true;if(BM){BF.upd[BT]=true;}}BC.call(this,BS,BX,BM,BK||BJ);}}if(BE&&BE.layouts&&BD){var A8=M.filterOne(BE.layouts,function(BG){return(BG.loaded);}),BB=this.data.layouts;if(A8){BC.call(this,A8,BB[M.find(BB,"k",A8.k)],true);}}return BF;},getDimensionAndPositionAction:function Q(A6,A5,A8){var A7=this.getUnitFormatAction(A6,null,null,A8);A2.call(this,A7.format,A5,3);return A7;},getDimensionAction:function Q(A6,A5,A8){var A7=this.getUnitFormatAction(A6,null,null,A8);A2.call(this,A7.format,A5,2);return A7;},getUnitFormatAction:function e(BD,A6,BC,A8){var BA=BD.defn,BE=BA.t||1,BB=BD.k,A9=[BB];var A5={act:"format",unitKey:BB,unitType:BE===115?521:BE,formatType:A6||1,format:BC||{}};if(!A8){A5.partialRetrieval={nodes:A9};}if(BE===Al.SELECTOR){var BF=BA.ck;A5.keyContext=BF;A9[0]=this.getDataService().getNodeKeyFromKeyContext(BF);}if(BE===Al.TEXTFIELD||BE===Al.IMAGE||BE===Al.HTMLCONTAINER){var A7=BD.nk||BA.fgk;A5.fieldKey=BB;A5.nodeKey=A7;A5.keyContext=BE+b+A7+b+BB;A9[0]=A7;}return A5;},updateUnitFormat:function Ak(A6,A8,A9,BA,A5){var A7=this.getUnitFormatAction(A6,A8,A9);this.getDataService().submitUpdates(A7,BA,A5);},selectPanelDeferred:function(BA,A9,A8,A7,A6,A5){f.call(this,BA,{type:3,tks:A9,eid:A8,sid:A7||1,ck:A9,hasLoader:A6,skipServerCall:A5});},getSearchElemsCache:function At(){var A5=this.searchElemsCache;if(!A5){A5=this.searchElemsCache={};}return A5;},getCGBMap:function Ab(){var A5=g.call(this,this.defn,this.currlaykey);return A5&&A5.cgbMap;},getSliceCallback:function AG(A5){var A8=this,A9={};A9.dataCacheUpdate=null;A9.tgtDefs=A5.tks?A1.call(this,A5.tks):null;A9.orignalTargetDefs=A9.tgtDefs;var A7=A9.tgtDefs,A6=function(BC){var BD=A7;if(A5.disablePU){BD=A1.call(A8,A8.currlaykey);}Ay(BD,function(BE){if(BE&&BE.set){BE.set("readyState",BC);}});},BB=this.newCallback({method:"slice",shared:A9,submission:function(){A6(K.WAITING);},success:function(BD){if(!A8.checkStatus(BD)){return ;}if(A5.disablePU){A8.loadLayout(BD,A5.isUConDS,A5.restoreIW);return ;}if(BD.pukeys){A9.tgtDefs=A1.call(A8,BD.pukeys);}A9.dataCacheUpdate=A8.updateDataCache(BD.data,A9.tgtDefs,A5&&A5.sid,BD.puFilters);if(typeof BD==="object"){R.copyProps(["bs","exopt","dty"],BD,A8);}var BC={name:"partialUpdate",tree:BD.data,ids:A9.dataCacheUpdate,unloadCache:A5.isUConDS};if(!mstrmojo.hash.isEmpty(BC.ids.ifws)){if(A5&&!A5.suppressIW&&(A5.type===Al.GRID||A5.type===Al.GRAPH)){BC.anchor=A5.anchor;}else{BC.ids.ifws={};}}A8.raiseEvent(BC);},complete:function(){A6(K.IDLE);}}),BA={success:function(){Ay(A9.orignalTargetDefs,function(BM,BK){var BL=r.call(A8,BK,1);if(!BL){if(!!A8.sdp&&!!A8.sdp[BK]){var BJ=A8.getLayoutDataCache(A8.getCurrentLayoutKey());var BN=I.call(A8,{k:BK,wid:1},A8.currlaykey);A8.raiseEvent({name:"secondaryDataSliced",key:BK,data:BJ[BN].data});}return ;}if(A9.dataCacheUpdate&&!A9.dataCacheUpdate.def.hasOwnProperty(BK)){if(BL.setDirty){BL.setDirty(true);}}else{if(parseInt(BM.t,10)===Al.PANELSTACK){BL.setDirtyChildren();}}});var BC=r.call(A8,A5.ctlKey,1);if(BC&&A9.dataCacheUpdate&&!A9.dataCacheUpdate.upd.hasOwnProperty(BC.id)){var BH=(BC.children&&BC.children[0].selectedIndices)||{},BF=BC.node.data,BI=mstrmojo.DocSelector.STYLES,BG=[];if(BC.style===BI.SEARCH_BOX){var BD=(BC.children&&BC.children[0].items)||[];M.forEach(BD,function(BJ){BG.push(R.clone(BJ));});}else{R.forEach(BH,function(BK,BJ){if(BK){BG.push(BF.elms[BJ]);}});}var BE=M.find(BG,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(BE>-1){BG=[BG[BE]];}BF.ces=BG;BC.selIdx=BH;}}};if(A5.isUConDS||(parseInt(A5.type,10)===Al.GRAPH&&A5.tty===1)){BB.success=function(BC){A8.controller.setData(BC,true);};return BB;}if((parseInt(A5.type,10)===3)){return BB;}return Aw(BB,BA);},slice:function X(A5){var A6=this.getDataService(),A7=A6.newUpdateWithoutCmd();this.sliceDeferred(A7,A5);if(A7.actions&&A7.actions.length>0){A6.addSuppressData(A7.extras);A7.submit();}},sliceDeferred:function(A8,BH){var A5={};try{if(!BH||(!mstrmojo.dom.isAndroid&&!BH.tks&&!BH.multiSelect&&(BH.type===3||(BH.type===Al.GRAPH&&parseInt(BH.tty,10)!==1)))){return A5;}var BI=this.getSliceCallback(BH),BE=this,BG=this.getDataService();var BK=parseInt(BH.type,10);if(BK===3){f.call(BE,A8,BH);return ;}if(BH.multiSelect){if(BH.selectorObjects.length>0){BG.setMultiDocSelectorElements(BH.selectorObjects,BH.multiSelect,BI);}return ;}if(BK===Al.GRAPH){A8.add(BG.getGraphSelectionAction(BH.src,BH.cks,BH.sid,BH.x,BH.y,(BH.tty===1)),BI);if(!!BH.showLoadingIcon){A8.addExtras({config:mstrmojo.DocDataService.PROGRESS_CONFIG});}return ;}var BJ=BH.events||{K0:BH},A7=[],BA,A6={config:mstrmojo.DocDataService.PROGRESS_CONFIG},BD=A6.params={},A9,BC={},BF=function(BM,BL){if(BM){BC[BL]=BM.visName;}};for(A9 in BJ){BH=BJ[A9];if(!BH){break;}if(BH.hasOwnProperty("eid")){if(BH.isUConDS){BH.disablePU=true;}if(AF.call(this)){BH.disablePU=true;BH.restoreIW=true;}BA=BG.getSelectorElementsAction(BH);if(BE.sdp){BC={};Ay(BE.sdp,BF);BD.sdpKeys=JSON.stringify(BC);}if(BH.disablePU){BD.disablePU=true;}}else{if(BH.fromGM){BA=BG.getSelectorFromGMAction(BH);}else{if(parseInt(BH.srct,10)===4||BH.fid){if(BH.fid&&AF.call(this)){BH.disablePU=true;}BA=BG.getSelectorExpressionAction(BH);}else{if(BH.unset){BA=BG.getUnsetSelectorAction(BH);}else{if(parseInt(BH.ct,10)===6){BA=BG.getMultiUnitSelectorAction(BH);BE.hasUnitSelector=BH.selections&&BH.selections.hasElements;}else{BA=BG.getSelectorIncludeAction(BH);}}}}}A7.push(BA);}A8.add(A7,BI,A6);}catch(BB){mstrmojo.err(BB);}},getInfoWindow:function u(A6){var A5=this.infoWindows;return A5&&A5[A6];},getTargetInfoWin:function(A6){var A5=[],A7=A1.call(this,A6);if(A7){var A8;for(A8 in A7){if(A7[A8]&&A7[A8].ifw){A5.push(A8);}}}return A5;},showInfoWin:function q(A8,A7,A5,A9,BA){var A6=this.infoWinByKey&&this.infoWinByKey[A8];if(A6===undefined){return ;}this.raiseEvent({name:"showInfoWin",psId:A6.id,psKey:A6.k,anchor:A7,anchorOrientation:A5,anchorPosition:BA,invalidate:A9});},getSelectedXtabStyles:function l(A7){var A6=A7||this.currlaykey;var A9={};var A5=this.data&&this.data.layouts,A8;for(A8 in A5){if(A5[A8].k===A6){A9=A5[A8].xtabStyles;break;}}return A9;},downloadGridData:function E(A9){var A7=this,A6=A9.xtabId,A5=A9.memo,A8=mstrmojo.all[A6];this.getDataService().downloadGridData(A9,this.newCallback({success:function(BH){function BA(BL,BN){var BO=A7.getChildren(BL,true),BM=BO.length,BK;for(BK=0;BK<BM;BK++){var BP=BO[BK];if(BN===BP.id){return BP;}var BJ=BA(BP,BN);if(BJ){return BJ;}}return null;}var BE=BH.data&&g.call(A7,BH.data,A7.currlaykey);if(BE){var BD=BA(BE,A6);if(BD){mstrmojo.models.template.DataInterface.inflateGridData(BD.data);if(A8){A8.dataDownloaded(BD,A5);}}var BG=BE.xtabStyles;if(BG){A7.raiseEvent({name:"updateStyles",key:BE.k,updatedStyles:BG});}}var BF=AC.call(A7,A7.defn,A7.currlaykey,A9.nodeKey);if(BF&&BF.t===Al.GRIDGRAPH&&A5.recalculating){var BC=A8.parent,BI=BC&&BC.getGraphWidget();if(BI&&BC.updateGraph){BC.updateGraph(BA(BE,BI.id));}}if(BH.pukeys){var BB=A1.call(A7,BH.pukeys);delete BB[A9.nodeKey];if(!R.isEmpty(BB)){A7.partialUpdate(BH.data,BB);}}},failure:A8.dataDownloadErr||mstrmojo.emptyFn}));},clearDisposables:function Aa(){var A5=[];M.forEach(this.disposables,function(A6){if(A6._lkz){Au(A6);}else{A5.push(A6);}});this.disposables=A5;},getFixedHeaders:function(A6,A5){return AS.call(this,A6,A5,[Al.PAGEHEADER],true);},getFixedFooters:function(A6,A5){return AS.call(this,A6,A5,[Al.PAGEFOOTER],true);},getNonFixedSections:function(A6,A5){return AS.call(this,A6,A5,[Al.PAGEHEADER,Al.PAGEFOOTER],false);},addAutoWidthID:function h(A7){var A6=this.aws||{},A5=A6[this.currlaykey]||[];A5.push(A7);A6[this.currlaykey]=A5;this.aws=A6;},getAutoWidthIDs:function L(){var A7=this.aws,A5=this.currlaykey;var A6=A7&&A7[A5];if(A6){delete A7[A5];}return A6;},getTransactionUpdates:function k(A5){return this.txDiscardTargets?"":AI.call(this,A5);},clearTransactionUpdates:function AK(A5){this.clearTxDeltaUpdate(A5);},resetTransactionUpdates:function Af(A5){var A6=this.pendingUpdate,A7=this.delta;if(A6&&A6[A5]){Ay(A6[A5],function(A8,A9){if(A7&&!A7[A9]){A7[A9]=A8;}});delete A6[A5];}},transactionUpdate:function As(A7,A6){if(!A7.data){return null;}var A9;if(A6&&A6.tks){A9=A1.call(this,A6.tks);}if(A7.pukeys){A9=A1.call(this,A7.pukeys);var BA;for(BA in A9){if(A9[BA]&&A9[BA].cek){A9[BA].cek=null;}}}if(A7.txrcd){this.txrcd=A7.txrcd;}else{delete this.txrcd;}var A8=this.updateDataCache(A7.data,A9,A6&&A6.sid),A5={name:"partialUpdate",tree:A7.data,ids:A8};if(!R.isEmpty(A8.ifws)){if(A6&&A6.type===Al.GRID){A5.anchor=A6.anchor;}else{A8.ifws={};}}this.raiseEvent(A5);return A8;},deltaUpdate:function Ad(A5){var A6=this.delta;if(!A6){A6=this.delta={};}A6[A5.id]=A5;},clearTxDeltaUpdate:function V(A6){var A9=this.txDiscardTargets,A5=!A9,A8=this.pendingUpdate,A7=this;if(!A5){Ay(A9,function(BA,BB){if(A7.delta&&A7.delta[BB]){A7.delta[BB].clear();delete A7.delta[BB];}});}if(A8&&A8[A6]){Ay(A8[A6],function(BA){BA.clear();});delete this.pendingUpdate[A6];}},sendTransactionActions:function G(A6,A5,A8){var A7=this;if(!A8){A8={success:function(A9){A7.transactionUpdate(A9);}};}A7.getDataService().sendTransactionActions({keyContext:A6,actions:A5,txrcd:this.txrcd},A8);},sendTransactionUpdates:function AY(A5){var A7=this.getSliceCallback(A5),A6=this.getDataService();A6.submitUpdates([A6.getUpdateTransactionAction(A5)],A7);},addSDP:function Ap(A6,A5){if(!A6||!A5){return ;}if(!this.sdp){this.sdp={};}this.sdp[A6]={k:A5.k,visName:A5.visName};},removeSDP:function Ai(A5){if(!A5||!this.sdp[A5]){return ;}delete this.sdp[A5];},getUpdateColorMapCallback:function d(){var A5=this;return{success:function(A6){A5.defn.epm=A6.defn&&A6.defn.epm;AJ.call(A5);A5.raiseEvent({name:"colorMapChanged"});}};},getUpdateThemePaletteCallback:function Ac(A5){var A6=this;return{success:function(A7){A6.thm=A7.thm;A6.plt=A7.plt;A6.defmts=A7.defmts;AJ.call(A6,!A5);}};},getCurrentPaletteColors:function AQ(){return(this.plt&&this.plt.colors)||N;},getColorBy:function(BB,A5){var A9=A5.map(function(BD,BC){return{levelID:BB[BC].toString(),elemID:BD};});if(A9&&A9.length>1){w(A9);}var BA=J(A9),A8=A0(A9),A7=T[BA];if(!A7){A7=T[BA]={_currentColorIdx:0};}if(!A7[A8]){var A6=this.getCurrentPaletteColors();A7[A8]=A6[A7._currentColorIdx];A7._currentColorIdx=(A7._currentColorIdx+1)%A6.length;}if(F[BA]&&F[BA][A8]){return{color:F[BA][A8].color,isManual:true};}return{color:A7[A8],isManual:false};},getZoomFactor:function AE(){return this.getCurrentLayoutDef().zf||1;},getZoomProps:function AX(){return{dpi:this.dpi,zf:this.getZoomFactor()};},executeLink:function j(A5,A7,A8){if(A5.indexOf("prevMsgID")>0){var A6="prevMsgID="+this.mid;A5=A5.replace(/prevMsgID=0($|&)/g,function(A9,BA){if(BA==="&"){return(A6+"&");}return A6;});if(mstrmojo.dom.isIE){A5+="&cb"+mstrmojo.now()+"=1";}}A5=mstrmojo.addCSRFTokenToURL(A5);this.controller.onLink(this,{url:A5,target:A7,src:A8||null,submitAsPost:!mstrmojo.isUrlExternal(A5)});},getDatasetUnits:function Ar(A6,A5,A8,BA){var A9=this.datasets,A7=[];R.keyarray(A9).forEach(function(BC){if(!A8||BC===A8){var BD=A9[BC],BB=BD,BE=[];A6.forEach(function(BF){if(BA!==undefined){BB=BD.tables[BA];}(BB[BF]||[]).forEach(function(BG){if(!A5||A5(BG)){BE.push(BG);}});});A7=A7.concat(BE.map(function(BF){return mstrmojo.hash.copyProps(["did","n","t","st","formType","dt","f","hide","usedInDropZones","card","lock","fs"],BF,{ds:BD.name,dsId:BC,dm:!!BF.um,da:!!BF.da,de:!!BF.de});}));}});return A7;}});}());(function(){mstrmojo.requiresCls("mstrmojo.StepperContentProvider","mstrmojo.num");var A=mstrmojo.num;function B(G,F){var H=F?G.max:G.min,D=F?G.min:G.max,E=G.getVal(F?1:-1);return(H===null||(F?(E<=H):(E>=H))||(D!==null&&G.canLoop));}function C(H,G){var F=H.min,D=H.max,E=H.getVal(G?1:-1);if((G&&D!==null&&E>D)||(!G&&F!==null&&(E<F))){if(H.canLoop){E=((E-F)%(D-F+1))+F;E=(E>=F)?E:E+(D-F+1);}else{return ;}}H.item[H.valField]=H.curVal=E;H.onTraverse();}mstrmojo.NumStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.NumStepperContentProvider",curVal:null,init:function(E){this._super(E);var F=this.item,D=function(I){var H=I&&F[I];return(H===null||H===undefined);},G=function(I,K,H){var J=H&&D.call(this,K)?null:F[K];if(J!==null&&J!==undefined){this[I]=J;}};G.call(this,"min",this.minField,true);G.call(this,"max",this.maxField,true);G.call(this,"interval",this.intField);this._initCurrent();},_initCurrent:function(){var E=this.item,F=this.curVal=E[this.valField];if(F===null||F===undefined){var D=this.min;this.curVal=D!==null?D:0;}},next:function(){C(this,true);},prev:function(){C(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},renderItemAt:function(F){var E=this.getVal(F),D=this.renderer;return D?D.render(E,this):E;},getVal:function(D){return this.curVal+(this.interval*(D||0));},setVal:function(F){var G=this.min,D=this.max,E=this.getVal();if(typeof F!=="number"||isNaN(F)||F===E||A.inNumericRange(F,G,D)!==0){return ;}this.item[this.valField]=this.curVal=F;this.onTraverse();},onTraverse:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.WebOI");mstrmojo.mstr.WebAttributeForm=mstrmojo.declare(mstrmojo.mstr.WebOI,null,{scriptClass:"mstrmojo.mstr.WebAttributeForm",t:21});})();(function(){mstrmojo.requiresCls("mstrmojo.mstr.WebOI");mstrmojo.mstr.WebFilter=mstrmojo.declare(mstrmojo.mstr.WebOI,null,{scriptClass:"mstrmojo.mstr.WebFilter",t:1,expression:null,buildTypeSpecificShortXML:function A(B){if(this.expression){this.expression.buildShortXML(B);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.NumStepperContentProvider","mstrmojo.date");var A=mstrmojo.date;mstrmojo.DateStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.DateStepperContentProvider",curVal:null,init:function(F){this._super(F);var G=this.item,E=G[this.intField],I=G[this.valField],H=this.minField,D=this.maxField,C=G[H],B=G[D];this.min=C&&A.getDateFromDateInfo(C);this.max=B&&A.getDateFromDateInfo(B);this.curVal=I?A.getDateFromDateInfo(I):(this.min?new Date(this.min):new Date());this.createChildProviders();},createChildProviders:function(){var B=this;mstrmojo.array.forEach(["year","month","day"],function(C){B[C+"CP"]=new mstrmojo.NumStepperContentProvider({item:{interval:1},canLoop:true,updateConfig:function(E,D,F){this.curVal=E;this.max=D;this.min=F;},onTraverse:function(){B.traverse(C,this.curVal);}});});this.updateChildProviders();},updateChildProviders:function(){var I=this.max,D=this.min,G=this.curVal.getFullYear(),F=this.curVal.getMonth(),H=this.curVal.getDate(),C=I&&(G===I.getFullYear()),E=D&&(G===D.getFullYear()),J=C&&(F===I.getMonth()),B=E&&(F===D.getMonth());this.yearCP.updateConfig(G,I?I.getFullYear():null,D?D.getFullYear():null);this.monthCP.updateConfig(F+1,C?I.getMonth()+1:12,E?D.getMonth()+1:1);this.dayCP.updateConfig(H,J?I.getDate():mstrmojo.date.getDaysOfMonth(G,F+1),B?D.getDate():1);},traverse:function(E,D){var C=this.curVal,G=(E==="year")?D:this.curVal.getFullYear(),B=(E==="month")?D:this.curVal.getMonth()+1,F=(E==="day")?D:this.curVal.getDate();F=Math.min(mstrmojo.date.getDaysOfMonth(G,B),F);C.setFullYear(G,B-1,F);if(this.max){C=Math.min(this.max,C);}if(this.min){C=Math.max(this.min,C);}this.curVal=new Date(C);this.updateChildProviders();if(this.onTraverse){this.onTraverse();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocModel","mstrmojo.func","mstrmojo.hash");var B=mstrmojo.func.wrapMethods,C=mstrmojo.hash;function G(M){var L=this;return B({success:function(N){mstrmojo.hash.copy(N,L);}},M);}function I(L,M){var N=this.getDataService();N[L].apply(N,M);}function D(){var L=this;return function(M){L.setPrompts(L.getDataService().getPrompts());};}mstrmojo.ResultSetDocumentModel=mstrmojo.declare(mstrmojo.DocModel,null,{scriptClass:"mstrmojo.ResultSetDocumentModel",setPrompts:function E(L){this.prompts=L;if(L){L.host=this;}},execute:function J(P,Q,N){var M=this,O=C.copy(P,{dssId:P.did}),L;O.objType=P.objType||P.t;if(P.forceExec){O.freshExec=true;O.doNotUpdateCaches=true;}L=B({success:function(R){C.copy(R,M);M.setPrompts(M.getDataService().getPrompts());},prompts:D.call(M)},Q);I.call(this,"execute",[O,M.newCallback(C.copy({method:"execute"},L)),N]);},open:function F(M,N){var L=this;if(M.data){C.copy(M.data,L);}if(N.success){N.success(L);}if(N.complete){N.complete(L);}},answerPrompts:function H(L){I.call(this,"answerPrompts",[this.prompts,G.call(this,L)]);},linkToObject:function A(O,P){var M=this,L=B({prompts:D.call(this)},P),N=L.success;L.success=function(Q){C.copy(Q,M);M.setPrompts(M.getDataService().getPrompts());M.gbElements=O.groupByElements;N(Q);delete M.gbElements;};I.call(this,"linkToObject",[O,L]);},getPageByTree:function K(L){this.getDataService().getPageByTree(L);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo._IsPanelStack","mstrmojo._IsSelectorTarget","mstrmojo._HasBuilder","mstrmojo._HasTouchScroller","mstrmojo._TouchGestures","mstrmojo.TouchScroller","mstrmojo.css");var T=mstrmojo.css,E=mstrmojo.dom,K=Math,A=700;function G(){var U=this._animHandle;if(U){window.clearTimeout(U);delete this._animHandle;}}function D(){delete this._animHandle;this._isAnimating=false;}function J(Z,Y,X,W){var V=this._translateX;if(X||Y!==V){this._translateX=Y;G.call(this);if(Z){this._isAnimating=true;}var U=this.containerNode.style;U[E.CSS3_TRANSITION_DURATION]=Z+"ms";U[E.CSS3_TRANSFORM]=E.createTranslateString(-Y);if(W){var a=this.id;this._animHandle=window.setTimeout(function(){var b=mstrmojo.all[a];if(mstrmojo.all[a]._isAnimating){D.call(b);}},Z*3);}if(this._scroller){this._scroller.raiseEvent({name:"transformAnim",x:Y,y:0});}}}function C(){if(!this.defn.dk){return ;}var b=this.children,Z=0,U=b.length,Y=this.selectedIdx,a=[];for(Z=0;Z<U;Z++){a.push('<div idx="'+Z+'" class="');if(Z===Y){a.push("on");}a.push('"><div></div></div>');}var W=this.selectorBtns,V=mstrMobileApp.getDeviceDPI();var X={160:26,213:26,240:38,320:57},d=X[V]||(X[160]*V/160);W.style.width=(U*d)+"px";W.innerHTML=a.join("");this.selector.style.display="block";}mstrmojo.android.DocPanelStack=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo._HasBuilder,mstrmojo._HasTouchScroller,mstrmojo._IsPanelStack,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.DocPanelStack",btnMarkup:"",markupString:'<div id="{@id}" title="{@tooltip}" class="mstrmojo-DocPanelStack {@cssClass}" style="{@domNodeCssText}"><div></div><div class="mstrmojo-PanelSelector"><div class="mstrmojo-SelectorBtns"></div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},selector:function(){return this.domNode.lastChild;},selectorBtns:function(){return this.domNode.lastChild.firstChild;}},formatHandlers:{domNode:["RW","B"]},scrollerConfig:{bounces:false,showScrollbars:false,vScroll:false,hScroll:true},addChildren:function I(b,f,d){this._super(b,f,d);var a=this.containerNode.style,e=this.getFormats(),V=this._pnlWidth=parseInt(e.width,10),g=parseInt(e.height,10),Y=this.selectedIdx;var X=this.selectedIdx*V;a.width=(V*b.length)+"px";if(!E.isWinPhone){J.call(this,0,X);}else{a.msTransform=X;}var Z=0,W=b.length;for(Z=0;Z<W;Z++){var U=b[Z];U.visible=true;U.selected=(Z===Y);U.updatePanelDimensions(Z*V,g,V);}C.call(this);this.updateScroller();return true;},postBuildRendering:function R(){this._super();C.call(this);var U=this.id;mstrmojo.dom.attachEvent(this.containerNode,E.CSS3_TRANSITION_END,function(V){var W=mstrmojo.all[U];if(V.target!==W.containerNode){return true;}G.call(W);V.stopPropagation();D.call(W);return false;});return true;},setInfoWindowDimensions:function S(Z){var a=this.parent;if(a.scriptClass==="mstrmojo.DocPortlet"){a.setInfoWindowDimensions(Z);}var W=Z.h,e=Z.w,U=this.domNode.style,Y=this.children,X=Y.length,b="px",V;U.height=W+b;U.width=e+b;this.containerNode.style.width=(e*X)+b;this._pnlWidth=e;this._translateX=(this.selectedIdx||0)*e;for(V=0;V<X;V++){Y[V].updatePanelDimensions(V*e,W,e,true);}this.updateScroller();},getTitle:function H(){return this.title;},initScroller:function M(U){U.attachEventListener("scrollDone",this.id,function(V){this._translateX=V.x;});},updateScrollerConfig:function Q(){var W=this.children,Y=W&&W.length,V=this._super();V.noVScroll=true;if(Y){var U=this._translateX||0,X=this._pnlWidth,Z;Z={start:K.max(U-X,0),end:K.min(U+X,Y*X-X)};mstrmojo.hash.copy({scrollEl:this.containerNode,offset:{x:Z,scrollPast:false},origin:{x:U,y:0}},V);}return V;},onselectedIdxChange:function B(V){var U=this.selectorBtns,W=U&&U.childNodes;if(W){T.addClass(W[V.value],"on");T.removeClass(W[V.valueWas],"on");}},onselectedKeyChange:function F(W){this._super(W);var X=this._pnlWidth,V=this.selectedIdx*X;if(E.isWinPhone){var U=this.containerNode;U.style.position="relative";(new mstrmojo.fx.AnimateProp({props:{left:{isStyle:true,start:V,stop:this.prevSelectIdx*X,suffix:"px",ease:mstrmojo.ease.linear}},duration:0,target:U})).play();}else{J.call(this,0,V);}this.updateScroller(true);},touchBegin:function N(U){if(this._isAnimating){U.stop();return false;}if(!this.defn.sw&&!E.contains(this.selector,U.target,true,this.domNode)){return false;}return this._super(U);},touchTap:function P(a){var Y=a.target,V=this.domNode;if(E.contains(this.selector,Y,true,V)){var Z=this.selectorBtns,W=-1;if(E.contains(Z,Y,true,V)){W=E.findAncestorByAttr(Y,"idx",true,Z).value;}else{W=this.selectedIdx+((a.clientX-V.offsetLeft<(this._pnlWidth/2))?-1:1);}if(W>-1){var U=this.children[W];if(U){this.selectPanel(U.k);}}}else{var X=this.controller;if(X&&X.viewTap){X.viewTap();}}},touchSwipeBegin:function L(U){if(this.defn.sw||E.contains(this.selector,U.target,true,this.domNode)){return this._super(U);}return this.bubbleTouchEvent(U);},touchSwipeEnd:function O(X){X.evt.handled=true;mstrmojo.TouchScroller.ScrollIndicators.hideAll();var a=this._translateX||0,U=this._pnlWidth,W=this._scroller.offset.x,Y=K.max(K.min(a-X.delta.x,W.end),W.start),d=a-Y,Z=K.abs(d),V=A,b=(Z<U*0.2);if(b){Y=a;V*=Z/U;}else{Y=a+((d<0)?U:-U);V*=(U-Z)/U;}J.call(this,K.round(V),Y,true,b);this.selectPanel(this.children[Y/U].k,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._HasTouchScroller","mstrmojo._TouchGestures");mstrmojo.android.TextArea=mstrmojo.declare(mstrmojo.Label,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.android.TextArea",markupString:'<div id="{@id}" class="mstrmojo-TextArea {@cssClass}" style="{@cssText}"><div>{@text}</div></div>',markupMethods:{ontextChange:function(){this.domNode.firstChild.innerHTML=this.text||"";},oncssTextChange:function(){this.domNode.style.cssText=this.cssText||"";},onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onheightChange:function(){this.domNode.style.height=this.height||"auto";}},allowTouchBubble:false,updateScrollerConfig:function A(){var B=this._super(),E=this.domNode,F=E.firstChild,D=parseInt(this.height,10);if(isNaN(D)){D=E.clientHeight;}B.bounces=false;B.scrollEl=F;B.origin=B.origin||{x:0,y:0};var G=Math.max(F.offsetHeight-D,0);var C=B.vScroll=(G!==0);if(C){B.offset={y:{start:0,end:G}};}return B;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.Container","mstrmojo.ListBase","mstrmojo.android._IsList","mstrmojo.android._IsIncFetchList","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller");var H=mstrmojo.array,J=mstrmojo.hash.copy,G=mstrmojo.TouchScroller.EnumIncFetchEdges,D=G.start,C=50,F=20,B=false;function L(Q,M){if(this.end===null||isNaN(this.end)||this.start===null||isNaN(this.start)){this.ifDirection="h";this.supportedEdges=0;H.forEach(["start","end"],function(R){this.supportedEdges+=isNaN(this[R])?G[R]:0;},this);var P=this,N;this.ifDataHelper=new mstrmojo.Obj({totalSize:-1,next:function O(U,T){var S=[],R=-1;S=S.concat(P.items);if(T===D){for(N=0;N<C;N++){S.splice(0,0,{n:--Q});}S=S.splice(0,C+F);M=Q+C+F-1;R=C;}else{for(N=0;N<C;N++){S.push({n:++M});}S=S.splice(S.length-C-F);Q=M-C-F;R=F-3;}P.set("items",S);window.setTimeout(function(){B=true;P.singleSelect(R);},0);U.success({items:undefined});}});}}mstrmojo.android.ui.CalendarYearList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo.android._IsList,mstrmojo._TouchGestures,mstrmojo._HasTouchScroller,mstrmojo.android._IsIncFetchList],{scriptClass:"mstrmojo.android.ui.CalendarYearList",years:undefined,scrollerConfig:{bounces:false,showScrollbars:false,scrollPast:true},getItemMarkup:function(N,M){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}"><span>{@n}</span><div class="marker"></div></{@tag}>';},postCreate:function K(O){if(this._super){this._super();}var Q=(this.start)||(new Date(0)).getFullYear(),M=(this.end)||((new Date()).getFullYear()+5),P=Q,N=this.items=this.items||[];while(M>=P){N.push({n:P++});}L.call(this,Q,M);},postBuildRendering:function A(){this._super();var M=this.ITEMS_NODE_WIDTH=this.itemsNode.clientWidth;this.updateScroller();this.singleSelectByField(this.initialYear,"n");this._scroller.attachEventListener("scrollDone",this.id,function(N){var Q=(N.x+(parseInt(this.width,10)-M)/2)/M,P=Math.floor(Q),O=P;O+=((Q-P)>0.3)?1:0;if(O!==this.selectedIndex){this.singleSelect(O);}else{this.onchange();}});},onchange:function(){var M=this.selectedIndex;if(M>=0){var O=this.ITEMS_NODE_WIDTH,N=(M*O)-(parseInt(this.width,10)-O)/2;this._scroller.scrollTo(N,undefined,B?0:200);this.raiseEvent({name:"yearChanged",value:this.selectedItem.n});B=false;}},updateScrollerConfig:function E(){var N=this._super(),P=this.itemsContainerNode,M=parseInt(this.width,10);if(isNaN(M)){M=this.domNode.clientWidth;}N.scrollEl=P;N.noVScroll=true;N.origin=N.origin||{x:0,y:0};var Q=Math.max(P.clientWidth-M,0),O=N.hScroll=(Q!==0);if(O){N.offset={x:J({start:0,end:Q},N.offset&&N.offset.x)};}else{N.offset=undefined;}return N;},destroy:function I(){if(this.ifDataHelper){this.ifDataHelper.destroy();delete this.ifDataHelper;}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.android._IsList","mstrmojo.css","mstrmojo.dom","mstrmojo.array");var K=mstrmojo.dom,L=mstrmojo.css;function F(T,Q){var R=K.findAncestorByAttr(T.target,"idx",true,this.domNode);if(R){var P=R.value,S=this.itemRenderer;S[Q](R.node,this.items[P],P,this);}}mstrmojo.android.SimpleList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo.android._IsList,mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.android.SimpleList",scrollerConfig:{bounces:false,showScrollbars:false},highlightOnSelect:false,hasEvenRows:false,rowHeight:-1,itemsFloat:false,init:function O(P){this._super(P);if(!mstrApp.isTouchApp()){L.addWidgetCssClass(this,["hosted"]);}},updateItem:function C(P){var T=document.createElement("div"),R=this.items[P],Q=this;T.innerHTML=this.itemRenderer.render(this.items[P],P,this);var S=T.firstChild;this.itemsContainerNode.replaceChild(S,this._getItemNode(P));mstrmojo.array.forEach(R.dependents,function(U){Q.updateItem(U._renderIdx);});return S;},setDimensions:function N(R,Q){if(this.height!==R||this.width!==Q){this.height=R;this.width=Q;var P=this.domNode;if(P){P.style.height=R;P.style.width=Q;this.updateScroller();}}},buildRendering:function H(){var P=this._super();if(this.itemsFloat){var Q=document.createElement("div");Q.className="clear-me";this.itemsContainerNode.appendChild(Q);}return P;},updateScrollerConfig:function J(){var P=this._super(),T=this.itemsContainerNode,R=parseInt(this.height,10);if(isNaN(R)){R=this.domNode.clientHeight;}P.scrollEl=T;P.noHScroll=true;P.origin=P.origin||{x:0,y:0};var S=P.offsetIdx;if(S){delete P.offsetIdx;P.origin.y=this.getItemOffset(S);}var U=Math.max(this.getItemsContainerHeight()-R,0);var Q=P.vScroll=(U!==0&&P.noVScroll!==true);if(Q){P.offset={y:{start:0,end:U}};}else{P.offset=null;}return P;},getItemOffset:function E(P){var Q=this._getItemNode(P);return Math.max(Q.offsetTop-parseInt(L.getStyleValue(Q,"marginTop"),10),0);},getOffsetIndex:function B(){var T=this.scrollerConfig,Y=T&&T.origin,U=Y&&Y.y;if(U){var P=this.rowHeight;if(this.hasEvenRows&&P!==-1){return Math.round(U/P);}var Q=this.itemsContainerNode.childNodes,S=0,V=Q.length-1;while(V>=S){var X=S+V>>1,W=Q[X],R=W.offsetTop,Z=W.offsetHeight;if(U<R-Z){V=X-1;}else{if(U>R+(Z*2)){S=X+1;}else{return X;}}}}return 0;},scrollToItem:function D(Q,R){var P=this._scroller;if(P){P.scrollTo(0,this.getItemOffset(Q),R||0);}},getItemsContainerHeight:function G(){var S=this.hasEvenRows,Q;if(!S||this.rowHeight===-1){if(S){var R=this._getItemNode(0);if(R){this.rowHeight=R.offsetHeight;}}else{this.rowHeight=-1;}Q=this.itemsContainerNode.offsetHeight;}else{var P=this.items;Q=(this.rowHeight*((P&&P.length)||0));}return Q;},touchSelectBegin:function I(P){if(this.highlightOnSelect){F.call(this,P,"select");}this._super(P);},touchSelectMove:function M(P){this._selectMove=true;this._super(P);},touchSelectEnd:function A(Q){var P=this._selectMove;delete this._selectMove;if(!P){this.touchTap(Q);}else{if(this.highlightOnSelect){F.call(this,Q,"unselect");}}},touchend:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo._HasTouchScroller","mstrmojo.dom");var B=mstrmojo.dom;function A(G,E){var D=Math.max(G.x,E.x);var I=Math.max(G.y,E.y);var F=Math.min(G.x+G.w,E.x+E.w)-D;var H=Math.min(G.y+G.h,E.y+E.h)-I;if(F<0||H<0){return{x:NaN,y:NaN,w:NaN,h:NaN};}return{x:D,y:I,w:F,h:H};}function C(D){return{x:D.x,y:D.y,w:D.w,h:D.h};}mstrmojo.SmoothScroll=mstrmojo.provide("mstrmojo.SmoothScroll",{viewRect:null,scrollerRect:null,unitRect:null,cachedUnits:[],demarcationUnits:{left:null,right:null,top:null,bottom:null},viewCutX:function(){},storeUnits:function(){this.cachedUnits=[];var G=C(this.unitRect),D=Math.ceil(this.scrollRect.h/G.h),E;for(E=0;E<D;E++,G.y+=G.h){var F=this.getUnitFromPoint(G.x+G.w/2,G.y+G.h/2);if(!F){continue;}this.cachedUnits.push(F);}},appendUnits:function(G,E){var I=this.cachedUnits,D;for(D=G;D<=E;D++){var F=I[D];if(!F){return ;}if(F.outside==true){F.outside=false;var H=F._parentNode,J=H.children;H.insertBefore(F,J[F._oldIndex]);H.style.paddingTop="";delete F._parentNode;delete F._oldIndex;}}console.log(E-G+1+" units added.");},removeUnits:function(G,E){var I=this.cachedUnits,D;for(D=G;D<=E;D++){var F=I[D];if(!F){return ;}if(F.outside!=true){var H=F.parentNode,J=H.children;F._parentNode=H;F._oldIndex=0;H.removeChild(F);H.style.paddingTop=this.unitRect.h+"px";F.outside=true;}}console.log(E-G+1+" units removed.");},viewCutY:function(K){if(!this.viewRect||!this.scrollRect||!this.unitRect){return ;}var G=K?K.y:this._scroller.origin.y,E=G+this.viewRect.h;if(!this._scroller||!this._scroller.scrollEl){console.log("no scrollEl.");return ;}var J=this._scroller.scrollEl;var H=Math.floor(G/this.unitRect.h),F=Math.floor(E/this.unitRect.h),I=this.cachedUnits,D=I.length;delta=0;this.removeUnits(0,H-1);this.appendUnits(H,F);this.removeUnits(F+1,D);delta=H;console.log("do viewCut.");},updateScroller:function(G,F){if(this._super){this._super(G,F);}var E=mstrmojo.dom.position;if(!this.unitRect||!this.unitRect.w||!this.unitRect.h){var D=this.cachedUnits[0];if(!D){return ;}this.unitRect=E(D);}if(this.viewNode){this.viewRect=E(this.viewNode);}this.scrollRect={x:this.unitRect.x,y:this.unitRect.y,w:this.unitRect.w,h:this.unitRect.h*this.cachedUnits.length};if(!this.viewRect||!this.scrollRect||!this.unitRect){return ;}this.viewCutY(this._scroller.origin);},getUnitFromPoint:function(D,J){var E=[],H=false;do{var I=document.elementFromPoint(D,J);if(I==G){break;}if(I.offsetHeight==this.unitRect.h&&I.offsetWidth==this.unitRect.w){H=true;}else{I.__metaDisplay=I.style.display;E.push(I);I.style.display="none";}var G=I;}while(!H&&I!=document.body);var F=I;while(E.length){var I=E.pop();I.style.display=I.__metaDisplay;delete I.__metaDisplay;}if(H){return F;}else{return null;}},postBuildRendering:function(D){if(this._super){this._super(D);}console.log("event binded!");this.smoothSwipeListener=this._scroller.attachEventListener("scrollMoved",this.id,this.viewCutY);},unrender:function(){if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._TouchGestures","mstrmojo.android._IsList","mstrmojo._HasTouchScroller","mstrmojo.android.selectors._SupportsHoriz","mstrmojo.css");mstrmojo.android.selectors.CheckList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._TouchGestures,mstrmojo.android._IsList,mstrmojo._HasTouchScroller,mstrmojo.android.selectors._SupportsHoriz],{scriptClass:"mstrmojo.android.selectors.CheckList",hasEvenRows:true,init:function A(C){this._super(C);var B=["selector-checklist"];if(this.multiSelect){B.push("multi");}mstrmojo.css.addWidgetCssClass(this,B);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable","mstrmojo._HasTouchScroller","mstrmojo._TouchGestures","mstrmojo.hash");mstrmojo.android.HTMLContainer=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable,mstrmojo._HasTouchScroller,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.HTMLContainer",markupString:'<div id="{@id}" class="mstrmojo-HTMLContainer {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div>{@v}</div></div>',markupSlots:{valueNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["RW","B","F","P","background-color","fx","text-align","white-space"]},update:function update(node){var d=node.data,v=d.v||"";var div=document.createElement("div");div.innerHTML="<textarea>"+v+"</textarea>";v='<div style="display:none">&nbsp;</div>'+div.firstChild.value+"&nbsp;";div=null;this.v=v;if(this.thresholdId||d.tid){delete this.fmts;}this.thresholdId=d.tid;this.scrollerConfig={bounces:false,showScrollbars:false};},postBuildRendering:function postBuildRendering(){var scripts=this.domNode.getElementsByTagName("script"),len=scripts.length,i;for(i=0;i<len;i++){eval(scripts[i].innerHTML);}return this._super();},updateScrollerConfig:function updateScrollerConfig(){var cfg=this._super(),scrollEl=this.valueNode,domNode=this.domNode,fmts=this.getFormats(),iterator={Height:{a:"y",s:"v"},Width:{a:"x",s:"h"}},offset={};cfg.scrollEl=scrollEl;mstrmojo.hash.forEach(iterator,function(info,dimension){if(cfg["no"+info.s.toUpperCase()+"Scroll"]){return ;}var widgetSize=parseInt(fmts[dimension.toLowerCase()],10);if(isNaN(widgetSize)){widgetSize=domNode["client"+dimension];}var offsetEnd=Math.max(scrollEl["offset"+dimension]-widgetSize,0),enableDimensionScroll=cfg[info.s+"Scroll"]=(offsetEnd!==0);if(enableDimensionScroll){offset[info.a]={start:0,end:offsetEnd};}});cfg.offset=offset;cfg.origin=cfg.origin||{x:0,y:0};return cfg;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.VisHeatMapColorTheme","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.dom","mstrmojo.css");var H=1200,G=800;var F={ON:0,OFF:1,PROPORTIONAL:2};var I={LABEL_CTNR_THRES:6,LABEL_CTNR_WIDTH_THRES:32,LGD_GUTTER:5,LABEL_PADDING:2};var K={"heatmap-one-level-1":{},"heatmap-two-level-2":{},"heatmap-multi-level-1":{},"heatmap-multi-level-2":{},"heatmap-multi-level-3":{},init:false};function C(L){var N=16777216+L;var M="#"+N.toString(16).substring(1).toUpperCase();return M;}function E(N,R){var L=[N];while(L.length!==0){var Q=L.shift();if(Q===undefined||Q.deleted){continue;}R(Q);var P=Q.entityChildren;if(P!==undefined){var M=P.length;for(var O=0;O<M;O++){L.push(P[O]);}}}}function D(N,Q,O){if(N.deleted){return ;}if(O===undefined){Q(N);}else{Q(N,O);}if(N.entityChildren===undefined){return ;}var L=N.entityChildren,M=L.length;for(var P=0;P<M;P++){var R=L[P];if(O===undefined){D(R,Q);}else{var S=O;if(!S){S=P.toString();}else{S=S+":"+P;}D(R,Q,S);}}}function J(L,N){var M;if(N===1){if(L===0){M="heatmap-one-level-1";}}else{if(N===2){if(L===0){M="heatmap-multi-level-1";}else{if(L===1){M="heatmap-two-level-2";}}}else{if(N>=3){if(L===0){M="heatmap-multi-level-1";}else{if(L===1){M="heatmap-multi-level-2";}else{if(L===2){M="heatmap-multi-level-3";}}}}}}return M;}function B(L,M){if(!L||!M){return false;}if(M.x>=L.x+L.w||M.y>=L.y+L.h||M.x+M.w<=L.x||M.y+M.h<=L.y){return false;}else{return true;}}function A(O,M){var L=Math.max(O.x,M.x);var Q=Math.max(O.y,M.y);var N=Math.min(O.x+O.w,M.x+M.w)-L;var P=Math.min(O.y+O.h,M.y+M.h)-Q;if(N<0||P<0){return{x:NaN,y:NaN,w:NaN,h:NaN};}return{x:L,y:Q,w:N,h:P};}mstrmojo.VisHeatMapCanvas=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.VisHeatMapCanvas",parent:null,root:null,colorTheme:null,attributes:[],scale:1,labelSetting:0,showMetric:false,bgColor:"#333333",numImages:0,offsetX:0,offsetY:0,markupString:'<div style="position:absolute; width:{@width}px; height:{@height}px"><canvas width={@width} height={@height} style="visibility: hidden; z-index:0"></canvas><span></span></div>',markupSlots:{domCanvas:function(){return this.domNode.firstChild;},domSpan:function(){return this.domNode.childNodes[1];},domImage:function(){return this.domNode.childNodes[2];}},postBuildRendering:function(){this.initCSSATTR();this.draw();if(this._super){this._super();}},removeImageAndLabels:function(){var N=this.domNode,P=N.childNodes,O=P.length;for(var L=O-1;L>1;L--){var M=P[L];N.removeChild(M);}this.numImages=0;},removeLabels:function(){var O=this.domNode,Q=O.childNodes,P=Q.length,M=1+this.numImages;for(var L=P-1;L>M;L--){var N=Q[L];O.removeChild(N);}},updateOffsets:function(L,M){this.offsetX=L;this.offsetY=M;this.removeLabels();this.drawLabels();},draw:function(L,M){if(L!==undefined){this.offsetX=L;}if(M!==undefined){this.offsetY=M;}this.removeImageAndLabels();this.drawRects();this.drawLabels();},drawRects:function(){var T=this.width,Z=this.height,W=this.scale,N=Math.ceil(T*W),V=Math.ceil(Z*W),U=this.domCanvas,a=this.domNode,L=document.createDocumentFragment(),Q=Math.ceil(V/G),O=Math.ceil(N/H),R=0;for(var Y=0;Y<Q;Y++){for(var X=0;X<O;X++){var S={x:X*H,y:Y*G,w:H,h:G};if(Y+1===Q){S.h=V-S.y;}if(X+1===O){S.w=N-S.x;}U.setAttribute("width",S.w);U.setAttribute("height",S.h);var M=U.getContext("2d");M.fillStyle=this.bgColor;M.fillRect(0,0,S.w,S.h);var P=function(o,f){var l=o.size;if(o.entityChildren===undefined&&!o.deleted&&B(S,l)){var h=Math.max(l.x-S.x,0),k=Math.max(l.y-S.y,0),g=Math.min(l.x+l.w-S.x,S.w),j=Math.min(l.y+l.h-S.y,S.h);M.fillStyle=o.color;M.fillRect(h,k,g-h,j-k);}o.idx=f;};D(this.root,P,"");var d=U.toDataURL();if(d==="data:,"){throw mstrmojo.desc(111111,"Canvas rendering failed. Maybe the available memory is not enough, please clean the memory and retry");}var b=document.createElement("img");b.src=d;b.style.position="absolute";b.style.left=S.x+"px";b.style.top=S.y+"px";b.setAttribute("draggable","false");b.setAttribute("orgx",S.x);b.setAttribute("orgy",S.y);L.appendChild(b);R++;}}U.setAttribute("width",0);U.setAttribute("height",0);a.style.width=N+"px";a.style.height=V+"px";a.appendChild(L);this.numImages=R;},drawLabels:function(){var M=this.attributes.length,Q=this,N=this.domNode,T=I.LGD_GUTTER,U=I.LABEL_PADDING,R={x:this.offsetX,y:this.offsetY,w:this.width,h:this.height};var S=[],P=[{},{},{}];var L=Math.floor(Math.log(this.scale)/Math.log(2));L=Math.min(L,M-3);L=Math.max(L,0);this._ext=L;var O=function(AE){if(AE===Q.root||AE.deleted){return ;}var X=AE.size,k=X&&X.w,AD=X&&X.h;if(!B(R,X)){return ;}if(k<I.LABEL_CTNR_WIDTH_THRES+2*I.LABEL_PADDING||AD<I.LABEL_CTNR_THRES){return ;}var AC=AE.text,s=AE.idx,W=AE.level-L;if(W>=0&&W<3){var AF,a,t=J(W,M),u=K[t].font,Y=K[t].fontSize,AA={s:{},e:AE,m:0,css:t};if(Q.showMetric===true&&AE.entityChildren===undefined){var g={};mstrmojo.hash.copy(X,g);if(M>1&&W===0){g.w-=2*T;g.h-=T;}else{g.w-=2*U;}var r,d;if(Q.labelSetting===F.PROPORTIONAL){r=9;var b=8,l=false,d=Q.getTextSize(AC,u,r,true,false,g.w);while(b>=1){if(d.h<g.h){r+=b;}else{if(r===9){break;}if(r>=g.w){break;}if(!l){b/=2;}l=true;r-=b;}d=Q.getTextSize(AC,u,r,true,false,g.w);if(l){b=b>>1;}}if(d.h>g.h&&r>9){r--;}if(r>g.w){r=g.w;}AA.fs=r;}else{r=Y;}AA.lh=r;d=Q.getTextSize(AC,u,r,true,false,g.w);AF=Math.min(d.w,g.w);a=d.h;if(a>g.h){a=Math.floor(g.h/r)*r;}}else{if(S[W]===undefined){S[W]={};}var q=S[W];if(q[AC]===undefined){var d=Q.getTextSize(AC,u,Y,true),AF=d.w,a=d.h;if(M>1&&W===0){AF+=2*T;a+=T;}q[AC]={w:AF,h:a};}else{AF=q[AC].w;a=q[AC].h;}if(a>AD){return ;}AA.lh=a;var z;if(M>1&&W===0){z=2*T;}else{z=2*U;}if(AF>k-z){var Z=AF>>1,AB=Math.floor(AD/AA.lh);if(Z>(k-z)*AB){return ;}AF=k-z;if((M==1&&W==0)||(M==2&&W==1)||(M>2&&W==2)){var V=Q.getTextSize(AC,u,Y,true,false,k-z,true);a*=Math.floor(Math.min(V.h,AD)/AA.lh);AA.isLowestLevel=true;}}}var j=X.x+((k-AF)>>1),f=X.y+((AD-a)>>1);AA.s={x:j,y:f,w:AF,h:a};P[W][s]=AA;}};if(Q.labelSetting!==F.OFF){E(this.root,O);this.layoutLabels(P);}},layoutLabels:function(l){var Y=this,q=document,N=q.createDocumentFragment();function X(z){var w=z.s,x=z.e,u=z.css,t=Y.getLabelColor(w,x),r=z.fs!==undefined;var AA=q.createElement("div");if(r){AA.setAttribute("style","font-size: "+z.fs+"px !important");AA.className=u+" heatmap-showMetric-text";}else{AA.className=u+" heatmap-trun-text";}AA.style.position="absolute";AA.style.color=t;AA.style.backgroundColor="rgba(255, 255, 255, 0)";AA.style.zIndex="1";AA.style.left=w.x+"px";AA.style.top=w.y+"px";AA.style.width=w.w+"px";AA.style.height=w.h+"px";AA.style.lineHeight=z.lh+"px";if(z.isLowestLevel){AA.style.textOverflow="ellipsis";AA.style.wordBreak="normal";}AA.setAttribute("idx",x.idx);AA.innerHTML=x.text;N.appendChild(AA);}var j=l[0],h=l[1],g=l[2],a;for(a in h){var k=h[a],M=k.s,d=k.e,S=d.parentEntity,p=j[S.idx];if(p===undefined){X(k);continue;}var Q=p.s,T=A(M,Q);var b=false;if(T.w>5||T.h>5){if(Q.y<=M.y){var o=((Q.y+Q.h-M.y)>>1)+1;if(p.m!==2&&(Q.y-o>=S.size.y)&&(M.y+M.h+o<=d.size.y+d.size.h)){Q.y-=o;M.y+=o;p.m=1;}else{b=true;}}else{var o=((M.y+M.h-Q.y)>>1)+1;if(p.m!==1&&(Q.y+Q.h+o<=S.size.y+S.size.h)&&(M.y-o>=d.size.y)){Q.y+=o;M.y-=o;p.m=2;}else{b=true;}}}if(b!==true){X(k);}}for(a in j){X(j[a]);}for(a in g){b=false;var U=g[a],L=U.e,O=L.parentEntity,P=O.parentEntity,e=O.idx,f=P.idx,V=h[e],W=j[f];if(V!==undefined){var Z=A(V.s,U.s);if(!isNaN(Z.w)){b=true;}}if(b===false&&W!==undefined){var R=A(W.s,U.s);if(!isNaN(R.w)){b=true;}}if(b!==true){X(U);}}this.domNode.appendChild(N);},getLabelColor:function(X,U){var M=U.level-this._ext;if(M===0){return"#FFFFFF";}var T=this.colorTheme;if(U.entityChildren===undefined){return C(T.getContrastColor(parseInt(U.color.substring(1,U.color.length),16)));}var W=[U],S=0,P=0;while(W.length!==0){var Q=W.shift(),L=Q.entityChildren,O=Q.entityChildren.length;for(var R=0;R<O;R++){var N=L[R];if(N.deleted){continue;}var V=A(X,N.size);if(N.entityChildren===undefined){if(!isNaN(V.w)){if(T.isBrightColor(parseInt(N.color.substring(1,N.color.length),16))){S+=V.w*V.h;}else{P+=V.w*V.h;}}}else{if(!isNaN(V.w)){W.push(N);}}}}if(S>P){return"#000000";}else{if(M===1){return"#e6e7e8";}else{return"#d1d3d4";}}},getEntity:function(Q){var M=Q.x,L=Q.y,O;var N=function(W){if(W.entityChildren===undefined&&!W.deleted&&W.size){var U=W.size,S=U.x,V=U.y,R=S+U.w,T=V+U.h;if(M>=S&&M<=R&&L>=V&&L<=T){O=W;}}};var P=function(T,V){if(T.deleted){return ;}V(T);var R=T.entityChildren;if(R!==undefined){var S=R.length;for(var U=0;U<S;U++){var W=R[U];P(W,V);if(O!==undefined){return ;}}}};P(this.root,N);return O;},initCSSATTR:function(){if(K.init===false){var N=this.domSpan;for(var M in K){if(M==="init"){continue;}N.setAttribute("class",M);var L=document.defaultView.getComputedStyle(N);K[M].fontSize=parseInt(L.fontSize);K[M].font=L.fontFamily;}}},getTextSize:function(S,M,U,O,L,N,P){var Q=this.domSpan,R="break-all";if(P){R="normal";}Q.className="";Q.innerHTML=S;Q.style.cssText="position:absolute; visibility:hidden; z-index:-1; font-family:"+M+"; font-size:"+U+"px; font-weight:"+(O?"bold":"normal")+"; font-style:"+(L?"italic":"normal")+"; line-height:"+U+"px;";var T=Q.offsetWidth;if(N!==undefined&&T>N){Q.style.cssText+="overflow:hidden; word-break:"+R+"; width:"+N+"px;";T=Q.offsetWidth;}return{w:T,h:Q.offsetHeight};}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.array","mstrmojo.dom","mstrmojo.css");var R=mstrmojo.array,U=mstrmojo.css,M=mstrmojo.dom,O=1,J="selected",H="d",L="m",E="y";function V(a,e,W,f){var Z,b=this.selected=this.selected||[],X;for(Z=0;Z<b.length;Z++){X=b[Z];if(X.day===e&&X.month===W&&X.year===f){b.splice(Z,1);return false;}}var Y={node:a,day:e,month:W,year:f};Y.n=mstrmojo.date.formatDateInfo(Y,mstrmojo.locales.datetime.DATEOUTPUTFORMAT);b.push(Y);return true;}function I(W){this.contentNode.innerHTML=this.markupBuilder.getContentHTML({m:0,y:W},{m:11,y:W},{incl:false});}function F(W,Z){var X=this.contentNode.children,Y;R.forEach(W||this.selected,function(a){if(a&&a.year===this.current.y){var b=new Date(a.year,a.month-O,1);R.forEach(X,function(d){if(parseInt(d.getAttribute(L),10)===a.month){U.toggleClass(d.getElementsByClassName("mstrmojo-CalendarMV-DatesList")[0].children[a.day+(b.getDay())-1],J,Z);return false;}});}Y=undefined;},this);}function G(W,Z){var b=this.MONTH_CACHE,a=b[parseInt(W,10)],Y=b[parseInt(Z,10)],X="selectedMonth";if(Z!==undefined){U.toggleClass(Y.node,X,false);}U.toggleClass(a.node,X,true);if(this._scroller){this._scroller.scrollTo(0,a.top,200);}if(!(mstrApp.isTablet()&&mstrApp.isLandscape())){this.headerNode.innerHTML=this.markupBuilder.getHeaderHTML(W,this.current.y);}}function K(j,g){I.call(this,this.current.y);this.updateScroller();var b=0,e=parseInt(this.height,10)-this.headerNode.clientHeight,d=this.contentNode,f=d.offsetTop,X=d.children,Z=this.selected,l=R.find(Z,"year",j),a=l!==-1,k=this.MONTH_CACHE=[{}];for(b=0;b<X.length-1;b++){var Y=X[b],W=Y.clientHeight;k.push({node:Y,top:Y.offsetTop-f-(e-W)/2,height:W});}this._scroller.scrollTo(0,0);G.call(this,g||(a&&Z[l].month)||O);this.selectItems();}mstrmojo.android.ui.CalendarMonthView=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.android.ui.CalendarMonthView",config:undefined,markupString:'<div id="{@id}" class="mstrmojo-Calendar-MonthView"><div class="mstrmojo-CalendarMV-Header"></div><div class="mstrmojo-CalendarMV-Content"><div></div></div></div>',markupSlots:{headerNode:function(){return this.domNode.firstChild;},contentNode:function(){return this.domNode.lastChild.lastChild;}},range:undefined,selected:undefined,multiSelect:true,current:undefined,scrollerConfig:{bounces:false,showScrollbars:false,showIndicators:false},postCreate:function B(){if(this._super){this._super();}var X=this,a=this.initialYear,W=this.initialMonth;if(isNaN(W)||isNaN(a)){throw new Error(mstrmojo.desc(96,"Error"));}this.current=new mstrmojo.Obj({m:W,y:a,onyChange:function Z(){K.call(X,this.y);},_set_m:function Y(e,d){var b=this.m;this.m=d;G.call(X,this.m,b);}});},postBuildRendering:function Q(){var W=this.markupBuilder,X=this.current;this._super();this.headerNode.innerHTML=W.getHeaderHTML(X.m,X.y);K.call(this,X.y,X.m);this._scroller.attachEventListener("scrollDone",this.id,function(Z){var g=this.MONTH_CACHE,Y=Math.abs,e=Z.y,f,d,b,a;for(a=1;a<g.length-1;a++){f=g[a].top;d=g[a+1].top;if((f<=e)&&(e<=d)){b=a+((Y(d-e)<Y(f-e))?1:0);break;}}this.current.set("m",b);});},touchTap:function P(b){var X=M.findAncestorByAttr(b.target,L,true,this.domNode);if(X){var Y=b.target,Z=parseInt(Y.getAttribute(H),10),W=parseInt(X.value,10),a=parseInt(X.node.getAttribute(E),10);if(!isNaN(Z)){if(this.singleSelect){R.forEach(this.selected,function(d){U.toggleClass(d.node,J,false);});this.selected=[];}U.toggleClass(Y,J,V.call(this,Y,Z,W,a));this.raiseEvent({name:"selectionChanged",items:this.selected});}if(!isNaN(W)){this.current.set("m",W);}}return false;},selectItems:function T(W){F.call(this,W,true);},unselectItems:function C(W){F.call(this,W,false);},touchSelectBegin:function A(W){},touchSelectMove:function D(W){},touchSelectEnd:function P(W){},updateScrollerConfig:function N(){var W=this._super(),a=this.contentNode,Y=parseInt(this.height,10);if(isNaN(Y)){Y=this.domNode.clientHeight;}W.scrollEl=a;W.noHScroll=true;W.origin=W.origin||{x:0,y:0};var Z=W.offsetIdx;if(Z){delete W.offsetIdx;W.origin.y=this.getItemOffset(Z);}var b=Math.max(a.clientHeight+this.headerNode.clientHeight-Y,0);var X=W.vScroll=b!==0;if(X){W.offset={y:{start:0,end:b}};}else{W.offset=null;}return W;},destroy:function S(){if(this.current){this.current.destroy();delete this.current;}delete this.MONTH_CACHE;this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._TouchGestures","mstrmojo.android._IsList","mstrmojo._HasTouchScroller","mstrmojo.android.selectors._SupportsHoriz","mstrmojo.css");var B,A=/line-height:(\d*)px/,C=mstrmojo.css;function G(I){if(this.parent.defn.ct!=="4"){return ;}mstrmojo.css[(I?"add":"remove")+"Class"](this.domNode,"glow");}mstrmojo.android.selectors.ButtonBar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._TouchGestures,mstrmojo.android._IsList,mstrmojo._HasTouchScroller,mstrmojo.android.selectors._SupportsHoriz],{scriptClass:"mstrmojo.android.selectors.ButtonBar",cssClass:"selector-btnbar",getItemMarkup:function F(I){if(!B){B=this._super(I).replace("{@en@n}","<div>{{@en@n}</div>");}return B;},getItemProps:function D(M,I){var L=this._super(M,I),K=L.style,J=K.match(A);if(J){L.style=K.replace(A,"line-height:"+(parseInt(J[1],10)-2)+"px");}return L;},touchBegin:function H(){G.call(this,true);},touchEnd:function E(){G.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._TouchGestures","mstrmojo.android._IsList","mstrmojo._HasTouchScroller","mstrmojo.android.selectors._SupportsHoriz","mstrmojo.color","mstrmojo.css");function E(F){return function(K,L,G,N){var J=K.style,I="remove",M="transparent",H="inherit";if(F){I="add";M=N.selColor;H=N._txtColor;}J.backgroundColor=M;J.color=H;mstrmojo.css[I+"Class"](K,mstrmojo.android._IsList.SELECTED_CLS);};}mstrmojo.android.selectors.LinkBar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._TouchGestures,mstrmojo.android._IsList,mstrmojo._HasTouchScroller,mstrmojo.android.selectors._SupportsHoriz],{scriptClass:"mstrmojo.android.selectors.LinkBar",selColor:"#60b1f6",minItemHeight:29,getItemMarkup:function(G){var F=this._itemMarkup;if(!F){this._itemMarkup=F=this._super(G).replace("{@en@n}",'<div>{@en@n}<div style="background-color:'+(this.parent.getFormats().color||"#000")+';"></div></div>');}return F;},getItemProps:function C(H,F){var G=this._super(H,F);if(G.sel){G.style+="color:"+this._txtColor+";background-color:"+this.selColor+";";}return G;},preBuildRendering:function B(){this.cssClass+=" selector-linkbar";this._txtColor=mstrmojo.color.getContrastingColor(this.selColor,"#ffffff","#000000");return this._super();}});var D=mstrmojo.android.selectors.LinkBar.prototype,A=D.itemRenderer;D.itemRenderer={render:A.render,select:E(true),unselect:E(false)};}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.DatePickerDialog");mstrmojo.android.nativedialog.DateTimePickerDialog=mstrmojo.declare(mstrmojo.android.nativedialog.DatePickerDialog,null,{scriptClass:"mstrmojo.android.nativedialog.DateTimePickerDialog",type:8,populateConfig:function A(){this._super();var C=this.children[0],B=C.dtValue.time;this.config.hour=B.hour;this.config.min=B.min;this.config.is24Hour=C.is24HourMode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.color","mstrmojo.css","mstrmojo.GridBase");var V=mstrmojo.css,M=mstrmojo.color,a=mstrmojo.css;function C(d,e){var f=d&&d.parent;while(f&&f.scriptClass.indexOf("DocPanelStack")===-1){if(e in f){return f;}f=f.parent;}return null;}function B(e){var d=document.createElement("img");e.appendChild(d);e.removeChild(d);}function E(d,e){var g=Math.floor(d/e.rowsPerPage),j=d%e.rowsPerPage,h=e.tableNode.tBodies[g],f=h.rows[j].cells;return f;}function H(){var d=this._renderTimer;if(d){self.clearInterval(d);delete this._renderTimer;this.renderingRows=false;}}mstrmojo.Grid=mstrmojo.declare(mstrmojo.GridBase,null,{scriptClass:"mstrmojo.Grid",rowsPerPage:0,effectiveRh:0,numPagesRendered:0,totalPages:0,pageStatus:null,_defaultPageHeight:0,renderPause:10,rhMin:14,defaultRowsPerPage:100,minRowsPerPage:50,init:function G(d){this._super(d);this.forceFixedSizes=true;},initPageSettings:function N(){var f=this.parent,d=this.defaultRowsPerPage,e=this.cp.getAvailableRowsCount();this.effectiveRh=this.rh||this.rhMin||1;this.effectiveRh=this.effectiveRh*f.model.docModel.getZoomFactor();if(f&&f.numRowFixed){d=e;}else{if(f&&f.scrollboxHeightFixed){d=Math.ceil(f.scrollboxHeight/this.effectiveRh);d=Math.max(d,this.minRowsPerPage);if(f.alwaysShowFirstBlockData&&e<d){d=e;this._shouldRenderNextPage=true;}}}this.pageStatus=[];this.rowsPerPage=d;this.initPageStatus(this.pageStatus);this._defaultPageHeight=this.rowsPerPage*this.effectiveRh;},initPageStatus:function Y(g){var f=this.rowsPerPage,d,j,e,h=function(o,p,k){var l=this;return function(){if(l._onDemand===undefined){l._onDemand=!o.isDataAvailable(p,k);}return l._onDemand;};};this.totalPages=(f&&Math.ceil(this.cp.rc/f))||0;g=g||this.pageStatus;for(d=0;d<this.totalPages;++d){j=d*f;e=j+f-1;if(!g[d]){g[d]={};}delete g[d]._onDemand;g[d].isOnDemand=h.call(g[d],this.cp,j,e);}},buildRendering:function F(){var d=false;if(this.renderMode==="vscroll"){this.initPageSettings();var h=this.pageStatus[0];d=h&&h.isOnDemand();this.start=0;this.end=-1;if(!d){this.end=Math.min(this.cp.rc,this.rowsPerPage)-1;}this.preRenderPages();this.preRenderPage(0,!d);}this._super();if(this.renderMode==="vscroll"){var g=this.parent,f=this,j=function(){f.gridContainerNode.style[a.MINHEIGHT]=(f.cp.rc*f.effectiveRh)+"px";};if(mstrmojo.dom.isIE7){this.gridContainerNode.style.zoom="1";window.setTimeout(j,10);}else{j();}if(!this.connectedScrollbox){if(g&&g.connectScrollbox){g.connectScrollbox(this);this.connectedScrollbox=true;}}this.postRenderPage(0,!d);this.postRenderPages();var e=g&&!g.scrollboxHeightFixed&&!g.numRowFixed;if(e&&this.numPagesRendered>=this.totalPages&&!d){this.postRenderingCleanup();}else{if(d||e||this._shouldRenderNextPage){this.onscroll();delete this._shouldRenderNextPage;}}}},preRenderPages:function Q(){},postRenderPages:function Z(){},configureActions:function L(){var d=this.parent;if(d&&d.configureActions){d.configureActions();}},preRenderPage:function O(d,e){this.pageNum=d;},postRenderPage:function J(e,g,h){if(e+1>this.numPagesRendered){this.numPagesRendered=e+1;}var d=this.pageStatus,f=d[e];if(!f){f=d[e]={};}if(g){f.filled=true;f.dirty=false;}var j=this.gridContainerNode.style;if(e===this.totalPages-1&&j){j[a.MINHEIGHT]="";}},invalidAllPages:function(){for(var d=0;d<this.totalPages;++d){var e=this.pageStatus[d];if(e.filled){e.dirty=true;}delete e._onDemand;e.filled=false;e.isDownloading=false;}this.thPosMap=[];this.posMap=[];},_startPageRenderThread:function b(d){var e=this.id;this.renderingRows=true;this._renderTimer=self.setInterval(function(){try{var h=mstrmojo.all[e];if(!h){return ;}var f=h.getPagesToRender(d);if(f.length>0){h.preRenderPages();h.renderPages(f);h.postRenderPages();h._postPagesClearup=true;}else{if(h._postPagesClearup){h.postRenderPagesCleanup();h.configureActions();h._postPagesClearup=false;}H.call(h);if(h.isRenderingComplete()){h.postRenderingCleanup();}}}catch(g){H.call(mstrmojo.all[e]);throw g;}},this.renderPause);},onscroll:function X(e,d){if(!this.renderingRows){if(e===true){var f=this.parent;if(f&&f.maskNode){V.addClass(f.maskNode,"wait");}}this._startPageRenderThread(d);}},isRenderingComplete:function P(){if(this.end>=this.cp.rc-1){for(var d=this.pageStatus,e=this.totalPages-1;e>-1;e--){if(!d[e]||!d[e].filled){return false;}}return true;}return false;},renderPages:function D(e){for(var f=0,d=e.length;f<d;++f){this.renderPage(e[f].idx,e[f].fill);}},renderPage:function W(o,f){var t=this.pageStatus,j=(this.numPagesRendered>=o+1);if(j){if(!f||(t[o]&&t[o].filled)){return ;}}var s=this.rowsPerPage,k=this.domNode;this.start=o*s;this.end=Math.min(this.start+s,this.cp.rc)-1;this.preRenderPage(o,f);var e=this.tempTable;if(!e){e=this.tempTable=k.ownerDocument.createElement("div");}var r=this.tableNode,q=this.start,g=this.end,l=f?this.buildTableRowsMarkup(q,g,'<table><tbody n="'+this.pageNum+'">',"</tbody></table>",r.style.tableLayout).join(""):'<table><tbody n="'+this.pageNum+'"><tr><td style="height:'+(this.effectiveRh*(this.end-this.start+1))+'px">&nbsp;</td></tr></tbody></table>';e.innerHTML=l;var h=e.firstChild.tBodies[0];if(!j){r.appendChild(h);}else{r.replaceChild(h,r.tBodies[o]);}if(f){this.markPages(q,g);}this.postRenderPage(o,f,h);var d=this.parent;if(d.onPageRendered){d.onPageRendered(h,o,j,f);}},getPagesToRender:function S(t){var r=[],w=this.parent,AG=this._defaultPageHeight,h=null,AH=this.pageStatus,AI=this;function o(j){var p=AH[j];if(p&&(p.filled||p.dirty)){if(!p.height){if(!h){h=AI.tableNode.tBodies;}p.height=h[j].offsetHeight;}return p.height;}else{return AG;}}var l=0,k=null,s=null,e=w.scrollboxTop;for(var AC=0,AD=this.totalPages,d=this.pageStatus;AC<AD;AC++){l+=o(AC);if(l>=e){k=AC;break;}}if(k===null){k=s=AD-1;}else{var u=w.scrollboxBottom;if(isNaN(u)&&w.numRowFixed){u=e;}for(var AB=k+1;AB<AD;AB++){if(l>u){s=AB-1;break;}l+=o(AB);}}if(s===null){s=AD-1;}for(var x=this.numPagesRendered;x<k;++x){r.push({idx:x,fill:false});}var AA=0,AE=this.rowsPerPage,q=false;for(var z=k;z<=s;++z){var AF=AH[z];if(!AF||!AF.filled){if(AF&&AF.isOnDemand()){q=true;if(!AF.isDownloading&&!this.isDownloading){AA+=AE;AF.isDownloading=true;this.isDownloading=true;var g=z*AE,f=g+AE-1;this.cp.download(g,f,t);}r.push({idx:z,fill:false});}else{r.push({idx:z,fill:true});}}}if(q){this.parent.showDownloadStatus(AA);}else{if(this.parent.closeDownloadStatus){this.parent.closeDownloadStatus();}}return r;},addHilitePosition:function(e,g,d){var h=this.hiliteCellsMap[e];if(!h){this.hiliteCellsMap[e]={pos:[],nodes:[]};}var f=g-(this.pageNum||0)*this.rowsPerPage;this.hiliteCellsMap[e].pos.push({row:f,cell:d,page:this.pageNum});},setHilites:function(g,h){var j=h.getAttribute("ei"),k=this.eiMap[j],d=this.getNodesByPositions(k);if(!d.length){this._super(g,h);return ;}for(var f=0,e=d.length;f<e;f++){this._super(g,d[f]);}},addExtraInfoMap:function(e,f,d){if(!this.eiMap[e]){this.eiMap[e]=[];}this.eiMap[e].push(this.getPosObj(f,d));},addPositionMap:function(e,f,d){if(!this.posMap[e]){this.posMap[e]=this.getPosObj(f,d);}},addTitleHeaderPositionMap:function(f,d,e){var g=this.getPosObj(f,d);g.obj=e;this.thPosMap.push(g);},getPosObj:function(e,g){var f=this.pageNum||0,d=this.rowsPerPage||0;return{row:e-f*d,cell:g,page:f};},getNodeByPosition:function(d){return this.tableNode.tBodies[d.page].rows[d.row].cells[d.cell];},getRowIdxByCell:function(d){var e=this.posMap[d._ei];return e.page*this.rowsPerPage+e.row;},getNodesByPositions:function(l){var h=[];for(var f in l){var q=l[f],e=(q&&q.page)||0,d=q&&q.row,j=q&&q.cell,g=this.tableNode.tBodies[e],k=g&&g.rows[d],o=k&&k.cells[j];if(o){h.push(o);}}return h;},getPageHeight:function R(d){var e=this.tableNode.tBodies;return(e&&e[d]&&e[d].offsetHeight)||0;},getTargetCell:function(o,l){var g=0,e=0,k;for(k=this.totalPages;e<k;e++){g+=this.getPageHeight(e);if(l<=g){break;}}var f=this.tableNode.tBodies[e];if(f){for(e=0,k=f.rows.length;e<k;e++){var r=f.rows[e];for(var d=0,q=r.cells.length;d<q;d++){var p=r.cells[d];if(p.offsetTop+p.offsetHeight>=l){if(o>=p.offsetLeft&&o<=p.offsetLeft+p.offsetWidth){return p;}}else{break;}}}}},postRenderPagesCleanup:function I(){var f=this.parent;if(f&&f.gridData&&f.gridData.afc){var e=this.tableNode;if(e&&(this.lastWidth!==e.offsetWidth)){if(f.onGridWidthChanged){f.onGridWidthChanged();}mstrmojo.array.forEach(this.pageStatus,function(g){delete g.height;});this.lastWidth=e.offsetWidth;}var d=C(f,"adjustAutoWidth");if(d){d.adjustAutoWidth(f);}}if(f.gridPagesRendered){f.gridPagesRendered();}if(mstrmojo.dom.isIE&&!mstrmojo.dom.isIE8){B(this.domNode);}if(f&&f.maskNode){V.removeClass(f.maskNode,"wait");}this.hightLightChangedCells();},hightLightChangedCells:function K(){var o=this.cp.getUpdatedRows(),h=this,l,d,k,p,f,g,j,e=[];if(o){mstrmojo.hash.forEach(o,function(r,q){j=parseInt(q,10);l=h.cp.getRowCells(j);d=E(j,h);k=d.length;p=l.length-1;if(p>=0){for(f=k-1;f>=0;f--){g=d[f];if(p<0){break;}if(l[f]._d){var t=g.style.backgroundColor,s=g.style.color;e.push({dom:g,bgcolor:t,ftcolor:s});g.style.backgroundColor=M.getHighlightColor(M.rgbStr2rgb(a.getStyleValue(g,"backgroundColor"),true));g.style.color=M.getContrastingColor(M.rgbStr2hex(a.getStyleValue(g,"backgroundColor")),"#ffffff","#000000");delete l[f]._d;}p--;}}});if(e.length>0){window.setTimeout(function(){mstrmojo.array.forEach(e,function(q){q.dom.style.backgroundColor=q.bgcolor;q.dom.style.color=q.ftcolor;});},300);}}},postRenderingCleanup:function A(){var d=this.parent;if(d&&this.connectedScrollbox){d.disconnectScrollbox(this);}this.connectedScrollbox=false;if(d&&!d.scrollboxHeightFixed){var e=C(d,"performCanGrowCanShrink");if(e){e.performCanGrowCanShrink([d],true);}}},getRowInfoByPosition:function(d){return this.cp.getRowCellInfo(d);},unrender:function U(d){H.call(this);if(this.connectedScrollbox){this.parent.disconnectScrollbox(this);this.connectedScrollbox=false;}this.numPagesRendered=0;this.lastWidth=0;this.isDownloading=false;this.unMarkAllPages();this._super(d);},dataDownloaded:function T(){this.isDownloading=false;this.initPageStatus();this.onscroll();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Image","mstrmojo._TouchGestures");mstrmojo.android.ui.Image=mstrmojo.declare(mstrmojo.Image,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Image",touchTap:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.android.selectors.MobileSliderSelector","mstrmojo.hash");var D=mstrmojo.android.selectors.MobileSliderSelector,A=D.FLAGS,F=D.TYPES;mstrmojo.android.selectors.Slider=mstrmojo.declare(mstrmojo.android.selectors.MobileSliderSelector,null,{scriptClass:"mstrmojo.android.selectors.Slider",items:A.UNSET,initState:function C(){if(!!this.items){this.leftStep=this.rightStep=this.singleStep=null;this.set("type",(!this.multiSelect)?F.SINGLE:(this.include)?F.INCLUDE:F.EXCLUDE);this.set("steps",this.items.length);this.value=null;this.set("value",this.selectedIndices);}},onvalueChange:function G(){var H=this.value,J=mstrmojo.hash.any(H,true),K=J;if(this.type===F.SINGLE){this.set("singleStep",parseInt(J)||0);}else{var I;for(I in H){J=Math.min(I,J);K=Math.max(I,K);}J=J||"0";if(K===undefined||K===null){K=String(this.steps-1);}this.set("leftStep",parseInt(J,10));this.set("rightStep",parseInt(K,10)+1);}},flushSelections:function B(){if(this.type===F.SINGLE){this.select([this.singleStep]);}else{var I=[],H=this.leftStep;for(;H<this.rightStep;H++){I.push(H);}this.select(I);}},buildSummary:function E(L,M,H){var I=this.items,K=(L!==null)?L:M;if(K===undefined||K===null||isNaN(K)||!I.length){return ;}var J=(L===null&&M!==H-1)?I[M].n+" - "+I[H-1].n:(I[K]&&I[K].n)||"";this.summary.innerHTML=J;return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasBuilder","mstrmojo._HasLayout","mstrmojo.Container");var A=1;mstrmojo.maps.androidmap.AndroidDocMapInfoWindow=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._HasLayout],{scriptClass:"mstrmojo.maps.androidmap.AndroidDocMapInfoWindow",markupString:'<div class="mstrmojo-androidmap-DocInfoWindow-wrapper"><div id="{@id}" class="mstrmojo-androidmap-DocInfoWindow"></div></div>',markupSlots:{infoNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.firstChild;}},getChildren:function B(){var C=this.model,E=C.getLayoutDataCache(C.getCurrentLayoutKey())[this.psId],D=E.defn.fmts;D.left=A+"px";D.top=A+"px";return[E];}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.Container","mstrmojo._Formattable","mstrmojo._IsThresholdConditionTarget","mstrmojo.EnumRWUnitType");var TP_HTML_CONTAINER=mstrmojo.EnumRWUnitType.HTMLCONTAINER;var $DOM=mstrmojo.dom,$HASH=mstrmojo.hash;mstrmojo.DocTextfield=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsThresholdConditionTarget],{scriptClass:"mstrmojo.DocTextfield",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocTextfield {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div class="mstrmojo-DocTextfield-valueNode" style="{@valueNodeCssText}" mstrAttach:click >{@v}</div>{@buttonNodeMarkup}</div>',markupSlots:{valueNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["T","z-index"],valueNode:["D","B","F","P","background-color","fx","text-align","white-space","overflow"]},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function update(node){var d=node.data,v=d.v||"";if(node.defn.t===TP_HTML_CONTAINER){var div=document.createElement("div");div.innerHTML="<textarea>"+v+"</textarea>";v='<div style="display:none">&nbsp;</div>'+div.firstChild.value;div=null;}this.v=v;this.tooltip=d.tooltip||this.tooltip;if(this.thresholdId||d.tid){delete this.fmts;}this.thresholdId=d.tid;this.set("visible",!node.data.hidden);if(this._super){this._super(node);}},init:function(props){this._super(props);},postBuildRendering:function postBuildRendering(){var i,len;this.handleRotatedText();if(this.defn.t===TP_HTML_CONTAINER){var scripts=this.domNode.getElementsByTagName("script");for(i=0,len=scripts.length;i<len;i++){try{eval(scripts[i].innerHTML);}catch(err){console.log(err);}}}return this._super();},isTextFieldRotated:function isTextFieldRotated(){var formats=this.getFormats();return(formats.fx&&formats.fx.rt&&!$DOM.isDXIE&&$DOM.supports($DOM.cssFeatures.TEXT_ROTATION));},handleRotatedText:function handleRotatedText(){var formats=this.getFormats(),rotateValue=formats.fx&&formats.fx.rt;if(this.isTextFieldRotated()){var domNode=this.domNode,domNodeStyle=domNode.style;switch(rotateValue){case 1:domNodeStyle.left=(parseInt(formats.left,10)+domNode.offsetHeight)+"px";break;case 3:domNodeStyle.top=(parseInt(formats.top,10)+domNode.offsetWidth)+"px";break;}}},getAnchor:function getAnchor(){return this.valueNode;}});mstrmojo.DocSummaryTextfield=mstrmojo.declare(mstrmojo.DocTextfield,null,{scriptClass:"mstrmojo.DocSummaryTextfield",markupString:'<span id="{@id}" class="mstrmojo-DocSumTextfield {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><span class="mstrmojo-DocTextfield-valueNode" style="{@valueNodeCssText}" mstrAttach:click >{@openLink}{@v}{@closeLink}</span>{@buttonNodeMarkup}</span>',formatHandlers:{domNode:["T","z-index"],valueNode:["D","B","F","background-color","fx","text-align","white-space","overflow"]},update:function update(node){this._super(node);if(this.v){var v=this.v,p1=new RegExp("&lt;bold&gt;","g"),p2=new RegExp("&lt;/bold&gt;","g");if(v.indexOf("&lt;empty/&gt;")>-1){this.v="";return ;}v=v.replace(p1,"<b>");v=v.replace(p2,"</b>");this.v=v;}},preBuildRendering:function preBuildRendering(){if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasScrollbox","mstrmojo._HasLayout","mstrmojo._ShowsStatus");function E(J){var I=this.domNode,H=parseInt(this[J.toLowerCase()],10);return(isNaN(H))?I["offset"+J]:H;}mstrmojo.DocLayoutViewer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._HasScrollbox,mstrmojo._HasLayout,mstrmojo._ShowsStatus],{scriptClass:"mstrmojo.DocLayoutViewer",markupString:'<div id="{@id}" class="mstrmojo-DocLayoutViewer {@cssClass}" style="{@domNodeCssText}"><div></div><div><div class="mstrmojo-progress" style="display:none"><div class="mstrmojo-progress-barbg"><div class="mstrmojo-progress-bar"></div></div><div class="mstrmojo-progress-text"></div></div><div id="{@id}_fh"></div><div id="{@id}_scrollboxNode" class="mstrmojo-DocLayoutViewer-layout" style="{@_scrollCssText}"></div><div id="{@id}_ff"></div></div><div></div></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onborderChange:function(){if(this.border){this.domNode.style.border=this.border;}}},markupSlots:{groupBy:function(){return this.domNode.firstChild;},layout:function(){return this.domNode.childNodes[1].childNodes[2];},scrollboxNode:function(){return this.domNode.childNodes[1].childNodes[2];},containerNode:function(){return this.domNode.childNodes[1].childNodes[2];},incFetchNode:function(){return this.domNode.lastChild;},fixedHeaderNode:function(){return this.domNode.childNodes[1].childNodes[1];},fixedFooterNode:function(){return this.domNode.childNodes[1].childNodes[3];},_STATUS:function(){return this.domNode.childNodes[1].firstChild;},_STATUS_TXT:function(){return this.domNode.childNodes[1].firstChild.lastChild;},_STATUS_BAR:function(){return this.domNode.childNodes[1].firstChild.firstChild.firstChild;}},layoutConfig:{h:{groupBy:"auto",fixedHeaderNode:"auto",layout:"100%",fixedFooterNode:"auto",incFetchNode:"auto"},w:{layout:"100%"}},k:null,scrollboxHeightFixed:true,scrollboxWidthFixed:true,getHeight:function G(){return E.call(this,"Height");},getWidth:function B(){return E.call(this,"Width");},afterLayout:function A(){this._super();this.notifyScrollListeners();},preBuildRendering:function D(){if(this.parent){var J=this.parent[this.slot].style,I=this.height,H=this.width;this.height=(I!=="auto")?I:J.height;this.width=(H!=="auto")?H:J.width;}this.bs=this.model.bs;return this._super();},setSlotDimensions:function F(J,I,H){if(J==="layout"){this.scrollboxHeight=parseInt(I,10);this.scrollboxWidth=parseInt(H,10);}this._super(J,I,H);},onaddChild:function C(H){if(!isNaN(H.index)){var I=this.children[H.index];if(I&&I.slot==="groupBy"){this.docGroupBy=I;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasBuilder","mstrmojo._HasLayout","mstrmojo.Container");var A=1;mstrmojo.maps.jsmap.AndroidDocMapInfoWindow=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._HasLayout],{scriptClass:"mstrmojo.maps.jsmap.AndroidDocMapInfoWindow",markupString:'<div class="mstrmojo-DocInfoWindow-wrapper"><div id="{@id}" class="mstrmojo-DocInfoWindow"></div></div>',markupSlots:{infoNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.firstChild;}},getChildren:function B(){var C=this.model,E=C.getLayoutDataCache(C.getCurrentLayoutKey())[this.psId],D=E.defn.fmts;D.left=A+"px";D.top=A+"px";return[E];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo._ContainsDocObjects","mstrmojo._HasBuilder");mstrmojo.rw.DocSubsection=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._ContainsDocObjects,mstrmojo._HasBuilder],{scriptClass:"mstrmojo.rw.DocSubsection",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocSubsection" style="{@domNodeCssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},formatHandlers:{domNode:["D","B","background-color","fx"]},update:function C(E){var D=E.data.tid;if(this.thresholdId||D){delete this.fmts;}this.thresholdId=D;if(this._super){this._super(E);}},postBuildRendering:function B(){return(this.renderMode!=="scroll")?this._super():true;},childRenderOnAddCheck:function A(D){return(this.renderMode!=="scroll")?this._super(D):false;},preserveChildDomOrder:false,performCanGrowCanShrink:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasBuilder","mstrmojo._CanMeasureChildren","mstrmojo._CanRenderDocOnScroll","mstrmojo._FillsBrowser");var D=29;function A(){var I=this.domNode,F=this.containerNode,L=F.style,K=F.clientWidth||parseInt(L.width,10),H=I.clientWidth||parseInt(I.style.width,10),E=I.parentNode,J=F.clientHeight||parseInt(L.height,10),G=E.clientHeight||parseInt(E.style.height,10);if(K<H){L.left=(H-K)/2+"px";}if(J<G){L.top=(G-J)/2+"px";}}mstrmojo.rw.DocLayout=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._CanMeasureChildren,mstrmojo._CanRenderDocOnScroll,mstrmojo._FillsBrowser],{scriptClass:"mstrmojo.rw.DocLayout",markupString:'<div id="{@id}"><div class="mstrmojo-DocLayout {@cssClass}" style="{@domNodeCssText}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},popupNode:function(){return this.domNode.firstChild;}},alias:"docLayout",getHeight:mstrmojo.emptyFn,getWidth:mstrmojo.emptyFn,resizeOrReposition:mstrmojo.emptyFn,preserveChildDomOrder:false,postBuildRendering:function C(){var E=this._super(),F=this;if(mstrApp.features["is-document-center-align"]){window.setTimeout(function(){A.call(F);},10);}return E;},browserResized:function B(){if(this.hasRendered&&mstrApp.features["is-document-center-align"]){A.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");mstrmojo.VBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VBox",markupString:'<table id="{@id}" class="mstrmojo-VBox {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo._IsPopup","mstrmojo._CanAutoClose");var C=mstrmojo.dom;mstrmojo.ui.PopupWidget=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.PopupWidget",markupString:'<div id="{@id}" class="mstrmojo-ui-PopupWidget {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="pw-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},autoCloses:true,locksHover:true,closeOnClick:true,visible:true,onclick:function B(D){C.stopPropogation(null,D.e);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var B=mstrmojo.func,C=mstrmojo.dom,F="mstrmojo-popup-widget-hosted";mstrmojo.ui.PopupButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ui.PopupButton",onPopupWidgetClosed:mstrmojo.emptyFn,onPopupWidgetOpened:mstrmojo.emptyFn,anchorSlot:"domNode",isHostedWithin:true,hostedCSSClass:"",destroy:function H(L){if(this._listenerProc){C.detachEvent(window,"resize",this._listenerProc);}this._super(L);},getPopupWidget:mstrmojo.emptyFn,postCreateChildren:function D(){var L=this.getPopupWidget();if(!L||L._pbCfg){return ;}var M=function M(O,N){return function(){O.apply(N,arguments);};};L.onOpen=B.composite([M(this.onPopupWidgetOpened,this),L.onOpen||mstrmojo.emptyFn]);L.onClose=B.composite([M(this.onPopupWidgetClosed,this),L.onClose||mstrmojo.emptyFn]);L._pbCfg=true;},onclick:function K(L){var N=L.getTarget();if(N===this[this.anchorSlot]||N.parentNode===this[this.anchorSlot]){var M=this.getPopupWidget();if(!M.visible){this.openPopup(M);}else{this.closePopup();}}},onPopupAutoClosed:function I(M,L){if(C.contains(this[this.anchorSlot],C.eventTarget(L,M),true)){return false;}},getPopupHostNode:function J(){return this.containerNode;},getPopupConfig:function G(){var M=[F],L=this.hostedCSSClass;if(L){M.push(L);}return new mstrmojo.ui.PopupConfig({hostId:this.id,hostElement:this.getPopupHostNode(),anchorElement:this[this.anchorSlot],isHostedWithin:this.isHostedWithin,hostProxyCssClass:M.join(" ")});},unrender:function E(L){if(this._listenerProc){C.detachEvent(window,"resize",this._listenerProc);delete this._listenerProc;}this._super(L);},postBuildRendering:function A(){var P=this.getPopupWidget();if(P){var R=this.getPopupConfig();if(!R.isHostedWithin){var N=this.parent||this.opener,M=R.hostProxyCssClass.split(" ");M.push(this.domNode.className);while(N){var Q=N.themeClassName;if(Q){M.push(Q);break;}N=N.parent||N.opener;}R.hostProxyCssClass=M.join(" ");}P.popupConfig=P.addDisposable(R);}var L=P.id,O=this._listenerProc=function(){var S=mstrmojo.all[L];if(S&&S.visible&&S.adjustCornersForPopupOverflow){S.adjustCornersForPopupOverflow();}};if(this.isHostedWithin===false){C.attachEvent(window,"resize",O);}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Container","mstrmojo._IsPopup","mstrmojo.boxmodel","mstrmojo.dom","mstrmojo.ui._HasScroller");var L=mstrmojo.boxmodel,I=mstrmojo.dom,M=mstrmojo.css,O="mstrmojo-Tooltip",A="mstrmojo-scrollNode",E=20;function C(S,T,R){var U="connectScrollbox";if(R){U="dis"+U;}var Q=S&&S.parent;while(Q){if(Q[U]){Q[U](T);}Q=Q.parent;}}function G(){if(!this._paintHandle){var R=this.id,Q=function(V){var Z=mstrmojo.all[R];if(!Z){return ;}delete Z._paintHandle;var T=[O],a=Z.cssClass;if(a){T.push(a);}var S=mstrApp.getThemeClassName&&mstrApp.getThemeClassName(),X=Z.opener;if(X&&X.getTooltipThemeClass){S=X.getTooltipThemeClass();}T.push(S);Z.domNode.className=T.join(" ");var Y=Z.content,U=Z.contentNode,W=Z.arrowNode;U.className=(O+"-content "+A+" "+Z.contentNodeCssClass);U.style.cssText=Z.contentNodeCssText;U.innerHTML=Y;W.style.cssText="";Z.domNode.style.visibility=!!Y?"visible":"hidden";Z.updatePosition();if(!V&&Z.optimizePos){Z.optimizePos();}Z.updateScrollbars();};if(!this._hasPaint){Q(true);this._hasPaint=true;}else{this._paintHandle=window.setTimeout(Q,0);}}}function B(j,d,a,Y){var T=d&&(d.richTooltip||d.tooltip),g=a?I.getMousePosition(a,Y||self):null,Q=T&&(typeof T==="string");var U="",h="",f="",Z=T,X=null,W=mstrmojo.tooltip.POS_TOPLEFT,S=null,b=null;var V=false,R=false;if(T&&!Q){h=T.cssClass||h;U=T.contentNodeCssClass||U;f=T.contentNodeCssText||f;Z=T.content||"";X=T.refNode||X;W=T.posType||W;S=T.left||0;b=T.top||0;V=T.keepArrowXPos||V;R=T.keepArrowYPos||R;}j.set("contentNodeCssClass",U);j.set("cssClass",h);j.set("contentNodeCssText",f);j.set("content",Z);j.set("refNode",X);j.set("posType",W);j.set("left",Q?((g&&g.x)||j.left):S);j.set("top",(Q||!T)?((g&&(g.y+E))||j.top):b);j.set("keepArrowXPos",V);j.set("keepArrowYPos",R);}mstrmojo.Tooltip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.Tooltip",content:null,top:null,left:null,refNode:null,keepArrowXPos:false,keepArrowYPos:false,posType:"TL",markupString:'<div id="{@id}" class="'+O+' {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout><div class="'+O+'-shadow {@shadowNodeCssClass}"></div><div class="'+O+'-contentWrapper"><div class="'+O+"-content "+A+' {@contentNodeCssClass}" style="{@contentNodeCssText}"></div></div><div class="'+O+'-arrow"></div></div>',markupSlots:{containerNode:function(){return this.domNode.children[1];},contentNode:function(){return this.domNode.children[1].firstChild;},shadowNode:function(){return this.domNode.firstChild;},arrowNode:function(){return this.domNode.children[2];}},setupScrollNodes:function D(){this.scrollNode=this.contentNode;this.scrollbarHostNode=this.containerNode;},_previousVisible:false,markupMethods:{onvisibleChange:function(){var R=this.domNode.style,Q=!!this.visible;if(this._previousVisible!==Q){R.visibility="hidden";}R.display=Q?"block":"none";this._previousVisible=Q;if(Q){this.updatePosition();if(this.content){G.call(this);}}},onleftChange:G,ontopChange:G,onrefNodeChange:G,onposTypeChange:G,oncontentNodeCssClassChange:G,oncontentNodeCssTextChange:G,oncontentChange:G,oncssClassChange:G},preBuildRendering:function N(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}return this._super();},updatePosition:function H(V){if(!this.visible&&!V){return ;}var U=this.refNode,T=U?L.offset(U,document.body):{left:I.getHorizontalScroll(),top:I.getVerticalScroll()},o=this.domNode.style,f=this.containerNode,h=f.offsetWidth,Y=f.offsetHeight,R=this.posType,b=R.indexOf("R")>-1,W=R.indexOf("B")>-1,a=this.top!==null?parseInt(this.top,10)+T.top-(W?Y:0):null,S=this.left!==null?parseInt(this.left,10)+T.left-(b?h:((R.indexOf("C")>-1)?Math.floor(h/2):0)):null,k=false,Z=false,d,X,j=I.windowDim(),g=I.getHorizontalScroll()+j.w,Q=I.getVerticalScroll()+j.h,e=this.arrowNode,l=null;if(S!==null){d=Math.min(Math.max(S,0),g-h);o.left=d+"px";k=S!==d;}if(a!==null){X=Math.min(Math.max(a,0),Q-Y);o.top=X+"px";Z=a!==X;}if(k||Z){if((this.keepArrowXPos&&k)||(this.keepArrowYPos&&Z)){l=M.getComputedStyle(e);}if(this.keepArrowXPos&&k){e.style.left=(parseInt(l.left,10)+S-d)+"px";}if(this.keepArrowYPos&&Z){e.style.top=(parseInt(l.top,10)+a-X)+"px";}}M.toggleClass(this.domNode,"offset",k||Z);},_on_tooltip_change:function(Q){B(this,Q&&Q.src);},_set_opener:function(T,S){var R=this.opener,Q=S!==R;if(Q){if(S){C(S,this);}if(R){C(S,this,true);}if(R&&R.detachEventListener){R.detachEventListener(this._richSubs);R.detachEventListener(this._ttpSubs);}if(S&&S.attachEventListener){this._richSubs=S.attachEventListener("richTooltipChange",this.id,"_on_tooltip_change");this._ttpSubs=S.attachEventListener("tooltipChange",this.id,"_on_tooltip_change");}this.opener=S;}return Q;},updatePopupConfig:function(Q,R){B(this,R,Q&&Q.e,Q&&Q.win);},onscroll:function K(){if(this.visible&&this.nudge){this.nudge();}this._super();},onmouseover:mstrmojo.emptyFn,onmouseout:mstrmojo.emptyFn});var J=null;mstrmojo.tooltip={POS_TOPLEFT:"TL",POS_BOTTOMLEFT:"BL",POS_TOPRIGHT:"TR",POS_BOTTOMRIGHT:"BR",POS_BOTTOMCENTER:"BC",POS_TOPCENTER:"TC",open:function F(R,T,S,Q){if(!J||!mstrmojo.all[J.id]){J=new mstrmojo.Tooltip();}Q=Q||{};Q.e=T;Q.win=S;J.open(R,Q);R.tooltip=J;},close:function P(){if(J){if(J.opener){J.opener.tooltip=null;}J.close();}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css");var F="",B="row-",E=mstrmojo.css.DISPLAY_TABLE;mstrmojo.Table=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Table",cellCssClass:"",rows:-1,cols:-1,_trows:-1,cellPadding:0,cellSpacing:0,layout:null,markupString:'<table id="{@id}" class="mstrmojo-Table {@cssClass}" style="{@cssText}" cellpadding="{@cellPadding}" cellspacing="{@cellSpacing}">{@tableHtml}</table>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?E:"none";}},preBuildRendering:function G(){var I=[],P=this.cellCssClass;if(this.layout){var Q=this._trows=this.layout.length;for(var K=0;K<Q;K++){var H=this.layout[K],R=H.cells,O=R.length,L=[];for(var J=0;J<O;J++){var N=R[J],M="";M+=((N.cssClass||P)?' class="'+(N.cssClass||P)+'"':"");M+=(N.cssText?' style="'+N.cssText+'"':"");M+=(N.rowSpan?' rowspan="'+N.rowSpan+'"':"");M+=(N.colSpan?' colspan="'+N.colSpan+'"':"");L[J]="<td"+M+"></td>";}var S="";S+=(H.cssClass?' class="'+H.cssClass+'"':"");S+=(H.cssText?' style="'+H.cssText+'"':"");I[K]="<tr"+S+">"+L.join("")+"</tr>";}}else{this._trows=this.rows;var M=(P?' class="'+P+'"':""),L=[];for(var K=0;K<this.rows;K++){for(var J=0;J<this.cols;J++){L[J]="<td"+M+"></td>";}I[K]="<tr>"+L.join("")+"</tr>";}}this.tableHtml=I.join("");if(this._super){this._super();}},postBuildRendering:function C(){if(this._trows){var M={},I=this.containerNode.rows,N=I.length;for(var L=0;L<N;L++){var K=I[L].cells,H=K.length;M[B+L]=I[L];for(var J=0;J<H;J++){M[F+L+","+J]=K[J];}}this.addSlots(M);}this._super();},childRenderCheck:function D(I){if(I&&!I.hasRendered){var H=I.slot||this.defaultChildSlot;return !!this[H]||H.match(/^([\d]+),([\d]+)$/);}return false;},on_child_change_rendering:function A(L){var H=(L&&L.src)||L,O=H&&H.domNode;if(O){var U=H.slot;if(!this[U]){var M=U&&U.match(/^([\d]+),([\d]+)$/);if(M){var R=parseInt(M[1],10),V=parseInt(M[2],10),Q=this.containerNode,T=this[(B+R)],N=[];if(!T){var J=Q.rows,S=J&&J.length||0;for(var K=S;K<=R;K++){N[B+K]=Q.insertRow();}T=N[B+R];}var P=T.cells&&T.cells.length||0;for(var K=P;K<=V;K++){var I=T.insertCell(K);N[F+R+","+K]=I;if(this.cellCssClass){I.className=this.cellCssClass;}}this.addSlots(N);}}}this._super(L);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsPopup","mstrmojo._CanAutoClose");function A(B){return function(){this.domNode.style[B]=this[B]||"";};}mstrmojo.Popup=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.Popup",shadowNodeCssClass:"mstrmojo-popup-shadow",titleNodeCssClass:"mstrmojo-popup-title",contentNodeCssClass:"mstrmojo-popup-content",cssDisplay:"block",markupString:'<div id="{@id}" class="mstrmojo-Popup {@cssClass}" style="{@cssText}"><div class="mstrmojo-Popup-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Popup-title {@titleNodeCssClass}">{@title}</div><div class="mstrmojo-Popup-content {@contentNodeCssClass}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onleftChange:A("left"),ontopChange:A("top"),onzIndexChange:A("zIndex")}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");var A=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:A.visibleMarkupMethod,onheightChange:A.heightMarkupMethod,onwidthChange:A.widthMarkupMethod}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.requiresDescs(9936,9937);var B=25,D=mstrmojo.desc;mstrmojo.android.ui.NoProjectsView=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.android.ui.NoProjectsView",markupString:'<div id="{@id}" class="mstrmojo-NoProjectsView"><div><div class="mstrmojo-NoProjectsViewImage"></div><div class="mstrmojo-NoProjectsViewMsg1">{@msg1}</div><div class="mstrmojo-NoProjectsViewMsg2">{@msg2}</div></div></div>',markupSlots:{wrapperNode:function(){return this.domNode.firstChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},preBuildRendering:function A(){this.msg1=D(9936,"No projects have been configured.");this.msg2=D(9937,"Contact your administrator");},postBuildRendering:function C(){this._super();var E=this.wrapperNode;E.style.marginTop=(-(E.clientHeight/2)-B)+"px";}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo._ContainsDocObjects","mstrmojo._HasBuilder","mstrmojo._SupportsEllipsisText","mstrmojo._HasEllipsis","mstrmojo.css","mstrmojo.array");var V=mstrmojo.css,U=mstrmojo.array;var R=2;function D(Z,X,Y){var a=Z.parent.parent;if(a&&a instanceof mstrmojo.DocPanel){a[X+"DirtyKey"](Y);}}function O(Y,X,Z){if(Y===X.k){mstrmojo.array.forEach(X.children,function(a){if(a.setDirtyChildren){a.setDirtyChildren(Z);}});}}function I(X){return X._isFP()&&!X.parent.defn.od;}mstrmojo.DocPanel=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._ContainsDocObjects,mstrmojo._HasBuilder,mstrmojo._SupportsEllipsisText,mstrmojo._HasEllipsis],{scriptClass:"mstrmojo.DocPanel",visible:false,selected:false,k:"",cssDisplay:"block",subPanelCssText:"height:100%;width:100%;position:absolute;",topStart:R,contentWidth:0,markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocPanel {@cssClass}" style="{@cssText}{@domNodeCssText}"><div class="mstrmojo-DocSubPanel-content" style="{@containerNodeCssText}{@subPanelCssText}"></div></div>',markupMethods:{onvisibleChange:function(){var Y=this.domNode.style,X=this.visible;if(I(this)){Y.visibility=(X?"":"hidden");Y.zIndex=(X?10:1);}else{Y.display=(X?this.cssDisplay:"none");}}},markupSlots:{containerNode:function(){return this.domNode.firstChild;}},formatHandlers:{containerNode:["background-color","fx","overflow"]},title:"",init:function Q(X){this._super(X);if(!this.title){this.title=this.node.defn.ttl||"";}if(this._isSearchBoxPanel()){this.isSbp=true;this.set("canApplySbp",false);}},childRenderCheck:function L(X){return(this._super(X)&&(this.selected||I(this)));},postBuildRendering:function T(){if(!this.defn.l&&!this._forceRender){V.addClass(this.domNode,"placeholder");}var Y=this._super();if(this.isSbp){var X=this.addChildren({scriptClass:"mstrmojo.Button",cssClass:"sbp-apply",title:mstrmojo.desc(134,"Apply"),cssText:"top:"+((parseInt(this.parent.fmts.height,10)||0)-28)/2+"px",bindings:{enabled:"this.parent.canApplySbp&&this.parent.parent.applyEnabled"},onclick:function(){this.parent.parent.applyBufferedSlices();}});X.render();}if(this._isFSP()){this.set("shouldEllipsize",true);}if(mstrApp.isOIVM&&mstrApp.isOIVM()&&mstrmojo.dom.isChrome){var a=this.containerNode.style.overflow;this.containerNode.style.overflow="hidden";var Z=this;window.setTimeout(function(){if(Z.containerNode&&Z.containerNode.style&&Z.containerNode.style.overflow){Z.containerNode.style.overflow=a;}},2000);}return Y;},onselectedChange:function M(X){if(X.value){this.renderChildren();}this.model&&this.model.raiseEvent({name:"panelSelected",panelId:this.id,panelVisible:!!X.value});},updateForPU:function S(X){this.node=X;this.update(X);},refreshForPU:function A(){this._isPartial=true;this.refresh();this._isPartial=false;},_isPartial:false,refresh:function E(){if(!this.hasRendered){return ;}this._inRendering=true;var Z=[].concat(this.getPanelChildren()||[]),Y=[].concat(this.getChildren(this._isPartial)),X;U.removeItems(Z,"k",Y);U.removeItems(Y,"k",this.getPanelChildren());if(Z.length!==0){U.forEach(Z,function(a){this.removeChildren(a);a.destroy();},this);}if(Y.length!==0){U.forEach(Y,function(d){var b=d.id&&mstrmojo.all[d.id];var a=b&&b.defn;if(a){a._isDeleted=true;}if(b&&b.destroy){b.destroy();}},this);this.addChildren(this.builder.build(Y,this.model,this.buildConfig));}Z=[].concat(this.getPanelChildren()||[]);for(X=Z.length-1;X>=0;X--){Z[X].refresh();}if(this._isFP()&&this.selected){this.refreshFP();}if(this._isFSP()){this.set("richTooltip",{content:this.containerNode.innerHTML,contentNodeCssClass:"sp-tooltip",left:-20,top:20,refNode:this.domNode});this.ellipsizeElements("div",this.containerNode,true);}this._inRendering=false;},setDirty:function N(X){this[(X?"add":"remove")+"DirtyKey"](this.k);},addDirtyKey:function H(X){var Z=this.defn,Y=Z.dirtyKeys||{};Y[X]=true;Z.dirtyKeys=Y;if(X===this.k){mstrmojo.array.forEach(this.children,function(a){if(a.setDirtyChildren){a.setDirtyChildren(true);}});}O(X,this,true);D(this,"add",X);},removeDirtyKey:function K(Y){D(this,"remove",Y);O(Y,this,false);if(Y===this.k){mstrmojo.array.forEach(this.children,function(a){if(a.setDirtyChildren){a.setDirtyChildren(false);}});}var Z=this.defn,X=Z.dirtyKeys;if(!X){return ;}delete X[Y];if(!mstrmojo.hash.isEmpty(X)){return ;}delete Z.dirtyKeys;},getPanelChildren:function G(){return U.filter(this.children||[],function(X){return X.scriptClass!=="mstrmojo.Button";});},preBuildRendering:function(){if(this._isFSP()){this.useRichTooltip=true;}if(this._super){this._super();}},renderChildren:function J(){this._inRendering=true;var d=this.children;if(d&&(this._isFP()||this._isFSP())){U.forEach(d,function(g){g.getFormats();});}if(this.isSbp){V.addClass(this.domNode,"mstrmojo-sbp");}if(this._isFP()){V.addClass(this.parent.domNode,"fpgb");if(d){var e=this.domNode.clientWidth-2*R,b,X;this.topStart=R+1;for(b=0,X=(d&&d.length)||0;b<X;b++){var Z=this.domNode.clientWidth-2*R;this.contentWidth=(Z>0)?Z:0;if(Z!==e){this.topStart=R+1;var a;for(a=0;a<b;a++){var Y=d[a];Y.refresh();if(Y.getContainerHeight){this.topStart+=Y.getContainerHeight()+R+1;}}}var f=d[b];if(this.childRenderCheck(f)){f.render(null);if(f.getContainerHeight){this.topStart+=f.getContainerHeight()+R+1;}}}}}else{this._super();}if(this._isFSP()){this.set("richTooltip",{content:this.containerNode.innerHTML,contentNodeCssClass:"sp-tooltip",left:-20,top:20,refNode:this.domNode});this.ellipsizeElements("div",this.containerNode,true);}this._inRendering=false;},refreshFP:function F(){if(!this.hasRendered){return ;}var a=this.children,X=(a&&a.length)||0,Z;this.topStart=R+1;var Y=this.domNode.clientWidth-2*R;this.contentWidth=(Y>0)?Y:0;for(Z=0;Z<X;Z++){var b=a[Z];if(b.relocate){b.relocate(this.topStart,this.contentWidth);}if(b.updateContentHeight){b.updateContentHeight();}if(b.getContainerHeight){this.topStart+=b.getContainerHeight()+R+1;}}},getChildren:function C(a){var Z=this.model.getChildren(this.node,a);if(this._isFP()||this._isFSP()){var X=(Z&&Z.length)||0,Y;for(Y=0;Y<X;Y++){var b=Z[Y];if(this._isFP()&&!b.defn.iifp){b.defn.iifp=true;}if(this._isFSP()&&!b.defn.iifs){b.defn.iifs=true;}}}Z=U.filter(Z||[],function(d){if(typeof d.defn.ifw==="boolean"){return !d.defn.ifw;}return true;});return Z;},onchildRenderingChange:function B(X){this._super(X);if(this._isFSP()&&!this._inRendering){this.ellipsizeElements("div",this.containerNode,true);}},_isFP:function W(){return !!this.parent.defn.ifp;},_isFSP:function P(){return !!this.parent.defn.ifsp;},_isSearchBoxPanel:function(){return false;},canApplySearchBoxPanel:function(){var Y=this.model.getChildren(this.node,false),X;for(X=0;X<Y.length;X++){var a=Y[X],Z=mstrmojo.all[a.id];if(Z&&Z.canApply&&!Z.canApply()){return false;}}return true;},doEllipsize:function(){if(this.shouldEllipsize){this.ellipsizeElements("div",this.containerNode,true);}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K.slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.array");var I=mstrmojo.array,J={containerNode:"100%",node1:"100%",node2:"100%"};mstrmojo.android.ui.ViewSwitcher=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.android.ui.ViewSwitcher",markupString:'<div id="{@id}" class="mstrmojo-AndroidSwitcher {@cssClass}" style="{@cssText}"><div class="switch-slider"><div class="switch-page"></div><div class="switch-page"></div></div><div class="overlay"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},sliderNode:function(){return this.domNode.firstChild;},node1:function(){return this.domNode.firstChild.firstChild;},node2:function(){return this.domNode.firstChild.lastChild;},overlayNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},layoutConfig:{h:J,w:J},getSlots:function E(){var M=this._curSlot||"node1",N=(M==="node1")?"node2":"node1";return{current:this[M],next:this[N],slot:N};},addChildren:function L(O,M,N){I.forEach(O,function(P){if(P.slot==="overlayNode"){P.ignoreLayout=true;}});this._super(O,M,N);},prepareNewView:function H(M,N){M.height=this.height;M.width=this.width;M.visible=true;M.slot=N;},switchView:function D(M,O){var Q=this.getCurrentView();if(M===Q){return ;}var P=this.getSlots(),N=this.getViewController(M),R=this.getViewController(Q);if(Q){if(R&&R.beforeViewHidden){R.beforeViewHidden(O);}}this.prepareNewView(M,P.slot);if(N&&N.beforeViewVisible){N.beforeViewVisible(O);}this.addChildren([M]);if(Q){this.removeChildren(Q);Q.unrender();if(R&&R.afterViewHidden){R.afterViewHidden(O);}}if(N&&N.afterViewVisible){N.afterViewVisible(O);}this.stackViews(P.slot);this.afterSwitch(M);},replaceView:function B(N,O,P){var M=I.indexOf(this.children,O);if(M===-1){return ;}var Q=O.slot;I.forEach([N,O],function(R){if(R.parent===this){this.removeChildren(R,true);R.unrender();if(!P){R.destroy();}}},this);this.prepareNewView(N,Q);this.addChildren([N]);return N;},stackViews:function C(M){I.forEach([1,2],function(N){var O="node"+N,P=this["node"+N];if(P){P.style.zIndex=(O===M)?3:1;}},this);},getCurrentView:function G(){var N=this._curSlot||"node2",M;I.forEach(this.children,function(O){if(O.slot===N){M=O;return false;}});return M;},getViewController:function K(M){return M?M.controller||M:null;},afterSwitch:function F(M){this._curSlot=M.slot;},doLayout:function A(){var N=this.node1.style,M=this.node2.style;N.height=M.height=this.height;N.width=M.width=this.width;this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable");var D=function D(F){return F.data.dl||F.defn.dl;};mstrmojo.DocImage=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocImage",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocImage" title="{@tooltip}" style="{@domNodeCssText}"><div style="{@shadowNodeCssText}"><img src="{@v}" style="{@imgNodeCssText}" mstrAttach:click></div>{@buttonNodeMarkup}</div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function E(H){var I=this.model.getDataService(),F=H.data.v,G=D(H);this.origV=F;this.v=(I&&I.getImage&&I.getImage(F))||F;this.oid=H.defn.oid;if(G){this.tooltip=G.items[0].n;}if(this.thresholdId||H.data.tid){delete this.fmts;}this.thresholdId=H.data.tid;this.set("visible",!H.data.hidden);if(this._super){this._super(H);}},formatHandlers:{domNode:["left","top","z-index"],shadowNode:["width","height","B","fx"],imgNode:["height","width"]},preBuildRendering:function B(){this._super();if(mstrApp.isMobile&&mstrApp.useBinaryFormat){var F=this.v,I=mstrMobileApp.isOnline(),H=this.model.getDataService();if((!I&&F.indexOf("http")===0)||(I&&F.indexOf("http")!==0)){this.v=(H&&H.getDocImage&&H.getDocImage(this.origV))||F;}}var G=mstrmojo.string;if(this.node.data.ut===4){this.v=mstrConfig.taskURL+"?taskId=getRWEmbeddedImage&msgID="+this.model.mid+"&oid="+G.decodeHtmlString(this.v,true);}this.updateDimensionsFromFormats();},updateDimensionsFromFormats:function C(){if(!mstrmojo.dom.isIE7){var F=this.getFormats(),I=(F.fx&&F.fx.ds)||0,G=mstrmojo._Formattable.getBorderWidths(this),H=1;if((mstrmojo.dom.isIE||mstrmojo.dom.isIEW3C)&&this.model.getZoomFactor){H=this.model.getZoomFactor()>1?this.model.getZoomFactor():1;G.w=Math.ceil(G.w*H);G.h=Math.ceil(G.h*H);}this.domNodeCssText+="width:"+((parseInt(F.width,10)||0)+I+G.w)+"px; height: "+((parseInt(F.height,10)||0)+I+G.h)+"px;";}},getAnchor:function A(){return this.imgNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var M=mstrmojo.Widget,G=mstrmojo.dom,N=mstrmojo.global.document,C=50,B=500;mstrmojo.Stepper=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Stepper",orientation:"vertical",provider:null,title:"",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text">{@itemHtml}</div><div class="prev">-</div></div>',markupSlots:{titleNode:function(){return this.domNode.firstChild;},nextNode:function(){return this.domNode.children[1];},textNode:function(){return this.domNode.children[2];},prevNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:M.visibleMarkupMethod,onheightChange:M.heightMarkupMethod,onwidthChange:M.widthMarkupMethod,onenabledChange:function I(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},preBuildRendering:function J(){this.itemHtml=this.provider.renderItemAt();this._super();},processEvent:function A(O){if(G.contains(this.textNode,O)||O===this.titleNode){return ;}var Q=this.provider,P=((O===this.nextNode)?"Next":"Prev");if(Q["has"+P]()){Q[P.toLowerCase()]();this.updateDisplayText();}},updateDisplayText:function E(){this.textNode.innerHTML=this.provider.renderItemAt();},startStepperInterval:function F(O,P){var Q=this;this._holdTimer=setInterval(function(){Q[P](O);},C);},stopStepperInterval:function H(){if(this._holdTimer){clearInterval(this._holdTimer);delete this._holdTimer;}},onclick:function L(O){this.processEvent(O.e.target);},onmousedown:function D(O){if(!this._holdTimer&&!this._startHoldTimer){var P=this;this._startHoldTimer=setTimeout(function(){delete P._startHoldTimer;P.startStepperInterval(O,"onclick");},B);G.attachOneTimeEvent(N,"mouseup",function(){if(P._startHoldTimer){clearTimeout(P._startHoldTimer);delete P._startHoldTimer;}P.stopStepperInterval();},true);}},onselectstart:function K(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasBuilder","mstrmojo._Formattable","mstrmojo._HasToolbar");var B="\u001E";var F=1;var H=2;var I={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,vert:["height","width","top"],horiz:["width","height","left"],updateStyle:function(K){var N=K.defn.qsm;if(!N){return ;}if(K.getFormats().width){return ;}var O=null;if(N==F){O=K.containerNode.firstChild;}else{O=K.containerNode.lastChild;}if(!O){return ;}var L=O.clientHeight+"px";var J=O.clientWidth+"px";var M=K.domNode.style;M.height=L;M.width=J;if(K.parent.updateStyle){K.parent.updateStyle(L,J);}},repositionChildren:function(P){if(!P.children){return ;}var O=P.getFormats(),N=parseInt(O.height,10),S=parseInt(O.width,10);var J=P.children,M=J[0].getFormats(),U=J[1].getFormats();var K=(P.defn.gp<this.LEFT),R=K?N:S,Q=K?S:N,T=this[(K?"vert":"horiz")];var L=Math.round(R*(P.defn.ga/100));M[T[0]]=L+"px";M[T[1]]=Q+"px";U[T[0]]=(R-L)+"px";U[T[1]]=Q+"px";if((P.defn.gp%2)===0){U[T[2]]=L+"px";}else{M[T[2]]=(R-L)+"px";}this.resizeChildren(J[0],J[1]);},stackChildren:function(J){var M=J.children,N=J.getFormats(),L;var K;for(K=M.length-1;K>=0;K--){L=M[K].getFormats();L.width=N.width;L.height=N.height;}this.resizeChildren(M[0],M[1]);},resizeChildren:function(L,J){L.renderPortalState();var K=J.getFormats();J.resizeForDisplayState(parseInt(K.height,10),parseInt(K.width,10),true);},changeVisibility:function(L,J){var O=L.children,N=L.defn.qsm,K=J&&(!N||L.viewMode===F),M=J&&(!N||L.viewMode===H);if(O&&O.length>0){if(O[0].visible!==K){O[0].set("visible",K);}if(O[1].visible!==M){O[1].set("visible",M);}}L.visible=J;},setViewMode:function G(K){var L=K.children,M=K.visible;if(K.defn.qsm&&L&&L.length>0){var J=K.viewMode;L[0].set("visible",(J==F)&&M);L[1].set("visible",(J==H)&&M);}},clearFormatCache:function C(K){var M=K.children;for(var L=0,J=M&&M.length||0;L<J;L++){M[L].clearCache();}}};mstrmojo.DocGridGraph=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._Formattable,mstrmojo._IsSelectorTarget],{scriptClass:"mstrmojo.DocGridGraph",markupString:'<div id="{@id}" k="{@k}" title="{@tooltip}" class="mstrmojo-DocGridGraph" style="{@domNodeCssText}"><div class="mstrmojo-DocGridGraph-msg"></div><div class="mstrmojo-DocGridGraph-container"></div></div>',markupSlots:{msgNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.lastChild;}},formatHandlers:{domNode:["RW","B","background-color","fx","font"]},viewMode:null,visible:true,resize:function D(){this.clearCache();I.clearFormatCache(this);var L=this.getFormats(),J=parseInt(L.width,10),K=parseInt(L.height,10);if(J>0&&K>0){I.changeVisibility(this,true);if(!this.defn.qsm){I.repositionChildren(this);}else{I.stackChildren(this);}}else{I.changeVisibility(this,false);}},postBuildRendering:function A(){this._super();var L=this.node.data.eg;if(L===undefined){this.msgNode.style.display="none";this.containerNode.style.display="block";}else{this.msgNode.innerHTML=L;this.msgNode.style.display="block";this.containerNode.style.display="none";}var K=this.defn.qsm;if(!this.viewMode&&K){this.viewMode=K;}var J=this.node.defn;J.attachEventListener("qsmChange",this.id,function(M){this.viewMode=M.value;I.setViewMode(this);this.model.getDataService().setGridDisplayMode(this.k,this.viewMode,null,{cpmfig:{silent:true}});I.updateStyle(this);});I.setViewMode(this);I.updateStyle(this);},getGridWidget:function(){return this.children[0];},getGraphWidget:function(){return this.children[1];},updateGraph:function(K){var J=this.getGraphWidget();if(J){J.update(K);J.refresh();}},quickSwitch:function E(){var J=this.viewMode!=H;this.defn.set("qsm",(J?H:F));return true;}});})();(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var D=function(){var F=this.opener;if(F.direction.toLowerCase()==="up"){this.domNode.style.top=-F.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"19px",text:"",direction:"down",enabled:true,title:"",markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.text;},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function B(){if(this._super){this._super();}var F=this.popupRef;if(F){if(F.nudge){F.nudge=mstrmojo.func.composite([F.nudge,D]);}else{if(this.direction.toLowerCase()!=="down"){F.nudge=D;}}}},popupRef:null,popupOpenConfig:null,destroy:function C(F){var G=this.popupRef;if(G&&G.hasRendered){G.destroy(false);}if(this._super){this._super(F);}},togglePopup:function E(){var F=this._lastOpened;if(F&&F.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(F){this.togglePopup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Widget","mstrmojo.css","mstrmojo.dom");var Y=mstrmojo.css,F=mstrmojo.dom;var Z={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};function A(){var d=this.value,b=this.inputNode,e=b.value,a=(d!==null&&d!==undefined)?String(d):"";if(a!==e&&(!this.keepEmpty||e!==this.emptyText)){b.value=a;}if(b.mstrmojoEmpty){Y.removeClass(b,[this.emptyClass]);b.mstrmojoEmpty=null;}}function X(){var a=this.inputNode;a.value=this.emptyText||"";Y.addClass(a,[this.emptyClass]);a.mstrmojoEmpty=true;}function N(){var a=this.inputNode;if(a){this.readingDom=true;this.set("value",a.value);this.readingDom=false;}}function U(a){var b=this;if(a===-1){N.call(this);}else{if(this._lastTimeoutId){window.clearTimeout(this._lastTimeoutId);}this._lastTimeoutId=window.setTimeout(function(){delete b._lastTimeoutId;N.call(b);},a||100);}}mstrmojo.TextBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TextBox",value:"",type:"text",hint:"",readOnly:false,size:"",maxLength:"",cssDisplay:"inline",tabIndex:"",emptyText:"",keepEmpty:false,emptyClass:"mstrmojo-empty",valueChangeDelay:-1,textValid:true,autoComplete:true,autoCorrect:true,autoCapitalize:true,markupString:'<input id="{@id}" class="mstrmojo-TextBox {@cssClass}"  style="{@cssText}" title="{@tooltip}" type="{@type}" value="" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}"min="{@min}" max="{@max}" placeholder="{@hint}" mstrAttach:focus,keyup,blur,paste,cut,input,click,keydown  tstid="{@tstid}"/>',markupSlots:{inputNode:function D(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,oncssClassChange:function S(){this.inputNode.className="mstrmojo-TextBox "+(this.cssClass||"");},onhintChange:function O(){this.inputNode.setAttribute("placeholder",this.hint);},onenabledChange:function E(){var a=this.inputNode;a.disabled=!this.enabled;Y.toggleClass(a,"disabled",!this.enabled);},onvalueChange:function P(){var a=this.value,b=(a===undefined)||(a===null)||(a==="");if(b){if(!this.hasFocus){X.call(this);}else{this.inputNode.value="";}}else{A.call(this);}if(F.isIE9){this.inputNode.type=b?"text":this.type;}},ontooltipChange:function R(){this.domNode.title=this.tooltip;},onreadOnlyChange:function H(){this.inputNode.readOnly=this.readOnly;},ontextValidChange:function B(){Y.toggleClass(this.inputNode,["err"],!this.textValid);}},postBuildRendering:function V(){this._super();var a=this.inputNode;a.setAttribute("autocomplete",this.autoComplete?"on":"off");a.setAttribute("autocorrect",this.autoCorrect?"on":"off");a.setAttribute("autocapitalize",this.autoCapitalize?"on":"off");},focus:function Q(){if(this.inputNode&&this.inputNode.offsetParent){try{this.inputNode.focus();}catch(a){}}},prefocus:function M(){this.hasFocus=true;A.call(this);},blur:function T(){this.inputNode.blur();},preblur:function W(){window.setTimeout(function(){},200);this.hasFocus=false;N.call(this);var a=this.value;if(((a===null||a==="")&&this.emptyText)||(this.keepEmpty&&a===this.emptyText)){X.call(this);}},prekeyup:function I(b){var a=b.hWin,d=b.e||a.event;U.call(this,this.valueChangeDelay);var f=Z[d.keyCode];if(this["on"+f]){this["on"+f](b);}},preinput:function J(){U.call(this,this.valueChangeDelay);},prepaste:function K(){U.call(this);},precut:function G(){U.call(this);},setInvalidState:function C(a){this.set("textValid",true);if(a){this.domNode.setAttribute("title",a);}},cleanUp:function L(){this.inputNode.value="";this.set("textValid",false);this.domNode.setAttribute("title",this.tooltip);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var D=mstrmojo.dom,F=mstrmojo.array,E=mstrmojo.hash;var A;mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(H,G){if(!A){var I=this.itemField;A=this._super(H).replace(">{@en@n}<",' title="{@en@'+I+'}">{@en@'+I+"}<");}return A;},getItemProps:function C(I,G){var H=this._super(I,G),J=this.itemField;H[J]=I[J];return H;},onclick:function B(G){if(this.disableClick){return false;}var L=this,I=this.parent,K=I.opener,H=D.isMetaKey(G.hWin,G.e);if(H&&!this.multiSelect){this.multiSelect=K.parent.defn.multi;if(this.multiSelect){D.attachOneTimeEvent(document.documentElement,"keyup",function(){var N=L.selectedIndices;if(K){K.suggestionShown=false;if(N&&!E.isEmpty(N)){var M=[];E.forEach(L.selectedIndices,function(P,O){M.push(L.items[O]);});K.handleSuggestionItemSelect(M);}I.close();}L.multiSelect=false;});}}this._super(G);if(!this.multiSelect){K.suggestionShown=false;var J=this.selectedItem;if(J){K.handleSuggestionItemSelect(J);}I.close();}},bindings:{itemField:"this.parent.opener.itemField",items:"this.parent.opener.suggestionItems",disableClick:"this.parent.opener.disableClick"}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase");mstrmojo.SelectBox=mstrmojo.declare(mstrmojo.ListBase,null,{scriptClass:"mstrmojo.SelectBox",size:10,cssDisplay:"inline",markupString:'<select id="{@id}" class="mstrmojo-SelectBox {@cssClass}" style="{@cssText}" size="{@size}" {@multipleHtml} mstrAttach:keyup,change tstid="{@tstid}">{@itemsHtml}</select>',markupSlots:{itemsContainerNode:function(){return this.domNode;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onenabledChange:function(){this.domNode.disabled=!this.enabled;}},itemCssClass:"mstrmojo-selectbox-item",itemDisplayField:"n",itemIdField:"v",showItemTooltip:false,itemRenderer:{render:function(E,D,F){var G=mstrmojo.string.htmlAngles((F.getItemName)?F.getItemName(E,D):(F.itemDisplayField&&E[F.itemDisplayField]));return'<option class="'+F.itemCssClass+'" value="'+((F.getItemValue)?F.getItemValue(E,D):(F.itemIdField&&E[F.itemIdField]))+'" '+((F.selectedIndices[D])?'selected="true" ':"")+((F.showItemTooltip)?'title="'+mstrmojo.string.encodeXMLAttribute(G)+'"':"")+">"+G+"</option>";},select:function(E,F,D,G){E.selected=true;},unselect:function(E,F,D,G){E.selected=false;}},buildRendering:function C(){this.multipleHtml=this.multiSelect?' multiple="true" ':"";this._super();delete this.multipleHtml;},_getItemNode:function(D){var E=this.scrollboxNode;return E&&E.options[D];},prechange:function A(E){if(this._syncDom){return ;}this._syncDom=true;var H=this.scrollboxNode;if(this.multiSelect){var I=H.options,F=[];for(var G=0,D=I.length;G<D;G++){if(I[G].selected){F.push(G);}}this.select(F);}else{this.singleSelect(H.selectedIndex);}delete this._syncDom;},prekeyup:function(E){var H=this.scrollboxNode,F=false;if(this.multiSelect){var I=H.options;for(var G=0,D=I.length;G<D;G++){if(I[G].selected!==!!this.selectedIndices[G]){F=true;break;}}}else{if(H.selectedIndex!==this.selectedIndex){F=true;}}if(F){var J=E;J.name="change";this.raiseEvent(E);}},onselectionChange:function B(D){if(!this._syncDom){this._super(D);}}});})();(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.VisMenuList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.VisMenuList",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);},getItemProps:function A(F,D){var E=this._super(F,D);E.tag="a";E.addCls("mstrmojo-ui-Menu-item");return E;},onselectionChange:function B(D){this._super(D);this.parent.data.set("valid",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.android._IsList","mstrmojo.android._HasLingeringListSelections","mstrmojo._TouchGestures","mstrmojo.css");var A,C=mstrmojo.dom,B=C.CSS3_TRANSITION_DURATION;mstrmojo.android.ui.ActionToolbarButtons=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo.android._IsList,mstrmojo.android._HasLingeringListSelections,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.ActionToolbarButtons",init:function G(H){this._super(H);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ActionToolbar-buttons");},cssDisplay:"table",icnCssText:"display:table-row",getItemMarkup:function F(H){if(!A){A=this._super(H).replace(">{@en@n}",' title="{@en@n}"><div></div>');}return A;},getItemProps:function D(J,H){var I=this._super(J,H);I.addCls(J.cls);return I;},listHooks:{select:function(H){H.style[B]=0;this.setClearHandler(200);},unselect:function(H){H.style[B]="300ms";}},preselectionChange:function E(H){if(H.added){return !!this.parent.active;}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");mstrmojo.DivItemRenderer={render:function(E,C,F){var D=mstrmojo.string.encodeHtmlString((F.getItemName?F.getItemName(E,C):(F.itemDisplayField&&E[F.itemDisplayField])));return'<div mstridx="'+C+'" class="'+F.itemCssClass+(F.selectedIndices[C]?" "+F.itemSelectedCssClass:"")+(E.cssClass?" "+E.cssClass:"")+'" style="'+F.itemCssText+'">'+D+"</div>";},select:function(D,E,C,F){D.className+=" selected";},unselect:function(D,E,C,F){D.className=D.className.replace(/selected/g,"");},rowHeight:21};mstrmojo._RendersItemDivs={tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"mstrmojo-ListBox-cell",cellCssText:"",itemCssClass:"mstrmojo-ListBox-item",itemSelectedCssClass:"selected",itemDisplayField:"n",itemRenderer:mstrmojo.DivItemRenderer,rangeSelected:false,_findMatch:function(C,D){return mstrmojo.dom.findAncestorByAttr(mstrmojo.dom.eventTarget(C,D),"mstridx",true,this.itemsNode);},premousedown:function A(C){if(mstrmojo.dom.shiftKey(C.hWin,C.e)){mstrmojo.dom.preventDefault(C.hWin,C.e);}},preclick:function B(L){var H=L.hWin,I=L.e,G=this._findMatch(H,I);if(G){var E=G.node,K=parseInt(G.value,10),J=mstrmojo.dom,C=J.ctrlKey(H,I),D=J.shiftKey(H,I);if(C||D){J.clearBrowserHighlights(H);}if(this.multiSelect&&(this.selectionPolicy==="toggle"||C)){var F=this.rangeSelected||this.selectedIndex===-1;this.toggleSelect(K);if(F&&K<this.items.length&&this.selectedIndices[K+1]){K++;}this.selectedIndex=K;this.rangeSelected=false;}else{if(this.multiSelect&&D){this.rangeSelected=true;this.rangeSelect(K);}else{this.singleSelect(K);this.rangeSelected=false;}}}}};mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._RendersItemDivs");mstrmojo.ListBoxBase=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._RendersItemDivs],{scriptClass:"mstrmojo.ListBoxBase",cssClass:"mstrmojo-ListBox",itemCssClass:"mstrmojo-ListBox-item",_markupPrefix:function(){var C=this.itemRenderer;return(C&&C.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="0" cellpadding="0"><tbody>');},_markupSuffix:function(){var C=this.itemRenderer;return(C&&C.markupSuffix)||"</tbody></table>";},_itemPrefix:function(){var C=this.itemRenderer;return(C&&C.itemPrefix)||('<tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'"><td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var C=this.itemRenderer;return(C&&C.itemSuffix)||"</td></tr>";},_getItemNode:function(C){var E=this.itemsNode,D=E&&E.rows,F=D&&D[C];return F&&F.cells[0].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.android._IsList","mstrmojo._TouchGestures","mstrmojo.dom","mstrmojo.css");function C(){var E=this._tchHandler;if(E){E.clear();delete this._tchHandler;}this.clearSelect();mstrApp.setMenuStatus(this.id,false);}mstrmojo.android.ui.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo.android._IsList,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Menu",init:function D(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ActionMenu");this._lastVisible=this.visible;},setMaxWidth:false,markupMethods:{onvisibleChange:function(){var E=!!this.visible,G=this.domNode,F=G.style;F.display=(E)?this.cssDisplay:"none";if(this.parent&&this.parent.propogateMenuVisibleChange&&E!=this._lastVisible){this._lastVisible=E;this.parent.propogateMenuVisibleChange(E);}if(E&&this.setMaxWidth){F.maxWidth=(Math.round(mstrApp.getScreenDimensions().w*0.98)-mstrmojo.dom.position(G).x)+"px";}}},onvisibleChange:function B(E){if(E.value){var F=this.id;this._tchHandler=mstrmojo.touchManager.attachEventListener("touchesBegin",F,function(G){if(G.srcId!==F){this.set("visible",false);G.ignore=true;}});mstrApp.setMenuStatus(F,true);}else{C.call(this);}},onUnRender:function A(){C.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");mstrmojo.ui.List=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.List",postselectionChange:function C(D){var G=D.added||[],F=G.length,I=D.removed||[],E=I.length;if(E){this.selectionRemoved({added:G,removed:I,isReselect:false});}if(F){var H=function(J){return[].concat(J).sort().join(",");};this.selectionAdded({added:G,removed:I,isReselect:H(G)===H(I)});}},selectionAdded:function A(D){},selectionRemoved:function B(D){}});mstrmojo.ui.List.SelectionChangeEvtType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._TouchGestures","mstrmojo.android._IsList","mstrmojo.array","mstrmojo.css");var G=mstrmojo.array,H=mstrmojo.css,E=Math,A="fixed";function F(R,S){var O=this.domNode,N=O.clientWidth,Q=this._itemSizeMap,M=R-1,P=R+1;S=S||0;G.forEach(this.itemsContainerNode.childNodes,function(V,T){var W=0;if(T===R){W=(N/2)-(Q[T]/2);}else{if(T===P){W=N-Q[T];}else{if(T!==M){W=-(N/2);if(T>P){W=N+(-1*W);}}}}var U=E.round(W+S/2)+"px";if(V.style.left!==U){V.style.left=U;}V.style.left=(W+S/2)+"px";});}mstrmojo.android.ui.ScrollableTabs=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._TouchGestures,mstrmojo.android._IsList],{scriptClass:"mstrmojo.android.ui.ScrollableTabs",multiSelect:false,init:function L(M){this._super(M);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ScrollableTabs");},setCurrentTab:function K(M){this.clearSelect();this.singleSelect(M,true);this.itemRenderer.select(this._getItemNode(M),this.items[M],M,this);F.call(this,M);},tabSelected:mstrmojo.emptyFn,postitemsChange:function B(){var O=this._itemSizeMap=[],M=this.items,N=this.domNode;if(M&&M.length){G.forEach(this.itemsContainerNode.childNodes,function(Q,P){O[P]=Q.offsetWidth;});}else{this.set("visible",false);}H.addClass(N,A);F.call(this,E.max(this.selectedIndex||0,0));window.setTimeout(function(){H.removeClass(N,A);},0);},postselectionChange:function C(M){var N=M.added;if(N){this.tabSelected(this.items[N[0]]);}},enterScroll:function I(){H.addClass(this.domNode,A);},scroll:function J(M){F.call(this,this.selectedIndex,M);},exitScroll:function D(M){H.removeClass(this.domNode,A);this.setCurrentTab(M);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.ImageToggle","mstrmojo._IsInputControl");mstrmojo.ToggleDIC=mstrmojo.declare(mstrmojo.ImageToggle,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.ToggleDIC",init:function(A){this._super(A);this.unset=this.dic.ust;},focus:function(){this.domNode.focus();},onvalueChange:function(){},onblur:function(B){var A=B.e||B,C=this.domNode,D=mstrmojo.boxmodel.offset(C,document.body);if(A.clientX>D.left&&A.clientX<D.left+C.offsetWidth&&A.clientY>D.top&&A.clientY<D.top+C.offsetHeight){this.domNode.focus();}else{this.applyChanges();}},postBuildRendering:function(){if(this._super){this._super();}if(this.showByDefault){var A=this.openerStyle;this.width=A.iw;this.height=A.ih;this.set("imageList",this.dic.vls);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._IsInputControl","mstrmojo.android._HasPreviewButton","mstrmojo.Button","mstrmojo.url");mstrmojo.requiresDescs(1442,2140);var A=mstrmojo.Button.newInteractiveButton;mstrmojo.android.inputControls.SignatureDIC=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.SignatureDIC",markupString:"<div></div>",hasSignature:false,showInPopup:function C(){var F=this.ownerCell||this.owner;if(F.mdf){var G=this;mstrmojo.confirm("Continuing will erase the existing signature. Do you want to proceed?",[A(mstrmojo.desc(2140,"Cancel"),null,null),A(mstrmojo.desc(1442,"Ok"),function(){G.captureSignature();},null)]);}else{this.captureSignature();}},captureSignature:function B(){mstrMobileApp.captureSignature(JSON.stringify({serverURL:mstrApp.getConfiguration().getTaskUrlByProject(mstrApp.getCurrentProjectId()),sessionState:mstrApp.getSessionState(),showGuideLine:this.dic.sgl}),'mstrmojo.all["'+this.id+'"].signatureCaptured');},signatureCaptured:function D(F){this.value=mstrmojo.url.getAbsoluteURL(F,mstrApp.getConfiguration().getCurrentProjectWebServerUrl());this.applyChanges();},renderPreview:function E(){var I="",G=this.ownerCell||this.owner,H=this.openerNode,F=this.value;if(G.mdf&&/^(http|https).+(png|jpg)$/.test(F)){I='<img src="'+this.value+'" style="max-height:'+H.clientHeight+"px;max-width:"+(H.clientWidth-30)+'px;"></img>\u00a0';}this.renderPreviewButton(H,I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.EnumRWUnitType","mstrmojo.hash","mstrmojo.Button","mstrmojo.css");var A=mstrmojo.EnumRWUnitType,N=mstrmojo.hash,B={},P=mstrmojo.Button.newWebButton,K=mstrmojo.array;B[A.HEADER]=B[A.FOOTER]=B[A.PAGEHEADER]=B[A.PAGEFOOTER]=B[A.DETAILS]={n:"Section"};B[A.HTMLCONTAINER]={n:"HTMLContainer"};B[A.SELECTOR]={n:"Selector"};B[A.GRID]={n:"Xtab"};B[A.MOJOVISUALIZATION]={n:"MojoVisualization"};function C(W){return(W&&W.t)||mstrmojo.EnumRWUnitType.LAYOUT;}mstrmojo.DocBuilder=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.DocBuilder",visList:null,selectorFactory:null,classMap:null,init:function R(W){this._super(W);var X=this.selectorFactory=this.createSelectorFactory();this.addDisposable(X);this.classMap=this.createClassMap();},createSelectorFactory:function V(){this.throwAbstractMethodError("getSelectorFactory");},createClassMap:function E(){return N.copy(B);},getMojoVisName:function S(Z){var a="",Y=Z.data,W=C(Z.defn),X=Y&&Y.vis;if(X&&(W===A.GRID||W===A.GRAPH||W===A.GRIDGRAPH)){if(X.vn&&X.ve&&X.vm===51){a=X.vn;}else{if(X.we&&X.wcn){a=this.visList.findVisName(X.wcn);}}}return a;},build:function M(W,e,p){var l=this.classMap,f=[],h=((W&&W.length)||0),d,Z,a,X,b,Y,k,j,o;for(d=0;d<h;d++){Z=W[d];a=Z&&Z.defn;X=Z&&Z.data;b=C(a);Y=l[b];if(b===A.TEXTFIELD&&((a&&a.dpst))){Y=l[b+"B"];}k=X&&(X.visName||X.vis&&this.getMojoVisName(Z));if(k){X.visName=k;Y=B[A.MOJOVISUALIZATION];}j=(Y&&Y.n)?"new"+Y.n:"";o=undefined;if(this[j]){o=this[j](e,Z,Y,p);}else{if(Y&&Y.scriptClass){var g=Y.cls;if(!g){g=N.walk(Y.scriptClass,window);}if(g){o=this.newRWUnitInstance(e,Z,g);}}}if(o){o.k=Z.k;o.builder=this;o.tooltip=X.tooltip||a.tooltip||"";if(!o.defn){o.defn=a;o.disposables.push(o.defn);}if(o.update){o.update(Z);}if(this.isPortlet(a)){o=this.createPortlet(b,Z,o,p);}if(!this.extractWidget(o,Z)){f.push(o);}}}return f;},createPortlet:function G(X,Y,W,Z){return W;},newRWUnitInstance:function Q(W,Y,Z,X){return new Z(N.copy(X||{},{id:Y.id,node:Y,controller:this.parent.controller,model:W}));},newSection:function T(W,X){this.throwAbstractMethodError("newSection");},newSelector:function J(Y,Z,X,a){var W=this.selectorFactory.newDocSelector(Y,Z,X,a);W.controller=this.parent.controller;return W;},isPortlet:function O(W){return !!((W.t!==A.PANEL&&W.ttl!==undefined)||W.qsm);},extractWidget:function L(X,W){return !X;},getDefaultMojoVisModel:function H(){this.throwAbstractMethodError("getDefaultMojoVisModel");},newMojoVisualization:function(d,l){var p=this.visList,X=l.data,o=p.getVis(X.visName),t=o&&((o.dc!==undefined)?o.dc:o.c),u=this;if(!o){var a=X.className,w=false;if(!a){if(!this.widgetNotFound){this.widgetNotFound=[];}K.forEach(this.widgetNotFound,function(z){if(z.key===X.k){w=true;}});if(!w){this.widgetNotFound.push({key:X.k,name:X.visName});}else{this.widgetNotFound=[];this.widgetNotFound.push({key:X.k,name:X.visName});}var Z=this.widgetNotFound.length,b=Z>1?14642:14643,r=Z>1?"The following custom visualization plug-ins are missing and will be displayed as grids: ##.":"The following custom visualization plug-in is missing and will be displayed as a grid: ##.";if(!k){var k=window.setTimeout(function(){var z=[];K.forEach(this.widgetNotFound,function(AA){z.push(AA.name);});mstrmojo.warn(mstrmojo.desc(b,r).replace("##",z),{},{buttons:[P(mstrmojo.desc(1442,"OK"),function(){})]});}.bind(this),0);}var x=this.newXtab(d,l);x.cssDefault=!!x.cssDefault?x.cssDefault+" noVis":"noVis";return x;}o={dc:a};}var Y="mstrmojo."+t,h=o.b;if(mstrApp.isVI&&o.vib){h=o.vib;}else{if(mstrApp.isExpress&&o.oivmb){h=o.oivmb;}}if(h&&!mstrmojo.loader.isLoaded(Y)){mstrmojo.requiresBundle(h);}mstrmojo.requiresCls(Y);var W=this.visList.getVis(l.data.visName).m,j=N.walk(t,mstrmojo),s=W?N.walk(W,mstrmojo):this.getDefaultMojoVisModel();if(!j||!s){throw new Error("Missing visualization class.");}j=p.getVisClass(j,l.defn);var g=new j(N.copy(X.extProps,{id:l.id,node:l,n:l.defn.title,controller:this.parent.controller,gb:X.gbys}));var e=new s({xtab:g,controller:this.parent.controller,docModel:d});g.setModel(e);e.set("data",X);if(!!l.data.sdp){var q;for(q in l.data.sdp){l.data.sdp[q].defn={};var f=this.newXtab(d,l.data.sdp[q]);f.setModel(new s({xtab:f,controller:this.parent.controller,docModel:d,data:l.data.sdp[q]}));f.k=q;}}return g;},getEditableXtab:function F(W){this.throwAbstractMethodError("getEditableXtab");},getDefaultXtab:function D(W){this.throwAbstractMethodError("getDefaultXtab");},newXtab:function I(X,Y,W,a){var Z=mstrmojo.all[Y.id];if(!Z){Z=this.newRWUnitInstance(X,Y,Y.defn.txi?this.getEditableXtab(Y):this.getDefaultXtab(a));Z.model=this.newXtabModel({xtab:Z,docModel:X});}else{Z.set("node",Y);Z.model.set("docModel",X);}return Z;},newXtabModel:function U(W){this.throwAbstractMethodError("newXtabModel");}});mstrmojo.DocBuilder.ClassMapItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.OfflineTransactionModel","mstrmojo.Button");mstrmojo._CanSupportOfflineTransactions=mstrmojo.provide("mstrmojo._CanSupportOfflineTransactions",{_mixinName:"mstrmojo._CanSupportOfflineTransactions",getTransactionNotificationController:function A(){var F=this.txNtfCtlr;if(this.oflnTxModel&&(!F||!mstrmojo.all[F.id])){F=this.txNtfCtlr=mstrApp.controllerFactory.newController("Transactions",{model:this.oflnTxModel,rootCtrl:mstrApp.rootController});}return F;},submitTransactionQueue:function D(F,G){mstrMobileApp.submitOfflineTransactions(F,G,"mstrApp.onSubmitTransactionQueueDone");},onSubmitTransactionQueueDone:function C(F,G){if(this.oflnTxModel){this.oflnTxModel.onSubmitDone(F);}if(F){mstrApp.rootController.generateActionToolbar();mstrmojo.toast(mstrmojo.desc(9724,"All pending transactions have been successfully submitted"));}else{mstrmojo.toast(mstrmojo.desc(9261,"A background transaction submission failed"));}},submitOfflineTransaction:function E(){if(this.oflnTxModel){this.oflnTxModel.submitOfflineTransaction();}},refreshOfflineTransactionModel:function B(){if(this.oflnTxModel){this.oflnTxModel.refresh();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.MenuItem=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.MenuItem",markupString:'<div id="{@id}" class="mstrmojo-MenuItem {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click><div class="mstrmojo-MenuItem-text"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.css","mstrmojo.hash");var H=mstrmojo.css,D=mstrmojo.hash,B="glow";var F=mstrmojo.android.ui.Button=mstrmojo.declare(mstrmojo.Button,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Button",onclick:mstrmojo.emptyFn,touchBegin:function E(){if(this.enabled){H.addClass(this.domNode,B);}},touchTap:function C(J){if(this.enabled){this.onclick({e:J.evt});}},touchSelectBegin:mstrmojo.emptyFn,touchSelectEnd:function A(J){if(this.enabled){this.onclick({e:J.evt});}},touchEnd:function I(){H.removeClass(this.domNode,B);}});F.prototype.markupString=F.prototype.markupString.replace(new RegExp(" mstrAttach:[a-zA-Z,]*"),"");F.newButton=function G(M,L,K){var J={scriptClass:"mstrmojo.android.ui.Button",text:M};if(L){J.onclick=L;}D.copy(K,J);return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._HasEditableText","mstrmojo.css");var B=mstrmojo.css;mstrmojo.EditableLabel=mstrmojo.declare(mstrmojo.Label,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.EditableLabel",autoApplyDelay:-1,markupString:'<div id="{@id}" class="mstrmojo-EditableLabel {@cssClass}" title="{@title}" contenteditable="{@isEditing}" style="{@cssText}" mstrAttach:click,mousedown,blur,keydown,keyup></div>',onkeyup:function C(D){this._super(D);if(this._autoApplyTimer){window.clearTimeout(this._autoApplyTimer);}if(this.autoApplyDelay!==-1){var E=this;this._autoApplyTimer=window.setTimeout(function(){E.set("isEditing",false);},this.autoApplyDelay);}},selectable:true});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.EditableLabel,{onselectableChange:function A(){var E=this[this.editableSlot],D=!!this.selectable;E.selectable=D;E.setAttribute("unselectable",!D?"on":"off");B.toggleClass(E,"unselectable",!D);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._TouchGestures");mstrmojo.android.ui.Label=mstrmojo.declare(mstrmojo.Label,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Label",touchTap:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.css","mstrmojo.hash");mstrmojo.TristateCheckBox=mstrmojo.declare(mstrmojo.Label,null,{scriptClass:"mstrmojo.TristateCheckBox",grayed:true,checked:true,cssClass:"tristate",onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);}else{this.set("checked",!this.checked);}},markupMethods:mstrmojo.hash.copy({oncheckedChange:function(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},ongrayedChange:function(){mstrmojo.css.toggleClass(this.domNode,"grayed",this.grayed);},onenabledChange:function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},mstrmojo.hash.copy(mstrmojo.Label.prototype.markupMethods))});})();(function(){mstrmojo.requiresCls("mstrmojo.ConditionNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.dom","mstrmojo.css");var A=mstrmojo.dom,B=mstrmojo.css,D=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.ConditionNode=mstrmojo.declare(mstrmojo.ConditionNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.ConditionNode",emptyText:mstrmojo.desc(5893,"New Condition"),markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span><span class="mstrmojo-add-cond" mstrAttach:click>'+mstrmojo.desc(1994,"Add Condition")+"</span>"+D+"</div></div>",getPrefixAndOrToolsMarkup:function(){return(D+this._super());},markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];},createSetNode:function(){return this.domNode.childNodes[1].lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},addConditionNode:function(){return this.domNode.childNodes[1].childNodes[4];}},markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){B.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noRelation);},onnoCreateSetChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noCreateSet);}},mstrmojo.hash.copy(mstrmojo.ConditionNode.prototype.markupMethods)),init:function(E){if(this._super){this._super(E);}var F=this.data&&this.data.et;if(F){this.set("noCreateSet",F===10||F===12);}},preclick:function C(E){var H=null,G=A.eventTarget(E.hWin,E.e),F=this._super(E);if(A.contains(this.createSetOptNode,G,true)&&!this.noRelationOperator&&!this.noRelation){H="createSetOpt";}else{if(A.contains(this.createSetNode,G,true)&&!this.noRelation){H="createSet";}else{if(A.contains(this.addConditionNode,G,true)){H="addCondition";}}}E.part=H||E.part;return F;},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.XtabModel","mstrmojo._IsRptModel","mstrmojo.func");mstrmojo.RptXtabModel=mstrmojo.declare(mstrmojo.XtabModel,[mstrmojo._IsRptModel],{scriptClass:"mstrmojo.RptXtabModel",init:function D(E){this._super(E);this.dataService=(mstrApp.modelFactory&&mstrApp.modelFactory.newDataService("Xtab",E))||mstrApp.viewFactory.newXtabDataService(E);},getPageByTree:function A(E){if((!this.data.ghs||!this.data.ghs.phs)&&!this.data.phs){return ;}this._super(E);},downloadGridData:function C(I){var G=I.xtabId,F=I.memo,E=mstrmojo.all[G],H=this.getDataService();var J={success:function(K){if(K&&E){E.dataDownloaded({data:K},F);E.updateXtabStyles(K.cssString);}},failure:function(){if(E.dataDownloadErr){E.dataDownloadErr();}}};H.downloadGridData(I,J);},destroy:function B(){if(this.dataService){this.dataService.destroy();}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.XtabModel","mstrmojo.array","mstrmojo.func","mstrmojo.hash","mstrmojo.elementHelper");var t="Metrics",E=2,Z=mstrmojo.array,H=mstrmojo.hash,T=mstrmojo.elementHelper;function P(AH){if(!AH){return false;}var AF=this.scm,AB="\u001E",AD,AA,AE,AC,z,AG=false;for(AA in AF){AE=AF[AA];AC=AE.cgb;for(AD in AC){z=AH[AC[AD]];if(z){if(!AE.tks){AE.tks=z;AG=true;}else{if(AE.tks&&(AE.tks.indexOf(z)<0)){AE.tks+=AB+z;AG=true;}}}}}return AG;}function e(){var AA=this.data,z=AA.gts;if(!z){return ;}var AB;Z.forEach([z.row,z.col],function(AC){Z.forEach(AC,function(AD){if(AD.sc){AB=AB||{};AB[AD.id||t]=AD.sc;if(AD.fid){AB[AD.id+"_"+AD.fid]=AD.sc;}}});});this.scm=AB;P.call(this,this.docModel.getCGBMap());}function x(z,AA){var AB=this.getDataService();AB[z].apply(AB,AA);}function R(AF,AG,AO){var AE=AG||T.getIdPresentation(AF),AN,AL;switch(AE){case"terse":case"terseLong":AN=AF.substring(1,AF.length).split(";");return"h"+AN[0]+";"+AN[1]+(AO?";"+AO:"");case"old":AF=AF.replace(/\*:/g,"*COLON*");AN=AF.split(":");return("h"+AN[1]+(AN[2]?":"+AN[2]:"")+";"+AN[0]+(AO?";"+AO:"")).replace(/\*COLON\*/g,"*:");case"oldLong":var AI=0,z,AM,AK=[],AH=[],AD,AC,AB,AJ=function AJ(){if(AI<0){return null;}var AR=false,AP=-1,AS,AQ=null;for(AD=AI;AD<AF.length;AD++){AS=AF.charAt(AD);if(AS==="*"&&!AR){AR=true;}else{if(AS===":"&&!AR){AP=AD;break;}else{AR=false;}}}if(AP===-1){AQ=AF.substring(AI);AI=-1;}else{AQ=AF.substring(AI,AP);AI=AP+1;}return AQ;};AB=AJ();if(AB!=="BB"&&AB!=="BF"){return AF;}AL=AJ();if(AB==="BF"){AL=AJ();}z=parseInt(AJ(),10);AM=parseInt(AJ(),10);for(AC=0;AC<AM;AC++){AH[AC]=parseInt(AJ(),10);AJ();}for(AC=0;AC<AM;AC++){var AA=AJ();if(AH[AC]<z&&AH[AC]>=0){AK[AH[AC]]=AA;}}return"h"+AK.join(":")+";"+AL+(AO?";"+AO:"");}return AF;}mstrmojo.DocXtabModel=mstrmojo.declare(mstrmojo.XtabModel,null,{scriptClass:"mstrmojo.DocXtabModel",docModel:null,init:function p(z){this._super(z);var AA=this;this.docModel.attachEventListener("CGBMapChange",this.id,function(AB){if(AA.xtab.onCBGMapChange){AA.xtab.onCGBMapChange(AB);}});},ondataChange:function h(){e.call(this);},getMessageId:function F(){return this.docModel.mid;},getDataService:function G(){return this.docModel.getDataService();},getAction:function X(AN,AD,AI){var AL=AN[0],AA=AL&&AL.at;var AC;if(AA){if((AA&E)>0){var AB=this.getCellTitleInfo(AL),AJ=AB&&AB.title,z=AJ&&AJ.id,AK=this.scm;this.sti={titleId:z||t};var AH=(z&&AK[z])||AK[t],AG=function(){var AO=[];Z.forEach(AN,function(AP){if(AP._e&&AP._e.id){AO.push(AP._e.id);}});return AO.join("\u001E");};if(AH){var AM=this.xtab,AE=(AM.allowToggleSelections&&AH.all&&AI),AF=(AB.isSrcTitle||AE);this.sti.deselectCurrent=AE;AC={h:"onGridSelector",a:{type:mstrmojo.EnumRWUnitType.GRID,anchor:AD,ck:AH.ck,tks:AH.tks,eid:AF?"OA:(All)":AG(),ctlKey:AH.ckey,sliceId:AM.sid,isUConDS:AH.isUConDS,ifw:AH.ifw}};}}}if(!AC){AC=this._super(AN);}if(AC&&AC.a){AC.a.sliceId=this.xtab.sid;}return AC;},getDownloadAction:function l(AD,AB,AF,AC,AE,AA,z){var AG=this._super(AD,AB,AF,AC,AE,AA);AG.sliceId=this.xtab.sid;if(z&&z.name==="TransactionUpdates"){if(AG.partialUpdate){if(AG.partialUpdate.selectors){AG.partialUpdate.selectors.push(z.ctlKey);}else{AG.partialUpdate.selectors=[z.ctlKey];}}else{AG.partialUpdate={selectors:[z.ctlKey]};}}return AG;},getDrillAction:function g(AA,AC){var AB=this._super(AA,AC),z=this.getCellTitleInfo(AA[0]);if(AB&&AB.isWithin){AB.attrObj=z.title;}AB.srcMsgId=this.docModel.mid;return AB;},sort:function r(AA,AB){var z=this.xtab;AA.stp=AA.stp||this.getSubTotalsPos();AA.subTotalsPos=AA.stp;AA.nodeKey=z.k;AA.treeType=z.treeType||1;x.call(this,"sortGrid",arguments);},getAdvSortData:function Q(z,AA){x.call(this,"getAdvSortData",arguments);},pivot:function I(z,AA){x.call(this,"pivot",arguments);},removeUnit:function O(z,AA){x.call(this,"removeUnit",arguments);},getTotalsAction:function J(z,AC,AA){var AB=this.getPivotAction(z);AB.act="showTotals";AB.subtotalType=AC;AB.clearSubtotalType=AA;return AB;},getRemoveAxisTotalsAction:function b(AA,z){return{act:"removeAxisTotals",axis:z,subtotalType:AA};},showTotals:function B(z,AA){x.call(this,"showTotals",arguments);},drillGrid:function W(z,AA){x.call(this,"drillGrid",arguments);},downloadGridData:function d(z,AA){x.call(this,"downloadGridData",arguments);},loadLayout:function a(z){this.docModel.loadLayout(z);},resizeXtabColumn:function L(z,AA){x.call(this,"resizeXtabColumn",arguments);},submitTemplateActions:function q(z,AA,AB){x.call(this,"submitTemplateUpdates",arguments);},getDerivedMetricAction:function j(z,AA){return{did:z._e.oid,um:z.um,alias:z._e.n,n:z._e.n,v:z.um?z.formula:z._e.v,mix:z.mix,cmd:AA,model:this};},getAddTemplateUnitAction:function C(AD,AF,AB,z){var AA=AD.t,AE=this.data.gsi,AC={act:"addUnit",unitId:AD.did,unitType:AA,unitPos:++z,dsId:AF,isFirst:!AE||(AE.cols.length===0&&AE.rows.length===0)};if(AA!==4||!AE||!AE.mx.length){AC.axis=AB;}return AC;},getRemoveTemplateUnitAction:function o(z){return{act:"removeUnit",unitId:z.did||z.id,unitType:z.t||4};},getRenameTemplateUnitAction:function o(AD,AB,z,AA){var AC={act:"renameUnit",id:AD,type:AB,name:z};if(AA){AC.isDynamicAlias=true;}return AC;},doesNameExistOnTemplate:function A(AB,AF,AD,AA){var AE=AB.node.data.gsi,z=AD===4,AC=z?AE.mx:AE.rows.concat(AE.cols);return AC.some(function(AG){return AG.did!==AF&&(z||AG.t===AD)&&AG.n===AA;});},getPivotUnitAction:function M(AB,z,AC,AA){z++;return{act:"pivot",unitId:String(AC||""),unitType:AA||"",axis:AB,unitPos:z};},getShowTotalsUnitAction:function U(AC,AA,AB,z){return{act:"showTotals",unitId:String(AC||""),unitType:AA||"",subtotalType:AB,clearSubtotalType:z};},getSortGridAction:function s(AC,AA,AB,z){return{sortKey:AA,subTotalsPos:AC,axis:AB,isAsc:z};},getColumnResizeAction:function N(AC,z,AA,AB,AD){return{act:"changeXtabColumnWidth",unitId:AC,unitType:z,width:AA||0,depth:AB||1,ec:AD};},getNormalizedFormElementId:function w(AA,z){return R(AA,null,z);},compareNormalizedElementsId:function k(AA,z){if(AA===z){return true;}else{if(this.docModel.populateAttributeIdLinkInfo){this.docModel.populateAttributeIdLinkInfo();}if(T.isAttributeIdsLinked(T.getAttributeId(AA),T.getAttributeId(z),this.docModel.als&&this.docModel.als.idLinks||{})){return T.getElementValue(AA)===T.getElementValue(z);}}return false;},compareElementsId:function S(AD,AC){if(!this.docModel.als){return this.compareElementsIdInSingleGrid(AD,AC);}var AB=T.getIdPresentation(AD),AA=T.getIdPresentation(AC),z=R(AD,AB),AE=R(AC,AA);return this.compareNormalizedElementsId(z,AE);},compareElementsIdInSingleGrid:function Y(AC,AB){var AA=T.getIdPresentation(AC),z=T.getIdPresentation(AB);if(AA!==z||AA==="oldLong"||AA==="terseLong"){return R(AC,AA)===R(AB,z);}return AC===AB;},getLinkedAttributes:function f(z){var AA=[],AB;if(this.docModel.populateAttributeIdLinkInfo){this.docModel.populateAttributeIdLinkInfo();}AB=this.docModel.als&&this.docModel.als.idLinks||{};return AB[z];},getCellDataUnion:function V(AB){var AC=this,AA=AB.hasOwnProperty("mix"),AD=[],AE,z=function z(AG){var AF=AC.getCellTitleInfo(AG),AI=AF.title,AH=AI&&AI.id;if(AH){AE={};if(AG.stt){AE.isSubtotal=true;}AD.push(H.copy(AE,{tid:AH,eid:AG._e&&AG._e.id,v:AG.v}));}};if(AB){if(!AA){z(AB);}else{Z.forEach([AB._lp,AB._tp],function(AF){var AG=AF;while(AG&&AG!==AG._p){z(AG);AG=AG._p;}});}}return AD;},getObjectInfo:function D(z){var AA;Z.forEach((this.data.gsi.cols||[]).concat(this.data.gsi.rows||[]),function(AB){if(AB.did===z){AA=AB;}});return AA;},supportsViewFilterActions:function K(z){if(this.data&&this.data.gsi){var AA=this.getObjectInfo(z);return AA&&!AA.de&&(AA.t!==1)&&(AA.t!==47||AA.st===12033);}return false;},getSelectorControlMapInfo:function u(){var AA=[],AC=this.data.gsi,AB=[],z;if(this.scm){H.forEach(AC,function(AD){if(AD instanceof Array){AB=AB.concat(AD);}});H.forEach(this.scm,function(AE,AD){z=Z.find(AB,"did",AD);if(z!==-1){AA.push({did:AD,n:AB[z].n,sc:AE});}});}return AA;},getShowDefinedSubtotalsAction:function(){return{act:"showDefinedSubtotals"};}});}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumFunction","mstrmojo.mstr.EnumWebFunctionType","mstrmojo.mstr.EnumExpressionType","mstrmojo.mstr.EnumNodeType","mstrmojo.mstr.EnumDataType","mstrmojo.mstr.WebOperatorNode","mstrmojo.mstr.WebFormShortcutNode","mstrmojo.mstr.WebConstantNode","mstrmojo.mstr.WebTimeNode");var G=mstrmojo.mstr.EnumFunction,D=mstrmojo.mstr.EnumWebFunctionType,I=mstrmojo.mstr.EnumExpressionType,H=mstrmojo.mstr.EnumNodeType,B=mstrmojo.mstr.EnumDataType;mstrmojo.mstr.WebExpression=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.mstr.WebExpression",rootNode:null,init:function(K){K=K||{};if(!K.rootNode){K.rootNode=new mstrmojo.mstr.WebOperatorNode({exprType:I.FilterBranchQual,funcType:D.WebFunctionTypeGeneric,func:G.FunctionAnd});}this._super(K);},createOperatorNode:function E(K,N,L){if(!L){L=this.rootNode;}var M=new mstrmojo.mstr.WebOperatorNode({exprType:K});M.set("func",N);L.appendChild(M);return M;},createFormShortcutNode:function A(K,N,L){if(!L){L=this.rootNode;}var M=new mstrmojo.mstr.WebFormShortcutNode({attribute:K,form:N});L.appendChild(M);return M;},createValueNode:function C(M,K,L){switch(K){case B.DataTypeDate:case B.DataTypeTime:case B.DataTypeTimeStamp:return this.createTimeNode(M,L);default:return this.createConstantNode(M,K,L);}},createConstantNode:function J(N,K,L){if(!L){L=this.rootNode;}var M=new mstrmojo.mstr.WebConstantNode({value:N,type:K});L.appendChild(M);return M;},createTimeNode:function(M,K){var L=new mstrmojo.mstr.WebTimeNode({value:M});if(!K){K=this.rootNode;}K.appendChild(L);return L;},newAQSubExpression:function(K,O,N,M,Q){if(N<0){N=G.FunctionEquals;}var L=this.createOperatorNode(I.FilterSingleBaseFormQual,N),P=this.createFormShortcutNode(K,O,L),R=this.createValueNode(Q,M,L);return L;},buildShortXML:function F(L){L.addChild("exp");var K=this.rootNode;if(K){if(parseInt(K.exprType,10)===I.FilterBranchQual&&parseInt(K.nodeType,10)===H.NodeOperator){if(K.childNodes&&K.childNodes.length===1){var M=parseInt(K.func,10);if(M===G.FunctionAnd||M===G.FunctionOr){K.childNodes[0].buildShortXML(L);}else{K.buildShortXML(L);}}else{K.buildShortXML(L);}}else{K.buildShortXML(L);}}L.closeElement();}});}());(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebPrompt","mstrmojo.array","mstrmojo.mstr.EnumDataType","mstrmojo.mstr.WebAttribute","mstrmojo.mstr.WebElements","mstrmojo.mstr.WebAttributeForm","mstrmojo.mstr.WebExpression","mstrmojo.mstr.WebFilter");mstrmojo.requiresDescs(8407,8408,8759);var R=mstrmojo.array.forEach;var P=mstrmojo.prompt.WebPrompt.STYLES;var O={0:"country",1:"administrative_area_level_1",2:"locality",3:"postal_code"};function J(Y,b){Y=Y||[];var X=(b&&b.prs&&b.prs.GeographicMapping)||0,Z=O[X],a=false,W="";R(Y,function(d){R(d.address_components,function(e){R(e.types,function(f){if(f===Z){W=e.short_name;a=true;return false;}});if(a){return false;}});if(a){return false;}});return W;}var T=mstrmojo.mstr.EnumFunction,L=mstrmojo.mstr.EnumDataType;function S(e){var X=this.dateAnswer,d=X&&X.length,b=1;if(d){var Y=new mstrmojo.mstr.WebAttributeForm({did:this.origin.dateFormID}),g=new mstrmojo.mstr.WebExpression(),Z=new mstrmojo.mstr.WebFilter({expression:g}),a=g.newAQSubExpression(this.origin,Y,T.FunctionIn,L.DataTypeDate,X[0]);for(b;b<d;b++){g.createTimeNode(X[b],a);}var W=this.origin.getElements({shortFilterXML:Z.getXML(),blockBegin:1,blockCount:-1});var f=this,h=e.success;e.success=function(){f.dateAnswer=null;f.answer.set("items",W.items);if(!W.items.length&&e.failure){e.failure(mstrmojo.desc(8759,"No data found for the selected date(s)."));}else{h();}};W.getItems(0,e);}else{this.answer.set("items",[]);this.dateAnswer=null;e.success();}}mstrmojo.prompt.WebElementsPrompt=mstrmojo.declare(mstrmojo.prompt.WebPrompt,null,{scriptClass:"mstrmojo.prompt.WebElementsPrompt",answer:"",preAnswer:"",defAnswer:"",suggestion:null,origin:null,filter:null,dateAnswer:null,getStyle:function D(){var W=this._style;if(!W){var X=this.prs;if(X.DisplayStyle==="Calendar"&&!!this.origin.dateFormID){W=P.CALENDAR;}else{W=P.LIST;}this._style=W;}return parseInt(W,10);},syncDateAnswer:function B(W){if(this.dateAnswer){S.call(this,W);}else{W.success();}},validate:function N(X){this._super(X);X=(X===undefined||X===null)?(this.answer&&this.answer.items):X;var Z=(X&&X.length)||0,Y=parseInt(this.min,10),W=parseInt(this.max,10),a="";if(!isNaN(Y)&&Z<Y){a=mstrmojo.desc(8407,"You have made (#) selections, which is fewer selections than the required (##) for this prompt. Please make more selections.").replace("##",Y).replace("#",Z);}else{if(!isNaN(W)&&Z>W){a=mstrmojo.desc(8408,"You have made (#) selections, which is more selections than are allowed (##) for this prompt. Please remove some selections.").replace("##",W).replace("#",Z);}}if(a){throw new Error(a);}},isAnswerEmpty:function C(W){W=(W===undefined||W===null)?(this.answer&&this.answer.items):W;return !W||(W.length===0);},getAvailable:function V(){var W;if(this.suggestion&&this.suggestion.items.length>0){W=this.suggestion;}else{W=this.origin.getElements();}return W;},canSearch:function U(){return !(this.suggestion&&this.suggestion.items.length>0);},getDisplayValue:function F(){if(this.getStyle()===P.CALENDAR&&this.dateAnswer){return this.dateAnswer.join(",");}var a=this.answer,X=(a&&a.items)||[],Y=0,W=X.length,Z=[];for(Y;Y<W;Y++){Z.push(X[Y].n);}return Z.join(", ");},getAnswerAsDateArray:function(){var W=mstrmojo.date,a=[],Y,X,b=this.dateAnswer,Z=this.answer&&this.answer.items;if(this.getStyle()===P.CALENDAR){if(b){for(Y=0;Y<b.length;Y++){X=W.parseDate(b[Y]);X.n=X.match;a.push(X);}}else{if(Z){for(Y=0;Y<Z.length;Y++){X=W.parseDate(Z[Y].n);X.n=X.match;a.push(X);}}}}return a;},getSearch:function K(Z,Y,W){var X={searchPattern:Z,matchCase:Y};if(W){X.searchTarget=this.searchTarget;}return this.origin.getElements(X);},populate:function G(b){this._super(b);var Z=(b&&b.ans&&b.ans.elms)||[];this.answer=new mstrmojo.mstr.WebElements({items:Z,totalSize:Z.length,blockBegin:1,blockCount:-1});var e=b&&b.orgn;if(e){this.origin=new mstrmojo.mstr.WebAttribute(e);if(this.dataSourcesXML){this.origin.browseConfig.dataSources=this.dataSourcesXML;}var a=this.prs;if(a&&a.DisplayStyle==="GeoLocation"&&a.LookupForm){var Y=a.LookupForm.split("~");this.searchTarget=new mstrmojo.mstr.WebAttribute({did:Y[0],t:Y[1],st:Y[3],n:Y[2]});}this.answer.source=this.origin;}var d=b&&b.suggest;if(d){var X=this.suggestion=new mstrmojo.mstr.WebElements({items:d});}var W=b&&b.fres;if(W){this.filter=new mstrmojo.mstr.WebOI(W);if(e){this.origin.browseConfig.filter=this.filter;}}},populateAnswer:function(W){this.answer.items=mstrmojo.hash.cloneArray(W.ans.elms);},buildAnswerObject:function M(){var W=this._super();W.ans={elms:mstrmojo.hash.cloneArray(this.answer.items)};return W;},prepareAnswer:function I(W){this.syncDateAnswer(W);},setAnswerValue:function A(W){this.validate(W);if(this.getStyle()===P.CALENDAR){this.set("dateAnswer",W);}else{this.answer.set("items",W);}},getAnswersCount:function H(){if(this.dateAnswer){return this.dateAnswer.length;}if(this.answer){return this.answer.items.length;}return 0;},buildShortAnswerXML:function E(W){if(this.dateAnswer){alert("need to sync date answers first.");}else{if(this.answer){this.answer.buildShortXML(W);}}},getGeoTargetValue:function Q(X){var W=this;mstrmojo.GeoLocation.getCurrentAddress({success:function(Y){var Z=J(Y,W);if(X&&X.success){X.success(Z);}},failure:function(Y){if(X&&X.failure){X.failure(Y);}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocXtabModel","mstrmojo.array","mstrmojo.func");var E=2;var D=1,A=2;mstrmojo.DocVisModel=mstrmojo.declare(mstrmojo.DocXtabModel,null,{scriptClass:"mstrmojo.DocVisModel",getAction:function C(H){var F=H[0],G=F&&F.at;var I;if(G){if(G&E){I={h:"onVisSelector",a:this.getSelectAction(F)};}}if(!I){I=this._super(H);}return I;},getSelectAction:function B(K){var N=K.scObjList,M=N.length,G=null;if(M>1){G={multiSelect:true,type:mstrmojo.EnumRWUnitType.GRID,src:K.k,sliceId:1,sid:1,anchor:K.anchor,selectorObjects:[]};var F={};var J="";for(var I=0;I<M;I++){var O=N[I];var P=O.sc.tks.split("\x1E");for(var H=0;H<P.length;H++){var L=P[H];if(!F[L]){F[L]=true;if(J.length>0){J=J+"\x1E"+L;}else{J=L;}}}}for(var I=0;I<M;I++){var O=N[I];G.selectorObjects.push({ck:O.sc.ck,ctlKey:O.sc.ckey,tks:O.sc.tks,eid:O.eid});}if(!G.tks){G.tks=J;}}else{if(M===1){var O=N[0];G={type:mstrmojo.EnumRWUnitType.GRID,src:K.k,sliceId:1,sid:1,ck:O.sc.ck,ctlKey:O.sc.ckey,tks:O.sc.tks,eid:O.eid,anchor:K.anchor};}}return G;}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+(C[B.itemType]?" t_"+C[B.itemType]:"")+(C[B.itemSubType]?" st_"+C[B.itemSubType]:"")+(C[this.itemISC]?" isc":"")+(C[B.itemViewMedia]?" vm_"+C[B.itemViewMedia]:"")+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(F){var E=F[this.itemType],D=F[this.itemSubType],B=" t"+E,C=(parseInt(E,10)===1||parseInt(E,10)===3||parseInt(D,10)===14082)?" st"+D:"",G=F[this.itemISC]?'class="mstrmojo-ListIcon isc"':"",A=(F[this.itemViewMedia]===2048||F[this.itemViewMedia]===8192)?" hvi":"";return'<span class="mstrmojo-ListIcon '+B+C+A+'"><span '+G+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length,B;if(A>0){for(B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+E.substring(0,G)+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemISC:"isc",itemViewMedia:"dvm",useDblSelect:false});}());(function(){mstrmojo.requiresCls("mstrmojo.List","mstrmojo._IsDial");mstrmojo.Dial=mstrmojo.declare(mstrmojo.List,[mstrmojo._IsDial],{scriptClass:"mstrmojo.Dial",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){mstrmojo.css.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);},hideIfEmpty:function(){this.onadd();}},hideIfEmpty:false,onadd:function(A){if(this._super){this._super(A);}if(this.hideIfEmpty){if(this.domNode){this.domNode.style.display=(!this.items||this.items.length==0)?"none":"block";}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var B=mstrmojo.dom;mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",itemTitleField:null,defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,_set_items:function(H,F){var G=this.items;this.items=F||[];return G!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var G=this.value,F=this.selectedIndex,I=this.items||[],J,H;if(F===undefined||(G!==null&&(F===-1||(F!==-1&&I[F]&&I[F][this.itemIdField]!==G)))){F=mstrmojo.array.find(I,this.itemIdField,G);F=(F>-1)?F:this.defaultSelection;this.selectedIndex=F;}else{if(G===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=J=I[this.selectedIndex];if(J){H=J[this.itemField];}else{H=this.defaultText||"";}this.set("text",H);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function D(){var G=this.value,F=-1;if(G!==null){F=mstrmojo.array.find(this.items,this.itemIdField,G);}if(F>-1){this.selectedItem=this.items[F];this.selectedIndex=F;}},togglePopup:function E(){if(this.popupToBody){var I=B.position(this.popupNode,true),H=this.popupRef,F={left:Math.round(I.x)+"px",top:Math.round(I.y)+"px"};if(!H.hasRendered){delete H.slot;F.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(F,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var G=this.popupRef.domNode;if(G){if(this.fixWidth){G.style.width=(this.domNode.offsetWidth-2)+"px";}else{G.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(F){if(B.getButton(F.hWin,F.e)===B.MOUSE_BUTTON.LEFT){this.togglePopup();}},unrender:function C(F){var G=this.popupRef;if(this.popupToBody&&G.hasRendered){G.unrender(false);}if(this._super){this._super(F);}},itemName:function(H,F,G){return mstrmojo.string.encodeHtmlString(H[G.itemField]);},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,onOpen:function(){var H=this.opener,G=H&&H.popupZIndex,I=(H&&H.popupCssClass)||"",F=this.domNode;if(G){F.style.zIndex=G;}if(I){mstrmojo.css.addClass(F,[I]);}if(H&&H.fixWidth){mstrmojo.css.addClass(F,["fix-width"]);}if(H&&H.fixHeight){mstrmojo.css.addClass(F,["fix-height"]);}},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(I,F,G){var H=I[G.itemCSS]||G.parent.opener.item2textCss&&G.parent.opener.item2textCss(I)||"",J=G.parent.opener.itemName;return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+H+'" title="'+I[G.itemTitleField||G.itemField]+'">'+(J(I,F,G)||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",itemTitleField:"this.parent.opener.itemTitleField",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var H=this.parent,I=H.visible,F=H.opener,G=this.selectedItem;if(!F||!G||!I){return ;}F.set("value",G[this.itemIdField]);}}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.TristateCheckBox","mstrmojo._IsInputControl");mstrmojo.CheckBoxDIC=mstrmojo.declare(mstrmojo.TristateCheckBox,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.CheckBoxDIC",markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" tabindex="1" mstrAttach:click,keydown></div>',cssText:"width: 0; margin:0 auto; max-height: 18px; cursor: pointer;",onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);this.set("checked",true);}else{this.set("checked",!this.checked);}},oncheckedChange:function(A){this.set("value",this[this.checked?"onValue":"offValue"]);},preBuildRendering:function(){this._super();var A=this.dic.vls;this.offValue=A[0].v;this.onValue=A[1].v;this.grayed=(this.onValue!==this.value)&&(this.offValue!==this.value);this.checked=(this.onValue===this.value);},postBuildRendering:function(){var B=this.domNode,D=B.style,C=this.openerStyle,A;this._super();D.height=C.ih+"px";if(C.iw){A=Math.floor((C.iw-B.clientWidth)/2);D.marginLeft=D.marginRight=A>0?A+"px":"auto";}},onkeydown:function(B){var A=B.hWin,C=B.e||A.event;if(C.keyCode===mstrmojo.Enum_Keys.SPACE){mstrmojo.dom.preventDefault(A,C);this.onclick();}},focus:function(){this.domNode.focus();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.Image","mstrmojo.Label","mstrmojo.Box","mstrmojo.Button","mstrmojo.android.ui.Button","mstrmojo.android.ui.Label","mstrmojo.dom","mstrmojo.css");var G=mstrmojo.Image.baseCssClass+" prv",J=mstrmojo.dom,M=mstrmojo.css;function F(S,Q){var R=S.imgNode;if(R){var T=S.imgNode.style;T[J.CSS3_TRANSITION_DURATION]=Q?"300ms":0;T.opacity=Q;}}function B(){var R=this.imgPreview.params,Q=R&&R.item;if(Q){this.onOpenItem();mstrmojo.all[R.ctrlId].executeItem(Q);}}function D(){if(mstrApp.isTablet()){this.updateScroller();return ;}var f=this._scrollStyle,U=this.scrollNode,b=U.parentNode,Q=b.parentNode;if(!f){var W=M.getComputedStyle(Q),k=M.getComputedStyle(U);this._scrollStyle=f={p:parseInt(W.paddingLeft,10)+parseInt(W.paddingRight,10),b:0,sp:parseInt(k.paddingLeft,10)+parseInt(k.paddingRight,10)};}var a="px",S=f.p,R=f.b,V=f.sp,l=parseInt(this.height,10),h=parseInt(this.width,10),T=this.staticNode,X=T.offsetHeight,e=T.offsetWidth,d=0,Y=(h-S),g=(l-X-S);if(!this.controller.orientation){d=e;Y=(h-e-S);g=l-S;}var Z=Q.style;Z.left=d+a;Z.width=Y+a;Z.height=g+a;var j=b.style;j.width=(Y-R)+a;j.height=(g-R)+a;U.style.width=(Y-R-V)+a;this.updateScroller();}var C=mstrmojo.android.ui.PropertiesView=mstrmojo.declare(mstrmojo.Container,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.android.ui.PropertiesView",markupString:'<div id="{@id}" class="mstrmojo-PropertiesView {@cssClass}" style="{@cssText}"><div class="mstrmojo-PropertiesViewStatic"></div><div class="mstrmojo-PropertiesViewScroll"><div><div></div></div></div></div>',markupSlots:{staticNode:function(){return this.domNode.firstChild;},scrollNode:function(){return this.domNode.lastChild.firstChild.firstChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},children:[{scriptClass:"mstrmojo.Image",slot:"staticNode",alias:"imgPreview",cssClass:"prv",visible:false,onload:function(){F(this,1);}},{scriptClass:"mstrmojo.Box",slot:"staticNode",cssClass:"btns",alias:"btns",children:[mstrmojo.android.ui.Button.newButton(mstrmojo.desc(1900,"View"),function(){B.call(this.parent.parent);},{alias:"btnView",cssClass:"mstrmojo-GlowButton",visible:false}),{scriptClass:"mstrmojo.android.ui.Label",alias:"txView",cssClass:"txOffline",visible:false,txData:{},ontxDataChange:function H(){if(!this.txData){this.set("visible",false);this.txData={};}},touchTap:function(){var Q=mstrApp.getTransactionNotificationController(),R=Q&&Q.rootCtrl.getCurrent();if(R){if(R.ctrlType!==2048){R=R.getController("ctrlType",2048);}Q.showNotificationBoard(R||Q.rootCtrl,this.did,this.n);}}}]},{scriptClass:"mstrmojo.Label",slot:"scrollNode",alias:"lblName",cssClass:"nm",visible:false},{scriptClass:"mstrmojo.Label",slot:"scrollNode",alias:"lblDesc",cssClass:"ds"},{scriptClass:"mstrmojo.Label",slot:"scrollNode",alias:"lblCachedOn",cssClass:"ch",text:""}],afterViewVisible:function A(){D.call(this);},rootOrientationChange:function O(){D.call(this);},updateScrollerConfig:function I(){var Q=this._super(),S=this.scrollNode;Q.scrollEl=S;Q.noHScroll=true;Q.origin={x:0,y:0};var T=Math.max(S.offsetHeight-S.parentNode.clientHeight,0);var R=Q.vScroll=(T!==0);if(R){Q.offset={y:{start:0,end:T}};}else{Q.offset=null;}M.toggleClass(this.domNode,"can-scroll",R);return Q;},onOpenItem:mstrmojo.emptyFn,updateView:function P(f){var j=this.imgPreview,e=this.lblName,T=this.lblDesc,W=this.lblCachedOn,R=this.btns.btnView,V=this.btns.txView,d=f.item,S="visible",U="text";var a=f.desc||f.defaultMsg;T.set(U,a);T.set(S,!!a);if(!d){j.set(S,false);e.set(S,false);W.set(S,false);R.set(S,false);V.set(S,false);delete j.params;}else{var Q=mstrmojo.android.ui.PropertiesView.getPreviewSizes();if(mstrApp.isTablet()&&this.controller.orientation){Q.reverse();}mstrMobileApp.getScreenShot(this.id,d.pid||mstrApp.getCurrentProjectId(),d.did,Q[0].h,Q[0].w);var Z=j.params;if(!Z||Z.did!==f.did){j.set("cssClass",G+" i"+f.st);j.set("src","");}j.params=f;j.set(S,true);var Y=f.ttl;e.set(U,Y);e.set(S,!!Y);var h=f.cached;W.set(U,h);W.set(S,(h!==undefined));if(f.avail){R.set(S,true);var g=f.did;if(g){var b=mstrApp.getTransactionNotificationController(),X=(b&&b.hasTransactionQueue(g));V.set("did",g);V.set("n",f.ttl);V.set("visible",X);if(X){b.addWidgetListener(g,V);}}}else{R.set(S,false);V.set(S,false);}}D.call(this);},onPreviewReady:function E(R){if(R){var Q=this.imgPreview;if(Q.src!==R){F(Q,0);Q.domNode.className=G;Q.set("src",R);}}}});var N={160:{h:150,w:200},213:{h:150,w:200},240:{h:225,w:300},320:{h:300,w:400},480:{h:300,w:400}},L={160:{h:334,w:400},213:{h:334,w:400},240:{h:501,w:600},320:{h:668,w:800}},K={160:{h:337,w:400},213:{h:337,w:400},240:{h:506,w:930},320:{h:674,w:1240}};C.getPreviewSizes=function(){var R=[],Q=mstrMobileApp.getDeviceDPI();if(mstrApp.isTablet()){R.push(K[Q]);R.push(L[Q]);}else{R.push(N[Q]);}return R;};}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._SupportsEllipsisText","mstrmojo.android.ui.Label","mstrmojo.android.ui.Menu","mstrmojo.css");var I=mstrmojo.css,B="oversize",E="multiline",K=[B,E];mstrmojo.android.ui.TitleLabel=mstrmojo.declare(mstrmojo.Container,[mstrmojo._SupportsEllipsisText],{scriptClass:"mstrmojo.android.ui.TitleLabel",markupString:'<div id="{@id}" class="mstrmojo-AndroidTitleLabel {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},children:[{scriptClass:"mstrmojo.android.ui.Label",alias:"lbl",touchTap:function(){mstrApp.closeAllDialogs();var P=this.parent,O=P.list,M=O.items,N=M&&M.length;if(!O.visible&&N){if(P._isDropDown&&N===2){O.singleSelect((!O.selectedIndex)?1:0);}else{O.set("visible",true);if(mstrMobileApp&&mstrMobileApp.genMapPreview){mstrMobileApp.genMapPreview();}}}}},{scriptClass:"mstrmojo.android.ui.Menu",alias:"list",selectionPolicy:"reselect",visible:false,setMaxWidth:true}],addChildren:function L(O,M,N){this._super(O,M,N);this.list.attachEventListener("selectionChange",this.id,function(P){var Q=P.added,S=this.list;S.set("visible",false);if(mstrMobileApp&&mstrMobileApp.showMapView){mstrMobileApp.showMapView(0);}if(!Q){return ;}var R=S.items[Q[0]];if(R.isTitle){return ;}if(this._isDropDown){this.setText(R.n);}this.raiseEvent({name:"listSelectionMade",item:R});});},onRender:function J(){var M=this._testLbl=this.lbl.domNode.cloneNode(false),N=this.domNode;mstrmojo.css.addClass(M,"test");M.removeAttribute("onclick");M.removeAttribute("id");N.insertBefore(M,N.lastChild);},unrender:function H(M){delete this.testLbl;this._super(M);},setText:function D(M){this.checkTextFit(M);},checkTextFit:function A(R){var M=this.lbl,T=M.domNode,P=this._testLbl,Q=this._compOffset;R=(R===undefined)?M.text:R;if(Q===undefined){var N=I.getComputedStyle(T);Q=parseInt(N.paddingLeft,10)+parseInt(N.paddingRight,10);this._compOffset=Q;}P.style.width=(T.parentNode.offsetWidth-Q)+"px";P.innerHTML=R;var O=T.offsetHeight,S=(P.offsetHeight>O);I.toggleClass(T,K,S);M.set("text",R);if(S){if(!this.ellipsize("ttl",T,true)){I.addClass(P,B);P.innerHTML=T.innerHTML;if(P.offsetHeight===O){I.removeClass(T,E);}I.removeClass(P,K);}}},setListItems:function G(M,P){var Q=(M&&M.length),N=(P!==undefined),O=this.list;I.toggleClass(this.domNode,"has-items",Q);this._isDropDown=!!N;if(Q){if(!N){M=[{n:mstrmojo.desc(9850,"RECENTLY OPENED"),isTitle:true}].concat(M);}else{this.setText(M[P].n);}}O.set("items",M);if(N){O.singleSelect(P,true);}},clearListItems:function C(){var N=this.list,M={items:[].concat(N.items),idx:N.selectedIndex};mstrmojo.css.removeClass(this.domNode,"has-items");N.set("items",[]);return(M.idx>-1)?M:null;},reset:function F(){this.list.set("visible",false);this.checkTextFit();}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui.Button");var B=mstrmojo.android.ui.Button.newButton;mstrmojo._CanMakeServerProxyRequests=mstrmojo.provide("mstrmojo._CanMakeServerProxyRequests",{_mixinName:"mstrmojo._CanMakeServerProxyRequests",cancelRequests:function A(){return this.serverProxy.cancelRequests();},serverRequest:function C(J,K,E){var I=this;try{K=K||{};E=E||{};E.projectId=E.projectId||this._currentProjId;E.mobileConfig=this.getConfiguration();var F=E.src||(arguments.callee&&arguments.callee.caller.name);var D=function(L){if(E[L+"Wait"]){I.hideMessage();}if(E[L+"Progress"]){mstrMobileApp.hideProgress();}};if(!E.silent){K=mstrmojo.func.wrapMethods(K,{submission:function(L,M){if(!M){if(E.showWait){I.showMessage();}if(E.showProgress){mstrMobileApp.showProgress(E.progressStateText,!!E.useRefreshProgress);}}},failure:function(L){D("show");if(L&&L.requireDeviceCertificate){var M=function(){try{mstrApp.rootController.spawn(mstrApp.controllerFactory.newController("Settings",{}),{viewFn:"getCertificateAuthenticationFieldsView"});}catch(N){L.method=F;mstrApp.handleError(N,I);}};mstrmojo.confirm("Missing/invalid/expired device certificate detected. Would you like to get a new one?",{confirmBtn:{fn:M}});return ;}if(!(E.noErrorMessage||L.noErrorMessage)){L.method=F;mstrApp.handleError(L,I);}},complete:function(){D("hide");},canceled:function(){D("show");}});}try{I.serverProxy.request(K,J,!!E.override,E);}catch(H){K.failure(H);}}catch(G){mstrApp.handleError(G,this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.hash","mstrmojo.array","mstrmojo.date","mstrmojo.Stepper","mstrmojo.android.ui.Button","mstrmojo.DateStepperContentProvider","mstrmojo.NumStepperContentProvider");var U=mstrmojo.array,Q=mstrmojo.date,L=mstrmojo.hash,R=mstrmojo.android.ui.Button.newButton,I=mstrmojo.expr.DTP,D={interval:1},G={min:1,max:12,interval:1,value:12},N={min:0,max:23,interval:1,value:0},E={min:0,max:59,interval:1};function C(){var W=this.dtp,Z=this.stepperClass,X=this[this.valueField],M=[],Y,H;if(this._hasDate){M.push({scriptClass:Z,slot:"monthNode",alias:"monthStepper",title:mstrmojo.desc(871,"month"),provider:this.dateProvider.monthCP},{scriptClass:Z,slot:"dayNode",alias:"dayStepper",title:mstrmojo.desc(872,"day"),provider:this.dateProvider.dayCP},{scriptClass:Z,slot:"yearNode",alias:"yearStepper",title:mstrmojo.desc(873,"year"),provider:this.dateProvider.yearCP});}if(this._hasTime){M.push({scriptClass:Z,slot:"hourNode",alias:"hourStepper",provider:this.hourProvider},{scriptClass:Z,slot:"minNode",alias:"minStepper",provider:this.minProvider});}if(!this.hideSwitchers){if(W!==I.TIME){Y=(X&&X.date)?Q.formatDateInfo(X.date,mstrmojo.locales.datetime.DATEOUTPUTFORMAT):mstrmojo.desc(2052,"Date");M.push(R(Y,function(){this.parent.toDateView();},{alias:"dateToggle",slot:"switcherNode",cssClass:"",selected:true}));}if(W!==I.DATE){H=(X&&X.time)?Q.formatTimeInfo(X.time,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT):mstrmojo.desc(2170,"Time");M.push(R(H,function(){this.parent.toTimeView();},{alias:"timeToggle",slot:"switcherNode",cssClass:"",selected:W==I.TIME}));}}if(this._hasDate){this.viewCssClass="dateView";}else{if(this._hasTime){this.viewCssClass="timeView";}}this.addChildren(M);}function P(){var a=[this.valueField,"min","max"],M=L.copy(D),Z=this.is24HourMode?L.copy(N):L.copy(G),Y=L.copy(E),X=this[this.valueField],H=X&&X.time,W=this;U.forEach(a,function(b){M[b]=L.copy(W[b]);});if(this._hasDate){this.dateProvider=new mstrmojo.DateStepperContentProvider({item:M,valField:this.valueField,canLoop:true,onTraverse:function(){W.updateDate();}});}if(this._hasTime){if(this.minuteInterval!==undefined){Y.interval=this.minuteInterval;}delete this.minuteInterval;if(H){if(!this.is24HourMode){Z.value=H.hour%12||12;this.set("meridiem",(H.hour<12));}else{Z.value=H.hour;}Y.value=H.min;}this.hourProvider=new mstrmojo.NumStepperContentProvider({item:Z,valField:"value",canLoop:true,onTraverse:function(){W.updateTime();}});this.minProvider=new mstrmojo.NumStepperContentProvider({item:Y,valField:"value",canLoop:true,renderer:{render:function(b){return String(b).length===1?("0"+b):b;}},onTraverse:function(){W.updateTime();}});}}mstrmojo.DateTimePicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DateTimePicker",value:null,min:null,max:null,meridiem:true,hideSwitchers:false,minuteInterval:null,is24HourMode:false,dtp:mstrmojo.expr.DTP.TIMESTAMP,viewCssClass:"",valueField:"value",stepperClass:"mstrmojo.Stepper",markupString:"<div id='{@id}' class='mstrmojo-DateTimePicker' style='{@cssText}'><div class='switcher'></div><div class='{@viewCssClass}'><span class='stepNode month'></span><span class='stepNode day'></span><span class='stepNode year'></span><span class='stepNode hour'></span><span class='stepNode min'></span><span class='meridiem' mstrAttach:click></div></div></div>",markupSlots:{switcherNode:function(){return this.domNode.firstChild;},viewNode:function(){return this.domNode.children[1];},monthNode:function(){return this.domNode.children[1].children[0];},dayNode:function(){return this.domNode.children[1].children[1];},yearNode:function(){return this.domNode.children[1].children[2];},hourNode:function(){return this.domNode.children[1].children[3];},minNode:function(){return this.domNode.children[1].children[4];},meridiemNode:function(){return this.domNode.children[1].children[5];}},markupMethods:{onmeridiemChange:function(){if(this.is24HourMode){this.meridiemNode.display="none";}else{this.meridiemNode.innerHTML=this.meridiem?mstrmojo.locales.datetime.AM_NAME:mstrmojo.locales.datetime.PM_NAME;}},onviewCssClassChange:function(){this.viewNode.className=this.viewCssClass;}},init:function O(M){this._super(M);var H=this.dtp;this._hasDate=(H===I.DATE||H===I.TIMESTAMP);this._hasTime=(H===I.TIME||H===I.TIMESTAMP);P.call(this);C.call(this);},getDateTime:function B(){return{date:this.getDate(),time:this.getTime()};},getDate:function F(){if(this._hasDate){var H=this.dateProvider.curVal;return{year:H.getFullYear(),month:H.getMonth()+1,day:H.getDate()};}return null;},getTime:function S(){if(this._hasTime){return{hour:!this.is24HourMode?Q.capitalHour(this.hourProvider.curVal,this.meridiem?" AM":" PM"):this.hourProvider.curVal,min:this.minProvider.curVal};}return null;},getDateTimeString:function K(){var H="";if(this._hasDate){H+=Q.formatDateInfo(this.getDate(),mstrmojo.locales.datetime.DATEOUTPUTFORMAT);}if(this._hasDate&&this._hasTime){H+=" ";}if(this._hasTime){H+=Q.formatTimeInfo(this.getTime(),mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return H;},updateDate:function A(){if(this.hasRendered){var H=this;U.forEach(["year","month","day"],function(M){H[M+"Stepper"].updateDisplayText();});}if(this.dateToggle){this.dateToggle.set("text",Q.formatDateInfo(this.getDate(),mstrmojo.locales.datetime.DATEOUTPUTFORMAT));}},updateTime:function J(){if(this.timeToggle){this.timeToggle.set("text",Q.formatTimeInfo(this.getTime(),mstrmojo.locales.datetime.TIMEOUTPUTFORMAT));}},toDateView:function T(){this.set("viewCssClass","dateView");this.dateToggle.set("selected",true);var H=this.timeToggle;if(H){H.set("selected",false);}},toTimeView:function V(){this.set("viewCssClass","timeView");var H=this.dateToggle;if(H){H.set("selected",false);}this.timeToggle.set("selected",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog","mstrmojo.android.ui.Button");mstrmojo.requiresDescs(221);var C=mstrmojo.android.ui.Button.newButton,B=0,A=1,E=2;mstrmojo.android.nativedialog.ListDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.ListDialog",type:1,choiceMode:A,populateConfig:function D(){var G=this.children[0];this.config.items=G.items;this.config.choiceMode=this.choiceMode;switch(this.choiceMode){case A:this.buttons=[C(mstrmojo.desc(221,"Cancel"))];if(G.selectedIndex!==undefined){this.config.selectedIndex=G.selectedIndex;}break;case E:if(G.selectedIndices!==undefined){this.config.selectedIndices=G.selectedIndices;}break;}this._super();},getItem:function F(G){return this.config.items[G];}});mstrmojo.android.nativedialog.ListDialog.CHOICE_MODES={NONE:B,SINGLE:A,MULTIPLE:E};}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.Popup","mstrmojo.MenuItem");var G="mstrFilterPanelMenu",L="mstrmojo.Box",E="mstrmojo-Menu-Box";var B=function(){var N=mstrmojo.all[G],M=N.fps;M.clearAllFilter();M.applyBufferedSlices();N.close();};var C=function(){var N=mstrmojo.all[G],M=N.fps;if(M&&M.applyBufferedSlices){M.applyBufferedSlices();}N.close();};var F=function(){H(false);};var I=function(){H(true);};var A=function(){var O=mstrmojo.all[G],N=O.fps,M=!O.autoSubmit;N.applyBufferedSlices();N.model.updateUnitFormat(N,1,{FormattingLayout:{CtlAutoSubmit:(M?1:0)}},{success:function(){var P=N.parent;O.set("autoSubmit",M);O.fps.defn.set("cas",M);P.buttonbar.applyNow.set("visible",!M);P.buttonbar.resetBtn.set("visible",!M);P.adjustFPHeight2Fit();mstrmojo.css.toggleClass(P.buttonbarNode,"hide",M);mstrmojo.css.toggleClass(P.toolbarNode,["cas"],!M);}},{params:{suppressData:true}});O.close();};function H(O){var P=mstrmojo.all[G],N=P.fps,U=mstrmojo.DocPortlet,M=O?U.ST_RESTORE:U.ST_MIN;if(!N||!N.children){return ;}var T=N.model,R=[];for(var S in N.children){var V=N.children[S];if(!V.children||!V.selected){continue;}for(var Q in V.children){var W=V.children[Q];if(typeof (W.defn.ttl)!=="undefined"){R.push(W.changeWindowState(M));}}}if(R.length){T.getDataService().submitUpdates(R,{},{preserveUndo:true,params:{suppressData:true}});}P.close();}function J(P,N,M){var O={scriptClass:"mstrmojo.MenuItem",text:P,cssClass:"mstrmojo-InteractiveButton",onclick:N,bindings:M};return O;}function K(P,N,M){M=M||{};M.pressed="mstrmojo.all['"+G+"'].autoSubmit";M.iconClass="this.pressed?'pressed':''";var O=J(P,N,M);O.onpressedChange=function(){if(this.domNode){mstrmojo.css.toggleClass(this.domNode,"pressed",this.pressed);}};return O;}mstrmojo.FilterPanelMenu=mstrmojo.registry.ref({id:G,slot:"popupNode",scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-Menu",shadowNodeCssClass:"mstrmojo-Menu-shadow",contentNodeCssClass:"mstrmojo-Menu-content",locksHover:true,autoSubmit:true,onOpen:function D(){var R=this.opener,Z=R&&R[this.slot],Y=mstrmojo.dom.position(Z),a=Y.y||0,T=this.cmPos,V,S,X;if(T){V=T.x;S=T.y-a;}else{var N=this.openerButton.domNode;X=mstrmojo.boxmodel.offset(N,Z);V=X.left;S=X.top+((N&&N.offsetHeight)||0);}var Q=mstrmojo.dom.windowDim(),O=this.domNode;var P=O.offsetHeight,U=Q.h-a;X=Math.max(0,S+P-U);this.set("top",S-X+"px");var W=O.offsetWidth,M=Q.w;X=Math.max(0,V+W-M);this.set("left",V-X+"px");this.set("autoSubmit",this.fps.defn.cas);},children:[{scriptClass:L,bindings:{},cssClass:E,children:[J(mstrmojo.desc(8974,"Clear all filters"),B,{}),J("Apply Now",C,{visible:"!mstrmojo.all['"+G+"'].autoSubmit",enabled:"mstrmojo.all['"+G+"'].fps.applyEnabled"})]},{scriptClass:L,cssClass:E,bindings:{},children:[J(mstrmojo.desc(8970,"Expand all"),I,{}),J(mstrmojo.desc(8971,"Collapse all"),F,{})]},{scriptClass:L,cssClass:E,bindings:{},children:[K(mstrmojo.desc(1996,"Auto-Apply changes"),A,{})]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ToggleDIC","mstrmojo._TouchGestures","mstrmojo.android._HasPreviewButton","mstrmojo.url","mstrmojo.array");mstrmojo.android.inputControls.ToggleDIC=mstrmojo.declare(mstrmojo.ToggleDIC,[mstrmojo._TouchGestures,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.ToggleDIC",useAnimation:false,init:function C(D){this._super(D);mstrmojo.array.forEach(this.dic.vls,function(E){E.n=mstrmojo.url.getAbsoluteURL(E.n,mstrApp.getConfiguration().getCurrentProjectWebServerUrl());});},touchTap:function B(){this.onclick();},onclick:function A(){this._super();this.applyChanges();},onblur:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui.ScrollableTabs","mstrmojo.css","mstrmojo.dom","mstrmojo.hash");var A=mstrmojo.css,D=mstrmojo.dom,F=mstrmojo.hash;mstrmojo.android.ui.LayoutSelector=mstrmojo.declare(mstrmojo.android.ui.ScrollableTabs,null,{scriptClass:"mstrmojo.android.ui.LayoutSelector",init:function E(H){this._super(H);var G=this.markupMethods=F.copy(this.markupMethods);G.onvisibleChange=function(){var L=this._hFade;if(L){window.clearTimeout(L);delete this._hFade;}var J=this.items;if(!J||J.length<=1){return ;}var I=!!this.visible,K=this.domNode;if(I){K.style.marginTop=0;}A.toggleClass(K,"open",I);};},initiateFade:function C(G){var H=this.id;this._hFade=window.setTimeout(function(){var I=mstrmojo.all[H];if(I){I.set("visible",false);}},G||2000);},postBuildRendering:function B(){var G=this.id;D.attachEvent(this.domNode,"webkitTransitionEnd",function(){var H=mstrmojo.all[G];if(!H.visible){H.domNode.style.marginTop="-10000px";}});return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller","mstrmojo.css");var F=mstrmojo.css;var C;mstrmojo.ui.CheckList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.CheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" mstrAttach:click,contextmenu><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{scrollboxNode:function A(){return this.domNode.firstChild;},itemsContainerNode:function I(){return this.domNode.firstChild.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onorientationChange:function L(){F.toggleClass(this.domNode,"horizontal",this.orientation!=="v");},onmultiSelectChange:function J(){F.toggleClass(this.domNode,"radio",!this.multiSelect);},onenabledChange:function H(){F.toggleClass(this.domNode,"disabled",!this.enabled);}},multiSelect:true,orientation:"v",minimumSelectCnt:0,icnCss:"icn",items:null,getItemMarkup:function K(M){if(!C){C=this._super(M).replace(">{@en@n}<",'title="{@tt}"><span>{@en@n}</span><');}return C;},getItemProps:function G(O,M){var N=this._super(O,M);var P=O.css;if(P){N.addCls(P);}N.tt=O.tt||"";N.n=O.n||" ";return N;},setupScrollNodes:function D(){this.scrollNode=this.scrollboxNode;},preselectionChange:function B(N){var O=this.minimumSelectCnt,M=this.getSelectedItems().length,P=N.removed;if(P&&O){if(M<O){this.select(P,true);return false;}}F.toggleClass(this.itemsContainerNode,"disableSelected",M<=O);return true;},buildRendering:function E(){this._super();F.toggleClass(this.itemsContainerNode,"disableSelected",this.getSelectedItems().length<=this.minimumSelectCnt);}});mstrmojo.ui.CheckList.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller");mstrmojo.ui.ScrollableList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableList",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function C(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function E(){return this.domNode.firstChild;}},postBuildRendering:function B(){if(this.renderOnScroll){if(!this.onScrollEnd){var G=this.id;this.onScrollEnd=function F(){var H=mstrmojo.all[G];H.doScroll();H.updateScrollbars();};}}if(this._super){this._super();}},renderBlockSize:150,renderIndex:0,onScrollEnd:undefined,doScroll:function A(){if(this.renderOnScroll){var G,H=this.scrollNode,F=(this.renderIndex+1)*this.renderBlockSize;if(F>=this.items.length){return ;}if(mstrmojo.dom.position(H).h===H.scrollHeight){G=this.domNode;}else{G=H;}if((mstrmojo.dom.position(G).h+G.scrollTop)>=G.scrollHeight){this.renderIndex++;var I=this._buildItemsMarkup(this.renderIndex*this.renderBlockSize,((this.renderIndex+1)*this.renderBlockSize)-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");G.innerHTML+=I;this.itemsContainerNode.innerHTML+=I;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.android.ui._CanBeFullScreen","mstrmojo.array","mstrmojo.css","mstrmojo.android.ui.ActionToolbarButtons","mstrmojo.android.ui.Menu","mstrmojo.android.EnumMenuOptions","mstrmojo._TouchGestures");var N=mstrmojo.array,T=mstrmojo.css,M=1,F=2,E=mstrmojo.android.EnumMenuOptions,K=E.SHARE,J=E.ANNOTATION;function R(){return mstrApp.isActionBarNative();}function S(V){if(!this.active){return ;}var W=V.added,Z=V.src,X=W&&Z.items[W[0]],Y=this.menu;if(!X){return ;}if(X.isMenu){if(mstrMobileApp&&mstrMobileApp.genMapPreview){mstrMobileApp.genMapPreview();}Y.set("visible",!Y.visible);}else{if(X.grp!==K&&X.grp!==J){mstrApp.closeAllDialogs();}if(Z===Y){Y.set("visible",false);if(mstrMobileApp&&mstrMobileApp.showMapView){mstrMobileApp.showMapView(0);}}mstrmojo.all[this._actController].handleMenuItem(X.grp,X.act);}}function G(){var X=[],W=this.icons,V=this.groups,Y=this.actions;N.forEach(this.labels,function(a,Z){X.push({cls:"ic"+W[Z],grp:parseInt(V[Z],10),act:parseInt(Y[Z],10),n:a});});return X;}function Q(e){var a=[],d=this.icons,V=this.groups,W=this.actions,Z=this.labels;N.forEach(this.types,function(g,f){if(g===F){a.push({cls:"ic"+d[f],act:parseInt(W[f],10),grp:parseInt(V[f],10),idx:f,n:Z[f]});if(a.length===e){return false;}}});var X;for(X=a.length-1;X>=0;X--){var Y=a[X],b=Y.idx;delete Y.idx;this.types.splice(b,1);this.groups.splice(b,1);this.labels.splice(b,1);this.actions.splice(b,1);this.checked.splice(b,1);this.icons.splice(b,1);}return a;}var A=mstrmojo.android.ui.ActionToolbar=mstrmojo.declare(mstrmojo.Box,[mstrmojo.android.ui._CanBeFullScreen],{scriptClass:"mstrmojo.android.ui.ActionToolbar",active:true,init:function P(V){this._super(V);T.addWidgetCssClass(this,"mstrmojo-ActionToolbar");},children:[{scriptClass:"mstrmojo.android.ui.ActionToolbarButtons",alias:"buttons"},{scriptClass:"mstrmojo.android.ui.Menu",alias:"menu",visible:false}],addChildren:function L(X,V,W){this._super(X,V,W);N.forEach(this.children,function(Y){Y.attachEventListener("selectionChange",this.id,S);},this);},setActions:function B(Y,V){var X;var W=V.getBtnCount(V.minBtnCount,V.maxBtnCount);if(W){X=Q.call(V,W);}if(V.size()){if(R()){mstrMobileApp.setSysMenu(Y,V.groups,V.labels,V.actions,V.checked,V.icons);}else{X.push({cls:"menu",isMenu:true,n:"Menu"});this.menu.set("items",G.call(V));}}this.buttons.set("items",X);this._actController=Y;this.raiseEvent("renderComplete");this.resetFullScreen();},onactiveChange:function I(){T.toggleClass(this.domNode,"inactive",!this.active);},reset:function U(){this.menu.set("visible",false);},onEnterFullScreen:function D(){this.reset();},propogateMenuVisibleChange:function C(V){mstrmojo.touchManager.raiseEvent({name:"actionBarMenuStateChange",value:V});}});function O(Y,W,V,a,Z,X){this.types.push(Y);this.groups.push(String(W));this.labels.push(String(V));this.actions.push(String(a));this.checked.push(String(!!Z));this.icons.push(X||-1);}A.newToolbarConfig=function H(){var W={addMenuItem:function Y(d,b,g,f,e){O.call(this,M,d,b,g,f,e);this.mnuCount++;},addToolbarBtn:function a(d,b,g,f,e){O.call(this,F,d,b,g,f,e);this.btnCount++;},getBtnCount:function X(f,d){var e=this.btnCount;if(this.mnuCount){e++;}var b=Math.min(e,d);if(b<f){return 0;}if(b===d){if(!R()&&(this.mnuCount||(e>b))){b--;}}return b;},clear:function V(){this.btnCount=0;this.mnuCount=0;this.maxBtnCount=5;this.minBtnCount=1;this.types=[];this.groups=[];this.labels=[];this.actions=[];this.checked=[];this.icons=[];},size:function Z(){return this.labels.length;}};W.clear();return W;};}());(function(){mstrmojo.requiresCls("mstrmojo.ListBoxBase","mstrmojo._HasScrollbox");mstrmojo.ListBox=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._HasScrollbox],{scriptClass:"mstrmojo.ListBox",renderAllItems:false,renderPause:10,numPagesRendered:0,pageStatus:null,_rc:null,_totalPages:null,_rh:null,_rhMin:8,_rowsPerPage:null,_defaultRowsPerPage:100,_minRowsPerPage:100,_pageHeight:null,buildRendering:function K(){if(this.renderAllItems===true){this._super();return true;}this._initPageSettings();var L=this.items;this.items=this._rc?this.items.slice(0,Math.min(this._rowsPerPage,this._rc)):[];this._super();this.items=L;this.postRenderPage(0,true);if(this._rc>this._rowsPerPage){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]=(this._rh*this._rc)+"px";if(!this.connectedScrollbox){this.connectScrollbox(this);this.connectedScrollbox=true;}}else{this.postRenderingCleanup();}},_initPageSettings:function E(){var L=this.items;this._rc=(L&&L.length)||0;var N=this.itemRenderer;this._rh=(N&&N.rowHeight)||this._rhMin||3;var M=this._defaultRowsPerPage;if(!isNaN(this.scrollboxHeight)){M=Math.ceil(this.scrollboxHeight/this._rh);M=Math.max(M,this._minRowsPerPage);}this._rowsPerPage=M;this._totalPages=Math.ceil(this._rc/this._rowsPerPage);this._pageHeight=this._rh*this._rowsPerPage;this._pageStatus=new Array(this._totalPages);this._numPagesRendered=0;},onscroll:function J(){if(!this._renderingRows){this._startPageRenderThread();}},_startPageRenderThread:function F(){this.renderingRows=true;var M=this,L=this._renderTimer=self.setInterval(function(){if(!M){self.clearInterval(L);return ;}var N=M.getPagesToRender();if(N.length>0){M.renderPages(N);}else{M.renderingRows=false;self.clearInterval(M._renderTimer);delete M._renderTimer;if(M.isRenderingComplete()){M.postRenderingCleanup();}M=null;}},this.renderPause);},getPagesToRender:function I(){var P=[],Z=this._pageHeight,b=null,W=this._pageStatus,Y=this;function R(d){var e=W[d];if(e&&e.filled){if(!e.height){if(!b){b=Y.itemsNode.tBodies;}e.height=b[d].offsetHeight;}return e.height;}else{return Z;}}var a=0,S=null,O=null,M=this.scrollboxTop;for(var V=0,X=this._totalPages;V<X;V++){a+=R(V);if(a>=M){S=V;break;}}if(S==null){S=O=X-1;}else{var L=this.scrollboxBottom;for(var T=S+1;T<X;T++){if(a>=L){O=T-1;break;}a+=R(T);}}if(O==null){O=X-1;}for(var N=this._numPagesRendered;N<S;++N){P.push({idx:N,fill:false});}for(var Q=S;Q<=O;++Q){var U=W[Q];if(!U||!U.filled){P.push({idx:Q,fill:true});}}return P;},renderPages:function D(M){for(var N=0,L=M.length;N<L;++N){this.renderPage(M[N].idx,M[N].fill);}},renderPage:function B(R,M){var V=this._pageStatus,P=(this._numPagesRendered>=R+1);if(P){if(!M||(V[R]&&V[R].filled)){return ;}}var U=this._rowsPerPage,L=R*U,N=Math.min(L+U,this._rc)-1;var T=this.tempTableCont;if(!T){T=this.tempTableCont=this.domNode.ownerDocument.createElement("div");}var Q=M?this._buildItemsMarkup(L,N,'<table><tbody idx="'+R+'">',"</tbody></table>",this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join(""):'<table><tbody idx="'+R+'"><tr><td style="height:'+this._pageHeight+'px">&nbsp;</td></tr></tbody></table>';T.innerHTML=Q;var O=T.firstChild.tBodies[0],S=this.itemsNode;if(!P){S.appendChild(O);}else{S.replaceChild(O,S.tBodies[R]);}this.postRenderPage(R,M);},postRenderPage:function G(M,O){if(M+1>this._numPagesRendered){this._numPagesRendered=M+1;}var L=this._pageStatus,N=L[M];if(!N){N=L[M]={};}if(O){N.filled=true;}if(M>0&&M==this._totalPages-1){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]="";}},isRenderingComplete:function C(){if(this._numPagesRendered==this._totalPages){for(var L=this._pageStatus,M=this._totalPages-1;M>-1;M--){if(!L[M]||!L[M].filled){return false;}}return true;}return false;},postRenderingCleanup:function A(){if(this.connectedScrollbox){this.disconnectScrollbox(this);this.connectedScrollbox=false;}},unrender:function(L){this.postRenderingCleanup();this._super(L);},refresh:function H(){if(!this.hasRendered){return ;}var N=this.domNode,L=N&&N.parentNode;if(!this.parent&&L){var M=N.ownerDocument.createElement("span");L.insertBefore(M,N);}this.unrender();if(!this.parent&&L){this.domNode=M;}this.render();if(this.defn&&this.defn.set){this.defn.set("readyState",mstrmojo.EnumReadystate.IDLE);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._ListSelections");mstrmojo.ListBoxHoriz=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBoxHoriz",cssClass:"mstrmojo-ListBoxHoriz",tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"",cellCssText:"",cellSpacing:0,cellPadding:0,_markupPrefix:function(){var A=this.itemRenderer;return(A&&A.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="'+this.cellSpacing+'" cellpadding="'+this.cellPadding+'"><tbody><tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'">');},_markupSuffix:function(){var A=this.itemRenderer;return(A&&A.markupSuffix)||"</tr></tbody></table>";},_itemPrefix:function(){var A=this.itemRenderer;return(A&&A.itemPrefix)||('<td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var A=this.itemRenderer;return(A&&A.itemSuffix)||"</td>";},_getItemNode:function(A){if(A<0){return null;}var B=this.itemsNode,C=B&&B.rows[0];return C&&C.cells[A].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Table","mstrmojo.SelectBox","mstrmojo._CanValidate","mstrmojo.MetricSelectorUtility");var D=mstrmojo.MetricSelectorUtility,K=mstrmojo.validation,G=mstrmojo.expr,E=mstrmojo.num,N=D.OP,F=[{n:mstrmojo.desc(2795,"Equals"),v:N._EQUALS},{n:mstrmojo.desc(2796,"Does not equals"),v:N._NOT_EQUALS},{n:mstrmojo.desc(521,"Greater than"),v:N._GREATER},{n:mstrmojo.desc(522,"Greater than or equal to"),v:N._GREATER_EQUAL},{n:mstrmojo.desc(523,"Less than"),v:N._LESS},{n:mstrmojo.desc(524,"Less than or equal to"),v:N._LESS_EQUAL},{n:mstrmojo.desc(519,"Between (enter value1;value2)"),v:N._BETWEEN},{n:mstrmojo.desc(614,"Not between (enter value1;value2)"),v:N._NOT_BETWEEN},{n:mstrmojo.desc(898,"In (enter value1;value2; ...;valueN)"),v:N._IN},{n:mstrmojo.desc(2394,"Not In (enter value1;value2; ...;valueN)"),v:N._NOT_IN},{n:mstrmojo.desc(2202,"Is null"),v:N._IS_NULL},{n:mstrmojo.desc(2203,"Is not null"),v:N._IS_NOT_NULL}],L=F.slice(0,10),J="padding:2px 2px 2px 2px",H=F.slice(10,12);var C=function(Z,S,T,V,U){var W;if(U===2){return S;}var a=String(Z).split(";"),X=K.STATUSCODE.INVALID_VALIDATOR,R=K.STATUSCODE.VALID;if(V&&a&&a.length>1){S.code=X;}else{for(W=0;W<a.length;W++){var Y=parseFloat(a[W],10);if(isNaN(Y)||(T&&((a[W].match(/^\d+(\.\d+)?%$/)===null&&a[W].match(/^\d+(\.\d+)?$/)==null)||Y<0||Y>100))||(!T&&a[W].match(/\d+$/)===null)){S.code=X;}if(S.code!==R){break;}}}if(S.code!==R){S.msg=mstrmojo.desc(6103,"Please fix any invalid data");}return S;};var M=function(R){R=parseFloat(R);return isNaN(R)?"54px":((R*72/16)+"pt;");},Q=function(T){if(T.hasRendered){var S=T.domNode.style;S.font=T.font;S.width=M(S.fontSize);}else{var R=T.font.match(/[^\s]*?pt/)||[];T.cssText=T.cssText+" font:"+T.font+"; width:"+M(R[0]);}},I=function(R){if((R>=8&&R<=16)||(R>=23&&R<=25)){return false;}return true;};mstrmojo.MetricQualification=mstrmojo.declare(mstrmojo.Table,null,{scriptClass:"mstrmojo.MetricQualification",cssClass:"qs",cssText:"width:100%",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},getClientHeight:function P(){return this.domNode.clientHeight+2;},rows:1,cols:4,layout:[{cells:[{cssText:"width:100%"},{cssText:"width:56px"},{cssText:"width:56px"},{cssText:"width:18px"}]}],init:function(R){if(this._super){this._super(R);}this._init();},_init:function(T){var S;switch(this.qua){case 0:this.low=(this.da&&this.da.low)||0;this.high=(this.da&&this.da.high)||0;break;case 1:case 2:this.low=1;this.high=(this.da&&this.da.cnt)||0;break;case 3:case 4:this.low=0;this.high=100;break;}if(T){this.cs=[];this.f=this.ft=null;}var V=D.getOpIdxByfunc(this.f,this.ft),U=I(this.dt)?N._GREATER_EQUAL:N._IS_NULL;this.set("opId",(V==-1)?U:V);var R=(this.cs&&this.cs.length>0)?E.toLocaleString(this.cs[0].v):"";if(this.opId===N._IN||this.opId===N._NOT_IN){for(S=1;S<this.cs.length;S++){R+=";"+E.toLocaleString(String(this.cs[S].v));}}else{this.set("cs2",(this.cs&&this.cs.length>1)?E.toLocaleString(this.cs[1].v):"");}this.set("cs1",R);this.vldTbL.validate();this.vldTbH.validate();this.changeQual=false;},updateData:function B(R,S){this.da=R;this.updateExpr(S);},updateExpr:function A(R){if(R){this.cs=R.cs;this.f=R.f;this.ft=R.ft;this.qua=R.qua;}this._init();},onquaChange:function O(R){this._init(true);this.func.items=(this.qua!==0)?L:I(this.parent.dt)?F:H;this.func.refresh();this.changeQual=true;this.onchange();},children:[{slot:"0,0",alias:"func",scriptClass:"mstrmojo.SelectBox",cssText:"width:100%",size:1,bindings:{sv:"this.parent.opId",font:"this.parent.font"},onfontChange:function(){if(this.hasRendered){this.domNode.style.font=this.font;}else{this.cssText="width:100%;font:"+this.font;}},onsvChange:function(){if(this.sv!==null&&this.sv!==undefined){this.set("selectedItem",{v:this.sv});}},postCreate:function(){if(mstrmojo.dom.isIE){this.itemDisplayField="n";this.showItemTooltip=true;}this.items=(this.parent.qua!==0)?L:I(this.parent.dt)?F:H;},onchange:function(){var S=this.parent,T=this.selectedItem;if(T&&T.v!==null&&T.v!==undefined){var R=D.getIncludeByOp(T.v);S.include=R;if(S.parent&&R!==S.parent.include){S.changeInclude=true;}else{S.changeInclude=false;}S.set("opId",T.v);}if(mstrApp.isMobile&&(T.v===N._IS_NULL||T.v===N._IS_NOT_NULL)){if(S.onchange){S.onchange();}}}},{slot:"0,1",alias:"vldTbL",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:G.DTP.VARCHAR,constraints:{trigger:K.TRIGGER.ALL,validator:function(R){var S={id:this.id,code:K.STATUSCODE.VALID,msg:""},T=this.parent;C(R,S,(T.qua===3||T.qua===4),(T.opId!==8&&T.opId!==9),(T.numFmts&&T.numFmts.cat));return S;}},bindings:{visible:"this.parent.opId!=10&&this.parent.opId!=11",value:"this.parent.cs1",font:"this.parent.font"},onfontChange:function(){Q(this);},onValid:function(){var S=this.parent,R=this.domNode;S.set("cs1",this.value);if(R&&R.value.length>6){R.title=R.value;}else{if(R){R.title="";}}},onvisibleChange:function(){if(!this.visible){this.parent.set("cs1","");}},onkeyup:function(S){var R=S.hWin,V=S.e||R.event,U=this.parent,T=S.src.domNode;if(V.keyCode===13&&U.apply&&U.apply.enabled){U.apply.onclick();}}},{slot:"0,2",alias:"vldTbH",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:G.DTP.VARCHAR,constraints:{trigger:K.TRIGGER.ALL,validator:function(R){var S={id:this.id,code:K.STATUSCODE.VALID,msg:""},T=this.parent;C(R,S,(T.qua===3||T.qua===4),(T.opId!==8&&T.opId!==9),(T.numFmts&&T.numFmts.cat));return S;}},bindings:{visible:"this.parent.opId ==7 ||this.parent.opId ==6",value:"this.parent.cs2",font:"this.parent.font"},onfontChange:function(){Q(this);},onValid:function(){this.parent.set("cs2",this.value);var R=this.domNode;if(R&&R.value.length>6){R.title=R.value;}else{if(R){R.title="";}}},onvisibleChange:function(){if(!this.visible){this.parent.set("cs2","");}},onkeyup:function(S){var R=S.hWin,U=S.e||R.event,T=this.parent;if(U.keyCode===13&&T.apply&&T.apply.enabled){T.apply.onclick();}}},{slot:"0,3",alias:"apply",title:mstrmojo.desc(2164,"Apply"),scriptClass:"mstrmojo.Button",cssClass:"icn apply",bindings:{enabled:"(!this.parent.vldTbL.visible ||!this.parent.vldTbL.validationStatus.code)&& (!this.parent.vldTbH.visible||!this.parent.vldTbH.validationStatus.code)"},onclick:function(){var T=this.parent,W=(T.qua===D.Q._PT||T.qua===D.Q._PB),R;T.cs=[];var U=function(X){return X+((W&&!String(X).match(/^\d+%$/))?"%":"");};var S=function(X,Y){return((X===2||X===3)&&Y===0)?14:5;};if(T.opId===N._IN||T.opId===N._NOT_IN){var V=String(T.cs1).split(";");for(R=0;R<V.length;R++){if(!mstrmojo.string.isEmpty(V[R])){T.cs.push({dtp:5,v:U(V[R])});}}}else{if(T.vldTbL.visible){T.cs.push({dtp:S((T.numFmts&&T.numFmts.cat),T.qua),v:U(T.cs1)});}if(T.vldTbH.visible){T.cs.push({dtp:S((T.numFmts&&T.numFmts.cat),T.qua),v:U(T.cs2)});}}if(T.onchange){T.onchange();}if(T.makeSelection){T.makeSelection();}}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var C=function(S,U,T){var R=S.parent.opener,J=R&&R.showDesc,Q=R&&R.showPath,I=U[S.itemField];var P=mstrmojo.string.escape4HTMLText,V="";if(Q){var M=U.anc&&U.anc.items,O=M&&M.length;if(O>0){for(var L=0;L<O-1;L++){V+=M[L].n+" > ";}V+=P(M[O-1].n);}else{if(U.path){V+=U.path;}}}if(!T){V+=(V.length===0?"":" > ")+P(I);}if(J){var N=U[S.itemDescField],K=120;if(N){V+="\r\n\r\n<br>"+P(N.substring(0,K)+(N.length>K?"...":""));}}return V;};var A=function(I,J,K){I.path=null;if(!J||!K||K.path){if(K&&K.path){I.set("path",K.path);}return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var L=J.path||J.getAttribute("path");if(L){I.set("path",K.path);return ;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(M){var N=H(M.toString())||"";K.path=N;I.set("path",N);}},{taskId:"getObjectDetails",objectID:K.did,objectType:K.t},undefined);},200);};var H=function(K){var N;if(window.DOMParser){N=(new DOMParser()).parseFromString(K,"text/xml");}else{N=new ActiveXObject("Microsoft.XMLDOM");N.async="false";N.loadXML(K);}var P=N.getElementsByTagName("path")[0],L=P.childNodes,O="";if(L){for(var J=0,I=L.length;J<I;J++){var M=L[J].childNodes&&L[J].childNodes[0];if(M){O+=mstrmojo.string.escape4HTMLText(M.nodeValue)+(J<I-1?"> ":"");}}}return O;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",useRichTooltip:false,itemDescField:"desc",getItemMarkup:function(K,I){var J=this.parent.opener,L=this.useRichTooltip?"":this.buildTooltip(K);return'<div class="mstrmojo-suggest-text '+((J&&J.item2textCss(K))||"")+'" idx="'+I+'" title="'+L+'">'+J.getHighlightedText(J.getSearchPattern(),mstrmojo.string.escape4HTMLText(K[this.itemField]))+"</div>";},getItemProps:function E(){return{};},onmouseover:function(J){var M=this.parent.opener;if(M&&M.showPath){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),I=K.getAttribute("idx"),L=I!=null?this.items[I]:null;if(L&&L.t>-1){this.targetEl=K;this.targetItem=L;this.requestPath(K,L);}}},requestPath:function D(I,K){var J=this.parent.opener;if(K.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function&&J.showFunctionSyntaxAsPath){this.buildFunctionSyntax(K);}else{A(this,I,K);}},buildFunctionSyntax:function G(J){var K=J.path;if(!K&&J.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){var I=function I(P){if(P.did<0){return P.n;}var O=P.pars,M=[],N,L;M.push(P.n);if(O){M.push("(");for(N=0,L=O.length;N<L;N++){M.push(O[N].n);if(N!==(L-1)){M.push(", ");}}M.push(")");}return M.join("");};J.path=I(J);}this.set("path",{path:J.path,excludeSelf:true});},buildTooltip:function B(I,J){return C(this,I,J);},onpathChange:function F(){var I=this.targetEl;I.path=1;var J=this.buildTooltip(this.targetItem,this.path.excludeSelf);if(this.useRichTooltip){this.useRichTooltip=true;this.hasOpenTooltip=false;if(!I.ttp){I.ttp=J;this.showTooltip();}}else{I.title=J;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._TouchGestures","mstrmojo.css","mstrmojo.dom");var E=500,B=mstrmojo.css;var C={onkeyup:function(H,I){var J=H._searchTimer;if(J){window.clearTimeout(J);}H._searchTimer=window.setTimeout(function(){H.searchFunc(I);delete H._searchTimer;},E);},onEnter:function(H,I){H.searchFunc(I);}};mstrmojo.android.ui.SearchBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._TouchGestures],{searchResult:null,searchStrategy:C,searchFunc:mstrmojo.emptyFn,clearFunc:mstrmojo.emptyFn,monitorInputs:true,clearSearch:function G(){this.clearFunc();},onkeyup:function D(){},onEnter:function A(){this.searchStrategy.onEnter(this,this.searchValue||this.value);delete this.searchValue;},onvalueChange:function F(){B.toggleClass(this.domNode,"clear",!!this.value.length);},touchTap:function(H){var I=this.domNode,J=H.evt;if(H.pageX-mstrmojo.dom.position(J.target).x>(I.offsetWidth-parseInt(B.getStyleValue(I,"paddingRight"),10))){this.set("value","");this.clearSearch();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.css","mstrmojo.array");mstrmojo.android.ui.TextInput=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.android.ui.TextInput",markupString:'<div id="{@id}" class="mstrmojo-AndroidTextInput {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onlabelTxtChange:function(){var D=this.lbl,E=this.labelTxt;D.set("visible",!!E);D.set("text",E||"");},ontextValueChange:function(){this.txt.set("value",this.textValue||"");},ontextTypeChange:function(){this.txt.set("type",this.textType||"text");}},labelTxt:"",textValue:"",textType:"text",init:function C(E){this._super(E);this.parent.attachEventListener("widthChange",this.id,function(G){var H=parseInt(G.value,10),F=this.txt.domNode,I=mstrmojo.css.getComputedStyle(F);mstrmojo.array.forEach(["padding","margin"],function(J){H-=parseInt(I[J+"Left"],10);H-=parseInt(I[J+"Right"],10);});F.style.width=H+"px";});var D=this.getTextCfg();D.alias="txt";D.cssDisplay="block";this.addChildren([D,{scriptClass:"mstrmojo.Label",cssClass:"lblErr",alias:"lblErr",visible:false}]);},getTextCfg:function B(){return{scriptClass:"mstrmojo.TextBox",onEnter:function(){var D=this.parent,E=D.onEnter;if(E){E.call(D,this.value);}}};},getValue:function A(){return this.txt.value;},children:[{scriptClass:"mstrmojo.Label",alias:"lbl"}],onRender:function(){this._super();this.txt.focus();}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.TextBox");var A=mstrmojo.css,C=mstrmojo.dom;mstrmojo.TextArea=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextArea",markupString:'<textarea id="{@id}" class="mstrmojo-TextArea {@cssClass}"  style="{@cssText}" title="{@tooltip}" placeholder="{@placeholderText}" rows="{@rows}" cols="{@cols}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keydown,keyup,blur></textarea>',maxLength:256,onkeydown:function B(K){var I=this.inputNode,J=this.value,E=this.maxLength,F=(J&&J.length)||0,M=K.e,L=M.keyCode;this.isDeleteKeys=L===8||L===46;this.isArrowKeys=L===37||L===38||L===39||L===40;if(E!==undefined&&E<=F){var G=I.selectionEnd,H=(G!==undefined)?(G-I.selectionStart)>0:document.selection.createRange().text.length>0;if(!this.isDeleteKeys&&!this.isArrowKeys&&!H){if(C.isIE7||C.isIE8||C.isIE9){I.blur();window.setTimeout(function(){I.focus();},1);}C.preventDefault(window,M);return false;}}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.TextArea,{oncssClassChange:function D(){A.addClass(this.domNode,this.cssClass||"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,T=this.parent.parent;if(R===""){T.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);T.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._TouchGestures");mstrmojo.ui.MobileStepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.ui.MobileStepper",onclick:function D(I){if(!mstrApp.isTouchApp()){this._super(I);}return false;},onmousedown:function A(I){if(!mstrApp.isTouchApp()){this._super(I);}return false;},onmouseup:function C(I){if(!mstrApp.isTouchApp()){this._super(I);}return false;},touchSelectBegin:function B(I){this.startStepperInterval(I,"touchTap");},touchSelectEnd:function G(I){this.stopStepperInterval();},touchTap:function F(I){this.processEvent(I.target);},touchBegin:function H(J){var I=J.target;if(I===this.nextNode||I===this.prevNode){mstrmojo.css.addClass(I,"glow");}},touchEnd:function E(J){var I=J.target;if(I===this.nextNode||I===this.prevNode){mstrmojo.css.removeClass(I,"glow");}}});mstrmojo.ui.MobileStepper.prototype.markupString=mstrmojo.ui.MobileStepper.prototype.markupString.replace(",mousedown,mouseup","");}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui.ViewSwitcher","mstrmojo.dom","mstrmojo.array");var I=Math,H=mstrmojo.dom,J=mstrmojo.array;function F(O,N,Q,R){if(isNaN(N)){N=parseInt(N,10);}var P=O.style;P[H.CSS3_TRANSITION]=H.CSS3_PREFIX+"transform "+(Q||0)+"ms "+(R||"ease");P[H.CSS3_TRANSFORM]="translateX("+N+"px)";}function G(T,U,W){var P=this.getSlots(),S=P.current,V=P.next,R=P.slot,O=0;J.forEach(J.filter(this.children,function(X){return(X.slot===R);}),function(X){this.removeChildren(X);X.unrender();},this);this.prepareNewView(T,R);try{var N=this.id;window.setTimeout(function(){mstrmojo.all[N].addChildren([T]);},0);if(V&&S){O=W?parseInt(this.width,10):0;if(W){V.style.zIndex=3;S.style.zIndex=1;}}}catch(Q){mstrmojo.Obj.free(T);throw Q;}return{start:U,target:O,newView:T,oldView:this.getCurrentView(),isForward:W};}function B(O,U,W,R,Q){var N=this.sliderNode,P=0,S="",T=function(){F(N,-O,P,S);if(W){if(P){window.setTimeout(W,P+100);}else{W();}}};if(R){var V=I.abs((O||0)-(U||0));P=I.round(V/parseInt(this.width,10)*700);S="ease";if(Q){P=I.min(P,I.round(V/Q));S+="-out";}this._animating=true;window.setTimeout(T,20);}else{T();}}function M(O,N){this.removeChildren(N);N.unrender();this._curSlot=O.slot;delete this._animating;}mstrmojo.android.ui.ViewSlider=mstrmojo.declare(mstrmojo.android.ui.ViewSwitcher,null,{scriptClass:"mstrmojo.android.ui.ViewSlider",switchView:function E(N,O){var P=this.getSlots();F(this.sliderNode,0);F(P.current,0);F(P.next,0);this._super(N,O);},isAnimating:function A(){return !!this._animating;},resetSliderNodes:function(Q){var P=this.getSlots(),O=parseInt(this.width,10),S=-O,N=O,R=0;if(Q){S=0;N=0;R=O;}F(this.sliderNode,S);F(P.current,N);F(P.next,R);return{sliderX:S,currentX:N,nextX:R};},beginScroll:function(R,O){if(this.isAnimating()){return false;}var P=R.delta.x<0,N=this.resetSliderNodes(P);var Q=this._scrollInfo=G.call(this,O,N.sliderX,P);this.scrollStarted(Q);this.scroll(R);},scroll:function L(P){var O=this._scrollInfo,N=P.delta.x;if(O){if(O.isForward!==(N<0)){B.call(this,0);this.beginScroll(P);}else{B.call(this,-(O.start+N));this.scrollProgress(O,N);}}},endScroll:function D(T){var P=this._scrollInfo;if(!P){return ;}var S=T.delta.x,N=-P.start,R=false,O=0,Q=this.id;if(I.abs(S)/parseInt(this.width,10)>0.25){N=P.target;R=true;O=T.velocity.x;}this.scrollStopped(P,R);B.call(this,N,N-S,function(){mstrmojo.all[Q]["scroll"+(R?"Complete":"Canceled")](P);},true,O);delete this._scrollInfo;},scrollStarted:mstrmojo.emptyFn,scrollProgress:mstrmojo.emptyFn,scrollStopped:mstrmojo.emptyFn,scrollCanceled:function C(N){M.call(this,N.oldView,N.newView);},scrollComplete:function K(N){M.call(this,N.newView,N.oldView);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo._HasBuilder");mstrmojo.ToolBar=mstrmojo.declare(mstrmojo.HBox,[mstrmojo._HasBuilder],{scriptClass:"mstrmojo.ToolBar",cellCssClass:"mstrmojo-ToolBar-cell",markupString:'<table id="{@id}" class="mstrmojo-ToolBar {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-ToolBar-outercell"><table class="mstrmojo-ToolBar-innertable" cellspacing="0" cellpadding="0"><tr>{@tableHtml}</tr></table></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0].firstChild.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildChildren:function A(){var B=this.buildConfig;if(!B){this.buildConfig={};B=this.buildConfig;}B.target=this.target;return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Container","mstrmojo.num","mstrmojo.HBox","mstrmojo._IsInputControl","mstrmojo._TouchGestures");var W=mstrmojo.dom,O=W.attachEvent,P=W.detachEvent,a=mstrmojo.css,Q=mstrmojo.expr.DTP,M="mstrmojo.Button",R=mstrmojo.num,I=mstrmojo.validation.TRIGGER,b=50,L=500,A=10;function S(){var h=this;O(window,W.TOUCHSTART,h._evtHandler,true);h.isActive=true;}function V(){var h=this;P(window,W.TOUCHSTART,h._evtHandler,true);h.isActive=false;}function G(h){return h?parseFloat(h.toFixed(A)):h;}function d(){var k=this.numericValue,h=this.max,l=this.min,j=this.itv;if(!isNaN(k)){if(h!==undefined&&k-j>h){this.set("numericValue",h);}else{if(l===undefined||k-j>=l){this.set("numericValue",G(k-j));}else{if(k>l&&k-j<l){this.set("numericValue",l);}}}}}function K(){var k=this.numericValue,h=this.max,l=this.min,j=this.itv;if(!isNaN(k)){if(l!==undefined&&k+j<l){this.set("numericValue",l);}else{if(h===undefined||k+j<=h){this.set("numericValue",G(k+j));}else{if(k<h&&k+j>h){this.set("numericValue",h);}}}}}function D(h){if(h){K.call(this);}else{d.call(this);}}function f(h){var j=this;this._holdTimer=setInterval(function(){D.call(j,h);},b);}function B(){if(this._holdTimer){clearInterval(this._holdTimer);delete this._holdTimer;}}function g(h){var j=this;if(!this._holdTimer&&!this._startHoldTimer){this._startHoldTimer=setTimeout(function(){delete j._startHoldTimer;f.call(j,h);},L);}}function e(){if(this._startHoldTimer){clearTimeout(this._startHoldTimer);delete this._startHoldTimer;}B.call(this);}function F(h){var j=h.target;return(this.plusNode&&this.plusNode==j);}function E(h){var j=h.target;return(this.minusNode&&this.minusNode==j);}function J(){var h=this.numericValue;if(!isNaN(h)&&h>=this.min&&h<=this.max&&h!=this.value){this.set("value",h);}}function Z(h){a.addClass(h,"touched");}function N(l){var h=l.max,k=l.min,j=l.itv;return{scriptClass:"mstrmojo.HBox",alias:"hBox",cssText:"margin:auto",children:[{scriptClass:M,alias:"minus",cssClass:"mstrmojo-StepperDIC-Operator minus",bindings:{enabled:function(){return this.parent.parent.numericValue>k;}}},{scriptClass:"mstrmojo.ValidationTextBox",cssClass:"mstrmojo-DataInputControl",dtp:Q.DOUBLE,required:true,alias:"textInput",constraints:{trigger:I.ONKEYUP|I.ONBLUR,max:h,min:k},bindings:{value:"this.parent.parent.numericValue"},onblur:function o(p){var q=this.parent.parent,r=R.parseNumeric(this.value);if(!q.isActive){J.call(this.parent.parent);}this._super&&this._super(p);},onValid:function(){this.parent.parent.set("numericValue",parseFloat(this.value));}},{scriptClass:M,alias:"plus",cssClass:"mstrmojo-StepperDIC-Operator plus",bindings:{enabled:function(){return this.parent.parent.numericValue<h;}}}]};}mstrmojo.android.inputControls.StepperDIC=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsInputControl,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.inputControls.StepperDIC",cssClass:"mstrmojo-StepperDIC",isActive:false,markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},init:function U(j){this._super&&this._super(j);this.max=this.dic.max;this.min=this.dic.min;this.itv=this.dic.itv;var h=parseFloat(this.value);this.set("numericValue",isNaN(h)?(this.min||0):h);this.set("children",N(this.dic));this.plus=this.hBox&&this.hBox.plus;this.minus=this.hBox&&this.hBox.minus;var k=this;this._evtHandler=this._evtHandler||function(l){var o=l.target;if(!W.contains(k.domNode,o)){W.stopPropogation(l.view,l);V.call(k);J.call(k);}};},postBuildRendering:function Y(){this._super();this.plusNode=this.plus&&this.plus.domNode;this.minusNode=this.minus&&this.minus.domNode;},touchTap:function(h){if(!this.isActive){S.call(this);}if(F.call(this,h)){Z(this.plusNode);D.call(this,true);}else{if(E.call(this,h)){Z(this.minusNode);D.call(this,false);}}},touchBegin:function T(h){if(!this.isActive){S.call(this);}if(F.call(this,h)){Z(this.plusNode);g.call(this,true);}else{if(E.call(this,h)){Z(this.minusNode);g.call(this,false);}}},touchEnd:function C(h){e.call(this);},unrender:function X(h){if(this.isActive){V.call(this);}e.call(this);this._super(h);},setDirtyFlag:function H(j,h){mstrmojo.css.addClass(this.domNode.firstChild||h,"tx-active");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.HBox","mstrmojo._HasBuilder","mstrmojo._CanMeasureChildren");function D(){return(this.renderMode!=="scroll")?this._super():true;}function C(){if(!this.hasRendered){return ;}var F=this.children||[],E=F.length-1;for(E;E>=0;E--){if(F[E].refresh){F[E].refresh();}}}mstrmojo.DocSection=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._CanMeasureChildren],{scriptClass:"mstrmojo.DocSection",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocSection" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},postBuildRendering:D,childRenderOnAddCheck:D,refresh:C,getWidth:function A(){return this._super(1);}});mstrmojo.DocSectionHoriz=mstrmojo.declare(mstrmojo.HBox,[mstrmojo._HasBuilder,mstrmojo._CanMeasureChildren],{scriptClass:"mstrmojo.DocSectionHoriz",postBuildRendering:D,childRenderOnAddCheck:D,refresh:C,getHeight:function B(){return this._super(1);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var D=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" style="z-index: 1100;" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},editorNode:null,btnHbox:null,markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(L){if(L){return ;}var J=this.visible,K=J?"block":"none";this.editorNode.style.display=K;if(this.modal){this.curtainNode.style.display=K;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function F(){var J;var K=this.buttons;if(K&&!this.btnHbox){for(J in K){K[J].cssClass=(K[J].cssClass||"")+(this.noButtonCls?"":" mstrmojo-Editor-button");}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:K},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function B(){var J=this.placeholder;if(this._super()){if(!this.parent&&!J){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function E(){var J=this.id;return function(){var K=mstrmojo.all[J];K.resizeDialog();K.positionDialog();};},postBuildRendering:function A(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var K=this._resizeHandler=this.getResizeHandler();D.attachEvent(window,"resize",K);}this.resizeDialog();this.positionDialog();try{this.domNode.focus();}catch(J){}return true;},resizeDialog:function G(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function C(){var K=this,O=K.curtainNode,J=document.body,M=document.documentElement,N=O.style,L=K.curtainPosition;N.width=Math.max(J.clientWidth,M.scrollWidth)+"px";if(L&&L.h){N.height=L.h+"px";}else{N.height=Math.max(J.clientHeight,M.scrollHeight)+"px";}if(L&&L.y){N.top=L.y+"px";}K.raiseEvent({name:"resizeCurtain"});},positionDialog:function H(){var K=this.editorNode,M=this.left,L=this.top;if(!M||!L){D.center(K);var J=K.style;if(this.alignment==="top"){J.top="10px";}if(M){J.left=M;}if(L){J.top=L;}}},destroy:function(K){var J=this._resizeHandler;if(J){D.detachEvent(window,"resize",J);}this._super(K);}});mstrmojo.toast=function I(O,M,Q,J){var P="mojoToast9",N,L=M||3000;if(J&&J.id){P=J.id+"-"+P;}try{mstrmojo.all[P].destroy();}catch(K){}mstrmojo.insert({id:P,scriptClass:"mstrmojo.Label",cssClass:(J&&J.cssClass)?J.cssClass:"toastCss",text:O}).render();N=mstrmojo.all[P].domNode;if(J&&J.dom){J.dom.appendChild(N);}else{document.body.appendChild(N);D.bottomCenter(N);}window.setTimeout(function(){if(Q){Q();}try{mstrmojo.all[P].destroy();}catch(R){}},L);};mstrmojo.mask={show:function(){var J=mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});J.render();document.body.appendChild(J.domNode);},hide:function(){mstrmojo.mask.win.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.registry","mstrmojo.tooltip","mstrmojo.HBox");var B=mstrmojo.dom,C=mstrmojo.css,A=1,G=2,F=3,E=function(I){var H=C.getStyleValue(I,"verticalAlign");return{top:A,bottom:F,middle:G}[H]||A;};mstrmojo.SliderBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.SliderBox",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}" tabindex="{@tabIndex}" ><div class="valuePart" style="{@valueCssText}"><span class="valueLabel">{@valueLabel}</span><span class="valueText">{@valueText}</span></div><table class="sliderPart" style="{@sliderCssText}"><tbody><tr><td class="minText">{@min}</td><td class="sliderWrapper"></td><td class="maxText">{@max}</td></tr></tbody></table></div>',markupSlots:{valuePartNode:function(){return this.domNode.firstChild;},valueLabelNode:function(){return this.domNode.firstChild.firstChild;},valueTextNode:function(){return this.domNode.firstChild.lastChild;},sliderPartNode:function(){return this.domNode.lastChild;},minTextNode:function(){return this.domNode.lastChild.rows[0].cells[0];},maxTextNode:function(){return this.domNode.lastChild.rows[0].cells[2];},sliderNode:function(){return this.domNode.lastChild.rows[0].cells[1];}},markupMethods:{onmaxChange:function(){this.maxTextNode.innerHTML=this.max;},onminChange:function(){this.minTextNode.innerHTML=this.min;},onvalueTextChange:function(){this.valueTextNode.innerHTML=this.valueText;},onunsetChange:function(){var H=this.sliderBar.domNode;if(H){mstrmojo.css.toggleClass(H,"unset",this.unset);}}},tabIndex:-1,sliderRef:null,valueLabel:mstrmojo.desc(4104,"Value:"),valueText:"",min:"",max:"",interval:0,isSequential:false,unset:false,cssClass:"mstrmojo-SliderGroup",postCreate:function D(){if(!this.sliderRef){this.sliderRef={scriptClass:"mstrmojo.Slider",isHoriz:true,ontitleChange:function(){if(this.domNode&&this.title){this.domNode.setAttribute("title",this.title);}},onselectionChange:function(){if(!this.hasRendered){return ;}var I=this.items[this.selectedIndex]&&this.items[this.selectedIndex].n,H=this.parent;if(H.unset){H.unset=false;C.removeClass(this.domNode,"unset");}H.set("valueText",I);H.set("value",I);this.typeHelper.updateThumb();}};}this.sliderRef.slot="sliderNode";this.sliderRef.alias="sliderBar";this.addChildren(this.sliderRef);},preBuildRendering:function(){this._super();var M=this.min,I=this.max,K=mstrmojo.num.parseNumeric(this.value),J=this.items,H,L=this.sliderBar;if(this.isSequential){H=Math.floor((Math.max(Math.min(K,I),M)-M)/this.interval);if(isNaN(K)||K<M||K>I){this.unset=true;}}else{H=mstrmojo.array.find(J,"v",String(K));if(H==-1){this.unset=true;H=0;}}L.set("items",J);L.select(H||0);},postBuildRendering:function(){this._super();if(this.unset){C.addClass(this.sliderBar.domNode,"unset");}},alignSlider:function(K,H){var J=E(K),I,L;if(!this.valuePartNode){L=this.valueCssText||"";I=this.sliderCssText||"";if(J===A){this.valueCssText="top:0;"+L;this.sliderCssText="top:0;"+I;}else{if(J===F){this.valueCssText="bottom:0;"+L;this.sliderCssText="bottom:0;"+I;}else{this.valueCssText="height: 100%; line-height: "+H+"px;"+L;this.sliderCssText="height: 100%;"+I;}}}else{I=this.sliderPartNode.style;L=this.valuePartNode.style;if(J){if(J===A){I.top=L.top="0";}else{if(J===F){I.bottom=L.bottom="0";}else{L.height=I.height="100%";L.lineHeight=inlineHeight+"px";}}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.DocPanel","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo._CanGrowOrShrink","mstrmojo.hash");function G(){var M=this.containerNode;if(M){var O=this.getFormats(),R=this._parentSize,P=Math.max((parseInt(O.height,10)||0),R.height),N=Math.max((parseInt(O.width,10)||0),R.width),Q=M.style;Q.width=N+"px";Q.height=P+"px";}}var L=mstrmojo.android.AndroidDocPanel=mstrmojo.declare(mstrmojo.DocPanel,[mstrmojo._CanGrowOrShrink,mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.AndroidDocPanel",scrollerSetupDelay:0,postBuildRendering:function A(){if(this._isInfWin){G.call(this);}return this._super();},updatePanelDimensions:function D(Q,M,P,N){this._parentSize={height:M,width:P};var O="px";if(N){this._isInfWin=true;G.call(this);}this.cssText="left:"+Q+"px;top:0;height:"+M+O+";width:"+P+O+";";if(this.hasRendered){var R=this.domNode.style;R.left=Q+O;R.height=M+O;R.width=P+O;this.updateScroller();}},update:function E(M){this.scrollerConfig={bounces:false,showScrollbars:false};},onchildRenderingChange:function I(M){this._super(M);if(this.getFormats().overflow==="auto"){this.performCanGrowCanShrink([(M&&M.src)||M],(!!this._isInfWin&&!mstrApp.isTablet()));}},touchTap:function B(){var M=this.controller;if(M&&M.viewTap){M.viewTap();}},getCanGrowShrinkNode:function K(){return this.containerNode;},afterCanGrowShrink:function C(){this.updateScroller();},updateScrollerConfig:function F(){var M=this._super();if(this.getFormats().overflow==="auto"){var P=this.containerNode,O=this._parentSize,N={Height:{a:"y",s:"v"},Width:{a:"x",s:"h"}},Q={};M.scrollEl=P;mstrmojo.hash.forEach(N,function(U,T){var R=O[T.toLowerCase()];var V=Math.max(P["offset"+T]-R,0),S=M[U.s+"Scroll"]=(V!==0);if(S){Q[U.a]={start:0,end:V};}});M.offset=Q;M.origin=M.origin||{x:0,y:0};}return M;}});var J=L.prototype.formatHandlers,H="containerNode";J[H]=J[H].concat("D");}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasLayout");mstrmojo.Overlay=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onheightChange:function(){this.domNode.style.height=this.height?this.height:"";},onwidthChange:function(){this.domNode.style.width=this.width?this.width:"";}},layoutConfig:{h:{containerNode:"100%"},w:{containerNode:"100%"}},scriptClass:"mstrmojo.Overlay"});})();(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.string","mstrmojo.ListBase","mstrmojo._IsList");var G=",",F=mstrmojo.string;mstrmojo.TableLayoutList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.TableLayoutList",cssClass:"mstrmojo-TableLayoutList",styleCssClass:"",itemIdField:"v",allowUnlistedValues:false,tableLayoutCssStyle:"auto",multiSelect:false,titleItems:null,items:null,itemsPerRow:0,getLeftEndTitle:function E(H){return"";},getRightEndTitle:function D(H){return"";},getTitleRowMarkup:function A(){var L=this.titleItems;if(L){var K='<tr><td class="left_text">'+this.getLeftEndTitle(-1)+"</td>",H=L.length,J=0,I;for(J;J<H;J++){I=L[J];K+='<td class="item_title" title="'+I+'">'+I+"</td>";}K+='<td class="left_text">'+this.getRightEndTitle(-1)+"</td></tr>";return K;}return"";},_markupPrefix:function(){return'<table class="tableLayoutList" style="table-layout:'+this.tableLayoutCssStyle+'" cellspacing="0" cellpadding="0"><tbody>'+this.getTitleRowMarkup();},_markupSuffix:function(){return"</tbody></table>";},getItemMarkup:function(L,I){var K='<{@tag} class="item {@cls}" idx="{@idx}" title="{@en@n}" style="{@style}">{@en@n}</{@tag}>',H=this.getLeftEndTitle(I),J=this.getRightEndTitle(I),M=this.itemsPerRow;H='<td class="left_text" title="'+H+'">'+H+"</id>";J='<td class="right_text" title="'+J+'">'+J+"</id>";if(M>0){K=(I%M===0?"<tr>"+H:"")+"<td>"+K+"</td>"+((I+1)%M===0?J+"</tr>":"");}else{K='<td><div class="item_wrapper" idx="'+I+'">'+K+"</div></td>";if(!I){K="<tr>"+H+K;}else{if(I===this.items.length-1){K=K+J+"</tr>";}}}return K;},_getItemNode:function(H){var I=this.itemsNode,K=this.itemsPerRow,J=(this.titleItems?1:0)+((K>0)?parseInt(H/K,10):0),L=1+((K>0)?(H%K):H);return I.rows[J].cells[L].firstChild;},init:function(H){this._super(H);mstrmojo.css.addWidgetCssClass(this,this.styleCssClass);},onchange:function B(){var J,I=[];if(!this.multiSelect){J=this.selectedItem.v;}else{var H;for(H in this.selectedIndices){I.push(this.items[H].v);}J=I.join(this.delim||G);}this.set("value",J);},postBuildRendering:function C(){this._super();var H=[];if(this.multiSelect){var J=this.value.split(G),I;for(I=0;I<J.length;I++){H.push({v:J[I]});}}else{H.push({v:this.value});}this.setSelectedItems(H);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._FillsBrowser","mstrmojo._HasLayout","mstrmojo._TouchGestures","mstrmojo.Box","mstrmojo.Label","mstrmojo.dom","mstrmojo.css","mstrmojo.android.ui.ActionBarNative");var Z=mstrmojo.css;mstrmojo.requiresDescs(2901,8445);function U(){var k="rootPortrait",h="rootLandscape",j=this.domNode;if(mstrApp.isLandscape()){var g=k;k=h;h=g;}Z.removeClass(j,h);Z.addClass(j,k);}mstrmojo.android.ui.RootView=mstrmojo.declare(mstrmojo.Container,[mstrmojo._FillsBrowser,mstrmojo._HasLayout,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.RootView",markupString:'<div id="{@id}" class="mstrmojo-RootView {@cssClass}" style="{@cssText}" ><div class="mstrmojo-RootView-title"></div><div class="mstrmojo-RootView-content"></div></div>',markupSlots:{titleNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},layoutConfig:{h:{titleNode:"auto",containerNode:"100%"},w:{titleNode:"100%",containerNode:"100%"}},actionBar:null,preBuildRendering:function D(){Z.addClass(document.body,"dpi"+mstrMobileApp.getDeviceDPI());if(!this.msgBox){var h=this.msgBox=new mstrmojo.Box({placeholder:"mainAppMsg",cssClass:"mstrmojo-RootViewMessage",cssText:"left:-10000px;",children:[{scriptClass:"mstrmojo.Label",alias:"lbl",text:mstrmojo.desc(2901,"Loading...")}]});h.render();}var g=mstrApp.viewFactory,j=[g.newView("Switcher",{slot:"containerNode",alias:"switcher"})];if(mstrApp.isActionBarNative()){this.actionBar=new mstrmojo.android.ui.ActionBarNative();}else{j.push(g.newView("ActionBar",{slot:"titleNode",alias:"actionBar",controller:mstrmojo.all[this.controllerId]}));}this.addChildren(j);return this._super();},postBuildRendering:function Y(){U.call(this);var g=this.titleNode;if(!this._tchHandler){this._tchHandler=mstrmojo.touchManager.attachEventListener("actionBarMenuStateChange",this.id,function(h){if(h.value){Z.addClass(g,"top");}else{Z.removeClass(g,"top");}});}return this._super();},unrender:function W(g){if(this._tchHandler){mstrmojo.touchManager.detachEventListener(this._tchHandler);delete this._tchHandler;}this._super(g);},setNavigation:function d(h,g){this.actionBar.setNavigation(h,g);},getTitleHeight:function B(){return this.titleNode.offsetHeight;},clearNavigation:function O(){this.actionBar.clearNavigation();},restoreNavigation:function X(){this.actionBar.restoreNavigation();},selectNavigationItem:function G(g){return this.actionBar.selectNavigationItem(g);},hasNavigationItems:function Q(){return this.actionBar.hasNavigationItems();},reset:function a(){this.actionBar.reset();},setContent:function J(g,h){this.reset();this.switcher.switchView(g,h);},contentUpdated:function N(){this.reset();},setTitle:function M(g){this.actionBar.updateTitle(g);},setActionToolbar:function P(h,g){this.actionBar.updateToolbar(h,g);},setActionToolbarStatus:function I(g){this.actionBar.setActionToolbarStatus(g);},setUpStatus:function e(g){this.actionBar.setUpStatus(g);},updateLastOpened:function S(g){this.actionBar.setLastOpened(g);},monitorWindow:function F(){var g=mstrApp.getScreenDimensions();this._super({currentTarget:{innerWidth:g.w,innerHeight:g.h}});U.call(this);mstrmojo.all[this.controllerId].set("orientation",(mstrMobileApp.getOrientation()===mstrmojo.android.EnumOrientationTypes.PORTRAIT)?1:0);window.setTimeout(function(){mstrMobileApp.setWaitScreenVisibility(false);},0);},setDimensions:function T(k,j){this._super(k,j);var g=this.msgBox;g.set("height",this.height);g.set("width",this.width);},getBrowserDimensions:function(){var h=mstrApp.getScreenDimensions(),g="px";return{h:h.h+g,w:h.w+g};},getContentDimensions:function b(){var g=this.containerNode;return{h:g.clientHeight,w:g.clientWidth};},showMessage:function L(g){mstrMobileApp.showProgress([g||mstrmojo.desc(8445,"Loading")],false);},showHTMLProgress:function K(o){var k=this.msgBox,l=k.domNode.style,j=k.lbl,h=j.domNode,g=h.style;j.set("text",o||mstrmojo.desc(2901,"Loading..."));g.left=Math.round(parseInt(this.width,10)/2-h.offsetWidth/2)+"px";g.top=Math.round(parseInt(this.height,10)/2-h.offsetHeight/2)+"px";l.left=0;l.top=0;Z.addClass(k.domNode,"active");l.opacity=1;},hideMessage:function R(){mstrMobileApp.hideProgress();},hideHTMLProgress:function H(){var g=this.msgBox.domNode,h=g.style;h.opacity=0;h.left="-10000px";Z.removeClass(g,"active");},enterFullScreen:function V(){this.actionBar.enterFullScreen();},flashFullScreen:function f(){this.actionBar.flashFullScreen();},exitFullScreen:function E(g){this.actionBar.exitFullScreen(g);},cancelFlashFullScreen:function A(){return this.actionBar.cancelFlashFullScreen();},propogateMenuVisibleChange:function C(g){this.actionBar.propogateMenuVisibleChange(g);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.ui._HasScroller","mstrmojo.css");var B=mstrmojo.css;mstrmojo.ui.ColumnContainer=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnContainer {@cssClass}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},scrollNode:function(){return this.domNode.firstChild;}},markupMethods:{onnextChange:function A(){B.toggleClass(this.domNode,"hasNext",!!this.next);}},active:false,next:null,idx:undefined,updateColumnContainer:function D(){var E=this.next;if(E){E.updateColumnContainer();}},onactiveChange:function C(){B.toggleClass(this.domNode,"active",this.active);var E=this.next;if(E){E.updateColumnContainer();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasLayout","mstrmojo._TouchGestures","mstrmojo.android.ui.Image","mstrmojo.dom","mstrmojo.css");var F={containerNode:"100%"};mstrmojo.android.ui.ResultSetView=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.ResultSetView",layoutConfig:{h:F,w:F},init:function G(I){this._super(I);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ResultSetView");},rootOrientationChange:mstrmojo.emptyFn,addChildren:function A(K,I,J){if(!this.btnFullScreen){K=K.concat([{scriptClass:"mstrmojo.android.ui.Image",alias:"btnFullScreen",cssClass:"btnFullScreen",ignoreLayout:true,visible:false,touchTap:function(){mstrApp.rootController.flashFullScreen();}}]);}this._super(K,I,J);},delegateToolbar:function H(I){return false;},setActionToolbarStatus:mstrmojo.emptyFn,getMaskNode:mstrmojo.emptyFn,touchTap:function E(){this.controller.viewTap();},enterFullScreen:function D(){this.btnFullScreen.set("visible",true);},exitFullScreen:function B(){this.btnFullScreen.set("visible",false);},flashFullScreen:mstrmojo.emptyFn,cancelFlashFullScreen:mstrmojo.emptyFn,getPosition:function C(){var I=this.domNode;return I?mstrmojo.dom.position(I):undefined;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Popup","mstrmojo._HasBuilder","mstrmojo._IsAnchorable","mstrmojo.hash","mstrmojo.array","mstrmojo.dom");var M="mstrmojo-DocInfoWindow-tip",G=1,E=mstrmojo.dom,O=mstrmojo.hash,I=mstrmojo.array;$D=mstrmojo.dom,$A=mstrmojo.array;function H(U){var T=this.anchor,S=E.findWidget(T)||(T&&T.w),U=U||{};U.lockIW=S;return U;}function R(T){var S=T.model;return S.getLayoutDataCache(S.getCurrentLayoutKey())[T.psId];}mstrmojo.DocInfoWindow=mstrmojo.declare(mstrmojo.Popup,[mstrmojo._HasBuilder,mstrmojo._IsAnchorable,mstrmojo._HasPopup],{scriptClass:"mstrmojo.DocInfoWindow",markupString:'<div class="mstrmojo-DocInfoWindow-wrapper @{waitState}"><div id="{@id}" class="mstrmojo-DocInfoWindow"></div><div class="'+M+' top"></div><div class="mstrmojo-DocInfoWindow-curtain" mstrAttach:click></div></div>',markupSlots:{infoNode:function(){return this.domNode.firstChild;},tipNode:function(){return this.domNode.childNodes[1];},curtainNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode.firstChild;}},boundaryNodeName:"boundary",popupNodeName:"infoNode",baseTipClass:M,anchorOffset:1,anchorOrientation:"h",anchor:null,boundary:null,closeOnClick:true,autoCloseLocks:null,autoScrollCloseLocks:null,tipNodeColor:"",ontouchstart:function J(){this.close();},close:function N(){if(this.isAutoCloseLocked()){return ;}this.model.raiseEvent({name:"infoWindowClosed",psKey:this.psKey});if(this._super){this._super();}if(this.anchor&&this.anchor.lockInfoWinId&&mstrmojo.all[this.anchor.lockInfoWinId]){mstrmojo.all[this.anchor.lockInfoWinId].releaseLock(this);}this.clearAnchorHilites();E.detachEvent(document,E.isFF?"DOMMouseScroll":"mousewheel",this.mw);E.detachEvent(document,"scroll",this.mw);E.detachEvent(window,"resize",this._resizeHandler);},clearAnchorHilites:function C(){var S=mstrmojo.dom.findWidget(this.anchor);if(S&&S.clearHilites){S.clearHilites(S.hiliteKey);delete S.hiliteKey;}},prepareAnchor:function A(){if(this.children&&this.children[0]){var T=this.infoNode.style,U=this.children[0],V=U.dimNode||U.domNode,W=V.offsetWidth,S=V.offsetHeight;T.width=(W+2*G)+"px";T.height=(S+2*G)+"px";}},nudge:function L(){this.positionDialog();this.model.raiseEvent({name:"infoWindowRendered",id:this.id});},onRender:function F(){this.open(this.opener);},open:function K(Z,U){var S=mstrmojo.all[this.psId];if(S){var W=S.defn.sfp,b=S.selectedIdx;if(W&&b!==0){S.switchToPanel(0,0);S.children[b].set("selected",false);}}if(this._super){this._super(Z,H.call(this,U));}var V=function V(d){if(!d){return ;}if(d.defn&&d.defn.ifp){d.refresh();}I.forEach(d.children||[],function(e){V(e);});};V(S);if(mstrApp.isTablet&&mstrApp.isTablet()){var a=mstrmojo.touchManager,T=this.id,Y=this.domNode;this._tchHandler=a.attachEventListener("touchesBegin",T,function(f){if(this.isAutoCloseLocked()){return ;}var e=mstrmojo.dom.contains(Y,f.touch.target,true);var h=document.getElementsByClassName("heatmap-infobox"),d=(h&&h.length)||0,g,k=f.touch.target,j=false;for(g=0;g<d;g++){if(mstrmojo.dom.contains(h[g],k,true)){j=true;break;}}if(!e&&!mstrApp.hasOpenDialog()&&!j){this.closeOnTablet();}});}var X=this;X.mw=X.mw||function(d){if(X.isAutoScrollCloseLocked()){return ;}if(X.autoCloses&&!E.contains(X.domNode,E.eventTarget(self,d),true,document.body)){X.close();}};X._resizeHandler=function(d){X.positionDialog(true);};E.attachEvent(document,E.isFF?"DOMMouseScroll":"mousewheel",X.mw);E.attachEvent(document,"scroll",X.mw);E.attachEvent(window,"resize",X._resizeHandler);},getChildren:function D(){return[R(this)];},preBuildRendering:function B(){var U=R(this),T=U.defn.fmts;T.left=G+"px";T.top=G+"px";if(T.border){var S=T.border.split(" ");if(S.length>=3){this.tipNodeColor=S[2];}}if(this._super){this._super();}},postBuildRendering:function Q(){this.set("visible",true);if(this._super){this._super();}if(!this.closeOnClick){this.curtainNode.style.display="none";}},closeOnTablet:function P(){this.close();if(this._tchHandler){this._tchHandler.clear();}},postwaitStateChange:function(){var S=this.children[0],T=S.dimNode||S.domNode;if(!this.waitState&&!T){this.refresh();}},renderChildren:function(){if(!this.waitState){this._super();}},registerLock:function(S){var T=this.autoCloseLocks||[];if(I.indexOf(T,S.id)===-1){T.push(S.id);this.autoCloseLocks=T;}},releaseLock:function(S){I.removeItem(this.autoCloseLocks,S.id);},isAutoCloseLocked:function(){this.autoCloseLocks=I.filter(this.autoCloseLocks,function(S){return !!mstrmojo.all[S];});return this.autoCloseLocks.length>0;},openPopupMenu:function(T,S){this.openPopup(T,S);},registerScrollLock:function(S){var T=this.autoScrollCloseLocks||[];if($A.indexOf(T,S.id)===-1){T.push(S.id);this.autoScrollCloseLocks=T;}},releaseScrollLock:function(S){$A.removeItem(this.autoScrollCloseLocks,S.id);},isAutoScrollCloseLocked:function(){this.autoScrollCloseLocks=$A.filter(this.autoScrollCloseLocks,function(S){return !!mstrmojo.all[S];});return this.autoScrollCloseLocks.length>0;}});mstrmojo.DocInfoWindow.PLACEMENT={AUTO:1,FIXED:2,ABOVE:3,BELOW:4,LEFT:5,RIGHT:6};}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var E=mstrmojo.dom,D=mstrmojo.string,F=mstrmojo.hash,H=mstrmojo.array,C=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",tooltipOrientation:"horizontal",tooltipOffset:8,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function A(I){return I&&(I.ttp||I.n);},showTooltip:function G(W,M){var O=this;if(!O.hasOpenTooltip&&!(O._lastOpened&&O._lastOpened.visible)){var b=E.eventTarget(M,W),X=O.getItemFromTarget(b),R=O.getItemNodeFromTarget(b),f=O.getTooltipText(X),N=O.tooltipCss;if(!f){return ;}var d=E.position(R),V,P,L,T="",U=O.tooltipOffset;if(this.tooltipOrientation==="vertical"){V=d.x+d.w/2;L=C.POS_TOPCENTER;P=d.y+d.h+U;O.tooltipCss=F.copy({cssClass:"vi-regular vi-tooltip-A A-center"},N);}else{var K=E.windowDim(),S=40,Y=d.x+d.w+U,J=d.x-U,a=J-S,I=K.w-(Y+S),Z="vi-regular vi-tooltip-",Q;P=d.y;if(I>=a){V=Y;Q=I;L=C.POS_TOPLEFT;N.cssClass=Z+"C  "+N.rightCssClass;}else{V=J;Q=a;L=C.POS_TOPRIGHT;N.cssClass=Z+"D  "+N.leftCssClass;}T="max-width: "+Q+"px;";}if(O.tooltipContrast){N.cssClass=N.cssClass+" contrast";}if(N&&N.getItemCssClass){N.cssClass=H.filter([N.cssClass,N.getItemCssClass(X)],function(e){return !!e;}).join(" ");}O.richTooltip=F.copy(O.tooltipCss,{content:D.apply(O.tooltipMarkup,{c:f,style:T}),top:P,left:V,posType:L});O.richTooltip.keepArrowXPos=!!O.keepArrowXPos;O.richTooltip.keepArrowYPos=!!O.keepArrowYPos;this._super(W,M);}},onclick:function B(I){var J=this;window.setTimeout(function(){if(J.hasOpenTooltip){J.hideTooltip();}window.clearTimeout(J._tooltipTimeOut);},0);this._super(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(V,T){if(!V){return ;}var S=T&&T.length||0,U;for(U=S;U>0;U--){V=V.replace(new Array(U+2).join("#"),T[U-1]);}return V;},L=function L(T){if(!T){return ;}var Z=this,V=J.position(T.refNode||Z.refNode),Y=J.position(Z.domNode),X=T.position||R.RIGHT,U=0,a=0,S=9+(T.margin!==undefined?T.margin:0),W=" ";switch(X){case R.TOP:a=-Y.h-S;W+="t";break;case R.BOTTOM:a=V.h+S;W+="b";break;case R.LEFT:U=-Y.w-S;W+="l";break;case R.RIGHT:U=V.w+S;W+="r";break;}mstrmojo.hash.forEach(C(T,{left:U,top:a,contentNodeCssClass:W,visible:false}),function(b,d){this[d]=b;},this);this.set("visible",T.invalid);},A=function A(S){var W=this,U,V=S.errorCode,X=S.errorMsg,T=S.args,Y=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){U={content:V!==null?(W.generateContentHTML(Q(Y[V],T))||Y["*"]):X};}return U;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(U){var Y=this,a=Y.warningSlotName,d=Y[a],S=U&&U.lasting||6000,X=U.refNode||this.domNode,T=U.highlight!==false,b=U.closeOnClick===false?false:true,Z;if(!d){d=new mstrmojo.Tooltip({refNode:X,highlight:T,closeOnClick:b,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Y.addDisposable(d);Y[a]=d;Z=Y.closeOnClick=Y.getCloseOnClickListener();J.attachEvent(document.body,"click",Z);}var W=U.position||R.TOP,V="vi-warning vi-tooltip-";switch(W){case R.TOP:d.cssClass=V+"V";break;case R.BOTTOM:d.cssClass=V+"A";break;case R.LEFT:d.cssClass=V+"D";break;case R.RIGHT:d.cssClass=V+"C";break;}d.open(Y,A.call(Y,U));this.adjustPosition(U);if(T){P.toggleClass(d.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Y._warningTimeOut);Y._warningTimeOut=window.setTimeout(function(){Y.hideWarning();},S);},hideWarning:function H(){var T=this,S=T[T.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(T._warningTimeOut);delete T._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var T=S[S.warningSlotName];if(T.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var T=this;L.call(T[T.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(U){if(!U||!U.attachEventListener){return ;}var V=U._validationEventListener,T;if(V){U.detachEventListener(V);delete U._validationEventListener;}T=this.getValidationEvtListener();if(T){U._validationEventListener=U.attachEventListener("validationChange",this.id,T);}},this);},getValidationEvtListener:function B(){var T=this;return function S(U){var V=U.value;T[(V&&V.invalid?"show":"hide")+"Warning"](V);};},unrender:function K(S){var T=this[this.warningSlotName];if(T){T.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._ListSelections","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var H=mstrmojo.dom,d=mstrmojo.css,R=mstrmojo.hash,I=mstrmojo.all,K="px";function C(g){if(this.dragging){return ;}this._moveCnt++;if(this._moveCnt>this.mousemoveBuffer){var f=document.body;H.detachEvent(f,"mousemove",this._mousemoveCallback);H.detachEvent(f,"mouseup",this._cancelCallback);this.initDrag(g);}}function N(h){var f=document.body;H.detachEvent(f,"mousemove",this._mousemoveCallback);H.detachEvent(f,"mouseup",this._cancelCallback);var g=this.afterDragCancel;if(g){g.call(this.target,h);}}function e(h){H.preventDefault(window,h);if(this.dragging){return true;}var f=this.target.id,g=document.body;if(!this._mousemoveCallback){this._mousemoveCallback=function(j){C.call(I[f].dnd,j);return true;};}this._moveCnt=0;this.startE=R.copy(h);H.attachEvent(g,"mousemove",this._mousemoveCallback);if(!this._cancelCallback){this._cancelCallback=function(j){N.call(I[f].dnd,j);return true;};}H.attachEvent(g,"mouseup",this._cancelCallback);return false;}function B(g){var f=this.duringDrag;if(f){f.call(this.target,g);}return true;}function A(h){this.dragging=false;var f=document.body;H.detachEvent(f,"mousemove",this._dragCallback);H.detachEvent(f,"mouseup",this._dragEndCallback);var g=this.afterDragEnd;if(g){g.call(this.target,h);}return true;}function M(){if(this._mousemoveCallback){H.detachEvent(document.body,"mousemove",this._mousemoveCallback);delete this._mousemoveCallback;}if(this._cancelCallback){H.detachEvent(document.body,"mouseup",this._cancelCallback);delete this._cancelCallback;}if(this._dragCallback){H.detachEvent(document.body,"mousemove",this._dragCallback);delete this._dragCallback;}if(this._dragEndCallback){H.detachEvent(document.body,"mouseup",this._dragEndCallback);delete this._dragEndCallback;}}mstrmojo.DnDComponent=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.DnDComponent",isDragging:false,initD:null,startE:null,afterDragStart:null,duringDrag:null,afterDragEnd:null,target:null,mousemoveBuffer:1,init:function P(f){R.copy(f,this);},initDrag:function X(k){this.dragging=true;var g=this.target.id,j=document.body;var l=this._dragCallback;if(!l){l=this._dragCallback=function(o){return B.call(I[g].dnd,o);};}H.attachEvent(j,"mousemove",l);var f=this._dragEndCallback;if(!f){f=this._dragEndCallback=function(o){return A.call(I[g].dnd,o);};}H.attachEvent(j,"mouseup",f);var h=this.afterDragStart;if(h){h.call(this.target,k);}this._dragCallback(k);}});function F(f){this.getUnit=function g(){var h=f.items.length;return h>1?f._effLen/(h-1):1;};this.calcMinMax=function(j,h){var k=Math.round((j/f.unit+h/f.unit)/2);return{min:k,max:k};};this.preUpdateThumb=function(){f.start=Math.min(f.min*f.unit,f._effLen)+K;f.sdCssText=f.orCfg.posCssP+":"+f.start+";";};this.updateThumb=function(){f.containerNode.style[f.orCfg.posCssP]=f.start=Math.min(Math.round(f.min*f.unit),f._effLen)+K;};return this;}function T(f){this.getUnit=function(){return f._effLen/f.items.length;};this.calcMinMax=function(j,h){return{min:Math.floor(j/f.unit+0.5),max:Math.floor(h/f.unit-0.5)};};function g(){var h=f.min,k=f.unit;var l=f.start=(h*k)+K;var j=f.length=Math.max(Math.round((f.max-h+1)*k-f.gap),0)+K;return{st:l,len:j};}this.preUpdateThumb=function(){var j=f.orCfg,h=g();f.sdCssText=j.posCssP+":"+h.st+";"+j.lenCssP+":"+h.len+";";};this.updateThumb=function(){var j=f.orCfg,h=g(),k=f.containerNode.style;k[j.posCssP]=h.st;k[j.lenCssP]=h.len;};return this;}var b="<span>{@content}</span>";mstrmojo.Slider=mstrmojo.declare(mstrmojo.Container,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.Slider",markupString:'<div id="{@id}" class="mstrmojo-Slider {@cssClass} {@clsType} {@clsOrientation}" style="{@cssText}" ><div class="cont"><div class="bk" style="{@bkCssText}"></div><div class="sdc" style="position:absolute;{@sdcCssText}" mstrAttach:mouseout><div class="sd" style="{@sdCssText}"><div class="t1"></div><div class="t2"></div><div class="t3"></div></div></div></div></div>',sdCssText:"",cssClass:"sc",clsType:"sc2",clsOrientation:"sc-v",orCfg:null,typeHelper:null,_tooltip_pos:"TL",useRichTooltip:true,init:function W(f){this._super(f);if(f.isHoriz){this.orCfg={posCssP:"left",marginCssP:"marginLeft",lenCssP:"width",lenP:"clientWidth",opPosCssP:"top",thickP:"clientHeight",offsetP:"x"};this.clsOrientation=" sc-h";this._tooltip_pos=mstrmojo.tooltip.POS_BOTTOMLEFT;}else{this.orCfg={posCssP:"top",marginCssP:"marginTop",lenCssP:"height",lenP:"clientHeight",opPosCssP:"left",thickP:"clientWidth",offsetP:"y"};this._tooltip_pos=mstrmojo.tooltip.POS_TOPRIGHT;this.titleHeight=(f.docSelector.fmts.ttl&&f.docSelector.fmts.ttl.height)?parseInt(f.docSelector.fmts.ttl.height,10):0;}this._exRoom=this.thumbWidth;if(this.multiSelect){this._exRoom*=2;}if(f.multiSelect){this.typeHelper=new T(this);}else{this.clsType="sc1";this.typeHelper=new F(this);}},markupSlots:{dndNode:function(){return this.domNode.firstChild;},bgNode:function(){return this.domNode.firstChild.firstChild;},sdcNode:function(){return this.domNode.firstChild.lastChild;},containerNode:function(){return this.domNode.firstChild.lastChild.firstChild;},frontNode:function(){return this.domNode.firstChild.lastChild.firstChild.firstChild;},thumbNode:function(){return this.domNode.firstChild.lastChild.firstChild.childNodes[1];},endNode:function(){return this.domNode.firstChild.lastChild.firstChild.lastChild;},tooltipNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:function(){this.synchronizeSlider();}},start:"50px",length:"30px",min:0,max:0,gap:1,ghost:null,thumbWidth:11,cssBkBW:1,dndNode:null,synchronizeSlider:function O(){var o=this.orCfg,l=o.lenCssP,h=this[l],f=parseInt(h,10),s=this.hasRendered,q=this.titleHeight||0;var j=this._effLen=isNaN(f)?0:(f-this._exRoom-q);if(h){var r={};r[l]=Math.max(parseInt(h,10)-(2*this.cssBkBW),0)-q+K;var k={};k[l]=j+K;k[o.posCssP]=Math.round(this._exRoom/2)+K;k[o.opPosCssP]="0"+K;if(s){R.copy(r,this.bgNode.style);R.copy(k,this.sdcNode.style);}else{this.bkCssText=d.getCssTextFromObj(r);this.sdcCssText=d.getCssTextFromObj(k);}}var t=this.selectedIndices;if(!R.isEmpty(t)){this.min=this.items.length-1;this.max=0;var p;for(p in t){if(t[p]){this.min=Math.min(this.min,p);this.max=Math.max(this.max,p);}}}var g=this.typeHelper;this.unit=g.getUnit();if(s){g.updateThumb();}else{g.preUpdateThumb();}},preBuildRendering:function E(){this.synchronizeSlider();},postBuildRendering:function Z(){this._super();if(this.items.length>1){var f=this.dnd=new mstrmojo.DnDComponent({target:this});var g=this.id;this.__mouseDownEvt=function(h){H.stopPropogation(window,h);e.call(I[g].dnd,h);return true;};H.attachEvent(this.dndNode,"mousedown",this.__mouseDownEvt);f.afterDragStart=this.initDrag;f.duringDrag=this.ondrag;f.afterDragEnd=this.ondrop;f.afterDragCancel=this.cancelDrag;}},initDrag:function X(l,f){f=f||window;var k=this.configureGhost(true),g=this.orCfg,j=this.dnd,h=j.startE;j.initD={tP:parseInt(this.start,10),sL:this._effLen,contL:k.containerNode[g.lenP],offset:H.getMousePosition(h,f)[g.offsetP],td:H.eventTarget(f,h)};},configureGhost:function V(g){var j=this.ghost;if(!j){var l=this.containerNode.cloneNode(true),k=l.childNodes;d.addClass(l,"gh");l.style.display="none";j=this.ghost={containerNode:l,frontNode:k[0],thumbNode:k[1],endNode:k[2]};this.sdcNode.appendChild(l);}var h=this.ghost.containerNode.style,f=this.orCfg;R.copyProps([f.posCssP,f.lenCssP],this.containerNode.style,h);if(g){h.display="block";}return j;},ondrag:function J(q,p){p=p||window;var r=this.dnd.initD,k=this.ghost.containerNode,w,h,f,o=this.min,s=this.max,l=this.orCfg,g=l.lenCssP,u=l.posCssP;var t=H.getMousePosition(q,p)[l.offsetP]-r.offset;switch(r.td){case this.thumbNode:w=Math.max(Math.min(r.tP+t,r.sL-r.contL),0);h=w+r.contL;k.style[u]=w+K;var j=this.typeHelper.calcMinMax(w,h);o=j.min;s=j.max;break;case this.frontNode:w=Math.max(Math.min(r.tP+t,r.tP+r.contL),0);f=Math.max(Math.min(r.contL-t,r.tP+r.contL),0);k.style[u]=w+K;k.style[g]=f+K;o=Math.min(Math.floor(w/this.unit+0.5),this.max);break;case this.endNode:f=Math.max(Math.min(r.contL+t,r.sL-r.tP),0);h=r.tP+f;k.style[g]=f+K;s=Math.max(Math.floor(h/this.unit-0.5),this.min);break;default:return ;}if(o!==this.min||s!==this.max){this.min=o;this.max=s;this.typeHelper.updateThumb();}this._updateTooltip();},ondrop:function a(){this.typeHelper.updateThumb();var k=this.ghost;if(k){k.containerNode.style.display="none";}this.hideTooltip();var l=this.dnd&&this.dnd.initD;if(this.makeSelection&&l){this.makeSelection({selItem:l.td});}var f=this.items;if(f&&f.length){var h=[],g;for(g=this.min;g<=this.max;g++){var j=f[g];if(j){h.push(g);}}this.select(h);}this.dnd.initD=null;},cancelDrag:function U(g,f){if(this.makeSelection){this.makeSelection({selItem:H.eventTarget(f||window,this.dnd.startE)});}},showTooltip:function G(g,f){this.configureGhost(false);this._updateTooltip(g,f);this._super(g,f);},hideTooltip:function L(g,f){if(this.dnd&&this.dnd.dragging){return ;}this._super(g,f);},_updateTooltip:function S(){var p=this.orCfg,q={contentNodeCssClass:"sc-tooltip",refNode:this.domNode,posType:this._tooltip_pos},g=(this.ghost)?this.ghost.containerNode:this.containerNode;q[p.opPosCssP]=0;q[p.posCssP]=g.style[p.posCssP];q.content="";var l=this.items,j=l.length;if(l&&j){var f=(l[this.min]||l[0]),h=this.getItemTooltip(f),k=h;if(this.min!==this.max){var o=(l[this.max]||l[j-1]);k=mstrmojo.desc(146,"From:")+" '"+h+"' "+mstrmojo.desc(147,"To:")+" '"+this.getItemTooltip(o)+"'";}q.content=b.replace(/\{@content\}/g,k);}this.set("richTooltip",q);},getItemTooltip:function D(f){var g=f?f.n:"";return"'"+(g.length>20?g.slice(0,20)+"...":g)+"'";},unrender:function Y(f){this.ghost=null;this.hideTooltip();this.min=0;this.max=(this.items&&this.items.length-1)||0;var g=this.dndNode,h=this.__mouseDownEvt;if(h&&g){H.detachEvent(g,"mousedown",h);}M.call(this);this._super(f);},onselectionChange:function Q(){var f=this.selectedIndices,g=R.isEmpty(f);if(f){this.set("max",g?this.items.length-1:R.max(f,false,true));this.set("min",g?0:R.min(f,false,true));if(this.typeHelper){this.typeHelper.updateThumb();}}if(this.onchange){this.onchange();}}});mstrmojo.Slider.SINGLE_HANDLE_WIDTH=11;mstrmojo.Slider.SCROLLHANDLEWIDTH=11;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget","mstrmojo.tooltip","mstrmojo.string","mstrmojo.array");var O=0,I=mstrmojo.array,B=mstrmojo.string;function P(){var U=this.textNode,W=this.imgNode;if(this.eg!=null){W.style.display="none";U.innerHTML=this.eg||"";U.style.display="block";}else{U.style.display="none";W.style.display="block";if(this.tooltip){W.setAttribute("ttl",this.tooltip);}var V=this.getFormats();this.retrieveGraphSrc(V.height,V.width);}}var T={6:"poly",7:"rect",100:"circle"};function H(){var e=this.as,Z=e&&e.length;if(!Z){return ;}var Y=this.id,d=Y+"_map"+O++,W=[],b=-1,X;for(X=0;X<Z;X++){var V=e[X];V.id=Y;V.aid=X;V.tooltip=B.multiReplace(V.tooltip||"",{"&#13":"<br />","&#32":" ",'"':"&quot;"});if(!isNaN(V.shape)){V.shape=this.getAreaShapeName(V.shape);}if(V.tks||V.tks===""||V.tty===1){V.extra=' href="#" ';}W[++b]=B.apply(this.areaMarkup,V);}var a='<map id="'+d+'" name="'+d+'">'+W.join("")+"</map>";if(!this.domNode){this.att='usemap="#'+d+'" ';this.map=a;}else{var U=document.createElement("div");U.innerHTML=a;if(this.mapNode){U=U.firstChild;this.mapNode.innerHTML=U.innerHTML;}else{this.imgNode.setAttribute("usemap","#"+d);this.mapNode=this.domNode.appendChild(U.firstChild);}}}var A=mstrmojo.GraphBase=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.GraphBase",cssClassPrefix:"mstrmojo-GraphBase",markupString:'<div id="{@id}" class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><img {@att}src="../images/1ptrans.gif" class="{@cssClassPrefix} {@cssImageClass}" hidefocus="true" />{@map}</div>',att:"",map:"",cAreaIdx:-1,useRichTooltip:true,markupSlots:{imgNode:function J(){return this.domNode.childNodes[1];},mapNode:function F(){return this.domNode.childNodes.length>2?this.domNode.childNodes[2]:null;},textNode:function M(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function K(){this.domNode.style.display=(this.visible)?"block":"none";}},preBuildRendering:function C(){H.call(this);return this._super();},postBuildRendering:function Q(){P.call(this);return this._super();},setModel:function L(U){this.model=U;},updatingTooltipHelper:function R(Y,h,b){var V=Y&&Y.getAttribute("aid"),U=Y&&Y.getAttribute("ttl"),X=Y.getAttribute("SC"),a={refNode:this.domNode,posType:mstrmojo.tooltip.POS_BOTTOMLEFT,contentNodeCssClass:"gp-tooltip"},g=(this.model.getZoomFactor?this.model.getZoomFactor():(this.model.docModel?this.model.docModel.getZoomFactor():1))+"em";if(V==this.cAreaIdx){return ;}this.cAreaIdx=V;a.content=U||this.defaultTooltip;var W="font-size:"+g+";";if(X){W+="border-color:#"+X;}a.contentNodeCssText=W;var d=Y.getAttribute("coords"),f=99999,e=99999;if(!b){if(d&&d.length>0){d=d.split(",");var Z=0;while(Z+1<d.length){f=Math.min(f,parseInt(d[Z++],10));e=Math.min(e,parseInt(d[Z++],10));}}}if(f===99999){f=h.x;}if(e===99999){e=h.y;}a.top=e;a.left=f;this.richTooltip=null;this.set("richTooltip",a);},redraw:function N(){if(!this.hasRendered){return false;}P.call(this);var U=this.getFormats();if(this.as&&U.height&&U.width){this.refreshMap();}return true;},refreshMap:function G(){if(this.as){H.call(this);}},getAreaShapeName:function D(U){return T[parseInt(U,10)]||"default";}});var S=A.tooltipCLS="mstrmojo-mobileGraph-Tooltip-content",E=A.canvasCLS="mobile-graph-highlight-canvas";A.hideTooltips=function(){I.forEach(document.getElementsByClassName(S),function(U){U.style.display="none";});I.forEach(document.getElementsByClassName(E),function(U){U.getContext("2d").clearRect(0,0,U.width,U.height);U.width=U.width;});};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasLayout");mstrmojo.ui.editors.controls.PreviewButton=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.PreviewButton",markupString:'<div id="{@id}" class="mstrmojo-ui-PreviewButton {@cssClass}" style="{@cssText}"><div class="cf" mstrAttach:click><div class="preview"></div><div class="btn">&nbsp;</div></div><div class="host"></div></div>',markupSlots:{previewNode:function(){return this.domNode.firstChild.firstChild;},btnNode:function(){return this.domNode.firstChild.lastChild;},widgetHostNode:function(){return this.domNode.lastChild;},clickableNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{h:{previewNode:"100%",btnNode:"100%",widgetHostNode:"0px"},w:{previewNode:"100%",btnNode:"20px",widgetHostNode:"all"},xt:true},isHostedWithin:false,getLayoutOffsets:function B(){return{h:2,w:2};},anchorSlot:"clickableNode",updatePreview:function C(){throw new Error(this.scriptClass+" must implement updatePreview.");},getPopupHostNode:function A(){return this.widgetHostNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupWidget","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.css");mstrmojo.ui.menus.MenuPopup=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui.menus._IsMenuPopup],{scriptClass:"mstrmojo.ui.menus.MenuPopup",popupConfig:null,init:function B(D){this._super(D);var C=this.popupConfig;if(!C.contents){throw new Error("Cannot open popup without contents.");}this.cssClass=C.cssClass||"";this.addChildren(C.contents);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-MenuPopup");},shouldPropagateLockHover:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.rw.DocLayout","mstrmojo._Formattable","mstrmojo._HasWaitIcon","mstrmojo.dom");mstrmojo.DocLayout=mstrmojo.declare(mstrmojo.rw.DocLayout,[mstrmojo._Formattable,mstrmojo._HasWaitIcon],{scriptClass:"mstrmojo.DocLayout",formatHandlers:{domNode:["B","background-color","D","min-height","width"]},markupMethods:{onminHeightChange:function(){var N=this.minHeight;if(!N){var M=this.getFormats();N=M&&M["min-height"];}if(N){this.containerNode.style[mstrmojo.css.MINHEIGHT]=N;}}},getHeight:function E(){var M=0;mstrmojo.array.forEach(this.children,function(N){M+=N.getHeight();});return M||this.containerNode.offsetHeight;},getWidth:function I(){var M=this.children;return(M&&M.length)?M[0].getWidth():this.containerNode.offsetWidth;},preBuildRendering:function K(){var M=this.getFormats();if(M&&M["min-width"]!==undefined){M.width=M["min-width"];}this._super();},renderChildren:function L(){this._super();this.resizeOrReposition();},resizeOrReposition:function D(){var O=this.containerNode;if(!!this.defn.aw){var U=this.model.getAutoWidthIDs(),S=(U&&U.length)||0,Y=0,X=mstrmojo.all,P;if(!S){return ;}for(P=0;P<S;P++){Y=Math.max(this._getWidgetRightMostPosition(X[U[P]]),Y);}Y=Math.max(this.getLayoutMinWidth(),Y);if(Y>parseInt(this.getFormats().width,10)){O.style.width=Y+"px";}}var W=this.model.zt;if(mstrApp.isMobile&&W){var M=this.parent.domNode;if(M){var Q=this.model.controller,N=!!Q.orientation,Z=0,V=this.parent,R=V.getHeight()-V.fixedHeaderNode.clientHeight-V.fixedFooterNode.clientHeight;if(W===2){if(!Q.toolBarDelegated){R-=Q.getBottomToolBarHeight();}Z=Math.round(N?Math.max((R-this.getHeight()),0)/2:0)+"px";}O.style.margin=Z+" auto";var T=this;window.setTimeout(function(){Q.nudgeWidget(T.id,{left:O.offsetLeft,top:O.offsetTop});},0);}}},getLayoutMinWidth:function F(){return 0;},_getWidgetRightMostPosition:function F(M){return parseInt(M.getFormats().left,10)+((M.getDim&&M.getDim().w)||M.domNode.offsetWidth);},renderCtrlsInViewport:function C(){this._super();this.resizeOrReposition();},adjustAutoWidth:function H(M){if(!this.defn.aw||!M){return ;}var O=this.containerNode.style,N=parseInt(O.width,10)||0;var P=this;window.setTimeout(function(){var Q=P._getWidgetRightMostPosition(M);if(Q>N){O.width=Q+"px";}},1);},_getModelChildNodes:function B(P,O,S,N,R){var Q=this.model.getNonFixedSections(P,O);var M=Q.length;N=isNaN(N)?M:N;S=S||0;if(S>0||N<M){Q=Q.slice(S,S+N);}return R?{nodes:Q,total:M}:Q;},getChildren:function G(O,N,Q,M,P){return this._getModelChildNodes(O||this.node,N||false,Q,M,P);},getCaptureDimensions:function J(){var N=this.domNode,M;if(!this.domNode){return null;}M=mstrmojo.dom.position(N);M.w=Math.min(N.offsetWidth,M.w);M.h=Math.min(N.offsetHeight,M.h);return M;},preserveChildDomOrder:false,postBuildRendering:function A(){if(window.mstrMobileApp!==undefined){this.defn.lastOrientation=mstrMobileApp.getOrientation();}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.rw.DocSubsection","mstrmojo._CanGrowOrShrink","mstrmojo.boxmodel");mstrmojo.DocSubsection=mstrmojo.declare(mstrmojo.rw.DocSubsection,[mstrmojo._CanGrowOrShrink],{scriptClass:"mstrmojo.DocSubsection",postBuildRendering:function D(){var H=this.defn;if(H.hc||H.vc){var F=this.domNode,J=this.getFormats(),K=this.id,I=J.height,G=J.width;H.attachEventListener("resized",K,function(){var M=J.height,L=J.width;if(M){F.style.height=M;}if(L){F.style.width=L;}});H.attachEventListener("adjustSize",K,function(N){var M=F.style,L=M.height;if(H.hc&&M.width!==G){M.width=G;}if(H.vc&&M.height!==I){M.height=I;}this.performCanGrowCanShrink(this.children);N.heightReduced=(parseInt(L,10)>parseInt(M.height,10));});}return this._super();},onchildRenderingChange:function B(H){this._super(H);if(this.renderMode!=="scroll"){var F=this.parent.slot,G=F==="fixedHeaderNode"||F==="fixedFooterNode";this.performCanGrowCanShrink([(H&&H.src)||H],G);}},portalMaximized:function C(){var I=this.defn,J=I.vc,G=I.hc;if(!G&&!J){return{};}delete I.vc;delete I.hc;delete I.ck;var H=this.getFormats(),F=this.model,N=this.domNode,K=this;var L={HideIfEmpty:-1};var M=function(R,P,Q){var S=R.toLowerCase(),O=parseInt(N.style[S],10);P=((P===undefined)?O:Math.max(parseInt(P,10),O))+"px";if(H[S]!==P){H[S]=P;L[R]=mstrmojo.boxmodel.px2Inches(F.getZoomProps(),P);delete K["_fixed"+R];}Q=Q||"";L["Max"+R]=0;L["CanGrow"+Q]=0;L["CanShrink"+Q]=0;};if(J){M("Height",H.normHeight);}if(G){M("Width",H.normWidth,"Horizontal");}I.raiseEvent({name:"resized"});return L;},adjustSectionSize:function A(){var F=this.defn;if(F.vc||F.hc){return F.raiseEvent({name:"adjustSize"});}return null;},refresh:function E(){if(!this.hasRendered){return ;}var G=this.children||[],F=G.length-1;for(F;F>=0;F--){if(G[F].refresh){G[F].refresh();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocLayoutViewer","mstrmojo._Formattable","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.dom");function J(f){var g,V=this._newLinks,e=mstrmojo.hash.copy(V,this._allLinks),g=f?e:V;this._newLinks={};if(mstrMobileApp.isOnline()){return ;}var X=this.controller,W,a,Y=[],h=[],b;for(W in g){a=g[W];b=X.getLinkRequest(a);if(b){Y.push(b);h.push(a);}}var Z=Y.length;if(Z){var d=function(j){for(W=0;W<Z;W++){a=h[W];a.src.setLinkEnabled(j[W]);}};if(mstrApp.isHosted()){}else{this.model.getDataService().checkCachedLinkTargets(Y,{success:d,failure:mstrmojo.emptyFn});}}}function D(){var X=this.children,W,V;for(W=0,V=(X&&X.length)||0;W<V;W++){var Z=X[W],Y=Z.slot;if(Y){this.setSlotDimensions(Y,Z.height,Z.width);}}}mstrmojo.MobileDocLayoutViewer=mstrmojo.declare(mstrmojo.DocLayoutViewer,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.MobileDocLayoutViewer",layoutConfig:{h:{groupBy:"0",fixedHeaderNode:"auto",layout:"100%",fixedFooterNode:"auto",incFetchNode:"0"},w:{layout:"100%"}},formatHandlers:{domNode:["background-color"]},scrollerConfig:{vScroll:false,hScroll:false,bounces:false,showScrollbars:false},usesTouches:true,init:function O(V){this._super(V);this._newLinks={};this._allLinks={};},postBuildRendering:function T(){this._super();if(this.fixedFooterNode.clientHeight>0){D.call(this);}},preBuildRendering:function B(){this._super();this._scrollCssText="overflow:"+((!mstrmojo.dom.isWinPhone)?"hidden":"auto");var W=this.id,V=this.updateScroller;if(!this.afterScrollSubscr){this.afterScrollSubscr=this.docLayout.attachEventListener("afterScroll",W,function(){this.updateScroller();J.call(this);});this.model.attachEventListener("partialUpdate",W,V);}},mapID:null,setMapID:function I(V){this.mapID=V;},beforeViewHidden:function E(V){if(!this.mapID){return ;}var W=mstrmojo.all[this.mapID];if(W&&W.beforeViewHidden){W.beforeViewHidden(V);}this.mapID=null;},updateScrollerConfig:function R(){var W=this.scrollerConfig,Y=this.docLayout.containerNode;if(Y){var a=this.docLayout,X={start:0,end:Math.max(a.getWidth()-this.scrollboxWidth,0)},d={start:0,end:Math.max(a.getHeight()-this.scrollboxHeight,0)},V=(d.start!==d.end),Z=(X.start!==X.end),b;if(V||Z){b={x:X,y:d};}else{W.origin={x:0,y:0};}mstrmojo.hash.copy({scrollEl:this.scrollboxNode.firstChild,offset:b,vScroll:V,hScroll:Z,showScrollbars:false},W);if(!W.origin){W.origin=this._origin={x:0,y:0};}a.scrollBuffer=parseInt(mstrApp.rootView.getContentDimensions().h,10);}return this._super();},initScroller:function M(V){this._super(V);V.attachEventListener("scrollDone",this.id,function(W){this._origin={x:W.x,y:W.y};this.notifyScrollListeners(W);});},touchBegin:function N(W){var V=this.parent;if(V&&V.isAnimating&&V.isAnimating()){W.stop();return false;}return this._super(W);},shouldTouchBubble:function K(V){if(mstrmojo.dom.contains(this.scrollboxNode,V.target,true,this.domNode)){return this._super(V);}return true;},touchSwipeBegin:function L(X){if(this.shouldTouchBubble(X)){var W=this.parent,V=W.canScroll&&W.canScroll(X);if(V){this._parentScrolling=true;W.beginScroll(X);}return V;}this._super(X);},touchSwipeMove:function A(V){if(this._parentScrolling){this.parent.scroll(V);return ;}this._super(V);},touchSwipeEnd:function P(V){V.evt.handled=true;if(this._parentScrolling){delete this._parentScrolling;this.parent.endScroll(V);return ;}this._super(V);},touchTap:function S(){var V=this.controller;if(V&&V.viewTap){V.viewTap();}},renderChildren:function F(){this._super();this.updateScroller();},unrender:function Q(){delete this.scrollerConfig.origin;var V=this._scroller;if(V){delete V.origin;}if(this.subscr){mstrmojo.publisher.unsubscribe(this.subscr);delete this.subscr;}if(this.afterScrollSubscr){mstrmojo.publisher.unsubscribe(this.afterScrollSubscr);delete this.afterScrollSubscr;}this._super();},addLinkInfo:function H(W,V){this._newLinks[W]=V;},onRender:function C(){this._super();if(!this.subscr){var W=mstrmojo.publisher;this.subscr=W.subscribe(W.NO_SRC,W.CONNECTIVITY_CHANGED_EVENT,function(a){if(a){var X=this._allLinks,Y,Z;for(Y in X){Z=X[Y].src;if(!Z.linkEnabled){Z.setLinkEnabled(true);}}}else{J.call(this,true);}},this.id);}if((mstrApp.useBinaryFormat||mstrApp.isHosted())&&!mstrMobileApp.isOnline()){var V=this;window.setTimeout(function(){J.call(V);},100);}},setSlotDimensions:function U(d,b,Y){if(d==="layout"){var X=parseInt(this.height,10),W=this.fixedHeaderNode.clientHeight,a=this.fixedFooterNode.clientHeight,V=parseInt(b,10),Z=X-W-a;if(W+a>=X){b=0;}else{if(V!=Z){b=Z+"px";}}}this._super(d,b,Y);},getCaptureDimensions:function G(){return this.docLayout.getCaptureDimensions();}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.DocTextfield");var I=mstrmojo.dom,K=mstrmojo.css,L=1,Q=2,A=3,N=4,P=5,E=6,B=1,D=["","CaptionOnly","IconOnly","IconLeft","IconRight","IconTop","Custom"];var M=[];M[L]=M[Q]=M[E]={minsp:0,mincs:0};M[A]=M[N]={minsp:10,mincs:5};M[P]={minsp:4,mincs:5};function F(V,S,X,R,T){var Y=I.position(V),U=I.position(V.parentElement),W=V.style;R=R||{};R={t:R.t||0,r:R.r||0,b:R.b||0,l:R.l||0};R.h=U.h-R.t-R.b;R.w=U.w-R.l-R.r;if(T){if(Y.h>R.h){W.height=R.h+"px";}if(Y.w>R.w){W.width=R.w+"px";}Y=I.position(V);}if(S){W.top=((R.h-Y.h)/2+R.t)+"px";}if(X){W.left=((R.w-Y.w)/2+R.l)+"px";}}function J(V,W,T){var S=document.createElement("img"),R=S.style;V.appendChild(S);I.attachEvent(S,"load",function(){var X=R.display;R.display="block";F(S,true,true);R.display=X;},true);S.className=T;var U=this.model.getDataService();S.src=(U&&U.getDocImage&&U.getDocImage(W))||W;}mstrmojo.DocButton=mstrmojo.declare(mstrmojo.DocTextfield,null,{scriptClass:"mstrmojo.DocButton",pressed:false,markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocButton {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div class="mstrmojo-DocButton-Container" mstrAttach:click,mousedown><div class="mstrmojo-DocButton-IconNode"></div><div class="mstrmojo-DocButton-ValueNode" style="{@valueNodeCssText}">{@v}</div></div><div class="mstrmojo-DocButton-EffectOverlay"></div>{@buttonNodeMarkup}</div>',markupSlots:{iconNode:function(){return this.domNode.firstChild.firstChild;},valueNode:function(){return this.domNode.firstChild.lastChild;},buttonContainerNode:function(){return this.domNode.firstChild;}},markupMethods:{onpressedChange:function(){var R=!!this.pressed,U=this.defn,T=this.domNode,S=this.fmts;K.toggleClass(T,"pressed",R);this.setBackgroundColor();this.valueNode.style.color=R?U.fhlc:(S.color||"");},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},formatHandlers:{domNode:["T","z-index","D","B","P","background-color"],valueNode:["font","fx","color","white-space","overflow"]},setBackgroundColor:function H(){this.domNode.style.backgroundColor=(!!this.pressed)?this.defn.bhlc:(this.fmts["background-color"]||"");},getAnchor:function O(){return this.domNode;},getDPI:function C(){return this.model.dpi;},buildRendering:function G(){this._super();var S=this.defn,k=this.domNode,V=this.buttonContainerNode,j=this.iconNode,p=this.valueNode,e=parseInt((S&&S.dpst)||1,10),f="px";K.toggleClass(k,D[e],true);k.onselectstart=k.ondragstart=function(){return false;};var b=this.getFormats(),X=parseInt(K.getComputedStyle(V).borderWidth,10)*2;if(isNaN(X)){X=0;}var Z=parseFloat(b.width)-X,l=parseFloat(b.height)-X,W=M[e],a=W.minsp,r=W.mincs,d,Y=j.style,g=p.style;function U(s,t){Y.width=s+f;Y.height=t+f;}var q=V.style;q.height=l+f;q.width=Z+f;switch(e){case P:var T=this.getDPI(),R=l+K.getBorderWidths(b["border-width"],T).h+K.getPaddings(b.padding,T).h;d=Math.max(0,Math.min(l-a-r,R*0.6));U(Z,d);F(j,false,true);F(p,true,false,{t:d+a},true);break;case A:case N:d=Math.max(0,Math.min(l,Z-a-r));U(d,d);F(j,true,false);g[(e===A)?"left":"right"]=(d+a)+f;F(p,true,false);break;case L:F(p,true,false);break;case Q:case E:break;}if(B===parseInt(S.fe,10)){K.addClass(k,"gloss");}J.call(this,j,S.nmurl,"normal");J.call(this,j,S.hlurl||S.nmurl,"hilight");var o=document.createElement("div");K.addClass(o,"mstrmojo-DocButton-IconMaskNode");j.appendChild(o);}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocTextfield","mstrmojo._HasTouchScroller","mstrmojo._TouchGestures");mstrmojo.android.DocTextfield=mstrmojo.declare(mstrmojo.DocTextfield,[mstrmojo._HasTouchScroller,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.DocTextfield",formatHandlers:{domNode:["T","D","fx","z-index"],valueNode:["B","F","P","background-color","text-align","white-space","overflow"]},scrollerConfig:{bounces:false,showScrollbars:false},updateScrollerConfig:function A(){var C=this.scrollerConfig,E=this.domNode,B=this.getFormats(),F=this.valueNode,D={Height:{a:"y",s:"v"},Width:{a:"x",s:"h"}},G={};if(B.overflow==="Scroll"||B.overflow==="auto"){C.scrollEl=F;E.style.overflow="hidden";F.style.display="inline-block";mstrmojo.hash.forEach(D,function(K,J){if(C["no"+K.s.toUpperCase()+"Scroll"]){return ;}var I=parseInt(B[J.toLowerCase()],10);if(isNaN(I)){I=E["client"+J];}var L=Math.max(F["offset"+J]-I,0),H=C[K.s+"Scroll"]=(L!==0);if(H){G[K.a]={start:0,end:L};}});C.offset=G;C.origin=C.origin||{x:0,y:0};}else{F.style.width=E.style.width;F.style.height=E.style.height;}return C;}});}());(function(){mstrmojo.requiresCls("mstrmojo.GridBase","mstrmojo.Grid");mstrmojo.XtabZone=mstrmojo.declare(mstrmojo.Grid,null,{scriptClass:"mstrmojo.XtabZone",markupString:'<div id="{@id}" class="mstrmojo-XtabZone" style="position:relative;{@cssText}"></div>',markupSlots:{gridContainerNode:function(){return this.domNode;}}});}());(function(){mstrmojo.XtabCP=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.XtabCP",base:null,lookupBase:null,colWidths:null,forceAutoRowHeight:false,startIndexInContainer:0,updatedRows:null,preServeUpdatedRows:true,init:function K(L){mstrmojo.hash.copy(L,this);},initContent:function D(O){this.startIndexInContainer=O||this.startIndexInContainer||0;var N=this.base||[],M=N.show,L=N.items;this.rc=M&&L?L.length:0;this.colWidths=(M&&N.cws)||[];this.isDownloading=false;this.isDownloaded=true;this.invalidData=false;},isDataAvailable:function B(M,L){return !this.invalidData;},download:function A(N,M,L){if(!this.isDownloaded&&!this.isDownloading&&this.dataSource){this.isDownloading=true;this.dataSource.download(0,L);}},invalid:function E(){this.invalidData=true;this.isDownloading=false;this.isDownloaded=false;this.preServeUpdatedRows=true;if(this.gridData){this.oldGridData=this.gridData;this.oldBase=this.base;this.updatedRows={};}},getRowHeight:function C(){return this.gridData.rh;},getNumAutoHeightRows:function(){return this.forceAutoRowHeight?this.rc:0;},getAvailableRowsCount:function J(){return this.rc;},getUpdatedRows:function H(){return this.updatedRows;},getRowCells:function(f){var V=this.base||[],R=V.items||[],g=R[f]||[],T=g.items,j=this.lookupBase,Y=this.interactiveCellsArray,h=this.gridData.css,p=this.gridData.gsi,Z=p&&p.prop&&p.prop.cols&&p.prop.cols.mg,l=null,U,b,Q,k,s,P,d,O,S,N,a="-1";if(this.oldGridData){U=this.oldBase;b=U&&U.items;Q=b[f]&&b[f].items;}for(s=0,k=(T&&T.length)||0;s<k;s++){P=T[s];if(P){P.v=P.v||P.n;if(j&&!P._e){d=j[P.tui];O=P.fi;S=(d&&d.fs)||[];N=S[O]||S[0];P.ts=P.ts||N&&N.bftp;l=d&&d.es[P.idx];if(l){P.v=P.v||l.n;if(l.rv){P.rv=l.rv;}P._e=l;}}if(!P.css){var w=P.cni;if(w!==undefined){P.css=h[w].n;}else{P.css="";}}if(!P._d&&Q&&this.preServeUpdatedRows){var M=Q[s];if(!M||(M.rs!==P.rs)){this.preServeUpdatedRows=false;this.updatedRows={};}else{if((M.v&&P.v!==M.v)){var u={};if(P.v!==M.v){u.v=M.v;}if(P.css!==M.css){u.css=M.css;}P._d=u;this.updatedRows[this.startIndexInContainer+f]=true;}}}P._gd=this.gridData._bidx||0;if(Y){if(P._ei===undefined||Y[P._ei]!==P){P._ei=Y.push(P)-1;}}if(this.axis){P.axis=this.axis;}var o=P.pi,W=function W(r,e){var x=j&&j[r];return x&&x.es[e];},X=function X(x,r,z){var e=x[r].items[z];if(e&&e._e===undefined){e._e=W(e.tui,e.idx);}return e;};if(o){if(o.ri!==undefined&&o.ci!==undefined){if(P.axis===2&&Z!==a){P._p=R[o.ri].items[s];}else{P._p=R[o.ri].items[o.ci];}}else{var t=this.gridData.ghs,q=o.left,L=o.top;if(q){P._lp=X(t.rhs.items,q.ri,q.ci);}if(L){P._tp=X(t.chs.items,L.ri,L.ci);}}}}}return T;},getUnmergedCells:function F(M){var Q=[];rows=(this.base&&this.base.items)||[];if(M>rows.length-1||M<0){return Q;}var O=this.gridData.css,L=rows[M].items[0],R=L&&L.pi,P=R&&R.ri,S=R&&R.ci;while(R&&P>-1&&S>-1){L=L._p||rows[P].items[S];var N={};mstrmojo.hash.copy(L,N);if(!N.css){N.css=O[N.cni].n;}N.rs=L.rs-M+P;Q.splice(0,0,N);R=L&&L.pi;P=R&&R.ri;S=R&&R.ci;}return Q;},getIndentPadding:function I(L){return L*14;},getCell:function G(L,M){var N=this.base.items;return N[L].items[M];}});}());(function(){mstrmojo.XtabVACP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabVACP",cps:[],initContent:function G(L){this.startIndexInContainer=L||0;this.rc=0;this.type=0;this.colWidths=[];var J;for(J=0;J<this.cps.length;++J){var K=this.cps[J];K.initContent(this.startIndexInContainer+this.rc);this.rc+=K.rc;this.type|=K.type;var I=K.colWidths;if(I&&(I.length>this.colWidths.length)){this.colWidths=I;}}},getNumAutoHeightRows:function(){return this.cps[0].getNumAutoHeightRows();},getRowHeight:function C(){return this.cps[0].getRowHeight();},getRowCells:function(I){var J=0,K=this.cps[J];while(I>=K.rc){I-=K.rc;K=this.cps[++J];}return K.getRowCells(I);},getUnmergedCells:function(I){var J=0,K=this.cps[J];while(I>=K.rc){I-=K.rc;K=this.cps[++J];}return K.getUnmergedCells(I);},getCell:function(I,K){var J=0,L=this.cps[J];while(I>=L.rc){I-=L.rc;L=this.cps[++J];}return L.getCell(I,K);},isDataAvailable:function D(L,K){var J=this._getCPs(L,K),I;for(I=0;I<J.length;++I){if(!J[I].isDataAvailable(L,K)){return false;}}return true;},getAvailableRowsCount:function F(){var K=0,I;for(I=0;I<this.cps.length;++I){var J=this.cps[I];if(J.isDataAvailable()){K+=J.getAvailableRowsCount();}}return K;},_getCPs:function H(N,L){var J=0,M=this.cps[J],I=M&&M.startIndexInContainer,K=[];if(M){N-=I;L-=I;}while(M&&N>=M.rc){N-=M.rc;L-=M.rc;M=this.cps[++J];}while(M&&L>=M.rc){L-=M.rc;K.push(M);M=this.cps[++J];}if(M){K.push(M);}return K;},invalid:function E(){var I;for(I=0;I<this.cps.length;++I){var J=this.cps[I];J.invalid();}this.updatedRows={};},getUpdatedRows:function A(){var I={},J;for(J=0;J<this.cps.length;++J){var K=this.cps[J];if(!K.preServeUpdatedRows){return{};}mstrmojo.hash.copy(K.getUpdatedRows(),I);}this.updatedRows=I;return I;},download:function B(N,M,I){var L=this._getCPs(N,M),J;for(J=0;J<L.length;++J){var K=L[J];K.download(N,M,I);}}});}());(function(){mstrmojo.XtabHACP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabHACP",cps:[],initContent:function G(J){this.startIndexInContainer=J||0;this.type=0;this.colWidths=[];var I;for(I=0;I<this.cps.length;++I){this.cps[I].initContent(this.startIndexInContainer);this.type|=this.cps[I].type;var H=this.cps[I].colWidths;if(H){this.colWidths=this.colWidths.concat(H);}}this.rc=Math.max(this.cps[0].rc,this.cps[1].rc);},getNumAutoHeightRows:function(){return Math.max(this.cps[0].getNumAutoHeightRows(),this.cps[1].getNumAutoHeightRows());},getRowHeight:function C(){return this.cps[0].getRowHeight();},getRowCells:function(I){var M=this.cps,J=[],H=M.length,L;for(L=0;L<H;L++){if(M[L].getAvailableRowsCount()>0&&M[L].rc>I){var K=M[L].getRowCells(I);if(K){J=J.concat(K);}}}return J;},getUnmergedCells:function(H){return this.cps[0].getUnmergedCells(H);},isDataAvailable:function D(I,H){return this.cps[1].isDataAvailable(I,H);},getAvailableRowsCount:function F(){return Math.max(this.cps[0].getAvailableRowsCount(),this.cps[1].getAvailableRowsCount());},invalid:function E(){var I,H,J;for(I=0,H=this.cps.length;I<H;++I){J=this.cps[I];J.invalid();}this.updatedRows={};},getUpdatedRows:function A(){var H={},I;for(I=0;I<this.cps.length;++I){var J=this.cps[I];if(!J.preServeUpdatedRows){return{};}mstrmojo.hash.copy(J.getUpdatedRows(),H);}this.updatedRows=H;return H;},download:function B(K,I,H){var J=this.cps[1];J.download(K,I,H);}});}());(function(){mstrmojo.XtabTitlesCP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabTitlesCP",init:function F(I){this._super(I);},download:function B(K,J,I){},shouldClonedLastTitleCell:function H(){return(this.gridData.lhv!==0);},initContent:function E(Q){this.startIndexInContainer=0;if(!this.cts){this.cts=mstrmojo.hash.clone(this.gridData.gts.col);}var J=this.gridData.gts,L=J.row||[],I=J.col||[],S=J.show,P=J.rec,Y=this.cts||[],X=L.length,R=Y.length,V=this.gridData.css;this.base={items:[]};this.rc=(S&&Y.length)||0;if(this.rc===0&&S){this.rc=X>0?1:0;}this.colWidths=(S&&J.cws)||[];if(!this.rc){this.nRowSpan=this.nColSpan=0;return ;}var N={items:[]},T=0,K=1,U,W,a=this,M=a.base.items,Z=function(b,d){if(a.shouldClonedLastTitleCell()&&d>1){b.rs=1;U=mstrmojo.hash.clone(b,{});U.n="&nbsp;";b.cni=V.push({n:(V[b.cni].n||"")+" fsbp_1"})-1;}},O=function(e){var b=e;while(b-->1){if(a.shouldClonedLastTitleCell()){var d=mstrmojo.hash.clone(U,{});d.cni=V.push({n:(V[d.cni].n||"")+" fsbp_"+((b==1)?"3":"2")})-1;M.push({items:[d]});}else{M.push({items:[]});}}};for(W=0;W<X;++W){L[W].axis=1;L[W].ui=W;T+=L[W].cs||1;N.items.push(L[W]);}if(R>0){Y[0].axis=2;Y[0].ui=0;I[0].axis=2;I[0].ui=0;K=Y[0].rs||1;Z(Y[0],K);T+=Y[0].cs||1;N.items.push(Y[0]);}M.push(N);for(W=1;W<R;++W){if(K>1){O(K);}Y[W].axis=2;Y[W].ui=W;I[W].axis=2;I[W].ui=W;K=Y[W].rs||1;Z(Y[W],K);M.push({items:[Y[W]]});}this.rc=M.length;this.nRowSpan=this.rc+K-1;this.nColSpan=T;if(P){this._removeExtraColumn(L,Y);}},getAvailableRowsCount:function D(){return this.rc;},getSpanDimension:function A(){return{nRow:this.nRowSpan||0,nCol:this.nColSpan||0};},isDataAvailable:function C(J,I){return true;},_removeExtraColumn:function G(L,b){var Z=L&&L.length,Q=b&&b.length,I=this.gridData.gts,T=I.row||[],O=I.col||[],J=T.length,X=O.length;if(!Z||!Q){if(Q===1){var d=b[Q-1];if(d.otp==-1){if(X>0){O[X-1]._hid=true;}this.base.items=[];this.nRowSpan=this.nColSpan=this.rc=0;}}return ;}var K=L[Z-1],U=this.rc,M=this.base.items;if(K){if(K.otp==-1){if(J>0){T[J-1]._hid=true;}if(this.nColSpan){this.nColSpan-=K.cs||1;}M[0].items.splice(Z-1,1);}else{var R=U>1?U-1:0,S=M[R],a=S.items.length;if(a>0&&X>0){O[X-1]._hid=true;}var N=K.fix;if(N){var Y;for(Y=0;Y<N;Y++){S.items[a-1+Y]=L[Z-N+Y];}}else{S.items[a-1]=K;}for(var W=0,V=Q-1;W<V;W++){b[W].cs=N?N:K.cs;}var P=N?N:1;M[0].items.splice(Z-P,P);if(this.nColSpan){this.nColSpan-=1;}}}return ;}});})();(function(){mstrmojo.XtabOnDemandCP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabOnDemandCP",blockNum:0,listeners:null,initContent:function E(F){if(F!==undefined){this.startIndexInContainer=F;}this.isDownloaded=(this.base!==null);this.isDownloading=false;if(this.base){this._super(this.startIndexInContainer);this.notifyListeners();}},addCPListener:function D(F){if(!this.listeners){this.listeners=[];}this.listeners.push(F);},notifyListeners:function C(){var F,H=this.listeners,G=(H&&H.length)||0;for(F=0;F<G;F++){if(H[F]&&H[F].onDemandDataReady){H[F].onDemandDataReady(this);}}},getAvailableRowsCount:function B(){return this.isDownloaded?this.rc:0;},download:function(F){if(!this.isDownloaded&&!this.isDownloading){this.isDownloading=true;this.dataSource.download(this.blockNum,F);}},invalid:function(){if(this._super){this._super();}this.isDownloaded=false;this.isDownloading=false;},isDataAvailable:function A(G,F){return this.isDownloaded;}});})();(function(){var a=1,f=2,q=4,W=8,h=1,j=2,G=3,d=4,p=5,U=6,M=7,l=8,X=4,F={},B={},I=4,R=1,J={TITLE:"ig-title",GROUPING:"iggroup",BANDING:"igbanding",RIGHT_ALIGN:"rtAlign",LEFT_ALIGN:"leftAlign",TOTAL_ROW:"total"},T=mstrmojo.hash,V=mstrmojo.array;function Z(w,t){var u=w[0],r=t.gts,s=r.cws.length;return(t.vp.gr==="1"&&(s>1));}function k(s,z){var w=function(AA,AB){if(AB&&AA&&AA.css&&AA.css.indexOf(AB)<0){AA.css+=" "+AB;}};var u=z.type,t=z.col,x=(t&&t.cl)||0,r=(u===f||u===a);if(u===f||u===W){w(s,J.RIGHT_ALIGN);}else{if(u===a||u===q){w(s,J.LEFT_ALIGN);}}if(r){if(t&&t.tg&&x>1){if(!s._v){s._v=s.v;s.v="<span class='toggleHeader'>"+s.v+"</span>";}}w(s,J.TITLE);}V.forEach(z.extraCss,function(AA){w(s,AA);});}function A(r){return 0;}function o(w){var t,u=w.cg,r=u&&u.cgc,s=1;for(t=0;t<r;t++){if(u&&u[t]&&!u[t].tg&&u[t].cl>s){s=u[t].cl;}}return s;}function N(s,r){var t=p;if(r===2){if(s===0){t=h;}else{if(s===1){t=d;}}}else{if(r>2){if(s===0){t=h;}else{if(s===1){t=j;}else{if(s===r-1){t=d;}else{if(s<r-1&&s>1){t=G;}}}}}}return t;}function L(r,w,t,s){var z=s&&s.cols&&s.cols.cg,u,AA=0,x=0;if(z){for(u=0;u<w;u++){if(r[u]){AA+=r[u].length;}}AA+=(t+1);for(u=0;u<z.cgc;u++){x+=z[u].cl;if(x>=AA){return u;}}}return -1;}function P(AA,u,s,r){var z=[],x,t,w,AB;for(t=0,w=AA.length;t<w;t++){if(AA[t].length===1){x=AA[t][0];x.rowType=(x.rowType!==l)?N(u,s):l;x.singleStack=(s>1);x=T.copy(x);if(x.ts===I){if(s===1){x.rowType=p;x.colIdx=L(AA,t,u,r);}else{if(!u){x.colIdx=L(AA,t,u,r);}else{delete x.ts;x.v="";}}}else{if(u){x.v="";}}}else{x=AA[t][u];if(!x){AB=AA[t].length;x=T.copy(AA[t][AB-1],{});x.v="";if(x.hasOwnProperty("ts")){delete x.ts;}}else{if(x.ts===I){x.colIdx=L(AA,t,u,r);}}x.rowType=(x.rowType!==l)?N(u,s):l;}z.push(x);}return z;}function Q(r){if(r===0){return 0;}var s=this.sectionMap[r-1]||0;return Math.floor((r-s)/this.stackLevels);}function D(AA){var x,z,w=this.sectionInfo,r=w.length,u=this.srh,t=this.lastSectionIndex;z=w[t];if(AA>=z.rs&&AA<(z.rs+u)){return z;}if(AA<z.rs){x=t-1;if(x<=0){this.lastSectionIndex=0;return null;}do{z=w[x];if(AA>z.rs&&AA<=(z.rs+u)){this.lastSectionIndex=x;return z;}}while(AA<z.rs&&--x>0);this.lastSectionIndex=x;return z;}else{x=t+1;if(x>=r){this.lastSectionIndex=r-1;return null;}do{z=w[x];if(AA>z.rs&&AA<=(z.rs+u)){this.lastSectionIndex=x;return z;}}while(AA>(z.rs+u)&&++x<r);this.lastSectionIndex=x-1;return null;}}function e(AB,t,r,AA){var z=AB[0],w,x=AB.length,s=z&&z.rowType,u={v:"",css:"empty-igcell",rowType:s};if(r!==undefined&&z&&(s===h||s===p||s===U)){u={v:'<div><div class="IG-ActionArrow-IMG" style="height:'+AA+"px;top:-"+(0.5*F[s])+'px;"></div></div>',css:"IG-ActionArrow",_ei:r};}for(w=x-1;w>=x-t;w--){z=AB&&AB[w];if(z){z.css+=" IG-lastdatacolumn";}}AB.push(u);}function S(AO,AJ,t){var AF=AO.cols,AG=AF.cg,r=[{w:"0px"}];if(AF&&AJ){var AP=AF.cws,s=[],AN=AP.length,AR=0,AB=(parseInt(AO.ar,10)===1)?(AJ/AN):-1,AE,u,AD=false,x=0,AH=AJ,AI=0,AM;for(AM=0;AM<AN;AM++){u=s[AM]=AP[AM];AE=u.w;if(AE===""){AD=true;}else{if(u.xc){AR+=parseInt(AE);AH-=AR;x++;}else{AI+=parseFloat(AE,10);}}}if(AD||AI<100){AB=AH/(AN-x);}for(AM=0;AM<AN;AM++){u=AP[AM];if(u.xc){continue;}else{if(AB===-1){AE=parseInt(u.w,10)*AH/100;if(!AE&&AE!==0){AE=parseInt(AH/AG.cgc,10);}}else{AE=(parseInt(u.w,10)<0)?0:AB;}}s[AM]={w:AE+"px"};}if(t){return s;}var AC=[],AL=0;for(AM=0;AM<AN;AM++){var AQ=AG[AM],AA=AQ.tg?AQ.cl:1,AK=0;for(AK=0;AK<AA;AK++){var z="0px";if(AK===AQ.cc){z=s[AM].w;}AC[AL+AK]={w:z};}AL+=AA;}return AC.concat(r);}else{if(t){return null;}else{return cp.cws.concat(r);}}}function C(){delete this.lastStackCols;delete this.lastAttRow;delete this.lastMtxRow;}mstrmojo.InteractiveGridHACP=mstrmojo.declare(mstrmojo.XtabHACP,null,{scriptClass:"mstrmojo.InteractiveGridHACP",sectionMap:[],stackLevels:1,gridWidth:480,tdWidths:null,lastSectionIndex:0,adjustCPMaps:function O(){var AC=this.cps,AB=this.cps[0],AH=Math.max(AC[0].rc,AC[1].rc);if(AB.type!==a){var AM=this.gridData,AG=function(AP,AS){var AO=AP.base.items,AQ=AP.lookupBase[0].es,AR=AO[AS].items[0],AN=AQ&&AQ[AR.idx];return(AN&&AN.n)||((AR.pi&&AQ[AR.pi.ri||0])||"");},AK,AJ,r=1,z,s,AE,u=0,t=-1,AF,AL,AI=0,AD=this.groupEnabled;for(AF=0,AK=0,AL=AB.cps?AB.cps.length:1;AF<AL;AF++){var x=AB.cps?AB.cps[AF]:AB,AA=x.rc;u=t+1;t=u+AA-1;if(x.isDataAvailable(u,t)){if(x.lastRow){AI=x.lastRow;s=x.lastSection;}else{AK=AI||0;for(AJ=0,r=this.sectionMap[AK-1]||0;AJ<AA;AJ++){var w=this.stackLevels;AE=AG(x,AJ);if(AD&&AE!==s){s=AE;this.sectionInfo.push({sn:AE,rs:this.srh*r+this.stackedRh*Math.floor((AK-r)/this.stackLevels)});this.sectionMap[AK]=++r;AK++;}while(w){this.sectionMap[AK]=r;w--;AK++;}}AI=x.lastRow=AK;x.lastSection=AE;}}else{break;}}this.rc=(this.stackLevels>1?AH*this.stackLevels:AH)+(AD?r:0);}},onDemandDataReady:function b(){this.adjustCPMaps();},initContent:function Y(AC){var AB=this.cps,AN=this.gridData=AB[0].gridData||AB[0].cps[0].gridData,AJ=AN.vp=this.gridVp=this.gridVp||AN.vp,t=AJ.daf&&AJ.daf.split(":"),AD=AJ.cols,AE=AD.cg,AK=AD.cws,AA=AB[A(AE)],AH=AN.gts.row,s=AN.gts,AL=Z(AB,AN),z=AA.type!==a,AG,AI,w,r,AF,x,AM,u=(typeof (mstrMobileApp)!=="undefined"&&mstrMobileApp.getDeviceDPI)?mstrMobileApp.getDeviceDPI():160;if(u===160){F={1:33,2:22,3:20,4:30,5:53,6:40,7:27,8:53};B={1:11,2:11,3:1,4:16,5:16};}else{if(u===213){F={1:45,2:31,3:26,4:39,5:71,6:40,7:35,8:71};B={1:15,2:15,3:2,4:21,5:21};}else{if(u===240){F={1:50,2:34,3:30,4:44,5:80,6:40,7:40,8:80};B={1:16,2:16,3:2,4:24,5:24};}else{if(u===320){F={1:67,2:44,3:38,4:58,5:107,6:40,7:53,8:107};B={1:22,2:22,3:2,4:32,5:32};}else{F={1:33,2:22,3:20,4:30,5:53,6:40,7:27,8:53};B={1:11,2:11,3:1,4:16,5:16};}}}}if(z){if(AJ.dafIdx===undefined&&t){for(AG=0;AG<AH.length;AG++){if(AH[AG].id===t[0]&&AH[AG].fid===t[1]){AJ.dafIdx=AG;break;}}}}for(AG=0;AG<AE.cgc;AG++){if(AE[AG]&&AE[AG].tg){break;}}if(AG===AE.cgc){AN.gts.show=false;AN.ghs.chs.show=false;}this._super(AC);this.colWidths=S(AJ,this.gridWidth);this.tdWidths=S(AJ,this.gridWidth,true);if(z){this.stackLevels=o(AD);if(this.stackLevels>1){this.srh=F[M];this.rh=F[p];this.mrh=F[G];this.stackedRh=F[h]+(this.stackLevels-2)*F[j]+F[G];}else{this.srh=F[M];this.rh=this.stackedRh=this.mrh=F[p];}if(AL||this.stackLevels>1){this.sectionMap=[];this.sectionInfo=[];this.groupEnabled=AL;this.adjustCPMaps();r=this.cps[0].cps;if(r){AM=this;for(AG=0,AI=r.length;AG<AI;AG++){x=r[AG];if(x&&x.addCPListener){x.addCPListener(AM);}}}}}},getUnmergedCells:function(r){return ;},getResolvedGroupHeader:function(u,x){var t=this.gridData,w=t.gts.row[x].es,s=t.ghs.rhs.items[u].items[x];if(s){if(!s.css){s.css=t.css[s.cni].n+" iggroup";s.n=w[s.idx].n;}}else{return{css:" iggroup",n:""};}return s;},getRowCells:function(AK){var AF=this.cps,x=[],AY=this.gridData,AU=AY.vp,AI=AU.cols.cg,AD=AF[A(AI)],AH=this.groupEnabled,s=AU.bn==="1",AV=[],AJ=Q.call(this,AK),z,t,AL=1,AE,r,AB,AR,AQ,AT,AX,AC;if(AH&&(this.sectionMap[AK]!==this.sectionMap[AK-1])){var u=T.copy(AD.getRowCells(AJ)[0],{});u.cs=this.colWidths.length;u.rowType=M;k(u,{col:null,type:AD.type,extraCss:[J.GROUPING]});return[u];}if(!AK){C.call(this);}this.lastAttRow=this.lastAttRow||(AF[0].rc?AF[0].getRowCells(AJ):[]);this.lastMtxRow=this.lastMtxRow||(AF[1].rc?AF[1].getRowCells(AJ):[]);AB=this.lastAttRow;AT=AB.length;if(AT>0&&AB[0].stt){AE=true;for(AR=0;AR<AT;AR++){AX=AB[AR];if(AX.stt===R){r=AX;break;}}}if(!this.lastStackCols){V.forEach([this.lastAttRow,this.lastMtxRow],function(AZ){for(AR=0;AR<AZ.length;AR++){if(AZ[AR]._ei!==undefined){if(AU.dafIdx>=0){AC=AD.getRowCells(AJ)[AU.dafIdx];}z=(AU.dafIdx>=0)?(AC&&AC._ei):"";return false;}}},this);var AP=function(AZ,Aa){if(AZ&&(Aa.type===a||Aa.type===f)){if(AN.tg===false){AZ.n=AZ.v="";}AZ.rowType=l;}k(AZ,{col:AN,type:Aa.type,extraCss:[((Aa.type===W||Aa.type===q)&&s&&(AJ%2===1))?J.BANDING:null,AE?J.TOTAL_ROW:null]});if(AZ){AZ.cs=1;if(AZ._ei===undefined&&AU.dafIdx!==undefined){AZ._ei=z;}}};this.lastRowIndex=0;for(AQ=0;AQ<AI.cgc;AQ++){var AN=AI[AQ],AS=AN["mix"+AN.cc],w=AS!==undefined,AA=AF[w?1:0],AO,AM,AG,AW={n:"",stt:R,css:"xtab-td"};arr=[];if(AN.tg){for(var AR=0;AR<AN.cl;AR++){arr=[];AG=w?AN["mix"+AR]:AN.attForms[AR].idx;var AB=w?this.lastMtxRow:this.lastAttRow;AX=AB[AG];if(AE){if(!AX){AX=AW;}else{if(AX&&AX.stt===R){AX=T.copy(r,AW);}else{AX=T.copy(AX,{});}}}else{AX=T.copy(AX,{});}AP(AX,AA);arr.push(AX);AV.push(arr);}if(AQ+1===AI.cgc){AL=AN.cl;}}else{for(AO=0,AT=AN.cl;AO<AT;AO++){if(w){AM=AN["mix"+AO];if(AM!==undefined){AX=this.lastMtxRow[AM];}}else{AM=AN.attForms[AO];if(AM){AX=this.lastAttRow[AM.idx];}if(AE&&!AX){AX=AW;}}AP(AX,AA);arr.push(AX);}AV.push(arr);}}this.lastStackCols=AV;}x=P(this.lastStackCols,this.lastRowIndex++,this.stackLevels,AU);if(this.lastRowIndex>=this.stackLevels){C.call(this);}return x;},getRowHeight:function E(s){var r=F[p];return F[s]||r;},getPadding:function K(r){return B[r]||B[X];},isDataAvailable:function g(t,r){if(!this.onDemandIF||!this.cps[1].cps){return true;}else{var w=this.sectionMap.length,u;if(!w){return this.cps[1].isDataAvailable(t,r);}if(r>w){if(t<w){u=Q.call(this,t);return this.cps[1].isDataAvailable(u,u+(r-t));}else{return false;}}else{return this.cps[1].isDataAvailable(Q.call(this,t),Q.call(this,r));}}},download:function H(z,u,AA){var t=Q.call(this,z),r=t+Math.ceil((u-z)/this.stackLevels),w=this.cps[0],s,AB,x=!w.cps?[w]:this.cps[0]._getCPs(t,r);for(s=0;s<x.length;++s){AB=x[s];AB.download(t,r,AA);}},getRowCellInfo:function(u){var t=D.call(this,u+this.srh),r,s=this.lastSectionIndex;if(t){r=this.sectionInfo[s-1];return{rowStart:t.rs,isNextRowNewSection:true,sectionName:r&&r.sn};}else{return{isNextRowNewSection:false,sectionName:this.sectionInfo[s].sn};}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._TouchGestures","mstrmojo.android.ui.CalendarMonthView","mstrmojo.android.ui.CalendarYearList");var H=mstrmojo.hash,E=mstrmojo.array,C=mstrmojo.desc(2827,"Clear"),A=mstrmojo.desc(221,"Cancel");mstrmojo.android.ui.Calendar=mstrmojo.declare(mstrmojo.Container,[mstrmojo._TouchGestures,mstrmojo._HasLayout],{scriptClass:"mstrmojo.android.ui.Calendar",config:undefined,markupString:'<div id="{@id}" class="mstrmojo-android-Calendar"><div class="mstrmojo-Calendar-Year"></div><hr class="mstrmojo-Calendar-Sep"/><div class="mstrmojo-Calendar-Month"></div></div>',markupSlots:{yearNode:function(){return this.domNode.firstChild;},monthNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},cssDisplay:"",isMultiSelect:false,selectedDates:undefined,min:undefined,max:undefined,init:function G(O){var J=new Date(),M=this.children[0],R=this.children[1],L=O.min=O.min||{},P=O.max=O.max||{},K=O.selectedDates=O.selectedDates||[],Q=K[0]||{},N,I;E.forEach([Q,L],function(S){if(!isNaN(S.year)&&!isNaN(S.month)){N=S.year;I=S.month;return false;}});I=!isNaN(I)?I:(J.getMonth()+1);N=!isNaN(N)?N:J.getFullYear();H.copy({initialYear:N,initialMonth:I,multiSelect:!!this.isMultiSelect,selected:K,range:{start:L,end:P}},R);H.copy({initialYear:N,start:L.year,end:P.year},M);this._super(O);},postBuildRendering:function D(){this.monthWidget.markupBuilder=this.markupBuilder;this._super();var I=this.target;I.set("items",this.selectedDates);I.selectItems(I.items);this.yearWidget.attachEventListener("yearChanged",this.monthWidget.id,function(J){this.current.set("y",J.value);});this.monthWidget.attachEventListener("selectionChanged",this.id,function(J){this.syncListItemsWithSelections([].concat(J.items));});this.target.attachEventListener("selectionChange",this.id,function(K){var P=this.target,J=P.items,N=this.monthWidget,M=E.get(J,K.added),O=E.get(J,K.removed);if(M&&M.length>0){N.selectItems(M);}else{var L;if((O&&O.length>0)&&(J&&J.length>0)){L=O;}N.unselectItems(L);}if(P.parent){P.parent.btnHbox.children[0].set("text",((P.getSelectedItems().length>0)?C:A));}N.selected=P.getSelectedItems();});},syncListItemsWithSelections:function F(I){var J=this.target;J.glow=false;J.set("items",I);J.selectItems(I);if(J.parent){J.parent.btnHbox.children[0].set("text",((J.getSelectedItems().length>0)?C:A));J.parent.resizeDialog();}J.glow=true;},getSelectedDates:function B(J){var I=[];E.forEach(this.target.getSelectedItems(),function(K){I.push(K.n);});return I;},children:[{scriptClass:"mstrmojo.android.ui.CalendarYearList",alias:"yearWidget",slot:"yearNode"},{scriptClass:"mstrmojo.android.ui.CalendarMonthView",alias:"monthWidget",slot:"monthNode"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.dom","mstrmojo._TouchGestures","mstrmojo.SmoothScroll","mstrmojo._HasTouchScroller");var C=16;var A={0:"&#9654;",1:"&#9660;",2:"&nbsp;"};var B=["heatmap-tree-state-text collapsed","heatmap-tree-state-text expanded","heatmap-tree-state-text leaf"];var D={NO:0,YES:1,PART:2};mstrmojo.VisHeatMapTreeItem=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VisHeatMapTreeItem",isRoot:false,showRoot:false,rootText:"",idx:0,buttonNodeCss:"heatmap-tree-checkbox",buttonNodeWidget:null,markupString:'<div id="{@id}" class="heatmap-tree" style="{@cssText}"><div class="{@cssName}" idx="{@idx}"><div class="heatmap-tree-state"><div class="heatmap-tree-state space">&nbsp;</div><div class="heatmap-tree-state-text"></div></div><div class="heatmap-tree-text"></div><div class="{@buttonNodeCss}">&nbsp;</div></div><div class="heatmap-tree-container"></div></div>',markupSlots:{contentNode:function(){return this.domNode.firstChild;},stateNode:function(){return this.domNode.firstChild.firstChild;},stateSpaceNode:function(){return this.domNode.firstChild.firstChild.firstChild;},stateTextNode:function(){return this.domNode.firstChild.firstChild.lastChild;},textNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.childNodes[2];},containerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=this.text;},onstateChange:function(){this.stateTextNode.className=B[this.state];if(!this.isRoot){this.containerNode.style.display=(this.state===1)?"block":"none";if(this.state!=2){this.tree.resized();}}}},level:-1,tree:null,itemDisplayField:"n",itemChildrenField:"items",isSelectable:true,itemFunctionField:"itemFunction",itemIncludeFunction:function(){return true;},dataProvider:null,owner:null,cssName:"heatmap-tree-div",fillData:function(){var E=this.tree||this;if(this.dataProvider){this.items=this.dataProvider[this.itemChildrenField];this.entity=this.dataProvider;this.entity.treeItem=this;}var G=this.items;if(this.items&&this.items.length){this.childTree=[];var K=0;for(var H=0;H<G.length;H++){var I=G[H];if(this.itemIncludeFunction(I)){var J;if(E.owner){J=I.label;}else{J=I[this.itemDisplayField];}var F={idx:K,isRoot:false,text:J,itemFunction:I[this.itemFunctionField],buttonNodeWidget:I.buttonNodeWidget,tree:E,level:(this.level+1),itemDisplayField:this.itemDisplayField,itemChildrenField:this.itemChildrenField,parent:this,parentTree:this,state:0,owner:this.owner,isSelectable:this.isSelectable,itemIncludeFunction:this.itemIncludeFunction,buttonNodeCss:this.buttonNodeCss,fillData:this.fillData,buildTree:this.buildTree,setChildStatus:this.setChildStatus,updateSelection:this.updateSelection};if(this.dataProvider){F.dataProvider=I;}else{F.items=I[this.itemChildrenField];}this.childTree[K]=F;K++;}}}},renderChildrenList:function(){if(!this.childTree){return ;}var J=this.childTree.length,M,L;if(this.tree){L=this.tree.cachedUnits;M=L.indexOf(this.contentNode)+1;if(M==0){M=L.length;}}if(this.isRoot&&this.showScrollbars){M=0;L=this.cachedUnits;}for(var H=0;H<J;H++){if(this.childTree[H].domNode){this.tree.cachedUnits.splice(M,0,this.childTree[H].contentNode);M++;continue;}var E=document.createElement("div");this.containerNode.appendChild(E);this.childTree[H].placeholder=E;var I=new mstrmojo.VisHeatMapTreeItem(this.childTree[H]);if(!I){alert("new failed!");}I.childTree=this.childTree[H].childTree;if(I.childTree){var F=I.childTree,K=F.length;for(var G=0;G<K;G++){F[G].parent=I;F[G].parentTree=I;}}this.childTree[H]=I;this.childTree[H].render();if(!isNaN(M)){L.splice(M,0,this.childTree[H].contentNode);M++;}}},postBuildRendering:function(){if(this._super){this._super();}this.domNode.style.display="none";var E=this.tree||this;if(this.dataProvider){this.items=this.dataProvider[this.itemChildrenField];}if(this.isRoot){if(!this.showRoot){this.contentNode.style.display="none";}else{this.stateNode.style.display="none";this.textNode.innerHTML=this.rootText;}this.containerNode.className="heatmap-tree-container root";}else{if(this.buttonNodeWidget){this.buttonNodeWidget.placeholder=this.buttonNode;var G=mstrmojo.insert(this.buttonNodeWidget);G.render();this.buttonNode=G.domNode;}this.textNode.innerHTML=this.text;var F=(this.level+1)*C;this.stateSpaceNode.style.width=(F>=0?F:0)+"px";this.textNode.style.width=this.domNode.offsetWidth-this.stateNode.offsetWidth-this.buttonNode.offsetWidth-10+"px";}this.domNode.style.display="block";if(!(this.items&&this.items.length)){this.set("state",2);this.tree.sampleUnit=this.domNode;}else{if(this.entity&&this.entity.isExpanded){this.clickHandler({target:this.stateNode});}}},buildTree:function(){this.fillData();var E=this.childTree&&this.childTree.length||0;for(var F=0;F<E;F++){this.childTree[F].buildTree();}},clickHandler:function(G){var L=G.target;var K,J,F;if(this.owner){if(!this.owner.entitiesWithStates){this.owner.entitiesWithStates={};}J=this.owner.entitiesWithStates;K=this.entity;}if(this.state!==2&&mstrmojo.dom.contains(this.stateNode,L,true,this.domNode)){this.set("state",this.state===0?1:0);if(this.state==1){this.renderChildrenList();this.updateChildrenSelection();}else{var H=this.tree.cachedUnits.indexOf(this.contentNode);if(H!=-1){H++;var E=this.childTree.length;this.tree.cachedUnits.splice(H,E);}}if(K&&J){if(!J.expendedEntities){J.expendedEntities=[];}F=J.expendedEntities;if(this.state===0){delete K.isExpanded;var I=F.indexOf(K);if(I!==-1){F.splice(I,1);}}else{if(this.state===1){K.isExpanded=true;if(F.indexOf(K)===-1){F.push(K);}}}}this.tree.resized();this.tree.updateScroller();return ;}if(this.itemFunction){this.itemFunction(G);}if(!this.isSelectable){return ;}mstrmojo.VisHeatMapAnimation.animate(this.contentNode,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});if(this.selectionStatus===D.YES){this.selectionStatus=D.NO;}else{this.selectionStatus=D.YES;}this.setChildStatus(this.selectionStatus);this.updateSelection(false,true);if(J&&K){if(!J.selectionStatusModifiedEntities){J.selectionStatusModifiedEntities=[];}F=J.selectionStatusModifiedEntities;if(this.selectionStatus===D.NO){K.isSelected=false;}else{if(this.selectionStatus===D.YES){K.isSelected=true;}}F.push(K);}},setChildStatus:function(E){if(this.childTree){for(var F=0;F<this.childTree.length;F++){var G=this.childTree[F];if(!G){continue;}G.selectionStatus=E;G.setChildStatus(E);G.updateSelection(false,false);}}},updateChildrenSelection:function(){if(!this.childTree){return ;}var E=this.childTree.length;for(var F=0;F<E;F++){if(this.childTree[F]){this.childTree[F].updateSelection(false,false);}}},updateSelection:function(K,J){if(K&&this.childTree){var G=true;var L=true;var F=false;for(var H=0;H<this.childTree.length;H++){var I=this.childTree[H];if(G&&I.selectionStatus!==D.YES){G=false;}if(L&&I.selectionStatus!==D.NO){L=false;}if(!G&&!L){F=true;break;}}this.selectionStatus=G?D.YES:(L?D.NO:D.PART);}var E="heatmap-tree-div";switch(this.selectionStatus){case D.YES:E+=" selected";break;case D.PART:E+=" partSelected";break;case D.NO:default:break;}this.cssName=E;if(this.contentNode){this.contentNode.className=E;}if(J&&this.parentTree){this.parentTree.updateSelection(true,true);}if(this.isRoot){this.notifyAll();}},resized:function(){if(this.parent.resized){this.parent.resized(this.domNode.offsetHeight);}},selectionStatus:D.NO});mstrmojo.VisHeatMapTree=mstrmojo.declare(mstrmojo.VisHeatMapTreeItem,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisHeatMapTree",isRoot:true,showRoot:false,rootText:"",heightLimit:0,defaultSelectionStatus:D.NO,markupString:'<div id="{@id}" class="heatmap-tree root {@cssClass}" style="{@cssText} mstrAttach:mousedown,mousemove,mouseup,click"><div class="heatmap-tree-div" style="line-height:40px;" idx="{@idx}"><div class="heatmap-tree-state" style="display:none;"><div class="heatmap-tree-state space">&nbsp;</div><div class="heatmap-tree-state-text"></div></div><div class="heatmap-tree-text"></div><div class="{@buttonNodeCss}">&nbsp;</div></div><div style="overflow:hidden; position:relative"><div class="heatmap-tree-container"></div></div></div>',markupSlots:{contentNode:function(){return this.domNode.firstChild;},stateNode:function(){return this.domNode.firstChild.firstChild;},stateSpaceNode:function(){return this.domNode.firstChild.firstChild.firstChild;},stateTextNode:function(){return this.domNode.firstChild.firstChild.lastChild;},textNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.childNodes[2];},scrollboxNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode.lastChild.firstChild;}},initialized:false,dirty:false,showIndicators:false,showScrollbars:false,cachedUnits:[],init:function(E){this._super(E);this.observer=[];},register:function(E){this.observer.push(E);this.notifyAll();},notifyAll:function(){var F=false;if(this.childTree&&this.childTree.length>0){F=true;}if(F){mstrmojo.css.removeClass(this.contentNode,"disabled");}else{mstrmojo.css.addClass(this.contentNode,"disabled");}if(this.selectionStatus===D.NO){F=false;}for(var E in this.observer){this.observer[E].notify(F);}},buildRendering:function(){if(this.isRoot){this.cachedParent=this.parent;delete this.parent;}if(this._super){this._super();}},postBuildRendering:function(){var F=(new Date()).getTime();if(this.isRoot){this.scrollerConfig={bounces:false,showIndicators:this.showIndicators,showScrollbars:this.showScrollbars,useTranslate3d:true,vScroll:true,hScroll:false,offset:{y:{start:0,end:0},x:{start:0,end:0}},origin:{x:0,y:0},scrollEl:this.containerNode};}this.buildTree();this.applySelectionStatus();this._super();this.renderChildrenList();if(this.isRoot){this.parent=this.cachedParent;this.parent.containerNode.appendChild(this.domNode);}if(this.heightLimit>0){var E=this.heightLimit-this.contentNode.offsetHeight-2;if(E>=0){this.scrollboxNode.style.maxHeight=E+"px";}}this.viewNode=this.scrollboxNode;this.notifyAll();this.resized();this.updateScroller();var G=this;G._scroller.scrollTo(0,G.owner&&G.owner.dialogScrollerPosition||0);},applySelectionStatus:function(){this.selectionStatus=this.defaultSelectionStatus;this.setChildStatus(this.selectionStatus);this.updateSelection(false,true);var I=this.owner&&this.owner.entitiesWithStates&&this.owner.entitiesWithStates.selectionStatusModifiedEntities||[],E=I.length,F;for(F=0;F<E;F++){var H=I[F],G=H.treeItem;if(G&&H.isSelected!==undefined){G.selectionStatus=H.isSelected?D.YES:D.NO;G.setChildStatus(G.selectionStatus);G.updateSelection(false,true);}delete H.treeItem;}},touchTap:function(F){var G=mstrmojo.dom.findAncestorByAttr(F.target,"id",true,this.domNode);if(!G){this.clickHandler(F);return ;}var E=mstrmojo.all[G.value];if(E&&E.clickHandler){E.clickHandler(F);}},resized:function(E){var F=mstrmojo.dom.position;if(!this.viewRect){this.viewRect=F(this.scrollboxNode,true);}if(!(this.heightLimit>0)){return ;}if(!this._scroller.offset){return ;}E=E||this.containerNode.offsetHeight;if(E>this.scrollboxNode.clientHeight){this._scroller.offset.y.end=E-this.scrollboxNode.clientHeight;}else{this._scroller.offset.y.end=0;this._scroller.scrollTo(0,0,0);}},refresh:function(){if(this.needRefresh){this.containerNode.innerHTML="";this.postBuildRendering();this.resized();this.updateScroller();this.needRefresh=false;}},destroy:function(E){if(this.owner&&this._scroller&&this._scroller.origin){this.owner.dialogScrollerPosition=this._scroller.origin.y||0;}if(this._super){this._super(E);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList","mstrmojo.css");var E=mstrmojo.css,B="glow",F=mstrmojo.dom,D=F.$TRANS_DURATION,A;function C(I){var H=I.style;H[D]=0;E.addClass(I,B);window.setTimeout(function(){H[D]="300ms";E.removeClass(I,B);},100);}mstrmojo.ui.MobileCheckList=mstrmojo.declare(mstrmojo.android.SimpleList,null,{scriptClass:"mstrmojo.ui.MobileCheckList",multiSelect:true,hasEvenRows:true,glow:true,allowTouchBubble:false,listHooks:{select:function(I,J,H){if(this.glow&&!this.skipEvent){C.call(this,I);}},unselect:function(I,J,H){if(this.glow&&this.multiSelect&&!this.skipEvent){C.call(this,I);}}},getItemMarkup:function(H){if(!A){A=this._super(H).replace("{@en@n}","<div><h3>{@en@n}</h3></div>");}return A;},init:function G(I){this._super(I);var H=["mobile-checklist"];if(this.multiSelect){H.push("multi");}mstrmojo.css.addWidgetCssClass(this,H);}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList","mstrmojo.android._HasLingeringListSelections");var A=[],F=mstrmojo.dom,E=mstrmojo.string;mstrmojo.android.ui.FolderView=mstrmojo.declare(mstrmojo.android.SimpleList,[mstrmojo.android._HasLingeringListSelections],{scriptClass:"mstrmojo.android.ui.FolderView",allowTouchBubble:false,useSelectScroll:true,highlightOnSelect:true,hasEvenRows:true,listHooks:{select:function(I){I.style[F.CSS3_TRANSITION_DURATION]=0;},unselect:function(I){I.style[F.CSS3_TRANSITION_DURATION]="300ms";}},getItemMarkup:function(K){var M=K.desc,L=K.isc,J=((M)?1:0)+((L)?2:0);if(!A[J]){var I="<h3>{@n}</h3>";if(M){I+="<h4>{@desc}</h4>";}I+="<div><div><div></div></div></div>";A[J]=this._super(K).replace("{@en@n}",I);}return A[J];},getItemProps:function C(M,I){var L=this._super(M,I),N=M.desc||"",K=this.controller.isItemCached(M),J=!(K||this.controller.isItemAvail(M,true));L.addCls("ty"+(M.st||2048));if(L.n){L.n=E.htmlAngles(L.n);}if(N){L.desc=E.htmlAngles(N);L.addCls("desc");}if(K&&M.st!==2048){L.addCls("cached");}else{if(M.isc){L.addCls("isc");}}if(M.unread){L.addCls("new");}if(J){L.addCls("disabled");}return L;},canItemLinger:function H(I){return this.controller.canItemLinger(I);},buildRendering:function G(){var I=this._super();var J=document.createElement("div");J.className="clear-me";this.itemsContainerNode.appendChild(J);return I;},preselectionChange:function D(I){var J=I.added,L=I.removed;if(J){var K=this.items[J[0]];if(!this.controller.isItemAvail(K)){if(L&&L.length){this.select(L,true);}return false;}}return true;},touchSelectBegin:function B(K){var I=this.getItemIdxTouch(K);if(I>-1){var J=this.controller;if(!J.itemLongPressed||!J.itemLongPressed(this.items[I])){this._super(K);}else{return false;}}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList");mstrmojo.android.selectors.ListBox=mstrmojo.declare(mstrmojo.android.SimpleList,null,{scriptClass:"mstrmojo.android.selectors.ListBox",init:function B(C){this._super(C);mstrmojo.css.addWidgetCssClass(this,["selector-listbox"]);},postBuildRendering:function A(){var H=parseInt(this.height,10);if(H){var F=this.itemsContainerNode,C=F.offsetHeight;if(C<H){var E=this.items.length,G=Math.round(H/this.items.length)+"px",D=0;for(D=0;D<E;D++){F.childNodes[D].style.lineHeight=G;}}}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.MobileCheckList","mstrmojo.android._IsIncFetchList","mstrmojo.mstr.WebElements","mstrmojo.array");var D=mstrmojo.array,G=new mstrmojo.mstr.WebElements();function H(M){this.supportsIncFetch=false;delete this.ifDataHelper;if(M){if(M.items.length<M.totalSize){this.ifDataHelper=M;this.supportsIncFetch=true;}}}function C(){var M=this.height;if(!this.elasticHeight&&M){this.elasticHeight=parseInt(M,10);}}mstrmojo.android.ui.ElementsPicker=mstrmojo.declare(mstrmojo.ui.MobileCheckList,[mstrmojo.android._IsIncFetchList],{scriptClass:"mstrmojo.android.ui.ElementsPicker",browseElements:null,viewAll:true,glow:true,onbrowseElementsChange:function A(){H.call(this);this._ignoreSelection=true;var M=this.browseElements;if(M){var O=M.items=(M.items||[]),N=this._searchConfig;if((!N||N.exit)&&!this.viewAll){O=this.getSelectedItems();}this.set("items",O);if(N){this.glow=false;this.selectItems(N.selected,true);this.glow=true;}H.call(this,M);}else{this.set("items",[]);}this.updateScroller();this._ignoreSelection=false;},syncSelection:function F(){var M=this._searchConfig;if(M){this.selectItems(M.selected,false);}},enterSearchMode:function E(){var M=this.getSelectedItems();this._searchConfig={elements:this.browseElements,selected:M,clone:[].concat(M)};C.call(this);this.set("browseElements",G);},search:function L(M){this.set("browseElements",M);},exitSearchMode:function K(N){var M=this._searchConfig;M.exit=true;this.set("browseElements",N?M.elements:{items:M.selected});delete this._searchConfig;},clearSearch:function J(){var M=this._searchConfig;M.selected=[].concat(M.clone);this.set("browseElements",G);},postselectionChange:function B(N){var M=this._searchConfig;if(!M||this._ignoreSelection){return ;}var Q=M.selected,O=this.items,P=N.added;if(this.multiSelect){D.forEach(P,function(R){Q.push(O[R]);});D.forEach(N.removed,function(R){D.removeItems(Q,"v",[O[R]]);});}else{if(P){Q.splice(0);Q.push(O[P[0]]);}}},onviewAllChange:function I(){var N=this.getSelectedItems(),M;if(this.viewAll){M=this.browseElements;N=M.items;}else{C.call(this);}this.glow=false;var O=this.getSelectedItems();this.set("items",N);this.selectItems(O,true);this.glow=true;H.call(this,M);this.updateScroller();}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList","mstrmojo.ui.MobileCheckList","mstrmojo.array");var A='<div class="mstrmojo-SelectBoxList-item" idx="{@idx}"><h2>{@n}</h2><h4>{@v}</h4></div>';mstrmojo.android.ui.SelectBoxList=mstrmojo.declare(mstrmojo.android.SimpleList,null,{scriptClass:"mstrmojo.android.ui.SelectBoxList",selectionPolicy:"reselect",getItemMarkup:function(){return A;},getItemProps:function B(F,D){var E=this._super(F,D);E.v=F.v;return E;},postselectionChange:function C(E){var G=E.added;if(!G){return ;}var D=G[0],H=this.items[D],F=H.items,I=this.id;mstrApp.showDialog({title:H.n,children:[{scriptClass:"mstrmojo.ui.MobileCheckList",items:F,multiSelect:false,isElastic:true,selectedIndex:mstrmojo.array.find(F,"on",true),postselectionChange:function(J){mstrApp.closeDialog();mstrmojo.all[I].selectListChange(D,F[J.added[0]]);}}]});},selectListChange:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.MobileCheckList","mstrmojo.css");var B=mstrmojo.css,C="selected";function E(){var G=this.getSelectedItems().length,I=this.items.length,H="btnCheckSemi";if(G===0){H="btnCheckNone";}else{if(G===I){H="btnCheckFull";}}this.parent.updateTitleBarButtonClass(H);}mstrmojo.ui.MobileReviewList=mstrmojo.declare(mstrmojo.ui.MobileCheckList,null,{scriptClass:"mstrmojo.ui.MobileReviewList",listHooks:{select:function(H,I,G){mstrmojo.ui.MobileCheckList.prototype.listHooks.select(H,I,G);if(this.parent.selectionHidden){this.selectedIndices={};return true;}E.call(this);},unselect:function(H,I,G){mstrmojo.ui.MobileCheckList.prototype.listHooks.unselect(H,I,G);E.call(this);return this.selectionHidden;}},init:function F(G){this._super(G);if(this.multiSelect){B.addWidgetCssClass(this,"hidden");}},selectAll:function D(){var G="addClass",J=this.domNode.childNodes[0],I=J.childElementCount,H=0,K=true;if(this.getSelectedItems().length>0){G=("removeClass");this.selectedIndices={};K=false;}for(H=0;H<I;H++){B[G](J.childNodes[H],C);if(K){this.selectedIndices[H]=true;}}E.call(this);},touchSelectBegin:function A(G){if(this.parent.selectionHidden){this.parent.setDeleteActions("delete");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocButton","mstrmojo._HasDrillLinks","mstrmojo.ui.MobileCheckList","mstrmojo.android.ui.Button","mstrmojo.dom","mstrmojo.array");function A(L){this.set("pressed",L);}function J(M,N){var L=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(M);return L?"rgba("+parseInt(L[1],16)+","+parseInt(L[2],16)+","+parseInt(L[3],16)+","+N+")":"";}function B(L){this.model.executeLink(L,this.target,this);}function G(){var L=this.drillLinkItems,M=this.id;if(L.length===1){A.call(this,false);B.call(this,L[0].url);return ;}this._linksOpen=true;mstrApp.showDialog({title:this.defn.n,children:[{scriptClass:"mstrmojo.ui.MobileCheckList",items:L,multiSelect:false,isElastic:true,hasEvenRows:true,postselectionChange:function(N){mstrApp.closeDialog();B.call(mstrmojo.all[M],L[N.added[0]].url);}}],onClose:function(){var N=mstrmojo.all[M];A.call(N,false);delete N._linksOpen;},buttons:[mstrmojo.android.ui.Button.newButton(mstrmojo.desc(221,"Cancel"))]});}mstrmojo.android.ui.DocButton=mstrmojo.declare(mstrmojo.DocButton,[mstrmojo._HasDrillLinks],{scriptClass:"mstrmojo.android.ui.DocButton",touchBegin:function F(){if(!this.linkEnabled){return false;}A.call(this,true);return true;},touchTap:function C(){if(this.ifw){this.model.showInfoWin(this.ifw,(this.getAnchor&&this.getAnchor())||this.domNode,"v");return ;}var L=this.drillLinkItems,M=(L&&L.length)||0;if(M>0){G.call(this);}},touchSelectBegin:function H(){this.touchTap();},touchEnd:function K(){if(!this._linksOpen){A.call(this,false);}},setBackgroundColor:function I(){var L=!!this.pressed,R=this.defn,Q=this.domNode,N=this.fmts,S=this.buttonContainerNode.style,O=this.domNode.style,P=L?R.bhlc:(N["background-color"]||""),M=L?J(R.bhlc,0.4):"";S.backgroundColor=P;S.borderColor=P;O.borderColor=M;O.backgroundColor=M;},getDPI:function E(){return mstrMobileApp.getDeviceDPI();}});var D=mstrmojo.android.ui.DocButton;D.prototype.markupString=D.prototype.markupString.replace(new RegExp(" mstrAttach:[a-zA-Z,]*"),"");D.prototype.formatHandlers.domNode=mstrmojo.array.filter([].concat(D.prototype.formatHandlers.domNode),function(L){return(L!=="P"&&L!=="B");});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.MobileCheckList","mstrmojo._IsInputControl","mstrmojo.android._HasPreviewButton","mstrmojo.android._IsIncFetchList","mstrmojo.array");var D=50;function F(){return{next:function(H){var I=Math.min(this.blockEnd+D,this.totalSize);H.success(null,this.items.slice(this.blockEnd,I));this.blockEnd=I;},init:function(J,H,I){this.blockBegin=J;this.blockEnd=H;this.totalSize=I.length;this.items=I;}};}mstrmojo.android.inputControls.PullDownDIC=mstrmojo.declare(mstrmojo.ui.MobileCheckList,[mstrmojo._IsInputControl,mstrmojo.android._HasPreviewButton,mstrmojo.android._IsIncFetchList],{scriptClass:"mstrmojo.android.inputControls.PullDownDIC",multiSelect:false,isElastic:true,supportsIncFetch:false,init:function G(H){this._super(H);this._items=this.getItems();if(this._items.length>D){this.ifDataHelper=F();this.supportsIncFetch=true;}},postselectionChange:function C(I){var H=I.added[0];if(H<this.items.length){this.set("value",this.items[H].v);}},preBuildRendering:function A(){this._super();var J=this.value,K=this.dic.ust||"",I=this._items,H=mstrmojo.array.find(I,"v",J);if(H===-1){I=[{n:K,v:J}].concat(I);H=0;}if(this.supportsIncFetch){this.ifDataHelper.init(0,D,I);I=I.slice(0,D);}this.items=I;this.set("selectedIndex",H);},postBuildRendering:function B(){this._super();this._scroller.scrollTo(0,0);},renderPreview:function E(){var H=mstrmojo.array.find(this._items,"v",this.value),I=(H>=0)?this._items[H].n:(this.dic.ust!==undefined?this.dic.ust:this.dv);this.renderPreviewButton(this.openerNode,this.dicChanged?I:this.dv);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.XtabZone","mstrmojo.DICFactory","mstrmojo.DynamicClassFactory");var AQ=102,R=1,K=2,F=1,AN=4,s=mstrmojo.css,q=mstrmojo.dom,j=mstrmojo.hash,x=mstrmojo.array,e=mstrmojo.DynamicClassFactory.newComponent,L=1,AS=2,I=4,f=2,W=1,C=2,AO=1,H=2,AC=1,AA=2,d=2,k=1,AU=6,AF=7,J=function(AW){if(AW){return AW.tui>=0?("h_"+AW.tui+"_"+AW.fi+"_"+AW.axis):("m_"+AW.mix);}return"";};function AB(Ac,AY,AZ){var Ab=this.nm[AY],AX=AZ.v,Aa=AZ.dv;Ac.rv=AX;Ac.v=Aa;Ac.mdf=1;if(Ac._src){Ac._src.rv=AX;Ac._src.v=Aa;Ac._src.mdf=1;}var AW=this.dicGroupMap[J(Ac)].widgetsMap[Ac._ei];if(!AW.showByDefault){if(AW.hasPreview){AW.renderPreview();}else{if(q.isIE7&&mstrmojo.string.isEmpty(AX)){AX=" ";}Ab[Ab.innerText!==undefined?"innerText":"textContent"]=(!AX?"\u00a0":AX);}}return Ab;}function a(AZ,Aa,AW){if(AW[Aa]===0){return true;}if(AZ&&AW[Aa]===undefined){try{var AX=AZ.getRowCells(Aa),Ab=AX&&AX[0];if(Ab&&Ab.o===Aa){if(Ab.sst){AW[Aa]=0;}return !!Ab.stt;}if(Ab&&Ab.o){return a(AZ,Aa+Aa-Ab.o,AW);}return false;}catch(AY){return false;}}else{return false;}}function M(AX,AW){x.forEach(AX,function(AY){AW[AY.o]=1;});}function AR(AW){if(AW.mgh&&(AW.mgh&R)){this.mghMarks={};}}function AD(AY,Aa){var AX=Aa.bb-1,AW=Math.min(AX+Aa.bc,Aa.tc),AZ;j.forEach(AY,function(Ac,Ab){AZ=Number(Ab);if(!isNaN(AZ)&&AZ>=AX&&AZ<AW){delete AY[Ab];}});}function AI(AZ,AY){var AW=this.editing?1:(AZ.rs||1),AX;for(AX=0;AX<AW;AX++){this.dirtyRows[AY+AX]=1;}}function AV(AW){return AW&&parseInt(AW.ipt,10)===d;}function AP(AW){var AX;this.delegateGridAction(function(AY){if(!AX&&AY.posMap&&AY.posMap[AW._ei]){AX=AY;}},"getRowIndex");return AX.getRowIdxByCell(AW);}function l(AW){var Ac=AW.thPosMap,Ae=AW.slot,Ab=Ac&&Ac.length||0,Ag=this.lastHeaderIndexs[Ae]||0,Aa=[AW.tableNode],Ad,AY,Af,AZ;if(this.getStickedTableNodes){Aa=Aa.concat(this.getStickedTableNodes());}for(AZ=Ag;AZ<Ab;++AZ){Ad=Ac[AZ],Af=Ad.obj;if(this.isEditableHeader(Af)){for(var AX in Aa){AM(Aa[AX],Ad);}}}this.lastHeaderIndexs[Ae]=AZ;}function AM(AW,AY){var AX=AW.tBodies[AY.page].rows[AY.row].cells[AY.cell];AX.innerHTML='<div class="editable-column">'+AX.innerHTML+"</div>";}function o(AY){var Aa=true,AX=AY||[];for(var AZ=0,AW=AX.length;AZ<AW;AZ++){if(AX[AZ]&&(AX[AZ].w==="")){Aa=false;break;}}return Aa?"40px":"";}function w(AW){return !AW.tav||!(AW.tav&F);}mstrmojo._IsEditableGridCP={_mixinName:"mstrmojo._IsEditableGridCP",initContent:function AK(AZ){this._super(AZ);var Af=this.gridData,AX=Af&&Af.vp,Ad,Ac,Ae,Ah,AW,Ag,AY,Ab;if(((this.type===L)||(this.type===I))&&AX&&AX.cols&&!AX._adjusted){AW=AX.cols.cg;AY=AX.cols.cws;if(AW&&AW.cgc>0){for(Ad=AW.cgc;Ad>0;Ad--){AW[Ad]=j.copy(AW[Ad-1],{});Ag=AW[Ad];var Aa=Ag.attForms;if(Aa){for(Ac=0,Ah=Aa.length;Ac<Ah;Ac++){Ae=Aa[Ac];Ae.idx+=1;}}}AW[0]={tg:false,cc:0,cl:1,attForms:[{n:"",idx:0}]};AW.cgc+=1;}if(AY){AY.splice(0,0,{w:"60px",xc:true});}if(AX.dafIdx!==undefined){AX.dafIdx+=1;}Ab=Af.gts.row;for(Ad=0,Ah=Ab.length;Ad<Ah;Ad++){Ab[Ad].ci=Ad+1;}AX._adjusted=true;}this.colWidths=[{w:o(this.colWidths)}].concat(this.colWidths);this.unmergedCells=[];},getUnmergedCells:function Z(){return null;},getRowCells:function AG(Ag){var AY=this._super(Ag),AW=AY[0],Ak=(AW&&AW.o)||0,Ah=(this.tp===L),Ab=this.interactiveCellsArray,Aj={css:"",v:""},An=[],AX=[],Ao,Ap;if(!Ah){var Ad=this.base.items,Am=this.lookupBase,Al=this.gridData.css,As=AW&&AW.pi,Ai=As&&As.ri,Ar=As&&As.ci,Ae=AW.stt>0;while(As&&Ai>-1&&Ar>-1){AW=AW._p||Ad[Ai].items[Ar];var AZ=j.copy(AW,{});AZ._src=AW;if(!AZ.css){AZ.css=Al[AZ.cni].n;}var Af=Am[AW.tui],Aq=Af&&Af.es[AW.idx];if(Aq){AZ.v=AW.v||Aq.n;AZ._e=Aq;}AZ.rs=1;if(Ae){AZ.at&=~32;}if(Ak>-1){AZ.o=Ak;}if(!AZ.axis&&this.axis){AZ.axis=this.axis;}AZ._ei=Ab.push(AZ)-1;An.splice(0,0,AZ);As=AW&&AW.pi;Ai=As&&As.ri;Ar=As&&As.ci;}for(Ao=0,Ap=AY.length;Ao<Ap;Ao++){var Aa=AY[Ao];if(Aa.rs>1){var Ac=j.copy(Aa,{});Ac.rs=1;Aa=Ac;}AX.push(Aa);}}else{AX=AY;if(Ag>0){return AY;}}if(AX[0]){Aj=j.copy(AX[0],{});Aj.rv=Aj.v="";if(this.tp===L){Aj.n=Aj.v="";Aj.markAll=true;}else{Aj.n="";}Aj._ei=Ab.push(Aj)-1;Aj.at=32;Aj.cs=1;Aj.mark=true;Aj.mix="x";Aj.css=(An[0]&&An[0].css)||Aj.css;delete Aj.ui;delete Aj.tui;delete Aj.fs;delete Aj.mdf;}return[Aj].concat(An.concat(AX));}};mstrmojo._IsEditableXtab=mstrmojo.provide("mstrmojo._IsEditableXtab",{_mixinName:"mstrmojo._IsEditableXtab",update:function AE(AY){var AW,AX=AY.data;if(this._super){this._super(AY);}this.kc={};this.rs={};this.rsDelta={};AR.call(this,AX);if(AX.eg!==undefined){return ;}AW=AY.data.marked;if(AW){M(AW,this.rs);}if(!AX.rw){var AZ=AX.gvs.items.length;AX.rw={row:{bb:1,bc:AZ,tc:AZ},col:{bb:-1,bc:-1,tc:0}};}},initCP:function E(AY,AX,Ad,Aa,Ac,AZ,Ab){var AW={gridData:AY,type:Ad,interactiveCellsArray:AX};AW.base=Aa||AW.base;AW.lookupBase=Ac||AW.lookupBase;AW.axis=AZ||AW.axis;AW.dataSource=this;if(!Ab){if(this.tca===K&&this.editing){if(Ad===L){mstrmojo.EditableXtabTitlesCP=e(mstrmojo.XtabTitlesCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabTitlesCP",tp:L});Ab=new mstrmojo.EditableXtabTitlesCP(AW);}else{if(Ad===I){mstrmojo.EditableXtabCP=e(mstrmojo.XtabCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabCP"});Ab=new mstrmojo.EditableXtabCP(AW);}else{Ab=new mstrmojo.XtabCP(AW);}}}else{if(Ad===L){Ab=new mstrmojo.XtabTitlesCP(AW);}else{Ab=new mstrmojo.XtabCP(AW);}}}else{j.copy(AW,Ab);}return Ab;},createOnDemandCP:function r(AX,AY,AW){var AZ;if(this.tca===K&&this.editing&&AW===I){mstrmojo.EditableXtabOnDemandCP=e(mstrmojo.XtabOnDemandCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabOnDemandCP"});AZ=new mstrmojo.EditableXtabOnDemandCP();}else{AZ=new mstrmojo.XtabOnDemandCP();}AZ.dataSource=this;AZ.blockNum=AX;AZ.rc=AY;return AZ;},preBuildRendering:function B(){var AW=this.defn.txi;if(this._super){this._super();}this.txar=AW.txar;this.sci=AW.sci;this.tca=AW.tca;if(this.tca!==K){this.editing=false;}else{if(mstrApp.isMobile){this.editing=this.alwaysEditing=true;}}this.nm={};this.ko={};this.dirtyRows={};this.requiredCellsMap={};this.dicGroupMap={};this.lastIndex=0;this.lastHeaderIndexs={};this.columnNames={};},postBuildRendering:function Y(){if(this._super){this._super();}if(this.tca===K&&this.gridData.eg===undefined){var AY=Math.max(-16,-this.domNode.offsetTop),AZ=this;if(!this.alwaysEditing){var AW=mstrmojo.Button.newIconButton(mstrmojo.desc(8324,"Mark rows"),"mstrmojo-EditButton",function(){if(!AZ.recalculating){AZ.editing=!AZ.editing;AZ.refresh();}}),AX=new mstrmojo.Button(mstrmojo.hash.copy({cssText:"top:"+AY+"px;"},AW));AX.render();this.domNode.appendChild(AX.domNode);if(this.editing){this.domNode.style.zIndex=1000;s.addClass(AX.domNode,"close");}else{s.removeClass(AX.domNode,"close");}}}},dataDownloadErr:function N(){if(this.txar&&this.recalculating){this.delegateGridAction(function(AW){AW.isDownloading=false;},"isDownloading");this.rhsCP.initContent();this.valuesCP.initContent();s.removeClass(this.maskNode,"wait");this.recalculating=false;}},dataDownloaded:function U(AZ,AX){var AY=AZ.data;if(this.txar){var AW=AX.blockNum,Aa;if(this.recalculating){AX.recalculating=true;this.interactiveCellsArray=[];this.requiredCellsMap={};this.dirtyRows={};this.lastIndex=0;this.lastHeaderIndexs={};this.kc={};this.nm={};this.updatedCellsMap={};this.recalculating=false;this.destroyDICs();}else{AX.recalculating=false;}if(AW===0){this.gridData=AY;}if(AY.eg){this.refresh();return ;}Aa=this.interactiveCellsArray;this.initCP(AY,Aa,L,null,null,null,this.titlesCP);this.initCP(AY,Aa,AS,AY.ghs.chs,AY.gts.col,f,this.chsCP);this.titlesCP.initContent();this.chsCP.initContent();this.delegateGridAction(function(Ab){if(Aa&&Aa.length===0){grid.refresh();}},"refreshOnDataDownloaded");}if(this._super){this._super(AZ,AX);}AR.call(this,AY);AD(this.rs,AY.rw.row);if(AY.marked){M(AY.marked,this.rs);this.rsDelta={};}},closeDownloadStatus:function X(){if(this._super){this._super();}mstrmojo.css.removeClass(this._STATUS,"recalculate");},kc:null,ko:null,nm:null,rs:null,dicGroupMap:null,lastIndex:0,lastHeaderIndexs:{},columnNames:null,getDataInputInfo:function h(AW,AZ){var Ae=AW._ei,Ad,AY=this.node.defn,Am=this.gridData;if(AW.mark){Ad=AW.o;if(AW.stt){this.rs[Ad]=0;return ;}this.ko[Ad]=Ae;AW.rv=AW.v=this.rs[Ad]||-1;this.kc[Ae]={rowop:true};return{key:Ae,t:AQ,vls:[{v:-1},{v:1}],wm:1,w:22,hm:1,h:16,dm:1};}var Ah=this.model.getCellTitleInfo(AW,this.dataBlocks[AW._gd]),An=Ah&&Ah.title,Aj=An&&An.es,Ac=(AW.mti!==undefined)?AW.mti:AW.mix,Aa=(AW.mix!==undefined),Ak=AY.txi.dic,Ag;Ag=j.copy(!Aa?Ak.att&&An&&Ak.att[An.id]&&Ak.att[An.id][An.fs[AW.fi].id]:Ak.mtx&&Ak.mtx[Aj[Ac].oid],{});if(!Ag){return null;}if(this.columnNames[AZ]===undefined){this.columnNames[AZ]=!Aa?An.n:Aj[Ac].n;}if(AV(Ag)){Ag.vls=(Am.dcv&&Am.dcv[Ag.k])||[];}if(Am.tcs&&Am.tcs[Ag.k]){var Af=Am.tcs[Ag.k];if(Af&F){Ag.disabled=true;}if(Af&AN){Ag.req=1;}}if(Ae>=0&&!this.kc[Ae]){var Al=!AW.axis,Ab={isMv:Al};if(Al){var Ai=AW.pi,AX=Ai&&Ai.top;Ab.co=(AX&&AX.ci)||0;Ab.metric_id=Aj[Ac].oid;AW.o=Ab.o=(AW._lp&&AW._lp.o)||0;Ab.tp=C;}else{Ab.ax=AW.axis;Ab.atid=An.id;Ab.form_id=An.fs[AW.fi].id;Ab.o=AW.o;Ab.tp=W;Ab.fi=AW.fi;Ab.ui=AW.ui;Ab.tui=AW.tui;Ab.rs=AW.rs;}Ab.dt=Ag.dt;if(AV(Ag)){Ab.vls=Ag.vls;Ab.k=Ag.k;}this.kc[Ae]=Ab;}Ag.key=Ae;if(Ag.dm){Ag.dm=parseInt(Ag.dm,10);}return Ag;},isEditableHeader:function G(AW){var AX=this.node.defn,AY=AX.txi.dic;if(AW.sst||!AY){return false;}if(AW.id!==undefined&&AY.att){return !!(AY.att[AW.id]&&(AW.fix?AY.att[AW.id][AW.fid]:AY.att[AW.id]));}if(AW.tui!==undefined&&AW.mix!==undefined&&AY.mtx){return !!(AY.mtx[AW._e.oid]);}return false;},dataChanged:function Q(AY,AZ,AX,Aa,AW){if(!this.recalculating){if(Aa){this.nm[AY]=Aa;}if(this._super){this._super(AY,AZ,AX,Aa,AW);}}},updateValue:function g(AZ,AX){if(this._super){this._super(AZ,AX);}var Ad=this.interactiveCellsArray[AZ],Ah=AX.v,Ai,AW=AP.call(this,Ad);this.lmr=null;Ai=AB.call(this,Ad,AZ,AX);if(Ad.r!==Ah){if(!Ad.mark){Ad.mdf=1;mstrmojo.css.removeClass(Ai,"required");AI.apply(this,[Ad,AW]);this.flagDirtyUnit(Ai);}}else{this.clearDirtyUnit(Ai);}if(this.onCellUpdated){this.onCellUpdated(Ad,Ai);}if(this.tca===K){if(Ad.mark){var Ab=Ad.markAll?-1:Ad.o,Af=this.rsDelta;this.rs[Ab]=Ah;this.lmr={r:Ab,v:Ah};if(Ad.markAll){Af=this.rsDelta={};Af[Ab]=Ah;this.mghMarks={};}else{if(Af[Ab]&&Af[Ab]!==Ah){delete Af[Ab];}else{if(Af[-1]!==Ah){Af[Ab]=Ah;}}}}else{if(this.rs[Ad.o]!==0){this.rs[Ad.o]=1;}if(!this.editing&&this.mghMarks&&(Ad.mix===undefined)){if(!this.mghMarks[Ad.o]||this.mghMarks[Ad.o].rs<Ad.rs){this.mghMarks[Ad.o]={o:Ad.o,rs:Ad.rs,k:AZ};}var Aa,Ae,Ac=this;j.forEach(this.rsDelta,function(Aj,Ak){Aa=parseInt(Ak,10);Ae=parseInt(Ad.o,10);if(Aa>=Ae&&Aa<=(Ae+Ad.rs)){delete Ac.rsDelta[Ak];}});}else{this.rsDelta[Ad.o]=1;}if(!this.editing&&Ad.rs>1){var AY=Ad.o+1;while(AY-Ad.o<Ad.rs){if(!a(this.rhsCP,AY,this.rs)){this.rs[AY]=1;}AY+=1;}}if(this.editing){var Ag=this.dicGroupMap.m_x.widgetsMap[this.ko[Ad.o]];if(Ag){Ag.set("checked",true);}}}}if(this.txar&&!Ad.mark){return true;}return false;},autoRefresh:function AH(AW){this.delegateGridAction(function(AX){AX.invalidAllPages();},"invalidAllPages");this.rhsCP.invalid();this.valuesCP.invalid();s.addClass(this._STATUS,"recalculate");this.delegateGridAction(function(AX){AX.onscroll(true,AW);},"scrollOnAutoRefresh");this.recalculating=true;},getKeyContext:function P(AW){return this.kc[AW];},getUpdateObject:function S(){var Ab=[],AZ,Ac,Ad,AX=this.lmr,AY,Aa={};if(AX){this.lmr=null;return{manipulation:AO,actionType:(AX.v===-1)?AC:AA,rowOrdinal:AX.r,nodeKey:this.k,sliceId:this.sid};}Ac=this.getUpdatedValues();for(AZ=0;AZ<(Ac&&Ac.length);AZ++){if(!Ac[AZ].rowop){Ad=Ac[AZ];break;}}if(Ad){AY=mstrmojo.string.encodeXMLAttribute(String(Ad.v));if(Ad.k!==undefined&&Ad.vls){var AW=x.find(Ad.vls,"v",Ad.v);if(AW!==-1){Aa={controlKey:Ad.k,elementId:Ad.vls[AW].eid};}}if(!!Ad.isMv){Ab.push(j.copy(Aa,{rowOrdinal:Ad.o,colOrdinal:Ad.co,newValue:AY,dataType:Ad.dt}));}else{Ab.push(j.copy(Aa,{rowOrdinal:Ad.o,attId:Ad.atid,formId:Ad.form_id,unitIndex:Ad.tui||Ad.ui,newValue:AY,dataType:Ad.dt}));}}return{manipulation:H,nodeKey:this.k,sliceId:this.sid,cells:Ab,autoRefresh:this.txar};},getUpdates:function T(){var Ag=this,Ab,Ac,AW=Ag.getUpdatedValues(),AZ=this.rsDelta,Aa=[],Af=[],Ad=false,AY="";Aa.push('<gr rw_tree_type="'+Ag.treeType+'" rw_node_key="'+Ag.k+'" slice_id="'+Ag.sid+'">');for(Ab in AW){if(AW.hasOwnProperty(Ab)){Ac=AW[Ab];if(!Ac.rowop){var Ah=mstrmojo.string.encodeXMLAttribute(String(Ac.v)),AX=x.find(Ac.vls,"v",Ac.v);if(Ac.k&&Ac.vls&&AX===-1){if(!!Ac.isMv){Af.push('<cli cordinal="'+Ac.co+'" metric_id="'+Ac.metric_id+'"><updt types="'+AF+'" rordinal="'+Ac.o+'" rw_control_key="'+Ac.k+'"/></cli>');}else{Af.push('<cli ax="'+Ac.ax+'" attribute_id="'+Ac.atid+'" form_id="'+Ac.form_id+'"><updt types="'+AU+'" ordinal="'+Ac.o+'" rw_control_key="'+Ac.k+'" flags="1"/></cli>');}}else{if(Ac.k&&Ac.vls&&AX!==-1){AY='rw_control_key="'+Ac.k+'" element_id="'+Ac.vls[AX].eid+'" ';}if(!!Ac.isMv){Af.push('<cli cordinal="'+Ac.co+'" metric_id="'+Ac.metric_id+'"><updt types="'+Ac.tp+'" rordinal="'+Ac.o+'" '+AY+'value="'+Ah+'" dt="'+Ac.dt+'"/></cli>');}else{Af.push('<cli ax="'+Ac.ax+'" attribute_id="'+Ac.atid+'" form_id="'+Ac.form_id+'"><updt types="'+Ac.tp+'" ordinal="'+Ac.o+'" '+AY+'value="'+Ah+'" dt="'+Ac.dt+'"'+(this.mghMarks?' flags="1"':"")+"/></cli>");}}Ad=true;}}}if(!j.isEmpty(this.mghMarks)){var Ae=this;j.forEach(this.mghMarks,function(Ai,Aj){AY=Ae.getKeyContext(Ai.k);Af.push('<mark rordinal="'+Aj+'" types="4" flags="1" attribute_id="'+AY.atid+'" form_id="'+AY.form_id+'"/>');});}if(AZ&&!j.isEmpty(AZ)){Ad=true;x.forEach(j.keyarray(AZ).sort(),function(Ai){if(AZ[Ai]===1){Af.push('<mark rordinal="'+Ai+'" types="4"/>');}else{Af.push('<mark rordinal="'+Ai+'" types="5"/>');}});}Aa.push(Af.join(""));Aa.push("</gr>");if(!Ad){Aa=[];}return Aa.join("");},flagDirtyUnit:function b(AX){if(AX&&this.sci){if(this._super){this._super(AX);return ;}var AW=document.createElement("div"),Ab,AY=false,Aa=s.getStyleValue(this.domNode,q.CSS3_TRANSFORM),AZ;AW.className="flag-container";AW.innerHTML='<div class="dirty-cell"/>';if(AX.insertBefore){AX.insertBefore(AW,AX.firstChild);AZ=(AW.offsetParent===AX);}AY=mstrmojo.string.isEmpty(Aa)||Aa==="none";Ab=AW.firstChild;Ab.style.top=((!AY||AZ)?(-AW.offsetTop):(AX.offsetTop-AW.offsetTop))+"px";Ab.style.left=(AX.clientWidth+((!AY||AZ)?(-AW.offsetLeft):(AX.offsetLeft-AW.offsetLeft))-8)+"px";}},clearDirtyUnit:function AT(AW){if(this._super){this._super(AW);return ;}var AX=AW.firstChild;if(AW){if(AX&&AX.className&&AX.className==="flag-container"){AW.removeChild(AX);}}},onvisibleChange:function u(){if(this.visible===true){var AW=this;setTimeout(function(){AW.configureActions();},10);}},configureActions:function V(){if(this.visible===false){return ;}this.configureCellsAction();this.lastIndex=this.interactiveCellsArray.length;var AW=this;this.delegateGridAction(function(AX){l.call(AW,AX);},"markEditableColHeaders");this.registerTxWidget();if(this._super){this._super();}},configureCellsAction:function AJ(Ar,Ae,Ao,Ad){var A3=this,AW=this.getTargetZone(),Ao=Ao||AW.posMap,Ai=Ar||this.interactiveCellsArray,Ae=(Ae===undefined?this.lastIndex:Ae),As=this.dicGroupMap,Aq=[],Aa,Ax,Aw,Av,AY,Ag,At,Af,AX,A2,A1,A0,Az,Ap=function(){var A4=[];this.delegateGridAction(function(A5){A4.push(A5);},"configureActions");return A4;},Ac=Ap.call(this),Aj=(Ac.length>1),Ak=function(A4){var A6=A4.length,A5;for(A5=0;A5<A6;A5++){A3.flagDirtyUnit(A4[A5]);}};for(Aa=Ae,Ax=Ai.length;Ai[Aa]&&Aa<Ax;Aa++){AY=Ai[Aa];Ag=Ao&&Ao[Aa];if(!Ag&&Aj){AW=(Ac[0]===AW)?Ac[1]:Ac[0];Ao=AW&&AW.posMap;Ag=Ao&&Ao[Aa];}if(Ag&&((AY.at&32)>0)){AY.at=32;if(AY.rv==null){AY.rv=isNaN(AY.mix)?AY._e.n:AY.v;}Af=J(AY);A1=this.getDataInputInfo(AY,Af);A0=As[Af];if(AY.axis===1&&this.clonedRowHeader){if(this.clonedRowHeader.isRendered()){Az=this.clonedRowHeader.getTableNode();}else{Az=AW.tableNode;if(A1&&!A0){this.clonedRowHeader.addGroupKey(Af);}this.clonedRowHeader.addTempDICInfo(AY,Ag);}}else{if(AY.axis===2&&this.clonedColHeader&&this.clonedColHeader.isRendered()){Az=this.clonedColHeader.getTableNode();}else{Az=AW.tableNode;}}At=Az.tBodies[Ag.page].rows[Ag.row].cells[Ag.cell];if(A1){if(!A0){A0=As[Af]=mstrmojo.DICFactory.createDICGroup({gk:Af,dic:A1,owner:this,openerType:k});}var AZ=!w(AY)||A1.disabled;var Au={value:(AY.rv===undefined)?(AY.v||AY.n):(typeof AY.rv==="string"?mstrmojo.string.decodeHtmlString(AY.rv):AY.rv),dv:AY.v||AY.n,ts:AY.ts,markAll:AY.markAll,openerNode:At,k:AY._ei,ownerCell:AY,enabled:!AZ,popupTitle:this.columnNames[Af]},Ab=AW.cp.stackedRh;if(Ab&&AY.singleStack&&(mstrmojo.DICConfig.showDICByDefault(A1,1)||mstrmojo.DICConfig.hasDICPreview(A1,1))){var Am=At.offsetHeight;At.className+=" igDIC";At.style.cssText="height:"+Am+"px;";if(A0.showByDefault){At.className+=" sbd";}mstrmojo.hash.copy({inlineExtraCssText:"position:absolute;top:"+parseInt(Ab/2-Am/2+1,10)+"px;"},Au);}A0.addDIC(AY._ei,Au);AX=Ag.page*AW.rowsPerPage+Ag.row;if(A1.req){for(Av=0;Av<(this.editing?1:(AY.rs||1));Av++){A2=this.requiredCellsMap[AX+Av];if(!A2){this.requiredCellsMap[AX+Av]=A2=[];}A2.push(AY);}}if(AY.mdf&&!Ad){Aq.push(At);AI.apply(this,[AY,AX]);}if(AZ&&!mstrmojo.DICConfig.showDICByDefault(A1,1)){var Al=document.createElement("div"),Ay=document.createElement("span"),An=At.currentStyle||document.defaultView.getComputedStyle(At,null),Ah={marginLeft:"-"+An.paddingLeft,paddingLeft:An.paddingLeft,marginRight:"-"+An.paddingRight,paddingRight:An.paddingRight,marginTop:"-"+An.paddingTop,paddingTop:An.paddingTop,marginBottom:"-"+An.paddingBottom,paddingBottom:An.paddingBottom};Al.className="xtab-dic-disabled";j.copy(Ah,Al.style);Ay.appendChild(At.firstChild);Al.appendChild(Ay);At.appendChild(Al);}}}}this.lastIndex=Aa;for(Af in As){As[Af].render();}setTimeout(function(){Ak(Aq);},25);},destroyDICGroup:function t(AX){var AY=this.dicGroupMap,AW,AZ,Aa;if(AY&&(AX instanceof Array)){for(AW in AX){AZ=AX[AW];Aa=AY[AZ];if(Aa){Aa.destroy();delete AY[AZ];}}}},showPopupDIC:function A(AZ){var AX=AZ&&q.findAncestorByAttr(AZ,"ei",true,this.viewport);if(AX){var Aa=AX.node,AW=this.getCellForNode(Aa),AY=this.dicGroupMap[J(AW)];if(AY&&!AY.dic.disabled&&!(AW.tav&&(AW.tav&F))){AY.showPopupDIC(AW._ei);return true;}}return false;},onclick:function AL(AX){var AW=mstrmojo.dom.eventTarget(window,AX.e);if(!this.showPopupDIC(AW)&&this._super){this._super(AX);}},unrender:function D(){if(this._super){this._super();}this.destroyDICs();},destroyDICs:function z(){var AW=this.dicGroupMap;this.dicGroupMap={};setTimeout(function(){var AX;for(AX in AW){AW[AX].destroy();}},10);},checkRequiredObjects:function O(){if(this.hasRendered&&!(this.isInteractiveGrid&&this.isInteractiveGrid())&&!this.gridData.eg){var AY=this.getTargetZone(),Aa=AY.posMap,Ac,AZ=this,AX=this.rs,AW=true,Ab=function(Ai,Ae){var Ah=true,Af=AZ.requiredCellsMap[Ai],Ad=(Af&&Af.length)||0,Ag;for(Ag=0;Ag<Ad;Ag++){if(!Af[Ag].mdf){s.toggleClass(AY.getNodeByPosition(Aa[Af[Ag]._ei]),"required",Ae);Ah=!Ae;}}return Ah;};if(this.tca===K){for(Ac in AX){AW=Ab(parseInt(Ac,10)+1,AX[Ac]>0)&&AW;}}else{for(Ac in this.dirtyRows){AW=Ab(Ac,true)&&AW;}}return AW;}return true;},editNext:function p(AY){if(this.recalculating){return false;}var AZ=this.interactiveCellsArray,AW=AZ.length,Aa=AY+1,Ab,AX;do{if(Aa>=AW){Aa%=AW;}if(Aa===AY){return false;}Ab=AZ[Aa];var Ac=this.dicGroupMap[J(Ab)];if(Ac&&!Ac.dic.disabled&&w(Ab)){if(mstrmojo.DICConfig.isKeyNavigable(Ac.dic)){if(!Ac.showByDefault){Ac.showPopupDIC(Aa);}else{AX=Ac.widgetsMap[Aa];AX.focus();}return true;}}Aa++;}while(true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.StickySections","mstrmojo.VisTextTooltip");var a=mstrmojo.dom,X=mstrmojo.hash,e=mstrmojo.array,J=["white","black","transparent","gray"],Q="ig-selected-row";var E=2;function H(){return(this.isFullScreenWidget||!this.isDocXtab);}function d(){var AB=this.gridData,r=AB.ghs.chs;if(r.items&&r.items.length){var AC=AB.ghs.chs.items[0].items,l=AB.vp,AA=l.cols,k=AA.cg,o=AA.cws,t=k.cgc,w,s,z=false,u=[];for(w=0;w<t;w++){var p=k[w],q=-1;X.forEach(p,function(AD,j){if(/[mMiIxX]([0-9])+$/.test(j)){for(s=0;s<AC.length;s++){if(AC[s].mix==AD){p[j]=s;q++;break;}}if(AC[p[j]]===undefined||s===AC.length){delete p[j];return ;}z=true;}});if(z){var x=[];for(s=0;s<p.cl;s++){if(p["mix"+s]===undefined){x.push(s);}else{if(x.length>0){p["mix"+x.splice(0,1)]=p["mix"+s];delete p["mix"+s];}}}p.cl=++q;if(p.cl===0){u.push(w);}}else{if(!p.attForms){u.push(w);}}z=false;}for(w=u.length-1;w>=0;w--){delete k[u[w]];for(s=u[w];s<t;s++){k[s]=k[s+1];}delete k[s-1];o.splice(u[w],1);k.cgc--;}}}function C(){var AA=":",z=this.gridData,j=z.gts,r=z.ghs.chs,AB=j.row,q=AB[0],s=j.col&&j.col.length>0,l={bn:"0",gr:"0",ar:"1",ct:"1",daf:q.id+AA+q.fid,cols:{cws:[{w:"100"}],cg:{cgc:1}}},u=["row"],p=[j.row],x,w;if(s){u=["row","col"];p=[j.row,r.items[0].items];l.cols={cws:[{w:"50"},{w:"50"}],cg:{cgc:2}};}var k=l.cols.cg;for(x=0,w=k.cgc;x<w;x++){var o=u[x],t;k[x]={tg:true,cl:p[x].length,cc:0,sh:true};if(o==="col"){for(t=0;t<p[x].length;t++){k[x]["mix"+t]=p[x][t].mix;}}else{k[x].attForms=[];for(t=0;t<p[x].length;t++){k[x].attForms[t]={idx:t,n:""};}}}this.gridData.vp=l;}function F(p,k){var r,l,j,q,o=function(x,AA,z){var t,w,u=AA[x+"Sibling"],s;if(u){for(t=0,w=u.cells.length;t<w;t++){s=u.cells[t];if((x==="next"&&/stack-bottom-last/.test(s.className))||(x==="previous"&&/stack-top/.test(s.className))){z.push(u);return ;}}z.push(u);o(x,u,z);}};k.push(p);for(l=0,j=p.cells.length;l<j;l++){r=p.cells[l];q=r.className;if(/stack/.test(q)){if(/stack-top/.test(q)){o("next",p,k);break;}else{if(/stack-bottom-last/.test(q)){o("previous",p,k);break;}else{if(/stack-middle|stack-bottom/.test(q)){o("next",p,k);o("previous",p,k);break;}}}}}return k;}function h(j){e.forEach(j,function(k){mstrmojo.css.addClass(k,Q);});}function G(){var j=X.copy(document.getElementsByClassName(Q));e.forEach(j,function(k){mstrmojo.css.removeClass(k,Q);});}function Z(l){var p=a.findAncestorByAttr(l,"ei",true,this.domNode),k=p&&p.node,j=this.getCellForNode(k);if(k&&k.className.indexOf("iggroup")>0){return true;}if(this.isInteractiveGrid()&&this.igToggle(j)){return true;}if(!j){return true;}if(a.contains(this._BR,l)){G();if(this.isReselectedTD(j)&&this.hasSelectAll(j)){return false;}var o=a.findAncestorByName(l,"tr",true);if(a.contains(this._BR,o)){h(F(o,[]));}}return false;}mstrmojo._IsInteractiveGrid=mstrmojo.provide("mstrmojo._IsInteractiveGrid",{_mixinName:"mstrmojo._IsInteractiveGrid",cssClass:"mstrmojo-InteractiveGrid",enableMagnifier:false,scrollerConfig:{scrollPast:false},isInteractiveGrid:function(){return(this.gridData.vp&&this.gridData.vp.cols)?true:false;},preBuildRendering:function D(){if(this.gridData.eg){return this._super();}if(!this.isInteractiveGrid()){C.call(this);}d.call(this);var o=this,l=this.parent,j=function(q){o[q]=o[q]||((l&&l[q])?l[q]:480);};j("height");j("width");var p=isNaN(this.gridData.vp.ct)?1:parseInt(this.gridData.vp.ct,10);this.cssClass="mstrmojo-InteractiveGrid "+J[p];this.scrollboxNodeOverflow="overflow:hidden;";var k=(this._super?this._super():true);this.cssDefault=(this.cssDefault==="")?"r-cssDefault":"";return k;},getKey:function P(){return this.gridData.k;},isReselectedTD:function N(j){if(this.IGCurrentSelectedCell&&j&&this.IGCurrentSelectedCell===j){return true;}else{return false;}},hasSelectAll:function U(u){var p=this.model,k=u&&u.at,o="Metrics",q=false;if(k){if(k&E){var l=p.getCellTitleInfo(u),s=l&&l.title,j=s&&s.id,t=p.scm;var r=(j&&t[j])||t[o];if(r){var w=p.xtab;q=(w.allowToggleSelections&&r.all);}}}return q;},renderChildren:function V(){this.prepareCWSCalculation();if(this._super){this._super();}this.createStickySections();var l=this.zones._BR,k=l.hiliteCellsMap,o={},j=[];X.forEach(k,function(p,q){e.forEach(p.pos,function(r){l.clearHilites(q);o[r.row]=r.row;});});if(!X.isEmpty(o)){X.forEach(o,function(p){j.push(l.domNode.firstChild.rows[p]);});h(F(j[0],[]));}},useDomToCalculateOffsets:function S(){var j=this.zones._BR.cp;if(j&&(j.groupEnabled||j.stackLevels>1)){return true;}return(this._super||this._super())||false;},prepareCWSCalculation:function W(){var j=this.getFormats&&this.getFormats(),k=(!H.call(this))?parseInt(j.width,10):parseInt(this.width,10);this.zones._BR.cp.gridWidth=k;this.zones._TR.cp.gridWidth=k;},createStickySections:function K(){var s=this.gridData,r=this.getFormats&&this.getFormats();if(this.isInteractiveGrid()&&(s.vp.gr==="1"&&s.gts.cws.length>1)){mstrmojo.requiresCls("mstrmojo.StickySections");var l=this._TR,o="stickySections";this.addSlots({stickySections:l});if(!this.ss){var t=this.zones._BR.cp.getResolvedGroupHeader(0,0),u="iggroup xtab-td",q={132:-22,160:-27,213:-35,240:-40,320:-53},p=q[mstrMobileApp.getDeviceDPI()]||-27,j=(!H.call(this))?(parseInt(r.width,10)+"px"):"100%",k="width: "+j+";z-index: 2; position: relative;margin-bottom:"+p+"px;";this.ss=new mstrmojo.StickySections({currentSectionTitle:t.n||t.v,cssClass:u,slot:o,cssText:k});this.addChildren(this.ss);}}},performAction:function Y(j){return Z.call(this,j&&j.target)||(this._super&&this._super(j));},igToggle:function M(AA){if(!this.isInteractiveGrid()||!AA){return false;}var t=AA&&AA._e,AB=(AA&&AA.otp)||(t&&t.otp);if(AB){var r,o,x=this.gridData.vp.cols,l=x.cg,AC=AA.mix,z=4,q=12,w=function(j,AF){var AI=false;if(j.tg&&j.cl>1){var AE=j.cc,AK=j.cc,AD=0,AG=j.cl,AJ=j.cc=(++AK>=(AG+AD))?AD:AK,AH=[this._TR.getElementsByTagName("COLGROUP")[0],this._BR.getElementsByTagName("COLGROUP")[0]];e.forEach(AH,function(AM){var AL=AM.childNodes[AF+AE].style.width;AM.childNodes[AF+AE].style.width="0";AM.childNodes[AF+AJ].style.width=AL;});AI=true;}return AI;},k,p,s=0,u=false;if(AA&&AA.otp===q){for(r=0;r<l.cgc;r++){k=l[r];p=k.attForms;if(p){for(o=0;o<k.cl;o++){if(p[o]&&(p[o].idx===(AA.ci||AA.ui))){u=w.call(this,k,s);}}}s+=k.tg?k.cl:1;}}else{if(t&&t.otp===z){for(r=0;r<l.cgc;r++){k=l[r];if(k["mix"+k.cc]===AC){u=w.call(this,k,s);}s+=k.tg?k.cl:1;}}}return u;}return false;},getHACP:function B(){var j=(this.isInteractiveGrid())?new mstrmojo.InteractiveGridHACP():this._super();j.onDemandIF=!!(this.onDemandIF&&this.gridData.rw);return j;},onheightChange:function L(){if(H.call(this)&&this.scrollboxNode){this.scrollboxNode.style.height=(parseInt(this.height,10)-this._TR.clientHeight)+"px";}if(this._super){this._super();}},onwidthChange:function O(){if(H.call(this)){var j=this.width;if(this.hasRendered){this.unrender();this.width=j;this.render();}}else{if(this._super){this._super();}}},defaultAction:function I(l,j){var k=false;if(this._super){k=this._super(l,j);}this.model.sti=null;return k;},onclick:function g(j){},touchSelectBegin:function A(r){var o=r;var j=mstrmojo.dom.findAncestorByName(r.target,"td",true,this.domNode);var k=this.hasImgTag(j);var l=mstrmojo.dom.findAncestorByAttr(r.target,"trType",true,this.domNode);if(j&&l&&!k){var q=this.getTextWidth(j,j.className);if(q>j.offsetWidth-30){if(!this.visTextTooltip){var p=document.createElement("div");this.domNode.appendChild(p);this.visTextTooltip=new mstrmojo.VisTextTooltip({placeholder:p,targetDiv:j,boundary:this.domNode,touchAreaType:l.value});this.visTextTooltip.render();this.visTextTooltip.updateContent(j,l.value,j.innerText);}else{this.visTextTooltip.targetDiv=j;this.visTextTooltip.touchAreaType=l.value;this.visTextTooltip.updateContent(j,l.value,j.innerText);}}}},touchSelectEnd:function T(k){var j=k;if(this.visTextTooltip&&this.visTextTooltip.domNode){this.visTextTooltip.toggle(false);}},hasImgTag:function R(j){var o=j&&j.childNodes.length>0&&j.childNodes[0];if(o&&o.nodeName.toLowerCase()==="div"){var k=o.childNodes.length>0&&o.childNodes[0];if(k&&k.nodeName.toLowerCase()==="div"){var l=k.childNodes.length>1&&k.childNodes[1];if(l&&l.nodeName.toLowerCase()==="img"){return true;}}}return false;},getTextWidth:function f(l,r,k,w,o,s){var t=l.childNodes;var u=null,j=null;if(t.length>0&&t[0].nodeName.toLowerCase()==="#text"){u=document.createElement("table");j=document.createElement("td");u.appendChild(j);}else{if(t.length>0&&t[0].nodeName.toLowerCase()==="span"){j=document.createElement("span");j.style="z-index:-10;visibility:hidden;-webkit-text-size-adjust: none;";}else{return -1;}}if(j.className!==r||""){j.className=r||"";}if(j.style.fontFamily!==k||""){j.style.fontFamily=k||"";}var p=o||"pt";if(w){j.style.fontSize=w+p;}else{j.style.fontSize="";}if(s){if(j.style.fontWeight!=="bold"){j.style.fontWeight="bold";}}else{if(j.style.fontWeight!==""){j.style.fontWeight="";}}j.innerHTML=l.innerText;var q=-1;if(u){this.domNode.appendChild(u);q=j.offsetWidth-30;this.domNode.removeChild(u);}else{this.domNode.appendChild(j);q=j.offsetWidth;this.domNode.removeChild(j);}return q;},unrender:function b(j){if(this.visTextTooltip&&this.visTextTooltip.destroy){this.visTextTooltip.destroy();delete this.visTextTooltip;}var k=this.ss;if(k){this.removeChildren(k,true);k.destroy();delete this.ss;}this._super(j);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasScrollbox","mstrmojo.XtabZone","mstrmojo._ShowsStatus","mstrmojo.boxmodel","mstrmojo.dom");var Q=1,W=2,X=0,A=1,AA=2,M=3;var L=1;var AC=2;var G=4;var f=8;var b=mstrmojo.dom,s;function AG(AH){var AI=null;if(AH&&AH.length>1){AI=new mstrmojo.XtabVACP();AI.cps=AH;}return AI;}function P(AI){var AH=document.createElement("img");AI.appendChild(AH);AI.removeChild(AH);}function I(AI,AH){if(b.isIE){return mstrmojo.boxmodel.convert2px(AI,AH);}return AH;}function H(AI){if(!AI||this._onDemandCP){return null;}var AP=AI.bc,AN=AI.tc,AJ=AN-AP,AO=Math.ceil(AJ/AP),AK=[],AM=[],AL;for(AL=0;AL<AO;++AL){var AH=Math.min(AJ,AP);AK.push(this.createOnDemandCP(AL+1,AH,G));AM.push(this.createOnDemandCP(AL+1,AH,f));AJ-=AP;}this._onDemandCP={rhs:AK,vls:AM};return this._onDemandCP;}mstrmojo.XtabBase2=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasScrollbox,mstrmojo._ShowsStatus],{scriptClass:"mstrmojo.XtabBase2",dataRenderMode:"vscroll",handleClicks:function F(){return true;},markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-Xtab {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div style="display: none;{@msgNodeCssText}"><div>&nbsp;</div></div><div class="mstrmojo-Xtab-overlay"></div><div class="mstrmojo-Xtab-content {@cssDefault}" title="{@tooltip}" style="{@viewportCssText}" mstrAttach:click,selectstart><table cellspacing="0" cellpadding="0"><tr trType="title"><td style="vertical-align:top;padding:0px"></td><td class="xtab-tr" style="vertical-align:top;padding:0px;"></td></tr><tr trType="content"><td class="xtab-bl" style="vertical-align:top;padding:0px;"></td><td class="xtab-br" style="vertical-align:top;padding:0px"><div class="mstrmojo-progress" style="display:none"><div class="mstrmojo-progress-barbg"><div class="mstrmojo-progress-bar"></div></div><div class="mstrmojo-progress-text"></div></div><div id="{@id}_scrollbox" style="position:relative;{@scrollboxNodeCssText};{@scrollboxNodeOverflow}"></div></td></tr></table></div></div>',markupSlots:{overlayNode:function(){return this.domNode;},msgNode:function(){return this.domNode.firstChild;},maskNode:function(){return this.domNode.childNodes[1];},viewport:function(){return this.domNode.lastChild;},contentNode:function(){return this.domNode.lastChild.firstChild;},scrollboxNode:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].lastChild;},_TL:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0];},_TR:function(){return this.domNode.lastChild.firstChild.rows[0].cells[1];},_BL:function(){return this.domNode.lastChild.firstChild.rows[1].cells[0];},_BR:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].lastChild;},_T_ROW:function(){return this.domNode.lastChild.firstChild.rows[0];},_B_ROW:function(){return this.domNode.lastChild.firstChild.rows[1];},_BR_CELL:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1];},_STATUS:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].firstChild;},_STATUS_TXT:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].firstChild.lastChild;},_STATUS_BAR:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].firstChild.firstChild.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?"block":"none";}},zones:null,lockHeadersCase:M,interactiveCellsArray:null,titlesCP:null,chsCP:null,rhsCP:null,valuesCP:null,onDemandIF:true,numRowFixed:false,heightLimit:0,height:0,widthLimit:0,width:0,useTouchScrolling:false,scrollInterval:0,selections:null,dataBlocks:null,gridInfo:null,getCellUnitIndex:function p(AH){return(AH.o!==undefined)?AH.o:AH._ei;},getCellTitleId:function d(AH){var AI="";if(AH.axis&&AH.ui!==undefined){AI=AH.axis+"A"+(AH.ui+1);}else{if(AH.mix!==undefined){AI="0A"+AH.mix;}}return AI;},update:function k(AI){this.set("gridData",AI.data[0]||AI.data);var AH=this.defn||AI.defn;this.sid=this.gridData.sid;this.treeType=(AH&&AH.tt)||1;this.interactiveCellsArray=[];this.gridInfo=AI.data.gsi;},initCP:function D(AJ,AI,AO,AL,AN,AK,AM){var AH={gridData:AJ,type:AO,interactiveCellsArray:AI};AH.base=AL||AH.base;AH.lookupBase=AN||AH.lookupBase;AH.axis=AK||AH.axis;if(!AM){if(AO===L){AM=new mstrmojo.XtabTitlesCP(AH);}else{AM=new mstrmojo.XtabCP(AH);}}else{mstrmojo.hash.copy(AH,AM);}return AM;},preBuildRendering:function B(){var AH=this.gridData;this.lockHeadersCase=AH.lhv||X;this.selections={};this.cssDefault=(this.lockHeadersCase===X||!this.k)?"":"r-cssDefault"+(this.k?"_"+this.k:"");this.numRowFixed=!!(!this.height&&AH.rw&&AH.rw.row&&(AH.rw.row.bc<AH.rw.row.tc));this.rw=AH.rw;this._onDemandCP=null;if(this.width){this.widthLimit=parseInt(this.width,10);}if(this.height){this.heightLimit=parseInt(this.height,10);}return(this._super)?this._super():true;},renderEmptyGrid:function t(){var AJ=this.gridData,AI=this.msgNode,AH=this.viewport;AI.firstChild.innerHTML=AJ.eg;AI.style.display="block";AI.style.overflow="hidden";AI.className="mstrmojo-message";AH.style.display="none";return(this._super)?this._super():true;},postBuildRendering:function q(){var AP=this.gridData,AL=!!this._BR&&AP,AH=this.msgNode,AM=this.viewport,AN;if(AP.eg===undefined){if(AH.style.display==="block"){AH.style.display="none";AM.style.display="block";}}else{return this.renderEmptyGrid();}if(!this.interactiveCellsArray){this.interactiveCellsArray=[];}if(AL){this._setupZones(AP);this._setupCPs(AP);var AK=this.zones,AI;for(AI in AK){var AO=AK[AI];if(AO.parent!==this){this.addChildren(this.zones[AI]);}}if(this.scrollboxNode){var AJ=this.heightLimit;this.scrollboxHeightFixed=!isNaN(AJ)&&(AJ>0);if(this.scrollboxHeightFixed){this.scrollboxHeight=AJ;}this.scrollboxLeft=this.scrollboxTop=0;if(this.lockHeadersCase){this.connectScrollbox(this);}}}this.renderChildren();AN=this._super();if(this.numRowFixed){if(!this.height){this.heightLimit=this.zones._BR.getPageHeight(0)+(this._TR?this._TR.offsetHeight:0);this.height=this.heightLimit+"px";}else{this.heightLimit=parseInt(this.height,10);}}if((this.lockHeadersCase&&AL&&this.scrollboxNode)||this.numRowFixed){this.resizeScrollBox(b.isIE);}this.onGridWidthChanged(true);if(b.isIE7&&!this.scrollboxHeightFixed&&this.scrollboxNode&&this.scrollboxNode.scrollWidth>this.scrollboxNode.offsetWidth){this.scrollboxNode.style.height=this.scrollboxNode.offsetHeight+17+"px";}return AN;},onclick:function r(AM,AH){if(!this.interactiveCellsArray.length){return ;}AM=AM.e||AM;var AJ=mstrmojo.dom,AL=AJ.eventTarget(AH,AM),AK=AL&&AJ.findAncestorByName(AL,"td",true,this.viewport);if(AK){var AI=AJ.findAncestorByName(AL,"span",true,AK);if(AI&&!AJ.shiftKey(AH,AM)&&!AJ.ctrlKey(AH,AM)){this.defaultAction(AK);}else{this.doSelection(AM,AH,AK);AJ.clearBrowserHighlights();}}},ontouchend:function g(AI,AH){this.onclick(AI,AH);},onselectstart:function u(){return false;},onscroll:function w(){this._alignHeaders();},resizeScrollBox:function J(AJ){var AH=this.scrollboxNode,AS=AH&&AH.style,AY=this._B_ROW,AX=this._BR_CELL;if(!AS||!AY||!AX){return ;}var AR=this.widthLimit,AQ=this.heightLimit;if(!AR||!AQ){if(!AR){AS.width="auto";}if(!AQ){AS.height="auto";this.scrollboxHeightFixed=false;}}if(AQ){var AP=(this.zones._TR&&this.zones._TR.cp.rc)?AY.offsetTop:0,AU=AQ-AP;if(AU>0){AS.height=AU+"px";this.scrollboxHeight=AU;this.scrollboxHeightFixed=true;if((this.lockHeadersCase!==X)&&this.numRowFixed){this.viewport.style.height=this.overlayNode.style.height=(AU+AP)+"px";}}}if(!this.useTouchScrolling){var AI=(this.zones._BL&&this.zones._BL.cp.rc)?AX.offsetLeft:0;var AW=0;if(this.lockHeadersCase!==X){var AV=this.viewport,AK=mstrmojo.css.getComputedStyle(AV),AT=["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"];if(AK){mstrmojo.array.forEach(AT,function(AZ){AW+=parseFloat(I(AV,AK[AZ]));});}if(this.width){this.viewport.style.width=(parseFloat(this.width)-(AW||0))+"px";}}var AL=(this.widthLimit&&(this.widthLimit-AI))||(mstrmojo.dom.isIE7?AX.scrollWidth+1:(AX.scrollWidth+(AH.offsetWidth-AH.clientWidth)));if(AL&&(AL>0)){AL-=AW;AS.width=AL+"px";}this._alignHeaders(AJ);}var AO=AS.height,AN=AS.width;if(AO||AN){var AM=mstrmojo.findAncestor(this,"fixedSizeCanGrowShrink",null,mstrmojo.DocSection);if(AM){AM.fixedSizeCanGrowShrink(this,AO,AN);}}},_resizeScrollBoxWidth:function U(){var AM=this.scrollboxNode,AJ=AM&&AM.style,AI=this._B_ROW,AH=this._BR_CELL;if(this.useTouchScrolling||!AJ||!AI||!AH){return ;}var AK=this.widthLimit;if(!AK){AJ.width="auto";}var AL=function(){var AN=(mstrmojo.dom.isIE7?AH.scrollWidth+1:(AH.scrollWidth+(AM.offsetWidth-AM.clientWidth)));if((AN&&(AN>0))&&(!AK||(AK&&(AN<AK)))&&(AM.firstChild.firstChild.offsetWidth>=AM.clientWidth)){AJ.width=AN+"px";}};if(mstrmojo.dom.isIE7){window.setTimeout(function(){AL();},1);}else{AL();}},onGridWidthChanged:function Z(AJ){if(this.lockHeadersCase===X&&!AJ){this._resizeScrollBoxWidth();}var AI=mstrmojo.findAncestor(this,"fixedSizeCanGrowShrink",null,mstrmojo.DocSection),AH=this.widthLimit;if(!AH){this.width=s;if(AI){AI.performCanGrowCanShrink([this],true);}}else{if(AI){AI.fixedSizeCanGrowShrink(this,null,AH);}}},getGridDimension:function R(AK){var AI=1,AJ=AK===AI?"Height":"Width",AL=AJ.toLowerCase(),AH=this[AL+"Limit"];if(!AH&&(this[AL]===s||this[AL]===0)){AH=this.viewport["offset"+AJ];this[AL]=AH+"px";return AH;}return AH||parseInt(this[AL],10);},_alignHeaders:function o(AI){if(this.lockHeadersCase===X||this.useTouchScrolling){return ;}var AL=this.scrollboxLeft,AK=this.scrollboxTop,AJ=this.zones,AH=AJ._TR,AM=AJ._BL;function AN(AO,AS,AP){var AR=AO&&AO.domNode,AQ=AR&&AR.style;if(!AQ){return ;}AQ[AS]=-AP+"px";}if(AH&&AH.rc){AN(AH,"left",AL);}if(AM&&AM.rc){AN(AM,"top",AK);}if(AI){P(this._BL);}},defaultAction:function S(AM,AI){var AH=AI||this.getCellForNode(AM),AL=AM&&AM.className.indexOf("sc_")>0,AK=this.model.getAction(this.getActionCells(AH),AM,AL),AJ=AK&&AK.h;this._currentSelectedTD=AM;if(AJ&&this.controller[AJ]){this.controller[AJ](this,AK.a);return true;}return false;},createZone:function l(AH){return new mstrmojo.XtabZone(AH||{});},_setupZones:function j(AK){var AI=this.zones;this.zones={};var AM=this.zones,AH=this.lockHeadersCase,AO="z-index:";var AJ=this;function AN(AS,AR,AT,AQ){var AP=(AQ&&AQ[AT])||AJ.createZone({renderMode:AS,cssText:AR,slot:AT});AM[AT]=AP;AP.rh=AK.rh;}AN(this.dataRenderMode,AO+"1;","_BR",AI);if(AH&A){AN(this.dataRenderMode,AO+"3;","_BL",AI);}if(AH&AA){AN(null,AO+"3;","_TR",AI);}if(AH===M){AN(null,AO+"4;","_TL",AI);}if(AH===X){this.zones._BR.autoFitWindow=!!AK.afw;this.zones._BR.tableCssClass="r-cssDefault"+(this.k?"_"+this.k:"");}if(mstrmojo.dom.isIE7){if(AH&A||AH&AA||AH===M){this._T_ROW.style.display="block";}else{if(AH===X){this._T_ROW.style.display="none";}}}var AL=AM._BL||AM._BR;if(AL){AL.numColumnCanMerge=AK.gts.cws.length-1;}},getHACP:function AF(){return(this._super&&this._super())||new mstrmojo.XtabHACP();},_setupCPs:function V(AP){var AK=this.titlesCP=this.getTitleCP(AP),AM=this.chsCP=this.getColumnHeadersCP(AP),AI=this.rhsCP=this.getRowHeadersCP(AP),AJ=this.valuesCP=this.getValuesCP(AP);AK.forceAutoRowHeight=AM.forceAutoRowHeight=AP.rh;var AN=this.zones;switch(this.lockHeadersCase){case X:var AT=new mstrmojo.XtabVACP();var AH=this.getHACP();AH.cps=[AK,AM];AT.cps=[AH];var AR=this.getHACP();AR.cps=[AI,AJ];AT.cps.push(AR);AN._BR.cp=AT;break;case A:var AQ=new mstrmojo.XtabVACP();var AL=new mstrmojo.XtabVACP();AQ.cps=[AK,AI];AL.cps=[AM,AJ];AN._BL.cp=AQ;AN._BR.cp=AL;break;case AA:var AO=this.getHACP();var AS=this.getHACP();AO.cps=[AK,AM];AS.cps=[AI,AJ];AN._TR.cp=AO;AN._BR.cp=AS;break;case M:AN._TL.cp=AK;AN._TR.cp=AM;AN._BL.cp=AI;AN._BR.cp=AJ;break;}},ongridDataChange:function Y(){var AH=this.model;if(AH){AH.set("data",this.gridData);if(!this.dataBlocks){this.dataBlocks=[];}this.dataBlocks[0]=this.gridData;}},gridPagesRendered:mstrmojo.emptyFn,getTitleCP:function E(AH){return this.initCP(AH,this.interactiveCellsArray,L);},getColumnHeadersCP:function AB(AH){return this.initCP(AH,this.interactiveCellsArray,AC,AH.ghs.chs,AH.gts.col,W);},getRowHeadersCP:function AD(AH){var AI=this.initCP(AH,this.interactiveCellsArray,G,AH.ghs.rhs,AH.gts.row,Q);if(this.onDemandIF&&this.rw){if(!this._onDemandCP){H.call(this,this.rw&&this.rw.row);}this.rhsCPList=[AI].concat(this._onDemandCP.rhs);return AG(this.rhsCPList)||AI;}return AI;},getValuesCP:function a(AI){var AH=this.initCP(AI,this.interactiveCellsArray,f,AI.gvs);if(this.onDemandIF&&this.rw){if(!this._onDemandCP){H.call(this,this.rw&&this.rw.row);}this.valuesCPList=[AH].concat(this._onDemandCP.vls);return AG(this.valuesCPList)||AH;}return AH;},createOnDemandCP:function e(AI,AJ,AH){var AK=new mstrmojo.XtabOnDemandCP();AK.dataSource=this;AK.blockNum=AI;AK.rc=AJ;return AK;},dataDownloaded:function T(AJ,AM){var AO=AM.blockNum,AH=this.rhsCPList[AO],AK=this.valuesCPList[AO],AN=AJ.data;AN._bidx=AO;this.dataBlocks[AO]=AN;if(!AH||!AK){return ;}this.initCP(AN,this.interactiveCellsArray,G,AN.ghs.rhs,AN.gts.row,Q,AH);this.initCP(AN,this.interactiveCellsArray,f,AN.gvs,null,null,AK);AH.initContent();AK.initContent();this.numRowsDownloaded+=parseInt(AH.rc,10);this.updateStatus(mstrmojo.desc(8301,"Retrieving Data ..."),this.numRowsDownloaded*100/this.numRowsToDownload);var AL=this.zones,AI=AL&&AL._BL,AP=AL&&AL._BR;if(AI){AI.dataDownloaded();}if(AP){AP.dataDownloaded();}},showDownloadStatus:function O(AH){if(!AH){return ;}if(this.showingStatus){this.numRowsToDownload+=AH;}else{this.numRowsToDownload=AH;this.numRowsDownloaded=0;}if(this.showStatus){this.showStatus(true,mstrmojo.desc(8301,"Retrieving Data ..."),this.numRowsDownloaded*100/this.numRowsToDownload);}},closeDownloadStatus:function h(){this.numRowsToDownload=0;if(this.showStatus){this.showStatus(false);}},download:function K(AJ){var AL=this.gridData.rw,AI=AL.row,AK=AL.col,AH=AI.bc;this.rhsCPList[AJ].isDownloading=this.valuesCPList[AJ].isDownloading=true;if(AH){this.controller.onDownloadGridData(this,this.model.getDownloadAction(AJ*AH+1,AH,AK.bb,AK.bc,this.id,{blockNum:AJ}));}},unrender:function C(AH){this.width=this.widthLimit=this.height=this.heightLimit=0;this.disconnectScrollbox(this);this._super(AH);},getCellForNode:function z(AI){var AH=AI&&AI.getAttribute("ei");if(isNaN(AH)){return null;}return this.interactiveCellsArray[parseInt(AH,10)];},getActionCells:function N(AH){var AI=[],AK=this.selections;var AL=AH.axis+"A"+(AH.ui+1),AM=AK[AL],AJ;if(AM&&AM[AH.o]){for(AJ in AM){var AN=this.getCellForNode(AM[AJ][0]);AI.push(AN);}}else{AI.push(AH);}return AI;},setModel:function AE(AH){this.model=AH;if(AH.data){this.set("gridData",AH.data);}},destroy:function x(){var AH=this.model;if(AH&&AH.destroy){AH.destroy();}this._super();}});}());(function(){var E=1;var B=2;var J=4;var F=8;function D(L,K){var M=L.rw;if(!M){return false;}return K?(M.row.bb+M.row.bc<M.row.tc):(M.wsr+M.wmr<M.tr);}mstrmojo._XtabSeamlessIncrementalFetch=mstrmojo.provide("mstrmojo._XtabSeamlessIncrementalFetch",{_mixinName:"mstrmojo._XtabSeamlessIncrementalFetch",useSeamlessIncFetch:true,preBuildRendering:function G(){var K=this._super();if(this.useSeamlessIncFetch){this.currentPageNum=0;this.currentPageNum=this.loadingPageNum=0;this.endFetching=!D(this.gridData,this.isDocXtab);}return K;},aggregateCP:function H(N,M,K){var O=(M===J)?this.rhsCP:this.valuesCP;if(O.scriptClass!=="mstrmojo.XtabVACP"){O=mstrmojo.hash.clone(O);var L=new mstrmojo.XtabVACP();L.cps=[O,N];mstrmojo.hash.copy(L,(M===J)?this.rhsCP:this.valuesCP);}else{O.cps.push(N);}if(K){K.cp.initContent();}},onScrolledToLastRow:function C(){if(this.useSeamlessIncFetch){var L=this.currentPageNum,K=this.loadingPageNum;if(K<=L&&!this.endFetching){this.loadingPageNum=L+1;this.download(1+L);}}},download:function A(N){var P=this.gridData.rw,M=P.row,O=P.col,L=M.bc;this._isDownloading=this.rhsCP.isDownloading=this.valuesCP.isDownloading=true;if(L){var K={blockNum:N};this.controller.onDownloadGridData(this,this.model.getDownloadAction(N*L+1,L,O.bb,O.bc,this.id,K));}},dataDownloaded:function I(N,T){if(this._isDecelerating){this._cachedDownload={node:N,memo:T};return ;}var P=this._cachedDownload;if(P){if(N){alert("Missed download");}N=P.node;T=P.memo;delete this._cachedDownload;}var U=N.data,S=this.zones;this._firstRowHeight=this._firstRowHeight||this.contentNode.rows[0].offsetHeight;var M=this.initCP(U,this.interactiveCellsArray,J,U.ghs.rhs,U.gts.row,E),O=this.initCP(U,this.interactiveCellsArray,F,U.gvs);this.aggregateCP(M,J,S._BL);this.aggregateCP(O,F,S._BR);var L=M.startIndexInContainer,Q=L+M.rc-1;var R=function(V){if(V){V.start=L;V.end=Q;V.renderGrid(true);}};var K=this.id;window.setTimeout(function(){var V=mstrmojo.all[K];R(S._BL);R(S._BR);if(!D(U,V.isDocXtab)){V.endFetching=true;}V.setOffsets();V.currentPageNum++;V._isDownloading=false;},0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.MobileDocLayoutViewer");var B=mstrmojo.DynamicClassFactory.newComponent;mstrmojo.maps.MobileMapInfoWindowLayoutViewer=mstrmojo.declare(mstrmojo.MobileDocLayoutViewer,null,{scriptClass:"mstrmojo.maps.MobileMapInfoWindowLayoutViewer",preBuildRendering:function A(){this.setDimensions(this.height,this.width);this.set("visible",true);return this._super?this._super():true;}});mstrmojo.maps.MapInfoWindowLayoutViewer=mstrmojo.declare(mstrmojo.MobileDocLayoutViewer,null,{scriptClass:"mstrmojo.maps.MapInfoWindowLayoutViewer",preBuildRendering:function A(){this.set("visible",true);return this._super?this._super():true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocLayout");function F(P){var N=-1,O=P.children,M,L,K,I,J=[],H=function(){var R;for(R in J){var Q=J[R];if(Q._fixedHeight!==N){Q._fixedHeight=N;if(Q.domNode){Q.domNode.style.height=N+"px";}}}N=-1;J=[];};for(L in O){M=O[L];if(M&&M.node&&M.node.data&&M.node.data.bh&&N>-1){H();}if(M&&M.defn&&M.defn.horiz){for(K in M.children){I=M.children[K];N=Math.max(I._fixedHeight||0,N);J[J.length]=I;}}}H();}mstrmojo.DocLayoutHoriz=mstrmojo.declare(mstrmojo.DocLayout,null,{scriptClass:"mstrmojo.DocLayoutHoriz",markupString:'<div id="{@id}"><div class="mstrmojo-DocLayout {@cssClass}" style="{@domNodeCssText}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},getWidth:function A(){return this.containerNode.offsetWidth;},getHeight:function G(){return this.containerNode.offsetHeight;},_renderSection:function C(L,I){if(L.node.data.bh||(L.defn.horiz&&!this._horizOpen)){this._horizOpen=true;var M=document.createElement("div");M.className="mstrmojo-DocLayout-HBox";var J=document.createElement("table");J.className="mstrmojo-DocLayout-HBox-HorizContainerTable";this._hRow=J.insertRow(-1);M.appendChild(J);this.containerNode.appendChild(M);}if(L.defn.horiz){var H="hi"+I;L.slot=H;var N=this._hRow.insertCell(-1);N.vAlign="top";var K={};K[H]=N;this.addSlots(K);}else{if(this._horizOpen){this._horizOpen=false;}}this._super(L,I);},getLayoutMinWidth:function B(){var I=0,Q=0,J=this.children,P=J.length,N,M;for(N=0;N<P;N++){var O=J[N],L=O&&O.node,H=L&&L.data,K=H&&(String(H.bh)==="true"||String(H.bv)==="true");if(K){I=Math.max(I,Q);Q=0;}if(O.children){for(M in O.children){Q+=O.children[M].getWidth();}}else{Q+=10;break;}}return Math.max(I,Q);},resizeOrReposition:function E(){if(this._super){this._super();}F(this);},renderCtrlsInViewport:function D(){this._super();F(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuPopup","mstrmojo.Button","mstrmojo.dom");mstrmojo.requiresDescs(1442,2140);var E=mstrmojo.dom,G=mstrmojo.array;function B(I,K){var H=2140,M="Cancel",L="this.parent.popupConfig."+(I?"ok":"cancel"),J=K&&K[(I?"ok":"cancel")+"BtnText"];if(I){H=1442;M="Ok";}return mstrmojo.Button.newWebButton(J||mstrmojo.desc(H,M),function(O){var P=this.parent,N=P.popupConfig;P.closeAllMenus();N["fn"+M](N.data,P);E.stopPropogation(O.hWin,O.e);},I,{slot:"btnNode",bindings:{enabled:L+"Enabled",visible:L+"Visible"},cssDisplay:"inline-block"});}mstrmojo.ui.menus.MenuEditor=mstrmojo.declare(mstrmojo.ui.menus.MenuPopup,null,{scriptClass:"mstrmojo.ui.menus.MenuEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-MenuEditor {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="me-content"></div><div class="me-buttons"></div><div class="me-bottom"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;},btnNode:function D(){return this.domNode.children[1];},bottomNode:function D(){return this.domNode.children[2];}},popupConfig:null,init:function F(J){this._super(J);var I=this.popupConfig,H=I.bottomNode;this.data=I.data||{};if(I.onOpen){this.onOpen=I.onOpen;}this.addChildren([B(true,I),B(false)]);if(H){H.slot="bottomNode";this.addChildren(H);}},onOpen:function C(){G.forEach(this.children,function(H){if(H.scriptClass==="mstrmojo.ui.ScrollableContainer"&&H.onOpen){H.onOpen();}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.MenuPopup");mstrmojo.ui.menus.PopupConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.PopupConfig",cssClass:"",contents:null,clear:function A(){this._super();this.contents=null;},close:function C(){([].concat(this.contents)[0]).parent.closeAllMenus();},newInstance:function B(){return new mstrmojo.ui.menus.MenuPopup({popupConfig:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.GraphBase","mstrmojo._TouchGestures","mstrmojo.graph._MobileGraphAreaHelper");mstrmojo.MobileGraph=mstrmojo.declare(mstrmojo.GraphBase,[mstrmojo._TouchGestures,mstrmojo.graph._MobileGraphAreaHelper],{scriptClass:"mstrmojo.MobileGraph",areaMarkup:'<area shape="{@shape}" coords="{@coords}" ttl="{@tooltip}" aid="{@aid}" {@extra}/>',cssImageClass:"mstrmojo-ReportGraph",setDimensions:function I(M,L){if(this.height===M&&this.width===L){return ;}this.height=M;this.width=L;if(this.hasRendered){this.controller.refresh(this);}},preBuildRendering:function J(){var L=this.graphData.gd.g;this.as=L&&L.as;return this._super?this._super():true;},refresh:function F(){this.graphData=this.model.data;this._super();},retrieveGraphSrc:function E(M,L){var O="data:image/png;base64,"+this.graphData.ib.eb,N=this.imgNode;if(N.src!==O){N.src=O;}},getFormats:function G(){return{height:this.height,width:this.width,top:0,left:0};},touchTap:function B(){this.displayTooltips([],0,0);var L=this.controller;if(L&&L.viewTap){L.viewTap();}},touchSelectBegin:function D(L){this.syncTooltips(L.pageX,L.pageY);},touchSelectMove:function H(L){this.syncTooltips(L.pageX,L.pageY);},setModel:function K(L){this._super(L);this.setGraphData(L.data);},syncTooltips:function C(L,O){var M=this,N=mstrmojo.dom.position(M.domNode,true);L-=N.x;O-=N.y;M.model.getDataService().handleUserSingleTap(-1,"",L,O,false,{success:function(P){M.displayTooltips(P.Areas,N.x,N.y);}});},setGraphData:function A(L){this.graphData=L;this.controller.getPageByTree(false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.graph._MobileGraphAreaHelper","mstrmojo.GraphBase","mstrmojo.dom");var AD=0,As=0,BC=0,Ac=1,f=2,Y=11,W=12,AT=13,BI=101,l=102,Az=111,Aa=112,BD=113,k=121,A4=122,Ad=131,u=132,AG=201,H=301,F=302,AA=303,r=311,g=321,A8=322,B=401,A2=402,Aj=501,J=502,AO=503,AM=511,q=512,M=513,BG=514,Ar=515,BJ=521,AS=522,Q=601,N=701,AV=801;var Ai=0,I=9,AI=10,Z=14;var x=0,AK=1,G=2,Ah=3,Ae=4;var o=0,A1=1,Ag=2;var U=2,d=3;var Ay=0,AN=3,BB=4,w=6,E=13,A=14,D=101;var A7=0,Ax=1,Am=2;var Af=3.14159265;var e,a;var Av=0,A5=1,Ap=2,R=3,AE=4,BH=5,AC=6,AX=7,AU=8,AZ=9;var A6=100;var A9=[[-100,-100,100,-100,100,100,-100,100],[-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[],[0,-100,100,0,0,100,-100,0],[0,-100,100,100,-100,100],[-100,-100,100,-100,100,100,-100,100],[0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100]];function Aq(Ch,B3,C2,B1){var Bh=C2.InstructionList,CA=Bh.length,Bp,CF,B0,Bz,CI,B2,Bg,Bl,BP,BT,CH,B8,BX,Cw,CO,CJ,C0;for(CF=0;CF<CA;CF++){Bp=Bh[CF];if(typeof (Bp)==="undefined"){continue;}switch(Bp.Ins){case BC:break;case Ac:Ch.save();break;case f:Ch.restore();break;case Y:Ch.clip();break;case W:Ch.scale(Bp.X,Bp.Y);break;case AT:if(Bp.Radian!==0){Ch.translate(Bp.Anchor.X,Bp.Anchor.Y);Ch.rotate(Bp.Radian);Ch.translate(-Bp.Anchor.X,-Bp.Anchor.Y);}break;case BI:Ch.beginPath();break;case l:Ch.closePath();break;case Az:if(C2.IsAnimated===0){Ch.moveTo(Bp.X,Bp.Y);}else{if(Bp.CA[0]==0){B0=Bp.X[0]*(1-B3)+Bp.X[1]*B3;Bz=Bp.Y[0]*(1-B3)+Bp.Y[1]*B3;Ch.moveTo(B0,Bz);}else{var Bn=Math.sqrt((Bp.X[0]-Bp.BPX[0])*(Bp.X[0]-Bp.BPX[0])+(Bp.Y[0]-Bp.BPY[0])*(Bp.Y[0]-Bp.BPY[0]));var Bk=Math.sqrt((Bp.X[1]-Bp.BPX[0])*(Bp.X[1]-Bp.BPX[0])+(Bp.Y[1]-Bp.BPY[0])*(Bp.Y[1]-Bp.BPY[0]));var CL=Math.sqrt((Bp.X[0]-Bp.X[1])*(Bp.X[0]-Bp.X[1])+(Bp.Y[0]-Bp.Y[1])*(Bp.Y[0]-Bp.Y[1]));var Bm=Math.acos((Bn*Bn+Bk*Bk-CL*CL)/(2*Bn*Bk));var C5=(Bp.X[0]-Bp.BPX[0])*Math.cos(Bm)-(Bp.Y[0]-Bp.BPY[0])*Math.sin(Bm)+Bp.BPX[0]-Bp.X[1];if(C5<-0.01||C5>0.01){Bm=2*Af-Bm;}B0=(Bp.X[0]-Bp.BPX[0])*Math.cos(B3*Bm)-(Bp.Y[0]-Bp.BPY[0])*Math.sin(B3*Bm)+Bp.BPX[0];Bz=(Bp.Y[0]-Bp.BPY[0])*Math.cos(B3*Bm)+(Bp.X[0]-Bp.BPX[0])*Math.sin(B3*Bm)+Bp.BPY[0];Ch.moveTo(B0,Bz);}}break;case Aa:if(C2.IsAnimated===0){Ch.lineTo(Bp.X,Bp.Y);}else{if(Bp.CA[0]==0){B0=Bp.X[0]*(1-B3)+Bp.X[1]*B3;Bz=Bp.Y[0]*(1-B3)+Bp.Y[1]*B3;Ch.lineTo(B0,Bz);}else{var Bn=Math.sqrt((Bp.X[0]-Bp.BPX[0])*(Bp.X[0]-Bp.BPX[0])+(Bp.Y[0]-Bp.BPY[0])*(Bp.Y[0]-Bp.BPY[0]));var Bk=Math.sqrt((Bp.X[1]-Bp.BPX[0])*(Bp.X[1]-Bp.BPX[0])+(Bp.Y[1]-Bp.BPY[0])*(Bp.Y[1]-Bp.BPY[0]));var CL=Math.sqrt((Bp.X[0]-Bp.X[1])*(Bp.X[0]-Bp.X[1])+(Bp.Y[0]-Bp.Y[1])*(Bp.Y[0]-Bp.Y[1]));var Bm=Math.acos((Bn*Bn+Bk*Bk-CL*CL)/(2*Bn*Bk));var C5=(Bp.X[0]-Bp.BPX[0])*Math.cos(Bm)-(Bp.Y[0]-Bp.BPY[0])*Math.sin(Bm)+Bp.BPX[0]-Bp.X[1];if(C5<-0.02||C5>0.02){Bm=2*Af-Bm;}B0=(Bp.X[0]-Bp.BPX[0])*Math.cos(B3*Bm)-(Bp.Y[0]-Bp.BPY[0])*Math.sin(B3*Bm)+Bp.BPX[0];Bz=(Bp.Y[0]-Bp.BPY[0])*Math.cos(B3*Bm)+(Bp.X[0]-Bp.BPX[0])*Math.sin(B3*Bm)+Bp.BPY[0];Ch.lineTo(B0,Bz);}}break;case BD:if(C2.IsAnimated===0){Ch.bezierCurveTo(Bp.CP1X,Bp.CP1Y,Bp.CP2X,Bp.CP2Y,Bp.X,Bp.Y);}else{cp1x=Bp.CP1X[0]*(1-B3)+Bp.CP1X[1]*B3;cp1y=Bp.CP1Y[0]*(1-B3)+Bp.CP1Y[1]*B3;cp2x=Bp.CP2X[0]*(1-B3)+Bp.CP2X[1]*B3;cp2y=Bp.CP2Y[0]*(1-B3)+Bp.CP2Y[1]*B3;B0=Bp.X[0]*(1-B3)+Bp.X[1]*B3;Bz=Bp.Y[0]*(1-B3)+Bp.Y[1]*B3;Ch.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,B0,Bz);}break;case k:if(C2.IsAnimated===0){Ch.rect(Bp.X,Bp.Y,Bp.W,Bp.H);}else{B0=Bp.X[0]*(1-B3)+Bp.X[1]*B3;Bz=Bp.Y[0]*(1-B3)+Bp.Y[1]*B3;B2=Bp.W[0]*(1-B3)+Bp.W[1]*B3;CI=Bp.H[0]*(1-B3)+Bp.H[1]*B3;Ch.rect(B0,Bz,B2,CI);}break;case A4:if(C2.IsAnimated===0){if(Bp.EndAngle==6.283){Bp.EndAngle=2*Af;}Ch.arc(Bp.X,Bp.Y,Bp.Radius,Bp.StartAngle,Bp.EndAngle,Bp.AntiClockwise);}else{if(Bp.EndAngle[0]==6.283){Bp.EndAngle[0]=2*Af;}if(Bp.EndAngle[1]==6.283){Bp.EndAngle[1]=2*Af;}Ch.arc(Bp.X[0]*(1-B3)+Bp.X[1]*B3,Bp.Y[0]*(1-B3)+Bp.Y[1]*B3,Bp.Radius[0]*(1-B3)+Bp.Radius[1]*B3,Bp.StartAngle[0]*(1-B3)+Bp.StartAngle[1]*B3,Bp.EndAngle[0]*(1-B3)+Bp.EndAngle[1]*B3,Bp.AntiClockwise[0]);}break;case u:if(C2.IsAnimated==1){var Bv=Bp.Angle[0]*(1-B3)+Bp.Angle[1]*B3;var Bf=Bp.NeedleSize[0];var CM=Bp.BPX[0];var CK=Bp.BPY[0];var BQ=Bp.MarkSize[0];var Cm=Bp.MarkShape[0];var CZ={X:Bf*Math.cos(Bv)+CM,Y:Bf*Math.sin(Bv)*-1+CK};var B6=AP(Cm,CZ,BQ);C(Ch,B6,false,false);}break;case AG:case H:break;case F:Ch.lineWidth=Bp.LineWidth;break;case AA:switch(Bp.Type){case A7:Ch.lineJoin="miter";break;case Ax:Ch.lineJoin="bevel";break;case Am:Ch.lineJoin="round";break;}break;case r:case g:case A8:break;case B:Ch.fill();break;case A2:Ch.stroke();break;case Aj:BP=Bp.Format;Bg=B1[BP];if(Bp.HEP==1){Bl=Bp.FC;}else{Bl=Bg.SimpleColor;}Ch.fillStyle="RGBA("+Math.round(Bl.R*Bp.DarkerFactor)+", "+Math.round(Bl.G*Bp.DarkerFactor)+", "+Math.round(Bl.B*Bp.DarkerFactor)+", "+Bg.Alpha/255+")";Ch.fill();break;case J:break;case AO:if(C2.IsAnimated===0){BX=Bp.BoundingRect;C0=Bp.DarkerFactor;}else{BX=Bp.BoundingRect[0];C0=Bp.DarkerFactor[0];var C3=Bp.BoundingRect[1];BX.X=BX.X*(1-B3)+C3.X*B3;BX.Y=BX.Y*(1-B3)+C3.Y*B3;BX.Width=BX.Width*(1-B3)+C3.Width*B3;BX.Height=BX.Height*(1-B3)+C3.Height*B3;}if(BX.Width<1||BX.Height<1){continue;}BX.Width=Math.floor(BX.Width);BX.Height=Math.floor(BX.Height);var Bg=B1[Bp.Format];if(Bg.Bevel.FillBevelType!=Ae||B3<1){Aw(Ch,Bg,BX,C0);}else{An(Ch,Bg);Aw(Ch,Bg,BX,C0);}break;case AM:Bg=B1[Bp.Format];CO=Bg.Bevel;B6=AF(Bp.Polygon);var Bu=B6.length;var BW=[];for(var CG=0;CG<Bu;CG++){BW.push(B6[CG]);}while(true){Bu=BW.length;if(Bu<3){break;}var Bc=[];var B7=[];var BR=false;if(Bu>3){var Cv={X:0,Y:0};for(var CG=0;((CG<(Bu-2))&&(!BR));++CG){for(var CD=CG+2;CD<(Bu-1);++CD){var Cy=b(BW[CG],BW[CG+1],BW[CD],BW[CD+1],Cv,false);Cv=Cy.interSection;if(Cy.val==1){BR=true;for(m=0;m<=CG;++m){if(!AW(BW[m],Cv)){Bc.push(BW[m]);}}Bc.push(Cv);for(m=CD+1;m<Bu;++m){if(!AW(BW[m],Cv)){Bc.push(BW[m]);}}B7.push(Cv);for(m=CD;m>CG;--m){if(!AW(BW[m],Cv)){B7.push(BW[m]);}}break;}}if((CG!=0)&&(!BR)){var Cy=b(BW[CG],BW[CG+1],BW[0],BW[Bu-1],Cv,false);Cv=Cy.interSection;if(Cy.val==1){for(m=0;m<=CG;++m){Bc.push(BW[m]);}Bc.push(Cv);B7.push(Cv);for(m=Bu-1;m>CG;--m){B7.push(BW[m]);}BR=true;}}}}if(!BR){Bc=BW;}var Cu=0;var Ci=BL(Bc,Cu);Cu=Ci.depth;if(!Ci.mark){break;}Cu*=CO.Depth*0.01;var By=[];var BV=[];var B4=Bc.length;for(var CG=0;CG<B4;++CG){var Cc;var Bs;var Ci=Au(Bc[(CG+B4-1)%B4],Bc[CG],Bc[(CG+1)%B4],Cu);Cc=Ci.start;Bs=Ci.end;By.push(Cc);BV.push(Bs);}for(var CG=0;CG<B4;++CG){var CU={X:BV[CG].X-By[CG].X,Y:BV[CG].Y-By[CG].Y};var BS=Math.sqrt(At(CU));var Cb={X:CU.X/BS,Y:CU.Y/BS};var BN=z((540-CO.LightAngle)%360);var BY={X:Math.cos(BN),Y:Math.sin(BN)};var B5=AL(Cb,BY);var CV=0;var CC=0;var Ck=0.1;var Cx=0.2;if(B5<-0.01){CV=(1+B5)*Ck;CC=(1+Math.abs(B5))*Cx*CO.Intensity*0.01;}else{CV=(1-Ck)+B5*Ck;CC=((1-Cx)+B5*Cx)*CO.Intensity*0.01;}var CB=CG+1;if(CB==B4){CB-=B4;}Ch.beginPath();Ch.moveTo(Bc[CG].X,Bc[CG].Y);Ch.lineTo(Bc[CB].X,Bc[CB].Y);Ch.lineTo(By[CB].X,By[CB].Y);Ch.lineTo(By[CG].X,By[CG].Y);Ch.closePath();var CT=Math.round(CV*255);if(isNaN(CT)){continue;}if(CO.FillBevelType==AK){Ch.save();Ch.clip();var BO=Ch.createLinearGradient(BV[CG].X,BV[CG].Y,By[CG].X,By[CG].Y);BO.addColorStop(0,"rgba("+CT+","+CT+","+CT+","+CC+")");BO.addColorStop(1,"rgba("+CT+","+CT+","+CT+","+0+")");Ch.fillStyle=BO;Ch.fill();Ch.restore();}else{Ch.fillStyle="RGBA("+CT+", "+CT+", "+CT+", "+CC+")";Ch.fill();}}if(BR){BW=B7;}else{break;}}if(B6.length!=0){Ch.beginPath();Ch.moveTo(B6[0].X,B6[0].Y);for(var CG=1;CG<B6.length;++CG){Ch.lineTo(B6[CG].X,B6[CG].Y);}Ch.closePath();}break;case q:Bg=B1[Bp.Format];CO=Bg.Bevel;if(C2.IsAnimated===0){BX=Bp.BoundingRect;CJ=Bp.IsCircularShape;}else{var C4=Bp.BoundingRect[0];var C3=Bp.BoundingRect[1];BX={X:0,Y:0,Width:0,Height:0};BX.X=C4.X*(1-B3)+C3.X*B3;BX.Y=C4.Y*(1-B3)+C3.Y*B3;BX.Width=C4.Width*(1-B3)+C3.Width*B3;BX.Height=C4.Height*(1-B3)+C3.Height*B3;}if(CO.FillBevelType===Ah){var C1=0.2;var CQ=CO.Intensity*0.01*Bg.Alpha/255;var CS=1-CO.Depth*0.01;Cw=Ch.createLinearGradient(BX.X,BX.Y,BX.X+BX.Width,BX.Y);CH="RGBA(0,0,0,"+CQ+")";B8="RGBA(255,255,255,"+CQ+")";Cw.addColorStop(0,CH);Cw.addColorStop(CS*C1,CH);Cw.addColorStop(CS,B8);Cw.addColorStop(1,CH);}else{CH=Bg.SimpleColor;var BZ={x:BX.X+BX.Width/2,y:BX.Y+BX.Height/2};Bo={x:0,y:0};Bj={x:0,y:0};AB(BX,CO.LightAngle,BZ);var Bd=Bg.Alpha/255;var Br=Bd;if(Bg.FillType!=Ay){Bd*=0.8;Br*=0.5;CH={R:128,G:128,B:128};}var BO=Ch.createLinearGradient(Bo.x,Bo.y,Bj.x,Bj.y);BO.addColorStop(0,"rgba(255,255,255,"+Bd+")");BO.addColorStop(0.05+CO.Intensity*0.001,"rgba(255,255,255,"+9*Bd/(10-Bd)+")");BO.addColorStop(0.5,"rgba("+CH.R+","+CH.G+","+CH.B+","+Br+")");BO.addColorStop(0.85+(1-CO.Intensity*0.01)*0.05,"rgba(0,0,0,"+9*Bd/(10-Bd)+")");BO.addColorStop(1,"rgba(0,0,0,"+Bd+")");Ch.fillStyle=BO;Ch.fill();if(Bg.FillType!=Ay){continue;}var BM=Math.max(BX.Width,BX.Height)*0.5*(2-CO.Intensity*0.01);BM*=CJ?0.75:2;Cw=Ch.createRadialGradient(BZ.x,BZ.y,0,BZ.x,BZ.y,BM);Cw.addColorStop(0,"rgba("+CH.R+","+CH.G+","+CH.B+","+Bd+")");Cw.addColorStop(0.5,"rgba("+CH.R+","+CH.G+","+CH.B+","+Bd/2+")");Cw.addColorStop(0.8,"rgba("+CH.R+","+CH.G+","+CH.B+","+Bd/10+")");Cw.addColorStop(1,"rgba("+CH.R+","+CH.G+","+CH.B+",0)");}Ch.fillStyle=Cw;Ch.fill();break;case Ar:Bg=B1[Bp.Format];CO=Bg.Bevel;var Cf=Bp.CX;var Ce=Bp.CY;var Cp=Bp.Radius;var BM;var CQ;switch(Bp.BorderUse){case U:CQ=0.4;Bo={x:Cf+Cp*Math.cos(Af*1.25),y:Ce+Cp*Math.sin(Af*1.25)};Bj={x:Cf+Cp*Math.cos(Af*0.25),y:Ce+Cp*Math.sin(Af*0.25)};Ch.save();Ch.clip();var BO=Ch.createLinearGradient(Bo.x,Bo.y,Bj.x,Bj.y);BO.addColorStop(0,"rgba(0,0,0,"+CQ+")");BO.addColorStop(1,"rgba(255,255,255,"+CQ+")");Ch.fillStyle=BO;Ch.fill();Ch.restore();CQ=0.4;BM=Cp*0.3;Bl=Bg.SimpleColor;Bo={x:Cf+BM*Math.cos(Af*0.75),y:Ce+BM*Math.sin(Af*0.75)};Bj={x:Cf+BM*Math.cos(Af*1.75),y:Ce+BM*Math.sin(Af*1.75)};Ch.save();Ch.clip();var BO=Ch.createLinearGradient(Bo.x,Bo.y,Bj.x,Bj.y);BO.addColorStop(0,"rgba("+Bl.R+","+Bl.G+","+Bl.B+","+0+")");BO.addColorStop(0.2,"rgba("+Bl.R+","+Bl.G+","+Bl.B+","+1+")");BO.addColorStop(0.8,"rgba("+Bl.R+","+Bl.G+","+Bl.B+","+1+")");BO.addColorStop(1,"rgba("+Bl.R+","+Bl.G+","+Bl.B+","+0+")");Ch.fillStyle=BO;Ch.fill();Ch.restore();break;case d:CQ=0.6;BM=Cp*0.2;var CS=0.3;Bo={x:Cf+BM*Math.cos(Af*1.25),y:Ce+BM*Math.sin(Af*1.25)};Bj={x:Cf+Cp*Math.cos(Af*0.25),y:Ce+Cp*Math.sin(Af*0.25)};Ch.save();Ch.clip();var BO=Ch.createLinearGradient(Bo.x,Bo.y,Bj.x,Bj.y);BO.addColorStop(0,"rgba(255,255,255,"+CQ+")");BO.addColorStop(CS,"rgba(0,0,0,"+CQ+")");BO.addColorStop(1,"rgba(255,255,255,"+CQ+")");Ch.fillStyle=BO;Ch.fill();Ch.restore();break;default:CQ=0.4;BM=Cp-Bp.Thickness;Bo={x:Cf+BM*Math.cos(Af*1.25),y:Ce+BM*Math.sin(Af*1.25)};Bj={x:Cf+BM*Math.cos(Af*0.25),y:Ce+BM*Math.sin(Af*0.25)};Ch.save();Ch.clip();var BO=Ch.createLinearGradient(Bo.x,Bo.y,Bj.x,Bj.y);BO.addColorStop(0,"rgba(0,0,0,"+CQ+")");BO.addColorStop(1,"rgba(255,255,255,"+CQ+")");Ch.fillStyle=BO;Ch.fill();Ch.restore();break;}break;case M:Bg=B1[Bp.Format];CO=Bg.Bevel;var CQ;var CS;var Cf;var Ce;var Bq;var Bb;var CR;var Bw;var Bt;var Cj;if(C2.IsAnimated===0){Cf=Bp.CX;Ce=Bp.CY;Bq=Bp.InnerRadius;Bb=Bp.OuterRadius;CR=Bp.RGUsage;Bw=Bp.HEP;if(Bw==1){Bt=Bp.ExtraDepth;Cj=Bp.ExtraIntensity;}}else{Cf=Bp.CX[0]*(1-B3)+Bp.CX[1]*B3;Ce=Bp.CY[0]*(1-B3)+Bp.CY[1]*B3;Bq=Bp.InnerRadius[0];Bb=Bp.OuterRadius[0];CR=Bp.RGUsage[0];Bw=Bp.HEP[0];if(Bw==1){Bt=Bp.ExtraDepth[0];Cj=Bp.ExtraIntensity[0];}}switch(CR){case o:CQ=CO.Intensity*0.01*Bg.Alpha/255;CS=1-CO.Depth*0.01;Cw=Ch.createRadialGradient(Cf,Ce,Bq,Cf,Ce,Bb);CH="RGBA(0,0,0,"+CQ+")";B8="RGBA(255,255,255,"+CQ+")";Cw.addColorStop(0,CH);Cw.addColorStop(CS,B8);Cw.addColorStop(1,CH);Ch.fillStyle=Cw;Ch.fill();break;case A1:CQ=CO.Intensity*0.01*Bg.Alpha/255;Cw=Ch.createRadialGradient(Cf,Ce,Bq,Cf,Ce,Bb);CH="RGBA(0,0,0,"+CQ+")";B8="RGBA(255,255,255,"+CQ+")";Cw.addColorStop(0,CH);Cw.addColorStop(1,B8);Ch.fillStyle=Cw;Ch.fill();break;case Ag:if(Bw==0){CQ=CO.Intensity*0.01*Bg.Alpha/255;CS=CO.Depth*0.01;}else{CQ=Cj*0.01*Bg.Alpha/255;CS=Bt*0.01;}Cw=Ch.createRadialGradient(Cf,Ce,Bq,Cf,Ce,Bb);CH="RGBA(0,0,0,"+CQ+")";B8="RGBA(255,255,255,"+CQ+")";Cw.addColorStop(0,CH);Cw.addColorStop(CS,B8);Cw.addColorStop(1,CH);Ch.fillStyle=Cw;Ch.fill();break;}break;case BG:Bg=B1[Bp.Format];CO=Bg.Bevel;CQ=CO.Intensity*0.01*Bg.Alpha/255;CS=1-CO.Depth*0.01;CH="RGBA(0,0,0,"+CQ+")";B8="RGBA(255,255,255,"+CQ+")";Cw=Ch.createLinearGradient(Bp.StartPoint.X,Bp.StartPoint.Y,Bp.EndPoint.X,Bp.EndPoint.Y);Cw.addColorStop(0,CH);Cw.addColorStop(CS,B8);Cw.addColorStop(1,CH);Ch.save();Ch.clip();Ch.fillStyle=Cw;Ch.fill();Ch.restore();break;case BJ:case AS:break;case Q:var Cg;BP=Bp.Format;Bg=B1[BP];if(Bg.Gradient&&Bg.Gradient.Valid){var Ct=Bg.Gradient,Cn=Ct.Colors,Bo=Ct.Start,Bj=Ct.End;if(Ct.style==0){var Bx=Ch.createLinearGradient(Bo.x,Bo.y,Bj.x,Bj.y);}else{if(Ct.angle==0){Bx=Ch.createLinearGradient(Bo.x,0,Bj.x,0);}else{Bx=Ch.createLinearGradient(0,Bo.y,0,Bj.y);}}var Be,B9=1,Cs=Cn.length;if(Cs>0){for(CG=0;CG<Cs;CG++){Be="RGBA("+Math.round(B9*Cn[CG].Color.mR)+", "+Math.round(B9*Cn[CG].Color.mG)+", "+Math.round(B9*Cn[CG].Color.mB)+", "+Bg.Alpha/255+")";Bx.addColorStop(Cn[CG].Step,Be);}Cg=Bx;}else{Bl=Bg.Color;Cg="RGBA("+Bl.R+", "+Bl.G+", "+Bl.B+", "+Bg.Alpha/255+")";}}else{Bl=Bg.Color;Cg="RGBA("+Bl.R+", "+Bl.G+", "+Bl.B+", "+Bg.Alpha/255+")";}Ch.strokeStyle=Cg;Ch.stroke();break;case N:BP=Bp.Format;Bg=B1[BP];Bl=Bg.Color;Ch.font=Bg.Size+"px "+Bg.Name;if(Bg.Style&2){Ch.font="italic "+Ch.font;}if(Bg.Style&1){Ch.font="bold "+Ch.font;}Ch.fillStyle="RGBA("+Bl.R+", "+Bl.G+", "+Bl.B+", "+Bg.Alpha/255+")";Ch.fillText(Bp.Text,Bp.StartPoint.X,Bp.StartPoint.Y);if(Bg.Style&12){Ch.beginPath();var CP=Ch.measureText(Bp.Text);if(Bg.Style&4){Ch.moveTo(Math.round(Bp.StartPoint.X),Math.round(Bp.StartPoint.Y));Ch.lineTo(Math.round(Bp.StartPoint.X+CP.width),Math.round(Bp.StartPoint.Y));}if(Bg.Style&8){Ch.moveTo(Math.round(Bp.StartPoint.X),Math.round(Bp.StartPoint.Y-Bg.Size*0.5));Ch.lineTo(Math.round(Bp.StartPoint.X+CP.width),Math.round(Bp.StartPoint.Y-Bg.Size*0.5));}Ch.strokeStyle="RGBA("+Bl.R+", "+Bl.G+", "+Bl.B+", "+Bg.Alpha/255+")";Ch.lineWidth=Math.round(Math.max(1,Bg.Size*3/40));Ch.stroke();}break;case AV:var Cz;if(C2.IsAnimated===0){Cz=Bp.Rect;}else{Cz=Bp.Rect[0];var C3=Bp.Rect[1];Cz.X=Cz.X*(1-B3)+C3.X*B3;Cz.Y=Cz.Y*(1-B3)+C3.Y*B3;Cz.Width=Cz.Width*(1-B3)+C3.Width*B3;Cz.Height=Cz.Height*(1-B3)+C3.Height*B3;}var CE=Bp.RotationAngle;var CN=Bp.BevelDepth;var Ca=Bp.LTColor;var CW=Bp.LTAlpha;var Cr=Bp.RBColor;var Co=Bp.RBAlpha;var Cq={X:Cz.X+Cz.Width/2,Y:Cz.Y+Cz.Height/2};var Cd={X:0,Y:0,Width:0,Height:0};Cd.X=Cz.X;Cd.Y=Cz.Y;Cd.Width=Cz.Width;Cd.Height=Cz.Height;BF(Cd,CN,CN);var Bi=[];Bi.push(A3({X:Cz.X,Y:Cz.Y},Cq,CE));Bi.push(A3({X:Cz.X+Cz.Width,Y:Cz.Y},Cq,CE));Bi.push(A3({X:Cz.X+Cz.Width,Y:Cz.Y+Cz.Height},Cq,CE));Bi.push(A3({X:Cz.X,Y:Cz.Y+Cz.Height},Cq,CE));var Cl=[];Cl.push(A3({X:Cd.X,Y:Cd.Y},Cq,CE));Cl.push(A3({X:Cd.X+Cd.Width,Y:Cd.Y},Cq,CE));Cl.push(A3({X:Cd.X+Cd.Width,Y:Cd.Y+Cd.Height},Cq,CE));Cl.push(A3({X:Cd.X,Y:Cd.Y+Cd.Height},Cq,CE));var Ba=[];Ba.push(A3({X:Cz.X,Y:Cz.Y+Cz.Height},Cq,CE));Ba.push(A3({X:Cd.X,Y:Cd.Y+Cd.Height},Cq,CE));Ba.push(A3({X:Cd.X,Y:Cd.Y},Cq,CE));Ba.push(A3({X:Cd.X+Cd.Width,Y:Cd.Y},Cq,CE));Ba.push(A3({X:Cz.X+Cz.Width,Y:Cz.Y},Cq,CE));Ba.push(A3({X:Cz.X,Y:Cz.Y},Cq,CE));C(Ch,Ba,false,false);Ch.fillStyle="RGBA("+Ca.R+", "+Ca.G+", "+Ca.B+", "+CW/255+")";Ch.fill();var BU=[];BU.push(A3({X:Cz.X,Y:Cz.Y+Cz.Height},Cq,CE));BU.push(A3({X:Cd.X,Y:Cd.Y+Cd.Height},Cq,CE));BU.push(A3({X:Cd.X+Cd.Width,Y:Cd.Y+Cd.Height},Cq,CE));BU.push(A3({X:Cd.X+Cd.Width,Y:Cd.Y},Cq,CE));BU.push(A3({X:Cz.X+Cz.Width,Y:Cz.Y},Cq,CE));BU.push(A3({X:Cz.X+Cz.Width,Y:Cz.Y+Cz.Height},Cq,CE));C(Ch,BU,false,false);Ch.fillStyle="RGBA("+Cr.R+", "+Cr.G+", "+Cr.B+", "+Co/255+")";Ch.fill();Ch.strokeStyle="RGBA(230, 230, 230, "+CW*0.5/255+")";Ch.lineWidth=1;C(Ch,Bi,true,true);Ch.stroke();C(Ch,Cl,true,true);Ch.stroke();break;}}}function A0(BM,BN){return 1-(Math.sqrt((BN-256)*(BN-256)+(BM-256)*(BM-256))/(1.5*256));}function V(BQ,BM,BR,BO,BN){var BP=(BO&&BN)?0.5:0;BQ.moveTo(BM+BP,BR+BP);}function BK(BQ,BM,BR,BO,BN){var BP=(BO&&BN)?0.5:0;BQ.lineTo(BM+BP,BR+BP);}function j(BP,BM,BO,BN){var BR=BM.length;if(BR<=0){return ;}BP.beginPath();V(BP,BM[0].X,BM[0].Y,BO,BN);var BQ=0;for(i=1;i<BR;++i){BK(BP,BM[i].X,BM[i].Y,BO,BN);BQ=i;}}function X(BO){var BN=A9[BO];var BM=BN.length/2;return{number:BM,points:BN};}function AP(BV,BQ,BN){var BM=[];if(BV==AE){BM.push({X:BQ.X-BN,Y:BQ.Y-BN});BM.push({X:BQ.X+BN,Y:BQ.Y-BN});BM.push({X:BQ.X+BN,Y:BQ.Y+BN});BM.push({X:BQ.X-BN,Y:BQ.Y+BN});return BM;}var BS;var BU;var BR=X(BV);BS=BR.number;BU=BR.points;for(var BT=0;BT<BS;BT++){var BP=(BU[2*BT])*BN/A6+BQ.X;var BO=(BU[2*BT+1])*BN/A6+BQ.Y;BM.push({X:BP,Y:BO});}return BM;}function C(BR,BN,BP,BO){var BT=BN.length;if(BT<3){return ;}BR.beginPath();if(BP&&BO){var BM=[];for(var BQ=0;BQ<BT;++BQ){BM.push(BN[BQ]);}var BS=BT-1;for(var BQ=0;BQ<BT;++BQ){lNextIndex=(BQ+1==BT)?0:BQ+1;if(BN[BQ].X==BN[BS].X||BN[BQ].X==BN[lNextIndex].X){BM[BQ].X+=0.5;}if(BN[BQ].Y==BN[BS].Y||BN[BQ].Y==BN[lNextIndex].Y){BM[BQ].Y+=0.5;}BS=BQ;}j(BR,BM,false,BO);}else{j(BR,BN,false,BO);}BR.closePath();}function BA(BM,BP,BO){var BQ=BM.X-BP.X;var BN=BM.Y-BP.Y;BM.X=BP.X+Math.cos(BO)*BQ-Math.sin(BO)*BN;BM.Y=BP.Y+Math.sin(BO)*BQ+Math.cos(BO)*BN;return BM;}function A3(BM,BO,BN){return BA(BM,BO,BN);}function BF(BN,BO,BM){if(BO*2>BN.Width){BO=BN.Width/2;}if(BM*2>BN.Height){BM=BN.Height/2;}return AH(BN,-BO,-BM);}function AH(BN,BO,BM){BN.X-=BO;BN.Y-=BM;BN.Width+=(BO*2);BN.Height+=(BM*2);return BN;}function t(BN,BM,BO){return S(BN,BM)+S(BM,BO)+S(BO,BN);}function p(BN,BM){return Math.sqrt((BN.X-BM.X)*(BN.X-BM.X)+(BN.Y-BM.Y)*(BN.Y-BM.Y));}function P(BP,BT,Bc){var BY=Bc;var BO=BP.length;var BX=BT;var BZ=BP[(BX+BO-1)%BO];var BW=BP[(BX+1)%BO];var BR=0;var Bb={X:0,Y:0};var Ba={X:BP[BT].X-BP[(BT+BO-1)%BO].X,Y:BP[BT].Y-BP[(BT+BO-1)%BO].Y};for(var BU=(BX+2)%BO;BU!=BX;BU=(BU+1)%BO){var BV=BU-1;if(BV<0){BV+=BO;}var Be={X:BP[BV].X-BP[BX].X,Y:BP[BV].Y-BP[BX].Y};var Bd={X:BP[BU].X-BP[BX].X,Y:BP[BU].Y-BP[BX].Y};if(S(Ba,Be)<0.01&&S(Ba,Bd)>0.01){var BN=b(BZ,BP[BX],BP[BV],BP[BU],Bb,false);Bb=BN.interSection;BR=BU;break;}}var BM=0;var BS={X:0,Y:0};var BQ={X:BP[BT].X-BP[(BT+1)%BO].X,Y:BP[BT].Y-BP[(BT+1)%BO].Y};for(var BU=(BX+BO-2)%BO;BU!=BX;BU=(BU-1+BO)%BO){var BV=BU+1;if(BV>=BO){BV-=BO;}var Be={X:BP[BV].X-BP[BX].X,Y:BP[BV].Y-BP[BX].Y};var Bd={X:BP[BU].X-BP[BX].X,Y:BP[BU].Y-BP[BX].Y};if(S(BQ,Be)>-0.01&&S(BQ,Bd)<-0.01){var BN=b(BW,BP[BX],BP[BV],BP[BU],BS,false);BS=BN.interSection;BM=BU;break;}}BY.push(BP[BX]);BY.push(Bb);for(m=BR;;m=(m+1)%BO){BY.push(BP[m]);if(m==BM){break;}}BY.push(BS);return BY;}function h(BX,BU){var BV=BX.length;if(BV==3){var BN=BL(BX,BU);return BN;}else{var Be=BX[BV-1];var BM={X:BX[1].X-BX[0].X,Y:BX[1].Y-BX[0].Y};var BY={X:-BM.X,Y:-BM.Y};var BP={X:Be.X-BX[0].X,Y:Be.Y-BX[0].Y};var Bf={X:-BP.X,Y:-BP.Y};var BR=false;var BW=10000000000;for(var Bd=2;Bd<BV;++Bd){var Bb=Bd-1;var Bc={X:BX[Bd].X-BX[Bb].X,Y:BX[Bd].Y-BX[Bb].Y};if(S(BY,Bc)<-0.01){var BO={X:0,Y:0};var BS=b(BX[0],BX[1],BX[Bb],BX[Bd],BO,false);BO=BS.interSection;if(BS.val>0){var BT={X:BO.X-BX[0].X,Y:BO.Y-BX[0].Y};if(AL(BM,BT)>0.01){var BQ={X:BO.X+Bc.X,Y:BO.Y+Bc.Y};var BZ={X:0,Y:0};var Ba;var BN=T(Be,BX[0],BO,BQ,BZ,Ba);BZ=BN.point;Ba=BN.val;if(BN.mark){BR=true;if((Ba<BW)&&Ao(BZ,BX[Bb-1],BX[Bb],BX[Bd],BX[(Bd+1)%BV])){BW=Ba;}}}}}else{if(S(Bf,Bc)<-0.01){var BO={X:0,Y:0};var BS=b(BX[0],Be,BX[Bb],BX[Bd],BO,false);BO=BS.interSection;if(BS.val>0){var BT={X:BO.X-BX[0].X,Y:BO.Y-BX[0].Y};if(AL(BP,BT)>0.01){var BQ={X:BO.x-Bc.x,Y:BO.y-Bc.y};var BZ={X:0,Y:0};var Ba;var BN=T(BQ,BO,BX[0],BX[1],BZ,Ba);BZ=BN.point;Ba=BN.val;if(BN.mark){BR=true;if((Ba<BW)&&Ao(BZ,BX[Bb-1],BX[Bb],BX[Bd],BX[(Bd+1)%BV])){BW=Ba;}}}}}}}return{mark:BR,depth:BW};}}function At(BM){return BM.X*BM.X+BM.Y*BM.Y;}function Au(BY,BW,BV,BQ){var BR={X:BY.X-BW.X,Y:BY.Y-BW.Y};var BP={X:BV.X-BW.X,Y:BV.Y-BW.Y};var BO=Math.sqrt(At(BR));var BN=Math.sqrt(At(BP));var BU={X:BR.X/BO,Y:BR.Y/BO};var BT={X:BP.X/BN,Y:BP.Y/BN};var BX=0;if(Math.abs(BU.X-BT.X)<0.01){BX=BQ*(BT.X+BU.X)/(BU.Y-BT.Y);}else{BX=BQ*(BT.Y+BU.Y)/(BT.X-BU.X);}var BS={X:0,Y:0};var BM={X:0,Y:0};BS.X=BW.X+BX*BT.X;BS.Y=BW.Y+BX*BT.Y;BM.X=BS.X+BQ*(-BT.Y);BM.Y=BS.Y+BQ*BT.X;return{start:BM,end:BS};}function Al(BN,BM){var BO=AL(BN,BM)/(Math.sqrt(At(BN)*At(BM)));BO=(BO>1)?1:BO;BO=(BO<-1)?-1:BO;return Math.acos(BO);}function Ao(BS,Ba,BZ,BX,BW){var BU={X:Ba.X-BZ.X,Y:Ba.Y-BZ.Y};var BR={X:BX.X-BZ.X,Y:BX.Y-BZ.Y};var BY=s(Al(BU,BR));if(S(BR,BU)<-0.01){BY=360-BY;}var BO={X:BS.X-BZ.X,Y:BS.Y-BZ.Y};var BT=s(Al(BO,BR));if(S(BR,BO)<-0.01){BT=360-BT;}if(2*BT>BY){return false;}var BN={X:-BR.X,Y:-BR.Y};var BM={X:BW.X-BX.X,Y:BW.Y-BX.Y};var BV=s(Al(BN,BM));if(S(BM,BN)<-0.01){BV=360-BV;}var BQ={X:BS.X-BX.X,Y:BS.Y-BX.Y};var BP=s(Al(BN,BQ));if(S(BQ,BN)<-0.01){BP=360-BP;}if(2*BP>BV){return false;}return true;}function AQ(BM){return Math.sqrt(At(BM));}function T(Ba,BZ,BX,BV,BQ,Bd){var Bl;var Bc;var Bj={X:BZ.X-Ba.X,Y:BZ.Y-Ba.Y};var Bf={X:BV.X-BX.X,Y:BV.Y-BX.Y};var BT={X:BX.X-BZ.X,Y:BX.Y-BZ.Y};var Bi=Math.sqrt(At(BT));var Bg=S(Bj,Bf);if(Bg>0.01||Bg<-0.01){var BU={X:0,Y:0};var BW=b(Ba,BZ,BX,BV,BU,false);BU=BW.interSection;var Bh=p(BZ,BU);var BN=p(BX,BU);if(Bg<-0.01){var BP=Bi+Bh+BN;BQ.X=(BN*BZ.X+Bh*BX.X+Bi*BU.X)/BP;BQ.Y=(BN*BZ.Y+Bh*BX.Y+Bi*BU.Y)/BP;Bl=t(BZ,BX,BU)/BP;Bc=true;}else{var BP=Bh+BN-Bi;if(BP<0.01){var Be=0;if(Math.abs(S(Bj,BT))<0.01){var Bk={X:-BT.X/Bi,Y:-BT.Y/Bi};var BO=Math.sqrt(At(Bf));var BR={X:Bf.X/BO,Y:Bf.Y/BO};Be=(Bk.Y-BR.Y)*Bi/(Bk.X+BR.X);BQ.X=BZ.X+Be*Bk.Y;BQ.Y=BZ.Y+Be*(-Bk.X);}else{var BY={X:BT.X/Bi,Y:BT.Y/Bi};var Bb=AQ(Bj);var BS={X:-Bj.X/Bb,Y:-Bj.Y/Bb};Be=(BS.Y-BY.Y)*Bi/(BS.X+BY.X);BQ.X=BX.X+Be*(-BY.Y);BQ.Y=BX.Y+Be*BY.X;}Bl=Be;Bc=true;return{val:Bl,mark:Bc,point:BQ};}BQ.X=(BN*BZ.X+Bh*BX.X-Bi*BU.X)/BP;BQ.Y=(BN*BZ.Y+Bh*BX.Y-Bi*BU.Y)/BP;Bl=t(BZ,BU,BX)/BP;Bc=true;}}else{if(Math.abs(S(Bj,BT))<0.01){Bc=false;return{val:Bl,mark:Bc,point:BQ};}var Bb=Math.sqrt(At(Bj));var BM={X:-Bj.X/Bb,Y:-Bj.Y/Bb};BQ.X=(BZ.X+BX.X+Bi*BM.X)/2;BQ.Y=(BZ.Y+BX.Y+Bi*BM.Y)/2;Bl=S(BT,BM)/2;Bc=true;}return{val:Bl,mark:Bc,point:BQ};}function BL(Ba,BX){var Bj=false;var BN=Ba.length;if(BN==3){var BV=p(Ba[0],Ba[1]);var BU=p(Ba[1],Ba[2]);var BT=p(Ba[2],Ba[0]);var BM=BV+BU+BT;BX=t(Ba[0],Ba[1],Ba[2])/BM;Bj=true;}else{var BS=false;var BZ=10000000000;for(var Bf=0;Bf<BN;++Bf){var Bg=Ba[Bf];var Bh=Ba[(Bf+BN-1)%BN];var Be=Ba[(Bf+1)%BN];var Bd=Ba[(Bf+2)%BN];var BQ={X:Bh.X-Bg.X,Y:Bh.Y-Bg.Y};var BO={X:Be.X-Bg.X,Y:Be.Y-Bg.Y};var Bb={X:-BO.X,Y:-BO.Y};var BY={X:Bd.X-Be.X,Y:Bd.Y-Be.Y};var BW=S(BQ,BO);if(BW<0.01){if(S(Bb,BY)<0.01){var BR={X:0,Y:0};var Bc=0;var BP=T(Bh,Bg,Be,Bd,BR,Bc);BR=BP.point;Bc=BP.val;if(BP.mark){BS=true;BZ=(BZ>Bc)?Bc:BZ;}}}else{if(BW>0.01){var Bi=[];Bi=P(Ba,Bf,Bi);var BP=h(Bi,Bc);var Bc=BP.depth;if(BP.mark){BS=true;BZ=(BZ>Bc)?Bc:BZ;}}}}BX=BZ;Bj=BS;}return{mark:Bj,depth:BX};}function AW(BN,BM){return(Math.abs(BN.X-BM.X)<0.01&&Math.abs(BN.Y-BM.Y)<0.01);}function AF(BN){var BO=[];BO.push(BN[0]);pcount=BN.length;for(var BM=1;BM<pcount;BM++){if(BN[BM-1].X==BN[BM].X&&BN[BM-1].Y==BN[BM].Y){continue;}BO.push(BN[BM]);}var BP=new Array();pcount=BO.length;for(var BM=0;BM<pcount;BM++){if(BM===pcount-1){if(BO[BM].X==BO[0].X&&BO[BM].Y==BO[0].Y){continue;}}BP.push(BO[BM]);}return BP;}function AY(BN,BM,BQ,BP){var BO=0.01;if(BP===false){BO=-0.01;}if(Math.abs(BM.X-BQ.X)<0.01){if(BN.Y-BM.Y>BO&&BQ.Y-BN.Y>BO){return true;}if(BN.Y-BQ.Y>BO&&BM.Y-BN.Y>BO){return true;}}else{if(BN.X-BM.X>BO&&BQ.X-BN.X>BO){return true;}if(BN.X-BQ.X>BO&&BM.X-BN.X>BO){return true;}}return false;}function b(BW,BV,BT,BS,BR,BN){var BO={X:BV.X-BW.X,Y:BV.Y-BW.Y};var BP={X:BS.X-BT.X,Y:BS.Y-BT.Y};if(Math.abs(S(BO,BP))<0.01){var BM={X:BT.X-BW.X,Y:BT.Y-BW.Y};if(Math.abs(S(BO,BM))<0.01){return{val:-1,interSection:BR};}else{return{val:0,interSection:BR};}}else{var BQ={X:BW.X-BT.X,Y:BW.Y-BT.Y};var BU=S(BP,BQ)/S(BO,BP);BR.X=BW.X+BU*BO.X;BR.Y=BW.Y+BU*BO.Y;if(AY(BR,BW,BV,BN)&&AY(BR,BT,BS,BN)){return{val:1,interSection:BR};}else{return{val:2,interSection:BR};}}}function AB(BV,BO,BQ){var BN=BO;while(BN<0){BN+=360;}while(BN>=360){BN-=360;}var BY=BV.X+BV.Width-BQ.x;var BT=BQ.y-BV.Y;var Ba=BQ.x-BV.X;var BR=BV.Y+BV.Height-BQ.y;var BW=z(BN);var BP={x:Math.cos(BW),y:-Math.sin(BW)};var BS;var BM;if(BN>=0&&BN<90){var Bb={x:BY,y:-BT};var BX={x:-Ba,y:BR};BS=O(Bb,BP);BM=O(BX,BP);}else{if(BN>=90&&BN<180){var Bc={x:-Ba,y:-BT};var BZ={x:BY,y:BR};BS=O(Bc,BP);BM=O(BZ,BP);}else{if(BN>=180&&BN<270){var Bb={x:BY,y:-BT};var BX={x:-Ba,y:BR};BS=O(BX,BP);BM=O(Bb,BP);}else{var Bc={x:-Ba,y:-BT};var BZ={x:BY,y:BR};BS=O(BZ,BP);BM=O(Bc,BP);}}}a.x=BQ.x+BS*BP.x;a.y=BQ.y+BS*BP.y;e.x=BQ.x+BM*BP.x;e.y=BQ.y+BM*BP.y;var BU=-BM/(BS-BM);if(BU<0){BU=0;}else{if(BU>1){BU=1;}}return BU;}function z(BM){return BM*Af/180;}function s(BM){return BM*180/Af;}function O(BN,BM){return(BN.x*BM.x+BN.y*BM.y);}function AL(BN,BM){return(BN.X*BM.X+BN.Y*BM.Y);}function S(BN,BM){return(BN.X*BM.Y-BN.Y*BM.X);}function Aw(BO,Be,BN,BP){var BM=Be.Gradient;var Ba="RGBA("+Math.round(BP*BM.StartGraphColor.R)+", "+Math.round(BP*BM.StartGraphColor.G)+", "+Math.round(BP*BM.StartGraphColor.B)+", "+Be.Alpha/255+")";var BY="RGBA("+Math.round(BP*BM.EndGraphColor.R)+", "+Math.round(BP*BM.EndGraphColor.G)+", "+Math.round(BP*BM.EndGraphColor.B)+", "+BM.EndAlpha/255+")";var BW;switch(BM.GradientType){case Z:if(BM.style==0){var Bg=BM.HorizontalOffset;if((BM.Angle>90&&BM.Angle<180)||BM.Angle>270){Bg=100-Bg;}var Bc={x:BN.X+BN.Width*Bg/100,y:BN.Y+BN.Height*BM.VerticalOffset/100};e={x:0,y:0};a={x:0,y:0};var BQ=AB(BN,BM.Angle,Bc);BW=BO.createLinearGradient(e.x,e.y,a.x,a.y);BW.addColorStop(0,BY);BW.addColorStop(BQ,Ba);BW.addColorStop(1,BY);}else{var BT=BM.Angle==0;e={x:0,y:0};a={x:0,y:0};if(BT){e.x=BN.X;a.x=BN.X+BN.Width;e.y=a.y=0;}else{e.y=BN.Y;a.y=BN.Y+BN.Height;e.x=a.x=0;}BW=BO.createLinearGradient(e.x,e.y,a.x,a.y);BW.addColorStop(0,Ba);var Bf=BM.IntermediateColors;for(var Bd=0;Bd<Bf.length;Bd++){var BZ=Bf[Bd].Color;var Bb="RGBA("+Math.round(BP*BZ.mR)+", "+Math.round(BP*BZ.mG)+", "+Math.round(BP*BZ.mB)+", "+Be.Alpha/255+")";BW.addColorStop(Bf[Bd].Step,Bb);}BW.addColorStop(1,BY);}BO.fillStyle=BW;BO.fill();break;case I:var Bc={x:BN.X+BN.Width*BM.HorizontalOffset/100,y:BN.Y+BN.Height*BM.VerticalOffset/100};var BU=BN.Width*1/BN.Height;Bc.y*=BU;BW=BO.createRadialGradient(Bc.x,Bc.y,0,Bc.x,Bc.y,BN.Width*2);BW.addColorStop(0,Ba);BW.addColorStop(0.5,BY);BW.addColorStop(1,BY);BO.fillStyle=BW;BO.save();BO.scale(1,1/BU);BO.fill();BO.restore();break;case AI:var Bc={x:BN.X+BN.Width*BM.HorizontalOffset/100,y:BN.Y+BN.Height*BM.VerticalOffset/100};var BR=BM.Angle%90;var BV=s(Math.atan(BN.Height/BN.Width));var BS=2*BR-BV*BR/45+90+BV;e={x:0,y:0};a={x:0,y:0};var BQ=AB(BN,BS,Bc);var BX=BO.createLinearGradient(e.x,e.y,a.x,a.y);Ba="RGBA("+Math.round(BP*BM.StartGraphColor.R)+", "+Math.round(BP*BM.StartGraphColor.G)+", "+Math.round(BP*BM.StartGraphColor.B)+", "+Be.Alpha/(255*2-Be.Alpha)+")";BY="RGBA("+Math.round(BP*BM.EndGraphColor.R)+", "+Math.round(BP*BM.EndGraphColor.G)+", "+Math.round(BP*BM.EndGraphColor.B)+", "+BM.EndAlpha/(255*2-BM.EndAlpha)+")";BX.addColorStop(0,BY);BX.addColorStop(BQ,Ba);BX.addColorStop(1,BY);BO.fillStyle=BX;BO.fill();BS=BV*BR/45+90-BV;BQ=AB(BN,BS,Bc);BW=BO.createLinearGradient(e.x,e.y,a.x,a.y);Ba="RGBA("+Math.round(BP*BM.StartGraphColor.R)+", "+Math.round(BP*BM.StartGraphColor.G)+", "+Math.round(BP*BM.StartGraphColor.B)+", "+Be.Alpha/(255*2)+")";BY="RGBA("+Math.round(BP*BM.EndGraphColor.R)+", "+Math.round(BP*BM.EndGraphColor.G)+", "+Math.round(BP*BM.EndGraphColor.B)+", "+BM.EndAlpha/(255*2)+")";BW.addColorStop(0,BY);BW.addColorStop(BQ,Ba);BW.addColorStop(1,BY);BO.fillStyle=BW;BO.fill();break;}}function An(BM,BO){var BN=BO.Alpha/255;BM.fillStyle="rgba(255,255,255,"+BO.Alpha/255+")";BM.fill();}function AJ(BN){var BM=BN.canvas;BN.clearRect(0,0,BM.width,BM.height);}function Ak(BM){As=(new Date()).getTime();L(BM);}function L(BV){var BU=BV.graphData,BW=BU.UnitList,BX=BW.length,BP=BU.FormatList,Ba=BV.graphNode,BS=BV.highlightNode,BQ=BS.getContext("2d"),BZ=BV.selectionNode,BR=BZ.getContext("2d"),BO=Ba.getContext("2d");AJ(BO);AJ(BQ);AJ(BR);var Bb=Math.min(((new Date()).getTime()-As)/AD,1),BY=(1-Bb),BT;var BM=0.3*Bb*BY*BY+2.7*BY*Bb*Bb+Bb*Bb*Bb;var BN=0;for(BT=0;BT<BX;BT++){Aq(BO,BM,BW[BT],BP);if(BW[BT].IsAnimated!==0){BN=1;}}if(Bb<1&&BN===1){setTimeout(function(){L(BV);},20);}}mstrmojo.graph._CanvasGraph=mstrmojo.provide("mstrmojo.graph._CanvasGraph",{markupString:'<div class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><canvas id="{@id}" height="{@height}" width="{@width}">{@unsupportedError}</canvas>{@map}<canvas id="{@id}-highlight" class="mobile-graph-selection-canvas" height="{@height}" width="{@width}" style="position:absolute;top:0;left:0"></canvas><canvas id="{@id}-highlight" class="'+mstrmojo.GraphBase.canvasCLS+'" height="{@height}" width="{@width}" style="position:relative;top:0;left:0"></canvas></div>',unsupportedError:"This text is displayed if your browser does not support HTML5 Canvas element.",markupSlots:{graphNode:function(){return this.domNode.childNodes[1];},imgNode:function(){return this.domNode.childNodes[1];},mapNode:function(){return null;},textNode:function(){return this.domNode.firstChild;},selectionNode:function(){return this.domNode.lastChild.previousSibling;},highlightNode:function(){return this.domNode.lastChild;}},graphData:null,retrieveGraphSrc:function BE(BP,BT){var BR=this.graphNode,BU=this.highlightNode,BQ=this.selectionNode,BS=this.graphData,BO=(BS&&BS.data);if(BO&&BO.eg){var BV=this.textNode,BN=this.imgNode;BN.style.display="none";BU.style.display="none";BQ.style.display="none";BV.innerHTML=BO.eg||"";BV.style.display="block";BV.className="mstrmojo-message";}else{var BW=BS.GH||parseInt(BP,10),BM=BS.GW||parseInt(BT,10);BR.setAttribute("height",BW);BR.setAttribute("width",BM);BU.style.display="block";BU.setAttribute("height",BW);BU.setAttribute("width",BM);BU.style.top=-BW+"px";BQ.style.display="block";BQ.setAttribute("height",BW);BQ.setAttribute("width",BM);this.displayTooltips([],0,0);Ak(this);if(BS.Selected){this.highlightAreaInInit(BQ,BS.Selected);}}},unrender:function AR(BM){this._super(false);},invalidate:function K(){var BM=this.graphNode;if(BM){AJ(BM.getContext("2d"));}},getCaptureDimensions:function Ab(){var BN=this.graphNode,BM=mstrmojo.dom.position(this.domNode,true);BM.w=BN.width;BM.h=BN.height;return BM;}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.ui.menus._HasMenuPopup","mstrmojo._CanAutoClose","mstrmojo._IsPopup","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.ui.PopupConfig","mstrmojo.ui._HasScroller","mstrmojo.ui._HasUITheme","mstrmojo.dom","mstrmojo.css","mstrmojo.ui._HasListTooltip");var D=mstrmojo.dom,P=mstrmojo.css,I=mstrmojo.ui.PopupConfig.directionCfg;var Q={};var K=false;function F(V,W){if(V.pop){if(W&&V.ax){window.clearTimeout(this._popupAxTimeout);V.actionFn();this.closeAllMenus();}else{var T=V.fn.call(mstrmojo.all[V.scope],V.ctxt);var U=T.ENUM_CORNERS;T.setAlignment(U.TOP_RIGHT,U.TOP_LEFT);T.hostId=this.id;T.hostElement=this._getItemNode(V._renderIdx);this.openPopup(T.newInstance());}}else{if(V.dsbld!==true){if(V.fn(V,this)!==false){this.closeAllMenus();}}}}function G(T){var U=parseInt(T);return U===null||isNaN(U)?0:U;}mstrmojo.ui.menus.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._IsPopup,mstrmojo.ui.menus._IsMenuPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip,mstrmojo.ui._HasScroller,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.ui.menus.Menu",selectionPolicy:"reselect",locksHover:true,closeOnClick:true,themeClassName:"mojo-theme-dark",icnCss:"mstrmojo-ui-Menu-item-container",popupConfig:null,tooltipCss:{leftCssClass:"menuTooltip",rightCssClass:"menuTooltip"},setupScrollNodes:function(){if(this.popupConfig&&this.popupConfig.supportsScroll){this.scrollNode=this.itemsContainerNode;this.scrollbarHostNode=this.domNode;}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll&&this.hasCustomScrollbar){var V=this.scrollNode;if(!V){return ;}var T=(getComputedStyle&&getComputedStyle(V,null))||V.currentStyle,U=V.offsetWidth-G(T.borderLeftWidth)-G(T.borderRightWidth)-V.clientWidth;V.style.marginRight=-U+"px";V.style.paddingRight=0;}},onscroll:function(){this.closePopup();this._super();},init:function L(V){this._super(V);var T=this.popupConfig;this.items=T.getMenuItems();var U=["mstrmojo-ui-Menu","unselectable"],W=T.menuCssClass;if(W){U.push(W);}P.addWidgetCssClass(this,U);if(T&&T.supportsScroll&&T.maxHeight>0){this.icnCssText=(this.icnCssText||"")+";max-height:"+T.maxHeight+"px";}this.useRichTooltip=!!T.useTooltip;this.tstid=T.tstid;},markupMethods:{onvisibleChange:function J(){var T=this.visible;if(!K||T){P.toggleClass(this.domNode,"visible",T);}}},getItemMarkup:function C(X,T){if(X.getItemMarkup){return X.getItemMarkup.apply(this,[X,T]);}var V=!!X.pop,W=V?"submenu":"item",U=Q[W];if(!U){U=this._super(X,T).replace("{@en@n}",'<div class="micn"></div>{@en@n}');if(V){U=U.replace("{@en@n}",'{@en@n}<div class="arw"></div>');}Q[W]=U;}if(X.tstid){U=U.replace("{@tag}","{@tag} "+mstrmojo.tstid(X)+" ");}return U;},getItemProps:function R(V,T){var U=this._super(V,T);U.tag="a";U.addCls("mstrmojo-ui-Menu-item");U.addCls(V.cls);return U;},adjustCornersForPopupOverflow:function O(){var V=this._super(),Z=this.domNode,Y,X,T,U,W;if(V){Y=D.position(Z);T=Y.y;X=Z.style;U=this.popupConfig;W=U.position||D.position(U.hostElement);if(T<0||(T+Y.h>D.position(document.body).h)){X.top=(-W.y+5)+"px";X.bottom="auto";}}return V;},onmouseover:function E(T){var Y=T.getTarget(),X=this.getItemFromTarget(Y),W=this,V=W._lastOpened,a=V&&this.getItemFromTarget(V.popupConfig.hostElement)._renderIdx,Z=this.getItemNodeFromTarget(Y),U=(a!==undefined&&D.contains(this._getItemNode(a),Y,true,this.domNode));if(X){this._lastHoverIx=X._renderIdx;window.clearTimeout(this._popupTimeOut);window.clearTimeout(this._popupAxTimeout);if(this._lastHoverIx!==a&&!U){this._popupTimeOut=window.setTimeout(function(){if(W._lastOpened&&W._lastOpened.visible){W.closePopup();}if(W.visible&&X.pop){if(X.ax){W._popupAxTimeout=window.setTimeout(function(){P.removeClass(Z,"hlt-ax");F.call(W,X);},0);}else{F.call(W,X);}}},400);if(X.pop&&X.ax){P.addClass(Z,"hlt-ax");}}}},onclick:function S(T){this._evtTarget=T.getTarget();this._super(T);T.cancel();},postselectionChange:function H(T){var U=T.added;if(U){var V=this.items[U[0]];F.call(this,V,!(V.ax&&this._evtTarget.className==="arw"));delete this._evtTarget;}},oncontextmenu:function M(T){D.preventDefault(window,T.e);return false;},postBuildRendering:function N(T){this._super(T);if(this.popupConfig.supportsScroll){var U=this;window.setTimeout(function(){U.updateScrollbars();},10);}},showTooltip:function B(X,W){var V=D.eventTarget(W,X),U=this.getItemNodeFromTarget(V),T=this.getItemFromTarget(V);if(U&&((T&&T.ttp)||(U.scrollWidth>U.clientWidth))){this._super(X,W);}},onClose:function A(T){if(this._super){this._super(T);}this.closePopup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.ScrollableList","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui._HasListTooltip");mstrmojo.ui.PopupList=mstrmojo.declare(mstrmojo.ui.ScrollableList,[mstrmojo._IsPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PopupList",autoCloses:true,locksHover:true,closeOnClick:true,parentDomNode:undefined,markupString:'<div id="{@id}" class="mstrmojo-PopupList {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="mstrmojo-popupList-scrollBar"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function D(){return this.domNode.firstChild.firstChild;},scrollboxNode:function F(){return this.domNode.firstChild;}},setupScrollNodes:function E(){this.scrollNode=this.scrollboxNode;},onOpen:function B(){this._super();this.updateScrollbars();},postBuildRendering:function C(){var H=this._super();if(!this.parent){var G=this.parentDomNode=this.parentDomNode||document.body;G.appendChild(this.domNode);}return H;},closePopup:function A(){this.set("visible",false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.Box","mstrmojo.array","mstrmojo._HasLayout","mstrmojo.ui.ColumnContainer");var E=mstrmojo.dom,G=mstrmojo.hash,C=mstrmojo.array;mstrmojo.ui.ColumnWalk=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.ColumnWalk",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnWalk cf {@cssClass}" mstrAttach:click></div>',layoutConfig:{h:{containerNode:"100%"},xt:true},currentColumn:-1,addNextColumn:function B(K){var J=this.children||[],L=J.length,I=J[L-1];var M=this.addChildren([G.copy(K,{scriptClass:"mstrmojo.ui.ColumnContainer",idx:L})])[0];if(I){I.set("next",M);}},onclick:function A(I){var K=I.getTarget();if(K){var J=this.children;C.forEach(J,function(M,L){if(E.contains(M.domNode,K,true,M.domNode)){this.set("currentColumn",L);}},this);}},oncurrentColumnChange:function D(I){var K=this.children,M=K[I.valueWas],J=K[this.currentColumn],L="active";if(M){M.set(L,false);}J.set(L,true);},removeTrailingContainer:function H(K){var J=this,I=this.children;if(!I||K>=I.length-1){return ;}C.forEach(I.slice(K+1),function(L){J.removeAndDestroyChild(L);});if(K>=0){I[K].set("next",null);}},insertAndRemoveTrailing:function F(J,I){this.removeTrailingContainer(J);this.addNextColumn(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.TableLayoutList");mstrmojo._IsTableLayoutListDIC=mstrmojo.provide("mstrmojo._IsTableLayoutListDIC",{_mixinName:"mstrmojo._IsTableLayoutListDIC",icnCss:"dicContainer",tableLayoutCssStyle:"fixed",setDirtyFlag:function(D,C){if(D.className!=="flag-container"){var B=document.createElement("div"),A=this.itemsNode&&this.itemsNode.clientWidth-8;B.className="flag-container";B.style.left=(A>0?A:0)+"px";B.innerHTML='<div class="dirty-cell"/>';C.insertBefore(B,D);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.SliderBox","mstrmojo._IsInputControl","mstrmojo.android._HasPreviewButton","mstrmojo.ui.MobileSlider","mstrmojo.num");var C=1,B=mstrmojo.num;mstrmojo.android.inputControls.SliderDIC=mstrmojo.declare(mstrmojo.SliderBox,[mstrmojo._IsInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.SliderDIC",popupStyle:1,init:function F(H){var G,I,J,K;this._super(H);this.items=this.getItems();this.cssClass=this.showByDefault?"mstrmojo-SliderGroup":"mstrmojo-PopupSlider";if(this.dic.ipt!==C){this.isSequential=true;I=this.max=this.dic.max;G=this.min=this.dic.min;J=this.interval=this.dic.itv;}else{G=1;I=this.items.length;J=1;}K=this.sliderBar;if(K){K.min=G;K.max=I;K.interval=J;}},preBuildRendering:function E(){var I=this.dic,G=(I.ldw!=null)?I.ldw/100:0.4,H;this.valueText=this.dv;this._super();if(this.showByDefault){H=this.openerStyle;this.valueCssText="left:-"+H.iw*G+"px;width:"+H.iw*G+"px";this.cssText="width:"+H.iw*(1-G)+"px";this.alignSlider(this.openerNode,H.ih);}},onpopupResized:function D(){var G=this.sliderBar;if(G){G.refresh();}},sliderRef:{scriptClass:"mstrmojo.ui.MobileSlider",onslidingValueChange:function(){if(this.hasRendered){this.selectedIdx=parseInt((this.slidingValue-this.min)/this.interval,10)||0;this.parent.selectedIdxChanged(this.selectedIdx);}},selectedIdx:0,select:function(G){this.selectedIdx=G||0;this.slidingValue=this.value=this.min+G*this.interval;}},selectedIdxChanged:function A(H){var I=this.items[H],G=I&&I.n;this.set("value",B.toLocaleString(G));this.set("valueText",B.toLocaleString(G));}});}());(function(){mstrmojo.requiresCls("mstrmojo.Dialog","mstrmojo._IsAnchorable","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller");var B=mstrmojo.dom;function A(){mstrApp.closeDialog();}mstrmojo.Magnifier=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsAnchorable,mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.Magnifier",cssClass:"mstrmojo-magnifier anchor",markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}"><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-InfoViewer-Title"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-InfoViewer-Content"></div><div class="mstrmojo-InfoViewer-Buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',anchorOrientation:"h",anchorOffset:0,baseTipClass:"",screenDim:null,width:"auto",close:function G(){if(this.onClose){this.onClose();}B.detachEvent(window,"resize",A);this.destroy();},touchBegin:function H(I){this.helper.glowOnTap(I.target);},touchTap:function D(J){var I=J.target;if(I===this.curtainNode){mstrApp.closeDialog();}else{this.helper.handleTouchTap(I);}},touchSwipeEnd:function C(I){this.helper.handleTouchSwipe(I);this._super(I);},preBuildRendering:function E(){this._super();var K=this.screenDim=mstrApp.getScreenDimensions(),I=K.w,J=K.h;if(mstrApp.isTablet()){this.width="auto";}else{this.width=(I>J?(I*0.4):(I*0.6))+"px";}},postBuildRendering:function(){this._super();B.attachEvent(window,"resize",A);},updateContent:function(){var I=this.helper;I.createTitle(this.titleNode);I.createContent(this.containerNode);},resizeAndPosition:function(I){var K=this.helper.getContentHeight(),M=this.helper.titleHeight,L=this.screenDim,J=L.h-30,N;this.height=Math.min(K,J-M);this.containerNode.style.height=this.height+"px";this.updateScroller();if(I){this.moveTo(I);}else{N=B.position(this.editorNode);if(!(N.x>0&&N.x+N.w<L.w&&N.y>0&&N.y+N.h<L.h)){this.positionDialog();}}window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},moveTo:function(I){this.anchorPosition=I;this.positionDialog();},updateScrollerConfig:function F(){var J=this._super(),I=this.helper.currentTabIndex,L=this.containerNode.children[I];J.bounces=false;if(L){J.scrollEl=L;J.origin=J.origin||{x:0,y:0};J.noVScroll=J.noHScroll=true;var M=Math.max(this.helper.getContentHeight()-this.height,0);var K=J.vScroll=(M!==0);if(K){J.offset={y:{start:0,end:M}};}}return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var j=mstrmojo.func.composite,M=mstrmojo.dom,Z=mstrmojo.Button.newWebButton,C=mstrmojo.css,Y=mstrmojo.all,N=mstrmojo.hash,W=mstrmojo.array;function V(r){if(!this.modal){return ;}var s=window.mstrApp;if(s&&s.modalEditorChange){s.modalEditorChange(this.id,r);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function X(){return this.domNode.firstChild;},titlebarNode:function l(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function o(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function p(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.title;}},onzIndexChange:function(){var r=this.zIndex;this.editorNode.style.zIndex=r;this.curtainNode.style.zIndex=r-1;},onvisibleChange:function(u){if(u){return ;}var t=this.visible,s="closeEffect",r="none";if(t){s="openEffect";r="block";}if(this[s]){this.playEffect(s);}else{this.editorNode.style.display=r;if(this.modal){this.curtainNode.style.display=r;}}},onhelpChange:function e(){if(this.showTitle){var s=this.help,r=this.helpNode;if(!s){r.style.display="none";}else{r.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(s,r){this._super(s,r);V.call(this,true);},close:function g(r){this._super(r);V.call(this,false);},unrender:function B(r){this._super(r);V.call(this,false);},destroy:function h(r){this._super(r);V.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;V.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function k(){return this.titlebarNode;},getMovingTarget:function U(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(r){var s=r.getTarget();if(s===this.closeNode||s===this.helpNode){C.toggleClass(s,"active",true);}},premouseup:function O(r){var s=r.getTarget();if(s===this.closeNode||s===this.helpNode){C.toggleClass(s,"active",false);}if(r.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function d(s){if(s.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{var r=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId||mstrApp.localeId)+"/"+(mstrApp.userHelpPage||"MicroStrategy_Web_Help.htm#");window.open(r+(this.help||""),"_blank");return false;}}},_set_visible:function b(x,t){var s=(this[x]!==t);if(s){this[x]=t;var w=this._close_handler;if(t){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var u=this;w=this._close_handler=w||function(z){var AA=M.eventTarget(self,z);if(AA&&AA.parentNode&&!M.contains(u.editorNode,AA,true,document.body)){u.close();}};M.attachEvent(document.body,"mousedown",w);}}else{var r=this._curtain_handler;if(r){M.detachEvent(window,"resize",r);}if(w){M.detachEvent(document.body,"mousedown",w);}}}return s;},showTooltip:function q(z,x){var w=this,s=M.findAncestorByAttr(M.eventTarget(x,z),"tooltip",true,this.domNode),u=s&&s.value;if(!w.hasOpenTooltip&&u){var r=M.position(s.node);w.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:u,top:Math.max(r.y+40,0),left:Math.max(r.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(z,x);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(r){r=Math.round(r);return["rgb(",r,",",r,",",r,")"].join("");}}},preStart:function(){var s=this.target,r=this.widget;r.editorNode.style.display="block";if(!r.modal){return false;}s.style.display="block";C.setOpacity(s,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var r=this.widget;r.editorNode.style.display="none";return !!r.modal;}};function D(r){return function(){Y[r].destroy();};}function J(s,AB,AC,AD){var r=AB.id||"mojoAlertx9",x,AA=AB.buttons;W.forEach(AA,function(AF){var AE=AF.onclick;AF.onclick=function(AG){var AH=Y[r];if(AE&&AE.call(AF,AG)===false){return ;}AH.destroy();AH=null;};});try{Y[r].destroy();}catch(z){}var t=AB.cssClass,u=[];if(t){u.push(t);delete AB.cssClass;}if(AD){u.push(AD);}u.push("mstrmojo-alert");x={scriptClass:"mstrmojo.Editor",id:r,width:"475px",zIndex:1000,title:AC||mstrmojo.desc(11812,"Notification"),cssClass:u.join(" "),children:[{scriptClass:"mstrmojo.Label",cssClass:"alert-content",text:s,allowHTML:AB.allowHTML}],visible:true};var w=new mstrmojo.Editor(N.copy(AB,x));w.render();return w;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(s,AA,t){t=t||{};var AB=t.forceClose,z=t.callback||mstrmojo.emptyFn,x=N.copy(AA||{},{buttons:AB?[mstrmojo.Button.newActionButton((t.buttonText||mstrmojo.desc(8607,"Dismiss")),z)]:null,showTitle:false,modal:false,top:"42px"}),u=t.duration||6000;var w=J(s,x,"",AB?"ed-notify":"ed-toast"),r=w.id;if(!AB){window.setTimeout(j([z,D(r)]),u);}else{window.setTimeout(function(){if(Y[r]){Y[r].editorNode.style.opacity=0.75;}},6000);}return w;};mstrmojo.confirm=function f(x,s,w){s=s||{};var r=s.confirmBtn||{},u=s.cancelBtn||{},t=[Z(r.t||mstrmojo.desc(219,"Yes"),r.fn,true),Z(u.t||mstrmojo.desc(218,"No"),u.fn)];return J(x,N.copy(w||{},{buttons:t,onPreClose:function(){if(u&&u.fn){u.fn();}return true;}}));};mstrmojo.warn=function K(t,r,s){s=s||{};s.cssClass=(s.cssClass||"")+" mstrmojo-warning";mstrmojo.confirm(t,r,s);};mstrmojo.alert=function a(x,t,w,z,r,u){var s={title:w,zIndex:z,cssClass:r,buttons:[Z(mstrmojo.desc(1442,"OK"),t,true)],onPreClose:function(){if(t){t();}return true;}};N.forEach(s,function(AB,AA){if(!AB){delete s[AA];}});return J(x,N.copy(u,s));};mstrmojo.error=function T(w,r,u){var s=w||{};var t=mstrmojo.desc(96,"Error");if(u){t=(u.title)?u.title:mstrmojo.desc(96,"Error");}J("",N.copy(u||{},{buttons:[Z(mstrmojo.desc(1442,"OK"),r,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:s.shortDesc,longDesc:s.longDesc}]}),t);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.Dialog","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo._IsAnchorable");var A=mstrmojo.dom,B=mstrmojo.array;mstrmojo.VisHeatMapPopupPanel=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VisHeatMapPopupPanel",title:"",markupString:'<div id="{@id}" class="heatmap-popup-panel" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},initialized:false,naviAction:null});mstrmojo.VisHeatMapAnimation=(function(){var C=[];return{animate:function(H,L,J,P,I,Q){var G;var M=C.length;for(var K=0,O=C.length;K<O;K++){if(!C[K]){M=K;continue;}if(C[K].node===H&&C[K].propName===L){(C[K].finalize(false));G=C[K];break;}}if(!G){G={};G.node=H;G.index=M;G.propName=L;C[M]=G;}var F=(new Date()).getTime();var I=I||500;var E=20;var D=null;G.finalize=function(R){clearInterval(D);D=null;if(P.r!==undefined){P.a=P.a||1;H.style[L]="";}else{if(P.px!==undefined){H.style[L]=P.px+"px";}}if(R){delete C[this.index];}if(Q){Q();}};function N(){var R={};var S=(new Date()).getTime();var U=S-F;if(U>=I){G.finalize(true);return ;}for(var T in J){R[T]=(P[T]-J[T])*U/I+J[T];if(T!=="a"){R[T]=Math.round(R[T]);}}if(R.r){R.a=R.a||1;H.style[L]="rgba("+R.r+","+R.g+","+R.b+","+R.a+")";}else{if(R.px){H.style[L]=R.px+"px";}}}D=setInterval(N,E);}};})();mstrmojo.VisHeatMapPopup=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VisHeatMapPopup",fadeOnClose:false,autoClose:true,markupString:'<div style="display: -webkit-box; -webkit-box-align: start; -webkit-box-pack: center;position:absolute; left:0px; top:0px; z-index:100000; width: 100%; height:100%;"  id={@id} mstrAttach:mouseup,touchend><div id={@id} style=" position:relative; left: 0px; top: 0px; width:{@width}; background-color:#F5F5F5;z-index:100001;border:2px solid rgba(0, 0, 0, 0.1);-webkit-box-shadow:rgba(0, 0, 0, 0.45) 2px 2px 8px;"><div  class="heatmap-popup-panel-title" style="display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: center;position:relative; -webkit-box-sizing: border-box; margin-bottom:6px; padding-right: 25%; height:65px; width:100%; line-height:65px;vertical-align:bottom;color:#33b5e5;"></div><div style="height: 2px;width:100%;background-color:#33b5e5"></div><div style="width:100%; height:auto; position:relative;overflow:hidden; display: -webkit-box; -webkit-box-orient: horizontal"></div></div><div style="position:absolute;z-index:100000;top:0px;left:0px;width:100%;height:100%;background: rgba(0, 0, 0, 0.5);"></div></div>',markupSlots:{contentNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.lastChild;},curtainNode:function(){return this.domNode.lastChild;}},baseTipClass:"heatmap-editor-tip",anchorOffset:42,hasCloseButton:true,goBack:function(){return this.close();},close:function(){this.domNode.style.webkitTransform="translate(-100000px,0px)";this.destroy();return true;},destroy:function(){this.onClose();if(this._super){this._super();}},postBuildRendering:function(){this._super();for(var D=0,C=this.panels.length;D<C;D++){if(D!==0){var F=document.createElement("div");F.style.cssText="position:relative;width:1px;color:grey;height:35px;text-align:center;background-color:grey;";this.titleNode.appendChild(F);}var F=document.createElement("div");F.style.cssText="-webkit-box-flex:1; line-height:65px;text-align:center; display: -webkit-box; -webkit-box-align: center; -webkit-box-pack: center; height:100%;";if(D==0){F.style.cssText+="margin-left:16px;";}else{F.style.cssText+="margin-right:16px;";}F.setAttribute("panel",D);F.innerText=this.panels[D].title;this.titleNode.appendChild(F);}var E=this;document.body.appendChild(this.domNode);this.panelStack=this.defaultIndex?this.defaultIndex:0;this.navigateTo(this.panelStack);this.contentNode.style.marginTop=parseInt((document.body.offsetHeight-this.contentMaxHeight-this.titleNode.offsetHeight)/2)+"px";},onmouseup:function(D){if(D.e.target===this.curtainNode){this.close();return ;}var E=mstrmojo.dom.findAncestorByAttr(D.e.target,"panel",true,this.domNode);if(!E){return ;}E.node.style.backgroundColor="rgba(51, 181, 229, 0.6)";var F=function(){mstrmojo.VisHeatMapAnimation.animate(E.node,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});};var C=this;setTimeout(function(){setTimeout(function(){C.navigateTo(E.value);F();},0);},0);},ontouchend:function(C){this.onmouseup(C);},highlightTitle:function(E){E=2*parseInt(E);if(isNaN(E)){return ;}var F=this.titleNode.childNodes,C=F.length;for(var D=0;D<C;D+=2){if(D!=E){F[D].style.borderBottom="";}else{F[D].style.borderBottom="solid 6px #33b5e5";}}},panelStack:0,navigateTo:function(I){if(this.owner&&this.owner.props){this.owner.props.navigatingIndex=I;}this.highlightTitle(I);var E=this.panels[I];var J=this.panelStack;var C=this.panels[J];if(I!=J){if(C.hasRendered){C.domNode.style.display="none";}}if(!E.hasRendered){this.panels[I]=new mstrmojo.VisHeatMapPopupPanel(this.panels[I]);var E=this.panels[I];this.addChildren(E);this.renderChildren();}E.domNode.style.display="block";if(E.naviAction){E.naviAction();}if(J===I){delete E.domNode.style.webkitTransform;}else{var F=C.domNode.offsetWidth+"px";var H=E.domNode.offsetWidth+"px";var K=Math.max(parseInt(F),parseInt(H));delete E.domNode.style.webkitTransition;var G="";var D="";if(J<I){G="translate(-"+K+"px,0px)";D="translate(-"+K+"px,0px)";}else{G="translate("+K+"px,0px)";D="translate("+K+"px,0px)";}this.panelStack=I;}},animation:function(D,E,C){E.domNode.style.webkitTransform=C;D.domNode.style.webkitTransform=C;},dummy:true});})();(function(){mstrmojo.requiresCls("mstrmojo.Dialog","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo._IsAnchorable");var A=mstrmojo.dom,C=mstrmojo.array;mstrmojo.android.Popup=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsAnchorable],{scriptClass:"mstrmojo.android.Popup",fadeOnClose:false,autoClose:true,init:function E(J){this._super(J);if(this.anchor){mstrmojo.css.addWidgetCssClass(this,"anchor");}},addChildren:function I(L,J,K){this._super(L,J,K);C.forEach(this.children,function(M){if(M.isElastic){this._elasticChild=M;return false;}},this);},resizeDialog:function D(){var Q=this.editorNode,M=mstrApp,J=M.getScreenDimensions(),P=Math.round(J.h*0.9),T=J.w,R;T=T*0.85;if(M.isTablet()){var N=this.popDimensions||{},S=mstrApp.getScreenDimensions();P=N.h||Math.min(Math.round(S.h*0.6),P);T=N.w||Math.min(Math.round(S.w*(mstrApp.isLandscape()?0.43:0.65)),T);}T+="px";var K=this._elasticChild;if(K&&K.visible){var L=K.elasticHeight;if(L){R=L;}else{if(K.getItemsContainerHeight){R=K.getItemsContainerHeight();}}}if(R===undefined){R=this.getAvailableContentSpace();P=Math.max(P,R+(this.titleNode.offsetHeight+this.buttonNode.offsetHeight));}else{R=Math.min(R,P-(this.titleNode.offsetHeight+this.buttonNode.offsetHeight));}if(Q){Q.style.maxHeight=P+"px";this.set("width",T);}else{this.width=T;this.cssText=(this.cssText||"")+"max-height:"+P+"px;";}this.raiseEvent({name:"popupResized",maxheight:P,height:R,width:parseInt(T,10)});if(K&&K.visible){var O=K.height;if(O!==undefined&&O!=="auto"){K.set("height","auto");}K.set("height",R+"px");if(K.updateScroller){K.updateScroller();}}this._super();},getAvailableContentSpace:function B(){return Math.max(this.containerNode.offsetHeight,this.editorNode.clientHeight-this.titleNode.offsetHeight-this.buttonNode.offsetHeight);},close:function F(){if(this.onClose){this.onClose();}if(this.fadeOnClose){var J=this.domNode;if(J){var K=this.id;if(!A.isWinPhone){A.attachOneTimeEvent(J,A.CSS3_TRANSITION_END,function(){mstrmojo.all[K].destroy();});J.style.opacity=0;}else{(new mstrmojo.fx.FadeOut({onEnd:function(){mstrmojo.all[K].destroy();},target:J,duration:400})).play();}}}else{this.destroy();}},onclick:function G(J){if(this.autoClose&&J.e.target===this.curtainNode){this.close();}},ontouchend:function H(J){this.onclick(J);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ToolBar","mstrmojo.boxmodel","mstrmojo.array","mstrmojo.EnumRWUnitType","mstrmojo.dom","mstrmojo.css");var Q=["background-color","border","border-color","border-left","border-style","border-top","border-width","filter","top","left","z-index","fx","normWidth","normHeight","normZIndex","normTop","normLeft","tbborder","lrborder","ttl"],X=["width","height"],r="p_fmts";var o="px";var k={getContentHeight:function(u,x){var w=x.ttl&&x.ttl.height;if(u&&w&&!this.floatingToolbar){return Math.max(parseInt(u,10)-parseInt(w,10),0)+o;}return"";},getPortletMinHeight:function(u){return u.ttl.height;},adjustTitleCss:function(){return ;}};var g={getContentHeight:function(u){return u;},getPortletMinHeight:function(){return 0;},adjustTitleCss:function(u){u.titlebarNodeClass+=" floating";return ;}};function A(z,w){var x=this.parent,u=z+"DirtyKey";if(x[u]){x[u](w);}}function P(){this.toolbarTitleTextNode.innerHTML=this.title+(this.count?" ("+this.count+")":"");}function j(){var w=this.parent,z=w&&w.defn;if(z&&parseInt(z.t,10)===mstrmojo.EnumRWUnitType.PANEL){var u=w.parent,x=u.defn;if(x&&x.ifp){return u;}}return null;}var R=mstrmojo.hash,G=2;mstrmojo.DocPortlet=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocPortlet",floatingTitle:false,floatingTitleHeight:30,n:"",buttonWidth:17,markupString:'<div class="mstrmojo-portlet {@borderCss}" nm="{@n}" style="{@portletNodeCssText}"><div class="mstrmojo-portlet-slot-shadow" style="{@shadowNodeCssText}"></div><div class="mstrmojo-portlet-container" style="{@portletContainerNodeCssText}"><div class="mstrmojo-portlet-titlebar {@titlebarNodeClass}" style="{@titlebarNodeCssText}"><table style="height:100%;width:100%" class="mstrmojo-portlet-titlebar-table" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-portlet-slot-toolbar-left {@leftToolbarNodeClass}" style="{@leftToolbarNodeCssText}"></td><td class="mstrmojo-portlet-title" style="{@titleNodeCssText}"><div style="overflow: hidden;"></div></td><td class="mstrmojo-portlet-slot-toolbar {@toolbarNodeClass}" style="{@rightToolbarNodeCssText}"></td></tr></table></div><div class="mstrmojo-portlet-buttonbar {@buttonbarNodeClass}" style="{@buttonbarNodeCssText}"></div><div class="mstrmojo-portlet-slot-content" style="{@contentNodeCssText}"></div></div></div>',rightToolbarNodeCssText:"",leftToolbarNodeCssText:"",titleNodeCssText:"",titlebarNodeClass:"",titlebarNodeCssText:"",contentNodeCssText:"",borderCss:"no-border",buttonbarNodeClass:"",buttonbarNodeCssText:"",markupSlots:{containerNode:function(){return this.domNode.lastChild;},portletNode:function(){return this.domNode;},portletContainerNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.lastChild.childNodes[0];},buttonbarNode:function(){return this.domNode.lastChild.childNodes[1];},toolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[2];},toolbarTitleTextNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[1].firstChild;},leftToolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[0];},contentNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{ontitleChange:function(){P.call(this);},oncountChange:function(){P.call(this);},onfcChange:function(){if(this.fc&&this.content){this.updateContentHeight();}}},formatHandlers:{portletContainerNode:["RW","B","fx","background-color"],shadowNode:["RW","B","fx","background-color"],buttonbarNode:{src:"ttl",props:["background-color"]},titlebarNode:{src:"ttl",props:["F","B","background-color","height","fx","text-align","vertical-align"]},titleNode:{src:"ttl",props:["vertical-align","P","text-decoration"]}},updateServer:true,fc:false,content:null,rightToolbar:null,leftToolbar:null,floatingToolbar:false,_ts:k,getCacheKey:function F(){return this._super()+"-portlet";},getFormats:function M(){var w=this.content,u=w&&w.getFormats();return u&&u[r];},updateContentHeight:function e(AA){var u=this.getFormats(),w=this.content,z=w.dimNode||w.domNode,x=((u.ttl&&parseInt(u.ttl.height,10))||0);if(z){if(!AA){x+=((this.fc||this.isInFilterPanel())?z.offsetHeight:(u.height?parseInt(u.height,10):0));}this.containerNode.style.height=x+o;this.shadowNode.style.height=x+o;}},init:function s(u){this._super(u);var w=this.content;this.n=(u&&u.defn&&u.defn.n)||"";if(w&&w.getFormats()&&!this.getFormats()){this._createFormats();}},preBuildRendering:function B(){var w=this._ts=(this.floatingTitle)?g:k;if(this.isInFilterPanel()){var x=R.clone(this.formatHandlers);x.portletContainerNode=["z-index","height","B","backgroud-color"];x.shadowNode=["z-index","height","B","fx","background-color"];this.formatHandlers=x;}this._super();w.adjustTitleCss(this);var u="display:none;";if(!this.leftToolbar){this.leftToolbarNodeCssText+=u;}if(!this.toolbar){this.toolbarNodeCssText+=u;}var z=mstrmojo._Formattable.getBorderWidths(this);if(z.l||z.t||z.r){this.borderCss="has-border";}},postBuildRendering:function Y(){var x=mstrmojo.dom,AF=this.titleNode,AE=this.onclicktitle;if(this.floatingTitle&&this.titleNode){document.body.appendChild(this.titleNode);var z=mstrmojo.css,AB=this.contentNode,AC=this;if(!this._onhover){this._onhovertt=function(){z.addClass(AC.titleNode,["visible"]);AC._onflt=true;return true;};this._onhoverofftt=function(){z.removeClass(AC.titleNode,["visible"]);AC._onflt=false;return true;};this._onhover=function(){var AG=AC.titleNode;z.addClass(AG,["visible"]);var AH=x.position(AC.contentNode,true);AG.style.top=(AH.y-AG.clientHeight+2)+o;AG.style.left=AH.x+o;return true;};this._onhoveroff=function(){z.removeClass(AC.titleNode,["visible"]);return true;};}x.attachEvent(AB,"mouseover",this._onhover);x.attachEvent(AB,"mouseout",this._onhoveroff);x.attachEvent(AF,"mouseover",this._onhovertt);x.attachEvent(AF,"mouseout",this._onhoverofftt);}if(AF&&AE){x.attachEvent(AF,"click",AE);}if(this._super){this._super();}var AA=this.getFormats();this.set("fc",AA&&!AA.height);if(this.isInFilterPanel()&&!this.isHorizFP()){var u=this.portletContainerNode.style,w=this.shadowNode.style,AD=this.parent;u.width=w.width="99%";u.top=w.top=AD.topStart+o;u.left=w.left=G+o;}else{if(this.isInFilterPanel()&&this.isHorizFP()){G=8;this.portletContainerNode.style.left=this.shadowNode.style.left=parseInt(AA.left,10)+G*this.orgPos+o;}else{if(this.defn.ifp){this.adjustFPHeight2Fit();}}}if(this.buttonbarNode.clientHeight>0){this.buttonbarNode.style.height=this.buttonbarNode.clientHeight*this.model.getZoomFactor()+"px";}},adjustFPHeight2Fit:function(){var x=mstrmojo.dom,u=x.position(this.titleNode),w=x.position(this.contentNode).y-u.y-u.h;this.content.domNode.style.height=parseInt(this.defn.fmts.height,10)-w+"px";},unrender:function E(w){if(this.floatingTitle&&this.titleNode){var z=this.domNode,u=this.titleNode,x=mstrmojo.dom;if(z&&this._onhover){x.detachEvent(z,"mouseover",this._onhover);}if(z&&this._onhoveroff){x.detachEvent(z,"mouseout",this._onhoveroff);}if(u&&this._onhovertt){x.detachEvent(u,"mouseover",this._onhovertt);}if(u&&this._onhoverofftt){x.detachEvent(u,"mouseout",this._onhoverofftt);}if(u){document.body.removeChild(u);}}if(this._super){this._super(w);}},updateStyle:function(x,u){var AA=this.shadowNode.style,z=this.containerNode.style;AA.height=z.height=x;AA.width=z.width=u;},_createFormats:function V(){var AB=this.content&&this.content.getFormats(),z;z=AB.p_fmts={};var u,AA;for(u in Q){AA=Q[u];if(AB[AA]!==undefined){z[AA]=AB[AA];delete AB[AA];}}for(u in X){AA=X[u];if(AB[AA]!==undefined){z[AA]=AB[AA];}}AB.height=this._ts.getContentHeight(AB.height,z);if(mstrmojo.dom.isIE&&z.fx&&z.fx.ds&&!z["background-color"]){z["background-color"]="#ffffff";}var x=z.ttl,w=x&&x["background-color"];if(w){this.titlebarNodeClass=mstrmojo.color.getContrastingColor(w,"light","dark");}},refresh:function t(){if(!this.hasRendered){return ;}var w=this.children,u;for(u=w.length-1;u>=0;u--){w[u].refresh();}},isInFilterPanel:function L(){return(j.call(this)!==null);},isHorizFP:function(){if(this.isInFilterPanel()){var u=this.getFilterPanel();return u&&u.defn&&parseInt(u.defn.fds,10)===2;}return false;},getFilterPanel:function H(){return j.call(this);},getContainerHeight:function d(){return this.containerNode.clientHeight;},relocate:function C(u){if(this.isInFilterPanel()&&!this.isHorizFP()){this.portletContainerNode.style.top=this.shadowNode.style.top=u+o;}},setInfoWindowDimensions:function q(AA){var w=this.domNode.style,u=this.shadowNode.style,x=this.portletContainerNode.style,z=mstrmojo._Formattable.getBorderWidths(this);AA.h-=z.h;AA.w-=z.w;u.height=x.height=w.height=AA.h+o;u.width=x.width=w.width=AA.w+o;AA.h-=this.titleNode.offsetHeight;this.toolbarNode.style.display="none";},addDirtyKey:function K(u){A.call(this,"add",u);},removeDirtyKey:function J(u){A.call(this,"remove",u);},setDirtyChildren:function Z(){var u=this.content;if(u&&u.setDirtyChildren){u.setDirtyChildren.apply(u,arguments);}}});var W=0,O=1,l=2;function N(u){var w=this.content.defn;if(w){w.set("ds",u);}}function p(u){return{FormattingOrder:{ZIndex:this.getFormats()["z-index"]},FormattingView:{WindowState:u}};}function a(AH,AF,u,AI){var AE=this.content,AG=AE.k,AD=mstrmojo.boxmodel.px2Inches,z=AE.model.docModel||AE.model,AK=z.getZoomProps(),AA=this.getFormats(),x=AF!==undefined&&u!==undefined,AJ={},AB=this,AC=p.call(this,AH);if(x){AC.FormattingSize={OldHeight:AD(AK,AF),OldWidth:AD(AK,u),Height:AD(AK,parseInt(AA.height,10)),Width:AD(AK,parseInt(AA.width,10))};}AJ.success=function(w){var AL=w&&w.data;if(AL){z.loadPartialData(AL,AG);}N.call(AB,AH);var AM=AB.parent;if(AM.adjustSectionSize&&x){AM.adjustSectionSize();}};z.updateUnitFormat(AE,1,AC,AJ,{params:{suppressData:true},config:x?null:{silent:true},preserveUndo:true});if(!x&&!(AI&&AI.all)){z.saveRWProps(AG,props,1,this.loadDataOnResize,AJ,true);}}function T(){var AC=this.content;if(!AC){return ;}var AA=function(AG){mstrmojo.array.forEach(AG,function(AH){if(AH.ds!==undefined){AH.set("visible",(AH.ds!==AC.defn.ds));}});},AD;if(this.isInFilterPanel()){var x=(parseInt(this.defn.ds,10)===W);AC.set("visible",x);this.updateContentHeight(!x);AD=this.leftToolbar;AA(AD&&AD.children);var z=this.parent;if(z.refreshFP){z.refreshFP();}}else{var u=AC.getFormats(),AE=this.getFormats(),w=this.portletContainerNode.style,AF=this.shadowNode.style,AB=this.contentNode.firstChild.style;AB.height=u.height;AB.width=u.width;AF.height=w.height=AE.height;AF.width=w.width=AE.width;AF.top=w.top=AE.top;AF.left=w.left=AE.left;if(AE["z-index"]!==undefined){AF.zIndex=w.zIndex=AE["z-index"];}AD=this.rightToolbar;AA(AD&&AD.children);if(AC.resize){AC.resize();}}}mstrmojo.DocResizablePortlet=mstrmojo.declare(mstrmojo.DocPortlet,null,{scriptClass:"mstrmojo.DocResizablePortlet",loadDataOnResize:false,_createFormats:function V(){this._super();var w=this.getFormats();var u=parseInt(this.defn.ds,10);if(u===W){w.normHeight=w.height;w.normWidth=w.width;if(w["z-index"]!==null&&w["z-index"]!==undefined){w.normZIndex=w["z-index"];}}if(u!==l){w.normTop=w.top;w.normLeft=w.left;}},onmaximize:function f(){var z=this.parent,AC=this.content,AB=AC&&AC.getFormats(),x=this.getFormats(),w=x.height,u=x.width,AA=mstrmojo._Formattable.getBorderWidths(this);this.clearCache();AC.clearCache();x.height=(parseInt(z.getHeight(),10)-AA.h)+o;AB.height=this._ts.getContentHeight(x.height,x);x.width=AB.width=(z.getWidth()-AA.w)+o;x.top=x.left=0;x["z-index"]=z.getMaxZIndex()+1;a.call(this,l,w,u);},onminimize:function b(){var AB=this.content,w=AB.dimNode||AB.domNode,AA=AB&&AB.getFormats(),z=this.getFormats(),x=z.height||w.offsetHeight,u=z.width;this.clearCache();AB.clearCache();z.width=AA.width=z.normWidth;z.top=z.normTop;z.left=z.normLeft;if(z.normZIndex!==null&&z.normZIndex!==undefined){z["z-index"]=z.normZIndex;}AA.height=0;z.height=this._ts.getPortletMinHeight(z);a.call(this,O,x,u);},onrestore:function S(){var AA=this.content,z=AA&&AA.getFormats(),x=this.getFormats(),w=x.height,u=x.width;this.clearCache();AA.clearCache();x.height=x.normHeight;z.height=this._ts.getContentHeight(x.height,x);x.width=z.width=x.normWidth;x.top=x.normTop;x.left=x.normLeft;if(x.normZIndex!==null&&x.normZIndex!==undefined){x["z-index"]=x.normZIndex;}a.call(this,W,w,u);},changeWindowState:function I(z){N.call(this,z);var x=this.content,AA=p.call(x,z),u=x.model.docModel||x.model;return u.getUnitFormatAction(x,1,AA);},oncollapse:function U(u){a.call(this,O,undefined,undefined,u);},onexpand:function D(u){a.call(this,W,undefined,undefined,u);},adjustFP:function h(){var w=(parseInt(this.defn.ds,10)===W);this.content.set("visible",w);this.updateContentHeight(!w);var u=this.parent;if(u.refreshFP){u.refreshFP();}},postBuildRendering:function Y(){if(!this._sub_dsChange){this._sub_dsChange=this.defn.attachEventListener("dsChange",this.id,T);}this._super();if(this.isInFilterPanel()){var u=(parseInt(this.defn.ds,10)===W);this.updateContentHeight(!u);}}});mstrmojo.DocPortlet.ST_RESTORE=W;mstrmojo.DocPortlet.ST_MAX=l;mstrmojo.DocPortlet.ST_MIN=O;}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui.ViewSlider","mstrmojo._HasBuilder","mstrmojo._IsRwDocument","mstrmojo.android.ui.LayoutSelector","mstrmojo.Label","mstrmojo.hash","mstrmojo.array","mstrmojo.func","mstrmojo.android.EnumOrientationTypes");mstrmojo.requiresDescs(4174);var j=mstrmojo.array,o=j.forEach,S=mstrmojo.hash,Q=mstrmojo.android.EnumOrientationTypes,K=Q.PORTRAIT,P=Q.LANDSCAPE;function f(AA){return(AA.defn.iw!==undefined&&AA.defn.iw);}function R(AA){return new mstrmojo.Label({cssClass:"pre-loader",n:AA.n,k:AA.k,isPreloader:true});}function g(AC,AA){var AB=this.layoutSelector,AD=this.getSupportedLayouts();if(!AA){AB.set("items",AD);}AB.setCurrentTab(j.find(AD,"k",AC.k));AB.set("visible",!!AA);if(AA){AB.initiateFade();}}function w(AB,AH){var AD=this._layouts,AA=mstrMobileApp.getOrientation(),AC=AD.length-1-AB,AG=false,AE;var AF=AD.slice(AB+1);if(AB){AF=AF.concat(AD.slice(0,AB));}if(!AH){AF.reverse();AC=AB;}o(AF,function(AJ,AI){AG=(AI>=AC);if(((AJ.defn.or&AA)>0)&&!f(AJ)){AE=AJ;return false;}});if(!AE){return null;}return{wrap:AG,layout:AE};}function s(){var AB=this.model.defn.views,AA=(AB&&AB.length)||0,AD;if(AA){var AC=AB[0].orientation;for(AD=1;AD<AA;AD++){if(AC!==AB[AD].orientation){return true;}}}return false;}function e(AK){var AH=this._layouts,AG=this._orientationInfo;if(!AG){AG=this._orientationInfo={};var AL=AG[K]={lyts:[]};var AI=AG[P]={lyts:[]};j.forEach(AH,function(AN){var AP=AN.defn.or,AO=AG[AP];if(!f(AN)&&AO!==undefined){AO.lyts.push(AN.k);}});if(AL.lyts.length||AI.lyts.length){AG.specific=true;}}var AB=AH[j.find(AH,"k",AK)],AD=AB.defn.or,AE=AG[AD],AC=mstrMobileApp.getOrientation(),AF={isSupported:true,currentLayout:AB,specific:!!AG.specific};if(f(AB)||((AD&AC)===0)){AF.isSupported=false;var AJ=AG[AC];if(AE===undefined||AJ===undefined){return AF;}var AM=AJ.lyts[j.indexOf(AE.lyts,AK)];if(AM){AF.newLayout=AH[j.find(AH,"k",AM)];}else{var AA=AJ.last;if(AA){AF.newLayout=AA;}else{j.forEach(AH,function(AN){if(!f(AN)&&(AN.defn.or&AC)>0){AF.newLayout=AN;return false;}});}}AE.last=AB;if(!AF.newLayout){AF.isStale=true;}}else{AF.needNewLayout=s.call(this);}return AF;}function z(AB){var AA=w.call(this,j.find(this._layouts,"k",this.model.getCurrentLayoutKey()),(AB.delta.x<0));return(AA&&!AA.wrap)?AA:null;}function F(){var AB=this.model,AA=AB&&AB.wm;if(AA&&AA.tp===3&&AA.imgSrc){return AA;}return null;}function Y(AE){var AA=document.createElement("img"),AB=AA.style;this.watermarkNode=AA;AB.position="absolute";AB.top=0;AB.left=0;AB.visibility="hidden";var AC=this;AA.onload=function(){var AH=AA.width,AJ=AA.height;if(AE.imgScale<=0){var AG=AC.domNode;if(AG){AA.width=AG.clientWidth;AA.height=AG.clientHeight;}}else{var AI=AE.imgScale/100;AA.width=AH*AI;AA.height=AJ*AI;}AA.style.visibility="visible";};this.domNode.insertBefore(AA,this.domNode.firstChild);var AD=this.model.getDataService();var AF=AE&&AE.imgSrc;AA.src=(AF&&AD&&AD.getDocImage&&AD.getDocImage(AF))||AF;}function h(AA){this.parent.showLayout(AA);}mstrmojo.android.ui.DocumentView=mstrmojo.declare(mstrmojo.android.ui.ViewSlider,[mstrmojo._HasBuilder,mstrmojo._IsRwDocument],{scriptClass:"mstrmojo.android.ui.DocumentView",postBuildRendering:function X(){var AB=this._super(),AA=F.call(this);if(AA){Y.call(this,AA);}return AB;},buildChildren:function d(AA){this._layouts=this._super(true);},beforeViewHidden:function M(AB){this._stale=true;var AA=this.getCurrentLayout();if(AA&&AA.beforeViewHidden){AA.beforeViewHidden(AB);}},getViewController:function H(AA){return null;},unrender:function A(AA){delete this._stale;this._super(AA);},reloadLayout:function I(){var AA=this.getCurrentView(),AC=this.id,AB={layoutKey:AA.k,reload:true,executionOrientation:mstrMobileApp.getOrientation()};this.getNewLayout(AB,this._layouts,true,{success:function(AD){var AE=mstrmojo.all[AC];AE.replaceView(AD,AA,true);AE.resetSliderNodes();}});},rootOrientationChange:function L(){if(this._stale){return ;}var AD=F.call(this);if(AD&&AD.imgScale<=0){var AF=this.watermarkNode;AF.width=parseInt(this.width,10);AF.height=parseInt(this.height,10);}var AM=this.getCurrentView();if(AM.isPreloader){return ;}var AK=this._layouts,AG=AM.k,AC=e.call(this,AG),AH=AC.newLayout;if(AC.isStale){return ;}if(AC.specific){g.call(this,AM);}var AI=!!AC.needNewLayout,AJ=!AI&&(!AC.isSupported&&AH),AB=!AJ&&(this.model.zt&&!AM.isFullScreenWidget);if(AI||AJ||AB){mstrApp.closeAllDialogs();var AA=this.id,AL=this,AE={layoutKey:AG,reload:true,executionOrientation:mstrMobileApp.getOrientation()},AN=function(AO){mstrmojo.all[AA].replaceView(AO,AL.getCurrentView());AL.resetSliderNodes();};if(AJ){AM=this.replaceView(R(AH),AM,true);AE.layoutKey=AH.k;delete AE.reload;AN=mstrmojo.func.composite([function(AO){g.call(mstrmojo.all[AA],AO);},AN]);}this.getNewLayout(AE,AK,true,{success:AN});}this.controller.generateActionToolbar();},onRender:function C(){if(!this.layoutSelector){this.addChildren([{scriptClass:"mstrmojo.android.ui.LayoutSelector",slot:"overlayNode",alias:"layoutSelector",visible:false,tabSelected:h}]);}var AA=this.getCurrentLayout();var AF=e.call(this,this.model.getCurrentLayoutKey()),AB=AF.currentLayout,AD=this,AE=function(AH){if(AH&&!AH.domNode){AD.switchView(AH);}else{AD.stackViews(AH.slot);}return AH;};if(AF.needNewLayout&&this.controller.isBack){AE(AB);var AG={layoutKey:AB.k,reload:true,executionOrientation:mstrMobileApp.getOrientation()};this.getNewLayout(AG,this._layouts,true,{success:function(AH){AD.replaceView(AH,AB);}});}else{if(AF.isSupported){AE(AB);g.call(this,AB);}else{var AC=AF.newLayout;if(AC){AB.defn.loaded=false;AC=AE(this.selectLayout(R(AC),false));this.getNewLayout({layoutKey:AC.k},this._layouts,true,{success:function(AH){g.call(AD,AH);AD.replaceView(AH,AC);}});}else{this._ignoreOrientation=true;AE(AB);}}}},showLayout:function O(AB){var AA=AB.k,AC=this;if(AA!==this.model.getCurrentLayoutKey()){var AD={layoutKey:AA};if(s.call(this)){AD.executionOrientation=mstrMobileApp.getOrientation();AD.reload=true;}this.getNewLayout(AD,this._layouts,true,{success:function(AE){AC.switchView(AE);}});return true;}return false;},afterSwitch:function p(AA){this._super(AA);this.selectLayout(AA,(AA.k!==this.model.getCurrentLayoutKey()));},selectLayout:function l(AA,AB,AD){var AC=this._super(AA,AB,AD);this.controller.getPageByTree(true);if(!AA.defn||!AA.defn.iw){g.call(this,AC,true);}return AC;},replaceLayout:function D(AC,AB){var AD=this._layouts||[],AA=j.find(AD,"k",AC.k);if(AA>=0){AC.unrender();AC.destroy();}var AE=this.builder.build([AB],this.model)[0];if(AA>=0){AD[AA]=AE;}else{AD.push(AE);}this._layouts=AD;return AE;},onLayoutRebuilt:function W(AA){this.replaceView(AA,this.getCurrentView());},canScroll:function T(AA){return !!z.call(this,AA);},beginScroll:function Z(AD,AG){if(this.isAnimating()){return false;}delete this._scrollInfo;if(!AG){var AH=this._layouts,AI=z.call(this,AD),AA=this.id;if(!AI){return ;}AG=AI.layout;var AB=mstrMobileApp.getOrientation(),AF=AG.docLayout,AE=s.call(this)||(this.model.zt&&AF&&AB!==AF.defn.lastOrientation);if(!AG.defn.loaded||AE){AG=R(AG);var AC={layoutKey:AG.k};if(AE){AC.executionOrientation=AB;AC.reload=true;}this.getNewLayout(AC,AH,false,{success:function(AK){var AJ=mstrmojo.all[AA],AL=AJ._scrollInfo;if(AL){AL.view=AK;}AJ.replaceView(AK,AG);}});}}if(AG){this._super(AD,AG);}},scrollStarted:function G(){var AA=this.layoutSelector;AA.set("visible",true);AA.enterScroll();},scrollProgress:function k(AA,AB){this.layoutSelector.scroll(AB);},scrollStopped:function x(AC,AD){var AB=this.layoutSelector,AA=AB.selectedIndex;if(AD){AA+=(AC.isForward?1:-1);}AB.exitScroll(AA);},scrollCanceled:function q(AB){this._super(AB);var AA=AB.oldView;this.model.getDataService().setCurrentDocLayout(AA.k);this.selectLayout(AA,false);this.layoutSelector.initiateFade();},scrollComplete:function a(AB){this._super(AB);var AA=AB.newView;this.selectLayout(AA,(AA.k!==this.model.getCurrentLayoutKey()));this.controller.generateActionToolbar();},renderInfoWindow:function V(AB){AB.autoCloses=AB.locksHover=false;if(mstrApp.isTablet()){this._super(AB);return ;}var AC=this.controller,AJ=AC.rootCtrl,AI=AJ.getTitle(),AF=function(AK){AJ.updateContent(null,AK);},AD=false;this.fullScreenInfoWindow=true;AC.generateActionToolbar();var AA=this.id;mstrApp.showDialog({cssClass:"FSInfoWindow",children:AB,resizeDialog:function AH(){var AP=mstrApp.rootView,AO=AP.getContentDimensions(),AN=this.editorNode&&this.editorNode.style,AL=this.children[0],AK=AL&&AL.infoNode;if(AN){AN.top=(parseInt(AP.getBrowserDimensions().h,10)-AO.h+3)+"px";AN.left="5px";}if(AK){var AM=AK.style;AM.height=AO.h+"px";AM.width=AO.w+"px";mstrmojo.all[AL.psId].setInfoWindowDimensions(AO);}},onClose:function AG(){AF(AI);delete mstrmojo.all[AA].fullScreenInfoWindow;AC.generateActionToolbar();if(AD){mstrMobileApp.releaseOrientation();}var AK=this.children[0];AK.model.raiseEvent({name:"infoWindowClosed",psKey:AK.psKey});if(AK&&AK.clearAnchorHilites){AK.clearAnchorHilites();}},positionDialog:mstrmojo.emptyFn});var AE=AB.children[0];AF(AE.getTitle());if(mstrMobileApp.getLockedOrientation()===0){mstrMobileApp.lockOrientation(mstrMobileApp.getOrientation());AD=true;}AE.attachEventListener("titleChange",this.id,function(AK){AF(AK.value);});},updateInfoWindowPS:function b(AA,AB){if(!mstrApp.isTablet()){mstrmojo.all[AA].setInfoWindowDimensions(mstrApp.getContentDimensions());}},destroy:function t(AA){o(this._layouts,function(AB){AB.destroy(AA);});this.builder.destroy();this._super(AA);},getLayouts:function(){return this._layouts;},getSelectedLayoutWidget:function B(){return this.getCurrentView();},getNewLayout:function J(AE,AD,AB,AF){var AA=this.controller,AC;if(AA&&AA.getDesiredElements){AC=AA.getDesiredElements();if(AC){AE.desiredElements=AC;}}AF.success=mstrmojo.func.composite([AF.success,function(){AA.generateActionToolbar();}]);S.forEach(this.ifwMap,function(AG){if(AG.visible){AG.close();}});return this._super(AE,AD,AB,AF);},unloadLayouts:function r(AJ,AA){var AI=this._layouts,AE=this.model.getCurrentLayoutKey(),AF,AB=(AI&&AI.length)||0,AD,AC,AH,AG;for(AF=0;AF<AB;AF++){AD=AI[AF];AH=AD.defn;if(AD.k!==AE&&AH&&AH.loaded){if(AA){AC=(AD.gb&&AD.gb.groupbys);if(AC&&AC.length){AH.loaded=false;}}else{if(AJ){for(AG=0;AG<AJ.length;AG++){if(AD.k===AJ[AG]){AH.loaded=false;break;}}}else{AH.loaded=false;}}}}},getSupportedLayouts:function N(){var AB=[],AA=mstrMobileApp.getOrientation();o(this._layouts,function(AC){if(((AC.defn.or&AA)>0)&&(!f(AC))){AB.push(AC);}});return AB;},getCurrentLayout:function u(){var AA=this._layouts;return AA[j.find(AA,"k",this.model.getCurrentLayoutKey())];},getCaptureDimensions:function U(){var AA=this.getCurrentLayout();return AA.getCaptureDimensions&&AA.getCaptureDimensions();},closeInfoWindowsOnTablet:function E(){if(mstrApp.isTablet()){S.forEach(this.ifwMap,function(AA){if(AA.visible){AA.closeOnTablet();}});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.DateTimePicker","mstrmojo.ui.MobileStepper","mstrmojo._TouchGestures");var A="mstrmojo.ui.MobileStepper";mstrmojo.ui.MobileDateTimePicker=mstrmojo.declare(mstrmojo.DateTimePicker,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.ui.MobileDateTimePicker",stepperClass:"mstrmojo.ui.MobileStepper",onclick:function(B){this.touchTap(B.e);},touchTap:function(B){if(B.target===this.meridiemNode){this.set("meridiem",!this.meridiem);this.updateTime();}},touchBegin:function(B){if(B.target===this.meridiemNode){mstrmojo.css.addClass(B.target,"glow");}},touchEnd:function(B){if(B.target===this.meridiemNode){mstrmojo.css.removeClass(B.target,"glow");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextArea","mstrmojo._IsInputControl","mstrmojo.android._HasPreviewButton","mstrmojo.dom","mstrmojo.css");var C=mstrmojo.dom,Q=mstrmojo.css,E=5,K=6,R=1,I=7,N=30;function A(V){if(V.style){var U=mstrmojo.css.getStyleValue(V,C.CSS3_TRANSFORM);if(U!=="none"){V.style[C.CSS3_TRANSFORM]=U;}}}function J(W){var V,U=W.childNodes.length;for(V=0;V<U;V++){var X=W.childNodes[V];J(X);A(X);}}mstrmojo.android.inputControls.TextAreaDIC=mstrmojo.declare(mstrmojo.TextArea,[mstrmojo._IsInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.TextAreaDIC",cssDisplay:"block",init:function O(U){this._super(U);this.maxLength=this.dic.ml;if(!this.showByDefault){this.cssClass="mstrmojo-TextAreaDIC-Popup";this.rows=7;}},focus:function M(){C.setCaret(this.domNode,(this.value!=null&&String(this.value).length)||0);},onfocus:function T(){window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},onvalueChange:function L(){if(!this.showByDefault){this._super();}},onblur:function B(){if(this.showByDefault){this.applyChanges();}},applyChanges:function F(){if(!!this.domNode){this.domNode.blur();}var U=parseInt(this.dic.dt,10);if((U>=R&&U<=I)||U===N){this.value=parseFloat(this.value);}this._super();},cancelChanges:function G(){this.domNode.blur();this._super();},postBuildRendering:function S(){this._super();if(this.showByDefault){this.domNode.style.width="100%";this.domNode.style.height="100%";if(!mstrApp.isTablet()){C.attachEvent(this.domNode,"click",function(){J(document.body);},false);}var U=this;C.attachEvent(this.domNode,"blur",function(){var V=U.domNode;while(V!=null){if(V.scrollTop>0){V.scrollTop=0;break;}V=V.parentNode;}},false);}},renderPreview:function P(){var V=this.dic,U=(this.dv==null)?"":String(this.dv);if(!this.dicChanged){if(!U||!V.sp){U=V.siwc?"&nbsp;":(U||"&nbsp;");}else{U=this._getPreviewValue();}this.dv=U;}this.renderPreviewButton(this.openerNode,this.dv);Q.toggleClass(this.openerNode.firstChild,"filled",!this.dicChanged&&this.value!=null&&String(this.value).length>0);},getDisplayValue:function D(){var W=this.dic,U=this.value,V=(U==null)?"":String(U);if(!V||!W.sp){V=W.siwc?"&nbsp;":(mstrmojo.string.encodeHtmlString(V)||"&nbsp;");}else{V=this._getPreviewValue();}return V;},_getPreviewValue:function H(){var b=this.dic,a=this.value,U=(a==null)?"":String(a),X="",d=/(.*href=['"])(.*)(['"].*>)(.*)(<.*)/i,Z='<a href="mailto:"></a>';var Y=a.length>b.pl;a=Y?a.substring(0,b.pl):a;switch(this.ts){case K:X="mailto:";case E:var V=mstrmojo.string.encodeHtmlString(this.value.replace(/\$/g,"$$$$")),W=mstrmojo.string.encodeHtmlString(a.replace(/\$/g,"$$$$"));W=Y?W+"&hellip;":W;U=Z.replace(d,"$1"+X+V+"$3"+W+"$5");break;default:if(!this.dicChanged){U=this.dv;}if(U.length>b.pl){U=this.dicChanged?mstrmojo.string.encodeHtmlString(U.substring(0,b.pl))+"&hellip;":U.substring(0,b.pl)+"&hellip;";}else{U=this.dicChanged?mstrmojo.string.encodeHtmlString(U):U;}}return U;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.android.ui.Label","mstrmojo.android.ui.Menu","mstrmojo.android.ui.SearchBox","mstrmojo.android.ui.Image","mstrmojo.mstr.WebElements","mstrmojo.dom","mstrmojo.css");mstrmojo.requiresDescs(10,9462,9463);var D=mstrmojo.dom,F=mstrmojo.css,E=D.CSS3_TRANSITION_END;var B=[{n:mstrmojo.desc(9462,"View All"),idx:1,v:true},{n:mstrmojo.desc(9463,"View Selected"),idx:0,v:false}];function C(){if(this.searchRequired){if(!this.target.getSelectedItems().length){return false;}}return true;}function A(){var S=this.lbl,V=S.domNode,L=V.style,N=this.searchNode.style,M=this.search.box,K=M.inputNode,T=K.style,Q=this.target,R="visible";var P=this._isSearch=!!S.visible;if(P){Q.enterSearchMode();var O=F.getComputedStyle(M.inputNode),J=this.domNode.offsetWidth-(2*parseInt(O.marginRight,10))-parseInt(O.paddingLeft,10)-parseInt(O.paddingRight,10)-this.search.slot0.offsetWidth,U=this.browseElements;D.attachOneTimeEvent(V,E,function(){S.set(R,false);N.width="100%";M.set("hint",(U&&U.source.n)||mstrmojo.desc(10,"Search"));M.set(R,true);window.setTimeout(function(){T.width=J+"px";},0);});L.opacity=0;}else{if(!C.call(this)){return ;}Q.exitSearchMode(!this.searchRequired);D.attachOneTimeEvent(K,E,function(){M.set(R,false);M.set("value","");N.width="";S.set(R,true);window.setTimeout(function(){L.opacity=1;},0);});M.inputNode.style.width=0;}}mstrmojo.android.ui.ElementsSearchBar=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.android.ui.ElementsSearchBar",markupString:'<div id="{@id}" class="mstrmojo-ElementSearchBar {@cssClass}" style="{@cssText}" ><div><div class="mstrmojo-ElementSearchBar-switch"></div><div class="mstrmojo-ElementSearchBar-search"></div></div></div>',markupSlots:{switchNode:function(){return this.domNode.firstChild.firstChild;},searchNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{oncanSearchChange:function(){this.search.btn.set("visible",!!this.canSearch);}},target:null,browseElements:null,searchRequired:false,children:[{scriptClass:"mstrmojo.android.ui.Menu",slot:"switchNode",alias:"menu",visible:false,items:[B[1]],postselectionChange:function(J){var L=J.added,M=L&&this.items[L[0]];if(M){var K=this.parent;K.lbl.set("text",M.n);this.set("visible",false);this.set("items",[B[M.idx]]);K.target.set("viewAll",M.v);}}},{scriptClass:"mstrmojo.HBox",alias:"search",slot:"searchNode",children:[{scriptClass:"mstrmojo.android.ui.Image",alias:"btn",touchTap:function(){A.call(this.parent.parent);}},{scriptClass:"mstrmojo.android.ui.SearchBox",alias:"box",hint:mstrmojo.desc(10,"Search"),cssDisplay:"block",cssText:"width:0;",visible:false,searchFunc:function(M){if(M){var O=this.parent.parent,L=O.browseElements,K=(L&&L.duplicate())||new mstrmojo.mstr.WebElements(),J=K.browseConfig||{},N=this.id;J.searchPattern=M;J.blockBegin=1;J.searchForms=this.searchForms;if(O.searchTarget){J.searchTarget=O.searchTarget;delete O.searchTarget;}K.browseConfig=J;K.getItems(0,{success:function(){mstrmojo.all[N].set("searchResult",K);}});}else{this.clearSearch();}},clearFunc:function(){this.parent.parent.target.clearSearch();},onsearchResultChange:function(){this.parent.parent.target.search(this.searchResult);}}]}],init:function H(J){this._super(J);var K={scriptClass:"mstrmojo.android.ui.Label",slot:"switchNode",alias:"lbl"};if(J.searchRequired){K.text=J.title;K.cssClass="mstrmojo-no-Image";}else{K.text=mstrmojo.desc(9462,"View All");K.touchTap=function(){var M=this.parent.menu,L=!M.visible;if(L){M.set("width",this.domNode.offsetWidth+"px");}M.set("visible",L);};}this.addChildren(K);},onRender:function I(){var J=this.initSearchValue,K=this.id;if(J||this.searchRequired){delete this.initSearchValue;window.setTimeout(function(){var M=mstrmojo.all[K];A.call(M);var L=M.search.box;L.set("value",J||"");if(J){L.onEnter();}},0);}return this._super();},goBack:function G(){if(this._isSearch){if(C.call(this)){A.call(this);return true;}}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.LegacySuggestionList","mstrmojo.ui._HasScroller");var C=mstrmojo.dom;mstrmojo.ui.ScrollableSuggestionList=mstrmojo.declare(mstrmojo.LegacySuggestionList,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-scrollable-suggestlist {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function B(){return this.domNode.firstChild.firstChild;},scrollboxNode:function E(){return this.domNode.firstChild;},scrollNode:function H(){return this.domNode.firstChild;}},onclick:function A(I){var J=this.getItemFromTarget(I.getTarget());if(J){this._super(I);}},onitemsChange:function D(){var I=this;window.setTimeout(function(){I.hideTooltip();I.updateScrollbars();},0);},updateScrollbars:function F(){this._super();var K=this,M=K.scrollNode,I=M.clientWidth,L=K.itemsContainerNode,J=L.clientWidth;L.style.width="auto";window.setTimeout(function(){if(I>J){L.style.width=J+(I-J)+"px";}},10);},useRichTooltip:true,getItemTooltip:function(L,M){var J=C.position(M),K=M.ttp;var I={areaId:L._renderIdx+"text",cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:"",content:K,top:J.y,left:J.x+J.w+6,enableHover:false};return I;},showTooltip:function G(I,L){var K=this.targetEl,J=this.targetItem;if(K&&K.ttp){this.richTooltip=this.getItemTooltip(J,K);if(this.richTooltip){this._super(I,L);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxBase");mstrmojo.ButtonItemRenderer=mstrmojo.hash.copy(mstrmojo.DivItemRenderer);mstrmojo.ButtonItemRenderer.render=function(D,A,E){var B=D.v!=="u;"?" nAll":"",C=(E.enabled===false);return'<input mstridx="'+A+'" class="'+E.itemCssClass+(E.selectedIndices[A]?" "+E.itemSelectedCssClass:"")+" "+(D.css||"")+B+'" style="'+E.itemCssText+'" type="button"  value="'+D[E.itemDisplayField]+'" '+(C?"disabled ":"")+"/>";};mstrmojo._RendersItemButtons=mstrmojo.hash.copy(mstrmojo._RendersItemDivs);mstrmojo._RendersItemButtons.itemRenderer=mstrmojo.ButtonItemRenderer;mstrmojo.ButtonList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonList",cssClass:"mstrmojo-ButtonList",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});mstrmojo.requiresCls("mstrmojo.ListBoxHoriz");mstrmojo.ButtonListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonListHoriz",cssClass:"mstrmojo-ButtonListHoriz",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxHoriz");var A={render:function(F,B,G){var H=(G.htmlName+B),D=G.selectedIndices[B]?"checked ":"",E=D?" selected":"",C=F.v!=="u;"?" nAll":"";return'<div class="'+G.itemCssClass+E+C+'"><input type="'+G.inputType+'" name="'+G.htmlName+'" id="'+H+'" value="'+B+'" '+D+'/><label for="'+H+'" title="'+(F[G.itemTitleField]||"")+'" style="'+G.labelCssText+'">'+F[G.itemDisplayField||"n"]+"</label></div>";},select:function(D,E,B,F){var C=D&&D.firstChild;if(C&&!C.checked){C.checked=true;}mstrmojo.css.toggleClass(D,"selected",C.checked);},unselect:function(D,E,B,F){var C=D&&D.firstChild;if(C&&C.checked){C.checked=false;}mstrmojo.css.toggleClass(D,"selected",C.checked);},rowHeight:23};mstrmojo._RendersInputItems=mstrmojo.provide("mstrmojo._RendersInputItems",{inputType:null,htmlName:null,itemRenderer:A,init:function(B){this._super(B);if(!this.htmlName){this.htmlName=this.id;}},preclick:function(E){var D=E.hWin,G=E.e,F=mstrmojo.dom.eventTarget(D,G);if(F&&F.nodeName.match(/input/i)){var C=parseInt(F.value,10);if(this.inputType&&this.inputType.match(/radio/i)){this.singleSelect(C);}else{var B=(F.checked)?"add":"remove";this[B+"Select"](C);}}}});mstrmojo._InputList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputList"});mstrmojo._InputListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputListHoriz"});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo.array","mstrmojo.android.EnumMenuOptions","mstrmojo.android.ui.ActionToolbar");mstrmojo.requiresDescs(1,1143,7831);var X=mstrmojo.android.EnumMenuOptions,I=mstrmojo.hash,a=mstrmojo.array.forEach,h=X.SETTINGS,J=X.HELP,Y=X.LEARN,F=-1;var e={currentViewMedia:0,documentID:"objectID",elementsPromptAnswers:0,link:0,linkAnswers:0,objectID:0,objectsPromptAnswers:0,promptsAnswerXML:0,reportID:0,reportViewMode:0,valuePromptAnswers:0,visMode:0,desiredElements:0,desiredUnits:0,projectID:0,Project:"projectID",groupByElements:0,pageByElements:0,layoutIndex:0,originMessageID:"originMessageID",promptAnswerMode:0,selectorMode:"selectorMode"};mstrmojo.android.controllers.ViewController=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.android.controllers.ViewController",supportsFullScreen:false,start:function P(p){this.set("orientation",mstrApp.isLandscape()?0:1);this.pid=mstrApp.getCurrentProjectId();},detach:function o(){var r=this,s=r.nextController,q=r.prevController;if(q){delete q.nextController;}if(s){s.destroy();}this.nextController=this.prevController=null;var p=this.view;if(p){p.destroy();}},destroy:function j(){this.detach();this._super();},canDetach:function O(p){return p.hsc||!this.hsc;},getUpStatus:function L(){return !this.hsc;},spawn:function G(q,p){var r=this.nextController;if(r){if(!r.canDetach(q)){r.spawn(q,p);return ;}r.destroy();}this.nextController=q;q.prevController=this;q.rootCtrl=this.rootCtrl||this;q.start(p||{});},spawnFailed:function T(p){this.makeCurrent();mstrApp.onerror(p);},viewFailed:function U(q){if(q){mstrmojo.dbg("details: "+JSON.stringify(q));}mstrApp.hideMessage();if(this.view){if(this.rootCtrl.getCurrent()!==this){this.makeCurrent(true);}}else{var p=this.prevController;if(p){p.spawnFailed(q);}}mstrApp.onerror(q);},makeCurrent:function W(AB){var p=this.nextController,z=true;if(p){z=!p.doNotRefresh;p.destroy();}if(!this.supportsFullScreen){this.rootCtrl.exitFullScreen();}var u=this.pid;if(u){mstrApp.setCurrentProjectId(u);}if(AB){if(mstrApp.useBinaryFormat&&mstrApp.getCurrentProjectId()){var x=this.ctrlType;if(x){var t=this.model,s=mstrmojo.emptyFn,AA=s,w=this;if(this.checkCache&&z){AA=function(){setTimeout(function(){w.checkCache(null,null,null,1);},100);};}var q={taskId:"setCurrentView",st:x,did:this.did||"",mid:(t&&t.dataService&&t.dataService.msgId)||""},r=t&&t.currlaykey;if(r){q.layoutKey=r;}mstrApp.serverRequest(q,{success:AA,failure:s},{silent:true});}}}},makeHome:function M(){this.makeCurrent(true);},jumpTo:function l(p){var q=this.nextController;if(q){q.jumpTo(p);return ;}this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(p.st),p),p);},getPath:function H(){var p=this.nextController;if(p){return p.getPath();}return[];},updateItemProperties:function A(t,q,p,s){var r=this.nextController;if(r){r.updateItemProperties(t,q,p,s);}},onorientationChange:function N(){var q=this.orientation,p=this.view;if(p&&p.hasRendered&&p.rootOrientationChange){p.rootOrientationChange({isLandscape:!q});}var r=this.nextController;if(r){r.set("orientation",q);}},getCurrent:function k(){var p=this.nextController;if(p){return p.getCurrent();}return this;},goBack:function E(){var p=this.nextController;if(p){if(!p.goBack()){if(!this.rootCtrl){return false;}this.makeCurrent(true);}return true;}return false;},goUp:function S(){var p=this.nextController;if(p){return p.goUp();}return false;},getController:function Q(r,s,q){var p=this[(q?"next":"prev")+"Controller"];if(p){if(p[r]===s){return p;}return p.getController(r,s,q);}return null;},newView:function d(p,q){return mstrApp.viewFactory.newView(p,mstrmojo.hash.copy(q,{controller:this}));},getViewKey:function C(p){return{1:"Projects",2:"Home",3:"Subscriptions",4:"Settings",5:"Projects",6:"Help",8:"Subscriptions",768:"Xtab",769:"Graph",774:"Xtab",2048:"Folder",14081:"Document"}[p];},getDefaultMenus:function g(){return F;},generateActionToolbar:function K(){var p=this.rootCtrl||this,q=p.getCurrent();p.setActionToolbar(q.id,q.updateActionToolbar(mstrmojo.android.ui.ActionToolbar.newToolbarConfig()));},updateActionToolbar:function f(q){var r=this.getDefaultMenus(),p=mstrApp.getConfiguration();if(p.isMenuAllowed(Y,r)){q.addMenuItem(Y,mstrmojo.desc(9849,"Learn More"),Y,true,6);}if(p.isMenuAllowed(h,r)){q.addMenuItem(h,mstrmojo.desc(7831,"Settings"),h,true,6);}if(p.isMenuAllowed(J,r)){q.addMenuItem(J,mstrmojo.desc(1143,"Help"),J,false,9);}if(!mstrApp.isTablet()){q.maxBtnCount=(mstrApp.isLandscape())?Math.round(mstrMobileApp.getDeviceDPI()/105)+1:2;}return q;},handleMenuItem:function b(q,p){switch(q){case h:this.spawn(mstrApp.controllerFactory.newController("Settings"));break;case Y:mstrMobileApp.displayLearnMore();break;case J:mstrApp.displayHelp();break;}return false;},beforeViewVisible:mstrmojo.emptyFn,afterViewVisible:function R(){var p=this;window.setTimeout(function(){p.generateActionToolbar();},100);},beforeViewHidden:mstrmojo.emptyFn,afterViewHidden:mstrmojo.emptyFn,handleSpecialLink:function V(r){var q=r.queryKey.evt,p;if(q==="3999"){this.spawn(mstrApp.controllerFactory.newController("Settings",{}),{});}else{if(q==="3124"){mstrApp.goBack();p=true;}else{if(q==="3994"){mstrApp.displayHelp();}else{if(q==="3997"){mstrApp.rootController.jumpTo({act:8});}else{if(q==="3995"){mstrApp.rootController.goHome();p=true;}else{if(q==="3996"){mstrApp.rootController.jumpTo({act:5});p=true;}}}}}}if(p){window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);}},getDepth:function B(){var p=this.prevController;return(p&&(p.getDepth()+1))||1;},onLink:function D(r,s){var t=this.buildLinkParams(s);t.action="linkToObject";var q=false,p=768;switch(parseInt(s.evt,10)){case 4001:if(parseInt(s.reportViewMode,10)===2){p=769;}t.styleName="AndroidMessageResultStyle";break;case 32001:q=true;break;case 2048001:p=14081;break;}t.st=p;this.spawn(mstrApp.controllerFactory.newController(q?"HTMLDoc":this.getViewKey(p),{st:p}),t);},buildLinkParams:function Z(q){var r={};I.forEach(q,function(t,z){var w=e[z];if(z==="Project"){var u=mstrApp.getConfiguration(),AB=q.Server,s=q.port||q.Port,AA;if(AB===undefined){var x=u.getServerByProjectId(mstrApp.getCurrentProjectId());if(x!==undefined){a(x.pl,function(AC){if(t===AC.pn){if((s===undefined)||(!!s&&parseInt(s,10)===AC.sp)){AA=AC;return false;}}});}}else{AA=u.getProjectByServerAndProjectName(AB,s,t);}if(AA!==undefined){r[w]=AA.pid;}}else{if(w!==undefined){r[w||z]=t;}}});if(mstrApp.useBinaryFormat){r.srcMsgId=q.srcMsgId;}var p=q.linkInfo;if(p&&p.so>0){r.selectorMode=p.so;r.originMessageID=q.srcMsgId;if(!q.linkAnswers){r.promptAnswerMode="0";}}return r;},exitFullScreen:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.android.ui._CanBeFullScreen","mstrmojo.android.ui.ActionToolbar","mstrmojo.android.ui.TitleLabel","mstrmojo.android.ui.Image","mstrmojo.hash","mstrmojo.array","mstrmojo.css");var D=mstrmojo.hash,J=mstrmojo.array,L=mstrmojo.css;var F=mstrmojo.android.ui.ActionBar=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.android.ui._CanBeFullScreen],{scriptClass:"mstrmojo.android.ui.ActionBar",markupString:'<div id="{@id}" class="mstrmojo-ActionBar {@cssClass}" style="{@cssText}" ><div><div class="mstrmojo-ActionBar-logo"></div><div><div class="mstrmojo-ActionBar-contents"></div></div><div class="mstrmojo-ActionBar-toolbar"></div></div></div>',markupSlots:{logoNode:function(){return this.domNode.firstChild.firstChild;},containerNodeWrapper:function(){return this.domNode.firstChild.childNodes[1];},containerNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},toolbarNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},layoutConfig:{h:{logoNode:"56px",containerNodeWrapper:"56px",containerNode:"56px",toolbarNode:"56px"},w:{logoNode:"66px",containerNodeWrapper:"100%",containerNode:"100%",toolbarNode:"auto"}},children:[{scriptClass:"mstrmojo.android.ui.Image",slot:"logoNode",alias:"logo",onactiveChange:function(){L.toggleClass(this.domNode,"active",this.active);},touchTap:function(){mstrApp.closeAllDialogs();if(this.active){var O=this.domNode,N="selected";L.addClass(O,N);this.parent.controller.goUp();window.setTimeout(function(){L.removeClass(O,N);},500);}}},{scriptClass:"mstrmojo.android.ui.TitleLabel",slot:"containerNode",alias:"title",onlistSelectionMade:function(N){this.parent.controller.jumpTo(N.item);}},{scriptClass:"mstrmojo.android.ui.ActionToolbar",slot:"toolbarNode",alias:"toolbar"}],reset:function H(){this.title.reset();this.toolbar.reset();},setUpStatus:function K(N){this.logo.set("active",N);},setNavigation:mstrmojo.emptyFn,clearNavigation:mstrmojo.emptyFn,restoreNavigation:mstrmojo.emptyFn,selectNavigationItem:function E(O){var P=this.getNavList(),N=false;J.forEach(P&&P.items,function(R,Q){if(O.act===R.act){P.singleSelect(Q);N=true;return false;}});return N;},getNavList:mstrmojo.emptyFn,hasNavigationItems:function A(){return this.getNavList().items.length>0;},setLastOpened:function C(N){this.title.setListItems(N);},updateTitle:function I(N){this.title.setText(N);},updateToolbar:function M(O,N){this.toolbar.setActions(O,N);this.title.checkTextFit();},setActionToolbarStatus:function B(N){this.toolbar.set("active",N);},onEnterFullScreen:function G(){this.reset();}});F.adjustLayoutConfig=function(P,N){var O=mstrmojo.DPIManager;D.forEach(F.prototype.layoutConfig.h,function(R,S){O.registerClass(F,"h",S,P);});var Q=D.copy(P);if(N){D.forEach(Q,function(S,R){Q[R]=Math.ceil(S*1.333);});}O.registerClass(F,"w","logoNode",Q);};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.android.nativedialog.ListDialog");var D=mstrmojo.array;function A(E){var F=[];D.forEach(E,function(H,G){F[G]={n:H.n};});return F;}mstrmojo.android.nativedialog.LayoutDialog=mstrmojo.declare(mstrmojo.android.nativedialog.ListDialog,null,{scriptClass:"mstrmojo.android.nativedialog.LayoutDialog",populateConfig:function B(){this._super();this.config.items=A(this.config.items);},update:function C(E,F){this.config.items=A(E);this.config.selectedIndex=F<0?0:F;mstrMobileApp.updateDialog(JSON.stringify(this.config));}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.ListDialog");var A=mstrmojo.android.nativedialog.ListDialog.CHOICE_MODES;mstrmojo.android.nativedialog.TwoLevelPageByDialog=mstrmojo.declare(mstrmojo.android.nativedialog.ListDialog,null,{scriptClass:"mstrmojo.android.nativedialog.TwoLevelPageByDialog",type:2,choiceMode:A.NONE,update:function C(D){this.config.items=D;mstrMobileApp.updateDialog(JSON.stringify(this.config));},getItem:function B(E,D){return this.config.items[E].items[D];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._TouchGestures","mstrmojo.android.ui.Button","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.android.nativedialog.ListDialog");mstrmojo.requiresDescs(221);var D=mstrmojo.css,C=mstrmojo.android.ui.Button.newButton,H=mstrmojo.hash;mstrmojo.android.DropDownList=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.DropDownList",cssDisplay:"block",markupString:'<div id="{@id}" class="mstrmojo-AndroidDropDownList {@cssClass}" mstrAttach:click><div>{@value}</div></div>',markupSlots:{valueNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onvalueChange:function(){var L=this.value,J=this.options;if(J){var I=mstrmojo.array.find(J,"v",L),K=J[I];this.valueNode.innerHTML=K.n;if(L!=="-1"&&J[0].v==="-1"){J.shift();I--;}this.idx=I;}}},options:null,value:"",name:"",idx:0,singleSelectByField:function G(I){this.set("value",I);},touchTap:function F(){var L=this.id,J=this.domNode,K=mstrApp,I={autoClose:true,title:this.name,fadeOnClose:false,cssClass:"dropDownList",onClose:function(){D.removeClass(J,"down");},children:[{scriptClass:"mstrmojo.ui.MobileCheckList",items:this.options,multiSelect:false,isElastic:true,selectedIndex:this.idx,hasEvenRows:true,postselectionChange:function(M){mstrApp.closeDialog();mstrmojo.all[L].set("idx",M.added[0]);}}],buttons:[C(mstrmojo.desc(221,"Cancel"),function(){mstrApp.closeDialog();})]};if(mstrApp.useBinaryFormat){H.copy({isNative:true,scriptClass:"mstrmojo.android.nativedialog.ListDialog",onSelectionChange:function(M){mstrmojo.all[L].set("idx",M);this.close();}},I);}K.showDialog(I);D.addClass(J,"down");},touchSelect:function A(){this.touchTap();},onidxChange:function E(){var I=this.options;if(I){this.set("value",I[this.idx].v);}},preBuildRendering:function B(){this._super();var I=this.options;if(I){this.value=I[this.idx].v;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.EditTextDialog","mstrmojo.android.nativedialog.ListDialog","mstrmojo.android.nativedialog.SliderDialog","mstrmojo.android.nativedialog.TimePickerDialog","mstrmojo.android.nativedialog.DatePickerDialog","mstrmojo.android.nativedialog.DateTimePickerDialog","mstrmojo.array","mstrmojo.num","mstrmojo.string");var TEXTFIELD=1,LIST=3,SLIDER=4,CALENDAR=5,TIMEPICKER=6,TEXTAREA=8,$ARR=mstrmojo.array;function getTextValidator(dic){var validator={type:dic.vm};$ARR.forEach(["emin","emax","ml","mnl","rgx","dt"],function(prop){if(!!dic[prop]){if(prop=="emin"||prop=="emax"){prop=(prop=="emin")?"min":"max";}validator[prop]=dic[prop];}});if(dic.req||dic.emin){validator.req=true;}return validator;}function setListOnSelectionChange(config){var dicWidget=config.widget;config.onSelectionChange=function(index){dicWidget.set("value",dicWidget.items[index].v);dicWidget.applyChanges();this.close();};delete config.buttons;}function setPositiveButtonOnClick(config,preApplyChanges){var dicWidget=config.widget;getPositiveButton(config).onclick=function(value){preApplyChanges(value);dicWidget.applyChanges();};}function getCalendarPreApplyChanges(dicWidget){var preApplyChanges=function(value){var newDate=eval("("+value+")");if(dicWidget.dic.ict){dicWidget.updateDateAndTime(newDate);}else{dicWidget.updateDate(newDate.date);}};return preApplyChanges;}function getPositiveButton(config){return config.buttons[1];}function getNegativeButton(config){return config.buttons[0];}mstrmojo.android.nativedialog.DICDialogFactory=mstrmojo.provide("mstrmojo.android.nativedialog.DICDialogFactory",{createDICDialog:function createDICDialog(config){var clazz,dicWidget=config.widget,dic=dicWidget.dic,preApplyChanges=function(value){dicWidget.set("value",value);};config.children=[dicWidget];delete getNegativeButton(config).onclick;switch(dic.t){case TEXTFIELD:case TEXTAREA:preApplyChanges=function(value){dicWidget.set("value",mstrmojo.string.decodeHtmlString(value));};config.validator=getTextValidator(dic);clazz=mstrmojo.android.nativedialog.EditTextDialog;break;case LIST:setListOnSelectionChange(config);dicWidget.items=dicWidget._items;dicWidget.selectedIndex=$ARR.find(dicWidget.items,"v",dicWidget.value);clazz=mstrmojo.android.nativedialog.ListDialog;break;case SLIDER:clazz=mstrmojo.android.nativedialog.SliderDialog;break;case CALENDAR:preApplyChanges=getCalendarPreApplyChanges(dicWidget);clazz=dicWidget.dic.ict?mstrmojo.android.nativedialog.DateTimePickerDialog:mstrmojo.android.nativedialog.DatePickerDialog;break;case TIMEPICKER:preApplyChanges=function(newTime){dicWidget.updateTime(eval("("+newTime+")").time);};clazz=mstrmojo.android.nativedialog.TimePickerDialog;break;}if(dic.t!==LIST){setPositiveButtonOnClick(config,preApplyChanges);}return new clazz(config);},showDialog:function showDialog(config){this.createDICDialog(config).show();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._CanSupportOfflineTransactions","mstrmojo._CanMakeServerProxyRequests","mstrmojo.MobileConfiguration","mstrmojo.OfflineTransactionModel","mstrmojo.dom","mstrmojo.hash","mstrmojo.android.EnumOrientationTypes");mstrmojo.requiresDescs(6828,9419);var N=mstrmojo.dom,O=mstrmojo.hash;var Z=[],s={},X={},U;function AE(AG,AJ,AK){if(!AG||AG.handledError){return ;}var AI=[],AH={title:"",message:mstrmojo.desc(6828)+" ",sourceURL:"Source URL: ",fileName:"File: ",lineNumber:"Line: ",line:"Line: "};O.forEach(AH,function(AL,AM){if(AG[AM]!==undefined){AI.push(AL+AG[AM]);if(AM==="title"){AI.push("");}}});if(AG.getResponseHeader){AI.push("XHR: "+AG.getResponseHeader("X-MSTR-TaskFailureMsg"));}AI=AI.join("\n");if(AJ){AJ.hideMessage();}if(AI.length){if(AG.useToast){mstrmojo.toast(AI,3000,AK);}else{mstrmojo.alert(AI,AK);}AG.handledError=true;mstrmojo.dbg(AG.stack||AI);}}function d(AG,AH,AI){if(AG instanceof String){AE({message:AG,fileName:AH,lineNumber:AI});}}var M=mstrmojo.android.AndroidApp=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._CanMakeServerProxyRequests,mstrmojo._CanSupportOfflineTransactions],{scriptClass:"mstrmojo.android.AndroidApp",serverProxy:null,isMobile:true,handledCompatibilityError:false,nativeBridge:new mstrmojo.android.NativeBridge(),init:function z(AH){this._super(AH);var AG=window.onerror;window.onerror=AG?mstrmojo.func.composite([d,AG]):d;this.handleError=AE;},start:function W(){this.started=true;var AK=mstrMobileApp;AK.setTaskServletName(mstrConfig.taskURL);var AI=this.getConfiguration(),AJ=AI.getDiagnosticMode();AK.setDiagnosticMode(AJ);this.diagnosticMode=AJ;this.useBinaryFormat=AI.getBinaryMode();mstrmojo.DPIManager.setDPI();mstrApp.oflnTxModel=new mstrmojo.OfflineTransactionModel();var AH=this.rootView=this.viewFactory.newView("Root",{id:"rootView",placeholder:this.placeholder});var AG=this.rootController=this.controllerFactory.newController("Root",{id:"rootController",rootView:AH});AH.controllerId=AG.id;AH.render();AG.start();if(!mstrApp.isActionBarNative()){window.setTimeout(function(){mstrMobileApp.getTitleBarHeight(mstrApp.rootView.getTitleHeight());},0);}},restart:function AC(){var AG=this.rootController;if(AG){AG.restart();}else{this.start();}},onMobileDevice:function G(){return mstrConfig.onMobileDevice;},isTouchApp:function T(){return(N.isIPad||N.isAndroid||mstrApp.onMobileDevice())&&!N.isWinPhone;},isLandscape:function AD(){return(mstrMobileApp.getOrientation()===mstrmojo.android.EnumOrientationTypes.LANDSCAPE);},getConfiguration:function r(){if(!this._cfg){this._cfg=new mstrmojo.MobileConfiguration();}return this._cfg;},isTablet:function t(){return mstrMobileApp.isTablet();},isMicroTablet:function o(){if(U===undefined){U=false;if(this.isTablet()){var AH=this.getScreenDimensions(),AG=700;U=(AH.h<AG||AH.w<AG);}}return U;},goBack:function J(){if(this.cancelPending(true)){return true;}var AH=false;O.forEach(X,function(AJ,AL){var AK=mstrmojo.all[AL];if(AK){AK.set("visible",false);AH=true;}});X={};if(AH){return true;}var AG=Z.length;if(AG){var AI=Z[AG-1];if(AI.goBack){if(AI.goBack()){return true;}}if(this.closeDialog()){return true;}}return(this.rootController&&this.rootController.goBack())||mstrMobileApp.goBack();},doSearch:function Y(){},menuShown:function E(){},registerListener:function(AG,AJ,AI){var AH=s[AG]||[];AH.push({t:AJ,f:AI});s[AG]=AH;},unregisterListener:function(AH,AJ){var AI=s[AH],AG=AI&&AI.pop();if(!AG||AG.t!==AJ){window.alert("Unregister Search listener out of order.");if(AI&&AG){AI.push(AG);}}},getListener:function(AH,AJ){var AI=s[AH],AG=AI&&((AI.length)?AI[AI.length-1]:null);return((AG&&AG.t===AJ)?AG:null);},cancelPending:function w(AG){this.hideMessage();mstrMobileApp.hideProgress();var AH=this.serverProxy;if(AH){if(AH.cancelRequests()){return true;}}return AG?false:this.closeDialog();},onerror:function g(AG,AH){AE(AG,this,AH);},showMessage:function e(AG){if(this.rootView){this.rootView.showMessage(AG);}},showHTMLProgress:function P(AG){if(this.rootView){this.rootView.showHTMLProgress(AG);}},hideMessage:function AA(){if(this.rootView){this.rootView.hideMessage();}},hideHTMLProgress:function p(){if(this.rootView){this.rootView.hideHTMLProgress();}},showToastNotification:function V(AH,AG){mstrMobileApp.toast(AH,AG);},displayHelp:function x(){var AG=mstrMobileApp.displayHelp();if(AG){mstrApp.onerror({message:AG});}},isDialogUp:function h(){return(Z.length>0);},showDialog:function a(AH,AJ){var AI;if(AH.isNative){AI=mstrmojo.insert(AH);AI.show();return AI;}mstrMobileApp.showPopupDialog();AH.scriptClass=AH.scriptClass||"mstrmojo.android.Dialog";var AG=mstrmojo.func.wrapMethods(AH,{onClose:function(){mstrMobileApp.closePopupDialog();Z.pop();}});AI=AJ?this.viewFactory.newView(AJ,AG):mstrmojo.insert(AG);Z.push(AI);AI.render();window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);return AI;},showPopup:function H(AG,AH){AG.scriptClass=AG.scriptClass||"mstrmojo.android.Popup";if(AH){AG.anchor=AH;}return this.showDialog(AG);},closeDialog:function b(){if(Z.length){Z[Z.length-1].close();return true;}return false;},closeAllDialogs:function j(){var AH=Z.slice(0),AG=AH.pop();while(AG){AG.close();AG=AH.pop();}Z=[];},setMenuStatus:function l(AH,AG){if(AG){X[AH]=true;}else{delete X[AH];}},setCurrentProjectId:function L(AG){this._currentProjId=AG;},getCurrentProjectId:function Q(){return this._currentProjId;},getSessionState:function k(AG){return this.serverProxy.getSession(AG||this._currentProjId);},getContentDimensions:function q(AG){return this.rootView.getContentDimensions(AG);},getContentPosition:function R(){var AG=this.getContentDimensions();return{x:0,y:this.rootView.getTitleHeight(),w:AG.w,h:AG.h};},getScreenDimensions:function AB(){var AG=String(mstrMobileApp.getScreenDimensions()).split("|");return{h:parseInt(AG[0],10),w:parseInt(AG[1],10)};},getResSetStore:function f(){return mstrMobileApp.getResSetStore(this.getCurrentProjectId());},getResSetStoreMgr:function A(){return mstrMobileApp.getResSetStoreMgr();},removeProjectCaches:function AF(AG){if(this.getConfiguration().getCacheEnabled()){this.getResSetStoreMgr().removeProjectCaches(AG);}},getLocaleInfo:function I(AG){AG=AG||this._currentProjId;return this.serverProxy.getLocaleInfo(AG);},onConnectivityChanged:function F(AI,AH){var AG=mstrmojo.publisher;if(AI&&AH){this.getConfiguration().reload();}AG.publish(AG.NO_SRC,AG.CONNECTIVITY_CHANGED_EVENT,AI);if(AI){this.submitOfflineTransaction();}this.rootController.generateActionToolbar();},onReconcileEnd:function K(){var AG=mstrmojo.publisher;AG.publish(AG.NO_SRC,AG.RECONCILE_END_EVENT,null);if(mstrMobileApp.isOnline()){this.submitOfflineTransaction();}},handleCompatibilityError:function u(){if(!this.handledCompatibilityError){this.handledCompatibilityError=true;if(!this.isHosted()){mstrmojo.toast(mstrmojo.desc(9419,"The version of this app is incompatible with one or more of the MicroStrategy Mobile Server(s). Please update the app to a more recent version."));}}},hasOpenDialog:function D(){return Z.length>0;},isHosted:function B(){return mstrMobileApp.isProxy;},isActionBarNative:function C(){return !this.isHosted();},cachesCleared:function S(){this.refreshOfflineTransactionModel();}});M.$PF=function(AI,AH,AG){mstrMobileApp[(AI?"enter":"exit")+"JavaScriptMethod"](new Date().getTime(),AG||arguments.callee.caller.name,AH);};window.$MAPF=M.$PF;}());(function(){mstrmojo.requiresCls("mstrmojo.CheckBoxDIC","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.android._HasPreviewButton","mstrmojo.dom","mstrmojo.css");var K=24,T=36,D=48,A={160:K,213:K,240:T,320:D},U={160:48,213:48,240:73,320:98},B=300,R=mstrmojo.css,O=mstrmojo.dom;function I(V){this.btnNode.innerHTML=V?this.onText:this.offText;R.toggleClass(this.btnNode,"on",V);R.toggleClass(this.btnNode,"off",!V);}function E(){if(this._animHandle){window.clearTimeout(this._animHandle);delete this._animHandle;}}function J(Y,X){this._scroller.origin.x=X;if(!Y){return ;}var V=this.scrollNode.style,W=this;this._isAnimating=true;V[O.CSS3_TRANSITION_DURATION]=Y+"ms";V[O.CSS3_TRANSFORM]=O.createTranslateString(-X);this._animHandle=window.setTimeout(function(){if(W._isAnimating){W._isAnimating=false;}E.call(W);},Y*3);}mstrmojo.android.inputControls.CheckBoxDIC=mstrmojo.declare(mstrmojo.CheckBoxDIC,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.CheckBoxDIC",cssText:"cursor:pointer;",cssDisplay:"inline-block",onText:"ON",offText:"OFF",isSwitchStyle:false,markupString:'<div id="{@id}" class="mstrmojo-Label mstrmojo-CheckBoxDIC {@cssClass}" style="{@cssText}" mstrAttach:click,keydown><div class="checkBox-android-wrapper"><div class="checkBox-android-scrollable"><div class="checkBox-androidMobile-button off"></div><div class="checkBox-label-text"></div></div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.firstChild.lastChild;},btnNode:function(){return this.domNode.firstChild.firstChild.firstChild;}},markupMethods:mstrmojo.hash.copy({ontextChange:function(){this.textNode.innerHTML=(this.text!=null)?this.text:"";}},mstrmojo.hash.copy(mstrmojo.CheckBoxDIC.prototype.markupMethods)),init:function N(W){this._super&&this._super(W);if(this.dic.stl==0){this.isSwitchStyle=true;var V=mstrMobileApp.getDeviceDPI();this.maxOffsetX=U[V];this.scrollerConfig={showScrollbars:false,showIndicators:false,vScroll:false,hScroll:true,bounces:false,useTranslate3d:false,offset:{x:{end:this.maxOffsetX,start:0},scrollPast:false}};this.minHeight=A[V]||K;}},updateScrollerConfig:function S(){if(!this.isSwitchStyle){return ;}var V=this._super(),W=this.checked?0:(this.maxOffsetX||0);mstrmojo.hash.copy({scrollEl:this.scrollNode,origin:{x:W,y:0}},V);return V;},updateScroller:function G(V,W){if(!this.isSwitchStyle){return ;}this._super(V,W);},initScroller:function M(V){if(!this.isSwitchStyle){return ;}this._super(V);var W=this;V.attachEventListener("scrollMoved",this.id,function(X){this._translateX=X.x;I.call(W,(X.x<W.maxOffsetX/2));});},oncheckedChange:function H(V){if(this.isSwitchStyle){if(this.checked&&this._scroller.origin.x!==0){J.call(this,B,0);}else{if(!this.checked&&this._scroller.origin.x!==this.maxOffsetX){J.call(this,B,this.maxOffsetX);}}I.call(this,this.checked);}this._super&&this._super(V);},preBuildRendering:function C(){this.cssClass=this.isSwitchStyle?"Android-tristate-mobile":"Android-tristate";var V;switch(this.owner.getFormats()["text-align"]){case"center":V="50%";break;case"right":V="100%";break;}if(V){this.cssText+="background-position:"+V+" 50%;";}return this._super();},postBuildRendering:function Q(){this._super();if(this.isSwitchStyle){I.call(this,this.checked);this.domNode.style.height=(this.openerStyle.ih>this.minHeight?this.openerStyle.ih:this.minHeight)+"px";}},touchTap:function P(V){this.onclick();},touchBegin:function L(V){if(!this.isSwitchStyle){return ;}if(this._isAnimating){V.stop();return false;}return this._super(V);},touchSwipeEnd:function(Z){if(!this.isSwitchStyle){return ;}Z.evt.handle=true;var Y=this._translateX,X=(Y<this.maxOffsetX/2),V=X?Y:(this.maxOffsetX-Y),W=V*B/this.maxOffsetX;J.call(this,W,X?0:this.maxOffsetX);this.set("checked",X);},setDirtyFlag:function F(W,V){if(this.isSwitchStyle){mstrmojo.css.addClass(this.domNode.firstChild||V,"tx-active");}else{this._super(W,V);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Pulldown");var C={ENTER:13,LEFT:37,UP:38,TAB:9,RIGHT:39,DOWN:40,ESC:27};function D(L,M){var G,J,F,H=[],I,N;try{I=new RegExp(L,"i");}catch(K){I=new RegExp(mstrmojo.string.regEscape(L));}for(G=0,J=M.length;G<J;G++){if(I.test(M[G][this.itemField])){H.push(M[G]);}}return H;}function B(F){return !(F<0||F===undefined||F===null);}mstrmojo.SearchablePulldown=mstrmojo.declare(mstrmojo.Pulldown,null,{scriptClass:"mstrmojo.SearchablePulldown",popupCssClass:"mstrmojo-SearchablePulldown-Popup",searchEnabled:false,allowCustomInput:false,useItemCssOnInput:false,lastSearchPattern:"",isEditing:false,allItems:null,markupString:'<div id="{@id}" class="mstrmojo-SearchablePulldown mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-SearchablePulldown-boxNode mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><input class="mstrmojo-SearchablePulldown-inputNode" value="{@text}" mstrAttach:keyup,blur/><div class="mstrmojo-SearchablePulldown-iconNode mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mouseover,mouseout></div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},inputNode:function(){return this.domNode.firstChild.firstChild;},iconNode:function(){return this.domNode.firstChild.children[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:mstrmojo.hash.copy({ontextChange:function(){if(this.inputNode.value!==this.text){this.inputNode.value=this.text;}},onheightChange:function(){this.domNode.style.height=this.height||"";this.boxNode.style.height=this.height||"";},onsearchEnabledChange:function(){this.inputNode.readOnly=this.searchEnabled?false:true;this.items=this.allItems||this.items;},onallowCustomInputChange:function(){if(this.allowCustomInput){this.set("searchEnabled",true);}},onvalueChange:function E(){if(this.useItemCssOnInput&&this.selectedItem){this.inputNode.className="mstrmojo-SearchablePulldown-inputNode "+(this.selectedItem[this.itemCSS]||"");}}},mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupMethods)),prevalueChange:function(){this.synchronize();},synchronize:function(){var G=this.value,H=this.items||[],I=H[this.selectedIndex],F=-1;if(I&&G===I[this.itemIdField]){this.selectedItem=I;this.set("text",I[this.itemField]);return ;}F=mstrmojo.array.find(this.items,this.itemIdField,G);if(!B(F)&&this.allowCustomInput){this.selectedItem=undefined;this.selectedIndex=undefined;return ;}this.selectedIndex=B(F)?F:this.defaultSelection;this.selectedItem=I=this.items[this.selectedIndex];this.value=I?I[this.itemIdField]:undefined;this.set("text",I?I[this.itemField]:(this.defaultText||""));},preBuildRendering:function A(){if(this._super){this._super();}this.allItems=this.allItems||this.items;this.synchronize();},premousedown:function(F){if(this.searchEnabled&&F.getTarget()===this.iconNode){this.set("items",this.allItems);}this._super(F);},onkeyup:function(M){var J=mstrmojo.string.trim(this.inputNode.value),I=M.e,N=I.keyCode||I.which,L=B(this.selectedIndex)?this.selectedIndex:-1,F=this.allowCustomInput,H=this.items.length;this.isEditing=true;switch(N){case C.ENTER:if(H>0&&!F){this.set("selectedIndex",L===-1?0:L);this.synchronize();}this.closePopup();break;case C.ESC:this.closePopup();this.synchronize();break;case C.UP:if(this.popupRef.visible&&H>0){this.set("selectedIndex",(L+H-1)%H);this.synchronize();}break;case C.DOWN:if(!this.popupRef.visible&&H>0){this.togglePopup();}this.set("selectedIndex",(L+1)%H);this.synchronize();break;default:if(J===this.lastSearchPattern){return ;}var K=[];if(J&&J.length>0&&J.indexOf(this.lastSearchPattern)>-1){K=D.apply(this,[J,this.items]);}else{K=D.apply(this,[J,this.allItems]);}this.set("items",K);if(K.length===0){this.closePopup();}else{if(!this.popupRef.visible){this.togglePopup();}}this.set("selectedIndex",undefined);if(J&&J.length){var G=mstrmojo.array.find(K,this.itemField,J);if(G!==-1){this.set("selectedIndex",G);}}}if(F&&!B(this.selectedIndex)){this.set("value",this.inputNode.value);}this.lastSearchPattern=J;},onblur:function(F){this.isEditing=false;if(!this.searchEnabled){return ;}if(!this.allowCustomInput){this.items=this.allItems;this.synchronize();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller");var F=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType;function D(G){return{browseConfig:null,parent:G,next:function(J){var I=this.browseConfig;if(!I){return ;}I.blockBegin+=I.blockCount;var H={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:I.blockBegin,blockCount:I.blockCount,includeAncestorInfo:true};if(I.folderLinksContextId){H.folderLinksContextId=I.folderLinksContextId;}if(I.includeObjectDesc){H.includeObjectDesc=I.includeObjectDesc;}if(I.rootFolderID){H.rootFolderID=I.rootFolderID;}else{if(I.rootFolderType){H.rootFolderType=I.rootFolderType;}}if(I.browsableTypes){H.objectType=I.browsableTypes;}if(I.searchPattern){H.searchPattern=I.searchPattern;if(I.recursive){H.recursive=I.recursive;}}this.parent.set("waiting",true);if(I.dataProvider){I.dataProvider.serverRequest(H,J);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,H);}},hasNext:function(){var H=this.browseConfig;return(H.blockBegin+H.blockCount-1)<H.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function E(G){if(this._super){this._super(G);}this.ifDataHelper=D(this);if(G.browseConfig){this.ifDataHelper.browseConfig=G.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function B(G){var H=this.browseConfig.browsableViewMedias;if(G&&H){var I={};F.forEach(H.split(","),function(J){I[parseInt(J,10)]=true;});G=F.filter(G,function(J){return(J.t!==A.DssTypeDocumentDefinition)||I[J.dvm];});}this.add(G,-1);this.set("waiting",false);if(this._super){this._super(G);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function C(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:"!!this.parent.scrollable"}}),({scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:"!!this.parent.rightScrollable"}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E==="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E==="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof G==="object")&&(typeof G.length==="number"));};if(B(F)&&B(E)){var C;for(C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo._IsDial");mstrmojo.WidgetDial=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._IsDial],{scriptClass:"mstrmojo.WidgetDial"});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebConstantPrompt","mstrmojo.prompt.WebGeoConstantPrompt","mstrmojo.prompt.WebElementsPrompt","mstrmojo.prompt.WebUnsupportedPrompt","mstrmojo.XMLBuilder");mstrmojo.prompt.WebPrompts=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.prompt.WebPrompts",lcl:1033,host:null,mergeGeoPrompts:true,init:function I(K){var L=K.rsl;delete K.rsl;this._super(K);this.populate(L);},get:function(K){var L=this.prompts;if(L&&K<L.length){return L[K];}alert("index is out of boundary.");},size:function J(){var K=this.prompts;return(K&&K.length)||0;},isEmpty:function E(){return !this.prompts||!!this.prompts.length;},validate:function G(){var L=this.prompts,K;for(K=0;K<L.length;K++){L[K].validate();}return true;},populate:function F(N){var K=N&&N.prompts,R=mstrmojo.prompt.PromptTypes,Q=this.mergeGeoPrompts,P;this.lcl=(N&&N.lcl)||this.lcl;this.prompts=[];if(K){var M;for(M=0;M<K.length;M++){var O=K[M],L;switch(O.ptp){case R.CONSTANT_PROMPT:L=new mstrmojo.prompt.WebConstantPrompt();L.populate(O);if(Q&&L.prs&&L.prs.DisplayStyle==="GeoLocation"){if(!P){P=new mstrmojo.prompt.WebGeoConstantPrompt();P.title="Current Location";P.add(L);L=P;}else{P.add(L);continue;}}break;case R.ELEMENTS_PROMPT:L=new mstrmojo.prompt.WebElementsPrompt();L.populate(O);break;default:L=new mstrmojo.prompt.WebUnsupportedPrompt();L.populate(O);}this.prompts.push(L);}}},populateAnswers:function A(M){var K=this.prompts,L;for(L=0;L<M.length;L++){K[L].populateAnswer(M[L]);}},buildAnswerObject:function B(){var K=[],L;for(L=0;L<this.size();L++){var M=this.prompts[L];K.push(M.buildAnswerObject());}return K;},prepareAnswer:function(L){var M=this.prompts,K=function(Q,O,P){var N=Q.length;Q[O].prepareAnswer({success:function(){if(O<N-1){K(Q,O+1,P);}else{if(P&&P.success){P.success();}}},failure:function(){if(P&&P.failure){P.failure();}}});};if(M&&M.length>0){K(this.prompts,0,L);}},getAnswerXML:function C(){var K=new mstrmojo.XMLBuilder();this.buildShortAnswerXML(K);return K.toString();},buildShortAnswerXML:function H(K){K=K||new mstrmojo.XMLBuilder();K.addChild("rsl");K.addAttribute("lcl",this.lcl);var L;for(L=0;L<this.size();L++){var M=this.prompts[L];M.buildShortPa(K);}K.closeElement();},hasSupported:function D(){var K;for(K=0;K<this.size();K++){var L=this.prompts[K];if(L.supported()){return true;}}return false;}});mstrmojo.prompt.PromptTypes={CONSTANT_PROMPT:1,CONSTANT_GEO_PROMPT:1.5,ELEMENTS_PROMPT:2,OBJECT_PROMPT:4};mstrmojo.Enum={};mstrmojo.Enum.Validation={};mstrmojo.Enum.Validation.STATUSCODE={VALID:0,INVALID_DATATYPE:1,EXCEEDS_MIN_VALUE:2,EXCEEDS_MAX_VALUE:3,EXCEEDS_MIN_LENGTH:4,EXCEEDS_MAX_LENGTH:5,EXCEEDS_MIN_COUNT:6,EXCEEDS_MAX_COUNT:7,INVALID_ANSWERS:8,NO_INPUT:9,NO_PERSONAL_ANSWER_NAME:10,INCOMPLETE_CONDITION:11,TRUNCATED:12,INCOMPLETE_CONDITION_ON_AUTO_NODE:13,INVALID_PERSONAL_ANSWER_NAME:14,DUPLICATED:15,INVALID:999};}());(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebPrompts");var D="mstrmojo._ResultSetXt",G=0,Q=1,F=2,N=3,H=4;var U=["promptsAnswerXML","elementsPromptAnswers","valuePromptAnswers","objectsPromptAnswers"];function A(X){if(X.linkAnswers){return true;}var V=U.length,W;for(W=0;W<V;W++){if(X[U[W]]){return true;}}return false;}function C(V){if((!V)||(V.status===undefined)||(isNaN(V.status))){return G;}switch(parseInt(V.status,10)){case 0:case 1:return Q;case 2:return N;case 3:return F;default:return H;}}function L(Z,V,d){var X=d.success;delete d.success;var b=mstrApp,a=!!Z.useRefreshProgress,Y=a?[mstrmojo.desc(10078,"Refreshing data. Please wait.")]:[],W;delete Z.useRefreshProgress;d.success=function(e,f){switch(C(e)){case Q:case N:case G:X(e,f);break;case F:d.failure(e);break;case H:var g;d.success=function(j,k){var h=C(j);switch(h){case Q:case N:X(j,k);break;case G:case H:W();break;default:j.message="Error checking the status of running report/document.";d.failure(j);break;}};W=function(){b.serverRequest({taskId:"pollStatus",msgID:e.id},d,{src:D+"::pollForResult"});};W();break;}};b.serverRequest(Z,d,{src:D+"::pollForResult",showProgress:V,hideProgress:!V,hideWait:!V,useRefreshProgress:a,progressStateText:Y});}function I(X,Z,V,Y){var W=this;L.call(this,X,V,{success:function(a){W.msgId=a.id;if(a.visName){W.visName=a.visName;}var b=C(a);if(b===N){if(Z.prompts){W.loadPrompts({success:Z.prompts,failure:Z.failure});}else{Z.failure({message:"Wrong status. Received Prompts while expected Result."});}}else{if(Z.execSuccess){Z.execSuccess(a);}if(Y&&Y.statusOnly){Z.success(a);}else{if(W.visName&&W.visName!==""){if(!Y){Y={};}Y.colsPerPage=-1;Y.rowsPerPage=-1;}W.getResults(Y,{success:Z.success,failure:Z.failure,complete:Z.complete||mstrmojo.emptyFn,canceled:Z.canceled||mstrmojo.emptyFn});}}},failure:Z.failure,complete:Z.complete||mstrmojo.emptyFn,canceled:Z.canceled||mstrmojo.emptyFn});}function B(W,X){var V=mstrApp.modelFactory;if(V){return V.newPromptsModel(W,X);}return mstrApp.viewFactory.newPrompts(W,X);}mstrmojo._ResultSetXt=mstrmojo.provide("mstrmojo._ResultSetXt",{_mixinName:"mstrmojo._ResultSetXt",msgId:null,execute:function J(X,Z,Y){if(X.link){X.linkAnswers=X.link.toXml();delete X.link;}var W=this,V=mstrmojo.func.addMethods(Z,{prompts:function(a){W.prompts=a;Z.prompts(a);},success:function(a){if(a.prompt){W.prompts=a.prompt;}Z.success(a);}});if(!W.prompts&&A(X)){V.success=function(a,b){delete b.config.hideWait;delete b.config.hideProgress;W.loadPrompts({success:function(d){if(d.prompts){W.prompts=d;W.answers=B(d).buildAnswerObject();}Z.success(a,b);},failure:Z.failure,complete:Z.complete||mstrmojo.emptyFn},{includeClosed:true});};}else{if(X.promptsAnswerXML){V.success=function(a,b){W.prompts=null;W.answers=null;W.loadPrompts({success:function(d){if(d.prompts){W.prompts=d;W.answers=B(d).buildAnswerObject();}Z.success(a,b);},failure:mstrmojo.emptyFn});};}}I.call(this,X,V,true,Y);},answerPrompts:function P(V,Y,X){if(mstrApp.useBinaryFormat){X.objectType=55;}X.taskId="answerPrompts";X.msgID=X.msgId||this.msgId;X.promptAnswerXML=V.getAnswerXML();var W=this;I.call(this,X,{success:function(Z){W.answers=V.buildAnswerObject();Y.success(Z);},prompts:Y.prompts,failure:Y.failure},true);},getResults:function R(V,W){V.messageID=V.msgId||this.msgId;L.apply(this,[V,false,W]);},loadPrompts:function O(W,V){V.taskId="getPrompts";V.msgID=V.msgID||this.msgId;L.apply(this,[V,false,W]);},linkToObject:function K(V,W){this.execute(V,W);},getPrompts:function E(){var V=this.prompts;if(V){return B(this.prompts,this.answers);}return undefined;},checkCache:function T(X,Y,W){var V=mstrmojo.hash.copy(W,{src:D+"::checkCache",override:false,silent:true});X.taskId="checkCache";mstrApp.serverRequest(X,Y,V);},checkCachedLinkTargets:function S(V,X){var W={taskId:"checkCachedLinkTargets",items:V};mstrApp.serverRequest(W,X,{src:D+"::checkCachedLinkTargets",override:false,silent:true});},urlLinkParams:function M(){return U;}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.TreeNode","mstrmojo._IsExprNode","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.expr","mstrmojo._HasOwnAvatar");var F=mstrmojo.array,M=mstrmojo.expr,P=mstrmojo.dom,A=mstrmojo.css;function J(R,Q){var T=R.data,S=T&&T.nds;if(!S){return null;}if(Q){Q.sort(F.numSorter);}else{Q=R.sortSelectedIndices();}if(!Q.length){return null;}return{idxs:Q,nds:F.get(S,Q)};}function N(S){var R=S.ctxtBuilder,U=R&&R.itemWidgets,Q=U&&U[0],T=Q&&Q.data;if(T&&T.not&&(U.length>0)){delete T.not;Q.paint();}}mstrmojo.AndOrNode=mstrmojo.declare(mstrmojo.TreeNode,[mstrmojo._IsExprNode,mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.AndOrNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},itemsContainerPrefix:function(){return this.domNode.childNodes[1];},itemsContainerNode:function(){return this.domNode.childNodes[2].firstChild;},dropCueNode:function(){return this.domNode.childNodes[2].lastChild;},itemsContainerSuffix:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onitemCntChange:function(){A.toggleClass(this.itemsContainerNode,["multi"],this.itemCnt>2);},onprefixedAndOrEditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();},ondropCuePosChange:mstrmojo.TreeNode.prototype.markupMethods.ondropCuePosChange},multiSelect:true,itemIdField:null,init:function(Q){this._super(Q);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());var R=this.data;if(R){delete this.data;this._set_data(null,R);}},itemCnt:0,postBuildRendering:function(){var Q;this.set("itemCnt",this.items.length);if(this._super){Q=this._super();}N(this);return Q;},preadd:function L(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},preremove:function O(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},_set_data:function(T,Q){var R=this.data,S=(R!==Q);if(S){this.data=Q;if(Q&&!Q.nds){Q.nds=[];}this.set("items",Q&&Q.nds);}return S;},isDragValid:function K(){return true;},isSelectableArea:function(Q){return false;},getDragData:function(Q){var S=this._super(Q);if(S&&!S.html){var R=S.et&&M.ET2TGT[S.et];S.html=R?S[R]&&S[R].n||"":S.n||"";}return S;},remove:function I(R,S){var Q=this._super(R);if(Q>-1){var T=S||this.suppressConsolidation;if(!T){this.consolidate(false);}}return Q;},move:function(R,Q){this.suppressConsolidation=true;var S;if(this._super){S=this._super(R,Q);}this.suppressConsolidation=false;return S;},consolidate:function E(){var U=this.parent;if(!U||!U.remove){return ;}var S=this.items,R=S&&S.length;if(R<2){var T=R?S[0]:null,Q=this.childIndex();if(T){U.add([T],Q);}U.remove(this.data);}},indent:function G(S,Q){var R=J(this,S);if(!R){return ;}this.remove(R.idxs,true);var W=R.nds,V=Q&&Q.fn||this.data&&this.data.fn,U={et:M.ET.ANDOR,nds:W,fn:V};if(W.length===2&&W[0].not){if(W[1].not){delete W[0].not;delete W[1].not;U.not=true;U.fn=(V===M.FN.AND?M.FN.OR:M.FN.AND);}else{var T=W[0];W[0]=W[1];W[1]=T;}}this.add([U],R.idxs[0]);this.consolidate(false);},outdent:function C(R){var S=this.parent,Q=S&&S.data;if(!Q||Q.et!==M.ET.ANDOR){return ;}var T=J(this,R);if(!T){return ;}this.remove(T.idxs,true);if(this.data.not){T.nds[0].not=true;}S.add(T.nds,this.childIndex());this.consolidate(false);},edit:function D(Z,a,S){if(!Z){return ;}var Y=this.data,X=Y&&Y.fn,R=Z.data,f=R&&R.not;if(!R){R={};Z.data=R;}R.not=!!S;if(X!==a){var Q=Y.nds;if(Q&&Q.length>2){var e=Z.childIndex();if(e>0){this.indent([e-1,e],{fn:a});}}else{Y.fn=a;var V=this.ctxtBuilder,U=V&&V.itemWidgets;for(var T=0,W=(U&&U.length)||0;T<W;T++){var b=U[T];if(b){b.paint();}}}}else{Z.paint();}},preclick:function H(Q){var S=null,R=P.eventTarget(Q.hWin,Q.e);if(R===this.prefixNode){}else{if(P.contains(this.prefixNode,R,true)){S="andor";}}Q.part=S;},createAvatar:function B(S){var R=document.createElement("div"),T=P.findWidget(S),Q=T.getAvatarNode&&T.getAvatarNode();if(!Q){Q=T.condNode.cloneNode(true);Q.style.boxSizing="border-box";Q.style.width=T.condNode.offsetWidth+"px";}R.appendChild(Q);A.addClass(R,T.avatarCssCls||"mstrmojo-FE mstrmojo-ConditionNode");R.style.zIndex=20;return R;},_ndsToMove:J});})();(function(){mstrmojo.requiresCls("mstrmojo.android.inputControls.CheckBoxDIC");mstrmojo.android.inputControls.MarkRowDIC=mstrmojo.declare(mstrmojo.android.inputControls.CheckBoxDIC,null,{scriptClass:"mstrmojo.android.inputControls.MarkRowDIC",isSwitchStyle:false,oncheckedChange:function(){if(this.markAll){var B=this.group&&this.group.widgetsMap,A;for(A in B){if(B.hasOwnProperty(A)){if(B[A].checked!==this.checked){B[A].set("checked",this.checked);}}}}else{this._super();}},postBuildRendering:function(){this._super();this.domNode.style.height="30px";}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui.SelectBoxList","mstrmojo.array","mstrmojo.android.nativedialog.TwoLevelPageByDialog","mstrmojo.android.nativedialog.ListDialog","mstrmojo.hash");mstrmojo.android.controllers._HasSelectBoxDialog=mstrmojo.provide("mstrmojo.android.controllers._HasSelectBoxDialog",{_mixinName:"mstrmojo.android.controllers._HasSelectBoxDialog",showSelectBoxDialog:function A(D,G,E){E.children=[{scriptClass:"mstrmojo.android.ui.SelectBoxList",isElastic:true,items:D,selectListChange:function(I,J){if(!G.call(this,I,J)){mstrApp.closeDialog();}}}];if(D.length===1){var B=E.children[0];var F=D[0];var C=F.items;E.title=F.n;B.scriptClass="mstrmojo.ui.MobileCheckList";B.items=C;B.multiSelect=false;B.selectedIndex=mstrmojo.array.find(C,"on",true);B.postselectionChange=function(I){this.selectListChange(0,C[I.added[0]]);};}if(mstrApp.useBinaryFormat){var H=(D.length>1);mstrmojo.hash.copy({isNative:true,scriptClass:H?"mstrmojo.android.nativedialog.TwoLevelPageByDialog":"mstrmojo.android.nativedialog.ListDialog",onSelectionChange:function(J,I){if(I===undefined){G.call(this,0,this.getItem(J));this.close();}else{G.call(this,J,this.getItem(J,I));}}},E);}mstrApp.showDialog(E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.func","mstrmojo.hash");mstrmojo.requiresDescs(9478,9479,9753);var P=mstrmojo.hash,A=1,E=2,O;mstrmojo.android.controllers.TransactionNotificationController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.TransactionNotificationController",widgetMap:null,boardOpen:null,init:function R(X){this._super(X);var W=this.widgetMap={},V=this.boardModel=this.model.getBoardModel();if(!this._txListener){this._txListener=V.attachEventListener("recordChanged",this.id,function(Y){P.forEach(W,function(a,Z){if(!Y.data||!Y.data[Z]){a.set("txData",null);delete W[Z];}});if(this.isNotificationBoardOpen()){this.pendingUpdate=true;}else{this.generateActionToolbar();}});}},start:function G(W){this._super(W);var V=this.view=mstrApp.viewFactory.newView("Transactions",{model:this.boardModel,context:W.context,controller:this});O=mstrmojo.desc(9753,"Transactions");this.rootCtrl.updateTransactions(V,O);},destroy:function S(V){var W=this._txListener;if(W){W.clear();}this._super(V);},hasTransactionQueue:function L(W){var V=this.model.hasOfflineTransactions();if(V&&W){V=this.boardModel.getOfflineRecords(W);}return V;},hasPendingTransactions:function N(W){var V=this.boardModel.getOfflineRecords(W);return(V&&V.pending&&V.pending.length);},showNotificationBoard:function C(Z,X,Y){var V={},W=E;if(X){V={context:{id:X,n:Y||Z.ttl}};W=A;}this.boardOpen=W;this.contextController=Z;Z.spawn(this,V);},isNotificationBoardOpen:function D(){return !!this.boardOpen;},isAllTransactionLevel:function H(){return(this.boardOpen===E);},editTransactionRecord:function I(X,W,V,a){var Y=this.boardModel,Z=this.id;this.model.editTransactionRecord(X,W,V,mstrmojo.func.wrapMethods(a,{success:function(b){mstrmojo.all[Z].startDocument(b,X,Y.docsTx[X]&&Y.docsTx[X].p.pid);}}));},deleteTransactionRecord:function Q(Z,W,V,a){a=a||{};var X=a.success||mstrmojo.emptyFn,Y=this;a.success=function(e){var b=!Y.boardModel.getOfflineRecords();X(e);var d=Y.boardOpen;if(d===E&&b){Y.goBack();}if((d===A&&b)||Y.model.emptyTransactionQueue){mstrmojo.toast(Y.model.emptyTransactionQueue?mstrmojo.desc(9478,"There are no more pending transactions"):mstrmojo.desc(9479,"There are no more pending transactions for the current document"));Y.goUp();}};this.model.deleteTransactionRecord(Z,W,V,a);},startDocument:function B(Y,Z,X){Y.ifc=false;this.rootCtrl.closeTransactions(true);var V=this.contextController;if(V){if(V instanceof mstrmojo.android.controllers.ResultSetController){if(V.did===Z){V.hasTxChanges=true;V.model.transactionUpdate(Y);V.setData(Y);V.getPageByTree(true);V.makeCurrent();return ;}}var W={action:"open",data:Y,documentID:Z,hasTxChanges:true,st:14081};if(X!==mstrApp.getCurrentProjectId()){W.projectID=X;}V.spawn(mstrApp.controllerFactory.newController("Document",{st:14081}),W);}},detach:function T(){this._super();this.boardOpen=null;if(this.pendingUpdate){this.rootCtrl.getCurrent().generateActionToolbar();delete this.pendingUpdate;}},addWidgetListener:function K(W,V){this.widgetMap[W]=V;},goBack:function U(){if(this._super()){return true;}if(this.boardOpen!==E||!this.view.goBack()){this.rootCtrl.closeTransactions();}return true;},goUp:function M(){if(!this._super()){this.rootCtrl.closeTransactions();}return true;},makeCurrent:function F(V){this._super(V);this.rootCtrl.updateTransactions(this.view,O,V);},setOfflineRecords:function J(V){this.model.refresh();}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.ui.ActionToolbar","mstrmojo.android.EnumMenuOptions","mstrmojo.android.ui.PropertiesView","mstrmojo.hash","mstrmojo.array","mstrmojo.string");mstrmojo.requiresDescs(1142,8623,8429,8430,8624,8625,9099,11191);var L=mstrmojo.hash,f=mstrmojo.array.forEach,K=mstrmojo.dom,O=768,d=mstrmojo.android.EnumMenuOptions,x=d.FULL_SCREEN,AB=d.SHARE,C=d.ANNOTATION,F=3,I=50;function q(){var AD=this._oldPID;if(AD){mstrApp.setCurrentProjectId(AD);}}function D(AH,AI,AF,AG){var AE=this.model,AD=AE.prompts;if(AD){AH.promptsAnswerXML=AD.getAnswerXML();}AH.useRefreshProgress=AG;mstrApp.closeAllDialogs();AE.execute(AH,AI,AF);}function R(AH,AG){var AE=this.model,AD=AE.prompts,AF={fresh:false,useRefreshProgress:mstrApp.isTablet(),isAutoRefresh:AG||false};if(AD){AF.promptsAnswerXML=AD.getAnswerXML();}mstrApp.closeAllDialogs();this.refresh(AF,AH);}function U(){var AD=this._startParams,AF=AD.action,AE;if(!AF||(AF!=="drillGrid"&&AF!=="drill2Grid")){AE=AD;}this.rootCtrl.updateLastOpened(AE);}function z(AE,AI){AI=AI||{};var AD=this.view=this.createView(AE,L.copy(AI)),AH=AE.n||AI.ttl||"",AF=this;AD.slot="containerNode";var AG=this.frame=this.newView("ResultSet",{controller:this});AG.addChildren([AD]);this.rootCtrl.updateContent(AG,AH);this.ttl=this._startParams.n=AH;this.desc=AE.dsc;U.call(this);window.setTimeout(function(){AF.checkCache(AE,AI);},100);}function M(){if(this.isFullScreen){this.cancelFlashFullScreen();}var AD=this.frame.getPosition(),AE=K.windowDim();AD.ww=AE.w;AD.wh=AE.h;return JSON.stringify(AD);}mstrmojo.android.controllers.ResultSetController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.ResultSetController",supportsFullScreen:true,start:function T(AF){this._super(AF);this._startParams=L.copy(AF);var AL=this,AH=AF.projectID,AN=AL.prevController,AD=function(AO){q.call(AL);AL.viewFailed(AO);},AI=function(AO){$MAPF(AO,"ResultSetController","start");},AM=function(){if(AN&&AN.docRequestComplete){AN.docRequestComplete();}};var AJ=this.ctrlType=AF.st;AI(true);if(AH){this._oldPID=mstrApp.getCurrentProjectId();mstrApp.setCurrentProjectId(AH);this.pid=AH;}try{var AE=AF.action||"execute";delete AF.action;var AG=this.model=this.initModel();if(AJ){AG.st=AJ;AG.n=AF.n;}this.did=this.did||AF.documentID||AF.reportID||AF.objectID;AG[AE](AF,{success:function(AO){try{z.call(AL,AO,AF);}catch(AP){AD(AP);}},prompts:function(){AL.openPrompts(AF);},failure:function(AO){AD(AO);},complete:function(){AI(false);AM();},canceled:function(){AD();}});}catch(AK){AD(AK);AM();}},initModel:mstrmojo.emptyFn,canDelegateToolBar:function J(){return true;},createView:mstrmojo.emptyFn,getDefaultMenus:function t(){return 0;},onorientationChange:function Q(){var AD=this.frame;if(AD&&AD.hasRendered){AD.rootOrientationChange({isLandscape:!this.orientation});}this._super();},refresh:function AC(AE,AF){var AD=this.view;this.model.refresh(AE,mstrmojo.func.wrapMethods({success:function(AG){if(AG){AD.refresh();}}},AF));},reExecute:function A(AD){if(mstrApp.useBinaryFormat){mstrMobileApp.removeLiveCache(mstrApp.getCurrentProjectId(),this.model.ci.cid);var AE=this;D.call(this,{},{success:function(AF){AE.setData(AF);}},{refresh:true},false);}else{AD.model.raiseEvent({name:"refresh"});}},reprompt:function AA(){this.repromptFlag=true;this.openPrompts();},openPrompts:function p(AH){var AK=this,AJ=this.model.prompts,AL=AJ.size(),AD=[],AM=false,AI;for(AI=0;AI<AL;AI++){var AF=AJ.get(AI);if(AF.supported()){AD.push(AF);}else{if(!AF.hasAnswer){if(AF.req){this.viewFailed({message:mstrmojo.desc(8623,"Report cannot be executed because it contains unanswered, required prompts.")});return ;}AM=true;}}}var AG=function(){if(AM){mstrmojo.alert(mstrmojo.desc(8624,"Warning: Report contains unasnwered, unsupported prompts."),function(){AK.answerPrompts();});}else{AK.answerPrompts();}};if(AD.length>0){var AE=this.frame;this.spawn(mstrApp.controllerFactory.newController("Prompts"),{maskNode:AE&&AE.getMaskNode(),prompts:AJ,supportedPrompts:AD,n:(AH&&(AH.n||AH.ttl))||this.ttl,callback:function(){AG();}});}else{AG();}},answerPrompts:function W(){var AD=this;this.model.answerPrompts({success:function(AE){var AF=AD.nextController;if(AF){AF.destroy();}if(AD.repromptFlag){AD.afterReprompt(AE);delete AD.repromptFlag;AD.rootCtrl.updateContent(AD.frame,AE.n);U.call(AD);AD.checkCache(AE);}else{z.call(AD,AE);}},prompts:function(){AD.viewFailed({message:mstrmojo.desc(8625,"Prompts in prompts are not supported.")});},failure:function(AE){mstrApp.onerror(AE);}});},afterReprompt:function b(AD){this.getPageByTree(true);},hasPageBy:mstrmojo.emptyFn,getPageByTree:function o(AG){var AE=!!this.pageByData;if((!AG&&AE)||!this.hasPageBy()){return ;}var AH=this,AD=this.view,AF=(AD.isVis&&AD.isVis())?AD.xtabModel:this.model;if(AF.getPageByTree){if(AE){this.set("pageByData",null);}AF.getPageByTree({success:function(AI){AH.set("pageByData",AI);},failure:function(AI){mstrApp.onerror(AI);}});}},destroy:function u(){this.model.destroy();var AD=this.frame;if(AD){AD.destroy();}this._super();},checkCache:function H(AI,AG,AO,AH,AE){var AK=this,AM=this.model.getDataService(),AD=AI&&AI.ifc;AO=AO||mstrmojo.emptyFn;if(!mstrApp.useBinaryFormat||!AD){AO();return ;}AG=AG||{did:this.did,n:this.n,st:this.st,t:this.t,sub_id:this.sub_id};var AF=function(AQ){var AP=(AQ!==true);AK.rootCtrl.setActionToolbarStatus(AP);AK.frame.setActionToolbarStatus(AP);};var AN=true,AL=1,AJ={success:function(AP){if(AN&&AH!==2){mstrmojo.toast(mstrmojo.desc(8617,"Your view has been updated with the latest version of the document."),3000);}if(AL===1){AK.setData(AP,true);}AK.getPageByTree(true);AK.generateActionToolbar();AO();AF();},prompts:function(){mstrmojo.alert(mstrmojo.desc(8619,"New prompts were added to the document."),function(){AF();AK.reprompt();});},failure:function(){AF();},canceled:AF};AF(true);if(AH===1&&AI.ci.cid==="00000000000000000000000000000000"){AN=false;}AM.checkCache(L.copy(AI.ci||{},{isAutoRefresh:AH===2}),{success:function(AP){if(AP.needUpdate){if(AP.refresh&&AH===2){AL=2;R.call(AK,AJ,true);}else{AG.isAutoRefresh=AH===2;D.call(AK,AG,AJ,{},mstrApp.isTablet());}}else{AO();AF();}},failure:function(){if(!mstrApp.onMobileDevice()){if(AH===2){AL=2;R.call(AK,AJ);}else{D.call(AK,AG,AJ,{},mstrApp.isTablet());}}else{AF();}},canceled:AF},AE);},goBack:function E(){var AD=this._super();if(!AD){q.call(this);}return AD;},makeCurrent:function a(AD){var AE=this.frame;if(AE){this._super(AD);this.rootCtrl.updateContent(AE,this._startParams.n,AD);U.call(this);}else{this.doNotRefresh=true;this.prevController.makeCurrent(AD);}},onExecuteNewObject:function P(AE){var AD=(AE.objType===F)?768:14081;this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(AD),{st:AD}),AE);},onDrill:function g(AD){this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(O)),L.copy(AD,{action:(this.ctrlType===O)?"drillGrid":"drill2Grid",st:O}));},goUp:function X(){if(!this._super()){var AD=this.getController("ctrlType",2048);if(AD){AD.makeCurrent(true);}else{this.rootCtrl.goHome();}}return true;},updateActionToolbar:function r(AD){if(mstrApp.getConfiguration().isMenuAllowed(AB,AB)){if(mstrMobileApp.getSDKVersion()>=11){AD.addMenuItem(C,mstrmojo.desc(11191,"Annotation"),C,false,24);}AD.addMenuItem(AB,mstrmojo.desc(9099,"Share"),AB,false,22);}AD=this._super(AD);if(this.frame&&this.frame.delegateToolbar(AD)){AD=mstrmojo.android.ui.ActionToolbar.newToolbarConfig();}return AD;},handleMenuItem:function k(AE,AD){switch(AE){case AB:this.share("",false);return ;case x:this[((AD===11)?"enter":"exit")+"FullScreen"]();return ;case C:this.startAnnotate();return ;}return this._super(AE,AD);},beforeViewHidden:function G(AE){this._super(AE);var AD=this.view;if(AD&&AD.beforeViewHidden){AD.beforeViewHidden(AE);}if(this.isFullScreen){this.exitFullScreen(true,AE);}},afterViewVisible:function V(AD){this._super(AD);if(this.isFullScreen||!!this.model.fs||!!this.model.data.fs){this.enterFullScreen();}else{if(mstrMobileApp.getSDKVersion()>=16){window.setTimeout(function(){mstrMobileApp.clearWebViewCache(false);},100);}}mstrMobileApp.hideProgress();if(!AD){var AE=this.id;window.setTimeout(function(){var AF=mstrmojo.all[AE];if(AF&&AF.rootCtrl.getCurrent()===AF){AF.takeScreenShot();}},300);}},takeScreenShot:function Y(){var AE=this.view,AD=(AE.getCaptureDimensions&&AE.getCaptureDimensions())||K.position(AE.domNode),AG=K.windowDim(),AH=this.did||this.getDepth(),AF=mstrApp.getCurrentProjectId();f(mstrmojo.android.ui.PropertiesView.getPreviewSizes(),function(AI){mstrMobileApp.takeScreenShot(JSON.stringify({pid:AF,dssId:AH,x:AD.x,y:AD.y,w:Math.max(AD.w,AI.w),h:Math.max(AD.h,AI.h),pw:AI.w,ph:AI.h,ww:AG.w,wh:AG.h}));});},addFullScreenButton:function Z(AD){var AF=mstrmojo.desc(8430,"Enter Fullscreen"),AE=11;if(this.isFullScreen){AF=mstrmojo.desc(8429,"Exit Fullscreen");AE=10;}},enterFullScreen:function N(){this.frame.enterFullScreen();this.rootCtrl.enterFullScreen();this.isFullScreen=true;this.generateActionToolbar();mstrmojo.touchManager.raiseEvent({name:"fullScreenStateChange"});},exitFullScreen:function w(AD,AE){this.isFullScreen=false;this.frame.exitFullScreen(!AD);this.rootCtrl.exitFullScreen(!AD,AE);this.generateActionToolbar();mstrmojo.touchManager.raiseEvent({name:"fullScreenStateChange"});},viewTap:function B(){},cancelFlashFullScreen:function j(){this.frame.cancelFlashFullScreen();this.rootCtrl.cancelFlashFullScreen();},getMagnifierConfig:function e(){var AD=this.frame.getPosition();return{curtainPosition:AD};},share:function l(AF,AE){var AG=M.call(this),AD=this.ttl;window.setTimeout(function(){mstrMobileApp.takeScreenShotAndSend(AG,JSON.stringify({attachmentName:mstrmojo.string.decodeHtmlString(AD),subject:AF,useDefault:AE}));},100);},getBottomToolBarHeight:function S(){return(!mstrApp.isTablet()&&!this.isFullScreen&&!mstrApp.isLandscape())?(Math.round(I*mstrMobileApp.getDeviceDPI()/160)):0;},startAnnotate:function s(){if(!!this.ignoreAnnotationMenuItem){return ;}this.ignoreAnnotationMenuItem=true;mstrMobileApp.showProgress([mstrmojo.desc(8445,"Loading")],false);var AE=M.call(this),AD=this;window.setTimeout(function(){mstrMobileApp.startAnnotate(AE,mstrmojo.string.decodeHtmlString(AD.ttl),"javascript:mstrmojo.all."+AD.id+".onAnnotationFinished()");},100);},onAnnotationFinished:function h(){this.ignoreAnnotationMenuItem=false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.controllers._SupportsQueuedTransactions","mstrmojo.android.controllers._HasFolderView","mstrmojo.hash");mstrmojo.requiresDescs(8385);function F(P,K,O){mstrApp.setCurrentProjectId(P.did);var N=mstrmojo.hash.copy(P),M={};if(O){M.hsc=true;}var L=P.rtf;if(L){N.did=N.folderID=L.did;}else{N.systemFolder=7;}N.st=2048;K.spawn(mstrApp.controllerFactory.newController("Folder",M),N);}function D(L){if(L.length<1){var K=this._noPrjView;if(!K){K=this._noPrjView=new mstrmojo.android.ui.NoProjectsView({controller:this});}this.rootCtrl.updateDisplayMessage(K);}}var C=mstrmojo.android.controllers.ProjectsController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,[mstrmojo.android.controllers._SupportsQueuedTransactions,mstrmojo.android.controllers._HasFolderView],{scriptClass:"mstrmojo.android.controllers.ProjectsController",start:function B(N){this._super(N);var M=mstrApp.getConfiguration().getProjectList(),L=this.rootCtrl,K=this.initFolderView();K.set("items",M);L.updateFolder(K);this.updatePropertiesMsg();D.call(this,M);},openFolder:function G(K){F(K,this);},getDefaultMessage:function A(){return mstrmojo.desc(8385,"Select a project to view contents");},makeCurrent:function J(L){this._super(L);this.view.clearSelect();var K=this.rootCtrl;K.updateFolder(this.view);K.restoreNavigation();this.updatePropertiesMsg();D.call(this,mstrApp.getConfiguration().getProjectList());},goUp:function I(){if(!this._super()){this.rootCtrl.goBack();}return true;},destroy:function H(){var K=this._noPrjView;if(K){K.destroy();}this._super();},updateActionToolbar:function E(K){this.getTxnToolbarButton(K);return this._super(K);}});C.spawnFolderController=F;}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.controllers._HasFolderView","mstrmojo.android.EnumMenuOptions");mstrmojo.requiresDescs(773,1089,9931);var E=mstrmojo.desc;var A=mstrmojo.android.EnumMenuOptions.REFRESH;function H(N){var O=this,P=function(S){var Q=O.view,R=O.rootCtrl,T;Q.set("items",S.items);if(R.getCurrent()===O){if(!O.hsc){T=E(1089,"Subscriptions");}R.updateFolder(Q,T);O.updatePropertiesMsg();}};mstrApp.modelFactory.newDataService("Subscriptions").getSubscriptions({success:P,failure:function(Q){if(mstrApp.isHosted()){P({items:[{n:"Subscriptions Unavailable"}]});}else{O.viewFailed(Q);}}},N);}mstrmojo.android.controllers.SubscriptionsController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,[mstrmojo.android.controllers._HasFolderView],{scriptClass:"mstrmojo.android.controllers.SubscriptionsController",init:function M(O){this._super(O);var N=mstrmojo.publisher;N.subscribe(N.NO_SRC,N.RECONCILE_END_EVENT,function(){H.call(this,true);},this.id);},start:function C(N){this._super(N);this.csp=N.csp;this.initFolderView();H.call(this,false);},openItem:function I(O){var N=O.st;if(N){this.spawnedItem=O;this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(N),O),O);}else{this.view.clearSelect();}},spawnFailed:function J(N){delete this.spawnedItem;this._super(N);},itemLongPressed:function G(N){if(N.st){return this._super(N);}return false;},getDefaultMessage:function B(){return E(9931,"Select a subscription to view its content.");},makeCurrent:function L(P){var N=this.spawnedItem;if(P&&N){delete N.unread;delete this.spawnedItem;}this._super(P);var O=this.rootCtrl;O.updateFolder(this.view,this.txt,P);O.restoreNavigation();this.updatePropertiesMsg();},goUp:function K(){if(!this._super()){this.rootCtrl.goBack();}return true;},updateActionToolbar:function F(N){N.addMenuItem(A,E(773,"Refresh"),A,true,5);return this._super(N);},handleMenuItem:function D(N,O){if(N===A){mstrMobileApp.restartReconciler();return ;}this._super(N,O);}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.EnumMenuOptions");mstrmojo.android.controllers.PromptsController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.PromptsController",doNotRefresh:true,start:function D(H){this._super(H);this.callback=H.callback;var F=this.prompts=H.prompts,E=this.view=this.newView("Prompts",{maskNode:H.maskNode,prompts:F,supportedPrompts:H.supportedPrompts});var G=F.host.n||H.n;this.rootCtrl.updatePrompts(E,G);},getDefaultMenus:function B(){return 0;},goUp:function C(){if(!this._super()){this.rootCtrl.goBack();}return true;},answerPrompts:function A(){var E=this.id;this.prompts.prepareAnswer({success:function(){try{var F=mstrmojo.all[E];F.prompts.validate();F.callback();}catch(G){mstrApp.onerror(G);return false;}return true;}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.hash","mstrmojo.array");mstrmojo.requiresDescs(8394);var H={FOLDER:1,RESULTSET:2,REPORTS:3,SETTINGS:4,SHAREDLIBRARY:5,SUBSCRIPTIONS:8,HELP:6};var V=1,Q=2,M=3,Z=4;var T=mstrmojo.hash,P=mstrmojo.array;function e(){this.rootView.setUpStatus(this.getCurrent().getUpStatus());}function B(o,p){var l=o&&o.getHomeScreenType();if(!o||(l<V||l>Z)){mstrmojo.err({name:"StartupError",message:o?"illegal default homescreen type, hsc="+l:"no device configuration found."});return false;}if(l>Q){var h=o.getHomeScreen(),j=h.pid,g=h.st;p.did=h.did;var q=h.systemFolder;if(q){p.systemFolder=q;}if(l===Z){var k=h.oi;j=p.pid=k.pid;g=k.st;p.did=k.did;p.csp=!!h.csp;}else{p.projectID=j;T.copyProps(["promptsAnswerXML","elementsPromptAnswers","valuePromptAnswers","objectsPromptAnswers","reportViewMode"],h,p);if(parseInt(p.reportViewMode,10)===2){g=769;}}mstrApp.setCurrentProjectId(j);p.st=g;}this.initHomeScreen(l,p);}var b=mstrmojo.android.controllers.RootController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.RootController",start:function G(){var g=mstrApp.getConfiguration(),h={hsc:true};this._lastOpened=P.filter(this._lastOpened,function(j){return !!g.getProject(j.projectID||j.pid);});B.call(this,g,h);},direct:function C(g){var h=new mstrmojo.MobileConfiguration({_cfg:g});mstrApp.closeAllDialogs();B.call(this,h,{});},restart:function W(){mstrApp.closeAllDialogs();var g=this.nextController;if(g){g.destroy();}this.start();},initHomeScreen:function I(g,h){this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(h.st),h),h);},initNav:function d(){var g=mstrApp.getConfiguration(),h=[{n:mstrmojo.desc(1873,"Home"),act:-1,fromNav:true}];if(g.isSubscriptionEnabled()){h.push({n:mstrmojo.desc(1089,"Subscriptions"),act:8,fromNav:true});}this.rootView.setNavigation(h,0);},updateLastOpened:function S(j){var h=this._lastOpened,g=mstrApp.getCurrentProjectId(),k;if(j){k=j.did||j.documentID||j.reportID||j.objectID;mstrmojo.array.forEach(h,function(o,l){if(o.xId===k&&o.projectID===g){h.splice(l,1);return false;}});}this.rootView.updateLastOpened(h);if(j){h=this._lastOpened=[T.copy(j,{projectID:g,xId:k})].concat(h);if(h.length>5){h.pop();}}},updateProperties:mstrmojo.emptyFn,updateFolder:function X(h,j,g){e.call(this);},updatePrompts:function U(g,h){this.updateContent(g,h);},updateTransactions:mstrmojo.emptyFn,closeTransactions:mstrmojo.emptyFn,updateContent:function O(h,k,g){var j=this.rootView;if(k!==undefined&&this._lastTitle!==k){this._lastTitle=k;j.setTitle(k);j.clearNavigation();}if(h){j.setContent(h,g);}e.call(this);},contentUpdated:function K(g){this.rootView.contentUpdated(g);},restoreNavigation:function a(){this.rootView.restoreNavigation();},updateDisplayMessage:mstrmojo.emptyFn,setActionToolbarStatus:function J(g){this.rootView.setActionToolbarStatus(g);},getTitle:function L(){return this._lastTitle||"";},jumpTo:function R(g){var h=g.act;if(h){if(!g.fromNav){if(!this.rootView.hasNavigationItems()){this.initNav();}else{this.restoreNavigation();}this.rootView.selectNavigationItem(g);}if(h===-1){this.restart();}else{if(h===H.SHAREDLIBRARY){this.spawn(mstrApp.controllerFactory.newController("Projects",{hsc:true}));}else{if(h===H.SUBSCRIPTIONS){this.spawn(mstrApp.controllerFactory.newController("Subscriptions",{hsc:true}));}}}return ;}this._super(g);},goHome:function E(){mstrApp.closeAllDialogs();var g=this.nextController;if(g){g.makeHome();}},makeCurrent:mstrmojo.emptyFn,setActionToolbar:function N(h,g){this.rootView.setActionToolbar(h,g);},enterFullScreen:function Y(){this.rootView.enterFullScreen();},flashFullScreen:function f(){this.rootView.flashFullScreen();},exitFullScreen:function D(g,h){this.rootView.exitFullScreen(g);},cancelFlashFullScreen:function A(){return this.rootView.cancelFlashFullScreen();},onorientationChange:function F(g){this._super(g);this.rootView.reset();this.raiseEvent({name:"rootOrientationChange",isLandscape:!!this.orientation});}});b.EnumHSType={DEFAULT:V,CUSTOM:Q,RESULTSET:M,FOLDER:Z};}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.controllers._SupportsQueuedTransactions","mstrmojo.android.controllers._HasFolderView","mstrmojo.android.EnumMenuOptions","mstrmojo.publisher","mstrmojo.array");mstrmojo.requiresDescs(773,8386,8388);var P=mstrmojo.array,M=mstrmojo.desc,U=mstrmojo.android.EnumMenuOptions,V=U.REFRESH;function B(){var a=this._requests;return a[a.length-1];}function Y(e,d,f){var b=this,a=this.view;e.csp=this.csp;f=f||{};this.dataService.getData(e,{success:function(g){a.set("items",g.items);if(d){B.call(b).res=g;}else{b._requests.push({p:e,res:g});}var h=f.success;if(h){h.call(b,g);}},failure:function(g){b.viewFailed(g);},canceled:function(){var g=f.canceled;if(g){g.call(b);}}},d);}function S(a){var b=B.call(this);b.orientation=mstrApp.isLandscape();b.idx=a;b.origin=this.view.getScrollPos();b.hasState=true;}function I(){var a=this.view;if(a&&!mstrApp.isTablet()){a.clearSelect();}}function D(a){var d=a.st,b={ttl:a.n,st:d,did:a.did,ab:a.ab,rtf:a.rtf};this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(d),b),b);}function K(e){if(!e.hasState){return ;}var b=this.view,f=(mstrApp.isTablet()&&e.orientation!==mstrApp.isLandscape()),a=e.idx,d={x:0,y:0};if(!f){d=e.origin;}b.restoreListState(a,d);b.items=e.res.items;b.refresh();if(f){b.scrollToItem(a);}}function X(a){var f=this._requests;if(a!==undefined){if(f.length<=a+1){return false;}f.splice(a+1);}else{f.pop();}var d=B.call(this);if(!d){return false;}K.call(this,d);var b=this.rootCtrl,e=d.res;b.updateFolder(null,e.n);b.contentUpdated(2048);this.updatePropertiesMsg();return true;}mstrmojo.android.controllers.FolderController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,[mstrmojo.android.controllers._SupportsQueuedTransactions,mstrmojo.android.controllers._HasFolderView],{scriptClass:"mstrmojo.android.controllers.FolderController",start:function H(b){this._super(b);this.ctrlType=2048;this.dataService=mstrApp.modelFactory.newDataService("Folder");this._requests=[];var a=this.initFolderView();Y.call(this,b,false,{success:function(e){if(b.systemFolder===7){e.n=b.n||b.txt;}var d=this.rootCtrl;d.updateFolder(this.view,e.n);if(this.hsc&&!mstrApp.isTablet()){d.updateContent(null,e.n);}this.updatePropertiesMsg();},canceled:function(){this.prevController&&this.prevController.makeCurrent();}});},openFolder:function N(a){S.call(this,a._renderIdx);this.view.resetListState();Y.call(this,a,false,{success:function(d){var b=this.rootCtrl;b.updateFolder(null,d.n);b.contentUpdated(2048);this.updatePropertiesMsg();},canceled:I});},openItem:function C(a){S.call(this,a._renderIdx);D.call(this,a);},itemLongPressed:function J(a){S.call(this,a._renderIdx);return this._super(a);},getDefaultMenus:function O(){return U.SETTINGS+U.HELP+U.LEARN;},getDefaultMessage:function T(){var a=this.view.items;return(a&&a.length)?M(8386,"Select a report, document or folder to view its content"):M(8388,"No items in folder");},makeCurrent:function G(a){this._super(a);var b=B.call(this);if(b){var d=(this.hsc&&mstrApp.isTablet())?undefined:b.res.n;this.rootCtrl.updateFolder(this.view,d,a);K.call(this,b);}},makeHome:function R(){this._super();X.call(this,0);},goBack:function Z(){if(this._super()){return true;}return X.call(this);},goUp:function L(){if(!this._super()){if(this._requests.length>1){X.call(this,0);}else{this.rootCtrl.goBack();}}return true;},getUpStatus:function W(){if(!this._super()){var a=this._requests;return !!(a&&a.length>1);}return true;},updateActionToolbar:function Q(a){this.getTxnToolbarButton(a);if(mstrMobileApp.isOnline()){a.addMenuItem(V,M(773,"Refresh"),V,true,5);}return this._super(a);},handleMenuItem:function A(b,a){if(b===V){Y.call(this,B.call(this).p,true,{success:function(){this.view._scroller.scrollTo(0,0);}});return false;}return this._super(b,a);},getPath:function E(){var a=[],b=this.id;P.forEach(this._requests,function(f,d){var e=f.res;a.push({n:e.n,fn:function(){X.call(mstrmojo.all[b],d);}});});return a;},goHome:function F(){X.call(this,0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.date","mstrmojo.locales","mstrmojo.hash");mstrmojo.requiresDescs(8391,8392);function F(M){var J=M.st;if(J===2048||J==="Project"){return undefined;}var K=mstrMobileApp.getCachedTime(M.sub_id||M.did,(M.sub_id)?-1:J,M.projectID||M.pid||""),L;if(K>0){var P=mstrmojo.date,O=mstrmojo.locales.datetime,N=P.getDateJson(new Date(parseInt(K,10)));L=P.formatDateInfo(N,O.DATEOUTPUTFORMAT)+" "+P.formatTimeInfo(N,O.TIMEOUTPUTFORMAT);}return mstrmojo.desc(8391,"Cached On:")+" "+(L||mstrmojo.desc(8392,"Not available"));}function I(K){var J=K.item;if(J){K=mstrmojo.hash.copy(K,{desc:J.desc||"",ttl:J.n||J.ttl||"",cached:F(J),did:J.did,st:J.st});}this.view.updateView(K);}mstrmojo.android.controllers.PropertiesController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.PropertiesController",doNotRefresh:true,start:function A(K){this._super(K);var J=this.view=mstrApp.viewFactory.newView("Properties",{controller:this});this.rootCtrl.updateProperties(J,"Properties");I.call(this,K);},updateItemProperties:function E(M,K,J,L){I.call(this,{defaultMsg:M,item:K,ctrlId:J,avail:L});},extractView:function D(){var J=this.view;J.parent.removeChildren(J);J.unrender();return J;},afterViewVisible:function B(){this.view.afterViewVisible();this._super();},restoreView:function C(J){J.unrender();this.rootCtrl.updateProperties(J);},makeCurrent:function H(J){this._super(J);this.rootCtrl.updateProperties(this.view,"Properties");},goUp:function G(){if(!this._super()){this.rootCtrl.goBack();}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.SimpleList","mstrmojo.android.EnumMenuOptions","mstrmojo.android.ui.Button","mstrmojo.hash","mstrmojo.array","mstrmojo.string","mstrmojo.num","mstrmojo.android.nativedialog.ListDialog");mstrmojo.requiresDescs(11,16,17,18,37,187,295,629,702,784,844,845,874,1088,1142,1563,1900,1905,2411,2461,2822,3157,4253,5191,6560,7227,7559,7561,7778,7779,7831,7840,8027,8360,8361,8362,8363,8364,8365,8366,8367,8368,8369,8370,8371,8372,8373,8374,8375,8376,8377,8378,8379,8390,8441,8447,8455,8456,8457,8458,8459,8489,8633,8634,8635,8760,9446,9447,9448,9449,9450,9451,9452,9456,9457,9458,9459,9460,9464,9465,9466,9467,9468,9469,9470,9471,9481,9790,9791,9792,9793,9794,9795,9796,9797,9807);var $ARR=mstrmojo.array,$HASH=mstrmojo.hash,$BTN=mstrmojo.android.ui.Button.newButton,$DESC=mstrmojo.desc,MENUS=mstrmojo.android.EnumMenuOptions,MENU_DELETE=MENUS.DELETE,MENU_ADD_SERVER=MENUS.ADD_SERVER,MENU_ADD_PROJECT=MENUS.ADD_PROJECT,MENU_ABOUT=MENUS.ABOUT,legalText;var STYLE_HEADER=1,STYLE_BUTTON=2,STYLE_VIEW_BUTTON=3,STYLE_TEXT=4,STYLE_LIST=5,STYLE_CHECK=6,STYLE_IMAGE=7,STYLE_TEXT_AREA=8,STYLE_NUMBER=9,STYLE_TIME=10;var TYPE_HOME=1,TYPE_SERVERS=2,TYPE_EDIT_SERVER=3,TYPE_SERVER_CREDS=4,TYPE_EDIT_PROJECT=5,TYPE_PROJECT_CREDS=6,TYPE_GENERAL=7,TYPE_ABOUT=8,TYPE_LEGAL=10,TYPE_CERT=12,TYPE_CERT_AUTH=12,TYPE_TRUSTED_CERTS=13;var DELETE_TXT={};DELETE_TXT[TYPE_EDIT_SERVER]=5191;DELETE_TXT[TYPE_EDIT_PROJECT]=11;var ADD_TXT={};ADD_TXT[TYPE_SERVERS]=5191;ADD_TXT[TYPE_EDIT_SERVER]=11;var MEMORY_LIMIT_LIST=[{v:25,n:"25MB"},{v:50,n:"50MB"},{v:100,n:"100MB"},{v:250,n:"250MB"},{v:500,n:"500MB"},{v:1024,n:"1GB"},{v:2048,n:"2GB"},{v:3072,n:"3GB"},{v:4096,n:"4GB"}];function getHourString(v){return $DESC(9797,"Every ## hours").replace("##",v);}var UPDATE_INTERVAL=[{v:1,n:$DESC(9796,"Every hour")},{v:2,n:getHourString(2)},{v:4,n:getHourString(4)},{v:10,n:getHourString(10)},{v:24,n:getHourString(24)}];var MODIFIED_ITEMS={};function getNewServerNode(){return{nm:"",po:80,pt:"MicroStrategyMobile",ty:1,rt:0,udc:true,wsc:{am:1,lo:"",ps:""},pdc:{am:1,lo:"",ps:""},pl:[],isNew:true};}function getNewProjectNode(){return{pc:{am:0,lo:"",ps:""},pn:"",sn:"",sp:0,udc:false,isNew:true};}function updateView(viewInfo,items){if(items){viewInfo.items=items;}else{items=viewInfo.items;}var view=this.view.getList(viewInfo.cfg.isHome),rootCtrl=this.rootCtrl;view.restoreListState(viewInfo.idx,viewInfo.origin);view.items=items;view.refresh();if(mstrApp.isTablet()&&viewInfo.cfg.isHome){if(!viewInfo.idx){view.singleSelect(0);}}rootCtrl.updateContent(null,(mstrApp.isTablet())?$DESC(7831,"Settings"):viewInfo.title);rootCtrl.contentUpdated("Settings");this.generateActionToolbar();}function generateView(fnView,item){var viewInfo=fnView.call(this,item);this.view.getList(viewInfo.cfg.isHome).resetListState();viewInfo.cfg.fnRedraw=fnView;this._viewInfos.push(viewInfo);updateView.call(this,viewInfo);}function getLastViewInfo(){var views=this._viewInfos;return views[views.length-1];}function getCurrentConfig(){var viewInfo=getLastViewInfo.call(this);return viewInfo&&viewInfo.cfg;}function cacheViewState(idx){var lastViewInfo=getLastViewInfo.call(this);lastViewInfo.idx=idx;lastViewInfo.origin=this.view.getList(lastViewInfo.cfg.isHome).getScrollPos();}function showCurrentView(){var current=getLastViewInfo.call(this),cfg=current.cfg;updateView.call(this,current,cfg.fnRedraw.call(this,cfg.item).items);this.view.getList(cfg.isHome).restoreListState(current.idx,current.origin);}function confirmDelete(itemName,fnOk){mstrmojo.confirm($DESC(8390,"Are you sure you want to delete #?").replace("#",itemName),[$BTN($DESC(221,"Cancel")),$BTN($DESC(1442,"OK"),fnOk)]);}function deleteItem(item){var me=this;confirmDelete(item.nm,function(){var mobileConfig=me.mobileConfigObj,cfg=getCurrentConfig.call(me),servers=mobileConfig.getWebServersList(),collection=(cfg.type===TYPE_SERVERS)?servers:servers[cfg.idx].pl;collection.splice(item.idx,1);me.view.getList(cfg.isHome).set("items",cfg.fnRedraw.call(me,cfg.item).items);me.mobileConfigObj.reconcileHomescreen();me.mobileConfigObj.saveConfiguration();me.connectivityChanged=true;});}function showPopup(item){var controller=this,dialog,dialogConfig;var dialogConfig={title:item.nm,cssClass:"mstrmojo-SimpleOptions",children:[{scriptClass:"mstrmojo.android.SimpleList",isElastic:true,items:[{n:$DESC(1088,"Edit"),v:1},{n:$DESC(629,"Delete"),v:2}],postselectionChange:function(evt){dialog.close();if(this.items[evt.added[0]].v===1){item.fn();}else{deleteItem.call(controller,item);}}}]};if(mstrApp.useBinaryFormat){$HASH.copy({isNative:true,scriptClass:"mstrmojo.android.nativedialog.ListDialog",choiceMode:mstrmojo.android.nativedialog.ListDialog.CHOICE_MODES.NONE,onSelectionChange:function(index){if(index===0){item.fn();}else{deleteItem.call(controller,item);}this.close();}},dialogConfig);}dialog=mstrApp.showDialog(dialogConfig);}function convertListToItems(list){var rtn=[],x=-1;$ARR.forEach(list,function(n,idx){if(n){rtn[++x]={n:n,v:idx};}});return rtn;}function editItem(item,value,node){var cfg=getCurrentConfig.call(this),type=cfg.type,path=item.pt.split("."),prop=path.pop(),mobileConfig=this.mobileConfigObj,servers=mobileConfig.getWebServersList();switch(type){case TYPE_EDIT_SERVER:node=servers[cfg.idx];if(!node){node=getNewServerNode();servers.push(node);this.connectivityChanged=true;}break;case TYPE_EDIT_PROJECT:var serverNode=servers[cfg.parent.idx],projects=serverNode.pl||[];node=projects[cfg.idx];if(!node){node=getNewProjectNode();this.mobileConfigObj.setPid(node);projects.push(node);this.connectivityChanged=true;}break;case TYPE_GENERAL:node=mobileConfig.getGeneralSettings();if(prop==="am"||prop==="lo"||prop==="ps"){node=mobileConfig.getDefaultServerCreds();}else{if(prop==="ebs"||prop==="tod"||prop==="ui"||prop==="wo"||prop==="co"){node=mobileConfig.getBackgroundSyncSettings();}}break;case TYPE_CERT:case TYPE_CERT_AUTH:case TYPE_TRUSTED_CERTS:break;default:throw new Error("AndroidSettingsController::editItem -- Unhandled edit action.");}if(path.length){node=$HASH.walk(path.join("."),node);}var oldValue=node[prop];if(oldValue!==value){node[prop]=value;item.v=value;var mods=MODIFIED_ITEMS[type]||{};mods[item.pt.replace(".","@")]=item;MODIFIED_ITEMS[type]=mods;$ARR.forEach(item.dependents,function(dependentItem){$ARR.forEach(["Hidden","Disabled"],function(prop){var fnDependent=dependentItem["fn"+prop];if(fnDependent){dependentItem[prop.toLowerCase()]=fnDependent(value);}});});if(prop==="lo"||prop==="ps"){node.um=true;}}}function newImage(props){return $HASH.copy(props,{nm:"",style:STYLE_IMAGE});}function newHeader(text,props){return $HASH.copy(props,{nm:text,style:STYLE_HEADER});}function newItem(title,value,style,props){return $HASH.copy(props,{nm:title,v:value,style:style});}function newBtnItem(title,value,fnClick,props){var controller=this;return newItem(title,value,STYLE_BUTTON,$HASH.copy({fn:function(){fnClick.call(controller);}},props));}function newViewItem(title,value,fnView,props){var controller=this;return newItem(title,value,STYLE_VIEW_BUTTON,$HASH.copy({fn:function(){cacheViewState.call(controller,this._renderIdx);generateView.call(controller,fnView,this);}},props));}function newEditItem(title,style,node,path,props){var controller=this;return newItem(title,$HASH.walk(path,node),style,$HASH.copy({pt:path,fn:function(value){editItem.call(controller,this,value,node);}},props));}function newListItem(title,node,path,items,props){return newEditItem.call(this,title,STYLE_LIST,node,path,$HASH.copy({items:items},props));}function newCheckItem(title,description,node,path,on,off,props){return newEditItem.call(this,title,STYLE_CHECK,node,path,$HASH.copy({desc:description,on:on,off:off},props));}function ellipsizeHeaderText(text,ellipsize){return ellipsize?mstrmojo.string.ellipsize(text,20):text;}function addTabletHeader(items,title,ellipsize){if(mstrApp.isTablet()){var headerTitle=[];$ARR.forEach(this._viewInfos,function(info,idx){if(idx&&info.title!==title){headerTitle.push('<div hidx="'+idx+'">'+ellipsizeHeaderText(info.title,(idx>1&&ellipsize))+"</div>");}});headerTitle.push("<em>"+ellipsizeHeaderText(title,ellipsize)+"</em>");items=[newHeader(headerTitle.join(""),{cls:"tablet-header"})].concat(items);}return items;}function validateServerChanges(cfg,mods){var servers=this.mobileConfigObj.getWebServersList(),server=servers[cfg.idx],serverCreds=server.wsc,serverAuth=serverCreds.am,projects=server.pl,isNewServer=server.isNew;if(isNewServer&&!mods.nm){servers.splice(cfg.idx,1);return false;}delete server.isNew;if(mods.nm||mods.po||mods.pt||mods.ty){$ARR.forEach(projects,function(project){mstrApp.removeProjectCaches(project);});}else{if(mods["wsc@lo"]&&(mods["wsc@am"]||(serverAuth===2||serverAuth===3))){var projectDefaultAuth=server.pdc.am;$ARR.forEach(projects,function(project){var projectAuth=(project.udc)?projectDefaultAuth:project.pc.am;if(projectAuth===2||projectAuth===64){mstrApp.removeProjectCaches(project);}});}}server.udc=(!serverAuth);if(!serverAuth){serverCreds.lo="";serverCreds.ps="";}this.mobileConfigObj.setWebServerList(servers);return(isNewServer||!!mods.nm);}function validateProjectChanges(cfg,mods){var servers=this.mobileConfigObj.getWebServersList(),projects=servers[cfg.parent.idx].pl,project=projects[cfg.idx],projectCreds=project.pc,projectAuth=projectCreds.am,isNewProject=project.isNew;if(isNewProject&&(!mods.pn||!mods.sn)){projects.splice(cfg.idx,1);return false;}delete project.isNew;if(!isNewProject&&(mods.pn||mods.sn||mods["pc@am"]||(projectAuth>0&&mods.lo))){mstrApp.removeProjectCaches(project.pid);this.mobileConfigObj.setPid(project);this.connectivityChanged=true;}project.udc=(!projectAuth);if(!projectAuth){projectCreds.lo="";projectCreds.ps="";}return(isNewProject||!!mods.pn||!!mods.sn);}function validateGeneralSettingsChanges(cfg,mods){var mobileConfig=this.mobileConfigObj,creds=mobileConfig.getDefaultServerCreds(),isAnonymousMode=(creds.am===1);if(mods.am||(mods.lo&&!isAnonymousMode)){$ARR.forEach(mobileConfig.getWebServersList(),function(server){if(server.udc){var defaultProjAuth=server.pdc.am;$ARR.forEach(server.pl,function(project){var projAuthMode=(project.udc)?defaultProjAuth:project.pc.am;if(projAuthMode===2||projAuthMode===64){mstrApp.removeProjectCaches(project.pid);}});}});}if(isAnonymousMode){creds.lo="";creds.ps="";}return false;}function newAuthenticationItems(type,node){var path="",fnDisabled=mstrmojo.emptyFn,items;if(type===TYPE_EDIT_SERVER||type===TYPE_SERVER_CREDS){items=convertListToItems([$DESC(8441,"Default"),$DESC(7778,"Anonymous"),$DESC(7227,"Basic"),$DESC(7779,"Windows"),$DESC(8027,"Trusted")]);if(type===TYPE_EDIT_SERVER){path="wsc";}fnDisabled=function(v){return(v<2||v===64);};if((type!==TYPE_SERVER_CREDS)&&node.udc){node[path].am=0;}}else{items=[{n:$DESC(8441,"Default"),v:0},{n:$DESC(3157,"Standard"),v:1},{n:$DESC(7779,"Windows"),v:2},{n:"LDAP",v:16},{n:$DESC(1563,"Database"),v:32},{n:mstrmojo.desc(8027,"Trusted"),v:64}];path=(type===TYPE_PROJECT_CREDS)?"pdc":"pc";fnDisabled=function(v){return(!v||parseInt(v,10)===2||parseInt(v,10)===64);};if((type!==TYPE_PROJECT_CREDS)&&node.udc){node[path].am=0;}}if(type===TYPE_SERVER_CREDS||type===TYPE_PROJECT_CREDS){items.shift();}path=(path&&path+".")||"";var rtn=[];if(!this.mobileConfigObj.getGeneralSettings().npc){var cfgLogin={disabled:fnDisabled($HASH.walk(path+"am",node)),fnDisabled:fnDisabled},userName=newEditItem.call(this,$DESC(17,"User Name"),STYLE_TEXT,node,path+"lo",cfgLogin),pwd=newEditItem.call(this,$DESC(18,"Password"),STYLE_TEXT,node,path+"ps",$HASH.copy(cfgLogin,{pwd:true}));rtn.push(newListItem.call(this,$DESC(2822,"Authentication"),node,path+"am",items,{dependents:[userName,pwd]}));rtn.push(userName);rtn.push(pwd);}else{rtn.push(newListItem.call(this,$DESC(2822,"Authentication"),node,path+"am",items));}return rtn;}function getEditProjectView(item){var idx=item.idx,settingsCfg=getCurrentConfig.call(this),server=this.mobileConfigObj.getWebServersList()[settingsCfg.idx]||getNewServerNode(),project=server.pl[idx]||getNewProjectNode(),items=[];items.push(newEditItem.call(this,$DESC(11,"Project"),STYLE_TEXT,project,"pn",{showHint:true}));items.push(newEditItem.call(this,$DESC(5191,"Server"),STYLE_TEXT,project,"sn",{showHint:true}));items=items.concat(newAuthenticationItems.call(this,TYPE_EDIT_PROJECT,project));return{title:item.nm,items:addTabletHeader.call(this,items,item.nm,true),cfg:{type:TYPE_EDIT_PROJECT,item:item,idx:idx,parent:settingsCfg,fnVal:validateProjectChanges}};}function getEditServerView(item){var controller=this,serverIndex=item.idx,server=this.mobileConfigObj.getWebServersList()[serverIndex]||getNewServerNode(),projects=server.pl||[],items=[];server.pl=projects;items.push(newEditItem.call(this,$DESC(7559,"Name"),STYLE_TEXT,server,"nm",{showHint:true}));items.push(newEditItem.call(this,$DESC(16,"Port"),STYLE_NUMBER,server,"po",{limits:{min:0,max:65535}}));items.push(newEditItem.call(this,$DESC(8489,"Path"),STYLE_TEXT,server,"pt"));items.push(newListItem.call(this,$DESC(8362,"Web server type"),server,"ty",convertListToItems(["J2EE","ASP.Net"])));items.push(newCheckItem.call(this,$DESC(8363,"Secure HTTP"),$DESC(9449,"Use HTTPS to access the mobile server"),server,"rt",1,0));items=items.concat(newAuthenticationItems.call(this,TYPE_EDIT_SERVER,server));items.push(newHeader($DESC(8364,"Default Project Credentials")));items=items.concat(newAuthenticationItems.call(this,TYPE_PROJECT_CREDS,server));items.push(newHeader($DESC(37,"Projects")));$ARR.forEach(projects,function(project,idx){items.push(newViewItem.call(controller,project.pn,project.sn,getEditProjectView,{idx:idx,fnPress:showPopup}));});return{title:item.nm,items:addTabletHeader.call(this,items,item.nm,true),cfg:{type:TYPE_EDIT_SERVER,item:item,idx:serverIndex,parent:getCurrentConfig.call(this),fnVal:validateServerChanges}};}function getLegalView(){var items=[],title=$DESC(8365,"Legal");if(!legalText){legalText="<p>"+$DESC(8633)+"</p><p>"+$DESC(8634)+"</p><p>"+$DESC(8635)+"</p>";}items.push(newItem(legalText,"",STYLE_TEXT_AREA,{noclick:true}));return{title:title,items:addTabletHeader.call(this,items,title),cfg:{type:TYPE_LEGAL}};}function getAboutView(){var items=[],title=mstrApp.isTablet()?$DESC(1142,"About"):$DESC(9457,"About #").replace("#","MicroStrategy");items.push(newImage.call(this,{noclick:true,cls:"mstr-logo"}));items.push(newItem.call(this,"MicroStrategy Mobile 9.4.1",$DESC(8366,"Build Number #").replace("#",mstrMobileApp.getAppVersion()),STYLE_BUTTON,{cls:"build-info",noclick:true}));items.push(newHeader($DESC(9456,"More Information"),{cls:"more-info"}));items.push(newViewItem.call(this,$DESC(8365,"Legal"),$DESC(9460,"Copyright disclosure"),getLegalView));items.push(newBtnItem.call(this,$DESC(9458,"Get in touch"),$DESC(9459,"Send us an email with your feedback, suggestions and appreciation!"),function(){var bodyMsg=[$DESC(9465,"I was looking through the MicroStrategy Mobile Android App. Please contact me with details on how I can:")];bodyMsg.push($DESC(9466," - Find out how I can use MicroStrategy Apps to drive my business."));bodyMsg.push($DESC(9467," - Have apps, based on my workflow, specifications and design, in two weeks."));bodyMsg.push($DESC(9468," - How I can partner with MicroStrategy for all my Mobile solutions."));bodyMsg.push($DESC(9469," - Attend a free, hands-on, class to teach developers how to build and maintain Mobile Business Apps."));bodyMsg.push("");bodyMsg.push($DESC(9470,"Thank you."));mstrMobileApp.sendEmail("info@microstrategy.com",$DESC(9464,"Request information about MicroStrategy Mobile"),bodyMsg.join("\r\n"),"");}));return{title:title,items:addTabletHeader.call(this,items,title),cfg:{type:TYPE_ABOUT}};}function getBackgroundSyncingItems(){var settings=this.mobileConfigObj.getBackgroundSyncSettings(),fnDisabled=function(v){return(!v||v===false);},depProps={disabled:fnDisabled($HASH.walk("ebs",settings)),fnDisabled:fnDisabled},timeOfDay=newEditItem.call(this,$DESC(9807,"Time of day"),STYLE_TIME,settings,"tod"),updateInterval=newListItem.call(this,$DESC(9792,"Update interval"),settings,"ui",UPDATE_INTERVAL,$HASH.copy(depProps,{dependents:[timeOfDay]})),wifi=newCheckItem.call(this,$DESC(9793,"Only over Wi-Fi"),null,settings,"wo",true,false,depProps),charge=newCheckItem.call(this,$DESC(9794,"Only if charging"),null,settings,"co",true,false,depProps),enable=newCheckItem.call(this,$DESC(9795,"Enable background syncing"),null,settings,"ebs",true,false,{dependents:[updateInterval,timeOfDay,wifi,charge,timeOfDay]}),items=[];items.push(enable);items.push(updateInterval);items.push(timeOfDay);items.push(wifi);items.push(charge);timeOfDay.disabled=updateInterval.disabled||(updateInterval.v!==24);timeOfDay.fnDisabled=function(){return(enable.v!==true)||(updateInterval.v!==24);};return items;}function deleteCertificate(item){var controller=this;confirmDelete(item.nm,function(){mstrApp.showMessage("Deleting...");window.setTimeout(function(){var cfg=getCurrentConfig.call(controller);mstrMobileApp.deleteCertificate();item.hidden=!mstrMobileApp.hasCertificate();$ARR.forEach(item.dependents,function(d){d.hidden=!item.hidden;});controller.view.getList(cfg.isHome).set("items",cfg.fnRedraw.call(controller,cfg.item).items);mstrApp.hideMessage();},100);});}function showPopupDeleteCertificate(item){var controller=this,dialog;dialog=mstrApp.showDialog({title:item.nm,cssClass:"mstrmojo-SimpleOptions",children:[{scriptClass:"mstrmojo.android.SimpleList",isElastic:true,items:[{n:$DESC(1900,"View"),v:1},{n:$DESC(629,"Delete"),v:2}],postselectionChange:function(evt){dialog.close();if(this.items[evt.added[0]].v===1){item.fn();}else{if(this.items[evt.added[0]].v===2){deleteCertificate.call(controller,item);}}}}]});}function getCertificateDetailsView(item){var detailsStr=mstrMobileApp.getCertificateDetails(),details=eval("("+detailsStr+")"),items=[],result="",i;if(details.prs){for(i=0;i<details.prs.pr.length;++i){var pr=details.prs.pr[i];var name;if(pr.n==="edat"){name=$DESC(8457,"Expiration");}else{if(pr.n==="issr_n"){name=$DESC(8458,"Issuer");}else{name=pr.n;}}result+=name+": "+pr.v+"<br/>";}items.push(newItem.call(this,result,"",STYLE_TEXT_AREA,{disabled:true}));return{title:item.nm,items:addTabletHeader.call(this,items,item.nm),cfg:{type:TYPE_CERT,item:item}};}throw details.message||"No certificate details available";}function getTrustedCertificatesView(item){var result=mstrMobileApp.getTrustedCertificates(),jsonResult=eval("("+result+")"),items=[],i;if(jsonResult&&jsonResult.certs){for(i=0;i<jsonResult.certs.length;++i){var cert=jsonResult.certs[i].dsc;items.push(newItem(cert,"",STYLE_TEXT_AREA,{disabled:true}));}}return{title:item.nm,items:addTabletHeader.call(this,items,item.nm),cfg:{type:TYPE_TRUSTED_CERTS,item:item}};}function getCertificateAuthenticationFieldsView(item){var result=mstrMobileApp.getCertificateAuthenticationFields(),jsonResult=eval("("+result+")"),items=[],controller=this,i=0;if(jsonResult.login_info){var settings={},loginInfoField=jsonResult.login_info.field;for(i=0;i<loginInfoField.length;++i){var field=loginInfoField[i],cfgAuth={};settings[field.n]="";if(!!field.pass){cfgAuth=$HASH.copy(cfgAuth,{pwd:true});}items.push(newEditItem.call(this,field.dn,((field.tp==="numeric")?STYLE_NUMBER:STYLE_TEXT),settings,field.n,cfgAuth));}items.push(newItem.call(this,"Submit","",STYLE_BUTTON,{fn:function(){mstrApp.showMessage();window.setTimeout(function(){var responseStr=mstrMobileApp.getNewCertificate(JSON.stringify(settings));mstrApp.hideMessage();var response=eval("("+responseStr+")"),message=response.message;if(message){window.alert(response.message);}else{window.alert("Certificate obtained");if(item&&item.nm==="Get Certificate"){item.hidden=mstrMobileApp.hasCertificate();$ARR.forEach(item.dependents,function(d){d.hidden=!d.hidden;});}mstrApp.goBack();}},100);}}));var title=jsonResult.login_info.msg;return{title:title,items:addTabletHeader.call(this,items,title),cfg:{type:TYPE_CERT_AUTH,item:item}};}throw new Error(jsonResult.message);}function getGeneralSettingsView(item){var mobileConfig=this.mobileConfigObj,generalSettings=mobileConfig.getGeneralSettings(),items=[];items.push(newEditItem.call(this,$DESC(8367,"Network Timeout (seconds)"),STYLE_NUMBER,generalSettings,"nt",{limits:{min:0,max:9999}}));items.push(newEditItem.call(this,$DESC(7840,"Maximum Columns in Grid"),STYLE_NUMBER,generalSettings,"mgc",{limits:{min:0,max:9999}}));if(generalSettings.usd){var diagnosticMode=newCheckItem.call(this,$DESC(8760,"Diagnostic Mode"),$DESC(9450,"Store a log file in the device"),{b:mobileConfig.getDiagnosticMode()},"b",true,false);diagnosticMode.fn=function(value){mobileConfig.setDiagnosticMode(value);this.v=value;};items.push(diagnosticMode);}var monitor=newCheckItem.call(this,$DESC(9471,"Monitor Network Status"),$DESC(9790,"Notify the user when connection quality is below optimal"),generalSettings,"mns",true,false);var fn=function(value){mstrMobileApp.setNetworkMonitoringEnabled(value);};monitor.fn=mstrmojo.func.composite([fn,monitor.fn]);if(generalSettings.mns===undefined){monitor.v=true;}items.push(monitor);items.push(newHeader($DESC(8361,"Mobile Server Default")));items=items.concat(newAuthenticationItems.call(this,TYPE_SERVER_CREDS,this.mobileConfigObj.getDefaultServerCreds()));if(generalSettings.usc){items.push(newHeader($DESC(8368,"Caching")));items.push(newListItem.call(this,$DESC(8369,"Memory limit"),generalSettings,"ml",MEMORY_LIMIT_LIST));items.push(newCheckItem.call(this,$DESC(8370,"Folder caching"),$DESC(9451,"Store folders information for offline analysis"),generalSettings,"fc",true,false));items.push(newCheckItem.call(this,$DESC(8371,"Clear cache when closed"),$DESC(9452,"Delete reports and documents information after exiting the app"),generalSettings,"cc",2,1));}items.push(newHeader($DESC(8459,"Certificates")));if(generalSettings.ucs!==undefined&&generalSettings.ucs!==""&&generalSettings.ucs){var hasCert=mstrMobileApp.hasCertificate(),certItem,getCertItem;certItem=newViewItem.call(this,"Device Certificate","",getCertificateDetailsView,{fnPress:showPopupDeleteCertificate,hidden:!hasCert});getCertItem=newViewItem.call(this,"Get Certificate","",getCertificateAuthenticationFieldsView,{hidden:hasCert,dependents:[certItem]});certItem.dependents=[getCertItem];items.push(certItem);items.push(getCertItem);}items.push(newViewItem.call(this,$DESC(8447,"Trusted Certificates"),"",getTrustedCertificatesView,{hidden:false}));if(mstrMobileApp.isDPCEnabled()){items.push(newHeader($DESC(9481,"Device Passcode")));items.push(newItem.call(this,$DESC(1905,"Reset"),"",STYLE_BUTTON,{fn:function(){mstrMobileApp.resetDPC();}}));}items.push(newHeader($DESC(9791,"Background Syncing")));items=items.concat(getBackgroundSyncingItems.call(this));return{title:item.nm,items:addTabletHeader.call(this,items,item.nm),cfg:{type:TYPE_GENERAL,fnVal:validateGeneralSettingsChanges,item:item}};}function getMobileServersView(item){var config=this.mobileConfigObj,servers=config.getWebServersList(),items=[];$ARR.forEach(servers,function(server,idx){items.push(newViewItem.call(this,server.nm,"",getEditServerView,{idx:idx,fnPress:showPopup}));},this);return{title:item.nm,items:addTabletHeader.call(this,items,item.nm),cfg:{type:TYPE_SERVERS,item:item}};}function getHomeSettingsView(){var items=[newViewItem.call(this,$DESC(6560,"General Settings"),"",getGeneralSettingsView),newViewItem.call(this,$DESC(8375,"Mobile Servers"),"",getMobileServersView)];if(mstrApp.isTablet()){items.push(newViewItem.call(this,$DESC(1142,"About"),"",getAboutView));}return{title:$DESC(7831,"Settings"),items:items,cfg:{type:TYPE_HOME,isHome:true}};}function saveChanges(cfg,doSave){var type=cfg.type,modifications=MODIFIED_ITEMS[cfg.type];if(modifications){var fnValidate=cfg.fnVal;if(fnValidate){fnValidate.call(this,cfg,modifications);}if(doSave){this.mobileConfigObj.saveConfiguration();}delete MODIFIED_ITEMS[type];}}var $CTRL=mstrmojo.android.controllers.SettingsController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.SettingsController",connectivityChanged:false,init:function(props){this._super(props);this.mobileConfigObj=this.mobileConfigObj||mstrApp.getConfiguration();},start:function(params){var viewFn=params.viewFn;this._super(params);mstrApp.cancelPending();this._viewInfos=[];var view=this.view=this.newView("Settings");this.rootCtrl.updateContent(view,$DESC(7831,"Settings"));generateView.call(this,(viewFn&&eval("("+viewFn+")"))||getHomeSettingsView);},getDefaultMenus:function getDefaultMenus(){return MENUS.HELP;},updateActionToolbar:function updateActionToolbar(tbCfg){var cfg=getCurrentConfig.call(this),cfgType=cfg&&cfg.type,deleteDescId=DELETE_TXT[cfgType],addDescId=ADD_TXT[cfgType];if(addDescId){var menuId=MENU_ADD_SERVER,iconId=19;if(cfgType===TYPE_EDIT_SERVER){menuId=MENU_ADD_PROJECT;iconId=20;}tbCfg.addToolbarBtn(menuId,$DESC(9446,"Add #").replace("#",$DESC(addDescId,"Item")),menuId,true,iconId);}if(deleteDescId){tbCfg.addMenuItem(MENU_DELETE,$DESC(8379,"Delete #").replace("#",$DESC(deleteDescId,"Item")),MENU_DELETE,true,16);}if(!mstrApp.isTablet()&&cfgType!==TYPE_ABOUT&&cfgType!==TYPE_LEGAL){tbCfg.addMenuItem(MENU_ABOUT,$DESC(1142,"About"),MENU_ABOUT,true,21);}return this._super(tbCfg);},handleMenuItem:function handleMenuItem(group,cmdId){var cfg=getCurrentConfig.call(this),type=cfg.type,servers=this.mobileConfigObj.getWebServersList(),isServer=(type===TYPE_EDIT_SERVER);switch(group){case MENU_ABOUT:cacheViewState.call(this,-1);generateView.call(this,getAboutView);break;case MENU_ADD_SERVER:case MENU_ADD_PROJECT:cacheViewState.call(this,-1);if(group===MENU_ADD_SERVER){generateView.call(this,getEditServerView,{nm:$DESC(9447,"New Server"),idx:servers.length});}else{var server=servers[cfg.item.idx];generateView.call(this,getEditProjectView,{nm:$DESC(9448,"New Project"),idx:(server&&server.pl.length)||0});}break;case MENU_DELETE:var collection;if(isServer){collection=servers;}else{if(type===TYPE_EDIT_PROJECT){var idx=cfg.parent.idx;collection=servers[idx]&&servers[idx].pl;}}if(collection){var me=this,item=collection[cfg.idx];var okFn=function(){collection.splice(cfg.idx,1);me.mobileConfigObj.reconcileHomescreen();me.mobileConfigObj.saveConfiguration();me.view.getList(cfg.isHome).set("items",cfg.parent.fnRedraw.call(me,cfg.parent.item).items);me.goBack();me.connectivityChanged=true;};if(item){confirmDelete(item.nm||item.pn,okFn);}else{okFn();}}else{this.goBack();}return false;}return this._super(group,cmdId);},goBack:function goBack(){if(this._super()){return true;}var currentConfig=getCurrentConfig.call(this);saveChanges.call(this,currentConfig,true);var viewInfos=this._viewInfos;viewInfos.pop();if(currentConfig.type===TYPE_EDIT_SERVER&&mstrApp.deviceType===3&&this.mobileConfigObj.getWebServersList().length===0){viewInfos.pop();}var current=getLastViewInfo.call(this);if(!current||(mstrApp.isTablet()&&viewInfos.length===1)){if(this.connectivityChanged){this.rootCtrl.restart();return true;}return false;}showCurrentView.call(this);return true;},goUp:function goUp(){if(!this._super()){$ARR.forEach(this._viewInfos,function(view){saveChanges.call(this,view.cfg);},this);this.mobileConfigObj.saveConfiguration();this.rootCtrl[(this.connectivityChanged)?"restart":"goHome"]();}return true;},jumpTo:function jumpTo(idx,showView){var viewInfos=this._viewInfos,targetIdx=idx+1;$ARR.forEach(viewInfos,function(view,vIdx){if(vIdx>targetIdx){saveChanges.call(this,view.cfg);}},this);viewInfos.splice(targetIdx);if(showView){showCurrentView.call(this);}}});$CTRL.STYLES={HEADER:STYLE_HEADER,BUTTON:STYLE_BUTTON,VIEW_BUTTON:STYLE_VIEW_BUTTON,TEXT:STYLE_TEXT,LIST:STYLE_LIST,CHECK:STYLE_CHECK,IMAGE:STYLE_IMAGE,TEXT_AREA:STYLE_TEXT_AREA,NUMBER:STYLE_NUMBER,TIME:STYLE_TIME};}());(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz","mstrmojo.hash");mstrmojo.CheckList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.CheckList",inputType:"checkbox",cssClass:"mstrmojo-CheckList",itemCssClass:"mstrmojo-CheckList-item"});mstrmojo.requiresCls("mstrmojo._InputListHoriz");mstrmojo.CheckListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.CheckListHoriz",inputType:"checkbox",cssClass:"mstrmojo-CheckListHoriz",itemCssClass:"mstrmojo-CheckListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz");mstrmojo.RadioList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.RadioList",inputType:"radio",cssClass:"mstrmojo-RadioList",itemCssClass:"mstrmojo-RadioList-item",onenabledChange:function A(B){for(var C=0;C<this.items.length;C++){this._getItemNode(C).firstChild.disabled=!B.value;}}});mstrmojo.RadioListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.RadioListHoriz",inputType:"radio",cssClass:"mstrmojo-RadioListHoriz",itemCssClass:"mstrmojo-RadioListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.MobileDateTimePicker","mstrmojo._IsInputControl","mstrmojo.android._HasPreviewButton","mstrmojo.date","mstrmojo.expr","mstrmojo.locales","mstrmojo.hash");mstrmojo.requiresDescs(2052,2170,7656);var I=mstrmojo.date,F=mstrmojo.desc,C=mstrmojo.hash,K=5,N=6,A=mstrmojo.expr.DTP;mstrmojo.android.inputControls.DateTimePickerDIC=mstrmojo.declare(mstrmojo.ui.MobileDateTimePicker,[mstrmojo._IsInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.DateTimePickerDIC",cssText:"",valueField:"dtValue",popupTitle:"",init:function M(O){var P=O.dic;if(P.min!==undefined){O.min=I.parseDateAndOrTime(P.min);}if(P.max!==undefined){O.max=I.parseDateAndOrTime(P.max);}O[this.valueField]=C.clone(I.parseDateAndOrTime(O.value));if(P.t===K){O.dtp=P.ict?A.TIMESTAMP:A.DATE;O.popupTitle=P.ict?F(7656,"Date and Time"):F(2052,"Date");}else{if(P.t===N){O.dtp=A.TIME;O.minuteInterval=O.dic.itv;O.popupTitle=F(2170,"Time");}}this._super(O);},getCurValue:function L(W){var T=this[this.valueField]||{},S=this.getDate()||T.date||{year:1970,month:1,day:1},R=this.getTime()||T.time||{hour:0,min:0,sec:0},Q=this.dic,P=parseInt(Q.dt,10),V=mstrmojo.locales.datetime,U=V.TIMEOUTPUTFORMAT,O=V.DATEOUTPUTFORMAT,Y=I.formatDateInfo(S,O),X=I.formatTimeInfo(R,U);if(W){if(Q.t===K){return Q.ict?(Y+" "+X):Y;}return X;}if(P===A.TIMESTAMP){return Y+" "+X;}if(P===A.TIME){return X;}return Y;},getTime:function E(){if(!mstrApp.useBinaryFormat){return this._super();}else{return this[this.valueField].time;}},getDate:function D(){if(!mstrApp.useBinaryFormat){return this._super();}else{return this[this.valueField].date;}},updateTime:function H(O){if(mstrApp.useBinaryFormat){var P=this[this.valueField].time;P.hour=O.hour;P.min=O.min;}},updateDate:function G(O){if(mstrApp.useBinaryFormat){var P=this[this.valueField].date;P.year=O.year;P.month=O.month;P.day=O.day;}},updateDateAndTime:function B(O){if(mstrApp.useBinaryFormat){this.updateTime(O.time);this.updateDate(O.date);}},renderPreview:function J(){this.renderPreviewButton(this.openerNode,this.getCurValue(true));}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.Popup","mstrmojo.array","mstrmojo.android.TextArea","mstrmojo._TouchGestures","mstrmojo.android.ui.Button","mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.android.nativedialog.AlertDialog");mstrmojo.requiresDescs(1442);var Q=mstrmojo.css,D=mstrmojo.dom,K=mstrmojo.array,M=mstrmojo.hash;var T=mstrmojo.android.Dialog=mstrmojo.declare(mstrmojo.android.Popup,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.Dialog",autoClose:false,btnVisible:true,init:function N(V){this._super(V);var U=["dialog"];if(this.title){U.push("has-ttl");}if(V.anchor){this.curtainPosition=mstrApp.getContentPosition();}Q.addWidgetCssClass(this,U);},preBuildRendering:function A(){var W=this.buttons;if(W&&!this.btnHbox){var U=this,X=this.id,V=function(){if(!U.manualClose){window.setTimeout(function(){var Y=mstrmojo.all[X];if(Y){Y.close();}},50);}};K.forEach(W,function(Y){Y.origFn=Y.onclick;Y.onclick=function(Z){if(this.origFn){if(this.origFn()===false){return ;}}V();Z.e.stopPropagation();Z.e.cancelBubble=true;};});}this._super();},postBuildRendering:function O(){if(this.onTitleClick){var U=this.id;D.attachEvent(this.titleNode,"click",function(V){mstrmojo.all[U].onTitleClick(V);});}return this._super();},getResizeHandler:function F(){var V=this.id,U=function(){var W=mstrmojo.all[V];if(W.dialogRefresh){W.dialogRefresh();}else{W.resizeDialog();W.positionDialog();}};return U;},resizeDialog:function C(){this._super();var f=this.buttons&&this.buttons.length;if(f){var V=this.buttonNode,X=this.btnVisible;if(!X){this.set("btnVisible",true);}var W=this.btnHbox.children,e=Q.getComputedStyle,U=e(V),b=e(W[0].domNode);var Y=V.clientWidth-parseInt(U.paddingLeft,10)-parseInt(U.paddingRight,10),d=parseInt(b.paddingLeft,10)+parseInt(b.paddingRight,10)+parseInt(b.borderLeftWidth,10)+parseInt(b.borderRightWidth,10),a=Y-(f*d);var Z=Math.floor(a/f);K.forEach(W,function(g){g.set("width",Z+"px");});this.set("btnVisible",X);}},resizeCurtain:function R(){var X=this.curtainNode,U=document.body,W=X.style,V=this.curtainPosition;W.width=U.scrollWidth+"px";if(V&&V.h){W.height=V.h+"px";}else{W.height=U.scrollHeight+"px";}if(V&&V.y){W.top=V.y+"px";}this.raiseEvent({name:"resizeCurtain"});},setButtonVisibility:function B(U){this.buttonNode.style.display=U?"block":"none";},createTitleBarButton:function S(V,U,W){var X=document.createElement("div");X.className=V;X.setAttribute("title",W||"");X[(mstrApp.isTouchApp())?"ontouchend":"onclick"]=U;this.titleNode.appendChild(X);}});var G=M.copy(T.prototype.markupMethods);G.onbtnVisibleChange=function(){this.buttonNode.style.display=(this.btnVisible)?"block":"none";};T.prototype.markupMethods=G;if(window.mstrConfig&&!window.mstrConfig.simpleDialog){var E=function(U){return[{scriptClass:"mstrmojo.android.TextArea",text:U,cssClass:"mstrmojo-androidAlert",isElastic:true}];};mstrmojo.alert=function L(X,V,W){var U={title:W||"MicroStrategy Mobile",buttons:[mstrmojo.android.ui.Button.newButton(mstrmojo.desc(1442,"OK"),function(){if(V){V();}})],children:E(X)};if(mstrApp.useBinaryFormat){M.copy({isNative:true,scriptClass:"mstrmojo.android.nativedialog.AlertDialog"},U);}mstrApp.showDialog(U);};mstrmojo.confirm=function H(X,V,W){var U={title:W||"MicroStrategy Mobile",buttons:V,children:E(X)};if(mstrApp.useBinaryFormat){M.copy({isNative:true,scriptClass:"mstrmojo.android.nativedialog.AlertDialog"},U);}mstrApp.showDialog(U);};mstrmojo.toast=function I(V,U,W){mstrApp.showToastNotification(V,U||3500);if(W){window.setTimeout(function(){W();},U);}};mstrmojo.mask={show:function P(U){mstrMobileApp.showProgress([U||""],false);},hide:function J(){mstrMobileApp.hideProgress();}};}}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.SuggestionList");function D(Y){var X=this.list,V=X.selectedIndex,U=X.items.length,W=Y?U-1:0;if(V===W){X.clearSelect();return ;}if(V===null||V<0){V=Y?0:U-1;}else{V+=Y?1:-1;}X.singleSelect(V);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,disableClick:false,getCandidatesThroughTaskCall:mstrmojo.emptyFn,onSuggestionItemSelect:function J(U){this.hideSuggestion();},getSearchPattern:function T(){return"";},getSuggestionPos:function N(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(V){var U=this.getSuggestion(V);if(!this.noCache&&U!==-1){this.updateSuggestion(U);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function M(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(){if(this.suggestionShown){this._lastOpened.nextHighlight();}},preHighlight:function H(){if(this.suggestionShown){this._lastOpened.preHighlight();}},getSuggestion:function S(h){var d=this.candidates,a=d&&d.items,X=d&&d.isComplete,g=this._last_hit;if(!this.noCache&&(d||g)){var f=this.filterCandidates(a,h,this.REQUEST_THRESHOLD),b=f.length,e=this.suggestCount,U=false;if(!X&&b<e){var V=g&&g.pattern;if(g&&V&&(h.indexOf(V)>-1)){U=true;var k=this.filterCandidates(g.items,h,this.REQUEST_THRESHOLD),Y=k&&k.length,W=mstrmojo.array,j=this.itemField,Z;for(Z=0;Z<Y;Z++){if(W.find(f,j,k[Z][j])===-1){f.push(k[Z]);}}b=f.length;}}if(!X&&((h.length>2&&b<this.REQUEST_THRESHOLD)||(b<e))){this.requestCandidates(h);return -1;}return(b<e)?f:f.slice(0,e);}this.requestCandidates(h);return -1;},requestCandidates:function A(U){this._request_pattern=U;var X=this,V=this.getSuggestionTarget(),W={success:function(e){if(!e){return ;}var d=X.getSuggestionTarget();if(!d||(V!==d)){return ;}var j=d.getSearchPattern(),a=e.items;X._last_hit={items:a,pattern:U};X.sz=e.sz;if(!X.noCache&&a){var f=(X.candidates&&X.candidates.items)||[],g=[].concat(a),b=a.length,Z;for(Z=0;Z<b;Z++){var Y=g[Z];if(mstrmojo.array.indexOf(f,Y)>-1){mstrmojo.array.removeItem(a,Y);}}if(X.candidates){X.candidates.items=f.concat(a);}}if(j&&j.indexOf(U)>-1){var h=X.filterCandidates(a,j);X.updateSuggestion(h);}},failure:function(Y){if(Y.getResponseHeader){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};this.getCandidatesThroughTaskCall({pattern:U,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},W);},filterCandidates:function Q(X,W,U){U=U||this.suggestCount;W=mstrmojo.string.regEscape(W);var Y=this.itemField,V=mstrmojo.array.filter(X,function(Z){return(new RegExp("\\s"+W+"|^"+W,"i")).test(Z[Y]);},{max:U});return V;},getHighlightedText:function P(W,Z){if(!this.highlightPattern||mstrmojo.string.isEmpty(W)){return Z;}try{if(!this.nameWildcards||mstr.$A.find([2,32],parseInt(this.nameWildcards,10))>-1){Z=Z.replace(new RegExp("(^|\\s)("+W+")","gi"),"$1<b>$2</b>");}else{var Y=W.split(" "),V,U;for(V=0,U=Y.length;V<U;V++){if(Y[V]!==""){Z=Z.replace(new RegExp("("+Y[V]+")","gi"),"<b>$1</b>");}}}}catch(X){}return Z;},updateSuggestion:function O(X){var V=X&&X.length,U=this.browseItemVisible;if(V||U){if(U){X=X||[];X.push({n:"Browse...",t:-99,cssClass:(V?"br":"bro")});}this.set("suggestionItems",X);if(this.suggestionShown){var W=this._lastOpened;if(W&&W.nudge){W.nudge();}if(this.autoSelect&&W){W.list.singleSelect(0);}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var U=this.opener;if(U&&U.onBrowserClose){U.onBrowserClose();}},onOpen:function(){var U=this.opener;if(U&&U.onBrowserOpen){U.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function L(){this.browserShown=false;},handleSuggestionItemSelect:function K(U,V){if(this.browseItemVisible&&U.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var W=this.zIndex;this.openPopup("ob",{zIndex:(W&&(W+10))||110});this.ob.browser.browse(mstrmojo.hash.copy(V,{folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes}));this.browserShown=true;}else{this.onSuggestionItemSelect(U);}},highlightPattern:true,suggestionPopupCssClss:"",suggestionPopup:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-ObjectInputBox-suggest",autoClose:true,locksHover:true,nextHighlight:function(){D.call(this,true);},preHighlight:function(){D.call(this,false);},getSelected:function M(){var U=this.list;return U.items[U.selectedIndex];},onOpen:function I(){var U=this.opener;if(U){mstrmojo.css.addClass(this.domNode,U.suggestionPopupCssClss||"");if(U.autoSelect){this.list.singleSelect(0);}if(U.nudge){U.nudge(this);}}},onClose:function F(){this.list.clearSelect();var U=this.opener;if(U){U.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,U.suggestionPopupCssClss||"");}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function R(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo.Magnifier","mstrmojo.hash");var A="xtab-selected-cell";mstrmojo._HasMagnifier={scriptClass:"mstrmojo._HasMagnifier",magnifiedNode:null,magnifier:null,magnifierHelper:null,onmagnifiedNodeChange:function(C){var E=C.valueWas,D=C.value;if(E){mstrmojo.css.removeClass(E,A);}if(D){mstrmojo.css.addClass(D,A);}},displayMagnifier:function B(J,F){var H=this.magnifierHelper,C=H.resolveTouchEvent(J),I,E,D;if(C){E=C.cell;D=C.pos;if(E!=this.magnifiedNode){I=H.resolveInfoToDisplay(C);if(I){this.set("magnifiedNode",E);if(!this.magnifier){var G=this;this.magnifier=mstrApp.showPopup(mstrmojo.hash.copy({scriptClass:"mstrmojo.Magnifier",onClose:function(){G.magnifier=null;G.set("magnifiedNode",null);},helper:H},F),E);}this.magnifier.updateContent();this.magnifier.resizeAndPosition(D);}else{if(this.magnifier){this.magnifier.close();}}}else{if(this.magnifier){this.magnifier.moveTo(D);}}}}};})();(function(){mstrmojo.requiresCls("mstrmojo.TableLayoutList","mstrmojo._IsTableLayoutListDIC","mstrmojo._IsInputControl","mstrmojo.css");function A(F){var E=[];mstrmojo.array.forEach(F,function(G){E.push(G.n);});return E;}var C=mstrmojo.css;mstrmojo.LikertScaleDIC=mstrmojo.declare(mstrmojo.TableLayoutList,[mstrmojo._IsTableLayoutListDIC,mstrmojo._IsInputControl],{scriptClass:"mstrmojo.LikertScaleDIC",styleCssClass:"scale",init:function(E){this._super(E);this.items=this.getItems();this.titleItems=A(this.items);},getDisplayValue:function B(){return(this.selectedIndex>=0)?this.items[this.selectedIndex].n:this.dv;},getLeftEndTitle:function D(E){return E>=0?(this.dic.mint||""):"";},getRightEndTitle:function(E){return E>=0?(this.dic.maxt||""):"";},postBuildRendering:function(){this._super();if(!mstrmojo.isDescendant(this.owner,this)&&this.showByDefault){this.set("height",(this.openerStyle.ih||0)+"px");this.set("width",(this.openerStyle.iw||0)+"px");}C.toggleClass(this.domNode,"disabled",!this.enabled);}});}());(function(){mstrmojo.requiresCls("mstrmojo._IsInputControl","mstrmojo.TableLayoutList","mstrmojo._IsTableLayoutListDIC","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var A=mstrmojo.dom,B=mstrmojo.css,D=mstrmojo.hash,C={0:"default",1:"stars_dots"};mstrmojo.RatingDIC=mstrmojo.declare(mstrmojo.TableLayoutList,[mstrmojo._IsTableLayoutListDIC,mstrmojo._IsInputControl],{scriptClass:"mstrmojo.RatingDIC",styleCssClass:"rate",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,mouseover,mouseout><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',lastIdx:null,init:function(E){this._super(E);this.items=this.getItems();this.starCount=this.items&&this.items.length;B.addWidgetCssClass(this,C[this.dic.stl||0]);},setRating:function(E){var G=0,H=this.starCount,F="less_equal";if(this.lastIdx==undefined||this.lastIdx!=E){for(G;G<H;G++){if(G<=E){B.addClass(this._getItemNode(G),F);}else{B.removeClass(this._getItemNode(G),F);}}this.lastIdx=E;}},onvalueChange:function(){this._super&&this._super();var E=mstrmojo.array.find(this.items,"v",this.value);this.setRating(E);},onmouseover:function(F){this._super&&this._super(F);var G=F.target||A.eventTarget(F.hWin,F.e),E=G&&G.getAttribute("idx");if(E!=undefined){this.setRating(E);}},onmouseout:function(F){this._super&&this._super(F);var E=mstrmojo.array.find(this.items,"v",this.value);this.setRating(E);},postBuildRendering:function(){this._super();if(!mstrmojo.isDescendant(this.owner,this)&&this.showByDefault){this.set("height",(this.openerStyle.ih||0)+"px");this.set("width",(this.openerStyle.iw||0)+"px");}var E=mstrmojo.array.find(this.items,"v",this.value);if(E>-1){this.setRating(E);}B.toggleClass(this.domNode,"disabled",!this.enabled);}});}());(function(){mstrmojo.requiresCls("mstrmojo.TableLayoutList","mstrmojo._IsTableLayoutListDIC","mstrmojo._IsInputControl","mstrmojo.css");mstrmojo.android.inputControls.RadioListDIC=mstrmojo.declare(mstrmojo.TableLayoutList,[mstrmojo._IsTableLayoutListDIC,mstrmojo._IsInputControl],{scriptClass:"mstrmojo.android.inputControls.RadioListDIC",styleCssClass:"radio",init:function(C){this._super(C);this.items=this.getItems();this.itemsPerRow=this.dic.ipr||0;},ontouchend:function(C){this.onclick(C);},setDirtyFlag:function A(D,C){mstrmojo.css.addClass(this.itemsNode||C,"tx-active");},postBuildRendering:function B(){this._super();var C=this.owner,D=mstrmojo.findAncestor(C,"performCanGrowCanShrink",null,null);if(D){window.setTimeout(function(){D.performCanGrowCanShrink([C],true);},50);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.PopupList","mstrmojo.array","mstrmojo.css");var F=mstrmojo.css,E=mstrmojo.array;mstrmojo.ui.editors.controls.ListPreviewButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ListPreviewButton",init:function G(L){this._super(L);var M=this.getListCfg(),K=this.itemValueField;M.alias="list";M.locksHover=true;M.slot="widgetHostNode";M.listHooks={select:function J(N,O){this.parent.set("selectedValue",O[K]);this.close();}};M.setDimensions=mstrmojo.emptyFn;this.addChildren([M]);F.addWidgetCssClass(this.list,"ctrl-popup-list");},getPopupWidget:function D(){return this.list;},items:null,onitemsChange:function H(){var J=this.items;if(J){this.list.set("items",J);}},selectedValue:"",itemValueField:"n",onselectedValueChange:function C(){var K=this.selectedValue,J=this.itemValueField,L=this.list;L.selectItems(E.filter(L.items||[],function(M){return M[J]===K;}),true);this.updatePreview();},updatePreview:function B(){throw new Error(this.scriptClass+" must implement updatePreview.");},getListCfg:function I(){return{scriptClass:"mstrmojo.ui.PopupList",selectionPolicy:"reselect"};},postBuildRendering:function A(){this.onitemsChange();this.onselectedValueChange();return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo.ui._IsPulldown","mstrmojo.ui.PopupList","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var I=mstrmojo.css,G=mstrmojo.array,F=mstrmojo.dom;mstrmojo.ui.Pulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown],{scriptClass:"mstrmojo.ui.Pulldown",onitemSelected:mstrmojo.emptyFn,allowHTML:true,init:function N(O){this._super(O);I.addWidgetCssClass(this.list,"ctrl-popup-list");},initChildren:function E(){this.children=this.getPopupListConfig();this._super();},getSelectedItem:function H(){var O=this.items;return O&&O[this.selectedIndex];},selectItemByField:function J(P,O){this.set("selectedIndex",G.find(this.items||[],P,O));},getPopupWidget:function D(){return this.list;},getPopupList:function K(){return this.list;},_set_items:function B(R,O){var Q=this.items;this.items=O;delete this.selectedIndex;if(Q!==O){var P=this.hasRendered;if(P){this.refresh();}return true;}return false;},onclick:function M(O){this._super(O);var Q=this,P=Q.getPopupWidget();Q.mw=Q.mw||function(R){if(!F.contains(P.domNode,F.eventTarget(self,R),true,document.body)){P.close();F.detachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",Q.mw);}};F.attachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",Q.mw);},_set_selectedIndex:function A(T,R){if((R!==0&&!R)||R<0){return false;}var P=this.selectedIndex=R,O=this.getPopupList(),Q=O.items,S=this.selectedNode;O.set("selectedIndex",P);if(S&&Q&&Q[P]){S.innerHTML=this.allowHTML?Q[P].n:mstrmojo.string.encodeHtmlString(Q[P].n);S.title=Q[P].title||"";}this.onitemSelected(Q[P],P);return true;},getPopupListConfig:function C(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",selectionPolicy:"reselect",locksHover:true,listHooks:{select:function O(R,S,Q){this.parent.set("selectedIndex",Q);this.close();}},getItemProps:function P(S,Q){var R=mstrmojo._IsList.getItemProps.call(this,S,Q);R.style=this.parent.itemCssText||"";return R;}};},children:[]});mstrmojo.ui.Pulldown.newPulldown=function L(P,T,O,S,R){S=S||{};S.items=P;var Q;if(R===true){Q=mstrmojo.hash.copy({scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:O||0},S);}else{Q=new mstrmojo.ui.Pulldown(S);if(O!==undefined){Q.set("selectedIndex",O);}}Q.postselectedIndexChange=function(U){var X=U.value,W=U.valueWas;if(X!==W){var V=this.items;T.call(this,V[X],V[W]);}};return Q;};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.Menu","mstrmojo.hash","mstrmojo.array");mstrmojo.ui.menus.MenuItemType=null;var U="separator";mstrmojo.ui.menus.MenuConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.MenuConfig",menus:null,menuCssClass:"",supportsScroll:false,maxHeight:0,hasMenuItems:function Q(){return !!this.menus.length;},getMenuItems:function E(V){return mstrmojo.array.filter(this.menus.slice().reverse(),function(Z,Y,X){var W=X[Y+1];return V||Z.cls!==U||(Y&&W&&W.cls!==U);}).reverse();},getMenuItem:function C(Y){var X=this.menus,V;if(X!==null){for(V=0;V<X.length;V++){var W=X[V];if(W.cls===Y){return W;}}}return null;},absorbMenuItems:function S(V){this.menus=this.menus.concat(V.menus);},addMenuItem:function I(d,Y,a,W,Z){var b,X,V;if(!d||typeof d==="string"){b=d;}else{b=d.n;X=d.ttp;}V={n:b,ttp:X,cls:Y,fn:a,ctxt:W};if(isNaN(Z)||Z>=this.menus.length){this.menus.push(V);}else{this.menus.splice(Z,0,V);}return V;},addCustomMenuItem:function T(a,X,Z,W,V){var Y=this.addMenuItem(a,X,Z,V);Y.getItemMarkup=W;return Y;},addDisabledMenuItem:function O(W,V){this.addNonInteractiveMenuItem(W,V,true);},addNonInteractiveMenuItem:function M(Z,W,V){var X=["non-int"];if(W){X.push(W);}if(V){X.push("disabled");}var Y=this.addMenuItem(Z,X.join(" "),mstrmojo.emptyFn);Y.dsbld=true;},addSeparator:function D(){this.addMenuItem("",U,function(){return false;});},addPopupMenuItem:function R(d,X,b,Y,W,Z){var a=["pop "];if(Y){a.push(Y);}var V=this.addMenuItem(d,a.join(" "),b,W,Z);V.pop=true;V.scope=X;return V;},addActionPopupMenuItem:function L(d,W,a,b,X,V,Z){var Y=this.addPopupMenuItem(d,W,b,(X||"")+" ax",V,Z);Y.actionFn=a;Y.ax=true;},addSubMenuItem:function K(Z,X,W,Y,V){this.addPopupMenuItem(Z,W,Y,X,V);},addEditorMenuItem:function P(Z,W,Y,V,X){this.addPopupMenuItem(Z,W,Y,"",V,X);},getToggleItemStates:function F(e,g,V,b,X,a){var Y,Z,W,d;if(typeof e==="string"){Y=Z=e;W=d="";}else{Y=e.on||"";Z=e.off||"";W=e.ttpOn||"";d=e.ttpOff||"";}var f=[{n:Y,ttp:W,cls:g+" on",fn:b,ctxt:a},{n:Z,ttp:d,cls:g,fn:V,ctxt:a}];if(!X){f.reverse();}return f;},addToggleMenuItem:function J(d,Y,a,X,W,b,V){var Z=this.getToggleItemStates(d,Y,a,X,b,V);return this.addDualStateItem(W,Z[0],Z[1]);},addDualStateItem:function G(W,V,X){return this.addMenuItem({n:V.n,ttp:V.ttp},V.cls,this.getDualStateHandler(W,V,X),V.ctxt);},getDualStateHandler:function H(W,V,X){return function(Z,a){var Y=[V,X];if(Z.cls===V.cls){Y.reverse();}Y[1].fn.call(mstrmojo.all[W],Z,a);Z.n=Y[0].n;Z.ttp=Y[0].ttp;Z.cls=Y[0].cls;};},addRadioMenuGroup:function B(X,d,Y,W,V,b,a){var Z=[];Y.forEach(function(h,e){if(h.separator){this.addSeparator();return ;}var k=h.text,j=(W||"")+" "+(h.cls||"")+(b?"":" radio")+(h.value===X?" on":""),g=function(){if(d.call(this.ctxt,h.value,X,h)===false){return false;}X=h.value;Z.forEach(function(l){l.cls=l.cls.replace(/ on$/,"")+(l.radioValue===X?" on":"");});return true;},f=a?this.addCustomMenuItem(k,j,g,a(h,e),V):this.addMenuItem(k,j,g,V);f.radioValue=h.value;Z.push(f);},this);},clear:function N(){this._super();this.menus=[];},newInstance:function A(V){return new mstrmojo.ui.menus.Menu(mstrmojo.hash.copy({popupConfig:this},V));}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.ui.editors.controls.ValidationTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,null,{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",errRevert:true,dtp:null,validationDelay:3000,orignText:null,trigger:mstrmojo.validation.TRIGGER.ONKEYUP,init:function(B){B=B||{};B.constraints=B.constraints||{};B.constraints.trigger=this.trigger;this._super(B);},prekeyup:function(B){if(B.e.keyCode===13){this.blur();return ;}this._super(B);},onfocus:function(){this.orignText=this.value;},onblur:function(){if(this.value!==this.orignText){this.validate();}},validate:function(){this._super();this.orignText=this.value;this.clearValDelayTimer();},preinput:mstrmojo.emptyFn,postinput:function(){var B=this.doValidation(this.value);if(B.code<=mstrmojo.validation.STATUSCODE.VALID){this.clearValidation();if(!this.errRevert){this.hideTooltip();}}},updateTooltipConfig:function(){this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onInvalid:function(){if(!this.errRevert){this.hideTooltip();this.showTooltip();}else{this.clearValidation();this.set("value",this.orignText);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui.TextInput","mstrmojo.ValidationTextBox","mstrmojo.hash");mstrmojo.android.ui.ValidationTextInput=mstrmojo.declare(mstrmojo.android.ui.TextInput,null,{scriptClass:"mstrmojo.android.ui.ValidationTextInput",valProps:null,getTextCfg:function A(){return mstrmojo.hash.copy(this.valProps,{scriptClass:"mstrmojo.ValidationTextBox",onEnter:function(){var D=this.parent,E=D.onEnter;if(E){if(this.isValid()){E.call(D,this.value);}}},onvalidationStatusChange:function(){var D=this.validationStatus,E=D&&D.code,F=this.parent.lblErr,G=E?D.msg:"";F.set("text",G);F.set("visible",!!G);}});},validate:function C(){return this.txt.validate();},isValid:function B(){return this.txt.isValid();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Slider","mstrmojo.MetricSelectorUtility","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.array","mstrmojo._FormatDefinition.NumberFormatCategory","mstrmojo.hash");mstrmojo.requiresDescs(8153,8154,8155,8156,8157,8158,8159,8160,8161,8162,8163,8164,8165,8166,8167,8168,8169,8170,7839,587,2204,2202,2203,7576,7575,7622);var U=mstrmojo.dom,N=mstrmojo.hash,S=mstrmojo.MetricSelectorUtility,k=mstrmojo._FormatDefinition.NumberFormatCategory,J=mstrmojo.desc,V=mstrmojo.css,X=mstrmojo.num,B=Math,b=B.max,H=B.min,e=B.floor,W=B.round,Z=9;function M(AE,AD,AB,AA){var AC="px",t=AE._length,r=AE.handleSize,q=AE.orCfg,AI=q.posCssP,u=q.lenCssP,w=false;AB=b(AB,-1);AA=H(AA+Z,t);if(AB>AA){w=true;}var AF=H(AB,AA),AG=b(AB,AA),AH=AG-AF-(w?0:r+Z),x=b(parseInt(AE[u],10)-(2*AE.cssBkBW)-(AG+r),0)-Z;if(AE.hasRendered){AD.handle1Node.style[AI]=AB+AC;AD.handle2Node.style[AI]=(AA-Z)+AC;var p=AD.lowerRange.style,z=AD.thumbNode.style,s=AD.upperRange.style;p[AI]=0;z[AI]=(AF+(w?0:r))+AC;s[AI]=(AG+r-Z)+AC;p[u]=b(AF,0)+AC;z[u]=AH+AC;s[u]=x+AC;}else{AC+=";";AI+=":";u+=":";AE.handle1CssText=AI+AB+AC;AE.handel2CssText=AI+(AA-Z)+AC;AE.lowerRangeCssText=u+b(AF,0)+AC;AE.thumbCssText=AI+(AF+r)+AC+u+AH+AC;AE.upperRangeCssText=AI+(AG+r-Z)+AC+u+x+AC;}return{handle1:AB,handle2:AA};}function O(p){this.getUnit=function(){return p._length/b((p.items.length-1),1);};this.calcMinMax=function(s,r){var t=p.unit;return{min:e(s/t+0.5),max:e(r/t+0.5)};};this.calcPxIdx=function(r){return e(r/p.unit+0.5);};this.getStep=function(){var s=p.high-p.low,r=parseInt(p.numFmts.cat,10),t=(r===4)?2:(r===5)?4:0;s=(s===0)?1:s;if(s>1){return(s>(p._length-2))?Number(Number(s/(p._length-2)).toFixed(p.numFmts.dp+t)):1;}return s/(p._length-2);};this.getIdx=function(r){return H(b(W((r-p.low)/p.step),0),p.items.length-1);};this.initialMetricSlider=function q(){var w=function(AK){return AK!==undefined&&AK!==null;},t=function(AK){return(w(AK.da)&&w(AK.da.low)&&w(AK.da.high)&&w(AK.da.cnt)&&w(AK.f)&&w(AK.ft)&&w(AK.qua));},s=function(AK){var AO=true,AN=true,AL=parseInt(AK.ft,10),AM=parseInt(AK.f,10);if(AL===S._GENERIC){AO=AM!==S.FN.ISNULL&&AM!==S.FN.ISNOTNULL&&AM!==S.FN.NOTIN&&AM!==S.FN.IN;}else{if(AL===S._PERCENT||AL===S._RANK){AN=AM!==S.MRPFN.INASCENDING&&AM!==S.MRPFN.INDESCENDING&&AM!==S.MRPFN.NOTINDESCENDING&&AM!==S.MRPFN.NOTINASCENDING;}}return !AO||!AN;},AH=0;p.include=p.parent.include;p.clsType="scm ";p.staticStatus=!(w(p.da)&&w(p.da.low)&&w(p.da.high)&&w(p.da.cnt)&&w(p.qua));if(p.staticStatus){p.da.low=1;p.da.high=7;p.ft=S._GENERIC;p.f=S.FN.BETWEEN;p.qua=S.Q._G;p.cs=[{n:"",v:1},{n:"",v:7}];p.numFmts={cat:9,dp:0,fm:""};}switch(p.qua){case 0:var AG=parseInt(p.numFmts.cat,10);AH=AG===4?2:AG===5?4:0;p.low=Number(Number(p.da.low).toFixed(p.numFmts.dp+AH));p.high=Number(Number(p.da.high).toFixed(p.numFmts.dp+AH));break;case 1:case 2:p.low=1;p.high=p.da.cnt;break;case 3:case 4:p.low=0;p.high=100;break;}var AJ=!p.staticStatus&&!p.da.nov;p.set("lowText",AJ?p.formatNumber(p.low):"");p.set("highText",AJ?p.formatNumber(p.high):"");p.step=(p.qua===1||p.qua===2)?1:this.getStep();p.low-=p.step;p.high+=p.step;p.cs1Vl=p.low;p.cs2Vl=p.high;var u=p.low,AC=p.high,AI=[],AE=0;if(w(u)&&w(AC)){var z=u,AB;for(AB=0;z<=AC;AB++,z+=p.step){AI[AB]={n:S.formatNumber(p.qua,z,p.numFmts),v:Number(Number(z).toFixed(p.numFmts.dp+AH))};}AE=AI.length;if(AE>0&&AI[AE-1].v!==AC){AI[AE-1]={n:S.formatNumber(p.qua,AC,p.numFmts),v:AC};}}p.items=AI;var r=S.OP,AD=p.cs,AA=(AD&&AD.length>0)?X.parseNumeric(String(AD[0].v).replace("%","")):u,x=(AD&&AD.length>1)?X.parseNumeric(String(AD[1].v).replace("%","")):AC;if(AA<p.low){p.frtUst=true;}if(x>p.high){p.ndUst=true;}p.opId=(p.f!==null&&p.ft!==null)?S.getOpIdxByfunc(p.f,p.ft):r._BETWEEN;switch(p.opId){case r._EQUALS:case r._NOT_EQUALS:p.cs1Vl=p.cs2Vl=AA;break;case r._LESS_EQUAL:case r._GREATER:p.cs1Vl=u;p.cs2Vl=AA;break;case r._GREATER_EQUAL:case r._LESS:p.cs1Vl=AA;p.cs2Vl=AC;break;case r._IN:case r._NOT_IN:case r._IS_NULL:case r._IS_NOT_NULL:break;default:p.cs1Vl=AA;p.cs2Vl=x;break;}p.cs1Idx=this.getIdx(p.cs1Vl);p.cs2Idx=this.getIdx(p.cs2Vl);var AF=parseInt(p.dt,10);p.cs1Nm=w(p.cs1Vl)?S.formatNumber(p.qua,p.cs1Vl,p.numFmts):p.items[p.cs1Idx].n;p.cs2Nm=w(p.cs2Vl)?S.formatNumber(p.qua,p.cs2Vl,p.numFmts):p.items[p.cs2Idx].n;p.unit=this.getUnit();p.set("unSet",(!t(p)||s(p)||(!p.cs||p.cs.length===0))&&!p.staticStatus);};this.updateOpCs=function(){var u=(p.cs1Vl>p.cs2Vl)?p.cs2Vl:p.cs1Vl,AB=(p.cs1Vl>p.cs2Vl)?p.cs1Vl:p.cs2Vl,t=p.low,x=p.high,AA=p.include,r=S.OP,w=parseInt(p.qua,10),s=(w===S.Q._PT||w===S.Q._PB),AC,z=[];if((u>=t&&AB<=x)||u<t||AB>x){p.opId=AA?r._BETWEEN:r._NOT_BETWEEN;}if(u===AB){p.opId=AA?r._EQUALS:r._NOT_EQUALS;}if(u===t&&AB<x){p.opId=AA?r._LESS_EQUAL:r._GREATER;}if(u>t&&AB===x){p.opId=AA?r._GREATER_EQUAL:r._LESS;}AC=t==u&&AB==x;if(!AC){switch(p.opId){case r._BETWEEN:case r._NOT_BETWEEN:z.push({dtp:5,v:X.toLocaleString(u)+(s?"%":"")});case r._EQUALS:case r._NOT_EQUALS:z.push({dtp:5,v:X.toLocaleString(AB)+(s?"%":"")});break;default:if(u>t){z.push({dtp:5,v:X.toLocaleString(u)+(s?"%":"")});}if(AB<x){z.push({dtp:5,v:X.toLocaleString(AB)+(s?"%":"")});}}}p.cs=z;p.parent.node.data.cs=z;p.set("unSet",AC);};this.updateThumb=function(){var r=p.cs1Idx,u=p.cs2Idx;if(r!==undefined&&u!==undefined){var s=p.unit,t=p.gap;N.copy(M(p,p,W(r*s-t),W(u*s-t)),p);}};this.joinConst=function(){var t=p.cs;if(t){var r=[],s;for(s in t){r.push(t[s].v);}return r.join(",");}};}var E="<span {@ttpCssText}>{@content}</span>";function D(){if(this.staticStatus){return null;}var s=this.ghost;if(!s){var w=this.containerNode.cloneNode(true),u=w.childNodes;V.addClass(w,["gh"]);s=this.ghost={containerNode:w,lowerRange:u[0],handle1Node:u[1],thumbNode:u[2],handle2Node:u[3],upperRange:u[4]};this.sdcNode.appendChild(w);}var q=this.orCfg,p=q.posCssP,r=q.lenCssP,t=this.id;mstrmojo.array.forEach(["lowerRange","containerNode","thumbNode","upperRange"],function(AC,x){var AB=mstrmojo.all[t],AA=AB[AC].style,z=s[AC].style;if(x){z[p]=AA[p];}z[r]=AA[r];});s.containerNode.style.display="block";return s;}mstrmojo.MetricSlider=mstrmojo.declare(mstrmojo.Slider,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.MetricSlider",markupString:'<div><div class="mstrmojo-Slider-summary"></div><div class="mstrmojo-Slider {@cssClass} {@clsType} {@clsOrientation}" style="{@cssText}" ><div class="cont" style=""><div class="sdc" style="position:absolute;{@sdcCssText}"><div class="sd" style="{@sdCssText}"><div class="bk left" style="{@lowerRangeCssText}"></div><div class="t1" style="{@handle1CssText}" mstrAttach:mouseover,mouseout,click></div><div class="t2 bk" style="{@thumbCssText}"></div><div class="t3" style="{@handel2CssText}" mstrAttach:mouseover,mouseout,click></div><div class="bk right" style="{@upperRangeCssText}"></div></div></div><div class="mstrmojo-Label" style="margin-top:9px;float:left;"></div><div class="mstrmojo-Label" style="margin-top:9px;float:right;"></div></div></div></div>',markupSlots:{summaryNode:function(){return this.domNode.childNodes[0];},sliderNode:function(){return this.domNode.childNodes[1];},dndNode:function(){return this.domNode.childNodes[1].childNodes[0];},sdcNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0];},containerNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0];},lowerRange:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0];},handle1Node:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[1];},thumbNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[2];},handle2Node:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[3];},upperRange:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[4];},tooltipNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0];},lowNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[1];},highNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[2];},editValueNode:function(){return this.domNode;}},markupMethods:{onlowTextChange:function(){this.lowNode.innerHTML=this.lowText||"";},onhighTextChange:function(){this.highNode.innerHTML=this.highText||"";},onfontChange:function(){this.lowNode.style.font=this.highNode.style.font=String(this.font);}},init:function g(q){this._super(q);this.handleSize=mstrmojo.MetricSlider.METRICSLIDERTHUMBWIDTH;this.clsType="scm";this.typeHelper=new O(this);this.useRichTooltip=false;},typeHelper:null,unSet:false,preBuildRendering:function A(){var s=this.orCfg,r=this.isHoriz;s.cPosCssP=r?"right":"bottom";s.cLenCssP=r?"height":"width";var w=s.lenCssP,u=this[w],t=parseInt(u,10),q=this.handleSize;var p=this._length=(isNaN(t))?0:(t-q-Z);if(p<=0){p=this._length=mstrmojo.MetricSlider.METRICSLIDERDEFAULTWIDTH-q;}if(u){this.bkCssText=w+":"+b(t-(2*this.cssBkBW),0)+"px;";this.sdcCssText=s.posCssP+":"+Z+"px;"+w+":"+p+"px;"+s.opPosCssP+":0px;";}this.typeHelper.initialMetricSlider();this.typeHelper.updateThumb();},postBuildRendering:function R(){this._super();if(!this.staticStatus&&!this.da.nov){var q=this.lowNode,p=parseInt(q.style.fontSize,10);if(isNaN(p)){q.style.fontSize=8*this.parent.model.getZoomFactor()+"pt";}this.updateSummary();}this.lowNode.style.marginLeft=Z+"px";this.highNode.style.marginRight=Z+"px";this.sliderNode.style.height="0px";},onmouseover:function G(p){this.showTooltip(p.e,self);},onmouseout:function f(p){this.hideTooltip(p.e,self);},summaryLabels:{db:J(8153,"Between ## and ###"),dnb:J(8154,"Not between ## and ###"),din:J(587,"In"),dnin:J(2204,"Not in"),dnull:J(2202,"Is Null"),dnnull:J(2203,"Is not Null"),req:J(8155,"Rank ="),rneq:J(8156,"Rank <>").replace("<>",String.fromCharCode(8800)),rexb:J(8157,"Rank exclude bottom"),rext:J(8158,"Rank exclude top"),rb:J(8159,"Rank bottom"),rt:J(8160,"Rank top"),rbt:J(8161,"Rank between ## and ###"),rnbt:J(8162,"Rank not between ## and ###"),rin:J(8163,"Rank in"),rnin:J(8164,"Rank not in"),peq:J(8165,"Percent ="),pneq:J(8166,"Percent <>").replace("<>",String.fromCharCode(8800)),pexb:J(8167,"Exclude bottom"),pext:J(8168,"Exclude top"),pb:J(7576,"Bottom"),pt:J(7575,"Top"),pbt:J(8153,"Between ## and ###"),pnbt:J(8154,"Not between ## and ###"),pin:J(8169,"Percent in"),pnin:J(8170,"Percent not in")},formatNumber:function h(w){var s=this,AB=Math.abs(w),AA=s.numFmts.cat,r=1000,AC=["K","M","B","T","P","E","Z","Y"],x=AC.length,u;if(AB>=r&&(AA===k.Default||AA===k.Fixed||AA===k.General||AA===k.Currency)){for(u=0;u<x;u++,r*=1000){if(AB<r*1000){var p=AB/r,t=(p*10).toFixed(0)%10>0?1:0,z=p.toFixed(t)+AC[u];return w<0?"("+z+")":z;}}}return S.formatNumber(s.qua,w,s.numFmts);},updateSummary:function L(){if(this.summaryNode&&!this.staticStatus){var AK=this.f,t=this.ft,AJ=S,AE=S.FN,q=S.MRPFN,AB="",AH=(this.cs1Vl<this.cs2Vl)?this.cs1Vl:this.cs2Vl,AF=(this.cs1Vl>this.cs2Vl)?this.cs1Vl:this.cs2Vl,z=this.formatNumber(AH),x=this.formatNumber(AF),w=this.typeHelper,AA=this.summaryLabels,p=parseInt(t,10),u=parseInt(AK,10),AG=(p===AJ._GENERIC&&(u===AE.ISNULL||u===AE.ISNOTNULL||u===AE.NOTIN||u===AE.IN))||((p===AJ._PERCENT||p===AJ._RANK)&&(u===q.INASCENDING||u===q.INDESCENDING||u===q.NOTINDESCENDING||u===q.NOTINASCENDING));if(this.unSet||AH<=this.low&&AF>=this.high&&this.include){AB=mstrmojo.desc(2058,"All");}if(!this.unSet||AG){switch(t){case AJ._GENERIC:switch(AK){case AE.EQUALS:AB="= "+z;break;case AE.NOTEQUALS:AB=String.fromCharCode(8800)+" "+z;break;case AE.GREATERTHAN:AB="> "+x;break;case AE.GREATERTHANEQUALS:AB=String.fromCharCode(8805)+" "+z;break;case AE.LESSTHAN:AB="< "+z;break;case AE.LESSTHANEQUALS:AB=String.fromCharCode(8804)+" "+x;break;case AE.BETWEEN:AB=z+" - "+x;break;case AE.NOTBETWEEN:AB=mstrmojo.desc(1099)+" "+z+" - "+x;break;case AE.ISNULL:AB=AA.dnull;break;case AE.ISNOTNULL:AB=AA.dnnull;break;case AE.IN:AB=AA.din+" "+w.joinConst();break;case AE.NOTIN:AB=AA.dnin+" "+w.joinConst();break;}break;case AJ._PERCENT:case AJ._RANK:var AI="r";if(parseInt(t,10)===AJ._PERCENT){AI="p";}switch(AK){case q.EQUALSDESCENDING:case q.EQUALSASCENDING:AB=AA[AI+"eq"]+" "+z;break;case q.NOTEQUALSDESCENDING:case q.NOTEQUALSASCENDING:AB=AA[AI+"neq"]+" "+z;break;case q.GREATERTHANEQUALSASCENDING:AB=AA[AI+"exb"]+" "+z;break;case q.GREATERTHANASCENDING:AB=AA[AI+"exb"]+" "+x;break;case q.GREATERTHANEQUALSDESCENDING:AB=AA[AI+"ext"]+" "+z;break;case q.GREATERTHANDESCENDING:AB=AA[AI+"ext"]+" "+x;break;case q.LESSTHANASCENDING:AB=AA[AI+"b"]+" "+z;break;case q.LESSTHANEQUALSASCENDING:AB=AA[AI+"b"]+" "+x;break;case q.LESSTHANDESCENDING:AB=AA[AI+"t"]+" "+z;break;case q.LESSTHANEQUALSDESCENDING:AB=AA[AI+"t"]+" "+x;break;case q.BETWEENDESCENDING:case q.BETWEENASCENDING:AB=AA[AI+"bt"].replace("##",z).replace("###",x);break;case q.NOTBETWEENASCENDING:case q.NOTBETWEENDESCENDING:AB=AA[AI+"nbt"].replace("##",z).replace("###",x);break;case q.INASCENDING:case q.INDESCENDING:AB=AA[AI+"in"]+" "+w.joinConst();break;case q.NOTINDESCENDING:case q.NOTINASCENDING:AB="";AB=AA[AI+"nin"]+" "+w.joinConst();break;}break;}}var AC=this.summaryNode,AD=(AB!=="")?"":0;AC.innerHTML=AB;AC.style.margin=AD;}},getClientHeight:function T(){return this.dndNode.clientHeight+this.summaryNode.clientHeight+15;},initDrag:function l(t,p){if(!this.staticStatus&&!this.da.nov){p=p||window;var u=U.eventTarget(p,this.dnd.startE);if(u===this.handle1Node||u===this.handle2Node){var s=D.call(this),q=this.orCfg,r=this.dnd;r.initD={handle1:parseFloat(this.handle1,10),handle2:parseFloat(this.handle2,10)-Z,length:this._length,contL:s.containerNode[q.lenP],offset:U.getMousePosition(this.dnd.startE,p)[q.offsetP]};r.initD.td=u;V.removeClass(this.domNode.childNodes[1],["invalid"]);}}},ondrag:function K(w,u){if(!this.staticStatus){u=u||window;var z=this.dnd.initD;if(z){var AF=this.ghost,AG=z.handle1,s=z.handle2,t=this.cs1Idx,r=this.cs2Idx,AD=this.unit,AB=this.gap,q=z.length;var AC=U.getMousePosition(w,u)[this.orCfg.offsetP]-z.offset;switch(z.td){case this.handle1Node:AG=b(H(b(z.handle1+AC,0),q)-AB,-1);t=b(e(AG/AD+0.5),0);break;case this.handle2Node:s=b(H(b(z.handle2+AC,0),q)-AB,-1);r=b(B.ceil(s/AD+0.5),0);break;default:return ;}M(this,AF,AG,s);var x=this.items,p=(x&&x.length)||0;if(p&&t>=0&&t<p&&r>=0&&r<p){var AE=false,AA;if(t!==this.cs1Idx){this.cs1Idx=t;AA=this.items[t];this.cs1Vl=AA.v;this.cs1Nm=AA.n;AE=true;}if(r!==this.cs2Idx){this.cs2Idx=r;AA=this.items[r];this.cs2Vl=AA.v;this.cs2Nm=AA.n;AE=true;}if(AE){this.typeHelper.updateThumb();this._updateTooltip(z.td);}}}}},ondrop:function Y(q){if(!this.staticStatus&&!this.da.nov){this.typeHelper.updateThumb();var p=this.ghost;if(p){p.containerNode.style.display="none";}this.hideTooltip(q,self);var r=this.dnd&&this.dnd.initD;if(this.makeSelection&&r){this.makeSelection({selItem:r.td});}if(this.items&&this.items.length&&this.ghost){this[(U.eventTarget(self,q)===this.ghost.handle1Node)?"frtUst":"ndUst"]=false;this.selectRange();}this.dnd.initD=null;}},selectRange:function Q(){var p=this.typeHelper,s=this.cs1Vl,r=this.cs2Vl,w=this.qua,u=this.numFmts;this.cs1Idx=p.getIdx(s);this.cs2Idx=p.getIdx(r);var t=function(q,z){var x=z||[];q=parseInt(q,10);return q===0||q===x.length-1;};this.cs1Nm=S.formatNumber(w,s,u);this.cs2Nm=S.formatNumber(w,r,u);p.updateOpCs();this.onselectionChange();this.updateSummary();},onincludeChange:function C(){if(!this.staticStatus){this.changeInclude=true;this.selectRange();}},showTooltip:function o(q,p){var r=U.eventTarget(p,q);this._updateTooltip(r);mstrmojo.tooltip.open(this,q,p);},_updateTooltip:function P(t){var q=this.orCfg,s=q.posCssP,p,r={contentNodeCssClass:"scm-tooltip",refNode:this.domNode.childNodes[1],posType:this._tooltip_pos};r[q.opPosCssP]=-parseInt(this.font,10)/2;r[s]=t.style[s];p=String((t===this.handle1Node)?this.cs1Nm:this.cs2Nm);r.content=E.replace(/\{@content\}/g,p);this.set("richTooltip",r);},onclick:function a(p){if(!this.staticStatus&&!this.da.nov){var q=U.eventTarget(p.hWin||window,p.e);this.hideTooltip(p.e,self);this.dnd.initD={makeMetricSilderSelectionByClick:true,td:((q===this.handle1Node)?this.handle1Node:((q===this.handle2Node)?this.handle2Node:null))};this.openEditValue({isfrt:(q===this.handle1Node),tgt:q});if(this._onThumb){this._onThumb(p);}}},onselectionChange:function I(p){this._super(p);if(this.dnd.initD&&this.dnd.initD.makeMetricSilderSelectionByClick){this.dnd.initD=null;}},onquaChange:function d(p){var r=S.getFuncInfo(this.opId,p.valueWas),s=S.getFuncInfo(this.opId,p.value),q;if(r.ft!==s.ft){if(!this.staticStatus){this.items=[];this.cs=[];this.f=this.ft=null;this.refresh();q=true;}}else{this.f=S.getFuncInfo(this.opId,p.value).f;q=false;}this.unSet=q||this.unSet;this.changeQual=true;this.selectRange();},updateData:function F(p,q){this.da=p;this.updateExpr(q);},updateExpr:function j(p){if(p){this.cs=p.cs;this.f=p.f;this.ft=p.ft;this.qua=p.qua;}this.refresh();},editValueRef:{cssClass:"edvl",slot:"editValueNode",scriptClass:"mstrmojo.Popup",locksHover:true,onOpen:function(){if(this.tgt){this.set("left",H(b(parseInt(this.tgt.style.left,10),0),parseInt(this.opener.width,10)-90)+"px");this.set("top",this.tgt.style.top);}var r=this.opener,q=this.children[0];if(r){var p=this.isfrt?r.cs1Vl:r.cs2Vl;q.edt.set("value",X.toLocaleString(p));}},children:[{scriptClass:"mstrmojo.Table",rows:1,cols:2,layout:[{cells:[{cssText:"width: 40px; padding: 3px;"},{cssText:"width: 16px;padding: 3px;"}]}],children:[{slot:"0,0",scriptClass:"mstrmojo.ValidationTextBox",alias:"edt",cssText:"color:black",dtp:mstrmojo.expr.DTP.NUMERIC,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:function(){if(this.parent.apply){this.parent.apply.set("enabled",String(this.value).length!==0);}},onInvalid:function(){if(this.parent.apply){this.parent.apply.set("enabled",false);}},onkeyup:function(q){if(this.parent.apply.enabled){var p=q.hWin,r=q.e||p.event;if(r.keyCode===13){this.parent.apply.onclick();}}}},{slot:"0,1",scriptClass:"mstrmojo.Button",cssClass:"icn apply",alias:"apply",onclick:function(){var r=this.parent.parent,s=r.opener,q=this.parent.edt.value;if(r&&s&&String(q).length>0){s[r.isfrt?"cs1Nm":"cs2Nm"]=q;q=X.parseNumeric(q);s[r.isfrt?"cs1Vl":"cs2Vl"]=q;}s[r.isfrt?"frtUst":"ndUst"]=true;s.selectRange();s.typeHelper.updateThumb();r.close();}}]}]},openEditValue:function(p){this.openPopup("editValueRef",p);}});mstrmojo.MetricSlider.METRICSLIDERTHUMBWIDTH=14;mstrmojo.MetricSlider.METRICSLIDERDEFAULTWIDTH=95;}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo._IsInputControl","mstrmojo.dom","mstrmojo.num");var J=mstrmojo.validation,C=J.STATUSCODE,F=J.VALIDATOR,D=mstrmojo.expr.DTP,B=0,A=1,I=2,H=3,G=4,E=5;mstrmojo.DICAutoFocusButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.DICAutoFocusButton",markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" tabindex="1" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',postBuildRendering:function(){this._super();var K=this;setTimeout(function(){K.domNode.focus();},200);}});mstrmojo.TextFieldDIC=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.TextFieldDIC",cssClass:"mstrmojo-TextFieldDIC",dtp:D.VARCHAR,validationDelay:0,getInputNode:function(){return this.inputNode;},focus:function(){this.validate();mstrmojo.dom.setCaret(this.domNode,(this.value&&this.value.length||0));},init:function(K){if(this._super){this._super(K);}this.constraints=mstrmojo.hash.copy();var M=K.dic,N=this.constraints={trigger:mstrmojo.validation.TRIGGER.ONKEYUP},L=M.dt;if(M.ml){this.maxLength=M.ml;}if(M.psw){this.type="password";this.value=this.lv="";this.owner.applyPasswordMask&&this.owner.applyPasswordMask();}if(J.isNumeric(L)||J.isInt(L)||J.isString(L)){this.dtp=L;}switch(M.vm){case A:N.validator=F.VALIDATE_PHONENO;break;case I:N.validator=F.VALIDATE_EMAIL;break;case H:N.validator=F.VALIDATE_ZIPCODE;break;case G:N.validator=F.VALIDATE_SSN;break;case E:N.regExp=new RegExp("^"+M.rgx+"$");break;}N.min=M.emin?M.min:null;N.max=M.emax?M.max:null;N.maxLen=(M.ml!==undefined)?M.ml:null;N.minLen=(M.mnl!==undefined)?M.mnl:null;if(M.req){this.required=true;}},onInvalid:function(){if(this.popup){this.popup.set("hasInvalidData",true);}},onValid:function(){if(this.popup){this.popup.set("hasInvalidData",false);}},_set_value:function(L,K){if(this.value===undefined&&K===""){return ;}this._super(L,K);},applyChanges:function(){this.validate();if(this.isValid()){this._super();}else{if(!this.showByDefault){this.handleInvalid();return false;}}return true;},handleInvalid:function(){if(mstrmojo.all.mojoConfirmx9){return ;}var K=this;mstrmojo.confirm(this.validationStatus.msg+"\n("+mstrmojo.desc(9199)+")",null,{buttons:[{scriptClass:"mstrmojo.DICAutoFocusButton",text:mstrmojo.desc(1442),onclick:function(){K.focus();}},{scriptClass:"mstrmojo.Button",text:mstrmojo.desc(221),onclick:function(){if(K.popup){K.popup.onCancel();}else{K.undoValidate&&K.undoValidate();}}}],title:mstrmojo.desc(7548),cssClass:"mstrmojo-TextFieldDIC-ValidationError"});},cancelChanges:function(){this.inputNode.blur();this.value=this.lv;this.clearValidation();}});})();(function(){mstrmojo.requiresCls("mstrmojo.MobileGraph","mstrmojo.graph._CanvasGraph");mstrmojo.graph.MobileXtabCanvasGraph=mstrmojo.declare(mstrmojo.MobileGraph,[mstrmojo.graph._CanvasGraph],{scriptClass:"mstrmojo.graph.MobileXtabCanvasGraph"});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.PopupConfig","mstrmojo.ui.menus.MenuEditor");mstrmojo.ui.menus.EditorConfig=mstrmojo.declare(mstrmojo.ui.menus.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.EditorConfig",data:null,fnOk:null,fnCancel:null,okEnabled:true,cancelEnabled:true,okVisible:true,cancelVisible:true,init:function D(E){this._super(E);if(this.data&&!mstrmojo.all[this.data.id]){mstrmojo.hash.make(this.data,mstrmojo.Obj);}this.initBindings();},clear:function A(){this._super();this.data=null;this.fnOk=this.fnCancel=mstrmojo.emptyFn;},newInstance:function C(){return new mstrmojo.ui.menus.MenuEditor({popupConfig:this});},destroy:function B(){if(this.data){this.data.destroy();}this.destroyBindings();this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextFieldDIC","mstrmojo.android._HasPreviewButton");mstrmojo.android.inputControls.TextFieldDIC=mstrmojo.declare(mstrmojo.TextFieldDIC,[mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.TextFieldDIC",cssClass:"mstrmojo-TextFieldDIC",cssDisplay:"block",onfontChange:mstrmojo.emptyFn,applyChanges:function G(){if(!!this.domNode){this.domNode.blur();}return this._super();},handleInvalid:function A(){mstrmojo.alert(this.validationStatus.msg);},cancelChanges:function E(){this.domNode.blur();this._super();},focus:function B(){this.validate();},onfocus:function F(){if(this.value!=undefined&&this.maxLength!=undefined&&String(this.value).length>this.maxLength){this.set("value","");}window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},renderPreview:function D(){var J=this.openerNode,K=this.group||this,I=(K.openerType===2)||!!this.dic.dm||this.dicChanged;var H=this.type==="password"?"********":this.dv;this.renderPreviewButton(J,I?H:J.innerHTML);},getDisplayValue:function C(){return mstrmojo.string.encodeHtmlString(this.value);}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList","mstrmojo.android.controllers.SettingsController","mstrmojo.android._HasLingeringListSelections","mstrmojo.android.ui.Button","mstrmojo.ui.MobileCheckList","mstrmojo.android.ui.TextInput","mstrmojo.android.ui.ValidationTextInput","mstrmojo.expr","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.android.nativedialog.EditTextDialog","mstrmojo.android.nativedialog.ListDialog","mstrmojo.android.nativedialog.TimePickerDialog");mstrmojo.requiresDescs(221,1442,7883,9454);var $STYLES=mstrmojo.android.controllers.SettingsController.STYLES,$BTN=mstrmojo.android.ui.Button.newButton,$ARR=mstrmojo.array,$VAL=mstrmojo.validation,$TRIG=$VAL.TRIGGER,$SC=$VAL.STATUSCODE,itemMarkup={},$D=mstrmojo.dom,$TRANS_DURATION=$D.CSS3_TRANSITION_DURATION,$HASH=mstrmojo.hash;mstrmojo.android.ui.SettingsView=mstrmojo.declare(mstrmojo.android.SimpleList,[mstrmojo.android._HasLingeringListSelections],{scriptClass:"mstrmojo.android.ui.SettingsView",init:function init(props){this._super(props);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-AndroidSettings");},allowTouchBubble:false,getList:function getList(){return this;},listHooks:{select:function(el,item,idx){el.style[$TRANS_DURATION]=0;if(item.disabled){return true;}if(item.style!==$STYLES.VIEW_BUTTON){this.setClearHandler(200);}},unselect:function(el,item,idx){el.style[$TRANS_DURATION]="300ms";}},getItemMarkup:function(item){var s=item.style;if(!itemMarkup[s]){var newMarkup="<div><h3>{@ttl}</h3><h4>{@value}</h4></div>";if(s===$STYLES.TEXT_AREA){newMarkup='<div readonly="readonly">{@ttl}</div>';}else{if(s===$STYLES.IMAGE){newMarkup="<h3></h3>";}}itemMarkup[s]=this._super(item).replace("{@en@n}",newMarkup);}return itemMarkup[s];},getItemProps:function getItemProps(item,idx){var value=item.v,props=this._super(item,idx);props.ttl=item.nm;props.value=value||"";var cls=item.cls;if(cls){props.addCls(cls);}var fnTimeNumberText=function(){props.addCls("drop-down");if(item.pwd){props.value="********";}else{if(item.showHint&&value===""){props.value=mstrmojo.desc(9454,"&lt;not set&gt;");}}};switch(item.style){case $STYLES.TEXT_AREA:props.addCls("textarea");break;case $STYLES.HEADER:props.addCls("header");break;case $STYLES.TIME:props.value=new Date((item.v<60000)?item.v*60000:item.v).toJSON().replace(/.*T/,"").replace(/\.[0-9]{3}Z/,"");fnTimeNumberText();break;case $STYLES.NUMBER:case $STYLES.TEXT:fnTimeNumberText();break;case $STYLES.LIST:props.addCls("drop-down");var items=item.items;props.value=items[$ARR.find(items,"v",value)].n;break;case $STYLES.CHECK:props.addCls("check");if(value===item.on){props.addCls("on");}props.value=item.desc;break;}if(item.hidden){props.addCls("hidden");}else{if(item.disabled){props.addCls("disabled");props.value="";}}if(props.value){props.addCls("with-desc");}return props;},touchSelectBegin:function touchSelectBegin(touch){var idx=this.getItemIdxTouch(touch);if(idx>-1){var item=this.items[idx],fnPress=item.fnPress;if(fnPress){fnPress.call(this.controller,item);return false;}}return true;},preselectionChange:function preselectionChange(evt){var added=evt.added;if(!added){return true;}var idx=added[0],item=this.items[idx];if(item.disabled||item.noclick){return false;}if(item.style===$STYLES.HEADER){if(!this._listTarget.getAttribute("hidx")){return false;}}return true;},postselectionChange:function postselectionChange(evt){var added=evt.added;if(!added){return ;}var idx=added[0],item=this.items[idx];var me=this,dialogConfig={title:item.nm},dialogChildren=[],fnOk,dialog,fnUpdateValue=function(item,value){item.fn(value);me.updateItem(idx);};switch(item.style){case $STYLES.HEADER:var headerIdx=this._listTarget.getAttribute("hidx");if(headerIdx){this.controller.jumpTo(parseInt(headerIdx,10),true);}break;case $STYLES.BUTTON:case $STYLES.VIEW_BUTTON:if(item.fn){item.fn();}break;case $STYLES.NUMBER:case $STYLES.TEXT:var isNum=(item.style===$STYLES.NUMBER),tb={scriptClass:"mstrmojo.android.ui."+(isNum?"Validation":"")+"TextInput",alias:"textInput",textValue:item.v,textType:isNum?"number":(item.pwd?"password":"text"),onEnter:function(value){fnUpdateValue(item,value);dialog.close();}};if(isNum){tb.valProps={dtp:mstrmojo.expr.DTP.UNSIGNED,min:item.limits.min,max:item.limits.max,constraints:{trigger:$TRIG.ONKEYUP,validator:function(v){v=parseInt(v,10);var min=this.min,max=this.max,msg=(v>=min&&v<=max)?"":mstrmojo.desc(7883).replace("##",min).replace("###",max);return{code:msg?$SC.INVALID:$SC.VALID,msg:msg};}}};}dialogChildren.push(tb);fnOk=function(){var eb=dialog.textInput;if(eb.validate){eb.validate();if(eb.isValid()){fnUpdateValue(item,eb.getValue());return true;}return false;}fnUpdateValue(item,eb.getValue());return true;};break;case $STYLES.LIST:var items=item.items;var optionList=new mstrmojo.ui.MobileCheckList({items:items,multiSelect:false,isElastic:true,selectedIndex:$ARR.find(items,"v",item.v)});dialogChildren.push(optionList);fnOk=function(){fnUpdateValue(item,items[optionList.selectedIndex].v);};break;case $STYLES.CHECK:fnUpdateValue(item,(item.v===item.on)?item.off:item.on);break;case $STYLES.TIME:var v=(item.v<60000)?item.v*60000:item.v,date=new Date(v),timePicker=new mstrmojo.ui.MobileDateTimePicker({value:{time:{hour:date.getUTCHours(),min:date.getUTCMinutes(),sec:0}},is24HourMode:false,dtp:mstrmojo.expr.DTP.TIME});dialogChildren.push(timePicker);fnOk=function(){var time=timePicker.getTime();fnUpdateValue(item,time.hour*60+time.min);};break;}if(dialogChildren.length){dialogConfig.children=dialogChildren;if(fnOk){dialogConfig.buttons=[$BTN(mstrmojo.desc(221,"Cancel")),$BTN(mstrmojo.desc(1442,"OK"),fnOk)];}if(mstrApp.useBinaryFormat){var positiveButton=dialogConfig.buttons[1],dialogClazz;if(item.style==$STYLES.TEXT||item.style==$STYLES.NUMBER){if(item.style==$STYLES.NUMBER){dialogConfig.validator={min:item.limits.min,max:item.limits.max};}positiveButton.onclick=function(value){fnUpdateValue(item,value);};dialogClazz=mstrmojo.android.nativedialog.EditTextDialog;}if(item.style==$STYLES.LIST){$HASH.copy({onSelectionChange:function(index){fnUpdateValue(item,items[index].v);this.close();}},dialogConfig);dialogClazz=mstrmojo.android.nativedialog.ListDialog;}if(item.style==$STYLES.TIME){positiveButton.onclick=function(value){var time=eval("("+value+")").time;fnUpdateValue(item,time.hour*60+time.min);};dialogClazz=mstrmojo.android.nativedialog.TimePickerDialog;}if(!!dialogClazz){new dialogClazz(dialogConfig).show();return ;}}dialog=mstrApp.showDialog(dialogConfig);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.EditableLabel");var A=mstrmojo.css,E=mstrmojo.validation.STATUSCODE;mstrmojo.ui.editors.controls.ComboBox=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",markupMethods:{onenabledChange:function D(){this.txtLabel.set("editOnClick",this.enabled);A.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function B(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ComboBox");},updatePreview:function C(){this.txtLabel.set("value",this.selectedValue||"");},updateSelection:function(){this.set("selectedValue",this.txtLabel.value);},validateTextInput:function(F){return true;},txtLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"txtLabel",slot:"previewNode",constraints:{validator:function(){if(!this.parent.validateTextInput(this.value)){return{id:this.id,code:E.INVALID,msg:""};}}},onValid:function(){this.parent.updateSelection();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._HasLayout","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.expr","mstrmojo.css");var C=mstrmojo.expr.DTP,B=mstrmojo.css,A="mstrmojo-Stepper-ErrValidation";mstrmojo.ui.editors.controls.Stepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.Stepper",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,mouseup,mousemove,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text"></div><div class="prev">-</div></div>',layoutConfig:{w:{textNode:"100%"},xt:true},textInput:null,init:function E(F){var G=F.provider;this.children=[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"textInput",slot:"textNode",dtp:G.dtp||C.INTEGER,constraints:{validator:G.validator,max:G.max,min:G.min},onValid:function(){var H=this.parent;B.removeClass(H.domNode,A);G.setVal(parseInt(this.value,10)||0);H.updateDisplayText();}}];this._super(F);this.addDisposable(G);B.addWidgetCssClass(this,"mstrmojo-ui-ctrl-Stepper");},postBuildRendering:function(){this.updateDisplayText();this._super();},updateDisplayText:function D(){this.textInput.set("value",this.provider.getVal());}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui._IsDropTarget","mstrmojo.EditableLabel","mstrmojo.ui.menus.MenuConfig","mstrmojo.css");var b=mstrmojo.css,N=1,L=2,F=4,d=8,K=16;function E(f){return function(){b.toggleClass(this.menuBtnNode,"active",f);};}function H(g){var l=new mstrmojo.ui.menus.MenuConfig(),k=this.getMenuActions(),f=this.index,o=this.id,h=this.total;if((k&K)>0){this.addNewTabMenuItem(l);}if((k&F)>0){l.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"dup",function(){mstrmojo.all[o].tabDuplicated();});}if((k&L)>0){if(f){l.addMenuItem(mstrmojo.desc(5362,"Move Left"),"lft",function(){mstrmojo.all[o].tabMoved(true);});}if(f<h-1){l.addMenuItem(mstrmojo.desc(5363,"Move Right"),"rgt",function(){mstrmojo.all[o].tabMoved(false);});}}l.addSeparator();if((k&N)>0){l.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){mstrmojo.all[o].lbl.set("isEditing",true);});}if((k&d)>0){if(h>1){l.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){mstrmojo.all[o].tabDeleted();});}}var j=this.getCustomMenu();if(j&&j.hasMenuItems()){l.addSeparator();l.absorbMenuItems(j);}l.addPopupHandlers(this.id,E(true),E(false));this.showTabMenu(this.updateMenuCfg(l),g);}mstrmojo.vi.ui.tabs.Tab=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.Tab",markupString:'<div id="{@id}" class="mstrmojo-VITab unselectable {@cssClass}" style="{@cssText}" unselectable="on" mstrAttach:click><div><div class="mstrmojo-VITab-tab"></div><div class="mstrmojo-VITab-menu"></div></div></div>',markupSlots:{containerNode:function W(){return this.domNode.firstChild.firstChild;},menuBtnNode:function a(){return this.domNode.firstChild.lastChild;}},markupMethods:{ontitleChange:function Z(){this.lbl.set("text",this.title);},onisSelectedChange:function V(){mstrmojo.css.toggleClass(this.domNode,"selected",this.isSelected);},onzIndexChange:function D(){this.domNode.style.zIndex=this.zIndex;}},zIndex:1,menuBtnNode:null,lbl:null,title:"",index:-1,total:-1,isSelected:false,children:[{scriptClass:"mstrmojo.EditableLabel",alias:"lbl",editOnClick:false,onTextEditComplete:function Q(g,f){if(g){this.parent.titleEdited(this.text,f);}}}],postBuildRendering:function X(){if(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation()){this.draggable=false;}this._super();},onclick:function e(f){var g=f.getTarget();if(g===this.menuBtnNode){H.call(this,g);}else{if(!this.isSelected){this.tabSelected();}}},getMenuActions:function I(){return 0;},getCustomMenu:function B(){return null;},isDragValid:function A(){return this.parent.children.length>1&&!this.lbl.isEditing;},createAvatar:function S(){var f=document.createElement("div");f.appendChild(this.domNode.cloneNode(true));f.style.margin="-5px 0 0 10px";return f;},allowDrop:function G(f){var g=f.src.widget;return g&&g.parent===this.parent;},ondrop:function Y(f){var g=f.src.data;this.parent.moveTab(g.idx,this.index,g.fromIdx);this._super(f);},ondragenter:function P(g){this._super(g);var h=g.src.data,f=this.index;this.parent.moveTab(h.idx,f);h.idx=f;},ondragover:function T(h){var f=h.tgt.node,g=h.tgtData,j=g&&g.node;if(!g||j!==f){h.tgtData={node:f};if(j){j.style.borderColor="";}}f.style.borderColor="#0fe88f";},getDragData:function C(){var h=this.id,f=this.index;return{setAvatarClass:function g(j){var o=mstrmojo.all[h],k=o.avatar;if(k){var l=[o.avatarCssClass,"hasOwnAvatar",j];k.className=l.join(" ");}},fromIdx:f,idx:f};},getDropAvatarIcon:function R(){return"pivot";},cleanUpAfterTarget:function J(g){var f=g.tgtData&&g.tgtData.node;if(f){f.style.borderColor="";}this._super(g);},onAppStateChange:function U(f){var g=this.lbl,h=f.value===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION;g.set("isEditing",false);g.set("editOnDoubleClick",!h);this.draggable=!h;},addNewTabMenuItem:function O(f){this.throwAbstractMethodError("addNewTabMenuItem");},tabSelected:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,tabMoved:mstrmojo.emptyFn,tabDeleted:mstrmojo.emptyFn,tabDuplicated:mstrmojo.emptyFn,showTabMenu:mstrmojo.emptyFn,updateMenuCfg:function M(f){return f;}});mstrmojo.vi.ui.tabs.Tab.ACTIONS={NEW_TAB:K,RENAME:N,MOVE:L,DUPLICATE:F,DELETE:d};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.GraphBase","mstrmojo._Formattable","mstrmojo._IsSelectorTarget","mstrmojo.tooltip");var P=mstrmojo.dom,K=mstrmojo.array,I=mstrmojo.mstr.EnumDSSXMLDrillType;function B(W){var X=W.getFormats();if(!X.width&&"gp" in X){X=X.gp;}W.resizeForDisplayState(parseInt(X.height,10),parseInt(X.width,10),false);}function R(X){var W="";switch(X){case I.DssXmlDrillToChild:W="drillDown";break;case I.DssXmlDrillToParent:W="drillUp";break;case I.DssXmlDrillToTemplate:W="drillTemplate";break;}return W;}function L(X,Z){var W=Z.offsetX,a=Z.offsetY,Y=X.coords.split(",");switch(X.shape){case"rect":case"poly":break;case"circle":W=Y[0];a=Y[1];}return{x:W,y:a};}function U(X,W){var Z=parseInt(X.tp,10),Y=parseInt(W.tp,10);if(Z>Y){return 1;}if(Y>Z){return -1;}return(X.n<W.n?-1:1);}function E(X){var W=P.position(this.domNode),Y=P.getMousePosition(X);return{x:Y.x-Math.floor(W.x),y:Y.y-Math.floor(W.y)};}function H(d,b){var Y=P.eventTarget(b,d),a=Y&&Y.parentNode,f=a&&a.children,W=[],Z=Y.getAttribute("coords");if(f&&!!Z){for(var X=0;X<f.length;++X){if(f[X]&&f[X].getAttribute&&f[X].getAttribute("coords")==Z){W.push(f[X]);}}}return W;}function D(Z,a,Y,X,W){return function(){var d={taskId:"getElementFromGraph",msgID:Z.model.docModel.mid,nodeKey:Z.node.k,sliceID:Z.node.data.sid,x:a.layerX,y:a.layerY},b={success:function(f){var e={mix:X,els:f.els},g=Z.model.getLinkActionImpl(e,Y,W);Z.controller.onLink(Z,g);},failure:function(e){}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,b,d);};}mstrmojo.DocXtabGraph=mstrmojo.declare(mstrmojo.GraphBase,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.DocXtabGraph",cssClassPrefix:"mstrmojo-DocXtabGraph",areaMarkup:'<area shape="{@shape}" coords="{@coords}" ttl="{@tooltip}" aid="{@aid}" onclick="mstrmojo.all[\'{@id}\'].onClickArea(this, event);" oncontextmenu="mstrmojo.all[\'{@id}\'].onContextMenu(this, event);" onmousemove="mstrmojo.all[\'{@id}\']._updateTooltip(event, self);" {@extra}/>',_att:"",markupSlots:{imgNode:function(){return this.domNode.childNodes[1];},mapNode:function(){return this.domNode.childNodes.length>2?this.domNode.childNodes[2]:null;},textNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["RW","B","background-color","fx"]},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?"block":"none";}},onClickArea:function Q(Y,a){a=a||window.event;var h=E.apply(this,[a]),b=this.defn,W=P.position(this.domNode),X=this.as[Y.getAttribute("aid")],g=this.k,f=h.x,d=h.y,Z={getBoundingClientRect:function(){var j=W.x+f,e=W.y+d;return{left:j,top:e,right:j+1,bottom:e+1};},w:this};this.showInfoWin(X.ifw,X.tks,Z);this.model.docModel.slice({type:parseInt(b.t,10)||mstrmojo.EnumRWUnitType.GRAPH,src:g,ck:b.ck,gk:g,tks:X.tks,cks:X.cks,sid:this.node.data.sid,x:f,y:d,anchor:Z,tty:X.tty});},onContextMenu:function O(Z,g){g=g||window.event;var j=this,o=this.getFormats(),W=parseInt(o.height,10),d=parseInt(o.width,10),Y=this.as[Z.getAttribute("aid")],h=Y.lm||[],b=Y.dp||[];mstrmojo.dom.preventDefault(window,g);var f=new mstrmojo.ui.menus.MenuConfig({hostId:this.id,isHostedWithin:false,hostElement:this,position:{x:g.pageX,y:g.pageY}});if(h.length!==0){f.addPopupMenuItem(mstrmojo.desc(5752,"Links"),this.id,function(){var r=new mstrmojo.ui.menus.MenuConfig();for(var q=0;q<h.length;q++){var e=h[q].links;for(var p=0;p<e.length;p++){r.addMenuItem(e[p].n||e[p].url||(e[p].target&&(e[p].target.n||e[p].target.did)),"",D(j,g,Y,q,p));}}return r;});}var l=function l(r){var q=r.onDemandDrillItems;var p=r.onDemandDrillDynamicItems;if(!r.onDemandDrillItems&&!r.loadingDCM){r.loadingDCM=true;var t=new mstrmojo.SimpleXHR({async:false});t.request("POST",mstrConfig.taskURL,{success:function s(w){var u=w.dynamicMenus[0];if(u&&u.items){p=u.items;}q=w.menuItems;r.onDemandDrillItems=q||[];r.onDemandDrillDynamicItems=p||[];delete r.loadingDCM;}},{taskId:"RWOnDemandDrill",styleName:"OndemandDrillContextMenusStyle",viewMode:2,docGridKey:r.k,rwb:mstrApp.docModel.bs});}var e=[];K.forEach(p,function(AA){var u=AA.idx,w=q[u],z=JSON.parse(w.subMenuIndices||"[]");if(z.length>0){var x=[];mstrmojo.array.forEach(z,function(AB){x.push(q[AB]);});w.items=x;}e.push(w);});return e;};var a=l(this.model.xtab);if((b.length>0)||(a.length>0)){b=b.sort(U);var k=L(Y,g);f.addPopupMenuItem(mstrmojo.desc(145,"Drill"),this.id,function(){var s=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"drill",isHostedWithin:false,supportsScroll:true,maxHeight:mstrmojo.dom.windowDim().h-50});for(var p=0;p<b.length;p++){var r=b[p];s.addMenuItem(r.n,R(r.tp),function e(){j.controller.onDrillGraph(j,{displayType:2,drillPathKey:this.ctxt.key,x:k.x,y:k.y,graphHeight:W,graphWidth:d,n:this.ctxt.n,isWithin:this.ctxt.dwi},{});},r);}var q=function(){j.model.xtab.onDemandDrillItems=null;j.model.xtab.onDemandDrillDynamicItems=null;};K.forEach(a,function(t){s.addPopupMenuItem(t.n,"",function(){var u=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"drill",isHostedWithin:false,supportsScroll:true,maxHeight:350});K.forEach(t.items,function(w){u.addMenuItem(w.n,R(w.dt),function(){var x=this.ctxt;j.controller.onDrillGraph(j,{displayType:2,drillPathKey:x.k,x:k.x,y:k.y,graphHeight:W,graphWidth:d,n:this.ctxt.n,isWithin:x.within},{});q();},w);});return u;});});return s;});}f.addMenuItem(mstrmojo.desc(6089,"Sort graph"),this.id,function(){j.controller.onGetAdvSortData(j,1,-1);});var X=f.newInstance();if(this._lastOpened){mstrmojo.css.removeClass(this._lastOpened?this._lastOpened.popupConfig.hostElement:null,"open");mstrmojo._HasPopup.closePopup.call(this);}mstrmojo._HasPopup.openPopup.call(this,X);mstrmojo.css.addClass(X?X.popupConfig.hostElement:null,"open");return false;},showInfoWin:function N(a,b,X){var W=this.model.docModel,Z=[].concat(W.getTargetInfoWin(a)).concat(W.getTargetInfoWin(b));if(Z&&Z.length){for(var Y=0;Y<Z.length;Y++){W.showInfoWin(Z[Y],X,"h");}}},showTooltip:function C(Y,X){this._updateTooltip(Y,X);var W=H(Y,X);if(W&&W.length>1){mstrmojo.DocXtabGraph.multiTooltip.open(this,Y,X,W);}else{this._super(Y,X);}},_updateTooltip:function M(W,X){this.updatingTooltipHelper(P.eventTarget(X,W),E.apply(this,[W]));},hideTooltip:function G(Z,Y){var X=P.eventTarget(Y,Z);if(X.getAttribute("aid")===this.cAreaIdx){this.cAreaIdx=-1;var W=H(Z,Y);if(W&&W.length>1){mstrmojo.DocXtabGraph.multiTooltip.close(this,Z,Y,W);}else{this._super(Z,Y);}}},update:function J(W){this.node.data=W.data;this.as=W.data.as;var o="\u001E",Y=this.model.docModel,g=Y.getCGBMap&&Y.getCGBMap(),X=this.as||[],e,b;for(e=0;e<X.length;e++){var h=X[e],d=h&&h.tgbs;if(d){var f=d.split(o);var l={};for(b=0;b<f.length;b++){var Z=g&&g[f[b]];if(Z){l[Z]=true;}else{l[f[b]]=true;}}h.tks=mstrmojo.hash.keyarray(l).join(o);}}this.eg=W.data.eg;this.gridInfo=W.data.gsi;if(W.defn&&W.defn.tooltip){this.defaultTooltip=W.defn.tooltip;}var Y=this.model;if(Y){Y.set("data",W.data);}},retrieveGraphSrc:function F(X,W){var Z=mstrConfig.taskURL+"?taskId=getRWGraphImage&taskEnv=xhr&__ts__="+(new Date().getTime())+"&messageID="+this.model.docModel.mid+"&nodeKey="+this.k+"&sliceID="+parseInt(this.node.data.sid,10)+"&imgType=4&width="+parseInt(W,10)+"&height="+parseInt(X,10),Y=this.imgNode;if(Y.src!==Z){Y.src=Z;}},resize:function(){B(this);},resizeForDisplayState:function V(Y,X,b){var a=this.getFormats(),Z=this.imgNode;if(b){var W=this.domNode.style;W.top=a.top;W.left=a.left;W.height=a.height;W.width=a.width;}if(Z){Z.style.height=Y+"px";}if(!this.eg){if(Y){this.retrieveGraphSrc(Y,X);this.refreshMap();}}}});function T(W){var X=W&&W.getAttribute&&W.getAttribute("coords");X=(X&&X.split(","))||[];switch(X.length){case 3:return X[2]*2;case 4:return X[2]-X[0];default:return 10;}}function A(Y){var X=[],d=document.body.offsetWidth,W=document.body.offsetHeight,e=0,a=0,g=S[0]&&S[0].domNode?S[0].domNode.offsetLeft:0,f=S[0]&&S[0].domNode?S[0].domNode.offsetTop:0,k=Math.ceil(S.length/2),Z=5,j=function(o,l){if(o+Y+l+Z>d){return d-Y-l-Z;}else{if(S.length>1&&o-l-Z<0){return l+Z;}}return o;},h=function(q,o,l){q+=o;var p=l==1?o:(l*o+(l-1)*Z)/2;if(p>q){return 0;}else{if(p+q>W){return W-p*2;}else{return q-p;}}};for(var b=0;b<S.length;++b){e=Math.max(e,S[b].containerNode.offsetWidth);a=Math.max(a,S[b].containerNode.offsetHeight);}g=j(g,e);f=h(f,a,k);for(var b=0;b<S.length;++b){if(b%2==0){X.push({l:g+Y+Z,t:f});}else{X.push({l:g-S[b].containerNode.offsetWidth-Z,t:f});f+=a+Z;}}return X;}var S=[];mstrmojo.DocXtabGraph.multiTooltip={_posMultiTp:function(X){for(var W=0;W<S.length;++W){S[W].domNode.style.left=X[W].l+"px";S[W].domNode.style.top=X[W].t+"px";}},open:function(h,d,b,X,W){if(!W){W={};}W.e=d;W.win=b;var Z=0;if(X&&X.length){Z=T(X[0]);}for(var Y=0;Y<X.length;++Y){var g=S[Y];if(!g||!mstrmojo.all[g.id]){g=new mstrmojo.Tooltip();var a=0,f=this;g.optimizePos=function(){a++;if(a>=S.length){a=0;f._posMultiTp(A(Z));}};S.push(g);}h.richTooltip.content=X[Y]&&X[Y].getAttribute("ttl");g.open(h,W);}},close:function(){for(var W=S.length-1;W>=0;--W){S[W].close();}S=[];}};}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.array","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._Formattable","mstrmojo._IsDocumentTemplate","mstrmojo.Label","mstrmojo.ui.menus.MenuConfig");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");var T={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"};var D=["background-color","fx"],I=mstrmojo.array;mstrmojo.VisBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._IsDocumentTemplate],{scriptClass:"mstrmojo.VisBase",updated:false,waitingForData:false,node:null,skipReRender:false,updateFormatsOnUpdate:true,setModel:function M(Z){this.set("model",Z);},destroy:function W(){var Z=this.model;if(Z&&Z.destroy){Z.destroy();delete this.model;}this._super();},resize:function X(){var Z=this.getFormats();if(parseInt(Z.height,10)===0||parseInt(Z.width,10)===0){this.domNode.style.display="none";}else{this.setDimensions(Z.height,Z.width);this.domNode.style.display="";}},setDimensions:function O(b,a){var Z=this._super(b,a);if(Z&&this.hasRendered&&!this.skipReRender){this.reRender();}return Z;},reRender:function F(){this.unrender();this.render();},getWidth:function B(){return parseInt(this.width,10);},getHeight:function K(){return parseInt(this.height,10);},getLeft:function R(){return parseInt(this.left,10);},getTop:function A(){return parseInt(this.top,10);},buildRendering:function H(){this.height=this.getHeight();this.width=this.getWidth();this.left=this.getLeft();this.top=this.getTop();if(!this.updated){this.update();}this._super();},initFromVisProps:function V(){},postBuildRendering:function(){var Z=this.isEmpty();this._super();this.raiseEvent({name:"toggleCtrlOverlay",visible:Z,controls:this.getVisEmptyMsgControls()});this.applyBackground();return !Z;},applyBackground:function(){var a=this.defn&&this.defn.fmts,g=(a&&a.p_fmts)||a,d={},e,Z,f,b;if(mstrApp.isExpress&&g){e=this.formatHandlers=this.formatHandlers||{};f=e.domNode=e.domNode||[];Z="BG";b=I.indexOf(f,Z);if(b<0){f.push(Z);}I.forEach(D,function(h){if(g[h]){d[h]=g[h];}});this.applyCSSFormatToNode("domNode",d);}},update:function G(d){d=d||this.node;if(d){var Z=d.data;if(Z){this.model.set("data",Z);}this.waitingForData=!!Z.nsj;if(this.waitingForData){var a="ServerJsonRWDStyle";var e=this.model,b=e.getDataService(),f={host:this,nodes:[this.k]},h;if(Z.wid!==undefined){f.slices=[Z.wid];}h=mstrmojo.func.wrapMethods(e.docModel.getUpdateColorMapCallback(),e.docModel.getUpdateThemePaletteCallback(true),e.controller._getXtabCallback(this));b.retrieveServerJson(f,h,{preserveUndo:true,style:{name:a,params:{treesToRender:3}},params:{styleName:a}});this.updated=true;return false;}this.updateContentFormats(d);}if(this.model){var j=this.model&&this.model.docModel;this.initFromVisProps(this.model.vp);if(j&&j.getDocBuilder){var g=j.getDocBuilder().getMojoVisName(d);if(g){d.data.visName=g;}}}this.updated=true;if(this._super){return this._super(d);}return true;},updateContentFormats:function(f){var e=this.parent,d=f.defn,Z=d&&d.fmts;if(this.updateFormatsOnUpdate&&Z){if(this.clearFormats){this.clearFormats();}if(e&&e._createFormats&&!Z.p_fmts){e._createFormats();}Z=(this.getFormats&&this.getFormats())||Z;for(var b in T){if(T.hasOwnProperty(b)){var a=T[b];if(b in Z){this[a]=Z[b];}}}}},isEmpty:function L(){return false;},getVisEmptyMsgControls:function C(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(11668,"Drag objects here.")}];},getModel:function N(){return this.model;},getData:function J(){return this.model.data;},getRowsAndCols:function(){var Z=this.model.data.gts;return(Z.row||[]).concat(Z.col||[]);},getExp:function(){var Z=this.model.data,a=Z&&Z.sc&&Z.sc.exp;return a;},getDocModel:function S(){return this.model&&this.model.docModel;},getTitleRMCPopup:mstrmojo.emptyFn,getMenuHandler:function U(){return mstrmojo.emptyFn;},renderErrorMessage:function Y(Z){this.domNode.innerHTML='<div class="mstrmojo-message">'+Z+"</div>";},getMessageID:function E(){return this.model.docModel.mid||this.model.mid;},performAction:function Q(Z){var b=this.model.getAction(Z),a=b&&b.h;if(a&&this.controller[a]){this.controller[a](this,b.a);return true;}return false;},findSelectorControl:function P(){var a=this.getData(),Z=a&&a.sc;if(Z&&parseInt(Z.ct,10)===6){this.selectorControl=Z;this.isMultiSelect=true;}else{delete this.selectorControl;}return this.selectorControl;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus.MenuConfig");var D=mstrmojo.string,A=mstrmojo.dom,E=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function B(){var K=this,J=K.statusList,F=J&&J.length||0,G=K.statusConfig||new mstrmojo.ui.menus.MenuConfig(),L=function(M){return function(N){K.set("status",M);K.onStatusClick(M);};};if(!G.hasMenuItems()&&F){for(var H=0;H<F;H++){var I=J[H];G.addMenuItem(I.n,I.cls||"",L(I),K);}}else{}if(G.hasMenuItems()){G.alignment=K.alignment||{host:E.BOTTOM_LEFT,popup:E.TOP_LEFT};G.hostId=K.id;G.hostElement=K[K.hostElementName]||K.domNode;K.openPopup(G.newInstance());}}function C(){var F=this.statusConfig||this.statusList&&this.statusList.length>1;this.menuButtonNode.style.display=F?"":"none";}mstrmojo.ui.StatusButton=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.ui.StatusButton",markupString:'<div id="{@id}" class="mstrmojo-StatusButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}"><div class="mstrmojo-Button {@innerIconClass}"  mstrAttach:click><span class="mstrmojo-text"></span></div><div class="menuButton" mstrAttach:click></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;},textSpanNode:function(){return this.domNode.firstChild.firstChild;},menuButtonNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onstatusChange:function(){this.textSpanNode.innerHTML=D.encodeHtmlString(this.status&&this.status.n||"");},onstatusListChange:function(){C.call(this);},onstatusConfigChange:function(){C.call(this);}},status:null,statusList:null,statusConfig:null,onclick:function(F){var G=A.eventTarget(F.hWin,F.e);if(A.contains(this.menuButtonNode,G,true)){B.call(this);}else{if(A.contains(this.textNode,G,true)){this.onButtonClick(this.status,F);}}},onButtonClick:mstrmojo.emptyFn,onStatusClick:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo._HasEditableText","mstrmojo.ui.Pulldown");var H=mstrmojo.array,C=mstrmojo.hash,B=19,J=13,D=27;mstrmojo.ui.SearchablePulldown=mstrmojo.declare(mstrmojo.ui.Pulldown,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.ui.SearchablePulldown",editableSlot:"selectedNode",allowCustomText:false,isSearching:false,editOnClick:false,init:function K(P){this._super(P);var M=this.getPopupList();M.renderOnScroll=this.renderOnScroll||M.renderOnScroll;M.renderBlockSize=this.renderBlockSize||M.renderBlockSize;mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-SearchablePulldown");var O=M.constructor.prototype,N=M.getItemProps?M.getItemProps:O.getItemProps,Q=M.getItemMarkup?M.getItemMarkup:O.getItemMarkup;M.getItemProps=function(V,R){var S=this._spft||"",W=V.n,T=W.toUpperCase().indexOf(S);if(T===-1){S="";}var U=N.call(this,V,R);U.before=W.slice(0,T);U.input=W.substring(T,T+S.length);U.after=W.slice(T+S.length,W.length);return U;};M.getItemMarkup=function(S,R){return Q.call(this,S,R).replace("{@en@n}","{@en@before}<span class='sp-highlight'>{@en@input}</span>{@en@after}");};},onclick:function L(M){var P=this.selectedNode,Q=M.getTarget(),R=M.e.offsetX>=(P.offsetWidth-B),O=this.getPopupWidget(),N=O.visible;if(Q===P&&(!N||(N&&R))){this.set("isEditing",!N);this._super(M);}},onPopupWidgetClosed:function F(){this.set("isEditing",false);var P=this.getPopupList(),Q=P._oldItems,N=this.text;delete P._oldItems;if(Q){var M=H.find(Q,"n",N);if(M===-1&&!this.allowCustomText){var O=P.items[0]||Q[0];M=H.find(Q,"n",O.n);}P.set("items",Q);this.set("selectedIndex",M);}},_set_selectedIndex:function E(O,M){if(this.allowCustomText&&M===-1){this.selectedIndex=-1;this.onitemSelected(null,M);}else{this.isSearching=false;this._super(O,M);if(this.hasRendered){var N=this.selectedNode;this.text=N.innerText?N.innerText:N.textContent;}}return true;},onkeydown:function G(N){this._super(N);var M=window.event||N.e;if(M.keyCode===J){this.getPopupList().close();}},onkeyup:function A(O){this._super(O);var M=window.event||O.e,P=M.keyCode,N=this.getPopupList();if(P===D||P===J){N.close();}else{this.processSearch();}},processSearch:function I(){this.isSearching=true;this.hideTooltip();var M=[],O=this.getPopupList(),P=this.selectedNode.innerHTML,Q=O._oldItems||O.items,N=P.toUpperCase();N=N.replace(/<BR>/,"");if(N.length>0){H.forEach(Q,function(R){if(R.n.toUpperCase().indexOf(N)>-1){M.push(C.clone(R));}},this);}else{M=Q;}O._spft=N;if(this.customizeSearchResult){this.customizeSearchResult(M);}O.set("items",M);O.adjustCornersForPopupOverflow();delete O._spft;O._oldItems=Q;O.set("visible",M.length!==0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Button","mstrmojo.ui.Pulldown","mstrmojo.ui.CheckList");var F=mstrmojo.hash,E=mstrmojo.Button.newWebButton;function C(G){var H=this.parent,I=this.list;if(G){H.set("selectedIndices",F.copy(I.selectedIndices));H.submitSelections();}else{I.selectedIndices=F.copy(H.selectedIndices);}this.close();}mstrmojo.ui.PulldownCheckList=mstrmojo.declare(mstrmojo.ui.PopupWidget,null,{scriptClass:"mstrmojo.ui.PulldownCheckList",visible:false,onOpen:function B(){var G=this.list;G.updateScrollbars();},onClose:function A(){this.list.refresh();},children:[{scriptClass:"mstrmojo.ui.CheckList",alias:"list",postselectionChange:function D(G){var H=this.items,L=G.added||[],M=G.removed||[],K=this.selectedIndices,J=this.parent.parent.allIdx,I=false;if(J===L[0]){H.forEach(function(O,N){if(!K[N]){I=K[N]=true;}});}else{if(J===M[0]){K={};I=true;}else{if(K[J]){delete K[J];I=true;}}}if(I){this.set("selectedIndices",F.copy(K));this.refresh();}}},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-Buttons",children:[E(mstrmojo.desc(1442,"Ok"),function(){C.call(this.parent.parent,true);},true,{cssDisplay:"inline-block"}),E(mstrmojo.desc(2140,"Cancel"),function(){C.call(this.parent.parent,false);},false,{cssDisplay:"inline-block"})]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.RatingDIC","mstrmojo._TouchGestures");var C=mstrmojo.dom;mstrmojo.android.inputControls.RatingDIC=mstrmojo.declare(mstrmojo.RatingDIC,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.inputControls.RatingDIC",touchTap:function E(F){F.e=F.e||F.evt;this.onclick(F);},touchSwipeMove:function A(H){var G=document.elementFromPoint(H.pageX,H.pageY),F;if(C.contains(this.domNode,G)){F=G&&G.getAttribute("idx");if(F!=undefined){this.setRating(F);this.ratingSelectedValue=this.items[F].v;}}},touchSwipeEnd:function D(F){if(this.ratingSelectedValue!=undefined&&this.ratingSelectedValue!=this.value){this.set("value",this.ratingSelectedValue);}},setDirtyFlag:function B(G,F){mstrmojo.css.addClass(this.itemsNode||F,"tx-active");}});}());(function(){mstrmojo.requiresCls("mstrmojo.LikertScaleDIC","mstrmojo.css");mstrmojo.android.inputControls.LikertScaleDIC=mstrmojo.declare(mstrmojo.LikertScaleDIC,null,{scriptClass:"mstrmojo.android.inputControls.LikertScaleDIC",lowestLabel:null,hightestLabel:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}<div class="label {@lowestClass}">{@lowestLabel}</div><div class="label {@hightestClass}">{@hightestLabel}</div></div></div>',init:function A(C){this._super(C);var B=this.titleItems&&this.titleItems.length,E=this.dic.mint&&B,D=this.dic.maxt&&B;this.lowestLabel=E?(this.titleItems[0]+": "+this.dic.mint):"";this.lowestClass=E?"":"hidden";this.hightestLabel=D?(this.titleItems[B-1]+": "+this.dic.maxt):"";this.hightestClass=D?"":"hidden";},getLeftEndTitle:function(B){return"";},getRightEndTitle:function(B){return"";},ontouchend:function(B){this.onclick(B);},setDirtyFlag:function(C,B){mstrmojo.css.addClass(this.itemsNode||B,"tx-active");}});}());(function(){mstrmojo.requiresCls("mstrmojo.XtabBase2","mstrmojo.XtabZone","mstrmojo._TouchGestures","mstrmojo._HasXtabTouchScroll","mstrmojo._XtabSelections","mstrmojo.dom","mstrmojo.hash","mstrmojo.css","mstrmojo._HasMagnifier","mstrmojo.XtabMagnifierHelper");var e=mstrmojo.css,F=mstrmojo.dom;var I=0;var V=1;var Q=2;var f=3;function R(h,j){e.toggleClass(h.firstChild,"tx-active",j);}function C(h){if(h){h.domNode.style.pointerEvents="auto";}}function N(){if(mstrMobileApp.isOnline()){return ;}var p=this.controller,u,t,h,j,AA,l,o,s,q=[],k=[],w;if(!p.getLinkRequest){return ;}for(u in this.zones){if(u==="_BL"||u==="_BR"){t=this.zones[u];h=t.getNodesByPositions(t.posMap);for(o=0;o<h.length;o++){j=h[o];AA=this.getCellForNode(j);if(AA&&AA.at&&(AA.at&4)){l=this.model.getAction(this.getActionCells(AA),null);if(l){s=l.a;w=p.getLinkRequest(s);if(w){q.push(w);k.push(j);}}}}}}var r=q.length;if(r){var x=function(AB){var z,AC;for(z=0;z<r;z++){AC=k[z];if(!AB[z]){AC.setAttribute("hl_d",true);e.addClass(AC,"hl_d");}}};if(mstrApp.isHosted()){}else{this.model.getDataService().checkCachedLinkTargets(q,{success:x,failure:mstrmojo.emptyFn});}}}function a(){if(mstrMobileApp.isOnline()){var o,h,j,l,k;for(o in this.zones){if(o==="_BL"||o==="_BR"){h=this.zones[o];j=h.getNodesByPositions(h.posMap);for(k=0;k<j.length;k++){l=j[k];l.removeAttribute("hl_d");e.removeClass(l,"hl_d");}}}}else{N.call(this);}}mstrmojo.MobileXtab=mstrmojo.declare(mstrmojo.XtabBase2,[mstrmojo._TouchGestures,mstrmojo._HasXtabTouchScroll,mstrmojo._XtabSelections,mstrmojo._HasMagnifier],{scriptClass:"mstrmojo.MobileXtab",frameRate:30,enableMagnifier:true,useSeamlessIncFetch:false,allowToggleSelections:true,markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?"block":"none";},onheightChange:function(){this.domNode.style.height=this.height||"";},onwidthChange:function(){this.domNode.style.width=this.width||"";}},init:function X(h){this._super(h);this.magnifierHelper=new mstrmojo.XtabMagnifierHelper({xtab:this});this.disposables.push(this.magnifierHelper);},gridPagesRendered:function B(){this._super();N.call(this);},onRender:function G(){this._super();var h=this.interactiveCellsArray;if(h&&h.length>0&&this.controller.getLinkRequest){if(!this.subscr){var k=mstrmojo.publisher;this.subscr=k.subscribe(k.NO_SRC,k.CONNECTIVITY_CHANGED_EVENT,a,this.id);}if((mstrApp.useBinaryFormat||mstrApp.isHosted())&&!mstrMobileApp.isOnline()){var j=this;window.setTimeout(function(){try{N.call(j);}catch(l){}},100);}}},unrender:function Z(){if(this.subscr){mstrmojo.publisher.unsubscribe(this.subscr);delete this.subscr;}this._super();},getDataService:function J(h){return this.model.getDataService();},setData:function E(h){this.set("gridData",h);},createZone:function D(h){h=h||{};var j=this.getDataService();h.imgCacheMap=(j&&j.imgCache)||this.imgCacheMap;h.unCachedMap={};return this._super(h);},showDownloadStatus:function b(){},onclick:mstrmojo.emptyFn,setupTNs:function O(){var j=this.contentNode,h=j.rows[1].cells[1].lastChild,k=0;switch(this.lockHeadersCase){case I:this._TSN.x=[h.lastChild.lastChild];this._TSN.y=[h.firstChild];break;case Q:this._TSN.x=[j];this._TSN.y=[h.firstChild];break;case V:this._TSN.x=[h];this._TSN.y=[j];k=-1;break;case f:this._TSN.x=[j.rows[0].cells[1].lastChild,h.firstChild];this._TSN.y=[j.rows[1]];k=2;break;}if(k){this._TSN.x[0].style.zIndex=k;}this.setOffsets();this.attachEventListener("scrolledOut",this.id,this.scrolledOut);},useDomToCalculateOffsets:function P(){return(this.lockHeadersCase===I||(this._super&&this._super()));},setOffsets:function d(AE){var x=0,j=0;var l=this.lockHeadersCase;if(this.useDomToCalculateOffsets()||AE){var s=this._TSN,z=s.x[0],o=s.y[0],q=z.offsetLeft,AB=o.offsetTop;if(AE){if(!!(l&V)){q=0;}if(!!(l&Q)){AB=0;}}x=q+z.offsetWidth+(!!(l&V)?this._BL.offsetWidth:0);j=AB+o.offsetHeight+(!!(l&Q)?this._TR.offsetHeight:0);}else{var u=this.zones,t=(this.gridData.rh&&parseInt(this.gridData.rh,10))||0,h=u._TR?u._TR.cp.rc:0,k=u._BR.cp.rc,AD=u._BL?u._BL.totalColWidth:0,AA=u._BR.totalColWidth;j=((l===V)?k:h+k)*t;x=(l===Q)?AA:AD+AA;}var w=1,p=2,r=this.getGridDimension(p)||0,AC=this.getGridDimension(w)||0;this._TMAX={x:Math.min(r-x,0),y:Math.min(AC-j,0)};if(this._super){this._super();}},touchTap:function Y(j){if(!this.magnifier){if(this._super){this._super();}if(this.performAction(j)===false){var h=this.controller;if(h&&h.viewTap){h.viewTap();}}}},performAction:function W(q){this.deselectCell();var p=F.findAncestorByAttr(q.target,"ei",true,this.domNode);if(!p||!p.value){return false;}var o=p.node,h=this.getCellForNode(o),l=h.at;if(this._super&&this._super(q)){return ;}if(!l){return false;}if((l&4)&&!o.getAttribute("hl_d")){var j=document.createElement("div"),k=j.style;id=this.id;j.className="activeLink on";k.left=o.offsetLeft+"px";k.top=o.offsetTop+"px";k.width=o.offsetWidth+"px";k.height=o.offsetHeight+"px";o.appendChild(j);window.setTimeout(function(){var r=mstrmojo.all[id];if(r&&r.hasRendered){F.attachOneTimeEvent(j,"webkitTransitionEnd",function(){o.removeChild(j);});e.removeClass(j,"on");}},200);}this.defaultAction(o);},selectCell:function L(h){var k=document.createElement("div"),j=k.style;k.className="overlay";j.top=h.offsetTop+"px";j.left=(h.offsetLeft+1)+"px";j.height=(h.clientHeight-2)+"px";j.width=(h.clientWidth-1)+"px";h.appendChild(k);},flagDirtyUnit:function g(h){R(h,true);},clearDirtyUnit:function M(h){R(h,false);},deselectCell:function U(){var h=this._selectedCell;if(h){h.removeChild(h.lastChild);delete this._selectedCell;}},touchSelectBegin:function A(k){if(this.enableMagnifier){var j=this.controller,h;if(j.getMagnifierConfig){h=j.getMagnifierConfig();}this.displayMagnifier(k,h);}},touchSelectMove:function H(j){if(this.enableMagnifier){var h=this;this.latestTouch=j;if(!this._moveMagnifierTimer){this._moveMagnifierTimer=setTimeout(function(){h.displayMagnifier(h.latestTouch);h._moveMagnifierTimer=null;},50);}}},touchSelectCancel:function T(h){C(this.magnifier);},touchSelectEnd:function S(h){C(this.magnifier);},getCaptureDimensions:function K(){var j=this.viewport,h=F.position(this.domNode,true);h.w=Math.min(j.offsetWidth,h.w);h.h=Math.min(j.offsetHeight,h.h);return h;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.range","mstrmojo.Widget","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo._HasSuggestion","mstrmojo.ME.MetricToken","mstrmojo.ME.MetricDataService","mstrmojo.ui.ScrollableSuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var M=mstrmojo.dom,O=mstrmojo.css,AC=mstrmojo.Enum_Keys,D=mstrmojo.range,d=D.EDGE,t=mstrmojo.ME.MetricToken.isDelimiter,L=mstrmojo.expr,j=mstrmojo.array,H=mstrmojo.hash;function AJ(E){return E.ctrlKey||M.isMetaKey(window,E);}mstrmojo.ME.SpanListMapper=mstrmojo.provide("mstrmojo.SpanListMapper",mstrmojo.mixin({itemWrapperPrefix:function(E){return'<span class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"&nbsp;",itemWrapperSuffix:"</span>",createWrapperNode:function N(E){var AK=E.ownerDocument,AL=AK.createElement("span");return AL;},_iw2idx:function P(AK,AN,AM){var AL=this.wrapperNodes(AN),E=mstrmojo.array.indexOf(AL,AM);return E===-1?AL.length:E;},itemOffsetLeft:function a(AK,AO,E,AM){if(!AM){var AL=this.wrapperNodes(AO);AM=AL&&AL[E];if(!AM){return 0;}}var AN=AO.firstChild;if(!AN||(AN===AM)){return 0;}return AM.offsetLeft-AN.offsetLeft;},whereDrop:function AI(AS,E,AM,AR,AK){var AO=this._nd2iw(AS,E,AM),AT,AQ,AN,AP,AL;if(AO){AQ=this._iw2idx(AS,E,AO);AT=AQ;AN=this.itemOffsetLeft(AS,E,null,AO);AP=AO.offsetTop;AL=AO.offsetWidth;if(AR.x>AK.left+AN+AL/2){AT++;AN+=AL;}}else{return AS.dropCuePos;}return{left:AN,top:AP,idx:AT,idxActual:AQ};}},mstrmojo.hash.copy(mstrmojo.WidgetListMapper)));mstrmojo.ME.TokenInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._HasSuggestion],{scriptClass:"mstrmojo.ME.TokenInputBox",containerResizable:false,dropZone:true,suggestionPopupCssClss:"mstrmojo-ME-TokenInputBox-suggest",allowDrop:function C(E){var AK=E.src.data;return !!AK;},ondrop:function(E){E.src.data={v:mstrmojo.ME.MetricToken.brackets(E.src.data.item.n),oi:H.copyProps(["did","n","t"],E.src.data.item),isNew:true};if(this.prepareDropItem){this.prepareDropItem(E);}this.insertTokens([E.src.data]);this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondragenter:function F(E){this.dragdata=E.src.data;this._super(E);this.set("dropCuePos",{left:0,top:0});mstrmojo.css.addClass(this.domNode,"unselectable");},ondragleave:function Q(){this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondropCuePosChange:function S(AK){var AL=AK.value,E=this.dragdata;if(E&&E.setAvatarClass){if(AL){E.setAvatarClass("add");}else{E.setInvalidAvatarClass();}}},makeObservable:true,showDesc:true,showPath:true,showFunctionSyntaxAsPath:true,blockCount:mstrmojo.ME.MetricDataService.blockCount,suggestCount:mstrmojo.ME.MetricDataService.suggestCount,markupString:'<div id={@id} class="mstrmojo-TokenInputBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-TokenInputBox-edit" contenteditable="true" tabindex="1" spellcheck="false"ondragstart = "return false;" oncontextmenu = "document.oncontextmenu =  mstrmojo.all.{@id}.fnContextMenu;" onkeydown = "return mstrmojo.all.{@id}.handlekeydown(event);" onkeypress = "return mstrmojo.all.{@id}.handlekeypress(event);" onkeyup = "return mstrmojo.all.{@id}.handlekeyup(event);" onmouseup = "return mstrmojo.all.{@id}.handlemouseup(event);" onpaste = "return mstrmojo.all.{@id}.handlepasteDirect(event);" >{@itemsHtml}</div><textarea class = "mstrmojo-TokenInputBox-clipboard" onkeyup = "return mstrmojo.all.{@id}.handlepaste(event);"></textarea><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild;},clipboardNode:function(){return this.domNode.childNodes[1];},scrollboxNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},suggestionListClass:"mstrmojo.ui.ScrollableSuggestionList",items:null,itemFunction:function G(AL,E,AK){return new mstrmojo.ME.MetricToken({data:AL,parent:AK});},listMapper:mstrmojo.ME.SpanListMapper,_set_items:function R(AK,E){if(this._super){this._super(AK,E);}if(!this.tokensCacheInitilized){this.pretokensModify();this.tokensCacheInitilized=true;}},tokensCache:[],tokensCachePointer:0,isDelimiter:t,postBuildRendering:function X(){if(this._super){this._super();}this._eros=false;if(M.isFF){document.body.spellCheck=false;}},fnContextMenu:function I(E){if(E){E.cancelBubble=true;E.returnValue=false;}return false;},handlekeydown:function V(AP){AP=AP||window.event;var AN=AP.keyCode||AP.charCode,AL=false,AQ=D.getRangeInfo();if((AJ(AP)||AN===AC.LEFT_ARROW||AN===AC.RIGHT_ARROW)&&this.doubleByte){this.doubleByte=false;var AO=this.prev_rInfo,AK=AQ,AR=AK.startContainer.data.slice(AO.startOffset,AQ.startOffset);this.widgetHandleImeInput(AO,AR);return ;}switch(AN){case AC.DELETE:if(!this.doubleByte){try{this.widgetHandleDelete(AQ);this.startTokenSuggestion();this.raiseChangeEvent({type:"delete"});}catch(AM){}AL=true;}break;case AC.BACKSPACE:if(!this.doubleByte){try{this.widgetHandleBackspace(AQ);this.raiseChangeEvent({type:"backspace"});this.startTokenSuggestion();this.editNode.focus();}catch(E){}AL=true;}break;case AC.ENTER:if(this.breakOnEnterKeyDown&&this.breakOnEnterKeyDown()){break;}case AC.TAB:this._startDebug=true;if(this.suggestionShown){this.handleSuggestionItemSelect(this.getSelected());}else{this.startTokenSuggestion();}AL=true;break;case AC.ESCAPE:this.endTokenSuggestion();AL=true;break;case 86:if(AJ(AP)){this._saveRangeInfo=D.getRangeInfo();if(!this._saveRangeInfo.collapsed){this.widgetHandleDelete(this._saveRangeInfo);this._saveRangeInfo=D.getRangeInfo();}this.clipboardNode.focus();AL=false;}break;case 89:if(AJ(AP)){this.widgetHandleUndoRedo("redo");AL=true;}break;case 90:if(AJ(AP)){this.widgetHandleUndoRedo("undo");AL=true;}break;case 229:if(!this.doubleByte){this.doubleByte=true;this.prev_rInfo=AQ;this.prev_items=this.items;}break;default:}if(AL){M.stopPropogation(window,AP);M.preventDefault(window,AP);return false;}return true;},getCharacter:function AE(AK){var E=(M.isIE&&!M.isIE9)?AK.keyCode:AK.charCode;return(E>0)?String.fromCharCode(E):null;},handlekeypress:function A(AM){AM=AM||window.event;var AN=this.getCharacter(AM),AK=false;if(AN&&!((AN==="c"||AN==="a")&&AJ(AM))){try{this.widgetHandleInput(D.getRangeInfo(),AN);this.raiseChangeEvent({type:"input",character:AN});if(!this.isDelimiter(AN)){if(this.useKeyDelay){var AL=this;window.clearTimeout(this.tmr);this.tmr=window.setTimeout(function(){AL.startTokenSuggestion();},mstrmojo.ME.MetricDataService.suggestDelay);}else{this.startTokenSuggestion();}}else{this.endTokenSuggestion(true);}}catch(E){}AK=true;}if(AK){M.stopPropogation(window,AM);M.preventDefault(window,AM);return false;}return true;},handlekeyup:function Y(AL){var E=AL.keyCode||AL.charCode,AK;if(E===AC.LEFT_ARROW||E===AC.RIGHT_ARROW){AK=this.findObjectToken();if(AK&&AK===this._saveActiveToken){this.startTokenSuggestion(AK);}else{this.endTokenSuggestion();}}else{if(E===AC.UP_ARROW){this.preHighlight();}else{if(E===AC.DOWN_ARROW){this.nextHighlight();}}}this._saveRangeInfo=D.getRangeInfo();},handlemouseup:function h(AP){if(this.dropCuePos){return false;}var AL=this.findObjectToken();if(AL&&AL===this._saveActiveToken){this.startTokenSuggestion(AL);}else{this.endTokenSuggestion();}var AN=D.getRangeInfo();if(this.doubleByte){this.doubleByte=false;var AO=this.prev_rInfo,AM=this._saveRangeInfo,AK=AM.startContainer.data.slice(AO.startOffset,AM.startOffset+1);if(AK!==""){var E=this.widgetHandleImeInput(AO,AK);this.prev_items=this.items;AL=M.findWidget(AN.startContainer);if(AL){this._delaySetTextCaretPos(AL.domNode,AN.startOffset);}else{this._delaySetTextCaretPos(E.domNode,AN.startOffset-1);}}this.prev_rInfo=AN;}this._saveRangeInfo=AN;},handlepasteDirect:function z(E){this.clipboardNode.value=E.clipboardData.getData("Text");this.handlepaste(E);M.stopPropogation(window,E);M.preventDefault(window,E);return false;},handlepaste:function f(AO){var AK=this.clipboardNode.value;this.clipboardNode.value="";var AN=[],E=AK&&AK.length,AM,AL="",AP;if(E>0){for(AM=0;AM<E;AM++){AP=AK.charAt(AM);if(this.isDelimiter(AP)){if(!mstrmojo.string.isEmpty(AL)){AN.push({v:AL,isNew:true});AL="";}AN.push({v:AP,isDelimiter:true,isNew:true});}else{AL=AL+AP;}}if(!mstrmojo.string.isEmpty(AL)){AN.push({v:AL,isNew:true});AL="";}this.insertTokens(AN);}},raiseChangeEvent:function(E){E.name="tokensModify";this.raiseEvent(E);},getTokensAsString:function AH(){var AK=[],AM=this.items,AL,E;for(AL=0,E=AM.length;AL<E;AL++){AK[AL]=AM[AL].v;}return AK.join("| ");},replaceErrorToken:function k(AM){var AL=this.items||[],AN=mstrmojo.array.find(AL,"sta",-1),AK,AO=function(AU,AS,AV){var AR=(AU&&AU.items)||[],AQ=j.find(AR,"did",AS),AP,AT;if(AQ>-1){AP=AR[AQ].fs;AT=j.filterOne(AP,function(AW){return AW.fnm&&AW.fnm.toUpperCase()===AV.toUpperCase();});}return AT;},E=function(AU,AS,AT){var AP={v:AS.n,oi:AS,isNew:true},AR=AU.v&&AU.v.split("@"),AQ;if(AR&&AR.length>1){AQ=AO(AT,AS.did,AR[1]);if(AQ){AP.exv=AQ.fmdid||AQ.fid;AP.extp=8;AP.v=mstrmojo.ME.MetricToken.brackets(AS.n)+"@"+AQ.fnm;}}return AP;};if(AN>-1){AK=E(AL[AN],AM,this.candidates);this.remove(AN);this.add([AK],AN);}},widgetHandleDelete:function Z(AN){if(AN.collapsed){var AM,AL,E,AO=AN.startOffset,AK=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AN.startContainer,false,document.body)){D.collapseOnNode(this.editNode,false);return ;}AM=D.getEdgeInfo(AN.startContainer,AN.startOffset);AL=M.findWidget(AN.startContainer);E=this.itemIndex(AL.data);if(AM===d.EDGE_END){E++;AL=AK[E];AO=0;}if(!AL){D.collapseOnNode(this.editNode,false);return ;}if(AL.length()===1){this.remove(E);AL=AK[E];if(AL){D.collapseOnNode(AL.domNode,true);}else{D.collapseOnNode(this.editNode,false);}this.checkMergeTwoTokens(E-1,E);}else{AL.spliceContent(AO,1);D.collapseOnTextNode(AL.domNode,AO);}}else{this.widgetDeleteTokens(AN);}},widgetHandleBackspace:function s(AN){if(AN.collapsed){var AM,AL,E,AO=AN.startOffset,AK=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AN.startContainer,false,document.body)){if(AN.startOffset>0&&M.isFF){AL=AK[this.items.length-1];D.collapseOnNode(AL.domNode,false);AN=D.getRangeInfo();AM=D.getEdgeInfo(AN.startContainer,AN.startOffset);}else{D.collapseOnNode(this.editNode,true);return ;}}AM=D.getEdgeInfo(AN.startContainer,AN.startOffset);AL=M.findWidget(AN.startContainer);E=this.itemIndex(AL.data);if(AM===d.EDGE_BEGIN){E--;AL=AK[E];AO=AL.length();}if(!AL){D.collapseOnNode(this.editNode,true);return ;}if(AL.length()===1){this.remove(E);AL=AK[E-1];if(AL){D.collapseOnNode(AL.domNode,false);this.checkMergeTwoTokens(E-1,E);AL=AK[E-1];}else{D.collapseOnNode(this.editNode,true);}}else{AL.spliceContent(AO-1,1);D.collapseOnTextNode(AL.domNode,AO-1);}}else{this.widgetDeleteTokens(AN);}},widgetHandleInput:function u(AO,AP){if(!AO.collapsed){this.widgetDeleteTokens(AO);AO=D.getRangeInfo();}var AL,AQ,AR,AS,E,AK,AM=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AO.startContainer,false,document.body)){this.add([{v:AP,isDelimiter:this.isDelimiter(AP),isNew:true}],0);AQ=AM[0];D.collapseOnTextNode(AQ.domNode,1);return ;}AL=D.getEdgeInfo(AO.startContainer,AO.startOffset);AQ=M.findWidget(AO.startContainer);AR=this.itemIndex(AQ.data);if(this.isDelimiter(AP)){AS={v:AP,isDelimiter:true,isNew:true};if(AL===d.EDGE_MIDDLE){var AN=AQ.split2Tokens(AO.startOffset);this.remove(AR);this.add([AN[0],AS,AN[1]],AR);AR=AR+1;}else{AR=(AL===d.EDGE_BEGIN)?AR:AR+1;this.add([AS],AR);}AQ=AM[AR];D.collapseOnNode(AQ.domNode,false);}else{AK=AO.startOffset;if(AQ.isDelimiter()){E=AM[(AL===d.EDGE_BEGIN)?AR-1:AR+1];if(E&&!E.isDelimiter()){AQ=E;AK=(AL===d.EDGE_BEGIN)?AQ.length():0;}}if(!AQ.isDelimiter()){AQ.spliceContent(AK,0,AP);D.collapseOnTextNode(AQ.domNode,AK+1);}else{this.add([{v:AP,isNew:true}],(AL===d.EDGE_BEGIN)?AR:AR+1);AQ=AM[(AL===d.EDGE_BEGIN)?AR:AR+1];D.collapseOnNode(AQ.domNode,false);}}},widgetHandleImeInput:function u(AN,AO){if(!AN.collapsed){this.widgetDeleteTokens(AN);AN=D.getRangeInfo();}var AL,AP,AQ,AR,E,AK,AM=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AN.startContainer,false,document.body)){this.clearTokens();this.add([{v:AO,isDelimiter:this.isDelimiter(AO),isNew:true}],0);AM=this.ctxtBuilder.itemWidgets;AP=AM[0];D.collapseOnTextNode(AP.domNode,1);this._delaySetCaretPos(AP.domNode,false);return ;}AL=D.getEdgeInfo(AN.startContainer,AN.startOffset);AP=M.findWidget(AN.startContainer);AQ=this.itemIndex(AP.data);AK=AN.startOffset;if(AP.isDelimiter()){this.clearTokens();this.set("items",this.prev_items);AM=this.ctxtBuilder.itemWidgets;E=AM[(AL===d.EDGE_BEGIN)?AQ-1:AQ+1];if(E&&!E.isDelimiter()){AP=E;AK=(AL===d.EDGE_BEGIN)?AP.length():0;}}if(!AP.isDelimiter()){AP.spliceContent(AK,0,AO);this._delaySetTextCaretPos(AP.domNode,AK+AO.length);}else{this.add([{v:AO,isNew:true}],(AL===d.EDGE_BEGIN)?AQ:AQ+1);AP=AM[(AL===d.EDGE_BEGIN)?AQ:AQ+1];this._delaySetCaretPos(AP.domNode,false);}this.startTokenSuggestion();return AP;},findObjectToken:function B(){var AN=D.getRangeInfo(),AL=M.findWidget(AN.startContainer);if(!M.contains(this.editNode,AN.startContainer,false,document.body)){return null;}if(!AL||AL===this||!AL.isDelimiter){return null;}if(AL&&!AL.isDelimiter()){return AL;}var AM=D.getEdgeInfo(AN.startContainer,AN.startOffset),AK=this.ctxtBuilder.itemWidgets,E=this.itemIndex(AL.data);AL=AK[(AM===d.EDGE_BEGIN)?E-1:E+1];if(AL&&!AL.isDelimiter()){return AL;}return null;},checkMergeTwoTokens:function q(AN,AL){var AM=this.ctxtBuilder.itemWidgets,AK=AM[AN],E=AM[AL];if((AK&&!AK.isDelimiter())&&(E&&!E.isDelimiter())){this.remove([AN,AL]);this.add([AK.mergeTo(E)],AN);D.collapseOnTextNode(AM[AN].domNode,AK.length());}},insertTokens:function x(AQ){var E=0,AK=this.editNode;var AP=this._saveRangeInfo||D.getRangeInfo();if(!AP||!M.contains(AK,AP.startContainer,false,document.body)){this.add(AQ);E=this.items.length-1;this._delaySetTextCaretPos(AK,(AK.innerText||AK.textContent).length);}else{var AO=D.getEdgeInfo(AP.startContainer,AP.startOffset),AL=M.findWidget(AP.startContainer);E=this.itemIndex(AL.data);if(AO===d.EDGE_MIDDLE){var AN=AL.split2Tokens(AP.startOffset);this.remove(E);AQ.unshift(AN[0]);AQ.push(AN[1]);this.add(AQ,E);}else{E=(AO===d.EDGE_BEGIN?E:E+1);this.add(AQ,E);}E=E+AQ.length-1;AL=this.ctxtBuilder.itemWidgets[E];this._delaySetCaretPos(AL.domNode,false);}this.raiseChangeEvent({type:"insert"});var AM=this;window.setTimeout(function(){AM._saveRangeInfo=D.getRangeInfo();},50);return E;},insertParenthesisTokens:function AB(AK){var E=this;window.setTimeout(function(){var AL=E.insertTokens([{v:"(",isDelimiter:true,isNew:true},{v:")",isDelimiter:true,isNew:true}]);E._delaySetTextCaretPos(E.itemsContainerNode.childNodes[AL]);},AK||50);},clearTokens:function p(E){this.set("items",E||[]);this._saveRangeInfo=null;this._delaySetCaretPos(this.editNode,false);},focus:function w(){var AK=this.ctxtBuilder.itemWidgets,E=AK.length;this._delaySetCaretPos(E>0?AK[E-1].domNode:this.editNode,false);},startTokenSuggestion:function AD(E){this.endTokenSuggestion();if(!E){E=this.findObjectToken();}if(E&&!E.isDelimiter()){E.set("active",true);this._saveActiveToken=E;this.showSuggestion(this.getSearchPattern());}if(!E||this.getSearchPattern().length===0){this.hideSuggestion();}},browseItemVisible:true,folderLinksContextId:25,browsableTypes:[L.TP.FOLDER,L.TP.FACT,L.TP.ATTR,L.TP.FUNCTION,L.TP.FILTER,L.STP.PROMPT_OBJECTS,L.TP.ATTR,L.TP.DIM,L.TP.METRIC,L.TP.ROLE].join(","),getSearchPattern:function U(){var AK=this._saveActiveToken,AM=AK&&AK.data.v,E=AM&&AM.length;if(E>2){if(AM.charAt(0)==="["){AM=AM.substring(1);}if(AM.charAt(AM.length-1)==="]"){AM=AM.substring(0,AM.length-1);}}if(AK&&AK.data.ift){var AL=AK.data.v,AN=AL&&AL.indexOf("@");if(AN>=0){AM=AL.substring(AN);}}return AM||"";},getSuggestionPos:function b(){var E=this._saveActiveToken,AK=null,AM,AL;if(E){AM=E.data&&E.data.ift;AL=mstrmojo.dom.position(E.domNode,true);AK={left:Math.round(AL.x+(AM?AL.w:0))+"px",top:Math.round(AL.y+AL.h)+"px",zIndex:100};}return AK;},item2textCss:function J(AK){var E=(this._super&&this._super(AK))||{4:"m",11:"fx",12:"a",13:"fc",43:"tr",21:"afm","-99":"br"}[AK.t]||"";E+=AK.da?" da":"";E+=(AK.dm||AK.um)?" dm":"";E+=AK.de?" de":"";E+=AK.fs&&AK.fs.length&&AK.fs.some(function(AL){return AL.fgr>0;})?" g":"";return E;},onBrowserOpen:function r(){this.editNode.blur();},onSuggestionItemSelect:function AA(AK){var E=this._saveActiveToken;this.endTokenSuggestion();if(E){if(E.data.ift&&AK.t===21){E.setFormInfo(AK);}else{E.setItemInfo(AK);if(AK.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){this.insertParenthesisTokens();}}this._delaySetCaretPos(E.domNode,false);}this.closePopup();},_delaySetCaretPos:function AF(E,AL){var AK=this.editNode,AM=this,AN=function(){AK.focus();AK.focus();D.collapseOnNode(E,AL);AM._saveRangeInfo=D.getRangeInfo();};window.setTimeout(AN,0);},_delaySetTextCaretPos:function AF(E,AN){var AK=this.editNode,AL=this,AM=function(){AK.focus();AK.focus();D.collapseOnTextNode(E,AN);AL._saveRangeInfo=D.getRangeInfo();};window.setTimeout(AM,0);},getCandidatesThroughTaskCall:function W(AK,E){AK.objectType="11,12,13,43,4";AK.rootFolderType=39;AK.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getMetricComponents(AK,E);},filterCandidates:function o(AN,AM,E){var AK=this._saveActiveToken,AO=AK&&(AK.data.oi||AK.data.at),AL;if(AO&&AK.data.ift){E=E||this.suggestCount;AM=mstrmojo.string.regEscape(AM);AL=j.filter(AN,function(AP){return AP.t===21&&AP.attid===AO.did&&(new RegExp("^"+AM,"i")).test("@"+AP.n);},{max:E});}else{AL=j.filter(AN,function(AP){return AP.t!==21;});AL=this._super(AL,AM,E);}return AL;},endTokenSuggestion:function AG(AK){var E=this._saveActiveToken;if(E){if(AK){this.hideSuggestion();}E.set("active",false);this._saveActiveToken=null;}},widgetDeleteTokens:function g(AS){var AK=AS.startOffset,E=AS.endOffset,AV=M.findWidget(AS.startContainer),AT=M.findWidget(AS.endContainer),AO=this.itemIndex(AV.data),AM=this.itemIndex(AT.data),AP=[],AQ=D.getEdgeInfo(AS.startContainer,AK),AU=D.getEdgeInfo(AS.endContainer,E),AR=(AQ===d.EDGE_BEGIN?AO:AO+1),AL=(AU===d.EDGE_END?AM:AM-1),AN;if(AV===AT){if((AQ===d.EDGE_BEGIN)&&(AU===d.EDGE_END)){this.remove(AO);AT=this.ctxtBuilder.itemWidgets[AO===0?AO:AO-1];if(AT){D.collapseOnNode(AT.domNode,AO===0);}else{D.collapseOnNode(this.editNode,true);}}else{AV.spliceContent(AK,E-AK);D.collapseOnTextNode(AT.domNode,AK);}}else{for(AN=AR;AN<=AL;AN++){AP.push(AN);}this.remove(AP);if(AQ===d.EDGE_MIDDLE){AV.spliceContent(AK);}if(AU===d.EDGE_MIDDLE){AT.spliceContent(0,E);}if(AQ===d.EDGE_BEGIN){AV=this.ctxtBuilder.itemWidgets[AO===0?AO:AO-1];}if(AV){D.collapseOnNode(AV.domNode,AO===0);}else{D.collapseOnNode(this.editNode,false);}AO=(AQ===d.EDGE_BEGIN)?AO-1:AO;this.checkMergeTwoTokens(AO,AO+1);}this.editNode.focus();},oncandidatesChange:function l(){var AK=this.candidates,E=(AK&&AK.items)||[];if(!this.noCache&&AK&&AK.isComplete){this.suggestCount=this.REQUEST_THRESHOLD=E.length;}else{this.suggestCount=mstrmojo.ME.MetricDataService.suggestCount;this.REQUEST_THRESHOLD=20;}},nudge:function(E){var AK=this.getSuggestionPos();if(AK){E.set("left",AK.left);E.set("top",AK.top);}},pretokensModify:function K(){this.tokensCache=this.tokensCache.slice(0,this.tokensCachePointer);var E=this.findObjectToken();this.tokensCache.push({items:H.clone(this.items),rInfo:D.getRangeInfo(),idx:E!==null?this.itemIndex(E.data):-1});this.tokensCachePointer=this.tokensCache.length;},widgetHandleUndoRedo:function e(AL){var AM,E,AK=function(AO){if(!AO){return ;}AO=AO||{};this.set("items",H.clone(AO.items));var AR=this.ctxtBuilder.itemWidgets,AN=AR[AO.idx],AQ=AN&&AN.domNode||this.editNode,AP=AO.rInfo;this._delaySetTextCaretPos(AQ,AP&&AP.startOffset||0);};switch(AL){case"undo":AM=--this.tokensCachePointer;if(AM>-1){E=this.tokensCache[AM-1];AK.call(this,E);}else{this.tokensCachePointer=1;}break;case"redo":AM=this.tokensCachePointer++;if(AM>-1&&AM<this.tokensCache.length){E=this.tokensCache[AM];AK.call(this,E);}else{this.tokensCachePointer=Math.min(Math.max(this.tokensCachePointer,1),this.tokensCache.length);}break;}},resetTokensCache:function T(){this.tokensCache=[];this.tokensCachePointer=-1;this.tokensCacheInitilized=false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo._HasSuggestion","mstrmojo.Enum_Keys","mstrmojo.hash","mstrmojo.dom");var F=mstrmojo.dom,B=mstrmojo.Enum_Keys,I=200,P;var O={DEFAULT:1,ADDING:2,EMPTY:3,FULL:4};var Q="mstrmojo-SimpleObjectInputBox-del";function K(){var Y=this.inputBox,Z=Y.value;if(Z!==this._lastPattern&&Z!==""){this.showSuggestion(Z);}this._lastPattern=Z;delete this._timerHandle;}function X(){var Y=this._timerHandle;if(Y){window.clearTimeout(Y);delete this._timerHandle;}}mstrmojo.SimpleObjectInputBox=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo._HasSuggestion,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.SimpleObjectInputBox",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-SimpleObjectInputBox {@cssClass}" style="{@cssText}" mstrAttach:click><div class="mstrmojo-SimpleObjectInputBox-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}<input type="text" mstrAttach:keydown,keyup,blur style="display: none;" /></div><div class="mstrmojo-SimpleObjectInputBox-empty"><div>{@emptyText}</div></div></div>',markupSlots:{itemsContainerNode:function(){return this.domNode.firstChild;},emptyTextNode:function(){return this.domNode.childNodes[1];},inputBox:function(){return this.domNode.firstChild.lastChild;},scrollboxNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onmaxItemWidthChange:function T(){var Y=this.maxItemWidth;if(!isNaN(Y)&&Y>0){this.emptyTextNode.style.maxWidth=Y+"px";}}},itemField:"n",emptyText:"",state:0,maxItemWidth:"none",useKeyDelay:false,maxObjectCount:null,useRichTooltip:true,showTooltip:function D(Z,d){var b=Z.target||F.eventTarget(Z.hWin,Z.e),a=this.getItemFromTarget(b);if(a&&a.n){var e=this.getItemNodeFromTarget(b).firstChild,Y=F.position(e);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPCENTER,cssClass:"vi-regular vi-tooltip-A A-center",refNode:e,content:mstrmojo.string.encodeHtmlString(a.n),top:Y.h+11,left:Y.w/2};this._super(Z,d);}},getItemMarkup:function(Y){if(!P){var Z=this.itemField;P=this._super(Y).replace(">{@en@n}<",'"><div class="elem">{@'+Z+'}<div class="'+Q+'"></div></div><');}return P;},getItemProps:function U(b,Y){var Z=this._super(b,Y),d=this.itemField;Z[d]=b[d];var a=this.maxItemWidth;if(!isNaN(a)&&a>0){a=(a-24)+"px";}Z.addStyle("max-width:"+a);return Z;},getSuggestionPos:function N(){var Y=this._inputPos;return{target:this.inputBox,left:Y.x+"px",top:Y.y+Y.h+"px",zIndex:100};},getSearchPattern:function W(){return this.inputBox.value;},onSuggestionItemSelect:function G(Y){X.call(this);this.set("items",this.items.concat(Y));this._super();var Z=this.id;window.setTimeout(function(){var a=mstrmojo.all[Z];if(parseInt(a.state,10)!==O.FULL){a.set("state",O.ADDING);}},0);},onstateChange:function A(Z){var a=Z.value;this.emptyTextNode.style.display=(a===O.EMPTY)?"block":"none";this.itemsContainerNode.style.display=(a===O.EMPTY)?"none":"block";var Y=this.inputBox,b=Y.style;if(a===O.ADDING){b.display="";this.updateScrollbars();Y.focus();this._inputPos=F.position(Y,true);}else{X.call(this);b.display="none";Y.value="";this._lastPattern="";this.updateScrollbars();}},postBuildRendering:function R(){I=mstrApp.getSearchAutoCompleteDelay&&mstrApp.getSearchAutoCompleteDelay()||I;this.state=0;this.setDefaultState();return this._super();},preitemsChange:function M(){this.setDefaultState();},onclick:function V(Z){var d=F.eventTarget(Z.hWin,Z.e);if(d&&d.className===Q){var b=F.findAncestorByAttr(d,"idx",true,this.domNode),Y=b&&parseInt(b.value,10);this.hideTooltip();if(Y!==null&&!isNaN(Y)){var a=this.items.concat();a.splice(Y,1);this.set("items",a);}return ;}if(parseInt(this.state,10)!==O.FULL){this.set("state",O.ADDING);}},onblur:function E(){X.call(this);if(!this.suggestionShown){this.setDefaultState();}},prekeydown:function C(Y){var b=Y.e;switch(parseInt(b.keyCode||b.charCode,10)){case B.DOWN_ARROW:this.nextHighlight();break;case B.UP_ARROW:this.preHighlight();break;case B.TAB:case B.ENTER:F.preventDefault(Y.hWin,b);var a=this.getSelected();if(a){this.handleSuggestionItemSelect(a);}else{this.hideSuggestion();this.setDefaultState();}break;case B.ESCAPE:X.call(this);this.hideSuggestion();this.setDefaultState();break;case B.BACKSPACE:if(!this.getSearchPattern()){F.preventDefault(Y.hWin,b);var Z=this.items&&this.items.concat();if(Z&&Z.length){Z.splice(Z.length-1,1);mstrApp.ignoreBackSpace=true;this.set("items",Z);var d=this.id;window.setTimeout(function(){mstrmojo.all[d].set("state",O.ADDING);mstrApp.ignoreBackSpace=false;},0);}}break;}},prekeyup:function H(Y){if(!this.getSearchPattern()){F.preventDefault(Y.hWin,Y.e);this.hideSuggestion();}if(this.useKeyDelay){var Z=this.id;if(!this._timerHandle){this._timerHandle=window.setTimeout(function(){K.call(mstrmojo.all[Z]);},I);}}else{K.call(this);}},widgetResized:function L(){if(this.hasRendered){var Z=parseInt(this.width,10),a=this.items.length,b=this.itemsContainerNode.childNodes;if(a<=b&&b.length){for(var Y=0;Y<a;Y++){b[Y].style.maxWidth=Z-24+"px";}}if(this.emptyTextNode){this.emptyTextNode.style.maxWidth=Z+"px";}this.updateScrollbars();}},setupScrollNodes:function J(){this.scrollNode=this.scrollboxNode;},setDefaultState:function S(){var a=this.maxObjectCount,Y=(this.items&&this.items.length)||0,Z=(a!==null&&a!==undefined&&Y>=a);this.set("state",!Y?O.EMPTY:(Z?O.FULL:O.DEFAULT));}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.Dialog","mstrmojo.Button");mstrmojo.android.AndroidDICPopup=mstrmojo.declare(mstrmojo.android.Dialog,null,{scriptClass:"mstrmojo.AndroidDICPopup",cssClass:"mstrmojo-AndroidDICPopup",autoClose:false,fadeOnClose:false,init:function D(E){this._super(E);this.addChildren([this.widget]);},close:function C(){this.set("visible",false);if(this.widget.hasRendered){this.widget.unrender();}this.removeChildren(this.widget);this._super();},onpopupResized:function A(E){if(this.widget.onpopupResized){this.widget.onpopupResized(E);}},onkeyup:function B(F){var E=F.hWin,G=F.e||E.event;if(this.widget.applyOnEnter&&G.keyCode===13){this.onApply();}else{if(G.keyCode===27){this.onCancel();}}},onApply:function(){return this.widget.applyChanges();},onCancel:function(){this.widget.cancelChanges();},enableApply:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.desc","mstrmojo.android.ui.Button","mstrmojo.android.controllers._HasSelectBoxDialog");mstrmojo.requiresDescs(221,1442,5136,2941);var D=mstrmojo.hash,G=mstrmojo.array,F=mstrmojo.desc,B=mstrmojo.android.ui.Button.newButton;function A(U,T){var W=D.clone(this.pageByData),V=W.es,M={title:U,dialogRefresh:function(){this.refresh();}},I=this,S=0,R,Q,J,L,P,O,N,H,K;P=function(Z){var X=L.shift(),Y=Z.ph.h[X];delete Y.cet;if(Y.ph){P(Y);}};O=function(Z){var b=Z.ph;if(!b){return ;}var X=[],a;G.forEach(b.h,function(f,d){var e=f.ix,h=f.cet||0;var g=V[e];X[d]={n:g.en,v:e,on:h};if(h){J[R]=X[d];L[R]=d;a=f.ph;}});var Y=J[R];Q.push({n:b.n,items:X,v:Y.n});R++;O(D.copy(Y,{ph:a}));};N=function(){R=0;Q=[];J=[];L=[];O(W);S=Q.length;};H=function(Y){var X=W.ph;G.forEach(J,function(Z){var b=X.h,a=G.find(b,"ix",Z.v),d;if(a<0){a=(T&&b.length>1)?1:0;}d=b[a];Y(d,X);X=d.ph;});};K=function(){var X=[];H(function(Z,Y){X.push({id:Y.id||"m",tp:Y.tp,v:V[Z.ix].ei});});I.pageByData=W;I.onPageBy(X);};N();if(S>1){M.buttons=[B(F(221,"Cancel")),B(F(1442,"OK"),function(){K();})];}this.showSelectBoxDialog(Q,function(X,Y){P(W);J[X]=Y;H(function(Z){Z.cet=1;});N();if(S>1){if(!!this.isNative){this.update(Q);}else{this.set("items",Q);}}else{K();}return(S>1);},M);}mstrmojo.android.controllers._HasPageBy=mstrmojo.provide("mstrmojo.android.controllers._HasPageBy",D.copy(mstrmojo.android.controllers._HasSelectBoxDialog,{_mixinName:"mstrmojo.android.controllers._HasPageBy",showGroupByDialog:function E(){A.call(this,mstrmojo.desc(2941,"Grouping"),true);},showPageByDialog:function C(){A.call(this,mstrmojo.desc(5136,"Page By"),false);}}));}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetTree","mstrmojo.expr","mstrmojo.AndOrNode","mstrmojo.ConditionNode");var F=mstrmojo.expr,B=F.ET;function A(G){var I=G&&G.src,J=I&&I.data,H=J&&J.et;return(H in F.ETs);}mstrmojo.FilterExpr=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.FilterExpr",allowDrop:A,renderOnScroll:false,itemIdField:null,nodeClassMap:{14:mstrmojo.AndOrNode,"*":mstrmojo.ConditionNode},onBlankClick:function(G){this.clearTreeSelect();},onnodemousedown:function(H){var I=mstrmojo.dom.eventTarget(H.hWin,H.e),J=H.src,G=J.listMapper.findIndex(J,J.itemsContainerNode,I),K=G>=0?J.ctxtBuilder.itemWidgets[G]:null;if(!K||(K.isSelectableArea&&!K.isSelectableArea(I))){this.onBlankClick(H);}},getItemIdentityProp:function(G){return G.et;},itemFunction:function(L,I,M){var H=M.tree,J=H.getItemConfig(L,I,M),K=H.nodeClassMap,G=K[H.getItemIdentityProp(L)]||K["*"];return G&&(new G(J));},getItemConfig:function(J,G,K){var H=(J.et===B.ANDOR),I=K.tree||K;return{data:J,tree:I,parent:K,bindings:{prefixedAndOrEditable:"this.parent.editable"},itemFunction:(H)?K.itemFunction:null,draggable:H?I.draggable:false,dropZone:H?I.dropZone:false,allowDrop:H&&I.dropZone?I.allowDrop:null,allowCopy:H?I.allowCopy:false,editable:I.isEditable?I.isEditable(J):I.editable,makeObservable:H&&K.makeObservable,onclick:I.onnodeclick,onadd:I.onnodeadd,onremove:I.onnoderemove};},getDragData:function(G){var I=this._super(G);if(I&&!I.html){var H=I.et&&F.ET2TGT[I.et];I.html=H?I[H]&&I[H].n||"":I.n||"";}return I;},newCondition:function E(K){K=K||{et:B.AQ};var J=this.selectionParentNode,G;J=(J&&J.hasRendered)?J:this;if(J!==this){G=J.add([K]);}else{var I=this.addCondition([K],null,true);G=I.index;J=I.widget;}var H={widget:J,index:G,data:K};if(this.onNew){this.onNew(H);}return H;},addCondition:function D(I,K){var L=this.items,H=L&&L.length,N=I&&I.length;if(!N){return null;}var J,G;if(H&&L[0].et===B.ANDOR){J=this.ctxtBuilder.itemWidgets[0];G=J.add(I,null);}else{if(!H&&(N===1)){J=this;G=0;this.add(I,0);}else{if(H){var M=L[0];this.remove(M);I.unshift(M);}this.add([{et:B.ANDOR,fn:F.FN.AND,nds:I}],0);J=this.ctxtBuilder.itemWidgets[0];G=H?1:0;}}return{widget:J,index:G};},addSingleCondition:function C(H,G){var I=this.addCondition([H],G);return I.widget.ctxtBuilder.itemWidgets[I.index];},ondrop:function(J){if(this._super){this._super(J);}var H=this.items,G=H&&H.length,I=H.concat();if(G>1){if(H.remove){H.remove(0,H.length);}else{this.set("items",null);}this.add([{et:B.ANDOR,fn:F.FN.AND,nds:I}],0);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.AndOrNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.expr","mstrmojo.dom","mstrmojo.array","mstrmojo.css");var L=mstrmojo.expr,N=mstrmojo.dom,C=mstrmojo.array,A=mstrmojo.css,F=mstrmojo.fe._IsRelationTreeNode.createSetHtml;var M=function(){var T="noRelationOperator",P=this[T],R=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],S=mstrmojo.array.filter(R,function(U){return U&&U[T]!==P&&U.data.et!==L.ET.RLS;}),O=S.length;for(var Q=0;Q<O;Q++){S[Q].set(T,P);}};mstrmojo.fe.AndOrNode=mstrmojo.declare(mstrmojo.AndOrNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.AndOrNode",markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',getPrefixAndOrToolsMarkup:function(){return(F+this._super());},markupSlots:mstrmojo.hash.copy({createSetNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupSlots)),markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){A.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupMethods)),removeSet:function G(P){var O=P.childIndex(),Q=P.data,R=[Q];if(O>=0){this.remove(O,true);if(Q.nds&&Q.nds.length>0){R=Q.nds;if(Q.not){R[0].not=true;}}else{delete Q.dmy;delete Q.relation;delete Q.applySubExpr;delete Q.relation;delete Q.useSchema;delete Q.dmt;}this.add(R,O);this.consolidate(false);}},createSet:function E(Q,O){var P=this._ndsToMove(this,Q);if(!P){return ;}this.remove(P.idxs,true);var U=P.nds,T;if(U){if(U.length>1){var S={et:L.ET.ANDOR,nds:U};S.fn=this.data.fn;U=[S];T=S.nds[0].not;}else{var V=U[0];if(V&&V.not&&V.et===L.ET.ANDOR){T=V.not;delete V.not;}}}if(O&&O.rq){var R;if(O.isMetric){R=O.cq;mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],O.rq,R);}else{R=O.rq;R.nds=U;if(T){R.not=T;}}this.add([R],P.idxs[0]);}this.consolidate(false);},preclick:function H(O){var R=null,Q=N.eventTarget(O.hWin,O.e),P=this._super(O);if(N.contains(this.createSetNode,Q,true)&&!this.noRelationOperator){R="createSetOpt";}O.part=R||O.part;return P;},preadd:function I(O){if(this._super){this._super(O);}this.updateRelationOperator();},preremove:function K(O){if(this._super){this._super(O);}this.updateRelationOperator();},consolidate:function B(){this._super();this.updateRelationOperator();},postBuildRendering:function J(){var O=this._super();this.updateRelationOperator();return O;},updateRelationOperator:function D(){var O=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],P=!!C.filterOne(O,function(R){return R&&(R.data.et===L.ET.RLS||(R.data.et===L.ET.ANDOR&&R.noRelationOperator));}),Q=this.parent;this.set("noRelationOperator",P);M.call(this);if(Q&&Q.hasRendered&&Q.updateRelationOperator){Q.updateRelationOperator();}},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.mstr.ui.IncFetchOBList");var O=mstrmojo.hash,W=mstrmojo.func,L=mstrmojo.meta.TP,F="5CECE58CC1D549F890EB61C4DB2156A3",T="E0CCB9CF22104A489CBE78D974AFD19E",Q=mstrmojo.chart.model.enums.EnumDSSObjectType,K=mstrmojo.array,D=mstrmojo.dom,X=function(g,h,a){var e=g.scrollableIncFetch,d=e?"mstrmojo.mstr.ui.IncFetchOBList":"mstrmojo.OBList",f={scriptClass:d,items:h.items,multiSelect:a};if(e){f.browseConfig={blockBegin:h.bb,blockCount:h.bc,totalSize:h.sz,folderLinksContextId:g.folderLinksContextId,rootFolderID:h.did,browsableTypes:g.browsableTypes,browsableViewMedias:g.browsableViewMedias,dataProvider:g.dataProvider};f.onwaitingChange=function(){if(g.booklet){g.booklet.set("waiting",this.waiting);}};}var b=mstrmojo.insert(f);b.render();return b;},A=function(d,e,a){var b=mstrmojo.ObjectBrowser.widgetHandler||X;return b(d,e,a);},N={success:function(d){var e=this.ob,b=d.items,f=e.pageCache[e.currentPage],a=f._w;f.items=b;a.set("items",b);this.ob=null;this.item=null;window.clearTimeout(e._btm);e.booklet.set("waiting",false);if(e.scrollableIncFetch&&a.scrollNode){a.initScroll();a.updateScrollbars();}},failure:function(a){window.alert(a.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},S=function(g,f,d){var e=d?-1:1,b=g.pageCache.length,h;for(h=g.currentPage+e;h<b&&h>=0;h+=e){var a=g.pageCache[h];if(a._k===f.k){return{steps:h-g.currentPage,cache:a};}}return null;},C=function(f,e,d,g){var h=f.currentPage+1,b=f.pageCache.length,a;for(a=h;a<b;a++){f.pageCache[a]._w.destroy();delete f.pageCache[a].items;}f.pageCache=f.pageCache.slice(0,h);g._w=d;g._k=e.k;f.pageCache[h]=g;f.cacheChange();},H=function(b){var a=mstrmojo.hash.walk("anc.items.0.items",b);this.set("canGoUp",!(!b.pf||!a));},I=function(f,e,g,d,b){delete f._btm;var a;if(!d){a=A(f,g,f.multiSelect);a.attachEventListener("change",f.id,"navigate");if(f.useDblSelect||f.useBothSglDblSelect){a.attachEventListener("dblclick",f.id,"dblselect");}}else{a=g._w;}f.obList=a;f.booklet.turn(a,b>0);window.setTimeout(function(){f.onBrowsing=false;},300);if(!d){C(f,e,a,g);}f.set("currentFolder",g);f.set("currentPage",f.currentPage+b);f.updateUpButton(g);if(f.scrollableIncFetch&&a.scrollNode){a.initScroll();a.updateScrollbars();}},P=function(d,b,a){var e=S(d,b,false);e=e||S(d,b,true);if(!e){window.clearTimeout(d._btm);d._btm=window.setTimeout(function(){d.booklet.set("waiting",true);},300);a.ob=d;a.item=b;d.getDataProvider().fetchFolderContents(d,b,a);}else{I(d,b,e.cache,true,e.steps);}},B=function(b,d,e,a){P(b,{fid:b.pageCache[b.currentPage].did,blockBegin:d,searchPattern:e,recursive:a},N);},J={success:function(b){var d=this.ob;if(d){window.clearTimeout(d._btm);if(!b.items){b.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var a=function f(g){var k=g.length,h;for(h=0;h<k;h++){var j=g[h];if(j.did===F||j.did===T){j.n=(j.did===F)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(j.items){a(j.items);}}};if(b.did===F||b.did===T){b.n=(b.did===F)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(b.anc&&b.anc.items){a(b.anc.items);}}if(b&&b.items&&d.browsableViewMedias){var e={};K.forEach(d.browsableViewMedias.split(","),function(g){e[parseInt(g,10)]=true;});b.items=K.filter(b.items,function(g){return(g.t!==Q.DssTypeDocumentDefinition)||e[g.dvm];});}if(b&&b.items&&mstrApp&&mstrApp.isSingleTier){b.items=K.filter(b.items,function(g){return(g.st!==772);});}if(b.did&&this.item.k!==b.did){this.item.k=b.did;}I(d,this.item,b,false,1);this.ob=null;this.item=null;}},failure:function(a){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(a);}else{if(a.getResponseHeader){mstrmojo.alert(a.getResponseHeader("X-MSTR-TaskFailureMsg"));}else{mstrmojo.alert(a.message);}}},complete:function(){if(this.ob){this.ob.onBrowsing=false;}}},Z=function(d){var b=d.pageCache.length,a;for(a=0;a<b;a++){d.pageCache[a]._w.destroy();}d.pageCache=[];d.currentPage=-1;d.cacheChange();},M=function(e,d,f){var a=e.onBrowseFolder;if(a){a[0][a[1]](d);}if(d&&parseInt(d.acg,10)===33){return ;}var b={};if(d){b.k=d.did;b.fid=d.did;}else{if(e.rootFolderID){b.k=e.rootFolderID;b.fid=e.rootFolderID;}else{if(e.rootFolderType){b.k=e.rootFolderType;b.fty=e.rootFolderType;}else{if(e.folderLinksContextId){b.k=e.folderLinksContextId;}}}}P(e,b,W.wrapMethods(f,O.copy(J)));},V=function(g,a,d){if(!d){return a;}var e=g.showCompletePath,j=a[0],f,b;while(j){var h;for(h=d.length-1;h>=0;h--){if(j.did===d[h].did){d.splice(h,1);j._isSc=true;}}b=j;j._open=true;j=j.items;j=j&&j[0];if(!j){b.lastLeaf=true;}}if(!e){j=a[0];while(j){if(j._isSc){a[0]=j;break;}j=j.items;j=j&&j[0];}}return a.concat(d);},U=function(b,a,d){b._naviInfo=V(b,a,d);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,browsableViewMedias:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,upButtonVisible:false,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,minSearchLength:2,showCompletePath:true,multiSelect:false,onCloseCB:null,onSelectCB:null,onBrowseFolder:null,scrollableIncFetch:false,useBothSglDblSelect:false,displaySaveLabel:false,useOldSearch:false,getDataProvider:function(){if(!this.dataProvider){this.dataProvider=mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"});}return this.dataProvider;},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"saveLabel",scriptClass:"mstrmojo.Label",cssClass:"msrmojo-save-label",text:mstrmojo.desc(3178,"Save in:"),bindings:{visible:"this.parent.parent.displaySaveLabel"}},{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var a=this.opener.parent.parent,e=this.tree,d=a._naviInfo,b=this.parent.parent.parent.extraDDItems;if(e.items!==d){e._pup=this;this.ob=a;if(b){K.forEach(b,function(f){f.isExtra=true;});d=d.concat(b);}e.set("items",d);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(f,a,b){var e=mstrmojo.WidgetTree.prototype.itemFunction(f,a,b);if(f.isExtra){if(f.cssClass){e.cssClass=f.cssClass;}e.onmousedown=f.onmousedown||mstrmojo.emptyFn;return e;}if(f._open){e.state=1;}e._ll=!!f.lastLeaf;e._pup=b._pup;e.onmousedown=function(g){var h=mstrmojo.dom.eventTarget(g.hWin,g.e),j=this._pup;if(h===this.domNode||h===this.textNode){if(!this._ll){M(j.ob,this.data);}j.close();}};e.markupMethods=O.copy(e.markupMethods);e.markupMethods.onstateChange=function(){var g=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[g]||"closed");this.itemsContainerNode.style.display=(g===1)?"block":"none";};e.useRichTooltip=true;var d=e.postBuildRendering;e.postBuildRendering=function(){if(d){d.call(e);}if(e.textNode.parentNode.clientWidth){e.textNode.style.width=(e.textNode.parentNode.clientWidth-20)+"px";}};e.premouseover=function(j){if(this.useRichTooltip){var h=this.textNode;if(h.clientWidth<h.scrollWidth){var g=D.position(h);this.richTooltip={areaId:this.id,cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.data[this.itemDisplayField],top:g.y-2,left:g.x+g.w+6};}else{this.richTooltip=null;}mstrmojo.dom.stopPropogation(j.hWin,j.e);}return true;};return e;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up One Level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:"this.parent.parent.canGoUp",visible:"this.parent.parent.upButtonVisible"}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:"this.parent.parent.closeable"},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:"this.parent.fishEyeVisible"}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",cssClass:"searchBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 3px 0; ",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,forceResetCache:true,bindings:{minSearchLength:"this.parent.parent.minSearchLength",quickSearch:"this.parent.parent.quickSearch"},serverRequest:function(a,b){this.parent.parent.getDataProvider().serverRequest(a,b);},preFetch:function(){this.objectTypes=this.parent.parent.browsableTypes||this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);},onUpdateSearchParams:function G(d){var b=this.parent.parent,a=b.sId;if(a){d.sessionState=a;}if(b.useOldSearch){d.quickSearch=0;d.nameWildcards=1;d.sortKey=6;}}}],bindings:{visible:"this.parent.searchVisible"}},{scriptClass:"mstrmojo.Booklet",cssClass:"mstrmojo-OB-booklet",alias:"booklet",hasAnimation:false,bindings:{scrollableIncFetch:"this.parent.scrollableIncFetch"}},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(b){var e=parseInt(this.height,10),a=this.np>1,d={target:this.domNode,props:{height:{start:(a?0:e),stop:(a?e:0),suffix:"px"}},onEnd:function(){if(a){this.target.style.overflow="visible";}}},f=new mstrmojo.fx.AnimateProp(d);this.domNode.style.overflow="hidden";mstrmojo.css.toggleClass(this.parent.domNode,"show-inc-fetch",this.visible);f.play();},onifsChange:function(a){var b=this.np;mstrmojo.hash.copy(a.value,this);if(this.np>1){this.children=null;this.refresh();}if((b<=1&&this.np>1)||(b>1&&this.np<=1)||(b===0&&this.np>0)){this.set("visible",this.np>1);}this.cssText="";}}],destroy:function Y(){Z(this);if(this._super){this._super();}},postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}var d=this.searchUpBar;if(d&&d.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var a=this.obSearchBox.contentWidget||this.obSearchBox;if(!this.scrollableIncFetch){a.attachEventListener("ifsChange",this.id,function(e){if(!this.scrollableIncFetch){this.obIncFetch.set("ifs",e.value);}});}}if(!this.scrollableIncFetch&&this.obIncFetch){var b=this.obIncFetch;b.attachEventListener("fetch",this.id,function(e){b.cp=e.v;b.children=null;b.refresh();B(this,(e.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}mstrmojo.css.addClass(this.domNode,"mstrmojo-ObjectBrowser");},onSearchItemsChange:function(b){var d=b.value,a=this.pageCache[this.currentPage]._w;if(!d||d.length===0){d=[{did:"empty",n:"("+mstrmojo.desc(2210,"")+")",t:"e"}];}else{if(this.browsableViewMedias){var e={};K.forEach(this.browsableViewMedias.split(","),function(f){e[parseInt(f,10)]=true;});d=K.filter(d,function(f){return(f.t!==Q.DssTypeDocumentDefinition)||e[f.dvm];});}}a.set("items",d);},navigate:function(j){var a=j.src,k=a.selectedItem,d=this.multiSelect,g=d&&a.getSelectedItems(),h=this,b=j.added&&j.added.length,f=j.removed&&j.removed.length,e=d?g.length===1&&(!f||b):!!k;if(e&&k.did==="empty"){return ;}if(e&&parseInt(k[L],10)===8){if(!this.onBrowsing){this.onBrowsing=true;M(this,k);}}else{if((k&&(!this.useDblSelect||this.useBothSglDblSelect))||g){this.select(d?g:k);}}},browseFolder:function(a,b){M(this,{did:a,n:b});},onFishEyeChange:function(a){this.goToPage(a.value);},goToPage:function(a){if(a<this.pageCache.length&&a!==this.currentPage){var d=a>this.currentPage,b=this.pageCache[a];this.set("currentPage",a);this.booklet.turn(b._w,d);this.set("currentFolder",b);H.call(this,b);}},oncurrentPageChange:function(a){if(this.fishEye){this.fishEye.setSelectedIndex(a.value);}var b=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(b.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",b.items||[]);this.obSearchBox.set("totalSize",b.sz);this.obSearchBox.set("rootID",b.did);this.obSearchBox.clearSearch();}if(!this.scrollableIncFetch&&this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(b.sz/b.bc)+((b.sz%b.bc>0)?1:0),cp:Math.floor(b.bb/b.bc)+((b.bb%b.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(b,a){O.copy(b,this);if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}Z(this);M(this,undefined,a);},close:function(){var b=this.ctx||this,a=b.onCloseCB;if(a){a[0][a[1]]();}b.set("visible",false);},select:function(b){var a=this.onSelectCB;if(a){a[0][a[1]](b);}if(this.closeOnSelect){this.close();}},dblselect:function R(b){var d=b&&b.src.selectedItem;if(!d||(d&&d.did==="empty")||d[L]===8){return ;}if(this.useBothSglDblSelect){var a=this.onDblSelectCB;if(a){a[0][a[1]](d);}if(this.closeOnSelect){this.close();}}else{this.select(d);}},goUp:function(){if(this.canGoUp){M(this,{did:this.currentFolder.pf});}},updateUpButton:function E(a){H.call(this,a);},oncurrentFolderChange:function(a){var b=a.value;U(this,b.anc.items,b.sc);},refreshContent:function(a){B(this,a);},onError:null,onheightChange:function(){var a=["titleBar","fishEye","searchUpBar","obIncFetch"],d=0,b;for(b in a){d+=parseInt(this[a[b]].domNode.offsetHeight,10);}this.booklet.set("height",parseInt(this.height,10)-d+"px");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo._ResultSetXt","mstrmojo._ReportDataService","mstrmojo._IsGraphDataService");var D={objectType:3},C={showWait:true,hideWait:true},E=mstrmojo.hash.copy;function B(){var J=mstrApp.getContentDimensions(true);return{taskId:"getReportGraphImage",height:0,width:0,availHeight:J.h,availWidth:J.w,imgType:4,showTooltips:true};}mstrmojo.GraphDataService=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._ResultSetXt,mstrmojo._ReportDataService,mstrmojo._IsGraphDataService],{scriptClass:"mstrmojo.GraphDataService",execute:function H(K,L){var J=mstrmojo.hash.copy(K,{});J.taskId=J.taskId||"reportExecute";J.reportID=J.reportID||(K&&K.dssId)||this.dssId;this.dssId=J.reportID;this._super(J,L);},getResults:function A(J,K){this._super(B(),K);},answerPrompts:function G(J,K){this._super(J,K,E(D));},loadPrompts:function F(K,J){this._super(K,E(D,J));},pageBy:function I(K,M){var L=mstrApp,J={taskId:"changePageBy",messageID:this.msgId,pageByKeys:this.pageByUnitsToKeys(K)};if(!L.useBinaryFormat){E(B(),J);}mstrApp.serverRequest(J,M,C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocDataService","mstrmojo._ResultSetXt");var F={objectType:55};var B=mstrmojo.hash.copy;mstrmojo.DocDataServiceXt=mstrmojo.declare(mstrmojo.DocDataService,[mstrmojo._ResultSetXt],{scriptClass:"mstrmojo.DocDataServiceXt",execute:function E(I,J,H){var G=mstrmojo.hash.copy(I,{});G.taskId="RWExecute";if(!G.objectID){G.objectID=(I&&I.dssId)||this.dssId;}this.dssId=G.objectID;this._super(G,J,H);},getResults:function D(H,I){H=H||{};H.taskId=H.taskId||"androidRWExecute";H.styleName=H.styleName||"RWDocumentMobileStyle";H.useTerseElementId=H.useTerseElementId||1;var G=this.model.controller.getContentDimensions();H.availableWidth=G.w;H.availableHeight=G.h;H.executionOrientation=mstrMobileApp.getOrientation();this._super(H,this.wrapCallback(I));},answerPrompts:function A(G,H){this._super(G,this.wrapCallback(H),B(F));},loadPrompts:function C(H,G){this._super(this.wrapCallback(H),B(F,G));}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo.dom","mstrmojo.array","mstrmojo._ResultSetXt","mstrmojo._ReportDataService","mstrmojo._ImageHelper");function B(T,U,Q,R){var S=this;mstrApp.serverRequest(T,{success:function(V){S.msgId=V.id;S.visName=V.visName;S.getResults(R,U);},failure:function(V){if(U.failure){U.failure(V);}},canceled:function(){if(U.canceled){U.canceled();}}},Q);}function C(S,R){var Q={hideWait:!S,delay:true};Q["show"+(R?"Progress":"Wait")]=true;return Q;}var F={objectType:3};var G=mstrmojo.hash.copy,J=mstrmojo.array;function L(){var Q="MojoXtabStyle",S=this.visName;if(S){var R=mstrmojo.AndroidVisList.getVis(S);Q=(R&&R.s)||Q;}return Q;}mstrmojo.XtabDataService=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._ResultSetXt,mstrmojo._ReportDataService,mstrmojo._ImageHelper],{scriptClass:"mstrmojo.XtabDataService",execute:function K(V,X,T){var W=this.id;var S=this.controller.ab;if(S){var U=S.split("|"),Q=mstrApp.isTablet()?"73^":"72^";J.forEach(U,function(b,Z,Y){var a=b.indexOf(Q);if(a>=0){mstrmojo.all[W].visName=b.substring(a+3);return false;}});}var R=mstrmojo.hash.copy(V,{});R.taskId=R.taskId||"reportExecute";R.reportID=R.reportID||this.dssId;R.styleName=mstrApp.isTablet()?"AndroidTabletMessageResultStyle":"AndroidMessageResultStyle";if(V){if(V.dssId){R.reportID=V.dssId;}}this.dssId=R.reportID;this._super(R,X,T);},getResults:function A(W,Y){var V=L.call(this),U=mstrMobileApp.getDeviceDPI(),Z=160;if(U<160){Z=80;}else{if(U>240){Z=230;}}var X={taskId:"iPhoneGetReportResults",styleName:V,zoomFactor:Z,deviceMode:mstrApp.isTablet?(mstrApp.isTablet()?73:72):0};if(W){var S=W.pbUnits,T=W.yPos,R=W.colsPerPage,Q=W.rowsPerPage;if(S){X.pageByKeys=this.pageByUnitsToKeys(S);}if(T){X.yPos=T;}if(R){X.colsPerPage=R;}if(Q){X.rowsPerPage=Q;}}this._super(X,Y);},answerPrompts:function I(Q,R){this._super(Q,R,G(F));},loadPrompts:function H(R,Q){this._super(R,G(F,Q));},drill2Grid:function D(R,S){var Q={taskId:"RWGridDrillToReport",msgID:R.srcMsgId,displayMode:-1,retainParent:3,retainThreshold:3,drillPathKey:R.drillPathKey,drillPathIndex:R.drillPathIndex,elementList:R.drillElements,nodeKey:R.nodeKey,rwGroupByElements:R.rwGroupByElements};if(R.sliceId){Q.sliceId=R.sliceId;}B.call(this,Q,S,C(true,true));},drillGrid:function P(Q,R){B.call(this,{taskId:"gridDrill",msgID:Q.srcMsgId,drillPathKey:Q.drillPathKey,drillPathIndex:Q.drillPathIndex,elementList:Q.drillElements},R,C(true,true));},pageBy:function M(R,T){var S=mstrApp,Q={taskId:"changePageBy",messageID:this.msgId,pageByKeys:this.pageByUnitsToKeys(R)};if(!S.useBinaryFormat){Q.taskId="iPhoneGetReportResults";Q.styleName=L.call(this);Q.zoomFactor=200;}mstrApp.serverRequest(Q,T,C());},sort:function E(Q,R){B.call(this,{taskId:"gridSort",msgID:this.msgId,sortKey:Q.sortKey,sortOrder:((Q.isAsc)?1:0),subtotalPos:Q.subTotalsPos,clearSorts:1},R,C());},pivot:function N(R,S){var Q={taskId:"gridPivot",msgID:this.msgId,objectId:R.objectId,pos:R.pos,objectType:R.objectType};if(R.axis){Q.axis=R.axis;}B.call(this,Q,S,C());},downloadGridData:function O(Q,R){mstrApp.serverRequest({taskId:"DocXtabIncrementalFetch",nodeKey:"",rowPosition:Q.rowPosition,maxRows:Q.maxRows,colPosition:-1,maxColumns:-1},R);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.FolderDataService","mstrmojo.XtabDataService","mstrmojo.DocDataServiceXt","mstrmojo.GraphDataService","mstrmojo.RptXtabModel","mstrmojo.ResultSetDocumentModel","mstrmojo.GraphModel","mstrmojo.prompt.WebPrompts","mstrmojo.maps.AndroidMapModel","mstrmojo.mstr.ElementDataService","mstrmojo.SubscriptionsDataService");mstrmojo.android.factories.ModelFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.android.factories.ModelFactory",newFolderDataService:function A(N){return new mstrmojo.FolderDataService(N);},newXtabDataService:function H(N){return new mstrmojo.XtabDataService(N);},newGraphDataService:function G(N){return new mstrmojo.GraphDataService(N);},newDocumentDataService:function D(N){return new mstrmojo.DocDataServiceXt(N);},newElementDataService:function B(){return mstrmojo.mstr.ElementDataService;},newSubscriptionsDataService:function J(){return new mstrmojo.SubscriptionsDataService();},newXtabModel:function L(N){return new mstrmojo.RptXtabModel(N);},newDocumentModel:function C(N){return new mstrmojo.ResultSetDocumentModel(N);},newGraphModel:function K(N){return new mstrmojo.GraphModel(mstrmojo.hash.copy(N,{dataService:this.newGraphDataService()}));},newPromptsModel:function M(N,O){var P=new mstrmojo.prompt.WebPrompts({rsl:N});if(O){P.populateAnswers(O);}return P;},newMapModel:function F(N){return new mstrmojo.maps.AndroidMapModel(N);},newDataService:function E(N,O){return this["new"+N+"DataService"](O);},newModel:function I(N,O){return this["new"+N+"Model"](O);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ObjectBrowser");var H=mstrmojo.array;var E=[257,1024,3072,12032];mstrmojo.vi.ui.editors.ObjectPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.ObjectPicker",cssClass:"mstrmojo-vi-ObjectPicker",zIndex:9,title:mstrmojo.desc(11496,"Select Object"),help:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:4,supportedTypes:H.hash(E),item:null,OKFn:null,children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",closeable:false,browsableTypes:"8,"+E.join(","),closeOnSelect:false,showCompletePath:false,searchVisible:false,scrollableIncFetch:true,bindings:{rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId"}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btnHBox",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(1442,"OK"),onclick:function C(){var J=this.parent.parent;this.parent.parent.close({item:J.item});var I=J.OKFn;if(I){I(J.item);}J.set("item",null);},bindings:{enabled:function B(){return !!this.parent.parent.item;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(2399,"Cancle"),onclick:function C(){var I=this.parent.parent;this.parent.parent.close();I.set("item",null);}}]}],preBuildRendering:function A(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];},postBuildRendering:function D(){if(this._super){this._super();}this.browse();},onOBSelect:function F(I){this.set("item",((this.supportedTypes[I.t]||this.supportedTypes[I.st])?I:null));},browse:function G(){this.ob.browse();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasPopup","mstrmojo.fe.AndOrNode","mstrmojo.fe.DynamicNode","mstrmojo.ConditionNode","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.hash","mstrmojo.expr");var D=mstrmojo.css,A=mstrmojo.dom,G=mstrmojo.hash,C=function(L){var M=L.data,K=M.dmy&&M.dmy.uts||[],I=K.length,H=[],J;for(J=0;J<I;J++){H.push(K[J].n);}return'<span class="mstrmojo-text">'+H.join(", ")+"</span>";};mstrmojo.fe.RelationNode=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.fe.RelationNode",markupString:'<div id="{@id}" class="mstrmojo-relation {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-relation-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-relation-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}"><span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-relationNode"><span class="mstrmojo-relationNode-inf"><span class="mstrmojo-relation-prefix-text">'+mstrmojo.desc(2790,"Set of").replace(/##/g,"")+'</span><span class="mstrmojo-textset"  mstrAttach:click></span><span class="mstrmojo-relation-postfix-text">'+mstrmojo.desc(2793,"Where").replace(/##/g,"")+'</span><span class="mstrmojo-relation-convert-text"  mstrAttach:click >'+mstrmojo.desc(null,"Convert to Condition")+'</span><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'"onclick="mstrmojo.all[\'{@id}\'].del()" /></span><div class="mstrmojo-relation-childTreeNode" style="position:relative;"></div></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},relationNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1];},convertNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[3];},containerNode:function(){return this.domNode.childNodes[1].childNodes[1];}},markupMethods:{onprefixedAndOrEditableChange:function(){D.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){D.toggleClass(this.relationNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=C(this);}},noRelationOperator:true,children:[{scriptClass:"mstrmojo.fe.RelationFilterExprTree",alias:"childTree",ignoreLayout:true,dropZone:false,draggable:false,nodeClassMap:{14:mstrmojo.fe.AndOrNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},onNew:function(H){this.parent.tree.onNew(H);},getItemConfig:function(K,H,L){var I=mstrmojo.fe.RelationFilterExprTree.prototype.getItemConfig.call(this,K,H,L),J=L.tree||L;return G.copy({tree:J,rootTree:this.parent.tree,noRelation:true,inRelation:true},I);},prenodeclick:function(H){if(!H||!H.part){return ;}var I=this.rootTree;if(I&&I.onnodeclick&&this.editable){H.editor=I.editor;I.onnodeclick.call(this,H);}}}],premousedown:function(H){if(this._super){this._super(H);}var I=A.eventTarget(H.hWin,H.e);if(!A.contains(this.childTree.domNode,I,true)){this.childTree.clearTreeSelect();}},preselectedChange:function(H){if(!H.value){this.childTree.clearTreeSelect();}},init:function(H){this._super(H);var I=this.data;if(I){delete this.data;this._set_data(null,I);}},_set_data:function(K,H){var I=this.data,J=(I!==H);if(J){this.data=H;if(H){this.childTree.set("items",H.nds||[H]);}}return J;},isSelectableArea:function(H){return mstrmojo.dom.contains(this.relationNode,H,true);},preclick:function E(H){var J=null,I=A.eventTarget(H.hWin,H.e);if(A.contains(this.prefixNode,I,true)){J="andor";}else{if(A.contains(this.textNode,I,true)){J="createSet";}else{if(A.contains(this.convertNode,I,true)){this.parent.removeSet(this);return false;}}}H.part=J;},del:function B(){var H=this.parent;if(H&&H.remove&&this.data){H.remove(this.data);}},newCondition:function F(H){this.childTree.newCondition(H);},avatarCssCls:"mstrmojo-FE mstrmojo-relationNode",getAvatarNode:function(){return this.relationNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.Label","mstrmojo.Obj","mstrmojo.ui.Checkbox","mstrmojo.ui.CheckList","mstrmojo.warehouse.EnumObjectTypes");var G=mstrmojo.expr,C=G.ET,B=mstrmojo.array,E=mstrmojo.string,F=mstrmojo.warehouse.EnumObjectTypes,D=mstrmojo.mstr.EnumNodeDimty;mstrmojo.fe.CreateSetEditor=mstrmojo.declare(mstrmojo.Editor,null,{onOpen:function(){var M=this.model,P=this.condition.data,N=!P.m,J=this.attrsBox.attrsList,H=this.relBox.relPd,Q=[{n:mstrmojo.desc(12037,"System Default"),t:-1,did:"default"}].concat(M.metrics),I=this.appQual;J.set("items",M.attrs);mstrmojo.array.forEach(["relBox","appQual"],function(R){this[R].set("visible",N);},this);if(P.dmt===4&&P.dmy.uts){var K={};B.forEach(P.dmy.uts,function(S){var R=B.find(M.attrs,"did",S.utgt.did);if(R>=0){K[R]=true;}});J.set("selectedIndices",K);}if(N){H.set("items",Q);if(P.relation&&P.relation.guide){var L=P.relation.guide,O=B.find(Q,"did",L.did);H.set("selectedIndex",O>=0?O:0);}else{H.set("selectedIndex",0);}I.set("checked",!!P.applySubExpr);}},onOK:function(){var O=this.model,R=this.condition,T=this.condition.data,L=this.attrsBox.attrsList,H=this.relBox.relPd,J=this.appQual;var V=L.getSelectedItems(),I=[];B.forEach(V,function(X){I.push({utgt:{n:X.n,did:X.did},utp:G.DMY_TP.ATTR,agg:1,flt:2,gb:true,rps:0,n:X.n});});var U;if(H.selectedIndex>0){var M=H.items[H.selectedIndex];U={n:M.n,did:M.did,t:F.METRIC,st:1024};}var K;if(T.et===15){T.dmt=D.NodeDimtyOutputLevel;T.dmy=T.dmy||{};T.dmy.uts=I;K=T.relation=T.relation||{};if(U){K.guide=U;T.useSchema=false;}else{delete K.guide;delete K.rsTp;delete K.joTp;delete K.paTp;delete K.erTp;T.useSchema=true;}T.applySubExpr=J.checked;R.set("data",T);}else{var S={et:15};S.dmt=D.NodeDimtyOutputLevel;S.dmy={};S.dmy.uts=I;K=S.relation={};if(U){K.guide=U;}else{S.useSchema=true;}S.applySubExpr=J.checked;var N=R,P={rq:S,cq:T},Q=[R.childIndex()];if(T.et===C.ANDOR){if(T.nds&&T.nds.length>2){var W=O.childIdx;Q=[W,W-1];}else{N=R.parent;}}else{N=R.parent;P.isMetric=!!T.m;}N.createSet(Q,P);}},children:[{scriptClass:"mstrmojo.Box",alias:"attrsBox",cssClass:"Attributes-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14613,"Select attributes to create the set"),cssClass:"Label"},{scriptClass:"mstrmojo.ui.CheckList",alias:"attrsList",cssClass:"CheckList"}]},{scriptClass:"mstrmojo.Box",alias:"relBox",cssClass:"RelatedBy-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12036,"Related by"),cssClass:"Label",cssDisplay:"inline-block"},{scriptClass:"mstrmojo.ui.Pulldown",alias:"relPd",cssClass:"Pulldown",cssDisplay:"inline-block",onitemSelected:function A(H){}}]},{scriptClass:"mstrmojo.ui.Checkbox",alias:"appQual",cssClass:"AppQual-CheckBox",postBuildRendering:function(){this.domNode.innerHTML=E.encodeHtmlString(mstrmojo.desc(12038,"Apply this qualification independently of the relationship filter"));}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssText:"float: right; border-collapse: separate; display: table;",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(2397,"OK"),onclick:function(){var H=this.editor;H.onOK();H.close();},bindings:{enabled:function(){var I=this.parent.parent.attrsBox.attrsList,H=this.parent.parent.attrsBox.attrsList.selectedIndices;return I.getSelectedItems().length>0;},editor:"this.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.editor.close();},bindings:{editor:"this.parent.parent"}}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.hash","mstrmojo.FilterExpr");var D=mstrmojo.hash,B=mstrmojo.expr.ET;mstrmojo.fe.FilterExprTree=mstrmojo.declare(mstrmojo.FilterExpr,null,{scriptClass:"mstrmojo.fe.FilterExprTree",allowCopy:false,containerResizable:false,draggable:true,dropZone:true,editable:true,makeObservable:true,onConditionEdit:mstrmojo.emptyFn,modifyConditionNode:function(G,F){var H=G.data,E=H.isNew;D.copy(D.clone(F),D.clear(H));delete H.isNew;G.paint();if(H.et===B.MQ||H.et===B.MC){G.set("noCreateSet",true);}if(G.tree.onConditionEdit){G.tree.onConditionEdit(G,E);}},getItemConfig:function(H,E,I){var F=this._super(H,E,I),G=I.tree;return D.copy({onclick:G.prenodeclick,containerResizable:G.containerResizable,ondragend:G.ondragend,ondrop:G.ondrop},F);},ondragenter:function A(E){this.dropCuePos={left:0,top:0,idx:0,idxActual:0};this._super(E);},ondragend:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondragend.call(this,E);}},ondrop:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondrop.call(this,E);}},isEditable:function C(F){if(!this.editable){return false;}var E=false;switch(F&&F.et){case B.R:case B.F:E=false;break;case B.ANDOR:case B.MQ:case B.AQ:case B.AL:case B.AC:case B.MC:case B.AE:E=true;break;case B.XML:E=!F.xml||!!F.ph;}return E;},prenodeclick:function(E){if(!E||!E.part){return ;}if(E.part!=="createSet"&&E.part!=="createSetOpt"&&!(E.part==="andor"?this.prefixedAndOrEditable:this.editable)){return ;}var F=this.tree;if(F.onnodeclick){F.onnodeclick.call(this,E);}},getSelectedItemWidget:function(){var E=function(K){var I=K&&K.ctxtBuilder&&K.ctxtBuilder.itemWidgets,G=K.selectedIndex,F=I&&I.length||0;if(!I){return ;}if(G===-1){for(var H=0;H<F;H++){var J=E(I[H]);if(J){return J;}}}else{return I[G];}};return E(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ResultSetController","mstrmojo._IsDocController","mstrmojo.android.controllers._SupportsQueuedTransactions","mstrmojo.android.controllers._HasPageBy","mstrmojo.ui.MobileCheckList","mstrmojo.android.EnumMenuOptions","mstrmojo.string","mstrmojo.array","mstrmojo.hash","mstrmojo.android.nativedialog.LayoutDialog");mstrmojo.requiresDescs(1089,1917,2941,6189,9233,9254,9255,9256,9257);var K=mstrmojo.hash,d=mstrmojo.array,a=mstrmojo.android.EnumMenuOptions,C=a.DOC_LAYOUTS,T=a.GROUP_BY,b=a.REPROMPT,AG=a.SHARE,B=a.ANNOTATION,t="\u001F",w=1;function q(AM){var AK=AM.model,AJ=AK.data.layouts,AL=d.find(AJ,"k",AK.currlaykey);return AL>=0?AJ[AL]:null;}function l(AM,AK){var AN=AM.getGroupByElements(AK),AL=[],AJ=q(AM),AQ=AJ&&AJ.gbys&&AJ.gbys.groupbys,AP=AN&&AN.length;if(AP&&AQ){for(i=0;i<AP;i++){var AO=AQ[i].unit.target;AL.push(AO.did);AL.push(AO.t);AL.push(AN[i]);}}return AL.join(t);}function u(AP,AJ){var AO=AP.desiredUnits||{},AN=q(AP),AK=AJ&&AJ.length;if(AN&&AN.gbys){var AM=AN.gbys.groupbys,AR=AM.length;for(i=0;i<AR;i++){var AQ=AM[i].unit,AL;if(AJ){if(i<AK){AL=AJ[i];}else{break;}}else{AL=AQ.elms[AQ.idx].v;}AO[AQ.target.did]=AL;}}return AO;}function V(AJ){var AM="",AL=0,AK;for(AK in AJ){if(AL>0){AM+=t;}AM+=AK+t+AJ[AK];AL++;}return AM;}function S(){if(this.refreshTimer){clearInterval(this.refreshTimer);delete this.refreshTimer;}}function D(){var AK=this.model.rf;if(AK&&AK>0){var AJ=this;this.refreshTimer=self.setInterval(function(){AJ.checkCache(null,null,null,2);},AK*1000);}}function r(){var AJ=this._previousOr;if(AJ===-1){return ;}if(AJ===0){window.setTimeout(function(){mstrMobileApp.releaseOrientation();});}else{if(AJ>0){mstrMobileApp.lockOrientation(AJ);}}this._previousOr=-1;}function AC(){return mstrApp.getTransactionNotificationController();}function A(AJ,AK){var AL={srcMsgId:this.model.mid,desiredUnits:u(this,this.getGroupByElements(AK))};K.forEach(AJ,function(AN,AM){AN=AN.replace(/\+/g," ");AL[AM]=decodeURIComponent(AN);});return AL;}function AE(AQ){var AP=AQ.txData.split(";"),AO,AN=AP.length;for(AO=0;AO<AN;AO++){var AM=AP[AO],AL=AM.split(","),AK=decodeURIComponent(AL[1]),AJ=this.model.getFirstUnitInstanceByName(AL[0]);if(AJ){AJ.dataChanged(0,AJ.v,{dv:AK,v:AK},AJ.valueNode);}}}mstrmojo.android.controllers.DocumentController=mstrmojo.declare(mstrmojo.android.controllers.ResultSetController,[mstrmojo.android.controllers._SupportsQueuedTransactions,mstrmojo._IsDocController,mstrmojo.android.controllers._HasPageBy],{scriptClass:"mstrmojo.android.controllers.DocumentController",initModel:function I(AJ){return mstrApp.modelFactory.newModel("Document",K.copy(AJ,{controller:this}));},hasTxChanges:false,start:function R(AL,AM){var AK=this.desiredUnits=AL.desiredUnits;if(AK){var AJ=V(AK);if(AJ){AL.desiredElements=AJ;}delete AL.desiredUnits;}this.sub_id=AL.sub_id;this.hasTxChanges=!!AL.hasTxChanges;this._super(AL,AM);},createView:function N(AP,AK){var AS=AP.defn.layouts,AN=mstrMobileApp.getLockedOrientation(),AL=-1,AT=-1,AM=true,AJ=AS.length,AO;for(AO=0;AO<AJ;AO++){if(AS[AO].iw){continue;}var AQ=AS[AO].or;if(AL===-1){AL=AQ;}if(AQ!==AL||AQ===3){AM=false;break;}}if(AN>0){if(AM){if(AL!==AN){AT=AL;}}else{AT=0;}}else{if(AM){AT=AL;}}if(AT>-1){if(AT===0){mstrMobileApp.releaseOrientation();}else{mstrMobileApp.lockOrientation(AT);}this._previousOr=AN;}var AR=this.view=this.newView("Document",AK);AR.set("model",this.model);AR.buildChildren();return AR;},afterReprompt:function Z(AK){var AJ=this.view;AJ.unloadLayouts(null,false);AJ.model.loadLayout(AK,true);this._super(AK);},onPageBy:function Q(AJ){var AK=[];d.forEach(AJ,function(AM,AL){AK.push({key:AM.id,value:AM.v});});this.onGroupBy({gbUnits:AK});},hasPageBy:function g(){var AJ=this.view,AK=AJ&&AJ.getLayouts()&&AJ.getCurrentLayout();return !!(AK&&AK.gb&&AK.defn.dpb);},onGroupBy:function s(AM,AN,AL){var AJ=this.view,AK=this.model;AL=AL||{};AL.showWait=true;AL.hideWait=true;AL.delay=true;AN=mstrmojo.func.wrapMethods(AN,{success:function(AO){AJ.unloadLayouts(null,true);AK.loadLayout(AO);}});AK.getDataService().changeDocGroupBy(AM,AN,AL);},setData:function P(AJ,AK){this._super(AJ,AK);if(AJ.rf!=this.old_rf){S.call(this);D.call(this);}this.rootCtrl.updateContent(null,this.model.n,false);},onDrill:function h(AJ,AK){if(!this.isInRequest()){if(AK.isWithin){AJ.model.drillGrid(this._addNodeKeyToAction(AJ,AK),this._getXtabCallback(AJ));}else{AK.rwGroupByElements=l(this,AJ);this._super(this._addNodeKeyToAction(AJ,AK));}}},onDownloadGridData:function M(AJ,AK){this.model.downloadGridData(this._addNodeKeyToAction(AJ,AK));},onExecuteNewObject:function O(AJ,AK){this._super(AK);},onReExecute:function AA(AJ){this.reExecute(AJ);},refresh:function AH(AJ,AL){var AK=this.id;this.model.getDataService().refresh(AJ,mstrmojo.func.wrapMethods({success:function(AM){mstrmojo.all[AK].setData(AM,true);}},AL));},invalidClientCache:function(){if(mstrApp.useBinaryFormat){mstrMobileApp.removeLiveCache(mstrApp.getCurrentProjectId(),this.model.ci.cid);}},onTransactionUpdates:function k(AJ,AL,AK){var AM=this.model,AO;if(mstrApp.useBinaryFormat){AO=AM.newCallback({success:function(){AJ.clear();AM.clearTxDeltaUpdate();if(AK){setTimeout(function(){AJ.autoRefresh();},250);}}});var AN=AM.getDataService();if(AL.manipulation===w){AN.txMarkRows(AL,AO);}else{AN.txChangeData(AL,AO);}}else{if(AK){AJ.autoRefresh();}}this.hasTxChanges=true;},onLink:function F(AJ,AM){if(!AM.url){return this._super(AJ,AM);}var AL=mstrmojo.string.parseUri(AM.url),AO=AL.authority,AN=AL.path;if(AL.protocol==="mstr"){this.handleSpecialLink(AL,AM);}else{if(AO==="mstrWeb"||AO==="Main.aspx"||(/mstrWeb$/.test(AN))||(/Main\.aspx$/.test(AN))){this._super(AJ,A.call(this,AL.queryKey,AM.src));}else{var AK=mstrMobileApp.openLink(AL.source,AM.target);if(AK){mstrApp.onerror({message:AK});}}}},getLinkRequest:function f(AO){var AJ;if(!AO.url){AJ=this.buildLinkParams(AO);}else{var AN=mstrmojo.string.parseUri(AO.url),AM=AN.queryKey,AQ=AN.authority,AP=AN.path;if(AN.protocol!=="mstr"&&(AQ==="mstrWeb"||AQ==="Main.aspx"||(/mstrWeb$/.test(AP))||(/Main.aspx$/.test(AP)))){AJ=this.buildLinkParams(A.call(this,AM,AO.src));if(AJ){switch(parseInt(AM.evt,10)){case 4001:AJ.taskID="reportExecute";AJ.styleName="AndroidMessageResultStyle";break;case 2048001:AJ.taskID="RWExecute";AJ.objType=55;var AL=AJ.desiredUnits;if(AL){var AK=V(AL);if(AK){AJ.desiredElements=AK;}delete AJ.desiredUnits;}break;}}}}if(AJ&&AJ.link){AJ.linkAnswers=AJ.link.toXml();delete AJ.link;}return AJ;},getDesiredElements:function e(AN){var AM=this.model.gbElements,AL="";if(AM){var AO=AM.split(";"),AK=AO.length,AJ;for(AJ=0;AJ<AK;AJ+=3){if(AJ>0){AL+=t;}AL+=AO[AJ]+t+AO[AJ+2];}}else{AL=V(u(this,AN));}return AL;},confirmMsgBeforeSubmit:function E(){var AK=this.model,AJ=AC(),AL;if(this.hasTxChanges&&AJ&&AJ.hasPendingTransactions(this.did)){if(AK.txrcd){AL=mstrmojo.desc(9254,"Pending transaction exists")+". "+mstrmojo.desc(9255,"You are about to replace a pending transaction.");}else{AL=mstrmojo.desc(9256,"There are one or more pending submissions in the transaction queue for this document.")+" "+mstrmojo.desc(9257,"Continuing will submit a new transaction.");}}return AL;},offlineTransactionsSubmitted:function AD(AK){var AJ=AC();if(AJ){AJ.setOfflineRecords(this.did);}this.hasTxChanges=false;},openOfflineTransactions:function AF(){var AJ=AC();if(AJ){AJ.showNotificationBoard(this,this.did,this.ttl);}},transactionDiscarded:function W(AJ){this.hasTxChanges=false;},destroy:function AB(){r.call(this);this._super();},nudgeWidget:function L(AK,AJ){if(mstrMobileApp!==undefined&&mstrMobileApp.nudgeWidget){mstrMobileApp.nudgeWidget(AK,JSON.stringify(AJ));}},resetOrientation:function AI(){r.call(this);},checkCache:function H(AL,AN,AJ,AM,AK){this.old_rf=this.model.rf;this._super(AL||{ifc:true,ci:this.model.ci},AN,AJ,AM,AK);},beforeViewHidden:function G(AJ){this._super(AJ);if(AJ){mstrmojo.GraphBase.hideTooltips();this.resetOrientation();}S.call(this);},afterViewVisible:function U(){this._super();var AJ=this.view;if(AJ&&AJ.afterViewVisible){AJ.afterViewVisible();}if(!this.isSubscription){D.call(this);}},hasFullScreenInfoWindow:function z(){var AJ=this.view;return AJ&&AJ.fullScreenInfoWindow;},updateActionToolbar:function p(AM){if(!this.hasFullScreenInfoWindow()){this.getTxnToolbarButton(AM);this.addFullScreenButton(AM);if(mstrMobileApp.isOnline()){var AL=this.model,AJ=AL.docModel||AL,AK=AJ.prompts,AN=AJ.getCurrentLayoutDef&&AJ.getCurrentLayoutDef(),AP=(AN&&AN.dri);if(AK&&AK.hasSupported()&&(AP===undefined||AP)){AM.addToolbarBtn(b,mstrmojo.desc(6189,"Filter"),b,true,3);}}if(this.hasPageBy()){AM.addToolbarBtn(T,mstrmojo.desc(2941,"Grouping"),T,true,2);}var AO=this.view&&this.view.getSupportedLayouts();if(AO&&(AO.length>1)){AM.addToolbarBtn(C,mstrmojo.desc(4174,"Layouts"),C,false,8);}}return this._super(AM);},handleMenuItem:function j(AP,AK){if(AP!==AG&&AP!==B){mstrmojo.GraphBase.hideTooltips();if(mstrApp.isTablet()){this.view.closeInfoWindowsOnTablet();}}switch(AP){case C:var AL=this.view,AJ=this,AN=function(){var AQ=AL.getSupportedLayouts();return{l:AQ,idx:d.indexOf(AQ,AL.getCurrentLayout())};},AO=AN(),AM={title:mstrmojo.desc(4174,"Layouts"),children:[{scriptClass:"mstrmojo.ui.MobileCheckList",isElastic:true,multiSelect:false,items:AO.l,selectedIndex:AO.idx,postselectionChange:function(AQ){var AR=AQ.added;if(AR){if(AL.showLayout(this.items[AR[0]])){mstrApp.closeDialog();}}},postCreate:function(){mstrApp.rootController.attachEventListener("rootOrientationChange",this.id,function(){var AQ=AN();this.set("items",AQ.l);this.select(AQ.idx);this.parent.resizeDialog();});}}]};if(mstrApp.useBinaryFormat){K.copy({isNative:true,scriptClass:"mstrmojo.android.nativedialog.LayoutDialog",onSelectionChange:function(AQ){AJ.onLayoutChange(AQ);this.close();},postCreate:function(){mstrApp.rootController.attachEventListener("rootOrientationChange",this.id,function(){var AQ=AN();this.update(AQ.l,AQ.idx);});}},AM);}mstrApp.showDialog(AM);return ;case T:this.showGroupByDialog();return ;case b:this.reprompt();return ;}return this._super(AP,AK);},makeCurrent:function Y(AJ){this.isBack=true;this._super(AJ);delete this.isBack;},handleSpecialLink:function X(AP,AS){var AR=AP.queryKey,AV=this.view,AK=AR.evt;if(AK==="2048500"){var AL=AR.panelName,AT=AV.model,AY=AT.getInfoWindow(AL);if(AY){AV.showInfoWindow(AY.id,AY.k,AS.src.domNode);}}else{if(AK==="2048030"){var AX=!!AR.useCache&&AR.useCache==="0",AN={fresh:AX,useRefreshProgress:mstrApp.isTablet()};this.refresh(AN);}else{if(AK==="2048258"){AE.call(this,AR);}else{if(AK==="3037"){this.share(AR.emailSubject,true);}else{if(AK==="3175"){this.startAnnotate();}else{if(AP.authority==="gb"){var AU=this,AQ=AV.getSelectedLayoutWidget(),AM=AQ.gb,AW=AR.a,AO=AR.e,AJ=d.forEach;AJ(AM.groupbys,function(Ac){var Aa=Ac.unit,Ab=Aa.target;if(Ab.did===AW){var AZ=function(){var Ae=Aa.elms,Ad=[];AJ(Ae,function(Ag,Af){Ad.push(K.copy(Ag,{k:Ac.k,on:(Af===Aa.idx)}));});mstrApp.showDialog({title:Ab.n,children:[{scriptClass:"mstrmojo.ui.MobileCheckList",selectionPolicy:"reselect",items:Ad,multiSelect:false,isElastic:true,selectedIndex:Aa.idx,preselectionChange:function(Af){if(Af.added[0]===Af.removed[0]){mstrApp.closeDialog();return false;}if(this._super){return this._super(Af);}},postselectionChange:function(Af){mstrApp.closeDialog();var Ag=Ad[Af.added[0]];AU.onGroupBy({groupbyKey:Ag.k,elementId:Ag.v});}}]});};if(AO&&parseInt(AO,10)!==0){this.onGroupBy({groupbyKey:Ac.k,elementId:AO},{failure:AZ},{noErrorMessage:true});}else{AZ();}return false;}});}else{this._super(AP,AS);}}}}}}},getContentDimensions:function x(){var AJ=mstrApp.getContentDimensions();return{w:AJ.w,h:AJ.h};},canDelegateToolBar:function J(){if(this.hasFullScreenInfoWindow()){return false;}return this._super();},onLayoutChange:function o(AJ){this.view.showLayout(this.view.getSupportedLayouts()[AJ]);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.desc","mstrmojo.android.EnumMenuOptions","mstrmojo.android.controllers._HasPageBy");mstrmojo.requiresDescs(5136,6189);var C=mstrmojo.android.EnumMenuOptions,G=C.PAGE_BY,F=C.REPROMPT;var E=mstrmojo.hash,H=mstrmojo.desc;mstrmojo.android.controllers._IsReportController=mstrmojo.provide("mstrmojo.android.controllers._IsReportController",E.copy(mstrmojo.android.controllers._HasPageBy,{_mixinName:"mstrmojo.android.controllers._IsReportController",hasPageBy:function B(){var J=this.gridData,I=J&&J.ghs;return !!(I&&I.phs);},updateActionToolbar:function A(L){this.addFullScreenButton(L);var I=this.view;if((I&&I.hasPageBy&&I.hasPageBy())||this.hasPageBy()){L.addToolbarBtn(G,H(5136,"Page By"),G,true,1);}if(mstrMobileApp.isOnline()){var K=this.xtabModel||this.model,J=K.prompts;if(J&&J.hasSupported()){L.addToolbarBtn(F,H(6189,"Filter"),F,true,3);}}return this._super(L);},handleMenuItem:function D(J,I){switch(J){case G:this.showPageByDialog();break;case F:this.reprompt();break;default:return this._super(J,I);}return false;}}));}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.string","mstrmojo.elementHelper","mstrmojo.SimpleObjectInputBox");var M=mstrmojo.array,G=mstrmojo.dom,B=mstrmojo.Enum_Keys,N=mstrConfig.thousandsSep;if(N===undefined){N=",";}var J=2147762227,T=2147762262,H=2147762269,K=140,I=-100,S=-101;var Q;mstrmojo.SearchBoxSelectorList=mstrmojo.declare(mstrmojo.SuggestionList,null,{getItemMarkup:function(X,W){if(!Q){Q=this._super(X,W).replace(">{@"+this.itemField+"}<",">{@"+this.itemField+"}{@weight}<");}return Q;},getItemProps:function V(Y,W){var X=this._super(Y,W),Z=Y.wt;X.weight=Z?"<em>("+mstrmojo.num.addSeparators(Z,N)+" "+this.parent.opener.wtStr+")</em>":"";return X;},onclick:function(X){var a=this.parent.opener.suggestionItems,W=a.length;this._super(X);if(W<=1){return ;}var Y=M.find(a,"t",I),Z=this.getItemFromTarget(X.getTarget());if(Z&&Z.t&&Z.t===I){M.forEach(a,function(b,d){if(!this.selectedIndices[d]){this.doItemSelect(b,{});}},this);}else{if(this.selectedIndices[Y]){this.doItemSelect(a[Y],{});}}}});mstrmojo.SearchBoxSelector=mstrmojo.declare(mstrmojo.SimpleObjectInputBox,null,{scriptClass:"mstrmojo.SearchBoxSelector",cssClass:"mstrmojo-SearchBoxSelector",srcid:null,dataSourcesXML:null,maxItemWidth:"",wtStr:"likes",suggestionListClass:"mstrmojo.SearchBoxSelectorList",useRichTooltip:false,postCreate:function A(){var W=this.suggestionPopup;W.cssClass="mstrmojo-SearchBoxSelector-suggest";W.nudge=function(){var e=this.domNode;if(!e){return ;}var X=Math.min(e.offsetHeight,(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||K),Z=e.offsetWidth,d=G.windowDim(),b=parseInt(this.left,10),a=parseInt(this.top,10);if(a+X>=d.h){a=Math.max(a-X,0);}if(b+Z>=d.w){b=Math.max(b-Z,0);}var Y=e.style;Y.top=a+"px";Y.left=b+"px";};},preBuildRendering:function C(){var W=this.parent.contentNode.offsetWidth||this.parent.width;this.set("maxItemWidth",parseInt(W,10));this._super();},postBuildRendering:function R(){var W=this.parent.defn.fmts;if(!W.height){this.domNode.style.height="auto";}return this._super();},filterCandidates:function U(X,a,W){var b=X,Y=this.suggestCount;if(!this.noCache){W=W||Y;if(a==="*"){a="";}else{a=mstrmojo.string.regEscape(a);}var d=this.itemField,Z=new RegExp(a,"i");b=M.filter(X,function(e){return Z.test(e[d]);},{max:W});}if(b.length){M.forEach(this.items,function(f){var e=M.find(b,"v",f.v);if(e>-1){b.splice(e,1);}});}if(b.length>=Y){b=b.slice(0,Y);}return b;},getCandidatesThroughTaskCall:function F(p,s){var j=this.id,b=this.getSuggestionTarget(),g=p.pattern||"",f=g,d=this.parent,l=this.srcid;var e=g;g=e;if(e===""){return ;}if(l){var r={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:l,dataSourcesXML:this.dsrc||"",blockCount:this.REQUEST_THRESHOLD,searchPattern:g,rawInput:f,browseFlags:1},h=null;var Y=d.defn;if(Y.dsid){h={};h.datasetID=Y.dsid;h.messageID=d.model.mid;h.ctlKey=d.ckey;}if(Y.sfs){var o="",Z="";M.forEach(Y.sfs,function(t){o+=Z+t.did;Z=";";});r.searchForms=o;if(d.model.isnew){var q="",W="",a=d.model,k=M.filterOne(a.getDatasetUnits(["att"]),function(t){return t.did===l;}),X=k.fs||[];M.forEach(Y.sfs,function(t){var u=M.filterOne(X,function(w){return w.fid===t.did;});q+=W+t.did+":"+(u&&u.bftp)||0;W=";";});r.clientFormPatterns=q;}}s.success=function(x){var AA=mstrmojo.all[j];if(x&&x.es){var AB=AA.getSuggestionTarget(),t=x.es.length;if(!x||!AB||(b!==AB)){return ;}var w=AB.getSearchPattern(),u=x.es;if(l){u=mstrmojo.elementHelper.buildElemsTerseID(u,l,true);}var z=p.pattern;AA._last_hit={items:u,pattern:z};if(w&&w.indexOf(z)>-1){AA.updateSuggestion(AA.filterCandidates(u,w));}}else{AA.updateSuggestion([]);}};s.failure=function(u){var t=parseInt(u.code,10)+4294967296;if(t!==J&&t!==T&&t!==H){mstrmojo.alert(u.message);}};mstrmojo.elementHelper.browseElements(s,r,h);}},onsuggestionItemsChange:function E(){var b=this.suggestionItems,Y=this.suggestionPopup,X=Y.editorNode,Z=b&&(b.length>8),W="",a="";if(Z){W=(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||K;a="px";}if(X){X.style.maxHeight=W+a;}else{if(Z){a+=";";Y.cssText=(Y.cssText||"")+"max-height:"+W+a;}}},getSuggestionPos:function O(){var W=this._super();if(W){W.lockIW=this;}return W;},updateSuggestion:function P(X){var W=X&&X.length;this.autoSelect=true;this.set("disableClick",false);if(this.parent.defn.multi&&W&&W>1){X=M.filter(X,function(Y){return Y.v!=="u;"&&Y.t!==14;});X.unshift({n:mstrmojo.desc(13976,"(All search results)"),t:I});this.autoSelect=false;}if(!W){X=[{n:mstrmojo.desc(13779,"No elements match your search"),t:S,cls:"nomatch"}];this.autoSelect=false;this.set("disableClick",true);}this._super(X);},handleSuggestionItemSelect:function L(X,Y){if(M.isArray(X)||X.t===I){X=M.ensureArray(X);var W=M.filter(X,function(Z){return Z.t!==I;});if(W.length<X.length){W=M.filter(this.suggestionItems,function(Z){return Z.t!==I;});}this.onSuggestionItemSelect(W);}else{this._super(X,Y);}},prekeydown:function D(g){this._super(g);var b=g.e,h=(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||K,Z=8,X=h/Z;var Y=this.getSelected();if(Y){var a=Y._renderIdx,W=(a-Z+1)*X,f=(a-1)*X,d=this.suggestionPopup.domNode.scrollTop;switch(parseInt(b.keyCode||b.charCode,10)){case B.DOWN_ARROW:if(d<=W){this.suggestionPopup.domNode.scrollTop=W;}else{if(d>f){this.suggestionPopup.domNode.scrollTop=f;}}break;case B.UP_ARROW:if(d<=W||d>f){this.suggestionPopup.domNode.scrollTop=f;}break;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.string","mstrmojo.Enum_Keys","mstrmojo.SimpleObjectInputBox");var D=mstrmojo.array,B=mstrmojo.dom,E=mstrmojo.Enum_Keys,A=mstrConfig.thousandsSep;var H={DEFAULT:1,ADDING:2,EMPTY:3,FULL:4};if(A===undefined){A=",";}var I;mstrmojo.TextBoxSelector=mstrmojo.declare(mstrmojo.SimpleObjectInputBox,null,{cssClass:"mstrmojo-TextBoxSelector",srcid:null,dataSourcesXML:null,maxItemWidth:"",preBuildRendering:function G(){this.set("maxItemWidth",parseInt(this.parent.contentNode.style.width,10));this._super();},prekeydown:function C(J){var L=J.e;switch(parseInt(L.keyCode||L.charCode,10)){case E.TAB:case E.ENTER:B.preventDefault(J.hWin,L);var M=this.inputBox.value;if(M){if(D.find(this.items,"v",M)===-1){this.onSuggestionItemSelect({n:M,v:M});}else{this.setDefaultState();}}break;case E.ESCAPE:this.setDefaultState();break;case E.BACKSPACE:if(!this.getSearchPattern()){B.preventDefault(J.hWin,L);var K=this.items&&this.items.concat();if(K&&K.length){K.splice(K.length-1,1);this.set("items",K);var N=this.id;window.setTimeout(function(){mstrmojo.all[N].set("state",H.ADDING);},0);}}break;}},prekeyup:function F(J){}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ME.TokenInputBox");mstrmojo.requiresDescs(13542,13543);var B=mstrmojo.array;var L={VALID:0,UNKNOWN:1,VALIDATING:2,ERROR:3,AMBIGUITY:4},G={0:"valid",1:"unknown",2:"validating",3:"error",4:"ambiguity"},H={0:mstrmojo.desc(9565,"Valid Metric Formula."),1:mstrmojo.desc(9106,"Require Validation?"),2:mstrmojo.desc(9566,"Validation in Progress..."),3:mstrmojo.desc(9567,"Validation Failed with Syntax Error!"),4:mstrmojo.desc(9568,"Validation Failed with Object Ambiguity!")};function D(O){if(!O){return L.VALID;}return{"-2147214845":L.ERROR,"-2147214846":L.AMBIGUITY}[O]||L.ERROR;}mstrmojo.ME.MetricEditBox=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.MetricEditBox",vStatus:L.VALID,iStatus:"",showStatus:true,browseItemVisible:true,absorbAmbiguity:true,isObjectVisible:function(O){return true;},markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-MEBox-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;}},markupMethods:{onvStatusChange:function(){var P=this.vStatus,O=this.vStatusNode;O.className="mstrmojo-MEBox-vStatus "+G[P];O.innerHTML=(this.getStatusDesc&&this.getStatusDesc(P))||H[P]||"";},oniStatusChange:function(){this.iStatusNode.innerHTML=this.iStatus;this.iStatusNode.title=this.iStatus;}},children:[{scriptClass:"mstrmojo.ME.TokenInputBox",alias:"inputBox",slot:"editNode",renderOnScroll:false,renderBlockSize:0,bindings:{browseItemVisible:"this.parent.browseItemVisible",candidates:"this.parent.candidates"}}],init:function N(O){if(this._super){this._super(O);}this.statusCssClass=this.showStatus?"":"hidden";},getSearchPattern:function M(){return this.inputBox.getSearchPattern();},getHighlightedText:function I(P,O){return this.inputBox.getHighlightedText(P,O);},item2textCss:function F(O){return{4:"m",7:"am",11:"fx",12:"a",13:"fc",43:"tr",47:"cs"}[O.t]||"";},handleSuggestionItemSelect:function E(O){var P=this.abiguityDialog;if(O){P.onItemSelect(O);}P.close();},showDesc:true,showPath:true,abiguityDialog:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-ME-ambiguityDialog",onOpen:function(){this.set("title",mstrmojo.desc(13542,"Object Ambiguity - ##").replace("##",this.ambiguousName));this.list.clearSelect();this.list.set("items",this.items);this.list.singleSelect(0);this.label.set("text",mstrmojo.desc(13543,"More than one object with the name '##' were found.").replace("##",this.ambiguousName));},children:[{scriptClass:"mstrmojo.Label",alias:"label",text:""},{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",alias:"list",cssClass:"mstrmojo-ME-ambiguityList",bindings:{items:"this.parent.opener.suggestionItems"},onclick:function(O){mstrmojo._IsList.onclick.call(this,O);}}],buttons:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton hot",text:mstrmojo.desc(547,"Select"),onclick:function(){var O=this.parent.parent;O.opener.handleSuggestionItemSelect(O.list.selectedItem);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]},defaultOnTokensModify:function(){this.set("vStatus",L.UNKNOWN);this.set("iStatus","");},postBuildRendering:function A(){this._super();this.inputBox.attachEventListener("tokensModify",this.id,"defaultOnTokensModify");this.inputBox.attachEventListener("tokensModify",this.id,"ontokensModify");},updateInputBoxItems:function K(O){this.inputBox.set("items",O.items);},replaceErrorToken:function C(O){this.inputBox.replaceErrorToken(O);},handleValidation:function J(O){if(!O){this.set("vStatus",L.ERROR);return ;}O.vs=D(O.rjec);this.set("vStatus",O.vs);this.set("iStatus",O.rjed||"");this.updateInputBoxItems(O);this.inputBox.focus();if(O.vs===L.AMBIGUITY){var W=this,T=O.items,S=B.find(T,"sta",-1),P=T[S].v,U=function(X){W.replaceErrorToken(X);W.set("iStatus","");W.set("vStatus",L.UNKNOWN);if(W.continueValidataion){W.continueValidataion();}};var Q=B.filter(O.srfd.items,this.isObjectVisible);var V=this.parent.candidates,R=V&&V.items;if(R){B.forEach(Q,function(Y){var X=B.find(R,"did",Y.did);if(X===-1){if(this.absorbAmbiguity){R.push(Y);}}else{Y.path=R[X].path;}});}if(Q.length===1){U(Q[0]);return ;}this.openPopup("abiguityDialog",{zIndex:100,items:Q,ambiguousName:P,onItemSelect:U});}else{if(this.postHandleValidation){this.postHandleValidation();}}}});mstrmojo.ME.MetricEditBox.VALIDATION_STATUS=L;}());(function(){mstrmojo.requiresCls("mstrmojo.MobileXtab","mstrmojo.array","mstrmojo.hash");function B(){var K=this.xtabStyleSheet,J=K&&K.parentNode;if(J){J.removeChild(K);delete this.xtabStyleSheet;}}mstrmojo.AndroidXtab=mstrmojo.declare(mstrmojo.MobileXtab,null,{scriptClass:"mstrmojo.AndroidXtab",scrollerFriction:0.0015,preBuildRendering:function G(){B.call(this);this.updateXtabStyles(this.model.data.cssString);this._super();},onwidthChange:function D(){if(this.gridData.afw){var K=this.scrollboxNode,J=this.width;if(K){K.style.width=J;}else{this.scrollboxNodeCssText="width: "+J;}}if(this._super){this._super();}},updateXtabStyles:function E(J){if(!this.xtabStyleSheet){this.xtabStyleSheet=document.getElementsByTagName("head")[0].appendChild(document.createElement("style"));}this.xtabStyleSheet.appendChild(document.createTextNode(J));},unrender:function F(J){this._super(J);B.call(this);},getMaskNode:function C(){var J=document.createElement("div");J.appendChild(this.xtabStyleSheet.cloneNode(true));J.appendChild(this.domNode.cloneNode(true));return J;},updateActionMenu:function A(J,K){this._selectionActions=K;return true;},setModel:function I(J){this._super(J);this.controller.getPageByTree(false);},deselectCell:function H(){this._super();delete this._selectionActions;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.ui.PopupButton","mstrmojo.ui.PulldownCheckList");var G=mstrmojo.css,D=mstrmojo.hash,E={0:true};function B(){var O=this.selectedIndices=D.copy(this.getPopupList().selectedIndices),K=this.items,N=[],M=this.allIdx,L=this.noneIdx;if(K){if(O[M]){N.push(K[M].n);}else{if(O[L]){N.push(K[L].n);}else{mstrmojo.array.forEach(K,function(Q,P){if(O[P]){N.push(Q.n);}});}}}this.set("value",N.join(", "));}mstrmojo.ui.MultiSelectPulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown],{scriptClass:"mstrmojo.ui.MultiSelectPulldown",isHostedWithin:false,popupWidget:undefined,init:function J(K){this._super(K);G.addWidgetCssClass(this,"multi");this.hostedCSSClass=this.hostedCSSClass+" multi";},submitSelections:function A(){B.call(this);this.onchange();},_set_selectedIndices:function F(M,K){var L=this.selectedIndices=D.copy(K||this.selectedIndices||E);this.getPopupList().set("selectedIndices",L);B.call(this);return true;},select:function H(K){this.getPopupList().select(K);},getPopupWidget:function C(){return this.popupWidget;},getPopupList:function I(){return this.popupWidget.list;},children:[{scriptClass:"mstrmojo.ui.PulldownCheckList",alias:"popupWidget"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.array","mstrmojo.Button","mstrmojo.css","mstrmojo.hash","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.func");mstrmojo.requiresDescs(221,1442,2751,2891,11949,11950,11951,11942,13397,13398,14640,14648);var R=mstrmojo.array,U=mstrmojo.css,N=mstrmojo.hash,O=mstrmojo.func,M=mstrmojo.Button.newWebButton,P=mstrmojo.dom,T="mstrmojo-link-validation",Q="mstrmojo-link-vt",F=function F(V){if(V.old){this.removedLinks.push(V);}this.links.removeChildren(V);},S=function S(){var w=this.dsMap,s=this.docModel,Y=s.datasets,AA=function AA(j,x,a){var k={n:a||"",did:x||null,parent:j||null,lv:(j?j.lv+1:-1),children:[]};if(j){j.children.push(k);}return k;},f=AA(),X,W,V,h,Z,t,o,z,u,r,q,p,d,b,e,l,g;N.forEach(Y,function(a){if(s.isMDXDataset(a)){Z=a.tables;for(r=0,b=Z.length;r<b;r++){t=Z[r];X=AA(f,t.did,t.n);X.isMDX=true;for(q=0,e=t.dimensions.length;q<e;q++){o=t.dimensions[q];W=AA(X,o.did,o.n);for(p=0,l=o.hierarchies.length;p<l;p++){z=o.hierarchies[p];V=AA(W,z.did,z.n);for(d=0,g=z.att.length;d<g;d++){u=z.att[d];h=AA(V,u.did,u.n);h.att=u;w[t.did+":"+u.did]=h;}}}}}else{X=AA(f,a.did,a.name);X.isMDX=false;R.forEach(a.att,function(j){h=AA(X,j.did,j.n);h.att=j;w[a.did+":"+j.did]=h;});}});return f;},B=function B(b,d){b=R.ensureArray(b);var a=this,Z=this.attribute.did,e=this.docModel,X=e.findDatasetIdFromUnit(Z),W="\u001F",V={success:function(g){var j=g.als,f=(e.als&&e.als.links)||{},h=a.dsTree;R.forEach(b,function(t,o){var u={},k={},l=[],p={},s=Z+" "+t,q=R.filter(j[o].ats,function(w){return !e.isInDataset(X,w.at,["att"]);}),r=function r(w,x){if(!p[w]){p[w]={};}if(!p[w][x]){p[w][x]=true;}};R.forEach(q,function(z){var w=z.at,x=z.fms;u[w]=true;if(x){R.forEach(x,function(AA){r(w,AA.fm);});}});N.keyarray(f).forEach(function(w){if(w===s){R.forEach(f[w],function(x){x=x.split(" ");u[x[0]]=true;r(x[0],x[1]);});}});if(N.keyarray(u).length>0){R.forEach(h.children,function(x){var w=function(z){var AA;if(!z.att){return ;}z=z.att;if(u[z.did]){if(!k[z.n]){k[z.n]={};}if(!k[z.n][z.did]){k[z.n][z.did]=[];}k[z.n][z.did].push(x.n);AA=N.copy(z,AA);AA.dsId=x.did;l.push(AA);}};if(x.isMDX){R.forEach(x.children,function(z){R.forEach(z.children,function(AA){R.forEach(AA.children,w);});});}else{R.forEach(x.children,w);}});}a.tgtAttrs[t]=l;a.tgtForms[t]=p;a.namesHash[t]=k;});}},Y={taskId:"validateDocumentLinks",msgID:e.mid,action:1,attributeList:Z,attributeFormList:b.join(W)};mstrApp.serverRequest(Y,O.wrapMethods(V,d));},E=function(Y,a,W,Z){Y.richTooltip=null;if(!Y.isSearching){var X=a&&a.scrollWidth>a.clientWidth;W=X?mstrmojo.desc(14648,"## from ###").replace("##",W):"";if(Z){if(!X){W=mstrmojo.desc(14640,"From ###");}W=W.replace("###",Z);}var V=mstrmojo.dom.position(a);Y.richTooltip={cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:W,top:V.y-6,left:V.x};}},D=function D(d){var e=this,g=function(q){var o=q.fs,r=q.de,p=[];(o||[]).forEach(function(s){if(s.obf&&(!r||s.idf)){p.push({n:s.fnm,v:s.fid,idf:s.idf});}});return p;},h=g(this.attribute),Z=function(r,p){var o=g(r);var s=(e.tgtForms[p]&&e.tgtForms[p][r.did])||{};var q=[];R.forEach(o,function(t){if(s[t.v]){q.push(t);}});return q;},b=function b(p){var o=[];R.forEach(e.tgtAttrs[p],function(q){if(Z(q,p||e.idFormId).length>0){var s=e.namesHash[p],r=q.n;if(s[q.n]&&N.keyarray(s[q.n]).length>1){r=r+" ("+s[q.n][q.did].join(",")+")";}o.push({n:q.n,v:q,tt:r});}});if(o.length===0){o.push({n:mstrmojo.desc(13398,"No valid object"),v:{did:null},cls:"nvo",t:1});}return o;},j=b((d&&d.srcFormId)||this.idFormId),k=function(o,p){return R.find(o.fs,p?"fid":"idf",p||true);},l=function(p){var o=-1;j.forEach(function(r,q){if(r.v.did===p){o=q;}});return o;},W=function(p){var o=j[p];if(!o){return mstrmojo.desc(13397,"Select an attribute");}else{return o.n;}},X=function(p){var q=p.items,o=p.selectedIndex;if(o>=0){if(q[o].idf){return ;}}q.forEach(function(s,r){if(s.idf){p.set("selectedIndex",r);}});};this.links.addChildren({scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linkRow",slot:"containerNode",old:!!d,oldMeta:d,getMeta:function(){var o=this.linkFromForm,q=this.linkToAtt,p=this.linkToForm;return{srcAttrId:e.attribute.did,srcFormId:o.items[o.selectedIndex].v,tgtAttrId:q.items[q.selectedIndex]&&q.items[q.selectedIndex].v.did,tgtFormId:p.items[p.selectedIndex]&&p.items[p.selectedIndex].v};},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-attName",text:e.attribute.n,useRichTooltip:true,updateTooltipConfig:function(s){var r=s.target,o=this.text,p=e.datasetId,q=p?e.docModel.datasets[p].name:"";E(this,r,o,q);}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormFromPD",alias:"linkFromForm",value:"ID",isHostedWithin:true,items:h,selectedIndex:k(e.attribute,d&&d.srcFormId),onitemSelected:function(p){var o=this,q=function(){var s=o.parent.linkToAtt;j=b(p.v);s.set("items",j);s.set("selectedIndex",-1);s.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(s.selectedNode,"nvo");},r={success:q};if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!p.idf){X(this.parent.linkToForm);if(!e.tgtForms[p.v]){B.call(e,p.v,r);return ;}}q();}}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-linksToLabel",text:mstrmojo.desc(11949,"links to")},{scriptClass:"mstrmojo.ui.SearchablePulldown",cssClass:"mstrmojo-linkToAtt",alias:"linkToAtt",useRichTooltip:true,isHostedWithin:false,items:j,text:W(l(d&&d.tgtAttrId)),selectedIndex:l(d&&d.tgtAttrId),allowCustomText:true,allowEmptyText:true,updateTooltipConfig:function(t){var s=t.target,o=s.getAttribute("tt"),q=this.getSelectedItem(),p=q?q.v.dsId:null,r=p?e.docModel.datasets[p].name:"";if(this.selectedNode===s&&q){o=q.tt;}E(this,s,o,r);},onitemSelected:function(s){if(!s||s.v.did===null){return ;}var r=this.parent.linkToForm,q=this.parent.linkFromForm,p=Z(s.v,q.items[q.selectedIndex].v),t=function t(u,x){var w=R.find(u,x?"v":"idf",x||true);if(w===-1&&u.length>0){w=0;}return w;},o;R.forEach(p,function(u){if(u.idf){o=false;return false;}});if(o){K.call(e,true);}r.set("items",p);r.set("selectedIndex",t(p,!this.hasRendered&&d&&d.tgtFormId));if(this.hasRendered&&this.parent.old){this.parent.oldUpdated=true;}J.call(e);},onPopupWidgetOpened:function a(){if(this.selectedIndex===-1){this.set("text","");}U.removeClass(this.selectedNode,"nvo");},onPopupWidgetClosed:function f(){mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this);if(this.selectedIndex===-1&&this.text===""){this.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(this.selectedNode,"nvo");}else{U.removeClass(this.selectedNode,"nvo");}this.hideTooltip();R.forEach(e.collapseTargets,function(o){o.className="arrow-b";U.removeClass(o.parentNode.parentNode,"collapse");});R.forEach(e.collapseTreeNodes,function(o){delete o.collapse;});R.forEach(this.list.itemsContainerNode.childNodes,function(o){o.style.display="";});},postBuildRendering:function V(){mstrmojo.ui.SearchablePulldown.prototype.postBuildRendering.call(this);if(this.selectedIndex===-1){U.addClass(this.selectedNode,"nvo");}this.list.popupConfig.clear();},getPopupListConfig:function Y(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",width:"170px",tooltipOrientation:"vertical",selectionPolicy:"reselect",useRichTooltip:true,locksHover:true,listHooks:{select:function o(u,w,t){this.parent.set("selectedIndex",t);this.close();}},onclick:function p(AD){try{var u=AD.getTarget(),AE=this.getItemFromTarget(u),AA=P.findAncestorByAttr(u,"idx",true,this.domNode);if(AE){AD.cancel();if(u.className==="arrow-b"||u.className==="arrow-r"){var z=this.items,t=this.itemsContainerNode.childNodes,x=function x(AG){var AF;while(AG){AF=AG.className||"";if(AF.indexOf("lv")===0){return window.parseInt(AF.substring(2),10);}AG=AG.firstChild;}return null;},AC=function AC(AF,AI){var AH=e.dsMap,AG=AH[AF.dsId+":"+AF.did];while(AG){if(AG.lv===AI){return AG;}AG=AG.parent;}return null;},AB=function AB(){var AO=(u.className==="arrow-b"),AI=u.parentNode.parentNode,AF=x(AI),AJ=AE._renderIdx,AG=AC(AE.v,AF),AM=z.length,AL,AH,AK,AN,AQ,AP;u.className=AO?"arrow-r":"arrow-b";if(!e.collapseTargets){e.collapseTargets=[];}e.collapseTargets.push(u);U.toggleClass(AI,"collapse",AO);AG.collapse=AO;if(!e.collapseTreeNodes){e.collapseTreeNodes=[];}e.collapseTreeNodes.push(AG);for(AL=AJ+1;AL<AM;AL++){AH=t[AL];AK=x(AH);if(AK<=AF){break;}AN=AC(z[AL].v,AK);AQ=AN.parent;AP=true;while(AQ){if(AQ.collapse){AP=false;break;}AQ=AQ.parent;}AH.style.display=(AP?"":"none");}};AB();}else{if(AA&&AA.node.className.indexOf("item")!==-1){this.doItemSelect(AE,AD||{});}}}}catch(w){mstrApp.onerror(w);}},getItemProps:function q(w,t){var u=mstrmojo._IsList.getItemProps.call(this,w,t);var x=w.cls;if(x){u.addCls(x);}return u;},getItemMarkup:function s(AF,AE){if(AF.v.did===null){return'<{@tag} class="item {@cls}" did="'+AF.v.did+'" idx="{@idx}" style="{@style}">{@n}</{@tag}>';}var AG=[],AC=AF.v.did,w=AF.v.dsId,x=w?e.docModel.datasets[w]:null,u=x?x.name:"",AD=AE>0&&this.items[AE-1].v,AA=e.dsMap,z=AA[AF.v.dsId+":"+AC],t=AA[(AD&&(AD.dsId+":"+AD.did))];AG.push("</div>");while(z){if(z.lv===-1){break;}if(z.att){var AB=z.att.da?"derived-attr":"attr";AG.push('<div class="lv'+z.lv+' dim item {@cls}" tt="'+AF.tt+'" did="'+AC+'" dsName="'+u+'" idx="{@idx}" style="{@style}"><div><div class="'+AB+'"></div></div>{@n}</div>');}else{if(z!==t){AG.push('<div class="lv'+z.lv+' dim" dtt="'+z.n+'" idx="{@idx}"><div><div class="arrow-b"></div></div>'+z.n+"</div>");}else{break;}}z=z.parent;t=(t&&t.parent)||null;}AG.push("<div>");return AG.reverse().join("");},updateTooltipConfig:function r(AA){var z=AA.target,w=z.getAttribute("tt"),u=z.getAttribute("dtt"),x=z.getAttribute("dsName"),t=w||u;if(t){E(this,z,t,x);}}};}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormToPD",alias:"linkToForm",value:"ID",isHostedWithin:true,items:[],onitemSelected:function(o){if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!o.idf){X(this.parent.linkFromForm);}}}},M("",function(){F.call(e,this.parent);},false,{cssClass:"mstrmojo-removeLink"})]});this.links.renderChildren();},K=function(V){U.toggleClass(this.editorNode,"mstrmojo-advanced",V);},L=function(Y){var W=this,Z=T,V;try{mstrmojo.all[Z].destroy();}catch(X){}V={scriptClass:"mstrmojo.Editor",id:Z,title:mstrmojo.desc(2751,"Message"),cssClass:"mstrmojo-alert",buttons:[M(mstrmojo.desc(1442,"Ok"),function(){mstrmojo.all[Z].destroy();H.call(W);},true)],children:[{scriptClass:"mstrmojo.Label",text:Y}],visible:true,zIndex:1000};mstrmojo.insert(V).render();},H=function(){var X=this,W=this.illLinks,V=this.links.children,Y=Q;R.forEach(W,function(Z){Z=Z.al;R.forEach(V||[],function(b){var e=b.getMeta(),f=b.linkToAtt,a,d;if(e.srcAttrId===Z.alaid1&&e.tgtAttrId===Z.alaid2){if(!mstrmojo.all[Y]){d=new mstrmojo.Tooltip({id:Y,cssClass:X.themeClassName+" vi-warning vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,updatePopupConfig:null});P.attachEvent(X.editorNode,"click",function(){d.close();U.toggleClass(f.selectedNode,"mstrmojo-Warning",false);});}else{d=mstrmojo.all[Y];}d.close();a=mstrmojo.dom.position(f.selectedNode);d.set("top",a.y-6);d.set("left",a.x);d.set("content",Z.alstmsg);U.toggleClass(f.selectedNode,"mstrmojo-Warning",true);d.open();return false;}});});},A=function(){var V=mstrmojo.all[Q];if(V){V.close();}},J=function J(){this.buttons[0].enabled=true;if(this.btnHbox){this.btnHbox.children[0].set("enabled",true);}},G=function G(){var V=this,W=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-addLink",text:mstrmojo.desc(11950,"Add A Link"),title:mstrmojo.desc(11950,"Add A Link"),onclick:function(){D.call(V);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-showForms",text:mstrmojo.desc(2891,"Show Attribute Forms"),title:mstrmojo.desc(2891,"Show Attribute Forms"),onclick:function(){K.call(V,true);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-hideForms",text:mstrmojo.desc(11951,"Hide Attribute Forms"),title:mstrmojo.desc(11951,"Hide Attribute Forms"),onclick:function(){K.call(V,false);A.call(V);}}],slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linksBox mstrmojo-advanced",alias:"links",slot:"containerNode"}];this.addChildren(W);};mstrmojo.vi.ui.editors.AttributeLinkEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",title:mstrmojo.desc(11942,"Link Attributes"),cssClass:"mstrmojo-att-link",btnAlignment:"right",buttons:null,modal:true,visible:false,help:"link_attributes_editor.htm",attribute:null,tgtAttrs:null,tgtForms:null,docModel:null,datasetId:null,namesHash:null,removedLinks:null,preBuildRendering:function C(){var Y=this,W=this.docModel,X=function(){var Z=(W.als&&W.als.links)||{},a=[];N.keyarray(Z).forEach(function(b){if(b.indexOf(Y.attribute.did+" ")===0){Z[b].forEach(function(d){a.push({srcAttrId:b.split(" ")[0],srcFormId:b.split(" ")[1],tgtAttrId:d.split(" ")[0],tgtFormId:d.split(" ")[1]});});}});return a;},V;this.set("buttons",[M(mstrmojo.desc(1442,"OK"),function(){var h=[],a=Y.links.children,Z=function(){var j=W.controller,k=W.controller.getRefreshCallback();if(h.length>0){j.cmdMgr.execute({execute:function(){this.submit(h,k);},urInfo:{callback:k}});}Y.close();},g=false,d,e;Y.removedLinks.forEach(function(j){d=N.copy(j.oldMeta,{act:"applyAttributeLinking",unlink:true});h.push(d);});(a||[]).forEach(function(j){if(j.old&&j.oldUpdated){d=N.copy(j.oldMeta,{act:"applyAttributeLinking",unlink:true});h.push(d);}if(!j.old||(j.old&&j.oldUpdated)){e=j.getMeta();if(!e.tgtAttrId){return ;}d=N.copy(e,{act:"applyAttributeLinking",unlink:false});h.push(d);}});R.forEach(h,function(j){if(!j.unlink){g=true;return false;}});if(!g){Z();return ;}var f={taskId:"validateDocumentLinks",msgID:W.mid,action:2,manipulationList:'{"ml":'+JSON.stringify(h)+"}"},b={success:function(j){if(j.als&&j.als.length>0){var k="";R.forEach(j.als,function(l){k+=l.al.alstmsg+"\n";});Y.illLinks=j.als;L.call(Y,k);return ;}Z();}};mstrApp.serverRequest(f,b);},true,{enabled:false}),M(mstrmojo.desc(221,"Cancel"),function(){Y.close();})]);G.call(this);V=X(this.attribute.did);if(V.length>0){V.forEach(function(Z){D.call(Y,Z);});J.call(this);}else{D.call(this);}this._super();},close:function I(){A.call(this);this.destroy();}});mstrmojo.vi.ui.editors.AttributeLinkEditor.open=function(b){var W=mstrmojo.insert(N.copy(b,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",tgtAttrs:{},tgtForms:{},namesHash:{},removedLinks:[]})),Z=W.attribute,d=Z.did,V=W.docModel,Y=(V.als&&V.als.links)||{},X=[],a={success:function(){W.set("visible",true);W.render();}};R.forEach(Z.fs,function(e){if(e.idf){W.idFormId=e.fid;return false;}});N.keyarray(Y).forEach(function(f){var e=f.split(" ");if(e[0]===d){X.push(e[1]);}});if(R.indexOf(X,W.idFormId)===-1){X.push(W.idFormId);}W.dsMap={};W.dsTree=S.call(W);B.call(W,X,a);};}());(function(){mstrmojo.requiresCls("mstrmojo.VisBase","mstrmojo.DocPortlet");var L={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"},P,B;mstrmojo.Vis=mstrmojo.declare(mstrmojo.VisBase,null,{scriptClass:"mstrmojo.Vis",offsetTop:0,offsetLeft:0,isAndroid:window.navigator.userAgent.indexOf("Android")!=-1,reRenderOnDimensionChg:true,isVis:function(){return true;},setModel:function Q(R){this._super(R);if(R.data){this.set("model",R.data);}this.xtabModel=R;if(this.controller&&typeof (this.controller.getPageByTree)!="undefined"){this.controller.getPageByTree(false);}},destroy:function O(){this._super();var R=this.xtabModel;if(R&&R.destroy){R.destroy();delete this.xtabModel;}},setDimensions:function N(T,S){var R=this._super(T,S);if(R&&this.hasRendered&&this.reRenderOnDimensionChg){this.reRender();}return R;},buildRendering:function M(){if(this.parent instanceof mstrmojo.DocPortlet){delete this.left;delete this.top;this.height=this.fmts&&this.fmts.height;}this._super();},postBuildRendering:function G(){P=this.width;B=this.height;this.adjustWidgetOffsets();this._super();},adjustWidgetOffsets:function E(){var R=this.domNode,S={top:0,left:0};if(typeof (mstr)!="undefined"&&mstr.utils.BoxModel){S.top=mstr.utils.BoxModel.getElementSumOffsetTop(R);S.left=mstr.utils.BoxModel.getElementSumOffsetLeft(R);}else{if(typeof (mstrmojo)!="undefined"){S=mstrmojo.boxmodel.offset(R);}}this.offsetTop=S.top;this.offsetLeft=S.left;},update:function F(V){V=V||this.node;if(V){if(V.data){this.set("model",V.data);if(this.xtabModel&&this.xtabModel.set){this.xtabModel.set("data",V.data);}this.model=V.data;if(this.model.layoutModel){this.layoutModel=this.model.layoutModel;}if(this.model.layoutNode){this.layoutNode=this.model.layoutNode;}mstrmojo.hash.copy(V.data.extProps,this);}var T=this.controller,S=T.view,X=(S.hasRendered&&S.getCurrentLayout&&S.getCurrentLayout());if(T.view.fullScreenInfoWindow&&(X&&X.defn.visName)){var W=mstrApp.rootView.getContentDimensions();this.height=W.h+"px";this.width=W.w+"px";}else{this.fmts=V.defn.fmts||V.defn.units[this.model.k].fmts;var R=this.fmts;if(R){for(var U in L){v=L[U];if(U in R){this[v]=R[U];}}}}}if(this.model){this.initFromVisProps(this.model.vp);}this.updated=true;return true;},getModel:function A(S){if(S){var R=mstrmojo.Vis.getVisGrid(this.layoutModel,this.layoutNode,S);if(R){return R.data;}else{alert(mstrmojo.desc(8427,"Incorrect visualization properties encountered.  Data may be inconsistent.  Please reset your properties."));return{};}}else{return this.model;}},getDataParser:function K(R){return new mstrmojo.Vis.DataParser(this.getModel(R));},renderErrorMessage:function H(R){this.domNode.innerHTML='<div class="mstrmojo-message">'+R+"</div>";},getMessageID:function J(){return this.model.mid&&this.model.mid||this.xtabModel&&this.xtabModel.docModel&&this.xtabModel.docModel.mid;},hasNoninfowindowTarget:function D(U){var b=this.xtabModel,a=(b&&b.docModel);var d=false;if(a){var Z=a.defn&&a.defn.layouts,T=null;var S;if(Z){for(S in Z){if(Z[S].loaded){T=Z[S];break;}}}var V=T&&T.units;this.selectorTargets={};if(V&&U.scObjList){for(var S=0;S<U.scObjList.length;S++){var W=U.scObjList[S];var X=W.sc.tks.split("\x1E");for(var R=0;R<X.length;R++){var Y=V[X[R]];if(Y){this.selectorTargets[X[R]]=Y;if(!this.isChildOfIfw(V,Y)){d=true;}}}}}}return d;},isChildOfIfw:function I(R,S){while(S){if(S.ifw){return true;}S=R[S.pnk];}return false;},performAction:function C(R){var T=this.xtabModel.getAction(R),S=T&&T.h;if(S&&this.controller[S]){this.controller[S](this,T.a);return true;}return false;}});mstrmojo.Vis.getVisGrid=function(R,Y,S){var W=Y;var U=R.getChildren(Y,false);for(var T=0;T<U.length;T++){var X=U[T];if(X.k==S){return X;}else{var V=mstrmojo.Vis.getVisGrid(R,X,S);if(V){Y=W;return V;}}}};mstrmojo.Vis.DataParser=function(T){var a=mstrmojo.Vis;return{getRowTitles:function(){return new a.Titles(T,true);},getColTitles:function(){return new a.Titles(T,false);},findMetricValue:function(f,k){var j=T.ghs.rhs.items;for(var g in j){var h=j[g].items;var d=true;for(var b in f){if(f[b]!=h[b].idx){d=false;break;}}if(d){return new mstrmojo.Vis.MetricValue(T.gvs.items[g].items[k]);}}},getTotalRows:function W(){var b=T.ghs&&T.ghs.rhs&&T.ghs.rhs.items;return(T.eg||!b)?0:b.length;},getTotalColHeaderRows:function U(){return(!T.ghs.chs.items?0:T.ghs.chs.items.length);},getTotalCols:function R(){return this.getColHeaders(0).size();},getRowHeaders:function Z(b){return new a.Headers(T,b,true);},getColHeaders:function Y(b){return new a.Headers(T,b,false);},getMetricValue:function X(d,b){return new a.MetricValue(T,T.gvs.items[d].items[b]);},getColumnHeaderCount:function V(){return T.gvs.items[0].items.length;},getCSSString:function S(){return T.cssString;}};};mstrmojo.Vis.Titles=function(R,W){var V=(W)?R.gts.row:R.gts.col;return{size:function U(){return V.length;},getTitle:function T(X){return new mstrmojo.Vis.Title(V[X]);},getCSS:function S(X){return R.css[V[X].cni].n;}};};mstrmojo.Vis.Headers=function(S,T,X){var Y=(X)?S.gts.row:S.gts.col;var W=(X)?S.ghs.rhs:S.ghs.chs;var U=W.items&&W.items[T].items;return{size:function Z(){return(!U?0:U.length);},getHeader:function R(a){return U&&U[a]&&new mstrmojo.Vis.Header(U[a],X?Y[a]:Y[T]);},getCSS:function V(a){return U&&S.css[U[a].cni].n;},getHeaderCell:function(a){return U&&U[a];}};};mstrmojo.Vis.Title=function(S){return{getActionType:function(){return S.at;},getDrillPath:function(){return S.dp;},getHeaderValues:function R(){return S.es;},getHeaderName:function T(V){return S.es[V].n;},getHeaderId:function T(V){return S.es[V].id;},getForms:function U(){return S.fs;},getFormId:function(){return S.fid;},getFormType:function(){return S.ftp;},getUnitId:function(){return S.id;},getLinkMap:function(){return S.lm;},getName:function(){return S.n;},getUnitDssType:function(){return S.otp;},getSelectorControl:function(){return S.sc;}};};mstrmojo.Vis.Header=function(T,R){return{getName:function V(){return(T.idx===-1)?"":R.es[T.idx].n;},getElementId:function Y(){return(T.idx===-1)?"":R.es[T.idx].id;},getObjectId:function U(){return(T.idx===-1)?"":R.es[T.idx].oid;},getElementIndex:function S(){return T.idx;},getActionType:function X(){return T.at;},isTotal:function W(){return T.otr===1;}};};mstrmojo.Vis.MetricValue=function(R,Y){var X=Y;return{getValue:function S(){return X.v;},getThresholdType:function T(){return X.ty;},getRawValue:function W(){return X.rv;},getCSS:function U(){return R.css[X.cni].n;},getThresholdValue:function Z(a){if(X.ti==undefined){return a;}return R.th[X.ti].n;},getFillColor:function V(a){if(X.ci==undefined){return a;}return R.fc[X.ci].n;}};};})();(function(){mstrmojo.requiresCls("mstrmojo.DocXtabGraph","mstrmojo.TouchScroller","mstrmojo.graph._MobileGraphAreaHelper","mstrmojo._TouchGestures");var F=mstrmojo.dom;function C(O,L,R){var N=mstrmojo.dom.position(O.domNode,false),Q=0,P=0,M=O.node;if(N){Q=N.x;P=N.y;}O.model.getDataService().handleUserSingleTap(M.data.sid,M.k,L-Q,R-P,false,{success:function(S){O.displayTooltips(S.Areas,Q,P);}});}function J(P){var O="",L=[],S,R,M,N,Q,T;if(!P){return O;}S=P.currlaykey;O=S+"_";R=P.data&&P.data.layouts;for(Q=0;Q<(R.length||0);Q++){N=R[Q];if(N.k===S){M=N;break;}}if(M){if(M.gbys){L=M.gbys.groupbys;for(Q=0;Q<(L.length||0);Q++){T=L[Q];O=O+T.k+":"+T.lvl;if(T.unit){O=O+":"+T.unit.idx;}O=O+"_";}}}return O;}function K(S){this.displayTooltips([],0,0);var N=this,O=this.model.getDataService(),R=mstrmojo.dom.position(this.domNode,true),L=S.pageX-R.x,Q=S.pageY-R.y,M={getBoundingClientRect:function(){var U=S.pageX,T=S.pageY;return{left:U,top:T,right:U+1,bottom:T+1};}},P={success:function(V){var U=V.Areas,W=N.defn,T=N.k,Y=V.tks,X=false;if(U&&U.length>0){if(U[0].Selectable===1){N.highlightArea(N.selectionNode,U);}else{if(U[0].Selectable===-1){N.highlightedAreas=[];N.clearHighlightArea(N.selectionNode);}}if(Y){N.showInfoWin(Y,M);}X=U[0].Selectable!==undefined;}else{X=V.Selectable!==undefined;N.highlightedAreas=[];N.clearHighlightArea(N.selectionNode);}window.setTimeout(function(){mstrMobileApp.forceRepaint();N.model.slice({type:parseInt(W.t,10)||mstrmojo.EnumRWUnitType.GRAPH,src:T,ck:W.ck,gk:T,sid:N.node.data.sid,x:L,y:Q,tks:Y,anchor:M,tty:V.tty,showLoadingIcon:X});},0);}};O.handleUserSingleTap(N.node.data.sid,N.k,L,Q,true,P);}function A(M){var L=this.imgNode;if(L.src!==M){L.src=M;F.translate(L,0,0,0);}}mstrmojo.MobileDocXtabGraph=mstrmojo.declare(mstrmojo.DocXtabGraph,[mstrmojo._TouchGestures,mstrmojo.graph._MobileGraphAreaHelper],{scriptClass:"mstrmojo.MobileDocXtabGraph",areaMarkup:'<area shape="{@shape}" coords="{@coords}" ttl="{@tooltip}" aid="{@aid}" {@extra}/>',retrieveGraphSrc:function G(N,L){var O=this.id,M=this.model;if(parseInt(N,10)>0&&parseInt(L,10)>0){M.getDataService().getRWGraphImage({w:L,h:N,k:this.k,sid:this.node.data.sid,gbk:J(M)},M.newCallback({success:function(P){A.call(mstrmojo.all[O],P);}}));}},invalidate:function E(){A.call(this,"");},showTooltip:function I(){},touchSelectBegin:function D(L){this.restoreDefaultTouches(false);C(this,L.pageX,L.pageY);},touchSelectMove:function H(L){this.restoreDefaultTouches(false);C(this,L.pageX,L.pageY);},touchTap:function B(L){this.restoreDefaultTouches(false);K.call(this,L);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.tabs.Tab","mstrmojo.dom","mstrmojo.css");var G=mstrmojo.dom,R=mstrmojo.array,e=mstrmojo.css,d="animate",W="31px";function X(){var k=window.Modernizr,j="transition";if(k.testProp(j)){return G.transEndEvtNames[k.prefixed(j)];}return null;}function D(j){return function(){this.menuNode.style.display=j?"block":"none";};}function I(j){return Math.min(j.offsetWidth-j.firstChild.offsetWidth,0);}function S(j){return j.isAlignRight?"right":"left";}function f(j,k){return parseInt(j.style[S(k)],10)||0;}function O(){var k=this.tabContainerNode,l=false,j=false;if(I(k)<0){var p=G.position(k),o=G.position(k.firstChild);l=(o.x<p.x);j=(o.x+o.w>p.x+p.w+0.1);}this.downBtnNode.style.display=l?"block":"none";this.upBtnNode.style.display=j?"block":"none";}function T(j,k){j=(j||[]);if(!j.filter){return R.filter(j,k);}return j.filter(k);}function Q(j,k){j=(j||[]);if(!j.map){return R.map(j,k);}return j.map(k);}function J(AC,l){if(this.isStatic){return ;}var AA=this.tabContainerNode,z=T(this.children,function(AD){return AD.isSelected;})[0],u=z&&z.domNode;if(!AA||!u){return ;}var o=G.position(AA),s=AA.firstChild,AB=I(AA),p=f(s,this),k=Math.max(p,AB);if(AC){if(AB<0){var r=G.position(u),t=r.x-o.x,x=r.x+r.w-(o.x+o.w),w=this.isAlignRight,j=function(AD){k=w?k+AD:k-AD;};if(t<0){j(t);}else{if(x>0){j(x);}}}}if(k!==p){var q=X();if(l&&q){e.addClass(s,d);G.attachOneTimeEvent(s,q,function(){e.removeClass(s,d);});}s.style[S(this)]=Math.max(AB,Math.min(k,0))+"px";}O.call(this);}function K(j){return j.hasOwnProperty("index");}function H(){var j=this.children,k=0;(j||[]).every(function(o,l){if(!K(o)){return false;}k++;o.index=l;return true;});(j||[]).every(function(l){if(!K(l)){return false;}l.total=k;return true;});}function B(p,k){var t=p.ENUM_CORNERS,q=[t.TOP_RIGHT,t.BOTTOM_RIGHT],r=this.parent;if(r.position!=="bottom"){q.reverse();}p.setAlignment(q[0],q[1]);var o=G.position(r.domNode),j=G.position(k),l=r.menuNode;var s=l.style;s.top=(j.y-o.y)+"px";s.left=(j.x-o.x)+"px";p.addPopupHandlers(r.id,D(true),D(false));p.hostId=r.id;p.hostElement=l;p.isHostedWithin=false;r.openPopup(p.newInstance());}function Y(j){j.raiseEvent({name:"TabsChange"});}mstrmojo.vi.ui.tabs.TabStrip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",markupString:'<div id="{@id}" class="mstrmojo-VITabStrip {@cssClass}" style="{@cssText}" ><div class="mstrmojo-VITabStrip-tabs"><div style="display:table"><div style="display:table-row"></div></div></div><div class="mstrmojo-VITabStrip-addBtn" mstrAttach:click><div></div></div><div class="mstrmojo-VITabStrip-downBtn" mstrAttach:click,mousedown><div></div></div><div class="mstrmojo-VITabStrip-upBtn" mstrAttach:click,mousedown><div></div></div><div class="mstrmojo-VITabStrip-menuHost"></div><div class="mstrmojo-VIDND-mask"></div></div>',markupSlots:{tabContainerNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.firstChild.firstChild.firstChild;},addBtnNode:function(){return this.domNode.childNodes[1];},addBtnImgNode:function(){return this.domNode.childNodes[1].firstChild;},downBtnNode:function(){return this.domNode.childNodes[2];},upBtnNode:function(){return this.domNode.childNodes[3];},menuNode:function(){return this.domNode.childNodes[4];},maskNode:function(){return this.domNode.lastChild;}},isStatic:false,isAlignRight:true,tabContainerNode:null,downBtnNode:null,upBtnNode:null,menuNode:null,position:"bottom",layoutConfig:{w:{tabContainerNode:"100%",addBtnNode:W},xt:true},onAppStateChange:function V(k){var j=mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION;if(k.value===j||k.valueWas===j){this.layoutConfig.w.addBtnNode=mstrApp.appState===j?"0px":W;this.doLayout();}},setStatic:function U(j,k){this.isStatic=j;if(!j){J.call(this,true,k);}},setTabs:function C(l,j){this.removeChildren();var o=this,k=l.length;this.addChildren(Q(l,function(r,p){var q=r.k;return o.getTabCfg(l,r,{scriptClass:"mstrmojo.vi.ui.tabs.Tab",index:p,total:k,draggable:!!k,dropZone:!!k,k:q,isSelected:q===j,showTabMenu:B,tabMoved:function(t){var s=this.index;this.parent.moveTab(s,s+(t?-1:1),s);}});}));J.call(this,true);Y(this);},getTabs:function N(){return T(this.children,K);},getTabCfg:function F(k,l,j){return j;},deleteTab:function P(j){var r=this.id,q=this.children[j],p=X(),o=function(){var s=mstrmojo.all[r];s.removeChildren(q);q.destroy();H.call(s);O.call(s);Y(s);};if(p){var l=q.domNode.firstChild,k=l.style;k.width=l.offsetWidth+"px";window.setTimeout(function(){e.addClass(l,d);G.attachOneTimeEvent(l,p,o);k.width=0;},0);}else{o();}},buildRendering:function E(){this._super();e.toggleClass(this.domNode,"alignLeft",!this.isAlignRight);},postBuildRendering:function Z(){var j=this._super();J.call(this,true);return j;},doLayout:function A(){this._super();J.call(this);},setSelectedTab:function b(j){(this.children||[]).forEach(function(k){k.set("isSelected",k.k===j);});Y(this);},getSelectedTab:function M(){var l=null,k=this.children||[],j;for(j=0;j<k.length;j++){if(k[j].isSelected){l=k[j];break;}}return l;},onclick:function h(j){if(j.getTarget()===this.addBtnImgNode){this.addTab();}},addTab:mstrmojo.emptyFn,onmousedown:function g(w){var r=w.getTarget().parentNode,x=(r===this.downBtnNode);if(x||r===this.upBtnNode){var u=this.tabContainerNode,q=u.firstChild,j=I(u),l=f(q,this),p=this.isAlignRight?(x?-10:10):(x?10:-10),k=this.id,s=this,o;if(mstrApp.setInteractive){mstrApp.setInteractive(false);}e.addClass(r,"active");var t=function(){window.clearInterval(o);e.removeClass(r,"active");O.call(mstrmojo.all[k]);if(mstrApp.setInteractive){mstrApp.setInteractive(true);}};G.attachOneTimeEvent(document.body,"mouseup",t);o=window.setInterval(function(){l=Math.min(Math.max(j,l+p),0);q.style[S(s)]=l+"px";if(l===j||l===0){t();}},33);}},moveTab:function L(j,t,r,q){var k=this.children,u=k.splice(j,1)[0];k.splice(t,0,u);H.call(this);var l=this.containerNode,o=l.childNodes,s=l.removeChild(o[j]),p=o[t];if(p){l.insertBefore(s,p);}else{l.appendChild(s);}if(u.isSelected){J.call(this,true,true);}if(!q&&r!==undefined&&r!==t){this.commitTabMove(r,t);Y(this);}},commitTabMove:function a(j,k){throw new Error(this.scriptClass+" must implement commitTabMove.");}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.fx","mstrmojo.locales","mstrmojo.expr","mstrmojo.Button","mstrmojo.date","mstrmojo.ui.editors.controls.Stepper","mstrmojo.css");var AG=function(){return mstrmojo.locales.datetime;},k=mstrmojo.dom,j=mstrmojo.expr,AD=j.DTP,Z=mstrmojo.date,J=mstrmojo.publisher,f=mstrmojo.hash,o=mstrmojo.array,N=o.removeIndices,l=mstrmojo.css;var AF=0,C=3,M=4,r=5,Q=6;var AH="month",d="day",V="year",X="hour",AK="minute",AA="second";var G='<table border="0" cellpadding="0" cellspacing="0">',z="</table>";function O(AL){return'<table border="0" cellpadding="0" cellspacing="0" style="'+AL+'">';}function H(AO,AL,AM){var AN=Z.getFirstDateOfMonth(AO,AL);return(AN.getDay()-AM+8)%7;}function p(AO){var AN=Z.parseDateAndOrTime(AO),AP,AL,AM;if(AN){AM={};AP=AN.date;AL=AN.time;if(AP){f.copy(AP,AM);}if(AL){f.copy(AL,AM);}}return AM;}function F(AM,AP,AO,AN,AL){var AQ=Z.formatDateInfo({day:AM,month:AP,year:AO},AG().DATEOUTPUTFORMAT);return Z.inDateTimeRange(AQ,AN,AL)===0;}function T(AP,AO,AN){var AM=AP.decreaseButton,AL=AP.increaseButton,AQ="mstrmojo-Calendar";AM.className=(AQ+"-decrease");AL.className=(AQ+"-increase");}function W(AP,AM,AR,AO){var AN=0,AL=AP.length,AQ;for(AN=0;AN<AL;AN++){AQ=AP[AN];if(AQ&&AQ.day===AM&&AQ.month===AR&&AQ.year===AO){return AN;}}return -1;}function s(AL,AN,AM){var AO=new Date();return(AO.getFullYear()===AM)&&((AO.getMonth()+1)===AN)&&(AO.getDate()===AL);}function x(AS,AT){var AX=AS.dayView.getElementsByTagName("div"),AV=AS.selectedDates,AN=AV[AT],AW=AS.browseYear,AM=AS.browseMonth,AP=Z.getDaysOfMonth(AW,AM),AO=Z.getPreMonth(AW,AM),AR=Z.getDaysOfMonth(AO.y,AO.m),AL=H(AW,AM,AS.firstDayOfWeek),AQ=((AN.month===AM)?AN.day+AL-1:(AN.month>AM?AN.day+AL+AP-1:AL-AR+AN.day-1)),AU=AX[AQ];if(AU){b(AU,AS,false);}N(AV,AT,1);}function B(AL){var AM=AL.selectedDates;while(AM.length){x(AL,0);}}function AJ(AN,AL){var AM=K(AN,AL),AO=AN.selectedDates;AO.push({day:AM.d,month:AM.m,year:AM.y});b(AL,AN,true);}function q(AN,AO){if(!AO||!AO.length){return null;}var AQ=AN.selectedDates;for(var AM=0,AL=AO.length;AM<AL;AM++){var AP=AO[AM],AR=t(AN,AP);AQ.push({day:AP.d,month:AP.m,year:AP.y});if(AR){b(AR,AN,true);}}}function t(AT,AV){var AX=AT.dayView.getElementsByTagName("div"),AO=AX.length,AW=AT.browseYear,AM=AT.browseMonth,AP=Z.getPreMonth(AW,AM),AQ=Z.getDaysOfMonth(AP.y,AP.m),Ab=Z.getNextMonth(AW,AM),AN=Z.getDaysOfMonth(AW,AM),AL=H(AW,AM,AT.firstDayOfWeek);var AR=AL>0?{y:AP.y,m:AP.m,d:AX[0].innerHTML}:{y:AW,m:AM,d:AX[0].innerHTML},AZ=(AX.length-AN-AL)>0?{y:Ab.y,m:Ab.m,d:AX[AO-1].innerHTML}:{y:AW,m:AM,d:AX[AO-1].innerHTML},Aa=S(AR,AV),AS=S(AV,AZ),AU=null;if(Aa>=0&&AS>=0){var AY=0;if(Aa<AL){AY=-1;}if(AS<(AX.length-AL-AN)){AY=1;}AU=((AY===0)?AV.d+AL-1:(AY===1?AV.d+AL+AN-1:AL-AQ+AV.d-1));return AX[AU];}else{return null;}}function g(AT,AL){var AV=AT.selectedDates,AN=AV.length;if(!AN){return null;}var AM=AV[AN-1],AO=K(AT,AL),AY=S({y:AM.year,m:AM.month,d:AM.day},AO),AZ=[],AQ=AY>0,AW=Math.abs(AY);for(var AS=0;AS<=AW;AS++){var AR=new Date(AO.y,AO.m-1,AO.d);AR.setDate(AR.getDate()+(AQ?-AS:AS));var AX=AR.getFullYear(),AP=AR.getMonth()+1,AU=AR.getDate();if(AT.isDateDisabled(AU,AP,AX,AT.min,AT.max)&&!AT.canSelectDisabledDate){continue;}AZ.push({y:AX,m:AP,d:AU});}return AZ;}function S(AO,AN){var AL=new Date(AO.y,AO.m-1,AO.d),AM=new Date(AN.y,AN.m-1,AN.d);return(AM-AL)/1000/3600/24;}function K(AN,AL){var AO=AN.browseYear,AQ=AN.browseMonth,AP=parseInt(AL.innerHTML,10),AR=parseInt(AL.getAttribute("m"),10),AM=null;AM=(AR===0)?{y:AO,m:AQ}:(AR===1?Z.getNextMonth(AO,AQ):Z.getPreMonth(AO,AQ));AM.d=AP;return AM;}function h(AL){var AN=AL.selectedDates,AM=AN.length;return(AM===0)?null:AN[AM-1];}function b(AM,AN,AL){var AO=AN.selectedColor;l.toggleClass(AM,["selected",AN.selectedCssStyle],AL);AM.parentNode.style.backgroundColor=AL?AO:"";AM.style.backgroundColor=AL?AO:"";}function AC(AL){return AL.selectedColor?('style="background-color:'+AL.selectedColor+';"'):"";}function P(AL){return(AL.tagName.toLowerCase()==="td")?AL.firstChild:AL;}function R(AM,AN){var AO=Z.getDateJson(AM),AL=Z.formatDateInfo(AO,mstrmojo.locales.datetime.DATEOUTPUTFORMAT);if(AN===AD.TIMESTAMP){AL+=" "+Z.formatTimeInfo(this.timeVal,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return AL;}function u(AQ,AN){var AL=this.advancedValues,AM=null;AL.set(AQ,AN);switch(AL.baseDate){case C:AM=new Date();break;case M:break;case r:break;case Q:break;default:return ;}var AO=AL.monthsToAdjust;if(AO>0){AM.setMonth(AM.getMonth()+(AL.toAddMonths?AO:-AO));}var AP=AL.daysToAdjust;if(AP>0){AM.setDate(AM.getDate()+(AL.toAddDays?AP:-AP));}this.set("value",R.call(this,AM,this.dtp));}function U(){var AL=this.advancedValues,AM=["isDyn"];if(AL.baseDate===AF){return null;}AM.push(AL.baseDate);AM.push(AL.toAddDays?AL.daysToAdjust:-AL.daysToAdjust);AM.push(AL.toAddMonths?AL.monthsToAdjust:-AL.monthsToAdjust);AM.push(0);AM.push(0);AM.push(0);AM.push(0);AM.push(this.value);AM.push(this.timeVal.hour);AM.push(this.timeVal.min);AM.push(this.timeVal.sec);return AM.join("::");}function AI(AL){if(AL.value!==undefined&&this.hasRendered){this.updateSelectedDate();}}function I(AN,AM){var AO=this,AL=function(AP){return AP[0].toUpperCase()+AP.substring(1);};return{scriptClass:"mstrmojo.HBox",cssClass:"dateAdjustBox",alias:AN+"AdjustBox",children:[{scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:AM>=0?0:1,onitemSelected:function(AQ,AP){u.call(AO,"toAdd"+AL(AN),AP===0);},items:[{did:0,n:mstrmojo.desc(9424,"plus")},{did:1,n:mstrmojo.desc(9425,"minus")}]},{scriptClass:"mstrmojo.ui.editors.controls.Stepper",width:null,height:null,provider:new mstrmojo.NumStepperContentProvider({item:{interval:1,min:0,value:Math.abs(AM)},onTraverse:function(){u.call(AO,AN+"ToAdjust",this.curVal);}})},{scriptClass:"mstrmojo.Label",text:AN==="days"?mstrmojo.desc(707,"Days"):mstrmojo.desc(710,"Months")}]};}function Y(){this.buttonsNode.style.display=(this.wasAdvanced||this.changeValueOnOK||(this.showAdvanced&&this.isAdvanced)?"block":"none");this.advancedNode.style.display=this.showAdvanced?"block":"none";}mstrmojo.Calendar=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Calendar",cssPrefix:"",browseMonth:null,browseYear:null,yearRangStart:null,selectedDates:null,selectedColor:"",isMultiSelect:false,hilightToday:false,yearViewSize:5,cssTextDay:"",cssTextMonth:"",cssTextYear:"",cssTextWeekDay:"",cssTextHeader:"",cssTextMonthYearLabel:"",forceNonEmptySelection:false,showCurMonthDatesOnly:false,currentView:d,duration:600,timeDelimiter:":",dtp:AD.DATE,value:"",firstDayOfWeek:1,changeValueOnOK:false,wasAdvanced:false,showAdvanced:false,isAdvanced:false,dynDateValue:null,canSelectDisabledDate:false,monthNames:function(AL){return AG().MONTHNAME_SHORT[AL];},dayNames:function(AL){return AG().dayShortNames[AL];},min:null,max:null,supportedViews:{day:true,month:true,year:true,hour:true,minute:true,second:true},sDirMatrix:{day:{month:"down",year:"down",hour:"up",minute:"up",second:"up"},month:{day:"up",year:"left",hour:"up",minute:"up",second:"up"},year:{day:"up",month:"right",hour:"up",minute:"up",second:"up"},hour:{day:"down",month:"down",year:"down",minute:"left",second:"left"},minute:{day:"down",month:"down",year:"down",hour:"right",second:"left"},second:{day:"down",month:"down",year:"down",hour:"right",minute:"right"}},markupString:'<div id="{@id}" class="{@cssPrefix} mstrmojo-Calendar {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup,mouseover,mouseout><div class="mstrmojo-Calendar-header" style="{@cssTextHeader}"><div class="mstrmojo-Calendar-decrease"></div><div class="mstrmojo-Calendar-increase"></div><div class="mstrmojo-Calendar-title"><span class="mstrmojo-Calendar-monthLabel" style="{@cssTextMonthYearLabel}">{@browseMonth}</span><span class="mstrmojo-Calendar-yearLabel" style="{@cssTextMonthYearLabel}">{@browseYear}</span></div></div><div class="mstrmojo-Calendar-body" style="{@cssTextBody}"><div class="mstrmojo-Calendar-dayView"></div></div><div class="mstrmojo-Calendar-timePart"><span class="mstrmojo-Calendar-hourLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-minuteLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-secondLabel">00</span><span class="mstrmojo-Calendar-AMPMLabel">AM</span></div><div class="mstrmojo-Calendar-advanced"></div><div class="mstrmojo-Calendar-buttons cf"></div></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onbrowseMonthChange:function(){this.monthLabel.innerHTML=this.monthNames(this.browseMonth-1);},onbrowseYearChange:function(){this.yearLabel.innerHTML=this.browseYear;},ondtpChange:function(){this.timePart.style.display=(this.dtp===AD.TIMESTAMP||this.dtp===AD.TIME)?"block":"none";this.advancedNode.style.display=this.showAdvanced?"block":"none";},onvalueChange:function(){if(this.lastValue===undefined||this.value!==this.lastValue){this.updateSelectedDate();}},onchangeValueOnOKChange:Y,onisAdvancedChange:Y},markupSlots:{monthLabel:function(){return this.domNode.firstChild.lastChild.firstChild;},yearLabel:function(){return this.domNode.firstChild.lastChild.lastChild;},decreaseButton:function(){return this.domNode.firstChild.firstChild;},increaseButton:function(){return this.domNode.firstChild.childNodes[1];},bodyContainer:function(){return this.domNode.childNodes[1];},dayView:function(){return this.domNode.childNodes[1].firstChild;},monthView:function(){return this.domNode.childNodes[1].firstChild;},yearView:function(){return this.domNode.childNodes[1].firstChild;},hourView:function(){return this.domNode.childNodes[1].firstChild;},minuteView:function(){return this.domNode.childNodes[1].firstChild;},secondView:function(){return this.domNode.childNodes[1].firstChild;},timePart:function(){return this.domNode.childNodes[2];},hourLabel:function(){return this.domNode.childNodes[2].firstChild;},minuteLabel:function(){return this.domNode.childNodes[2].childNodes[2];},secondLabel:function(){return this.domNode.childNodes[2].childNodes[4];},AMPMLabel:function(){return this.domNode.childNodes[2].childNodes[5];},advancedNode:function(){return this.domNode.childNodes[3];},buttonsNode:function(){return this.domNode.childNodes[4];}},init:function AE(AL){if(this._super){this._super(AL);}if(this.duration<1){this.duration=1;}if(!this.selectedDates){this.selectedDates=[];}this.timeVal={hour:0,min:0,sec:0};},ondynDateValueChange:function w(AL){if(AL.value!==undefined&&this.hasRendered){this.updateSelectedDate();this.buildChildren();}},onminChange:AI,onmaxChange:AI,buildChildren:function a(){var AR=this;if(this.showAdvanced){var AO=this.dynDateValue,AN=this.advancedValues||this.addDisposable(new mstrmojo.Model({})),AU=AO&&AO.split("::")||[],AQ=AU[1]||AF,AM=AU[2]||0,AV=AU[3]||0,AS=function AS(){if(AR.isAdvanced){AR.wasAdvanced=true;AR.changeValueOnOK=true;}AR.set("isAdvanced",!AR.isAdvanced);mstrmojo.css.toggleClass(AR.markupSlots.dayView.call(AR),["ddSelected"],AR.isAdvanced);u.call(AR,"baseDate",AR.isAdvanced?3:0);if(AR.parent&&AR.parent.nudge&&AR.isAdvanced){AR.parent.nudge();}};this.advancedValues=AN;AN.baseDate=parseInt(AQ);AN.toAddDays=AM>=0;AN.daysToAdjust=Math.abs(AM);AN.toAddMonths=AV>=0;AN.monthsToAdjust=Math.abs(AV);this.isAdvanced=!!this.dynDateValue;if(this.domNode){mstrmojo.css.toggleClass(this.markupSlots.dayView.call(this),["ddSelected"],this.isAdvanced);}if(this.isAdvanced&&this.value){var AL=p(this.value),AP=this.timeVal;if(AL&&AL.hour!==undefined){AP.hour=AL.hour;AP.min=AL.min;AP.sec=AL.sec;}}u.call(AR,"baseDate",this.isAdvanced?3:0);this.destroyChildren(false);this.addChildren([{scriptClass:"mstrmojo.HBox",alias:"checkLabel",slot:"advancedNode",children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"checkbox",checked:!!AR.isAdvanced,oncheckedChange:AS},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13844,"Dynamic Date"),onclick:function AT(){this.parent.checkbox.onclick();}}]},{scriptClass:"mstrmojo.Box",alias:"advancedPanel",slot:"advancedNode",bindings:{visible:"this.parent.isAdvanced"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9423,"Today"),cssClass:"tdLabel"},I.call(this,"days",AM),I.call(this,"months",AV)]},]);}else{this.destroyChildren(false);}this.addChildren([mstrmojo.Button.newWebButton(mstrmojo.desc(2140,"Cancel"),function(){AR.parent.close();},false,{slot:"buttonsNode"}),mstrmojo.Button.newWebButton(mstrmojo.desc(1442,"OK"),function(){if(AR.changeValueOnOK||AR.isAdvanced||AR.wasAdvanced){AR.updateValue(true);}},true,{slot:"buttonsNode"})]);},preBuildRendering:function A(){this.buildChildren();return this._super();},getSelectedDatesAsString:function E(AM){var AL=[];o.forEach(this.selectedDates,function(AN){AL.push(Z.formatDateInfo(AN,AM||AG().DATEOUTPUTFORMAT));});return AL;},updateSelectedDate:function L(AP){var AL=this.value,AM=this.timeVal,AO=this.selectedDates,AN,AQ=function(AS,AR){AS.set("browseYear",AR.year);AS.set("browseMonth",AR.month);AS.updateTimePart();AS.updateView(AS.currentView);if(!AS.changeValueOnOK&&AS.hasRendered&&AS.closeOnValueChange!=true){AS.updateValue();}};if(this.wasAdvanced){this.wasAdvanced=false;this.changeValueOnOK=false;}if(AL){AN=p(AL);if(AN&&AN.hour!==undefined){AM.hour=AN.hour;AM.min=AN.min;AM.sec=AN.sec;}}if((AN&&!this.isMultiSelect)||AP){B(this);}if(AO.length===0){if(!AN){if(this.parent.opener&&this.parent.opener.defaultDate){AN=p(this.parent.opener.defaultDate);}else{AN=Z.getDateJson(new Date());}}if(!this.canSelectDisabledDate&&this.isDateDisabled(AN.day,AN.month,AN.year,this.min,this.max)){if(this.min&&Z.compareDate(AN,this.min)<0){AN=p(this.min);}else{if(this.max&&Z.compareDate(AN,this.max)>0){AN=p(this.max);}}}AO.push(AN);AQ(this,AN);}else{AN=AO[0];if(!this.value){AQ(this,AN);}}},updateValue:function e(AL){var AN=h(this),AM="";if(AN){AM=Z.formatDateInfo(AN,AG().DATEOUTPUTFORMAT);if(this.dtp!==AD.DATE){AM+=" "+Z.formatTimeInfo(this.timeVal,AG().TIMEOUTPUTFORMAT);}}this.lastValue=AM;this.set("value",AM);if(this.showAdvanced){this.set("dynDateValue",AL?U.call(this):null);}if(this.onValueUpdate){this.onValueUpdate();}},updateTimePart:function AB(){var AM=this.timeVal,AL=AM.hour||0,AN=(AL%12===0)?12:(AL%12);this.hourLabel.innerHTML=AN;this.minuteLabel.innerHTML=Z.formatInteger(AM.min||0,2);this.secondLabel.innerHTML=Z.formatInteger(AM.sec||0,2);this.AMPMLabel.innerHTML=AL<12?" "+AG().AM_NAME:" "+AG().PM_NAME;},premousedown:function(AL){var AN=AL.e,AM=k.eventTarget(AL.hWin,AN);if(AM===this.decreaseButton||AM===this.increaseButton){if(k.isFF){k.stopPropogation(window,AN);}return true;}else{return this.processEvent(AM,AN);}},premouseup:function(AL){var AN=AL.e;if(AN.ctrlKey||AN.shiftKey){k.clearBrowserHighlights();}var AM=k.eventTarget(AL.hWin,AN);if(AM===this.decreaseButton&&!AM.disabled){this.decrease();return true;}if(AM===this.increaseButton&&!AM.disabled){this.increase();return true;}},processEvent:function(AW,Ad){var AO=this.currentView,AP=this.selectedDates,AT,AY,Ae,AL,AV;if(AW===this.monthLabel){if(AO!==AH){this.switchViewTo(AH);}return true;}if(AW===this.yearLabel){if(AO!==V){this.adjustYearStart();this.switchViewTo(V);return true;}}if(AW===this.hourLabel){if(AO!==X){this.switchViewTo(X);}return true;}if(AW===this.minuteLabel){if(AO!==AK){this.switchViewTo(AK);}return true;}if(AW===this.secondLabel){if(AO!==AA){this.switchViewTo(AA);}return true;}if(AW===this.AMPMLabel){if(AO!==X){this.switchViewTo(X);}return true;}if(AO===X){var AR=AW.getAttribute("h");AV=parseInt(AW.innerHTML,10);if(!isNaN(AR)&&!isNaN(AV)){AR=parseInt(AR,10);this.timeVal.hour=AV%12+AR*12;this.updateTimePart();this.switchViewTo(d);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AO===AK){AV=parseInt(AW.innerHTML,10);if(!isNaN(AV)){this.timeVal.min=AV;this.updateTimePart();this.switchViewTo(d);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AO===AA){AV=parseInt(AW.innerHTML,10);if(!isNaN(AV)){this.timeVal.sec=AV;this.updateTimePart();this.switchViewTo(d);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AO===d){var Ac=this.browseYear,AM=this.browseMonth,AN;AW=P(AW);Ae=parseInt(AW.innerHTML,10);AL=parseInt(AW.getAttribute("m"),10);if(!isNaN(Ae)&&!isNaN(AL)){AN=(AL===0)?{y:Ac,m:AM}:(AL===1?Z.getNextMonth(Ac,AM):Z.getPreMonth(Ac,AM));if((!this.canSelectDisabledDate&&this.isDateDisabled(Ae,AN.m,AN.y,this.min,this.max))||Ad.button===2){return true;}if(this.isAdvanced){return true;}var AZ=W(AP,Ae,AM,Ac),AX=AP.length>1,AU=this.forceNonEmptySelection,Aa=this.isMultiSelect,AS=Aa&&Ad.ctrlKey,Ab=Aa&&Ad.shiftKey,AQ=null;if(Ab){AQ=g(this,AW);B(this);q(this,AQ);}else{if(AS){if(AZ===-1){AJ(this,AW);}else{if(!AU||AX){x(this,AZ);}}}else{B(this);if(AX||AZ===-1||AU){AJ(this,AW);}}}if(this.onselect||J.hasSubs(this.id,"select")){this.raiseEvent({name:"select",value:this.selectedDates});}if(AL===1){this.increase();}else{if(AL===-1){this.decrease();}}if(!this.changeValueOnOK){this.updateValue();}else{if(this.showAdvanced){this.checkLabel.checkbox.set("checked",false);u.call(this,"baseDate",0);}}}return true;}if(AO===AH){AW=P(AW);AY=parseInt(AW.getAttribute("m"),10);if(!isNaN(AY)){this.set("browseMonth",AY+1);this.switchViewTo(d);}return true;}if(AO===V){AW=P(AW);AT=parseInt(AW.innerHTML,10);if(!isNaN(AT)){this.set("browseYear",AT);this.switchViewTo(d);}return true;}return true;},decrease:function(){var AN=this.currentView,AQ=AN,AP=this.browseYear,AL=this.browseMonth,AM=this.yearRangStart,AO;switch(AN){case d:AO=Z.getPreMonth(AP,AL);this.set("browseMonth",AO.m);this.set("browseYear",AO.y);break;case AH:this.set("browseYear",AP-1);break;case V:this.yearRangStart=AM-this.yearViewSize*this.yearViewSize;break;case X:AQ=AA;break;case AK:AQ=X;break;case AA:AQ=AK;break;}this.switchViewTo(AQ,"right");},increase:function(){var AN=this.currentView,AQ=AN,AP=this.browseYear,AL=this.browseMonth,AM=this.yearRangStart,AO;switch(AN){case d:AO=Z.getNextMonth(AP,AL);this.set("browseMonth",AO.m);this.set("browseYear",AO.y);break;case AH:this.set("browseYear",AP+1);break;case V:this.yearRangStart=AM+this.yearViewSize*this.yearViewSize;break;case X:AQ=AK;break;case AK:AQ=AA;break;case AA:AQ=X;break;}this.switchViewTo(AQ,"left");},updateView:function(AL){var AM=this[AL+"ViewHTML"]();this[AL+"View"].innerHTML=AM;},adjustYearStart:function(){this.yearRangStart=this.browseYear-10-this.browseYear%5;},switchViewTo:function(AM,AO){var AS="mstrmojo-Calendar-"+AM+"View",AR=document.createElement("div"),AL=this[this.currentView+"View"],AP=AM+"ViewHTML",AQ=this[this.currentView+"Label"],AN=this[AM+"Label"];if(!this.supportedViews[AM]){return ;}if(!AO){AO=this.sDirMatrix[this.currentView][AM];}AR.className=AS;AR.innerHTML=this[AP]();this.currentView=AM;this[AM+"View"]=AR;mstrmojo.css.toggleClass(AR,["ddSelected"],this.isAdvanced);this._slideIntoView(AL,AR,AO);},_slideIntoView:function(AP,AT,AN){var AL=this.bodyContainer,AR=(AN==="left"||AN==="right")?AP.offsetWidth:AP.offsetHeight,AM=(AN==="left"||AN==="right")?"left":"top",AS=(AN==="left"||AN==="up")?AR:-AR,AQ=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AP,onEnd:function(){AL.removeChild(AP);}}),AO=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AT});AT.style[AM]=AS+"px";AL.appendChild(AT);AQ.props[AM]={start:0,stop:-AS,suffix:"px"};AO.props[AM]={start:AS,stop:0,suffix:"px"};AQ.play();AO.play();},dayViewHTML:function(){var AQ=this.browseYear,AT=this.browseMonth,AY=Z.getDaysOfMonth(AQ,AT),Ac=Z.getPreMonth(AQ,AT),AN=Z.getDaysOfMonth(Ac.y,Ac.m),AM=Z.getNextMonth(AQ,AT),AU=H(AQ,AT,this.firstDayOfWeek),AR=[],AO=AC(this),Ae=0,AL=this.selectedDates,AW=this.min,Aa=this.max,Af,AX,Ab,AZ,Ad=this.showCurMonthDatesOnly?'style="visibility:hidden;"':"";T(this,{d:AN,m:Ac.m,y:Ac.y},{d:1,m:AM.m,y:AM.y});AR.push(O(this.cssTextDay));AR.push(this._dayViewTHead());AR.push("<tr>");for(Ab=0;Ab<AU;Ab++){Af=AN-AU+Ab+1;AX=this.isDateDisabled(Af,Ac.m,Ac.y,AW,Aa)?"disabled":"";AR.push("<td "+Ad+'><div class="mstrmojo-Calendar-day-pre '+AX+'" m="-1">');AR.push(Af);AR.push("</div></td>");Ae++;}for(Ab=0;Ab<AY;Ab++){Af=Ab+1;AX=this.isDateDisabled(Af,AT,AQ,AW,Aa)?" disabled":"";var AP=s(Af,AT,AQ),AS=AP?" today":"",AV=W(AL,Af,AT,AQ)!==-1;AS=(this.hilightToday&&AP)?" hilightToday":AS;AR.push("<td "+(AP?('class="'+AS+'" '):" ")+(AV?AO:"")+'><div class="mstrmojo-Calendar-day-cur'+(AV?(" selected "):"")+AX+'" m="0"'+(AV?AO:"")+">");AR.push(Ab+1);AR.push("</div></td>");if((++Ae)%7===0){AR.push("</tr><tr>");}}for(AZ=Ae;AZ<42;AZ++){Af=Ae-AY-AU+1;AX=this.isDateDisabled(Af,AM.m,AM.y,AW,Aa)?"disabled":"";AR.push("<td "+Ad+'><div class="mstrmojo-Calendar-day-next '+AX+'" m="1">');AR.push(Af);AR.push("</div></td>");if((++Ae)%7===0&&Ae!==42){AR.push("</tr><tr>");}}AR.push("</tr>");AR.push(z);return AR.join("");},_dayViewTHead:function(){var AO=[],AP='<thead><tr class="mstrmojo-Calendar-thead" style="'+this.cssTextWeekDay+';">',AN="</tr></thead>",AM=this.firstDayOfWeek-1,AQ=this.dayNames,AL;AO.push(AP);for(AL=AM;AL<AM+7;AL++){AO.push("<td>");AO.push(AQ(AL%7));AO.push("</td>");}AO.push(AN);return AO.join("");},monthViewHTML:function(){var AM=[],AO=this.browseMonth-1,AN=this.browseYear,AL;T(this,{d:31,m:12,y:AN-1},{d:1,m:1,y:AN+1});AM.push(O(this.cssTextMonth));AM.push("<tr>");for(AL=0;AL<12;AL++){AM.push("<td "+((AL===AO)?AC(this):"")+'><div class="mstrmojo-Calendar-month'+((AL===AO)?" selected":"")+'" m="');AM.push(String(AL));AM.push('">');AM.push(this.monthNames(AL));AM.push("</div></td>");if(AL%3===2){AM.push("</tr><tr>");}}AM.pop();AM.push("</tr>");AM.push(z);return AM.join("");},yearViewHTML:function(){var AQ=this.yearRangStart,AM=[],AO=this.browseYear,AP,AL,AN=this.yearViewSize;T(this,{d:31,m:12,y:AQ-1},{d:1,m:1,y:AQ+AN*AN});AM.push(O(this.cssTextYear));AM.push("<tr>");for(AL=0;AL<AN*AN;AL++){AP=AQ+AL;AM.push("<td "+((AO===AP)?AC(this):"")+'><div class="mstrmojo-Calendar-year'+((AO===AP)?" selected":"")+'">');AM.push(AP);AM.push("</div></td>");if(AL%AN===(AN-1)){AM.push("</tr><tr>");}}AM.pop();AM.push("</tr>");AM.push(z);return AM.join("");},hourViewHTML:function(){var AN=[],AM=this.timeVal.hour,AL;AN.push(G);AN.push('<tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AN.push(AG().AM_NAME);AN.push("</div></td></tr>");for(AL=0;AL<12;AL++){AN.push('<td><div class="mstrmojo-Calendar-hour'+((AL===AM)?" selected":"")+'" h="0">');AN.push((AL===0)?12:AL);AN.push("</div></td>");if(AL===5){AN.push("</tr><tr>");}}AN.push('</tr><tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AN.push(AG().PM_NAME);AN.push("</div></td></tr>");for(AL=0;AL<12;AL++){AN.push('<td><div class="mstrmojo-Calendar-hour'+(((12+AL)===AM)?" selected":"")+'" h="1">');AN.push((AL===0)?12:AL);AN.push("</div></td>");if(AL===5){AN.push("</tr><tr>");}}AN.push("</tr>");AN.push(z);return AN.join("");},minuteViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.min,"mstrmojo-Calendar-minute");},secondViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.sec,"mstrmojo-Calendar-second");},_minuteSecondViewHTML:function(AN,AO){var AM=[],AL;AM.push(G);AM.push("<tr>");for(AL=0;AL<60;AL++){AM.push('<td><div class="');AM.push(AO);AM.push((AL===AN)?' selected">':'">');AM.push(AL);AM.push("</div></td>");if(AL%10===9){AM.push("</tr><tr>");}}AM.pop();AM.push("</tr>");AM.push(z);return AM.join("");},isDateDisabled:function(AL,AN,AM){return !F(AL,AN,AM,this.min,this.max);},unrender:function D(AL){delete this.lastValue;this._super(AL);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.date","mstrmojo.Container","mstrmojo.VBox","mstrmojo.Button","mstrmojo.locales","mstrmojo._FormatDefinition","mstrmojo.mstr.EnumFunction","mstrmojo.ui.editors.controls.ComboBox");var K=mstrmojo.hash,Z=mstrmojo.array,F=mstrmojo.num,H=mstrmojo._FormatDefinition,A=mstrmojo.css,X=mstrmojo.mstr.EnumFunction,J=mstrmojo.locales,G=mstrmojo.Button.newIconButton,M=mstrmojo.date,D=H.NumberFormatCategory,p=H.FixedNegative,E=H.CurrencyNegative,d=H.PercentNegative,I=H.DefaultFormat.FormattingNumber,W,R,b=function b(s,r){return{cls:this.value===s.v?"selected":"",v:s.v||"",n:s.n||"",style:s.r?"color:red;":"color:#fff;",sel:parseInt(this.idx,10)===r?"selected":""};},o={RIGHT:1,LEFT_WITH_SPACE:2,RIGHT_WITH_SPACE:3};var Q=[{n:mstrmojo.desc(4531,"Automatic"),v:-3}].concat(H.Category.slice(2)),a=[{n:"$"},{n:"£"},{n:"€"},{n:"¥"},{n:"fr."}];function C(t,s){var r=Z.find(t,"v",s);return r===-1?"":t[r].f;}function L(r){var t=this.parent.parent.parent.myData,s=r.v;t.set("format",C(this.items,s));t.set("negativeNumbers",s);A.toggleClass(this.selectedNode,"red",r.r);}function V(t,u,r){return{scriptClass:"mstrmojo.ui.Pulldown",items:t,onitemSelected:function s(w){var x=this.parent;while(x&&(!x.data||typeof x.data[u]==="undefined")){x=x.parent;}if(x){x.data.set(u,w.v);if(r){x.children[0].preview.preview_label.set("text",w.n);}}}};}function g(AC,w,u,AE,AB){var AD=K.clone(AC),r=w>0?".":"",s=r,t=H.DefaultFormat.FormattingNumber,z;for(z=0;z<w;z++){r+=z%9;s+="0";}for(z=0;z<AD.length;z++){var AA=AD[z];if(u){AA.n=AA.n.replace(/,/g,"");AA.f=AA.f.replace(/,/g,"");}if(AE&&AE!==t.CurrencyPosition){switch(AE){case o.RIGHT:AA.n=AA.n.replace(/\$/g,"").replace(/\.\d{2}/g,".12$");AA.f=AA.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00"$"');break;case o.LEFT_WITH_SPACE:AA.n=AA.n.replace(/\$/g,"$ ");AA.f=AA.f.replace(/\$/g,"$ ");break;case o.RIGHT_WITH_SPACE:AA.n=AA.n.replace(/\$/g,"").replace(/\.\d{2}/g,".12 $");AA.f=AA.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00" $"');break;default:}}AA.n=AA.n.replace(/\.\d{2}/g,r);AA.f=AA.f.replace(/\.\d{2}/g,s);if(AB&&AB!==t.CurrencySymbol){var x=AB.replace(/\$/g,"$$$$");AA.n=AA.n.replace(/\$/g,x);AA.f=AA.f.replace(/\$/g,x);}AA.cls=AA.r?"red":null;}return AD;}function T(t){var r="1"+(t>0?".":"").toString(),u="0"+(t>0?".":"").toString(),s;for(s=0;s<t;s++){r+=s%10;u+="0";}return[r+"E+03",u+"E+0#"];}function P(AG,AI){var AA="\u00A4",AE=/"[^"]*"/g,t=AG.match(AE),AJ="\u0091",AF=/\[[^\]]*\]/g,r=AG.match(AF),AD,AH;AD=AG.replace(AE,AA);AD=AD.replace(AF,AJ);var w=AG.indexOf("."),AC=F.getDecimalLength(AG),z=Math.max(0,AC+AI),u=AG.match(/\d(?!((\d)|(,\d)))/g),s=w!==-1?AG.charAt(w-1):u&&u[0],AB=(s||"0")+(z>0?".":"").toString();for(var x=0;x<z;x++){AB+="0";}AD=AD.replace(AC===0?/\d(?!((\d)|(,\d)))/g:/\d\.\d+/g,AB);AD=AD.split(AA);AH=AD[0];Z.forEach(t,function(AL,AK){AH+=AL+AD[AK+1];});AD=AH.split(AJ);AH=AD[0];Z.forEach(r,function(AL,AK){AH+=AL+AD[AK+1];});return AH;}function N(AA,r,z,x,t,s){var w=AA.parent.parent.parent,u=g(r,z.decimalPlaces,x,t,s);z.set("format",C(u,z.negativeNumbers.toString()));AA.set("items",u);AA.set("selectedIndex",Z.find(u,"v",z.negativeNumbers.toString()));w.preview.preview_label.set("text",S(w.myData.format));}function j(){var AB=this.parent.parent,AF=AB.myData,u=AB.formatterContainer,s=Q[AB.categoryPicker.selectedIndex].v,AI=this.funcType===X.FunctionLeftStr?1:-1,x=null,AA=null,w=false,AH=0,AC=null,t=false,AE;switch(s){case D.Fixed:x=u.fixed_hBox.negativeDDL;AA=p;w=!AF.thousandSeparator;break;case D.Currency:x=u.currency_hBox2.negativeDDL;AA=E;AH=AF.currencyPosition;AC=AF.currencySymbol;break;case D.Percentage:x=u.percentage_hBox.negativeDDL;AA=d;break;case D.Scientific:t=true;break;case D.Custom:AE=true;break;default:return ;}if(AE){var AG=P(AF.format,AI);AB.preview.preview_label.set("text",S(AG));AB.formatterContainer.custom_text.set("value",AG);return ;}var z=AF.decimalPlaces,r=z+AI;r=Math.max(0,r);r=Math.min(H.MaxNegativeDidigts,r);AF.set("decimalPlaces",r);if(t){var AD=T(r);AF.set("format",AD[1]);AB.preview.preview_label.set("text",AD[0]);}else{N(x,AA,AF,w,AH,AC);}}function S(AD){var t="\u00A4",z=/"[^"]*"/g,s=AD.match(z),x=AD.replace(z,t),AC=["m","y","d","h","s"],AB=false,r=new Date(),AA=r.getFullYear(),w=r.getMonth(),u=r.getDay(),AF=J.datetime,AE;Z.forEach(AC,function(AG){AB=AB||x.indexOf(AG,0)!==-1;});if(AB){x=x.replace(/y{3,}/g,AA).replace(/y{1,2}/g,AA.toString().slice(2,4));x=x.replace(/m{4,}/g,AF.MONTHNAME_FULL[w-1]).replace(/m{3}/g,AF.MONTHNAME_SHORT[w-1]).replace(/mm/g,"07").replace(/m/g,"7").replace(/7ber/g,"mber");x=x.replace(/d{4,}/g,AF.dayNames[u-1]).replace(/d{3}/g,"Mon").replace(/dd/g,"10").replace(/d/g,"1").replace(/1ay/g,"day");x=x.replace(/hh/g,"08").replace(/h/g,"8");x=x.replace(/ss/g,"04").replace(/s/g,"4");x=x.split(t);AE=x[0];Z.forEach(s,function(AH,AG){AE+=AH+x[AG+1];});return AE;}return F.formatByMask(AD,1234.12);}function q(r,s){return Math.max(Z.find(r,"v",s),0);}function B(t){var s=this.parent.parent.categoryPicker,r=Q.map(function(u){return u.v;}).indexOf(t);s.set("selectedIndex",r);}function l(r,s,u,t){return G(undefined,r,s,undefined,K.copy(t,{useRichTooltip:true,updateTooltipConfig:function(){this.richTooltip={cssClass:"vi-regular vi-tooltip-A A-center",content:u,refNode:this.domNode,posType:mstrmojo.tooltip.POS_TOPCENTER,left:15,top:33};}}));}function Y(){if(mstrApp.isSingleTier){var x=this.formatterContainer,w=J.datetime,r={day:7,month:4,year:1998},t={hour:15,min:41,sec:46},u=w&&w.DATEINPUTFORMATS,s=w&&w.TIMEINPUTFORMATS;W=[];R=[];u.forEach(function(z){W.push({v:z,n:M.formatDateInfo(r,z)});});s.forEach(function(z){R.push({v:z,n:M.formatTimeInfo(t,z)});});x.date_ddl.set("items",W);x.time_ddl.set("items",R);}else{W=H.Date;R=H.Time;}}mstrmojo.vi.ui.NumberFormatter=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.vi.ui.NumberFormatter",cssClass:"NumberFormatter-content",formatValue:null,myData:null,oldData:null,categoryPicker:null,formatterContainer:null,preview:null,shortcutRow:null,adjustAfterCategoryChange:mstrmojo.emptyFn,preBuildRendering:function(){if(this._super){this._super();}Y.call(this);var r=this.formatterContainer;if(this.formatValue){r.currency_hBox1.currency_symbol.selectedValue=this.formatValue.currencySymbol;r.fixed_btn.checked=!!this.formatValue.thousandSeparator;A.addWidgetCssClass(r.fraction_ddl,d[Z.find(d,"v",this.formatValue.negativeNumbers)].r?" red":"");}},postBuildRendering:function O(){if(this._super){this._super();}if(this.formatValue){this.categoryPicker.set("selectedIndex",q(this.categoryPicker.items,this.formatValue.category.toString()));}},children:[K.copy({alias:"categoryPicker",cssClass:"nf-category",onitemSelected:function k(AF){if(!this.hasRendered){return ;}var AA=this,AD=AA.parent,t=AD.formatterContainer,r=AD.shortcutRow,AE=AD.preview.preview_label,AC=AF.v,w=AC===D.Automatic,s=[],z=AD.myData;Z.forEach(t.children,function(AG){AG.set("visible",false);});AD.border.set("visible",!w);AD.preview.set("visible",!w);["border","moveLeftBtn","moveRightBtn"].forEach(function(AG){r[AG].set("visible",!w);});z.set("category",AC);z.set("thousandSeparator",AC?I.ThousandSeparator:AD.formatValue.thousandSeparator);switch(AC){case D.Currency:N(t.currency_hBox2.negativeDDL,E,z,false,z.currencyPosition,z.currencySymbol);t.currency_hBox1.currency_position.set("selectedIndex",q(H.CurrencyPosition,z.currencyPosition.toString()));s=["currency_hBox1","currency_hBox2"];break;case D.Date:t.date_ddl.set("selectedIndex",q(W,z.format));s=["date_ddl"];break;case D.Time:t.time_ddl.set("selectedIndex",q(R,z.format));s=["time_ddl"];break;case D.Percentage:N(t.percentage_hBox.negativeDDL,d,z,false,0,null);s=["percentage_hBox"];break;case D.Fraction:t.fraction_ddl.set("selectedIndex",q(H.Fraction,z.format));s=["fraction_ddl"];break;case D.Scientific:var x=T(z.decimalPlaces||0);z.set("format",x[1]);AE.set("text",x[0]);break;case D.Custom:var u=z.customText||z.format,AB=t.custom_text;z.set("format",u);AB.value=u;AB.refresh();AE.set("text",S(u));s=["custom_condense","custom_text"];break;case D.Fixed:N(t.fixed_hBox.negativeDDL,p,z,!z.thousandSeparator,0,null);s=["fixed_hBox","fixed_btn"];break;}Z.forEach(s,function(AG){t[AG].set("visible",true);});AD.adjustAfterCategoryChange();}},V(Q,"category")),{scriptClass:"mstrmojo.Box",cssClass:"nf-MiddleRow nf-shortcut",alias:"shortcutRow",border:null,moveLeftBtn:null,moveRightBtn:null,children:[l("nf-shortcut-currency",function f(){B.call(this,D.Currency);},mstrmojo.desc(2051,"Currency"),undefined),l("nf-shortcut-percentage",function f(){B.call(this,D.Percentage);},mstrmojo.desc(2053,"Percentage"),undefined),l("nf-shortcut-fixed",function f(){B.call(this,D.Fixed);this.parent.parent.formatterContainer.fixed_btn.set("checked",true);},mstrmojo.desc(2050,"Fixed"),undefined),{scriptClass:"mstrmojo.Label",cssClass:"shortcut-border",alias:"border"},l("nf-MoveDecimalPoint left",function f(){j.call(this);},mstrmojo.desc(2189,"Increase Decimal"),{funcType:X.FunctionLeftStr,alias:"moveLeftBtn"}),l("nf-MoveDecimalPoint right",function f(){j.call(this);},mstrmojo.desc(2188,"Decrease Decimal"),{funcType:X.FunctionRightStr,alias:"moveRightBtn"})]},{scriptClass:"mstrmojo.Label",alias:"border",cssClass:"nf-border"},{scriptClass:"mstrmojo.Container",alias:"formatterContainer",cssClass:"nf-buttons",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',fixed_hBox:null,fixed_btn:null,currency_hBox1:null,currency_hBox2:null,date_ddl:null,time_ddl:null,percentage_hBox:null,fraction_ddl:null,custom_condense:null,custom_text:null,markupSlots:{containerNode:function U(){return this.domNode;}},children:[{scriptClass:"mstrmojo.HBox",alias:"fixed_hBox",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function k(r){L.call(this,r);}},V([],"format"))]},{scriptClass:"mstrmojo.CheckBox",alias:"fixed_btn",cssClass:"nf-MiddleRow",label:mstrmojo.desc(13898,"Use 1000 Separator(#)").replace("#",J.number.THOUSANDSEPARATOR),onclick:function f(){var r=this.parent.parent;r.myData.set("thousandSeparator",this.checked?-1:0);N(this.parent.fixed_hBox.negativeDDL,p,r.myData,!this.checked,0,null);}},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox1",cssClass:"nf-MiddleRow",visible:true,currency_symbol:null,currency_position:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",alias:"currency_symbol",cssClass:"nf-CurrencySymbol",selectedValue:"$",items:a,postselectedValueChange:function h(r){var w=this,u=w.parent.parent.parent,t=r.value,s=u.myData;s.set("currencySymbol",t);N(this.parent.parent.currency_hBox2.negativeDDL,E,s,false,parseInt(s.currencyPosition,10),t);}},K.copy({cssClass:"nf-CurrencyPosition align-right",alias:"currency_position",onitemSelected:function k(r){var u=this,t=u.parent.parent.parent,s=r.v;t.myData.set("currencyPosition",parseInt(s,10));N(this.parent.parent.currency_hBox2.negativeDDL,E,t.myData,false,parseInt(s,10),t.myData.currencySymbol);}},V(H.CurrencyPosition,"currencyPosition"))]},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox2",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function k(r){L.call(this,r);}},V([],"format"))]},K.copy({alias:"date_ddl",cssClass:"nf-MiddleRow"},V(H.Date,"format",true)),K.copy({alias:"time_ddl",cssClass:"nf-MiddleRow"},V(H.Time,"format",true)),{scriptClass:"mstrmojo.HBox",alias:"percentage_hBox",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function k(r){L.call(this,r);}},V([],"format"))]},K.copy({alias:"fraction_ddl",cssClass:"nf-MiddleRow"},V(H.Fraction,"format",true)),mstrmojo.Button.newWebButton(mstrmojo.desc(13893,"Condense (e.g.10M)"),function(){this.parent.custom_text.set("value",'[>=1000000]#,##0,,"M";[>=1000]#,##0,"K";0');},false,{cssClass:"nf-condense",alias:"custom_condense"}),{scriptClass:"mstrmojo.TextBox",alias:"custom_text",cssClass:"nf-custom",onvalueChange:function e(){var t=this,s=t.parent.parent,r=t.value;s.myData.set("format",r);s.myData.set("customText",r);t.parent.parent.preview.preview_label.set("text",S(r).replace(/\s/g,"&nbsp;"));}}]},{scriptClass:"mstrmojo.HBox",alias:"preview",cssClass:"nf-MiddleRow",preview_label:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"preview_lable",text:mstrmojo.desc(13892,"Preview:")},{scriptClass:"mstrmojo.Label",cssClass:"align-right",alias:"preview_label"}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Calendar","mstrmojo._TouchGestures");mstrmojo.MobileCalendar=mstrmojo.declare(mstrmojo.Calendar,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.MobileCalendar",cssPrefix:"mobile-calendar",monthNames:function(C){return mstrmojo.locales.datetime.MONTHNAME_FULL[C];},supportedViews:{day:true,month:true,year:true},premousedown:function A(C){if(!mstrApp.isTouchApp()){return this._super(C);}},touchTap:function B(C){this.processEvent(document.elementFromPoint(C.pageX,C.pageY));return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.Popup","mstrmojo._HasPopup","mstrmojo.locales","mstrmojo.date","mstrmojo.string");var B=mstrmojo.ValidationTextBox.prototype.markupMethods,D=mstrmojo.string,A=function(){return mstrmojo.locales.datetime;},C=mstrmojo.date;mstrmojo.DateTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DateTextBox",calendarToBody:false,calendarZIndex:100,changeValueOnOK:false,dynDateValue:null,showAdvanced:false,canSelectDisabledDate:false,isList:false,dtp:14,defaultDate:null,autoFormat:true,enabled:true,min:"",max:"",markupString:'<div id="{@id}" class="mstrmojo-DateTextBox {@cssClass}" style="{@cssText}"><input class="mstrmojo-DateTextBox-input" type="text" title="{@tooltip}"value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur /><div class="mstrmojo-DateTextBox-icon" mstrAttach:click> </div><div class="mstrmojo-DateTextBox-popup"></div></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.childNodes[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onwidthChange:function(){if(this.width){this.inputNode.style.width=(this.width-20)+"px";this.iconNode.style.left=(this.width-18)+"px";this.domNode.style.width=this.width+"px";}},onvalueChange:B.onvalueChange,onenabledChange:B.onenabledChange,onvalidationStatusChange:B.onvalidationStatusChange},calConfig:null,calendar:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-DateTextBox-calendar",locksHover:true,slot:"popupNode",onOpen:function(){var H=this.opener,G=H&&H.calendarZIndex,I=this.cal,E=H&&H.calConfig;if(G){this.domNode.style.zIndex=G;}for(var F in E){I.set(F,E[F]);}},children:[{scriptClass:"mstrmojo.Calendar",alias:"cal",forceNonEmptySelection:true,bindings:{showAdvanced:"this.parent.opener.showAdvanced",dtp:"this.parent.opener.dtp",value:"this.parent.opener.value",dynDateValue:"this.parent.opener.dynDateValue",enabled:"this.parent.opener.enabled",min:"this.parent.opener.min",max:"this.parent.opener.max",canSelectDisabledDate:"this.parent.opener.canSelectDisabledDate",changeValueOnOK:function(){var F=this.parent.opener.dtp,E=this.parent.opener.changeValueOnOK;return F===15||F===16||E;}},closeOnValueChange:true,onValueUpdate:function(F){var I=this.parent&&this.parent.opener;if(I){var G=I.value,E=window.mstrConfig&&window.mstrConfig.listSep||";",H=I.dtp===15?C.formatTimeInfo(this.timeVal,A().TIMEOUTPUTFORMAT):this.value;if(I.isList&&!D.isEmpty(G)){I.set("value",I.value+E+H);}else{I.set("dynDateValue",this.dynDateValue);I.set("value",H);}I.closePopup();}}}]},onclick:function(E){var F=this._lastOpened,G=this._calendarConfig;if(!G){G={};if(this.calendarToBody){delete this.calendar.slot;G.placeholder=document.body.appendChild(document.createElement("div"));G.nudge=function(){var M=this.opener;if(M){var H=mstrmojo.dom.position(M.popupNode,true),L=this.domNode,P=L.offsetHeight,I=L.offsetWidth,J=mstrmojo.dom.windowDim(),K=H.x,N=H.y;if(N+P>=J.h){N=Math.max(N-P,0);}if(K+I>=J.w){K=Math.max(K-I,0);}var O=L.style;O.top=N+"px";O.left=K+"px";}};}this._calendarConfig=G;}G.lockIW=this;if(F&&F.visible){this.closePopup();}else{this.openPopup("calendar",G);this.calendar.cal.updateSelectedDate(true);}},unrender:function(){this._super();if(this.calendarToBody&&this._calendarConfig){delete this._calendarConfig;}if(this.calendar.hasRendered){this.calendar.unrender();}},_set_value:function(H,F){var G=this.value,E=(G!==F);if(E){this.value=F;this.validate(F);}if(this.showAdvanced&&this.dynDateChanged){this.dynDateChanged=false;E=true;}return E;},_set_dynDateValue:function(H,F){var G=this.dynDateValue,E=(G!==F);if(E){this.dynDateValue=F;this.dynDateChanged=true;}return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.tabs.TabStrip","mstrmojo.vi.ui.tabs.Tab","mstrmojo.ME.MetricEditBox","mstrmojo.array","mstrmojo.hash");var Z=mstrmojo.array,M=mstrmojo.hash,K=mstrmojo.ME.MetricToken.brackets,L=mstrmojo.dom,B=mstrmojo.css,Q=mstrmojo.vi.ui.tabs.Tab.ACTIONS,h=Q.DELETE+Q.RENAME,k=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS,D=mstrmojo.string,o="This@ID",T="45C11FA478E745FEA08D781CEA190FE5";function G(s){return{n:s,k:s,ftk:[],vs:1,is:""};}function O(z,AA,s,w){var u=z.forms[AA]||{},x=z.forms[s],t=z.inputBox;if(AA!==s){u.vs=z.vStatus;u.is=z.iStatus;u.ftk=t.items;z.set("vStatus",k.UNKNOWN);}z.set("vStatus",x.vs);z.set("iStatus",x.is);z.updateInputBoxItems({items:x.ftk});if(z.curFormIdx!==s){z.curFormIdx=s;z.tabstrip.setSelectedTab(x.k);}z.raiseEvent({name:"tabSwitch",tks:x.ftk,vs:x.vs,is:x.is,oidx:AA,nidx:s,toNewTab:w});}function N(t){var s=t.forms[t.curFormIdx];if(s){s.ftk=t.inputBox.items;s.vs=t.vStatus;s.is=t.iStatus;}}var f=0;function W(s){f=Math.max(s.length-1,f);}function V(){f=0;}function p(s){var t="DESC"+(f?" "+f:"");f++;if(Z.find(s,"n",t)>=0){return p(s);}return t;}function I(x){var w={v:K(x.n),oi:x,isNew:true},u,s;if(x.t===12){u=Z.filter(x.fs,function(t){return t.obf||x.da;}).length;if(u===1){s=x.fs[0];w=M.copy({v:K(x.n)+"@"+K(s.fnm),ift:true,exv:s.fid,extp:8},w);}else{w=M.copy({v:K(x.n)+"@",ift:true},w);}}return w;}function E(t,s){t.set("enabled",!s);var u="mstrmojo-InlineWaitIcon";if(t.iconClass){t.set("iconClass",t.iconClass.replace(new RegExp(u),"")+" "+(s?u:""));}else{mstrmojo.css.toggleClass(t.domNode,u,s);}}var U=function(AC){var w=AC.items,x=w.length,z=w[w.length-1],u,t,AB=[],s="",AA;if(w[0]&&w[0].tp!==33){AB.push({v:"!",tp:33,lv:4,sta:2});}for(u=0;u<x;u++){t=w[u];if(t.isNew&&!t.oi){s+=t.v;}else{if(!D.isEmpty(s)){AB.push({v:s,tp:2,lv:1});s="";}if(t.v&&t.v.indexOf(o)>=0){t.v=t.v.replace("["+o+"]",o);t.exv=T;t.extp=8;delete t.oi;}AB.push(t);}}if(!D.isEmpty(s)){AB.push({v:s,tp:2,lv:1});s="";}if(z&&z.tp!==-1){AB.push({v:"",tp:-1,lv:4,sta:2});}return{items:AB};},a=function(u){var s=u.items||[],t=s[s.length-1];if(t&&t.tp===-1){s.pop();}if(s[0]&&(s[0].tp===33||s[0].tp===37)){s.splice(0,1);}Z.forEach(s,function(w){if(w.v&&w.v.indexOf(o)>=0){M.copy({extp:8,exv:T,oi:{n:"This",did:"This",t:12}},w);}});},Y=function(s){if(!s){return k.VALID;}return{"-2147214845":k.ERROR,"-2147214846":k.AMBIGUITY}[s]||k.ERROR;},R=function(u){u=U(u);var t={items:true,v:true,tp:true,lv:true,oi:true,n:true,did:true,t:true,st:true,exv:true,extp:true,asc:true,vtp:true},s={getArrItemName:function(){return"tkn";},isSerializable:function(w){return(t[w])?true:false;}};return D.json2xml("tknstrm",u,s);},F=function(u,z,x,t){var w=R(z),AA=function(AB){if(AB&&AB.tks){var AC=AB.tks;a(AC);AC.vs=Y(AC.rjec);AC.tokenXML=w;if(t){t(AC);}}},s=function(AB){mstrmojo.alert(AB.message||AB.getResponseHeader&&AB.getResponseHeader("X-MSTR-TaskFailureMsg"));};mstrmojo.ME.MetricDataService.validateMetric({tokenStreamXML:w,localSymbolFolderXML:"",metricXML:"",metricId:u||"",isNew:true,objectType:12,isIDForm:x,msgID:mstrApp.getMsgID()},{success:AA,failure:s});};mstrmojo.ME.DerivedAttributeFormTab=mstrmojo.declare(mstrmojo.vi.ui.tabs.Tab,null,{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",valid:true,editable:true,postBuildRendering:function S(){if(this._super){this._super();}var s=this,t=s.lbl;t.editOnDoubleClick=this.editable;t.onTextEditComplete=function(w,u){if(s.validate(t.text)){s.titleEdited(t.text,u);}};},onclick:function e(s){var t=mstrmojo.dom.eventTarget(s.hWin,s.e);if(t===this.menuBtnNode){this.tabDeleted();}else{if(!this.isSelected){this.tabSelected();}}},validate:function(s){var t=!/[\[\]\"\\]/g.test(s);if(!t){this.lbl.set("isEditing",true);}this.set("valid",t);return t;},showErrTooltip:function r(x,u){var s=mstrmojo.dom.position(this.domNode),t=this,w=t.errTooltip;if(!w){t.errTooltip=w=new mstrmojo.Tooltip({contentNodeCssClass:"me-tooltip-content up me-err",updatePopupConfig:null});this.addDisposable(w);}w.set("top",s.y+s.h+2);w.set("left",s.x+s.w/2-u);w.set("content",'<div class="content"><span>'+x+"</span></div>");w.open();window.setTimeout(function(){w.close();},2500);},onvalidChange:function(){if(this.valid){this.hideTooltip();}else{this.showErrTooltip(mstrmojo.desc(11569,"Input contains invalid character"),95);}}});function g(w,x,z){var u=Z.find(x,"k",z.k);return{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",title:z.n,draggable:false,editable:u!==0,cssClass:"mstrmojo-AEB-Tab "+(u===0?"mstrmojo-AEB-IDTab":""),getMenuActions:function(){return h;},tabSelected:function(){O(w,w.curFormIdx,u);},titleEdited:function t(AB,AA){if(AB!==AA){if(Z.find(w.forms,"n",AB)>=0){this.showErrTooltip(mstrmojo.desc(7209,"Name already exists"),69);}var AC=w.forms[u];AC.n=AB;}},tabDeleted:function s(){var AA=w.forms.length,AD=(w.curFormIdx===AA-1)?0:w.curFormIdx,AB=w.forms.slice(0),AC=AB[u];if(AC&&AC.did){w.delForms.push({n:AC.n,did:AC.did});}AB.splice(u,1);w.curFormIdx=AD;w.set("forms",AB);O(w,-1,AD);w.set("dirty",true);}};}mstrmojo.ME.AttributeEditBox=mstrmojo.declare(mstrmojo.ME.MetricEditBox,null,{scriptClass:"mstrmojo.ME.AttributeEditBox",markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-AEB-TabStrip"></div><div class="mstrmojo-MEBox-edit mstrmojo-AEB-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{tabstripNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},statusNode:function(){return this.domNode.lastChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;}},forms:null,delForms:[],curFormIdx:0,attrid:null,absorbAmbiguity:false,init:function l(u){var w=this;w.children=[{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",alias:"tabstrip",position:"top",slot:"tabstripNode",isAlignRight:false,getTabCfg:function t(AA,AB,z){return M.copy(g(w,AA,AB),z);},addTab:function x(){var AB=w.forms,z=AB.length,AC=p(AB),AA=AB.slice(0);AA.push(G(AC));w.set("forms",AA);O(w,w.curFormIdx,z,true);w.set("dirty",true);},clear:function s(){Z.forEach(this.children,function(z){z.hideTooltip();});}},{scriptClass:"mstrmojo.Button",alias:"clearBtn",slot:"tabstripNode",text:mstrmojo.desc(1763,"Clear All"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-clearAll",onclick:function(){w.inputBox.clearTokens([]);}},{scriptClass:"mstrmojo.Button",alias:"validateBtn",slot:"tabstripNode",text:mstrmojo.desc(11897,"Validate"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-validate",onclick:function(){w.validateCurrentForm();}}].concat(this.children);this._super(u);},item2textCss:function J(s){return this._super(s)||{21:"afm"}[s.t]||"";},onformsChange:function X(){var s=this.forms,t=s[this.curFormIdx].k;Z.forEach(s,function(u){a({items:u.ftk});});this.tabstrip.setTabs(s,t);W(s);},selectFormTab:function A(s){O(this,this.curFormIdx,s);},postBuildRendering:function S(){if(this._super){this._super();}this.clear();var s=this;this.inputBox.ondrop=function(AC){if(!AC.src.data||!AC.src.data.item){return ;}var AB=s.inputBox,x=AB.ctxtBuilder.itemWidgets,z=M.copyProps(["did","n","t","fs"],AC.src.data.item),w=I(z),AA,t,u;AC.src.data=w;mstrmojo.ListBase2.prototype.ondrop.call(this,AC);if(s.ontokensModify){s.ontokensModify();}AA=this.selectedIndices;if(z.t===12&&w.ift&&!w.exv){for(t in AA){u=x[t];if(u){AB.startTokenSuggestion(u);}}}AB.clearSelect(true);B.removeClass(AB.domNode,"unselectable");};},clear:function d(){this.curFormIdx=0;this.delForms=[];this.attrid=null;V();this.set("forms",[G("ID")]);this.inputBox.set("items",[]);this.inputBox.resetTokensCache();this.set("vStatus",k.UNKNOWN);this.set("iStatus","");this.tabstrip.clear();},validateCurrentForm:function C(t){var u=this,w=this.validateBtn,s=function(x){E(w,false);u.set("vStatus",x.vs);u.set("iStatus",x.rjed||"");u.updateInputBoxItems({items:x.items});u.statusNode.style.display="block";u.handleValidation(x);if(t){t(x.items,x.vs===k.VALID);}};u.set("vStatus",k.VALIDATING);E(w,true);F(this.attrid,{items:this.inputBox.items},u.curFormIdx===0,s);},validateAllForms:function q(u){var w=this,t=w.forms,s=0,x=function(AB){var AA=(s===0);if(AB){var z=t[s-1];z.ftk=AB.items;z.vs=AB.vs;z.is=AB.rjed||"";z.tokenXML=R({items:AB.items});if(AB.vs!==k.VALID){w.selectFormTab(s-1);w.handleValidation(AB);if(u){u(null,false);}return ;}}if(s===t.length){if(u){u(t,true);}return ;}F(w.attrid,{items:t[s++].ftk},AA,x);};N(w);x();},continueValidataion:function P(){this.validateCurrentForm();},getStatusDesc:function b(t){return{0:mstrmojo.desc(11655,"Valid Formula.")}[t];},onvStatusChange:function j(){this.statusNode.style.display=this.vStatus>=k.VALIDATING?"block":"none";},onObjectInsert:function H(w){var x=this.inputBox,u=I(w),s=x.insertTokens([u]),t;if(w.t===12&&u.ift&&!u.exv){t=x.ctxtBuilder.itemWidgets[s];if(t){x.startTokenSuggestion(t);}}}});mstrmojo.ME.AttributeEditBox.preprocessTokenStream=a;mstrmojo.ME.AttributeEditBox.postprocessTokenStream=U;mstrmojo.ME.AttributeEditBox.mapErrorCode=Y;mstrmojo.ME.AttributeEditBox.getTokenStreamXML=R;mstrmojo.ME.AttributeEditBox.validateSyntax=F;mstrmojo.ME.AttributeEditBox.prepareInsertToken=I;}());(function(){mstrmojo.requiresCls("mstrmojo.MobileDocXtabGraph","mstrmojo.graph._CanvasGraph");mstrmojo.graph.MobileDocXtabCanvasGraph=mstrmojo.declare(mstrmojo.MobileDocXtabGraph,[mstrmojo.graph._CanvasGraph],{scriptClass:"mstrmojo.graph.MobileDocXtabCanvasGraph",update:function C(D){delete this.graphData;this._super(D);},setModel:function B(D){this.graphData=D.data;},retrieveGraphSrc:function A(F,D){if(!this.graphData){var H=this.id,E=this._super,G=this.model;if(parseInt(F,10)>0&&parseInt(D,10)>0){this.model.getDataService().getRWGraphImage({w:D,h:F,k:this.k,sid:this.node.data.sid},G.newCallback({success:function(I){var K=mstrmojo.all[H];if(!K){return ;}K.setModel({data:I});E.call(K,F,D);var J=K.parent;if(J&&J.updateScroller){J.updateScroller();}}}));}}else{this._super(F,D);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.url","mstrmojo._TouchGestures","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Image","mstrmojo._HasTouchScroller");var B=Math,K=mstrmojo.css,H=mstrmojo.dom,Q=30,D=50,E=32;function P(T){var U="container"+T;if(!this[U]){var S=this.domNode,R=parseInt(this[T.toLowerCase()],10);this[U]=(isNaN(R))?S["client"+T]:R;}return this[U];}function J(R){var S,T="";if(R>0){for(S=0;S<R;S++){T+='<col style="width:'+(100/R)+'%" />';}}return"<colgroup>"+T+"</colgroup>";}function C(R){return mstrmojo.url.getAbsoluteURL(R,mstrApp.getConfiguration().getCurrentProjectWebServerUrl());}function O(S,R){S.style[H.CSS3_TRANSITION_DURATION]="500ms";H.translate(S,R,0,0,"",true);}function L(Y,R,V){if(!Y){return ;}var U=Y.clientWidth,W=Y.clientHeight,X,T,S=false;if(R<U||V<W){S=true;X=R/U;T=V/W;if(X<T){Y.width=R;}else{Y.height=V;}}return S;}function I(V){var Y=[],S,X,T,W,Z,R=V.getTotalRows(),U=R>0?V.getRowTitles().size():0;for(S=0;S<R;S++){W=V.getRowHeaders(S);for(X=0;X<U;X++){if(!Y[X]){Y[X]=[];}Z=W.getHeader(X);Y[X].push({n:Z.getName()});}}return Y;}mstrmojo.ImageCarousel=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.ImageCarousel",markupString:'<div class="mstrmojo-ImageCarousel {@cssClass}" style="overflow:hidden;{@cssText}"><div class="imageViewer" mstrAttach:click>{@noImageMsg}</div><div class="imageTitle"></div><div class="statusBar" style="overflow:hidden"></div></div>',markupSlots:{viewerNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.childNodes[1];},statusBarNode:function(){return this.domNode.lastChild;}},formatHandlers:{domNode:["RW"]},scrollerConfig:{friction:0.0087,bounces:false,vScroll:false,hScroll:true},selected:-1,children:[{scriptClass:"mstrmojo.HBox",slot:"viewerNode",alias:"viewer",onitemsChange:function(){var Y,V,W,X=[],S=this.parent.vp,Z;Y=this.items;if(!this.hasRendered){var T=this.parent,U=P.call(T,"Width"),R=P.call(T,"Height");if(this.children){this.removeChildren();}W=Y.length;this.colHTML=J(W);this.cssText="width:"+(U*W)+"px;height:"+(R-D)+"px";Z=(S&&S.bw)?("border:"+S.bw+"px solid #"+(S.bc||"FFF")):"";for(V=0;V<W;V++){X.push({scriptClass:"mstrmojo.Image",cssText:Z,cssDisplay:"inline-block",src:C(Y[V].n||Y[V].v),onload:function(){L(this.imgNode,U-Q,R-D);}});}this.addChildren(X);}}},{scriptClass:"mstrmojo.Label",slot:"textNode",alias:"description"},{scriptClass:"mstrmojo.HBox",slot:"statusBarNode",alias:"sb",onitemsChange:function(){var S=this.items,U=[],T,R;if(this.children){this.removeChildren();delete this.numVisibleDots;this.lastSelected=-1;}for(T=0,R=S.length;T<R;T++){U.push({scriptClass:"mstrmojo.Label"});}this.addChildren(U);},lastSelected:0,select:function(R){var U,V,S=this.domNode,T=this.numVisibleDots;if(this.selectedNode){K.removeClass(this.selectedNode.domNode,"selected");}if(this.items.length>0){this.selectedNode=this.children[R];K.addClass(this.selectedNode.domNode,"selected");if(!T){T=this.numVisibleDots=B.floor(P.call(this.parent,"Width")/E);if(this.items.length<T){K.addClass(S,"center");}else{K.removeClass(S,"center");}}U=B.floor(this.lastSelected/this.numVisibleDots);V=B.floor(R/this.numVisibleDots);if(U!==V){O(S,-V*T*E);}this.lastSelected=R;}}}],updateScrollerConfig:function G(){var R=this.viewer.items.length;mstrmojo.hash.copy({scrollEl:this.viewerNode,origin:{x:0,y:0},offset:{x:{start:0,end:((R>0)?(R-1):0)*P.call(this,"Width")}}},this.scrollerConfig);return this._super();},touchSwipeEnd:function N(T){var S=T.delta,R=this.viewer.items.length;if(S&&S.x>0){this.set("selected",Math.max(0,this.selected-1));}else{if(S&&S.x<0){this.set("selected",Math.min(this.selected+1,R));}}},onclick:function(S){var R;if(mstrApp.getScreenDimensions&&this.selectedImage){R={cssClass:"image-FullScreen",onclick:function(){this.close();},resizeDialog:function(){var V=mstrApp.getScreenDimensions(),T=this.domNode,U=T&&T.style;if(V&&U){U.width=V.w+"px";U.height=V.h+"px";}},children:[{scriptClass:"mstrmojo.Image",src:this.selectedImage,onload:function(){var T=mstrApp.getScreenDimensions();if(T){L(this.imgNode,T.w,T.h);this.parent.positionDialog();}}}]};mstrApp.showDialog(R);}},touchTap:function(R){this.onclick(R);},preBuildRendering:function M(){var U=this.getDataParser(),S=I(U),T,R;if(!this.vp){this.vp=this.model.vp;}T=S[0]||[];R=S[1]||[];this.viewer.set("items",T);this.sb.set("items",R);this.selected=-1;if(T.length>0){this.cssClass=this.cssClass?"":this.cssClass.replace(/noImage/,"");this.noImageMsg="";}else{this.cssClass+=this.cssClass?"":" noImage";this.noImageMsg="No Photo Found";}if(this.vp&&this.vp.bgc){this.cssText="background-color:#"+this.vp.bgc+";";}this._super();},postBuildRendering:function A(){this._super();this.set("selected",0);},onselectedChange:function F(){var R=this.selected,T=this.sb,S=this.viewer.items[R],U=T.items[R];if(S){this._scroller.scrollTo(R*P.call(this,"Width"),0,500);this.selectedImage=C((S&&S.n)||"");T.select(R);this.description.set("text",(U&&U.n)||"");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.array","mstrmojo.hash","mstrmojo.android.EnumMenuOptions","mstrmojo.GeoLocation","mstrmojo._TouchGestures","mstrmojo.android.DropDownList","mstrmojo.Label","mstrmojo._ImageHelper");mstrmojo.requiresDescs(7736,8068,8069,8102,8395,8954);var S=mstrmojo.array,N=mstrmojo.android.EnumMenuOptions,B=N.REPROMPT,D=1000;function K(Z,a,W,Y,X){this.title=Z;this._latlng=a;this._rad=W;this._ix=Y;this._color=X;}function H(){K.prototype=new google.maps.OverlayView();K.prototype.draw=function(){var e=this.div_;if(!e){e=this.div_=document.createElement("DIV");var a=e.style,Y=this._rad,Z=Y/2,X=Z+"px "+Z+"px",b=this.getPanes(),d=this;a.position="absolute";a.paddingLeft="0px";a.cursor="pointer";a.backgroundColor=this._color;a.opacity=".65";a.borderRadius=X;a.height=a.width=Y+"px";a.border="2px solid black";google.maps.event.addDomListener(e,"click",function(f){google.maps.event.trigger(d,"click");});b.overlayMouseTarget.appendChild(e);}var W=this.getProjection().fromLatLngToDivPixel(this._latlng);if(W){e.style.left=(W.x-this._rad/2)+"px";e.style.top=(W.y-this._rad/2)+"px";}};K.prototype.remove=function(){var W=this.div_;if(W){W.parentNode.removeChild(W);this.div_=null;}};K.prototype.getPosition=function(){return this._latlng;};}var C=function C(Z){var a;if(Z.length>0){a=new google.maps.LatLngBounds();for(var X in Z){var W=Z[X],Y=W.getPosition();a.extend(Y);}}return a;};function R(X,W){return W.replace(/POINT[ ]?\(|\)/g,"").split(" ")[X=="lat"?1:0];}function F(){return this._mapTypeToGoogleMapTypeId[this.mapType];}mstrmojo.maps.jsmap.AndroidMap=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._TouchGestures,mstrmojo._ImageHelper],{scriptClass:"mstrmojo.maps.jsmap.AndroidMap",cssClass:"mstr-googleMapView",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@domNodeCssText}"><div></div><div class="androidMap-metricSelector"><span class="androidMap-toggleHeader"></span></div><div class="mstr-googleMap" id="map_canvas_{@id}"></div></div>',reRenderOnDimensionChg:false,noMapsMsg:mstrmojo.desc(8954,"Google Maps have not been configured for this device. Please check with your mobile administrator to enable Google Maps in the mobile configuration."),selMetricIx:0,markerArr:[],googleMap:null,bubblesMaxInfo:[],maxBubbleSize:50,minBubbleSize:20,markupSlots:{msg:function(){return this.domNode.childNodes[0];},metricSelector:function(){return this.domNode.childNodes[1];},map:function(){return this.domNode.childNodes[2];}},markupMethods:{onheightChange:function(){this.domNode.style.height=this.getHeight()+"px";},onwidthChange:function(){this.domNode.style.width=this.getWidth()+"px";}},layoutConfig:{h:{metricSelector:"32px",map:"100%"},w:{metricSelector:"200px",map:"100%"}},children:[{scriptClass:"mstrmojo.android.DropDownList",slot:"metricSelector",options:null,onidxChange:function(W){this._super(W);this.parent.onselMetricIxChange(W);this.set("value",this.options[W.value].v);},visible:false,alias:"metricSel"},{scriptClass:"mstrmojo.Box",slot:"map"},{scriptClass:"mstrmojo.Label",cssClass:"androidMap-errorMsg",visible:true,alias:"errorMsg",slot:"msg"}],setModel:function M(W){this.set("model",W);this.xtabModel=W;if(W.data){this.set("gridData",W.data);}},ongridDataChange:function(){this.parser=new mstrmojo.Vis.DataParser(this.gridData);},update:function E(Y){Y=Y||this.node;if(Y){if(Y.data){this.set("gridData",Y.data);var X=this.gridData;if(X.layoutModel){this.layoutModel=X.layoutModel;}if(X.layoutNode){this.layoutNode=X.layoutNode;}}var W=Y.defn.fmts||Y.defn.units[this.xtabModel.k].fmts;this.width=parseInt(W.width,10);this.height=parseInt(W.height,10);this.top=parseInt(W.top,10);this.left=parseInt(W.left,10);this.fmts=W;}if(this.xtabModel){this.initFromVisProps(this.gridData.vp);}this.updated=true;},getMapModel:function(){return this.xtabModel;},initFromVisProps:function T(W){if(!W){return ;}if(W.dv){this.mapType=parseInt(W.dv,10);}this.usePt=(W.gr=="1");this.useAttributes=(W.af==="0");this.geoAttr=W.ga;this.markerType=W.mtp;this.attrThresholds=W.at;this.flong=W.flong;this.flat=W.flat;this.fpt=W.fpt;this.mstyl=W.mstyl;this.maxBubbleSize=W.mbs||50;},showErrorMsg:function J(W,X){this.errorMsg.set("text",X);this.metricSelector.style.display=W?"none":"block";this.map.style.display=W?"none":"block";this.msg.style.display=W?"block":"none";},postBuildRendering:function Q(){console.log("JSMAP:androiMap:postBuildRendering");this._super();if(typeof this.gridData.eg!=="undefined"){this.showErrorMsg(true,this.gridData.eg);}else{if(typeof google==="undefined"||(google&&typeof google.maps==="undefined")){this.showErrorMsg(true,this.noMapsMsg);}else{this.showErrorMsg(false);var X=this.children[0];X.idx=0;X.unset=true;X.options=[{v:"-1",n:""}];if((typeof google!=="undefined"&&google.maps)){if(!mstrApp.isInfoWindow){this.markerArr=[];this.bubblesMaxInfo=[];}this._mapTypeToGoogleMapTypeId=[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.TERRAIN];H();if(this.gridData){var Y=this.buildMetricSelector(),W=Y?parseInt(this.layoutConfig.h.metricSelector,10):0;this.metricSel.set("visible",Y);this.map.style.height=this.getHeight()+"px";this.map.style.width=(this.getWidth()-1)+"px";this.metricSelector.style.height=W+"px";this.metricSelector.style.display=Y?"block":"none";this.initMap();if(this.map.firstChild){this.map.firstChild.style.zIndex=1;}}}}}},gup:function G(Z){Z=Z.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var Y="[\\?&]"+Z+"=([^&#]*)",X=new RegExp(Y),W=X.exec(window.location.href);return W==null?"":W[1];},onselMetricIxChange:function(W){var Z=function(d,a){for(var b in a){if(a[b].setMap){a[b].setMap(d);}}};if(this.openedInfoWindow){this.openedInfoWindow.close();}var X=this.getMarkers(W.value),Y=this.getMarkers(W.valueWas);this.selMetricIx=W.value;Z(null,Y);Z(this.googleMap,X);},buildMetricSelector:function I(){var Z=this.gridData.gts.col,b=false;if(Z.length>0){var a=Z[0].es;if(a.length>1){var Y=[],X=-1;S.forEach(a,function(e,d){Y[++X]={n:e.n,v:X,id:e.id};});var W=this.children[0];W.set("options",Y);W.set("value",0);b=true;}}return b;},initMap:function(){var X,f=google.maps,Y=f.event,Z=F.call(this)||f.MapTypeId.ROADMAP,a={mapTypeControl:true,mapTypeControlOptions:{position:f.ControlPosition.TOP_LEFT,style:f.MapTypeControlStyle.HORIZONTAL_BAR},streetViewControl:false,mapTypeId:Z,navigationControlOptions:{position:f.ControlPosition.RIGHT_BOTTOM,style:f.NavigationControlStyle.ANDROID},zoomControlOptions:{style:f.ZoomControlStyle.LARGE},tilt:0};this.googleMap=X=new f.Map(this.map,a);this.selMetricIx=this.selMetricIx;var d=this.getMarkers(this.selMetricIx);if(d.length>0){var g=this.mapBounds;if(g){X.fitBounds(g);X.setCenter(g.getCenter());}}else{var e=new f.LatLng(38.893444,77.221648);X.setCenter(e);}var b=30,j=0,h=X.getZoom(),W=setInterval(function(){h=X.getZoom();j+=b;if(h!==undefined){if(h>20){X.setZoom(15);}else{if(h<2){X.setZoom(2);}}clearTimeout(W);}else{if(j>10*b){clearTimeout(W);X.setZoom(2);}}},b);},getMarkers:function A(AW){if(!!this.markerArr[AW]){return this.markerArr[AW];}var AB=this.googleMap,AS=this.gridData,k=AS.vp,W=AS.gts,o=W.row,e=this.usePt,AV=(e?1:2),b=this.useAttributes,g=this.geoAttr,u,X,j,t=-1,w=-1,AF=-1,h=[],q=null;for(var AL=0,AD=o.length,AM=0;AL<AD;++AL){var AQ=o[AL],x=AQ.id;if(e){if(x==this.fpt){u=X=AQ;t=w=AM;}}else{if(x==this.flong){u=AQ;t=AM;}else{if(x==this.flat){X=AQ;w=AM;}}}for(var AR=0,AC=AQ.fs.length;AR<AC;++AR){var AU=AQ.fs[AR],AO=AU.id;if(e){if(AO==this.fpt){u=X=AQ;t=w=AM+AR;}}else{if(AO==this.flong){u=AQ;t=AM+AR;}else{if(AO==this.flat){X=AQ;w=AM+AR;}}}if(AF<0){j=AQ;AF=AM+AR;}}AM+=AC;}if(Math.min(t,w,AF)<0){throw new Error(mstrmojo.desc(8395,"Not enough data to display map."));}var AG=AS.ghs.rhs.items,Y=Math.min(AG.length,D),AK=-90,s=90,AN=-180,z=180;for(var AP=0;AP<Y;AP++){var AJ=AG[AP].items;if(AJ.length<AV){continue;}var AI=u.es[AJ[t].idx].n,Z=parseFloat(e?R("long",AI):AI),AE=parseFloat(e?R("lat",AI):X.es[AJ[w].idx].n),p=j.es[AJ[AF].idx].n,AT,AA=AS.gvs.items[AP];if(isNaN(AE)||isNaN(Z)){continue;}s=(AE<s)?AE:s;AK=(AE>AK)?AE:AK;z=(Z<z)?Z:z;AN=(Z>AN)?Z:AN;latLng=new google.maps.LatLng(AE,Z);if(this.markerType=="2"){AT=this.getMetricBubble(AS.gvs.items[AP],p,latLng,AP,AW);}else{q="../"+this.mstyl;var a=AS.gvs.items[AP];if(a){var AH=a.items;if(AH){var l=AH[AW];if(l&&(l.ts==4)&&(this.attrThresholds=="1")){q=this.getImage(l.v);}}}AT=new google.maps.Marker({position:latLng,title:p,_ix:AP,icon:q,zIndex:AP});}AT.eid=j.es[AJ[AF].idx].id;AT.attrid=j.id;AT.setMap(AB);google.maps.event.addListener(AT,"click",function(f,d){return function(){f.handleMarkerClick(AB,d);};}(this,AT));h[h.length]=AT;}this.mapBounds=new google.maps.LatLngBounds(new google.maps.LatLng(s,z),new google.maps.LatLng(AK,AN));this.markerArr[AW]=h;return h;},handleMarkerClick:function(X,W){if(this.openedInfoWindow){this.openedInfoWindow.close();this.openedInfoWindow=null;}this.openInfoWindow(X,W);this.postHandleMarkerClick(X,W);},postHandleMarkerClick:mstrmojo.emptyFn,getMetricBubble:function V(b,j,X,g,a){var h=this.gridData,Y=h.gvs.items,p=this.bubblesMaxInfo[a],o=parseFloat(b.items[a].rv),Z="red",W=Math.abs(this.maxBubbleSize-this.minBubbleSize);if(!p){for(var f in Y){var l=Y[f].items[a],k=parseFloat(l.rv)||0;if(!p){p=k;}p=Math.max(p,k);}this.bubblesMaxInfo[a]=p;}if(this.attrThresholds=="1"&&(typeof b.items[a].ty!=="undefined")){var e=b.items[a].ty;if(e==2){Z=h.th[b.items[a].ti].n;}else{Z="#FFF";}}return new K(j,X,this.minBubbleSize+Math.round((o/p)*W),g,Z);},openInfoWindow:function(Z,Y){var X=Y._ix,W=this.getInfoWindow(Z,Y);if(W){this.openedInfoWindow=W;W.open(Z,Y);}},getInfoWindow:function(X,W){return this.getDefaultInfoWindow(this.gridData,W);},getDefaultInfoWindow:function L(e,b){var X=b._ix,h=[],Y=e.gvs.items,f=document.createElement("div"),g='<table><tbody><tr><td colspan="2" class="androidMap-infoWindowTitle" style="padding-right: 20px">'+b.title+"</td></tr>";if(e.gts.col.length!=0){h=e.gts.col[0].es;}for(var a in h){var j=Y[X].items[a];if(j.ts==4){var k=j.v;if(k.indexOf("http")!==0){k="../"+k;}g+='<tr><td class="androidMap-infoWindowText">'+h[a].n+'</td><td><img src="'+k+'"></td></tr>';}else{var Z="black",W="white";if(e.th&&this.attrThresholds=="1"&&(typeof j.ti!=="undefined")){Z=e.th[j.ti].n;}g+='<tr><td class="androidMap-infoWindowText">'+h[a].n+'</td><td style="background-color:'+W+";color:"+Z+';">'+j.v+"</td></tr>";}}g+="</tbody></table>";f.innerHTML=g;return new google.maps.InfoWindow({content:f});},touchBegin:function(W){W.stop();return false;},rebuildLayout:mstrmojo.emptyFn,setDimensions:function O(Z,Y){var a=this.googleMap,W=a?a.getCenter():null,X=this._super(Z,Y);if(a){this.map.style.height=this.getHeight()+"px";this.map.style.width=(this.getWidth()-1)+"px";a.setCenter(W);}return X;},unrender:function P(W){if(this.googleMap){delete this.googleMap;}this._super(W);},destroy:function U(){if(this.googleMap){delete this.googleMap;}this._super();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.VisChartUtils","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller");function E(P){var O=0;if(P){if(P.length>0){O=P[0].length;}}return O;}mstrmojo.AndroidImageLayout=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"AndroidImageLayout",markupString:'<div id="{@id}" class="mstrmojo-Chart {@cssClass}" style="position:absolute;width:{@width};height:{@height};top:{@top};left:{@left}; z-index:{@zIndex}; overflow:hidden;"  mstrAttach:mouseover,mouseout,mousedown,mousemove,mouseup,click,dblclick><div id="{@id}"-scroll-element style="position:absolute;left:0;top:0;width:{@width};height={@height}"><canvas id="{@id}-highlightCanvas" style="position:absolute;left:0;top:0;z-index:1" width="{@width}" height="{@height}"></canvas><canvas id="{@id}-animationCanvas" style="position:absolute;left:0;top:0" width="{@width}" height="{@height}"></canvas></div><div id="{@id}-tooltip" style="z-index:2" class="mstrmojo-ImageLayout-tooltip" clk="clk"><table style="margin:5px 7px"></table></div><div id="{@id}-infowindow-anchor" style="position:absolute;width:18px;height:18px;display:block;z-index:-1;"></div><div id="{@id}-css" style="display:none"></div><div id="{@id}-errMsg" align="center" style="position:absolute; top:35%; word-wrap:break-word;"></div></div>',markupSlots:{scrollableCanvasDiv:function(){return this.domNode.childNodes[0];},highlightCanvas:function(){return this.domNode.childNodes[0].firstChild;},animationCanvas:function(){return this.domNode.childNodes[0].lastChild;},tooltip:function(){return this.domNode.childNodes[1];},infowindowAnchor:function(){return this.domNode.childNodes[2];},cssDiv:function(){return this.domNode.childNodes[3];},errorMessage:function(){return this.domNode.childNodes[4];}},init:function(O){if(this._super){this._super(O);}this.sbwh=0;},scrollerConfig:{bounces:false,showScrollbars:false,useTranslate3d:true,vScroll:true,hScroll:true,offset:{y:{start:0,end:0},x:{start:0,end:0}},origin:{x:0,y:0}},isTablet:true,utils:mstrmojo.VisChartUtils,multiTouch:true,multiTap:true,postBuildRendering:function H(){var Q=this;var P=Q.scrollerConfig;P.scrollEl=Q.scrollableCanvasDiv;P.offset.x.start=0;P.offset.x.end=Q.getWidth()*(Q.scaleFactor-1);P.offset.y.start=0;P.offset.y.end=Q.getHeight()*(Q.scaleFactor-1);if(P.origin.x>P.offset.x.end){P.origin.x=P.offset.x.end;}if(P.origin.y>P.offset.y.end){P.origin.y=P.offset.y.end;}Q.animationCanvas.width=Q.highlightCanvas.width=Q.getWidth()*2;Q.animationCanvas.height=Q.highlightCanvas.height=Q.getHeight()*2;Q.createTooltipTable();Q.attrFormIndices=Q.getAttrFormIndices();Q.areaBubbleAttrIndex=Q.getAreaBubbleAttrIndex();Q.areaBubbleAttrFormCount=E(Q.attrFormIndices);if(this._super){this._super();}if(this._tn){var O=this._tsCallback;this._tsCallback=function(R){Q.savedInfowindowOn=Q.realtimeInfowindowOn;Q.currSelectedObjBackup=Q.currSelectedObj;O.call(this,R);};mstrmojo.dom.detachEvent(this._tn,mstrmojo.dom.TOUCHSTART,O);mstrmojo.dom.attachEvent(this._tn,mstrmojo.dom.TOUCHSTART,this._tsCallback);}Q.fullScreenListener=mstrmojo.touchManager.attachEventListener("fullScreenStateChange",this.id,function(R){Q.adjustWidgetOffsets();});},getAreaBubbleAttrElems:function A(){var Q={},Y=this,R=Y.attrFormIndices,X=Y.areaBubbleAttrIndex,O=Y.headerIndexLineIndexObj={};if(X>-1){var W=Y.model,a=W&&W.ghs&&W.ghs.rhs&&W.ghs.rhs.items,d=W&&W.gts&&W.gts.row,Z=d&&d.length>X&&d[X].es,S,P;if(a&&d&&Z){var U;if(d.length===1){for(U=0;U<a.length;U++){S=(a[U].items&&a[U].items.length>0)?a[U].items[0].idx:-1;P=(S>-1&&Z.length>S)?Z[S].n:null;if(P&&S>-1){Q[P.toLowerCase()]=S;O[S]=U;}}}else{if(d.length>1){var V=a.length;for(U=0;U<V;U++){S=(a[U].items&&a[U].items.length>0)?a[U].items[0].idx:-1;var b=(U+1===V)?-1:((a[U+1].items&&a[U+1].items.length>0)?a[U+1].items[0].idx:-1);if(b>-1){if(S===b){continue;}else{P=(Z.length>S)?Z[S].n:null;if(P&&S>-1){Q[P.toLowerCase()]=S;O[S]=U;}}}else{if(U>0){var T=(a[U-1].items&&a[U-1].items.length>0)?a[U-1].items[0].idx:-1;if(S!==T){P=(Z.length>S)?Z[S].n:null;if(P&&S>-1){Q[P.toLowerCase()]=S;O[S]=U;}}}else{if(U===0){P=(Z.length>S)?Z[S].n:null;if(P&&S>-1){Q[P.toLowerCase()]=S;O[S]=U;}}}}}}}}}return Q;},setFontByDPI:function N(){if(this.setFontByDPIFlag){return ;}var T=this;T.setFontByDPIFlag=true;T.hoverBubbleRadiusLarger=5;T.bubbleStrokeWidth=2;T.baseMaxBubbleSizeAuto=12;T.baseMaxBubbleSizeManual=24;T.polygonStrokeWidth=1;T.highlightPolygonStrokeWidth=2;T.borderSpace=5;T.tooltipFontSize=12;T.tooltipBorderWidth=1;T.tooltipBorderRadius=5;T.errMsgFontSize=16;T.bias=30;T.tooltipRightShadowWidth=4;var a=T.xtabModel,X=(a&&a.docModel),P=false,O=false;if(X){P=X.zt&&(parseInt(X.zt,10)===2);var W=X.defn&&X.defn.layouts,R,Q;for(Q in W){if(W.hasOwnProperty(Q)&&W[Q]&&W[Q].loaded){R=W[Q];break;}}if(R&&R.hasOwnProperty("fch")){O=R.fch;}}if(P&&O){var V=149;if(mstrMobileApp!==undefined){V=mstrMobileApp.getDeviceDPIX();}var U=149;var S=1;if(V>0){S=V/U;}if(S>1){T.hoverBubbleRadiusLarger*=S;T.bubbleStrokeWidth*=S;T.baseMaxBubbleSizeAuto*=S;T.baseMaxBubbleSizeManual*=S;T.polygonStrokeWidth*=S;T.highlightPolygonStrokeWidth*=S;T.borderSpace*=S;T.tooltipFontSize*=S;T.tooltipBorderWidth*=S;T.tooltipBorderRadius*=S;T.errMsgFontSize*=S;T.bias*=S;T.tooltipRightShadowWidth*=S;var Z=T.tooltip,Y=Z.childNodes[0];Z.style.fontSize=T.tooltipFontSize+"px";Z.style.borderWidth=T.tooltipBorderWidth+"px";Z.style.borderRadius=T.tooltipBorderRadius+"px";Z.style.boxShadow=3*S+"px "+3*S+"px "+4*S+"px RGBA(0,0,0,0.45)";Y.style.margin=5*S+"px "+7*S+"px";}}},isTouchedOnWidget:function K(S){if(!S){return false;}var Q=this,P=Q.utils.getTouchXYOnWidget(S.pageX,S.pageY,Q),O=P.touchX,R=P.touchY;if(O>0&&O<Q.getWidth()&&R>0&&R<Q.getHeight()){return true;}return false;},getAttrFormIndices:function F(){var U=this,S=U.model,V=S&&S.gts&&S.gts.row,T,R,Q=[];if(V){var P=0;for(T=0;T<V.length;T++){var O=V[T]&&V[T].fs;Q.push([]);if(O){for(R=0;R<O.length;R++){Q[T].push(P++);}}}}else{Q=null;}return Q;},getAreaBubbleAttrIndex:function J(){var Q=this,P=Q.model,R=P&&P.gts&&P.gts.row,O=-1;if(R&&R.length>0){O=0;}return O;},touchMultiBegin:function(S){this.hideTooltip();var Q,P;if(S.evt.touches&&S.evt.touches.length===2){Q=S.evt.touches[0];P=S.evt.touches[1];}else{Q=S;P={pageX:100,pageY:100};}var R=Q.pageX-P.pageX,O=Q.pageY-P.pageY;this.initDiffDiff=R*R+O*O;this.initCenterX=(Q.pageX+P.pageX)>>1;this.initCenterY=(Q.pageY+P.pageY)>>1;this.initScrollX=this._scroller.origin.x;this.initScrollY=this._scroller.origin.y;this.relScaleFactor=1;},touchMultiMove:function(R){var T,S;if(R.evt.touches&&R.evt.touches.length===2){T=R.evt.touches[0];S=R.evt.touches[1];}else{T=R;S={pageX:100,pageY:100};}var V=T.pageX-S.pageX,U=T.pageY-S.pageY,W=V*V+U*U,Y=(T.pageX+S.pageX)>>1,X=(T.pageY+S.pageY)>>1;var P=Math.sqrt(W/this.initDiffDiff);var Q={x:P*(this.initCenterX+this.initScrollX)-Y,y:P*(this.initCenterY+this.initScrollY)-X};var O={scale:P,offset:Q};this.relScaleFactor=P;this.applyTransform(O);},touchMultiEnd:function(P){if(this.relScaleFactor*this.scaleFactor<1){this.relScaleFactor=1/this.scaleFactor;this.applyTransform({scale:this.relScaleFactor},500,this.postScale);}else{if(this.relScaleFactor*this.scaleFactor>2){var O=this.relScaleFactor*this.scaleFactor/2;this.relScaleFactor=2/this.scaleFactor;this.applyTransform({scale:this.relScaleFactor,scaleBack:O},500,this.postScale);}else{this.postScale();}}},applyTransform:function(P,Q,Y){var X=this._scroller;if(Q===undefined){Q=0;}X.scrollEl.style.webkitTransformOrigin="left top";X.transform="scale("+P.scale+","+P.scale+")";var W,V;if(P.offset){W=P.offset.x;V=P.offset.y;}else{var U=P.scaleBack||1;W=this._scroller.origin.x/U;V=this._scroller.origin.y/U;}var O=this.scaleFactor*this.relScaleFactor-1,R=this.getHeight()*O,T=this.getWidth()*O;if(O<0){X.offset={y:{start:R,end:0},x:{start:T,end:0}};}else{X.offset={y:{start:0,end:R},x:{start:0,end:T}};}this._scroller.scrollTo(W,V,Q);if(Y){var S=this;setTimeout(function(){Y.apply(S);S=null;},Q);}},postScale:function(){delete this._scroller.transform;this._scroller.scrollTo(this._scroller.origin.x,this._scroller.origin.y,0);this.scaleFactor*=this.relScaleFactor;this.refreshWidget();},refreshWidget:function(){this.drawMap();this.highlightPoint();},initScroller:function L(O){O.vScroll=true;O.hScroll=true;this._super(O);},getWidgetXY:function G(P){var O=this.utils.getTouchXYOnWidget(P.pageX,P.pageY,this);P.widgetX=O.touchX;P.widgetY=O.touchY;},touchSelectBegin:function I(O){console.log("touchSelectBegin");if(O.evt.ctrlKey){this.touchMultiBegin(O);return ;}this.getWidgetXY(O);this.touchSelectBegin_mouseOver(O);},touchSelectMove:function M(O){console.log("touchSelectMove");if(O.evt.ctrlKey){this.touchMultiMove(O);return ;}this.getWidgetXY(O);this.touchSelectMove_mouseMove(O);},touchSelectEnd:function B(O){console.log("touchSelectEnd");if(O.evt.ctrlKey){this.touchMultiEnd(O);return ;}this.getWidgetXY(O);this.touchSelectEnd_mouseOut(O);},touchSwipeBegin:function D(O){console.log("touchSwipeBegin");this.touchSwipeBegin_mouseDown(O);if(this._super){this._super(O);}},touchTap:function C(O){console.log("touchTap");this.getWidgetXY(O);if(O.count===2){this.touchDblTap_dblClick(O);}else{if(O.count===1){this.touchTap_click(O);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo._TouchGestures","mstrmojo.TouchScroller","mstrmojo._HasTouchScroller","mstrmojo.css");var L=mstrmojo.css;var N=15;function K(R){var Q=mstrmojo.dom.findAncestorByAttr(R.target,"clk",true,this.domNode);return Q||null;}function J(){var R=this._scroller;var T=this.timeSelectorListContainer.width;var Q=this.timeSelectorList.offsetWidth;if(Q>T){this.scrollPast=true;}var U=Q>T?Q-T:0;R.origin={x:0,y:0};R.showScrollbars=true;R.noHScroll=false;R.hScroll=(U!==0&&R.noHScroll!==true)||this.scrollPast;if(R.hScroll){R.offset={x:{start:0,end:U},scrollPast:this.scrollPast};}var S=this.timeSelectorList;this.widget.utils.translateCSS(0,0,false,S);}mstrmojo.VisTimeSeriesTimeSelector=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisTimeSeriesTimeSelector",scrollerConfig:{bounces:false,showScrollbars:true,useTranslate3d:true},scrollPast:false,isAndroidTab:false,offsetx:0,widget:null,markupString:'<div id="{@id}-TimeSelector-Container" class="mstrmojo-timeseries-timeselector-div" style="position:absolute; left:{@offsetx}px; overflow:hidden;"><div id="{@id}-TimeSelector-List" style="position:absolute;left:0;top:0"></div></div>',markupSlots:{timeSelectorListContainer:function(){return this.domNode;},timeSelectorList:function(){return this.domNode.firstChild;}},toggleSelected:function C(U,T){if(!U){return ;}var S=U.style;var V=this.widget;var R=V.utils.rgb2rgbStr(V.formatProp.textClr);var Q=V.utils.rgb2rgbStr(V.formatProp.backgroundClr);if(T){S.backgroundColor=R;S.color=Q;}else{S.backgroundColor="";S.color=R;}},toggleGlowEffect:function B(Q,R){if(!Q){return ;}if(R){L.applyShadow(Q,0,0,20,this.widget.glowColor);}else{L.removeShadow(Q);}},drawTimeSelectorLabels:function H(){var V=this.widget.baseModel.vp.rl;var b=this.chartStatus;if(V){var Y=this.widget,W=Y.margin,e=Y.utils,R=Y.getWidth(),U=0;this.timeSelectorListContainer.width=R-W.l-W.r;this.timeSelectorListContainer.style.width=(R-W.l-W.r)+"px";this.timeSelectorListContainer.style.height=W.t+"px";var X=V.length;var a=(R-W.l-W.r)/(X+1);var Q=Y.id,S=this.timeSelectorList;if(S.childNodes.length==0){Y.currSelection=null;for(var T=0;T<X;T++){var Z=document.createElement("div");Z.id="timeseries-intervals";Z.className="timeseries-intervals";Z.style.fontWeight="bold";Z.style.fontFamily="Roboto";Z.style.fontSize=N+"px";Z.innerHTML=V[T].n;Z.setAttribute("clk","S");Z.setAttribute("value",T);Z.style.position="relative";Z.style.whiteSpace="nowrap";Z.style.cssFloat="left";if(T===0&&b.currSelectionIdx==-1&&!b.usingCustomInterval){this.toggleSelected(Z,true);Y.currSelection=Z;}else{if(!b.usingCustomInterval&&b.currSelectionIdx==T){this.toggleSelected(Z,true);Y.currSelection=Z;}else{this.toggleSelected(Z,false);}}S.appendChild(Z);offsetWidth=Z.offsetWidth;U+=offsetWidth;spaceWidth=offsetWidth<a?a-offsetWidth:20;U+=spaceWidth;if(T==0){S.insertBefore(this.createWhiteSpace(spaceWidth),S.firstChild);U+=spaceWidth;}S.appendChild(this.createWhiteSpace(spaceWidth));}}else{var g=S.childNodes;var f=g.length;for(var T=0;T<f;T++){var Z=g[T];offsetWidth=Z.offsetWidth;U+=offsetWidth;if(T==0){continue;}spaceWidth=offsetWidth<a?a-offsetWidth:20;U+=spaceWidth;if(T==1){g[0].style.paddingLeft=spaceWidth+"px";}T++;g[T].style.paddingLeft=spaceWidth+"px";}}this.timeSelectorList.style.width=U+"px";}},postBuildRendering:function E(){N=Math.round(15*this.widget.utils.getScreenZoomFactor());this.scrollerConfig.scrollEl=this.timeSelectorList;if(this._super){this._super();}this.drawTimeSelectorLabels();J.call(this);},reRender:function I(){this.drawTimeSelectorLabels();J.call(this);},createWhiteSpace:function F(R){var Q=document.createElement("div");Q.style.height="30px";Q.style.position="relative";Q.style.whiteSpace="nowrap";Q.style.cssFloat="left";Q.style.paddingLeft=R+"px";return Q;},initScroller:function M(Q){Q.hScroll=true;this._super(Q);},touchBegin:function D(Q){this.widget.hiddenTooltipAndShowTimeSelector();},touchSelectEnd:function P(R){var Q=this.widget.currSelection;if(Q){this.toggleGlowEffect(Q,false);}},touchSelectBegin:function G(S){var Q=K.call(this,S);if(Q){var R=Q.value;if(R==="S"){this.widget.timeSelectorOnClick(Q);}}},touchTap:function A(S){var Q=K.call(this,S);if(Q){var R=Q.value;if(R==="S"){this.widget.timeSelectorOnClick(Q);}}this.toggleGlowEffect(this.widget.currSelection,false);},destroy:function O(){if(this._super){this._super();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Vis");var H=1;var D=2;var F=3;var J=4;mstrmojo.VisMicroChartBullet=mstrmojo.declare(mstrmojo.Vis,null,{scriptClass:"mstrmojo.VisMicroChartBullet",isDrawAxis:false,margin:{t:0,r:5,b:0,l:5},showHighlightLine:false,themeColor:"#FFFFFF",noBackground:true,isAnimateLines:false,toolTipMain:null,mainWidth:0,mainLeftPos:0,showMinLabel:false,markupString:'<div id="{@id}" class="mstrmojo-Chart {@cssClass}" style="width:{@width};height:{@height};top:{@top};left:{@left};position:relative;"  mstrAttach:mousedown,mouseup,mousemove,click ><canvas width="{@width}" height="{@height}"></canvas><div style="position:absolute;left:0px;bottom:0px;display:none;font:7px Arial;text-align:left;line-height:7px;"></div><div style="width:100%;height:{@height};top:0px;left:0px;position:absolute;display:none;font:10pt Arial;overflow: hidden; text-overflow: ellipsis; white-space:nowrap"></div></div>',markupSlots:{canvas:function(){return this.domNode.firstChild;},minLabel:function(){return this.domNode.childNodes[1];},errorMsg:function(){return this.domNode.childNodes[2];}},postBuildRendering:function C(){if(this._super){this._super();}this.browserSupportsHtml5=this.canvas.getContext;if(!this.browserSupportsHtml5){this.renderErrorMessage(mstrmojo.desc(8126,"Your browser does not support HTML5"));return ;}if(!this.model){this.renderErrorMessage(mstrmojo.desc(8426,"No model provided"));return ;}if(this.model.err||this.model.eg){this.renderErrorMessage(this.model.err||this.model.eg);return ;}this.context=this.canvas.getContext("2d");this.setColorByTheme();this.drawChart();},setColorByTheme:function G(){var L=this.config;var K=mstrMobileApp&&mstrMobileApp.getDeviceDPI()||160;if(this.theme==H){this.bandColor1="#494949";this.bandColor2="#595959";this.bandColor3="#727272";this.refLinePosColor="#FF781D";this.refLineNegColor="#FF781D";this.refLineWidth=K>=160?2:1;this.blueBarPosColor="#00BDFF";this.blueBarNegColor=L.mwNegCol;}else{if(this.theme==D){this.bandColor1="#A5A5A5";this.bandColor2="#B3B3B3";this.bandColor3="#BCBCBC";this.refLinePosColor="#FF781D";this.refLineNegColor="#FF781D";this.refLineWidth=K>=160?2:1;this.blueBarPosColor="#00BDFF";this.blueBarNegColor=L.mwNegCol;}else{this.bandColor1=L.mwBand1||"#999999";this.bandColor2=L.mwBand2||"#BBBBBB";this.bandColor3=L.mwBand3||"#DEDEDE";this.refLinePosColor=L.mwRefLineCol||"#0066ff";this.refLineNegColor=L.mwRefLineCol||"#0066ff";this.blueBarPosColor=L.mwPosCol||"#000066";this.blueBarNegColor=L.mwNegCol||"#ff0000";}}},showTooltip:function A(Q,P){if(!this.config.mbShowTooltip){return false;}var R=this.config.mfMinValue;var V=this.refv;var a=V[2].rv-R;var Y=V[3].rv-R;var M=this.widget._tooltip;var L=this.model;var U=L.mtrcs.items;var W=this.config;if(this.tooltipErrMsg){M.renderErrMsg(this.tooltipErrMsg);M.toggle(true);}else{var T=[];var S;if(W.mstrAssMetric){S=W.mstrAssMetric;}else{S=U[2];}if(W.mbRefLine){T.push({n:'<div><div style="float:left;margin-right:5px;width:12px;height:10px;background-color:'+this.targetColor+';"></div><div style="float:left;">'+S+":</div></div>",v:V[2].v});}else{T.push({n:'<div><div style="float:left;margin-right:5px;width:12px;height:10px;background-color:'+this.targetColor+';"></div><div style="float:left;">'+S+":</div></div>",v:V[2].v});}if(W.mbRefLine){T.push({n:'<div ><div style="float:left;margin-right:10px;width:2px;height:10px;background-color:'+this.refLineColor+';"></div><div style="float:left;">'+U[6]+":</div></div>",v:V[6].v});}M.displayInfo(T,null,true);M.toggle(true);M.setBorderColor(this.targetColor);M.domNode.style.visibility="hidden";M.adjustBulletNameDisplay();}var N=mstrmojo.dom.position(this.domNode,true);var K=mstrmojo.dom.position(this.widget._leftChart.domNode,true);var Z=M.domNode.offsetHeight,b=M.domNode.offsetWidth;var X=0;if((this.getHeight()-Z)%2==0){X=(N.y-K.y+(this.getHeight()-Z)/2);}else{X=(N.y-K.y+(this.getHeight()-Z-1)/2);}if(X<0){X=0;}if(X+Z>this.widget.getHeight()){X=this.widget.getHeight()-Z-5;}var O=0;if(N.x+N.w/2>(K.x+K.w/2)){O=N.x-K.x-b-10;}else{O=N.x-K.x+N.w+10;}if(O<0){O=0;}M.posTo({x:O,y:X});M.domNode.style.visibility="visible";return true;},drawChart:function I(){var x=this.config;var M=x.mfMinValue;var q=this.refv;var g,f,e,d,b;var AA,z,u,t,r;AA=parseFloat(q[2].rv);z=parseFloat(q[3].rv);u=parseFloat(q[4].rv);t=parseFloat(q[5].rv);r=parseFloat(q[6].rv);g=AA-M;f=z-M;e=u-M;d=t-M;b=r-M;var Y=x.mbInvertAxis;var a=x.mbRefLine;var K=x.mbRefBands;var k=x.mbShowTooltip;var Z=this.context;var W;var L;var P=7,h;var Q=0,U=5;if(isNaN(g)||isNaN(f)||isNaN(e)||isNaN(d)){var p=mstrmojo.desc(10860,"Insufficient data to plot the graph");this.errorMsg.innerHTML=p;this.errorMsg.style.display="block";this.minLabel.style.display="none";this.tooltipErrMsg=p;return ;}else{if(g*f>0&&Math.abs(g)>Math.abs(f)||f===0){var p=mstrmojo.desc(10381,"Metric of Bullet is out of the max graph range");this.errorMsg.innerHTML=p;this.errorMsg.style.display="block";this.minLabel.style.display="none";this.tooltipErrMsg=p;return ;}else{this.errorMsg.style.display="none";this.tooltipErrMsg=null;}}var l;var s,w,j;var S,R;var V,O;if(g<=0&&f>=0){W=(this.getWidth()-2*Q)/(f-g);l=Q-g*W;L=this.getHeight()-P-2*U-2;if(K){V=L;O=this.getWidth()-2*Q;S=Q;R=(L)/2-V/2+U;Z.fillStyle=this.bandColor3;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);if(d>g&&d<f){O=(d-g)*W;S=Q;Z.fillStyle=this.bandColor2;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);}if(e>g&&e<f){O=(e-g)*W;S=Q;Z.fillStyle=this.bandColor1;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);}}V=L/2;O=Math.abs(g)*W;S=Q;R=(L)/2-V/2+U;Z.fillStyle=this.targetColor=AA>=0?this.blueBarPosColor:this.blueBarNegColor;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);if(a&&b>=g&&b<=f){V=L;O=2;S=l+b*W;R=(L)/2-V/2+U;Z.fillStyle=this.refLineColor=AA>=0?this.refLinePosColor:this.refLineNegColor;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);}}else{if(g<=0&&f<0){W=(this.getWidth()-2*Q)/(Math.abs(f));l=Q;L=this.getHeight()-P-2*U-2;Y=!Y;if(K){V=L;O=this.getWidth()-2*Q;S=Q;R=(L)/2-V/2+U;Z.fillStyle=this.bandColor3;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);if(d<0&&d>f){O=Math.abs(d)*W;S=Q;Z.fillStyle=this.bandColor2;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);}if(e<0&&e>f){O=Math.abs(e)*W;S=Q;Z.fillStyle=this.bandColor1;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);}}V=L/2;O=Math.abs(g)*W;S=Q;R=(L)/2-V/2+U;Z.fillStyle=this.targetColor=AA>=0?this.blueBarPosColor:this.blueBarNegColor;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);if(a&&b<=0&&b>=f){V=L;O=2;S=l+Math.abs(b)*W;R=(L)/2-V/2+U;S=this.getWidth()-S-O;Z.fillStyle=this.refLineColor=AA>=0?this.refLinePosColor:this.refLineNegColor;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);}}else{if(g>=0&&f>0){if(this.showMinLabel){U=9.5;}else{U=5;}W=(this.getWidth()-2*Q)/f;l=Q;L=this.getHeight()-2*U;if(K){V=L;O=this.getWidth()-2*Q;S=Q;R=(L)/2-V/2+U;Z.fillStyle=this.bandColor3;this.drawRect(Z,S,R,O,V);if(d>0&&d<f){O=d*W;S=l;if(Y){S=this.getWidth()-S-O;}Z.fillStyle=this.bandColor2;this.drawRect(Z,S,R,O,V);}if(e>0&&e<f){O=e*W;S=l;if(Y){S=this.getWidth()-S-O;}Z.fillStyle=this.bandColor1;this.drawRect(Z,S,R,O,V);}}V=L/2;O=g*W;R=(L)/2-V/2+U;S=l;if(Y){S=this.getWidth()-S-O;}Z.fillStyle=this.targetColor=AA>=0?this.blueBarPosColor:this.blueBarNegColor;this.drawRect(Z,S,R,O,V);if(a&&b>=0&&b<=f){V=L;O=2;S=l+b*W;R=(L)/2-V/2+U;Z.fillStyle=this.refLineColor=AA>=0?this.refLinePosColor:this.refLineNegColor;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);}}else{if(g>=0&&f<=0){W=(this.getWidth()-2*Q)/(g-f);L=this.getHeight()-P-2*U-2;l=Q-f*W;Y=!Y;if(K){V=L;O=this.getWidth()-2*Q;S=Q;R=(L)/2-V/2+U;Z.fillStyle=this.bandColor3;this.drawRect(Z,S,R,O,V);if(d<g&&d>f){O=(g-d)*W;S=Q;S=this.getWidth()-S-O;Z.fillStyle=this.bandColor2;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);}if(e<g&&e>f){O=(g-e)*W;S=Q;S=this.getWidth()-S-O;Z.fillStyle=this.bandColor1;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);}}V=L/2;O=Math.abs(g)*W;S=l;R=(L)/2-V/2+U;Z.fillStyle=this.targetColor=AA>=0?this.blueBarPosColor:this.blueBarNegColor;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);if(a&&b<=g&&b>=f){V=L;O=2;S=l+b*W;R=(L)/2-V/2+U;Z.fillStyle=this.refLineColor=AA>=0?this.refLinePosColor:this.refLineNegColor;if(Y){S=this.getWidth()-S-O;}this.drawRect(Z,S,R,O,V);}}}}}if(g<0){V=L;O=2;S=l;R=U;s=0;w=0;j=0;if(Y){S=this.getWidth()-S-O;}Z.fillStyle="#000000";this.drawRect(Z,S,R,O,V);M=M+"";var X=(M=="0")?"":"$";var N=0;for(var o=0;o<M.length;o++){if(M[o]=="."){break;}N++;}for(var o=0;o<M.length;o++){X+=M[o];N--;if(N%3==0&&N>0){X+=",";}}M=X;var T=this.widget.getTextWidthByCanvas(M,this.minLabel);h=T-1;S=l;if(Y){S=this.getWidth()-S-O;}if(S-h/2<=Q){this.minLabel.style.paddingLeft=Q;}else{if(S+h/2<=this.getWidth()-Q){this.minLabel.style.paddingLeft=Math.round(S-h/2)+"px";}else{this.minLabel.style.paddingLeft=Math.round((this.getWidth()-Q-h))+"px";}}this.minLabel.style.bottom=U+"px";this.minLabel.style.fontSize="7pt";if(this.labelColorRGB){this.minLabel.style.color="rgb("+this.labelColorRGB[0]+","+this.labelColorRGB[1]+","+this.labelColorRGB[2]+")";}else{this.minLabel.style.color="";}this.minLabel.innerHTML=M;this.minLabel.style.display="block";}else{this.minLabel.style.display="none";}},convertColor:function E(Q){var O="#";var M=parseInt("0xff");var P=Q&M;M=parseInt("0xff00");var K=((Q&M)>>8);M=parseInt("0xff0000");var S=((Q&M)>>16);var R=S.toString(16);if(R.length<2){R="0"+R;}var N=K.toString(16);if(N.length<2){N="0"+N;}var L=P.toString(16);if(L.length<2){L="0"+L;}O+=R;O+=N;O+=L;return O;},drawRect:function(M,L,O,N,K){L=Math.round(L);O=Math.round(O);N=Math.round(N);K=Math.round(K);M.fillRect(L,O,N,K);},reDrawChart:function B(){var M=this.context,L=this.canvas,N=L.width,K=L.height;M.clearRect(0,0,N,K);this.postBuildRendering();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo._TouchGestures","mstrmojo.TouchScroller","mstrmojo._HasTouchScroller");var b="bold 14px Roboto",W="bold 18px Roboto",O=30,N=1;function E(e){N=e;b="bold "+Math.round(14*N)+"px Roboto";W="bold "+Math.round(18*N)+"px Roboto";O=Math.round(30*N);}function Z(f){var e=mstrmojo.dom.findAncestorByAttr(f.target,"clk",true,this.domNode);return e||null;}function C(){var e=this._scroller;var f=this.height-this.legendBarSwitcher.height-15*N;var g=this.legendListDiv.offsetHeight;if(g>f){this.scrollPast=true;}var j=g>f?g-f:0;e.origin={x:0,y:0};e.showScrollbars=true;e.noVScroll=false;e.vScroll=(j!==0&&e.noVScroll!==true)||this.scrollPast;if(e.vScroll){e.offset={y:{start:0,end:j},scrollPast:this.scrollPast};}var h=this.legendListDiv;this.utils.translateCSS(0,0,false,h);}mstrmojo.VisTimeSeriesLegend=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisTimeSeriesLegend",scrollerConfig:{bounces:false,showScrollbars:true,useTranslate3d:true},multiTouch:true,scrollPast:false,isAndroidTab:false,legendBarWidth:30,isLegendBarOpen:false,isLegendSelected:false,legendSelectedIndex:-1,maxLegendAttrLength:0,widget:null,y_axis_interval:25,markupString:'<div id="{@id}-legend-bar" style="position:absolute;top:{@top};right:{@right};z-index:{@zIndex};" ><div id="{@id}-legend-switcher" class="mstrmojo-timeseries-legend-switcher" clk="S"><canvas id="{@id}-legend-triangle" width="15px" height="17px" style="position:absolute;" ></canvas><div id="{@id}-legend-shadow" class="timeseries-legend-switcher-shadow" style="height:0px; width:0px;position:absolute"></div></div><div class="mstrmojo-timeseries-legend-List-Div" style="overflow:hidden;"><div id="{@id}-legend-List" ></div></div><canvas style="z-index:-1;" clk="C"></canvas></div>',markupSlots:{legendBarDiv:function(){return this.domNode;},legendBarSwitcher:function(){return this.domNode.firstChild;},triangle:function(){return this.domNode.firstChild.firstChild;},legendListDivContainer:function(){return this.domNode.childNodes[1];},legendListDiv:function(){return this.domNode.childNodes[1].firstChild;},legendCanvas:function(){return this.domNode.childNodes[2];}},switchLegendBar:function S(){this.isLegendBarOpen=!this.isLegendBarOpen;this.calculateAndSetLegendWidth();this.widget.reDrawSlaveChartImpl();this.renderLegend(true);C.call(this);},enableLegendGlowEffect:function P(g,f){var h=this.legendListDiv.childNodes[g];var e=f||h.style.color;h.style.font=W;},hiddenLegendGlowEffect:function A(e){var f=this.legendListDiv.childNodes[e];f.style.textShadow="none";f.style.font=b;},toggleTriangle:function d(h){var g=this.triangle,l=g.style,f=g.getContext("2d"),k=this.widget;var j=Math.round(17*N),e=Math.round(15*N);g.height=j;g.width=e;l.top=Math.round(7*N)+"px";l.left=Math.round(8*N)+"px";f.save();f.fillStyle=k.utils.rgb2rgbStr(k.formatProp.textClr,0.75);f.beginPath();if(h){f.moveTo(0,0);f.lineTo(e,j/2);f.lineTo(0,j);f.lineTo(0,0);}else{f.moveTo(0,j/2);f.lineTo(e,0);f.lineTo(e,j);f.lineTo(0,j/2);}f.closePath();f.fill();f.restore();},renderLegend:function G(t){var q=this.model,AC=q.series,l=AC&&AC.length||0,p=this.height,AB=this.utils,f=q.colHeaders,g=this.legendCanvas.getContext("2d"),z=this.legendListDiv,j=this.legendBarSwitcher;this.legendBarDiv.style.width=this.legendBarWidth+"px";this.legendBarDiv.style.height=p+"px";z.style.width=this.legendBarWidth+"px";j.width=this.legendBarWidth;j.height=O;j.style.width=this.legendBarWidth+"px";this.legendCanvas.width=this.legendBarWidth;this.legendCanvas.height=p;if(this.isLegendSelected&&this.legendSelectedIndex>=l){this.legendSelectedIndex=0;this.widget.setLegendSelected(this.isLegendSelected,this.legendSelectedIndex);}if(z.childNodes.length==0){for(var o=0;o<l;o++){var k=document.createElement("div");k.id="legendAttr"+o;k.style.font=b;k.className="timeseries-legendAttr";k.innerHTML=this.widget.getLegendName(f,AC,o);k.setAttribute("clk","LA");k.setAttribute("vIndex",o);k.style.color=this.widget.getSerieColor(o);z.appendChild(k);AB.changeElementSize(k,"height",AB.getScreenZoomFactor());}this.y_axis_interval=Math.max(k.offsetHeight,25);}if(this.isLegendBarOpen){this.toggleTriangle(true);z.style.display="block";this.legendListDivContainer.style.height=(p-j.height-15*N)+"px";this.legendListDivContainer.style.weight=this.legendBarWidth+"px";this._scroller.updateScrollBars();this.utils.translateCSS(0,j.height,false,this.legendListDivContainer);if(this.isLegendSelected){this.enableLegendGlowEffect(this.legendSelectedIndex);}this.legendCanvas.height=p;this.legendCanvas.style.position="absolute";this.legendCanvas.style.top="0px";this.legendCanvas.style.left="0px";this.drawLegendOutline(p,j.height,g);}else{this.toggleTriangle(false);z.style.display="none";this.legendCanvas.height=p;this.legendCanvas.style.position="absolute";this.legendCanvas.style.top="0px";this.legendCanvas.style.left="0px";this.drawLegendOutline(p,j.height,g);g.save();var AA=this.legendBarWidth/2;var w=this.y_axis_interval/2;var e=Math.round(5*N);for(var o=0;o<l&&w+this.y_axis_interval<p-15*N;o++){g.fillStyle=this.widget.getSerieColor(o);w+=this.y_axis_interval;AB.drawArc(this,AA,w,e,0,Math.PI*2,true,true,g);}g.restore();}var u=this.legendBarSwitcher.lastChild;if(t){u.className="timeseries-legend-switcher-shadow";u.style.left=Math.round(15*N)+"px";u.style.top=Math.round(15*N)+"px";u.style.display="";u.style.visibility="visible";}else{u.className="";u.style.visibility="hidden";}},reRender:function K(){this.calculateAndSetLegendWidth();this.height=this.calculateHeight();this.renderLegend(false);this.legendBarDiv.style.top=this.widget.margin.t+"px";C.call(this);},hiddenSwitcherArrowGlowEffect:function I(){var e=this.legendBarSwitcher.lastChild;e.innerHTML="";e.style.visibility="hidden";},drawLegendOutline:function D(e,k,g){var p=this.utils,o=this.widget.formatProp;g.save();g.globalAlpha=0.5;g.strokeStyle=p.rgb2rgbStr(o.textClr);g.lineWidth=2;p.drawHalfRoundedRectangle(this,1,1,this.legendBarWidth,e-2,Math.round(10*N),false,g);g.globalAlpha=1;var l=g.createLinearGradient(0,0,this.legendBarWidth-2,0);var f=p.rgb2rgbStr(o.textClr,0.5)||"#58595B";var j=p.rgb2rgbStr(o.textClr,0.13)||"#222222";l.addColorStop(0,f);l.addColorStop(1,j);g.strokeStyle=l;g.lineWidth=1;var h=k-0.5;p.drawLineSet(this,[{x:2,y:h},{x:this.legendBarWidth,y:h}],false,g);g.restore();},calculateMaxLegendAttrLength:function M(o){var k=this.model,p=k.series,g=p.length,e=k.colHeaders;for(var j=0;j<g;j++){var f=0;var l=this.widget.getLegendName(e,p,j);var h=o?W:b;f=this.widget.getTextWidth(l,h);this.maxLegendAttrLength=Math.max(this.maxLegendAttrLength,f);}this.maxLegendAttrLength=this.maxLegendAttrLength+10;},calculateAndSetLegendWidth:function V(){if(this.isLegendBarOpen){var e=(this.widget.getWidth()-50)*0.3+20;this.legendBarWidth=Math.min(e,this.maxLegendAttrLength);}else{this.legendBarWidth=Math.round(40*N);}this.widget.setlegendStatus(this.isLegendBarOpen,this.legendBarWidth);},calculateHeight:function F(){var e=this.widget.margin;return this.widget.getHeight()-this.widget.masterChartHeight-e.t-e.b;},postBuildRendering:function J(){E(this.utils.getScreenZoomFactor());this.height=this.calculateHeight();var e=this.model.series&&this.model.series.length;if(e==1){this.isLegendSelected=true;this.legendSelectedIndex=0;this.widget.setLegendSelected(this.isLegendSelected,this.legendSelectedIndex);}this.calculateMaxLegendAttrLength(e==1);this.calculateAndSetLegendWidth();this.scrollerConfig.scrollEl=this.legendListDiv;if(this._super){this._super();}this.renderLegend(false);C.call(this);},initScroller:function U(e){e.vScroll=true;this._super(e);},touchBegin:function T(g){this.widget.hiddenTooltipAndShowTimeSelector();var e=Z.call(this,g);if(e){var f=e.value;if(f==="S"){this.switchLegendBar();}else{if(!this.isLegendBarOpen&&f==="C"){this.switchLegendBar();}}}},touchTap:function Y(h){var f=Z.call(this,h);if(f){var g=f.value;if(g==="LA"){var e=mstrmojo.dom.findAncestorByAttr(h.target,"vIndex",true,this.domNode);if(e){this.handleLegendItemTap(parseInt(e.value,10));}}}},touchEnd:function H(f){var e=this;e.hiddenSwitcherArrowGlowEffect();},touchSelectBegin:function B(l){var f=Z.call(this,l);if(f){var g=f.value;if(g==="LA"){var e=mstrmojo.dom.findAncestorByAttr(l.target,"vIndex",true,this.domNode);if(e){var j=(e.value==this.legendSelectedIndex)?W:b;var h=this.widget.getTextWidth(f.node.innerHTML,j);if(h>this.legendBarWidth-12){var k=f.node.offsetTop-this._scroller.origin.y+this.widget.margin.t+this.legendBarSwitcher.height-5;this.widget.showLegendTooltip(f.node);}}}}},touchSelectEnd:function R(e){this.widget.hiddenLegendTooltip();},touchMultiBegin:function Q(e){this.touchSelectEnd(e);},onCrossWidgetMultitouch:function X(){this.widget.hiddenLegendTooltip();this.hiddenSwitcherArrowGlowEffect();},handleLegendItemTap:function L(e){if(this.model.series.length==1){return ;}if(this.isLegendSelected){if(this.legendSelectedIndex===e){this.isLegendSelected=false;this.hiddenLegendGlowEffect(e);this.legendSelectedIndex=-1;}else{this.hiddenLegendGlowEffect(this.legendSelectedIndex);this.legendSelectedIndex=e;this.enableLegendGlowEffect(e);}}else{this.isLegendSelected=true;this.legendSelectedIndex=e;this.enableLegendGlowEffect(e);}this.widget.setLegendSelected(this.isLegendSelected,this.legendSelectedIndex);this.widget.reDrawSlaveChart();},destroy:function a(){if(this._super){this._super();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.VisChartUtils","mstrmojo.VisChartData","mstrmojo.boxmodel");function N(S,R){var O="",P=S.length;if(P!==R.hi.length){return S[0].items[R.hi[0]].n;}for(var Q=0;Q<P;Q++){O+=(Q>0?" ":"")+S[Q].items[R.hi[Q]].n;}return O;}mstrmojo.VisChart=mstrmojo.declare(mstrmojo.Vis,null,{scriptClass:"mstrmojo.VisChart",utils:mstrmojo.VisChartUtils,data:mstrmojo.VisChartData,model:null,prevYLabel:{x:0,y:0,h:0},prevXLabel:{x:0,y:0,w:0},context:null,themeColor:"#000000",highlightColor:"#ff8833",margin:{t:50,r:2,b:30,l:2},offsetLeft:null,xLabelPadding:10,yLabelPadding:10,isDrawAxis:true,drawXAxisLabels:true,drawYAxisLabels:true,isHighlightOnTouch:true,isLinearChart:true,showHighlightLine:true,browserSupportsHtml5:true,multiLine:true,drawGridLines:3,drawHorizontalGridLines:1,drawVerticalGridLines:2,switchSeriesOnTouch:true,seriesIndex:-1,displayMode:0,markupString:'<div id="{@id}" class="mstrmojo-Chart {@cssClass}" style="width:{@width};height:{@height};top:{@top};left:{@left};position:relative;"  mstrAttach:mousedown,mouseup,mousemove,click ><canvas width="{@width}" height="{@height}"></canvas><canvas style="position:absolute;left:0;top:0" width="{@width}" height="{@height}"></canvas><canvas style="position:absolute;left:0;top:0" width="{@width}" height="{@height}"></canvas><div id="{@id}-tooltip" class="mstrmojo-Chart-tooltip"></div></div>',markupSlots:{canvas:function(){return this.domNode.firstChild;},animationCanvas:function(){return this.domNode.childNodes[1];},highlightCanvas:function(){return this.domNode.childNodes[2];},tooltip:function(){return this.domNode.childNodes[3];}},postBuildRendering:function G(){if(this._super){this._super();}this.browserSupportsHtml5=this.canvas.getContext;if(!this.browserSupportsHtml5){this.renderErrorMessage(mstrmojo.desc(8126,"Your browser does not support HTML5"));return ;}if(!this.model){this.renderErrorMessage(mstrmojo.desc(8426,"No model provided"));return ;}if(this.model.err||this.model.eg){this.renderErrorMessage(this.model.err||this.model.eg);return ;}if(this.isLinearChart){this.data.processLinearData(this);}else{this.data.process(this);}this.windowSize=this.model.series[0].rv.length;this.context=this.canvas.getContext("2d");this.highlightContext=this.highlightCanvas.getContext("2d");this.animationContext=this.animationCanvas.getContext("2d");this.utils.fillBackground(this);if(this.windowSize<=1){return ;}this.plot();},getMaxValue:function C(){var O=this.model.mvalues;return O&&O[O.length-1];},getMinValue:function F(){var O=this.model.mvalues;return O&&O[0];},plot:function J(){this.drawChart();if(this.model.err||this.model.eg){return ;}if(this.isDrawAxis){if(this.isTimeSeries||!(this.isAnimateLines&&(!this.multiLine||this.model.series.length===1))){this.drawLabels();}else{this.drawAxis();}}},drawChart:function M(){},drawAxis:function B(){var P=this.utils,S=this.margin,R=this.getWidth(),O=this.canvas.height,Q=this.context;Q.save();Q.strokeStyle=P.getColor(this);Q.lineWidth=2;Q.globalAlpha=0.3;P.drawRectangle(this,S.l,S.t,R-S.l-S.r,O-S.t-S.b);Q.restore();},drawLabels:function E(){if(!this.isDrawAxis||!this.drawYAxisLabels){return ;}var U=this.model,X=this.utils,S=this.margin,Y=U.mvalues,O=U.ylbls,R=Y.length,Q=this.drawGridLines;this.prevYLabel.x=0;this.prevYLabel.y=0;this.prevYLabel.h=0;for(var T=0;T<R;T++){var W=X.getYValue(this,Y[T]);var V=X.addDataLabel(this,O[T],W,this.prevYLabel);var P=Math.floor(W)+0.5;if(V&&(Q&this.drawHorizontalGridLines)&&T>0&&T<R-1){X.drawHighlightLine(this,P);}if(T==R-1&&this.isTimeSeries&&V&&(Q&this.drawHorizontalGridLines)){X.drawHighlightLine(this,P);}}},renderTooltip:function A(d,b,a){if(d<0){this.tooltip.style.display="none";return ;}var R=this.model,f=R.series,Z=this.utils,T=f.length,W=this.seriesIndex,O=R.colHeaders,e=this.tooltip;var Q="";if(!this.multiLine){Q=N(O,f[0])+": "+f[0].v[d];}else{if(this.showHighlightLine){for(var V=0;V<T;V++){Q+=(V===0?"":"<br/>")+N(O,f[V])+": "+f[V].v[d];}}else{Q=N(O,f[W])+": "+f[W].v[d];}}var Y=this.model.categories.items[d];e.innerHTML=Y+"<br/>"+Q;e.style.display="block";var X=e.offsetWidth;var S=b-X/2;var U=this.margin;if(S<U.l){S=U.l;}else{if(S>this.getWidth()-U.r-X){S=this.getWidth()-U.r-X;}}if(this.showHighlightLine){Z.translateCSS(S,0,false,e);}else{var P=Z.getYValue(this,f[W].rv[d])-e.offsetHeight-20;if(P<0){P=Z.getYValue(this,f[W].rv[d]);}Z.translateCSS(S,P,false,e);}},getTouchValue:function L(P,T){var R=this.model,O=this.margin;var S=R.rne-R.rns>0?R.rne-R.rns>1?R.rne-R.rns:2:this.windowSize;var Q=Math.round(((P-O.l)*(S-1))/(this.getWidth()-O.l-O.r-1));return(Q<S)?Q:null;},highlightPoint:function I(P,O){},handleTouchBegin:function H(P,O){if(!this.isHighlightOnTouch||!this.browserSupportsHtml5){return ;}this.tooltipOn=true;this.adjustWidgetOffsets();this.handleTouchMove(P,O);},handleTouchMove:function D(R,Q){var U=this,P=U.model;if(!U.tooltipOn||!U.isHighlightOnTouch||!this.browserSupportsHtml5||this.windowSize<=1){return ;}var T=U.utils.getTouchXYOnWidget(R,Q,U);R=T.touchX;Q=T.touchY;var V=U.margin;if(R<V.l||Q<V.t||Q>U.canvas.height-V.b){return ;}var S=U.getTouchValue(R,Q);if(S!==null){var O=(P.rne-P.rns>1)?P.rns:P.rns-1;if(U.seriesIndex===-1||U.switchSeriesOnTouch){U.seriesIndex=U.utils.getSeriesIndexAndYValue(U,O+S,Q).si;}if(P.series[U.seriesIndex].rv[O+S]===""){return ;}U.prevHighlight=U.currentHighlight;U.currentHighlight=S;U.renderTooltip(S,R,Q);if(this.isTimeSeries){U.highlightPoint(S,R,Q);}else{U.highlightPoint(S,Q);}}},handleTouchEnd:function K(){if(!this.browserSupportsHtml5){return ;}var O=this;if(O.model.err||this.model.eg){return ;}O.tooltipOn=false;O.seriesIndex=-1;O.currentHighlight=null;O.highlightCanvas.height=O.highlightCanvas.height;O.tooltip.style.display="none";},onmousedown:function(O){if(!this.isAndroid){this.handleTouchBegin(O.e.pageX,O.e.pageY);}},onmouseup:function(O){if(!this.isAndroid){this.handleTouchEnd();}},onmousemove:function(O){if(!this.isAndroid){this.handleTouchMove(O.e.pageX,O.e.pageY);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.hash","mstrmojo.GeoLocation","mstrmojo._TouchGestures");var R="\u001F",J="\u001E",F="\u001D",W="\u001C",X="\u001B";function O(Z,Y){if(!!Z&&!!Z.imgNode){var a=Z.imgNode.style;a.opacity=Y;}}var D=mstrmojo.Image.baseCssClass+"-prv";mstrmojo.maps.androidmap.AndroidMap=mstrmojo.declare(mstrmojo.Vis,null,{scriptClass:"mstrmojo.maps.androidmap.AndroidMap",cssClass:"mstr-googleMapView",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@domNodeCssText}" mstrAttach:touchstart></div>',reRenderOnDimensionChg:false,mapRendered:false,firstScreen:true,children:[{scriptClass:"mstrmojo.Image",alias:"imgPreview",cssClass:"prv",cssText:"position:absolute;left:0;top:0;",firstLoad:false,onload:function(){O(this,1);var Y=this;window.setTimeout(function(){Y.parent.postImageProcessing(Y.firstLoad);Y.firstLoad=false;},300);}}],markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onheightChange:function(){this.domNode.style.height=this.getHeight()+"px";},onwidthChange:function(){this.domNode.style.width=this.getWidth()+"px";}},setModel:function K(Y){this.set("model",Y);this.xtabModel=Y;if(Y.data){this.set("gridData",Y.data);}},postImageProcessing:function V(Y){if(Y&&this.controller&&this.controller.takeScreenShot){this.controller.takeScreenShot();}if(this.imgPreview.src!=""&&mstrMobileApp&&mstrMobileApp.hideMapView){window.setTimeout(function(){mstrMobileApp.hideMapView(0);},100);}},ongridDataChange:function(){this.parser=new mstrmojo.Vis.DataParser(this.gridData);delete this.dataMap;},update:function G(a){a=a||this.node;if(a){if(a.data){this.set("gridData",a.data);var Z=this.gridData;if(Z.layoutModel){this.layoutModel=Z.layoutModel;}if(Z.layoutNode){this.layoutNode=Z.layoutNode;}delete Z.layoutModel;delete Z.layoutNode;}var Y=a.defn.fmts||a.defn.units[this.xtabModel.k].fmts;this.width=parseInt(Y.width,10);this.height=parseInt(Y.height,10);this.top=parseInt(Y.top,10);this.left=parseInt(Y.left,10);this.fmts=Y;}if(this.xtabModel){this.initFromVisProps(this.gridData.vp);}this.updated=true;},getMapModel:function(){var Y=mstrApp.getCurrentProjectId(),Z=mstrApp.serverProxy.getSessions();return{pid:Y,sessions:Z,mapId:this.id,hasTarget:false,hostUrl:mstrApp.getConfiguration().getHostUrlByProject(Y)};},getGridModel:function(){var Y=mstrmojo.hash.copy(this.gridData,{});return Y;},initFromVisProps:function S(Y){this.vp=Y;},dispatchMapData:function C(){var Y=this.getMapModel(),Z=this.simplifyGridData();mstrMobileApp.loadMap(JSON.stringify(mstrmojo.hash.copy(Y,{gdProp:Z.prop,infoWindow:{dft:true}})),Z.es,Z.data,"");this.mapRendered=true;},simplifyGridData:function H(){if(this.dataMap){return this.dataMap;}var u=this.gridData,w=[],l=[],Y={row:[],col:[]},f,b,a,t=[],x=[],k=[],g=[],d=[],Z,e,h,r,p,q,s;if(typeof (u.ghs)=="undefined"||(u.gts.row.length==0)){u.eg="no data returned";}if(u.eg){this.dataMap={prop:{},data:"",es:""};}else{for(r=0,e=u.ghs.rhs.items,p=e.length;r<p;r++){for(q=0,h=e[r].items,s=h.length;q<s;q++){g.push(h[q].idx);}w.push(g.join(F));g=[];}for(r=0,e=u.gvs.items,p=e.length;r<p;r++){for(q=0,h=e[r].items,s=h.length;q<s;q++){d.push(h[q].v);d.push(h[q].rv||0);if(h[q].ti!==undefined||h[q].ts!==undefined){v="";if(h[q].ti!==undefined){u.th[h[q].ti].ty=h[q].ty;v=h[q].ti;}v+=X;if(h[q].ts!==undefined){v+=h[q].ts;}d.push(v);}g.push(d.join(W));d=[];}l.push(g.join(F));g=[];}b=u.gts.row;mstrmojo.array.forEach(b,function(j){f={};mstrmojo.hash.copyProps(["n","id","fid","fs","sc"],j,f);Y.row.push(f);g=[];mstrmojo.array.forEach(j.es,function(o){g.push(o.n);});x.push(g.join(W));});t.push(x.join(J));a=u.gts.col;mstrmojo.array.forEach(a,function(j){f={};mstrmojo.hash.copyProps(["n","id","fid"],j,f);Y.col.push(f);g=[];mstrmojo.array.forEach(j.es,function(o){g.push(o.n);});k.push(g.join(W));});t.push(k.join(J));this.dataMap={prop:{vp:u.vp,th:u.th,gts:Y},es:t.join(R),data:w.join(J)+R+l.join(J)};}return this.dataMap;},getModel:function L(){return this.gridData;},handleMarkerSelection:mstrmojo.emptyFn,postBuildRendering:function Q(){this.dispatchMapData();this._super();},rebuildLayout:mstrmojo.emptyFn,resetLayout:mstrmojo.emptyFn,setDimensions:function N(b,a){var d=this.googleMap,Y=d?d.getCenter():null,Z=this._super(b,a);if(d){this.map.style.height=this.getHeight()+"px";this.map.style.width=(this.getWidth()-1)+"px";d.setCenter(Y);}return Z;},unrender:function P(){this.imgPreview.src="";if(this.mapRendered){this.removeMap();this.mapRendered=false;}this._super();},removeMap:function U(){mstrMobileApp.hideMapView("1");},switchToImage:function B(b,a,Z){var Y=this.imgPreview;Y.firstLoad=this.firstScreen;this.firstScreen=false;if(b&&Y.hasRendered){if(Y.src!==b){O(Y,0);Y.domNode.className=D;Y.set("src",b);Y.set("width",a);Y.set("heihgt",Z);}else{if(mstrMobileApp&&mstrMobileApp.hideMapView){O(this.imgPreview,1);this.postImageProcessing(false);}}}else{mstrMobileApp.hideMapView(0);}},hidePreview:function M(){O(this.imgPreview,0);},showPreview:function A(){O(this.imgPreview,1);},closeInfoWindow:function E(){do{mstrApp.closeDialog();}while(mstrmojo.all.mstrMapInfoWindow);},ontouchstart:function I(){if(this.mapRendered){mstrMobileApp.showMapView(0);}},destroy:function T(){var Y=this.parent;while(Y){if(Y._scroller&&Y.scrollMoveListener){}Y=Y.parent;}this._super();if(this.mapRendered){mstrMobileApp.navigateAway();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.url","mstrmojo.Vis","mstrmojo._CanSupportTransaction");mstrmojo.PhotoUploader=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._CanSupportTransaction,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.PhotoUploader",photoNum:0,markupString:'<div id="{@id}" class="mstrmojo-PhotoUploader" style="left:{@left};top:{@top};width:{@width};height:{@height}" mstrAttach:click><div class="actionButton" style="line-height:{@height}">{@n}</div><img class="preview"></img><div class="numberBadge"><div class="badgeText"></div></div></div>',markupSlots:{buttonNode:function(){return this.domNode.firstChild;},previewNode:function(){return this.domNode.childNodes[1];},badgeNode:function(){return this.domNode.lastChild;},badgeTextNode:function(){return this.domNode.lastChild.firstChild;}},markupMethods:{onphotoNumChange:function(){mstrmojo.css.toggleClass(this.domNode,"empty",this.photoNum===0);if(this.photoNum>0){this.badgeTextNode.innerHTML=this.photoNum;}}},preBuildRendering:function(){this._super();var E=this.getDataParser(),J=E.getRowTitles(),C=E.getColTitles(),F,I,H,G,D,B;if(J.size()<3&&C.size()<1){mstrmojo.alert("Incorrect grid template structure!");return false;}if(E.getTotalRows()<10){mstrmojo.alert("At least 10 rows required!");return false;}F=E.getRowHeaders(0);I=J.getTitle(0);H=J.getTitle(1);D=I.getUnitId();B=H.getUnitId();G=C.getTitle(0).getHeaderValues()[0];this.cellInfo=[{atid:D,form_id:I.getFormId(),ui:0},{atid:B,form_id:H.getFormId(),ui:(D==B)?0:1},{metric_id:G.oid}];this.photoNum=0;this.n=mstrmojo.desc(8470);return true;},setModel:function(B){this.model=this.txModel=B&&B.docModel;},getKeyContext:function(B){return{o:parseInt(B,10)};},getUpdateObject:function(){var B=this.getUpdatedValues(),H=2,I=[],J=this.cellInfo,F;for(F in B){var D=B[F],C=mstrmojo.string.encodeXMLAttribute(String(D.v[0])),G=mstrmojo.string.encodeXMLAttribute(String(D.v[1])),E="1";I.push({rowOrdinal:D.o,attId:J[0].atid,formId:J[0].form_id,unitIndex:J[0].ui,newValue:C},{rowOrdinal:D.o,attId:J[1].atid,formId:J[1].form_id,unitIndex:J[1].ui,newValue:G},{rowOrdinal:D.o,colOrdinal:0,newValue:E});}return{manipulation:H,nodeKey:this.k,sliceId:this.sid,cells:I,autoRefresh:false};},getUpdates:function A(){var D=[],L=this,E,G,K=false,C=this.getUpdatedValues(),I,J=1,F=2,B=9,H=1,M=this.cellInfo;D.push('<gr rw_tree_type="'+this.defn.tt+'" rw_node_key="'+L.k+'" slice_id="'+(L.sid||0)+'">');for(E in C){if(C.hasOwnProperty(E)){I=C[E];for(G=0;G<2;G++){D.push('<cli ax="1" attribute_id="'+M[G].atid+'" form_id="'+M[G].form_id+'"><updt types="'+J+'" ordinal="'+I.o+'" value="'+I.v[G]+'" dt="'+B+'"/></cli>');}D.push('<cli cordinal="0" metric_id="'+M[2].metric_id+'"><updt types="'+F+'" rordinal="'+I.o+'" value="1" dt="'+H+'"/></cli>');K=true;}}D.push("</gr>");if(!K){D=[];}return D.join("");},photoUploaded:function(B,E){mstrMobileApp.setWaitScreenVisibility(false);var C=mstrmojo.url.getAbsoluteURL(B,mstrApp.getConfiguration().getCurrentProjectWebServerUrl()),F=E,D=this.photoNum;this.previewNode.src=C;this.dataChanged(D,{},{v:[C,F]});this.set("photoNum",D+1);},touchTap:function(){this.onclick();},onclick:function(){if(this.photoNum===10){mstrmojo.alert("can upload at most 10 photos");}else{var B={serverUrl:mstrApp.getConfiguration().getTaskUrlByProject(mstrApp.getCurrentProjectId()),descs:{ADD_PHOTO:mstrmojo.desc(8470),TAKE_NEW_PHOTO:mstrmojo.desc(8471),CHOOSE_FROM_GALLERY:mstrmojo.desc(8472),DONE:mstrmojo.desc(8473),CANCEL:mstrmojo.desc(221)}};mstrMobileApp.uploadPhotos(JSON.stringify(B),'mstrmojo.all["'+this.id+'"].photoUploaded');}}});}());(function(){mstrmojo.requiresCls("mstrmojo.AndroidXtab","mstrmojo._IsInteractiveGrid");mstrmojo.AndroidInteractiveGridXtab=mstrmojo.declare(mstrmojo.AndroidXtab,[mstrmojo._IsInteractiveGrid],{scriptClass:"mstrmojo.AndroidInteractiveGridXtab"});}());(function(){mstrmojo.requiresCls("mstrmojo.AndroidXtab");mstrmojo.AndroidXtabStandalone=mstrmojo.declare(mstrmojo.AndroidXtab,null,{scriptClass:"mstrmojo.AndroidXtabStandalone"});}());(function(){mstrmojo.requiresCls("mstrmojo.AndroidXtab","mstrmojo._IsInteractiveGrid","mstrmojo._Formattable","mstrmojo._IsDocXtab");mstrmojo.DocInteractiveGridXtab=mstrmojo.declare(mstrmojo.AndroidXtab,[mstrmojo._IsInteractiveGrid,mstrmojo._Formattable,mstrmojo._IsDocXtab],{scriptClass:"mstrmojo.DocInteractiveGridXtab",formatHandlers:{domNode:["RW","T","font"],msgNode:["D"],viewport:["D","B","fx"]}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo.MetricSlider","mstrmojo.MetricQualification","mstrmojo.SearchBoxSelector","mstrmojo.TextBoxSelector","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.mstr.EnumDataType","mstrmojo._IsSelectorTarget","mstrmojo.elementHelper","mstrmojo.MetricSelectorUtility","mstrmojo.mstr.EnumDSSXMLBaseFormType");mstrmojo.requiresDescs(4729,4730,4732,4733,4734,4735,5225,5443,6738,8967,12297);var L=mstrmojo.array,P=mstrmojo.hash,p=mstrmojo.dom,AQ=mstrmojo.expr,AA=AQ.BFTP,AR=0,AM=1,AU=2,AF=3,l=4,r=5,AH=6,f=7,AC=8,AJ=9,S=10,A=11,Y=mstrmojo.mstr.EnumDataType,Ac=mstrmojo.elementHelper,b=Ac.ELEM_ALL_ID,Ad=mstrmojo.func.wrapMethods,D=mstrmojo.mstr.EnumDSSXMLBaseFormType.DssXmlBaseFormHTMLTag,x=1,N=4,AE=12,Ab=47,AK=3076,e=3077,C=257;mstrmojo.DocSelectorEvtType=null;var T={};T[f]="MetricSlider";T[AC]="MetricQualification";T[AJ]="SearchBoxSelector";T[S]="TextBoxSelector";var Ah=2;var t=function t(){var Ai={type:parseInt(this.type,10),src:this.k,ck:this.ck,ctlKey:this.ckey,tks:this.tks,include:this.include,isUConDS:!!this.defn.dsTks};if(this.style===AC||this.style===f){mstrmojo.hash.copy(Ai,{srcid:this.srcid,srct:this.type,f:this.f,ft:this.ft,qt:this.qt,unset:!!this.unset,cs:this.cs});}return Ai;},AI=function AI(){var Ai=this.node.defn,Al=this.node.data;var Am={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:Ai.srcid||"",dataSourcesXML:Ai.dsrc||"",browseFlags:1};var Ak=this,Aj={success:function(An){Ak.bGetElems=true;Ak.set("wait",false);if(An&&An.es){Al.elms=(Ai.srcid)?Ac.buildElemsTerseID(An.es,Ai.srcid,true):An.es;var Ao=Ak.parent,Ap=Ao&&Ao.parent;if(Ai.sec&&Al.ces&&Al.elms&&Al.elms.length>0&&Ao){Ao.set("count",Ac.buildElemsCountStr(Al.ces,Al.elms));}if(Ak.hasRendered){Ak.refresh();if(Ak.isInFilterPanel()){if(Ao&&Ao.defn.ttl){Ao.updateContentHeight();}if(Ap&&Ap.refreshFP){Ap.refreshFP();}}}}},failure:function(An){mstrmojo.alert(An.getResponseHeader("X-MSTR-TaskFailureMsg"));}};this.set("wait",true);mstrmojo.xhr.request("POST",mstrConfig.taskURL,Aj,Am,false,null,true);},U={getWidgetClass:function B(Al,Ak,Aj){var Ai=T[Ak];if(Ai&&Ai.constructor===Array){Ai=Ai[Aj?0:1];}return Ai;},getWidgetConfig:function K(Ao,Ak,Am,Ai){var Ap=Ak===2?false:Am.horiz,An=Ao.getFormats(),Aq=An&&An.height,Al={scriptClass:this.getWidgetClass(Ao,Ak,Ap),docSelector:Ao,enabled:this.enabled,multiSelect:Am.multi,isHoriz:Ap,include:Am.include,itemWidthMode:Am.iwm,allIdx:L.find(Ai,"v",mstrmojo.elementHelper.ELEM_ALL_ID),noneIdx:Am.include?-1:L.find(Ai,"v",mstrmojo.elementHelper.ELEM_ALL_ID),renderAllItems:!Aq,onchange:function Aj(){if(!Ao._inSyncPhase){Ao.selectorControlChange(this);}}};if(Al.noneIdx!==-1){Al.allIdx=-1;}if(An&&Ak===mstrmojo.DocSelector.STYLES.PULLDOWN){if(An.color){Al.itemCssText="color: "+An.color+";";}if(An.font){Al.itemCssText=(Al.itemCssText||" ")+"font:"+An.font;}if(mstrApp.isExpress){Al.cssTextClass="express";}}return Al;},newSelectorWidget:function AX(Ar){var Ao=Ar.style,Ak=Ar.node,Aq=Ak.defn,An=Ak.data,Ai=An.elms||[],Aj,Ap=this.getWidgetConfig(Ar,Ao,Aq,Ai),Am=Ap.scriptClass;if(!Am){Aj=new mstrmojo.Label({cssClass:"unsupported",text:"This selector is not supported."});}else{delete Ap.scriptClass;var Al=P.walk(Am,mstrmojo);Aj=new Al(Ap);}return Aj;},getCekEvtListener:function AV(Aj,Ai){return function(Ak){var Am=[],Al=this.node.data.elms;L.forEach(Ak.value,function(Ao){var An=L.find(Al,"v",Ao);if(An>-1){Am.push(An);}});this.handleActionInSyncPhase(function(){if(Ai&&Ai.select){Ai.select(Am);}});};},newAndInitWidget:function o(Am){var Ao,Ak=Am._cekEvtListener,Aj=Am.node,Ai=Aj.defn,Al=Am.id,An;if(Ak){Ai.detachEventListener(Ak);delete Am._cekEvtListener;}Ao=this.newSelectorWidget(Am);if(Ao){An=this.getCekEvtListener(Am,Ao);}Al=An.cekContextId||Al;An=An.cekEvtListener||An;if(An){Am._cekEvtListener=Ai.attachEventListener("cekChange",Al,An);}Am.addChildren(Ao);return Ao;},updateWidget:function AS(Aj){var Ai=Aj.children,Ak=Ai&&Ai[0];if(!Ak){Ak=this.newAndInitWidget(Aj);}else{Ak.set("enabled",this.enabled);}return Ak;}};function AO(Ai){return Ai.some(function(Aj){return this.style===Aj;},this);}function R(){var Ai=this;return Ai.model.getDatasetUnits(["mx"],function(Aj){return Aj.did===Ai.defn.srcid;})[0]||{};}mstrmojo.DocSelector=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,U],{scriptClass:"mstrmojo.DocSelector",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocSelector {@cssClass} {@extCls}" nm="{@n}" title="{@tooltip}" style="{@domNodeCssText}"><div class="filter" style="{@filterNodeCssText}"></div><div class="wait" style="display:none;z-index:100;position:absolute;top:0;left:0;width:100%;height:100%"></div><div class="content" style="{@contentNodeCssText}"></div></div>',markupSlots:{filterNode:function(){return this.domNode.firstChild;},contentNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode.lastChild;},wIconNode:function(){return this.domNode.childNodes[1];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onenableChange:mstrmojo.Widget.enabledMarkupMethod,onincludeChange:function(){mstrmojo.css.toggleClass(this.domNode,"strikeout",!this.include);},onwaitChange:function(){mstrmojo.css.toggleClass(this.domNode,"wait",!!this.wait);this.wIconNode.style.display=((this.wait)?"block":"none");}},_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},ckey:null,ck:null,tks:null,style:0,selIdx:null,extCls:"",min:-1,max:-1,bGetElems:false,n:"",_inSyncPhase:false,init:function w(Ai){this._super(Ai);if(mstrmojo.dom.isIE){this.formatHandlers=this._ieformatHandlers;}this.n=Ai.node.defn.n;},_fetchOnInit4UCOnDS:function AG(Ai){if(!this.bGetElems&&parseInt(this.node.defn.subTp,10)===Ah){AI.apply(this);Ai=this.node.data.elms;}return Ai;},initControlInfo:function F(){var Ak=this.node,Al=Ak.data,Ao=Ak.defn,Ai=Al.elms,Am=Al.ces;var Ap=["include","ckey","ck","tks","style","multi","showall"];Ai=this._fetchOnInit4UCOnDS(Ai,Al);this.type=Ao.ct;var Aq=Ao.fmts;if(Aq){var Ar=Aq.width;if(!Ar||parseInt(Ar,10)<=0){Aq.width="95px";}}P.copyProps(Ap,Ao,this);var Aj=this.selIdx={},An=Ao.multi;if((this.include||Ao.style===AM)&&An&&L.find(Am,"v",mstrmojo.elementHelper.ELEM_ALL_ID)>-1){Am=Ai;}if(Am){var As={};L.forEach(Am,function(At){As[At.v]=true;});L.forEach(Ai,function(Au,At){if(As[Au.v]){Aj[At]=true;}});}if(Ao.min>=0){this.min=Ao.min;}if(Ao.max>=0){this.max=Ao.max;}},resetFormatHandlers:function I(){this.formatHandlers={contentNode:["RW"]};},_getSelectionCount:function Z(Ai){return P.keyarray(Ai.selectedIndices).length;},canApply:function G(Am){var Al=this.defn,An=Al.multi,Ak=this.min,Ai=An?this.max:1,Aj=this._getSelectionCount(Am||this.content);return(Ak>=0&&Ai>=0&&Ak>Ai)||((Ak<0||Ak<=Aj)&&(Ai<0||Ai>=Aj));},_buildEvent:mstrmojo.emptyFn,selectorControlChange:function M(Al){var Ak=t.call(this),Aj=this.isInFilterPanel()&&this.getFilterPanel(),Ai=(Aj&&Aj.defn.cas);this._buildEvent(Ak,Al);if(!this.canApply(Al)){var Am=this.getPanelContainer();if(this.isInSearchBoxPanel(Am)){Am.set("canApplySbp",false);}if(Ai){this.set("err",true);mstrmojo.alert(mstrmojo.desc(12297,"One or more selectors are incorrectly set. Please review the selector(s) and try again."));}if(Aj){Aj.set("applyEnabled",false);}return ;}if(Ai){this.set("err",false);}if(mstrApp.isExpress&&this.node.defn.style===AR){this.handleExpressPulldown();}if(Ak.requireToggle){this.deferredEvt=Ak;this.set("include",false);this.deferredEvt=undefined;}else{this.slice(Ak);}},showInfoWin:function X(An){var Aq=this.node&&this.node.defn,Ak=Aq&&Aq.ifw,Aj=this.model,Al=[].concat(Aj.getTargetInfoWin(Ak)).concat(Aj.getTargetInfoWin(this.tks));if(Al&&Al.length){var As=this.defn.horiz,Ai=An||this.contentNode,Ap=p.position(Ai),Ar=p.position(this.contentNode),Ao=(As||parseInt(this.defn.style,10)===AM)?null:{x:Ar.x,y:Ap.y,w:Ar.w,h:Ap.h},Am;for(Am=0;Am<Al.length;Am++){Aj.showInfoWin(Al[Am],Ai,As?"v":"h",false,P.copy(Ao));}}},unrender:function j(Ai){delete this.formatHandlers;this._super(Ai);},postBuildRendering:function Ag(){var Ak=this.node.defn.style,Am=this.filterNode.style,Ai=this.contentNode,Aj=this.node.defn;if(this.isInFilterPanel()&&!this.isHorizFP()){this.domNode.style.width=this.contentNode.style.width="100%";if(this.formatHandlers.filterNode){this.filterNode.style.width=this.contentNode.style.width="100%";}this.set("visible",parseInt(Aj.ds,10)===0);}this.handleActionInSyncPhase(this._super,this);if(mstrApp.isExpress&&Ak===AR){this.handleExpressPulldown();}if(this.isInFilterPanel()&&this.parent.adjustFP){this.parent.adjustFP();}if(this.formatHandlers.filterNode){var Al=this.getFormats();if(!Al.width){Am.width=Ai.clientWidth+"px";}if(!Al.height){Am.height=Ai.clientHeight+"px";}}else{Am.display="none";}this.model.attachEventListener("CGBMapChange",this.id,"onCGBMapChange");if(p.isAndroid&&Ak===AM){Ai.style.overflow="visible";}return true;},updateHeight:function AW(){this.contentNode.style.height=this.filterNode.style.height=this.content.getClientHeight()+"px";var Ai=this.parent;if(Ai&&(Ai.defn.ttl!==undefined)&&Ai.updateContentHeight){Ai.updateContentHeight();}},handleExpressPulldown:function E(){var Ak=this.model.getZoomFactor();if(Ak!==1){var Al=this.contentNode.firstChild.firstChild;var Am=parseInt(window.getComputedStyle(Al).height);var Ai=Am*Ak+"px";Al.style.height=Ai;Al.style.lineHeight=Ai;}var Aj=document.createElement("DIV");Aj.setAttribute("class","mstrmojo-ui-Pulldown-arrow");Aj.setAttribute("src","#");this.contentNode.firstChild.appendChild(Aj);},handleActionInSyncPhase:function AT(Ak,Aj){var Ai=this._inSyncPhase;this._inSyncPhase=true;try{if(Aj){Ak.call(Aj);}else{Ak();}}catch(Al){throw ("There was an error handling the selector action in sync phase.");}this._inSyncPhase=Ai;},onCGBMapChange:function AY(Aj){var Ai=Aj.cgbMap;if(!Ai){return ;}var Ak=this.tks;P.forEach(this.defn.cgb,function(Am){var Al=Ai[Am];if(Al&&Ak.indexOf(Al)<0){Ak+="\u001E"+Al;}});this.tks=Ak;},update:function V(Am){this._super(Am);this.node=Am;var At=this.node.defn,Ak=At.style,Ai=this.node.data.elms,Aw=this.parent,Al=(Ak===AM),Ax=(Ak===AJ),Av,Ap;if(At.srct===AE&&At.srcid&&this.model.getBrowseFormTypes&&this.model.getBrowseFormTypes(At.srcid).indexOf(D)>-1){Av=window.document.createElement("span");L.forEach(Ai,function(Ay){Av.innerHTML=Ay.n;Ap=Av.firstChild;Ay.n=Ap&&(Ap.text||Ap.alt)||Ay.n||"";});Ap=null;Av=null;}if(Al&&At.multi){var Aj=L.find(Ai,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(Aj>-1){this.node.data.del={idx:Aj,elem:Ai[Aj]};L.removeIndices(Ai,Aj,1);}}if(At.sec){var Ao=[].concat(Am.data.ces||[]);if(Aw&&(Aw.count!==null&&Aw.count!==undefined)){if(Al){Aw.set("count","");}else{if((Ao&&Ai&&Ai.length)||At.sos){if(!At.include){var As=L.find(Ao,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(As>=0){L.removeIndices(Ao,As,1);}}var Aq={};L.forEach(Ai,function(Ay){Aq[Ay.v]=true;});Ao=L.filter(Ao,function(Ay){return Aq[Ay.v];});var An=Ao,Au;if(!Ax){if(!At.multi){An=Ai;}Au=Ai;}Aw.set("count",Ac.buildElemsCountStr(An,Au));}}}}if(this.content){this.content.allIdx=L.find(this.node.data.elms,"v",b);}this.initControlInfo();var Ar=this.content=this.updateWidget(this);if(!Ar){this.set("visible",false);}this.clearCache();},refresh:function AL(){var Aj=this.parent,Ai=this.node&&this.node.defn;if(Aj&&Aj.generateToolbar){Aj.set((this.isInFilterPanel()?"baseTitle":"title"),Ai.ttl);Aj.generateToolbar();}this._super();},onincludeChange:function a(Au){var As=this.node.defn,Ak=Au.value,An=this.parent.parent.parent,Ar=An.model.getDataService().newUpdate(An);As.include=this.include=Ak;if(An._bufferedSlices){An.applyBufferedSlices(true,Ar);}if(this.style!==f&&this.style!==A){var Al=t.call(this);Al.ckey=this.ckey;Al.changeInclude=true;if(As.srct===AE){var At=this,Ao=this.model,Ap=this.node.k,Am=Ao.getDataService(),Aj=Ao.getSliceCallback(Al),Aq=[Am.getSelectorShowAllAction({ck:As.ck,ckey:As.ckey,type:As.type,showAll:Ak}),Am.getSelectorIncludeAction({ck:As.ck,ckey:As.ckey,type:As.type,include:Ak})],Av=Ad(Aj,{success:function(Aw){At.set("wait",false);Ao.partialUpdate(Aw.data,Ao.getTargetDefn(Ap));if(!At.isInFilterPanel()){At.parent.selectVIUnit(At,true);}}});this.showall=this.defn.showall=Au.value;var Ai=this.deferredEvt;if(!!Ai){Ao.sliceDeferred(Ar,Ai);}Aq=!!Ai?Aq.concat(Ar.actions):(Ar.actions||[]).concat(Aq);this.set("wait",true);Ao.controller.cmdMgr.execute({execute:function(){this.submit(Aq,Av);},urInfo:{extraPuKeys:As.ck.split("\u001E").slice(1),treesToRender:3}});}else{this.slice(Al);}}},getSelectorStyleList:function q(){var Aj=[],Am=this.defn.srct,Ai=this.defn.srcst;if(Am===x||Am===AE||Am===Ab){var An=!this.isInFilterPanel();if(Ai===AK){return[];}Aj=[{n:mstrmojo.desc(4733,"Check Boxes"),v:l},{n:mstrmojo.desc(4730,"Slider"),v:AM}];if(Am===AE){Aj.push({n:mstrmojo.desc(8967,"Search Box"),v:AJ});}if(An){Aj=Aj.concat([{n:mstrmojo.desc(4735,"Link Bar"),v:AH},{n:mstrmojo.desc(4734,"Button Bar"),v:r}]);}Aj=Aj.concat([{n:mstrmojo.desc(4732,"Radio Buttons"),v:AF},{n:mstrmojo.desc(4729,"Drop-down"),v:AR}]);if(An){Aj=Aj.concat([{n:mstrmojo.desc(6738,"List Box"),v:AU}]);}var Al=mstrmojo.vi.ui.DatasetUnitMenuUtils.getUnitFromDataset(this.model.datasets,this.defn.srcid,12),Ak=Al&&L.filterOne(Al.fs,function(Ao){return Ao.idf;});if(Ak&&(Ak.bftp===AA.DATE||Ak.bftp===AA.DATETIME)&&(Al&&!Al.de)){Aj.push({n:mstrmojo.desc(5443,"Calendar"),v:A});}}else{if(Am===N){Aj=[{n:mstrmojo.desc(4730,"Slider"),v:f},{n:mstrmojo.desc(5225,"Qualification"),v:AC}];}}return Aj;},supportsInclude:function u(){var Ai=this.defn;return((Ai.srct===AE&&!this.hasDE)||(Ai.srct===N&&Ai.style===f))&&!this.isSolrSelector();},isSolrSelector:function AZ(){return this.model.isFromSolrCube(this.defn.srcid);},isMetricSelector:function AZ(){return this.defn.srct===N;},isRankMetricSelector:function z(){var Ai=R.call(this).f;return Ai&&typeof Ai==="string"&&Ai.search(/rank/i)===0;},isNumericMetricSelector:function AP(){var Ai=R.call(this).dt;return !Ai||Ai===Y.DataTypeDouble||Ai===Y.DataTypeInteger||Ai===Y.DataTypeCellFormatData;},isAttributeSelector:function AB(){return this.defn.srct===AE;},isDerivedAttributeSelector:function AN(){return this.defn.srct===AE&&this.defn.srcst===e;},isAttrQualSelector:function g(){return this.defn.srct===AE&&this.defn.style===A;},isRecursiveAttributeSelector:function d(){return this.defn&&this.defn.srct===12&&this.defn.srcst===3076;},allowsOrientationChange:function AD(){return !this.isAttrQualSelector()&&!AO.call(this,[AJ,AU,AR,AM,f,AC]);},isSearchBox:function H(){return AO.call(this,[AJ]);},isAttrElemListSelector:function Aa(){return this.defn.srct===AE&&this.defn.style!==A;},slice:function Q(Ak){var Ai=this.model;if(Ai.closeSelWarnFlag){Ai.closeSelWarnFlag(this.k);}if(this.isInFilterPanel()){var Aj=this.getFilterPanel();if(Aj&&!Aj.defn.cas){Aj.bufferSlice(Ak);return ;}}var Al=this.getPanelContainer();if(this.isInSearchBoxPanel(Al)){Al.parent.bufferSlice(Ak);Al.set("canApplySbp",Al.canApplySearchBoxPanel());return ;}Ai.slice(Ak);},isInFilterPanel:function h(){var Ai=this.parent;return(Ai&&Ai.isInFilterPanel&&Ai.isInFilterPanel())||false;},isHorizFP:function Ae(){var Ai=this.parent;return(Ai&&Ai.isHorizFP&&Ai.isHorizFP())||false;},getFilterPanel:function Af(){var Ai=this.parent;return(Ai&&Ai.getFilterPanel&&Ai.getFilterPanel())||null;},isInSearchBoxPanel:function(Ai){var Aj=Ai||this.getPanelContainer();return Aj&&(Aj.isSbp||(Aj._isSearchBoxPanel&&Aj._isSearchBoxPanel()));},getPanelContainer:function(){var Ai=mstrmojo.EnumRWUnitType,Aj;for(Aj=this.parent;Aj&&Aj.defn;Aj=Aj.parent){if(parseInt(Aj.defn.t,10)===Ai.PANEL){return Aj;}}return null;},clearSelector:function O(Aq){var Ap=t.call(this),Ao=[b],Ai=this.node.data.elms||[],An="\u001E",Aj=this.style,Ak=this.defn.include,Al=this.isSelectAll&&this.isSelectAll();if(Aj===AJ){Ap.eid=Ao.join(An);this.defn.set("cek",[]);}else{if(Aj===f||Aj===AC){Ap.cs="";Ap.ckey=this.ckey;Ap.unset=true;this.node.defn.set("cek",{cs:null,qua:this.qua,include:Ak,f:null,ft:null});}else{if(Aj===A){Ap.unset=true;Ap.ckey=this.ckey;var Am=[{v:""},{v:""}];this.node.defn.set("cek",{cs:Am});}else{Ap.eid=Ao.join(An);if((Ak||Aj===AM)&&this.multi){L.forEach(Ai,function(As){var Ar=As.v;if(Ao[0]!==Ar){Ao.push(Ar);}});}this.node.defn.set("cek",(Ak||Aj===AM)?Ao:[]);}}}if(this.defn.sec&&Aj!==AM){this.parent.set("count",Aj===AJ?"":Ac.buildElemsCountStr(Ao,Ai));}Ap[Aq?"forceApply":"forceBuffer"]=true;if(Al){Ap.ignoreTargetData=true;}this.slice(Ap);},allowsTogglingMultiSelect:function k(){return AO.call(this,[AR,r,AH,AJ,AM,AU]);},allowsSameSizeItems:function J(){return AO.call(this,[l,AF,r,AH]);},supportsSetTarget:function s(){var Ai=this.defn;return this.isAttrElemListSelector()||(Ai.srct===Ab||Ai.srcst===C);},supportSelectionColor:function W(){return AO.call(this,[AU,AH]);}});mstrmojo.DocSelector.UC_ON_DS=Ah;mstrmojo.DocSelector.STYLES={PULLDOWN:AR,SCROLLER:AM,LIST:AU,RADIO:AF,CHECKBOX:l,BUTTON:r,LINK:AH,METRIC_SLIDER:f,METRIC_QUAL:AC,SEARCH_BOX:AJ,TEXT_BOX:S,ATTR_QUAL:A};}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ResultSetController","mstrmojo.android.controllers._IsReportController");function K(N){return{success:function(O){N.setData(O);}};}function E(N,P){P.push(K(this));var O=this.model;O[N].apply(O,P);}mstrmojo.android.controllers.XtabController=mstrmojo.declare(mstrmojo.android.controllers.ResultSetController,[mstrmojo.android.controllers._IsReportController],{scriptClass:"mstrmojo.android.controllers.XtabController",initModel:function D(){return mstrApp.modelFactory.newModel("Xtab",{controller:this});},createView:function C(O,R){var N=this.model.data.visName;if(N){var P=mstrmojo.AndroidVisList.getVis(N);if(P){R.viz=P;}}var Q=this.view=this.newView("Xtab",R);Q.setModel(this.model);return Q;},afterReprompt:function L(N){this.view.set("gridData",N);this._super(N);},setData:function M(N){var P=this.view;P.unrender();P.set("gridData",N);var O=mstrApp.getContentDimensions();P.width=O.w+"px";P.height=O.h+"px";P.render();},hasPageBy:function H(){var P=this.model.data;if(this.view&&this.view.isTimeSeries){var O=P&&P.phs;return !!(O&&O.show);}else{var N=P&&P.ghs;return !!(N&&N.phs);}},checkCache:function I(O,Q,R,P,N){this._super(O||{ifc:true,ci:this.model.data.ci},Q,R,P,N);},onDrill:function J(N,P){var O=this,Q=this._super;this.checkCache(this.model.data,{did:this.did,t:this.t,st:this.ctrlType},function(){Q.call(O,P);},false,{silent:false,showWait:true});},onSort:function A(N){E.call(this,"sort",[N]);},onPivot:function G(N){E.call(this,"pivot",[N]);},onPageBy:function F(N){this.model.pageBy(N,mstrmojo.func.wrapMethods(K(this),{failure:function(O){mstrApp.onerror(O);}}));},onDownloadGridData:function B(N,O){this.model.downloadGridData(O);}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ResultSetController","mstrmojo.android.controllers._IsReportController","mstrmojo.android.EnumMenuOptions");var B=mstrmojo.android.EnumMenuOptions,A=B.SHARE,L=B.ANNOTATION;mstrmojo.android.controllers.GraphController=mstrmojo.declare(mstrmojo.android.controllers.ResultSetController,[mstrmojo.android.controllers._IsReportController],{scriptClass:"mstrmojo.android.controllers.GraphController",initModel:function E(){return mstrApp.modelFactory.newModel("Graph",{controller:this});},createView:function D(N,P){var O=this.view=this.newView("Graph",P);O.setModel(this.model);return O;},hasPageBy:function J(){var N=this.model&&this.model.data;return !!(N&&N.gd&&N.gd.pb);},reprompt:function F(){this.repromptOrientation=mstrMobileApp.getOrientation();this._super();},afterReprompt:function M(N){this.view.setGraphData(N);this._super(N);},onPageBy:function G(N){var O=this.view;this.model.pageBy(N,{success:function(){O.refresh();},failure:function(P){mstrApp.onerror(P);}});},setData:function K(N){this.model.setData(N);this.view.refresh();},beforeViewVisible:function I(N){if(this.repromptFlag&&(this.repromptOrientation!==mstrMobileApp.getOrientation())&&N){delete this.repromptFlag;delete this.repromptOrientation;this.refresh();}},beforeViewHidden:function H(N){mstrmojo.GraphBase.hideTooltips();},handleMenuItem:function C(O,N){if(O!==A&&O!==L){this.view.syncTooltips(0,0);}this._super(O,N);}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.fe.FilterExprTree","mstrmojo.fe.AndOrNode","mstrmojo.fe.RelationNode","mstrmojo.fe.DynamicNode","mstrmojo.fe.ConditionNode");var K=mstrmojo.expr.ET;mstrmojo.fe.RelationFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RelationFilterExprTree",nodeClassMap:{14:mstrmojo.fe.AndOrNode,15:mstrmojo.fe.RelationNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},getItemIdentityProp:function(L){if(L.ph){return"ph";}if((L.et===10||L.et===12)&&L.dmt===4){return K.RLS;}return L.et;},isEditable:function J(M){var L=false;switch(M&&M.et){case K.RLS:L=true;break;}return L||this._super(M);},getItemConfig:function(O,L,P){var M=this._super(O,L,P),N=(O.et===K.RLS||!!O.relation);if(N){M.itemFunction=P.itemFunction;}return M;},newCondition:function E(M){var L=this.getSelectedItemWidget();if(M&&M.ph&&!M.ph.idx&&microstrategy.bones.rwb_viewer){M.ph.idx=microstrategy.bones.rwb_viewer.nextPhIndex++;}if(L&&L.selected&&L.newCondition){return L.newCondition(M);}else{return this._super(M);}},createSet:function D(M,L){var N=L.rq,O=L.cq;if(N&&O){this.remove(O);if(L.isMetric){mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],N,O);N=O;}else{N.nds=[O];}this.add([N],M[0]);}},removeSet:function G(L){var M=L.data,N=[M];this.remove(M);if(M.nds&&M.nds.length>0){N=M.nds;}else{delete M.dmy;delete M.relation;delete M.applySubExpr;delete M.relation;delete M.useSchema;delete M.dmt;}this.add(N,0);},nameFactory:{counter:1,names:{},clear:function(){this.resetCounter();this.names={};},resetCounter:function C(){this.counter=1;},isNameExist:function I(L){return !!this.names[L];},setName:function H(L,M){this.names[L]=M;},changeName:function B(M,L,N){this.removeName(M);this.setName(L,N);},getNewName:function F(O,N,Q){var P=N||"",M=Q||"",L;while(this.isNameExist(P+this.counter+M)){this.counter++;}L=P+this.counter+++M;this.names[L]=O;return L;},removeName:function A(L){delete this.names[L];this.resetCounter();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.android.controllers.RootController","mstrmojo.android.controllers.FolderController","mstrmojo.android.controllers.ProjectsController","mstrmojo.android.controllers.SubscriptionsController","mstrmojo.android.controllers.XtabController","mstrmojo.android.controllers.DocumentController","mstrmojo.android.controllers.GraphController","mstrmojo.android.controllers.PromptsController","mstrmojo.android.controllers.PropertiesController","mstrmojo.android.controllers.SettingsController","mstrmojo.android.controllers.TransactionNotificationController");mstrmojo.android.factories.ControllerFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.android.factories.ControllerFactory",newRootController:function C(M){return new mstrmojo.android.controllers.RootController(M);},newFolderController:function F(M){return new mstrmojo.android.controllers.FolderController(M);},newProjectsController:function K(M){return new mstrmojo.android.controllers.ProjectsController(M);},newSubscriptionsController:function E(M){return new mstrmojo.android.controllers.SubscriptionsController(M);},newXtabController:function A(M){return new mstrmojo.android.controllers.XtabController(M);},newDocumentController:function J(M){return new mstrmojo.android.controllers.DocumentController(M);},newGraphController:function D(M){return new mstrmojo.android.controllers.GraphController(M);},newPromptsController:function G(M){return new mstrmojo.android.controllers.PromptsController(M);},newPropertiesController:function I(M){return new mstrmojo.android.controllers.PropertiesController(M);},newSettingsController:function H(M){return new mstrmojo.android.controllers.SettingsController(M);},newTransactionsController:function L(M){return new mstrmojo.android.controllers.TransactionNotificationController(M);},newController:function B(M,O){var N=this["new"+M+"Controller"](O);N.type=M;return N;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.Button","mstrmojo.form");var T=8,O=16,U=4,R=1,J=2,D=4,Q=8,B=16,M=268435456,I=536870912,A=1073741824,H=window.mstrConfig&&!window.mstrConfig.simpleDialog,L=2147755235,K=2147755236;var C="mstrmojo-oivmSprite ";function E(Y,X,W){if(H){mstrmojo.confirm(Y,{confirmBtn:{fn:X},cancelBtn:{fn:W}});}else{if(mstrmojo.confirm(Y)){if(X){X();}}else{if(W){W();}}}}function V(X,W){if(H){mstrmojo.alert(X,W,null,null,null,{allowHTML:true});}else{mstrmojo.alert(X);W();}}function N(W){var X=mstrmojo.findAncestor(this,"scriptClass","mstrmojo.DocInfoWindow");if(!!X){X[W?"registerLock":"releaseLock"](this);}}mstrmojo._DocActionSelector=mstrmojo.provide("mstrmojo._DocActionSelector",{_mixinName:"mstrmojo._DocActionSelector",extCls:"mstrmojo-ActionSelector",type:T,targets:null,initControlInfo:function G(){var W=this.node.defn;this.aa=parseInt(W.aa,10);this.dpTxt=W.dpTxt||{8:mstrmojo.desc(5369),4:mstrmojo.desc(8233),16:mstrmojo.desc(8232)}[this.aa]||"";this.dpCfm=W.dpCfm;this.sac=parseInt(W.sac,10);this.msg=W.msg;this.rsid=W.rsid;this.rst=W.rst;this.node.data.elms=[{n:this.dpTxt,v:this.dpTxt}];if(this._super){this._super();}},selectorControlChange:function(W){if(W.selectedIndex!==0){return ;}this.executeAction();W.select([]);},executeAction:function(){var X=this.aa,W=this,Y=function(){N.call(W,false);};N.call(W,true);if(X===T){if(this.dpCfm){E(mstrmojo.desc(8313),function(){W.onCommit();},Y);}else{W.onCommit();}}else{if(X===U){if(this.dpCfm){E(mstrmojo.desc(8322),function(){W.onDiscard();},Y);}else{W.onDiscard();}}else{this.onRecalculate();}}},postBuildRendering:function(){this._super();this.domNode.ontouchstart=function(W){mstrmojo.css.addClass(W.target,"glow");};this.domNode.ontouchend=function(W){mstrmojo.css.removeClass(W.target,"glow");};},onCommit:function(){var Z=this,a=this.model,X=Z.controller,W=mstrApp.useBinaryFormat;N.call(this,false);if(!W&&!this.validateRequiredObjects()){V(mstrmojo.desc(9200));return ;}var Y=function(b){if((Z.sac&I)>0){X.invalidClientCache();}if((Z.sac&B)>0){var d={did:Z.rsid,objType:Z.rst,forceExec:(Z.sac&M)>0};if((Z.sac&A)>0){d.linkAnswers='<hl mid="'+a.mid+'" srct="2" aopam="1"><prms></prms></hl>';}X.onExecuteNewObject(Z,d);}else{if((Z.sac&Q)>0){X.onReExecute(Z);}else{if(mstrApp.isMobile){X.generateActionToolbar();}a.transactionUpdate(b);}}};mstrmojo.mask.show("Running");a.sendTransactionActions(this.ck,T,a.newCallback({success:function(b){mstrmojo.mask.hide();if(a.txrcd||b.offln){X.offlineTransactionsSubmitted(Z.ck);}if(b.offln){if(W&&!Z.networkToastShowed){Z.networkToastShowed=true;mstrmojo.toast(mstrmojo.desc(9258,"No Network Connectivity")+". "+mstrmojo.desc(9259,"Transaction will be submitted when connectivity is resumed."));}a.transactionUpdate(b);}else{if((Z.sac&R)>0&&Z.msg){if(W){mstrmojo.toast(Z.msg);window.setTimeout(function(){Y(b);},100);}else{V(Z.msg,function(){Y(b);});}}else{Y(b);}}},failure:function(e){var b=mstrmojo.all.mojoAlertx9;if(b){b.destroy();}mstrmojo.mask.hide();if(a.txrcd){X.offlineTransactionsSubmitted(Z.ck);}var d=4294967296+parseInt(e.code,10);if(d===L){if(W){Z.validateRequiredObjects();}V(mstrmojo.desc(9200,"You have some required inputs that are not modified."));}else{if(d===K){var f=mstrmojo.desc(9201,"You haven't made any changes to submit.");if(W){mstrmojo.toast(f);}else{V(f);}}else{V(mstrmojo.base64.decodeHttpHeader(e.message),function(){if(!W){Z.controller.onReExecute(Z,true);}});}}}}));},onDiscard:function F(){var X=this,Y=this.model,W=X.controller;N.call(this,false);Y.txDiscardTargets=this.getTxTargets();Y.sendTransactionActions(this.ck,U,{success:function(Z){Y.transactionUpdate(Z);W.transactionDiscarded(X.ck);},complete:function(){delete Y.txDiscardTargets;if(mstrApp.isMobile){W.generateActionToolbar();}}});},onRecalculate:function(){N.call(this,false);this.model.sendTransactionActions(this.ck,O);},getTxTargets:function S(){var d=this.tks.split("\u001E"),b,W,a,e,X,Y,Z={};for(b=0,W=d.length;b<W;b++){a=d[b];e=1;do{X=this.model.getUnitInstance(a,e++);if(X&&X.checkRequiredObjects){if(X.isPanelStack){for(Y in X.txWidgets){Z[X.txWidgets[Y].id]=1;}}else{Z[X.id]=1;}}else{break;}}while(true);}return Z;},validateRequiredObjects:function P(){var W=true,X;for(X in this.getTxTargets()){W=mstrmojo.all[X].checkRequiredObjects()&&W;}return W;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.elementHelper","mstrmojo.DocSelector","mstrmojo.ui.MultiSelectPulldown");var L=mstrmojo.hash,N=mstrmojo.elementHelper,I=mstrmojo.array,P=mstrmojo.DocSelector.STYLES;var K=0,B=1,C=2,F=4,G=1000;function J(Y){var X=null,T=null,W=0,V,U;for(V in Y){U=Number(V);W++;X=(X===null||X>U)?U:X;T=(T===null||T<U)?U:T;}return W===0||T-X===W-1;}mstrmojo.ListDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.ListDocSelector",formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P","height"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},_buildEvent:function H(s,X){var l=this.node,W=this.defn,h=l.data.elms,Y=[],t=X.multiSelect,Z=X.selectedIndices,f=X.allIdx,b=!!Z[f],p,k,q=[],e=this.include;if(!t){var T=h[X.selectedIndex],g=T.v;Y=[g];q=[g+";"+T.n];}else{if(b){k=h[f].v;Y=[k];q=[k];}else{if(Z[f]){Z[f]=false;}var r=L.keyarray(Z,true).sort(I.numSorter),j={};for(p in r){j[r[p]]=Z[r[p]];}Z=j;L.forEach(Z,function(w,u){if(w){Y.push(h[u].v);q.push(h[u].v+";"+h[u].n);}});}}this.defn.set("cek",Y);if(Y.length>0||!W.nsb||W.nsb===K){if(e&&parseInt(this.style,10)===F&&h&&h.length>G&&Y.length>h.length/2&&!this.isRecursiveAttributeSelector()){s.include=false;s.forceBuffer=true;s.requireToggle=true;var o=[],V=[];I.forEach(h,function(w,u){if(u!==f&&!Z[u]){o.push(w.v);V.push(w.v+";"+w.n);}});s.eid=((parseInt(s.type,10)===1)?V:o).join(N.ELEM_SEPARATOR);}else{s.eid=((parseInt(s.type,10)===1)?q:Y).join(N.ELEM_SEPARATOR);}}else{if(W.nsb===B||!W.showall){s.unset=true;}else{if(W.nsb===C){s.eid=N.ELEM_ALL_ID;}}}var a=mstrmojo.dom.position(X.domNode,true);if(a){s.left=a.x;s.top=a.y;}if(b&&this.multi&&e){I.forEach(h,function(w){var u=w.v;if(Y[0]!==u){Y.push(u);}});}if(W.sec){k=k||N.ELEM_ALL_ID;var d=I.filter(h,function(u){return u.v!==k;}).length,U=I.indexOf(Y,k)>=0||!W.multi?d:Y.length;if(W.style!==mstrmojo.DocSelector.STYLES.SCROLLER){this.parent.set("count",N.buildElemsCountStrByNum(U,d));}}},getCekEvtListener:function S(V,U){var T=V.defn.style;if(T===P.PULLDOWN||T===P.SCROLLER){return function(W){var a=U.items,b={};if(!U.multiSelect){var X=U.selectedIndex=I.find(a,"v",W.value[0]);if(X>-1){b[X]=true;}}else{var Z=U.allIdx;if(Z>-1&&I.indexOf(W.value,a[Z].v)>-1){for(var Y=0;Y<a.length;Y++){b[Y]=true;}}else{I.forEach(W.value,function(e){var d=I.find(a,"v",e);if(d>-1){b[d]=true;}});}}V.selIdx=U.selectedIndices=b;V.handleActionInSyncPhase(function(){U.refresh();});};}return this._super(V,U);},preBuildRendering:function A(){var V=this.node.defn.style,U=L.clone(this.formatHandlers),T=U.contentNode;if(T){if((V===P.RADIO||V===P.CHECKBOX)&&U.filterNode){T.push("fx");T.push("background-color");delete U.filterNode;}if(V===P.LIST){delete T.height;}}this.formatHandlers=U;return this._super();},getWidgetClass:function Q(V,U,T){if(U===P.PULLDOWN){return V.multi?"ui.MultiSelectPulldown":"ui.Pulldown";}return this._super(V,U,T);},getWidgetConfig:function D(Y,W,V,X){var U=Y.getFormats(),T=this._super(Y,W,V,X);if(W===P.SCROLLER){Y.extCls="extSlider";if(mstrApp&&mstrApp.isVI){T.isHoriz=true;}L.copyProps(["height","width"],U,T);}if(W===P.PULLDOWN&&!V.multi){T.isHostedWithin=false;T.onitemSelected=T.onchange;T.allowHTML=false;}return T;},updateWidget:function M(W){var X=this._super(W),T=W.selIdx;var U=X.items=W.node.data.elms;X.selectedIndices=T;if(!X.multiSelect&&U&&U.length){var V=L.keyarray(T);if(V.length===1){X.selectedIndex=Number(V[0]);}else{X.selectedIndices={};X.selectedIndex=-1;}}return X;},isSelectAll:function E(){var W=this.node.data.elms,V=this.children&&this.children[0],X=V.selectedIndices,U=V.allIdx,T=!!X[U],Y=(W[U]&&W[U].v)||N.ELEM_ALL_ID;if(this.include){return T||I.filter(W,function(Z){return Z.v!==Y;}).length===L.keyarray(X).length;}else{return L.isEmpty(X);}},destroy:function R(){var T=this.node.data;this._super();if(T.del){I.insert(T.elms,T.del.idx,T.del.elem);delete T.del;}},isValidSelection:function O(){var V=this.node,W=V.data,U=V.defn,X=W.ces,T=this.model;if(!U.multi&&X&&X.length>1&&!this.allowsTogglingMultiSelect()){return false;}if(U.style===mstrmojo.DocSelector.STYLES.SCROLLER&&!J(this.selIdx)){return false;}if(T.isSelWarnFlagOn(this.k)&&X&&X.length===0&&W.elms.length>0){return this.children[0].noneIdx&&this.children[0].noneIdx>-1;}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo.DocSelector","mstrmojo._IsSelectorTarget","mstrmojo.Serializer","mstrmojo._IsPanelStack","mstrmojo._HasBuilder","mstrmojo.array","mstrmojo.css","mstrmojo.hash");function E(N,M){var L=mstrmojo.array.find(N.node.data.panels,"k",N.selectedKey);L+=(M||0);N.set("selectedIdx",L);}function H(L){L.set("hasNextPanel",(L.selectedIdx<(L.node.data.panels.length-1)));L.set("hasPreviousPanel",(L.selectedIdx>0));}mstrmojo.DocPanelStack=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo._HasBuilder,mstrmojo._IsPanelStack],{scriptClass:"mstrmojo.DocPanelStack",markupString:'<div id="{@id}" k="{@k}" title="{@tooltip}" nm="{@n}" class="mstrmojo-DocPanelStack {@cssClass}" style="{@domNodeCssText}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["RW","B","overflow"]},model:null,hasNextPanel:false,hasPreviousPanel:false,applyEnabled:false,clearEnabled:true,renderMode:"onshow",n:"",node:null,selectedIdx:undefined,selectedKey:"",init:function K(L){this._super(L);E(this);this.node.sw=(this.node.data.panels.length>1&&this.defn.sw);this.n=L.node.defn.n;},onselectedKeyChange:function I(M){var N=this._super(M),L=N.on;if(L._delayRefresh){if(!L.defn.dirtyKeys){L.refresh();}delete L._delayRefresh;}E(this);},updateSelectedIdx:function B(L){E(this,L);},onselectedIdxChange:function G(){H(this);},_bufferedSlices:null,canApply:function A(){var N,M;for(N in this.children){var L=this.children[N];if(!L.children){continue;}for(M in L.children){var O=L.children[M];if(O.defn&&O.defn.ttl!==undefined){O=O.children[1];}if(O&&O.canApply&&!O.canApply()){return false;}}}return true;},bufferSlice:function F(M){var L=this._bufferedSlices=this._bufferedSlices||[];L.push(M);this.set("applyEnabled",this.canApply());},applyBufferedSlices:function D(){var L=this._bufferedSlices;if(!L){return ;}this.model.slice({bufferedSlices:true,tks:(mstrmojo.hash.any(L)||{}).tks,events:L});this.clearBuffSlices();},clearBuffSlices:function(){this._bufferedSlices=null;this.set("applyEnabled",false);},_isFPS:function J(){return !!this.defn.ifp;},clearAllFilter:function C(){var P=mstrmojo.DocSelector.STYLES,L=this;if(!L._isFPS()){return ;}if(!(L.children&&L.children.length)){return ;}for(var O in L.children){var S=L.children[O];if(!S.children){continue;}for(var N in S.children){var T=S.children[N];if(T.defn.ttl!=="undefined"){T=T.children[1];}if(T.model){var R={tks:T.tks,ck:T.ck,ctlKey:T.ckey,unset:true};L.bufferSlice(R);T.node.data.ces=[];T.node.defn.cek=null;T.node.data.cs=[];var M=T.content;if(parseInt(T.node.defn.style,10)===P.SCROLLER){M.min=0;var Q=M.items&&M.items.length;M.max=Q?Q-1:0;}T.update(T.node);T.refresh();}}}},update:function(M){if(this._super){this._super(M);}var L=M.data&&M.data.selKey;if(L&&L!==this.selectedKey){this.defn.newSelKey=L;}},postBuildRendering:function(){this._super();if(this.defn.itb){mstrmojo.css.addClass(this.domNode,"tableControl");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.array","mstrmojo.elementHelper");var I=mstrmojo.array,F=mstrmojo.DocSelector.ELEM_ALL_ID,H=mstrmojo.elementHelper;var C=0,K=1,J=2;var B=1,M=3;function A(O){I.forEach(O,function(P){P.n=P.v;});return O;}mstrmojo.TextBoxDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.TextBoxDocSelector",_ieformatHandlers:{domNode:["font","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["font","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},_fetchOnInit4UCOnDS:function G(){},_getSelectionCount:function L(P){var O=P.items;return O?O.length:0;},_buildEvent:function D(R,Q){var O=[],P=this.defn;I.forEach(Q.items,function(S){O.push(S.v);});if(O.length>0||P.nsb===C){R.eid=O.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}else{R.eid="";}if(P.sec){this.parent.set("count",H.buildElemsCountStrByNum(O.length,0));}},updateWidget:function N(Q){var R=this._super(Q),O=Q.node,P=O.data;R.items=P.vs?A(P.vs.concat()):[];return R;},getWidgetConfig:function E(U,R,Q,T){var P=U.getFormats(),S=U.node.data,O=this._super(U,R,Q,T);O={scriptClass:O.scriptClass,cssText:P.height?"height: "+P.height:"",emptyText:mstrmojo.desc(4325,"Search")+" "+(Q.ttl||""),items:S.vs?A(S.vs.concat()):[],srcid:Q.srcid||"",dsrc:Q.dsrc||"",onitemsChange:function(){if(!U._inSyncPhase){U.selectorControlChange(this);}}};if(!Q.multi){O.maxObjectCount=1;}return O;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.MetricSelectorUtility","mstrmojo.hash","mstrmojo.array");var E=mstrmojo.hash,J=mstrmojo.array;mstrmojo.MetricQualDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.MetricQualDocSelector",_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P","height"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},init:function N(O){this._super(O);this.spm=true;},initControlInfo:function M(){this._super();var P=mstrmojo.MetricSelectorUtility,R=this.node,S=R.data,Q=R.defn;E.copyProps(["srcid","srct"],Q,this);this.qua=S.qt;this.dt=S.dt;var O=P.getOpIdxByfunc(S.f,S.ft);if(O!==-1){this.include=P.getIncludeByOp(O);}},canApply:function D(O){return true;},onquaChange:function H(O){this.node.data.qt=O.value;},_buildEvent:function F(R,Q){var P=[];J.forEach(Q.cs,function(S){P.push(S.v);if(R.dtp===undefined){R.dtp=S.dtp;}});if(P.length){R.cs=P.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}var O=mstrmojo.MetricSelectorUtility.getFuncInfo(Q.opId,Q.qua);R.f=Q.f=O.f;R.ft=Q.ft=O.ft;R.include=this.defn.include=this.include=Q.include;R.ckey=this.ckey;R.srcid=this.srcid;R.srct=this.srct;R.unset=Q.unSet;R.onlyInclude=Q.onlyInclude;if(Q.changeInclude){R.changeInclude=Q.changeInclude;R.forceApply=true;Q.changeInclude=false;}if(Q.changeQual){R.changeQual=Q.changeQual;Q.changeQual=false;}R.qt=Q.qua;this.node.defn.set("cek",{id:this.id,f:Q.f,ft:Q.ft,cs:Q.cs,qua:Q.qua,include:Q.include});},preBuildRendering:function K(){var O=this._super();if(this.isInFilterPanel()&&!this.isHorizFP()){this.children[0].width=this.parent.parent.contentWidth;}return O;},postBuildRendering:function B(){this._super();if(this.formatHandlers.filterNode){var O=this.getFormats();if(!O.height){this.updateHeight();}}},getCekEvtListener:function C(P,O){return function(Q){P.handleActionInSyncPhase(function(){P.set("qua",Q.value.qua);if(P.id!==Q.value.id){O.updateExpr(Q.value);if(P.style===mstrmojo.DocSelector.STYLES.METRIC_SLIDER){P.set("include",Q.value.include);}}});};},updateWidget:function L(S){var T=this._super(S),P=S.node,O=S.selIdx,R=P.data,Q=R.elms;if(T.updateData){T.numFmts=S.defn.numFmts;S.handleActionInSyncPhase(function(){T.updateData({low:R.min,high:R.max,cnt:R.cnt,nov:R.nov},{cs:R.cs,f:R.f,ft:R.ft,qua:R.qt});});}T.items=Q;T.selectedIndices=O;return T;},newAndInitWidget:function I(O){var P=this._super(O);O.attachEventListener("quaChange",P.id,function(Q){this.set("qua",Q.value);});return P;},getWidgetConfig:function G(T,R,Q,S){var P=T.getFormats(),O=this._super(T,R,Q,S);E.copyProps(["height","width","font"],P,O);E.copyProps(["cs","ft"],Q,O);O.fmts=Q.f;O.dt=T.dt;O.qua=T.qua;O.numFmts=Q.numFmts;return O;},isSelectAll:function A(){var Q=mstrmojo.MetricSelectorUtility.OP,P=this.children&&this.children[0],O=P&&(Q._IS_NULL===P.opId||Q._IS_NOT_NULL===P.opId);return P===undefined?true:(!P.cs||P.cs.length===0)&&!O;}});}());(function(){mstrmojo.requiresCls("mstrmojo.maps.androidmap.AndroidMap","mstrmojo.maps.androidmap.AndroidDocMapInfoWindow","mstrmojo.Image","mstrmojo.DynamicClassFactory","mstrmojo.Box","mstrmojo._HasLayout","mstrmojo.DocPanel","mstrmojo.hash","mstrmojo.array","mstrmojo.dom");var G=mstrmojo.dom;var K;var h=0,N=1,W=mstrmojo.hash;function H(l){if(!l||!l.p_fmts){return l;}var k=l.p_fmts;var o=parseInt(k.top)||0;var p=parseInt(k.height)||0;var j=parseInt(l.height)||0;return{top:(o+p-j)+"px",left:k.left,width:l.width,height:l.height,"z-index":k["z-index"]};}function f(q,p){if(q&&p){if(q["z-index"]>p["z-index"]){return false;}var k=parseInt(q.left),u=parseInt(q.top),o=parseInt(q.width),s=parseInt(q.height),j=parseInt(p.left),t=parseInt(p.top),l=parseInt(p.width)||0,r=parseInt(p.height)||0;return((((k<=j)&&(j<k+o))||((j<k)&&(k<j+l)))&&(((u<=t)&&(t<u+s))||((t<u)&&(u<t+r))));}return false;}function O(){if(!mstrApp.renderingMap||(mstrApp.renderingMap===this.id)){mstrApp.renderingMap=this.id;return true;}else{return false;}}function S(){if(mstrApp.renderingMap===this.id){delete mstrApp.renderingMap;return true;}return false;}mstrmojo.maps.androidmap.AndroidDocMap=mstrmojo.declare(mstrmojo.maps.androidmap.AndroidMap,[mstrmojo._Formattable],{scriptClass:"mstrmojo.maps.androidmap.AndroidDocMap",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@domNodeCssText}" mstrAttach:touchstart></div>',formatHandlers:{domNode:["left","top","z-index","height","width","border","border-color","border-style","border-width"]},sc:null,domNodeCssText:"position:relative;",lastSelectedRow:null,hasTarget:function L(){var j=this.getInfoWindowSelectorControl(this.gridData);return !!(j&&j.tks);},postBuildRendering:function Z(){window.mapId=this.id;this._touchListener=mstrmojo.touchManager.attachEventListener("touchesBegin",this.id,function(j){var k=this.openedInfoWindow;if(k){if(!G.contains(this.domNode,j.touch.target,true,document.body)){k.close();}}});return this._super();},destroy:function e(j){var k=this._touchListener;if(k){mstrmojo.touchManager.detachEventListener(k);delete this._touchListener;}if(this.mapRendered){this.removeMap();}this._super(j);},setModel:function P(j){this.doc=j.controller.view;this._super(j);},getController:function b(){return this.doc.controller;},initFromVisProps:function d(j){this._super(j);if(!j){return ;}this.iwDocLayout=(parseInt(j.dl,10)===1);if(j.lyt){this.iwLayoutKey=j.lyt;}},findSelectorTarget:function R(q){if(q&&q.tks){var l=this.xtabModel.docModel,k=q.tks.split("\u001E"),o=0,j=k.length;for(o=0;o<j;++o){var p=l.getTargetDefn(k[o]);if(p[k[o]].ifw){return k[o];}}}return null;},findIntersectingComponents:function D(){var o=this,r,l=this.getFormats();while(o.scriptClass!="mstrmojo.DocSubsection"||o.scriptClass!="mstrmojo.DocInfoWindow"){r=o;o=o.parent;if(!o){break;}var q=o.children,k=(q&&q.length)||0,p=null,j;for(j=0;j<k;j++){p=q[j];if(p!=r&&p.getFormats&&f(H(l),H(p.getFormats()))){return true;}}}return false;},getGridModel:function(){var j=this._super();delete j.layoutModel;delete j.layoutNode;return j;},dispatchMapData:function C(){if(!O.call(this)){this.domNode.innerHTML=mstrmojo.desc(9480,"Only one map visualization is supported at a time");mstrmojo.css.addClass(this.domNode,"noMapVis");return ;}var p=this.doc,j=p.model,l=this.getViewHierarchy(),o=this.getMapModel(),u=this.simplifyGridData(),q=(p.getSupportedLayouts&&p.getSupportedLayouts())||p.getLayouts(),r=!!this.isFullScreenWidget?N:h,t=false,s=p.getCurrentLayout(),k;k=JSON.stringify({did:p.did,ttl:p.ttl,st:p.st,mid:j.mid,ci:j.ci,bs:j.bs,zt:j.zt,defn:j.defn,currlaykey:j.currlaykey});delete o.model;if(s.setMapID){s.setMapID(this.id);}if(!r){t=this.findIntersectingComponents();}mstrMobileApp.loadMap(JSON.stringify(W.copy({fullScreen:r,infoWindow:this.getInfoWindowConfig(),viewTree:l,mapPath:this.mapPath,active:t,docModelId:this.xtabModel.docModel.id,hasTarget:this.hasTarget(),zt:j.zt,gdProp:u.prop},o)),u.es,u.data,k);this.mapRendered=true;},getViewHierarchy:function(){var s=[];var q=this.parent,j=[],r=W.copy(this.fmts,{}),k=this;j.push(r);while(q){r=W.copy(q.fmts,{});r.id=q.id;s.push(r.id);if(q.scriptClass==="mstrmojo.MobileDocLayoutViewer"){delete r.width;delete r.height;}else{if(q instanceof mstrmojo.DocPanel){var o=parseInt(q.domNode.style.left,10);if(o>0){q.parent._scrollOffsetLeft=o;}}else{if(q.scriptClass==="mstrmojo.DocSection"){if(q.domNode.offsetTop){r.top=q.domNode.offsetTop+"px";}}else{if(q.scriptClass==="mstrmojo.DocInfoWindow"){if(q.containerNode){r.top=q.containerNode.offsetTop+"px";r.left=q.containerNode.offsetLeft+"px";}q.onClose=function(){mstrMobileApp.hideMapView(1);};}}}}if(q._scroller){if(!q._scroller.scrollMoveListener){var l=function(p){mstrMobileApp.scrollerUpdated(JSON.stringify({id:this.id,x:p.x-(this._scrollOffsetLeft||0),y:p.y}));};q._scroller.attachEventListener("scrollMoved",q.id,l);q._scroller.attachEventListener("scrollDone",q.id,l);q._scroller.attachEventListener("transformAnim",q.id,l);q._scroller.scrollMoveListener=true;}r.scroller=true;}j.splice(0,0,r);q=q.parent;}this.mapPath=s.join("")+":"+JSON.stringify(j);return j;},getInfoWindowConfig:function Y(){if(!this.iwConfig){if(this.iwDocLayout){this.iwConfig={dft:false};}else{var q=this.gridData,p=this.getInfoWindowSelectorControl(q);if(p){var l=this.xtabModel.docModel,o=l.getTargetDefn(p.tks),k=this.findSelectorTarget(p);if(k){this.iwConfig={dft:false};var j=l.getTargetDefn(k)[k].fmts;this.iwConfig.size={w:parseInt(j.width,10),h:parseInt(j.height,10)};return this.iwConfig;}}this.iwConfig={dft:true};}}return this.iwConfig;},switchToImage:function A(o,l,k){var j=this.imgPreview;if(o&&j.hasRendered){if(j.src!==o){togglePreviewCtrl(j,0);j.domNode.className=PREVIEW_CLS_NAME;j.set("src",o);j.set("width",l);j.set("height",k);j.set("visible",true);}else{if(mstrMobileApp&&mstrMobileApp.hideMapView){togglePreviewCtrl(this.imgPreview,1);window.setTimeout(function(){mstrMobileApp.hideMapView(0);},100);}}}else{mstrMobileApp.hideMapView(0);}},hidePreview:function U(){togglePreviewCtrl(this.imgPreview,0);},resetLayout:function F(){if(this.iwDocLayout&&this.preIWLayout){this.doc.selectLayout(this.preIWLayout,true,null,true);this.preIWLayout=null;}},closeInfoWindow:function E(){do{mstrApp.closeDialog();}while(mstrmojo.all.mstrMapInfoWindow);this.resetLayout();},removeMarkerAnchor:function V(){var j=mstrmojo.all.mstrMapMarkerAnchor;if(j){j.destroy();}j=document.getElementById("mstrMapMarkerAnchor");if(j){j.parentNode.removeChild(j);j.undrender();}j=undefined;var k=this;if(this.iwDocLayout){window.setTimeout(function(){console.log("calling resetLayout");k.resetLayout();},0);}},beforeViewHidden:function J(j){this.unrender();},handleMarkerSelection:function I(s,l,t,o,p){console.log("handleMarkerSlection: ri="+s+"dir="+l+"mH="+t+"mW="+o+"rD="+p);var q=this.anchor,j,r=20,k=this.domNode;if(!q){this.anchor=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"androidMap-anchorBox"});q=this.anchor;}else{mstrmojo.css.removeClass(q.domNode,"bottomAnchor");mstrmojo.css.removeClass(q.domNode,"leftAnchor");q.unrender();}o=(o<(parseInt(k.style.width,10)))?o:(parseInt(k.style.width));t=(t<(parseInt(k.style.height,10)))?t:(parseInt(k.style.height));if(l==="v"){j="bottomAnchor";rP=Math.round((p/t)*100);q.set("width",o+"px");t=(t/2)-p;q.set("height",t+"px");}else{j="leftAnchor";rP=Math.round((p/o)*100);o=(o/2)-p;q.set("width",o+"px");q.set("height",t+"px");}q.set("zoom","1");q.render();mstrmojo.css.addClass(q.domNode,j);k.appendChild(q.domNode);if(this.iwDocLayout){this.handleMarkerInfoWindowLayoutSelection(s,l,q,t,o,p,rP);}else{this.handleMarkerTargetSelection(s,l,q,t,o,p,rP);}},handleMarkerInfoWindowLayoutSelection:function B(x,AC,p,w,o,q,j){var AG=this.gridData,AD=AG.gts.row[0],s=AD.id,z=AG.ghs.rhs.items[x],AH=z&&z.items[0].idx,k=this,u=(AH>=0)?AD.es[AH].id:-1;if(this.iwDocLayout){var AJ=this.doc,AE=AJ.getLayouts(),t=this.iwLayoutKey,AF=AE[mstrmojo.array.find(AE,"k",t)],AA="\x1F",AB="12",l=s+AA+AB+AA+u;var AI={layoutKey:t,groupByIDs:l,reload:true};if(!this.preIWLayout){this.preIWLayout=AE[mstrmojo.array.find(AE,"k",this.defn._lkz)];}console.log("Obscuring non map view");mstrMobileApp.obscureNonMapView();(function(AP,AN){var AM=AJ,r=AM.model,AO=r.getDataService(),AK=AP.layoutKey,AL=AN[mstrmojo.array.find(AN,"k",AK)];if(AL.defn&&(AP.reload||AL.defn.loaded===false)){AO.loadDocLayout(AP,{success:function(Ak){var AR=k.xtabModel.docModel,Aj=t,Ai;Ak.key=Aj;Ak.isSelected=false;AR.replaceLayout(Aj,Ak);Ai=AJ.rebuildLayout(Aj,AN);k.lastSelectedRow=x;var Ad=Ai.node,AT=mstrApp.getScreenDimensions(),AZ=AT.w*0.85,Ah=AT.h*0.9,AX=AT.w*0.6,Af=AT.h*0.5,AW=Ad.defn.fmts.width||(AX+"px"),Ae=Ad.defn.fmts.height||Ad.data.mh||(Af+"px"),AV=1,AQ=k.domNode,Ag=new mstrmojo.Overlay({cssClass:"iwOverlay",children:[Ai]});AX=parseInt(p.width,10)>parseInt(AW,10)?parseInt(p.width,10):parseInt(AW,10);Af=parseInt(p.height,10)>parseInt(Ae,10)?parseInt(p.height,10):parseInt(Ae,10);Ag.set("width",p.width);Ag.set("height",p.height);Ag.render();p.domNode.appendChild(Ag.domNode);var AS=0,Aa=0,Ac,AU=Ag.domNode.getElementsByClassName("mstrmojo-DocLayout")[0],Ab=Ag.domNode.getElementsByClassName("mstrmojo-DocSubsection"),AY;if(AX>Af){AV=(parseInt(p.width,10)/parseInt(AW,10));}else{AV=(parseInt(p.height,10)/parseInt(Ae,10));}AV=(AV<=1)?AV:1;if(AC==="v"){AS=(parseInt(p.width,10)-parseInt(AW,10))/2;AS=AS>0?Math.floor(AS/AV):0;for(AY=0;AY<Ab.length;AY++){Ab[AY].style.left=AS+"px";}}else{Aa=(parseInt(p.height,10)-parseInt(Ae,10))/2;Aa=Aa>0?Math.floor(Aa/AV):0;for(AY=0;AY<Ab.length;AY++){Ab[AY].style.top=Aa+"px";}}AU.style.zoom=AV;AJ.selectLayout(AL,true);}});}else{AM.selectLayout(AL,true);}})(AI,AE);return true;}return false;},handleMarkerTargetSelection:function a(x,AA,q,w,p,s,l){var AF=this.gridData,AB=AF.gts.row[0],t=AB.id,z=AF.ghs.rhs.items[x],AG=z&&z.items[0].idx,o=this,u=(AG>=0)?AB.es[AG].id:-1;var j=this.getInfoWindowSelectorControl(AF),AH=this.findSelectorTarget(j);if(j&&j.tks){var k=null,AE=o.xtabModel.docModel,AD=AE.getDataService(),AC=AD.getSelectorElementsAction({ck:j.ck,eid:u,ctlKey:j.ckey,include:j.include});AD.submitUpdates(AC,{success:function(Ab){var Aa=AE.getTargetDefn(j.tks);if(Ab.pukeys){Aa=AE.getTargetDefn(Ab.pukeys);}k=AE.updateDataCache(Ab.data,Aa);var AZ=o.findSelectorTarget(j);if(AZ){var AQ=AE.getTargetDefn(AZ),AV=AZ+"_ifw",AR=mstrmojo.all[AV],r="*l"+Ab.currlaykey+"*k"+AZ+"*x1*t"+AE.buildTime;if(AR){AR.destroy();}var AN=new mstrmojo.maps.androidmap.AndroidDocMapInfoWindow({id:AV,builder:o.doc.builder,model:AE,psKey:AZ,psId:r});var AT=AQ[AZ].fmts,AK=parseInt(AT.width,10)||width,AS=parseInt((AT.p_fmts&&AT.p_fmts.height)||AT.height,10)||height,AP=1,AI=o.domNode,AM=q.domNode;AN.set("width",p+"px");AN.set("height",w+"px");AN.render();AM.appendChild(AN.domNode);var AL,AU,AO=AN.domNode;var AY=p>AK?p:AK,AJ=w>AS?w:AS;if(AY>AJ){AP=(parseInt(q.width,10)/parseInt(AK,10));}else{AP=(parseInt(q.height,10)/parseInt(AS,10));}AP=(AP<=1)?AP:1;if(AA==="v"){if(p>AK){AL=(p-AK)/2;AL=AL>0?AL:0;AO.style.left=Math.floor(AL/AP)+"px";}}else{if(w>AS){AU=(w-AS)/2;AU=AU>0?AU:0;AO.style.top=Math.floor(AU/AP)+"px";}}AO.style.zoom=AP;AO.style.position="absolute";var AX=AO.getElementsByClassName("mstrmojo-DocSubPanel-content")[0];AM.style.backgroundColor=AX.style.backgroundColor;}var AW={name:"partialUpdate",tree:Ab.data,ids:k,anchor:q.domNode};if(!mstrmojo.hash.isEmpty(AW.ids.ifws)){delete AW.ids.ifws[AZ];}AE.raiseEvent(AW);}},{config:mstrmojo.DocDataService.PROGRESS_CONFIG,params:{onAndroid:true}});}},slice:function T(t,q){console.log("slice method called"+t+" indexes="+q);var u=this.gridData.gts.row,r,j="\x1e",p,o,s,l,k=q.length;r=u[t].sc;if(r===undefined||r.tks===undefined){t=0;r=u[t].sc;if(r===undefined||r.tks===undefined){return ;}}p=[];for(o=0;o<k;o++){p.push(u[t].es[q[o]].id);}s=p.join(j);l={ck:r.ck,ctlKey:r.ckey,eid:s,tks:r.tks,include:true,suppressIW:true,type:mstrmojo.EnumRWUnitType.GRID};this.xtabModel.docModel.slice(l);},ontouchstart:function M(){if(this.mapRendered){mstrMobileApp.showMapView(0);}},getInfoWindowSelectorControl:function X(j){if(!this.sc&&!j.eg){this.sc=j.gts.row[0].sc;}return this.sc;},afterViewVisible:function Q(){window.setTimeout(function(){mstrMobileApp.showMapView(1);},300);},removeMap:function g(){console.log("remove map");this.closeInfoWindow();this.removeMarkerAnchor();this.resetLayout();if(S.call(this)){console.log("will call hideMapView soon");mstrMobileApp.hideMapView(1);}console.log("done with remove map");},unrender:function(){this.imgPreview.src="";this.lastSelectedRow=null;if(this.anchor){this.anchor.destroy();}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.maps.androidmap.AndroidMap");mstrmojo.maps.androidmap.AndroidRptMap=mstrmojo.declare(mstrmojo.maps.androidmap.AndroidMap,null,{scriptClass:"mstrmojo.maps.androidmap.AndroidRptMap",setModel:function A(B){this._super(B);this.controller.getPageByTree(false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.VisChart");var J=1;var F=2;mstrmojo.VisMicroChartBar=mstrmojo.declare(mstrmojo.VisChart,null,{scriptClass:"mstrmojo.VisMicroChartBar",isDrawAxis:false,margin:{t:0,r:1,b:0,l:1},showHighlightLine:false,themeColor:"#FFFFFF",noBackground:true,isAnimateLines:false,toolTipMain:null,labelLen:0,mainWidth:0,mainLeftPos:0,markupString:'<div id="{@id}" class="mstrmojo-Chart {@cssClass}" style="width:{@width};height:{@height};top:{@top};left:{@left};position:relative;"  mstrAttach:mousedown,mouseup,mousemove,click ><canvas width="{@width}" height="{@height}"></canvas><canvas style="position:absolute;left:0;top:0" width="{@width}" height="{@height}"></canvas><canvas style="position:absolute;left:0;top:0" width="{@width}" height="{@height}"></canvas><div style="position:absolute;left:0px;top:0px;padding-left:1px;padding-top:1px;text-align:left;-webkit-text-size-adjust: none; font-family: Roboto"></div><div style="position:absolute;left:0px;bottom:0px;padding-left:1px;padding-bottom:1px;text-align:left;-webkit-text-size-adjust: none;font-family: Roboto"></div></div>',markupSlots:{canvas:function(){return this.domNode.firstChild;},animationCanvas:function(){return this.domNode.childNodes[1];},highlightCanvas:function(){return this.domNode.childNodes[2];},minLabel:function(){return this.domNode.childNodes[3];},maxLabel:function(){return this.domNode.childNodes[4];}},postBuildRendering:function C(){if(this._super){this._super();}this.windowSize=this.model.series[0].rv.length;if(this.windowSize===1){this.plot();}},getTouchValue:function L(M){var O=this.model.series[0];var P=0;for(var N=0;N<O.v.length;N++){if(M<this.hightLightPos[N].x){if(N===0){P=N;}else{P=(this.hightLightPos[N].x+this.hightLightPos[N-1].x)/2>M?(N-1):N;}break;}}if(N!==O.v.length){}else{P=N-1;}return P;},isTouchPointInGraphRange:function E(N,M){if(N<=this.labelLen+1||N>=this.getWidth()-1){return false;}return true;},showTooltip:function A(P,O){if(!this.config.mbShowTooltip||this.noDataToShowTtp){return false;}var N=this.model,Q=N.series[0];if(Q.rv.length<1){return false;}var S=mstrmojo.dom.position(this.domNode,true);var W=P-S.x;var V=O-S.y;if(!this.isTouchPointInGraphRange(W,V)){return false;}var U=this.getTouchValue(W,V);var T=this.hightLightPos[U].x;if(this.widget.enableSmoothScroll){if(this.domNode.offsetLeft+T<this.widget._scroller.origin.x){return false;}}this.prevHighlight=this.currentHighlight;this.currentHighlight=U;if(!this.widget.tooltipShow||this.prevHighlight!=this.currentHighlight){W=Math.round(this.hightLightPos[U].x);V=Math.round(this.hightLightPos[U].y);var M=Q.rv[U]*1;var R=this.posBarColor;if(M<0){R=this.negBarColor;}if(Q.thClr&&Q.thClr[U]){R=Q.thClr[U];}this.renderTooltip(U,P,O,R);this.highlightPoint(W,V,R);}return true;},renderTooltip:function A(Z,Y,X,U){var O=this.model,S=this.config,Q=O.series[0],N=this.getWidth(),T=O.mtrcs.items,W=this.utils;var a=this.widget._tooltip;if(isNaN(this.kpiOffset)){this.kpiOffset=0;}var R=[];R.push({n:O.categories.tn,v:O.categories.items[Z]});if(this.widget.sparklineProps.mstrAssMetric){R.push({n:this.widget.sparklineProps.mstrAssMetric,v:Q.v[Z]});}else{R.push({n:T[this.kpiOffset],v:Q.v[Z]});}if(this.refv&&this.refv.length>1&&this.config.mbRefLine){R.push({n:T[this.kpiOffset+1],v:this.refv[1].v});}a.displayInfo(R);a.toggle(true);a.setBorderColor(U);a.domNode.style.visibility="hidden";var V=mstrmojo.dom.position(this.widget.domNode,true),M=this.utils.getScreenZoomFactor(),P=Math.round(45*M);W.positionTooltip(a.domNode,{x:Y-V.x,y:X-V.y},this.widget.domNode,P);a.domNode.style.visibility="visible";},highlightPoint:function D(Q,N,R){var P=this.highlightContext,S=this.getWidth(),M=this.getHeight(),O=this.utils;P.clearRect(0,0,S,M);P.globalAlpha=1;Q=Q>5?Q:5;if(Q>S-5){Q=S-5;}N=N>5?N:5;if(N>M-5){N=M-5;}P.globalAlpha=0.8;P.strokeStyle="FFFFFF";P.fillStyle=P.strokeStyle;O.drawArc(this,Q,N,5,0,Math.PI*2,true,true,P);P.strokeStyle=R;P.fillStyle=P.strokeStyle;P.globalAlpha=1;O.drawArc(this,Q,N,5,0,Math.PI*2,true,false,P);O.drawArc(this,Q,N,2.5,0,Math.PI*2,true,true,P);this.highlightCanvas.id="highLightCav"+this.widget.domNode.id;},textLen:function I(O){var M=0;for(var N=0;N<O.length;N++){if(O.charCodeAt(N)>255||O.charCodeAt(N<0)){M+=2;}else{M++;}}return M;},handleTouchMove:function(){},reDrawChart:function B(){var O=this.context,N=this.canvas,P=N.width,M=N.height;O.clearRect(0,0,P,M);this.data.processLinearData(this);this.windowSize=this.model.series[0].rv.length;this.utils.fillBackground(this);if(this.windowSize<1){return ;}this.drawChart();},setColorByTheme:function H(){var M=this.config;if(this.theme==J||this.theme==F){this.posBarColor="#598200";this.negBarColor="#CC3A06";this.xAxisLineWidth=1;this.xAxisLineColor="#7F7F7F";this.refLineWidth=1;this.refLineColor="#00A6EF";}else{this.posBarColor=M.mwPosCol||"#009900";this.negBarColor=M.mwNegCol||"#ff0000";this.xAxisLineWidth=1;this.xAxisLineColor="#000000";this.refLineWidth=1;this.refLineColor=M.mwRefLineCol;}},drawChart:function K(){var R=this.model;var P=this.config;if(R.err){this.noDataToShowTtp=true;return ;}this.setColorByTheme();var AD=this.context,AC=R.series,O=this.getHeight(),M=this.getWidth(),h=this,AE=this.utils;var w=0;var p=this.margin.l;var X=this.margin.r;var AB=0,o=0,T=maxLabel="",W=R.series[0];for(var z=0;z<W.v.length;z++){var g=parseFloat(W.rv[z]);if(z===0){o=AB=g;T=maxLabel=W.v[z];}else{if(g>o){o=g;maxLabel=W.v[z];}else{if(g<AB){AB=g;T=W.v[z];}}}}if(isNaN(AB)&&isNaN(o)){this.minLabel.innerHTML="";this.maxLabel.innerHTML="";this.noDataToShowTtp=true;return ;}this.noDataToShowTtp=false;if(P.mbShowLegend){var e=Math.ceil(Math.min(12,(O/2)*0.7));var x="Min:"+T.replace(/[ ]/g,"");var V="Max:"+maxLabel.replace(/[ ]/g,"");this.minLabel.innerHTML=x;this.maxLabel.innerHTML=V;var Y=M-10;if(Y>M*0.5){Y=Math.floor(M*0.5);}do{this.minLabel.style.fontSize=e+"px";this.maxLabel.style.fontSize=e+"px";var N="Roboto";var U=this.widget.getTextWidth(x,"",N,e,"px",this.isTextBold);var s=this.widget.getTextWidth(V,"",N,e,"px",this.isTextBold);var t=U>s?U:s;w=t+p;e-=1;}while(w>Y&&e>5);e+=1;}else{w=p;}this.labelLen=w;if(this.refv&&this.refv.length>1&&P.mbRefLine){var f=this.refv[1].rv*1;if(f<AB){AB=f;}if(f>o){o=f;}}var AA=o-AB;var u=0;var a=5;var Z=5;var q=O-a-Z;if(AA==0){if(AB==0){u=O/2;q=0;}else{q/=Math.abs(o);if(o<0){u=a;}else{u=O-Z;}}}else{if(o<0){u=a;q/=Math.abs(AB);}else{if(AB<0){u=o/AA*q+a;q/=AA;}else{u=O-Z;q/=o;}}}var b=M-w-X;var d=W.v.length;var j=b*0.4/d;j=j>=1?j:1;var r=b/d-j;this.hightLightPos=[];for(var z=0;z<d;z++){this.hightLightPos[z]={};var g=W.rv[z]*1;var l=true;if(g<0){g=0-g;l=false;}var S=g*q;var k=(M-w)/W.v.length;this.drawBar(w+(r+j)*z+j/2,u,r,S,AD,W.thClr&&W.thClr[z],l,this.hightLightPos[z]);}AD.strokeStyle=this.xAxisLineColor;AD.lineWidth=this.xAxisLineWidth;if(AD.lineWidth%2===1){u=Math.round(u+0.5)-0.5;}AD.beginPath();AD.moveTo(w,u);AD.lineTo(M-X,u);AD.stroke();if(this.refv&&this.refv.length>1&&P.mbRefLine){var f=this.refv[1].rv*1;var Q=u-f*q;if(AD.lineWidth%2===1){Q=Math.round(Q+0.5)-0.5;}AD.beginPath();AD.moveTo(w,Q);AD.lineTo(M-X,Q);AD.strokeStyle=this.refLineColor;AD.stroke();}},drawBar:function G(N,T,R,M,Q,P,S,O){if(R>=3){N=Math.round(N);T=Math.round(T);R=Math.round(R);}if(M!=0){M=Math.round(M);if(M<1){M=1;}}if(S){Q.fillStyle=P?P:this.posBarColor;Q.fillRect(N,T-M,R,M);O.x=N+Math.round(R/2);O.y=T-M;}else{Q.fillStyle=P?P:this.negBarColor;Q.fillRect(N,T,R,M);O.x=N+Math.round(R/2);O.y=T+M;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.VisChart");var I=1;var E=2;var F=3;var K=4;mstrmojo.VisMicroChartLine=mstrmojo.declare(mstrmojo.VisChart,null,{scriptClass:"mstrmojo.VisMicroChartLine",isDrawAxis:false,margin:{t:5,r:2,b:1,l:2},showHighlightLine:false,themeColor:"#FFFFFF",isDrawRefArea:true,noBackground:true,isAnimateLines:false,toolTipMain:null,mainWidth:0,mainLeftPos:0,reDrawChart:function C(){var N=this.context,M=this.canvas,O=M.width,L=M.height;N.clearRect(0,0,O,L);this.data.processLinearData(this);this.windowSize=this.model.series[0].rv.length;this.utils.fillBackground(this);if(this.windowSize<=1){return ;}this.drawChart();},setColorByTheme:function G(){var L=this.config;if(this.theme===I||this.theme===E){this.startPointColor="#50B5D8";this.endPointColor="#50B5D8";this.otherPointColor="#50B5D8";this.isDrawRefArea=false;this.sparkLineColor="#50B5D8";this.refLineColor="#FF781D";}else{this.startPointColor="#000000";this.endPointColor="#FF0000";this.otherPointColor="#663300";this.isDrawRefArea=L.mbRefArea;this.sparkLineColor=L.mwSeriesLineCol||"#333333";this.refLineColor=L.mwRefLineCol||"#0066ff";}var M=mstrMobileApp.getDeviceDPI();this.sparkLineWidth=M>160?2:1;this.refLineWidth=1;this.startEndPointRadius=M>=320?4:M>=240?3:2;},drawChart:function J(){this.setColorByTheme();var S=this.config;var N=this.context;var O=this.model;var M=O.series;var T=O.mvalues;var U=this.margin;var V=this.getHeight();var X=this.getWidth();var a=this.utils;var W=T[T.length-1];var P=T[0];var b=T[T.length-1];var d=T[0];this.drawRefLine=false;if(this.refv&&this.refv.length>1&&S.mbRefLine){var Z=parseFloat(this.refv[1].rv);if(isNaN(Z)){this.drawRefLine=false;}else{this.drawRefLine=true;if(Z>W){W=Z;if(T.length===1){T[1]=W;}else{T[T.length-1]=W;}}if(Z<P){P=Z;if(T.length===1){T[1]=T[0];T[0]=W;}else{T[0]=P;}}}}this.themeColor=S.mwRefAreaCol||"#dedede";this.isDrawStartEndPoints=S.mbAllPoints?7:(S.mbEndPoints?3:0);if(this.isDrawStartEndPoints&1&&U.l<this.startEndPointRadius){U.l=this.startEndPointRadius;}if(this.isDrawStartEndPoints&2&&U.r<this.startEndPointRadius){U.r=this.startEndPointRadius-1;}if(O.err){return ;}if(!M){return ;}if(W!==P){this.RTY=(V-U.t-U.b-4)/(W-P);}else{this.RTY=0;}if(this.windowSize!==1){this.RTX=(X-U.l-U.r-1)/(this.windowSize-1);}else{this.RTX=0;}var L=[];for(var Y=0;Y<this.windowSize;Y++){var e=parseFloat(M[0].rv[Y]);if(isNaN(e)){L[Y]=null;continue;}var R=(Y*this.RTX)+U.l;var Q=a.getYValue(this,e);L[Y]={x:R,y:Q};}if(L.length===0){return ;}b=a.getYValue(this,b);d=a.getYValue(this,d);if(b===undefined||d===undefined){b=V-4-U.b;d=U.t;}if(this.isDrawRefArea){N.fillStyle=this.themeColor;N.fillRect(U.l,d,X-U.r-U.l,(b-d));}N.lineCap="round";N.lineWidth=this.sparkLineWidth;N.lineJoin="round";N.strokeStyle=this.sparkLineColor;a.drawLineSet(this,L,false,N);if(this.isDrawStartEndPoints){a.drawStartEndPoints(this,L,N,this.isDrawStartEndPoints);}if(this.drawRefLine){var Q=this.utils.getYValue(this,Z);if(N.lineWidth%2===1){Q=Math.round(Q+0.5)-0.5;}N.beginPath();N.moveTo(U.l,Q);N.lineTo(X-U.r,Q);N.lineWidth=this.refLineWidth;N.strokeStyle=this.refLineColor;N.stroke();}},highlightPoint:function H(R,T){var P=this,V=P.highlightContext,U=P.getHeight(),L=P.getWidth(),N=P.margin,O=P.model,S=P.utils;V.clearRect(0,0,L,U);if(R<0){return ;}var M=(R*P.RTX)+N.l;V.globalAlpha=1;V.strokeStyle=this.sparkLineColor;V.fillStyle=V.strokeStyle;var Q=S.getYValue(P,O.series[0].rv[R]);if(M<5){M=5;}if(M>L-5){M=L-5;}if(Q<5){Q=5;}if(Q>U-5){Q=U-5;}V.strokeStyle="FFFFFF";V.fillStyle=V.strokeStyle;V.globalAlpha=0.8;S.drawArc(this,M,Q,5,0,Math.PI*2,true,true,V);V.strokeStyle=this.sparkLineColor;V.fillStyle=V.strokeStyle;V.globalAlpha=1;S.drawArc(P,M,Q,5,0,Math.PI*2,true,false,V);S.drawArc(P,M,Q,2.5,0,Math.PI*2,true,true,V);this.highlightCanvas.id="highLightCav"+this.widget.domNode.id;},renderTooltip:function A(S,T,Q){ttp=this.widget._tooltip;if(S<0){ttp.toggle(false);return ;}var L=document.getElementById("highLightCav"+this.widget.domNode.id);if(L){var P=L.getContext("2d");L.id="";P.clearRect(0,0,1000,1000);}var f=this,Z=this.model,V=Z.series,R=V[0],d=this.utils,b=V.length,e=this.seriesIndex,U=Z.colHeaders,Y=this.baseModel.rowHeaders,X=this.margin,a=Z.mtrcs.items;if(isNaN(this.kpiOffset)){this.kpiOffset=0;}var W=[];W.push({n:Z.categories.tn,v:Z.categories.items[S]});if(this.widget.sparklineProps.mstrAssMetric){W.push({n:this.widget.sparklineProps.mstrAssMetric,v:R.v[S]});}else{W.push({n:a[this.kpiOffset],v:R.v[S]});}if(this.refv&&this.refv.length>1&&this.config.mbRefLine){W.push({n:a[this.kpiOffset+1],v:this.refv[1].v});}ttp.displayInfo(W);ttp.toggle(true);ttp.setBorderColor(this.sparkLineColor);ttp.domNode.style.visibility="hidden";var M=mstrmojo.dom.position(this.widget.domNode,true),O=this.utils.getScreenZoomFactor(),N=Math.round(45*O);d.positionTooltip(ttp.domNode,{x:T-M.x,y:Q-M.y},this.widget.domNode,N);ttp.domNode.style.visibility="visible";},isTouchPointInGraphRange:function D(M,L){var N=this.margin;if(M<N.l||L<N.t||L>this.canvas.height-N.b){return false;}return true;},showTooltip:function B(V,U){if(!this.config.mbShowTooltip){return false;}var Q=this,L=Q.model;if(L.series[0].rv.length<=1){return false;}var R=mstrmojo.dom.position(this.domNode,true),P=V-R.x,O=U-R.y;if(!this.isTouchPointInGraphRange(P,O)){return false;}var T=Q.getTouchValue(P,O);var M=this.margin;if(T!==null){var S=(T*Q.RTX)+M.l;if(Q.widget.enableSmoothScroll){if(this.domNode.offsetLeft+S<this.widget._scroller.origin.x){return false;}}var N=(L.rne-L.rns>1)?L.rns:L.rns-1;if(Q.seriesIndex===-1||Q.switchSeriesOnTouch){Q.seriesIndex=Q.utils.getSeriesIndexAndYValue(Q,N+T,O).si;}if(L.series[Q.seriesIndex].rv[N+T]===""){return false;}Q.prevHighlight=Q.currentHighlight;Q.currentHighlight=T;if(!Q.widget.tooltipShow||Q.prevHighlight!=Q.currentHighlight){Q.renderTooltip(T,V,U);Q.highlightPoint(T,U);}return true;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.VisChart","mstrmojo.locales");var K=20;var I=-20;var O=25;var E=mstrmojo.hash;var A=null;mstrmojo.VisChartLine=mstrmojo.declare(mstrmojo.VisChart,null,{scriptClass:"mstrmojo.VisChartLine",fillinColor:null,rotateXLabels:false,isFillLinesArea:null,isAnimateLines:true,isDrawStartEndPoints:0,startEndPointRadius:5,startPointColor:null,endPointColor:null,prevLines:null,chartLineColors:["#0099FF","#FFB03C","#F26AE1","#888BF4","#93CA20","#FE2F68"],maxXLabels:6,DSS_XML_BASE_FORM_DATE:"8",drawChart:function L(){var T=this.model;if(T.err){return ;}var S=this.animationContext,U=T.mvalues,R=T.series,V=this.margin,Q=[],P=[],W=this.getHeight(),X=this.getWidth(),g=this,e=this.utils;if(!R){return ;}var f=R.length;if(this.isDrawAxis&&this.drawYAxisLabels){V.l=e.getLabelWidthForMargin(this,T.mls);}g.RTY=(W-V.t-V.b-5)/(U[U.length-1]-U[0]);g.RTX=(X-V.l-V.r-1)/(g.windowSize-1);var b=(U[0]+U[U.length-1])/2;var d=e.getYValue(g,b);for(var Z=0;Z<f;Z++){Q=[];var Y=0;for(var a=0;a<g.windowSize;a++){var h=R[Z].rv[a];if(h.length===0){continue;}Q[Y]={x:(a*g.RTX)+V.l,y:e.getYValue(g,h)};if(!this.prevLines){P[Y]={x:Q[Y].x,y:d};}Y++;}this.drawChartLine(Q,P,f,Z,S);if(!this.multiLine){break;}}this.prevLines=Q;},drawChartLine:function C(Z,W,R,T,P,Q){var V=this,Y=V.getHeight(),X=V.utils;var U={rate:6};P.strokeStyle=X.getColor(V);P.lineCap="round";P.lineWidth=Q||2;P.lineJoin="round";if(V.isAnimateLines&&(!V.multiLine||R===1)){if(V.prevLines){W=V.prevLines;if(W.length<Z.length){for(var S=W.length;S<Z.length;S++){W.push(Z[W.length-1]);}}}X.animateLineSet(V,V.prevLines||W,Z,U);}else{if(V.multiLine&&R>1){P.strokeStyle=V.chartLineColors[T%6];}X.drawLineSet(V,Z,false,P);if(V.isFillLinesArea){X.fillLinesArea(V,Z.slice(0));}if(V.isDrawStartEndPoints){X.drawStartEndPoints(V,Z,P,V.isDrawStartEndPoints);}}},setMicroChartProperties:function F(){this.isDrawAxis=false;this.margin={t:0,r:5,b:0,l:5};this.showHighlightLine=false;this.isDrawStartEndPoints=3;},initFromVisProps:function J(P){if(!P){return ;}if(P.thc){this.themeColor="#"+P.thc;}if(P.shl==="0"){this.showHighlightLine=false;}if(P.mc==="1"){this.setMicroChartProperties();}},postCreate:function N(){if(this._super){this._super();}if(this.rotateXLabels){this.margin.b=75;}if(typeof (this.isFillLinesArea)==="undefined"&&!this.multiLine){this.isFillLinesArea=true;}},drawLabels:function D(f){if(!this.isDrawAxis){return ;}if(this._super){this._super();}if(!this.drawXAxisLabels){return ;}var u=this,V=u.model.categories,r=V.items,R=V.tp,q=u.utils,s=u.margin,h=r.length,e=null,Y=null,X=0,o=null,P=u.isTimeSeries,g=u.animationContext,Q=u.drawGridLines;var d=u.prevXLabel;d.x=0;d.y=0;d.w=0;g.save();g.globalAlpha=1;g.strokeStyle=q.rgb2rgbStr(u.formatProp.textClr,0.35);g.lineWidth=1;g.lineCap="round";var T=h>u.maxXLabels?u.maxXLabels:h;var p=null;if(P){p=document.createElement("div");u.xdiv=p;T*=(u.totalChartWidth/(u.chartWidth));}if(u.rotateXLabels){X=u.canvas.height+I;}else{if(P){X=u.canvas.height-this.margin.b+5;}else{X=u.canvas.height-O;}}var b=Math.round(h/T);if(b===0){b=1;}var U=Math.round(b*u.RTX)-u.xLabelPadding;A=null;var S={mn:0,dt:0,yr:0};if(P){var t=-1;this.needRedrawVerticalLine=false;var a=Math.ceil(u.ACrns/b)*b-u.ACrns;for(var j=u.ACrns+a;j<u.ACrne;j+=b){Y=((j-u.ACrns)*u.RTX);var k=r[j];if(t<0&&j>=u.model.rns){t=0;}if(P&&(R.toString()===u.DSS_XML_BASE_FORM_DATE)){if(t==0){A=null;t=1;}k=u.getFormattedDateLabel(k,S);}if(u.rotatXLabels){o=q.addLabel(u,k,Y-K,X,null,true,d);}else{o=q.addLabel(u,k,Y,X,null,false,d);}if(o){if(Q&u.drawVerticalGridLines){A=E.clone(S);if(!f){var Z=Math.floor(Y)+0.5;q.drawLineSet(u,[{x:Z,y:u.canvas.height-s.b},{x:Z,y:s.t}],false,g);}}}}}else{for(var j=0;j<h;j+=b){Y=(j*u.RTX)+s.l;var k=r[j];if(P&&(R.toString()===u.DSS_XML_BASE_FORM_DATE)){k=u.getFormattedDateLabel(k,S);}if(u.rotateXLabels){o=q.addLabel(u,k,Y-K,X,null,true,d);}else{o=q.addLabel(u,k,Y,X,U,false,d);}if(o){if(Q&u.drawVerticalGridLines){A=E.clone(S);q.drawLineSet(u,[{x:Y,y:u.canvas.height-s.b},{x:Y,y:s.t}],false,g);}}}}if(p){if(this.isTimeSeries){u.xLabelsDiv.innerHTML=p.innerHTML;u.xdiv=null;}else{var W=u.animationCanvas;u.itemsContainerNode.innerHTML=p.innerHTML;u.itemsContainerNode.insertBefore(W,u.itemsContainerNode.firstChild);u.xdiv=null;}}g.restore();},getFormattedDateLabel:function M(V,R){if(isNaN(V)){return V;}var S=V;try{V=this.utils.convertRawValueToMilliseconds(V);var Q=new Date(Number(V));var U=R.mn=mstrmojo.locales.datetime.MONTHNAME_SHORT[Q.getMonth()];var P=R.yr=Q.getFullYear().toString().substring(2);R.dt=Q.getDate();if(!A||(U!==A.mn&&P!==A.yr)){S=U+" "+R.dt+" "+P;}else{if(U!==A.mn){S=U+" "+R.dt;}else{S=R.dt;}}}catch(T){}return S;},removeLabels:function G(){var P=this.domNode.getElementsByClassName("mstrmojo-Chart-lbl");for(var Q=P.length-1;P&&Q>=0;Q--){P[Q].parentElement.removeChild(P[Q]);}},highlightPoint:function H(a,d){var Y=this,f=Y.highlightContext,e=Y.getHeight(),S=Y.margin,X=Y.model,b=Y.utils,V=Y.seriesIndex;var R=(a*Y.RTX)+S.l;if(this.prevHighlight>=0){var W=(this.prevHighlight*Y.RTX)+S.l;var P=10;var T=8;var Z=S.t-T>0?S.t-T:0;f.clearRect(W-P,Z,W+P,e-S.b);}if(a<0){return ;}var R=(a*Y.RTX)+S.l;f.shadowBlur=5;f.shadowColor="#000";f.globalAlpha=1;if(Y.showHighlightLine){f.strokeStyle=this.highlightColor;f.fillStyle=this.highlightColor;f.lineWidth=2;f.lineCap="round";b.drawLineSet(Y,[{x:R,y:S.t},{x:R,y:e-S.b}],false,f);}else{f.strokeStyle=b.getColor(Y);f.fillStyle=f.strokeStyle;}var g=X.series,Q=g.length,Z=b.getYValue(Y,g[V].rv[a]);if(!Y.multiLine){b.drawArc(Y,R,Z,5,0,Math.PI*2,true,true,f);}else{if(Y.showHighlightLine){if(Q>1){f.strokeStyle=this.chartLineColors[0];f.fillStyle=f.strokeStyle;}for(var U=0;U<Q;U++){f.strokeStyle=this.chartLineColors[U%6];if(U>0){f.fillStyle=f.strokeStyle;}Z=b.getYValue(Y,g[U].rv[a]);b.drawArc(Y,R,Z,5,0,Math.PI*2,true,true,f);}}else{if(Q>1){f.strokeStyle=this.chartLineColors[V];f.fillStyle=f.strokeStyle;}b.drawArc(Y,R,b.getYValue(Y,g[V].rv[a]),5,0,Math.PI*2,true,true,f);}}},refreshChart:function B(){var P=this.getHeight(),Q=this.getWidth();this.highlightContext.clearRect(0,0,Q,P);this.animationContext.clearRect(0,0,Q,P);this.removeLabels();this.drawChart();this.drawLabels();}});})();(function(){mstrmojo.requiresCls("mstrmojo.maps.jsmap.AndroidMap","mstrmojo.maps.jsmap.AndroidDocMapInfoWindow","mstrmojo.Overlay","mstrmojo.hash","mstrmojo.array","mstrmojo.dom");var F=mstrmojo.dom;mstrmojo.maps.jsmap.AndroidDocMap=mstrmojo.declare(mstrmojo.maps.jsmap.AndroidMap,[mstrmojo._Formattable],{scriptClass:"mstrmojo.maps.jsmap.AndroidDocMap",cssClass:"mstr-googleMapView",formatHandlers:{domNode:["left","top","z-index","height","width","border","border-color","border-style","border-width"]},sc:null,getMapModel:function C(){var O=this.doc,M=O.model,N=mstrApp.getCurrentProjectId(),P=mstrApp.serverProxy.getSessions();return{pid:N,sessions:P,model:this.model,docData:{did:O.did,ttl:O.ttl,st:O.st,mid:M.mid,bs:M.bs,data:M.data,defn:M.defn},cfg:mstrApp.getConfiguration().getConfiguration()};},postBuildRendering:function A(){this._touchListener=mstrmojo.touchManager.attachEventListener("touchesBegin",this.id,function(M){var N=this.openedInfoWindow;if(N){if(!F.contains(this.domNode,M.touch.target,true,document.body)&&!mstrApp.isDialogUp()){N.close();}}});return this._super();},destroy:function J(M){var N=this._touchListener;if(N){mstrmojo.touchManager.detachEventListener(N);delete this._touchListener;}this._super(M);},setModel:function L(M){this.doc=M.controller.view;this._super(M);},initFromVisProps:function I(M){this._super(M);if(!M){return ;}this.iwDocLayout=(parseInt(M.dl,10)===1);if(M.lyt){this.iwLayoutKey=M.lyt;}},findSelectorTarget:function G(R){if(R&&R.tks){var O=this.model.docModel,N=R.tks.split("\u001E"),P=0,M=N.length;for(P=0;P<M;++P){var Q=O.getTargetDefn(N[P]);if(Q[N[P]].ifw){return N[P];}}}},showInfoWindow:function D(O,N,M){this.openedInfoWindow=M;M.open(O,N);},getInfoWindow:function K(P,N){var O=this.gridData;if(this.iwDocLayout){this.getInfoWindowFromLayout(O,P,N,this.showInfoWindow);}else{var Q=this.getInfoWindowSelectorControl(O),M=this.findSelectorTarget(Q);if(!(!!Q&&M)){return this.getDefaultInfoWindow(O,N);}}},getInfoWindowFromLayout:function B(T,N,P,X){var M=this,V=this.doc,W=V.getLayouts(),O=this.iwLayoutKey,Q=W[mstrmojo.array.find(W,"k",O)],Y="\x1F",S="12",U=P.attrid+Y+S+Y+P.eid;var R={layoutKey:O,groupByIDs:U};V.selectLayout(Q,(O!==V.model.currlaykey),{complete:function(){Q.defn.loaded=false;V.getNewLayout(R,W,false,{complete:function(){mstrApp.hideMessage();},submisson:function(){mstrApp.showMessage();},success:function(j){var a=j.node,d,g=document.createElement("div"),p=g.style,l=a.defn.fmts.width,e=a.defn.fmts.height||a.data.mh;d=new mstrmojo.Overlay({children:[j]});d.set("width",l);d.set("height",e);var k=document.createElement("div");d.placeholder=k;d.render();p.overflow="hidden";g.appendChild(d.domNode);var f=new google.maps.InfoWindow({content:g});M.openedInfoWindow=f;f.open(N,P);var b=300,o=0,Z=window.setInterval(function(){var r=g.parentNode;if(r){var h=r.offsetWidth,q=r.offsetHeight;if(h!==parseInt(l,10)||q!==parseInt(e,10)){d.setDimensions(q+"px",h+"px");window.clearTimeout(Z);}}o+=b;if(o>10*b){window.clearTimeout(Z);}},b);}},true);}});},getInfoWindowSelectorControl:function E(M){if(!this.sc){this.sc=M.gts.row[0].sc;}return this.sc;},postHandleMarkerClick:function H(N,P){var R=this.gridData,S=this.getInfoWindowSelectorControl(R);if(S&&S.tks){var M=this,T=null,Q=M.model.docModel,U=Q.getDataService(),O=U.getSelectorElementsAction({ck:S.ck,eid:P.eid,ctlKey:S.ckey,include:S.include});U.submitUpdates(O,{success:function(u){var s=Q.getTargetDefn(S.tks);if(u.pukeys){s=Q.getTargetDefn(u.pukeys);}T=Q.updateDataCache(u.data,s);var r=M.findSelectorTarget(S);if(r){var b=Q.getTargetDefn(r),V="*l"+u.currlaykey+"*k"+r+"*x1*t"+Q.buildTime,j=V+"_ifw",W=mstrmojo.all[j];if(W){W.destroy();}var Z=new mstrmojo.maps.jsmap.AndroidDocMapInfoWindow({id:j,parent:M,builder:M.builder,model:Q,psKey:r,psId:V});var g=b[r].fmts,l=document.createElement("div"),o=l.style,d=g.width,q=g.height;Z.set("width",d);Z.set("height",q);var a=document.createElement("div");Z.placeholder=a;Z.render();o.height=q;o.width=d;o.overflow="hidden";l.appendChild(Z.domNode);var X=new google.maps.InfoWindow({content:l});var p=X.close;X.close=function(){p.call(X);Z.destroy();delete M.openedInfoWindow;};M.openedInfoWindow=X;X.open(N,P);var e=300,f=0,Y=window.setInterval(function(){var w=l.parentNode;if(w){var h=w.offsetWidth,t=w.offsetHeight;if(h!==parseInt(d,10)||t!==parseInt(q,10)){Z.setDimensions(t+"px",h+"px");window.clearTimeout(Y);}}f+=e;if(f>10*e){window.clearTimeout(Y);}},e);}var k={name:"partialUpdate",tree:u.data,ids:T};if(!mstrmojo.hash.isEmpty(k.ids.ifws)){delete k.ids.ifws[r];}Q.raiseEvent(k);}},{config:mstrmojo.DocDataService.PROGRESS_CONFIG,params:{onAndroid:true}});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.maps.jsmap.AndroidMap");mstrmojo.maps.jsmap.AndroidRptMap=mstrmojo.declare(mstrmojo.maps.jsmap.AndroidMap,null,{scriptClass:"mstrmojo.maps.jsmap.AndroidRptMap",setModel:function A(B){this._super(B);this.controller.getPageByTree(false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.array","mstrmojo.string","mstrmojo.expr","mstrmojo.date","mstrmojo.ValidationTextBox","mstrmojo.DateTextBox");var T=mstrmojo.array,Q=mstrmojo.css,I=mstrmojo.string,P=mstrmojo.date,O=mstrmojo.expr,S=O.DTP,B=O.FN,E=mstrmojo.validation;var A={};A[B.BETWEEN]=B.NOT_BETWEEN;A[B.NOT_BETWEEN]=B.BETWEEN;A[B.GREATER_EQUAL]=B.LESS;A[B.LESS]=B.GREATER_EQUAL;A[B.LESS_EQUAL]=B.GREATER;A[B.GREATER]=B.LESS_EQUAL;A[B.SEARCH]=B.SEARCH;function H(U){if(this.value!==this._lastInput){R.call(this,U,true);}}function M(U){mstrmojo.DateTextBox.prototype.onclick.call(this,U);Q.addClass(this.calendar&&this.calendar.domNode,mstrApp.getThemeClassName());}function R(U,Z){var Y=this.parent.parent;if(!Y._inSyncPhase){var W=this.calendar&&this.calendar.cal,X=this,V=Y.submitTimer;if(V){window.clearTimeout(V);}if(!mstrApp.isWaiting()){if(Z||W&&W.value===this.value){this._lastInput=this.value;Y.submit(X);}else{Y.submitTimer=window.setTimeout(function(){X._lastInput=X.value;Y.submit(X);},3000);this.set("dynDateValue",null);if(W){W.set("value",this.value);}}}else{if(this._lastInput){this.set("value",this._lastInput);}}}}function K(X){if(!X.isDyn){return null;}var W=["isDyn"];W.push(X.dyt||0);W.push(X.ddo||0);W.push(X.dmo||0);W.push(X.dm||0);W.push(X.dd||0);W.push(X.dw||0);W.push(X.dow||0);W.push(X.v||"");if(X.dtp===O.DTP.TIMESTAMP){var V=P.parseDateAndOrTime(X.v||""),U=V&&V.time;if(U){X.dh=U.hour;X.dmi=U.min;X.ds=U.sec;}}W.push(X.dh||0);W.push(X.dmi||0);W.push(X.ds||0);return W.join("::");}function C(W,X,Z){return{parent:W,dt:X,f:Z,setDataType:function Y(d){this.dt=d;},setFunction:function b(d){this.f=d;},hasSecTextBox:function a(){var d=this.f;return d!==B.SEARCH;},adjustVisibleFields:function U(){var d=this.parent;if(!this.hasSecTextBox()){d.toBox.set("visible",false);d.fromBox.fromLabel.set("visible",false);}if(X===O.DTP.DATE||X===O.DTP.TIMESTAMP){d.fromBox.fromInput.set("visible",false);d.toBox.toInput.set("visible",false);}else{d.fromBox.fromPicker.set("visible",false);d.toBox.toPicker.set("visible",false);}},passValueToInputs:function V(e){var g=this.parent,j,h,f=this,d=function(k,l){if(f.f===B.SEARCH||k.v!=="*"){l.set("value",k.v);l._lastInput=k.v;if(X===O.DTP.DATE||X===O.DTP.TIMESTAMP){l.set("dynDateValue",K(k));}}};if(X===O.DTP.DATE||X===O.DTP.TIMESTAMP){j=g.fromBox.fromPicker;h=g.toBox.toPicker;}else{j=g.fromBox.fromInput;h=g.toBox.toInput;}if(Z===B.BETWEEN||Z===B.NOT_BETWEEN){if(e&&e[0]){d(e[0],j);}else{j.set("value",j.min||"");j._lastInput=j.min||"";}if(this.hasSecTextBox()&&e&&e[1]){d(e[1],h);}else{h.set("value",h.max||"");h._lastInput=h.max||"";}}else{if(Z===B.GREATER_EQUAL||Z===B.LESS){if(e&&e[0]){d(e[0],j);h.set("value",h.max||"");h._lastInput=h.max||"";}}else{if(Z===B.LESS_EQUAL||Z===B.GREATER){if(e&&e[0]){d(e[0],h);j.set("value",j.min||"");j._lastInput=j.min||"";}}}}}};}mstrmojo.vi.ui.rw.selectors.AttrQualInputBox=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.vi.ui.rw.selectors.AttrQualInputBox",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},cssClass:"Attr-Qual-InputBox",children:[{scriptClass:"mstrmojo.Box",alias:"fromBox",cssClass:"from-box",children:[{scriptClass:"mstrmojo.Label",alias:"fromLabel",cssDisplay:"inline-block",cssClass:"input-label",text:mstrmojo.desc(146,"From:")},{scriptClass:"mstrmojo.ValidationTextBox",alias:"fromInput",cssDisplay:"inline-block",required:false,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onEnter:H,onblur:H,_lastInput:null,bindings:{dtp:"this.parent.parent.dt"}},{scriptClass:"mstrmojo.DateTextBox",alias:"fromPicker",cssDisplay:"inline-block",required:false,calendarToBody:true,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onvalueChange:R,onEnter:H,onblur:H,_lastInput:null,bindings:{dtp:"this.parent.parent.dt",min:"this.parent.parent.min",max:"this.parent.parent.max",defaultDate:"this.parent.parent.min",showAdvanced:"this.parent.parent.showAdvanced",canSelectDisabledDate:"this.parent.parent.canSelectDisabledDate"},onclick:M}]},{scriptClass:"mstrmojo.Box",alias:"toBox",cssClass:"to-box",children:[{scriptClass:"mstrmojo.Label",alias:"toLabel",cssDisplay:"inline-block",cssClass:"input-label",text:mstrmojo.desc(147,"To:")},{scriptClass:"mstrmojo.ValidationTextBox",alias:"toInput",cssDisplay:"inline-block",required:false,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onEnter:H,onblur:H,_lastInput:null,bindings:{dtp:"this.parent.parent.dt"}},{scriptClass:"mstrmojo.DateTextBox",alias:"toPicker",cssDisplay:"inline-block",required:false,calendarToBody:true,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onvalueChange:R,onEnter:H,onblur:H,_lastInput:null,bindings:{dtp:"this.parent.parent.dt",min:"this.parent.parent.min",max:"this.parent.parent.max",defaultDate:"this.parent.parent.max",showAdvanced:"this.parent.parent.showAdvanced",canSelectDisabledDate:"this.parent.parent.canSelectDisabledDate"},onclick:M}]}],widgetResized:function(){var X=this,U=parseInt(this.width,10),V=["fromBox","toBox"],Y,W;if(!this.widgetHelper.hasSecTextBox()){V=["fromBox"];}if(U>368){W=true;}else{W=false;}if(X.parent.isInFilterPanel()||!this.widgetHelper.hasSecTextBox()){W=false;return ;}window.setTimeout(function(){Y=X.hasRendered;T.forEach(V,function(Z){if(Y){Q.toggleClass(X[Z].domNode,"onerow",W);X[Z].domNode.style.display=W?"inline-block":"block";}else{if(W){Q.addWidgetCssClass(X[Z],"onerow");X[Z].cssDisplay="inline-block";}else{Q.removeWidgetCssClass(X[Z],"onerow");X[Z].cssDisplay="block";}}});},0);},init:function N(U){if(this._super){this._super(U);}this.widgetHelper=C(this,this.dt,this.f);this.updateWidgetByData();},update:function D(U){if(U){this.cs=U.cs;if(U.f){this.f=U.f;}if(U.ft){this.ft=U.ft;}if(U.fid){this.fid=U.fid;}if(U.min){this.set("min",U.min);}if(U.max){this.set("max",U.max);}}this.updateWidgetByData();},updateWidgetByData:function L(){var U=this.widgetHelper,V=this.cs;this._inSyncPhase=true;U.adjustVisibleFields();U.passValueToInputs(V);this._inSyncPhase=false;},onincludeChange:function F(){this.f=A[this.f];if(!this._inSyncPhase){this.onchange();}},submit:function G(b){var Z=this.cs=[],X=this.parent.include,W=this.widgetHelper,V=(b.validationStatus.code===E.STATUSCODE.VALID),f=this.parent.model,Y;if(W.hasSecTextBox()){if(b.alias==="toInput"){Y=this.fromBox.fromInput;}else{if(b.alias==="toPicker"){Y=this.fromBox.fromPicker;}else{if(b.alias==="fromInput"){Y=this.toBox.toInput;}else{if(b.alias==="fromPicker"){Y=this.toBox.toPicker;}}}}Y.validate();if(Y.validationStatus.code!==E.STATUSCODE.VALID){V=false;}}if(V){if(W.hasSecTextBox()){var e=(b.alias.indexOf("from")===0)?b:Y,d=(b.alias.indexOf("to")===0)?b:Y,U=e.dynDateValue||e.value,a=d.dynDateValue||d.value;this.unset=I.isEmpty(U)&&I.isEmpty(a);if(!I.isEmpty(U)&&!I.isEmpty(a)){Z[0]={v:U};Z[1]={v:a};this.f=X?B.BETWEEN:B.NOT_BETWEEN;}else{if(!I.isEmpty(U)){if(f.isFromSolrCube&&f.isFromSolrCube(this.srcid)){Z[0]={v:U};Z[1]={v:"*"};this.f=X?B.BETWEEN:B.NOT_BETWEEN;}else{Z[0]={v:U};this.f=X?B.GREATER_EQUAL:B.LESS;}}else{if(!I.isEmpty(a)){if(f.isFromSolrCube&&f.isFromSolrCube(this.srcid)){Z[0]={v:"*"};Z[1]={v:a};this.f=X?B.BETWEEN:B.NOT_BETWEEN;}else{Z[0]={v:a};this.f=X?B.LESS_EQUAL:B.GREATER;}}}}}else{Z[0]={v:b.value};this.unset=I.isEmpty(Z[0].v);this.f=B.SEARCH;}this.onchange();if(this.makeSelection){this.makeSelection({selItem:this.domNode});}}},getSummaryText:function J(){var W=this.cs||[],X=this.f;if(this.unset||!W.length||I.isEmpty(W[0].v)&&(W.length<=1||I.isEmpty(W[1].v))){return"";}var V="",U=this.parent.include;switch(X){case B.BETWEEN:case B.NOT_BETWEEN:V=mstrmojo.desc(4804).replace("##",W[0].v).replace("###",W[1].v);break;}if(!U){V=mstrmojo.desc(1099,"Not")+" "+V;}return V;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.css","mstrmojo.registry","mstrmojo.AjaxCall","mstrmojo.hash","mstrmojo.array","mstrmojo.Arr","mstrmojo.expr","mstrmojo.dom","mstrmojo.mstr.EnumDataType","mstrmojo.Label","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.WidgetDial","mstrmojo.Calendar","mstrmojo.DateTextBox","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ValidationTextBox","mstrmojo.ui.CheckList","mstrmojo.ui._HasScroller","mstrmojo.ui.ColumnContainer","mstrmojo.elementHelper");var AW=mstrmojo.css,AP=mstrmojo.registry,M=mstrmojo.hash,d=mstrmojo.mstr.EnumDataType,K=mstrmojo.array,u=K.map,L=mstrmojo.Arr,AS=mstrmojo.expr,b=AS.ET,q=AS.ET2TP,AI=AS.ET2TGT,O=AS.FN,AB=AS.FN_MRP,AQ=AS.DTP,l=AS.DTP2FN_DTP,AL=mstrmojo.meta.TP,P=mstrmojo.meta.STP,AX=AS.TP,W=AS.STP,U=mstrmojo.elementHelper;var Ad={};Ad[b.AQ]={target:1,fm:1,fn:1,c0:1,c1:1};Ad[b.AL]={target:1,fm:1,fn:1,c0:1};Ad[b.AE]={target:1,fm:1,es:1};Ad[b.AC]={target:1,fm:1,fm2:1,fm3:1,fn:1,c0:1,c1:1};Ad[b.MQ]={target:1,fn:1,c0:1,c1:1,dmy:1};Ad[b.MC]=Ad[b.MQ];Ad["*"]={target:1};var B={};B[b.MQ]={key:"metricFns",def:AS.METRIC_FNS};B[b.MC]={key:"metricFns",def:AS.METRIC_FNS};B[b.AQ]={key:"formFns",def:AS.FORM_FNS};B[b.AL]={key:"formFns",def:AS.FORM_FNS};B[b.AC]={key:"formFns",def:AS.FORM_FNS};B[b.AE]={key:"elemFns",def:AS.ELEM_FNS};var AD=mstrmojo.desc(14084,"Select a filter option or a qualification."),AC=mstrmojo.desc(14085,"Select one or more elements."),AA=mstrmojo.desc(14086,"Select an operator."),z=mstrmojo.desc(14087,"Enter a value or select an attribute from the list."),x=mstrmojo.desc(14088,"Select an attribute form. When done, click ## button.").replace("##",'"√"'),w=mstrmojo.desc(14089,"Select a condition."),t=mstrmojo.desc(14090,"Enter a value or select a metric from the list.");var AO=0,Ab=1;var H=mstrmojo.ui.ColumnContainer.prototype.updateColumnContainer;function F(Ai){var Ah=true,Ae=Ai.model,Af,Ag=Ae&&AS.fnCstCount(Ae.fn,Ae.fnt);if(!Ae){return ;}switch(Ae.et){case b.AQ:case b.AL:case b.MQ:for(Af=0;Af<Ag;Af++){Ah=Ah&&!Ai["invalid"+Af];}break;}Ai.okBtn.set("visible",Ah&&!!Ae.completed);}function J(){var Af=this.parent,Ae=((Af&&Af.cssText)||"").match(/height:\s*(\d*)px/);this.cssText=Ae&&Ae[0];}var Y="dummy",s={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:Y,css:"unselectable"},A={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:Y,css:"unselectable"},AZ={did:"idSelect",v:"idSelect",n:mstrmojo.desc(547,"Select"),t:Y,css:"unselectable"},AM={did:"idWait",v:"idQualification",n:mstrmojo.desc(5225,"Qualification"),t:Y,css:"unselectable"},a={did:"idAttribute",v:"idAttribute",n:mstrmojo.desc(518,"Attribute"),t:Y,css:"unselectable"},AH={did:"idMetric",v:"idMetric",n:mstrmojo.desc(517,"Metric"),t:Y,css:"unselectable"};function o(Ag){if(this.updating){return ;}var Ah=this.multiSelect,Ak=this.selectedItem,Aj=Ag&&Ag.added,Al=Ag&&Ag.removed;if(!Ah&&Aj&&Al&&Aj[0]===Al[0]){return ;}if(Ak&&Ak[AL]===Y){this.updating=true;if(Ah){this.removeSelect([this.selectedIndex]);}else{var Af=Al&&Number(Al[0]);Af=(Af==null)?-1:Af;this.set("selectedIndex",Af);}this.updating=false;}else{var Ae=this.parent.parent.parent.model;if(Ah){var Ai=this.items;Ae.edit(this.alias,{added:Aj&&K.get(Ai,Aj),removed:Al&&K.get(Ai,Al),itemIdField:this.itemIdField});}else{Ae.edit(this.alias,Ak);}}}mstrmojo.rw.ConditionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.rw.ConditionList",allowUnlistedValues:true,itemIdField:"did",getItemProps:function AU(Ai,Ae){var Ah=!!this.selectedIndices[Ae],Aj=Ai.n,Ag=false;if(Ai.t===12){var Af=K.filter(Ai.fs,function(Ak){return Ak.fgr>0;});if(Af.length>0){Ag=true;}}return M.copy({cls:(Ah?mstrmojo._IsList.SELECTED_CLS:"")+" "+(Ai.css||"")+" "+(Ai.t?("t"+Ai.t+((Ai.da||Ai.um)?"d":"")+(Ag?"g":"")+(Ai.st?(" st"+Ai.st):"")):""),n:Aj||"&nbsp;"},this._super(Ai,Ae));},onselectionChange:function r(Ae){this._super(Ae);o.call(this,Ae);}});function AG(Ag,Ai,Af){var Ah=Ag.items,Ae=K.indexOf(Ah,Ai);if((Ae===0)&&(Ah.length===1)){Af=mstrmojo.Arr.makeObservable((Af&&Af.length)?Af.concat():[]);Ag.set("items",Af);}else{if(Ae>-1){Ah.splice(Ae,1);}if(Af&&Af.length){K.insert(Ah,(Ae>-1)?Ae:Ah.length,Af);}Ag.refresh();}}function N(Ae){return mstrmojo.mixin(Ae,{scriptClass:"mstrmojo.rw.ConditionList",cssClass:"mstrmojo-"+Ae.alias,postCreate:J});}function V(Ag,Ae,Ah){var Af=Ag.cfg;if(Af){Af.data=Ag;Af.parent=Ah;return AP.ref(Af);}Af=new mstrmojo.Label({text:Ag.n||"&nbsp;",cssClass:"dial-item "+(Ag.t?("t"+Ag.t):"")});Af.markupMethods.onselectedChange=function(){AW.toggleClass(this.domNode,["selected"],this.selected);};Af.data=Ag;Af.parent=Ah;return Af;}function g(Af,Ae){var Ag=Ae+AS.FN_SEP+Af;return(Af!=null)?{did:Ag,n:Ag}:null;}function Aa(Ae){return Ae.targets?K.filter(Ae.targets,function(Af){return Af[AL]===AS.TP.ATTR;}):[];}function Q(Ag,Af,Ah,Ak){Ag.updating=true;if(Af){if(Ah!=null){Ag.clearSelect();Ag.set("items",Ah);}var Aj=Ag.itemIdField,Ai=Ag.selectedItem;if((Ai&&Ai[Aj])!=(Ak&&Ak[Aj])){var Ae=Math.max(K.indexOf(u((Ah||[]),function(Al){return Al[Aj];}),Ak&&Ak[Aj]),0);Ag.set("selectedIndex",Ae);}}Ag.updating=false;}function AT(Ae,Af,Ah,Ag){Ae.updating=true;Ae.clearSelect();K.forEach(Af,function(Ai){Ai.title=Ai.title||Ai.n||"";});if(Af){Ae.set("items",Af);}if(Ah&&Ah.length){Ae.setSelectedItems(Ah);}else{if(Ag&&Ag.length){Ae.select(Ag);}}Ae.updating=false;}function AK(Af,Ae,Ag,Ai,Ah){if(Ae){AT(Af,Ag,Ai,Ah);}}function AJ(Ag,Af){var Ae=Ag.model||{},Ah=Ae.fn;return(Ah!=null)&&((Ae.et===b.MQ)||(Ae.et===b.MC)||(Ae.et===b.AQ)||(Ae.et===b.AL)||(Ae.et===b.AC))&&(AS.fnCstCount(Ah,Ae.fnt)>Af);}var f={};f[AQ.DATE]=1;f[AQ.TIME]=1;f[AQ.TIMESTAMP]=1;function p(Ae,Ag){var Af;if(Ag){switch(AI[Ae.et]){case"a":Af=Ag[b.AC];break;case"m":Af=Ag[b.MC];break;default:Af=false;break;}}else{Af=true;}return Af&&AS.fn_AC_MC(Ae&&Ae.fn);}function k(Af){var Ai=Af&&q[Af.et],Ah=Af&&Af.fm&&Af.fm.dtp,Ae=Ah&&AS.DTP2PROMPT_STP[Ah],Ag={};Ag[Ai]=true;if(Ae){Ag[Ae]=true;}return Ag;}function e(Ae){switch(Ae){case d.DataTypeInteger:case d.DataTypeUnsigned:case d.DataTypeDecimal:case d.DataTypeReal:case d.DataTypeDouble:case d.DataTypeFloat:return d.DataTypeNumeric;default:return Ae;}}function C(Af){var Ah=Af.model,Am=Ah&&Ah[AI[Ah.et]]&&Ah[AI[Ah.et]][Af.columnWalk.target.itemIdField],Ag=Ah&&Ah.fm,Ae=Ag&&Ag.dtp,Aj=p(Ah,Af.ets);if(this.targetsLastMod&&this.targetsLastMod===Af.targetsLastMod&&Am&&Am===this._lastTargetId&&this.lastFmDtp===Ae&&this.lastFnTp===Aj){return ;}if(!Aj){this.clearSelect();this.set("items",this.items.slice(0,this.preLen));}else{var Ak=k(Ah),An=Ah[AI[Ah.et]],Ai=Ah.a?[a]:Ah.m?[AH]:[],Ao=Ai.concat(AS.getSortedObjectsByTypeGroup(K.filter(Af.targets,function(Ap){return(Ap.t!==4||Ap.did!==An.did)&&(Ak[Ap[AL]]||Ak[Ap[P]]);}))),Al=this.items.slice(this.preLen);K.forEach(Al.reverse(),function(Ap){this.remove(Ap);},this);this.add(Ao,-1);}this._lastTargetId=Am;this.lastFnTp=Aj;this.lastFmDtp=Ae;this.targetsLastMod=Af.targetsLastMod;}function AN(Ax,Ao){Ax.updating=true;var Ak=Ax.parent.parent.parent,Aw=AJ(Ak,Ao),Aq,As;if(Aw){var Ag=Ak.model||{},Ai=Ag.cs,Au=Ai&&Ai[Ao],An=Au&&Au.v,Al;C.call(Ax,Ak);switch(Ag.et){case b.MQ:case b.MC:Al=(Au&&Au.dtp)||e(Ag.m.dt)||AS.METRIC_DTP;break;case b.AQ:case b.AC:case b.AE:Al=Ag.fm&&Ag.fm.dtp;break;case b.AL:Al=Ag.fm&&Ag.fm.dtp;An=[];for(Aq=0,As=Ai&&Ai.length;Aq<As;Aq++){An.push(Ai[Aq].v);}An=An.join(mstrConfig.listSep);break;}Al=Al||AQ.CHAR;var Aj=Ag.fn,Ap=AS.fn_List(Aj,Ag.fnt),Ar=f[Al],At=Ar&&!Ap;var Af=Ax.ctxtBuilder,Ae=Af&&Af.itemWidgets,Av=Ar?(At?Ax.calIndex:Ax.dtxtIndex):Ax.txtIndex,Ah;for(Aq=0,As=Ax.preLen;Aq<As;Aq++){Ah=Ae[Aq];if(Aq==Av){Ah.set("dtp",Al);Ah.set("isList",Ap);Ah.set("value",An);Ah.set("visible",true);try{if(Ax.alias!=="c1"){Ah.focus&&Ah.focus();}}catch(Am){}if(Aj===1||Aj===2){Ah.constraints.min=0;}if(Ah.clearValidation){Ah.clearValidation();}}else{Ah.set("visible",false);}if(Ap){Ah.set("hint",mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep||";"));}else{Ah.set("hint","");}}if(Ak.hasPrompt&&Ax.selectedItem&&Ax.selectedItem.st===AS.STP.PROMPT_STRING){Ak.invalid0=false;}switch(Ag.et){case b.AQ:case b.AL:case b.MQ:if(Au&&Au.p){Ax.set("selectedItem",Au.p);}else{Ax.set("selectedIndex",Av);}break;case b.MC:case b.AC:Ax.set("selectedItem",Ag[AI[Ag.et]+(2+Ao)]);break;}}Ax.updating=false;}function j(){var Ah=this.parent,Af=Ah.parent.parent.parent,Ag=(this.isValid&&this.isValid())||(!this.isValid&&!mstrmojo.string.isEmpty(this.value)),Ae=Af.model;Af["invalid"+Ah.cstIndex]=!Ag;if(!this.updating&&Ag){this.updating=true;if(Ae){Ae.edit(Ah.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}F(Af);}function AV(){var Af=this.parent,Ae=Af.parent;Ae["invalid"+Af.cstIndex]=false;}function AF(Ae){this.tip.set("text",Ae);}function D(Ag){var Ai=this.selectedItem;Ag=K.filter(Ag,function(Aj){return(!Aj.icf);});if(Ai){var Af=K.find(Ag,this.itemIdField,Ai[this.itemIdField]);if(Af>-1){Ag=Ag.concat();Ag.splice(Af,1);}}AG(this,A,Ag);var Ah=this.items,Ae=Ah.length;if(Ae===1){this.singleSelect(0);}this.parent.updateScrollbars();}function I(Af){var Ae=[{did:660,cfg:{scriptClass:"mstrmojo.ValidationTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP|mstrmojo.validation.TRIGGER.VALUESET},onValid:j,onInvalid:j,onClearValidation:AV,size:6,visible:false}},{did:154,cfg:{scriptClass:"mstrmojo.Calendar",onvalueChange:j,visible:false}},{did:23,cfg:{scriptClass:"mstrmojo.DateTextBox",cssText:"margin-left:9px;",cssDisplay:"inline-block",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:j,onInvalid:j,onClearValidation:AV,calendarToBody:true,autoFormat:false,calConfig:{onmousedown:function(Ag){mstrmojo.dom.stopPropogation(Ag.hWin,Ag.e);}},visible:false}}];return N(M.copy(Af,{scriptClass:"mstrmojo.WidgetDial",makeObservable:true,itemFunction:V,selectionPolicy:"reselect",items:Ae.concat(),txtIndex:0,calIndex:2,dtxtIndex:2,preLen:Ae.length,insertUnlistedValuesAt:-1,itemIdField:"did",update:function(){AN(this,this.cstIndex);this.parent.updateScrollbars();},postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},itemsEffect:undefined,onchange:o}));}function G(Ae){return N(M.copy(Ae,{insertUnlistedValuesAt:-1,postCreate:function(){J.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,readCache:true,writeCache:true,params:{taskId:"getAttributeForms",attributeId:null,displayedForms:"0",styleName:"MojoAttributeStyle"},onsuccess:function(){var Ag=this.parent,Af=this.response;if((Af&&Af.did)!==Ag.lastAttrId){return ;}D.call(this.parent,Af.fms||[]);},onerr:function(){AG(this.parent,A,[s]);}});},update:function(){var Ap=this.fmPost,Ah=this.parent.parent.parent,Aj=Ah.model,Ao=Aj&&Aj["a"+Ap],Am=!!Ao,Ai,Al,Aq,Ag=Ah.disableElementsBrowsing,Af=Ao&&Ag&&Ag(Ao);if(Am){switch(Aj.et){case b.AQ:case b.AL:Al=Aj.fm;break;case b.AC:Al=Aj["fm"+Ap];break;case b.AE:Al=g(Aj.fn,1);break;}if(this.lastAttrId!==Ao.did){this.lastAttrId=Ao.did;Ai=[];if(this.isFirstFm){if(!Af&&(!Ao.ilk&&(!Ah.ets||Ah.ets[b.AE]))){Ai.push(AZ);var Ak=B[b.AE],An=Ak&&Ak.key;Ai=Ai.concat((An&&Ah[An])||Ak.def||[]);}Ai.push(AM);}if(Al&&(Aj.et!==b.AE)){Ai.push(Al);}Aq=this.ajx;Aq.params.attributeId=Ao.did;Aq.params.otp=Ao.t||12;Ai.push(A);L.makeObservable(Ai);}}if(Af&&Aj.et===b.AE){Al=null;}Q(this,Am,Ai,Al);if(Am&&Aq){if(Ah.getAttributeForms){D.call(this,Ah.getAttributeForms(Ao.did)||[]);}else{if(Ao.fms){D.call(this,Ao.fms);}else{if(Aq){if(Aq._delayId){window.clearTimeout(Aq._delayId);delete Aq._delayId;}Aq._delayId=window.setTimeout(function(){delete Aq._delayId;Aq.send();},500);}}}}}}));}var AE=[AS.STP.PROMPT,AS.STP.PROMPT_OBJECTS,AS.STP.PROMPT_ELEMENTS,AS.STP.PROMPT_EXPRESSION,AS.STP.PROMPT_EXPRESSION_DRAFT];function Z(Ae){if(Ae&&!M.isEmpty(Ae)){var Af=K.hash(AE);M.forEach(Ae,function(Ah,Ag){if(Ah){Af[q[Ag]]=true;}});return Af;}return null;}mstrmojo.rw.ConditionWalkProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.rw.ConditionWalkProvider",browseEs:function S(Ah,Ag,Aj){Ah.openPopup("eb",{zIndex:Ah.parent.zIndex+10,left:Math.round(Aj.x)+"px",top:Math.round(Aj.y)+"px"});var Af=Ah.eb.browser,Ae=Ah.model,Ai=Ae&&Ae.a&&Ae.a.did;if(!Ai){return ;}Af.set("attributeID",Ai);Af.set("selectedItems",Ae.es?M.clone(Ae.es):[]);Af.initBrowser();},browseObjs:function AY(Al,Ae,Af){Al.openPopup("ob",{zIndex:Al.parent.zIndex+10,left:Math.round(Af.x)+"px",top:Math.round(Af.y)+"px"});var Ag=Al.ob.browser;Ag.target=Ae;var Ah;switch(Ae.alias){case"dmy":Ah=[AS.TP.ATTR,AS.TP.DIM];break;case"c0":case"c1":var Aj=Al.model,Ai=Aj&&Aj.et,Am=Aj&&Aj.fm,Ak=Am&&Am.dtp||(Aj.m?AS.DTP.DECIMAL:AS.DTP.UNKNOWN);Ah=(Ai===b.MQ||Ai===b.MC)?[AS.TP.METRIC,AS.DTP2PROMPT_STP[Ak]]:[AS.TP.ATTR,AS.DTP2PROMPT_STP[Ak]];break;default:Ah=Z(Al.ets);Ah=Ah?M.keyarray(Ah,true):[AS.TP.ATTR,AS.TP.METRIC,AS.STP.REPORT_GRID,AS.STP.REPORT_GRAPH,AS.STP.REPORT_ENGINE,AS.STP.REPORT_TEXT,AS.STP.REPORT_DATAMART,AS.STP.REPORT_BASE,AS.STP.REPORT_GRIDGRAPH,AS.STP.REPORT_NONINTERACTIVE,AS.STP.FILTER].concat(AE);}Ah[Ah.length]=AS.TP.FOLDER;Ag.browse({rootFolderType:Aj&&(Aj.et===b.MQ||Aj.et===b.MC)?5:26,folderLinksContextId:33,onSelectCB:[Al,"onOBSelect"],browsableTypes:Ah.join(",")});},getFm2NodeProps:function AR(){return{alias:"fm2",children:[G({alias:"fm2",fmPost:2})],updateColumnContainer:function Ae(){var Af=this.parent.parent;this.fm2.update();AF.call(Af,x);H.call(this);}};},getC0NodeProps:function E(){var Ae=this;return{alias:"c0",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(527,"Value")},I({alias:"c0",cstIndex:0}),{scriptClass:"mstrmojo.Label",alias:"btwn",cssClass:"btwn",text:mstrmojo.desc(308,"and"),visible:false},I({alias:"c1",cstIndex:1,visible:false}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.c0);},visible:false}],updateColumnContainer:function Af(){this.c0.update();var Ai=this.parent,Ak=Ai.parent,Al=Ai.parent.model,An=Al&&Al.fn,Aj=An===O.BETWEEN||An===O.NOT_BETWEEN||An===AB.BETWEEN||An===AB.BETWEEN_DESCENDING,Ah=An===O.EQUAL||An===O.NOT_EQUAL||An===O.GREATER||An===O.GREATER_EQUAL||An===O.LESS||An===O.LESS_EQUAL,Ag=this.idx,Am=this.next;this.browseLink.set("visible",Ak.objectBrowsingEnabled&&p(Al,Ak.ets));this.btwn.set("visible",Aj);this.c1.set("visible",Aj);if(Aj){this.c1.update();}else{Al.edit("c1",{v:null,dtp:null,skipET:true});}if(Al.a2&&Ah){if(!(Am&&Am.fm2)){Ai.insertAndRemoveTrailing(Ag,Ae.getFm2NodeProps());}}else{Ai.removeTrailingContainer(Ag);}AF.call(Ak,Al.a?z:Al.m?t:"");H.call(this);}};},getFnNodeProps:function Ac(){var Ae=this;return{alias:"fn",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(9579,"Condition")},G({alias:"fn",allowUnlistedValues:false,update:function(){var Al=this.parent.parent.parent,Ah=Al.model||{},Am=Ah.et,Ak,An=false,Ao,Ag;switch(Am){case b.AE:An=!!Ah.a;break;case b.AQ:case b.AC:case b.AL:An=!!(Ah.fm&&Ah.fm.did);Ak=An?Ah.fm.dtp:null;break;case b.MQ:case b.MC:An=!!Ah.m;Ak=An?AS.METRIC_DTP:null;break;}if(An){var Ap=l[Ak];if((this.lastEt!==Am)||(this.lastFnDtp!==Ap)){this.lastEt=Am;this.lastFnDtp=Ap;var Aj=Am?B[Am]:null,Ai=Aj&&Aj.key;Ao=(Ai&&Al[Ai])||Aj.def||[];if(typeof (Ao)==="object"){Ao=Ao[Ap]||Ao["*"];}}Ag=g(Ah.fn,Ah.fnt||1);}Q(this,An,Ao,Ag);this.parent.updateScrollbars();}})],updateColumnContainer:function Af(){this.fn.update();var Ag=this.parent,Ah=Ag.parent,Ai=Ah.model,Ak=Ai&&Ai.fn,Aj=this.next,Al=Ak===O.IS_NULL||Ak===O.IS_NOT_NULL;if(Ak&&Al){Ag.removeTrailingContainer(this.idx);}else{if(Ak&&!(Aj&&Aj.c0)){Ag.insertAndRemoveTrailing(this.idx,Ae.getC0NodeProps());}}AF.call(Ah,Ai.a?AA:Ai.m?w:"");Aj=this.next;if(Aj){Aj.updateColumnContainer();}}};},getEsNodeProps:function T(){var Ag=[{scriptClass:"mstrmojo.ui.CheckList",alias:"es",itemIdField:"v",allowUnlistedValues:true,insertUnlistedValuesAt:0,selectionPolicy:"toggle",postCreate:function Af(){J.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,params:{taskId:"browseElements",attributeID:null,styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30},onsuccess:function(){var Ar=this.parent,Al=this.response;if((Al&&Al.did)!==Ar.lastAttrId){return ;}var An=(Al&&Al.es)?K.filter(Al.es,function(As){return !U.isNullElem(As.v);}):[],Aq=Ar.parent.parent.parent.model&&Ar.parent.parent.parent.model.es,Ao=function(Ay,At){var Ax=Ay&&Ay.length||0,Aw=At&&At.length||0,As=[],Av,Au;for(Av=0;Av<Aw;Av++){for(Au=0;Au<Ax;Au++){if(At[Av].n===Ay[Au].n){break;}}if(Au===Ax){As.push(At[Av]);}}return As;},Ap=function(As,At,Aw){var Av=[],Au;K.forEach(As,function(Ax){Au=K.filterOne(At,function(Ay){return Ax[Aw]&&Ay[Aw]&&Ax[Aw]===Ay[Aw];});if(Au){Av.push(Au);}});return Av.length===As.length?Av:As;};Aq=Aq&&Ap(Aq,An,"v");if(Ar.allowUnlistedValues){var Am=Ao(An,Aq);An=(Ar.insertUnlistedValuesAt===0)?Am.concat(An):An.concat(Am);}AT(Ar,An,Aq,null);Ar.parent.updateScrollbars();},onerr:function(){AG(this.parent,A,[s]);}});},onselectionChange:function Aj(Al){mstrmojo.ListBase.prototype.onselectionChange.call(this,Al);o.call(this,Al);},update:function Ai(){var Ao=this.parent.parent.parent,An=Ao.model,As=An&&An.a,At=!!As&&!As.ilk,Au,Al,Ar,Ap,Am,Av;if(At){if(this.lastAttrId!==As.did){this.lastAttrId=As.did;Au=An.es;Ap=Au&&Au.length;Au=Ap?Au.concat():[];Au.push(A);if(Ap){Ar=[];for(Am=1;Am<=Ap;Am++){Ar[Am]=Am;}}Av=this.ajx;Ao.updateBrowseElementsParams(Av.params,As);}else{Al=An.es;}}AK(this,At,Au,Al,Ar);if(At&&Av){if(Ao.getElements){var Aq=this;Ao.getElements(As,{success:function(Aw){AT(Aq,Aw.es||[],Ao.model&&Ao.model.es,null);Aq.parent.updateScrollbars();},failure:function(){AG(Aq,A,[s]);}});}else{Av.send();}}},setupScrollNodes:function Ah(){this.scrollNode=null;}}];if(!mstrApp.isSingleTier){Ag.splice(0,0,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7928,"Browse elements..."),onclick:function Ae(){this.parent.parent.parent.browse(this.parent.es);}});}return{alias:"es",children:Ag,updateList:function(Al){AK(this.es,true,Al,this.parent.parent.model.es,null);this.updateScrollbars();},updateColumnContainer:function Ak(){var Al=this.parent.parent;this.es.update();AF.call(Al,AC);}};},getFmNodeProps:function h(){var Ae=this;return{alias:"fm",children:[G({alias:"fm",fmPost:"",filter:false,isFirstFm:true})],updateColumnContainer:function Af(){this.fm.update();var Ap=this.parent,Ak=Ap.parent,Aj=Ak.model,Am=Aj&&Aj.fm,Ao=this.idx,An=Aj&&Aj.a,Ah=Ak.disableElementsBrowsing,Ag=An&&Ah&&Ah(An);var Al=(Aj.etWas&&Aj.etWas===b.AE)?Ab:AO,Ai=AO;if(Aj.et===b.AE&&!Ag){Ai=Ab;}if(Al!==Ai||Ai===AO){Ap.removeTrailingContainer(Ao);if(Ai===AO&&Am){Ap.addNextColumn(Ae.getFnNodeProps());}else{if(Ai===Ab){Ap.addNextColumn(Ae.getEsNodeProps());}}}AF.call(Ak,AD);H.call(this);}};},getTargetNodeProps:function R(){var Ae=this;return{alias:"target",target:null,browseLink:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(11859,"Based On")},N({alias:"target",insertUnlistedValuesAt:0,makeObservable:true,hideIfEmpty:true,postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},onObjBrowsed:function(Ah){if(Ah.st===W.FILTER||Ah.t===AX.REPORT||Ah.t===AX.PROMPT){this.parent.parent.parent.onOK();}},update:function Ag(){var Ai=this.parent.parent.parent,Aj=Ai.model,Am=Ai.targetsLastMod,An=Aj&&Aj.et;if(this.lastModel!==Aj||this.targetsLastMod!==Am){this.lastModel=Aj;this.targetsLastMod=Am;var Ah=Ai.targets,Ao=Ai.ets;if(Ao&&Ah&&Ah.length){var Al=Z(Ai.ets);Ah=K.filter(Ah,function(Ap){return Al[Ap[AL]];});}var Ak=Aj&&Aj[AI[An]];Q(this,true,AS.getSortedObjectsByTypeGroup(Ah),Ak);this.parent.updateScrollbars();}}}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.target);}}],updateColumnContainer:function Af(){this.target.update();var Ai=this.parent,Aj=Ai.parent,Ak=Aj.model,Am=Ak&&Ak.et,Ah=this.idx,Al=this.next;this.browseLink.set("visible",Aj.objectBrowsingEnabled);if(Am){switch(Am){case b.AQ:case b.AL:case b.AC:case b.AE:if(Ak.a&&!(Al&&Al.fm)){this.parent.insertAndRemoveTrailing(Ah,Ae.getFmNodeProps());}break;case b.MQ:case b.MC:if(Ak.m&&!(Al&&Al.fn)){this.parent.insertAndRemoveTrailing(Ah,Ae.getFnNodeProps());}break;case b.R:case b.F:case b.XML:this.parent.removeTrailingContainer(Ah);break;}}Al=this.next;if(Al){Al.updateColumnContainer();}}};}});var X=mstrmojo.rw.ConditionWalkProvider;X.updateOkBtn=F;X.setTip=AF;X.getChildJSON=N;X.updateList=Q;X.fmJson=G;X.cstJson=I;}());(function(){mstrmojo.requiresCls("mstrmojo.MobileCalendar","mstrmojo._IsInputControl","mstrmojo.android._HasPreviewButton");mstrmojo.android.inputControls.CalendarDIC=mstrmojo.declare(mstrmojo.MobileCalendar,[mstrmojo._IsInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.CalendarDIC",onpopupResized:function A(C){var B=this.domNode;if(B){B.style.zoom=parseInt((95*C.width/B.offsetWidth),10)+"%";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList","mstrmojo._HasLayout","mstrmojo._SupportsEllipsisText","mstrmojo.date","mstrmojo.string","mstrmojo.num","mstrmojo.hash","mstrmojo.expr","mstrmojo.StringBuffer","mstrmojo.android.ui.ElementsSearchBar","mstrmojo.GeoLocation","mstrmojo.android.ui.Button","mstrmojo.android.ui.TextInput","mstrmojo.ui.MobileSlider","mstrmojo.MobileCalendar","mstrmojo.android.ui.Calendar","mstrmojo.android.ui.ElementsPicker","mstrmojo.android._HasLingeringListSelections","mstrmojo.locales.datetime","mstrmojo.prompt.WebPrompt","mstrmojo.ui.MobileDateTimePicker","mstrmojo.ui.MobileReviewList","mstrmojo.array","mstrmojo.BarcodeReader","mstrmojo.string");mstrmojo.requiresDescs(189,221,1442,6149,8382,8383,8384,8397,8761);var d=mstrmojo.date,O=mstrmojo.desc,P=mstrmojo.prompt.WebPrompt.STYLES,Y=mstrmojo.prompt.WebPrompt.TYPES,H=mstrmojo.num,x=mstrmojo.android.ui.Button.newButton,R=mstrmojo.hash,h=mstrmojo.array,B=mstrmojo.dom.CSS3_TRANSITION_DURATION,Q=mstrmojo.expr,U={160:10,213:10,240:15,320:20};var a="<em>*</em>",L="item-icon",N="main-btn",p="item-btn",AC="Barcode",T="GeoLocation";var G={};var V=' onclick="mstrmojo.all.{@wid}.clickStepper({@idx}, false);"',u=V.replace("false","true");function AA(AE,AD,AF){try{AE.setAnswerValue.apply(AE,AF);}catch(AG){mstrmojo.alert(AG.message||AG);return false;}this.updateItem(AD);return true;}function Z(AF,AE){var AD=[],AG=[];h.forEach(AF,function(AH){AD[AH.v]=AH;AG.push(AH);});h.forEach(AE,function(AH){if(AD[AH.v]){return ;}AG.push(AH);});return AG;}function S(AF,AJ){var AE=[],AD=AJ.length,AI=0,AH=0,AK=0,AG=AF.length;for(AI=0;AI<AG;AI++){for(AH=AK;AH<AD;AH++){if(AF[AI].v===AJ[AH].dssid){AE.push(AJ[AH]);AK=AH+1;break;}}}return AE;}function AB(AI,AL,AQ,AO,AJ,AN,AR,AE){var AP=this,AM={title:O(9755,"Prompt Values")},AG=[],AF,AH,AK,AS,AD=function(){AM.children=AG;AF=function(){if(AK.deleteAction){var AX,AV=0,AU;var AW=[].concat(AL);for(AU in AS.selectedIndices){AX=parseInt(AU,10)-AV++;AQ.splice(AX,1);AW.splice(AX,1);}AS.set("items",AW);AL=AW;AS.set("height","auto");AK.resizeDialog();AK.setDeleteActions("done");return false;}AA.call(AJ,AR,AN,[Z.call(this,AR.answer.items||[],AS.items)]);AK.close();};AH=function(){AK.close();mstrmojo.BarcodeReader.readBarcodes({attributeID:AI.browseElements.source.did,searchForms:AR.prs.LookupForm,multiSelect:AE},AP,null,S(AS.items,AQ),AO);};var AT=x(O(8473,"Done"),AF);AT.alias="deleteBtn";AM.buttons=[x(O(221,"Cancel"),AH),AT];AK=mstrApp.showDialog(AM);AK.setDeleteActions=function(AU){if(AU==="delete"){this.selectionHidden=false;this.deleteAction=true;this.titleNode.lastChild.style.display="block";this.btnHbox.deleteBtn.set("text",O(629,"Delete"));mstrmojo.css.removeClass(AS.domNode,"hidden");}else{this.selectionHidden=true;this.deleteAction=false;this.titleNode.lastChild.style.display="none";this.btnHbox.deleteBtn.set("text",O(8473,"Done"));}};AK.updateTitleBarButtonClass=function(AU){AK.titleNode.lastChild.className="mstrmojo-Editor-titlebar-button "+AU;};AK.createTitleBarButton("mstrmojo-Editor-titlebar-button btnCheckSemi",function(){AS.selectAll();});AK.setDeleteActions("done");return AK;};AS=new mstrmojo.ui.MobileReviewList({controller:this.controller,isElastic:true,multiSelect:true,itemIdField:"v"});AM.useMenu=false;AG.push(AS);AS.set("items",AL);AD();}function D(){return(this._clkTarget.className===L);}function I(AG,AF,AD){var AE=AG.prs;return(AG.getStyle()===AF||(AE&&AE.DisplayStyle===AD));}function g(AD){if(I(AD,P.BARCODE,AC)||I(AD,P.GEO,T)){return(D.call(this))?p:N;}return"";}function f(AD){if(parseInt(AD.promptType,10)===Y.ELEMENTS_PROMPT&&AD.answer){return" ("+AD.getAnswersCount()+")";}return"";}function k(AF,AM){var AO=this.items[AM];if(AO.isTtl){return ;}var AN=AF.firstChild.childNodes,AE=AN[0],AD=AN[1],AG=!!AO.req,AL=f(AO),AK=this.ellipsisText,AJ;if(AG){AE.innerHTML=a+AE.innerHTML.replace(a,"");}var AI=this.ellipsize("h3",AE,false);if(AG){AJ=AE.innerHTML.replace(a,"");AE.innerHTML=AI?AJ.replace(AJ.slice(-1),a+AK):AJ+a;}var AH=this.ellipsize("h4",AD,true);if(AH&&AL){AD.innerHTML=mstrmojo.string.trim(AD.innerHTML.slice(0,-(AL.length+3)))+AK+AL;}}function l(AD){var AE=["prompts-dialog"];if(mstrApp.isTablet()&&mstrApp.isLandscape()){AE.push("prompts-landscape");}if(AD){AE.push(AD);}return AE.join(" ");}function w(AD){var AE=this.id;return R.copy(AD,{cssClass:l(),onClose:function(){var AF=mstrmojo.all[AE];AF.parent.closePrompt();AF.clearSelect();}});}function e(AF,AG,AE,AI,AD,AJ){AF.children=AG;var AH=[];if(!AD){AH.push(x(O(221,"Cancel")));}if(AI){AH.push(x(O(1442,"OK"),AI));}AF.buttons=AH;if(mstrApp.isTablet()){AF.anchor=this._getItemNode(AE);AF.anchorOrientation="h";AF.autoClose=true;AF.anchorOffset=U[mstrMobileApp.getDeviceDPI()];}this.parent.openPrompt(function(){mstrApp.showDialog(AF,AJ);});}function t(AE,AD){var AF=this.id;mstrmojo.BarcodeReader.readBarcodes(null,{success:function(AH){if(AE.promptType===Y.CONSTANT_PROMPT&&AE.dataType===mstrmojo.mstr.EnumDataType.DataTypeBigDecimal){var AG=mstrApp.getLocaleInfo();AH=AH.substr(0,1)+((AG&&AG.number.DECIMALSEPARATOR)||".")+AH.substr(1);}if(!AA.call(mstrmojo.all[AF],AE,AD,[AH])){return false;}},failure:function(AG){AE.setError(AG);mstrmojo.all[AF].updateItem(AD);}});}function M(AF,AD){var AG=this.id,AE="plTxtInputxz";e.call(this,w.call(this,{title:AF.title}),[{scriptClass:"mstrmojo.android.ui.TextInput",id:AE,alias:"textInput",textValue:AF.getDisplayValue(false,false)||"",onEnter:function(AH){if(!AA.call(mstrmojo.all[AG],AF,AD,[AH])){return ;}mstrApp.closeDialog();}}],AD,function(){if(!AA.call(mstrmojo.all[AG],AF,AD,[mstrmojo.all[AE].getValue()])){return false;}});}function X(AO,AL){var AG=this.id,AH=AO.answer.items||[],AI=AO.getAvailable(),AM=I(AO,P.BARCODE,AC),AF=D.call(this),AJ=AO.prs,AE=(AO.max===""||parseInt(AO.max,10)>1)&&AJ.DisplayStyle!=="Option button",AD=AJ.SearchRequired,AK=AD&&AD!=="0";AI.concat=true;var AN=function(){var AR=mstrmojo.all[AG];if(AM&&AF){mstrmojo.BarcodeReader.readBarcodes({attributeID:AI.source.did,searchForms:AO.prs.LookupForm,multiSelect:AE},{success:function(AW){var AV=JSON.parse(AW),AT=AI.convertElems(AV.items);if(AV.review){var AU=new mstrmojo.android.ui.ElementsPicker({isElastic:true,itemIdField:"v",multiSelect:true});AU.set("browseElements",AI);AU.addSelectedItems(AT);AB.call(this,AU,AT,AV.items,AV.displayKeypadView,AR,AL,AO,AE);}else{AA.call(AR,AO,AL,[Z.call(this,AH,AI.convertElems(JSON.parse(AW).items))]);}}});}else{var AQ=new mstrmojo.android.ui.ElementsPicker({isElastic:true,itemIdField:"v",multiSelect:AE});AQ.set("browseElements",AI);AQ.addSelectedItems(AH);var AS=new mstrmojo.android.ui.ElementsSearchBar({slot:"titleNode",target:AQ,browseElements:AI,searchForms:AM?AO.prs.LookupForm:undefined,searchRequired:AK,canSearch:AO.canSearch(),title:AO.title});var AP=function(){var AU;if(AE){AU=function(){AQ.syncSelection();return AA.call(AR,AO,AL,[AQ.getSelectedItems()]);};}else{var AT=AQ.singleSelect;AQ.singleSelect=function(AV,AW){AT.call(this,AV,AW);if(AV!=-1&&!AW){AA.call(AR,AO,AL,[AQ.getSelectedItems()]);this.parent.close();return true;}};}e.call(AR,w.call(AR,{title:O(6149,"Select Elements"),cssClass:l("edtElementPicker"),goBack:function(){return AS.goBack();}}),[AS,AQ],AL,AU,false);};if(I(AO,P.GEO,T)&&AF){AO.getGeoTargetValue({success:function(AT){var AU=AO.searchTarget,AV=AS.search.box;AS.initSearchValue=AT;AS.canSearch=true;if(AU){AS.initSearchValue='in "'+AT+'"';AS.searchTarget=AU;AV.searchValue=AT;}AP();}});}else{AP();}}};if(AI.browseConfig){AI.getItems(1,{success:AN});}else{AN();}}function s(AJ,AD){var AH=w.call(this,{title:AJ.title,cssClass:l("edtSlider")}),AE=AJ.getDisplayValue(true,false),AG=new mstrmojo.Label({text:AE,cssClass:"value"}),AF=new mstrmojo.Label({text:AJ.mn,cssClass:"title"}),AK=this.id;var AI=new mstrmojo.ui.MobileSlider({value:H.parseNumeric(AE),max:AJ.max,min:AJ.min,interval:AJ.interval,onvalueChange:function(){AG.set("text",H.toLocaleString(this.value));},onslidingValueChange:function(){AG.set("text",H.toLocaleString(this.slidingValue));},onRender:function(){this.parent.attachEventListener("resizeCurtain",this.id,this.resize);}});e.call(this,AH,[AG,AF,AI],AD,function(){if(!AA.call(mstrmojo.all[AK],AJ,AD,[String(AI.value)])){return false;}});}function z(AM,AL,AI){var AF=w.call(this,{title:AM.title}),AG=mstrmojo.date,AK=mstrmojo.locales.datetime,AN=AM.answer,AH=AM.min,AJ=AM.max,AD=new mstrmojo.ui.MobileDateTimePicker({value:AG.parseDateAndOrTime(AN||""),min:AG.parseDateAndOrTime(AH||""),max:AG.parseDateAndOrTime(AJ||""),minuteInterval:AM.interval,hideSwitchers:AI==Q.DTP.DATE,dtp:AI||Q.DTP.TIMESTAMP}),AE=this.id;e.call(this,AF,[AD],AL,function(){var AO=AD.getDateTime(),AR=AO&&AO.date,AT=AO&&AO.time,AP=(AR&&AG.formatDateInfo(AR,AK.DATEOUTPUTFORMAT))||"",AS=(AT&&AG.formatTimeInfo(AT,AK.TIMEOUTPUTFORMAT))||"",AQ=[AP+" "+AS];if(AM.promptType===Y.ELEMENTS_PROMPT){AQ=[AQ];}if(!AA.call(mstrmojo.all[AE],AM,AL,AQ)){return false;}});}function b(AM,AL){var AJ={alias:"calendar"},AK=AM.max,AD=this.id,AF,AE,AI=false,AH=this.parent.domNode,AG=R.copy(w.call(this,{cssClass:l()}),{targetListHeight:AH.clientHeight,targetListWidth:AH.clientWidth});switch(AM.promptType){case Y.CONSTANT_PROMPT:AI=true;break;case Y.ELEMENTS_PROMPT:if(1===parseInt(AK,10)){AI=true;break;}AG.title=O(8383,"Select Dates");AJ.min=d.parseDate(AM.prs.LocalizedMinDate||"");AJ.max=d.parseDate(AM.prs.LocalizedMaxDate||"");AJ.selectedDates=AM.getAnswerAsDateArray();AJ.isMultiSelect=true;AF=function(){try{AM.setAnswerValue(AE.getSelectedDates());}catch(AN){mstrmojo.alert(AN.message||AN);return false;}AM.syncDateAnswer({success:function(){mstrApp.closeDialog();var AO=mstrmojo.all[AD];AO.updateItem(AL);AA.call(AO,AM,AL,[AE.getSelectedDates()]);},failure:function(AO){window.setTimeout(function(){mstrmojo.alert(AO);},0);}});return false;};break;default:throw new Error(O(8397,"Error: Unknown prompt type."));}if(AI){z.call(this,AM,AL,Q.DTP.DATE);}else{AE=new mstrmojo.android.ui.Calendar(AJ);e.call(this,AG,[AE],AL,AF,false,"CalendarDialog");}}function F(AE,AD){var AF=this.id;mstrmojo.confirm(O(8384,'"MicroStrategy" Would Like to use Your Current Location.'),[x(O(221,"Cancel")),x(O(1442,"OK"),function(){mstrmojo.GeoLocation.getCurrentLocation({success:function(AI,AG,AH){AA.call(mstrmojo.all[AF],AE,AD,[AI,AG]);},failure:function(AG){AE.setError(AG);mstrmojo.all[AF].updateItem(AD);}});})]);}function J(AE,AD){AE.toggleSwitch();this.updateItem(AD);}var r={};r[P.BARCODE]=t;r[P.TEXT]=M;r[P.LIST]=X;r[P.SLIDER]=s;r[P.CALENDAR]=b;r[P.TIME]=z;r[P.GEO]=F;r[P.SWITCH]=J;mstrmojo.android.ui.PromptsList=mstrmojo.declare(mstrmojo.android.SimpleList,[mstrmojo._SupportsEllipsisText,mstrmojo.android._HasLingeringListSelections],{scriptClass:"mstrmojo.android.ui.PromptsList",listHooks:{select:function(AF,AG,AD){var AE=g.call(this,AG);if(AE){mstrmojo.css.addClass(AF,AE);}AF.style[B]=0;this.setClearHandler(200);},unselect:function(AF,AG,AD){var AE=g.call(this,AG);if(AE){mstrmojo.css.removeClass(AF,AE);}AF.style[B]="300ms";}},getItemMarkup:function(AF){if(AF.isTtl){return'<div class="item {@cls}" idx="{@idx}">{@ttl}</div>';}var AE=AF.getStyle(),AI=I(AF,P.GEO,T)||I(AF,P.BARCODE,AC),AG=AE+String(AF.req)+(AI?"ic":""),AD=G[AG];if(!AD){var AH=new mstrmojo.StringBuffer();AH.append('<div class="item {@cls}" idx="{@idx}"><div><h3>{@ttl}'+a+"</h3><h4>{@val}</h4>");if(AE===P.STEPPER){AH.append('<div class="step"><div'+V+"></div><div>{@v}</div><div"+u+"></div></div>");}else{if(AI||AE===P.SWITCH){AH.append('<div class="'+L+'"><div></div></div>');}}AD=G[AG]=AH.toString()+"</div></div>";}return AD;},getItemProps:function j(AH,AD){var AG=this._super(AH,AD);AG.ttl=AH.title;if(AH.isTtl){AG.addCls("ttl");return AG;}var AF=AH.getStyle(),AI=(AF===P.STEPPER||AF===P.SWITCH),AE=AH.getDisplayValue(AI,AI);if(I(AH,P.BARCODE,AC)){AG.addCls("bar");}else{if(I(AH,P.GEO,T)){AG.addCls("geo");}}AG.wid=this.id;AG.val=AE||"";AG.addCls("st"+AF);if(AH.req){AG.addCls("req");}switch(AF){case P.STEPPER:if(!AH.canStepUp()){AG.addCls("max");}if(!AH.canStepDown()){AG.addCls("min");}AG.v=AE;AG.val=AH.mn||"";break;case P.SWITCH:AG.val=AH.mn||"";if(AE){AG.addCls("on");}break;case P.GEO:if(!AH.displayLoc){AH.getDisplayLocation(this,AE);}break;}if(AG.val){AG.addCls("has-ans");}return AG;},updateItem:function o(AD){k.call(this,this._super(AD),AD);},allowTouchBubble:false,onRender:function C(){if(this._super){this._super();}var AD=this.itemsContainerNode.childNodes,AF=AD.length,AE;for(AE=0;AE<AF;AE++){k.call(this,AD[AE],AE);}},clickStepper:function E(AD,AE){this.items[AD]["step"+(AE?"Up":"Down")]();this.updateItem(AD);},postselectionChange:function A(AE){var AG=AE.added;if(!AG){return ;}var AD=AG[0],AH=this.items[AD],AF=AH.getStyle();if(AF===P.BARCODE&&!D.call(this)){AF=P.TEXT;}var AI=r[AF];if(AI){AI.call(this,AH,AD);}},rootOrientationChange:function K(){this.refresh();},touchSelectBegin:function W(AJ){var AD=this.getItemIdxTouch(AJ);if(AD>-1){var AG=this.items[AD],AE=AG.getStyle(),AI=[];var AF=AG.mn||"";if(AF){AI.push(AF);}if(!(AE===P.SWITCH)&&!(AE===P.STEPPER)){var AH=AG.getDisplayValue(false,false);if(AH){AI.push(AH);}}if(AG.req){AI.push(O(475,"This prompt is required and must be answered."));}if(AI.length){mstrmojo.alert(AI.join("<br /><br />"),null,O(189,"Details"));}return false;}return true;},touchTap:function q(AD){var AE=this.items[this.getItemIdxTouch(AD)];if(AE&&AE.isTtl){return ;}this._clkTarget=AD.target;this._super(AD);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.android.ui.PromptsList","mstrmojo.android.ui.Button");mstrmojo.requiresDescs(2550,3649,3650);var D=mstrmojo.desc,E="100%";function G(J,K){var L=this.parent;if(L[J]){L[J].apply(L,K);return true;}return false;}var C=mstrmojo.android.ui.PromptsView=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.android.ui.PromptsView",markupString:'<div id="{@id}" class="mstrmojo-Prompts {@cssClass}" style="{@cssText}"><div class="summary"></div><div class="command"></div></div>',markupSlots:{summaryNode:function(){return this.domNode.firstChild;},cmdNode:function(){return this.domNode.lastChild;}},layoutConfig:{h:{summaryNode:E,cmdNode:"90px"},w:{summaryNode:E,cmdNode:E}},init:function I(M){this._super(M);var L=this.prompts,K=this.supportedPrompts;if(L&&K){var J=mstrmojo.android.ui.Button.newButton((L.host.st===14081)?D(3650,"Run Document"):D(3649,"Run Report"),function(){this.parent.controller.answerPrompts();},{slot:"cmdNode",alias:"cmdButton",cssClass:"mstrmojo-GlowButton",ignoreLayout:true,enabled:mstrMobileApp.isOnline(),glowClass:"glow"});var N=mstrmojo.publisher;N.subscribe(N.NO_SRC,N.CONNECTIVITY_CHANGED_EVENT,function(O){this.cmdButton.set("enabled",O);},this.id);this.addChildren([J]);if(mstrApp.isTablet()){K=[{title:D(2550,"FILTERS"),isTtl:true}].concat(K);}this.promptList.set("items",K);}},rootOrientationChange:function F(){if(!this.ignoreRotation){mstrApp.closeDialog();}},children:[{scriptClass:"mstrmojo.android.ui.PromptsList",slot:"summaryNode",alias:"promptList",canItemLinger:function H(J){return !mstrApp.isTablet()||J.getStyle()===mstrmojo.prompt.WebPrompt.STYLES.SWITCH;}}],openPrompt:function A(L){var J=this.controller;if(!J.prevController&&!J.nextController){return ;}this.ignoreRotation=true;if(!G.call(this,"openPrompt",[L])){L();}var K=this;window.setTimeout(function(){delete K.ignoreRotation;},300);},closePrompt:function B(){G.call(this,"closePrompt");}});mstrmojo.DPIManager.registerClass(C,"h","cmdNode",{160:60,213:60,240:90,320:120});}());(function(){mstrmojo.requiresCls("mstrmojo.android.AndroidDICPopup","mstrmojo.DefaultDIC","mstrmojo.android.inputControls.SliderDIC","mstrmojo.android.inputControls.TextFieldDIC","mstrmojo.android.inputControls.CheckBoxDIC","mstrmojo.android.inputControls.PullDownDIC","mstrmojo.android.inputControls.RadioListDIC","mstrmojo.android.inputControls.LikertScaleDIC","mstrmojo.android.inputControls.CalendarDIC","mstrmojo.android.inputControls.DateTimePickerDIC","mstrmojo.android.inputControls.TextAreaDIC","mstrmojo.android.inputControls.MarkRowDIC","mstrmojo.android.inputControls.ToggleDIC","mstrmojo.android.inputControls.SignatureDIC","mstrmojo.android.inputControls.StepperDIC","mstrmojo.android.inputControls.RatingDIC","mstrmojo.android.inputControls.BarcodeDIC","mstrmojo.android.ui.Button","mstrmojo.android.nativedialog.DICDialogFactory");mstrmojo.requiresDescs(221,1442);var Q=mstrmojo.android.ui.Button.newButton,B=1,I=2,C=3,E=4,L=5,R=6,D=7,F=8,H=9,T=10,G=12,S=13,P=14,K=102;mstrmojo.android.AndroidDICConfig=mstrmojo.provide("mstrmojo.android.AndroidDICConfig",{DICList:{1:mstrmojo.android.inputControls.TextFieldDIC,2:mstrmojo.android.inputControls.CheckBoxDIC,3:{0:mstrmojo.android.inputControls.PullDownDIC,1:mstrmojo.android.inputControls.RadioListDIC},4:mstrmojo.android.inputControls.SliderDIC,5:mstrmojo.android.inputControls.DateTimePickerDIC,6:mstrmojo.android.inputControls.DateTimePickerDIC,7:mstrmojo.android.inputControls.ToggleDIC,8:mstrmojo.android.inputControls.TextAreaDIC,9:mstrmojo.android.inputControls.SignatureDIC,10:mstrmojo.android.inputControls.RatingDIC,11:mstrmojo.DefaultDIC,12:mstrmojo.android.inputControls.StepperDIC,13:mstrmojo.android.inputControls.BarcodeDIC,14:mstrmojo.android.inputControls.LikertScaleDIC,102:mstrmojo.android.inputControls.MarkRowDIC},DICPopup:{getInstance:function(V,W){var U={scriptClass:"mstrmojo.android.AndroidDICPopup",widget:W,buttons:[Q(mstrmojo.desc(221,"Cancel"),function(){this.parent.parent.onCancel();}),Q(mstrmojo.desc(1442,"OK"),function(){return this.parent.parent.onApply();})],title:W.popupTitle||V.parent.title};if(mstrApp.useBinaryFormat){mstrmojo.android.nativedialog.DICDialogFactory.showDialog(U);}else{return mstrApp.showPopup(U);}}},getDICClass:function J(U){if(U.t===C){return this.DICList[U.t][U.st||0];}return this.DICList[U.t];},showDICByDefault:function O(V,U){if(V.sbd===undefined){switch(V.t){case C:V.sbd=(!!V.st);break;case L:case R:case B:case S:V.sbd=false;break;case D:case I:case K:case T:case G:case P:V.sbd=true;break;default:V.sbd=(V.dm===1);}}return V.sbd;},hasDICPreview:function N(V,U){return true;},isKeyNavigable:function M(U){if(U.ikn===undefined){U.ikn=false;}return U.ikn;}});mstrmojo.android.AndroidDICConfig.TYPES={TEXTFIELD:B,SWITCH:I,LIST:C,SLIDER:E,CALENDAR:L,TIMEPICKER:R,TOGGLE:D,TEXTAREA:F,SIGNATURE:H,RATING:T,STEPPER:G,LIKERTSCALE:P};var A=mstrmojo.android.AndroidDICConfig;mstrmojo.DICConfig=A;mstrmojo.DICList=A.DICList;mstrmojo.DICPopup=A.DICPopup;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.hash","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._HasPopup","mstrmojo.ui.ColumnWalk","mstrmojo.Button","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ConditionModel","mstrmojo.rw.ConditionWalkProvider");var P=mstrmojo.Widget,H=mstrmojo.array,E=mstrmojo.dom,M=mstrmojo.hash,A=mstrmojo.mstr.EnumNodeDimty,S=mstrmojo.rw.ConditionWalkProvider.updateOkBtn,I=mstrmojo.rw.ConditionWalkProvider.setTip;var C=mstrmojo.desc(11899,"Select a dataset object.");var K=H.hash([A.NodeDimtyOutputLevel]);function D(){var T=this.model;if(T){if(!T.attachEventListener){mstrmojo.hash.make(T,mstrmojo.ConditionModel,{});}T.attachEventListener("edit",this.id,"onmodeledit");}}function L(U,T){if(T&&T.detachEventListener){T.detachEventListener("edit",U.id,"onmodeledit");}}function N(Y,T){var W=T,X=[],V=[],U=[],Z=false;M.forEach(W,function(a){X=X.concat(a.att.filter(function(b){return b.did===Y;}));});Z=X[0]&&X[0].da;X.forEach(function(a){V=V.concat(a.fs||[]);});V.forEach(function(a){if((a.obf||Z)&&U.filter(function(b){return b.did===a.fid;}).length===0){U.push({did:a.fid,dtp:mstrmojo.expr.mapBaseFormTypeToDataType(a.bftp),n:a.fnm,t:a.t});}});return U;}mstrmojo.rw.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._HasPopup],{scriptClass:"mstrmojo.rw.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},walkNode:function(){return this.domNode.children[1];},applyNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function J(){P.visibleMarkupMethod.call(this);if(this.visible){this.initWalk();}},onheightChange:P.heightMarkupMethod,onwidthChange:P.widthMarkupMethod},layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",applyNode:"auto"},xt:true},editor:undefined,columnWalk:undefined,tip:undefined,walkProvider:null,objectBrowsingEnabled:true,postCreate:function B(){if(this._super){this._super();}if(!this.walkProvider){this.walkProvider=mstrmojo.insert(mstrmojo.rw.ConditionWalkProvider);}},initWalk:function O(){var T=this.columnWalk,U=this.walkProvider;I.call(this,C);T.removeTrailingContainer(-1);T.addNextColumn(U.getTargetNodeProps());T.target.updateColumnContainer();S(this);},updateBrowseElementsParams:function(W,V){W.attributeID=V.did;W.otp=V.t||12;var U=this.editor,T=U&&U.onUpdateBrowseElementsParams;if(T){T.call(U,W,V);}},children:[{scriptClass:"mstrmojo.ui.ColumnWalk",alias:"columnWalk",slot:"walkNode",height:"333px",width:"750px"},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",title:mstrmojo.desc(2399,"Cancel"),ignoreLayout:true,onclick:function(){var T=this.parent;if(T.close){T.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",title:mstrmojo.desc(2397,"OK"),onclick:function(){var T=this.parent;if(T.onOK){T.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:C,ignoreLayout:true}],eb:{scriptClass:"mstrmojo.Editor",cssClass:E.isIE7?"mstrmojo-ElementsEditorIE7":"mstrmojo-ElementsEditor",title:mstrmojo.desc(6149,"Select Elements"),help:"element_browser_dialog_box.htm",children:[{scriptClass:"mstrmojo.ElementsBrowser",alias:"browser",onUpdateBrowseElementsParams:function(U){var T=this.parent.opener;T.updateBrowseElementsParams(U,T.model.a);}},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-WebButton hot",cssText:"width: 66px;",onclick:function(){var T=this.parent.parent,U=T&&T.opener;if(U){U.onEBSelect();U.closePopup();}}},{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-WebButton",cssText:"min-width: 66px; margin-left: 11px;",onclick:function(){var T=this.parent.parent,U=T&&T.opener;if(U){U.closePopup();}}}]}]},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,upButtonVisible:true,scrollableIncFetch:true,showCompletePath:false,closeable:false,closeOnSelect:false,browsableTypes:"3,4,8,10,12,256",includeObjectDesc:true,quickSearch:true,minSearchLength:1}]},_set_model:function R(W,T){var U=this.model,V=(T!==U);if(V){L.call(this,U);T.dimtyTypes=this.dimtyTypes||K;this.model=T;D.call(this,T);if(this.hasRendered&&this.visible){this.columnWalk.target.updateColumnContainer();}}return V;},onmodeledit:function G(T){this.columnWalk[T.prop==="c1"?"c0":T.prop].updateColumnContainer();S(this);},browse:function F(V){var X=this.parent.editorNode,W=function(Z,b){var Y=mstrmojo.dom.position(Z,true),a=mstrmojo.dom.position(b,true);return{x:Y.x+Y.w,y:a.y};},T=this.columnWalk,U=this.walkProvider;switch(V&&V.alias){case"target":case"dmy":U.browseObjs(this,V,W(V.alias==="target"?T.target.domNode:this.dmyNode,X));break;case"c0":case"c1":U.browseObjs(this,V,W(T.c0.domNode,X));break;case"es":U.browseEs(this,V,W(T.es.domNode,X));break;}},onOBSelect:function(X){var V=this.ob.browser,Z=V.target;this.closePopup();var U=this.targets,Y=Z.itemIdField,W=U||[],T=H.find(U,Y,X[Y]);if(T===-1){W.push(X);this.targets=W;this.targetsLastMod=new Date();this.raiseEvent({name:"updateTargets",targets:this.targets});}Z.setSelectedItems([X],Z.multiSelect);if(Z.onObjBrowsed){Z.onObjBrowsed(X);}},onEBSelect:function(){var U=this.eb.browser,W=this.columnWalk.es.es;W.set("selectedIndices",{});var T=W.items,V=[];H.forEach(U.selectedItems||[],function(Y){if(H.find(W.items,"v",Y.v)<0){V.push(Y);}});var X=W.insertUnlistedValuesAt||0;if(X<0){X=T.length;}W.set("items",T.slice(0,X).concat(V).concat(T.slice(X)));W.setSelectedItems(U.selectedItems,false);},destroy:function Q(U){var T=this.walkProvider;if(T&&T.destroy){this.walkProvider.destroy();}this._super(U);}});mstrmojo.rw.ConditionWalk.getAttForms=N;}());(function(){mstrmojo.requiresCls("mstrmojo.maps.jsmap.AndroidRptMap","mstrmojo.maps.androidmap.AndroidRptMap","mstrmojo.Obj");mstrmojo.maps.AndroidRptMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.maps.AndroidRptMap"});if((typeof (mstrMobileApp)!="undefined")&&(typeof (mstrMobileApp.useNativeMap)!="undefined")&&mstrMobileApp.useNativeMap()){mstrmojo.maps.AndroidRptMap=mstrmojo.maps.androidmap.AndroidRptMap;}else{mstrmojo.maps.AndroidRptMap=mstrmojo.maps.jsmap.AndroidRptMap;}})();(function(){mstrmojo.requiresCls("mstrmojo.maps.jsmap.AndroidDocMap","mstrmojo.maps.androidmap.AndroidDocMap");mstrmojo.maps.AndroidDocMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.maps.AndroidDocMap"});if((typeof (mstrMobileApp)!="undefined")&&(typeof (mstrMobileApp.useNativeMap)!="undefined")&&mstrMobileApp.useNativeMap()){mstrmojo.maps.AndroidDocMap=mstrmojo.maps.androidmap.AndroidDocMap;}else{mstrmojo.maps.AndroidDocMap=mstrmojo.maps.jsmap.AndroidDocMap;}}());(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.dom","mstrmojo._TouchGestures","mstrmojo.VisChartUtils","mstrmojo._HasTouchScroller","mstrmojo.color","mstrmojo.css","mstrmojo.VisMicroChartLine","mstrmojo.VisMicroChartBar","mstrmojo.VisMicroChartBullet","mstrmojo._NeedSyncScroller");var S=1;var s=2;var A=3;var W=4;var V=0,d=1,r=2,C=3,AD=4,F=5;var o=0;var x=1;var AE=2;var AB="width:0px;height:0px;border-left:10px solid black;border-top:5px solid transparent;border-bottom:5px solid transparent;margin-left:auto;margin-right:auto;-webkit-transform:scale(0.8,0.9)";var AA="width:0px;height:0px;border-left:5px solid transparent;border-top:10px solid black;border-right:5px solid transparent;margin-left:auto;margin-right:auto;-webkit-transform:scale(0.9,0.8)";var l=0,T=1;var E=1;var Q=mstrmojo.color,D=mstrmojo.css;var a="microchart-table-text";var R=0;var P=0;function f(AG){AG.innerHTML="";}function e(){var AG=this.backgroundColor;if(!AG){return ;}this.dockedHeaderTable.style.backgroundColor=AG;this.dockedHeaderTable.style.opacity="1";this.dockedHeaderReplaceDiv.firstChild.style.backgroundColor=AG;this.dockedHeaderReplaceDiv.firstChild.style.opacity="1";}function M(AI,AJ){var AN=AI.style.height;var AG=AI.style.width;var AO=AI.style.textDecoration;var AM=AI.style.display;var AP=AI.style.fontSize;var AK=AI.style.paddingLeft;var AH=AI.style.paddingRight;var AL=AI.style.boxShadow;AI.style.cssText=AJ;AI.style.height=AN;AI.style.width=AG;AI.style.textDecoration=AO;if(AM){AI.style.display=AM;}if(AP){AI.style.fontSize=AP;}if(AK){AI.style.paddingLeft=AK;}if(AH){AI.style.paddingRight=AH;}if(AL){AI.style.boxShadow=AL;}}function u(AO,AN,AJ){var AH=AN.level;var AI="";if(AN.isLeaf){AI=o;}else{if(AN.needExpand){AI=x;}else{AI=AE;}}var AK=null;var AL=this.bodyFontColorRGB;var AM=this.theme;if(AI==AE){AO.className="microchart-tree-arrow-close";AK="border-left-color";}else{if(AI==x){AO.className="microchart-tree-arrow-open";AK="border-top-color";}else{AO.className="";AO.setAttribute("style","");return ;}}var AG="";if(AJ){AG=AK+":"+AJ;}else{if(AM==s){if(AH==0){AG=AK+":#4d4d4d";}else{if(AH==1){AG=AK+":rgba(77,77,77,0.8)";}else{if(AH>1){AG=AK+":rgba(77,77,77,0.6)";}}}}else{if(AM==S){if(AH==0){AG=AK+":#c2c2c2";}else{if(AH==1){AG=AK+":rgba(194,194,194,0.8)";}else{if(AH>1){AG=AK+":rgba(194,194,194,0.6)";}}}}else{if(AL&&AL.length>2&&(AM==W||AM==A)){if(AH==0){AG=AK+":rgba("+AL[0]+","+AL[1]+","+AL[2]+",0.8)";}else{if(AH>0){AG=AK+":rgba("+AL[0]+","+AL[1]+","+AL[2]+",0.7)";}}}}}}AO.setAttribute("style",AG);}function O(Av,Aa){var Ad=this.widget,Al=Ad.rows[Av],AK=Al.model,AN=AK.elms,AM=this.rowTemplate,AP=Al.treeNode,Ae=this.colInfos,Av=Al.rowIdx,Ak=null,AQ=Ae.length;var Ac=this.bodyFontColorRGB;var AU=this.headerTable.firstChild.firstChild.childNodes;Ak=Aa?Aa.rowRef:Al.rowRef;var Au=null;var Ah=null;if(Ak[this.domRefName]){Au=Ak[this.domRefName];}else{Au=AM.cloneNode(true);Ak[this.domRefName]=Au;}Au.style.display="";j.call(this,Aa?Aa:Al);Au.setAttribute("rowType",Aa?l:T);var Ah=Au.childNodes;var AR=null;for(var Aq=0,AS=0;Aq<AQ;Aq++,AS++){var Aj=Ae[Aq];var Af=Aj.colIdx;Ah[Aq].setAttribute("mrow",Al.rowIdx);if(Af==this.treeColumnIdx&&AP){var An=Ah[Aq].firstChild;u.call(this,An,AP);if(!AP.isLeaf){An.parentNode.setAttribute("CLK","T");}continue;}if(Aj.type==V||Aj.type==d){if(this.isTreeMode){var Ag="";for(var Ao=0;Ao<AP.es.length;Ao++){Ag+=AP.es[Ao].n;}if(Ag.indexOf("&lt;")>=0){Ag=Ag.replace(/&lt;/g,"<");Ag=Ag.replace(/&gt;/g,">");}Ah[Aq].innerHTML=Ag;if(AP.level==0){Ah[Aq].style.fontWeight="bold";}else{Ah[Aq].style.fontWeight="";}if(AP.level>0&&(this.theme==A||this.theme==W)){if(Ac&&Ac.length>2){Ah[Aq].style.color="rgba("+Ac[0]+","+Ac[1]+","+Ac[2]+",0.8)";}}else{}}else{AR=AN[Aj.order];var Ag=AR?AR.n:"";if(Ag.indexOf("&lt;")>=0){Ag=Ag.replace(/&lt;/g,"<");Ag=Ag.replace(/&gt;/g,">");}Ah[Aq].innerHTML=Ag;}continue;}if(Aj.order=="LineChart"){if(Ak[Af]){var Ai=Ak[Af];if(AK.isTotal&&!this.isTreeMode){Ai.domNode.style.display="none";}else{Ai.domNode.style.display="";Ai.model=AK.model;Ai.refv=AK.refv;Ai.kpiOffset=this.kpiOff*Av;Ai.reDrawChart();}}else{if(AK.isTotal&&!this.isTreeMode){continue;}var Ab=document.createElement("div");var AY={placeholder:Ab,model:AK.model,refv:AK.refv,config:Ad.sparklineProps,widget:Ad,kpiOffset:this.kpiOff*Av,width:Aj.contentWidth,height:P,mainOffsetTop:this.offsetTop,mainLeftPos:parseInt(this.domNode.style.left,0)||0,mainWidth:this.getWidth(),isTreeMode:this.isTreeMode,theme:this.theme};Ah[Aq].appendChild(Ab);var Ai=new mstrmojo.VisMicroChartLine(AY);Ai.render();Ah[Aq].removeAttribute("class");Ak[Af]=Ai;}}else{if(Aj.order=="BarChart"){if(Ak[Af]){var Ai=Ak[Af];if(AK.isTotal&&!this.isTreeMode){Ai.domNode.style.display="none";}else{Ai.domNode.style.display="";Ai.model=AK.model;Ai.refv=AK.refv;Ai.kpiOffset=this.kpiOff*Av;Ai.isTextBold=this.isTreeMode?AP.level==0:false;Ai.reDrawChart();}}else{if(AK.isTotal&&!this.isTreeMode){continue;}var Ab=document.createElement("div");var AY={placeholder:Ab,model:AK.model,refv:AK.refv,widget:Ad,kpiOffset:this.kpiOff*Av,config:Ad.barProps,width:Aj.contentWidth,height:P,mainOffsetTop:this.offsetTop,mainLeftPos:parseInt(this.domNode.style.left,0)||0,mainWidth:this.getWidth(),isTreeMode:this.isTreeMode,theme:this.theme,isTextBold:this.isTreeMode?AP.level==0:false};Ah[Aq].appendChild(Ab);var Ai=new mstrmojo.VisMicroChartBar(AY);Ai.render();Ah[Aq].className=this.valueCssClass;Ak[Af]=Ai;}}else{if(Aj.order=="GaugeChart"){if(Ak[Af]){var Ai=Ak[Af];Ai.model=AK.model;Ai.refv=AK.refv;Ai.kpiOffset=this.kpiOff*Av;Ai.labelColorRGB=this.bodyFontColorRGB;Ai.reDrawChart();}else{var Ab=document.createElement("div");var AY={placeholder:Ab,model:AK.model,refv:AK.refv,widget:Ad,config:Ad.bulletProps,width:Aj.contentWidth,height:P,mainOffsetTop:this.offsetTop,mainLeftPos:parseInt(this.domNode.style.left,0)||0,mainWidth:this.getWidth(),labelColorRGB:this.bodyFontColorRGB,showMinLabel:this.showMinLabel,isTreeMode:this.isTreeMode,theme:this.theme};Ah[Aq].appendChild(Ab);var Ai=new mstrmojo.VisMicroChartBullet(AY);Ai.render();Ah[Aq].removeAttribute("class");Ak[Af]=Ai;}}else{var AG=-1;var At=-1;if(this.widget.isKPI){At=parseInt(Aj.order)%this.kpiOff;var AG=Al.model.metricIdx+At;}else{if(Aj.type==r){AG=parseInt(Aj.order);At=AG;}}var AW="";var AT="";if(!AK.refv[At]){continue;}if(AK.refv[At].ti===undefined){if(AK.refv[At].ts===4){AW="<img src='"+AK.refv[At].v+"'/>";}else{AW=AK.refv[At].v;}}else{try{var AJ=this.widget.model;var AI=AJ.th[""+AG];var AH=AK.refv[At].ti;if(AK.refv[At].ty===4){var Am;if(AI[AH]&&AI[AH].n){Am=AI[AH].n;}else{Am=AK.refv[At].v;}if(Am.indexOf(":")>=0){}else{var Ap;try{Ap=mstrApp.getConfiguration().getHostUrlByProject(mstrApp.getCurrentProjectId());}catch(As){Ap="";}Am=Ap+Am;}AW="<img src='"+Am+"'/>";}else{if(AI[AH]&&AI[AH].n&&AI[AH].cni!==undefined){AW=AI[AH].n;}else{AW=AK.refv[At].v;}Ah[Aq].style.fontSize=this.widget.fontSize;}AT=AJ.css[AI[AH].cni].n;}catch(As){if(!AW){AW=AK.refv[At].v;}}}if(AT){Ah[Aq].className=Aj.valueCssClass+" "+AT;}else{if(this.valueCssClass){Ah[Aq].className=Aj.valueCssClass+" "+this.valueCssClass;}else{Ah[Aq].className=Aj.valueCssClass;}}Ah[Aq].innerHTML=AW;}}}if(this.isTreeMode){if(AP.level==0){Ah[Aq].style.fontWeight="bold";}else{Ah[Aq].style.fontWeight="";}}}if(this.isTreeMode){var AV=Ad.rows[Av-1];var AL=AV&&AV.treeNode.level<Al.treeNode.level;var AO=Aa!=undefined;var AZ=Av==0;if(AL||(AO&&AP.level>0)){var AX=Ah.length;for(var Ar=0;Ar<AX;Ar++){if(this.theme==s||this.theme==W){Ah[Ar].style.boxShadow="0px 5px 3px -3px rgba(0,0,0,0.2) inset";}else{if(this.theme==S||this.theme==A){Ah[Ar].style.boxShadow="0px 5px 3px -3px rgba(0,0,0,0.5) inset";}}}Au.style.borderTop="solid 1px rgba(0, 0, 0, 0)";}else{if((AO&&AP.level==0||AZ)&&(this.theme==s||this.theme==S)){Au.style.borderTop="solid 1px rgba(0, 0, 0, 0)";}else{var AX=Ah.length;for(var Ar=0;Ar<AX;Ar++){Ah[Ar].style.boxShadow="";}}}}var Aw=Aa?Aa:Al;if(this.isTreeMode){this.widget.highlightRowByRowInfo(Aw,AP.selected);}else{if(this.widget.isAllAttrSelectable){this.widget.highlightRowByRowInfo(Al,Al.selected[-1]);}else{this.widget.highlightCellsByRowInfo(Al);}}return Au;}function j(AJ){var AI=AJ.rowRef[this.domRefName],AG=this.utils;if(this.isTreeMode){var AH=AJ.treeNode;var AL=AH.level;if(AL==0){if(this.theme==s){AI.style.backgroundColor="#f7f7f7";AI.style.color="#333333";AI.style.borderTop="solid 1px rgba(0, 0, 0, 0.15)";}else{if(this.theme==S){AI.style.backgroundColor="#1f1f1f";AI.style.color="#e0e0e0";AI.style.borderTop="solid 1px rgba(255, 255, 255, 0.15)";}else{if(this.theme==A){AI.style.backgroundColor="";AI.style.borderTop="solid 1px rgba(255, 255, 255, 0.1)";}else{if(this.theme==W){AI.style.backgroundColor="";AI.style.borderTop="solid 1px rgba(0, 0, 0, 0.3)";}}}}AI.style.font="bold 12pt Roboto";}else{if(AL==1){if(this.theme==s){AI.style.backgroundColor="#eaeaea";AI.style.color="#333333";AI.style.borderTop="solid 1px rgba(0, 0, 0, 0.2)";}else{if(this.theme==S){AI.style.backgroundColor="#2a2a2a";AI.style.color="#e0e0e0";AI.style.borderTop="solid 1px rgba(255, 255, 255, 0.2)";}else{if(this.theme==A){AI.style.backgroundColor="rgba(255, 255, 255, 0.05)";AI.style.borderTop="solid 1px rgba(255, 255, 255, 0.2)";}else{if(this.theme==W){AI.style.backgroundColor="rgba(0, 0, 0, 0.05)";AI.style.borderTop="solid 1px rgba(0, 0, 0, 0.2)";}}}}AI.style.font="12pt Roboto";}else{if(AL==2){if(this.theme==s){AI.style.backgroundColor="#dedede";AI.style.color="#333333";AI.style.borderTop="solid 1px rgba(0, 0, 0, 0.1)";}else{if(this.theme==S){AI.style.backgroundColor="#363636";AI.style.color="#e0e0e0";AI.style.borderTop="solid 1px rgba(255, 255, 255, 0.1)";}else{if(this.theme==A){AI.style.backgroundColor="rgba(255, 255, 255, 0.1)";AI.style.borderTop="solid 1px rgba(255, 255, 255, 0.1)";}else{if(this.theme==W){AI.style.backgroundColor="rgba(0, 0, 0, 0.1)";AI.style.borderTop="solid 1px rgba(0, 0, 0, 0.1)";}}}}AI.style.font="12pt Roboto";}else{if(AL>2){AL=Math.min(AL,3);var AK=AL/10;if(this.theme==s){AI.style.backgroundColor="#d1d1d1";AI.style.color="#333333";}else{if(this.theme==S){AI.style.backgroundColor="#404040";AI.style.color="#e0e0e0";}else{if(this.theme==A){AI.style.backgroundColor="rgba(255, 255, 255, 0.15)";}else{if(this.theme==W){AI.style.backgroundColor="rgba(0, 0, 0, 0.15)";}}}}AI.style.font="12pt Roboto";AI.style.borderTop="solid 1px rgba(255, 255, 255, 0.1)";}}}}}else{if(this.theme==s){AI.style.backgroundColor="#f7f7f7";AI.style.color="#333333";AI.style.borderBottom="solid 1px #c0c0c0";}else{if(this.theme==S){AI.style.backgroundColor="#1f1f1f";AI.style.color="#e0e0e0";AI.style.borderBottom="solid 1px #3f3f3f";}else{AI.style.borderBottom="solid 1px #808080";}}}}function X(AG){var AH=this._scroller,AI=this.chartTable,AJ=Math.max(this.chartTableOffsetHeight+this.headerTableOffsetHeight-this.getHeight(),0);AH.origin={x:AG&&AG.x||0,y:AG&&AG.y||0};AH.showScrollbars=this.showScrollbars;AH.vScroll=(AJ!==0&&AH.noVScroll!==true)||this.scrollPast;if(AH.vScroll){AH.offset={y:{start:0,end:AJ},scrollPast:this.scrollPast};}else{AH.offset=null;}this.utils.translateCSS(-AH.origin.x,-AH.origin.y,false,AI);}mstrmojo.VisMicroChartTable=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller,mstrmojo._NeedSyncScroller],{scriptClass:"mstrmojo.VisMicroChartTable",utils:mstrmojo.VisChartUtils,scrollerConfig:{bounces:false,showScrollbars:false,useTranslate3d:false,hScroll:false,vScroll:true},scrollPast:false,colInfos:null,rowTemplate:null,theme:-1,isTreeMode:false,showMinLabel:false,bodyFontColorRGB:null,markupString:'<div id="{@id}-microchart-table" class="mstrmojo-Chart {@cssClass}" style="width:{@width};height:{@height};z-index:{@zIndex};position:absolute;background-color:{@backgroundColor}"><div id="{@id}-header-bar" class="microchart-header-div" style="width:{@width};"><table id="{@id}-header-table" style="width:{@width};table-layout:fixed;"><tr ><th style="border:none;text-decoration:none;"></th></tr></table></div><div id="{@id}-chart-table-container" class="microchart-canvas-div" style="position:absolute;overflow:hidden;width:{@width};"><table id="{@id}-charts-body" style="width:{@width};table-layout:fixed"><tr ><td style="border:none;background:transparent;text-decoration:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-top:0px;padding-bottom:0px"></td></tr></table></div><div style="position:absolute;z-index:2;"><table id="{@id}-docked-header" style="width:{@width};table-layout:fixed;position:relative;background-color:white;"><tbody></tody></table><div id="{@id}-docked-header-replace-div" style="width:{@width};position:relative;overflow:hidden"><table id="{@id}-docked-header-replace" style="width:{@width};table-layout:fixed;background-color:white;"><tbody></tody></table></div></div></div>',markupSlots:{headerTable:function(){return this.domNode.childNodes[0].firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1];},chartTable:function(){return this.domNode.childNodes[1].firstChild;},dockedHeaderTable:function(){return this.domNode.childNodes[2].firstChild;},dockedHeaderReplaceDiv:function(){return this.domNode.childNodes[2].lastChild;}},postBuildRendering:function t(){R=(this.widget.otherProps.mRowHeight-1)+"px";P=(this.widget.otherProps.mRowHeight-2)+"px";E=this.utils.getScreenZoomFactor();this.scrollerConfig.scrollEl=this.chartTable;this.scrollerConfig.indicatorEl=this.widget.indicatorEl;this.scrollerConfig.showScrollbars=this.showScrollbars;this._super();this.renderMicroChart();this.updateRowOffsetHeight();this.updateHeaderTableOffsetH();this.updateChartTableOffsetH();X.call(this,this.widget.mcStatus&&this.widget.mcStatus.scrollTo);e.call(this);var AH=this.widget;if(this._tn){var AG=this._tsCallback;this._tsCallback=function(AI){AH.closedIfwAttr=null;AG.call(this,AI);};mstrmojo.dom.detachEvent(this._tn,mstrmojo.dom.TOUCHSTART,AG);mstrmojo.dom.attachEvent(this._tn,mstrmojo.dom.TOUCHSTART,this._tsCallback);}},renderMicroChart:function L(){var AS=this.colInfos.length;var Ab=this.headerTable;if(this.theme==s){Ab.style.backgroundColor="#B5BDC4";Ab.style.color="#333333";}else{if(this.theme==S){Ab.style.backgroundColor="#1C273A";Ab.style.color="#e0e0e0";}}Ab.style.height=E*32+"px";var AQ=Ab.firstChild.firstChild;var AH=this.chartTable.firstChild;var AX=AH.firstChild;var AO=AQ.firstChild;var AK=AX.firstChild;for(var AT=Ab.childNodes.length;AT<AS;AT++){AQ.appendChild(AO.cloneNode(true));AX.appendChild(AK.cloneNode(true));}this.rowTemplate=AX;var AY=mstrMobileApp.getSDKVersion();var AL=this.widget.isAndroid&&(AY<19);var AZ=function(Af,Ae){var Ac=0;var Ad=mstrmojo.css.getComputedStyle(Af);if(Ad.paddingLeft){Ac+=parseFloat(Ad.paddingLeft);}if(Ad.paddingRight){Ac+=parseFloat(Ad.paddingRight);}Af.style.width=(AL?Ae:(Ae-Ac))+"px";Af.style.height=R;};var AJ=AQ.childNodes;var AU=AX.childNodes;for(var AT=0;AT<AS;AT++){var AM=this.colInfos[AT];AM.thRef=AJ[AT];AJ[AT].innerHTML=AM.title?AM.title:"";if(AM.padding.left!=undefined){AU[AT].style.paddingLeft=AM.padding.left+"px";}if(AM.padding.right!=undefined){AU[AT].style.paddingRight=AM.padding.right+"px";}AJ[AT].className=AM.headerCssClass;if(AM.type==F){AJ[AT].style.paddingLeft="0px";AJ[AT].style.paddingRight="0px";}else{if(this.treeColumnIdx==AM.colIdx){var AR=document.createElement("div");AU[AT].appendChild(AR);AR.style.display="";}else{AU[AT].className=AM.valueCssClass+" "+this.valueCssClass;}}if(AM.type==V||AM.type==d){this.bodyFontColorRGB=this.valueCssClass&&Q.rgbStr2rgb(mstrmojo.css.getStyleValue(AU[AT],"color"));}AZ(AJ[AT],AM.colWidth);AZ(AU[AT],AM.colWidth);AJ[AT].style.wordBreak="break-word";AJ[AT].style.whiteSpace="normal";AU[AT].setAttribute("mcol",AM.colIdx);AJ[AT].setAttribute("mcol",AM.colIdx);AJ[AT].setAttribute("mrow",-1);}var AV=0;totalColWidth=0;for(var AT=0;AT<AS;AT++){var AM=this.colInfos[AT];console.log(AT+" offsetWidth:"+AJ[AT].offsetWidth+", styleWidth:"+AJ[AT].style.width+", colWidth:"+AM.colWidth);AV+=AJ[AT].offsetWidth;totalColWidth+=AM.colWidth;AM.titleOverflow=this.utils.truncateTextToLineWithWordWrap2(AJ[AT],AM.title,this.textCanvas,2);var AW=mstrmojo.css.getComputedStyle(AJ[AT]);AM.padding.left=parseInt(AW.paddingLeft);AM.padding.right=parseInt(AW.paddingRight);var Aa=AU[AT].offsetWidth||AM.colWidth;AM.contentWidth=Aa-AM.padding.left-AM.padding.right;AM.styleWidth=AL?Aa:Aa-AM.padding.left-AM.padding.right;}var AI=this.widget.otherProps;this.kpiOff=AI.mnMetricsPerKPI;if(!this.widget.isKPI){this.kpiOff=0;}var AN=this.widget;var AG=document.createDocumentFragment();for(var AT=AN.startCnt;AT<AN.endCnt;AT++){var AP=O.call(this,AT);AG.appendChild(AP);}AH.appendChild(AG);AX.style.display="none";if(AI.mbHideColHeaders){this.headerTable.style.display="none";}this.itemsContainerNode.style.top=this.headerTableOffsetHeight+"px";},reRenderRows:function G(AM,AK,AQ,AJ,AH){var AL=this.chartTable.firstChild;AL.innerHTML="";var AO=this.widget;var AN=document.createDocumentFragment();if(AK==undefined){AK=0;AQ=0;AJ=AO.startCnt;AH=AO.endCnt;}var AP=AO.rows;if(AK<AJ){for(var AI=AK;AI<AQ;AI++){var AG=AP[AI].rowRef[this.domRefName];AN.appendChild(AG);}for(var AI=AJ;AI<AH;AI++){var AG=O.call(this,AI);AN.appendChild(AG);}}else{for(var AI=AJ;AI<AH;AI++){var AG=O.call(this,AI);AN.appendChild(AG);}for(var AI=AK;AI<AQ;AI++){var AG=AP[AI].rowRef[this.domRefName];AN.appendChild(AG);}}AL.appendChild(AN);this.updateChartTableOffsetH();X.call(this,AM);},updateHeaderTableOffsetH:function I(){if(this.widget.otherProps.mbHideColHeaders){this.headerTableOffsetHeight=0;}else{this.headerTableOffsetHeight=this.headerTable.offsetHeight;}},updateRowOffsetHeight:function J(){this.rowOffsetHeight=this.chartTable.firstChild.lastChild.offsetHeight;},updateChartTableOffsetH:function z(){this.chartTableOffsetHeight=this.chartTable.firstChild.offsetHeight;},onScrollDone:function p(AG){if(this._super){this._super(AG);}this.widget.onScrollDone(AG);},onScrollMoved:function AF(AG){if(this._super){this._super(AG);}this.widget.onScrollMoved(AG);},initScroller:function h(AG){if(!AG.offset&&this.scrollPast){AG.offset={scrollPast:this.scrollPast};}AG.vScroll=true;if(this._super){this._super(AG);}var AH=this;},initDHs:function N(){var AG=this.dockedHeaderTable;AG.parentNode.style.top=this.headerTableOffsetHeight+"px";},addRowsToDH:function B(AH,AK){var AG=this.widget;var AL=null;if(AK){AL=AG.dockedHeaderReplaceRows;}else{AL=AG.dockedHeaderRows;}var AI=document.createDocumentFragment();for(var AJ=AL.length-AH;AJ<AL.length;AJ++){var AM=O.call(this,AL[AJ].rowIdx,AL[AJ]);AL[AJ].rowRef[this.domRefName]=AM;AI.appendChild(AM);}if(AK){this.dockedHeaderReplaceDiv.firstChild.firstChild.appendChild(AI);}else{this.dockedHeaderTable.firstChild.appendChild(AI);}},removeRowsFromDH:function H(AI,AH){var AJ=this.dockedHeaderTable,AG=AJ.firstChild;var AM=this.dockedHeaderReplaceDiv.firstChild.firstChild;if(AI>AG.childNodes.length){AI=AG.childNodes.length;}if(AI>1){AJ.removeChild(AG);for(var AL=0;AL<AI;AL++){AG.removeChild(AG.lastChild);}AJ.appendChild(AG);}else{if(AI==1){var AK=AG.lastChild;AG.removeChild(AK);if(AH){AM.appendChild(AK);}}}},moveRowFromDHRplcTableToDH:function q(){var AI=this.dockedHeaderTable,AH=AI.firstChild;var AJ=this.dockedHeaderReplaceDiv.firstChild.firstChild;var AG=AJ.firstChild;if(AG){f(AJ);AH.appendChild(AG);}},removeChildrenForDHReplaceTable:function k(){var AG=this.dockedHeaderReplaceDiv.firstChild.firstChild;f(AG);},showDockedHeader:function Y(){this.dockedHeaderTable.parentNode.style.display="block";},hideDockedHeader:function AC(){this.dockedHeaderTable.parentNode.style.display="none";},setTreeArrow:function b(AK,AG){var AJ=AK.rowRef[this.domRefName];var AI=AJ.childNodes;var AH=AI[this.treeColumnIdx].firstChild;u.call(this,AH,AK.treeNode,AG);},scrollTo:function(AG){var AH=this.chartTable;this.utils.translateCSS(-AG.x,-AG.y,false,AH);},shouldTouchBubble:function g(AJ){var AG=this._scroller,AH=AJ.isVertical;var AI=!!AG.offset&&AG.offset.y.end!==0;return AH?!AI:this._super(AJ);},multiTap:true,touchTap:function(AG){this.widget.touchTap(AG);},touchSelectBegin:function U(AG){this.bubbleTouchEvent(AG);},touchSelectEnd:function Z(AG){this.bubbleTouchEvent(AG);},touchSelectMove:function K(AG){this.bubbleTouchEvent(AG);},multiTouch:true,touchMultiBegin:function(AG){this.bubbleTouchEvent(AG);},touchMultiMove:function(AG){this.bubbleTouchEvent(AG);},touchMultiEnd:function(AG){this.bubbleTouchEvent(AG);},destroy:function w(){var AI=this.colInfos.length;for(var AG=0;AG<AI;AG++){var AH=this.colInfos[AG];delete AH.thRef;}delete this.widget;delete this.parent;delete this.rowTemplate;delete this.textSpan;this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.MetricQualDocSelector");mstrmojo.MetricSliderDocSelector=mstrmojo.declare(mstrmojo.MetricQualDocSelector,null,{scriptClass:"mstrmojo.MetricSliderDocSelector",_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},newAndInitWidget:function A(D){var E=this._super(D);D.attachEventListener("includeChange",E.id,function(F){this.set("include",F.value);});return E;},getWidgetConfig:function C(H,F,E,G){var D=this._super(H,F,E,G);H.extCls="extSlider";D.isHoriz=true;D.include=E.include;return D;},isSelectAll:function B(){var D=this.children&&this.children[0];return D===undefined?true:D.unSet;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.TextBoxDocSelector","mstrmojo.array","mstrmojo.string","mstrmojo.elementHelper");var J=mstrmojo.array,O=mstrmojo.string,I=mstrmojo.elementHelper,H=I.ELEM_ALL_ID;var E=0,L=1,K=2;var D=1,N=3;mstrmojo.SearchBoxDocSelector=mstrmojo.declare(mstrmojo.TextBoxDocSelector,null,{scriptClass:"mstrmojo.SearchBoxDocSelector",filterElemALL:false,_buildEvent:function F(T,S){var Q=[],U,R=this.defn;J.forEach(S.items,function(V){Q.push(V.v+";"+O.decodeHtmlString(V.n));});U=Q.length;if(!U){Q.push(H);}if(Q.length>0||!R.nsb||R.nsb===E){T.eid=Q.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}else{if(R.nsb===L||!R.showall){T.unset=true;}else{if(R.nsb===K){T.eid=H;}}}if(R.sec){if(R.multi){this.parent.set("count",I.buildElemsCountStrByNum(U,0));}else{this.parent.set("count",I.buildElemsCountStrByNum(0,0));}}},updateWidget:function P(Y){var R=this._super(Y),S=Y.node,X=S.defn,V=S.data,Q=V.elms;if(Q&&!X.sos){R.candidates=this.setupCandidates(X,Q);}if(X.srcid){var T=[],W,U=J.filter(V.ces,function(a){return a.v!=="u;";});if(U&&U.constructor===Array){if(X.dfm==D){for(W=0;W<U.length;W++){if(U[W]["t"]!=N){T.push(U[W]);}}}else{T=U.concat();}}if(!X.sos){var Z=[];J.forEach(T,function(a){if(J.find(R.candidates.items,"v",a.v)>-1){Z.push(a);}});T=Z;}R.items=T;}return R;},getCekEvtListener:function C(R,Q){return function(S){R.handleActionInSyncPhase(function(){Q.set("items",S.value);});};},getWidgetConfig:function G(W,T,S,V){var R=W.getFormats(),U=W.node.data,Q=this._super(W,T,S,V);Q={scriptClass:Q.scriptClass,cssText:R.height?"height: "+R.height:"",emptyText:mstrmojo.desc(4325,"Search")+" "+(S.ttl||""),items:S.srcid?(U.ces?U.ces.concat():[]):[],REQUEST_THRESHOLD:(mstrApp&&mstrApp.SEARCH_REQUEST_THRESHOLD)||55,suggestCount:(mstrApp&&mstrApp.SEARCH_SUGGESTION_LENGTH)||50,srcid:S.srcid||"",dsrc:S.dsrc||"",onitemsChange:function(){if(!W._inSyncPhase){W.showInfoWin();W.selectorControlChange(this);}}};if(V&&!S.sos){Q.candidates=this.setupCandidates(S,V);}else{Q.useKeyDelay=true;Q.noCache=true;}if(!S.multi){Q.maxObjectCount=1;}return Q;},isSelectAll:function A(){var Q=this.children&&this.children[0];return Q===undefined?true:(!Q.items||Q.items.length==0);},setupCandidates:function M(R,S){var Q=R.srcid?S:[];if(this.filterElemALL){Q=J.filter(Q,function(T){return T.v!=="u;";});}return{isComplete:true,items:Q};},isValidSelection:function B(){var R=this.node.data,Q=this.model;if(Q.isSelWarnFlagOn(this.k)&&R.ces&&R.ces.length===0){return R.elms.length!==0;}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocLayout","mstrmojo.DocLayoutHoriz","mstrmojo.DocSectionHoriz","mstrmojo.DocSection","mstrmojo.DocSubsection","mstrmojo.DocPanelStack","mstrmojo.DocPanel","mstrmojo.DocTextfield","mstrmojo._CanSupportTransaction","mstrmojo._IsEditableTextfield","mstrmojo._HasDocLink","mstrmojo.DocImage","mstrmojo.DocLine","mstrmojo.DocRectangle","mstrmojo.DocRoundRectangle","mstrmojo.EnumRWUnitType","mstrmojo.DynamicClassFactory","mstrmojo.Button","mstrmojo.ToolBar","mstrmojo.DocSelector","mstrmojo.FilterPanelMenu","mstrmojo.DocPortlet","mstrmojo.DocResizablePortlet","mstrmojo.DocXtabGraph","mstrmojo.DocGridGraph","mstrmojo.DocVisualization","mstrmojo.DocXtabModel","mstrmojo.hash","mstrmojo.dom");var H=mstrmojo.hash,E=mstrmojo.dom,A=mstrmojo.EnumRWUnitType,N=mstrmojo.DynamicClassFactory.newComponent,R=mstrmojo.elementHelper,S=mstrmojo.Button.newIconButton,L={};function K(W){return function(){return this.parent.parent["on"+W]();};}var M=K("maximize"),T=K("restore"),G=K("minimize");function V(X,a,Y,W,Z){return S(X,a,Y,null,{ds:W,visible:(Z!==W)});}function I(W,a,Z){var Y=this.classMap[a].n+(Z?"Hover":""),X=L[Y];if(!X){X=L[Y]=N(W,[mstrmojo._HasDocLink].concat(this.getLinkDrillMixins(Z)));}return X;}function Q(e,Z,Y){var a=H.walk(Y.scriptClass,window),b=Z&&Z.defn,X=Z&&Z.data,h=(b&&b.t),g=(h===A.TEXTFIELD&&((b&&b.dpst)));if(h===A.TEXTFIELD||h===A.IMAGE){var f=X.dl,d=b.dl,W=(f&&f.items&&f.items.length)||(d&&d.items&&d.items.length>0);if(W||X.url||b.url||b.ifw){a=I.call(this,a,h+(g?"B":""),W);}else{if((h===A.TEXTFIELD)&&b.txi){a=N(a,[mstrmojo._CanSupportTransaction,mstrmojo._IsEditableTextfield]);}else{if(h===A.TEXTFIELD&&Z.defn.iifs){a=mstrmojo.DocSummaryTextfield;}}}}return this.newRWUnitInstance(e,Z,a);}mstrmojo.rw._IsReportServicesDocBuilder=mstrmojo.provide("mstrmojo.rw._IsReportServicesDocBuilder",{_mixinName:"mstrmojo.rw._IsReportServicesDocBuilder",createClassMap:function B(){var W=this._super();W[A.LAYOUT]={n:"Layout"};W[A.SUBSECTION]={scriptClass:"mstrmojo.DocSubsection"};W[A.PANELSTACK]={n:"PanelStack",scriptClass:"mstrmojo.DocPanelStack"};W[A.PANEL]={n:"Panel",scriptClass:"mstrmojo.DocPanel"};W[A.TEXTFIELD]={n:"Textfield",scriptClass:"mstrmojo.DocTextfield"};W[A.IMAGE]={n:"Image",scriptClass:"mstrmojo.DocImage"};W[A.LINE]={n:"Line",scriptClass:"mstrmojo.DocLine"};W[A.RECTANGLE]={n:"Rectangle",scriptClass:"mstrmojo.DocRectangle"};W[A.ROUNDEDRECTANGLE]={n:"RoundedRectangle"};W[A.GRAPH]={n:"XtabGraph",scriptClass:"mstrmojo.DocXtabGraph"};W[A.GRIDGRAPH]={n:"GridGraph",scriptClass:"mstrmojo.DocGridGraph"};W[A.VISUALIZATION]={n:"Visualization",scriptClass:"mstrmojo.DocVisualization"};return W;},getLayoutViewerClass:function D(W){this.throwAbstractMethodError("getLayoutViewerClass");},newLayout:function U(b,Z){var Y=[],X=Z.data,a=Z.defn,W=this.getLayoutViewerClass(Z),f=new W({n:a.title,model:b,node:Z,controller:this.parent.controller,tbc:a.tbc,slot:"containerNode",visible:false,ifs:X.ifs,gb:X.gbys});var d=f.defn=H.copy(a);d.fmts=H.copy(a.fmts);function g(o,p){var j=o.length;if(j){for(var k=0;k<j;k++){var l=this.build([o[k]],b)[0];l.slot=p;Y.push(l);}}}g.call(this,b.getFixedHeaders(Z),"fixedHeaderNode");var e=a.horiz?mstrmojo.DocLayoutHoriz:mstrmojo.DocLayout;Y.push(new e({slot:"layout",id:Z.id,k:Z.k,minHeight:X.mh,formatResolver:b.formatResolver,rules:a.rules,builder:this,node:Z,defn:a,model:b}));g.call(this,b.getFixedFooters(Z),"fixedFooterNode");f.addChildren(Y);return f;},newSection:function O(W,X){return this.newRWUnitInstance(W,X,(X.defn.horiz&&X.data.subsections.length>1)?mstrmojo.DocSectionHoriz:mstrmojo.DocSection);},newPanelStack:function F(X,Y,W){return this.newRWUnitInstance(X,Y,W.cls||H.walk(W.scriptClass,window));},newTextfield:Q,newImage:Q,newButton:Q,newRoundedRectangle:function J(W,X){return this.newRWUnitInstance(W,X,E.supports(E.cssFeatures.ROUND_CORNERS)?mstrmojo.DocRectangle:mstrmojo.DocRoundRectangle);},getPortletExportGridToolbar:mstrmojo.emptyFn,createPortlet:function C(AI,r,AF){var AN=r.defn,a=AN.ds,AE=(AN.iifp||!(AI===A.PANELSTACK||(AN.ttl===undefined&&AN.qsm)||AI===A.SELECTOR)),e=(AI===A.GRAPH||AI===A.GRIDGRAPH),l=[],AJ="",u="",p="",X=(AI===A.GRID||e||AI===A.VISUALIZATION||AI===A.MOJOVISUALIZATION)&&parseInt(AN.eo,10)!==2,W=[],AG="mstrmojo-oivmSprite ",z=false;if(AN.qsm){AJ="qks";var b=function(AQ,t,w){return S(AQ,AG+t,function(){return this.parent.parent.content.quickSwitch();},{visible:"this.parent.parent.defn.qsm !== this.qsm"},{qsm:w});};l.push({scriptClass:"mstrmojo.ToolBar",slot:"leftToolbarNode",alias:"leftToolbar",cssClass:(!AE)?"grouped":"",children:[b(mstrmojo.desc(3547,"View: Grid"),"tbGrid",1),b(mstrmojo.desc(3548,"View: Graph"),"tbGraph",2)]});}if(X){var Z=this.getPortletExportGridToolbar(AF);if(Z){u=Z.css;W=Z.node;l.push(W);}}if(AE){if(AN.iifp){AJ="wrap";l.push({scriptClass:"mstrmojo.ToolBar",slot:"leftToolbarNode",alias:"leftToolbar",children:[V(mstrmojo.desc(8973,"Collapse"),"co",null,1,a),V(mstrmojo.desc(8972,"Expand"),"ex",null,0,a)]});}else{var AB=[V(mstrmojo.desc(4539,"Minimize"),"mn",G,1,a),V(mstrmojo.desc(4540,"Restore"),"rs",T,0,a),V(mstrmojo.desc(4541,"Maximize"),"mx",M,2,a)];if(X){W.children=(W.children||[]).concat(AB);}else{u="resize";l.push({scriptClass:"mstrmojo.ToolBar",slot:"toolbarNode",alias:"rightToolbar",children:AB});}}}AF.slot="contentNode";AF.alias="content";AF.title=AN.ttl||"";if(AN.sec){var AK=r.data.elms,k=r.data.ces,x=r.data.unset,AM=(k&&k.length)||0,AO=(AK&&AK.length)||0,AL;if(AN.sos){AF.contentClass="fpsb";for(AL=AM-1;AL>=0;AL--){if(k[AL]._did_){AM--;}}AF.count=R.buildElemsCountStrByNum(AM,AO);}if(k&&AK&&AK.length&&AN.style!==mstrmojo.DocSelector.STYLES.SCROLLER){if(mstrApp.isVI||!x){if(AN.multi){if(x&&k.length===0){AF.count=R.buildElemsCountStr(AK,AK);}else{AF.count=R.buildElemsCountStr(k,0);}}else{AF.count=R.buildElemsCountStr(AK,AK);}}}}l.push(AF);if(AI===A.PANELSTACK){var g=function(AR,w,AQ,t){return S(AR,AG+w,function(){return this.parent.parent.content.switchToPanel(t);},{enabled:"this.parent.parent."+AQ});},j=[],Y=[],q=!!r.sw,h=!!AN.ifw,d=!!AN.ifp;if(q){Y.push(g(mstrmojo.desc(1058,"Previous"),"tbPrev","prevEnabled",-1));j.push(g(mstrmojo.desc(2917,"Next"),"tbNext","nextEnabled",1));}if(h){j.push(S(mstrmojo.desc(2102,"Close"),AG+"mstrmojo-DocInfoWindow-close",function(){this.parent.parent.parent.close();}));}if(d){p="ifp";var AC=mstrmojo.desc(2164,"Apply");l.push({scriptClass:"mstrmojo.HBox",slot:"buttonbarNode",alias:"buttonbar",cssClass:"buttonBox",children:[{scriptClass:"mstrmojo.Button",alias:"resetBtn",title:mstrmojo.desc(2827,"Clear"),text:mstrmojo.desc(2827,"Clear"),cssClass:"mstrmojo-FilterPanel-Btn apply",bindings:{visible:function(){return !AN.cas;},enabled:function(){return this.parent.parent.clearEnabled;}},onclick:function AD(){if(AF&&AF.clearBuffSlices){AF.clearBuffSlices();AF.clearAllFilter();AF.applyBufferedSlices();}}},{scriptClass:"mstrmojo.Button",alias:"applyNow",title:AC,text:AC,cssClass:"mstrmojo-FilterPanel-Btn apply",bindings:{visible:function(){return !AN.cas;},enabled:function(){return this.parent.parent.applyEnabled;}},onclick:function AD(){if(AF&&AF.applyBufferedSlices){AF.applyBufferedSlices();}}}]});j.push({scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-oivmSprite tbDown",alias:"btnMenu",onclick:function AD(){this.openPopupMenu();},openPopupMenu:function(){var t=mstrmojo.findAncestor(this,"openPopupMenu");if(t){t.openPopupMenu("mstrmojo.FilterPanelMenu",{openerButton:this,fps:AF,cmPos:this.cmPos,lockIW:AF});}}});z=true;}if(h||d){var AP=[];if(q){AP[0]="pst-l";}if(d){AP.push("ifp");}Y.push({scriptClass:"mstrmojo.Box",cssClass:AP.join(" ")});}if(h||q||d){var s=h?"ifw ":"",AH=d?"ifp ":"",f=!AN.cas?"cas ":"";u=(q?"pst-r ":"")+s+AH+f;AJ=(q?"pst-l ":"")+s+AH+f;l.push({scriptClass:"mstrmojo.ToolBar",slot:"leftToolbarNode",alias:"leftToolbar",children:Y});l.push({scriptClass:"mstrmojo.ToolBar",slot:"toolbarNode",alias:"rightToolbar",children:j});}}if(AI===A.SELECTOR&&AF.spm){u="spm";l.push({scriptClass:"mstrmojo.ToolBar",slot:"toolbarNode",alias:"rightToolbar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-oivmSprite tbDown",alias:"btnMenu",onclick:function AD(t){t.cancel();this.openPopupMenu();},openPopupMenu:function(){var t=mstrmojo.findAncestor(this,"openPopupMenu");if(t){t.openPopupMenu("mstrmojo.SelectorMenu",{openerButton:this,selector:AF,cmPos:this.cmPos});}}}]});z=true;}var AA=AE?mstrmojo.DocResizablePortlet:mstrmojo.DocPortlet,o={k:AF.k,defn:AF.defn,model:AF.model,children:l,title:AF.title,count:AF.count,floatingTitle:(AN.ttl===undefined&&AN.qsm),leftToolbarNodeClass:AJ,loadDataOnResize:e,toolbarNodeClass:u,buttonbarNodeClass:p,attachContextMenuEvent:z};if(AI===A.PANELSTACK){o.bindings={title:"this.children[0].title"};if(r.sw){o.bindings.prevEnabled=function(){return this.children[0].hasPreviousPanel;};o.bindings.nextEnabled=function(){return this.children[0].hasNextPanel;};}if(AN.ifp){o.bindings.applyEnabled=function(){return this.children[0].applyEnabled;};o.bindings.clearEnabled=function(){return this.children[0].clearEnabled;};}}if(AN.iifp){o.onclicktitle=function(){if(AF.defn.ds===1){AF.parent.onexpand();}else{AF.parent.oncollapse();}};}return new AA(o);},newXtabModel:function P(W){return new mstrmojo.DocXtabModel(W);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.rw.ConditionWalk","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.ui.Checkbox","mstrmojo.expr","mstrmojo.css");var F=mstrmojo.expr.ET.MQ,H=mstrmojo.expr.ET.MC,C=mstrmojo.css,B=mstrmojo.desc(14387,"Evaluate this condition independent of other dataset level conditions");var G=function(K,M){var J=K.et,L=((J===F||J===H)&&!this.inRelation)?"block":"none",I=((M===1)||J!==F)?1:0;C.toggleClass(this.toolNode,"unselectable",J===H);this.toolNode.style.display=L;this.level.set("selectedIndex",I);this.includeExist.set("visible",I===1&&(J===H||J===F));this.includeExist.set("checked",K.idcsi===undefined?false:K.idcsi);};mstrmojo.fe.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,null,{scriptClass:"mstrmojo.fe.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="tools"></div><div class="apply"></div></div>',markupSlots:mstrmojo.hash.copy({toolNode:function(){return this.domNode.childNodes[2];}},mstrmojo.hash.copy(mstrmojo.rw.ConditionWalk.prototype.markupSlots)),layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",toolNode:"auto",applyNode:"auto"},xt:true},postCreate:function E(){this.children=mstrmojo.hash.clone(this.children).concat([{scriptClass:"mstrmojo.Label",slot:"toolNode",text:mstrmojo.desc(13517,"Calculate on")},{scriptClass:"mstrmojo.ui.Pulldown",slot:"toolNode",alias:"level",isHostedWithin:false,items:[{n:mstrmojo.desc(13518,"Template level"),v:0},{n:mstrmojo.desc(13519,"Dataset level"),v:1}],onitemSelected:function I(J){var K=this.parent;if(K&&K.condition&&K.visible){K.includeExist.set("visible",J.v===1);K.condition.level=J.v;}}},{scriptClass:"mstrmojo.ui.Checkbox",alias:"includeExist",slot:"toolNode",postBuildRendering:function(){this.domNode.innerHTML=B;},oncheckedChange:function(){var J=this.parent;if(J){J.model.set("idcsi",this.checked);}}}]);if(this._super){this._super();}},onvisibleChange:function A(I){var J=this.condition;if(J&&this.toolNode&&this.visible){G.call(this,J.data,J.tree.level);}if(this._super){this._super(I);}},onmodeledit:function D(I){if(this._super){this._super(I);}if(this.toolNode){G.call(this,this.model.get(),this.model.level);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Dial","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Obj","mstrmojo.CheckBox","mstrmojo.warehouse.EnumObjectTypes","mstrmojo.fe.FilterExprTree","mstrmojo.fe.RelationFilterExprTree","mstrmojo.fe.CreateSetEditor","mstrmojo.fe.ConditionWalk","mstrmojo.ui.Pulldown","mstrmojo.ui.StatusButton");var Z=mstrmojo.expr,I=Z.ET,P=Z.BRANCH_FNS,X=mstrmojo.Obj,W=mstrmojo.dom,a=mstrmojo.array,T=mstrmojo.hash,e=mstrmojo.css,C=mstrmojo.warehouse.EnumObjectTypes,K={TEMPLATE:0,DATASET:1},E=mstrmojo.mstr.EnumNodeDimty,R=a.hash([E.NodeDimtyUnspecified,E.NodeDimtyNone]),N=200,H=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function B(h){a.forEach(this.buttonBar.children[0].children,function(j){j.set("enabled",h);});}function Y(){var h=this.avatar;if(h){h.parentNode.removeChild(h);delete this.avatar;e.removeClass(h,[this.avatarCssClass]);}}mstrmojo.fe.FilterEditorBase=mstrmojo.declare(mstrmojo.Editor,null,{onSave:null,title:mstrmojo.desc(12032,"View Filter Editor"),help:"view_filter_editor_for_report_services_documents.htm",cssClass:"mstrmojo-charcoalboxe mstrmojo-FE",showLimits:true,objectBrowsingEnabled:false,children:null,init:function U(h){this.children=[{alias:"feContent",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-content",postCreate:function(){this.children=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-exprTool",children:[{scriptClass:"mstrmojo.ui.StatusButton",cssClass:"mstrmojo-FE-addCondition",postCreate:function j(){this.editor=this.parent.parent.parent;this.statusList=this.editor.getAddConditionList();this.status=this.statusList[0];},onButtonClick:function(k){if(k){k.handler.apply(this.editor);}}}]},this.parent.getExpressionContainerCfg()];}},this.getConditionWalkConfig(),{alias:"buttonBar",scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HBox",cssText:"float:right; border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(118,"Save"),onclick:function(){var j=this.editor;M(j);j.close();},bindings:{enabled:function(){return !this.editor.readOnly;},editor:"this.parent.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.editor.close();},bindings:{editor:"this.parent.parent.parent"}}]}]}];this._super(h);this.model=this.model||new X();},getExpressionContainerCfg:function(){var h=this;return{alias:"feExpr",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-expr-list",postCreate:function(){this.children=h.getExpressionContentsConfig();},onRender:function(){W.attachMarkupEvent(this.id,this.domNode,"mousedown");},onmousedown:function(j){var k=W.eventTarget(j.hWin,j.e);if(this.isBlankArea(k)){this.clearSelect();}},isBlankArea:function(j){return j===this.domNode;},clearSelect:function(){}};},getExpressionContentsConfig:function(){return[];},getConditionWalkConfig:function(){var j=this;return{scriptClass:"mstrmojo.rw.ConditionWalk",width:"750px",objectBrowsingEnabled:false,dimtyTypes:R,alias:"walk",visible:false,onOK:function h(){var l=this.condition;j.feContent.set("visible",true);this.set("visible",false);j.onConditionEdit(l,this.model.get());B.call(j,true);},close:function k(){j.feContent.set("visible",true);this.set("visible",false);var l=this.condition;if(l.isEmpty()){l.del();}B.call(j,true);},targets:null,targetsLastMod:null,ets:null,condition:null,bindings:{disableElementsBrowsing:"this.parent.disableElementsBrowsing"}};},onConditionEdit:function(j,h){j.tree.modifyConditionNode(j,h);},getAddConditionList:function d(){return[{n:mstrmojo.desc(1994,"Add Condition"),handler:function(){this.mainExpr.newCondition(null,true);}}];},andOrPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-FE-andOrPopup mstrmojo-CGE-andOrPopup mstrmojo-ConditionWalk",contentNodeCssClass:"mstrmojo-balloon",slot:"containerNode",modal:false,autoClose:true,showTitle:false,draggable:false,openEffect:null,closeEffect:null,onOpen:function(){var h=this.condition,l=h&&h.data&&h.data.not,o=h&&h.parent,j=o&&o.data,k=(j&&j.fn)+(l?21:0);this.list.opening=true;this.list.set("selectedItem",isNaN(k)?null:{did:k});this.list.opening=false;},children:[{scriptClass:"mstrmojo.Dial",cssClass:"mstrmojo-CGE-andOrDial",alias:"list",itemMarkup:'<div class="dial-item {@css}">{@n}</div>',itemIdField:"did",items:[{did:19,n:P[19]},{did:20,n:P[20]},{did:19+21,n:P["19_21"]},{did:20+21,n:P["20_21"]}],onchange:function(){if(this.opening){return ;}var j=this.parent,h=j.condition,q=this.selectedItem,p=q&&q.did,o=p>21?true:null,l=p-(o?21:0);j.close();var k=h&&h.parent;if(k&&k.data&&k.data.et===I.ANDOR){k.edit(h,l,o);}else{var r=h&&h.data;if(r&&(r.not!==o)){r.not=o;h.paint();}}}}]},createSetPopupRef:{scriptClass:"mstrmojo.fe.CreateSetEditor",contentNodeCssClass:"",cssClass:"CreateSet-Editor",title:mstrmojo.desc(12034,"Create a Set"),slot:"containerNode"},_set_busy:function(j,h){if(h){this.set("enabled",false);this.set("iconClass","mstrmojo-WaitIcon");}else{this.set("enabled",true);this.set("iconClass","");}},_set_model:function(o,j){var k=this.model,l=k!==j;if(l){this.model=j;this.modelLastSet=new Date();var h=function(p){return Q(J(p));};j.exprForest=h(j.expr);j.limitExprForest=h(j.limitExpr);if(this.feContent&&this.feContent.feExpr.ve){this.feContent.feExpr.ve.nameFactory.clear();}}return l;},onUpdateBrowseElementsParams:mstrmojo.emptyFn});mstrmojo.fe.ReportFilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,null,{getExpressionContainerCfg:function(){var h=this._super();return mstrmojo.mixin({clearSelect:function(){this.re.clearTreeSelect();}},h);},getExpressionContentsConfig:function(){return[{alias:"re",scriptClass:"mstrmojo.fe.ReportFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}}];}});mstrmojo.fe.ReportFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.ReportFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",onNew:function(h){h.data.isNew=true;F(this.editor,h.data,h.widget.ctxtBuilder.itemWidgets[h.index],"condition");},onnodeclick:function A(h){F(h.editor||this.tree.editor,this.data,this,h&&h.part);},allowDrop:function G(h){var k=h&&h.src,o=k&&k.data,l=o&&o.et,j=k&&k.widget&&k.widget.tree;return l&&this!==j;}});mstrmojo.fe.FilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,null,{getExpressionContainerCfg:function(){var h=this._super();return mstrmojo.mixin({isBlankArea:function(j){if(this._super(j)){return true;}return !a.filterOne([this.ve,this.vle],function(k){if(W.contains(k.domNode,j,true)){return true;}});},clearSelect:function(){this.ve.clearTreeSelect();this.vle.clearTreeSelect();}},h);},getExpressionContentsConfig:function(){return[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11746,"Dataset Level Conditions"),cssClass:"mstrmojo-FE-expr-header dl",bindings:{visible:"true || this.parent.parent.parent.showLimits"}},{alias:"ve",scriptClass:"mstrmojo.fe.RWViewFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},onBlankClick:function(h){this.parent.clearSelect(h);},supportRelation:true,postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11747,"Template Level Conditions"),cssClass:"mstrmojo-FE-expr-header tl",bindings:{visible:"this.parent.parent.parent.showLimits"}},{alias:"vle",scriptClass:"mstrmojo.fe.RWViewLimitExprTree",level:K.TEMPLATE,bindings:{visible:"this.editor.showLimits",items:"this.editor.model.limitExprForest || []"},onBlankClick:function(h){this.parent.clearSelect(h);},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("limitExpr",this);}}];},getConditionWalkConfig:function(){var h=this._super();T.copy({scriptClass:"mstrmojo.fe.ConditionWalk"},h);return h;},getAddConditionList:function d(){var h=this._super();h.push({n:mstrmojo.desc(12055,"Add Dynamic Condition"),handler:function(){this.mainExpr.newCondition({et:I.XML,idc:1,ph:{}},true);}});return h;},onConditionEdit:function(k,j){if(k.tree.level===k.level||k.tree.level===undefined){this._super(k,j);}else{k.parent.remove(k.data);var h=K.TEMPLATE===k.level?this.limitExpr:this.mainExpr;h.addSingleCondition(j);}}});mstrmojo.fe.RWViewFilterExprTree=mstrmojo.declare(mstrmojo.fe.RelationFilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",onNew:function(h){h.data.isNew=true;if(!h.data.ph){F(this.editor,h.data,h.widget.ctxtBuilder.itemWidgets[h.index],"condition");}},onnodeclick:function A(h){F(h.editor||this.tree.editor,this.data,this,h&&h.part);},ondragend:function O(k){var j=k&&k.tgt,h=j&&j.widget;if(this.tree&&h&&h.tree&&h.tree!==this.tree){Y.call(this);return ;}this._super(k);},getItemConfig:function(k,h,l){var j=this._super(k,h,l);return T.copy({getConditionTextPostfix:function(){if(this.data.et!==I.MQ){return"";}return'<img class="mstrmojo-moveToViewLimit" src="../images/1ptrans.gif" title="'+mstrmojo.desc(4978,"Move to view limit")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewLimit(w); return false;\" />";}},j);},moveMQNodeToViewLimit:function(k){if(k.data.et!==I.MQ){return ;}var j=T.copy(k.data);k.parent.remove(k.data);var h=this.editor.limitExpr;h.addSingleCondition(j);},allowDrop:function G(h){var k=h&&h.src,p=k&&k.data,o=p&&p.et,l=this.tree,j=k&&k.widget&&k.widget.tree;return o&&(this===l?(j!==l):true);}});mstrmojo.fe.RWViewLimitExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewLimitExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-limitExpr",validExprTypes:a.hash([I.MQ]),onnodeclick:function A(h){F(this.tree.editor,this.data,this,h&&h.part);},onConditionEdit:function(j,h){this._super(j,h);j.data.mdxUnitId=j.data.m.did;V(j);},addSingleCondition:function(j){var h=this._super(j);V(h);},allowDrop:function(h){var l=h&&h.src,p=l&&l.data,o=p&&p.et,k=this.tree,j=l&&l.widget&&l.widget.tree;if(k===j){return this!==j&&this.data&&(this===l.parent||this.data.mdxUnitId===p.mdxUnitId);}return o===I.MQ;},ondrop:function L(j){var o=j&&j.src,h=o&&o.widget;if(h&&h.tree!==this.tree){var l=o&&o.data;if(l&&l.index!==null){var k=h.ctxtBuilder.itemWidgets[l.index];k.tree.moveMQNodeToViewLimit(k);}o.data=null;}this._super(j);},isEditable:function(h){return h.mdxUnitId&&this._super(h);},ondragend:function S(h){var l=h&&h.tgt,j=l&&l.widget;if(j&&j.tree!==this.tree){var k=h.src&&h.src.data;if(k&&(k.indices||(k.index!==null))){this.remove(k.indices||k.index);}Y.call(this);}else{this._super(h);}},moveMQNodeToViewFilter:function(j){var h=this.editor.mainExpr;j.parent.remove(j.data);h.addSingleCondition(j.data);},getItemConfig:function(k,h,l){k.mdxUnitId=D(k);var j=this._super(k,h,l);return T.copy({cssClass:g(k,h,l)?"per-metric-limit":"",forbidRelation:true,getConditionTextPostfix:function(){if(this.data.et!==I.MQ){return"";}return'<img class="mstrmojo-moveToViewFilter" src="../images/1ptrans.gif" title="'+mstrmojo.desc(9746,"Move to view filter")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewFilter(w); return false;\" />";}},j);}});function F(r,p,q,u){var j=W.delta(q.domNode,r.containerNode);j.y+=(u==="andor"?16:parseInt(q.domNode.offsetHeight,10));var s={condition:q,zIndex:r.zIndex+10,left:j.x+"px",top:j.y+"px"},h;switch(u){case"andor":if(r.skipAndOrPopup){return ;}h="andOrPopupRef";break;case"createSet":case"createSetOpt":var t=r.model.targets;h="createSetPopupRef";s.type=u;s.model={attrs:a.filter(t,function(w){return w.t===C.ATTRIBUTE;}),metrics:a.filter(t,function(w){return w.t===C.METRIC;})};if(u==="createSetOpt"){s.condition=q.parent;s.model.childIdx=q.childIndex();}break;case"condition":var o=r.walk,k=q.textNode.cloneNode(true),l=o.conditionNode.firstChild;e.removeClass(k,"editable");e.addClass(o.conditionNode,"mstrmojo-ConditionNode");if(l.firstChild){l.removeChild(l.firstChild);}l.appendChild(k);o.set("objectBrowsingEnabled",r.objectBrowsingEnabled);o.set("targets",r.model.targets);o.set("targetsLastMod",r.modelLastSet);o.set("ets",q.tree.validExprTypes||r.validExprTypes);o.set("condition",q);o.set("model",T.clone(p));o.set("hasPrompt",r.model.hasPrompt);o.set("disableElementsBrowsing",r.disableElementsBrowsing||o.disableElementsBrowsing);o.set("editor",r);o.set("inRelation",q.inRelation);r.feContent.set("visible",false);o.set("visible",true);o.columnWalk.target.updateScrollbars();B.call(r,false);return ;}r.openPopup(h,s);}function M(j){var h=j.model;h.expr=f(h.exprForest);h.limitExpr=f(b(h.limitExprForest));j.onSave(h);}function Q(j){var h=[];a.forEach(j,function(k){if(!k){return ;}if(k.et===I.ANDOR){k.nds=Q(k.nds);if(k.nds.length===0){return ;}else{if(k.nds.length===1){var l=k.nds[0];if(k.not){l.not=!l.not;}h.push(l);return ;}}}h.push(k);});return h;}function J(h){return h?[h]:[];}function f(h){return h&&h.length===1?h[0]:null;}function b(k){var j=Q(k),h;if(!j[0]||j[0].mdxUnitId){h={et:I.ANDOR,fn:Z.FN.AND,nds:j};}else{h=j[0];}return[h];}function g(j,h,k){return(k===k.tree||k.parent===k.tree)&&!!j.mdxUnitId;}function D(j){if(!("mdxUnitId" in j)){var h;switch(j.et){case I.MQ:h=j.m.did||null;break;case I.ANDOR:a.forEach(j.nds,function(l){var k=D(l);if(h===undefined){h=k;}else{if(h!==k){h=null;return false;}}return true;});break;default:h=undefined;break;}j.mdxUnitId=h;}return j.mdxUnitId;}function V(p){var r=p.tree,q=r.ctxtBuilder.itemWidgets[0],u=p.parent,s=a.indexOf(u.items,p.data),l=u.items[s],j=l.mdxUnitId;if(u===r){return ;}if(u.data.mdxUnitId===j){return ;}if(q.data.mdxUnitId){var k={et:I.ANDOR,fn:Z.FN.AND,nds:[q.data,l]};r.remove(0);r.add([k]);r.ctxtBuilder.itemWidgets[0].ctxtBuilder.itemWidgets[0].remove(l);}else{var o=q,h;a.forEach(q.data.nds,function(x,w){if(x.mdxUnitId===l.mdxUnitId&&q.items[w]!==l){o=q.ctxtBuilder.itemWidgets[w];h=w;return false;}});if(o===u){return ;}if(o.data.et!==I.ANDOR){var t={et:I.ANDOR,fn:Z.FN.AND,nds:[o.data,l]};q.add([t],h+1);q.remove(o.data);}else{o.add([l]);}u.remove(l);}}}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.HBox","mstrmojo.ui.menus.EditorConfig","mstrmojo.mstr.EnumFunction","mstrmojo.DropDownList","mstrmojo.ui.Pulldown","mstrmojo.SearchablePulldown","mstrmojo.ButtonList","mstrmojo.Box","mstrmojo.Label","mstrmojo.RadioList","mstrmojo.CheckList","mstrmojo.EditableLabel","mstrmojo.CheckBox","mstrmojo.fe.FilterEditor","mstrmojo._FormatDefinition","mstrmojo.num","mstrmojo.locales","mstrmojo.vi.models.VIComponentMap","mstrmojo.func","mstrmojo.dom","mstrmojo.ME.AttributeEditBox","mstrmojo.string","mstrmojo.dom","mstrmojo.models.datasets.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.editors.ObjectPicker","mstrmojo.vi.ui.editors.AttributeLinkEditor","mstrmojo.vi.ui.NumberFormatter");mstrmojo.requiresDescs(1442,1885,1886,2022,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,3993,4564,11494,11495,11496,11497,14612);var p=mstrmojo.mstr.EnumFunction,X=mstrmojo.hash,s=mstrmojo.array,AH=mstrmojo.expr.ET,D=mstrmojo.css,V=mstrmojo.dom,w=mstrmojo.Button.newWebButton,S=mstrmojo.ME.MetricToken.brackets,T=mstrmojo._FormatDefinition,q=mstrmojo.models.datasets.DataInterface,K=mstrmojo.vi.models.VIComponentMap.TYPES,U=mstrmojo.chart.model.enums.EnumDSSObjectType;var Y={SUM:mstrmojo.desc(2131,"Sum"),ADD:mstrmojo.desc(6017,"Add"),AVG:mstrmojo.desc(2122,"Average"),MAX:mstrmojo.desc(2125,"Maximum"),GST:mstrmojo.desc(5869,"Greatest"),MIN:mstrmojo.desc(2127,"Minimum"),LST:mstrmojo.desc(5868,"Least"),CNT:mstrmojo.desc(2123,"Count"),MTP:mstrmojo.desc(5418,"Multiply"),STD:mstrmojo.desc(2130,"Standard Deviation"),PTD:mstrmojo.desc(11494,"Population Standard Deviation")},d={SUM:{n:Y.SUM,t:p.FunctionSum},ADD:{n:Y.ADD,t:p.FunctionPlus},AVG:{n:Y.AVG,t:p.FunctionAvg},MAX:{n:Y.MAX,t:p.FunctionMax},GST:{n:Y.GST,t:p.FunctionGreatest},MIN:{n:Y.MIN,t:p.FunctionMin},LST:{n:Y.LST,t:p.FunctionLeast},TMS:{n:Y.MTP,t:p.FunctionTimes},CNT:{n:Y.CNT,t:p.FunctionCount},GEM:{n:mstrmojo.desc(2124,"Geometric Mean"),t:p.FunctionGeomean},MED:{n:mstrmojo.desc(2126,"Median"),t:p.FunctionMedian},MOD:{n:mstrmojo.desc(2128,"Mode"),t:p.FunctionMode},PDT:{n:mstrmojo.desc(2129,"Product"),t:p.FunctionProduct},STD:{n:mstrmojo.desc(2130,"Standard Deviation"),t:p.FunctionStdev},VAR:{n:mstrmojo.desc(2132,"Variance"),t:p.FunctionVar}},Z=[{n:Y.SUM,t:p.FunctionOLAPSum},{n:Y.AVG,t:p.FunctionOLAPAvg},{n:Y.MIN,t:p.FunctionOLAPMin},{n:Y.MAX,t:p.FunctionOLAPMax},{n:Y.CNT,t:p.FunctionOLAPCount}],AI=[{n:Y.SUM,t:p.FunctionOLAPSum},{n:Y.AVG,t:p.FunctionOLAPAvg},{n:Y.MIN,t:p.FunctionOLAPMin},{n:Y.MAX,t:p.FunctionOLAPMax},{n:Y.CNT,t:p.FunctionOLAPCount}],M=[{n:mstrmojo.desc(1058,"Previous"),t:p.FunctionLag},{n:mstrmojo.desc(1059,"Next"),t:p.FunctionLead},{n:mstrmojo.desc(4046,"First"),t:p.FunctionFirst},{n:mstrmojo.desc(4049,"Last"),t:p.FunctionLast}];function f(AM,AO,AN,AK){return{scriptClass:"mstrmojo.ui.Pulldown",items:AM,selectedIndex:AO,onitemSelected:function AL(AP){var AQ=this.parent;while(!AQ.data||!AQ.data[AN]){AQ=AQ.parent;}AQ.data.set(AN,AK?AK(AP):AP.v);}};}function x(AL,AK){return{scriptClass:"mstrmojo.Box",cssClass:"breakByBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13903,"Break by:")},f(AL,AK,"breakBy",function(AM){return{id:AM.did,type:AM.t,dmy:AM.dmy};})]};}function AF(AN){var AO=AN.metrics,AP=AN.propName,AM=AN.optionValueField||"id",AK=s.find(AO,AM,AN.value),AQ=function AQ(AS){var AR=this.parent;while(!AR.data||!AR.data.hasOwnProperty(AP)){AR=AR.parent;}AR.data.set(AP,AS?{id:AS[AM],type:4}:{cst:this.text});};return{scriptClass:"mstrmojo.ui.SearchablePulldown",items:AO,selectedIndex:AK,useRichTooltip:true,bindings:AN.bindings,valid:true,allowCustomText:true,allowEmptyText:true,onvalidChange:function AL(){mstrmojo.css.toggleClass(this.domNode,"invalid",!this.valid);if(this.hasRendered){this.hideTooltip();this.showTooltip();}},updateTooltipConfig:function(){if(this.valid){this.richTooltip=null;return ;}this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onitemSelected:AQ,onTextEditComplete:function(){AQ.call(this,this.items[this.selectedIndex]);},onPopupWidgetOpened:function(){this.set("valid",true);},postkeyup:AN.postkeyup};}function R(AN,AM,AL){if(AN&&AN.datap){var AK=s.filterOne(AN.datap,function(AP){return AP.tbid===AM;}),AO=AK&&AK.maps.amps;return s.filterOne(AO,function(AP){return AL===AP.aimp.atid;});}return null;}function j(AK,AO){var AM=s.filterOne(AK&&AK.afmps,function(AP){return AP.fmid===AO;}),AN=AM&&(AM.sqc?AM:AM.col.oi),AL;if(AN&&AN.sqc){AL={did:AN.sqc.id,n:mstrmojo.string.decodeHtmlString(AN.cln),coldtp:AN.sqc.dt.tp,georole:AN.geo,timerole:AN.tim,der:AN.sqc.der};}else{if(AN){AL={did:AN.did,n:mstrmojo.string.decodeHtmlString(AN.def.cln),coldtp:AN.def.dt.tp,georole:AM.geo,timerole:AN.def.dicl.time,der:AN.def.dicl.der};}}return AL;}function C(AL,AK,AN){var AM={success:function(AO){if(AO&&AO.msgid){mstrApp.serverRequest({taskId:"qBuilder.GetReportXDADefinition",msgid:AO.msgid,bindingflag:2,previewflag:261,browsetype:5},AN);}},failure:function(AO){mstrApp.onerror(AO);}};mstrApp.serverRequest({taskId:"duplicateReportInstance",datasetID:AK,messageID:AL},AM);}function I(AP,AQ,AN){var AL=AP.srcTableId,AS=AP.tgtTableId,AK,AO,AM=function(AW,AV){var AY="<mpcs><mpc ",AU,AX;for(AU in AV){AX=AV[AU];AY+='$ACT="$VAL" '.replace("$ACT",AU).replace("$VAL",AX);}AY+="/></mpcs>";return{act:"changeEMMAMapping",tbid:AW,dsid:AP.dsid,mapping:AY};},AT=function(AW){var AX={success:function(){AR();}},AV,AU;AK=R(AW,AL,AP.srcId);AO=R(AW,AS,AP.tgtId);AV=j(AK,AK.afmps[0].fmid);AU=[AM(AL,{did:AV.did,oid:AO.aimp.atid,fg:1})];AQ.getDataService().submitUpdates(AU,AX);},AR=function(){var AU=[],AX={},AV,AW;if(!AK||!AO){return ;}AX[AL]={};AX[AS]={};s.forEach(AK.afmps,function(Ab){var AZ=s.find(AO.afmps,"fmid",Ab.fmid),Ac,Aa,AY;if(AZ>=0){AV=j(AK,Ab.fmid);AW=j(AO,Ab.fmid);if(AV.georole!==AW.georole){AY=(AV.georole===0)?AL:AS;Ac=(AV.georole===0)?AV.did:AW.did;Aa=AV.georole||AW.georole;AX[AY][Ac]=X.copy({did:Ac,georole:Aa},AX[AY][Ac]);}if(AV.timerole!==AW.timerole){AY=(AV.timerole===0)?AL:AS;Ac=(AV.timerole===0)?AV.did:AW.did;Aa=AV.timerole||AW.timerole;AX[AY][Ac]=X.copy({did:Ac,timerole:Aa},AX[AY][Ac]);}if(AV.der!==AW.der){Aa=AV.der|AW.der;AX[AL][AV.did]=X.copy({did:AV.did,drvflg:Aa},AX[AL][AV.did]);AX[AS][AW.did]=X.copy({did:AW.did,drvflg:Aa},AX[AS][AW.did]);}}});X.forEach(AX,function(AY,AZ){X.forEach(AY,function(Aa){AU.push(AM(AZ,Aa));});});AV=j(AK,AK.afmps[0].fmid);AU.push(AM(AL,{did:AV.did,oid:AO.aimp.atid}));if(AN){AN(AU);}};C(AQ.mid,AP.dsid,{success:AT});}function W(AP,AM,AL,AQ){var AK=0,AO=[],AN=function(AR){var AS=AL[AK-1];if(AR&&AR.tks&&AS){AO.push({fid:AS.fid,fnm:AS.fnm,ftk:AR.tks.items});}if(AK===AL.length){AQ(AO);return ;}AS=AL[AK++];mstrmojo.ME.MetricDataService.validateMetric({metricId:AM,formID:AS.fid,objectType:12,tokenStreamXML:"",metricXML:"",msgID:AP},{success:AN});};AN();}function AB(AK,AL){return{v:S(AK.n)+"@"+S(AL.fnm),tp:275,lv:1,exv:AL.fid,extp:8,oi:{did:AK.did,t:AK.t,n:AK.n}};}mstrmojo.vi.ui.DatasetUnitMenuUtils=mstrmojo.provide("mstrmojo.vi.ui.DatasetUnitMenuUtils",{getAvailableShortcutMetricFunctionsGroup:function AE(AK){return{"12":[[d.AVG,d.CNT,d.MAX,d.MIN,d.STD,d.SUM,d.VAR]],"4":[[d.SUM,d.AVG,d.MIN,d.MAX,d.CNT],[d.GEM,d.MED,d.MOD,d.PDT,d.STD,d.VAR]]}[AK.t];},isAmongFunctions:function A(AL,AK){return AK.some(function(AM){return AM.some(function(AN){return AN.t===AL;});});},getMultiSelectionShortcutMetricFunctions:function J(AK){var AL=true;s.forEach(AK,function(AM){if(4!==AM.t){AL=false;return false;}return true;});return AL?[d.ADD,d.AVG,d.GST,d.LST,d.TMS]:[];},getRelativeReferenceMenu:function b(AO,AM,AR,AK){var AN=0,AL=M[AN],AQ=0,AP=AR&&AR[AQ];return new mstrmojo.ui.menus.EditorConfig({data:{item:AO,relativeRef:AL,breakBy:AP},cssClass:"RelativeReference-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",cssClass:"funcBox",children:[{scriptClass:"mstrmojo.Label",visible:AM&&AM.length,text:AM},f(M,AN,"relativeRef",function(AS){return AS.t;})]},x(AR,AQ)],fnOk:function(AS){return AK(AS.item,AS.relativeRef,[AS.breakBy]);}});},getMovingTotalMenu:function B(AU,AO,AQ){var AV=1,AN=AI[AV].t,AP=1,AL=mstrmojo.desc(13289,"Starting previous##rows").split("##"),AT=0,AM=AO&&AO[AT];return new mstrmojo.ui.menus.EditorConfig({cssClass:"MovingTotal-MenuEditor",data:{item:AU,funcType:AN,windowSize:AP,breakBy:AM},contents:[f(AI,AV,"funcType",function(AW){return AW.t;}),{alias:"winSzBox",scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",cssClass:"WinSzPrefix",text:AL[0]},{alias:"winSz",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:mstrmojo.expr.DTP.INTEGER,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL,min:1},postCreate:function AS(){this.set("value",AP);},_ontooltipover:function(){var AW=mstrmojo.all[this.id];AW._hovered=true;AW.showTooltip();},_ontooltipout:function(){var AW=mstrmojo.all[this.id];AW._hovered=false;AW.hideTooltip();},useRichTooltip:true,tooltipOpenDelay:0,onInvalid:function(){var AW=this.validationStatus.msg,AX=!(this.richTooltip&&AW===this.richTooltip.content);this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-V",top:-5,refNode:this.domNode,content:AW};if(this._hovered&&AX){this.hideTooltip();this.showTooltip();}},onValid:function(){this.richTooltip=null;this.hideTooltip();},postvalueChange:function AR(){var AW=this.isValid();this.parent.parent.popupConfig.data.set("windowSize",AW?parseInt(this.value,10):0);}},{scriptClass:"mstrmojo.Label",cssClass:"WinSzSuffix",text:AL[1]}]},x(AO,AT)],bindings:{okEnabled:function(){return !!this.data.windowSize;}},fnOk:function AK(AW){if(AQ){AQ(AU,AW.funcType,AW.windowSize,[AW.breakBy]);}}});},getRunningTotalMenu:function AD(AN,AQ,AL){var AM=0,AK=Z[AM].t,AP=0,AO=AQ&&AQ[AP];return new mstrmojo.ui.menus.EditorConfig({data:{item:AN,func:AK,breakBy:AO},cssClass:"RunningTotal-MenuEditor",contents:[f(Z,AM,"func",function(AR){return AR.t;}),x(AQ,AP)],fnOk:function(AR){return AL(AR.item,AR.func,[AR.breakBy]);}});},getRankMetricEditor:function z(AO,AR,AM){var AK=[{n:mstrmojo.desc(1886,"Descending"),v:"0"},{n:mstrmojo.desc(1885,"Ascending"),v:"-1"}],AL=0,AN=AK[AL].v,AQ=0,AP=AR&&AR[AQ];return new mstrmojo.ui.menus.EditorConfig({data:{item:AO,order:AN,breakBy:AP},cssClass:"NewRankMetric-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14612,"Sort:")},f(AK,AL,"order")]},x(AR,AQ)],fnOk:function(AS){return AM(AS.item,AS.order,[AS.breakBy]);}});},insertAddUnitToFilterMenu:function H(AP,AL,AK){var AN=this,AM=mstrmojo.desc(2022,"Add to Filter"),AO=s.ensureArray(AK).filter(function(AQ){return AN.isValidAddToFP(AL,AQ);});if(AO.length>0){AP.addMenuItem(AM,"",function(){AL.addFilterStackSelectors(AO);});}else{AP.addDisabledMenuItem(AM,"");}},isValidAddToFP:function N(AN,AP){var AL=AN.controller.view.builder,AM=AL.getLayoutVIMap(AN.getCurrentLayoutKey()).getComponent(K.FILTER_STACK),AQ;AQ=(!AM||s.find(AM.getFilterDefinitions(),"srcid",AP.did)===-1);if(AQ&&AP.lock){var AK=AP.fs||[],AO;AQ=false;for(AO=0;AO<AK.length;AO++){if(AK[AO].iidx){AQ=true;break;}}}return AQ;},renameItem:function r(AP,AS,AL,AN){var AO=AP.mstrmojoId,AR=mstrmojo.dom.findWidget(AP);AN=AN||{};if(!AO){var AQ=mstrmojo.insert({scriptClass:"mstrmojo.EditableLabel",editOnClick:false,text:AS.n,title:AS.dsc||"",allowEmptyText:AN.allowEmptyText,cssClass:AN.cssClass||"",placeholder:AP,onTextEditComplete:function AK(AT){if(AT){return AL(this);}},onmousedown:function AM(AT){if(this.isEditing){AT.cancel();}}});if(AR&&AR.draggable){AQ.parent=AR;}AQ.render();AO=AQ.id;}mstrmojo.all[AO].set("isEditing",true);return mstrmojo.all[AO];},getMultipleMetricsCalculationMenus:function h(AR,AK,AU){var AQ=new mstrmojo.ui.menus.MenuConfig(),AW=mstrmojo.vi.ui.DatasetUnitMenuUtils.getMultiSelectionShortcutMetricFunctions(AR),AO=function(AY,AZ,AX){return{dsid:AK,funcType:AZ,funcType2:AX,items:AY};};AQ.useTooltip=true;AW.forEach(function(AX){AQ.addMenuItem(AX.n,"",function(){AU(AO(AR,AX.t));});});if(AR.length===2){var AP=mstrmojo.mstr.EnumFunction,AN=AP.FunctionDivide,AL=AP.FunctionMinus,AT=AR[0],AS=AR[1],AV=function(Ab,AZ,AX,Aa,AY){AQ.addMenuItem(Ab,"",function(){AU(AO([AZ,AX],Aa,AY));});},AM=[{n:function(AY,AX){return AY.n+"/"+AX.n;},fn:AN},{n:function(AY,AX){return AY.n+"-"+AX.n;},fn:AL},{n:function(AY,AX){return"("+AY.n+"-"+AX.n+")/"+AX.n;},fn:AL,fn2:AN}];AM.forEach(function(AX){AQ.addSeparator();AV(AX.n(AT,AS),AT,AS,AX.fn,AX.fn2);AV(AX.n(AS,AT),AS,AT,AX.fn,AX.fn2);});}return AQ;},getCalculationMetricEditor:function L(AS,AT,AR){var AM=[{n:"",css:"operator-plus",funcType:p.FunctionPlus},{n:"",css:"operator-minus",funcType:p.FunctionMinus},{n:"",css:"operator-multiply",funcType:p.FunctionTimes},{n:"",css:"operator-divide",funcType:p.FunctionDivide},{n:"%",css:"operator-percent-diff",funcType:p.FunctionMinus,funcType2:p.FunctionDivide}],AN={m1:AT.did,m2:AS[0].did,operator:p.FunctionPlus,u1:{id:AT.did,type:4},u2:null},AL=function(AU){return{}.hasOwnProperty.call(AU,"cst");},AQ=function(AU){return typeof AU==="string"&&!!AU.length&&!isNaN(Number(AU));};var AK="this.parent.popupConfig.valid || this.selectedIndex !== -1 || (!!this.selectedNode && this.selectedNode.innerHTML.length === 0)",AP=function AP(){var AU=this.parent.popupConfig;if(AU){AU.set("okEnabled",this[this.editableSlot].innerHTML.length!==0);}};return new mstrmojo.ui.menus.EditorConfig({cssClass:"Calculation-MenuEditor",contents:[AF({metrics:AS,value:AN.m1,propName:"u1",optionValueField:"did",bindings:{valid:AK},postkeyup:AP}),{scriptClass:"mstrmojo.ButtonListHoriz",items:AM,selectedIndex:0,postselectionChange:function AO(){this.parent.data.set("operator",this.selectedItem.funcType);this.parent.data.set("operator2",this.selectedItem.funcType2);}},AF({metrics:AS,value:null,propName:"u2",optionValueField:"did",bindings:{valid:AK},postkeyup:AP})],data:AN,okEnabled:false,bindings:{valid:function(){var AW=this.data.u1,AV=this.data.u2,AX=this.data.operator;if(!AW||!AV||!AX){return false;}var AU=!(AL(AW)&&AL(AV))&&(!AL(AW)||AQ(AW.cst))&&(!AL(AV)||AQ(AV.cst));this.set("okEnabled",AU);return AU;}},fnOk:function(AU){return AR(AU.u1,AU.u2,AU.operator,AU.operator2);}});},getFilterEditor:function F(AL){var AQ="dfe",AP,AM={},AO=AL.datasetFilter;function AN(AR){if(!AR.et){return false;}if(AR.et===AH.RLS){return false;}if(AR.p){return false;}if(AR.cs&&AR.cs.some(function(AS){return !!AS.p;})){return false;}return !AR.nds||AR.nds.every(AN);}function AK(){s.forEach(AL.att,function(AS){if(AS.t!==12||AS.da){return ;}AM[AS.did]={did:AS.did,n:AS.n,t:AS.t,fs:AS.fs};});s.forEach(AL.mx,function(AS){if(AS.um){return ;}AM[AS.did]={did:AS.did,n:AS.n,t:AS.t};});if(AO){mstrmojo.expr.findTargets(AO,"did",AM);}var AR={expr:X.clone(AO),targets:X.valarray(AM)};AP=AQ&&window.mstrmojo&&mstrmojo.all[AQ];if(!AP){AP=mstrmojo.insert({id:AQ,scriptClass:"mstrmojo.fe.ReportFilterEditor",showLimits:false,objectBrowsingEnabled:true});}if(AL.zIndex){AP.set("zIndex",AL.zIndex);}AP.set("title",mstrmojo.desc(12138,"Dataset Filter #").replace("#",AL.datasetName));AP.set("onSave",AL.fnOk);AP.set("model",AR);AP.onUpdateBrowseElementsParams=AL.browseParam;AP.open();}if(AO&&!AN(AO)){mstrmojo.warn(mstrmojo.desc(13527,"The filter contains an advanced condition that cannot be edited."),{confirmBtn:{t:mstrmojo.desc(13528,"Clear existing filter"),fn:function(){AO=null;AK();}}},{title:mstrmojo.desc(11812,"Notification")});}else{AK();}},getCfgForAddUnitFromAllObject:function(AK,AL){var AM=null,AN=null,AO=[],AP=function(AQ,AR){if(!AR){return false;}return s.find((AR.att||[]).concat(AR.mx||[]),"did",AQ.did)>-1;};X.forEach(AL,function(AR,AQ){if(AR.idd){AM=AQ;AN=AR;return false;}return true;});if(!AM){AM="$GUID_141";AO.push({act:"createDataset",mgo:true,prm:true,name:mstrApp.projectName,idd:true,newObjectIds:[AM]});}s.forEach(AK,function(AQ){if(!AP(AQ,AN)){AO.push({act:"addUnitToDataset",dsid:AM,unitId:AQ.did,unitType:AQ.t});}});return{actions:AO,dsid:AM};},getAggregateByMenu:function o(AP,AN){var AL=new mstrmojo.ui.menus.MenuConfig(),AM=function(AT,AS){var AV,AU;if(AS){var AR=AT.mexp.args[0];AV=AR.did;AU=AR.t;}else{AV=AT.did;AU=AT.t;}return{did:AV,t:AU};},AK=this.getAvailableShortcutMetricFunctionsGroup(AP),AQ=AP.mexp?AP.mexp.ft:null,AO=AP.mexp&&this.isAmongFunctions(AQ,AK);AK.forEach(function(AR,AS){if(AS!==0){AL.addSeparator();}AR.forEach(function(AT){AL.addMenuItem(AT.n,"",function(){AN(AM(AP,AO),AT.t);});});});return AL;},showObjectPicker:function l(AL,AK){var AM="object_picker";return function(){var AN=mstrmojo.all[AM];if(!AN){AN=new mstrmojo.vi.ui.editors.ObjectPicker({id:AM});if(AK){AN.supportedTypes=s.hash(AK);AN.ob.browsableTypes="8,"+AK.join(",");}AN.render();}else{if(AK){AN.supportedTypes=s.hash(AK);AN.ob.browsableTypes="8,"+AK.join(",");}AN.browse();}AN.OKFn=AL||mstrmojo.emptyFn;AN.open();};},generateNumberFormat:function u(AP){var AK=T.DefaultFormat.FormattingNumber,AL=T.NumberFormatCategory,AN=AP||{},AM=AN.nct,AO=AM===AL.General&&AN.nfs==="General";return{category:(AM===undefined||AO)?AL.Automatic:AM,decimalPlaces:AN.ndp===undefined?2:AN.ndp,thousandSeparator:AN.nth?-1:0,currencySymbol:AN.ncs||AK.CurrencySymbol,currencyPosition:AN.ncp||AK.CurrencyPosition,format:AN.nfs||"",negativeNumbers:AN.nnn||AK.NegativeNumbers};},getNumberFormatEditor:function AA(AN,AM,AL){var AK=this.generateNumberFormat(AM),AO=X.clone(AK),AQ=X.clone(AK);return new mstrmojo.ui.menus.EditorConfig({data:AO,bindings:{okEnabled:function(){return !(this.data.category===AQ.category&&this.data.format===AQ.format);}},cssClass:"NumberFormat-MenuEditor",contents:[{scriptClass:"mstrmojo.vi.ui.NumberFormatter",formatValue:AK,myData:AO,oldData:AQ,adjustAfterCategoryChange:function(){this.parent.adjustCornersForPopupOverflow();}}],fnOk:function AP(AR){if(!(AR.category===AQ.category&&AR.format===AQ.format)){return AL(AR,AQ);}}});},getHighlightElementHandler:function(AM,AL,AK){return function(){D.toggleClass(AL,AK||"open",AM);};},getConfDataTypeMenuCfg:function AC(AK,Af,AX,As){var An="ToString",Ae="ToNumber",Ac="ToDateTime",AW="keepOriginal",AN="Default",Ao={ToString:3,ToNumber:2,ToDateTime:8},AS={ToString:"D1ED29645DEC4DBF99E8E09ED939074B",ToNumber:"399C3EC1041643F1ACE8F2A92B1C1F2F",ToDateTime:"0A558C7295DE42DAA8C5594F1724563F"},AQ="_pattern",Aq="_func",Aa="_bft",Av="_state",At={UNCHANGED:0,TO_CREATE:1,TO_UPDATE:2},AP={n:"Default",v:"Default"},Al=[{n:"MM-DD-Year",v:"MM-DD-Year"},{n:"MM/DD/Year",v:"MM/DD/Year"},{n:"DD-MM-Year",v:"DD-MM-Year"},{n:"DD/mm/Year",v:"DD/mm/Year"},AP],AM=[{n:mstrmojo.desc(13772,"Keep Original"),v:AW},{n:mstrmojo.desc(12276,"String"),v:An},{n:mstrmojo.desc(2052,"Date"),v:Ac},{n:mstrmojo.desc(3434,"Number"),v:Ae}],AV=X.clone(AM).slice(1),Ad=Af.fs.filter(function(Ax){return Af.da||Ax.obf;}),Aw=Ad.length>1,AY=Ad.length>5,AR=false,Am=false,Ag=[],Ak=[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13773,"Select Data Type for New Attribute:")}],Au={okEnabled:false},Ap=function(){var Ax=false;Ad.forEach(function(Ay){Ax=Ax||(Au[Ay.fnm+Aq+Av]!==At.UNCHANGED)||(Au[Ay.fnm+AQ+Av]!==At.UNCHANGED);});return Ax;},Ah=function(Az,Ay){var Ax=0;if(Az.da){s.forEach([An,Ac,Ae],function(A2,A0){var A1=new RegExp("^\\s*"+A2+"\\s*(<.*>)?\\s*\\((.+)\\)\\s*$","i").exec(Ay.f);if(A1&&A1[2]){Ax=A0+1;return false;}});}return Ax;},Aj=function(Az,Ay){var A0=AN;if(Af.da){var Ax=new RegExp("^\\s*"+Ay+'\\s*<\\s*Pattern\\s*=\\s*"(.+)"\\s*>.*$',"i").exec(Az.f);if(!mstrmojo.string.isEmpty(Ax&&Ax[1])){A0=Ax[1];}}return A0;},Ai=function(){return AY?this.parent.parent.parent:(Aw?this.parent.parent:this.parent);},Ab=function(Ax){if(AY){Ax.formList.updateScrollbars();}},AO=function(A4,A5,A3){var Ax=A5.fnm,A0=AY?A4.formList[A5.fnm+AQ]:A4[A5.fnm+AQ],A1=Aw?A0.children[1]:A0,A2=Au[Ax+Aq],Az=AR&&(A2===Ac||A2===An),Ay=A0.visible!==Az;if(Ay){A0.set("visible",Az);if(Az){Ab(A4);}else{A1.hideTooltip();}}if(A3){A1.set("text",Aj(A5,A2));A1.set("items",A2===Ac?Al:[AP]);}},AZ=function(Ax){var Ay=false;Ad.forEach(function(Az){if(Au[Az.fnm+Aq]===Ac||Au[Az.fnm+Aq]===An){Ay=true;return false;}});Ax.advancedLabel.set("visible",Ay);},AL=function(A0,Ay,A1,Ax){return{scriptClass:"mstrmojo.ui.Pulldown",items:A0,alias:A1.fnm+Aq,selectedIndex:Ay,onPopupWidgetOpened:function(){Ab(Ai.call(this));},onitemSelected:function Az(A6,A4){var A5=Ai.call(this),A7=A5.data,A8=A1.fnm,A3=A6.v,A2=function(A9){if(A9){return(A0.length===3?At.TO_UPDATE:At.TO_CREATE);}return At.UNCHANGED;};A7.set(A8+Aq,A3);A7.set(A8+AQ,Aj(A1,A3));A7.set(A8+Aa,A3===AW?A1.bftp:Ao[A3]);A7.set(A8+Aq+Av,A2(A4!==Ay));A7.set("okEnabled",Ap());AO(A5,A1,true);AZ(A5);}};},AU=function(Az,A0,Ax){return{scriptClass:"mstrmojo.ui.SearchablePulldown",alias:Az.fnm+AQ,useRichTooltip:true,visible:Ax,allowCustomText:true,allowEmptyText:true,onPopupWidgetOpened:function(){Ab(Ai.call(this));},customizeSearchResult:function(A1){if(s.find(A1,"v","Default")===-1&&this.items.length>0){A1.push(AP);}},onclick:function(A1){mstrmojo.ui.SearchablePulldown.prototype.onclick.call(this,A1);this.set("isEditing",true);},updateData:function(A3){var A1=Ai.call(this),A2=A1.data,A4=Az.fnm;A2.set(A4+AQ,A3);A2.set(A4+AQ+Av,A0!==A3?At.TO_UPDATE:At.UNCHANGED);A2.set("okEnabled",Ap());},onitemSelected:function Ay(A2,A1){if(A2){this.updateData(A2.v);}},onkeyup:function(A1){mstrmojo.ui.SearchablePulldown.prototype.onkeyup.call(this,A1);var A2=this[this.editableSlot],A3=A2.innerText||A2.textContent;this.updateData(A3);},updateTooltipConfig:function(A2){this.tooltipOpenDelay=A2?500:0;var A1=V.position(this.domNode);this.richTooltip={content:mstrmojo.desc(14114,'Pattern determines the formatting for the resulting string of characters. You can use the custom numeric, date, and time formatting symbols. <br/> Example: if pattern is defined as "0,000.00" for "1001", it returns the string "1,001.00"'),posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-C",top:A1.y-2,left:A1.x+A1.w+10};}};},Ar=function(A5,A4,Ax,Ay,A3){var A0=Ah(A5,A4),A2=Aj(A4,AM[A0].v),Az=A4.fnm,A1=AM;if(A0>0){A1=AV;A0--;}Ay[Az+AQ]="";Ay[Az+Aq]="";Ay[Az+Aa]="";Ay[Az+Aq+Av]=Ay[Az+AQ+Av]=At.UNCHANGED;if(A3){Ax.push({scriptClass:"mstrmojo.HBox",cssClass:"func-input",alias:Az+Aq,children:[{scriptClass:"mstrmojo.Label",text:Az,useRichTooltip:true,updateTooltipConfig:function(A8){this.tooltipOpenDelay=A8?500:0;var A7=this.domNode;var A6=V.position(A7);if(A7.scrollWidth>A7.offsetWidth){this.richTooltip={content:A7.innerText,posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-V",top:A6.y-A6.h-10,left:A6.x-10};}}},AL(A1,A0,A4,true)]});Ax.push({scriptClass:"mstrmojo.HBox",cssClass:"pattern-input",alias:Az+AQ,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12078,"Pattern")},AU(A4,A2,true)]});}else{Ax.push(AL(A1,A0,A4,false));Ax.push(AU(A4,A2,false));}};s.forEach(Af.fs,function(Ax){if(AK.als&&AK.als.links[Af.did+" "+Ax.fid]){Am=true;return false;}});if(Aw){Ad.forEach(function(Ax){Ar(Af,Ax,AY?Ag:Ak,Au,true);});}else{Ar(Af,Ad[0],Ak,Au,false);}if(AY){Ak.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"formList",cssClass:"formList",children:Ag});}Ak.push({scriptClass:"mstrmojo.Label",cssClass:"advancedLabel",alias:"advancedLabel",allowHTML:true,text:"<span>"+mstrmojo.desc(702,"Advanced")+"</span>",onclick:function(){var Ay=this.parent,Az,Ax,A0=true;AR=!AR;D.toggleClass(this.domNode,"expanded",AR);Ad.forEach(function(A1){AO(Ay,A1,false);Az=AY?Ay.formList[A1.fnm+AQ]:Ay[A1.fnm+AQ];Ax=Aw?Az.children[1]:Az;if(Az.visible&&A0&&!AY){A0=false;Ax.showTooltip();}});}});return new mstrmojo.ui.menus.EditorConfig({data:Au,cssClass:"ConfDataType-MenuEditor",contents:Ak,onOpen:function(){Ab(this);},bindings:{okEnabled:"this.data.okEnabled"},fnOk:function AT(Az){var Ax=[],A1=[],Ay=false,A0=function(A4,A5,A3){var A7=[],A6=function(A8){var A9=A8.ftk&&A8.ftk.slice(2,-2);if(!A9){return null;}while((A9.shift()).v!=="("){}return A9;},A2=A6(A3)||[AB(Af,A3)];A7.push({v:"!",tp:33,lv:4});if(A4!==AW){A7.push({v:A4,oi:{did:AS[A4],t:11,st:2816,n:A4}});if(!mstrmojo.string.isEmpty(A5)&&A5!==AN&&(A4===Ac||A4===An)){A7.push({v:'<Pattern="'+A5+'">(',tp:"2",lv:1});}else{A7.push({v:"(",tp:"2",lv:1});}A7=A7.concat(A2);A7.push({v:")",tp:"2",lv:1});}else{A7=A7.concat(A2);}A7.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:A7});};if(Am){Ay=true;}else{Ad.forEach(function(A2){if(Az[A2.fnm+Aq+Av]===At.TO_CREATE){Ay=true;return false;}else{if(Az[A2.fnm+Aq+Av]===At.TO_UPDATE||(Az[A2.fnm+AQ+Av]===At.TO_UPDATE&&(Az[A2.fnm+Aq]===Ac||Az[A2.fnm+Aq]===An))){A1.push(A2);}}});}if(Ay){Ad.forEach(function(A2){Ax.push({n:A2.fnm,formula:A0(Az[A2.fnm+Aq],Az[A2.fnm+AQ],A2),bft:Az[A2.fnm+Aa]});});As(Ay,Ax);}else{if(Af.da){W(AK.mid,Af.did,A1,function(A2){A2.forEach(function(A3){Ax.push({did:A3.fid,formula:A0(Az[A3.fnm+Aq],Az[A3.fnm+AQ],A3),bft:Az[A3.fnm+Aa]});});As(Ay,Ax);});}}}});},getCreateTimeDAEditorCfg:function O(AO,AN){var AM=function(AS){var AT=8,AU=1,AR=s.filter(AS.fs,function(AV){return(AS.da||AV.obf)&&(AV.bftp===AT||AV.bftp===AU);}),AQ=s.find(AR,"idf",true);return AR[AQ>=0?AQ:0];},AK=AM(AO);if(!AK){return null;}return new mstrmojo.ui.menus.EditorConfig({data:{okEnabled:false},cssClass:"CreateTimeAttribute-MenuEditor",contents:[{scriptClass:"mstrmojo.ui.CheckList",alias:"time_type",items:[{n:mstrmojo.desc(873,"Year"),v:"Year"},{n:mstrmojo.desc(10051,"Quarter of Year"),v:"QuarterOfYear"},{n:mstrmojo.desc(10050,"Quarter"),v:"Quarter"},{n:mstrmojo.desc(10049,"Month of Year"),v:"MonthOfYear"},{n:mstrmojo.desc(871,"Month"),v:"Month"},{n:mstrmojo.desc(10047,"Week of Year"),v:"WeekOfYear"},{n:mstrmojo.desc(10048,"Week"),v:"Week"},{n:mstrmojo.desc(11608,"Day of Year"),v:"DayOfYear"},{n:mstrmojo.desc(10046,"Day of Month"),v:"DayOfMonth"},{n:mstrmojo.desc(10045,"Day of Week"),v:"DayOfWeek"}],onchange:function AL(){var AQ=false;X.forEach(this.selectedIndices,function(AR){if(AR){AQ=true;return false;}});this.parent.data.set("okEnabled",AQ);}}],bindings:{okEnabled:function(){return this.data.okEnabled;}},fnOk:function AP(AV,AW){var Aa=AW.time_type,AZ=Aa.selectedIndices,AX=Aa.items,AU=[],AQ=[],AR="@form",AT={Year:"6F7DF5F8449111D5BEA300B0D01A55EF",Quarter:"6F7DF5F7449111D5BEA300B0D01A55EF",Concat:"6F7DF5FF449111D5BEA300B0D01A55EF",QuarterStartDate:"59E10CE2ADDD4A6DAC2416A72999A9ED",Month:"6F7DF5F6449111D5BEA300B0D01A55EF",ToString:"D1ED29645DEC4DBF99E8E09ED939074B",MonthStartDate:"7C63D4E70B2741C3A5B54A2EFD40961B",Week:"6F7DF5F5449111D5BEA300B0D01A55EF",WeekStartDate:"44681336D0DB4E43AC333FFB3CC4400D",DayOfMonth:"6F7DF5F2449111D5BEA300B0D01A55EF",DayOfWeek:"6F7DF5F3449111D5BEA300B0D01A55EF",DayOfYear:"6F7DF5F4449111D5BEA300B0D01A55EF"},AY=function(Ab){switch(Ab){case"Year":return{ID:["Year","(",AR,")"]};case"Quarter":return{ID:["Year","(",AR,") * 10 + ","Quarter","(",AR,")"],DESC:["Concat",'("Q", ',"Quarter","(",AR,")",', ", ", ',"Year","(",AR,"))"],DATE:["QuarterStartDate","(",AR,")"]};case"QuarterOfYear":return{ID:["Quarter","(",AR,")"],DESC:["Concat",'("Q", This@ID)']};case"Month":return{ID:["Year","(",AR,") * 100 + ","Month","(",AR,")"],DESC:["ToString",'<Pattern="mmm yyyy">(',AR,")"],DATE:["MonthStartDate","(",AR,")"]};case"MonthOfYear":return{ID:["Month","(",AR,")"],DESC:["ToString",'<Pattern="mmmm">(',AR,")"]};case"Week":return{ID:["Year","(",AR,") * 100 + ","Week","(",AR,")"],DESC:["Concat",'("W", ',"Week","(",AR,'), ", ", ',"Year","(",AR,"))"],DATE:["WeekStartDate","(",AR,")"]};case"WeekOfYear":return{ID:["Week","(",AR,")"]};case"DayOfMonth":return{ID:["DayOfMonth","(",AR,")"]};case"DayOfWeek":return{ID:["DayOfWeek","(",AR,")"],DESC:["ToString",'<Pattern="ddd">(',AR,")"]};case"DayOfYear":return{ID:["DayOfYear","(",AR,")"]};}},AS=function(Ab,Ad,Af){var Ae=[{v:"!",tp:33,lv:4}],Ac;Af.forEach(function(Ah,Ag){if(Ah===AR){Ae.push(AB(Ab,Ad));}else{Ac=AT[Ah];if(Ac){Ae.push({v:Ac,oi:{did:Ac,t:11,st:2816,n:Ac}});}else{Ae.push({v:Ah,tp:"2",lv:1});}}});Ae.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:Ae});};X.forEach(AZ,function(Ab,Ac){if(Ab){AQ=[];X.forEach(AY(AX[Ac].v),function(Ad,Ae){AQ.push({n:Ae,formula:AS(AO,AK,Ad),bft:(Ae==="DATE"?8:0)});});AU.push({isTokenStream:true,forms:AQ,name:AO.n+" ("+AX[Ac].n+")"});}});return AN(AU);}});},RefreshAndCloseAllObjectBrowserCallback:function(AL,AK){return mstrmojo.func.wrapMethods(AK.getDatasetsUpdateCallback(),{success:function(){if(s.find(AL,"act","createDataset")!==-1){AK.controller.datasetsPanel.set("allObjectBrowserOpened",false);}}});},getUnitFromDataset:function a(AL,AN,AK){var AM=null;X.forEach(AL,function(AP){var AO=AP.att||[];if(AK===4){AO=AP.mx||[];}s.forEach(AO,function(AQ){if(AQ.did===AN){AM=AQ;return false;}});if(AM){return false;}});return AM;},getDatasetFromId:function P(AK,AL){var AM=null;X.forEach(AK,function(AN){if(AN.did===AL){AM=AN;return false;}});return AM;},getDatasetFromAttributeId:function P(AK,AL){var AM=null;X.forEach(AK,function(AN){if(s.find(AN.att,"did",AL)>=0){AM=AN;return false;}});return AM;},getSortedDatasetUnits:function E(AK){var AL=function AL(AM){return AM.t===U.DssTypeMetric?2:1;};AK=AK.concat();AK.sort(function(AP,AN){var AQ=AL(AP)-AL(AN),AO=AP.n.toUpperCase(),AM=AN.n.toUpperCase();return AQ!==0?AQ:(AO!==AM?AO.localeCompare(AM):AP.n.localeCompare(AN.n));});return AK;},getUnitCssClass:function(AL){var AK=AL.t;if(AL.fs&&AL.fs.length&&AL.fs.some(function(AM){return AM.fgr>0;})){AK+="g";}else{if((AL.dm||AL.um)||AL.da){AK+="d";}else{if(AL.de){AK+="de";}}}if((AL.t===47&&AL.st===12033)||(AL.t===12&&AL.st&&AL.st===3076)){AK+=(" st"+AL.st);}return"ic"+AK;},hasMultiForms:function k(AL,AK){return q.getFormsByAttrId(AL,AK).length>1;},getDisplayFormsMenu:function G(AW,AU,AO,AT){var AS=[],AV=[],AN=[],AQ=[{n:mstrmojo.desc(2411,"Off"),v:0},{n:mstrmojo.desc(2410,"On"),v:1},{n:mstrmojo.desc(8504,"Form Name Only"),v:2},{n:mstrmojo.desc(8505,"Show Attribute Name Once"),v:3},{n:mstrmojo.desc(4531,"Automatic"),v:4}];var AP=AU.model.data,AK=AP.gts,AR;s.forEach((AK.row||[]).concat(AK.col||[]),function(AX){if(AX.id===AW.did){AV=AV.concat(AX.fs);}});AR=q.getFormsByAttrId(AW.did,AO);s.forEach(AR||[],function(AY){var AZ=AY.fid;if(s.find(AS,"id",AZ)<0){AS.push({id:AZ,n:AY.fnm});var AX=s.find(AV,"id",AZ);if(AX>-1){AN[AS.length-1]=true;}}});return new mstrmojo.ui.menus.EditorConfig({data:{item:AW,oldSelected:X.copy(AN,{})},contents:[{alias:"fs",scriptClass:"mstrmojo.ui.CheckList",minimumSelectCnt:1,items:AS,selectedIndices:AN},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11918,"Display attribute form names:")},{alias:"longNames",scriptClass:"mstrmojo.ui.Pulldown",items:AQ,selectedIndex:s.find(AQ,"v",AP.lnm||0),onitemSelected:function AL(AX){this.v=String(AX.v);}}],okBtnText:mstrmojo.desc(1442,"Ok"),fnOk:function AM(Ac,Ag){var Ab=Ag.fs,AZ=Ab.selectedIndices,Ae=Ab.items,Ak=[],Ad=[],Ah=[];if(!Ab.getSelectedItems().length){mstrmojo.alert("Please select at least one form!");return ;}var AY=Ac.oldSelected,Aj=AZ,Aa,Af={},Ai={};for(Aa=0;Aa<Ae.length;Aa++){if(AY[Aa]&&!Aj[Aa]){Af[Aa]=true;}else{if(!AY[Aa]&&Aj[Aa]){Ai[Aa]=true;}}}X.forEach(Af,function(Al,Am){if(Al){Ad.push({act:"removeForm",unitId:AW.did,attFormId:Ae[Am].id});}});var AX=AU.model.data.gts;(AX.row||[]).concat(AX.col||[]).forEach(function(Al){if(Al.id===AW.did){(Al.fs||[]).forEach(function(Am){if(s.find(AS,"id",Am.id)<0){Ad.push({act:"removeForm",unitId:AW.did,attFormId:Am.id});}});}});X.forEach(Ai,function(Al,Am){if(Al){Ak.push({act:"addForm",unitId:AW.did,attFormId:Ae[Am].id,unitPos:0});}});Ah.push({act:"putProperties",prs:"Template Formatting",pr:"LongNames",v:Ag.longNames.v});if(AT){AT([{act:"updateTemplate",keyContext:AU.k,partialRetrieval:{nodes:[AU.k]},actions:Ad.concat(Ak).concat(Ah)}]);}}});},getAttributeLinkMenu:function e(AW,AZ,AU,AY,AP){var Aa=-2147483648,AR=AY.datasets,AS=AR[AU],AX=AS.tables||[],AK={},AT=[],AN=(AZ.fs&&AZ.fs[0])||{},AV=[],AQ=779,AM=AZ.art>1,AL=!AM&&X.keyarray(AR).length>1,AO=function(){mstrmojo.vi.ui.editors.AttributeLinkEditor.open({attribute:AZ,docModel:AY,datasetId:AU});};if((AS.st!==AQ)||AX.length<=1||AZ.da){if(AL){AW.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AO);}return ;}s.forEach(AS.att,function(Ad){var Ae=true,Ac=null,Ab=(Ad.fs&&Ad.fs[0])||{};if(Ad.da){return ;}if(AN.der===Aa||Ab.der===Aa||AN.fgr===-1||Ab.fgr===-1||AN.ftr===-1||Ab.ftr===-1){return ;}if(AN.fgr&&Ab.fgr&&AN.fgr!==Ab.fgr){return ;}if(AN.ftr&&Ab.ftr&&AN.ftr!==Ab.ftr){return ;}s.forEach(AX,function(Af){var Ag=s.find(Af.attRefs,"did",AZ.did),Ah=s.find(Af.attRefs,"did",Ad.did);if(Ag>=0&&s.indexOf(AT,Af.did)<0){AT.push(Af.did);}if(Ah>=0){Ac=Af.did;}if(Ag>=0&&Ah>=0){Ae=false;}});if(Ae&&!Ad.hide){AK[Ad.did]=Ac;AV.push(Ad);}});if(AV.length>0&&AS.hcs!==true){AW.addEditorMenuItem(mstrmojo.desc(13172,"Map Attributes"),"",function(){return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"mapAttribute",okVisible:false,cancelVisible:false,contents:[{scriptClass:"mstrmojo.ui.ScrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:AV,listHooks:{select:function Ab(Ac,Ad){AY.warnForEditStandaloneDS(AS,function(){s.forEach(AT,function(Ae){I({dsid:AU,srcId:AZ.did,srcTableId:Ae,tgtId:Ad.did,tgtTableId:AK[Ad.did]},AY,AP);});});}}}]}]});});}if(AL){AW.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AO);}},isDocumentLevelItem:function t(AK){return AK&&(AK.um||AK.da||(AK.t===47&&AK.st===12033));},isLegalObjectName:function Q(AK){var AL=/["\[\]\\]/g;if(AK.match(AL)){return false;}return true;},validateName:function g(AL,AM,AK){if(this.isLegalObjectName(AL)){AM();}else{mstrmojo.alert(mstrmojo.desc(8622,"The # cannot contain the reserved characters ##.").replace("##","'[', ']', '\"' and '\\'").replace("#",mstrmojo.desc(945,"Name")),AK,mstrmojo.desc(1388,"Rename"));}},hasCGorCon:function AJ(AK){return AK.att.some(function(AM){var AO=(AM.t===1||AM.t===47),AN=(AM.t===12&&AM.de),AL=(AM.t===47&&AM.st===12033);return(AO&&!AL||AN);});},hasOldDEOverDatasets:function(AN,AM){var AL=false,AK;X.forEach(AM,function(AO){AK=s.find((AO.att||[]),"did",AN);if(AK!==-1&&AO.att[AK].de){AL=true;return false;}});return AL;},getMarkGeoRoleEditorCfg:function AG(AK,Aw,Ae,Ab,A5,A7){var Aa=268435456,A2=536870912,AP=1073741824,Ao=268435456,Az=805306368,Au=805306368,Ai=1879048192,A6=-2147483648,Ax=0,Ay=1,AR=2,AZ=3,Ad=4,AX=5,A4=6,AU=7,Ag=8,Af=9,Aq=10,AN=2,An=3,Av={v:Ax,n:mstrmojo.desc(2057,"None")},A8={v:AZ,n:mstrmojo.desc(7674,"Country"),der:Aa},At={v:AR,n:mstrmojo.desc(7676,"State"),parents:[A8],der:A2},AV={v:Af,n:mstrmojo.desc(12919,"County"),parents:[A8,At]},A0={v:Ay,n:mstrmojo.desc(7675,"City"),parents:[A8,At],der:AP},Aj={v:Ag,n:mstrmojo.desc(7677,"Zip Code"),parents:[A8,At,A0]},Ac={v:AX,n:mstrmojo.desc(7696,"Latitude")},Ar={v:A4,n:mstrmojo.desc(7697,"Longitude")},AY={v:Ad,n:mstrmojo.desc(7675,"City")+", "+mstrmojo.desc(7676,"State")},Am={v:Aq,n:mstrmojo.desc(12973,"Area Code")},Ap={v:AU,n:mstrmojo.desc(2056,"Custom")},AW={ID:[Av,A8,At,AV,A0,Aj,Ac,Ar,AY,Am,Ap],ID_NUMERIC:[Av,Aj,Am,Ac,Ar],NON_ID:[Av,A8,At,AV,A0,Aj,AY,Am,Ap],NON_ID_NUMERIC:[Av,Aj,Am]},Ak=s.filter(Aw.fs,function(A9){return(A9.bftp===AN||A9.bftp===An)&&A9.der!==A6;});var As=(Ak.length>1),AM=s.find(Ak,"idf",true),AO=(AM===-1?0:AM),Al=Ak[AO],AT,AL,Ah,AQ=[],AS=function(A9){var BA=(A9.idf?"ID":"NON_ID")+(A9.bftp===AN?"_NUMERIC":"");return AW[BA];},A3=function(BA,A9){return s.find(AS(A9),"v",BA);};if(Ak.length===0||s.find(Aw.fs,"fgr",-1)!==-1||Al.der===A6){return null;}s.forEach(Ak,function(BB,A9){var BA=X.clone(BB);BA.n=BA.fnm;AQ.push(BA);if(BB.fgr){Al=BA;AO=A9;}});AT=Al.fid;Ah=Al.fgr||0;AL=A3(Ah,Al);return new mstrmojo.ui.menus.EditorConfig({data:{item:Aw,geoForm:Al,geoRole:Ah},cssClass:"MarkGeoRole-MenuEditor",contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13522,"Select Attribute Form:"),visible:As},{scriptClass:"mstrmojo.ui.Pulldown",items:AQ,selectedIndex:AO,alias:"formList",visible:As,onitemSelected:function A1(BB){var A9=this.parent.data,BA=this.parent.geoRoleList;if(A9.geoForm.fid!==BB.fid){A9.set("geoForm",BB);A9.set("geoRole",BB.fgr);BA.set("items",AS(BB));BA.set("selectedIndex",A3(BB.fgr,BB));}}},{scriptClass:"mstrmojo.ToolSeparator",visible:As,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13523,"Select Geographic Type:")},{scriptClass:"mstrmojo.ui.Pulldown",items:AS(Al),selectedIndex:AL,alias:"geoRoleList",onitemSelected:function A1(BF){var BE=this.parent,A9=BE.data,BG=BE.geoDrvList;var BB=[],BD=[],BA=Al.der,BC;A9.set("geoRole",BF.v);s.forEach(BF.parents,function(BH,BI){BC=BH;BB.push({n:BC.n,der:BC.der});if((BA&BC.der)!==0){BD[BI]=true;}});BG.set("items",BB);BG.set("selectedIndices",BD);s.forEach(["geoDrvSeparator","geoDrvLabel","geoDrvList"],function(BH){BE[BH].set("visible",BB.length>0);});}},{scriptClass:"mstrmojo.ToolSeparator",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},alias:"geoDrvSeparator"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13524,"(Optional) Create Additional Attributes:"),alias:"geoDrvLabel"},{scriptClass:"mstrmojo.ui.CheckList",alias:"geoDrvList"}],fnOk:function(BC,BB){var A9=function(BI){var BH=function(BM){var BN="<mpcs>";s.forEach(BM,function(BO){BN+='<mpc did="'+BO.did+'" n="'+BO.n+'" georole="'+BO.georole+'" drvflg="'+BO.drvflg+'" />';});BN+="</mpcs>";return BN;},BD=function(BM,BO,BQ,BN){var BP=function(BU,BR,BT){var BS=R(BI,BU,BR),BV=j(BS,BT);return BV&&BV.did;};A5.forEach(function(BR,BS){var BT=BP(BR.did,Aw.did,BO.fid);if(BT){BM[BS]=BM[BS]||[];BM[BS].push({did:BT,n:BO.fnm,georole:BQ,drvflg:BN});}});},BF=[],BL=[],BJ=BB.geoDrvList,BE=0,BG=false,BK={2:Ao,1:Az,9:Au,8:Ai}[BC.geoRole]||0;X.forEach(BJ.selectedIndices,function(BN,BM){if(BN){BE|=BJ.items[BM].der;}});BE&=BK;if(Al.fgr!==BC.geoRole||Al.fid!==BC.geoForm.fid||Al.der!==BE){if(As&&Al.fid!==BC.geoForm.fid){if(Al.fgr!==Ax){BD(BL,Al,Ax,0);if(Al.der>0){BG=true;}}}if(BC.geoForm.fgr!==BC.geoRole||BC.geoForm.der!==BE){BD(BL,BC.geoForm,BC.geoRole,BE);if((BE&BC.geoForm.der)!==BC.geoForm.der){BG=true;}}if(BL.length>0){BL.forEach(function(BN,BM){BF.push({act:"changeEMMAMapping",dsid:Ae,tbid:A5[BM].did,mapping:BH(BN)});});A7(BF,BG);}}},BA=function(){C(AK.mid,Ae,{success:A9});};if(!Ab){mstrmojo.warn(mstrmojo.desc(13525,"Modifications to this dataset will affect other reports, documents, and dashboards that share the dataset. Do you want to continue?"),{},{buttons:[w(mstrmojo.desc(219,"Yes"),function(){BA();},true,{width:"60px"}),w(mstrmojo.desc(221,"Cancel"),function(){})]});}else{BA();}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.vi.ui.rw.selectors.AttrQualInputBox","mstrmojo.array","mstrmojo.expr","mstrmojo.date","mstrmojo.VisChartUtils","mstrmojo.locales","mstrmojo.elementHelper","mstrmojo.vi.ui.DatasetUnitMenuUtils");var M=mstrmojo.expr,F=M.BFTP,B=mstrmojo.date,G=mstrmojo.VisChartUtils,N=mstrmojo.array,K=mstrmojo.vi.ui.DatasetUnitMenuUtils,C=mstrmojo.locales;function P(R,S){if(!R){return ;}var T=B.getDateJson(new Date(G.convertRawValueToMilliseconds(R))),Q=B.formatDateInfo(T,C.datetime.DATEOUTPUTFORMAT);if(S===M.DTP.TIMESTAMP){Q+=" "+B.formatTimeInfo(T,C.datetime.TIMEOUTPUTFORMAT);}return Q;}mstrmojo.AttrQualDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.AttrQualDocSelector",getWidgetClass:function I(S,R,Q){return"vi.ui.rw.selectors.AttrQualInputBox";},newAndInitWidget:function L(Q){var R=this._super(Q);Q.attachEventListener("includeChange",R.id,function(S){this.set("include",S.value);});return R;},_buildEvent:function H(T,S){T.f=S.f;T.ft=S.ft;T.fid=S.fid;T.ckey=this.ckey;T.srcid=S.srcid;T.srct=S.srct;var R=S.dt,Q=[];N.forEach(S.cs,function(U){if(!mstrmojo.string.isEmpty(U.v)){Q.push(U.v);}});if(Q.length){T.cs=Q.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}T.dtp=R;T.unset=S.unset;if(T.unset||mstrmojo.string.isEmpty(T.cs)){delete T.fid;}},getCekEvtListener:function E(R,Q){return function(S){R.handleActionInSyncPhase(function(){Q.update(S.value);});};},updateWidget:function O(T){var U=this._super(T),R=T.node,S=R.data;if(U.update){var Q={cs:S.cs,f:S.f,ft:S.ft,fid:S.fid,min:P(S.min,S.dt),max:P(S.max,S.dt)};U.update(Q);}return U;},getWidgetConfig:function J(d,W,a,Q){var X=d.model,b=d.getFormats(),V=d.node.data,Z=this._super(d,W,a,Q);Z={scriptClass:Z.scriptClass,cssText:b.height?"height: "+b.height:"",srcid:a.srcid||"",srct:a.srct||"",cs:V.cs,min:P(V.min,V.dt),max:P(V.max,V.dt),showAdvanced:true,canSelectDisabledDate:true,f:V.f,ft:V.ft||1,fid:V.fid,dt:V.dt,onchange:function(){if(!d._inSyncPhase){d.selectorControlChange(this);}}};if(!Z.fid||!Z.dt){var U=K.getUnitFromDataset(X.datasets,a.srcid,12),Y=(U&&U.fs)||[],T,S=function(e){if(!Z.fid){Z.fid=e.fid;}if(!Z.dt){switch(e.bftp){case F.TEXT:Z.dt=M.DTP.CHAR;break;case F.DATE:Z.dt=M.DTP.DATE;break;case F.DATETIME:Z.dt=M.DTP.TIMESTAMP;break;default:Z.dt=M.DTP.CHAR;}}};if(Y[0]){S(Y[0]);}for(T=0;T<Y.length;T++){if(Y[T].iidx){S(Y[T]);break;}}}var R=Z.dt;if(Z.f===undefined){if(R===M.DTP.CHAR){Z.f=M.FN.SEARCH;}else{if(R===M.DTP.DATE||R===M.DTP.TIMESTAMP){Z.f=a.include?M.FN.BETWEEN:M.FN.NOT_BETWEEN;}}}return Z;},isValidSelection:function D(){var R=this.node.data,Q=this.model;return !Q.isSelWarnFlagOn(this.k)||R.cs&&R.cs.length;},isSelectAll:function A(){var W=this.children&&this.children[0];if(W===undefined){return true;}var R=C.datetime.DATEOUTPUTFORMAT,T=C.datetime.TIMEOUTPUTFORMAT,U=B.parseDateAndOrTime;var Q=U.call(B,W.min,R,T),X=U.call(B,W.fromBox.fromPicker.value),Y=B.compareDate(X&&X.date,Q&&Q.date);if(Y>0){return false;}if(Y===0){if(B.compareTime(X&&X.time,Q&&Q.time)>0){return false;}}var Z=U.call(B,W.max,R,T),V=U.call(B,W.toBox.toPicker.value),S=B.compareDate(V&&V.date,Z&&Z.date);if(S<0){return false;}if(S===0){if(B.compareTime(V&&V.time,Z&&Z.time)<0){return false;}}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.num","mstrmojo.array","mstrmojo.VisMenuList","mstrmojo.mstr.EnumFunction","mstrmojo._HasMarkup","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel","mstrmojo.css","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.ui.DatasetUnitMenuUtils");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig");var q=document.getElementById("vis-measure-canvas"),A=document.getElementById("vis-measure-span"),AG={},Y={},u={},S=mstrmojo.dom,e=mstrmojo.elementHelper,t=mstrmojo.vi.ui.DatasetUnitMenuUtils,AE=mstrmojo.VisEnum.EnumColorRankMode,AF=mstrmojo.chart.model.enums.EnumDSSObjectType,d=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,J=mstrmojo.chart.enums.EnumFontStyle,T=mstrmojo.hash,R=mstrmojo.func.wrapMethods,AA=mstrmojo.VisEnum,f=AA.SERVER_JSON_ERROR_TYPE;var s=64,g=128,O=4,o=5,z=6,AB=7,k=mstrmojo,l=k.array,x=mstrmojo.array,P=k.desc,AD=k.mstr.EnumFunction,a=mstrmojo.vi.enums.EnumDerivedElementType,Z=k._HasMarkup,F=k.css;mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869);function AI(AO,AN){var AP=r.pluck(AN,"tid"),AQ=r.pluck(AN,"eid"),AM=(AO.getDocModel&&AO.getDocModel())||r.getPropertyByPath(AO,"model.docModel");if(r.getPropertyByPath(AM,"getColorBy") instanceof Function){return AM.getColorBy(AP,AQ);}}function AH(AM,AO,AQ){var AP=AO.id,AN=AO.getHost();if(AN&&AN.observableModel){AM.forEach(function(AS){var AR=AN.observableModel[AS];if(AR){AR.attachEventListener("valueChanged",AP,AQ);}});}}function U(AN){var AM={SINGLE:[{text:P(358,"Absolute"),value:AD.FunctionAbs,n:P(358,"Absolute"),v:AD.FunctionAbs}],PAIR:[{text:P(6017,"Add"),value:AD.FunctionAdd,n:P(6017,"Add"),v:AD.FunctionAdd},{text:P(2122,"Average"),value:AD.FunctionAverage,n:P(2122,"Average"),v:AD.FunctionAverage},{text:P(5868,"Least"),value:AD.FunctionLeast,n:P(5868,"Least"),v:AD.FunctionLeast},{text:P(5869,"Greatest"),value:AD.FunctionGreatest,n:P(5869,"Greatest"),v:AD.FunctionGreatest},{text:"A-B",value:AD.FunctionMinus+";0",n:"A-B",v:AD.FunctionMinus+";0"},{text:"B-A",value:AD.FunctionMinus+";1",n:"B-A",v:AD.FunctionMinus+";1"},{text:"A/B",value:AD.FunctionDivide+";0",n:"A/B",v:AD.FunctionDivide+";0"},{text:"B/A",value:AD.FunctionDivide+";1",n:"B/A",v:AD.FunctionDivide+";1"}],MORE:[{text:P(6017,"Add"),value:AD.FunctionAdd,n:P(6017,"Add"),v:AD.FunctionAdd},{text:P(2122,"Average"),value:AD.FunctionAverage,n:P(2122,"Average"),v:AD.FunctionAverage},{text:P(5868,"Least"),value:AD.FunctionLeast,n:P(5868,"Least"),v:AD.FunctionLeast},{text:P(5869,"Greatest"),value:AD.FunctionGreatest,n:P(5869,"Greatest"),v:AD.FunctionGreatest}]};return AM[AN];}function B(AN,AM){return !!(((AN&&AN.at)||0)&AM);}function N(AM){return !AM.selCells.some(function(AN){var AO=AM.getCellForNode(AN);return e.isNonGroupNull(AO)||!B(AO,s)||AO.dei!==undefined||AM.model.isRecursiveAttribute(AO.tid);});}function I(AN){var AM;return !AN.selCells.some(function(AO){AM=AN.getCellForNode(AO);return(e.isNonGroupNull(AM)||!B(AM,g))||AN.model.isRecursiveAttribute(AM.tid);});}function E(AP,AO,AR,AQ,AN){var AM=AR&&AR.func;if((AM===AQ)||(typeof AQ==="string"&&AQ.indexOf(AM)===0&&AQ.indexOf(";0")>0)){return ;}if(AN){AP.editDECalculation(AO,AQ);}else{AP.derivedElementCalculation(AO,AQ);}}function M(AY,AW,AU){var AX=AW&&AW.es,AM=(AX&&AX.length)||AY.selCells.length,AP=(AM===1)?"SINGLE":((AM===2)?"PAIR":"MORE"),AV=U(AP),AO=(AW&&AW.func),AQ,AZ=AY.selCells,AN,AT,AS,AR;if(AP==="PAIR"){if(AW){AR=AX[0].v>AX[1].v;if(AR){AS=AX[0].n;AT=AX[1].n;AV[4]={value:AD.FunctionMinus+";1",v:AD.FunctionMinus+";1"};AV[5]={value:AD.FunctionMinus+";0",v:AD.FunctionMinus+";0"};AV[6]={value:AD.FunctionDivide+";1",v:AD.FunctionDivide+";1"};AV[7]={value:AD.FunctionDivide+";0",v:AD.FunctionDivide+";0"};}else{AT=AX[0].n;AS=AX[1].n;}}else{AT=AU(AZ[0]);AS=AU(AZ[1]);}AV[O].text=AT+" - "+AS;AV[o].text=AS+" - "+AT;AV[z].text=AT+" / "+AS;AV[AB].text=AS+" / "+AT;AV[O].n=AT+" - "+AS;AV[o].n=AS+" - "+AT;AV[z].n=AT+" / "+AS;AV[AB].n=AS+" / "+AT;}for(AQ in AV){if(typeof AV[AQ].value==="string"&&AV[AQ].value.indexOf(AO)===0&&AV[AQ].value.indexOf(";0")>0){AN=AV[AQ];break;}if(AV[AQ].value===AO){AN=AV[AQ];break;}}return{items:AV,selectedItem:AN};}function V(AM,AP){if(!AM){return AM;}if(AP.length===1){return AM[AP[0]];}var AO=(AP&&AP.length)||0,AN;for(AN=0;AN<AO;AN++){AM=AM[AP[AN]];if(!AM){break;}}return AM;}function AC(AO,AN,AM){return AO.every(function(AP){return AP.ttp===AN||AP.ttp===AM;});}function AL(AN,AQ,AR){var AP=(AQ&&AQ.length)||0,AO,AM,AS=AN;for(AO=0;AO<AP-1;AO++){AM=AQ[AO];if(!AS[AM]){AS[AM]={};}AS=AS[AM];}AS[AQ[AP-1]]=AR;}function X(AU){var AV,AT,AP,AR,AM,AS=this.model.docModel.datasets,AN=false,AQ=false,AO={isDM:false};for(AV in AS){if(AS.hasOwnProperty(AV)){AT=AS[AV].mx;l.forEach((AT||[]),function(AW){if(AW.did===AU){if(AW.um||AW.rdm){AQ=true;}AN=true;return false;}});if(AN){break;}}}if(AQ){AM=this.model.data.gts.col;AP=(AM&&AM[AM.length-1]);if(AP&&AP.otp===-1){AR=AP.es;}l.forEach((AR||[]),function(AW){if(AW.oid===AU){AO={isDM:true,id:AW.id};return false;}});}return AO;}function H(AM,AP){var AS=[],AO={act:"updateElementsPropertiesMap",epm:AS},AQ=[],AN={},AU=[AN],AT=this;AS.push({epmk:AQ,epmv:AU});AM.forEach(function(AW){var AX=AW.tid,AV=AX===-1,AY={ob:{did:AV?"":AX}};AQ.push(AY);});if(AP&&AP.indexOf("default")<0){AN.v={vv:AP};}var AR=[];AN.k={chn:AR};AM.forEach(function(AX){var AY=AX.tid,AV=AY===-1,AW;if(AV){AW=X.call(AT,AX.eid);if(AW.isDM){AR.push({emt:2,ei:AW.id});}else{AR.push({emt:2,mt:{did:AX.eid,tp:4,ql:0}});}}else{AR.push({emt:1,ei:AX.eid,at:{did:AY,tp:AX.tp,ql:0}});}});return AO;}function C(AQ,AO){var AP="00000000000000000000000000000000",AN=AQ&&AQ.dropZones,AM=l.find(AN,"id",AO);return AM===-1?[]:l.filter(AN[AM].items,function(AR){return AR.t===4&&AR.id!==AP;});}function b(AN,AM){return function(){var AO=new k.ui.menus.MenuConfig();AO.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);AO.addRadioMenuGroup(null,AN,AM,"checkMark",undefined,true);return AO;};}mstrmojo.VisUtility=mstrmojo.provide("mstrmojo.VisUtility",{getCache:function(){return JSON.stringify(u);},getUpdateColorMapAction:function(AN,AM){return H.call(this,AN,AM);},measureTextSize:function(AN,AM,AO){return{width:this.measureTextWidth(AN,AM,AO),height:this.measureTextHeight(AN,AM,AO)};},measureTextWidth:function(AP,AO,AQ,AN,AM){if(S.isIE||S.isIEW3C){return this.measureTextWidthWithSpan(AP,AO,AQ,AN,AM);}return this.measureTextWidthWithCanvas(AP,AO,AQ);},measureTextWidthWithCanvas:function(AP,AQ,AT,AR){AR=AR||false;if(AP===""){return 0;}if(AP===" "){AP="\u00A0";}var AS=AQ.fontFamily,AV=AQ.fontSize,AO=AQ.fontStyle,AU=AQ.fontWeight;if(typeof AV==="number"){AV+="pt";}AO=AO||"normal";AU=AU||"normal";AT=AT||0;var AN=AR?undefined:V(AG,[AS,AV,AO,AU,AP]);if(!AN){if(!q){q=document.createElement("canvas");q.width=0;q.height=0;q.id="vis-measure-canvas";q.style.position="absolute";q.style.top="0";q.style.fontSize="medium";document.body.appendChild(q);}var AM=q.getContext("2d");AM.font=AO+" "+AU+" "+AV+" "+AS;AN=Math.ceil(AM.measureText(AP).width);AL(AG,[AS,AV,AO,AU,AP],AN);}return AN+AT;},measureTextWidthWithSpan:function(AO,AP,AT,AV,AQ){if(AO===""){return 0;}if(AO===" "){AO="\u00A0";}var AR=AP.fontFamily,AW=AP.fontSize,AN=AP.fontStyle,AS=AP.fontWeight;if(typeof AW==="number"){AW+="px";}AN=AN||"normal";AS=AS||"normal";AV=AV||"auto";AT=AT||0;AQ=!!AQ;if(typeof AV==="number"){AV+="px";}var AM=V(Y,[AR,AW,AN,AS,AV,AO]);if(!AM){var AU;if(!A){A=document.createElement("span");AU=A.style;A.id="vis-measure-span";AU.position="absolute";AU.top="0";AU.visibility="hidden";AU.width="auto";AU.height="auto";if(AQ){AU.whiteSpace="nowrap";}else{AU.whiteSpace="normal";}document.body.appendChild(A);}AU=A.style;if(AQ){AU.whiteSpace="nowrap";}else{AU.whiteSpace="normal";}AU.width="auto";AU.height=AV;AU.fontFamily=AR;AU.fontSize=AW;AU.fontStyle=AN;AU.fontWeight=AS;A.innerHTML=AO;AM=Math.ceil(A.clientWidth);AL(Y,[AR,AW,AN,AS,AV,AO],AM);}return AM+AT;},measureTextHeight:function(AO,AP,AU,AW,AM,AR,AQ){if(AO===""){return 0;}if(AO===" "){AO="\u00A0";}var AS=AP.fontFamily,AY=AP.fontSize,AN=AP.fontStyle,AT=AP.fontWeight;AM=AM||"normal";AQ=!!AQ;if(typeof AY==="number"){AY+="px";}AN=AN||"normal";AT=AT||"normal";AW=AW||"auto";AU=AU||0;if(typeof AW==="number"){AW+="px";}var AX=AR?undefined:V(u,[AS,AY,AN,AT,AW,AO]);if(!AX){var AV;if(!A){A=document.createElement("span");AV=A.style;A.id="vis-measure-span";AV.position="absolute";AV.top="0";AV.visibility="hidden";AV.width="auto";AV.height="auto";if(AQ){AV.whiteSpace="nowrap";}else{AV.whiteSpace="normal";}document.body.appendChild(A);}AV=A.style;if(AQ){AV.whiteSpace="nowrap";}else{AV.whiteSpace="normal";}AV.heigth="auto";AV.width=AW;AV.fontFamily=AS;AV.fontSize=AY;AV.fontStyle=AN;AV.fontWeight=AT;AV.wordBreak=AM;A.innerHTML=AO;AX=A.clientHeight;if(!AR){AL(u,[AS,AY,AN,AT,AW,AO],AX);}}return AX+AU;},getVisEmptyMsg:function(AM){var AN="";switch(AM){case"AE_ERROR":AN='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div style="padding:25px"><div class="gm-warning-icon" style="padding-bottom:18px"></div><div style="padding-bottom:8px">'+mstrmojo.desc(14436,"Unable to load visualization.")+"</div><div>"+mstrmojo.desc(14437,"Use a filter to reduce the data and try again.")+"</div></div></div></div></div>";break;case"NODATA_OTHERERROR":AN='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div>'+(this.errorMsg||mstrmojo.desc(12093,"Filter excludes all data"))+"</div></div></div></div>";break;default:AN='<div class="mstrmojo-Label dropMsg" style="display: block;" >'+mstrmojo.desc(11668,"Drag objects here.")+"</div>";}return AN;},applyStyles2DomNode:function(AR,AU){var AM,AS=AR.style;if(Object.prototype.hasOwnProperty.call(AU,"backgroundColor")&&AU.backgroundColor!==""&&AU.backgroundColor!=="transparent"){var AQ=1;if(Object.prototype.hasOwnProperty.call(AU,"opacity")&&AU.opacity!==""){AQ=AU.opacity;}var AN=AU.backgroundColor,AT=function AT(AV){if(isNaN(AV)){AV=0;}AV%=16777216;return{b:AV%256,g:(AV>>8)%256,r:(AV>>16)%256};},AP="";if(AN){var AO=function AO(AW,AX){if(AW==="transparent"){return"rgba(0,0,0,0)";}AW=this.parseCSSColor(AW,false);var AV=AT(AW);return"rgba("+AV.r+" ,"+AV.g+" ,"+AV.b+" ,"+AX+" )";}.bind(this);if(AN.c1!==undefined&&AN.c2!==undefined&&AN.or!==undefined){AP=(F.buildGradient(AN.or,AO(AN.c1,AQ),AO(AN.c2,AQ))).v;}else{AP=AO(AN,AQ);}AS.background=AP;}}else{AS.backgroundColor="rgba(0,0,0,0)";}for(AM in AU){if(AM!=="backgroundColor"&&AM!=="opacity"&&Object.prototype.hasOwnProperty.call(AU,AM)&&AU[AM]&&AU[AM]!==""){AS[AM]=AU[AM];}}},parseCSSColor:function(AQ,AN){var AM,AO;if(AQ.length===7){if(AN===true){AM=AQ[5]+AQ[6]+AQ[3]+AQ[4]+AQ[1]+AQ[2];}else{AM=AQ.slice(1);}}else{AM=[];var AP=AQ.slice(1);if(AN===true){for(AO=2;AO>=0;AO--){AM.push(AP[AO]);AM.push(AP[AO]);}}else{for(AO=0;AO<3;AO++){AM.push(AP[AO]);AM.push(AP[AO]);}}AM=AM.join("");}return parseInt(AM,16);},positionDomNode:function(AO,AQ){var AN,AT,AR,AP=["width","height","top","left","right","bottom"],AS=AP.length,AM=AO.style;for(AN=0;AN<AS;AN++){AT=AP[AN];AR=AQ[AT];if(AR!==undefined){if((typeof AR)==="number"){AR+="px";}AM[AT]=AR;}}},getComputedFontStyle:function G(AO){var AM=mstrmojo.css.getComputedStyle(AO);var AP={};AP.fontFamily=AM.fontFamily;AP.fontSize=AM.fontSize;AP.fontStyle=AM.fontStyle;AP.fontWeight=AM.fontWeight;AP.fontVariant=AM.fontVariant;var AN=parseInt(AM.paddingLeft)||0,AQ=parseInt(AM.paddingLeft)||0;AP.bonus=AN+AQ;return AP;},splitWordIfTooLong:function(AW,AU,AP){var AS=[];var AT=AW.length;var AQ;for(AQ=0;AQ<AT;AQ++){var AN=AW[AQ];while(true){var AX=this.measureTextWidth(AN,AP);if(AX>AU){var AV=(AU/AX)*AN.length;var AM=Math.max(Math.round(AV),1);while(AM>0){var AR=AN.substr(0,AM);var AO=Math.round(this.measureTextWidth(AR,AP));if(AO<=AU||AM===1){AS.push(AR);break;}else{AM--;}}AN=AN.substr(AM,AN.length-AM);}else{AS.push(AN);break;}}}return AS;},truncateTextToLineWithWordWrap:function Q(Am,Af,Ad,AS,Ae,AW){var Aa=Am.split(" "),Ag=Aa.length;if(!AW){Aa=this.splitWordIfTooLong(Aa,Ad,Af);}var At,AY=[],Ao=[],AM=0,AQ=Aa.length,Av=this.measureTextWidth(" ",Af),AP=0,AV=false,Ac=(Ag===Aa.length);Ao.push(0);for(At=0;At<AQ;At++){var Ak=this.measureTextWidth(Aa[At],Af);if(!AW&&Ak>Ad){var AN=Aa[At];var Ar=(Ad/Ak)*AN.length;Aa[At]=AN.substr(0,parseInt(Ar,10));Ak=Ad;}AY.push(Ak);AM+=Ak;Ao.push(AM);if(At!==AQ-1){AM+=Av;}}var Aq,As,Ai=AS;for(Aq=0,As=0;As<Ao.length;){var AU=Ao[As]-Ao[Aq];if(Aq>0&&As!==Aq){AU-=Av;}var AT=Ao[As+1]-Ao[Aq];if(Aq>0&&As+1!==Aq){AT-=Av;}if(AU<=Ad&&((As+1===Ao.length)||(AT>Ad))){AP=Math.max(AP,AU);Ai--;if(Ai===0||As===AQ){break;}else{Aq=As;As++;}}else{As++;}}if(As>AQ){As=AQ;}var AX=Ao[As]-Ao[Aq];if(Aq>0&&As!==Aq){AX-=Av;}var Al;if(As>=AQ&&AX<Ad){Al=Aa.join(" ");}else{AV=true;AP=Ad;Al=Aa.slice(0,As).join(" ");var AZ=this.measureTextWidth("...",Af);if(AX+AZ<=Ad){if(AX+Av+AZ>Ad){Al+="...";}else{var Au=Aa[As],Ab;for(var Ah=1;Ah<Au.length;Ah++){Ab=this.measureTextWidth(Au.substr(0,Ah),Af);if(AX+Av+Ab+AZ>Ad){break;}}Al+=" "+Au.substr(0,Ah-1)+"...";}}else{if(Al.charAt(Al.length-1)===" "){Al=Al.substr(0,Al.length-1);}var Aj=Al.lastIndexOf(" ");var AO=Al.length-1-Aj;if(AO===3){Al=Al.substr(0,Al.length-3)+" ...";}else{var An=0,AR="",Ap=0;while(An<AZ&&Al.length>Ap){Ap++;AR=Al.substr(Al.length-Ap,Al.length);An=this.measureTextWidth(AR,Af);}Al=Al.substr(0,Al.length-Ap)+"...";}}}if(Ae){return{text:Al,truncated:AV,maxLineLen:AP,canWordWrap:Ac};}return Al;},measureSuperTextWidth:function AK(AN,AO,AM,AP){return AN?this.measureTextWidth("<sup>"+AO+"</sup>",AM,AP):this.measureTextWidth(AO,AM,AP);},splitTokenIfTooLong:function j(AX,AV,AP){var AT=[];var AU=AX.length;var AQ,AN,AY,AS,AZ;for(AQ=0;AQ<AU;AQ++){AN=AX[AQ];AS=AN.isSuper;while(true){AY=AN.v;if(AN.textWidth!==undefined){AZ=AN.textWidth;}else{AZ=AN.textWidth=this.measureSuperTextWidth(AS,AY,AP);}if(AZ>AV){var AW=(AV/AZ)*AY.length;var AM=Math.max(Math.round(AW),1);while(AM>0){var AR=AY.substr(0,AM);var AO=Math.round(this.measureSuperTextWidth(AS,AR,AP));if(AO<=AV||AM===1){AT.push({v:AR,isSuper:AS,textWidth:AO});break;}else{AM--;}}AN={v:AY.substr(AM,AY.length-AM),isSuper:AS};}else{AT.push(AN);break;}}}return AT;},truncateTextToLineWithWordWrapForTokens:function W(AW,AQ,Ap,Ah,Aq,Ac){var Ak=AW.length;AW=this.splitTokenIfTooLong(AW,Ap,AQ);var Ao,Ab=[],AM=0,Af=AW.length,AN=0,Ag=false,AS=(Ak===AW.length),AU,AZ,Ai,AO,Am,AV,Aa;if(Ac&&!AS){return{canWordWrap:AS};}Ab.push(0);for(Ao=0;Ao<Af;Ao++){AU=AW[Ao];Ai=AU.v;AZ=AU.isSuper;if(AU.textWidth!==undefined){AO=AU.textWidth;}else{AO=AU.textWidth=this.measureSuperTextWidth(AZ,Ai,AQ);}if(AO>Ap){var An=(Ap/AO)*Ai.length;AU.v=Ai.substr(0,parseInt(An,10));AO=AU.textWidth=Ap;}AM+=AO;Ab.push(AM);}var AY,Aj,AX=Ah;for(AY=0,Aj=0;Aj<Ab.length;){var AT=Ab[Aj]-Ab[AY];var AR=Ab[Aj+1]-Ab[AY];if(AT<=Ap&&((Aj+1===Ab.length)||(AR>Ap))){AN=Math.max(AN,AT);AX--;if(AX===0||Aj===Af){break;}else{AY=Aj;Aj++;}}else{Aj++;}}if(Aj>Af){Aj=Af;}var Ae=Ab[Aj]-Ab[AY];var Ar;if(Aj>=Af&&Ae<Ap){Ar=AW;}else{Ag=true;AN=Ap;Ar=AW.slice(0,Aj);var AP=this.measureTextWidth("...",AQ);if(Ae+AP<=Ap){AV=AW[Aj];Ai=AV.v;AZ=AV.isSuper;for(Am=1;Am<Ai.length;Am++){Aa=this.measureSuperTextWidth(AZ,Ai.substr(0,Am),AQ);if(Ae+AP+Aa>Ap){break;}}if(Am>1){AU={v:Ai.substr(0,Am-1),isSuper:AZ};AU.textWidth=this.measureSuperTextWidth(AZ,AU.v,AQ);Ar.push(AU);Ar.push({v:"...",textWidth:AP});}}else{var Ad=0,Al;for(Ao=Ar.length-1;Ao>=0;Ao--){AU=Ar[Ao];Ai=AU.v;AZ=AU.isSuper;Al=0;for(Am=Ai.length-1;Am>=0;Am--){Al=this.measureSuperTextWidth(AZ,Ai.substr(Am),AQ);if(Ad+Al>=AP){break;}}if(Am>=0){break;}else{Ad+=Al;}}if(Ao>=0){if(Am>0){AU.v=Ai.substr(0,Am);AU.textWidth=this.measureSuperTextWidth(AZ,AU.v,AQ);Ar=Ar.slice(0,Ao+1);}else{if(Am===0){Ar=Ar.slice(0,Ao);}}Ar.push({v:"...",textWidth:AP});}else{Ar=[{v:"...",textWidth:AP}];}}}if(Aq){return{text:Ar,truncated:Ag,maxLineLen:AN,canWordWrap:AS};}return Ar;},getRankMode:function h(AS){var AU=1,AT=2,AR=3,AN=4,AP=5,AM=6,AQ=7,AO=AE.INVALID;if(AS){if(AC(AS,AR,AT)){AO=AE.TOP_PERCENT;}else{if(AC(AS,AR,AU)){AO=AE.BOTTOM_PERCENT;}else{if(AC(AS,AM,AN)){AO=AE.BOTTOM;}else{if(AC(AS,AM,AP)){AO=AE.TOP;}else{if(AC(AS,AQ)){AO=AE.VALUE;}}}}}}return AO;},getColorByTitle:function L(AN,AM){if(AM===AE.BOTTOM_PERCENT||AM===AE.TOP_PERCENT){AN=mstrmojo.desc(2787,"Percentage of ##").replace("'##'",AN);}else{if(AM===AE.BOTTOM||AM===AE.TOP){AN=mstrmojo.desc(2788,"Rank of ##").replace("'##'",AN);}}return AN;},getColorByFormatStr:function w(AN,AM){if(AM===AE.BOTTOM_PERCENT||AM===AE.TOP_PERCENT){AN="0%;(0%)";}else{if(AM===AE.BOTTOM||AM===AE.TOP){AN="";}}return AN;},getColorByItems:function AJ(AM,AW,Ad,AZ,AU,AS,Aa){var AY=[],Ae,AO,AT=mstrmojo.num,AR,AV;if(AM===undefined||AM.length===0){return AY;}var Ag=true;if(AM.length>1){if(AM[0].ceil===AM[1].flr){Ag=false;}else{Ag=true;}}for(Ae=0;Ae<AM.length;Ae++){var Af=AM[Ae],AQ={},AN=Af.ceil,Ac=Af.flr;if((Ae===0&&Ag)||(Ae===AM.length-1&&!Ag)){if(AW===AE.BOTTOM_PERCENT||AW===AE.TOP_PERCENT){AQ.flr=Ac/100;AQ.ceil=1;}else{if(AW===AE.TOP||AW===AE.BOTTOM){Ac+=1;AQ.flr=Math.floor(Ac);AQ.ceil=AU;}else{AQ.flr=Ac;AQ.ceil=Ad;}}AV=AQ.ceil;}else{if((Ae===0&&!Ag)||(Ae===AM.length-1&&Ag)){if(AW===AE.BOTTOM_PERCENT||AW===AE.TOP_PERCENT){AQ.flr=0;AQ.ceil=AN/100;}else{if(AW===AE.TOP||AW===AE.BOTTOM){AQ.flr=0;AQ.ceil=Math.floor(AN);}else{AQ.flr=AZ;AQ.ceil=AN;}}AR=AQ.flr;}else{if(AW===AE.BOTTOM_PERCENT||AW===AE.TOP_PERCENT){Ac=Ac/100;AN=AN/100;}else{if(AW===AE.TOP||AW===AE.BOTTOM){Ac+=1;Ac=Math.floor(Ac);AN=Math.floor(AN);}}AQ.flr=Ac;AQ.ceil=AN;}}if(AW===AE.TOP||AW===AE.BOTTOM){AQ.ceil=AQ.ceil>AU?AU:AQ.ceil;}if(AS){AQ.label=AT.formatByMask(AS,AQ.flr)+" - "+AT.formatByMask(AS,AQ.ceil);}else{AQ.label=AQ.flr+" - "+AQ.ceil;}if(Af.fmt&&Af.fmt.bc){AQ.color=Af.fmt.bc;}else{AQ.color=Aa;}AY.push(AQ);}AY=AY.filter(function(Ah){return Ah.flr<=Ah.ceil&&!(Ah.flr>AV||Ah.ceil<AR);});if(AW===AE.TOP||AW===AE.BOTTOM){AO=AU;}else{if(AY.length>0){if(Ag){AO=AY[0].ceil-AY[(AY.length-1)].flr;}else{AO=AY[(AY.length-1)].ceil-AY[0].flr;}}}var Ab=0,AX,AP;for(Ae=0;Ae<AY.length;Ae++){if(Ae===AY.length-1){AY[Ae].scopePercent=1-Ab;}else{if(AW===AE.TOP||AW===AE.BOTTOM){AP=AY[Ae].ceil-AY[Ae].flr+1;}else{AP=AY[Ae].ceil-AY[Ae].flr;}AX=AP/AO;AY[Ae].scopePercent=AX;Ab+=AX;}}return AY;},getDefaultColorByItems:function(AP,AN,AO){var AM={};AM.label=AO+" - "+AN;AM.flr=AO;AM.ceil=AN;AM.color=AP;AM.scopePercent=1;return[AM];},getNumberFormat:function(AP,AN){var AQ=AP.nf,AO=AP.gvs;function AM(){var AT=(AO&&AO.items&&AO.items[0]&&AO.items[0].items)||[],AS=AT[AN]||{},AR=AS.nfs;return typeof AR==="string"?AR:"";}if(typeof AQ[AN].nfs!=="string"){AQ[AN].nfs=AM();}return AQ[AN].nfs;},hasOnlyMetricsOnColumn:function(AN){var AM=(AN&&AN.gts&&AN.gts.col)||[];return AM.every(function(AO){return AO.otp===AF.DssTypeUnknown&&(AO.es||[]).every(function(AP){return AP.otp===AF.DssTypeMetric;});});},hasNoMetricOnRow:function(AN){var AO=(AN&&AN.gts&&AN.gts.row)||[],AM=function(AP){return AP.otp!==AF.DssTypeMetric;};return AO.every(AM);},isOnExpressMode:function(){return mstrApp.isExpress;},modifyScExp:function(AU,AM,AY,AS){if(!AU||!AM){return ;}var AP=AU.nds,AT,AN,AV,AX,AW,AR,AQ,AO;x.forEach(AP||[],function(AZ){AT=AZ.nds;x.forEach(AT||[],function(Aa){AN=Aa.es;x.forEach(AN||[],function(Ab){AX=Ab.v;AR=AS[AX];if(!AR){AR=AY.getNormalizedFormElementId(AX);AS[AX]=AR;}x.forEach(AM||[],function(Ac){AV=Ac.es;x.forEach(AV||[],function(Ad){AO=false;AW=Ad.id;if(AW===AX){AO=true;}else{AQ=AS[AW];if(!AQ){AQ=AY.getNormalizedFormElementId(AW);AS[AW]=AQ;}if(AR===AQ){AO=true;}}if(AO){Ab.v=Ad.id;Ab.n=Ad.n;return false;}});if(AO){return false;}});});});});},modifyScExpDeprecated:function(AS,AT,AQ,AO){if(!AS||!AT){return ;}var AP=AS.nds,AN,AM,AR;x.forEach(AP||[],function(AU){AN=AU.nds;x.forEach(AN||[],function(AV){AM=AV.es;x.forEach(AM||[],function(AW){x.forEach(AT||[],function(AX){x.forEach(AX||[],function(AY){AR=AY.es;x.forEach(AR||[],function(AZ){if(AQ.call(AO,AZ.id,AW.v)){AW.v=AZ.id;AW.n=AZ.n;}});});});});});});},getMouseOffset:function(AN){var AM=(AN.offsetX!==undefined)?AN.offsetX:(AN.layerX),AO=(AN.offsetY!==undefined)?AN.offsetY:(AN.layerY);return{x:AM,y:AO};},translateLineStyle:function(AM){var AO=["none","solid","solid","dashed","dotted"],AN=["1px","1px","2px","1px","1px"];return{width:AN[AM]||"0px",style:AO[AM]||"none"};},getGroupAndCalculationContextMenuForDataPoints:function(AV,Aj){var AX,AZ=[],AO=[],Ag=[],AT=Aj.fnCellName,Ab=Aj.fnUnique,AS=Aj.fnMakeNode,Ae=AV.getCellForNode.bind(AV),Al=Aj.selection;var AR=new k.ui.menus.MenuConfig(),AN=new k.ui.menus.MenuConfig(),Ad=new k.ui.menus.MenuConfig(),Ai=new k.ui.menus.MenuConfig();function Ak(Am){AV.selCells=AZ[Am].selCells;AV.derivedElementGroup(Ae(AV.selCells[0]));}function AU(Ao){AV.selCells=AO[Ao].selCells;var An=Ae(AO[Ao].selCells[0]),Am=AV.getDEInfo(An);AV.derivedElementsEdit(Ae(AV.selCells[0]),Am);}function Aa(An){AV.selCells=AO[An].selCells;var Am=Ae(AO[An].selCells[0]);AV.removeQuickDE(Am);}function AY(An){AV.selCells=AO[An].selCells;var Am=Ae(AO[An].selCells[0]);AV.renameDEList(Am);}function Ac(Am){E(AV,Ae(AV.selCells[0]),null,Am,false);}function AM(Am){E(AV,Ae(AV.selCells[0]),null,Am,true);}function AQ(An){var Am=Ae(AO[An].selCells[0]);AV.removeQuickDE(Am);}function Ah(An){var Am=Ae(AO[An].selCells[0]);AV.editDECalculation(Am);}function AW(Am){Am=Am||[];function An(Ar){var Ao=Ar.extra||{},As=Ar.setup||mstrmojo.emptyFn,Ap=Ar.action||mstrmojo.emptyFn,Aq=[];As(Aq,Ao);Ap(Aq,Ao);}Am.forEach(An);}var AP=[{name:"group",setup:function(Am){AZ.forEach(function(An){AV.selCells=AZ[An.v].selCells;if(!Object.prototype.hasOwnProperty.call(AO,An.v)&&N(AV)){Am.push(An);}});},action:function(An){var Am;if(An.length===1){Am=An[0].v;AR.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AV.selCells=AZ[Am].selCells;AV.derivedElementGroup(Ae(AV.selCells[0]));});}if(An.length>1){AR.addPopupMenuItem(mstrmojo.desc(1911,"Group"),AV.id,b(Ak,An),"xt");}}},{name:"edit-group",setup:function(Am){AO.forEach(function(Aq){var Ap=Ae(AO[Aq.v].selCells[0]),Ao=AV.getDEInfo(Ap),An=Ao&&Ao.de;if(An&&An.t===a.LIST){Am.push(Aq);}});},action:function(An){var Am,Ap,Ao;if(An.length===1){Am=AO[An[0].v].selCells;Ap=Ae(Am[0]);Ao=AV.getDEInfo(Ap);AN.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AV.selCells=Am;AV.derivedElementsEdit(Ae(AV.selCells[0]),Ao);});AN.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AV.selCells=Am;AV.removeQuickDE(Ap);});Ai.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AV.selCells=Am;AV.renameDEList(Ap);});}if(An.length>1){AN.addPopupMenuItem(mstrmojo.desc(13395,"Edit Group..."),AV.id,b(AU,An),"xt");AN.addPopupMenuItem(mstrmojo.desc(12195,"Ungroup"),AV.id,b(Aa,An),"xt");Ai.addPopupMenuItem(mstrmojo.desc(13968,"Rename Group..."),AV.id,b(AY,An),"xt");}}},{name:"calculation",setup:function(Am){Ag.forEach(function(Ap,Ao,An){AV.selCells=An[Ap.v].selCells;var Ar=Ae(AV.selCells[0]),Aq=AV.getDEInfo(Ar),As=Aq&&Aq.de;if(!(As&&As.t===a.RESIDUE)&&I(AV)){Am.push(Ap);}});},action:function(Am){if(Am.length===1){AR.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AV.id,function(){var An=Am[0].v,Ao=new k.ui.menus.MenuConfig();AV.selCells=Ag[An].selCells;Ao.addRadioMenuGroup(null,Ac,M(AV,null,AT).items,"checkMark",undefined,true);return Ao;},"xt");}if(Am.length>1){AR.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AV.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Am,selectedIndex:0,onitemSelected:function(An){var Ao=An.v;AV.selCells=Ag[Ao].selCells;this.parent.checkList.set("items",[]);this.parent.checkList.set("items",M(AV,null,AT).items);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Ao,An){E(AV,Ae(AV.selCells[0]),null,An.checkList.selectedItem.v,false);}});});}}},{name:"edit-calculation",setup:function(Am){AO.forEach(function(Aq){var Ap=Ae(AO[Aq.v].selCells[0]),Ao=AV.getDEInfo(Ap),An=Ao&&Ao.de;if(An&&An.t===a.CALCULATION){Am.push(Aq);}});},action:function(Am){function An(){var Ao=Am[0].v;AV.selCells=AO[Ao].selCells;var As=Ae(AV.selCells[0]),Ar=AV.getDEInfo(As),At=Ar&&Ar.de,Aq=M(AV,At,AT),Ap=new k.ui.menus.MenuConfig();Ap.addRadioMenuGroup(Aq.selectedItem.value,AM,Aq.items,"checkMark",undefined,true);return Ap;}if(Am.length===1){Ad.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AV.id,An,"xt");Ad.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){var Ao=Am[0].v;AV.selCells=AO[Ao].selCells;var Ap=Ae(AV.selCells[0]);AV.removeQuickDE(Ap);});Ai.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){var Ao=Am[0].v;AV.selCells=AO[Ao].selCells;var Ap=Ae(AV.selCells[0]);AV.editDECalculation(Ap);});}if(Am.length>1){Ad.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AV.id,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Am,selectedIndex:0,onitemSelected:function(Ar){var As=Ar.v;AV.selCells=AO[As].selCells;var Aq=Ae(AV.selCells[0]),Ap=AV.getDEInfo(Aq),At=Ap&&Ap.de;var Ao=M(AV,At,AT);this.parent.checkList.set("items",[]);this.parent.checkList.set("items",Ao.items);this.parent.checkList.set("selectedItem",Ao.selectedItem);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Ap,Ao){E(AV,Ae(AV.selCells[0]),null,Ao.checkList.selectedItem.v,true);}});});Ad.addPopupMenuItem(mstrmojo.desc(12197,"Delete Calculation"),AV.id,b(AQ,Am),"xt");Ai.addPopupMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),AV.id,b(Ah,Am),"xt");}}}];AX=Ab(Al);AX.forEach(function(An){var Ap=AS(An),Am=Ae(Ap),Ao,Aq,Ar;if(!AV.model.supportsViewFilterActions(Am.tid)){return ;}Ao=Am.dei===undefined?AZ:AO;Aq=Am.tid;Ar=AV.model.getObjectInfo(Aq).n;if(Ao[Aq]===undefined){Ao[Aq]={};Ao[Aq].selCells=[];Ao.push({n:Ar,v:Aq,text:Ar,value:Aq});}Ao[Aq].selCells.push(Ap);if(Ag[Aq]===undefined){Ag[Aq]={};Ag[Aq].selCells=[];Ag.push({n:Ar,v:Aq,text:Ar,value:Aq});}Ag[Aq].selCells.push(Ap);});var Af=this.getPropertyByPath(AV,"model.data.visName")||this.getPropertyByPath(AV,"model.data.vis.vn");if(Af==="VIHeatMapVisualizationStyle"){AP.splice(2,2);}AW(AP);return{createDe:AR,editGroup:AN,editCalculation:Ad,renameDe:Ai};},getGroupAndCalculationContextMenu:function(AU,Ai,Af){var Ah=AU,Ab=Af.skipSingleAttrCheck||Ah.isSingleAttrSelection(),AP=false,AR=Ah.isSingleSelection(),AV=Ah.getDEInfo(Ai),AQ=AV&&AV.deObject,Ae=AV&&AV.de,AZ=AQ&&Ah.getOthersDEInfo(AQ),AX=Ah.getSelections(),Ad=true,AT=Af.fnCellName,Ag=this.getPropertyByPath(Ah,"model.data.visName")||this.getPropertyByPath(Ah,"model.data.vis.vn");var AS=new k.ui.menus.MenuConfig(),AN=new k.ui.menus.MenuConfig(),AY=new k.ui.menus.MenuConfig(),Ac=new k.ui.menus.MenuConfig();Ah.selCells=Af.selection;if(AU.model.supportsViewFilterActions(Ai.tid)){if((AP||Ab)&&B(Ai,s)&&N(Ah)){AS.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AU.derivedElementGroup(Ai);});}if(AR&&Ae&&Ae.t===a.LIST){AN.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AU.derivedElementsEdit(Ai,AV);});AN.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AU.removeQuickDE(Ai);});Ac.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AU.renameDEList(Ai);});}var AW=function(Aj){E(Ah,Ai,Ae,Aj,false);},Aa=function(Aj){E(Ah,Ai,Ae,Aj,true);};if(AZ&&!AR&&Ab){l.forEach(AX,function(Aj){if(Aj[0]&&Aj[0].eid.indexOf(AZ.id)>-1){Ad=false;return false;}});}if(Ag!=="VIHeatMapVisualizationStyle"&&!(AR&&Ae&&Ae.t===a.RESIDUE)&&(AP||Ab)&&B(Ai,g)&&I(Ah)){var AM=function(){var Aj=new k.ui.menus.MenuConfig(),Ak=M(Ah,null,AT);Aj.addRadioMenuGroup(null,AW,Ak.items,"checkMark",undefined,true);return Aj;};AS.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),this.id,AM,"xt");}if(AR&&Ae&&Ae.t===a.CALCULATION){var AO=function(){var Aj=new k.ui.menus.MenuConfig(),Ak=M(Ah,Ae,AT);Aj.addRadioMenuGroup(Ak.selectedItem.value,Aa,Ak.items,"checkMark",undefined,true);return Aj;};AY.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),this.id,AO,"xt");AY.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){AU.removeQuickDE(Ai);});Ac.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){AU.editDECalculation(Ai);});}}return{createDe:AS,editGroup:AN,editCalculation:AY,renameDe:Ac};},isHostedPopupNode:function(AQ,AO,AN,AM){var AR=AN?AQ:AQ&&AQ.parentNode;while(AR&&(AR!==AM)){var AP=AR.getAttribute&&AR.getAttribute(AO);if(AP!==null&&AP.indexOf("mstrmojo-popup-widget-hosted")>=0){return true;}AR=AR.parentNode;}return false;},applyStyle2Legend:function(AP,AO,AN){var AM,AR={},AQ={};for(AM in AP){if(AM.indexOf("font")>=0||AM.indexOf("color")>=0||AM.indexOf("textDecoration")>=0){AR[AM]=AP[AM];}else{AQ[AM]=AP[AM];}}if(AO){AO.style.background="";this.applyStyles2DomNode(AO,AQ);}if(AN){this.applyStyles2DomNode(AN,AR);}},mergeMenuConfigs:function K(AN,AM){function AO(AQ,AR,AP){if(!AR){return ;}if(!AP&&AQ.hasMenuItems()&&AR.hasMenuItems()){AQ.addSeparator();}if(AR.hasMenuItems()){AQ.absorbMenuItems(AR);}}return AM.reduce(function(AP,AQ){AO(AP,AN[AQ.name],AQ.noSeparator);return AP;},new mstrmojo.ui.menus.MenuConfig());},absorbMenuItems:function(AN,AM,AO){AN.addDisposable(AM);AN.absorbMenuItems(AM);if(AO&&AM.menus.length>0){AN.addSeparator();}},addWheelListener:(function(){var AP=mstrmojo.dom,AO=AP.attachEvent,AN=AP.preventDefault,AQ;function AM(AU,AT,AV,AS){var AR=(AQ==="wheel")?AV:function(AW){if(!AW){AW=window.event;}var AY={originalEvent:AW,target:AW.target||AW.srcElement,type:"wheel",deltaMode:(AW.deltaMode!==undefined?AW.deltaMode:1),deltaX:0,deltaZ:0,preventDefault:function(){AN(window,AW);}},AX=this;if(AQ==="mousewheel"){AY.deltaY=-AW.wheelDelta;if(AW.wheelDeltaX!==undefined){AY.deltaX=-AW.wheelDeltaX;}}else{AY.deltaY=AW.detail;}return AV.call(AX,AY);};return AO(AU,AT,AR,AS);}if(Object.prototype.hasOwnProperty.call(document.createElement("div"),"onwheel")){AQ="wheel";}else{AQ=document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";}return function(AS,AT,AR){return AM(AS,AQ,AT,AR);};}()),isNearZero:function(AN,AM){AM=AM||5;var AO=1/Math.pow(10,AM);return(Math.abs(AN)<AO);},hasMergedRowCells:function(AM){return false;},getMockUpThresholds:function(AO,AP){var AM=[{tid:1,n:"threshold 0",scope:1,rtp:2,rtxt:"",fmt:{bc:"#cc2525",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,flr:0,ceil:10},{tid:2,n:"threshold 1",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e34b4b",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5},{v:"30%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:10,ceil:30},{tid:3,n:"threshold 2",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e97d7d",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"30%",dtp:5},{v:"50%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:30,ceil:50},{tid:4,n:"threshold 3",scope:1,rtp:2,rtxt:"",fmt:{bc:"#79d479",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"50%",dtp:5},{v:"70%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:50,ceil:70},{tid:5,n:"threshold 4",scope:1,rtp:2,rtxt:"",fmt:{bc:"#57ba57",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"70%",dtp:5},{v:"90%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:70,ceil:90},{tid:6,n:"threshold 5",scope:1,rtp:2,rtxt:"",fmt:{bc:"#2ca02c",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"90%",dtp:5}],fn:5,fnt:3}],fn:19},ttp:1,flr:90,ceil:100}];l.forEach(AM,function(AR){var AQ=AR.expr.nds[0].m;AQ.did=AO;AQ.n=AP;});var AN={};AN[AO]=AM;return AN;},generateThresholdsInfo:function(AO,AT,AM,AQ){var AS=AM.length,AN=[],AW,AP,AX=0,AV=0;for(var AR=0;AR<AS;AR++){AP=Math.round(AQ[AR]*100);AV=AX;AX=AP||100;AW={tid:AR+1,n:"threshold "+AR,scope:1,rtp:2,rtxt:"",fmt:{bc:AM[AR],bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:AO,n:AT},cs:[{v:AP+"%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,ceil:AX,flr:AV};AN.push(AW);}var AU={};AU[AO]=AN;return AU;},psPt2CssPt:function(AO,AN){var AM=parseInt(AO,10)*0.75;if(AN instanceof Function){AM=AN(AM);}return AM+"pt";},captureEventOnce:function(AR,AQ,AM,AP,AO){function AN(AS){AQ.call(AM,Z.newDomEvent(AR,window,AS||window.event),AO);S.detachEvent(AP,AR,AN);}AO=AO||{};AP=AP||document;S.attachEvent(AP,AR,AN);},getPropertyByPath:function(AQ,AP,AM){var AN,AO;if(typeof AP!=="string"){return AM;}AN=AP.split(".");AO=AN.every(function(AS){var AR=AQ[AS];if(AR!==undefined){AQ=AR;return true;}return false;});return AO?AQ:AM;},mergeHashes:function(){return Array.prototype.slice.apply(arguments).reduce(function(AM,AN){if(AN){Object.keys(AN).forEach(function(AO){AM[AO]=AN[AO];});}return AM;},{});},toggleControlEnabled:function(AM,AN){[].concat(AM).forEach(function(AO){AO.set("enabled",!!AN);});},findInArray:function(AP,AO,AN){var AR=-1,AQ,AM;if(!Array.isArray(AP)){return AR;}for(AQ=AN===undefined?0:AN,AM=AP.length;AQ<AM;AQ+=1){if(AO(AP[AQ])){return AQ;}}return AR;},arrayUnique:function(AM,AN){if(!Array.isArray(AM)){return AM;}return AM.filter(function(AO,AP){return r.findInArray(AM,function(AQ){return AN(AO,AQ);},AP+1)===-1;});},range:function(AM,AQ,AP){AP=AP||1;var AO,AN=[];for(AO=AM;AO!==AQ;AO+=AP){AN.push(AO);}return AN;},drawDashLine:function D(AU,AO,AS,AN,AQ,AM,AT){var AR=(AO===AN),AP;AU.beginPath();AU.moveTo(AO,AS);if(AR){AP=0;AS+=AM;while(AS<=AQ){if(AP%2===0){AU.lineTo(AO,AS);AS+=AT;}else{AU.moveTo(AO,AS);AS+=AM;}AP++;}if(AP%2===0){AU.lineTo(AN,AQ);}}else{AP=0;AO+=AM;while(AO<=AN){if(AP%2===0){AU.lineTo(AO,AS);AO+=AT;}else{AU.moveTo(AO,AS);AO+=AM;}AP++;}if(AP%2===0){AU.lineTo(AN,AQ);}}AU.stroke();},repeat:function(AO,AP){var AM=[],AN;AP=Math.max(0,AP);for(AN=0;AN<AP;AN+=1){AM[AN]=AO;}return AM;},isHierarchyObject:function(AM){return(AM&&AM.t)===AF.DssTypeDimension;},selectPropertyPanel:function(AN,AO){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AN.getDocModel().selectVIUnit(AN.parent.id,true);var AM=AN.edtModel;if(AM){AM.selectTargetByValue(AO);}},pluck:function(AN,AM){if(!l.isArray(AN)){return AN;}return AN.map(function(AO){return AO&&AO[AM];});},pick:function(AN,AM){return AM.reduce(function(AP,AO){AP[AO]=AN[AO];return AP;},{});},isColorManuallySet:function(AO,AN){var AM=AI(AO,AN);if(AM){return AM.isManual;}},getCombColor:function(AO,AN){var AM=AI(AO,AN);if(AM){return AM.color;}},setColorPickerShowAutomatic:function(AN,AM){AN.children[0].fillColor.colorPicker.showAutomatic=AM;},getCharGroupValueChangeCb:function(AM){var AN=(function(){var AO={};AO[d.FONT_WEIGHT]=J.FS_BOLD;AO[d.FONT_STYLE]=J.FS_ITALIC;AO[d.UNDERLINE]=J.FS_UNDERLINE;AO[d.LINE_THROUGH]=J.FS_STRIKETHROUGH;return function(AP,AQ){return AP^AO[AQ];};}());return function(AP,AO){if(AM instanceof Function){AM=AM();}if(!AM){return ;}switch(AP){case d.COLOR:AM.fontColor.fill.value.setValue(AO);break;case d.FONT_SIZE:AM.fontSize.setValue(AO);break;case d.FONT_FAMILY:AM.fontFamily.setValue(AO);break;case d.FONT_WEIGHT:case d.FONT_STYLE:case d.UNDERLINE:case d.LINE_THROUGH:AM.fontStyle.setValue(AN(AM.fontStyle.getValue(),AP));break;}};},getMetricsInDropZone:C,addLegendFontChangeListeners:function(AN,AO){var AM=["lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle"];AH(AM,AN,AO);},addLegendBackgroundChangeListeners:function(AN,AO){var AM=["lgdBgFillClr","lgdBgFillTrans"];AH(AM,AN,AO);},isValidDropZone:function(AM){if(AM===undefined){return false;}var AO=Object.keys(AM).filter(function(AP){return AP!=="visProp";});var AN=T.copyProps(AO,AM);return AM&&!T.equals(AN,{});},getDrillCandidates:function(AR){var AO=AR.modelData,AP=AR.model,AN=AP.docModel.datasets,AM=AO.gts,AQ=AO.datasetId,AS=AN[AQ],AT=AS.att||[];return AT.filter(function(AW){var AV=AW.did,AX=AM.row||[],AU=AM.col||[];return AX.concat(AU).every(function(AY){return AY.id!==AV&&AW.hide!==true;});});},getDrillMenuItemsCallback:function(AN,AO,AM){return function(){var AQ=r.getDrillCandidates(AN),AP=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});AQ.forEach(function(AR){AP.addMenuItem(AR.n,"xt",AO,T.copy(AM,{drillUnit:AR}));});return AP;};},doDrill:function(AO,Ac,AX,Ad){var Ae=AO;function AU(Ag){return Ag.model.controller.cmdMgr;}function Aa(){return{success:function Ag(){r.visPrint("reaise");this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}var AN=Ae.model,Ab=(Ae.getDocModel&&Ae.getDocModel())||Ae.model.docModel,AZ=Ab.getDataService(),AR=AZ.newUpdate();var AT=true;if(Ab.prefs&&Ab.prefs.rtprnt){AT=parseInt(Ab.prefs.rtprnt,10)===1;}else{if(AN.xtab.defn.tkp!==undefined){AT=parseInt(AN.xtab.defn.tkp,10)===-1;}}Ad=Ad||{};Ad.keepParent=AT;var AS=AX.call(AO,Ac,Ad);var AV=Ae.zonesModel,Af=AV.getUpdateCallback(),AW=Ae.model.controller||Ab.controller,AP=AW._getXtabCallback(Ae);AR.add(AS,R(Af,AP));var AM=AN.getSelectorDataFromViewFilter(Ae.model.data.vfexpr).concat({keepOnly:true,data:Ae.getSelections()}),AY=Ab.getKeepOnlyOrExcludeAction(Ae.k,AM);AR.add(AY,Aa.call(Ae));AU(Ae).execute({execute:function AQ(){this.submitUpdate(AR);},urInfo:{callback:AR.callback}});},strStartsWith:function(AO,AN,AM){AM=AM||0;return AO.lastIndexOf(AN,AM)===AM;},changeWidgetBackground:function(AO,AP,AN){var AM=AO.parent;if(AM&&AP!==AN){AM.changeUnitFormats(false,1,AO.getFormats(),d.BACKGROUND_COLOR,AP,AN);AM.raiseEvent({name:"BEMFormatChange",propertyName:d.BACKGROUND_COLOR,value:AP,isTitle:false});}},translateGridError:function(AN,AM){if(AM===undefined){AM=f.AE_ERROR;}if(AM===f.EMPTY_DATA){AN=mstrmojo.desc(12093,"Filter excludes all data");}if(AM===f.NO_DATASET||AM===f.NO_TEMPLATE_UNIT){AN=mstrmojo.desc(11668,"Drag objects here.");}if(!AN){AN=mstrmojo.desc(13687,"Unknown error");}return{msg:AN,type:AM};},hasValidValueInMetric:function(AO,AM){var AN=r.getPropertyByPath(AO,"model.data.gsi.mx");if(AN===undefined||AN.length<=AM||AM<0){return false;}var AP=AN[AM];return["min","max"].every(function(AQ){var AR=AP[AQ];return AR!==undefined&&AR!==null&&AR!=="";});},renderWidgetErrorRSD:function(AP,AR,AN){var AT=document.createElement("div");var AS='<div style="display: table; height: 100%; width: 100%; background-color:#F5F5F2; border: solid 1px #A7A7A7; box-sizing: border-box;"><div style="display: table-cell; vertical-align: middle; text-align: center; color: #000000; font-size: 14pt;">'+AR+"</div></div>";AT.innerHTML=AS;AT=AT.firstChild;var AM=AP.width,AO=AP.height;if(AM!==undefined){AT.style.width=AM+"px";}if(AO!==undefined){AT.style.height=AO+"px";}var AQ=AP.domNode;if(AQ){AN.forEach(function(AU){AQ["on"+AU]=undefined;});while(AQ.firstChild){AQ.removeChild(AQ.firstChild);}AQ.appendChild(AT);}else{AP.parent.domNode.appendChild(AT);}},visPrint:function(){var AM=mstrmojo.VisUtility.enableInVis;if(AM&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},hasCGorCon:function(AP,AM){var AO=AM&&AM.did,AN=AP.model.data.datasetId||"",AQ=null;if(AO){AQ=t.getDatasetFromAttributeId(AP.model.docModel.datasets,AO);}else{if(AN){AQ=t.getDatasetFromId(AP.model.docModel.datasets,AN);}}return AQ&&t.hasCGorCon(AQ);},findElementsByAttribute:function p(AO,AQ,AP,AM){AM=!!AM;var AR=[];if(AP.constructor!==Array){AP=[AP];}var AS=function(AT){if(AM){return AT.identity&&AT.identity.tlOpt&&AT.identity.tlOpt[AQ];}else{return AT.getAttribute(AQ);}};function AN(AV){var AT=AS(AV),AU;if(AV.hasChildNodes()){AU=AV.firstChild;while(AU){if(AU.nodeType===1){AT=AS(AU);if(AP.indexOf(AT)!==-1){AR.push(AU);}else{AN(AU);}}AU=AU.nextSibling;}}}AN(AO);return AR;}});mstrmojo.VisUtility.enableInVis=true;var r=mstrmojo.VisUtility;}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.VisUtility");var R=mstrmojo.css,A=mstrmojo.VisUtility,H=mstrmojo.array,D=mstrmojo.string,I="vis-tooltip",N=20,P=165,L=350,E=350,G="px";function Q(){var U=this.domNode;U.innerHTML="";var S=document.createElement("div");S.className=I+"-container";var V=document.createElement("table");V.className=I+"-table";for(var T=0;T<3;T++){V.appendChild(document.createElement("COL"));}S.appendChild(V);this.domNode.appendChild(S);return V;}function K(T){var S=[],U=false;H.forEach(T,function(V){if(!V.isSuper){S.push(V.v);}else{U=true;S.push("<sup>"+V.v+"</sup>");}});return{hasSuper:U,htmlText:S.join("")};}mstrmojo.VisTooltip=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.VisTooltip",init:function O(S){this._super(S);R.addWidgetCssClass(this,(S&&S.widgetClass)?[S.widgetClass,I]:I);},toggle:function M(S){var T=mstrApp.isAppStatePrintPreview&&mstrApp.isAppStatePrintPreview();if(this.domNode){this.domNode.style.display=S&&!T?"block":"none";}},displayInfo:function C(V,d,S){var U=this.domNode,e=Q.call(this),a=false,T=0,b=0,W=10,Z=false,Y=e.childNodes[0],X=e.childNodes[2];V.forEach(function(q){var x,p,AA,t,f,o,u,s,AB,r,z,w;if(!Z){var h=e.insertRow(-1),l=h.insertCell(-1),k=h.insertCell(-1),j=h.insertCell(-1);h.className=I+"-tr";l.className=I+"-name";k.className=I+"-space";j.className=I+"-value";if(q===null){R.addClass(h,"separator");a=true;}else{if(a){R.addClass(h,"below-separator");}if(!S){k.innerHTML=":";}x=q.n;w=!q.skipEncode;l.innerHTML=w?D.encodeHtmlString(x,true):x;AA=A.getComputedFontStyle(l);t=Math.ceil(A.measureTextWidth(l.innerHTML,AA,AA.bonus));u=U.offsetHeight>=E?1:2;if(t>P){s=A.truncateTextToLineWithWordWrap(x,AA,P,u,true);if(s.canWordWrap){l.innerHTML=w?D.encodeHtmlString(s.text,true):s.text;}else{s=A.truncateTextToLineWithWordWrap(x,AA,P,1);l.innerHTML=w?D.encodeHtmlString(s,true):s;}}T=Math.min(Math.max(T,t),P);p=q.v;r=q.isTrendLineFuncToken;if(r){AB=K(p);}if(!r||!AB.hasSuper){if(r){p=AB.htmlText;}j.innerHTML=w?D.encodeHtmlString(p,true):p;f=A.getComputedFontStyle(j);o=Math.ceil(A.measureTextWidth(j.innerHTML,f,f.bonus,null,true));if(o>P){s=A.truncateTextToLineWithWordWrap(p,f,P,q.noTruncate?100:u,true);if(!s.canWordWrap){s=A.truncateTextToLineWithWordWrap(p,f,P,1,true);}j.innerHTML=w?D.encodeHtmlString(s.text,true):s.text;o=s.maxLineLen;}b=Math.min(Math.max(b,o),P);}else{j.innerHTML=AB.htmlText;f=A.getComputedFontStyle(j);o=0;H.forEach(p,function(AC){AC.textWidth=A.measureSuperTextWidth(AC.isSuper,AC.v,f,f.bonus);o+=AC.textWidth;});o=Math.ceil(o);if(o>P){s=A.truncateTextToLineWithWordWrapForTokens(p,f,P,q.noTruncate?100:u,true,true);if(!s.canWordWrap){s=A.truncateTextToLineWithWordWrapForTokens(p,f,P,1,true);}j.innerHTML=K(s.text).htmlText;o=s.maxLineLen;}b=Math.min(Math.max(b,o),P);}Y.style.width=T+"px";X.style.width=b+"px";z=T+b+W;e.style.width=mstrmojo.dom.isIE9?(z+2)+"px":z+"px";a=false;}if(U.offsetHeight>=E){var g=e.lastChild;g&&g.removeChild(g.lastChild);Z=true;}}});if(d){this.moveTo(d.x,d.y);}},moveTo:function(a,Z){var Y=mstrmojo.dom.position(document.body),W=this.domNode,b=W.offsetWidth,X=W.offsetHeight,V=Y.x+Y.w,d=Y.y+Y.h,T=a+N,S=Z+N;if(T>V-b||S>d-X){if(T<=V-b){S=d-X;}else{if(S<=d-X){T=V-b;}else{T=V-b;S=Z-N-X;}}}var U=W.style;U.left=T+G;U.top=S+G;},doLayout:function B(S){var U=this.domNode.getElementsByTagName("table")[0];if(!U){return ;}var V=R.getComputedStyle(this.domNode),T=S-parseInt(V.paddingLeft,10)-parseInt(V.paddingRight,10);T-=U.rows[0].cells[0].offsetWidth;T-=10;U.getElementsByClassName(I+"-value").forEach(function(W){W.style.maxWidth=T+G;});},posTo:function J(T){var S=this.domNode.style;S.left=T.x+G;S.top=T.y+G;},renderErrMsg:function F(S){Q.call(this).insertRow(-1).insertCell(-1).innerText=S;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.dom","mstrmojo.VisHeatMapColorTheme","mstrmojo.VisHeatMapPopup","mstrmojo.VisHeatMapTree","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.num","mstrmojo._HasWaitIcon","mstrmojo.EnumReadystate","mstrmojo.css","mstrmojo.VisHeatMapCanvas","mstrmojo.VisUtility");var AG=mstrmojo.VisUtility;var o=mstrmojo.EnumReadystate;var O=1,l=2,AS=4,j=4;var Ae=mstrmojo.css,AV="heatmap-show";var b={On:0,Off:1,Proportional:2};var W={Sum:0,Avg:1,Cnt:2,Max:3,Min:4,GeoAvg:5};var q={LeftToRight:0,RightToLeft:1,Center:2,None:3};var AH={Squarified:0,PivotByMiddle:1,SliceAndDice:2};var AO={Padding:6,MaxLegendHeight:60,LegendMenuEditorWidth:70,LegendTickCount:5,LegendMinWidth:15,LegendTickLength:4,LegendMaxBandWidth:400,LegendWidthPercent:0.9,LegendMinPadding:15,LegendBottomPadding:3,LegendGutter:5,LegendBandAspect:10,MinShowLabelDimension:6,DeletedListHeight:500,EditorDialogWidth:565,EditorDialogHeight:574,EditButtonWidth:60,EditButtonHeight:40,EditButtonRight:10,WaitIconWidth:205,WaitIconHeight:105,WaitIconMargin:10,WaitIconFontSize:20};var AK={heatmap_popup_panel_title:{font_size:{value:18,unit:"pt"}},heatmap_gray_label:{padding_bottom:{value:7,unit:"px"},font_size:{value:10,unit:"pt"},height:{value:32,unit:"px"},padding_left:{value:22,unit:"px"}},heatmap_tree_button:{font_size:{value:12,unit:"pt"}},heatmap_one_level_1:{font_size:{value:14,unit:"pt"}},heatmap_multi_level_1:{font_size:{value:24,unit:"pt"}},heatmap_two_level_2:{font_size:{value:14,unit:"pt"}},heatmap_multi_level_2:{font_size:{value:20,unit:"pt"}},heatmap_multi_level_3:{font_size:{value:10,unit:"pt"}},heatmap_size_legend:{font_size:{value:12,unit:"pt"}},heatmap_color_legend:{font_size:{value:12,unit:"pt"}},heatmap_color_legend_label:{font_size:{value:12,unit:"pt"}},heatmap_color_legend_tooltip:{font_size:{value:12,unit:"pt"}},heatmap_color_legend:{font_size:{value:12,unit:"pt"}},heatmap_editor_button:{font_size:{value:12,unit:"pt"}},heatmap_tooltip_gray_bold:{font_size:{value:14,unit:"pt"}},heatmap_tooltip_gray:{font_size:{value:14,unit:"pt"}},heatmap_tooltip_black_bold:{font_size:{value:14,unit:"pt"}},heatmap_tooltip_black:{font_size:{value:14,unit:"pt"}},heatmap_tree_div:{font_size:{value:18,unit:"pt"}},heatmap_tree_root__heatmap_tree_div:{font_size:{value:14,unit:"pt"}}};var V="--";var C=16119287;var Q="OA:(All)";function Ak(An,Am){var Ao=149,Ap=160;if(Am){Ap=149;}if(this.enableMultiDPI||Am){Ao=this.DPIX;}return parseInt(An*(Ao/Ap));}function M(Am){var Ao=16777216+Am;var An="#"+Ao.toString(16).substring(1).toUpperCase();return An;}function Aj(An,Am){return Math.round(An*Math.pow(10,Am))/Math.pow(10,Am);}function a(Am,Ar,Ao,Ap,Aq,An){An.beginPath();An.moveTo(Am+Aq,Ar);An.lineTo(Am+Ao-Aq-1,Ar);An.quadraticCurveTo(Am+Ao-1,Ar,Am+Ao-1,Ar+Aq);An.lineTo(Am+Ao-1,Ar+Ap-Aq-1);An.quadraticCurveTo(Am+Ao-1,Ar+Ap-1,Am+Ao-Aq-1,Ar+Ap-1);An.lineTo(Am+Aq,Ar+Ap-1);An.quadraticCurveTo(Am,Ar+Ap-1,Am,Ar+Ap-Aq-1);An.lineTo(Am,Ar+Aq);An.quadraticCurveTo(Am,Ar,Am+Aq,Ar);An.closePath();}function g(An,Ao,Am){if(Am&&An.total===undefined){An.avgTotal=An.total=An.geomProduct=An.max=An.min=An.value;An.count=isNaN(An.value)?0:1;An.positiveCount=An.value>0?1:0;}An.value=Ao;An.allChildrenCount++;if(!isNaN(Ao)){if(isNaN(An.total)){An.total=Ao;}else{An.total+=Ao;}if(isNaN(An.avgTotal)){An.avgTotal=Ao;}else{An.avgTotal+=Ao;}if(isNaN(An.max)){An.max=Ao;}else{An.max=Math.max(An.max,Ao);}if(isNaN(An.min)){An.min=Ao;}else{An.min=Math.min(An.min,Ao);}if(isNaN(An.geomProduct)){if(Ao>0){An.geomProduct=Ao;An.positiveCount++;}}else{if(Ao>0){An.geomProduct*=Ao;An.positiveCount++;}}An.count++;}}function H(An,Am){var Ao=Am.total;if(!isNaN(Ao)){if(isNaN(An.total)){An.total=Ao;}else{An.total+=Ao;}An.count++;}Ao=Am.avg;if(!isNaN(Ao)){if(isNaN(An.avgTotal)){An.avgTotal=Ao;}else{An.avgTotal+=Ao;}}Ao=Am.max;if(!isNaN(Ao)){if(isNaN(An.max)){An.max=Ao;}else{An.max=Math.max(An.max,Ao);}}Ao=Am.min;if(!isNaN(Ao)){if(isNaN(An.min)){An.min=Ao;}else{An.min=Math.min(An.min,Ao);}}Ao=Am.geomAvg;if(!isNaN(Ao)){if(isNaN(An.geomProduct)){if(Ao>0){An.geomProduct=Ao;An.positiveCount++;}}else{if(Ao>0){An.geomProduct*=Ao;An.positiveCount++;}}}}function AL(Am){return Am.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');}var J={dftUnDel:0,dftDel:1,usrDel:2};function B(Ax){var Aq=new DOMParser(),Ay=Aq.parseFromString(AL(Ax),"text/xml"),As=0,Am=Ay.childNodes[0],Ap=Ay.childNodes[0].childElementCount;if(Ap==0){return{};}var Av=Am.firstElementChild,An=Av.attributes,At=An.length,Au=this.props.deletedList||{},Ao=Au,Aw;while(As<Ap){Ao=Au;An=Av.attributes;for(var Ar=0;Ar<At;Ar++){Aw=An[Ar].value;if(Ar===(At-1)){Ao[Aw]=J.dftDel;}else{if(!Ao[Aw]){Ao[Aw]={};}Ao=Ao[Aw];}}As++;Av=Av.nextElementSibling;}return Au;}function AX(){var Au=this.props,At=this.controller.view.model.session;if(At){if(At.db!==undefined){Au.delButtonEnabled=At.db;}if(At.dl!==undefined){Au.deletedList=Am(Au.deletedList,At.dl);}if(isNaN(At.navigatingIndex)){Au.navigatingIndex=At.navigatingIndex;}if(At.entitiesWithStates){var Aw=At.entitiesWithStates;this.entitiesWithStates={};var Aq=this.entitiesWithStates;for(var Ax in Aw){Aq[Ax]=[];var Ap=Aw[Ax]||[],Ar=Ap.length,Ao;for(Ao=0;Ao<Ar;Ao++){var As=Ap[Ao];var An=Av.call(this,As.pathName);An.isExpanded=As.isExpanded;An.isSelected=As.isSelected;Aq[Ax].push(An);}}}if(At.dialogScrollerPosition){this.dialogScrollerPosition=At.dialogScrollerPosition;}this.isUsingSavedColorTheme=At.isUsingSavedColorTheme;this.isUsingDefaultColorTheme=At.isUsingDefaultColorTheme;}function Av(A5){var A0=this.root;for(var A4=0,Ay=A5.length;A4<Ay;A4++){var A3=A0.entityChildren;for(var A2=0,Az=A3.length;A2<Az;A2++){var A1=null;if(this.getEntityDisplayName(A3[A2])===A5[A4]){A1=A3[A2];A0=A1;break;}}}return A1;}function Am(A0,Az){function A1(A4,A3){var A7=Object.keys(A3),A2=A7.length;for(var A6=0;A6<A2;A6++){var A5=A7[A6];if(typeof A3[A5]!=="object"){A4[A5]=A3[A5];}else{if(A4[A5]===undefined){A4[A5]={};}A1(A4[A5],A3[A5]);}}}var Ay={};A1(Ay,A0);A1(Ay,Az);return Ay;}}function Af(){var Av=this.controller.view.model,At={},Au=this.props;Av.session=At;if(Au.delButtonEnabled!==undefined){At.db=Au.delButtonEnabled;}if(Au.deletedList!==undefined){At.dl=Au.deletedList;}if(isNaN(this.props.navigatingIndex)){At.navigatingIndex=Au.navigatingIndex;}if(this.entitiesWithStates){var Aw=this.entitiesWithStates;var Aq={};At.entitiesWithStates=Aq;for(var Ax in Aw){Aq[Ax]=[];var Ap=Aw[Ax]||[],Ar=Ap.length,Ao;for(Ao=0;Ao<Ar;Ao++){var An=Ap[Ao],As={};As.pathName=Am.call(this,An);As.isExpanded=An.isExpanded;As.isSelected=An.isSelected;Aq[Ax].push(As);}}}if(this.dialogScrollerPosition){At.dialogScrollerPosition=this.dialogScrollerPosition;}At.isUsingSavedColorTheme=this.isUsingSavedColorTheme;At.isUsingDefaultColorTheme=this.isUsingDefaultColorTheme;function Am(Ay){var Az=[];while(Ay.parentEntity){Az.push(this.getEntityDisplayName(Ay));Ay=Ay.parentEntity;}return Az;}}function d(){this.props={};var Ap=this.props,Am=this.model,Aq=Am.vp?Am.vp:{},Ao;Ap.deletedList={};Ap.delButtonEnabled=false;Ap.showMetricValues=false;Ap.refreshType=0;Ap.labelSize=b.On;Ap.showLegend=true;Ap.sizeMetricEnabled=true;Ap.colorMetricEnabled=true;Ap.layout=AH.Squarified;Ap.legendAsc=true;var An=mstrmojo.VisHeatMapColorTheme.newInstance();An.initialize();this.colorTheme=An;if(Aq.dl){Ap.deletedList=B.call(this,Aq.dl);}if(Aq.ed){Ap.delButtonEnabled=(Aq.ed=="true"?true:false);}if(Aq.mv){Ap.showMetricValues=(Aq.mv=="true"?true:false);}if(Aq.rt!=""){Ap.refreshType=parseInt(Aq.rt);}if(Aq.ml){Ao=Aq.ml.split(",");if(Ao.length>=2){Ap.sizeMetricID=Ao[0];Ap.colorMetricID=Ao[1];}}if(Aq.lb){Ao=Aq.lb;if(Ao=="Off"){Ap.labelSize=b.Off;}else{if(Ao=="Proportional"){Ap.labelSize=b.Proportional;}}}if(Aq.lg){Ap.showLegend=(Aq.lg=="true"?true:false);}if(Aq.rlp=="false"&&Aq.abs){An.convertAbsoluteToBlend(this,Aq);}if(Aq.blc){An.isBlend=(Aq.blc=="true"?true:false);}if(Aq.gradientColors&&Aq.bandColors){An.createDataProviderFromString(Aq.gradientColors,Aq.bandColors);}if(Aq.la){Ap.layout=parseInt(Aq.la,10);}if(Aq.rlp=="false"&&Aq.abs){this.colorTheme.convertAbsoluteToBlend(this,Aq);this.colorTheme.createDataProviderFromString(Aq.gradientColors,Aq.bandColors);}}function Ai(){var Ao=parseInt(this.width,10),An=parseInt(this.height,10),Ap=Ao-2*this.LayoutProperties.Padding,Am=0,Aq;if(this.model.gvs.items.length<=0){this.props.showLegend=false;}if(this.props.showLegend){Am=Math.min(Math.floor(0.2*(An-2*this.LayoutProperties.Padding)),this.LayoutProperties.MaxLegendHeight);Aq=An-Am-3*this.LayoutProperties.Padding;}else{Aq=An-2*this.LayoutProperties.Padding;}this.heatMapSize={x:0,y:0,w:Ap,h:Aq};this.legendSize={x:0,y:An-2*this.LayoutProperties.Padding-Am,w:Ao,h:Am};this.infoWindowSize={maxWidth:parseInt(this.width)-60,maxHeight:parseInt(this.height)-60};this.maxScale=10;}function A(){var Ao=this.model,Ap=Ao.ghs.chs.items[0]?Ao.ghs.chs.items[0].items.length:0,Am=this.props.sizeMetricID,As=this.props.colorMetricID,At=[];this.metricArray=At;for(var Ar=0;Ar<Ap;Ar++){At.push(h.call(this,Ar));}At.push(V);Ap++;this.sizeMetricIndex=0;this.colorMetricIndex=Ap>2?1:0;for(var Ar=0;Ar<Ap;Ar++){if(Am==At[Ar]){this.sizeMetricIndex=Ar;}if(As==At[Ar]){this.colorMetricIndex=Ar;}}if(Am===undefined){Am=At[this.sizeMetricIndex];this.props.sizeMetricID=Am;}if(As===undefined){As=At[this.colorMetricIndex];this.props.colorMetricID=As;}var Aq=Ao.gvs&&Ao.gvs.items,An=Aq&&Aq.length,Ar,Au=this.sizeMetricIndex,Aw=this.colorMetricIndex;this.sizeByMetricMissing=true;this.colorByMetricMissing=true;for(Ar=0;Ar<An;Ar++){var Av=Aq[Ar]&&Aq[Ar].items;if(Av[Au]===undefined||Av[Au].rv!==""){this.sizeByMetricMissing=false;break;}}for(Ar=0;Ar<An;Ar++){var Av=Aq[Ar]&&Aq[Ar].items;if(Av[Aw]===undefined||Av[Aw].rv!==""){this.colorByMetricMissing=false;break;}}if(this.sizeByMetricMissing){this.props.sizeMetricEnabled=false;this.sizeMetricIndex=At.length-1;this.props.sizeMetricID=At[this.sizeMetricIndex];}if(this.colorByMetricMissing){this.props.colorMetricEnabled=false;}if(this.props.sizeMetricID===V){this.props.sizeMetricEnabled=false;}if(this.props.colorMetricID===V){this.props.colorMetricEnabled=false;this.colorTheme.hasNoColorMetric=true;}if(this.props.sizeMetricEnabled==false&&this.props.colorMetricEnabled==false){this.props.showLegend=false;}}function S(){this.aggFunctions=[];var Au=this.props,At=Au.colorMetricID,Aw=this.aggFunctions,Ap=this.model,An=Ap.vp?Ap.vp:{},Aq=this.metricArray,Ar=Aq.length-1;if(At!=V){var Av=(An["mle"+At]=="true")?true:false;if(Av){var Ao=parseFloat(An["mlma"+At]);if(!isNaN(Ao)){this.mlmax=Ao;}Ao=parseFloat(An["mlmi"+At]);if(!isNaN(Ao)){this.mlmin=Ao;}}}for(var As=0;As<Ar;As++){var Am="agf"+Aq[As];if(An[Am]!==undefined){Aw.push(parseInt(An[Am]));}else{Aw.push(W.Sum);}}}function AM(Ao){for(var Am=0;Am<Ao.length;Am++){var An=Ao[Am].etk;if(An==-1||An=="-1"){return true;}}return false;}function N(){A.call(this);S.call(this);var A4=this.model,Ap=this.props.deletedList,A3=A4.gts&&A4.gts.row||[],BB=A3.length,A0=A4.gvs&&A4.gvs.items||[],An=A4.ghs&&A4.ghs.rhs&&A4.ghs.rhs.items||[],Ay=An.length,A9=A0[0]&&A0[0].items&&A0[0].items.length||0;if(BB<=0){var BF="The Heat Map requires at least one attribute on row axis to render properly; it is recommended that two metrics be placed on the column axis as well.";A4.err=mstrmojo.desc(11147,BF);return ;}this.singleSelection=false;this.hasNegativeSizeValue=false;this.levelAttributes=[];this.root={aggValues:[],entityChildren:[],level:0};for(var A8=0;A8<BB;A8++){this.levelAttributes[A8]={index:A8,order:A8+1,isInLOA:A8+1>0?true:false};}var BD={},Az=[];for(var A8=0;A8<BB;A8++){var A1=A3[A8].fs;Az[A8]=Math.max(1,A1?A1.length:1);}this.attSpan=Az;var At=0,BH;for(var A8=0;A8<Ay;A8++){var BG=An[A8].items,A6;if(AM(BG)){continue;}var BA="",Ax=Ap,Au=this.root,Aq=0,Aw,A2,Ao=0;for(var A7=0;A7<BB;A7++){var As;A2="";for(var A6=0;A6<Az[A7];A6++,Aq++){As=BG[Aq].idx;if(As==-1){continue;}A2+=A3[A7].es[As].n+" ";if(A6==0){BA+=As;}}A2=A2.substring(0,A2.length-1);if(Ax){Ax=Ax[AL(A2)];}if(A7!=BB-1){if(BD[BA]!==undefined){Au=BD[BA];}else{var Am={aggValues:[],entityChildren:[],parentEntity:Au};var BE=Au.entityChildren;BE.push(Am);BD[BA]=Am;Au=Am;Am.deleted=false;Am.text=A2;Am.label=A2;Am.level=A7;Am.index=A8;}BA+=":";}else{if(BD[BA]!==undefined){Aw=BD[BA];var Ar=Aw.indices;Ar.push(A8);for(var A6=0;A6<A9+1;A6++){var BC=Aw.aggValues[A6];var A5;if(A6==A9){A5=1;}else{A5=A0[A8].items[A6].rv;}g(BC,parseFloat(A5),true);if(!isNaN(A5)){this.aggregated=true;}}}else{Aw={indices:[],aggValues:[],parentEntity:Au};var Ar=Aw.indices;Ar.push(A8);var Av=Aw.aggValues;for(var A6=0;A6<A9+1;A6++){var BC={};Av[A6]=BC;var A5;if(A6==A9){A5=1;}else{A5=A0[A8].items[A6].rv;}BC.value=parseFloat(A5);BC.allChildrenCount=1;}this.aggregated=false;if(Ax){Aw.deleted=true;this.colorTheme.useDefault=false;}var BE=Au.entityChildren;BE.push(Aw);Aw.level=BB-1;Aw.text=A2;Aw.label=A2;BD[BA]=Aw;}}if(BG[A7].cet!=undefined){Ao++;if(Ao>At){At=Ao;BH=BD[BA];}}}}this.previousSelected=BH;D.call(this);AJ.call(this);}function E(){this.cmax=NaN;this.cmin=NaN;this.smax=NaN;this.smin=NaN;}function AJ(){this.hasLinkDrill=false;var Aq=this.model.gts.row,At=Aq.length;for(var Ao=0;Ao<At;Ao++){var As=Aq[Ao];if(As.lm){for(var An=0;An<As.lm.length;An++){if(As.lm[An].links){break;}}if(An!=As.lm.length){this.hasLinkDrill=true;this.firstRowLinkDrillIndex=Ao;break;}}}var Ap=this.model.gts.col[0];if(!Ap){return ;}var Ar=Ap.es.length;for(var Ao=0;Ao<Ar;Ao++){var Am=Ap.es[Ao],Au=Ap.lm[Ao];if(Au&&Au.links){this.hasLinkDrill=true;this.firstColLinkDrillIndex=Ao;break;}}}function D(){this.hasSelector=false;var An=this.model,Am=An.gts.row,At=Am.length;var Ay=this.xtabModel,Ax=(Ay&&Ay.docModel),Av=(Ax&&Ax.defn&&Ax.defn.layouts),Aw;for(var Ap=0;Av&&Ap<Av.length;Ap++){if(Av[Ap].loaded==true){Aw=Av[Ap];break;}}var As=(Aw&&Aw.units);for(var Ap=0;Ap<At;Ap++){var Au=Am[Ap];if(Au.otp!=-1&&Au.sc!==undefined){this.hasSelector=true;var Ar=Au.sc.tks;if(typeof Ar!="string"){continue;}Ar=Ar.split("\x1E");var Aq=Ar.length;this.hasGridTarget=false;for(var Ao=0;Ao<Aq;Ao++){if(Ar[Ao]==""){continue;}targetName=Ar[Ao];if(As&&As[targetName]&&!As[targetName]["ifw"]){this.hasGridTarget=true;return ;}}}}}function z(){var Ap=this.width-2*this.LayoutProperties.Padding;var Au=0;if(this.props.showLegend){Au=Math.min(Math.floor(0.2*(parseInt(this.height)-2*this.LayoutProperties.Padding)),this.LayoutProperties.MaxLegendHeight);}var An=this,Ao=e(this.heatMapSize);Ao.w*=this.scaleFactor;Ao.h*=this.scaleFactor;var As=Math.min(Ao.w,Ao.h);var Am=this.root.entityChildren;switch(this.props.layout){case AH.Squarified:var At=Am.slice(0);At.sort(function Aq(Aw,Av){var Ay=I(Aw,An);var Ax=I(Av,An);if(isNaN(Ay)){if(isNaN(Ax)){return 0;}return 1;}else{if(isNaN(Ax)){return -1;}return Ay<Ax?1:-1;}return 0;});Al.call(this,At,{r:[]},As,Ao);break;case AH.SliceAndDice:AU.call(this,Am,Ao);break;case AH.PivotByMiddle:var At=k.call(this,Am),Ar=At.length;if(Ar>0){Ab.call(this,At,0,Ar-1,Ao);}break;}}function Al(Az,Am,Ap,Av,Aw){var Aq=[[this,Az,Am,Ap,Av,Aw]];while(Aq.length){var Ao=Aq.pop();var Au=Ao[0];Az=Ao[1];Am=Ao[2];Ap=Ao[3];Av=Ao[4];Aw=Ao[5];var Ay=false;if(Az.length==0){P.call(Au,Am,Av);}else{var An=Av.w*Av.h;var Ax;if(Aw!==undefined){Ax=Aw;}else{Ax=AC.call(Au,Am,Ap,An);}var Ar=Az[0],As=Am.r;As.push(Ar);var At=AC.call(Au,Am,Ap,An);if(Ax>=At||Ax==-1){Az.shift();Aq.push([Au,Az,Am,Ap,Av,At]);}else{Am.r.pop();P.call(Au,Am,Av);Ap=Math.min(Av.w,Av.h);if(Am.t===undefined){Aq.push([Au,Az,{r:[]},Ap,Av]);}else{Aq.push([Au,Az,{r:[],t:Am.t},Ap,Av]);}}}}}function u(Ap,Ao){var An,Aq,Am=Ao.levelAttributes.length;if(Am==1){if(Ap==0){Aq="heatmap-one-level-1";An=this.Spec.heatmap_one_level_1.font_size.value;}}else{if(Am==2){if(Ap==0){Aq="heatmap-multi-level-1";An=this.Spec.heatmap_multi_level_1.font_size.value;}else{if(Ap==1){Aq="heatmap-two-level-2";An=this.Spec.heatmap_two_level_2.font_size.value;}}}else{if(Am>=3){if(Ap==0){Aq="heatmap-multi-level-1";An=this.Spec.heatmap_multi_level_1.font_size.value;}else{if(Ap==1){Aq="heatmap-multi-level-2";An=this.Spec.heatmap_multi_level_2.font_size.value;}else{Aq="heatmap-multi-level-3";An=this.Spec.heatmap_multi_level_3.font_size.value;}}}}}return{css:Aq,size:An};}function U(An){var Ao=function(){var Ar=An,As=An.level,Aq=this.levelAttributes.length;if(Aq==1){return 1;}if(Aq==2){if(As==0){return 3;}return 1;}if(Aq==3){if(As==0){return 6;}if(As==1){return 3;}return 1;}else{if(As==0){return 8;}if(As==1){return 4;}if(As==2){return 2;}return 1;}};var Am,Ap=Ao.call(this);if(this.DPI>160){Am=Ak.call(this,Ap);}else{Am=Ap;}if(Am<=0){Am=1;}return Am;}function T(Am){return Am.w>0&&Am.h>0;}function x(Ap,An){var Am=Math.max(Ap.x,An.x);var Ar=Math.max(Ap.y,An.y);var Ao=Math.min(Ap.x+Ap.w,An.x+An.w)-Am;var Aq=Math.min(Ap.y+Ap.h,An.y+An.h)-Ar;if(Ao<0||Aq<0){return{x:NaN,y:NaN,w:NaN,h:NaN};}return{x:Am,y:Ar,w:Ao,h:Aq};}function AY(An,Am){if(An.x==Am.x&&An.y==Am.y&&An.w==Am.w&&An.h==Am.h){return true;}else{return false;}}function X(An,Am){var Ao=x(An,Am);return AY(Ao,Am);}function G(An,Am,Aq){var Ap=[{x:Am.x-An.w,y:Am.y+Am.h/2-An.h/2,w:An.w,h:An.h},{x:Am.x+Am.w,y:Am.y+Am.h/2-An.h/2,w:An.w,h:An.h},{x:Am.x+Am.w/2-An.w/2,y:Am.y-An.h,w:An.w,h:An.h},{x:Am.x+Am.w/2-An.w/2,y:Am.y+Am.h,w:An.w,h:An.h}];for(var Ao=0;Ao<4;Ao++){if(X(Aq,Ap[Ao])){return{rect:Ap[Ao],index:Ao};}}}function AP(Am){var An=Am.x;Am.x=Am.y;Am.y=An;An=Am.w;Am.w=Am.h;Am.h=An;return Am;}function e(An){var Am={};Am.x=An.x;Am.y=An.y;Am.w=An.w;Am.h=An.h;return Am;}function AC(At,Av,A3){var Aw,Am=At.r,Ay=Am.length;if(Ay>0&&A3>0){var A2=Am[0];var Au=I(A2.parentEntity,this);if(isNaN(Au)||Au<=0){return -1;}var Ax,Az,An=0,A4,A2,A1=false;for(var A0=0;A0<Ay;A0++){A2=Am[A0];if(!A2.deleted){A4=I(A2,this);if(!isNaN(A4)){if(A1==false){Az=Ax=A4;A1=true;}else{Az=Math.max(A4,Az);Ax=Math.min(A4,Ax);}An+=A4;}}}var Ao=A3*An/Au,Ar=Ao/Av,As=(Av<Ar)?Av:Ar;Az=A3*Az/Au;Ax=A3*Ax/Au;var Aq=Az/(As*As);var Ap=Ax/(As*As);Aq=(Aq>1)?Aq:(1/Aq);Ap=(Ap>1)?Ap:(1/Ap);Aw=Math.max(Aq,Ap);}else{Aw=-1;}return Aw;}function Z(Ax,A9,A1,Aq,BB){var A2,Ay,Av=Ax.r,A4=Av.length,Au,A6,Az,BA=false;if(A4==0){return ;}if(A1<A9.h){Au=A1;A6=A9.h;Az=A9;}else{Au=A9.h;A6=A1;var Az=e(A9);AP(Az);BA=true;}var At=Az.x,As=Az.y,An={x:At,y:As,w:Au,h:A6};var A0=U.call(this,Av[0]);for(var A5=0;A5<A4;A5++){var A8,Ap,Aw;A8=Av[A5];if(A8.deleted){if((BB==true&&BA!=true)||(BB==false&&BA==true)){A8.size={x:As,y:At,w:0,h:0};}else{A8.size={x:At,y:As,w:0,h:0};}continue;}var A3=I(A8,this);Ay=(Aq<=0||A8.deleted)?0:Math.ceil(A6*A3/Aq);A2=Au;if(A8.entityChildren!==undefined){if(A3<Aq){if(A5==0){if(A0>1){Ay-=(A0>>1);}else{Ay--;}}else{if(A5<A4-1){if(A0>1){Ay-=A0;}else{Ay--;}}else{Ay=A6+Az.y-As;}}}var Ar={x:At,y:As,w:A2,h:Ay};Ap=x(Ar,An);if((BB==true&&BA!=true)||(BB==false&&BA==true)){AP(Ar);AP(Ap);}if(T(Ap)){A8.size=Ap;}else{A8.size={x:Ap.x,y:Ap.y,w:0,h:0};}Aw=Math.min(Ap.w,Ap.h);var Ao=this;var Am=A8.entityChildren.slice(0);Am.sort(function A7(BD,BC){var BF=I(BD,Ao);var BE=I(BC,Ao);if(isNaN(BF)){if(isNaN(BE)){return 0;}return 1;}else{if(isNaN(BE)){return -1;}return BF<BE?1:-1;}return 0;});Al.call(this,Am,{r:[]},Aw,Ar);As+=Ay+A0;}else{if(A3<Aq){if(A5==0||A5==A4-1){if(A0>1){if(Ay>(A0>>1)){Ay-=(A0>>1);}}else{if(Ay>1){Ay--;}}}else{if(Ay>A0){Ay-=A0;}}}A2=Math.max(0,A2);Ay=Math.max(0,Ay);var Ap=x({x:At,y:As,w:A2,h:Ay},An);Ap.x=At;Ap.y=As;As+=Ay+A0;if(As>=Az.y+A6){Ap.h=Az.y+A6-Ap.y;}if((BB==true&&BA!=true)||(BB==false&&BA==true)){Ap=AP(Ap);}if(T(Ap)){A8.size=Ap;}else{A8.size={x:Ap.x,y:Ap.y,w:0,h:0};}}}}function P(Av,A6){var Ao=0,Am=Av.r,Az=Am.length;if(Az==0){return ;}var A0,Ax=Am[0].parentEntity,At=Ax.entityChildren,Aq=At.length;for(var A1=0;A1<Az;A1++){var A3=Am[A1],Ar=I(A3,this);if(!A3.deleted&&Ar>0){Ao+=Ar;}}if(Av.t===undefined){var Au=0;for(var A1=0;A1<Aq;A1++){var A3=At[A1],Ar=I(A3,this);if(!A3.deleted&&Ar>0){Au+=Ar;}}Av.t=Au;}var A3=Am[0],Aw=U.call(this,A3),An={x:0,y:0,w:0,h:0};if(A3==this.root){A0=this.heatMapSize.w*this.scaleFactor*this.heatMapSize.h*this.scaleFactor;An.w=this.heatMapSize.w*this.scaleFactor;An.h=this.heatMapSize.h*this.scaleFactor;}else{if(Ax==this.root){A0=this.heatMapSize.w*this.scaleFactor*this.heatMapSize.h*this.scaleFactor;An.w=this.heatMapSize.w*this.scaleFactor;An.h=this.heatMapSize.h*this.scaleFactor;}else{var A8=Ax.size;A0=A8.w*A8.h;An=e(A8);}if(Av.t==0){A0=0;}else{A0*=Ao/Av.t;}}var As=A6.w,A2=A6.h,A7=false;if(A6.h<A6.w){}else{A7=true;AP(A6);AP(An);var A4=As;As=A2;A2=A4;}if((An.x<A6.x)||(An.x+An.w>A6.x+A6.w)){if(Aw>1){As+=(Aw>>1);}}if((An.y<A6.y)||(An.y+An.h>A6.y+A6.h)){if(Aw>1){A2+=(Aw>>1);}}var Ay=A2==0?0:Math.min(A6.w,Math.ceil(A0/A2));if(Ao<Av.t&&Ao>0){if(A6.x+Ay<An.x+An.w){if(Aw>1){Ay-=(Aw>>1);}else{Ay--;}}}Z.call(this,Av,A6,Ay,Ao,A7);var A5=A6.x+Ay,Ap=A6.w-Ay;if(Ao<Av.t&&Ao>0){if(A6.x+Ay<An.x+An.w){if(Aw>1){A5+=Aw;Ap-=Aw;}else{A5++;Ap--;}}}A6.x=A5;A6.w=Math.max(0,Ap);if(A7){AP(A6);}}function k(Ao){if(Ao==null){return[];}var Am=Ao.slice(0),Aq=0,An=Am.length;Am.t=[];for(var Ap=0;Ap<An;Ap++){var Ar=Am[Ap],As=I(Ar,this);if(Ar.deleted||isNaN(As)||As<=0){Am.splice(Ap,1);Ap--;An--;continue;}Aq+=As;Am.t[Ap]=Aq;}return Am;}function Ab(Av,A7,Ax,BD){var BE=[[this,Av,A7,Ax,BD]];while(BE.length){var Ar=BE.pop();var A9=Ar[0];Av=Ar[1];A7=Ar[2];Ax=Ar[3];BD=Ar[4];var BB=Av[0],A3=U.call(A9,BB),A5,A8,Ap,Aq,At,BH=false,A4=Ax-A7+1,As=(A4>2?((A4-1)>>1):(A4>>1))+A7,A1;A1=e(BD);if(A1.w>A1.h){}else{AP(A1);BH=true;}A5=e(A1);A8=e(A1);if(A7==Ax){BB=Av[A7];R.call(A9,BB,A1,BH,BE);continue;}if(A7+1==Ax){BB=Av[A7];Ap=I(BB,A9);BB=Av[Ax];Aq=I(BB,A9);}else{if(A7==0){Ap=Av.t[As-1];}else{Ap=Av.t[As-1]-Av.t[A7-1];}if(As==0){Aq=Av.t[Ax];}else{Aq=Av.t[Ax]-Av.t[As-1];}}At=Ap/(Ap+Aq);A5.w=Math.ceil(A5.w*At);if(A5.w<BD.w){if(A3>1){if(A5.w>(A3>>1)){A5.w-=(A3>>1);}}else{if(A5.w>1){A5.w--;}}}if(A7+1==Ax){A8.w-=A5.w+A3;A8.x+=A5.w+A3;BB=Av[A7];R.call(A9,BB,A5,BH,BE);BB=Av[Ax];R.call(A9,BB,A8,BH,BE);continue;}var BJ=e(A1),Aw,A0,Ao=0,BC=-1,A6=1,A2;if(As>A7){var Au=e(A5);if(BH){AP(Au);}BE.push([A9,Av,A7,As-1,Au]);}BJ.w-=A5.w+A3;BJ.x+=A5.w+A3;A8.w=BJ.w;A8.x=BJ.x;Aw=BJ.w/BJ.h;BB=Av[As];A2=I(BB,A9);A0=A2/Aq;for(var BA=As;BA<=Ax;BA++){BB=Av[BA];Ao+=I(BB,A9);if(BA==Ax-1){continue;}var An=Ao/Aq,BI=A2/Ao,BG=An/BI*Aw;if(BG>=1){if(A6<1&&A6*BG>1){BC=(BA==Ax)?BA-2:BA-1;}else{BC=BA;}break;}A6=BG;}BC=BC<0?Ax:BC;var Az,Ay,BF;if(As==0){Az=Av.t[BC];}else{Az=Av.t[BC]-Av.t[As-1];}Ay=Math.ceil(BJ.w*(Az/Aq));BF=Math.ceil(BJ.h*(A2/Az));if(Ay<BJ.w){if(A3>1){if(Ay>(A3>>1)){Ay-=(A3>>1);}}else{if(Ay>1){Ay--;}}}if(BF<BJ.h){if(A3>1){if(BF>(A3>>1)){BF-=(A3>>1);}}else{if(BF>1){BF--;}}}var Am={x:BJ.x,y:BJ.y,w:Ay,h:BF};BB=Av[As];R.call(A9,BB,Am,BH,BE);if(As<BC){BJ.y+=BF+A3;BJ.w=Ay;BJ.h-=BF+A3;if(BH){AP(BJ);}BE.push([A9,Av,As+1,BC,BJ]);}if(BC<Ax){A8.x+=Ay+A3;A8.w-=Ay+A3;if(BH){AP(A8);}BE.push([A9,Av,BC+1,Ax,A8]);}}}function R(Aq,At,As,Ar){var Ao=e(At);if(As==true){AP(Ao);}if(T(Ao)){Aq.size=Ao;}else{Aq.size={x:Ao.x,y:Ao.y,w:0,h:0};}var Ap=Aq.entityChildren;if(Ap!==undefined){var Am=k.call(this,Ap),An=Am.length;if(An>0&&Ar){Ar.push([this,Am,0,An-1,Ao]);}}}function AU(At,A2){var A3=[[this,At,A2]];while(A3.length){var An=A3.pop();var Ay=An[0];At=An[1];A2=An[2];if(At==null||At.length==0){continue;}var As=0,A1=At[0],A5,Av=U.call(Ay,A1),A4=false,Ax=At.length,Aq,Ap,Ar,A0;for(var Az=0;Az<Ax;Az++){A1=At[Az],A5=I(A1,Ay);if(!A1.deleted&&A5>0){As+=A5;}}if(A2.w<A2.h){}else{A4=true;AP(A2);}Ar=A2.w;A0=A2.h;Aq=A2.x;Ap=A2.y;for(var Az=0;Az<Ax;Az++){A1=At[Az],A5=I(A1,Ay);if(!A1.deleted&&A5>0){var Aw,Au;Au=As<=0?0:Math.ceil(A5/As*A0);Aw=Ar;if(A5<As){if(Az==0||Az==Ax-1){if(Av>1){if(Au>(Av>>1)){Au-=(Av>>1);}}else{if(Au>1){Au--;}}}else{if(Au>Av){Au-=Av;}}}Aw=Math.max(0,Aw);Au=Math.max(0,Au);var Ao={x:Aq,y:Ap,w:Aw,h:Au},Am=x(Ao,A2);Ap+=Au+Av;if(Ap>=A2.y+A0){Am.h=A2.y+A0-Am.y;}if(A4){AP(Am);}if(T(Am)){A1.size=Am;}else{A1.size={x:Am.x,y:Am.y,w:0,h:0};}if(A1.entityChildren!==undefined){A3.push([Ay,A1.entityChildren,Am]);}}else{A1.size={};if(A4){A1.size={x:Ap,y:Aq,w:0,h:0};}else{A1.size={x:Aq,y:Ap,w:0,h:0};}continue;}}if(A4){AP(A2);}}}function AE(A4,Av,As,Am,Ap,Au,A0){if(Ap.entityChildren!==undefined){var At=Ap.parentEntity,Ar=true,Aw=false,An=[],A1=Ap.entityChildren,Ay=A1.length;for(var Az=0;Az<A0;Az++){An[Az]={count:0,allChildrenCount:0,positiveCount:0};}for(var Az=0;Az<Ay;Az++){var Aq=A1[Az];AE(A4,Av,As,Am,Aq,Au,A0);if(!Aq.deleted){Ar=false;}if(Aq.entityChildren===undefined){if(Aq.deleted){Aw=true;}}else{if(Aq.hasChildDeleted){Aw=true;}}if(!Aq.deleted){F(Ap,Aq,An,Au,A0);}}Ap.deleted=Ar;Ap.hasChildDeleted=Aw;for(var Az=0;Az<A0;Az++){var A3=Ap.aggValues[Az];if(A3==null){A3={};Ap.aggValues[Az]=A3;}var A2=An[Az];A3.total=A2.total;A3.avg=A2.count==0?0:A2.avgTotal/A2.count;A3.geomAvg=A2.positiveCount==0?NaN:Math.pow(A2.geomProduct,1/A2.positiveCount);A3.min=A2.min;A3.max=A2.max;A3.count=A2.count;A3.positiveCount=A2.positiveCount;}}else{if(Ap.deleted){return ;}var Ax=I(Ap,Au);if(!isNaN(Ax)){if(isNaN(Au.smax)){Au.smax=Au.smin=Ax;}else{if(Ax>Au.smax){Au.smax=Ax;}if(Ax<Au.smin){Au.smin=Ax;}}}var Ao=AQ(Ap,Au);if(!isNaN(Ao)){if(isNaN(Au.cmax)){Au.cmax=Au.cmin=Ao;}else{if(Ao>Au.cmax){Au.cmax=Ao;}if(Ao<Au.cmin){Au.cmin=Ao;}}}}}function F(Aq,Am,Ar,Au,Ao){var As,At=Am.aggValues;if(Am.entityChildren!==undefined){As=AB(Am,Au.sizeMetricIndex);if(As!==null){var An=As.count;if(An>0){for(var Ap=0;Ap<Ao;Ap++){As=Ar[Ap];H(As,At[Ap]);}}}}else{if(I(Am,Au)>0&&!Am.deleted){for(var Ap=0;Ap<Ao;Ap++){As=Ar[Ap];g(As,AZ(Am,Ap,Au));}}}}function AB(Ao,An){var Am=Ao.aggValues;if(An>=Am.length){return NaN;}return Am[An];}function AQ(Ao,An){var Am=An.colorMetricIndex;return AZ(Ao,Am,An);}function I(Ao,An){var Am=An.sizeMetricIndex,Ap=AZ(Ao,Am,An);if(Ap<0){An.hasNegativeSizeValue=true;return Math.abs(Ap);}return Ap;}function AT(Ao,An){var Am=An.sizeMetricIndex;return AZ(Ao,Am,An);}function AZ(Ar,Ap,An){var Am=Ar.aggValues;if(Ap>=Am.length){return NaN;}var Aq=Am[Ap],Ao=An.aggFunctions[Ap];if(Ar.entityChildren!==undefined){switch(Ao){case W.Sum:return Aq.total;case W.Avg:return Aq.avg;case W.Cnt:return Aq.count;case W.Max:return Aq.max;case W.Min:return Aq.min;case W.GeoAvg:return(Aq.positiveCount>0)?Aq.geomAvg:0;default:return Aq.total;}}else{if(Aq.allChildrenCount==1){return Aq.value;}switch(Ao){case W.Sum:return Aq.total;case W.Avg:return Aq.count==0?0:Aq.avgTotal/Aq.count;case W.Cnt:return Aq.count;case W.Max:return Aq.max;case W.Min:return Aq.min;case W.GeoAvg:return Aq.positiveCount>0?NaN:Math.pow(Aq.geomProduct,1/Aq.positiveCount);default:return Aq.total;}}}function Ah(){if(!isNaN(this.mlmax)||!isNaN(this.mlmin)){if(!isNaN(this.mlmax)){this.cmax=this.mlmax;if(isNaN(this.mlmin)&&(this.mlmax<this.cmin)){this.cmin=this.mlmax;}}if(!isNaN(this.mlmin)){this.cmin=this.mlmin;if(isNaN(this.mlmax)&&(this.mlmin>this.cmax)){this.cmax=this.mlmin;}}}if(!isNaN(this.mlmax)&&this.cmax>this.mlmax){this.cmax=this.mlmax;}if(!isNaN(this.mlmin)&&this.cmin<this.mlmin){this.cmin=this.mlmin;}this.colorTheme.min=this.cmin;this.colorTheme.max=this.cmax;this.colorTheme.checkMinMax();}function h(Au){var At="",Ap=this.model,Ao=Ap.ghs.chs.items,An=Ao.length,Aq=Ao[0].items.length,Aw=Ap.gts.col;if(Au<0||Au>=Aq){return"";}for(var Ar=0;Ar<An;Ar++){var As=Ao[Ar].items[Au].idx;var Av=Aw[Ar].es[As];var Am=(Av.oid!==undefined)?Av.oid:Av.id;At+=Am+" ";}return At.slice(0,At.length-1);}function K(An){var Am;if(this.props.legendAsc){Am=this.cmin+(this.cmax-this.cmin)*An/this.legendTickCount;}else{Am=this.cmax+(this.cmin-this.cmax)*An/this.legendTickCount;}if(this.props.legendRounded){Am=Math.floor(Am);}return Am;}function Ag(A4,Ar){var An=A4.level,Ap=(A4.index===undefined)?A4.indices[0]:A4.index,Ax=0,Ay="",A8="",Av=Ar.attSpan,Am=Ar.model.ghs.rhs.items,A7=Am[Ap].items,A0=Ar.model.gts.row,Au=Ar.model.gvs.items,A3=Au[0]?Au[0].items.length:0,Az,Ao;for(var A2=0;A2<An;A2++){Az=A0[A2];A8+='<div class="heatmap-inline"><div class = "heatmap-tooltip-gray-bold">'+Az.n+'</div><div class="heatmap-tooltip-gray-bold"><p>:&nbsp;</p></div>';Ay="";for(var A1=Ax;A1<Ax+Av[A2];A1++){var At=A7[A1].idx;if(At==-1){continue;}Ay+=Az.es[At].n+" ";}Ay=Ay.substring(0,Ay.length-1);A8+='<div class = "heatmap-tooltip-gray">'+Ay+"</div></div>";Ax+=Av[A2];}Az=A0[An];A8+='<div class="heatmap-inline"><div class = "heatmap-tooltip-black-bold">'+Az.n+'</div><div class="heatmap-tooltip-black-bold"><p>:&nbsp;</p></div>';Ay="";for(var A2=Ax;A2<Ax+Av[An];A2++){var At=A7[A2].idx;if(At==-1){continue;}Ay+=Az.es[At].n+" ";}Ay=Ay.substring(0,Ay.length-1);A8+='<div class = "heatmap-tooltip-black">'+Ay+"</div></div>";var A6=Ar.sizeMetricIndex,Aq=Ar.colorMetricIndex,Aw,As;if(A6!=A3){Aw=Ar.getMetricName(A6);if(A4.entityChildren!==undefined||Ar.aggregated){var A5=Ar.aggFunctions[A6];Aw=r(Aw,A5);As=AT(A4,Ar);if(isNaN(As)){As="-";}else{if(W.Cnt!=A5){Ao=Ar.getFormatString(A6);As=Ar.nf.formatByMask(Ao,As);}}}else{As=Au[Ap].items[A6].v;}A8+='<div class="heatmap-inline"><div class = "heatmap-tooltip-black-bold">'+Aw+'</div><div class="heatmap-tooltip-black-bold"><p>:&nbsp;</p></div>';A8+='<div class = "heatmap-tooltip-black">'+As+"</div></div>";}if(A4.entityChildren===undefined&&Aq!=A3&&A6!=Aq){Aw=Ar.getMetricName(Aq);if(A4.entityChildren!==undefined||Ar.aggregated){var A5=Ar.aggFunctions[Aq];Aw=r(Aw,A5);As=AQ(A4,Ar);if(isNaN(As)){As="-";}else{if(W.Cnt!=A5){Ao=Ar.getFormatString(Aq);As=Ar.nf.formatByMask(Ao,As);}}}else{As=Au[Ap].items[Aq].v;}A8+='<div class="heatmap-inline"><div class = "heatmap-tooltip-black-bold">'+Aw+'</div><div class="heatmap-tooltip-black-bold"><p>:&nbsp;</p></div>';A8+='<div class = "heatmap-tooltip-black">'+As+"</div></div>";}for(var A2=0;A2<A3;A2++){if(A2==A6){continue;}if(A2==Aq&&A4.entityChildren===undefined&&A6!=Aq){continue;}Aw=Ar.getMetricName(A2);if(A4.entityChildren!==undefined||Ar.aggregated){var A5=Ar.aggFunctions[A2];Aw=r(Aw,A5);As=AZ(A4,A2,Ar);if(isNaN(As)){As="-";}else{if(W.Cnt!=A5){Ao=Ar.getFormatString(A2);As=Ar.nf.formatByMask(Ao,As);}}}else{As=Au[Ap].items[A2].v;}A8+='<div class="heatmap-inline"><div class = "heatmap-tooltip-gray-bold">'+Aw+'</div><div class="heatmap-tooltip-gray-bold"><p>:&nbsp;</p></div>';A8+='<div class = "heatmap-tooltip-gray">'+As+"</div></div>";}return A8;}function r(Ao,Am){var An;switch(Am){case W.Sum:An="Sum of {0}";break;case W.Avg:An="Average of {0}";break;case W.Cnt:An="Count of {0}";break;case W.Max:An="Maximum of {0}";break;case W.Min:An="Minimum of {0}";break;case W.GeoAvg:An="Geometry Average of {0}";break;default:An="Sum of {0}";}return An.replace("{0}",Ao);}function p(Aq,Am){if(Aq.eventOwner==Am){return ;}var An=mstrmojo.dom,Ap=[An.TOUCHSTART,An.TOUCHMOVE,An.TOUCHEND,An.TOUCHCANCEL];for(var Ao=0;Ao<Ap.length;Ao++){if(Ap[Ao]==""){continue;}if(document.createTouch){Aq["on"+Ap[Ao]]=function(At){var Ar=document.createEvent("TouchEvent"),As=At.touches[0];if(!As){As={};}Ar.initTouchEvent(At.touches,At.targetTouches,At.changedTouches,At.type,At.view,As.screenX,As.screenY,As.clientX,As.clientY,At.ctrlKey,At.altKey,At.shiftKey,At.metaKey);Am.dispatchEvent(Ar);};}else{Aq["on"+Ap[Ao]]=function(As){var Ar=document.createEvent("MouseEvent");Ar.initMouseEvent(As.type,As.bubbles,As.cancelable,As.view,As.detail,As.screenX,As.screenY,As.clientX,As.clientY,As.ctrlKey,As.altKey,As.shiftKey,As.metaKey,As.button,As.relatedTarget);Am.dispatchEvent(Ar);};}}Aq.eventOwner=Am;}mstrmojo.VisHeatMap=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisHeatMap",scrollerConfig:{bounces:false,showScrollbars:false,useTranslate3d:true,vScroll:true,hScroll:true,offset:{y:{start:0,end:0},x:{start:0,end:0}},origin:{x:0,y:0}},selectedStyle:"background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #058CF5), color-stop(1, #015DE6));color:#FFFFFF;",selectedClass:"",insertedStyles:[],LayoutProperties:{},highlightBoxWidth:3,waitIconString:mstrmojo.desc("8445","Loading"),markupString:'<div id="{@id}" class="mstrmojo-{@cssClass}" style="background-color:#333333;width:{@width};height:{@height}; left:{@left}; top:{@top}; z-index: {@zIndex}; position:absolute;" mstrAttach:mousedown,mouseup,mousemove,click><div class="heatmap-canvas-outer-container" style="padding: {@LayoutProperties.Padding}px; height:{@heatMapSize.h}px; width:{@heatMapSize.w}px"><div id ="{@id}-heatmap-canvas-container" class="heatmap-canvas-container" style="left: {@LayoutProperties.Padding}px; top: {@LayoutProperties.Padding}px; height:{@heatMapSize.h}px; width:{@heatMapSize.w}px"><div><div></div><div class="heatmap-selection-highlight-box heatmap-round-corner" style="border: {@highlightBoxWidth}px solid white;"></div></div></div></div><div class="heatmap-legend" style="left:{@legendSize.x}px; top:{@legendSize.y}px; height:{@legendSize.h}px; width:{@legendSize.w}px"><div  class="heatmap-size-legend"><div class="heatmap-size-legend-title">Rectangle Size:</div><div id="{@id}-color-legend-ticker" class="heatmap-size-legend-label" ></div></div><div  class="heatmap-color-legend"><div class="heatmap-color-legend-title">Rectangle Color:</div><table cellpadding="4" class="heatmap-color-legend-label"><tbody><tr><td class="heatmap-color-legend-label-td"></td></tr></tbody></table><div style="position:relative;"><canvas id="{@id}-color-legend-band" class="heatmap-color-legend-band"></canvas><div id="{@id}-legend-tooltip" class="heatmap-color-legend-tooltip"></div></div></div><div id="{@id}-editor-div" class="heatmap-editor-button" style="width: {@LayoutProperties.EditButtonWidth}px; height:{@LayoutProperties.EditButtonHeight}px; right:{@LayoutProperties.EditButtonRight}px"></div></div><span id="textSpan" class="heatmap-measure-text"></span><div class="mojo-overlay-wait" style="display: -webkit-box; -webkit-box-align:center; -webkit-box-pack:center; position: absolute; left: -100000px; top: -100000px"><div class="overlay"></div><div style="width:{@LayoutProperties.WaitIconWidth}px; height:{@LayoutProperties.WaitIconHeight}px; background-color: black; opacity: 0.8; display: -webkit-box"><div style="display: -webkit-box; -webkit-box-align: center; -webkit-box-pack: center; -webkit-box-flex:1;  margin: {@LayoutProperties.WaitIconMargin}px; border: 1px solid white; color: white; font-family: Helvetica; font-weight: bold; font-size:{@LayoutProperties.WaitIconFontSize}pt">{@waitIconString}</div></div></div><div></div></div>',markupSlots:{canvas:function(){return this.domNode.childNodes[0].childNodes[0].childNodes[0].childNodes[0];},canvasContainer:function(){return this.domNode.childNodes[0].childNodes[0];},canvasOuterContainer:function(){return this.domNode.childNodes[0];},scrollNode:function(){return this.domNode.childNodes[0].childNodes[0].childNodes[0];},selectionHighlightBox:function(){return this.domNode.childNodes[0].childNodes[0].childNodes[0].childNodes[1];},legend:function(){return this.domNode.childNodes[1];},sizeLegend:function(){return this.domNode.childNodes[1].childNodes[0];},sizeLegendTitle:function(){return this.domNode.childNodes[1].childNodes[0].firstChild;},sizeLegendLabel:function(){return this.domNode.childNodes[1].childNodes[0].lastChild;},colorLegend:function(){return this.domNode.childNodes[1].childNodes[1];},colorLegendTitle:function(){return this.domNode.childNodes[1].childNodes[1].firstChild;},colorLegendLabel:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[1];},colorLegendBand:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[2].firstChild;},legendTooltip:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[2].childNodes[1];},editorButton:function(){return this.domNode.childNodes[1].lastChild;},textSpan:function(){return this.domNode.childNodes[2];},waitIcon:function(){return this.domNode.childNodes[3];},infoBoxPuppet:function(){return this.domNode.childNodes[4];}},addCSSToHead:function(){var Am={text:".heatmap-popup-panel-title {  font-size: "+Ak.call(this,22,true)+"pt !important;  height: "+Ak.call(this,65,true)+"px !important;}.heatmap-gray-label {        padding-bottom: "+Ak.call(this,7,true)+"px !important;        font-size: "+Ak.call(this,14,true)+"pt !important;  height: "+Ak.call(this,32,true)+"px !important;  padding-left: "+Ak.call(this,22,true)+"px !important;  line-height: "+Ak.call(this,40,true)+"px !important;}.heatmap-tree-text {  font-size: "+Ak.call(this,18,true)+"pt !important;  line-height: "+Ak.call(this,65,true)+"px !important;}.heatmap-tree-div {  font-size: "+Ak.call(this,18,true)+"pt !important;  line-height: "+Ak.call(this,40,true)+"px !important;}.heatmap-tree-button {  font-size: "+Ak.call(this,16,true)+"pt !important;}.heatmap-apply-button > .mstrmojo-Button-text {  font-size: "+Ak.call(this,14,true)+"pt !important;  line-height: "+Ak.call(this,24,true)+"px !important;   height: "+Ak.call(this,24,true)+"px !important; }.heatmap-tree.root > .heatmap-tree-div > div {  font-size: "+Ak.call(this,14,true)+"pt !important;  line-height: "+Ak.call(this,40,true)+"px !important;  height: "+Ak.call(this,40,true)+"px !important;}.heatmap-one-level-1 {  font-size: "+Ak.call(this,14)+"pt !important;}.heatmap-multi-level-1 {  font-size: "+Ak.call(this,24)+"pt !important;}.heatmap-two-level-2 {  font-size: "+Ak.call(this,14)+"pt !important;}.heatmap-multi-level-2 {  font-size: "+Ak.call(this,20)+"pt !important;}.heatmap-multi-level-3 {  font-size: "+Ak.call(this,10)+"pt !important;}.heatmap-size-legend {  font-size: "+Ak.call(this,12)+"pt !important;}.heatmap-color-legend {  font-size: "+Ak.call(this,12)+"pt !important;}.heatmap-color-legend-label {  font-size: "+Ak.call(this,10)+"pt !important;}.heatmap-color-legend-tooltip {  font-size: "+Ak.call(this,12)+"pt !important;}.heatmap-legend {  font-size: "+Ak.call(this,12)+"pt !important;}.heatmap-editor-button {  font-size: "+Ak.call(this,12)+"pt !important;}.heatmap-tooltip-gray-bold {  font-size: "+Ak.call(this,14)+"pt !important;}.heatmap-tooltip-gray {  font-size: "+Ak.call(this,14)+"pt !important;}.heatmap-tooltip-black-bold {  font-size: "+Ak.call(this,14)+"pt !important;}.heatmap-tooltip-black {  font-size: "+Ak.call(this,14)+"pt !important;}"};this.addAdjustedClassToDocument(Am.text);},addAdjustedClassToDocument:function(Aq){var Ao=Aq.indexOf(".");if(Ao==-1){return ;}var Ar=document.getElementsByTagName("head")[0];this.CSSParent=Ar;for(var Am=Ao;Am<Aq.length;){var Ap=Am+Aq.substring(Am).indexOf("}");if(Ap==-1){break;}var An=document.createElement("style");An.type="text/css";An.innerHTML=Aq.substring(Am,Ap+1);this.insertedStyles.push(An);Ar.appendChild(An);Am=Ap+1;}},isMultipleDPIEnabled:function(){var Aq=this.xtabModel,Am=(Aq&&Aq.docModel),An=false,As=false;if(Am){An=Am.zt&&(Am.zt==2);var Ar=(Am&&Am.defn&&Am.defn.layouts),Ap;var Ao;for(Ao in Ar){if(Ar[Ao].loaded){Ap=Ar[Ao];break;}}if(Ap&&Ap.hasOwnProperty("fch")){As=Ap.fch;}}if(An&&As){return true;}else{return false;}},init:function(An){if(this._super){this._super(An);}var Am=document.createElement("canvas");browserSupportsHtml5=Am.getContext;if(!browserSupportsHtml5){this.error=mstrmojo.desc(8126,"Your browser does not support HTML5");return ;}},preBuildRendering:function(){delete this.error;if(this._super){this._super();}this.dpiAdjusted=true;this.DPI=mstrMobileApp.getDeviceDPI();if(mstrMobileApp.getDeviceDPIX){this.DPIX=mstrMobileApp.getDeviceDPIX();}else{this.DPIX=149;}if(this.isMultipleDPIEnabled()){this.enableMultiDPI=true;}else{this.enableMultiDPI=false;}this.adjustLocalDPI();this.addCSSToHead();this.zIndex=null;this.loadDefinedFormat();d.call(this);AX.call(this);if(!this.model){this.error=mstrmojo.desc(8426,"No model provided");return ;}var Am=this.model.err||this.model.eg;if(Am){this.error=Am;return ;}N.call(this);var Am=this.model.err||this.model.eg;if(Am){this.error=Am;return ;}Ai.call(this);this.calculateValuesInTree();z.call(this);Ah.call(this);this.nf=mstrmojo.num;if(this.editorDialog){this.editorDialog.destroy();this.editorDialog=null;}},createInfoBox:function(){var Am='<div id="'+this.id+'-infobox" class="heatmap-infobox" style="position:absolute; left:0px; top:0px;"><div class="heatmap-highlight-box heatmap-round-corner" style="border: '+this.highlightBoxWidth+'px solid white;"></div><div class="heatmap-shadow-box heatmap-round-corner"></div><div class="heatmap-triangle"></div><div class="heatmap-tooltip-box heatmap-round-corner" style="max-width: '+document.body.offsetWidth+"px; max-height: "+document.body.offsetHeight+'px; "></div><div class="heatmap-delete-button"></div><div class="heatmap-tooltip-shelter heatmap-round-corner"></div></div>';var An=document.createElement("div");An.innerHTML=Am;this.infoBox=An.childNodes[0];this.highlightBox=this.infoBox.childNodes[0];this.shadowBox=this.infoBox.childNodes[1];this.triBox=this.infoBox.childNodes[2];this.tooltipBox=this.infoBox.childNodes[3];this.deleteButton=this.infoBox.childNodes[4];this.shelter=this.infoBox.childNodes[5];An.style.cssText="position: absolute; left: 0px; top: 0px";p(An,this.infoBoxPuppet);document.body.appendChild(An);},postBuildRendering:function AN(){if(this.error){this.renderErrorMessage(this.error);return ;}var Ap=this;var Ao=this.controller.onorientationChange;this.controller.onorientationChange=function(){Ao.call(Ap.controller);Ap.onorientationChange();};this._onorientationChange=Ao;this.enableGlobalDismiss();this.setupScroller();if(this._super){this._super();}var An=this._tsCallback;this._tsCallback=function(At){if(Ap.isInfoWindowDisplayed()){Ap.infoWindowMode=true;}else{Ap.infoWindowMode=false;}An.call(Ap,At);};var As=mstrmojo.dom.attachEvent,Aq=mstrmojo.dom.detachEvent,Am=mstrmojo.dom.TOUCHSTART;Aq(this._tn,Am,An);As(this._tn,Am,this._tsCallback);if(this.isUsingSavedColorTheme){this.useSavedColorTheme();}if(this.isUsingDefaultColorTheme){this.useDefaultColorTheme();}try{this.initCanvas();}catch(Ar){this.renderErrorMessage(Ar);return ;}this.renderLegend();if(!this.infoBox){this.createInfoBox();}if(this.props.delButtonEnabled){this.deleteButton.style.display="block";}if(this.previousSelected&&this.previousSelected.parentEntity){this.highlightEntity(this.selectionHighlightBox,this.previousSelected);}},unrender:function(){Af.call(this);if(this._scroller){this._scroller.detachEventListener(this._scrollMovedHandler);this._scroller.detachEventListener(this._scrollDoneHandler);}this.disableGlobalDismiss();var Ao=mstrmojo.dom.attachEvent,An=mstrmojo.dom.detachEvent,Am=mstrmojo.dom.TOUCHSTART;An(this._tn,Am,this._tsCallback);if(this.infoBox&&this.infoBox.parentNode&&this.infoBox.parentNode.parentNode){this.infoBox.parentNode.parentNode.removeChild(this.infoBox.parentNode);}delete this.infoBox;delete this.editorDialog;if(this.canvasObject){this.canvasObject.unrender();}if(this._super){this._super();}},hasPageBy:function Ac(){if(this.model&&this.model.phs&&this.model.phs.show){return true;}return false;},getFirstInfowindow:function L(){var Aq=this,Ao=Aq.model,Ap=Aq.xtabModel,Am=(Ap&&Ap.docModel),As=Ao&&Ao.gts&&Ao.gts.row,Ar;if(As&&As.length>0){Ar=As[0]&&As[0].sc&&As[0].sc.tks;}if(Am&&Ar){ifws=Am.getTargetInfoWin(Ar);if(ifws&&ifws.length){var An=Am.infoWinByKey[ifws[0]];var At=An&&(An.id+"_ifw");return mstrmojo.all[At];}}},isInfoWindowDisplayed:function(){var Am=this.getFirstInfowindow();if(Am){Am=Am.domNode;}if(!Am){return false;}if(Am.style.display=="block"){return true;}else{return false;}},globalListener:function(){var Am=window.heatMap;if(!Am){return ;}Am.hideInfoBox();if(!Am.selectAll){Am.doSelection(Am.previousSelected);}},addGlobalListener:function(){window.heatMap=this;var Am=document.getElementsByClassName("mstrmojo-DocLayoutViewer-layout")[0];if(Am){Am.addEventListener(mstrmojo.dom.TOUCHSTART,window.heatMap.globalListener,false);}},removeGlobalListener:function(){var Am=document.getElementsByClassName("mstrmojo-DocumentView")[0];if(Am){Am.removeEventListener("click",this.globalListener,false);}delete window.heatMap;},addCurtain:function(){var An=document.getElementsByClassName("mstrmojo-DocLayoutViewer-layout")[0];var Ao=document.createElement("div"),Am=this;Ao.style.width=An.offsetWidth+"px";Ao.style.height=An.offsetHeight+"px";Ao.style.position="absolute";Ao.style.zIndex=-1;Ao.id=this.id+"curtain";Ao.onclick=this.globalListener;An.appendChild(Ao);},removeCurtain:function(){var Am=document.getElementById(this.id+"curtain");if(Am){Am.parentNode.removeChild(Am);}},renderErrorMessage:function AI(Ap){var Ao=this.domNode,An=Ao.parentNode,Aq=document.createElement("div"),Am=document.createElement("div");if(Ao){Aq.style.width=Ao.offsetWidth-2+"px";Aq.style.height=Ao.offsetHeight-2+"px";Aq.style.left=Ao.offsetLeft+"px";Aq.style.top=Ao.offsetTop+"px";Aq.style.zIndex=this.zIndex;}else{Aq.style.width=parseInt(this.width)-2+"px";Aq.style.height=parseInt(this.height)-2+"px";Aq.style.left=this.left;Aq.style.top=this.top;Aq.style.zIndex=this.zIndex;}Aq.style.cssText+="background-color:#F5F5F2; position:absolute; display:-webkit-box; -webkit-box-pack:center; -webkit-box-align:center; -webkit-box-orient:vertical; border-style:solid; border-color:#A7A7A7; border-width:1px; ";Am.className="mstrmojo-message";Am.innerText=Ap;Aq.appendChild(Am);if(Ao){An.replaceChild(Aq,Ao);}else{An.appendChild(Aq);}},convertDPI:function(Ao){if(typeof Ao!="object"){if(typeof Ao=="number"&&Ao%1==0){return Ak.call(this,Ao);}else{return Ao;}}else{var Am={};for(var An in Ao){Am[An]=this.convertDPI(Ao[An]);}return Am;}},adjustLocalDPI:function(){this.LayoutProperties=this.convertDPI(AO);this.LayoutProperties.LegendTickCount=5;this.LayoutProperties.LegendWidthPercent=0.9;this.LayoutProperties.LegendBandAspect=10;this.LayoutProperties.EditorDialogWidth=Ak.call(this,565,true);this.LayoutProperties.EditorDialogHeight=Ak.call(this,574,true);var An=document.body.offsetHeight,Ap=this.LayoutProperties.EditorDialogHeight,Am=An/Ap,Ao=1;if(Am<1){Ao=Am;Ao*=0.9;this.LayoutProperties.EditorDialogHeight=parseInt(Ap*Ao);}this.LayoutProperties.DeletedListHeight=Ak.call(this,500*Ao,true);this.LayoutProperties.EditButtonWidth=Ak.call(this,60);this.LayoutProperties.EditButtonHeight=Ak.call(this,40);this.LayoutProperties.EditButtonRight=Ak.call(this,10);},onorientationChange:function(){if(this.editorDialog){var An=this.editorDialog.domNode;if(An&&An.firstChild){var Ao=An.firstChild,Am=Ao.firstChild.firstChild;Ao.style.marginTop=parseInt((document.body.offsetHeight-this.LayoutProperties.DeletedListHeight-Am.offsetHeight)/2)+"px";}}},loadDefinedFormat:function(){if(this.defn&&this.defn.fmts){var An=this.defn.fmts,Am=An&&An.p_fmts&&An.p_fmts.height;if(An.height){this.height=An.height;}if(!this.isFullScreenWidget){if(An.width){this.width=An.width;}}if(An["z-index"]){this.zIndex=An["z-index"];}}},checkErrors:function(){var Am=this.error;if(Am){this.renderErrorMessage(Am);return true;}if(!this.model){this.renderErrorMessage(mstrmojo.desc(8426,"No model provided"));return true;}var Am=this.model.err||this.model.eg;if(Am){this.renderErrorMessage(Am);return true;}return false;},setupScroller:function(){var Am=this.scrollerConfig;Am.scrollEl=this.scrollNode;Am.offset.x.start=0;Am.offset.x.end=this.heatMapSize.w*(this.scaleFactor-1);Am.offset.y.start=0;Am.offset.y.end=this.heatMapSize.h*(this.scaleFactor-1);if(Am.origin.x>Am.offset.x.end){Am.origin.x=Am.offset.x.end;}if(Am.origin.y>Am.offset.y.end){Am.origin.y=Am.offset.y.end;}},refreshLabelInTree:function(){var Am=function(Ao,An){if(Ao==this.root){return ;}var Ap=this.getLabelForEntity(Ao);Ao.text=Ap;Ao.idx=An;};this.dfs(this.root,Am,"");},refreshColorInTree:function(){var Am=function(Ao){if(Ao.EntityChildren||Ao==this.root){return ;}var An=M(this.colorTheme.getColor(AQ(Ao,this)));Ao.color=An;};this.dfs(this.root,Am,"");},dfs:function(Ao,Ar,Ap){if(Ao.deleted){return ;}if(Ap===undefined){Ar.call(this,Ao);}else{Ar.call(this,Ao,Ap);}if(Ao.entityChildren===undefined){return ;}var Am=Ao.entityChildren,An=Am.length;for(var Aq=0;Aq<An;Aq++){var As=Am[Aq];if(Ap===undefined){this.dfs(As,Ar);}else{var At=Ap;if(!At){At=Aq.toString();}else{At=At+":"+Aq;}this.dfs(As,Ar,At);}}},traverseBFS:function t(){var An=this,Am=this.textCanvas,Ap=function(Ar,Aq){},Ao=function(Ar){var Aq=Ar-An.levelToShowText;if(Aq>=3){return false;}return true;};},initCanvas:function(){var An=this;this.refreshColorInTree();this.refreshLabelInTree();var Am={colorTheme:this.colorTheme,placeholder:this.canvas,root:this.root,width:this.heatMapSize.w,height:this.heatMapSize.h,scale:this.scaleFactor,attributes:this.levelAttributes,showMetric:this.props.showMetricValues,labelSetting:this.props.labelSize};this.canvasObject=new mstrmojo.VisHeatMapCanvas(Am);this.canvasObject.render();this.canvasObject.updateOffsets(this._scroller.origin.x,this._scroller.origin.y);this.canvas=this.canvasObject.domNode;},renderRectangles:function(){this.refreshColorInTree();this.refreshLabelInTree();this.canvasObject.scale=this.scaleFactor;this.canvasObject.offsetX=this._scroller.origin.x;this.canvasObject.offsetY=this._scroller.origin.y;try{this.canvasObject.draw();}catch(Am){this.renderErrorMessage(Am);}},renderLegend:function Ad(){if(this.props.showLegend==false){this.editorButton.style.height="";this.editorButton.style.width="";this.editorButton.style.right="";this.editorButton.style.bottom="";this.editorButton.className="heatmap-editor-legend-unshown";this.editorButton.innerHTML="";this.editorButton.style.top="";this.sizeLegend.style.display="none";this.colorLegend.style.display="none";this.legend.style.left="";this.legend.style.top="";this.legend.style.right="0px";this.legend.style.bottom="0px";this.legend.style.zIndex="100";return ;}var Ap=mstrmojo.desc(11158,"EDIT"),A9=mstrmojo.desc(10079,"Rectangle Size"),Au=mstrmojo.desc(10080,"Rectangle Color");this.editorButton.className="heatmap-editor-button";this.editorButton.innerHTML=Ap;var At=parseInt(this.width),A1=parseInt(this.height),Ao=this.heatMapSize.h,Ar=window.getComputedStyle(this.editorButton,null),Ax=parseInt(Ar.height),A2=parseInt(Ar.width),Aq=this.legendSize.h,Aw=this.legendSize.w-A2-parseInt(Ar.right),A6=this.getFormatString(this.sizeMetricIndex);this.legend.style.top=this.heatMapSize.h+2*this.LayoutProperties.Padding+"px";this.editorButton.style.top=((Aq-Ax)>>1)+"px";this.editorButton.style.bottom="";if(this.props.showEditor){Aw-=this.LayoutProperties.LegendMenuEditorWidth;}var Ay={w:0,h:0},A4={w:0,h:0},A3={w:0,h:0},Am,Av,An,A0;if(this.props.sizeMetricEnabled){var BA="<span style='font-weight: bold'>"+A9+":</span>";var A8=this.checkMetricValid(this.sizeMetricIndex),Az=this.getMetricName(this.sizeMetricIndex);if(this.hasNegativeSizeValue){Az="Absolute value of "+Az;}if(isNaN(this.smin)){this.smin=0;}if(isNaN(this.smax)){this.smax=0;}var As="<div>"+(A8?this.nf.formatByMask(A6,this.smin):"0")+" < </div><div class='heatmap-flex'>"+Az+"</div><div> < "+(A8?this.nf.formatByMask(A6,this.smax):"0")+"</div>";this.sizeLegendTitle.innerHTML=BA;this.sizeLegendLabel.innerHTML=As;A3={w:Math.max(this.sizeLegendTitle.offsetWidth,this.sizeLegendLabel.offsetWidth),h:this.sizeLegendTitle.offsetHeight};}else{this.sizeLegend.style.display="none";}if(this.props.colorMetricEnabled){var A7;if(this.props.sizeMetricEnabled){A7=Au+": <span style='font-weight:normal;'>"+this.getMetricName(this.colorMetricIndex)+"</span>";}else{A7="<span style='font-weight:bold'>"+this.getMetricName(this.colorMetricIndex)+"</span>";}Am=this.LayoutProperties.LegendTickCount;if(isNaN(this.cmin)||this.cmin>=this.cmax){Am=1;}this.legendTickCount=Am;An=Math.min(this.LayoutProperties.LegendMaxBandWidth,this.LayoutProperties.LegendWidthPercent*(Aw-A3.w));Av=Math.floor((Aw-A3.w-An)/3);var BC=this.renderTickLabels(An,BB,Am);if(Av>=this.LayoutProperties.LegendMinPadding+BC.l+BC.r){An+=BC.l+BC.r;Av-=((BC.l+BC.r)>>1);}else{if(Av<this.LayoutProperties.LegendMinPadding){Av=this.LayoutProperties.LegendMinPadding;var A5=((Aw-3*Av)>>1);if(A5>A3.w){An=Aw-3*Av-A3.w;}else{A3.w=A5;An=A3.w;}}}A0=Math.min(Math.floor(An/this.LayoutProperties.LegendBandAspect),Math.floor(Aq/3))-this.LayoutProperties.LegendBottomPadding;this.colorLegend.style.display="";this.colorLegendTitle.innerHTML=A7;}else{Av=((Aw-A3.w)>>1);this.colorLegend.style.display="none";}if(this.props.sizeMetricEnabled){this.sizeLegend.style.left=Av+"px";this.sizeLegend.style.width=A3.w+this.LayoutProperties.LegendGutter+2*this.LayoutProperties.Padding+"px";this.sizeLegend.style.height=Aq+"px";}else{this.sizeLegend.style.left="0px";this.sizeLegend.style.width="0px";this.sizeLegend.top="0px";this.sizeLegend.style.height="0px";this.sizeLegendLabel.style.marginTop="0px";Av=((Aw-An)>>1);}if(this.props.colorMetricEnabled){if(this.props.sizeMetricEnabled){this.colorLegend.style.left=A3.w+2*Av+"px";}else{this.colorLegend.style.left=A3.w+Av+"px";}this.colorLegend.style.width=An+"px";this.colorLegend.style.height=Aq+"px";Ay={w:this.colorLegendTitle.offsetWidth,h:this.colorLegendTitle.offsetHeight};var BB=Aq-A0-Ay.h-2*this.LayoutProperties.LegendBottomPadding;this.colorLegendLabel.style.width=An+"px";this.colorLegendLabel.style.height=BB+"px";this.colorLegendBand.width=An;this.colorLegendBand.height=A0+10;var BC=this.renderTickLabels(An,BB,Am);this.colorTheme.tooltipInfo=null;this.legendBand={x:BC.l,y:0,w:An-BC.r-BC.l,h:A0};this.colorLegendBand.parentNode.style.width=An+"px";this.colorLegendBand.parentNode.style.height=A0+"px";this.renderGradientBand(this.legendBand);}},renderTickLabels:function s(A0,Ax,A2){var Ay=A2+1;var Ar=this.colorLegendLabel.firstChild.firstChild,Aq=Ar.childNodes,Ao=Aq.length,Ap=Ar.lastChild,Az=Ao-Ay,An=this.getFormatString(this.colorMetricIndex);Ap.style.display="";Ap.style.width="";Ap.style.textAlign="center";if(Az<0){for(var Av=0;Av<Math.abs(Az);Av++){var At=Ap.cloneNode(true);Ar.insertBefore(At,Ap.nextSibling);Ap=At;}}else{for(var Av=0;Av<Az;Av++){if(A2==0&&Av==Az-1){Ap.style.display="none";break;}Ar.removeChild(Ar.lastChild);}}Ar.firstChild.style.textAlign="left";Ar.lastChild.style.textAlign="right";var Am=true;if(isNaN(this.cmax)||isNaN(this.cmin)){Am=false;}for(var Av=0;Av<Ay;Av++){At=Aq[Av];var A1="Null";if(Am){A1=K.call(this,Av);}At.innerHTML='<div style="display: inline-block; overflow: hidden; text-overflow: ellipsis; max-width: 100%; white-space: nowrap;">'+this.nf.formatByMask(An,A1)+"</div>";if(this.props.legendRounded){}}var Au=Ar.firstChild.innerHTML,As=Ar.lastChild.innerHTML,Aw={w:Ar.firstChild.firstChild.offsetWidth,h:Ar.firstChild.firstChild.offsetHeight};lSize={w:Ar.lastChild.firstChild.offsetWidth,h:Ar.lastChild.firstChild.offsetHeight};left=Math.min(A0/Ay,Aw.w)>>1,right=Math.min(A0/Ay,lSize.w)>>1;return{l:left,r:right};},renderGradientBand:function AF(An){var Av=An.x,Au=An.y,Aw=An.w,Ar=An.h,Ax=this.colorLegendBand.getContext("2d");Ax.clearRect(Av,Au,Aw+2,Ar);var Ao=Ax.createLinearGradient(Av,Au,Aw+Av,Au);Ao.addColorStop(0,"#333333");var At=this.colorTheme.getGradientFillInfo(this.cmin,this.cmax);var As=At.c,Am=At.r,Ap=As.length;for(var Aq=0;Aq<Ap;Aq++){Ao.addColorStop(Aj(Am[Aq],2),M(As[Aq]));}Ax.fillStyle=Ao;a(Av,Au,Aw,Ar,0,Ax);Ax.fill();},renderHilightedBand:function AR(Ap){var As=this.legendBand,Ar=this.colorTheme.tooltipInfo[Ap],Am=As.x,At=As.y,Ao=As.w,Aq=As.h,An=this.colorLegendBand.getContext("2d");this.renderGradientBand(As);this.selectedBandIndex=Ap;An.strokeStyle="#FFFFFF";An.lineWidth=2;An.strokeRect(Ar.r.x+Am+1,At+1,Ar.r.w-1,Aq-3);},getTextSize:function Y(Ar,Ap,Aq,Ao,As){this.textSpan.style="";this.textSpan.style.fontFamily=Ap;this.textSpan.style.fontSize=isNaN(Aq)?Aq:Aq+"px";this.textSpan.style.fontWeight=Ao?"bold":"normal";this.textSpan.style.fontStyle=As?"italic":"normal";this.textSpan.innerHTML=Ar;var Am=this.textSpan.offsetWidth,An=this.textSpan.offsetHeight;return{w:Am,h:An};},reRender:function AD(){if(this.model.err||this.model.eg){return ;}if(this._super){this._super();}},useDefaultColorTheme:function(Av){if(this.entitiesWithStates){var At=this.entitiesWithStates;for(var Au in At){var Ao=At[Au]||[],Aq=Ao.length,An;for(An=0;An<Aq;An++){var Ar=Ao[An];Ar.pathName=undefined;Ar.isExpanded=undefined;Ar.isSelected=undefined;}}}this.entitiesWithStates=undefined;this.dialogScrollerPosition=undefined;var As=this.colorTheme,Am=false;if(As.useDefault==false){Am=true;As.isBlend=true;As.setDefaultDataProvider();}if(this.scaleFactor!=1){Am=true;this.scaleFactor=1;}function Ap(Aw){for(var Ax in Aw){var Ay=Aw[Ax];if(typeof Ay==="object"){if(Object.keys(Ay).length===0){delete Aw[Ax];}else{Ap(Ay);}}else{if(Ay===J.dftDel){Am=true;Aw[Ax]=J.dftUnDel;}else{if(Ay===J.usrDel){Am=true;delete Aw[Ax];}}}}}Ap(this.props.deletedList);this.loadDeleteStatus(this.root,this.props.deletedList);if(Am){As.tooltipInfo=null;this.refreshWidget();}if(Av){Av();}},loadDeleteStatus:function(Aq,Am){if(!Aq.entityChildren){if(Am===J.dftDel||Am===J.usrDel){Aq.deleted=true;}else{delete Aq.deleted;}return ;}if((!Am||Object.keys(Am).length===0)&&!Aq.hasChildDeleted){return ;}var Ap=Aq.entityChildren;for(var Ao=0;Ao<Ap.length;Ao++){var As=Ap[Ao];var An=this.getEntityDisplayName(As);var Ar=Am&&Am[An];this.loadDeleteStatus(As,Ar);}},useSavedColorTheme:function(Aq){var Ao=this.colorTheme,An=false;if(Ao.useDefault==true){An=true;var Ap=this.model.vp;if(Ap){Ao.isBlend=((Ap.blc===undefined||Ap.blc=="true")?true:false);}if(Ap.gradientColors&&Ap.bandColors){Ao.createDataProviderFromString(Ap.gradientColors,Ap.bandColors);}Ao.useDefault=false;}if(this.scaleFactor!=1){An=true;this.scaleFactor=1;}function Am(Ar){for(var As in Ar){var At=Ar[As];if(typeof At==="object"){if(Object.keys(At).length===0){delete Ar[As];}else{Am(At);}}else{if(At===J.dftUnDel){An=true;Ar[As]=J.dftDel;}else{if(At===J.usrDel){An=true;delete Ar[As];}}}}}Am(this.props.deletedList);this.loadDeleteStatus(this.root,this.props.deletedList);if(An){Ao.tooltipInfo=null;this.refreshWidget();}if(Aq){Aq();}},getFormatString:function AA(An){var Am=this.model,Ao=Am.gvs.items[0]?Am.gvs.items[0].items:[],Ap=Ao.length;if(An>=0&&An<Ap){var Aq=Ao[An];if(Aq.formatstring!==undefined){return Aq.formatstring.replace(/\'/g,'"');}return"";}return"";},checkMetricValid:function f(An){var Ar="",Am=this.model,Ap=Am.ghs.chs.items,Aq=Ap.length,As=Ap[0]?Ap[0].items.length:0,Ao=Am.gts.col;if(An<0||An>=As){return false;}return true;},getMetricName:function Aa(At){var As="",Ap=this.model,Ao=Ap.ghs.chs.items,An=Ao.length,Au=Ap.gts.col;if(!this.checkMetricValid(At)){return V;}for(var Aq=0;Aq<An;Aq++){var Ar=Ao[Aq].items[At].idx;var Am=Au[Aq].es[Ar].n;As+=Am+" ";}return As.slice(0,As.length-1);},getEntityDisplayName:function w(As){var Am=As.level,Ap=(As.index===undefined)?As.indices[0]:As.index,Aw=0,Au="",An=this.attSpan,Ar=this.model.ghs.rhs.items,Aq=Ar[Ap].items,At=this.model.gts.row[Am];for(var Ao=0;Ao<Am;Ao++){Aw+=An[Ao];}Au="";for(var Ao=Aw;Ao<Aw+An[Am];Ao++){var Av=Aq[Ao].idx;if(Av==-1){continue;}Au+=At.es[Av].n+" ";}Au=Au.substring(0,Au.length-1);return Au;},previousTooltip:null,previousSelected:null,highlightEntity:function(Aq,Ap){if(!Ap||!Aq){return ;}var Aw=this.canvasContainer.offsetWidth,Ar=this.canvasContainer.offsetHeight,Ax=Ap.size,Av=this._scroller.origin,Ao=this.highlightBoxWidth,An=mstrmojo.dom.position(this.canvasContainer,true);var Am={x:Av.x,y:Av.y,w:Aw,h:Ar};var At={x:0,y:0,w:Math.ceil(this.heatMapSize.w*this.scaleFactor),h:Math.ceil(this.heatMapSize.h*this.scaleFactor)};var Au={x:Ax.x-Ao,y:Ax.y-Ao,w:Ax.w+2*Ao,h:Ax.h+2*Ao};var As=x(Au,At);if(Aq==this.highlightBox){As=x(As,Am);this.previousHighlighted=Ap;}if(isNaN(As.x)){return null;}As.x+=(Ao-Av.x);As.y+=(Ao-Av.y);As.w-=2*Ao;As.h-=2*Ao;if(Aq==this.highlightBox){Aq.style.left=As.x-Ao+An.x+"px";Aq.style.top=As.y-Ao+An.y+"px";As.x+=An.x;As.y+=An.y;}else{Aq.style.left=As.x-Ao+Av.x+"px";Aq.style.top=As.y-Ao+Av.y+"px";}Aq.style.width=As.w+"px";Aq.style.height=As.h+"px";Aq.style.display="block";return As;},getLowestLevelRectangle:function(An){target=document.elementFromPoint(An.pageX,An.pageY);var Am=[];while(!this.isLowestLevelRectangle(target)){target.style.display="none";Am.push(target);target=document.elementFromPoint(An.pageX,An.pageY);}while(Am.length){Am.pop().style.display="block";}return target;},getEntityByTouch:function(As,Az){var Aq=null;var Ap=As.pageX,Ao=As.pageY;AG.visPrint("#getEntityByTouch#pageX:"+Ap+" pageY:"+Ao);var Av=document.elementFromPoint(Ap,Ao),Ax=[];if(!Av){AG.visPrint("target is null! at elementFromPoint.");return null;}var Am=Av;while(!this.isRectangle(Av)&&Av!=this.domNode){Ax.push(Av);Av.style.visibility="hidden";Av=document.elementFromPoint(Ap,Ao);if(!Av||Av==Am){break;}Am=Av;}if(Az){Am=Av;while(Av!=this.domNode&&Av.tagName.toLowerCase()!="img"){Ax.push(Av);Av.style.visibility="hidden";Av=document.elementFromPoint(Ap,Ao);if(!Av||Av==Am){break;}Am=Av;}}var Ay=Ax.length;while(Ax.length>0){var An=Ax.pop();An.style.visibility="visible";}if(!Av){AG.visPrint("target is null. At backups.");return null;}if(Av!=this.domNode){if(Av.getAttribute("idx")&&!Az){var Aq=this.getIdxObjectByTarget(Av);}else{var Aw=mstrmojo.dom.position(this.canvas,true),Au=Ap-Aw.x,Ar=Ao-Aw.y;var At={x:Au,y:Ar},Aq=this.canvasObject.getEntity(At);}}else{}return Aq;},getLabelForEntity:function(At){if(!this.props.showMetricValues||At.entityChildren!==undefined){return this.getEntityDisplayName(At);}var As=(At.index===undefined)?At.indices[0]:At.index,Av="",Ar=this.sizeMetricIndex,Ax=this.colorMetricIndex,Aw=this.model.gvs.items,An=Aw[0].items.length,Am,Au,Aq=this.getEntityDisplayName(At);Av='<span style="font-weight:bold;">';if(Aq!==""){Av+=Aq+"<br>";}if(Ar!=An){if(At.entityChildren!==undefined||this.aggregated){var Ap=this.aggFunctions[Ar];Au=I(At,this);if(isNaN(Au)){Au="-";}else{if(W.Cnt!=Ap){fs=this.getFormatString(Ar);Au=this.nf.formatByMask(fs,Au);}}}else{Au=Aw[As].items[Ar].v;}if(Au!==""){Av+=Au+"<br>";}}if(At.entityChildren===undefined&&Ax!=An&&Ar!=Ax){if(At.entityChildren!==undefined||this.aggregated){var Ap=this.aggFunctions[Ax];Au=AQ(At,this);if(isNaN(Au)){Au="-";}else{if(W.Cnt!=Ap){fs=this.getFormatString(Ax);Au=this.nf.formatByMask(fs,Au);}}}else{Au=Aw[As].items[Ax].v;}if(Au!==""){Av+=Au+"<br>";}}Av+='</span><span style="font-weight:normal;">';for(var Ao=0;Ao<An;Ao++){if(Ao==Ar){continue;}if(Ao==Ax&&At.entityChildren===undefined&&Ar!=Ax){continue;}if(At.entityChildren!==undefined||this.aggregated){var Ap=this.aggFunctions[Ao];Am=r(Am,Ap);Au=AZ(At,Ao,this);if(isNaN(Au)){Au="-";}else{if(W.Cnt!=Ap){fs=this.getFormatString(Ao);Au=this.nf.formatByMask(fs,Au);}}}else{Au=Aw[As].items[Ao].v;}if(Au!==""){Av+=Au;if(Ao!==An-1){Av+="<br>";}}}Av+="</span>";return Av;},multiTap:true,touchBegin:function(Am){},touchTap:function(Au){if(Au.count>=2){if(this.scaleFactor>1){this.scaleFactor=1;this._scroller.offset.x.start=0;this._scroller.offset.x.end=0;this._scroller.offset.y.start=0;this._scroller.offset.y.end=0;this._scroller.scrollTo(0,0,0);this.refreshWidget();}return ;}var Ax=Au.target;if(Ax==this.infoBoxPuppet){Ax=document.elementFromPoint(Au.pageX,Au.pageY);}if(this.touchLegendTooltipValid(Au)){this.showLegendTooltip(Au);}else{this.hideLegendTooltip();}switch(Ax){case this.editorButton:Ax.style.backgroundColor="rgba(51, 181, 229, 0.6)";var A0=function(){mstrmojo.VisHeatMapAnimation.animate(Ax,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});};var Aw=this;setTimeout(function(){setTimeout(function(){try{Aw.popupEditor(Ax);}catch(A1){}finally{A0();}},0);},0);return ;case this.deleteButton:if(this.previousTooltip){var As=this.props.deletedList;var Ar=this.previousTooltip;var Ao=[];var An=Ar;do{Ao.push(this.getEntityDisplayName(An));An=An.parentEntity;}while(An.parentEntity);var Av,Az;for(var At=Ao.length-1;At>=0;At--){Av=As;Az=Ao.pop();var Am=As[Az];if(!Am){As[Az]={};Am=As[Az];}As=Am;}this.deleteNode(Ar,As,Av,Az);this.hideInfoBox();this.refreshWidget();var Ay=this.id+"-deleteTree";var Ap=mstrmojo.all[Ay];if(Ap){Ap.needRefresh=true;}}this.previousTooltip=null;break;case this.selectionHighlightBox:this.doSelection(this.previousSelected);break;case this.highlightBox:this.hideInfoBox();var Aq=this.previousHighlighted;if(this.hasSelector){if(!this.previousHighlighted.entityChildren){this.doSelection(Aq);}}else{if(this.hasLinkDrill){this.doLinkDrill(Aq);}}break;default:if(this.isRectangle(Ax)){if(this.hasSelector){this.hideInfoBox();var Aq=this.getEntityByTouch(Au,true);this.doSelection(Aq);}else{if(this.hasLinkDrill){var Aq=this.getEntityByTouch(Au);this.doLinkDrill(Aq);}else{var Aq=this.getEntityByTouch(Au);this.showInfoBox(Aq);}}break;}else{if(Ax.parentNode==this.infoBox){this.hideInfoBox();}else{this.hideInfoBox();if(!this.selectAll){this.doSelection(this.previousSelected);}}}}},isRectangle:function(Am){if(this.canvasObject.domNode==Am.parentNode||(Am.parentNode&&this.canvasObject.domNode==Am.parentNode.parentNode)||Am.tagName.toLowerCase()=="img"){return true;}else{return false;}},isLowestLevelRectangle:function(Am){if(Am.getAttribute&&Am.getAttribute("idx")&&!(Am.innerHTML)){return true;}else{return false;}},doLinkDrill:function(An){if(!An){return ;}var Am=this.getActionObj({entity:An,type:AS});if(Am){this.highlightEntity(this.selectionHighlightBox,An);this.performAction([Am]);}},getActionObj:function(Ao){if(!Ao){return null;}var Aw=Ao.type,A1=Ao.entity,A4=null;switch(Aw){case AS:var As=this.model.gts.row,A2=As.length,Ap=A1.level,Ar;for(var BB=0;BB<=Ap;BB++){var A9=As[BB];if(A9.lm){for(var BA=0;BA<A9.lm.length;BA++){if(A9.lm[BA].links){break;}}if(BA!=A9.lm.length){Ar=BB;break;}}}var Ax=(A1.index===undefined)?A1.indices[0]:A1.index,BD=this.model.ghs;if(!isNaN(Ar)){var A9=this.model.gts.row[Ar];linkDrillNode={};linkDrillNode.titleInfo=A9;linkDrillNode._e=A9.es[BD.rhs.items[Ax].items[Ar].idx];A4={at:Aw,k:this.getModelKey(),node:linkDrillNode};break;}Au=this.firstColLinkDrillIndex;if(!isNaN(Au)){var A5=this.model.gts.col[0],A6=A5.es[Au],Ay=A5.lm[Au];if(Ay&&Ay.links){linkDrillNode={};linkDrillNode.titleInfo=A5;linkDrillNode.mix=Au;A4={at:Aw,k:this.getModelKey(),node:linkDrillNode};}break;}break;case l:var A1=Ao.entity,Av=Ao.anchor;if(!A1||!Av){break;}if(A1){var A8=this.model,A3=A8.gts.row,A2=A3.length,Am=A8.ghs.rhs.items,Au=(A1.index===undefined)?A1.indices[0]:A1.index,At=Am[Au].items,BE=[];for(var BB=0;BB<A2;BB++){var A7=A3[BB],An=A7.sc;if(A7.otp!=-1&&An!==undefined){var Aq=At[BB].idx,Az=A7.es[Aq].id,BC=A7.es[Aq].n,A0;if(!Az||Az.substring(0,1)==="D"){continue;}if(An.all!="false"&&An.all!=false&&Ao.needSelectAll){A0=Q;}else{A0=A7.es[Aq].id;}BE.push({sc:An,es:BC,eid:A0});}}A4={at:Aw,k:this.getModelKey(),scObjList:BE,anchor:Av};}break;case j:var A1=Ao.entity,Av=Ao.anchor;if(!A1||!Av){break;}if(A1){var A8=this.model,A3=A8.gts.row,A2=A3.length,Am=A8.ghs.rhs.items,Au=(A1.index===undefined)?A1.indices[0]:A1.index,At=Am[Au].items,BE=[];for(var BB=0;BB<A2;BB++){var A7=A3[BB],An=A7.sc;if(A7.otp!=-1&&An!==undefined){var Aq=At[BB].idx,Az=A7.es[Aq].id,BC=A7.es[Aq].n,A0;if(!Az||Az.substring(0,1)==="D"){continue;}if(An.all!="false"&&An.all!=false&&Ao.needSelectAll){A0=Q;}else{A0=A7.es[Aq].id;}BE.push({sc:An,es:BC,eid:A0});}}A4={at:Aw,k:this.getModelKey(),scObjList:BE,anchor:Av};}break;default:break;}return A4;},getModelKey:function(){return this.model&&this.model.k;},deleteNode:function(Ar,Am,Aq,Ap){if(!(Ar.size&&Ar.size.w&&Ar.size.h)){return ;}if(!Ar.entityChildren){Ar.deleted=true;if(Aq&&Ap){if(Am===J.dftUnDel||Am===J.dftDel){Aq[Ap]=J.dftDel;}else{Aq[Ap]=J.usrDel;}}return ;}else{Aq=Am;for(var An in Ar.entityChildren){var Ao=Ar.entityChildren[An];Ap=this.getEntityDisplayName(Ao);var As=Aq[Ap];if(!As){Aq[Ap]={};As=Aq[Ap];}this.deleteNode(Ao,As,Aq,Ap);}}},toggleSelectAll:function(Am){var An=this.model.gts.row[Am.level].sc;if((An&&An.all!="false"&&An.all!=false)||!this.hasGridTarget){if(this.selectAll){this.selectAll=false;}else{this.selectAll=true;}return true;}return false;},doSelection:function(Am){if(!Am){return ;}if(Am==this.previousSelected){if(!this.toggleSelectAll(Am)){return ;}var An=this.selectionHighlightBox,Ao={entity:Am,type:l,needSelectAll:this.selectAll,anchor:An};Ap=this.getActionObj(Ao);if(this.selectAll){this.selectionHighlightBox.style.display="none";delete Ap.anchor;}else{this.highlightEntity(this.selectionHighlightBox,Am);}this.performAction([Ap]);}else{this.selectAll=false;var An=this.selectionHighlightBox,Ao={entity:Am,type:l,needSelectAll:this.selectAll,anchor:An};this.previousSelected=Am;this.highlightEntity(this.selectionHighlightBox,Am);var Ap=this.getActionObj(Ao);this.performAction([Ap]);}},getObjectByIdx:function(Am){if(Am){var An=Am.split(":");var Ap=this.root;for(var Ao=0;Ao<An.length;Ao++){Ap=Ap.entityChildren[An[Ao]];}return Ap;}return null;},toggleDeleteButton:function(){if(!this.infoBox){return ;}if(this.props.delButtonEnabled){this.deleteButton.style.display="none";this.props.delButtonEnabled=false;}else{this.deleteButton.style.display="block";this.props.delButtonEnabled=true;}},editorDialog:null,popupEditor:function(At){this.hideInfoBox();var A1=this.id;var Av=A1+"-deleteTree";var A0=A1+"-editor";var Au=this;var Am=0;if(this.props.delButtonEnabled){Am=1;}var Aq=mstrmojo.desc(7831,"Settings"),Az=mstrmojo.desc(10081,"Deleted Items"),Ax=mstrmojo.desc(10378,"REFRESH"),Ay=mstrmojo.desc(10082,"Refresh to saved configuration"),Aw=mstrmojo.desc(10083,"Refresh to default configuration"),A3=mstrmojo.desc(10379,"APPLY"),Ap=mstrmojo.desc(10380,"DELETE"),A2=mstrmojo.desc(10085,"Enable Delete"),An=mstrmojo.desc(10084,"Please select elements that you want to restore"),Ar=mstrmojo.desc(221,"Cancel"),As=mstrmojo.desc(134,"Apply");var Ao={anchor:this.editorButton,title:"Heat Map",id:A0,anchorOrientation:"h",owner:this,width:this.LayoutProperties.EditorDialogWidth+"px",contentMaxHeight:this.LayoutProperties.DeletedListHeight,defaultIndex:this.props.navigatingIndex,panels:[{title:Aq,scriptClass:"mstrmojo.VisHeatMapPopupPanel",width:"100%",height:"100%",children:[{scriptClass:"mstrmojo.Label",text:Ax,cssDisplay:"-webkit-box",cssClass:"heatmap-gray-label"},{scriptClass:"mstrmojo.VisHeatMapTree",showIndicators:false,isSelectable:false,cssClass:"simple-tree",cssText:"padding-left:15px;padding-right:15px;",buttonNodeCss:"",items:[{n:Ay,buttonNodeWidget:{scriptClass:"mstrmojo.Button",text:A3,cssClass:"heatmap-apply-button",onclick:function(){Au.isUsingSavedColorTheme=true;Au.isUsingDefaultColorTheme=false;var A4=this.domNode;A4.style.backgroundColor="rgba(51, 181, 229, 0.6)";Au.hideInfoBox();Au.hideLegendTooltip();Au._scroller.offset.x.start=0;Au._scroller.offset.x.end=0;Au._scroller.offset.y.start=0;Au._scroller.offset.y.end=0;Au._scroller.scrollTo(0,0,0);var A5=function(){mstrmojo.VisHeatMapAnimation.animate(A4,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});};setTimeout(function(){setTimeout(function(){Au.useSavedColorTheme(A5);var A6=mstrmojo.all[Av];if(A6){A6.needRefresh=true;}},0);},0);}}},{n:Aw,buttonNodeWidget:{scriptClass:"mstrmojo.Button",text:A3,cssClass:"heatmap-apply-button",onclick:function(){Au.isUsingSavedColorTheme=false;Au.isUsingDefaultColorTheme=true;var A4=this.domNode;A4.style.backgroundColor="rgba(51, 181, 229, 0.6)";Au.hideInfoBox();Au.hideLegendTooltip();Au._scroller.offset.x.start=0;Au._scroller.offset.x.end=0;Au._scroller.offset.y.start=0;Au._scroller.offset.y.end=0;Au._scroller.scrollTo(0,0,0);var A5=function(){mstrmojo.VisHeatMapAnimation.animate(A4,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});};setTimeout(function(){setTimeout(function(){Au.useDefaultColorTheme(A5);var A6=mstrmojo.all[Av];if(A6){A6.needRefresh=true;}},0);},0);}}}]},{scriptClass:"mstrmojo.Label",text:Ap,cssDisplay:"-webkit-box",cssClass:"heatmap-gray-label"},{scriptClass:"mstrmojo.VisHeatMapTree",isSelectable:true,cssClass:"simple-tree",cssText:"margin-left:15px;margin-right:15px;",showIndicators:false,defaultSelectionStatus:Am,items:[{n:A2,itemFunction:function(){Au.toggleDeleteButton();}}]},]},{title:Az,scriptClass:"mstrmojo.VisHeatMapPopupPanel",cssText:"position: relative",width:"100%",naviAction:function(){var A4=mstrmojo.all[Av];if(A4){A4.refresh();}},children:[{scriptClass:"mstrmojo.Box",cssText:"padding-left:16px;padding-right:16px; maxHeight:"+parseInt(this.LayoutProperties.DeletedListHeight*0.89)+"px",children:[{scriptClass:"mstrmojo.VisHeatMapTree",height:"100%",heightLimit:parseInt(this.LayoutProperties.DeletedListHeight*0.89),showIndicators:true,showScrollbars:true,id:Av,itemDisplayField:"label",itemChildrenField:"entityChildren",draggable:true,showRoot:true,rootText:An,itemIncludeFunction:function(A4){if(A4&&(A4.deleted||A4.hasChildDeleted)){return true;}else{return false;}},apply:function(A7){var A5=function(){if(this.selectionStatus===1&&this.dataProvider&&this.dataProvider.deleted){this.dataProvider.deleted=false;var BB=this.dataProvider;if(!BB.entityChildren){var A8=[];while(BB.parentEntity){A8.push(Au.getEntityDisplayName(BB));BB=BB.parentEntity;}var A9=Au.props.deletedList;while(A8.length>1){A9=A9[A8.pop()];}var BA=A8.pop();if(A9[BA]===J.dftDel){A9[BA]=J.dftUnDel;}else{delete A9[BA];}}}};var A6=function(BA,A8){A8.apply(BA);if(!BA.childTree){return ;}for(var A9=0;A9<BA.childTree.length;A9++){var BB=BA.childTree[A9];A6(BB,A8);}};A6(this,A5);Au.refreshWidget();var A4=this;window.setTimeout(function(){A4.needRefresh=true;A4.refresh();if(A7){A7();}},50);},dataProvider:Au.root,owner:Au}]},{scriptClass:"mstrmojo.Box",cssText:"background-color:whiteSmoke; position:relative; bottom:0px;font:12pt Roboto,Regular;text-align:center;vertical-align:middle;line-height:55px;border-top: 1px solid rgba(34, 34, 34, 0.18);",height:parseInt(this.LayoutProperties.DeletedListHeight*0.11)+"px",width:"100%",children:[{scriptClass:"mstrmojo.Button",text:Ar,cssClass:"heatmap-tree-button",cssDisplay:"inline-block",cssText:"border-right: 1px solid rgba(34, 34, 34, 0.18); position: absolute; left:0px; top: 0px; height:100%;",width:"49.5%",onclick:function(){var A4=this.domNode;A4.style.backgroundColor="rgba(51, 181, 229, 0.6)";mstrmojo.VisHeatMapAnimation.animate(A4,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});setTimeout(function(){mstrmojo.all[A0].close();},100);}},{scriptClass:"mstrmojo.Button",text:As,cssClass:"heatmap-tree-button",cssDisplay:"inline-block",cssText:"position: absolute; right:0px; top:0px; height: 100%",width:"50.5%",postBuildRendering:function(){mstrmojo.all[Av].register(this);},notify:function(A4){this.set("enabled",A4);},onclick:function(){var A4=this.domNode;A4.style.backgroundColor="rgba(51, 181, 229, 0.6)";Au.hideInfoBox();var A5=function(){mstrmojo.VisHeatMapAnimation.animate(A4,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});};setTimeout(function(){setTimeout(function(){mstrmojo.all[Av].apply(A5);},0);},0);}}]}]}]};this.editorDialog=mstrApp.showDialog(Ao,"HeatMapEditor");},showWaitIcon:function(An){var Am=this.waitIcon;Am.style.display="-webkit-box";Am.style.left="0px";Am.style.top="0px";},hideWaitIcon:function(){var Am=this.waitIcon;Am.style.left="-100000px";Am.style.top="-100000px";},clearChildren:function(Am){var An;if(!Am){return ;}while(An=Am.firstChild){Am.removeChild(An);}},calculateValuesInTree:function(){var Am=this.model.gvs.items[0]?this.model.gvs.items[0].items.length:0;E.call(this);AE(false,false,true,true,this.root,this,Am+1);},refreshWidget:function(){this.showWaitIcon();var An=this;var Am=function(){An.calculateValuesInTree();Ah.call(An);z.call(An);An.renderRectangles();An.renderLegend();var Ao=An.previousSelected;if(Ao){if(Ao.deleted){An.selectionHighlightBox.style.display="none";}else{if(!An.selectAll){An.highlightEntity(An.selectionHighlightBox,An.previousSelected);}}}An.hideWaitIcon();};window.setTimeout(Am,10);},hideInfoBox:function(){if(!this.infoBox){return ;}this.infoBox.style.zIndex="-50";this.infoBox.style.opacity=0;this.previousTooltip=null;},getIdxObjectByTarget:function(Ap){var Ao=mstrmojo.dom.findAncestorByAttr(Ap,"idx",true,this.domNode);var An=Ao&&Ao.value;if(!An){return null;}var Am=this.getObjectByIdx(An);return Am;},showInfoBox:function(Au){if(!Au){return ;}if(!this.infoBox){this.createInfoBox();}var An=Au;if(An===this.previousTooltip){return ;}this.previousTooltip=An;if(this.infoBox.style.display!="block"){this.infoBox.style.display="block";}this.infoBox.style.zIndex="75";this.infoBox.style.opacity=1;var Av=this.highlightBoxWidth,Aq=mstrmojo.dom.position(document.body,true),A6=this.highlightEntity(this.highlightBox,An);if(!A6||isNaN(A6.x)){return ;}this.deleteButton.style.left=A6.x+"px";this.deleteButton.style.top=A6.y+"px";this.tooltipBox.style.width="";this.tooltipBox.innerHTML=Ag(An,this);var Az={x:A6.x-Av,y:A6.y-Av,w:A6.w+Av*2,h:A6.h+Av*2};this.triBox.style.display="block";var Aw=Az.x+(Az.w>>1);var At=Az.y+(Az.h>>1);var Ao=this.triBox.offsetWidth*0.717;var A7=this.tooltipBox.childNodes,A4=A7.length;for(var A1=0;A1<A4;A1++){var A2=A7[A1].childNodes;if(A2[0].offsetWidth+A2[1].offsetWidth+A2[2].offsetWidth>A7[A1].offsetWidth){A2[0].className+=" heatmap-half-width";}}var Ax=this.tooltipBox.offsetHeight;var Ap=this.tooltipBox.offsetWidth;var Ar=false;var A5=((Aw-(Ap>>1))>0)&&(Aw+(Ap>>1))<(Aq.w);var Am=((At-(Ax>>1))>0)&&(At+(Ax>>1))<(Aq.h);var As=10;function Ay(BG,A9,BE,BC){if(BC===undefined){BC=false;}if(!Ar&&(BC||Am)){if(Az.x-Ao-Ap>=0){Ar=true;BG.style.left=Az.x-Ao+"px";A9.style.left=Az.x-Ao-Ap+"px";BE.style.left=A6.x+A6.w+"px";}else{if(Az.x+Az.w+Ao+Ap<=Aq.w){Ar=true;BG.style.left=Az.x+Az.w+Ao+"px";A9.style.left=Az.x+Az.w+Ao+"px";}}if(Ar){var A8=At;var BB=At-Ax/2;if(BC){if(Ax+As*2>Aq.h){Ar=false;}else{var BH=As;var BF=Aq.h-As-Ax;if(BB<BH){BB=BH;}else{if(BB>BF){BB=BF;}}}}BG.style.top=A8+"px";A9.style.top=BB+"px";}}if(!Ar&&(BC||A5)){if(Az.y-Ao-Ax>=0){Ar=true;BG.style.top=Az.y-Ao+"px";A9.style.top=Az.y-Ao-Ax+"px";BE.style.top=A6.y+A6.h+"px";}else{if(Az.y+Az.h+Ao+Ax<=Aq.h){Ar=true;BG.style.top=Az.y+Az.h+Ao+"px";A9.style.top=Az.y+Az.h+Ao+"px";}}if(Ar){var BA=Aw;var BI=Aw-Ap/2;if(BC){if(Ap+As*2>Aq.w){Ar=false;}else{var BD=As;var BJ=Aq.w-As-Ap;if(BI<BD){BI=BD;}else{if(BI>BJ){BI=BJ;}}}}BG.style.left=BA+"px";A9.style.left=BI+"px";}}}Ay(this.triBox,this.tooltipBox,this.deleteButton,false);this.infoBox.style.display="block";if(!Ar){Az={x:Aw,y:At,w:0,h:0};this.triBox.style.display="none";Ao=0;Ay(this.triBox,this.tooltipBox,this.deleteButton,true);}if(!Ar){this.triBox.style.display="none";this.tooltipBox.style.left=Aw-Ap/2+"px";this.tooltipBox.style.top=At-Ax/2+"px";}this.shadowBox.style.left=this.tooltipBox.style.left;this.shadowBox.style.top=this.tooltipBox.style.top;this.shadowBox.style.width=this.tooltipBox.offsetWidth+"px";this.shadowBox.style.height=this.tooltipBox.offsetHeight+"px";this.shelter.style.left=this.tooltipBox.style.left;this.shelter.style.top=this.tooltipBox.style.top;this.shelter.style.width=this.tooltipBox.offsetWidth+"px";this.shelter.style.height=this.tooltipBox.offsetHeight+"px";var A0=this.tooltipBox.childNodes[0].childNodes[0];var A3=window.getComputedStyle(A0,null);},enableGlobalDismiss:function(){var Am=mstrmojo.touchManager;var An=this;this._globalTouchListener=Am.attachEventListener("touchesBegin",this.id,function(Ao){if(!Ao||!Ao.touch||!Ao.touch.target){return ;}var Ar=Ao.touch.target,Aq=document.getElementsByClassName("mstrmojo-DocLayoutViewer-layout")[0],Ap=document.getElementsByClassName("mstrmojo-DocSubsection")[0];if(An.infoBoxPuppet!=Ar&&!mstrmojo.dom.contains(An.infoBox,Ar,true)){An.hideInfoBox();}if(Ar!=Aq&&Ar!=Ap){return ;}if(!this.selectAll){An.doSelection(An.previousSelected);}});},disableGlobalDismiss:function(){var Am=mstrmojo.touchManager;if(this._globalTouchListener){Am.detachEventListener(this._globalTouchListener);delete this._globalTouchListener;}},touchInfoBoxValid:function(An){var Am=An.target;if(target.id==this.id+"-infobox"){return true;}},touchLegendTooltipValid:function AW(Ar){var Ao=Ar.target;if(Ao.id!=this.id+"-color-legend-band"){return false;}var Ap=mstrmojo.dom.position(Ao,true),Am=Ar.clientX-Ap.x,Aq=Ar.clientY-Ap.y,An=this.legendBand;if(Am<An.x||Am>=An.x+An.w-1){return false;}return true;},showLegendTooltip:function(Ap){var A3=Ap.target,At=mstrmojo.dom.position(A3,true),Ar=Ap.clientX-At.x,Aq=Ap.clientY-At.y,Aw=this.legendBand,Au;var Ao=this.colorTheme;if(Ao.tooltipInfo===undefined||Ao.tooltipInfo===null){Ao.createTooltipInfo(this.legendTickCount,Aw.w,this);this.selectedBandIndex=-1;}var Az=Ao.getTooltipInfo(Ar-Aw.x);if(Az!=this.selectedBandIndex){this.renderHilightedBand(Az);}var As=this.colorTheme.tooltipInfo[Az],Am=this.getFormatString(this.colorMetricIndex),A0=this.getMetricName(this.colorMetricIndex),A2=(As.sign===undefined)?" < ":" > ",Ay="<div>"+this.nf.formatByMask(Am,As.sv)+A2+"</div><div class='heatmap-flex'>"+A0+"</div><div>"+A2+this.nf.formatByMask(Am,As.ev)+"</div>";this.legendTooltip.innerHTML=Ay;this.legendTooltip.style.borderColor=M(As.c);this.legendTooltip.style.lineHeight=this.legendTooltip.style.height;this.legendTooltip.style.display="-webkit-box";var Av={w:this.legendTooltip.offsetWidth,h:this.legendTooltip.offsetHeight};var Ax=mstrmojo.dom.position(this.colorLegend,true),An=mstrmojo.dom.position(this.canvas,true),A1=As.r.x+((As.r.w-Av.w)>>1);if(A1<0){A1=0;}else{if(A1>At.w-Av.w){A1=At.w-Av.w;}}this.legendTooltip.style.left=A1+"px";this.legendTooltip.style.top=-35+"px";},hideLegendTooltip:function(){if(this.selectedBandIndex===undefined||this.selectedBandIndex==-1){return ;}this.renderGradientBand(this.legendBand);this.selectedBandIndex=-1;this.legendTooltip.style.left="-100000px";},touchSelectBegin:function(Ao){if(Ao.evt.ctrlKey){this.touchMultiBegin(Ao);return ;}var An=Ao.target;if(!An){return ;}this.lastTouchSelectTarget=An;if(this.touchLegendTooltipValid(Ao)){this.showLegendTooltip(Ao);this.hideInfoBox();}else{this.hideLegendTooltip();var Am;if(this.infoWindowMode){Am=this.getEntityByTouch(Ao,true);}else{Am=this.getEntityByTouch(Ao);}if(!Am){return ;}if(this.timer){cleatTimeout(this.timer);this.timer=null;}if(this.infoWindowMode){this.doSelection(Am);}else{this.showInfoBox(Am);}}},touchSelectMove:function(Ap){if(Ap.evt.ctrlKey){this.touchMultiMove(Ap);return ;}var Ao=Ap.target;if(!Ao){return ;}if(this.touchLegendTooltipValid(Ap)){this.showLegendTooltip(Ap);this.hideInfoBox();}else{this.hideLegendTooltip();var Am;if(this.infoWindowMode){Am=this.getEntityByTouch(Ap,true);}else{Am=this.getEntityByTouch(Ap);}if(!Am){return ;}var An=this;if(this.timer){clearTimeout(this.timer);this.timer=null;}if(this.infoWindowMode){if(this.previousSelected!=Am){this.doSelection(Am);}}else{this.showInfoBox(Am);}}},touchSelectEnd:function(Am){if(Am.evt.ctrlKey){this.touchMultiEnd(Am);}return ;},initScroller:function(Am){this._scrollMovedHandler=Am.attachEventListener("scrollMoved",this.id,function(An){this.hideInfoBox();});this._scrollDoneHandler=Am.attachEventListener("scrollDone",this.id,function(An){this.canvasObject.updateOffsets(Am.origin.x,Am.origin.y);});},multiTouch:true,touchMultiBegin:function(Aq){this.hideLegendTooltip();this.hideInfoBox();var Ao;var An;if(Aq.evt.touches&&Aq.evt.touches.length==2){Ao=Aq.evt.touches[0];An=Aq.evt.touches[1];}else{Ao=Aq;An={pageX:300,pageY:300};}var Ap=Ao.pageX-An.pageX;var Am=Ao.pageY-An.pageY;this.initDiffDiff=Ap*Ap+Am*Am;this.initCenterX=((Ao.pageX+An.pageX)>>1);this.initCenterY=((Ao.pageY+An.pageY)>>1);this.initScrollX=this._scroller.origin.x;this.initScrollY=this._scroller.origin.y;this.relScaleFactor=1;},touchMultiMove:function(Ap){var Ar;var Aq;if(Ap.evt.touches&&Ap.evt.touches.length==2){Ar=Ap.evt.touches[0];Aq=Ap.evt.touches[1];}else{Ar=Ap;Aq={pageX:300,pageY:300};}var At=Ar.pageX-Aq.pageX;var As=Ar.pageY-Aq.pageY;var Au=At*At+As*As;var Aw=((Ar.pageX+Aq.pageX)>>1);var Av=((Ar.pageY+Aq.pageY)>>1);var An=Math.sqrt(Au/this.initDiffDiff);var Ao={x:An*(this.initCenterX+this.initScrollX)-Aw,y:An*(this.initCenterY+this.initScrollY)-Av};var Am={scale:An,offset:Ao};this.relScaleFactor=An;if(this.relScaleFactor*this.scaleFactor>=this.maxScale&&!this.oldTransform){this.oldTransform=Am;}this.applyTransform(Am);},touchMultiEnd:function(Ao){var Am=this.relScaleFactor*this.scaleFactor;if(Am<1){var An={offset:{x:0,y:0},scale:1/this.scaleFactor};this.relScaleFactor=An.scale;this.applyTransform(An,500,this.postScale);}else{if(Am>this.maxScale){this.relScaleFactor=this.maxScale/this.scaleFactor;this.applyTransform(this.oldTransform,500,this.postScale);delete this.oldTransform;}else{this.postScale();}}},relScaleFactor:1,scaleFactor:1,applyTransform:function(An,Ao,Av){var Au=this._scroller;if(Ao===undefined){Ao=0;}Au.scrollEl.style.webkitTransformOrigin="left top";Au.transform="scale("+An.scale+","+An.scale+")";var At=An.offset.x,As=An.offset.y,Am=this.scaleFactor*this.relScaleFactor-1,Ap=this.heatMapSize.h*Am,Ar=this.heatMapSize.w*Am;Au.offset={y:{start:0,end:Ap},x:{start:0,end:Ar}};this._scroller.scrollTo(At,As,Ao);if(Av){var Aq=this;setTimeout(function(){Av.apply(Aq);Aq=null;},Ao);}},postScale:function(){delete this._scroller.transform;this._scroller.scrollTo(this._scroller.origin.x,this._scroller.origin.y,0);this.scaleFactor*=this.relScaleFactor;if(this.scaleFactor>this.maxScale){this.scaleFactor=this.maxScale;}this.refreshWidget();},destroy:function(Am){if(this.canvasObject){this.canvasObject.destroy();delete this.canvasObject;}if(this.controller){this.controller.onorientationChange=this._onorientationChange;delete this._onorientationChange;}this._super(Am);if(this.editorDialog){this.editorDialog.destroy();delete this.editorDialog;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.DynamicClassFactory","mstrmojo.ListDocSelector","mstrmojo.TextBoxDocSelector","mstrmojo.SearchBoxDocSelector","mstrmojo.MetricQualDocSelector","mstrmojo.MetricSliderDocSelector","mstrmojo.AttrQualDocSelector","mstrmojo._DocActionSelector","mstrmojo._IsThresholdConditionTarget");var C={"default":"ListDocSelector",7:"MetricSliderDocSelector",8:"MetricQualDocSelector",9:"SearchBoxDocSelector",10:"TextBoxDocSelector",11:"AttrQualDocSelector"};mstrmojo.DocSelectorViewFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.DocSelectorViewFactory",getDocSelectorClass:function A(F,G,E,H){var D=C[G.defn.style]||C["default"];if(G.defn.ct==="4"){return(mstrmojo.DynamicClassFactory.newComponent(mstrmojo[D],[mstrmojo._DocActionSelector,mstrmojo._IsThresholdConditionTarget],{scriptClass:"mstrmojo.DocActionXSelector"}));}return mstrmojo[D];},newDocSelector:function B(E,G,D,I){var H=this.getDocSelectorClass(E,G,D,I),F={id:G.id,node:G,model:E};return new H(F);}});mstrmojo.DocSelectorViewFactory.CLASS_MAP=C;}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelectorViewFactory","mstrmojo.android.DropDownList","mstrmojo.android.selectors.CheckList","mstrmojo.android.selectors.ListBox","mstrmojo.android.selectors.LinkBar","mstrmojo.android.selectors.ButtonBar","mstrmojo.android.selectors.Slider","mstrmojo.array");var E=mstrmojo.DocSelector.STYLES;var C={};C[E.RADIO]="CheckList";C[E.CHECKBOX]="CheckList";C[E.LIST]="ListBox";C[E.LINK]="LinkBar";C[E.BUTTON]="ButtonBar";C[E.SCROLLER]="Slider";C["9"]="LinkBar";var B=function B(I){var H=I.node.defn;if(H.ct==="3"){var G=I.tks;if(G&&I.defn.dk){I.model.getLayoutUnitDefn(G).dk=true;return false;}}return true;};var D=function D(H){if(H.defn.ct==="3"&&this.isSelectorSupported(H)){if(!H._panelEvtListener){var G=H.model.getUnitInstance(H.tks,1);if(G){H._panelEvtListener=G.attachEventListener("panelSelected",H.id,function(I){this._inSyncPhase=true;this.content.singleSelectByField(I.key,"v");this._inSyncPhase=false;});}}}};var F=function F(G){return new mstrmojo.android.DropDownList({postvalueChange:function(){if(!G._inSyncPhase){G.selectorControlChange(this);}}});};mstrmojo.android.DocSelectorViewFactory=mstrmojo.declare(mstrmojo.DocSelectorViewFactory,null,{scriptClass:"mstrmojo.android.DocSelectorViewFactory",getDocSelectorClass:function A(J,M,I,N){var H=this._super(J,M,I,N);return mstrmojo.DynamicClassFactory.newComponent(H,{_mixinName:"_androidDocSelector",updateWidget:function L(O){if(!B(O)){return null;}return this._super(O);},postBuildRendering:function K(){D(this);},newPulldown:F,getWidgetClass:function G(R,P,O){var Q=C[P];return(Q&&"android.selectors."+Q)||this._super(R,P,O);}},null);}});}());(function(){mstrmojo.requiresCls("mstrmojo.VisTooltip");var B=mstrmojo.css;mstrmojo.VisMicroChartTooltip=mstrmojo.declare(mstrmojo.VisTooltip,null,{scriptClass:"mstrmojo.VisMicroChartTooltip",show:false,adjustBulletNameDisplay:function D(){this.domNode.getElementsByTagName("tr").forEach(function(E){var F=E.cells[0],L=F.firstChild,H=L.firstChild,G=B.getComputedStyle(H),K=H.style,J=(F.offsetWidth-H.offsetWidth-L.lastChild.offsetWidth-parseInt(G.marginRight,10))+"px",I=Math.round((F.offsetHeight-parseInt(G.height,10))/2)+"px";K.marginLeft=J;K.marginTop=I;});},setBorderColor:function C(E){this.domNode.style.borderColor=E;},toggle:function A(E){this._super(E);this.show=!!E;this.domNode.style.visibility=E?"visible":"hidden";}});}());(function(){mstrmojo.requiresCls("mstrmojo.VisChartLine","mstrmojo.EnumRWUnitType","mstrmojo.VisTooltip","mstrmojo.dom","mstrmojo._TouchGestures","mstrmojo.TouchScroller","mstrmojo._HasTouchScroller","mstrmojo.css","mstrmojo.color","mstrmojo.VisTimeSeriesLegend","mstrmojo.VisTimeSeriesTimeSelector");mstrmojo.requiresDescs(5674,8475,8626);var BW=mstrmojo.css,J=mstrmojo.color;var b=1,AZ=2,BK=4;var AW=1,Az=2;var AS={},At=0,AM=false,AH=false,Af=false,Av=false,H=0,u=null,G=5;var A6=20;var BJ=20;var AG=80;var P=false;var e={t:5,r:A6/2,b:5,l:A6/2};var Al=10,p=8;var Ar=false;var AV=mstrmojo.locales.datetime;function Ba(){AM=false;AH=false;Af=false;Av=false;H=0;u=null;}function Bf(){var Bi=this.domNode.parentNode;while(Bi){var Bj=mstrmojo.css.getComputedStyle(Bi);var Bm=Bj.backgroundColor;if(Bm){if(Bm.indexOf("rgba")>=0){var Bl=this.utils.rgbaStr2rgba(Bm);if(Bl&&Bl[4]){return Bl;}}else{if(Bm.indexOf("rgb")>=0){var Bk=J.rgbStr2rgb(Bm);return Bk;}}}Bi=Bi.parentNode;}return[255,255,255];}var AC=0;var h=1;function Ax(){var Bi=this.utils;var Bk=Bf.call(this);var Bj=this.formatProp.backgroundAlpha;Bk=Bi.getRGBWithOpacity(Bk,Bj,this.formatProp.backgroundClr);var Bl=(Bk[0]*299+Bk[1]*587+Bk[2]*114)/1000;if(Bl>150){this.theme=AC;}else{this.theme=h;}}function Bc(Bi){AS[Bi]={isLegendBarOpen:false,legendBarWidth:30,isLegendSelected:false,legendSelectedIndex:-1,timeSelectedIntervalPosition:{},currSelectionIdx:-1,usingCustomInterval:false};}function Bh(Bo){var Bm=this,Bj=Bm.margin,Bk=Bm.getChartWidthOnScreen();var Bl=Bm.utils.getTouchXYOnWidget(Bo.pageX,Bo.pageY,Bm);var Bi=Bl.touchX,Bn=Bl.touchY;if(Bi<Bj.l||Bi>(Bk+Bj.l)||Bn<Bj.t||Bn>this.canvas.height-Bj.b){return false;}return true;}function Am(Bm){if(!Bm){return false;}var Bk=this;var Bj=Bk.utils.getTouchXYOnWidget(Bm.pageX,Bm.pageY,Bk);var Bi=Bj.touchX,Bl=Bj.touchY;if((Bi>0&&Bi<Bk.getWidth())&&(Bl>0&&Bl<Bk.getHeight())){return true;}return false;}function R(Bj){var Bi=mstrmojo.dom.findAncestorByAttr(Bj.target,"clk",true,this.domNode);return Bi||null;}function AB(Bj){var Bi=Bj.length;var Bl=0,Bk;while(Bl<Bi){if(Bj[Bl]){Bk=Bj[Bl].y;break;}Bl++;}for(Bl=0;Bl<Bi;Bl++){if(Bj[Bl]){Bk=Math.min(Bk,Bj[Bl].y);}}return Bk;}function Ad(Bq){var Bl=this.baseModel;var Bm=AS[this.chartID];this.baseModel=this.getModel(Bq.ds)||this.baseModel;var Bi=this.baseModel;this.checkData(Bi);var Bn=Bi.err||Bi.eg;if(Bn){this.renderErrorMessage(Bn);return false;}var Bp=Bi.series,Bj=this.model,Br=Bj.series,Bk=Bp.length,Bt=[],Bo;for(Bo=0;Bo<Bk;Bo++){Bt[Bo]=Bp[Bo];}this.model.categories=Bi.categories;this.model.series=Bt;this.model.colHeaders=Bi.colHeaders;var Bs=this.model.series[0].rv.length;if(this.windowSize!==Bs){Bm.rns=0;Bm.rne=Bs;}this.windowSize=Bs;if(!Bi.vp||!Bi.vp.rl||Bi.vp.rl.length<Bl.vp.rl.length){Bi.vp=Bl.vp;}Af=true;return true;}function BQ(){var Bk=this._scroller,Bj=this.model,Bo=this.margin,Bm=AS[this.chartID],Bn=this.animationCanvas,Bl=this.getChartWidthOnScreen(),Bp=Math.max(this.acContentWidth-Bl,0);var Bi=(Bm.rns!==0&&Bm.rns+1===Bm.rne)?Bm.rns-1:Bm.rns;Bk.origin={x:parseInt(((Bi-this.ACrns)*this.RTX),10),y:0};Bk.hScroll=(Bp!==0&&Bk.noHScroll!==true)||this.scrollPast;if(Bk.hScroll){Bk.offset={x:{start:0,end:Bp},scrollPast:this.scrollPast};}this.utils.translateCSS(-(Bk.origin.x),Bk.origin.y,false,this.animationCanvasDiv);this.utils.translateCSS(-(Bk.origin.x)+this.maxYLblWidth,Bk.origin.y,false,this.xLabelsDiv);}function A7(Bk){var Br=Bk.series,Bi=Bk.colHeaders,Bn=Bi[0].items.length;var Bq=Br[0].hi,Bo=Bi[Bi.length-1].items[Bq[Bq.length-1]],Bl=Bo.f;var Bm=(Bo&&Bl&&Bl.indexOf(Bo.cs)>=0)?","+Bo.cs:"";if(Bm===""&&Bl){Bm=Bl.indexOf("%")>=0?",%":"";}if(Bm===""&&Bl){var Bj=null;if(Bl.indexOf("'")>=0){Bj="'";}else{if(Bl.indexOf('"')>=0){Bj='"';}}if(Bj){var Bp=Bl.substring(Bl.indexOf(Bj)+1);Bm=","+Bp.substring(0,Bp.indexOf(Bj));}}return Bm;}function Z(){var Bk=this.masterSlider,Bn=this.sliderTooltip,Bi=Bn.firstChild,Bj=Bn.lastChild,Bl=Bk.firstChild,Bm=Bk.lastChild;BW.removeClass(Bl,"mstrmojo-timeseries-span-shadow");BW.removeClass(Bm,"mstrmojo-timeseries-span-shadow");Bi.innerHTML="";Bi.style.display="none";Bj.style.display="none";}function O(){var Bj=this,Bi=AS[this.chartID];if(Bi.usingCustomInterval&&Bj.currSelection){Bj._timeSelector.toggleSelected(Bj.currSelection,false);Bj._timeSelector.toggleGlowEffect(Bj.currSelection,false);this.updateIntervalPosition();Bj.currSelection=null;Bi.currSelectionIdx=-1;}if(Av&&u!=="MS"){Bj.showMessage();this.makeSureMasterSliderNotBeyondTheMargin();this.makeSureSliderOnPoint();this.makeSureSelectedIntervalMoreThanTwo();this.makeSureMasterSliderNoOverlap();this.setMasterSliderLayout();window.setTimeout(function(){Bj.reDrawSlaveChart();},10);}else{u=null;}Z.call(this);}function F(Bn){var Bk=this,Bi=Bk.model.categories,Bl=Bi.tp;var Bm=Math.round((Bn-e.l)/Bk.MRTX),Bj=Bi.items[Bm];if(Bl.toString()===Bk.DSS_XML_BASE_FORM_DATE){Bj=Bk.getFormattedDateForTooltip(Bj,true);}return Bj;}function Ac(Bj,Bi){return(Bj.x-Bi.x)*(Bj.x-Bi.x)+(Bj.y-Bi.y)*(Bj.y-Bi.y);}function BZ(Bo,Bi){var Bp=this,Bk=AS[Bp.chartID],Bm=Bp.model,Br=Bp.windowSize,Bj=true,Bl,Bt;if((!Bo&&Bo!==0)||!Bi){Bo=Bk.rns;Bi=Bk.rne;}var Bs=Bi-Bo;Bm.currentRatio=Math.round(Br/((Bs-1)||1));if(Bm.currentRatio>G){var Bn=(G-1)/2;Bl=Math.max(0,Bo-Bn*(Bs-1));Bt=Math.min(Br,Bi+Bn*(Bs-1));if(Bl===0){Bt=G*(Bs-1)+1;}else{if(Bt===Br){Bl=Bt-G*(Bs-1)-1;}}}else{Bl=0;Bt=Br;var Bq=Bt-Bl;}if(Bp.ACrns===Bl&&Bp.ACrne===Bt){Bj=false;}else{Bp.ACrns=Bl;Bp.ACrne=Bt;}return Bj;}function Bd(Bi){var Bk=Bi&&Bi.childNodes&&Bi.childNodes.length,Bj;for(Bj=0;Bj<Bk;++Bj){Bi.removeChild(Bi.firstChild);}}function Ae(){if(this._legend){this._legend.destroy();}if(this._timeSelector){this._timeSelector.destroy();}}mstrmojo.VisTimeSeries=mstrmojo.declare(mstrmojo.VisChartLine,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisTimeSeries",isLinearChart:true,highlightColor:"#ffffff",chartLineColors:["#16b0ff","#ff3729","#04ba22","#ff960e","#ae79de","#cccd25","#19cee0","#a9a9a9","#b3cdef","#ffa796","#98df8a","#ffbf80","#dac3ec","#dac3ec","#a1dfea","#d6d6d6"],switchSeriesOnTouch:false,multiTouch:true,margin:{t:70,r:1,b:50,l:5},SLXP:0,SRXP:0,isTimeSeries:true,maxXLabels:4,scrollerConfig:{bounces:false,showScrollbars:false,useTranslate3d:true},scrollPast:true,isAndroidTab:false,masterContext:null,selectionOrLinkdrillOnRow:false,lastSelectedPoint:null,markupString:'<div id="{@id}" class="mstrmojo-Chart {@cssClass}" style="width:{@width};height:{@height};left:{@left};top:{@top};z-index:{@zIndex};position:absolute;-webkit-transition: 0ms; transition: 0ms; -webkit-transform: translate3d(0px, 0px, 0px);"  mstrAttach:mousedown,mouseup,mousemove,click ><canvas width="{@width}" height="{parseInt(@height) - @masterChartHeight}"></canvas><div style="overflow:hidden;position:absolute;left:0px;top:0px;"><div id="{@id}-animation-canvas-div" class="mstrmojo-timeseries-animation-canvas" style="position:absolute;left:0px;top:0px;width:{@width};height:{@slaveChartHeight+"px"};"><canvas style="position:absolute;left:0px;top:0px;" width="{@width}" height="{parseInt(@height) - @masterChartHeight}"></canvas></div></div><div style="overflow:hidden;position:absolute;left:0px;top:0px;"><div id="{@id}-x-labels-div" class="mstrmojo-timeseries-animation-canvas" style="position:absolute;left:0px;top:0px;width:{@width};height={@slaveChartHeight+"px"}"></div></div><canvas id="{@id}-highlight-canvas" style="position:absolute;left:0px;top:0px;" width="{@width}" height="{parseInt(@height) - @masterChartHeight}"></canvas><div id="{@id}-tooltip"></div><div id="{@id}-time-selector-div"></div><div id="{@id}-legend-bar-div" ></div><div id="{@id}-loading-msg" class="mstrmojo-loading-msg" style="display:none"></div><canvas id="{@id}-master-canvas" style=" position:absolute;left:0px;bottom:0px;" width="{@width}" height="{@masterChartHeight}"></canvas><div id="{@id}-master-div" class="mstrmojo-master-parent-div" width="{@width}" style="position:absolute;bottom:5px" ><div id="{@id}-master-cover-span" style="position:absolute;left:0px;" class="mstrmojo-master-cover-span"></div><div id="{@id}-master-slider" class="mstrmojo-master-slider-div" clk="MS"><canvas id="{@id}-master-img-L" width="20" height="20" style="position:absolute;left:0px" class="mstrmojo-timeseries-master-span" clk="L" ></canvas><canvas id="{@id}-master-slider" width="{@width}" height="{@masterChartHeight}" style="top:0px;left:0px" class="mstrmojo-master-slider-div-top"></canvas><canvas id="{@id}-master-img-R" width="20" height="20" style="position:absolute;right:0px" class="mstrmojo-timeseries-master-span" clk="R" ></canvas></div><div id="{@id}-master-cover-span" style="position:absolute;right:0px;" class="mstrmojo-master-cover-span"></div></div><div id="{@id}-slider-tooltip" style="position:absolute;left:0;top:0;z-index:150;width:{@width};"><div class="timeseries-slider-tooltip"></div><canvas style="position:absolute;left:0px;top:20px;display: none;" width="6px" height="5px"></canvas></div><div id="{@id}-legend-tooltip" class="mstrmojo-Chart-tooltip timeseries-legend-tooltip"></div><span id="textSpan" style="z-index:-10;visibility:hidden;"></span><div id="{@id}-infowindow-anchor" style="position:absolute;width:18px;height:18px;display:block"></div><div id="{@id}-errMsg" class="mstrmojo-message" style="width:{@width};height:{@height};top:0px;left:0px;position:absolute;display:none; z-index:20;"></div></div>',markupSlots:{canvas:function(){return this.domNode.firstChild;},animationCanvasDiv:function(){return this.domNode.childNodes[1].firstChild;},animationCanvas:function(){return this.domNode.childNodes[1].firstChild.firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1];},xLabelsDiv:function(){return this.domNode.childNodes[2].firstChild;},xLabelsDivContainer:function(){return this.domNode.childNodes[2];},highlightCanvas:function(){return this.domNode.childNodes[3];},tooltip:function(){return this.domNode.childNodes[4];},timeSelectorDiv:function(){return this.domNode.childNodes[5];},legendBarDiv:function(){return this.domNode.childNodes[6];},loadingMsg:function(){return this.domNode.childNodes[7];},masterCanvas:function(){return this.domNode.childNodes[8];},masterSlider:function(){return this.domNode.childNodes[9].childNodes[1];},sliderTooltip:function(){return this.domNode.childNodes[10];},legendTooltip:function(){return this.domNode.childNodes[11];},textSpan:function(){return this.domNode.childNodes[12];},infoWindowAnchor:function(){return this.domNode.childNodes[13];},errorMsg:function(){return this.domNode.childNodes[14];}},getTextWidth:function z(Bl,Bk,Bj){this.textSpan.style.font=Bk;this.textSpan.innerHTML=Bl;if(Bj){this.utils.changeElementSize(this.textSpan,"font",Bj);}var Bi=this.textSpan.offsetWidth;return Bi;},getTextWidthByElem:function AQ(Bl,Bj){var Bi=mstrmojo.css.getComputedStyle(Bj);var Bk=Bi.fontStyle+" "+Bi.fontWeight+" "+Bi.fontSize+"/"+Bi.fontVariant+" "+Bi.fontFamily;return this.getTextWidth(Bl,Bk);},getTextHeight:function z(Bl,Bk,Bj){this.textSpan.style.font=Bk;this.textSpan.innerHTML=Bl;if(Bj){this.utils.changeElementSize(this.textSpan,"font",Bj);}var Bi=this.textSpan.offsetHeight;return Bi;},getMaxTextWidth:function(Bk,Bo){var Bn=this,Bj=Bk.length,Bm=0,Bi=0,Bl;for(Bl=1;Bl<Bj;Bl++){Bi=Bn.getTextWidth(Bk[Bl],Bo);Bm=Bi>Bm?Bi:Bm;}return Bm;},getChartWidthOnScreen:function AJ(){var Bi=this.margin;return this.getWidth()-Bi.r-Bi.l-AS[this.chartID].legendBarWidth;},drawChartXYAxis:function W(){var Bk=this.utils,Bi=this.margin,Bj=this.getWidth()-AS[this.chartID].legendBarWidth,Bl=this.canvas.height,Bo=this.context;Bo.save();Bo.strokeStyle=Bk.rgb2rgbStr(this.formatProp.textClr);Bo.lineWidth=1;Bo.globalAlpha=0.8;var Bn=Math.floor(Bi.l)-0.5;Bk.drawLineSet(this,[{x:Bn,y:Bi.t},{x:Bn,y:Bl-Bi.b}],false,Bo);var Bm=Math.floor(Bl-Bi.b)+0.5;Bk.drawLineSet(this,[{x:Bi.l-this.maxYLblWidth,y:Bm},{x:Bj-Bi.r,y:Bm}],false,Bo);Bo.restore();},setMasterSlider:function A5(){var Bk=this.getWidth(),Bo=this.masterCanvas.height-e.t-e.b,Br=this.utils,Bs=this.masterSlider,Bm=Bs.style,Bj=Bs.parentNode,Bp=Bj.firstChild.style,Bi=Bj.childNodes[2].style,Bl=this.model,Bq=this.MRTX,Bn=AS[this.chartID];Bj.style.display="block";Bj.style.height=Bo+"px";Bj.style.width=Bk+"px";Bm.height=Bo+"px";Bp.height=Bo-2+"px";Bi.height=Bo-2+"px";Bp.backgroundColor=Bi.backgroundColor=Br.rgb2rgbStr(this.formatProp.backgroundClr,this.formatProp.backgroundAlpha*0.5);this.drawMasterChartHandler(Bs.firstChild,A6,BJ,true);this.drawMasterChartHandler(Bs.lastChild,A6,BJ,false);Bs.firstChild.style.marginTop=Bs.lastChild.style.marginTop=Math.round((Bo-BJ)/2)+"px";this.calculateSXP(Bn.rns,Bn.rne,true);this.makeSureMasterSliderNotBeyondTheMargin();this.makeSureMasterSliderNoOverlap();this.setMasterSliderLayout();},drawMasterChartHandler:function Ah(Bl,Bk,Bm,Bn){var Bj=this.utils,Bi=Bl.getContext("2d");Bl.width=Bk;Bl.height=Bm;Bi.save();Bi.fillStyle=Bj.rgb2rgbStr(this.formatProp.backgroundClr,0.76);Bj.drawRoundRect(Bi,0.5,0.5,Bk-1,Bm-1,1,true);Bi.strokeStyle=Bj.rgb2rgbStr(this.formatProp.textClr);Bi.lineWidth=1;Bj.drawRoundRect(Bi,0.5,0.5,Bk-1,Bm-1,1);Bi.beginPath();Bi.lineWidth=2;if(Bn){Bi.moveTo(11,6);Bi.lineTo(7,10);Bi.lineTo(11,14);}else{Bi.moveTo(9,6);Bi.lineTo(13,10);Bi.lineTo(9,14);}Bi.stroke();Bi.restore();},drawMasterChartDiv:function Ak(Bq,Br){var Bj=this.masterSlider.childNodes[1],Bi=this.SRXP-this.SLXP+A6;if(Bj.width==Bi){}else{var Bm=e,Bk=this.masterChartHeight,Bo=Bk-Bm.t-Bm.b,Bp=(Bo-BJ)/2;Bj.height=Bo;Bj.width=Bi;var Bs=Bj.getContext("2d");Bs.save();Bs.strokeStyle=this.utils.rgb2rgbStr(this.formatProp.textClr);Bs.lineWidth=1;Bs.beginPath();var Bl=0.5+A6/2;var Bn=Bi-0.5-A6/2;Bs.moveTo(Bl,Bp);Bs.lineTo(Bl,0);Bs.lineTo(Bn,0);Bs.lineTo(Bn,Bp);Bs.moveTo(Bl,Bp+BJ);Bs.lineTo(Bl,Bo);Bs.lineTo(Bn,Bo);Bs.lineTo(Bn,Bp+BJ);Bs.stroke();Bs.restore();}},setMasterSliderLayout:function Aq(){var Bm=this.getWidth(),Bj=this.utils,Bk=this.masterSlider,Bn=Bk.style,Bp=Bk.parentNode,Bo=Bp.firstChild.style,Bl=Bp.childNodes[2].style;Bo.width=(this.SLXP)+"px";Bl.width=(Bm-this.SRXP)+"px";var Bi=(this.SRXP-this.SLXP);Bn.width=(Bi+A6)+"px";Bj.translateCSS(this.SLXP-A6/2,0,false,Bk);this.drawMasterChartDiv();},makeSureMasterSliderNoOverlap:function AT(Bj){var Bi=this.SRXP-this.SLXP;if(Bi<A6){Bi=A6;var Bk=this.getWidth();if(!Bj){Bj=this.SRXP+A6/2===Bk-1?"R":"L";}if(Bj=="L"){this.SRXP=this.SLXP+A6;}else{this.SLXP=this.SRXP-A6;}}},calculateSXP:function AP(Bi,Bj,Bl){if(Bl){this.SLXP=Math.round((this.MRTX*Bi)+e.l);this.SRXP=Math.round((this.MRTX*(Bj-1))+e.l);}else{var Bk=this.SRXP-this.SLXP;this.SLXP=Math.round((this.MRTX*Bi)+e.l);this.SRXP=this.SLXP+Bk;}},makeSureMasterSliderNotBeyondTheMargin:function AN(Bk){var Bj=this.SRXP-this.SLXP;var Bi=this.getWidth();if(this.SLXP<e.l){this.SLXP=e.l;if(Bk){this.SRXP=this.SLXP+Bj;}}if(this.SRXP>Bi-e.r-1){this.SRXP=Bi-e.r-1;if(Bk){this.SLXP=this.SRXP-Bj;}}},makeSureSelectedIntervalMoreThanTwo:function g(){var Bj=this.MRTX,Bi=this.getWidth();if(this.SRXP-this.SLXP<Bj){if(u){if(u==="L"){this.SLXP=this.SRXP-Bj;}else{this.SRXP=this.SLXP+Bj;}}else{if(this.SLXP+Bj<=Bi-e.r){this.SRXP=this.SLXP+Bj;}else{this.SLXP=this.SRXP-Bj;}}}},makeSureSXPNotEqual:function Ap(){var Bj=this.MRTX,Bi=this.getWidth();if(this.SLXP===this.SRXP){if(u){if(u==="L"){this.SLXP-=Bj;}else{this.SRXP+=Bj;}}else{if(this.SRXP+Bj<=Bi-e.r){this.SRXP+=Bj;}else{this.SLXP-=Bj;}}}},makeSureSliderOnPoint:function BY(){return ;var Bk=this.MRTX,Bj=0,Bi=AS[this.chartID];if(u){Bj=Math.round((this.SRXP-this.SLXP)/Bk);if(u==="L"){this.SLXP=this.SRXP-Bj*Bk;}else{if(u==="R"){this.SRXP=this.SLXP+Bj*Bk;}else{this.calculateSXP(Bi.rns,Bi.rne,true);}}}},initScroller:function BL(Bi){if(!Bi.offset&&this.scrollPast){Bi.offset={scrollPast:this.scrollPast};}this._super(Bi);var Bj=this;this._scrollDoneListener=this._scroller.attachEventListener("scrollDone",Bj.id,function(Bm){var Bl=Bj.model,Bo=AS[Bj.chartID],Bp=Bo.rne-Bo.rns,Bk=Bj.ACrns+parseInt(Math.round(Bj._scroller.origin.x/Bj.RTX),10);if(Bp===1){Bk++;}var Bn=Bk+Bp;if(Bk<0){Bo.rns=0;Bo.rne=Bo.rns+Bp;}else{if(Bn>Bl.series[0].rv.length){Bo.rne=Bl.series[0].rv.length;Bo.rns=Bo.rne-Bp;}else{Bo.rns=Bk;Bo.rne=Bn;}}Bj.updateRnsRne();P=false;Bj.incFetchChart();});this._scrollMovedListener=this._scroller.attachEventListener("scrollMoved",Bj.id,function(Bn){if(AM){Bj.hiddenTooltipAndShowTimeSelector();}var Bm=Bj.model,Bp=AS[Bj.chartID],Bl=Bm.series[0].rv.length,Bq=Bp.rne-Bp.rns,Bk=Bj.ACrns+Math.round(Bn.x/Bj.RTX),Bo=Math.min(Bk+Bq,Bl);if(Bk<0){Bk=0;}if(Bo-Bk!=Bq){P=true;}Bj.utils.translateCSS(-Bn.x+Bj.maxYLblWidth,-Bn.y,false,Bj.xLabelsDiv);Bj.calculateSXP(Bk,Bo,P);Bj.makeSureSXPNotEqual();Bj.makeSureMasterSliderNoOverlap();Bj.setMasterSliderLayout();});},getAppLevelTheme:function(){this.theme=h;},initFromVisProps:function(Bi){var Bj=Bi?Bi:{};var Br={};this.getAppLevelTheme();var Bn=this.theme;var Bq=function(Bt,Bs){if(Bn===AC){return Bs;}else{return Bt;}};Br.backgroundClr=Bj.fbg?J.hex2rgb(Bj.fbg):Bq([31,31,31],[247,247,247]);Br.textClr=Bj.flt?J.hex2rgb(Bj.flt):Bq([224,224,224],[51,51,51]);Br.tooltipClr=Bj.ftt?J.hex2rgb(Bj.ftt):Bq([224,224,224],[51,51,51]);Br.backgroundAlpha=Bj.fbt!=undefined?(1-parseInt(Bj.fbt)/100):1;var Bl=function(Bs){if(Bs==true||Bs=="1"||Bs==1||Bs=="true"){return true;}return false;};Br.useCustomAxisScale=Bj.fcas?Bl(Bj.fcas):false;var Bk=function(Bs){if(Bs>Number.MAX_VALUE){Bs=Number.MAX_VALUE;}if(Bs<-1*Number.MAX_VALUE){Bs=-1*Number.MAX_VALUE;}return Bs;};Br.minValue=Bj.fmiav?Bk(parseFloat(Bj.fmiav)):"";Br.maxValue=Bj.fmaav?Bk(parseFloat(Bj.fmaav)):"";Br.condenseLabels=Bj.fcl?Bl(Bj.fcl):true;Br.iconTintClr=Bq([194,194,194],[64,64,64]);Br.secTextClr=Bq([135,135,135],[140,140,140]);Br.secBackgroundClr=Bq([48,48,48],[229,229,229]);Br.tintClr=[43,172,48];this.formatProp=Br;this.chartLineColors=["#16b0ff","#ff3729","#04ba22","#ff960e","#ae79de","#cccd25","#19cee0","#a9a9a9","#b3cdef","#ffa796","#98df8a","#ffbf80","#dac3ec","#dac3ec","#a1dfea","#d6d6d6"];for(var Bo=0;Bo<this.chartLineColors.length;Bo++){var Bp=""+Math.floor(Bo/4)+Bo%4;Bp="fs"+Bp;var Bm=Bj[Bp];if(Bm){this.chartLineColors[Bo]="#"+Bm;}}this.glowColor=this.utils.rgb2rgbStr(this.formatProp.tooltipClr);},getMaxValue:function Ao(){if(typeof this.formatProp.maxValue=="number"){return this.formatProp.maxValue;}else{return this._super();}},getMinValue:function Be(){if(typeof this.formatProp.minValue=="number"){return this.formatProp.minValue;}else{return this._super();}},preBuildRendering:function Aj(){if(this._super){this._super();}this.masterChartHeight=90;this.slaveChartHeight=this.getHeight()-this.masterChartHeight;},buildRendering:function(){this._super();this.slaveChartHeight=this.getHeight()-this.masterChartHeight;},postBuildRendering:function A9(){var Bj=this.model;this.checkData(Bj);var Bm=Bj.err||Bj.eg;var Bl=this.xtabModel,Bi=(Bl&&Bl.docModel);if(Bm){if(Bi&&Bi.prompts){this.model.docModel=Bi;}this.renderErrorMessage(Bm);return ;}else{this.errorMsg.style.display="none";}Ba();Ax.call(this);this.updateSelectionLinkdrillInfo(Bj);if(this.baseModel&&!Bj.vp){this.model=this.baseModel;}this.chartID=this.getChartID(Bi);if(!AS[this.chartID]){Bc(this.chartID);}this.scrollerConfig.scrollEl=this.animationCanvasDiv;this.isAndroidTab=!!mstrApp.isTablet();this.masterContext=this.masterCanvas.getContext("2d");this.renderVisTooltip();this.setMarginTopByTooltipHeight();this.renderLegend();if(this._super){this._super();}this.renderTimeSelector();this.setAnimationCanvasContainer();BQ.call(this);if(Bi&&Bi.prompts){this.model.docModel=Bi;}this.drawSliderTooltipPointer();var Bk=this;if(Bi){this._infoWClosedListener=this.xtabModel.docModel.attachEventListener("infoWindowClosed",this.id,function(Bn){var Bo=Bn.psKey;if(!Bk.hasNonifwTarget&&Bk.selectorTargets&&Bk.selectorTargets[Bo]){Bk.lastSelectedPoint=null;Bk.incFetchChart(true);return ;}});}this.fullScreenListener=mstrmojo.touchManager.attachEventListener("fullScreenStateChange",this.id,function(Bn){this.adjustWidgetOffsets();});this.renderLegendTooltip();this.model.processed=true;},ongridDataChange:function BM(Bi){this.model=this.gridData;},getChartID:function N(Bj){var Bk="";var Bi=Bj?Bj:(this.layoutModel?this.layoutModel:(this.model.layoutModel?this.model.layoutModel:null));if(Bi){Bk=Bi.oid+"_"+Bi.currlayKey+"_"+this.model.k;}else{if(this.model.mid){Bk=this.model.mid;}else{Bk=At++;}}return Bk;},checkData:function Ai(Bj){var Bk=Bj.colHeaders,Bi=Bj.categories;if(!Bk||(Bk&&Bk.length<1)){this.model.err=mstrmojo.desc(8626,"The Time Series widget requires at least one attribute on the row axis and at least one metric on the column axis; optionally, one attribute can be placed above the metrics.");}if(Bk&&Bk.length>=1&&!this.isMetric(Bk[Bk.length-1].items)){this.model.err=mstrmojo.desc(8626,"The Time Series widget requires at least one attribute on the row axis and at least one metric on the column axis; optionally, one attribute can be placed above the metrics.");}if((Bi&&(!Bi.items||Bi.items.length<2))){this.model.err=mstrmojo.desc(8475,"There is not enough data to plot the graph.");}},renderErrorMessage:function Ay(Bi){this.errorMsg.innerHTML=Bi;this.errorMsg.style.display="block";},isMetric:function AK(Bi){if(Bi&&Bi.length>0&&Bi[0].cs!=null){return true;}return false;},updateSelectionLinkdrillInfo:function BD(Bj){var Bi=Bj.rowHeaders,Bm=Bi.length;for(var Bk=0;Bk<Bm;Bk++){var Bl=Bi[Bk];if(Bl.sc&&Bl.sc.tks){this.selectionOrLinkdrillOnRow=true;return ;}if(Bl.lm&&Bl.lm[0]&&Bl.lm[0].links){this.selectionOrLinkdrillOnRow=true;return ;}}},hasPageBy:function BU(){if(this.baseModel&&this.baseModel.phs&&this.baseModel.phs.show){return true;}return false;},setlegendStatus:function k(Bi,Bj){AS[this.chartID].legendBarWidth=Bj;AS[this.chartID].isLegendBarOpen=Bi;},setLegendSelected:function BP(Bj,Bi){AS[this.chartID].isLegendSelected=Bj;AS[this.chartID].legendSelectedIndex=Bi;},getLegendBarDiv:function AA(){return this.domNode.childNodes[6];},getTimeSelectorDiv:function BO(){return this.domNode.childNodes[5];},renderLegend:function BV(){var Bm=this.legendBarDiv;var Bi=this.margin;var Bl=this.chartID;var Bk={placeholder:Bm,model:this.model,utils:this.utils,widget:this,isLegendBarOpen:AS[Bl].isLegendBarOpen,isAndroidTab:this.isAndroidTab,isLegendSelected:AS[Bl].isLegendSelected,legendSelectedIndex:AS[Bl].legendSelectedIndex,top:Bi.t+"px",right:"0px",zIndex:1};var Bj=new mstrmojo.VisTimeSeriesLegend(Bk);Bj.render();this._legend=Bj;},renderTimeSelector:function E(){var Bm=this.timeSelectorDiv;var Bi=this.margin;var Bl=this.chartID;var Bk={placeholder:Bm,offsetx:this.margin.l,widget:this,chartStatus:AS[this.chartID]};var Bj=new mstrmojo.VisTimeSeriesTimeSelector(Bk);Bj.render();this._timeSelector=Bj;},renderVisTooltip:function Bb(){var Bi={placeholder:this.tooltip,cssClass:"timeseries-tooltip"};this._tooltip=new mstrmojo.VisTooltip(Bi);this._tooltip.render();this._tooltip.toggle(false);},renderLegendTooltip:function AU(){var Bi={placeholder:this.legendTooltip,boundary:this.domNode};this._legendTooltip=new mstrmojo.VisTextTooltip(Bi);this._legendTooltip.render();this._legendTooltip.toggle(false);},setAnimationCanvasContainer:function A2(){var Bj=AS[this.chartID],Bi=this.margin;this.itemsContainerNode.style.left=Bi.l+"px";this.xLabelsDivContainer.style.left=(Bi.l-this.maxYLblWidth)+"px";},updateRnsRne:function BC(Bj,Bk){var Bl=AS[this.chartID],Bi=this.model;if((Bj==0||Bj)&&Bk){Bl.rns=Bj;Bl.rne=Bk;}Bi.rns=Bl.rns;Bi.rne=Bl.rne;},drawPreparation:function r(Bq,Bm,Bi){var Bo=this,Bj=this.margin,Bk=Bo.model,Br=Bi-Bm,Bt=Bo.getHeight()-Bo.masterChartHeight,Bu=Bo.animationContext;var Bl=Bo.getChartWidthOnScreen();this.chartWidth=Bl;BZ.call(this,Bm,Bi);var Bp=Bo.ACrne-Bo.ACrns;if(Br<Bq){if(Br>1){Br--;}if(Bp>1){Bp--;}Bq--;}this.itemsContainerNode.style.width=Bl+"px";this.itemsContainerNode.style.height=Bt+"px";this.xLabelsDivContainer.style.width=Bo.maxYLblWidth+Bl+"px";this.xLabelsDivContainer.style.height=Bt+"px";totalChartWidth=(Bq/Br)*Bl;Bo.totalChartWidth=totalChartWidth;var Bn=0;if(Bk.currentRatio>G){Bn=(Bp/Br)*Bl;}else{Bn=totalChartWidth;}this.acContentWidth=Bn;var Bs=G*this.getWidth();if(Bo.animationCanvas.width!==Bs){Ar=true;}Bo.animationCanvas.width=Bs;Bo.RTX=(totalChartWidth-1)/(this.windowSize-1);},drawChart:function A4(){var Bm=this.model;if(Bm.err){return ;}var Bn=this,Bt=Bm.mvalues,Bj=Bn.getWidth(),Bl=Bn.margin,Bq=Bn.utils,Br=Bm.series,Bi=Bm.ylbls,Bp=Bn.windowSize,Bk=AS[this.chartID];if((!Bk.rns&&Bk.rns!=0)||!Bk.rne||Bk.rns<0||Bk.rne>Bp){Bk.rns=Bm.rns;Bk.rne=Bm.rne;if((Bk.rne-Bk.rns)<2){if(Bk.rns>0){Bk.rns=Bk.rne-2;}else{Bk.rne=Bk.rns+2;}}}this.updateRnsRne();var Bo=Bn.masterChartHeight;var Bs=Bn.slaveChartHeight;if(!Br){return ;}if(Bn.isDrawAxis&&Bn.drawYAxisLabels){Bl.l=Bq.getLabelWidthForMargin(Bn,Bm.mls);}Bn.masterCanvas.height=Bo;Bn.masterCanvas.width=Bj;Bq.fillMasterChartBackground(Bn,0,e.t,Bj,Bo-e.t-e.b,e.b,Bn.masterContext);Bn.MRTY=(Bo-e.t-e.b-1-3)/(Bt[Bt.length-1]-Bt[0]);Bn.MRTX=(Bj-e.l-e.r-1)/(Bp-1);Bn.drawSeries(0,Bp,Bk.rns,Bk.rne,Br,Bn.masterContext,true);Bn.setMasterSlider();this.calculateRnsRneFromSXP();if(Bn.canvas.height!=Bs||Bn.animationCanvas.height!=Bs||Bn.highlightCanvas.height!=Bs||Bn.canvas.width!=Bj){Bn.canvas.height=Bn.animationCanvas.height=Bn.highlightCanvas.height=Bs;Bn.canvas.width=Bn.highlightCanvas.width=Bj;Ar=true;Bq.fillBackground(Bn);}this.maxYLblWidth=this.getMaxTextWidth(Bi,this.mstrmojo_Chart_lbl_font)+5;this.drawPreparation(Bp,Bk.rns,Bk.rne);Bn.RTY=(Bs-Bl.t-Bl.b-1-4)/(Bt[Bt.length-1]-Bt[0]);Bn.drawSeries(Bn.ACrns,Bn.ACrne,Bk.rns,Bk.rne,Br,Bn.animationContext,false);},calculateRnsRneFromSXP:function BX(Bm){var Bn=this,Bj=Bn.model,Bi,Bl;var Bk=Bj.rne-Bj.rns;Bl=Math.round((Bn.SRXP-e.l)/Bn.MRTX)+1;Bl=Math.min(Bl,Bn.windowSize);if(Bm){Bi=Bl-Bk;}else{Bi=Math.round((Bn.SLXP-e.l)/Bn.MRTX);}this.updateRnsRne(Bi,Bl);},reDrawSlaveChartImpl:function Aa(){var Bm=this,Bj=Bm.model,Bl=AS[this.chartID],Bi=Bj.series,Bk=Bm.animationContext;this.drawPreparation(Bm.windowSize,Bl.rns,Bl.rne);Bm.drawSeries(Bm.ACrns,Bm.ACrne,Bl.rns,Bl.rne,Bi,Bk,false);BQ.call(Bm);this.removeLabels();AH=true;this.drawLabels();AH=false;},redrawSeries:function K(){var Bo=this,Bl=Bo.model,Bi=Bl.series,Bm=Bo.animationContext,Bk=Bo.windowSize,Bj=Bo.getHeight(),Bn=AS[this.chartID];Bo.animationCanvas.width=Bo.animationCanvas.width;Bo.drawSeries(Bo.ACrns,Bo.ACrne,Bn.rns,Bn.rne,Bi,Bm,false);BQ.call(Bo);this.removeLabels();AH=true;this.drawLabels();AH=false;},incFetchChart:function BG(Bt){var B0=this,Bm=B0.model,Bq=AS[this.chartID],Bj=Bm.series,Bk=B0.animationContext,Bw=B0.margin,Bz=B0.utils,Bi=[],Bv=B0.getWidth(),Bx=B0.getChartWidthOnScreen(),By=B0.canvas.height,Bu=B0.windowSize;var Bo=Bj[0].rv.length;var Bs=Bq.rne-Bq.rns;var Bn=BZ.call(this);var Bp=Bt||Bn||Bq.isLegendSelected||B0.needRedrawVerticalLine;if(Bp){var Bl=B0.ACrne-B0.ACrns;if(Bs<Bo){if(Bs>1){Bs--;}if(Bl>1){Bl--;}Bo--;}totalChartWidth=(Bo/Bs)*Bx;B0.totalChartWidth=totalChartWidth;var Br=0;if(Bm.currentRatio>G){Br=(Bl/Bs)*Bx;}else{Br=totalChartWidth;}this.acContentWidth=Br;B0.animationCanvas.width=B0.animationCanvas.width;B0.drawSeries(B0.ACrns,B0.ACrne,Bq.rns,Bq.rne,Bj,Bk,false);BQ.call(B0);}this.removeLabels();AH=true;this.drawLabels(!Bp);AH=false;},reDrawSlaveChart:function AF(){var Bi=this;this.calculateRnsRneFromSXP();this.reDrawSlaveChartImpl();Av=false;u=null;this.hideMessage();},drawSeries:function A(Bi,Bo,Bs,Bk,Bv,Bj,Bx){var Bt=this,Bu=Bt.utils,Bw=[],Bn=0,Bm=Bv.length;var Br=Bx?1:(Bk-Bs>180?1:2);for(var Bp=Bm-1;Bp>=0;Bp--){Bw=[];Bn=0;for(var Bq=Bi;Bq<Bo;Bq++){var Bl=Bv[Bp].rv[Bq];if(Bl.length===0){Bw[Bn++]=null;continue;}Bw[Bn]={x:Bx?((Bq*Bt.MRTX)+e.l+1):((Bq-Bi)*Bt.RTX),y:Bx?Bu.getMasterYValue(Bt,Bl,e):Bu.getYValue(Bt,Bl)};Bn++;}Bt.drawChartLine(Bw,Bs-Bi,Bk-Bi,Bp,Bj,Bx,Br);}if(!Bx&&Bt.lastSelectedPoint){Bt.highlightSelectedPoint();}},getSerieColor:function t(Bi){var Bj=this.chartLineColors.length;return this.chartLineColors[Bi%Bj];},drawChartLine:function A3(Bi,Bj,Br,B1,Bm,Bn,Bq){var B2=this,Bw=B2.model,Bt=Bw.series[B1],B0=this.utils,Bs=AS[this.chartID];Bm.save();Bm.lineCap="round";Bm.lineWidth=Bq||2;Bm.lineJoin="round";Bm.beginPath();if(this.formatProp&&this.formatProp.useCustomAxisScale){var Bv;if(!Bn){Bv=B2.margin;Bm.rect(0,Bv.t,B2.animationCanvas.width,B2.slaveChartHeight-Bv.b-Bv.t);}else{Bv=e;Bm.rect(0,Bv.t,B2.getWidth(),B2.masterChartHeight-Bv.b-Bv.t);}Bm.clip();}var Bl=this.getSerieColor(B1),Bu=J.hex2rgb(Bl),Bx=Bi.length,By=Br-Bj;Bm.strokeStyle=Bl;if(Bs.isLegendSelected&&!Bn){if(Bs.legendSelectedIndex===B1){var Bk=this.canvas.height-this.margin.b;var Bp=Bj,Bo=Br-1;for(var Bz=0;Bz<Math.ceil((Bx-1-Bj)/(By-1));Bz++){if(mstrmojo.dom.isIE10){B0.drawLineAreaWithSplit(B2,Bi,Bp,Bo,Bk,Bu,Bm,AG);}else{B0.drawLineArea(B2,Bi,Bp,Bo,Bk,Bu,Bm);}Bp=Bo;Bo=Math.min(Bp+By-1,Bx-1);}Bp=Math.max(Bj-By+1,0),Bo=Bj;for(var Bz=Math.ceil((Bj)/(By-1));Bz>0;Bz--){if(mstrmojo.dom.isIE10){B0.drawLineAreaWithSplit(B2,Bi,Bp,Bo,Bk,Bu,Bm,AG);}else{B0.drawLineArea(B2,Bi,Bp,Bo,Bk,Bu,Bm);}Bo=Bp;Bp=Math.max(Bp-By+1,0);}if(mstrmojo.dom.isIE10){B0.drawLineAreaWithSplit(B2,Bi,Bp,Bo,Bk,Bu,Bm,AG);}else{B0.drawLineArea(B2,Bi,Bp,Bo,Bk,Bu,Bm);}Bm.globalAlpha=1;Bm.lineWidth=2;}else{Bm.globalAlpha=0.3;Bm.lineWidth=1;}}if(mstrmojo.dom.isIE10){B0.drawLineSetWithSplit(B2,Bi,false,Bm,AG);}else{B0.drawLineSet(B2,Bi,false,Bm);}Bm.restore();},drawLabels:function V(Bi){this.drawChartXYAxis();if(this._super){this._super(Bi);}var Bj=this.xLabelsDiv.offsetHeight;},drawSelector:function U(Bv,Bt,Bu){var Bm=this.model,Bo=Bm.series[0].rv.length,Bj=Bo,Bl=this.baseModel,Bx=Bl.rowHeaders,Bn=AS[this.chartID],Br=Bn.rns,Bk=Bn.rne;if(Bu){var Bp=parseInt(Bt.rs,10);var Bi=Bt.sr;for(var Bq=0;Bq<Bx.length;Bq++){if(Bx[Bq].id===Bi){Bj=Bx[Bq].l*Bp;break;}}if(Bj<2){Bj=2;}var Bs=mstrmojo.dom.findAncestorByAttr(Bv,"value",true,this.domNode);var Bw=Bk;if(Bw-Bj>=0){Bn.rns=Bw-Bj;Bn.rne=Bw;}else{Bn.rns=0;Bn.rne=Bj<Bo?Bj:Bo;}this.updateIntervalPosition();this.updateRnsRne();}this.refreshChart(true,Af);AH=false;this.hideMessage();},getTouchValue:function BF(Bj,Bo){var Bm=this.model,Bi=this.margin,Bl=AS[this.chartID];var Bn=Bl.rne-Bl.rns>0?Bl.rne-Bl.rns>1?Bl.rne-Bl.rns:2:this.windowSize;var Bk=Math.round(((Bj-Bi.l)*(Bn-1))/(this.getChartWidthOnScreen()));return(Bk<Bn)?Bk:null;},getNearestPoint:function AY(Bs,Br){var Bq=this,Bl=AS[this.chartID],Bm=Bq.margin;var Bn=Bq.utils.getTouchXYOnWidget(Bs,Br,Bq);Bs=Bn.touchX;Br=Bn.touchY;if(Bs<Bm.l||Br<Bm.t||Br>Bq.canvas.height-Bm.b){return ;}var Bk=this.getTouchValue(Bs,Br);var Bj=Bk+Bl.rns;var Bi=(Bk*Bq.RTX)+Bq.margin.l;var Bt,Bo;if(Bl.isLegendSelected){Bo=Bl.legendSelectedIndex;Bt=Bq.utils.getYValue(Bq,Bq.model.series[Bo].rv[Bj]);}else{var Bp=Bq.utils.getSeriesIndexAndYValue(Bq,Bj,Br);Bo=Bp.si;Bt=Bp.y;}return{rowIdx:Bj,serieIdx:Bo,point:{x:Bi,y:Bt}};},highlightPoint:function B(Bs,Bv,Bu){var Bq=this,Bx=Bq.highlightContext,Bw=Bq.highlightCanvas.height,Bp=Bq.margin,Bj=Bq.model,Bt=Bq.utils,Bl=AS[this.chartID],Bn=Bl.isLegendSelected?Bl.legendSelectedIndex:Bq.seriesIndex;this.highlightCanvas.width=this.highlightCanvas.width;if(Bs<0){return ;}var Bm=(Bs*Bq.RTX)+Bp.l;Bx.strokeStyle=this.utils.rgb2rgbStr(this.formatProp.textClr);Bx.lineCap="round";Bx.lineWidth=2;Bx.globalAlpha=1;Bt.drawLineSet(Bq,[{x:Bv,y:this._tooltip.domNode.offsetHeight},{x:Bv,y:Bw-Bp.b}],false,Bx);Bx.fillStyle=Bx.strokeStyle;var By=Bj.series,Bk=By.length,Bo=(Bl.rns===0||Bl.rne-Bl.rns>1)?Bl.rns:Bl.rns-1,Bi=Bo+Bs,Br=Bt.getYValue(Bq,By[Bn].rv[Bi]);if(!AS[this.chartID].isLegendSelected){Bx.strokeStyle=Bq.getSerieColor(Bn);}Bx.fillStyle=Bx.strokeStyle;if(Br>=Bp.t&&Br<=this.canvas.height-Bp.b){Bt.drawArc(Bq,Bm,Br,5,0,Math.PI*2,true,true,Bx);}this.lastHighlightPoint={rowIdx:Bi,serieIdx:Bn,point:{x:Bm,y:Br}};},hideTimeSelectorLabels:function BI(){var Bi=this.domNode.getElementsByClassName("timeseries-intervals");for(var Bj=0;Bj<Bi.length;Bj++){Bi[Bj].style.display="none";}},showTimeSelectorLabels:function Q(){var Bi=this.domNode.getElementsByClassName("timeseries-intervals");for(var Bj=0;Bj<Bi.length;Bj++){Bi[Bj].style.display="block";}},getFormattedDateForTooltip:function Aw(Bp,Bi){if(isNaN(Bp)){return Bp;}var Bm=Bp;try{Bp=this.utils.convertRawValueToMilliseconds(Bp);var Bl=new Date(Number(Bp)),Bj=mstrmojo.locales.datetime;var Bo=Bi?Bj.MONTHNAME_FULL[Bl.getMonth()]:Bj.MONTHNAME_SHORT[Bl.getMonth()];var Bk=Bl.getFullYear().toString();if(Bi){Bm=Bo+" "+Bl.getDate()+", "+Bk;}else{Bm=Bo+"-"+Bl.getDate()+"-"+Bk.substring(2);}}catch(Bn){}return Bm;},showLegendTooltip:function j(Bi){this._legendTooltip.updateContent(Bi);},hiddenLegendTooltip:function BT(){this._legendTooltip&&this._legendTooltip.toggle(false);},getLegendName:function o(Bj,Bl,Bm){var Bo=Bj.length;var Bn=Bl[Bm].hi.length;if(Bo<1){return"null";}if(Bn==Bo){var Bq="";for(var Bk=0;Bk<Bn;Bk++){var Bi=Bj[Bk];var Br="";if(Bi.es){Br=Bi.es[Bl[Bm].hi[Bk]];}else{Br=Bi.items[Bl[Bm].hi[Bk]].n;}if(Bk>0){Bq+=" ";}if(Br!=""){Bq+=Br;}}return Bq;}else{var Bp=Bj[0].items;Bq=Bp[Bm%Bp.length].n;return Bq;}return"null";},getRowHeader:function Ag(Bs){var Bo=this,Bi=Bo.model,Bl=Bi.ri,Bx=Bi.series,Bp=Bi.categories,Br=Bp.tp,Bj=AS[this.chartID],Bw=Bi.rowHeaders,Bu=Bw.length,Bn=[];var Bm=Bp.items[Bs];var Bq=Bl&&Bl[Bs];if(!Bq){return Bn;}if(Br.toString()===Bo.DSS_XML_BASE_FORM_DATE){Bm=Bo.getFormattedDateForTooltip(Bm,true);var Bv={};Bv.n=Bw[Bu-1].n;Bv.v=Bm;Bn.push(Bv);}else{for(var Bk=0;Bk<Bu;Bk++){var Bv={};var Bt=Bw[Bk];Bv.n=Bt.n;Bv.v=Bt.es[Bq[Bk]]||"";Bn.push(Bv);}}return Bn;},setMarginTopByTooltipHeight:function C(){var Bn=this,Bi=Bn.model,Bm=Bn.margin,Br=Bi.series,Bk=Bi.colHeaders;if(this._tooltip){this._tooltip.displayInfo([{n:"legendName",v:"val"},{n:"rowHeaderName",v:"rowHeaderValue"}]);this._tooltip.toggle(true);var Bq=this._tooltip.domNode.offsetHeight+10;this._tooltip.toggle(false);if(Bn.margin.t<Bq){Bn.margin.t=Bq;}}var Bl=Bn.sliderTooltip,Bp=Bl.firstChild,Bj=Bl.lastChild;Bp.innerHTML="name: value";Bp.style.display="block";var Bo=Bp.offsetHeight;Bn.sliderTooltipYPosition=Bn.getHeight()-Bn.masterChartHeight-Bo-7+e.t;Bj.style.top=Bo+"px";Bp.style.display="none";},renderTooltip:function BS(Bs,Bt,Bq){if(Bs<0){this._tooltip.toggle(false);return ;}var B2=this,Bx=B2.model,Bz=B2.margin,Bv=Bx.series,Bu=AS[this.chartID],B0=Bu.isLegendSelected?Bu.legendSelectedIndex:B2.seriesIndex,Bi=(Bu.rns===0||Bu.rne-Bu.rns>1)?Bu.rns:Bu.rns-1,Bo=Bx.colHeaders;var Bw=B2.getWidth();if(!AM){B2.hideTimeSelectorLabels();AM=true;var Bm=mstrmojo.touchManager;this._touchListener=Bm.attachEventListener("touchesBegin",this.id,function(B4){if(!Am.call(B2,B4.touch)){B2.hiddenTooltipAndShowTimeSelector();}});}var Br=Bi+Bs;var B3=Bv[B0].v[Br]?Bv[B0].v[Br]:"null";var Bk=this.getLegendName(Bo,Bv,B0);var Bl=this.getRowHeader(Br),B1="",Bn="";for(var By=0;By<Bl.length;By++){B1+=Bl[By].n;Bn+=Bl[By].v;if(By<Bl.length-1){B1+=" ";Bn+=" ";}}this._tooltip.displayInfo([{n:Bk,v:B3},{n:B1,v:Bn}]);this._tooltip.toggle(true);this._tooltip.doLayout(Bw-10);var Bj=this._tooltip.domNode.offsetWidth,Bp=Bt-Bj/2;if(Bp<5){Bp=5;}else{if(Bp>Bw-5-Bj){Bp=Bw-5-Bj;}}this._tooltip.posTo({x:Bp,y:5});},handleTouchEnd:function T(){this._super();this._tooltip&&this._tooltip.toggle(false);},showMessage:function AO(Bl){var Bk=this.loadingMsg,Bj=Bk.style;Bk.innerHTML=Bl||mstrmojo.desc(5674,"Loading...");Bj.display="block";Bj.opacity=1;var Bi=Math.round(this.getWidth()/2-Bk.offsetWidth/2);var Bm=Math.round(this.getHeight()/2-Bk.offsetHeight/2);this.utils.translateCSS(Bi,Bm,false,Bk);},hideMessage:function L(){this.loadingMsg.style.opacity=0;},showMasterSliderTooltip:function AI(Bi){BW.addClass(Bi.node,"mstrmojo-timeseries-span-shadow");var Bj=this.sliderTooltip;Bj.firstChild.style.display="block";Bj.lastChild.style.display="block";this.renderSliderTooltip(Bi.value==="L"?this.SLXP:this.SRXP);},unrender:function Ab(Bi){if(this._tooltip){this._tooltip.destroy();delete this._tooltip;}if(this._legend){this._legend.destroy();delete this._legend;}if(this._timeSelector){this._timeSelector.destroy();delete this._timeSelector;}if(this._legendTooltip){this._legendTooltip.destroy();delete this._legendTooltip;}if(this._super){this._super(Bi);}},refresh:function BB(){var Bi=this;Bi.unrender();if(!Bi.model.processed){Bi.lastSelectedPoint=null;}Bi.render();},removeLabels:function D(){var Bj=this;Bj.canvas.width=Bj.canvas.width;Bj.utils.fillBackground(Bj);Bj.xLabelsDiv.innerHTML="";var Bi=Bj.domNode.getElementsByClassName("mstrmojo-chart-ylbl-div")[0];if(Bi){Bi.innerHTML="";}},refreshChart:function BH(Bi,Bm){var Bl=this,Bk=Bl.getWidth(),Bj=Bl.getHeight();if(Bl.model.err){return ;}Bl.highlightCanvas.width=Bk;Bl.animationCanvas.width=Bl.animationCanvas.width;if(Bi){Bl.context.clearRect(0,0,Bk,Bj);Bl.removeLabels();if(Bm){Bl.data.processLinearData(Bl);}}Bl.drawChart();this.setAnimationCanvasContainer();Bl.drawLabels();BQ.call(Bl);},timeSelectorOnClick:function d(Br){var Bl=AS[this.chartID];if(!AH){AH=true;var Bp=this,Bq=Br.value,Bk=Br.node,Bo=true;if(Bk===Bp.currSelection&&!Bl.usingCustomInterval){AH=false;return ;}if(Bq==="S"){if(Bl.usingCustomInterval){Bl.usingCustomInterval=false;}else{Bp.updateIntervalPosition();}if(Bp.currSelection){Bp._timeSelector.toggleSelected(Bp.currSelection,false);Bp._timeSelector.toggleGlowEffect(Bp.currSelection,false);}Bp._timeSelector.toggleSelected(Bk,true);Bp._timeSelector.toggleGlowEffect(Bk,true);var Bj=Bp.baseModel,Bi=parseInt(Bk.getAttribute("value"));var Bn=Bj.vp.rl[Bi];if((Bj.k&&Bj.k!==Bn.ds)&&Bp.layoutModel){var Bm=Ad.call(this,Bn);if(!Bm){return ;}}else{Af=false;}Bo=Bk!==Bp.currSelection;Bp.currSelection=Bk;Bl.currSelectionIdx=Bp.currSelection.getAttribute("value");Bp.showMessage();window.setTimeout(function(){Bp.drawSelector(Bk,Bn,Bo);},10);}}},moveMasterSlider:function AL(Bj){var Bm=this,Bi=Bm.model,Bl=Bm.getWidth(),Bn=Math.round(Bj-H),Bk=AS[this.chartID];this.SLXP+=Bn;this.SRXP+=Bn;this.SLXP=Math.round(this.SLXP);this.SRXP=Math.round(this.SRXP);this.makeSureMasterSliderNotBeyondTheMargin(true);this.setMasterSliderLayout();this.calculateRnsRneFromSXP(true);BQ.call(Bm);if(!Bk.usingCustomInterval&&this.currSelection){this.updateIntervalPosition();}},updateIntervalPosition:function q(){var Bl=this,Bi=Bl.model,Bk=AS[this.chartID];if(Bl.currSelection){var Bj=Bl.currSelection.getAttribute("value");Bk.timeSelectedIntervalPosition[Bj]={rns:Bk.rns,rne:Bk.rne};}},drawSliderTooltipPointer:function X(){var Bk=this.sliderTooltip.lastChild,Bj=Bk.getContext("2d"),Bl=Bk.width,Bi=Bk.height;Bj.fillStyle="#ffffff";Bj.beginPath();Bj.moveTo(0,0);Bj.lineTo(Bl,0);Bj.lineTo(Bl/2,Bi);Bj.lineTo(0,0);Bj.closePath();Bj.fill();},renderSliderTooltip:function An(Bk){var Bo=this,Bm=Bo.sliderTooltip,Bq=Bm.firstChild,Bl=Bm.lastChild,Bj=Bo.getWidth();var Bp=Bk;var Bn=F.call(this,Bk);if(Bn==""){Bn="--";}Bq.innerHTML=Bn;var Br=Bq.offsetWidth,Bi=Br/2;if(Bk!==this.SLXP){Bk=this.SRXP-Bi;}else{Bk-=Bi;}if(Bk<0){Bk=0;}else{if(Bk+Br>Bj){Bk=Bj-Br;}}Bl.style.left=(Bp-Bk-3)+"px";Bo.utils.translateCSS(Bk,Bo.sliderTooltipYPosition,false,Bm);},resizeMasterSlider:function a(Bn){var Bm=this,Bj=Bm.getWidth(),Bq=Bm.masterSlider,Bp=Bq.style,Bi=Bq.parentNode.firstChild.style,Bk=Bq.parentNode.childNodes[2].style;var Bo=Bm.utils.getTouchXYOnWidget(Bn,0,Bm);Bn=Bo.touchX;var Bl;if(u==="L"){this.SLXP=Bn;Bl="R";}else{this.SRXP=Bn;Bl="L";}Bm.makeSureMasterSliderNotBeyondTheMargin();Bm.makeSureMasterSliderNoOverlap(Bl);this.setMasterSliderLayout();if(u==="L"){Bm.renderSliderTooltip(this.SLXP);}else{Bm.renderSliderTooltip(this.SRXP);}AS[this.chartID].usingCustomInterval=true;Av=true;},shouldTouchBubble:function AE(Bi){return false;},hiddenTooltipAndShowTimeSelector:function AD(){if(AM){this.handleTouchEnd();AM=false;this.showTimeSelectorLabels();var Bi=mstrmojo.touchManager;Bi.detachEventListener(this._touchListener);delete this._touchListener;}},onCrossWidgetMultitouch:function l(){this.hiddenTooltipAndShowTimeSelector();},touchBegin:function BN(Bk){this.adjustWidgetOffsets();var Bi=this.isMasterSliderTouched(Bk);if(Bi){this.hiddenTooltipAndShowTimeSelector();var Bj=Bi.value;if(Bj==="L"||Bj==="R"||Bj==="MS"){u=Bi.value;H=Bk.pageX;if(Bi.value!=="MS"){this.showMasterSliderTooltip(Bi);}}else{return false;}}else{if(!Bh.call(this,Bk)){this.hiddenTooltipAndShowTimeSelector();if(this.shouldTouchBubble(Bk)){return this.bubbleTouchEvent(Bk);}return false;}}},isMasterSliderTouched:function BR(Bk){var Br=R.call(this,Bk);if(Br&&(Br.value==="L"||Br.value==="R")){return Br;}var Bi=45*this.utils.getScreenZoomFactor();var Bl=this.utils.getTouchXYOnWidget(Bk.pageX,Bk.pageY,this);var Bp=Bl.touchX,Bo=Bl.touchY;var Bq=this.getHeight();if(Bo>Bq||Bo<Bq-this.masterChartHeight){return null;}if(Bp<this.SRXP&&Bp>this.SLXP){return{node:this.masterSlider.childNodes[1],value:"MS"};}var Bm=Math.abs(Bp-this.SLXP);var Bj=Math.abs(this.SRXP-Bp);var Bn=Math.min(Bm,Bj);if(Bn<Bi){if(Bm==Bn){return{node:this.masterSlider.firstChild,value:"L"};}else{if(Bj==Bn){return{node:this.masterSlider.lastChild,value:"R"};}}}else{return null;}return null;},touchSelectBegin:function f(Bj){this.hiddenTooltipAndShowTimeSelector();var Bi=this.isMasterSliderTouched(Bj);if(Bi){if(Bi.value==="L"||Bi.value==="R"||Bi.value==="MS"){u=Bi.value;H=Bj.pageX;}}else{this.handleTouchBegin(Bj.pageX,Bj.pageY);}},touchSelectMove:function A1(Bi){if(u){if(u==="MS"){this.moveMasterSlider(Bi.pageX);}else{this.resizeMasterSlider(Bi.pageX);}H=Bi.pageX;return false;}this.handleTouchMove(Bi.pageX,Bi.pageY);},handleTouchSelectEnd:function Y(Bk){if(u){if(u==="MS"){this.makeSureSliderOnPoint();this.setMasterSliderLayout();this.incFetchChart();}else{O.call(this);}return false;}var Bj=false;if(Bk){var Bi=this.getLastHighlightPoint();Bj=Bi&&this.pointCanBeSelected(Bi.rowIdx,Bi.serieIdx);}if(!Bj){this.handleTouchEnd();if(AM){AM=false;this.showTimeSelectorLabels();}}else{this.seriesIndex=-1;}this.hiddenLegendTooltip();},touchSelectEnd:function A8(Bi){this.handleTouchSelectEnd(Bi);},touchMultiBegin:function A0(Bi){this.handleTouchSelectEnd();},touchSwipeMove:function AR(Bi){if(Bh.call(this,Bi)&&this._super){this._super(Bi);}else{if(u){if(u==="MS"){this.moveMasterSlider(Bi.pageX);}else{this.resizeMasterSlider(Bi.pageX);}H=Bi.pageX;}}},touchSwipeEnd:function As(Bi){if(u){if(u==="MS"){this.makeSureSliderOnPoint();this.setMasterSliderLayout();this.incFetchChart();}else{O.call(this);}return false;}else{if(this._super){this._super(Bi);}}},touchSelectCancel:function s(Bi){this.touchCancel(Bi);},touchCancel:function Bg(Bi){this.touchSelectEnd(Bi);},touchEnd:function M(Bi){if(u&&!Av){Z.call(this);u=null;}this._legend.hiddenSwitcherArrowGlowEffect();return false;},pointCanBeSelected:function x(Bi,Bn){if(this.selectionOrLinkdrillOnRow){return true;}var Bt=this,Bl=Bt.model,Bj=Bl.colHeaders,Bq=Bj.length,Bk=Bl.series[Bn].hi,Bp=Bk.length;for(var Bm=0;Bm<Bq;Bm++){var Br=Bj[Bm];if(Br.es){if(Br.sc&&Br.sc.tks){return true;}if(Br.lm&&Br.lm[0]&&Br.lm[0].links){return true;}}else{if(Br.sc&&Br.sc.tks){return true;}var Bo=Br.lm,Bs=Bo&&Bo[Bk[Bm]];if(Bs&&Bs.links){return true;}}}return false;},getModelK:function w(){var Bi=this.baseModel&&this.baseModel.k;return Bi;},getActionObjList:function BA(Bj,B4){var Bl=[];var Bk=[];var Bu=0;var Bl=[];var Br=null;var Bi=-1;var B8=this,Bp=B8.model,B0=Bp.ri,By=B0[Bj.rowIdx],Bn=Bp.rowHeaders,Bz=Bn.length;for(var B5=0;B5<Bz;B5++){var Bs=Bn[B5];if(Bs.sc&&Bs.sc.tks){if(B4&&(Bs.sc.all==="false"||Bs.sc.all===false)){return null;}var Bx={};Bx.sc=Bs.sc;Bx.es=Bs.es[By[B5]];Bx.eid=B4?"OA:(All)":Bs.eid[By[B5]];Bk.push(Bx);Bu=Bs.at||0;}if(Bs.lm&&Bs.lm[0]&&Bs.lm[0].links&&!Br){Br={};Br.titleInfo=Bs;Br._e={id:Bs.eid[By[B5]],n:Bs.es[By[B5]]};}}var Bw=Bp.colHeaders,Bq=Bw.length,Bo=Bp.series[Bj.serieIdx].hi,B6=Bo.length;for(var B5=Bq-1;B5>=0;B5--){var Bt=Bw[B5];if(Bt.es){if(Bt.sc&&Bt.sc.tks){if(B4&&(Bt.sc.all==="false"||Bt.sc.all===false)){return null;}var Bx={};Bx.sc=Bt.sc;Bx.es=Bt.es[Bo[B5]];Bx.eid=B4?"OA:(All)":Bt.eid[Bo[B5]];Bk.push(Bx);Bu=Bt.at||0;}if(Bt.lm&&Bt.lm[0]&&Bt.lm[0].links&&!Br){Br={};Br.titleInfo=Bt;Br._e={id:Bt.eid[Bo[B5]],n:Bt.es[Bo[B5]]};}}else{if(Bt.sc&&Bt.sc.tks){if(B4&&(Bt.sc.all==="false"||Bt.sc.all===false)){return null;}var Bx={};Bx.sc=Bt.sc;Bx.es=Bt.items[Bo[B5]].n;Bx.eid=B4?"OA:(All)":Bt.items[Bo[B5]].id;Bk.push(Bx);Bu=Bt.at||0;}Bi=B5;}}if(Bk.length>0){Bu=Bu|AZ;this.infoWindowAnchor.style.left=(Bj.point.x-9)+"px";this.infoWindowAnchor.style.top=(Bj.point.y-9)+"px";Bl.push({at:Bu,k:this.getModelK(),scObjList:Bk,anchor:this.infoWindowAnchor});return Bl;}if(!Br){var B1=Bw[Bi],B3=B1.items[Bo[Bi]],Bv=B1.lm[Bo[Bi]];if(Bv&&Bv.links){Br={};Br.titleInfo=B1;Br.mix=Bo[Bi];var Bm=Br;for(var B5=0;B5<Bz;B5++){var Bs=Bn[B5];var B7={};B7.titleInfo=Bs;B7._e={id:Bs.eid[By[B5]],n:Bs.es[By[B5]]};Bm._lp=B7;Bm.axis=AW;Bm=B7;}Bm=Br;for(var B5=Bq-1;B5>=0;B5--){var Bt=Bw[B5];if(Bt.es){var B2={};B2.titleInfo=Bt;B2._e={id:Bt.eid[Bo[B5]],n:Bt.es[Bo[B5]]};Bm._tp=B2;Bm.axis=Az;Bm=B2;}}}}if(Br){Bu=Bu|BK;Bl.push({at:Bu,k:this.getModelK(),node:Br});return Bl;}return null;},getLastHighlightPoint:function S(){return this.lastHighlightPoint||null;},performAction:function BE(Bi){this.hasNonifwTarget=this.hasNoninfowindowTarget(Bi[0]);if(this._super){this._super(Bi);}},touchTap:function Au(Bl){var Bn=this,Bm=this.getLastHighlightPoint(),Bk=Bn.utils.getTouchXYOnWidget(Bl.pageX,Bl.pageY,Bn);var Bj=AM&&Ac({x:Bm.point.x,y:Bm.point.y},{x:Bk.touchX,y:Bk.touchY})<=45*45;if(Bj){Bn.hiddenTooltipAndShowTimeSelector();Bm=this.getLastHighlightPoint();}else{Bm=this.getNearestPoint(Bl.pageX,Bl.pageY);}if(Bh.call(this,Bl)){var Bo=Ac({x:Bm.point.x,y:Bm.point.y},{x:Bk.touchX,y:Bk.touchY})<=45*45,Bp=Bn.pointCanBeSelected(Bm.rowIdx,Bm.serieIdx),Bq=Bn.lastSelectedPoint&&(Bm.rowIdx==Bn.lastSelectedPoint.rowIdx&&Bm.serieIdx==Bn.lastSelectedPoint.serieIdx);if(Bo&&Bp&&!Bq){if(AM){Bn.hiddenTooltipAndShowTimeSelector();}Bn.lastSelectedPoint=Bm;Bn.incFetchChart(true);var Bi=this.getActionObjList(Bm);Bn.performAction(Bi);}else{if(Bo&&!Bp){if(Bj){}else{this.handleTouchBegin(Bl.pageX,Bl.pageY);}}else{if(AM){Bn.hiddenTooltipAndShowTimeSelector();}else{if(Bn.lastSelectedPoint){var Bi=this.getActionObjList(Bm,true);if(Bi){Bn.performAction(Bi);Bn.lastSelectedPoint=null;Bn.incFetchChart(true);}}}}}}},highlightSelectedPoint:function AX(){var Bn=this,Bl=Bn.animationContext,Bk=Bn.utils,Bj=Bn.lastSelectedPoint,Bi=Bj.point,Bm=AS[this.chartID];Bl.save();if(Bm.isLegendSelected&&Bm.legendSelectedIndex!=Bj.serieIdx){Bl.globalAlpha=0.3;}else{Bl.globalAlpha=1;}var Bo=(Bj.rowIdx-Bn.ACrns)*Bn.RTX;Bl.fillStyle=Bn.getSerieColor(Bj.serieIdx);Bl.lineWidth=1;Bk.drawArc(Bn,Bo,Bi.y,4,0,Math.PI*2,true,true,Bl);if(this.theme==AC){Bl.strokeStyle="#ffffff";Bl.lineWidth=2;Bk.drawArc(Bn,Bo,Bi.y,5,0,Math.PI*2,true,false,Bl);Bl.strokeStyle="#000000";Bl.lineWidth=2;Bk.drawArc(Bn,Bo,Bi.y,7,0,Math.PI*2,true,false,Bl);}else{Bl.strokeStyle="#333333";Bl.lineWidth=2;Bk.drawArc(Bn,Bo,Bi.y,5,0,Math.PI*2,true,false,Bl);Bl.strokeStyle="#ffffff";Bl.lineWidth=2;Bk.drawArc(Bn,Bo,Bi.y,7,0,Math.PI*2,true,false,Bl);}Bl.restore();},destroy:function I(){if(this.currSelection){delete this.currSelection;}if(this._touchListener){mstrmojo.touchManager.detachEventListener(this._touchListener);delete this._touchListener;}if(this._scrollDoneListener){this._scroller.detachEventListener(this._scrollDoneListener);delete this._scrollDoneListener;}if(this._scrollMovedListener){this._scroller.detachEventListener(this._scrollMovedListener);delete this._scrollMovedListener;}if(this._infoWClosedListener){this.xtabModel.docModel.detachEventListener(this._infoWClosedListener);delete this._infoWClosedListener;}if(this.fullScreenListener){mstrmojo.touchManager.detachEventListener(this.fullScreenListener);delete this.fullScreenListener;}if(this.selectorTargets){delete this.selectorTargets;}this._super();if(this._tn){delete this._tn;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.VisTimeSeries");mstrmojo.DocVisTimeSeries=mstrmojo.declare(mstrmojo.VisTimeSeries,null,{scriptClass:"mstrmojo.DocVisTimeSeries"});}());(function(){mstrmojo.requiresCls("mstrmojo.VisTimeSeries");mstrmojo.AndroidVisTimeSeries=mstrmojo.declare(mstrmojo.VisTimeSeries,null,{scriptClass:"mstrmojo.AndroidVisTimeSeries"});}());(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.VisMicroChartTable","mstrmojo.dom","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.VisTextTooltip","mstrmojo.VisMicroChartTooltip","mstrmojo.hash","mstrmojo.color","mstrmojo.css","mstrmojo.array");var AG=mstrmojo.color,BT=mstrmojo.css,Af=mstrmojo.hash,BO=Af.forEach,B0=Math,B6=mstrmojo.dom,Bq=mstrmojo.array;var Br=1;var Bh=5;var Ad=30;var BX=0;var B5=1;var u=0,D=1,CE=2,BU=3,A8=4,CL=5;var AF={NORMAL:0,ASCENDING:1,DESCENDING:2};var AO="border:none;background:transparent;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-top:0px;padding-bottom:0px;";var K="border:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-top:0px;padding-bottom:0px;";var h=2;var AW=3;var s=0,q=1;var BI=1,AB=2;var l=0;var BM=0;var B=[];var Ak={};var BV={};var AN=[];var CM=[];var P="leftRow";var BS="rightRow";var CK=1;var CA=0;var AM={left:"microchart-table-text-L",center:"microchart-table-text-M",right:"microchart-table-text-R"};function BP(){var CO=this.domNode.parentNode,CS;while(CO){var CP=mstrmojo.css.getComputedStyle(CO);CS=CP.backgroundColor;if(CS){if(CS.indexOf("rgba")>=0){var CR=this.utils.rgbaStr2rgba(CS);if(CR&&CR[4]){return CR;}}else{if(CS.indexOf("rgb")>=0){var CQ=AG.rgbStr2rgb(CS);return CQ;}}}CO=CO.parentNode;}CS=this.model["background-color"];if(CS){return AG.hex2rgb(CS);}return[255,255,255];}var A5=1;var G=2;var BH=3;var AY=4;function AE(){var CR=this.model.vp.ct;if(!CR||CR===""){var CQ=Object.keys(this.model.vp).length===0;if(CQ){CR="2";}else{CR="0";}}this.theme=parseInt(CR,10);if(this.theme===0){var CP=AG.hex2rgb(this.utils.getAncestorBgColor(this)||"#fff");var CO=this.otherProps.mfBkgOpacity;CP=this.utils.getRGBWithOpacity(CP,CO);this.backgroundColor=this.utils.rgb2rgbStr(CP);var CS=(CP[0]*299+CP[1]*587+CP[2]*114)/1000;if(CS>150){this.theme=AY;}else{this.theme=BH;}}else{if(this.theme===1){this.backgroundColor="#333333";}else{if(this.theme===2){this.backgroundColor="#f9f9f9";}}}this.domNode.style.backgroundColor=this.backgroundColor;}var Ab=[5,8,10];var J=[100,150,200];var Ba=[120,150,180];var Am=[100,150,200];var Ag=[20,40,80];function AC(){Br=this.utils.getScreenZoomFactor();var CO=this.otherProps;CO.mRowHeight=Math.round(Br*CO.mRowHeight);Ad=Math.round(Br*36);this.dropShadowWidth=Math.round(Br*5);Ab=[Math.round(5*Br),Math.round(8*Br),Math.round(10*Br)];J=[Math.round(100*Br),Math.round(150*Br),Math.round(200*Br)];Ba=[Math.round(120*Br),Math.round(150*Br),Math.round(180*Br)];Am=[Math.round(100*Br),Math.round(150*Br),Math.round(200*Br)];Ag=[Math.round(20*Br),Math.round(40*Br),Math.round(80*Br)];}function Bd(CR){if(this.enableSmoothScroll){var CP=this.utils.getTouchXYOnWidget(CR.pageX,CR.pageY,this);var CO=CP.touchX,CQ=CP.touchY;return CO>=this.leftWidth;}return true;}function BR(CR,CS){var CW=CR.style.height;var CO=CR.style.width;var CX=CR.style.textDecoration;var CU=CR.style.display;var CY=CR.style.fontSize;var CV=CR.style.fontWeight;var CQ=CR.style.paddingLeft;var CP=CR.style.paddingRight;var CT=CR.style.boxShadow;CR.style.cssText=CS;CR.style.height=CW;CR.style.width=CO;CR.style.textDecoration=CX;if(CU){CR.style.display=CU;}if(CY){CR.style.fontSize=CY;}if(CV){CR.style.fontWeight=CV;}if(CQ){CR.style.paddingLeft=CQ;}if(CP){CR.style.paddingRight=CP;}if(CT){CR.style.boxShadow=CT;}}function CB(CO){AN=[];BV={};Ak={};B=[];CM=[];CK=1;CA=0;l=0;BM=0;}function Ae(){var CP=this.sparklineProps={};CP.mbShow=true;CP.mbAllPoints=false;CP.mbEndPoints=true;CP.mbRefLine=true;CP.mbRefArea=true;CP.mbAssMetric=true;CP.mbShowTooltip=true;CP.mwSeriesLineCol="#333333";CP.mwRefLineCol="#0066FF";CP.mwRefAreaCol="#DEDEDE";CP.mstrHeader="[Sparkline]";CP.mstrAssMetric="";var CQ=this.barProps={};CQ.mbShow=false;CQ.mbShowLegend=true;CQ.mbRefLine=true;CQ.mbShowTooltip=true;CQ.mwPosCol="#66CC00";CQ.mwNegCol="#FF0000";CQ.mwRefLineCol="#0066FF";CQ.mstrHeader="[Bar]";var CR=this.bulletProps={};CR.mbShow=true;CR.mbRefLine=true;CR.mbRefBands=true;CR.mbShowLegend=true;CR.mbAssMetric=true;CR.mbInvertAxis=false;CR.mbShowTooltip=true;CR.mfMinValue=0;CR.mwPosCol="#000066";CR.mwNegCol="#FF0000";CR.mwRefLineCol="#0066FF";CR.mwBand1="#999999";CR.mwBand2="#BBBBBB";CR.mwBand3="#DEDEDE";CR.mstrHeader="[Bullet]";CR.mstrAssMetric="";CR.mstrBand1="Low";CR.mstrBand2="Medium";CR.mstrBand3="High";var CO=this.otherProps={};CO.mfBkgOpacity=1;CO.mnMetricsPerKPI=1;CO.mbHideColHeaders=false;CO.mbHideTextColumns=false;CO.mbLockLayout=false;CO.mbShowForHiddenGraphs=true;CO.mbInheritFromGridGraph=false;CO.mbInSingleColumnMode=false;CO.mpColumnIDs=[];CO.mpColumnIDsInTreeMode=[];CO.mpColumnPositions=null;CO.mpColumnWidths=null;CO.mpSortKey=null;CO.mbSortDescend=true;CO.mRowHeight=36;}function H(CS){if(!CS){return false;}var CP=this;var CR=mstrmojo.dom.position(this.domNode);var CO=CS.pageX-CR.x,CQ=CS.pageY-CR.y;if((CO>0&&CO<CP.getWidth())&&(CQ>0&&CQ<CP.getHeight())){return true;}return false;}function Bg(CR){var CP=parseInt(CR,10).toString(16),CO=CP.length,CQ;for(CQ=CO;CQ<6;CQ++){CP="0"+CP;}CP="#"+CP;return CP;}function AX(){this.rows=[];var CO;for(CO=0;CO<CM.length;CO++){this.rows[CO]={model:CM[CO],rowIdx:CO,selected:{},rowRef:{}};}}function k(CS){var CO={isSubTtl:false,hasSubTtlAttr:false,firstSubTtlIdx:-1},CQ,CP;for(CQ=0;CQ<CS.length;CQ++){if(CS[CQ].etk!=undefined&&CS[CQ].etk<0){CO.firstSubTtlIdx=CQ;CO.hasSubTtlAttr=true;for(CP=CQ+1;CP<CS.length-1;CP++){var CR=CS[CP].etk;if(CR===undefined||CR>=0){break;}}CO.isSubTtl=CP===CS.length-1;break;}}return CO;}function A6(CR){var CP=CR.attrIDArray;var CO=CR.model,CQ=CO.gts,CT=CQ.row;var CU=CT[0].id;CP[0]=CU;for(var CS=1;CS<CT.length;CS++){if(CU==CT[CS].id||CU==CT[CS].id+":CG"){}else{CU=CT[CS].id;CP[CS]=CU;}}}function F(CP,CT){var CQ=CT.split("_");var CS=CP;for(var CR=0;CR<CQ.length;CR++){var CO=CQ[CR];CS=CS.childrenTreeNodeList[CO];}return CS;}function U(CP,CU){var CQ=CU.split("_");var CT=CQ[CQ.length-1];if(CT>0){CQ[CQ.length-1]=CT-1;var CS=CP;for(var CR=0;CR<CQ.length;CR++){var CO=CQ[CR];CS=CS.childrenTreeNodeList[CO];}return CS;}else{return null;}return null;}function A3(CP,CT,CU){var CQ=CT.split("_");var CS=CP;for(var CR=0;CR<=CU;CR++){var CO=CQ[CR];CS=CS.childrenTreeNodeList[CO];}return CS;}function Au(CO){if(CO===true||CO==="true"){return true;}return false;}function Bk(CO,CR){if(!CO){return ;}if(CO.level<=CR){CO.needExpand=true;}else{CO.needExpand=false;}var CQ=CO.childrenTreeNodeList;for(var CP=0;CP<CQ.length;CP++){Bk(CQ[CP],CR);}}function T(){this.tree={};this.tree.childrenTreeNodeList=[];this.tree.needExpand=true;this.tree.treePath="";this.tree.level=-1;this.attrIDArray=[];this.currSelectedObj=[];this.lastSelectedObj=[];this.initDockedHeadersDone=false;}function B4(CR,CP){var CQ=CR.length;if(CP.length!=CQ){return false;}for(var CO=0;CO<CQ-1;CO++){if(CR[CO]!=CP[CO].idx){return false;}}return true;}function Al(Cq){var C1=this.tree.childrenTreeNodeList,CO=this.model,Cl=CO.ghs.rhs,CR=CO.gts.row,Ca=CO.gvs,Cr=CO.vp.exps&&CO.vp.exps.tree,C0,Ce,CT,Cm,Cf;var CY=Cr&&Au(Cr.allExpanded);var Cw=this.mcStatus;var Ci=-1;var CQ=Cw?Cw.expandedEntryArray:Cr&&Cr.expandedEntry;this.attrIDArray=[];var Cb=this.attrMapIdx;A6(this);var CP=Cl.items&&Cl.items[0]&&Cl.items[0].items&&Cl.items[0].items.length;var CU=Cb.length-1;this.maxTreeLevel=CU-2;Ci=Cw?Cw.expandToLevel:CY?this.maxTreeLevel-1:-1;var Cu=[],Cn=[];for(var Cz=0;Cz<CP;Cz++){Cu.push(-1);}var Cp=-1;var Cc=Cl.items.length;if(this.mcStatus&&this.mcStatus.currSelectedObj){this.currSelectedObj=this.mcStatus.currSelectedObj;}for(var Cz=0;Cz<Cc;Cz++){var CV=Cl.items[Cz].items;var Ch=B4(Cn,CV);if(!Ch){Cp++;}else{continue;}var CS=k(CV),Co=CS.isSubTtl,Ck=CS.hasSubTtlAttr;ignoreRow=Ck&&!Co;if(!ignoreRow){CT=Co?CS.firstSubTtlIdx:CU;for(var Cy=0;Cy<CU-1;Cy++){var Cs=Cb[Cy];var CZ=this.currSelectedObj[Cy];if(Cu[Cs]!=CV[Cs].idx&&CT>Cs){CT=Cs;}if(Cs>=CT){C0=C1;Cm=null;Ce="";for(var Cx=1;Cx<=Cy;Cx++){Cf=C0.length-1;if(Cx==Cy){Cm=C0[Cf];}C0=C0[Cf].childrenTreeNodeList;Ce+=Cf;Ce+="_";}if(Co&&Cm){Cm.model=CM[Cp];break;}else{var Cg={};Cg.es=[];Cg.es.push(CR[Cy].es[CV[Cs].idx]);var Cv=CR[Cy].es[CV[Cs].idx];Cg.id=Cv.id;Cg.n=Cv.n;Cg.model=CM[Cp];Cg.selected=false;Cg.childrenTreeNodeList=[];Cg.attrElemIdx=CV[Cs].idx;Cg.isLeaf=(Cy==this.maxTreeLevel);Cg.level=Cy;var Cj=C0.length;Cg.preSiblingCount=Cj;Cg.preSibling=Cj>0?C0[Cj-1]:null;Ce+=C0.length;Cg.treePath=Ce;C0.push(Cg);Cg.needExpand=Cy<=Ci?true:false;if(CZ==Cg.id){this.currSelectedObj[Cy]=Cg;}}}}for(var Cy=0;Cy<CP;Cy++){Cu[Cy]=CV[Cy].idx;}}for(var Cy=0;Cy<CP;Cy++){Cn[Cy]=CV[Cy].idx;}}if(Ci<0&&CQ){for(var Cz=0;Cz<CQ.length;Cz++){var Cd=CQ[Cz];var CW=this.tree;for(var Cy=0;Cy<Cd.length;Cy++){var C3=Cd[Cy].element;var C2=Bq.find(CW.childrenTreeNodeList,"id",C3);if(C2<0){break;}CW=CW.childrenTreeNodeList[C2];}CW.needExpand=true;}}var CX=[];CX.push(this.tree);var CW=null;while(CX.length>0){CW=CX.pop();var C1=CW.childrenTreeNodeList;var Ct=C1.length;for(var Cz=Ct-1;Cz>=0;Cz--){CW=C1[Cz];CX.push(CW);CW.postSiblingCount=Ct-CW.preSiblingCount;CW.isLeaf=CW.childrenTreeNodeList.length==0;}}}function BJ(CS,CR){var CT=CS.length;var CO=0;for(var CP=0;CP<CT;CP++){if(CS[CP].type==A8){CR-=Ad;}else{CO+=CS[CP].colWidth;}}var CQ=CR/CO;for(var CP=0;CP<CT;CP++){if(CS[CP].type==A8){CS[CP].colWidth=Ad;}else{CS[CP].colWidth=Math.round(CS[CP].colWidth*CQ);}}return CQ;}function Ah(CY,CO,Cb){var CV=CY[CO],Cf=CV.model,Ca=Cf.elms,Cg=CV.treeNode,CR=this.colInfos,CO=CV.rowIdx,Cd=CR.length,CZ=CR[Cb],Cb=CZ.colIdx;if(CZ.type==u||CZ.type==D){if(this.isTreeMode){var Ci="";for(var Ch=0;Ch<Cg.es.length;Ch++){Ci+=Cg.es[Ch].n;}if(Ci.indexOf("&lt;")>=0){Ci=Ci.replace(/&lt;/g,"<");Ci=Ci.replace(/&gt;/g,">");}return this.getTextWidth(Ci,CZ.valueCssClass,null,null,null,Cg.level==0?true:false);}else{attr=Ca[CZ.order];var Ci=attr?attr.n:"";if(Ci.indexOf("&lt;")>=0){Ci=Ci.replace(/&lt;/g,"<");Ci=Ci.replace(/&gt;/g,">");}return this.getTextWidth(Ci,CZ.valueCssClass,null,null,null,false);}}if(CZ.type==CE){var Cj=-1;var Cc=-1;if(this.isKPI){Cc=parseInt(CZ.order)%this.otherProps.mnMetricsPerKPI;var Cj=CV.model.metricIdx+Cc;}else{if(CZ.type==CE){Cj=parseInt(CZ.order);Cc=Cj;}}var CW="";var CX="";if(Cf.refv[Cc].ti===undefined){if(Cf.refv[Cc].ts===4){CW="<img src='"+Cf.refv[Cc].v+"'/>";}else{CW=Cf.refv[Cc].v;}}else{try{var CQ=this.model;var CU=CQ.th[""+Cj];var CT=Cf.refv[Cc].ti;if(Cf.refv[Cc].ty===4){var Ce;if(CU[CT]&&CU[CT].n){Ce=CU[CT].n;}else{Ce=Cf.refv[Cc].v;}if(Ce.indexOf(":")>=0){}else{var Ck;try{Ck=mstrApp.getConfiguration().getHostUrlByProject(mstrApp.getCurrentProjectId());}catch(CS){Ck="";}Ce=Ck+Ce;}CW="<img src='"+Ce+"'/>";}else{if(CU[CT]&&CU[CT].n&&CU[CT].cni!==undefined){CW=CU[CT].n;}else{CW=Cf.refv[Cc].v;}}CX=CQ.css[CU[CT].cni].n;}catch(CS){if(!CW){CW=Cf.refv[Cc].v;}}}var CP="";if(CX){CP=CZ.valueCssClass+" "+CX;}else{if(this.valueCssClass){CP=CZ.valueCssClass+" "+this.valueCssClass;}else{CP=CZ.valueCssClass;}}return this.getTextWidth(CW,CP,null,null,null,this.isTreeMode&&Cg.level==0?true:false);}return 0;}function AL(){var CR=this.colInfos,Ch=this.getWidth();if(this.enableSmoothScroll){var CY=this.isTreeMode?E.call(this,true,50):this.rows;var Ca=Math.min(CY.length,50);var Cc=this.metricColumnsSpacing;var Cp=Ab[Cc];for(var Cm=0;Cm<this.colInfos.length;Cm++){var CZ=this.colInfos[Cm];if(CZ.type==u||CZ.type==D||CZ.type==CE){var CS=0;for(var Co=0;Co<Ca;Co++){var Ci=Ah.call(this,CY,Co,Cm);if(Ci>CS){CS=Ci;}}var CQ=CZ.title;var Cg=Math.round(CQ.length/2);var Cq=CQ.slice(0,Cg);var CX=CQ.slice(Cg);var Cn=this.getTextWidth(Cq,CZ.headerCssClass,null,null,null,true,false);var CU=this.getTextWidth(CX,CZ.headerCssClass,null,null,null,true,false);var CW=Math.max(Cn,CU);var CP=0;if(CS>CW){CP=Math.min(CS,Am[Cc]);}else{CP=Math.min(CS+Ag[Cc],CW,Am[Cc]);}CZ.colWidth=Math.round(CP+Cp);CZ.padding.left=Math.floor(Cp/2);CZ.padding.right=Math.ceil(Cp/2);}else{if(CZ.type==A8){CZ.colWidth=Math.round(Ad);}else{if(CZ.type==CL){CZ.colWidth=Math.round(this.dropShadowWidth);}else{CZ.colWidth=Math.round(J[Cc]+Cp);CZ.padding.left=Math.floor(Cp/2);CZ.padding.right=Math.ceil(Cp/2);}}}}this.leftWidth=0;for(var Co=0;Co<this.attrColumnCount;Co++){this.leftWidth+=CR[Co].colWidth;}this.rightWidth=0;var CT=0;for(var Co=this.attrColumnCount;Co<CR.length;Co++){this.rightWidth+=CR[Co].colWidth;if(CR[Co].colWidth>CT){CT=CR[Co].colWidth;}}if(this.leftWidth+this.rightWidth<this.getWidth()){var Ce=BJ(this.colInfos,this.getWidth());this.dropShadowDiv.style.display="none";this.enableSmoothScroll=false;this.scrollerConfig.hScroll=false;this.leftWidth=this.getWidth();this.rightWidth=0;this.leftChart.style.width=this.getWidth()+"px";}else{if(this.attrColumnCount>=0){var Cl={order:"",type:CL,title:"",titleAlign:AM.center,colWidth:this.dropShadowWidth,padding:{l:0,r:0},headerCssClass:this.headerCssClass,valueCssClass:"",colIdx:this.colInfos.length};this.colInfos.splice(this.attrColumnCount,0,Cl);this.rightWidth+=this.dropShadowWidth;}var CV=this.leftWidth+CT+this.dropShadowWidth;if(this.getWidth()<CV){var Cf=Math.min(CT+this.dropShadowWidth,0.75*this.getWidth());this.leftWidth=this.getWidth()-Cf;var Cb=this.treeColumnIdx>-1?(this.leftWidth-Ad)/(this.attrColumnCount-1):this.leftWidth/this.attrColumnCount;for(var Co=0;Co<this.attrColumnCount;Co++){CR[Co].colWidth=CR[Co].type==A8?Ad:Cb;}}this.dropShadowDiv.style.display="block";this.scrollerConfig.hScroll=true;this.leftChart.style.width=this.leftWidth+"px";this.rightChart.style.width=this.rightWidth+"px";this.itemsContainerNode.style.width=(this.getWidth()-this.leftWidth)+"px";this.itemsContainerNode.style.left=this.leftWidth+"px";}var CO=[];var CR=this.colInfos,Cd=CR.length;for(var Co=0;Co<Cd;Co++){CO[CR[Co].colIdx]=Co;}for(var Co=0;Co<Cd;Co++){var CZ=CR[Co];CZ.colIdx=Co;if(this.colInfos[Co].type==A8){this.treeColumnIdx=Co;}if(CZ.rowH){CZ.rowH.colIdx=Co;}if(CZ.CGColIdx){CZ.CGColIdx=CO[CZ.CGColIdx];}if(CZ.associateAttr){for(var Cm=0;Cm<CZ.associateAttr.length;Cm++){CZ.associateAttr[Cm]=CO[CZ.associateAttr];}}}}else{var Ck=CR.length;if(this.otherProps.mpColumnWidths.length>0){BJ(this.colInfos,Ch);}else{if(this.treeColumnIdx>-1){Ck--;Ch-=Ad;}var Cj=Math.round(Ch/Ck);for(var Co=0;Co<CR.length;Co++){if(CR[Co].type==A8){CR[Co].colWidth=Ad;}else{CR[Co].colWidth=Cj;}}}}}function d(Co){var Ci=this.model,CY=Ci.gts.row,Ca=Ci.gts.col,CS=Ca[Co].es,CV=Ci.vp?Ci.vp:{},Cg=this.getWidth(),CP=this.otherProps;CP.mpColumnWidths=CV.cw?CV.cw.split(","):(CV.tcw?CV.tcw.split(","):[]);var Cb=CP.mpColumnWidths;if(Cb.length!=B.length){Cb=[];CP.mpColumnWidths=[];}this.colInfos=[];this.showGauge=false;for(var Ck=0;Ck<B.length;Ck++){if(B[Ck]=="GaugeChart"){this.showGauge=true;}}this.isAllAttrSelectable=true;for(var Ck=0,Cn=0;Ck<B.length;Ck++){var CO=B[Ck];var CZ={order:CO,colWidth:0,padding:{},headerCssClass:" ",valueCssClass:" ",sortOrder:AF.NORMAL};if(CO=="LineChart"){CZ.type=BU;CZ.title=this.sparklineProps.mstrHeader;CZ.titleAlign=AM.center;CZ.padding.left=Math.round(3*Br);CZ.padding.right=Math.round(3*Br);}else{if(CO=="BarChart"){CZ.type=BU;CZ.title=this.barProps.mstrHeader;CZ.titleAlign=AM.center;CZ.padding.left=Math.round(3*Br);CZ.padding.right=Math.round(3*Br);}else{if(CO=="GaugeChart"){CZ.type=BU;CZ.title=this.bulletProps.mstrHeader;CZ.titleAlign=AM.center;CZ.padding.left=Math.round(3*Br);CZ.padding.right=Math.round(3*Br);}else{if(CO=="Metric"){if(CP.mbHideTextColumns){this.treeColumnIdx=-1;continue;}CZ.type=D;CZ.title=mstrmojo.desc(1158,"Metrics");CZ.titleAlign=AM.left;CZ.valueCssClass+=" "+this.valueCssClass;if(Ca[Co].lm&&Ca[Co].lm.length>0){CZ.lm=Ca[Co];l++;}}else{if(CO!=parseInt(CO)){if(CP.mbHideTextColumns){this.treeColumnIdx=-1;continue;}CZ.associateAttr=[];CZ.type=u;CZ.title=Ak[CO];CZ.titleAlign=AM.left;CZ.valueCssClass+=" "+this.valueCssClass;if(this.isTreeMode){this.treeColumnIdx=Cn;this.colInfos[Cn]={order:CO,type:A8,title:"",titleAlign:AM.center,colWidth:0,padding:{},headerCssClass:this.headerCssClass,valueCssClass:"",colIdx:this.treeColumnIdx};CZ.associateAttr.push(Cn);Cn++;}else{for(var Cj=0;Cj<CY.length;Cj++){var CX=CY[Cj];var Ch=(CO==CX.id)||(CO==CX.id+":"+CX.fid),Cf=(CO==CX.id+":CG");isAttrForm=false;var CT=CX.fs;for(var Cd=0;Cd<CT.length;Cd++){if(CO==CX.id+":"+CT[Cd].id){isAttrForm=true;break;}}if(Cf&&CX.colIdx>=0){this.colInfos[CX.colIdx].CGColIdx=Ck;this.colInfos[CX.colIdx].isFirstCGCol=true;CZ.CGColIdx=CX.colIdx;}if(Ch||isAttrForm){CX.colIdx=Cn;CZ.rowH=CX;CZ.id=CX.id.split(":")[0];CZ.fid=CX.fid;if(CP.mbInheritFromGridGraph&&CX.cni!==undefined&&Ci.css.length>CX.cni){CZ.titleAlign=Ci.css[CX.cni].n;}var Cm=(CO==CX.id+":"+CX.fid);if(Cm){BM++;}if(CX.sc&&CX.sc.tks&&CX.sc.tks!=""){CZ.sc=CX.sc;}else{this.isAllAttrSelectable=false;}if(CX.lm&&CX.lm.length>0&&CX.lm[0].links){CZ.lm=CX;if(Cm){l++;}}var CT=CX.fs;for(var Cd=0;Cd<CT.length;Cd++){var CQ=CX.id+":"+CT[Cd].id;if(CQ==CO){CZ.fid=CT[Cd].id;continue;}else{for(var Ce=0;Ce<B.length;Ce++){if(B[Ce]==CQ){CZ.associateAttr.push(Ce);break;}}}}break;}}}}else{CZ.type=CE;var CU=parseInt(CO);if(CU>=CS.length){continue;}CZ.mid=CS[CU].oid;if(CP.mbInheritFromGridGraph&&CS[CU].cni!==undefined&&Ci.css.length>CS[CU].cni){CZ.titleAlign=Ci.css[CS[CU].cni].n;}else{CZ.titleAlign=AM.right;}if(CO=="0"){if(this.sparklineProps.mstrAssMetric){CZ.title=this.sparklineProps.mstrAssMetric;}else{if(this.isKPI){CZ.title="";}else{CZ.title=CS[CU].n;}}}else{if(CO=="2"){if(this.bulletProps.mstrAssMetric){CZ.title=this.bulletProps.mstrAssMetric;}else{if(this.isKPI&&this.showGauge){CZ.title="";}else{CZ.title=CS[CU].n;}}}else{CZ.title=CS[CU].n;}}if(Ca[Co].lm[CU].links){CZ.lm=Ca[Co];l++;}}}}}}CZ.valueCssClass+=" microchart-table-text "+CZ.titleAlign;CZ.headerCssClass+=" microchart-table-text "+CZ.titleAlign+" "+this.headerCssClass;if(Cb.length>0){CZ.colWidth=parseFloat(Cb[Ck]);}CZ.colIdx=Cn;this.colInfos[Cn++]=CZ;}var CR=this.colInfos;if(B.length==0){CR[0].title=CY[0].n;for(var Ck=1;Ck<CY.length-CK;Ck++){CR[Ck].title=CY[Ck].n;}}if(this.enableSmoothScroll){var Cl=function(Cp){switch(Cp){case u:return -1;case A8:return -1;case D:return -1;default:return 1;}};var CW=function(Cq,Cp){if(Cl(Cq.type)*Cl(Cp.type)>0){return Cq.colIdx<Cp.colIdx?-1:1;}else{return Cl(Cq.type);}};CR.sort(CW);var Cc=CR.length;for(var Ck=0;Ck<Cc;Ck++){if(Cl(CR[Ck].type)>0){this.attrColumnCount=Ck;break;}}}}function L(CT){this.initModel();var Cp=this.model,Cb=Cp.gts.col,CV=Cp.gts.col[0].es.length,Cu=Cp.gts.row,CZ=Cu.length,Ci=Cp.gvs.items.length,CX=Cp.vp?Cp.vp:{};if(CZ===0||CV===0||Cb.length>1){var Ch="The widget requires at least two attributes on row axis and one metrics in column axis OR exactly one attribute on row axis and at least one metric on column axis for KPI List mode.";Cp.err=mstrmojo.desc(8424,Ch);return ;}if(this.isTreeMode){if(Cu.length<3){this.isTreeMode=false;}}var Cd=Cu.length;var CU=Cu[Cd-1].id;Cd=Cd-2;while(Cd>=0){if(CU==Cu[Cd].id){CK++;Cd--;}else{break;}}if(CZ<=CK){this.isKPI=true;}for(var Cs=0;Cs<Cu.length;Cs++){if(Cu[Cs].otp==1){Cu[Cs].otp=-1;while(++Cs<Cu.length&&Cu[Cs].otp==1){Cu[Cs].id+=":CG";Cu[Cs].n=" ";Cu[Cs].otp=-1;}}}for(var Cs=0;Cs<Cu.length;Cs++){if(Cu[Cs].fs&&Cu[Cs].fs.length>0){for(var Cn=0;Cn<Cu[Cs].fs.length;Cn++){if(Cn==0){Ak[Cu[Cs].id+":"+Cu[Cs].fs[Cn].id]=Cu[Cs].n;}else{Ak[Cu[Cs].id+":"+Cu[Cs].fs[Cn].id]=" ";}}}if(Cu[Cs].fid&&Cu[Cs].fid.length>0){var CP;CP=Cu[Cs].n;Ak[Cu[Cs].id]=CP;Ak[Cu[Cs].id+":"+Cu[Cs].fid]=CP;}else{Ak[Cu[Cs].id]=Cu[Cs].n;}}var CQ=-1;for(var Cs=0;Cs<Cb.length;Cs++){if(Cb[Cs].n="Metrics"){CQ=Cs;var CW=Cb[Cs].es;for(var Cr=0;Cr<CW.length;Cr++){Ak[CW[Cr].oid]=CW[Cr].n;BV[CW[Cr].n]=Cr;BV[CW[Cr].oid]=Cr;AN[Cr]=CW[Cr].n;}}}var Cy=true;if(!CX.co&&!CX.tco){Cy=false;}else{B=CX.tco?CX.tco.split(","):CX.co.split(",");Cy=Q.call(this);if(!Cy){CX.cw=null;CX.tcw=null;}}if(!Cy){B=[];if(!this.isKPI){BB.call(this);}else{B3.call(this);}}var Cx=this.otherProps;if(Cx.mpSortKey&&Cx.mpSortKey.length>0){var Co="";for(var Cs=0;Cs<Cx.mpSortKey.length;Cs++){if(Cx.mpSortKey[Cs]=="_"){break;}Co+=Cx.mpSortKey[Cs];}var Ce=BV[Co];if(Ce>=0){Cx.mpSortKey=Ce;}else{for(var Cj in Ak){if(Ak[Cj]==Co){Cx.mpSortKey=Cj;break;}}if(!Ak[Cx.mpSortKey]){Cx.mpSortKey=null;}}}else{Cx.mpSortKey=null;}if(Cx.mbInheritFromGridGraph&&(this.theme==BH||this.theme==AY)){try{var CO=Cp.headercni?Cp.headercni:0;var CS=Cp.valuecni?Cp.valuecni:(Cp.css.length-1);var CY=function(Cz){if(Cz){return Cz;}return"";};this.headerCssClass=CY(Cp.css[CO].n);this.valueCssClass=CY(Cp.css[CS].n);if(this.valueCssClass&&this.valueCssClass.length>0){var Cm=this.textSpan;Cm.className=this.valueCssClass;Cm.style.font="";this.fontSize=mstrmojo.css.getStyleValue(Cm,"fontSize");}var Ct=this.getTextHeight("a",this.valueCssClass,true);if(Ct>Cx.mRowHeight){Cx.mRowHeight=Ct;}}catch(Cv){}}var CR=function(C0,Cz,C3,C1,C4){var C5=C3;var C2;if(C1){C5="["+C3+"]";}if(C0[Cz]===C5){C2=mstrmojo.desc(C4,C3);if(C1){C2="["+C2+"]";}C0[Cz]=C2;}};if(CT){var Ck=this.colInfos,Ca=Ck.length;for(var Cs=0;Cs<Ca;Cs++){var Cl=Ck[Cs],Cf=Cl.order,Cq=Cl.rowH;if(Cq){for(var Cr=0;Cr<Cu.length;Cr++){var Cc=Cu[Cr];var Cg=(Cq.id==Cc.id)&&(Cq.fid==Cc.fid);if(Cg){Cc.colIdx=Cq.colIdx;Cl.rowH=Cc;if(Cc.sc&&Cc.sc.tks&&Cc.sc.tks!=""){Cl.sc=Cc.sc;}if(Cc.lm&&Cc.lm.length>0&&Cc.lm[0].links){Cl.lm=Cc;}break;}}}if(Cl.type==A8){this.treeColumnIdx=Cs;}}}else{d.call(this,CQ);}if(!this.isKPI){AR(this);}else{CF(this);}var Cw=Cx.mnMetricsPerKPI;var Cp=this.model;if(this.isKPI&&CV<Cw){var Ch="Metric per KPI should be at least 1 or less than or equal to the total number of Metrics in the widget";Cp.err=Ch;return ;}if(CM.length==0){var Ch="No data returned for this view, this might be because the applied filter excludes all data";Cp.err=Ch;return ;}this.showMinLabel=Bz.call(this);this.buildRows();Cp.processed=true;}function Q(){for(var CU=0;CU<B.length;CU++){if(B[CU]=="LineChart"||B[CU]=="BarChart"||B[CU]=="GaugeChart"||B[CU]=="Metric"){continue;}if(B[CU].length<3){return false;}var CO=B[CU];var CW=CO.length;if(CO[CW-2]=="|"){B[CU]=CO=CO.substring(0,CW-2);}if(!Ak[CO]){return false;}else{if(BV[CO]!==undefined){B[CU]=BV[CO]+"";}else{if(this.isKPI){B[CU]="0";}}}}if(this.enableSmoothScroll){return false;}var CQ=this.model,CR=CQ.gts.col[0].es;var CV=[],CT=[];if(this.isTreeMode){CV=this.otherProps.mpColumnIDsInTreeMode;if(CV.length==1){return false;}for(var CU=0;CU<CR.length;CU++){var CZ=CR[CU].oid;CT.push(CZ);}}else{CV=this.otherProps.mpColumnIDs;if(this.isKPI){if(CV.length<=1){return false;}CT.push("Metric");var CP=this.otherProps.mnMetricsPerKPI;if(CP>2){for(var CU=0;CU<CP;CU++){if(CU%CP<=1){continue;}var CZ=CR[CU].oid;CT.push(CZ);}}}else{if(CV.length==1){return false;}var Cc=CQ.gts.row,CY=Cc.length-1,Ca=0;for(var CU=0;CU<CY;CU++){var CX=Cc[CU],Cb=CX.fs&&CX.fs.length;CT.push(CX.id);for(var CS=1;CS<Cb;CS++){CT.push(CX.fs[CS].id);}Ca+=Cb;}for(var CU=0;CU<CR.length;CU++){var CZ=CR[CU].oid;CT.push(CZ);}}}if(CT.length!=CV.length){return false;}for(var CU=0;CU<CT.length;CU++){var CZ=CT[CU];if(Bq.indexOf(CV,CZ)==-1){return false;}}return true;}function B3(){var CU=0;var CP=this.otherProps,CQ=this.sparklineProps,CS=this.barProps,CT=this.bulletProps;B[CU++]="Metric";var CV=CP.mnMetricsPerKPI;if(isNaN(CV)){CV=1;}var CO=false;if(CQ.mbShow){CO=true;B[CU++]="LineChart";}if(CS.mbShow){CO=true;B[CU++]="BarChart";}if((!CO&&CP.mbShowForHiddenGraphs)||(CO&&CQ.mbAssMetric)){B[CU++]="0";}if(CV>=7){if(CT.mbShow){if(CT.mbAssMetric){B[CU++]="2";}B[CU++]="GaugeChart";}else{if(CP.mbShowForHiddenGraphs){for(var CR=3;CR<=CV&&CR<=7;CR++){B[CU++]=""+(CR-1);}}}for(var CR=8;CR<=CV;CR++){B[CU++]=""+(CR-1);}}else{for(var CR=3;CR<=CV;CR++){B[CU++]=""+(CR-1);}}}function BB(){var CT=0;var CO=this.model,CS=CO.gts.row,CV=CO.gts.col;var CU=0;if(this.isTreeMode){B[CT++]=CS[0].id;}else{for(var CQ=0;CQ<CS.length-CK;CQ++){if(CS[CQ].fs&&CS[CQ].fs.length>0){for(var CR=0;CR<CS[CQ].fs.length;CR++){B[CT++]=CS[CQ].id+":"+CS[CQ].fs[CR].id;}}else{if(CS[CQ].fid&&CS[CQ].fid.length>0){B[CT++]=CS[CQ].id+":"+CS[CQ].fid;}else{B[CT++]=CS[CQ].id;}}}}for(var CQ=0;CQ<CV.length;CQ++){if(CV[CQ].n="Metrics"){CU=CV[CQ].es.length;}}var CP=false;if(this.sparklineProps.mbShow){CP=true;B[CT++]="LineChart";}if(this.barProps.mbShow){CP=true;B[CT++]="BarChart";}if((!CP&&this.otherProps.mbShowForHiddenGraphs)||(CP&&this.sparklineProps.mbAssMetric)){B[CT++]="0";}if(CU>=7){if(this.bulletProps.mbShow){if(this.bulletProps.mbAssMetric){B[CT++]="2";}B[CT++]="GaugeChart";}else{if(this.otherProps.mbShowForHiddenGraphs){for(var CQ=3;CQ<=7&&CQ<=CU;CQ++){B[CT++]=""+(CQ-1);}}}for(var CQ=8;CQ<=CU;CQ++){B[CT++]=""+(CQ-1);}}else{for(var CQ=3;CQ<=CU;CQ++){B[CT++]=""+(CQ-1);}}}function AR(C1){var C7=C1.model,Cw=C7.gts.col[0].es,DD=C7.gts.row,Cj=C7.gvs.items,Cu=C7.gvs.items.length,Ct=C7.ghs.rhs.items;var CY=DD.length;var C0=DD.length-CK;var DF=C0-1;var Ch=0;C1.attrMapIdx=[];var Cz=C1.attrMapIdx;for(var C4=0;C4<CY;C4++){Cz[C4]=Ch;if(!DD[C4].fs||DD[C4].fs.length==0){Ch++;}else{Ch+=DD[C4].fs.length;}}Cz[CY]=Ch;var Cx=DD[C0].dn||DD[C0].n;for(var C4=0;C4<=C0;C4++){var Ce=DD[C4],CS=Ce.sc&&Ce.sc.tks&&Ce.sc.tks!="";if(CS){Ce.ctlMatrix={map:[],selectedIdx:{}};}}var CV=function(DM,DL){var DJ=[];for(var DK=0;DK<DM.length;DK++){DJ[DK]=DM[DK];}return DJ;};var C3=[];var DB=0,C9=0;var CR=[];var Cs=0;for(DB=0;DB<Ct.length;DB++){if(DB===0){C3[0]=[];for(C9=0;C9<Ct[DB].items.length;C9++){C3[0][C9]=Ct[0].items[C9].idx;if(C3[0][C9]<0&&DD[C9].otp==-1){C3[0][C9]=DD[C9].es.length+C3[0][C9-1];}if(Ct[0].items[C9].cet){var Cv=Ct[0].items[C9].cet;var DE=DD[C9].ctlMatrix;if(DE){DE.selectedIdx[C3[0][C9]]=true;}}}CR=CV(C3[0]);Cs=CR.length;continue;}var Cr=Ct[DB].items;var DA=Cr.length;for(C9=1;C9<=DA;C9++){CR[Cs-C9]=Cr[DA-C9].idx;if(CR[Cs-C9]<0&&DD[Cs-C9].otp==-1){var C8=0;for(;C8<Cz.length;C8++){if(Cs-C9<Cz[C8]){break;}}CR[Cs-C9]=DD[C8-1].es.length+Cr[DA-C9-1].idx;}if(Cr[DA-C9].cet){var Cv=Cr[DA-C9].cet;if(B[DA-C9]==Cv+":CG"){Cv+=":CG";}var DE=DD[DA-C9].ctlMatrix;if(DE){DE.selectedIdx[CR[Cs-C9]]=true;}}}C3[DB]=CV(CR);}var CX=function(DP){var DL={};var DJ=0;for(var DN=0;DN<DD.length-CK;DN++){var DK=DD[DN].fs.length;if(DK<1){DK=1;}var DR=DD[DN].id;if(C3[DP][DJ]<0){DL[DR]="";}else{DL[DR]=DD[DN].es[C3[DP][DJ]];}if(DL[DR]==undefined){DL[DR]={n:""};}var DQ=DD[DN].fid;if(DQ&&DQ.length>0){DL[DR+":"+DQ]=DD[DN].es[C3[DP][DJ]];}for(var DM=0;DM<DK;DM++){var DS="";if(DD[DN].fs&&DD[DN].fs[DM]){DS=DD[DN].fs[DM].id;}if(DS&&DS.length>0){var DO=DR+":"+DS;DL[DO]=DD[DN].es[C3[DP][DJ]];}DJ++;}}return DL;};var C2={v:[],rv:[],thClr:[],hi:[0]};var Ca=[];var Ck=null;var Cq=[{items:[{n:Cw[0].n}]}];var DH=[],Cb=[],C9=0,Cf=0,DG=false,Ci=false;function CZ(DJ,DK){if(DJ.length!=DK.length){return true;}var DM=Cz[C0]-1;if(DM>=DJ.length){DM=DJ.length-1;}for(var DL=DM;DL>=0;DL--){if(DJ[DL]!=DK[DL]){return true;}}return false;}for(var DB=0;DB<=Cu;DB++){if(DB===0){Cb=C3[DB];}else{if((Ci=(DB===Cu||CZ(Cb,C3[DB])))||DG){if(DG&&!Ci){}else{if(!C1.isTreeMode){for(var Cy=0;Cy<C0;Cy++){var DE=DD[Cy].ctlMatrix;if(DE){DE.map[Cf]=C3[DB-1][Cy];}}}CM[Cf]={isTotal:DG,refv:Ca,elms:Ck,tr:C2.v[C2.v.length-1],model:{categories:{items:DH,tn:Cx},mtrcs:{items:AN},colHeaders:Cq,series:[C2],rowHeaders:[{n:DD[C0].n}]}};Cf++;if(DB===Cu){break;}}C2={v:[],rv:[],thClr:[],hi:[0]};Ca=[];DH=[];Cb=C3[DB];C9=0;DG=false;}}var DI=C1.otherProps;for(var C5=0;C5<Cj[DB].items.length;C5++){if(!Ca[C5]){Ca[C5]={};}Ca[C5]=Cj[DB].items[C5];}Ck=CX(DB);if(DI.mpSortKey!=null){var Cm=(DI.mpSortKey!=parseInt(DI.mpSortKey));if(Cm){sortValue=Ck[DI.mpSortKey].n;}else{sortValue=parseFloat(Ca[DI.mpSortKey].rv);}}if(!C1.isTreeMode){var Cl=function(DJ){return(DJ.id&&DJ.id.substring(0,1)==="D")||(DJ.id===undefined&&DJ.n==="Total");};for(var C8=DF;C8>=0;C8--){var Cd=DD[C8].es[C3[DB][Cz[C8]]];if(Cd&&Cl(Cd)){DG=true;break;}}if(DG){continue;}var Cc=DD[C0].es[C3[DB][Cz[C0]]];if(Cc&&Cl(Cc)){continue;}}var CO="";var Cp=Cz[C0];var C6=null;var Cg=1;try{for(var C5=0;C5<CK;C5++){C6=DD[C0+C5];if(C6.fs&&C6.fs.length>0){Cg=C6.fs.length;}else{Cg=1;}for(var CW=0;CW<Cg;CW++){CO+=" "+C6.es[C3[DB][Cp]].n;Cp++;}}}catch(DC){}DH[C9]=CO;var Co=Cj[DB].items[0];C2.v[C9]=Co.v;C2.rv[C9]=Co.rv;var CQ=C7.th&&C7.th["0"];var CP=Co.ti;if(CP!=undefined&&Co.ty==2&&CQ[CP].cni!=undefined&&DI.mbInheritFromGridGraph){this.textSpan.className=C7.css[CQ[CP].cni].n;var Cn=mstrmojo.css.getComputedStyle(this.textSpan);C2.thClr[C9]=Cn.backgroundColor;if(C2.thClr[C9]=="rgba(0, 0, 0, 0)"){C2.thClr[C9]=null;}}else{C2.thClr[C9]=null;}C9++;}if(DI.mpSortKey!=null){if(C1.isTreeMode){}else{var CU=CM.length;for(var DB=0;DB<CU;DB++){for(var C9=0;C9<CU-1;C9++){if((DI.mbSortDescend&&CM[C9].sortV<CM[C9+1].sortV)||(!DI.mbSortDescend&&CM[C9].sortV>CM[C9+1].sortV)){var CT=CM[C9];CM[C9]=CM[C9+1];CM[C9+1]=CT;}}}}}if(C1.isTreeMode){Al.call(C1,C3);}}function CF(CX){var Cf=CX.model,CV=Cf.gts.row,CY=Cf.gts.col,CR=CV[CV.length-1].es,Cn=CY[0].es,Cc=Cf.ghs.rhs.items,Ce=Cc.length,CZ=Cf.gvs.items,Ca=[];for(var Ck=0;Ck<Cn.length;Ck++){if(!Ca[0]){Ca[0]={items:[]};}Ca[0].items[Ck]=[{n:Cn[Ck].n}];}var Cp=CZ[0].items.length;var CW=[];var Cq=[];var Cj=Cf.gts.row[0].dn||Cf.gts.row[0].n;var Cd=[];var CP=CX.otherProps.mnMetricsPerKPI;if(isNaN(CP)){CP=1;}var Cl=0;var CT=[];for(var Ck=0;Ck+CP<=Cp;Ck=Ck+CP){var CQ=[];var CS=[];CW[Cl]={v:CQ,rv:CS,hi:[0]};var Ci=[];Cd[Cl]={refv:Ci};for(var Ch=0;Ch<CP;Ch++){Cd[Cl].refv[Ch]=CZ[Ce-1].items[Ck+Ch];}CT[Cl]=Ck;Cl++;}for(var Ck=0;Ck<Ce;Ck++){var Cm=Cc[Ck].items;var Cb=Cm[Cm.length-1].idx;if(isNaN(Cb)){console.log("idx is not a number!"+Cb);Cq[Ck]=CR[Ck].n;}else{if(Cb<0){Cq[Ck]="";}else{Cq[Ck]=CR[Cb].n;}for(var Cg=2;Cg<=Cm.length&&Cg<=CV.length;Cg++){var Cr=Cm[Cm.length-Cg].idx;if(!isNaN(Cr)){Cq[Ck]=CV[CV.length-Cg].es[Cr].n+" "+Cq[Ck];}}}var CU=0;for(var Ch=0;Ch+CP<=Cp;Ch=Ch+CP){CW[CU].v[Ck]=CZ[Ck].items[Ch].v;CW[CU].rv[Ck]=CZ[Ck].items[Ch].rv;CU++;}}var Co=CW.length;for(var Ck=0;Ck<Co;Ck++){var CO={};CO[Cf.gts.row[0].id]=Ca[0].items[Ck*CP][0];if(Cf.gts.row[0].fid){CO[Cf.gts.row[0].id+":"+Cf.gts.row[0].fid]=Ca[0].items[Ck*CP][0];}CO.Metric=Ca[0].items[Ck*CP][0];CM[Ck]={refv:Cd[Ck].refv,elms:CO,tr:CW[Ck].v[CW[Ck].v.length-1],model:{categories:{items:Cq,tn:Cj},mtrcs:{items:AN},series:[CW[Ck]],colHeaders:[{items:Ca[0].items[Ck]}],rowHeaders:[{n:CV[0].n}]},metricIdx:CT[Ck]};}}function Bz(){var CT=false;var CP=this.otherProps;if(this.showGauge){var CS=this.bulletProps.mfMinValue;var CR=CM.length;for(var CQ=0;CQ<CR;CQ++){var CO=CM[CQ].refv[2];if(CO&&CO.rv<CS){CT=true;CP.mRowHeight=CP.mRowHeight>36?CP.mRowHeight:36;break;}}}return CT;}function g(CR){var CO=this.getChartWithScrollBar()._scroller;var CU=CR!=undefined?CR:CO&&CO.origin&&CO.origin.y;var CT=this.rowOffsetHeight;var CQ=this.startCnt+parseInt(CU/CT)+this.dockedHeaderRows.length;var CP=CU%CT;var CS=B1.call(this,CQ);return{rowInfo:CS,treeNode:CS.treeNode,pastOffset:CP,rowIdx:CQ};}function B1(CP){if(CP<0){CP=0;}var CO=this.rows.length-1;if(CP>CO){CP=CO;}return this.rows[CP];}function E(CO,CS){var CP=[];var CU=null;var CW=[];var CX=this.tree.childrenTreeNodeList;var CQ=CX.length;for(var CR=CQ-1;CR>=0;CR--){CP.push(CX[CR]);}var CT=0;while(CP.length>0){CU=CP.pop();var CV={treeNode:CU,model:CU.model,rowIdx:CT,selected:CU.selected,rowRef:{}};CW.push(CV);if(!CO){CU.rowIdx=CT++;}if(CS&&CT>=CS){break;}if(CU.needExpand||CO){CX=CU.childrenTreeNodeList;CQ=CX.length;for(var CR=CQ-1;CR>=0;CR--){CP.push(CX[CR]);}}}return CW;}function O(){var CW=this.getChartWithScrollBar()._scroller;var CU=CW&&CW.origin&&CW.origin.y;var CO=this.rowOffsetHeight;var CQ=this.startCnt+parseInt(CU/CO);var CP=Math.min(this.chartTableMaxHeight,parseInt(this._leftChart.itemsContainerNode.style.height));var CV=this.startCnt+parseInt((CU+CP)/CO);if(CQ<0){CQ=0;}if(CV>=this.rows.length){CV=this.rows.length-1;}var CT=-1;for(var CR=CQ;CR<=CV;CR++){var CS=this.rows[CR].treeNode.level;if(CS>CT){CT=CS;}}return CT;}function BY(CO){var CQ=CO&&CO.childNodes&&CO.childNodes.length;for(var CP=0;CP<CQ;++CP){CO.removeChild(CO.firstChild);}}function Bn(CO){return CO<0;}function x(CP,CO,CQ){if(this.expandToLevel==CP){return ;}Bk(this.tree,CP);this.expandToLevel=CP;this.rowsNeedRebuild=true;this.reRenderChartWithAnchor(CO,CQ);An.call(this);this.reBuildDH(CP);}function Aq(CQ,CV){var CW=CQ.treeNode;CW.needExpand=true;this.expandToLevel=-1;var CX=this.getChartWithScrollBar()._scroller;var CP=CQ.rowIdx;this.reRenderChart(CX.origin);An.call(this);if(CP==this.startCnt+parseInt(CX.origin.y/this.rowOffsetHeight)+this.dockedHeaderRows.length){var CT=[];var CS=CQ.treeNode;while(CS.needExpand){CT.push(CP);CS=B1.call(this,++CP).treeNode;}this.addRowsToDH(CT);}var CR=this.rowOffsetHeight;var CY=this.startCnt+Math.round((CX.origin.y+this.chartTableHeight)/CR)-1;if(CP==CY){var CU=CX;var CO=Math.min(CX.origin.y+2*CR,CX.offset.y.end);CX.origin.y=CO;this._leftChart.scrollTo(CX.origin);if(this._rightChart){this._rightChart.scrollTo(CX.origin);}this.onScrollMoved({y:CO});}}function B8(CR,CQ){var CO=CR.length;for(var CP=0;CP<CO;CP++){var CS=CR[CP];if(CS.rowIdx==CQ){return CP;}}return -1;}function CJ(CT,CQ){var CR=CT.treeNode;CR.needExpand=false;this.expandToLevel=-1;var CP=this.getChartWithScrollBar()._scroller;if(CQ==s){var CS=0;var CO=this.dockedHeaderRows.length;var CU=B8(this.dockedHeaderRows,CT.rowIdx);if(CU>=0){this.removeRowsFromDH(CO-CU);this.removeChildrenForDHReplaceTable();this.dockedHeaderStatus=h;}else{CU=B8(this.dockedHeaderReplaceRows,CT.rowIdx);if(CU<0){return ;}CU+=CO;CS=CP.origin.y%this.rowOffsetHeight;this.removeChildrenForDHReplaceTable();this.dockedHeaderStatus=h;}var CO=this.startCnt+parseInt(CP.origin.y/this.rowOffsetHeight)+CU-CT.rowIdx;this.reRenderChart(CP.origin,CO,CS);}else{if(CQ==q){this.reRenderChart(CP.origin);}}An.call(this);}var Bp=function(){if(this._tooltip.show){var CQ=document.getElementById("highLightCav"+this.domNode.id);if(CQ){CQ.id="";var CP=CQ.getContext("2d");CP.clearRect(0,0,CQ.width,CQ.height);}this._tooltip.toggle(false);this.tooltipShow=false;if(this._touchListener){var CO=mstrmojo.touchManager;CO.detachEventListener(this._touchListener);delete this._touchListener;}}};function An(){if(!this._leftChart){return ;}var CT=(this.otherProps.mbHideTextColumns&&this.enableSmoothScroll)?this._rightChart.chartTableOffsetHeight:this._leftChart.chartTableOffsetHeight;var CP=(this.otherProps.mbHideTextColumns&&this.enableSmoothScroll)?this._rightChart.headerTableOffsetHeight:this._leftChart.headerTableOffsetHeight;this.headerTableOffsetHeight=CP;var CR=0;if(CT>=this.chartTableMaxHeight||CT===0){CR=this.chartTableMaxHeight;}else{CR=CT;}this._leftChart.itemsContainerNode.style.height=CR+"px";if(this._rightChart){this._rightChart.itemsContainerNode.style.height=CR+"px";}this.legend.style.top=(CP+CR)+"px";this.dropShadowDiv.style.height=(CP+CR)+"px";this.indicatorEl.parentNode.style.top=CP+"px";this.indicatorEl.parentNode.style.height=CR+"px";this.chartTableHeight=CR;var CQ=this.getChartWithScrollBar()._scroller;var CS=CQ.origin.y;var CO=CT-CR+2;var CU=this.rowOffsetHeight;if(CS>CO){if(CQ.vScroll){CQ.origin.y=CO;this._leftChart.scrollTo(CQ.origin);if(this._rightChart){this._rightChart.scrollTo(CQ.origin);}while((CS=CS-CU)>CO){this.updateDockedHeadersByOneRow(CS,true);}this.updateDockedHeadersByOneRow(CO);this.firstRowIdxOnScrn=parseInt(this.startCnt+CQ.origin.y/CU);}else{CQ.origin.y=0;this._leftChart.scrollTo(CQ.origin);if(this._rightChart){this._rightChart.scrollTo(CQ.origin);}this.firstRowIdxOnScrn=parseInt(this.startCnt+CQ.origin.y/CU);}}this.updateWindowRatio();this.updateScrollBarPosition();}function AT(CO){var CP=this._scroller,CQ=this.rightChart,CR=this.rightChart.offsetWidth-(this.getWidth()-this.leftWidth);CP.origin={x:CO&&CO.x||0,y:CO&&CO.y||0};CP.showScrollbars=true;CP.hScroll=(CR!==0&&CP.noHScroll!==true)||this.scrollPast;if(CP.hScroll){CP.offset={x:{start:0,end:CR},scrollPast:this.scrollPast};}this.utils.translateCSS(-CP.origin.x,-CP.origin.y,false,CQ);}function As(CS){var CT=this;if(CT.isTreeMode){var CU=CT.lastSelectedObj[CT.lastSelectedObj.length-1];if(CU&&CU.treePath){CT.closedIfwAttr=CU.treePath;CT.currSelectedObj=[];if(!CS){CT.updateSelectedStatus(CT.tree);CT.updateHighlightForCurrRenderRows();}CT.lastSelectedObj=[];}}else{if(CT.isAllAttrSelectable){CT.closedIfwAttr=CT.prevSelected.mrow;CT.prevSelected={mrow:-2,mcol:-1};CT.unselectedRemainCells=[];CT.updateUnselectedRemainCells();if(!CS){CT.updateSelectedStatus();CT.updateHighlightForCurrRenderRows();}}else{var CV=CT.prevSelected&&CT.prevSelected.mcol,CW=CT.getCGColInfo(CV,true);if(!CW){return ;}var CR=CW.rowH.ctlMatrix,CQ=this.getCGColInfo(CV),CO=CQ&&CQ.rowH.ctlMatrix;var CP=Object.keys(CR.selectedIdx)[0];CT.closedIfwAttr=CW.rowH.es[CP].id;CR.selectedIdx={};if(CO){CO.selectedIdx={};}if(!CS){CT.updateSelectedStatus();CT.updateHighlightForCurrRenderRows();}}}}mstrmojo.VisMicroChart=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisMicroChart",utils:mstrmojo.VisChartUtils,scrollerConfig:{bounces:false,showScrollbars:true,vScroll:false,hScroll:true,useTranslate3d:false},scrollPast:false,legendHeight:30,selectedStyle:"background-color:#015DE6;color:#FFFFFF;",selectedClass:"",isAllAttrSelectable:false,prevSelected:{mrow:-2,mcol:-1},rows:[],dockedHeaderRows:[],dockedHeaderReplaceRows:[],rowsReusePool:[],unselectedRemainCells:[],isTreeMode:false,isKPI:false,showMinLabel:false,rowsNeedRebuild:true,lastScrollPosition:{y:0},startCnt:-1,endCnt:-1,firstRowIdxOnScrn:0,pageSize:10,mcStatus:null,fontSize:"10pt",headerCssClass:"",valueCssClass:"",enableSmoothScroll:false,metricColumnsSpacing:B5,attrColumnCount:0,dropShadowWidth:5,markupString:'<div id="{@id}-microchart" class="mstrmojo-Chart {@cssClass}" style="width:{@width};height:{@height};left:{@left};top:{@top};z-index:{@zIndex};position:absolute"  mstrAttach:mousedown,mouseup,mousemove,click ><div id="{@id}-microchart-left" style="width:{@leftWidth+"px"};height:{@height};left:0px;right:0px;position:absolute;z-index:1;" > </div><div id="{@id}-microchart-smoothscroll-container" class="mstrmojo-Chart {@cssClass}" style="width:{@rightWidth+"px"};height:{@height};left:{@leftWidth+"px"};top:0;position:absolute;overflow:hidden;"><div id="{@id}-microchart-right" style="width:{@rightWidth};position:absolute;" > </div><div id="{@id}-drop-shadow-ss" style="position:absolute;left:0px;width:{@dropShadowWidth+"px"}" > </div></div><div style="display:none;position:absolute;right:0;z-index:5;height:{@legendHeight + "px"};width:{@width};border:none;background:transparent;text-decoration:none;" class="microchart-lengend-text"><div style="position:absolute;right:0;top:0;padding-bottom:7px"><div style="float:left;padding-top:7px;"><div class="microchart-legend-band" ></div><div style="float:right;margin-right:10px;margin-left:10px;">Low</div></div><div style="float:left;padding-top:7px;"><div class="microchart-legend-band"></div><div style="float:right;margin-right:10px;margin-left:10px;">Mid</div></div><div style="float:left;padding-top:7px;"><div class="microchart-legend-band"></div><div style="float:right;margin-right:10px;margin-left:10px;">High</div></div></div></div><span id="textSpan" style="z-index:-10;visibility:hidden;-webkit-text-size-adjust: none;"></span><div id="{@id}-loading-msg" class="mstrmojo-loading-msg" style="display:none;z-index:10"></div><canvas id="textCanvas" width="900" height="500" style="z-index:-11;visibility:hidden;-webkit-text-size-adjust: none;"></canvas><div id="{@id}-tooltip"></div><div id="{@id}-text-tooltip" class="mstrmojo-Chart-tooltip timeseries-legend-tooltip" style="z-index:10"></div><div id="{@id}-errMsg" class="mstrmojo-message" style="width:{@width};height:{@height};top:0px;left:0px;position:absolute; display:none; z-index:30;"><div style="width:{@width};position:absolute;top:50%;text-align:center"></div></div><div id="{@id}-indicatorEl-container"  style="width:{@width};height:{@height};top:0px;left:0px;position:absolute;z-index:-5"><div></div></div><canvas id="{@id}-sort-arrow" width="8" height="15" style="position:absolute"></canvas></div>',markupSlots:{leftChart:function(){return this.domNode.childNodes[0];},rightChart:function(){return this.domNode.childNodes[1].firstChild;},dropShadowDiv:function(){return this.domNode.childNodes[1].childNodes[1];},itemsContainerNode:function(){return this.domNode.childNodes[1];},textSpan:function(){return this.domNode.childNodes[3];},loadingMsg:function(){return this.domNode.childNodes[4];},textCanvas:function(){return this.domNode.childNodes[5];},tooltip:function(){return this.domNode.childNodes[6];},textTooltip:function(){return this.domNode.childNodes[7];},errorMsg:function(){return this.domNode.childNodes[8];},indicatorEl:function(){return this.domNode.childNodes[9].firstChild;},sortArrowCanvas:function(){return this.domNode.childNodes[10];},legend:function(){return this.domNode.childNodes[2];},legendLow:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[0];},legendLowFont:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[0].childNodes[1];},legendLowBand:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[0].childNodes[0];},legendMid:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[1];},legendMidFont:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[1].childNodes[1];},legendMidBand:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[1].childNodes[0];},legendHigh:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[2];},legendHighFont:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[2].childNodes[1];},legendHighBand:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[2].childNodes[0];}},renderErrorMessage:function BA(CQ){var CO=this.errorMsg.firstChild;CO.innerHTML=CQ;this.errorMsg.style.display="block";var CP=CO.offsetHeight;CO.style.marginTop=-0.5*CP;},getTextWidthByCanvas:function BF(CW,CQ,CV){var CP=this.textCanvas;var CO=CP.getContext("2d");var CU=mstrmojo.css.getComputedStyle(CQ),CR=this.utils.getComputedFontStyle(CU);CO.font=CR;CO.textAlign="center";CO.fillStyle="blue";var CT=CO.measureText(CW);var CX=CT.width;if(CV){var CS=function(CY){if(CU[CY]){CX+=parseInt(CU[CY]);}};CS("paddingLeft");CS("paddingRight");}return CX;},getTextDimesion:function BF(CT,CQ){var CR=this.textSpan;var CP=mstrmojo.css.getComputedStyle(CQ),CS=this.utils.getComputedFontStyle(CP);CR.style.font=CS;CR.innerHTML=CT;var CO={width:CR.offsetWidth,height:CR.offsetHeight};CR.style.font="";return CO;},getTextWidth:function Bs(CW,CU,CO,CX,CP,CV,CT){var CR=this.textSpan;if(CR.className!==CU||""){CR.className=CU||"";}if(CR.style.fontFamily!==CO||""){CR.style.fontFamily=CO||"";}var CQ=CP||"pt";if(CX){CR.style.fontSize=CX+CQ;}else{CR.style.fontSize="";}if(CV){if(CR.style.fontWeight!=="bold"){CR.style.fontWeight="bold";}}else{if(CR.style.fontWeight!==""){CR.style.fontWeight="";}}if(CT){CR.style.padding="0px 0px";}else{CR.style.padding="";}CR.innerHTML=CW;var CS=CR.offsetWidth;return CS;},getTextHeight:function B2(CS,CQ,CP,CO,CR){this.textSpan.style.fontFamily=CO||"";this.textSpan.style.fontSize=CR||"";if(CP){this.textSpan.style.fontWeight="bold";}else{this.textSpan.style.fontWeight="";}this.textSpan.className=CQ;this.textSpan.innerHTML=CS;return this.textSpan.offsetHeight;},removeMCStatus:function BW(){this.mcStatus=null;if(this.controller&&this.controller.view&&this.controller.view.model&&this.controller.view.model.mcStatus){delete this.controller.view.model.mcStatus[this.getModelK()];}},restoreMCStatus:function V(){if(this.isTreeMode&&this.mcStatus&&this.mcStatus.currSelectedObj&&this.mcStatus.currSelectedObj.length>0){this.lastSelectedObj=Af.clone(this.currSelectedObj);}if(this.mcStatus&&this.mcStatus.startCnt!=undefined&&this.mcStatus.endCnt!=undefined){this.startCnt=this.mcStatus.startCnt;this.firstRowIdxOnScrn=this.mcStatus.firstRowIdxOnScrn;var CR=Math.max(this.mcStatus.endCnt-this.mcStatus.firstRowIdxOnScrn,this.minPageSize);this.endCnt=Math.min(this.mcStatus.firstRowIdxOnScrn+CR,this.rows.length);}if(this.isTreeMode&&this.mcStatus){this.replacingStartRowIdx=this.mcStatus.replacingStartRowIdx;this.needReplaceCount=this.mcStatus.needReplaceCount;this.lastFirstRowIdxOnScrn=this.mcStatus.lastFirstRowIdxOnScrn;this.dockedHeaderStatus=this.mcStatus.dockedHeaderStatus;this.lastScrollPosition=this.mcStatus.lastScrollPosition;}if(this.model.prevSelected){this.prevSelected=this.model.prevSelected;}if(this.model.unselectedRemainCells){this.unselectedRemainCells=this.model.unselectedRemainCells;}if(this.model.ctlMatrixs){var CU=this.colInfos;for(var CQ=0;CQ<CU.length;CQ++){var CT=this.model.ctlMatrixs[CQ];if(CT&&CU[CQ].rowH){CU[CQ].rowH.ctlMatrix=CT;}}var CU=this.colInfos;for(var CQ=0;CQ<CU.length;CQ++){var CS=CU[CQ].rowH,CT=CS&&CS.ctlMatrix,CO=CS&&this.model.ctlMatrixs&&this.model.ctlMatrixs[CS.id];if(CT&&CO){for(var CP=0;CP<CS.es.length;CP++){var CV=CS.es[CP].id;if(CO[CV]){CT.selectedIdx[CP]=true;}}}}}},storeMCStatus:function AI(CU){if(this.startCnt<0){return ;}this.mcStatus={};if(this.isTreeMode){this.mcStatus.expandToLevel=this.expandToLevel||-1;this.mcStatus.expandedEntryArray=[];if(this.mcStatus.expandToLevel<0){this.addTreeNodeToExpanedEntry(this.tree.childrenTreeNodeList,[]);}this.mcStatus.currSelectedObj=[];for(var CR=0;CR<this.currSelectedObj.length;CR++){var CX=this.currSelectedObj[CR];this.mcStatus.currSelectedObj[CR]=CX&&CX.id;}if(!CU){this.mcStatus.dHRowIdxList=[];var CW=this.dockedHeaderRows;for(var CR=0;CR<CW.length;CR++){this.mcStatus.dHRowIdxList.push(CW[CR].rowIdx);}this.mcStatus.dHReplaceRowIdxList=[];var CW=this.dockedHeaderReplaceRows;for(var CR=0;CR<CW.length;CR++){this.mcStatus.dHReplaceRowIdxList.push(CW[CR].rowIdx);}this.mcStatus.replacingStartRowIdx=this.replacingStartRowIdx;this.mcStatus.needReplaceCount=this.needReplaceCount;this.mcStatus.lastFirstRowIdxOnScrn=this.lastFirstRowIdxOnScrn;this.mcStatus.dockedHeaderStatus=this.dockedHeaderStatus;this.mcStatus.lastScrollPosition=this.lastScrollPosition;}}else{if(this.model.processed){this.model.prevSelected=this.prevSelected;this.model.unselectedRemainCells=this.unselectedRemainCells;this.model.ctlMatrixs={};var CO=this.colInfos;for(var CR=0;CR<CO.length;CR++){var CZ=CO[CR].rowH,CS=CZ&&CZ.ctlMatrix;if(CS){var CV={};for(var CQ in CS.selectedIdx){var CP=CZ.es[CQ].id;CV[CP]=true;}this.model.ctlMatrixs[CZ.id]=CV;}}}}if(!CU){this.mcStatus.startCnt=this.startCnt;this.mcStatus.endCnt=this.endCnt;this.mcStatus.firstRowIdxOnScrn=this.firstRowIdxOnScrn;var CT=this.getChartWithScrollBar();this.mcStatus.scrollTo=CT&&CT._scroller.origin||{x:0,y:0};}if(this.enableSmoothScroll&&this._scroller&&this._scroller.origin){this.mcStatus.hScrollPos=this._scroller.origin.x/this.rightWidth;}if(this.controller&&this.controller.view&&this.controller.view.model){if(!this.controller.view.model.mcStatus){this.controller.view.model.mcStatus={};}var CY=this.getModelK();this.controller.view.model.mcStatus[CY]=this.mcStatus;}if(this.sortKeyIdx!=undefined){this.mcStatus.sortKeyIdx=this.sortKeyIdx;this.mcStatus.sortOrder=this.colInfos[this.sortKeyIdx].sortOrder;}},addTreeNodeToExpanedEntry:function Bc(CP,CQ){var CU=this.mcStatus.expandedEntryArray;var CT=CP.length;for(var CO=0;CO<CT;CO++){var CS=CP[CO];if(CS.needExpand){var CR=Af.clone(CQ);CR.push({element:CS.id});CU.push(CR);this.addTreeNodeToExpanedEntry(CS.childrenTreeNodeList,CR);}}},unrender:function I(CO,CQ){if(!this.mcStatus){this.storeMCStatus(CQ);}this.destroyChartWidget();if(this._scroller){delete this._scroller._scrollBarEls;}var CP=this._touchListener;if(CP){mstrmojo.touchManager.detachEventListener(CP);delete this._touchListener;}if(this._infoWClosedListener){mstrmojo.touchManager.detachEventListener(this._infoWClosedListener);delete this._infoWClosedListener;}this.destroyChartWidget();if(this._leftChart){this._leftChart.destroy();delete this._leftChart;}if(this._rightChart){this._rightChart.destroy();delete this._rightChart;}if(this._textTooltip){this._textTooltip.destroy();delete this._textTooltip;}if(this._tooltip){this._tooltip.destroy();delete this._tooltip;}if(this._super){this._super(CO);}},refresh:function AQ(){this.unrender(null,true);this.render();},reRender:function N(){this.unrender();if(this.model){this.initFromVisProps(this.model.vp);}this.render();},initScroller:function b(CO){if(this._super){this._super(CO);}if(this.enableSmoothScroll){this._scrollDoneListener=this._scroller.attachEventListener("scrollDone",this.id,function(){this.updateScrollBarPosition();var CP=this._scroller;if(CP){CP.toggleScrollBars(false);}});this._scrollMovedListener=this._scroller.attachEventListener("scrollMoved",this.id,function(CP){if(this.sortKeyIdx>=this.attrColumnCount){this.utils.translateCSS(-CP.x,-CP.y,false,this.sortArrowCanvas);}});}},updateScrollBarPosition:function Ai(){var CO=this._rightChart&&this._rightChart._scroller;var CP=CO&&CO._scrollBarEls&&CO._scrollBarEls.y;if(CP){CP.style.left=(this._scroller.origin.x+this.getWidth()-this.leftWidth-9)+"px";}CO=this._scroller;CP=CO&&CO._scrollBarEls&&CO._scrollBarEls.x;if(CP){CP.style.top=(this.chartTableHeight+this._leftChart.headerTableOffsetHeight-9)+"px";}},onScrollDone:function w(CO){var CP=this.getChartWithScrollBar()._scroller;CP.toggleScrollBars(false);if(this.partialRender){this.firstRowIdxOnScrn=parseInt(this.startCnt+CO.y/this.rowOffsetHeight);if((this.firstRowIdxOnScrn-this.startCnt<=this.pageSize&&this.firstRowIdxOnScrn>=this.pageSize)||this.endCnt-1-this.firstRowIdxOnScrn<=this.pageSize&&this.endCnt!=this.rows.length){this.reRenderChartWhenScrollDone(CP.origin);An.call(this);}}},onScrollMoved:function AP(CO){Bp.call(this);if(this.isTreeMode){if(Bn(CO.y)){this._leftChart.hideDockedHeader();if(this._rightChart){this._rightChart.hideDockedHeader();}}else{this._leftChart.showDockedHeader();if(this._rightChart){this._rightChart.showDockedHeader();}}var CR=this.rowOffsetHeight;this.firstRowIdxOnScrn=this.startCnt+parseInt(CO.y/CR);var CQ=CO.y;var CP=this.lastScrollPosition.y;if(CP>CQ){while((CP-=CR)>CQ){this.updateDockedHeadersByOneRow(CP,true);}this.updateDockedHeadersByOneRow(CQ);}else{while((CP+=CR)<CQ){this.updateDockedHeadersByOneRow(CP,true);}this.updateDockedHeadersByOneRow(CQ);}}},initDockedHeaders:function Ay(){this._leftChart.initDHs();if(this._rightChart){this._rightChart.initDHs();}this.clearDockedHeader();var CQ=0;var CO=[];var CP=B1.call(this,CQ);while(CP&&CP.treeNode.needExpand){CO.push(CQ);CP=B1.call(this,++CQ);}this.addRowsToDH(CO);this.lastFirstRowIdxOnScrn=CQ;this.lastScrollPosition={x:0,y:0};this.dockedHeaderStatus=h;},clearDockedHeader:function BC(){this.removeRowsFromDH(this.dockedHeaderRows.length);this.removeChildrenForDHReplaceTable();},reBuildDH:function AV(CO){this.clearDockedHeader();var CW=this.rows;var CV=this.firstRowIdxOnScrn+CO;if(CV<0||CV>=CW.length){return ;}var CR=CW[CV].treeNode;if(CR.level>CO){var CP=[];for(var CQ=0;CQ<=CO;CQ++){var CU=A3(this.tree,CR.treePath,CQ);CP.push(CU.rowIdx);}this.addRowsToDH(CP);}else{if(CR.level==CO){var CP=[];for(var CQ=0;CQ<CO;CQ++){var CU=A3(this.tree,CR.treePath,CQ);CP.push(CU.rowIdx);}CP.push(CR.rowIdx);this.addRowsToDH(CP);}else{if(CR.level<CO){var CT=U(this.tree,CR.treePath);while(!CT){CV--;var CR=CW[CV].treeNode;CT=U(this.tree,CR.treePath);}var CP=[];for(var CQ=0;CQ<CR.level;CQ++){var CU=A3(this.tree,CR.treePath,CQ);CP.push(CU.rowIdx);}CP.push(CT.rowIdx);var CS=CR.rowIdx-this.firstRowIdxOnScrn;CV--;var CR=CW[CV].treeNode;for(var CQ=CP.length;CQ<CS;CQ++){var CU=A3(this.tree,CR.treePath,CQ);CP.push(CU.rowIdx);}this.addRowsToDH(CP);}}}this.dockedHeaderStatus=h;},updateDockedHeadersByOneRow:function A9(CR,Ca){var CU=this.getChartWithScrollBar()._scroller;if(!CU.vScroll||CR>CU.offset.y.end||CR<0){return ;}var CX;var CT=g.call(this,CR);this.firstRowIdxOnScrn=CT.rowIdx-this.dockedHeaderRows.length;if(this.dockedHeaderStatus==AW){var Cb=this.firstRowIdxOnScrn-this.replacingStartRowIdx;if(Cb>=0){if(Cb<this.needReplaceCount){CX=this.dockedHeaderRows[this.dockedHeaderRows.length-1];if(this.firstRowIdxOnScrn>this.lastFirstRowIdxOnScrn){this.removeChildrenForDHReplaceTable();this.shiftDockedHeaderWithRow(0,Ca);if(CX){this.removeRowsFromDH(1,true);}}else{if(this.firstRowIdxOnScrn<this.lastFirstRowIdxOnScrn){this.dockedHeaderStatus=h;this.moveRowFromDHRplcTableToDH();CT=g.call(this,CR);}}this.shiftDockedHeaderWithRow(-CT.pastOffset,Ca);}else{this.dockedHeaderStatus=h;this.removeChildrenForDHReplaceTable();this.shiftDockedHeaderWithRow(0,Ca);CT=g.call(this,CR);}}else{this.dockedHeaderStatus=h;this.moveRowFromDHRplcTableToDH();CT=g.call(this,CR);}}if(this.dockedHeaderStatus==h&&CT.treeNode){var CV=CT.treeNode.level;CX=this.dockedHeaderRows[this.dockedHeaderRows.length-1];var CP=CX?CX.treeNode.level:-1;if(CR>this.lastScrollPosition.y){if(CV<=CP){if(CX){this.removeRowsFromDH(1,true);}this.replacingRowTreeNode=CT.treeNode;this.replacingStartRowIdx=this.firstRowIdxOnScrn;this.needReplaceCount=CP-CV+1;this.dockedHeaderStatus=AW;this.shiftDockedHeaderWithRow(-CT.pastOffset,Ca);}else{if(CV>CP){var CO=CT.rowIdx;var CS=[];var CQ=CT.treeNode;while(CQ.needExpand){CS.push(CO);CQ=B1.call(this,++CO).treeNode;}this.addRowsToDH(CS);}}}else{if(CR<this.lastScrollPosition.y){if(CV==CP){var CW=CT.treeNode.preSibling;var CO=CT.rowIdx;var CY=0;while(!CW){CY++;CT=B1.call(this,--CO);CW=CT&&CT.treeNode.preSibling;}this.removeRowsFromDH(CY);CX=this.dockedHeaderRows[this.dockedHeaderRows.length-1];if(CX){this.removeRowsFromDH(1);}if(CW.needExpand){var CS=[CW.rowIdx];this.addRowsToDH(CS,true);}else{}this.replacingStartRowIdx=this.firstRowIdxOnScrn;this.replacingRowTreeNode=CW;this.needReplaceCount=1;this.dockedHeaderStatus=AW;var CZ=CR%this.rowOffsetHeight;this.shiftDockedHeaderWithRow(-CZ,Ca);}else{if(CV>CP+1){var CW=A3(this.tree,CT.treeNode.treePath,CP+1);var CS=[CW.rowIdx];this.addRowsToDH(CS,true);this.replacingStartRowIdx=this.firstRowIdxOnScrn;this.replacingRowTreeNode=CW;this.needReplaceCount=CV-CP-1;this.dockedHeaderStatus=AW;this.shiftDockedHeaderWithRow(-CT.pastOffset,Ca);}}}}}this.lastScrollPosition.y=CR;this.lastFirstRowIdxOnScrn=this.firstRowIdxOnScrn;},checkParentBeforeAddToDH:function Bo(CO){var CR=this.rows[CO];var CQ=CR&&CR.treeNode;var CP=this.dockedHeaderRows.length;if(CP!=CQ.level){}},addRowsToDH:function AU(CP,CT){var CU=this.rows;var CO=CP.length;if(CO<=0){return ;}var CR=null;if(CT){CR=this.dockedHeaderReplaceRows;}else{CR=this.dockedHeaderRows;}for(var CQ=0;CQ<CO;CQ++){var CS=CP[CQ];var CV=CU[CS];CR.push({rowIdx:CS,treeNode:CV.treeNode,rowRef:this.popFromReusePool()});}this._leftChart.addRowsToDH(CO,CT);if(this._rightChart){this._rightChart.addRowsToDH(CO,CT);}},removeRowsFromDH:function AK(CP,CO){if(this._leftChart){this._leftChart.removeRowsFromDH(CP,CO);}if(this._rightChart){this._rightChart.removeRowsFromDH(CP,CO);}if(CP>this.dockedHeaderRows.length){CP=this.dockedHeaderRows.length;}for(;CP>0;CP--){var CQ=this.dockedHeaderRows.pop();if(!CO){this.pushRowRefToReusePool(CQ);}else{this.dockedHeaderReplaceRows.push(CQ);}}},moveRowFromDHRplcTableToDH:function A7(){this._leftChart.moveRowFromDHRplcTableToDH();if(this._rightChart){this._rightChart.moveRowFromDHRplcTableToDH();}this.shiftDockedHeaderWithRow(0);var CO=this.dockedHeaderReplaceRows.pop();if(CO){this.dockedHeaderRows.push(CO);}},removeChildrenForDHReplaceTable:function M(){if(this._leftChart){this._leftChart.removeChildrenForDHReplaceTable();}if(this._rightChart){this._rightChart.removeChildrenForDHReplaceTable();}var CO=this.dockedHeaderReplaceRows.length;for(;CO>0;CO--){var CP=this.dockedHeaderReplaceRows.pop();this.pushRowRefToReusePool(CP);}},pushRowRefToReusePool:function t(CP){if(!CP){return ;}var CO=CP.rowRef;this.rowsReusePool.push(CO);CP.rowRef={};},shiftDockedHeaderWithRow:function BE(CP,CO){if(CO){return ;}if(this._leftChart){this.utils.translateCSS(0,CP,0,this._leftChart.dockedHeaderReplaceDiv.firstChild);}if(this._rightChart){this.utils.translateCSS(0,CP,0,this._rightChart.dockedHeaderReplaceDiv.firstChild);}},init:function CB(CO){this._super(CO);this.rowsReusePool=[];this.dockedHeaderRows=[];this.dockedHeaderReplaceRows=[];this.sortID=0;},initFromVisProps:function(CP){Ae.call(this);var CU=CP?CP:{},CQ=this.sparklineProps,CR=this.barProps,CS=this.bulletProps,CO=this.otherProps;this.isTreeMode=Au(CU.itd);if(CU.lsh){CQ.mbShow=(CU.lsh==="true");}if(CU.lap){CQ.mbAllPoints=(CU.lap==="true");}if(CU.lep){CQ.mbEndPoints=(CU.lep==="true");}if(CU.lrl){CQ.mbRefLine=(CU.lrl==="true");}if(CU.lra){CQ.mbRefArea=(CU.lra==="true");}if(CU.lmsh){CQ.mbAssMetric=(CU.lmsh==="true");}if(CU.let){CQ.mbShowTooltip=(CU.let==="true");}if(CU.llsc){CQ.mwSeriesLineCol=Bg(CU.llsc);}if(CU.lrlc){CQ.mwRefLineCol=Bg(CU.lrlc);}if(CU.lrac){CQ.mwRefAreaCol=Bg(CU.lrac);}if(CU.lh){CQ.mstrHeader=CU.lh;}if(CU.lam){CQ.mstrAssMetric=CU.lam;}if(CU.bsg){CR.mbShow=(CU.bsg==="true");}if(CU.bl){CR.mbShowLegend=(CU.bl==="true");}if(CU.brl){CR.mbRefLine=(CU.brl==="true");}if(CU.bet){CR.mbShowTooltip=(CU.bet==="true");}if(CU.bpv){CR.mwPosCol=Bg(CU.bpv);}if(CU.bnv){CR.mwNegCol=Bg(CU.bnv);}if(CU.brlc){CR.mwRefLineCol=Bg(CU.brlc);}if(CU.bh){CR.mstrHeader=CU.bh;}if(CU.gsh){CS.mbShow=(CU.gsh==="true");}if(CU.grl){CS.mbRefLine=(CU.grl==="true");}if(CU.gra){CS.mbRefBands=(CU.gra==="true");}if(CU.gl){CS.mbShowLegend=(CU.gl==="true");}if(CU.gmsh){CS.mbAssMetric=(CU.gmsh==="true");}if(CU.gia){CS.mbInvertAxis=(CU.gia==="true");}if(CU.get){CS.mbShowTooltip=(CU.get==="true");}if(CU.gmm){CS.mfMinValue=parseFloat(CU.gmm);}if(CU.ggc){CS.mwPosCol=Bg(CU.ggc);}if(CU.gnv){CS.mwNegCol=Bg(CU.gnv);}if(CU.grlc){CS.mwRefLineCol=Bg(CU.grlc);}if(CU.gpc){CS.mwBand1=Bg(CU.gpc);}if(CU.grc){CS.mwBand2=Bg(CU.grc);}if(CU.gsc){CS.mwBand3=Bg(CU.gsc);}if(CU.gh){CS.mstrHeader=CU.gh;}if(CU.gtam){CS.mstrAssMetric=CU.gtam;}if(CU.glt){CS.mstrBand1=CU.glt;}if(CU.gmt){CS.mstrBand2=CU.gmt;}if(CU.ght){CS.mstrBand3=CU.ght;}if(CU.wa){var CT=parseFloat(CU.wa);if(CU.wa.indexOf("%")){CT/=100;}CO.mfBkgOpacity=CT;}if(CU.metkpi){CO.mnMetricsPerKPI=parseInt(CU.metkpi);}if(CU.hch){CO.mbHideColHeaders=(CU.hch==="true");}if(CU.htc){CO.mbHideTextColumns=(CU.htc==="true");}if(CU.ll){CO.mbLockLayout=(CU.ll==="true");}if(CU.gam){CO.mbShowForHiddenGraphs=(CU.gam==="true");}if(CU.igf){CO.mbInheritFromGridGraph=(CU.igf==="true");}if(CU.scm){CO.mbInSingleColumnMode=(CU.scm==="true");}if(CU.cid){CO.mpColumnIDs=CU.cid.split(",");}if(CU.tcid){CO.mpColumnIDsInTreeMode=CU.tcid.split(",");}if(CU.co){CO.mpColumnPositions=CU.co.split(",");}if(CU.sc){CO.mpSortKey=CU.sc;}if(CU.so){CO.mbSortDescend=(CU.so!=="false");}if(CU.rh){CO.mRowHeight=parseFloat(CU.rh);}CO.mRowHeight=CO.mRowHeight>27?CO.mRowHeight:27;AC.call(this);},preBuildRendering:function S(){if(this._super){this._super();}var CO=this.model;if(!CO){CO.err=mstrmojo.desc(8426,"No model provided");return ;}this.isTablet=!!mstrApp.isTablet();this.isAndroidTab=B6.isAndroid?this.isTablet:false;var CR=CO.vp||{};var CQ=this.controller&&(this.controller instanceof mstrmojo.android.controllers.XtabController);var CP=this.isFullScreenWidget||CQ;this.enableSmoothScroll=(!this.isTablet&&CP)?true:Au(CR.ss);if(CR.mcs){this.metricColumnsSpacing=parseInt(CR.mcs);}else{this.metricColumnsSpacing=!this.isTablet?(mstrApp.isLandscape()?B5:BX):-1;}if(this.enableSmoothScroll){this.leftWidth=this.getWidth()/3;this.rightWidth=this.getWidth()/3*2;}else{this.leftWidth=this.getWidth();this.rightWidth=0;this.scrollerConfig.hScroll=false;}},buildRows:function BN(){if(this.rowsNeedRebuild){if(this.isTreeMode){this.rows=E.call(this);}else{AX.call(this);}this.rowsNeedRebuild=false;}},pushToReusePool:function B7(CR,CT){var CO=CR!=undefined?CR:this.startCnt;var CQ=CT!=undefined?CT:this.endCnt;var CS=null;for(var CP=CO;CP<CQ;CP++){CS=this.rows[CP];this.rowsReusePool.push(CS.rowRef);CS.rowRef={};}},popFromReusePool:function Av(){var CO=this.rowsReusePool.pop();return CO||{};},reRenderChart:function Bx(CQ,CP,CO){this.pushToReusePool();this.buildRows();var CT=this.rowOffsetHeight;if(!CP){CP=0;}this.firstRowIdxOnScrn=parseInt(this.startCnt+CQ.y/CT)-CP;this.getCurrRenderRowCount();if(CO==undefined){CO=CQ.y%CT;}CQ.y=(this.firstRowIdxOnScrn-this.startCnt)*CT+CO;this.lastScrollPosition.y=CQ.y;this.lastFirstRowIdxOnScrn=this.firstRowIdxOnScrn;var CS=this.rows;for(var CR=this.startCnt;CR<this.endCnt;CR++){CS[CR].rowRef=this.popFromReusePool();}if(!this.enableSmoothScroll){this._leftChart.reRenderRows(CQ);}else{this._leftChart.reRenderRows(CQ);this._rightChart.reRenderRows(CQ);}},reRenderChartWhenScrollDone:function B9(CU){var CQ=this.startCnt;var CV=this.endCnt;var CO=this.rowOffsetHeight;this.firstRowIdxOnScrn=parseInt(this.startCnt+CU.y/CO);this.getCurrRenderRowCount();var CW,CT,CS,CP;if(this.startCnt<CV&&this.startCnt>CQ){CW=CQ;CT=this.startCnt;firstRowRemain=this.startCnt;lastRowRemain=CV;CS=CV;CP=this.endCnt;}else{if(CQ<this.endCnt&&CQ>this.startCnt){CW=this.endCnt;CT=CV;firstRowRemain=CQ;lastRowRemain=this.endCnt;CS=this.startCnt;CP=CQ;}else{CW=CQ;CT=CV;firstRowRemain=0;lastRowRemain=0;CS=this.startCnt;CP=this.endCnt;}}this.pushToReusePool(CW,CT);CU.y=(this.firstRowIdxOnScrn-this.startCnt)*CO+CU.y%CO;this.lastScrollPosition.y=CU.y;this.lastFirstRowIdxOnScrn=this.firstRowIdxOnScrn;var CX=this.rows;for(var CR=CS;CR<CP;CR++){CX[CR].rowRef=this.popFromReusePool();}if(!this.enableSmoothScroll){this._leftChart.reRenderRows(CU,firstRowRemain,lastRowRemain,CS,CP);}else{this._leftChart.reRenderRows(CU,firstRowRemain,lastRowRemain,CS,CP);this._rightChart.reRenderRows(CU,firstRowRemain,lastRowRemain,CS,CP);}},reRenderChartWithAnchor:function BD(CO,CS){this.pushToReusePool();this.buildRows();var CT=this.rowOffsetHeight;var CQ=-1;for(var CP=0;CP<this.rows.length;CP++){if(this.rows[CP].treeNode.treePath==CO.treePath){CQ=CP;break;}}this.firstRowIdxOnScrn=CQ-CS;if(this.firstRowIdxOnScrn<0){this.firstRowIdxOnScrn=0;}this.getCurrRenderRowCount();scrollTo.y=(this.firstRowIdxOnScrn-this.startCnt)*CT;this.lastScrollPosition.y=scrollTo.y;this.lastFirstRowIdxOnScrn=this.firstRowIdxOnScrn;var CR=this.rows;for(var CP=this.startCnt;CP<this.endCnt;CP++){CR[CP].rowRef=this.popFromReusePool();}if(!this.enableSmoothScroll){this._leftChart.reRenderRows(scrollTo);}else{this._leftChart.reRenderRows(scrollTo);this._rightChart.reRenderRows(scrollTo);}},getCurrRenderRowCount:function CN(){var CO=this.pageSize*Bh;if(this.rows.length<=CO){this.partialRender=false;this.startCnt=0;this.endCnt=this.rows.length;}else{this.partialRender=true;this.startCnt=Math.round(this.firstRowIdxOnScrn-this.pageSize*(Bh-1)/2);if(this.startCnt<0){this.startCnt=0;}this.endCnt=this.startCnt+CO;if(this.endCnt>this.rows.length){this.endCnt=this.rows.length;}}},getChartWithScrollBar:function(){if(this.enableSmoothScroll){return this._rightChart;}else{return this._leftChart;}},updateWindowRatio:function A1(){var CP=this.getChartWithScrollBar(),CO=CP._scroller;CO.chartTableRenderRatio=(this.endCnt-this.startCnt)/this.rows.length;CO.topUnRenderedRatio=this.startCnt/this.rows.length;CO.updateScrollBars();},initModel:function Bj(){this.prevSelected={mrow:-2,mcol:-1};if(this.isTreeMode){T.call(this);}this.treeColumnIdx=-1;this.rowsNeedRebuild=true;this.rows=[];this.unselectedRemainCells=[];this.errorMsg.style.display="none";this.isKPI=false;this.showMinLabel=false;AN=[];BV={};Ak={};B=[];CM=[];CK=1;CA=0;l=0;BM=0;this.infoWindowsShown={};},renderMicroChart:function Bb(){var CT=this;this.buildRows();AL.call(this);CT.renderLegend();CT.getCurrRenderRowCount();CT.restoreMCStatus();if(!CT.enableSmoothScroll){CT.itemsContainerNode.style.display="none";var CS={placeholder:CT.leftChart,colInfos:CT.colInfos,theme:CT.theme,isTreeMode:CT.isTreeMode,showMinLabel:CT.showMinLabel,width:CT.leftWidth+"px",height:(CT.getHeight()-CT.legendHeight)+"px",textSpan:CT.textSpan,textCanvas:CT.textCanvas,headerCssClass:CT.headerCssClass,valueCssClass:CT.valueCssClass,isAndroidTab:CT.isAndroidTab,widget:CT,treeColumnIdx:CT.treeColumnIdx,backgroundColor:CT.backgroundColor,domRefName:P,showScrollbars:true};var CQ=new mstrmojo.VisMicroChartTable(CS);CQ.render();CT._leftChart=CQ;CQ.parent=CT;CT.replaceScrollerUpdate(CQ);}else{var CS={placeholder:CT.leftChart,colInfos:CT.colInfos.slice(0,this.attrColumnCount),theme:CT.theme,isTreeMode:CT.isTreeMode,showMinLabel:CT.showMinLabel,width:CT.leftWidth+"px",height:(CT.getHeight()-CT.legendHeight)+"px",textSpan:CT.textSpan,textCanvas:CT.textCanvas,headerCssClass:CT.headerCssClass,valueCssClass:CT.valueCssClass,isAndroidTab:CT.isAndroidTab,widget:CT,treeColumnIdx:CT.treeColumnIdx,backgroundColor:CT.backgroundColor,domRefName:P,showScrollbars:false,zIndex:1};var CQ=new mstrmojo.VisMicroChartTable(CS);CQ.render();CT._leftChart=CQ;CQ.parent=CT;CT.leftChart=CQ.domNode;var CS={placeholder:CT.rightChart,colInfos:CT.colInfos.slice(this.attrColumnCount),theme:CT.theme,isTreeMode:CT.isTreeMode,showMinLabel:CT.showMinLabel,width:CT.rightWidth+"px",height:(CT.getHeight()-CT.legendHeight)+"px",textSpan:CT.textSpan,textCanvas:CT.textCanvas,headerCssClass:CT.headerCssClass,valueCssClass:CT.valueCssClass,isAndroidTab:CT.isAndroidTab,widget:CT,treeColumnIdx:CT.treeColumnIdx,backgroundColor:CT.backgroundColor,domRefName:BS,showScrollbars:true};var CO=new mstrmojo.VisMicroChartTable(CS);CO.render();CT._rightChart=CO;CO.parent=CT;CT.rightChart=CO.domNode;CT.replaceScrollerUpdate(CO);if(this.theme==G||this.theme==AY){CT.dropShadowDiv.style.backgroundImage="-webkit-gradient(linear, left top, right top, color-stop(0, rgba(0,0,0,0.25)), color-stop(1, rgba(0,0,0,0)))";}else{CT.dropShadowDiv.style.backgroundImage="-webkit-gradient(linear, left top, right top, color-stop(0, rgba(0,0,0,0.5)), color-stop(1, rgba(0,0,0,0)))";}CO.addSyncScroller(CQ);CQ.addSyncScroller(CO);var CP=Math.max(CT._leftChart.headerTableOffsetHeight,CT._rightChart.headerTableOffsetHeight);CT._leftChart.headerTable.style.height=CP+"px";CT._rightChart.headerTable.style.height=CP+"px";CT._leftChart.updateHeaderTableOffsetH();CT._rightChart.updateHeaderTableOffsetH();CT.scrollerConfig.scrollEl=CT.rightChart;CT.updateScroller();var CR=null;if(this.mcStatus&&this.mcStatus.hScrollPos!=undefined){var CV=Math.min(this.mcStatus.hScrollPos*this.rightWidth,this.rightWidth+this.leftWidth-this.getWidth());CR=this._scroller.origin={x:CV,y:0};}AT.call(CT,CR);}CT.rowOffsetHeight=((CT.otherProps.mbHideTextColumns&&this.enableSmoothScroll)?CO.rowOffsetHeight:CQ.rowOffsetHeight)||30;if(CT.isTreeMode){if(CT.mcStatus&&CT.mcStatus.dHRowIdxList){CT._leftChart.initDHs();if(CT._rightChart){CT._rightChart.initDHs();}CT.addRowsToDH(CT.mcStatus.dHRowIdxList);if(CT.mcStatus.dHReplaceRowIdxList.length>0){CT.addRowsToDH(CT.mcStatus.dHReplaceRowIdxList,true);var CU=CT.mcStatus.scrollTo.y%CT.rowOffsetHeight;CT.shiftDockedHeaderWithRow(-CU);}}else{CT.initDockedHeaders();}}CT.getDefaultHighlightRow();CT.updateSelectedStatus(CT.tree);CT.updateHighlightForCurrRenderRows();CT.chartTableMaxHeight=CT.getHeight()-CT._leftChart.headerTableOffsetHeight;if(CT.legendDis){CT.chartTableMaxHeight-=CT.legendHeight;}CT.pageSize=Math.max(Math.min(parseInt(CT.chartTableMaxHeight/CT.rowOffsetHeight)+1,20),CT.minPageSize);An.call(CT);},ongridDataChange:function A4(CO){this.model=this.gridData;},postBuildRendering:function Bw(){console.log("in postb");var CS=this,CP=CS.model;var CR=CP.err||CP.eg;if(CR){CS.renderErrorMessage(CR);return ;}if(CS.controller&&CS.controller.view&&CS.controller.view.model&&CS.controller.view.model.mcStatus){if(!CS.mcStatus&&CS.controller.view.model.mcStatus[this.getModelK()]){CS.mcStatus=CS.controller.view.model.mcStatus[this.getModelK()];console.log("found stored mcStatus with key:"+this.getModelK());}}CS.highlightEntireRow=CS.isTreeMode||CS.isAllAttrSelectable;AE.call(CS);L.call(CS);CR=CP.err||CP.eg;if(CR){CS.renderErrorMessage(CR);return ;}if(this._super){this._super();}if(this.otherProps.mbInheritFromGridGraph){this.selectedClass="sc_"+this.getModelK();}else{this.selectedClass="";}this.minPageSize=Math.ceil((this.getHeight()/this.otherProps.mRowHeight)*3/Bh);this.pageSize=this.minPageSize;var CT={success:function(CV){var CU=CS.getModelK();CS.model=CV;CS.model.k=CU;CS.rowsNeedRebuild=true;L.call(CS);CS.renderMicroChart();CS.toggleSortOrderAndArrow(CS.sortKeyIdx,CS.sortOrder);}};this.renderMicroChart();CS.removeMCStatus();var CQ=CS.xtabModel,CO=(CQ&&CQ.docModel);if(CO){CS._infoWClosedListener=CS.xtabModel.docModel.attachEventListener("infoWindowClosed",this.id,function(CU){var CV=CU.psKey;if(!CS.hasNonifwTarget&&CS.infoWindowsShown&&CS.infoWindowsShown[CV]){window.setTimeout(function(){As.call(CS);},10);}CS.infoWindowsShown[CV]=false;});}this.renderTextTooltip();this.renderVisTooltip();},renderTextTooltip:function Ap(){var CO={placeholder:this.textTooltip,boundary:this.domNode};this._textTooltip=new mstrmojo.VisTextTooltip(CO);this._textTooltip.render();this._textTooltip.toggle(false);},renderVisTooltip:function BG(){var CO={placeholder:this.tooltip,cssClass:"timeseries-tooltip mstrmojo-MicroChart-tooltip"};this._tooltip=new mstrmojo.VisMicroChartTooltip(CO);this._tooltip.render();this._tooltip.toggle(false);},replaceScrollerUpdate:function W(CP){CP._scroller.updateScrollBars=function CO(CS,CX){var CZ=this.scrollEl;if(!this.showScrollbars||!CZ){return ;}var CY=this._scrollBarEls;var CR=this.chartTableRenderRatio||1;var CV=this.topUnRenderedRatio||0;if(!CY){var CW=this;CY=this._scrollBarEls={x:"hScroll",y:"vScroll"};BO(CY,function(Ca,Cb){if(CW[Ca]){var Cc=document.createElement("div");Cc.className="mstrmojo-touch-scrollBar "+Cb+"Axis";(CX||CZ.parentNode).appendChild(Cc);CY[Cb]=Cc;}else{delete CY[Cb];}});}if(!CS){var CU=this.scrollEl.parentNode;CS={top:0,right:CU.clientWidth,bottom:CU.clientHeight,left:0};}var CT=9,CQ={x:{left:CS.left,top:CS.bottom-CT,x:CS.right-CS.left,d:"Width"},y:{left:CS.right-CT,top:CS.top,x:CS.bottom-CS.top,d:"Height"}};var CW=this;BO(CY,function(Cr,Cb){var Cp=Cr.style,Cq=CQ[Cb],Cs=Cq.d,Cj=Cr.parentNode,Ck=Cq.x;var Ce=Cq.left,Co=Cq.top+Ck*CV,Ch=Ck/CZ["offset"+Cs]*CR,Cd=Math.min(Math.round(Ck*Ch),Ck);Cr.baseLeft=Ce;Cr.baseTop=Co;Cr.ratio=Ch;Cr.viewportSize=B0.round(Ck*CR);Cr.length=Cd;Cp.left=Ce+"px";Cp.top=Co+"px";Cp[Cs.toLowerCase()]=Cd+"px";var Ci=(Cb==="x"),Cv=Ci?"hScroll":"vScroll";if(CW[Cv]){var Cx=CW.origin,Cy=Cx&&Cx[Cb]||0,Ca=Cr.viewportSize,Ct=6/Cd,Cg=Cr["base"+((Ci)?"Left":"Top")],Cf=Cg+Ca-Cd,Cc=B0.round(Cg+(Ch*Cy));if(Cc<Cg){Cc=Cg-Cy;Cd+=Cy;}else{if(Cc>Cf){var Cu=(Cy-CW.offset[Cb].end)*Ch;Cc=B0.min(Cf+Cu,Ca+Cg-6)-1;Cd-=Cu;}}var Cm=0,Cl=[Cm,Cm,Cm],Cw=[1,1,1],Cn=(Ci)?0:1;Cl[Cn]=(Cc-Cg);Cw[Cn]=B0.min(B0.max(Cd/Cr.length,Ct),1);B6.translate(Cr,Cl[0],Cl[1],Cl[2]," scale3d("+Cw.join(",")+")");}});};},setElementDimension:function Ar(CR,CQ){var CO=0;var CP=mstrmojo.css.getComputedStyle(CR);if(CP.paddingLeft){CO+=parseFloat(CP.paddingLeft);}if(CP.paddingRight){CO+=parseFloat(CP.paddingRight);}CR.style.width=(CQ-CO)+"px";},setColorByTheme:function Be(){var CO=this.bulletProps;if(this.theme==A5){this.bandColor1="#494949";this.bandColor2="#595959";this.bandColor3="#727272";this.refLinePosColor="#FF781D";this.refLineNegColor="#FF781D";this.refLineWidth=2;this.blueBarPosColor="#00BDFF";this.blueBarNegColor="#00BDFF";this.legendTextColor="white";}else{if(this.theme==G){this.bandColor1="#A5A5A5";this.bandColor2="#B3B3B3";this.bandColor3="#BCBCBC";this.refLinePosColor="#FF781D";this.refLineNegColor="#FF781D";this.refLineWidth=2;this.blueBarPosColor="#00BDFF";this.blueBarNegColor="#00BDFF";}else{this.bandColor1=CO.mwBand1||"#999999";this.bandColor2=CO.mwBand2||"#BBBBBB";this.bandColor3=CO.mwBand3||"#DEDEDE";this.refLinePosColor=CO.mwRefLineCol;this.refLineNegColor=CO.mwRefLineCol;this.blueBarPosColor=CO.mwPosCol;this.blueBarNegColor=CO.mwNegCol;}}},renderLegend:function BZ(){var CR=this.bulletProps;this.setColorByTheme();this.legendDis=this.showGauge&&this.bulletProps.mbShowLegend;if(this.legendDis){this.legend.className+=" "+this.valueCssClass;this.legend.style.display="block";this.legend.style.fontSize=Math.round(11*Br)+"pt";this.setElementDimension(this.legend,this.getWidth());if(this.legendTextColor){this.legend.style.color=this.legendTextColor;}if(CR.mstrBand1){this.legendLowFont.innerHTML=CR.mstrBand1;}this.legendLowBand.style.backgroundColor=this.bandColor1;if(CR.mstrBand2){this.legendMidFont.innerHTML=CR.mstrBand2;}this.legendMidBand.style.backgroundColor=this.bandColor2;if(CR.mstrBand3){this.legendHighFont.innerHTML=CR.mstrBand3;}this.legendHighBand.style.backgroundColor=this.bandColor3;var CP=this.legendLow.offsetWidth,CQ=this.legendMid.offsetWidth,CO=this.legendHigh.offsetWidth;if(CP+CQ+CO>this.getWidth()){if(CP+CQ>this.getWidth()){this.legendLow.style.width=this.width;if(CQ+CO>this.getWidth()){this.legendMid.style.width=this.width;this.legendHigh.style.width=this.width;}else{this.legendMid.style.width=(this.getWidth()-CO)+"px";}}else{this.legendLow.style.width=(this.getWidth()-CQ)+"px";this.legendHigh.style.width=this.width;}}this.legendHeight=this.legend.firstChild.offsetHeight;this.legend.style.height=this.legendHeight+"px";}else{this.legend.style.display="none";this.legendHeight=0;}},showChartTooltip:function AZ(CO,CT){var CR=this;var CQ=!this._tooltip.show;CO.showTooltip(CT.pageX,CT.pageY);var CS=this._tooltip.show;this.tooltipShow=CS;if(CQ&&CS){var CP=mstrmojo.touchManager;this._touchListener=CP.attachEventListener("touchesBegin",this.id,function(CU){if(!H.call(CR,CU.touch)){Bp.call(CR,CU.touch);}});}},touchSelectBegin:function AS(CQ){if(CQ.evt.ctrlKey){this.touchMultiBegin(CQ);return ;}var CU=this;Bp.call(CU);var CP=mstrmojo.dom.findAncestorByAttr(CQ.target,"mcol",true,this.domNode);if(CP&&CP.node){var CR=CP.node.getAttribute("mrow");var CW=CP.node.getAttribute("mcol");if(CR==-1){this.showTextTooltip(CP.node,CW,true);}else{var CT=CP.node.parentNode;var CO=null;if(CT.getAttribute("rowType")==s){var CS=B8(this.dockedHeaderRows,CR);if(CS>=0){CO=this.dockedHeaderRows[CS];}else{CS=B8(this.dockedHeaderReplaceRows,CR);CO=this.dockedHeaderReplaceRows[CS];}}else{CO=this.rows[CR];}var CX=this.colInfos[CW];if(CX.type==BU){var CV=CO&&CO.rowRef&&CO.rowRef[CW];if(CV){this.showChartTooltip(CV,CQ);this.currSelectedWidget={mrow:CR,mcol:CW};}}else{if(CX.type==u||CX.type==CE||CX.type==D){this.showTextTooltip(CP.node,CW);}}}}},showTextTooltip:function Bt(CR,CQ,CO){if(CO){var CT=this.colInfos[CQ],CS=CT.title;if(CT.titleOverflow&&this._textTooltip){this._textTooltip.updateContent(CR,CO?"title":"content",CS);}}else{var CS=CR.innerText;var CP=this.getTextWidthByCanvas(CS,CR,true);if(CP>CR.offsetWidth&&this._textTooltip){this._textTooltip.updateContent(CR,CO?"title":"content",CS);}}},hideTextTooltip:function R(){if(this._textTooltip){this._textTooltip.toggle(false);}},touchSelectEnd:function C(CO){if(CO.evt.ctrlKey){this.touchMultiEnd(CO);return ;}this.currSelectedWidget=null;this.hideTextTooltip();},touchSelectMove:function j(CR){if(CR.evt.ctrlKey){this.touchMultiMove(CR);return ;}if(!this.currSelectedWidget){return ;}this._tooltip.toggle(false);var CT=CR.target;var CY=-1,CZ=null;var CU=true;var CQ=mstrmojo.dom.findAncestorByAttr(CT,"mcol",true,this.domNode);CQ=CQ&&CQ.node;if(CQ){CY=CQ.getAttribute("mcol");CZ=this.colInfos[CY];if(CZ.order=="GaugeChart"){CU=false;}}else{CU=false;}if(CU===false){CT=document.elementFromPoint(CR.pageX,CR.pageY);CQ=mstrmojo.dom.findAncestorByAttr(CT,"mcol",true,this.domNode);CQ=CQ&&CQ.node;if(!CQ){return ;}CY=CQ.getAttribute("mcol");CZ=this.colInfos[CY];}var CS=CQ.getAttribute("mrow");var CW=CQ.parentNode;var CO=null;if(CW.getAttribute("rowType")==s){var CV=B8(this.dockedHeaderRows,CS);if(CV>=0){CO=this.dockedHeaderRows[CV];}else{CV=B8(this.dockedHeaderReplaceRows,CS);CO=this.dockedHeaderReplaceRows[CV];}}else{CO=this.rows[CS];}var CX=CO&&CO.rowRef&&CO.rowRef[CY];var CP;if(CX){if(CZ.order=="LineChart"||CZ.order=="BarChart"){if(CS==this.currSelectedWidget.mrow&&CY==this.currSelectedWidget.mcol){CP=CX.showTooltip(CR.pageX,CR.pageY);this.currSelectedWidget={mrow:CS,mcol:CY};}}else{if(CY==this.currSelectedWidget.mcol&&CS!=this.currSelectedWidget.mrow){CP=CX.showTooltip(CR.pageX,CR.pageY);this.currSelectedWidget={mrow:CS,mcol:CY};}}}if(CP){this.tooltipShow=true;}if(this.tooltipShow){this._tooltip.toggle(true);}},touchSwipeBegin:function Bl(CO){Bp.call(this);if(Bd.call(this,CO)&&this._super){this._super(CO);}else{this._touchCanceled=true;}},touchSwipeMove:function AH(CO){if(!this._touchCanceled&&this._super){this._super(CO);}},touchSwipeEnd:function Ac(CO){if(!this._touchCanceled&&this._super){this._super(CO);}},buildLeftParent:function BQ(CR,CW,CX){var CP=this.colInfos,CZ=CP.length;if(!this.isKPI){if(CW==-1){var CQ=this.model.gts;var CU=Bq.find(CQ.col,"n","Metrics");CR._e=CQ.col[CU].es[CP[CX].order]||{id:"",n:""};CR.v=CR._e.n;}else{var Cb=this.model.gts.row;var CT=CR;for(var CS=CZ-1;CS>=0;CS--){var Ca=CP[CS];if(Ca.type==BU){continue;}if(Ca.type==u){var CO={};var CV=Bq.find(Cb,"id",Ca.order.split(":")[0]);CO.titleInfo=Cb[CV];CO._e=this.rows[CW].model.elms[Ca.order]||{id:"",n:""};CO.v=CO._e.n;CO.axis=BI;CT._lp=CO;CT=CO;}}}}else{if(CX==0){var CQ=this.model.gts;var CU=Bq.find(CQ.col,"n","Metrics");CR._e=CQ.col[CU].es[CW]||{id:"",n:""};CR.v=CR._e.n;}else{var Cb=this.model.gts.row;var CT=CR;for(var CS=0;CS<Cb.length;CS++){var CO={};CO.titleInfo=Cb[CS];var CY=Cb[CS].es.length;CO._e=Cb[CS].es[CY-1]||{id:"",n:""};CO.v=CO._e.n;CO.axis=BI;CT._lp=CO;CT=CO;}}}},getModelK:function Y(){var CO=this.model&&this.model.k;return CO;},getDataService:function Bi(){var CP=this.xtabModel,CO=CP&&CP.docModel,CQ=CO&&CO.getDataService();if(!CQ){CQ=CP&&CP.getDataService();}return CQ;},addSCObjToList:function Ax(CP,CQ,CS,CR){var CO={};CO.sc=CQ.sc;CO.es=CS;CO.eid=CR;CP.push(CO);},getSelectionObjForTreeMode:function Z(Ch){var CQ=this.attrMapIdx;var Co=this,CX=Co.model,CO=CX.gts,Cd=CO.row;var CS=[];var CZ=0;var Ck=false;var Ci=Ch.treeNode;var Cf=Ci.treePath;var CW=Cf.split("_");var CY=CW.length-1;var CT=this.isAttrSelectable(CY);if(this.closedIfwAttr==Cf&&this.isTablet){return null;}if(CT){var Ce=this.lastSelectedObj&&this.lastSelectedObj[CY]&&(this.lastSelectedObj[CY].treePath==Cf);if(!Ce){this.currSelectedObj=this.getSelectedTreeNodeListFromTreePath(CW);var Cm=false;var Cb=this.currSelectedObj[CY];for(var Cn=CY+1;Cn<this.lastSelectedObj.length;Cn++){var Ca=this.isAttrSelectable(Cn);var CR=!!this.lastSelectedObj[Cn];if(!Ca||!CR){Cm=true;this.currSelectedObj[Cn]=null;Cb=Cb.childrenTreeNodeList[0];continue;}if(!Cm){var CU=this.lastSelectedObj[Cn].id;var CP=Cb.childrenTreeNodeList;for(var Cl=0;Cl<CP.length;Cl++){if(CU==CP[Cl].id){this.currSelectedObj[Cn]=CP[Cl];break;}}if(Cl==CP.length){Cm=true;}}if(Cm){this.currSelectedObj[Cn]=Cb.childrenTreeNodeList[0];}Cb=this.currSelectedObj[Cn];}Ck=false;for(var Cn=0;Cn<this.currSelectedObj.length;Cn++){var Ci=this.currSelectedObj[Cn];if(Ci){var Cc=CQ[Cn];rowH=Cd[Cc];this.addSCObjToList(CS,rowH,Ci.n,Ci.id);}else{continue;}}}else{for(var Cn=CY;Cn<this.lastSelectedObj.length;Cn++){var Ci=this.currSelectedObj[Cn];if(!Ci){continue;}var Cc=CQ[Cn];rowH=Cd[Cc];var Cg=rowH.sc&&!(rowH.sc.all==="false"||rowH.sc.all===false);if(Ci&&!Cg){break;}else{this.addSCObjToList(CS,rowH,Ci.n,"OA:(All)");this.currSelectedObj[Cn]=null;}}if(Cn==CY){return{at:0};}while(this.currSelectedObj.length>0&&!this.currSelectedObj[this.currSelectedObj.length-1]){this.currSelectedObj.pop();}for(;Cn<this.currSelectedObj.length;Cn++){var Ci=this.currSelectedObj[Cn];if(Ci){var Cc=CQ[Cn];rowH=Cd[Cc];this.addSCObjToList(CS,rowH,Ci.n,Ci.id);}else{continue;}}Ck=true;}}if(CS.length>0){CZ=CZ|SELECTOR_ACTION;var CV=this.hasInfoWOnNode(Cd[CQ[CY]]);var Cj=Ck?null:CV?Ch.node:null;return{at:CZ,k:this.getModelK(),scObjList:CS,anchor:Cj};}return null;},hasOnlyInfoWTarget:function a(CO){return this.hasInfoWOnNode(CO,true);},hasInfoWOnNode:function Ao(CQ,CR){var CO=CQ.sc.tks.split("\x1E"),CP=this.findInfoWInTargets(CO);if(CR){return CO&&CP&&CO.length===CP.length;}else{return CP&&CP.length>0;}},hasNoninfowindowTarget:function Bv(CR){var CS=CR&&CR.scObjList,CO=CS&&CS.length,CX=false;for(var CQ=0;CQ<CO;CQ++){var CT=CS[CQ],CU=CT.sc.tks.split("\x1E"),CV=this.findInfoWInTargets(CU);if(CU.length>CV.length){CX=true;}for(var CP=0;CP<CV.length;CP++){var CW=CV[CP];this.infoWindowsShown[CW]=true;}}return CX;},findInfoWInTargets:function Ao(CS){var CX=this.xtabModel,CW=(CX&&CX.docModel),CY=[];if(CW){var CU=CW.defn&&CW.defn.layouts,CQ=null;var CP;if(CU){for(CP in CU){if(CU[CP].loaded){CQ=CU[CP];break;}}}var CR=CQ&&CQ.units;if(CR&&CS){for(var CO=0;CO<CS.length;CO++){var CV=CS[CO],CT=CR[CV];if(CT){if(this.isChildOfIfw(CR,CT)){CY.push(CV);}}}}}return CY;},getSelectionObjForNonTreeMode:function CC(Ck){var Ce=Ck.mcol,Ch=Ck.mrow,CU=this.colInfos;var CP=this.attrMapIdx;var Ct=this,CT=Ct.model,CO=CT.gts,Cc=CO.row;var CQ=[];var Ca=0;var Co=false;var Cl=CU[Ce].order;if(this.isAllAttrSelectable){if(this.closedIfwAttr==Ch&&this.isTablet){return null;}var Ci=this.updateUnselectedRemainCells({mrow:Ch,mcol:Ce});if(Ci){return null;}var CW=(Ch==this.prevSelected.mrow),Cs=false;for(var Cq=0;Cq<CU.length;Cq++){var Cb=CU[Cq];if(Cb.sc&&(Cb.sc.all==="true"||Cb.sc.all===true)){Cs=true;break;}}if(CW&&!Cs){for(var Cq=0;Cq<CU.length;Cq++){var Cb=CU[Cq];if(Cb.sc){var Cm=Cb.sc.tks.split("\x1E"),CZ=Ct.findInfoWInTargets(Cm);for(var Cp=0;Cp<CZ.length;Cp++){var Cv=CZ[Cp];if(!Ct.infoWindowsShown[Cv]){CW=false;}}}}}if(CW){for(var Cq=0;Cq<CU.length;Cq++){var Cb=CU[Cq];if(!Cb.sc){continue;}if(Cb.sc.all==="false"||Cb.sc.all===false){this.unselectedRemainCells.push({mrow:Ch,mcol:Cq});continue;}var Cg=Cb.rowH.ctlMatrix,CS=Cg.map[Ch],Cd=Cb.rowH.es[CS].id;if(!Cd||Cd.substring(0,1)==="D"){continue;}Co=true;this.addSCObjToList(CQ,Cb.rowH,"","OA:(All)");}if(CQ.length>0){this.prevSelected={mrow:-2,mcol:-1};this.updateUnselectedRemainCells();Ca=Ca|SELECTOR_ACTION;var Cn=Co?null:Ck.node;return{at:Ca,k:this.getModelK(),scObjList:CQ,anchor:Cn};}else{this.unselectedRemainCells=[];}return{at:Ca};}else{this.updateUnselectedRemainCells();this.unselectedRemainCells=[];}for(var Cq=0;Cq<CU.length;Cq++){var Cb=CU[Cq];if(!Cb.sc){continue;}var CV=Cb.rowH.ctlMatrix,CS=CV.map[Ch];if(Cb.rowH.es[CS]){var Cd=Cb.rowH.es[CS].id;if(!Cd||Cd.substring(0,1)==="D"){continue;}this.addSCObjToList(CQ,Cb.rowH,"",Cd);}}if(CQ.length>0){this.prevSelected={mrow:Ch,mcol:-1};Ca=Ca|SELECTOR_ACTION;var Cn=Co?null:Ck.node;return{at:Ca,k:this.getModelK(),scObjList:CQ,anchor:Cn};}}else{var Cb=this.getCGColInfo(Ce,true);if(Cb.sc){var CV=Cb.rowH.ctlMatrix,CR=this.getCGColInfo(Ce),Cj=CR&&CR.rowH.ctlMatrix,Cu=this.colInfos[Ce].order,CY=Cu.indexOf(":CG")===Cu.length-3&&Cu.length>=3;var Cd="";var CX=false;var CS=CV.map[Ch];if(Cb.rowH.es[CS]){Cd=Cb.rowH.es[CS].id;if(!Cd||Cd.substring(0,1)==="D"){return ;}if(this.closedIfwAttr==Cd&&this.isTablet){return null;}}var Cs=!(Cb.sc.all==="false"||Cb.sc.all===false);var Ct=this;var Cr=function(){var Cw=CV.selectedIdx[CS];if(Cj){if(Cj.selectedIdx[-1]){}else{Cw=Cw&&Cj.selectedIdx[Cj.map[Ch]];}}if(Cw&&!Cs){var Cz=Cb.rowH.sc.tks.split("\x1E"),C0=Ct.findInfoWInTargets(Cz);for(var Cy=0;Cy<C0.length;Cy++){var Cx=C0[Cy];if(!Ct.infoWindowsShown[Cx]){Cw=false;}}}return Cw;};if(Cr()){var Cs=!(Cb.sc.all==="false"||Cb.sc.all===false);if(Cs){Cd="OA:(All)";Co=true;CV.selectedIdx={};if(Cj){Cj.selectedIdx={};}this.prevSelected={mrow:-2,mcol:-1};}else{return null;}}else{CV.selectedIdx={};CV.selectedIdx[CS]=true;if(Cj){Cj.selectedIdx={};if(CY){Cj.selectedIdx[Cj.map[Ch]]=true;if(Cj.map[Ch]<CR.rowH.es.length){Cd=CR.rowH.es[Cj.map[Ch]].id;}}else{Cj.selectedIdx[-1]=true;}}this.prevSelected={mrow:Ch,mcol:Ce};}var Cf={};Cf.sc=Cb.sc;Cf.eid=Cd;CQ.push(Cf);}if(CQ.length>0){Ca=Ca|SELECTOR_ACTION;var Cn=Co?null:Ck.node;return{at:Ca,k:this.getModelK(),scObjList:CQ,anchor:Cn};}}return null;},getLinkDrillObjForTreeMode:function AD(Cg){var CX=0;var CU=null;var CS=this.model,CO=CS.gts,Ck=CO.row;var Cb=Cg.mcol,Cc=Cg.mrow,CT=this.colInfos;var Ci=Cg.treeNode;var Ce=Ci.treePath;var CR=Ce.split("_");var CV=CR.length-1;var CP=this.attrMapIdx;var Ch=null;var CZ=CT[Cb];var Cl=CZ&&CZ.type;if(Cl==u){if(Cc==-1){}else{var CW=Ck[CP[CV]];if(CW.lm&&CW.lm[0]&&CW.lm[0].links){CU={};CU.titleInfo=CW;var Ci=F(this.tree,Ce);CU._e=Ci.es[0]||{n:"",id:""};CU.v=CU._e.n;}}}else{if(Cl==CE){if(CZ.lm){Ch=CZ.order;var Ca=parseInt(Ch);var Cf=CO.col[0];if(Cf){CU={};CU.mix=Ca;CU.titleInfo=Cf;if(Cc==-1){CU._e=Cf.es[Ca]||{n:"",id:""};CU.v=CU._e.n;}else{var CQ=CU;var Ci=this.tree;for(var Cj=0;Cj<CR.length;Cj++){var Cd=CR[Cj];Ci=Ci.childrenTreeNodeList[Cd];var CY=CP[Cj];CW=Ck[CY];var Cm={};Cm.titleInfo=CW;Cm._e=Ci.es[0]||{n:"",id:""};Cm.v=Cm._e.n;CQ._lp=Cm;CQ.axis=BI;CQ=Cm;}}}}}}if(CU){this.highlightEntireRow=false;CX=CX|HYPERLINK_ACTION;if(CU.mix!=undefined){return{at:CX,k:this.getModelK(),node:CU,mix:Ca};}else{return{at:CX,k:this.getModelK(),node:CU};}}},getLinkDrillObjForNonTreeMode:function AJ(Cc){var CR=0;var CT=this.model,CP=CT.gts,Cb=CP.row;var CX=Cc.mcol,CU=Cc.mrow,CO=this.colInfos;var CQ=Cc.node,CS;this.highlightEntireRow=false;var CZ=this.attrMapIdx;var Ca=CO[CX];if(!this.isKPI){if(l===1&&BM===1&&CU!=-1){for(var CY in CO){var CV=CO[CY];if(CV.lm&&CV.type==u){this.highlightEntireRow=true;var CS=CV.lm;CR=CS&&CS.at||HYPERLINK_ACTION;CQ._e=this.rows[CU].model.elms[CV.order]||{id:"",n:""};CQ.v=CQ._e.n;break;}}}if(!this.highlightEntireRow){if(Ca.type==BU){return null;}var CS=Ca.lm;if(CS){CR=CS&&CS.at;if(Ca.type==u){if(CU===-1){CQ._e={};CQ._e.onTitle=true;CQ._e.id=CS.id;CQ._e.n=CS.n;CQ.v=CS.n;}else{CQ._e=this.rows[CU].model.elms[Ca.order]||{id:"",n:""};CQ.v=CQ._e.n;}}else{if(Ca.type==CE){CQ.mix=Ca.order;CQ.axis=BI;this.buildLeftParent(CQ,CU,CX);CR=this.rows[CU==-1?0:CU].model.refv[Ca.order].at||HYPERLINK_ACTION;}}}}}else{if(Ca.type==BU){return null;}var CS=Ca.lm;var CW=this.rows[CU].model.metricIdx;if(CS&&CS.lm&&CS.lm[CW]&&CS.lm[CW].links){CQ.mix=""+CW;CQ.axis=BI;this.buildLeftParent(CQ,CW,CX);CR=this.rows[CU].model.refv[0].at||HYPERLINK_ACTION;}else{CS=null;}}if(CS){CQ.titleInfo=CS;CR=CR|HYPERLINK_ACTION;if(CQ.mix!=undefined){return{at:CR,mcol:CX,mrow:CU,k:this.getModelK(),node:CQ,mix:CQ.mix};}else{return{at:CR,mcol:CX,mrow:CU,k:this.getModelK(),node:CQ};}}return null;},getActionObj:function BK(CP){var CQ=[];if(CP.mrow==-1){return null;}var CO=null;if(this.isTreeMode){CO=this.getSelectionObjForTreeMode(CP);}else{CO=this.getSelectionObjForNonTreeMode(CP);}if(CO){CQ.push(CO);return CQ;}else{if(this.isTreeMode){CO=this.getLinkDrillObjForTreeMode(CP);}else{CO=this.getLinkDrillObjForNonTreeMode(CP);}CQ.push(CO);}return CQ;},getDefaultHighlightRow:function A0(){var CO=this.attrMapIdx,CV=this.model.gts.row,CQ=this.colInfos,CY=CQ.length,CZ=null,CX=null,CP=true;if(!this.isTreeMode){if(this.isAllAttrSelectable){for(var Cd=0;Cd<CY;Cd++){var CW=this.colInfos[Cd],CS=CW.rowH;if(!CW.sc||!CS){continue;}CZ=CS.ctlMatrix;if(CZ){if(!this.hasOnlyInfoWTarget(CS)){CP=false;}if(!CX){CX={};for(var Cc=0;Cc<CZ.map.length;Cc++){if(CZ.selectedIdx[CZ.map[Cc]]){CX[Cc]=true;}}}else{for(var Cc in CX){if(!CZ.selectedIdx[CZ.map[Cc]]){delete CX[Cc];}}}}}if(CP||!CX||Object.keys(CX).length!==1){}else{var Ce=parseInt(Object.keys(CX)[0]);this.prevSelected={mrow:Ce,mcol:-1};}for(var Cd=0;Cd<CV.length;Cd++){if(CV[Cd].ctlMatrix){CV[Cd].ctlMatrix.selectedIdx={};}}}else{for(var Cd=0;Cd<CV.length;Cd++){var CS=CV[Cd],CZ=CS.ctlMatrix,CR=(CZ&&Object.keys(CZ.selectedIdx).length>0)?true:false;if(CR&&!this.hasOnlyInfoWTarget(CS)){CP=false;break;}}if(CP){for(var Cd=0;Cd<CV.length;Cd++){if(CV[Cd].ctlMatrix){CV[Cd].ctlMatrix.selectedIdx={};}}}}}else{if(this.currSelectedObj&&this.currSelectedObj.length<=0){this.currSelectedObj=[];var CU=function(Ci,Cg){var Ck=Ci.length;for(var Ch=0;Ch<Ck;Ch++){var Cj=Ci[Ch];if(Cj.attrElemIdx==Cg){return Cj;}}return null;};var Cf=this;var Ca=function(Cg,Cn){CZ=CV[Cf.attrMapIdx[Cn]].ctlMatrix;var Cj=Cg.childrenTreeNodeList;var Cm=Cj.length;if(Cm<=0){return ;}var Ck=null;if(CZ){for(var Ci in CZ.selectedIdx){Ck=CU(Cj,Ci);}if(Ck){Cf.currSelectedObj[Cn]=Ck;Ca(Ck,Cn+1);return true;}}else{Cf.currSelectedObj[Cn]=null;for(var Ch=0;Ch<Cm;Ch++){var Cl=Ca(Cj[Ch],Cn+1);if(Cl){return true;}}}return false;};Ca(this.tree,0);while(this.currSelectedObj.length>0&&!this.currSelectedObj[this.currSelectedObj.length-1]){this.currSelectedObj.pop();}for(var Cd=0;Cd<this.currSelectedObj.length;Cd++){var Cb=this.currSelectedObj[Cd];if(Cb){var CT=CO[Cd];CS=CV[CT];if(!this.hasInfoWOnNode(CS,true)){CP=false;break;}}else{continue;}}if(CP){this.currSelectedObj=[];}this.lastSelectedObj=Af.clone(this.currSelectedObj);return ;}}},getCGColInfo:function AA(CQ,CP){var CS=this.colInfos[CQ],CO=CS.CGColIdx>=0?true:false,CR=CS&&(CO?this.colInfos[CS.CGColIdx]:null);if(CP){if(CO){return CS.isFirstCGCol?CS:CR;}else{return CS;}}else{if(CO){return CS.isFirstCGCol?CR:CS;}else{return null;}}},updateSelectedStatus:function By(CX){if(this.isTreeMode){this.updateTreeSelection(CX);}else{if(this.isAllAttrSelectable&&this.unselectedRemainCells.length==0){var CV=this.rows,CS=CV.length,CW=this.prevSelected.mcol==-1?this.prevSelected.mrow:-2;for(var CR=0;CR<CS;CR++){var CP=CV[CR];if(CR==CW){CP.selected[-1]=true;}else{CP.selected[-1]=false;}}}else{var CO=this.colInfos,CT=CO.length;var CQ=function(Cb){var Cg=this.getCGColInfo(Cb,true);ctlMatrix=Cg.rowH.ctlMatrix,colInfoCG=this.getCGColInfo(Cb),ctlMatrixCG=colInfoCG&&colInfoCG.rowH.ctlMatrix;if(ctlMatrixCG&&!ctlMatrixCG.selectedIdx[-1]){ctlMatrix=ctlMatrixCG;}var CZ=ctlMatrix.map,Ch=this.rows,Cd=Ch.length,Ca=ctlMatrix.selectedIdx,Cf=Cg.associateAttr;for(var Cc=0;Cc<Cd;Cc++){var CY=Ch[Cc];if(Ca[CZ[Cc]]){CY.selected[Cb]=true;for(var Ce in Cf){CY.selected[Cf[Ce]]=true;}}else{CY.selected[Cb]=false;for(var Ce in Cf){CY.selected[Cf[Ce]]=false;}}}};for(var CR=0;CR<CT;CR++){var CU=CO[CR];if(CU.rowH&&CU.rowH.ctlMatrix){CQ.call(this,CR);}}}}},performActionAndDoHighlight:function BL(CR,CP){var CO=CR&&CR[0];this.hasNonifwTarget=this.hasNoninfowindowTarget(CO);if(CO.at&SELECTOR_ACTION){if(this.isTreeMode){this.updateSelectedStatus(this.tree);this.updateHighlightForCurrRenderRows();this.lastSelectedObj=Af.clone(this.currSelectedObj);}else{this.updateSelectedStatus();this.updateHighlightForCurrRenderRows();}var CQ=B6.isAndroid&&!this.isTablet;var CT=CQ&&!this.hasNonifwTarget;if(CT){var CS=this;window.setTimeout(function(){CS.performAction(CR);},100);}else{this.performAction(CR);}}else{if(CO.at&HYPERLINK_ACTION){this.highlightForLD(CP.mrow,CP.mcol,CP.node);this.performAction(CR);}}},updateUnselectedRemainCells:function z(Ca){var CW=false;for(var CT=this.unselectedRemainCells.length-1;CT>=0;CT--){var Cb=this.unselectedRemainCells[CT],CZ=Cb.mcol,CV=Cb.mrow,Cc=this.getCGColInfo(CZ,true);if(Cc.sc){var CU=Cc.rowH.ctlMatrix,CS=this.getCGColInfo(CZ),CP=CS&&CS.rowH.ctlMatrix,CY=this.colInfos[CZ].order,CO=CY.indexOf(":CG")===CY.length-3&&CY.length>=3;var CR=CU.map[CV];elementId=Cc.rowH.es[CR].id;if(!elementId||elementId.substring(0,1)==="D"){continue;}else{if(CU.selectedIdx[CR]){if(Ca){if(CZ==Ca.mcol){var CQ=CO?CP:CU,CX=CQ&&CQ.map[Ca.mrow];if(CX==CR){CW=true;}}continue;}CU.selectedIdx={};if(CP){CP.selectedIdx={};}}else{CU.selectedIdx={};CU.selectedIdx[CR]=true;if(CP){CP.selectedIdx={};if(CO){CP.selectedIdx[CP.map[CV]]=true;}else{CP.selectedIdx[-1]=true;}}}}}}return CW;},highlightCellsByRowInfo:function CD(CO){var CU=CO.rowRef;if(!CU){return ;}var CQ=CU[P];var CY=CU[BS];var CP=CQ&&CQ.childNodes;var CX=CY&&CY.childNodes;var CT=CP&&CP.length||0,CW=CX&&CX.length||0;var CV=CT+CW;for(var CS=0;CS<CV;CS++){var CR=CS<CT?CP[CS]:CX[CS-CT];this.highlightCell(CR,CO.selected[CS]);}},setSelectedStyle:function A2(CO){if(CO==0){this.selectedStyle="background-color:#015DE6;color:#FFFFFF;";}else{if(CO==1){this.selectedStyle="background-color:rgba(1,93,230, 0.7);color:#FFFFFF;";}else{this.selectedStyle="background-color:rgba(1,93,230, 0.5);color:#FFFFFF;";}}},highlightTreeArrow:function r(CP,CO){if(this.treeColumnIdx>-1&&this._leftChart){if(CO){this._leftChart.setTreeArrow(CP,"white");}else{this._leftChart.setTreeArrow(CP);}}},highlightCell:function o(CP,CO){if(CO){BR(CP,K+this.selectedStyle);if(this.selectedClass&&this.selectedClass.length>0){BT.addClass(CP,this.selectedClass);}}else{BR(CP,AO);if(this.selectedClass&&this.selectedClass.length>0){BT.removeClass(CP,this.selectedClass);}}},highlightForLD:function CI(CP,CR,CQ){if(this.highlightEntireRow&&!this.isTreeMode){this.highlightRowByRowInfo(this.rows[CP],true);}else{if(CQ){this.highlightCell(CQ,true);}var CU=this.colInfos[CR],CS=CU.associateAttr;var CT=CQ.parentNode.childNodes;for(var CO in CS){this.highlightCell(CT[CS[CO]],true);if(this.treeColumnIdx==CO){this.highlightTreeArrow(this.rows[CP]);}}}},highlightRowByRowInfo:function Aj(CQ,CP){var CO=CQ.rowRef;if(!CO){return ;}var CR=CQ.treeNode?CQ.treeNode.level:0;this.setSelectedStyle(CR);if(CO[P]){this.highlightRow(CO[P],CP);}if(CO[BS]){this.highlightRow(CO[BS],CP);}this.highlightTreeArrow(CQ,CP);},highlightRow:function CG(CR,CO){var CQ=CR.childNodes;for(var CP=0;CP<CQ.length;CP++){if(CO){BR(CQ[CP],K+this.selectedStyle);if(this.selectedClass&&this.selectedClass.length>0){BT.addClass(CQ[CP],this.selectedClass);}}else{BR(CQ[CP],AO);if(this.selectedClass&&this.selectedClass.length>0){BT.removeClass(CQ[CP],this.selectedClass);}}}},isAttrSelectable:function CH(CP){var CO=this.attrMapIdx[CP];var CQ=this.model.gts.row[CO].ctlMatrix;if(CQ){return true;}return false;},updateTreeSelection:function Aa(CO){this.selectOrClearTreeNodes(CO,true,0);this.selectOrClearTreeNodes(CO,false,0);},findTheTreeNodeWithSameID:function e(CP,CS){var CR=CP.length;for(var CO=0;CO<CR;CO++){var CQ=CP[CO];if(CQ.id==CS){return CQ;}}return null;},selectOrClearTreeNodes:function Aw(CT,CO,CR){if(!CT){return ;}if(CO&&this.lastSelectedObj.length<=CR){return ;}if(!CO&&this.currSelectedObj.length<=CR){return ;}var CP=null;if(CO){CP=this.lastSelectedObj[CR];}else{CP=this.currSelectedObj[CR];}var CS=CT.childrenTreeNodeList,CU=CS.length;if(CP){CT=this.findTheTreeNodeWithSameID(CS,CP.id);if(CT){CT.selected=CO?false:true;this.selectOrClearTreeNodes(CT,CO,CR+1);}}else{for(var CQ=0;CQ<CU;CQ++){this.selectOrClearTreeNodes(CS[CQ],CO,CR+1);}}},updateHighlightForCurrRenderRows:function Az(){var CQ=this.rows;var CO=CQ.length,CR=null;for(var CP=this.startCnt;CP<this.endCnt;CP++){CR=CQ[CP];if(this.isTreeMode){this.highlightRowByRowInfo(CR,CR.treeNode.selected);}else{if(this.isAllAttrSelectable&&this.unselectedRemainCells.length==0){this.highlightRowByRowInfo(CR,CR.selected[-1]);}else{this.highlightCellsByRowInfo(CR);}}}if(this.isTreeMode){CQ=this.dockedHeaderRows;CO=CQ.length;for(var CP=0;CP<CO;CP++){CR=CQ[CP];this.highlightRowByRowInfo(CR,CR.treeNode.selected);}CQ=this.dockedHeaderReplaceRows;CO=CQ.length;for(var CP=0;CP<CO;CP++){CR=CQ[CP];this.highlightRowByRowInfo(CR,CR.treeNode.selected);}}},getSelectedTreeNodeListFromTreePath:function f(CO){if(!CO){return[];}var CQ=[];var CS=this.tree;for(var CP=0;CP<CO.length;CP++){var CR=CO[CP];CS=CS.childrenTreeNodeList[CR];if(!CS){break;}if(this.isAttrSelectable(CP)){CQ[CP]=CS;}else{CQ[CP]=null;}}return CQ;},sortOnTap:function Bu(CQ){if(this.isKPI){return ;}var CT=this.colInfos[CQ];if(CT.type==BU||CT.type==A8||CT.type==CL){return ;}if(CQ!=this.sortKeyIdx&&this.sortKeyIdx!=undefined){this.toggleSortOrderAndArrow(this.sortKeyIdx,AF.NORMAL);}var CR=(CT.sortOrder+1)%3;this.toggleSortOrderAndArrow(CQ,CR);this.sortKeyIdx=CQ;var CP=this,CO=++this.sortID;var CS={success:function(CX){if(CO!=CP.sortID){console.log("current sortID:"+CP.sortID+", this sortID:"+CO+", obsolete data, ignore");return ;}var CV=CP.getModelK();if(CX.eg){return ;}CP.model=CX;CP.model.k=CV;CP.storeMCStatus(true);CP.pushToReusePool();CP.rowsNeedRebuild=true;L.call(CP,true);CP.restoreMCStatus();CP.firstRowIdxOnScrn=0;CP.getCurrRenderRowCount();var CY=CP.rows;for(var CW=CP.startCnt;CW<CP.endCnt;CW++){CY[CW].rowRef=CP.popFromReusePool();}var CU={x:0,y:0};if(!CP.enableSmoothScroll){CP._leftChart.reRenderRows(CU);}else{CP._leftChart.reRenderRows(CU);CP._rightChart.reRenderRows(CU);}CP.getDefaultHighlightRow();CP.updateSelectedStatus(CP.tree);CP.updateHighlightForCurrRenderRows();if(CP.isTreeMode){CP.initDockedHeaders();}}};this.doSort(CR,CS);},toggleSortOrderAndArrow:function A(Ci,CY){var Ce=this.colInfos[Ci],CV=Ce.thRef,Ca=Ce.sortOrder;if(!CV){return ;}Ce.sortOrder=CY;var CT=this.isAndroid;var Ck=BT.getComputedStyle(CV),CU=Ck["text-align"],Cl=Math.round(4*Br),Cm=Math.round(15*Br),CX=Cl*2,Ch,Cc,Cj=this.getTextDimesion(CV.innerHTML,CV),CP=Cj.height>Cm?Cm:Cj.height||Cm,CR=Cj.width>parseInt(Ce.contentWidth)?2:1;if(CU=="left"||CU=="center"){Ch="padding-left";Cc="left";}else{Ch="padding-right";Cc="right";}var Cf=Ca==AF.NORMAL&&CY!==AF.NORMAL,Cn=Ca!==AF.NORMAL&&CY==AF.NORMAL;if(Cf){CV.style[Ch]=(parseInt(Ck[Ch])+CX)+"px";if(!CT){CV.style.width=(Ce.styleWidth-CX)+"px";}}else{if(Cn){CV.style.width=Ce.styleWidth+"px";CV.style[Ch]=Ce.padding[Cc]+"px";}}Ce.titleOverflow=this.utils.truncateTextToLineWithWordWrap2(CV,Ce.title,this.textCanvas,CR);Cj=this.getTextDimesion(CV.innerHTML,CV);var CS=this.sortArrowCanvas;var CW=B6.position(CV),CZ,Cp,Cq=this.enableSmoothScroll&&Ci>=this.attrColumnCount;if(Cq){CZ=B6.position(this._rightChart.domNode);Cp=CW.x-CZ.x+this._leftChart.domNode.offsetWidth;}else{CZ=B6.position(this.domNode);Cp=CW.x-CZ.x;}var CQ=Cj.width;if(CU=="left"){CS.style.left=(Cp+Ce.padding[Cc])+"px";}else{if(CU=="center"){CS.style.left=Math.round(Cp+(Ce.colWidth-Ce.padding.left-Ce.padding.right-CX-CQ)/2+Ce.padding[Cc])+"px";}else{CS.style.left=(Cp+Ce.colWidth-Ce.padding[Cc]-CX)+"px";}}if(Cq){var Co=this._scroller.origin;this.utils.translateCSS(-Co.x,-Co.y,false,CS);CS.style.zIndex=0;}else{this.utils.translateCSS(0,0,false,CS);CS.style.zIndex=1;}var CO=Cj.height;if(CR>1){CS.style.top=Math.round((this.headerTableOffsetHeight-CO*CR)/2+CO*(CR-1)+(CO-CP)/2)+"px";}else{CS.style.top=Math.round((this.headerTableOffsetHeight-CP)/2)+"px";}var Cb=Cc=="left"?0:CX-Cl,Cd=Math.round(3*Br);CS.height=CP;CS.width=CX;var Cg=CS.getContext("2d");Cg.save();Cg.fillStyle=Ck.color;Cg.strokeStyle=Ck.color;if(CY==AF.ASCENDING){Cg.beginPath();Cg.moveTo(Cb+0,Cd);Cg.lineTo(Cb+Cl/2,0);Cg.lineTo(Cb+Cl,Cd);Cg.lineTo(Cb+0,Cd);Cg.closePath();Cg.fill();Cg.lineWidth=1;Cg.moveTo(Cb+Cl/2,Cd);Cg.lineTo(Cb+Cl/2,CP);Cg.stroke();}else{if(CY==AF.DESCENDING){Cg.beginPath();Cg.moveTo(Cb+0,CP-Cd);Cg.lineTo(Cb+Cl/2,CP);Cg.lineTo(Cb+Cl,CP-Cd);Cg.lineTo(Cb+0,CP-Cd);Cg.closePath();Cg.fill();Cg.lineWidth=1;Cg.moveTo(Cb+Cl/2,0);Cg.lineTo(Cb+Cl/2,CP-Cd);Cg.stroke();}}Cg.restore();},doSort:function(CV,CZ){var CQ=this.sortKeyIdx,CO=this.colInfos[CQ],CW=this.getDataService(),CR=[],CT;var CU=CV==AF.ASCENDING?true:false;if(CO.type==u){CT=1;if(CV==AF.NORMAL){}else{if(this.isTreeMode){var CY=this.attrMapIdx,Ca=this.model.gts.row;for(var CS=0;CS<CY.length-2;CS++){var CP=CY[CS],CX=Ca[CP];CR.push({id:CX.id,fid:CX.fid,asc:CU});}}else{var CX=CO.rowH;CR.push({id:CO.id,fid:CO.fid,asc:CU});}}}else{if(CO.type==CE){if(this.isTreeMode){CT=3;}else{CT=2;}if(CV==AF.NORMAL){}else{CR.push({id:CO.mid,asc:CU});}}}CW.applySorts(this.getModelK(),CT,CR,CZ);},multiTap:true,touchTap:function(CR){var CS=this;if(CS._tooltip.show){Bp.call(this);return ;}var CQ=mstrmojo.dom.findAncestorByAttr(CR.target,"mcol",true,this.domNode);if(!CQ){this._leftChart.dockedHeaderReplaceDiv.style.display="none";CR.target=document.elementFromPoint(CR.pageX,CR.pageY);CQ=mstrmojo.dom.findAncestorByAttr(CR.target,"mcol",true,this.domNode);this._leftChart.dockedHeaderReplaceDiv.style.display="";}if(CQ&&CQ.node){var CV=parseInt(CQ.node.getAttribute("mrow"));var Cb=parseInt(CQ.node.getAttribute("mcol"));if(CV==-1){return ;}if(this.isTreeMode){if(CV>=0){var CO=this.rows[CV];var Ca=CO&&CO.treeNode;if(CR.count==2||(CR.count==1&&Cb==this.treeColumnIdx)){if(!Ca.isLeaf){this.rowsNeedRebuild=true;var CU=CQ.node.parentNode.getAttribute("rowType");if(Ca.needExpand){CJ.call(this,CO,CU);}else{Aq.call(this,CO,CU);}}return ;}}var Cc={node:CQ.node,treeNode:Ca,mcol:Cb,mrow:CV};var CP=this.getActionObj(Cc);var CT=CP&&CP[0];if(CT){this.performActionAndDoHighlight(CP,Cc);return ;}}else{var Cc={node:CQ.node,mcol:Cb,mrow:CV};var CP=this.getActionObj(Cc);var CT=CP&&CP[0];if(CT){this.performActionAndDoHighlight(CP,Cc);return ;}}var CY=this;var CX=CQ.node.parentNode;var CO=null;if(CX.getAttribute("rowType")==s){var CW=B8(this.dockedHeaderRows,CV);if(CW>=0){CO=this.dockedHeaderRows[CW];}else{CW=B8(this.dockedHeaderReplaceRows,CV);CO=this.dockedHeaderReplaceRows[CW];}}else{CO=this.rows[CV];}var CZ=CO&&CO.rowRef&&CO.rowRef[Cb];if(CZ){this.showChartTooltip(CZ,CR);}}},shouldTouchBubble:function p(CP){var CO=CP.isVertical;return CO?this._super(CP):this.enableSmoothScroll&&Bd.call(this,CP)?false:true;},multiTouch:true,touchMultiBegin:function(CU){Bp.call(this);this.initTouchObj=CU;var CS;var CR;if(CU.evt.touches&&CU.evt.touches.length==2){CS=CU.evt.touches[0];CR=CU.evt.touches[1];}else{CS=CU;CR={pageX:100,pageY:100,target:CU.target};}var CT=CS.pageX-CR.pageX;var CQ=CS.pageY-CR.pageY;this.initDiffDiff=CT*CT+CQ*CQ;this.relScaleFactor=1;var CP=mstrmojo.dom.findAncestorByAttr(CS.target,"mrow",true,this.domNode);var CO=mstrmojo.dom.findAncestorByAttr(CR.target,"mrow",true,this.domNode);if(CP&&CP.value&&CO&&CO.value){this.centerRowIdx=Math.round((parseInt(CP.value)+parseInt(CO.value))/2);}else{this.centerRowIdx=this.firstRowIdxOnScrn;}},touchMultiMove:function(CS){var CQ;var CP;if(CS.evt.touches&&CS.evt.touches.length==2){CQ=CS.evt.touches[0];CP=CS.evt.touches[1];}else{CQ=CS;CP={pageX:100,pageY:100};}var CR=CQ.pageX-CP.pageX;var CO=CQ.pageY-CP.pageY;this.curDiffDiff=CR*CR+CO*CO;},touchMultiEnd:function(CO){if(this.isTreeMode){if(this.curDiffDiff>this.initDiffDiff){this.onPinchOpen();}else{if(this.curDiffDiff<this.initDiffDiff){this.onPinchClose();}}}},onPinchOpen:function At(){var CP=O.call(this);var CQ=CP;if(CQ>=this.maxTreeLevel){CQ=this.maxTreeLevel-1;}var CO=this.rows[this.centerRowIdx].treeNode;var CR=this.centerRowIdx-this.firstRowIdxOnScrn;x.call(this,CQ,CO,CR);},onPinchClose:function Bf(){var CP=O.call(this);var CQ=CP-2;if(CQ<-1){CQ=-1;}var CO=this.rows[this.centerRowIdx].treeNode;if(CO.level>CQ+1){CO=A3(this.tree,CO.treePath,CQ+1);}var CR=this.centerRowIdx-this.firstRowIdxOnScrn;x.call(this,CQ,CO,CR);},destroyChartWidget:function Bm(){if(this.rows&&this.rows.length>0&&this.rowsReusePool){this.pushToReusePool();}if(this.dockedHeaderRows&&this.dockedHeaderReplaceRows){this.clearDockedHeader();}if(this.rowsReusePool&&this.rowsReusePool.length>0){var CU=this.rowsReusePool,CQ=CU.length,CV=this.colInfos,CT=CV.length;for(var CS=0;CS<CQ;CS++){var CP=CU[CS];if(CP[P]){delete CP[P];}if(CP[BS]){delete CP[BS];}for(var CR=0;CR<CT;CR++){var CO=CP[CV[CR].colIdx];if(CO&&CO.destroy){CO.destroy();delete CP[CV[CR].colIdx];}}}this.rowsReusePool=[];}},destroy:function X(){if(this.rows){delete this.rows;}if(this.rowsReusePool){delete this.rowsReusePool;}if(this.dockedHeaderRows){delete this.dockedHeaderRows;}if(this.dockedHeaderReplaceRows){delete this.dockedHeaderReplaceRows;}if(this.selectorTargets){delete this.selectorTargets;}this._super();}});})();(function(){mstrmojo.requiresCls("mstrmojo.DynamicClassFactory","mstrmojo._CanSupportTransaction","mstrmojo._IsEditableXtab","mstrmojo.AndroidInteractiveGridXtab","mstrmojo.DocXtabModel","mstrmojo.DocInteractiveGridXtab","mstrmojo.AndroidVisTimeSeries","mstrmojo.DocVisTimeSeries","mstrmojo.VisMicroChart","mstrmojo.maps.AndroidRptMap","mstrmojo.maps.AndroidMapModel","mstrmojo.maps.AndroidDocMap","mstrmojo.ImageCarousel","mstrmojo.PhotoUploader","mstrmojo.AndroidImageLayout","mstrmojo.VisHeatMap");var B={AndroidImageMapStyle:{s:"ImageMapVisualizationDataStyle",c:"AndroidImageLayout"},MicroChartsVisualizationStyle:{s:"MicroChartVisualizationDataStyle",c:"VisMicroChart"},TimeSeriesAjaxVisualizationStyle:{dc:"DocVisTimeSeries",s:"TimeSeriesVisualizationDataStyle",c:"AndroidVisTimeSeries"},ImageViewerVisualizationStyle:{s:"VisualizationDataStyle",c:"ImageCarousel"},AndroidPhotoUploaderStyle:{s:"VisualizationDataStyle",c:"PhotoUploader"},HeatMapVisualizationStyle:{s:"HeatMapVisualizationDataStyle",c:"VisHeatMap"},AndroidMapStyle:{dc:"maps.AndroidDocMap",s:"MapVisualizationDataStyle",c:"maps.AndroidRptMap",m:"maps.AndroidMapModel"},InteractiveGridAjaxVisualizationStyle:{dc:"DocInteractiveGridXtab",s:"InteractiveGridDataStyle",c:"AndroidInteractiveGridXtab",m:"DocXtabModel"}};mstrmojo.AndroidVisList=mstrmojo.provide("mstrmojo.AndroidVisList",{getVis:function C(D){return B[D]||(mstrConfig&&mstrConfig.pluginsVisList&&mstrConfig.pluginsVisList[D])||null;},getVisClass:function A(D,E){if(E.txi&&E.t===115){D=mstrmojo.DynamicClassFactory.newComponent(D,[mstrmojo._CanSupportTransaction,mstrmojo._IsEditableXtab]);}return D;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.DocBuilder","mstrmojo.rw._IsReportServicesDocBuilder","mstrmojo.MobileDocLayoutViewer","mstrmojo.MobileDocXtabGraph","mstrmojo._XtabSeamlessIncrementalFetch","mstrmojo._HasScrollbox","mstrmojo.MobileXtab","mstrmojo.graph.MobileDocXtabCanvasGraph","mstrmojo.DynamicClassFactory","mstrmojo.android.DocSelectorViewFactory","mstrmojo.android.DocPanelStack","mstrmojo.android.AndroidDocPanel","mstrmojo.android.ui.DocButton","mstrmojo.android.HTMLContainer","mstrmojo._HasRelativeUrls","mstrmojo._Formattable","mstrmojo._IsDocXtab","mstrmojo._IsSelectorTarget","mstrmojo._IsInteractiveGrid","mstrmojo.DocInfoWindow","mstrmojo.android.AndroidDICConfig","mstrmojo.AndroidVisList","mstrmojo.array","mstrmojo.hash","mstrmojo.maps.AndroidDocMap","mstrmojo.maps.MobileMapInfoWindowLayoutViewer","mstrmojo.android.ui._IsTouchLink","mstrmojo.android.DocTextfield","mstrmojo.DocVisModel","mstrmojo._CanSupportTransaction","mstrmojo._IsEditableXtab","mstrmojo._HasDrillLinks");var N=mstrmojo.DynamicClassFactory.newComponent,G=mstrmojo._HasRelativeUrls,A=mstrmojo.Obj.free,M=mstrmojo.EnumRWUnitType,J=mstrmojo.array,L=mstrmojo.hash;mstrmojo.DocXtab=N(mstrmojo.MobileXtab,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo._IsDocXtab],{scriptClass:"mstrmojo.DocXtab",scrollerConfig:{scrollPast:false}});var I=(!!mstrMobileApp&&!!mstrMobileApp.useNativeMap&&mstrMobileApp.useNativeMap())?"androidmap":"jsmap";mstrmojo.maps.AndroidDocLayoutMap=N(mstrmojo.maps[I].AndroidDocMap,null,{scriptClass:"mstrmojo.maps.AndroidDocLayoutMap"});mstrmojo.MobileDocImage=N(mstrmojo.DocImage,[G],{scriptClass:"mstrmojo.MobileDocImage",relativeUrls:["v"]});mstrmojo.MobileDocHTMLContainer=N(mstrmojo.DocHTMLContainer,[G],{scriptClass:"mstrmojo.MobileDocHTMLContainer",relativeUrls:["v"]});var K=mstrmojo.DocLayout.prototype.formatHandlers.domNode;J.removeItem(K,"border");J.removeItem(K,"background-color");mstrmojo.MobileDocBuilder=mstrmojo.declare(mstrmojo.DocBuilder,[mstrmojo.rw._IsReportServicesDocBuilder],{scriptClass:"mstrmojo.MobileDocBuilder",visList:mstrmojo.AndroidVisList,createSelectorFactory:function P(){return new mstrmojo.android.DocSelectorViewFactory();},createClassMap:function C(){var S=this._super();S[M.TEXTFIELD+"B"]={n:"Button",scriptClass:"mstrmojo.android.ui.DocButton"};S[M.HTMLCONTAINER]={n:"HTMLContainer"};S[M.GRAPH]=(mstrApp.onMobileDevice()&&mstrApp.useBinaryFormat)?{n:"graph.MobileDocXtabCanvasGraph",scriptClass:"mstrmojo.graph.MobileDocXtabCanvasGraph"}:{n:"MobileDocXtabGraph",scriptClass:"mstrmojo.MobileDocXtabGraph"};S[M.IMAGE]={n:"MobileDocImage",scriptClass:"mstrmojo.MobileDocImage"};S[M.PANELSTACK]={n:"PanelStack",scriptClass:"mstrmojo.android.DocPanelStack"};S[M.PANEL]={n:"Panel",scriptClass:"mstrmojo.android.AndroidDocPanel"};S[M.TEXTFIELD]={n:"Textfield",scriptClass:"mstrmojo.android.DocTextfield"};return S;},getDefaultMojoVisModel:function H(){return mstrmojo.DocVisModel;},getLayoutViewerClass:function D(T){if(T.defn.iw){var S="MapInfoWindowLayoutViewer";if(mstrApp.onMobileDevice()){S="Mobile"+S;}return mstrmojo.maps[S];}return mstrmojo.MobileDocLayoutViewer;},newLayout:function Q(X,U){var S=U.defn.visName;if(S){var j=U.data.gbys;var T=X,V=L.clone(U);var d=mstrmojo.Vis.getVisGrid(X,U,U.defn.visGK);if(d){U.data=d.data;if(U.defn.vp&&Object.keys(U.defn.vp).length>0){d.data.vp=U.defn.vp;}U.data.layoutModel=T;U.data.layoutNode=V;U.data.gbys=j;}if(U.data.gts!==undefined||U.data.series!==undefined){U.defn=X.makeObservable(U.defn);this.addDisposable(U.defn);var Z=this.visList.getVis(S),Y=(Z.dc!==undefined)?Z.dc:Z.c,g,h;try{if(/AndroidDocMap/.test(Y)){Y="maps.AndroidDocLayoutMap";}var f=L.walk(Y,mstrmojo),b=L.walk(Z.m||"DocVisModel",mstrmojo),W=this.parent.controller;g=new f({id:(d&&d.id)||U.id,node:U,n:U.defn.title,controller:W,gb:U.data.gbys,isFullScreenWidget:true});h=new b({xtab:g,controller:W,docModel:X});g.setModel(h);}catch(a){g=A(g);h=A(h);throw a;}return g;}}return this._super(X,U);},newHTMLContainer:function(S,U){var T=(U.defn.ht===0)?"MobileDocHTMLContainer":"android.HTMLContainer",V=mstrmojo.hash.walk(T,mstrmojo);return new V({id:U.id,node:U,model:S});},newInfoWindow:function R(S){return new mstrmojo.DocInfoWindow(S);},getLinkDrillMixins:function O(){return[mstrmojo.android.ui._IsTouchLink,mstrmojo._HasDrillLinks];},createPortlet:function E(T,U,S){if(U.defn.ifw){var W=S.selectedKey,X=(S.model.getUnitDefinitions(W)||{})[W],V=X&&X.ttl;S.defn.ttl=((S.titleSrc===S.TTL_SRC_PANEL)?V:S.defn.ttl)||"";if(!mstrApp.isTablet()){S.title=S.defn.ttl;return S;}}return this._super(T,U,S);},getEditableXtab:function F(){if(!mstrmojo.EditableXtab){mstrmojo.EditableXtab=N(mstrmojo.DocXtab,[mstrmojo._CanSupportTransaction,mstrmojo._IsEditableXtab],{scriptClass:"mstrmojo.EditableXtab"});}return mstrmojo.EditableXtab;},getDefaultXtab:function B(){return mstrmojo.DocXtab;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.android.ui.RootView","mstrmojo.android.ui.ViewSwitcher","mstrmojo.android.ui.ActionBar","mstrmojo.android.ui.FolderView","mstrmojo.android.ui.ResultSetView","mstrmojo.android.ui.DocumentView","mstrmojo.graph.MobileXtabCanvasGraph","mstrmojo.android.ui.PromptsView","mstrmojo.android.ui.PropertiesView","mstrmojo.android.ui.SettingsView","mstrmojo.AndroidXtabStandalone","mstrmojo.MobileDocBuilder","mstrmojo.MobileGraph","mstrmojo.hash","mstrmojo.android.ui.NoProjectsView");mstrmojo.android.factories.ViewFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.android.factories.ViewFactory",newRootView:function J(N){return new mstrmojo.android.ui.RootView(N);},newActionBarView:function G(N){return new mstrmojo.android.ui.ActionBar(N);},newSwitcherView:function F(N){return new mstrmojo.android.ui.ViewSwitcher(N);},newFolderView:function K(N){return new mstrmojo.android.ui.FolderView(N);},newResultSetView:function M(N){return new mstrmojo.android.ui.ResultSetView(N);},newXtabView:function I(P){var N=P.viz,O=mstrmojo.hash.walk((N)?N.c:"AndroidXtabStandalone",mstrmojo);return new O(P);},newDocumentView:function C(O){var N=new mstrmojo.android.ui.DocumentView(mstrmojo.hash.copy(O,{cssClass:"mstrmojo-DocumentView"}));N.builder=new mstrmojo.MobileDocBuilder({parent:N});return N;},newGraphView:function A(O){var N=(mstrApp.onMobileDevice()&&mstrApp.useBinaryFormat)?mstrmojo.graph.MobileXtabCanvasGraph:mstrmojo.MobileGraph;return new N(O);},newPromptsView:function E(N){return new mstrmojo.android.ui.PromptsView(N);},newPropertiesView:function L(N){return new mstrmojo.android.ui.PropertiesView(N);},newSettingsView:function B(N){return new mstrmojo.android.ui.SettingsView(N);},newCalendarDialogView:mstrmojo.emptyFn,newNoProjectsView:function H(N){return new mstrmojo.android.ui.NoProjectsView(N);},newHeatMapEditorView:function(N){return new mstrmojo.VisHeatMapPopup(N);},newView:function D(N,O){return this["new"+N+"View"](O);}});}());