(function(){function AI(Ao,Ap){return Ap||(Ao||window).event;}mstrmojo.PositionType=null;var Al=!!document.all,AG=document.documentMode,q=navigator.userAgent,i=false,g=false,e=false,d=false,R=false,s=false;if(Al){if(window.mstrConfig&&mstrConfig.isEdgeModeEnabled){i=!!q.match(/MSIE 6/);g=((!!q.match(/MSIE 7/)&&!AG)||AG===7);e=(AG===8);d=(AG===9);R=(AG===10);s=(!AG||AG<=9);}else{i=!!q.match(/MSIE 6/);g=!!q.match(/MSIE 7/);e=!!q.match(/MSIE 8/);d=!!q.match(/MSIE 9/);R=!!q.match(/MSIE 10/);s=!R;}}var c=!Al&&!!q.match(/Firefox/),l=0,r=!!q.match(/Android/),Ac=!!q.match(/iPad/),AM=!!q.match(/iPhone/),AU=!!document.createTouch||r,p=!!q.match(/PlayBook/),O=!!q.match(/Windows Phone/),Am=!Al&&!!q.match(/Trident.*rv/),b=c?"-moz-":(Al||Am)?"":"-webkit-",AH=c?"Moz":(R||Am)?"":Al?"ms":"webkit",AR=((R||Am)?"t":"T"),AL=AH+AR+"ransition";function Ag(){return AH+AR+"ransform";}function AE(){return AL+"Property";}function S(){return AL+"Duration";}function N(){return(R||c)?"transitionend":"webkitTransitionEnd";}function f(){return AH+"BoxShadow";}var Aj=Ag(),AZ=AE(),z=S(),A=N(),n=f();function AQ(){if(!l&&c){var Ao=q.match(/.*Firefox\/([\d|\.]*).*/);if(Ao){l=parseFloat(Ao[1]);}}return l;}function AW(){var Ap=0,At=0,Aq=window,Ar=document,Ao=Ar.body,As=Ar.documentElement;if(typeof Aq.pageYOffset==="number"){At=Aq.pageYOffset;Ap=Aq.pageXOffset;}else{if(Ao&&(Ao.scrollLeft||Ao.scrollTop)){At=Ao.scrollTop;Ap=Ao.scrollLeft;}else{if(As&&(As.scrollLeft||As.scrollTop)){At=As.scrollTop;Ap=As.scrollLeft;}}}return{x:Ap,y:At};}function AF(Ao){Ao=Ao||0;Ao=String(Ao);return((Ao.indexOf("%",0))!==-1)?Ao:(Ao+"px");}function AO(Aq,Au,At,As,Ar){if(!mstrmojo.dom.isWinPhone){As=(As||false||this.isHWAccelerated);}else{As=false;}var Ap=Ar+(As?"3d":"")+"(",Ao=As?(","+At+")"):")";return Ap+Aq+","+Au+Ao;}var Aa=2,V=3;function u(Au,At,Ax){var Aw=Au.style,Aq=Aw.display,As=this.windowDim(),Ar=AW();Aw.display="block";var Av=As.w-Au.clientWidth,Ay=Math.max(As.h-Au.clientHeight,0),Ao={4:0,5:Av,3:Av/2},Ap={1:0,3:Ay/2,2:Ay};Aw.left=Ao[At]+Ar.x+"px";Aw.top=Ap[Ax]+Ar.y+"px";Aw.display=Aq;}function m(Ar,Aq,As,Ao){if(Ar.addEventListener){return Ar.addEventListener(Aq,As,!!Ao);}As._id=As._id||m.guid++;Ar.events=Ar.events||{};var Ap=Ar.events[Aq];if(!Ap){Ap=Ar.events[Aq]={};if(Ar["on"+Aq]){Ap[0]=Ar["on"+Aq];}}Ap[As._id]=As;function At(Aw){Aw=Aw||window.event;var Av=this.events[Aw.type],Au;for(Au in Av){Av[Au].call(this,Aw);}}Ar["on"+Aq]=At;}m.guid=1;function h(Aq,Ap,Ar,Ao){if(!Aq){return ;}if(Aq.removeEventListener){Aq.removeEventListener(Ap,Ar,!!Ao);}else{if(Aq.events&&Aq.events[Ap]){delete Aq.events[Ap][Ar._id];}}}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:q,isIE:Al,isIE6:i,isIE7:g,isIE8:e,isIE9:d,isIE10:R,isIEW3C:Am,isNSIE:s,isDXIE:s,isFF:c,isWK:!!q.match(/AppleWebKit/),isSafari:!!q.match(/Safari/)&&!q.match(/Chrome/),isChrome:!!q.match(/AppleWebKit/)&&q.match(/Chrome/),isHWAccelerated:!r,isAndroid:r,isIPad:Ac,isPlayBook:p,isWinPhone:O,isMobile:Ac||AM||O||r,supportsTouches:AU,TOUCHSTART:AU?"touchstart":"mousedown",TOUCHMOVE:AU?"touchmove":"mousemove",TOUCHEND:AU?"touchend":"mouseup",TOUCHCANCEL:AU?"touchcancel":"",RESIZE:AU?"orientationchange":"resize",CSS3_PREFIX:b,CSS3_BOXSHADOW:n,CSS3_TRANSFORM:Aj,CSS3_TRANSITION:AL,CSS3_TRANSITION_PROPERTY:AZ,CSS3_TRANSITION_DURATION:z,CSS3_TRANSITION_END:A,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh"},htmlFeatures:{FILE_READER:"fr"},MOUSE_BUTTON:{LEFT:1,RIGHT:2},supports:function B(Ao){var Ap=this.isFF&&AQ();switch(Ao){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||Ap>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||Ap>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);case this.htmlFeatures.FILE_READER:return !!(window.FileReader);}return false;},getOSInfo:function AN(){var At="Unknown",Ap=navigator.appVersion,As=navigator.userAgent,Ar=At;var Ao=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];var Aq;for(Aq=0;Aq<Ao.length;Aq++){var Av=Ao[Aq];if(Av.r.test(As)){Ar=Av.s;break;}}var Au=At;if(/Windows/.test(Ar)){Au=/Windows (.*)/.exec(Ar)[1];Ar="Windows";}switch(Ar){case"Mac OS X":Au=/Mac OS X (10[\.\_\d]+)/.exec(As)[1];break;case"Android":Au=/Android ([\.\_\d]+)/.exec(As)[1];break;case"iOS":Au=/OS (\d+)_(\d+)_?(\d+)?/.exec(Ap);Au=Au[1]+"."+Au[2]+"."+(Au[3]|0);break;}return{name:Ar,version:Au};},transEndEvtNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},replace:function o(Aq,Ao){if(Aq&&Ao){var Ap=Aq.parentNode;if(Ap){Ap.replaceChild(Ao,Aq);}}return Ao;},attachEvent:function X(Aq,Ap,Ar,Ao){if(Aq.addEventListener){return Aq.addEventListener(Ap,Ar,!!Ao);}return Aq.attachEvent("on"+Ap,Ar);},detachEvent:function AY(Aq,Ap,Ar,Ao){if(!Aq){return ;}if(Aq.removeEventListener){Aq.removeEventListener(Ap,Ar,!!Ao);}else{Aq.detachEvent("on"+Ap,Ar);}},attachMarkupEvent:function x(Ar,Aq,Ao){var Ap=function(As){mstrmojo.all[Ar].captureDomEvent(Ao,window,As);};this.attachEvent(Aq,Ao,Ap);return Ap;},attachOneTimeEvent:function W(Ar,Ap,As,Ao){var Aq=function(At){As(At);if(Ao){h(this,Ap,Aq);}else{mstrmojo.dom.detachEvent(this,Ap,Aq);}};if(Ao){m(Ar,Ap,Aq);}else{this.attachEvent(Ar,Ap,Aq);}Ar=null;return Aq;},attachMouseMoveEvents:function D(Ar,Ao){var Aq=this,Ap=function(As){if(Ao){Ao(As);}Aq.detachEvent(document,"mousemove",Ar);Aq.detachEvent(document,"mouseup",Ap);};Aq.attachEvent(document,"mousemove",Ar);Aq.attachEvent(document,"mouseup",Ap);},captureDomEvent:function AK(At,Ar,Ap,As,Aq){var Ao=mstrmojo.all[At];if(Ao){Ao.captureDomEvent(Ar,Ap,As,Aq);}},translate:function L(Aq,Ap,At,As,Ao,Ar){Ao=(Ao&&" "+Ao)||"";Aq.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(Ap,At,As,Ar)+Ao;},createTranslateString:function P(Ao,Ar,Aq,Ap){Ao=AF(Ao);Ar=AF(Ar);Aq=AF(Aq);return AO(Ao,Ar,Aq,Ap,"translate");},createScaleString:function v(Ao,Ar,Aq,Ap){Ao=Ao||0;Ar=Ar||0;Aq=Aq||0;return AO(Ao,Ar,Aq,Ap,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function C(Aq,Ao,Ar,At){var Ap=Aq.id+"-"+Ao,As=this._bufferConnects[Ap];if(!As){As=this._bufferConnects[Ap]={elId:Aq.id,eventName:Ao,timer:null,bufferSize:At,listeners:[],callback:function(Au){mstrmojo.dom._callback(Au,mstrmojo.global,Ap);return true;}};this.attachEvent(Aq,Ao,As.callback);}As.listeners.push(Ar);},_callback:function Af(As,Ao,Aq){var Ar=this._bufferConnects[Aq],At=Ar&&Ar.timer;if(Ar&&!At){var Ap=(Ar.bufferSize===null)?this._bufferSize:Ar.bufferSize;if(Ar.bufferSize){Ar.timer=Ao.setTimeout(function(){mstrmojo.dom.updateBuffers(Aq);},Ap);}else{mstrmojo.dom.updateBuffers(Aq);}}},updateBuffers:function H(Ar){var As=this._bufferConnects[Ar],Ap=As&&As.listeners,Ao=(Ap&&Ap.length)||0,Aq;for(Aq=0;Aq<Ao;Aq++){Ap[Aq]();}if(As&&As.timer){delete As.timer;}},detachBufferedEvent:function AC(Ap,At,Au){if(!Ap){return ;}var Aw=Ap.id+"-"+At,Aq=this._bufferConnects[Aw],As=Aq&&Aq.listeners,Av=(As&&As.length)||0,Ar;if(Av){for(Ar=Av-1;Ar>-1;Ar--){if(As[Ar]===Au){As.splice(Ar,1);}}if(!As.length){this.detachEvent(Ap,At,Aq.callback);delete this._bufferConnects[Aw];if(Aq.timer){var Ao=mstrmojo.global;Ao.clearTimeout(Aq.timer);}}}},eventTarget:function AA(Ao,Ap){Ap=AI(Ao,Ap);return Ap.target||Ap.srcElement;},isMac:function y(){return this.getOSInfo().name.toLowerCase().indexOf("mac")>=0;},isMetaKey:function J(Ao,Ar){var Aq=this.getOSInfo().name.toLowerCase().indexOf("mac")>=0,Ap=AI(Ao,Ar)||{};return(Ap.ctrlKey&&!Aq)||(Ap.metaKey&&Aq);},ctrlKey:function Ai(Ao,Ap){return(AI(Ao,Ap)||{}).ctrlKey;},shiftKey:function AB(Ao,Ap){return(AI(Ao,Ap)||{}).shiftKey;},metaKey:function Z(Ao,Ap){return(AI(Ao,Ap)||{}).metaKey;},getButton:function AS(Ao,Ap){return((Number(AI(Ao,Ap).button))===2)?2:1;},isPrimaryMouseBtn:function Ad(Ap,Ao){return this.getButton(Ao||window,Ap)===1;},getMousePosition:function k(Ar,Aq){Aq=Aq||window;var Ap,Au;if(mstrmojo.dom.isIE){Ar=Ar||Aq.event;var As=document,Ao=As.body,At=As.documentElement;Ap=Ar.clientX+Ao.scrollLeft+(At.scrollLeft||0);Au=Ar.clientY+Ao.scrollTop+(At.scrollTop||0);}else{Ap=Ar.pageX;Au=Ar.pageY;}return{x:Ap,y:Au};},position:function AT(Ap,Aq){var At={x:0,y:0,w:0,h:0};if(Ap&&Ap.getBoundingClientRect){try{At=Ap.getBoundingClientRect();}catch(As){At={left:0,top:0,right:0,bottom:0,height:0,width:0};}At={x:At.left,y:At.top,w:At.right-At.left,h:At.bottom-At.top};if(this.isIE6||this.isIE7){var Ao=Ap.ownerDocument;if(Ao){var Av=Ao.documentElement,Au=Av.getBoundingClientRect();At.x-=Au.left;At.y-=Au.top;}}}if(Aq){var Ar=AW();At.x+=Ar.x;At.y+=Ar.y;}return At;},delta:function F(Aq,Ao){Ao=Ao||document.body;var Ap=this.position(Aq),Ar=this.position(Ao);return{x:Math.round(Ap.x-Ar.x),y:Math.round(Ap.y-Ar.y)};},windowDim:function Q(){var Ao=0,Aq=0,Ar=window,As=document,At=As.documentElement,Ap=As.body;if(typeof (Ar.innerWidth)=="number"&&typeof (Ar.innerHeight)=="number"){Ao=Ar.innerWidth;Aq=Ar.innerHeight;}else{if(At&&(At.clientWidth||At.clientHeight)){Ao=At.clientWidth;Aq=At.clientHeight;}else{if(Ap&&(Ap.clientWidth||Ap.clientHeight)){Ao=Ap.clientWidth;Aq=Ap.clientHeight;}}}return{w:Ao,h:Aq};},center:function AJ(Ao){u.call(this,Ao,V,V);},bottomCenter:function E(Ao){u.call(this,Ao,V,Aa);},clearBrowserHighlights:function K(Ao){Ao=Ao||self;if(!Ao.getSelection){var Au=Ao.document,At=Au&&Au.selection,Ar=At&&At.empty;if(Ar){try{At.empty();}catch(Aq){}}}else{var Ap=Ao.getSelection,As=Ap&&Ao.getSelection();if(As&&!As.isCollapsed){if(As.empty){As.empty();}else{if(As.removeAllRanges){As.removeAllRanges();}}}}},findAncestorByAttr:function AP(As,Aq,Ap,Ao){var At=Ap?As:As&&As.parentNode;while(At&&(At!==Ao)){var Ar=At.getAttribute&&At.getAttribute(Aq);if(Ar!=null){return{node:At,value:Ar};}At=At.parentNode;}return null;},findAncestorByName:function Ah(Aq,At,Ap,Ao){At=At&&At.toLowerCase();var Ar=Ap?Aq:Aq&&Aq.parentNode;while(Ar&&(Ar!==Ao)){var As=Ar.nodeName;if(As&&(As.toLowerCase()===At)){return Ar;}Ar=Ar.parentNode;}return null;},contains:function I(Ar,As,Ap,Ao){var Aq=As;if(!Ap){Aq=Aq.parentNode;}while(Aq){if(Aq===Ar){return true;}if(Aq===Ao){break;}Aq=Aq.parentNode;}return false;},toggleSelection:function An(Ap,Ao){Ap.setAttribute("unselectable",Ao?"off":"on");mstrmojo.css.toggleClass(Ap,"unselectable",!Ao);Ap.onselectstart=function(){return Ao;};if(!Ao){this.clearBrowserHighlights();}},preventDefault:function U(Ao,Ap){Ap=Ap||Ao.event;if(Ap.preventDefault){Ap.preventDefault();}else{Ap.returnValue=false;}},stopPropogation:function M(Ao,Ap){Ap=Ap||Ao.event;if(Ap.stopPropagation){Ap.stopPropagation();}else{Ap.cancelBubble=true;}},firstTouch:function AV(Ao,Ap){return Ap&&Ap.touches&&Ap.touches.length?Ap.touches[0]:(Ap||Ao.event);},firstChangedTouch:function Ab(Ao,Ap){return Ap&&Ap.changedTouches&&Ap.changedTouches.length?Ap.changedTouches[0]:(Ap||Ao.event);},isLandscape:function T(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function AX(Ao){while(Ao){var Ap=Ao.mstrmojoId;if(Ap!==null&&Ap!==undefined){return mstrmojo.all[Ap];}Ao=Ao.parentNode;}return null;},setCaret:function G(Ao,Aq){if(Ao.setSelectionRange){Ao.focus();Ao.setSelectionRange(Aq,Aq);}else{if(Ao.createTextRange){var Ap=Ao.createTextRange();Ap.move("character",Aq);Ap.select();}}},setInputSelection:function Y(Ao){if(Ao.select){Ao.focus();Ao.select();}else{if(Ao.createTextRange){Ao.createTextRange().select();}}},setElementSelection:function a(Aq){if(window.getSelection){var Ao=document.createRange(),Ap=window.getSelection();Ao.selectNodeContents(Aq);Ap.removeAllRanges();Ap.addRange(Ao);}else{if(document.body.createTextRange){var Ar=document.body.createTextRange();Ar.moveToElementText(Aq);Ar.select();}}},getHorizontalScroll:function Ak(){return AW().x;},getVerticalScroll:function AD(){return AW().y;},removeNode:function Ae(Aq){var Ap=document.getElementById(Aq),Ao=Ap&&Ap.parentNode;if(Ao){return Ao.removeChild(Ap);}}});}());mstrmojo.LoadedExternalJSURLs={};function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function requiresMethod(B){if(!B){return false;}if(typeof this[B]==="function"){return true;}var A=this[B]||(this.methods&&(this.methods[B]||this.methods["*"]));if(typeof A==="string"){this.requiresCls(A);return typeof this[B]==="function";}return false;},requiresCls:function req(mixins,callback){if(mixins){if(typeof mixins==="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin,i,len;for(i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(C,B){var A=this[C];if(A){var E,D=false;if(typeof A==="string"){E=mstrmojo.registry.ref(A);this[C]=E;D=true;}else{E=A;}if(E&&(D||B)){E.parent=this;if(E.startup){E.startup();}}return E;}return null;},requiresExternalScripts:function requiresExternalScripts(F,G,C){if(F&&F instanceof Array){if(F.length===0){if(G){G.call(C);}return false;}if(F[0]&&F[0].forceReload===false&&mstrmojo.LoadedExternalJSURLs[F[0].url]){F.splice(0,1);return this.requiresExternalScripts(F,G,C);}var A=document.createElement("script"),D=!!document.all,B=F[0].url;if(B.substr(0,7)==="file://"){B=B.substr(7);}else{if(mstrApp.isSingleTier&&B.substr(0,4)!=="http"){B="http:"+B;}}A.type="text/javascript";A.src=B;if(!F[0].callbackParamName){if(D){A.onreadystatechange=function(){if(A.readyState==="loaded"||A.readyState==="complete"){A.onreadystatechange=null;if(F.length>1){mstrmojo.LoadedExternalJSURLs[F.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(F,G);}else{if(F.length===1){mstrmojo.LoadedExternalJSURLs[F[0].url]=true;if(G){G.call(C);}}}}};}else{A.onload=function(){A.onload=null;if(F.length>1){mstrmojo.LoadedExternalJSURLs[F.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(F,G);}else{if(F.length===1){mstrmojo.LoadedExternalJSURLs[F[0].url]=true;if(G){G.call(C);}}}};}}else{if(F[0].callbackParamName.length!==0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy===true){var E=this;window.setTimeout(function(){E.requiresExternalScripts(F,G,C);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;A.src+="&"+F[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=F;mstrmojo._LoadsScript.callback=G;mstrmojo._LoadsScript.esScritsContext=C;}}document.getElementsByTagName("head")[0].appendChild(A);}}});(function(){mstrmojo.boxmodel=mstrmojo.provide("mstrmojo.boxmodel",{rangeIntersect:function E(J,H,I,G){if(J<I){return I<=H;}if(J>I){return J<=G;}return true;},px2Inches:function C(H,G){G=parseInt(G,10);return mstrmojo.NumberFormat.getInstance(mstrConfig.decimalSep,mstrConfig.thousandsSep).format(parseFloat((G/H.zf/H.dpi).toFixed(4)));},offset:function F(I,H){var L=I,G=0,K=0;while(I){G+=I.offsetLeft;K+=I.offsetTop;I=I.offsetParent;if(I===H){break;}}var J;for(J=L&&L.parentNode;J&&J!==H;J=J.parentNode){if(J.scrollTop){K-=J.scrollTop;}if(J.scrollLeft){G-=J.scrollLeft;}}return{left:G,top:K};},convert2px:function D(K,I){if(!/px$/.test(I)){var H=document.createElement("img"),G=H.style,J;G.zIndex=-1;G.left=I;K.appendChild(H);J=G.pixelLeft;K.removeChild(H);return J+"px";}return I;},getEdgeQuadrantByPoint:function B(I,H){var G=H.x-I.x,M=H.y-I.y,J=I.w,L=I.h,K=[["Left","Bottom"],["Top","Right"]];if(M>L/J*G){K=K[0];}else{K=K[1];}return(M<-L/J*G+L)?K[0]:K[1];},isPtInPolygon:function A(I,K){var G=I.x,J=I.y,H=false;K.forEach(function(N,L){var M=K[L-1]||K[K.length-1];if((N.y>=J)!==(M.y>=J)){if((G<(M.x-N.x)*(J-N.y)/(M.y-N.y)+N.x)){H=!H;}}});return H;}});}());(function(){mstrmojo._HasPopup=mstrmojo.provide("mstrmojo._HasPopup",{_mixinName:"mstrmojo._HasPopup",_lastOpened:null,openPopup:function A(G,E){var C=!!G&&(typeof G==="string")&&!G.match(/\./)&&!!this[G],D=mstrmojo.registry.ref(C?this[G]:G);if(D&&D.open){if(C){this[G]=D;}if(D.disposable!==false){this.addDisposable(D);}var J=D.slot&&this[D.slot];if(J){if(D.parent!==this){if(this.addChildren){this.addChildren([D]);}else{var I=false,F=D.domNode||D.placeholder;if(F&&typeof F==="string"){F=document.getElementById(F);}if(!F){I=true;F=document.createElement("span");D.placeholder=F;}if(I||(F.parentNode!==J)){J.appendChild(F);}}}}try{D.open(this,E);}catch(H){console.log("Error opening popup: "+H);}this._lastOpened=D;}},closePopup:function B(){var C=this._lastOpened;if(C&&C.visible&&C.close){C.close();delete this._lastOpened;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",P="mousemove",R="mouseup";function G(Y){if(E.isPrimaryMouseBtn(Y)){B.startDragCheck(self,Y);}}var V,Q,A="mstrmojo-dnd-avatar",U;function F(Z,Y){if(Y!==undefined&&Y!==null){Q.innerHTML=Y;}U.left=Z.x+"px";U.top=Z.y+"px";}function L(Z,Y){if(!V){V=I.createElement("div");U=V.style;V.className=A;V.innerHTML='<div class="'+A+'-inner"></div>';Q=V.firstChild;I.body.appendChild(V);}F(Z,Y);U.display="block";}function S(){if(U){U.display="none";}}function H(Y){var Z=++B.ctxt.moveCount;if(Z>=B.minMoves){B.stopDragCheck();if((Y.buttons===1||Y.buttons===undefined||E.isIE9)&&(Y.which===1||Y.button===0||E.isIE8)){B.startDrag(self,Y);}}}function O(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDragCheck();delete B.ctxt;}}function D(Y){B.onDragMove(self,Y);}function C(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDrag(window,Y);}}function N(b){var Z=mstrmojo.hash.copy(b,{}),a=Z.hWin=Z.hWin||window,Y=Z.e=Z.e||a.event;Z.node=E.eventTarget(a,Y);Z.pos=E.getMousePosition(Y,a);return Z;}function J(Z){var Y=E.findWidget(Z);while(Y){if(Y.draggable){return Y;}Y=Y.parent;}return null;}function T(Y){var a=Y.src,Z=J(a.node);if(!Z){return null;}if(Z.getDragAction){Y.action=Z.getDragAction(Y);}a.widget=Z;a.data=Z.getDragData&&Z.getDragData(Y);if(Z.isDragValid){if(!Z.isDragValid(Y)){if(!Z.shouldDragBubble||Z.shouldDragBubble(Y)!==true){Y.src.node=Z.domNode.parentNode;return T(Y);}return null;}}if(Z.ondragstart){Z.ondragstart(Y);}return Z;}function X(a,Z){var Y=E.findWidget(a),b=Z.tgt&&Z.tgt.widget;while(Y){if(Y.dropZone){if(Y===b){return Y;}if(Y.allowDrop&&Y.allowDrop(Z)){return Y;}}Y=Y.parent;}return null;}function W(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(Y,Z){delete this.ctxt;var a=N({hWin:Y,e:Z});this.ctxt={src:a,moveCount:0,last:M.copy(a.pos),getDirection:function(b){return !!this.dir[b];},getCtxtDragData:function(){var b=this.src;return(b&&b.data)||{};},getCtxtDropData:function(){var b=this.tgt;return(b&&b.data)||{};}};if(this.minMoves){E.attachEvent(I,P,H);E.attachEvent(I,R,O);}else{this.startDrag(Y,Z);}},stopDragCheck:function(){E.detachEvent(I,P,H);E.detachEvent(I,R,O);},startDrag:function(Y,b){var Z=this.ctxt;Z.id=mstrmojo.now();var a=T(Z);if(!a){return ;}E.clearBrowserHighlights(Y);E.preventDefault(self,b);E.attachEvent(I,P,D);E.attachEvent(I,R,C);var d=window.mstrApp;if(d&&d.setInteractive){this._changeAppStatus=d.setInteractive(false);}if(!a.ownAvatar){var c=Z.src;L(c.pos,c.data&&c.data.html);}},stopDrag:function(Y,f){E.detachEvent(I,P,D);E.detachEvent(I,R,C);var b=this.ctxt,a=b.tgt||{},Z=N({hWin:Y,e:f,data:a.data}),d=X(Z.node,b);Z.widget=d;b.tgt=Z;if(d){if(d.ondrop){d.ondrop(b);}else{W.call(d);}}var c=b.src.widget;if(c&&c.ondragend){c.ondragend(b);}if(c&&!c.ownAvatar){S();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(c,f){if(E.isSafari){E.clearBrowserHighlights();}var Y=this.ctxt,b=Y.tgt||{},Z=b.widget,d=N({hWin:c,e:f,data:b.data}),i=d.widget=X(d.node,Y),h=Y.last,a=d.pos;Y.dir={x:a.x>h.x,y:a.y>h.y};Y.last=M.copy(d.pos);Y.tgt=d;if(Z!==i){if(Z){if(Z.ondragleave){Z.ondragleave(Y);}else{W.call(Z);}}if(i){Y.tgt.data=(i.getDropData&&i.getDropData(Y))||{};if(i.ondragenter){i.ondragenter(Y);}else{if(i.set){i.set("allowingDrop",true);}}}}if(i){if(i.ondragover){i.ondragover(Y);}}var g=Y.src.widget;if(g&&g.ondragmove){g.ondragmove(Y);}if(g&&!g.ownAvatar){F(d.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],s=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-s.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=s.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var W=this._sourceFn;if(!W){var V=this.source;if(V!=null){if(typeof (V)=="string"){if(!(V.match("return "))&&!(V.match(/\;\s*\S/))){V="return "+V;}W=new Function(V);}else{if(typeof (V)=="function"){W=V;}}this._sourceFn=W;}}var S,X=this.parent;if(W){try{S=W.apply(X,[]);}catch(U){}}var T=this.setter,Y=this.destination;if(T==null){X[Y]=S;}else{if(typeof (T)=="string"){X[T](Y,S);}else{if(typeof (T)=="function"){T.apply(X,[Y,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var T=this._chains;if(!T){this._parseChains();T=this._chains;}for(var S in T){this._attachChain(T[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var T=this._chains;if(T){for(var S in T){this._detachChain(T[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var U=this._chains;var T=this.source;if(T&&(typeof (T)=="function")){T=T.toString&&T.toString();}if(!T){return ;}function S(b,e,V,X){var W=b,Z;while(Z=W.match(e)){var c=Z[0],a=c.length,d=true;c=c.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var Y in U){if(Y.substr(0,a)===c){d=false;break;}else{if(c.indexOf(Y)===0){delete U[Y];}}}if(d){U[c]={host:(V==null)?null:Z[V],parts:Z[X].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}W=W.substr(Z.index+a);}}if(D.test(T)){S(T,O,null,1);}if(R.test(T)){S(T,M,1,2);}if(B.test(T)){S(T,L,1,2);}},_attachChain:function Q(S,U){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var d=S.evt2idx,g=S.idx2evt,Z=S.parts;var e=(U>=0)?U:0,b=this.id,W=mstrmojo.all,c=(U>0)?W[g[e-1].context][Z[e-1]]:(S.host?W[S.host]:this.parent),T=Z[e];var V=mstrmojo.array;while(c&&T){if(c.attachEventListener){var f=c[T+"_bindEvents"]||(T+"Change");if(typeof (f)=="string"){f=[f];}var Y=[];for(var a=0,X=f.length;a<X;a++){Y[a]=c.attachEventListener(f[a],b,"_callback");}for(var a=0;a<f.length;a++){d[c.id+"_"+f[a]]=e;}g[e]={context:c.id,evts:f,subs:Y};}c=c[T];T=S.parts[++e];}},_detachChain:function G(S,T){var U=mstrmojo.all,h=S.idx2evt,d=S.evt2idx,a=this.id;var Y=(T>-1)?T:0,b=h.length;if(Y<b){for(;Y<b;Y++){var Z=h[Y];if(!Z){break;}var W=Z.context,c=U[W],g=Z.evts;if(c&&c.detachEventListener){var k=Z.subs;for(var f=0,V=k.length;f<V;f++){c.detachEventListener(k[f]);}}h[Y]=null;for(var X=0,e=g.length;X<e;X++){delete d[W+"_"+g[X]];}}}},_callback:function I(T){this.exec();if(!T||!T.name||!T.src){return ;}var U=T.src.id+"_"+T.name,W=this._chains;for(var X in W){var V=W[X],S=V.evt2idx[U];if(S!=null){this._detachChain(V,S+1);this._attachChain(V,S+1);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var N=/\{\@(en@)?([^\}]+)\}/gm,J=/\</gm,R=/\>/gm,E=/\S/,Q=["$","^","=","!",":","/",".","*","+","?","|","(",")","[","]","{","}","\\"],F=new RegExp("(\\"+Q.join("|\\")+")","g"),S={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;",u0009:"&#x09;","\n":"&#x0A;","\r":"&#x0D;",'"':"&quot;"},C={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;"," ":"&nbsp;","\n":"<br/>","\r":"&nbsp;&nbsp;&nbsp;&nbsp;","'":"&#039;",'"':"&quot;"},M={"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":" ","<br/>":"\n","&nbsp;&nbsp;&nbsp;&nbsp;":"\r","&#039;":"'","&quot;":'"'},D={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#039;",'"':"&quot;","\u20ac":"&#8364;"},K={"&amp;":"&","&lt;":"<","&gt;":">","&#039;":"'","&quot;":'"',"&#8364;":"\u20ac"};var L=function(V){if(V===null){return"null";}var W=typeof V;if(W!=="object"){return W;}if(V.length===undefined){return"object";}return"array";};var T={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};mstrmojo.string=mstrmojo.provide("mstrmojo.string",{multiReplace:function G(W,Z,Y){var V;Y=Y||[];if(!W){return"";}var X=[];for(V in Z){if(mstrmojo.array.indexOf(Y,V)===-1){X.push(V.k||V);}}return W.replace(new RegExp(X.join("|"),"g"),function(a){var b=Z[a];return b.v||b;});},trim:function P(V){return(V&&V.replace)?V.replace(/^\s+/,"").replace(/\s+$/,""):V;},startsWith:function U(W,V){return W.length>=V.length&&W.substring(0,V.length)==V;},ellipsize:function A(X,W){var V=this.trim(X.substr(0,(W||1)-1));if(V!==X){V+="&hellip;";}return V;},isEmpty:function I(V){return(V===null)||(V===undefined)||!(E.test(V));},regEscape:function O(V){return V.replace(F,"\\$1");},encodeXMLAttribute:function(V){return mstrmojo.string.multiReplace(V,S);},encodeHtmlString:function(W,V,X){if(!W||!W.replace){return W;}if(X){return mstrmojo.string.multiReplace(W,D);}return mstrmojo.string.multiReplace(W,C,V?[" "]:[]);},decodeHtmlString:function(W,V){return V?mstrmojo.string.multiReplace(W,K):mstrmojo.string.multiReplace(W,M);},htmlAngles:function(V){if(!mstrmojo.string.isEmpty(V)){V=String(V);return V.replace(J,"&lt;").replace(R,"&gt;");}return V;},apply:function H(V,X){if(!V){return"";}var W=this;return V.replace(N,function Y(b,c,d){var Z;try{Z=mstrmojo.hash.walk(d,X);}catch(a){}Z=(Z===null||Z===undefined)?"":Z;return(!!c)?W.encodeHtmlString(Z,true):Z;});},json2xml:function(V,l,m){if(!(l instanceof Array)){l=[l];}var W=m&&m.isSerializable,k=(m.convertBoolean!==false),p=m&&m.skipFunctions,h,b;var d=[],Z=[],c,Y,a;for(h=0,b=l.length;h<b;h++){var g=l[h];for(c in g){if(p&&typeof g[c]==="function"){continue;}if(W){var o=W(c,l,h);if(o!==true){if(o===false){continue;}else{if(o.att){d.push(o.att);}if(o.child){Z.push(o.child);}continue;}}}Y=g[c];a=L(Y);switch(a){case"array":var e,f;Z.push("<"+c+">");for(e=0,f=Y.length;e<f;e++){var X=m.getArrItemName(c,Y,e)||e;Z.push(this.json2xml(X,Y[e],m));}Z.push("</"+c+">");break;case"object":Z.push(this.json2xml(c,Y,m));break;case"string":d.push(c+'="'+mstrmojo.string.encodeXMLAttribute(Y)+'"');break;case"boolean":d.push(c+'="'+(k?(Y?"-1":"0"):Y)+'"');break;case"null":if(!m.skipNull){d.push(c+'="'+m.nullValue+'"');}break;default:d.push(c+'="'+Y+'"');break;}}}return"<"+V+" "+d.join(" ")+">"+Z.join("")+"</"+V+">";},escape4HTMLText:function B(c){if(!c||!c.replace){return c;}var Z=/"/gm;var X="&quot;";var d=/&/gm;var b="&amp;";var a=/</gm;var V="&lt;";var Y=/>/gm;var W="&gt;";return c.replace(d,b).replace(Z,X).replace(a,V).replace(Y,W);},parseUri:function(Z,W){W=W||T;var V=W.parser[((W.strictMode)?"strict":"loose")].exec(Z),Y={},X=14;while(X--){Y[W.key[X]]=V[X]||"";}Y[W.q.name]={};Y[W.key[12]].replace(W.q.parser,function(b,a,c){if(a){Y[W.q.name][a]=c;}});return Y;},removeSpecialChars:function(V){return V.replace(/[^a-zA-Z0-9]/g,"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,d){var Z=D.getMousePosition(D.firstTouch(b,d),b);D.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*O*F/d).toFixed(2):0,y:d?Number(b.y*O*F/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){document.msCSSOMElementFloatMetrics=true;mstrmojo.requiresCls("mstrmojo.hash");var S=mstrmojo.hash,H="containerNode",G="auto",Q="px";var I={v:G,c:undefined,sv:G};function E(c,f,e){var g=this._layoutWidgets[f],k=c.slot||H,h=g.f,i=g.p,d=(h&&h[k]!==undefined),b=(i&&i[k]!==undefined);if(k&&((!e&&d)||b)){return d?h[k]:(g.x*parseInt(i[k],10)/100)+Q;}return c[(f==="h")?"height":"width"];}function K(g,d,b){if(g.ignoreLayout){return ;}var c=(d===G)||d==="NaNpx",f=(b===G)||b==="NaNpx";var e=g.getLayoutOffsets&&g.getLayoutOffsets();if(e){if(!c){d=(parseInt(d,10)-e.h)+Q;}if(!f){b=(parseInt(b,10)-e.w)+Q;}}if(g.setDimensions){g.setDimensions(d,b);}else{if(g.set){if(!c){g.set("height",d);}if(!f){g.set("width",b);}}}}function Z(e){var c=this.children,g,l;for(g=0,l=(c&&c.length)||0;g<l;g++){var d=c[g],m=d.slot||H;if(m){var k=E.call(this,d,"h",e),n=E.call(this,d,"w",e);this.setSlotDimensions(m,k,n);K(d,k,n);var b=E.call(this,d,"h",e),f=E.call(this,d,"w",e);if(b!==k||f!==n){K(d,b,f);}this.setSlotDimensions(m,b,f);}}this.afterLayout();}function B(){var c=this.children,b=this._layoutWidgets;S.forEach(this.slotNames,function(g,i){if(!g||this.skipsSlotLayout(i)){return ;}var f=(b.h&&b.h.getSlotSizeInfo(i,c))||I,d=(b.w&&b.w.getSlotSizeInfo(i,c))||I,e=f.c||d.c;mstrmojo.array.forEach(e,function(h){K(h,f.v,d.v);});this.setSlotDimensions(i,f.sv,d.sv);},this);this.afterLayout();}function D(c){var b=this.layoutConfig.xt?B:Z;b.call(this,c);}function T(i,e,g){var h=i.slot||H,f=e&&e.a;if(!f||f[h]===undefined){return ;}var b=this[h]["offset"+g],c=f[h];if(b===c){return ;}e.x-=(b-c);f[h]=b;}function J(b){this.beforeLayout();var c=this._layoutWidgets,d=b.src;T.call(this,d,c.h,"Height");T.call(this,d,c.w,"Width");D.call(this,true);}function O(d,g){if(!d){return null;}var b=this.children,r=g.toLowerCase(),h=parseInt(this[r],10),l=h,n={},p={},f={},c={},o={},k,m,e,s,q;for(q in d){if(!d.hasOwnProperty(q)){continue;}s=d[q];if(s.match(/px$/)){h-=parseInt(s,10);n[q]=s;}else{if(s.match(/%$/)){p[q]=s;}else{if(s.match(/all/)){o[q]=l;}else{f[q]=s;}}}}if(!S.isEmpty(f)&&!S.isEmpty(p)){for(k=0,m=(b&&b.length)||0;k<m;k++){e=b[k];q=e.slot||H;if(q&&f[q]&&!e.ignoreLayout){if(e.hasRendered){c[q]=this[q]["offset"+g];h-=c[q];}else{c[q]=0;e.attachEventListener((e instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,J);}}}}return{f:S.isEmpty(n)?undefined:n,p:S.isEmpty(p)?undefined:p,a:S.isEmpty(c)?undefined:c,n:S.isEmpty(o)?undefined:o,x:h,getSlotSizeInfo:function(AB,v){if(!d[AB]){return I;}var u=mstrmojo.array.filter(v,function(AD){var AC=AD.slot;return AC===AB||(AB===H&&!AC);}),z,AA;var i=n[AB];if(i){AA=i;}var y=p[AB];if(y){AA=(this.x*parseInt(y,10)/100)+Q;}if(f[AB]){AA=c[AB];if(AA){AA+=Q;}else{AA=G;}z=G;}var x=o[AB];if(x){AA=z=x+Q;}AA=AA||"0px";return{v:AA,c:u,sv:z||AA};}};}function R(c){var b=this.domNode;if(!b||!this.layoutConfig){return ;}b.style[c]=this[c];this.doLayout();}mstrmojo._HasLayout=mstrmojo.provide("mstrmojo._HasLayout",{_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",ignoreLayout:false,beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,layoutConfig:null,init:function V(b){this._super(b);this.layoutConfig=S.clone(this.layoutConfig);},preBuildRendering:function C(){var d=this.cssText||"";var b=this.height;if(b&&b!==G){d+="height:"+this.height+";";}var c=this.width;if(c&&c!==G){d+="width:"+this.width+";";}this.cssText=d;return(this._super)?this._super():true;},postBuildRendering:function W(){this.doLayout();return this._super();},modifyLayoutConfig:function Y(d,c){var b=this.layoutConfig=this.layoutConfig||{};b.h=S.copy(d,b.h);b.w=S.copy(c,b.w);this.doLayout();},getLayoutOffsets:mstrmojo.emptyFn,set:function P(d,b){var c=this._super(d,b);if(d==="visible"&&this._pendingLayoutOnVisible){delete this._pendingLayoutOnVisible;this.doLayout();}return c;},doLayout:function A(){var b=this.layoutConfig;if(!b||(this.height===G&&this.width===G)){return ;}if(b.xt){if(!this.visible){this._pendingLayoutOnVisible=true;return ;}}this.beforeLayout();this._layoutWidgets={h:O.call(this,b.h,"Height"),w:O.call(this,b.w,"Width")};D.call(this,false);this.widgetResized();},browserResized:function F(b){this.setDimensions(b.h,b.w);return true;},onwidthChange:function N(){R.call(this,"width");},onheightChange:function M(){R.call(this,"height");},skipsSlotLayout:function(b){return false;},adjustParentDimensions:function L(){var c=this.parent,b=c&&c._layoutWidgets;if(b){T.call(c,this,b.h,"Height");T.call(c,this,b.w,"Width");}},setDimensions:function U(e,c){var d=(e===G)||e==="NaNpx",f=(c===G)||c==="NaNpx";if((!d&&parseInt(this.height,10)!==parseInt(e,10))||(!f&&parseInt(this.width,10)!==parseInt(c,10))){if(!d){this.height=e;}if(!f){this.width=c;}var b=this.domNode,g=b&&b.style;if(g){if(!d){g.height=e;}if(!f){g.width=c;}this.doLayout();}return true;}return false;},setSlotDimensions:function X(e,d,c){var b=this[e]&&this[e].style;if(!b){return ;}if(d!==G&&d!==undefined&&d!=="NaNpx"&&b.height!==d&&parseInt(d)>=0){b.height=d;}if(c!==G&&c!==undefined&&c!=="NaNpx"&&b.width!==c&&parseInt(c)>=0){b.width=c;}}});mstrmojo._HasLayout.getSlotSize=function a(e,f){var c=e&&e.prototype.layoutConfig;if(c){var d=c.h,b=c.w;return{h:(d&&d[f])||undefined,w:(b&&b[f])||undefined};}return null;};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var B=mstrmojo.dom,E=100;function I(K,J){return function(L){mstrmojo.all[K][(J?"move":"show")+"Tooltip"](L,self);};}function A(){var K=this.tooltipNode||this.domNode,M=this.id,J,L="_ontooltip"+(this.isDynamicTooltip?"move":"over");if(!this._ontooltipout){this._ontooltipout=function(N){mstrmojo.all[M].hideTooltip(N,self);};}if(!this[L]){this[L]=I(M,this.isDynamicTooltip);}K=[].concat(K);for(J=0;J<K.length;J++){K[J].removeAttribute("title");B.attachEvent(K[J],(this.isDynamicTooltip?"mousemove":"mouseover"),this[L]);B.attachEvent(K[J],"mouseout",this._ontooltipout);}}mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,isDynamicTooltip:false,tooltipNode:null,tooltipOpenDelay:700,hasOpenTooltip:false,postBuildRendering:function(){var J=this._super();if(this.useRichTooltip){A.call(this);}return J;},onuseRichTooltipChange:function H(){if(this.hasRendered){var K=this.tooltipNode||this.domNode,J;if(this.useRichTooltip){A.call(this);}else{if(this._ontooltipout){if(K&&K.constructor!==Array){K=[K];}for(J=0;J<K.length;J++){B.detachEvent(K[J],this.isDynamicTooltip?"mousemove":"mouseover",this["_ontooltip"+(this.isDynamicTooltip?"move":"over")]);B.detachEvent(K[J],"mouseout",this._ontooltipout);}}this.hideTooltip();}}},showTooltip:function G(M,L){var K=this;if(!K.hasOpenTooltip&&(!mstrApp.isInteractive||mstrApp.isInteractive&&mstrApp.isInteractive())){mstrmojo.requiresCls("mstrmojo.tooltip");if(this.updateTooltipConfig){this.updateTooltipConfig(M);}window.clearTimeout(this._tooltipTimeOut);if(mstrmojo.dom.isIE){var N={};for(var J in M){N[J]=M[J];}M=N;}var O=this.richTooltip?this.richTooltip.areaId:undefined;this._tooltipTimeOut=window.setTimeout(function(){if(K._closeTooltipTimeout){window.clearTimeout(K._closeTooltipTimeout);delete K._closeTooltipTimeout;}mstrmojo.tooltip.open(K,M,L);K.tooltip.onmouseover=function(){if(K.richTooltip&&K.richTooltip.enableHover){window.clearTimeout(K._closeTooltipTimeout);window.clearTimeout(K._deactivationTimeout);if(K.tooltip){K.tooltip.onmouseout=function(P){if(!B.contains(this.domNode,P.e.toElement||P.e.relatedTarget)){K.hideTooltip();}};}}};K.hasOpenTooltip=true;K._hasActiveArea=true;K._tooltipAreaId=O;window.clearTimeout(K._deactivationTimeout);delete K._deactivationTimeout;},(this._hasActiveArea&&O&&O===this._tooltipAreaId)?0:this.tooltipOpenDelay);}},moveTooltip:function C(J,L){if(this._tooltipTimeOut){window.clearTimeout(this._tooltipTimeOut);this._tooltipTimeOut=null;mstrmojo.tooltip.close();}var N=this,K=J,M=L;this._tooltipTimeOut=setTimeout(function(){mstrmojo.tooltip.open(N,K,M);},this.tooltipOpenDelay);},hideTooltip:function F(){var J=this;window.clearTimeout(this._tooltipTimeOut);if(this._closeTooltipTimeout){window.clearTimeout(this._closeTooltipTimeout);}if(this._hasActiveArea&&!this._deactivationTimeout){this._deactivationTimeout=window.setTimeout(function(){delete J._deactivationTimeout;delete J._hasActiveArea;delete J._tooltipAreaId;},100);}mstrmojo.requiresCls("mstrmojo.tooltip");if(J.richTooltip&&J.richTooltip.enableHover){this._closeTooltipTimeout=window.setTimeout(function(){mstrmojo.tooltip.close();delete J._closeTooltipTimeout;},E);}else{mstrmojo.tooltip.close();}this.hasOpenTooltip=false;},unrender:function D(M){var N=this.tooltipNode||this.domNode,L;if(N&&N.constructor!==Array){N=[N];}if(N){var O=this._ontooltipover,K=this._ontooltipout,J=this._ontooltipmove;for(L=0;L<N.length;L++){if(O){B.detachEvent(N[L],"mouseover",O);}if(K){B.detachEvent(N[L],"mouseout",K);}if(J){B.detachEvent(N[L],"mousemove",J);}}}this._super(M);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(W){mstrmojo.hash.copy(W,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var W=this;this.delayTimer=window.setTimeout(function(){W._start();W=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function U(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var W=this.ease;if(typeof W==="string"){this.ease=mstrmojo.registry.ref(W);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var X=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function Y(){if(X){X.exec();X.counter++;if(X.counter>=X.steps){X._end();X=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function T(){if(this.getTarget){this.target=this.getTarget();}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var X=this.target;if(X&&this.slot&&X.scriptClass){var Y=X[this.slot];if(Y){this.widget=X;this.target=Y;}}}}}if(!this.target){var W=this;while(W=W.parent){if(!W||W.domNode){break;}}if(W){this.widget=W;this.target=W[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(Z,a){var X=Z.children,W=(X&&X.length)||0,Y;for(Y=0;Y<W;Y++){X[Y][a]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(Z){this._super(Z);var Y=this.children;mstrmojo.registry.refArray(Y);var W=(Y&&Y.length)||0,X;for(X=0;X<W;X++){Y[X].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function U(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var Y=this.props,Z;for(Z in Y){var X=Y[Z],W=X.ease;if(typeof W==="string"){X.ease=mstrmojo.registry.ref(W,{dontInst:true});}}this._super();},exec:function P(){var Z=this.props,a;for(a in Z){var X=Z[a],W=(X.ease||mstrmojo.ease.sin)(this.counter,X.start,X.stop-X.start,this.steps-1);if(X.fn){W=X.fn(W);}if(X.suffix){W+=X.suffix;}var Y=X.isStyle===false?this.target:this.target.style;Y[a]=W;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var a=this.srcProp,Y;if(a){var W=this.widget||this.parent;Y=W&&W[a];if((Y!=null)&&(typeof (Y)!=="string")){Y=String(Y);}}this.stop=Y;this._dynStop=true;}if(this.stop==null){this.stop="";}var Z=this.target,b=null,X=1;if(Z){Z.innerHTML="";b=document.createTextNode("");Z.appendChild(b);X=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=b;this.charGroupSize=X;},exec:function(){var X=this.targetTextNode;if(!X){return ;}var W;if(this.counter>=this.steps-1){W=this.stop;}else{if(this.counter===0){W="";}else{W=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}X.nodeValue=W;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function U(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(W){if(W==null){W=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(W*100,10)+")";}else{this.target.style.opacity=W;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function U(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function V(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(Y,X,Z){var W=Math.pow(10,Z||2);if(X){return parseInt(W*Y/X,10)/W;}return parseInt(W*Y,10)/W;}mstrmojo.ease={linear:function L(X,W,Z,Y){if(X===Y){return W+Z;}if(X===0){return W;}return W+Z*I(X,Y);},sin:function A(X,W,Z,Y){return W+Z*Math.sin((Math.PI/2)*X/Y);},cos:function B(X,W,Z,Y){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},sincos:function K(X,W,Z,Y){if(X>Y/2){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}return W+Z*Math.sin((Math.PI/2)*X/Y);},cossin:function Q(X,W,Z,Y){if(X>Y/2){return W+Z*Math.sin((Math.PI/2)*X/Y);}return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},bounce:function G(X,W,Z,Y){if((X/=Y)<(1/2.75)){return Z*(7.5625*X*X)+W;}if(X<(2/2.75)){return Z*(7.5625*(X-=(1.5/2.75))*X+0.75)+W;}if(X<(2.5/2.75)){return Z*(7.5625*(X-=(2.25/2.75))*X+0.9375)+W;}return Z*(7.5625*(X-=(2.625/2.75))*X+0.984375)+W;},shake:function J(X,W,Z,Y){if(X<Y/2){return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*X/Y;}return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*(1-X/Y);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var A=false,P=mstrmojo.dom,T=16;mstrmojo._HasContextMenu=mstrmojo.provide("mstrmojo._HasContextMenu",{cm:null,cmPos:null,itemField:"n",itemIdField:"did",itemChildrenField:"items",dynamicUpdate:false,queryChecked:function(U){return false;},queryEnabled:function(U){return true;},queryVisible:function(U){return true;},executeCommand:function O(U){},item2textCss:function E(U){return U.cssClass||U.cmdId||("cmd"+U[this.itemIdField]);},showContextMenu:function J(){if(!A){mstrmojo.requiresCls("mstrmojo.ContextMenu");A=true;}var a=this._subMenu,Y=this.getMenuPosition();if(!a){var c=(this.menuZIndex||this.zIndex||10)+1,W={left:Y.x+"px",top:Y.y+"px",zIndex:c,visible:false,dynamicUpdate:this.dynamicUpdate,itemField:this.itemField,itemIdField:this.itemIdField,itemChildrenField:this.itemChildrenField,_cmSource:this.getContextMenuSource(),items:this.getContextMenuItems(),cssClass:this.getContextMenuCssClass(),placeholder:document.body.appendChild(document.createElement("div")),parent:this};a=new mstrmojo.ContextMenu(W);a.render();this._subMenu=a;}else{a.set("left",Y.x+"px");a.set("top",Y.y+"px");}if(this.dynamicUpdate){var V=a.ctxtBuilder.itemWidgets,X=V&&V.length,U,Z,b=this.getContextMenuSource();for(U=0;U<X;U++){Z=V[U];if(b.queryVisible){Z.set("visible",b.queryVisible(Z.data));}if(b.queryChecked){Z.set("checked",b.queryChecked(Z.data));}if(b.queryEnabled){Z.set("enabled",b.queryEnabled(Z.data));}}}a.set("visible",true);this.callOnContextMenuOpen();this.adjustMenuPosition();this.attachMousedownEvent();},hideContextMenu:function I(){var U=this._subMenu;if(U&&U.visible){this._subMenu.set("visible",false);this.callOnContextMenuClose();}},adjustMenuPosition:function N(){var U=this._subMenu,X=this._subMenu.domNode,W=X.offsetHeight,V=X.offsetWidth,a=P.windowDim(),Z=P.position(X,false),Y=P.position(X,true);if((Z.x+V+T)>a.w){U.set("left",(a.w-V-T+(Y.x-Z.x))+"px");}if((Z.y+W+T)>a.h){U.set("top",(a.h-W-T+(Y.y-Z.y))+"px");}},attachMousedownEvent:function L(){var U=this;if(!this._close_handler){this._close_handler=function(V){U.closeMenuHandler(V);};}P.attachEvent(document.body,"mousedown",this._close_handler);},closeMenuHandler:function Q(U){if(!this.isOnMySubmenu(P.eventTarget(self,U))){this.closeMenuTree();}},isOnMySubmenu:function M(Y){var V=this._subMenu;if(!V){return false;}if(P.contains(V.domNode,Y,true,document.body)){return true;}var Z=V.ctxtBuilder.itemWidgets,U=Z&&Z.length,X,W;for(X=0;X<U;X++){W=Z[X];if(W.isOnMySubmenu(Y)){return true;}}return false;},callOnContextMenuOpen:function D(){if(this.onContextMenuOpen){this.onContextMenuOpen();}},callOnContextMenuClose:function C(){if(this.onContextMenuClose){this.onContextMenuClose();}},getContextMenuItems:function S(){return this.cm;},getContextMenuCssClass:function B(){return this.cmCssClass||"";},getContextMenuSource:function H(){return this;},getMenuPosition:function F(){if(this.cmPos){return this.cmPos;}var U=P.position(this.domNode,true);return{x:Math.round(U.x),y:Math.round(U.y+U.h)};},isSeparatorItem:function G(U){return U[this.itemIdField]===-1||U[this.itemField]==="-";},hasSubmenu:function K(U){return !!U[this.itemChildrenField];},closeMenuTree:function R(W){var V=this.activeMenuItem,U=this._cmSource||this;if(!V){if(W){this.activeMenuItem=W;}else{U.hideContextMenu();}return ;}if(V===W){return ;}if(W){this.activeMenuItem=W;if(W.parent.parent===V){return ;}if(W.parent===V.parent){V.hideContextMenu();return ;}}else{W=U;this.activeMenuItem=null;}V.hideContextMenu();while(V!==U){V=V.parent.parent;if(V!==W||U===W){V.hideContextMenu();if(U===W){P.detachEvent(document.body,"mousedown",this._close_handler);}}if(V.parent===W.parent){break;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var A=false,D="mstrmojo.Binding",I="bindings",H=mstrmojo.registry;function B(K){var L;for(L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function C(K,M){if(!A){mstrmojo.requiresCls(D);A=true;}var N;for(N in K){var J=K[N];if(J===null||J===undefined){continue;}var L=typeof J;if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=H.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function E(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[I]);if(K){delete this[I];this._set_bindings(I,K);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children,J=(M&&M.length)||0;if(J){var L;for(L=0;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function G(){var J=this.bindings;if(J){B(J);delete this.bindings;}},_set_bindings:function F(L,J){var K=this[I];if(J!==K){if(K){B(K);}this[I]=J;if(J){C(J,this);}return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var D=mstrmojo.registry,K=mstrmojo.array,I=mstrmojo.publisher;function G(Q,R){if(R){R.parent=Q;var P=D.ref(R);if(R!==P){delete R.parent;}return P;}return null;}function L(Q,R){var P=R.alias;if(P!==null&&P!==""){Q[P]=R;}}function N(Q,R){var P=R.alias;if(R.parent===Q){delete R.parent;}if((P!==null&&P!=="")&&(Q[P]===R)){delete Q[P];}}function A(T,Q){var P=Q&&Q.length,S,R;if(P){S=[];for(R=0;R<P;R++){var U=G(T,Q[R]);if(!U){continue;}S.push(U);L(T,U);}}return S;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,children:null,postCreateChildren:mstrmojo.emptyFn,onaddChild:null,onremoveChild:null,initChildren:function F(){var P="children",Q=this[P];if(!Q){return ;}this[P]=null;this._set_children(P,Q,true);this.postCreateChildren();},_set_children:function E(S,Q,P){var R=this.children;if(Q!==R){if(R){this.removeChildren(null,P);}this.addChildren(Q,0,P);}return false;},destroyChildren:function C(S){var R=this.children,P=(R&&R.length)||0,Q;if(P){for(Q=P-1;Q>-1;Q--){var T=R[Q];if(T&&T.destroy){T.destroy(S);if(!S){N(this,T);}}}if(!S){R.length=0;}}},invalidateChildren:function B(){mstrmojo.array.forEach(this.children,function(P){P.invalidate();});},invalidate:function H(){this.invalidateChildren();},addChildren:function O(U,Q,R){if(!U){return U;}var T=U.constructor===Array,P=A(this,T?U:[U]);if(P&&P.length){var S=this.children||[];if(Q===null||Q===undefined){Q=S.length;}this.children=K.insert(S,Q,P);if(!R&&(this.onaddChild||I.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:P,index:Q});}}return T?P:(P&&P[0]);},removeChildren:function J(V,R){var T=this.children,U=V?[V]:(this.children||[]).concat(),Q=U.length,P=-1,S;if(Q){for(S=Q-1;S>-1;S--){N(this,U[S]);}if(V){P=K.removeItem(T,V);}else{if(T){T.length=0;P=0;}}if(!R&&(this.onremoveChild||I.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:U,index:P});}}return P;},removeAndDestroyChild:function M(R,P,Q){if(R){if(R.parent!==this){throw"Unable to remove an object that is not in the children collection.";}this.removeChildren(R,P);R.destroy(Q);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher");var C=mstrmojo.publisher;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function F(N,H){var G=false,K=this["_set_"+N],I=this[N];if(K){G=K.apply(this,arguments);}else{this[N]=H;G=(I!==H);}if(G){var L=N+"Change",M=this.audibles||{},J=(M[N]===true)||((M[N]!==false)&&(M["*"]!==false));if(J&&(this["pre"+L]||this["on"+L]||this["post"+L]||C.hasSubs(this.id,L))){this.raiseEvent({name:L,prop:N,value:H,valueWas:I});}}return this;},raiseEvent:function B(H){var M=H&&H.name;if(!M){return null;}H.src=this;this.preHandleEvent(H);var K=["pre","on","post"],L=false,I,G;for(I=0,G=K.length;I<G;I++){var J=K[I]+M;if(this[J]){if(this[J](H)===false){L=true;break;}}}if(!L){this.postHandleEvent(H);C.publish(this.id,M,H);}return H;},preHandleEvent:mstrmojo.emptyFn,postHandleEvent:mstrmojo.emptyFn,attachEventListener:function A(G,H,I){return C.subscribe(this.id,G,I,H);},detachEventListener:function E(G){C.unsubscribe(G);},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.hash");var M=mstrmojo.string,L=mstrmojo.hash,E=mstrmojo.dom;var R=mstrmojo.usesFrames?null:document.createElement("span");var J=/mstrAttach:([\w,]+)/g;var Q;function U(a){if(Q===undefined){Q=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return a.replace(J,function Z(g,k){var c=k.split(","),d=[],b=c.length,f;for(f=0;f<b;f++){var h=c[f];if(h){if(Q){if(h.indexOf("mouse")>-1){continue;}else{if(h==="click"){h="touchend";}}}d.push("on"+h+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+h+"', self, event)\"");}}return d.join(" ");});}var N="preBuildRendering",C="buildRendering",B="postBuildRendering";function X(b){var a=b.markupString;if(a.match(/mstrAttach:/)){a=U(a);if(b.markupString===b.constructor.prototype.markupString){b.constructor.prototype.markupString=a;}}var Z=M.apply(a,b);if(Z){if(mstrmojo.usesFrames){var c=(b.domNode&&b.domNode.ownerDocument)||window.document;if(!R||R.ownerDocument!==c){R=c.createElement("span");}}R.innerHTML=Z;var e=R.removeChild(R.firstChild);e.mstrmojoId=b.id;return e;}return null;}function A(b){var a=b.markupSlots,Z,c;if(a){Z={};for(c in a){Z[c]=a[c].call(b);}}return Z;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{markupString:null,markupMethods:null,markupSlots:null,onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function Y(){if((this[N]&&this[N]()===false)||(this[C]()===false)||(this[B]&&this[B]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var Z="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,Z)){this.raiseEvent({name:Z});}return true;},buildDom:function T(){return X(this);},postBuildDom:null,preBuildRendering:mstrmojo.emptyFn,buildRendering:function F(){var Z=this.domNode,a=this.buildDom();this.domNode=a;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(A(this));this.paint();if(a){var d=Z;if(!d){d=this.placeholder;if(d){if(typeof d==="string"){d=document.getElementById(d);}delete this.placeholder;}}if(d){E.replace(d,a);}}var b="onchildRenderingChange",c=this.parent;if(c&&c[b]){c[b](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function S(b){if(this.hasRendered){if(!b){try{var Z=this.domNode;if(Z.parentNode){Z.parentNode.removeChild(Z);}if(mstrmojo.dom.isIE&&Z.outerHTML!=="undefined"){Z.outerHTML="";}}catch(a){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function K(){var a=this.markupMethods;if(!a){return ;}var d=this,e=function(i){var h=a[i];if(h){try{h.apply(d,[true]);}catch(g){throw new Error(["Error in markup method.","Script class: "+d.scriptClass,"Widget id: "+d.id,"Method name: "+i,"Err: "+g.message].join("\n\n"));}}};var c=a.sequence,Z,b,f;if(c){Z=c.length||0;for(b=0;b<Z;b++){e(c[b]);}}else{for(f in a){e(f);}}},redraw:function P(){return false;},refresh:function D(Z){if(this.hasRendered){if(this.redraw()!==true){var a=this.domNode;this.unrender(true);this.placeholder=a;if(Z){Z();}this.render();}}},set:function I(c,Z){this._super(c,Z);if(this.domNode){var a=this.markupMethods,b=a&&a["on"+c+"Change"];if(b){b.apply(this);}}return this;},slotNames:null,addSlots:function G(a){var Z=this.slotNames,b;if(!Z){Z={};this.slotNames=Z;}for(b in a){this[b]=a[b];Z[b]=true;}},removeSlots:function H(Z){if(Z){var a=this.slotNames,b;for(b in Z){delete this[b];if(a){delete a[b];}}}},captureDomEvent:function W(b,Z,c,a){if(this.enabled!==false){this.raiseEvent(mstrmojo._HasMarkup.newDomEvent(b,Z,c||Z.event,a));}},playEffect:function V(a){var Z=this[a];if(Z&&Z.constructor===Object){Z=mstrmojo.insert(mstrmojo.hash.clone(Z));Z.widget=this;this[a]=Z;}if(Z){Z.play();}}});mstrmojo._HasMarkup.addMarkupMethods=function O(a,Z){a.prototype.markupMethods=L.copy(Z,L.copy(a.prototype.markupMethods));};mstrmojo._HasMarkup.MSTRDomEventType=null;mstrmojo._HasMarkup.newDomEvent=function(c,Z,b,a){return{name:c,hWin:Z,e:b,config:a,ctrlKey:E.ctrlKey(Z,b),shiftKey:E.shiftKey(Z,b),metaKey:E.isMetaKey(Z,b),cancel:function(){E.stopPropogation(Z,b);},preventDefault:function(){E.preventDefault(Z,b);},getTarget:function(){return E.eventTarget(Z,b);}};};}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var T=mstrmojo.dom,K=mstrmojo.string,X=mstrmojo.array;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:T.isNSIE?"block":"table",DISPLAY_CELL:T.isNSIE?"block":"table-cell",MINHEIGHT:T.isIE6?"height":"minHeight",addClass:function L(e,d){if(e){if(d.constructor!==Array){d=[d];}var Z=e.className||"",g=" "+Z+" ",a=false,Y=d.length,b;for(b=0;b<Y;b++){var f=d[b];if(!g.match(new RegExp("\\s"+f+"\\s"))){Z+=" "+f;a=true;}}if(a){e.className=K.trim(Z);}}return e;},removeClass:function N(c,b){if(!c){return ;}if(b.constructor!==Array){b=[b];}var Z=" "+(c.className||"")+" ",Y=b.length,a;for(a=0;a<Y;a++){Z=Z.replace(new RegExp("\\s"+b[a]+"\\s","g")," ");}c.className=K.trim(Z);},addWidgetCssClass:function M(d,b){var Z=d.cssClass,c=(Z&&Z.split(" "))||[],a;b=[].concat(b);for(a=0;a<b.length;a++){var Y=b[a];if(X.indexOf(c,Y)===-1){c.push(Y);}}d.cssClass=c.join(" ");},removeWidgetCssClass:function F(e,c){var Z=e.cssClass,d=(Z&&Z.split(" "))||[],b;c=[].concat(c);for(b=0;b<c.length;b++){var Y=c[b];var a=X.indexOf(d,Y);if(a!==-1){d.splice(a,1);}}e.cssClass=d.join(" ");},toggleClass:function S(a,Z,Y){if(Y){this.addClass(a,Z);}else{this.removeClass(a,Z);}},applyShadow:function G(c,d,b,a,Y){var Z=c.style;if(T.isDXIE){Z.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+d+"px, OffY="+b+"px, Color='"+Y+"')";}else{if(T.isFF||T.isWK||T.isIE10){Z[T.CSS3_BOXSHADOW]=d+"px "+b+"px "+a+"px "+Y;}}},removeShadow:function B(Z){var Y=Z.style;if(T.isFF||T.isWK||T.isIE10){Y[T.CSS3_BOXSHADOW]="";}},setOpacity:function U(Z,b){if(T.isDXIE&&!T.isIE9){var c=Z.currentStyle.filter;var Y=null;if(c.length>0){Y=Z.filters["DXImageTransform.Microsoft.Alpha"];}if(Y){Y.opacity=b;Y.enabled=(b!==100);}else{if(b<100){var a="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")";Z.style.filter=(c||"")+" "+a;}}}else{Z.style.opacity=b/100-(T.isIE9?0.00001:0);}},buildGradient:function O(Z,b,Y){if(T.supports(T.cssFeatures.GRADIENTS)){var a={};if(T.isDXIE){a.n="filter";a.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+Z+",StartColorStr='"+b+"',EndColorStr='"+Y+"')";}else{if(T.isFF){a.n="background-image";a.v="-moz-linear-gradient("+((Z===0)?"top":"left")+","+b+","+Y+")";}else{if(T.isWK){a.n="background";a.v="-webkit-gradient(linear,"+((Z===0)?"left top, left bottom":"left top, right top")+",from("+b+"),to("+Y+"))";}else{if(T.isIE10||T.isIEW3C){a.n="background";a.v="linear-gradient("+((Z===0)?"to bottom":"to right")+","+b+","+Y+")";}}}}return a;}return null;},buildRoundCorners:function Q(d,c){if(T.supports(T.cssFeatures.ROUND_CORNERS)){var Z=d+"px";var f=Z+(c?" "+Z+" 0 0":"")+";";if(T.isFF||T.isWinPhone||T.isIE10){return"border-radius:"+f;}if(T.isWK){if(!c){return"-webkit-border-radius:"+Z+";";}var e=["left","right"],b=[],Y=-1,a;for(a=0;a<2;a++){b[++Y]="-webkit-border-top-"+e[a]+"-radius:"+Z;b[++Y]="-webkit-border-bottom-"+e[a]+"-radius:0";}return b.join(";");}}return"";},getBorderWidthsOrPaddings:function D(Z,e){var f={t:0,r:0,b:0,l:0,h:0,w:0};if(!Z){return f;}var c=Z.split(" "),Y=c.length,d;for(d=0;d<Y;d++){c[d]=Math.round(e*parseFloat(c[d])/72);}if(Y<4){if(Y===1){c[1]=c[2]=c[3]=c[0];}else{c[3]=c[1];if(Y===2){c[2]=c[0];}}}f.t=c[0];f.r=c[1];f.b=c[2];f.l=c[3];f.h=f.t+f.b;f.w=f.l+f.r;return f;},getBorderWidths:function H(Z,Y){return this.getBorderWidthsOrPaddings(Z,Y);},getPaddings:function C(Z,Y){return this.getBorderWidthsOrPaddings(Z,Y);},parkAfterFade:function A(Y){var Z=Y.target.style;if(Z.opacity===0){Z.left="-10000px";window.setTimeout(function(){Z.opacity=0.99;},0);return true;}return false;},getStyleValue:function I(Y,c){var a=(c==="float"),b;if(Y.currentStyle){c=a?"styleFloat":c;b=Y.currentStyle[c];}else{if(document.defaultView&&document.defaultView.getComputedStyle){c=a?"cssFloat":c;var Z=document.defaultView.getComputedStyle(Y,null);b=Z?Z[c]:null;}}return b;},getComputedStyle:function R(Y,a){var Z=(window.getComputedStyle)?function(b,c){return window.getComputedStyle(b,c||null);}:function(b){return b.currentStyle||{};};mstrmojo.css.getComputedStyle=Z;return Z(Y,a);},getCssTextFromObj:function E(a){var Z="",Y;for(Y in a){Z+=Y+":"+a[Y]+";";}return Z;},onTransitionEnd:function W(a,Y){var Z="transition",b=window.Modernizr;if(b.testProp(Z)){T.attachOneTimeEvent(a,T.transEndEvtNames[b.prefixed(Z)],Y);}else{window.setTimeout(Y,0);}},flashClass:function P(Z,Y,b){this.toggleClass(Z,Y,true);var a=this;window.setTimeout(function(){a.toggleClass(Z,Y,false);},b);},convertCssToCamelCase:function J(Y){return Y.replace(/\-([a-z])/gi,function(Z,a){return a.toUpperCase();});},printCSSInfo:function V(c){var g=document.styleSheets,l=g.length,d,e;for(e=0;e<l;e++){var f=g[e],h=f.cssRules,a=h?h.length:0,k=0;for(d=0;d<a;d++){var Y=h[d].selectorText;if(Y){try{k+=Y.split(",").length;}catch(b){}}}var Z=f.href;if(!c||(Z&&X.indexOf(Z,c)>-1)){console.log("Stylesheet: "+Z||"Inline CSS Block");console.log("Total rules: "+a);console.log("Total selectors: "+k);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.string","mstrmojo.array");var N=mstrmojo.locales,I=mstrmojo.string,Q=window.mstrConfig,F=mstrmojo.array,K=function(){return mstrmojo.locales.number.THOUSANDSEPARATOR;},R=function(){return mstrmojo.locales.number.DECIMALSEPARATOR;},C=Q.units,T={CM:1,IN:2,MM:3,PT:4,PC:5,PX:6},A={1:"cm",2:"in",3:"mm",4:"pt",5:"pc",6:"px"},E={DEFAULT:-2,FIXED:0,CURR:1,PERCENT:4,FRACTION:5,SCIENTIFIC:6,GENERAL:9};var G=96;String.prototype.reverse=function(){var W="",V;for(V=this.length;V>0;--V){W+=this.charAt(V-1);}return W;};function M(V,X){V=V||"";X=X||V.match(/\".+?\"/g)||[];for(var W=0;W<X.length;W++){V=V.replace(X[W],X[W].substring(1,X[W].length-1).replace(/\$/g,"$$$$"));}return V;}function U(a){var V=86400000,Z=new Date(1900,0,1,0,0,0,0),W=Math.floor(a)-1,Y=a-W-1;if(a>=59){W--;}var X=new Date(Z.getTime()+(W*V));X.setTime(X.getTime()+Y*V+500);return X;}function H(Z,g,i){var a={"d+":Z.getDate(),"h+|H":Z.getHours(),"s+":Z.getSeconds()},V=N.datetime,b;if(/(y+)/.test(g)){var Y=Z.getFullYear().toString(),f=RegExp.$1,X=f.length===2,W=Y.length;g=g.replace(f,Y.substr(X?W-2:0,X?2:W));}if(/(^\[h\])/.test(g)&&i){g=g.replace(RegExp.$1,""+(Math.floor(i*24)));}if(/(\"?:\"?mm)/.test(g)){var c=Z.getMinutes();g=g.replace(RegExp.$1,":"+(RegExp.$1.length===1?c:("00"+c).substr(c.toString().length)));}if(/(AM\/PM)/.test(g)){var h=a["h+"],d=h>11;a["h+"]=h-(d?12:0);g=g.replace(RegExp.$1,d?"PM":"AM");}for(b in a){if(new RegExp("("+b+")").test(g)){g=g.replace(RegExp.$1,RegExp.$1.length===1?a[b]:("00"+a[b]).substr((a[b].toString()).length));}}if(/(mmmm)/.test(g)){g=g.replace(RegExp.$1,V.MONTHNAME_FULL[Z.getMonth()]);}else{if(/(mmm)/.test(g)){g=g.replace(RegExp.$1,V.MONTHNAME_SHORT[Z.getMonth()].substr(0,3));}else{if(/((m|M)+)/.test(g)){var e=(Z.getMonth()+1).toString();g=g.replace(RegExp.$1,RegExp.$1.length===1?e:("00"+e).substr(e.length));}}}return M(g);}function O(W,Z){var X=0,V=Z.length,Y=0;for(;X<V;X++){if(Z[X]==="0"){Y++;}else{if(Z[X]==="#"){if(Y<W){Y++;}}else{continue;}}}return Y;}mstrmojo.num=mstrmojo.provide("mstrmojo.num",{isInt:function D(V){var Y=K(),X=new RegExp("^(-)?[0-9]{1,3}(\\"+Y+"[0-9]{3})*$"),W=new RegExp("^(-)?[0-9]+$");return(String(V).indexOf(Y)&&X.test(V))||W.test(V);},isNumeric:function P(Y,Z){var X=R(),a=K(),W=new RegExp("^(-)?[0-9]{1,3}(\\"+a+"[0-9]{3})*(\\"+X+"[0-9]+)?$"),V=new RegExp("^(-)?[0-9]*(\\"+X+")?[0-9]+$");return(String(Y).indexOf(a)&&W.test(Y))||V.test(Y);},parseInteger:function L(V,W){if(!this.isInt(V)){return Number.NaN;}return parseInt(this.toString(V,true),W);},parseNumeric:function B(V){if(!this.isNumeric(V)){return Number.NaN;}return parseFloat(this.toString(V,true));},inNumericRange:function S(W,X,V){W=this.parseNumeric(W);V=(V!=null)?this.parseNumeric(String(V)):Number.NaN;X=(X!=null)?this.parseNumeric(String(X)):Number.NaN;if(V!=Number.NaN&&(W>V||isNaN(W))){return 1;}if(X!=Number.NaN&&(W<X||isNaN(W))){return -1;}return 0;},convertToUSUnits:function(Y,X,W){var V=Y;X=X||C;switch(parseInt(X,10)){case T.CM:V=parseFloat(this.toString(Y))/2.54+"";break;case T.MM:V=parseFloat(this.toString(Y))/25.4+"";break;case T.PT:V=parseFloat(this.toString(Y))/72+"";break;case T.PC:V=parseFloat(this.toString(Y))/6+"";break;case T.PX:V=parseFloat(this.toString(Y))/G+"";break;}return W?V:this.toLocaleString(V);},convertToLocalUnits:function(Y,X,W){var V;X=X||C;switch(parseInt(X,10)){case T.CM:V=(parseFloat(this.toString(Y))*2.54).toFixed(4)+"";break;case T.MM:V=(parseFloat(this.toString(Y))*25.4).toFixed(4)+"";break;case T.PT:V=(parseFloat(this.toString(Y))*72).toFixed(4)+"";break;case T.PC:V=(parseFloat(this.toString(Y))*6).toFixed(4)+"";break;case T.PX:V=(parseFloat(this.toString(Y))*G)+"";break;default:V=parseFloat(this.toString(Y)).toFixed(4)+"";}return W?V:this.toLocaleString(V);},convertUnits:function(W,X,V){return this.convertToLocalUnits(this.convertToUSUnits(V,W,true),X,true);},toLocaleString:function(V){return(V+"").replace(".",R());},toString:function(X,V){if(V===true){var W=this.getThousandSepRegex();if(W){X=String(X).replace(W,"");}}return String(X).replace(R(),".");},getThousandSepRegex:function(){if(this.thousandSeparatorRegex==null){this.thousandSeparatorRegex=new RegExp(K().replace(/(\W){1}/g,"\\$1"),"g");}return this.thousandSeparatorRegex;},addSeparators:function(X,W){var V=W;if(W=="."||W=="*"||W=="\\"){V="\\"+W;}return X.reverse().replace(/(\d{3})/g,"$1"+W).reverse().replace(new RegExp("^(-)?"+V),"$1");},format:function(Z,Y,c,V){var b="",a=(Y>0)?".":"",W=[];c=(c)?c:"";for(var X=0;X<Y;X++){W.push("0");}W=W.join("");switch(Z){case E.GENERAL:b="0.00";break;case E.PERCENT:b="0"+a+W+"%";break;case E.SCIENTIFIC:b="0"+a+W+"E+00";break;default:b='"'+c+'"#,##0'+a+W;}return this.formatByMask(b,V);},getDecimalLength:function J(X){var V=X.indexOf("."),Y=0;if(V!==-1){var W=X.substr(V+1,X.length).match(/\d+/);if(W&&W.length>0){Y=W[0].length;}}return Y;},formatByMask:function(AD,AT){var AA,r;if(isNaN(AT)){AA=new Date(AT);if(isNaN(AA)){return AT;}r=true;}if(AD==="General"){return String(parseFloat(AT).toFixed(2));}var q=String(AD).split(";"),l="",Y=q[0],h="\u00A4",AM=/"[^"]*"/g,k=(AD&&AD.replace(AM,h).replace(/\[.*\]/g,h))||"",AS=["m","y","d","h","s"],AI=false;F.forEach(AS,function(i){AI=AI||k.indexOf(i,0)!==-1;});if(AI){if(window.SSF){l=window.SSF.format(AD,AT);}if(l!==""){return l;}else{return H(r?AA:U(AT),AD,AT);}}var AH=Y.indexOf("E+"),e=Y.indexOf("%"),x=Y.match(/\".+?\"/g),y=Y.indexOf("?/?")>-1,AB=(AH!=-1)?E.SCIENTIFIC:((e!=-1)?E.PERCENT:((x)?E.CURR:y?E.FRACTION:E.FIXED)),p="",AO="",n=false,W=new String(AT),d=this.parseNumeric(AT)||parseFloat(AT);if(x){if(Y.match(/\[\$.+?\]/g)){for(var f=0;f<x.length;f++){Y=Y.replace(x[f],x[f].substring(1,x[f].length-1));if(x[f].match(/\[\$.+?\]/g)){x[f]=x[f].replace(/\[\$.+?\]/g,x[f][x[f].indexOf("[$")+2]);}}Y=Y.replace(/\[\$.+?\]/g,'"#"'.replace("#",Y[Y.indexOf("[$")+2]));}p=M(Y,x);p=p.replace(Y.replace(/\".+?\"/g,""),h);}if(d<0){W=W.substring(1,W.length);d=-d,n=true;if(q.length>1){var b=q[1].replace(/\[.*\]/,"");AO=M(b.replace(q[0],h));}}var c=function(m,i){return(i)?i.replace(h,m):"-"+m;};if(AB==E.FRACTION){var AL,AK,AR,o=10,z,u=0,AF,AN,Z,X=false,AC;if(AD.indexOf("# ")>-1){X=true;}for(AL=5;AL>0;AL--){AC="/";for(AK=0;AK<AL;AK++){AC+="?";}if(AD.indexOf(AC)>-1){for(AK=1;AK<AL;AK++){o*=10;}break;}}if(X){u=Math.floor(Number(d));d-=u;}AN=o/2;AR=-1;AF=d*o;for(AL=o-1;AL>=2;AL--){Z=(AF*AL)/o;Z=Z-Math.floor(Z);Z=Z*o;if(Math.abs(Z-o)<Z){Z=Math.abs(Z-o);}Z=Z/AL;if(Z<AN){AN=Z;AR=AL;}else{if((Z==AN)&&(Z==0)){AN=Z;AR=AL;}}}z=Math.round(AR*AF/o);for(AL=AR;AL>=2;AL--){if((z%AL==0)&&(AR%AL==0)){z=z/AL;AR=AR/AL;break;}}if(AR==o){AR=1;z=0;}if(z==0){AR=1;}if(z==AR){if(X){l=""+(u+1);}else{l="1";}}else{if(X&&u>0){if(z==0){l=u;}else{l=u+" "+z+"/"+AR;}}else{if(z==0){l="0";}else{l=z+"/"+AR;}}}if(n){l=c(l,AO);}}else{if(AB==E.SCIENTIFIC){if(d!=0){var AU=Math.floor(Math.log(d)/Math.LN10),AJ=d/Math.pow(10,AU),AV=Y.substring(0,AH),g=AV.indexOf("."),AE=Y.length-Y.indexOf("E+")-(""+Math.abs(AU)).length-2,AL,V=AU<0;AU=Math.abs(AU);for(AL=0;AL<AE;AL++){AU="0"+AU;}l+=Number(AJ).toFixed((g!=-1)?AV.length-g-1:0);l=((n)?c(l,AO):l)+"E"+(V?"-":"+")+AU;}else{l="0";}}else{if(AB==E.PERCENT){Y=Y.substring(0,Y.length-1);W=String(d*100);}var g=Y.indexOf("."),a=0,AQ,s=g>=0?Y.substring(0,g):Y;if(s.match(/[#0\?],$/)){d/=1000;W=String(d);}AQ=this.getDecimalLength(W);if(g!=-1){a=O(AQ,Y.substr(g+1,Y.length));}l=String(parseFloat(W).toFixed(Math.min(a,20)));var AP=l.split(".");var AG=Y.replace(/"[^"]*"/g,"").match(/[#\d]+[^\.\d#]+[#\d]+/);if(AG!==null){AP[0]=this.addSeparators(AP[0],K());}l=AP.join(R());if(AB==E.CURR){l=p.replace(h,l);if(l===p&&window.SSF){l=window.SSF.format(AD,AT);}}if(AB==E.PERCENT){l+="%";}if(n){l=c(l,AO);}}}return l;},validateFormat:function(V){var W=true,X=String(V).split(";");if(X[1]&&X[1].indexOf(X[0])<0){W=false;}return W;},generateUniqueID:function(V){var X="0123456789ABCDEF".split(""),Y=[];for(var W=0;W<V;W++){Y[W]=X[0|Math.random()*16];}return Y.join("");},countOfDecimals:function(W,X){var V=String(W);return V.length-(V.indexOf(X!==undefined?X:R())+1);}});mstrmojo.num.UNIT=T;mstrmojo.num.UNIT_SYMBOL=A;})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.locales");var c=mstrmojo.array,P=mstrmojo.meta.TP,G=mstrmojo.meta.STP,O=mstrmojo.hash,F={ANDOR:14,MQ:10,MC:12,AQ:2,AL:6,AC:9,AE:5,F:13,R:21,B:20,XML:1,RLS:15},B={};var W;for(W in F){B[F[W]]=true;}var a={};a[F.AQ]="a";a[F.AL]="a";a[F.AC]="a";a[F.AE]="a";a[F.MQ]="m";a[F.MC]="m";a[F.F]="f";a[F.R]="r";a[F.XML]="p";var K={};K[F.MQ]=["not","m","fn","fnt","cs","dmy","idcsi"];K[F.MC]=["not","m","fn","fnt","m2","m3","p","dmy","idcsi"];K[F.AE]=["not","a","fn","es","a2","fm2","p"];K[F.AQ]=["not","a","fm","fn","cs"];K[F.AL]=["not","a","fm","fn","cs"];K[F.AC]=["not","a","fm","a2","fm2","a3","fm3","fn","cs"];K[F.R]=["not","r"];K[F.F]=["not","f"];K[F.XML]=["not","n","p"];var M={};M[F.MQ]="METRIC_FNS";M[F.MC]="METRIC_FNS";M[F.AQ]="FORM_FNS";M[F.AL]="FORM_FNS";M[F.AC]="FORM_FNS";M[F.AE]="ELEM_FNS";var N={FILTER:1,REPORT:3,METRIC:4,FOLDER:8,PROMPT:10,FUNCTION:11,ATTR:12,FACT:13,DIM:14,FORM:21,ROLE:43,CONS:47},b={FILTER:256,CUSTOMGROUP:257,PROMPT:2560,PROMPT_BOOLEAN:2561,PROMPT_LONG:2562,PROMPT_STRING:2563,PROMPT_DOUBLE:2564,PROMPT_DATE:2565,PROMPT_OBJECTS:2566,PROMPT_ELEMENTS:2567,PROMPT_EXPRESSION:2568,PROMPT_EXPRESSION_DRAFT:2569,PROMPT_DIMTY:2570,PROMPT_BIGDECIMAL:2571,REPORT_GRID:768,REPORT_GRAPH:769,REPORT_ENGINE:770,REPORT_TEXT:771,REPORT_DATAMART:772,REPORT_BASE:773,REPORT_GRIDGRAPH:774,REPORT_NONINTERACTIVE:775,REPORT_CUBE:776,REPORT_EMMACUBE:779,CONS:12032,NDE:12033},T={a:N.ATTR,a2:N.ATTR,m:N.METRIC,m2:N.METRIC,r:N.REPORT,f:N.FILTER,p:N.PROMPT},U={f:b.FILTER};var V={};V[F.MQ]=N.METRIC;V[F.MC]=N.METRIC;V[F.AQ]=N.ATTR;V[F.AL]=N.ATTR;V[F.AC]=N.ATTR;V[F.AE]=N.ATTR;V[F.F]=N.FILTER;V[F.R]=N.REPORT;var J=function(d){var H=d.length,g={},e;for(e=0;e<H;e++){var h=d[e];g[h.did]=h.n;}return g;},E=function(e){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){d.t=d.tp;}}return e;},X=function(e,g){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){if(g){d.t=g;}else{delete d.t;}}}return e;},Z=function(d,f){if(!f){f=[];}f.length=0;var e,H;for(e=0,H=d.length;e<H;e++){f[e]=d[e];}return f;},L={0:[{did:"1,76"},{did:"1,79"},{did:"1,77"},{did:"1,80"},{did:"1,78"},{did:"1,81"},{did:"1,18"},{did:"1,43"}],1:[{did:"2,1"},{did:"2,2"},{did:"3,1"},{did:"3,2"}]};var R={0:[{did:"1,22"},{did:"1,57"}]};mstrmojo.expr=mstrmojo.provide("mstrmojo.expr",{ET:F,ETs:B,ET2TGT:a,ET2COND:K,ET2TP:V,FN:{EQUAL:6,NOT_EQUAL:7,GREATER:8,LESS:9,GREATER_EQUAL:10,LESS_EQUAL:11,IN_LIST:22,NOT_IN_LIST:57,BETWEEN:17,NOT_BETWEEN:44,IS_NULL:54,IS_NOT_NULL:55,AND:19,OR:20,NOT:21,SEARCH:158},FN_MRP:{BETWEEN:3,EXCLUDE_TOP:4,EXCLUDE_BOTTOM:5,BETWEEN_DESCENDING:13},FNT:{DEF:1,RANK:2,PER:3},FN_SEP:",",TP:N,STP:b,DMY_TP:{ATTR:-1,DIM:-2},DTP:{UNKNOWN:-1,INTEGER:1,UNSIGNED:2,NUMERIC:3,DECIMAL:4,REAL:5,DOUBLE:6,FLOAT:7,CHAR:8,VARCHAR:9,LONGVARCHAR:10,BINARY:11,VARBIN:12,LONGVARBIN:13,DATE:14,TIME:15,TIMESTAMP:16,SHORT:21,LONG:22,MBCHAR:23,BOOLEAN:24,PATTERN:25,BIGDECIMAL:30},BFTP:{RESERVED:0,HIDDEN:-1,DATETIME:1,NUMBER:2,TEXT:3,PICTURE:4,URL:5,EMAIL:6,TAG:7,DATE:8,TIME:9,SYMBOL:10,BIGDECIMAL:11,PHONENUMBER:12},METRIC_DTP:3,FN_DTP:{NUM:0,CHAR:1,DATE:2},DTP2PROMPT_STP:{"-1":b.PROMPT,1:b.PROMPT_LONG,2:b.PROMPT_LONG,3:b.PROMPT_LONG,4:b.PROMPT_DOUBLE,5:b.PROMPT_DOUBLE,6:b.PROMPT_DOUBLE,7:b.PROMPT_DOUBLE,8:b.PROMPT_STRING,9:b.PROMPT_STRING,10:b.PROMPT_STRING,14:b.PROMPT_DATE,15:b.PROMPT_DATE,16:b.PROMPT_DATE,21:b.PROMPT_LONG,22:b.PROMPT_LONG,23:b.PROMPT_STRING,24:b.PROMPT_BOOLEAN,30:b.PROMPT_BIGDECIMAL},DTP2FN_DTP:{"-1":0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1,9:1,10:1,11:0,12:0,13:0,14:0,15:0,16:0,21:0,22:0,23:1,24:0,25:1,30:0,34:0},fnCstCount:function A(e,d){var g=this.FN,h=this.FN_MRP,H=this.FNT;if(d===H.DEF||d===undefined){switch(e){case g.BETWEEN:case g.NOT_BETWEEN:return 2;case g.IS_NULL:case g.IS_NOT_NULL:return 0;}}else{if(d===H.PER||d===H.RANK){switch(e){case h.BETWEEN:case h.BETWEEN_DESCENDING:return 2;}}}return 1;},fn_List:function S(d,H){var e=this.FN;return d==e.IN_LIST||d==e.NOT_IN_LIST;},fn_AC_MC:function Y(d,H){var e=this.FN;return(d==e.EQUAL)||(d==e.NOT_EQUAL)||(d==e.GREATER)||(d==e.LESS)||(d==e.GREATER_EQUAL)||(d==e.LESS_EQUAL);},fnName:function Q(h,g,d,f){var H=this[M[h]];if(H&&H.constructor===Object){H=H[this.DTP2FN_DTP[f]]||H["*"];}if(h===F.MQ){H=H.concat(mstrmojo.locales.expression.MetricRP);}var e=c.find(H,"did",(d||1)+this.FN_SEP+g);if(e>-1){return H[e].n;}return"";},findTargets:function I(o,f,q){if(!q){q={};}if(o){var n;for(n in T){var z=o[n];if(z){if(!z[P]){z[P]=T[n];}if(!z[G]&&U[n]){z[G]=U[n];}q[z[f]]=z;}}if(o.dmy){var l=this.TP.ATTR,r=this.DMY_TP.ATTR,e=o.dmy.uts,y,d;for(y=0,d=(e&&e.length)||0;y<d;y++){var m=e[y];if(m&&m.utp===r){var g=m.utgt;if(!g.t){g.t=l;}q[g[f]]=g;}}}var H=o.nds,p,v;for(p=0,v=(H&&H.length)||0;p<v;p++){this.findTargets(H[p],f,q);}var s=o.cs,x=s&&s.length;if(x){for(p=0;p<x;p++){this.findTargets(s[p],f,q);}}}return q;},onLocaleUpdated:function(){var d=mstrmojo.locales.expression,H=mstrmojo.expr;H.BRANCH_FNS=O.copy(J(d.BranchQual),H.BRANCH_FNS);H.ELEM_FNS=Z(X(d.Element,"fn"),H.ELEM_FNS);H.METRIC_FNS={"*":X(c.filter(d.Metric.concat(d.MetricRP),function(e){return e.did&&(c.find(R["0"],"did",e.did)<0);}))};H.FORM_FNS={0:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0);})),1:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["1"],"did",e.did)<0);})),2:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0)&&(c.find(L["1"],"did",e.did)<0);}))};H.DIMTYLEVELS=Z(X(d.DimtyLevels),H.DIMTYLEVELS);},getSortedObjectsByTypeGroup:function D(f){var H=0,d=1,e=2;function g(h){switch(h.t){case N.METRIC:return d;case N.ATTR:case N.DIM:case N.CONS:return H;case N.FILTER:return h.st===b.CUSTOMGROUP?H:e;default:return e;}}return f.slice(0).sort(function(m,l){var n=g(m)-g(l);if(n){return n;}var k=m.n.toUpperCase(),i=l.n.toUpperCase(),h=k.localeCompare(i);if(h){return h;}return m.n.localeCompare(l.n);});},mapBaseFormTypeToDataType:function C(e){e=parseInt(e);if(e===NaN){return -1;}var d=this.BFTP,H=this.DTP;switch(e){case d.DATETIME:return H.TIMESTAMP;case d.DATE:return H.DATE;case d.TIME:return H.TIME;case d.NUMBER:return H.REAL;case d.TEXT:return H.CHAR;case d.BIGDECIMAL:return H.BIGDECIMAL;default:return H.CHAR;}}});mstrmojo.expr.onLocaleUpdated();}());(function(){mstrmojo.requiresCls("mstrmojo.locales");var X=function(){return mstrmojo.locales.datetime;},L=mstrmojo.string;mstrmojo.date=mstrmojo.provide("mstrmojo.date",{monthNumbers:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},REGEXPS:{DATES:{},TIMES:{}},CACHE:{PARSEDATE:{CONTAINS:{},EQUALS:{}},PARSETIME:{CONTAINS:{},EQUALS:{}}},now:Date.now||function D(){return new Date().getTime();},isDate:function Y(b,f,a){var d=this.parseDate(b,a);var e=!!(d&&this.doesDateExist(d.month,d.day,d.year));if(f){if(e){var c=this.formatDateInfo(d,X().DATEOUTPUTFORMAT);if(a){return{match:d.match,formatted:c};}return c;}return null;}return !!e;},formatDateInfo:function R(d,f){if(!f){return"";}var a=d.day,e=d.month,c=d.year;var b=f.replace(/dd/g,this.formatInteger(a,2)).replace(/d/g,Number(a)).replace(/yyyy/g,Number(c)).replace(/yy/g,this.formatInteger(Number(c)%100,2)).replace(/MMM/g,"~~~~").replace(/MM/g,"@@").replace(/M/g,"^").replace(/MMMM/g,X().MONTHNAME_FULL[Number(e)-1]).replace(/\~\~\~\~/g,X().MONTHNAME_SHORT[Number(e)-1]).replace(/\@\@/g,this.formatInteger(e,2)).replace(/\^/g,Number(d.month));return b;},parseDate:function Z(m,f,k){if(m==null){return false;}if(typeof m!=="string"){m=String(m);}m=L.trim(m);var a=this.CACHE.PARSEDATE[f?"CONTAINS":"EQUALS"],c=a[m];if(c||(c===null)){return c;}var b=null;var h;if(k){h=[k];}else{h=[].concat(X().DATEINPUTFORMATS);h.unshift(X().DATEOUTPUTFORMAT);}var d,e;for(d=0,e=h.length;d<e;d++){var g=this._buildRegExp4DateFormat(h[d]),l=g&&m.match(f?g.reContains:g.reEquals);if(l){b={match:l[0],year:g.yearIndex&&this.fourDigitYear(l[g.yearIndex]),day:g.dayIndex&&parseInt(Number(l[g.dayIndex]),10),month:g.monthIndex&&this.numericMonth(l[g.monthIndex])};break;}}a[m]=b;return b;},isTime:function I(b,e,a){var f=this.parseTime(b,a);var d=!!(f&&this.doesTimeExist(f.hour,f.min,f.sec));if(e){if(d){var c=this.formatTimeInfo(f,X().TIMEOUTPUTFORMAT);if(a){return{match:f.match,formatted:c};}return c;}return null;}return !!d;},parseTime:function J(n,f,l){if(n==null){return false;}if(typeof n!=="string"){n=String(n);}n=L.trim(n);var a=this.CACHE.PARSETIME[f?"CONTAINS":"EQUALS"],c=a[n];if(c||(c===null)){return c;}var b=null;var k;if(l){k=[l];}else{k=[].concat(X().TIMEINPUTFORMATS);k.unshift(X().TIMEOUTPUTFORMAT);}var d,e;for(d=0,e=k.length;d<e;d++){var h=this._buildRegExp4TimeFormat(k[d]),m=h&&n.match(f?h.reContains:h.reEquals);if(m){var g=h.ampmIndex&&m[h.ampmIndex];b={match:m[0],hour:h.hourIndex&&this.capitalHour(m[h.hourIndex],g),min:h.minIndex&&parseInt(Number(m[h.minIndex]),10),sec:h.secIndex&&parseInt(Number(m[h.secIndex]),10)};break;}}a[n]=b;return b;},formatTimeInfo:function S(d,b){if(!b){return"";}var c=!(Number(d.hour)%12)?12:(Number(d.hour)%12),a=b.replace(/HH/g,this.formatInteger(d.hour,2)).replace(/H/g,Number(d.hour)).replace(/hh/g,this.formatInteger(c,2)).replace(/h/g,c).replace(/mm/g,this.formatInteger(Number(d.min)||0,2)).replace(/m/g,Number(d.min)||0).replace(/ss/g,this.formatInteger(Number(d.sec)||0,2)).replace(/s/g,Number(d.sec)||0).replace(/a/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/tt/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/AM\/PM/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME);return a;},doesTimeExist:function G(f,b,e){var d=parseInt(f,10);if(d>=0&&d<=23){var a=parseInt(b,10);if(a>=0&&a<=59){if(!e){return true;}var c=parseInt(e,10);if(c>=0&&c<=59){return true;}}}return false;},capitalHour:function C(a,b){a=parseInt(Number(a),10);if(b&&(b.match(X().AM_NAME)||b.match(/AM/i))){return a%12;}if(b&&(b.match(X().PM_NAME)||b.match(/PM/i))){return 12+(a%12);}return a;},getTimeStamp:function O(){var b=new Date();var a=[b.getMonth()+1,b.getDate(),b.getFullYear()];var e=[b.getHours(),b.getMinutes(),b.getSeconds()];var d=(e[0]<12)?"AM":"PM";e[0]=(e[0]<12)?e[0]:e[0]-12;e[0]=e[0]||12;for(var c=1;c<3;c++){if(e[c]<10){e[c]="0"+e[c];}}return a.join("-")+" "+e.join(":")+" "+d;},isDateAndOrTime:function V(a,b){return this.isDateTime(a,b)||this.isDate(a,b)||this.isTime(a,b);},isDateTime:function B(k,a){var e=this.parseDateAndOrTime(k),h=e&&e.date,d=e&&e.time,g=!!h&&!!d&&this.doesDateExist(h.month,h.day,h.year)&&this.doesTimeExist(d.hour,d.min,d.sec);if(a){if(g){var b=this.formatDateInfo(h,X().DATEOUTPUTFORMAT),c=this.formatTimeInfo(d,X().TIMEOUTPUTFORMAT),i=k.indexOf(h.match),f=k.indexOf(d.match);return(f<i)?c+" "+b:b+" "+c;}return null;}return !!g;},parseDateAndOrTime:function Q(b,a,f){var c=this.parseDate(b,true,a);var d=L.trim((c&&c.match)?b.replace(c.match,""):b),e=this.parseTime(d,false,f);if(!c&&!e){return null;}return{date:c,time:e};},inDateTimeRange:function P(c,e,h){var b=this.parseDateAndOrTime(c),f=b&&b.date,i=b&&b.time;if(!f&&!i){return 0;}if(e!=null){var d=this.parseDateAndOrTime(e);if(f&&d&&d.date){var k=this.compareDate(f,d.date);if(k<0){return -1;}if(k==0){if(i&&d.time&&(this.compareTime(i,d.time)<0)){return -1;}}}}if(h!=null){var a=this.parseDateAndOrTime(h);if(f&&a&&a.date){var g=this.compareDate(f,a.date);if(g>0){return 1;}if(g==0){if(i&&a.time&&(this.compareTime(i,a.time)>0)){return 1;}}}}return 0;},compareDate:function A(c,a){if(c===a){return 0;}var d=typeof c==="string"?this.parseDate(c):c,b=typeof a==="string"?this.parseDate(a):a;if(!d){return -1;}if(!b){return 1;}return(d.year-b.year)||(d.month-b.month)||(d.day-b.day)||0;},compareTime:function K(b,a){if(b===a){return 0;}var d=typeof b==="string"?this.parseTime(b):b,c=typeof a==="string"?this.parseTime(a):a;if(!d){return -1;}if(!c){return 1;}return(d.hour-c.hour)||(d.min-c.min)||(d.sec-c.sec)||0;},compareDateTime:function U(b,a){return this.compareDate(b,a)||this.compareTime(b,a);},compareDateAndOrTime:function E(h,f){if(h===f){return 0;}var b=typeof h==="string"?this.parseDateAndOrTime(h):h,a=typeof f==="string"?this.parseDateAndOrTime(f):f;if(!b){return -1;}if(!a){return 1;}var g=b.date,e=a.date,d=b.time,c=a.time;return this.compareDate(g,e)||this.compareTime(d,c);},_buildRegExp4DateFormat:function N(c){if(!c){return null;}var e=this.REGEXPS.DATES[c];if(!e){if(!this.REGEXPS.MONTHNAME_FULL){this.REGEXPS.MONTHNAME_FULL=X().MONTHNAME_FULL.join("|");this.REGEXPS.MONTHNAME_SHORT=X().MONTHNAME_SHORT.join("|");}e=this.REGEXPS.DATES[c]={};e.formatStr=c;var b=e.reStr=c.replace(/([^M|d|y|\s])/g,"\\$1").replace(/dd/g,"~~~~").replace(/d/g,"(\\d{1,2})").replace(/\~\~\~\~/g,"(\\d\\d)").replace(/yyyy/g,"(\\d\\d\\d\\d)").replace(/yy/g,"(\\d\\d)").replace(/MMMM/g,"@@@@").replace(/MMM/g,"@@@").replace(/MM/g,"(\\d\\d)").replace(/M/g,"(\\d{1,2})").replace("@@@@","("+this.REGEXPS.MONTHNAME_FULL+")").replace("@@@","("+this.REGEXPS.MONTHNAME_SHORT+")");e.reEquals=new RegExp("^"+b+"$");e.reContains=new RegExp("^"+b+"\\b");var f=[{key:"monthIndex",index:c.indexOf("M")},{key:"dayIndex",index:c.indexOf("d")},{key:"yearIndex",index:c.indexOf("y")}];f.sort(function(h,g){return h.index-g.index;});var a=1,d;for(d=0;d<3;d++){e[f[d].key]=f[d].index>-1?a++:null;}}return e;},_buildRegExp4TimeFormat:function F(d){if(!d){return null;}var f=this.REGEXPS.TIMES[d];if(!f){if(!this.REGEXPSTR_AMPM){this.REGEXPSTR_AMPM=[X().AM_NAME,X().PM_NAME,String(X().AM_NAME).toLowerCase(),String(X().PM_NAME).toLowerCase()].join("|");}f=this.REGEXPS.TIMES[d]={};f.formatStr=d;var c=d.replace(/\'\'/g,'"');var g=c.match(/\'(.+?)\'/g);c.replace(/\'(.+?)\'/g,"*");c=c.replace(/([^H|h|m|s|z|Z|a|t|\s|A|P|M|\/])/g,"\\$1").replace(/HH|hh/g,"(\\d\\d)").replace(/H|h/g,"(\\d{1,2})").replace(/mm/g,"(\\d\\d)").replace(/m/g,"(\\d{1,2})").replace(/ss/g,"(\\d\\d)").replace(/s/g,"(\\d{1,2})").replace(/a/g,"("+this.REGEXPSTR_AMPM+")").replace(/AM\/PM/,"("+this.REGEXPSTR_AMPM+")").replace(/tt/g,"("+this.REGEXPSTR_AMPM+")").replace(/z|Z/g,"(.+?)");var e,a;for(e=1,a=(g&&g.length)||0;e<a;e++){c=c.replace(/\*/,g[e]);}c=c.replace(/\"/g,"'");f.reEquals=new RegExp("^"+c+"$");f.reContains=new RegExp(c);var h=[{key:"hourIndex",index:d.search(/h|H/)},{key:"minIndex",index:d.indexOf("m")},{key:"secIndex",index:d.indexOf("s")},{key:"ampmIndex",index:d.search(/tt|a|AM\/PM/)},{key:"zoneIndex",index:d.search(/z|Z/)}];h.sort(function(k,i){return k.index-i.index;});var b=1;for(e=0;e<5;e++){f[h[e].key]=h[e].index>-1?b++:null;}}return f;},doesDateExist:function M(d,a,b){var c=new Date(b,d-1,a);return b==c.getFullYear()&&d==c.getMonth()+1&&a==c.getDate();},fourDigitYear:function T(b){b=parseInt(Number(b),10);if(!isNaN(b)){var a=(X().TWODIGITYEARSTART%100)||0;if(b>=0&&b<=a){b=2000+b;}else{if(b>a&&b<100){b=1900+b;}}}return b;},numericMonth:function W(e){var d=parseInt(Number(e),10),c=mstrmojo.array;if(!isNaN(d)){return d;}var a=(e&&e.length)||0,b=-1;if(a){if(a<=3){b=c.indexOf(X().MONTHNAME_SHORT,e);}if(b===-1){b=c.indexOf(X().MONTHNAME_FULL,e);}}return b+1;},formatInteger:function H(c,b){var f=String(c),e=Math.max(b-f.length,0);if(e>0){var a=[f],d;for(d=1;d<=e;d++){a.push("0");}f=a.reverse().join("");}return f;},getFirstDateOfMonth:function(b,a){return new Date(b,a-1,1);},getDateObject:function(g,a,f,c,e,b){g=g||0;a=a||1;f=f||1;c=c||0;e=e||0;b=b||0;return new Date(g,a-1,f,c,e,b);},getDateFromDateInfo:function(a){return this.getDateObject(a.date&&a.date.year,a.date&&a.date.month,a.date&&a.date.day,a.time&&a.time.hour,a.time&&a.time.min,a.time&&a.time.sec);},getDateJson:function(a){return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),min:a.getMinutes(),sec:a.getSeconds()};},isLeapYear:function(a){return !(a%400)||(!(a%4)&&!!(a%100));},getDaysOfMonth:function(c,a){var b=[31,28,31,30,31,30,31,31,30,31,30,31];if(a==2&&this.isLeapYear(c)){return 29;}return b[a-1];},getPreMonth:function(b,a){if(a===1){return{y:b-1,m:12};}return{y:b,m:a-1};},getNextMonth:function(b,a){if(a===12){return{y:b+1,m:1};}return{y:b,m:a+1};}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,b=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(e){var d=parseInt(e,10),f=mstrmojo.validation.STATUSCODE;if(d===0||d===1||d>10){return{code:f.VALID};}return{code:f.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(d){var e=String(d).replace(/[^\d]/g,"");if(e.length<10){return{code:b.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:b.VALID};},VALIDATE_ZIPCODE:function G(d){var f="",e=this.dtp;if(!H.REGEXP.US_ZIP.test(d)){if(H.isNumeric(e)||H.isInt(e)){f=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(e)){f=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:b.INVALID,msg:f};}return{code:b.VALID};},VALIDATE_EMAIL:function T(d){var e=d.indexOf("@");if(e===-1){return{code:b.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(d.substring(e).indexOf(".")===-1){return{code:b.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(d)?{code:b.VALID}:{code:b.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(d){var f=this.dtp,e;if(H.isNumeric(f)||H.isInt(f)){e=String(d).replace(/[^\d]/g,"");if(e.length!==9){return{code:b.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:b.VALID};}};H.isInt=function D(d){return A[d]===1;};H.isNumeric=function Y(d){return A[d]===2||A[d]===5;};H.isString=function J(d){return A[d]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,Z=mstrmojo.num,U=mstrmojo.string,F=mstrmojo.date;function P(l,m){var h=l.dtp,k=l.constraints,o=k.allowedFormatChars||"",g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),n=mstrmojo.locales.number.THOUSANDSEPARATOR,f=mstrmojo.locales.number.DECIMALSEPARATOR,i;if(g){if(!l._intRegExp){o+="0-9-"+(l.isList?L:"")+n;l._intRegExp=new RegExp("[^"+o+"]");}i=l._intRegExp;}if(d){if(!l._numericRegExp){o+="0-9-"+(l.isList?L:"")+f+n;l._numericRegExp=new RegExp("[^"+o+"]");}i=l._numericRegExp;}return !!i&&i.test(m);}function c(l,n){var h=l.dtp,k=l.constraints,g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),f=k.min,m=k.max,i;if(f===undefined&&m===undefined){return false;}if(g||d){return Z.inNumericRange(n,f,m)!==0;}if(e){return F.inDateTimeRange(n,f,m)!==0;}return false;}function K(e,d){return !Z.isNumeric(d);}function R(g,e){var f=(g.dtp===M.DATE),d=(g.dtp===M.TIME);return(f?!F.isDate(e):(d?!F.isTime(e):!F.isDateAndOrTime(e)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function W(d){this._super(d);if(!this.constraints){this.constraints={};}var e=this.constraints;if(!e.hasOwnProperty("trigger")){e.trigger=B.NONE;}},_set_value:function(i,f){var g=this.value,e=(g!==f);if(e){this.value=f;var h=this.constraints.trigger,d=(h&B.VALUESET)>0;if(d){this.validate(f);}}return e;},validate:function O(){var f=(this.value!==null&&this.value!==undefined)?this.value:"",k=this.isList?f.split(L):[f],h,e,l,d=k.length,g;for(g=0;g<d;g++){h=this.doValidation(k[g]);e=(h.code>b.VALID);if(e){if(d>1){h.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",k[g]||" ");}break;}}l=e?"onInvalid":"onValid";if(!e&&this.autoFormat){this.format();}this.set("validationStatus",h);if(this[l]){this[l](h);}},format:function X(){var k=this.dtp,f=(A[k]===6);if(!f){return ;}var m=mstrConfig.listSep,p=this.value||"",e=this.isList?p.split(m):[p],o=k===14,n=[],d,g=mstrmojo.locales.datetime,l=e.length,h;for(h=0;h<l;h++){p=e[h];d=F.parseDateAndOrTime(p);if(d){if(o&&d.date){n.push(F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT));}else{n.push((d.date?F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT):"")+" "+(d.time?F.formatTimeInfo(d.time,g.TIMEOUTPUTFORMAT):""));}}}this.set("value",n.join(m));},isValid:function V(){var d=this.validationStatus;if(!d){this.validate();}return this.validationStatus.code===b.VALID;},clearValidation:function a(){this.set("validationStatus",{code:b.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(q){var n=this.constraints,o=n.regExp,f=n.validator,d={id:this.id,code:b.VALID,msg:""},m=this.dtp,l=(A[m]===1),e=(A[m]===2||A[m]===5),g=(A[m]===3),h=(A[m]===6),k=U.isEmpty(q),p=String(q).length,i="",u=mstrmojo.locales.validation;if(this.required&&k){d.code=b.INVALID_EMPTY;d.msg=u.requiredFieldError;return d;}q=U.trim(q);if(!k&&P(this,q)){if(l){i=u.integerDataType;}if(e){i=u.numericDataType;}if(h){i=u.dateDataType;}d.code=b.INVALID_CHAR;d.msg=u.invalidCharError.replace("#",i);return d;}if(!k&&h&&R(this,q)){d.code=b.INVALID_BAD_DATESTRING;d.msg=u.invalidDateStringError;return d;}if(!k&&(e||l)&&K(this,q)){d.code=b.INVALID_BAD_NUMERICFORMAT;d.msg=u.invalidNumericFormatError;return d;}if(!k&&(l||e||h)&&c(this,q)){d.code=b.INVALID_OUTOFRANGE;if(n.min!==null&&n.max!==null){i=u.outofRangeError.replace("# ","").replace("##",n.min).replace("###",n.max);}else{if(n.min!==null){i=u.noLessMinError.replace("##",n.min).replace("# ","");}else{if(n.max!==null){i=u.noGreaterMaxError.replace("###",n.max).replace("# ","");}}}d.msg=i;return d;}if(g&&n.minLen!==null&&n.maxLen!==null){if(p<n.minLen||p>n.maxLen){d.code=b.INVALID;d.msg=mstrmojo.desc(9211).replace(/#/,n.minLen).replace(/##/,n.maxLen);return d;}}if(o&&!o.test(q)){d.code=b.INVALID_REGEX;d.msg=mstrmojo.desc(9205);return d;}var s=f&&f.apply(this,[q]);if(s){d.code=s.code;d.msg=s.msg;return d;}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(l,Z,k,o,W,c,q,n){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(l),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=k+o,d=e[0].offsetTop,b;for(var m=1;m<=Y;m++){b=e[g].offsetTop-d+n;if(b<k){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,m+1));g+=(b>k)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(e,b,h,d,a,i){var l=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=l+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},n=function m(o,k){for(var p=o;p<k;p++){Y[W++]=l;var q=b.build(h,d,e[p],p);if(V[p]){q=q.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=q;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){n(0,a);}i=i&&b?Math.min(i,c-a):0;var f=c-i;for(var X=a;X<f;X++){Y[W++]=Z;}if(i){n(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,n,f,W,b,m){var e=(g&&g.length)||0,l=this.wrapperNodes(X),o=f.itemStatus,V=mstrmojo.css,Z=n.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(o[c]!==A){l[c].innerHTML=d.build(n,f,g[c],c);if(Z[c]){var Y=l[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===m){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var Y=mstrmojo.css,H=mstrmojo.dom,O=mstrmojo.array,K={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},W="scrollingMode",R="scrolling",b=3;var L=H.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function J(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function P(d,c){var i=H.eventTarget(c,d),g=this.scrollNode,f=H.position(g),h=this.scrollTrackNodes,e=this.scrollBarNodes,k=function k(s){var q=i===h[s];if(q){var u=K[s],l=e[s],v=H.position(l),n=H.getMousePosition(d,c)[u.position],o=n-v[u.position],m=o>0?1:-1,r=g[u.scrollDimension],x=Math.abs(o-(v.h/2))*(r/f[u.dimension]),p={};p[u.scroll]={isStyle:false,start:g[u.scroll],stop:g[u.scroll]+(m*Math.min(r/3,500,x)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:p,duration:200,interval:10,target:g})).play();}};k.call(this,"h");k.call(this,"v");}function B(d,c){var g=this.scrollNode,f=d.type==="mousewheel",e=f?-1:1;mstrmojo.array.forEach(["h","v"],function(o){var m=K[o],i=f?"wheelDelta":"delta",l=d[i+{h:"X",v:"Y"}[o]]*e,k=Math.abs(l),h=l/k,n=k===3&&H.isFF&&!L;g[m.scroll]+=n?h*40:l;});H.stopPropogation(c,d);H.preventDefault(c,d);}function a(h){var g=K[h],f=this.scrollNode,e=H.position(f),d=e[g.dimension],i=f[g.scrollDimension],c=Math.ceil(d)/i;return A(c,d,i);}function A(d,c,e){return(!isNaN(d)&&d<1)&&(Math.abs(c-e)>b);}function C(AA){var r="px",l=K[AA],e=this.scrollNode,m=J.call(this),AB=H.position(e),n=AB[l.dimension],u=e[l.scrollDimension],d=Math.ceil(n)/u,z=this.scrollBarNodes,i=z[AA],p=this.scrollTrackNodes,q=p[AA],x=A(d,n,u),f=l.cls;if(!i){q=p[AA]=document.createElement("div");var g=this,o=function(AD){P.call(g,AD);},k=function(AD){B.call(g,AD);},v=function(AF,AD,AE){H.attachEvent(AF,AD,AE);g.installedEventListeners.push({e:AF,evt:AD,fn:AE});};v(q,"click",o);q.className="mstrmojo-scrolltrack "+f;i=z[AA]=document.createElement("div");i.className="mstrmojo-scrollbar "+f;q.appendChild(i);m.appendChild(q);var y=mstrApp.isSingleTier?"mousewheel":"wheel";v(q,y,k);v(i,y,k);}var AC=i.style,h=(e[l.scroll]/e[l.scrollDimension]),c=H.delta(e,J.call(this))[l.position],s=q.style;if(x){s[l.styleDir]=c+r;AC[l.styleDim]=(d*n)+r;AC[l.styleDir]=(n*h)+r;}Y.toggleClass(m,l.hostCls,x);Y.toggleClass(e,l.scrollNodeCls,x);return x;}function G(){return !(mstrApp.isSingleTier&&L);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function T(c){this._super(c);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=G();}this.installedEventListeners=[];},onRender:function I(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function F(){var d=this.scrollNode;if(d){var c=H.attachMarkupEvent(this.id,d,"scroll");this.installedEventListeners.push({e:d,evt:"scroll",fn:c});}if(!this.hasCustomScrollbar){Y.addClass(d,"mstrmojo-sb-show-default");return ;}if(d){Y.addClass(J.call(this),"mstrmojo-scrollbar-host");Y.addClass(d,"mstrmojo-scrollNode");}},updateScrollbars:function Z(){if(!this.hasRendered){return ;}this.setupScrollNodes();if(!this.hasCustomScrollbar){if(this.scrollNode){this.scrollNode.style.overflowX=a.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};var c=this.scrollNode.style;c.overflowY=C.call(this,"v")?"scroll":"hidden";c.overflowX=C.call(this,"h")?"scroll":"hidden";}},onscroll:function V(){var k=this.scrollNode;if(k&&this.hasCustomScrollbar){var g=function g(l){var m=parseInt(l);return m===null||isNaN(m)?0:m;},h=H.position(k),i=h.h-g(Y.getStyleValue(k,"padding-bottom")),d=h.w-g(Y.getStyleValue(k,"padding-right")),f=this.scrollBarNodes,e=f.v,c=f.h;if(k.scrollHeight-i>0){e.style.top=((i-H.position(e).h)*(k.scrollTop/(k.scrollHeight-i)))+"px";}if(k.scrollWidth-d>0){c.style.left=((d-H.position(c).w)*(k.scrollLeft/(k.scrollWidth-d)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function E(d){var g=this.scrollNode,f=H.position(g),e=d.src.node,c=this.scrollBarNodes;if(this.isDraggingScrollBar(d)){return{isScrollBar:true,direction:e===c.v?"v":"h",scrollTop:g.scrollTop,scrollLeft:g.scrollLeft,conversionRatio:{y:g.scrollHeight/f.h,x:g.scrollWidth/f.w}};}return(this._super&&this._super(d));},isDragValid:function D(c){return this.isDraggingScrollBar(c)||(this._super&&this._super(c))||false;},isDraggingScrollBar:function S(d){var e=d.src.node,c=this.scrollBarNodes;return !!c&&(e===c.v||e===c.h);},ondragstart:function X(c){if(this.isDraggingScrollBar(c)){Y.addClass(c.src.node,R);Y.addClass(J.call(this),W);}if(this._super){this._super(c);}},shouldDragBubble:function Q(c){var d=c.src.node,e=this.scrollTrackNodes;return !!e&&(d===e.v||d===e.h);},ondragmove:function N(d){if(this.isDraggingScrollBar(d)){var m=d.tgt,c=d.src,n=m.pos,e=c.pos,i=c.node,h=this.scrollNode,l=this.scrollBarNodes,k=c.data,g={y:(n.y-e.y),x:(n.x-e.x)},f=k.conversionRatio;if(i===l.v){h.scrollTop=k.scrollTop+(g.y*f.y);}else{h.scrollLeft=k.scrollLeft+(g.x*f.x);}}if(this._super){this._super(d);}},ondragend:function N(c){if(this.isDraggingScrollBar(c)){Y.toggleClass(c.src.node,R,false);Y.toggleClass(J.call(this),W,false);}if(this._super){this._super(c);}},widgetResized:function M(){if(this._super){this._super();}this.updateScrollbars();},unrender:function U(c){O.forEach(this.installedEventListeners,function(d){H.detachEvent(d.e,d.evt,d.fn);});delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(c);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var B=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(mstrmojo.Base,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",id:"",init:function I(J){this.disposables=[];this._super(J);B.add(this);if(this.postCreate){this.postCreate();}},addDisposable:function G(M){var K=this.disposables,L,J;if(M.constructor===Array){for(L=0,J=M.length;L<J;L++){K.push(M[L]);}}else{K.push(M);}return M;},destroyDisposables:function D(J){F.forEach(this.disposables,function(K){if(K.destroy){K.destroy(J);}else{if(K.clear){K.clear();}}});this.disposables=[];},throwAbstractMethodError:function A(J){throw new Error(this.scriptClass+" must implement "+J+".");},destroy:function H(J){if(this.destroyed){return ;}this._super(J);this.destroyDisposables(J);B.remove(this);delete this.parent;this.destroyed=true;}});var C=mstrmojo.Obj;C.free=function E(J){if(J instanceof C){J.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.publisher","mstrmojo._Provider");var G=mstrmojo.hash,A=mstrmojo.array,B=mstrmojo.registry,D=mstrmojo.publisher;mstrmojo.Arr=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Arr",postApplyProperties:null,postCreate:null,length_bindEvents:["add","remove"],init:function H(K){var J;if(K&&K.data){J=K.data;delete K.data;}else{if(K){J=K;K=null;}}if(!J||J.constructor!==Array){J=[];}G.copy(mstrmojo.Arr.prototype,J);if(K){G.copy(K,J);}if(J.postApplyProperties){J.postApplyProperties();}B.add(J);if(J.postCreate){J.postCreate();}return J;},destroy:function E(){D.clearSubscriptions(this.id);B.remove(this);},add:function I(L,J,K){var M=L&&L.length;if(M){if(J==null){J=this.length;}A.insert(this,J,L);if(!K&&(this.onadd||D.hasSubs(this.id,"add"))){this.raiseEvent({name:"add",value:L,index:J});}}},remove:function F(J,L,K){if(L==null){L=1;}if((J!=null)&&L){var M=this.splice(J,L);if(!K&&(this.onremove||D.hasSubs(this.id,"remove"))){this.raiseEvent({name:"remove",value:M,index:J});}}}});mstrmojo.Arr.makeObservable=function C(J,K){if(!J){return ;}if(!K){K={};}K.data=J;return this.prototype.init(K);};})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip","mstrmojo.css");mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",slot:"",alias:"",parent:null,init:function A(C){this._super(C);var D=this.parent;if(!D||D.hasInitBindings){this.initBindings();}},destroy:function B(C){if(this.hasRendered){this.unrender(C);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn,widgetResized:mstrmojo.emptyFn});mstrmojo.Widget.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};mstrmojo.Widget.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};mstrmojo.Widget.topMarkupMethod=function(){var C=this.top;if(C){this.domNode.style.top=C;}};mstrmojo.Widget.leftMarkupMethod=function(){var C=this.left;if(C){this.domNode.style.left=C;}};mstrmojo.Widget.heightMarkupMethod=function(){var C=this.height;if(C){this.domNode.style.height=C;}this.widgetResized();};mstrmojo.Widget.widthMarkupMethod=function(){var C=this.width;if(C){this.domNode.style.width=C;}this.widgetResized();};mstrmojo.Widget.enabledMarkupMethod=function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var B={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:B,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,init:function E(F){this.clear();this._super(F);},setAlignment:function C(F,G){this.alignment={host:F,popup:G};},addPopupHandlers:function D(F,H,G){this.popupHandlers[F]={open:H,close:G};},clear:function A(){this.popupHandlers={};var F=this.ENUM_CORNERS;this.alignment={host:F.BOTTOM_LEFT,popup:F.TOP_LEFT};}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=B;}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo._HasChildren","mstrmojo.Binding","mstrmojo._HasBindings");mstrmojo.Model=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.Model",init:function A(C){this._super(C);if(this.children){this.initChildren();}if(!this.parent){this.initBindings();}},destroy:function B(C){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(C);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom");function Z(a,c){if(!mstrmojo.DocInfoWindow){return ;}var b=a;while(b){if(b instanceof mstrmojo.DocInfoWindow){b[c?"registerScrollLock":"releaseScrollLock"](this);break;}b=b.parent;}}var L=mstrmojo.array,C=mstrmojo.dom,P=mstrmojo.hash,W=mstrmojo.css,F="px";var B=false;function K(a,c){if(!mstrmojo.DocInfoWindow){return ;}var b=a;while(b){if(b instanceof mstrmojo.DocInfoWindow){b[c?"registerLock":"releaseLock"](this);this.lockIW=c?b:null;break;}b=b.parent;}}var A=mstrmojo.ui.PopupConfig.ENUM_CORNERS,T=A.TOP_LEFT,R=A.TOP_RIGHT,H=A.BOTTOM_RIGHT,G=A.BOTTOM_LEFT;function I(a){return(a===G||a===T);}function X(a){return(a===R||a===H);}function N(a){return(a===H||a===G);}function Q(a){return(a===R||a===T);}function U(h,c,o,u){var y=o.x,x=o.y,s=o.w||0,k=o.h||0,b=u.w,p=u.h,r=h.alignment,f=r.popup,e=r.host,v=X(e),z=N(e),q=false,m=false,d=false,n=false;if(I(f)){var g=y+b+(v?s:0);q=c.w<g;}if(Q(f)){var l=x+p+(z?k:0);m=c.h<l;}if(X(f)){var i=y-b+(v?s:0);d=i<0;}if(N(f)){var a=x-p+(z?k:0);n=a<0;}return{top:n,bottom:m,left:d,right:q};}function E(b){var a=this.popupConfig;if(a){P.forEach(a.popupHandlers,function(d,e){var c=d[b?"open":"close"];if(c){c.call(mstrmojo.all[e]||c,!!b);}});}}function J(b){var a=this.popupConfig;if(a&&!a.isHostedWithin){var c=this.hostProxy;if(c){c.style.display=b?"":"none";}}}function Y(a){return a!==undefined&&a!==null&&!isNaN(a);}mstrmojo._IsPopup={visible:false,lockIWForScroll:false,disposable:true,opener:null,onOpen:mstrmojo.emptyFn,onClose:mstrmojo.emptyFn,popupConfig:null,hostProxy:undefined,open:function M(c,a){E.call(this,true);if(this.updatePopupConfig){this.updatePopupConfig(a,c);}else{P.forEach(a,function(f,e){this.set(e,f);},this);}var b="popup-mid-render";this.set("opener",c);if(!this.hasRendered){var d=this.visible;this.visible=false;this.render();W.addClass(this.domNode,b);this.set("visible",d);}if(this.nudge){this.domNode.style.top="-10000px";}J.call(this,true);this.set("visible",true);if(this.lockIWForScroll){Z.call(this,this.opener,true);}if(a&&a.lockIW){K.call(this,a.lockIW,true);}if(this.nudge){this.nudge();}this.adjustCornersForPopupOverflow();this.onOpen();W.removeClass(this.domNode,b);},adjustCornersForPopupOverflow:function V(){var l=this.popupConfig;if(!l){return false;}var AJ=(l.includeScroll!==undefined)?l.includeScroll:true;var o=l.position||C.position(l.anchorElement||l.hostElement,AJ);if(!l.isHostedWithin){var z=this.hostProxy,r=this.hostProxy=document.createElement("div");document.body.appendChild(r);r.appendChild(this.domNode);if(z){z.parentNode.removeChild(z);}var e=r.style,s={x:"left",y:"top",w:"width"};r.className=l.hostProxyCssClass;e.position="absolute";e.background="none";e.height="0";L.forEach(["x","y","w"],function(AM){var AL=o[AM];if(Y(AL)){e[s[AM]]=AL+F;}});}var AG=l.ENUM_CORNERS,x=AG.BOTTOM_LEFT,i=AG.BOTTOM_RIGHT,h=AG.TOP_RIGHT,AC=AG.TOP_LEFT;var AD=U(l,C.position(document.body),o,C.position(this.domNode)),y=AD.right,p=AD.bottom,d=AD.left,v=AD.top,AB=l.alignment,q=AB.popup,AK=AB.host,g=q,c=AK;if(y||d){if(I(c)){c=Q(c)?h:i;}else{if(X(c)){c=Q(c)?AC:x;}}if(y&&I(g)){g=Q(g)?h:i;}else{if(d&&X(g)){g=Q(g)?AC:x;}}}if(p||v){if(I(c)){c=Q(c)?x:AC;}else{if(X(c)){c=Q(c)?i:h;}}if(p&&Q(g)){g=I(g)?x:i;}else{if(v&&N(g)){g=I(g)?AC:h;}}}if(v||y||p||d){if(B){console.log("Overflow directions: "+JSON.stringify(AD));}this._orgalgn={host:AK,popup:q};l.setAlignment(c,g);}if(!l.isHostedWithin){if(Y(o.y)&&Y(o.h)){this.hostProxy.style.top=(o.y+(N(g)?(l.alignWithAnchor===true?o.h:0):(l.alignWithAnchor===true?0:o.h)))+F;}}var AA=N(c),AF=X(c),AE=N(g),n=X(g),k="auto",b="100%",a="0";var u=k,AH=k,m=k,f=k;if(AE){m=AA?a:b;}else{u=AA?b:a;}if(n){AH=AF?a:b;}else{f=AF?b:a;}var AI=this.domNode.style;AI.top=u;AI.right=AH;AI.bottom=m;AI.left=f;return true;},close:function O(b){if(this.onClose){this.onClose(b);}J.call(this,false);if(this.lockIWForScroll){Z.call(this,this.opener,false);}this.set("visible",false);this.set("opener",null);if(this.lockIW){K.call(this,this.lockIW,false);}E.call(this,false);var a=this._orgalgn;if(a){this.popupConfig.setAlignment(a.host,a.popup);}},buildRendering:function D(){var a=this._super();if(a){if(!this.parent&&!this.domNode.parentElement){document.body.appendChild(this.domNode);}}return a;},unrender:function S(a){if(this.popupConfig&&!this.popupConfig.isHostedWithin&&this.hostProxy){document.body.removeChild(this.hostProxy);delete this.hostProxy;}this._super(a);}};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var B="mstrmojo-Image";mstrmojo.Image=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Image",markupString:'<div id="{@id}" class="'+B+' {@cssClass}" style="{@cssText}" mstrAttach:click><image src="{@src}" mstrAttach:load /></div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onsrcChange:function(){var C=this.imgNode;if(C){C.src=this.src||"../javascript/mojo/css/images/1ptrans.gif";}},oncssClassChange:function(){var C=this.domNode;if(C){C.className=this.cssClass||B;}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},src:"",getImageSize:function A(){var C=this.imgNode;return{w:C.clientWidth,h:C.clientHeight};}});mstrmojo.Image.baseCssClass=B;}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,f=mstrmojo.array,e=mstrmojo.boxmodel,c=mstrmojo.dom;function A(i,l,h){var k=i.listSelector;if(k){k[l](i,i.itemsContainerNode,h);}}function L(i,h){var k=i.lastPagePos;if(!k||k.dragId!==h){k=e.offset(i.itemsContainerNode);k.dragId=h;i.lastPagePos=k;var l=i.scrollboxNode;i.lastScrollPos={left:l.scrollLeft,top:l.scrollTop,width:l.clientWidth,height:l.clientHeight};}}function O(l,o,i){var k=o&&o.node;if(k===l.dropCueNode||k===l.dropCueNode.firstChild){return l.dropCuePos;}var m=l.listMapper;var h=m&&m.whereDrop(l,l.itemsContainerNode,k,o.pos,{left:l.lastPagePos.left-l.lastScrollPos.left,top:l.lastPagePos.top-l.lastScrollPos.top,width:l.lastScrollPos.width,height:l.lastScrollPos.height});var n=l.dropCuePos;return((i!==false)&&n&&h&&(n.idx===h.idx)&&(n.left===h.left)&&(n.top===h.top))?n:h;}var g="attachEventListener";function D(i,h){if(i.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,i.itemsScriptClass||mstrmojo.Arr);}}return h;}function H(i,h){if(h&&h[g]){i._sub_its=h;i._sub_add=h[g]("add",i.id,"preadd");i._sub_rmv=h[g]("remove",i.id,"preremove");}}function G(h){if(h._sub_its){var i=mstrmojo.publisher;i.unsubscribe(h._sub_add);i.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var i=this.dropCueNode,h=i&&i.style;if(!h){return ;}var l=this.dropCuePos,k=!!l;if(k){h.left=l.left+"px";h.top=l.top+"px";}h.display=k?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(n){this._super(n);this.items=this.initItems(this.items);var m=this.selectedIndices,k=this.selectedIndicesList,l=this.selectedIndex,p=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(m||k||(l>-1)||p){this.initSelections(m,k,l,p);}if(this.postInitItems){this.postInitItems();}},initItems:function I(h){return D(this,h);},preBuildRendering:function W(){var m=this.listBuilder,p=m.newContext(this);this.ctxtBuilder=p;var i=this.markupSlots,l=!!(this.renderOnScroll&&this.renderBlockSize&&i&&i.scrollboxNode),k=this.items,h=(k&&k.length)||0,n=l?this.firstRenderBlockSize:h,o=l?this.firstRenderBlockSize:0;this._eros=l;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(k,m,this,p,n,o).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var o=this.listMapper;if(o&&o.postBuildRendering){o.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var q=this.id;this._cb_scroll=function(){var i=mstrmojo.all[q];i.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var l=0,k=["itemsEffect","scrollEffect"],h=k.length;l<h;l++){var p=k[l],m=this[p];if(m&&m.constructor===Object){m=mstrmojo.insert(mstrmojo.hash.clone(m));m.widget=this;this[p]=m;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(m){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var k=0,l=["itemsEffect","scrollEffect"],h=l.length;k<h;k++){var n=this[l[k]];if(n&&n.isPlaying){n.cancel();}}this._super(m);},pauseScrollRendering:function P(k,h,i){if(k!==false){k=true;}if(this.paused===!!k){return ;}this.paused=!!k;if(k){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,i);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function b(h,m){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var n=(this.items&&this.items.length)||0;if(!n){if(m){m();}}else{var k=this.scrollboxNode,o=this.itemsContainerNode,l=mstrmojo.boxmodel.offset(o,k),q=this.listMapper,p=q.findScrollRange(o,n,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||k.scrollTop,k.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||k.scrollLeft,k.clientWidth,l.left,l.top);if(this.fillAt(p.start,p.end)){if(h){h();}var i=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[i].fill(h,m);},100);}else{if(m){m();}}}},fillAt:function M(k,i){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,k,i,this.renderBlockSize);}else{return false;}},add:function R(i,h){if(!i||!i.length){return -1;}var k=this.items;if(h==null){h=a.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(k&&k.length)||0;}if(k&&k.add){k.add(i,h);}else{this.set("items",k?f.insert(k.concat(),h,i):i);}return h;},preadd:function B(l){if(this.hasRendered){var o=this.listMapper;if(o){o.onadd(this,this.itemsContainerNode,this.ctxtBuilder,l);}var n=this.listBuilder;if(n){n.onadd(this,this.ctxtBuilder,l);}var k=this.listSelector;if(k){k.onadd(this,l);}if(this._eros){this.onscroll();}else{var m=l.index,h=l.value.length;this.fillAt(m,m+h-1);}}if(this.onadd){this.onadd(l);}if(this._super){this._super(l);}},remove:function U(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var l=this.items;if(l){var k;if(l.remove){for(k=h.length-1;k>-1;k--){l.remove(h[k],1);}}else{l=l.concat();for(k=h.length-1;k>-1;k--){l.splice(h[k],1);}this.set("items",l);}return h[0];}return -1;},_remove:function U(k){var i=this.items;if(!i||(k==null)){return -1;}var h;if(!isNaN(k)){h=k;}else{h=this.itemIndex(k);}if(h>-1){if(i.remove){i.remove(h,1);}else{i=i.concat();i.splice(h,1);this.set("items",i);}}return h;},duplicate:function Y(n,i,k){var l=this.items,h=-1;if(!l||(n==null)){return -1;}if(!isNaN(n)){if(i===null||i===undefined){i=n+1;}n=l[n];}else{if(i===null||i===undefined){i=this.itemIndex(n)+1;}}if(n){var m;m=a.copy(k,a.clone(n));h=this.add([m],i);}return h;},preremove:function N(i){if(this.hasRendered){var l=this.listMapper;if(l){l.onremove(this,this.itemsContainerNode,this.ctxtBuilder,i);}var k=this.listBuilder;if(k){k.onremove(this,this.ctxtBuilder,i);}var h=this.listSelector;if(h){h.onremove(this,i);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(i);}if(this._super){this._super(i);}},move:function S(m,s){function q(u,i){u=parseInt(u,10);return i===1||(s>=u&&s<u+i);}var r=(this.items&&this.items.length)||0;if(s===-1||s==null||isNaN(s)){s=r;}else{s=Math.min(s,r);}var l,h,o,n;if(m.constructor===Array){h=m;o=m;n=(h&&h.length)||0;if(q(m[0],m.length)){return false;}l=f.get(this.items,m);}else{if(typeof (m)==="object"){l=[m];n=1;h=this.itemIndex(l[0]);o=[h];if(q(h,1)){return false;}}else{h=m;o=[m];n=1;if(q(h,1)){return false;}l=[this.items[h]];}}var p=0;for(var k=0;k<n;k++){if(o[k]<=s){s--;p++;}}if(p==o.length){s++;}if(l[0]!=null){this.remove(h);this.add(l,s);}return true;},itemIndex:function F(h){if(h==null){return -1;}var i=this.itemIdField;return i?f.find(this.items,i,h[i]):f.indexOf(this.items,h);},prechange:function T(l){if(this.hasRendered){var k=[this.listBuilder,this.listMapper];for(var m=0,h=k.length;m<h;m++){var n=k[m];if(n&&n.onchange){n.onchange(this,this.itemsContainerNode,this.ctxtBuilder,l);}}}},makeObservable:false,_set_items:function J(o,h){var m=this.items;h=this.initItems(h);this.items=h;if(m!==h){var l=this,k=function(){if(l.autoHide){l.set("visible",!!(h&&h.length));}l=null;},i=this.hasRendered;if(i){this.refresh(k);}else{k();}}return m!==h;},premousedown:function d(h){A(this,"premousedown",h);},premouseup:function Q(h){A(this,"premouseup",h);},scrollTo:function V(i){var h,k=this.listMapper;if(k&&k.toItem){if(!isNaN(i)){h=i;}else{h=this.itemIndex(i);}if(h>=0){k.toItem(this,h);}}},draggable:false,getDragData:function(m){L(this,m.id);var k=O(this,m.src),i=k&&k.idxActual;if((i>-1)&&this.selectedIndices[i]){var l=this.sortSelectedIndices(),h=f.get(this.items,l)||[];switch(h.length){case 1:return a.copy({html:h[0][this.itemDisplayField],index:l[0]},a.copy(h[0]));case 0:return null;default:return a.copy({html:h.length+" selections",indices:l},h);}}},dropZone:false,ondragenter:function(h){L(this,h.id);this.set("dropCuePos",O(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",O(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},isDragValid:function C(h){return h&&h.src&&h.src.data;},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(l){var i=l&&l.tgt,h=i&&i.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!c.ctrlKey(i.hWin,i.e)){var k=l.src&&l.src.data;if(k&&(k.indices||(k.index!==null))){this.remove(k.indices||k.index);}}}}},ondrop:function(r){var x=r&&r.src,q=x&&x.data;if(q){var l=O(this,r.tgt,false),u=l&&l.idx,m=(q&&q.constructor===Array),k=this.sortSelectedIndices();var o=this.items;u=Math.min(u,o&&o.length)||0;var v=true;if(x.widget===this){v=this.move(k,u);f.forEach(k,function(i){if(i<=u){u--;}});}else{this.add(m?q:[q],u);}if(v){var p=m?q.length:1,h={};for(var n=0;n<p;n++){h[u+n]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.registry","mstrmojo._HasContextMenu","mstrmojo.Widget");var F=mstrmojo.dom,K=mstrmojo.css,N=16;mstrmojo.ContextMenuItem=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasContextMenu],{scriptClass:"mstrmojo.ContextMenuItem",SUBMENU_SHIFT:3,visible:true,checked:false,enabled:true,buildDom:function(){var U=document.createElement("tr"),V=this.data,Y=this._cmSource,R,S;U.id=this.id;U.className="mstrmojo-ContextMenuItem "+(Y.isSeparatorItem(V)?"separator":Y.item2textCss(V));var W=this,X=function(){W.handleMouseOver();},T=function(){W.handleMouseOut();},Q=function(){W.handleClick();};F.attachEvent(U,"mouseover",X);F.attachEvent(U,"mouseout",T);F.attachEvent(U,"click",Q);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-left";S=document.createElement("img");S.src="../images/1ptrans.gif";R.appendChild(S);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-text";if(Y.isSeparatorItem(V)){S=document.createElement("img");S.src="../images/1ptrans.gif";}else{S=document.createElement("div");S.className="mstrmojo-CMI-content";R.innerHTML=V.itemWidget?"&nbsp":V[this.itemField];}R.appendChild(S);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-right "+(this.hasSubmenu?"sm":"");S=document.createElement("img");S.src="../images/1ptrans.gif";R.appendChild(S);return U;},buildRendering:function L(){this._super();var Q=this.data.itemWidget;if(Q){Q.placeholder=this.domNode.cells[1].children[0];Q.data=this.data;Q=mstrmojo.insert(Q);Q.render();Q.parent=this;this.itemWidget=Q;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"":"none";},oncheckedChange:function(){K.toggleClass(this.domNode,["checked"],this.checked);},onenabledChange:function(){K.toggleClass(this.domNode,["disabled"],!this.enabled);}},getMenuPosition:function I(){var Q=F.position(this.domNode,true);return{x:Math.round(Q.x+Q.w-this.SUBMENU_SHIFT),y:Math.round(Q.y)};},getContextMenuItems:function B(){return this.data[this.itemChildrenField];},getContextMenuCssClass:function D(){return this.data.cmCssClass||"";},callOnContextMenuOpen:function M(){var Q=this.data;if(Q.onContextMenuOpen){Q.onContextMenuOpen.apply(this,[]);}},callOnContextMenuClose:function A(){var Q=this.data;if(Q.onContextMenuClose){Q.onContextMenuClose.apply(this,[]);}},attachMousedownEvent:function J(){},getContextMenuSource:function P(){return this._cmSource;},adjustMenuPosition:function G(){var Q=this._subMenu,T=this._subMenu.domNode,S=T.offsetHeight,R=T.offsetWidth,W=F.windowDim(),V=F.position(T,false),U=F.position(T,true);if((V.x+R+N)>W.w){Q.set("left",(F.position(this.domNode,true).x-R)+"px");}if((V.y+S+N)>W.h){Q.set("top",(W.h-S-N+(U.y-V.y))+"px");}},handleMouseOver:function O(){var Q=this,R=function(){if(Q.hasSubmenu){Q.showContextMenu();}Q._cmSource.closeMenuTree(Q);Q._mouseOverTimer=null;};if(this._cmSource.activeMenuItem!==this){this._mouseOverTimer=window.setTimeout(R,80);}},handleMouseOut:function H(){if(this._mouseOverTimer){window.clearTimeout(this._mouseOverTimer);this._mouseOverTimer=null;}},closeMenuTree:function C(){this._cmSource.closeMenuTree();},handleClick:function E(){if(this.hasSubmenu){return ;}var Q=this._cmSource,R=this.data;if(!this.itemWidget){if(!Q.isSeparatorItem(R)&&Q.queryEnabled(R)){if(Q.executeCommand){Q.executeCommand(this.data);}Q.closeMenuTree();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var C=mstrmojo.dom,B=mstrmojo.hash,E=mstrmojo.css;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",enabled:true,selected:false,markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:function(){E.toggleClass(this.domNode,"disabled",!this.enabled);},onselectedChange:function(){E.toggleClass(this.domNode,"selected",this.selected);},ontextChange:function(){this.textNode.innerHTML=this.text;},ontitleChange:function(){this.domNode.title=this.title;},onwidthChange:mstrmojo.Widget.widthMarkupMethod},oniconClassChange:function D(J){var K=this.domNode;if(this.hasRendered&&K){K.className=K.className.replace(J.valueWas,"")+" "+J.value;}},onclick:mstrmojo.emptyFn,ontouchend:function I(J){this.onclick(J);}});mstrmojo.Button.newIconButton=function H(L,O,M,J,N){var K={scriptClass:"mstrmojo.Button",title:L,cssClass:O,text:"",onclick:M};if(J){K.bindings=J;}B.copy(N,K);return K;};function F(M,N,J,P){var L=[];if(J){L.push(J);}var O=P&&P.cssClass;if(O){L.push(O);delete P.cssClass;}var K={scriptClass:"mstrmojo.Button",cssClass:L.join(" "),text:M};if(N){K.onclick=N;}return B.copy(P,K);}mstrmojo.Button.newInteractiveButton=function G(M,N,P,O){var L={glowClass:"glow"};if(P&&(C.isFF||C.isWK)){B.copy({onmousedown:function J(){E.applyShadow(this.domNode,0,0,10,P);},onmouseup:function K(){E.removeShadow(this.domNode);}},L);}return F(M,N,"mstrmojo-InteractiveButton",B.copy(O,L));};mstrmojo.Button.newWebButton=function A(K,J,M,L){return F(K,J,"mstrmojo-WebButton"+(M?" hot":""),L);};mstrmojo.Button.newActionButton=function(K,L,M){var J=mstrmojo.Button.newWebButton(K,L,false,M);J.cssClass=J.cssClass+" action-button";return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.array","mstrmojo._HasChildren");var G=mstrmojo.array;function E(P){if(!this.shouldPropagateEnabled){return ;}var O=this._disabledChildren;G.forEach(P,function(Q){if(Q.enabled){O.push(Q.id);Q.set("enabled",false);}});}function J(){G.forEach(this._disabledChildren,function(O){var P=mstrmojo.all[O];if(P&&P.parent===this){P.set("enabled",true);}},this);this._disabledChildren=[];}mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",containerNode:null,preserveChildDomOrder:true,shouldPropagateEnabled:false,init:function M(P){this._super(P);this._disabledChildren=[];this.attachEventListener("addChild",this.id,function(Q){if(this.shouldPropagateEnabled&&!this.enabled){E.call(this,Q.value);}});if(this.children){this.initChildren();}var O=this.parent;if(!O||O.hasInitBindings){this.initBindings();}},destroy:function H(O){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(O);},unrender:function I(Q){var R=this.children,O=(R&&R.length)||0,P;for(P=O-1;P>-1;P--){R[P].unrender(true);}this._super(Q);},postBuildRendering:function A(){if(this._super()!==false){this.renderChildren();return true;}return false;},renderChildren:function L(){var Q=this.children,O=(Q&&Q.length)||0,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}}},childRenderCheck:function D(P){if(P&&!P.hasRendered){var O=P.slot||this.defaultChildSlot;return !!this[O];}return false;},addChildren:function N(R,P,Q){var O=this._super(R,P,Q);if(O){this.childRenderOnAddCheck(O);}return O;},removeChildren:function F(V,R){var U=V?[V]:(this.children||[]),O=U.length,S;for(S=O-1;S>-1;S--){var Q=U[S],P=Q&&Q.domNode;if(P){var T=this[(Q.slot||this.defaultChildSlot)];if(P.parentNode===T){T.removeChild(P);}}}return this._super(V,R);},childRenderOnAddCheck:function B(Q){if(this.hasRendered&&Q){var O=Q.length,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}else{if(R&&R.hasRendered){this.onchildRenderingChange(R);}}}}},onchildRenderingChange:function K(O){var W=O&&O.domNode;if(!W){return ;}var P=this.defaultChildSlot,V=O.slot||P,Y=this[V],Q=this.children;if(!Y){if(W.parentNode){W.parentNode.removeChild(W);}}else{if(W.parentNode===Y){return ;}if(!this.preserveChildDomOrder){Y.appendChild(W);}else{var R,U;for(U=Q.length-1;U>=0;U--){var X=Q[U];if(X===O){break;}if(V===(X.slot||P)){var Z=X.domNode;if(Z&&Z.parentNode===Y){R=Z;}}}if(R){Y.insertBefore(W,R);}else{Y.appendChild(W);}}}if(mstrmojo.publisher.hasSubs(this.id,"childrenRendered")){var S=Q.length,T;for(T=0;T<S;T++){if(!Q[T].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}},propagateChildProps:function C(S){var R=this[S],Q=this.children||[],O=Q.length,P;for(P=0;P<O;P++){Q[P].set(S,R);}}});mstrmojo.Container.enabledMarkupMethod=function(){mstrmojo.Widget.enabledMarkupMethod.apply(this,arguments);if(this.shouldPropagateEnabled){if(this.enabled){J.call(this);}else{E.call(this,this.children);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css");var C=mstrmojo.css,E=mstrmojo.desc(14058,"Show Details"),A=mstrmojo.desc(14059,"Hide Details"),F=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div>'+F+'</div><div class="toggle-details-link" >'+E+'</div><div class="error-details">{@en@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];}},markupMethods:{onshowDetailsChange:function(){var H=this.showDetails;this.toggleDetailsNode.innerHTML=H?A:E;C.toggleClass(this.domNode,"show-details",H);this.updateScrollbars();}},shortDesc:undefined,longDesc:undefined,showDetails:false,init:function G(H){this._super(H);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function B(H){var J=H.getTarget(),I,K=this.longDesc;if(J===this.contactNode){I="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(K?("&body="+encodeURI("Detail:\r\n"+K)):"");mstrApp.openPage(I,"_self");}else{if(J===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);}}},setupScrollNodes:function D(){this.scrollNode=this.scrollNode;}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Widget");var B=mstrmojo.dom;mstrmojo.InlineEditBox=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.InlineEditBox",text:null,editMode:false,allowEdit:true,okSave:false,emptyHint:"Enter your text here.",markupString:'<div id="{@id}" class="mstrmojo-InlineEditBox {@cssClass}" style="{@cssText}" mstrAttach:click><div class="mstrmojo-InlineEditBox-text"></div><div class="mstrmojo-InlineEditBox-edit"><input type="text" class="mstrmojo-InlineEditBox-input" mstrAttach:keyup/><img class="mstrmojo-InlineEditBox-ok" src="../images/1ptrans.gif" title="Save"/><img class="mstrmojo-InlineEditBox-cancel" src="../images/1ptrans.gif" title="Cancel"/></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.lastChild;},inputNode:function(){return this.domNode.lastChild.firstChild;},okNode:function(){return this.domNode.lastChild.childNodes[1];},cancelNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text||this.emptyHint||"");},oneditModeChange:function(){var H=this.editMode,E=this.domNode,D=this.textNode,G=this.editNode;mstrmojo.css.toggleClass(E,["edit"],H);if(H){D.style.display="none";G.style.display="block";D=this.inputNode;var F=D.style;D.value=this.text||"";F.width=(E.clientWidth-(this.okSave?(this.okNode.offsetWidth+this.cancelNode.offsetWidth):0))+"px";F.height=E.clientHeight+"px";D.focus();if(D.createTextRange){var I=D.createTextRange(),C=D.value.length;I.move("character",C);I.select();}}else{D.style.display="block";G.style.display="none";}},onokSaveChange:function(){var C=this.okSave?"inline":"none";this.okNode.style.display=C;this.cancelNode.style.display=C;},onallowEditChange:function(){mstrmojo.css.toggleClass(this.domNode,["disable"],!this.allowEdit);}},onvisibleChange:function A(){if(this.domNode){this.domNode.style.display=(this.visible?"block":"none");}},preclick:function(C){var E=C.e,D=B.eventTarget(C.hWin,E);if(D===this.okNode){this.save();}else{if(D===this.cancelNode){this.cancel();}else{if(this.editMode!==this.allowEdit){this.set("editMode",this.allowEdit);}}}},prekeyup:function(C){var E=C.e,D=E.keyCode||E.charCode;if(D===mstrmojo.Enum_Keys.ENTER){this.save();}else{if(D===mstrmojo.Enum_Keys.ESCAPE){this.cancel();}}},_attachEvents:function(){var C=this;if(this.editMode){if(!this._save_handler){this._save_handler=function(){var D=B.eventTarget(self,arguments[0]);if(!B.contains(C.domNode,D,true,document.body)){C.save();}};}B.attachEvent(document.body,"mousedown",this._save_handler);}else{if(this._save_handler){B.detachEvent(document.body,"mousedown",this._save_handler);}}},postBuildRendering:function(){if(this._super){this._super();}this._em_sub=this.attachEventListener("editModeChange",this.id,"_attachEvents");},destroy:function(){this.detachEventListener(this._em_sub);if(this._super){this._super();}},save:function(){this.set("text",this.inputNode.value);this.set("editMode",false);if(this.onSave){this.onSave();}},cancel:function(){this.set("editMode",false);if(this.onCancel){this.onCancel();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string");var B=mstrmojo.string;mstrmojo.Label=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Label",allowHTML:false,text:"",title:"",markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" title="{@title} "mstrAttach:click></div>',markupMethods:{ontitleChange:function(){this.domNode.title=this.title;},ontextChange:function(){var C=this.text;C=B.isEmpty(C)?"":C.toString();this.domNode.innerHTML=this.allowHTML?C:B.encodeHtmlString(C,true);},oncssTextChange:mstrmojo.Widget.cssTextMarkupMethod,onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Widget.enabledMarkupMethod},autoHide:false,_set_text:function A(E,C){if(this.autoHide){this.set("visible",(C!==null)&&(C!=="")&&(C!==undefined));}var D=this.text;this.text=C;return(D!==C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Widget","mstrmojo.css","mstrmojo.dom");var Y=mstrmojo.css,F=mstrmojo.dom;var Z={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};function A(){var c=this.value,b=this.inputNode,d=b.value,a=(c!==null&&c!==undefined)?String(c):"";if(a!==d&&(!this.keepEmpty||d!==this.emptyText)){b.value=a;}if(b.mstrmojoEmpty){Y.removeClass(b,[this.emptyClass]);b.mstrmojoEmpty=null;}}function X(){var a=this.inputNode;a.value=this.emptyText||"";Y.addClass(a,[this.emptyClass]);a.mstrmojoEmpty=true;}function N(){var a=this.inputNode;if(a){this.readingDom=true;this.set("value",a.value);this.readingDom=false;}}function U(a){var b=this;if(a===-1){N.call(this);}else{if(this._lastTimeoutId){window.clearTimeout(this._lastTimeoutId);}this._lastTimeoutId=window.setTimeout(function(){delete b._lastTimeoutId;N.call(b);},a||100);}}mstrmojo.TextBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TextBox",value:"",type:"text",hint:"",readOnly:false,size:"",maxLength:"",cssDisplay:"inline",tabIndex:"",emptyText:"",keepEmpty:false,emptyClass:"mstrmojo-empty",valueChangeDelay:-1,textValid:true,autoComplete:true,autoCorrect:true,autoCapitalize:true,markupString:'<input id="{@id}" class="mstrmojo-TextBox {@cssClass}"  style="{@cssText}" title="{@tooltip}" type="{@type}" value="" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}"min="{@min}" max="{@max}" placeholder="{@hint}" mstrAttach:focus,keyup,blur,paste,cut,input,click,keydown  tstid="{@tstid}"/>',markupSlots:{inputNode:function D(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,oncssClassChange:function S(){this.inputNode.className="mstrmojo-TextBox "+(this.cssClass||"");},onhintChange:function O(){this.inputNode.setAttribute("placeholder",this.hint);},onenabledChange:function E(){var a=this.inputNode;a.disabled=!this.enabled;Y.toggleClass(a,"disabled",!this.enabled);},onvalueChange:function P(){var a=this.value,b=(a===undefined)||(a===null)||(a==="");if(b){if(!this.hasFocus){X.call(this);}else{this.inputNode.value="";}}else{A.call(this);}if(F.isIE9){this.inputNode.type=b?"text":this.type;}},ontooltipChange:function R(){this.domNode.title=this.tooltip;},onreadOnlyChange:function H(){this.inputNode.readOnly=this.readOnly;},ontextValidChange:function B(){Y.toggleClass(this.inputNode,["err"],!this.textValid);}},postBuildRendering:function V(){this._super();var a=this.inputNode;a.setAttribute("autocomplete",this.autoComplete?"on":"off");a.setAttribute("autocorrect",this.autoCorrect?"on":"off");a.setAttribute("autocapitalize",this.autoCapitalize?"on":"off");},focus:function Q(){if(this.inputNode&&this.inputNode.offsetParent){try{this.inputNode.focus();}catch(a){}}},prefocus:function M(){this.hasFocus=true;A.call(this);},blur:function T(){this.inputNode.blur();},preblur:function W(){window.setTimeout(function(){},200);this.hasFocus=false;N.call(this);var a=this.value;if(((a===null||a==="")&&this.emptyText)||(this.keepEmpty&&a===this.emptyText)){X.call(this);}},prekeyup:function I(b){var a=b.hWin,c=b.e||a.event;U.call(this,this.valueChangeDelay);var d=Z[c.keyCode];if(this["on"+d]){this["on"+d](b);}},preinput:function J(){U.call(this,this.valueChangeDelay);},prepaste:function K(){U.call(this);},precut:function G(){U.call(this);},setInvalidState:function C(a){this.set("textValid",true);if(a){this.domNode.setAttribute("title",a);}},cleanUp:function L(){this.inputNode.value="";this.set("textValid",false);this.domNode.setAttribute("title",this.tooltip);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Container","mstrmojo._IsPopup","mstrmojo.boxmodel","mstrmojo.dom","mstrmojo.ui._HasScroller");var L=mstrmojo.boxmodel,I=mstrmojo.dom,M=mstrmojo.css,O="mstrmojo-Tooltip",A="mstrmojo-scrollNode",E=20;function C(S,T,R){var U="connectScrollbox";if(R){U="dis"+U;}var Q=S&&S.parent;while(Q){if(Q[U]){Q[U](T);}Q=Q.parent;}}function G(){if(!this._paintHandle){var R=this.id,Q=function(V){var Z=mstrmojo.all[R];if(!Z){return ;}delete Z._paintHandle;var T=[O],a=Z.cssClass;if(a){T.push(a);}var S=mstrApp.getThemeClassName&&mstrApp.getThemeClassName(),X=Z.opener;if(X&&X.getTooltipThemeClass){S=X.getTooltipThemeClass();}T.push(S);Z.domNode.className=T.join(" ");var Y=Z.content,U=Z.contentNode,W=Z.arrowNode;U.className=(O+"-content "+A+" "+Z.contentNodeCssClass);U.style.cssText=Z.contentNodeCssText;U.innerHTML=Y;W.style.cssText="";Z.domNode.style.visibility=!!Y?"visible":"hidden";Z.updatePosition();if(!V&&Z.optimizePos){Z.optimizePos();}Z.updateScrollbars();};if(!this._hasPaint){Q(true);this._hasPaint=true;}else{this._paintHandle=window.setTimeout(Q,0);}}}function B(h,c,a,Y){var T=c&&(c.richTooltip||c.tooltip),f=a?I.getMousePosition(a,Y||self):null,Q=T&&(typeof T==="string");var U="",g="",d="",Z=T,X=null,W=mstrmojo.tooltip.POS_TOPLEFT,S=null,b=null;var V=false,R=false;if(T&&!Q){g=T.cssClass||g;U=T.contentNodeCssClass||U;d=T.contentNodeCssText||d;Z=T.content||"";X=T.refNode||X;W=T.posType||W;S=T.left||0;b=T.top||0;V=T.keepArrowXPos||V;R=T.keepArrowYPos||R;}h.set("contentNodeCssClass",U);h.set("cssClass",g);h.set("contentNodeCssText",d);h.set("content",Z);h.set("refNode",X);h.set("posType",W);h.set("left",Q?((f&&f.x)||h.left):S);h.set("top",(Q||!T)?((f&&(f.y+E))||h.top):b);h.set("keepArrowXPos",V);h.set("keepArrowYPos",R);}mstrmojo.Tooltip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.Tooltip",content:null,top:null,left:null,refNode:null,keepArrowXPos:false,keepArrowYPos:false,posType:"TL",markupString:'<div id="{@id}" class="'+O+' {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout><div class="'+O+'-shadow {@shadowNodeCssClass}"></div><div class="'+O+'-contentWrapper"><div class="'+O+"-content "+A+' {@contentNodeCssClass}" style="{@contentNodeCssText}"></div></div><div class="'+O+'-arrow"></div></div>',markupSlots:{containerNode:function(){return this.domNode.children[1];},contentNode:function(){return this.domNode.children[1].firstChild;},shadowNode:function(){return this.domNode.firstChild;},arrowNode:function(){return this.domNode.children[2];}},setupScrollNodes:function D(){this.scrollNode=this.contentNode;this.scrollbarHostNode=this.containerNode;},_previousVisible:false,markupMethods:{onvisibleChange:function(){var R=this.domNode.style,Q=!!this.visible;if(this._previousVisible!==Q){R.visibility="hidden";}R.display=Q?"block":"none";this._previousVisible=Q;if(Q){this.updatePosition();if(this.content){G.call(this);}}},onleftChange:G,ontopChange:G,onrefNodeChange:G,onposTypeChange:G,oncontentNodeCssClassChange:G,oncontentNodeCssTextChange:G,oncontentChange:G,oncssClassChange:G},preBuildRendering:function N(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}return this._super();},updatePosition:function H(V){if(!this.visible&&!V){return ;}var U=this.refNode,T=U?L.offset(U,document.body):{left:I.getHorizontalScroll(),top:I.getVerticalScroll()},l=this.domNode.style,e=this.containerNode,g=e.offsetWidth,Y=e.offsetHeight,R=this.posType,b=R.indexOf("R")>-1,W=R.indexOf("B")>-1,a=this.top!==null?parseInt(this.top,10)+T.top-(W?Y:0):null,S=this.left!==null?parseInt(this.left,10)+T.left-(b?g:((R.indexOf("C")>-1)?Math.floor(g/2):0)):null,i=false,Z=false,c,X,h=I.windowDim(),f=I.getHorizontalScroll()+h.w,Q=I.getVerticalScroll()+h.h,d=this.arrowNode,k=null;if(S!==null){c=Math.min(Math.max(S,0),f-g);l.left=c+"px";i=S!==c;}if(a!==null){X=Math.min(Math.max(a,0),Q-Y);l.top=X+"px";Z=a!==X;}if(i||Z){if((this.keepArrowXPos&&i)||(this.keepArrowYPos&&Z)){k=M.getComputedStyle(d);}if(this.keepArrowXPos&&i){d.style.left=(parseInt(k.left,10)+S-c)+"px";}if(this.keepArrowYPos&&Z){d.style.top=(parseInt(k.top,10)+a-X)+"px";}}M.toggleClass(this.domNode,"offset",i||Z);},_on_tooltip_change:function(Q){B(this,Q&&Q.src);},_set_opener:function(T,S){var R=this.opener,Q=S!==R;if(Q){if(S){C(S,this);}if(R){C(S,this,true);}if(R&&R.detachEventListener){R.detachEventListener(this._richSubs);R.detachEventListener(this._ttpSubs);}if(S&&S.attachEventListener){this._richSubs=S.attachEventListener("richTooltipChange",this.id,"_on_tooltip_change");this._ttpSubs=S.attachEventListener("tooltipChange",this.id,"_on_tooltip_change");}this.opener=S;}return Q;},updatePopupConfig:function(Q,R){B(this,R,Q&&Q.e,Q&&Q.win);},onscroll:function K(){if(this.visible&&this.nudge){this.nudge();}this._super();},onmouseover:mstrmojo.emptyFn,onmouseout:mstrmojo.emptyFn});var J=null;mstrmojo.tooltip={POS_TOPLEFT:"TL",POS_BOTTOMLEFT:"BL",POS_TOPRIGHT:"TR",POS_BOTTOMRIGHT:"BR",POS_BOTTOMCENTER:"BC",POS_TOPCENTER:"TC",open:function F(R,T,S,Q){if(!J||!mstrmojo.all[J.id]){J=new mstrmojo.Tooltip();}Q=Q||{};Q.e=T;Q.win=S;J.open(R,Q);R.tooltip=J;},close:function P(){if(J){if(J.opener){J.opener.tooltip=null;}J.close();}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Container");var A=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:A.visibleMarkupMethod,onheightChange:A.heightMarkupMethod,onwidthChange:A.widthMarkupMethod}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K.slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");mstrmojo.VBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VBox",markupString:'<table id="{@id}" class="mstrmojo-VBox {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.HTMLButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.HTMLButton",markupString:'<input id="{@id}" type="button" class="mstrmojo-text mstrmojo-HTMLButton mstrButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){mstrmojo.css[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.inputNode.value=this.text!=null?this.text:"";},oniconClassChange:function(){this.domNode.className="mstrmojo-text mstrmojo-HTMLButton mstrButton "+this.cssClass+" "+this.iconClass+(this.enabled?"":" disabled");}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");mstrmojo.ListMapperTable=mstrmojo.provide("mstrmojo.ListMapperTable",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table">',markupSuffix:"</table>",itemWrapperPrefix:function(E){return'<tbody class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"<tr><td>&nbsp;</td></tr>",itemWrapperSuffix:"</tbody>",wrapperNodes:function D(E){return this.wrapperParentNode(E).tBodies;},wrapperParentNode:function C(E){return E.getElementsByTagName("table")[0];},createWrapperNode:function B(E){var F=E.ownerDocument,G=F.createElement("tbody");return G;},findIndex:function A(G,J,I){if(J&&I){var F=G.domNode,E=this.wrapperParentNode(J),H=I.parentNode;while(H){if(H===E){return mstrmojo.array.findBin(this.wrapperNodes(J),I,"offsetTop",G.items&&G.items.length);}else{if(H===F){break;}}I=H;H=I.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.requiresCls("mstrmojo.WidgetListMapper");mstrmojo.WidgetListMapperTable=mstrmojo.provide("mstrmojo.WidgetListMapperTable",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperTable)));})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var D=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" style="z-index: 1100;" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},editorNode:null,btnHbox:null,markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(L){if(L){return ;}var J=this.visible,K=J?"block":"none";this.editorNode.style.display=K;if(this.modal){this.curtainNode.style.display=K;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function F(){var J;var K=this.buttons;if(K&&!this.btnHbox){for(J in K){K[J].cssClass=(K[J].cssClass||"")+(this.noButtonCls?"":" mstrmojo-Editor-button");}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:K},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function B(){var J=this.placeholder;if(this._super()){if(!this.parent&&!J){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function E(){var J=this.id;return function(){var K=mstrmojo.all[J];K.resizeDialog();K.positionDialog();};},postBuildRendering:function A(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var K=this._resizeHandler=this.getResizeHandler();D.attachEvent(window,"resize",K);}this.resizeDialog();this.positionDialog();try{this.domNode.focus();}catch(J){}return true;},resizeDialog:function G(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function C(){var K=this,O=K.curtainNode,J=document.body,M=document.documentElement,N=O.style,L=K.curtainPosition;N.width=Math.max(J.clientWidth,M.scrollWidth)+"px";if(L&&L.h){N.height=L.h+"px";}else{N.height=Math.max(J.clientHeight,M.scrollHeight)+"px";}if(L&&L.y){N.top=L.y+"px";}K.raiseEvent({name:"resizeCurtain"});},positionDialog:function H(){var K=this.editorNode,M=this.left,L=this.top;if(!M||!L){D.center(K);var J=K.style;if(this.alignment==="top"){J.top="10px";}if(M){J.left=M;}if(L){J.top=L;}}},destroy:function(K){var J=this._resizeHandler;if(J){D.detachEvent(window,"resize",J);}this._super(K);}});mstrmojo.toast=function I(O,M,Q,J){var P="mojoToast9",N,L=M||3000;if(J&&J.id){P=J.id+"-"+P;}try{mstrmojo.all[P].destroy();}catch(K){}mstrmojo.insert({id:P,scriptClass:"mstrmojo.Label",cssClass:(J&&J.cssClass)?J.cssClass:"toastCss",text:O}).render();N=mstrmojo.all[P].domNode;if(J&&J.dom){J.dom.appendChild(N);}else{document.body.appendChild(N);D.bottomCenter(N);}window.setTimeout(function(){if(Q){Q();}try{mstrmojo.all[P].destroy();}catch(R){}},L);};mstrmojo.mask={show:function(){var J=mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});J.render();document.body.appendChild(J.domNode);},hide:function(){mstrmojo.mask.win.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(V,T){if(!V){return ;}var S=T&&T.length||0,U;for(U=S;U>0;U--){V=V.replace(new Array(U+2).join("#"),T[U-1]);}return V;},L=function L(T){if(!T){return ;}var Z=this,V=J.position(T.refNode||Z.refNode),Y=J.position(Z.domNode),X=T.position||R.RIGHT,U=0,a=0,S=9+(T.margin!==undefined?T.margin:0),W=" ";switch(X){case R.TOP:a=-Y.h-S;W+="t";break;case R.BOTTOM:a=V.h+S;W+="b";break;case R.LEFT:U=-Y.w-S;W+="l";break;case R.RIGHT:U=V.w+S;W+="r";break;}mstrmojo.hash.forEach(C(T,{left:U,top:a,contentNodeCssClass:W,visible:false}),function(b,c){this[c]=b;},this);this.set("visible",T.invalid);},A=function A(S){var W=this,U,V=S.errorCode,X=S.errorMsg,T=S.args,Y=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){U={content:V!==null?(W.generateContentHTML(Q(Y[V],T))||Y["*"]):X};}return U;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(U){var Y=this,a=Y.warningSlotName,c=Y[a],S=U&&U.lasting||6000,X=U.refNode||this.domNode,T=U.highlight!==false,b=U.closeOnClick===false?false:true,Z;if(!c){c=new mstrmojo.Tooltip({refNode:X,highlight:T,closeOnClick:b,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Y.addDisposable(c);Y[a]=c;Z=Y.closeOnClick=Y.getCloseOnClickListener();J.attachEvent(document.body,"click",Z);}var W=U.position||R.TOP,V="vi-warning vi-tooltip-";switch(W){case R.TOP:c.cssClass=V+"V";break;case R.BOTTOM:c.cssClass=V+"A";break;case R.LEFT:c.cssClass=V+"D";break;case R.RIGHT:c.cssClass=V+"C";break;}c.open(Y,A.call(Y,U));this.adjustPosition(U);if(T){P.toggleClass(c.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Y._warningTimeOut);Y._warningTimeOut=window.setTimeout(function(){Y.hideWarning();},S);},hideWarning:function H(){var T=this,S=T[T.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(T._warningTimeOut);delete T._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var T=S[S.warningSlotName];if(T.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var T=this;L.call(T[T.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(U){if(!U||!U.attachEventListener){return ;}var V=U._validationEventListener,T;if(V){U.detachEventListener(V);delete U._validationEventListener;}T=this.getValidationEvtListener();if(T){U._validationEventListener=U.attachEventListener("validationChange",this.id,T);}},this);},getValidationEvtListener:function B(){var T=this;return function S(U){var V=U.value;T[(V&&V.invalid?"show":"hide")+"Warning"](V);};},unrender:function K(S){var T=this[this.warningSlotName];if(T){T.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var h=mstrmojo.func.composite,M=mstrmojo.dom,Z=mstrmojo.Button.newWebButton,C=mstrmojo.css,Y=mstrmojo.all,N=mstrmojo.hash,W=mstrmojo.array;function V(o){if(!this.modal){return ;}var p=window.mstrApp;if(p&&p.modalEditorChange){p.modalEditorChange(this.id,o);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function X(){return this.domNode.firstChild;},titlebarNode:function k(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function l(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function m(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.title;}},onzIndexChange:function(){var o=this.zIndex;this.editorNode.style.zIndex=o;this.curtainNode.style.zIndex=o-1;},onvisibleChange:function(r){if(r){return ;}var q=this.visible,p="closeEffect",o="none";if(q){p="openEffect";o="block";}if(this[p]){this.playEffect(p);}else{this.editorNode.style.display=o;if(this.modal){this.curtainNode.style.display=o;}}},onhelpChange:function d(){if(this.showTitle){var p=this.help,o=this.helpNode;if(!p){o.style.display="none";}else{o.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(p,o){this._super(p,o);V.call(this,true);},close:function f(o){this._super(o);V.call(this,false);},unrender:function B(o){this._super(o);V.call(this,false);},destroy:function g(o){this._super(o);V.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;V.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function i(){return this.titlebarNode;},getMovingTarget:function U(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(o){var p=o.getTarget();if(p===this.closeNode||p===this.helpNode){C.toggleClass(p,"active",true);}},premouseup:function O(o){var p=o.getTarget();if(p===this.closeNode||p===this.helpNode){C.toggleClass(p,"active",false);}if(o.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function c(p){if(p.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{var o=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId||mstrApp.localeId)+"/"+(mstrApp.userHelpPage||"MicroStrategy_Web_Help.htm#");window.open(o+(this.help||""),"_blank");return false;}}},_set_visible:function b(u,q){var p=(this[u]!==q);if(p){this[u]=q;var s=this._close_handler;if(q){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var r=this;s=this._close_handler=s||function(v){var x=M.eventTarget(self,v);if(x&&x.parentNode&&!M.contains(r.editorNode,x,true,document.body)){r.close();}};M.attachEvent(document.body,"mousedown",s);}}else{var o=this._curtain_handler;if(o){M.detachEvent(window,"resize",o);}if(s){M.detachEvent(document.body,"mousedown",s);}}}return p;},showTooltip:function n(u,s){var r=this,p=M.findAncestorByAttr(M.eventTarget(s,u),"tooltip",true,this.domNode),q=p&&p.value;if(!r.hasOpenTooltip&&q){var o=M.position(p.node);r.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:q,top:Math.max(o.y+40,0),left:Math.max(o.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(u,s);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(o){o=Math.round(o);return["rgb(",o,",",o,",",o,")"].join("");}}},preStart:function(){var p=this.target,o=this.widget;o.editorNode.style.display="block";if(!o.modal){return false;}p.style.display="block";C.setOpacity(p,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var o=this.widget;o.editorNode.style.display="none";return !!o.modal;}};function D(o){return function(){Y[o].destroy();};}function J(p,y,z,AA){var o=y.id||"mojoAlertx9",u,x=y.buttons;W.forEach(x,function(AC){var AB=AC.onclick;AC.onclick=function(AD){var AE=Y[o];if(AB&&AB.call(AC,AD)===false){return ;}AE.destroy();AE=null;};});try{Y[o].destroy();}catch(v){}var q=y.cssClass,r=[];if(q){r.push(q);delete y.cssClass;}if(AA){r.push(AA);}r.push("mstrmojo-alert");u={scriptClass:"mstrmojo.Editor",id:o,width:"475px",zIndex:1000,title:z||mstrmojo.desc(11812,"Notification"),cssClass:r.join(" "),children:[{scriptClass:"mstrmojo.Label",cssClass:"alert-content",text:p,allowHTML:y.allowHTML}],visible:true};var s=new mstrmojo.Editor(N.copy(y,u));s.render();return s;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(p,x,q){q=q||{};var y=q.forceClose,v=q.callback||mstrmojo.emptyFn,u=N.copy(x||{},{buttons:y?[mstrmojo.Button.newActionButton((q.buttonText||mstrmojo.desc(8607,"Dismiss")),v)]:null,showTitle:false,modal:false,top:"42px"}),r=q.duration||6000;var s=J(p,u,"",y?"ed-notify":"ed-toast"),o=s.id;if(!y){window.setTimeout(h([v,D(o)]),r);}else{window.setTimeout(function(){if(Y[o]){Y[o].editorNode.style.opacity=0.75;}},6000);}return s;};mstrmojo.confirm=function e(u,p,s){p=p||{};var o=p.confirmBtn||{},r=p.cancelBtn||{},q=[Z(o.t||mstrmojo.desc(219,"Yes"),o.fn,true),Z(r.t||mstrmojo.desc(218,"No"),r.fn)];return J(u,N.copy(s||{},{buttons:q,onPreClose:function(){if(r&&r.fn){r.fn();}return true;}}));};mstrmojo.warn=function K(q,o,p){p=p||{};p.cssClass=(p.cssClass||"")+" mstrmojo-warning";mstrmojo.confirm(q,o,p);};mstrmojo.alert=function a(u,q,s,v,o,r){var p={title:s,zIndex:v,cssClass:o,buttons:[Z(mstrmojo.desc(1442,"OK"),q,true)],onPreClose:function(){if(q){q();}return true;}};N.forEach(p,function(y,x){if(!y){delete p[x];}});return J(u,N.copy(r,p));};mstrmojo.error=function T(s,o,r){var p=s||{};var q=mstrmojo.desc(96,"Error");if(r){q=(r.title)?r.title:mstrmojo.desc(96,"Error");}J("",N.copy(r||{},{buttons:[Z(mstrmojo.desc(1442,"OK"),o,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:p.shortDesc,longDesc:p.longDesc}]}),q);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.ContextMenuItem","mstrmojo.WidgetList","mstrmojo.ListMapperTable");var H=false,B=20;function G(J,K){var L=J.itemsContainerNode;L.scrollTop=Math.min(Math.max(L.scrollTop+K,0),L.scrollHeight-L.offsetHeight);}function I(K,J){if(!K._scrollInter){var L=B*(J?-1:1);K._scrollInter=window.setInterval(function(){G(K,L);},50);}}function E(J){if(J._scrollInter){window.clearInterval(J._scrollInter);J._scrollInter=null;}}mstrmojo.ContextMenu=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.ContextMenu",zIndex:100,visible:true,makeObservable:true,markupString:'<div id={@id} class="mstrmojo-ContextMenu {@cssClass}" style="z-index: {@zIndex};{@cssText}"><div class="mstrmojo-CM-scrollup" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" ></div><div class="mstrmojo-CM-itemsContainer">{@itemsHtml}</div><div class="mstrmojo-CM-scrolldown" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" ></div></div>',markupSlots:{scrollupNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1];},scrolldownNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){var K=this.domNode,P=this.itemsContainerNode,N=this.scrollupNode,M=this.scrolldownNode;K.style.display=this.visible?"block":"none";if(this.visible){N.style.display="none";M.style.display="none";P.style.overflow="auto";P.style.height="auto";var J=mstrmojo.dom.windowDim().h,O=K.offsetHeight,L=K.offsetWidth;if(J<O){N.style.display="block";N.style.minWidth=L+"px";M.style.display="block";M.style.minWidth=L+"px";P.style.overflow="hidden";P.style.height=(J-42)+"px";}}},onleftChange:function(){this.domNode.style.left=(this.left!=null)?this.left:"";},ontopChange:function(){this.domNode.style.top=(this.top!=null)?this.top:"";}},listMapper:mstrmojo.WidgetListMapperTable,itemFunction:function C(N,J,L){if(!H){mstrmojo.requiresCls("mstrmojo.ContextMenuItem");H=true;}var K={data:N,parent:L,hasSubmenu:L._cmSource.hasSubmenu(N),dynamicUpdate:L.dynamicUpdate,_cmSource:L._cmSource,zIndex:L.zIndex,itemIdField:L.itemIdField,itemField:L.itemField,itemChildrenField:L.itemChildrenField,itemFunction:L.itemFunction},M=new mstrmojo.ContextMenuItem(K);return M;},onmousedownarrow:function A(L,K,J){I(this,J);},onclickarrow:function F(L,K,J){G(this,B*(J?-1:1));},onmouseuparrow:function D(L,K,J){E(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.HTMLButton","mstrmojo._HasContextMenu","mstrmojo.ContextMenu");mstrmojo.MenuButton=mstrmojo.declare(mstrmojo.Button,[mstrmojo._HasContextMenu],{preclick:function A(B){this.showContextMenu();},openPopupMenu:function(){this.showContextMenu();}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Model","mstrmojo.Container","mstrmojo.List","mstrmojo.WidgetList","mstrmojo.HTMLButton","mstrmojo.Arr","mstrmojo.Label","mstrmojo.Box","mstrmojo.VBox","mstrmojo.HBox","mstrmojo.MenuButton","mstrmojo.ValidationTextBox","mstrmojo.InlineEditBox","mstrmojo.Editor","mstrmojo.Image","mstrmojo.dnd");var e=mstrmojo.dom,S=mstrmojo.string,a=mstrmojo.hash,h=mstrmojo.array,O="attachEventListener",AI="detachEventListener",A=["bc","bs","bw"],R=["bgc"].concat(A),v=["ff","fs","fc","fb","fi","fso","ful"],y="../style/mstr/images/table_icon.png",AN=30,AD=36,U=10,AO=1,c=2,d=3,l=4,L=5,u=6,AP=7,i=8,Z=9,K=10,p=11,E=12,AM=13,Y=14,f=1,x=2,V=-1,m=1,M=11,H=2,AB=21,b=22,AK=3,C=4,s=5,G=6,AJ=7,X=8,AF=81,T=82,AA=83,W=84,AH=85,AC=9,N={txt:1,trx:2,nav_t:3,nav_st:4,sel:5};function g(AQ,AR){return AQ.bone.exec(AR);}function I(AQ){if(AQ.def&&AQ.fmt){g(AQ,{id:"setTableDef",v:{def:AQ.persist()},umNow:true});}}function AL(AR,AS,AQ){return AR.bone.queryState(AS,AQ);}function Q(AQ,AR){while(AQ){if(AQ[AR]){return AQ;}AQ=e.findWidget(AQ.domNode.parentNode);}return null;}function r(AR,AQ){var AS=AR[AQ-1],AU=AR[AQ],AT="next";if(AS){AS.set(AT,AU[AT]);}AU.removeObj();AR.remove(AQ);}function z(AQ){var AS="mstrTCIcon",AR=mstrmojo.all[AS];if(!AR){AR=new mstrmojo.Editor({id:AS,title:"Configure cell icon",children:[{scriptClass:"mstrmojo.Label",cssDisplay:"inline",text:"Source:"},{scriptClass:"mstrmojo.ValidationTextBox",alias:"urlInput",cssText:"width:200px;",constraints:{},required:true,dtp:mstrmojo.expr.DTP.CHAR,bindings:{value:"this.parent.url"},onvalueChange:function(){this.parent.set("url",this.value);}},{scriptClass:"mstrmojo.Label",cssText:"background-color:grey;",bindings:{src:"this.parent.url"},onsrcChange:function(){var AT=this.preViewNode;if(AT){AT.src=this.src;}},onRender:function(){var AT=document.createElement("img");AT.src=this.parent.url||"";AT.style.margin="auto";AT.style.display="block";this.preViewNode=AT;this.domNode.appendChild(AT);}},{scriptClass:"mstrmojo.HTMLButton",text:"OK",slot:"buttonNode",cssClass:"mstrmojo-Editor-button",cssText:"float:right;",onclick:function(){var AT=this.parent;AT.opener.set("iconUrl",this.parent.url);AT.close();}},{scriptClass:"mstrmojo.HTMLButton",text:"Cancel",slot:"buttonNode",cssClass:"mstrmojo-Editor-button",cssText:"float:right;",onclick:function(){this.parent.close();}}]});}AR.open(AQ,{url:AQ.iconUrl});}function k(AT,AS){var AR=[{n:mstrmojo.desc(11181),did:M},{n:mstrmojo.desc(11183),did:m},{n:"-",did:V},{n:mstrmojo.desc(11182),did:AB},{n:mstrmojo.desc(11184),did:H},{n:"-",did:V},{n:"Configure icon...",did:AC},{n:"Change Cell Style",cmCssClass:"mstrmojo-TC-CXM",did:X,items:[{n:"Plain Text",did:AF,sty:N.txt},{n:"Navigation with Title only",did:AA,sty:N.nav_t},{n:"Navigation with Subtitle",did:W,sty:N.nav_st},{n:"Selector",did:AH,sty:N.sel}]},{n:"Change Input Style",did:AK},{n:"Configure navigation...",did:AJ},{n:"Configure selector...",did:G},{n:mstrmojo.desc(5356),did:C},{n:mstrmojo.desc(8240),did:s}],AV=AT.e,AU=AT.hWin,AW=e.getMousePosition(AV,AU),AX="mstrTC-CXM",AQ=mstrmojo.all[AX];if(!AQ){AQ=new mstrmojo.MenuButton({cmCssClass:"mstrmojo-TC-CXM",zIndex:1000,id:AX,cm:AR,dynamicUpdate:true,queryVisible:function(AZ){var Ab=this.tgt,AY;switch(AZ.did){case V:return true;case M:return !!Q(Ab,"isGroup");case AJ:var Aa=Q(Ab,"isCell");sty=Aa&&Aa.model.sty;return sty==N.nav_t||sty==N.nav_st;case m:AY=Q(Ab,"isGroup");Aa=Q(Ab,"isCell");return Aa&&AY&&AY.model&&AY.model.cells.length>1;case H:AY=Q(Ab,"isGroup");return AY&&this.view.model.groups.length>1;case b:AY=Q(Ab,"isGroup");return AY;case AC:case X:return false;case s:case AB:case C:case AF:case T:case AA:case W:return true;}return false;},queryChecked:function(AY){switch(AY.did){case AF:case T:case AA:case W:case AH:var AZ=Q(this.tgt,"isCell");sty=AZ&&AZ.model.sty;return sty==AY.sty;}return false;},executeCommand:function(Ab){var AY=this.view.model,Af=this.tgt,Ae=Q(Af,"isCell"),Aa=Q(Af,"isGroup"),Ad=Aa&&Aa.model,Ac=function(Ag){Ae.model.set("is",Ag);};switch(Ab.did){case M:if(Aa&&Ad){Ad.addCell(Aa.getBottom());}break;case m:if(Ad&&Ae){Ad.removeCell(h.indexOf(Ad.cells,Ae.model));}break;case AB:if(AY){AY.addGroup(this.view.getBottom());}break;case H:if(Aa){AY.removeGroup(h.indexOf(AY.groups,Aa.model));}break;case b:if(Ad){Ad.removeTitle();}break;case AJ:var AZ=Q(Af,"isCell");if(AZ){g(AY,{id:"edtLinks",v:{key:AZ.model.indn.key}});}break;case AC:z(Ae.model);break;case s:g(AY,{id:"transactionEdit"});break;case G:var AZ=Q(Af,"isCell");if(AZ){g(AY,{id:"selectorEdit",v:{key:AZ.model.seln.key}});}case C:g(AY,{id:"edtProps"});break;case AF:case T:case AA:case W:case AH:Ae.model.set("sty",Ab.sty);break;}}});}AQ.set("cmPos",AW);AQ.set("view",AS);AQ.set("tgt",e.findWidget(e.eventTarget(AU,AV)));AQ.render();AQ.showContextMenu();AS.contextMenu=AQ;e.stopPropogation(AU,AV);e.preventDefault(AU,AV);}mstrmojo.platform.FormatUnit=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo.platform.FormatUnit",tableFormat:null,formatFont:true,formatShape:false,init:function(AR){if(this._super){this._super(AR);}var AT=v,AQ=R,AS=this,AU=[];if(this.formatFont){AU=AU.concat(AT);}if(this.formatShape){AU=AU.concat(AQ);}h.forEach(AU,function(AV){AS[O](AV+"Change",AS.id,"persist");});},persist:function(){I(this.tableFormat.parent);}});mstrmojo.platform.TableFormat=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo.platform.TableFormat",init:function(AQ){if(this._super){this._super(AQ);}var AQ={tableFormat:this},AS=mstrmojo.platform.FormatUnit,AR=this.g,AT=this.c;if(AR){a.make(AR,mstrmojo.Model);a.make(AR.t,AS,AQ);a.make(AR.r,AS,{tableFormat:this,formatShape:true,formatFont:false});}if(AT){a.make(AT,mstrmojo.Model);a.make(AT.t,AS,AQ);if(AT.st){a.make(AT.st,AS,AQ);}if(this.c.v){a.make(AT.v,AS,AQ);}}},persist:function(){var AR=this,AQ={isSerializable:function(AU,AT,AS){switch(AU){case"h":case"ff":case"fs":case"fc":case"fb":case"fi":case"fso":case"ful":case"bgc":case"bc":case"bs":case"bw":case"r":case"t":case"st":case"v":case"c":case"g":return true;}return false;},convertBoolean:true};return S.json2xml("fmt",this,AQ);}});mstrmojo.platform.TableModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.platform.TableModel",fmt:null,smk:"",dck:"",init:function(AQ){this._super(AQ);this.groups=[];a.make(this.groups,mstrmojo.Arr);if(this.fmt){this.fmt.parent=this;this.fmt=new mstrmojo.platform.TableFormat(this.fmt);}this._setDef(false);},ondefChange:function(AQ){this._setDef(true);},_setDef:function(AQ){var AS=0,AV=this.def,AT=this.sg,AR=AV&&AV.gs,AX=AR&&AR.length;this.smk=AV&&AV.smk;this.dck=AV&&AV.dck;if(AQ){this.groups.splice(0,this.groups.length);}var AW=null,AU;for(;AS<AX;AS++){AR[AS].parent=this;AR[AS].tableModel=this;AU=new mstrmojo.platform.GroupModel(AR[AS]);this.groups.add([AU]);if(AW){AW.set("next",AU);}AW=AU;}if(AT){AT.tableModel=this;this.set("selGroupModel",new mstrmojo.platform.TableSelectorGroupModel(AT));this.groups[O]("add",this.selGroupModel.id,"ontgsChange");this.groups[O]("remove",this.selGroupModel.id,"ontgsChange");this.selGroupModel.ontgsChange=function(){var AY=this.tableModel.groups.length-1,AZ=this.tableModel.groups[AY];AZ&&this.set("top",parseFloat(AZ.t)+parseFloat(AZ.h)+5+"px");};}I(this);},onfmtChange:function(AQ){this._setFmt(true);},_setFmt:function(AQ){var AS=0,AR=this.fmt||{};AR.parent=this;this.fmt=new mstrmojo.platform.TableFormat(AR);},addGroup:function(AU){var AT=g(this,{id:"newGroup",v:{top:AU,th:parseInt(this.fmt.g.h),ch:parseInt(this.fmt.c.h),fmt:this.fmt}})||{},AR=this.groups,AQ=AR.length-1,AS;AT.parent=this;AT.tableModel=this;AS=new mstrmojo.platform.GroupModel(AT);AR[AQ].set("next",AS);AR.add([AS]);},removeGroup:function(AQ){r(this.groups,AQ);},getTRXObjs:function(){var AQ={};h.forEach(this.groups,function(AR){h.forEach(AR.cells,function(AS){if(AS.vn.key){AQ[AS.vn.key]=AS.tn.text;}});});return AQ;},setTRXObjs:function(){},persist:function(){var AR=this,AQ={isSerializable:function(AY,AV,AS){switch(AY){case"tp":return true;case"fmt":return{child:(AR.fmt&&AR.fmt.persist())||null};case"groups":var AX='<def smk="'+AR.smk+'" dck="'+AR.dck+'"><gs>',AT=AR.groups,AW=AT.length,AU=0;for(;AU<AW;AU++){AX+=AT[AU].persist();}return{child:AX+"</gs></def>"};}return false;},convertBoolean:true};return S.json2xml("table",this,AQ);}});mstrmojo.platform._HasRWObj=mstrmojo.provide("mstrmojo.platform._HasRWObj",{removeObj:function(){var AT=this,AS=this.children,AQ=this.tableModel,AR=this.key;if(AQ&&AR){g(AQ,{id:"remove",v:{key:AR}});}this.set("key",null);if(AS){h.forEach(AS,function(AU){if(AU.removeObj){AU.removeObj();}});}}});mstrmojo.platform.TableFieldModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.platform._HasRWObj,mstrmojo._HasChidlren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.platform.TableFieldModel",requiredFields:["tableModel","fmtModel"],key:"",top:"",left:"",width:"",height:"",isLine:false,heightAsFont:true,formats:["R","F","P","S"],onFormatChange:function(AS){var AT=AS.prop,AU="set"+AT,AQ=this.tableModel,AR=this.key;if(AQ&&AR){g(AQ,{id:AU,v:{key:AR,prop:AT,value:this[AT]}});}},onPropChange:function(AQ){if(this.tableModel&&this.key){g(this.tableModel,{id:"setProp",v:{key:this.key,prop:AQ,value:this[AQ]}});}},_onPropChange:function(AR,AQ){if(this.tableModel&&this.key){g(this.tableModel,{id:AR,v:{key:this.key,prop:AQ,value:this[AQ]}});}},onfsChange:function(){if(h.indexOf(this.formats,"F")>-1&&this.tableModel&&this.heightAsFont){this.set("height",AL(this.tableModel,"pxFromPt",this.fs));}},ontopChange:function(){this.onPropChange("top");},onleftChange:function(){this.onPropChange("left");},onwidthChange:function(){if(h.indexOf(this.formats,"S")>-1||h.indexOf(this.formats,"W")>-1){this.onPropChange("width");}},onheightChange:function(){if((h.indexOf(this.formats,"S")>-1||h.indexOf(this.formats,"H")>-1)&&!this.isLine){this.onPropChange("height");}},init:function(AT){if(this._super){this._super(AT);}var AR=this.fmtModel,AV=[];if(h.indexOf(this.formats,"R")>-1){AV=AV.concat(R);}if(h.indexOf(this.formats,"F")>-1){AV=AV.concat(v);}a.copyProps(AV,AR,this);this.initPos();this.bindings=this.bindings?this.bindings:{};var AS=this.bindings;h.forEach(AV,function(AW){AS[AW]="this.fmtModel."+AW;});AV=R.concat(v);var AQ=this.isLine,AU=this;h.forEach(AV,function(AW){if(AQ&&AW=="bgc"){return ;}AU[O](AW+"Change",AU.id,"onFormatChange");});if(!this.parent){this.initBindings();}},initPos:function(){var AR=this,AQ=function(AS){if(AR.key&&AR.tableModel){AR[AS]=AL(AR.tableModel,AS,AR.key);}};if(h.indexOf(this.formats,"P")>-1){AQ("top");AQ("left");}if(h.indexOf(this.formats,"S")>-1){AQ("width");AQ("height");}if(h.indexOf(this.formats,"W")>-1){AQ("width");}if(h.indexOf(this.formats,"H")>-1){AQ("height");}AQ("text");},ontextChange:function(){if(this.key&&this.tableModel){g(this.tableModel,{id:"setText",v:{key:this.key,fmla:this.text}});}},prekeyChange:function(){var AR=this,AQ=function(AS){if(AR.key&&AR.tableModel){AR.set(AS,AL(AR.tableModel,AS,AR.key));}};AQ("top");AQ("left");AQ("width");AQ("height");if(this.key&&this.tableModel){this.set("text",AL(this.tableModel,"text",this.key));}}});mstrmojo.platform.GroupModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.platform._HasRWObj,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.platform.GroupModel",cells:[],requiredFields:["tableModel"],children:[{alias:"title",scriptClass:"mstrmojo.platform.TableFieldModel",heightAsFont:true,formats:["P","S","F"],bindings:{key:"this.parent.tk"},postApplyProperties:function(){var AQ=this.parent.parent;this.tableModel=AQ;this.fmtModel=AQ.fmt.g.t;this.key=this.parent.tk;}},{alias:"rn",scriptClass:"mstrmojo.platform.TableFieldModel",formats:["P","S","R"],bindings:{gm:"this.parent"},postApplyProperties:function(){var AQ=this.parent.parent;this.tableModel=AQ;this.fmtModel=AQ.fmt.g.r;this.key=this.parent.rk;},updateHeight:function(){var AS=this.gm,AY=AS.cells,AX=AY&&AY.length,AT=0,AU=0,AR=this.fmtModel,AV=0;if(AR.bs!=="none"){AV=AL(this.tableModel,"pxFromPt",AR.bw);}AU=AV;for(;AT<AX;AT++){var AW=AY[AT];AU+=parseFloat(AW.h)+AV;}this.set("height",AU+"px");var AQ=AS.title;if(AQ.key){AU+=parseFloat(AD);}this.gm.set("h",AU+"px");}}],init:function(AY){if(this._super){this._super(AY);}if(this.children){this.initChildren();}var Aa=this.cells,AZ=this.parent;this.cells=[];a.make(this.cells,mstrmojo.Arr,{tableModel:AZ,removeObj:function(){h.forEach(this,function(Ab){Ab.removeObj();});}});for(var AT=0;AT<Aa.length;AT++){var AX=Aa[AT];AX.parent=this;AX.tableModel=AZ;AX=new mstrmojo.platform.CellModel(AX);this.cells.add([AX]);}this.initBindings();var AR=AZ.fmt,AQ=this.id,AV=this.rn,AU=this.cells,AW=AU.length,AS=0;for(;AS<AW;AS++){AU[AS].initBindings();}this.registerListeners();AV[O]("removeCell",AQ,"onremoveCell");AV[O]("addCell",AQ,"onaddCell");AR.g.r[O]("bsChange",AQ,"_onborderChange");AR.g.r[O]("bwChange",AQ,"_onborderChange");AR.g.t[O]("fsChange",AQ,"adjustTitleTop");},_onborderChange:function(AR){var AQ=this.parent.fmt.g.r;bw=AQ.bw,bs=AQ.bs,w=(bs=="none")?0:AL(this.parent,"pxFromPt",bw);this.cells[0].set("t",parseFloat(this.t)+(this.title.key?parseFloat(AD):0)+w+"px");},adjustTitleTop:function(){var AS=this.parent.fmt.g.t,AQ=AS.fs,AU=parseFloat(AL(this.tableModel,"pxFromPt",AQ)),AR=this.title,AT=parseFloat(this.t);offset=(AD>AU)?(AD-AU)/2:0;if(AR&&AR.key){AR.set("top",(AT+offset)+"px");}},registerListeners:function(){var AQ=this.cells,AR=this.rn,AS=AQ.length;h.forEach(AQ,function(AV,AT){var AU=AQ[AT+1];AV.set("next",AU);if(!AU){AV.t_sub=AV[O]("tChange",AR.id,"updateHeight");AV.h_sub=AV[O]("hChange",AR.id,"updateHeight");}else{if(AV.t_sub&&AV.h_sub){AV[AI](AV.t_sub);AV[AI](AV.h_sub);}}});},onremoveCell:function(AR){this.registerListeners();var AQ=AR.index,AS=this.cells[AQ];if(!AQ&&AS){AS.ln.removeObj();}},onaddCell:function(AR){this.registerListeners();var AQ=AR.index,AT=this.cells[AQ];c1=this.cells[AQ+1];if(!AQ){AT.ln.removeObj();if(c1){var AS=g(this.parent,{id:"addLine",v:{top:c1.t,left:this.rn.left,fmt:this.parent.fmt}});c1.ln.set("key",AS.key);}}else{if(!AT.ln.key){var AS=g(this.parent,{id:"addLine",v:{top:AT.t,left:this.rn.left,fmt:this.parent.fmt}});AT.ln.set("key",AS.key);}}},ontChange:function(AR){var AS=this.t,AQ=this.title,AT=this.rn;if(AQ&&AT){if(AQ.key){this.adjustTitleTop();AT.set("top",parseFloat(AS)+parseFloat(AD)+"px");}else{AT.set("top",AS);}if(this.next){this.next.set("t",parseFloat(AS)+parseFloat(this.h)+"px");}else{var AU=this.tableModel&&this.tableModel.selGroupModel;AU&&AU.set("top",parseFloat(AS)+parseFloat(this.h)+5+"px");}}},onhChange:function(AQ){if(this.next){this.next.set("t",parseFloat(this.t)+parseFloat(this.h)+"px");}else{var AR=this.tableModel&&this.tableModel.selGroupModel;AR&&AR.set("top",parseFloat(this.t)+parseFloat(this.h)+5+"px");}},onwidthChange:function(AU){var AT=this.width,AS=this.parent,AR=AL(AS,"removeBorders",{v:AT,fmt:AS.fmt.g.r})+"px",AQ=this.title;if(AQ&&AQ.key){AQ.set("width",AT);}this.rn.set("width",AT);h.forEach(this.cells,function(AV){AV.set("width",AR);});},addCell:function(AT){var AR=g(this.parent,{id:"newCell",v:{top:AT,ch:this.parent.fmt.c.h,fmt:this.parent.fmt,line:true}})||{},AQ=this.cells,AS=AQ[AQ.length-1],AU;AR.parent=this;AR.tableModel=this.tableModel;AU=new mstrmojo.platform.CellModel(AR);AU.initBindings();AQ.add([AU]);},removeObj:function(){var AQ=this.cells;h.forEach(AQ,function(AS,AR){r(AQ,AR);});if(this._super){this._super();}if(this.next){this.next.set("t",this.t);}},removeCell:function(AQ){r(this.cells,AQ);},persist:function(){var AR=this,AQ={isSerializable:function(AY,AV,AS){switch(AY){case"rk":case"tk":case"t":case"h":return true;case"cells":var AX="",AU=AR.cells,AW=AU.length,AT=0;for(;AT<AW;AT++){AX+=AU[AT].persist();}return{child:AX};}return false;},convertBoolean:true};return S.json2xml("g",this,AQ);}});mstrmojo.platform.CellModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.platform._HasRWObj,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.platform.CellModel",requiredFields:["tableModel"],top:"",sty:N.txt,style:f,children:[{alias:"ln",scriptClass:"mstrmojo.platform.TableFieldModel",isLine:true,formats:["P","S","R"],onkeyChange:function(){this.parent.lk=this.key;},postApplyProperties:function(){this.fmtModel=this.tableModel.fmt.g.r;this.key=this.parent.lk;}},{alias:"icn",scriptClass:"mstrmojo.platform.TableFieldModel",formats:["P","S"],requiredFields:["tableModel"],bindings:{url:function(){var AR=this.key,AQ=this.tableModel;return AL(AQ,"img",AR);}},postApplyProperties:function(){this.key=this.parent.ick;},onkeyChange:function(){this.parent.ick=this.key;}},{alias:"tn",scriptClass:"mstrmojo.platform.TableFieldModel",formats:["P","S","F"],bindings:{fmtModel:"this.tableModel.fmt.c.t"},onkeyChange:function(){this.parent.tk=this.key;},postApplyProperties:function(){this.fmtModel=this.tableModel.fmt.c.t;this.key=this.parent.tk;}},{alias:"stn",scriptClass:"mstrmojo.platform.TableFieldModel",formats:["P","S","F"],bindings:{key:"this.parent.stk",fmtModel:"this.tableModel.fmt.c.st"},onkeyChange:function(){this.parent.stk=this.key;},postApplyProperties:function(){this.fmtModel=this.tableModel.fmt.c.st;this.key=this.parent.stk;}},{alias:"vn",scriptClass:"mstrmojo.platform.TableFieldModel",formats:["P","W","F"],bindings:{fmtModel:"this.tableModel.fmt.c.v"},onkeyChange:function(){this.parent.vk=this.key;},postApplyProperties:function(){this.fmtModel=this.tableModel.fmt.c.v;this.key=this.parent.vk;}},{alias:"indn",scriptClass:"mstrmojo.platform.TableFieldModel",requiredFields:["tableModel"],formats:["P","S"],postApplyProperties:function(){this.key=this.parent.ink;},onkeyChange:function(){this.parent.ink=this.key;}}],init:function(AX){if(this._super){this._super(AX);}var AQ=this.children;if(AQ){for(var AT=0,AV=AQ.length;AT<AV;AT++){AQ[AT].tableModel=this.tableModel;}this.initChildren();}if(!this.parent){this.initBindings();}var AW=this.ln,Aa=this.tableModel,Ab=Aa.fmt,AR=Ab.c,AY=Ab.g,AZ=this.tn,AS=this.vn,AU=this.parent.rn;if(AU){AU[O]("widthChange",AW.id,function(){var Ac=AL(Aa,"removeBorders",{v:AU.width,fmt:AY.r});AW.set("width",Ac+"px");});this.width=AU.width;}AR.t[O]("fsChange",this.id,"_onposChange");AR.st[O]("fsChange",this.id,"_onposChange");AR.v[O]("fsChange",this.id,"_onposChange");AS[O]("textChange",this.id,function(){this.set("vph",AS.text);I(Aa);});this.tableModel[O]("trxInfoChange",this.id,"updateTix");this.updateTix();},updateTix:function(){var AQ=this.tableModel.trxInfo,AR=this.vk,AS=null;tixType=null;if(AQ&&AR){h.filter(AQ.tscObjs,function(AT){if(AR==AT.key&&AT.tix!=null){tixType=AT.ctl&&AT.ctl.pr&&AT.ctl.pr.t;AS=AT.tix;return true;}return false;},{max:1});}this.set("tix",AS);this.set("tixType",tixType);},ontixTypeChange:function(){var AQ=this.tixType&&(this.tixType+"");if(AQ==i){this.set("style",x);this.set("h","80px");}else{this.set("style",f);this.set("h","44px");}},onstyleChange:function(){this.onwidthChange();this._onposChange();},oniconUrlChange:function(){if(this.icn.key){this.icn.set("url",this.iconUrl);g(this.parent.parent,{id:"setImg",v:{key:this.icn.key,url:this.iconUrl}});}},ontChange:function(AQ){this._onposChange(AQ);},onhChange:function(AQ){this._onposChange(AQ);},onwidthChange:function(AR){var AU=parseFloat(this.icn.width||AL(this.tableModel,"defaultCellPadding")),AQ=(parseFloat(this.width)-parseFloat(AU)*2)/2,AV=this.vn,AT=this.indn,AS=this.sty;if(AS==N.txt||AS==N.trx){if(this.style==f){AV.set("left",AQ+parseFloat(this.tn.left)+"px");AV.set("width",AQ+"px");}else{AV.set("left",this.tn.left);AV.set("width",AQ*2+"px");}}else{if(AS==N.nav_t||AS==N.nav_st){AT.set("left",parseFloat(this.width)-parseFloat(AT.width)+"px");}}this.tn.set("width",AQ+"px");},_onposChange:function(Ab){var Ac=this.parent.parent,AR=Ac.fmt.c,AQ=this.h,AT=function(Ad){var Af=parseFloat(AL(Ac,"pxFromPt",Ad)),Ae=parseFloat(AQ);return(Ae>Af)?((Ae-Af)/2):0;},AU=function(Ah,Af){var Ae=parseFloat(AL(Ac,"pxFromPt",Ah)),Ad=parseFloat(AL(Ac,"pxFromPt",Af)),Ag=parseFloat(AQ),Ai=(Ag>Ae+Ad)?((Ag-Ae-Ad)/2):0;return{t1:Ai,t2:Ai+Ae};},AS=function(Ah,Af){var Ae=parseFloat(AL(Ac,"pxFromPt",Ah)),Ad=parseFloat(AL(Ac,"pxFromPt",Af)),Ag=parseFloat(AQ),Ai=Ag-Ae-Ad;if(Ai<10){t=(Ag-Ae-Ad)/2;}else{t=(Ag-Ae-Ad-10)/2;}return{t1:t,t2:t+Ae+10};},AY=function(Ae){var Af=parseFloat(Ae),Ad=parseFloat(AQ);return(Ad>Af)?((Ad-Af)/2):0;},Aa=parseFloat(this.t);if(this.ln.key){this.ln.set("top",this.t);}this.icn.set("top",Aa+AY(this.icn.height||0)+"px");switch(this.sty){case N.txt:case N.trx:if(this.style==f){this.vn.set("top",Aa+AT(this.vn.fs)+"px");this.tn.set("top",Aa+AT(this.tn.fs)+"px");}else{var AW=AS(this.tn.fs,this.vn.fs);this.tn.set("top",Aa+AW.t1+"px");this.vn.set("top",Aa+AW.t2+"px");}break;case N.nav_t:this.tn.set("top",Aa+AT(this.tn.fs)+"px");this.indn.set("top",Aa+AY(this.indn.height)+"px");break;case N.nav_st:var AW=AU(this.tn.fs,this.stn.fs);this.tn.set("top",Aa+AW.t1+"px");this.stn.set("top",Aa+AW.t2+"px");this.indn.set("top",Aa+AY(this.indn.height)+"px");break;case N.sel:break;}var AV=this.next;if(AV){var AX=this.parent.parent.fmt.g.r,AZ=(AX.bs=="none")?0:AL(this.parent.parent,"pxFromPt",AX.bw);AV.set("t",parseFloat(this.t)+parseFloat(this.h)+AZ+"px");}I(this.parent.parent);},onstyChange:function(Ab){var AT=Ab.valueWas,AX=this,AS=AX.parent.parent.fmt.c,Aa=false,AY=function(){var Ac=g(AX.parent.parent,{id:"addIndicator",v:{top:AX.t,cellHeight:AX.h}});AX.indn.set("key",Ac.key);AX.indn.set("url",Ac.url);},AV=function(){var Ad=parseFloat(AX.tn.left)+"px",Af=AX.tn.height,Ac=AX.tn.width,Ae=g(AX.parent.parent,{id:"addCellSubtitle",v:{cellHeight:AX.h,top:AX.t,left:Ad,height:Af,width:Ac,fmt:AS}});AX.stn.set("key",Ae.key);AX.tn.set("top",Ae.t);AX.tn.set("height",Ae.h);},AR=function(){var Ad=parseFloat(AX.tn.left)+parseFloat(AX.tn.width)+"px",Af=AX.h,Ac=AX.tn.width,Ae=g(AX.parent.parent,{id:"addSelector",v:{cellHeight:AX.h,top:AX.t,left:Ad,height:Af,width:Ac,fmt:AS}});AX.seln.set("key",Ae.key);},AQ=function(){var Ac=parseFloat(AX.t),Ae=parseFloat(AX.h),Ad=Ae-parseFloat(AX.tn.height);Ad=Ad?Ad:0;AX.tn.set("top",(Ad/2)+Ac+"px");};switch(this.sty){case N.txt:case N.trx:if(AT==N.nav_t||AT==N.nav_st){var AU=parseFloat(this.tn.left)+parseFloat(this.tn.width)+"px",AW=this.tn.height,AZ=this.tn.width;ret=g(this.parent.parent,{id:"addCellValue",v:{cellHeight:this.h,top:this.t,left:AU,height:AW,width:AZ,fmt:this.parent.parent.fmt.c.v}});this.vn.set("key",ret.key);AQ();this.indn.removeObj();}if(AT==N.nav_st){this.stn.removeObj();}break;case N.nav_t:if(AT==N.txt||AT==N.trx){AY();this.vn.removeObj();}else{if(AT==N.nav_st){this.stn.removeObj();AQ();}}break;case N.nav_st:if(AT==N.nav_t){AV();}else{if(AT==N.txt||AT==N.trx){AV();AY();this.vn.removeObj();}}break;case N.sel:if(this.stn.key){this.stn.removeObj();}if(this.indn.key){this.indn.removeObj();}if(this.vn.key){this.vn.removeObj();}AR();Aa=true;break;}I(this.parent.parent);if(Aa){g(this.parent.parent,{id:"postAddSelector"});}},persist:function(){var AQ={isSerializable:function(AT,AS,AR){switch(AT){case"sty":case"ick":case"tk":case"stk":case"vk":case"vph":case"lk":case"ink":case"selk":case"tp":case"t":case"h":case"trx":return true;}return false;},skipNull:true,convertBoolean:true};return S.json2xml("c",this,AQ);}});mstrmojo.platform._HasFormatsMarkup=mstrmojo.provide("mstrmojo.platform._HasFormatsMarkup",{visible:true,formats:["R","F","P","S","W"],methods:{R:{onbgcChange:function(){if(this.bgc){this.domNode.style.backgroundColor=this.bgc;}},onbsChange:function(){if(this.bs){this.domNode.style.borderStyle=this.bs;}},onbcChange:function(){if(this.bc){this.domNode.style.borderColor=this.bc;}},onbwChange:function(){if(this.bw){this.domNode.style.borderWidth=this.bw+"pt";}}},F:{onffChange:function(){if(this.ff){this.domNode.style.fontFamily=this.ff;this.inputNode.style.fontFamily=this.ff;}},onfsChange:function(){if(this.fs){this.domNode.style.fontSize=this.fs+"pt";this.inputNode.style.fontSize=this.fs+"pt";}},onfcChange:function(){if(this.fc){this.domNode.style.color=this.fc;}this.inputNode.style.color=this.fc;},onfbChange:function(){var AQ=this.fb?"bold":"normal";this.domNode.style.fontWeight=AQ;this.inputNode.style.fontWeight=AQ;},onfiChange:function(){var AQ=this.fi?"italic":"normal";this.domNode.style.fontStyle=AQ;this.inputNode.style.fontStyle=AQ;},onfsoChange:function(){this._applyFontDecorationChange();},onfulChange:function(){this._applyFontDecorationChange();}},P:{onleftChange:function(){if(this.left){this.domNode.style.left=this.left;}}},S:{onwidthChange:function(){if(this.width){this.domNode.style.width=this.width;}},onheightChange:function(){if(this.height){this.domNode.style.height=this.height;}}},W:{onwidthChange:function(){if(this.width){this.domNode.style.width=this.width;}}},H:{onheightChange:function(){if(this.height){this.domNode.style.height=this.height;}}}},_applyFontDecorationChange:function(){var AQ="";AQ+=this.fso?"line-through":"";AQ+=this.ful?" underline":"";if(AQ==""){AQ="none";}this.domNode.style.textDecoration=AQ;this.inputNode.style.textDecoration=AQ;},postCreate:function(){if(this._super){this._super();}var AQ=["formats","width","height","left"],AR={};AQ=AQ.concat(R);AQ=AQ.concat(v);h.forEach(AQ,function(AS){AR[AS]="this.model."+AS;});this.bindings=a.copy(AR,this.bindings);},preBuildRendering:function(){if(this._super){this._super();}var AS={onvisibleChange:function(){this.domNode.style.display=this.visible?"":"none";}},AR=this.formats;for(var AQ in AR){AS=a.copy(this.methods[AR[AQ]],AS);}this.markupMethods=a.copy(AS,a.copy(this.markupMethods));}});mstrmojo.platform.TableSelector=mstrmojo.declare(mstrmojo.Label,[mstrmojo.platform._HasFormatsMarkup],{scriptClass:"mstrmojo.platform.TableSelector",preBuildRendering:function(){if(this._super){this._super();}if(h.indexOf(this.formats,"P")>-1){this.markupMethods=a.copy({onrelativeTopChange:function(){if(this.relativeTop){this.domNode.style.top=this.relativeTop;}}},a.copy(this.markupMethods));}},postBuildRendering:function(){}});mstrmojo.platform.TableTextField=mstrmojo.declare(mstrmojo.InlineEditBox,[mstrmojo.platform._HasFormatsMarkup],{scriptClass:"mstrmojo.platform.TableTextField",type:0,model:null,emptyHint:"",postCreate:function(){this._super();this.bindings=a.copy({width:function(){var AQ=this.model.width,AR=this.model.tableModel.textPaddings.h;return(AQ?Math.max(parseFloat(AQ)-parseFloat(AR),0):0)+"px";},height:function(){var AQ=this.model.height,AR=this.model.tableModel.textPaddings.v;return(AQ?Math.max(parseFloat(AQ)-parseFloat(AR),0):0)+"px";}},this.bindings);},preBuildRendering:function(){this._super();if(h.indexOf(this.formats,"P")>-1){this.markupMethods=a.copy({onrelativeTopChange:function(){if(this.relativeTop){this.domNode.style.top=this.relativeTop;}}},a.copy(this.markupMethods));}this.markupMethods=a.copy({ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text||this.emptyHint||"");var AQ=!this.text;this.textNode.style.fontSize=AQ?"10pt":"";this.textNode.style.color=AQ?"#999999":"";}},a.copy(this.markupMethods));this.markupMethods.onheightChange=function(){};},onSave:function(){this.model.set("text",this.text);}});mstrmojo.platform.GroupTitleField=mstrmojo.declare(mstrmojo.platform.TableTextField,null,{scriptClass:"mstrmojo.platform.GroupTitleField",preBuildRendering:function(){this._super();this.markupMethods=a.copy({onheightChange:function(){var AR=AD+"px",AQ=this.domNode;if(AR&&AQ){AQ.style.height=AR;AQ.style.lineHeight=AR;}},onwidthChange:function(){var AR=this.width,AQ=this.domNode;if(AQ&&AR&&!/NaN/.test(AR)){AQ.style.width=parseInt(AR)/2+"px";}}},a.copy(this.markupMethods));}});mstrmojo.platform.CellIcon=mstrmojo.declare(mstrmojo.Image,[mstrmojo.platform._HasFormatsMarkup],{scriptClass:"mstrmojo.platform.CellIcon",preBuildRendering:function(){this.markupMethods=a.copy({onleftChange:function(){if(this.left){this.domNode.style.left=this.left;}},onwidthChange:function(){if(this.width){this.domNode.style.width=this.width;this.imgNode.style.width=this.width;}},onheightChange:function(){if(this.height){this.domNode.style.height=this.height;this.imgNode.style.height=this.height;}},onvisibleChange:function(){this.domNode.style.display=this.visible?"":"none";}},a.copy(this.markupMethods));if(h.indexOf(this.formats,"P")>-1){this.markupMethods=a.copy({onrelativeTopChange:function(){if(this.relativeTop){this.domNode.style.top=this.relativeTop;}}},a.copy(this.markupMethods));}}});mstrmojo.platform.TableCell=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.platform.TableCell",markupString:'<div id="{@id}" class="mi-tc-c {@cssClass}" style="{@cssText}" mstrAttach:contextmenu,dblclick><div class="mi-tc-c-icon"></div><div class="mi-tc-c-nm"></div><div class="mi-tc-c-ph"></div><div class="mi-tc-c-ind"></div><div class="mi-tc-c-sel"></div><div class="mi-tc-c-trxi"></div><div ch="1" class="mi-tc-c-handler"></div></div>',markupSlots:{iconNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.childNodes[1];},valueNode:function(){return this.domNode.childNodes[2];},indicatorNode:function(){return this.domNode.childNodes[3];},selectorNode:function(){return this.domNode.childNodes[4];},trxIndicatorNode:function(){return this.domNode.childNodes[5];},handlerNode:function(){return this.domNode.lastChild;}},markupMethods:{onbsChange:function(){if(this.bs){this.domNode.style.borderTopStyle=this.bs;}},onbcChange:function(){if(this.bc){this.domNode.style.borderTopColor=this.bc;}},onbwChange:function(){if(this.bw){this.domNode.style.borderTopWidth=this.bw+"pt";}},onheightChange:function(){var AQ=parseFloat(this.height);if(AQ){this.domNode.style.height=AQ+"px";this.handlerNode.style.top=(AQ-3)+"px";}},onresizableChange:function(){this.handlerNode.style.display=this.resizable?"block":"none";}},cssDisplay:"block",isCell:true,resizable:false,children:[{scriptClass:"mstrmojo.platform.CellIcon",alias:"ci",slot:"iconNode",bindings:{model:"this.parent.model.icn",visible:"this.model.key",src:function(){var AQ=this.model.url;return AQ||y;},relativeTop:function(){var AR=parseFloat(this.model.top),AS=parseFloat(this.parent.model.t),AQ=AR-AS;return(AQ?AQ:0)+"px";}}},{scriptClass:"mstrmojo.platform.TableTextField",alias:"ct",slot:"titleNode",bindings:{model:"this.parent.model.tn",text:"this.model.text",relativeTop:function(){var AR=parseFloat(this.model.top),AS=parseFloat(this.parent.model.t),AQ=AR-AS;return(AQ?AQ:0)+"px";}},ontextChange:function(){this.model.set("text",this.text);}},{scriptClass:"mstrmojo.platform.TableTextField",alias:"cst",slot:"titleNode",bindings:{model:"this.parent.model.stn",text:"this.model.text",relativeTop:function(){var AR=parseFloat(this.model.top),AS=parseFloat(this.parent.model.t),AQ=AR-AS;return(AQ?AQ:0)+"px";},visible:function(){var AR=this.parent.model.sty,AQ=this.model.key;return AR==N.nav_st&&AQ;}},ontextChange:function(){this.model.set("text",this.text);}},{scriptClass:"mstrmojo.platform.TableTextField",alias:"cv",slot:"valueNode",bindings:{model:"this.parent.model.vn",text:"this.model.text",visible:function(){var AR=this.parent.model.sty,AS=this.parent.model.tix,AQ=this.parent.model.tixType;return !AQ||(AQ==AO||AQ==i||AQ==AM);},relativeTop:function(){var AR=parseFloat(this.model.top),AS=parseFloat(this.parent.model.t),AQ=AR-AS;return(AQ?AQ:0)+"px";},allowEdit:function(){var AR=this.parent.model.sty,AQ=this.parent.model.tixType;return(AR==N.txt||AR==N.trx)&&AQ!=AM;}},ontextChange:function(){if(this.model){this.model.set("text",this.text);}}},{scriptClass:"mstrmojo.Label",cssClass:"trxindicator",slot:"trxIndicatorNode",bindings:{model:"this.parent.model.vn",visible:"this.parent.model.tix && this.parent.model.tix>0"}},{scriptClass:"mstrmojo.platform.TableSelector",alias:"csel",slot:"selectorNode",text:"Selector",bindings:{model:"this.parent.model.seln",visible:"this.model.key",relativeTop:function(){var AR=parseFloat(this.model.top),AS=parseFloat(this.parent.model.t),AQ=AR-AS;return(AQ?AQ:0)+"px";}}},{scriptClass:"mstrmojo.platform.CellIcon",alias:"indicator",slot:"indicatorNode",linkable:true,bindings:{model:"this.parent.model.indn",src:function(){var AQ=this.model.url;return AQ||y;},relativeTop:function(){var AR=parseFloat(this.model.top),AS=parseFloat(this.parent.model.t),AQ=AR-AS;return(AQ?AQ:0)+"px";},visible:function(){var AQ=this.parent.model.sty;return AQ!=N.txt&&AQ!=N.trx;}}}],onwidthChange:function(){var AU=parseFloat(this.ci.width||AL(this.model.tableModel,"defaultCellPadding")),AQ=(parseFloat(this.width)-parseFloat(AU)*2)/2,AS=this.cv.model,AT=this.indicator.model,AR=this.model.sty;if(AR==N.txt||AR==N.trx){AS.set("left",AQ+parseFloat(this.ct.model.left)+"px");AS.set("width",AQ+"px");}else{if(AR==N.nav_t||AR==N.nav_st){AT.set("left",parseFloat(this.width)-parseFloat(AT.width)+"px");}}this.ct.model.set("width",AQ+"px");},ontopChange:function(){var AQ=this.top;this.model.set("t",AQ);},ontixTypeChange:function(AS){var AT=mstrmojo.css,AR=this.tixType&&(this.tixType+""),AQ={"3":"trx-list"};if(this.cv&&this.cv.textNode){if(AR==AM){this.cv.textNode.innerHTML=mstrmojo.desc(11180);}if(AR==AO||AR==i){this.cv.textNode.innerHTML=this.cv.text;}}AT.removeClass(this.domNode,["trx-list"]);AR&&AQ[AR]&&AT.addClass(this.domNode,AQ[AR]);},postBuildRendering:function(){this._super();this.ontixTypeChange();}});function AE(AR,AT,AQ){var AS=AQ.src,AU=AS&&AS.data,AV=AU&&AU.cell;if(!AV){return AT&&AT.apply(AR,[AQ]);}}mstrmojo.platform.TableCellList=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo.platform._HasFormatsMarkup],{scriptClass:"mstrmojo.platform.TableCellList",cssClass:"mi-tc-c-l",alias:"cs",renderOnScroll:false,resizable:false,draggable:true,dropZone:true,preBuildRendering:function(){if(this._super){this._super();}this.markupMethods=a.copy({onwidthChange:function(){if(this.width){this.domNode.style.width=this.width;this.itemsContainerNode.style.width=this.width;}}},a.copy(this.markupMethods));},onwidthChange:function(){if(this._super){this._super();}var AT=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets,AV=AT&&AT.length,AS=0;var AR=this.model.tableModel,AQ=AR.fmt.g.r,AU=(AQ.bs=="none")?0:AL(AR,"pxFromPt",AQ.bw);for(;AS<AV;AS++){AT[AS].set("width",parseFloat(this.width)-AU*2+"px");}},ontopChange:function(AQ){var AT=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets,AU=AT&&AT.length,AS=parseFloat(this.top),AR=0,AV;for(;AR<AU;AR++){AV=AT[AR].model;AV.set("t",AS+"px");AS=AS+parseFloat(AV.h);}},onadd:function(AQ){this.model.raiseEvent({name:"addCell",index:AQ.index});this._onchange(AQ);},onremove:function(AQ){this.model.raiseEvent({name:"removeCell",index:AQ.index});this._onchange(AQ);},_onchange:function(AY){var AS=this.table.gs.ctxtBuilder.itemWidgets;for(var AT=0;AT<AS.length;AT++){if(AS[AT]==this.group){var AX=AY.index,AV=this.ctxtBuilder.itemWidgets,AW=AV.length,AR=this.group.model.title;var AQ=parseFloat((AR.key&&AD)||0),AZ=parseFloat(this.group.model.t)+AQ,AU=0;j=0;for(;j<AW;j++){if(j>=AX){AV[j].model.set("t",AZ+"px");}AZ+=parseInt(AV[j].height);AU+=parseInt(AV[j].height)+1;}this.model.set("height",AU+"px");this.group.model.set("h",AU+AQ+"px");}}I(this.table.model);},postCreate:function(){if(this._super){this._super();}a.copy({bgc:"this.model.bgc",bc:"this.model.bc",bs:"this.model.bs",bw:"this.model.bw",top:"this.model.top",width:"this.model.width",height:"this.model.height",left:"this.model.left"},this.bindings);},itemFunction:function(AS,AQ,AR){return new mstrmojo.platform.TableCell({model:AS,parent:AR,width:AR.width,top:AS.t,h:AS.h,bindings:{tix:"this.model.tix",tixType:"this.model.tixType",height:"this.model.h",resizable:"this.parent.resizable",bs:function(){var AU=this.model.ln.key,AT=this.parent.model.bs;return AU?AT:"none";},bc:function(){var AT=this.model.ln.key,AU=this.parent.model.bc;return AT&&AU;},bw:function(){var AT=this.model.ln.key,AU=this.parent.model.bw;return AT&&AU;}}});},getDragData:function q(AR){var AS=AR.src,AT=AS.node,AQ=AT.getAttribute("ch")&&e.findWidget(AT);if(AQ){return{cell:AQ,h:AQ.model.h,resize:true};}else{if(this._super){return this.dropZone&&this._super(AR);}}return null;},allowDrop:function D(AQ){var AR=AQ.src,AS=AR&&AR.data,AT=AS&&AS.cell;if(AT){return this.resizable;}else{return AS.parent.id==this.model.gm.id;}},ondragstart:function(AX){var AV=AX.src,AW=AV&&AV.data,AS=AW&&AW.cell;if(AW&&AW.resize){var AR=this;function AT(){var Aa=document.createElement("div"),AZ=Aa.style,AY=AR.domNode;Aa.className="mstrmojo-TC-avatar";AZ.height=AY.clientHeight+"px";AY.appendChild(Aa);AR.avatar=Aa;return Aa;}mstrmojo.css.addClass(AS.domNode,"dragging");var AQ=this.avatar||AT();AQ.style.display="block";this.ownAvatar=true;}else{var AR;if(AV&&AV.node){AR=Q(e.findWidget(AV.node),"isCell");}var AU=(AR&&AR.domNode.innerText)||"";AW.set("html",AU);}return this._super(AX);},ondragenter:function F(AQ){AE(this,this._super,AQ);},ondragover:function o(AQ){AE(this,this._super,AQ);},ondragleave:function P(AQ){AE(this,this._super,AQ);},ondrop:function n(AQ){AE(this,this._super,AQ);},ondragmove:function J(AQ){var AU=AQ.src,AV=AU&&AU.data,AW=AV&&AV.cell;if(AW){var AS=AQ.tgt,AR=AS.pos.y-AU.pos.y,AT=Math.max(parseFloat(AW.model.h)+AR,AN)+"px";AW.domNode.style.height=AT;this.avatar.style.top=e.position(AW.domNode,true).y+parseFloat(AT)-e.position(this.domNode,true).y+"px";AV.h=AT;}else{if(this._super){this._super(AQ);}}},ondragend:function B(AQ){var AR=AQ.src,AS=AR&&AR.data,AT=AS&&AS.cell;if(AT){AT.model.set("h",AS.h);mstrmojo.css.removeClass(AT.domNode,"dragging");this.avatar.style.display="none";this.ownAvatar=false;}else{if(this._super){this._super(AQ);}}}});mstrmojo.platform.TableGroup=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.platform.TableGroup",markupString:'<div id="{@id}" class="mi-tc-g {@cssClass}" style="{@cssText}" mstrAttach:mousemove,mouseover,mouseout,selectstart><div class="mi-tc-g-hd"></div><div class="mi-tc-g-cs"></div></div>',markupSlots:{headerNode:function(){return this.domNode.firstChild;},cellsNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},title:null,cells:[],isGroup:true,top:null,children:[{scriptClass:"mstrmojo.HBox",cssClass:"mi-tc-g-hd-ctn",colHTML:'<colgroup><col style="width:50%;"><col style="width:50%;"></colgroup>',slot:"headerNode",alias:"gh",children:[{scriptClass:"mstrmojo.platform.GroupTitleField",slot:"groupTitleNode",cssClass:"mi-tc-g-nm",alias:"gt",isGroupTitle:true,bindings:{model:"this.parent.parent.model.title",visible:"this.model.key",text:"this.model.text"},ontextChange:function(){this.model.set("text",this.text);}},{scriptClass:"mstrmojo.Button",cssClass:"mi-button-add",text:mstrmojo.desc(11181),slot:"newCellNode",alias:"newCell",bindings:{top:"this.parent.gt.model.top",visible:"this.parent.parent.table.model.curGroup == this.parent.parent.model"},onclick:function(){var AQ=this.parent.parent;AQ.model.addCell(AQ.getBottom());},postCreate:function(){this.markupMethods=a.copy({ontopChange:function(){if(this.top){this.domNode.style.top=this.top;}}},a.copy(this.markupMethods));}}]},{scriptClass:"mstrmojo.platform.TableCellList",slot:"cellsNode",alias:"cs",bindings:{model:"this.parent.model.rn",items:"this.parent.model.cells",key:"this.parent.model.rn.key",table:"this.parent.table",group:"this.parent",top:"this.model.top"}}],bindings:{title:"this.model.title",cells:"this.model.cells"},updateTop:function(){this.set("top",parseInt(this.getBottom())-parseInt(this.getAndUpdateHeight())+"px");},onRender:function(){this.top=parseInt(this.getBottom())-parseInt(this.getAndUpdateHeight())+"px";this.height=this.getAndUpdateHeight();},ontopChange:function(AR){this.gh.gt.model.set("top",this.top);var AQ=this.model.title,AU=(AQ.key&&AD)||0;this.cs.model.set("top",parseInt(this.top)+parseInt(AU)+"px");var AV=this.cs.ctxtBuilder.itemWidgets,AT=parseInt(this.top)+parseInt(AU),AS=0;for(var AS=0;AS<AV.length;AS++){AV[AS].set("top",AT+"px");AT+=parseInt(AV[AS].height);}},onwidthChange:function(){this.cs.model.set("width",parseInt(this.width)+"px");},getAndUpdateHeight:function(){var AQ=this.model.title,AT=parseInt((AQ.key&&AD)||0),AS=this.cs.ctxtBuilder.itemWidgets,AU=AS.length,AR=0;for(;AR<AU;AR++){AT+=parseInt(AS[AR].height);}this.height=AT+"px";return AT+"px";},getBottom:function(){return parseFloat(this.model.t)+parseFloat(this.model.h)+"px";},onmouseover:function(){var AQ=this;AQ.table.model.set("curGroup",AQ.model);},onmouseout:function(){var AQ=this;AQ.table.model.set("curGroup",null);},onselectstart:function(AQ){var AT=AQ.e,AS=AQ.hWin,AR=e.eventTarget(AS,AT);if(AR.tagName&&AR.tagName.toLowerCase()==="input"){e.stopPropogation(AS,AQ.e);}}});mstrmojo.platform.TableGroupList=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetList",cssClass:"mi-tc-g-l",alias:"gs",renderOnScroll:false,makeObservable:true,draggable:true,dropZone:true,ownAvatar:true,itemFunction:function(AS,AQ,AR){var AT=AQ?AR.ctxtBuilder.itemWidgets[AQ-1].top:"0px";return new mstrmojo.platform.TableGroup({table:AR.parent,model:AS,top:AT,parent:AR,bindings:{height:function(){var AW=this.model.title.key,AX=AD,AU=this.model.rn.height,AV=this.model.rn.bs,AY=this.model.rn.bw;return parseFloat((AW&&AX)||0)+parseFloat(AU)+((AV=="none")?0:parseFloat(AY)*2)+"px";}}});},onadd:function(AQ){I(this.parent.model);this._onchange(AQ);},onremove:function(AQ){I(this.parent.model);},allowDrop:function D(AQ){var AR=AQ.src;if(AR&&AR.widget){return AR.widget===this;}},ondragstart:function(AU){var AR=AU.src,AT=AR&&AR.data,AQ=mstrmojo.dom.findWidget(AR.node);while(AQ){if(AQ.scriptClass=="mstrmojo.platform.TableGroup"){break;}AQ=AQ.parent;}if(AQ){var AS=AQ.domNode.cloneNode(true);AS.style.position="absolute";mstrmojo.css.addClass(AS,"avatar-dragging");AS.style.zIndex="1000";document.body.appendChild(AS);this.avatar=AS;}return this._super(AU);},ondragmove:function(AQ){var AR=AQ.tgt,AT=mstrmojo.dom.getMousePosition(AR.e,AR.hWin),AS=this.avatar;if(AS){AS.style.left=(AT.x+2)+"px";AS.style.top=(AT.y+2)+"px";}return this._super&&this._super(AQ);},ondragend:function(AQ){var AR=this.avatar;if(AR){AR.parentNode.removeChild(AR);}return this._super(AQ);},_onchange:function(Ab){var AR=this.items,Ac=0,AU=0;for(var AT=0;AT<AR.length;AT++){AR[AT].next=null;}for(var AT=0;AT<AR.length;AT++){var AX=AR[AT],AY=AX.cells,AQ=AX.title,AW=parseFloat((AQ.key&&AD)||0),AZ=parseFloat(AX.h),AV=Ac+AW;AX.set("t",Ac+"px");for(var AS=0;AS<AY.length;AS++){var Aa=AY[AS];Aa.set("t",AV+"px");AV+=parseInt(Aa.h);}AX.set("next",AR[AT+1]);Ac+=AZ;}}});mstrmojo.platform.TableSelectorGroupModel=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo.platform.TableSelectorGroupModel",init:function AG(AQ){if(this._super){this._super(AQ);}if(AQ.smt){this.smt.tableModel=this.tableModel;AQ.smt.formats=["P","W"];this.set("smt",new mstrmojo.platform.TableFieldModel(AQ.smt));}if(AQ.dsc){this.dsc.tableModel=this.tableModel;AQ.dsc.formats=["P","W"];this.set("dsc",new mstrmojo.platform.TableFieldModel(AQ.dsc));}},ontopChange:function(){var AQ=this.top;if(!AQ){return ;}this.smt&&this.smt.set("top",this.top);this.smt&&this.dsc.set("top",this.top);},onwidthChange:function(){if(!this.width||/NaN/.test(this.width)){return ;}var AR=parseInt(this.width),AQ=this.buttonInterval,AS=(AR-AQ)/2;if(this.smt){this.smt.set("width",AS+"px");this.smt.set("left",this.marginLeft+AS+this.buttonInterval+"px");}if(this.dsc){this.dsc.set("width",AS+"px");}}});mstrmojo.platform.TableSelectorButton=mstrmojo.declare(mstrmojo.HTMLButton,[mstrmojo.platform._HasFormatsMarkup],{scriptClass:"mstrmojo.platform.TableSelectorButton"});mstrmojo.platform.TableSelectorGroup=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.platform.TableSelectorGroup",markupString:'<div class="mi-tc-selectors-group"><div class="mi-tc-selectors-submit"></div><div class="mi-tc-selectors-cancel"></div></div>',markupSlots:{submitNode:function(){return this.domNode.firstChild;},discardNode:function(){return this.domNode.lastChild;}},onmodelChange:function(){this.__renderSelectors();},postBuildRendering:function(){this.__renderSelectors();},__renderSelectors:function(){if(!this.model){return ;}this.addChildren(new mstrmojo.platform.TableSelectorButton({text:"Submit",alias:"submit",parent:this,slot:"submitNode",bindings:{text:"this.parent.model.smt.dpTxt",model:"this.parent.model.smt"}}));this.addChildren(new mstrmojo.platform.TableSelectorButton({text:"Cancel",cssText:"left:"+this.model.marginLeft+"px",alias:"discard",parent:this,slot:"discardNode",bindings:{text:"this.parent.model.dsc.dpTxt",model:"this.parent.model.dsc"}}));this.renderChildren();}});mstrmojo.platform.TableControl=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.platform.TableControl",markupString:'<div id="{@id}" class="mstrmojo-TC {@cssClass}" style="{@cssText}" mstrAttach:click,mousemove,mouseout,mouseover,contextmenu><div></div><div class="mi-tc-selectors"></div><div class="mi-tc-btns"><div class="mi-tc-btn-ng"></div><div class="mi-tc-btn-nc"></div></div></div>',markupSlots:{newGroupNode:function(){return this.domNode.lastChild.firstChild;},newCellNode:function(){return this.domNode.lastChild.ChildNodes;},selectorGroupNode:function(){return this.domNode.childNodes[1];},groupsNode:function(){return this.domNode.firstChild;}},markupMethods:{},cssDisplay:"block",def:{items:[]},model:null,fmt:{},children:[{scriptClass:"mstrmojo.Button",cssClass:"mi-button-add",text:mstrmojo.desc(11182),slot:"newGroupNode",alias:"newGroup",onclick:function(){this.parent.model.addGroup(this.parent.getBottom());}},{scriptClass:"mstrmojo.platform.TableGroupList",slot:"groupsNode",bindings:{items:"this.parent.model.groups"}},{scriptClass:"mstrmojo.platform.TableSelectorGroup",slot:"selectorGroupNode",alias:"selectorGroup",bindings:{width:"this.parent.width",model:"this.parent.model.selGroupModel"}}],getBottom:function(){var AQ=this.gs.ctxtBuilder.itemWidgets;return AQ[AQ.length-1].getBottom();},resize:function(AR,AQ){AR&&this.set("height",AR);AQ&&this.set("width",AQ);},onwidthChange:function(AR){var AQ=this.width,AS=this.model.selGroupModel;h.forEach(this.model.groups,function(AT){AT.set("width",AQ);});if(AS){AS.set("width",AQ);}},oncontextmenu:function(AQ){k(AQ,this);}});})();