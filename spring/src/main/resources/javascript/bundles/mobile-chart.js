mstrmojo.chart.model.enums.EnumDSSGraphAxisLabelLocation={DssGraphAxisLabelLowSide:0,DssGraphAxisLabelHighSide:1,DssGraphAxisLabelBothSides:2,DssGraphAxisLabelNeitherSide:3};mstrmojo.chart.enums.EnumDSSGraphOffScaleType={DssGraphOffScaleHide:0,DssGraphOffScaleClip:1,DssGraphOffScaleShow:2};mstrmojo.chart.enums.EnumGraphMatrixPiePlotType={GMPPT_CATEGORY:0,GMPPT_VALUE:1,GMPPT_GRID:2};mstrmojo.chart.model.enums.EnumVariantType={VT_EMPTY:0,VT_NULL:1,VT_I2:2,VT_I4:3,VT_R4:4,VT_R8:5,VT_CY:6,VT_DATE:7,VT_BSTR:8,VT_DISPATCH:9,VT_ERROR:10,VT_BOOL:11,VT_VARIANT:12,VT_UNKNOWN:13,VT_DECIMAL:14,VT_I1:16,VT_UI1:17,VT_UI2:18,VT_UI4:19,VT_I8:20,VT_UI8:21,VT_INT:22,VT_UINT:23,VT_VOID:24,VT_HRESULT:25,VT_PTR:26,VT_SAFEARRAY:27,VT_CARRAY:28,VT_USERDEFINED:29,VT_LPSTR:30,VT_LPWSTR:31,VT_RECORD:36,VT_FILETIME:64,VT_BLOB:65,VT_STREAM:66,VT_STORAGE:67,VT_STREAMED_OBJECT:68,VT_STORED_OBJECT:69,VT_BLOB_OBJECT:70,VT_CF:71,VT_CLSID:72,VT_BSTR_BLOB:4095,VT_VECTOR:4096,VT_ARRAY:8192,VT_BYREF:16384,VT_RESERVED:32768,VT_ILLEGAL:65535,VT_ILLEGALMASKED:4095,VT_TYPEMASK:4095};mstrmojo.chart.enums.EnumGraphSubType={GST_NULL:0,GST_BIPOLAR:1,GST_DUALAXIS:2};mstrmojo.chart.enums.EnumFontStyle={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};mstrmojo.chart.model.enums.EnumDSSGraphObject={DssGraphNull:-3,DssGraphBackground:1,DssGraphFrame:2,DssGraphFootnote:3,DssGraphSubtitle:4,DssGraphTitle:5,DssGraphLegendArea:6,DssGraphLegendLine:7,DssGraphLegendMarker:8,DssGraphLegendText:9,DssGraphCurve:257,DssGraphDataLine:258,DssGraphDataMarker:259,DssGraphDataText:260,DssGraphDivBiPolar:261,DssGraphErrorBar:262,DssGraphLinrExp:263,DssGraphLinrLine:264,DssGraphLinrLog:265,DssGraphLinrNatLog:266,DssGraphLinrNPoly:267,DssGraphLinrText:268,DssGraphMeanLine:269,DssGraphMovAvgLine:270,DssGraphO1Body:271,DssGraph2DO1Label:272,DssGraphO1Major:273,DssGraphO1Minor:274,DssGraphO1Super:275,DssGraphO1Title:276,DssGraphO2Body:277,DssGraph2DO2Label:278,DssGraphO2Major:279,DssGraphO2Minor:280,DssGraphO2Title:281,DssGraphConnectDataLine:282,DssGraphRiser:286,DssGraphRiserShadow:287,DssGraphStdDevLine:288,DssGraphX1Body:289,DssGraphX1Label:290,DssGraphX1Major:291,DssGraphX1Minor:292,DssGraphXTitle:293,DssGraphY1Body:295,DssGraphY1Label:296,DssGraphY1Major:297,DssGraphY1Minor:298,DssGraphY1Title:299,DssGraphY2Body:301,DssGraphY2Label:302,DssGraphY2Major:303,DssGraphY2Minor:304,DssGraphY2Title:305,DssGraph3DShowColumnHeaders:318,DssGraph3DShowLeftHeaders:321,DssGraph3DShowRightHeaders:323,DssGraph3DShowRowHeaders:325,DssGraphOBPBox:329,DssGraphOBPMedian:330,DssGraphOBPStem:331,DssGraphOBPTail:332,DssGraphPieFeelerLine:337,DssGraphPieFeelerLabel:338,DssGraphPieGroupLabel:339,DssGraphPieRingLabel:340,DssGraphPieSlice:341,DssGraphSeriesTitle:398,DssGraphConnectStackLine:399,DssGraphDataTextStackTotal:401,DssGraphOPILBLValue:418,DssGraphUserLine1:414,DssGraphUserLine2:415,DssGraphUserLine3:416,DssGraphUserLine4:417,DssGraphDataTextConnectLine:431,DssGraphGauge:444,DssGraphGaugeTitle:450,DssGraphGaugeRange:451,DssGraphY3Body:477,DssGraphY3Label:478,DssGraphY3Major:479,DssGraphY3Minor:480,DssGraphY4Body:483,DssGraphY4Label:484,DssGraphY4Major:485,DssGraphY4Minor:486,DssGraph3DColHeader:512,DssGraph3DColTitle:515,DssGraph3DDataText:518,DssGraph3DRowHeader:552,DssGraph3DRowTitle:555,DssGraph3DRYHeader:558,DssGraph3DRYTitle:561,DssGraphGaugeBorder:1319,DssGraphGaugeNeedleBase:1320,DssGraphGaugeNeedleBaseLine:1330,DssGraphZBody:10003,DssGraphTrendLine:10004,DssGraphY1RightBody:10005,DssGraphY1RightTitle:10006,DssGraphReferenceLine:10007,DssGraphStraightLine:10008,DssGraphTargetLine:10009,DssGraphRefLineText:10010,DssGraphTrendLineText:10011,DssGraphUserLabel1:100100,DssGraphUserLabel2:100101,DssGraphUserLabel3:100102,DssGraphUserLabel4:100103,DssGraphX2Body:100200,DssGraphX2Label:100201,DssGraphX2Major:100202,DssGraphX2Minor:100203,DssGraphX2Title:100204};mstrmojo.chart.enums.EnumLayout={LO_ABSOLUTE:0,LO_CLUSTER:1,LO_STACKED:2,LO_PERCENT:3};mstrmojo.chart.enums.EnumGraphMajorType={GMT_INVALID:0,GMT_CATEGORY:1,GMT_PIE:2,GMT_SCATTER:3,GMT_POLAR:4,GMT_RADAR:5,GMT_BUBBLE:6,GMT_STOCK:7,GMT_HISTOGRAM:8,GMT_GAUGE:9,GMT_FUNNEL:10,GMT_BOX:11,GMT_GANTT:12,GMT_SPECTRAL:13,GMT_TABLE:14,GMT_3D_CATEGORY:15,GMT_3D_SCATTER:16,GMT_GRID:17};mstrmojo.chart.enums.EnumLineStyle={LS_SOLID:0,LS_DASH:1,LS_DOT:2,LS_DOT_DASH:3,LS_DASH_DOT_DOT:4,LS_MEDIUM_DASH:5,LS_SHORT_DASH:6,LS_LONGEST_DASH:7,LS_LONG_DOT:8,LS_DOT_DOT_DOT:9,LS_DASH_DASH_DOT:10,LS_DASH_DASH_DOT_DOT:11,LS_LONG_DASH_DOT:12,LS_LONG_DASH_DOT_DOT:13,LS_LONG_DASH_DASH:14,LS_LONG_DASH_DASH_DASH:15,LS_GRADIENT:16,LS_NONE:99};mstrmojo.chart.enums.EnumFontAlignment={FA_LEFT:0,FA_CENTER:1,FA_RIGHT:2};mstrmojo.chart.model.enums.EnumDSSGraphFillBevelEffect={DssGraphFillBevelNone:0,DssGraphFillBevelSmoothEdge:1,DssGraphFillBevelChiselEdge:2,DssGraphFillBevelDonut:3,DssGraphFillBevelSphere:4};mstrmojo.chart.enums.EnumCategoryLabelStyle={CLS_AUTOMATIC:0,CLS_NORMAL:1,CLS_STAGGER:2,CLS_MANUAL:3};(function(){var A;mstrmojo.chart.Polygon2D=A=mstrmojo.provide("mstrmojo.chart.Polygon2D",{});A.clone=function(D){var B=D.length,C,E=[];for(C=0;C<B;++C){E.push(D[C].clone());}return E;};}());mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition={DssGraphDTPositionCenter:0,DssGraphDTPositionOutMin:1,DssGraphDTPositionInMin:2,DssGraphDTPositionInMax:3,DssGraphDTPositionOutMax:4,DssGraphDTPositionOnSide:5,DssGraphDTPositionPieSmart:6,DssGraphDTPositionPieSmartRadial:7,DssGraphDTPositionPieSmartStacked:8};mstrmojo.chart.enums.EnumShowFace={SF_FRONT:1,SF_SIDE:2,SF_HIDDEN_SIDE:4};(function(){mstrmojo.vi._MonitorsAppState=mstrmojo.provide("mstrmojo.vi._MonitorsAppState",{onAppStateChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("appStateChange",this.id,"onAppStateChange");}}});}());mstrmojo.chart.enums.EnumGraphObjectType={GOT_AXIS_TITLE:0,GOT_AXIS_LABEL:1,GOT_AXIS_LINE:2,GOT_MAJOR_GRID:3,GOT_MINOR_GRID:4,GOT_INTERLACED_GRID:5};mstrmojo.chart.enums.EnumObjectShape={OS_ELLIPSE:2,OS_LINE:5,OS_POLYGON:6,OS_RECTANGLE:7,OS_WEDGE:12,OS_WEDGECRUST:13,OS_POLYLINE:18,OS_PATH:24,OS_CIRCLE:100,OS_RINGSECTOR:101,OS_NORMALSECTOR:102};mstrmojo.chart.enums.EnumCollectionType={CT_NO_COLLECTION:0,CT_LINE:1,CT_GENERAL_SHAPE:2,CT_TEXT:3,CT_VERTICAL_AREA:4,CT_VERTICAL_BAR:5,CT_HORIZONTAL_AREA:6,CT_HORIZONTAL_BAR:7,CT_DEPTH_LINE_OR_LINE_MARKER:8,CT_NO_FORMAT:9};mstrmojo.chart.enums.EnumRectCompare={NONE:-1,ExpandX:0,ExpandY:1,ShrinkX:2,ShrinkY:3,KeepX:4,KeepY:5,KeepBoth:6};mstrmojo.chart.enums.EnumAttachedPointsStyle={NORMAL:0,TOOLTIP_UPPER:1,TOOLTIP_LOWER:2,TOOLTIP_MIDDLE:3,TOOLTIP_U2L:4,TOOLTIP_TRAPEZOID:5};(function(){function B(L,Q,N){var M,O;M=0;if(N){M=Math.max(L,L-Q);M=Math.max(M,-Q);}else{M=L-Q;}if(M===0){this.mIsShown=false;return 1;}var P=M;O=1;while(M<1){M*=10;O/=10;}while(M>=10){M/=10;O*=10;}if(M<1.8){O*=2;O/=10;}else{if(M<3.1){O*=4;O/=10;}else{if(M<4.6){O*=5;O/=10;}else{if(M>=8.1){O*=2;}}}}return O;}function K(P){var L,N;this.mStep=B.call(this,this.mMaximum,this.mMinimum,P.mAlwaysIncludeZero);this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:this.mMinTick;if(P.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}var M=this.mMaxTick-this.mMinTick;if(this.mStep>=M){return ;}L=Math.floor((this.mMaxTick-this.mMinTick+this.mStep/100)/this.mStep)+1;for(N=1;N<L-1;++N){var O=this.mMinTick+N*this.mStep;this.mTicks.push(O);}}function C(M){var L;this.mMaxTick=1;this.mStep=this.mMinimum<0?0.2:0.1;if(M.mUseCustomMinMax){this.mMaxTick=M.mAxisMaxValue;this.mMinTick=M.mAxisMinValue;this.mMaxTick=Math.min(1,this.mMaxTick);this.mMinTick=Math.max(-1,this.mMinTick);this.mStep=0.1;}else{if(this.mMaximum>=0.5){this.mMaxTick=1;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:(this.mMinTick>0?0:this.mMinTick);if(this.mMinimum<-0.5){this.mMinTick=-1;}}else{if(this.mMaximum>0){this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=-1;}else{this.mStep=0.1;this.mMaxTick=0;this.mMinTick=-1;}}}for(L=this.mMinTick+this.mStep;L+0.01<this.mMaxTick;L+=this.mStep){this.mTicks.push(Math.round(L*100)/100);}}function I(L){return Math.log(L)/Math.log(10);}function H(O){var N,L,M;this.mStep=1;if(this.mMaximum<=0){this.mMinTick=1;this.mMaxTick=10;return ;}if(this.mMinimum<=0){L=this.mMaximum>1?0:-1;this.mMinTick=Math.pow(10,L);if(O.mUseCustomMinMax){this.mMaxTick=this.mMaximum;N=Math.floor(I.call(this,this.mMaximum));if(I.call(this,this.mMaximum)===N){N--;}}else{N=Math.ceil(I.call(this,this.mMaximum));this.mMaxTick=Math.pow(10,N);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}return ;}if(O.mUseCustomMinMax){N=I.call(this,this.mMaximum);L=I.call(this,this.mMinimum);this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;}else{N=Math.ceil(I.call(this,this.mMaximum));L=Math.floor(I.call(this,this.mMinimum));this.mMaxTick=Math.pow(10,N);this.mMinTick=Math.pow(10,L);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}}function J(L){this.mTicks.splice(0,this.mTicks.length);if(this.mIsPercent){return C.call(this,L);}if(L.mUseLogarithmicScale){return H.call(this,L);}K.call(this,L);}function G(Q){if(Q.mUseCustomMinMax||Q.mUseLogarithmicScale){return ;}var M=0.1,O=false,L=false,P=[];this.GetTicks(P);if(P.length>=2){var N=P.length;L=((Math.abs(this.mMaximum-P[N-2])<M*this.mStep));O=((Math.abs(this.mMinimum-P[1])<M*this.mStep));if(this.mIsPercent){L=false;}}if(L&&O){this.mMinTick=this.mMinimum;this.mMaxTick=this.mMaximum;Q.mUseMinValue=Q.mShowMinLabel=true;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(L){this.mMaxTick=this.mMaximum;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(O){this.mMinTick=this.mMinimum;Q.mUseMinValue=Q.mShowMinLabel=true;}else{}}}if(Q.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}mstrmojo.chart.common.ScalePlate=mstrmojo.provide("mstrmojo.chart.common.ScalePlate",{mOptions:{mShowMinLabel:true,mShowMaxLabel:true},isStackedChart:false,mStep:0,mIsPercent:false,mMinimum:0,mMaximum:0,mMaxTick:0,mMinTick:0,mTicks:[],clear:function F(){this.isStackedChart=this.mIsPercent=false;this.mMinimum=this.mMaximum=0;this.mMinTick=this.mMaxTick=0;this.mStep=0;this.mTicks=[];},GetTicks:function A(M){if(this.mOptions.mShowMinLabel){M.push(this.mMinTick);}var L;for(L=0;L<this.mTicks.length;++L){M.push(this.mTicks[L]);}if(this.mOptions.mShowMaxLabel){M.push(this.mMaxTick);}},getMaxMinTickValue:function D(O,N,L,M){this.computeTicks(O,N,L,M);return{Max:this.mMaxTick,Min:this.mMinTick};},computeTicks:function E(Q,P,L,N){this.mMinimum=N;this.mMaximum=L;this.mIsPercent=!!(P&1);this.isStackedChart=!!(P&2);var O=1e-14;if(!Q.mUseLogarithmicScale&&this.isStackedChart){this.mMinimum=Math.min(this.mMinimum,0);this.mMaximum=Math.max(this.mMaximum,0);}if(Q.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Q.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Q.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<O){if(this.mMinimum<-O||this.mMinimum>O){var M=Math.abs(this.mMinimum)*0.5;this.mMaximum=this.mMaximum+M;this.mMinimum=this.mMinimum-M;}else{this.mMinimum=-6;this.mMaximum=6;}}J.call(this,Q);if(Q.mUseLogarithmicScale&&this.isStackedChart){this.mMaximum=Q.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Q.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);H.call(this,Q);}G.call(this,Q);}});}());mstrmojo.chart.enums.EnumImageUsage={GENERAL:0,FIRST_IMAGE_OF_SCROLL_VIEW:1,SECOND_IMAGE_OF_SCROLL_VIEW:2,IMAGE_OF_SCROLL_VIEW:4,EMPTY_IMAGE:8,OBJECT_CLIP_COMPUTATION:16,BANNER:32};mstrmojo.chart.enums.EnumLegendMarkersStyle={LMS_LeftOfText:0,LMS_RightOfText:1,LMS_CenterOnMarkers:2,LMS_AboveText:3,LMS_BelowText:4};mstrmojo.warehouse.EnumObjectTypes={FILTER:1,METRIC:4,ATTRIBUTE:12,FACT:13,DIMENSION:14,TABLE:15,TABLE_LOGICAL_VIEW:151,TABLE_PARTITION:152,FORM:21,COLUMN:26,DBROLE:29,PROJECT:32,TRANSFORMATION:43,DBTABLE:53,LAYER:70,RELATIONSHIP:99,COMPOUND_FORM:1001,RELATIONSHIP_ATTRIBUTE:1002};mstrmojo.chart.model.enums.EnumDSSGraphMarkerShape={DssGraphMarkerShapeNone:0,DssGraphMarkerShapeRectangle:1,DssGraphMarkerShapeStar45:2,DssGraphMarkerShapePlus:3,DssGraphMarkerShapeCircle:4,DssGraphMarkerShapeDiamond:5,DssGraphMarkerShapeSpikedX:6,DssGraphMarkerShapePlainX:7,DssGraphMarkerShapeTriangle1:8,DssGraphMarkerShapeFatPlus:10,DssGraphMarkerShapeSquare:24,DssGraphMarkerShapeHouse:27,DssGraphMarkerShapeStar5:37,DssGraphMarkerShapeGMTick:200,DssGraphMarkerShape2DPie:201,DssGraphMarkerShape2DRingPie:202,DssGraphMarkerShapeCombined:203,DssGraphMarkerShapeGMPolyLine:204,DssGraphMarkerShapeGMBar:205,DssGraphMarkerShapeGMArea:206,DssGraphMarkerBullet:207};(function(){var C="xviPopopNode";function A(G){var H={};H[C]=G;return H;}mstrmojo.ui.menus._IsMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._IsMenuPopup",{init:function E(G){this._super(G);var J=this.popupConfig;if(!J){throw new Error("Cannot instantiate popup without supplying the popupConfig property.");}this.addDisposable(J);var H=mstrmojo.all[J.hostId],I=J.hostElement;if(J.isHostedWithin&&H&&I){H.addSlots(A(I));this.slot=C;}},closeAllMenus:function F(){var G=this.opener;if(G&&G.closePopup){G.closePopup();}if(G&&G.closeAllMenus){G.closeAllMenus();}},open:function B(H,G){if(this._super){this._super(H,G);}},close:function D(G){if(this.slot===C){this.opener.removeSlots(A(null));}if(this._super){this._super(G);}this.destroy();var H=mstrmojo.all[this.popupConfig.hostId];if(H){H.closePopup();}}});}());mstrmojo.vi.models.EnumDragSources={DATASETS:1,VIZ_EDITOR:2,FILTERS:3,ALL_OBJECT_LIST:4,VIZ:5};mstrmojo.chart.model.enums.EnumDSSGraphLegendPosition={DssGraphLegendPositionFreeFloat:0,DssGraphLegendPositionRight:1,DssGraphLegendPositionLeft:2,DssGraphLegendPositionBottom:3};mstrmojo.chart.enums.EnumRectExpandDirection={REC_EXP_INVALID:0,REC_EXP_HORIZONTAL:1,REC_EXP_VERTICAL:2,REC_EXP_BOTH:3};mstrmojo.chart.enums.EnumDssGraphGridChartUniformColorMode={BYX:0,BYY:1,BYBOTH:2};mstrmojo.chart.enums.EnumRadientGradientUsage={RG_PIESLICE:0,RG_RING:1,RG_BORDERRING:2};mstrmojo.chart.enums.EnumNumberCategory={Default:-2,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7,Special:8,General:9,FromGrid:10};mstrmojo.chart.model.enums.EnumDSSGraphDataTextShowType={DssGraphDataTextNone:0,DssGraphDataTextValue:1,DssGraphDataTextLabel:2,DssGraphDataTextBoth:3,DssGraphDataTextAbs:4,DssGraphDataTextAbsValue:5,DssGraphDataTextAbsBoth:7,DssGraphDataTextTotal:8,DssGraphDataTextZValue:16,DssGraphDataTextPercent:32,DssGraphDataTextYValue:64,DssGraphDataTextInternal:128,DssGraphDataTextSeriesDependent:256,DssGraphDataTextQualityObjectMode:512};mstrmojo.chart.enums.EnumLabelLevelOption={LLO_NORMAL:0,LLO_COMMON:1,LLO_SPECIFIC:2};mstrmojo.chart.enums.EnumLegendLayout={LL_LegendFreeFloat:0,LL_LegendOnRightSide:1,LL_LegendOnLeftSide:2,LL_LegendBelowChart:3};mstrmojo.chart.enums.EnumValueAxis={VA_Y1:0,VA_Y2:1,VA_BOTH:2,VA_Y3:3,VA_Y4:4};mstrmojo.chart.model.enums.EnumDSSGraphMarkerLayout={DssGraphMarkerLeft:0,DssGraphMarkerRight:1,DssGraphMarkerCentered:2,DssGraphMarkerAbove:3,DssGraphMarkerBelow:4,DssGraphMarkerAuto:5};mstrmojo.chart.enums.EnumFontRotation={FR_NORMAL:0,FR_45:5,FR_90:2,FR_180:3,FR_270:4,FR_315:6,FR_CUSTOME:7,FR_HOTEL:1,FR_AUTOMATIC:-1};mstrmojo.chart.enums.EnumTrendLineIndex={TLI_Y1:0,TLI_Y2:1,TLI_BOTH:2};mstrmojo.chart.model.enums.EnumDSSGraphStockLayout={DssGraphStockLayoutDefault:0,DssGraphStockLayoutVerticalLine:1,DssGraphStockLayoutCandleStick:2,DssGraphStockLayoutLine:3,DssGraphStockLayoutArea:4,DssGraphStockLayoutLineCircle:5,DssGraphStockLayoutDot:6,DssGraphStockLayoutArea2:7};mstrmojo.chart.model.enums.EnumDSSGraphFontRotation={Automatic:-1,Normal:0,RotateHotel:1,Rotate90:2,Rotate180:3,Rotate270:4,Rotate45:5,Rotate315:6,Custom:7};mstrmojo.chart.enums.EnumGraphMatrixMarkerTypeInChart={_LINE_IN_LINE:0,_DOTS_IN_LINE:1,_ISODOT_IN_LINEAREA:2,_MUTATION_IN_LINE:3,_BAR:4,_SHAPES_IN_BUBBLESCATTER:5,_SHAPES_IN_GRID:6,_TICK_CATEGORY:7,_TICK_VALUE:8,_TICK_GRID:9,_PIE:10};mstrmojo.chart.enums.EnumFormatType={FMT_UNDEFINED:0,FMT_LINE:1,FMT_FILL:2,FMT_FONT:3};mstrmojo.mstr.EnumFunction={FunctionCustom:-1,FunctionReserved:0,FunctionPlus:1,FunctionMinus:2,FunctionTimes:3,FunctionDivide:4,FunctionUnaryMinus:5,FunctionEquals:6,FunctionNotEqual:7,FunctionGreater:8,FunctionLess:9,FunctionGreaterEqual:10,FunctionLessEqual:11,FunctionSum:12,FunctionCount:13,FunctionAvg:14,FunctionMin:15,FunctionMax:16,FunctionBetween:17,FunctionLike:18,FunctionAnd:19,FunctionOr:20,FunctionNot:21,FunctionIn:22,FunctionRank:23,FunctionAbs:24,FunctionRunningSum:25,FunctionRunningAvg:26,FunctionMovingSum:28,FunctionMovingAvg:27,FunctionProduct:29,FunctionMedian:30,FunctionMode:31,FunctionStdev:32,FunctionVar:33,FunctionGeomean:34,FunctionEqualEnhanced:35,FunctionNotEqualEnhanced:36,FunctionGreaterEqualEnhanced:37,FunctionLessEqualEnhanced:38,FunctionBetweenEnhanced:39,FunctionBanding:40,FunctionBandingC:41,FunctionBandingP:42,FunctionNotLike:43,FunctionNotBetween:44,FunctionIntersect:45,FunctionIntersectIn:46,FunctionNullToZero:47,FunctionZeroToNull:48,FunctionApplySimple:49,FunctionApplyAggregation:50,FunctionApplyLogic:51,FunctionApplyComparison:52,FunctionApplyRelative:53,FunctionIsNull:54,FunctionIsNotNull:55,FunctionUcase:56,FunctionNotIn:57,FunctionNTile:58,FunctionPercentile:59,FunctionMovingMax:60,FunctionMovingMin:61,FunctionMovingDifference:62,FunctionMovingStdev:63,FunctionExpWghMovingAvg:64,FunctionMovingCount:65,FunctionRunningMax:66,FunctionRunningMin:67,FunctionRunningStdev:68,FunctionRunningCount:69,FunctionExpWghRunningAvg:70,FunctionNotBetweenEnhanced:71,FunctionConcat:72,FunctionFirstInRange:73,FunctionLastInRange:74,FunctionValueSegment:75,FunctionContains:76,FunctionBeginsWith:77,FunctionEndsWith:78,FunctionNotContains:79,FunctionNotBeginsWith:80,FunctionNotEndsWith:81,FunctionCase:82,FunctionCaseV:83,FunctionStdevP:84,FunctionRunningStdevP:85,FunctionMovingStdevP:86,FunctionNTileS:87,FunctionNTileVS:88,FunctionVarP:89,FunctionCurrentDate:90,FunctionDayOfMonth:91,FunctionDayOfWeek:92,FunctionDayOfYear:93,FunctionWeek:94,FunctionMonth:95,FunctionQuarter:96,FunctionYear:97,FunctionCurrentDateTime:98,FunctionCurrentTime:99,FunctionHour:100,FunctionMinute:101,FunctionSecond:102,FunctionMilliSecond:103,FunctionConcatNoBlank:104,FunctionLength:105,FunctionLower:106,FunctionLTrim:107,FunctionPosition:108,FunctionRTrim:109,FunctionSubStr:110,FunctionInitCap:111,FunctionTrim:112,FunctionRightStr:113,FunctionLeftStr:114,FunctionGreatest:115,FunctionLeast:116,FunctionFirst:117,FunctionLast:118,FunctionAdd:134,FunctionAverage:135,FunctionMultiply:136,FunctionBandingM:137,FunctionOLAPSum:138,FunctionOLAPAvg:139,FunctionOLAPCount:140,FunctionOLAPMax:141,FunctionOLAPMin:142,FunctionLag:143,FunctionLead:144,FunctionPercentRank:166,FunctionTuple:1000};mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition={_BOTTOM:0,_TOP:1,_LEFT:2,_RIGHT:3,_CENTER:4};mstrmojo.gm.GMEnums={};mstrmojo.gm.DualAxisSubAxisBit={PRIMARY:0,SECONDARY:1};mstrmojo.gm.StackExetrmeId={PRIMARY_Y_AXIS:-2,SECONDARY_Y_AXIS:-18,PRIMARY_X_AXIS:-1,SECONDARY_X_AXIS:-17};mstrmojo.gm.FormNameType={OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4};mstrmojo.gm.EnumSelectionOptionLevel={GLOBAL:1,ITSELF:2,ATTS_METRIC_COMBINATION:3,METRIC_AXIS:4,METRIC:5,AXIS:6,COLOR_BY:7,ALL_SHAPE:8,ITSELF_RESOLVED:9};mstrmojo.gm.EnumLabelRotation={VERTICAL:2,HORIZONTAL:0,AUTOMATIC:-1};mstrmojo.gm.EnumIdentityType={LEGEND:Math.pow(2,0),GRAPH_SHAPE:Math.pow(2,1),X_AXIS:Math.pow(2,2),Y_AXIS:Math.pow(2,3),X2_AXIS:Math.pow(2,4),Y2_AXIS:Math.pow(2,5),GRID_LINE:Math.pow(2,6),TREND_LINE:Math.pow(2,7),REF_LINE:Math.pow(2,8),DATA_LABEL:Math.pow(2,9),COLOR_SQUARE:Math.pow(2,10),ROW_TITLE:Math.pow(2,11),COL_TITLE:Math.pow(2,12),ROW_HEADER:Math.pow(2,13),COL_HEADER:Math.pow(2,14),LOG_SCALE:Math.pow(2,15),H_MATRIX_LINE:Math.pow(2,16),V_MATRIX_LINE:Math.pow(2,17),LEGEND_TEXT:Math.pow(2,18),SHAPE_COLLECTION:Math.pow(2,19),MINOR_GRID_LINE:Math.pow(2,20),AXIS_SCALE:Math.pow(2,22),AXIS_ORIGIN:Math.pow(2,23),ROWS_BACKGROUND:Math.pow(2,24),COLS_BACKGROUND:Math.pow(2,25),X_NUMERIC:Math.pow(2,26),X_CATEGORY:Math.pow(2,27),Y_NUMERIC:Math.pow(2,28),Y_CATEGORY:Math.pow(2,29),X_METRIC_AXIS_TITLE:Math.pow(2,30),Y_METRIC_AXIS_TITLE:Math.pow(2,31),VIZ_BOX_TITLE:Math.pow(2,32),REF_LINE_LABEL:Math.pow(2,33),LINE_MARKER:Math.pow(2,34),X_AXIS_ORIGIN_LABEL:Math.pow(2,35),Y_AXIS_ORIGIN_LABEL:Math.pow(2,36),X_AXIS_ORIGIN_LINE:Math.pow(2,37),Y_AXIS_ORIGIN_LINE:Math.pow(2,38),Y_ATTRIBUTE_AXIS_TITLE:Math.pow(2,39),ROW_HEADER_TEXT:Math.pow(2,40),ROW_TITLE_TEXT:Math.pow(2,41),COL_HEADER_TEXT:Math.pow(2,42),COL_TITLE_TEXT:Math.pow(2,43),VIZ_BOX_CONTAINER:Math.pow(2,44),X_ATTRIBUTE_AXIS_TITLE:Math.pow(2,45),AXIS_ORIGIN_DEFINE:Math.pow(2,46)};mstrmojo.gm.EnumGMZoneIds={ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10};mstrmojo.gm.EnumClickType={NONE:-1,LEFT_CLICK:1,RIGHT_CLICK:2,DOUBLE_CLICK:3};mstrmojo.gm.EnumLegendSlot={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8};mstrmojo.gm.EnumAxisType={ATTRIBUTE:0,METRIC:1};mstrmojo.gm.EnumGraphType={UNDEFINED:-1,AREA:1,BAR:2,LINE:3,SCATTER:4,BUBBLE:5,PIE:6,GRID:7};mstrmojo.gm.EnumContextMenu={SEPARATOR:0,KEEP_ONLY:1,EXCLUDE:2,SORT_ASCENDING:3,SORT_DESCENDING:4,CLEAR_SORT:5,SHOW_DATA:6,SWITCH_THEME:7,KEEP_ONLY_AND_SHOW:8,CLOSE_LEGEND:9,OPEN_LEGEND:10,AXIS_SCALE:11,DRILL_TO:100,CHART_TYPE:200,AREA_ABS:201,AREA_STACKED:202,AREA_PERCENT:203,BAR_SBS:204,BAR_ABS:205,BAR_STACKED:206,BAR_PERCENT:207,LINE_ABS:208,LINE_STACKED:209,LINE_PERCENT:210,BUBBLE:211,SCATTER:212,H_AREA_ABS:213,H_AREA_STACKED:214,H_AREA_PERCENT:215,H_BAR_SBS:216,H_BAR_ABS:217,H_BAR_STACKED:218,H_BAR_PERCENT:219,H_LINE_ABS:220,H_LINE_STACKED:221,H_LINE_PERCENT:222,GRID:223,CIRCLE:224,SQUARE:225,PIE:226,TICKER:227,RING:228,CANVAS:229,SVG:230,LARGE_ABL:231,OUTPUT_EXTREMES:232,COMBINATION:233,ENABLE_PARTIAL_RENDERING:234,DISABLE_PARTIAL_RENDERING:235,OUTPUT_DATA_COUNT:236,ENABLE_TIMER:239,DISABLE_TIMER:240,ENABLE_CE_TIMER:241,DISABLE_CE_TIMER:242};mstrmojo.gm.EnumColorRankMode={RANK_MODE_VALUE:0,RANK_MODE_TOP:1,RANK_MODE_BOTTOM:2,RANK_MODE_TOP_PERCENT:3,RANK_MODE_BOTTOM_PERCENT:4};mstrmojo.gm.EnumColorByType={NULL:0,ATT:1,METRICS_ITEM:2,METRICS:3,ATT_METRICS:4};mstrmojo.gm.EnumDockPosition={TOP:1,RIGHT:2,BOTTOM:3,LEFT:4};mstrmojo.gm.EnumXAxisLabelStatus={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};mstrmojo.gm.EnumABLDirection={HORIZONTAL:1,VERTICAL:2};mstrmojo.gm.EnumMetricsPosition={MetricsByRow:0,MetricsByColumn:1,MetricsByAxis:2,MetricsByBreakBy:3,MetricsBySlice:4,MetricsByXAxis:5,MetricsByYAxis:6};mstrmojo.gm.EnumDrawingAPI={GET_CHART_WIDTH:0,GET_CHART_HEIGHT:1,GET_ROW_HEADER:2,GET_COLUMN_HEADER:3,CREATE_UNIT_Y_AXIS:4,CREATE_UNIT_X_AXIS:5,GET_FULL_FLEDGED_CHART:6,GET_ROW_SPAN:7,GET_COLUMN_SPAN:8,GET_METRICS_ON_X:9,GET_METRICS_ON_Y:10,GET_METRICS_ON_SIZE_BY:11,UPDATE_MINI_CHART:12,UPDATE_X_AXIS:13,UPDATE_Y_AXIS:14,MAX_RADIUS_CALC:15,GET_EXTRA_COLUMN_HEADER:16,UPDATE_COLUMN_HEADER:17,UPDATE_ROW_HEADER:18,LAYOUT_ALL_X_AXIS_LABELS:19,LAYOUT_ONE_X_AXIS_LABELS:20};mstrmojo.gm.WidgetPropertyTag={FIT_TO:"FitTo",AXIS_SCALE:"MinMax",SHAPE:"Shape",SUB_TYPE:"Subtype",DATA_LABEL:"DataLabel",DATA_LABELS_PLACEMENT:"DataLabelPalcement",METRIC_LEVEL_DATA_LABEL:"mtcLvlDataLabel",BANDING:"Banding",LEGEND_VISIBLE:"LegendVisibleness",COL_ALIGNMENT:"Columnalignment",ROW_ALIGNMENT:"Rowalignment",MAX_SIZE_TYPE:"SizeType",MAX_SIZE_VALUE:"SizeValue",MIN_SIZE_TYPE:"minSizeType",MIN_SIZE_VALUE:"minSizeValue",OUTSIDE_BORDER:"OutSideBorder",AXES:"AxisLine",MATRIX_LINES:"MatrixLine",GRID_LINES:"GridLine",SELECTION_TYPE:"SelectionType",SELECTIONS:"Selections",LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr",SCALE_CHART_HEIGHT:"rr",SCALE_CHART_WIDTH:"cr",SCALE_ROW_HEADERS:"rvr",SCALE_COL_HEADERS:"chr",SCALE_Y:"yr",SCALE_X:"xr",SCALE_Y2:"y2r",SCALE_X2:"x2r",SCALE_ALL:"scales",SCALE_V_EXTRA_LINE:"vExtraLine",SORT_ORDER:"so",SORT_INDEX:"si",AXIS_SCALE_DATA:"AxisScale",AXIS_SCALE_REAL_MIN:"rMin",AXIS_SCALE_REAL_MAX:"rMax",AXIS_SCALE_MANUAL_MIN:"mMin",AXIS_SCALE_MANUAL_MAX:"mMax",AXIS_SCALE_AUTO_MIN:"autoMin",AXIS_SCALE_AUTO_MAX:"autoMax",SINGLE_AXIS_SCALE_TYPE:"scaleType",LOG_SCALE:"logScale",GROUP_INFO:"groupInfo",METRIC_SHAPES:"metricShapes",AXIS_ORIGIN:"axisOrigin",AXIS_ORIGIN_AUTO:"axOriAuto",AXIS_ORIGIN_VALUE:"axOriValue",TREND_LINE_DEF:"trdDef",REF_LINE_DEF:"refDef",TREND_TYPE:"trdTp",TREND_LEVEL:"trdLvl",TREND_ENABLED:"trdEnabled",TREND_INCLUDE_BREAK_BY:"trdIncBB",TREND_POLY_DEGREE:"trdDgr",TREND_FORECAST_ENABLED:"trdFstEnabled",TREND_BWD_FORECAST:"trdBwdFst",TREND_FWD_FORECAST:"trdFwdFst",TREND_SEASONALITY:"trdSeason",TREND_BUBBLE_FORE_DEF:"trdBbForeDef",TREND_BUBBLE_FORE_FWD:"trdBbForeFwd",TREND_BUBBLE_FORE_BWD:"trdBbForeBwd",TREND_BUBBLE_FORE_ENABLED:"trdBbForeEnabled",TREND_BUBBLE_MAX:"trdBbMax",TREND_BUBBLE_MIN:"trdBbMin",REF_TYPE:"refTp",REF_LEVEL:"refLvl",REF_ENABLED:"refEnabled",REF_SHOW_LABEL:"refLbShw",REF_LABEL_TYPE:"refLbTp",REF_CONST_VALUE:"refCstVl",REF_LINE_NAME:"refLnName",TREND_REF_LINE_THICKNESS:"trdRefLnThk",TREND_REF_LINE_COLOR:"trdRefLnClr",TREND_REF_LINE_STYLE:"trdRefLnStyle",TREND_REF_LINE_COMBINED_STYLE:"trdRefLnCmbStyle",FORMATS_ON_COMBINATION:"fmtOnComb",PARTIAL_RENDER:"prtRdn"};mstrmojo.gm.FormatingPropertyTag={IS_DEFAULT_VALUE:"_default",MODIFIED_DEF_FILL_COLOR:"modDefFillClr",ALL_SHAPE_FORMAT:"allShpFmt",SHAPE_LINE_THICKNESS:"shpLnThk",SHAPE_LINE_COLOR:"shpLnClr",SHAPE_LINE_STYLE:"shpLnStyle",SHAPE_LINE_COMBINED_STYLE:"shpLnCmbStyle",SHAPE_FILL_COLOR:"shpFillClr",SHAPE_FILL_COLOR_DEFAULT:"shpFillClr_default",SHAPE_FILL_STYLE:"shpFillStyle",SHAPE_FILL_TRANSPARENCY:"shpFillTrans",SHAPE_FILL_EFFECT:"shpFillEff",SHAPE_BORDER_COLOR:"shpBdrClr",SHAPE_BORDER_STYLE:"shpBdrStyle",SHAPE_BORDER_COMBINED_STYLE:"shpBdrCmbStyle",SHAPE_BORDER_THICKNESS:"shpBdrThk",LINE_MARKER_SHOW:"lnMkShw",LINE_MARKER_SHAPE:"lnMkShp",LINE_MARKER_SIZE:"lnMkSz",LINE_MARKER_COLOR:"lnMkClr",LINE_MARKER_COLOR_EQUAL:"lnMkClrEq",LINE_MARKER_BORDER_COLOR:"lnMkBdrClr",PIE_EXPLODE:"pieExpl",DATA_LABELS_SHOW:"dlShw",DATA_LABELS_FONT_FAMILY:"dlFntFml",DATA_LABELS_FONT_SIZE:"dlFntSz",DATA_LABELS_FONT_STYLE:"dlFntStyle",DATA_LABELS_FONT_COLOR:"dlFntClr",REF_LABELS_FONT_FAMILY:"rfLnFntFml",REF_LABELS_FONT_SIZE:"rfLnFntSz",REF_LABELS_FONT_STYLE:"rfLnFntStyle",REF_LABELS_FONT_COLOR:"rfLnFntClr",LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",ALL_LINE_SHOW:"allLnShw",ALL_LINE_COLOR:"allLnClr",ALL_LINE_STYLE:"allLnStyle",ALL_LINE_COMBINED_STYLE:"allLnCmbStyle",ALL_LINE_THICKNESS:"allLnThk",ALL_AXIS_ORIGIN_LINE_SHOW:"axOriLnShw",ALL_AXIS_ORIGIN_LINE_COLOR:"axOriLnClr",ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE:"axOriLnCmbStyle",X_AXIS_ORIGIN_LINE_SHOW:"xAxOriLnShw",X_AXIS_ORIGIN_LINE_COLOR:"xAxOriLnClr",X_AXIS_ORIGIN_LINE_STYLE:"xAxOriLnStyle",X_AXIS_ORIGIN_LINE_COMBINED_STYLE:"xAxOriLnCmbStyle",X_AXIS_ORIGIN_LINE_THICKNESS:"xAxOriLnThk",Y_AXIS_ORIGIN_LINE_SHOW:"yAxOriLnShw",Y_AXIS_ORIGIN_LINE_COLOR:"yAxOriLnClr",Y_AXIS_ORIGIN_LINE_STYLE:"yAxOriLnStyle",Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:"yAxOriLnCmbStyle",Y_AXIS_ORIGIN_LINE_THICKNESS:"yAxOriLnThk",ALL_AXIS_LINE_SHOW:"allAxLnShw",ALL_AXIS_LINE_COLOR:"allAxLnClr",ALL_AXIS_LINE_STYLE:"allAxLnStyle",ALL_AXIS_LINE_COMBINED_STYLE:"allAxLnCmbStyle",ALL_AXIS_LINE_THICKNESS:"allAxLnThk",ALL_AXIS_TITLE_SHOW:"allAxTtShw",ALL_AXIS_TITLE_CONTENT:"allAxTtCtt",ALL_AXIS_TITLE_FONT_COLOR:"allAxTtFntClr",ALL_AXIS_TITLE_FONT_FAMILY:"allAxTtFntFml",ALL_AXIS_TITLE_FONT_STYLE:"allAxTtFntStyle",ALL_AXIS_TITLE_FONT_SIZE:"allAxTtFntSz",ALL_AXIS_LABELS_FONT_SIZE:"allAxLbFntSz",ALL_AXIS_LABELS_FONT_FAMILY:"allAxLbFntFml",ALL_AXIS_LABELS_FONT_STYLE:"allAxLbFntStyle",ALL_AXIS_LABELS_FONT_COLOR:"allAxLbFntClr",ALL_AXIS_LABELS_ROTATION:"allAxLbRtt",ALL_AXIS_LABELS_SHOW:"allAxLbShw",X_AXIS_LINE_SHOW:"xAxLnShw",X_AXIS_LINE_COLOR:"xAxLnClr",X_AXIS_LINE_STYLE:"xAxLnStyle",X_AXIS_LINE_COMBINED_STYLE:"xAxLnCmbStyle",X_AXIS_LINE_THICKNESS:"xAxLnThk",X_AXIS_TITLE_SHOW:"xAxTtShw",X_AXIS_TITLE_CONTENT:"xAxTtCtt",X_AXIS_TITLE_FONT_COLOR:"xAxTtFntClr",X_AXIS_TITLE_FONT_FAMILY:"xAxTtFntFml",X_AXIS_TITLE_FONT_STYLE:"xAxTtFntStyle",X_AXIS_TITLE_FONT_SIZE:"xAxTtFntSz",X_AXIS_LABELS_FONT_SIZE:"xAxLbFntSz",X_AXIS_LABELS_FONT_FAMILY:"xAxLbFntFml",X_AXIS_LABELS_FONT_STYLE:"xAxLbFntStyle",X_AXIS_LABELS_FONT_COLOR:"xAxLbFntClr",X_AXIS_LABELS_ROTATION:"xAxLbRtt",X_AXIS_LABELS_SHOW:"xAxLbShw",Y_AXIS_LINE_SHOW:"yAxLnShw",Y_AXIS_LINE_COLOR:"yAxLnClr",Y_AXIS_LINE_STYLE:"yAxLnStyle",Y_AXIS_LINE_COMBINED_STYLE:"yAxLnCmbStyle",Y_AXIS_LINE_THICKNESS:"yAxLnThk",Y_AXIS_TITLE_SHOW:"yAxTtShw",Y_AXIS_TITLE_CONTENT:"yAxTtCtt",Y_AXIS_TITLE_FONT_COLOR:"yAxTtFntClr",Y_AXIS_TITLE_FONT_FAMILY:"yAxTtFntFml",Y_AXIS_TITLE_FONT_STYLE:"yAxTtFntStyle",Y_AXIS_TITLE_FONT_SIZE:"yAxTtFntSz",Y_AXIS_LABELS_FONT_SIZE:"yAxLbFntSz",Y_AXIS_LABELS_FONT_FAMILY:"yAxLbFntFml",Y_AXIS_LABELS_FONT_STYLE:"yAxLbFntStyle",Y_AXIS_LABELS_FONT_COLOR:"yAxLbFntClr",Y_AXIS_LABELS_ROTATION:"yAxLbRtt",Y_AXIS_LABELS_SHOW:"yAxLbShw",ALL_FILL_COLOR:"allFillClr",ALL_FILL_TRANSPARENCY:"allFillTrans",BG_COLOR:"bgFillClr",BG_FILL_EFFECT:"bgFillEff",BG_FILL_STYLE:"bgFillStyle",BG_FILL_TRANSPARENCY:"bgFillTrans",ROW_HEADER_FILL_COLOR:"rwHdrFillClr",ROW_HEADER_FILL_EFFECT:"rwHdrFillEff",ROW_HEADER_FILL_STYLE:"rwHdrFillStyle",ROW_HEADER_FILL_TRANSPARENCY:"rwHdrFillTrans",COLUMN_HEADER_FILL_COLOR:"colHdrFillClr",COLUMN_HEADER_FILL_EFFECT:"colHdrFillEff",COLUMN_HEADER_FILL_STYLE:"colHdrFillStyle",COLUMN_HEADER_FILL_TRANSPARENCY:"colHdrFillTrans",ALL_MATRIX_LINES_SHOW:"allMatrixLnShw",ALL_MATRIX_LINES_COLOR:"allMatrixLnClr",ALL_MATRIX_LINES_THICKNESS:"allMatrixLnThk",ALL_MATRIX_LINES_STYLE:"allMatrixLnStyle",ALL_MATRIX_LINES_COMBINED_STYLE:"allMatrixLnCmbStyle",V_MATRIX_LINES_SHOW:"vMatrixLnShw",V_MATRIX_LINES_COLOR:"vMatrixLnClr",V_MATRIX_LINES_THICKNESS:"vMatrixLnThk",V_MATRIX_LINES_STYLE:"vMatrixLnStyle",V_MATRIX_LINES_COMBINED_STYLE:"vMatrixLnCmbStyle",H_MATRIX_LINES_SHOW:"hMatrixLnShw",H_MATRIX_LINES_COLOR:"hMatrixLnClr",H_MATRIX_LINES_THICKNESS:"hMatrixLnThk",H_MATRIX_LINES_STYLE:"hMatrixLnStyle",H_MATRIX_LINES_COMBINED_STYLE:"hMatrixLnCmbStyle",OUTSIDE_BORDER_SHOW:"outBdrShw",OUTSIDE_BORDER_COLOR:"outBdrClr",OUTSIDE_BORDER_STYLE:"outBdrStyle",OUTSIDE_BORDER_THICKNESS:"outBdrThk",OUTSIDE_BORDER_COMBINED_STYLE:"outBdrCmbStyle",GRID_LINE_AUTO:"gridLineAuto",ALL_GRID_LINES_SHOW:"allGridLnShw",ALL_GRID_LINES_COLOR:"allGridLnClr",ALL_GRID_LINES_THICKNESS:"allGridLnThk",ALL_GRID_LINES_STYLE:"allGridLnStyle",ALL_GRID_LINES_COMBINED_STYLE:"allGridLnCmbStyle",AUTO_GRID_LINES_COLOR:"autoGridLnClr",AUTO_GRID_LINES_COMBINED_STYLE:"autoGridLnCmbStyle",MAJOR_GRID_LINES_SHOW:"majorGridLnShw",MAJOR_GRID_LINES_COLOR:"majorGridLnClr",MAJOR_GRID_LINES_THICKNESS:"majorGridLnThk",MAJOR_GRID_LINES_STYLE:"majorGridLnStyle",MAJOR_GRID_LINES_COMBINED_STYLE:"majorGridLnCmbStyle",MINOR_GRID_LINES_SHOW:"minerGridLnShw",MINER_GRID_LINES_COLOR:"minerGridLnClr",MINER_GRID_LINES_THICKNESS:"minerGridLnThk",MINER_GRID_LINES_STYLE:"minerGridLnStyle",MINER_GRID_LINES_COMBINED_STYLE:"minerGridLnCmbStyle",ALL_ROW_COLUMN_SHOW:"allRwColShw",COLUMN_TEXT_SHOW:"colTxtShw",ROW_TEXT_SHOW:"rwTxtShw",COLUMN_HEADER_SHOW:"colHdrShw",ROW_HEADER_SHOW:"rwHdrShw",COLUMN_VALUES_SHOW:"colVlShw",ROW_VALUES_SHOW:"rwVlShw",ALL_TEXT_FONT_COLOR:"allTxtFntClr",ALL_TEXT_FONT_SIZE:"allTxtFntSz",ALL_TEXT_FONT_FAMILY:"allTxtFntFml",ALL_TEXT_FONT_STYLE:"allTxtFntStyle",ALL_ROW_COLUMN_TEXT_FONT_COLOR:"allRwColTxtFntClr",ALL_ROW_COLUMN_TEXT_FONT_SIZE:"allRwColTxtFntSz",ALL_ROW_COLUMN_TEXT_FONT_FAMILY:"allRwColTxtFntFml",ALL_ROW_COLUMN_TEXT_FONT_STYLE:"allRwColTxtFntStyle",ALL_ROW_COLUMN_TEXT_ALIGNMENT_HORIZONTAL:"allRwColTxtAlignH",ALL_ROW_COLUMN_TEXT_ALIGNMENT_VERTICAL:"allRwColTxtAlignV",ROW_TEXT_TEXT_FONT_COLOR:"rwTxtTxtFntClr",ROW_TEXT_TEXT_FONT_SIZE:"rwTxtTxtFntSz",ROW_TEXT_TEXT_FONT_FAMILY:"rwTxtTxtFntFml",ROW_TEXT_TEXT_FONT_STYLE:"rwTxtTxtFntStyle",ROW_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"rwTxtTxtAlignH",ROW_TEXT_TEXT_ALIGNMENT_VERTICAL:"rwTxtTxtAlignV",COLUMN_TEXT_TEXT_FONT_COLOR:"colTxtTxtFntClr",COLUMN_TEXT_TEXT_FONT_SIZE:"colTxtTxtFntSz",COLUMN_TEXT_TEXT_FONT_FAMILY:"colTxtTxtFntFml",COLUMN_TEXT_TEXT_FONT_STYLE:"colTxtTxtFntStyle",COLUMN_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"colTxtTxtAlignH",COLUMN_TEXT_TEXT_ALIGNMENT_VERTICAL:"colTxtTxtAlignV",ROW_HEADER_TEXT_FONT_COLOR:"rwHdrTxtFntClr",ROW_HEADER_TEXT_FONT_SIZE:"rwHdrTxtFntSz",ROW_HEADER_TEXT_FONT_FAMILY:"rwHdrTxtFntFml",ROW_HEADER_TEXT_FONT_STYLE:"rwHdrTxtFntStyle",ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"rwHdrTxtAlignH",ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:"rwHdrTxtAlignV",COLUMN_HEADER_TEXT_FONT_COLOR:"colHdrTxtFntClr",COLUMN_HEADER_TEXT_FONT_SIZE:"colHdrTxtFntSz",COLUMN_HEADER_TEXT_FONT_FAMILY:"colHdrTxtFntFml",COLUMN_HEADER_TEXT_FONT_STYLE:"colHdrTxtFntStyle",COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"colHdrTxtAlignH",COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:"colHdrTxtAlignV",ROW_VAVLUE_TEXT_FONT_COLOR:"rwVlTxtFntClr",ROW_VAVLUE_TEXT_FONT_SIZE:"rwVlTxtFntSz",ROW_VAVLUE_TEXT_FONT_FAMILY:"rwVlTxtFntFml",ROW_VAVLUE_TEXT_FONT_STYLE:"rwVlTxtFntStyle",ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"rwVlTxtAlignH",ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"rwVlTxtAlignV",COLUMN_VAVLUE_TEXT_FONT_COLOR:"colVlTxtFntClr",COLUMN_VAVLUE_TEXT_FONT_SIZE:"colVlTxtFntSz",COLUMN_VAVLUE_TEXT_FONT_FAMILY:"colVlTxtFntFml",COLUMN_VAVLUE_TEXT_FONT_STYLE:"colVlTxtFntStyle",COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"colVlTxtAlignH",COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"colVlTxtAlignV",TITLE_FONT_COLOR:"ttlFntClr",TITLE_FONT_SIZE:"ttlFntSz",TITLE_FONT_FAMILY:"ttlFntFml",TITLE_FONT_STYLE:"ttlFntStyle",COLOR_SQUARE_COLOR:"clrSqrClr"};mstrmojo.gm.EnumAxis={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5};mstrmojo.gm.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gm.EnumSizeByType={SQUARE:1,CIRCLE:4};mstrmojo.gm.EnumTheme={DARK:0,LIGHT:1};mstrmojo.gm.EnumFitTo={CONTENT:1,PANEL:2,COMPACT:3};mstrmojo.gm.EnumAxisScale={GLOBAL:0,PERROWCOL:1,PERCELL:2,CUSTOM:3,DIFFERENT:4};mstrmojo.gm.EnumShape={GENERIC:-1,AREA:0,BAR:1,LINE:2,STEPLINE:3,CIRCLE:4,RECTANGLE:5,SQUARE:6,TICK:7,PIESLICE:8,POLYGON:9,PIE:10,RING:11,DEFAULT:12,BULLET:13};mstrmojo.gm.EnumSubtype={AUTO:1,ABSOLUTE:2,STACKED:3,CLUSTERED:4,PERCENT:5};mstrmojo.gm.EnumDataLabels={HIDE:1,SHOW_VALUE_ONLY:2,SHOW_TEXT_ONLY:3};mstrmojo.gm.EnumDataLabelPlacements={AUTOMATIC:1,GENERIC:2,RESERVED:3};mstrmojo.gm.EnumLegend={SHOW:0,HIDE:1,MINIMIZED:2};mstrmojo.gm.EnumLegendMode={RESTORED:1,MINIMIZED:2};mstrmojo.gm.EnumTextAlignH={LEFT:0,MIDDLE:1,RIGHT:2};mstrmojo.gm.EnumTextAlignV={TOP:0,MIDDLE:1,BOTTOM:2};mstrmojo.gm.EnumMaxSizeType={AUTO:1,MANUAL:2,AUTO_FIT:3};mstrmojo.gm.EnumMinSizeType={AUTO:1,MANUAL:2,PROPORTIONAL:3};mstrmojo.gm.EnumAxes={SHOW_BOTH:1,SHOW_NONE:2,SHOW_X:3,SHOW_Y:4};mstrmojo.gm.EnumMatrixLines={SHOW_ALL:1,SHOW_NONE:2,SHOW_HORIZONTAL:3,SHOW_VERTICAL:4};mstrmojo.gm.EnumGridLines={AUTO:1,SHOW:2,HIDE:3,SHOW_MAJOR_ONLY:4};mstrmojo.gm.LineMarkerShape={Circle:4,Square:1};mstrmojo.gm.ShapeFillType={Solid:0,Gradient:14,Pattern:3};mstrmojo.gm.ShapeFillEffect={None:1,Bevel:2};mstrmojo.gm.Enum3DGMapping={SizeType:"9999_1002",SizeValue:"9999_1003",lgdBgFillClr:"6_564",lgdBgFillStyle:"6_10002",lgdBgFillEff:"6_608",lgdFntSz:"9_603",lgdFntFml:"9_576",lgdFntStyle:"9_584",lgdFntClr:"9_574",LegendVisibleness:"9999_116",xAxShw:"9999_124",xAxTtCtt:"293_9999",xAxTtFntClr:"293_574",xAxTtFntFml:"293_576",xAxTtFntStyle:"293_584",xAxLbFntSz:"272_603",xAxLbFntFml:"272_576",xAxLbFntStyle:"272_584",yAxShw:"9999_125",yAxTtCtt:"299_9999",yAxTtFntClr:"299_574",yAxTtFntFml:"299_576",yAxTtFntStyle:"299_584",yAxLbFntSz:"296_603",yAxLbFntFml:"296_576",yAxLbFntStyle:"296_584",bgFillClr:"1_564",bgFillEff:"1_879",bgFillTrans:"1_608",outBdrClr:"1_588"};mstrmojo.gm.EnumRefLineModelType={MAX:1,MIN:2,AVG:3,MED:4,FIRST:5,LAST:6,CONST:7};mstrmojo.gm.EnumTrendLineModelType={BEST_FIT:256,LINEAR:257,LOG:258,EXP:259,POW:260,POLY:261};mstrmojo.gm.EnumTrendRefLevel={DssModelLevelReserved:0,DssModelLevelPerCell:1,DssModelLevelPerRow:2,DssModelLevelPerColumn:3,DssModelLevelPerPanel:4,DssModelLevelLastOne:5};mstrmojo.gm.EnumTimeRole={None:0,YearOfDecade:3083,QuarterOfYear:2826,MonthOfYear:2825,MonthOfQuarter:2569,WeekOfYear:2824,WeekOfQuarter:2568,WeekOfMonth:2312,DayOfYear:2823,DayOfQuarter:2567,DayOfMonth:2311,DayOfWeek:2055,HourOfDay:1798,MinuteOfDay:1797,MinuteOfHour:1541,SecondOfDay:1796,SecondOfHour:1540,SecondOfMinute:1284};mstrmojo.gm.EnumTrendRefModelLabels={DssModelLabelsReserved:-1,DssModelLabelsNone:0,DssModelLabelsType:1,DssModelLabelsMetric:2,DssModelLabelsValue:4};mstrmojo.gm.EnumTRFManipulations={AddTRLine:"141",RemoveTRLine:"142",UpdateTRLine:"143",UpdateForecastInfo:"144"};mstrmojo.gm.EnumShapeFormatStatus={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2};mstrmojo.chart.model.enums.EnumDSSGraphNumberFormatType={DssGraphNumberFormatDefault:-2,DssGraphNumberFormatFixed:0,DssGraphNumberFormatCurrency:1,DssGraphNumberFormatDate:2,DssGraphNumberFormatTime:3,DssGraphNumberFormatPercentage:4,DssGraphNumberFormatFraction:5,DssGraphNumberFormatScientific:6,DssGraphNumberFormatCustom:7,DssGraphNumberFormatSpecial:8,DssGraphNumberFormatGeneral:9,DssGraphNumberFormatFromGrid:10};mstrmojo.chart.enums.EnumGraphMatrixMajorGraphType={_UNDEFINED:0,_AREA:1,_BAR:2,_LINE:3,_SCATTER:4,_BUBBLE:5,_PIE:6,_GRID:7};mstrmojo.chart.enums.EnumOrientation={OR_HORIZONTAL:0,OR_VERTICAL:1};mstrmojo.chart.model.enums.EnumDSSGraphPictureFormat={DssGraphPictureJPEG:0,DssGraphPictureGIF:1,DssGraphPicturePNG:2,DssGraphPictureWMF:3,DssGraphPictureBMP:4};mstrmojo.VisEnum={ControlType:{BUTTON:"button",LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",SPLITTER:"splitter",GM_ROW_HEADER:"rh",GM_ROW_HEADER_TEXT:"rhtext",GM_ROW_HEADER_EXTRA:"rhext",GM_COL_HEADER:"ch",GM_COL_HEADER_TEXT:"chtext",GM_COL_HEADER_EXTRA:"chext",GM_YAXIS:"y",GM_XAXIS:"x",GM_YLABEL:"y-label",GM_XLABEL:"x-label",GM_ROW_HEADER_TITLE:"rht",GM_ROW_HEADER_TITLE_TEXT:"rhttext",GM_COL_HEADER_TITLE:"cht",GM_COL_HEADER_TITLE_TEXT:"chttext",GM_MINI_CHART:"chart",GM_TEXT_BODY:"text-body",GM_SHAPE:"shape",GM_MARKER:"marker",GM_SET_SHAPE:"set-shape",GM_YAXIS2:"y2",GM_XAXIS2:"x2",GM_TREND_LINE:"trendLine",GM_TREND_LINE_HOVER:"trendLineHover",GM_TREND_LINE_SELECT:"trendLineSelect",GM_REF_LINE:"referenceLine",GM_REF_LINE_HOVER:"referenceLineHover",GM_REL_LINE_SELECT:"referenceLineSelect",GM_HIGHLIGHT_BOX:"highlight-box",GM_AXIS_TEXT:"axis-text",GM_AXIS_WORD:"axis-word",GM_SVG_X_NUMERIC:"svg-x-numeric",GM_SVG_X_CATEGORY:"svg-x-category",GM_SVG_Y_NUMERIC:"svg-y-numeric",GM_SVG_Y_CATEGORY:"svg-y-category",GM_X_NUMERIC:"x-numeric",GM_X_CATEGORY:"x-category",GM_Y_NUMERIC:"y-numeric",GM_Y_CATEGORY:"y-category",GM_SVG_CHART:"svg-chart",GM_DATA_LABEL:"data-label",GM_YAXIS_LINE:"y-line",GM_XAXIS_LINE:"x-line",GM_YAXIS2_LINE:"y2-line",GM_XAXIS2_LINE:"x2-line",LGD_TITLE:"lgd-title",LGD_TEXT:"lgd-text",LGD_COLORBOX:"lgd-colorbox",LGD_COLORBOX_CTN:"lgd-colorbox-ctn",LGD_CANVAS:"lgd-canvas",LINE_CONTAINER:"line-ctn",GM_V_MATRIX_LINE:"v-line",GM_H_MATRIX_LINE:"h-line",GM_V_CHART_LINE:"v-ctline",GM_H_CHART_LINE:"h-ctline",GM_CHART_ROW:"ct-row",GM_CHART_COL:"ct-col",GM_H_GRID_LINE:"h-gline",GM_V_GRID_LINE:"v-gline",GM_H_MINOR_GRID_LINE:"h-gline-minor",GM_V_MINOR_GRID_LINE:"v-gline-minor",GM_ORIGIN_LINE:"originLine",GM_ORIGIN_LABEL:"origin-label",GM_ORIGIN_LINE_H:"origin-line-h",GM_ORIGIN_LINE_V:"origin-line-v",GM_ORIGIN_LABEL_H:"origin-label-h",GM_ORIGIN_LABEL_V:"origin-label-v",GM_DUMMY_A:"dummy-a",GM_V_EXTRA_LINE:"v-extra-line",GM_REF_LABEL:"ref-label",GM_RIGHT_BORDER:"border-r",GM_BOTTOM_BORDER:"border-b"},GMDropZoneID:{ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10},NETWORK_LOCAL_PROPS:{ZOOM_FACTOR:"zf",NODE_POSITION:"np"},NETWORK_PROPERTIES:{showLegend:"showLegend",showEdgeDirection:"showedgearrow",showTransition:"animatelayout",nodeSizeAggregation:"nodesizeaggfunc",minNodeSize:"minns",maxNodeSize:"maxns",themeType:"th",circleLabelFont:"BubFnt",modifiedNodes:"mn",layoutMode:"layout",legendPosition:"legendposition",dragMode:"mode",bubbleStyle:"bbs",propsCategory:"pc",lgdBgFillClr:"lgdBgFillClr",lgdBgFillTrans:"lgdBgFillTrans",lgdFntClr:"lgdFntClr",lgdFntSz:"lgdFntSz",lgdFntFml:"lgdFntFml",lgdFntStyle:"lgdFntStyle"},NETWORK_LAYOUT:{CIRCULAR:"circular",LINEAR:"linear",FORCE_DIRECTED:"forceDirected"},NETWORK_DRAG_MODE:{pan:0,select:1},NETWORK_AGGREGATION_METHOD:{"Count of":0,"Sum of":1,"Average of":2,"Min of":3,"Max of":4},NETWORK_MIN_NODE_SIZE_TYPE:{PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3},NETWORK_MAX_NODE_SIZE_TYPE:{AUTOMATIC:1,MANUAL:2},NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE:[0,0.2],HEATMAP_PROPERTIES:{showLegend:"showLegend",deleteButton:"ed",showMetricValues:"mv",labelSize:"lb",layout:"la",themeType:"th",headerType:"he",deletedList:"dl",refreshType:"rt",metricList:"ml",colorByType:"cbt",absoluteFixed:"abs",blendColor:"blc",background:"bg",legendBackground:"lbg",headerColors:"hcl",fonts:"fts",propsCategory:"pc",attrColorByOpacity:"acbo",metricColorByOpacity:"mcbo"},HEATMAP_LABEL_SIZE:{On:0,Off:1,Proportional:2},MAPS_PROPERTIES:{SHOW_LEGEND:"showLegend"},VIS_CARDLIMIT:{GRID:250,NON_GRID:8000},GMLegendDataType:{COLOR_BY:1,SIZE_BY:2},GMLegendFormatingPropertyTag:{LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",COLOR_SQUARE_COLOR:"clrSqrClr"},LegendPropertyTag:{LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr"},EnumLegendMode:{RESTORED:1,MINIMIZED:2},EnumColorRankMode:{INVALID:-1,VALUE:0,TOP:1,BOTTOM:2,TOP_PERCENT:3,BOTTOM_PERCENT:4},FormNameDisplayType:{OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4},SERVER_JSON_ERROR_TYPE:{EMPTY_DATA:0,NO_DATASET:1,AE_ERROR:2,NO_TEMPLATE_UNIT:3},NETWORK_CIRCLE_BORDER_WIDTH:8,IMAGELAYOUT_PROPERTIES:{DISPLAY_MODE:"mt",MAX_SIZE_TYPE:"ty",MAX_SIZE_VALUE:"val",MIN_SIZE_TYPE:"mst",MIN_SIZE_VALUE:"msv",MAP_FILE_PATH:"mf",SHAPE_FILL_OPC_PER:"shapeFillTrans",SHAPE_FILL_COLOR:"shapeClr",SHAPE_BORDER_STYLE:"shapeBorderCmbStyle",SHAPE_BORDER_COLOR:"shapeBorderClr",DATA_LABEL_SWITCH:"dls",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",BLANK_MAP_BORDER_STYLE:"blankMapBorderStyle",BLANK_MAP_BORDER_COLOR:"blankMapBorderClr",BLANK_MAP_COLOR:"blankMapClr",DEFAULT_MAP_COLOR:"dftMapClr",DEFAULT_BUBBLE_COLOR:"dftBubbleClr",DEFAULT_MAP_BORDER_COLOR:"dftMapBorderClr",DEFAULT_BUBBLE_BORDER_COLOR:"dftBubbleBorderClr",LEGEND_FONT_SIZE:"lgFntSz",LEGEND_FONT_FAMILY:"lgFntFml",LEGEND_FONT_COLOR:"lgFntClr",LEGEND_FONT_STYLE:"lgFntStyle",LEGEND_BACKGROUND_COLOR:"lgBgClr",LEGEND_OPC_PER:"lgBgFillTrans",LEGEND_POSITION:"lgPos",LEGEND_SHOW:"lgShow",LEGEND_MODE:"lgMode",LEGEND_SCALE:"lgScale",H_MATRIX_LINE_COLOR:"hMatrixLnClr",V_MATRIX_LINE_COLOR:"vMatrixLnClr",ALL_MATRIX_LINE_COLOR:"allMatrixLnClr",H_MATRIX_LINE_STYLE:"hMatrixLnCmbStyle",V_MATRIX_LINE_STYLE:"vMatrixLnCmbStyle",ALL_MATRIX_LINE_STYLE:"allMatrixLnCmbStyle"}};mstrmojo.chart.enums.EnumDSSExtraGraphObject={DssGraphO1Interlaced:20000,DssGraphO2Interlaced:20001,DssGraphX1Interlaced:20002,DssGraphY1Interlaced:20003,DssGraphY2Interlaced:20004,DssGraphY3Interlaced:20005,DssGraphY4Interlaced:20006,DssGraphZInterlaced:20007,DssGraphQualityBand:20008,DssGraphQualityBandTitle:20009,DssGraphY1SecondUserLine:21000,DssGraphWarningMessage:21001,DssGraphO1BracketLine:21002,DssGraphBaseLayer:21004,DssGraphMiddleWallLayer:21005,DssGraphPlotLayer:21006,DssGraphRendererLayer:21007,DssGraphBanner:22005};mstrmojo.chart.enums.EnumChartStyle={_general:0,_cluster:1,_absolute:2,_stacked:3,_percent:4,_ring:5,_bullet:6,_udf:100};mstrmojo.chart.enums.EnumBoxStyle={BS_NOFRAME:0,BS_SINGLE_LINE_FRAME:1,BS_DOUBLE_LINE_FRAME:2,BS_EXTRUDE:3,BS_BEVELED_FRAME:4,BS_REVERSE_BEVELED_FRAME:5};mstrmojo.chart.enums.EnumMajorGraphType={MGT_AREA:0,MGT_BAR:1,MGT_LINE:2,MGT_PARETO:3};mstrmojo.chart.enums.EnumDSSGraphObjectManager={DssChartManager:20000,DssPlotManager:20001,DssPlot:20002,DssLegend:20003,DssAreaSeriesRenderer:20004,DssBarSeriesRenderer:20005,DssLineSeriesRenderer:20006,DssStepLineSeriesRenderer:20007};mstrmojo.chart.model.enums.EnumDSSObjectType={DssTypeUnknown:-1,DssTypeReserved:0,DssTypeGeneric:5,DssTypeFormatBAD:46,DssTypeFilter:1,DssTypeTemplate:2,DssTypeReportDefinition:3,DssTypeMetric:4,DssTypeStyle:6,DssTypeAggMetric:7,DssTypeFolder:8,DssTypeDevice:9,DssTypePrompt:10,DssTypeFunction:11,DssTypeAttribute:12,DssTypeFact:13,DssTypeDimension:14,DssTypeTable:15,DssTypeDatamartReport:16,DssTypeFactGroup:17,DssTypeShortcut:18,DssTypeResolution:19,DssTypeMonitor:20,DssTypeAttributeForm:21,DssTypeSchema:22,DssTypeFormat:23,DssTypeCatalog:24,DssTypeCatalogDefn:25,DssTypeColumn:26,DssTypePropertyGroup:27,DssTypePropertySet:28,DssTypeDBRole:29,DssTypeDBLogin:30,DssTypeDBConnection:31,DssTypeProject:32,DssTypeServerDef:33,DssTypeUser:34,DssTypeTransmitter:35,DssTypeConfiguration:36,DssTypeRequest:37,DssTypeScript:38,DssTypeSearch:39,DssTypeSearchFolder:40,DssTypeDatamart:41,DssTypeFunctionPackageDefinition:42,DssTypeRole:43,DssTypeSecurityRole:44,DssTypeLocale:45,DssTypeConsolidation:47,DssTypeConsolidationElement:48,DssTypeScheduleEvent:49,DssTypeScheduleObject:50,DssTypeScheduleTrigger:51,DssTypeLink:52,DssTypeDbTable:53,DssTypeTableSource:54,DssTypeDocumentDefinition:55,DssTypeDrillMap:56,DssTypeDBMS:57,DssTypeMDSecurityFilter:58,DssTypePromptAnswer:59,DssTypePromptAnswers:60,DssTypeGraphStyle:61,DssTypeChangeJournalSearch:62,DssTypeNCSObjects:255,DssTypeReservedLastOne:63};(function(){function Q(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.lastChild)?U.lastChild:F(U,S);return T?D(T,S):null;}}function F(S,R){return(S===R)?null:(S.previousSibling||F(S.parentNode,R));}function D(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.lastChild){return D(S.lastChild);}else{return D(F(S,R));}}}function I(R){return R.textContent||R.nodeValue||R.innerText;}function M(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.firstChild)?U.firstChild:B(U,S);return T?E(T,S):null;}}function B(S,R){return(S===R)?null:(S.nextSibling||B(S.parentNode,R));}function E(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.firstChild){return E(S.firstChild);}else{return E(B(S,R));}}}mstrmojo.range=mstrmojo.provide("mstrmojo.range",{EDGE:{EDGE_BEGIN:1,EDGE_END:2,EDGE_MIDDLE:-1},getEdgeInfo:function P(T,U){var R=0,S;if(T.nodeType===1){if(window.getSelection){S=document.createRange();S.selectNode(T);R=S.toString().length;}else{S=document.body.createTextRange();S.moveToElementText(T);R=S.text.length;}}else{R=I(T).length;}return U===R?this.EDGE.EDGE_END:(U===0?this.EDGE.EDGE_BEGIN:this.EDGE.EDGE_MIDDLE);},collapseOnNode:function K(U,S){if(!U.offsetParent){return ;}var T=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(U);R.collapse(S);T.removeAllRanges();T.addRange(R);}else{R.moveToElementText(U);R.collapse(S);R.select();}},collapseOnTextNode:function L(U,V){var T=this.getSelection(),S=this.getRange();if(window.getSelection){var R=M(U,true);S.setStart(R,V);S.collapse(true);T.removeAllRanges();T.addRange(S);}else{S.moveToElementText(U);S.collapse(true);S.move("character",V);S.select();}},collapseOnTextNodeIE:function C(S,T){var U=M(S,true),R;while(U!==null){R=I(U).length;if(R>=T){this.collapseOnTextNode(U,T);break;}else{T-=R;U=M(U,false);}}},getRangeInfo:function J(X,e){var Z=null,j,c=this.getRange(),b;if(X&&X===c.startContainer){var g=c.startContainer.firstChild,U=g&&g.firstChild,d=U&&U.firstChild;if(d){c.setStart(d,c.startOffset);c.setEnd(d,c.endOffset);}}if(window.getSelection){var W=function(l,n,m){var k=l.cloneRange();k.collapse(m);k.setStartBefore(n);return k.toString().length;},S=c.startContainer,f=c.startOffset;if(S.nodeType===1){f=W(c,S,true);}Z={collapsed:c.collapsed,startContainer:S,startOffset:e?e.startOffset:f};if(!c.collapsed){var V=c.endContainer,R=c.endOffset;if(V.nodeType===1){R=W(c,V,false);}Z.endContainer=V;Z.endOffset=R;}Z.range=c;}else{var i,a,Y=function(n,o){var m=n.duplicate(),k=document.body.createTextRange(),l;m.collapse(o);l=m.parentElement();k.moveToElementText(l);k.setEndPoint("EndToStart",m);return{container:l,offset:k.text.length};},h=Y(c,true),T;Z={collapsed:(c.compareEndPoints("StartToEnd",c)===0),startContainer:h.container,startOffset:h.offset};if(!Z.collapsed){T=Y(c,false);Z.endContainer=T.container;Z.endOffset=T.offset;}}return Z;},collapse:function O(S){if(window.getSelection){var T=this.getSelection();if(S){T.collapseToStart();}else{T.collapseToEnd();}}else{var R=this.getRange();R.collapse(S);R.select();}},selectSingleNode:function H(T){var S=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(T);S.removeAllRanges();S.addRange(R);}else{R.moveToElementText(T);R.select();}},selectMultipleNodes:function N(W,S,X,U){var V=this.getSelection(),T=this.getRange();if(window.getSelection){T.setStart(W,S);T.setEnd(X,U);V.removeAllRanges();V.addRange(T);}else{W=(W.nodeType===3)?W.parentNode:W;T.moveToElementText(W);T.move("character",S);X=(X.nodeType===3)?X.parentNode:X;var R=document.body.createTextRange();R.moveToElementText(X);R.move("character",U);T.setEndPoint("EndToStart",R);T.select();}},getSelection:function G(){if(window.getSelection){return window.getSelection();}else{return document.selection;}},getRange:function A(){if(window.getSelection){selection=window.getSelection();if(selection.rangeCount>0){return selection.getRangeAt(0);}else{return document.createRange();}}else{return document.selection.createRange();}}});}());mstrmojo.chart.model.enums.EnumDSSGraphProperty={DssGraphTextContent:9999,DssGraphContent:9999,DssGraphPropertyReserved:0,DssGraphAutoFitO1:4,DssGraphAutoFitO2:5,DssGraphAutoFitX:6,DssGraphAutoFitY1:7,DssGraphAutoFitY2:8,DssGraphGroupSpacing:10,DssGraphRiserWidth:11,DssGraphColorBySeries:12,DssGraphCurveColorAsSeries:13,DssGraphSDMOVAFactor:14,DssGraph2DAngle:18,DssGraph2DDepth:20,DssGraphDepthMode:21,DssGraph2ScaleDirectionX:22,DssGraph2ScaleDirectionY1:23,DssGraph2ScaleDirectionY2:24,DssGraph2ExcludeZeroX:25,DssGraph2ExcludeZeroY1:26,DssGraph2ExcludeZeroY2:27,DssGraphFormatDataTextX:28,DssGraphFormatDataTextY1:29,DssGraphFormatDataTextY2:30,DssGraphFormatX:33,DssGraphFormatY1:34,DssGraphFormatY2:35,DssGraphFormatZ:36,DssGraphGridLineO1:37,DssGraphGridLineO2:38,DssGraphGridLineX:39,DssGraphGridLineY1:40,DssGraphGridLineY2:41,DssGraphLabelModeO1:48,DssGraphLabelModeO2:49,DssGraphLegendLocation:52,DssGraphTitleXLocation:54,DssGraphTitleY1Location:55,DssGraphTitleY2Location:56,DssGraph2LogScaleX:57,DssGraph2LogScaleY1:58,DssGraph2LogScaleY2:59,DssGraphMarkerShape:60,DssGraphMarkerSize:61,DssGraph2DPlaceX:65,DssGraph2DPlaceY1:66,DssGraph2DPlaceY2:67,DssGraphConnectLine:68,DssGraphShowStepLine:70,DssGraph2ScaleEndX:74,DssGraph2ScaleEndY1:75,DssGraph2ScaleEndY2:76,DssGraph2DScaleFreqO1:87,DssGraph2DScaleFreqO2:88,DssGraph2DScaleFreqX:89,DssGraph2DScaleFreqY1:90,DssGraph2DScaleFreqY2:91,DssGraphScaleX:92,DssGraphScaleY1:93,DssGraphScaleY2:94,DssGraphShowSDDataLineType:96,DssGraphSDRiserType:97,DssGraphShowSDLine:98,DssGraphShowSDCurve:99,DssGraphShowSDLinrCorr:101,DssGraphShowSDLinrExp:102,DssGraphShowSDLinrFormula:103,DssGraphShowSDLinrLine:104,DssGraphShowSDLinrLog:105,DssGraphShowSDLinrNatLog:106,DssGraphShowSDLinrNPoly:107,DssGraphSDPolyFactor:108,DssGraphShowSDMeanLine:109,DssGraphShowSDMOVALine:110,DssGraphShowSDSTDDLine:111,DssGraphShowDataText:113,DssGraphShowDivBiPolar:114,DssGraphShowErrorBar:115,DssGraphShowLegendText:116,DssGraphShow2DO1Label:117,DssGraphShow2DO1:-117,DssGraphShow2DO2:118,DssGraphOffScaleTypeX:119,DssGraphOffScaleTypeY1:120,DssGraphOffScaleTypeY2:121,DssGraphShowQuadrants:122,DssGraphShowRiserShadows:123,DssGraphShow2DXTitle:124,DssGraphShow2DY1Title:125,DssGraphShow2DY2Title:126,DssGraphShow2DXLabel:127,DssGraphShow2DX:-127,DssGraphShow2DY1Label:128,DssGraphShow2DY1:-128,DssGraphShow2DY2Label:129,DssGraphShow2DY2:-129,DssGraphShowZeroLineX:130,DssGraphShowZeroLineY1:131,DssGraphShowZeroLineY2:132,DssGraph2DSideO1:133,DssGraph2DSideO2:134,DssGraph2DSideX:135,DssGraph2DSideY1:136,DssGraph2DSideY2:137,DssGraph2DSDSplitY:140,DssGraphStaggerO1:142,DssGraphStaggerO2:143,DssGraphStaggerX:144,DssGraphStaggerY1:145,DssGraphStaggerY2:146,DssGraphUniformBorders:148,DssGraphPieDepthValue:192,DssGraphPieHoleSizeValue:198,DssGraphPieInset:200,DssGraphPiesPerRowValue:201,DssGraphPieRotationValue:202,DssGraphShowFeeler:204,DssGraphShowLBLFeelerLabel:205,DssGraphShowLBLFeeler:-205,DssGraphShowLBLPie:206,DssGraphShowLBLRing:207,DssGraphDeleteSlice:208,DssGraphDetachSlice:209,DssGraphPieRestore:210,DssGraphPieTiltValue:211,DssGraphPieTiltOn:212,DssGraphShowPolarCoordinateAxis:215,DssGraphShowPolarConnectLines:218,DssGraphStockDataValueType:222,DssGraphShowBubbleGrid:245,DssGraphSDShowDataText:247,DssGraphShowTitleSeries:248,DssGraphConnectStackBars:249,DssGraphLegendBox:250,DssGraphLinkColors:260,DssGraph3DCustomView:265,DssGraph3DGridFloor:277,DssGraph3DGridLWall:278,DssGraph3DGridRiser:279,DssGraph3DGridRWall:280,DssGraph3DColTitleLocation:285,DssGraph3DLYTitleLocation:287,DssGraph3DRowTitleLocation:288,DssGraph3DRYTitleLocation:289,DssGraph3DScalefreqX:299,DssGraph3DScalefreqY:300,DssGraph3DScalefreqZ:301,DssGraphShow3DScatterLine:308,DssGraphShow3DLineToLWall:309,DssGraphShow3DLineToFloor:310,DssGraphShow3DLineToRWall:311,DssGraphSD3DRiserType:312,DssGraphShow3DShowDataLabelsBox:313,DssGraph3DOffScaleTypeX:314,DssGraph3DOffScaleTypeY:315,DssGraph3DOffScaleTypeZ:316,DssGraphShow3DCHeader:318,DssGraphShow3DColTitle:319,DssGraph3DShowDataText:320,DssGraphShow3DLNumber:321,DssGraphShow3DLYTitle:322,DssGraphShow3DRNumber:323,DssGraphShow3DRYTitle:324,DssGraphShow3DRHeader:325,DssGraphShow3DRowTitle:326,DssGraphShow3DFloor:327,DssGraphShow3DLegend:328,DssGraphShow3DLWall:329,DssGraphShow3DRWall:330,DssGraph3DViewStruct:337,DssGraphACMColorModel:549,DssGraphLegendItems:554,DssGraphSeriesColor:556,DssGraphReverseGroup:558,DssGraphReverseSeries:559,DssGraphSeriesByColumn:560,DssGraphAreaBackColor:561,DssGraphAreaTransparency:563,DssGraphAreaColor:564,DssGraphAreaPattern:566,DssGraphAreaSFX:567,DssGraphFontAlign:570,DssGraphFontTransparency:573,DssGraphFontColor:574,DssGraphFontName:576,DssGraphFontRotation:578,DssGraphVirtualFontSize:583,DssGraphFontStyle:584,DssGraphType:585,DssGraphLineTransparency:587,DssGraphLineColor:588,DssGraphLinePattern:589,DssGraphVirtualLineWidth:591,DssGraphFootnoteLocation:592,DssGraphFrameLocation:593,DssGraphSubTitleLocation:594,DssGraphTitleLocation:595,DssGraphShowfootnote:596,DssGraphShowSubtitle:597,DssGraphShowTitle:598,DssGraphFontBox:601,DssGraphFontSize:603,DssGraphLockFontSize:604,DssGraphLineWidth:605,DssGraphAreaAlpha:608,DssGraphLineAlpha:609,DssGraphFontAlpha:610,DssGraphAreaCustomBevelEffect:612,DssGraphFormatDataTextAdv:616,DssGraphFormatXAdv:618,DssGraphFormatY1Adv:619,DssGraphFormatY2Adv:620,DssGraphFormatZAdv:621,DssGraphMiddleValue:630,DssGraphSplitYPosition:631,DssGraphAxisShowUserLine:632,DssGraphAxisUserLineValue:633,DssGraphAxisUserLineAxis:634,DssGraphMarkerLayout:637,DssGraphPieDataValueLoc:638,DssGraphPieDataLabelLoc:639,DssGraph2DOrdSpaceMode:642,DssGraphLegendLock:644,DssGraphGridStepY1:645,DssGraphGridStepY2:646,DssGraphGridStepX:647,DssGraphDataTextShowConnectLine:652,DssGraphGridLineZ:658,DssGraphScaleZ:659,DssGraphStaggerZ:660,DssGraph2ScaleEndZ:662,DssGraph2ExcludeZeroZ:663,DssGraph2ScaleDirectionZ:664,DssGraphGridStepZ:665,DssGraphGaugeInfo:668,DssGraphGaugeFancyBox:669,DssGraphSDMarkerSize:671,DssGraphSDMarkerShape:683,DssGraphMetric1:690,DssGraphMetric2:691,DssGraphStockStyle:692,DssGraph2ScaleDirectionY3:693,DssGraph2ExcludeZeroY3:694,DssGraphGridLineY3:697,DssGraphFormatY3Adv:699,DssGraphGridStepY3:701,DssGraphOffScaleTypeY3:702,DssGraphShow2DY3:704,DssGraph2DSideY3:706,DssGraphStaggerY3:707,DssGraph2DPlaceY3:709,DssGraph2ScaleEndY3:710,DssGraph2DScaleFreqY3:713,DssGraphScaleY3:714,DssGraph2ScaleDirectionY4:715,DssGraph2ExcludeZeroY4:716,DssGraphGridLineY4:719,DssGraphFormatY4Adv:721,DssGraphGridStepY4:723,DssGraphOffScaleTypeY4:724,DssGraphShow2DY4:726,DssGraph2DSideY4:728,DssGraphStaggerY4:729,DssGraph2DPlaceY4:731,DssGraph2ScaleEndY4:732,DssGraph2DScaleFreqY4:735,DssGraphScaleY4:736,DssGraphSpiderLines:739,DssGraphPolarStartAngle:740,DssGraphMetric3:742,DssGraphRadarCircularDataLines:782,DssGraphRemoteAxis:784,DssGraphConnectFirstLast:790,DssGraphGaugeShowAxisLabelsOutside:791,DssGraphGaugeShowNeedle:792,DssGraphTailShape:793,DssGraphPieForceRound:794,DssGraphGaugeStyleValue:795,DssGraphGaugeBorderStyleValue:796,DssGraphGaugeBorderThicknessValue:797,DssGraphGaugeRangeThicknessValue:798,DssGraphGaugeRangeStartAngleValue:799,DssGraphGaugeRangeStopAngleValue:800,DssGraphGaugeNeedleStyleValue:801,DssGraphCurvedLines:804,DssGraphAreaBevelEffect:879,DssGraphFontAntiAlias:881,DssGraphFormatDataTextY3:695,DssGraphFormatDataTextY4:717,DssGraphColorPalette:10000,DssGraphOriContent:10001,DssGraphFillEffect:10002,DssGraphGradient:10003,DssGraphSDShowToolTip:10004,DssGraphSDToolTip:10005,DssGraphSDRegressionType:10006,DssGraph2LogScale:10007,DssGraphManualMajor:10008,DssGraphManualMinor:10009,DssGraph2ScaleDirection:10010,DssGraphShow2DAxisLine:10011,DssGraph2ExcludeZero:10012,DssGraph2ScaleUseMax:10013,DssGraph2ScaleUseMin:10014,DssGraph2ScaleMax:10015,DssGraph2ScaleMin:10016,DssGraphShow2DAxisLabels:10017,DssGraph2ScaleEndMax:10018,DssGraph2ScaleEndMin:10019,DssGraphShow2DAxisMajor:10020,DssGraphShow2DAxisMinor:10021,DssGraph2DSide:10022,DssGraphStyleMajor:10023,DssGraphStyleMinor:10024,DssGraphCountMajor:10025,DssGraphCountMinor:10026,DssGraphShowTotalValue:10027,DssGraph2DPie:10028,DssGraphShowDataValue:10029,DssGraphShowDVPercent:10030,DssGraphShowDataLabel:10031,DssGraphShowPieLabelOnSide:10032,DssGraphShowMarker:10033,DssGraphShowMetric1:10034,DssGraphShowMetric2:10035,DssGraphShowMetric3:10036,DssGraphMetric1Style:10037,DssGraphMetric2Style:10038,DssGraphMetric3Style:10039,DssGraphShowLine:10040,DssGraphShowToolTip:10041,DssGraphToolTip:10042,DssGraphAxisAutoFit:10043,DssGraphAxisStagger:10044,DssGraphAxisScaleFreq:10045,DssGraphMetric1Value:10046,DssGraphMetric2Value:10047,DssGraphMetric3Value:10048,DssGraph2AxisFormatText:10049,DssGraph2AxisFormatDataText:10050,DssGraphDPI:10051,DssGraphDocSize:10052,DssGraphAutoArrange:10053,DssGraph2DSplitYAutomatic:10054,DssGraphHistogramRangeMin:10055,DssGraphHistogramRangeMax:10056,DssGraphHistogramBuckets:10057,DssGraphGaugeSAngle:10058,DssGraphGaugeEAngle:10059,DssGraphGaugeThickness:10060,DssGraphGauge1Show:10061,DssGraphGauge1Min:10062,DssGraphGauge1Max:10063,DssGraphGauge2Show:10064,DssGraphGauge2Min:10065,DssGraphGauge2Max:10066,DssGraphGauge3Show:10067,DssGraphGauge3Min:10068,DssGraphGauge3Max:10069,DssGraphGauge4Show:10070,DssGraphGauge4Min:10071,DssGraphGauge4Max:10072,DssGraphGauge5Show:10073,DssGraphGauge5Min:10074,DssGraphGauge5Max:10075,DssGraphAxisDataTextPlace:10076,DssGraphAxisNumberFormat:10077,DssGraphAxisDataNumberFormat:10078,DssGraphAxisHasErrorBar:10079,DssGraphAxisHasMiddleValue:10080,DssGraphHeight:10081,DssGraphWidth:10082,DssGraphPicture:10083,DssGraph3DTurnXCounterClockwise:10084,DssGraph3DTurnYCounterClockwise:10085,DssGraph3DTurnZCounterClockwise:10086,DssGraph3DTurnXClockwise:10087,DssGraph3DTurnYClockwise:10088,DssGraph3DTurnZClockwise:10089,DssGraph3DMoveXTowardsOrigin:10090,DssGraph3DMoveYTowardsOrigin:10091,DssGraph3DMoveZTowardsOrigin:10092,DssGraph3DMoveXAwayFromOrigin:10093,DssGraph3DMoveYAwayFromOrigin:10094,DssGraph3DMoveZAwayFromOrigin:10095,DssGraph3DDecreaseCubeX:10096,DssGraph3DDecreaseCubeY:10097,DssGraph3DDecreaseCubeZ:10098,DssGraph3DIncreaseCubeX:10099,DssGraph3DIncreaseCubeY:10100,DssGraph3DIncreaseCubeZ:10101,DssGraph3DDecreaseWallX:10102,DssGraph3DDecreaseWallY:10103,DssGraph3DDecreaseWallZ:10104,DssGraph3DIncreaseWallX:10105,DssGraph3DIncreaseWallY:10106,DssGraph3DIncreaseWallZ:10107,DssGraph3DPanXLeft:10108,DssGraph3DPanYUp:10109,DssGraph3DRelative:10110,DssGraph3DPanXRight:10111,DssGraph3DPanYDown:10112,DssGraph3DAbsolute:10113,DssGraph3DZoomIn:10114,DssGraph3DIncreasePerspectiveDistortion:10115,DssGraph3DStepSize:10116,DssGraph3DZoomOut:10117,DssGraph3DDecreasePerspectiveDistortion:10118,DssGraph3DInitMatrix:10119,DssGraphGaugeQBShow:10120,DssGraphGaugeQBStart:10121,DssGraphGaugeQBStop:10122,DssGraphEnhancedSeriesEffect:10123,DssGraphLocale:10124,DssGraph3DViewStructName:10125,DssGraphLabelsDistance:10126,DssGraphLegendDetails:10127,DssGraphDefaultsInitialized:10128,DssGraphShow3DAxisMajor:10129,DssGraphGradientColorMode:10130,DssGraphLegendDetailsNEW:10131,DssGraphFrameLocationNEW:10132,DssGraph3DColTitleLocationNEW:10133,DssGraph3DRowTitleLocationNEW:10134,DssGraphLabelsDistanceNEW:10135,DssGraphDocSizeNEW:10136,DssGraphUseManualHistogramBuckets:10137,DssGraphFontSize100:10138,DssGraphUseSpecialSeries:10140,DssGraphIsOnlyAdditionalMetrics:10170};mstrmojo.chart.model.enums.EnumDSSGraphFillEffect={DssGraphFillSimple:0,DssGraphFillGenericGradient:1,DssGraphFillWash:3,DssGraphFillPicture:4,DssGraphFillUserPicture:6,DssGraphFillBrush:13,DssGraphFillAdvancedWash:14,DssGraphFillPattern:101};mstrmojo.chart.enums.EnumAxisDirection={AD_X:0,AD_Y:1,AD_Z:2};mstrmojo.chart.enums.EnumCategoryAxisOidItem={OID_LABEL:0,OID_MAJOR_TICKS:1,OID_MINOR_TICKS:2};mstrmojo.chart.enums.EnumGraphMatrixThemeType={UNDEFINED:-1,_black:0,_white:1};mstrmojo.chart.model.enums.EnumDSSExtraGraphProperty={DssGraphOffScaleType:10139,DssGraphTypeRingPie:20015,DssGraphPieRadius:20016,DssGraphPieSliceQuadrant:20017,DssGraphUseInterlacedGrid:20018,DssGraphUseSmartBreak:20019,DssGraphSmartBreakStyle:20020,DssGraphSmartBreakStart:20021,DssGraphSmartBreakEnd:20022,DssGraphSmartBreakUsePercent:20023,DssGraphUseQualityBand:20024,DssGraphQualityBandUsePercent:20025,DssGraphQualityBandPosition:20026,DssGraphQualityBandShowTitle:20027,DssGraphUseChartArea:20028,DssGraphChartAreaNumber:20029,DssGraphChartAreaOrientation:20030,DssGraphChartAreaSpacePercentage:20031,DssGraphChartAreaDestination:20032,DssGraphChartAreaShowTitle:20033,DssGraphGaugeBorderClipped:20034,DssGraphCumulativePercentLabel:20035,DssGraphNewUseSmartLabels:20053,DssGraphIsIPhoneCharting:21000,DssGraphUseGlobalAutoScale:21001,DssGraphLegendItemText:21023,DssGraphAxisShowSecondUserLine:21024,DssGraphAxisSecondUserLineValue:21025,DssGraphCategoryLabelAreaHeight:21026,DssGraphGradientEndAlpha:21027,DssTimeSeriesYAxisLabelMinSpan:21076,DssTimeSeriesYAxisExtendHeight:21077,DssGraphMatrixUsePerfectPadding:21120,DssGraphMatrixIsValueAxisForPercentChart:21136,DssGraphMatrixDataLabelEnabled:21153,DSSGraphMatrixDataLabelRotated:21154,DssGraphMatrixInitedDataLabelRotation:21155,DSSGraphMatrixAxisAdjusted:21156,DSSGraphMatrixUseCustomMinMax:21157,DssGraphInfoReserved:30000,DssGraphInfoMajorType:30007,DssGraphInfoMinorType:30008,DssGraphInfoAutosizeHorizontal:30011,DssGraphInfoAutosizeVertical:30012,DssGraphInfoSeriesByColumn:30013,DssGraphInfoIncludeSubtotal:30014,DssGraphInfoSuppressLastLevel:30016,DssGraphInfoRecalculateChartFrame:30026,DssGraphInfoRecalculateLegend:30027,DssGraphInfoNestedLabel:30038,DssGraphInfoNestedLabelBracket:30039,DssGraphInfoUseMaxCategoriesAsMin:30048,DssGraphInfoUseZerosForGraphNulls:30049};mstrmojo.chart.enums.EnumInstructionName={JSONInsUndefined:0,JSONInsSaveState:1,JSONInsRestoreState:2,JSONInsClip:11,JSONInsScale:12,JSONInsRotate:13,JSONInsNewPath:101,JSONInsClosePath:102,JSONInsMoveTo:111,JSONInsLineTo:112,JSONInsBezierCurveTo:113,JSONInsAddRect:121,JSONInsAddArc:122,JSONInsAddNeedle:131,JSONInsAddGaugeMarker:132,JSONInsAddString:201,JSONInsSetLineDash:301,JSONInsSetLineWidth:302,JSONInsSetLineJoin:303,JSONInsSetFontSize:311,JSONInsSetRGBAFillColor:321,JSONInsSetRGBAStrokeColor:322,JSONInsFillPath:401,JSONInsStrokePath:402,JSONInsFillSimple:501,JSONInsFillPattern:502,JSONInsFillGradient:503,JSONInsFillEdgeType:511,JSONInsFillDonutOrSphere:512,JSONInsFillRadientGradient:513,JSONInsFillDonut2Rect:514,JSONInsFillBorderMetallic:515,JSONInsMakeDarker:521,JSONInsRestoreColor:522,JSONInsApplyLineFormat:601,JSONInsAddFormatedText:701,JSONInsApplyBeveledFrameToRectangle:801};mstrmojo.chart.model.enums.EnumDSSGraphGradientType={DssGraphGradientReserved:0,DssGraphGradientCircular:9,DssGraphGradientRectangular:10,DssGraphGradientLinear:14};mstrmojo.chart.model.enums.EnumDSSGraphType={DssGraphTypeReserved:0,DssGraphTypeVertical_Area_Absolute:1,DssGraphTypeVertical_Area_Stacked:2,DssGraphTypeVertical_Area_BiPolar_Absolute:3,DssGraphTypeVertical_Area_BiPolar_Stacked:4,DssGraphTypeVertical_Area_DualAxis_Absolute:5,DssGraphTypeVertical_Area_DualAxis_Stacked:6,DssGraphTypeVertical_Area_Percent:7,DssGraphTypeHorizontal_Area_Absolute:8,DssGraphTypeHorizontal_Area_Stacked:9,DssGraphTypeHorizontal_Area_BiPolar_Absolute:10,DssGraphTypeHorizontal_Area_BiPolar_Stacked:11,DssGraphTypeHorizontal_Area_DualAxis_Absolute:12,DssGraphTypeHorizontal_Area_DualAxis_Stacked:13,DssGraphTypeHorizontal_Area_Percent:14,DssGraphTypeVertical_Bar_Side_by_Side:15,DssGraphTypeVertical_Bar_Stacked:16,DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:17,DssGraphTypeVertical_Bar_DualAxis_Stacked:18,DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:19,DssGraphTypeVertical_Bar_BiPolar_Stacked:20,DssGraphTypeVertical_Bar_Percent:21,DssGraphTypeHorizontal_Bar_Side_by_Side:22,DssGraphTypeHorizontal_Bar_Stacked:23,DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:24,DssGraphTypeHorizontal_Bar_DualAxis_Stacked:25,DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:26,DssGraphTypeHorizontal_Bar_BiPolar_Stacked:27,DssGraphTypeHorizontal_Bar_Percent:28,DssGraphTypeVertical_Line_Absolute:29,DssGraphTypeVertical_Line_Stacked:30,DssGraphTypeVertical_Line_BiPolar_Absolute:31,DssGraphTypeVertical_Line_BiPolar_Stacked:32,DssGraphTypeVertical_Line_DualAxis_Absolute:33,DssGraphTypeVertical_Line_DualAxis_Stacked:34,DssGraphTypeVertical_Line_Percent:35,DssGraphTypeHorizontal_Line_Absolute:36,DssGraphTypeHorizontal_Line_Stacked:37,DssGraphTypeHorizontal_Line_BiPolar_Absolute:38,DssGraphTypeHorizontal_Line_BiPolar_Stacked:39,DssGraphTypeHorizontal_Line_DualAxis_Absolute:40,DssGraphTypeHorizontal_Line_DualAxis_Stacked:41,DssGraphTypeHorizontal_Line_Percent:42,DssGraphTypePies:43,DssGraphTypeRing_Pie:44,DssGraphTypeMultiple_Pies:45,DssGraphTypeMultiple_Ring_Pies:46,DssGraphTypeMultiple_Proportional:47,DssGraphTypeMultiple_Proportional_Ring_Pies:48,DssGraphTypePie_Bar:49,DssGraphTypeRing_Pie_Bar:50,DssGraphTypeX_Y_Scatter:51,DssGraphTypeDualAxis_X_Y_Scatter:52,DssGraphTypeX_Y_Scatter_with_Labels:53,DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:54,DssGraphTypePolar_Coordinate_Chart:55,DssGraphTypeDualAxis_Polar_Coordinate_Chart:56,DssGraphTypeRadar_Line:57,DssGraphTypeRadar_Stacked_Area:58,DssGraphTypeDualAxis_Radar_Line:59,DssGraphTypeDualAxis_Radar_Stacked_Area:60,DssGraphTypeBubble:61,DssGraphTypeBubble_DualAxis:62,DssGraphTypeGantt_Chart:63,DssGraphTypeHiLo_Stock_Chart:64,DssGraphTypeHiLo_DualAxis_Stock_Chart:65,DssGraphTypeHiLoOpen_Stock_Chart:66,DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:67,DssGraphTypeHiLoOpenClose_Stock_Chart:68,DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:69,DssGraphTypeSpectral_Chart:70,DssGraphTypeVertical_Histogram:71,DssGraphTypeHorizontal_Histogram:72,DssGraphTypeTable_Chart:73,DssGraphTypeD3_Riser_Bars:74,DssGraphTypeD3_Riser_Pyramids:75,DssGraphTypeD3_Riser_Octogans:76,DssGraphTypeD3_Riser_Cut_Corner_Bars:77,DssGraphTypeD3_Floating_Cubes:78,DssGraphTypeD3_Floating_Spheres:79,DssGraphTypeD3_Connect_Group_Areas:80,DssGraphTypeD3_Connect_Group_Ribbons:81,DssGraphTypeD3_Connect_Group_Steps:82,DssGraphTypeD3_Connect_Series_Areas:83,DssGraphTypeD3_Connect_Series_Ribbons:84,DssGraphTypeD3_Connect_Series_Steps:85,DssGraphTypeD3_Surface:86,DssGraphTypeD3_Surface_with_Sides:87,DssGraphTypeD3_Honeycomb_Surface:88,DssGraphTypeD3_X_Y_Z_Scatter_Chart:89,DssGraphTypeD3_X_Y_Z_Scatter_with_Labels_Chart:90,DssGraphTypeVertical_Bar_Absolute:91,DssGraphTypeHorizontal_Bar_Absolute:92,DssGraphTypeBubble_With_Labels:93,DssGraphTypeBubble_DualAxis_With_Labels:94,DssGraphTypeGauge:95,DssGraphTypeFunnel:96,DssGraphTypePareto:97,DssGraphTypePareto_Percent:98,DssGraphTypeBoxPlot:99,DssGraphTypeRadar_Area_Stacked:100,DssGraphTypeRadar_Absolute_Area:101,DssGraphTypeVertical_Bar_BiPolar_Absolute:102,DssGraphTypeVertical_Bar_DualAxis_Absolute:103,DssGraphTypeHorizontal_Bar_BiPolar_Absolute:104,DssGraphTypeHorizontal_Bar_DualAxis_Absolute:105,DssGraphRadar_Line_Stacked:106,DssGraphRadar_DualAxis_Radar_Stacked_Line:107,DssGraphRadar_DualAxis_Radar_Area:108,DssGraphTypeMaxDeskTopGraphTypes:109,DssGraphTypeBarArea:201,DssGraphTypeBarLine:202,DssGraphTypeAreaLine:203,DssGraphTypeDualAxisBarArea:204,DssGraphTypeDualAxisBarLine:205,DssGraphTypeDualAxisAreaLine:206,DssGraphTypeGridChart:20000,DssGraphTypeVertical_Bar_DualAxis_Percent:20001,DssGraphTypeVertical_Line_DualAxis_Percent:20002,DssGraphTypeVertical_Area_DualAxis_Percent:20003,DssGraphTypeHorizontal_Bar_DualAxis_Percent:20004,DssGraphTypeHorizontal_Line_DualAxis_Percent:20005,DssGraphTypeHorizontal_Area_DualAxis_Percent:20006,DssGraphTypeHorizontal_CategoryPies_Absolute:21077,DssGraphTypeHorizontal_CategoryPies_Stacked:21078,DssGraphTypeHorizontal_CategoryPies_Percent:21079,DssGraphTypeVertical_CategoryPies_Absolute:21080,DssGraphTypeVertical_CategoryPies_Stacked:21081,DssGraphTypeVertical_CategoryPies_Percent:21082,DssGraphTypeScatter_Pies:21111,DssGraphTypeBubble_Pies:21121,DssGraphTypeGrid_Pies:21211,DssGraphTypeVertical_Bullet:21212,DssGraphTypeHorizontal_Bullet:21213};mstrmojo.chart.enums.EnumAxisLabelsLocation={ALL_LEFT:0,ALL_RIGHT:1,ALL_LEFT_RIGHT:2,ALL_BOTTOM:3,ALL_TOP:4,ALL_BOTTOM_TOP:5};mstrmojo.chart.enums.EnumBoundingRectType={BRT_TOP:0,BRT_BOTTOM:1,BRT_CYLINDER:2,BRT_RING_CYLINDER:3,BRT_START_RECT:4,BRT_END_RECT:5};mstrmojo.mstr.EnumDSSXMLObjectTypes={Generic:-2,Unknown:-1,Reserved:0,Filter:1,Template:2,ReportDefinition:3,Metric:4,Style:6,AggMetric:7,Folder:8,SubscriptionDevice:9,Prompt:10,Function:11,Attribute:12,Fact:13,Dimension:14,Table:15,DatamartReport:16,FactGroup:17,Shortcut:18,Resolution:19,Monitor:20,AttributeForm:21,Schema:22,Format:23,Catalog:24,CatalogDefn:25,Column:26,PropertySet:28,DBRole:29,DBLogin:30,DBConnection:31,Project:32,ServerDef:33,User:34,Configuration:36,Request:37,Script:38,Search:39,SearchFolder:40,Datamart:41,FunctionPackageDefinition:42,Role:43,SecurityRole:44,Locale:45,Consolidation:47,ConsolidationElement:48,ScheduleEvent:49,ScheduleObject:50,ScheduleTrigger:51,Link:52,DbTable:53,TableSource:54,DocumentDefinition:55,DrillMap:56,DBMS:57,MDSecurityFilter:58,PromptAnswer:59,PromptAnswers:60,ObjectTag:65,ReservedLastOne:66};mstrmojo.mstr.EnumNodeDimty={NodeDimtyReserved:0,NodeDimtyNone:1,NodeDimtyContinuation:2,NodeDimtyExclusiveContinuation:3,NodeDimtyOutputLevel:4,NodeDimtyBreakBy:5,NodeDimtyEmbedded:6,NodeDimtyUnspecified:7};mstrmojo.chart.enums.EnumLineJoinType={LJT_MITER:0,LJT_BEVEL:1,LJT_ROUND:2};mstrmojo.chart.enums.EnumAnchorPoint={TOP_LEFT:0,TOP_MIDDLE:1,TOP_RIGHT:2,LEFT_MIDDLE:3,CENTER:4,RIGHT_MIDDLE:5,BOTTOM_LEFT:6,BOTTOM_MIDDLE:7,BOTTOM_RIGHT:8};mstrmojo.chart.enums.EnumMarkerShape={MS_Rectangle:0,MS_XShape:1,MS_PlusSymbolthin:2,MS_PlusSymbolthick:3,MS_Circle:4,MS_Diamond:5,MS_Triangle:6,MS_Square:7,MS_Star:8,MS_Area:9,MS_Star45:10};mstrmojo.mstr.EnumDataType={DataTypeUnknown:-1,DataTypeReserved:0,DataTypeInteger:1,DataTypeUnsigned:2,DataTypeNumeric:3,DataTypeDecimal:4,DataTypeReal:5,DataTypeDouble:6,DataTypeFloat:7,DataTypeChar:8,DataTypeVarChar:9,DataTypeLongVarChar:10,DataTypeBinary:11,DataTypeVarBin:12,DataTypeLongVarBin:13,DataTypeDate:14,DataTypeTime:15,DataTypeTimeStamp:16,DataTypeShort:21,DataTypeLong:22,DataTypeMBChar:23,DataTypeBool:24,DataTypePattern:25,DataTypeBigDecimal:30,DataTypeCellFormatData:31,DataTypeInt64:34};mstrmojo.chart.model.enums.EnumDSSGraphPictureScaleType={DssGraphPictureScaleNone:0,DssGraphPictureScale2Fit:1,DssGraphPictureScale2Frame:2,DssGraphPictureScale2Background:3,DssGraphPictureTiled:4,DssGraphPictureTiled2Frame:5,DssGraphPictureTiled2Background:6,DssGraphPictureBrickHorizontal:7,DssGraphPictureBrickVertical:8,DssGraphPictureStack:9,DssGraphPictureScaleProportional:10};mstrmojo.chart.model.enums.EnumShapeType={_COMBINED:-2,_GENERIC:-1,_AREA:0,_BAR:1,_LINE:2,_STEPLINE:3,_CIRCLE:4,_RECTANGLE:5,_SQUARE:6,_TICKER:7,_PIESLICE:8,_POLYGON:9,_PIE:10,_BULLET:11,_CURVE:12,_DEFAULT:100};mstrmojo.chart.ChartConstants={kPI:3.141592653589793,kHalfSqrt2:0.70710678,kVirtualCoordinateWidth:700,kVirtualCoordinateHeight:400,kGroupLabelsRatio:0.1,kGridLineMarginFactor:10,kAngleMargin:0.1,kLabelMarginFactor:20,kVirtualMarkerSize:2,kBetweenLabels:0,kBetweenLabelLines:1,kLabelToChart:2,kNumericLabelToTick:3,kChartToChart:4,kExtra:5,kEndTickToChart:6,kEndLabelToChart:7,kBetweenLabelCenters:8,kCategoricalLabelToTick:9,kBandSide:10,kDataLabel:11,kRefLabel:12,kAxisOriginLabel:13};mstrmojo.chart.enums.EnumGenericDirection={NONE:0,TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};mstrmojo.chart.enums.EnumPictureFormatType={JPEG:0,PNG:1,BMP:7,GIF:100,PDF:102,SVG:103,WIN32:104,INSTRUCTIONS:105};mstrmojo.chart.model.enums.EnumVariantBool={VARIANT_TRUE:65535,VARIANT_FALSE:0};mstrmojo.chart.Angle=mstrmojo.provide("mstrmojo.chart.Angle",{});mstrmojo.chart.enums.EnumFillType={FT_SIMPLE:0,FT_TEXTURE:4,FT_PICTURE:6,FT_GRADIENT:14,FT_PATTERN:101};mstrmojo.chart.enums.EnumGraphMatrixElementSizeMode={_AUTOMATIC:0,_PROPORTIONAL:1,_MANUAL:2};mstrmojo.chart.model.enums.EnumDSSGraphGridLineType={DssGraphGridNone:0,DssGraphGridRegular:1,DssGraphGridBoth:2,DssGraphGridInnerTicks:3,DssGraphGridOuterTicks:4,DssGraphGridSpanningTicks:5};(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphProperty");var B=mstrmojo.chart.model,C=B.enums,A=C.EnumDSSGraphProperty;mstrmojo.chart.model.enums.EnumDSSGraphRegressionType={DssGraphRegressionNone:0,DssGraphRegressionLinear:A.DssGraphShowSDLinrLine,DssGraphRegressionLog:A.DssGraphShowSDLinrLog,DssGraphRegressionPoly:A.DssGraphShowSDLinrNPoly,DssGraphRegressionExp:A.DssGraphShowSDLinrExp,DssGraphRegressionMA:A.DssGraphShowSDMOVALine,DssGraphRegressionNatLog:A.DssGraphShowSDLinrNatLog,DssGraphRegressionSTDD:A.DssGraphShowSDSTDDLine,DssGraphRegressionMean:A.DssGraphShowSDMeanLine,DssGraphRegressionPow:200};})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array,B=mstrmojo.hash;mstrmojo.models.datasets.DataInterface=mstrmojo.provide("mstrmojo.models.datasets.DataInterface",{getFormsByAttrId:function A(F,E){var D=[];E=E||[];B.forEach(E,function(G){C.forEach(G.att||[],function(H){if(H.did===F){D=D.concat(H.fs||[]);return false;}});});D=C.filter(D,function(G){return !!G.obf;});return C.distinct(D,"fid");}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",P="mousemove",R="mouseup";function G(Y){if(E.isPrimaryMouseBtn(Y)){B.startDragCheck(self,Y);}}var V,Q,A="mstrmojo-dnd-avatar",U;function F(Z,Y){if(Y!==undefined&&Y!==null){Q.innerHTML=Y;}U.left=Z.x+"px";U.top=Z.y+"px";}function L(Z,Y){if(!V){V=I.createElement("div");U=V.style;V.className=A;V.innerHTML='<div class="'+A+'-inner"></div>';Q=V.firstChild;I.body.appendChild(V);}F(Z,Y);U.display="block";}function S(){if(U){U.display="none";}}function H(Y){var Z=++B.ctxt.moveCount;if(Z>=B.minMoves){B.stopDragCheck();if((Y.buttons===1||Y.buttons===undefined||E.isIE9)&&(Y.which===1||Y.button===0||E.isIE8)){B.startDrag(self,Y);}}}function O(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDragCheck();delete B.ctxt;}}function D(Y){B.onDragMove(self,Y);}function C(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDrag(window,Y);}}function N(b){var Z=mstrmojo.hash.copy(b,{}),a=Z.hWin=Z.hWin||window,Y=Z.e=Z.e||a.event;Z.node=E.eventTarget(a,Y);Z.pos=E.getMousePosition(Y,a);return Z;}function J(Z){var Y=E.findWidget(Z);while(Y){if(Y.draggable){return Y;}Y=Y.parent;}return null;}function T(Y){var a=Y.src,Z=J(a.node);if(!Z){return null;}if(Z.getDragAction){Y.action=Z.getDragAction(Y);}a.widget=Z;a.data=Z.getDragData&&Z.getDragData(Y);if(Z.isDragValid){if(!Z.isDragValid(Y)){if(!Z.shouldDragBubble||Z.shouldDragBubble(Y)!==true){Y.src.node=Z.domNode.parentNode;return T(Y);}return null;}}if(Z.ondragstart){Z.ondragstart(Y);}return Z;}function X(a,Z){var Y=E.findWidget(a),b=Z.tgt&&Z.tgt.widget;while(Y){if(Y.dropZone){if(Y===b){return Y;}if(Y.allowDrop&&Y.allowDrop(Z)){return Y;}}Y=Y.parent;}return null;}function W(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(Y,Z){delete this.ctxt;var a=N({hWin:Y,e:Z});this.ctxt={src:a,moveCount:0,last:M.copy(a.pos),getDirection:function(b){return !!this.dir[b];},getCtxtDragData:function(){var b=this.src;return(b&&b.data)||{};},getCtxtDropData:function(){var b=this.tgt;return(b&&b.data)||{};}};if(this.minMoves){E.attachEvent(I,P,H);E.attachEvent(I,R,O);}else{this.startDrag(Y,Z);}},stopDragCheck:function(){E.detachEvent(I,P,H);E.detachEvent(I,R,O);},startDrag:function(Y,b){var Z=this.ctxt;Z.id=mstrmojo.now();var a=T(Z);if(!a){return ;}E.clearBrowserHighlights(Y);E.preventDefault(self,b);E.attachEvent(I,P,D);E.attachEvent(I,R,C);var d=window.mstrApp;if(d&&d.setInteractive){this._changeAppStatus=d.setInteractive(false);}if(!a.ownAvatar){var c=Z.src;L(c.pos,c.data&&c.data.html);}},stopDrag:function(Y,f){E.detachEvent(I,P,D);E.detachEvent(I,R,C);var b=this.ctxt,a=b.tgt||{},Z=N({hWin:Y,e:f,data:a.data}),d=X(Z.node,b);Z.widget=d;b.tgt=Z;if(d){if(d.ondrop){d.ondrop(b);}else{W.call(d);}}var c=b.src.widget;if(c&&c.ondragend){c.ondragend(b);}if(c&&!c.ownAvatar){S();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(c,f){if(E.isSafari){E.clearBrowserHighlights();}var Y=this.ctxt,b=Y.tgt||{},Z=b.widget,d=N({hWin:c,e:f,data:b.data}),i=d.widget=X(d.node,Y),h=Y.last,a=d.pos;Y.dir={x:a.x>h.x,y:a.y>h.y};Y.last=M.copy(d.pos);Y.tgt=d;if(Z!==i){if(Z){if(Z.ondragleave){Z.ondragleave(Y);}else{W.call(Z);}}if(i){Y.tgt.data=(i.getDropData&&i.getDropData(Y))||{};if(i.ondragenter){i.ondragenter(Y);}else{if(i.set){i.set("allowingDrop",true);}}}}if(i){if(i.ondragover){i.ondragover(Y);}}var g=Y.src.widget;if(g&&g.ondragmove){g.ondragmove(Y);}if(g&&!g.ownAvatar){F(d.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],s=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-s.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=s.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,B=mstrmojo.hash,D="u;",C="-1";mstrmojo.elementHelper=mstrmojo.provide("mstrmojo.elementHelper",{buildElemsTerseID:function F(P,O,R){var N,M;for(M in P){N=P[M];if(N.v){var Q=N.v.split(";");if(Q&&Q.length>1){Q[1]=O;if(R&&Q.length>2){Q.pop();}N.v=Q.join(";");}}}return P;},buildElemsCountStr:function K(P,N){P=(!P||!P.length)?[]:P;N=(!N||!N.length)?[]:N;var O=P.length,M=N.length;if(I.find(N,"v",D)>-1){M-=1;}if(I.find(N,"v",C)>-1){M-=1;}if(I.find(P,"v",D)>-1||I.indexOf(P,D)>-1){O=M;}return this.buildElemsCountStrByNum(O,M);},buildElemsCountStrByNum:function K(N,M){if(N===M){if(M===0){return"";}return M.toString();}else{if(M===0){return N+" "+mstrmojo.desc(514);}else{if(N>M){return"("+M+")";}}}return mstrmojo.desc(4891,"").replace("##",String(N)).replace("###",String(M));},browseElements:function G(O,P,N){var M={doNotHold:!(N&&mstrApp.serverProxy),silent:true};mstrApp.serverRequest(mstrmojo.hash.copy(N,P),O,M);},getIdPresentation:function J(P){if(!!P){var O=P.charAt(0),M,N,Q;if((O>="g"&&O<="w")||(O>="V"&&O<="Z")){N=false;for(Q=1;Q<P.length;++Q){if(N){N=false;}else{switch(P.charAt(Q)){case";":return"terseLong";case"\\":N=true;break;}}}return"terse";}if(O>="B"&&O<="Q"){if(P.length>2){M=P.charAt(1);if(M>="A"&&M<="Q"){if(P.charAt(2)===":"){return"oldLong";}}}}if(P.length>=33&&P.charAt(32)===":"){return"old";}}return null;},isNullElem:function H(M){if(!M){return true;}var P=this.getIdPresentation(M),N=false,O;switch(P){case"terse":case"terseLong":O=M.substring(1,M.length).split(";");N=O[0].indexOf(this.TERSE_NULL)>-1;break;case"old":case"oldLong":N=M.indexOf(this.OLD_NULL)>-1;break;}return N;},isNonGroupNull:function(O){var M=O.eid||(O._e&&O._e.id),N=M&&M.split(":")[0];return N&&N===this.NON_GROUP_NULL;},getAttributeId:function L(O){var N,M;if(O){M=O.split(";");N=M[1];}return N;},getElementValue:function A(N){var O,M;if(N){M=N.split(";");if(M.length>2){O=M[0]+" "+M[2];}else{O=M[0];}}return O;},isAttributeIdsLinked:function E(N,M,O){var Q=false,P=B.keyarray(O);I.forEach(P,function(R){if(R===N){I.forEach(O[R],function(S){if(S===M){Q=true;return false;}});}if(Q){return false;}});return Q;},ELEM_ALL_ID:"u;",ELEM_DUMMY_ID:"-1",ELEM_SEPARATOR:"\u001E",OLD_NULL:"~!@@~~!@@~",TERSE_NULL:"\\N",NON_GROUP_NULL:"n00000000000000000000000000000000"});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,d){var Z=D.getMousePosition(D.firstTouch(b,d),b);D.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*O*F/d).toFixed(2):0,y:d?Number(b.y*O*F/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources");function D(H){this.cleanUpAfterTarget(H);var G=H.tgtData;if(G){delete H.tgtData;}var I=this.getContextDragData(H);if(I&&I.setAvatarClass){I.setAvatarClass("");}}mstrmojo.vi.ui._IsDropTarget=mstrmojo.provide("mstrmojo.vi.ui._IsDropTarget",{_mixinName:"mstrmojo.vi.ui._IsDropTarget",dropZone:true,getDropAvatarIcon:function B(G){return"add";},getContextDragData:function F(G){return G.getCtxtDragData();},cleanUpAfterTarget:mstrmojo.emptyFn,ondragenter:function A(G){var H=this.getContextDragData(G);if(H&&H.setAvatarClass){H.setAvatarClass(this.getDropAvatarIcon(G));}if(this._super){this._super(G);}},ondragleave:function E(G){D.call(this,G);if(this._super){this._super(G);}},ondrop:function C(G){D.call(this,G);if(this._super){this._super(G);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;mstrmojo.ui._IsIncFetchList=mstrmojo.provide("mstrmojo.ui._IsIncFetchList",{_mixinName:"mstrmojo.ui._IsIncFetchList",ifDataHelper:null,supportsIncFetch:false,isFetching:false,initScroll:function A(){var G=this.ifDataHelper,F=this,E=this.scrollNode||this.domNode;this.supportsIncFetch=G&&G.hasNext();if(G&&this.supportsIncFetch){this._scroll=function D(){if(E.offsetHeight+E.scrollTop>=E.scrollHeight){F.raiseEvent({name:"incFetch",id:F.id});}};C.attachEvent(E,"scroll",this._scroll);this.attachEventListener("incFetch",this.id,function(H){if(!this.supportsIncFetch||this.isFetching){return ;}if(this.preNext){this.preNext();}this.set("isFetching",true);G.next({complete:function(I){if(F.postNext){F.postNext();}F.set("isFetching",false);},success:function(I){F.addItems(I.items);},failure:function(I){F.supportsIncFetch=false;mstrmojo.alert("Error in fetching next: "+I);}});});}},addItems:function B(D){if(this._super){this._super(D);}if(!this.ifDataHelper.hasNext()){this.supportsIncFetch=false;var E=this.scrollNode||this.domNode;C.detachEvent(E,"scroll",this._scroll);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphObject");var A=mstrmojo.chart.model,C=A.enums,B=C.EnumDSSGraphObject;mstrmojo.chart.model.enums.EnumDSSGraphTitleName={DssGraphTitleReserved:0,DssGraphTitleTitle:B.DssGraphTitle,DssGraphTitleSubtitle:B.DssGraphSubtitle,DssGraphTitleFootnote:B.DssGraphFootnote,DssGraphTitleCategory:B.DssGraphXTitle,DssGraphTitleSeries:B.DssGraphSeriesTitle,DssGraphTitleY1:B.DssGraphY1Title,DssGraphTitleY2:B.DssGraphY2Title,DssGraphTitleY1Right:B.DssGraphY1RightTitle};})();(function(){mstrmojo.requiresCls("mstrmojo.array");var G=mstrmojo.array,E=mstrmojo.desc(2412,"Default"),H=mstrmojo.desc(3433,"Font"),B=mstrmojo.desc(3434,"Number"),C=mstrmojo.desc(3435,"Alignment"),A=mstrmojo.desc(2886,"Borders"),F=mstrmojo.desc(3905,"Background");var L=[{n:E,v:"pru"}];G.forEach(["Arial","Arial Black","Arial Narrow","Arial Unicode MS","Batang","Book Antiqua","Bookman Old Style","Comic Sans MS","Courier New","Garamond","Haettenschweiler","Helvetica","Impact","Lucida Console","Lucida Sans Unicode","Map Symbols","Marlett","Monotype Corsiva","Monotype Sorts","MS Gothic","MS Outlook","Microsoft Sans Serif","MT Extra","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings"],function(M){L.push({n:M,v:M});});function K(N,M,O){return(M&&M>=N)?K(N,M-O,O).concat(M):[];}var J=K(2,12,1);J=J.concat(K(14,24,2));J=J.concat(K(36,48,12));J=J.concat(K(72,72,1));var D=[{n:E,v:"pru"}];G.forEach(J,function(M){D.push({n:String(M),v:String(M)});});mstrmojo._FormatDefinition={Formats:[{n:H},{n:B},{n:C},{n:mstrmojo.desc(3436,"Color and Lines")}],FormatTarget:[{n:mstrmojo.desc(7942,"Element Header"),v:1,p:"header_format"},{n:mstrmojo.desc(7943,"Element Value"),v:2,p:"grid_format"},{n:mstrmojo.desc(7944,"Individual Items Header"),v:3,p:"child_header_format"},{n:mstrmojo.desc(7945,"Individual Items Value"),v:4,p:"child_grid_format"}],MetricFormatTarget:[{n:mstrmojo.desc(9710,"Metric Headers"),v:1,p:"header_format"},{n:mstrmojo.desc(9711,"Metric Values"),v:2,p:"grid_format"}],MetricValueFormats:[{n:B},{n:C},{n:H},{n:A},{n:F}],MetricHeaderFormats:[{n:B},{n:C},{n:H},{n:A},{n:F},{n:mstrmojo.desc(12139,"Chart")}],NumberFormatCategory:{Automatic:-3,Default:-2,General:9,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7},DefaultFormat:{FormattingAlignment:{Horizontal:"1",Vertical:"1",TextWrap:"0",TextDirection:"0"},FormattingBorder:{HInsideStyle:"1",VInsideStyle:"1",TopStyle:"1",LeftStyle:"1",BottomStyle:"1",RightStyle:"1",HInsideColor:"0",VInsideColor:"0",TopColor:"0",LeftColor:"0",BottomColor:"0",RightColor:"0",Border3DStyle:"0",Border3DWeight:"0",Border3DBottomColor:"0",Border3DLeftColor:"0",Border3DRightColor:"0",Border3DTopColor:"0"},FormattingFont:{Name:"Arial",Bold:"0",Italic:"0",Size:"10",Strikeout:"0",Underline:"0",Color:"0",Script:"0"},FormattingNumber:{Category:"9",DecimalPlaces:"0",ThousandSeparator:"-1",CurrencySymbol:"$",CurrencyPosition:"0",Format:"General",NegativeNumbers:"3"},FormattingPadding:{LeftPadding:"1",RightPadding:"1",TopPadding:"1",BottomPadding:"1",LineSpacing:"0"},FormattingPatterns:{FillColor:"16777215",PatternColor:"8650752",PatternStyle:"1",FillStyle:"0",ApplyToGraphThreshold:"0",GradientColor:"16777215",GradientAngle:"0",GradientXOffset:"0",GradientYOffset:"0",SelectorSelectionColor:"16167264",SelectorSelectionFillStyle:"0",SeriesFillColor:"pru",SeriesPatternColor:"8650752",SeriesPatternStyle:"1",SeriesFillStyle:"0",SeriesApplyToGraphThreshold:"0",SeriesGradientColor:"16777215",SeriesGradientAngle:"0",SeriesGradientXOffset:"0",SeriesGradientYOffset:"0",SeriesSelectorSelectionColor:"16167264",SeriesSelectorSelectionFillStyle:"0"}},Families:L,Sizes:D,SizesInVI:D.slice(7,19),Styles:[{n:E,v:"pru"},{n:mstrmojo.desc(3440,"Regular"),v:"0,0"},{n:mstrmojo.desc(2718,"Bold"),v:"-1,0",v2:"-1,"},{n:mstrmojo.desc(2719,"Italic"),v:"0,-1",v2:",-1"},{n:mstrmojo.desc(3441,"Bold Italic"),v:"-1,-1"}],Effects:[{n:"Underline",v:0},{n:"Strike",v:1}],Category:[{n:E,v:-2},{n:mstrmojo.desc(2378,"General"),v:9},{n:mstrmojo.desc(2050,"Fixed"),v:0},{n:mstrmojo.desc(2051,"Currency"),v:1},{n:mstrmojo.desc(2052,"Date"),v:2},{n:mstrmojo.desc(2170,"Time"),v:3},{n:mstrmojo.desc(2053,"Percentage"),v:4},{n:mstrmojo.desc(2054,"Fraction"),v:5},{n:mstrmojo.desc(2055,"Scientific"),v:6},{n:mstrmojo.desc(2056,"Custom"),v:7}],MaxNegativeDidigts:30,FixedNegative:[{n:"-1,234.12",v:1,f:"#,##0.00"},{n:"-1,234.12",r:true,v:5,f:"#,##0.00;[RED]-#,##0.00"},{n:"1,234.12",r:true,v:2,f:"#,##0.00;[RED]#,##0.00"},{n:"(1,234.12)",v:3,f:"#,##0.00;(#,##0.00)"},{n:"(1,234.12)",r:true,v:4,f:"#,##0.00;[RED](#,##0.00)"}],CurrencyNegative:[{n:"-$1,234.12",v:1,f:'"$"#,##0.00'},{n:"-$1,234.12",r:true,v:5,f:'"$"#,##0.00;[RED]-"$"#,##0.00'},{n:"$1,234.12",r:true,v:2,f:'"$"#,##0.00;[RED]"$"#,##0.00'},{n:"($1,234.12)",v:3,f:'"$"#,##0.00;("$"#,##0.00)'},{n:"($1,234.12)",r:true,v:4,f:'"$"#,##0.00;[RED]("$"#,##0.00)'}],CurrencyPosition:[{n:mstrmojo.desc(2194,"Left"),v:0},{n:mstrmojo.desc(2195,"Right"),v:1},{n:mstrmojo.desc(2183,"Left with space"),v:2},{n:mstrmojo.desc(2182,"Right with space"),v:3}],Date:[{n:mstrmojo.desc(2231,"4/7"),v:"m/d"},{n:mstrmojo.desc(2232,"04/07"),v:"mm/dd"},{n:mstrmojo.desc(2233,"4/7/98"),v:"m/d/yy"},{n:mstrmojo.desc(2234,"04/07/98"),v:"mm/dd/yy"},{n:mstrmojo.desc(2235,"04/07/1998"),v:"mm/dd/yyyy"},{n:mstrmojo.desc(2236,"7-Apr"),v:"d-mmm"},{n:mstrmojo.desc(2237,"7-Apr-98"),v:"d-mmm-yy"},{n:mstrmojo.desc(2238,"Apr-98"),v:"mmm-yy"},{n:mstrmojo.desc(2239,"Apr '98"),v:"mmm 'yy"},{n:mstrmojo.desc(2240,"April 1998"),v:"mmmm yyyy"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2243,"April 7, 1998"),v:"mmmm d, yyyy"}],Time:[{n:mstrmojo.desc(2244,"15:41"),v:"h:mm"},{n:mstrmojo.desc(2245,"3:41 PM"),v:"h:mm AM/PM"},{n:mstrmojo.desc(2246,"15:41:46"),v:"h:mm:ss"},{n:mstrmojo.desc(2247,"3:41:46 PM"),v:"h:mm:ss AM/PM"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2250,"04/07/98 15:41"),v:"mm/dd/yy h:mm"},{n:mstrmojo.desc(2248,"04/07/98 3:41 PM"),v:"mm/dd/yy h:mm AM/PM"}],PercentNegative:[{n:"-12.12%",v:1,f:"0.00%"},{n:"-12.12%",r:true,v:5,f:"0.00%;[RED]-0.00%"},{n:"12.12%",r:true,v:2,f:"0.00%;[RED]0.00%"},{n:"(12.12%)",v:3,f:"0.00%;(0.00%)"},{n:"(12.12%)",r:true,v:4,f:"0.00%;[RED](0.00%)"}],Fraction:[{n:"12 1/3",v:"# ?/?"},{n:"37/3",v:"?/?"},{n:"12 26/81",v:"# ??/??"},{n:"998/81",v:"??/??"}],TextDirection:[{n:E,v:"pru"},{n:mstrmojo.desc(4601,"Horizontal"),v:0},{n:mstrmojo.desc(5156,"-90 Degree"),v:-90}],Horizontal:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2378,"General"),v:1},{n:mstrmojo.desc(2194,"Left"),v:2},{n:mstrmojo.desc(2193,"Center"),v:3},{n:mstrmojo.desc(2195,"Right"),v:4},{n:mstrmojo.desc(2068,"Justify"),v:6}],Vertical:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2256,"Top"),v:1},{n:mstrmojo.desc(2067,"Center"),v:2},{n:mstrmojo.desc(2257,"Bottom"),v:3}],TextWrap:[{v:0},{v:-1}],BorderStyles:[{n:E,v:"pru"},{n:mstrmojo.desc(2258,"None"),v:0},{n:mstrmojo.desc(2259,"Dashed"),v:3},{n:mstrmojo.desc(2260,"Dotted"),v:4},{n:mstrmojo.desc(2261,"Hair"),v:7},{n:mstrmojo.desc(2262,"Thin"),v:1},{n:mstrmojo.desc(2264,"Thick"),v:5},{n:mstrmojo.desc(2265,"Double"),v:6}],extractModel:function(O,Q,N){var S=N||this.DefaultFormat,R;for(R in O){var M=O[R];if(!M.attachEventListener){if(!mstrmojo.hash.isEmpty(M)){Q[R]=M;}}else{var P;for(P in M){if(S[R]&&S[R][P]){if(!Q[R]){Q[R]={};}Q[R][P]=M[P];}}}}},getAvailableFonts:function I(){var M={success:function(O){if(O.name==="fontPicker"){var N=[{n:E,v:"pru"}];mstrmojo.array.forEach(O.shortcuts,function(P){N.push({n:P.attributes[1].value,v:P.attributes[1].value});});mstrmojo._FormatDefinition.Families=N;}}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,M,{taskId:"getSystemPickerJson",name:"fontPicker"},false,null,true);},getStandardFormat:function(N,M){var P=mstrmojo.hash.clone(M||this.DefaultFormat),O;N=N||{};for(O in P){N[O]=N[O]||{};}for(O in N){if(!N[O].attachEventListener){N[O]=mstrmojo.hash.make(N[O],mstrmojo.Obj);}}return N;},saveFormatModel:function(Q,W,N,X){var V=X||this.DefaultFormat,S,M;for(S=0;S<N.length;S++){var R=N[S],P=W[R]||null,U=Q[R];if(U===undefined){delete W[R];continue;}for(M in V){var T=V[M],O;if((!P&&!U)||(P&&!P[M]&&!U[M])){continue;}for(O in T){if(U[M]===undefined||U[M]===""||U[M][O]==="pru"||U[M][O]===undefined){if(P&&P[M]&&(P[M][O]!==undefined&&P[M][O]!==null&&P[M][O]!=="pru")){P[M][O]="pru";}}else{P=P||{};P[M]=P[M]||{};P[M][O]=U[M][O];}}}if(P){W[R]=P;}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var A=mstrmojo.array;mstrmojo.fe._IsRelationTreeNode=mstrmojo.provide("mstrmojo.fe._IsRelationTreeNode",{createSetHtml:'<span class="mstrmojo-textset mstrmojo-create-set-text" mstrAttach:click >'+mstrmojo.desc(12034,"Create a Set")+"</span>",syncRootOperator:function(){var F=this.parent,H=function(){var J=this.parent,I=[];if(J){I=J.ctxtBuilder.itemWidgets;}return I;},E,D,B,C,G;if(F){E=H.call(this);B=E.length;D=A.find(E,"noRelationOperator",true)!==-1;for(C=0;C<B;C++){G=E[C];G&&G.set("noRelationOperator",D);}this.set("noRelationOperator",D);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.DSSTimeUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSTimeUtil",DaysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],DaysBeforeMonth:[0,31,59,90,120,151,181,212,243,273,304,334],DateAbove1970:[1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981]});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.Vector2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Vector2D",x:0,y:0,init:function H(I){if(I){if(I.x!==undefined&&I.y!==undefined){this.x=I.x;this.y=I.y;}else{if(I.Point){this.x=I.Point.x;this.y=I.Point.y;}else{if(I.StartPoint&&I.EndPoint){this.x=I.EndPoint.x-I.StartPoint.x;this.y=I.EndPoint.y-I.StartPoint.y;}}}}},Reset:function B(I,J){this.x=I;this.y=J;},LengthSquared:function G(){return this.x*this.x+this.y*this.y;},InnerProduct:function A(I){return(this.x*I.x+this.y*I.y);},CrossProduct:function D(I){return(this.x*I.y-this.y*I.x);},IncludedAngle:function F(J){var I;I=this.InnerProduct(J)/(Math.sqrt(this.LengthSquared()*J.LengthSquared()));I=I>1?1:I;I=I<-1?-1:I;return Math.acos(I);},Length:function E(){return Math.sqrt(this.LengthSquared());},Normalize:function C(){var I=this.Length();this.x/=I;this.y/=I;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition","mstrmojo.chart.enums.EnumFontRotation");var D=mstrmojo.chart,G=D.enums,H=G.EnumFontRotation,A=mstrmojo.chart.model,B=A.enums,F=B.EnumDSSGraphDataTextPosition;mstrmojo.chart.LabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.LabelInfo",IsPut:false,IsClockWise:false,IsValid:false,SeriesId:0,GroupId:0,HostMarker:null,SuggestedStart:F.DssGraphDTPositionOutMin,LabelRotation:H.FR_NORMAL,Label:null,init:function I(J){this.Label=null;this.HostMarker=null;this._super(J);},IsMoved:function C(J){return(this.SuggestedStart!==J);},ToRectangle:function E(){return this.Label.GetBoundingRect();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumNumberCategory");var B=mstrmojo.chart,A=B.enums,F=A.EnumNumberCategory;mstrmojo.chart.ChartAdvFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartAdvFormat",mFormatType:F.General,mDigits:0,mGrouping:3,mCurrency:"$",mPosCurr:0,mNegFormat:3,mCustomFormat:"General",init:function E(I){var H=mstrmojo.hash;if(I&&I.ChartAdvFormat){var G=I.ChartAdvFormat;H.copy(G,this);this.mCurrency=this.mCurrency||"$";this.mCustomFormat=this.mCustomFormat||"General";}},reset:function D(H){var G=mstrmojo.hash;G.copy(H,this);},restore:function C(){this.mFormatType=F.General;this.mDigits=0;this.mGrouping=3;this.mCurrency="$";this.mPosCurr=0;this.mNegFormat=3;this.mCustomFormat="General";}});mstrmojo.chart.dNF=new B.ChartAdvFormat();mstrmojo.chart.dNF.isDefault=true;}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var E=0;mstrmojo.chart.common.FractionNumber=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.FractionNumber",mDenominator:0,mNumerator:0,init:function D(F){},Copy:function B(F){this.mDenominator=F.mDenominator;this.mNumerator=F.mNumerator;},ToDouble:function A(){if(this.mDenominator===0){if(this.mNumerator>=0){return Number.POSITIVE_INFINITY;}return Number.NEGATIVE_INFINITY;}return(this.mNumerator)/this.mDenominator;},ToString:function C(L,G,K){if(this.mDenominator===0){L=false;}var J="",I=this.mNumerator,F=false;if(L){var H=parseInt(this.mNumerator/this.mDenominator);I=this.mNumerator%this.mDenominator;K=K||(I!==0);if(H>0){F=true;J=H.toString();if(K){J+=" ";}}}if(!K&&!F&&I===0){J="0";}else{if(!K&&F&&I===0){E++;}else{J+=I.toString();J+="/";J+=this.mDenominator.toString();}}if(!G){J="-"+J;}return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ImageMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ImageMap",mShape:-1,mObjectID:-1,mSeriesID:-1,mGroupID:-1,mCoordinates:null,mToolTip:"",GetShape:function E(){return this.mShape;},GetObjectID:function D(){return this.mObjectID;},GetSeriesID:function C(){return this.mSeriesID;},GetGroupID:function A(){return this.mGroupID;},GetCoordinates:function B(){return this.mCoordinates;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumShapeType","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumGraphMajorType","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixElementSizeMode");mstrmojo.requiresCls("mstrmojo.Base");var V=mstrmojo.chart,S=V.ChartConstants,C=V.common,P=V.model,j=P.enums,g=j.EnumDSSGraphMarkerShape,d=j.EnumDSSGraphType,h=j.EnumShapeType,Z=V.enums,W=Z.EnumGraphMajorType,N=Z.EnumGraphMatrixMarkerTypeInChart,c=Z.EnumGraphMatrixElementSizeMode;function o(t){var s=0.9;switch(t){case N._MUTATION_IN_LINE:case N._ISODOT_IN_LINEAREA:s=this.mHasSizeBy?0.9:0.5;break;case N._PIE:if(this.getPieShapeLayout()===W.GMT_GRID){var r=this.parentContext&&this.parentContext.mDatasetPtr&&this.parentContext.mDatasetPtr.showPieDatalabels();s=r?0.5:0.9;}break;case N._SHAPES_IN_BUBBLESCATTER:s=this.mHasSizeBy?0.9:0.5;break;case N._TICK_CATEGORY:case N._TICK_VALUE:case N._TICK_GRID:s=0.8;break;}return s;}function U(w,z,AC,t,u,AA){t=t||false;if(u!==0){u=u||this.mMarkerShape;}if(AA===undefined||AA===null){AA=0;}var x=0,s=(u===g.DssGraphMarkerShapeNone);if(t){s=t;}var y=AC-AA;if(this.mHasSizeBy||!s||AC===1||y===1){var AB=s?N._LINE_IN_LINE:N._MUTATION_IN_LINE;if(s){if(AC===1){AB=N._DOTS_IN_LINE;}else{if(t){AB=N._DOTS_IN_LINE;}}}else{if(AC===1){AB=N._ISODOT_IN_LINEAREA;}}x=this.GetMaxMarkerSize(AB,z,AC,this.mHasSizeBy);}else{if(w){if(t){AB=N._ISODOT_IN_LINEAREA;return this.GetMaxMarkerSize(AB,z,AC,this.mHasSizeBy);}return 0;}else{if(t){AB=N._ISODOT_IN_LINEAREA;return this.GetMaxMarkerSize(AB,z,AC,this.mHasSizeBy);}var r=this.parentContext;if(r&&r.mDatasetPtr){var v=r.mDatasetPtr.getGenericLineFormat(0,0);x=v&&v.mLineThickness;if(x<=2){x=3;}}}x=Math.max(x,this.mConstants.MinimalSize.Line);}return x;}mstrmojo.chart.GraphMatrixContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphMatrixContext",mHasSizeBy:false,mMaxSizeVal:100000,mMinSizeVal:0,mCustomScaleForSizeBy:false,mHasColorBy:false,mEstGraphWidth:600,mEstGraphHeight:400,mMarkerShape:0,mGraphType:0,mClippedPaddings:null,mHasChartWithOnlyDataMarkers:false,mIsNeedRotateDataLabel:false,mIsNeedAdjustAxis:false,mShownValueTickSet:null,mIsolatedDots:null,mConstants:null,mInputs:null,mElementsInfo:null,parentContext:null,init:function m(r){this.mShownValueTickSet=[{},{}];this.mClippedPaddings={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};if(r&&r.GraphType){this.mGraphType=r.GraphType;}this.mElementsInfo={Max:{Size:0.9,Mode:0},Min:{Size:0,Mode:0}};this.mConstants={FixedTickerSize:2,FixedDataMarkerSize:3,MinimalSize:{Bar:5,Pie:10,Band:10,Line:1,ProportionalMin:1,General:2},MaximalSize:{Bar:44,Band:100},CondenseLimit:{Percentage:10,Default:-1}};},GetAdjustThicknessValue:function X(r){switch(r){case 1:case 2:case 3:case 4:r++;break;default:break;}return r;},AddToIsolatedDotList:function q(r){if(this.mIsolatedDots===null){this.mIsolatedDots=new C.MapStructure();}this.mIsolatedDots.replaceByTripleId(r,true);},IsIsolatedDot:function i(s,r){if(this.mIsolatedDots===null){return false;}r=(r!==undefined)?r:false;if(r){if(this.mMarkerShape!==g.DssGraphMarkerShapeNone){return false;}}return(this.mIsolatedDots.findByTripleId(s)!==undefined);},IsIsolatedDotInLine:function D(r){return this.IsIsolatedDot(r,true);},GetMaxElementSizeInAreaChart:function M(t,u,r,s){return U.call(this,true,t,u,r,null,s);},GetMaxElementSizeInLineChart:function O(t,u,s,r){return U.call(this,false,t,u,s,r);},GetValueAxisPadding:function Y(s,u,t){if(t===undefined){t=true;}var r=s?(t?"X1":"X2"):(t?"Y1":"Y2");return u?this.mClippedPaddings[r].HighOffset:this.mClippedPaddings[r].LowOffset;},UpdateValueAxisPadding:function Q(t){var s,v,u,w,r;for(s=0;s<2;++s){for(r=0;r<2;++r){v=s===0;w=r===0;u=v?(w?"X1":"X2"):(w?"Y1":"Y2");if(t[u]!==undefined){this.mClippedPaddings[u].LowOffset=t[u].LowOffset;this.mClippedPaddings[u].HighOffset=t[u].HighOffset;}}}},GetMaxMarkerSize:function b(AJ,z,AH,r){r=r===undefined?false:r;var AN=this.mElementsInfo,v=10000,AE=24,AG=12,x=z?this.mEstGraphWidth:this.mEstGraphHeight,AA=x/(AH*2)+0.5,t=AN.Max.Size,AB=AN.Max.Size;if(AJ===N._MUTATION_IN_LINE||AJ===N._ISODOT_IN_LINEAREA){t=AB;}if(AN.Max.Mode===c._AUTOMATIC){if(AJ!==N._LINE_IN_LINE){v=this.mHasSizeBy?24:12;}if(AJ!==N._LINE_IN_LINE&&AJ!==N._DOTS_IN_LINE){v=r?AE:AG;}t=o.call(this,AJ);}switch(AJ){case N._LINE_IN_LINE:case N._DOTS_IN_LINE:var AL=z?this.mEstGraphHeight:this.mEstGraphWidth,AI=AL*0.15;AI=Math.min(AI,v*2);if(AJ===N._DOTS_IN_LINE){if(AH!==1){AA=AA*2;}AI=Math.min(AI,AA);var s=AN.Min.Size;if(AN.Min.Mode===c._MANUAL){s=0;}AI=Math.max(AI/2,s);}return AI;case N._MUTATION_IN_LINE:case N._ISODOT_IN_LINEAREA:case N._SHAPES_IN_BUBBLESCATTER:var w=1;w=Math.min(this.mEstGraphHeight,this.mEstGraphWidth)*0.15;w=Math.min(w*t,v);if(AJ===N._MUTATION_IN_LINE||AJ===N._ISODOT_IN_LINEAREA){w=Math.min(w,AA);w=Math.ceil(w);}return w;case N._PIE:var AC=true,AF=0.2,u=this.getPieShapeLayout(),y=Math.min(this.mEstGraphWidth,this.mEstGraphHeight);if(u===W.GMT_CATEGORY){var AD=z?this.mEstGraphHeight:this.mEstGraphWidth;if(y/AD<0.15){AC=false;}}w=t*y/2;if(u===W.GMT_GRID||(u===W.GMT_CATEGORY&&!AC)){if(AN.Max.Mode===c._AUTOMATIC){w=Math.min(w,250);}}else{w*=AF;w=Math.min(w,y);if(AN.Max.Mode===c._AUTOMATIC){w=Math.min(w,50);}}if(u===W.GMT_CATEGORY){w=Math.min(w,AA);}w=Math.floor(Math.max(w,10));return w;case N._TICK_CATEGORY:case N._TICK_VALUE:case N._TICK_GRID:v=24;var AK=24;if(AJ===N._TICK_CATEGORY){AK=x/AH;}var AM=AK*t;if(AJ===N._TICK_CATEGORY){AM=Math.min(AM,v);}return AM+0.5;default:return 0;}},GetScaledSize:function n(t,v,s){if(!this.mHasSizeBy){return v;}var r=this.mElementsInfo.Min.Mode,u=this.ToRatioEx(t,(r===c._PROPORTIONAL));if(r===c._PROPORTIONAL&&s!==null&&s!==undefined){if(s===h._CIRCLE||s===h._PIE||s===h._PIESLICE||s===h._SQUARE){u=Math.sqrt(u);}}return this.GetScaledSizeWithRatio(u,v);},GetScaledSizeWithRatio:function I(w,y,s){var r=false,t=this.mElementsInfo,u=t.Min.Mode,x;if(!(isNaN(s)||s===null)){x=s;r=true;}else{x=t.Min.Size;}if(u===c._MANUAL){x=t.Min.Size*y;if(x<0){x=0;}if(x>y){x=y;}}else{if(u===c._PROPORTIONAL){return Math.max(this.mConstants.MinimalSize.ProportionalMin,w*y);}else{if(!r){x=this.mConstants.MinimalSize.General;}}}var v=Math.max((y-x),0);var z=w*v+x;return Math.min(z,y);},ToRatio:function B(t,r,s,u){u=u||false;if(u){if(s>0){s=0;}if(r<0){r=0;}}if(s===r){return 1;}if(t>r){t=r;}if(t<s){t=s;}return Math.min((t-s)/(r-s),1);},ToRatioEx:function R(u,t){t=t||false;var r=this.mMaxSizeVal,s=this.mMinSizeVal;if(t){u=Math.abs(u);r=Math.max(Math.abs(r),Math.abs(s));s=0;}else{u=Math.min(r,u);u=Math.max(s,u);}if(this.mCustomScaleForSizeBy){return this.ToRatio(u,r,s,false);}return this.ToRatio(u,r,s,t);},getCondensedTextLimit:function e(r){switch(r){case 4:return this.mConstants.CondenseLimit.Percentage;}return this.mConstants.CondenseLimit.Default;},GetRealTripleId:function A(t,r,s){var u=800,v=new V.TripleId({TripleId:s});if(s.mSeriesId>=0){v.mSeriesId+=r*u;}if(s.mGroupId>=0){v.mGroupId+=t*u;}return v;},GetLogicalTripleId:function p(s){var t=new V.TripleId({TripleId:s}),r=341;if(s.mObjectId===r){t.mSeriesId=this.hGetLogicalId(t.mSeriesId);t.mGroupId=this.hGetLogicalId(t.mGroupId);}return t;},hGetLogicalId:function F(r){var s=800;if(r<0){return r;}r%=s;return r;},GetValueAxisZoomScale:function f(r){return 1;},checkPaddingBetweenLabels:function E(s,r,v,x){if(v===undefined){return s.HasIntersection(r);}var u=0,w=1,y,t;if(x){y=Math.abs(s.x+s.width/2-r.x-r.width/2);}else{y=Math.abs(s.y+s.height/2-r.y-r.height/2);}switch(v){case u:t=this.getPadding(S.kBetweenLabelCenters);break;case w:if(x){y-=0.5*(s.width+r.width);}else{y-=0.5*(s.height+r.height);}t=this.getPadding(S.kBetweenLabels);break;default:return s.HasIntersection(r);}return y<t;},checkLabelPaddingToBorder:function l(v,s,x,w){var t,r,u=this.getPadding(S.kLabelToChart);if(w){t=v.x;r=v.x+v.width;}else{t=v.y;r=v.y+v.height;}return(t>=s+u)&&(r+u<=x);},getPadding:function L(r){switch(r){case S.kBetweenLabels:return 10;case S.kBetweenLabelLines:return 5;case S.kLabelToChart:return 5;case S.kNumericLabelToTick:return 4;case S.kExtra:return 2;case S.kChartToChart:return 10;case S.kEndTickToChart:return 10;case S.kEndLabelToChart:return 5;case S.kBetweenLabelCenters:return 20;case S.kBandSide:var s=this.mElementsInfo.Max.Mode;if(s===c._AUTOMATIC){return 5;}return 0;case S.kCategoricalLabelToTick:return 5;case S.kDataLabel:return 5;case S.kRefLabel:return 5;case S.kAxisOriginLabel:return 5;default:return 0;}},getClippedOffset:function a(t,y,s,u,x,w,r){var v=x?u.x:u.y;return{LowOffset:Math.max(w,s-Math.abs(v-t)),HighOffset:Math.max(r,s-Math.abs(y-v))};},getSizeByPieRadius:function H(t,AA,u,x,s,w){if(t===undefined||t===null){return -1;}var z=t.GetSizeByData(AA,u);if(z===undefined){return -1;}var AB,r=this.mElementsInfo.Min.Mode;var y=this.ToRatioEx(z,r===c._PROPORTIONAL);if(r===c._PROPORTIONAL){var v=Math.max(0,w-this.mConstants.MinimalSize.Pie);AB=Math.round(v*y+this.mConstants.MinimalSize.Pie);}else{AB=this.GetScaledSizeWithRatio(y,w,this.mConstants.MinimalSize.Pie);}return AB;},updateGMGraphTypeWithMarkerShape:function K(r){if(r){this.mMarkerShape=r;}if(this.mMarkerShape!==202&&this.mMarkerShape!==201){return ;}switch(this.mGraphType){case d.DssGraphTypeGridChart:this.mGraphType=d.DssGraphTypeGrid_Pies;return ;case d.DssGraphTypeX_Y_Scatter:case d.DssGraphTypeDualAxis_X_Y_Scatter:case d.DssGraphTypeX_Y_Scatter_with_Labels:case d.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:this.mGraphType=d.DssGraphTypeScatter_Pies;return ;case d.DssGraphTypeBubble:case d.DssGraphTypeBubble_DualAxis:case d.DssGraphTypeBubble_With_Labels:case d.DssGraphTypeBubble_DualAxis_With_Labels:this.mGraphType=d.DssGraphTypeBubble_Pies;return ;case d.DssGraphTypeVertical_Area_Absolute:case d.DssGraphTypeVertical_Area_DualAxis_Absolute:case d.DssGraphTypeVertical_Area_BiPolar_Absolute:case d.DssGraphTypeVertical_Line_Absolute:case d.DssGraphTypeVertical_Line_BiPolar_Absolute:case d.DssGraphTypeVertical_Line_DualAxis_Absolute:case d.DssGraphTypeVertical_Bar_BiPolar_Absolute:case d.DssGraphTypeVertical_Bar_DualAxis_Absolute:case d.DssGraphTypeVertical_Bar_Absolute:case d.DssGraphTypeVertical_Bar_Side_by_Side:case d.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case d.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:this.mGraphType=d.DssGraphTypeVertical_CategoryPies_Absolute;return ;case d.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case d.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case d.DssGraphTypeHorizontal_Bar_Absolute:case d.DssGraphTypeHorizontal_Area_Absolute:case d.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case d.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case d.DssGraphTypeHorizontal_Line_Absolute:case d.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case d.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case d.DssGraphTypeHorizontal_Bar_Side_by_Side:case d.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case d.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:this.mGraphType=d.DssGraphTypeHorizontal_CategoryPies_Absolute;return ;case d.DssGraphTypeVertical_Bar_DualAxis_Stacked:case d.DssGraphTypeVertical_Bar_Stacked:case d.DssGraphTypeVertical_Bar_BiPolar_Stacked:case d.DssGraphTypeVertical_Area_BiPolar_Stacked:case d.DssGraphTypeVertical_Area_DualAxis_Stacked:case d.DssGraphTypeVertical_Area_Stacked:case d.DssGraphTypeVertical_Line_Stacked:case d.DssGraphTypeVertical_Line_BiPolar_Stacked:case d.DssGraphTypeVertical_Line_DualAxis_Stacked:this.mGraphType=d.DssGraphTypeVertical_CategoryPies_Stacked;return ;case d.DssGraphTypeHorizontal_Bar_Stacked:case d.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case d.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case d.DssGraphTypeHorizontal_Area_Stacked:case d.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case d.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case d.DssGraphTypeHorizontal_Line_Stacked:case d.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case d.DssGraphTypeHorizontal_Line_DualAxis_Stacked:this.mGraphType=d.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case d.DssGraphTypeVertical_Bar_Percent:case d.DssGraphTypeVertical_Line_Percent:case d.DssGraphTypeVertical_Area_Percent:this.mGraphType=d.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case d.DssGraphTypeHorizontal_Bar_Percent:case d.DssGraphTypeHorizontal_Line_Percent:case d.DssGraphTypeHorizontal_Area_Percent:this.mGraphType=d.DssGraphTypeVertical_CategoryPies_Percent;return ;}},isCombinationChart:function J(){return this.mMarkerShape===g.DssGraphMarkerShapeCombined;},isPieOrRingShape:function T(){return this.mMarkerShape===g.DssGraphMarkerShape2DPie||this.mMarkerShape===g.DssGraphMarkerShape2DRingPie;},getPieShapeLayout:function k(){switch(this.mGraphType){case d.DssGraphTypeHorizontal_CategoryPies_Absolute:case d.DssGraphTypeHorizontal_CategoryPies_Stacked:case d.DssGraphTypeHorizontal_CategoryPies_Percent:case d.DssGraphTypeVertical_CategoryPies_Absolute:case d.DssGraphTypeVertical_CategoryPies_Stacked:case d.DssGraphTypeVertical_CategoryPies_Percent:return W.GMT_CATEGORY;case d.DssGraphTypeScatter_Pies:return W.GMT_SCATTER;case d.DssGraphTypeBubble_Pies:return W.GMT_BUBBLE;case d.DssGraphTypeGrid_Pies:return W.GMT_GRID;default:return W.GMT_SPECTRAL;}},markerToShape:function G(r){switch(r){case g.DssGraphMarkerShapeCircle:return h._CIRCLE;case g.DssGraphMarkerShapeRectangle:case g.DssGraphMarkerShapeSquare:return h._SQUARE;case g.DssGraphMarkerShape2DPie:case g.DssGraphMarkerShape2DRingPie:return h._PIE;case g.DssGraphMarkerShapeGMTick:return h._TICKER;default:return h._GENERIC;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.GraphAxisGeneral=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphAxisGeneral",mAxisLabelsLocation:-1,mAxisDrawInReverse:false,mShowAxisLine:true,mShowAxisLabels:true,mShowAxisTitle:false,mAxisDirection:-1,mUseInterlacedGrids:false,init:function A(B){if(B.AxisLabelsLocation!==undefined){this.mAxisLabelsLocation=B.AxisLabelsLocation;}if(B.AxisDrawInReverse!==undefined){this.mAxisDrawInReverse=B.AxisDrawInReverse;}if(B.ShowAxisLine!==undefined){this.mShowAxisLine=B.ShowAxisLine;}if(B.ShowAxisLabels!==undefined){this.mShowAxisLabels=B.ShowAxisLabels;}if(B.ShowAxisTitle!==undefined){this.mShowAxisTitle=B.ShowAxisTitle;}if(B.AxisDirection!==undefined){this.mAxisDirection=B.AxisDirection;}if(B.UseInterlacedGrids!==undefined){this.mUseInterlacedGrids=B.UseInterlacedGrids;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var R=mstrmojo.chart;mstrmojo.chart.Point2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Point2D",x:0,y:0,init:function P(V){if(V){if(V.Point2D){this.x=V.Point2D.x;this.y=V.Point2D.y;}else{this._super(V);}}},Reset:function A(V,W){this.x=V;this.y=W;},ResetPoint:function N(V){this.x=V.x;this.y=V.y;},DistanceSquared:function D(V){return(this.x-V.x)*(this.x-V.x)+(this.y-V.y)*(this.y-V.y);},Distance:function C(V){return Math.sqrt(this.DistanceSquared(V));},isEqual:function O(V){return(this.x===V.x&&this.y===V.y);},IsInPolygon:function I(Y){var Z=Y.length,V=false,X,W;if(Z<3){return false;}for(X=0,W=Z-1;X<Z;W=X++){if(((Y[X].y<=this.y&&this.y<Y[W].y)||(Y[W].y<=this.y&&this.y<Y[X].y))&&this.x<=(Y[W].x-Y[X].x)*(this.y-Y[X].y)/(Y[W].y-Y[X].y)+Y[X].x){V=!V;}}return V;},IsStrictlyInPolygon:function K(Z){var Y=new R.Point2D({x:this.x+0.1,y:this.y}),W=new R.Point2D({x:this.x-0.1,y:this.y}),V=new R.Point2D({x:this.x,y:this.y+0.1}),X=new R.Point2D({x:this.x,y:this.y-0.1});if(Y.IsInPolygon(Z)){return false;}if(W.IsInPolygon(Z)){return false;}if(V.IsInPolygon(Z)){return false;}return !X.IsInPolygon(Z);},Rotate:function M(W,Y){var V=this.x-W.x,X=this.y-W.y;this.x=W.x+Math.cos(Y)*V-Math.sin(Y)*X;this.y=W.y+Math.sin(Y)*V+Math.cos(Y)*X;},MiddleTo:function F(V){return new R.Point2D({x:(this.x+V.x)/2,y:(this.y+V.y)/2});},Shifted:function Q(V){return new R.Point2D({x:this.x+V.x,y:this.y+V.y});},NegativeShifted:function T(V){return new R.Point2D({x:this.x-V.x,y:this.y-V.y});},swap:function L(){var V=this.x;this.x=this.y;this.y=V;},swapPoints:function B(W){var V;V=this.x;this.x=W.x;W.x=V;V=this.y;this.y=W.y;W.y=V;},IsOnSegment:function H(Y,W,X){var V=X?0.01:-0.01;if(Math.abs(Y.x-W.x)<0.01){if((this.y-Y.y)>V&&(W.y-this.y)>V){return true;}if((this.y-W.y)>V&&(Y.y-this.y)>V){return true;}}else{if((this.x-Y.x)>V&&(W.x-this.x)>V){return true;}if((this.x-W.x)>V&&(Y.x-this.x)>V){return true;}}return false;},IsOnVerOrHorSegment:function G(W,V){if(this.y===W.y&&this.y===V.y){return(((this.x-W.x)>=0&&(V.x-this.x)>=0)||((this.x-W.x)<=0&&(V.x-this.x)<=0));}if(this.x===W.x&&this.x===V.x){return(((this.y-W.y)>=0&&(V.y-this.y)>=0)||((this.y-W.y)<=0&&(V.y-this.y)<=0));}return false;},DistanceToLine:function J(d,Z){var a=this.DistanceSquared(d),W=this.DistanceSquared(Z),Y=d.DistanceSquared(Z),c=0.01,V,b,X;if(a<c||W<c){return 0;}if(Y<c){return Math.sqrt(a);}if(a>=W+Y){return Math.sqrt(W);}if(W>=a+Y){return Math.sqrt(a);}V=new R.Point2D({x:this.x-d.x,y:this.y-d.y});b=new R.Point2D({x:Z.x-d.x,y:Z.y-d.y});X=V.x*b.y-V.y*b.x;return(X<0?-X:X)/Math.sqrt(Y);},DistanceToPolygon:function S(X){var Z=X.length,V=this.DistanceToLine(X[0],X[Z-1]),Y,W;if(this.IsInPolygon(X)){return 0;}for(W=0;W+1<Z;++W){Y=this.DistanceToLine(X[W],X[W+1]);if(V>Y){V=Y;}}return V;},rotateAndClone:function E(V,W){this.Rotate(V,W);return this;},clone:function U(){return new R.Point2D({Point2D:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var A=mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition;mstrmojo.chart.GMDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GMDataLabelInfo",display:false,isValid:false,SeriesId:0,GroupId:0,HostMarkerBound:null,Label:null,DataLabelLocation:A._BOTTOM,dataLabelLCenterPoints:[],CenterXOffset:0,CenterYOffset:0,dataLabelPosition:[],XIndex:0,YIndex:0,SeriesInfo:0,HostMarkerPoint:null,init:function B(C){this.dataLabelLCenterPoints=[];this.dataLabelPosition=[];this._super(C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.HSLColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.HSLColor",h:0,s:0,l:0});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ChartCanvas=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartCanvas",chartContext:null});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=mstrmojo.chart;mstrmojo.chart.JSONParameter=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONParameter",mIsFirstFrameSet:false,mIsLastFrameSet:false,mParameterName:"",mParameterValue:null,mParameterStartValue:null,init:function E(H){this._super(H);this.mIsFirstFrameSet=!H.mIsLastFrameSet;if(this.mIsFirstFrameSet){this.mParameterStartValue=H.mParameterValue;}},SetName:function D(H){this.mParameterName=H;},GetName:function C(){return this.mParameterName;},SetValue:function G(H,I){if(I){this.mParameterValue=H;this.mIsLastFrameSet=true;}else{this.mParameterStartValue=H;this.mIsFirstFrameSet=true;}},GetValue:function A(H){return H?this.mParameterValue:this.mParameterStartValue;},AppendToJSONObject:function F(J){var H,I=function I(K,L){if(K instanceof B.Point2D){J[L]={X:K.x,Y:K.y};}else{if(K instanceof B.Rect2D){J[L]={X:K.x,Y:K.y,Width:K.width,Height:K.height};}else{if(K instanceof B.RGBColor){J[L]={R:K.mR,G:K.mG,B:K.mB};}else{J[L]=K;}}}};if(this.mIsLastFrameSet&&this.mIsFirstFrameSet){J[this.mParameterName]=[this.mParameterStartValue,this.mParameterValue];}else{if(this.mIsLastFrameSet){I(this.mParameterValue,this.mParameterName);}else{if(this.mIsFirstFrameSet){I(this.mParameterStartValue,this.mParameterName);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphRegressionType");var B=mstrmojo.chart.model,D=B.enums,A=D.EnumDSSGraphRegressionType;mstrmojo.chart.GraphTrendLineOptions=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphTrendLineOptions",mRegressionType:A.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeansonal:false,init:function C(E){if(E){if(E.RegressionType){this.mRegressionType=E.RegressionType;}if(E.Order){this.mOrder=E.Order;}if(E.Period){this.mPeriod=E.Period;}if(E.ShowEquation){this.mShowEquation=E.ShowEquation;}if(E.ShowCoefficients){this.mShowCoefficients=E.ShowCoefficients;}if(E.UserSeriesGraphColor){this.mUserSeriesGraphColor=E.UserSeriesGraphColor;}if(E.Seasonal){this.mSeasonal=E.Seasonal;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.JSONUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUtil",AppendCompoundPointerVectorToJSONObject:function A(E,C,G){var F,B,D;D=G[E]=[];B=C.length;if(B>0){for(F=0;F<B;++F){C[F].AppendToJSONObject(D);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=0;mstrmojo.chart.FormatBase=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatBase",init:function A(C){}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var S=mstrmojo.chart,M=295,B=301,H=289,C=271,T=277,E=10003,V=100200,G=20000,U=20001,O=20002,Q=20003,N=20004,P=20005,L=20006,J=20007,I=21007,A=S.gNullObjectId=-3,F=S.gNullSeriesId=-3,D=S.gNullGroupId=-3;mstrmojo.chart.TripleId=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.TripleId",mObjectId:A,mSeriesId:F,mGroupId:D,init:function R(W){if(!W){this.mObjectId=A;this.mSeriesId=F;this.mGroupId=D;}else{if((W instanceof Array)&&W.length>=3){this.mObjectId=W[0];this.mSeriesId=W[1];this.mGroupId=W[2];}else{if(W.TripleId){var X=W.TripleId;this.mObjectId=X.mObjectId;this.mSeriesId=X.mSeriesId;this.mGroupId=X.mGroupId;}else{this.mObjectId=(W.ObjectId!==undefined)?W.ObjectId:A;this.mSeriesId=(W.SeriesId!==undefined)?W.SeriesId:F;this.mGroupId=(W.GroupId!==undefined)?W.GroupId:D;}}}}});S.gNullTripleId=new mstrmojo.chart.TripleId({ObjectId:A,SeriesId:F,GroupId:D});var K=S.gAxisTripleIds={};K.Y1=new mstrmojo.chart.TripleId({ObjectId:M,SeriesId:0,GroupId:D});K.Y2=new mstrmojo.chart.TripleId({ObjectId:B,SeriesId:0,GroupId:D});K.X1=new mstrmojo.chart.TripleId({ObjectId:H,SeriesId:0,GroupId:D});K.X2=new mstrmojo.chart.TripleId({ObjectId:V,SeriesId:0,GroupId:D});K.Z=new mstrmojo.chart.TripleId({ObjectId:E,SeriesId:0,GroupId:D});K.O1=new mstrmojo.chart.TripleId({ObjectId:C,SeriesId:0,GroupId:D});K.O2=new mstrmojo.chart.TripleId({ObjectId:T,SeriesId:0,GroupId:D});mstrmojo.chart.ManagerId=new mstrmojo.chart.TripleId({ObjectId:G,SeriesId:-3,GroupId:D});mstrmojo.chart.PlotManagerId=new mstrmojo.chart.TripleId({ObjectId:U,SeriesId:F,GroupId:D});mstrmojo.chart.PlotId0=new mstrmojo.chart.TripleId({ObjectId:O,SeriesId:0,GroupId:D});mstrmojo.chart.BarRenderer0=new mstrmojo.chart.TripleId({ObjectId:P,SeriesId:0,GroupId:D});mstrmojo.chart.LineRenderer0=new mstrmojo.chart.TripleId({ObjectId:L,SeriesId:0,GroupId:D});mstrmojo.chart.AreaRenderer0=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:0,GroupId:D});mstrmojo.chart.RenderLayer2=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:2,GroupId:D});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.MapStructure=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.MapStructure",map:null,init:function H(K){this._super(K);this.map={};},replace:function B(L,O){var N=(L&&L.length)||0,P,M,K;for(K=0,P=this.map;K<N-1;K++){M=P[L[K]];if(M===undefined){M=P[L[K]]={};}P=M;}P[L[N-1]]=O;},replaceByTripleId:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId],L);},replaceByGraphPropertyKey:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId],L);},push:function G(K,L){this.replace(K,L);},find:function F(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}return O[L[N-1]];},findByTripleId:function J(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId]);},findByGraphPropertyKey:function I(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},deleteElement:function A(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}delete O[L[N-1]];},deleteByTripleId:function E(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId]);},deleteByGraphPropertyKey:function C(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},clear:function D(){this.map={};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumFormatType");var C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONFormat",mpOriginalAddress:0,mFormatType:A.FMT_UNDEFINED,init:function D(E){if(E.Font){this.mpOriginalAddress=E.Font.id;}else{if(E.Line){this.mpOriginalAddress=E.Line.id;}else{this.mpOriginalAddress=E.id;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){var D={};var B="XHRServerTransport";mstrmojo.XHRServerTransport={serverRequest:function A(I,G,F){var E=mstrmojo.all[I],H=D[G]=new mstrmojo.SimpleXHR();$MAPF(true,B,"transportRequest");if(F.params&&!F.params.sessionState&&mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){F.params.sessionState=mstrApp.sessionState;}H.request(F.config.method||"POST",F.taskURL||mstrConfig.taskURL,{success:function(J){if(J.mstrerr){J.code=J.mstrerr.code;J.message=J.mstrerr.message;}E.response(G,true,J);},failure:function(J){E.response(G,false,{code:J.getResponseHeader("X-MSTR-TaskErrorCode"),message:J.getResponseHeader("X-MSTR-TaskFailureMsg")});},complete:function(){delete D[G];},textResponse:F.callback.textResponse},F.params);},cancelRequest:function C(F){var G=D[F],E=false;if(G){E=G.cancel();delete D[F];}$MAPF(false,B,"transportRequest");return E;}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.QueuedXHR");var F=mstrmojo.hash;function J(K,L){return function(){if(K[L]){K[L]();}};}var B=[];function H(L){var K;switch(L.cacheLevel){case mstrmojo.AjaxCall.CACHELEVEL_LOCAL:if(L._cache==null){L._cache=[];}K=L._cache;break;default:if(B==null){B=[];}K=B;break;}return K;}function E(N){var M=H(N);var P={cache:M,idx:-1},O=N.params;if("xts" in O){delete O.xts;}for(var L=0,K=M.length;L<K;L++){var Q=M[L];if(Q&&F.equals(Q.url,N.url)&&F.equals(Q.params,O)){P.idx=L;break;}}return P;}function C(L){var K=H(L),M=F.copy(L.params);delete M.xts;K.push({url:L.url,params:M,res:F.copy(L.response)});}function D(K){var L=E(K);if(L&&L.idx>=0){K.response=L.cache[L.idx].res;return true;}return false;}mstrmojo.AjaxCall=mstrmojo.declare(mstrmojo.QueuedXHR,null,{scriptClass:"mstrmojo.AjaxCall",method:"POST",url:"",params:null,onsuccess:null,onerr:null,oncomplete:null,oncancel:null,readCache:false,writeCache:false,cacheLevel:"",_cache:null,useQueue:false,init:function I(K){this._super(K);F.copy(K,this);},send:function A(){var K=this;if(this.readCache&&D(this)){this.onsuccess();return ;}this.request(this.method,this.url,{success:function(){if(K.writeCache){C(K);}if(K&&K.onsuccess){K.onsuccess();}},failure:J(K,"onerr"),complete:J(K,"oncomplete")},this.params,!this.useQueue);},cancel:function G(){this._super();if(this.oncancel){this.oncancel();}}});mstrmojo.AjaxCall.CACHELEVEL_GLOBAL="global";mstrmojo.AjaxCall.CACHELEVEL_LOCAL="local";})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.expr","mstrmojo.css");var G=mstrmojo.array,F=mstrmojo.expr,H=mstrmojo.css;mstrmojo._IsExprNode=mstrmojo.provide("mstrmojo._IsExprNode",{ind:function B(){var L=this.parent;if(L&&L.indent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.indent(K);}}},out:function D(){var L=this.parent;if(L&&L.outdent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.outdent(K);}}},andOrTxt:function A(){var M=this.parent,K=M&&M.data,L="",N=this.data;if(K&&(K.et===F.ET.ANDOR)&&K.fn){L=K.fn+(N&&N.not?"_"+F.FN.NOT:"");L=F.BRANCH_FNS[L];}return'<span class="mstrmojo-text mstrmojo-andor">'+L+"</span>";},getPrefixAndOrToolsMarkup:function(){return('<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5896,"Ungroup Conditions")+"</span>");},premousedown:function J(K){var L=mstrmojo.dom.eventTarget(K.hWin,K.e);if(this.prefixHoverNode&&mstrmojo.dom.contains(this.prefixHoverNode,L,false)){mstrmojo.dom.stopPropogation(K.hWin,K.e);return ;}if(this._super){this._super(K);}},isSelectableArea:function E(K){return true;},childIndex:function I(){var M=this.parent,K=M&&M.data,L=K&&K.nds,N=this.data;if(L&&N){return G.indexOf(L,N);}return -1;},toggleGroupBorder:function C(K){H.toggleClass(this.parent.itemsContainerNode.childNodes[this.childIndex()-1].firstChild,"upgroup",K);H.toggleClass(this.domNode,"downgroup",K);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(k,Z,j,n,W,c,o,m){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(k),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=j+n,d=e[0].offsetTop,b;for(var l=1;l<=Y;l++){b=e[g].offsetTop-d+m;if(b<j){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,l+1));g+=(b>j)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(e,b,h,d,a,i){var l=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=l+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},n=function m(k,j){for(var o=k;o<j;o++){Y[W++]=l;var p=b.build(h,d,e[o],o);if(V[o]){p=p.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=p;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){n(0,a);}i=i&&b?Math.min(i,c-a):0;var f=c-i;for(var X=a;X<f;X++){Y[W++]=Z;}if(i){n(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,m,f,W,b,l){var e=(g&&g.length)||0,j=this.wrapperNodes(X),n=f.itemStatus,V=mstrmojo.css,Z=m.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(n[c]!==A){j[c].innerHTML=d.build(m,f,g[c],c);if(Z[c]){var Y=j[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===l){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var G=mstrmojo.dom,J=mstrmojo.css,H="selected";function B(S,T,U,R,W){var V=W.listHooks[S];if(V&&V.call(W,T,U,R)){return ;}J.toggleClass(T,H,S==="select");}function I(U,T,S){var V=this[U],R=V?V.split(T):[];this[U]=mstrmojo.array.distinct(R.concat(S.split(T))).join(T);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,init:function Q(R){this._super(R);this._shiftStartIndex=-1;},getItemMarkup:function O(S,R){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';},getItemDisplayName:function E(R){return R.n||"";},getItemProps:function K(V,R){var S=!!this.selectedIndices[R],W={tag:"div",sel:S,cls:"",n:this.getItemDisplayName(V),style:"",idx:R,addCls:function T(Y){I.call(this,"cls"," ",Y);},addStyle:function U(Y){I.call(this,"style",";",Y);},title:V.title||""};if(S){W.addCls(H);}var X=V.cls;if(X){W.addCls(X);}return W;},itemRenderer:{render:function A(S,R,T){S._renderIdx=R;return mstrmojo.string.apply(T.getItemMarkup(S,R),T.getItemProps(S,R));},select:function L(S,T,R,U){B("select",S,T,R,U);},unselect:function D(S,T,R,U){B("unselect",S,T,R,U);}},onclick:function P(R){try{var T=this.getItemFromTarget(R.getTarget());if(T){R.cancel();this.doItemSelect(T,R||{});}}catch(S){mstrApp.onerror(S);}},doItemSelect:function F(j,b){var R=b.hWin,h=b.e,c=j._renderIdx,W=j._positionIdx,S=G.isMetaKey(R,h),Z=G.shiftKey(R,h),Y=this.multiSelect,U=this.useListModKeys,d=this._shiftStartIndex,X=this.selectedIndices;if(Y&&U&&Z&&d>-1){var g=[],T=[],V=Math.min(d,c),k=Math.max(d,c),f;for(f=0;f<this.items.length;f++){if(V<=f&&f<=k){if(!X[f]){g.push(f);}}else{if(X[f]){T.push(f);}}}this.addSelect(g);this.removeSelect(T);}else{if(Y&&(!U||S)){var a=(X[c])?"remove":"add";this[a+"Select"](c,false,W);}else{this.singleSelect(c,false,W);}this._shiftStartIndex=c;}},onclearSelection:function N(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function C(S){var R=G.findAncestorByAttr(S,"idx",true,this.domNode);return(R&&R.node)||null;},getItemFromTarget:function M(T){var S=this.getItemNodeFromTarget(T),R=S&&parseInt(S.getAttribute("idx"),10);if(R!==null&&!isNaN(R)&&this.items){return this.items[R];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=H;}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.hash","mstrmojo.css");var F=mstrmojo.hash,C=mstrmojo.css;var D="open";function E(G){return G?G.popupConfig.hostElement:null;}mstrmojo.ui.menus._HasMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._HasMenuPopup",F.copy(mstrmojo._HasPopup));mstrmojo.ui.menus._HasMenuPopup.openPopup=function A(I,G){var H=this._lastOpened;if(H){this.closePopup();}mstrmojo._HasPopup.openPopup.call(this,I,G);C.addClass(E(I),D);};mstrmojo.ui.menus._HasMenuPopup.closePopup=function B(){C.removeClass(E(this._lastOpened),D);mstrmojo._HasPopup.closePopup.call(this);};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var Y=mstrmojo.css,H=mstrmojo.dom,O=mstrmojo.array,K={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},W="scrollingMode",R="scrolling",b=3;var L=H.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function J(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function P(d,c){var i=H.eventTarget(c,d),g=this.scrollNode,f=H.position(g),h=this.scrollTrackNodes,e=this.scrollBarNodes,j=function j(r){var p=i===h[r];if(p){var s=K[r],k=e[r],t=H.position(k),m=H.getMousePosition(d,c)[s.position],n=m-t[s.position],l=n>0?1:-1,q=g[s.scrollDimension],u=Math.abs(n-(t.h/2))*(q/f[s.dimension]),o={};o[s.scroll]={isStyle:false,start:g[s.scroll],stop:g[s.scroll]+(l*Math.min(q/3,500,u)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:o,duration:200,interval:10,target:g})).play();}};j.call(this,"h");j.call(this,"v");}function B(d,c){var g=this.scrollNode,f=d.type==="mousewheel",e=f?-1:1;mstrmojo.array.forEach(["h","v"],function(n){var l=K[n],i=f?"wheelDelta":"delta",k=d[i+{h:"X",v:"Y"}[n]]*e,j=Math.abs(k),h=k/j,m=j===3&&H.isFF&&!L;g[l.scroll]+=m?h*40:k;});H.stopPropogation(c,d);H.preventDefault(c,d);}function a(h){var g=K[h],f=this.scrollNode,e=H.position(f),d=e[g.dimension],i=f[g.scrollDimension],c=Math.ceil(d)/i;return A(c,d,i);}function A(d,c,e){return(!isNaN(d)&&d<1)&&(Math.abs(c-e)>b);}function C(x){var q="px",k=K[x],e=this.scrollNode,l=J.call(this),y=H.position(e),m=y[k.dimension],s=e[k.scrollDimension],d=Math.ceil(m)/s,w=this.scrollBarNodes,i=w[x],o=this.scrollTrackNodes,p=o[x],u=A(d,m,s),f=k.cls;if(!i){p=o[x]=document.createElement("div");var g=this,n=function(AA){P.call(g,AA);},j=function(AA){B.call(g,AA);},t=function(AC,AA,AB){H.attachEvent(AC,AA,AB);g.installedEventListeners.push({e:AC,evt:AA,fn:AB});};t(p,"click",n);p.className="mstrmojo-scrolltrack "+f;i=w[x]=document.createElement("div");i.className="mstrmojo-scrollbar "+f;p.appendChild(i);l.appendChild(p);var v=mstrApp.isSingleTier?"mousewheel":"wheel";t(p,v,j);t(i,v,j);}var z=i.style,h=(e[k.scroll]/e[k.scrollDimension]),c=H.delta(e,J.call(this))[k.position],r=p.style;if(u){r[k.styleDir]=c+q;z[k.styleDim]=(d*m)+q;z[k.styleDir]=(m*h)+q;}Y.toggleClass(l,k.hostCls,u);Y.toggleClass(e,k.scrollNodeCls,u);return u;}function G(){return !(mstrApp.isSingleTier&&L);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function T(c){this._super(c);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=G();}this.installedEventListeners=[];},onRender:function I(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function F(){var d=this.scrollNode;if(d){var c=H.attachMarkupEvent(this.id,d,"scroll");this.installedEventListeners.push({e:d,evt:"scroll",fn:c});}if(!this.hasCustomScrollbar){Y.addClass(d,"mstrmojo-sb-show-default");return ;}if(d){Y.addClass(J.call(this),"mstrmojo-scrollbar-host");Y.addClass(d,"mstrmojo-scrollNode");}},updateScrollbars:function Z(){if(!this.hasRendered){return ;}this.setupScrollNodes();if(!this.hasCustomScrollbar){if(this.scrollNode){this.scrollNode.style.overflowX=a.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};var c=this.scrollNode.style;c.overflowY=C.call(this,"v")?"scroll":"hidden";c.overflowX=C.call(this,"h")?"scroll":"hidden";}},onscroll:function V(){var j=this.scrollNode;if(j&&this.hasCustomScrollbar){var g=function g(k){var l=parseInt(k);return l===null||isNaN(l)?0:l;},h=H.position(j),i=h.h-g(Y.getStyleValue(j,"padding-bottom")),d=h.w-g(Y.getStyleValue(j,"padding-right")),f=this.scrollBarNodes,e=f.v,c=f.h;if(j.scrollHeight-i>0){e.style.top=((i-H.position(e).h)*(j.scrollTop/(j.scrollHeight-i)))+"px";}if(j.scrollWidth-d>0){c.style.left=((d-H.position(c).w)*(j.scrollLeft/(j.scrollWidth-d)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function E(d){var g=this.scrollNode,f=H.position(g),e=d.src.node,c=this.scrollBarNodes;if(this.isDraggingScrollBar(d)){return{isScrollBar:true,direction:e===c.v?"v":"h",scrollTop:g.scrollTop,scrollLeft:g.scrollLeft,conversionRatio:{y:g.scrollHeight/f.h,x:g.scrollWidth/f.w}};}return(this._super&&this._super(d));},isDragValid:function D(c){return this.isDraggingScrollBar(c)||(this._super&&this._super(c))||false;},isDraggingScrollBar:function S(d){var e=d.src.node,c=this.scrollBarNodes;return !!c&&(e===c.v||e===c.h);},ondragstart:function X(c){if(this.isDraggingScrollBar(c)){Y.addClass(c.src.node,R);Y.addClass(J.call(this),W);}if(this._super){this._super(c);}},shouldDragBubble:function Q(c){var d=c.src.node,e=this.scrollTrackNodes;return !!e&&(d===e.v||d===e.h);},ondragmove:function N(d){if(this.isDraggingScrollBar(d)){var l=d.tgt,c=d.src,m=l.pos,e=c.pos,i=c.node,h=this.scrollNode,k=this.scrollBarNodes,j=c.data,g={y:(m.y-e.y),x:(m.x-e.x)},f=j.conversionRatio;if(i===k.v){h.scrollTop=j.scrollTop+(g.y*f.y);}else{h.scrollLeft=j.scrollLeft+(g.x*f.x);}}if(this._super){this._super(d);}},ondragend:function N(c){if(this.isDraggingScrollBar(c)){Y.toggleClass(c.src.node,R,false);Y.toggleClass(J.call(this),W,false);}if(this._super){this._super(c);}},widgetResized:function M(){if(this._super){this._super();}this.updateScrollbars();},unrender:function U(c){O.forEach(this.installedEventListeners,function(d){H.detachEvent(d.e,d.evt,d.fn);});delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(c);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.fx.AnimateProp");var S=mstrmojo.css;var Q=10;function C(W,Z,Y){W.pauseScrollRendering(true);var X=W.scrollboxNode,V=W.animate?W.scrollEffect:null;if(V&&V.play){if(V.isPlaying){V.cancel();}V.props={scrollTop:{start:X.scrollTop,stop:Z,isStyle:false}};V.onEnd=function(){W.pauseScrollRendering(false,null,Y);};V.play();}else{X.scrollTop=Z;W.pauseScrollRendering(false,null,Y);}}function K(c,e,V){var W=4;if(!V){V=0;}var f=Math.round(c.renderBlockSize/2);c.fillAt(Math.max(0,e-f),e+f);var b=c.itemsContainerNode,a=b.childNodes[e],Z=c.listMapper.itemOffsetTop(c,b,null,a),d=parseInt(c.scrollboxNode.clientHeight/2,10)-a.offsetHeight/2,X=Math.max(0,c.spacerMargin+Z-d);if(Math.abs(c.scrollboxNode.scrollTop-X)>2){C(c,X,c.renderOnScroll?function(){if(V<=W){K(c,e,V++);}}:null);}else{var Y=c.animate?c.scrollEffect:null;if(Y&&Y.isPlaying&&Y.cancel){Y.cancel();c.pauseScrollRendering(false);}}}function J(X){var Y=X.itemsContainerNode,V=Y.lastChild,W=V?V.offsetTop+V.offsetHeight-Y.firstChild.offsetTop:0;return W;}function U(W){var V=J(W),X=Math.max(0,parseInt((W.scrollboxNode.clientHeight-V)/2,10));C(W,Math.max(0,W.spacerMargin-X));}function H(X){var V=X.selectedIndex,W=V>-1;X.set("hasSelection",W);if(!X.domNode){return ;}if(W){K(X,V);}else{U(X);}}function E(W){var Y=W.scrollboxNode,V=J(W),X=V>Y.clientHeight/2;S.toggleClass(W.upArrowNode,["enabled"],X);S.toggleClass(W.downArrowNode,["enabled"],X);}function N(V,W){var X=V.scrollboxNode;X.scrollTop=Math.min(Math.max(X.scrollTop+W,0),X.scrollHeight-X.offsetHeight);}function B(W,V){if(!W._scrollInter){var X=Q*(V?-1:1);W._scrollInter=window.setInterval(function(){N(W,X);},50);}}function R(V){if(V._scrollInter){window.clearInterval(V._scrollInter);V._scrollInter=null;}}mstrmojo._IsDial=mstrmojo.provide("mstrmojo._IsDial",{markupString:'<div id="{@id}" class="mstrmojo-Dial {@cssClass}" style="position:relative;"><div class="mstrmojo-Dial-uparrow"  onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], true)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], true)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"></div><div class="mstrmojo-Dial-scrollbox {@cssClass}" style="position:relative;{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-Dial-spacer" style="{@spacerCssText}"><div class="mstrmojo-Dial-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div></div></div><div class="mstrmojo-Dial-dnarrow" onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], false)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], false)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.childNodes[1];},spacerNode:function(){return this.domNode.childNodes[1].firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},upArrowNode:function(){return this.domNode.childNodes[0];},downArrowNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){S.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);}},animate:true,itemsEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:500,interval:25,slot:"itemsContainerNode",preStart:function(){var W=this.widget[this.slot],V=(W&&W.offsetWidth)||0;this.props=V?{left:{start:-V,stop:0,suffix:"px",isStyle:true}}:{};},revertOnCancel:false},scrollEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:250,interval:25,slot:"scrollboxNode",revertOnCancel:false},multiSelect:false,holdJumpOnly:true,audibles:{"*":true,hasSelection:false},initSpacer:function I(){var V=(this.cssText||"").match(/height:\s*(\d*)px/);if(V){this.spacerMargin=parseInt(Number(V[1])/2,10);var W=this.spacerMargin+"px";this.spacerCssText="padding-top: "+W+"; padding-bottom: "+W+";";}else{this.spacerMargin=0;delete this.spacerCssText;}},center:function T(){H(this);},preBuildRendering:function(){this.initSpacer();return this._super();},postBuildRendering:function D(){this._super();this.center();E(this);},refreshScroll:function G(){this.center();E(this);},prechange:function O(V){this._super(V);if(this.hasRendered){if(!this.multiSelect||(V&&V.added&&V.added.length)){this.center();}}},onclickarrow:function A(X,W,V){N(this,Q*(V?-1:1));},onmouseoverarrow:function L(X,W,V){if(!this.holdJumpOnly){B(this,V);}},onmouseoutarrow:function M(X,W,V){R(this);},onmousedownarrow:function F(X,W,V){if(this.holdJumpOnly){B(this,V);}},onmouseuparrow:function P(X,W,V){R(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.color","mstrmojo.hash","mstrmojo.array");var z=mstrmojo.color,V=mstrmojo.hash,BC=mstrmojo.array,A8=mstrmojo.css,d=mstrmojo.num;var BA=1,Ai=2,Aj=3,Aw=4,AQ=5,AR=6;var BH="FormattingFont",I="FormattingAppearance",X="FormattingAlignment",AX="FormattingSize",Q="FormattingPatterns",F="FormattingBorder",Av="FormattingOrder",E="FormattingView",O="FormattingSelector",Al="Template Formatting",L="FormattingPadding",Ag="AnalyticalEngineProperties",Ao="RWDocumentProperties",A5="FormattingPage",N="Mobile",T="VLDB Select";var Af=1;var g="n",M="h",BD="w",x="wm",A2="pw",W="ml",A3="mr",q="upwalw",n="ff",Aa="fsz",A6="fw",y="fit",A7="fun",k="fst",p="fc",U="alh",o="alv",AU="atw",AE="atd",a="textOverflow",Ae="bc",D="bgs",H="btc",Ad="brc",AN="bbc",m="blc",i="bts",BF="brs",Ax="bbs",AT="bls",AK="borderColor",As="borderStyle",c="zIndex",AL="showTitleBar",h="title",Ar="ctrlStyle",s="ctrlOrientation",Aq="ctrlOrientationBehavior",f="ctrlMultiselect",C="ciwm",A4="cmcy",At="sec",l="easow",AD="layoutXml",J="lockAspectRatio",Ac="ism",e="shw",Au="mg",BE="lhv",Y="gridVPadding",AZ="gridHPadding",AY="ln",AC="sar",B="hnv",AW="iw",AS="ih",AG="tsp",AO="visible",R="rf",BG="jad",Ah="jdc",Ay="fs",A1="ssc",b="sstyle",w="hgl";function P(BI){return BI;}function AI(BI){return parseInt(BI,10);}var v={name:"encode",_def:P};v[Aj]=function(BI){return BI?1:0;};v[Ai]=function(BI){if(BI==="transparent"){return -1;}if(BI.length===4){BI=BI.replace(/([0-9a-f])/ig,"$1$1");}BI=z.rgbStr2hex(BI);return parseInt(BI.substring(5)+BI.substring(3,5)+BI.substring(1,3),16);};v[Aw]=AI;v[BA]=function(BI){if(typeof BI==="number"){return d.toLocaleString(BI);}return P(BI);};v[AR]=function(BK){if(BK==="none"){return 0;}var BJ=BK.match(/([0-9]+[,\.]?[0-9]*pt)/)[0],BI=BK.match(/pt ([\w\W]*)/)[1];if(BJ==="2pt"){return 5;}switch(BI){case"solid":return 1;case"dashed":return 3;case"dotted":return 4;default:throw new Error("Invalid border style value in FormatModel::encodeValue.");}};var BB={name:"decode",_def:P};BB[Aj]=function(BI){return parseInt(BI,10)===1;};BB[Ai]=function(BI){if(BI===-1){return"transparent";}if(typeof BI==="number"){return z.decodeColor(BI);}if(BI.length===4){return BI.replace(/([0-9a-f])/ig,"$1$1");}return z.rgbStr2hex(BI);};BB[Aw]=AI;BB[AR]=function(BK){if(BK===undefined||BK===0){return"none";}var BJ="1pt",BI="solid";if(BK===5){BJ="2pt";}if(BK===3){BI="dashed";}else{if(BK===4){BI="dotted";}}return BJ+" "+BI;};function Az(){return this.pn.toLowerCase();}function AF(BI,BK,BL){var BJ=document.createElement("div");BJ.style[BL||BK]=BI[BK];return BJ;}function G(BI){return function(){return z.rgbStr2hex(BI.apply(this,arguments));};}function Ab(){var BI=Az.call(this);return BI==="underline"?BI:"line-through";}var An={name:"extract"},S=An._def=function(BI,BK,BL){var BJ=AF(BI,BK||this.getFormatBlockName(),BL);return BJ.style[this.getCssName()];};An[Ai]=G(S);function r(BI){return S.call(this,BI,this.getFormatBlockName())===Az.call(this);}function A(BI){var BJ=S.call(this,BI,this.getFormatBlockName(),this.getCssName());return BJ.indexOf(Ab.call(this))>-1;}function Am(BI){var BJ=this.getFormatBlockName();return z.rgbStr2hex(S.call(this,BI,BJ,BJ+this.pn));}var A9={name:"resolve"},Z=A9._def=function(BI,BL,BK,BM){BK=BK||this.getFormatBlockName();var BJ=AF(BI,BK);BJ.style[BM||this.getCssName()]=BL;return BJ.style[A8.convertCssToCamelCase(BK)];};A9[Ai]=function(BI,BK,BJ,BL){if(BK.or!==undefined){return BK;}return z.rgbStr2hex(Z.call(this,BI,BK,BJ,BL));};function AM(BI,BJ){return Z.call(this,BI,BJ?Az.call(this):"normal");}function AJ(BJ,BL){var BK=(BJ[this.getFormatBlockName()]||"").split(" "),BI=Ab.call(this);if(BL){if(BK.indexOf(BI)===-1){BK.push(BI);}}else{BK=BK.filter(function(BM){return BM!==BI;});}return Z.call(this,BJ,BK.join(" "));}var AV={name:"update"},A0=AV._def=function(BI,BJ){BI[this.getFormatBlockName()]=this.resolve(BI,BJ);return BI;};var AH={};AH[g]={ps:I,pn:"Name",pt:BA};AH[M]={ps:AX,pn:"Height",pt:BA};AH[BD]={ps:AX,pn:"Width",pt:BA};AH[x]={ps:AX,pn:"WidthMode",pt:Aw};AH[A2]={ps:A5,pn:"PageWidth",pt:BA};AH[W]={ps:A5,pn:"MarginLeft",pt:BA,fn:"margin-left"};AH[A3]={ps:A5,pn:"MarginRight",pt:BA,fn:"margin-right"};AH[q]={ps:A5,pn:"UsePageWidthAsLayoutWidth",pt:Aj};AH[n]={ps:BH,pn:"Name",pt:BA,fn:"font",cn:"fontFamily",extract:function(){return S.apply(this,arguments).replace(/['"]/g,"");}};AH[Aa]={ps:BH,pn:"Size",pt:Aw,fn:"font",cn:"fontSize"};AH[A6]={ps:BH,pn:"Bold",pt:Aj,fn:"font",cn:"fontWeight",extract:r,resolve:AM};AH[y]={ps:BH,pn:"Italic",pt:Aj,fn:"font",cn:"fontStyle",extract:r,resolve:AM};AH[A7]={ps:BH,pn:"Underline",pt:Aj,fn:"text-decoration",extract:A,resolve:AJ};AH[k]={ps:BH,pn:"Strikeout",pt:Aj,fn:"text-decoration",extract:A,resolve:AJ};AH[p]={ps:BH,pn:"Color",pt:Ai};AH[U]={ps:X,pn:"Horizontal",pt:Aw,fn:"text-align"};AH[AU]={ps:X,pn:"TextWrap",pt:Aj,fn:"white-space"};AH[AE]={ps:X,pn:"TextDirection",pt:Aw};AH[o]={ps:X,pn:"Vertical",pt:Aw};AH[a]={ps:AX,pn:"TextOverflow",pt:Aj};AH[Ae]={ps:Q,pn:"FillColor",pt:Ai,x:Af,fn:"background-color",update:function(BI,BK){var BJ=BI.fx;if(BK.or!==undefined){if(!BJ){BJ=BI.fx={};}var BL=BJ.gd=BJ.gd||{};BL.ec=BK.c2;BL.sc=BK.c1;BL.t=BK.or;delete BI[this.getFormatBlockName()];BI.fx=BJ;}else{if(BJ){delete BJ.gd;}A0.call(this,BI,BK);}return BI;}};AH[D]={ps:Q,pn:"FillStyle",pt:Aw};AH[A1]={ps:Q,pn:"SelectorSelectionColor",pt:Ai};AH[b]={ps:Q,pn:"SelectorSelectionFillStyle",pt:Aw};AH[H]={ps:F,pn:"TopColor",pt:Ai,fn:"border",extract:Am};AH[Ad]={ps:F,pn:"RightColor",pt:Ai,fn:"border",extract:Am};AH[AN]={ps:F,pn:"BottomColor",pt:Ai,fn:"border",extract:Am};AH[m]={ps:F,pn:"LeftColor",pt:Ai,fn:"border",extract:Am};AH[AK]={ps:F,pn:["TopColor","RightColor","BottomColor","LeftColor"],pt:Ai,fn:"border",extract:Am,resolve:G(function(BI,BK){var BL=this.getFormatBlockName(),BJ=Z.call(this,BI,BK,BL,BL+"Color"),BM=BJ.indexOf("rgb");if(BM>-1){BJ=BJ.slice(0,BM)+z.rgbStr2hex(BJ.slice(BM));}return BJ;})};AH[As]={ps:F,pn:["TopStyle","RightStyle","BottomStyle","LeftStyle"],pt:AR,fn:"border",extract:Am,resolve:function(BI,BL){var BJ=BL.split(" "),BM=this.getFormatBlockName();BI[BM]=Z.call(this,BI,BJ[0],BM,BM+"Width");var BK=Z.call(this,BI,BJ[1]||"none",BM,BM+"Style"),BN=BK.indexOf("rgb");if(BN>-1){BK=BK.slice(0,BN)+z.rgbStr2hex(BK.slice(BN));}if(BK.indexOf("#")===-1&&BK.indexOf("transparent")===-1){BK+=" transparent";}return BK;}};AH[i]={ps:F,pn:"TopStyle",pt:AR,fn:"border",extract:Am};AH[BF]={ps:F,pn:"RightStyle",pt:AR,fn:"border"};AH[Ax]={ps:F,pn:"BottomStyle",pt:AR,fn:"border",extract:Am};AH[AT]={ps:F,pn:"LeftStyle",pt:AR,fn:"border",extract:Am};AH[c]={ps:Av,pn:"ZIndex",pt:Aw,fn:"z-index"};AH[AL]={ps:E,pn:"ShowTitleBar",pt:Aj};AH[h]={ps:E,pn:"Title",pt:BA};AH[Ar]={ps:O,pn:"Style",pt:Aw};AH[s]={ps:O,pn:"Orientation",pt:Aw};AH[Aq]={ps:O,pn:"OrientationBehavior",pt:Aw};AH[f]={ps:O,pn:"Multiselect",pt:Aj};AH[C]={ps:O,pn:"ItemWidthMode",pt:Aw};AH[A4]={ps:O,pn:"MetricConditionType",pt:Aw};AH[At]={ps:O,pn:"ShowElementCount",pt:Aw};AH[l]={ps:O,pn:"ExportAsShownOnWeb",pt:Aw};AH[AD]={ps:AX,pn:"LayoutXML",pt:AQ};AH[J]={ps:AX,pn:"LockAspectRatio",pt:Aj};AH[Ac]={ps:AX,pn:"ImageSizeMode",pt:Aw};AH[AS]={ps:AX,pn:"ImageHeight",pt:BA};AH[AW]={ps:AX,pn:"ImageWidth",pt:BA};AH[AG]={ps:Ao,pn:"layoutBarPosition",pt:Aj};AH[Ay]={ps:Ao,pn:"ExecutionFullScreenMode",pt:Aj};AH[AO]={ps:I,pn:"Visible",pt:Aj};AH[AY]={ps:Al,pn:"LongNames",pt:BA};AH[AC]={ps:Ag,pn:"ShowAllRows",pt:BA};AH[B]={ps:Ag,pn:"HideNullZeroValues",pt:BA};AH[AZ]={ps:L,pn:["LeftPadding","RightPadding"],pt:BA};AH[Y]={ps:L,pn:["TopPadding","BottomPadding"],pt:BA};AH.rowsshw={ps:Al,pn:"ShowRowHeaders",pt:BA};AH.rowsmg={ps:Al,pn:"MergeCells",pt:BA};AH.rowslhv={ps:Al,pn:"LockRowHeaders",pt:BA};AH.colsshw={ps:Al,pn:"ShowColumnHeaders",pt:BA};AH.colsmg={ps:Al,pn:"MergeColumnCells",pt:BA};AH.colslhv={ps:Al,pn:"LockColumnHeaders",pt:BA};AH[R]={ps:N,pn:"RefreshFrequency",pt:Aw};AH[BG]={ps:T,pn:"Join Across Datasets",pt:Aw};AH[Ah]={ps:T,pn:"MCE Join To Get Data Combination",pt:Aw};AH[w]={ps:I,pn:"Highlight",pt:Aw};BC.forEach(V.keyarray(AH),function(BI){var BJ=AH[BI];BJ.getFormatBlockName=function(){var BL=this.fn;if(!BL){var BK=this.pn;BL=BK.charAt(0).toLowerCase()+BK.substr(1);}return BL;};BJ.getCssName=function(){var BK=this.getFormatBlockName.call(this),BL=this.cn;if(!BL){BL=A8.convertCssToCamelCase(BK);}return BL;};BC.forEach([v,BB,An,A9,AV],function(BK){var BL=BK.name;BJ[BL]=BJ[BL]||BK[BJ.pt]||BK._def;});});function Ap(BL,BK,BI){var BJ=BI[BL.ps]=BI[BL.ps]||{};BK=BL.encode(BK);BC.forEach([].concat(BL.pn),function(BM){BJ[BM]=BK;});return BI;}function AB(BO,BN,BI){var BM=BO.x;if(BM){if((BM&Af)>0){var BL=!!BN.c1,BK=0;if(BL){Ap(BO,BN.c1,BI);var BJ=BI[Q];BJ.GradientColor=BO.encode(BN.c2);BJ.GradientAngle=BN.or?0:90;BJ.GradientXOffset=0;BJ.GradientYOffset=0;BK=2;}else{if(BO.encode(BN)===-1){BK=1;}else{Ap(BO,BN,BI);}}return Ap(AH[D],BK,BI);}}return null;}mstrmojo.models.FormatModel={getFormatUpdate:function AP(BJ,BM,BI){var BL=AH[BJ];if(!BL){throw new Error("Invalid property "+BJ+" in FormatModel::getFormatUpdate.");}BI=BI||{};var BK=AB.call(this,BL,BM,BI);if(BK){return BK;}return Ap(BL,BM,BI);},getFormatPropertyInfo:function j(BI){return AH[BI];},getValueFromUpdate:function K(BJ,BK){var BM=AH[BJ],BI=null;try{BI=BK[BM.ps][BM.pn];}catch(BL){}return BI;},getGradientValues:function AA(BJ){var BI=BJ.fx&&BJ.fx.gd;if(BI){var BL={c1:BI.sc,c2:BI.ec,or:BI.t};return BL;}if(BJ[D]===2){var BK={c1:BJ.bc,c2:BJ.gdc,or:BJ.gda===90?0:1};return BK;}return null;},decodeValue:function u(BI,BJ){return AH[BI].decode(BJ);},updateFormatBlock:function Ak(BI,BJ,BK){return AH[BJ].update(BI,BK);},getFormatBlockValue:function t(BI,BJ){return AH[BJ].extract(BI);},GradientType:null,FormatObjectType:null,PROPERTY_INFO_TYPE:null,ENUM_PROPERTY_NAMES:{NAME:g,HEIGHT:M,WIDTH:BD,WIDTH_MODE:x,PAGE_WIDTH:A2,MARGIN_LEFT:W,MARGIN_RIGHT:A3,USE_PAGE_WIDTH_AS_LAYOUT_WIDTH:q,FONT_FAMILY:n,FONT_SIZE:Aa,FONT_WEIGHT:A6,FONT_STYLE:y,UNDERLINE:A7,LINE_THROUGH:k,COLOR:p,TEXT_ALIGN:U,VERTICAL_ALIGN:o,TEXT_WRAP:AU,TEXT_DIRECTION:AE,TEXT_OVERFLOW:a,BACKGROUND_COLOR:Ae,FILL_STYLE:D,BORDER_TOP_COLOR:H,BORDER_RIGHT_COLOR:Ad,BORDER_BOTTOM_COLOR:AN,BORDER_LEFT_COLOR:m,BORDER_TOP_STYLE:i,BORDER_RIGHT_STYLE:BF,BORDER_BOTTOM_STYLE:Ax,BORDER_LEFT_STYLE:AT,BORDER_COLOR:AK,BORDER_STYLE:As,Z_INDEX:c,SHOW_TITLE_BAR:AL,TITLE:h,CONTROL_STYLE:Ar,CONTROL_ORIENTATION:s,CONTROL_ORIENTATION_BEHAVIOR:Aq,CONTROL_MULTISELECT:f,CONTROL_ITEM_WIDTH_MODE:C,CONTROL_METRIC_CONDITION_TYPE:A4,CONTROL_SHOW_ELEMENT_COUNT:At,CONTROL_EXPORT_AS_SHOWN_ON_WEB:l,LAYOUT_XML:AD,LOCK_ASPECT_RATIO:J,IMAGE_SIZE_MODE:Ac,SHOW_HEADER:e,MERGE_HEADER:Au,LOCK_HEADER:BE,LONG_NAME:AY,SHOW_ALL_ROWS:AC,HIDE_NULL:B,IMAGE_WIDTH:AW,IMAGE_HEIGHT:AS,VISIBLE:AO,LAYOUT_TAB_POSITION:AG,GRID_VERTICAL_PADDING:Y,GRID_HORIZONTAL_PADDING:AZ,REFRESH:R,JOIN_ACROSS_DATASET:BG,MCE_JOIN_TO_GET_DATA_COMBINATION:Ah,FULL_SCREEN_MODE:Ay,SELECTOR_SELECTION_COLOR:A1,SELECTOR_SELECTION_FILL_STYLE:b,VIZ_HIGHLIGHTING:w}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.string","mstrmojo.css");var K=mstrmojo.css,N=mstrmojo.string,H=mstrmojo.dom,L=13,C=27;function I(S){if(this._editComplete){return ;}var W,Q=false,V=this.text,T=false;if(S===C){W=V;T=true;Q=true;}if(!S||(!this.allowNewLine&&S===L)){var R=this[this.editableSlot],U=R.innerText||R.textContent||"";if(!this.allowNewLine){W=U.replace(/\n/g,"");}else{W=U;}Q=true;if(!this.allowEmptyText&&W.length===0){W=V;T=true;}}if(Q){this._editComplete=true;W=W.replace(/\u00A0/g,"\u0020");this.text=W;this.set("isEditing",false);this.onTextEditComplete(W!==V,V);delete this._editComplete;}if(T){this.refresh();}}function E(Q){var R={dblclick:"editOnDoubleClick",click:"editOnClick"};if(this[R[Q.name]]&&Q.getTarget()===this[this.editableSlot]){this.set("isEditing",true);}}function F(S,R,Q){if(typeof R["on"+Q]!=="function"){H.attachMarkupEvent(S,R,Q);}}mstrmojo._HasEditableText=mstrmojo.provide("mstrmojo._HasEditableText",{_mixinName:"mstrmojo._HasEditableText",editableSlot:"domNode",editButtonSlot:null,isEditing:false,editOnClick:true,allowEmptyText:false,allowNewLine:false,editOnDoubleClick:false,onTextEditComplete:mstrmojo.emptyFn,postBuildRendering:function A(){this._super();var S=this.editableSlot,Q=this[S],T=this[this.editButtonSlot||S];K.addClass(Q,"hasEditableText");this.text=this.text||Q.innerText||Q.textContent||"";Q.innerHTML=N.encodeHtmlString(this.text,true).replace(/ (?= )/g,"&nbsp;");var R=this.id;if(this.editOnClick){F(R,T,"click");}F(R,T,"dblclick");F(R,Q,"blur");F(R,Q,"keyup");F(R,Q,"keydown");},onclick:function P(Q){E.call(this,Q);if(this._super){this._super(Q);}},ondblclick:function G(Q){E.call(this,Q);},onblur:function M(){I.call(this);},onkeyup:function B(R){var Q=window.event||R.e;I.call(this,Q.keyCode);},onkeydown:function J(R){var Q=window.event||R.e;if(Q.keyCode===L){I.call(this,Q.keyCode);R.cancel();}},_set_text:function D(S,Q){var R=this.text;this.text=Q;if(this.hasRendered){this[this.editableSlot].innerHTML=N.encodeHtmlString(Q||"",true);}return(R!==Q);},onisEditingChange:function O(){if(this.hasRendered){var Q=this[this.editableSlot],R=!!this.isEditing;Q.contentEditable=R;Q.spellcheck=false;K.toggleClass(Q,"editable",R);if(R){Q.focus();H.setElementSelection(Q);}else{Q.blur();Q.scrollLeft=0;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");var F=mstrmojo.css,E="px",J="hasOwnAvatar",I={x:0,y:0};function B(L){var K=this.createAvatar(L.src.node,L);if(K){F.addClass(K,[this.avatarCssClass,J]);this.avatar=L.avatar=document.body.appendChild(K);}}function C(){var K=this.avatar;if(K){K.parentNode.removeChild(K);delete this.avatar;F.removeClass(K,[this.avatarCssClass,J]);}}mstrmojo._HasOwnAvatar=mstrmojo.provide("mstrmojo._HasOwnAvatar",{_mixinName:"mstrmojo._HasOwnAvatar",draggable:true,ownAvatar:true,avatarCssClass:"",restrictedToAxis:undefined,isDragValid:function H(K){if(this._super){return this._super(K);}return false;},ondragstart:function D(K){B.call(this,K);this.positionAvatar(K.src.pos,K);if(this._super){this._super(K);}},ondragmove:function A(K){this.positionAvatar(K.tgt.pos,K);if(this._super){this._super(K);}},ondragend:function A(K){C.call(this);if(this._super){this._super(K);}},createAvatar:mstrmojo.emptyFn,positionAvatar:function G(O,L){var N=this.avatar.style,M=this.restrictedToAxis,K=(L&&L.dragOffsets)||I;if(M!=="y"){N.left=O.x+K.x+E;}if(M!=="x"){N.top=O.y+K.y+E;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,b=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(e){var d=parseInt(e,10),f=mstrmojo.validation.STATUSCODE;if(d===0||d===1||d>10){return{code:f.VALID};}return{code:f.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(d){var e=String(d).replace(/[^\d]/g,"");if(e.length<10){return{code:b.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:b.VALID};},VALIDATE_ZIPCODE:function G(d){var f="",e=this.dtp;if(!H.REGEXP.US_ZIP.test(d)){if(H.isNumeric(e)||H.isInt(e)){f=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(e)){f=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:b.INVALID,msg:f};}return{code:b.VALID};},VALIDATE_EMAIL:function T(d){var e=d.indexOf("@");if(e===-1){return{code:b.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(d.substring(e).indexOf(".")===-1){return{code:b.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(d)?{code:b.VALID}:{code:b.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(d){var f=this.dtp,e;if(H.isNumeric(f)||H.isInt(f)){e=String(d).replace(/[^\d]/g,"");if(e.length!==9){return{code:b.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:b.VALID};}};H.isInt=function D(d){return A[d]===1;};H.isNumeric=function Y(d){return A[d]===2||A[d]===5;};H.isString=function J(d){return A[d]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,Z=mstrmojo.num,U=mstrmojo.string,F=mstrmojo.date;function P(k,l){var h=k.dtp,j=k.constraints,n=j.allowedFormatChars||"",g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),m=mstrmojo.locales.number.THOUSANDSEPARATOR,f=mstrmojo.locales.number.DECIMALSEPARATOR,i;if(g){if(!k._intRegExp){n+="0-9-"+(k.isList?L:"")+m;k._intRegExp=new RegExp("[^"+n+"]");}i=k._intRegExp;}if(d){if(!k._numericRegExp){n+="0-9-"+(k.isList?L:"")+f+m;k._numericRegExp=new RegExp("[^"+n+"]");}i=k._numericRegExp;}return !!i&&i.test(l);}function c(k,m){var h=k.dtp,j=k.constraints,g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),f=j.min,l=j.max,i;if(f===undefined&&l===undefined){return false;}if(g||d){return Z.inNumericRange(m,f,l)!==0;}if(e){return F.inDateTimeRange(m,f,l)!==0;}return false;}function K(e,d){return !Z.isNumeric(d);}function R(g,e){var f=(g.dtp===M.DATE),d=(g.dtp===M.TIME);return(f?!F.isDate(e):(d?!F.isTime(e):!F.isDateAndOrTime(e)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function W(d){this._super(d);if(!this.constraints){this.constraints={};}var e=this.constraints;if(!e.hasOwnProperty("trigger")){e.trigger=B.NONE;}},_set_value:function(i,f){var g=this.value,e=(g!==f);if(e){this.value=f;var h=this.constraints.trigger,d=(h&B.VALUESET)>0;if(d){this.validate(f);}}return e;},validate:function O(){var f=(this.value!==null&&this.value!==undefined)?this.value:"",j=this.isList?f.split(L):[f],h,e,k,d=j.length,g;for(g=0;g<d;g++){h=this.doValidation(j[g]);e=(h.code>b.VALID);if(e){if(d>1){h.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",j[g]||" ");}break;}}k=e?"onInvalid":"onValid";if(!e&&this.autoFormat){this.format();}this.set("validationStatus",h);if(this[k]){this[k](h);}},format:function X(){var j=this.dtp,f=(A[j]===6);if(!f){return ;}var l=mstrConfig.listSep,o=this.value||"",e=this.isList?o.split(l):[o],n=j===14,m=[],d,g=mstrmojo.locales.datetime,k=e.length,h;for(h=0;h<k;h++){o=e[h];d=F.parseDateAndOrTime(o);if(d){if(n&&d.date){m.push(F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT));}else{m.push((d.date?F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT):"")+" "+(d.time?F.formatTimeInfo(d.time,g.TIMEOUTPUTFORMAT):""));}}}this.set("value",m.join(l));},isValid:function V(){var d=this.validationStatus;if(!d){this.validate();}return this.validationStatus.code===b.VALID;},clearValidation:function a(){this.set("validationStatus",{code:b.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(p){var m=this.constraints,n=m.regExp,f=m.validator,d={id:this.id,code:b.VALID,msg:""},l=this.dtp,k=(A[l]===1),e=(A[l]===2||A[l]===5),g=(A[l]===3),h=(A[l]===6),j=U.isEmpty(p),o=String(p).length,i="",s=mstrmojo.locales.validation;if(this.required&&j){d.code=b.INVALID_EMPTY;d.msg=s.requiredFieldError;return d;}p=U.trim(p);if(!j&&P(this,p)){if(k){i=s.integerDataType;}if(e){i=s.numericDataType;}if(h){i=s.dateDataType;}d.code=b.INVALID_CHAR;d.msg=s.invalidCharError.replace("#",i);return d;}if(!j&&h&&R(this,p)){d.code=b.INVALID_BAD_DATESTRING;d.msg=s.invalidDateStringError;return d;}if(!j&&(e||k)&&K(this,p)){d.code=b.INVALID_BAD_NUMERICFORMAT;d.msg=s.invalidNumericFormatError;return d;}if(!j&&(k||e||h)&&c(this,p)){d.code=b.INVALID_OUTOFRANGE;if(m.min!==null&&m.max!==null){i=s.outofRangeError.replace("# ","").replace("##",m.min).replace("###",m.max);}else{if(m.min!==null){i=s.noLessMinError.replace("##",m.min).replace("# ","");}else{if(m.max!==null){i=s.noGreaterMaxError.replace("###",m.max).replace("# ","");}}}d.msg=i;return d;}if(g&&m.minLen!==null&&m.maxLen!==null){if(o<m.minLen||o>m.maxLen){d.code=b.INVALID;d.msg=mstrmojo.desc(9211).replace(/#/,m.minLen).replace(/##/,m.maxLen);return d;}}if(n&&!n.test(p)){d.code=b.INVALID_REGEX;d.msg=mstrmojo.desc(9205);return d;}var q=f&&f.apply(this,[p]);if(q){d.code=q.code;d.msg=q.msg;return d;}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatFont=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFont",mFontAlignment:0,mFontStyle:0,mFontRotation:0,mFontBox:0,mFontColor:null,mFontAlpha:0,mFontName:0,mFontSize:0,init:function D(G){G.mFormatType=A.FMT_FONT;this._super(G);E.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize","id"],G,this);},AppendToJSONObject:function F(H){var G=this.mFontColor;H.push({FormatType:this.mFormatType,Alignment:this.mFontAlignment,Style:this.mFontStyle,Rotation:this.mFontRotation,Box:this.mFontBox,Alpha:this.mFontAlpha,Name:this.mFontName,Size:this.mFontSize,Color:{R:G.mR,G:G.mG,B:G.mB}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatLine=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatLine",mLineStyle:0,mAlpha:0,mLineThickness:0,mLineThicknessPt:0,mLineColor:null,mGradient:null,init:function D(H){H.mFormatType=A.FMT_LINE;this._super(H);E.copyProps(["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","id"],H,this);this.mGradient={};var G=this.mGradient,J=H.mGradient;G.range={start:{x:0,y:0},end:{x:0,y:0}};if(J){G.valid=H.mGradient.valid||false;G.angle=H.mGradient.angle||0;G.endAlpha=H.mGradient.endAlpha||255;G.style=H.mGradient.style||1;G.colors=H.mGradient.colors.slice(0)||[];var I=J.range;if(H&&I!==undefined){if(I.start!==undefined){G.range.start.x=I.start.x;G.range.start.y=I.start.y;}if(I.end!==undefined){G.range.end.x=I.end.x;G.range.end.y=I.end.y;}}}else{G.valid=false;G.angle=0;G.endAlpha=255;G.style=1;G.colors=[];G.range={start:{x:0,y:0},end:{x:0,y:0}};}},AppendToJSONObject:function F(G){var I=this.mLineColor,H=this.mGradient;G.push({FormatType:this.mFormatType,Style:this.mLineStyle,Alpha:this.mAlpha,Thickness:this.mLineThickness,ThicknessPt:this.mLineThicknessPt,Color:{R:I.mR,G:I.mG,B:I.mB},Gradient:{Valid:H.valid,Angle:H.angle,EndAlpha:H.endAlpha,Style:H.style,Colors:H.colors.slice(0),Start:H.range.start,End:H.range.end}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.MapStructure","mstrmojo.chart.JSONParameter","mstrmojo.chart.enums.EnumInstructionName");var J=mstrmojo.chart,K=J.enums,N=K.EnumInstructionName;function I(P,Q){++this.mCurrentIndex;if(this.mIsFirstPass){this.mParameterList.push(new J.JSONParameter({mParameterName:P,mParameterValue:Q,mIsLastFrameSet:this.mIsLastFrame}));}}mstrmojo.chart.JSONInstruction=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONInstruction",mInstructionName:N.JSONInsUndefined,mpOriginalAddress:0,mFormatIdx:-1,mParameterList:[],mCurrentIndex:-1,mIsLastFrame:true,mIsFirstPass:true,init:function O(P){this._super(P);this.mParameterList=[];},SetInstructionName:function F(P){this.mInstructionName=P;},GetInstructionName:function H(){return this.mInstructionName;},SetSecondPass:function D(){this.mIsFirstPass=false;this.mCurrentIndex=-1;},SetLastFrame:function A(P){this.mIsLastFrame=P;},AppendToParameterList:function E(P,Q){I.call(this,P,Q);},AppendArrayToParameterList:function B(P,Q,R){if(R>0){I.call(this,P,Q);}},AppendSimpleVectorToParameterList:function M(P,Q){if(Q.length>0){I.call(this,P,Q);}},SetFormatAddress:function C(P){this.mpOriginalAddress=P;},CalculateFormatIndex:function G(S){var R=this.mpOriginalAddress,Q,T,P;if(R!==null&&R!==undefined){Q=0;P=S.length-1;while(Q<=P){T=Math.floor((Q+P)/2);if(S[T].mpOriginalAddress<R){Q=T+1;}else{if(S[T].mpOriginalAddress>R){P=T-1;}else{this.mFormatIdx=T;return ;}}}Q=0;P=S.length-1;while(Q<=P){T=Math.floor((Q+P)/2);if(S[T].id<R){Q=T+1;}else{if(S[T].id>R){P=T-1;}else{this.mFormatIdx=T;return ;}}}}},AppendToJSONObject:function L(U){var R=this.mParameterList,Q=this.mFormatIdx,T,P,S={Ins:this.mInstructionName};if(Q>=0){S.Format=Q;}P=R.length;for(T=0;T<P;T++){R[T].AppendToJSONObject(S);}U.push(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.common.MapStructure");var I=mstrmojo.chart,E=I.gNullTripleId;var G=0;mstrmojo.chart.GraphObjectManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObjectManager",mGraphObjectList:null,mGraphObjectManagerList:null,mTripleId:null,mpManager:null,mChartContextPtr:null,mGraphObjectMap:null,init:function N(O){this._super(O);this.mGraphObjectList=[];this.mGraphObjectManagerList=[];this.mTripleId=this.mTripleId||O.TripleId||E;this.mpManager=O.GraphObjectManager||null;if(this.mpManager!==null){this.mChartContextPtr=this.mpManager.mChartContextPtr;}if(G===-1){}else{if(G===1||(!!this.mpManager)===false){this.mGraphObjectMap=new mstrmojo.chart.common.MapStructure();}else{this.mGraphObjectMap=this.mpManager.mGraphObjectMap||new mstrmojo.chart.common.MapStructure();}}},getMapGenesis:function A(){return G;},AddToMapAndList:function L(O){this.AddToMap(O);this.mGraphObjectList.push(O);},AddObjectsToMapAndList:function M(Q){var P,O;O=Q.length;for(P=0;P<O;++P){this.AddToMapAndList(Q[P]);}},AddToManagerList:function H(O){this.mGraphObjectManagerList.push(O);},AddToMap:function C(O){if(O){this.mGraphObjectMap.replaceByTripleId(O.mTripleId,O);}},getGraphObjectFromList:function J(V,R){var S,T,O,U=this.mGraphObjectManagerList,Q=this.mGraphObjectList,P=this.mChartContextPtr.getUtiliy();for(S=Q.length-1;S>=0;--S){T=Q[S].mTripleId;if(P.tripleId.equal(T,V)){O={object:Q[S],find:true};return O;}}if(R){for(S=U.length-1;S>=0;--S){O=U[S].getGraphObjectFromList(V);if(O.find){return O;}}}return{object:null,find:false};},GetGraphObject:function F(U,P){var S,R,Q=this.mGraphObjectMap,T=this.mGraphObjectManagerList,O;P=(P===undefined)?true:P;if(Q){S=Q.findByTripleId(U);if(S!==undefined){return S;}if(P){O=T.length;for(R=O-1;R>=0;--R){S=T[R].GetGraphObject(U,true);if(S!==undefined){return S;}}}return null;}S=this.getGraphObjectFromList(U,P);return S;},GetGraphObjectManager:function K(U,P){if(P===undefined){P=true;}var Q,T=this.mGraphObjectManagerList,O=this.mChartContextPtr.getUtiliy();for(Q=T.length-1;Q>=0;--Q){var S=T[Q].mTripleId;if(O.tripleId.equal(S,U)){return T[Q];}if(P){var R=T[Q].GetGraphObjectManager(U,true);if(R){return R;}}}return null;},Draw:function B(){var O,P;O=this.mGraphObjectList.length;for(P=0;P<O;++P){this.mGraphObjectList[P].Draw();}},GenerateInterpolationFrame:function D(O){var Q=this.mGraphObjectManagerList.length,P,R;this.mProgress=O;for(P=0;P<Q;++P){this.mGraphObjectManagerList[P].GenerateInterpolationFrame(O);}R=this.mGraphObjectList.length;for(P=0;P<R;++P){this.mGraphObjectList[P].SetProgress(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.model.enums.EnumDSSGraphObject");var F=mstrmojo.chart,A=mstrmojo.chart.model,B=A.enums,G=B.EnumDSSGraphObject,C=F.gNullObjectId;function H(J){return new F.TripleId({ObjectId:J});}mstrmojo.chart.AxisObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.AxisObject",mLabelId:-1,mMajorId:-1,mMinorId:-1,mTitleId:-1,mCustomLineId:-1,mCustomLabelId:-1,init:function I(J){this.mLabelId=J.LabelId;this.mMajorId=J.MajorId;this.mMinorId=J.MinorId;this.mTitleId=J.TitleId;this.mCustomLineId=J.CustomLineId;this.mCustomLabelId=J.CustomLabelId;}});var E=mstrmojo.chart.AxisObject;var D=F.gAxisObjects=[];D.push(new E({LabelId:H.call(this,G.DssGraph2DO1Label),MajorId:H.call(this,G.DssGraphO1Major),MinorId:H.call(this,G.DssGraphO1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraph2DO2Label),MajorId:H.call(this,G.DssGraphO2Major),MinorId:H.call(this,G.DssGraphO2Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphX1Label),MajorId:H.call(this,G.DssGraphX1Major),MinorId:H.call(this,G.DssGraphX1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,G.DssGraphUserLabel3)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphY1Title),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphY2Label),MajorId:H.call(this,G.DssGraphY2Major),MinorId:H.call(this,G.DssGraphY2Minor),TitleId:H.call(this,G.DssGraphY2Title),CustomLineId:H.call(this,G.DssGraphUserLine2),CustomLabelId:H.call(this,G.DssGraphUserLabel2)}));D.push(new E({LabelId:H.call(this,G.DssGraphY3Label),MajorId:H.call(this,G.DssGraphY3Major),MinorId:H.call(this,G.DssGraphY3Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY4Label),MajorId:H.call(this,G.DssGraphY4Major),MinorId:H.call(this,G.DssGraphY4Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphX2Label),MajorId:H.call(this,G.DssGraphX2Major),MinorId:H.call(this,G.DssGraphX2Minor),TitleId:H.call(this,G.DssGraphX2Title),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,G.DssGraphUserLabel4)}));}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.JSONUtil","mstrmojo.chart.enums.EnumInstructionName");var D=mstrmojo.chart,H=mstrmojo.chart.enums,K=H.EnumInstructionName,F=D.JSONUtil.prototype;mstrmojo.chart.JSONUnit=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUnit",mIsAnimated:false,mIsLastFrame:true,mIsFirstPass:true,mIsFirstFrameSet:false,mIsLastFrameSet:false,mInstructionList:[],mCurrentIndex:-1,init:function L(N){this.mInstructionList=[];if(N){this.mIsAnimated=N.mIsAnimated||false;this.mIsLastFrame=N.mIsLastFrame||false;}},AppendToJSONObject:function I(N){N.IsAnimated=this.mIsAnimated?1:0;if(this.mInstructionList.length>0){F.AppendCompoundPointerVectorToJSONObject("InstructionList",this.mInstructionList,N);}},AddInstruction:function J(O,N){if(O===undefined){O=K.JSONInsUndefined;}if(N===undefined){N=null;}++this.mCurrentIndex;if(this.mIsFirstPass){this.mInstructionList.push(new D.JSONInstruction({mInstructionName:O,mpOriginalAddress:N}));}else{this.mInstructionList[this.mCurrentIndex].SetSecondPass();}this.mInstructionList[this.mCurrentIndex].SetLastFrame(this.mIsLastFrame);return this.mInstructionList[this.mCurrentIndex];},SetAnimated:function A(N){this.mIsAnimated=N;},IsAnimated:function M(){return this.mIsAnimated;},IsValid:function E(){if(this.mInstructionList.length===0){return false;}if(this.mIsAnimated){return(this.mIsFirstFrameSet&&this.mIsLastFrameSet);}return true;},SetToFirstFrame:function G(){this.mIsFirstFrameSet=true;this.mIsLastFrame=false;this.mCurrentIndex=-1;if(this.mIsLastFrameSet){this.mIsFirstPass=false;}},SetToLastFrame:function C(){this.mIsLastFrameSet=true;this.mIsLastFrame=true;this.mCurrentIndex=-1;if(this.mIsFirstFrameSet){this.mIsFirstPass=false;}},CalculateFormatIndex:function B(O){var N,P;N=this.mInstructionList.length;for(P=0;P<N;++P){this.mInstructionList[P].CalculateFormatIndex(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.HSLColor");var F=mstrmojo.chart,H=0.01;function I(N){if(N<0){N+=1;}if((N-1)>0){N-=1;}return N;}function B(P,O,N){if((N-1/6)<0){return P+(O-P)*6*N;}if((N-0.5)<0){return O;}if((N-2/3)<0){return P+(O-P)*6*(2/3-N);}return P;}mstrmojo.chart.RGBColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.RGBColor",mR:0,mG:0,mB:0,init:function M(V,Z){this._super(V);Z=Z||false;if(V!==null){if(V.Color){this.mR=V.Color.mR;this.mG=V.Color.mG;this.mB=V.Color.mB;}else{if(V.R!==undefined&&V.G!==undefined&&V.B!==undefined){this.mR=V.R;this.mG=V.G;this.mB=V.B;}else{if(V.H!==undefined&&V.S!==undefined&&V.L!==undefined){var S=V.H,Y=V.S,O=V.L;var R,T,W,N,U,X;if(Y<H){this.mR=this.mG=this.mB=(O*255);}else{R=0;if((0.5-O)>0){R=O*(1+Y);}else{R=O+Y-(O*Y);}T=2*O-R;W=S/360;N=W+1/3;U=W;X=W-1/3;N=I(N);U=I(U);X=I(X);this.mR=B(T,R,N)*255;this.mG=B(T,R,U)*255;this.mB=B(T,R,X)*255;}}else{if(typeof V==="number"){if(Z){this.mR=V&255;this.mG=(V&65280)>>8;this.mB=(V&16711680)>>16;}else{this.mB=V&255;this.mG=(V&65280)>>8;this.mR=(V&16711680)>>16;}}}}}}},ToInteger:function G(N){N=N||false;if(N){return this.mB+(this.mG<<8)+(this.mR<<16);}return this.mR+(this.mG<<8)+(this.mB<<16);},MakeDarker:function J(N){this.mR*=N;this.mG*=N;this.mB*=N;},Reset:function D(P,O,N){this.mR=P;this.mG=O;this.mB=N;},ResetFromColorValue:function L(O,N){N=N||false;if(N){this.mR=O&255;this.mG=(O&65280)>>8;this.mB=(O&16711680)>>16;}else{this.mB=O&255;this.mG=(O&65280)>>8;this.mR=(O&16711680)>>16;}},ResetFromHSLValue:function K(R){var T=R.H,Y=R.S,O=R.L;var S,U,W,N,V,X;if(Y<H){this.mR=this.mG=this.mB=(O*255);}else{S=0;if((0.5-O)>0){S=O*(1+Y);}else{S=O+Y-(O*Y);}U=2*O-S;W=T/360;N=W+1/3;V=W;X=W-1/3;N=I(N);V=I(V);X=I(X);this.mR=B(U,S,N)*255;this.mG=B(U,S,V)*255;this.mB=B(U,S,X)*255;}},Copy:function E(N){this.mR=N.mR;this.mG=N.mG;this.mB=N.mB;},ToHSL:function A(){var O,R,N,Q,P;O=Math.max(this.mR,this.mG,this.mB);R=Math.min(this.mR,this.mG,this.mB);if(O===R){P=0;}else{if(O===this.mR){if(this.mG>=this.mB){P=60*(this.mG-this.mB)/(O-R);}else{P=60*(this.mG-this.mB)/(O-R)+360;}}else{if(O===this.mG){P=60*(this.mB-this.mR)/(O-R)+120;}else{P=60*(this.mR-this.mG)/(O-R)+240;}}}N=0.5*(O+R)/255;if(O===R){Q=0;}else{if((0.5-N)>0){Q=(O-R)/(O+R);}else{Q=(O-R)/(510-(O+R));}}return new F.HSLColor({h:P,s:Q,l:P});}});var C=mstrmojo.chart.RGBColor;F.gWhite=new C({R:255,G:255,B:255});F.gBlack=new C({R:0,G:0,B:0});F.gLeaderLineColor=new C({R:37,G:108,B:83});F.gStrokeColorForDarkBackground=new C({R:254,G:254,B:254});F.gStrokeColorForLightBackground=new C({R:230,G:230,B:230});F.gColorPalette=[new C({R:62,G:117,B:167}),new C({R:92,G:151,B:70}),new C({R:248,G:215,B:83}),new C({R:23,G:185,B:51}),new C({R:255,G:138,B:14}),new C({R:156,G:57,B:164}),new C({R:144,G:173,B:207}),new C({R:31,G:171,B:242}),new C({R:255,G:255,B:204}),new C({R:255,G:204,B:153}),new C({R:0,G:51,B:0}),new C({R:128,G:0,B:0}),new C({R:49,G:255,B:49}),new C({R:0,G:0,B:255}),new C({R:255,G:128,B:64}),new C({R:99,G:101,B:255}),new C({R:255,G:0,B:0}),new C({R:255,G:255,B:0}),new C({R:0,G:255,B:0}),new C({R:255,G:0,B:255})];F.gLightColorPalette=[new C({R:31,G:119,B:180}),new C({R:214,G:39,B:40}),new C({R:44,G:160,B:44}),new C({R:255,G:127,B:14}),new C({R:148,G:103,B:189}),new C({R:188,G:189,B:34}),new C({R:23,G:190,B:207}),new C({R:127,G:127,B:127}),new C({R:174,G:199,B:232}),new C({R:255,G:152,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:187,B:120}),new C({R:197,G:189,B:5}),new C({R:219,G:219,B:141}),new C({R:158,G:218,B:229}),new C({R:199,G:199,B:199})];F.gDarkColorPalette=[new C({R:22,G:176,B:255}),new C({R:255,G:55,B:41}),new C({R:4,G:186,B:34}),new C({R:255,G:150,B:14}),new C({R:174,G:121,B:222}),new C({R:204,G:205,B:37}),new C({R:25,G:206,B:224}),new C({R:169,G:169,B:169}),new C({R:179,G:205,B:239}),new C({R:255,G:167,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:223,B:128}),new C({R:218,G:195,B:236}),new C({R:225,G:224,B:144}),new C({R:161,G:223,B:234}),new C({R:214,G:214,B:214})];}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Base","mstrmojo.chart.Point2D","mstrmojo.chart.enums.EnumRectExpandDirection");var M=mstrmojo.hash,T=mstrmojo.chart,V=T.enums,P=V.EnumRectExpandDirection;mstrmojo.chart.Rect2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Rect2D",x:0,y:0,width:0,height:0,init:function O(Y){if(Y){if(Y.Rect2D){var Z=Y.Rect2D;mstrmojo.hash.copy(Z,this);}else{this._super(Y);}}},Explode:function F(Z,Y){this.x-=Z;this.y-=Y;this.width+=(Z*2);this.height+=(Y*2);},Implode:function A(Z,Y){this.Explode(-Z,-Y);},GetTopLeft:function H(Y){return new T.Point2D({x:this.x,y:this.y});},GetBottomLeft:function G(Y){return new T.Point2D({x:this.x,y:this.y+this.height});},GetTopRight:function E(Y){return new T.Point2D({x:this.x+this.width,y:this.y});},GetBottomRight:function X(Y){return new T.Point2D({x:this.x+this.width,y:this.y+this.height});},GetCenter:function W(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y+this.height/2});},GetLeftMiddle:function C(Y){return new T.Point2D({x:this.x,y:this.y+this.height/2});},GetTopMiddle:function I(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y});},GetRightMiddle:function R(Y){return new T.Point2D({x:this.x+this.width,y:this.y+this.height/2});},GetBottomMiddle:function Q(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y+this.height});},HasIntersection:function J(Y){return(this.x<(Y.x+Y.width)&&Y.x<(this.x+this.width)&&this.y<(Y.y+Y.height)&&Y.y<(this.y+this.height));},PointInRectangle:function S(Y){return((Y.x>=this.x)&&(Y.x<=this.x+this.width)&&(Y.y>=this.y)&&(Y.y<=this.y+this.height));},Reset:function B(Y,b,Z,a){this.x=Y;this.y=b;this.width=Z;this.height=a;},copy:function N(Y){return M.copyProps(["x","y","width","height"],Y,this);},ResetRect:function D(Y){this.copy(Y);},Expand:function L(Z,Y){if((Y&P.REC_EXP_HORIZONTAL)>0){this.x-=Z;this.width+=2*Z;}if((Y&P.REC_EXP_VERTICAL)>0){this.y-=Z;this.height+=2*Z;}},clone:function U(){return new T.Rect2D({Rect2D:this});},ToPoints:function K(Y){if(Y){return{Center:this.GetCenter(),Origin:this.GetTopLeft(),Width:this.width,Height:this.height};}return{TopLeft:this.GetTopLeft(),TopRight:this.GetTopRight(),BottomLeft:this.GetBottomLeft(),BottomRight:this.GetBottomRight()};}});T.gDefaultTitlePosition=new T.Rect2D({x:15,y:15,width:670,height:21});T.gDefaultSubtitlePosition=new T.Rect2D({x:15,y:51,width:670,height:17});T.gDefaultFootnotePosition=new T.Rect2D({x:15,y:370,width:670,height:15});T.gEmptyRect=new T.Rect2D({x:0,y:0,width:0,height:0});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.DSSTimeUtil");var H=24*60*60*1000;var A=60*60*1000;var L=60*1000;var C=1000;var K=24;var D=24*60;var J=24*60*60;var B=new mstrmojo.chart.common.DSSTimeUtil();mstrmojo.chart.common.DSSDateTime=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSDateTime",mnYear:1899,mnMonth:12,mnDay:30,mnHour:0,mnMinute:0,mnSecond:0,mnMillisecond:0,mnWeek:-1,mnDayOfWeek:-1,init:function P(T){if(!T||!T.ifTime){this.mnYear=1899;this.mnMonth=12;this.mnDay=30;this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;this.mnWeek=-1;this.mnDayOfWeek=-1;return ;}var S=0;var V=23242571;var R=-693593;if(T.ifTime>V){this.mnYear=65535;this.mnMonth=12;this.mnDay=30;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<R){this.mnYear=1;this.mnMonth=1;this.mnDay=1;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}else{if(T.ifTime>0){var W=this.DAYSToYMD(Math.floor(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<0){var W=this.DAYSToYMD(Math.ceil(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}}}}S*=H;var U=S+0.5;if(U==H){U--;}if(U>0){this.mnHour=Math.floor(U/A);U-=this.mnHour*A;this.mnMinute=Math.floor(U/L);U-=this.mnMinute*L;this.mnSecond=Math.floor(U/C);U-=this.mnSecond*C;this.mnMillisecond=Math.floor(U);}else{this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;}this.mnWeek=-1;this.mnDayOfWeek=-1;this.Sanitize();},Sanitize:function O(){var R=false;if(this.mnHour==24&&this.mnMinute==0&&this.mnSecond==0){R=true;this.mnHour=0;}if(this.mnMonth<1){this.mnMonth=1;}else{if(this.mnMonth>12){this.mnMonth=12;}}if(this.mnDay<1){this.mnDay=1;}else{if(this.mnDay>B.DaysInMonth[this.mnMonth-1]){this.mnDay=B.DaysInMonth[this.mnMonth-1];if(this.mnMonth==2&&this.IsLeapYear(this.mnYear)){this.mnDay++;}}}if(this.mnHour<0){this.mnHour=0;}else{if(this.mnHour>23){this.mnHour=23;}}if(this.mnMinute<0){this.mnMinute=0;}else{if(this.mnMinute>59){this.mnMinute=59;}}if(this.mnSecond<0){this.mnSecond=0;}else{if(this.mnSecond>59){this.mnSecond=59;}}if(this.mnMillisecond<0){this.mnMillisecond=0;}else{if(this.mnMillisecond>999){this.mnMillisecond=999;}}if(R){var S=this.ToMilliseconds();S=S+H;this.init({ifTime:this.MillisecondsToDATE(S)});}},IsLeapYear:function Q(R){return((R&3)==0)&&((R%100)!=0||(R%400)==0);},ToMilliseconds:function I(){var R=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var S=R*H;S+=this.mnHour*A+this.mnMinute*L+this.mnSecond*C+this.mnMillisecond;return S;},MillisecondsToDATE:function E(S){var R=Math.floor(S/H);var T=(S-R*H)/H;if(T<0){R--;T+=1;}return R>=0?R+T:R-T;},DAYSToYMD:function N(T){var W=0;var Y=0;var S=0;T+=693959;var V=Math.floor(T/365);var U=T-V*365;var X=Math.floor(V/4)-Math.floor(V/100)+Math.floor(V/400);U=U-X;if(U<0){V--;U+=365;while(U<=0){V--;U+=365;}}var R=T-(V*365+Math.floor(V/4)+(V%4?1:0)-Math.floor((V-1)/100)+Math.floor((V-1)/400));if(R==365&&!this.IsLeapYear(V)){W=V+1;Y=1;S=1;return{year:W,month:Y,day:S};}if(R==-1){W=V-1;Y=12;S=31;return{year:W,month:Y,day:S};}W=V;Y=12;while(R<B.DaysBeforeMonth[Y-1]){Y--;}S=R-B.DaysBeforeMonth[Y-1]+1;if(Y>2&&this.IsLeapYear(W)){S--;if(S==0){Y--;S=B.DaysInMonth[Y-1];if(Y==2){S++;}}}return{year:W,month:Y,day:S};},YMDToDAYS:function G(U,T,S){if(T<1||T>12){return 0;}var R=U*365+Math.floor(U/4)+(U%4?1:0)-Math.floor((U-1)/100)+Math.floor((U-1)/400);R+=B.DaysBeforeMonth[T-1];if(T>2&&this.IsLeapYear(U)){R++;}R+=S-1;R-=693959;return R;},ToDATE:function F(){var S=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var R=this.mnHour/K+this.mnMinute/D+this.mnSecond/J+this.mnMillisecond/H;if(S>=0){return S+R;}else{return S-R;}},DateTimeOrder:function M(R){if(this.mnYear>R.mnYear){return 1;}else{if(this.mnYear<R.mnYear){return -1;}}if(this.mnMonth>R.mnMonth){return 1;}else{if(this.mnMonth<R.mnMonth){return -1;}}if(this.mnDay>R.mnDay){return 1;}else{if(this.mnDay<R.mnDay){return -1;}}if(this.mnHour>R.mnHour){return 1;}else{if(this.mnHour<R.mnHour){return -1;}}if(this.mnMinute>R.mnMinute){return 1;}else{if(this.mnMinute<R.mnMinute){return -1;}}if(this.mnSecond>R.mnSecond){return 1;}else{if(this.mnSecond<R.mnSecond){return -1;}}if(this.mnMillisecond>R.mnMillisecond){return 1;}else{if(this.mnMillisecond<R.mnMillisecond){return -1;}}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D");var B=mstrmojo.chart,C=new B.Rect2D();mstrmojo.chart.GridDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridDataLabelInfo",mIsDisPlayed:false,mIsValid:false,mSeriesId:-3,mGroupId:-3,mXIndex:-1,mYIndex:-1,mHostMarkerBound:null,mLabelPtr:null,init:function D(E){this._super(E);this.mHostMarkerBound=C;},ToRectangle:function A(){return this.mLabelPtr.GetBoundingRect();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Vector2D","Point2D","RGBColor","ChartConstants");var J=mstrmojo.chart,F=J.ChartConstants,B=mstrmojo.chart.model,C=B.enums;mstrmojo.chart.CEModuleMain=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CEModuleMain",mTolerance:0.01,mDefaultGraphWidth:700,mDefaultGraphHeight:400,mRiserCountLimit:32767,mpController:null,mGlowWidth:10,mColorParser:null,mGraphObjectMap:null,DegreeToRadian:function G(O){return O*F.kPI/180;},GetColorParser:function I(){if(this.mColorParser===null){this.mColorParser=new J.RGBColor();}return this.mColorParser;},GetGraphObjectMap:function A(){if(this.mGraphObjectMap===null){this.mGraphObjectMap=new J.common.MapStructure();}return this.mGraphObjectMap;},ResetGraphObjectMap:function K(){if(this.mGraphObjectMap){this.mGraphObjectMap.clear();}},RadianToDegree:function E(O){return(O*180/F.kPI+(O>=0?0.5:-0.5));},setController:function D(O){this.mpController=O;},GetLocalizedValue:function N(){},ShiftPolygonBy:function M(Q,R){if(R<=0){return Q;}var S,O,P=Q.length;R%=P;if(P<=1){return Q;}S=Q.slice(R,Q.length);O=Q.slice(0,R);return S.concat(O);},GetAngularBisectorIntersectionPoint:function L(O,Z,Y,S,T){var X=new J.Vector2D({x:O.x-Z.x,y:O.y-Z.y}),W=new J.Vector2D({x:Y.x-Z.x,y:Y.y-Z.y}),V=X.Length(),U=W.Length(),R=new J.Vector2D({x:X.x/V,y:X.y/V}),Q=new J.Vector2D({x:W.x/U,y:W.y/U}),P=0;if(Math.abs(R.x-Q.y)<this.mTolerance){P=S*(Q.x+R.x)/(R.y-Q.y);}else{P=S*(Q.y+R.y)/(Q.x-R.x);}T.x=Z.x+P*Q.x+S*(-Q.y);T.y=Z.y+P*Q.y+S*Q.x;},MakePolygonClockwise:function H(T){var Q=T.length,V=0,S,P,U,R,O;if(Q<3){return ;}for(S=1;S<Q;++S){if(T[S].x<T[V].x||(T[S].x<=T[V].x&&T[S].y<T[V].y)){V=S;}}P=(V+Q-1)%Q;U=new J.Vector2D({x:(T[P].x-T[V].x),y:(T[P].y-T[V].y)});P=(V+1)%Q;R=new J.Vector2D({x:(T[P].x-T[V].x),y:(T[P].y-T[V].y)});if(R.CrossProduct(U)<-this.mTolerance){for(S=0;S<Q/2;++S){O=T[S];T[S]=T[Q-S-1];T[Q-S-1]=O;}}}});J.gModuleMain=new J.CEModuleMain();}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","RGBColor","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillBevelEffect","EnumDSSGraphGradientType","EnumDSSGraphPictureScaleType","EnumDSSGraphPictureFormat");var Q=mstrmojo.chart,I=Q.enums,W=I.EnumFillType,N=mstrmojo.chart.model,J=N.enums,Y=J.EnumDSSGraphGradientType,d=J.EnumDSSGraphPictureScaleType,l=J.EnumDSSGraphPictureFormat,S=J.EnumDSSGraphFillBevelEffect;var A=0,L=1,P=2,h=3,B=4,X=5;var D=Q.gWhite.ToInteger(),a=Q.gBlack.ToInteger();var M=["mFillType","mAlpha","mSimpleColor","mDarkerFactor"],c=[W.FT_SIMPLE,255,1],j=["startGraphColor","endGraphColor","angle","horizontalOffset","verticalOffset","gradientType","endAlpha","intermediateColors","style"],F=[null,null,0,50,50,Y.DssGraphGradientCircular,0,null,0],e=["fillFlip","scaleType","pictureFormat","nameLength","pictureFilePtr","tripleId"],f=[A,d.DssGraphPictureScaleNone,l.DssGraphPicturePNG,0,null,null],i=["type","depth","lightAngle","intensity"],U=[S.DssGraphFillBevelNone,0,270,10];var K=false;mstrmojo.chart.FormatFill=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFill",mFillType:W.FT_SIMPLE,mAlpha:255,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillPicture:null,mFillBevel:null,mDarkerFactor:1,init:function g(o){var n,m=M.length;this._super(o);if(o&&o.Bare){for(n=0;n<m;++n){this[M[n]]=null;}}else{if(o&&o.SimpleColor!==undefined){this.mSimpleColor=o.SimpleColor;}else{this.mSimpleColor=D;}if(o&&o.Alpha!==undefined){this.mAlpha=o.Alpha;}else{this.mAlpha=255;}}if(K){this.mFillPattern={foregroundColor:D,backgroundColor:a,patternId:28};this.mFillPicture={fillFlip:A,scaleType:d.DssGraphPictureScaleNone,pictureFormat:l.DssGraphPicturePNG,nameLength:0,pictureFilePtr:null,tripleId:null};this.mFillBevel={type:S.DssGraphFillBevelNone,depth:0,lightAngle:270,intensity:10};}},transformToGradient:function E(m){var n=new Q.FormatFill({SimpleColor:this.SimpleColor,Alpha:this.mAlpha});n.mFillType=W.FT_GRADIENT;var o=n.getGradient();o.startGraphColor=m.StartGraphColor;o.endGraphColor=m.EndGraphColor;o.angle=m.Angle;o.gradientType=Y.DssGraphGradientLinear;o.endAlpha=m.EndAlpha;o.style=m.Style;o.intermediateColors=m.Colors.slice(0);return n;},getGradient:function H(){if(this.mFillGradient===null){this.mFillGradient={startGraphColor:a,endGraphColor:D,angle:0,horizontalOffset:50,verticalOffset:50,gradientType:Y.DssGraphGradientCircular,endAlpha:0,intermediateColors:[],style:0};}return this.mFillGradient;},FillSimple:function R(m){m.FillSimple(this,this.mDarkerFactor,this.mSimpleColor,false);},FillGradient:function b(n,m){return n.FillGradient(this,m,this.mDarkerFactor);},EnhancedSeriesEffect:function T(r,p,m,n,q){this.mAlpha=r;if(K){var o=this.mFillBevel;o.type=p;o.depth=m;o.lightAngle=n;o.intensity=q;}},FillEdgeType:function C(n,m){n.FillEdgeType(this,m);},FillDonutOrSphere:function O(o,m,n){o.FillDonutOrSphere(this,m,n);},MakeDarker:function V(m){this.mDarkerFactor=m;},RestoreColor:function k(){this.mDarkerFactor=1;},supportAdvancedFill:function G(m){return K;},restoreDefaults:function Z(s){var n,o,q,r,p,m;if(s){m=M.length;for(n=0;n<m;++n){this[M[n]]=c[n];}this.mSimpleColor=D;r=this.mFillGradient={};m=r.length;for(n=0;n<m;++n){r[j[n]]=F[n];}r.startGraphColor=a;r.endGraphColor=D;if(K){this.mFillPattern={foregroundColor:D,backgroundColor:a,patternId:28};o=this.mFillBevel={};m=i.length;for(n=0;n<m;++n){o[i[n]]=U[n];}q=this.mFillPicture={};m=e.length;for(n=0;n<m;++n){q[e[n]]=f[n];}}}else{m=M.length;for(n=0;n<m;++n){if(this[M[n]]===null){this[M[n]]=c[n];}}if(this.mSimpleColor===null){this.mSimpleColor=D;}if(this.mFillType===0){return ;}if(this.mFillGradient===null){this.mFillGradient={};}r=this.mFillGradient;m=j.length;for(n=0;n<m;++n){if(r[j[n]]===null||r[j[n]]===undefined){r[j[n]]=F[n];}}if(r.startGraphColor===null||r.startGraphColor===undefined){r.startGraphColor=a;}if(r.endGraphColor===null||r.endGraphColor===undefined){r.endGraphColor=D;}if(K){if(this.mFillPattern===null){this.mFillPattern={};}p=this.mFillPattern;if(p.foregroundColor===undefined||p.foregroundColor===null){p.foregroundColor=D;}if(p.backgroundColor===undefined||p.backgroundColor===null){p.backgroundColor=a;}if(p.patternId===undefined||p.patternId===null){p.patternId=28;}if(this.mFillBevel===null){this.mFillBevel={};}o=this.mFillBevel;m=i.length;for(n=0;n<m;++n){if(o[i[n]]===null){o[i[n]]=U[n];}}if(this.mFillPicture===null){this.mFillPicture={};}q=this.mFillPicture;m=e.length;for(n=0;n<m;++n){q[e[n]]=f[n];}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.FormatBase","mstrmojo.chart.RGBColor","mstrmojo.chart.enums.EnumLineStyle");var E=mstrmojo.chart,J=E.enums,L=J.EnumLineStyle;E.gLinePatterns=[[1,0],[18,6],[3,3],[9,6,3,6],[9,3,3,3,3,3],[9,2],[3,8],[30,10],[10,10],[3,8,3,8,3,17],[12,8,12,8,3,8],[12,5,12,5,3,5,3,5],[25,10,10,10],[25,5,8,5,8,5],[35,10,25,10,10,10],[37,5,37,5,8,5,8,5]];var G=["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","mGradient"],I=[L.LS_SOLID,255,1,75,null,null];function M(){if(this.mGradient===null){this.mGradient={valid:false,angle:0,endAlpha:0,style:1,colors:[],range:{start:{x:0,y:0},end:{x:0,y:0}}};}}mstrmojo.chart.FormatLine=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatLine",mLineStyle:L.LS_SOLID,mAlpha:255,mLineThickness:1,mLineThicknessPt:75,mLineColor:0,mGradient:null,init:function K(Q){var O,N=G.length;this._super(Q);if(Q){if(Q.Line){var P=Q.Line;this.mLineStyle=P.LineStyle;this.mAlpha=P.Alpha;this.mLineThickness=P.LineThickness;this.mLineColor=P.LineColor;}else{if(Q.Bare){for(O=0;O<N;++O){this[G[O]]=null;}}else{this.mLineStyle=Q.LineStyle||L.LS_SOLID;this.mAlpha=Q.Alpha||255;this.mLineThickness=Q.LineThickness||1;this.mLineColor=Q.LineColor||0;}}}},getGradient:function C(){M.call(this);return this.mGradient;},transformToGradient:function B(N){var P=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var O=P.getGradient();O.valid=N.Valid;O.angle=N.Angle;O.endAlpha=N.EndAlpha;O.style=N.Style;O.colors=N.Colors.slice(0);O.range={start:{x:N.Start.x,y:N.Start.y},end:{x:N.End.x,y:N.End.y}};O.strokePatten=this.mLineStyle;return P;},transformToGradientFromFill:function D(N,O,Q){var R=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var P=R.getGradient();P.valid=true;P.angle=N.angle;P.endAlpha=N.endAlpha;P.style=N.style;P.colors=[];P.colors=N.intermediateColors.slice(0);P.colors.push({Color:N.endGraphColor,Step:1});P.colors.splice(0,0,{Color:N.startGraphColor,Step:0});P.range={start:{x:O.x,y:O.y},end:{x:Q.x,y:Q.y}};return R;},ApplyLineFormat:function A(N){N.ApplyLineFormat(this);},getLinePattern:function H(N){return E.gLinePatterns[N];},restoreDefaults:function F(O){var N;if(O){for(N=0;N<G.length;++N){this[G[N]]=I[N];}}else{for(N=0;N<G.length;++N){if(this[G[N]]===null){this[G[N]]=I[N];}}}if(this.mLineColor===null){this.mLineColor=E.gBlack.ToInteger();}}});mstrmojo.chart.FormatLine.getLinePattern=function H(N){return E.gLinePatterns[N];};E.gOutlineWhite=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:1,LineColor:E.gWhite.ToInteger()});E.gOutlineBlack=new E.FormatLine({LineStyle:L.LS_DASH,Alpha:255,LineThickness:2,LineColor:E.gBlack.ToInteger()});E.gLeaderLine=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:2,LineColor:E.gLeaderLineColor.ToInteger()});E.gStrokeForDarkBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForDarkBackground.ToInteger()});E.gStrokeForLightBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForLightBackground.ToInteger()});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");function B(J,I){this.raiseEvent({name:"viCompBuilt",type:J,widget:I});}mstrmojo.vi.models.VIComponentMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.VIComponentMap",init:function G(I){this._super(I);this.relativePanels={};this.comps={};},addRelativePanel:function H(I){this.relativePanels[I]=true;},isRelativePanel:function F(I){return !!this.relativePanels[I];},isComponent:function C(J,I){return this.getComponentKey(J)===I;},getComponent:function A(I){return this.comps[I];},getComponentKey:function D(J){var I=this.getComponent(J);return(I&&I.k)||"";},createComponent:function E(L,K,J){B.call(this,L);var I=new K(J);this.comps[L]=I;B.call(this,L,I);return I;}});mstrmojo.vi.models.VIComponentMap.TYPES={FILTER_STACK:1,FILTER_PANEL:2,PAGEBY_STACK:3,PAGEBY_PANEL:4,VIZ_CONTENT:5,MAIN_CONTENT:6};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var B=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(C,D){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(C,D,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,D,C,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(C,D,G){var E=C.blockCount,F={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:E,includeAncestorInfo:"true",includeObjectDesc:C.includeObjectDesc};if(C.folderLinksContextId){F.folderLinksContextId=C.folderLinksContextId;}if(C.sId){F.sessionState=C.sId;}if(D.fid){F.rootFolderID=D.fid;}else{if(D.fty){F.rootFolderType=D.fty;}}if(C.browsableTypes){F.objectType=C.browsableTypes;}if(D.blockBegin){F.blockBegin=D.blockBegin;}if(D.searchPattern){if(C.enableQuickSearch){F.quickSearch=C.enableQuickSearch;}F.searchPattern=D.searchPattern;if(D.recursive){F.recursive=D.recursive;}}this.serverRequest(F,G);},newFolder:function(F,G,E,C){var D={taskId:"createFolder",taskContentType:"json",folderID:F,name:G,description:E};this.serverRequest(D,C);},loadObjects:function A(G,H,C,F){var D=[],E=[];B.forEach(G,function(I){D.push(I.did);E.push(I.t);});if(G.length>0&&F){this.serverRequest({taskId:"getObjectInfo",objectIDs:D.join(","),objectTypes:E.join(","),includeDetails:true},H,C);}else{H.success();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var B={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:B,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,init:function E(F){this.clear();this._super(F);},setAlignment:function C(F,G){this.alignment={host:F,popup:G};},addPopupHandlers:function D(F,H,G){this.popupHandlers[F]={open:H,close:G};},clear:function A(){this.popupHandlers={};var F=this.ENUM_CORNERS;this.alignment={host:F.BOTTOM_LEFT,popup:F.TOP_LEFT};}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=B;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Obj","mstrmojo.string","mstrmojo.hash","mstrmojo.expr","mstrmojo.mstr.EnumNodeDimty");var D=mstrmojo.array,P=mstrmojo.expr,J=P.ET,I=P.TP,K=mstrmojo.mstr.EnumNodeDimty,N=P.ET2TGT,M=P.ET2COND,B=mstrmojo.meta.TP;function O(S,A){var R=(A&&A.did)?A.did.split(P.FN_SEP):null,E=R&&parseInt(R[0],10),Q=R&&parseInt(R[1],10),T=S.et;S.fnt=E;S.fn=Q;if(T!=J.AE&&P.fn_List(Q,E)){S.et=J.AL;S.a2=null;S.cs=null;}else{if(T==J.AL&&!P.fn_List(Q,E)){S.et=J.AQ;S.cs=null;}else{if(T==J.MC&&!P.fn_AC_MC(Q,E)){S.et=J.MQ;S.m2=null;}else{if(T==J.AC&&!P.fn_AC_MC(Q,E)){S.et=J.AQ;S.a2=null;}}}}switch(Q){case P.FN.IS_NULL:case P.FN.IS_NOT_NULL:S.a2=null;S.a3=null;S.fm2=null;S.fm3=null;S.m2=null;S.m3=null;S.cs=null;break;case P.FN.BETWEEN:case P.FN.NOT_BETWEEN:break;default:S.a3=null;S.fm3=null;S.m3=null;while(S.cs&&S.cs.length>1){S.cs.pop();}}}function F(W,X,Y){var E=true,A=2+X;switch(Y.t){case I.PROMPT:var U=W.cs,V;if(!U){U=[];W.cs=U;}U[X]={};V=U[X];V.p=Y;W["a"+A]=null;W["m"+A]=null;switch(W.et){case J.AC:W.et=J.AQ;break;case J.MC:W.et=J.MQ;break;}break;case I.METRIC:W["a"+A]=null;W.cs=null;W.et=J.MC;W["m"+A]=Y;break;case I.ATTR:W["m"+A]=null;W.cs=null;W.et=J.AC;W["a"+A]=Y;W["fm"+A]=null;break;default:W["a"+A]=null;W["m"+A]=null;var U=W.cs;if(!U){U=[];W.cs=U;}if("did" in Y){W["a"+A]=null;W["fm"+A]=null;W["m"+A]=null;if(U[X]&&U[X].p){U[X].p=null;}}else{if(Y&&Y.v!=null){U[X]=Y;}else{if(U[X]){U=U.splice(X,1);}}E=false;}if(!Y.skipET){switch(W.et){case J.MC:W.et=J.MQ;break;case J.AC:W.et=J.AQ;break;case J.AL:if(!("did" in Y)&&Y.v){var Q,S=Y.dtp,U=[];Q=Y.v.split(mstrConfig.listSep);for(var R=0,T=Q.length;R<T;R++){U.push({v:mstrmojo.string.trim(Q[R]),dtp:S});}W.cs=U;}break;}}}return E;}var H={};H[J.AQ]={target:1,fm:1,fn:1,cs:1};H[J.AL]={target:1,fm:1,fn:1,cs:1};H[J.AE]={target:1,fn:1,es:1};H[J.AC]={target:1,a2:1,a3:1,fm:1,fm2:1,fm3:1,fn:1};H[J.MQ]={target:1,fn:1,cs:1,dmy:1};H[J.MC]={target:1,fn:1,m2:1,m3:1,dmy:1};H[J.F]={target:1};H[J.R]=H[J.F];H[J.XML]={target:1};var G=function(A){return A!==null&&A!==undefined;};var L=function(W){if(!W||!G(W.et)){return false;}var V=true,A=H[W.et],T=W.cs,S;V=V&&(!A.target||W[N[W.et]]);V=V&&(!A.fm||W.fm);V=V&&(!A.fn||G(W.fn));var R=P.fnCstCount(W.fn,W.fnt);if(V&&A.cs){for(S=0;S<R;S++){V=V&&T&&G(T[S]);}}if(V){var U=[N[W.et],"fm"];for(var E=0;E<2;E++){for(S=0;S<R;S++){var X=U[E]+(2+S);V=V&&(!A[X]||W[X]);}}}V=V&&(!A.es||W.es&&(W.es.length>0));var Q=W.dimtyTypes;V=V&&(!A.dmy||Q[K.NodeDimtyUnspecified]||Q[K.NodeDimtyNone]||(Q[K.NodeDimtyOutputLevel]&&W.dmy&&W.dmy.uts&&(W.dmy.uts.length>0)));return V;};mstrmojo.ConditionModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ConditionModel",completed:false,init:function(A){if(this._super){this._super(A);}this._updateCompleted();},edit:function(l,Y){var S=this[l],k=true;this.etWas=this.et;switch(l){case"not":Y=!!(Y&&Y.did===P.FN.NOT);S=!!this.not;if(Y===S){return ;}this.not=!!Y||null;break;case"target":var AA=this.et;if(Y){switch(Y[B]){case I.ATTR:case I.CONS:S=this.a;if(AA!==J.AQ&&AA!==J.AE){this.et=J.AQ;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}if(AA!==J.AE){this.fn=null;this.fnt=null;}this.fm=null;this.fm2=null;this.fm3=null;this.cs=null;break;case I.METRIC:S=this.m;if((AA!==J.MQ)&&(AA!==J.MC)){this.et=J.MQ;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.r=null;this.f=null;this.cs=null;this.dmt=K.NodeDimtyUnspecified;}this.m2=null;break;case I.REPORT:S=this.r;if(AA!==J.R){this.et=J.R;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.f=null;}break;case I.FILTER:S=this.f;if(AA!==J.F){this.et=J.F;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;}break;case I.PROMPT:S=this.prms&&this.prms[0];if(AA!==J.XML){this.et=J.XML;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}break;}}this.es=null;this[N[this.et]]=Y;break;case"fm":if(Y&&Y[B]==="fn"){this.et=J.AE;this.fm=null;O(this,Y);}else{this.fm=Y;if(Y&&(this.et==J.AE)){this.et=J.AQ;}this.fnt=null;this.fn=null;this.cs=null;this.a2=null;this.fm2=null;}break;case"fm2":case"fm3":this[l]=Y;break;case"fn":O(this,Y);break;case"es":var AD=this.es;if(Y&&Y.removed&&AD){D.removeItems(AD,Y.itemIdField,Y.removed);}if(Y&&Y.added){if(!AD){AD=Y.added.concat();this.es=AD;}else{D.insert(AD,AD.length,Y.added);}}break;case"c0":k=F(this,0,Y);break;case"c1":k=F(this,1,Y);break;case"dmy":var x=this.dmy;if(!x){x={cc:true,fres:true,uts:[]};this.dmy=x;}var s=x&&x.uts;if(!s){s=[];x.uts=s;this.dmt=K.NodeDimtyOutputLevel;}var Q={};Q[P.TP.ATTR]=true;Q[P.TP.DIM]=true;if(Y&&Y.removed){var f=[],A=false,W=[],R=false;for(var j=0,T=Y.removed,E=T.length;j<E;j++){var V=T[j],z=V[B] in Q;if(z){R=true;}else{A=true;}var h=z?W:f;h.push(V);}if(A){D.removeItems(s,"did",f);}if(R){var AC={};for(var d=0,Z=s&&s.length;d<Z;d++){var X=s[d];if(X&&X.utgt){AC[X.utgt.did]=d;}}var U=[];for(var y=0,w=W.length;y<w;y++){var g=AC[W[y].did];if(g>-1){U.push(g);}}U.sort(D.numSorter);for(var q=U.length-1;q>-1;q--){s.splice(U[q],1);}}}if(Y&&Y.added){var AE=[],m=P.DMY_TP.DIM,p=P.DMY_TP.ATTR;for(var AB=0,t=Y.added,e=t.length;AB<e;AB++){var o=t[AB];AE.push((o[B] in Q)?{utgt:o,utp:o[B]===I.DIM?m:p,agg:1,flt:2,gb:true,rps:0,n:o.n}:o);}D.insert(s,s.length,AE);}break;}this._updateCompleted();if(k){this.raiseEvent({name:"edit",prop:l,value:Y,valueWas:S});}},get:function C(){var A=M[this.et]||[];A.push("et");return mstrmojo.hash.copyProps(A,this);},_updateCompleted:function(){this.set("completed",L(this));}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.Obj");var K=mstrmojo.hash;var P=0;var F=[];var J={};var L=false;function I(T){var U=T.callback;if(U.submission){U.submission(T.id,this.userInteractionRequired(T),T);}this.submitRequest(T);}function G(){if(F.length&&!L){I.call(this,F.shift());}}mstrmojo.ServerProxy=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ServerProxy",transport:null,cnt:0,request:function E(d,a,U,V){if(U){this.cancelRequests();}var X=this.id,Y=this.transport,T=mstrmojo.now()+a.taskId+P++,W=d.canceled||mstrmojo.emptyFn;d.canceled=function(e){W();d.complete(true);return Y.cancelRequest(e);};d=mstrmojo.func.wrapMethods(d,{complete:function(e){mstrmojo.all[X].deleteRequest(e);}});var Z=!K.isEmpty(this._requests),b=this.createRequest(T,d,a,V),c=(L||Z)&&!V.doNotHold;if(c){F.push(b);}else{I.call(this,b);}return T;},hasRequests:function O(){return !K.isEmpty(this._requests)||L;},createRequest:function Q(V,X,W,T){var U=this._requests;if(!U){U=this._requests={};}U[V]={id:V,callback:X,params:W,config:T};return U[V];},submitRequest:function M(T){this.transport.serverRequest(this.id,T.id,T);},cancelRequests:function S(){var T=false;K.forEach(this._requests,function(U){if(U.gotResponse===undefined){T|=U.callback.canceled(U.id);}});this._requests={};F=[];return T;},cancelRequest:function B(X){var U=false,W=this._requests[X],V,T=F.length;for(V=0;V<T;V++){if(F[V]===W){break;}}if(V<T){F.splice(V,1);delete this._requests[X];U|=W.callback.canceled(W.id);}return U;},response:function A(X,T,V){$MAPF(false,"AndroidServerTransport","transportRequest");var W=this.getRequest(X);if(W){W.gotResponse=true;var Y=W.callback,U=(T&&!V.mstrerr)?"success":"failure";try{if(Y[U]){Y[U](V,W);}}finally{Y.complete(X);}}G.call(this);},deleteRequest:function N(U){var T=this._requests;delete T[U];},getRequest:function H(U){var T=this._requests;return T&&T[U];},userInteractionRequired:function C(T){return false;},addLoadingGraph:function D(T){J[T]=true;L=true;},removeLoadingGraph:function R(T){delete J[T];if(K.isEmpty(J)){L=false;G.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport");var BasicAggMap={"8107C31BDD9911D3B98100C04F2233EA":"Sum","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C32CDD9911D3B98100C04F2233EA":"Product",B2C0FA4020C711D6AD1400C04F0423DE:"Greatest","8107C330DD9911D3B98100C04F2233EA":"Var","8107C32FDD9911D3B98100C04F2233EA":"Stdev","8107C32DDD9911D3B98100C04F2233EA":"Median",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31CDD9911D3B98100C04F2233EA":"Count","8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",B2C0FA4120C711D6AD1400C04F0423DE:"Least"},RankMap={"8107C326DD9911D3B98100C04F2233EA":"Rank"},OLAPAggMap={D221F90EB35540E3A1204ED6CC9A8267:"Avg",D221F90FB35540E3A1204ED6CC9A8267:"Count",D221F910B35540E3A1204ED6CC9A8267:"Max",D221F911B35540E3A1204ED6CC9A8267:"Min",D221F90DB35540E3A1204ED6CC9A8267:"Sum"},MovingAggMap={"8107C32ADD9911D3B98100C04F2233EA":"Avg","8107C350DD9911D3B98100C04F2233EA":"Count","8107C34BDD9911D3B98100C04F2233EA":"Max","8107C34CDD9911D3B98100C04F2233EA":"Min","8107C32BDD9911D3B98100C04F2233EA":"Sum"},RunningAggMap={"8107C329DD9911D3B98100C04F2233EA":"Avg","8107C354DD9911D3B98100C04F2233EA":"Count","8107C351DD9911D3B98100C04F2233EA":"Max","8107C352DD9911D3B98100C04F2233EA":"Min","8107C328DD9911D3B98100C04F2233EA":"Sum"},BandingMap={"8107C337DD9911D3B98100C04F2233EA":"Banding","8107C338DD9911D3B98100C04F2233EA":"BandingC","8107C339DD9911D3B98100C04F2233EA":"BandingP"};function _sortFunctions(fcts){var fs=function(a,b){return mstrmojo.array.stringSorter(a.n,b.n);},i,len;fcts=fcts.sort(fs);for(i=0,len=fcts.length;i<len;i++){fcts[i].fns=fcts[i].fns.sort(fs);}return fcts;}function getFuncCatIndex(fcts,funcDid){var len=fcts.length,ci;for(ci=0;ci<len;ci++){var fns=fcts[ci].fns;if(mstrmojo.array.find(fns,"did",funcDid)>-1){return ci;}}return -1;}function buildTaskParams(params){var qse=mstrApp&&mstrApp.useQuickSearch&&mstrApp.useQuickSearch();params=mstrmojo.hash.copy(params,{taskId:"searchMetadata",recursive:true,styleName:"MojoFolderStyle",includeObjectDesc:true,includeAncestorInfo:false});if(qse){params.quickSearch=qse;params.nameWildcards=16;params.sortKey=-1;}return params;}function serverRequest(callback,taskParams){if(mstrApp.serverRequest){mstrApp.serverRequest(taskParams,callback);}else{window.$MAPF=function(){return false;};this.getServerProxy().request(callback,taskParams,false,{});}}mstrmojo.ME.MetricDataService=mstrmojo.provide("mstrmojo.ME.MetricDataService",{rootFolderTypes:{ALL:39,FILTERS:4,METRICS:5,FACTS:29,SCHEMA:24,ATTRIBUTES:26,TRANSFORMATIONS:38},blockCount:10,suggestCount:10,suggestDelay:200,noCache:true,functions:null,metricComponents:null,functionsDetails:null,getServerProxy:function getServerProxy(){if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}return this.serverProxy;},getMetricDefintion:function getMetricDefintion(params,callbacks){var taskParams={taskId:"getMetricDefinition",metricId:params.id,outputFlags:65599};if(params.msgID){taskParams.msgID=params.msgID;}serverRequest.call(this,callbacks,taskParams);},validateMetric:function validateMetric(params,callbacks){var taskParams={taskId:"validateMetric",metricId:params.metricId,tokenStreamXML:params.tokenStreamXML,metricXML:params.metricXML,outputFlags:327695};if(mstrmojo.string.isEmpty(params.metricId)){taskParams.isNew=true;}if(params.msgID){taskParams.msgID=params.msgID;}if(params.formID){taskParams.frmid=params.formID;}if(params.isIDForm){taskParams.isIDForm=params.isIDForm;}if(params.objectType){taskParams.objectType=params.objectType;}serverRequest.call(this,callbacks,taskParams);},getMetricComponents:function getMetricComponents(params,callbacks){var me=this,mc=this.metricComponents;if(!this.noCache&&mc&&mc.items.length==mc.sz){callbacks.success(mc);return ;}callbacks.success=mstrmojo.func.composite([callbacks.success,function(res){if(me.metricComponents&&me.metricComponents.items){me.metricComponents.items.push(res.items);}else{me.metricComponents=res;}}]);var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||24,objectType:params.objectType||"12,13,43"});serverRequest.call(this,callbacks,taskParams);},getAttributes:function getAttributes(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||26,objectType:12});serverRequest.call(this,callbacks,taskParams);},getFacts:function getFacts(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||29,objectType:13});serverRequest.call(this,callbacks,taskParams);},getMetrics:function getMetrics(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||5,objectType:4});if(params.isVerify){taskParams.nameWildcards=2;}serverRequest.call(this,callbacks,taskParams);},getFunctions:function getFunctions(callbacks){var me=this,wss=window.sessionStorage,fcts=this.functions||(wss&&wss.getItem("functions")),localeId=wss&&wss.getItem("mstrLocaleId"),cLocaleId=mstrApp&&mstrApp.localeId;if(fcts&&localeId==cLocaleId){fcts=_sortFunctions(eval("("+fcts+")").fncs);callbacks.success(fcts);}else{var cb={failure:callbacks.failure,textResponse:true},taskParams={taskId:"getSystemFunctions",includeFunctionDetails:true,functionFlags:2|2147483648,includeFunctionHelpTopic:true};cb.success=function(res){if(typeof res==="string"||!mstrApp.isSingleTier){if(wss){wss.setItem("functions",res);wss.setItem("mstrLocaleId",cLocaleId);}me.functions=res;fcts=_sortFunctions(eval("("+res+")").fncs);}else{fcts=_sortFunctions(res.fncs);me.functions=JSON.stringify(res);}callbacks.success(fcts);};serverRequest.call(this,cb,taskParams);}},getAggFunctions:function getAggFunctions(){if(this._aggFunctions){return this._aggFunctions;}var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.array.filter(fcts[this.getBasicCategoryIndex(fcts)].fns,function(item){var did=item.did,retVal;if(did!=="B2C0FA4020C711D6AD1400C04F0423DE"&&did!=="B2C0FA4120C711D6AD1400C04F0423DE"){retVal=BasicAggMap[did];}return retVal;});return fcts;},getOLAPAggFunctions:function getOLAPAggFunctions(type){var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.array.filter(fcts[this.getOLAPCategoryIndex(fcts)].fns,function(item){switch(type){case"moving":return MovingAggMap[item.did];case"running":return RunningAggMap[item.did];case"olap":default:return OLAPAggMap[item.did];}return false;});return fcts;},getFunctionCatList:function getFunctionCatList(){if(this._functionCatList){return this._functionCatList;}var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.hash.make(fcts,mstrmojo.Arr);this._functionCatList=fcts;return fcts;},getCategoryIndex:function getCategoryIndex(funcDid,fcts){return getFuncCatIndex(fcts||this.getFunctionCatList(),funcDid);},getBasicCategoryIndex:function getBasicCategoryIndex(fcts){var Agg_Func_Greatest="B2C0FA4020C711D6AD1400C04F0423DE";return getFuncCatIndex(fcts||this.getFunctionCatList(),Agg_Func_Greatest);},getDataMiningCatIndex:function getDataMiningCatIndex(fcts){var DataMining_Func_MiningModel="F17CD4F3FF134D91B80DDAB9CA73C919";return getFuncCatIndex(fcts||this.getFunctionCatList(),DataMining_Func_MiningModel);},getDateTimeCategoryIndex:function getDateTimeCategoryIndex(fcts){var DateTime_Func_Date="C50F2A4F75AE49D6B20E00224967B500";return getFuncCatIndex(fcts||this.getFunctionCatList(),DateTime_Func_Date);},getStringCategoryIndex:function getStringCategoryIndex(fcts){var String_Func_Concat="6F7DF5FF449111D5BEA300B0D01A55EF";return getFuncCatIndex(fcts||this.getFunctionCatList(),String_Func_Concat);},getOLAPCategoryIndex:function getBasicCategoryIndex(fcts){var OLAP_Func_Avg="D221F90EB35540E3A1204ED6CC9A8267";return getFuncCatIndex(fcts||this.getFunctionCatList(),OLAP_Func_Avg);},getInternalCategoryIndex:function getInternalCategoryIndex(fcts){var INTER_Func_Band="8107C337DD9911D3B98100C04F2233EA";return getFuncCatIndex(fcts||this.getFunctionCatList(),INTER_Func_Band);},getFunctionDetails:function getFunctionDetails(params,callbacks){var taskParams={taskId:"getSystemFunctions",functionId:params.did,includeFunctionDetails:true,includeFunctionHelpTopic:true};serverRequest.call(this,callbacks,taskParams);},getTransformations:function getTransformations(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||38,objectType:43});serverRequest.call(this,callbacks,taskParams);},getFilters:function getFilters(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||4,objectType:1});serverRequest.call(this,callbacks,taskParams);},getAttributeForms:function getAttributeForms(params,callbacks){var taskParams={taskId:"getAttributeForms",attributeID:params.attributeID,displayedForms:params.displayedForms,styleName:"WidgetElementListStyle"};serverRequest.call(this,callbacks,taskParams);},getSubtotalFunctions:function getSubTotalFunctions(params,callbacks){var taskParams=buildTaskParams({objectType:"1025,1026",searchPattern:""});serverRequest.call(this,callbacks,taskParams);},isBasicAggMap:function isBasicAggMap(did){var retVal=!!BasicAggMap[did];if(did==="B2C0FA4020C711D6AD1400C04F0423DE"||did==="B2C0FA4120C711D6AD1400C04F0423DE"){retVal=false;}return retVal;},isOLAPAgg:function isOLAPAgg(did){return !!OLAPAggMap[did];},isMovingAgg:function isMovingAgg(did){return !!MovingAggMap[did];},isRunningAgg:function isRunningAgg(did){return !!RunningAggMap[did];},isBanding:function isBanding(did){return !!BandingMap[did];},isOLAP:function isOLAP(did){var fcts=this.getFunctionCatList(),olapFns=fcts[this.getOLAPCategoryIndex(fcts)].fns;return mstrmojo.array.find(olapFns,"did",did)>-1;},isRank:function isRank(did){return !!RankMap[did];},isScalar:function isScalar(fctOi){return(fctOi||{}).sqt===3;},getFunctionHelpTopic:function getFunctionHelpTopic(h){return'<a href="'+((mstrApp.helpUrl||"../help/")+"FunctionsRef/index.html?context=functionsref&topic="+(h||""))+'" target="_new">'+mstrmojo.desc(5811,"Details ...")+"</a>";},sortFunctions:function sortFunctions(functions){var allfuncs={},fs=function(a,b){return mstrmojo.array.stringSorter(a.n,b.n);};mstrmojo.array.forEach(functions,function(funcs){mstrmojo.array.forEach(funcs&&funcs.fns,function(func){if(func&&func.did){allfuncs[func.did]=func;}});});return mstrmojo.hash.valarray(allfuncs).sort(fs);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css");var C=mstrmojo.Widget;mstrmojo.ui.Checkbox=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ui.Checkbox",markupString:'<div id="{@id}" class="mstrmojo-ui-Checkbox {@cssClass}" mstrAttach:click></div>',markupMethods:{onvisibleChange:C.visibleMarkupMethod,oncheckedChange:function B(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},onenabledChange:C.enabledMarkupMethod},checked:false,onclick:function A(){this.set("checked",!this.checked);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasEditableText","mstrmojo.css","mstrmojo.string","mstrmojo.dom");var C=mstrmojo.css,A=mstrmojo.dom,F=mstrmojo.string,E=function(H){this._super&&this._super(H);A.stopPropogation(H.hWin,H.e);},G=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.DynamicNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasEditableText],{scriptClass:"mstrmojo.fe.DynamicNode",markupString:'<div id="{@id}" class="mstrmojo-dynamic {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-dynamic-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-dynamic-prefix-text"  mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">'+G+'<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-onhoverparent mstrmojo-dynamicNode" title="'+mstrmojo.desc(13229,"Add this condition to the target list of a selector.")+'"><span class="mstrmojo-dynamicNode-info"><span class="mstrmojo-textset"></span></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" ></img></span><span class="mstrmojo-textset mstrmojo-rename-text" mstrAttach:click >'+mstrmojo.desc(1388,"Rename")+"</span>"+G+"</div></div>",markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},dynamicNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.lastChild.firstChild.lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},createSetNode:function(){return this.domNode.lastChild.lastChild;},renameNode:function(){return this.domNode.lastChild.childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){C.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){C.toggleClass(this.dynamicNode,["selected"],this.selected);},onisEditingChange:function(){C.toggleClass(this.domNode,["renaming"],this.isEditing);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=this.data.ph.n;},onglowChange:function(){var H=this;C.toggleClass(H.dynamicNode,["glow"],this.glow);if(this.glow){setTimeout(function(){C.toggleClass(H.dynamicNode,["glow"],false);H.glow=false;},1000);}},onnoRelationOperatorChange:function(){C.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){C.toggleClass(this.dynamicNode,["noRelation"],this.noRelation);}},editableSlot:"textNode",editButtonSlot:"renameNode",init:function(H){var J=H.data;if(J){var I=H.tree.nameFactory;if(J.ph.n){I.setName(J.ph.n,this);}else{J.ph.n=I.getNewName(this,mstrmojo.desc(12033,"Dynamic Condition")+" ");}}this._super(H);},_set_data:function(K,H){var I=this.data,J=(I!==H);if(J){this.data=H;this.text=H.ph.n;}return J;},preclick:function D(H){var J=null,I=A.eventTarget(H.hWin,H.e);if(A.contains(this.prefixNode,I,true)){J="andor";}else{if(A.contains(this.createSetOptNode,I,true)&&!this.noRelationOperator&&!this.noRelation){J="createSetOpt";}else{if(A.contains(this.createSetNode,I,true)&&!this.noRelation){J="createSet";}else{if(A.contains(this.renameNode,I,true)){this.set("isEditing",true);}}}}H.part=J;},isEmpty:function(){var I=this.data,H=I&&I.ph;return !(H&&H.n);},del:function B(){var I=this.parent,H=this.tree.nameFactory;if(I&&I.remove&&this.data){I.remove(this.data);H.removeName(this.data.ph.n);}},onkeyup:E,onkeydown:E,onTextEditComplete:function(){var J=this.tree,K=J.nameFactory,H=F.trim(this.text||""),I=this.data.ph.n;if(H&&H!==I){if(K.isNameExist(H)){K.names[H].set("glow",true);this.set("isEditing",true);}else{K.changeName(I,H,this);this.data.ph.n=H;}}},isSelectableArea:function(H){return mstrmojo.dom.contains(this.dynamicNode,H,true);},avatarCssCls:"mstrmojo-FE mstrmojo-dynamicNode",getAvatarNode:function(){return this.dynamicNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.css","mstrmojo.string","mstrmojo._IsExprNode","mstrmojo._HasPopup","mstrmojo.Widget");var O=mstrmojo.dom,B=mstrmojo.css,E=mstrmojo.string.htmlAngles,M=mstrmojo.expr,N=M.ET,K=M.FN,A=M.BRANCH_FNS[K.NOT],D={};D[K.BETWEEN]=1;D[K.NOT_BETWEEN]=1;var C={"*":function(Q,P){return Q?('<span class="mstrmojo-unknown">'+(E(Q.n||Q.xml)||"...")+"</span>"):null;}};function H(Q,P,S,R){return S&&((R?'<span class="mstrmojo-ListIcon t'+R+'"></span>':"")+'<span class="mstrmojo-text mstrmojo-embedobj">'+E(S)+"</span>");}C[N.R]=function(Q,P){return H(Q,P,Q.r&&Q.r.n,Q.r&&Q.r.t);};C[N.F]=function(Q,P){return H(Q,P,Q.f&&Q.f.n,Q.f&&Q.f.t);};C[N.XML]=function(Q,P){return H(Q,P,Q.n||Q.p&&Q.p.n||Q.xml,Q.p&&Q.p.t);};C[N.AE]=function(V,S){var R=[];if(V&&V.a&&V.a.n){R.push('<span class="mstrmojo-text mstrmojo-attr">'+E(V.a.n)+"</span>");if(V.fn!==M.FN.IN_LIST){R.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(V.et,V.fn,V.fnt))+"</span>");}var U=V.es,P=U&&U.length||0;if(P){R.push('<span class="mstrmojo-elems">');var Q=R.length;for(var T=0;T<P;T++){R[Q++]='<span class="mstrmojo-text mstrmojo-elem">';R[Q++]=E(U[T].n);if(T<P-1){R[Q++]=", ";}R[Q++]="</span>";}R[Q++]="</span>";}else{R.push('<span class="mstrmojo-text mstrmojo-emptyelems">(Empty)</span>');}}return R.join("");};C[N.AQ]=function(W,X){var T=[];if(W&&W.a&&W.a.n){T.push('<span class="mstrmojo-text mstrmojo-attr">'+E(W.a.n)+"</span>");if(W.fm&&W.fm.n){T.push('<span class="mstrmojo-text mstrmojo-form">'+E(W.fm.n)+"</span>");if(W.fn!=null){T.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(W.et,W.fn,W.fnt,W.fm.dtp))+"</span>");var P=M.fnCstCount(W.fn,W.fnt);if(W.et===N.AC){if(P>=1){if(W.a2&&W.a2.n){T.push('<span class="mstrmojo-text mstrmojo-attr2">'+E(W.a2.n)+"</span>");if(W.fm2&&W.fm2.n){T.push('<span class="mstrmojo-text mstrmojo-form2">'+E(W.fm2.n)+"</span>");}}if(P>1){T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");if(W.a3&&W.a3.n){T.push('<span class="mstrmojo-text mstrmojo-attr3">'+E(W.a3.n)+"</span>");if(W.fm3&&W.fm3.n){T.push('<span class="mstrmojo-text mstrmojo-form3">'+E(W.fm3.n)+"</span>");}}}}}else{if(W.et===N.AL){var U=W.cs,Y=[];for(var R=0,V=U.length;R<V;R++){Y.push(U[R].v);}T.push('<span class="mstrmojo-text mstrmojo-c1">'+Y.join(mstrConfig.listSep)+"</span>");}else{if(P>=1){var U=W.cs,S=U&&U[0];T.push('<span class="mstrmojo-text mstrmojo-c1">'+E(S&&S.p&&S.p.n||S&&S.v)+"</span>");if(P>1){var Q=U&&U[1];T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");T.push('<span class="mstrmojo-text mstrmojo-c1">'+E(Q&&Q.p&&Q.p.n||Q&&Q.v)+"</span>");}}}}}}}return T.join("");};C[N.AC]=C[N.AQ];C[N.AL]=C[N.AQ];C[N.MQ]=function(f,g){var e=[],Z=f&&f.m,j=Z&&Z.n;if(j){var Q=f.fnt,U=M.FNT.PER,c=M.FNT.RANK;j=Q===U?mstrmojo.desc(2787,"Percentage of ##").replace("##",j):Q===c?mstrmojo.desc(2788,"Rank of ##").replace("##",j):j;e.push('<span class="mstrmojo-text mstrmojo-metric">'+E(j)+"</span>");if(f.fn!=null){e.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(f.et,f.fn,Q,M.DTP.REAL))+"</span>");var X=M.fnCstCount(f.fn,Q);if(f.et==M.ET.MC){if(X>=1){var i=(f.m2&&f.m2.n)||"?";e.push('<span class="mstrmojo-text mstrmojo-m2">'+E(i)+"</span>");if(X>1){e.push('<span class="mstrmojo-text mstrmojo-btwn">'+g.betweenText+"</span>");var S=(f.m3&&f.m3.n)||"?";e.push('<span class="mstrmojo-text mstrmojo-m3">'+E(S)+"</span>");}}}else{if(X>=1){var R=f.cs,a=R&&R[0];var P=function(h){var d=h.v;if(f.fnt==U){if(d.replace){h.v=d.replace(/%$/,"");}d=h.v+"%";}return d;};e.push('<span class="mstrmojo-text mstrmojo-c1">'+E(a&&a.p&&a.p.n||a&&a.v&&P(a))+"</span>");if(X>1){var Y=R&&R[1];e.push('<span class="mstrmojo-text mstrmojo-btwn">'+g.betweenText+"</span>");e.push('<span class="mstrmojo-text mstrmojo-c2">'+E(Y&&Y.p&&Y.p.n||Y&&Y.v&&P(Y))+"</span>");}}}var b=f.dmy&&f.dmy.uts,W=b&&b.length;if(W){e.push('<span class="mstrmojo-text mstrmojo-at">'+g.atText+"</span>");e.push('<span class="mstrmojo-dmy">');for(var V=0;V<W;V++){var T=b[V];e.push('<span class="mstrmojo-text mstrmojo-dmyunit">');e.push(E(T.utgt?T.utgt.n:T.n));if(V<W-1){e.push(",");}e.push("</span>");}e.push("</span>");}}}return e.join("");};C[N.MC]=C[N.MQ];function G(P){var Q=P.data;if(Q.not){return'<span class="mstrmojo-text mstrmojo-not">'+A+"</span>";}return"";}function F(P){var R=P.data,Q=C[R&&R.et]||C["*"];return G(P)+((Q&&Q(R,P))||('<span class="mstrmojo-text">'+P.emptyText+"</span>"));}mstrmojo.ConditionNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.ConditionNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){B.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},oneditableChange:function(){B.toggleClass(this.textNode,["editable"],this.editable);},onselectedChange:function(){B.toggleClass(this.condNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=F(this);this.textPostfixNode.innerHTML=this.getConditionTextPostfix();}},betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),init:function L(P){this._super(P);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());},getConditionTextPostfix:function(){return"";},del:function J(){var P=this.parent;if(P&&P.remove&&this.data){P.remove(this.data);}},isEmpty:function(){var Q=this.data,P=Q&&Q.et,R=P&&mstrmojo.expr.ET2TGT[P];return !(R&&Q[R]);},isSelectableArea:function(P){return O.contains(this.condNode,P,true);},preclick:function I(P){var R=null,Q=O.eventTarget(P.hWin,P.e);if(O.contains(this.prefixNode,Q,true)){R="andor";}else{if(O.contains(this.textNode,Q,true)){R="condition";}else{if(O.contains(this.textPostfixNode,Q,true)){O.stopPropogation(P.hWin,P.e);return false;}}}P.part=R;}});mstrmojo.ConditionNode.getFunctionNode=F;})();(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,f=mstrmojo.array,e=mstrmojo.boxmodel,c=mstrmojo.dom;function A(i,k,h){var j=i.listSelector;if(j){j[k](i,i.itemsContainerNode,h);}}function L(i,h){var j=i.lastPagePos;if(!j||j.dragId!==h){j=e.offset(i.itemsContainerNode);j.dragId=h;i.lastPagePos=j;var k=i.scrollboxNode;i.lastScrollPos={left:k.scrollLeft,top:k.scrollTop,width:k.clientWidth,height:k.clientHeight};}}function O(k,n,i){var j=n&&n.node;if(j===k.dropCueNode||j===k.dropCueNode.firstChild){return k.dropCuePos;}var l=k.listMapper;var h=l&&l.whereDrop(k,k.itemsContainerNode,j,n.pos,{left:k.lastPagePos.left-k.lastScrollPos.left,top:k.lastPagePos.top-k.lastScrollPos.top,width:k.lastScrollPos.width,height:k.lastScrollPos.height});var m=k.dropCuePos;return((i!==false)&&m&&h&&(m.idx===h.idx)&&(m.left===h.left)&&(m.top===h.top))?m:h;}var g="attachEventListener";function D(i,h){if(i.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,i.itemsScriptClass||mstrmojo.Arr);}}return h;}function H(i,h){if(h&&h[g]){i._sub_its=h;i._sub_add=h[g]("add",i.id,"preadd");i._sub_rmv=h[g]("remove",i.id,"preremove");}}function G(h){if(h._sub_its){var i=mstrmojo.publisher;i.unsubscribe(h._sub_add);i.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var i=this.dropCueNode,h=i&&i.style;if(!h){return ;}var k=this.dropCuePos,j=!!k;if(j){h.left=k.left+"px";h.top=k.top+"px";}h.display=j?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(m){this._super(m);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,n=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||n){this.initSelections(l,j,k,n);}if(this.postInitItems){this.postInitItems();}},initItems:function I(h){return D(this,h);},preBuildRendering:function W(){var l=this.listBuilder,o=l.newContext(this);this.ctxtBuilder=o;var i=this.markupSlots,k=!!(this.renderOnScroll&&this.renderBlockSize&&i&&i.scrollboxNode),j=this.items,h=(j&&j.length)||0,m=k?this.firstRenderBlockSize:h,n=k?this.firstRenderBlockSize:0;this._eros=k;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(j,l,this,o,m,n).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var m=this.listMapper;if(m&&m.postBuildRendering){m.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var p=this.id;this._cb_scroll=function(){var i=mstrmojo.all[p];i.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var k=0,j=["itemsEffect","scrollEffect"],h=j.length;k<h;k++){var o=j[k],l=this[o];if(l&&l.constructor===Object){l=mstrmojo.insert(mstrmojo.hash.clone(l));l.widget=this;this[o]=l;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(l){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var j=0,k=["itemsEffect","scrollEffect"],h=k.length;j<h;j++){var m=this[k[j]];if(m&&m.isPlaying){m.cancel();}}this._super(l);},pauseScrollRendering:function P(j,h,i){if(j!==false){j=true;}if(this.paused===!!j){return ;}this.paused=!!j;if(j){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,i);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function b(h,l){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var m=(this.items&&this.items.length)||0;if(!m){if(l){l();}}else{var j=this.scrollboxNode,n=this.itemsContainerNode,k=mstrmojo.boxmodel.offset(n,j),p=this.listMapper,o=p.findScrollRange(n,m,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||j.scrollTop,j.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||j.scrollLeft,j.clientWidth,k.left,k.top);if(this.fillAt(o.start,o.end)){if(h){h();}var i=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[i].fill(h,l);},100);}else{if(l){l();}}}},fillAt:function M(j,i){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,j,i,this.renderBlockSize);}else{return false;}},add:function R(i,h){if(!i||!i.length){return -1;}var j=this.items;if(h==null){h=a.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(j&&j.length)||0;}if(j&&j.add){j.add(i,h);}else{this.set("items",j?f.insert(j.concat(),h,i):i);}return h;},preadd:function B(k){if(this.hasRendered){var n=this.listMapper;if(n){n.onadd(this,this.itemsContainerNode,this.ctxtBuilder,k);}var m=this.listBuilder;if(m){m.onadd(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onadd(this,k);}if(this._eros){this.onscroll();}else{var l=k.index,h=k.value.length;this.fillAt(l,l+h-1);}}if(this.onadd){this.onadd(k);}if(this._super){this._super(k);}},remove:function U(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var k=this.items;if(k){var j;if(k.remove){for(j=h.length-1;j>-1;j--){k.remove(h[j],1);}}else{k=k.concat();for(j=h.length-1;j>-1;j--){k.splice(h[j],1);}this.set("items",k);}return h[0];}return -1;},_remove:function U(j){var i=this.items;if(!i||(j==null)){return -1;}var h;if(!isNaN(j)){h=j;}else{h=this.itemIndex(j);}if(h>-1){if(i.remove){i.remove(h,1);}else{i=i.concat();i.splice(h,1);this.set("items",i);}}return h;},duplicate:function Y(m,i,j){var k=this.items,h=-1;if(!k||(m==null)){return -1;}if(!isNaN(m)){if(i===null||i===undefined){i=m+1;}m=k[m];}else{if(i===null||i===undefined){i=this.itemIndex(m)+1;}}if(m){var l;l=a.copy(j,a.clone(m));h=this.add([l],i);}return h;},preremove:function N(i){if(this.hasRendered){var k=this.listMapper;if(k){k.onremove(this,this.itemsContainerNode,this.ctxtBuilder,i);}var j=this.listBuilder;if(j){j.onremove(this,this.ctxtBuilder,i);}var h=this.listSelector;if(h){h.onremove(this,i);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(i);}if(this._super){this._super(i);}},move:function S(l,r){function p(s,i){s=parseInt(s,10);return i===1||(r>=s&&r<s+i);}var q=(this.items&&this.items.length)||0;if(r===-1||r==null||isNaN(r)){r=q;}else{r=Math.min(r,q);}var k,h,n,m;if(l.constructor===Array){h=l;n=l;m=(h&&h.length)||0;if(p(l[0],l.length)){return false;}k=f.get(this.items,l);}else{if(typeof (l)==="object"){k=[l];m=1;h=this.itemIndex(k[0]);n=[h];if(p(h,1)){return false;}}else{h=l;n=[l];m=1;if(p(h,1)){return false;}k=[this.items[h]];}}var o=0;for(var j=0;j<m;j++){if(n[j]<=r){r--;o++;}}if(o==n.length){r++;}if(k[0]!=null){this.remove(h);this.add(k,r);}return true;},itemIndex:function F(h){if(h==null){return -1;}var i=this.itemIdField;return i?f.find(this.items,i,h[i]):f.indexOf(this.items,h);},prechange:function T(k){if(this.hasRendered){var j=[this.listBuilder,this.listMapper];for(var l=0,h=j.length;l<h;l++){var m=j[l];if(m&&m.onchange){m.onchange(this,this.itemsContainerNode,this.ctxtBuilder,k);}}}},makeObservable:false,_set_items:function J(m,h){var l=this.items;h=this.initItems(h);this.items=h;if(l!==h){var k=this,j=function(){if(k.autoHide){k.set("visible",!!(h&&h.length));}k=null;},i=this.hasRendered;if(i){this.refresh(j);}else{j();}}return l!==h;},premousedown:function d(h){A(this,"premousedown",h);},premouseup:function Q(h){A(this,"premouseup",h);},scrollTo:function V(i){var h,j=this.listMapper;if(j&&j.toItem){if(!isNaN(i)){h=i;}else{h=this.itemIndex(i);}if(h>=0){j.toItem(this,h);}}},draggable:false,getDragData:function(l){L(this,l.id);var j=O(this,l.src),i=j&&j.idxActual;if((i>-1)&&this.selectedIndices[i]){var k=this.sortSelectedIndices(),h=f.get(this.items,k)||[];switch(h.length){case 1:return a.copy({html:h[0][this.itemDisplayField],index:k[0]},a.copy(h[0]));case 0:return null;default:return a.copy({html:h.length+" selections",indices:k},h);}}},dropZone:false,ondragenter:function(h){L(this,h.id);this.set("dropCuePos",O(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",O(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},isDragValid:function C(h){return h&&h.src&&h.src.data;},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(k){var i=k&&k.tgt,h=i&&i.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!c.ctrlKey(i.hWin,i.e)){var j=k.src&&k.src.data;if(j&&(j.indices||(j.index!==null))){this.remove(j.indices||j.index);}}}}},ondrop:function(q){var u=q&&q.src,p=u&&u.data;if(p){var k=O(this,q.tgt,false),r=k&&k.idx,l=(p&&p.constructor===Array),j=this.sortSelectedIndices();var n=this.items;r=Math.min(r,n&&n.length)||0;var t=true;if(u.widget===this){t=this.move(j,r);f.forEach(j,function(i){if(i<=r){r--;}});}else{this.add(l?p:[p],r);}if(t){var o=l?p.length:1,h={};for(var m=0;m<o;m++){h[r+m]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");var E=mstrmojo.Widget;mstrmojo.ui._IsPulldown=mstrmojo.provide("mstrmojo.ui._IsPulldown",{scriptClass:"mstrmojo.ui._IsPulldown",markupString:'<div id="{@id}" style="{@cssText}" class="mstrmojo-ui-Pulldown {@cssClass}" mstrAttach:mousedown,click><div class="mstrmojo-ui-Pulldown-text {@cssTextClass}" title="{@title}" style="{@labelCssText}">{@value}</div><div class="container"></div></div>',markupSlots:{selectedNode:function D(){return this.domNode.firstChild;},containerNode:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:E.visibleMarkupMethod,onheightChange:E.heightMarkupMethod,onwidthChange:E.widthMarkupMethod,onvalueChange:function F(){this.selectedNode.innerHTML=this.value||"";},onenabledChange:mstrmojo.Widget.enabledMarkupMethod},getPopupList:mstrmojo.emptyFn,anchorSlot:"selectedNode",postBuildRendering:function B(){this._super();this.getPopupList().set("items",this.items);var G=this.selectedIndex,H=this.selectedIndices;if(G!==undefined){this.set("selectedIndex",G);}if(H!==undefined){this.set("selectedIndices",mstrmojo.hash.copy(H||{}));}},onitemsChange:function C(){var G=this.getPopupList();if(G){G.set("items",this.items);}},onPopupWidgetOpened:function(){var G=this.getPopupList();if(G&&(!G.items||G.items.length===0)){G.close();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.string");function C(H,D,E){var K=[];var G=H.optionRenderer,I=G&&G.render;if(I&&typeof I==="function"){var L=H.options,J=Math.min(E,((L&&L.length)||0)),F;for(F=D;F<J;F++){K.push(I(L[F],F,H));}}return K.join("");}mstrmojo.DropDownList=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DropDownList",title:"",selectCssClass:"",tooltip:"",cssDisplay:"inline",value:"",unset:false,options:null,optionValueField:"v",optionNameField:"n",idx:-1,renderedOptions:"",markupString:'<span id="{@id}"  class="mstrmojo-DropDownList {@cssClass}">{@title}<select id="{@id}_select" class="mstrmojo-DropDownList-select {@selectCssClass}"  style="{@cssText}" title="{@tooltip}"onchange="mstrmojo.all[\'{@id}\'].set(\'selected\', this.options[this.selectedIndex].value);">{@renderedOptions}</select><div class = "strikeoutContainer"></div></span>',markupSlots:{selectNode:function(){return this.domNode.getElementsByTagName("select")[0];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onidxChange:function(){var D=this.domNode.getElementsByTagName("select");if(D&&D.length){D[0].selectedIndex=this.idx;}},onvalueChange:function(){var I=this.selectNode,G=I.options,F=this.value,E,H;for(H=0;H<G.length;H++){var D=G[H].value.toString()===F;if(D){E=H;if(F!==""){mstrmojo.css.toggleClass(G[H],"selected",D);}break;}}if(I.length>0&&E>0&&this.unset){if(this.options[0].v==="-1"){I.remove(0);E--;}this.unset=false;}this.set("idx",E);},onwidthChange:function(){var D=this.width;if(D>=0){this.selectNode.style.width=D+"px";}}},_set_selected:function(G,D){var E=this.selectNode,F=this[G]!==D;this[G]=D;if(E){this.set("value",D);}return F;},preBuildRendering:function A(){var F=this;if(F.unset){F.idx=0;}var E=F.options,D=(E&&E.length)||0;if(D){F.renderedOptions=C(F,0,D);}return this._super();},optionRenderer:{render:function(E,D,F){return mstrmojo.string.apply(F.getOptionMarkup(E),F.getOptionProps(E,D));}},getOptionMarkup:function(D){return'<option value="{@en@v}" class="{@cls}" style="{@style}" {@sel}>{@en@n}</option>';},getOptionProps:function B(F,D){var G=this,H=F[G.optionValueField],E=D===parseInt(G.idx,10);G.selected=G.value=E?H.toString():G.value;return{cls:E?"selected":"",v:H===undefined?"":H,n:F[G.optionNameField]||"",style:"",sel:E?"selected":""};}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.Widget");var R=["(",")","{","}","-","+","*","/","<",">","|","~",","],G={" ":true,"@":true},Q=null;function J(V){if(!Q){Q={};var U,T;for(U=0,T=R.length;U<T;U++){Q[R[U]]=true;}}return Q.hasOwnProperty(V);}function S(V){if(!V){return false;}var T=V.length,U,W;for(U=0;U<T;U++){W=V.charAt(U);if(J(W)||G[W]){return true;}}return false;}function A(T){return S(T)?"["+T+"]":T;}var M={8:true,9:true,10:true};var C=function(U,T){return M[U]&&!/^\".*\"$/.test(T)?'"'+T+'"':T;};var D=function(U,T,V){var W=typeof V==="undefined"?true:M[V];return U.tp===261&&T.length>=2&&W?(/^\s+$/.test(T.substr(1,T.length-2))?T:T.substr(1,T.length-2)):T;};mstrmojo.ME.MetricToken=mstrmojo.declare(mstrmojo.Widget,null,{data:null,markupString:'<span id={@id} class="mstrmojo-token {@cssClass}"></span>',active:false,markupMethods:{ondataChange:function(){var U=this.data,T=mstrmojo.string.encodeHtmlString(String(U.v));if(U.v===","){this.domNode.innerHTML=T+"&nbsp;";}else{if(U.tp===259&&U.v==="Desc"){this.domNode.innerHTML="&nbsp;"+T;}else{this.domNode.innerHTML=T;}}mstrmojo.css.toggleClass(this.domNode,["mstr"],this.isMstrO());mstrmojo.css.toggleClass(this.domNode,["nfn"],!this.isFunction());mstrmojo.css.toggleClass(this.domNode,["invalid"],U.sta===-1);},onactiveChange:function(){mstrmojo.css.toggleClass(this.domNode,["active"],this.active);}},isMstrO:function P(){return !!this.data.oi||!!this.data.rfd;},isFunction:function B(){return this.isMstrO()&&(this.data.oi&&this.data.oi.t==11);},brackets:A,length:function E(){return this.data.v.toString().length;},isDelimiter:function O(){return this.data.isDelimiter||(this.length()===1&&J(this.data.v));},split2Tokens:function H(W){var V=this.data,U=V&&V.v.toString(),X=U.substring(0,W),T=U.substring(W);return[{v:X,isNew:true},{v:T,isNew:true}];},mergeTo:function I(U){var W=this.data,V=W&&W.v.toString(),T=U.data.v.toString();return{v:V+T,isNew:true};},brackets:A,setItemInfo:function N(T){var U=this.data;U.v=this.brackets(T.n);U.oi=T;U.sta=1;U.isNew=true;this.set("data",U);this.paint();},spliceContent:function K(Z,X,U){var Y=this.data,W=Y&&Y.v.toString(),a=W.substring(0,Z);X=(X===null||X===undefined)?(W.length-Z):X;var T=W.substring(Z+X),V=a+(U||"")+T;Y.v=V;Y.isNew=true;Y.sta=1;Y.ift=(this.isAttributeToken()||Y.at)&&(Y.v.indexOf("@")>=0);if(Y.ift){Y.at=Y.oi||Y.at;}else{delete Y.at;}delete Y.oi;delete Y.exv;delete Y.extp;delete Y.tp;this.set("data",Y);this.paint();},isAttributeToken:function F(){return this.data&&this.data.oi&&this.data.oi.t===12;},setFormInfo:function L(U){var V=this.data,T=V.oi||V.at;V.v=this.brackets(T.n)+"@"+this.brackets(U.n);V.exv=U.did;V.extp=8;V.sta=1;V.isNew=true;V.oi=V.at;delete V.at;this.set("data",V);this.paint();}});mstrmojo.ME.MetricToken.isDelimiter=J;mstrmojo.ME.MetricToken.brackets=A;mstrmojo.ME.MetricToken.quotes=C;mstrmojo.ME.MetricToken.unquotes=D;mstrmojo.ME.MetricToken.QUOTABLE_DATATYPES=M;mstrmojo.ME.MetricToken.argDelimiter={".":",",",":";"}[mstrConfig&&mstrConfig.decimalSep]||",";})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css,G=mstrmojo.array;function F(H,J){var I={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[H]||{};if(typeof J==="object"){mstrmojo.hash.copy(J,I);}return I;}var B="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,forceResetCache:false,onUpdateSearchParams:mstrmojo.emptyFn,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(4326,"Case Sensitive")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},searchNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},optionNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function E(H){var J=this;var I=J.searchTimer;if(I){window.clearTimeout(I);}J.searchTimer=window.setTimeout(function(){J.onkeyupDelayed(H);delete J._searchTimer;},parseInt(H.e.keyCode||H.e.charCode,10)===13?0:J.searchDelay);},onkeyupDelayed:function A(I){var H=I.hWin,K=I.e||H.event;var J=mstrmojo.string.trim(this.inputNode.value);if(this.searchNode){C.toggleClass(this.searchNode,["clear"],J.length>0);}this.showTaskError=false;this.click2Search=false;if(J.length==0||this.autoSubmit||this.onEnter&&K.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(I){var H=I.hWin,K=I.e||H.event,M=K.target||K.srcElement,L=M&&M.id;switch(L.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var J=this.optionNode.parentNode.style;J.display=J.display=="block"?"none":"block";}break;case"sbSearch":if(this.inputNode.value.length>0){this.clearSearch();}break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);var I=this.searchCache,H=this.rootID;if(I&&I[H]){I[H][B]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache(this.forceResetCache);var I=this.searchCache[this.rootID];if(I){var H=I[B]||"";this.inputNode.value=H;if(H.length>0){if(H.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(I){var H=this.contentWidget||this;H.set("items",I[0]);if(this.supportIncFetch){var J=I[1],L=I[2],K=this.blockCount;H.set("ifs",{np:Math.floor(J/K)+((J%K>0)?1:0),cp:Math.floor(L/K)+((L%K>0)?1:0)});}},_onsearch:function(H){this.getRootID();this._setupCache();var K=mstrmojo.string.trim(this.inputNode.value);if(K.length===0){H=true;}var L=this.token[this.taskId];if(L.test(K)){}if(this.searchPattern==K&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var M=this.rootID,J=this.searchCache[M];if((K.length<this.minSearchLength&&!this.click2Search)&&!H){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(J[M]);this.searchPattern=K;}}else{this.searchPattern=K;J[B]=this.searchPattern;var I=this.filterCache(K,J,H);if((this.click2Search||I===null)&&!H){this.blockBegin=1;this.fetch();return ;}else{this._notifyContentWidget(I);}}J[B]=K;},_setupCache:function(J){var K=this.searchCache,I=this.rootID;if(K&&(J||!K[I])){K[I]=K[I]||{};var H=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];K[I][I]=[H,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",serverRequest:function D(H,I){mstrmojo.xhr.request("POST",this.path,I,H,undefined,this.XServer,this.baseParams);},fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var H=this,I=F.apply(this,[this.taskId]);I.searchPattern=this.searchPattern;this.onUpdateSearchParams(I);var J={success:function(K){var L=K.items||K.es||[];L=[L,K.totalSize||K.sz||0,K.blockBegin||K.bb];mstrmojo.all[H.id].searchCache[H.rootID][(I.searchPattern.length==0?H.rootID:H.buildIndex(I.searchPattern))]=L;H._notifyContentWidget(L);},failure:function(K){if(H.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+K.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(H.spinnerNode){H.spinnerNode.style.display="none";}if(H.postFetch){H.postFetch();}}};this.serverRequest(I,J);},fetchPage:function(H){this.blockBegin=H*this.blockCount+1;this.fetch();},filterCache:function(J,M,I){var H=M&&M[I?this.rootID:this.buildIndex(J)];if(H){return H;}var K=this.token[this.taskId];if(K.test(J)||this.totalSize>this.blockCount){return null;}var O=J.replace(/.$/,"");H=M&&M[this.buildIndex(O)];while(H===undefined&&(O=O.replace(/.$/,"")).length>0){H=M&&M[this.buildIndex(O)];}if(H!==undefined){if(H[1]>this.blockCount){return null;}var L=H[0],N=[];G.forEach(L,function(P){if(P.n.search(new RegExp(J,this.matchCase?"":"i"))>-1){N.push(P);}});this.totalSize=N.length;return(M[this.buildIndex(J)]=[N,N.length,this.blockBegin].concat());}return null;},buildIndex:function(H){if(H.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?H.toUpperCase():H+"::0";},init:function(H){if(this._super){this._super(H);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css");var C=mstrmojo.css,E=mstrmojo.desc(14058,"Show Details"),A=mstrmojo.desc(14059,"Hide Details"),F=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div>'+F+'</div><div class="toggle-details-link" >'+E+'</div><div class="error-details">{@en@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];}},markupMethods:{onshowDetailsChange:function(){var H=this.showDetails;this.toggleDetailsNode.innerHTML=H?A:E;C.toggleClass(this.domNode,"show-details",H);this.updateScrollbars();}},shortDesc:undefined,longDesc:undefined,showDetails:false,init:function G(H){this._super(H);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function B(H){var J=H.getTarget(),I,K=this.longDesc;if(J===this.contactNode){I="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(K?("&body="+encodeURI("Detail:\r\n"+K)):"");mstrApp.openPage(I,"_self");}else{if(J===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);}}},setupScrollNodes:function D(){this.scrollNode=this.scrollNode;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(K,N,G,L){var I=K.domNode,M=I.offsetWidth,D=K.scrollableIncFetch;var E=K.hasAnimation&&(!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5),J=L?1:-1,F=parseInt(M,10)*J,H=E?500:0;A(0,-F,H,{target:G,duration:H,preStart:function(){this.target.style.overflowY="hidden";},onEnd:function(){this.target.style.display="none";}});A(F,0,H,{target:N,preStart:function(){this.target.style.display="block";this.target.style.overflowY=(D?"visible":"auto");}});if(K.waiting){A(0,-F,H,{widget:K,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}else{if(this.scrollableIncFetch){E.style.overflowY="visible";}}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,hasAnimation:true,scrollableIncFetch:false,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","JSONFormat","FormatFill");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumFormatType");var F=mstrmojo.hash,D=mstrmojo.chart,B=D.enums,A=B.EnumFormatType,C=B.EnumFillType;mstrmojo.chart.JSONFormatFill=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFill",mFillType:0,mAlpha:0,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillBevel:null,init:function E(H){H.mFormatType=A.FMT_FILL;this._super(H);F.copyProps(["mFillType","mAlpha","mSimpleColor","mFillGradient","mFillPattern","mFillBevel","id"],H,this);},AppendToJSONObject:function G(N){var I=this.mFillBevel,H=this.mFillGradient,O=this.mFillType,K={FormatType:this.mFormatType,FillType:O,Alpha:this.mAlpha,Bevel:{FillBevelType:I.type,Depth:I.depth,LightAngle:I.lightAngle,Intensity:I.intensity}};switch(O){case C.FT_SIMPLE:var L=this.mSimpleColor;K.SimpleColor={R:L.mR,G:L.mG,B:L.mB};break;case C.FT_TEXTURE:break;case C.FT_PICTURE:break;case C.FT_GRADIENT:var M=H.startGraphColor,J=H.endGraphColor;K.Gradient={StartGraphColor:{R:M.mR,G:M.mG,B:M.mB},EndGraphColor:{R:J.mR,G:J.mG,B:J.mB},Angle:H.angle,HorizontalOffset:H.horizontalOffset,VerticalOffset:H.verticalOffset,GradientType:H.gradientType,EndAlpha:H.endAlpha,Style:H.style,IntermediateColors:H.intermediateColors.slice(0)};break;case C.FT_PATTERN:break;default:break;}N.push(K);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo._IsPopup","mstrmojo._CanAutoClose");var C=mstrmojo.dom;mstrmojo.ui.PopupWidget=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.PopupWidget",markupString:'<div id="{@id}" class="mstrmojo-ui-PopupWidget {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="pw-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},autoCloses:true,locksHover:true,closeOnClick:true,visible:true,onclick:function B(D){C.stopPropogation(null,D.e);}});}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.VisMenuList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.VisMenuList",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);},getItemProps:function A(F,D){var E=this._super(F,D);E.tag="a";E.addCls("mstrmojo-ui-Menu-item");return E;},onselectionChange:function B(D){this._super(D);this.parent.data.set("valid",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");mstrmojo.ui.List=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.List",postselectionChange:function C(D){var G=D.added||[],F=G.length,I=D.removed||[],E=I.length;if(E){this.selectionRemoved({added:G,removed:I,isReselect:false});}if(F){var H=function(J){return[].concat(J).sort().join(",");};this.selectionAdded({added:G,removed:I,isReselect:H(G)===H(I)});}},selectionAdded:function A(D){},selectionRemoved:function B(D){}});mstrmojo.ui.List.SelectionChangeEvtType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var D=mstrmojo.dom,F=mstrmojo.array,E=mstrmojo.hash;var A;mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(H,G){if(!A){var I=this.itemField;A=this._super(H).replace(">{@en@n}<",' title="{@en@'+I+'}">{@en@'+I+"}<");}return A;},getItemProps:function C(I,G){var H=this._super(I,G),J=this.itemField;H[J]=I[J];return H;},onclick:function B(G){if(this.disableClick){return false;}var L=this,I=this.parent,K=I.opener,H=D.isMetaKey(G.hWin,G.e);if(H&&!this.multiSelect){this.multiSelect=K.parent.defn.multi;if(this.multiSelect){D.attachOneTimeEvent(document.documentElement,"keyup",function(){var N=L.selectedIndices;if(K){K.suggestionShown=false;if(N&&!E.isEmpty(N)){var M=[];E.forEach(L.selectedIndices,function(P,O){M.push(L.items[O]);});K.handleSuggestionItemSelect(M);}I.close();}L.multiSelect=false;});}}this._super(G);if(!this.multiSelect){K.suggestionShown=false;var J=this.selectedItem;if(J){K.handleSuggestionItemSelect(J);}I.close();}},bindings:{itemField:"this.parent.opener.itemField",items:"this.parent.opener.suggestionItems",disableClick:"this.parent.opener.disableClick"}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var B=mstrmojo.func,C=mstrmojo.dom,F="mstrmojo-popup-widget-hosted";mstrmojo.ui.PopupButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ui.PopupButton",onPopupWidgetClosed:mstrmojo.emptyFn,onPopupWidgetOpened:mstrmojo.emptyFn,anchorSlot:"domNode",isHostedWithin:true,hostedCSSClass:"",destroy:function H(L){if(this._listenerProc){C.detachEvent(window,"resize",this._listenerProc);}this._super(L);},getPopupWidget:mstrmojo.emptyFn,postCreateChildren:function D(){var L=this.getPopupWidget();if(!L||L._pbCfg){return ;}var M=function M(O,N){return function(){O.apply(N,arguments);};};L.onOpen=B.composite([M(this.onPopupWidgetOpened,this),L.onOpen||mstrmojo.emptyFn]);L.onClose=B.composite([M(this.onPopupWidgetClosed,this),L.onClose||mstrmojo.emptyFn]);L._pbCfg=true;},onclick:function K(L){var N=L.getTarget();if(N===this[this.anchorSlot]||N.parentNode===this[this.anchorSlot]){var M=this.getPopupWidget();if(!M.visible){this.openPopup(M);}else{this.closePopup();}}},onPopupAutoClosed:function I(M,L){if(C.contains(this[this.anchorSlot],C.eventTarget(L,M),true)){return false;}},getPopupHostNode:function J(){return this.containerNode;},getPopupConfig:function G(){var M=[F],L=this.hostedCSSClass;if(L){M.push(L);}return new mstrmojo.ui.PopupConfig({hostId:this.id,hostElement:this.getPopupHostNode(),anchorElement:this[this.anchorSlot],isHostedWithin:this.isHostedWithin,hostProxyCssClass:M.join(" ")});},unrender:function E(L){if(this._listenerProc){C.detachEvent(window,"resize",this._listenerProc);delete this._listenerProc;}this._super(L);},postBuildRendering:function A(){var P=this.getPopupWidget();if(P){var R=this.getPopupConfig();if(!R.isHostedWithin){var N=this.parent||this.opener,M=R.hostProxyCssClass.split(" ");M.push(this.domNode.className);while(N){var Q=N.themeClassName;if(Q){M.push(Q);break;}N=N.parent||N.opener;}R.hostProxyCssClass=M.join(" ");}P.popupConfig=P.addDisposable(R);}var L=P.id,O=this._listenerProc=function(){var S=mstrmojo.all[L];if(S&&S.visible&&S.adjustCornersForPopupOverflow){S.adjustCornersForPopupOverflow();}};if(this.isHostedWithin===false){C.attachEvent(window,"resize",O);}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var D=function(){var F=this.opener;if(F.direction.toLowerCase()==="up"){this.domNode.style.top=-F.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"19px",text:"",direction:"down",enabled:true,title:"",markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.text;},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function B(){if(this._super){this._super();}var F=this.popupRef;if(F){if(F.nudge){F.nudge=mstrmojo.func.composite([F.nudge,D]);}else{if(this.direction.toLowerCase()!=="down"){F.nudge=D;}}}},popupRef:null,popupOpenConfig:null,destroy:function C(F){var G=this.popupRef;if(G&&G.hasRendered){G.destroy(false);}if(this._super){this._super(F);}},togglePopup:function E(){var F=this._lastOpened;if(F&&F.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(F){this.togglePopup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._HasEditableText","mstrmojo.css");var B=mstrmojo.css;mstrmojo.EditableLabel=mstrmojo.declare(mstrmojo.Label,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.EditableLabel",autoApplyDelay:-1,markupString:'<div id="{@id}" class="mstrmojo-EditableLabel {@cssClass}" title="{@title}" contenteditable="{@isEditing}" style="{@cssText}" mstrAttach:click,mousedown,blur,keydown,keyup></div>',onkeyup:function C(D){this._super(D);if(this._autoApplyTimer){window.clearTimeout(this._autoApplyTimer);}if(this.autoApplyDelay!==-1){var E=this;this._autoApplyTimer=window.setTimeout(function(){E.set("isEditing",false);},this.autoApplyDelay);}},selectable:true});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.EditableLabel,{onselectableChange:function A(){var E=this[this.editableSlot],D=!!this.selectable;E.selectable=D;E.setAttribute("unselectable",!D?"on":"off");B.toggleClass(E,"unselectable",!D);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ConditionNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.dom","mstrmojo.css");var A=mstrmojo.dom,B=mstrmojo.css,D=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.ConditionNode=mstrmojo.declare(mstrmojo.ConditionNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.ConditionNode",emptyText:mstrmojo.desc(5893,"New Condition"),markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span><span class="mstrmojo-add-cond" mstrAttach:click>'+mstrmojo.desc(1994,"Add Condition")+"</span>"+D+"</div></div>",getPrefixAndOrToolsMarkup:function(){return(D+this._super());},markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];},createSetNode:function(){return this.domNode.childNodes[1].lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},addConditionNode:function(){return this.domNode.childNodes[1].childNodes[4];}},markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){B.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noRelation);},onnoCreateSetChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noCreateSet);}},mstrmojo.hash.copy(mstrmojo.ConditionNode.prototype.markupMethods)),init:function(E){if(this._super){this._super(E);}var F=this.data&&this.data.et;if(F){this.set("noCreateSet",F===10||F===12);}},preclick:function C(E){var H=null,G=A.eventTarget(E.hWin,E.e),F=this._super(E);if(A.contains(this.createSetOptNode,G,true)&&!this.noRelationOperator&&!this.noRelation){H="createSetOpt";}else{if(A.contains(this.createSetNode,G,true)&&!this.noRelation){H="createSet";}else{if(A.contains(this.addConditionNode,G,true)){H="addCondition";}}}E.part=H||E.part;return F;},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+(C[B.itemType]?" t_"+C[B.itemType]:"")+(C[B.itemSubType]?" st_"+C[B.itemSubType]:"")+(C[this.itemISC]?" isc":"")+(C[B.itemViewMedia]?" vm_"+C[B.itemViewMedia]:"")+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(F){var E=F[this.itemType],D=F[this.itemSubType],B=" t"+E,C=(parseInt(E,10)===1||parseInt(E,10)===3||parseInt(D,10)===14082)?" st"+D:"",G=F[this.itemISC]?'class="mstrmojo-ListIcon isc"':"",A=(F[this.itemViewMedia]===2048||F[this.itemViewMedia]===8192)?" hvi":"";return'<span class="mstrmojo-ListIcon '+B+C+A+'"><span '+G+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length,B;if(A>0){for(B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+E.substring(0,G)+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemISC:"isc",itemViewMedia:"dvm",useDblSelect:false});}());(function(){mstrmojo.requiresCls("mstrmojo.List","mstrmojo._IsDial");mstrmojo.Dial=mstrmojo.declare(mstrmojo.List,[mstrmojo._IsDial],{scriptClass:"mstrmojo.Dial",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){mstrmojo.css.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);},hideIfEmpty:function(){this.onadd();}},hideIfEmpty:false,onadd:function(A){if(this._super){this._super(A);}if(this.hideIfEmpty){if(this.domNode){this.domNode.style.display=(!this.items||this.items.length==0)?"none":"block";}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var B=mstrmojo.dom;mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",itemTitleField:null,defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,_set_items:function(H,F){var G=this.items;this.items=F||[];return G!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var G=this.value,F=this.selectedIndex,I=this.items||[],J,H;if(F===undefined||(G!==null&&(F===-1||(F!==-1&&I[F]&&I[F][this.itemIdField]!==G)))){F=mstrmojo.array.find(I,this.itemIdField,G);F=(F>-1)?F:this.defaultSelection;this.selectedIndex=F;}else{if(G===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=J=I[this.selectedIndex];if(J){H=J[this.itemField];}else{H=this.defaultText||"";}this.set("text",H);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function D(){var G=this.value,F=-1;if(G!==null){F=mstrmojo.array.find(this.items,this.itemIdField,G);}if(F>-1){this.selectedItem=this.items[F];this.selectedIndex=F;}},togglePopup:function E(){if(this.popupToBody){var I=B.position(this.popupNode,true),H=this.popupRef,F={left:Math.round(I.x)+"px",top:Math.round(I.y)+"px"};if(!H.hasRendered){delete H.slot;F.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(F,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var G=this.popupRef.domNode;if(G){if(this.fixWidth){G.style.width=(this.domNode.offsetWidth-2)+"px";}else{G.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(F){if(B.getButton(F.hWin,F.e)===B.MOUSE_BUTTON.LEFT){this.togglePopup();}},unrender:function C(F){var G=this.popupRef;if(this.popupToBody&&G.hasRendered){G.unrender(false);}if(this._super){this._super(F);}},itemName:function(H,F,G){return mstrmojo.string.encodeHtmlString(H[G.itemField]);},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,onOpen:function(){var H=this.opener,G=H&&H.popupZIndex,I=(H&&H.popupCssClass)||"",F=this.domNode;if(G){F.style.zIndex=G;}if(I){mstrmojo.css.addClass(F,[I]);}if(H&&H.fixWidth){mstrmojo.css.addClass(F,["fix-width"]);}if(H&&H.fixHeight){mstrmojo.css.addClass(F,["fix-height"]);}},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(I,F,G){var H=I[G.itemCSS]||G.parent.opener.item2textCss&&G.parent.opener.item2textCss(I)||"",J=G.parent.opener.itemName;return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+H+'" title="'+I[G.itemTitleField||G.itemField]+'">'+(J(I,F,G)||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",itemTitleField:"this.parent.opener.itemTitleField",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var H=this.parent,I=H.visible,F=H.opener,G=this.selectedItem;if(!F||!G||!I){return ;}F.set("value",G[this.itemIdField]);}}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.ui._HasScroller","mstrmojo.css");var B=mstrmojo.css;mstrmojo.ui.ColumnContainer=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnContainer {@cssClass}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},scrollNode:function(){return this.domNode.firstChild;}},markupMethods:{onnextChange:function A(){B.toggleClass(this.domNode,"hasNext",!!this.next);}},active:false,next:null,idx:undefined,updateColumnContainer:function D(){var E=this.next;if(E){E.updateColumnContainer();}},onactiveChange:function C(){B.toggleClass(this.domNode,"active",this.active);var E=this.next;if(E){E.updateColumnContainer();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,T=this.parent.parent;if(R===""){T.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);T.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasLayout");mstrmojo.ui.editors.controls.PreviewButton=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.PreviewButton",markupString:'<div id="{@id}" class="mstrmojo-ui-PreviewButton {@cssClass}" style="{@cssText}"><div class="cf" mstrAttach:click><div class="preview"></div><div class="btn">&nbsp;</div></div><div class="host"></div></div>',markupSlots:{previewNode:function(){return this.domNode.firstChild.firstChild;},btnNode:function(){return this.domNode.firstChild.lastChild;},widgetHostNode:function(){return this.domNode.lastChild;},clickableNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{h:{previewNode:"100%",btnNode:"100%",widgetHostNode:"0px"},w:{previewNode:"100%",btnNode:"20px",widgetHostNode:"all"},xt:true},isHostedWithin:false,getLayoutOffsets:function B(){return{h:2,w:2};},anchorSlot:"clickableNode",updatePreview:function C(){throw new Error(this.scriptClass+" must implement updatePreview.");},getPopupHostNode:function A(){return this.widgetHostNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var C=function(S,U,T){var R=S.parent.opener,J=R&&R.showDesc,Q=R&&R.showPath,I=U[S.itemField];var P=mstrmojo.string.escape4HTMLText,V="";if(Q){var M=U.anc&&U.anc.items,O=M&&M.length;if(O>0){for(var L=0;L<O-1;L++){V+=M[L].n+" > ";}V+=P(M[O-1].n);}else{if(U.path){V+=U.path;}}}if(!T){V+=(V.length===0?"":" > ")+P(I);}if(J){var N=U[S.itemDescField],K=120;if(N){V+="\r\n\r\n<br>"+P(N.substring(0,K)+(N.length>K?"...":""));}}return V;};var A=function(I,J,K){I.path=null;if(!J||!K||K.path){if(K&&K.path){I.set("path",K.path);}return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var L=J.path||J.getAttribute("path");if(L){I.set("path",K.path);return ;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(M){var N=H(M.toString())||"";K.path=N;I.set("path",N);}},{taskId:"getObjectDetails",objectID:K.did,objectType:K.t},undefined);},200);};var H=function(K){var N;if(window.DOMParser){N=(new DOMParser()).parseFromString(K,"text/xml");}else{N=new ActiveXObject("Microsoft.XMLDOM");N.async="false";N.loadXML(K);}var P=N.getElementsByTagName("path")[0],L=P.childNodes,O="";if(L){for(var J=0,I=L.length;J<I;J++){var M=L[J].childNodes&&L[J].childNodes[0];if(M){O+=mstrmojo.string.escape4HTMLText(M.nodeValue)+(J<I-1?"> ":"");}}}return O;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",useRichTooltip:false,itemDescField:"desc",getItemMarkup:function(K,I){var J=this.parent.opener,L=this.useRichTooltip?"":this.buildTooltip(K);return'<div class="mstrmojo-suggest-text '+((J&&J.item2textCss(K))||"")+'" idx="'+I+'" title="'+L+'">'+J.getHighlightedText(J.getSearchPattern(),mstrmojo.string.escape4HTMLText(K[this.itemField]))+"</div>";},getItemProps:function E(){return{};},onmouseover:function(J){var M=this.parent.opener;if(M&&M.showPath){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),I=K.getAttribute("idx"),L=I!=null?this.items[I]:null;if(L&&L.t>-1){this.targetEl=K;this.targetItem=L;this.requestPath(K,L);}}},requestPath:function D(I,K){var J=this.parent.opener;if(K.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function&&J.showFunctionSyntaxAsPath){this.buildFunctionSyntax(K);}else{A(this,I,K);}},buildFunctionSyntax:function G(J){var K=J.path;if(!K&&J.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){var I=function I(P){if(P.did<0){return P.n;}var O=P.pars,M=[],N,L;M.push(P.n);if(O){M.push("(");for(N=0,L=O.length;N<L;N++){M.push(O[N].n);if(N!==(L-1)){M.push(", ");}}M.push(")");}return M.join("");};J.path=I(J);}this.set("path",{path:J.path,excludeSelf:true});},buildTooltip:function B(I,J){return C(this,I,J);},onpathChange:function F(){var I=this.targetEl;I.path=1;var J=this.buildTooltip(this.targetItem,this.path.excludeSelf);if(this.useRichTooltip){this.useRichTooltip=true;this.hasOpenTooltip=false;if(!I.ttp){I.ttp=J;this.showTooltip();}}else{I.title=J;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller","mstrmojo.css");var F=mstrmojo.css;var C;mstrmojo.ui.CheckList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.CheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" mstrAttach:click,contextmenu><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{scrollboxNode:function A(){return this.domNode.firstChild;},itemsContainerNode:function I(){return this.domNode.firstChild.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onorientationChange:function L(){F.toggleClass(this.domNode,"horizontal",this.orientation!=="v");},onmultiSelectChange:function J(){F.toggleClass(this.domNode,"radio",!this.multiSelect);},onenabledChange:function H(){F.toggleClass(this.domNode,"disabled",!this.enabled);}},multiSelect:true,orientation:"v",minimumSelectCnt:0,icnCss:"icn",items:null,getItemMarkup:function K(M){if(!C){C=this._super(M).replace(">{@en@n}<",'title="{@tt}"><span>{@en@n}</span><');}return C;},getItemProps:function G(O,M){var N=this._super(O,M);var P=O.css;if(P){N.addCls(P);}N.tt=O.tt||"";N.n=O.n||" ";return N;},setupScrollNodes:function D(){this.scrollNode=this.scrollboxNode;},preselectionChange:function B(N){var O=this.minimumSelectCnt,M=this.getSelectedItems().length,P=N.removed;if(P&&O){if(M<O){this.select(P,true);return false;}}F.toggleClass(this.itemsContainerNode,"disableSelected",M<=O);return true;},buildRendering:function E(){this._super();F.toggleClass(this.itemsContainerNode,"disableSelected",this.getSelectedItems().length<=this.minimumSelectCnt);}});mstrmojo.ui.CheckList.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller");mstrmojo.ui.ScrollableList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableList",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function C(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function E(){return this.domNode.firstChild;}},postBuildRendering:function B(){if(this.renderOnScroll){if(!this.onScrollEnd){var G=this.id;this.onScrollEnd=function F(){var H=mstrmojo.all[G];H.doScroll();H.updateScrollbars();};}}if(this._super){this._super();}},renderBlockSize:150,renderIndex:0,onScrollEnd:undefined,doScroll:function A(){if(this.renderOnScroll){var G,H=this.scrollNode,F=(this.renderIndex+1)*this.renderBlockSize;if(F>=this.items.length){return ;}if(mstrmojo.dom.position(H).h===H.scrollHeight){G=this.domNode;}else{G=H;}if((mstrmojo.dom.position(G).h+G.scrollTop)>=G.scrollHeight){this.renderIndex++;var I=this._buildItemsMarkup(this.renderIndex*this.renderBlockSize,((this.renderIndex+1)*this.renderBlockSize)-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");G.innerHTML+=I;this.itemsContainerNode.innerHTML+=I;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var E=mstrmojo.dom,D=mstrmojo.string,F=mstrmojo.hash,H=mstrmojo.array,C=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",tooltipOrientation:"horizontal",tooltipOffset:8,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function A(I){return I&&(I.ttp||I.n);},showTooltip:function G(W,M){var O=this;if(!O.hasOpenTooltip&&!(O._lastOpened&&O._lastOpened.visible)){var b=E.eventTarget(M,W),X=O.getItemFromTarget(b),R=O.getItemNodeFromTarget(b),d=O.getTooltipText(X),N=O.tooltipCss;if(!d){return ;}var c=E.position(R),V,P,L,T="",U=O.tooltipOffset;if(this.tooltipOrientation==="vertical"){V=c.x+c.w/2;L=C.POS_TOPCENTER;P=c.y+c.h+U;O.tooltipCss=F.copy({cssClass:"vi-regular vi-tooltip-A A-center"},N);}else{var K=E.windowDim(),S=40,Y=c.x+c.w+U,J=c.x-U,a=J-S,I=K.w-(Y+S),Z="vi-regular vi-tooltip-",Q;P=c.y;if(I>=a){V=Y;Q=I;L=C.POS_TOPLEFT;N.cssClass=Z+"C  "+N.rightCssClass;}else{V=J;Q=a;L=C.POS_TOPRIGHT;N.cssClass=Z+"D  "+N.leftCssClass;}T="max-width: "+Q+"px;";}if(O.tooltipContrast){N.cssClass=N.cssClass+" contrast";}if(N&&N.getItemCssClass){N.cssClass=H.filter([N.cssClass,N.getItemCssClass(X)],function(e){return !!e;}).join(" ");}O.richTooltip=F.copy(O.tooltipCss,{content:D.apply(O.tooltipMarkup,{c:d,style:T}),top:P,left:V,posType:L});O.richTooltip.keepArrowXPos=!!O.keepArrowXPos;O.richTooltip.keepArrowYPos=!!O.keepArrowYPos;this._super(W,M);}},onclick:function B(I){var J=this;window.setTimeout(function(){if(J.hasOpenTooltip){J.hideTooltip();}window.clearTimeout(J._tooltipTimeOut);},0);this._super(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(V,T){if(!V){return ;}var S=T&&T.length||0,U;for(U=S;U>0;U--){V=V.replace(new Array(U+2).join("#"),T[U-1]);}return V;},L=function L(T){if(!T){return ;}var Z=this,V=J.position(T.refNode||Z.refNode),Y=J.position(Z.domNode),X=T.position||R.RIGHT,U=0,a=0,S=9+(T.margin!==undefined?T.margin:0),W=" ";switch(X){case R.TOP:a=-Y.h-S;W+="t";break;case R.BOTTOM:a=V.h+S;W+="b";break;case R.LEFT:U=-Y.w-S;W+="l";break;case R.RIGHT:U=V.w+S;W+="r";break;}mstrmojo.hash.forEach(C(T,{left:U,top:a,contentNodeCssClass:W,visible:false}),function(b,c){this[c]=b;},this);this.set("visible",T.invalid);},A=function A(S){var W=this,U,V=S.errorCode,X=S.errorMsg,T=S.args,Y=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){U={content:V!==null?(W.generateContentHTML(Q(Y[V],T))||Y["*"]):X};}return U;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(U){var Y=this,a=Y.warningSlotName,c=Y[a],S=U&&U.lasting||6000,X=U.refNode||this.domNode,T=U.highlight!==false,b=U.closeOnClick===false?false:true,Z;if(!c){c=new mstrmojo.Tooltip({refNode:X,highlight:T,closeOnClick:b,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Y.addDisposable(c);Y[a]=c;Z=Y.closeOnClick=Y.getCloseOnClickListener();J.attachEvent(document.body,"click",Z);}var W=U.position||R.TOP,V="vi-warning vi-tooltip-";switch(W){case R.TOP:c.cssClass=V+"V";break;case R.BOTTOM:c.cssClass=V+"A";break;case R.LEFT:c.cssClass=V+"D";break;case R.RIGHT:c.cssClass=V+"C";break;}c.open(Y,A.call(Y,U));this.adjustPosition(U);if(T){P.toggleClass(c.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Y._warningTimeOut);Y._warningTimeOut=window.setTimeout(function(){Y.hideWarning();},S);},hideWarning:function H(){var T=this,S=T[T.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(T._warningTimeOut);delete T._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var T=S[S.warningSlotName];if(T.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var T=this;L.call(T[T.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(U){if(!U||!U.attachEventListener){return ;}var V=U._validationEventListener,T;if(V){U.detachEventListener(V);delete U._validationEventListener;}T=this.getValidationEvtListener();if(T){U._validationEventListener=U.attachEventListener("validationChange",this.id,T);}},this);},getValidationEvtListener:function B(){var T=this;return function S(U){var V=U.value;T[(V&&V.invalid?"show":"hide")+"Warning"](V);};},unrender:function K(S){var T=this[this.warningSlotName];if(T){T.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupWidget","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.css");mstrmojo.ui.menus.MenuPopup=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui.menus._IsMenuPopup],{scriptClass:"mstrmojo.ui.menus.MenuPopup",popupConfig:null,init:function B(D){this._super(D);var C=this.popupConfig;if(!C.contents){throw new Error("Cannot open popup without contents.");}this.cssClass=C.cssClass||"";this.addChildren(C.contents);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-MenuPopup");},shouldPropagateLockHover:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuPopup","mstrmojo.Button","mstrmojo.dom");mstrmojo.requiresDescs(1442,2140);var E=mstrmojo.dom,G=mstrmojo.array;function B(I,K){var H=2140,M="Cancel",L="this.parent.popupConfig."+(I?"ok":"cancel"),J=K&&K[(I?"ok":"cancel")+"BtnText"];if(I){H=1442;M="Ok";}return mstrmojo.Button.newWebButton(J||mstrmojo.desc(H,M),function(O){var P=this.parent,N=P.popupConfig;P.closeAllMenus();N["fn"+M](N.data,P);E.stopPropogation(O.hWin,O.e);},I,{slot:"btnNode",bindings:{enabled:L+"Enabled",visible:L+"Visible"},cssDisplay:"inline-block"});}mstrmojo.ui.menus.MenuEditor=mstrmojo.declare(mstrmojo.ui.menus.MenuPopup,null,{scriptClass:"mstrmojo.ui.menus.MenuEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-MenuEditor {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="me-content"></div><div class="me-buttons"></div><div class="me-bottom"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;},btnNode:function D(){return this.domNode.children[1];},bottomNode:function D(){return this.domNode.children[2];}},popupConfig:null,init:function F(J){this._super(J);var I=this.popupConfig,H=I.bottomNode;this.data=I.data||{};if(I.onOpen){this.onOpen=I.onOpen;}this.addChildren([B(true,I),B(false)]);if(H){H.slot="bottomNode";this.addChildren(H);}},onOpen:function C(){G.forEach(this.children,function(H){if(H.scriptClass==="mstrmojo.ui.ScrollableContainer"&&H.onOpen){H.onOpen();}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.MenuPopup");mstrmojo.ui.menus.PopupConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.PopupConfig",cssClass:"",contents:null,clear:function A(){this._super();this.contents=null;},close:function C(){([].concat(this.contents)[0]).parent.closeAllMenus();},newInstance:function B(){return new mstrmojo.ui.menus.MenuPopup({popupConfig:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.ui.menus._HasMenuPopup","mstrmojo._CanAutoClose","mstrmojo._IsPopup","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.ui.PopupConfig","mstrmojo.ui._HasScroller","mstrmojo.ui._HasUITheme","mstrmojo.dom","mstrmojo.css","mstrmojo.ui._HasListTooltip");var D=mstrmojo.dom,P=mstrmojo.css,I=mstrmojo.ui.PopupConfig.directionCfg;var Q={};var K=false;function F(V,W){if(V.pop){if(W&&V.ax){window.clearTimeout(this._popupAxTimeout);V.actionFn();this.closeAllMenus();}else{var T=V.fn.call(mstrmojo.all[V.scope],V.ctxt);var U=T.ENUM_CORNERS;T.setAlignment(U.TOP_RIGHT,U.TOP_LEFT);T.hostId=this.id;T.hostElement=this._getItemNode(V._renderIdx);this.openPopup(T.newInstance());}}else{if(V.dsbld!==true){if(V.fn(V,this)!==false){this.closeAllMenus();}}}}function G(T){var U=parseInt(T);return U===null||isNaN(U)?0:U;}mstrmojo.ui.menus.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._IsPopup,mstrmojo.ui.menus._IsMenuPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip,mstrmojo.ui._HasScroller,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.ui.menus.Menu",selectionPolicy:"reselect",locksHover:true,closeOnClick:true,themeClassName:"mojo-theme-dark",icnCss:"mstrmojo-ui-Menu-item-container",popupConfig:null,tooltipCss:{leftCssClass:"menuTooltip",rightCssClass:"menuTooltip"},setupScrollNodes:function(){if(this.popupConfig&&this.popupConfig.supportsScroll){this.scrollNode=this.itemsContainerNode;this.scrollbarHostNode=this.domNode;}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll&&this.hasCustomScrollbar){var V=this.scrollNode;if(!V){return ;}var T=(getComputedStyle&&getComputedStyle(V,null))||V.currentStyle,U=V.offsetWidth-G(T.borderLeftWidth)-G(T.borderRightWidth)-V.clientWidth;V.style.marginRight=-U+"px";V.style.paddingRight=0;}},onscroll:function(){this.closePopup();this._super();},init:function L(V){this._super(V);var T=this.popupConfig;this.items=T.getMenuItems();var U=["mstrmojo-ui-Menu","unselectable"],W=T.menuCssClass;if(W){U.push(W);}P.addWidgetCssClass(this,U);if(T&&T.supportsScroll&&T.maxHeight>0){this.icnCssText=(this.icnCssText||"")+";max-height:"+T.maxHeight+"px";}this.useRichTooltip=!!T.useTooltip;this.tstid=T.tstid;},markupMethods:{onvisibleChange:function J(){var T=this.visible;if(!K||T){P.toggleClass(this.domNode,"visible",T);}}},getItemMarkup:function C(X,T){if(X.getItemMarkup){return X.getItemMarkup.apply(this,[X,T]);}var V=!!X.pop,W=V?"submenu":"item",U=Q[W];if(!U){U=this._super(X,T).replace("{@en@n}",'<div class="micn"></div>{@en@n}');if(V){U=U.replace("{@en@n}",'{@en@n}<div class="arw"></div>');}Q[W]=U;}if(X.tstid){U=U.replace("{@tag}","{@tag} "+mstrmojo.tstid(X)+" ");}return U;},getItemProps:function R(V,T){var U=this._super(V,T);U.tag="a";U.addCls("mstrmojo-ui-Menu-item");U.addCls(V.cls);return U;},adjustCornersForPopupOverflow:function O(){var V=this._super(),Z=this.domNode,Y,X,T,U,W;if(V){Y=D.position(Z);T=Y.y;X=Z.style;U=this.popupConfig;W=U.position||D.position(U.hostElement);if(T<0||(T+Y.h>D.position(document.body).h)){X.top=(-W.y+5)+"px";X.bottom="auto";}}return V;},onmouseover:function E(T){var Y=T.getTarget(),X=this.getItemFromTarget(Y),W=this,V=W._lastOpened,a=V&&this.getItemFromTarget(V.popupConfig.hostElement)._renderIdx,Z=this.getItemNodeFromTarget(Y),U=(a!==undefined&&D.contains(this._getItemNode(a),Y,true,this.domNode));if(X){this._lastHoverIx=X._renderIdx;window.clearTimeout(this._popupTimeOut);window.clearTimeout(this._popupAxTimeout);if(this._lastHoverIx!==a&&!U){this._popupTimeOut=window.setTimeout(function(){if(W._lastOpened&&W._lastOpened.visible){W.closePopup();}if(W.visible&&X.pop){if(X.ax){W._popupAxTimeout=window.setTimeout(function(){P.removeClass(Z,"hlt-ax");F.call(W,X);},0);}else{F.call(W,X);}}},400);if(X.pop&&X.ax){P.addClass(Z,"hlt-ax");}}}},onclick:function S(T){this._evtTarget=T.getTarget();this._super(T);T.cancel();},postselectionChange:function H(T){var U=T.added;if(U){var V=this.items[U[0]];F.call(this,V,!(V.ax&&this._evtTarget.className==="arw"));delete this._evtTarget;}},oncontextmenu:function M(T){D.preventDefault(window,T.e);return false;},postBuildRendering:function N(T){this._super(T);if(this.popupConfig.supportsScroll){var U=this;window.setTimeout(function(){U.updateScrollbars();},10);}},showTooltip:function B(X,W){var V=D.eventTarget(W,X),U=this.getItemNodeFromTarget(V),T=this.getItemFromTarget(V);if(U&&((T&&T.ttp)||(U.scrollWidth>U.clientWidth))){this._super(X,W);}},onClose:function A(T){if(this._super){this._super(T);}this.closePopup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.ScrollableList","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui._HasListTooltip");mstrmojo.ui.PopupList=mstrmojo.declare(mstrmojo.ui.ScrollableList,[mstrmojo._IsPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PopupList",autoCloses:true,locksHover:true,closeOnClick:true,parentDomNode:undefined,markupString:'<div id="{@id}" class="mstrmojo-PopupList {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="mstrmojo-popupList-scrollBar"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function D(){return this.domNode.firstChild.firstChild;},scrollboxNode:function F(){return this.domNode.firstChild;}},setupScrollNodes:function E(){this.scrollNode=this.scrollboxNode;},onOpen:function B(){this._super();this.updateScrollbars();},postBuildRendering:function C(){var H=this._super();if(!this.parent){var G=this.parentDomNode=this.parentDomNode||document.body;G.appendChild(this.domNode);}return H;},closePopup:function A(){this.set("visible",false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxBase");mstrmojo.ButtonItemRenderer=mstrmojo.hash.copy(mstrmojo.DivItemRenderer);mstrmojo.ButtonItemRenderer.render=function(D,A,E){var B=D.v!=="u;"?" nAll":"",C=(E.enabled===false);return'<input mstridx="'+A+'" class="'+E.itemCssClass+(E.selectedIndices[A]?" "+E.itemSelectedCssClass:"")+" "+(D.css||"")+B+'" style="'+E.itemCssText+'" type="button"  value="'+D[E.itemDisplayField]+'" '+(C?"disabled ":"")+"/>";};mstrmojo._RendersItemButtons=mstrmojo.hash.copy(mstrmojo._RendersItemDivs);mstrmojo._RendersItemButtons.itemRenderer=mstrmojo.ButtonItemRenderer;mstrmojo.ButtonList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonList",cssClass:"mstrmojo-ButtonList",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});mstrmojo.requiresCls("mstrmojo.ListBoxHoriz");mstrmojo.ButtonListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonListHoriz",cssClass:"mstrmojo-ButtonListHoriz",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});}());(function(){mstrmojo.requiresCls("mstrmojo.LegacySuggestionList","mstrmojo.ui._HasScroller");var C=mstrmojo.dom;mstrmojo.ui.ScrollableSuggestionList=mstrmojo.declare(mstrmojo.LegacySuggestionList,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-scrollable-suggestlist {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function B(){return this.domNode.firstChild.firstChild;},scrollboxNode:function E(){return this.domNode.firstChild;},scrollNode:function H(){return this.domNode.firstChild;}},onclick:function A(I){var J=this.getItemFromTarget(I.getTarget());if(J){this._super(I);}},onitemsChange:function D(){var I=this;window.setTimeout(function(){I.hideTooltip();I.updateScrollbars();},0);},updateScrollbars:function F(){this._super();var K=this,M=K.scrollNode,I=M.clientWidth,L=K.itemsContainerNode,J=L.clientWidth;L.style.width="auto";window.setTimeout(function(){if(I>J){L.style.width=J+(I-J)+"px";}},10);},useRichTooltip:true,getItemTooltip:function(L,M){var J=C.position(M),K=M.ttp;var I={areaId:L._renderIdx+"text",cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:"",content:K,top:J.y,left:J.x+J.w+6,enableHover:false};return I;},showTooltip:function G(I,L){var K=this.targetEl,J=this.targetItem;if(K&&K.ttp){this.richTooltip=this.getItemTooltip(J,K);if(this.richTooltip){this._super(I,L);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.Box","mstrmojo.array","mstrmojo._HasLayout","mstrmojo.ui.ColumnContainer");var E=mstrmojo.dom,G=mstrmojo.hash,C=mstrmojo.array;mstrmojo.ui.ColumnWalk=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.ColumnWalk",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnWalk cf {@cssClass}" mstrAttach:click></div>',layoutConfig:{h:{containerNode:"100%"},xt:true},currentColumn:-1,addNextColumn:function B(K){var J=this.children||[],L=J.length,I=J[L-1];var M=this.addChildren([G.copy(K,{scriptClass:"mstrmojo.ui.ColumnContainer",idx:L})])[0];if(I){I.set("next",M);}},onclick:function A(I){var K=I.getTarget();if(K){var J=this.children;C.forEach(J,function(M,L){if(E.contains(M.domNode,K,true,M.domNode)){this.set("currentColumn",L);}},this);}},oncurrentColumnChange:function D(I){var K=this.children,M=K[I.valueWas],J=K[this.currentColumn],L="active";if(M){M.set(L,false);}J.set(L,true);},removeTrailingContainer:function H(K){var J=this,I=this.children;if(!I||K>=I.length-1){return ;}C.forEach(I.slice(K+1),function(L){J.removeAndDestroyChild(L);});if(K>=0){I[K].set("next",null);}},insertAndRemoveTrailing:function F(J,I){this.removeTrailingContainer(J);this.addNextColumn(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var h=mstrmojo.func.composite,M=mstrmojo.dom,Z=mstrmojo.Button.newWebButton,C=mstrmojo.css,Y=mstrmojo.all,N=mstrmojo.hash,W=mstrmojo.array;function V(n){if(!this.modal){return ;}var o=window.mstrApp;if(o&&o.modalEditorChange){o.modalEditorChange(this.id,n);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function X(){return this.domNode.firstChild;},titlebarNode:function j(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function k(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function l(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.title;}},onzIndexChange:function(){var n=this.zIndex;this.editorNode.style.zIndex=n;this.curtainNode.style.zIndex=n-1;},onvisibleChange:function(q){if(q){return ;}var p=this.visible,o="closeEffect",n="none";if(p){o="openEffect";n="block";}if(this[o]){this.playEffect(o);}else{this.editorNode.style.display=n;if(this.modal){this.curtainNode.style.display=n;}}},onhelpChange:function d(){if(this.showTitle){var o=this.help,n=this.helpNode;if(!o){n.style.display="none";}else{n.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(o,n){this._super(o,n);V.call(this,true);},close:function f(n){this._super(n);V.call(this,false);},unrender:function B(n){this._super(n);V.call(this,false);},destroy:function g(n){this._super(n);V.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;V.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function i(){return this.titlebarNode;},getMovingTarget:function U(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(n){var o=n.getTarget();if(o===this.closeNode||o===this.helpNode){C.toggleClass(o,"active",true);}},premouseup:function O(n){var o=n.getTarget();if(o===this.closeNode||o===this.helpNode){C.toggleClass(o,"active",false);}if(n.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function c(o){if(o.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{var n=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId||mstrApp.localeId)+"/"+(mstrApp.userHelpPage||"MicroStrategy_Web_Help.htm#");window.open(n+(this.help||""),"_blank");return false;}}},_set_visible:function b(t,q){var p=(this[t]!==q);if(p){this[t]=q;var s=this._close_handler;if(q){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var r=this;s=this._close_handler=s||function(n){var u=M.eventTarget(self,n);if(u&&u.parentNode&&!M.contains(r.editorNode,u,true,document.body)){r.close();}};M.attachEvent(document.body,"mousedown",s);}}else{var o=this._curtain_handler;if(o){M.detachEvent(window,"resize",o);}if(s){M.detachEvent(document.body,"mousedown",s);}}}return p;},showTooltip:function m(s,r){var q=this,o=M.findAncestorByAttr(M.eventTarget(r,s),"tooltip",true,this.domNode),p=o&&o.value;if(!q.hasOpenTooltip&&p){var n=M.position(o.node);q.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:p,top:Math.max(n.y+40,0),left:Math.max(n.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(s,r);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(n){n=Math.round(n);return["rgb(",n,",",n,",",n,")"].join("");}}},preStart:function(){var o=this.target,n=this.widget;n.editorNode.style.display="block";if(!n.modal){return false;}o.style.display="block";C.setOpacity(o,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var n=this.widget;n.editorNode.style.display="none";return !!n.modal;}};function D(n){return function(){Y[n].destroy();};}function J(o,v,w,x){var n=v.id||"mojoAlertx9",s,u=v.buttons;W.forEach(u,function(z){var y=z.onclick;z.onclick=function(AA){var AB=Y[n];if(y&&y.call(z,AA)===false){return ;}AB.destroy();AB=null;};});try{Y[n].destroy();}catch(t){}var p=v.cssClass,q=[];if(p){q.push(p);delete v.cssClass;}if(x){q.push(x);}q.push("mstrmojo-alert");s={scriptClass:"mstrmojo.Editor",id:n,width:"475px",zIndex:1000,title:w||mstrmojo.desc(11812,"Notification"),cssClass:q.join(" "),children:[{scriptClass:"mstrmojo.Label",cssClass:"alert-content",text:o,allowHTML:v.allowHTML}],visible:true};var r=new mstrmojo.Editor(N.copy(v,s));r.render();return r;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(o,u,p){p=p||{};var v=p.forceClose,t=p.callback||mstrmojo.emptyFn,s=N.copy(u||{},{buttons:v?[mstrmojo.Button.newActionButton((p.buttonText||mstrmojo.desc(8607,"Dismiss")),t)]:null,showTitle:false,modal:false,top:"42px"}),q=p.duration||6000;var r=J(o,s,"",v?"ed-notify":"ed-toast"),n=r.id;if(!v){window.setTimeout(h([t,D(n)]),q);}else{window.setTimeout(function(){if(Y[n]){Y[n].editorNode.style.opacity=0.75;}},6000);}return r;};mstrmojo.confirm=function e(s,o,r){o=o||{};var n=o.confirmBtn||{},q=o.cancelBtn||{},p=[Z(n.t||mstrmojo.desc(219,"Yes"),n.fn,true),Z(q.t||mstrmojo.desc(218,"No"),q.fn)];return J(s,N.copy(r||{},{buttons:p,onPreClose:function(){if(q&&q.fn){q.fn();}return true;}}));};mstrmojo.warn=function K(p,n,o){o=o||{};o.cssClass=(o.cssClass||"")+" mstrmojo-warning";mstrmojo.confirm(p,n,o);};mstrmojo.alert=function a(s,p,r,t,n,q){var o={title:r,zIndex:t,cssClass:n,buttons:[Z(mstrmojo.desc(1442,"OK"),p,true)],onPreClose:function(){if(p){p();}return true;}};N.forEach(o,function(v,u){if(!v){delete o[u];}});return J(s,N.copy(q,o));};mstrmojo.error=function T(r,n,q){var o=r||{};var p=mstrmojo.desc(96,"Error");if(q){p=(q.title)?q.title:mstrmojo.desc(96,"Error");}J("",N.copy(q||{},{buttons:[Z(mstrmojo.desc(1442,"OK"),n,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:o.shortDesc,longDesc:o.longDesc}]}),p);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.Pulldown");var C={ENTER:13,LEFT:37,UP:38,TAB:9,RIGHT:39,DOWN:40,ESC:27};function D(L,M){var G,J,F,H=[],I,N;try{I=new RegExp(L,"i");}catch(K){I=new RegExp(mstrmojo.string.regEscape(L));}for(G=0,J=M.length;G<J;G++){if(I.test(M[G][this.itemField])){H.push(M[G]);}}return H;}function B(F){return !(F<0||F===undefined||F===null);}mstrmojo.SearchablePulldown=mstrmojo.declare(mstrmojo.Pulldown,null,{scriptClass:"mstrmojo.SearchablePulldown",popupCssClass:"mstrmojo-SearchablePulldown-Popup",searchEnabled:false,allowCustomInput:false,useItemCssOnInput:false,lastSearchPattern:"",isEditing:false,allItems:null,markupString:'<div id="{@id}" class="mstrmojo-SearchablePulldown mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-SearchablePulldown-boxNode mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><input class="mstrmojo-SearchablePulldown-inputNode" value="{@text}" mstrAttach:keyup,blur/><div class="mstrmojo-SearchablePulldown-iconNode mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mouseover,mouseout></div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},inputNode:function(){return this.domNode.firstChild.firstChild;},iconNode:function(){return this.domNode.firstChild.children[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:mstrmojo.hash.copy({ontextChange:function(){if(this.inputNode.value!==this.text){this.inputNode.value=this.text;}},onheightChange:function(){this.domNode.style.height=this.height||"";this.boxNode.style.height=this.height||"";},onsearchEnabledChange:function(){this.inputNode.readOnly=this.searchEnabled?false:true;this.items=this.allItems||this.items;},onallowCustomInputChange:function(){if(this.allowCustomInput){this.set("searchEnabled",true);}},onvalueChange:function E(){if(this.useItemCssOnInput&&this.selectedItem){this.inputNode.className="mstrmojo-SearchablePulldown-inputNode "+(this.selectedItem[this.itemCSS]||"");}}},mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupMethods)),prevalueChange:function(){this.synchronize();},synchronize:function(){var G=this.value,H=this.items||[],I=H[this.selectedIndex],F=-1;if(I&&G===I[this.itemIdField]){this.selectedItem=I;this.set("text",I[this.itemField]);return ;}F=mstrmojo.array.find(this.items,this.itemIdField,G);if(!B(F)&&this.allowCustomInput){this.selectedItem=undefined;this.selectedIndex=undefined;return ;}this.selectedIndex=B(F)?F:this.defaultSelection;this.selectedItem=I=this.items[this.selectedIndex];this.value=I?I[this.itemIdField]:undefined;this.set("text",I?I[this.itemField]:(this.defaultText||""));},preBuildRendering:function A(){if(this._super){this._super();}this.allItems=this.allItems||this.items;this.synchronize();},premousedown:function(F){if(this.searchEnabled&&F.getTarget()===this.iconNode){this.set("items",this.allItems);}this._super(F);},onkeyup:function(M){var J=mstrmojo.string.trim(this.inputNode.value),I=M.e,N=I.keyCode||I.which,L=B(this.selectedIndex)?this.selectedIndex:-1,F=this.allowCustomInput,H=this.items.length;this.isEditing=true;switch(N){case C.ENTER:if(H>0&&!F){this.set("selectedIndex",L===-1?0:L);this.synchronize();}this.closePopup();break;case C.ESC:this.closePopup();this.synchronize();break;case C.UP:if(this.popupRef.visible&&H>0){this.set("selectedIndex",(L+H-1)%H);this.synchronize();}break;case C.DOWN:if(!this.popupRef.visible&&H>0){this.togglePopup();}this.set("selectedIndex",(L+1)%H);this.synchronize();break;default:if(J===this.lastSearchPattern){return ;}var K=[];if(J&&J.length>0&&J.indexOf(this.lastSearchPattern)>-1){K=D.apply(this,[J,this.items]);}else{K=D.apply(this,[J,this.allItems]);}this.set("items",K);if(K.length===0){this.closePopup();}else{if(!this.popupRef.visible){this.togglePopup();}}this.set("selectedIndex",undefined);if(J&&J.length){var G=mstrmojo.array.find(K,this.itemField,J);if(G!==-1){this.set("selectedIndex",G);}}}if(F&&!B(this.selectedIndex)){this.set("value",this.inputNode.value);}this.lastSearchPattern=J;},onblur:function(F){this.isEditing=false;if(!this.searchEnabled){return ;}if(!this.allowCustomInput){this.items=this.allItems;this.synchronize();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller");var F=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType;function D(G){return{browseConfig:null,parent:G,next:function(J){var I=this.browseConfig;if(!I){return ;}I.blockBegin+=I.blockCount;var H={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:I.blockBegin,blockCount:I.blockCount,includeAncestorInfo:true};if(I.folderLinksContextId){H.folderLinksContextId=I.folderLinksContextId;}if(I.includeObjectDesc){H.includeObjectDesc=I.includeObjectDesc;}if(I.rootFolderID){H.rootFolderID=I.rootFolderID;}else{if(I.rootFolderType){H.rootFolderType=I.rootFolderType;}}if(I.browsableTypes){H.objectType=I.browsableTypes;}if(I.searchPattern){H.searchPattern=I.searchPattern;if(I.recursive){H.recursive=I.recursive;}}this.parent.set("waiting",true);if(I.dataProvider){I.dataProvider.serverRequest(H,J);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,H);}},hasNext:function(){var H=this.browseConfig;return(H.blockBegin+H.blockCount-1)<H.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function E(G){if(this._super){this._super(G);}this.ifDataHelper=D(this);if(G.browseConfig){this.ifDataHelper.browseConfig=G.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function B(G){var H=this.browseConfig.browsableViewMedias;if(G&&H){var I={};F.forEach(H.split(","),function(J){I[parseInt(J,10)]=true;});G=F.filter(G,function(J){return(J.t!==A.DssTypeDocumentDefinition)||I[J.dvm];});}this.add(G,-1);this.set("waiting",false);if(this._super){this._super(G);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function C(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:"!!this.parent.scrollable"}}),({scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:"!!this.parent.rightScrollable"}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E==="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E==="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof G==="object")&&(typeof G.length==="number"));};if(B(F)&&B(E)){var C;for(C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo._IsDial");mstrmojo.WidgetDial=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._IsDial],{scriptClass:"mstrmojo.WidgetDial"});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.TreeNode","mstrmojo._IsExprNode","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.expr","mstrmojo._HasOwnAvatar");var F=mstrmojo.array,M=mstrmojo.expr,P=mstrmojo.dom,A=mstrmojo.css;function J(R,Q){var T=R.data,S=T&&T.nds;if(!S){return null;}if(Q){Q.sort(F.numSorter);}else{Q=R.sortSelectedIndices();}if(!Q.length){return null;}return{idxs:Q,nds:F.get(S,Q)};}function N(S){var R=S.ctxtBuilder,U=R&&R.itemWidgets,Q=U&&U[0],T=Q&&Q.data;if(T&&T.not&&(U.length>0)){delete T.not;Q.paint();}}mstrmojo.AndOrNode=mstrmojo.declare(mstrmojo.TreeNode,[mstrmojo._IsExprNode,mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.AndOrNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},itemsContainerPrefix:function(){return this.domNode.childNodes[1];},itemsContainerNode:function(){return this.domNode.childNodes[2].firstChild;},dropCueNode:function(){return this.domNode.childNodes[2].lastChild;},itemsContainerSuffix:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onitemCntChange:function(){A.toggleClass(this.itemsContainerNode,["multi"],this.itemCnt>2);},onprefixedAndOrEditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();},ondropCuePosChange:mstrmojo.TreeNode.prototype.markupMethods.ondropCuePosChange},multiSelect:true,itemIdField:null,init:function(Q){this._super(Q);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());var R=this.data;if(R){delete this.data;this._set_data(null,R);}},itemCnt:0,postBuildRendering:function(){var Q;this.set("itemCnt",this.items.length);if(this._super){Q=this._super();}N(this);return Q;},preadd:function L(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},preremove:function O(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},_set_data:function(T,Q){var R=this.data,S=(R!==Q);if(S){this.data=Q;if(Q&&!Q.nds){Q.nds=[];}this.set("items",Q&&Q.nds);}return S;},isDragValid:function K(){return true;},isSelectableArea:function(Q){return false;},getDragData:function(Q){var S=this._super(Q);if(S&&!S.html){var R=S.et&&M.ET2TGT[S.et];S.html=R?S[R]&&S[R].n||"":S.n||"";}return S;},remove:function I(R,S){var Q=this._super(R);if(Q>-1){var T=S||this.suppressConsolidation;if(!T){this.consolidate(false);}}return Q;},move:function(R,Q){this.suppressConsolidation=true;var S;if(this._super){S=this._super(R,Q);}this.suppressConsolidation=false;return S;},consolidate:function E(){var U=this.parent;if(!U||!U.remove){return ;}var S=this.items,R=S&&S.length;if(R<2){var T=R?S[0]:null,Q=this.childIndex();if(T){U.add([T],Q);}U.remove(this.data);}},indent:function G(S,Q){var R=J(this,S);if(!R){return ;}this.remove(R.idxs,true);var W=R.nds,V=Q&&Q.fn||this.data&&this.data.fn,U={et:M.ET.ANDOR,nds:W,fn:V};if(W.length===2&&W[0].not){if(W[1].not){delete W[0].not;delete W[1].not;U.not=true;U.fn=(V===M.FN.AND?M.FN.OR:M.FN.AND);}else{var T=W[0];W[0]=W[1];W[1]=T;}}this.add([U],R.idxs[0]);this.consolidate(false);},outdent:function C(R){var S=this.parent,Q=S&&S.data;if(!Q||Q.et!==M.ET.ANDOR){return ;}var T=J(this,R);if(!T){return ;}this.remove(T.idxs,true);if(this.data.not){T.nds[0].not=true;}S.add(T.nds,this.childIndex());this.consolidate(false);},edit:function D(Z,a,S){if(!Z){return ;}var Y=this.data,X=Y&&Y.fn,R=Z.data,f=R&&R.not;if(!R){R={};Z.data=R;}R.not=!!S;if(X!==a){var Q=Y.nds;if(Q&&Q.length>2){var e=Z.childIndex();if(e>0){this.indent([e-1,e],{fn:a});}}else{Y.fn=a;var V=this.ctxtBuilder,U=V&&V.itemWidgets;for(var T=0,W=(U&&U.length)||0;T<W;T++){var b=U[T];if(b){b.paint();}}}}else{Z.paint();}},preclick:function H(Q){var S=null,R=P.eventTarget(Q.hWin,Q.e);if(R===this.prefixNode){}else{if(P.contains(this.prefixNode,R,true)){S="andor";}}Q.part=S;},createAvatar:function B(S){var R=document.createElement("div"),T=P.findWidget(S),Q=T.getAvatarNode&&T.getAvatarNode();if(!Q){Q=T.condNode.cloneNode(true);Q.style.boxSizing="border-box";Q.style.width=T.condNode.offsetWidth+"px";}R.appendChild(Q);A.addClass(R,T.avatarCssCls||"mstrmojo-FE mstrmojo-ConditionNode");R.style.zIndex=20;return R;},_ndsToMove:J});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.SuggestionList");function D(Y){var X=this.list,V=X.selectedIndex,U=X.items.length,W=Y?U-1:0;if(V===W){X.clearSelect();return ;}if(V===null||V<0){V=Y?0:U-1;}else{V+=Y?1:-1;}X.singleSelect(V);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,disableClick:false,getCandidatesThroughTaskCall:mstrmojo.emptyFn,onSuggestionItemSelect:function J(U){this.hideSuggestion();},getSearchPattern:function T(){return"";},getSuggestionPos:function N(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(V){var U=this.getSuggestion(V);if(!this.noCache&&U!==-1){this.updateSuggestion(U);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function M(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(){if(this.suggestionShown){this._lastOpened.nextHighlight();}},preHighlight:function H(){if(this.suggestionShown){this._lastOpened.preHighlight();}},getSuggestion:function S(h){var d=this.candidates,a=d&&d.items,X=d&&d.isComplete,g=this._last_hit;if(!this.noCache&&(d||g)){var f=this.filterCandidates(a,h,this.REQUEST_THRESHOLD),b=f.length,e=this.suggestCount,U=false;if(!X&&b<e){var V=g&&g.pattern;if(g&&V&&(h.indexOf(V)>-1)){U=true;var k=this.filterCandidates(g.items,h,this.REQUEST_THRESHOLD),Y=k&&k.length,W=mstrmojo.array,j=this.itemField,Z;for(Z=0;Z<Y;Z++){if(W.find(f,j,k[Z][j])===-1){f.push(k[Z]);}}b=f.length;}}if(!X&&((h.length>2&&b<this.REQUEST_THRESHOLD)||(b<e))){this.requestCandidates(h);return -1;}return(b<e)?f:f.slice(0,e);}this.requestCandidates(h);return -1;},requestCandidates:function A(U){this._request_pattern=U;var X=this,V=this.getSuggestionTarget(),W={success:function(e){if(!e){return ;}var d=X.getSuggestionTarget();if(!d||(V!==d)){return ;}var j=d.getSearchPattern(),a=e.items;X._last_hit={items:a,pattern:U};X.sz=e.sz;if(!X.noCache&&a){var f=(X.candidates&&X.candidates.items)||[],g=[].concat(a),b=a.length,Z;for(Z=0;Z<b;Z++){var Y=g[Z];if(mstrmojo.array.indexOf(f,Y)>-1){mstrmojo.array.removeItem(a,Y);}}if(X.candidates){X.candidates.items=f.concat(a);}}if(j&&j.indexOf(U)>-1){var h=X.filterCandidates(a,j);X.updateSuggestion(h);}},failure:function(Y){if(Y.getResponseHeader){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};this.getCandidatesThroughTaskCall({pattern:U,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},W);},filterCandidates:function Q(X,W,U){U=U||this.suggestCount;W=mstrmojo.string.regEscape(W);var Y=this.itemField,V=mstrmojo.array.filter(X,function(Z){return(new RegExp("\\s"+W+"|^"+W,"i")).test(Z[Y]);},{max:U});return V;},getHighlightedText:function P(W,Z){if(!this.highlightPattern||mstrmojo.string.isEmpty(W)){return Z;}try{if(!this.nameWildcards||mstr.$A.find([2,32],parseInt(this.nameWildcards,10))>-1){Z=Z.replace(new RegExp("(^|\\s)("+W+")","gi"),"$1<b>$2</b>");}else{var Y=W.split(" "),V,U;for(V=0,U=Y.length;V<U;V++){if(Y[V]!==""){Z=Z.replace(new RegExp("("+Y[V]+")","gi"),"<b>$1</b>");}}}}catch(X){}return Z;},updateSuggestion:function O(X){var V=X&&X.length,U=this.browseItemVisible;if(V||U){if(U){X=X||[];X.push({n:"Browse...",t:-99,cssClass:(V?"br":"bro")});}this.set("suggestionItems",X);if(this.suggestionShown){var W=this._lastOpened;if(W&&W.nudge){W.nudge();}if(this.autoSelect&&W){W.list.singleSelect(0);}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var U=this.opener;if(U&&U.onBrowserClose){U.onBrowserClose();}},onOpen:function(){var U=this.opener;if(U&&U.onBrowserOpen){U.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function L(){this.browserShown=false;},handleSuggestionItemSelect:function K(U,V){if(this.browseItemVisible&&U.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var W=this.zIndex;this.openPopup("ob",{zIndex:(W&&(W+10))||110});this.ob.browser.browse(mstrmojo.hash.copy(V,{folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes}));this.browserShown=true;}else{this.onSuggestionItemSelect(U);}},highlightPattern:true,suggestionPopupCssClss:"",suggestionPopup:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-ObjectInputBox-suggest",autoClose:true,locksHover:true,nextHighlight:function(){D.call(this,true);},preHighlight:function(){D.call(this,false);},getSelected:function M(){var U=this.list;return U.items[U.selectedIndex];},onOpen:function I(){var U=this.opener;if(U){mstrmojo.css.addClass(this.domNode,U.suggestionPopupCssClss||"");if(U.autoSelect){this.list.singleSelect(0);}if(U.nudge){U.nudge(this);}}},onClose:function F(){this.list.clearSelect();var U=this.opener;if(U){U.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,U.suggestionPopupCssClss||"");}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function R(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz");mstrmojo.RadioList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.RadioList",inputType:"radio",cssClass:"mstrmojo-RadioList",itemCssClass:"mstrmojo-RadioList-item",onenabledChange:function A(B){for(var C=0;C<this.items.length;C++){this._getItemNode(C).firstChild.disabled=!B.value;}}});mstrmojo.RadioListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.RadioListHoriz",inputType:"radio",cssClass:"mstrmojo-RadioListHoriz",itemCssClass:"mstrmojo-RadioListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo.ui._IsPulldown","mstrmojo.ui.PopupList","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var I=mstrmojo.css,G=mstrmojo.array,F=mstrmojo.dom;mstrmojo.ui.Pulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown],{scriptClass:"mstrmojo.ui.Pulldown",onitemSelected:mstrmojo.emptyFn,allowHTML:true,init:function N(O){this._super(O);I.addWidgetCssClass(this.list,"ctrl-popup-list");},initChildren:function E(){this.children=this.getPopupListConfig();this._super();},getSelectedItem:function H(){var O=this.items;return O&&O[this.selectedIndex];},selectItemByField:function J(P,O){this.set("selectedIndex",G.find(this.items||[],P,O));},getPopupWidget:function D(){return this.list;},getPopupList:function K(){return this.list;},_set_items:function B(R,O){var Q=this.items;this.items=O;delete this.selectedIndex;if(Q!==O){var P=this.hasRendered;if(P){this.refresh();}return true;}return false;},onclick:function M(O){this._super(O);var Q=this,P=Q.getPopupWidget();Q.mw=Q.mw||function(R){if(!F.contains(P.domNode,F.eventTarget(self,R),true,document.body)){P.close();F.detachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",Q.mw);}};F.attachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",Q.mw);},_set_selectedIndex:function A(T,R){if((R!==0&&!R)||R<0){return false;}var P=this.selectedIndex=R,O=this.getPopupList(),Q=O.items,S=this.selectedNode;O.set("selectedIndex",P);if(S&&Q&&Q[P]){S.innerHTML=this.allowHTML?Q[P].n:mstrmojo.string.encodeHtmlString(Q[P].n);S.title=Q[P].title||"";}this.onitemSelected(Q[P],P);return true;},getPopupListConfig:function C(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",selectionPolicy:"reselect",locksHover:true,listHooks:{select:function O(R,S,Q){this.parent.set("selectedIndex",Q);this.close();}},getItemProps:function P(S,Q){var R=mstrmojo._IsList.getItemProps.call(this,S,Q);R.style=this.parent.itemCssText||"";return R;}};},children:[]});mstrmojo.ui.Pulldown.newPulldown=function L(P,T,O,S,R){S=S||{};S.items=P;var Q;if(R===true){Q=mstrmojo.hash.copy({scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:O||0},S);}else{Q=new mstrmojo.ui.Pulldown(S);if(O!==undefined){Q.set("selectedIndex",O);}}Q.postselectedIndexChange=function(U){var X=U.value,W=U.valueWas;if(X!==W){var V=this.items;T.call(this,V[X],V[W]);}};return Q;};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.PopupList","mstrmojo.array","mstrmojo.css");var F=mstrmojo.css,E=mstrmojo.array;mstrmojo.ui.editors.controls.ListPreviewButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ListPreviewButton",init:function G(L){this._super(L);var M=this.getListCfg(),K=this.itemValueField;M.alias="list";M.locksHover=true;M.slot="widgetHostNode";M.listHooks={select:function J(N,O){this.parent.set("selectedValue",O[K]);this.close();}};M.setDimensions=mstrmojo.emptyFn;this.addChildren([M]);F.addWidgetCssClass(this.list,"ctrl-popup-list");},getPopupWidget:function D(){return this.list;},items:null,onitemsChange:function H(){var J=this.items;if(J){this.list.set("items",J);}},selectedValue:"",itemValueField:"n",onselectedValueChange:function C(){var K=this.selectedValue,J=this.itemValueField,L=this.list;L.selectItems(E.filter(L.items||[],function(M){return M[J]===K;}),true);this.updatePreview();},updatePreview:function B(){throw new Error(this.scriptClass+" must implement updatePreview.");},getListCfg:function I(){return{scriptClass:"mstrmojo.ui.PopupList",selectionPolicy:"reselect"};},postBuildRendering:function A(){this.onitemsChange();this.onselectedValueChange();return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.Menu","mstrmojo.hash","mstrmojo.array");mstrmojo.ui.menus.MenuItemType=null;var U="separator";mstrmojo.ui.menus.MenuConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.MenuConfig",menus:null,menuCssClass:"",supportsScroll:false,maxHeight:0,hasMenuItems:function Q(){return !!this.menus.length;},getMenuItems:function E(V){return mstrmojo.array.filter(this.menus.slice().reverse(),function(Z,Y,X){var W=X[Y+1];return V||Z.cls!==U||(Y&&W&&W.cls!==U);}).reverse();},getMenuItem:function C(Y){var X=this.menus,V;if(X!==null){for(V=0;V<X.length;V++){var W=X[V];if(W.cls===Y){return W;}}}return null;},absorbMenuItems:function S(V){this.menus=this.menus.concat(V.menus);},addMenuItem:function I(c,Y,a,W,Z){var b,X,V;if(!c||typeof c==="string"){b=c;}else{b=c.n;X=c.ttp;}V={n:b,ttp:X,cls:Y,fn:a,ctxt:W};if(isNaN(Z)||Z>=this.menus.length){this.menus.push(V);}else{this.menus.splice(Z,0,V);}return V;},addCustomMenuItem:function T(a,X,Z,W,V){var Y=this.addMenuItem(a,X,Z,V);Y.getItemMarkup=W;return Y;},addDisabledMenuItem:function O(W,V){this.addNonInteractiveMenuItem(W,V,true);},addNonInteractiveMenuItem:function M(Z,W,V){var X=["non-int"];if(W){X.push(W);}if(V){X.push("disabled");}var Y=this.addMenuItem(Z,X.join(" "),mstrmojo.emptyFn);Y.dsbld=true;},addSeparator:function D(){this.addMenuItem("",U,function(){return false;});},addPopupMenuItem:function R(c,X,b,Y,W,Z){var a=["pop "];if(Y){a.push(Y);}var V=this.addMenuItem(c,a.join(" "),b,W,Z);V.pop=true;V.scope=X;return V;},addActionPopupMenuItem:function L(c,W,a,b,X,V,Z){var Y=this.addPopupMenuItem(c,W,b,(X||"")+" ax",V,Z);Y.actionFn=a;Y.ax=true;},addSubMenuItem:function K(Z,X,W,Y,V){this.addPopupMenuItem(Z,W,Y,X,V);},addEditorMenuItem:function P(Z,W,Y,V,X){this.addPopupMenuItem(Z,W,Y,"",V,X);},getToggleItemStates:function F(d,f,V,b,X,a){var Y,Z,W,c;if(typeof d==="string"){Y=Z=d;W=c="";}else{Y=d.on||"";Z=d.off||"";W=d.ttpOn||"";c=d.ttpOff||"";}var e=[{n:Y,ttp:W,cls:f+" on",fn:b,ctxt:a},{n:Z,ttp:c,cls:f,fn:V,ctxt:a}];if(!X){e.reverse();}return e;},addToggleMenuItem:function J(c,Y,a,X,W,b,V){var Z=this.getToggleItemStates(c,Y,a,X,b,V);return this.addDualStateItem(W,Z[0],Z[1]);},addDualStateItem:function G(W,V,X){return this.addMenuItem({n:V.n,ttp:V.ttp},V.cls,this.getDualStateHandler(W,V,X),V.ctxt);},getDualStateHandler:function H(W,V,X){return function(Z,a){var Y=[V,X];if(Z.cls===V.cls){Y.reverse();}Y[1].fn.call(mstrmojo.all[W],Z,a);Z.n=Y[0].n;Z.ttp=Y[0].ttp;Z.cls=Y[0].cls;};},addRadioMenuGroup:function B(X,c,Y,W,V,b,a){var Z=[];Y.forEach(function(g,d){if(g.separator){this.addSeparator();return ;}var i=g.text,h=(W||"")+" "+(g.cls||"")+(b?"":" radio")+(g.value===X?" on":""),f=function(){if(c.call(this.ctxt,g.value,X,g)===false){return false;}X=g.value;Z.forEach(function(j){j.cls=j.cls.replace(/ on$/,"")+(j.radioValue===X?" on":"");});return true;},e=a?this.addCustomMenuItem(i,h,f,a(g,d),V):this.addMenuItem(i,h,f,V);e.radioValue=g.value;Z.push(e);},this);},clear:function N(){this._super();this.menus=[];},newInstance:function A(V){return new mstrmojo.ui.menus.Menu(mstrmojo.hash.copy({popupConfig:this},V));}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.ui.editors.controls.ValidationTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,null,{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",errRevert:true,dtp:null,validationDelay:3000,orignText:null,trigger:mstrmojo.validation.TRIGGER.ONKEYUP,init:function(B){B=B||{};B.constraints=B.constraints||{};B.constraints.trigger=this.trigger;this._super(B);},prekeyup:function(B){if(B.e.keyCode===13){this.blur();return ;}this._super(B);},onfocus:function(){this.orignText=this.value;},onblur:function(){if(this.value!==this.orignText){this.validate();}},validate:function(){this._super();this.orignText=this.value;this.clearValDelayTimer();},preinput:mstrmojo.emptyFn,postinput:function(){var B=this.doValidation(this.value);if(B.code<=mstrmojo.validation.STATUSCODE.VALID){this.clearValidation();if(!this.errRevert){this.hideTooltip();}}},updateTooltipConfig:function(){this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onInvalid:function(){if(!this.errRevert){this.hideTooltip();this.showTooltip();}else{this.clearValidation();this.set("value",this.orignText);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.PopupConfig","mstrmojo.ui.menus.MenuEditor");mstrmojo.ui.menus.EditorConfig=mstrmojo.declare(mstrmojo.ui.menus.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.EditorConfig",data:null,fnOk:null,fnCancel:null,okEnabled:true,cancelEnabled:true,okVisible:true,cancelVisible:true,init:function D(E){this._super(E);if(this.data&&!mstrmojo.all[this.data.id]){mstrmojo.hash.make(this.data,mstrmojo.Obj);}this.initBindings();},clear:function A(){this._super();this.data=null;this.fnOk=this.fnCancel=mstrmojo.emptyFn;},newInstance:function C(){return new mstrmojo.ui.menus.MenuEditor({popupConfig:this});},destroy:function B(){if(this.data){this.data.destroy();}this.destroyBindings();this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.EditableLabel");var A=mstrmojo.css,E=mstrmojo.validation.STATUSCODE;mstrmojo.ui.editors.controls.ComboBox=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",markupMethods:{onenabledChange:function D(){this.txtLabel.set("editOnClick",this.enabled);A.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function B(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ComboBox");},updatePreview:function C(){this.txtLabel.set("value",this.selectedValue||"");},updateSelection:function(){this.set("selectedValue",this.txtLabel.value);},validateTextInput:function(F){return true;},txtLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"txtLabel",slot:"previewNode",constraints:{validator:function(){if(!this.parent.validateTextInput(this.value)){return{id:this.id,code:E.INVALID,msg:""};}}},onValid:function(){this.parent.updateSelection();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._HasLayout","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.expr","mstrmojo.css");var C=mstrmojo.expr.DTP,B=mstrmojo.css,A="mstrmojo-Stepper-ErrValidation";mstrmojo.ui.editors.controls.Stepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.Stepper",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,mouseup,mousemove,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text"></div><div class="prev">-</div></div>',layoutConfig:{w:{textNode:"100%"},xt:true},textInput:null,init:function E(F){var G=F.provider;this.children=[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"textInput",slot:"textNode",dtp:G.dtp||C.INTEGER,constraints:{validator:G.validator,max:G.max,min:G.min},onValid:function(){var H=this.parent;B.removeClass(H.domNode,A);G.setVal(parseInt(this.value,10)||0);H.updateDisplayText();}}];this._super(F);this.addDisposable(G);B.addWidgetCssClass(this,"mstrmojo-ui-ctrl-Stepper");},postBuildRendering:function(){this.updateDisplayText();this._super();},updateDisplayText:function D(){this.textInput.set("value",this.provider.getVal());}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus.MenuConfig");var D=mstrmojo.string,A=mstrmojo.dom,E=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function B(){var K=this,J=K.statusList,F=J&&J.length||0,G=K.statusConfig||new mstrmojo.ui.menus.MenuConfig(),L=function(M){return function(N){K.set("status",M);K.onStatusClick(M);};};if(!G.hasMenuItems()&&F){for(var H=0;H<F;H++){var I=J[H];G.addMenuItem(I.n,I.cls||"",L(I),K);}}else{}if(G.hasMenuItems()){G.alignment=K.alignment||{host:E.BOTTOM_LEFT,popup:E.TOP_LEFT};G.hostId=K.id;G.hostElement=K[K.hostElementName]||K.domNode;K.openPopup(G.newInstance());}}function C(){var F=this.statusConfig||this.statusList&&this.statusList.length>1;this.menuButtonNode.style.display=F?"":"none";}mstrmojo.ui.StatusButton=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.ui.StatusButton",markupString:'<div id="{@id}" class="mstrmojo-StatusButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}"><div class="mstrmojo-Button {@innerIconClass}"  mstrAttach:click><span class="mstrmojo-text"></span></div><div class="menuButton" mstrAttach:click></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;},textSpanNode:function(){return this.domNode.firstChild.firstChild;},menuButtonNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onstatusChange:function(){this.textSpanNode.innerHTML=D.encodeHtmlString(this.status&&this.status.n||"");},onstatusListChange:function(){C.call(this);},onstatusConfigChange:function(){C.call(this);}},status:null,statusList:null,statusConfig:null,onclick:function(F){var G=A.eventTarget(F.hWin,F.e);if(A.contains(this.menuButtonNode,G,true)){B.call(this);}else{if(A.contains(this.textNode,G,true)){this.onButtonClick(this.status,F);}}},onButtonClick:mstrmojo.emptyFn,onStatusClick:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui._IsDropTarget","mstrmojo.EditableLabel","mstrmojo.ui.menus.MenuConfig","mstrmojo.css");var b=mstrmojo.css,N=1,L=2,F=4,c=8,K=16;function E(e){return function(){b.toggleClass(this.menuBtnNode,"active",e);};}function H(f){var j=new mstrmojo.ui.menus.MenuConfig(),i=this.getMenuActions(),e=this.index,k=this.id,g=this.total;if((i&K)>0){this.addNewTabMenuItem(j);}if((i&F)>0){j.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"dup",function(){mstrmojo.all[k].tabDuplicated();});}if((i&L)>0){if(e){j.addMenuItem(mstrmojo.desc(5362,"Move Left"),"lft",function(){mstrmojo.all[k].tabMoved(true);});}if(e<g-1){j.addMenuItem(mstrmojo.desc(5363,"Move Right"),"rgt",function(){mstrmojo.all[k].tabMoved(false);});}}j.addSeparator();if((i&N)>0){j.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){mstrmojo.all[k].lbl.set("isEditing",true);});}if((i&c)>0){if(g>1){j.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){mstrmojo.all[k].tabDeleted();});}}var h=this.getCustomMenu();if(h&&h.hasMenuItems()){j.addSeparator();j.absorbMenuItems(h);}j.addPopupHandlers(this.id,E(true),E(false));this.showTabMenu(this.updateMenuCfg(j),f);}mstrmojo.vi.ui.tabs.Tab=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.Tab",markupString:'<div id="{@id}" class="mstrmojo-VITab unselectable {@cssClass}" style="{@cssText}" unselectable="on" mstrAttach:click><div><div class="mstrmojo-VITab-tab"></div><div class="mstrmojo-VITab-menu"></div></div></div>',markupSlots:{containerNode:function W(){return this.domNode.firstChild.firstChild;},menuBtnNode:function a(){return this.domNode.firstChild.lastChild;}},markupMethods:{ontitleChange:function Z(){this.lbl.set("text",this.title);},onisSelectedChange:function V(){mstrmojo.css.toggleClass(this.domNode,"selected",this.isSelected);},onzIndexChange:function D(){this.domNode.style.zIndex=this.zIndex;}},zIndex:1,menuBtnNode:null,lbl:null,title:"",index:-1,total:-1,isSelected:false,children:[{scriptClass:"mstrmojo.EditableLabel",alias:"lbl",editOnClick:false,onTextEditComplete:function Q(f,e){if(f){this.parent.titleEdited(this.text,e);}}}],postBuildRendering:function X(){if(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation()){this.draggable=false;}this._super();},onclick:function d(e){var f=e.getTarget();if(f===this.menuBtnNode){H.call(this,f);}else{if(!this.isSelected){this.tabSelected();}}},getMenuActions:function I(){return 0;},getCustomMenu:function B(){return null;},isDragValid:function A(){return this.parent.children.length>1&&!this.lbl.isEditing;},createAvatar:function S(){var e=document.createElement("div");e.appendChild(this.domNode.cloneNode(true));e.style.margin="-5px 0 0 10px";return e;},allowDrop:function G(e){var f=e.src.widget;return f&&f.parent===this.parent;},ondrop:function Y(e){var f=e.src.data;this.parent.moveTab(f.idx,this.index,f.fromIdx);this._super(e);},ondragenter:function P(f){this._super(f);var g=f.src.data,e=this.index;this.parent.moveTab(g.idx,e);g.idx=e;},ondragover:function T(g){var e=g.tgt.node,f=g.tgtData,h=f&&f.node;if(!f||h!==e){g.tgtData={node:e};if(h){h.style.borderColor="";}}e.style.borderColor="#0fe88f";},getDragData:function C(){var g=this.id,e=this.index;return{setAvatarClass:function f(h){var k=mstrmojo.all[g],i=k.avatar;if(i){var j=[k.avatarCssClass,"hasOwnAvatar",h];i.className=j.join(" ");}},fromIdx:e,idx:e};},getDropAvatarIcon:function R(){return"pivot";},cleanUpAfterTarget:function J(f){var e=f.tgtData&&f.tgtData.node;if(e){e.style.borderColor="";}this._super(f);},onAppStateChange:function U(e){var f=this.lbl,g=e.value===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION;f.set("isEditing",false);f.set("editOnDoubleClick",!g);this.draggable=!g;},addNewTabMenuItem:function O(e){this.throwAbstractMethodError("addNewTabMenuItem");},tabSelected:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,tabMoved:mstrmojo.emptyFn,tabDeleted:mstrmojo.emptyFn,tabDuplicated:mstrmojo.emptyFn,showTabMenu:mstrmojo.emptyFn,updateMenuCfg:function M(e){return e;}});mstrmojo.vi.ui.tabs.Tab.ACTIONS={NEW_TAB:K,RENAME:N,MOVE:L,DUPLICATE:F,DELETE:c};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo._HasEditableText","mstrmojo.ui.Pulldown");var H=mstrmojo.array,C=mstrmojo.hash,B=19,J=13,D=27;mstrmojo.ui.SearchablePulldown=mstrmojo.declare(mstrmojo.ui.Pulldown,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.ui.SearchablePulldown",editableSlot:"selectedNode",allowCustomText:false,isSearching:false,editOnClick:false,init:function K(P){this._super(P);var M=this.getPopupList();M.renderOnScroll=this.renderOnScroll||M.renderOnScroll;M.renderBlockSize=this.renderBlockSize||M.renderBlockSize;mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-SearchablePulldown");var O=M.constructor.prototype,N=M.getItemProps?M.getItemProps:O.getItemProps,Q=M.getItemMarkup?M.getItemMarkup:O.getItemMarkup;M.getItemProps=function(V,R){var S=this._spft||"",W=V.n,T=W.toUpperCase().indexOf(S);if(T===-1){S="";}var U=N.call(this,V,R);U.before=W.slice(0,T);U.input=W.substring(T,T+S.length);U.after=W.slice(T+S.length,W.length);return U;};M.getItemMarkup=function(S,R){return Q.call(this,S,R).replace("{@en@n}","{@en@before}<span class='sp-highlight'>{@en@input}</span>{@en@after}");};},onclick:function L(M){var P=this.selectedNode,Q=M.getTarget(),R=M.e.offsetX>=(P.offsetWidth-B),O=this.getPopupWidget(),N=O.visible;if(Q===P&&(!N||(N&&R))){this.set("isEditing",!N);this._super(M);}},onPopupWidgetClosed:function F(){this.set("isEditing",false);var P=this.getPopupList(),Q=P._oldItems,N=this.text;delete P._oldItems;if(Q){var M=H.find(Q,"n",N);if(M===-1&&!this.allowCustomText){var O=P.items[0]||Q[0];M=H.find(Q,"n",O.n);}P.set("items",Q);this.set("selectedIndex",M);}},_set_selectedIndex:function E(O,M){if(this.allowCustomText&&M===-1){this.selectedIndex=-1;this.onitemSelected(null,M);}else{this.isSearching=false;this._super(O,M);if(this.hasRendered){var N=this.selectedNode;this.text=N.innerText?N.innerText:N.textContent;}}return true;},onkeydown:function G(N){this._super(N);var M=window.event||N.e;if(M.keyCode===J){this.getPopupList().close();}},onkeyup:function A(O){this._super(O);var M=window.event||O.e,P=M.keyCode,N=this.getPopupList();if(P===D||P===J){N.close();}else{this.processSearch();}},processSearch:function I(){this.isSearching=true;this.hideTooltip();var M=[],O=this.getPopupList(),P=this.selectedNode.innerHTML,Q=O._oldItems||O.items,N=P.toUpperCase();N=N.replace(/<BR>/,"");if(N.length>0){H.forEach(Q,function(R){if(R.n.toUpperCase().indexOf(N)>-1){M.push(C.clone(R));}},this);}else{M=Q;}O._spft=N;if(this.customizeSearchResult){this.customizeSearchResult(M);}O.set("items",M);O.adjustCornersForPopupOverflow();delete O._spft;O._oldItems=Q;O.set("visible",M.length!==0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.range","mstrmojo.Widget","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo._HasSuggestion","mstrmojo.ME.MetricToken","mstrmojo.ME.MetricDataService","mstrmojo.ui.ScrollableSuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var M=mstrmojo.dom,O=mstrmojo.css,w=mstrmojo.Enum_Keys,D=mstrmojo.range,c=D.EDGE,p=mstrmojo.ME.MetricToken.isDelimiter,L=mstrmojo.expr,h=mstrmojo.array,H=mstrmojo.hash;function AD(E){return E.ctrlKey||M.isMetaKey(window,E);}mstrmojo.ME.SpanListMapper=mstrmojo.provide("mstrmojo.SpanListMapper",mstrmojo.mixin({itemWrapperPrefix:function(E){return'<span class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"&nbsp;",itemWrapperSuffix:"</span>",createWrapperNode:function N(E){var AE=E.ownerDocument,AF=AE.createElement("span");return AF;},_iw2idx:function P(AE,AH,AG){var AF=this.wrapperNodes(AH),E=mstrmojo.array.indexOf(AF,AG);return E===-1?AF.length:E;},itemOffsetLeft:function a(AE,AI,E,AG){if(!AG){var AF=this.wrapperNodes(AI);AG=AF&&AF[E];if(!AG){return 0;}}var AH=AI.firstChild;if(!AH||(AH===AG)){return 0;}return AG.offsetLeft-AH.offsetLeft;},whereDrop:function AC(AM,E,AG,AL,AE){var AI=this._nd2iw(AM,E,AG),AN,AK,AH,AJ,AF;if(AI){AK=this._iw2idx(AM,E,AI);AN=AK;AH=this.itemOffsetLeft(AM,E,null,AI);AJ=AI.offsetTop;AF=AI.offsetWidth;if(AL.x>AE.left+AH+AF/2){AN++;AH+=AF;}}else{return AM.dropCuePos;}return{left:AH,top:AJ,idx:AN,idxActual:AK};}},mstrmojo.hash.copy(mstrmojo.WidgetListMapper)));mstrmojo.ME.TokenInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._HasSuggestion],{scriptClass:"mstrmojo.ME.TokenInputBox",containerResizable:false,dropZone:true,suggestionPopupCssClss:"mstrmojo-ME-TokenInputBox-suggest",allowDrop:function C(E){var AE=E.src.data;return !!AE;},ondrop:function(E){E.src.data={v:mstrmojo.ME.MetricToken.brackets(E.src.data.item.n),oi:H.copyProps(["did","n","t"],E.src.data.item),isNew:true};if(this.prepareDropItem){this.prepareDropItem(E);}this.insertTokens([E.src.data]);this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondragenter:function F(E){this.dragdata=E.src.data;this._super(E);this.set("dropCuePos",{left:0,top:0});mstrmojo.css.addClass(this.domNode,"unselectable");},ondragleave:function Q(){this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondropCuePosChange:function S(AE){var AF=AE.value,E=this.dragdata;if(E&&E.setAvatarClass){if(AF){E.setAvatarClass("add");}else{E.setInvalidAvatarClass();}}},makeObservable:true,showDesc:true,showPath:true,showFunctionSyntaxAsPath:true,blockCount:mstrmojo.ME.MetricDataService.blockCount,suggestCount:mstrmojo.ME.MetricDataService.suggestCount,markupString:'<div id={@id} class="mstrmojo-TokenInputBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-TokenInputBox-edit" contenteditable="true" tabindex="1" spellcheck="false"ondragstart = "return false;" oncontextmenu = "document.oncontextmenu =  mstrmojo.all.{@id}.fnContextMenu;" onkeydown = "return mstrmojo.all.{@id}.handlekeydown(event);" onkeypress = "return mstrmojo.all.{@id}.handlekeypress(event);" onkeyup = "return mstrmojo.all.{@id}.handlekeyup(event);" onmouseup = "return mstrmojo.all.{@id}.handlemouseup(event);" onpaste = "return mstrmojo.all.{@id}.handlepasteDirect(event);" >{@itemsHtml}</div><textarea class = "mstrmojo-TokenInputBox-clipboard" onkeyup = "return mstrmojo.all.{@id}.handlepaste(event);"></textarea><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild;},clipboardNode:function(){return this.domNode.childNodes[1];},scrollboxNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},suggestionListClass:"mstrmojo.ui.ScrollableSuggestionList",items:null,itemFunction:function G(AF,E,AE){return new mstrmojo.ME.MetricToken({data:AF,parent:AE});},listMapper:mstrmojo.ME.SpanListMapper,_set_items:function R(AE,E){if(this._super){this._super(AE,E);}if(!this.tokensCacheInitilized){this.pretokensModify();this.tokensCacheInitilized=true;}},tokensCache:[],tokensCachePointer:0,isDelimiter:p,postBuildRendering:function X(){if(this._super){this._super();}this._eros=false;if(M.isFF){document.body.spellCheck=false;}},fnContextMenu:function I(E){if(E){E.cancelBubble=true;E.returnValue=false;}return false;},handlekeydown:function V(AJ){AJ=AJ||window.event;var AH=AJ.keyCode||AJ.charCode,AF=false,AK=D.getRangeInfo();if((AD(AJ)||AH===w.LEFT_ARROW||AH===w.RIGHT_ARROW)&&this.doubleByte){this.doubleByte=false;var AI=this.prev_rInfo,AE=AK,AL=AE.startContainer.data.slice(AI.startOffset,AK.startOffset);this.widgetHandleImeInput(AI,AL);return ;}switch(AH){case w.DELETE:if(!this.doubleByte){try{this.widgetHandleDelete(AK);this.startTokenSuggestion();this.raiseChangeEvent({type:"delete"});}catch(AG){}AF=true;}break;case w.BACKSPACE:if(!this.doubleByte){try{this.widgetHandleBackspace(AK);this.raiseChangeEvent({type:"backspace"});this.startTokenSuggestion();this.editNode.focus();}catch(E){}AF=true;}break;case w.ENTER:if(this.breakOnEnterKeyDown&&this.breakOnEnterKeyDown()){break;}case w.TAB:this._startDebug=true;if(this.suggestionShown){this.handleSuggestionItemSelect(this.getSelected());}else{this.startTokenSuggestion();}AF=true;break;case w.ESCAPE:this.endTokenSuggestion();AF=true;break;case 86:if(AD(AJ)){this._saveRangeInfo=D.getRangeInfo();if(!this._saveRangeInfo.collapsed){this.widgetHandleDelete(this._saveRangeInfo);this._saveRangeInfo=D.getRangeInfo();}this.clipboardNode.focus();AF=false;}break;case 89:if(AD(AJ)){this.widgetHandleUndoRedo("redo");AF=true;}break;case 90:if(AD(AJ)){this.widgetHandleUndoRedo("undo");AF=true;}break;case 229:if(!this.doubleByte){this.doubleByte=true;this.prev_rInfo=AK;this.prev_items=this.items;}break;default:}if(AF){M.stopPropogation(window,AJ);M.preventDefault(window,AJ);return false;}return true;},getCharacter:function y(AE){var E=(M.isIE&&!M.isIE9)?AE.keyCode:AE.charCode;return(E>0)?String.fromCharCode(E):null;},handlekeypress:function A(AG){AG=AG||window.event;var AH=this.getCharacter(AG),AE=false;if(AH&&!((AH==="c"||AH==="a")&&AD(AG))){try{this.widgetHandleInput(D.getRangeInfo(),AH);this.raiseChangeEvent({type:"input",character:AH});if(!this.isDelimiter(AH)){if(this.useKeyDelay){var AF=this;window.clearTimeout(this.tmr);this.tmr=window.setTimeout(function(){AF.startTokenSuggestion();},mstrmojo.ME.MetricDataService.suggestDelay);}else{this.startTokenSuggestion();}}else{this.endTokenSuggestion(true);}}catch(E){}AE=true;}if(AE){M.stopPropogation(window,AG);M.preventDefault(window,AG);return false;}return true;},handlekeyup:function Y(AF){var E=AF.keyCode||AF.charCode,AE;if(E===w.LEFT_ARROW||E===w.RIGHT_ARROW){AE=this.findObjectToken();if(AE&&AE===this._saveActiveToken){this.startTokenSuggestion(AE);}else{this.endTokenSuggestion();}}else{if(E===w.UP_ARROW){this.preHighlight();}else{if(E===w.DOWN_ARROW){this.nextHighlight();}}}this._saveRangeInfo=D.getRangeInfo();},handlemouseup:function g(AJ){if(this.dropCuePos){return false;}var AF=this.findObjectToken();if(AF&&AF===this._saveActiveToken){this.startTokenSuggestion(AF);}else{this.endTokenSuggestion();}var AH=D.getRangeInfo();if(this.doubleByte){this.doubleByte=false;var AI=this.prev_rInfo,AG=this._saveRangeInfo,AE=AG.startContainer.data.slice(AI.startOffset,AG.startOffset+1);if(AE!==""){var E=this.widgetHandleImeInput(AI,AE);this.prev_items=this.items;AF=M.findWidget(AH.startContainer);if(AF){this._delaySetTextCaretPos(AF.domNode,AH.startOffset);}else{this._delaySetTextCaretPos(E.domNode,AH.startOffset-1);}}this.prev_rInfo=AH;}this._saveRangeInfo=AH;},handlepasteDirect:function t(E){this.clipboardNode.value=E.clipboardData.getData("Text");this.handlepaste(E);M.stopPropogation(window,E);M.preventDefault(window,E);return false;},handlepaste:function e(AI){var AE=this.clipboardNode.value;this.clipboardNode.value="";var AH=[],E=AE&&AE.length,AG,AF="",AJ;if(E>0){for(AG=0;AG<E;AG++){AJ=AE.charAt(AG);if(this.isDelimiter(AJ)){if(!mstrmojo.string.isEmpty(AF)){AH.push({v:AF,isNew:true});AF="";}AH.push({v:AJ,isDelimiter:true,isNew:true});}else{AF=AF+AJ;}}if(!mstrmojo.string.isEmpty(AF)){AH.push({v:AF,isNew:true});AF="";}this.insertTokens(AH);}},raiseChangeEvent:function(E){E.name="tokensModify";this.raiseEvent(E);},getTokensAsString:function AB(){var AE=[],AG=this.items,AF,E;for(AF=0,E=AG.length;AF<E;AF++){AE[AF]=AG[AF].v;}return AE.join("| ");},replaceErrorToken:function i(AG){var AF=this.items||[],AH=mstrmojo.array.find(AF,"sta",-1),AE,AI=function(AO,AM,AP){var AL=(AO&&AO.items)||[],AK=h.find(AL,"did",AM),AJ,AN;if(AK>-1){AJ=AL[AK].fs;AN=h.filterOne(AJ,function(AQ){return AQ.fnm&&AQ.fnm.toUpperCase()===AP.toUpperCase();});}return AN;},E=function(AO,AM,AN){var AJ={v:AM.n,oi:AM,isNew:true},AL=AO.v&&AO.v.split("@"),AK;if(AL&&AL.length>1){AK=AI(AN,AM.did,AL[1]);if(AK){AJ.exv=AK.fmdid||AK.fid;AJ.extp=8;AJ.v=mstrmojo.ME.MetricToken.brackets(AM.n)+"@"+AK.fnm;}}return AJ;};if(AH>-1){AE=E(AF[AH],AG,this.candidates);this.remove(AH);this.add([AE],AH);}},widgetHandleDelete:function Z(AH){if(AH.collapsed){var AG,AF,E,AI=AH.startOffset,AE=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AH.startContainer,false,document.body)){D.collapseOnNode(this.editNode,false);return ;}AG=D.getEdgeInfo(AH.startContainer,AH.startOffset);AF=M.findWidget(AH.startContainer);E=this.itemIndex(AF.data);if(AG===c.EDGE_END){E++;AF=AE[E];AI=0;}if(!AF){D.collapseOnNode(this.editNode,false);return ;}if(AF.length()===1){this.remove(E);AF=AE[E];if(AF){D.collapseOnNode(AF.domNode,true);}else{D.collapseOnNode(this.editNode,false);}this.checkMergeTwoTokens(E-1,E);}else{AF.spliceContent(AI,1);D.collapseOnTextNode(AF.domNode,AI);}}else{this.widgetDeleteTokens(AH);}},widgetHandleBackspace:function o(AH){if(AH.collapsed){var AG,AF,E,AI=AH.startOffset,AE=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AH.startContainer,false,document.body)){if(AH.startOffset>0&&M.isFF){AF=AE[this.items.length-1];D.collapseOnNode(AF.domNode,false);AH=D.getRangeInfo();AG=D.getEdgeInfo(AH.startContainer,AH.startOffset);}else{D.collapseOnNode(this.editNode,true);return ;}}AG=D.getEdgeInfo(AH.startContainer,AH.startOffset);AF=M.findWidget(AH.startContainer);E=this.itemIndex(AF.data);if(AG===c.EDGE_BEGIN){E--;AF=AE[E];AI=AF.length();}if(!AF){D.collapseOnNode(this.editNode,true);return ;}if(AF.length()===1){this.remove(E);AF=AE[E-1];if(AF){D.collapseOnNode(AF.domNode,false);this.checkMergeTwoTokens(E-1,E);AF=AE[E-1];}else{D.collapseOnNode(this.editNode,true);}}else{AF.spliceContent(AI-1,1);D.collapseOnTextNode(AF.domNode,AI-1);}}else{this.widgetDeleteTokens(AH);}},widgetHandleInput:function q(AI,AJ){if(!AI.collapsed){this.widgetDeleteTokens(AI);AI=D.getRangeInfo();}var AF,AK,AL,AM,E,AE,AG=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AI.startContainer,false,document.body)){this.add([{v:AJ,isDelimiter:this.isDelimiter(AJ),isNew:true}],0);AK=AG[0];D.collapseOnTextNode(AK.domNode,1);return ;}AF=D.getEdgeInfo(AI.startContainer,AI.startOffset);AK=M.findWidget(AI.startContainer);AL=this.itemIndex(AK.data);if(this.isDelimiter(AJ)){AM={v:AJ,isDelimiter:true,isNew:true};if(AF===c.EDGE_MIDDLE){var AH=AK.split2Tokens(AI.startOffset);this.remove(AL);this.add([AH[0],AM,AH[1]],AL);AL=AL+1;}else{AL=(AF===c.EDGE_BEGIN)?AL:AL+1;this.add([AM],AL);}AK=AG[AL];D.collapseOnNode(AK.domNode,false);}else{AE=AI.startOffset;if(AK.isDelimiter()){E=AG[(AF===c.EDGE_BEGIN)?AL-1:AL+1];if(E&&!E.isDelimiter()){AK=E;AE=(AF===c.EDGE_BEGIN)?AK.length():0;}}if(!AK.isDelimiter()){AK.spliceContent(AE,0,AJ);D.collapseOnTextNode(AK.domNode,AE+1);}else{this.add([{v:AJ,isNew:true}],(AF===c.EDGE_BEGIN)?AL:AL+1);AK=AG[(AF===c.EDGE_BEGIN)?AL:AL+1];D.collapseOnNode(AK.domNode,false);}}},widgetHandleImeInput:function q(AH,AI){if(!AH.collapsed){this.widgetDeleteTokens(AH);AH=D.getRangeInfo();}var AF,AJ,AK,AL,E,AE,AG=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AH.startContainer,false,document.body)){this.clearTokens();this.add([{v:AI,isDelimiter:this.isDelimiter(AI),isNew:true}],0);AG=this.ctxtBuilder.itemWidgets;AJ=AG[0];D.collapseOnTextNode(AJ.domNode,1);this._delaySetCaretPos(AJ.domNode,false);return ;}AF=D.getEdgeInfo(AH.startContainer,AH.startOffset);AJ=M.findWidget(AH.startContainer);AK=this.itemIndex(AJ.data);AE=AH.startOffset;if(AJ.isDelimiter()){this.clearTokens();this.set("items",this.prev_items);AG=this.ctxtBuilder.itemWidgets;E=AG[(AF===c.EDGE_BEGIN)?AK-1:AK+1];if(E&&!E.isDelimiter()){AJ=E;AE=(AF===c.EDGE_BEGIN)?AJ.length():0;}}if(!AJ.isDelimiter()){AJ.spliceContent(AE,0,AI);this._delaySetTextCaretPos(AJ.domNode,AE+AI.length);}else{this.add([{v:AI,isNew:true}],(AF===c.EDGE_BEGIN)?AK:AK+1);AJ=AG[(AF===c.EDGE_BEGIN)?AK:AK+1];this._delaySetCaretPos(AJ.domNode,false);}this.startTokenSuggestion();return AJ;},findObjectToken:function B(){var AH=D.getRangeInfo(),AF=M.findWidget(AH.startContainer);if(!M.contains(this.editNode,AH.startContainer,false,document.body)){return null;}if(!AF||AF===this||!AF.isDelimiter){return null;}if(AF&&!AF.isDelimiter()){return AF;}var AG=D.getEdgeInfo(AH.startContainer,AH.startOffset),AE=this.ctxtBuilder.itemWidgets,E=this.itemIndex(AF.data);AF=AE[(AG===c.EDGE_BEGIN)?E-1:E+1];if(AF&&!AF.isDelimiter()){return AF;}return null;},checkMergeTwoTokens:function m(AH,AF){var AG=this.ctxtBuilder.itemWidgets,AE=AG[AH],E=AG[AF];if((AE&&!AE.isDelimiter())&&(E&&!E.isDelimiter())){this.remove([AH,AF]);this.add([AE.mergeTo(E)],AH);D.collapseOnTextNode(AG[AH].domNode,AE.length());}},insertTokens:function s(AK){var E=0,AE=this.editNode;var AJ=this._saveRangeInfo||D.getRangeInfo();if(!AJ||!M.contains(AE,AJ.startContainer,false,document.body)){this.add(AK);E=this.items.length-1;this._delaySetTextCaretPos(AE,(AE.innerText||AE.textContent).length);}else{var AI=D.getEdgeInfo(AJ.startContainer,AJ.startOffset),AF=M.findWidget(AJ.startContainer);E=this.itemIndex(AF.data);if(AI===c.EDGE_MIDDLE){var AH=AF.split2Tokens(AJ.startOffset);this.remove(E);AK.unshift(AH[0]);AK.push(AH[1]);this.add(AK,E);}else{E=(AI===c.EDGE_BEGIN?E:E+1);this.add(AK,E);}E=E+AK.length-1;AF=this.ctxtBuilder.itemWidgets[E];this._delaySetCaretPos(AF.domNode,false);}this.raiseChangeEvent({type:"insert"});var AG=this;window.setTimeout(function(){AG._saveRangeInfo=D.getRangeInfo();},50);return E;},insertParenthesisTokens:function v(AE){var E=this;window.setTimeout(function(){var AF=E.insertTokens([{v:"(",isDelimiter:true,isNew:true},{v:")",isDelimiter:true,isNew:true}]);E._delaySetTextCaretPos(E.itemsContainerNode.childNodes[AF]);},AE||50);},clearTokens:function l(E){this.set("items",E||[]);this._saveRangeInfo=null;this._delaySetCaretPos(this.editNode,false);},focus:function r(){var AE=this.ctxtBuilder.itemWidgets,E=AE.length;this._delaySetCaretPos(E>0?AE[E-1].domNode:this.editNode,false);},startTokenSuggestion:function x(E){this.endTokenSuggestion();if(!E){E=this.findObjectToken();}if(E&&!E.isDelimiter()){E.set("active",true);this._saveActiveToken=E;this.showSuggestion(this.getSearchPattern());}if(!E||this.getSearchPattern().length===0){this.hideSuggestion();}},browseItemVisible:true,folderLinksContextId:25,browsableTypes:[L.TP.FOLDER,L.TP.FACT,L.TP.ATTR,L.TP.FUNCTION,L.TP.FILTER,L.STP.PROMPT_OBJECTS,L.TP.ATTR,L.TP.DIM,L.TP.METRIC,L.TP.ROLE].join(","),getSearchPattern:function U(){var AE=this._saveActiveToken,AG=AE&&AE.data.v,E=AG&&AG.length;if(E>2){if(AG.charAt(0)==="["){AG=AG.substring(1);}if(AG.charAt(AG.length-1)==="]"){AG=AG.substring(0,AG.length-1);}}if(AE&&AE.data.ift){var AF=AE.data.v,AH=AF&&AF.indexOf("@");if(AH>=0){AG=AF.substring(AH);}}return AG||"";},getSuggestionPos:function b(){var E=this._saveActiveToken,AE=null,AG,AF;if(E){AG=E.data&&E.data.ift;AF=mstrmojo.dom.position(E.domNode,true);AE={left:Math.round(AF.x+(AG?AF.w:0))+"px",top:Math.round(AF.y+AF.h)+"px",zIndex:100};}return AE;},item2textCss:function J(AE){var E=(this._super&&this._super(AE))||{4:"m",11:"fx",12:"a",13:"fc",43:"tr",21:"afm","-99":"br"}[AE.t]||"";E+=AE.da?" da":"";E+=(AE.dm||AE.um)?" dm":"";E+=AE.de?" de":"";E+=AE.fs&&AE.fs.length&&AE.fs.some(function(AF){return AF.fgr>0;})?" g":"";return E;},onBrowserOpen:function n(){this.editNode.blur();},onSuggestionItemSelect:function u(AE){var E=this._saveActiveToken;this.endTokenSuggestion();if(E){if(E.data.ift&&AE.t===21){E.setFormInfo(AE);}else{E.setItemInfo(AE);if(AE.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){this.insertParenthesisTokens();}}this._delaySetCaretPos(E.domNode,false);}this.closePopup();},_delaySetCaretPos:function z(E,AF){var AE=this.editNode,AG=this,AH=function(){AE.focus();AE.focus();D.collapseOnNode(E,AF);AG._saveRangeInfo=D.getRangeInfo();};window.setTimeout(AH,0);},_delaySetTextCaretPos:function z(E,AH){var AE=this.editNode,AF=this,AG=function(){AE.focus();AE.focus();D.collapseOnTextNode(E,AH);AF._saveRangeInfo=D.getRangeInfo();};window.setTimeout(AG,0);},getCandidatesThroughTaskCall:function W(AE,E){AE.objectType="11,12,13,43,4";AE.rootFolderType=39;AE.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getMetricComponents(AE,E);},filterCandidates:function k(AH,AG,E){var AE=this._saveActiveToken,AI=AE&&(AE.data.oi||AE.data.at),AF;if(AI&&AE.data.ift){E=E||this.suggestCount;AG=mstrmojo.string.regEscape(AG);AF=h.filter(AH,function(AJ){return AJ.t===21&&AJ.attid===AI.did&&(new RegExp("^"+AG,"i")).test("@"+AJ.n);},{max:E});}else{AF=h.filter(AH,function(AJ){return AJ.t!==21;});AF=this._super(AF,AG,E);}return AF;},endTokenSuggestion:function AA(AE){var E=this._saveActiveToken;if(E){if(AE){this.hideSuggestion();}E.set("active",false);this._saveActiveToken=null;}},widgetDeleteTokens:function f(AM){var AE=AM.startOffset,E=AM.endOffset,AP=M.findWidget(AM.startContainer),AN=M.findWidget(AM.endContainer),AI=this.itemIndex(AP.data),AG=this.itemIndex(AN.data),AJ=[],AK=D.getEdgeInfo(AM.startContainer,AE),AO=D.getEdgeInfo(AM.endContainer,E),AL=(AK===c.EDGE_BEGIN?AI:AI+1),AF=(AO===c.EDGE_END?AG:AG-1),AH;if(AP===AN){if((AK===c.EDGE_BEGIN)&&(AO===c.EDGE_END)){this.remove(AI);AN=this.ctxtBuilder.itemWidgets[AI===0?AI:AI-1];if(AN){D.collapseOnNode(AN.domNode,AI===0);}else{D.collapseOnNode(this.editNode,true);}}else{AP.spliceContent(AE,E-AE);D.collapseOnTextNode(AN.domNode,AE);}}else{for(AH=AL;AH<=AF;AH++){AJ.push(AH);}this.remove(AJ);if(AK===c.EDGE_MIDDLE){AP.spliceContent(AE);}if(AO===c.EDGE_MIDDLE){AN.spliceContent(0,E);}if(AK===c.EDGE_BEGIN){AP=this.ctxtBuilder.itemWidgets[AI===0?AI:AI-1];}if(AP){D.collapseOnNode(AP.domNode,AI===0);}else{D.collapseOnNode(this.editNode,false);}AI=(AK===c.EDGE_BEGIN)?AI-1:AI;this.checkMergeTwoTokens(AI,AI+1);}this.editNode.focus();},oncandidatesChange:function j(){var AE=this.candidates,E=(AE&&AE.items)||[];if(!this.noCache&&AE&&AE.isComplete){this.suggestCount=this.REQUEST_THRESHOLD=E.length;}else{this.suggestCount=mstrmojo.ME.MetricDataService.suggestCount;this.REQUEST_THRESHOLD=20;}},nudge:function(E){var AE=this.getSuggestionPos();if(AE){E.set("left",AE.left);E.set("top",AE.top);}},pretokensModify:function K(){this.tokensCache=this.tokensCache.slice(0,this.tokensCachePointer);var E=this.findObjectToken();this.tokensCache.push({items:H.clone(this.items),rInfo:D.getRangeInfo(),idx:E!==null?this.itemIndex(E.data):-1});this.tokensCachePointer=this.tokensCache.length;},widgetHandleUndoRedo:function d(AF){var AG,E,AE=function(AI){if(!AI){return ;}AI=AI||{};this.set("items",H.clone(AI.items));var AL=this.ctxtBuilder.itemWidgets,AH=AL[AI.idx],AK=AH&&AH.domNode||this.editNode,AJ=AI.rInfo;this._delaySetTextCaretPos(AK,AJ&&AJ.startOffset||0);};switch(AF){case"undo":AG=--this.tokensCachePointer;if(AG>-1){E=this.tokensCache[AG-1];AE.call(this,E);}else{this.tokensCachePointer=1;}break;case"redo":AG=this.tokensCachePointer++;if(AG>-1&&AG<this.tokensCache.length){E=this.tokensCache[AG];AE.call(this,E);}else{this.tokensCachePointer=Math.min(Math.max(this.tokensCachePointer,1),this.tokensCache.length);}break;}},resetTokensCache:function T(){this.tokensCache=[];this.tokensCachePointer=-1;this.tokensCacheInitilized=false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.mstr.ui.IncFetchOBList");var O=mstrmojo.hash,W=mstrmojo.func,L=mstrmojo.meta.TP,F="5CECE58CC1D549F890EB61C4DB2156A3",T="E0CCB9CF22104A489CBE78D974AFD19E",Q=mstrmojo.chart.model.enums.EnumDSSObjectType,K=mstrmojo.array,D=mstrmojo.dom,X=function(f,g,a){var d=f.scrollableIncFetch,c=d?"mstrmojo.mstr.ui.IncFetchOBList":"mstrmojo.OBList",e={scriptClass:c,items:g.items,multiSelect:a};if(d){e.browseConfig={blockBegin:g.bb,blockCount:g.bc,totalSize:g.sz,folderLinksContextId:f.folderLinksContextId,rootFolderID:g.did,browsableTypes:f.browsableTypes,browsableViewMedias:f.browsableViewMedias,dataProvider:f.dataProvider};e.onwaitingChange=function(){if(f.booklet){f.booklet.set("waiting",this.waiting);}};}var b=mstrmojo.insert(e);b.render();return b;},A=function(c,d,a){var b=mstrmojo.ObjectBrowser.widgetHandler||X;return b(c,d,a);},N={success:function(c){var d=this.ob,b=c.items,e=d.pageCache[d.currentPage],a=e._w;e.items=b;a.set("items",b);this.ob=null;this.item=null;window.clearTimeout(d._btm);d.booklet.set("waiting",false);if(d.scrollableIncFetch&&a.scrollNode){a.initScroll();a.updateScrollbars();}},failure:function(a){window.alert(a.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},S=function(f,e,c){var d=c?-1:1,b=f.pageCache.length,g;for(g=f.currentPage+d;g<b&&g>=0;g+=d){var a=f.pageCache[g];if(a._k===e.k){return{steps:g-f.currentPage,cache:a};}}return null;},C=function(e,d,c,f){var g=e.currentPage+1,b=e.pageCache.length,a;for(a=g;a<b;a++){e.pageCache[a]._w.destroy();delete e.pageCache[a].items;}e.pageCache=e.pageCache.slice(0,g);f._w=c;f._k=d.k;e.pageCache[g]=f;e.cacheChange();},H=function(b){var a=mstrmojo.hash.walk("anc.items.0.items",b);this.set("canGoUp",!(!b.pf||!a));},I=function(e,d,f,c,b){delete e._btm;var a;if(!c){a=A(e,f,e.multiSelect);a.attachEventListener("change",e.id,"navigate");if(e.useDblSelect||e.useBothSglDblSelect){a.attachEventListener("dblclick",e.id,"dblselect");}}else{a=f._w;}e.obList=a;e.booklet.turn(a,b>0);window.setTimeout(function(){e.onBrowsing=false;},300);if(!c){C(e,d,a,f);}e.set("currentFolder",f);e.set("currentPage",e.currentPage+b);e.updateUpButton(f);if(e.scrollableIncFetch&&a.scrollNode){a.initScroll();a.updateScrollbars();}},P=function(c,b,a){var d=S(c,b,false);d=d||S(c,b,true);if(!d){window.clearTimeout(c._btm);c._btm=window.setTimeout(function(){c.booklet.set("waiting",true);},300);a.ob=c;a.item=b;c.getDataProvider().fetchFolderContents(c,b,a);}else{I(c,b,d.cache,true,d.steps);}},B=function(b,c,d,a){P(b,{fid:b.pageCache[b.currentPage].did,blockBegin:c,searchPattern:d,recursive:a},N);},J={success:function(b){var c=this.ob;if(c){window.clearTimeout(c._btm);if(!b.items){b.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var a=function e(f){var j=f.length,g;for(g=0;g<j;g++){var h=f[g];if(h.did===F||h.did===T){h.n=(h.did===F)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(h.items){a(h.items);}}};if(b.did===F||b.did===T){b.n=(b.did===F)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(b.anc&&b.anc.items){a(b.anc.items);}}if(b&&b.items&&c.browsableViewMedias){var d={};K.forEach(c.browsableViewMedias.split(","),function(f){d[parseInt(f,10)]=true;});b.items=K.filter(b.items,function(f){return(f.t!==Q.DssTypeDocumentDefinition)||d[f.dvm];});}if(b&&b.items&&mstrApp&&mstrApp.isSingleTier){b.items=K.filter(b.items,function(f){return(f.st!==772);});}if(b.did&&this.item.k!==b.did){this.item.k=b.did;}I(c,this.item,b,false,1);this.ob=null;this.item=null;}},failure:function(a){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(a);}else{if(a.getResponseHeader){mstrmojo.alert(a.getResponseHeader("X-MSTR-TaskFailureMsg"));}else{mstrmojo.alert(a.message);}}},complete:function(){if(this.ob){this.ob.onBrowsing=false;}}},Z=function(c){var b=c.pageCache.length,a;for(a=0;a<b;a++){c.pageCache[a]._w.destroy();}c.pageCache=[];c.currentPage=-1;c.cacheChange();},M=function(d,c,e){var a=d.onBrowseFolder;if(a){a[0][a[1]](c);}if(c&&parseInt(c.acg,10)===33){return ;}var b={};if(c){b.k=c.did;b.fid=c.did;}else{if(d.rootFolderID){b.k=d.rootFolderID;b.fid=d.rootFolderID;}else{if(d.rootFolderType){b.k=d.rootFolderType;b.fty=d.rootFolderType;}else{if(d.folderLinksContextId){b.k=d.folderLinksContextId;}}}}P(d,b,W.wrapMethods(e,O.copy(J)));},V=function(f,a,c){if(!c){return a;}var d=f.showCompletePath,h=a[0],e,b;while(h){var g;for(g=c.length-1;g>=0;g--){if(h.did===c[g].did){c.splice(g,1);h._isSc=true;}}b=h;h._open=true;h=h.items;h=h&&h[0];if(!h){b.lastLeaf=true;}}if(!d){h=a[0];while(h){if(h._isSc){a[0]=h;break;}h=h.items;h=h&&h[0];}}return a.concat(c);},U=function(b,a,c){b._naviInfo=V(b,a,c);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,browsableViewMedias:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,upButtonVisible:false,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,minSearchLength:2,showCompletePath:true,multiSelect:false,onCloseCB:null,onSelectCB:null,onBrowseFolder:null,scrollableIncFetch:false,useBothSglDblSelect:false,displaySaveLabel:false,useOldSearch:false,getDataProvider:function(){if(!this.dataProvider){this.dataProvider=mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"});}return this.dataProvider;},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"saveLabel",scriptClass:"mstrmojo.Label",cssClass:"msrmojo-save-label",text:mstrmojo.desc(3178,"Save in:"),bindings:{visible:"this.parent.parent.displaySaveLabel"}},{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var a=this.opener.parent.parent,d=this.tree,c=a._naviInfo,b=this.parent.parent.parent.extraDDItems;if(d.items!==c){d._pup=this;this.ob=a;if(b){K.forEach(b,function(e){e.isExtra=true;});c=c.concat(b);}d.set("items",c);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(e,a,b){var d=mstrmojo.WidgetTree.prototype.itemFunction(e,a,b);if(e.isExtra){if(e.cssClass){d.cssClass=e.cssClass;}d.onmousedown=e.onmousedown||mstrmojo.emptyFn;return d;}if(e._open){d.state=1;}d._ll=!!e.lastLeaf;d._pup=b._pup;d.onmousedown=function(f){var g=mstrmojo.dom.eventTarget(f.hWin,f.e),h=this._pup;if(g===this.domNode||g===this.textNode){if(!this._ll){M(h.ob,this.data);}h.close();}};d.markupMethods=O.copy(d.markupMethods);d.markupMethods.onstateChange=function(){var f=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[f]||"closed");this.itemsContainerNode.style.display=(f===1)?"block":"none";};d.useRichTooltip=true;var c=d.postBuildRendering;d.postBuildRendering=function(){if(c){c.call(d);}if(d.textNode.parentNode.clientWidth){d.textNode.style.width=(d.textNode.parentNode.clientWidth-20)+"px";}};d.premouseover=function(h){if(this.useRichTooltip){var g=this.textNode;if(g.clientWidth<g.scrollWidth){var f=D.position(g);this.richTooltip={areaId:this.id,cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.data[this.itemDisplayField],top:f.y-2,left:f.x+f.w+6};}else{this.richTooltip=null;}mstrmojo.dom.stopPropogation(h.hWin,h.e);}return true;};return d;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up One Level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:"this.parent.parent.canGoUp",visible:"this.parent.parent.upButtonVisible"}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:"this.parent.parent.closeable"},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:"this.parent.fishEyeVisible"}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",cssClass:"searchBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 3px 0; ",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,forceResetCache:true,bindings:{minSearchLength:"this.parent.parent.minSearchLength",quickSearch:"this.parent.parent.quickSearch"},serverRequest:function(a,b){this.parent.parent.getDataProvider().serverRequest(a,b);},preFetch:function(){this.objectTypes=this.parent.parent.browsableTypes||this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);},onUpdateSearchParams:function G(c){var b=this.parent.parent,a=b.sId;if(a){c.sessionState=a;}if(b.useOldSearch){c.quickSearch=0;c.nameWildcards=1;c.sortKey=6;}}}],bindings:{visible:"this.parent.searchVisible"}},{scriptClass:"mstrmojo.Booklet",cssClass:"mstrmojo-OB-booklet",alias:"booklet",hasAnimation:false,bindings:{scrollableIncFetch:"this.parent.scrollableIncFetch"}},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(b){var d=parseInt(this.height,10),a=this.np>1,c={target:this.domNode,props:{height:{start:(a?0:d),stop:(a?d:0),suffix:"px"}},onEnd:function(){if(a){this.target.style.overflow="visible";}}},e=new mstrmojo.fx.AnimateProp(c);this.domNode.style.overflow="hidden";mstrmojo.css.toggleClass(this.parent.domNode,"show-inc-fetch",this.visible);e.play();},onifsChange:function(a){var b=this.np;mstrmojo.hash.copy(a.value,this);if(this.np>1){this.children=null;this.refresh();}if((b<=1&&this.np>1)||(b>1&&this.np<=1)||(b===0&&this.np>0)){this.set("visible",this.np>1);}this.cssText="";}}],destroy:function Y(){Z(this);if(this._super){this._super();}},postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}var c=this.searchUpBar;if(c&&c.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var a=this.obSearchBox.contentWidget||this.obSearchBox;if(!this.scrollableIncFetch){a.attachEventListener("ifsChange",this.id,function(d){if(!this.scrollableIncFetch){this.obIncFetch.set("ifs",d.value);}});}}if(!this.scrollableIncFetch&&this.obIncFetch){var b=this.obIncFetch;b.attachEventListener("fetch",this.id,function(d){b.cp=d.v;b.children=null;b.refresh();B(this,(d.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}mstrmojo.css.addClass(this.domNode,"mstrmojo-ObjectBrowser");},onSearchItemsChange:function(b){var c=b.value,a=this.pageCache[this.currentPage]._w;if(!c||c.length===0){c=[{did:"empty",n:"("+mstrmojo.desc(2210,"")+")",t:"e"}];}else{if(this.browsableViewMedias){var d={};K.forEach(this.browsableViewMedias.split(","),function(e){d[parseInt(e,10)]=true;});c=K.filter(c,function(e){return(e.t!==Q.DssTypeDocumentDefinition)||d[e.dvm];});}}a.set("items",c);},navigate:function(h){var a=h.src,i=a.selectedItem,c=this.multiSelect,f=c&&a.getSelectedItems(),g=this,b=h.added&&h.added.length,e=h.removed&&h.removed.length,d=c?f.length===1&&(!e||b):!!i;if(d&&i.did==="empty"){return ;}if(d&&parseInt(i[L],10)===8){if(!this.onBrowsing){this.onBrowsing=true;M(this,i);}}else{if((i&&(!this.useDblSelect||this.useBothSglDblSelect))||f){this.select(c?f:i);}}},browseFolder:function(a,b){M(this,{did:a,n:b});},onFishEyeChange:function(a){this.goToPage(a.value);},goToPage:function(a){if(a<this.pageCache.length&&a!==this.currentPage){var c=a>this.currentPage,b=this.pageCache[a];this.set("currentPage",a);this.booklet.turn(b._w,c);this.set("currentFolder",b);H.call(this,b);}},oncurrentPageChange:function(a){if(this.fishEye){this.fishEye.setSelectedIndex(a.value);}var b=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(b.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",b.items||[]);this.obSearchBox.set("totalSize",b.sz);this.obSearchBox.set("rootID",b.did);this.obSearchBox.clearSearch();}if(!this.scrollableIncFetch&&this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(b.sz/b.bc)+((b.sz%b.bc>0)?1:0),cp:Math.floor(b.bb/b.bc)+((b.bb%b.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(b,a){O.copy(b,this);if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}Z(this);M(this,undefined,a);},close:function(){var b=this.ctx||this,a=b.onCloseCB;if(a){a[0][a[1]]();}b.set("visible",false);},select:function(b){var a=this.onSelectCB;if(a){a[0][a[1]](b);}if(this.closeOnSelect){this.close();}},dblselect:function R(b){var c=b&&b.src.selectedItem;if(!c||(c&&c.did==="empty")||c[L]===8){return ;}if(this.useBothSglDblSelect){var a=this.onDblSelectCB;if(a){a[0][a[1]](c);}if(this.closeOnSelect){this.close();}}else{this.select(c);}},goUp:function(){if(this.canGoUp){M(this,{did:this.currentFolder.pf});}},updateUpButton:function E(a){H.call(this,a);},oncurrentFolderChange:function(a){var b=a.value;U(this,b.anc.items,b.sc);},refreshContent:function(a){B(this,a);},onError:null,onheightChange:function(){var a=["titleBar","fishEye","searchUpBar","obIncFetch"],c=0,b;for(b in a){c+=parseInt(this[a[b]].domNode.offsetHeight,10);}this.booklet.set("height",parseInt(this.height,10)-c+"px");}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetTree","mstrmojo.expr","mstrmojo.AndOrNode","mstrmojo.ConditionNode");var F=mstrmojo.expr,B=F.ET;function A(G){var I=G&&G.src,J=I&&I.data,H=J&&J.et;return(H in F.ETs);}mstrmojo.FilterExpr=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.FilterExpr",allowDrop:A,renderOnScroll:false,itemIdField:null,nodeClassMap:{14:mstrmojo.AndOrNode,"*":mstrmojo.ConditionNode},onBlankClick:function(G){this.clearTreeSelect();},onnodemousedown:function(H){var I=mstrmojo.dom.eventTarget(H.hWin,H.e),J=H.src,G=J.listMapper.findIndex(J,J.itemsContainerNode,I),K=G>=0?J.ctxtBuilder.itemWidgets[G]:null;if(!K||(K.isSelectableArea&&!K.isSelectableArea(I))){this.onBlankClick(H);}},getItemIdentityProp:function(G){return G.et;},itemFunction:function(L,I,M){var H=M.tree,J=H.getItemConfig(L,I,M),K=H.nodeClassMap,G=K[H.getItemIdentityProp(L)]||K["*"];return G&&(new G(J));},getItemConfig:function(J,G,K){var H=(J.et===B.ANDOR),I=K.tree||K;return{data:J,tree:I,parent:K,bindings:{prefixedAndOrEditable:"this.parent.editable"},itemFunction:(H)?K.itemFunction:null,draggable:H?I.draggable:false,dropZone:H?I.dropZone:false,allowDrop:H&&I.dropZone?I.allowDrop:null,allowCopy:H?I.allowCopy:false,editable:I.isEditable?I.isEditable(J):I.editable,makeObservable:H&&K.makeObservable,onclick:I.onnodeclick,onadd:I.onnodeadd,onremove:I.onnoderemove};},getDragData:function(G){var I=this._super(G);if(I&&!I.html){var H=I.et&&F.ET2TGT[I.et];I.html=H?I[H]&&I[H].n||"":I.n||"";}return I;},newCondition:function E(K){K=K||{et:B.AQ};var J=this.selectionParentNode,G;J=(J&&J.hasRendered)?J:this;if(J!==this){G=J.add([K]);}else{var I=this.addCondition([K],null,true);G=I.index;J=I.widget;}var H={widget:J,index:G,data:K};if(this.onNew){this.onNew(H);}return H;},addCondition:function D(I,K){var L=this.items,H=L&&L.length,N=I&&I.length;if(!N){return null;}var J,G;if(H&&L[0].et===B.ANDOR){J=this.ctxtBuilder.itemWidgets[0];G=J.add(I,null);}else{if(!H&&(N===1)){J=this;G=0;this.add(I,0);}else{if(H){var M=L[0];this.remove(M);I.unshift(M);}this.add([{et:B.ANDOR,fn:F.FN.AND,nds:I}],0);J=this.ctxtBuilder.itemWidgets[0];G=H?1:0;}}return{widget:J,index:G};},addSingleCondition:function C(H,G){var I=this.addCondition([H],G);return I.widget.ctxtBuilder.itemWidgets[I.index];},ondrop:function(J){if(this._super){this._super(J);}var H=this.items,G=H&&H.length,I=H.concat();if(G>1){if(H.remove){H.remove(0,H.length);}else{this.set("items",null);}this.add([{et:B.ANDOR,fn:F.FN.AND,nds:I}],0);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.AndOrNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.expr","mstrmojo.dom","mstrmojo.array","mstrmojo.css");var L=mstrmojo.expr,N=mstrmojo.dom,C=mstrmojo.array,A=mstrmojo.css,F=mstrmojo.fe._IsRelationTreeNode.createSetHtml;var M=function(){var T="noRelationOperator",P=this[T],R=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],S=mstrmojo.array.filter(R,function(U){return U&&U[T]!==P&&U.data.et!==L.ET.RLS;}),O=S.length;for(var Q=0;Q<O;Q++){S[Q].set(T,P);}};mstrmojo.fe.AndOrNode=mstrmojo.declare(mstrmojo.AndOrNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.AndOrNode",markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',getPrefixAndOrToolsMarkup:function(){return(F+this._super());},markupSlots:mstrmojo.hash.copy({createSetNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupSlots)),markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){A.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupMethods)),removeSet:function G(P){var O=P.childIndex(),Q=P.data,R=[Q];if(O>=0){this.remove(O,true);if(Q.nds&&Q.nds.length>0){R=Q.nds;if(Q.not){R[0].not=true;}}else{delete Q.dmy;delete Q.relation;delete Q.applySubExpr;delete Q.relation;delete Q.useSchema;delete Q.dmt;}this.add(R,O);this.consolidate(false);}},createSet:function E(Q,O){var P=this._ndsToMove(this,Q);if(!P){return ;}this.remove(P.idxs,true);var U=P.nds,T;if(U){if(U.length>1){var S={et:L.ET.ANDOR,nds:U};S.fn=this.data.fn;U=[S];T=S.nds[0].not;}else{var V=U[0];if(V&&V.not&&V.et===L.ET.ANDOR){T=V.not;delete V.not;}}}if(O&&O.rq){var R;if(O.isMetric){R=O.cq;mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],O.rq,R);}else{R=O.rq;R.nds=U;if(T){R.not=T;}}this.add([R],P.idxs[0]);}this.consolidate(false);},preclick:function H(O){var R=null,Q=N.eventTarget(O.hWin,O.e),P=this._super(O);if(N.contains(this.createSetNode,Q,true)&&!this.noRelationOperator){R="createSetOpt";}O.part=R||O.part;return P;},preadd:function I(O){if(this._super){this._super(O);}this.updateRelationOperator();},preremove:function K(O){if(this._super){this._super(O);}this.updateRelationOperator();},consolidate:function B(){this._super();this.updateRelationOperator();},postBuildRendering:function J(){var O=this._super();this.updateRelationOperator();return O;},updateRelationOperator:function D(){var O=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],P=!!C.filterOne(O,function(R){return R&&(R.data.et===L.ET.RLS||(R.data.et===L.ET.ANDOR&&R.noRelationOperator));}),Q=this.parent;this.set("noRelationOperator",P);M.call(this);if(Q&&Q.hasRendered&&Q.updateRelationOperator){Q.updateRelationOperator();}},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasPopup","mstrmojo.fe.AndOrNode","mstrmojo.fe.DynamicNode","mstrmojo.ConditionNode","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.hash","mstrmojo.expr");var D=mstrmojo.css,A=mstrmojo.dom,G=mstrmojo.hash,C=function(L){var M=L.data,K=M.dmy&&M.dmy.uts||[],I=K.length,H=[],J;for(J=0;J<I;J++){H.push(K[J].n);}return'<span class="mstrmojo-text">'+H.join(", ")+"</span>";};mstrmojo.fe.RelationNode=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.fe.RelationNode",markupString:'<div id="{@id}" class="mstrmojo-relation {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-relation-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-relation-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}"><span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-relationNode"><span class="mstrmojo-relationNode-inf"><span class="mstrmojo-relation-prefix-text">'+mstrmojo.desc(2790,"Set of").replace(/##/g,"")+'</span><span class="mstrmojo-textset"  mstrAttach:click></span><span class="mstrmojo-relation-postfix-text">'+mstrmojo.desc(2793,"Where").replace(/##/g,"")+'</span><span class="mstrmojo-relation-convert-text"  mstrAttach:click >'+mstrmojo.desc(null,"Convert to Condition")+'</span><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'"onclick="mstrmojo.all[\'{@id}\'].del()" /></span><div class="mstrmojo-relation-childTreeNode" style="position:relative;"></div></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},relationNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1];},convertNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[3];},containerNode:function(){return this.domNode.childNodes[1].childNodes[1];}},markupMethods:{onprefixedAndOrEditableChange:function(){D.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){D.toggleClass(this.relationNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=C(this);}},noRelationOperator:true,children:[{scriptClass:"mstrmojo.fe.RelationFilterExprTree",alias:"childTree",ignoreLayout:true,dropZone:false,draggable:false,nodeClassMap:{14:mstrmojo.fe.AndOrNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},onNew:function(H){this.parent.tree.onNew(H);},getItemConfig:function(K,H,L){var I=mstrmojo.fe.RelationFilterExprTree.prototype.getItemConfig.call(this,K,H,L),J=L.tree||L;return G.copy({tree:J,rootTree:this.parent.tree,noRelation:true,inRelation:true},I);},prenodeclick:function(H){if(!H||!H.part){return ;}var I=this.rootTree;if(I&&I.onnodeclick&&this.editable){H.editor=I.editor;I.onnodeclick.call(this,H);}}}],premousedown:function(H){if(this._super){this._super(H);}var I=A.eventTarget(H.hWin,H.e);if(!A.contains(this.childTree.domNode,I,true)){this.childTree.clearTreeSelect();}},preselectedChange:function(H){if(!H.value){this.childTree.clearTreeSelect();}},init:function(H){this._super(H);var I=this.data;if(I){delete this.data;this._set_data(null,I);}},_set_data:function(K,H){var I=this.data,J=(I!==H);if(J){this.data=H;if(H){this.childTree.set("items",H.nds||[H]);}}return J;},isSelectableArea:function(H){return mstrmojo.dom.contains(this.relationNode,H,true);},preclick:function E(H){var J=null,I=A.eventTarget(H.hWin,H.e);if(A.contains(this.prefixNode,I,true)){J="andor";}else{if(A.contains(this.textNode,I,true)){J="createSet";}else{if(A.contains(this.convertNode,I,true)){this.parent.removeSet(this);return false;}}}H.part=J;},del:function B(){var H=this.parent;if(H&&H.remove&&this.data){H.remove(this.data);}},newCondition:function F(H){this.childTree.newCondition(H);},avatarCssCls:"mstrmojo-FE mstrmojo-relationNode",getAvatarNode:function(){return this.relationNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.hash","mstrmojo.FilterExpr");var D=mstrmojo.hash,B=mstrmojo.expr.ET;mstrmojo.fe.FilterExprTree=mstrmojo.declare(mstrmojo.FilterExpr,null,{scriptClass:"mstrmojo.fe.FilterExprTree",allowCopy:false,containerResizable:false,draggable:true,dropZone:true,editable:true,makeObservable:true,onConditionEdit:mstrmojo.emptyFn,modifyConditionNode:function(G,F){var H=G.data,E=H.isNew;D.copy(D.clone(F),D.clear(H));delete H.isNew;G.paint();if(H.et===B.MQ||H.et===B.MC){G.set("noCreateSet",true);}if(G.tree.onConditionEdit){G.tree.onConditionEdit(G,E);}},getItemConfig:function(H,E,I){var F=this._super(H,E,I),G=I.tree;return D.copy({onclick:G.prenodeclick,containerResizable:G.containerResizable,ondragend:G.ondragend,ondrop:G.ondrop},F);},ondragenter:function A(E){this.dropCuePos={left:0,top:0,idx:0,idxActual:0};this._super(E);},ondragend:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondragend.call(this,E);}},ondrop:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondrop.call(this,E);}},isEditable:function C(F){if(!this.editable){return false;}var E=false;switch(F&&F.et){case B.R:case B.F:E=false;break;case B.ANDOR:case B.MQ:case B.AQ:case B.AL:case B.AC:case B.MC:case B.AE:E=true;break;case B.XML:E=!F.xml||!!F.ph;}return E;},prenodeclick:function(E){if(!E||!E.part){return ;}if(E.part!=="createSet"&&E.part!=="createSetOpt"&&!(E.part==="andor"?this.prefixedAndOrEditable:this.editable)){return ;}var F=this.tree;if(F.onnodeclick){F.onnodeclick.call(this,E);}},getSelectedItemWidget:function(){var E=function(K){var I=K&&K.ctxtBuilder&&K.ctxtBuilder.itemWidgets,G=K.selectedIndex,F=I&&I.length||0;if(!I){return ;}if(G===-1){for(var H=0;H<F;H++){var J=E(I[H]);if(J){return J;}}}else{return I[G];}};return E(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.Label","mstrmojo.Obj","mstrmojo.ui.Checkbox","mstrmojo.ui.CheckList","mstrmojo.warehouse.EnumObjectTypes");var G=mstrmojo.expr,C=G.ET,B=mstrmojo.array,E=mstrmojo.string,F=mstrmojo.warehouse.EnumObjectTypes,D=mstrmojo.mstr.EnumNodeDimty;mstrmojo.fe.CreateSetEditor=mstrmojo.declare(mstrmojo.Editor,null,{onOpen:function(){var M=this.model,P=this.condition.data,N=!P.m,J=this.attrsBox.attrsList,H=this.relBox.relPd,Q=[{n:mstrmojo.desc(12037,"System Default"),t:-1,did:"default"}].concat(M.metrics),I=this.appQual;J.set("items",M.attrs);mstrmojo.array.forEach(["relBox","appQual"],function(R){this[R].set("visible",N);},this);if(P.dmt===4&&P.dmy.uts){var K={};B.forEach(P.dmy.uts,function(S){var R=B.find(M.attrs,"did",S.utgt.did);if(R>=0){K[R]=true;}});J.set("selectedIndices",K);}if(N){H.set("items",Q);if(P.relation&&P.relation.guide){var L=P.relation.guide,O=B.find(Q,"did",L.did);H.set("selectedIndex",O>=0?O:0);}else{H.set("selectedIndex",0);}I.set("checked",!!P.applySubExpr);}},onOK:function(){var O=this.model,R=this.condition,T=this.condition.data,L=this.attrsBox.attrsList,H=this.relBox.relPd,J=this.appQual;var V=L.getSelectedItems(),I=[];B.forEach(V,function(X){I.push({utgt:{n:X.n,did:X.did},utp:G.DMY_TP.ATTR,agg:1,flt:2,gb:true,rps:0,n:X.n});});var U;if(H.selectedIndex>0){var M=H.items[H.selectedIndex];U={n:M.n,did:M.did,t:F.METRIC,st:1024};}var K;if(T.et===15){T.dmt=D.NodeDimtyOutputLevel;T.dmy=T.dmy||{};T.dmy.uts=I;K=T.relation=T.relation||{};if(U){K.guide=U;T.useSchema=false;}else{delete K.guide;delete K.rsTp;delete K.joTp;delete K.paTp;delete K.erTp;T.useSchema=true;}T.applySubExpr=J.checked;R.set("data",T);}else{var S={et:15};S.dmt=D.NodeDimtyOutputLevel;S.dmy={};S.dmy.uts=I;K=S.relation={};if(U){K.guide=U;}else{S.useSchema=true;}S.applySubExpr=J.checked;var N=R,P={rq:S,cq:T},Q=[R.childIndex()];if(T.et===C.ANDOR){if(T.nds&&T.nds.length>2){var W=O.childIdx;Q=[W,W-1];}else{N=R.parent;}}else{N=R.parent;P.isMetric=!!T.m;}N.createSet(Q,P);}},children:[{scriptClass:"mstrmojo.Box",alias:"attrsBox",cssClass:"Attributes-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14613,"Select attributes to create the set"),cssClass:"Label"},{scriptClass:"mstrmojo.ui.CheckList",alias:"attrsList",cssClass:"CheckList"}]},{scriptClass:"mstrmojo.Box",alias:"relBox",cssClass:"RelatedBy-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12036,"Related by"),cssClass:"Label",cssDisplay:"inline-block"},{scriptClass:"mstrmojo.ui.Pulldown",alias:"relPd",cssClass:"Pulldown",cssDisplay:"inline-block",onitemSelected:function A(H){}}]},{scriptClass:"mstrmojo.ui.Checkbox",alias:"appQual",cssClass:"AppQual-CheckBox",postBuildRendering:function(){this.domNode.innerHTML=E.encodeHtmlString(mstrmojo.desc(12038,"Apply this qualification independently of the relationship filter"));}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssText:"float: right; border-collapse: separate; display: table;",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(2397,"OK"),onclick:function(){var H=this.editor;H.onOK();H.close();},bindings:{enabled:function(){var I=this.parent.parent.attrsBox.attrsList,H=this.parent.parent.attrsBox.attrsList.selectedIndices;return I.getSelectedItems().length>0;},editor:"this.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.editor.close();},bindings:{editor:"this.parent.parent"}}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ObjectBrowser");var H=mstrmojo.array;var E=[257,1024,3072,12032];mstrmojo.vi.ui.editors.ObjectPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.ObjectPicker",cssClass:"mstrmojo-vi-ObjectPicker",zIndex:9,title:mstrmojo.desc(11496,"Select Object"),help:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:4,supportedTypes:H.hash(E),item:null,OKFn:null,children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",closeable:false,browsableTypes:"8,"+E.join(","),closeOnSelect:false,showCompletePath:false,searchVisible:false,scrollableIncFetch:true,bindings:{rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId"}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btnHBox",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(1442,"OK"),onclick:function C(){var J=this.parent.parent;this.parent.parent.close({item:J.item});var I=J.OKFn;if(I){I(J.item);}J.set("item",null);},bindings:{enabled:function B(){return !!this.parent.parent.item;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(2399,"Cancle"),onclick:function C(){var I=this.parent.parent;this.parent.parent.close();I.set("item",null);}}]}],preBuildRendering:function A(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];},postBuildRendering:function D(){if(this._super){this._super();}this.browse();},onOBSelect:function F(I){this.set("item",((this.supportedTypes[I.t]||this.supportedTypes[I.st])?I:null));},browse:function G(){this.ob.browse();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ME.TokenInputBox");mstrmojo.requiresDescs(13542,13543);var B=mstrmojo.array;var L={VALID:0,UNKNOWN:1,VALIDATING:2,ERROR:3,AMBIGUITY:4},G={0:"valid",1:"unknown",2:"validating",3:"error",4:"ambiguity"},H={0:mstrmojo.desc(9565,"Valid Metric Formula."),1:mstrmojo.desc(9106,"Require Validation?"),2:mstrmojo.desc(9566,"Validation in Progress..."),3:mstrmojo.desc(9567,"Validation Failed with Syntax Error!"),4:mstrmojo.desc(9568,"Validation Failed with Object Ambiguity!")};function D(O){if(!O){return L.VALID;}return{"-2147214845":L.ERROR,"-2147214846":L.AMBIGUITY}[O]||L.ERROR;}mstrmojo.ME.MetricEditBox=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.MetricEditBox",vStatus:L.VALID,iStatus:"",showStatus:true,browseItemVisible:true,absorbAmbiguity:true,isObjectVisible:function(O){return true;},markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-MEBox-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;}},markupMethods:{onvStatusChange:function(){var P=this.vStatus,O=this.vStatusNode;O.className="mstrmojo-MEBox-vStatus "+G[P];O.innerHTML=(this.getStatusDesc&&this.getStatusDesc(P))||H[P]||"";},oniStatusChange:function(){this.iStatusNode.innerHTML=this.iStatus;this.iStatusNode.title=this.iStatus;}},children:[{scriptClass:"mstrmojo.ME.TokenInputBox",alias:"inputBox",slot:"editNode",renderOnScroll:false,renderBlockSize:0,bindings:{browseItemVisible:"this.parent.browseItemVisible",candidates:"this.parent.candidates"}}],init:function N(O){if(this._super){this._super(O);}this.statusCssClass=this.showStatus?"":"hidden";},getSearchPattern:function M(){return this.inputBox.getSearchPattern();},getHighlightedText:function I(P,O){return this.inputBox.getHighlightedText(P,O);},item2textCss:function F(O){return{4:"m",7:"am",11:"fx",12:"a",13:"fc",43:"tr",47:"cs"}[O.t]||"";},handleSuggestionItemSelect:function E(O){var P=this.abiguityDialog;if(O){P.onItemSelect(O);}P.close();},showDesc:true,showPath:true,abiguityDialog:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-ME-ambiguityDialog",onOpen:function(){this.set("title",mstrmojo.desc(13542,"Object Ambiguity - ##").replace("##",this.ambiguousName));this.list.clearSelect();this.list.set("items",this.items);this.list.singleSelect(0);this.label.set("text",mstrmojo.desc(13543,"More than one object with the name '##' were found.").replace("##",this.ambiguousName));},children:[{scriptClass:"mstrmojo.Label",alias:"label",text:""},{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",alias:"list",cssClass:"mstrmojo-ME-ambiguityList",bindings:{items:"this.parent.opener.suggestionItems"},onclick:function(O){mstrmojo._IsList.onclick.call(this,O);}}],buttons:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton hot",text:mstrmojo.desc(547,"Select"),onclick:function(){var O=this.parent.parent;O.opener.handleSuggestionItemSelect(O.list.selectedItem);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]},defaultOnTokensModify:function(){this.set("vStatus",L.UNKNOWN);this.set("iStatus","");},postBuildRendering:function A(){this._super();this.inputBox.attachEventListener("tokensModify",this.id,"defaultOnTokensModify");this.inputBox.attachEventListener("tokensModify",this.id,"ontokensModify");},updateInputBoxItems:function K(O){this.inputBox.set("items",O.items);},replaceErrorToken:function C(O){this.inputBox.replaceErrorToken(O);},handleValidation:function J(O){if(!O){this.set("vStatus",L.ERROR);return ;}O.vs=D(O.rjec);this.set("vStatus",O.vs);this.set("iStatus",O.rjed||"");this.updateInputBoxItems(O);this.inputBox.focus();if(O.vs===L.AMBIGUITY){var W=this,T=O.items,S=B.find(T,"sta",-1),P=T[S].v,U=function(X){W.replaceErrorToken(X);W.set("iStatus","");W.set("vStatus",L.UNKNOWN);if(W.continueValidataion){W.continueValidataion();}};var Q=B.filter(O.srfd.items,this.isObjectVisible);var V=this.parent.candidates,R=V&&V.items;if(R){B.forEach(Q,function(Y){var X=B.find(R,"did",Y.did);if(X===-1){if(this.absorbAmbiguity){R.push(Y);}}else{Y.path=R[X].path;}});}if(Q.length===1){U(Q[0]);return ;}this.openPopup("abiguityDialog",{zIndex:100,items:Q,ambiguousName:P,onItemSelect:U});}else{if(this.postHandleValidation){this.postHandleValidation();}}}});mstrmojo.ME.MetricEditBox.VALIDATION_STATUS=L;}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.array","mstrmojo.Button","mstrmojo.css","mstrmojo.hash","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.func");mstrmojo.requiresDescs(221,1442,2751,2891,11949,11950,11951,11942,13397,13398,14640,14648);var R=mstrmojo.array,U=mstrmojo.css,N=mstrmojo.hash,O=mstrmojo.func,M=mstrmojo.Button.newWebButton,P=mstrmojo.dom,T="mstrmojo-link-validation",Q="mstrmojo-link-vt",F=function F(V){if(V.old){this.removedLinks.push(V);}this.links.removeChildren(V);},S=function S(){var s=this.dsMap,p=this.docModel,Y=p.datasets,u=function u(i,k,a){var j={n:a||"",did:k||null,parent:i||null,lv:(i?i.lv+1:-1),children:[]};if(i){i.children.push(j);}return j;},e=u(),X,W,V,g,Z,q,l,t,r,o,n,m,c,b,d,h,f;N.forEach(Y,function(a){if(p.isMDXDataset(a)){Z=a.tables;for(o=0,b=Z.length;o<b;o++){q=Z[o];X=u(e,q.did,q.n);X.isMDX=true;for(n=0,d=q.dimensions.length;n<d;n++){l=q.dimensions[n];W=u(X,l.did,l.n);for(m=0,h=l.hierarchies.length;m<h;m++){t=l.hierarchies[m];V=u(W,t.did,t.n);for(c=0,f=t.att.length;c<f;c++){r=t.att[c];g=u(V,r.did,r.n);g.att=r;s[q.did+":"+r.did]=g;}}}}}else{X=u(e,a.did,a.name);X.isMDX=false;R.forEach(a.att,function(i){g=u(X,i.did,i.n);g.att=i;s[a.did+":"+i.did]=g;});}});return e;},B=function B(b,c){b=R.ensureArray(b);var a=this,Z=this.attribute.did,d=this.docModel,X=d.findDatasetIdFromUnit(Z),W="\u001F",V={success:function(f){var h=f.als,e=(d.als&&d.als.links)||{},g=a.dsTree;R.forEach(b,function(q,l){var r={},j={},k=[],m={},p=Z+" "+q,n=R.filter(h[l].ats,function(i){return !d.isInDataset(X,i.at,["att"]);}),o=function o(i,s){if(!m[i]){m[i]={};}if(!m[i][s]){m[i][s]=true;}};R.forEach(n,function(t){var i=t.at,s=t.fms;r[i]=true;if(s){R.forEach(s,function(u){o(i,u.fm);});}});N.keyarray(e).forEach(function(i){if(i===p){R.forEach(e[i],function(s){s=s.split(" ");r[s[0]]=true;o(s[0],s[1]);});}});if(N.keyarray(r).length>0){R.forEach(g.children,function(s){var i=function(t){var u;if(!t.att){return ;}t=t.att;if(r[t.did]){if(!j[t.n]){j[t.n]={};}if(!j[t.n][t.did]){j[t.n][t.did]=[];}j[t.n][t.did].push(s.n);u=N.copy(t,u);u.dsId=s.did;k.push(u);}};if(s.isMDX){R.forEach(s.children,function(t){R.forEach(t.children,function(u){R.forEach(u.children,i);});});}else{R.forEach(s.children,i);}});}a.tgtAttrs[q]=k;a.tgtForms[q]=m;a.namesHash[q]=j;});}},Y={taskId:"validateDocumentLinks",msgID:d.mid,action:1,attributeList:Z,attributeFormList:b.join(W)};mstrApp.serverRequest(Y,O.wrapMethods(V,c));},E=function(Y,a,W,Z){Y.richTooltip=null;if(!Y.isSearching){var X=a&&a.scrollWidth>a.clientWidth;W=X?mstrmojo.desc(14648,"## from ###").replace("##",W):"";if(Z){if(!X){W=mstrmojo.desc(14640,"From ###");}W=W.replace("###",Z);}var V=mstrmojo.dom.position(a);Y.richTooltip={cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:W,top:V.y-6,left:V.x};}},D=function D(c){var d=this,f=function(m){var k=m.fs,n=m.de,l=[];(k||[]).forEach(function(o){if(o.obf&&(!n||o.idf)){l.push({n:o.fnm,v:o.fid,idf:o.idf});}});return l;},g=f(this.attribute),Z=function(n,l){var k=f(n);var o=(d.tgtForms[l]&&d.tgtForms[l][n.did])||{};var m=[];R.forEach(k,function(p){if(o[p.v]){m.push(p);}});return m;},b=function b(l){var k=[];R.forEach(d.tgtAttrs[l],function(m){if(Z(m,l||d.idFormId).length>0){var o=d.namesHash[l],n=m.n;if(o[m.n]&&N.keyarray(o[m.n]).length>1){n=n+" ("+o[m.n][m.did].join(",")+")";}k.push({n:m.n,v:m,tt:n});}});if(k.length===0){k.push({n:mstrmojo.desc(13398,"No valid object"),v:{did:null},cls:"nvo",t:1});}return k;},h=b((c&&c.srcFormId)||this.idFormId),i=function(k,l){return R.find(k.fs,l?"fid":"idf",l||true);},j=function(l){var k=-1;h.forEach(function(n,m){if(n.v.did===l){k=m;}});return k;},W=function(l){var k=h[l];if(!k){return mstrmojo.desc(13397,"Select an attribute");}else{return k.n;}},X=function(l){var m=l.items,k=l.selectedIndex;if(k>=0){if(m[k].idf){return ;}}m.forEach(function(o,n){if(o.idf){l.set("selectedIndex",n);}});};this.links.addChildren({scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linkRow",slot:"containerNode",old:!!c,oldMeta:c,getMeta:function(){var k=this.linkFromForm,m=this.linkToAtt,l=this.linkToForm;return{srcAttrId:d.attribute.did,srcFormId:k.items[k.selectedIndex].v,tgtAttrId:m.items[m.selectedIndex]&&m.items[m.selectedIndex].v.did,tgtFormId:l.items[l.selectedIndex]&&l.items[l.selectedIndex].v};},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-attName",text:d.attribute.n,useRichTooltip:true,updateTooltipConfig:function(o){var n=o.target,k=this.text,l=d.datasetId,m=l?d.docModel.datasets[l].name:"";E(this,n,k,m);}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormFromPD",alias:"linkFromForm",value:"ID",isHostedWithin:true,items:g,selectedIndex:i(d.attribute,c&&c.srcFormId),onitemSelected:function(l){var k=this,m=function(){var o=k.parent.linkToAtt;h=b(l.v);o.set("items",h);o.set("selectedIndex",-1);o.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(o.selectedNode,"nvo");},n={success:m};if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!l.idf){X(this.parent.linkToForm);if(!d.tgtForms[l.v]){B.call(d,l.v,n);return ;}}m();}}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-linksToLabel",text:mstrmojo.desc(11949,"links to")},{scriptClass:"mstrmojo.ui.SearchablePulldown",cssClass:"mstrmojo-linkToAtt",alias:"linkToAtt",useRichTooltip:true,isHostedWithin:false,items:h,text:W(j(c&&c.tgtAttrId)),selectedIndex:j(c&&c.tgtAttrId),allowCustomText:true,allowEmptyText:true,updateTooltipConfig:function(p){var o=p.target,k=o.getAttribute("tt"),m=this.getSelectedItem(),l=m?m.v.dsId:null,n=l?d.docModel.datasets[l].name:"";if(this.selectedNode===o&&m){k=m.tt;}E(this,o,k,n);},onitemSelected:function(o){if(!o||o.v.did===null){return ;}var n=this.parent.linkToForm,m=this.parent.linkFromForm,l=Z(o.v,m.items[m.selectedIndex].v),p=function p(q,s){var r=R.find(q,s?"v":"idf",s||true);if(r===-1&&q.length>0){r=0;}return r;},k;R.forEach(l,function(q){if(q.idf){k=false;return false;}});if(k){K.call(d,true);}n.set("items",l);n.set("selectedIndex",p(l,!this.hasRendered&&c&&c.tgtFormId));if(this.hasRendered&&this.parent.old){this.parent.oldUpdated=true;}J.call(d);},onPopupWidgetOpened:function a(){if(this.selectedIndex===-1){this.set("text","");}U.removeClass(this.selectedNode,"nvo");},onPopupWidgetClosed:function e(){mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this);if(this.selectedIndex===-1&&this.text===""){this.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(this.selectedNode,"nvo");}else{U.removeClass(this.selectedNode,"nvo");}this.hideTooltip();R.forEach(d.collapseTargets,function(k){k.className="arrow-b";U.removeClass(k.parentNode.parentNode,"collapse");});R.forEach(d.collapseTreeNodes,function(k){delete k.collapse;});R.forEach(this.list.itemsContainerNode.childNodes,function(k){k.style.display="";});},postBuildRendering:function V(){mstrmojo.ui.SearchablePulldown.prototype.postBuildRendering.call(this);if(this.selectedIndex===-1){U.addClass(this.selectedNode,"nvo");}this.list.popupConfig.clear();},getPopupListConfig:function Y(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",width:"170px",tooltipOrientation:"vertical",selectionPolicy:"reselect",useRichTooltip:true,locksHover:true,listHooks:{select:function k(q,r,p){this.parent.set("selectedIndex",p);this.close();}},onclick:function l(x){try{var q=x.getTarget(),y=this.getItemFromTarget(q),u=P.findAncestorByAttr(q,"idx",true,this.domNode);if(y){x.cancel();if(q.className==="arrow-b"||q.className==="arrow-r"){var t=this.items,p=this.itemsContainerNode.childNodes,s=function s(AA){var z;while(AA){z=AA.className||"";if(z.indexOf("lv")===0){return window.parseInt(z.substring(2),10);}AA=AA.firstChild;}return null;},w=function w(z,AC){var AB=d.dsMap,AA=AB[z.dsId+":"+z.did];while(AA){if(AA.lv===AC){return AA;}AA=AA.parent;}return null;},v=function v(){var AI=(q.className==="arrow-b"),AC=q.parentNode.parentNode,z=s(AC),AD=y._renderIdx,AA=w(y.v,z),AG=t.length,AF,AB,AE,AH,AK,AJ;q.className=AI?"arrow-r":"arrow-b";if(!d.collapseTargets){d.collapseTargets=[];}d.collapseTargets.push(q);U.toggleClass(AC,"collapse",AI);AA.collapse=AI;if(!d.collapseTreeNodes){d.collapseTreeNodes=[];}d.collapseTreeNodes.push(AA);for(AF=AD+1;AF<AG;AF++){AB=p[AF];AE=s(AB);if(AE<=z){break;}AH=w(t[AF].v,AE);AK=AH.parent;AJ=true;while(AK){if(AK.collapse){AJ=false;break;}AK=AK.parent;}AB.style.display=(AJ?"":"none");}};v();}else{if(u&&u.node.className.indexOf("item")!==-1){this.doItemSelect(y,x||{});}}}}catch(r){mstrApp.onerror(r);}},getItemProps:function m(r,p){var q=mstrmojo._IsList.getItemProps.call(this,r,p);var s=r.cls;if(s){q.addCls(s);}return q;},getItemMarkup:function o(z,y){if(z.v.did===null){return'<{@tag} class="item {@cls}" did="'+z.v.did+'" idx="{@idx}" style="{@style}">{@n}</{@tag}>';}var AA=[],w=z.v.did,r=z.v.dsId,s=r?d.docModel.datasets[r]:null,q=s?s.name:"",x=y>0&&this.items[y-1].v,u=d.dsMap,t=u[z.v.dsId+":"+w],p=u[(x&&(x.dsId+":"+x.did))];AA.push("</div>");while(t){if(t.lv===-1){break;}if(t.att){var v=t.att.da?"derived-attr":"attr";AA.push('<div class="lv'+t.lv+' dim item {@cls}" tt="'+z.tt+'" did="'+w+'" dsName="'+q+'" idx="{@idx}" style="{@style}"><div><div class="'+v+'"></div></div>{@n}</div>');}else{if(t!==p){AA.push('<div class="lv'+t.lv+' dim" dtt="'+t.n+'" idx="{@idx}"><div><div class="arrow-b"></div></div>'+t.n+"</div>");}else{break;}}t=t.parent;p=(p&&p.parent)||null;}AA.push("<div>");return AA.reverse().join("");},updateTooltipConfig:function n(u){var t=u.target,r=t.getAttribute("tt"),q=t.getAttribute("dtt"),s=t.getAttribute("dsName"),p=r||q;if(p){E(this,t,p,s);}}};}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormToPD",alias:"linkToForm",value:"ID",isHostedWithin:true,items:[],onitemSelected:function(k){if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!k.idf){X(this.parent.linkFromForm);}}}},M("",function(){F.call(d,this.parent);},false,{cssClass:"mstrmojo-removeLink"})]});this.links.renderChildren();},K=function(V){U.toggleClass(this.editorNode,"mstrmojo-advanced",V);},L=function(Y){var W=this,Z=T,V;try{mstrmojo.all[Z].destroy();}catch(X){}V={scriptClass:"mstrmojo.Editor",id:Z,title:mstrmojo.desc(2751,"Message"),cssClass:"mstrmojo-alert",buttons:[M(mstrmojo.desc(1442,"Ok"),function(){mstrmojo.all[Z].destroy();H.call(W);},true)],children:[{scriptClass:"mstrmojo.Label",text:Y}],visible:true,zIndex:1000};mstrmojo.insert(V).render();},H=function(){var X=this,W=this.illLinks,V=this.links.children,Y=Q;R.forEach(W,function(Z){Z=Z.al;R.forEach(V||[],function(b){var d=b.getMeta(),e=b.linkToAtt,a,c;if(d.srcAttrId===Z.alaid1&&d.tgtAttrId===Z.alaid2){if(!mstrmojo.all[Y]){c=new mstrmojo.Tooltip({id:Y,cssClass:X.themeClassName+" vi-warning vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,updatePopupConfig:null});P.attachEvent(X.editorNode,"click",function(){c.close();U.toggleClass(e.selectedNode,"mstrmojo-Warning",false);});}else{c=mstrmojo.all[Y];}c.close();a=mstrmojo.dom.position(e.selectedNode);c.set("top",a.y-6);c.set("left",a.x);c.set("content",Z.alstmsg);U.toggleClass(e.selectedNode,"mstrmojo-Warning",true);c.open();return false;}});});},A=function(){var V=mstrmojo.all[Q];if(V){V.close();}},J=function J(){this.buttons[0].enabled=true;if(this.btnHbox){this.btnHbox.children[0].set("enabled",true);}},G=function G(){var V=this,W=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-addLink",text:mstrmojo.desc(11950,"Add A Link"),title:mstrmojo.desc(11950,"Add A Link"),onclick:function(){D.call(V);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-showForms",text:mstrmojo.desc(2891,"Show Attribute Forms"),title:mstrmojo.desc(2891,"Show Attribute Forms"),onclick:function(){K.call(V,true);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-hideForms",text:mstrmojo.desc(11951,"Hide Attribute Forms"),title:mstrmojo.desc(11951,"Hide Attribute Forms"),onclick:function(){K.call(V,false);A.call(V);}}],slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linksBox mstrmojo-advanced",alias:"links",slot:"containerNode"}];this.addChildren(W);};mstrmojo.vi.ui.editors.AttributeLinkEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",title:mstrmojo.desc(11942,"Link Attributes"),cssClass:"mstrmojo-att-link",btnAlignment:"right",buttons:null,modal:true,visible:false,help:"link_attributes_editor.htm",attribute:null,tgtAttrs:null,tgtForms:null,docModel:null,datasetId:null,namesHash:null,removedLinks:null,preBuildRendering:function C(){var Y=this,W=this.docModel,X=function(){var Z=(W.als&&W.als.links)||{},a=[];N.keyarray(Z).forEach(function(b){if(b.indexOf(Y.attribute.did+" ")===0){Z[b].forEach(function(c){a.push({srcAttrId:b.split(" ")[0],srcFormId:b.split(" ")[1],tgtAttrId:c.split(" ")[0],tgtFormId:c.split(" ")[1]});});}});return a;},V;this.set("buttons",[M(mstrmojo.desc(1442,"OK"),function(){var g=[],a=Y.links.children,Z=function(){var h=W.controller,i=W.controller.getRefreshCallback();if(g.length>0){h.cmdMgr.execute({execute:function(){this.submit(g,i);},urInfo:{callback:i}});}Y.close();},f=false,c,d;Y.removedLinks.forEach(function(h){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);});(a||[]).forEach(function(h){if(h.old&&h.oldUpdated){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);}if(!h.old||(h.old&&h.oldUpdated)){d=h.getMeta();if(!d.tgtAttrId){return ;}c=N.copy(d,{act:"applyAttributeLinking",unlink:false});g.push(c);}});R.forEach(g,function(h){if(!h.unlink){f=true;return false;}});if(!f){Z();return ;}var e={taskId:"validateDocumentLinks",msgID:W.mid,action:2,manipulationList:'{"ml":'+JSON.stringify(g)+"}"},b={success:function(h){if(h.als&&h.als.length>0){var i="";R.forEach(h.als,function(j){i+=j.al.alstmsg+"\n";});Y.illLinks=h.als;L.call(Y,i);return ;}Z();}};mstrApp.serverRequest(e,b);},true,{enabled:false}),M(mstrmojo.desc(221,"Cancel"),function(){Y.close();})]);G.call(this);V=X(this.attribute.did);if(V.length>0){V.forEach(function(Z){D.call(Y,Z);});J.call(this);}else{D.call(this);}this._super();},close:function I(){A.call(this);this.destroy();}});mstrmojo.vi.ui.editors.AttributeLinkEditor.open=function(b){var W=mstrmojo.insert(N.copy(b,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",tgtAttrs:{},tgtForms:{},namesHash:{},removedLinks:[]})),Z=W.attribute,c=Z.did,V=W.docModel,Y=(V.als&&V.als.links)||{},X=[],a={success:function(){W.set("visible",true);W.render();}};R.forEach(Z.fs,function(d){if(d.idf){W.idFormId=d.fid;return false;}});N.keyarray(Y).forEach(function(e){var d=e.split(" ");if(d[0]===c){X.push(d[1]);}});if(R.indexOf(X,W.idFormId)===-1){X.push(W.idFormId);}W.dsMap={};W.dsTree=S.call(W);B.call(W,X,a);};}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.tabs.Tab","mstrmojo.dom","mstrmojo.css");var G=mstrmojo.dom,R=mstrmojo.array,d=mstrmojo.css,c="animate",W="31px";function X(){var i=window.Modernizr,h="transition";if(i.testProp(h)){return G.transEndEvtNames[i.prefixed(h)];}return null;}function D(h){return function(){this.menuNode.style.display=h?"block":"none";};}function I(h){return Math.min(h.offsetWidth-h.firstChild.offsetWidth,0);}function S(h){return h.isAlignRight?"right":"left";}function e(h,i){return parseInt(h.style[S(i)],10)||0;}function O(){var i=this.tabContainerNode,j=false,h=false;if(I(i)<0){var l=G.position(i),k=G.position(i.firstChild);j=(k.x<l.x);h=(k.x+k.w>l.x+l.w+0.1);}this.downBtnNode.style.display=j?"block":"none";this.upBtnNode.style.display=h?"block":"none";}function T(h,i){h=(h||[]);if(!h.filter){return R.filter(h,i);}return h.filter(i);}function Q(h,i){h=(h||[]);if(!h.map){return R.map(h,i);}return h.map(i);}function J(w,j){if(this.isStatic){return ;}var u=this.tabContainerNode,t=T(this.children,function(x){return x.isSelected;})[0],q=t&&t.domNode;if(!u||!q){return ;}var k=G.position(u),o=u.firstChild,v=I(u),l=e(o,this),i=Math.max(l,v);if(w){if(v<0){var n=G.position(q),p=n.x-k.x,s=n.x+n.w-(k.x+k.w),r=this.isAlignRight,h=function(x){i=r?i+x:i-x;};if(p<0){h(p);}else{if(s>0){h(s);}}}}if(i!==l){var m=X();if(j&&m){d.addClass(o,c);G.attachOneTimeEvent(o,m,function(){d.removeClass(o,c);});}o.style[S(this)]=Math.max(v,Math.min(i,0))+"px";}O.call(this);}function K(h){return h.hasOwnProperty("index");}function H(){var h=this.children,i=0;(h||[]).every(function(k,j){if(!K(k)){return false;}i++;k.index=j;return true;});(h||[]).every(function(j){if(!K(j)){return false;}j.total=i;return true;});}function B(l,i){var p=l.ENUM_CORNERS,m=[p.TOP_RIGHT,p.BOTTOM_RIGHT],n=this.parent;if(n.position!=="bottom"){m.reverse();}l.setAlignment(m[0],m[1]);var k=G.position(n.domNode),h=G.position(i),j=n.menuNode;var o=j.style;o.top=(h.y-k.y)+"px";o.left=(h.x-k.x)+"px";l.addPopupHandlers(n.id,D(true),D(false));l.hostId=n.id;l.hostElement=j;l.isHostedWithin=false;n.openPopup(l.newInstance());}function Y(h){h.raiseEvent({name:"TabsChange"});}mstrmojo.vi.ui.tabs.TabStrip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",markupString:'<div id="{@id}" class="mstrmojo-VITabStrip {@cssClass}" style="{@cssText}" ><div class="mstrmojo-VITabStrip-tabs"><div style="display:table"><div style="display:table-row"></div></div></div><div class="mstrmojo-VITabStrip-addBtn" mstrAttach:click><div></div></div><div class="mstrmojo-VITabStrip-downBtn" mstrAttach:click,mousedown><div></div></div><div class="mstrmojo-VITabStrip-upBtn" mstrAttach:click,mousedown><div></div></div><div class="mstrmojo-VITabStrip-menuHost"></div><div class="mstrmojo-VIDND-mask"></div></div>',markupSlots:{tabContainerNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.firstChild.firstChild.firstChild;},addBtnNode:function(){return this.domNode.childNodes[1];},addBtnImgNode:function(){return this.domNode.childNodes[1].firstChild;},downBtnNode:function(){return this.domNode.childNodes[2];},upBtnNode:function(){return this.domNode.childNodes[3];},menuNode:function(){return this.domNode.childNodes[4];},maskNode:function(){return this.domNode.lastChild;}},isStatic:false,isAlignRight:true,tabContainerNode:null,downBtnNode:null,upBtnNode:null,menuNode:null,position:"bottom",layoutConfig:{w:{tabContainerNode:"100%",addBtnNode:W},xt:true},onAppStateChange:function V(i){var h=mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION;if(i.value===h||i.valueWas===h){this.layoutConfig.w.addBtnNode=mstrApp.appState===h?"0px":W;this.doLayout();}},setStatic:function U(h,i){this.isStatic=h;if(!h){J.call(this,true,i);}},setTabs:function C(j,h){this.removeChildren();var k=this,i=j.length;this.addChildren(Q(j,function(n,l){var m=n.k;return k.getTabCfg(j,n,{scriptClass:"mstrmojo.vi.ui.tabs.Tab",index:l,total:i,draggable:!!i,dropZone:!!i,k:m,isSelected:m===h,showTabMenu:B,tabMoved:function(p){var o=this.index;this.parent.moveTab(o,o+(p?-1:1),o);}});}));J.call(this,true);Y(this);},getTabs:function N(){return T(this.children,K);},getTabCfg:function F(i,j,h){return h;},deleteTab:function P(h){var n=this.id,m=this.children[h],l=X(),k=function(){var o=mstrmojo.all[n];o.removeChildren(m);m.destroy();H.call(o);O.call(o);Y(o);};if(l){var j=m.domNode.firstChild,i=j.style;i.width=j.offsetWidth+"px";window.setTimeout(function(){d.addClass(j,c);G.attachOneTimeEvent(j,l,k);i.width=0;},0);}else{k();}},buildRendering:function E(){this._super();d.toggleClass(this.domNode,"alignLeft",!this.isAlignRight);},postBuildRendering:function Z(){var h=this._super();J.call(this,true);return h;},doLayout:function A(){this._super();J.call(this);},setSelectedTab:function b(h){(this.children||[]).forEach(function(i){i.set("isSelected",i.k===h);});Y(this);},getSelectedTab:function M(){var k=null,j=this.children||[],h;for(h=0;h<j.length;h++){if(j[h].isSelected){k=j[h];break;}}return k;},onclick:function g(h){if(h.getTarget()===this.addBtnImgNode){this.addTab();}},addTab:mstrmojo.emptyFn,onmousedown:function f(s){var o=s.getTarget().parentNode,t=(o===this.downBtnNode);if(t||o===this.upBtnNode){var r=this.tabContainerNode,n=r.firstChild,i=I(r),k=e(n,this),m=this.isAlignRight?(t?-10:10):(t?10:-10),j=this.id,p=this,l;if(mstrApp.setInteractive){mstrApp.setInteractive(false);}d.addClass(o,"active");var q=function(){window.clearInterval(l);d.removeClass(o,"active");O.call(mstrmojo.all[j]);if(mstrApp.setInteractive){mstrApp.setInteractive(true);}};G.attachOneTimeEvent(document.body,"mouseup",q);l=window.setInterval(function(){k=Math.min(Math.max(i,k+m),0);n.style[S(p)]=k+"px";if(k===i||k===0){q();}},33);}},moveTab:function L(h,p,n,m){var i=this.children,q=i.splice(h,1)[0];i.splice(p,0,q);H.call(this);var j=this.containerNode,k=j.childNodes,o=j.removeChild(k[h]),l=k[p];if(l){j.insertBefore(o,l);}else{j.appendChild(o);}if(q.isSelected){J.call(this,true,true);}if(!m&&n!==undefined&&n!==p){this.commitTabMove(n,p);Y(this);}},commitTabMove:function a(h,i){throw new Error(this.scriptClass+" must implement commitTabMove.");}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.date","mstrmojo.Container","mstrmojo.VBox","mstrmojo.Button","mstrmojo.locales","mstrmojo._FormatDefinition","mstrmojo.mstr.EnumFunction","mstrmojo.ui.editors.controls.ComboBox");var K=mstrmojo.hash,Z=mstrmojo.array,F=mstrmojo.num,H=mstrmojo._FormatDefinition,A=mstrmojo.css,X=mstrmojo.mstr.EnumFunction,J=mstrmojo.locales,G=mstrmojo.Button.newIconButton,M=mstrmojo.date,D=H.NumberFormatCategory,l=H.FixedNegative,E=H.CurrencyNegative,c=H.PercentNegative,I=H.DefaultFormat.FormattingNumber,W,R,b=function b(o,n){return{cls:this.value===o.v?"selected":"",v:o.v||"",n:o.n||"",style:o.r?"color:red;":"color:#fff;",sel:parseInt(this.idx,10)===n?"selected":""};},k={RIGHT:1,LEFT_WITH_SPACE:2,RIGHT_WITH_SPACE:3};var Q=[{n:mstrmojo.desc(4531,"Automatic"),v:-3}].concat(H.Category.slice(2)),a=[{n:"$"},{n:"£"},{n:"€"},{n:"¥"},{n:"fr."}];function C(p,o){var n=Z.find(p,"v",o);return n===-1?"":p[n].f;}function L(n){var p=this.parent.parent.parent.myData,o=n.v;p.set("format",C(this.items,o));p.set("negativeNumbers",o);A.toggleClass(this.selectedNode,"red",n.r);}function V(p,q,n){return{scriptClass:"mstrmojo.ui.Pulldown",items:p,onitemSelected:function o(r){var s=this.parent;while(s&&(!s.data||typeof s.data[q]==="undefined")){s=s.parent;}if(s){s.data.set(q,r.v);if(n){s.children[0].preview.preview_label.set("text",r.n);}}}};}function f(w,r,q,y,v){var x=K.clone(w),n=r>0?".":"",o=n,p=H.DefaultFormat.FormattingNumber,t;for(t=0;t<r;t++){n+=t%9;o+="0";}for(t=0;t<x.length;t++){var u=x[t];if(q){u.n=u.n.replace(/,/g,"");u.f=u.f.replace(/,/g,"");}if(y&&y!==p.CurrencyPosition){switch(y){case k.RIGHT:u.n=u.n.replace(/\$/g,"").replace(/\.\d{2}/g,".12$");u.f=u.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00"$"');break;case k.LEFT_WITH_SPACE:u.n=u.n.replace(/\$/g,"$ ");u.f=u.f.replace(/\$/g,"$ ");break;case k.RIGHT_WITH_SPACE:u.n=u.n.replace(/\$/g,"").replace(/\.\d{2}/g,".12 $");u.f=u.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00" $"');break;default:}}u.n=u.n.replace(/\.\d{2}/g,n);u.f=u.f.replace(/\.\d{2}/g,o);if(v&&v!==p.CurrencySymbol){var s=v.replace(/\$/g,"$$$$");u.n=u.n.replace(/\$/g,s);u.f=u.f.replace(/\$/g,s);}u.cls=u.r?"red":null;}return x;}function T(p){var n="1"+(p>0?".":"").toString(),q="0"+(p>0?".":"").toString(),o;for(o=0;o<p;o++){n+=o%10;q+="0";}return[n+"E+03",q+"E+0#"];}function P(AA,AC){var u="\u00A4",y=/"[^"]*"/g,p=AA.match(y),AD="\u0091",z=/\[[^\]]*\]/g,n=AA.match(z),x,AB;x=AA.replace(y,u);x=x.replace(z,AD);var r=AA.indexOf("."),w=F.getDecimalLength(AA),t=Math.max(0,w+AC),q=AA.match(/\d(?!((\d)|(,\d)))/g),o=r!==-1?AA.charAt(r-1):q&&q[0],v=(o||"0")+(t>0?".":"").toString();for(var s=0;s<t;s++){v+="0";}x=x.replace(w===0?/\d(?!((\d)|(,\d)))/g:/\d\.\d+/g,v);x=x.split(u);AB=x[0];Z.forEach(p,function(AF,AE){AB+=AF+x[AE+1];});x=AB.split(AD);AB=x[0];Z.forEach(n,function(AF,AE){AB+=AF+x[AE+1];});return AB;}function N(u,n,t,s,p,o){var r=u.parent.parent.parent,q=f(n,t.decimalPlaces,s,p,o);t.set("format",C(q,t.negativeNumbers.toString()));u.set("items",q);u.set("selectedIndex",Z.find(q,"v",t.negativeNumbers.toString()));r.preview.preview_label.set("text",S(r.myData.format));}function h(){var v=this.parent.parent,z=v.myData,q=v.formatterContainer,o=Q[v.categoryPicker.selectedIndex].v,AC=this.funcType===X.FunctionLeftStr?1:-1,s=null,u=null,r=false,AB=0,w=null,p=false,y;switch(o){case D.Fixed:s=q.fixed_hBox.negativeDDL;u=l;r=!z.thousandSeparator;break;case D.Currency:s=q.currency_hBox2.negativeDDL;u=E;AB=z.currencyPosition;w=z.currencySymbol;break;case D.Percentage:s=q.percentage_hBox.negativeDDL;u=c;break;case D.Scientific:p=true;break;case D.Custom:y=true;break;default:return ;}if(y){var AA=P(z.format,AC);v.preview.preview_label.set("text",S(AA));v.formatterContainer.custom_text.set("value",AA);return ;}var t=z.decimalPlaces,n=t+AC;n=Math.max(0,n);n=Math.min(H.MaxNegativeDidigts,n);z.set("decimalPlaces",n);if(p){var x=T(n);z.set("format",x[1]);v.preview.preview_label.set("text",x[0]);}else{N(s,u,z,r,AB,w);}}function S(x){var p="\u00A4",t=/"[^"]*"/g,o=x.match(t),s=x.replace(t,p),w=["m","y","d","h","s"],v=false,n=new Date(),u=n.getFullYear(),r=n.getMonth(),q=n.getDay(),z=J.datetime,y;Z.forEach(w,function(AA){v=v||s.indexOf(AA,0)!==-1;});if(v){s=s.replace(/y{3,}/g,u).replace(/y{1,2}/g,u.toString().slice(2,4));s=s.replace(/m{4,}/g,z.MONTHNAME_FULL[r-1]).replace(/m{3}/g,z.MONTHNAME_SHORT[r-1]).replace(/mm/g,"07").replace(/m/g,"7").replace(/7ber/g,"mber");s=s.replace(/d{4,}/g,z.dayNames[q-1]).replace(/d{3}/g,"Mon").replace(/dd/g,"10").replace(/d/g,"1").replace(/1ay/g,"day");s=s.replace(/hh/g,"08").replace(/h/g,"8");s=s.replace(/ss/g,"04").replace(/s/g,"4");s=s.split(p);y=s[0];Z.forEach(o,function(AB,AA){y+=AB+s[AA+1];});return y;}return F.formatByMask(x,1234.12);}function m(n,o){return Math.max(Z.find(n,"v",o),0);}function B(p){var o=this.parent.parent.categoryPicker,n=Q.map(function(q){return q.v;}).indexOf(p);o.set("selectedIndex",n);}function j(n,o,q,p){return G(undefined,n,o,undefined,K.copy(p,{useRichTooltip:true,updateTooltipConfig:function(){this.richTooltip={cssClass:"vi-regular vi-tooltip-A A-center",content:q,refNode:this.domNode,posType:mstrmojo.tooltip.POS_TOPCENTER,left:15,top:33};}}));}function Y(){if(mstrApp.isSingleTier){var s=this.formatterContainer,r=J.datetime,n={day:7,month:4,year:1998},p={hour:15,min:41,sec:46},q=r&&r.DATEINPUTFORMATS,o=r&&r.TIMEINPUTFORMATS;W=[];R=[];q.forEach(function(t){W.push({v:t,n:M.formatDateInfo(n,t)});});o.forEach(function(t){R.push({v:t,n:M.formatTimeInfo(p,t)});});s.date_ddl.set("items",W);s.time_ddl.set("items",R);}else{W=H.Date;R=H.Time;}}mstrmojo.vi.ui.NumberFormatter=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.vi.ui.NumberFormatter",cssClass:"NumberFormatter-content",formatValue:null,myData:null,oldData:null,categoryPicker:null,formatterContainer:null,preview:null,shortcutRow:null,adjustAfterCategoryChange:mstrmojo.emptyFn,preBuildRendering:function(){if(this._super){this._super();}Y.call(this);var n=this.formatterContainer;if(this.formatValue){n.currency_hBox1.currency_symbol.selectedValue=this.formatValue.currencySymbol;n.fixed_btn.checked=!!this.formatValue.thousandSeparator;A.addWidgetCssClass(n.fraction_ddl,c[Z.find(c,"v",this.formatValue.negativeNumbers)].r?" red":"");}},postBuildRendering:function O(){if(this._super){this._super();}if(this.formatValue){this.categoryPicker.set("selectedIndex",m(this.categoryPicker.items,this.formatValue.category.toString()));}},children:[K.copy({alias:"categoryPicker",cssClass:"nf-category",onitemSelected:function i(z){if(!this.hasRendered){return ;}var u=this,x=u.parent,p=x.formatterContainer,n=x.shortcutRow,y=x.preview.preview_label,w=z.v,r=w===D.Automatic,o=[],t=x.myData;Z.forEach(p.children,function(AA){AA.set("visible",false);});x.border.set("visible",!r);x.preview.set("visible",!r);["border","moveLeftBtn","moveRightBtn"].forEach(function(AA){n[AA].set("visible",!r);});t.set("category",w);t.set("thousandSeparator",w?I.ThousandSeparator:x.formatValue.thousandSeparator);switch(w){case D.Currency:N(p.currency_hBox2.negativeDDL,E,t,false,t.currencyPosition,t.currencySymbol);p.currency_hBox1.currency_position.set("selectedIndex",m(H.CurrencyPosition,t.currencyPosition.toString()));o=["currency_hBox1","currency_hBox2"];break;case D.Date:p.date_ddl.set("selectedIndex",m(W,t.format));o=["date_ddl"];break;case D.Time:p.time_ddl.set("selectedIndex",m(R,t.format));o=["time_ddl"];break;case D.Percentage:N(p.percentage_hBox.negativeDDL,c,t,false,0,null);o=["percentage_hBox"];break;case D.Fraction:p.fraction_ddl.set("selectedIndex",m(H.Fraction,t.format));o=["fraction_ddl"];break;case D.Scientific:var s=T(t.decimalPlaces||0);t.set("format",s[1]);y.set("text",s[0]);break;case D.Custom:var q=t.customText||t.format,v=p.custom_text;t.set("format",q);v.value=q;v.refresh();y.set("text",S(q));o=["custom_condense","custom_text"];break;case D.Fixed:N(p.fixed_hBox.negativeDDL,l,t,!t.thousandSeparator,0,null);o=["fixed_hBox","fixed_btn"];break;}Z.forEach(o,function(AA){p[AA].set("visible",true);});x.adjustAfterCategoryChange();}},V(Q,"category")),{scriptClass:"mstrmojo.Box",cssClass:"nf-MiddleRow nf-shortcut",alias:"shortcutRow",border:null,moveLeftBtn:null,moveRightBtn:null,children:[j("nf-shortcut-currency",function e(){B.call(this,D.Currency);},mstrmojo.desc(2051,"Currency"),undefined),j("nf-shortcut-percentage",function e(){B.call(this,D.Percentage);},mstrmojo.desc(2053,"Percentage"),undefined),j("nf-shortcut-fixed",function e(){B.call(this,D.Fixed);this.parent.parent.formatterContainer.fixed_btn.set("checked",true);},mstrmojo.desc(2050,"Fixed"),undefined),{scriptClass:"mstrmojo.Label",cssClass:"shortcut-border",alias:"border"},j("nf-MoveDecimalPoint left",function e(){h.call(this);},mstrmojo.desc(2189,"Increase Decimal"),{funcType:X.FunctionLeftStr,alias:"moveLeftBtn"}),j("nf-MoveDecimalPoint right",function e(){h.call(this);},mstrmojo.desc(2188,"Decrease Decimal"),{funcType:X.FunctionRightStr,alias:"moveRightBtn"})]},{scriptClass:"mstrmojo.Label",alias:"border",cssClass:"nf-border"},{scriptClass:"mstrmojo.Container",alias:"formatterContainer",cssClass:"nf-buttons",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',fixed_hBox:null,fixed_btn:null,currency_hBox1:null,currency_hBox2:null,date_ddl:null,time_ddl:null,percentage_hBox:null,fraction_ddl:null,custom_condense:null,custom_text:null,markupSlots:{containerNode:function U(){return this.domNode;}},children:[{scriptClass:"mstrmojo.HBox",alias:"fixed_hBox",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function i(n){L.call(this,n);}},V([],"format"))]},{scriptClass:"mstrmojo.CheckBox",alias:"fixed_btn",cssClass:"nf-MiddleRow",label:mstrmojo.desc(13898,"Use 1000 Separator(#)").replace("#",J.number.THOUSANDSEPARATOR),onclick:function e(){var n=this.parent.parent;n.myData.set("thousandSeparator",this.checked?-1:0);N(this.parent.fixed_hBox.negativeDDL,l,n.myData,!this.checked,0,null);}},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox1",cssClass:"nf-MiddleRow",visible:true,currency_symbol:null,currency_position:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",alias:"currency_symbol",cssClass:"nf-CurrencySymbol",selectedValue:"$",items:a,postselectedValueChange:function g(n){var s=this,r=s.parent.parent.parent,q=n.value,o=r.myData;o.set("currencySymbol",q);N(this.parent.parent.currency_hBox2.negativeDDL,E,o,false,parseInt(o.currencyPosition,10),q);}},K.copy({cssClass:"nf-CurrencyPosition align-right",alias:"currency_position",onitemSelected:function i(n){var r=this,q=r.parent.parent.parent,o=n.v;q.myData.set("currencyPosition",parseInt(o,10));N(this.parent.parent.currency_hBox2.negativeDDL,E,q.myData,false,parseInt(o,10),q.myData.currencySymbol);}},V(H.CurrencyPosition,"currencyPosition"))]},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox2",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function i(n){L.call(this,n);}},V([],"format"))]},K.copy({alias:"date_ddl",cssClass:"nf-MiddleRow"},V(H.Date,"format",true)),K.copy({alias:"time_ddl",cssClass:"nf-MiddleRow"},V(H.Time,"format",true)),{scriptClass:"mstrmojo.HBox",alias:"percentage_hBox",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function i(n){L.call(this,n);}},V([],"format"))]},K.copy({alias:"fraction_ddl",cssClass:"nf-MiddleRow"},V(H.Fraction,"format",true)),mstrmojo.Button.newWebButton(mstrmojo.desc(13893,"Condense (e.g.10M)"),function(){this.parent.custom_text.set("value",'[>=1000000]#,##0,,"M";[>=1000]#,##0,"K";0');},false,{cssClass:"nf-condense",alias:"custom_condense"}),{scriptClass:"mstrmojo.TextBox",alias:"custom_text",cssClass:"nf-custom",onvalueChange:function d(){var q=this,o=q.parent.parent,n=q.value;o.myData.set("format",n);o.myData.set("customText",n);q.parent.parent.preview.preview_label.set("text",S(n).replace(/\s/g,"&nbsp;"));}}]},{scriptClass:"mstrmojo.HBox",alias:"preview",cssClass:"nf-MiddleRow",preview_label:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"preview_lable",text:mstrmojo.desc(13892,"Preview:")},{scriptClass:"mstrmojo.Label",cssClass:"align-right",alias:"preview_label"}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.Popup","mstrmojo._HasPopup","mstrmojo.locales","mstrmojo.date","mstrmojo.string");var B=mstrmojo.ValidationTextBox.prototype.markupMethods,D=mstrmojo.string,A=function(){return mstrmojo.locales.datetime;},C=mstrmojo.date;mstrmojo.DateTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DateTextBox",calendarToBody:false,calendarZIndex:100,changeValueOnOK:false,dynDateValue:null,showAdvanced:false,canSelectDisabledDate:false,isList:false,dtp:14,defaultDate:null,autoFormat:true,enabled:true,min:"",max:"",markupString:'<div id="{@id}" class="mstrmojo-DateTextBox {@cssClass}" style="{@cssText}"><input class="mstrmojo-DateTextBox-input" type="text" title="{@tooltip}"value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur /><div class="mstrmojo-DateTextBox-icon" mstrAttach:click> </div><div class="mstrmojo-DateTextBox-popup"></div></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.childNodes[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onwidthChange:function(){if(this.width){this.inputNode.style.width=(this.width-20)+"px";this.iconNode.style.left=(this.width-18)+"px";this.domNode.style.width=this.width+"px";}},onvalueChange:B.onvalueChange,onenabledChange:B.onenabledChange,onvalidationStatusChange:B.onvalidationStatusChange},calConfig:null,calendar:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-DateTextBox-calendar",locksHover:true,slot:"popupNode",onOpen:function(){var H=this.opener,G=H&&H.calendarZIndex,I=this.cal,E=H&&H.calConfig;if(G){this.domNode.style.zIndex=G;}for(var F in E){I.set(F,E[F]);}},children:[{scriptClass:"mstrmojo.Calendar",alias:"cal",forceNonEmptySelection:true,bindings:{showAdvanced:"this.parent.opener.showAdvanced",dtp:"this.parent.opener.dtp",value:"this.parent.opener.value",dynDateValue:"this.parent.opener.dynDateValue",enabled:"this.parent.opener.enabled",min:"this.parent.opener.min",max:"this.parent.opener.max",canSelectDisabledDate:"this.parent.opener.canSelectDisabledDate",changeValueOnOK:function(){var F=this.parent.opener.dtp,E=this.parent.opener.changeValueOnOK;return F===15||F===16||E;}},closeOnValueChange:true,onValueUpdate:function(F){var I=this.parent&&this.parent.opener;if(I){var G=I.value,E=window.mstrConfig&&window.mstrConfig.listSep||";",H=I.dtp===15?C.formatTimeInfo(this.timeVal,A().TIMEOUTPUTFORMAT):this.value;if(I.isList&&!D.isEmpty(G)){I.set("value",I.value+E+H);}else{I.set("dynDateValue",this.dynDateValue);I.set("value",H);}I.closePopup();}}}]},onclick:function(E){var F=this._lastOpened,G=this._calendarConfig;if(!G){G={};if(this.calendarToBody){delete this.calendar.slot;G.placeholder=document.body.appendChild(document.createElement("div"));G.nudge=function(){var M=this.opener;if(M){var H=mstrmojo.dom.position(M.popupNode,true),L=this.domNode,P=L.offsetHeight,I=L.offsetWidth,J=mstrmojo.dom.windowDim(),K=H.x,N=H.y;if(N+P>=J.h){N=Math.max(N-P,0);}if(K+I>=J.w){K=Math.max(K-I,0);}var O=L.style;O.top=N+"px";O.left=K+"px";}};}this._calendarConfig=G;}G.lockIW=this;if(F&&F.visible){this.closePopup();}else{this.openPopup("calendar",G);this.calendar.cal.updateSelectedDate(true);}},unrender:function(){this._super();if(this.calendarToBody&&this._calendarConfig){delete this._calendarConfig;}if(this.calendar.hasRendered){this.calendar.unrender();}},_set_value:function(H,F){var G=this.value,E=(G!==F);if(E){this.value=F;this.validate(F);}if(this.showAdvanced&&this.dynDateChanged){this.dynDateChanged=false;E=true;}return E;},_set_dynDateValue:function(H,F){var G=this.dynDateValue,E=(G!==F);if(E){this.dynDateValue=F;this.dynDateChanged=true;}return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.tabs.TabStrip","mstrmojo.vi.ui.tabs.Tab","mstrmojo.ME.MetricEditBox","mstrmojo.array","mstrmojo.hash");var Z=mstrmojo.array,M=mstrmojo.hash,K=mstrmojo.ME.MetricToken.brackets,L=mstrmojo.dom,B=mstrmojo.css,Q=mstrmojo.vi.ui.tabs.Tab.ACTIONS,g=Q.DELETE+Q.RENAME,i=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS,D=mstrmojo.string,k="This@ID",T="45C11FA478E745FEA08D781CEA190FE5";function G(o){return{n:o,k:o,ftk:[],vs:1,is:""};}function O(t,u,o,r){var q=t.forms[u]||{},s=t.forms[o],p=t.inputBox;if(u!==o){q.vs=t.vStatus;q.is=t.iStatus;q.ftk=p.items;t.set("vStatus",i.UNKNOWN);}t.set("vStatus",s.vs);t.set("iStatus",s.is);t.updateInputBoxItems({items:s.ftk});if(t.curFormIdx!==o){t.curFormIdx=o;t.tabstrip.setSelectedTab(s.k);}t.raiseEvent({name:"tabSwitch",tks:s.ftk,vs:s.vs,is:s.is,oidx:u,nidx:o,toNewTab:r});}function N(p){var o=p.forms[p.curFormIdx];if(o){o.ftk=p.inputBox.items;o.vs=p.vStatus;o.is=p.iStatus;}}var e=0;function W(o){e=Math.max(o.length-1,e);}function V(){e=0;}function l(o){var p="DESC"+(e?" "+e:"");e++;if(Z.find(o,"n",p)>=0){return l(o);}return p;}function I(r){var q={v:K(r.n),oi:r,isNew:true},p,o;if(r.t===12){p=Z.filter(r.fs,function(s){return s.obf||r.da;}).length;if(p===1){o=r.fs[0];q=M.copy({v:K(r.n)+"@"+K(o.fnm),ift:true,exv:o.fid,extp:8},q);}else{q=M.copy({v:K(r.n)+"@",ift:true},q);}}return q;}function E(p,o){p.set("enabled",!o);var q="mstrmojo-InlineWaitIcon";if(p.iconClass){p.set("iconClass",p.iconClass.replace(new RegExp(q),"")+" "+(o?q:""));}else{mstrmojo.css.toggleClass(p.domNode,q,o);}}var U=function(w){var r=w.items,s=r.length,t=r[r.length-1],q,p,v=[],o="",u;if(r[0]&&r[0].tp!==33){v.push({v:"!",tp:33,lv:4,sta:2});}for(q=0;q<s;q++){p=r[q];if(p.isNew&&!p.oi){o+=p.v;}else{if(!D.isEmpty(o)){v.push({v:o,tp:2,lv:1});o="";}if(p.v&&p.v.indexOf(k)>=0){p.v=p.v.replace("["+k+"]",k);p.exv=T;p.extp=8;delete p.oi;}v.push(p);}}if(!D.isEmpty(o)){v.push({v:o,tp:2,lv:1});o="";}if(t&&t.tp!==-1){v.push({v:"",tp:-1,lv:4,sta:2});}return{items:v};},a=function(q){var o=q.items||[],p=o[o.length-1];if(p&&p.tp===-1){o.pop();}if(o[0]&&(o[0].tp===33||o[0].tp===37)){o.splice(0,1);}Z.forEach(o,function(r){if(r.v&&r.v.indexOf(k)>=0){M.copy({extp:8,exv:T,oi:{n:"This",did:"This",t:12}},r);}});},Y=function(o){if(!o){return i.VALID;}return{"-2147214845":i.ERROR,"-2147214846":i.AMBIGUITY}[o]||i.ERROR;},R=function(q){q=U(q);var p={items:true,v:true,tp:true,lv:true,oi:true,n:true,did:true,t:true,st:true,exv:true,extp:true,asc:true,vtp:true},o={getArrItemName:function(){return"tkn";},isSerializable:function(r){return(p[r])?true:false;}};return D.json2xml("tknstrm",q,o);},F=function(q,t,s,p){var r=R(t),u=function(v){if(v&&v.tks){var w=v.tks;a(w);w.vs=Y(w.rjec);w.tokenXML=r;if(p){p(w);}}},o=function(v){mstrmojo.alert(v.message||v.getResponseHeader&&v.getResponseHeader("X-MSTR-TaskFailureMsg"));};mstrmojo.ME.MetricDataService.validateMetric({tokenStreamXML:r,localSymbolFolderXML:"",metricXML:"",metricId:q||"",isNew:true,objectType:12,isIDForm:s,msgID:mstrApp.getMsgID()},{success:u,failure:o});};mstrmojo.ME.DerivedAttributeFormTab=mstrmojo.declare(mstrmojo.vi.ui.tabs.Tab,null,{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",valid:true,editable:true,postBuildRendering:function S(){if(this._super){this._super();}var o=this,p=o.lbl;p.editOnDoubleClick=this.editable;p.onTextEditComplete=function(r,q){if(o.validate(p.text)){o.titleEdited(p.text,q);}};},onclick:function d(o){var p=mstrmojo.dom.eventTarget(o.hWin,o.e);if(p===this.menuBtnNode){this.tabDeleted();}else{if(!this.isSelected){this.tabSelected();}}},validate:function(o){var p=!/[\[\]\"\\]/g.test(o);if(!p){this.lbl.set("isEditing",true);}this.set("valid",p);return p;},showErrTooltip:function n(s,q){var o=mstrmojo.dom.position(this.domNode),p=this,r=p.errTooltip;if(!r){p.errTooltip=r=new mstrmojo.Tooltip({contentNodeCssClass:"me-tooltip-content up me-err",updatePopupConfig:null});this.addDisposable(r);}r.set("top",o.y+o.h+2);r.set("left",o.x+o.w/2-q);r.set("content",'<div class="content"><span>'+s+"</span></div>");r.open();window.setTimeout(function(){r.close();},2500);},onvalidChange:function(){if(this.valid){this.hideTooltip();}else{this.showErrTooltip(mstrmojo.desc(11569,"Input contains invalid character"),95);}}});function f(r,s,t){var q=Z.find(s,"k",t.k);return{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",title:t.n,draggable:false,editable:q!==0,cssClass:"mstrmojo-AEB-Tab "+(q===0?"mstrmojo-AEB-IDTab":""),getMenuActions:function(){return g;},tabSelected:function(){O(r,r.curFormIdx,q);},titleEdited:function p(v,u){if(v!==u){if(Z.find(r.forms,"n",v)>=0){this.showErrTooltip(mstrmojo.desc(7209,"Name already exists"),69);}var w=r.forms[q];w.n=v;}},tabDeleted:function o(){var u=r.forms.length,x=(r.curFormIdx===u-1)?0:r.curFormIdx,v=r.forms.slice(0),w=v[q];if(w&&w.did){r.delForms.push({n:w.n,did:w.did});}v.splice(q,1);r.curFormIdx=x;r.set("forms",v);O(r,-1,x);r.set("dirty",true);}};}mstrmojo.ME.AttributeEditBox=mstrmojo.declare(mstrmojo.ME.MetricEditBox,null,{scriptClass:"mstrmojo.ME.AttributeEditBox",markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-AEB-TabStrip"></div><div class="mstrmojo-MEBox-edit mstrmojo-AEB-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{tabstripNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},statusNode:function(){return this.domNode.lastChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;}},forms:null,delForms:[],curFormIdx:0,attrid:null,absorbAmbiguity:false,init:function j(q){var r=this;r.children=[{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",alias:"tabstrip",position:"top",slot:"tabstripNode",isAlignRight:false,getTabCfg:function p(u,v,t){return M.copy(f(r,u,v),t);},addTab:function s(){var v=r.forms,t=v.length,w=l(v),u=v.slice(0);u.push(G(w));r.set("forms",u);O(r,r.curFormIdx,t,true);r.set("dirty",true);},clear:function o(){Z.forEach(this.children,function(t){t.hideTooltip();});}},{scriptClass:"mstrmojo.Button",alias:"clearBtn",slot:"tabstripNode",text:mstrmojo.desc(1763,"Clear All"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-clearAll",onclick:function(){r.inputBox.clearTokens([]);}},{scriptClass:"mstrmojo.Button",alias:"validateBtn",slot:"tabstripNode",text:mstrmojo.desc(11897,"Validate"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-validate",onclick:function(){r.validateCurrentForm();}}].concat(this.children);this._super(q);},item2textCss:function J(o){return this._super(o)||{21:"afm"}[o.t]||"";},onformsChange:function X(){var o=this.forms,p=o[this.curFormIdx].k;Z.forEach(o,function(q){a({items:q.ftk});});this.tabstrip.setTabs(o,p);W(o);},selectFormTab:function A(o){O(this,this.curFormIdx,o);},postBuildRendering:function S(){if(this._super){this._super();}this.clear();var o=this;this.inputBox.ondrop=function(w){if(!w.src.data||!w.src.data.item){return ;}var v=o.inputBox,s=v.ctxtBuilder.itemWidgets,t=M.copyProps(["did","n","t","fs"],w.src.data.item),r=I(t),u,p,q;w.src.data=r;mstrmojo.ListBase2.prototype.ondrop.call(this,w);if(o.ontokensModify){o.ontokensModify();}u=this.selectedIndices;if(t.t===12&&r.ift&&!r.exv){for(p in u){q=s[p];if(q){v.startTokenSuggestion(q);}}}v.clearSelect(true);B.removeClass(v.domNode,"unselectable");};},clear:function c(){this.curFormIdx=0;this.delForms=[];this.attrid=null;V();this.set("forms",[G("ID")]);this.inputBox.set("items",[]);this.inputBox.resetTokensCache();this.set("vStatus",i.UNKNOWN);this.set("iStatus","");this.tabstrip.clear();},validateCurrentForm:function C(p){var q=this,r=this.validateBtn,o=function(s){E(r,false);q.set("vStatus",s.vs);q.set("iStatus",s.rjed||"");q.updateInputBoxItems({items:s.items});q.statusNode.style.display="block";q.handleValidation(s);if(p){p(s.items,s.vs===i.VALID);}};q.set("vStatus",i.VALIDATING);E(r,true);F(this.attrid,{items:this.inputBox.items},q.curFormIdx===0,o);},validateAllForms:function m(q){var r=this,p=r.forms,o=0,s=function(v){var u=(o===0);if(v){var t=p[o-1];t.ftk=v.items;t.vs=v.vs;t.is=v.rjed||"";t.tokenXML=R({items:v.items});if(v.vs!==i.VALID){r.selectFormTab(o-1);r.handleValidation(v);if(q){q(null,false);}return ;}}if(o===p.length){if(q){q(p,true);}return ;}F(r.attrid,{items:p[o++].ftk},u,s);};N(r);s();},continueValidataion:function P(){this.validateCurrentForm();},getStatusDesc:function b(o){return{0:mstrmojo.desc(11655,"Valid Formula.")}[o];},onvStatusChange:function h(){this.statusNode.style.display=this.vStatus>=i.VALIDATING?"block":"none";},onObjectInsert:function H(r){var s=this.inputBox,q=I(r),o=s.insertTokens([q]),p;if(r.t===12&&q.ift&&!q.exv){p=s.ctxtBuilder.itemWidgets[o];if(p){s.startTokenSuggestion(p);}}}});mstrmojo.ME.AttributeEditBox.preprocessTokenStream=a;mstrmojo.ME.AttributeEditBox.postprocessTokenStream=U;mstrmojo.ME.AttributeEditBox.mapErrorCode=Y;mstrmojo.ME.AttributeEditBox.getTokenStreamXML=R;mstrmojo.ME.AttributeEditBox.validateSyntax=F;mstrmojo.ME.AttributeEditBox.prepareInsertToken=I;}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.fe.FilterExprTree","mstrmojo.fe.AndOrNode","mstrmojo.fe.RelationNode","mstrmojo.fe.DynamicNode","mstrmojo.fe.ConditionNode");var K=mstrmojo.expr.ET;mstrmojo.fe.RelationFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RelationFilterExprTree",nodeClassMap:{14:mstrmojo.fe.AndOrNode,15:mstrmojo.fe.RelationNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},getItemIdentityProp:function(L){if(L.ph){return"ph";}if((L.et===10||L.et===12)&&L.dmt===4){return K.RLS;}return L.et;},isEditable:function J(M){var L=false;switch(M&&M.et){case K.RLS:L=true;break;}return L||this._super(M);},getItemConfig:function(O,L,P){var M=this._super(O,L,P),N=(O.et===K.RLS||!!O.relation);if(N){M.itemFunction=P.itemFunction;}return M;},newCondition:function E(M){var L=this.getSelectedItemWidget();if(M&&M.ph&&!M.ph.idx&&microstrategy.bones.rwb_viewer){M.ph.idx=microstrategy.bones.rwb_viewer.nextPhIndex++;}if(L&&L.selected&&L.newCondition){return L.newCondition(M);}else{return this._super(M);}},createSet:function D(M,L){var N=L.rq,O=L.cq;if(N&&O){this.remove(O);if(L.isMetric){mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],N,O);N=O;}else{N.nds=[O];}this.add([N],M[0]);}},removeSet:function G(L){var M=L.data,N=[M];this.remove(M);if(M.nds&&M.nds.length>0){N=M.nds;}else{delete M.dmy;delete M.relation;delete M.applySubExpr;delete M.relation;delete M.useSchema;delete M.dmt;}this.add(N,0);},nameFactory:{counter:1,names:{},clear:function(){this.resetCounter();this.names={};},resetCounter:function C(){this.counter=1;},isNameExist:function I(L){return !!this.names[L];},setName:function H(L,M){this.names[L]=M;},changeName:function B(M,L,N){this.removeName(M);this.setName(L,N);},getNewName:function F(O,N,Q){var P=N||"",M=Q||"",L;while(this.isNameExist(P+this.counter+M)){this.counter++;}L=P+this.counter+++M;this.names[L]=O;return L;},removeName:function A(L){delete this.names[L];this.resetCounter();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.css","mstrmojo.registry","mstrmojo.AjaxCall","mstrmojo.hash","mstrmojo.array","mstrmojo.Arr","mstrmojo.expr","mstrmojo.dom","mstrmojo.mstr.EnumDataType","mstrmojo.Label","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.WidgetDial","mstrmojo.Calendar","mstrmojo.DateTextBox","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ValidationTextBox","mstrmojo.ui.CheckList","mstrmojo.ui._HasScroller","mstrmojo.ui.ColumnContainer","mstrmojo.elementHelper");var AQ=mstrmojo.css,AJ=mstrmojo.registry,M=mstrmojo.hash,c=mstrmojo.mstr.EnumDataType,K=mstrmojo.array,q=K.map,L=mstrmojo.Arr,AM=mstrmojo.expr,b=AM.ET,m=AM.ET2TP,AC=AM.ET2TGT,O=AM.FN,v=AM.FN_MRP,AK=AM.DTP,j=AM.DTP2FN_DTP,AF=mstrmojo.meta.TP,P=mstrmojo.meta.STP,AR=AM.TP,W=AM.STP,U=mstrmojo.elementHelper;var AX={};AX[b.AQ]={target:1,fm:1,fn:1,c0:1,c1:1};AX[b.AL]={target:1,fm:1,fn:1,c0:1};AX[b.AE]={target:1,fm:1,es:1};AX[b.AC]={target:1,fm:1,fm2:1,fm3:1,fn:1,c0:1,c1:1};AX[b.MQ]={target:1,fn:1,c0:1,c1:1,dmy:1};AX[b.MC]=AX[b.MQ];AX["*"]={target:1};var B={};B[b.MQ]={key:"metricFns",def:AM.METRIC_FNS};B[b.MC]={key:"metricFns",def:AM.METRIC_FNS};B[b.AQ]={key:"formFns",def:AM.FORM_FNS};B[b.AL]={key:"formFns",def:AM.FORM_FNS};B[b.AC]={key:"formFns",def:AM.FORM_FNS};B[b.AE]={key:"elemFns",def:AM.ELEM_FNS};var x=mstrmojo.desc(14084,"Select a filter option or a qualification."),w=mstrmojo.desc(14085,"Select one or more elements."),u=mstrmojo.desc(14086,"Select an operator."),t=mstrmojo.desc(14087,"Enter a value or select an attribute from the list."),s=mstrmojo.desc(14088,"Select an attribute form. When done, click ## button.").replace("##",'"√"'),r=mstrmojo.desc(14089,"Select a condition."),p=mstrmojo.desc(14090,"Enter a value or select a metric from the list.");var AI=0,AV=1;var H=mstrmojo.ui.ColumnContainer.prototype.updateColumnContainer;function F(Ac){var Ab=true,AY=Ac.model,AZ,Aa=AY&&AM.fnCstCount(AY.fn,AY.fnt);if(!AY){return ;}switch(AY.et){case b.AQ:case b.AL:case b.MQ:for(AZ=0;AZ<Aa;AZ++){Ab=Ab&&!Ac["invalid"+AZ];}break;}Ac.okBtn.set("visible",Ab&&!!AY.completed);}function J(){var AZ=this.parent,AY=((AZ&&AZ.cssText)||"").match(/height:\s*(\d*)px/);this.cssText=AY&&AY[0];}var Y="dummy",o={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:Y,css:"unselectable"},A={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:Y,css:"unselectable"},AT={did:"idSelect",v:"idSelect",n:mstrmojo.desc(547,"Select"),t:Y,css:"unselectable"},AG={did:"idWait",v:"idQualification",n:mstrmojo.desc(5225,"Qualification"),t:Y,css:"unselectable"},a={did:"idAttribute",v:"idAttribute",n:mstrmojo.desc(518,"Attribute"),t:Y,css:"unselectable"},AB={did:"idMetric",v:"idMetric",n:mstrmojo.desc(517,"Metric"),t:Y,css:"unselectable"};function k(Aa){if(this.updating){return ;}var Ab=this.multiSelect,Ae=this.selectedItem,Ad=Aa&&Aa.added,Af=Aa&&Aa.removed;if(!Ab&&Ad&&Af&&Ad[0]===Af[0]){return ;}if(Ae&&Ae[AF]===Y){this.updating=true;if(Ab){this.removeSelect([this.selectedIndex]);}else{var AZ=Af&&Number(Af[0]);AZ=(AZ==null)?-1:AZ;this.set("selectedIndex",AZ);}this.updating=false;}else{var AY=this.parent.parent.parent.model;if(Ab){var Ac=this.items;AY.edit(this.alias,{added:Ad&&K.get(Ac,Ad),removed:Af&&K.get(Ac,Af),itemIdField:this.itemIdField});}else{AY.edit(this.alias,Ae);}}}mstrmojo.rw.ConditionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.rw.ConditionList",allowUnlistedValues:true,itemIdField:"did",getItemProps:function AO(Ac,AY){var Ab=!!this.selectedIndices[AY],Ad=Ac.n,Aa=false;if(Ac.t===12){var AZ=K.filter(Ac.fs,function(Ae){return Ae.fgr>0;});if(AZ.length>0){Aa=true;}}return M.copy({cls:(Ab?mstrmojo._IsList.SELECTED_CLS:"")+" "+(Ac.css||"")+" "+(Ac.t?("t"+Ac.t+((Ac.da||Ac.um)?"d":"")+(Aa?"g":"")+(Ac.st?(" st"+Ac.st):"")):""),n:Ad||"&nbsp;"},this._super(Ac,AY));},onselectionChange:function n(AY){this._super(AY);k.call(this,AY);}});function AA(Aa,Ac,AZ){var Ab=Aa.items,AY=K.indexOf(Ab,Ac);if((AY===0)&&(Ab.length===1)){AZ=mstrmojo.Arr.makeObservable((AZ&&AZ.length)?AZ.concat():[]);Aa.set("items",AZ);}else{if(AY>-1){Ab.splice(AY,1);}if(AZ&&AZ.length){K.insert(Ab,(AY>-1)?AY:Ab.length,AZ);}Aa.refresh();}}function N(AY){return mstrmojo.mixin(AY,{scriptClass:"mstrmojo.rw.ConditionList",cssClass:"mstrmojo-"+AY.alias,postCreate:J});}function V(Aa,AY,Ab){var AZ=Aa.cfg;if(AZ){AZ.data=Aa;AZ.parent=Ab;return AJ.ref(AZ);}AZ=new mstrmojo.Label({text:Aa.n||"&nbsp;",cssClass:"dial-item "+(Aa.t?("t"+Aa.t):"")});AZ.markupMethods.onselectedChange=function(){AQ.toggleClass(this.domNode,["selected"],this.selected);};AZ.data=Aa;AZ.parent=Ab;return AZ;}function f(AZ,AY){var Aa=AY+AM.FN_SEP+AZ;return(AZ!=null)?{did:Aa,n:Aa}:null;}function AU(AY){return AY.targets?K.filter(AY.targets,function(AZ){return AZ[AF]===AM.TP.ATTR;}):[];}function Q(Aa,AZ,Ab,Ae){Aa.updating=true;if(AZ){if(Ab!=null){Aa.clearSelect();Aa.set("items",Ab);}var Ad=Aa.itemIdField,Ac=Aa.selectedItem;if((Ac&&Ac[Ad])!=(Ae&&Ae[Ad])){var AY=Math.max(K.indexOf(q((Ab||[]),function(Af){return Af[Ad];}),Ae&&Ae[Ad]),0);Aa.set("selectedIndex",AY);}}Aa.updating=false;}function AN(AY,AZ,Ab,Aa){AY.updating=true;AY.clearSelect();K.forEach(AZ,function(Ac){Ac.title=Ac.title||Ac.n||"";});if(AZ){AY.set("items",AZ);}if(Ab&&Ab.length){AY.setSelectedItems(Ab);}else{if(Aa&&Aa.length){AY.select(Aa);}}AY.updating=false;}function AE(AZ,AY,Aa,Ac,Ab){if(AY){AN(AZ,Aa,Ac,Ab);}}function AD(Aa,AZ){var AY=Aa.model||{},Ab=AY.fn;return(Ab!=null)&&((AY.et===b.MQ)||(AY.et===b.MC)||(AY.et===b.AQ)||(AY.et===b.AL)||(AY.et===b.AC))&&(AM.fnCstCount(Ab,AY.fnt)>AZ);}var e={};e[AK.DATE]=1;e[AK.TIME]=1;e[AK.TIMESTAMP]=1;function l(AY,Aa){var AZ;if(Aa){switch(AC[AY.et]){case"a":AZ=Aa[b.AC];break;case"m":AZ=Aa[b.MC];break;default:AZ=false;break;}}else{AZ=true;}return AZ&&AM.fn_AC_MC(AY&&AY.fn);}function i(AZ){var Ac=AZ&&m[AZ.et],Ab=AZ&&AZ.fm&&AZ.fm.dtp,AY=Ab&&AM.DTP2PROMPT_STP[Ab],Aa={};Aa[Ac]=true;if(AY){Aa[AY]=true;}return Aa;}function d(AY){switch(AY){case c.DataTypeInteger:case c.DataTypeUnsigned:case c.DataTypeDecimal:case c.DataTypeReal:case c.DataTypeDouble:case c.DataTypeFloat:return c.DataTypeNumeric;default:return AY;}}function C(AZ){var Ab=AZ.model,Ag=Ab&&Ab[AC[Ab.et]]&&Ab[AC[Ab.et]][AZ.columnWalk.target.itemIdField],Aa=Ab&&Ab.fm,AY=Aa&&Aa.dtp,Ad=l(Ab,AZ.ets);if(this.targetsLastMod&&this.targetsLastMod===AZ.targetsLastMod&&Ag&&Ag===this._lastTargetId&&this.lastFmDtp===AY&&this.lastFnTp===Ad){return ;}if(!Ad){this.clearSelect();this.set("items",this.items.slice(0,this.preLen));}else{var Ae=i(Ab),Ah=Ab[AC[Ab.et]],Ac=Ab.a?[a]:Ab.m?[AB]:[],Ai=Ac.concat(AM.getSortedObjectsByTypeGroup(K.filter(AZ.targets,function(Aj){return(Aj.t!==4||Aj.did!==Ah.did)&&(Ae[Aj[AF]]||Ae[Aj[P]]);}))),Af=this.items.slice(this.preLen);K.forEach(Af.reverse(),function(Aj){this.remove(Aj);},this);this.add(Ai,-1);}this._lastTargetId=Ag;this.lastFnTp=Ad;this.lastFmDtp=AY;this.targetsLastMod=AZ.targetsLastMod;}function AH(Ar,Ai){Ar.updating=true;var Ae=Ar.parent.parent.parent,Aq=AD(Ae,Ai),Ak,Am;if(Aq){var Aa=Ae.model||{},Ac=Aa.cs,Ao=Ac&&Ac[Ai],Ah=Ao&&Ao.v,Af;C.call(Ar,Ae);switch(Aa.et){case b.MQ:case b.MC:Af=(Ao&&Ao.dtp)||d(Aa.m.dt)||AM.METRIC_DTP;break;case b.AQ:case b.AC:case b.AE:Af=Aa.fm&&Aa.fm.dtp;break;case b.AL:Af=Aa.fm&&Aa.fm.dtp;Ah=[];for(Ak=0,Am=Ac&&Ac.length;Ak<Am;Ak++){Ah.push(Ac[Ak].v);}Ah=Ah.join(mstrConfig.listSep);break;}Af=Af||AK.CHAR;var Ad=Aa.fn,Aj=AM.fn_List(Ad,Aa.fnt),Al=e[Af],An=Al&&!Aj;var AZ=Ar.ctxtBuilder,AY=AZ&&AZ.itemWidgets,Ap=Al?(An?Ar.calIndex:Ar.dtxtIndex):Ar.txtIndex,Ab;for(Ak=0,Am=Ar.preLen;Ak<Am;Ak++){Ab=AY[Ak];if(Ak==Ap){Ab.set("dtp",Af);Ab.set("isList",Aj);Ab.set("value",Ah);Ab.set("visible",true);try{if(Ar.alias!=="c1"){Ab.focus&&Ab.focus();}}catch(Ag){}if(Ad===1||Ad===2){Ab.constraints.min=0;}if(Ab.clearValidation){Ab.clearValidation();}}else{Ab.set("visible",false);}if(Aj){Ab.set("hint",mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep||";"));}else{Ab.set("hint","");}}if(Ae.hasPrompt&&Ar.selectedItem&&Ar.selectedItem.st===AM.STP.PROMPT_STRING){Ae.invalid0=false;}switch(Aa.et){case b.AQ:case b.AL:case b.MQ:if(Ao&&Ao.p){Ar.set("selectedItem",Ao.p);}else{Ar.set("selectedIndex",Ap);}break;case b.MC:case b.AC:Ar.set("selectedItem",Aa[AC[Aa.et]+(2+Ai)]);break;}}Ar.updating=false;}function h(){var Ab=this.parent,AZ=Ab.parent.parent.parent,Aa=(this.isValid&&this.isValid())||(!this.isValid&&!mstrmojo.string.isEmpty(this.value)),AY=AZ.model;AZ["invalid"+Ab.cstIndex]=!Aa;if(!this.updating&&Aa){this.updating=true;if(AY){AY.edit(Ab.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}F(AZ);}function AP(){var AZ=this.parent,AY=AZ.parent;AY["invalid"+AZ.cstIndex]=false;}function z(AY){this.tip.set("text",AY);}function D(Aa){var Ac=this.selectedItem;Aa=K.filter(Aa,function(Ad){return(!Ad.icf);});if(Ac){var AZ=K.find(Aa,this.itemIdField,Ac[this.itemIdField]);if(AZ>-1){Aa=Aa.concat();Aa.splice(AZ,1);}}AA(this,A,Aa);var Ab=this.items,AY=Ab.length;if(AY===1){this.singleSelect(0);}this.parent.updateScrollbars();}function I(AZ){var AY=[{did:660,cfg:{scriptClass:"mstrmojo.ValidationTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP|mstrmojo.validation.TRIGGER.VALUESET},onValid:h,onInvalid:h,onClearValidation:AP,size:6,visible:false}},{did:154,cfg:{scriptClass:"mstrmojo.Calendar",onvalueChange:h,visible:false}},{did:23,cfg:{scriptClass:"mstrmojo.DateTextBox",cssText:"margin-left:9px;",cssDisplay:"inline-block",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:h,onInvalid:h,onClearValidation:AP,calendarToBody:true,autoFormat:false,calConfig:{onmousedown:function(Aa){mstrmojo.dom.stopPropogation(Aa.hWin,Aa.e);}},visible:false}}];return N(M.copy(AZ,{scriptClass:"mstrmojo.WidgetDial",makeObservable:true,itemFunction:V,selectionPolicy:"reselect",items:AY.concat(),txtIndex:0,calIndex:2,dtxtIndex:2,preLen:AY.length,insertUnlistedValuesAt:-1,itemIdField:"did",update:function(){AH(this,this.cstIndex);this.parent.updateScrollbars();},postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},itemsEffect:undefined,onchange:k}));}function G(AY){return N(M.copy(AY,{insertUnlistedValuesAt:-1,postCreate:function(){J.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,readCache:true,writeCache:true,params:{taskId:"getAttributeForms",attributeId:null,displayedForms:"0",styleName:"MojoAttributeStyle"},onsuccess:function(){var Aa=this.parent,AZ=this.response;if((AZ&&AZ.did)!==Aa.lastAttrId){return ;}D.call(this.parent,AZ.fms||[]);},onerr:function(){AA(this.parent,A,[o]);}});},update:function(){var Aj=this.fmPost,Ab=this.parent.parent.parent,Ad=Ab.model,Ai=Ad&&Ad["a"+Aj],Ag=!!Ai,Ac,Af,Ak,Aa=Ab.disableElementsBrowsing,AZ=Ai&&Aa&&Aa(Ai);if(Ag){switch(Ad.et){case b.AQ:case b.AL:Af=Ad.fm;break;case b.AC:Af=Ad["fm"+Aj];break;case b.AE:Af=f(Ad.fn,1);break;}if(this.lastAttrId!==Ai.did){this.lastAttrId=Ai.did;Ac=[];if(this.isFirstFm){if(!AZ&&(!Ai.ilk&&(!Ab.ets||Ab.ets[b.AE]))){Ac.push(AT);var Ae=B[b.AE],Ah=Ae&&Ae.key;Ac=Ac.concat((Ah&&Ab[Ah])||Ae.def||[]);}Ac.push(AG);}if(Af&&(Ad.et!==b.AE)){Ac.push(Af);}Ak=this.ajx;Ak.params.attributeId=Ai.did;Ak.params.otp=Ai.t||12;Ac.push(A);L.makeObservable(Ac);}}if(AZ&&Ad.et===b.AE){Af=null;}Q(this,Ag,Ac,Af);if(Ag&&Ak){if(Ab.getAttributeForms){D.call(this,Ab.getAttributeForms(Ai.did)||[]);}else{if(Ai.fms){D.call(this,Ai.fms);}else{if(Ak){if(Ak._delayId){window.clearTimeout(Ak._delayId);delete Ak._delayId;}Ak._delayId=window.setTimeout(function(){delete Ak._delayId;Ak.send();},500);}}}}}}));}var y=[AM.STP.PROMPT,AM.STP.PROMPT_OBJECTS,AM.STP.PROMPT_ELEMENTS,AM.STP.PROMPT_EXPRESSION,AM.STP.PROMPT_EXPRESSION_DRAFT];function Z(AY){if(AY&&!M.isEmpty(AY)){var AZ=K.hash(y);M.forEach(AY,function(Ab,Aa){if(Ab){AZ[m[Aa]]=true;}});return AZ;}return null;}mstrmojo.rw.ConditionWalkProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.rw.ConditionWalkProvider",browseEs:function S(Ab,Aa,Ad){Ab.openPopup("eb",{zIndex:Ab.parent.zIndex+10,left:Math.round(Ad.x)+"px",top:Math.round(Ad.y)+"px"});var AZ=Ab.eb.browser,AY=Ab.model,Ac=AY&&AY.a&&AY.a.did;if(!Ac){return ;}AZ.set("attributeID",Ac);AZ.set("selectedItems",AY.es?M.clone(AY.es):[]);AZ.initBrowser();},browseObjs:function AS(Af,AY,AZ){Af.openPopup("ob",{zIndex:Af.parent.zIndex+10,left:Math.round(AZ.x)+"px",top:Math.round(AZ.y)+"px"});var Aa=Af.ob.browser;Aa.target=AY;var Ab;switch(AY.alias){case"dmy":Ab=[AM.TP.ATTR,AM.TP.DIM];break;case"c0":case"c1":var Ad=Af.model,Ac=Ad&&Ad.et,Ag=Ad&&Ad.fm,Ae=Ag&&Ag.dtp||(Ad.m?AM.DTP.DECIMAL:AM.DTP.UNKNOWN);Ab=(Ac===b.MQ||Ac===b.MC)?[AM.TP.METRIC,AM.DTP2PROMPT_STP[Ae]]:[AM.TP.ATTR,AM.DTP2PROMPT_STP[Ae]];break;default:Ab=Z(Af.ets);Ab=Ab?M.keyarray(Ab,true):[AM.TP.ATTR,AM.TP.METRIC,AM.STP.REPORT_GRID,AM.STP.REPORT_GRAPH,AM.STP.REPORT_ENGINE,AM.STP.REPORT_TEXT,AM.STP.REPORT_DATAMART,AM.STP.REPORT_BASE,AM.STP.REPORT_GRIDGRAPH,AM.STP.REPORT_NONINTERACTIVE,AM.STP.FILTER].concat(y);}Ab[Ab.length]=AM.TP.FOLDER;Aa.browse({rootFolderType:Ad&&(Ad.et===b.MQ||Ad.et===b.MC)?5:26,folderLinksContextId:33,onSelectCB:[Af,"onOBSelect"],browsableTypes:Ab.join(",")});},getFm2NodeProps:function AL(){return{alias:"fm2",children:[G({alias:"fm2",fmPost:2})],updateColumnContainer:function AY(){var AZ=this.parent.parent;this.fm2.update();z.call(AZ,s);H.call(this);}};},getC0NodeProps:function E(){var AY=this;return{alias:"c0",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(527,"Value")},I({alias:"c0",cstIndex:0}),{scriptClass:"mstrmojo.Label",alias:"btwn",cssClass:"btwn",text:mstrmojo.desc(308,"and"),visible:false},I({alias:"c1",cstIndex:1,visible:false}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.c0);},visible:false}],updateColumnContainer:function AZ(){this.c0.update();var Ac=this.parent,Ae=Ac.parent,Af=Ac.parent.model,Ah=Af&&Af.fn,Ad=Ah===O.BETWEEN||Ah===O.NOT_BETWEEN||Ah===v.BETWEEN||Ah===v.BETWEEN_DESCENDING,Ab=Ah===O.EQUAL||Ah===O.NOT_EQUAL||Ah===O.GREATER||Ah===O.GREATER_EQUAL||Ah===O.LESS||Ah===O.LESS_EQUAL,Aa=this.idx,Ag=this.next;this.browseLink.set("visible",Ae.objectBrowsingEnabled&&l(Af,Ae.ets));this.btwn.set("visible",Ad);this.c1.set("visible",Ad);if(Ad){this.c1.update();}else{Af.edit("c1",{v:null,dtp:null,skipET:true});}if(Af.a2&&Ab){if(!(Ag&&Ag.fm2)){Ac.insertAndRemoveTrailing(Aa,AY.getFm2NodeProps());}}else{Ac.removeTrailingContainer(Aa);}z.call(Ae,Af.a?t:Af.m?p:"");H.call(this);}};},getFnNodeProps:function AW(){var AY=this;return{alias:"fn",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(9579,"Condition")},G({alias:"fn",allowUnlistedValues:false,update:function(){var Af=this.parent.parent.parent,Ab=Af.model||{},Ag=Ab.et,Ae,Ah=false,Ai,Aa;switch(Ag){case b.AE:Ah=!!Ab.a;break;case b.AQ:case b.AC:case b.AL:Ah=!!(Ab.fm&&Ab.fm.did);Ae=Ah?Ab.fm.dtp:null;break;case b.MQ:case b.MC:Ah=!!Ab.m;Ae=Ah?AM.METRIC_DTP:null;break;}if(Ah){var Aj=j[Ae];if((this.lastEt!==Ag)||(this.lastFnDtp!==Aj)){this.lastEt=Ag;this.lastFnDtp=Aj;var Ad=Ag?B[Ag]:null,Ac=Ad&&Ad.key;Ai=(Ac&&Af[Ac])||Ad.def||[];if(typeof (Ai)==="object"){Ai=Ai[Aj]||Ai["*"];}}Aa=f(Ab.fn,Ab.fnt||1);}Q(this,Ah,Ai,Aa);this.parent.updateScrollbars();}})],updateColumnContainer:function AZ(){this.fn.update();var Aa=this.parent,Ab=Aa.parent,Ac=Ab.model,Ae=Ac&&Ac.fn,Ad=this.next,Af=Ae===O.IS_NULL||Ae===O.IS_NOT_NULL;if(Ae&&Af){Aa.removeTrailingContainer(this.idx);}else{if(Ae&&!(Ad&&Ad.c0)){Aa.insertAndRemoveTrailing(this.idx,AY.getC0NodeProps());}}z.call(Ab,Ac.a?u:Ac.m?r:"");Ad=this.next;if(Ad){Ad.updateColumnContainer();}}};},getEsNodeProps:function T(){var Aa=[{scriptClass:"mstrmojo.ui.CheckList",alias:"es",itemIdField:"v",allowUnlistedValues:true,insertUnlistedValuesAt:0,selectionPolicy:"toggle",postCreate:function AZ(){J.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,params:{taskId:"browseElements",attributeID:null,styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30},onsuccess:function(){var Al=this.parent,Af=this.response;if((Af&&Af.did)!==Al.lastAttrId){return ;}var Ah=(Af&&Af.es)?K.filter(Af.es,function(Am){return !U.isNullElem(Am.v);}):[],Ak=Al.parent.parent.parent.model&&Al.parent.parent.parent.model.es,Ai=function(As,An){var Ar=As&&As.length||0,Aq=An&&An.length||0,Am=[],Ap,Ao;for(Ap=0;Ap<Aq;Ap++){for(Ao=0;Ao<Ar;Ao++){if(An[Ap].n===As[Ao].n){break;}}if(Ao===Ar){Am.push(An[Ap]);}}return Am;},Aj=function(Am,An,Aq){var Ap=[],Ao;K.forEach(Am,function(Ar){Ao=K.filterOne(An,function(As){return Ar[Aq]&&As[Aq]&&Ar[Aq]===As[Aq];});if(Ao){Ap.push(Ao);}});return Ap.length===Am.length?Ap:Am;};Ak=Ak&&Aj(Ak,Ah,"v");if(Al.allowUnlistedValues){var Ag=Ai(Ah,Ak);Ah=(Al.insertUnlistedValuesAt===0)?Ag.concat(Ah):Ah.concat(Ag);}AN(Al,Ah,Ak,null);Al.parent.updateScrollbars();},onerr:function(){AA(this.parent,A,[o]);}});},onselectionChange:function Ad(Af){mstrmojo.ListBase.prototype.onselectionChange.call(this,Af);k.call(this,Af);},update:function Ac(){var Ai=this.parent.parent.parent,Ah=Ai.model,Am=Ah&&Ah.a,An=!!Am&&!Am.ilk,Ao,Af,Al,Aj,Ag,Ap;if(An){if(this.lastAttrId!==Am.did){this.lastAttrId=Am.did;Ao=Ah.es;Aj=Ao&&Ao.length;Ao=Aj?Ao.concat():[];Ao.push(A);if(Aj){Al=[];for(Ag=1;Ag<=Aj;Ag++){Al[Ag]=Ag;}}Ap=this.ajx;Ai.updateBrowseElementsParams(Ap.params,Am);}else{Af=Ah.es;}}AE(this,An,Ao,Af,Al);if(An&&Ap){if(Ai.getElements){var Ak=this;Ai.getElements(Am,{success:function(Aq){AN(Ak,Aq.es||[],Ai.model&&Ai.model.es,null);Ak.parent.updateScrollbars();},failure:function(){AA(Ak,A,[o]);}});}else{Ap.send();}}},setupScrollNodes:function Ab(){this.scrollNode=null;}}];if(!mstrApp.isSingleTier){Aa.splice(0,0,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7928,"Browse elements..."),onclick:function AY(){this.parent.parent.parent.browse(this.parent.es);}});}return{alias:"es",children:Aa,updateList:function(Af){AE(this.es,true,Af,this.parent.parent.model.es,null);this.updateScrollbars();},updateColumnContainer:function Ae(){var Af=this.parent.parent;this.es.update();z.call(Af,w);}};},getFmNodeProps:function g(){var AY=this;return{alias:"fm",children:[G({alias:"fm",fmPost:"",filter:false,isFirstFm:true})],updateColumnContainer:function AZ(){this.fm.update();var Aj=this.parent,Ae=Aj.parent,Ad=Ae.model,Ag=Ad&&Ad.fm,Ai=this.idx,Ah=Ad&&Ad.a,Ab=Ae.disableElementsBrowsing,Aa=Ah&&Ab&&Ab(Ah);var Af=(Ad.etWas&&Ad.etWas===b.AE)?AV:AI,Ac=AI;if(Ad.et===b.AE&&!Aa){Ac=AV;}if(Af!==Ac||Ac===AI){Aj.removeTrailingContainer(Ai);if(Ac===AI&&Ag){Aj.addNextColumn(AY.getFnNodeProps());}else{if(Ac===AV){Aj.addNextColumn(AY.getEsNodeProps());}}}z.call(Ae,x);H.call(this);}};},getTargetNodeProps:function R(){var AY=this;return{alias:"target",target:null,browseLink:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(11859,"Based On")},N({alias:"target",insertUnlistedValuesAt:0,makeObservable:true,hideIfEmpty:true,postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},onObjBrowsed:function(Ab){if(Ab.st===W.FILTER||Ab.t===AR.REPORT||Ab.t===AR.PROMPT){this.parent.parent.parent.onOK();}},update:function Aa(){var Ac=this.parent.parent.parent,Ad=Ac.model,Ag=Ac.targetsLastMod,Ah=Ad&&Ad.et;if(this.lastModel!==Ad||this.targetsLastMod!==Ag){this.lastModel=Ad;this.targetsLastMod=Ag;var Ab=Ac.targets,Ai=Ac.ets;if(Ai&&Ab&&Ab.length){var Af=Z(Ac.ets);Ab=K.filter(Ab,function(Aj){return Af[Aj[AF]];});}var Ae=Ad&&Ad[AC[Ah]];Q(this,true,AM.getSortedObjectsByTypeGroup(Ab),Ae);this.parent.updateScrollbars();}}}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.target);}}],updateColumnContainer:function AZ(){this.target.update();var Ac=this.parent,Ad=Ac.parent,Ae=Ad.model,Ag=Ae&&Ae.et,Ab=this.idx,Af=this.next;this.browseLink.set("visible",Ad.objectBrowsingEnabled);if(Ag){switch(Ag){case b.AQ:case b.AL:case b.AC:case b.AE:if(Ae.a&&!(Af&&Af.fm)){this.parent.insertAndRemoveTrailing(Ab,AY.getFmNodeProps());}break;case b.MQ:case b.MC:if(Ae.m&&!(Af&&Af.fn)){this.parent.insertAndRemoveTrailing(Ab,AY.getFnNodeProps());}break;case b.R:case b.F:case b.XML:this.parent.removeTrailingContainer(Ab);break;}}Af=this.next;if(Af){Af.updateColumnContainer();}}};}});var X=mstrmojo.rw.ConditionWalkProvider;X.updateOkBtn=F;X.setTip=z;X.getChildJSON=N;X.updateList=Q;X.fmJson=G;X.cstJson=I;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.hash","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._HasPopup","mstrmojo.ui.ColumnWalk","mstrmojo.Button","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ConditionModel","mstrmojo.rw.ConditionWalkProvider");var P=mstrmojo.Widget,H=mstrmojo.array,E=mstrmojo.dom,M=mstrmojo.hash,A=mstrmojo.mstr.EnumNodeDimty,S=mstrmojo.rw.ConditionWalkProvider.updateOkBtn,I=mstrmojo.rw.ConditionWalkProvider.setTip;var C=mstrmojo.desc(11899,"Select a dataset object.");var K=H.hash([A.NodeDimtyOutputLevel]);function D(){var T=this.model;if(T){if(!T.attachEventListener){mstrmojo.hash.make(T,mstrmojo.ConditionModel,{});}T.attachEventListener("edit",this.id,"onmodeledit");}}function L(U,T){if(T&&T.detachEventListener){T.detachEventListener("edit",U.id,"onmodeledit");}}function N(Y,T){var W=T,X=[],V=[],U=[],Z=false;M.forEach(W,function(a){X=X.concat(a.att.filter(function(b){return b.did===Y;}));});Z=X[0]&&X[0].da;X.forEach(function(a){V=V.concat(a.fs||[]);});V.forEach(function(a){if((a.obf||Z)&&U.filter(function(b){return b.did===a.fid;}).length===0){U.push({did:a.fid,dtp:mstrmojo.expr.mapBaseFormTypeToDataType(a.bftp),n:a.fnm,t:a.t});}});return U;}mstrmojo.rw.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._HasPopup],{scriptClass:"mstrmojo.rw.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},walkNode:function(){return this.domNode.children[1];},applyNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function J(){P.visibleMarkupMethod.call(this);if(this.visible){this.initWalk();}},onheightChange:P.heightMarkupMethod,onwidthChange:P.widthMarkupMethod},layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",applyNode:"auto"},xt:true},editor:undefined,columnWalk:undefined,tip:undefined,walkProvider:null,objectBrowsingEnabled:true,postCreate:function B(){if(this._super){this._super();}if(!this.walkProvider){this.walkProvider=mstrmojo.insert(mstrmojo.rw.ConditionWalkProvider);}},initWalk:function O(){var T=this.columnWalk,U=this.walkProvider;I.call(this,C);T.removeTrailingContainer(-1);T.addNextColumn(U.getTargetNodeProps());T.target.updateColumnContainer();S(this);},updateBrowseElementsParams:function(W,V){W.attributeID=V.did;W.otp=V.t||12;var U=this.editor,T=U&&U.onUpdateBrowseElementsParams;if(T){T.call(U,W,V);}},children:[{scriptClass:"mstrmojo.ui.ColumnWalk",alias:"columnWalk",slot:"walkNode",height:"333px",width:"750px"},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",title:mstrmojo.desc(2399,"Cancel"),ignoreLayout:true,onclick:function(){var T=this.parent;if(T.close){T.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",title:mstrmojo.desc(2397,"OK"),onclick:function(){var T=this.parent;if(T.onOK){T.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:C,ignoreLayout:true}],eb:{scriptClass:"mstrmojo.Editor",cssClass:E.isIE7?"mstrmojo-ElementsEditorIE7":"mstrmojo-ElementsEditor",title:mstrmojo.desc(6149,"Select Elements"),help:"element_browser_dialog_box.htm",children:[{scriptClass:"mstrmojo.ElementsBrowser",alias:"browser",onUpdateBrowseElementsParams:function(U){var T=this.parent.opener;T.updateBrowseElementsParams(U,T.model.a);}},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-WebButton hot",cssText:"width: 66px;",onclick:function(){var T=this.parent.parent,U=T&&T.opener;if(U){U.onEBSelect();U.closePopup();}}},{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-WebButton",cssText:"min-width: 66px; margin-left: 11px;",onclick:function(){var T=this.parent.parent,U=T&&T.opener;if(U){U.closePopup();}}}]}]},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,upButtonVisible:true,scrollableIncFetch:true,showCompletePath:false,closeable:false,closeOnSelect:false,browsableTypes:"3,4,8,10,12,256",includeObjectDesc:true,quickSearch:true,minSearchLength:1}]},_set_model:function R(W,T){var U=this.model,V=(T!==U);if(V){L.call(this,U);T.dimtyTypes=this.dimtyTypes||K;this.model=T;D.call(this,T);if(this.hasRendered&&this.visible){this.columnWalk.target.updateColumnContainer();}}return V;},onmodeledit:function G(T){this.columnWalk[T.prop==="c1"?"c0":T.prop].updateColumnContainer();S(this);},browse:function F(V){var X=this.parent.editorNode,W=function(Z,b){var Y=mstrmojo.dom.position(Z,true),a=mstrmojo.dom.position(b,true);return{x:Y.x+Y.w,y:a.y};},T=this.columnWalk,U=this.walkProvider;switch(V&&V.alias){case"target":case"dmy":U.browseObjs(this,V,W(V.alias==="target"?T.target.domNode:this.dmyNode,X));break;case"c0":case"c1":U.browseObjs(this,V,W(T.c0.domNode,X));break;case"es":U.browseEs(this,V,W(T.es.domNode,X));break;}},onOBSelect:function(X){var V=this.ob.browser,Z=V.target;this.closePopup();var U=this.targets,Y=Z.itemIdField,W=U||[],T=H.find(U,Y,X[Y]);if(T===-1){W.push(X);this.targets=W;this.targetsLastMod=new Date();this.raiseEvent({name:"updateTargets",targets:this.targets});}Z.setSelectedItems([X],Z.multiSelect);if(Z.onObjBrowsed){Z.onObjBrowsed(X);}},onEBSelect:function(){var U=this.eb.browser,W=this.columnWalk.es.es;W.set("selectedIndices",{});var T=W.items,V=[];H.forEach(U.selectedItems||[],function(Y){if(H.find(W.items,"v",Y.v)<0){V.push(Y);}});var X=W.insertUnlistedValuesAt||0;if(X<0){X=T.length;}W.set("items",T.slice(0,X).concat(V).concat(T.slice(X)));W.setSelectedItems(U.selectedItems,false);},destroy:function Q(U){var T=this.walkProvider;if(T&&T.destroy){this.walkProvider.destroy();}this._super(U);}});mstrmojo.rw.ConditionWalk.getAttForms=N;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.rw.ConditionWalk","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.ui.Checkbox","mstrmojo.expr","mstrmojo.css");var F=mstrmojo.expr.ET.MQ,H=mstrmojo.expr.ET.MC,C=mstrmojo.css,B=mstrmojo.desc(14387,"Evaluate this condition independent of other dataset level conditions");var G=function(K,M){var J=K.et,L=((J===F||J===H)&&!this.inRelation)?"block":"none",I=((M===1)||J!==F)?1:0;C.toggleClass(this.toolNode,"unselectable",J===H);this.toolNode.style.display=L;this.level.set("selectedIndex",I);this.includeExist.set("visible",I===1&&(J===H||J===F));this.includeExist.set("checked",K.idcsi===undefined?false:K.idcsi);};mstrmojo.fe.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,null,{scriptClass:"mstrmojo.fe.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="tools"></div><div class="apply"></div></div>',markupSlots:mstrmojo.hash.copy({toolNode:function(){return this.domNode.childNodes[2];}},mstrmojo.hash.copy(mstrmojo.rw.ConditionWalk.prototype.markupSlots)),layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",toolNode:"auto",applyNode:"auto"},xt:true},postCreate:function E(){this.children=mstrmojo.hash.clone(this.children).concat([{scriptClass:"mstrmojo.Label",slot:"toolNode",text:mstrmojo.desc(13517,"Calculate on")},{scriptClass:"mstrmojo.ui.Pulldown",slot:"toolNode",alias:"level",isHostedWithin:false,items:[{n:mstrmojo.desc(13518,"Template level"),v:0},{n:mstrmojo.desc(13519,"Dataset level"),v:1}],onitemSelected:function I(J){var K=this.parent;if(K&&K.condition&&K.visible){K.includeExist.set("visible",J.v===1);K.condition.level=J.v;}}},{scriptClass:"mstrmojo.ui.Checkbox",alias:"includeExist",slot:"toolNode",postBuildRendering:function(){this.domNode.innerHTML=B;},oncheckedChange:function(){var J=this.parent;if(J){J.model.set("idcsi",this.checked);}}}]);if(this._super){this._super();}},onvisibleChange:function A(I){var J=this.condition;if(J&&this.toolNode&&this.visible){G.call(this,J.data,J.tree.level);}if(this._super){this._super(I);}},onmodeledit:function D(I){if(this._super){this._super(I);}if(this.toolNode){G.call(this,this.model.get(),this.model.level);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Dial","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Obj","mstrmojo.CheckBox","mstrmojo.warehouse.EnumObjectTypes","mstrmojo.fe.FilterExprTree","mstrmojo.fe.RelationFilterExprTree","mstrmojo.fe.CreateSetEditor","mstrmojo.fe.ConditionWalk","mstrmojo.ui.Pulldown","mstrmojo.ui.StatusButton");var Z=mstrmojo.expr,I=Z.ET,P=Z.BRANCH_FNS,X=mstrmojo.Obj,W=mstrmojo.dom,a=mstrmojo.array,T=mstrmojo.hash,d=mstrmojo.css,C=mstrmojo.warehouse.EnumObjectTypes,K={TEMPLATE:0,DATASET:1},E=mstrmojo.mstr.EnumNodeDimty,R=a.hash([E.NodeDimtyUnspecified,E.NodeDimtyNone]),N=200,H=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function B(g){a.forEach(this.buttonBar.children[0].children,function(h){h.set("enabled",g);});}function Y(){var g=this.avatar;if(g){g.parentNode.removeChild(g);delete this.avatar;d.removeClass(g,[this.avatarCssClass]);}}mstrmojo.fe.FilterEditorBase=mstrmojo.declare(mstrmojo.Editor,null,{onSave:null,title:mstrmojo.desc(12032,"View Filter Editor"),help:"view_filter_editor_for_report_services_documents.htm",cssClass:"mstrmojo-charcoalboxe mstrmojo-FE",showLimits:true,objectBrowsingEnabled:false,children:null,init:function U(g){this.children=[{alias:"feContent",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-content",postCreate:function(){this.children=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-exprTool",children:[{scriptClass:"mstrmojo.ui.StatusButton",cssClass:"mstrmojo-FE-addCondition",postCreate:function h(){this.editor=this.parent.parent.parent;this.statusList=this.editor.getAddConditionList();this.status=this.statusList[0];},onButtonClick:function(i){if(i){i.handler.apply(this.editor);}}}]},this.parent.getExpressionContainerCfg()];}},this.getConditionWalkConfig(),{alias:"buttonBar",scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HBox",cssText:"float:right; border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(118,"Save"),onclick:function(){var h=this.editor;M(h);h.close();},bindings:{enabled:function(){return !this.editor.readOnly;},editor:"this.parent.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.editor.close();},bindings:{editor:"this.parent.parent.parent"}}]}]}];this._super(g);this.model=this.model||new X();},getExpressionContainerCfg:function(){var g=this;return{alias:"feExpr",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-expr-list",postCreate:function(){this.children=g.getExpressionContentsConfig();},onRender:function(){W.attachMarkupEvent(this.id,this.domNode,"mousedown");},onmousedown:function(h){var i=W.eventTarget(h.hWin,h.e);if(this.isBlankArea(i)){this.clearSelect();}},isBlankArea:function(h){return h===this.domNode;},clearSelect:function(){}};},getExpressionContentsConfig:function(){return[];},getConditionWalkConfig:function(){var h=this;return{scriptClass:"mstrmojo.rw.ConditionWalk",width:"750px",objectBrowsingEnabled:false,dimtyTypes:R,alias:"walk",visible:false,onOK:function g(){var j=this.condition;h.feContent.set("visible",true);this.set("visible",false);h.onConditionEdit(j,this.model.get());B.call(h,true);},close:function i(){h.feContent.set("visible",true);this.set("visible",false);var j=this.condition;if(j.isEmpty()){j.del();}B.call(h,true);},targets:null,targetsLastMod:null,ets:null,condition:null,bindings:{disableElementsBrowsing:"this.parent.disableElementsBrowsing"}};},onConditionEdit:function(h,g){h.tree.modifyConditionNode(h,g);},getAddConditionList:function c(){return[{n:mstrmojo.desc(1994,"Add Condition"),handler:function(){this.mainExpr.newCondition(null,true);}}];},andOrPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-FE-andOrPopup mstrmojo-CGE-andOrPopup mstrmojo-ConditionWalk",contentNodeCssClass:"mstrmojo-balloon",slot:"containerNode",modal:false,autoClose:true,showTitle:false,draggable:false,openEffect:null,closeEffect:null,onOpen:function(){var g=this.condition,j=g&&g.data&&g.data.not,k=g&&g.parent,h=k&&k.data,i=(h&&h.fn)+(j?21:0);this.list.opening=true;this.list.set("selectedItem",isNaN(i)?null:{did:i});this.list.opening=false;},children:[{scriptClass:"mstrmojo.Dial",cssClass:"mstrmojo-CGE-andOrDial",alias:"list",itemMarkup:'<div class="dial-item {@css}">{@n}</div>',itemIdField:"did",items:[{did:19,n:P[19]},{did:20,n:P[20]},{did:19+21,n:P["19_21"]},{did:20+21,n:P["20_21"]}],onchange:function(){if(this.opening){return ;}var h=this.parent,g=h.condition,m=this.selectedItem,l=m&&m.did,k=l>21?true:null,j=l-(k?21:0);h.close();var i=g&&g.parent;if(i&&i.data&&i.data.et===I.ANDOR){i.edit(g,j,k);}else{var n=g&&g.data;if(n&&(n.not!==k)){n.not=k;g.paint();}}}}]},createSetPopupRef:{scriptClass:"mstrmojo.fe.CreateSetEditor",contentNodeCssClass:"",cssClass:"CreateSet-Editor",title:mstrmojo.desc(12034,"Create a Set"),slot:"containerNode"},_set_busy:function(h,g){if(g){this.set("enabled",false);this.set("iconClass","mstrmojo-WaitIcon");}else{this.set("enabled",true);this.set("iconClass","");}},_set_model:function(k,h){var i=this.model,j=i!==h;if(j){this.model=h;this.modelLastSet=new Date();var g=function(l){return Q(J(l));};h.exprForest=g(h.expr);h.limitExprForest=g(h.limitExpr);if(this.feContent&&this.feContent.feExpr.ve){this.feContent.feExpr.ve.nameFactory.clear();}}return j;},onUpdateBrowseElementsParams:mstrmojo.emptyFn});mstrmojo.fe.ReportFilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,null,{getExpressionContainerCfg:function(){var g=this._super();return mstrmojo.mixin({clearSelect:function(){this.re.clearTreeSelect();}},g);},getExpressionContentsConfig:function(){return[{alias:"re",scriptClass:"mstrmojo.fe.ReportFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}}];}});mstrmojo.fe.ReportFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.ReportFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",onNew:function(g){g.data.isNew=true;F(this.editor,g.data,g.widget.ctxtBuilder.itemWidgets[g.index],"condition");},onnodeclick:function A(g){F(g.editor||this.tree.editor,this.data,this,g&&g.part);},allowDrop:function G(g){var i=g&&g.src,k=i&&i.data,j=k&&k.et,h=i&&i.widget&&i.widget.tree;return j&&this!==h;}});mstrmojo.fe.FilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,null,{getExpressionContainerCfg:function(){var g=this._super();return mstrmojo.mixin({isBlankArea:function(h){if(this._super(h)){return true;}return !a.filterOne([this.ve,this.vle],function(i){if(W.contains(i.domNode,h,true)){return true;}});},clearSelect:function(){this.ve.clearTreeSelect();this.vle.clearTreeSelect();}},g);},getExpressionContentsConfig:function(){return[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11746,"Dataset Level Conditions"),cssClass:"mstrmojo-FE-expr-header dl",bindings:{visible:"true || this.parent.parent.parent.showLimits"}},{alias:"ve",scriptClass:"mstrmojo.fe.RWViewFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},onBlankClick:function(g){this.parent.clearSelect(g);},supportRelation:true,postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11747,"Template Level Conditions"),cssClass:"mstrmojo-FE-expr-header tl",bindings:{visible:"this.parent.parent.parent.showLimits"}},{alias:"vle",scriptClass:"mstrmojo.fe.RWViewLimitExprTree",level:K.TEMPLATE,bindings:{visible:"this.editor.showLimits",items:"this.editor.model.limitExprForest || []"},onBlankClick:function(g){this.parent.clearSelect(g);},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("limitExpr",this);}}];},getConditionWalkConfig:function(){var g=this._super();T.copy({scriptClass:"mstrmojo.fe.ConditionWalk"},g);return g;},getAddConditionList:function c(){var g=this._super();g.push({n:mstrmojo.desc(12055,"Add Dynamic Condition"),handler:function(){this.mainExpr.newCondition({et:I.XML,idc:1,ph:{}},true);}});return g;},onConditionEdit:function(i,h){if(i.tree.level===i.level||i.tree.level===undefined){this._super(i,h);}else{i.parent.remove(i.data);var g=K.TEMPLATE===i.level?this.limitExpr:this.mainExpr;g.addSingleCondition(h);}}});mstrmojo.fe.RWViewFilterExprTree=mstrmojo.declare(mstrmojo.fe.RelationFilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",onNew:function(g){g.data.isNew=true;if(!g.data.ph){F(this.editor,g.data,g.widget.ctxtBuilder.itemWidgets[g.index],"condition");}},onnodeclick:function A(g){F(g.editor||this.tree.editor,this.data,this,g&&g.part);},ondragend:function O(i){var h=i&&i.tgt,g=h&&h.widget;if(this.tree&&g&&g.tree&&g.tree!==this.tree){Y.call(this);return ;}this._super(i);},getItemConfig:function(i,g,j){var h=this._super(i,g,j);return T.copy({getConditionTextPostfix:function(){if(this.data.et!==I.MQ){return"";}return'<img class="mstrmojo-moveToViewLimit" src="../images/1ptrans.gif" title="'+mstrmojo.desc(4978,"Move to view limit")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewLimit(w); return false;\" />";}},h);},moveMQNodeToViewLimit:function(i){if(i.data.et!==I.MQ){return ;}var h=T.copy(i.data);i.parent.remove(i.data);var g=this.editor.limitExpr;g.addSingleCondition(h);},allowDrop:function G(g){var i=g&&g.src,l=i&&i.data,k=l&&l.et,j=this.tree,h=i&&i.widget&&i.widget.tree;return k&&(this===j?(h!==j):true);}});mstrmojo.fe.RWViewLimitExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewLimitExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-limitExpr",validExprTypes:a.hash([I.MQ]),onnodeclick:function A(g){F(this.tree.editor,this.data,this,g&&g.part);},onConditionEdit:function(h,g){this._super(h,g);h.data.mdxUnitId=h.data.m.did;V(h);},addSingleCondition:function(h){var g=this._super(h);V(g);},allowDrop:function(g){var j=g&&g.src,l=j&&j.data,k=l&&l.et,i=this.tree,h=j&&j.widget&&j.widget.tree;if(i===h){return this!==h&&this.data&&(this===j.parent||this.data.mdxUnitId===l.mdxUnitId);}return k===I.MQ;},ondrop:function L(h){var k=h&&h.src,g=k&&k.widget;if(g&&g.tree!==this.tree){var j=k&&k.data;if(j&&j.index!==null){var i=g.ctxtBuilder.itemWidgets[j.index];i.tree.moveMQNodeToViewLimit(i);}k.data=null;}this._super(h);},isEditable:function(g){return g.mdxUnitId&&this._super(g);},ondragend:function S(g){var j=g&&g.tgt,h=j&&j.widget;if(h&&h.tree!==this.tree){var i=g.src&&g.src.data;if(i&&(i.indices||(i.index!==null))){this.remove(i.indices||i.index);}Y.call(this);}else{this._super(g);}},moveMQNodeToViewFilter:function(h){var g=this.editor.mainExpr;h.parent.remove(h.data);g.addSingleCondition(h.data);},getItemConfig:function(i,g,j){i.mdxUnitId=D(i);var h=this._super(i,g,j);return T.copy({cssClass:f(i,g,j)?"per-metric-limit":"",forbidRelation:true,getConditionTextPostfix:function(){if(this.data.et!==I.MQ){return"";}return'<img class="mstrmojo-moveToViewFilter" src="../images/1ptrans.gif" title="'+mstrmojo.desc(9746,"Move to view filter")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewFilter(w); return false;\" />";}},h);}});function F(o,l,m,r){var h=W.delta(m.domNode,o.containerNode);h.y+=(r==="andor"?16:parseInt(m.domNode.offsetHeight,10));var p={condition:m,zIndex:o.zIndex+10,left:h.x+"px",top:h.y+"px"},g;switch(r){case"andor":if(o.skipAndOrPopup){return ;}g="andOrPopupRef";break;case"createSet":case"createSetOpt":var q=o.model.targets;g="createSetPopupRef";p.type=r;p.model={attrs:a.filter(q,function(n){return n.t===C.ATTRIBUTE;}),metrics:a.filter(q,function(n){return n.t===C.METRIC;})};if(r==="createSetOpt"){p.condition=m.parent;p.model.childIdx=m.childIndex();}break;case"condition":var k=o.walk,i=m.textNode.cloneNode(true),j=k.conditionNode.firstChild;d.removeClass(i,"editable");d.addClass(k.conditionNode,"mstrmojo-ConditionNode");if(j.firstChild){j.removeChild(j.firstChild);}j.appendChild(i);k.set("objectBrowsingEnabled",o.objectBrowsingEnabled);k.set("targets",o.model.targets);k.set("targetsLastMod",o.modelLastSet);k.set("ets",m.tree.validExprTypes||o.validExprTypes);k.set("condition",m);k.set("model",T.clone(l));k.set("hasPrompt",o.model.hasPrompt);k.set("disableElementsBrowsing",o.disableElementsBrowsing||k.disableElementsBrowsing);k.set("editor",o);k.set("inRelation",m.inRelation);o.feContent.set("visible",false);k.set("visible",true);k.columnWalk.target.updateScrollbars();B.call(o,false);return ;}o.openPopup(g,p);}function M(h){var g=h.model;g.expr=e(g.exprForest);g.limitExpr=e(b(g.limitExprForest));h.onSave(g);}function Q(h){var g=[];a.forEach(h,function(i){if(!i){return ;}if(i.et===I.ANDOR){i.nds=Q(i.nds);if(i.nds.length===0){return ;}else{if(i.nds.length===1){var j=i.nds[0];if(i.not){j.not=!j.not;}g.push(j);return ;}}}g.push(i);});return g;}function J(g){return g?[g]:[];}function e(g){return g&&g.length===1?g[0]:null;}function b(i){var h=Q(i),g;if(!h[0]||h[0].mdxUnitId){g={et:I.ANDOR,fn:Z.FN.AND,nds:h};}else{g=h[0];}return[g];}function f(h,g,i){return(i===i.tree||i.parent===i.tree)&&!!h.mdxUnitId;}function D(h){if(!("mdxUnitId" in h)){var g;switch(h.et){case I.MQ:g=h.m.did||null;break;case I.ANDOR:a.forEach(h.nds,function(j){var i=D(j);if(g===undefined){g=i;}else{if(g!==i){g=null;return false;}}return true;});break;default:g=undefined;break;}h.mdxUnitId=g;}return h.mdxUnitId;}function V(l){var n=l.tree,m=n.ctxtBuilder.itemWidgets[0],q=l.parent,o=a.indexOf(q.items,l.data),j=q.items[o],h=j.mdxUnitId;if(q===n){return ;}if(q.data.mdxUnitId===h){return ;}if(m.data.mdxUnitId){var i={et:I.ANDOR,fn:Z.FN.AND,nds:[m.data,j]};n.remove(0);n.add([i]);n.ctxtBuilder.itemWidgets[0].ctxtBuilder.itemWidgets[0].remove(j);}else{var k=m,g;a.forEach(m.data.nds,function(s,r){if(s.mdxUnitId===j.mdxUnitId&&m.items[r]!==j){k=m.ctxtBuilder.itemWidgets[r];g=r;return false;}});if(k===q){return ;}if(k.data.et!==I.ANDOR){var p={et:I.ANDOR,fn:Z.FN.AND,nds:[k.data,j]};m.add([p],g+1);m.remove(k.data);}else{k.add([j]);}q.remove(j);}}}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.HBox","mstrmojo.ui.menus.EditorConfig","mstrmojo.mstr.EnumFunction","mstrmojo.DropDownList","mstrmojo.ui.Pulldown","mstrmojo.SearchablePulldown","mstrmojo.ButtonList","mstrmojo.Box","mstrmojo.Label","mstrmojo.RadioList","mstrmojo.CheckList","mstrmojo.EditableLabel","mstrmojo.CheckBox","mstrmojo.fe.FilterEditor","mstrmojo._FormatDefinition","mstrmojo.num","mstrmojo.locales","mstrmojo.vi.models.VIComponentMap","mstrmojo.func","mstrmojo.dom","mstrmojo.ME.AttributeEditBox","mstrmojo.string","mstrmojo.dom","mstrmojo.models.datasets.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.editors.ObjectPicker","mstrmojo.vi.ui.editors.AttributeLinkEditor","mstrmojo.vi.ui.NumberFormatter");mstrmojo.requiresDescs(1442,1885,1886,2022,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,3993,4564,11494,11495,11496,11497,14612);var l=mstrmojo.mstr.EnumFunction,X=mstrmojo.hash,o=mstrmojo.array,AB=mstrmojo.expr.ET,D=mstrmojo.css,V=mstrmojo.dom,r=mstrmojo.Button.newWebButton,S=mstrmojo.ME.MetricToken.brackets,T=mstrmojo._FormatDefinition,m=mstrmojo.models.datasets.DataInterface,K=mstrmojo.vi.models.VIComponentMap.TYPES,U=mstrmojo.chart.model.enums.EnumDSSObjectType;var Y={SUM:mstrmojo.desc(2131,"Sum"),ADD:mstrmojo.desc(6017,"Add"),AVG:mstrmojo.desc(2122,"Average"),MAX:mstrmojo.desc(2125,"Maximum"),GST:mstrmojo.desc(5869,"Greatest"),MIN:mstrmojo.desc(2127,"Minimum"),LST:mstrmojo.desc(5868,"Least"),CNT:mstrmojo.desc(2123,"Count"),MTP:mstrmojo.desc(5418,"Multiply"),STD:mstrmojo.desc(2130,"Standard Deviation"),PTD:mstrmojo.desc(11494,"Population Standard Deviation")},c={SUM:{n:Y.SUM,t:l.FunctionSum},ADD:{n:Y.ADD,t:l.FunctionPlus},AVG:{n:Y.AVG,t:l.FunctionAvg},MAX:{n:Y.MAX,t:l.FunctionMax},GST:{n:Y.GST,t:l.FunctionGreatest},MIN:{n:Y.MIN,t:l.FunctionMin},LST:{n:Y.LST,t:l.FunctionLeast},TMS:{n:Y.MTP,t:l.FunctionTimes},CNT:{n:Y.CNT,t:l.FunctionCount},GEM:{n:mstrmojo.desc(2124,"Geometric Mean"),t:l.FunctionGeomean},MED:{n:mstrmojo.desc(2126,"Median"),t:l.FunctionMedian},MOD:{n:mstrmojo.desc(2128,"Mode"),t:l.FunctionMode},PDT:{n:mstrmojo.desc(2129,"Product"),t:l.FunctionProduct},STD:{n:mstrmojo.desc(2130,"Standard Deviation"),t:l.FunctionStdev},VAR:{n:mstrmojo.desc(2132,"Variance"),t:l.FunctionVar}},Z=[{n:Y.SUM,t:l.FunctionOLAPSum},{n:Y.AVG,t:l.FunctionOLAPAvg},{n:Y.MIN,t:l.FunctionOLAPMin},{n:Y.MAX,t:l.FunctionOLAPMax},{n:Y.CNT,t:l.FunctionOLAPCount}],AC=[{n:Y.SUM,t:l.FunctionOLAPSum},{n:Y.AVG,t:l.FunctionOLAPAvg},{n:Y.MIN,t:l.FunctionOLAPMin},{n:Y.MAX,t:l.FunctionOLAPMax},{n:Y.CNT,t:l.FunctionOLAPCount}],M=[{n:mstrmojo.desc(1058,"Previous"),t:l.FunctionLag},{n:mstrmojo.desc(1059,"Next"),t:l.FunctionLead},{n:mstrmojo.desc(4046,"First"),t:l.FunctionFirst},{n:mstrmojo.desc(4049,"Last"),t:l.FunctionLast}];function e(AG,AI,AH,AE){return{scriptClass:"mstrmojo.ui.Pulldown",items:AG,selectedIndex:AI,onitemSelected:function AF(AJ){var AK=this.parent;while(!AK.data||!AK.data[AH]){AK=AK.parent;}AK.data.set(AH,AE?AE(AJ):AJ.v);}};}function s(AF,AE){return{scriptClass:"mstrmojo.Box",cssClass:"breakByBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13903,"Break by:")},e(AF,AE,"breakBy",function(AG){return{id:AG.did,type:AG.t,dmy:AG.dmy};})]};}function z(AH){var AI=AH.metrics,AJ=AH.propName,AG=AH.optionValueField||"id",AE=o.find(AI,AG,AH.value),AK=function AK(AM){var AL=this.parent;while(!AL.data||!AL.data.hasOwnProperty(AJ)){AL=AL.parent;}AL.data.set(AJ,AM?{id:AM[AG],type:4}:{cst:this.text});};return{scriptClass:"mstrmojo.ui.SearchablePulldown",items:AI,selectedIndex:AE,useRichTooltip:true,bindings:AH.bindings,valid:true,allowCustomText:true,allowEmptyText:true,onvalidChange:function AF(){mstrmojo.css.toggleClass(this.domNode,"invalid",!this.valid);if(this.hasRendered){this.hideTooltip();this.showTooltip();}},updateTooltipConfig:function(){if(this.valid){this.richTooltip=null;return ;}this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onitemSelected:AK,onTextEditComplete:function(){AK.call(this,this.items[this.selectedIndex]);},onPopupWidgetOpened:function(){this.set("valid",true);},postkeyup:AH.postkeyup};}function R(AH,AG,AF){if(AH&&AH.datap){var AE=o.filterOne(AH.datap,function(AJ){return AJ.tbid===AG;}),AI=AE&&AE.maps.amps;return o.filterOne(AI,function(AJ){return AF===AJ.aimp.atid;});}return null;}function h(AE,AI){var AG=o.filterOne(AE&&AE.afmps,function(AJ){return AJ.fmid===AI;}),AH=AG&&(AG.sqc?AG:AG.col.oi),AF;if(AH&&AH.sqc){AF={did:AH.sqc.id,n:mstrmojo.string.decodeHtmlString(AH.cln),coldtp:AH.sqc.dt.tp,georole:AH.geo,timerole:AH.tim,der:AH.sqc.der};}else{if(AH){AF={did:AH.did,n:mstrmojo.string.decodeHtmlString(AH.def.cln),coldtp:AH.def.dt.tp,georole:AG.geo,timerole:AH.def.dicl.time,der:AH.def.dicl.der};}}return AF;}function C(AF,AE,AH){var AG={success:function(AI){if(AI&&AI.msgid){mstrApp.serverRequest({taskId:"qBuilder.GetReportXDADefinition",msgid:AI.msgid,bindingflag:2,previewflag:261,browsetype:5},AH);}},failure:function(AI){mstrApp.onerror(AI);}};mstrApp.serverRequest({taskId:"duplicateReportInstance",datasetID:AE,messageID:AF},AG);}function I(AJ,AK,AH){var AF=AJ.srcTableId,AM=AJ.tgtTableId,AE,AI,AG=function(AQ,AP){var AS="<mpcs><mpc ",AO,AR;for(AO in AP){AR=AP[AO];AS+='$ACT="$VAL" '.replace("$ACT",AO).replace("$VAL",AR);}AS+="/></mpcs>";return{act:"changeEMMAMapping",tbid:AQ,dsid:AJ.dsid,mapping:AS};},AN=function(AQ){var AR={success:function(){AL();}},AP,AO;AE=R(AQ,AF,AJ.srcId);AI=R(AQ,AM,AJ.tgtId);AP=h(AE,AE.afmps[0].fmid);AO=[AG(AF,{did:AP.did,oid:AI.aimp.atid,fg:1})];AK.getDataService().submitUpdates(AO,AR);},AL=function(){var AO=[],AR={},AP,AQ;if(!AE||!AI){return ;}AR[AF]={};AR[AM]={};o.forEach(AE.afmps,function(AV){var AT=o.find(AI.afmps,"fmid",AV.fmid),AW,AU,AS;if(AT>=0){AP=h(AE,AV.fmid);AQ=h(AI,AV.fmid);if(AP.georole!==AQ.georole){AS=(AP.georole===0)?AF:AM;AW=(AP.georole===0)?AP.did:AQ.did;AU=AP.georole||AQ.georole;AR[AS][AW]=X.copy({did:AW,georole:AU},AR[AS][AW]);}if(AP.timerole!==AQ.timerole){AS=(AP.timerole===0)?AF:AM;AW=(AP.timerole===0)?AP.did:AQ.did;AU=AP.timerole||AQ.timerole;AR[AS][AW]=X.copy({did:AW,timerole:AU},AR[AS][AW]);}if(AP.der!==AQ.der){AU=AP.der|AQ.der;AR[AF][AP.did]=X.copy({did:AP.did,drvflg:AU},AR[AF][AP.did]);AR[AM][AQ.did]=X.copy({did:AQ.did,drvflg:AU},AR[AM][AQ.did]);}}});X.forEach(AR,function(AS,AT){X.forEach(AS,function(AU){AO.push(AG(AT,AU));});});AP=h(AE,AE.afmps[0].fmid);AO.push(AG(AF,{did:AP.did,oid:AI.aimp.atid}));if(AH){AH(AO);}};C(AK.mid,AJ.dsid,{success:AN});}function W(AJ,AG,AF,AK){var AE=0,AI=[],AH=function(AL){var AM=AF[AE-1];if(AL&&AL.tks&&AM){AI.push({fid:AM.fid,fnm:AM.fnm,ftk:AL.tks.items});}if(AE===AF.length){AK(AI);return ;}AM=AF[AE++];mstrmojo.ME.MetricDataService.validateMetric({metricId:AG,formID:AM.fid,objectType:12,tokenStreamXML:"",metricXML:"",msgID:AJ},{success:AH});};AH();}function v(AE,AF){return{v:S(AE.n)+"@"+S(AF.fnm),tp:275,lv:1,exv:AF.fid,extp:8,oi:{did:AE.did,t:AE.t,n:AE.n}};}mstrmojo.vi.ui.DatasetUnitMenuUtils=mstrmojo.provide("mstrmojo.vi.ui.DatasetUnitMenuUtils",{getAvailableShortcutMetricFunctionsGroup:function y(AE){return{"12":[[c.AVG,c.CNT,c.MAX,c.MIN,c.STD,c.SUM,c.VAR]],"4":[[c.SUM,c.AVG,c.MIN,c.MAX,c.CNT],[c.GEM,c.MED,c.MOD,c.PDT,c.STD,c.VAR]]}[AE.t];},isAmongFunctions:function A(AF,AE){return AE.some(function(AG){return AG.some(function(AH){return AH.t===AF;});});},getMultiSelectionShortcutMetricFunctions:function J(AE){var AF=true;o.forEach(AE,function(AG){if(4!==AG.t){AF=false;return false;}return true;});return AF?[c.ADD,c.AVG,c.GST,c.LST,c.TMS]:[];},getRelativeReferenceMenu:function b(AI,AG,AL,AE){var AH=0,AF=M[AH],AK=0,AJ=AL&&AL[AK];return new mstrmojo.ui.menus.EditorConfig({data:{item:AI,relativeRef:AF,breakBy:AJ},cssClass:"RelativeReference-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",cssClass:"funcBox",children:[{scriptClass:"mstrmojo.Label",visible:AG&&AG.length,text:AG},e(M,AH,"relativeRef",function(AM){return AM.t;})]},s(AL,AK)],fnOk:function(AM){return AE(AM.item,AM.relativeRef,[AM.breakBy]);}});},getMovingTotalMenu:function B(AO,AI,AK){var AP=1,AH=AC[AP].t,AJ=1,AF=mstrmojo.desc(13289,"Starting previous##rows").split("##"),AN=0,AG=AI&&AI[AN];return new mstrmojo.ui.menus.EditorConfig({cssClass:"MovingTotal-MenuEditor",data:{item:AO,funcType:AH,windowSize:AJ,breakBy:AG},contents:[e(AC,AP,"funcType",function(AQ){return AQ.t;}),{alias:"winSzBox",scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",cssClass:"WinSzPrefix",text:AF[0]},{alias:"winSz",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:mstrmojo.expr.DTP.INTEGER,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL,min:1},postCreate:function AM(){this.set("value",AJ);},_ontooltipover:function(){var AQ=mstrmojo.all[this.id];AQ._hovered=true;AQ.showTooltip();},_ontooltipout:function(){var AQ=mstrmojo.all[this.id];AQ._hovered=false;AQ.hideTooltip();},useRichTooltip:true,tooltipOpenDelay:0,onInvalid:function(){var AQ=this.validationStatus.msg,AR=!(this.richTooltip&&AQ===this.richTooltip.content);this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-V",top:-5,refNode:this.domNode,content:AQ};if(this._hovered&&AR){this.hideTooltip();this.showTooltip();}},onValid:function(){this.richTooltip=null;this.hideTooltip();},postvalueChange:function AL(){var AQ=this.isValid();this.parent.parent.popupConfig.data.set("windowSize",AQ?parseInt(this.value,10):0);}},{scriptClass:"mstrmojo.Label",cssClass:"WinSzSuffix",text:AF[1]}]},s(AI,AN)],bindings:{okEnabled:function(){return !!this.data.windowSize;}},fnOk:function AE(AQ){if(AK){AK(AO,AQ.funcType,AQ.windowSize,[AQ.breakBy]);}}});},getRunningTotalMenu:function x(AH,AK,AF){var AG=0,AE=Z[AG].t,AJ=0,AI=AK&&AK[AJ];return new mstrmojo.ui.menus.EditorConfig({data:{item:AH,func:AE,breakBy:AI},cssClass:"RunningTotal-MenuEditor",contents:[e(Z,AG,"func",function(AL){return AL.t;}),s(AK,AJ)],fnOk:function(AL){return AF(AL.item,AL.func,[AL.breakBy]);}});},getRankMetricEditor:function t(AI,AL,AG){var AE=[{n:mstrmojo.desc(1886,"Descending"),v:"0"},{n:mstrmojo.desc(1885,"Ascending"),v:"-1"}],AF=0,AH=AE[AF].v,AK=0,AJ=AL&&AL[AK];return new mstrmojo.ui.menus.EditorConfig({data:{item:AI,order:AH,breakBy:AJ},cssClass:"NewRankMetric-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14612,"Sort:")},e(AE,AF,"order")]},s(AL,AK)],fnOk:function(AM){return AG(AM.item,AM.order,[AM.breakBy]);}});},insertAddUnitToFilterMenu:function H(AJ,AF,AE){var AH=this,AG=mstrmojo.desc(2022,"Add to Filter"),AI=o.ensureArray(AE).filter(function(AK){return AH.isValidAddToFP(AF,AK);});if(AI.length>0){AJ.addMenuItem(AG,"",function(){AF.addFilterStackSelectors(AI);});}else{AJ.addDisabledMenuItem(AG,"");}},isValidAddToFP:function N(AH,AJ){var AF=AH.controller.view.builder,AG=AF.getLayoutVIMap(AH.getCurrentLayoutKey()).getComponent(K.FILTER_STACK),AK;AK=(!AG||o.find(AG.getFilterDefinitions(),"srcid",AJ.did)===-1);if(AK&&AJ.lock){var AE=AJ.fs||[],AI;AK=false;for(AI=0;AI<AE.length;AI++){if(AE[AI].iidx){AK=true;break;}}}return AK;},renameItem:function n(AJ,AM,AF,AH){var AI=AJ.mstrmojoId,AL=mstrmojo.dom.findWidget(AJ);AH=AH||{};if(!AI){var AK=mstrmojo.insert({scriptClass:"mstrmojo.EditableLabel",editOnClick:false,text:AM.n,title:AM.dsc||"",allowEmptyText:AH.allowEmptyText,cssClass:AH.cssClass||"",placeholder:AJ,onTextEditComplete:function AE(AN){if(AN){return AF(this);}},onmousedown:function AG(AN){if(this.isEditing){AN.cancel();}}});if(AL&&AL.draggable){AK.parent=AL;}AK.render();AI=AK.id;}mstrmojo.all[AI].set("isEditing",true);return mstrmojo.all[AI];},getMultipleMetricsCalculationMenus:function g(AL,AE,AO){var AK=new mstrmojo.ui.menus.MenuConfig(),AQ=mstrmojo.vi.ui.DatasetUnitMenuUtils.getMultiSelectionShortcutMetricFunctions(AL),AI=function(AS,AT,AR){return{dsid:AE,funcType:AT,funcType2:AR,items:AS};};AK.useTooltip=true;AQ.forEach(function(AR){AK.addMenuItem(AR.n,"",function(){AO(AI(AL,AR.t));});});if(AL.length===2){var AJ=mstrmojo.mstr.EnumFunction,AH=AJ.FunctionDivide,AF=AJ.FunctionMinus,AN=AL[0],AM=AL[1],AP=function(AV,AT,AR,AU,AS){AK.addMenuItem(AV,"",function(){AO(AI([AT,AR],AU,AS));});},AG=[{n:function(AS,AR){return AS.n+"/"+AR.n;},fn:AH},{n:function(AS,AR){return AS.n+"-"+AR.n;},fn:AF},{n:function(AS,AR){return"("+AS.n+"-"+AR.n+")/"+AR.n;},fn:AF,fn2:AH}];AG.forEach(function(AR){AK.addSeparator();AP(AR.n(AN,AM),AN,AM,AR.fn,AR.fn2);AP(AR.n(AM,AN),AM,AN,AR.fn,AR.fn2);});}return AK;},getCalculationMetricEditor:function L(AM,AN,AL){var AG=[{n:"",css:"operator-plus",funcType:l.FunctionPlus},{n:"",css:"operator-minus",funcType:l.FunctionMinus},{n:"",css:"operator-multiply",funcType:l.FunctionTimes},{n:"",css:"operator-divide",funcType:l.FunctionDivide},{n:"%",css:"operator-percent-diff",funcType:l.FunctionMinus,funcType2:l.FunctionDivide}],AH={m1:AN.did,m2:AM[0].did,operator:l.FunctionPlus,u1:{id:AN.did,type:4},u2:null},AF=function(AO){return{}.hasOwnProperty.call(AO,"cst");},AK=function(AO){return typeof AO==="string"&&!!AO.length&&!isNaN(Number(AO));};var AE="this.parent.popupConfig.valid || this.selectedIndex !== -1 || (!!this.selectedNode && this.selectedNode.innerHTML.length === 0)",AJ=function AJ(){var AO=this.parent.popupConfig;if(AO){AO.set("okEnabled",this[this.editableSlot].innerHTML.length!==0);}};return new mstrmojo.ui.menus.EditorConfig({cssClass:"Calculation-MenuEditor",contents:[z({metrics:AM,value:AH.m1,propName:"u1",optionValueField:"did",bindings:{valid:AE},postkeyup:AJ}),{scriptClass:"mstrmojo.ButtonListHoriz",items:AG,selectedIndex:0,postselectionChange:function AI(){this.parent.data.set("operator",this.selectedItem.funcType);this.parent.data.set("operator2",this.selectedItem.funcType2);}},z({metrics:AM,value:null,propName:"u2",optionValueField:"did",bindings:{valid:AE},postkeyup:AJ})],data:AH,okEnabled:false,bindings:{valid:function(){var AQ=this.data.u1,AP=this.data.u2,AR=this.data.operator;if(!AQ||!AP||!AR){return false;}var AO=!(AF(AQ)&&AF(AP))&&(!AF(AQ)||AK(AQ.cst))&&(!AF(AP)||AK(AP.cst));this.set("okEnabled",AO);return AO;}},fnOk:function(AO){return AL(AO.u1,AO.u2,AO.operator,AO.operator2);}});},getFilterEditor:function F(AF){var AK="dfe",AJ,AG={},AI=AF.datasetFilter;function AH(AL){if(!AL.et){return false;}if(AL.et===AB.RLS){return false;}if(AL.p){return false;}if(AL.cs&&AL.cs.some(function(AM){return !!AM.p;})){return false;}return !AL.nds||AL.nds.every(AH);}function AE(){o.forEach(AF.att,function(AM){if(AM.t!==12||AM.da){return ;}AG[AM.did]={did:AM.did,n:AM.n,t:AM.t,fs:AM.fs};});o.forEach(AF.mx,function(AM){if(AM.um){return ;}AG[AM.did]={did:AM.did,n:AM.n,t:AM.t};});if(AI){mstrmojo.expr.findTargets(AI,"did",AG);}var AL={expr:X.clone(AI),targets:X.valarray(AG)};AJ=AK&&window.mstrmojo&&mstrmojo.all[AK];if(!AJ){AJ=mstrmojo.insert({id:AK,scriptClass:"mstrmojo.fe.ReportFilterEditor",showLimits:false,objectBrowsingEnabled:true});}if(AF.zIndex){AJ.set("zIndex",AF.zIndex);}AJ.set("title",mstrmojo.desc(12138,"Dataset Filter #").replace("#",AF.datasetName));AJ.set("onSave",AF.fnOk);AJ.set("model",AL);AJ.onUpdateBrowseElementsParams=AF.browseParam;AJ.open();}if(AI&&!AH(AI)){mstrmojo.warn(mstrmojo.desc(13527,"The filter contains an advanced condition that cannot be edited."),{confirmBtn:{t:mstrmojo.desc(13528,"Clear existing filter"),fn:function(){AI=null;AE();}}},{title:mstrmojo.desc(11812,"Notification")});}else{AE();}},getCfgForAddUnitFromAllObject:function(AE,AF){var AG=null,AH=null,AI=[],AJ=function(AK,AL){if(!AL){return false;}return o.find((AL.att||[]).concat(AL.mx||[]),"did",AK.did)>-1;};X.forEach(AF,function(AL,AK){if(AL.idd){AG=AK;AH=AL;return false;}return true;});if(!AG){AG="$GUID_141";AI.push({act:"createDataset",mgo:true,prm:true,name:mstrApp.projectName,idd:true,newObjectIds:[AG]});}o.forEach(AE,function(AK){if(!AJ(AK,AH)){AI.push({act:"addUnitToDataset",dsid:AG,unitId:AK.did,unitType:AK.t});}});return{actions:AI,dsid:AG};},getAggregateByMenu:function k(AJ,AH){var AF=new mstrmojo.ui.menus.MenuConfig(),AG=function(AN,AM){var AP,AO;if(AM){var AL=AN.mexp.args[0];AP=AL.did;AO=AL.t;}else{AP=AN.did;AO=AN.t;}return{did:AP,t:AO};},AE=this.getAvailableShortcutMetricFunctionsGroup(AJ),AK=AJ.mexp?AJ.mexp.ft:null,AI=AJ.mexp&&this.isAmongFunctions(AK,AE);AE.forEach(function(AL,AM){if(AM!==0){AF.addSeparator();}AL.forEach(function(AN){AF.addMenuItem(AN.n,"",function(){AH(AG(AJ,AI),AN.t);});});});return AF;},showObjectPicker:function j(AF,AE){var AG="object_picker";return function(){var AH=mstrmojo.all[AG];if(!AH){AH=new mstrmojo.vi.ui.editors.ObjectPicker({id:AG});if(AE){AH.supportedTypes=o.hash(AE);AH.ob.browsableTypes="8,"+AE.join(",");}AH.render();}else{if(AE){AH.supportedTypes=o.hash(AE);AH.ob.browsableTypes="8,"+AE.join(",");}AH.browse();}AH.OKFn=AF||mstrmojo.emptyFn;AH.open();};},generateNumberFormat:function q(AJ){var AE=T.DefaultFormat.FormattingNumber,AF=T.NumberFormatCategory,AH=AJ||{},AG=AH.nct,AI=AG===AF.General&&AH.nfs==="General";return{category:(AG===undefined||AI)?AF.Automatic:AG,decimalPlaces:AH.ndp===undefined?2:AH.ndp,thousandSeparator:AH.nth?-1:0,currencySymbol:AH.ncs||AE.CurrencySymbol,currencyPosition:AH.ncp||AE.CurrencyPosition,format:AH.nfs||"",negativeNumbers:AH.nnn||AE.NegativeNumbers};},getNumberFormatEditor:function u(AH,AG,AF){var AE=this.generateNumberFormat(AG),AI=X.clone(AE),AK=X.clone(AE);return new mstrmojo.ui.menus.EditorConfig({data:AI,bindings:{okEnabled:function(){return !(this.data.category===AK.category&&this.data.format===AK.format);}},cssClass:"NumberFormat-MenuEditor",contents:[{scriptClass:"mstrmojo.vi.ui.NumberFormatter",formatValue:AE,myData:AI,oldData:AK,adjustAfterCategoryChange:function(){this.parent.adjustCornersForPopupOverflow();}}],fnOk:function AJ(AL){if(!(AL.category===AK.category&&AL.format===AK.format)){return AF(AL,AK);}}});},getHighlightElementHandler:function(AG,AF,AE){return function(){D.toggleClass(AF,AE||"open",AG);};},getConfDataTypeMenuCfg:function w(AE,AZ,AR,Am){var Ah="ToString",AY="ToNumber",AW="ToDateTime",AQ="keepOriginal",AH="Default",Ai={ToString:3,ToNumber:2,ToDateTime:8},AM={ToString:"D1ED29645DEC4DBF99E8E09ED939074B",ToNumber:"399C3EC1041643F1ACE8F2A92B1C1F2F",ToDateTime:"0A558C7295DE42DAA8C5594F1724563F"},AK="_pattern",Ak="_func",AU="_bft",Ap="_state",An={UNCHANGED:0,TO_CREATE:1,TO_UPDATE:2},AJ={n:"Default",v:"Default"},Af=[{n:"MM-DD-Year",v:"MM-DD-Year"},{n:"MM/DD/Year",v:"MM/DD/Year"},{n:"DD-MM-Year",v:"DD-MM-Year"},{n:"DD/mm/Year",v:"DD/mm/Year"},AJ],AG=[{n:mstrmojo.desc(13772,"Keep Original"),v:AQ},{n:mstrmojo.desc(12276,"String"),v:Ah},{n:mstrmojo.desc(2052,"Date"),v:AW},{n:mstrmojo.desc(3434,"Number"),v:AY}],AP=X.clone(AG).slice(1),AX=AZ.fs.filter(function(Ar){return AZ.da||Ar.obf;}),Aq=AX.length>1,AS=AX.length>5,AL=false,Ag=false,Aa=[],Ae=[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13773,"Select Data Type for New Attribute:")}],Ao={okEnabled:false},Aj=function(){var Ar=false;AX.forEach(function(As){Ar=Ar||(Ao[As.fnm+Ak+Ap]!==An.UNCHANGED)||(Ao[As.fnm+AK+Ap]!==An.UNCHANGED);});return Ar;},Ab=function(At,As){var Ar=0;if(At.da){o.forEach([Ah,AW,AY],function(Aw,Au){var Av=new RegExp("^\\s*"+Aw+"\\s*(<.*>)?\\s*\\((.+)\\)\\s*$","i").exec(As.f);if(Av&&Av[2]){Ar=Au+1;return false;}});}return Ar;},Ad=function(At,As){var Au=AH;if(AZ.da){var Ar=new RegExp("^\\s*"+As+'\\s*<\\s*Pattern\\s*=\\s*"(.+)"\\s*>.*$',"i").exec(At.f);if(!mstrmojo.string.isEmpty(Ar&&Ar[1])){Au=Ar[1];}}return Au;},Ac=function(){return AS?this.parent.parent.parent:(Aq?this.parent.parent:this.parent);},AV=function(Ar){if(AS){Ar.formList.updateScrollbars();}},AI=function(Ay,Az,Ax){var Ar=Az.fnm,Au=AS?Ay.formList[Az.fnm+AK]:Ay[Az.fnm+AK],Av=Aq?Au.children[1]:Au,Aw=Ao[Ar+Ak],At=AL&&(Aw===AW||Aw===Ah),As=Au.visible!==At;if(As){Au.set("visible",At);if(At){AV(Ay);}else{Av.hideTooltip();}}if(Ax){Av.set("text",Ad(Az,Aw));Av.set("items",Aw===AW?Af:[AJ]);}},AT=function(Ar){var As=false;AX.forEach(function(At){if(Ao[At.fnm+Ak]===AW||Ao[At.fnm+Ak]===Ah){As=true;return false;}});Ar.advancedLabel.set("visible",As);},AF=function(Au,As,Av,Ar){return{scriptClass:"mstrmojo.ui.Pulldown",items:Au,alias:Av.fnm+Ak,selectedIndex:As,onPopupWidgetOpened:function(){AV(Ac.call(this));},onitemSelected:function At(A0,Ay){var Az=Ac.call(this),A1=Az.data,A2=Av.fnm,Ax=A0.v,Aw=function(A3){if(A3){return(Au.length===3?An.TO_UPDATE:An.TO_CREATE);}return An.UNCHANGED;};A1.set(A2+Ak,Ax);A1.set(A2+AK,Ad(Av,Ax));A1.set(A2+AU,Ax===AQ?Av.bftp:Ai[Ax]);A1.set(A2+Ak+Ap,Aw(Ay!==As));A1.set("okEnabled",Aj());AI(Az,Av,true);AT(Az);}};},AO=function(At,Au,Ar){return{scriptClass:"mstrmojo.ui.SearchablePulldown",alias:At.fnm+AK,useRichTooltip:true,visible:Ar,allowCustomText:true,allowEmptyText:true,onPopupWidgetOpened:function(){AV(Ac.call(this));},customizeSearchResult:function(Av){if(o.find(Av,"v","Default")===-1&&this.items.length>0){Av.push(AJ);}},onclick:function(Av){mstrmojo.ui.SearchablePulldown.prototype.onclick.call(this,Av);this.set("isEditing",true);},updateData:function(Ax){var Av=Ac.call(this),Aw=Av.data,Ay=At.fnm;Aw.set(Ay+AK,Ax);Aw.set(Ay+AK+Ap,Au!==Ax?An.TO_UPDATE:An.UNCHANGED);Aw.set("okEnabled",Aj());},onitemSelected:function As(Aw,Av){if(Aw){this.updateData(Aw.v);}},onkeyup:function(Av){mstrmojo.ui.SearchablePulldown.prototype.onkeyup.call(this,Av);var Aw=this[this.editableSlot],Ax=Aw.innerText||Aw.textContent;this.updateData(Ax);},updateTooltipConfig:function(Aw){this.tooltipOpenDelay=Aw?500:0;var Av=V.position(this.domNode);this.richTooltip={content:mstrmojo.desc(14114,'Pattern determines the formatting for the resulting string of characters. You can use the custom numeric, date, and time formatting symbols. <br/> Example: if pattern is defined as "0,000.00" for "1001", it returns the string "1,001.00"'),posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-C",top:Av.y-2,left:Av.x+Av.w+10};}};},Al=function(Az,Ay,Ar,As,Ax){var Au=Ab(Az,Ay),Aw=Ad(Ay,AG[Au].v),At=Ay.fnm,Av=AG;if(Au>0){Av=AP;Au--;}As[At+AK]="";As[At+Ak]="";As[At+AU]="";As[At+Ak+Ap]=As[At+AK+Ap]=An.UNCHANGED;if(Ax){Ar.push({scriptClass:"mstrmojo.HBox",cssClass:"func-input",alias:At+Ak,children:[{scriptClass:"mstrmojo.Label",text:At,useRichTooltip:true,updateTooltipConfig:function(A2){this.tooltipOpenDelay=A2?500:0;var A1=this.domNode;var A0=V.position(A1);if(A1.scrollWidth>A1.offsetWidth){this.richTooltip={content:A1.innerText,posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-V",top:A0.y-A0.h-10,left:A0.x-10};}}},AF(Av,Au,Ay,true)]});Ar.push({scriptClass:"mstrmojo.HBox",cssClass:"pattern-input",alias:At+AK,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12078,"Pattern")},AO(Ay,Aw,true)]});}else{Ar.push(AF(Av,Au,Ay,false));Ar.push(AO(Ay,Aw,false));}};o.forEach(AZ.fs,function(Ar){if(AE.als&&AE.als.links[AZ.did+" "+Ar.fid]){Ag=true;return false;}});if(Aq){AX.forEach(function(Ar){Al(AZ,Ar,AS?Aa:Ae,Ao,true);});}else{Al(AZ,AX[0],Ae,Ao,false);}if(AS){Ae.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"formList",cssClass:"formList",children:Aa});}Ae.push({scriptClass:"mstrmojo.Label",cssClass:"advancedLabel",alias:"advancedLabel",allowHTML:true,text:"<span>"+mstrmojo.desc(702,"Advanced")+"</span>",onclick:function(){var As=this.parent,At,Ar,Au=true;AL=!AL;D.toggleClass(this.domNode,"expanded",AL);AX.forEach(function(Av){AI(As,Av,false);At=AS?As.formList[Av.fnm+AK]:As[Av.fnm+AK];Ar=Aq?At.children[1]:At;if(At.visible&&Au&&!AS){Au=false;Ar.showTooltip();}});}});return new mstrmojo.ui.menus.EditorConfig({data:Ao,cssClass:"ConfDataType-MenuEditor",contents:Ae,onOpen:function(){AV(this);},bindings:{okEnabled:"this.data.okEnabled"},fnOk:function AN(At){var Ar=[],Av=[],As=false,Au=function(Ay,Az,Ax){var A1=[],A0=function(A2){var A3=A2.ftk&&A2.ftk.slice(2,-2);if(!A3){return null;}while((A3.shift()).v!=="("){}return A3;},Aw=A0(Ax)||[v(AZ,Ax)];A1.push({v:"!",tp:33,lv:4});if(Ay!==AQ){A1.push({v:Ay,oi:{did:AM[Ay],t:11,st:2816,n:Ay}});if(!mstrmojo.string.isEmpty(Az)&&Az!==AH&&(Ay===AW||Ay===Ah)){A1.push({v:'<Pattern="'+Az+'">(',tp:"2",lv:1});}else{A1.push({v:"(",tp:"2",lv:1});}A1=A1.concat(Aw);A1.push({v:")",tp:"2",lv:1});}else{A1=A1.concat(Aw);}A1.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:A1});};if(Ag){As=true;}else{AX.forEach(function(Aw){if(At[Aw.fnm+Ak+Ap]===An.TO_CREATE){As=true;return false;}else{if(At[Aw.fnm+Ak+Ap]===An.TO_UPDATE||(At[Aw.fnm+AK+Ap]===An.TO_UPDATE&&(At[Aw.fnm+Ak]===AW||At[Aw.fnm+Ak]===Ah))){Av.push(Aw);}}});}if(As){AX.forEach(function(Aw){Ar.push({n:Aw.fnm,formula:Au(At[Aw.fnm+Ak],At[Aw.fnm+AK],Aw),bft:At[Aw.fnm+AU]});});Am(As,Ar);}else{if(AZ.da){W(AE.mid,AZ.did,Av,function(Aw){Aw.forEach(function(Ax){Ar.push({did:Ax.fid,formula:Au(At[Ax.fnm+Ak],At[Ax.fnm+AK],Ax),bft:At[Ax.fnm+AU]});});Am(As,Ar);});}}}});},getCreateTimeDAEditorCfg:function O(AI,AH){var AG=function(AM){var AN=8,AO=1,AL=o.filter(AM.fs,function(AP){return(AM.da||AP.obf)&&(AP.bftp===AN||AP.bftp===AO);}),AK=o.find(AL,"idf",true);return AL[AK>=0?AK:0];},AE=AG(AI);if(!AE){return null;}return new mstrmojo.ui.menus.EditorConfig({data:{okEnabled:false},cssClass:"CreateTimeAttribute-MenuEditor",contents:[{scriptClass:"mstrmojo.ui.CheckList",alias:"time_type",items:[{n:mstrmojo.desc(873,"Year"),v:"Year"},{n:mstrmojo.desc(10051,"Quarter of Year"),v:"QuarterOfYear"},{n:mstrmojo.desc(10050,"Quarter"),v:"Quarter"},{n:mstrmojo.desc(10049,"Month of Year"),v:"MonthOfYear"},{n:mstrmojo.desc(871,"Month"),v:"Month"},{n:mstrmojo.desc(10047,"Week of Year"),v:"WeekOfYear"},{n:mstrmojo.desc(10048,"Week"),v:"Week"},{n:mstrmojo.desc(11608,"Day of Year"),v:"DayOfYear"},{n:mstrmojo.desc(10046,"Day of Month"),v:"DayOfMonth"},{n:mstrmojo.desc(10045,"Day of Week"),v:"DayOfWeek"}],onchange:function AF(){var AK=false;X.forEach(this.selectedIndices,function(AL){if(AL){AK=true;return false;}});this.parent.data.set("okEnabled",AK);}}],bindings:{okEnabled:function(){return this.data.okEnabled;}},fnOk:function AJ(AP,AQ){var AU=AQ.time_type,AT=AU.selectedIndices,AR=AU.items,AO=[],AK=[],AL="@form",AN={Year:"6F7DF5F8449111D5BEA300B0D01A55EF",Quarter:"6F7DF5F7449111D5BEA300B0D01A55EF",Concat:"6F7DF5FF449111D5BEA300B0D01A55EF",QuarterStartDate:"59E10CE2ADDD4A6DAC2416A72999A9ED",Month:"6F7DF5F6449111D5BEA300B0D01A55EF",ToString:"D1ED29645DEC4DBF99E8E09ED939074B",MonthStartDate:"7C63D4E70B2741C3A5B54A2EFD40961B",Week:"6F7DF5F5449111D5BEA300B0D01A55EF",WeekStartDate:"44681336D0DB4E43AC333FFB3CC4400D",DayOfMonth:"6F7DF5F2449111D5BEA300B0D01A55EF",DayOfWeek:"6F7DF5F3449111D5BEA300B0D01A55EF",DayOfYear:"6F7DF5F4449111D5BEA300B0D01A55EF"},AS=function(AV){switch(AV){case"Year":return{ID:["Year","(",AL,")"]};case"Quarter":return{ID:["Year","(",AL,") * 10 + ","Quarter","(",AL,")"],DESC:["Concat",'("Q", ',"Quarter","(",AL,")",', ", ", ',"Year","(",AL,"))"],DATE:["QuarterStartDate","(",AL,")"]};case"QuarterOfYear":return{ID:["Quarter","(",AL,")"],DESC:["Concat",'("Q", This@ID)']};case"Month":return{ID:["Year","(",AL,") * 100 + ","Month","(",AL,")"],DESC:["ToString",'<Pattern="mmm yyyy">(',AL,")"],DATE:["MonthStartDate","(",AL,")"]};case"MonthOfYear":return{ID:["Month","(",AL,")"],DESC:["ToString",'<Pattern="mmmm">(',AL,")"]};case"Week":return{ID:["Year","(",AL,") * 100 + ","Week","(",AL,")"],DESC:["Concat",'("W", ',"Week","(",AL,'), ", ", ',"Year","(",AL,"))"],DATE:["WeekStartDate","(",AL,")"]};case"WeekOfYear":return{ID:["Week","(",AL,")"]};case"DayOfMonth":return{ID:["DayOfMonth","(",AL,")"]};case"DayOfWeek":return{ID:["DayOfWeek","(",AL,")"],DESC:["ToString",'<Pattern="ddd">(',AL,")"]};case"DayOfYear":return{ID:["DayOfYear","(",AL,")"]};}},AM=function(AV,AX,AZ){var AY=[{v:"!",tp:33,lv:4}],AW;AZ.forEach(function(Ab,Aa){if(Ab===AL){AY.push(v(AV,AX));}else{AW=AN[Ab];if(AW){AY.push({v:AW,oi:{did:AW,t:11,st:2816,n:AW}});}else{AY.push({v:Ab,tp:"2",lv:1});}}});AY.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:AY});};X.forEach(AT,function(AV,AW){if(AV){AK=[];X.forEach(AS(AR[AW].v),function(AX,AY){AK.push({n:AY,formula:AM(AI,AE,AX),bft:(AY==="DATE"?8:0)});});AO.push({isTokenStream:true,forms:AK,name:AI.n+" ("+AR[AW].n+")"});}});return AH(AO);}});},RefreshAndCloseAllObjectBrowserCallback:function(AF,AE){return mstrmojo.func.wrapMethods(AE.getDatasetsUpdateCallback(),{success:function(){if(o.find(AF,"act","createDataset")!==-1){AE.controller.datasetsPanel.set("allObjectBrowserOpened",false);}}});},getUnitFromDataset:function a(AF,AH,AE){var AG=null;X.forEach(AF,function(AJ){var AI=AJ.att||[];if(AE===4){AI=AJ.mx||[];}o.forEach(AI,function(AK){if(AK.did===AH){AG=AK;return false;}});if(AG){return false;}});return AG;},getDatasetFromId:function P(AE,AF){var AG=null;X.forEach(AE,function(AH){if(AH.did===AF){AG=AH;return false;}});return AG;},getDatasetFromAttributeId:function P(AE,AF){var AG=null;X.forEach(AE,function(AH){if(o.find(AH.att,"did",AF)>=0){AG=AH;return false;}});return AG;},getSortedDatasetUnits:function E(AE){var AF=function AF(AG){return AG.t===U.DssTypeMetric?2:1;};AE=AE.concat();AE.sort(function(AJ,AH){var AK=AF(AJ)-AF(AH),AI=AJ.n.toUpperCase(),AG=AH.n.toUpperCase();return AK!==0?AK:(AI!==AG?AI.localeCompare(AG):AJ.n.localeCompare(AH.n));});return AE;},getUnitCssClass:function(AF){var AE=AF.t;if(AF.fs&&AF.fs.length&&AF.fs.some(function(AG){return AG.fgr>0;})){AE+="g";}else{if((AF.dm||AF.um)||AF.da){AE+="d";}else{if(AF.de){AE+="de";}}}if((AF.t===47&&AF.st===12033)||(AF.t===12&&AF.st&&AF.st===3076)){AE+=(" st"+AF.st);}return"ic"+AE;},hasMultiForms:function i(AF,AE){return m.getFormsByAttrId(AF,AE).length>1;},getDisplayFormsMenu:function G(AQ,AO,AI,AN){var AM=[],AP=[],AH=[],AK=[{n:mstrmojo.desc(2411,"Off"),v:0},{n:mstrmojo.desc(2410,"On"),v:1},{n:mstrmojo.desc(8504,"Form Name Only"),v:2},{n:mstrmojo.desc(8505,"Show Attribute Name Once"),v:3},{n:mstrmojo.desc(4531,"Automatic"),v:4}];var AJ=AO.model.data,AE=AJ.gts,AL;o.forEach((AE.row||[]).concat(AE.col||[]),function(AR){if(AR.id===AQ.did){AP=AP.concat(AR.fs);}});AL=m.getFormsByAttrId(AQ.did,AI);o.forEach(AL||[],function(AS){var AT=AS.fid;if(o.find(AM,"id",AT)<0){AM.push({id:AT,n:AS.fnm});var AR=o.find(AP,"id",AT);if(AR>-1){AH[AM.length-1]=true;}}});return new mstrmojo.ui.menus.EditorConfig({data:{item:AQ,oldSelected:X.copy(AH,{})},contents:[{alias:"fs",scriptClass:"mstrmojo.ui.CheckList",minimumSelectCnt:1,items:AM,selectedIndices:AH},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11918,"Display attribute form names:")},{alias:"longNames",scriptClass:"mstrmojo.ui.Pulldown",items:AK,selectedIndex:o.find(AK,"v",AJ.lnm||0),onitemSelected:function AF(AR){this.v=String(AR.v);}}],okBtnText:mstrmojo.desc(1442,"Ok"),fnOk:function AG(AW,Aa){var AV=Aa.fs,AT=AV.selectedIndices,AY=AV.items,Ae=[],AX=[],Ab=[];if(!AV.getSelectedItems().length){mstrmojo.alert("Please select at least one form!");return ;}var AS=AW.oldSelected,Ad=AT,AU,AZ={},Ac={};for(AU=0;AU<AY.length;AU++){if(AS[AU]&&!Ad[AU]){AZ[AU]=true;}else{if(!AS[AU]&&Ad[AU]){Ac[AU]=true;}}}X.forEach(AZ,function(Af,Ag){if(Af){AX.push({act:"removeForm",unitId:AQ.did,attFormId:AY[Ag].id});}});var AR=AO.model.data.gts;(AR.row||[]).concat(AR.col||[]).forEach(function(Af){if(Af.id===AQ.did){(Af.fs||[]).forEach(function(Ag){if(o.find(AM,"id",Ag.id)<0){AX.push({act:"removeForm",unitId:AQ.did,attFormId:Ag.id});}});}});X.forEach(Ac,function(Af,Ag){if(Af){Ae.push({act:"addForm",unitId:AQ.did,attFormId:AY[Ag].id,unitPos:0});}});Ab.push({act:"putProperties",prs:"Template Formatting",pr:"LongNames",v:Aa.longNames.v});if(AN){AN([{act:"updateTemplate",keyContext:AO.k,partialRetrieval:{nodes:[AO.k]},actions:AX.concat(Ae).concat(Ab)}]);}}});},getAttributeLinkMenu:function d(AQ,AT,AO,AS,AJ){var AU=-2147483648,AL=AS.datasets,AM=AL[AO],AR=AM.tables||[],AE={},AN=[],AH=(AT.fs&&AT.fs[0])||{},AP=[],AK=779,AG=AT.art>1,AF=!AG&&X.keyarray(AL).length>1,AI=function(){mstrmojo.vi.ui.editors.AttributeLinkEditor.open({attribute:AT,docModel:AS,datasetId:AO});};if((AM.st!==AK)||AR.length<=1||AT.da){if(AF){AQ.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AI);}return ;}o.forEach(AM.att,function(AX){var AY=true,AW=null,AV=(AX.fs&&AX.fs[0])||{};if(AX.da){return ;}if(AH.der===AU||AV.der===AU||AH.fgr===-1||AV.fgr===-1||AH.ftr===-1||AV.ftr===-1){return ;}if(AH.fgr&&AV.fgr&&AH.fgr!==AV.fgr){return ;}if(AH.ftr&&AV.ftr&&AH.ftr!==AV.ftr){return ;}o.forEach(AR,function(AZ){var Aa=o.find(AZ.attRefs,"did",AT.did),Ab=o.find(AZ.attRefs,"did",AX.did);if(Aa>=0&&o.indexOf(AN,AZ.did)<0){AN.push(AZ.did);}if(Ab>=0){AW=AZ.did;}if(Aa>=0&&Ab>=0){AY=false;}});if(AY&&!AX.hide){AE[AX.did]=AW;AP.push(AX);}});if(AP.length>0&&AM.hcs!==true){AQ.addEditorMenuItem(mstrmojo.desc(13172,"Map Attributes"),"",function(){return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"mapAttribute",okVisible:false,cancelVisible:false,contents:[{scriptClass:"mstrmojo.ui.ScrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:AP,listHooks:{select:function AV(AW,AX){AS.warnForEditStandaloneDS(AM,function(){o.forEach(AN,function(AY){I({dsid:AO,srcId:AT.did,srcTableId:AY,tgtId:AX.did,tgtTableId:AE[AX.did]},AS,AJ);});});}}}]}]});});}if(AF){AQ.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AI);}},isDocumentLevelItem:function p(AE){return AE&&(AE.um||AE.da||(AE.t===47&&AE.st===12033));},isLegalObjectName:function Q(AE){var AF=/["\[\]\\]/g;if(AE.match(AF)){return false;}return true;},validateName:function f(AF,AG,AE){if(this.isLegalObjectName(AF)){AG();}else{mstrmojo.alert(mstrmojo.desc(8622,"The # cannot contain the reserved characters ##.").replace("##","'[', ']', '\"' and '\\'").replace("#",mstrmojo.desc(945,"Name")),AE,mstrmojo.desc(1388,"Rename"));}},hasCGorCon:function AD(AE){return AE.att.some(function(AG){var AI=(AG.t===1||AG.t===47),AH=(AG.t===12&&AG.de),AF=(AG.t===47&&AG.st===12033);return(AI&&!AF||AH);});},hasOldDEOverDatasets:function(AH,AG){var AF=false,AE;X.forEach(AG,function(AI){AE=o.find((AI.att||[]),"did",AH);if(AE!==-1&&AI.att[AE].de){AF=true;return false;}});return AF;},getMarkGeoRoleEditorCfg:function AA(AE,Aq,AY,AV,Az,A1){var AU=268435456,Aw=536870912,AJ=1073741824,Ai=268435456,At=805306368,Ao=805306368,Ac=1879048192,A0=-2147483648,Ar=0,As=1,AL=2,AT=3,AX=4,AR=5,Ay=6,AO=7,Aa=8,AZ=9,Ak=10,AH=2,Ah=3,Ap={v:Ar,n:mstrmojo.desc(2057,"None")},A2={v:AT,n:mstrmojo.desc(7674,"Country"),der:AU},An={v:AL,n:mstrmojo.desc(7676,"State"),parents:[A2],der:Aw},AP={v:AZ,n:mstrmojo.desc(12919,"County"),parents:[A2,An]},Au={v:As,n:mstrmojo.desc(7675,"City"),parents:[A2,An],der:AJ},Ad={v:Aa,n:mstrmojo.desc(7677,"Zip Code"),parents:[A2,An,Au]},AW={v:AR,n:mstrmojo.desc(7696,"Latitude")},Al={v:Ay,n:mstrmojo.desc(7697,"Longitude")},AS={v:AX,n:mstrmojo.desc(7675,"City")+", "+mstrmojo.desc(7676,"State")},Ag={v:Ak,n:mstrmojo.desc(12973,"Area Code")},Aj={v:AO,n:mstrmojo.desc(2056,"Custom")},AQ={ID:[Ap,A2,An,AP,Au,Ad,AW,Al,AS,Ag,Aj],ID_NUMERIC:[Ap,Ad,Ag,AW,Al],NON_ID:[Ap,A2,An,AP,Au,Ad,AS,Ag,Aj],NON_ID_NUMERIC:[Ap,Ad,Ag]},Ae=o.filter(Aq.fs,function(A3){return(A3.bftp===AH||A3.bftp===Ah)&&A3.der!==A0;});var Am=(Ae.length>1),AG=o.find(Ae,"idf",true),AI=(AG===-1?0:AG),Af=Ae[AI],AN,AF,Ab,AK=[],AM=function(A3){var A4=(A3.idf?"ID":"NON_ID")+(A3.bftp===AH?"_NUMERIC":"");return AQ[A4];},Ax=function(A4,A3){return o.find(AM(A3),"v",A4);};if(Ae.length===0||o.find(Aq.fs,"fgr",-1)!==-1||Af.der===A0){return null;}o.forEach(Ae,function(A5,A3){var A4=X.clone(A5);A4.n=A4.fnm;AK.push(A4);if(A5.fgr){Af=A4;AI=A3;}});AN=Af.fid;Ab=Af.fgr||0;AF=Ax(Ab,Af);return new mstrmojo.ui.menus.EditorConfig({data:{item:Aq,geoForm:Af,geoRole:Ab},cssClass:"MarkGeoRole-MenuEditor",contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13522,"Select Attribute Form:"),visible:Am},{scriptClass:"mstrmojo.ui.Pulldown",items:AK,selectedIndex:AI,alias:"formList",visible:Am,onitemSelected:function Av(A5){var A3=this.parent.data,A4=this.parent.geoRoleList;if(A3.geoForm.fid!==A5.fid){A3.set("geoForm",A5);A3.set("geoRole",A5.fgr);A4.set("items",AM(A5));A4.set("selectedIndex",Ax(A5.fgr,A5));}}},{scriptClass:"mstrmojo.ToolSeparator",visible:Am,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13523,"Select Geographic Type:")},{scriptClass:"mstrmojo.ui.Pulldown",items:AM(Af),selectedIndex:AF,alias:"geoRoleList",onitemSelected:function Av(A9){var A8=this.parent,A3=A8.data,BA=A8.geoDrvList;var A5=[],A7=[],A4=Af.der,A6;A3.set("geoRole",A9.v);o.forEach(A9.parents,function(BB,BC){A6=BB;A5.push({n:A6.n,der:A6.der});if((A4&A6.der)!==0){A7[BC]=true;}});BA.set("items",A5);BA.set("selectedIndices",A7);o.forEach(["geoDrvSeparator","geoDrvLabel","geoDrvList"],function(BB){A8[BB].set("visible",A5.length>0);});}},{scriptClass:"mstrmojo.ToolSeparator",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},alias:"geoDrvSeparator"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13524,"(Optional) Create Additional Attributes:"),alias:"geoDrvLabel"},{scriptClass:"mstrmojo.ui.CheckList",alias:"geoDrvList"}],fnOk:function(A6,A5){var A3=function(BC){var BB=function(BG){var BH="<mpcs>";o.forEach(BG,function(BI){BH+='<mpc did="'+BI.did+'" n="'+BI.n+'" georole="'+BI.georole+'" drvflg="'+BI.drvflg+'" />';});BH+="</mpcs>";return BH;},A7=function(BG,BI,BK,BH){var BJ=function(BO,BL,BN){var BM=R(BC,BO,BL),BP=h(BM,BN);return BP&&BP.did;};Az.forEach(function(BL,BM){var BN=BJ(BL.did,Aq.did,BI.fid);if(BN){BG[BM]=BG[BM]||[];BG[BM].push({did:BN,n:BI.fnm,georole:BK,drvflg:BH});}});},A9=[],BF=[],BD=A5.geoDrvList,A8=0,BA=false,BE={2:Ai,1:At,9:Ao,8:Ac}[A6.geoRole]||0;X.forEach(BD.selectedIndices,function(BH,BG){if(BH){A8|=BD.items[BG].der;}});A8&=BE;if(Af.fgr!==A6.geoRole||Af.fid!==A6.geoForm.fid||Af.der!==A8){if(Am&&Af.fid!==A6.geoForm.fid){if(Af.fgr!==Ar){A7(BF,Af,Ar,0);if(Af.der>0){BA=true;}}}if(A6.geoForm.fgr!==A6.geoRole||A6.geoForm.der!==A8){A7(BF,A6.geoForm,A6.geoRole,A8);if((A8&A6.geoForm.der)!==A6.geoForm.der){BA=true;}}if(BF.length>0){BF.forEach(function(BH,BG){A9.push({act:"changeEMMAMapping",dsid:AY,tbid:Az[BG].did,mapping:BB(BH)});});A1(A9,BA);}}},A4=function(){C(AE.mid,AY,{success:A3});};if(!AV){mstrmojo.warn(mstrmojo.desc(13525,"Modifications to this dataset will affect other reports, documents, and dashboards that share the dataset. Do you want to continue?"),{},{buttons:[r(mstrmojo.desc(219,"Yes"),function(){A4();},true,{width:"60px"}),r(mstrmojo.desc(221,"Cancel"),function(){})]});}else{A4();}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.num","mstrmojo.array","mstrmojo.VisMenuList","mstrmojo.mstr.EnumFunction","mstrmojo._HasMarkup","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel","mstrmojo.css","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.ui.DatasetUnitMenuUtils");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig");var m=document.getElementById("vis-measure-canvas"),A=document.getElementById("vis-measure-span"),AA={},Y={},q={},S=mstrmojo.dom,d=mstrmojo.elementHelper,p=mstrmojo.vi.ui.DatasetUnitMenuUtils,y=mstrmojo.VisEnum.EnumColorRankMode,z=mstrmojo.chart.model.enums.EnumDSSObjectType,c=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,J=mstrmojo.chart.enums.EnumFontStyle,T=mstrmojo.hash,R=mstrmojo.func.wrapMethods,u=mstrmojo.VisEnum,e=u.SERVER_JSON_ERROR_TYPE;var o=64,f=128,O=4,k=5,t=6,v=7,i=mstrmojo,j=i.array,s=mstrmojo.array,P=i.desc,x=i.mstr.EnumFunction,a=mstrmojo.vi.enums.EnumDerivedElementType,Z=i._HasMarkup,F=i.css;mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869);function AC(AI,AH){var AJ=n.pluck(AH,"tid"),AK=n.pluck(AH,"eid"),AG=(AI.getDocModel&&AI.getDocModel())||n.getPropertyByPath(AI,"model.docModel");if(n.getPropertyByPath(AG,"getColorBy") instanceof Function){return AG.getColorBy(AJ,AK);}}function AB(AG,AI,AK){var AJ=AI.id,AH=AI.getHost();if(AH&&AH.observableModel){AG.forEach(function(AM){var AL=AH.observableModel[AM];if(AL){AL.attachEventListener("valueChanged",AJ,AK);}});}}function U(AH){var AG={SINGLE:[{text:P(358,"Absolute"),value:x.FunctionAbs,n:P(358,"Absolute"),v:x.FunctionAbs}],PAIR:[{text:P(6017,"Add"),value:x.FunctionAdd,n:P(6017,"Add"),v:x.FunctionAdd},{text:P(2122,"Average"),value:x.FunctionAverage,n:P(2122,"Average"),v:x.FunctionAverage},{text:P(5868,"Least"),value:x.FunctionLeast,n:P(5868,"Least"),v:x.FunctionLeast},{text:P(5869,"Greatest"),value:x.FunctionGreatest,n:P(5869,"Greatest"),v:x.FunctionGreatest},{text:"A-B",value:x.FunctionMinus+";0",n:"A-B",v:x.FunctionMinus+";0"},{text:"B-A",value:x.FunctionMinus+";1",n:"B-A",v:x.FunctionMinus+";1"},{text:"A/B",value:x.FunctionDivide+";0",n:"A/B",v:x.FunctionDivide+";0"},{text:"B/A",value:x.FunctionDivide+";1",n:"B/A",v:x.FunctionDivide+";1"}],MORE:[{text:P(6017,"Add"),value:x.FunctionAdd,n:P(6017,"Add"),v:x.FunctionAdd},{text:P(2122,"Average"),value:x.FunctionAverage,n:P(2122,"Average"),v:x.FunctionAverage},{text:P(5868,"Least"),value:x.FunctionLeast,n:P(5868,"Least"),v:x.FunctionLeast},{text:P(5869,"Greatest"),value:x.FunctionGreatest,n:P(5869,"Greatest"),v:x.FunctionGreatest}]};return AG[AH];}function B(AH,AG){return !!(((AH&&AH.at)||0)&AG);}function N(AG){return !AG.selCells.some(function(AH){var AI=AG.getCellForNode(AH);return d.isNonGroupNull(AI)||!B(AI,o)||AI.dei!==undefined||AG.model.isRecursiveAttribute(AI.tid);});}function I(AH){var AG;return !AH.selCells.some(function(AI){AG=AH.getCellForNode(AI);return(d.isNonGroupNull(AG)||!B(AG,f))||AH.model.isRecursiveAttribute(AG.tid);});}function E(AJ,AI,AL,AK,AH){var AG=AL&&AL.func;if((AG===AK)||(typeof AK==="string"&&AK.indexOf(AG)===0&&AK.indexOf(";0")>0)){return ;}if(AH){AJ.editDECalculation(AI,AK);}else{AJ.derivedElementCalculation(AI,AK);}}function M(AS,AQ,AO){var AR=AQ&&AQ.es,AG=(AR&&AR.length)||AS.selCells.length,AJ=(AG===1)?"SINGLE":((AG===2)?"PAIR":"MORE"),AP=U(AJ),AI=(AQ&&AQ.func),AK,AT=AS.selCells,AH,AN,AM,AL;if(AJ==="PAIR"){if(AQ){AL=AR[0].v>AR[1].v;if(AL){AM=AR[0].n;AN=AR[1].n;AP[4]={value:x.FunctionMinus+";1",v:x.FunctionMinus+";1"};AP[5]={value:x.FunctionMinus+";0",v:x.FunctionMinus+";0"};AP[6]={value:x.FunctionDivide+";1",v:x.FunctionDivide+";1"};AP[7]={value:x.FunctionDivide+";0",v:x.FunctionDivide+";0"};}else{AN=AR[0].n;AM=AR[1].n;}}else{AN=AO(AT[0]);AM=AO(AT[1]);}AP[O].text=AN+" - "+AM;AP[k].text=AM+" - "+AN;AP[t].text=AN+" / "+AM;AP[v].text=AM+" / "+AN;AP[O].n=AN+" - "+AM;AP[k].n=AM+" - "+AN;AP[t].n=AN+" / "+AM;AP[v].n=AM+" / "+AN;}for(AK in AP){if(typeof AP[AK].value==="string"&&AP[AK].value.indexOf(AI)===0&&AP[AK].value.indexOf(";0")>0){AH=AP[AK];break;}if(AP[AK].value===AI){AH=AP[AK];break;}}return{items:AP,selectedItem:AH};}function V(AG,AJ){if(!AG){return AG;}if(AJ.length===1){return AG[AJ[0]];}var AI=(AJ&&AJ.length)||0,AH;for(AH=0;AH<AI;AH++){AG=AG[AJ[AH]];if(!AG){break;}}return AG;}function w(AI,AH,AG){return AI.every(function(AJ){return AJ.ttp===AH||AJ.ttp===AG;});}function AF(AH,AK,AL){var AJ=(AK&&AK.length)||0,AI,AG,AM=AH;for(AI=0;AI<AJ-1;AI++){AG=AK[AI];if(!AM[AG]){AM[AG]={};}AM=AM[AG];}AM[AK[AJ-1]]=AL;}function X(AO){var AP,AN,AJ,AL,AG,AM=this.model.docModel.datasets,AH=false,AK=false,AI={isDM:false};for(AP in AM){if(AM.hasOwnProperty(AP)){AN=AM[AP].mx;j.forEach((AN||[]),function(AQ){if(AQ.did===AO){if(AQ.um||AQ.rdm){AK=true;}AH=true;return false;}});if(AH){break;}}}if(AK){AG=this.model.data.gts.col;AJ=(AG&&AG[AG.length-1]);if(AJ&&AJ.otp===-1){AL=AJ.es;}j.forEach((AL||[]),function(AQ){if(AQ.oid===AO){AI={isDM:true,id:AQ.id};return false;}});}return AI;}function H(AG,AJ){var AM=[],AI={act:"updateElementsPropertiesMap",epm:AM},AK=[],AH={},AO=[AH],AN=this;AM.push({epmk:AK,epmv:AO});AG.forEach(function(AQ){var AR=AQ.tid,AP=AR===-1,AS={ob:{did:AP?"":AR}};AK.push(AS);});if(AJ&&AJ.indexOf("default")<0){AH.v={vv:AJ};}var AL=[];AH.k={chn:AL};AG.forEach(function(AR){var AS=AR.tid,AP=AS===-1,AQ;if(AP){AQ=X.call(AN,AR.eid);if(AQ.isDM){AL.push({emt:2,ei:AQ.id});}else{AL.push({emt:2,mt:{did:AR.eid,tp:4,ql:0}});}}else{AL.push({emt:1,ei:AR.eid,at:{did:AS,tp:AR.tp,ql:0}});}});return AI;}function C(AK,AI){var AJ="00000000000000000000000000000000",AH=AK&&AK.dropZones,AG=j.find(AH,"id",AI);return AG===-1?[]:j.filter(AH[AG].items,function(AL){return AL.t===4&&AL.id!==AJ;});}function b(AH,AG){return function(){var AI=new i.ui.menus.MenuConfig();AI.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);AI.addRadioMenuGroup(null,AH,AG,"checkMark",undefined,true);return AI;};}mstrmojo.VisUtility=mstrmojo.provide("mstrmojo.VisUtility",{getCache:function(){return JSON.stringify(q);},getUpdateColorMapAction:function(AH,AG){return H.call(this,AH,AG);},measureTextSize:function(AH,AG,AI){return{width:this.measureTextWidth(AH,AG,AI),height:this.measureTextHeight(AH,AG,AI)};},measureTextWidth:function(AJ,AI,AK,AH,AG){if(S.isIE||S.isIEW3C){return this.measureTextWidthWithSpan(AJ,AI,AK,AH,AG);}return this.measureTextWidthWithCanvas(AJ,AI,AK);},measureTextWidthWithCanvas:function(AJ,AK,AN,AL){AL=AL||false;if(AJ===""){return 0;}if(AJ===" "){AJ="\u00A0";}var AM=AK.fontFamily,AP=AK.fontSize,AI=AK.fontStyle,AO=AK.fontWeight;if(typeof AP==="number"){AP+="pt";}AI=AI||"normal";AO=AO||"normal";AN=AN||0;var AH=AL?undefined:V(AA,[AM,AP,AI,AO,AJ]);if(!AH){if(!m){m=document.createElement("canvas");m.width=0;m.height=0;m.id="vis-measure-canvas";m.style.position="absolute";m.style.top="0";m.style.fontSize="medium";document.body.appendChild(m);}var AG=m.getContext("2d");AG.font=AI+" "+AO+" "+AP+" "+AM;AH=Math.ceil(AG.measureText(AJ).width);AF(AA,[AM,AP,AI,AO,AJ],AH);}return AH+AN;},measureTextWidthWithSpan:function(AI,AJ,AN,AP,AK){if(AI===""){return 0;}if(AI===" "){AI="\u00A0";}var AL=AJ.fontFamily,AQ=AJ.fontSize,AH=AJ.fontStyle,AM=AJ.fontWeight;if(typeof AQ==="number"){AQ+="px";}AH=AH||"normal";AM=AM||"normal";AP=AP||"auto";AN=AN||0;AK=!!AK;if(typeof AP==="number"){AP+="px";}var AG=V(Y,[AL,AQ,AH,AM,AP,AI]);if(!AG){var AO;if(!A){A=document.createElement("span");AO=A.style;A.id="vis-measure-span";AO.position="absolute";AO.top="0";AO.visibility="hidden";AO.width="auto";AO.height="auto";if(AK){AO.whiteSpace="nowrap";}else{AO.whiteSpace="normal";}document.body.appendChild(A);}AO=A.style;if(AK){AO.whiteSpace="nowrap";}else{AO.whiteSpace="normal";}AO.width="auto";AO.height=AP;AO.fontFamily=AL;AO.fontSize=AQ;AO.fontStyle=AH;AO.fontWeight=AM;A.innerHTML=AI;AG=Math.ceil(A.clientWidth);AF(Y,[AL,AQ,AH,AM,AP,AI],AG);}return AG+AN;},measureTextHeight:function(AI,AJ,AO,AQ,AG,AL,AK){if(AI===""){return 0;}if(AI===" "){AI="\u00A0";}var AM=AJ.fontFamily,AS=AJ.fontSize,AH=AJ.fontStyle,AN=AJ.fontWeight;AG=AG||"normal";AK=!!AK;if(typeof AS==="number"){AS+="px";}AH=AH||"normal";AN=AN||"normal";AQ=AQ||"auto";AO=AO||0;if(typeof AQ==="number"){AQ+="px";}var AR=AL?undefined:V(q,[AM,AS,AH,AN,AQ,AI]);if(!AR){var AP;if(!A){A=document.createElement("span");AP=A.style;A.id="vis-measure-span";AP.position="absolute";AP.top="0";AP.visibility="hidden";AP.width="auto";AP.height="auto";if(AK){AP.whiteSpace="nowrap";}else{AP.whiteSpace="normal";}document.body.appendChild(A);}AP=A.style;if(AK){AP.whiteSpace="nowrap";}else{AP.whiteSpace="normal";}AP.heigth="auto";AP.width=AQ;AP.fontFamily=AM;AP.fontSize=AS;AP.fontStyle=AH;AP.fontWeight=AN;AP.wordBreak=AG;A.innerHTML=AI;AR=A.clientHeight;if(!AL){AF(q,[AM,AS,AH,AN,AQ,AI],AR);}}return AR+AO;},getVisEmptyMsg:function(AG){var AH="";switch(AG){case"AE_ERROR":AH='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div style="padding:25px"><div class="gm-warning-icon" style="padding-bottom:18px"></div><div style="padding-bottom:8px">'+mstrmojo.desc(14436,"Unable to load visualization.")+"</div><div>"+mstrmojo.desc(14437,"Use a filter to reduce the data and try again.")+"</div></div></div></div></div>";break;case"NODATA_OTHERERROR":AH='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div>'+(this.errorMsg||mstrmojo.desc(12093,"Filter excludes all data"))+"</div></div></div></div>";break;default:AH='<div class="mstrmojo-Label dropMsg" style="display: block;" >'+mstrmojo.desc(11668,"Drag objects here.")+"</div>";}return AH;},applyStyles2DomNode:function(AL,AO){var AG,AM=AL.style;if(Object.prototype.hasOwnProperty.call(AO,"backgroundColor")&&AO.backgroundColor!==""&&AO.backgroundColor!=="transparent"){var AK=1;if(Object.prototype.hasOwnProperty.call(AO,"opacity")&&AO.opacity!==""){AK=AO.opacity;}var AH=AO.backgroundColor,AN=function AN(AP){if(isNaN(AP)){AP=0;}AP%=16777216;return{b:AP%256,g:(AP>>8)%256,r:(AP>>16)%256};},AJ="";if(AH){var AI=function AI(AQ,AR){if(AQ==="transparent"){return"rgba(0,0,0,0)";}AQ=this.parseCSSColor(AQ,false);var AP=AN(AQ);return"rgba("+AP.r+" ,"+AP.g+" ,"+AP.b+" ,"+AR+" )";}.bind(this);if(AH.c1!==undefined&&AH.c2!==undefined&&AH.or!==undefined){AJ=(F.buildGradient(AH.or,AI(AH.c1,AK),AI(AH.c2,AK))).v;}else{AJ=AI(AH,AK);}AM.background=AJ;}}else{AM.backgroundColor="rgba(0,0,0,0)";}for(AG in AO){if(AG!=="backgroundColor"&&AG!=="opacity"&&Object.prototype.hasOwnProperty.call(AO,AG)&&AO[AG]&&AO[AG]!==""){AM[AG]=AO[AG];}}},parseCSSColor:function(AK,AH){var AG,AI;if(AK.length===7){if(AH===true){AG=AK[5]+AK[6]+AK[3]+AK[4]+AK[1]+AK[2];}else{AG=AK.slice(1);}}else{AG=[];var AJ=AK.slice(1);if(AH===true){for(AI=2;AI>=0;AI--){AG.push(AJ[AI]);AG.push(AJ[AI]);}}else{for(AI=0;AI<3;AI++){AG.push(AJ[AI]);AG.push(AJ[AI]);}}AG=AG.join("");}return parseInt(AG,16);},positionDomNode:function(AI,AK){var AH,AN,AL,AJ=["width","height","top","left","right","bottom"],AM=AJ.length,AG=AI.style;for(AH=0;AH<AM;AH++){AN=AJ[AH];AL=AK[AN];if(AL!==undefined){if((typeof AL)==="number"){AL+="px";}AG[AN]=AL;}}},getComputedFontStyle:function G(AI){var AG=mstrmojo.css.getComputedStyle(AI);var AJ={};AJ.fontFamily=AG.fontFamily;AJ.fontSize=AG.fontSize;AJ.fontStyle=AG.fontStyle;AJ.fontWeight=AG.fontWeight;AJ.fontVariant=AG.fontVariant;var AH=parseInt(AG.paddingLeft)||0,AK=parseInt(AG.paddingLeft)||0;AJ.bonus=AH+AK;return AJ;},splitWordIfTooLong:function(AQ,AO,AJ){var AM=[];var AN=AQ.length;var AK;for(AK=0;AK<AN;AK++){var AH=AQ[AK];while(true){var AR=this.measureTextWidth(AH,AJ);if(AR>AO){var AP=(AO/AR)*AH.length;var AG=Math.max(Math.round(AP),1);while(AG>0){var AL=AH.substr(0,AG);var AI=Math.round(this.measureTextWidth(AL,AJ));if(AI<=AO||AG===1){AM.push(AL);break;}else{AG--;}}AH=AH.substr(AG,AH.length-AG);}else{AM.push(AH);break;}}}return AM;},truncateTextToLineWithWordWrap:function Q(Ag,AZ,AX,AM,AY,AQ){var AU=Ag.split(" "),Aa=AU.length;if(!AQ){AU=this.splitWordIfTooLong(AU,AX,AZ);}var An,AS=[],Ai=[],AG=0,AK=AU.length,Ap=this.measureTextWidth(" ",AZ),AJ=0,AP=false,AW=(Aa===AU.length);Ai.push(0);for(An=0;An<AK;An++){var Ae=this.measureTextWidth(AU[An],AZ);if(!AQ&&Ae>AX){var AH=AU[An];var Al=(AX/Ae)*AH.length;AU[An]=AH.substr(0,parseInt(Al,10));Ae=AX;}AS.push(Ae);AG+=Ae;Ai.push(AG);if(An!==AK-1){AG+=Ap;}}var Ak,Am,Ac=AM;for(Ak=0,Am=0;Am<Ai.length;){var AO=Ai[Am]-Ai[Ak];if(Ak>0&&Am!==Ak){AO-=Ap;}var AN=Ai[Am+1]-Ai[Ak];if(Ak>0&&Am+1!==Ak){AN-=Ap;}if(AO<=AX&&((Am+1===Ai.length)||(AN>AX))){AJ=Math.max(AJ,AO);Ac--;if(Ac===0||Am===AK){break;}else{Ak=Am;Am++;}}else{Am++;}}if(Am>AK){Am=AK;}var AR=Ai[Am]-Ai[Ak];if(Ak>0&&Am!==Ak){AR-=Ap;}var Af;if(Am>=AK&&AR<AX){Af=AU.join(" ");}else{AP=true;AJ=AX;Af=AU.slice(0,Am).join(" ");var AT=this.measureTextWidth("...",AZ);if(AR+AT<=AX){if(AR+Ap+AT>AX){Af+="...";}else{var Ao=AU[Am],AV;for(var Ab=1;Ab<Ao.length;Ab++){AV=this.measureTextWidth(Ao.substr(0,Ab),AZ);if(AR+Ap+AV+AT>AX){break;}}Af+=" "+Ao.substr(0,Ab-1)+"...";}}else{if(Af.charAt(Af.length-1)===" "){Af=Af.substr(0,Af.length-1);}var Ad=Af.lastIndexOf(" ");var AI=Af.length-1-Ad;if(AI===3){Af=Af.substr(0,Af.length-3)+" ...";}else{var Ah=0,AL="",Aj=0;while(Ah<AT&&Af.length>Aj){Aj++;AL=Af.substr(Af.length-Aj,Af.length);Ah=this.measureTextWidth(AL,AZ);}Af=Af.substr(0,Af.length-Aj)+"...";}}}if(AY){return{text:Af,truncated:AP,maxLineLen:AJ,canWordWrap:AW};}return Af;},measureSuperTextWidth:function AE(AH,AI,AG,AJ){return AH?this.measureTextWidth("<sup>"+AI+"</sup>",AG,AJ):this.measureTextWidth(AI,AG,AJ);},splitTokenIfTooLong:function h(AR,AP,AJ){var AN=[];var AO=AR.length;var AK,AH,AS,AM,AT;for(AK=0;AK<AO;AK++){AH=AR[AK];AM=AH.isSuper;while(true){AS=AH.v;if(AH.textWidth!==undefined){AT=AH.textWidth;}else{AT=AH.textWidth=this.measureSuperTextWidth(AM,AS,AJ);}if(AT>AP){var AQ=(AP/AT)*AS.length;var AG=Math.max(Math.round(AQ),1);while(AG>0){var AL=AS.substr(0,AG);var AI=Math.round(this.measureSuperTextWidth(AM,AL,AJ));if(AI<=AP||AG===1){AN.push({v:AL,isSuper:AM,textWidth:AI});break;}else{AG--;}}AH={v:AS.substr(AG,AS.length-AG),isSuper:AM};}else{AN.push(AH);break;}}}return AN;},truncateTextToLineWithWordWrapForTokens:function W(AQ,AK,Aj,Ab,Ak,AW){var Ae=AQ.length;AQ=this.splitTokenIfTooLong(AQ,Aj,AK);var Ai,AV=[],AG=0,AZ=AQ.length,AH=0,Aa=false,AM=(Ae===AQ.length),AO,AT,Ac,AI,Ag,AP,AU;if(AW&&!AM){return{canWordWrap:AM};}AV.push(0);for(Ai=0;Ai<AZ;Ai++){AO=AQ[Ai];Ac=AO.v;AT=AO.isSuper;if(AO.textWidth!==undefined){AI=AO.textWidth;}else{AI=AO.textWidth=this.measureSuperTextWidth(AT,Ac,AK);}if(AI>Aj){var Ah=(Aj/AI)*Ac.length;AO.v=Ac.substr(0,parseInt(Ah,10));AI=AO.textWidth=Aj;}AG+=AI;AV.push(AG);}var AS,Ad,AR=Ab;for(AS=0,Ad=0;Ad<AV.length;){var AN=AV[Ad]-AV[AS];var AL=AV[Ad+1]-AV[AS];if(AN<=Aj&&((Ad+1===AV.length)||(AL>Aj))){AH=Math.max(AH,AN);AR--;if(AR===0||Ad===AZ){break;}else{AS=Ad;Ad++;}}else{Ad++;}}if(Ad>AZ){Ad=AZ;}var AY=AV[Ad]-AV[AS];var Al;if(Ad>=AZ&&AY<Aj){Al=AQ;}else{Aa=true;AH=Aj;Al=AQ.slice(0,Ad);var AJ=this.measureTextWidth("...",AK);if(AY+AJ<=Aj){AP=AQ[Ad];Ac=AP.v;AT=AP.isSuper;for(Ag=1;Ag<Ac.length;Ag++){AU=this.measureSuperTextWidth(AT,Ac.substr(0,Ag),AK);if(AY+AJ+AU>Aj){break;}}if(Ag>1){AO={v:Ac.substr(0,Ag-1),isSuper:AT};AO.textWidth=this.measureSuperTextWidth(AT,AO.v,AK);Al.push(AO);Al.push({v:"...",textWidth:AJ});}}else{var AX=0,Af;for(Ai=Al.length-1;Ai>=0;Ai--){AO=Al[Ai];Ac=AO.v;AT=AO.isSuper;Af=0;for(Ag=Ac.length-1;Ag>=0;Ag--){Af=this.measureSuperTextWidth(AT,Ac.substr(Ag),AK);if(AX+Af>=AJ){break;}}if(Ag>=0){break;}else{AX+=Af;}}if(Ai>=0){if(Ag>0){AO.v=Ac.substr(0,Ag);AO.textWidth=this.measureSuperTextWidth(AT,AO.v,AK);Al=Al.slice(0,Ai+1);}else{if(Ag===0){Al=Al.slice(0,Ai);}}Al.push({v:"...",textWidth:AJ});}else{Al=[{v:"...",textWidth:AJ}];}}}if(Ak){return{text:Al,truncated:Aa,maxLineLen:AH,canWordWrap:AM};}return Al;},getRankMode:function g(AM){var AO=1,AN=2,AL=3,AH=4,AJ=5,AG=6,AK=7,AI=y.INVALID;if(AM){if(w(AM,AL,AN)){AI=y.TOP_PERCENT;}else{if(w(AM,AL,AO)){AI=y.BOTTOM_PERCENT;}else{if(w(AM,AG,AH)){AI=y.BOTTOM;}else{if(w(AM,AG,AJ)){AI=y.TOP;}else{if(w(AM,AK)){AI=y.VALUE;}}}}}}return AI;},getColorByTitle:function L(AH,AG){if(AG===y.BOTTOM_PERCENT||AG===y.TOP_PERCENT){AH=mstrmojo.desc(2787,"Percentage of ##").replace("'##'",AH);}else{if(AG===y.BOTTOM||AG===y.TOP){AH=mstrmojo.desc(2788,"Rank of ##").replace("'##'",AH);}}return AH;},getColorByFormatStr:function r(AH,AG){if(AG===y.BOTTOM_PERCENT||AG===y.TOP_PERCENT){AH="0%;(0%)";}else{if(AG===y.BOTTOM||AG===y.TOP){AH="";}}return AH;},getColorByItems:function AD(AG,AQ,AX,AT,AO,AM,AU){var AS=[],AY,AI,AN=mstrmojo.num,AL,AP;if(AG===undefined||AG.length===0){return AS;}var Aa=true;if(AG.length>1){if(AG[0].ceil===AG[1].flr){Aa=false;}else{Aa=true;}}for(AY=0;AY<AG.length;AY++){var AZ=AG[AY],AK={},AH=AZ.ceil,AW=AZ.flr;if((AY===0&&Aa)||(AY===AG.length-1&&!Aa)){if(AQ===y.BOTTOM_PERCENT||AQ===y.TOP_PERCENT){AK.flr=AW/100;AK.ceil=1;}else{if(AQ===y.TOP||AQ===y.BOTTOM){AW+=1;AK.flr=Math.floor(AW);AK.ceil=AO;}else{AK.flr=AW;AK.ceil=AX;}}AP=AK.ceil;}else{if((AY===0&&!Aa)||(AY===AG.length-1&&Aa)){if(AQ===y.BOTTOM_PERCENT||AQ===y.TOP_PERCENT){AK.flr=0;AK.ceil=AH/100;}else{if(AQ===y.TOP||AQ===y.BOTTOM){AK.flr=0;AK.ceil=Math.floor(AH);}else{AK.flr=AT;AK.ceil=AH;}}AL=AK.flr;}else{if(AQ===y.BOTTOM_PERCENT||AQ===y.TOP_PERCENT){AW=AW/100;AH=AH/100;}else{if(AQ===y.TOP||AQ===y.BOTTOM){AW+=1;AW=Math.floor(AW);AH=Math.floor(AH);}}AK.flr=AW;AK.ceil=AH;}}if(AQ===y.TOP||AQ===y.BOTTOM){AK.ceil=AK.ceil>AO?AO:AK.ceil;}if(AM){AK.label=AN.formatByMask(AM,AK.flr)+" - "+AN.formatByMask(AM,AK.ceil);}else{AK.label=AK.flr+" - "+AK.ceil;}if(AZ.fmt&&AZ.fmt.bc){AK.color=AZ.fmt.bc;}else{AK.color=AU;}AS.push(AK);}AS=AS.filter(function(Ab){return Ab.flr<=Ab.ceil&&!(Ab.flr>AP||Ab.ceil<AL);});if(AQ===y.TOP||AQ===y.BOTTOM){AI=AO;}else{if(AS.length>0){if(Aa){AI=AS[0].ceil-AS[(AS.length-1)].flr;}else{AI=AS[(AS.length-1)].ceil-AS[0].flr;}}}var AV=0,AR,AJ;for(AY=0;AY<AS.length;AY++){if(AY===AS.length-1){AS[AY].scopePercent=1-AV;}else{if(AQ===y.TOP||AQ===y.BOTTOM){AJ=AS[AY].ceil-AS[AY].flr+1;}else{AJ=AS[AY].ceil-AS[AY].flr;}AR=AJ/AI;AS[AY].scopePercent=AR;AV+=AR;}}return AS;},getDefaultColorByItems:function(AJ,AH,AI){var AG={};AG.label=AI+" - "+AH;AG.flr=AI;AG.ceil=AH;AG.color=AJ;AG.scopePercent=1;return[AG];},getNumberFormat:function(AJ,AH){var AK=AJ.nf,AI=AJ.gvs;function AG(){var AN=(AI&&AI.items&&AI.items[0]&&AI.items[0].items)||[],AM=AN[AH]||{},AL=AM.nfs;return typeof AL==="string"?AL:"";}if(typeof AK[AH].nfs!=="string"){AK[AH].nfs=AG();}return AK[AH].nfs;},hasOnlyMetricsOnColumn:function(AH){var AG=(AH&&AH.gts&&AH.gts.col)||[];return AG.every(function(AI){return AI.otp===z.DssTypeUnknown&&(AI.es||[]).every(function(AJ){return AJ.otp===z.DssTypeMetric;});});},hasNoMetricOnRow:function(AH){var AI=(AH&&AH.gts&&AH.gts.row)||[],AG=function(AJ){return AJ.otp!==z.DssTypeMetric;};return AI.every(AG);},isOnExpressMode:function(){return mstrApp.isExpress;},modifyScExp:function(AO,AG,AS,AM){if(!AO||!AG){return ;}var AJ=AO.nds,AN,AH,AP,AR,AQ,AL,AK,AI;s.forEach(AJ||[],function(AT){AN=AT.nds;s.forEach(AN||[],function(AU){AH=AU.es;s.forEach(AH||[],function(AV){AR=AV.v;AL=AM[AR];if(!AL){AL=AS.getNormalizedFormElementId(AR);AM[AR]=AL;}s.forEach(AG||[],function(AW){AP=AW.es;s.forEach(AP||[],function(AX){AI=false;AQ=AX.id;if(AQ===AR){AI=true;}else{AK=AM[AQ];if(!AK){AK=AS.getNormalizedFormElementId(AQ);AM[AQ]=AK;}if(AL===AK){AI=true;}}if(AI){AV.v=AX.id;AV.n=AX.n;return false;}});if(AI){return false;}});});});});},modifyScExpDeprecated:function(AM,AN,AK,AI){if(!AM||!AN){return ;}var AJ=AM.nds,AH,AG,AL;s.forEach(AJ||[],function(AO){AH=AO.nds;s.forEach(AH||[],function(AP){AG=AP.es;s.forEach(AG||[],function(AQ){s.forEach(AN||[],function(AR){s.forEach(AR||[],function(AS){AL=AS.es;s.forEach(AL||[],function(AT){if(AK.call(AI,AT.id,AQ.v)){AQ.v=AT.id;AQ.n=AT.n;}});});});});});});},getMouseOffset:function(AH){var AG=(AH.offsetX!==undefined)?AH.offsetX:(AH.layerX),AI=(AH.offsetY!==undefined)?AH.offsetY:(AH.layerY);return{x:AG,y:AI};},translateLineStyle:function(AG){var AI=["none","solid","solid","dashed","dotted"],AH=["1px","1px","2px","1px","1px"];return{width:AH[AG]||"0px",style:AI[AG]||"none"};},getGroupAndCalculationContextMenuForDataPoints:function(AP,Ad){var AR,AT=[],AI=[],Aa=[],AN=Ad.fnCellName,AV=Ad.fnUnique,AM=Ad.fnMakeNode,AY=AP.getCellForNode.bind(AP),Af=Ad.selection;var AL=new i.ui.menus.MenuConfig(),AH=new i.ui.menus.MenuConfig(),AX=new i.ui.menus.MenuConfig(),Ac=new i.ui.menus.MenuConfig();function Ae(Ag){AP.selCells=AT[Ag].selCells;AP.derivedElementGroup(AY(AP.selCells[0]));}function AO(Ai){AP.selCells=AI[Ai].selCells;var Ah=AY(AI[Ai].selCells[0]),Ag=AP.getDEInfo(Ah);AP.derivedElementsEdit(AY(AP.selCells[0]),Ag);}function AU(Ah){AP.selCells=AI[Ah].selCells;var Ag=AY(AI[Ah].selCells[0]);AP.removeQuickDE(Ag);}function AS(Ah){AP.selCells=AI[Ah].selCells;var Ag=AY(AI[Ah].selCells[0]);AP.renameDEList(Ag);}function AW(Ag){E(AP,AY(AP.selCells[0]),null,Ag,false);}function AG(Ag){E(AP,AY(AP.selCells[0]),null,Ag,true);}function AK(Ah){var Ag=AY(AI[Ah].selCells[0]);AP.removeQuickDE(Ag);}function Ab(Ah){var Ag=AY(AI[Ah].selCells[0]);AP.editDECalculation(Ag);}function AQ(Ag){Ag=Ag||[];function Ah(Al){var Ai=Al.extra||{},Am=Al.setup||mstrmojo.emptyFn,Aj=Al.action||mstrmojo.emptyFn,Ak=[];Am(Ak,Ai);Aj(Ak,Ai);}Ag.forEach(Ah);}var AJ=[{name:"group",setup:function(Ag){AT.forEach(function(Ah){AP.selCells=AT[Ah.v].selCells;if(!Object.prototype.hasOwnProperty.call(AI,Ah.v)&&N(AP)){Ag.push(Ah);}});},action:function(Ah){var Ag;if(Ah.length===1){Ag=Ah[0].v;AL.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AP.selCells=AT[Ag].selCells;AP.derivedElementGroup(AY(AP.selCells[0]));});}if(Ah.length>1){AL.addPopupMenuItem(mstrmojo.desc(1911,"Group"),AP.id,b(Ae,Ah),"xt");}}},{name:"edit-group",setup:function(Ag){AI.forEach(function(Ak){var Aj=AY(AI[Ak.v].selCells[0]),Ai=AP.getDEInfo(Aj),Ah=Ai&&Ai.de;if(Ah&&Ah.t===a.LIST){Ag.push(Ak);}});},action:function(Ah){var Ag,Aj,Ai;if(Ah.length===1){Ag=AI[Ah[0].v].selCells;Aj=AY(Ag[0]);Ai=AP.getDEInfo(Aj);AH.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AP.selCells=Ag;AP.derivedElementsEdit(AY(AP.selCells[0]),Ai);});AH.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AP.selCells=Ag;AP.removeQuickDE(Aj);});Ac.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AP.selCells=Ag;AP.renameDEList(Aj);});}if(Ah.length>1){AH.addPopupMenuItem(mstrmojo.desc(13395,"Edit Group..."),AP.id,b(AO,Ah),"xt");AH.addPopupMenuItem(mstrmojo.desc(12195,"Ungroup"),AP.id,b(AU,Ah),"xt");Ac.addPopupMenuItem(mstrmojo.desc(13968,"Rename Group..."),AP.id,b(AS,Ah),"xt");}}},{name:"calculation",setup:function(Ag){Aa.forEach(function(Aj,Ai,Ah){AP.selCells=Ah[Aj.v].selCells;var Al=AY(AP.selCells[0]),Ak=AP.getDEInfo(Al),Am=Ak&&Ak.de;if(!(Am&&Am.t===a.RESIDUE)&&I(AP)){Ag.push(Aj);}});},action:function(Ag){if(Ag.length===1){AL.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AP.id,function(){var Ah=Ag[0].v,Ai=new i.ui.menus.MenuConfig();AP.selCells=Aa[Ah].selCells;Ai.addRadioMenuGroup(null,AW,M(AP,null,AN).items,"checkMark",undefined,true);return Ai;},"xt");}if(Ag.length>1){AL.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AP.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Ag,selectedIndex:0,onitemSelected:function(Ah){var Ai=Ah.v;AP.selCells=Aa[Ai].selCells;this.parent.checkList.set("items",[]);this.parent.checkList.set("items",M(AP,null,AN).items);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Ai,Ah){E(AP,AY(AP.selCells[0]),null,Ah.checkList.selectedItem.v,false);}});});}}},{name:"edit-calculation",setup:function(Ag){AI.forEach(function(Ak){var Aj=AY(AI[Ak.v].selCells[0]),Ai=AP.getDEInfo(Aj),Ah=Ai&&Ai.de;if(Ah&&Ah.t===a.CALCULATION){Ag.push(Ak);}});},action:function(Ag){function Ah(){var Ai=Ag[0].v;AP.selCells=AI[Ai].selCells;var Am=AY(AP.selCells[0]),Al=AP.getDEInfo(Am),An=Al&&Al.de,Ak=M(AP,An,AN),Aj=new i.ui.menus.MenuConfig();Aj.addRadioMenuGroup(Ak.selectedItem.value,AG,Ak.items,"checkMark",undefined,true);return Aj;}if(Ag.length===1){AX.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AP.id,Ah,"xt");AX.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){var Ai=Ag[0].v;AP.selCells=AI[Ai].selCells;var Aj=AY(AP.selCells[0]);AP.removeQuickDE(Aj);});Ac.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){var Ai=Ag[0].v;AP.selCells=AI[Ai].selCells;var Aj=AY(AP.selCells[0]);AP.editDECalculation(Aj);});}if(Ag.length>1){AX.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AP.id,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Ag,selectedIndex:0,onitemSelected:function(Al){var Am=Al.v;AP.selCells=AI[Am].selCells;var Ak=AY(AP.selCells[0]),Aj=AP.getDEInfo(Ak),An=Aj&&Aj.de;var Ai=M(AP,An,AN);this.parent.checkList.set("items",[]);this.parent.checkList.set("items",Ai.items);this.parent.checkList.set("selectedItem",Ai.selectedItem);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Aj,Ai){E(AP,AY(AP.selCells[0]),null,Ai.checkList.selectedItem.v,true);}});});AX.addPopupMenuItem(mstrmojo.desc(12197,"Delete Calculation"),AP.id,b(AK,Ag),"xt");Ac.addPopupMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),AP.id,b(Ab,Ag),"xt");}}}];AR=AV(Af);AR.forEach(function(Ah){var Aj=AM(Ah),Ag=AY(Aj),Ai,Ak,Al;if(!AP.model.supportsViewFilterActions(Ag.tid)){return ;}Ai=Ag.dei===undefined?AT:AI;Ak=Ag.tid;Al=AP.model.getObjectInfo(Ak).n;if(Ai[Ak]===undefined){Ai[Ak]={};Ai[Ak].selCells=[];Ai.push({n:Al,v:Ak,text:Al,value:Ak});}Ai[Ak].selCells.push(Aj);if(Aa[Ak]===undefined){Aa[Ak]={};Aa[Ak].selCells=[];Aa.push({n:Al,v:Ak,text:Al,value:Ak});}Aa[Ak].selCells.push(Aj);});var AZ=this.getPropertyByPath(AP,"model.data.visName")||this.getPropertyByPath(AP,"model.data.vis.vn");if(AZ==="VIHeatMapVisualizationStyle"){AJ.splice(2,2);}AQ(AJ);return{createDe:AL,editGroup:AH,editCalculation:AX,renameDe:Ac};},getGroupAndCalculationContextMenu:function(AO,Ac,AZ){var Ab=AO,AV=AZ.skipSingleAttrCheck||Ab.isSingleAttrSelection(),AJ=false,AL=Ab.isSingleSelection(),AP=Ab.getDEInfo(Ac),AK=AP&&AP.deObject,AY=AP&&AP.de,AT=AK&&Ab.getOthersDEInfo(AK),AR=Ab.getSelections(),AX=true,AN=AZ.fnCellName,Aa=this.getPropertyByPath(Ab,"model.data.visName")||this.getPropertyByPath(Ab,"model.data.vis.vn");var AM=new i.ui.menus.MenuConfig(),AH=new i.ui.menus.MenuConfig(),AS=new i.ui.menus.MenuConfig(),AW=new i.ui.menus.MenuConfig();Ab.selCells=AZ.selection;if(AO.model.supportsViewFilterActions(Ac.tid)){if((AJ||AV)&&B(Ac,o)&&N(Ab)){AM.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AO.derivedElementGroup(Ac);});}if(AL&&AY&&AY.t===a.LIST){AH.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AO.derivedElementsEdit(Ac,AP);});AH.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AO.removeQuickDE(Ac);});AW.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AO.renameDEList(Ac);});}var AQ=function(Ad){E(Ab,Ac,AY,Ad,false);},AU=function(Ad){E(Ab,Ac,AY,Ad,true);};if(AT&&!AL&&AV){j.forEach(AR,function(Ad){if(Ad[0]&&Ad[0].eid.indexOf(AT.id)>-1){AX=false;return false;}});}if(Aa!=="VIHeatMapVisualizationStyle"&&!(AL&&AY&&AY.t===a.RESIDUE)&&(AJ||AV)&&B(Ac,f)&&I(Ab)){var AG=function(){var Ad=new i.ui.menus.MenuConfig(),Ae=M(Ab,null,AN);Ad.addRadioMenuGroup(null,AQ,Ae.items,"checkMark",undefined,true);return Ad;};AM.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),this.id,AG,"xt");}if(AL&&AY&&AY.t===a.CALCULATION){var AI=function(){var Ad=new i.ui.menus.MenuConfig(),Ae=M(Ab,AY,AN);Ad.addRadioMenuGroup(Ae.selectedItem.value,AU,Ae.items,"checkMark",undefined,true);return Ad;};AS.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),this.id,AI,"xt");AS.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){AO.removeQuickDE(Ac);});AW.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){AO.editDECalculation(Ac);});}}return{createDe:AM,editGroup:AH,editCalculation:AS,renameDe:AW};},isHostedPopupNode:function(AK,AI,AH,AG){var AL=AH?AK:AK&&AK.parentNode;while(AL&&(AL!==AG)){var AJ=AL.getAttribute&&AL.getAttribute(AI);if(AJ!==null&&AJ.indexOf("mstrmojo-popup-widget-hosted")>=0){return true;}AL=AL.parentNode;}return false;},applyStyle2Legend:function(AJ,AI,AH){var AG,AL={},AK={};for(AG in AJ){if(AG.indexOf("font")>=0||AG.indexOf("color")>=0||AG.indexOf("textDecoration")>=0){AL[AG]=AJ[AG];}else{AK[AG]=AJ[AG];}}if(AI){AI.style.background="";this.applyStyles2DomNode(AI,AK);}if(AH){this.applyStyles2DomNode(AH,AL);}},mergeMenuConfigs:function K(AH,AG){function AI(AK,AL,AJ){if(!AL){return ;}if(!AJ&&AK.hasMenuItems()&&AL.hasMenuItems()){AK.addSeparator();}if(AL.hasMenuItems()){AK.absorbMenuItems(AL);}}return AG.reduce(function(AJ,AK){AI(AJ,AH[AK.name],AK.noSeparator);return AJ;},new mstrmojo.ui.menus.MenuConfig());},absorbMenuItems:function(AH,AG,AI){AH.addDisposable(AG);AH.absorbMenuItems(AG);if(AI&&AG.menus.length>0){AH.addSeparator();}},addWheelListener:(function(){var AJ=mstrmojo.dom,AI=AJ.attachEvent,AH=AJ.preventDefault,AK;function AG(AO,AN,AP,AM){var AL=(AK==="wheel")?AP:function(AQ){if(!AQ){AQ=window.event;}var AS={originalEvent:AQ,target:AQ.target||AQ.srcElement,type:"wheel",deltaMode:(AQ.deltaMode!==undefined?AQ.deltaMode:1),deltaX:0,deltaZ:0,preventDefault:function(){AH(window,AQ);}},AR=this;if(AK==="mousewheel"){AS.deltaY=-AQ.wheelDelta;if(AQ.wheelDeltaX!==undefined){AS.deltaX=-AQ.wheelDeltaX;}}else{AS.deltaY=AQ.detail;}return AP.call(AR,AS);};return AI(AO,AN,AL,AM);}if(Object.prototype.hasOwnProperty.call(document.createElement("div"),"onwheel")){AK="wheel";}else{AK=document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";}return function(AM,AN,AL){return AG(AM,AK,AN,AL);};}()),isNearZero:function(AH,AG){AG=AG||5;var AI=1/Math.pow(10,AG);return(Math.abs(AH)<AI);},hasMergedRowCells:function(AG){return false;},getMockUpThresholds:function(AI,AJ){var AG=[{tid:1,n:"threshold 0",scope:1,rtp:2,rtxt:"",fmt:{bc:"#cc2525",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,flr:0,ceil:10},{tid:2,n:"threshold 1",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e34b4b",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5},{v:"30%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:10,ceil:30},{tid:3,n:"threshold 2",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e97d7d",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"30%",dtp:5},{v:"50%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:30,ceil:50},{tid:4,n:"threshold 3",scope:1,rtp:2,rtxt:"",fmt:{bc:"#79d479",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"50%",dtp:5},{v:"70%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:50,ceil:70},{tid:5,n:"threshold 4",scope:1,rtp:2,rtxt:"",fmt:{bc:"#57ba57",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"70%",dtp:5},{v:"90%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:70,ceil:90},{tid:6,n:"threshold 5",scope:1,rtp:2,rtxt:"",fmt:{bc:"#2ca02c",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"90%",dtp:5}],fn:5,fnt:3}],fn:19},ttp:1,flr:90,ceil:100}];j.forEach(AG,function(AL){var AK=AL.expr.nds[0].m;AK.did=AI;AK.n=AJ;});var AH={};AH[AI]=AG;return AH;},generateThresholdsInfo:function(AI,AN,AG,AK){var AM=AG.length,AH=[],AQ,AJ,AR=0,AP=0;for(var AL=0;AL<AM;AL++){AJ=Math.round(AK[AL]*100);AP=AR;AR=AJ||100;AQ={tid:AL+1,n:"threshold "+AL,scope:1,rtp:2,rtxt:"",fmt:{bc:AG[AL],bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:AI,n:AN},cs:[{v:AJ+"%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,ceil:AR,flr:AP};AH.push(AQ);}var AO={};AO[AI]=AH;return AO;},psPt2CssPt:function(AI,AH){var AG=parseInt(AI,10)*0.75;if(AH instanceof Function){AG=AH(AG);}return AG+"pt";},captureEventOnce:function(AL,AK,AG,AJ,AI){function AH(AM){AK.call(AG,Z.newDomEvent(AL,window,AM||window.event),AI);S.detachEvent(AJ,AL,AH);}AI=AI||{};AJ=AJ||document;S.attachEvent(AJ,AL,AH);},getPropertyByPath:function(AK,AJ,AG){var AH,AI;if(typeof AJ!=="string"){return AG;}AH=AJ.split(".");AI=AH.every(function(AM){var AL=AK[AM];if(AL!==undefined){AK=AL;return true;}return false;});return AI?AK:AG;},mergeHashes:function(){return Array.prototype.slice.apply(arguments).reduce(function(AG,AH){if(AH){Object.keys(AH).forEach(function(AI){AG[AI]=AH[AI];});}return AG;},{});},toggleControlEnabled:function(AG,AH){[].concat(AG).forEach(function(AI){AI.set("enabled",!!AH);});},findInArray:function(AJ,AI,AH){var AL=-1,AK,AG;if(!Array.isArray(AJ)){return AL;}for(AK=AH===undefined?0:AH,AG=AJ.length;AK<AG;AK+=1){if(AI(AJ[AK])){return AK;}}return AL;},arrayUnique:function(AG,AH){if(!Array.isArray(AG)){return AG;}return AG.filter(function(AI,AJ){return n.findInArray(AG,function(AK){return AH(AI,AK);},AJ+1)===-1;});},range:function(AG,AK,AJ){AJ=AJ||1;var AI,AH=[];for(AI=AG;AI!==AK;AI+=AJ){AH.push(AI);}return AH;},drawDashLine:function D(AO,AI,AM,AH,AK,AG,AN){var AL=(AI===AH),AJ;AO.beginPath();AO.moveTo(AI,AM);if(AL){AJ=0;AM+=AG;while(AM<=AK){if(AJ%2===0){AO.lineTo(AI,AM);AM+=AN;}else{AO.moveTo(AI,AM);AM+=AG;}AJ++;}if(AJ%2===0){AO.lineTo(AH,AK);}}else{AJ=0;AI+=AG;while(AI<=AH){if(AJ%2===0){AO.lineTo(AI,AM);AI+=AN;}else{AO.moveTo(AI,AM);AI+=AG;}AJ++;}if(AJ%2===0){AO.lineTo(AH,AK);}}AO.stroke();},repeat:function(AI,AJ){var AG=[],AH;AJ=Math.max(0,AJ);for(AH=0;AH<AJ;AH+=1){AG[AH]=AI;}return AG;},isHierarchyObject:function(AG){return(AG&&AG.t)===z.DssTypeDimension;},selectPropertyPanel:function(AH,AI){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AH.getDocModel().selectVIUnit(AH.parent.id,true);var AG=AH.edtModel;if(AG){AG.selectTargetByValue(AI);}},pluck:function(AH,AG){if(!j.isArray(AH)){return AH;}return AH.map(function(AI){return AI&&AI[AG];});},pick:function(AH,AG){return AG.reduce(function(AJ,AI){AJ[AI]=AH[AI];return AJ;},{});},isColorManuallySet:function(AI,AH){var AG=AC(AI,AH);if(AG){return AG.isManual;}},getCombColor:function(AI,AH){var AG=AC(AI,AH);if(AG){return AG.color;}},setColorPickerShowAutomatic:function(AH,AG){AH.children[0].fillColor.colorPicker.showAutomatic=AG;},getCharGroupValueChangeCb:function(AG){var AH=(function(){var AI={};AI[c.FONT_WEIGHT]=J.FS_BOLD;AI[c.FONT_STYLE]=J.FS_ITALIC;AI[c.UNDERLINE]=J.FS_UNDERLINE;AI[c.LINE_THROUGH]=J.FS_STRIKETHROUGH;return function(AJ,AK){return AJ^AI[AK];};}());return function(AJ,AI){if(AG instanceof Function){AG=AG();}if(!AG){return ;}switch(AJ){case c.COLOR:AG.fontColor.fill.value.setValue(AI);break;case c.FONT_SIZE:AG.fontSize.setValue(AI);break;case c.FONT_FAMILY:AG.fontFamily.setValue(AI);break;case c.FONT_WEIGHT:case c.FONT_STYLE:case c.UNDERLINE:case c.LINE_THROUGH:AG.fontStyle.setValue(AH(AG.fontStyle.getValue(),AJ));break;}};},getMetricsInDropZone:C,addLegendFontChangeListeners:function(AH,AI){var AG=["lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle"];AB(AG,AH,AI);},addLegendBackgroundChangeListeners:function(AH,AI){var AG=["lgdBgFillClr","lgdBgFillTrans"];AB(AG,AH,AI);},isValidDropZone:function(AG){if(AG===undefined){return false;}var AI=Object.keys(AG).filter(function(AJ){return AJ!=="visProp";});var AH=T.copyProps(AI,AG);return AG&&!T.equals(AH,{});},getDrillCandidates:function(AL){var AI=AL.modelData,AJ=AL.model,AH=AJ.docModel.datasets,AG=AI.gts,AK=AI.datasetId,AM=AH[AK],AN=AM.att||[];return AN.filter(function(AQ){var AP=AQ.did,AR=AG.row||[],AO=AG.col||[];return AR.concat(AO).every(function(AS){return AS.id!==AP&&AQ.hide!==true;});});},getDrillMenuItemsCallback:function(AH,AI,AG){return function(){var AK=n.getDrillCandidates(AH),AJ=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});AK.forEach(function(AL){AJ.addMenuItem(AL.n,"xt",AI,T.copy(AG,{drillUnit:AL}));});return AJ;};},doDrill:function(AI,AW,AR,AX){var AY=AI;function AO(Aa){return Aa.model.controller.cmdMgr;}function AU(){return{success:function Aa(){n.visPrint("reaise");this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}var AH=AY.model,AV=(AY.getDocModel&&AY.getDocModel())||AY.model.docModel,AT=AV.getDataService(),AL=AT.newUpdate();var AN=true;if(AV.prefs&&AV.prefs.rtprnt){AN=parseInt(AV.prefs.rtprnt,10)===1;}else{if(AH.xtab.defn.tkp!==undefined){AN=parseInt(AH.xtab.defn.tkp,10)===-1;}}AX=AX||{};AX.keepParent=AN;var AM=AR.call(AI,AW,AX);var AP=AY.zonesModel,AZ=AP.getUpdateCallback(),AQ=AY.model.controller||AV.controller,AJ=AQ._getXtabCallback(AY);AL.add(AM,R(AZ,AJ));var AG=AH.getSelectorDataFromViewFilter(AY.model.data.vfexpr).concat({keepOnly:true,data:AY.getSelections()}),AS=AV.getKeepOnlyOrExcludeAction(AY.k,AG);AL.add(AS,AU.call(AY));AO(AY).execute({execute:function AK(){this.submitUpdate(AL);},urInfo:{callback:AL.callback}});},strStartsWith:function(AI,AH,AG){AG=AG||0;return AI.lastIndexOf(AH,AG)===AG;},changeWidgetBackground:function(AI,AJ,AH){var AG=AI.parent;if(AG&&AJ!==AH){AG.changeUnitFormats(false,1,AI.getFormats(),c.BACKGROUND_COLOR,AJ,AH);AG.raiseEvent({name:"BEMFormatChange",propertyName:c.BACKGROUND_COLOR,value:AJ,isTitle:false});}},translateGridError:function(AH,AG){if(AG===undefined){AG=e.AE_ERROR;}if(AG===e.EMPTY_DATA){AH=mstrmojo.desc(12093,"Filter excludes all data");}if(AG===e.NO_DATASET||AG===e.NO_TEMPLATE_UNIT){AH=mstrmojo.desc(11668,"Drag objects here.");}if(!AH){AH=mstrmojo.desc(13687,"Unknown error");}return{msg:AH,type:AG};},hasValidValueInMetric:function(AI,AG){var AH=n.getPropertyByPath(AI,"model.data.gsi.mx");if(AH===undefined||AH.length<=AG||AG<0){return false;}var AJ=AH[AG];return["min","max"].every(function(AK){var AL=AJ[AK];return AL!==undefined&&AL!==null&&AL!=="";});},renderWidgetErrorRSD:function(AJ,AL,AH){var AN=document.createElement("div");var AM='<div style="display: table; height: 100%; width: 100%; background-color:#F5F5F2; border: solid 1px #A7A7A7; box-sizing: border-box;"><div style="display: table-cell; vertical-align: middle; text-align: center; color: #000000; font-size: 14pt;">'+AL+"</div></div>";AN.innerHTML=AM;AN=AN.firstChild;var AG=AJ.width,AI=AJ.height;if(AG!==undefined){AN.style.width=AG+"px";}if(AI!==undefined){AN.style.height=AI+"px";}var AK=AJ.domNode;if(AK){AH.forEach(function(AO){AK["on"+AO]=undefined;});while(AK.firstChild){AK.removeChild(AK.firstChild);}AK.appendChild(AN);}else{AJ.parent.domNode.appendChild(AN);}},visPrint:function(){var AG=mstrmojo.VisUtility.enableInVis;if(AG&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},hasCGorCon:function(AJ,AG){var AI=AG&&AG.did,AH=AJ.model.data.datasetId||"",AK=null;if(AI){AK=p.getDatasetFromAttributeId(AJ.model.docModel.datasets,AI);}else{if(AH){AK=p.getDatasetFromId(AJ.model.docModel.datasets,AH);}}return AK&&p.hasCGorCon(AK);},findElementsByAttribute:function l(AI,AK,AJ,AG){AG=!!AG;var AL=[];if(AJ.constructor!==Array){AJ=[AJ];}var AM=function(AN){if(AG){return AN.identity&&AN.identity.tlOpt&&AN.identity.tlOpt[AK];}else{return AN.getAttribute(AK);}};function AH(AP){var AN=AM(AP),AO;if(AP.hasChildNodes()){AO=AP.firstChild;while(AO){if(AO.nodeType===1){AN=AM(AO);if(AJ.indexOf(AN)!==-1){AL.push(AO);}else{AH(AO);}}AO=AO.nextSibling;}}}AH(AI);return AL;}});mstrmojo.VisUtility.enableInVis=true;var n=mstrmojo.VisUtility;}());(function(){mstrmojo.requiresCls("mstrmojo.locales");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumFontStyle");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","DSSDateTime","ScalePlate");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumDSSGraphObject");var g=mstrmojo.chart,c=g.model,o=mstrmojo.VisUtility,Q=g.enums,E=Q.EnumFontStyle,S=c.enums,x=S.EnumDSSGraphProperty,X=S.EnumDSSGraphDataTextShowType,y=S.EnumDSSGraphObject;var F=mstrmojo.gm.EnumDataLabels;var V=[["xAxLbFntClr","yAxLbFntClr","dlFntClr","lgdFntClr"],["xAxLbFntFml","yAxLbFntFml","dlFntFml","lgdFntFml"],["xAxLbFntSz","yAxLbFntSz","dlFntSz","lgdFntSz"],["xAxLbFntStyle","yAxLbFntStyle","dlFntStyle","lgdFntFml"]];var p=[["majorGridLnThk","minerGridLnThk","majorGridLnThk","minerGridLnThk"],["majorGridLnClr","minerGridLnClr","majorGridLnClr","minerGridLnClr"],["majorGridLnStyle","minerGridLnStyle","majorGridLnStyle","minerGridLnStyle"]];var Y=[["bgFillClr"],["bgFillStyle"],["bgFillTrans"]];function U(AH){switch(AH){case x.DssGraphFontColor:return 0;case x.DssGraphFontName:return 1;case x.DssGraphFontSize:return 2;case x.DssGraphFontStyle:return 3;case x.DssGraphFontSize100:return 4;default:return -1;}}function t(AH){switch(AH){case x.DssGraphAreaColor:return 0;case x.DssGraphFillEffect:return 1;case x.DssGraphAreaAlpha:return 2;}return -1;}function v(AH){var AI;switch(AH){case y.DssGraphX1Body:case y.DssGraphX1Label:case y.DssGraphX1Major:case y.DssGraphX1Minor:case y.DssGraphUserLabel3:case y.DssGraphUserLine3:AI="X1";break;case y.DssGraphX2Body:case y.DssGraphX2Label:case y.DssGraphX2Major:case y.DssGraphX2Minor:case y.DssGraphUserLabel4:case y.DssGraphUserLine4:AI="X2";break;case y.DssGraphY1Body:case y.DssGraphY1Label:case y.DssGraphY1Major:case y.DssGraphY1Minor:case y.DssGraphUserLabel1:case y.DssGraphUserLine1:AI="Y1";break;case y.DssGraphY2Body:case y.DssGraphY2Label:case y.DssGraphY2Major:case y.DssGraphY2Minor:case y.DssGraphUserLabel2:case y.DssGraphUserLine2:AI="Y2";break;case y.DssGraphZBody:AI="Z";break;case y.DssGraphO1Body:case y.DssGraph2DO1Label:case y.DssGraphO1Major:case y.DssGraphO1Minor:AI="O1";break;case y.DssGraphO2Body:case y.DssGraph2DO2Label:case y.DssGraphO2Major:case y.DssGraphO2Minor:AI="O2";break;default:AI="No_Axis";break;}return AI;}function d(AH,AI){if(!!AH===false){return undefined;}return undefined;}function W(AM,AH){if(!!AM===false){return undefined;}var AR,AP,AO=AH.isVertical!==undefined?AH.isVertical:true,AJ=AH.isGridChart||false,AS=AH.isPieShape||false,AN={Name:0,Value:0},AK=AM.gaid,AL=AM.goid,AI=AM.gsid,AQ=AM.v;if(!!AK===false){return undefined;}switch(AK){case x.DssGraphShowLBLFeeler:if(AS){AN.Name="DataLabel";if((AQ&X.DssGraphDataTextValue)!==0){AN.Value=F.SHOW_VALUE_ONLY;}else{if((AQ&X.DssGraphDataTextLabel)!==0){AN.Value=F.SHOW_TEXT_ONLY;}else{AN.Value=F.HIDE;}}}break;case x.DssGraphAreaColor:case x.DssGraphFillEffect:case x.DssGraphAreaAlpha:AP=t.call(this,AK);if(AP<0){return undefined;}if(AL===y.DssGraphBackground){AN.Name=Y[AP][0];if(AN.Name.search("Trans")!==-1){AN.Value=AQ/255*100;}else{AN.Value=AQ;}}break;case x.DssGraphShowLegendText:AN.Name="LegendVisibleness";AN.Value=AQ===0?false:true;break;case x.DssGraphSDShowDataText:AN.Name="ShowSeriesDataLabel";AN.Value=AQ!==0;break;case x.DssGraphShowDataText:if(AS===false){AN.Name="DataLabel";AN.Value=F.HIDE;if(AQ&X.DssGraphDataTextValue){AN.Value=F.SHOW_VALUE_ONLY;}else{if(AQ&X.DssGraphDataTextLabel){AN.Value=F.SHOW_TEXT_ONLY;}}}break;case x.DssGraphFontColor:case x.DssGraphFontName:case x.DssGraphFontSize100:case x.DssGraphFontSize:case x.DssGraphFontStyle:AN.Value=AQ;AR=v.call(this,AL);AP=U.call(this,AK);if(AP<0){return undefined;}if(AP===4){AP=3;AN.Value/=100;}if(AR==="No_Axis"){if(AL===y.DssGraphDataText){if(AS){return undefined;}AN.Name=V[AP][2];}else{if(AL===y.DssGraphPieFeelerLabel||AL===y.DssGraphPieFeelerLabel){if(AS===false){return undefined;}AN.Name=V[AP][2];}else{if(AL===y.DssGraphLegendText){AN.Name=V[AP][3];}else{return undefined;}}}}else{if(AR[0]==="X"){AN.Name=V[AP][0];}else{if(AR[0]==="Y"){AN.Name=V[AP][1];}else{if(AR[0]==="O"){AN.Name=AO?V[AP][0]:V[AP][1];}else{return undefined;}}}}break;}return AN;}var T,i=String.fromCharCode,AB=mstrmojo.locales.datetime,AG=0,L=document.getElementById("measureText"),B={},h={};var m=0.03,K=0,R=0,H=0.2;function n(AI){var AH,AJ=[],AK;for(AH=0;AH<=AI;AH++){AK=AH.toString(16);if(AK.length===1){AK="0"+AK;}AJ[AH]=AK;}T=AJ;return AJ;}function AE(AH){var AI=parseFloat(AH);if(isNaN(AI)===false&&AI!==undefined&&AI!==null){return AI;}return 0;}function D(AH){AH=AH.replace(/ddd/g,"EEE");AH=AH.replace(/AM\/PM/g,"a");AH=AH.replace(/tt/g,"a");AH=AH.replace(/:'/g,":");AH=AH.replace(/'\/'/g,"/");AH=AH.replace(/\\/g,"");var AI,AK=true,AJ=AH.length;for(AI=0;AI<AJ;AI++){if(AH[AI]==="h"||AH[AI]==="H"||AH[AI]===":"){AK=true;}else{if(AH[AI]===" "&&AK){AK=true;}}if(AH[AI]==="m"&&AK){AH=AH.substring(0,AI)+"M"+AH.substring(AI+1);}}return AH;}mstrmojo.chart.common.Utility=mstrmojo.provide("mstrmojo.chart.common.Utility",{point2D:{},rect2D:{},tripleId:{create:function M(AI,AM,AK,AJ,AL){if(AI===null||AI===undefined){AI=-3;}if(AM===null||AM===undefined){AM=-3;}if(AK===null||AK===undefined){AK=-3;}var AH={mObjectId:AI,mSeriesId:AM,mGroupId:AK};if(AJ!==undefined&&AJ!==null){AH.angleByIndex=AJ;}if(AL!==undefined&&AL!==null){AH.sliceById=AL;}return AH;},walks:function k(AL,AJ){if(!!AL===false||!!AJ===false){return null;}if(AL.length===1){return AJ[AL[0]];}var AK=(AL&&AL.length)||0,AI,AH=AL[AI];for(AI=0;AI<AK;AI++){if(AJ[AH]===undefined){AJ[AH]={};}AJ=AJ[AH];}return AJ;},equal:function a(AH,AI){return(AH.mObjectId===AI.mObjectId&&AH.mSeriesId===AI.mSeriesId&&AH.mGroupId===AI.mGroupId);},reset:function q(AJ,AL,AK,AI,AH,AM){AJ.mObjectId=AL!==undefined?AL:-3;AJ.mSeriesId=AK!==undefined?AK:-3;AJ.mGroupId=AI!==undefined?AI:-3;if(AH!==undefined&&AH!==null){AJ.angleByIndex=AH;}if(AM!==undefined&&AM!==null){AJ.sliceById=AM;}return AJ;}},transformProperty:function A(AH,AJ,AI){if(AJ===0){return W.call(this,AH,AI);}return d.call(this,AH,AI);},abbreviateNumber:function b(AR,AH){var AS,AI,AT="",AK=(AR<0),AU=(this.isIntegar(AR)===false);if(AU){AH++;}if(AR<0){AH++;}var AN=AK?-AR:AR;var AO=0;if(AN>=1e+27){AN=999;AT="Y";}else{if(AN>=1e+24){AN/=1e+24;AT="Y";}else{if(AN>=1e+21){AN/=1e+21;AT="Z";}else{if(AN>=1000000000000000000){AN/=1000000000000000000;AT="E";}else{if(AN>=1000000000000000){AN/=1000000000000000;AT="P";}else{if(AN>=1000000000000){AN/=1000000000000;AT="T";}else{if(AN>=1000000000){AN/=1000000000;AT="B";}else{if(AN>=1000000){AN/=1000000;AT="M";}else{if(AN>=1000){AN/=1000;AT="K";}else{if(AN>=1){AO++;}else{if(AN>=0.001){AO++;}else{if(AN>=0.000001){AO++;}else{if(AN>=1e-9){AO++;}else{if(AN>=1e-12){AO++;}else{AK=false;}}}}}}}}}}}}}}if(this.isIntegar(AN)===false){AS=AN.toString();var AJ=5,AM=2,AV;AI=AS.indexOf(".");AV=AS.length-AI-1;if(AV>AJ||(AV>AM&&AV>AI)){if(AV>AJ&&AH-AV<0){AM=Math.max(AM,Math.min(AM,AH-AV));}else{AM=Math.max(1,Math.min(AM,AH-AV));}AN=AN.toFixed(AM);}}AS=AN.toString();if(this.isIntegar(AN)===false){var AQ=AS.length-1;AI=AS.indexOf(".");if(AI!==-1){if(AI>=AQ){AS=AS.substring(0,AI);}else{var AP,AL=true;for(AP=AQ;AP>AI&&AL;--AP){if(AS[AP]!=="0"){AL=false;}}if(AL){AS=AS.substring(0,AI);}}}}if(AK){AS="-"+AS;}AS+=AT;return AS;},getScalePlate:function AD(AH){AH=AH||false;this.mScalePlate=mstrmojo.chart.common.ScalePlate;if(AH){this.mScalePlate.clear();}return this.mScalePlate;},prepareScalePlateOptions:function AA(AJ,AI,AK){var AH={mUseLogarithmicScale:AJ,mAlwaysIncludeZero:!AJ&&(AI||!!(AK&1)||!!(AK&2)),mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mUseCustomMinMax:false};return AH;},evaluateTextMargin:function P(AH){this.mTextMargins=this.mTextMargins||{};var AI=this.mTextMargins;if(AI[AH]){return AI[AH];}var AJ=[];AJ[0]=Math.floor(AH*m+0.5);AJ[1]=Math.floor(AH*K+0.5);AJ[2]=Math.max(Math.floor(AH*R+0.5),1);AI[AH]=AJ;return AJ;},AlmostZero:function w(AH){return(Math.abs(AH)<0.000001);},isValidNumber:function J(AH){if(typeof AH==="number"){if(AH===0){return true;}return !!AH;}return false;},isIntegar:function j(AH){return AH===+AH&&AH===(AH|0);},HasArrayIntersection:function O(AI,AH){var AJ;for(AJ=0;AJ<AI.length;AJ++){if(AH.indexOf(AI[AJ])!==-1){return true;}}return false;},EscapeString:function C(AH){var AJ='"',AI='\\"',AK=new RegExp(AJ,"g");return String(AH).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"\\\\").replace(AK,AI).replace(/\r\n/g,"<br/>").replace(/\r/g,"<br/>").replace(/\n/g,"<br/>");},EscapeStringForJSON:function N(AH){var AJ='"',AI='\\"',AK=new RegExp(AJ,"g");return String(AH).replace(/\\/g,"\\\\").replace(AK,AI).replace(/\r/g,"\\r").replace(/\n/g,"\\n");},TrimLastComma:function AC(AI){var AH;if(!AI.buf||AI.len===-1){return ;}AH=AI.len;var AJ=String(AI.buf[AH]);if(AJ&&AJ[AJ.length-1]===","){AI.buf[AH]=AJ.slice(0,-1);}},decodeUTF8:function f(AH){var AI="",AK=0,AM=0,AL=0,AJ=0;while(AK<AH.length){AM=AH.charCodeAt(AK);if(AM<128){AI+=i(AM);AK++;}else{if((AM>191)&&(AM<224)){AL=AH.charCodeAt(AK+1);AI+=i(((AM&31)<<6)|(AL&63));AK+=2;}else{AL=AH.charCodeAt(AK+1);AJ=AH.charCodeAt(AK+2);AI+=i(((AM&15)<<12)|((AL&63)<<6)|(AJ&63));AK+=3;}}}return AI;},formatDateTimeValue:function e(AI,AN){var AL=new mstrmojo.chart.common.DSSDateTime({ifTime:AN});var AH="";var AK="";var AO=0;while(AO<AI.length){var AJ=1;switch(AI.charAt(AO)){case"[":AO++;while(AO<AI.length&&AI.charAt(AO)!=="]"){AK+=AI.charAt(AO);AO++;}if(AK.length>0&&(AK[0]===">"||AK[0]==="<"||AK[0]==="=")){AK="";}AO++;break;case"y":AO++;while(AO<AI.length&&AI.charAt(AO)==="y"){AJ++;AO++;if(AJ===4){break;}}if(AJ===1||AJ===2){AH+=this.fillZeroToWidth(AL.mnYear%100,2);}else{if(AJ===3){AH+=this.fillZeroToWidth(AL.mnYear%100,2);AO--;}else{if(AJ===4){AH+=AL.mnYear;}}}break;case"M":AO++;while(AO<AI.length&&AI.charAt(AO)==="M"){AJ++;AO++;}if(AJ<3){AH+=this.fillZeroToWidth(AL.mnMonth,AJ);}else{if(AJ===3){AH+=AB.MONTHNAME_SHORT[AL.mnMonth];}else{AH+=AB.MONTHNAME_FULL[AL.mnMonth];}}break;case"d":AO++;while(AO<AI.length&&AI.charAt(AO)==="d"){AJ++;AO++;}if(AJ<3){AH+=this.fillZeroToWidth(AL.mnDay,AJ);}else{if(AJ===3){AH+=AB.dayShortNames[AL.mnDay];}else{AH+=AB.dayNames[AL.mnDay];}}break;case"h":AO++;while(AO<AI.length&&AI.charAt(AO)==="h"){AJ++;AO++;}var AM=AL.mnHour;if(AM===0){AM=12;}if(AM>12){AM-=12;}AH+=this.fillZeroToWidth(AM,AJ);break;case"H":AO++;while(AO<AI.length&&AI.charAt(AO)==="H"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnHour,AJ);break;case"m":AO++;while(AO<AI.length&&AI.charAt(AO)==="m"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnMinute,AJ);break;case"s":AO++;while(AO<AI.length&&AI.charAt(AO)==="s"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnSecond,AJ);break;case"S":AO++;while(AO<AI.length&&AI.charAt(AO)==="S"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnMillisecond,AJ);break;case"a":AM=AL.mnHour;if(AM<12){AH+=AB.AM_NAME;}else{AH+=AB.PM_NAME;}AO++;break;default:AH+=AI.charAt(AO++);break;}}if(AK.length!==0){AH='<SPAN STYLE="COLOR: '+AK+'" >'+AH+"</SPAN>";}return AH;},fillZeroToWidth:function l(AL,AJ){var AI="",AK=AI+AL;var AH=AK.length;while(AH<AJ){AK="0"+AK;AH++;}return AK;},updateCache:function AF(AI,AL,AM){var AK=(AL&&AL.length)||0,AJ,AH,AN=AI;for(AJ=0;AJ<AK-1;AJ++){AH=AL[AJ];if(!AN[AH]){AN[AH]={};}AN=AN[AH];}AN[AL[AK-1]]=AM;},measureTextHeight:function(AM,AJ,AQ,AN,AH){var AP,AL=AM;if(AL===" "){AL="\u00A0";}AH=AH||"pt";if(typeof AQ==="number"){AQ=AQ+AH;}var AI="none",AO="normal";if(AN&E.FS_ITALIC){AI="italic";}if(AN&E.FS_BOLD){AO="bold";}var AK={fontFamily:AJ,fontSize:AQ,fontStyle:AI,fontWeight:AO};if(h&&h.H&&h.H[AJ]&&h.H[AJ][AQ]&&h.H[AJ][AQ][AN]){AP=h.H[AJ][AQ][AN];}else{AP=o.measureTextHeight("H",AK,1);this.updateCache(h,["H",AJ,AQ,AN],AP);}return AP;},measureText:function u(AO,AL,AU,AP,AJ){var AI=true,AH,AS=AU+1;var AN=AO;if(AN===" "){AN="\u00A0";}AJ=AJ||"pt";if(typeof AU==="number"){AU=AU+AJ;}if(B&&B[AN]&&B[AN][AL]&&B[AN][AL][AU]&&B[AN][AL][AU][AP]){return B[AN][AL][AU][AP];}if(AI){var AK="normal",AQ="normal";if(AP&E.FS_ITALIC){AK="italic";}if(AP&E.FS_BOLD){AQ="bold";}var AM={fontFamily:AL,fontSize:AU,fontStyle:AK,fontWeight:AQ};if(h&&h.H&&h.H[AL]&&h.H[AL][AU]&&h.H[AL][AU][AP]){AS=h.H[AL][AU][AP];}else{AS=o.measureTextHeight("H",AM,true);this.updateCache(h,["H",AL,AU,AP],AS);}AH=o.measureTextWidth(AO,AM,0);}else{if(!L){var AR=document.createElement("div");AR.id="measureText";AR.style.position="absolute";AR.style.top="0";AR.style.visibility="hidden";AR.style.height="auto";AR.style.width="auto";document.body.appendChild(AR);L=AR;}L.innerHTML="";L.appendChild(document.createTextNode(AN));L.style.fontFamily=AL;L.style.fontSize=AU;L.style.fontWeight="normal";L.style.fontStyle="none";if(AP&E.FS_ITALIC){L.style.fontStyle="italic";}if(AP&E.FS_BOLD){L.style.fontWeight="bold";}AH=L.scrollWidth+1;AS=L.scrollHeight+1;}var AT={Width:AH,Height:AS};this.updateCache(B,[AN,AL,AU,AP],AT);return AT;},ReplaceDecimalPoint:function z(AI,AH){return AI.replace(".",AH);},ReplaceMinusSign:function s(AH,AI){return AH.replace("-",AI);},insert:function G(AI,AH,AJ){if(typeof AI==="string"&&typeof AH==="string"&&AJ<=AI.length){return AI.substr(0,AJ)+AH+AI.substr(AJ);}return AI;},InsertThousandSeparator:function r(AJ,AK,AO){var AH=AO.mstrDecimalPoint;var AI=AJ.indexOf(AH);if(AI===-1){AI=AJ.length;}var AL=0;while(AL<AI&&!this.chk_val(AJ.charAt(AL))){AL++;}var AN=AJ;var AM;for(AM=AI-3;AM>AL;AM-=3){AN=this.insert(AN,AK,AM);}return AN;},chk_val:function I(AH){return/^\d+$/.test(AH);},hFormatValue:function Z(AU,AL,Af,A4){var AS=0;var An=0;var Ab=AU.length;var BC=false;if(!A4){A4={};var Al=window.navigator.userLanguage||window.navigator.language;var BN=Al.split("-");this.mstrLanguageCode=BN[0];this.mstrCountryCode=BN[1]||BN[0];A4.mstrThousandSeparator=mstrmojo.locales.number.THOUSANDSEPARATOR||",";A4.mstrCurrencySymbol="$";A4.mstrDecimalPoint=mstrmojo.locales.number.DECIMALSEPARATOR||".";A4.mstrPercentSign="%";A4.mstrMinusSign="-";}while(AS<Ab){if(AU.charAt(AS)==='"'){AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){AS++;}}else{if(AU.charAt(AS)==="["){AS++;var Am="";while(AS<Ab&&AU.charAt(AS)!=="]"){Am+=AU.charAt(AS);AS++;}if(Am.length>1&&(Am.charAt(0)===">"||Am.charAt(0)==="<"||Am.charAt(0)==="=")){var AI=-1;var A6=0;switch(Am.charAt(0)){case">":if(Am.charAt(1)>="0"&&Am.charAt(1)<="9"){AI=1;A6=1;}else{if(Am.charAt(1)==="="&&Am.length>2&&Am.charAt(2)>="0"&&Am.charAt(2)<="9"){AI=2;A6=2;}}break;case"=":if(Am.charAt(1)>="0"&&Am.charAt(1)<="9"){AI=3;A6=1;}else{if(Am.charAt(1)==="="&&Am.length>2&&Am.charAt(2)>="0"&&Am.charAt(2)<="9"){AI=3;A6=2;}}break;case"<":if(Am.charAt(1)>="0"&&Am.charAt(1)<="9"){AI=5;A6=1;}else{if(Am.charAt(1)==="="&&Am.length>2&&Am.charAt(2)>="0"&&Am.charAt(2)<="9"){AI=4;A6=2;}}break;}if(AI>0){var AW=Am.substr(A6);var BF=parseFloat(AW);if((AI===1&&AL>BF)||(AI===2&&AL>=BF)||(AI===3&&AL===BF)||(AI===4&&AL<=BF)||(AI===5&&AL<BF)){BC=true;}}}}else{if(AU.charAt(AS)===";"){if(BC){Ab=AS;break;}else{An=AS+1;AS++;}}else{AS++;}}}}if(!BC){An=0;}AS=An;var As=false;while(AS<Ab){if(AU.charAt(AS)==='"'){AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){AS++;}}else{if(AU.charAt(AS)==="["){AS++;while(AS<Ab&&AU.charAt(AS)!=="]"){AS++;}}else{if(AU.charAt(AS)==="y"||AU.charAt(AS)==="M"||AU.charAt(AS)==="d"||AU.charAt(AS)==="h"||AU.charAt(AS)==="H"||AU.charAt(AS)==="m"||AU.charAt(AS)==="s"||AU.charAt(AS)==="S"){As=true;break;}else{AS++;}}}}if(As){var BA="";if(BC){BA=AU.substr(An,Ab-An);}else{BA=AU;}return mstrmojo.num.formatByMask(BA,AL);}var BE;var Aj;var Ap=false;var AO=false;var A9=false;var Aa=false;var BK=[];var Ae="K";var AX=0;var A5=false;var AV=0;var BL="";var AP="";var Ai="";var A3="";var AT=0;var BH=0;var BG=false;var A7=A4.mstrCurrencySymbol;var Ay=A4.mstrThousandSeparator;var Au=A4.mstrDecimalPoint;var A8=A4.mstrPercentSign;var A2=A4.mstrMinusSign;AS=An;var Ah="";if(AL<0&&!BC){while(AS<Ab&&AU.charAt(AS)!==";"){if(AU.charAt(AS)==='"'){AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){AS++;}}AS++;}AS++;if(AS>=Ab){if(AL<0){BL+="-";}AS=An;}}var BM=false;while(AS<Ab){var Ao=false;switch(AU.charAt(AS)){case"[":AS++;while(AS<Ab&&AU.charAt(AS)!=="]"){Ai+=AU.charAt(AS);AS++;}if(Ai.length>0&&(Ai.charAt(0)===">"||Ai.charAt(0)==="<"||Ai.charAt(0)==="=")){Ai="";}AS++;break;case'"':AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){if(AU.charAt(AS)==="K"){A9=true;Ae="K";}else{if(BM){AP+=AU.charAt(AS);}else{BL+=AU.charAt(AS);}}AS++;}AS++;break;case"#":case"0":var AZ=AU.charAt(AS);BM=true;var Ad=1;AS++;while(AS<Ab&&AU.charAt(AS)===AZ){Ad++;AS++;}if(AS+1<Ab&&AU.charAt(AS)==="-"&&AU.charAt(AS+1)===AZ){Aa=true;BK.push(Ad);AS++;while(true){Ad=0;while(AS<Ab&&AU.charAt(AS)===AZ){Ad++;AS++;}BK.push(Ad);if(AS>=Ab||AU.charAt(AS)!=="-"){break;}AS++;}}while(AS<Ab){if(AU.charAt(AS)===","){if(AS+1<Ab&&AU.charAt(AS+1)===AZ){Ap=true;}else{break;}}else{if(AU.charAt(AS)!==AZ){break;}}AS++;}break;case".":BM=true;AS++;AX=0;while(AS<Ab&&AU.charAt(AS)==="0"){AX++;AS++;}if(AX===0){while(AS<Ab&&AU.charAt(AS)==="#"){AX++;AS++;}}break;case"E":BH=6;while(AS<Ab&&AU.charAt(AS)!=="0"){if(AU.charAt(AS)==="+"&&AS<Ab&&AU.charAt(AS+1)==="0"){AO=true;}else{A3+=AU.charAt(AS);}AS++;}AT=0;while(AS<Ab&&AU.charAt(AS)==="0"){AT++;AS++;}break;case"%":BH=4;AS++;break;case"(":AS++;BL+="(";break;case")":AS++;AP+=")";break;case"-":AS++;if(AL<0){BL+=A2;}break;case"?":AS++;break;case"/":if(AS>An&&AU.charAt(AS-1)==="?"&&AS+1<Ab&&AU.charAt(AS+1)==="?"){BH=5;A5=false;Aj=AS-1;while(Aj>An&&AU.charAt(Aj)==="?"){Aj--;}while(Aj>An&&AU.charAt(Aj)===" "){Aj--;}if(Aj>=An&&(AU.charAt(Aj)==="#"||AU.charAt(Aj)==="0")){A5=true;}AV=0;AS++;while(AS<Ab&&AU.charAt(AS)==="?"){AV++;AS++;}}else{AS++;}break;case",":if(AS>An&&(AU.charAt(AS-1)==="0"||AU.charAt(AS-1)==="#")){if(AS+1<Ab&&(AU.charAt(AS+1)==="K"||AU.charAt(AS+1)==="k")){A9=true;Ae=AU.charAt(AS+1);AS++;}}Aj=AS+1;while(Aj<Ab){if(AU.charAt(Aj)===","){Aj++;continue;}else{break;}}if(Aj===Ab||AU.charAt(Aj)==="."){BG=true;}if(BG||(!BG&&AS+1<Ab&&AU.charAt(AS+1)===",")){while(AS<Ab&&AU.charAt(AS)===","){AL/=1000;AS++;}AS--;}AS++;break;case";":Ao=true;break;case"$":if(BM){AP+=A7;}else{BL+=A7;}AS++;break;default:if(BM){AP+=AU.charAt(AS);}else{BL+=AU.charAt(AS);}AS++;}if(Ao){break;}}if(AL<0){AL=-AL;}var Aw="";if(Aa){var Ar=0;for(BE=0;BE<BK.length;BE++){Ar+=BK[BE];}Aw=Ah=this.fillZeroToWidth(Ar,AL.toFixed());for(BE=0;BE<BK.length-1;BE++){Ar-=BK[BE];var Aq=Aw.length-Ar;Aw=Aw.slice(0,Aq)+"-"+Aw.slice(Aq);}}else{switch(BH){case 0:if(A9){AL/=1000;}var A0=AL;if(A0<0){A0=-A0;}var AH=0;while(A0>=10){A0/=10;AH++;}if(AH>=15){Aw=Ah=this.fillZeroToWidth((AL<0?-AL:AL),10);var Ak=Aw.indexOf(".");if(Ak!==-1){Aw=Aw.slice(0,Ak)+Aw.slice(Ak+1);}Aw=Aw.substr(0,16);if(Aw.charAt(15)>="5"){var AR=14;while(AR>=0&&Aw.charAt(AR)==="9"){Aw=Aw.slice(0,AR)+"0"+Aw.slice(AR+1);AR--;}var AM=Aw.charAt(AR);AM++;if(AR>=0){Aw=Aw.slice(0,AR)+AM+Aw.slice(AR+1);}else{Aw="1"+Aw;}}Aw=Aw.substr(0,15);var BD;for(BD=AH-14;BD>0;BD--){Aw+="0";}if(AL<0){Aw=A2+Aw;}}else{Ah+=(AL+Math.pow(0.1,AX+6)).toFixed(AX);Aw=Ah;Aw=this.ReplaceDecimalPoint(Aw,Au);if(AL<0){Aw=this.ReplaceMinusSign(Aw,A2);}}if(Ap){Aw=this.InsertThousandSeparator(Aw,Ay,A4);}if(A9){Aw+=Ae;}break;case 5:if(A9){AL/=1000;}var Ag=10;for(BE=1;BE<AV;BE++){Ag*=10;}var AJ={numerator:0,denominator:1};var AQ={numerator:1,denominator:1};var AN={numerator:1,denominator:2};var Av={numerator:0,denominator:1};var Ac=AL>=0;var A1=Math.abs(AL);var Az=parseInt(A1,10);A1-=Az;while(AN.denominator<Ag){if(Math.abs(AE.call(AN)-A1)<1e-15){Av=AN;break;}if(AE.call(AN)>A1){AQ=AN;}else{AJ=AN;}AN.denominator=AJ.denominator+AQ.denominator;AN.numerator=AJ.numerator+AQ.numerator;}if(AN.denominator>=Ag){if(A1-AE.call(AJ)<AE.call(AQ)-A1){Av=AJ;}else{Av=AQ;}}if(Az>0){Av.numerator+=Az*Av.denominator;}if(Av.denominator===0){A5=false;}var BB=false;var Ax=false;var BJ=Av.numerator;if(A5){Az=Math.floor(Av.numerator/Av.denominator);BJ=Av.numerator%Av.denominator;Ax=Ax||(BJ!==0);if(Az>0){BB=true;Ah+=Az;if(Ax){Ah+=" ";}}}if(!Ax&&!BB&&BJ===0){Ah+="0";}else{if(!Ax&&BB&&BJ===0){AG++;}else{Ah+=BJ;Ah+="/";Ah+=Av.denominator;}}Aw=Ah;if(!Ac){Aw=A2+Aw;}if(Ap){Aw=this.InsertThousandSeparator(Aw,Ay,A4);}if(A9){Aw+=Ae;}break;case 4:AL*=100;Ah+=(AL+Math.pow(0.1,AX+6)).toFixed(AX);Aw=Ah;Aw=this.ReplaceDecimalPoint(Aw,Au);if(AL<0){Aw=this.ReplaceMinusSign(Aw,A2);}if(Ap){Aw=this.InsertThousandSeparator(Aw,Ay,A4);}Aw+=A8;break;case 6:var At=AL;var BI=0;if(At>1){while(At>=10){At/=10;BI++;}}else{if(At!==0){while(At<1){At*=10;BI--;}}}Ah+=(At+Math.pow(0.1,AX+6)).toFixed(AX);Ah+=A3;if(AO&&BI>=0){Ah<<"+";}if(BI<0){Ah<<"-";BI=-BI;}Ah+=this.fillZeroToWidth(BI,AT);Aw=Ah;Aw=this.ReplaceDecimalPoint(Aw,Au);if(AL<0){Aw=this.ReplaceMinusSign(Aw,A2);}break;}}var AK=BL+Aw+AP;var AY=false;if(Ai.length!==0&&AY){AK='<SPAN STYLE="COLOR: '+Ai+'" >'+AK+"</SPAN>";}return AK;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.num","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.color","mstrmojo.chart","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var m=mstrmojo,n=mstrmojo.array,P=mstrmojo.hash,H=mstrmojo.num,G=mstrmojo.VisUtility,a=mstrmojo.chart,K=a.enums,b=K.EnumGraphMajorType,J=a.common.Utility,T=a.model,M=T.enums,u=M.EnumDSSGraphObject,y=mstrmojo.VisEnum.ControlType,v=m.gm,U=mstrmojo.gm.EnumTextAlignH,p=mstrmojo.gm.EnumTextAlignV,t=";",i=",",A="_tmsp",L=" ",Y=-20,j=mstrmojo.gm.EnumSelectionOptionLevel,AA=mstrmojo.gm.EnumShape,f=mstrmojo.color,I=mstrmojo.gm.EnumIdentityType,R=0.00001,D,Z=Math.pow(2,30),c=Math.pow(2,60);var e=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(7194,"Constant")];function k(AG,AF){var AH,AE=AG.length;if(AE!==AF.length){return false;}for(AH=0;AH<AE;AH++){if(AG[AH]!==AF[AH]){return false;}}return true;}function z(AH,AF,AI){var AG=false,AJ=AI+A,AE=AH[AJ],AK=AF[AJ];if(AF[AI]===undefined){AG=true;}else{if((AK===undefined&&AE!==undefined)||(AK!==undefined&&AE!==undefined&&AK<AE)){AG=true;}}if(AG){AF[AI]=AH[AI];if(AK!==undefined){AF[AJ]=AE;}}}function AD(AF,AE){var AG;for(AG in AF){if(AF.hasOwnProperty(AG)){z(AF,AE,AG);}}return AE;}function W(AI){var AH={},AG,AF=[],AE;n.forEach(AI,function(AJ){if(AJ!==undefined){AF.push(AJ);}});AE=AF.length;if(AE===1){return AF[0];}for(AG=0;AG<AE;AG++){AD(AF[AG],AH);}return AH;}function x(AE){return{n:AE,s:AE.toString(),on:AE};}function X(AG,AE,AI){if(AE===AG){return 0;}var AF=AE-AG,AH=1;while(AF<1){AF*=10;AH/=10;}while(AF>=10){AF/=10;AH*=10;}if(AF<1.8){AH*=0.2;}else{if(AF<3.1){AH*=0.4;}else{if(AF<4.6){AH*=0.5;}else{if(AF>=8.1){AH*=2;}}}}if(AI){AH=Math.round(AH);if(AH<1){AH=1;}}return AH;}function B(AH,AL,AN,AF){var AJ=[];if(AH===AL){if(AH<0){AJ.push(mstrmojo.gm.GMUtility.formatNumber(AH,"nearest"));}AJ.push({n:0,s:"0",on:0});if(AH>0){AJ.push(mstrmojo.gm.GMUtility.formatNumber(AH,"nearest"));}return AJ;}var AE=AF>0?AF:X(AH,AL,AN);var AG=Math.ceil(AL/AE)*AE;if(AG-AL>=AE*0.9){AG=Math.floor(AL/AE)*AE;}var AK=Math.floor(AH/AE)*AE;if(AH-AK>=AE*0.9){AK=Math.ceil(AH/AE)*AE;}var AM=Math.floor((AG-AK+AE/100)/AE)+1,AI;for(AI=0;AI<AM;++AI){AJ.push(mstrmojo.gm.GMUtility.formatNumber(AK+AI*AE,"nearest"));}return AJ;}function S(AE,AH){var AG;AE.mMaxTick=1;if(this.mChartContextPtr.mIsGraphMatrix){AE.mStep=this.mMinimum<0?0.2:0.1;if(AH.mUseCustomMinMax){var AF=AH;AE.mMaxTick=AF.mAxisMaxValue;AE.mMinTick=AF.mAxisMinValue;AE.mMaxTick=Math.min(1,AE.mMaxTick);AE.mMinTick=Math.max(-1,AE.mMinTick);AE.mStep=0.1;}else{if(this.mMaximum>=0.5){AE.mMaxTick=1;AE.mMinTick=Math.floor(this.mMinimum/AE.mStep)*AE.mStep;AE.mMinTick=(AE.mMinTick*this.mMinimum<0)?0:(AE.mMinTick>0?0:AE.mMinTick);if(this.mMinimum<-0.5){AE.mMinTick=-1;}}else{if(this.mMaximum>0){AE.mMaxTick=Math.ceil(this.mMaximum/AE.mStep)*AE.mStep;AE.mMinTick=-1;}else{AE.mStep=0.1;AE.mMaxTick=0;AE.mMinTick=-1;}}}}else{AE.mMinTick=(this.mMinimum<0)?-1:0;if(s.call(this,AE)){return ;}AE.mStep=this.mMajorGrid.mUseManualGrid?this.mMajorGrid.mGridInterval:(AE.mMaxTick-AE.mMinTick)/10;}for(AG=AE.mMinTick+AE.mStep;AG+a.gModuleMain.mTolerance<AE.mMaxTick;AG+=AE.mStep){AE.mTicks.push(Math.round(AG*100)/100);}}function O(AE,AJ){var AI,AF,AL=AJ,AK=AL.mDrawCustomLine,AG=AL.mAxisCustomValue,AH;AE.mStep=1;if(this.mMaximum<=0){AE.mMinTick=1;AE.mMaxTick=10;if(AK&&AG<=1){AL.mAxisCustomValue=AE.mMinTick;}return ;}if(this.mMinimum<=0){AF=this.mMaximum>1?0:-1;AE.mMinTick=Math.pow(10,AF);if(AL.mUseCustomMinMax){AE.mMaxTick=this.mMaximum;AI=Math.floor(g.call(this,this.mMaximum));if(g.call(this,this.mMaximum)===AI){AI--;}}else{AI=Math.ceil(g.call(this,this.mMaximum));AE.mMaxTick=Math.pow(10,AI);}for(AH=AF+1;AH<AI;++AH){AE.mTicks.push(Math.pow(10,Math.floor(AH)));}if(AK&&AG<=0){AL.mAxisCustomValue=Math.max(AE.mMinTick,AL.mAxisCustomValue);}return ;}if(AL.mUseCustomMinMax){AI=g.call(this,this.mMaximum);AF=g.call(this,this.mMinimum);AE.mMaxTick=this.mMaximum;AE.mMinTick=this.mMinimum;}else{AI=Math.ceil(g.call(this,this.mMaximum));AF=Math.floor(g.call(this,this.mMinimum));AE.mMaxTick=Math.pow(10,AI);AE.mMinTick=Math.pow(10,AF);}for(AH=AF+1;AH<AI;++AH){AE.mTicks.push(Math.pow(10,Math.floor(AH)));}if(AK&&AG<=0){AL.mAxisCustomValue=AE.mMinTick;}}function q(AO,AJ){var AG=AJ,AE,AH;AO.mStep=d.call(this,this.mMaximum,this.mMinimum,AG.mAlwaysIncludeZero);AO.mMaxTick=Math.ceil(this.mMaximum/AO.mStep)*AO.mStep;AO.mMinTick=Math.floor(this.mMinimum/AO.mStep)*AO.mStep;AO.mMinTick=(AO.mMinTick*this.mMinimum<0)?0:AO.mMinTick;if(AG.mAlwaysIncludeZero){AO.mMaxTick=(this.mMaximum<0)?0:AO.mMaxTick;AO.mMinTick=(this.mMinimum>0)?0:AO.mMinTick;}var AI=AO.mMaxTick-AO.mMinTick;if(AO.mStep>=AI){return ;}if(s.call(this,AO)){return ;}AE=Math.floor((AO.mMaxTick-AO.mMinTick+AO.mStep/100)/AO.mStep)+1;var AK=this.mNumberFormat;for(AH=1;AH<AE-1;++AH){var AM=AO.mMinTick+AH*AO.mStep,AN,AF,AL;if(AO.mStep<1&&AK.mFormatType===4&&AK.mCustomFormat.indexOf("%")!==-1){AN=AM*100;if(!J.isIntegar(AN)){AF=Math.round(AN);AL=Math.abs(AN-AF);if(AL<R){AM=AF/100;}}}AO.mTicks.push(AM);}}function C(AO,AI){var AN=AI,AH,AE,AL,AG,AK,AJ,AF,AM;AO.mMaxTick=AN.mAxisMaxValue;AO.mMinTick=AN.mAxisMinValue;if(s.call(this,AO)){return ;}if(!V.call(this)||this.mMajorGrid.mUseManualGrid){AO.mStep=d.call(this,AO.mMaxTick,AO.mMinTick,false);AH=AO.mMaxTick-AO.mMinTick;if(AO.mStep>=AH){return ;}AE=Math.floor(AH/AO.mStep);if(!(this.mChartContextPtr.mIsTimeSeriesChart)&&AH===AE*AO.mStep){for(AG=1;AG<AE;++AG){AO.mTicks.push(AO.mMinTick+AG*AO.mStep);}}else{AH=AO.mMaxTick-AO.mMinTick;AL=10;AK=false;for(AG=3;AG<AE;++AG){AJ=AH/AG;while(AJ<1){AJ*=10;}while(AJ>=10){AJ/=10;}if(AJ===Math.floor(AJ)){AL=AG;AK=true;break;}}if(AK){AO.mStep=AH/AL;for(AG=1;AG<AL;++AG){AO.mTicks.push(AO.mMinTick+AG*AO.mStep);}}else{AF=Math.ceil((AO.mMinTick+AO.mStep/100)/AO.mStep)*AO.mStep;AM=Math.floor((AO.mMaxTick-AO.mStep/100-AF)/AO.mStep)+3;for(AG=0;AG<AM-2;++AG){AO.mTicks.push(AF+AG*AO.mStep);}}}}else{AH=AO.mMaxTick-AO.mMinTick;AL=10;for(AG=6;AG<=9;++AG){AJ=AH/AG;while(AJ<10){AJ*=10;}while(AJ>=100){AJ/=10;}if(AJ===Math.floor(AJ)){AL=AG;break;}}AO.mStep=AH/AL;for(AG=1;AG<AL;++AG){AO.mTicks.push(AO.mMinTick+AG*AO.mStep);}}}function E(AE,AI){var AH,AF,AG;AE.mMaxTick=AI.mAxisMaxValue;if(AE.mMaxTick<=this.mMinimum){this.mMinimum=AE.mMaxTick-1;}AE.mStep=d.call(this,AE.mMaxTick,this.mMinimum,AI.mAlwaysIncludeZero&&(AE.mMaxTick>0));AH=(AI.mAlwaysIncludeZero&&(this.mMinimum>0))?0:this.mMinimum;if(V.call(this)){AE.mMinTick=AE.mMaxTick-Math.ceil((AE.mMaxTick-AH)/AE.mStep)*AE.mStep;}else{AE.mMinTick=Math.floor(AH/AE.mStep)*AE.mStep;}if(s.call(this,AE)){return ;}AF=Math.floor((AE.mMaxTick-AE.mStep/100-AE.mMinTick)/AE.mStep)+2;for(AG=1;AG<AF-1;++AG){AE.mTicks.push(AE.mMinTick+AG*AE.mStep);}}function h(AE,AJ){var AF,AI,AG,AH;AE.mMinTick=AJ.mAxisMinValue;if(AE.mMinTick>=this.mMaximum){this.mMaximum=AE.mMinTick+1;}AE.mStep=d.call(this,this.mMaximum,AE.mMinTick,AJ.mAlwaysIncludeZero&&(AE.mMinTick<0));AF=(AJ.mAlwaysIncludeZero&&(this.mMaximum<0))?0:this.mMaximum;if(V.call(this)){AE.mMaxTick=AE.mMinTick+Math.ceil((AF-AE.mMinTick)/AE.mStep)*AE.mStep;}else{AE.mMaxTick=Math.ceil(AF/AE.mStep)*AE.mStep;}if(s.call(this,AE)){return ;}AI=Math.ceil((AE.mMinTick+AE.mStep/100)/AE.mStep)*AE.mStep;AG=Math.floor((AE.mMaxTick-AI+AE.mStep/100)/AE.mStep)+2;for(AH=0;AH<AG-2;++AH){AE.mTicks.push(AI+AH*AE.mStep);}}function d(AU,AO,AG){var AN,AI;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}AN=0;if(AG){AN=Math.max(AU,AU-AO);AN=Math.max(AN,-AO);}else{AN=AU-AO;}if(AN===0){this.mIsShown=false;return 1;}if(AN>=1&&AN<=4&&parseInt(AN)===AN){var AV=this.PrimaryMetricIndex,AJ=AV.length;for(var AQ=0;AQ<AJ;AQ++){var AM=this.mChartContextPtr.mDatasetPtr,AP=AM.dataProvider,AH=AP.getSeriesCount(),AL=AP.getGroupCount(),AF=AV[AQ],AK,AS;for(var AT=0;AT<AH;AT++){AK=AP.getMetricIndexForSeries(AT);if(AK===AF){AS=true;for(var AR=0;AR<AL;AR++){var AW=AM.GetData(AT,AR);if(parseInt(AW)!==AW){AS=false;break;}}}if(AS){return 1;}}}}var AE=AN;AI=1;while(AN<1){AN*=10;AI/=10;}while(AN>=10){AN/=10;AI*=10;}if(AN<1.8){AI*=2;AI/=10;}else{if(AN<3.1){AI*=4;AI/=10;}else{if(AN<4.6){AI*=5;AI/=10;}else{if(AN>=8.1){AI*=2;}}}}AI=this.postProcessStep(AI,AE);return AI;}function s(AE){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var AF=this.mMajorGrid;return AF.mUseManualGrid&&(AF.mGridInterval<(AE.mMaxTick-AE.mMinTick)/30);}function g(AE){return Math.log(AE)/Math.log(10);}function V(){return(this.mGraphMajorType===b.GMT_HISTOGRAM||this.mGraphMajorType===b.GMT_POLAR)&&this.mTripleId.mObjectId===u.DssGraphX1Body;}function w(AH){var AI=this,AE=AI.id,AG=AH.metricId,AF=new m.ui.menus.MenuConfig();(AH.options).forEach(function(AJ){if(AJ!==v.EnumRefLineModelType.CONST){AF.addMenuItem(e[AJ],"xt",function(){AI.toggleRefLineEnabled(AG,AJ,true);});}else{AF.addEditorMenuItem(e[v.EnumRefLineModelType.CONST],AE,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:mstrmojo.expr.DTP.FLOAT,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR},onEnter:function(){this.validate();}}],fnOk:function(AL,AK){var AM=AK.constVal;if(AM.isValid()){AI.toggleRefLineEnabled(AG,AJ,true,AM.value);}}});});}});return AF;}function r(AG){var AH=this,AF=AG.metricId,AE=new m.ui.menus.MenuConfig();(AG.options).forEach(function(AK){var AI=AK.refType,AJ=e[AI]+((AI===v.EnumRefLineModelType.CONST)?("-["+H.toLocaleString(AK.c)+"]"):"");AE.addMenuItem(AJ,"xt",function(){AH.toggleRefLineEnabled(AF,AI,false,0,AK.modix);});});return AE;}function AB(AI,AE){var AH=AI.GMController,AF=AH.getForbiddenShapeForMetric(AE),AG=[];[{text:mstrmojo.desc(12097,"Bar"),value:AA.BAR},{text:mstrmojo.desc(2059,"Line"),value:AA.LINE},{text:mstrmojo.desc(9738,"Area"),value:AA.AREA},{text:mstrmojo.desc(12100,"Circle"),value:AA.CIRCLE},{text:mstrmojo.desc(12101,"Square"),value:AA.SQUARE},{text:mstrmojo.desc(12102,"Tick"),value:AA.TICK}].forEach(function(AJ){if(AF.indexOf(AJ.value)<0){AG.push(AJ);}});return AG;}function o(AF,AE){return function(AH,AG){if(AH!==AG){AE({ctxt:{sp:AH,mid:AF}});}};}function AC(AH){var AF=AH.options,AE=this.getMenuHandler("changeShape"),AG=new mstrmojo.ui.menus.MenuConfig();AG.addRadioMenuGroup(AH.currValue,o(AH.metricId,AE),AF,"checkMark",undefined,true);return AG;}mstrmojo.gm.GMUtility=mstrmojo.provide("mstrmojo.gm.GMUtility",{mTimers:[],mUseTimer:true,timerId:0,startTimer:function Q(AF){if(this.mUseTimer){var AE=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:AE,desc:AF.functionName+": "+AF.purpose});return AE;}},endTimer:function F(AE){if(this.mUseTimer){var AI,AH=this.mTimers;if(AE===undefined){AI=AH.pop();}else{var AG,AF;for(AG=0;AG<AH.length;AG++){AF=AH[AG];if(AF.timerId===AE){AI=AF;AH.splice(AG,1);AG--;}}}if(AI){G.visPrint("%c"+AI.desc+": "+(new Date()-AI.timeStamp)+"ms","color: blue");}}},computeTicksForPercentchart:function(AF,AE,AG){return B(AF,AE,false,AG);},computeTicksForFlexMinMax:function(AF,AE,AG,AH){return B(AF,AE,AG,AH);},formatNumber:function(AG,AF,AE){return x(AG,AF,AE===undefined?3:AE);},sizeCalculator:{sum:function(AE,AI,AJ){var AG,AF=0,AH=0;if(AJ===undefined){AJ=AE.length;}AI=AI||1;for(AG=0;AG<AJ;AG++){if(AE[AG]>0){AH+=AE[AG];AF+=1;}}if(AF>1){AH+=(AF-1)*AI;}return AH;},add:function(AG,AE,AF){AF=AF||1;if(AE>0){AG+=(AE+AF);}return AG;},minus:function(AG,AE,AF){if(AE>0){AG-=(AE+AF);}return AG;}},replaceSpecialChars:function(AE){AE=AE.replace(/&/g,"&amp;");AE=AE.replace(/</g,"&lt;");AE=AE.replace(/>/g,"&gt;");AE=AE.replace(/"/g,"&quot;");return AE;},restoreSpecialChars:function(AE){AE=AE.replace(/&nbsp;/g," ");AE=AE.replace(/&lt;/g,"<");AE=AE.replace(/&gt;/g,">");AE=AE.replace(/&quot;/g,'"');AE=AE.replace(/&amp;/g,"&");return AE;},removeExtraSpace:function(AE){return AE.replace(/ {2,}/g," ");},stringToJSON:function(AE){if(AE===undefined){return undefined;}if(typeof AE==="string"){AE=AE.replace(/'/g,'"');return JSON.parse(AE);}return AE;},everythingToString:function(AF){if(AF===undefined){return undefined;}var AE;if(typeof AF==="object"){AE=JSON.stringify(AF.jsonObj||AF);}else{AE=AF.toString();}AE=AE.replace(/"/g,"'");return AE;},compareElementObj:function(AI,AF){var AH=AI.tid.toString(),AE=AF.tid.toString(),AJ=AI.eid,AG=AF.eid;if(AH!==AE){return AH>AE?1:-1;}if(AJ===AG){return 0;}return AJ>AG?1:-1;},isEqualComb:function(AF,AE){var AJ=true,AI,AH=AF.length,AG=AE.length;if(AH!==AG){return false;}if(AF.length>1){AF.sort(this.compareElementObj);}if(AE.length>1){AE.sort(this.compareElementObj);}for(AI=0;AI<AH;AI++){if(this.compareElementObj(AF[AI],AE[AI])!==0){AJ=false;break;}}return AJ;},serializeCombination:function(AF){var AE="";if(AF.length>1){AF.sort(this.compareElementObj);}n.forEach(AF,function(AG){if(AE!==""){AE+=t;}AE+=(AG.tid+i+AG.eid);});return AE;},deserializeCombination:function(AF){var AG=AF.split(t),AE=[];n.forEach(AG,function(AK){var AH=AK.split(i);var AJ=AH[0];var AI=AH[1];AE.push({tid:AJ,eid:AI});});return AE;},getElementCombinationForMetric:function(AE){var AF=[];AF.push({tid:-1,eid:AE});return AF;},getResolvedFormatsObject:function(AE){return W(AE);},isDigitalArrayEqual:function(AF,AE){return k.call(this,AF,AE);},indexOf:function(AF,AH){var AG,AE=AF.length;for(AG=0;AG<AE;AG++){if(k(AF[AG],AH)){return AG;}}return -1;},parseAxisScaleData:function(AI){var AG,AJ,AF,AE=AI.split(","),AH=[];for(AG=0,AJ=AE.length;AG<AJ;AG++){AF=AE[AG].split(":");AH.push(AF);}return AH;},parseCSSColor:function(AI,AF){var AH=AI.slice(1),AE=[],AG;if(AH.length===6){if(AF===true){AE[0]=AH[4];AE[1]=AH[5];AE[2]=AH[2];AE[3]=AH[3];AE[4]=AH[0];AE[5]=AH[1];}else{for(AG=0;AG<6;AG++){AE[AG]=AH[AG];}}}else{if(AF===true){for(AG=2;AG>=0;AG--){AE.push(AH[AG]);AE.push(AH[AG]);}}else{for(AG=0;AG<3;AG++){AE.push(AH[AG]);AE.push(AH[AG]);}}}return parseInt("0x"+AE.join(""),16);},RGB_BRG_Switch:function(AF){var AH=(AF>>16)&255,AG=(AF>>8)&255,AE=(AF>>0)&255;return(AE<<16)|(AG<<8)|(AH<<0);},encodeColor:function(AF){if(AF===undefined||AF===null||AF==="transparent"||AF==="default"){return AF;}var AG=false,AE={};if(AG){if(typeof AF==="object"){AE.c1=this.RGB_BRG_Switch(f.encodeColor(AF.c1));AE.c2=this.RGB_BRG_Switch(f.encodeColor(AF.c2));AE.or=AF.or;return AE;}return this.RGB_BRG_Switch(f.encodeColor(AF));}if(typeof AF==="object"){AE.c1=f.encodeColor(AF.c1);AE.c2=f.encodeColor(AF.c2);AE.or=AF.or;return AE;}return f.encodeColor(AF);},checkEquality:function(AF,AE){if(typeof AF==="object"&&AF.c1!==undefined){if(AF.c1!==AE.c1){return false;}if(AF.c2!==AE.c2){return false;}if(AF.or!==AE.or){return false;}return true;}return AF===AE;},decodeColor:function(AF){if(AF===undefined||AF===null||AF==="transparent"||AF==="default"){return AF;}var AG=false,AE={};if(AG){if(typeof AF==="object"){AE.c1=f.decodeColor(this.RGB_BRG_Switch(AF.c1));AE.c2=f.decodeColor(this.RGB_BRG_Switch(AF.c2));AE.or=AF.or;return AE;}return f.decodeColor(this.RGB_BRG_Switch(AF));}if(typeof AF==="object"){AE.c1=f.decodeColor(AF.c1);AE.c2=f.decodeColor(AF.c2);AE.or=AF.or;return AE;}return f.decodeColor(AF);},getTrendLineToggleHandler:function(AE,AG,AF){return function(){AE.switchOnOffTrendLineForMetric(AG,AF);};},getTrendLineToggleState:function(AE,AF){return AE.queryTrendLineStatusForMetric(AF);},getEditTrendLineHandler:function(AE,AF){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AE.raiseEventCMSelection(I.TREND_LINE,AF);};},getEditRefLineHandler:function(AE,AF){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AE.raiseEventCMSelection(I.REF_LINE,AF);};},getEditAxisScaleHandler:function(AE,AF){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AE.raiseEventCMSelection(I.AXIS_SCALE,AF);};},getEditAxisOriginHandler:function(AE,AF){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AE.raiseEventCMSelection(I.AXIS_ORIGIN_DEFINE,AF);};},getEditLogScaleHandler:function(AE,AF){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AE.raiseEventCMSelection(I.LOG_SCALE,AF);};},getOptionObjArr:function(AE,AG,AI){if(!D){D=mstrmojo.gm.GMUtility;}var AF={},AH;if(AG!==undefined){AG=AG.toLowerCase();if(AG==="x1"){AG="x";}else{if(AG==="y1"){AG="y";}}}if(AE.length>1||(AI&&AE.length===1)){if(AG==="x"){AF.opt=mstrmojo.desc(11712,"Bottom Axis");AF.key="XAxis";}else{if(AG==="x2"){AF.opt=mstrmojo.desc(11710,"Top Axis");AF.key="X2Axis";}else{if(AG==="y"){AF.opt=mstrmojo.desc(11715,"Left Axis");AF.key="YAxis";}else{if(AG==="y2"){AF.opt=mstrmojo.desc(11713,"Right Axis");AF.key="Y2Axis";}else{if(AG==="z"){AF.opt=mstrmojo.desc(12090,"SizeBy");AF.key="SizeBy";}}}}}AF.optLvl=j.AXIS;AF.mos=this.getMetricFormatFromIndexArray(AE);}else{if(AE.length===1){AH=this.getMetricFormat(AE[0]);AF.opt=AH.n;AF.mos=[AH];AF.key=AH.mId;AF.comb=D.getElementCombinationForMetric(AH.mId);AF.optLvl=j.METRIC;if(AG==="z"){AF.sizeBy=true;}}}return AF;},filterInValidMetricIndex:function(AF){var AE=[];n.forEach(AF,function(AG){if(AG!==Y){AE.push(AG);}});return AE;},fillBackgroundDiv:function(AF){var AE=document.createElement("div");AE.setAttribute("class","gm-bk-div");AE.style.backgroundColor="rgba(0,0,0,0)";AF.appendChild(AE);},getSubMenu:function(AJ,AK,AI,AH){var AG=AB(AJ,AH),AE=AJ.getMenuHandler("changeShape"),AF=AJ.GMController.getOnTheFlyShapeForMetric(AH);if(AG.length>1){AK.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",AJ.id,AC,{currValue:AF,options:AG,metricId:AI});}else{AK.addRadioMenuGroup(AF,o(AI,AE),AG,"checkMark",undefined,true);}},getReferenceLineSubMenu:function(AF,AJ,AK,AE){var AL=mstrmojo.gm.EnumSubtype,AI=AF.GMController.chartSubType;if(AK&&AI===AL.PERCENT){return ;}var AM=AF.id,AG=AF.getAvailableRefLineTypes(AE)||[];if(AG.length>0){AJ.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",AM,w,{metricId:AE,options:AG});}var AH=AF.getExistingRefLineOptions(AE)||[];if(AH.length>0){AJ.addMenuItem(mstrmojo.desc(13659,"Edit Reference Line"),"xt",D.getEditRefLineHandler(AF,AE));AJ.addSubMenuItem(mstrmojo.desc(13022,"Remove Reference Line"),"xt",AM,r,{metricId:AE,options:AH});}},reverseMapping:function l(AF){var AH={},AG,AE=AF.length;for(AG=0;AG<AE;AG++){AH[AF[AG]]=AG;}return AH;},longIntAnd:function(AF,AE){var AG;if(AF===AE){return AF;}if(AF>c||AE>c){throw new Error("Operand exceeds valid data range.");}if(AF<Z&&AE<Z){return AF&AE;}if(AF>=Z||AE>=Z){if(AF<AE){AG=AF;AF=AE;AE=AG;}}var AI=Math.floor(AF/Z),AH=Math.floor(AE/Z),AK=AF-AI*Z,AJ=AE-AH*Z;return(AK&AJ)+(AI&AH)*Z;},longIntOr:function(AF,AE){var AG;if(AF===AE){return AF;}if(AF<Z&&AE<Z){return AF|AE;}if(AF<AE){AG=AF;AF=AE;AE=AG;}AG=this.longIntAnd(AF,AE);return AE-AG+AF;},parseNumeric:function(AE){return +AE||parseFloat(AE);},fillTextInDiv:function(AE,AN,AP,AF,AQ,AG,AS,AI,AL){if(AF===undefined){AF=AE.offsetWidth;}if(AQ===undefined){AQ=AE.offsetHeight;}if(AI===undefined){AI=U.MIDDLE;}if(AL===undefined){AL=p.MIDDLE;}if(AG===undefined){AG=false;}var AM,AO,AK,AR=AG?"gm-text-body":"gm-text-body-nowrap",AH=false,AJ;AM=G.measureTextWidth(AP,AS,6);AJ=G.measureTextWidth("...",AS,6);if(AM>AF&&AJ>AF){return ;}AK=document.createElement("div");AK.setAttribute("class",AR);AK.setAttribute("type",y.GM_TEXT_BODY);AK.identity=AN;G.applyStyles2DomNode(AK,AS);AK.innerHTML=AP;AE.appendChild(AK);if(AG){if(AM>AF){AO=AK.offsetHeight;}else{AO=G.measureTextHeight(AP,AS,4);}}else{AO=G.measureTextHeight(AP,AS,4);AH=AM>AF;}AM=Math.min(AM,AF);AK.style.width=AM+"px";if(AG){AH=AK.scrollWidth>AM||AK.scrollHeight>AO;}if(AH){AK.setAttribute("title",AP);}else{AK.setAttribute("title","");}switch(AI){case U.LEFT:AK.style.left="0px";AK.style.textAlign="left";break;case U.MIDDLE:AK.style.left=((AF-AM)>>1)+"px";break;case U.RIGHT:AK.style.right="0px";AK.style.textAlign="right";break;}switch(AL){case p.TOP:AK.style.top="0px";break;case p.MIDDLE:AK.style.top=((AQ-AO)>>1)+"px";break;case p.BOTTOM:AK.style.bottom="0px";break;}},updateTextColorAndAlignment:function(AE,AG,AH){var AI=AE.firstChild,AJ=AI.style,AF=AE.clientWidth,AK=AI.clientWidth,AM=AE.clientHeight,AL=AI.clientHeight;AJ.left="auto";AJ.right="auto";switch(AG){case U.LEFT:AJ.left="0px";break;case U.MIDDLE:AJ.left=((AF-AK)>>1)+"px";break;case U.RIGHT:AJ.right="0px";break;}AJ.top="auto";AJ.bottom="auto";switch(AH){case p.TOP:AJ.top="0px";break;case p.MIDDLE:AJ.top=((AM-AL)>>1)+"px";break;case p.BOTTOM:AJ.bottom="0px";break;}},toggleDisplay:function(AF,AE){if(!AF){return ;}if(AE){AF.style.display="block";}else{AF.style.display="none";}},isTrendLineAvailableForMetric:function(AI,AJ,AM){var AT=false,AQ=mstrmojo.gm.EnumSubtype,AL=m.gm.EnumShape,AR=AI.GMController,AN=AR.chartSubType,AS=AI.model.data.dz,AG=AS.XAxis,AE=AS.YAxis,AH=AS.BreakBy,AK=AS.SliceBy,AO=AM,AF=AR.getChartInfo(),AP=AR.getBreakByAttrsID().length>0||(AF.isABL&&((AG.MetricNames!==undefined)||(AE.MetricNames!==undefined)||(AH.MetricNames!==undefined)||(AK.MetricNames!==undefined)));if(AO===undefined){AO=AR.getOnTheFlyShapeForMetric(AJ);}if(AF.isABL&&AN===AQ.PERCENT){AT=true;}if(AP&&!AF.isBubbleOrScatter&&(AO===AL.BAR||AN===AQ.STACKED||(AN===AQ.AUTO&&AO===AL.AREA))){AT=true;}if(AF.isABL){if(AG.TemplateUnit&&AG.TemplateUnit.length>1){AT=true;}if(AE.TemplateUnit&&AE.TemplateUnit.length>1){AT=true;}if(AG.TemplateUnit===undefined&&AE.TemplateUnit===undefined){AT=true;}}AT=AT||this.isIgnoredMetric(AI,AJ);return !AT;},isTrendLineAvailableForAnyMetric:function(AG){var AF=AG.model.data.gsi.mx,AE;for(AE in AF){if(this.isTrendLineAvailableForMetric(AG,AE)){return true;}}return false;},isIgnoredMetric:function(AH,AF){var AG=AH.GMController,AI,AE;if(AG.bubbleSeriesNum!==undefined){AI=AG.getMetricsOnYAxis();AE=AI.indexOf(AF);if(AE>=AG.bubbleSeriesNum){return true;}AI=AG.getMetricsOnXAxis();AE=AI.indexOf(AF);if(AE>=AG.bubbleSeriesNum){return true;}}return false;},getAxisMetricsInfo:function(AJ){var AE=AJ.model.data.dz,AK=AJ.model.data.gsi.mx,AF,AG,AI=[];if(!AE||!AE.ColorBy||!AK){return AK;}var AH=function(AL){return(AL&&AL.TemplateMetric)||[];};AF=AH(AE.YAxis).concat(AH(AE.XAxis));n.forEach(AK,function(AL){AG=false;n.forEach(AF,function(AM){if(AL.did===AM.id){AG=true;return false;}});if(AG){AI.push(AL);}});return AI;},isInvalidTemplate:function N(AH){if(AH.eg){return false;}var AF=AH.gts;var AE=AF.row.length===0&&AF.col.length===0;n.forEach(AF.row,function(AK){if(AK.otp===-1){AE=true;}});var AJ=AF.col;if(AJ.length>0){var AG,AI=AJ.length-1;for(AG=0;AG<AI;AG++){if(AJ[AG].otp===-1){AE=true;}}}return AE;},isNoData:function(AE){return AE.eg!==undefined;},getInvalidTemplateErrMsg:function(AE){return AE||mstrmojo.desc(12094,"The Graph Matrix requires:")+"\n"+mstrmojo.desc(12095,"- at least one attribute to be placed on the row or column axis")+"\n"+mstrmojo.desc(12096,"- all metrics to be placed on the column axis, below any attributes");},initColorPickerBtnWithGradientDir:function(AF,AG){mstrmojo.func.override({showPickerForCurrentMode:function AE(){this._super();if(this.pickerMode===2&&typeof this.color!=="object"){var AH=this.gradientOrientation,AI=AG.getChartInfo().dirc===mstrmojo.gm.EnumABLDirection.VERTICAL;AH.set("selectedIndex",n.find(AH.items,"id",AI?0:1));}}},AF.colorPicker);},generateToolTipContent:function(AN,AI,AE,AJ,AL,AK,AQ){var AH,AF,AG,AM,AO,AP;for(AH=AN;AH<AI;AH++){AF=AJ[AH];AM=AL[AH];if(AH>AN){AG=AJ[AH-1];AO=AL[AH-1];if(AF.id===AG.id){if(AM===""){continue;}if(AF.fid===AG.fid&&AM.idx===AO.idx){continue;}if(AF.n===""){AK[AK.length-1].v+=L+AM.n;continue;}}}if(AQ){AK.push({n:AF.n,tid:AF.id,v:AM.n});}else{AP=AE===undefined?AF.isRowAttribute:AE;AK.push({n:AF.n,tid:AF.id,v:AM.n,eid:AM.id,tp:AF.otp,axis:AP?1:2,tui:AF.tui,ui:AF.tui,dpt:AF.tui+1,at:AM.at,isRowAttribute:AP,dei:AM.dei,o:AM.o});}}},getAttributeFormCnt:function(AE){var AF;if((AE.fcnt===undefined||AE.fcnt===null)&&AE.fs){AE.fcnt=AE.fs.length||1;}if(AE.fcnt!==undefined&&AE.fcnt!==null){AF=AE.fcnt;}else{if(AE.t===47){AF=1;}else{AF=AE.cs!==undefined?AE.cs:AE.rs;}}return AF;},isTrueForBoolValue:function(AE){return AE===true||AE==="true";},computeTicksForAxis:function(AH,AF){var AG=AH.mOptions,AI,AE={mTicks:[]};if(AF){AI=P.copy(AG);P.copy(AF,AI);}else{AI=AG;}if(AH.mIsPercent){S.call(AH,AE,AI);return AE;}if(AI.mUseLogarithmicScale){O.call(AH,AE,AI);return AE;}if(AH.mGraphMajorType===b.GMT_BUBBLE&&AH.mTripleId.mObjectId===u.DssGraphZBody){AE.mMinTick=AI.mUseMinValue?AI.mAxisMinValue:AH.mMinimum;AE.mMaxTick=AI.mUseMaxValue?AI.mAxisMaxValue:AH.mMaximum;if(AH.mMinTick>=AH.mMaxTick){AE.mMaxTick=AE.mMinTick+1;}return AE;}if(!AI.mUseMaxValue&&!AI.mUseMinValue){q.call(AH,AE,AI);}else{if(AI.mUseMaxValue&&AI.mUseMinValue){C.call(AH,AE,AI);}else{if(AI.mUseMaxValue){E.call(AH,AE,AI);}else{h.call(AH,AE,AI);}}}return AE;},computeTicksForLogScale:function(AG){var AF=AG.mOptions,AE={mTicks:[]};O.call(AG,AE,AF);return AE;},destroyDisposable:function(AE,AF){if(AF){n.removeItem(AE.disposables,AF);AF.destroy();}},handleDestroy:function(AH,AG){if(!AH){return ;}var AI,AF=0,AE=AH.disposables,AJ=(AE&&AE.length)||0;while(AF<AJ){AI=AE[AF];if(!AI.scriptClass||AG.indexOf(AI.scriptClass)<0){this.destroyDisposable(AH,AI);}if(AE.length<AJ){AJ=AE.length;}else{AF++;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle","EnumFontAlignment","EnumFontStyle","EnumFontRotation");var M=mstrmojo.chart,J=M.enums,H=J.EnumBoxStyle,D=J.EnumFontAlignment,R=J.EnumFontStyle,T=J.EnumFontRotation,I=M.common.Utility,N=1,S=3;var B=["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize"],F=[D.FA_CENTER,R.FS_NORMAL,T.FR_NORMAL,H.BS_NOFRAME,null,255,"Verdana",15];mstrmojo.chart.FormatFont=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFont",mFontAlignment:D.FA_CENTER,mFontStyle:R.FS_NORMAL,mFontRotation:T.FR_NORMAL,mFontBox:H.BS_NOFRAME,mFontColor:null,mFontAlpha:255,mFontName:null,mFontSize:15,init:function L(X){var W,V=B.length;this._super(X);if(X&&X.Font){var U=X.Font;mstrmojo.hash.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontAlpha","mFontName","mFontSize"],U,this);this.mFontColor=U.mFontColor;}else{if(X&&X.Bare){for(W=0;W<V;++W){this[B[W]]=null;}}}if(!this.mFontColor&&!(X&&X.Bare)){this.mFontColor=M.gBlack.ToInteger();}this.mFontName=this.mFontName||"Verdana";},ApplyFontFormat:function K(V,U){if(this.mFontSize<S){this.mFontSize=S;}if(!U){V.applyFontFormat(this);}},GetFontExtent:function A(){return Math.floor(this.mFontSize<S?S:this.mFontSize*N);},GetStringExtent:function O(V){var W,U,X;this.ApplyFontFormat(null,true);X=I.measureText(V,this.mFontName,this.mFontSize,this.mFontStyle);W=X.Width;U=X.Height;return{Width:W,Height:U};},GetStringHeight:function P(U){this.ApplyFontFormat(null,true);return I.measureTextHeight(U,this.mFontName,this.mFontSize,this.mFontStyle);},isVertical:function E(){var U=this.mFontRotation;return U===T.FR_90||U===T.FR_270;},isHorizontal:function C(){var U=this.mFontRotation;return U===T.FR_NORMAL||U===T.FR_180;},evalMargins:function Q(){return I.evaluateTextMargin(this.mFontSize);},restoreDefaults:function G(V){var U;if(V){for(U=0;U<B.length;++U){this[B[U]]=F[U];}}else{for(U=0;U<B.length;++U){if(this[B[U]]===null){this[B[U]]=F[U];}}}if(this.mFontColor===null){this.mFontColor=M.gBlack.ToInteger();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","FormatFont");var O=mstrmojo.chart;mstrmojo.chart.SubTextHolder=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.SubTextHolder",mVecStr:null,mInitVecPartition:null,mVecPartition:null,mVecSize:null,mSpaceWidth:0,mMaxWordWidth:0,init:function M(S){this._super(S);this.mVecStr=[];this.mInitVecPartition=[];this.mVecPartition=[];this.mVecSize=[];},Clear:function P(){this.mVecStr.splice(0,this.mVecStr.length);},ParseText:function K(W,c,a){var Y=this.mInitVecPartition,S,Z,V,U,T,b=[],X;S=W.split("\n");Y.splice(0,this.mInitVecPartition.length);Y.push(0);V=0;Z=S.length;for(U=0;U<Z;++U){b=S[U].split(c);V+=b.length;Y.push(V);X=b.length;for(T=0;T<X;++T){this.mVecStr.push(this.TruncateWord(b[T],a));}}this.mVecPartition=Y.concat();},TruncateWord:function E(U,S){if(S<4||S>U.length){return U;}var T=U.substr(0,S-3);T+="...";return T;},UpdateText:function B(W,T){var V,U,S,Z,X,Y;this.mVecSize.splice(0,this.mVecSize.length);V=T;U=0;S=this.mVecStr.length;for(Z=0;Z<S;Z++){X={width:0,mX_bearing:0,mX_advance:0};if(this.mVecStr[Z]===""){this.mVecSize.push(X);}else{Y=V.GetStringExtent(this.mVecStr[Z]);X.width=X.mX_advance=Y.Width;this.mVecSize.push(X);if(Y.Width>U){U=Y.Width;}}}this.mMaxWordWidth=U;Y=V.GetStringExtent(" ");this.mSpaceWidth=Y.Width;},GetMaxWidth:function Q(){var V,S,T,U;V=0;S=this.mVecPartition.length;for(T=0;T+1<S;++T){U=this.GetOneLineWidth(T);if(U>V){V=U;}}return Math.floor(V+0.5);},GetOneLineWidth:function D(W){var S=this.mVecPartition,V=this.mVecSize,U,T;U=0;for(T=S[W];T<S[W+1];T++){if(T===S[W]&&T===S[W+1]-1){U+=V[T].width;}else{if(T===S[W]&&T!==S[W+1]-1){U+=V[T].mX_advance-V[T].mX_bearing;}else{if(T!==S[W]&&T===S[W+1]-1){U+=V[T].width+V[T].mX_bearing;}else{U+=V[T].mX_advance;}}}if(T!==S[W]){U+=this.mSpaceWidth;}}return U;},GetOneWordWidth:function F(S){return this.mVecSize[S].width;},GetStringWidth:function L(U,T){var S=T.GetStringExtent(U);return S.Width;},GetSpaceWidth:function N(){return this.mSpaceWidth;},GetSpaceWidthEx:function C(S){var T=S.GetStringExtent(" ");return T.Width;},GetLineCount:function G(){return this.mVecPartition.length-1;},SetLineCount:function J(T,S){if(T<1){return ;}if(S!==0){S=S||-1;}var U=this.mVecPartition;if(T===1){U.splice(0,U.length);U.push(0);U.push(this.mVecSize.length);}else{if(this.GetLineCount()<=T){if(S===-1){return ;}if(this.GetMaxWidth()<=S){return ;}this.PartitionBy(S,true);if(this.GetLineCount()>T){U.length=T+1;U[U.length-1]=this.mVecSize.length;}}else{U.length=T+1;U[U.length-1]=this.mVecSize.length;}}},PartitionBy:function H(V,a){var U=this.mVecPartition,Y=this.mInitVecPartition,Z,X,W,T,S;a=(a!==undefined)?a:true;if(!a&&V<this.mMaxWordWidth){V=Math.floor(this.mMaxWordWidth+0.5);}U.splice(0,U.length);Z=Y.length;for(X=0;X+1<Z;++X){U.push(Y[X]);T=0;S=Y[X];for(W=Y[X];W<Y[X+1];W++){T+=this.mVecSize[W].mX_advance;if(W!==Y[X+1]-1){T+=this.mSpaceWidth;}if(T>V&&W!==S){T=0;S=W;U.push(W--);}}}if(Z>0){U.push(Y[Z-1]);}},GetOneLineString:function R(U){var S=this.mVecPartition,V="",T;for(T=S[U];T<S[U+1];T++){V=V.concat(this.mVecStr[T]);if(T!==S[U+1]-1){V=V.concat(" ");}}return V;},GetOneLineWords:function A(V){var T=this.mVecPartition,U,S=[];for(U=T[V];U<T[V+1];U++){S.push(U);}return S;},GetOneLineXBearing:function I(S){return this.mVecSize[this.mVecPartition[S]].mX_bearing;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill","JSONInstruction","JSONUtil","JSONUnit","JSONFormatFill","JSONFormatFont","JSONFormatLine");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.enums.EnumInstructionName");var d=mstrmojo.chart,L=mstrmojo.chart.enums,v=L.EnumInstructionName,r=d.JSONUtil.prototype,N=mstrmojo.hash;function F(AC,AB){return AC.mpOriginalAddress-AB.mpOriginalAddress;}function X(AC,AB){if(AC===undefined){AC=v.JSONInsUndefined;}if(AB===undefined){AB=null;}else{AB=AB.id;}if(this.mpCurrentUnit===null){this.mpCurrentUnit=new d.JSONUnit();this.mUnitList.push(this.mpCurrentUnit);}return this.mpCurrentUnit.AddInstruction(AC,AB);}function U(AD){var AB=this.mFormatMap,AC=AD.id;if(AD instanceof d.FormatFill){if(AB[AC]===undefined){AB[AC]=new d.JSONFormatFill(AD);}}else{if(AD instanceof d.FormatFont){if(AB[AC]===undefined){AB[AC]=new d.JSONFormatFont(AD);}}else{if(AD instanceof d.FormatLine){if(AB[AC]===undefined){AB[AC]=new d.JSONFormatLine(AD);}}}}}mstrmojo.chart.JSONCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.JSONCanvas",mIsJSONObjectConstructed:false,mpCurrentUnit:null,mUnitList:null,mFormatMap:null,mFormatList:null,mJSONObject:null,init:function t(AB){this._super(AB);this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};},reset:function o(){this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};this.mIsJSONObjectConstructed=false;this.mpCurrentUnit=null;},SaveToObject:function m(AC){var AB;if(!this.mIsJSONObjectConstructed){this.hConstructJSONObject();}for(AB in this.mJSONObject){AC[AB]=this.mJSONObject[AB];}return true;},saveState:function p(){X.call(this,v.JSONInsSaveState);},RestoreState:function W(){X.call(this,v.JSONInsRestoreState);},Clip:function h(){X.call(this,v.JSONInsClip);},Scale:function Q(AB,AD){var AC=X.call(this,v.JSONInsScale);AC.AppendToParameterList("X",AB);AC.AppendToParameterList("Y",AD);},Rotate:function T(AB,AD){var AC=X.call(this,v.JSONInsRotate);AC.AppendToParameterList("Anchor",AB);AC.AppendToParameterList("Radian",AD);},NewPath:function S(){X.call(this,v.JSONInsNewPath);},ClosePath:function k(){X.call(this,v.JSONInsClosePath);},MoveTo:function c(AB,AF,AD,AE){var AC=X.call(this,v.JSONInsMoveTo);AC.AppendToParameterList("X",AB);AC.AppendToParameterList("Y",AF);if(AD){AC.AppendToParameterList("CA",1);AC.AppendToParameterList("BPX",AE.x);AC.AppendToParameterList("BPY",AE.y);}else{AC.AppendToParameterList("CA",0);}},LineTo:function P(AB,AF,AD,AE){var AC;AC=X.call(this,v.JSONInsLineTo);AC.AppendToParameterList("X",AB);AC.AppendToParameterList("Y",AF);if(AD){AC.AppendToParameterList("CA",1);AC.AppendToParameterList("BPX",AE.x);AC.AppendToParameterList("BPY",AE.y);}else{AC.AppendToParameterList("CA",0);}},BezierCurveTo:function K(AE,AD,AH,AF,AB,AG){var AC;AC=X.call(this,v.JSONInsBezierCurveTo);AC.AppendToParameterList("CP1X",AE);AC.AppendToParameterList("CP1Y",AD);AC.AppendToParameterList("CP2X",AH);AC.AppendToParameterList("CP2Y",AF);AC.AppendToParameterList("X",AB);AC.AppendToParameterList("Y",AG);},SetRGBAFillColor:function f(AF,AD,AB,AE){var AC;AC=X.call(this,v.JSONInsSetRGBAFillColor);AC.AppendToParameterList("R",this.BoundedValue(AF*256,0,255));AC.AppendToParameterList("G",this.BoundedValue(AD*256,0,255));AC.AppendToParameterList("B",this.BoundedValue(AB*256,0,255));AC.AppendToParameterList("A",this.BoundedValue(AE,0,1));},BoundedValue:function V(AD,AC,AB){if(AD<AC){return AC;}if(AD>AB){return AB;}return AD;},SetRGBAStrokeColor:function w(AF,AD,AB,AE){var AC;AC=X.call(this,v.JSONInsSetRGBAStrokeColor);AC.AppendToParameterList("R",this.BoundedValue(AF*256,0,255));AC.AppendToParameterList("G",this.BoundedValue(AD*256,0,255));AC.AppendToParameterList("B",this.BoundedValue(AB*256,0,255));AC.AppendToParameterList("A",this.BoundedValue(AE,0,1));},FillPath:function i(){X.call(this,v.JSONInsFillPath);},StrokePath:function H(){X.call(this,v.JSONInsStrokePath);},SetLineDash:function E(AD,AC){var AB=X.call(this,v.JSONInsSetLineDash);AB.AppendArrayToParameterList("LinePattern",AD,AC);},SetLineWidth:function l(AB){var AC=X.call(this,v.JSONInsSetLineWidth);AC.AppendToParameterList("LineWidth",AB);},SetLineJoin:function I(AC){var AB=X.call(this,v.JSONInsSetLineJoin);AB.AppendToParameterList("Type",AC);},SetFontSize:function Z(AC){var AB=X.call(this,v.JSONInsSetFontSize);AB.AppendToParameterList("FontSize",AC);},AddRect:function s(AC,AF,AE,AB){var AD=X.call(this,v.JSONInsAddRect);AD.AppendToParameterList("X",AC);AD.AppendToParameterList("Y",AF);AD.AppendToParameterList("W",AE);AD.AppendToParameterList("H",AB);},AddArc:function Y(AC,AH,AB,AF,AD,AG){var AE=X.call(this,v.JSONInsAddArc);AE.AppendToParameterList("X",AC);AE.AppendToParameterList("Y",AH);AE.AppendToParameterList("Radius",AB);AE.AppendToParameterList("StartAngle",AF);AE.AppendToParameterList("EndAngle",AD);AE.AppendToParameterList("AntiClockwise",AG);},AddNeedle:function x(AE,AD,AF,AC){var AB=X.call(this,v.JSONInsAddNeedle);AB.AppendToParameterList("NeedleStyle",AE);AB.AppendToParameterList("BasePoint",AD);AB.AppendToParameterList("Angle",AF);AB.AppendToParameterList("Size",AC);},AddString:function b(AB,AD){var AC=X.call(this,v.JSONInsAddString);AC.AppendToParameterList("Point",AB);AC.AppendToParameterList("Text",AD);},FillSimple:function g(AF,AD,AB,AE){var AC=X.call(this,v.JSONInsFillSimple,AF);AC.AppendToParameterList("DarkerFactor",AD);if(AE){AC.AppendToParameterList("HEP",1);AC.AppendToParameterList("FC",AB);}else{AC.AppendToParameterList("HEP",0);}U.call(this,AF);},FillPattern:function u(AB){X.call(this,v.JSONInsFillPattern,AB);U.call(this,AB);},FillGradient:function q(AE,AB,AD){var AC=X.call(this,v.JSONInsFillGradient,AE);AC.AppendToParameterList("BoundingRect",AB);AC.AppendToParameterList("DarkerFactor",AD);U.call(this,AE);},FillEdgeType:function C(AD,AC){var AB=X.call(this,v.JSONInsFillEdgeType,AD);AB.AppendSimpleVectorToParameterList("Polygon",AC);U.call(this,AD);},FillRadientGradient:function G(AJ,AI,AH,AG,AF,AE,AB,AD,AK){var AC=X.call(this,v.JSONInsFillRadientGradient,AJ);AC.AppendToParameterList("RGUsage",AI);AC.AppendToParameterList("CX",AH);AC.AppendToParameterList("CY",AG);AC.AppendToParameterList("InnerRadius",AF);AC.AppendToParameterList("OuterRadius",AE);if(AB){AC.AppendToParameterList("HEP",1);AC.AppendToParameterList("ExtraDepth",AD);AC.AppendToParameterList("ExtraIntensity",AK);}else{AC.AppendToParameterList("HEP",0);}U.call(this,AJ);},FillBorderMetallic:function y(AH,AC,AG,AF,AB,AE){var AD=X.call(this,v.JSONInsFillBorderMetallic,AH);AD.AppendToParameterList("BorderUse",AC);AD.AppendToParameterList("CX",AG);AD.AppendToParameterList("CY",AF);AD.AppendToParameterList("Radius",AB);AD.AppendToParameterList("Thickness",AE);U.call(this,AH);},FillDonutOrSphere:function a(AE,AB,AD){var AC=X.call(this,v.JSONInsFillDonutOrSphere,AE);AC.AppendToParameterList("BoundingRect",AB);AC.AppendToParameterList("IsCircularShape",AD);U.call(this,AE);},MakeDarker:function n(AD,AC){var AB=X.call(this,v.JSONInsMakeDarker,AD);AB.AppendToParameterList("Factor",AC);U.call(this,AD);},RestoreColor:function AA(AB){X.call(this,v.JSONInsRestoreColor,AB);U.call(this,AB);},ApplyLineFormat:function R(AB){X.call(this,v.JSONInsApplyLineFormat,AB);U.call(this,AB);},AddFormatedText:function J(AB,AE,AF,AD){var AC=X.call(this,v.JSONInsAddFormatedText,AB);AC.AppendToParameterList("StartPoint",AE);AC.AppendToParameterList("Text",AF);U.call(this,AB);},ApplyBeveledFrameToRectangle:function e(AG,AI,AF,AH,AC,AE,AB){var AD=X.call(this,v.JSONInsApplyBeveledFrameToRectangle);AD.AppendToParameterList("Rect",AG);AD.AppendToParameterList("RotationAngle",AI);AD.AppendToParameterList("BevelDepth",AF);AD.AppendToParameterList("LTColor",AH);AD.AppendToParameterList("LTAlpha",AC);AD.AppendToParameterList("RBColor",AE);AD.AppendToParameterList("RBAlpha",AB);},DrawGaugeMarker:function j(AD,AG,AB,AF,AE){var AC=X.call(this,v.JSONInsAddGaugeMarker);AC.AppendToParameterList("MarkSize",AG);AC.AppendToParameterList("MarkShape",AB);AC.AppendToParameterList("Angle",AF);AC.AppendToParameterList("NeedleSize",AE);AC.AppendToParameterList("BPX",AD.x);AC.AppendToParameterList("BPY",AD.y);},ApplyDonutToRect:function A(AD,AC,AE){var AB=X.call(this,v.JSONInsFillDonut2Rect,AE);AB.AppendToParameterList("StartPoint",AD);AB.AppendToParameterList("EndPoint",AC);},BeginFirstFrame:function z(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new d.JSONUnit({mIsAnimated:true,mIsLastFrame:false});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToFirstFrame();},BeginLastFrame:function B(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new d.JSONUnit({mIsAnimated:true,mIsLastFrame:true});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToLastFrame();},EndFrame:function D(){if(this.mpCurrentUnit!==null&&this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=null;}},EndUnit:function M(){this.mpCurrentUnit=null;},hConstructJSONObject:function O(){var AC=this.mFormatList,AG=this.mUnitList,AD,AB,AE,AF,AH;AD=this.mJSONObject={};N.forEach(this.mFormatMap,function(AJ,AI,AK){AC.push(AJ);});AC.sort(F);AB=AG.length;for(AE=0;AE<AB;++AE){AG[AE].CalculateFormatIndex(AC);}AD.UnitList=[];if(AB>0){if(AB===1){AF={};AG[0].AppendToJSONObject(AF);AD.UnitList.push(AF);}else{AH=0;AF={};AG[0].AppendToJSONObject(AF);AD.UnitList.push(AF);for(AE=1;AE<AB;++AE){AF={};AG[AE].AppendToJSONObject(AF);if(AG[AE-1].IsAnimated()!==AG[AE].IsAnimated()){AD.UnitList.push(AF);AH++;}else{AD.UnitList[AH].InstructionList=AD.UnitList[AH].InstructionList.concat(AF.InstructionList);}}}}r.AppendCompoundPointerVectorToJSONObject("FormatList",AC,AD);this.mIsJSONObjectConstructed=true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility","mstrmojo.chart.common.Utility","mstrmojo.chart.enums.EnumInstructionName");var Ae=mstrmojo.chart.model,AQ=Ae.enums,AN=mstrmojo.VisUtility,Aq=AQ.EnumDSSGraphGradientType,i=3.141592653589793,o={area:["gm-shape-scircle","",""],line:["gm-shape-scircle","",""],"line-sizeby":["gm-shape-sbar","",""],bar:["gm-shape-bar","","gm-shape-grid-bar"],circle:["gm-shape-circle","gm-shape-circle","gm-shape-grid-circle"],square:["gm-shape-square","gm-shape-square","gm-shape-grid-square"],ticker:["gm-shape-ticker","gm-shape-ticker","gm-shape-grid-ticker"],pie:["gm-shape-pie","gm-shape-pie","gm-shape-pie"],ring:["gm-shape-ring","gm-shape-ring","gm-shape-ring"],markerRect:["gm-shape-bar","gm-shape-bar","gm-shape-bar"],markerCircle:["gm-shape-circle","gm-shape-circle","gm-shape-circle"]},t={area:["scircle","",""],line:["scircle","",""],"line-sizeby":["sbar","",""],bar:["bar","","gbar"],circle:["circle","circle","circle"],square:["square","square","square"],ticker:["ticker","ticker","ticker"],pie:["pie","pie","pie"],ring:["ring","ring","ring"],markerRect:["gmMarker","gmMarker","gmMarker"],markerCircle:["gmMarker","gmMarker","gmMarker"]};var G=mstrmojo.chart.common.Utility;var M={mR:0,mG:0,mB:0},q={"stroke-width":0};function m(A3,A0){var Az=1,A2=2,A1=this.mStyle;if(A3===Az){A1["stroke-dasharray"]=Ah.call(this,true,A0);}else{if(A3===A2){A1["stroke-dasharray"]=Ah.call(this,false,A0);}}}function J(Az){var A1,A0=document.createElementNS(this.mXMLNS,"polygon"),A3=Az.length,A2="";for(A1=0;A1<A3;++A1){A2+=(Az[A1].x+","+Az[A1].y+" ");}A0.setAttribute("points",A2);return A0;}function x(A2,Az){var A0,A1,A3=this.getDrawOrder(A2);this.mStyle["stroke-width"]="0";this.mAttributes["class"]="gm-set-line-polygon";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A2;A0=this.hCreateSVGPolygon(Az);this.hExtendGroups(A3);A1=this.mSvg.childNodes[A3+1];A1.appendChild(A0);return{Polygon:A0,Group:A1};}function Ah(A1,Az){var A0=Az||1;return[A1?A0*3:A0,A0].join(" ");}function AC(){var Az=[].slice.call(arguments);return Az.some(function(A0){return typeof A0==="undefined";});}function p(A0,A9,Az,A5,A8,A7,A2,A1){var A3="stroke-width:3;stroke-opacity:1;fill:none;",A6="",A4=document.createElementNS(this.mXMLNS,"path");if(AC(A0,A9)){A6+=(" "+this.hMoveTo(A2,A1));A6+=(" "+this.hRelMoveTo(-A5,0));A6+=(" "+this.hRelArcTo(A5,Az,true,A5*2,0));A6+=(" "+this.hRelArcTo(A5,Az,true,-A5*2,0));}else{A6=this.hMoveTo(A0.x,A0.y),A6+=" "+this.hArcTo(A5,Az,true,A9.x,A9.y);}if(A7){A3+="stroke:rgb(255,255,255)";}else{A3+="stroke:rgb(0,0,0)";}A4.sX=A2;A4.sY=A1;A4.sR=A5;A4.sD=A6;A4.setAttribute("d",A6);A4.setAttribute("style",A3);this.mSvg.childNodes[A8+1].appendChild(A4);}mstrmojo.chart.SVGCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.SVGCanvas",mSvg:null,mG:null,mDefs:null,mXMLNS:"http://www.w3.org/2000/svg",mStyle:null,mAttributes:null,mMarkerAttributes:null,mGradientCount:0,mElements:null,seriesDrawOrder:null,init:function AT(A1){var Az;this._super(A1);Az=document.createElementNS(this.mXMLNS,"svg");Az.style.height="100%";Az.style.width="100%";Az.style.padding=0;this.mG=document.createElementNS(this.mXMLNS,"g");this.mDefs=document.createElementNS(this.mXMLNS,"defs");this.mG.appendChild(this.mDefs);Az.appendChild(this.mG);this.mStyle={};this.mSvg=Az;this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];if(A1.seriesDrawOrder&&A1.seriesDrawOrder.length){this.seriesDrawOrder=A1.seriesDrawOrder.concat();var A3=this.seriesDrawOrder,A0=A1.seriesDrawOrder,A4,A2;for(A2=0;A2<A3.length;A2++){A4=A0[A2];A3[A4]=A2;}}},reset:function AM(){this.mStyle={};this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];this.seriesDrawOrder=null;var Az=this.mG;while(Az.firstChild){Az.removeChild(Az.firstChild);}Az=this.mSvg;while(Az.firstChild){Az.removeChild(Az.firstChild);}Az.appendChild(this.mG);this.mG.appendChild(this.mDefs);},setDrawOrder:function F(Az){if(Az){this.seriesDrawOrder=Az;}},getDrawOrder:function N(A0){if(A0===-3){A0=0;}var Az=this.seriesDrawOrder;if(Az&&Az.length){if(A0>=Az.length){AN.visPrint("Drawing order,Max index exceeded");}return Az[A0];}return A0;},SaveToObject:function D(Az){Az.svg=this.mSvg;return true;},saveState:function Aj(){},RestoreState:function Au(){},Clip:function Ab(){},Scale:function An(Az,A0){},Rotate:function AD(A0,Az){this.SetAttribute("transform","rotate("+Az*180/i+" "+A0.x+" "+A0.y+")");},NewPath:function O(){},ClosePath:function AO(){},MoveTo:function Af(Az,A2,A0,A1){},LineTo:function AG(Az,A2,A0,A1){},BezierCurveTo:function W(A1,A0,A4,A2,Az,A3){},SetRGBAFillColor:function Z(A0,A1,Az,A2){},BoundedValue:function AU(A1,A0,Az){if(A1<A0){return A0;}if(A1>Az){return Az;}return A1;},SetRGBAStrokeColor:function P(A0,A1,Az,A2){},FillPath:function S(){},StrokePath:function A(){},SetLineDash:function Ap(Az,A0){},SetLineWidth:function AY(Az){this.mStyle["stroke-width"]=Az;},SetLineJoin:function c(Az){},SetFontSize:function l(Az){},AddRect:function y(Az,A2,A0,A1){},SetAttribute:function AJ(Az,A0){this.mAttributes[Az]=A0;},SetMarkerAttribute:function Q(Az,A0){this.mMarkerAttributes[Az]=A0;},CreateSVGCircle:function E(A5,A3,A8,A7,A9,A4){var A1=A7.isPie?A7.sPieDP.graphCell.sID:A7.gc.sID,A6=this.getDrawOrder(A1),Az=document.createElementNS(this.mXMLNS,"circle"),A2=this.hToCSSStyleStr();if(A8<=10){Az.setAttribute("size","small");}Az.sX=A5;Az.sY=A3;Az.sR=A8;Az.identity=A7;Az.setAttribute("cx",A5);Az.setAttribute("cy",A3);Az.setAttribute("r",A8);Az.setAttribute("style",A2);this.hExtendGroups(A6);this.hCopyAttribute(this.mAttributes,Az);var A0=A7.getChartInfo();if(A7.objType===17179869184){A0.currentMarkerShape=-1;}this.hSetExtraAttributes(Az,A0,"circle");this.mSvg.childNodes[A6+1].appendChild(Az);if(A9){p.call(this,undefined,undefined,true,A8,A6,A4,A5,A3);}this.hResetStyleAndAttribute();},CreateSVGTextBoundingBox:function Ad(A1,A0,A3,A2){var Az=this.hCreateSimpleSVGPolygon(A1,A0,true,A3);if(A3){if(this.mSvg.childNodes.length<=(A2+2)){this.hExtendGroups(A2+1);}this.mSvg.childNodes[A2+2].appendChild(Az);}else{this.mElements.push({Type:"BBox",Node:Az});}},hCreateSimpleSVGPolygon:function X(A8,A2,Az,A1){var A5=document.createElementNS(this.mXMLNS,"polygon"),A4=A8.length,A6="",A3,A7=this.hToCSSColorStr(A2),A0;if(A1){A0="stroke-width:2;stroke:rgb(0,0,0);stroke-opacity:1";}else{A0="stroke-width:1;stroke:rgb(0,0,0);stroke-opacity:1";}A0+=";stroke:"+A7;Az=Az||false;if(Az){A0+=";fill-opacity:0";}for(A3=0;A3<A4;++A3){A6+=(A8[A3].x+","+A8[A3].y+" ");}A5.setAttribute("points",A6);A5.setAttribute("style",A0);this.hCopyAttribute(this.mAttributes,A5);return A5;},CreateSVGRect:function U(A4,A3,A5,A2,A8){var A0=A8.isPie?A8.sPieDP.graphCell.sID:A8.gc.sID,A6=this.getDrawOrder(A0),A7=document.createElementNS(this.mXMLNS,"rect"),A1=this.hToCSSStyleStr();if(A5<=5||A2<=5){A7.setAttribute("size","small");}A7.identity=A8;A7.setAttribute("x",A4);A7.setAttribute("y",A3);A7.setAttribute("width",A5);A7.setAttribute("height",A2);A7.setAttribute("style",A1);this.hExtendGroups(A6);this.hCopyAttribute(this.mAttributes,A7);var Az=A8.getChartInfo();if(A8.objType===17179869184){Az.currentMarkerShape=-2;}this.hSetExtraAttributes(A7,Az);this.mSvg.childNodes[A6+1].appendChild(A7);this.hResetStyleAndAttribute();},CreateSVGSector:function Am(BC,BB,BF,A2,A0,BG,A7,Az){var BE=BG.gc||BG.sPieDP.graphCell,BA=BE.sID,A5=this.getDrawOrder(BA),A8=document.createElementNS(this.mXMLNS,"path"),A9=this.hMoveTo(BC,BB),A6=this.hCalPoint(BC,BB,BF,A2),A3=this.hCalPoint(BC,BB,BF,A0),BD=A0-A2>Math.PI,A4=this.hToCSSStyleStr(),A1=this.hCalPoint(BC,BB,BF/2,(A2+A0)/2);A9+=(" "+this.hLineTo(A6.x,A6.y));A9+=(" "+this.hArcTo(BF,BD,true,A3.x,A3.y));A9+=(" "+this.hClosePath());A8.sX=BC;A8.sY=BB;A8.sR=BF;A8.sRadStart=A2;A8.sRadEnd=A0;A8.sD=A9;A8.sGeoCenterX=A1.x;A8.sGeoCenterY=A1.y;if(BF<=10){A8.setAttribute("size","small");}A8.setAttribute("d",A9);A8.setAttribute("style",A4);A8.identity=BG;this.hExtendGroups(A5);this.hCopyAttribute(this.mAttributes,A8);this.hSetExtraAttributes(A8,BG.getChartInfo());this.mSvg.childNodes[A5+1].appendChild(A8);if(A7){p.call(this,A6,A3,BD,BF,A5,Az,BC,BB);}this.hResetStyleAndAttribute();},CreateSVGRingSector:function k(BE,BD,Az,A9,A3,A0,BG){var BC=BG.isPie?BG.sPieDP.graphCell.sID:BG.gc.sID,A8=this.getDrawOrder(BC),BA=document.createElementNS(this.mXMLNS,"path"),A2=this.hCalPoint(BE,BD,Az,A3),A6=this.hCalPoint(BE,BD,Az,A0),A5=this.hCalPoint(BE,BD,A9,A3),A4=this.hCalPoint(BE,BD,A9,A0),BF=A0-A3>Math.PI,BB=this.hMoveTo(A5.x,A5.y),A7=this.hToCSSStyleStr(),A1=this.hCalPoint(BE,BD,(Az+A9)>>1,(A3+A0)/2);BB+=(" "+this.hArcTo(A9,BF,true,A4.x,A4.y));BB+=(" "+this.hLineTo(A6.x,A6.y));BB+=(" "+this.hArcTo(Az,BF,false,A2.x,A2.y));BB+=(" "+this.hClosePath());BA.sX=BE;BA.sY=BD;BA.sOutR=Az;BA.sInR=A9;BA.sRadStart=A3;BA.sRadEnd=A0;BA.sD=BB;BA.sGeoCenterX=A1.x;BA.sGeoCenterY=A1.y;if(Az<=10){BA.setAttribute("size","small");}BA.setAttribute("d",BB);BA.setAttribute("style",A7);BA.identity=BG;this.hExtendGroups(A8);this.hCopyAttribute(this.mAttributes,BA);this.hSetExtraAttributes(BA,BG.getChartInfo());this.mSvg.childNodes[A8+1].appendChild(BA);this.hResetStyleAndAttribute();BA.setAttribute("class","gm-shape-ring");BA.setAttribute("subtype","ring");},CreateSVGRing:function n(A8,A6,BA,A7,BC){var A0=BC.isPie?BC.sPieDP.graphCell.sID:BC.gc.sID,A9=this.getDrawOrder(A0),A4=document.createElementNS(this.mXMLNS,"path"),A3=this.hCalPoint(A8,A6,BA,Math.PI),BB=this.hCalPoint(A8,A6,BA,0),Az=this.hCalPoint(A8,A6,A7,Math.PI),A2=this.hCalPoint(A8,A6,A7,0),A5=this.hMoveTo(A3.x,A3.y),A1=this.hToCSSStyleStr();A5+=(" "+this.hArcTo(BA,true,true,BB.x,BB.y));A5+=(" "+this.hMoveTo(A2.x,A2.y));A5+=(" "+this.hArcTo(A7,true,false,Az.x,Az.y));A5+=(" "+this.hArcTo(A7,true,false,A2.x,A2.y));A5+=(" "+this.hMoveTo(BB.x,BB.y));A5+=(" "+this.hArcTo(BA,true,true,A3.x,A3.y));A4.sX=A8;A4.sY=A6;A4.sGeoCenterX=A8;A4.sGeoCenterY=A6;A4.sOutR=BA;A4.sInR=A7;A4.setAttribute("d",A5);A4.setAttribute("style",A1);A4.identity=BC;this.hExtendGroups(A9);this.hCopyAttribute(this.mAttributes,A4);this.hSetExtraAttributes(A4,BC.getChartInfo());this.mSvg.childNodes[A9+1].appendChild(A4);this.hResetStyleAndAttribute();},CreateSVGCurves:function h(A8,BA,A4,BJ,BH,A1,BG,A0){var BB,A9,A5=A8.length,A6=document.createElementNS(this.mXMLNS,"path"),A3,BI="",BE=Math.floor(A5/4),A2="",A7,BF,Az,BD,BC=(BH&&(this.mStyle["stroke-width"]<3));this.mStyle.fill="none";if(BC){Az=this.mStyle["stroke-opacity"];BF=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BD=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;A7=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=Az;this.mStyle["stroke-width"]=BF;if(BD){this.mStyle["stroke-dasharray"]=BD;}A3=document.createElementNS(this.mXMLNS,"path");}BB=this.hToCSSStyleStr();this.hCopyAttribute(this.mAttributes,A6);for(A9=0;A9<BE;++A9){if(A9===0){BI="M "+A8[A9].x+","+A8[A9].y+" ";}BI+=("C "+A8[A9*4+1].x+","+A8[A9*4+1].y+" ");BI+=(A8[A9*4+2].x+","+A8[A9*4+2].y+" ");BI+=(A8[A9*4+3].x+","+A8[A9*4+3].y+" ");}A6.identity=BJ;A6.setAttribute("style",BB);A6.setAttribute("d",BI);if(BC){this.hCopyAttribute(this.mAttributes,A3);A3.identity=BJ;A3.setAttribute("style",A7);A3.setAttribute("d",BI);}if(BH){A6.setAttribute("type","trendLine");A6.setAttribute("class","gm-set-trendline");A2="startpoint:"+A1.x+","+A1.y+";";A2+="midpoint:"+BG.x+","+BG.y+";";A2+="endpoint:"+A0.x+","+A0.y;A6.setAttribute("highlightPoints",A2);A6.setAttribute("hover-catcher","0");if(this.mSvg.childNodes.length<=(BA+2)){this.hExtendGroups(BA+1);}this.mSvg.childNodes[BA+2].appendChild(A6);if(BC){A3.setAttribute("type","trendLine");A3.setAttribute("class","gm-set-trendline");A3.setAttribute("highlightPoints",A2);A3.setAttribute("hover-catcher","1");this.mSvg.childNodes[BA+2].appendChild(A3);}}else{if(A4!==-1){if(this.mSvg.childNodes.length<=(A4+1)){this.hExtendGroups(A4);}this.mSvg.childNodes[A4+1].appendChild(A6);this.hSetExtraAttributes(A6,BJ.getChartInfo());}}this.hReset();},CreateSVGPolyLineForTRLine:function z(BA,BC,BH,BG,A2,BE,A0){var BB,A4=document.createElementNS(this.mXMLNS,"polyline"),A1,A5=BA.length,A8="",A6,A9,BF,Az,BD,A7=(this.mStyle["stroke-width"]<3),A3;this.mStyle.fill="none";if(A7){Az=this.mStyle["stroke-opacity"];BF=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BD=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;A9=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=Az;this.mStyle["stroke-width"]=BF;if(BD){this.mStyle["stroke-dasharray"]=BD;}A1=document.createElementNS(this.mXMLNS,"polyline");}A6=this.hToCSSStyleStr();for(BB=0;BB<A5;++BB){A8+=(BA[BB].x+","+BA[BB].y+" ");}A4.identity=BH;A4.setAttribute("points",A8);A4.setAttribute("style",A6);if(BG){A4.setAttribute("type","trendLine");A4.setAttribute("class","gm-set-trendline");}else{A4.setAttribute("type","referenceLine");A4.setAttribute("class","gm-set-referenceline");}A3="startpoint:"+A2.x+","+A2.y+";";A3+="midpoint:"+BE.x+","+BE.y+";";A3+="endpoint:"+A0.x+","+A0.y;A4.setAttribute("highlightPoints",A3);A4.setAttribute("hover-catcher","0");this.hCopyAttribute(this.mAttributes,A4);if(this.mSvg.childNodes.length<=(BC+2)){this.hExtendGroups(BC+1);}this.mSvg.childNodes[BC+2].appendChild(A4);if(A7){A1.identity=BH;A1.setAttribute("points",A8);A1.setAttribute("style",A9);if(BG){A1.setAttribute("type","trendLine");A1.setAttribute("class","gm-set-trendline");}else{A1.setAttribute("type","referenceLine");A1.setAttribute("class","gm-set-referenceline");}A1.setAttribute("hover-catcher","1");this.hCopyAttribute(this.mAttributes,A1);this.mSvg.childNodes[BC+2].appendChild(A1);}this.hReset();},hCalPoint:function AP(Az,A4,A2,A3){var A1=Az+A2*Math.cos(A3),A0=A4+A2*Math.sin(A3);return{x:A1,y:A0};},hMoveTo:function Y(Az,A0){return"M "+Az+" "+A0;},hLineTo:function Aw(Az,A0){return"L "+Az+" "+A0;},hArcTo:function AS(A1,A0,A3,Az,A2){return"A "+A1+","+A1+" 0 "+(A0?"1":"0")+","+(A3?"1 ":"0 ")+Az+","+A2;},hClosePath:function AK(){return"Z";},hRelMoveTo:function I(Az,A2,A0,A1){return"m "+Az+" "+A2;},hRelArcTo:function AS(A1,A0,A3,Az,A2){return"a "+A1+","+A1+" 0 "+(A0?"1":"0")+","+(A3?"1 ":"0 ")+Az+","+A2;},hExtendGroups:function(A2){var A1,A0=this.mSvg,Az=A0.childNodes,A3=Az.length-1;while(A3<=A2){A1=document.createElementNS(this.mXMLNS,"g");A0.appendChild(A1);A3++;}},CreateSVGPolyLine:function AH(A0,BD,A1,A5){var A4,A6=this.getDrawOrder(A0);var A9=0,A3=1,BC=2,A8=3,A2=4,Az=5;A5=A5||A9;this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A0;switch(A5){case A9:break;case A3:break;case BC:break;case A8:break;case A2:this.mAttributes["class"]="gm-set-originline";this.mAttributes.type="originLine";if(BD[0].x===BD[1].x){this.mAttributes.subtype="v";}else{this.mAttributes.subtype="h";}break;case Az:this.mAttributes.subtype="ticker";this.mAttributes.type="shape";this.mAttributes["class"]="gm-shape-ticker";break;default:break;}this.hExtendGroups(A6);A4=this.mSvg.childNodes[A6+1];var BB=this.hCreateSVGPolyline(BD,A4);if(A5===Az||A5===A2){if(A1.length){BB.identity=A1[0];}if(A5===Az){if(BD.length>=2){var BA=BD[0],A7=BD[1];BB.tickerCenter={x:Math.round(0.5*(BA.x+A7.x)),y:Math.round(0.5*(BA.y+A7.y))};}}}this.hResetStyleAndAttribute();},CreateSVGPolylineWithCircles:function AB(A5,A0,A4){var A1,A3,Az,A2,A6=this.getDrawOrder(A5);this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A5;this.hExtendGroups(A6);A2=this.mSvg.childNodes[A6+1];this.hCreateSVGPolyline(A0,A2);for(A1=0;A1<A0.length;++A1){A3=document.createElementNS(this.mXMLNS,"circle");Az=A4[A1];A3.identity=Az;A3.setAttribute("cx",A0[A1].x);A3.setAttribute("cy",A0[A1].y);A3.setAttribute("r","5.5");A3.style.fill=this.mStyle.stroke;this.hCopyAttribute(this.mMarkerAttributes,A3);A3.setAttribute("class","gm-shape-scircle");A3.setAttribute("type","shape");A3.setAttribute("subtype","scircle");A2.appendChild(A3);}this.hResetStyleAndAttribute();},hCreateSVGPolyline:function f(A1,A3){this.mStyle.fill="none";var A2,A0=document.createElementNS(this.mXMLNS,"polyline"),Az=A1.length,A4="",A5=this.hToCSSStyleStr();A0.pointList=A1;for(A2=0;A2<Az;++A2){A4+=(A1[A2].x+","+A1[A2].y+" ");}A0.setAttribute("points",A4);A0.setAttribute("style",A5);this.hCopyAttribute(this.mAttributes,A0);A3.appendChild(A0);return A0;},CreateSVGPolygonWithCircles:function AV(A0,A8,A1){var A2,A6,Az,A5,A4,A7;A7=x.call(this,A0,A8);A6=A7.Polygon;A4=A7.Group;var A3=A8.length;if((A3&1)!==0){return ;}for(A2=0;A2<A3/2;++A2){Az=document.createElementNS(this.mXMLNS,"circle");A5=A1[A2];Az.identity=A5;Az.setAttribute("cx",A8[A2].x);Az.setAttribute("cy",A8[A2].y);Az.setAttribute("r","5.5");Az.style.fill=this.mStyle.fill;this.hCopyAttribute(this.mMarkerAttributes,Az);Az.setAttribute("class","gm-shape-scircle");Az.setAttribute("type","shape");Az.setAttribute("subtype","scircle");A4.appendChild(Az);}A6.chartInfo=A5.getChartInfo();this.hResetStyleAndAttribute();},CreateSVGPolygonWithTrapezoid:function r(BE,A6,A3){var BD,A8,A9,Az,BK,BA,A7,BC,A5;A7=x.call(this,BE,A6);A8=A7.Polygon;BA=A7.Group;var BF=A6.length;if((BF&1)!==0||BF<4){return ;}BC=BF/2;var BH,BG,BJ,A2,BI,A1,A4,BB,A0;for(BD=0;BD<BC;++BD){BJ=A2=BI=A1=null;A5=[];BH=A6[BD];BG=A6[BF-1-BD];if(BD!==0){BJ=A6[BD-1];A2=A6[BF-BD];}if(BD!==BC-1){BI=A6[BD+1];A1=A6[BF-2-BD];}if(BJ){BJ={x:0.5*(BJ.x+BH.x),y:0.5*(BJ.y+BH.y)};}if(A2){A2={x:0.5*(A2.x+BG.x),y:0.5*(A2.y+BG.y)};}if(BI){BI={x:0.5*(BI.x+BH.x),y:0.5*(BI.y+BH.y)};}if(A1){A1={x:0.5*(A1.x+BG.x),y:0.5*(A1.y+BG.y)};}A4=[BJ,BH,BI,A1,BG,A2];for(BB=0;BB<A4.length;BB++){if(A4[BB]){A5.push(A4[BB]);}}A0=J.call(this,A5);if(A0&&A3[BD]){A0.identity=A3[BD];}A0.setAttribute("class","gm-shape-sbar");A0.setAttribute("type","shape");A0.setAttribute("subtype","sbar");this.hCopyAttribute(q,A0);BA.appendChild(A0);}A8.chartInfo=A9;this.hResetStyleAndAttribute();},CreateSVGPolygonWithRects:function L(A0,A9,A1){var A2,A7,Az,A6,A5,A4,A8;A8=x.call(this,A0,A9);A7=A8.Polygon;A4=A8.Group;var A3=A9.length;if((A3&1)!==0){return ;}for(A2=0;A2<A3/2;++A2){A6=document.createElementNS(this.mXMLNS,"rect");A5=A1[A2];Az=A5.getChartInfo();A6.identity=A5;if(Az.dirc===1){A6.setAttribute("x",(A9[A2].x).toString());A6.setAttribute("y",String(A9[A2].y-3));A6.setAttribute("width",(A9[A3-A2-1].x-A9[A2].x).toString());A6.setAttribute("height","6");}else{A6.setAttribute("x",(A9[A2].x-3).toString());A6.setAttribute("y",A9[A2].y);A6.setAttribute("width","6");A6.setAttribute("height",(A9[A3-A2-1].y-A9[A2].y).toString());}this.hCopyAttribute(this.mMarkerAttributes,A6);A6.setAttribute("class","gm-shape-sbar");A6.setAttribute("type","shape");A6.setAttribute("subtype","sbar");A4.appendChild(A6);}A7.chartInfo=Az;this.hResetStyleAndAttribute();},hManipulateTextElements:function u(A1){if(A1.Tooltip){var A0=0,Az,A3=this.mElements,A2=A3.length;while(A0<A2){Az=A3[A0];if(Az.Tag&&Az.Tag==="tspan"){Az.Tooltip=A1.Tooltip;}A0++;}}},CreateSVGAxisText:function V(A2,A0,Az){var A1=this.hToCSSStyleStr(),A3=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A3);A3.setAttribute("style",A1);A3.setAttribute("type","axis-text");if(Az){A3.identity=Az;}this.hManipulateTextElements({Tooltip:A0});this.hCopyTextElements(A3,"axis-word");var A4=this.getDrawOrder(A2);this.hExtendGroups(A4);this.mSvg.childNodes[A4+1].appendChild(A3);this.hReset();},CreateSVGBannerText:function Ak(A1,Az){var A0=this.hToCSSStyleStr(),A2=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A2);A2.setAttribute("style",A0);A2.setAttribute("type","banner-text");if(Az){A2.identity=Az;}this.hCopyTextElements(A2,"banner-text");var A3=this.getDrawOrder(A1);this.hExtendGroups(A3);this.mSvg.childNodes[A3+1].appendChild(A2);this.hReset();},CreateSVGGenericText:function Ag(A2,Az,A1){var A0=this.hToCSSStyleStr(),A3=document.createElementNS(this.mXMLNS,"text");A1=A1||"data-label";if(!!Az){A3.identity=Az;}this.hCopyAttribute(this.mAttributes,A3);A3.setAttribute("style",A0);this.hCopyTextElements(A3,A1);if(A2){if(this.mSvg.childNodes.length<=(A2+2)){this.hExtendGroups(A2+1);}this.mSvg.childNodes[A2+2].appendChild(A3);}else{this.mG.appendChild(A3);}this.hReset();},hCopyTextElements:function d(A7,A4){A4=A4||"axis-word";var A3,Az,A0=0;for(A3=0;A3<this.mElements.length;A3++){var A1=this.mElements[A3];if(A1){if(A1.Type==="text"){var A5=document.createElementNS(this.mXMLNS,A1.Tag),A2=A1.Attributes;for(Az in A2){A5.setAttribute(Az,A2[Az]);}A5.setAttribute("type",A4);if(A4==="axis-word"){A5.setAttribute("Index",A0);A0++;}A5.setAttribute("class","gm-tspan");A5.textContent=A1.Content;if(A1.Tooltip){var A6=document.createElementNS(this.mXMLNS,"title");A6.textContent=A1.Tooltip;A5.appendChild(A6);}if(A1.Style){A5.setAttribute("style",A1.Style);}A7.appendChild(A5);}else{if(A1.Type==="BBox"){if(A1.Node){this.mG.appendChild(A1.Node);}}}}}},CreateSVGPolygon:function s(Az,A0,A3){var A2,A4=this.getDrawOrder(Az);var A1=this.hCreateSVGPolygon(A0,A3);this.hExtendGroups(A4);A2=this.mSvg.childNodes[A4+1];A2.appendChild(A1);this.mG.appendChild(A1);this.hResetStyleAndAttribute();},hCreateSVGPolygon:function B(Az,A3){var A1,A2=this.hToCSSStyleStr(),A4=Az.length,A0=J.call(this,Az);A0.points=Az;if(A3!==undefined){A0.identity=A3;}A0.setAttribute("style",A2);this.hCopyAttribute(this.mAttributes,A0);return A0;},AddArc:function As(Az,A4,A3,A0,A2,A1){},AddNeedle:function At(A1,A2,Az,A0){},AddString:function Aa(A0,Az){},FillSimple:function Al(A0,A2,A1,Az){this.mStyle.fill=this.hToCSSColorStr(A1);this.mStyle["fill-opacity"]=A0.mAlpha/255;},FillPattern:function C(Az){},FillGradient:function T(A6,A1,A0){var A4,A8,A2,A5,A3=A6.getGradient();switch(A3.gradientType){case Aq.DssGraphGradientLinear:if(A1.width===0||A1.height===0){return ;}A8=document.createElementNS(this.mXMLNS,"linearGradient");A8.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A8.setAttribute("x1","0%");A8.setAttribute("y1","0%");if(A3.angle===0){A8.setAttribute("x2","100%");A8.setAttribute("y2","0%");}else{A8.setAttribute("x2","0%");A8.setAttribute("y2","100%");}A5=this.hCreateLinearGradientStop(0,A3.startGraphColor,A6.mAlpha/255);A8.appendChild(A5);for(A4=0;A4<A3.intermediateColors.length;++A4){var A7=A3.intermediateColors[A4];A5=this.hCreateLinearGradientStop(A7.Step,A7.Color,A6.mAlpha/255);A8.appendChild(A5);}A5=this.hCreateLinearGradientStop(1,A3.endGraphColor,A6.mAlpha/255);A8.appendChild(A5);this.mDefs.appendChild(A8);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case Aq.DssGraphGradientCircular:A2=document.createElementNS(this.mXMLNS,"radialGradient");A2.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A2.setAttribute("cx",String(A1.cx));A2.setAttribute("cy",String(A1.cy));A2.setAttribute("r",String(A1.r));A2.setAttribute("gradientUnits","userSpaceOnUse");A2.setAttribute("fx",String(A1.fx));A2.setAttribute("fy",String(A1.fy));var Az=A1.startStop||0;A5=this.hCreateLinearGradientStop(Az,A3.startGraphColor,A6.mAlpha/255);A2.appendChild(A5);A5=this.hCreateLinearGradientStop(1,A3.endGraphColor,A6.mAlpha/255);A2.appendChild(A5);this.mDefs.appendChild(A2);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case Aq.DssGraphGradientRectangular:break;}},hCreateLinearGradientStop:function AR(A3,A1,A2){var A0=document.createElementNS(this.mXMLNS,"stop"),Az="stop-color:"+this.hToCSSColorStr(A1)+";stop-opacity:"+A2;A0.setAttribute("offset",A3*100+"%");A0.setAttribute("style",Az);return A0;},FillEdgeType:function Ax(Az,A0){},FillRadientGradient:function Ao(A5,A6,A3,A2,A7,Az,A0,A4,A1){},FillBorderMetallic:function Av(A1,Az,A3,A2,A4,A0){},FillDonutOrSphere:function Ar(Az,A0,A1){},MakeDarker:function R(A0,Az){},RestoreColor:function a(Az){},ApplyLineFormat:function j(A0){var A1=A0.getGradient();if(A1&&A1.valid&&A1.style===1){this.StrokeGradient(A1);m.call(this,A1.strokePatten,A0.mLineThickness);}else{var Az=this.mStyle;Az.stroke=this.hToCSSColorStr(A0.mLineColor);m.call(this,A0.mLineStyle,A0.mLineThickness);}this.mStyle["stroke-opacity"]=A0.mAlpha/255;},StrokeGradient:function AI(A5){var A1=document.createElementNS(this.mXMLNS,"linearGradient");A1.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A1.setAttribute("x1","0%");A1.setAttribute("y1","0%");if(A5.angle===0){A1.setAttribute("x2","100%");A1.setAttribute("y2","0%");}else{A1.setAttribute("x2","0%");A1.setAttribute("y2","100%");}var A2,Az=A5.colors[0].Color,A4=A5.colors[A5.colors.length-1].Color,A0=this.hCreateLinearGradientStop(0,Az,A5.endAlpha/255);A1.appendChild(A0);for(A2=1;A2<A5.colors.length-1;++A2){var A3=A5.colors[A2];A0=this.hCreateLinearGradientStop(A3.Step,A3.Color,A5.endAlpha/255);A1.appendChild(A0);}A0=this.hCreateLinearGradientStop(1,A4,A5.endAlpha/255);A1.appendChild(A0);this.mDefs.appendChild(A1);this.mStyle.stroke="url(#"+this.gradPrefix+(this.mGradientCount++)+")";},AddFormatedText:function e(A3,Az,A1,A2){var A0={Type:"text",Tag:"tspan",Attributes:{x:Az.x,y:Az.y},Content:A1};if(A2&&A2.BaselineOffset){A0.Attributes.y-=A2.BaselineOffset-0.5;A0.Style="dominant-baseline:central";}this.mElements.push(A0);},ApplyBeveledFrameToRectangle:function K(A0,A4,Az,A1,A3,A2,A5){},DrawGaugeMarker:function AX(A2,A0,A3,Az,A1){},ApplyDonutToRect:function AW(Az,A1,A0){},BeginFirstFrame:function AF(){},BeginLastFrame:function v(){},EndFrame:function Ac(){},EndUnit:function H(){},hToCSSColorStr:function AE(A0){var Az=true;if(typeof A0==="number"){if(Az){M.mR=A0&255;M.mG=(A0&65280)>>8;M.mB=(A0&16711680)>>16;}else{M.mB=A0&255;M.mG=(A0&65280)>>8;M.mR=(A0&16711680)>>16;}}else{return"rgb("+A0.mR+","+A0.mG+","+A0.mB+")";}return"rgb("+M.mR+","+M.mG+","+M.mB+")";},hToCSSStyleStr:function g(){var A1,A0=this.mStyle,Az="";for(A1 in A0){if(A0.hasOwnProperty(A1)){Az=Az+A1+":"+A0[A1]+";";}}return Az.substr(0,Az.length-1);},hCopyAttribute:function AA(A1,Az){var A0;for(A0 in A1){if(A1.hasOwnProperty(A0)){Az.setAttribute(A0,A1[A0]);}}},hResetStyle:function Ay(){this.mStyle={};},hResetElements:function AZ(){this.mElements=[];},hResetAttribute:function AL(){this.mAttributes={};this.mMarkerAttributes={};},hResetStyleAndAttribute:function w(){this.hResetStyle();this.hResetAttribute();},hReset:function Ai(){this.hResetStyle();this.hResetAttribute();this.hResetElements();},hTranslateMarkerShape:function(Az,A0){var A1="";Az=Az||0;switch(Az){case -2:A1="markerRect";break;case -1:A1="markerCircle";break;case 0:if(A0===1){A1="area";}else{if(A0===2){A1="bar";}else{if(A0===3){A1="line";}}}break;case 4:A1="circle";break;case 24:A1="square";break;case 200:A1="ticker";break;case 201:A1="pie";break;case 202:A1="ring";break;case 204:A1="line";break;case 205:A1="bar";break;case 206:A1="area";break;default:break;}return A1;},hSetExtraAttributes:function(A5,A1,A8){var A6="",A3="shape",A0="",A7=A1.tp,A4=0,A2=A1.currentMarkerShape,A9=A8||(this.hTranslateMarkerShape(A2,A7)||"bar"),Az=A1.hasSizeBy;if(A9==="line"&&Az){A9+="-sizeby";}if(A7===4||A7===5){A4=1;}else{if(A7===7){A4=2;}}if(o.hasOwnProperty(A9)){A6=o[A9][A4];}if(t.hasOwnProperty(A9)){A0=t[A9][A4];}A5.setAttribute("class",A6);A5.setAttribute("type",A3);A5.setAttribute("subtype",A0);},ApplyFontFormat:function b(BA){var Az=this.mStyle,A5=BA.mFontStyle;if(A5!==undefined){var A4=0,A8=1,A1=2,A9=3,A7=4,A2=8;Az["text-decoration"]="none";Az["font-weight"]="normal";if(!!(A5&A8)){Az["font-weight"]="bold";}if(!!(A5&A1)){Az["font-style"]="italic";}if(!!(A5&A7)&&!!(A5&A2)){Az["text-decoration"]="underline line-through";}else{if(!!(A5&A7)){Az["text-decoration"]="underline";}if(!!(A5&A2)){Az["text-decoration"]="line-through";}}}if(BA.mFontAlignment){var A6=0,A0=1,A3=2;switch(BA.mFontAlignment){case A6:Az["text-anchor"]="start";break;case A0:Az["text-anchor"]="middle";break;case A3:Az["text-anchor"]="right";break;}}Az["text-anchor"]="start";if(BA.mFontColor){Az.fill=this.hToCSSColorStr(BA.mFontColor);}if(G.isValidNumber(BA.mStrokeColor)){Az.stroke=this.hToCSSColorStr(BA.mStrokeColor);}if(BA.mStrokeWidth){Az["stroke-width"]=BA.mStrokeWidth;}if(BA.mFontAlpha){Az["fill-opacity"]=BA.mFontAlpha;}if(BA.mFontName){Az["font-family"]=BA.mFontName;}if(BA.mFontSize){Az["font-size"]=BA.mFontSize+"pt";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.hash");mstrmojo.requiresCls("mstrmojo.VisEnum");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Vector2D","Point2D","CEModuleMain","TripleId","FormatLine","JSONCanvas","SVGCanvas","GraphMatrixContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumPictureFormatType","EnumGraphMajorType","EnumLineJoinType","EnumLineStyle","EnumImageUsage","EnumDSSExtraGraphObject","EnumChartStyle","EnumGraphMatrixMajorGraphType","EnumGraphMatrixThemeType","EnumDssGraphGridChartUniformColorMode","EnumAttachedPointsStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumVariantBool","EnumDSSGraphFillEffect");var CE=mstrmojo.chart,Bq=CE.enums,d=Bq.EnumPictureFormatType,g=Bq.EnumGraphMajorType,A1=Bq.EnumLineJoinType,AU=Bq.EnumImageUsage,Ak=CE.common.Utility,j=CE.gModuleMain,CA=CE.gNullTripleId,AX=CE.gNullSeriesId,M=CE.gNullGroupId,BY=Bq.EnumLineStyle,Bi=Bq.EnumDSSExtraGraphObject,H=Bq.EnumChartStyle,a=Bq.EnumGraphMatrixMajorGraphType,BA=Bq.EnumGraphMatrixThemeType,C=Bq.EnumAttachedPointsStyle,Ah=mstrmojo.VisEnum.ControlType,Ae=mstrmojo.hash;var Ax=700,BX=400,Ab=-16383,J=16383,BS=-16383,y=16383,AC=500,Ap=0.1667,BO=96,T=72;var B8=mstrmojo.chart.model,At=B8.enums,Be=At.EnumDSSGraphType,Bg=At.EnumDSSGraphProperty,Bh=At.EnumDSSGraphObject,Z=At.EnumDSSGraphFillBevelEffect,Bz=At.EnumDSSGraphFillEffect;var t=[],AO=new CE.TripleId();var BV=mstrmojo.chart.ChartContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartContext",mBaseLayerObject:null,mPropertyMap:null,mGraphWidth:j.mDefaultGraphWidth,mGraphHeight:j.mDefaultGraphHeight,mGraphType:Be.DssGraphTypeReserved,mDataset:null,mFormatManager:null,mCanvas:null,mCanvasInfo:null,caKeyMap:null,mLineJoinType:A1.LJT_MITER,mIsLineWidthOdd:false,mAbsoluteFontLineSize:true,mIsFontAntiAlias:true,mFontScaleRatio:1,mAxisAutoNumberFormat:null,mSelectedAxisAutoNumberFormat:null,mThresholdColorCache:{},globalFormats:null,mManualLayoutMode:false,mRecalculateFrame:true,mIsValueAxisShown:true,mUseAnimation:false,mIsTimeSeriesChart:false,mIsUniformAxisMode:false,mIsEntireChart:true,mIsGraphMatrix:false,mThemeType:BA._black,mUniformAxisContext:null,mpGraphMatrixContext:null,mPartialRendering:false,mRenderingWindow:null,mImageUsage:AU.GENERAL,mImageFormat:d.SVG,mDebugUseNewProperties:true,mTimers:[],mUseTimer:false,init:function CL(CT){this._super(CT);this.caKeyMap={c1:"x1",c2:"x1"};this.mUseTimer=CT.UseTimer||false;this.mGraphWidth=j.mDefaultGraphWidth;this.mGraphHeight=j.mDefaultGraphHeight;this.mDataset=CT.DataSet||CT.mDatasetPtr||null;this.mThemeType=BA._black;this.mSelectedAxisAutoNumberFormat={Array:[],Format:null};},getUtiliy:function Aj(){return mstrmojo.chart.common.Utility;},populateCanvas:function AV(CU){CU=CU||false;if(CU){this.mCanvas=null;}if(!!this.mCanvas){return ;}var CT="SVG";if(this.mCanvasInfo){CT=this.mCanvasInfo.type||"SVG";delete this.mCanvasInfo.type;}else{this.mCanvasInfo={type:"SVG",gradPrefix:"gmGrad",mGradientCount:0,seriesDrawOrder:this.mDataset.GetSeriesIndexByPriority()};}switch(CT){case"JSON":this.mCanvas=new CE.JSONCanvas({});break;default:this.mCanvas=new CE.SVGCanvas(this.mCanvasInfo);break;}this.mCanvasInfo=null;},startTimer:function Bs(CU){if(this.mUseTimer){var CT=CU.functionName+": "+CU.purpose;console.time(CT);this.mTimers.push(CT);}},endTimer:function Bu(){if(this.mUseTimer){var CT=this.mTimers.pop();if(CT){console.timeEnd(CT);}}},vdWidth:function Bl(CT){return Math.floor(CT*this.mGraphWidth/Ax+0.5);},vdHeight:function B9(CU){var CT=this.mGraphHeight;if(this.mIsUniformAxisMode&&!this.mIsEntireChart){CT=this.mUniformAxisContext.mGraphHeight;}return Math.floor(CU*CT/BX+0.5);},NeedAdjustedLinePath:function Bj(){var CT=this.mImageFormat;return this.mIsLineWidthOdd&&(CT!==d.PDF);},SetGraphSize:function AW(CU,CT){if(CU>0&&CT>0){this.mGraphWidth=CU;this.mGraphHeight=CT;if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}}},GetGraphType:function A3(){return this.mGraphType;},dialogSizeToPixelSize:function v(CT){return CT*Math.min(this.mGraphWidth,this.mGraphHeight)/2000;},DrawPolygon:function Bv(CV,CY,CW,CX,CU){if(this.mImageFormat===d.SVG){return ;}if((CY===undefined)||(CY===null)){CY=true;}CW=CW||false;CX=CX||null;CU=CU||BY.LS_SOLID;if(CV.length<3){return ;}this.NewPath();if(CY&&this.NeedAdjustedLinePath()){var CT=this.hAdjustLinePath(CV);this.DrawPolyLine(CT,false,CW,CX,CU);}else{this.DrawPolyLine(CV,false,CW,CX,CU);}this.ClosePath();},DrawStraightLine:function AZ(CV,CT){if(this.mImageFormat===d.SVG){return ;}this.NewPath();if(this.NeedAdjustedLinePath()){var CU=0,CW=0;if(CV.x===CT.x){CU=0.5;}if(CV.y===CT.y){CW=0.5;}this.hMoveTo(CV.x+CU,CV.y+CW,true);this.hLineTo(CT.x+CU,CT.y+CW,true);}else{this.hMoveTo(CV.x,CV.y,true);this.hLineTo(CT.x,CT.y,true);}},DrawPolyLine:function AP(Ca,CZ,CW,CT,CY){if(this.mImageFormat===d.SVG){return ;}if((CZ===undefined)||(CZ===null)){CZ=true;}CW=CW||false;CT=CT||null;CY=CY||BY.LS_SOLID;if(CY===BY.LS_GRADIENT){CY=BY.LS_SOLID;}var Cb=Ca.length,CX,CU,Cc;if(Cb<=0){return ;}var CV;if(this.NeedAdjustedLinePath()){CV=this.hAdjustLinePath(Ca);}Cb=CV.length;this.NewPath();this.hMoveTo(CV[0].x,CV[0].y,CZ,CW,CT);CU=0;for(CX=1;CX<Cb;++CX){if(CY===BY.LS_SOLID){this.hLineTo(CV[CX].x,CV[CX].y,CZ,CW,CT);}else{Cc=CE.gLinePatterns[CY];this.DrawDashedLine(CV[CU],CV[CX],Cc);}CU=CX;}},DrawDashedLine:function CG(CV,Cc,Ca){if(this.mImageFormat===d.SVG){return ;}var CW,Cd,Cb,CX,Ce,CT=0,CY=0,CZ,CU;CW=Math.sqrt((CV.x-Cc.x)*(CV.x-Cc.x)+(CV.y-Cc.y)*(CV.y-Cc.y));Cd=(Cc.x-CV.x)/CW;Cb=(Cc.y-CV.y)/CW;CZ=Ca.length;CX=CV.x;Ce=CV.y;while(CT<CW){CU=Math.min(Ca[CY%CZ],CW-CT);++CY;CT+=CU;if(CY%2===1){this.MoveTo(CX,Ce);}CX+=CU*Cd;Ce+=CU*Cb;if(CY%2===1){this.LineTo(CX,Ce);}}},isParetoChart:function BJ(){return this.mGraphType===Be.DssGraphTypePareto||this.mGraphType===Be.DssGraphTypePareto_Percent;},isCombinationChart:function S(){var CT=this.GetGraphMatrixContext();return this.mIsGraphMatrix&&CT.isCombinationChart();},hasBarAreaInComb:function Az(){if(this.isCombinationChart()===false){return false;}var CT=this.mDatasetPtr.GetSeriesByShape();return CT.Bar.length>0||CT.Area.length>0;},getFontScale:function Ad(){if(this.mAbsoluteFontLineSize){return this.mFontScaleRatio;}return 1;},vdRect:function r(CT){return(new CE.Rect2D({x:this.vdWidth(CT.x),y:this.vdHeight(CT.y),width:this.vdWidth(CT.width),height:this.vdHeight(CT.height)}));},vdPoint:function CF(CT){return(new CE.Point2D({x:this.vdWidth(CT.x),y:this.vdHeight(CT.y)}));},vdFontSize:function B2(CT){var CV=CT;if(this.mIsGraphMatrix){return CV;}if(!this.mAbsoluteFontLineSize){CV=this.vdHeight(CV);}if(!this.mIsTimeSeriesChart){CV=this.PtSizeToPixelSize(CV);CV*=this.getFontScale();if(this.mIsGraphMatrix){var CU=this.mDataset.GetZoomScale();CV=CV*CU+0.5;}if(CV===0){CV=1;}}return CV;},vdLineWidth:function A6(CU){var CT=CU;if(!this.mAbsoluteFontLineSize){CT=this.vdHeight(CT);}CT=this.PtSizeToPixelSize(CT);CT=Math.floor(CT/100+0.5);return CT;},TDGToMSTRPoint:function BK(CV,CU){var CT,CW;CT=Math.floor((CV-Ab)*this.mGraphWidth/(J-Ab)+0.5);CW=Math.floor((y-CU)*this.mGraphHeight/(y-BS)+0.5);return(new CE.Point2D({x:CT,y:CW}));},setCanvas:function AT(CT){this.mCanvas=CT;},saveState:function Ba(){this.mCanvas.saveState();},Rotate:function CC(CT,CU){this.mCanvas.Rotate(CT,CU);},Scale:function BU(CT,CU){this.mCanvas.Scale(CT,CU);},RestoreState:function W(){this.mCanvas.RestoreState();},Clip:function Bm(){this.mCanvas.Clip();},DrawRectangle:function N(CT,CU){if(this.mImageFormat===d.SVG){return ;}this.NewPath();if(CU&&this.NeedAdjustedLinePath()){this.mCanvas.AddRect(CT.x+0.5,CT.y+0.5,CT.width,CT.height);}else{this.mCanvas.AddRect(CT.x,CT.y,CT.width,CT.height);}},FinishTextBoundingBox:function L(CU,CT,CW){var CV=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){this.mCanvas.CreateSVGTextBoundingBox(CU,CT,CW,CV);}},FinishDrawCircle:function A4(CU,CV){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CT=this.hGetIdentity(CV.mSeriesId,CV.mGroupId);this.mCanvas.CreateSVGCircle(CU.x,CU.y,CU.r,CT);}},FinishDrawRect:function Ao(CU,CV){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CT;if(CV.mObjectId===Bh.DssGraphDataMarker){CT=this.hGetIdentityEx(CV.mSeriesId,CV.mGroupId,"marker");}else{CT=this.hGetIdentity(CV.mSeriesId,CV.mGroupId);}if(this.NeedAdjustedLinePath()){CU.x=parseInt(CU.x)===CU.x?CU.x+0.5:CU.x;CU.y=parseInt(CU.y)===CU.y?CU.y+0.5:CU.y;}this.mCanvas.CreateSVGRect(CU.x,CU.y,CU.width,CU.height,CT);}},FinishDrawPieSlice:function B4(CU,CY,CT,CX,Ca,CZ,CW){var CV;if(CZ===undefined){CZ=false;}if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(Ca.angleByIndex!==undefined){CV=this.hGetPieIdentity(Ca.mSeriesId,Ca.mGroupId,Ca.angleByIndex,Ca.sliceById);}else{CV=this.hGetIdentity(Ca.mSeriesId,Ca.mGroupId);}if(CZ){this.mCanvas.CreateSVGCircle(CU.x,CU.y,CY,CV,CW,this.mThemeType===BA._white);}else{this.mCanvas.CreateSVGSector(CU.x,CU.y,CY,CT,CX,CV,CW,this.mThemeType===BA._white);}}},FinishDrawRingPieSlice:function q(CU,CY,CX,CT,CW,CZ){var CV;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(CZ.angleByIndex!==undefined){CV=this.hGetPieIdentity(CZ.mSeriesId,CZ.mGroupId,CZ.angleByIndex,CZ.sliceById);}else{CV=this.hGetIdentity(CZ.mSeriesId,CZ.mGroupId);}this.mCanvas.CreateSVGRingSector(CU.x,CU.y,CY,CX,CT,CW,CV);}},FinishDrawRing:function BE(CY,CX,CT,CU,CV){CV=CV||false;var CW;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(CV){CW=this.hGetPieIdentity(CU.mSeriesId,CU.mGroupId,CU.angleByIndex,CU.sliceById);}else{CW=this.hGetIdentity(CU.mSeriesId,CU.mGroupId);}this.mCanvas.CreateSVGRing(CY.x,CY.y,CX,CT,CW);}},FinishDrawPolyline:function CP(Ch,CU,Cd,Cb,CV,Ce,CX){var CZ=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){Cd=Cd||false;var Cg=0,Ca=1,Cj=2,Cf=3,CY=4,Ci,Cc=CU.mObjectId,CW=this.mCanvas;var CT=Ch;if(this.NeedAdjustedLinePath()){CT=this.hAdjustLinePath(Ch);}switch(Cc){case Bh.DssGraphUserLine1:case Bh.DssGraphUserLine2:case Bh.DssGraphUserLine3:case Bh.DssGraphUserLine4:Cb=this.hGetIdentityEx(Cc-Bh.DssGraphUserLine1,0,"originLine");if(Cb){Ci=[Cb];}else{Ci=[];}CW.CreateSVGPolyLine(CU.mSeriesId,CT,Ci,CY);break;case Bh.DssGraphO1Major:case Bh.DssGraphO2Major:case Bh.DssGraphY1Major:case Bh.DssGraphY2Major:case Bh.DssGraphX1Major:case Bh.DssGraphX2Major:case Bh.DssGraphO1Minor:case Bh.DssGraphO2Minor:case Bh.DssGraphY1Minor:case Bh.DssGraphY2Minor:case Bh.DssGraphX1Minor:case Bh.DssGraphX2Minor:Ci=[];CW.CreateSVGPolyLine(CU.mSeriesId,CT,Ci,Cj);break;case Bh.DssGraphO1Body:case Bh.DssGraphO2Body:case Bh.DssGraphX1Body:case Bh.DssGraphX2Body:case Bh.DssGraphY1Body:case Bh.DssGraphY2Body:Ci=[];CW.CreateSVGPolyLine(CU.mSeriesId,CT,Ci,Cf);break;case Bh.DssGraphTrendLine:CW.CreateSVGPolyLineForTRLine(Ch,CZ,Cb,true,CV,Ce,CX);break;default:if(Cd){Ci=[];CW.CreateSVGPolyLine(CU.mSeriesId,CT,Ci,Cg);}else{Ci=this.hGetIdentities(CU.mSeriesId,CU.mGroupId,Ch.length);CW.CreateSVGPolylineWithCircles(CU.mSeriesId,CT,Ci);}break;}}},FinishDrawTickerShape:function Bw(CX,CV,CY){var CW=[CX,CV],CT=this.mCanvas;if(CT instanceof mstrmojo.chart.SVGCanvas){var CU=this.hGetIdentities(CY.mSeriesId,CY.mGroupId,1);CT.CreateSVGPolyLine(CY.mSeriesId,CW,CU,5);}},FinishDrawStraightLine:function X(CU,CZ,CT,CX,CY){var CW=this.mDataset.GetSeriesCount(),Ca=[CU],CV=this.mCanvas;Ca.push(CZ);if(this.NeedAdjustedLinePath()){Ca=this.hAdjustLinePath(Ca);}if(CV instanceof mstrmojo.chart.SVGCanvas){if(CX){if(CT.mObjectId===Bh.DssGraphTrendLine){CV.CreateSVGPolyLineForTRLine(Ca,CW,CX,true,CU,CY,CZ);}else{if(CT.mObjectId===Bh.DssGraphReferenceLine){CV.CreateSVGPolyLineForTRLine(Ca,CW,CX,false,CU,CY,CZ);}}}else{switch(CT.mObjectId){case Bh.DssGraphO1Body:case Bh.DssGraphO2Body:case Bh.DssGraphX1Body:case Bh.DssGraphX2Body:case Bh.DssGraphY1Body:case Bh.DssGraphY2Body:var Cb=[];CV.CreateSVGPolyLine(CT.mSeriesId,Ca,Cb);return ;}Cb=this.hGetIdentities(CT.mSeriesId,CT.mGroupId,1);Cb.push(Cb[0]);CV.CreateSVGPolylineWithCircles(CT.mSeriesId,Ca,Cb);}}},FinishDrawPolygon:function Am(CY,CZ,CX){var CU,CV=this.mCanvas,CW=CY.length;if(CW<3){return ;}if(CV instanceof mstrmojo.chart.SVGCanvas){var CT=CY;if(this.NeedAdjustedLinePath()){CT=this.hAdjustLinePath(CY);}switch(CZ){case C.NORMAL:CU=this.hGetIdentity(CX.mSeriesId,CX.mGroupId);CV.CreateSVGPolygon(CX.mSeriesId,CT,CU);break;case C.TOOLTIP_UPPER:if((CW&1)!==0){return ;}CU=this.hGetIdentities(CX.mSeriesId,CX.mGroupId,CW/2);CV.CreateSVGPolygonWithCircles(CX.mSeriesId,CT,CU);break;case C.TOOLTIP_U2L:if((CW&1)!==0){return ;}CU=this.hGetIdentities(CX.mSeriesId,CX.mGroupId,CW/2);CV.CreateSVGPolygonWithRects(CX.mSeriesId,CT,CU);break;case C.TOOLTIP_TRAPEZOID:if((CW&1)!==0){return ;}CU=this.hGetIdentities(CX.mSeriesId,CX.mGroupId,CW/2);CV.CreateSVGPolygonWithTrapezoid(CX.mSeriesId,CT,CU);break;default:CV.CreateSVGPolygon(CX.mSeriesId,CT);break;}}},allowOverlapBetweenDatalabels:function(){var CT=this.mDataset;return CT&&CT.allowDatalabelOverlap();},hGetLabelIdentity:function A5(CW){var CT={identity:null,type:"data-label"};switch(CW.mObjectId){case Bh.DssGraph2DO1Label:case Bh.DssGraph2DO2Label:case Bh.DssGraphY1Label:case Bh.DssGraphY2Label:case Bh.DssGraphX2Label:case Bh.DssGraphX1Label:CT.type="axis-text";break;case Bh.DssGraphUserLabel1:case Bh.DssGraphUserLabel2:case Bh.DssGraphUserLabel3:case Bh.DssGraphUserLabel4:var CV=CW.mObjectId-Bh.DssGraphUserLabel1;CT.identity=this.hGetIdentityEx(CV,0,"origin-label");CT.type=CV<=1?Ah.GM_ORIGIN_LABEL_H:Ah.GM_ORIGIN_LABEL_V;break;case Bh.DssGraphRefLineText:CT.type="ref-label";break;case Bh.DssGraphTrendLineText:CT.type="trend-label";break;default:var CU=null;if(CW.mSeriesId>=0&&CW.mGroupId>=0){if(CW.angleByIndex!==undefined){CU=this.hGetPieIdentityEx(CW.mSeriesId,CW.mGroupId,CW.angleByIndex,CW.sliceById,"data-label");}else{CU=this.hGetIdentityEx(CW.mSeriesId,CW.mGroupId,"data-label");}}CT.identity=CU;break;}return CT;},FinishDrawText:function k(CX,CW){var CU=this.mCanvas;if(CU instanceof mstrmojo.chart.SVGCanvas){switch(CX.mObjectId){case Bh.DssGraph2DO1Label:case Bh.DssGraph2DO2Label:case Bh.DssGraphY1Label:case Bh.DssGraphY2Label:case Bh.DssGraphX2Label:case Bh.DssGraphX1Label:CU.CreateSVGAxisText(CX.mSeriesId,CW.Tooltip,CW.Identities);break;case Bi.DssGraphBanner:if(!CW.Identities){CW.Identities=this.hGetIdentities(CX.mSeriesId,CX.mGroupId,1);}CU.CreateSVGBannerText(CX.mSeriesId,CW.Identities);break;default:var CT=this.hGetLabelIdentity(CX);var CV=this.mDataset.GetSeriesCount();if(CT.type==="ref-label"){CT.identity=CW.Identity;}CU.CreateSVGGenericText(CV,CT.identity,CT.type);break;}}},FinishDrawCurves:function G(Cc,CZ,CY,CT,Ca,CV){var CW=this.mDataset.GetSeriesCount(),Cb=CZ.mSeriesId,CU=this.mCanvas,CX;if(CU instanceof mstrmojo.chart.SVGCanvas){CU.CreateSVGCurves(Cc,CW,Cb,CY,CZ.mObjectId===Bh.DssGraphTrendLine,CT,Ca,CV);}},hGetIdentities:function BR(CW,CX,CY){var CV=[],CU;for(CU=0;CU<CY;++CU){var CT=this.hGetIdentity(CW,CX+CU);CV.push(CT);}return CV;},hGetPieIdentity:function Av(CW,CU,CT,CV){if(CW<0){CW=0;}if(CU<0){CU=0;}if(CT===undefined||CT<0){CT=0;}if(CV===undefined||CV<0){CV=0;}return this.mDataset.dataProvider.getGraphCell(CW,CU).getSliceIdentity(CT,CV);},hGetIdentity:function AH(CT,CU){if(CT<0){CT=0;}if(CU<0){CU=0;}return this.mDataset.dataProvider.getGraphCell(CT,CU).getIdentity();},hGetIdentityEx:function P(CW,CY,CV){CV=CV||"generic";if(CW<0){CW=0;}if(CY<0){CY=0;}var CU=this.mDataset.dataProvider;switch(CV){case"data-label":return CU.getGraphCell(CW,CY).getDataLabelIdentity();case"marker":return CU.getGraphCell(CW,CY).getMarkerIdentity();case"originLine":case"origin-label":var CX=["y1","y2","x1","x2"],CT=CX[CW]||"y1";if(CV==="originLine"){return CU.getAxisOriginLineIdentity(CT);}return CU.getAxisOriginLabelIdentity(CT);default:return this.hGetIdentity(CW,CY);}},hGetPieIdentityEx:function CB(Ca,CU,CT,CX,CV){if(Ca<0){Ca=0;}if(CU<0){CU=0;}if(CT===undefined||CT<0){CT=0;}if(CX===undefined||CX<0){CX=0;}var CY=this.mDataset;switch(CV){case"data-label":var CW=CY.dataProvider.getGraphCell(Ca,CU);if(!!CW){if(CW.isFaked){CW=CY.dataProvider.innerGetGraphCell(Ca,CU);}var CZ=CW.getSinglePieDPs();if(!!CZ){return CZ[CT].getDataLabelIdentity(CX,true);}}break;default:return this.hGetPieIdentity(Ca,CU,CT,CX);}},getIdentity:function Ar(CV,CY,Cc){Cc=Cc||"shape";var Ca=[],Cb;if(CY==="pie"){var CX=this.mDataset,CT=0,CU=0,CZ,CW;if(CX){CT=CX.GetPieCountAtOneDataPoint(CV.mSeriesId,CV.mGroupId);CU=CX.GetPieSliceCount(CV.mSeriesId,CV.mGroupId);}for(CZ=0;CZ<CT;CZ++){for(CW=0;CW<CU;CW++){Cb=this.hGetPieIdentityEx(CV.mSeriesId,CV.mGroupId,CZ,CW,Cc);Ca.push(Cb);}}}else{Cb=this.hGetIdentityEx(CV.mSeriesId,CV.mGroupId,Cc);Ca.push(Cb);}return Ca;},hAdjustLinePath:function AR(CV){var CX=CV.length,CY,CU,CW;var CT=Ae.cloneArray(CV);CY=CX-1;for(CW=0;CW<CX;++CW){CU=(CW+1===CX)?0:CW+1;if(CV[CW].x===CV[CY].x||CV[CW].x===CV[CU].x){CT[CW].x+=0.5;}if(CV[CW].y===CV[CY].y||CV[CW].y===CV[CU].y){CT[CW].y+=0.5;}CY=CW;}return CT;},NewPath:function D(){this.mCanvas.NewPath();},ClosePath:function z(){this.mCanvas.ClosePath();},SetFontAntiAlias:function CD(CT){this.mIsFontAntiAlias=CT;},SaveSurfaceToObject:function Au(CT){return this.mCanvas.SaveToObject(CT);},CalculateDepthOffset:function Aa(CW,CU,Cb){var CX=0,CV=Math.cos(j.DegreeToRadian(CU)),Cc=Math.sin(j.DegreeToRadian(CU)),Ca,CZ,CY,CT;if(Cb===undefined){Cb=false;}if(Cb){CX=1/Math.sqrt(Math.pow(this.mGraphWidth*CV,2)+Math.pow(this.mGraphHeight*Cc,2));}else{CX=Ap/AC;}CY=this.mGraphWidth*CX*CW;CT=this.mGraphHeight*CX*CW;Ca=Math.floor(CY*CV+0.5);CZ=-Math.floor(CT*Cc+0.5);return{OffsetX:Ca,OffsetY:CZ};},hApplyEnhancedSeriesEffect:function O(CU,CV){if(this.mIsGraphMatrix){return ;}var CT=CU.EnhancedSeriesEffect,CW,CY;switch(this.mGraphType){case Be.DssGraphTypePies:case Be.DssGraphTypeMultiple_Pies:case Be.DssGraphTypeMultiple_Proportional:case Be.DssGraphTypeX_Y_Scatter:case Be.DssGraphTypeDualAxis_X_Y_Scatter:case Be.DssGraphTypeX_Y_Scatter_with_Labels:case Be.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Be.DssGraphTypeBubble:case Be.DssGraphTypeBubble_DualAxis:case Be.DssGraphTypeBubble_With_Labels:case Be.DssGraphTypeBubble_DualAxis_With_Labels:CT.call(CU,204,Z.DssGraphFillBevelSphere,0,270,10);break;case Be.DssGraphTypeRing_Pie:case Be.DssGraphTypeMultiple_Ring_Pies:case Be.DssGraphTypeMultiple_Proportional_Ring_Pies:CT.call(CU,204,Z.DssGraphFillBevelDonut,50,0,30);break;default:var CX=Bq.EnumCollectionType;switch(CV){case CX.CT_VERTICAL_AREA:CT.call(CU,204,Z.DssGraphFillBevelSphere,0,270,20);break;case CX.CT_VERTICAL_BAR:CY=204;CW=this.GetProperty(Bg.DssGraphDepthMode,CA);if(this.isVerticalBar()&&CW){CY=255;}CT.call(CU,CY,Z.DssGraphFillBevelDonut,50,0,30);break;case CX.CT_HORIZONTAL_AREA:CT.call(CU,204,Z.DssGraphFillBevelSphere,0,180,20);break;case CX.CT_HORIZONTAL_BAR:CT.call(CU,204,Z.DssGraphFillBevelSphere,0,270,30);break;case CX.CT_DEPTH_LINE_OR_LINE_MARKER:CT.call(CU,204,Z.DssGraphFillBevelSphere,0,270,10);break;default:break;}break;}},GetLocation:function s(CU){var CW,CV,CT;CW=this.GetProperty(CU,CA);if(CW===null||CW===undefined){return ;}CV=this.TDGToMSTRPoint(CW.Left,CW.Top);CT=this.TDGToMSTRPoint(CW.Right,CW.Bottom);return new CE.Rect2D({x:CV.x,y:CV.y,width:CT.x-CV.x,height:CT.y-CV.y});},GetLocationRect:function CH(CV){var CU,CT;CU=this.GetLocation(CV);if(CU){CT=new CE.Rect2D({x:CU.Left,y:CU.Top,width:CU.Right-CU.Left,height:CU.Bottom-CU.Top});}return CT;},PutLocation:function Aw(CT,CU){},GetProperty:function CK(CT,CU){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CT,this.MapObject(CU.mObjectId),CU.mSeriesId]);},GetLocalProperty:function BD(CT,CU){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CT,this.MapObject(CU.mObjectId),CU.mSeriesId]);},PutProperty:function l(CT,CU,CV){if(this.mPropertyMap===null){this.mPropertyMap=new CE.common.MapStructure();}this.mPropertyMap.push([CT,this.MapObject(CU.mObjectId),CU.mSeriesId],CV);if(CT===Bg.DssGraphType){this.mGraphType=CV;}},normalDirection:function BH(CW,CV){var CY=this.CalculateDepthOffset(1000,CV),CU=CY.OffsetX,CZ=CY.OffsetY,CT=new CE.Vector2D({x:CU,y:CZ}),CX=CT.CrossProduct(CW);if(CX===0){return 0;}return CX>0?1:-1;},IsVertical:function e(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Area_Absolute:case Be.DssGraphTypeVertical_Area_Stacked:case Be.DssGraphTypeVertical_Area_BiPolar_Absolute:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeVertical_Area_DualAxis_Absolute:case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Area_Percent:case Be.DssGraphTypeVertical_Bar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_Stacked:case Be.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeVertical_Bar_Percent:case Be.DssGraphTypeVertical_Line_Absolute:case Be.DssGraphTypeVertical_Line_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Absolute:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_DualAxis_Absolute:case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeVertical_Line_Percent:case Be.DssGraphTypeVertical_Bar_Absolute:case Be.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Be.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeVertical_Line_DualAxis_Percent:case Be.DssGraphTypeVertical_Area_DualAxis_Percent:case Be.DssGraphTypeVertical_Bullet:case Be.DssGraphTypeVertical_CategoryPies_Absolute:case Be.DssGraphTypeVertical_CategoryPies_Percent:case Be.DssGraphTypeVertical_CategoryPies_Stacked:case Be.DssGraphTypeGrid_Pies:case Be.DssGraphTypeScatter_Pies:case Be.DssGraphTypeBubble_Pies:return true;}switch(this.GetGraphMajorType()){case g.GMT_BUBBLE:case g.GMT_SCATTER:case g.GMT_STOCK:return true;}return false;},IsDualAxis:function w(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Area_DualAxis_Absolute:case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Line_DualAxis_Absolute:case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Be.DssGraphTypeDualAxis_X_Y_Scatter:case Be.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Be.DssGraphTypeDualAxis_Polar_Coordinate_Chart:case Be.DssGraphTypeDualAxis_Radar_Line:case Be.DssGraphTypeDualAxis_Radar_Stacked_Area:case Be.DssGraphTypeBubble_DualAxis:case Be.DssGraphTypeHiLo_DualAxis_Stock_Chart:case Be.DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:case Be.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:case Be.DssGraphTypeBubble_DualAxis_With_Labels:case Be.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bg.DssGraphRadar_DualAxis_Radar_Stacked_Line:case Bg.DssGraphRadar_DualAxis_Radar_Area:case Be.DssGraphTypeVertical_Area_BiPolar_Absolute:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Absolute:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeVertical_Line_DualAxis_Percent:case Be.DssGraphTypeVertical_Area_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}},IsStackedChart:function BL(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Area_Stacked:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Area_Stacked:case Be.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_Stacked:case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Bar_Stacked:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Line_Stacked:case Be.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Be.DssGraphTypeRadar_Stacked_Area:case Be.DssGraphTypeDualAxis_Radar_Stacked_Area:case Be.DssGraphTypeRadar_Area_Stacked:case Bg.DssGraphRadar_Line_Stacked:case Bg.DssGraphRadar_DualAxis_Radar_Stacked_Line:return true;default:return false;}},IsPieChart:function Y(){if(this.mIsGraphMatrix){switch(this.GetGraphMatrixContext().mGraphType){case Be.DssGraphTypeVertical_CategoryPies_Absolute:case Be.DssGraphTypeVertical_CategoryPies_Percent:case Be.DssGraphTypeVertical_CategoryPies_Stacked:case Be.DssGraphTypeHorizontal_CategoryPies_Absolute:case Be.DssGraphTypeHorizontal_CategoryPies_Percent:case Be.DssGraphTypeHorizontal_CategoryPies_Stacked:case Be.DssGraphTypeGrid_Pies:case Be.DssGraphTypeScatter_Pies:case Be.DssGraphTypeBubble_Pies:return true;default:return false;}}else{return this.GetGraphMajorType()===g.GMT_PIE;}},MapObject:function Bd(CT){if(CT===Bg.DssGraphPieSlice){return Bg.DssGraphRiser;}return CT;},SplitRect:function BP(CX,CT,CV,CZ,CY){var CW,CU;if(CT){CW=CX.height*CV/100;CZ.Reset(CX.x,CX.y,CX.width,CX.height-CW);CY.Reset(CX.x,CX.y+CZ.height,CX.width,CW);}else{CU=CX.width*CV/100;CZ.Reset(CX.x+CU,CX.y,CX.width-CU,CX.height);CY.Reset(CX.x,CX.y,CU,CX.height);}},getAxisAutoNumberFormat:function AJ(Ca,CX,CZ){CZ=CZ||false;var CU=this.mDataset,CW;if(CX&&CX.length){var CT=this.mSelectedAxisAutoNumberFormat;if(CT.Format!==null){var CY=true,CV=CT.Array;if(CV&&CV.length===CX.length){for(CW=0;CW<CV.length;CV++){if(CV[CW]!==CX[CW]){CY=false;break;}}}if(CY){Ca.reset(CT.Format);return ;}}CU.getValueAxisNumberFormat(Ca,CX,CZ);CT.Array=CX.slice(0);CT.Format=new CE.ChartAdvFormat({ChartAdvFormat:Ca});}else{var Cb=this.mAxisAutoNumberFormat;if(Cb!==null){Ca.reset(Cb);}else{CU.getValueAxisNumberFormat(Ca);this.mAxisAutoNumberFormat=new CE.ChartAdvFormat({ChartAdvFormat:Ca});}}},GetGraphMajorType:function V(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Area_Absolute:case Be.DssGraphTypeVertical_Area_Stacked:case Be.DssGraphTypeVertical_Area_BiPolar_Absolute:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeVertical_Area_DualAxis_Absolute:case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Area_Percent:case Be.DssGraphTypeHorizontal_Area_Absolute:case Be.DssGraphTypeHorizontal_Area_Stacked:case Be.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Area_Percent:case Be.DssGraphTypeVertical_Bar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_Stacked:case Be.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeVertical_Bar_Percent:case Be.DssGraphTypeHorizontal_Bar_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_Stacked:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Bar_Percent:case Be.DssGraphTypeVertical_Line_Absolute:case Be.DssGraphTypeVertical_Line_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Absolute:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_DualAxis_Absolute:case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeVertical_Line_Percent:case Be.DssGraphTypeHorizontal_Line_Absolute:case Be.DssGraphTypeHorizontal_Line_Stacked:case Be.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Line_Percent:case Be.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Be.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Be.DssGraphTypeVertical_Bullet:case Be.DssGraphTypeHorizontal_Bullet:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeVertical_Line_DualAxis_Percent:case Be.DssGraphTypeVertical_Area_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Area_DualAxis_Percent:case Be.DssGraphTypeHorizontal_CategoryPies_Absolute:case Be.DssGraphTypeHorizontal_CategoryPies_Stacked:case Be.DssGraphTypeHorizontal_CategoryPies_Percent:case Be.DssGraphTypeVertical_CategoryPies_Absolute:case Be.DssGraphTypeVertical_CategoryPies_Stacked:case Be.DssGraphTypeVertical_CategoryPies_Percent:return g.GMT_CATEGORY;case Be.DssGraphTypePies:case Be.DssGraphTypeRing_Pie:case Be.DssGraphTypeMultiple_Pies:case Be.DssGraphTypeMultiple_Ring_Pies:case Be.DssGraphTypeMultiple_Proportional:case Be.DssGraphTypeMultiple_Proportional_Ring_Pies:case Be.DssGraphTypePie_Bar:case Be.DssGraphTypeRing_Pie_Bar:return g.GMT_PIE;case Be.DssGraphTypeScatter_Pies:case Be.DssGraphTypeX_Y_Scatter:case Be.DssGraphTypeDualAxis_X_Y_Scatter:case Be.DssGraphTypeX_Y_Scatter_with_Labels:case Be.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return g.GMT_SCATTER;case Be.DssGraphTypeBubble_Pies:case Be.DssGraphTypeBubble:case Be.DssGraphTypeBubble_DualAxis:case Be.DssGraphTypeBubble_With_Labels:case Be.DssGraphTypeBubble_DualAxis_With_Labels:return g.GMT_BUBBLE;case Be.DssGraphTypeVertical_Bar_Absolute:case Be.DssGraphTypeHorizontal_Bar_Absolute:return g.GMT_CATEGORY;case Be.DssGraphTypeGrid_Pies:case Be.DssGraphTypeGridChart:return g.GMT_GRID;case Be.DssGraphTypeMaxDeskTopGraphTypes:return g.GMT_INVALID;default:return g.GMT_INVALID;}},isLegendByGroup:function CR(){return false;},isVerticalBar:function Bk(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Bar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_Stacked:case Be.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeVertical_Bar_Percent:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeVertical_Bullet:return true;default:return false;}},MoveTo:function A8(CT,CW,CU,CV){this.mCanvas.MoveTo(CT,CW,CU,CV);},BezierCurveTo:function Bn(CV,CU,CY,CW,CT,CX){this.mCanvas.BezierCurveTo(CV,CU,CY,CW,CT,CX);},LineTo:function AA(CT,CW,CU,CV){this.mCanvas.LineTo(CT,CW,CU,CV);},hMoveTo:function m(CT,CY,CU,CV,CX){var CW;CW=(CU&&this.NeedAdjustedLinePath())?0.5:0;this.MoveTo(CT+CW,CY+CW,CV,CX);},hLineTo:function CI(CT,CY,CU,CV,CX){var CW;CW=(CU&&this.NeedAdjustedLinePath())?0.5:0;this.LineTo(CT+CW,CY+CW,CV,CX);},SetRGBAFill:function Bb(CU,CV,CT,CW){this.mCanvas.SetRGBAFillColor(CU,CV,CT,CW);},SetRGBAStroke:function CM(CU,CV,CT,CW){this.mCanvas.SetRGBAStrokeColor(CU,CV,CT,CW);},FillPath:function AQ(){this.mCanvas.FillPath();},StrokePath:function i(){this.mCanvas.StrokePath();},SetLineDash:function AM(CT,CU){this.mCanvas.SetLineDash(CT,CU);},SetLineWidth:function B3(CT){this.mCanvas.SetLineWidth(CT);},SetFormatManager:function f(CU){var CT;this.mFormatManager=CU;CT=this.mFormatManager.GetFormat(Bg.DssGraphType);this.mGraphType=CT+1;this.mFormatManager.SetGraphType(this.mGraphType);this.mIsFontAntiAlias=true;},SetFontSize:function B1(CT){this.mCanvas.SetFontSize(CT);},PtSizeToPixelSize:function p(CT){return Math.floor(CT*BO/T+0.5);},IsReverseSeriesOrder:function A0(CW,CU,CT){var CV;if(CW===null){return false;}CV=CW.IsReverseOrder();if((CU&&CT>=180&&CT<360)||(!CU&&CT>=90&&CT<270)){CV=!CV;}return CV;},IsReverseGroupOrder:function BC(CU,CT){return((CU&&CT>=90&&CT<270)||(!CU&&CT>=0&&CT<180));},GetPointByAngleRadiusCenter:function Bf(CT,CV,CU){return new CE.Point2D({x:Math.floor(CU.x+CV*Math.cos(CT)+0.5),y:Math.floor(CU.y-CV*Math.sin(CT)+0.5)});},RectangleIntersection:function E(CZ,CY,CX){var CW,CU,CT,CV;if((CZ.x>(CY.x+CY.width))||(CY.x>(CZ.x+CZ.width))||(CZ.y>(CY.y+CY.height))||(CY.y>(CZ.y+CZ.height))){return false;}CW=Math.max(CZ.x,CY.x);CU=Math.max(CZ.y,CY.y);CT=Math.min(CZ.x+CZ.width,CY.x+CY.width)-CW;CV=Math.min(CZ.y+CZ.height,CY.y+CY.height)-CU;CX.Reset(CW,CU,CT,CV);return true;},RectangleUnion:function An(CZ,CY,CX){var CW,CU,CT,CV;CW=Math.min(CZ.x,CY.x);CU=Math.min(CZ.y,CY.y);CT=Math.max(CZ.x+CZ.width,CY.x+CY.width)-CW;CV=Math.max(CZ.y+CZ.height,CY.y+CY.height)-CU;CX.Reset(CW,CU,CT,CV);},getUniformAxisLabelRotateMode:function(CV){var CU=CV,CT=this.getUniformAxisContext();switch(CV){case"x":case"X":CU="X1";break;case"y":case"Y":CU="Y1";break;default:break;}return CT.mLabelRotation[CU];},getUniformAxisContext:function n(){if(this.mUniformAxisContext===null){this.mUniformAxisContext={mDataAreaLeftMargin:0,mDataAreaRightMargin:0,mDataAreaTopMargin:0,mDataAreaBottomMargin:0,mGraphHeight:400,mIsAxisTitleAndLabelRequired:true,mLabelRotation:{X1:-1,Y1:-1,X2:-1,Y2:-1},xDataLabelPadding:0,yDataLabelPadding:0,ValueAxis:{X1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},X2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Z:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false}},CategoryAxis:{X:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]},Y:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]}}};}return this.mUniformAxisContext;},isUADataAreaOutput:function Br(){if(this.mIsUniformAxisMode){var CT=this.getUniformAxisContext();if(!CT.mIsAxisTitleAndLabelRequired){return true;}}return false;},IsBackgroundBright:function AI(){var Cg,Cd,Ch,Ce,CU,CY,Cb,CT,CW,Cf,CV,CZ,CX,Cc,Ca;CX=new CE.TripleId({ObjectId:Bg.DssGraphFrame,SeriesId:AX,GroupId:M});Cc=this.hGetColorById(CX);Cg=Cc.Alpha;Ce=Cc.R;CU=Cc.G;CY=Cc.B;CX.reset(Bg.DssGraphBackground,AX,M);Cc=this.hGetColorById(CX);Cd=Cc.Alpha;Cb=Cc.R;CT=Cc.G;CW=Cc.B;Ch=1-(1-Cg)*(1-Cd);if(Ch>0.5){Cf=Cb*Cd*(1-Cg)+Ce*Cg;CV=CT*Cd*(1-Cg)+CU*Cg;CZ=CW*Cd*(1-Cg)+CY*Cg;}Ca=(Cf*299+CV*587+CZ*114)/1000;return Ca>150;},hGetColorById:function CJ(CX){var Cb,Ca,CU=1,CT=255,CV=255,CY=255,CZ;CZ=this.GetProperty(Bg.DssGraphAreaAlpha,CX);if(CZ){CU=CZ/255;}CZ=this.GetProperty(Bg.DssGraphFillEffect,CX);if(CZ){switch(CZ){case Bz.DssGraphFillSimple:CZ=this.GetProperty(Bg.DssGraphAreaColor,CX);if(CZ){var CW=j.GetColorParser();CW.ResetFromColorValue(CZ,true);CT=CW.mR;CV=CW.mG;CY=CW.mB;}break;case Bz.DssGraphFillAdvancedWash:CZ=this.GetProperty(Bg.DssGraphGradient,CX);if(CZ){Cb=CZ.StartColor;Ca=CZ.EndColor;CT=(Cb.mR+Ca.mR)/2;CV=(Cb.mG+Ca.mG)/2;CY=(Cb.mB+Ca.mB)/2;}break;default:break;}}return{R:CT,G:CV,B:CY,Alpha:CU};},FillSimple:function BG(CV,CW,CU,CT){this.mCanvas.FillSimple(CV,CW,CU,CT);},FillPattern:function o(CT){this.mCanvas.FillPattern(CT);},FillGradient:function Ay(CU,CT,CV){this.mCanvas.FillGradient(CU,CT,CV);},FillEdgeType:function BM(CU,CT){this.mCanvas.FillEdgeType(CU,CT);},FillDonutOrSphere:function AN(CV,CT,CU){this.mCanvas.FillDonutOrSphere(CV,CT,CU);},FillBorderMetallic:function b(CV,CT,CX,CW,CY,CU){this.mCanvas.FillBorderMetallic(CV,CT,CX,CW,CY,CU);},FillRadientGradient:function Al(CU,Ca,CY,CX,Cb,CT,CV,CZ,CW){this.mCanvas.FillRadientGradient(CU,Ca,CY,CX,Cb,CT,CV,CZ,CW);},MakeDarker:function U(CU,CT){this.mCanvas.MakeDarker(CU,CT);},RestoreColor:function AK(CT){this.mCanvas.RestoreColor(CT);},ApplyLineFormat:function Bp(CT){this.mCanvas.ApplyLineFormat(CT);},AddFormatedText:function BZ(CU,CW,CT,CV){this.mCanvas.AddFormatedText(CU,CW,CT,CV);},BeginFirstFrame:function AY(){this.mCanvas.BeginFirstFrame();},BeginLastFrame:function Bt(){this.mCanvas.BeginLastFrame();},EndFrame:function A7(){this.mCanvas.EndFrame();},EndUnit:function c(){this.mCanvas.EndUnit();},SetLineJoin:function AG(CT){this.mLineJoinType=CT;this.mCanvas.SetLineJoin(this.mLineJoinType);},GetLineJoin:function AS(){return this.mLineJoinType;},UpdateFormatLine:function Ai(CX,CV,CU){CU=CU||false;if(this.mIsGraphMatrix){return ;}var CW;Ak.tripleId.reset(AO,CX.mObjectId,CX.mSeriesId,CX.mGroupId);if(this.mIsGraphMatrix&&AO.mObjectId===Bg.DssGraphX1Major){AO.mObjectId=Bg.DssGraphY1Major;}if(CV.mLineColor===null||!CU){CW=this.GetProperty(Bg.DssGraphLineColor,AO);if(CW){var CT=j.GetColorParser();CT.ResetFromColorValue(CW,true);CV.mLineColor=CT.ToInteger();}}if(CV.mLineStyle===null||!CU){CW=this.GetProperty(Bg.DssGraphLinePattern,AO);if(CW){CV.mLineStyle=CW;}}if(CV.mAlpha===null||!CU){CW=this.GetProperty(Bg.DssGraphLineAlpha,AO);if(CW){CV.mAlpha=CW;}}if(CV.mLineThicknessPt===null||!CU){CW=this.GetProperty(Bg.DssGraphLineWidth,AO);if(CW){CV.mLineThicknessPt=CW;}}},UpdateFormatFill:function AF(Ca,CV,CY,CX){CX=CX||false;if(this.mIsGraphMatrix){return ;}var CZ;Ak.tripleId.reset(AO,Ca.mObjectId,Ca.mSeriesId,Ca.mGroupId);AO.mObjectId=this.MapObject(Ca.mObjectId);if(CV.mAlpha===null||!CX){CZ=this.GetProperty(Bg.DssGraphAreaAlpha,AO);if(CZ!==null&&CZ!==undefined){CV.mAlpha=CZ;}}var CU;if(CV.mFillType===null||!CX){CZ=this.GetProperty(Bg.DssGraphFillEffect,AO);if(CZ!==null&&CZ!==undefined){CV.mFillType=CZ;}var CW=CV.mFillType;switch(CW){case Bz.DssGraphFillSimple:CZ=this.GetProperty(Bg.DssGraphAreaColor,AO);if(CZ!==null&&CZ!==undefined){if(CV.mSimpleColor===null||!CX){CU=j.GetColorParser();CU.ResetFromColorValue(CZ,true);CV.mSimpleColor=CU.ToInteger();}}break;case Bz.DssGraphFillAdvancedWash:var CT=CV.mFillGradient;CZ=this.GetProperty(Bg.DssGraphGradient,AO);if(CZ!==null&&CZ!==undefined){if(CT===null||!CX){if(CT===null){CV.mFillGradient={};}CT=CV.mFillGradient;Ae.copyProps(["gradientType","angle","horizontalOffset","verticalOffset"],CZ,CT);CU=j.GetColorParser();CU.ResetFromColorValue(CZ.StartColor,true);CT.startGraphColor=CU.ToInteger();CU.ResetFromColorValue(CZ.EndColor,true);CT.endGraphColor=CU.ToInteger();}}CZ=this.GetProperty(Bg.DssGraphGradientEndAlpha,AO);if(CZ!==null&&CZ!==undefined){if(CT.endAlpha===null||!CX){CT.endAlpha=CZ;}}else{CT.endAlpha=CV.mAlpha;}break;case Bz.DssGraphFillPattern:break;default:break;}}},UpdateFormatFont:function K(CW,CU){var CV;if(this.mIsGraphMatrix){return ;}CV=this.GetProperty(Bg.DssGraphFontColor,CW);if(CV){var CT=j.GetColorParser();CT.ResetFromColorValue(CV,true);CU.mFontColor=CT.ToInteger();}CV=this.GetProperty(Bg.DssGraphFontName,CW);if(CV){CU.mFontName=CV;}CV=this.GetProperty(Bg.DssGraphFontSize100,CW);if(CV){CU.mFontSize=Math.floor(CV/100+0.5);}CV=this.GetProperty(Bg.DssGraphFontStyle,CW);if(CV){CU.mFontStyle=CV;}CV=this.GetProperty(Bg.DssGraphFontAlpha,CW);if(CV){CU.mFontAlpha=CV;}CV=this.GetProperty(Bg.DssGraphFontAlign,CW);if(CV){CU.mFontAlignment=CV;}CV=this.GetProperty(Bg.DssGraphFontRotation,CW);if(CV){CU.mFontRotation=CV;}CV=this.GetProperty(Bg.DssGraphFontBox,CW);if(CV){CU.mFontBox=CV;}},ParseValueToFormat:function u(CZ,CV){var CT=[],CW,CY,CU,CX=10;CY=0;for(CW=0;CW<6;++CW){CU=CZ.indexOf(",",CY);CT[CW]=CZ.substring(CY,CU);CY=CU+1;}CT[CW]=CZ.substring(CY);if(CT[0].length){CV.mFormatType=parseInt(CT[0],CX);}if(CT[1].length){CV.mDigits=parseInt(CT[1],CX);}if(CT[2].length){CV.mGrouping=parseInt(CT[2],CX);}if(CT[3].length){CV.mPosCurr=parseInt(CT[3],CX);}if(CT[4].length){CV.mNegFormat=parseInt(CT[4],CX);}if(CT[5].length){CV.mCurrency=CT[5];}if(CT[6].length){CV.mCustomFormat=CT[6];}},DrawSector:function Ac(CT,CW,CU,CV){this.NewPath();this.mCanvas.AddArc(CT.x,CT.y,CW,CU,CV,false);this.LineTo(CT.x,CT.y);this.ClosePath();},DrawRingSector:function Bx(CV,CU,CT,CW,CX){this.NewPath();this.mCanvas.AddArc(CV.x,CV.y,CU,CW,CX,false);this.LineTo(CV.x+CT*Math.cos(CX),CV.y+CT*Math.sin(CX));this.mCanvas.AddArc(CV.x,CV.y,CT,CX,CW,true);this.ClosePath();},DrawCylinder:function AD(CU,CX,CV,CW,CT){console.alert("to be impl");},ApplyBeveledFrameToRectangle:function F(CU,CY,CT,CV,CX,CW,CZ){this.mCanvas.ApplyBeveledFrameToRectangle(CU,CY,CT,CV,CX,CW,CZ);},drawArc:function B(CT,CX,CV,CW,CU){if(CU===undefined){CU=true;}if(CU){this.NewPath();}this.mCanvas.AddArc(CT.x,CT.y,CX,CV,CW,false);},GetGraphMatrixContext:function BW(){if(this.mpGraphMatrixContext===null){this.mpGraphMatrixContext=new CE.GraphMatrixContext({GraphType:this.mGraphType});if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}this.mpGraphMatrixContext.parentContext=this;}return this.mpGraphMatrixContext;},HideAxisElements:function BN(CT){this.mShouldHideAxisElements=CT;},IsHidingAxisElements:function B6(){return this.mShouldHideAxisElements;},IsPercentChart:function I(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Bar_Percent:case Be.DssGraphTypeHorizontal_Bar_Percent:case Be.DssGraphTypeVertical_Area_Percent:case Be.DssGraphTypeHorizontal_Area_Percent:case Be.DssGraphTypeVertical_Line_Percent:case Be.DssGraphTypeHorizontal_Line_Percent:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeVertical_Line_DualAxis_Percent:case Be.DssGraphTypeVertical_Area_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;}return false;},IsGridChart:function BT(){return this.mGraphType===Be.DssGraphTypeGridChart;},IsScatterChart:function Q(){switch(this.mGraphType){case Be.DssGraphTypeX_Y_Scatter:case Be.DssGraphTypeDualAxis_X_Y_Scatter:case Be.DssGraphTypeX_Y_Scatter_with_Labels:case Be.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return true;}return false;},IsBubbleChart:function x(){switch(this.mGraphType){case Be.DssGraphTypeBubble:case Be.DssGraphTypeBubble_DualAxis:case Be.DssGraphTypeBubble_With_Labels:case Be.DssGraphTypeBubble_DualAxis_With_Labels:return true;}return false;},IsBulletChart:function A2(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Bullet:case Be.DssGraphTypeHorizontal_Bullet:return true;}return false;},IsBarChart:function Aq(CT){CT=(CT===undefined)?H._general:CT;CT=(CT>=H._ring)?H._general:CT;switch(this.mGraphType){case Be.DssGraphTypeVertical_Bar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:return(CT===H._general||CT===H._cluster);case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Bar_Stacked:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:return(CT===H._general||CT===H._stacked);case Be.DssGraphTypeVertical_Bar_Percent:case Be.DssGraphTypeHorizontal_Bar_Percent:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Percent:return(CT===H._general||CT===H._percent);case Be.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Be.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Be.DssGraphTypeVertical_Bar_Absolute:case Be.DssGraphTypeHorizontal_Bar_Absolute:case Be.DssGraphTypeVertical_Bullet:case Be.DssGraphTypeHorizontal_Bullet:return(CT===H._general||CT===H._absolute);}return false;},IsAdvancedBarChart:function BB(CT){CT=(CT===undefined)?H._general:CT;switch(this.mGraphType){case Be.DssGraphTypeVertical_Bullet:case Be.DssGraphTypeHorizontal_Bullet:return CT===H._general||CT===H._bullet;default:return false;}},IsLineChart:function Bc(CT){CT=(CT===undefined)?H._general:CT;CT=(CT>=H._ring)?H._general:CT;if(CT===H._cluster){return false;}switch(this.mGraphType){case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeVertical_Line_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Line_Stacked:case Be.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Line_BiPolar_Stacked:return(CT===H._general||CT===H._stacked);case Be.DssGraphTypeVertical_Line_Percent:case Be.DssGraphTypeHorizontal_Line_Percent:case Be.DssGraphTypeVertical_Line_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Line_DualAxis_Percent:return(CT===H._general||CT===H._percent);case Be.DssGraphTypeVertical_Line_BiPolar_Absolute:case Be.DssGraphTypeVertical_Line_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Be.DssGraphTypeVertical_Line_Absolute:case Be.DssGraphTypeHorizontal_Line_Absolute:return(CT===H._general||CT===H._absolute);}return false;},IsAreaChart:function CN(CT){CT=(CT===undefined)?H._general:CT;CT=(CT>=H._ring)?H._general:CT;if(CT===H._cluster){return false;}switch(this.mGraphType){case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Area_Stacked:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Area_Stacked:case Be.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Area_BiPolar_Stacked:return(CT===H._general||CT===H._stacked);case Be.DssGraphTypeVertical_Area_Percent:case Be.DssGraphTypeHorizontal_Area_Percent:case Be.DssGraphTypeVertical_Area_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Area_DualAxis_Percent:return(CT===H._general||CT===H._percent);case Be.DssGraphTypeVertical_Area_BiPolar_Absolute:case Be.DssGraphTypeVertical_Area_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Be.DssGraphTypeVertical_Area_Absolute:case Be.DssGraphTypeHorizontal_Area_Absolute:return(CT===H._general||CT===H._absolute);}return false;},GetGraphMatrixGraphMajorType:function CQ(){var CT=this.mpGraphMatrixContext.mMarkerShape,CU=201,CW=202;if(CT===CU||CT===CW){return a._PIE;}if(this.IsBarChart()){return a._BAR;}if(this.IsLineChart()){return a._LINE;}if(this.IsAreaChart()){return a._AREA;}var CV=this.GetGraphType();switch(CV){case Be.DssGraphTypeGridChart:return a._GRID;case Be.DssGraphTypeX_Y_Scatter:case Be.DssGraphTypeDualAxis_X_Y_Scatter:case Be.DssGraphTypeX_Y_Scatter_with_Labels:case Be.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return a._SCATTER;case Be.DssGraphTypeBubble:case Be.DssGraphTypeBubble_DualAxis:case Be.DssGraphTypeBubble_With_Labels:case Be.DssGraphTypeBubble_DualAxis_With_Labels:return a._BUBBLE;case Be.DssGraphTypeVertical_Area_Absolute:case Be.DssGraphTypeVertical_Area_Stacked:case Be.DssGraphTypeVertical_Area_BiPolar_Absolute:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeVertical_Area_DualAxis_Absolute:case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Area_Percent:case Be.DssGraphTypeHorizontal_Area_Absolute:case Be.DssGraphTypeHorizontal_Area_Stacked:case Be.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Area_Percent:return a._AREA;case Be.DssGraphTypeVertical_Line_Absolute:case Be.DssGraphTypeVertical_Line_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Absolute:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_DualAxis_Absolute:case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeVertical_Line_Percent:case Be.DssGraphTypeHorizontal_Line_Absolute:case Be.DssGraphTypeHorizontal_Line_Stacked:case Be.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Line_Percent:return a._LINE;}return a._UNDEFINED;},GetThresholdFillColor:function h(CV,CW){var CT=true;if(CT){if(CV===this.mThresholdColorCache.mSeriesId&&CW===this.mThresholdColorCache.mGroupId){if(this.mThresholdColorCache.mUseThreshold){return this.mThresholdColorCache.mThresholdColor;}}else{var CU=this.mDatasetPtr.GetThresholdFillColor(CV,CW,0);this.mThresholdColorCache.mSeriesId=CV;this.mThresholdColorCache.mGroupId=CW;this.mThresholdColorCache.mUseThreshold=CU!==null;if(this.mThresholdColorCache.mUseThreshold){this.mThresholdColorCache.mThresholdColor=CU;return CU;}}}return null;},GetColorFromPalette:function B0(CT){var CU,CV;if(this.mIsGraphMatrix){if(this.mThemeType===BA._white){CU=CE.gLightColorPalette;}else{CU=CE.gDarkColorPalette;}}else{CU=CE.gColorPalette;}CT%=CU.length;CV=CU[CT];return CV.ToInteger();},getInt:function By(CT){if(CT>=0){return Math.floor(CT);}return Math.ceil(CT);},transformRectToTicker:function B5(CU,CV){var CT=[],CX,CW;if(CV){CX={x:Math.round(CU.x),y:Math.round(CU.y+0.5*CU.height)};CW={x:Math.round(CU.x+CU.width),y:Math.round(CU.y+0.5*CU.height)};}else{CX={x:Math.round(CU.x+0.5*CU.width),y:Math.round(CU.y)};CW={x:Math.round(CU.x+0.5*CU.width),y:Math.round(CU.y+CU.height)};}CT.push(CX);CT.push(CW);return CT;},transformToRect:function BQ(CT,Cg,CU,CV){var CY=100,Ce=4,Cf=[4,-100,-100,100,-100,100,100,-100,100],CW,Cb,Ca;t=[];if(CU){for(CW=0;CW<Ce;++CW){Cb=Cf[2*CW+1]*Cg/CY+CT.x;Ca=Cf[2*CW+2]*Cg/CY+CT.y;t.push({x:Cb,y:Ca});}}else{for(CW=0;CW<Ce;++CW){Cb=Cf[2*CW+1]*Cg/CY+CT.x;Ca=Cf[2*CW+2]*Cg/CY+CT.y;var Cd={x:Cb,y:Ca};Cd=this.vdPoint(Cd);t.push(Cd);}}var Cc=Math.abs(t[3].x-t[2].x),CX=Math.abs(t[3].y-t[0].y);if(CV){CV.Reset(t[0].x,t[0].y,Cc,CX);return CV;}else{var CZ=new CE.Rect2D();CZ.x=t[0].x;CZ.y=t[0].y;CZ.width=Math.abs(t[3].x-t[2].x);CZ.height=Math.abs(t[3].y-t[0].y);return CZ;}},resetCanvas:function BF(){this.mCanvas.reset();},applyFontFormat:function Af(CT){if(this.mImageFormat===d.SVG){this.mCanvas.ApplyFontFormat(CT);}},setDrawingOrderToCanvas:function Bo(CT){if(this.mImageFormat===d.SVG){this.mCanvas.setDrawOrder(CT);}},getDefaultThemeColor:function CS(){switch(this.mThemeType){case BA._black:return 0;case BA._white:return 16777215;default:return 16777215;}},getDefaultContrastColor:function B7(CT){CT=CT||-1;var CV=0,CU=1;switch(CT){case CV:return(this.mThemeType===BA._black?5855577:10066329);case CU:return(this.mThemeType===BA._black?16777215:3355443);default:return(this.mThemeType===BA._black?16777215:0);}},mapGraphTypeToDualAxis:function As(CU){var CT=mstrmojo.chart.model.enums.EnumDSSGraphType;switch(CU){case CT.DssGraphTypeVertical_Bar_Side_by_Side:return CT.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side;case CT.DssGraphTypeHorizontal_Bar_Side_by_Side:return CT.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side;case CT.DssGraphTypeVertical_Bar_Stacked:return CT.DssGraphTypeVertical_Bar_DualAxis_Stacked;case CT.DssGraphTypeHorizontal_Bar_Stacked:return CT.DssGraphTypeHorizontal_Bar_DualAxis_Stacked;case CT.DssGraphTypeVertical_Bar_Percent:return CT.DssGraphTypeVertical_Bar_DualAxis_Percent;case CT.DssGraphTypeHorizontal_Bar_Percent:return CT.DssGraphTypeHorizontal_Bar_DualAxis_Percent;case CT.DssGraphTypeVertical_Bar_Absolute:return CT.DssGraphTypeVertical_Bar_DualAxis_Absolute;case CT.DssGraphTypeHorizontal_Bar_Absolute:return CT.DssGraphTypeHorizontal_Bar_DualAxis_Absolute;case CT.DssGraphTypeVertical_Line_Stacked:return CT.DssGraphTypeVertical_Line_DualAxis_Stacked;case CT.DssGraphTypeHorizontal_Line_Stacked:return CT.DssGraphTypeHorizontal_Line_DualAxis_Stacked;case CT.DssGraphTypeVertical_Line_Percent:return CT.DssGraphTypeVertical_Line_DualAxis_Percent;case CT.DssGraphTypeHorizontal_Line_Percent:return CT.DssGraphTypeHorizontal_Line_DualAxis_Percent;case CT.DssGraphTypeVertical_Line_Absolute:return CT.DssGraphTypeVertical_Line_DualAxis_Absolute;case CT.DssGraphTypeHorizontal_Line_Absolute:return CT.DssGraphTypeHorizontal_Line_DualAxis_Absolute;case CT.DssGraphTypeVertical_Area_Stacked:return CT.DssGraphTypeVertical_Area_DualAxis_Stacked;case CT.DssGraphTypeHorizontal_Area_Stacked:return CT.DssGraphTypeHorizontal_Area_DualAxis_Stacked;case CT.DssGraphTypeVertical_Area_Percent:return CT.DssGraphTypeVertical_Area_DualAxis_Percent;case CT.DssGraphTypeHorizontal_Area_Percent:return CT.DssGraphTypeHorizontal_Area_DualAxis_Percent;case CT.DssGraphTypeVertical_Area_Absolute:return CT.DssGraphTypeVertical_Area_DualAxis_Absolute;case CT.DssGraphTypeHorizontal_Area_Absolute:return CT.DssGraphTypeHorizontal_Area_DualAxis_Absolute;default:return CU;}},getAxisTripleId:function AL(CT){return CE.gAxisTripleIds[CT];},RenderClusterShapes:function A9(){var CW=this,CU=CW.mUniformAxisContext.CategoryAxis,CV=CU.X,CT=CU.Y;if(CW.isCombinationChart()||CW.IsDualAxis()){return(CV.EnforceCluster&&CV.EnforceFringe)||(CT.EnforceCluster&&CT.EnforceFringe);}return false;},checkColorByAndSizeByValue:function BI(CY,CU,CX,CT){CU=CU||this.mDataset;CX=CX||false;CT=CT||false;if(!this.mIsGraphMatrix){return true;}var CW=CY.angleByIndex!==undefined,CV;if(CX){if(CW===false){CV=CU.GetColorByData(CY.mSeriesId,CY.mGroupId);}else{CV=CU.GetPieSliceColorByData(CY.mSeriesId,CY.mGroupId,CY.angleByIndex,CY.sliceById);}if(Ak.isValidNumber(CV)===false){return false;}}if(CT){CV=CU.GetSizeByData(CY.mSeriesId,CY.mGroupId);if(Ak.isValidNumber(CV)===false){return false;}}return true;},getValueAxisKeyFromLayout:function AB(CT,CU){if(CU){return CT?"X1":"Y1";}else{return CT?"X2":"Y2";}},getAxisKeyFromObjectId:function AE(CT,CW,CU){CU=CU||false;CW=CW||false;var CV;switch(CT){case Bh.DssGraphX1Body:case Bh.DssGraphX1Label:case Bh.DssGraphX1Major:case Bh.DssGraphX1Minor:case Bh.DssGraphXTitle:case Bh.DssGraphUserLabel3:case Bh.DssGraphUserLine3:CV="X1";break;case Bh.DssGraphX2Body:case Bh.DssGraphX2Label:case Bh.DssGraphX2Major:case Bh.DssGraphX2Minor:case Bh.DssGraphX2Title:case Bh.DssGraphUserLabel4:case Bh.DssGraphUserLine4:CV="X2";break;case Bh.DssGraphY1Body:case Bh.DssGraphY1Label:case Bh.DssGraphY1Major:case Bh.DssGraphY1Minor:case Bh.DssGraphY1Title:case Bh.DssGraphUserLabel1:case Bh.DssGraphUserLine1:CV="Y1";break;case Bh.DssGraphY2Body:case Bh.DssGraphY2Label:case Bh.DssGraphY2Major:case Bh.DssGraphY2Minor:case Bh.DssGraphY2Title:case Bh.DssGraphUserLabel2:case Bh.DssGraphUserLine2:CV="Y2";break;case Bh.DssGraphZBody:CV="Z";break;case Bh.DssGraphO1Body:case Bh.DssGraph2DO1Label:case Bh.DssGraphO1Major:case Bh.DssGraphO1Minor:case Bh.DssGraphO1Title:if(CW){CV=this.caKeyMap.c1||this.IsVertical()?"X1":"Y1";}else{CV="O1";}break;case Bh.DssGraphO2Body:case Bh.DssGraph2DO2Label:case Bh.DssGraphO2Major:case Bh.DssGraphO2Minor:case Bh.DssGraphO2Title:if(CW){CV=this.caKeyMap.c1||this.IsVertical()?"X2":"Y2";}else{CV="O2";}break;default:CV="";break;}if(CU){CV=CV.toLowerCase();}return CV;},getUniformAxisInformationFromKey:function CO(CW,CV){CV=CV||false;var CU=this.getUniformAxisContext(),CT=CU.ValueAxis;switch(CW){case"X1":case"X2":case"Y1":case"Y2":case"Z":return CT[CW];case"O1":case"O2":CT=CU.CategoryAxis;return CV?CT.Y:CT.X;default:return CT.Y1;}},getUniformAxisInformation:function R(CW,CV){var CU=this.getUniformAxisContext(),CY=CU.ValueAxis,CT=CU.CategoryAxis,CX;switch(CW){case Bh.DssGraphO1Body:case Bh.DssGraphO2Body:CV=CV||false;return CV?CT.Y:CT.X;case Bh.DssGraphX1Body:CX=CY.X1;break;case Bh.DssGraphY1Body:CX=CY.Y1;break;case Bh.DssGraphX2Body:CX=CY.X2;break;case Bh.DssGraphY2Body:CX=CY.Y2;break;case Bh.DssGraphZBody:CX=CY.Z;break;}return CX;},mirrorPrimaryInBubbleScatter:function A(CZ){var Ca=this,CV=Ca.GetGraphMatrixContext(),CT=CV.AxisLayout;if(Ca.mIsGraphMatrix===false){return false;}if(CT===null||CT===undefined){return false;}var CW=1,CY=2,CX=4,CU=8;if(CZ){return !!(CT&CU);}return !!(CT&CX);},isCompactMode:function Ag(){return this.mDataset.dataProvider.isCompactMode();}});BV.sDefaultMargin=10;BV.sDefaultMarginForTimeSeries=3;BV.sDefaultUniformAxisMargin=0;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumFontAlignment","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumVariantBool","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","ChartConstants","ChartContext","FormatFont","Rect2D","FormatLine","FormatFill");var Y=mstrmojo.chart,X=mstrmojo.VisUtility,O=mstrmojo.hash,U=Y.ChartConstants,J=Y.enums,D=J.EnumCollectionType,r=D.CT_LINE,Z=J.EnumGraphMajorType,f=J.EnumDSSExtraGraphObject,N=J.EnumFontAlignment,I=J.EnumLineStyle,E=J.EnumFillType,p=Y.gNullTripleId,a=J.EnumGraphMatrixMajorGraphType,T=Y.model,M=T.enums,j=M.EnumDSSGraphMarkerShape,e=M.EnumDSSGraphType,h=M.EnumDSSGraphProperty,i=M.EnumDSSGraphObject,d=M.EnumDSSExtraGraphProperty,F=M.EnumDSSGraphFontRotation,m=M.EnumDSSGraphGridLineType,L=M.EnumDSSGraphFillEffect,C=M.EnumVariantBool,k=M.EnumShapeType,S=0,B=1,o=7;var g=0,q=1,W=2;function Q(x,AG,w){var AL,AC=this.mDataset,AI,AJ=false,AD={valid:false,object:x},v=AG.mObjectId;if(v===i.DssGraphTrendLine||v===i.DssGraphReferenceLine){var AH=v===i.DssGraphTrendLine,AO,AM;if(AH){AO=AC.GetTrendLineOfSeries(AG.mSeriesId);AM=AO;}else{AO=AC.GetReferenceLinesOfSeries(AG.mSeriesId);if(AG.mGroupId>=0){AM=AO[AG.mGroupId];}}if(AM){x.mLineThickness=AM.getLineThickness();x.mLineThicknessPt=75*x.mLineThickness;x.mAlpha=255;x.mLineStyle=AM.getLineRenderType();x.mLineColor=AM.getLineColor();AD.valid=true;}}if(AD.valid){return AD;}AD.valid=true;var AB;switch(AG.mObjectId){case i.DssGraphUserLine1:AB="y1";break;case i.DssGraphUserLine2:AB="x1";break;case i.DssGraphUserLine3:AB="y2";break;case i.DssGraphUserLine4:AB="x2";break;default:AD.valid=false;break;}if(AD.valid){var AK=AC.getAxisOriginFormat(AB);delete AK.show;O.copy(AK,x);return AD;}var AA="all",y=0,AN=0,z=AG.mGroupId;AD.valid=true;if(v===i.DssGraphRiser){if(w===k._PIE||w===k._PIESLICE){v=i.DssGraphPieSlice;}}switch(v){case i.DssGraphDataMarker:AA="lineMarker";break;case i.DssGraphRiser:if(w===k._TICKER){AA="lineShape";}else{AA="shapeBorder";}break;case i.DssGraphDataLine:AA="lineShape";z=0;break;case i.DssGraphTargetLine:break;case i.DssGraphPieSlice:y=AG.angleByIndex||0;AN=AG.sliceById||0;AA="pieSliceBorder";break;default:AD.valid=false;break;}if(AD.valid){AI=AC.getGenericLineFormat(AG.mSeriesId,z,y,AN,AA);x=O.copy(AI,x);AD.object=x;return AD;}var AE,u=this.IsVertical();switch(v){case i.DssGraphY1Major:AL="majorTick";AE="y1";break;case i.DssGraphY1Minor:AL="minorTick";AE="y1";break;case i.DssGraphY2Major:AL="majorTick";AE=u?"y2":"x2";break;case i.DssGraphY2Minor:AL="minorTick";AE=u?"y2":"x2";break;case i.DssGraphX1Major:AL="majorTick";AE="x1";break;case i.DssGraphX1Minor:AL="minorTick";AE="x1";break;case i.DssGraphX2Major:AL="majorTick";AE="x2";break;case i.DssGraphX2Minor:AL="minorTick";AE="x2";break;case i.DssGraphO1Major:AL="majorTick";AE=this.caKeyMap.c1||"x1";break;case i.DssGraphO1Minor:AL="minorTick";AE=this.caKeyMap.c1||"x1";break;case i.DssGraphO2Major:AL="majorTick";AE=this.caKeyMap.c2||"x2";break;case i.DssGraphO2Minor:AL="minorTick";AE=this.caKeyMap.c2||"x2";break;case i.DssGraphY1Body:AL="axisBody";AE="y1";break;case i.DssGraphX2Body:AL="axisBody";AE="x2";break;case i.DssGraphY2Body:AL="axisBody";AE=u?"y2":"x2";break;case i.DssGraphX1Body:AL="axisBody";AE="x1";break;case i.DssGraphO1Body:AL="axisBody";AE=this.caKeyMap.c1||"x1";break;case i.DssGraphO2Body:AL="axisBody";AE=this.caKeyMap.c2||"x2";break;}var AF;if(AJ){switch(AL){case"axisBody":AF=this.globalFormats.AxisBodies;break;case"majorTick":AF=this.globalFormats.AxisMajorTicks;break;case"minorTick":AF=this.globalFormats.AxisMinorTicks;break;default:AD.valid=false;break;}AD.valid=!!AF;if(AD.valid&&AF[AE]){AD.object=AF[AE];return AD;}}AD.valid=true;switch(AL){case"axisBody":AI=AC.getAxisLineFormat(AE);break;case"majorTick":case"minorTick":AI=AC.getAxisTickFormat(AE,AL);break;default:AD.valid=false;X.visPrint("failed to get a match for this line format");break;}if(AJ){switch(AL){case"axisBody":this.globalFormats.AxisBodies=this.globalFormats.AxisBodies||{};AF=this.globalFormats.AxisBodies;break;case"majorTick":this.globalFormats.AxisMajorTicks=this.globalFormats.AxisMajorTicks||{};AF=this.globalFormats.AxisMajorTicks;break;case"minorTick":this.globalFormats.AxisMinorTicks=this.globalFormats.AxisMinorTicks||{};AF=this.globalFormats.AxisMinorTicks;break;default:AD.valid=false;break;}if(AD.valid){if(AF[AE]===undefined){AF[AE]=O.copy(AI,AF[AE]);x=AF[AE];if(AL==="minorTick"&&x.mAlpha!==undefined&&x.mAlpha!==null){x.mAlpha*=0.6;}}AD.object=AF[AE];return AD;}}else{if(AD.valid){O.copy(AI,x);if(AL==="minorTick"&&x.mAlpha!==undefined&&x.mAlpha!==null){x.mAlpha*=0.6;}AD.object=x;}}return AD;}function t(u,y,z){var AC,x=this.mDataset,AB=0,v=0,w,AD={valid:false,object:u},AA=y.mObjectId;if(AA===i.DssGraphRiser){if(z===k._PIE||z===k._PIESLICE){AA=i.DssGraphPieSlice;}}AD.valid=true;switch(AA){case i.DssGraphRiser:w="shape";break;case i.DssGraphDataMarker:w="lineMarker";break;case i.DssGraphPieSlice:w="pieSlice";AB=y.angleByIndex!==undefined?y.angleByIndex:0;v=y.sliceById!==undefined?y.sliceById:0;break;default:X.visPrint("fail to find a match for this fill format");AD.valid=false;break;}if(AD.valid){if(y.mSeriesId>=0&&y.mGroupId>=0){AC=x.getGenericFillFormat(y.mSeriesId,y.mGroupId,AB,v,w);AD.object=O.copy(AC,u);}}return AD;}function P(u){switch(u.mObjectId){case i.DssGraphUserLabel1:return i.DssGraphY1Label;case i.DssGraphUserLabel2:return i.DssGraphY2Label;case i.DssGraphUserLabel3:return i.DssGraphX1Label;case i.DssGraphUserLabel4:return i.DssGraphX2Label;default:return u.mObjectId;}}function H(v,z,AC){var AH,AK=false,y=this.mDataset,AE=P.call(this,z);if(AE===i.DssGraphDataText||AE===i.DssGraphRefLineText||AE===i.DssGraphTrendLineText){var x=0,AB=1,AI=2;AK=true;if(AC<0){switch(AE){case i.DssGraphRefLineText:AC=AB;break;case i.DssGraphTrendLineText:AC=AI;break;default:AC=x;break;}}switch(AC){case x:if(AK){var AA=this.globalFormats;if(AA.DatatextFormat===null||AA.DatatextFormat===undefined){AA.DatatextFormat=new Y.FormatFont({Bare:true});if(y===null||y===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:v};}AH=y.getDataLabelFontFormat();O.copy(AH,AA.DatatextFormat);var u=AA.DatatextFormat;if(u&&u.mFontSize&&typeof u.mFontSize!=="number"){u.mFontSize=parseFloat(u.mFontSize);}}v=AA.DatatextFormat;}else{if(y===null||y===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:v};}AH=y.getDataLabelFontFormat();O.copy(AH,v);}return{valid:true,object:v};case AB:var w,AD=y.GetReferenceLinesOfSeries(z.mSeriesId);if(z.mGroupId>=0){w=AD[z.mGroupId];}if(w){var AJ=w.getReferenceLineLabelFont();if(AJ){v.mFontColor=AJ.rfLnFntClr;v.mFontSize=parseInt(AJ.rfLnFntSz,10);v.mFontStyle=AJ.rfLnFntStyle;v.mFontName=AJ.rfLnFntFml;}}break;case AI:break;default:return{valid:false,object:v};}return{valid:false,object:v};}var AG;switch(AE){case i.DssGraphY1Label:AG="y1";break;case i.DssGraphX2Label:AG="x2";break;case i.DssGraphY2Label:AG=this.IsVertical()?"y2":"x2";break;case i.DssGraphX1Label:AG="x1";break;case i.DssGraph2DO1Label:AG=this.caKeyMap.c1||"x1";break;case i.DssGraph2DO2Label:AG=this.caKeyMap.c2||"x2";break;default:return{valid:false,object:v};}AK=false;if(AK){var AF=this.globalFormats.AxisLabelFormats;if(AF===null||AF===undefined){this.globalFormats.AxisLabelFormats={};}AF=this.globalFormats.AxisLabelFormats;if(!!AF[AG]){return AF[AG];}AF[AG]={};O.copy(AH,AF[AG]);return AF[AG];}else{AH=y.getAxisLabelFontFormat(AG);O.copy(AH,v);}return{valid:true,object:v};}function A(x,z,u){z=z||0;u=u||false;var y=this.GetGraphMatrixContext(),AD,w=this.mDataset;u=u&&y.mHasColorBy;if(w&&u){var v;if(x.mObjectId===i.DssGraphPieSlice){var AC=x.angleByIndex||0,AB=x.sliceById||0;v=w.GetPieSliceColorByData(x.mSeriesId,x.mGroupId,AC,AB);}else{v=w.GetColorByData(x.mSeriesId,x.mGroupId,z);}if(v!==null&&v!==undefined){AD=v;}}if(AD===undefined){if(this.mIsGraphMatrix&&!y.mHasColorBy){AD=this.GetColorFromPalette(0);}else{if(x.mSeriesId<0&&x.mGroupId<0){AD=0;}else{var AA=x.mSeriesId;if(AA<0){AA=x.mGroupId;}AA=Math.max(0,AA);AD=this.GetColorFromPalette(AA);}}}return AD;}mstrmojo.chart.GenericContext=mstrmojo.declare(mstrmojo.chart.ChartContext,null,{scriptClass:"mstrmojo.chart.GenericContext",init:function n(u){this._super(u);this.mGraphType=e.DssGraphTypeVertical_Bar_Side_by_Side;this.mFormatManager=this.mFormatManager||u.FormatManager||null;this.mIsFontAntiAlias=true;},GetColorValue:function G(w,u,v){return A.call(this,w,u,v);},GetProperty:function c(w,y){var u,v,x;if(w===h.DssGraphType){return this.mGraphType;}if(!this.mIsTimeSeriesChart){v=this.mFormatManager.GetGraphProperty(w,y.mObjectId,y.mSeriesId,y.mGroupId);if(v!==undefined&&v!==null){return v;}}if(!this.mIsGraphMatrix){v=this._super(w,y);if(!v){v=this._super(w,new Y.TripleId({ObjectId:y.mObjectId}));if(!v){v=this._super(w,new Y.TripleId({SeriesId:y.mSeriesId}));if(!v){v=this._super(w,p);}}}if(v){return v;}}switch(w){case h.DssGraphAxisNumberFormat:case -h.DssGraphFormatDataTextAdv:u="-2,0,0,0,0,$,#";return u;case h.DssGraphTextContent:switch(y.mObjectId){case i.DssGraphY1Title:u="Y1";return u;}return u;case h.DssGraphStyleMajor:if(this.mIsGraphMatrix){switch(y.mObjectId){case i.DssGraphY1Body:case i.DssGraphY2Body:case i.DssGraphX1Body:case i.DssGraphX2Body:u=m.DssGraphGridOuterTicks;break;default:u=m.DssGraphGridNone;break;}}else{u=m.DssGraphGridRegular;}return u;case h.DssGraphShow2DAxisMinor:case h.DssGraphShow2DAxisLine:u=!this.mIsGraphMatrix;return u;case h.DssGraph2DSide:switch(y.mObjectId){case i.DssGraphY1Body:u=m.DssGraphAxisLabelLowSide;return u;case i.DssGraphO1Body:u=m.DssGraphAxisLabelLowSide;return u;}break;case d.DssGraphChartAreaNumber:u=3;return u;case h.DssGraphDepthMode:u=false;return u;case h.DssGraphEnhancedSeriesEffect:u=false;return u;case h.DssGraphCurveColorAsSeries:case h.DssGraphShowLegendText:case h.DssGraphShowTitle:u=true;return u;case d.DssGraphUseChartArea:case h.DssGraphShowDataValue:case h.DssGraphShowTotalValue:case d.DssGraphChartAreaOrientation:case h.DssGraphLockFontSize:u=false;return u;case h.DssGraphSDShowDataText:u=false;return u;case h.DssGraphShow2DAxisMajor:x=this.GetGraphMajorType();if(x===Z.GMT_3D_CATEGORY||x===Z.GMT_3D_SCATTER){if(y.mObjectId===i.DssGraphY1Body){u=true;return u;}}if(this.mIsGraphMatrix){return true;}u=(this.mIsTimeSeriesChart?true:false);return u;case d.DssGraphCumulativePercentLabel:u="Cumulative Percent";return u;case d.DssGraphInfoNestedLabel:case d.DssGraphInfoNestedLabelBracket:u=false;return u;case h.DssGraphShowDataLabel:u=false;return u;case h.DssGraphLineColor:if(this.mIsTimeSeriesChart){if(y.mSeriesId>=0){u=parseInt(this.GetColorFromPalette(y.mSeriesId),10);return u;}switch(y.mObjectId){case i.DssGraphO1Major:u=5460819;return u;case i.DssGraphY1Major:u=5658198;return u;case i.DssGraphO1Body:case i.DssGraphY1Body:u=13421772;return u;default:return undefined;}}if(this.mIsGraphMatrix){switch(y.mObjectId){case i.DssGraphY1Major:case i.DssGraphX1Major:case i.DssGraphX2Major:case i.DssGraphY2Major:u=this.getDefaultContrastColor(S);break;default:return undefined;}}else{return undefined;}break;case h.DssGraphFillEffect:u=L.DssGraphFillSimple;return u;case h.DssGraphLineAlpha:if(y.mObjectId===i.DssGraphRiser){u=0;return u;}return undefined;case h.DssGraphMarkerSize:u=33;return u;case h.DssGraph2DDepth:u=1000;return u;case h.DssGraphAxisAutoFit:x=this.GetGraphMajorType();u=x===Z.GMT_CATEGORY;return u;case h.DssGraphFontColor:if(this.mIsGraphMatrix){u=this.getDefaultContrastColor();return u;}break;default:return undefined;}return undefined;},PutGraphProperty:function V(u,v,w){this.mFormatManager.PutGraphProperty(u,v.mObjectId,v.mSeriesId,v.mGroupId,w);},GetFormatFont:function s(x){var u,v=this.mDebugUseNewProperties;u=this.GetFormatObject(x,-1,2,v);switch(x.mObjectId){case i.DssGraphPieGroupLabel:case i.DssGraphPieRingLabel:if(u.mFontAlignment===null||!v){u.mFontAlignment=N.FA_CENTER;}if(u.mFontSize===null||!v){u.mFontSize=Math.floor(u.mFontSize*3/4+1);}break;case i.DssGraphOPILBLValue:case i.DssGraphPieFeelerLabel:if(u.mFontAlignment===null||!v){u.mFontAlignment=N.FA_CENTER;}if(u.mFontSize===null||!v){u.mFontSize=o;}break;case i.DssGraphY1Label:case i.DssGraph2DO1Label:case i.DssGraph2DO2Label:case i.DssGraphX1Label:case i.DssGraphX2Label:case i.DssGraphY2Label:if(this.mIsTimeSeriesChart){u.mFontSize=14;u.mFontColor=13158600;}else{if(u.mFontColor===null||!v){u.mFontColor=this.getDefaultContrastColor();}if(u.mFontSize===null||!v){u.mFontSize=8;}}break;case i.DssGraphDataText:if(u.mFontSize===null||!v){u.mFontSize=Math.floor(U.kVirtualCoordinateHeight/45);}if(this.isVerticalBar()&&!this.IsBulletChart()){if(u.mFontRotation===null||!v){u.mFontRotation=F.Rotate90;}}break;case f.DssGraphWarningMessage:u.mFontColor=255;break;case f.DssGraphBanner:var w=this.getDefaultContrastColor(B);u.mFontColor=w;u.mFontSize=11;break;default:break;}this.UpdateFormatFont(x,u);u.mFontSize=this.vdFontSize(u.mFontSize);if(v){u.restoreDefaults(false);}return u;},GetFormatObject:function l(AA,w,v,z){var y,u,x;z=z&&(!!this.mDataset)&&this.mDebugUseNewProperties;if(z){y={Bare:true};}else{y=undefined;}switch(v){case g:u=new Y.FormatLine(y);break;case q:u=new Y.FormatFill(y);break;case W:u=new Y.FormatFont(y);break;default:break;}if(z){x=this.ResolveFormat(u,AA,v,w);return x.object;}return u;},GetFormatLine:function K(w,AC,x){if(x===undefined){x=k._GENERIC;}var AB=w.mGroupId,z=w.mObjectId,v;switch(z){case i.DssGraphTrendLine:case i.DssGraphReferenceLine:case i.DssGraphY1Major:case i.DssGraphY2Major:case i.DssGraphY3Major:case i.DssGraphY4Major:case i.DssGraphX1Major:case i.DssGraphX2Major:case i.DssGraphO1Major:case i.DssGraphY1Minor:case i.DssGraphY2Minor:case i.DssGraphY3Minor:case i.DssGraphY4Minor:case i.DssGraphX1Minor:case i.DssGraphX2Minor:case i.DssGraphO1Minor:case i.DssGraphO1Body:case i.DssGraphX1Body:case i.DssGraphY1Body:case i.DssGraphY2Body:case i.DssGraphX2Body:case i.DssGraphY3Body:case i.DssGraphY4Body:case i.DssGraphUserLine1:case i.DssGraphUserLine2:case i.DssGraphUserLine3:case i.DssGraphUserLine4:case i.DssGraphDataLine:v=true;break;default:if(AB===-3){var u=w.mSeriesId;u=Math.max(u,0);w.mGroupId=this.mDataset.findCell(false,u,0);}v=w.mSeriesId>=0&&w.mGroupId>=0;break;}var AA=true,y;y=this.GetFormatObject(w,x,g,v);switch(z){case i.DssGraphBackground:case i.DssGraphLegendArea:y.mAlpha=0;break;case i.DssGraphRiser:case i.DssGraphDataLine:if(AC===r&&w.mSeriesId>=0){if(y.mLineColor===null||!v){y.mLineColor=A.call(this,w,0);}}if(z===i.DssGraphRiser&&this.mIsGraphMatrix){if(y.mLineColor===null||!v){y.mLineColor=A.call(this,w,0,(w.mGroupId>=0&&w.mSeriesId>=0));}switch(x){case k._TICKER:if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()){if(y.mLineThickness===null||!v){y.mLineThicknessPt=200;y.mLineThickness=2;}AA=false;}break;case k._CIRCLE:case k._RECTANGLE:case k._SQUARE:if(x===k._CIRCLE||x===k._RECTANGLE||x===k._SQUARE){if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()||this.IsBarChart()||this.IsLineChart()||this.IsAreaChart()){if(y.mLineThickness===null||!v){y.mLineThicknessPt=200;y.mLineThickness=2;}AA=false;}}break;default:break;}}break;case i.DssGraphY1Major:case i.DssGraphY2Major:case i.DssGraphX1Major:case i.DssGraphX2Major:if(this.mIsTimeSeriesChart){y.mLineStyle=I.LS_DOT;}else{if(this.mIsGraphMatrix){if(y.mLineColor===null||!v){y.mLineColor=this.getDefaultContrastColor(S);}}}break;default:break;}this.UpdateFormatLine(w,y,v);if(AA||!v){y.mLineThickness=y.mLineThicknessPt;if(!this.mAbsoluteFontLineSize){y.mLineThicknessPt=this.vdHeight(y.mLineThicknessPt);}y.mLineThickness=this.vdLineWidth(y.mLineThickness);}if(v){y.restoreDefaults(false);}w.mGroupId=AB;return y;},GetFormatFill:function R(w,AC,y){if(y===undefined){y=k._GENERIC;}var AB=w.mGroupId;if(AB===-3){var u=w.mSeriesId;u=Math.max(u,0);w.mGroupId=this.mDataset.findCell(false,u,0);}var v=(w.mSeriesId>=0&&w.mGroupId>=0)&&this.mDebugUseNewProperties,AA,z=this.mpGraphMatrixContext;AA=this.GetFormatObject(w,y,q,v);switch(w.mObjectId){case i.DssGraphPieSlice:case i.DssGraphRiser:case i.DssGraphDataLine:if(this.mIsGraphMatrix){if(AA.mFillType===null||!v){AA.mFillType=E.FT_SIMPLE;}var x=this.GetGraphMatrixGraphMajorType();switch(x){case a._BAR:case a._SCATTER:case a._BUBBLE:case a._AREA:if(AA.mAlpha===null||!v){AA.mAlpha=178.5;}break;case a._LINE:if(z.mMarkerShape!==j.DssGraphMarkerShapeNone||w.mObjectId===i.DssGraphRiser){if(AA.mAlpha===null||!v){AA.mAlpha=178.5;}}break;default:break;}if(z.mMarkerShape===j.DssGraphMarkerShapeGMTick){if(AA.mAlpha===null||!v){AA.mAlpha=255;}}if(AA.mSimpleColor===null||!v){AA.mSimpleColor=A.call(this,w,0,(w.mSeriesId>=0&&w.mGroupId>=0));}}else{if((w.mSeriesId>=0&&w.mGroupId===-3)){AA.mSimpleColor=Y.gColorPalette[w.mSeriesId];}else{if((w.mGroupId>=0&&w.mSeriesId===-3)){AA.mSimpleColor=Y.gColorPalette[w.mGroupId];}}}break;default:break;}this.UpdateFormatFill(w,AA,AC,v);if(v){AA.restoreDefaults(false);}w.mGroupId=AB;return AA;},ResolveFormat:function b(v,x,u,w){if(v){switch(u){case g:return Q.call(this,v,x,w);case q:return t.call(this,v,x,w);case W:return H.call(this,v,x,w);default:return{valid:false,object:v};}}return{valid:false,object:v};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","ChartContext","ImageMap");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumCollectionType");var W=mstrmojo.chart,O=mstrmojo.chart.model,U=W.enums,d=O.enums,b=U.EnumCollectionType,Q=U.EnumObjectShape,F=Q.OS_RECTANGLE,f=d.EnumDSSGraphObject,S=W.gNullTripleId,c=W.gNullObjectId,M=2147483647;mstrmojo.chart.GraphObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObject",mpParentObject:null,mFormatLinePtr:null,mTripleId:S,mChartContextPtr:null,mpManager:null,mIsDetectable:true,mIsAnimationEnabled:false,mIsVirtual:false,mShapeType:0,init:function V(h){this._super(h);this.mpParentObject=h.GraphCollectionObject||null;this.mTripleId=h.TripleId||S;this.mpManager=h.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(h.Shape){this.mShapeType=h.Shape;}if(h.hasLine&&this.mTripleId.mObjectId!==c){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,b.CT_NO_COLLECTION,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;},SetAnimationEnable:function H(h){this.mIsAnimationEnabled=h;this.SetProgress(0.1);},IsLayerObject:function J(){return false;},SetFormatLine:function X(h){this.mFormatLinePtr=h;},SetLineWidth:function e(){var h;h=this.mFormatLinePtr.mLineThickness;h=(h<1)?1:h;this.hSetLineWidth(h);},ApplyLineFormat:function E(){this.mFormatLinePtr.ApplyLineFormat(this.mChartContextPtr);},SetOutlineWidth:function R(){this.hSetLineWidth(W.gOutlineWhite.mLineThickness);},SetOutlineWidthEx:function P(h){if(h>0){this.hSetLineWidth(h);}},ApplyOutlineFormat:function g(){var h=this.mChartContextPtr;if(h.IsBackgroundBright()){W.gStrokeForLightBackground.ApplyLineFormat(h);}else{W.gStrokeForDarkBackground.ApplyLineFormat(h);}},MakePolygonClockwise:function I(n){var k=n.length,p=0,m,j,o,l,h;if(k<3){return ;}for(m=1;m<k;++m){if(n[m].x<n[p].x||(n[m].x<=n[p].x&&n[m].y<n[p].y)){p=m;}}j=(p+k-1)%k;o=new W.Vector2D({x:n[j].x-n[p].x,y:n[j].y-n[p].y});j=(p+1)%k;l=new W.Vector2D({x:n[j].x-n[p].x,y:n[j].y-n[p].y});if(l.CrossProduct(o)<-W.gModuleMain.mTolerance){for(m=0;m<Math.floor(k/2);++m){h=n[m];n[m]=n[k-m-1];n[k-m-1]=h;}}},DrawOutLine:function T(){this.SetOutlineWidth();this.mChartContextPtr.DrawPolygon(this.GetClockwisePolygon());this.ApplyOutlineFormat();},PointInObject:function A(h){if(!this.mIsDetectable){return false;}return h.IsInPolygon(this.GetClockwisePolygon());},hSetLineWidth:function G(h){this.mChartContextPtr.SetLineWidth(h);this.mChartContextPtr.mIsLineWidthOdd=((h&1)===1);},GetChartAreaId:function Y(){var h=this.mpManager.mTripleId;switch(h.mObjectId){case f.DssGraphY1Body:case f.DssGraphY2Body:case f.DssGraphX2Body:case f.DssGraphO1Body:return this.mTripleId.mSeriesId;default:return this.mpManager.GetChartAreaId();}},GetBoundingRect:function L(){var h=new W.Rect2D();return h;},SetProgress:function C(h){},DistanceToPoint:function Z(h){if(!this.mIsDetectable){return M;}var i=this.GetClockwisePolygon();if(i.length<3){return M;}return h.DistanceToPolygon(i);},GetAngularBisectorIntersectionPoint:function D(t,r,q,k,l){var m={x:t.x-r.x,y:t.y-r.y};var j={x:q.x-r.x,y:q.y-r.y};var i=Math.sqrt(m.x*m.x+m.y*m.y);var h=Math.sqrt(j.x*j.x+j.y*j.y);var p={x:m.x/i,y:m.y/i};var o={x:j.x/h,y:j.y/h};var s=0;if(Math.abs(p.x-o.x)<0.01){s=k*(o.x+p.x)/(p.y-o.y);}else{s=k*(o.y+p.y)/(o.x-p.x);}var n={x:0,y:0};n.x=r.x+s*o.x;n.y=r.y+s*o.y;l.x=n.x+k*(-o.y);l.y=n.y+k*o.x;},getFormatFromParent:function a(){this.mFormatLinePtr=this.mpParentObject.mFormatLinePtr;},getBoundingPoints:function K(){var h=this.GetBoundingRect(),i=h.ToPoints(false);return{Shape:0,Points:[i.TopLeft,i.TopRight,i.BottomRight,i.BottomLeft]};},getShapeSize:function N(){return 0;},fallOut:function B(o){var j=0,n=this.mChartContextPtr,m=this.getBoundingPoints(),l=m.Points,k,h;for(k=0;k<l.length;++k){h=l[k];if(h.x<0||h.y<0||h.x>n.mGraphWidth||h.y>n.mGraphHeight){j++;}if(j>0&&!o){return true;}}return(j===l.length);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumDSSGraphFillEffect");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","GraphObject","FormatFill","ChartContext");var L=mstrmojo.chart,I=L.enums,P=I.EnumCollectionType,H=mstrmojo.chart.model,Q=H.enums,F=Q.EnumDSSGraphObject,N=Q.EnumDSSGraphFillBevelEffect,D=Q.EnumDSSGraphFillEffect;mstrmojo.chart.ShapeObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.ShapeObject",init:function J(S){if(S.hasFill===undefined){S.hasFill=true;}if(S.hasLine===undefined){S.hasLine=true;}this._super(S);if(S.hasFill&&this.mTripleId.mObjectId!==F.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,P.CT_NO_COLLECTION):this.mpParentObject.GetFormatFill();}},getRadialInfo:function K(){return null;},ApplyFillFormat:function E(Z){var Y,T=false,V,S=this.mFormatFillPtr;if(S===null){return ;}if(Z===undefined){Z=false;}if(S.mAlpha===0){if(S.supportAdvancedFill((0))){var X=S.mFillBevel.type;if(X===N.DssGraphFillBevelSmoothEdge||X===N.DssGraphFillBevelChiselEdge){if(!Z){this.FillBevel();}}}}Y=S.mSimpleColor;if(T){V=new L.FormatFill();V.mSimpleColor=Y;V.mFillType=D.DssGraphFillSimple;V.mAlpha=S.mAlpha;V.mDarkerFactor=S.mDarkerFactor;V.mFillBevel=S.mFillBevel;V.mFillGradient=S.getGradient();V.mFillPattern=S.mFillPattern;S=this.mFormatFillPtr=V;}switch(S.mFillType){case D.DssGraphFillSimple:S.FillSimple(this.mChartContextPtr);break;case D.DssGraphFillAdvancedWash:case D.DssGraphFillGenericGradient:if(S.mFillGradient.gradientType===9){var W=this.getRadialInfo();if(W){S.FillGradient(this.mChartContextPtr,W);return ;}}var U=this.GetBoundingRect();S.FillGradient(this.mChartContextPtr,U);break;case D.DssGraphFillPattern:break;case D.DssGraphFillPicture:case D.DssGraphFillUserPicture:break;default:break;}if(!Z){this.FillBevel();}},FillBevel:function G(){var S,T=this.mFormatFillPtr;if(T.supportAdvancedFill(0)===false){return ;}switch(T.mFillBevel.type){case N.DssGraphFillBevelNone:break;case N.DssGraphFillBevelSmoothEdge:case N.DssGraphFillBevelChiselEdge:if(this.SupportBevelEffect()){T.FillEdgeType(this.mChartContextPtr,this.GetClockwisePolygon());}break;case N.DssGraphFillBevelDonut:case N.DssGraphFillBevelSphere:S=this.GetBoundingRect();T.FillDonutOrSphere(this.mChartContextPtr,S,this.IsCircularShape());break;}},SupportBevelEffect:function M(){return true;},IsCircularShape:function A(){return false;},SetFormatFill:function B(S){this.mFormatFillPtr=S;},GetFormatFill:function R(){return this.mFormatFillPtr;},getFormatFromParent:function O(){var S=this.mpParentObject;this.mFormatLinePtr=S.mFormatLinePtr;this.mFormatFillPtr=S.GetFormatFill();},GetBoundingRectFromPolygon:function C(V){var T=new L.Rect2D(),X,U;T.x=V[0].x;T.y=V[0].y;var S=V[0].x,W=V[0].y;X=V.length;for(U=1;U<X;++U){T.x=Math.min(T.x,Math.floor(V[U].x));T.y=Math.min(T.y,Math.floor(V[U].y));S=Math.max(S,V[U].x);W=Math.max(W,V[U].y);}T.width=S-T.x;T.height=W-T.y;return T;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine");var E=mstrmojo.chart,J=mstrmojo.chart.enums,I=J.EnumLineJoinType,H=10;function M(Q,P,O){return Q?P.x===O.x:P.y===O.y;}function F(){var S=this.mChartContextPtr,O=this.mFormatLinePtr,Q=O.getGradient(),P=O&&Q&&Q.valid;if(!S.mIsGraphMatrix||!P){this.ApplyLineFormat();}else{if(Q.style===0){this.ApplyLineFormat();}else{var R=Q.angle===1;this.Vibrate(0.01,R);this.ApplyLineFormat();}}}function L(S,R){var Q,O=S.length;for(Q=1;Q<=O*2;Q++){R.push({});}var P=Math.max(this.mFormatLinePtr.mLineThickness/2,E.gOutlineBlack.mLineThickness/1.3);var U={x:2*S[0].x-S[1].x,y:2*S[0].y-S[1].y};var T={x:2*S[O-1].x-S[O-2].x,y:2*S[O-1].y-S[O-2].y};this.GetAngularBisectorIntersectionPoint(S[1],S[0],U,P,R[0]);this.GetAngularBisectorIntersectionPoint(T,S[O-1],S[O-2],P,R[O-1]);this.GetAngularBisectorIntersectionPoint(S[O-2],S[O-1],T,P,R[O]);this.GetAngularBisectorIntersectionPoint(U,S[0],S[1],P,R[2*O-1]);for(Q=1;Q<O-1;++Q){this.GetAngularBisectorIntersectionPoint(S[Q+1],S[Q],S[Q-1],P,R[Q]);this.GetAngularBisectorIntersectionPoint(S[Q-1],S[Q],S[Q+1],P,R[2*O-1-Q]);}}mstrmojo.chart.PolyLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.PolyLineObject",mLinePoints:null,isClosePath:false,identity:null,init:function N(Q){Q.hasLine=Q.hasLine||true;Q.isClosePath=Q.isClosePath||false;this._super(Q);var P,S=this.mLinePoints=[],R=Q.PolyLine,O=R.length;for(P=0;P<O;P++){S.push(R[P]);}if(Q.Identity!==undefined&&Q.Identity!==null){this.identity=Q.Identity;}},Draw:function C(){if(this.mLinePoints.length<2){return ;}var P=this.mChartContextPtr,O=P.GetLineJoin();P.SetLineJoin(I.LJT_ROUND);this.SetLineWidth();this.SetPath();F.call(this);P.SetLineJoin(O);P.FinishDrawPolyline(this.mLinePoints,this.mTripleId,!this.mIsDetectable,this.identity,this.startPoint,this.midPoint,this.endPoint);},GetPolygons:function G(T){var R,Q,X=this.mLinePoints,U=X.length;if(U<2){return ;}var P=2/(H*H);var O=[];O.push(0);for(R=1;R+1<U;++R){var Y={x:X[R-1].x-X[R].x,y:X[R-1].y-X[R].y};var V={x:X[R+1].x-X[R].x,y:X[R+1].y-X[R].y};Y.x=Y.x/Math.sqrt(Y.x*Y.x+Y.y*Y.y);Y.y=Y.y/Math.sqrt(Y.x*Y.x+Y.y*Y.y);V.x=V.x/Math.sqrt(V.x*V.x+V.y*V.y);V.y=V.y/Math.sqrt(V.x*V.x+V.y*V.y);if(1-(Y.x*V.x+Y.y*V.y)<P){O.push(R);}}O.push(U-1);U=O.length;for(R=1;R<U;++R){var S=[];for(Q=O[R-1];Q<=O[R];++Q){S.push(X[Q]);}var W=[];L.call(this,S,W);T.push(W);}},SetPath:function D(){var R=this.mChartContextPtr,O=this.mFormatLinePtr,Q=this.mLinePoints,P=[];if(this.isClosePath){P=P.concat(Q);P.pop();R.DrawPolygon(P,true,false,0,O.mLineStyle);}else{R.DrawPolyLine(Q,true,false,0,O.mLineStyle);}},getBoundingPoints:function B(){return{Shape:1,Points:this.mLinePoints};},movePointsAgainstBorder:function A(){var V=this.mChartContextPtr,T=this.mLinePoints,O=T.length,U=V.IsVertical();if(V.mIsGraphMatrix===false){return ;}var S=this.mFormatLinePtr.mLineThickness;if(S>2){return ;}var R,P=U?V.mGraphHeight:0,Q=U?0:V.mGraphWidth;for(R=0;R<O;R++){if(U){if(T[R].y>=P){T[R].y--;}if(T[R].y<=Q){T[R].y++;}}else{if(T[R].x<=P){T[R].x++;}if(T[R].x>=P){T[R].x--;}}}},Vibrate:function K(O,R){var P,Q=this.mLinePoints;for(P=0;P+1<Q.length;P+=2){if(M.call(this,R,Q[P],Q[P+1])){if(R){Q[P+1].x+=O;}else{Q[P+1].y+=O;}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.enums.EnumLineStyle");mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Point2D");var F=mstrmojo.chart,H=F.enums,J=H.EnumLineStyle,C=F.model.enums,A=C.EnumShapeType;mstrmojo.chart.StraightLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.StraightLineObject",mDeviceStartPoint:null,mDeviceEndPoint:null,midPoint:null,identity:null,init:function I(K){if(K.hasLine===undefined){K.hasLine=true;}this._super(K);this.mDeviceStartPoint=new F.Point2D({Point2D:K.StartPoint});this.mDeviceEndPoint=new F.Point2D({Point2D:K.EndPoint});if(K.MidPoint!==undefined&&K.MidPoint!==null){this.midPoint=K.MidPoint;}if(K.Identity!==undefined&&K.Identity!==null){this.identity=K.Identity;}},Draw:function B(){var O=this.mChartContextPtr,K=this.mFormatLinePtr,M=this.mDeviceStartPoint,L=this.mDeviceEndPoint,N;this.SetLineWidth();if(K.mLineStyle===J.LS_SOLID){O.DrawStraightLine(M,L);}else{O.NewPath();N=K.getLinePattern(K.mLineStyle);O.DrawDashedLine(M,L,N);}this.ApplyLineFormat();if(this.Shape===A._TICKER){O.FinishDrawTickerShape(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId);}else{O.FinishDrawStraightLine(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId,this.identity,this.midPoint);}},getShapeSize:function D(){if(this.Shape===A._TICKER){var K=this.mChartContextPtr.GetGraphMatrixContext();return Math.round(0.5*K.mConstants.FixedTickerSize);}return 0;},GetBoundingRect:function E(){if(this.Shape===A._TICKER){this.mBBox=this.mBBox||new F.Rect2D();if(this.mBBox.width!==0){return this.mBBox;}var N=this.mDeviceStartPoint,M=this.mDeviceEndPoint,K=this.mBBox,L=Math.max(1,0.5*this.mFormatLinePtr.mLineThickness);if(N.x===M.x){K.x=Math.max(N.x-L,0);K.y=Math.min(N.y,M.y);K.width=2*L;K.height=Math.abs(N.y-M.y);}else{K.y=Math.max(N.y-L,0);K.x=Math.min(N.x,M.x);K.height=2*L;K.width=Math.abs(N.x-M.x);}return K;}else{return this._super();}},GetClockwisePolygon:function G(){var K=[new F.Point2D(),new F.Point2D(),new F.Point2D(),new F.Point2D()];var P=this.mDeviceStartPoint,M=this.mDeviceEndPoint;if(!P.isEqual(M)){var O=Math.max(this.mFormatLinePtr.mLineThickness/2,F.gOutlineBlack.mLineThickness/2);O=Math.max(O,2);var N=new F.Point2D({x:2*P.x-M.x,y:2*P.y-M.y});var L=new F.Point2D({x:2*M.x-P.x,y:2*M.y-P.y});this.GetAngularBisectorIntersectionPoint(M,P,N,O,K[0]);this.GetAngularBisectorIntersectionPoint(L,M,P,O,K[1]);this.GetAngularBisectorIntersectionPoint(P,M,L,O,K[2]);this.GetAngularBisectorIntersectionPoint(N,P,M,O,K[3]);}else{K[0].Reset(P.x-1,P.y-1);K[1].Reset(P.x+1,P.y-1);K[2].Reset(P.x+1,P.y+1);K[3].Reset(P.x-1,P.y+1);}return K;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartContext","GraphObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumBoxStyle");var F=mstrmojo.chart,H=F.enums,K=H.EnumCollectionType,C=H.EnumBoxStyle;mstrmojo.chart.GraphCollectionObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphCollectionObject",mGraphObjectCollection:[],mFormatFillPtr:null,mFormatFontPtr:null,mCollectionType:K.CT_NO_COLLECTION,init:function N(P){P.hasLine=false;this._super(P);var S=this.mChartContextPtr,R=this.mTripleId,Q=this.mCollectionType=P.CollectionType,O=P.Shape;this.mGraphObjectCollection=[];switch(this.mCollectionType){case K.CT_LINE:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);break;case K.CT_GENERAL_SHAPE:case K.CT_VERTICAL_AREA:case K.CT_VERTICAL_BAR:case K.CT_HORIZONTAL_AREA:case K.CT_HORIZONTAL_BAR:case K.CT_DEPTH_LINE_OR_LINE_MARKER:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);this.mFormatFillPtr=S.GetFormatFill(R,Q,O);break;case K.CT_TEXT:this.mFormatFontPtr=S.GetFormatFont(R);if(this.mFormatFontPtr.mFontBox!==C.BS_NOFRAME&&!S.mIsGraphMatrix){this.mFormatFillPtr=S.GetFormatFill(R,Q);this.mFormatLinePtr=S.GetFormatLine(R,Q,O);}break;case K.CT_NO_FORMAT:break;default:break;}},AddGraphObject:function G(P,O){if(O===undefined){O=true;}this.mGraphObjectCollection.push(P);P.mpParentObject=this;if(O){P.getFormatFromParent();}},ClearCollection:function J(){this.mGraphObjectCollection=[];},GetCollectionSize:function M(){return this.mGraphObjectCollection.length;},GetObjectByIndex:function D(O){return this.mGraphObjectCollection[O];},SetFormatFill:function A(O){this.mFormatFillPtr=O;},SetFormatFont:function E(O){this.mFormatFontPtr=O;},GetFormatFill:function L(){return this.mFormatFillPtr;},GetFormatFont:function B(){return this.mFormatFontPtr;},Replace:function I(O,P,Q){if(O>=0&&O<this.mGraphObjectCollection.length){if(Q===undefined){Q=true;}this.mGraphObjectCollection[O]=P;P.mpParentObject=this;if(Q){P.getFormatFromParent();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Vector2D","Point2D");var U=mstrmojo.chart,L=1e-14,I=0.1,m=0.001,S=1.732050807568877;function i(t){return(t-this.mP0.x)/(this.mP3.x-this.mP0.x);}function j(){return(this.mP0.y===this.mP1.y)&&(this.mP1.y===this.mP2.y)&&(this.mP2.y===this.mP3.y);}function Q(v){var u=1/(v+1);return(((this.mP0.y*v+3*this.mP1.y)*v+3*this.mP2.y)*v+this.mP3.y)*u*u*u;}function D(v){var u=1/(v+1);return(((this.mP1.y-this.mP0.y)*v+2*(this.mP2.y-this.mP1.y))*v+this.mP3.y-this.mP2.y)*u*u/(this.mP1.x-this.mP0.x);}function p(AA){var z=(1-AA)*this.mP0.y+AA*this.mP1.y,u=(1-AA)*this.mP1.y+AA*this.mP2.y,AB=(1-AA)*this.mP2.y+AA*this.mP3.y,y=(1-AA)*z+AA*u,t=(1-AA)*u+AA*AB,x=(1-AA)*y+AA*t,w=new U.Point2D({x:((1-AA)*this.mP0.x+AA*this.mP3.x),y:x}),v=new U.BezierCurve({P0:w,P1:t,P2:AB,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});this.mP3=w;this.mP1.Reset((2*this.mP0.x+this.mP3.x)/3,z);this.mP2.Reset((this.mP0.x+2*this.mP3.x)/3,y);return v;}function V(z,x,u,AB){var w;if(-L<z&&z<L){if(-L<x&&x<L){return ;}w=-u/(2*x);if(w<L){return ;}AB.push(w);return ;}var y=x*x-z*u;if(y<-L){return ;}if(-L<y&&y<L){w=-x/z;if(w<L){return ;}AB.push(w);return ;}var t=Math.sqrt(y),AA=(-x+t)/z,v=(-x-t)/z;if(AA>L){AB.push(AA);}if(v>L){AB.push(v);}}function s(u){var t=(u<0)?-1:1;return t*Math.pow(t*u,1/3);}function k(AK,AJ,AG,AF,AH){if(-L<=AK&&AK<=L){V.call(this,3*AJ,3*AG/2,AF,AH);return ;}var u=AJ/AK,AC=AG/AK,AL=AF/AK,AA=AC-u*u,z=(3*u*AC-AL)/2-u*u*u,AI=AA*AA*AA+z*z;if(AI>L){var AE=Math.sqrt(AI),AD=s.call(this,z+AE)+s.call(this,z-AE)-u;AH.push(AD);}else{if(AI>-L){var v=s.call(this,z);AH.push(2*v-u);AH.push((z<0?0.5:-1)*v-u);}else{var y=z*z-AI,w=Math.acos(z/Math.sqrt(y))/3,t=Math.pow(y,1/6),AB=t*Math.cos(w);AH.push(2*AB-u);var x=S*t*Math.sin(w);AH.push(-AB-u+x);AH.push(-AB-u-x);}}AH.sort();AH.reverse();while(AH.length!==0&&AH[AH.length-1]<=L){AH.pop();}}function d(t,u){var y=this.mP1.y-this.mP0.y,x=this.mP2.y-this.mP1.y,w=this.mP3.y-this.mP2.y,v=t*(this.mP3.x-this.mP0.x)/3;V.call(this,y-v,x-v,w-v,u);}function J(u,v){u.sort();u.reverse();var y=1;while(u.length!==0){var w=1/(u[u.length-1]+1);w*=y;u.pop();var t=this.mP0.x+(this.mP3.x-this.mP0.x)*w;if(Math.abs(t-this.mP0.x)>m&&Math.abs(this.mP3.x-t)>m){y=w;v.push(p.call(this,w));}}v.reverse();}function b(){if(this.mP0.x<this.mP3.x){return ;}this.mP0.swapPoints(this.mP3);var t=this.mP1;this.mP1=this.mP2;this.mP2=t;}function e(w,t){var v=this.Clone();b.call(v);if(w-v.mP0.x<L){return t?v:null;}if(v.mP3.x-w<L){return t?null:v;}var u=p.call(v,i.call(v,w));return t?u:v;}function R(t){this.mP0.y-=t.mP0.y;this.mP1.y-=t.mP1.y;this.mP2.y-=t.mP2.y;this.mP3.y-=t.mP3.y;}function Y(x){var t=[],v;k.call(this,this.mP0.y,this.mP1.y,this.mP2.y,this.mP3.y,t);if(t.length===0){return ;}var u=t.length;for(v=0;v<u;++v){var w=(t[v]*this.mP0.x+this.mP3.x)/(t[v]+1);x.push(w);}}function F(t,w){var AB=this.getMinX(),AA=this.getMaxX(),v=Math.min(t.x,w.x),x=Math.max(t.x,w.x);if(x-AB<I||AA-v<I){return false;}if(x-v<I){var y=this.evaluate(t.x);return(y-t.y)*(w.y-y)>-I;}v=Math.max(AB,v);x=Math.min(AA,x);var AC=(w.y-t.y)/(w.x-t.x),z=t.y+AC*(v-t.x),u=t.y+AC*(x-t.x);return(this.evaluate(v)-z)*(this.evaluate(x)-u)<-I;}function r(u,AA){var z=this.getMinX(),w=this.getMaxX(),t=u.getMinX(),y=u.getMaxX();if(w-I<t||y-I<z){return ;}if(z>t){r.call(u,this,AA);return ;}var v=null,x=null;if(w<y){v=e.call(this,t,true);x=e.call(u,w,false);}else{v=e.call(this,t,true);v=e.call(v,y,false);x=u.Clone();b.call(x);}R.call(v,x);Y.call(v,AA);}mstrmojo.chart.BezierCurve=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.BezierCurve",mP0:null,mP1:null,mP2:null,mP3:null,mIsVertical:false,init:function l(t){if(t.P0!==undefined&&t.P1!==undefined&&t.P2!==undefined&&t.P3!==undefined){this.mP0=new U.Point2D({Point2D:t.P0});this.mP1=new U.Point2D({Point2D:t.P1});this.mP2=new U.Point2D({Point2D:t.P2});this.mP3=new U.Point2D({Point2D:t.P3});this.mIsVertical=true;}if(t.P0!==undefined&&t.F1!==undefined&&t.F2!==undefined&&t.P3!==undefined){t.IsXAlwaysIndependent=t.IsXAlwaysIndependent||false;this.mP0=new U.Point2D({Point2D:t.P0});this.mP3=new U.Point2D({Point2D:t.P3});this.mIsVertical=t.IsVertical;if(!this.mIsVertical&&!t.IsXAlwaysIndependent){this.mP0.swap();this.mP3.swap();}if(this.mP3.x-this.mP0.x<L&&this.mP0.x-this.mP3.x<L){this.mP3.x=this.mP0.x+0.01;}this.mP1=new U.Point2D({x:(2*this.mP0.x+this.mP3.x)/3,y:t.F1});this.mP2=new U.Point2D({x:(this.mP0.x+2*this.mP3.x)/3,y:t.F2});}},getStartPoint:function E(){return this.mIsVertical?this.mP0:new U.Point2D({x:this.mP0.y,y:this.mP0.x});},getEndPoint:function C(){return this.mIsVertical?this.mP3:new U.Point2D({x:this.mP3.y,y:this.mP3.x});},getMinX:function M(){return this.mP0.x<this.mP3.x?this.mP0.x:this.mP3.x;},getMaxX:function o(){return this.mP0.x<this.mP3.x?this.mP3.x:this.mP0.x;},getStartIndependent:function g(){return this.mP0.x;},getEndIndependent:function O(){return this.mP3.x;},GetApproximatePolygon:function n(AA,AE){var AF=[],z;this.GetApproximatePolyline(AF);var AB=[],v=AF.length-1,x=this.mP1.x-this.mP0.x;AB.push((this.mP1.y-this.mP0.y)/x);for(z=1;z<v;++z){var AD=v/z-1;AB.push(D.call(this,AD));}AB.push((this.mP3.y-this.mP2.y)/x);var y=(AA+3)/2,u=AF.length,AG=2*u;if(AE===undefined){AE=[];}for(z=0;z<AG;++z){AE.push(null);}for(z=0;z<u;++z){var t=new U.Vector2D({x:-AB[z],y:1}),AC=y/t.Length(),w=new U.Point2D({x:t.x*AC+0.5,y:(t.y*AC+0.5)});AE[z]=AF[z].Shifted(w);AE[AG-1-z]=AF[z].NegativeShifted(w);}if(!this.mIsVertical){for(z=0;z<AG;++z){AE[z].swap();}}},GetApproximatePolyline:function N(w){var v=10,t=3,x=Math.floor(this.getMaxX()-this.getMinX()+0.5)/v,y;x=Math.max(t,x);w.push(new U.Point2D({x:this.mP0.x+0.5,y:this.mP0.y+0.5}));for(y=1;y<x;++y){var z=y/x;var u=1/z-1;w.push(new U.Point2D({x:((1-z)*this.mP0.x+z*this.mP3.x+0.5),6:(Q.call(this,u)+0.5)}));}w.push(new U.Point2D({x:this.mP3.x+0.5,y:(this.mP3.y+0.5)}));},isBefore:function Z(x,u){if(!this.mIsVertical){x.swap();}if(F.call(u,this.mP0,this.mP0.Shifted(x))||F.call(u,this.mP3,this.mP3.Shifted(x))){return true;}x.Reset(-x.x,-x.y);if(F.call(this,u.mP0,u.mP0.Shifted(x))||F.call(this,u.mP3,u.mP3.Shifted(x))){return true;}var t=Math.max(this.getMinX(),u.getMinX()),w=Math.min(this.getMaxX(),u.getMaxX());if(t-w>-0.1*I){return false;}var y=(t+w)/2,v=new U.Point2D({x:y,y:u.evaluate(y)});return F.call(this,v,v.Shifted(x));},SplitAtTangentPoints:function A(AA,u){if(AA.x===0){return ;}var z=[];d.call(this,AA.y/AA.x,z);var y=z.length,w=[],v;for(v=0;v<y;++v){var t=(z[v]*this.mP0.x+this.mP3.x)/(z[v]+1);if(Math.abs(this.evaluate2ndDerivative(t))>0.01*I){w.push(z[v]);}}J.call(this,w,u);},SplitAtIntersections:function a(t,v){var y=[];r.call(this,t,y);if(y.length===0){return ;}var x=[],w;var z=y.length;for(w=0;w<z;++w){var u=(y[w]-this.mP0.x);if(Math.abs(u)>m){x.push((this.mP3.x-this.mP0.x)/u-1);}}if(x.length===0){return ;}J.call(this,x,v);},GetControlPoints:function K(t){t.push(this.mP0);t.push(this.mP1);t.push(this.mP2);t.push(this.mP3);},Reverse:function c(){this.mP0.swapPoints(this.mP3);this.mP1.swapPoints(this.mP2);},MoveToStart:function X(t,w){var u=w?0.5:0,v=w&&j.call(this)?0.5:0;if(this.mIsVertical){t.MoveTo(this.mP0.x+u,this.mP0.y+v);}else{t.MoveTo(this.mP0.y+v,this.mP0.x+u);}},CurveToEnd:function f(u,x){var v=x?0.5:0,w=x&&j.call(this)?0.5:0,t=(Math.abs(this.mP0.x-this.mP1.x)<0.5)?0.5:0;if(this.mIsVertical){u.BezierCurveTo(this.mP1.x+t,this.mP1.y+w,this.mP2.x+t,this.mP2.y+w,this.mP3.x+v,this.mP3.y+w);}else{u.BezierCurveTo(this.mP1.y+w,this.mP1.x+t,this.mP2.y+w,this.mP2.x+t,this.mP3.y+w,this.mP3.x+v);}},LineToStart:function T(t,w){var u=w?0.5:0,v=w&&j.call(this)?0.5:0;if(this.mIsVertical){t.LineTo(this.mP0.x+u,this.mP0.y+v);}else{t.LineTo(this.mP0.y+v,this.mP0.x+u);}},GetMinMax:function h(){var u={MinY:Math.min(this.mP0.y,this.mP3.y)+0.5,MaxY:Math.max(this.mP0.y,this.mP3.y)+0.5};if((this.mP1.y>=u.MinY&&this.mP2.y>=u.MinY)&&(this.mP1.y<=u.MaxY&&this.mP2.y<=u.MaxY)){return u;}var t=[];d.call(this,0,t);while(t.length!==0){var v=(Q.call(this,t[t.length-1])+0.5);t.pop();u.MinY=Math.min(u.MinY,v);u.MaxY=Math.max(u.MaxY,v);}return u;},Clone:function G(){return new U.BezierCurve({P0:this.mP0,P1:this.mP1.y,P2:this.mP2.y,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});},evaluate:function W(v){var u=(v-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*u+(this.mP2.y-2*this.mP1.y+this.mP0.y)*3)*u+(this.mP1.y-this.mP0.y)*3)*u+this.mP0.y;},evaluateDerivative:function B(v){var u=(v-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*u+(this.mP2.y-2*this.mP1.y+this.mP0.y)*2)*u+(this.mP1.y-this.mP0.y))*3/(this.mP3.x-this.mP0.x);},evaluate2ndDerivative:function P(v){var y=this.mP1.y-this.mP0.y,x=this.mP2.y-this.mP1.y,w=this.mP3.y-this.mP2.y,t=this.mP3.x-this.mP0.x,u=(v-this.mP0.x)/(this.mP3.x-this.mP0.x);return 6*(x-y+(w-2*x+y)*u)/(t*t);},evaluate3rdDerivative:function H(){var t=this.mP3.x-this.mP0.x;return 6*(this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)/(t*t*t);},CloneReverseShift:function q(t){if(!this.mIsVertical){t.swap();}return new U.BezierCurve({P0:this.mP3.Shifted(t),P1:this.mP2.y+t.y,P2:this.mP1.y+t.y,P3:this.mP0.Shifted(t),IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","GraphObjectManager");mstrmojo.chart.GraphObjectAggregation=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphObjectAggregation",mGraphObjectList:null,mStartFrameGraphObjectList:null,init:function I(J){this._super(J);this.mGraphObjectList=[];this.mStartFrameGraphObjectList=[];},AddGraphObject:function F(K,J){if(J){this.mStartFrameGraphObjectList.push(K);}else{this.mGraphObjectList.push(K);}},Clear:function B(K,J){if(K){this.mStartFrameGraphObjectList=[];}if(J){this.mGraphObjectList=[];}},ObjectInRectangle:function D(J){return false;},GetClockwisePolygon:function G(){return[];},SetProgress:function H(K){var J=this.mGraphObjectList,M=J.length,L;this._super(K);for(L=0;L<M;++L){J[L].SetProgress(this.mProgress);}},OnPointDetectionEx:function C(N,L,O,J,K,M){return mstrmojo.chart.GraphObjectManager.prototype.OnPointDetectionByList.apply(this,[this.mGraphObjectList,N,L,O,J,K,M]);},Draw:function A(){var M=this.mChartContextPtr,J=this.mGraphObjectList,L=J.length,K;if(this.mIsAnimationEnabled){M.BeginFirstFrame();for(K=0;K<L;++K){this.mStartFrameGraphObjectList[K].Draw();}M.EndFrame();M.BeginLastFrame();}for(K=0;K<L;++K){J[K].Draw();}M.EndFrame();},IsLayerObject:function E(){return true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","BezierCurve");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");var Q=mstrmojo.chart,L=Q.enums,k=L.EnumLineJoinType,F=L.EnumLineStyle,R=103,a=0.087,c=0.01;function U(n){var o=n.x;n.x=n.y;n.y=o;}function C(n,p){var o=this.mBezierCurves,r=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),q;if(n){r.AddBezierCurveLine(n);}var s=o.length;for(q=p;q<s;++q){r.AddBezierCurveLine(o[q]);}o.splice(p,o.length-p);return r;}function f(r,z){var w=this.mBezierCurves,x=(r.y)/r.x,AB=w.length,u,t,s;for(t=0;t<AB;++t){var q=[];w[t].SplitAtTangentPoints(r,q);if(q.length!==0){var o=q.length;for(s=0;(s+1)<o;++s){z.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:q[s]}));}u=C.call(this,q[q.length-1],t+1);f.call(u,r,z);z.push(u);return ;}if((t+1)<w.length){var v=w[t].getEndIndependent(),p=w[t].evaluateDerivative(v);if(Math.abs(p-x)<Math.abs(1+p*x)*a){var y=w[t].evaluate2ndDerivative(v),n=w[t].evaluate3rdDerivative(),AA=w[t].evaluate3rdDerivative();if((Math.abs(y)>=0.1*c)||(n*AA<-c)){u=C.call(this,null,t+1);f.call(u,r,z);z.push(u);return ;}}}}}function m(s,v){var t=this.mBezierCurves,x=this.mBezierCurves.length,n=s.mBezierCurves.length,r,q,p;for(r=0;r<x;++r){for(q=0;q<n;++q){var u=[];t[r].SplitAtIntersections(s.mBezierCurves[q],u);if(u.length!==0){var o=u.length;for(p=0;(p+1)<o;++p){v.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:u[p]}));}var w=C.call(this,u[u.length-1],r+1);m.call(w,s,v);v.push(w);return ;}}}}function S(u,w){var v=this.mBezierCurves,z=v.length,r=u.mBezierCurves.length,t,s;for(t=1;t<z;++t){var p=v[t].getStartPoint();for(s=1;s<r;++s){var q=u.mBezierCurves[s].getStartPoint();if(Math.abs(p.x-q.x)<c&&Math.abs(p.y-q.y)<c){var x=v[t].evaluateDerivative(v[t].getStartIndependent());var n=u.mBezierCurves[s].evaluateDerivative(u.mBezierCurves[s].getStartIndependent());var o=Math.abs(x-n)<Math.abs(1+x*n)*a;if(!o){var y=C.call(this,null,t);S.call(y,u,w);w.push(y);return ;}}}}}function E(p,t,s,o){var n=t.length,r;for(r=0;r<n;++r){o.push(0);}t[0]/=p[0];s[0]/=p[0];for(r=1;r<n;++r){var q=p[r]-t[r-1];t[r]/=q;s[r]=(s[r]-s[r-1])/q;}o[n-1]=s[n-1];for(r=n-2;r>=0;r--){o[r]=s[r]-t[r]*o[r+1];}}function J(w){var u=this.mBezierCurves,r=[],p=[],o=[],x=w.length,q;for(q=0;q<x;++q){var v,s;if(q===0){v=0;s=1;}else{if(q===w.length-1){v=w.length-2;s=w.length-1;}else{v=q-1;s=q+1;}}var n=this.mIsVertical?w[v].y:w[v].x,t=this.mIsVertical?w[s].y:w[s].x;o.push(t-n);}for(q=0;q<w.length;++q){r.push(4);}r[0]-=2;r[r.length-1]-=2;for(q=0;q<w.length;++q){p.push(1);}var y=[];E.call(this,r,p,o,y);for(q=0;q<x-1;++q){if(this.mIsVertical){u.push(new Q.BezierCurve({P0:w[q],F1:w[q].y+y[q],F2:w[q+1].y-y[q+1],P3:w[q+1],IsVertical:this.mIsVertical}));}else{u.push(new Q.BezierCurve({P0:w[q],F1:w[q].x+y[q],F2:w[q+1].x-y[q+1],P3:w[q+1],IsVertical:this.mIsVertical}));}}}function O(AF){var r=this.mChartContextPtr,AB=this.mFormatLinePtr.mLineStyle,w,v,AG;if(r.mImageFormat===R){return ;}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||r.mUseAnimation){return ;}r.NewPath();var s=AF.length;if(s<2){return ;}var o=Q.FormatLine.getLinePattern(AB),u=o.length,AA=0,q=0,p=[],z=[];for(w=0;w<s;++w){z.push(0);p.push(0);}var AE=AF[0].x;var AD=AF[0].y;var AC=0.05;if(AB===F.LS_DOT_DOT_DOT){AC=0.03;o[u-1]*=3;}else{if(AB===F.LS_DOT){AC=0.005;}}for(AG=0;AG<=1;AG+=AC/s){for(w=1;w<s;++w){for(v=0;v<s-w;++v){if(w===1){p[v]=AF[v].x*(1-AG)+AF[v+1].x*AG;z[v]=AF[v].y*(1-AG)+AF[v+1].y*AG;continue;}p[v]=p[v]*(1-AG)+p[v+1]*AG;z[v]=z[v]*(1-AG)+z[v+1]*AG;}}q+=Math.sqrt((AE-p[0])*(AE-p[0])+(AD-z[0])*(AD-z[0]));if(q>=o[AA]){if(AA%2===0){if(this.mIsVertical){r.MoveTo(AE,AD);r.LineTo(p[0],z[0]);}else{r.MoveTo(AD,AE);r.LineTo(z[0],p[0]);}}AA=(AA+1)%u;q=0;AE=p[0];AD=z[0];}}}mstrmojo.chart.CurveLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.CurveLineObject",mBezierCurves:[],mIsVertical:false,isClosePath:false,identity:null,startPoint:null,midPoint:null,endPoint:null,init:function h(n){this.mBezierCurves=[];if(n.hasLine===undefined){n.hasLine=true;}if(n.IsVertical===undefined){n.IsVertical=true;}if(n.IsClosePath===undefined){n.IsClosePath=false;}n.GraphCollectionObject=n.GraphCollectionObject||null;this._super(n);this.isClosePath=n.IsClosePath;if(n.BezierCurvePtr){this.mBezierCurves.push(n.BezierCurvePtr);this.mIsVertical=n.BezierCurvePtr.mIsVertical;}else{this.mIsVertical=n.IsVertical;if(n.Points){J.call(this,n.Points);}}if(n.Identity){this.identity=n.Identity;}},Draw:function e(){var s=this.mChartContextPtr,t=this.mBezierCurves,r=s.GetLineJoin(),AE,w,AD=[],z=[],AF,u,AB,AA,AG,v,x,AC,AH;if(t.length===0){return ;}s.SetLineJoin(k.LJT_ROUND);this.SetLineWidth();w=t.length;if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||s.mUseAnimation){s.NewPath();t[0].MoveToStart(s);for(AE=0;AE<w;++AE){t[AE].CurveToEnd(s);}}else{for(AE=0;AE<w;++AE){t[AE].GetControlPoints(AD);O.call(this,AD);this.ApplyLineFormat();}}if(this.isClosePath){s.ClosePath();}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||s.mUseAnimation){this.ApplyLineFormat();}s.SetLineJoin(r);for(AE=0;AE<w;++AE){var y=t[AE],q=new Q.Point2D({Point2D:y.mP0}),p=new Q.Point2D({Point2D:y.mP1}),o=new Q.Point2D({Point2D:y.mP2}),n=new Q.Point2D({Point2D:y.mP3});if(!this.mIsVertical){q.swap();p.swap();o.swap();n.swap();}z.push(q);z.push(p);z.push(o);z.push(n);}if((this.startPoint===undefined||this.startPoint===null)&&(this.endPoint===undefined||this.endPoint===null)&&(this.midPoint===undefined||this.midPoint===null)){AF=z.length;this.startPoint={x:z[0].x,y:z[0].y};this.endPoint={x:z[AF-1].x,y:z[AF-1].y};if(w%2===0){this.midPoint={x:z[AF/2-1].x,y:z[AF/2-1].y};}else{u=(w-1)/2;AB=(t[u].mP0.x+t[u].mP3.x)/2;AA=t[u].evaluate(AB);if(!this.mIsVertical){AG=AB;AB=AA;AA=AG;}this.midPoint={x:AB,y:AA};}}else{if(!this.mIsVertical){U.call(this,this.startPoint);U.call(this,this.midPoint);U.call(this,this.endPoint);}}s.FinishDrawCurves(z,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},DrawOutLine:function j(){var q=this.mChartContextPtr,n=this.mBezierCurves,o;this.SetOutlineWidth();q.NewPath();n[0].MoveToStart(q);var p=n.length;for(o=0;o<p;++o){n[o].CurveToEnd(q);}this.ApplyOutlineFormat();},PointInObject:function K(q){var p=this.mBezierCurves,o=(this.mFormatLinePtr.mLineThickness<4)?4:this.mFormatLinePtr.mLineThickness,n=p.length,s,r;for(s=0;s<n;++s){r=[];p[s].GetApproximatePolygon(o,r);if(q.IsInPolygon(r)){return true;}}return false;},ObjectInRectangle:function i(s){var o=this.mBezierCurves,n=(this.mFormatLinePtr.mLineThickness<1)?1:this.mFormatLinePtr.mLineThickness,t=o.length,r,p,q;for(r=0;r<t;++r){q=[];o[r].GetApproximatePolygon(n,q);for(p=0;p<q.length;++p){if(!s.PointInRectangle(q[p])){return false;}}}return true;},AddBezierCurveLine:function W(n){var o=this.mBezierCurves;if(o.length===0){this.mIsVertical=n.mIsVertical;}o.push(n);},GetClockwisePolygon:function B(){return[];},MoveToStart:function V(n){var o=this.mChartContextPtr;this.mBezierCurves[0].MoveToStart(o,n&&o.NeedAdjustedLinePath());},CurveToEnd:function b(q){var r=this.mChartContextPtr,n=this.mBezierCurves,p=n.length,o;for(o=0;o<p;++o){n[o].CurveToEnd(r,q&&r.NeedAdjustedLinePath());}},DashedCurveToEnd:function N(o,r){var s=this.mChartContextPtr,u=this.mBezierCurves,AD=u.length,AK,AI,AE;for(AK=0;AK<AD;++AK){var AJ=[];u[AK].GetControlPoints(AJ);var AL=AJ.length;if(AL<4){return ;}var p=(r&&s.NeedAdjustedLinePath()),AN=p?0.5:0,z=p&&(AJ[0].y===AJ[1].y&&AJ[1].y===AJ[2].y&&AJ[2].y===AJ[3].y)?0.5:0,n=(Math.abs(AJ[0].x-AJ[1].x)<0.5)?0.5:0;AJ[1].x+=n;AJ[1].y+=z;AJ[2].x+=n;AJ[2].y+=z;AJ[3].x+=AN;AJ[3].y+=z;var AG=Q.FormatLine.getLinePattern(o),AF=AG.length,AM=0,q=0,w=[],AC=[];for(AK=0;AK<AL;++AK){AC.push(0);w.push(0);}var AB=AJ[0].x,AA=AJ[0].y;var v=0.05;if(o===F.LS_DOT_DOT_DOT){v=0.03;AG[AF-1]*=2;}else{var AH=11.2;for(AI=0;AI<AF;++AI){if(AI%2===0){AG[AI]*=AH;}}}for(AE=0;AE<=1;AE+=v/AL){for(AK=1;AK<AL;++AK){for(AI=0;AI<AL-AK;++AI){if(AK===1){w[AI]=AJ[AI].x*(1-AE)+AJ[AI+1].x*AE;AC[AI]=AJ[AI].y*(1-AE)+AJ[AI+1].y*AE;continue;}w[AI]=w[AI]*(1-AE)+w[AI+1]*AE;AC[AI]=AC[AI]*(1-AE)+AC[AI+1]*AE;}}q+=Math.sqrt((AB-w[0])*(AB-w[0])+(AA-AC[0])*(AA-AC[0]));if(q>=AG[AM]){if(AM%2===0){if(this.mIsVertical){s.MoveTo(AB,AA);s.LineTo(w[0],AC[0]);}else{s.MoveTo(AA,AB);s.LineTo(AC[0],w[0]);}}AM=(AM+1)%AF;q=0;AB=w[0];AA=AC[0];}}}},LineToStart:function P(n){var o=this.mChartContextPtr;this.mBezierCurves[0].LineToStart(o,n&&o.NeedAdjustedLinePath());},getStartPoint:function X(){return this.mBezierCurves[0].getStartPoint();},getEndPoint:function D(){var n=this.mBezierCurves;return n[n.length-1].getEndPoint();},evaluate:function T(q){var o=this.mBezierCurves,s=o.length,p;for(p=0;(p+1)<s;++p){var n=o[p].getMinX();var r=o[p].getMaxX();if(n-q<c&&q-r<c){return o[p].evaluate(q);}}return o[o.length-1].evaluate(q);},GetMinMax:function d(){var n=this.mBezierCurves,r=n.length,p,o,q;if(r>0){p=n[0].GetMinMax();for(o=1;o<r;++o){q=n[o].GetMinMax();if(q.MinY<p.MinY){p.MinY=q.MinY;}if(q.MaxY>p.MaxY){p.MaxY=q.MaxY;}}}return p;},GetApproximatePolyline:function M(q){var n=this.mBezierCurves,p,o,s,t,r;n[0].GetApproximatePolyline(q);s=n.length;for(p=1;p<s;++p){t=[];n[p].GetApproximatePolyline(t);r=t.length;for(o=1;o<r;++o){q.push(t[o]);}}},CloneReverseShift:function l(q){var n=this.mBezierCurves,p=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),o;for(o=n.length-1;o>-1;--o){p.AddBezierCurveLine(n[o].CloneReverseShift(q));}return p;},Clone:function I(){var n=this.mBezierCurves,p=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),q=n.length,o;for(o=0;o<q;++o){p.AddBezierCurveLine(n[o].Clone());}return p;},Reverse:function Z(){var n=this.mBezierCurves,p=n.length,o;for(o=0;o<p;++o){n[o].Reverse();}n.reverse();},getMinX:function H(){var n=this.mBezierCurves,p=Number.MAX_VALUE,r=n.length,o;for(o=0;o<r;++o){var q=n[o].getMinX();if(q<p){p=q;}}return p;},getMaxX:function g(){var o=this.mBezierCurves,n=Number.MIN_VALUE,r=o.length,p;for(p=0;p<r;++p){var q=o[p].getMaxX();if(q>n){n=q;}}return n;},isBefore:function G(t,r){var o=this.mBezierCurves,s=o.length,n=r.mBezierCurves.length,q,p;for(q=0;q<s;++q){for(p=0;p<n;++p){if(o[q].isBefore(t,r.mBezierCurves[p])){return true;}}}return false;},SplitAtTangentPoints:function A(o,n){if(!this.mIsVertical){o.swap();}if(o.x===0){return ;}f.call(this,o,n);},SplitAtIntersections:function Y(q,n){var p=[];m.call(this,q,p);n=p;S.call(this,q,n);var r=p.length,o;for(o=0;o<r;++o){S.call(p[o],q,n);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","StraightLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumAxisDirection","EnumAxisLabelsLocation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var D=mstrmojo.chart,H=D.enums,J=H.EnumAxisDirection,C=H.EnumAxisLabelsLocation,A=mstrmojo.chart.model,B=A.enums,E=B.EnumDSSGraphObject,F=D.gNullTripleId;mstrmojo.chart.CategoryAxisInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CategoryAxisInfo",mId:F,mAxisLabelsLocation:C.ALL_BOTTOM,mAxisDirection:J.AD_X,init:function K(L){this._super(L);this.mId=new D.TripleId({ObjectId:E.DssGraphO1Body,SeriesId:0});this.mAxisLabelsLocation=C.ALL_BOTTOM;this.mAxisDirection=J.AD_X;},ToX:function I(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_X;this.mAxisLabelsLocation=C.ALL_BOTTOM;},ToY:function G(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_Y;this.mAxisLabelsLocation=C.ALL_LEFT;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect");mstrmojo.requiresClsP("mstrmojo.chart","Polygon2D","ShapeObject","FormatLine");var H=mstrmojo.chart,M=H.enums,K=M.EnumLineJoinType,Q=M.EnumLineStyle,B=mstrmojo.chart.model,C=B.enums,J=C.EnumDSSGraphObject,N=C.EnumDSSGraphFillBevelEffect;function I(){var X=this.mChartContextPtr,V=this.mFormatLinePtr,S=this.mDevicePolygon,R=S.length,W,T=[],U;if(V.mLineStyle!==Q.LS_SOLID&&V.mLineStyle!==Q.LS_GRADIENT&&!X.mUseAnimation){X.NewPath();X.MoveTo(S[R-1].x,S[R-1].y);W=R-1;for(U=0;U<R;++U){T=V.getLinePattern(V.mLineStyle);X.DrawDashedLine(S[W],S[U],T);W=U;}X.ClosePath();}}mstrmojo.chart.PolygonObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PolygonObject",mDevicePolygon:[],mHasHole:false,mPointsStyle:0,init:function P(T){var R,S;this._super(T);this.mDevicePolygon=[];if(T){if(T.Polygon!==undefined){R=T.Polygon.length;for(S=0;S<R;++S){this.mDevicePolygon.push(T.Polygon[S]);}}else{if(T.Points!==undefined){R=T.Points.length;for(S=0;S<R;++S){this.mDevicePolygon.push(T.Points[S]);}}}if(T.HasHole!==undefined){this.mHasHole=T.HasHole;}}},Draw:function A(){var Y=this.mChartContextPtr,R=this.mDevicePolygon,T=Y.GetLineJoin(),U=[],V,W=[],X=0,S;Y.SetLineJoin(K.LJT_ROUND);this.SetLineWidth();Y.DrawPolygon(R,false);this.ApplyFillFormat();if(this.mHasHole){V=Math.floor(R.length/2);U=U.concat(R.slice(0,V-1));Y.DrawPolygon(U,true);if(this.mFormatLinePtr||this.mFormatLinePtr.mLineStyle===Q.LS_SOLID){this.ApplyLineFormat();}U.splice(0,U.length);U=U.concat(R.slice(V+1,R.length));Y.DrawPolygon(U,true);I.call(this);this.ApplyLineFormat();}else{if(Y.mIsTimeSeriesChart&&this.mTripleId.mObjectId===J.DssGraphRiser){X=Math.floor(R.length/2);for(S=0;S<X;++S){W.push(R[S]);}Y.DrawPolyLine(W,true);}else{if(Y.NeedAdjustedLinePath()){Y.DrawPolygon(R,true);}}I.call(this);this.ApplyLineFormat();}Y.SetLineJoin(T);Y.FinishDrawPolygon(R,this.mPointsStyle,this.mTripleId);},PointInObject:function E(S){var R=this.mDevicePolygon;if(!this.mIsDetectable){return false;}if(R.length<3){return false;}return S.IsInPolygon(R);},DrawOutLine:function G(){var U=this.mChartContextPtr,R=this.mDevicePolygon,S=[],T;if(R.length<3){return ;}this.SetOutlineWidth();if(this.mHasHole){T=Math.floor(R.length/2);S=S.concat(R.slice(0,T-1));U.DrawPolygon(S,true);this.ApplyOutlineFormat();S.splice(0,S.length);S=S.concat(R.slice(T+1,R.length));U.DrawPolygon(S,true);this.ApplyOutlineFormat();}else{U.DrawPolygon(R,true);this.ApplyOutlineFormat();}},ObjectInRectangle:function D(T){var R=this.mDevicePolygon,U=R.length,S;if(!this.mIsDetectable){return false;}if(U<3){return false;}for(S=0;S<U;++S){if(!T.PointInRectangle(R[S])){return false;}}return true;},GetBoundingRect:function F(){return this.GetBoundingRectFromPolygon(this.mDevicePolygon);},GetClockwisePolygon:function L(){var R=H.Polygon2D.clone(this.mDevicePolygon);this.MakePolygonClockwise(R);return R;},FillBevel:function O(){var W=this.mFormatFillPtr;if(W.supportAdvancedFill(0)===false){return ;}var S=this.mDevicePolygon,V=W.mFillBevel.type,T=[],R,U;if(S.length<3){return ;}if(this.mHasHole&&(V===N.DssGraphFillBevelChiselEdge||V===N.DssGraphFillBevelSmoothEdge)){T=T.concat(S);R=T.length;S.splice(0,R);for(U=0;(U+1)*2<R;++U){S[0]=T[U];S[1]=T[U+1];S[2]=T[R-2-U];S[3]=T[R-1-U];this._super();}S.splice(0,S.length);this.mDevicePolygon=S.concat(T);}else{this._super();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","FormatFont","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresCls("mstrmojo.chart.common.Utility","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumAnchorPoint","EnumBoxStyle","EnumFontAlignment","EnumFontRotation","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var r=mstrmojo.chart,X=r.enums,k=r.model,d=k.enums,K=X.EnumCollectionType,s=X.EnumGraphMajorType,p=mstrmojo.VisUtility,AB=X.EnumAnchorPoint,i=X.EnumBoxStyle,f=X.EnumFontAlignment,P=X.EnumFontRotation,M=X.EnumRectExpandDirection,AF=d.EnumDSSGraphObject,V=r.common.Utility;var AK=true;var R=false,c=65280,x=0.03,U=0,Y=0,T=0.2,F=0.85,e=0,G=0;var AG=new r.Point2D(),o=new r.Point2D(),Z=new r.Point2D(),t=new r.Rect2D(),N=new r.Rect2D();function m(AV){var AU=this.mChartContextPtr,AR=true,AS,AT=AU.IsVertical();if(!AR){return 0;}if(AT){switch(AV.mObjectId){case AF.DssGraphY1Label:case AF.DssGraphY2Label:return(0.5*this.mFontHeight);case AF.DssGraphX1Label:if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){AS=this.GetTransformedRect(true);return(0.5*AS.height)+1;}return 0;default:return 0;}}if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){switch(AV.mObjectId){case AF.DssGraphX1Label:case AF.DssGraphX2Label:case AF.DssGraph2DO1Label:AS=this.GetTransformedRect(true);return(0.5*AS.height)+1;default:return 0;}}return 0;}function z(AT){var AR=true;var AS=this.mChartContextPtr;if(AR){switch(AT.mObjectId){case AF.DssGraph2DO1Label:case AF.DssGraph2DO2Label:if(AS.IsGridChart()||AS.IsVertical()){return Math.ceil(0.25*this.mFontHeight);}return 0;case AF.DssGraphDataText:return Math.ceil(0.2*this.mFontHeight);default:return 0;}}return 0;}function AE(){if(!this.mIsShown||!this.mText.localeCompare("")){return false;}if(!this.mIsOnScreen){return false;}if(this.mChartContextPtr.mImageFormat===103){var AR=this.rect;return(AR.width>0&&AR.height>0);}return true;}function u(AZ,AW,AS){var AV=this.mSubTextHolder,AY=this.mFormatFontPtr,AX,AT,AR=0,AU=AV.mVecPartition[AZ];for(AT=0;AT<AW-AU;AT++){AX=AS[AT];if(AX.Truncated){AR+=AV.GetStringWidth(AX.Word,AY);}else{AR+=AV.GetOneWordWidth(AX.Index);}if(AS.length>0){AR+=AV.GetSpaceWidth();}}return AR;}function AQ(){var AT=this.mChartContextPtr,AS=this.mpParentObject;this.mFormatFontPtr=(AS===null)?AT.GetFormatFont(this.mTripleId):AS.GetFormatFont();var AR=this.mFormatFontPtr;if(AR.mFontBox!==i.BS_NOFRAME&&AT.mIsGraphMatrix===false){if(AS===null){this.mFormatFillPtr=AT.GetFormatFill(this.mTripleId,K.CT_NO_COLLECTION);if(!R){this.mFormatLinePtr=AT.GetFormatLine(this.mTripleId,K.CT_NO_COLLECTION,-1);}}else{this.mFormatFillPtr=AS.GetFormatFill();if(!R){this.mFormatLinePtr=AS.mFormatLinePtr;}}}}function D(AS){AS=AS||false;var AR=8,AT=this.mFormatFontPtr;if(AT){if(AS){AR=AT.GetStringExtent("H").Height;}else{AR=AT.GetFontExtent();}}AR=Math.floor(AR*F+0.5);return AR;}function J(){var AR=this.mFormatFontPtr,AW=this.mChartContextPtr,AT,AV,AS;this.mFontHeight=D.call(this,true);if(AW.mIsGraphMatrix){var AU=AR.evalMargins();this.mWidthEdgeMargin=AU[0]||0;this.mHeightEdgeMargin=AU[1]||0;this.mTextLineSpace=AU[2]||0;}else{AV=this.mChartContextPtr.GetGraphMajorType();AS=(AV===s.GMT_3D_SCATTER||AV===s.GMT_3D_CATEGORY);AT=AR.mFontBox!==i.BS_NOFRAME;this.mDoubleLineMargin=this.mDoubleLineMargin||0;this.mDoubleLineMargin=Math.floor(AR.mFontSize*T+0.5);if(this.mDoubleLineMargin===0){this.mDoubleLineMargin=1;}this.mWidthEdgeMargin=Math.floor(AR.mFontSize*x+0.5);if((this.mWidthEdgeMargin===0&&AT)||AS){this.mWidthEdgeMargin=1;}this.mHeightEdgeMargin=Math.floor(AR.mFontSize*U+0.5);if((this.mHeightEdgeMargin===0&&AT)||AS){this.mHeightEdgeMargin=1;}this.mTextLineSpace=Math.floor(AR.mFontSize*Y+0.5);if(this.mTextLineSpace===0){this.mTextLineSpace=1;}switch(AR.mFontBox){case i.BS_NOFRAME:break;case i.BS_SINGLE_LINE_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin;this.mHeightEdgeMargin+=this.mDoubleLineMargin;break;case i.BS_DOUBLE_LINE_FRAME:case i.BS_BEVELED_FRAME:case i.BS_REVERSE_BEVELED_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin*2;this.mHeightEdgeMargin+=this.mDoubleLineMargin*2;break;}}}function AI(){var AR=0;switch(this.mFormatFontPtr.mFontRotation){case P.FR_45:AR=45;break;case P.FR_90:AR=90;break;case P.FR_180:AR=180;break;case P.FR_270:AR=270;break;case P.FR_315:AR=315;break;default:break;}return r.gModuleMain.DegreeToRadian(-AR);}function h(){var AT;var AR=[],AS=this.rect;AG.x=AS.x+AS.width/2;AG.y=AS.y+AS.height/2;AT=AI.call(this);AR.push(new r.Point2D({x:AS.x,y:AS.y}).rotateAndClone(AG,AT));AR.push(new r.Point2D({x:AS.x+AS.width,y:AS.y}).rotateAndClone(AG,AT));AR.push(new r.Point2D({x:AS.x+AS.width,y:AS.y+AS.height}).rotateAndClone(AG,AT));AR.push(new r.Point2D({x:AS.x,y:AS.y+AS.height}).rotateAndClone(AG,AT));return AR;}function w(AX,AT,AZ){var AV,AU,AS,AR,AW,AY=AX.length;for(AV=1;AV<=AY;++AV){AU=AX.substring(0,AY-AV);AS=AU.concat("...");AW=this.mFormatFontPtr.GetStringExtent(AS);AR=AW.Width;if(AR<AT){AZ.Text=AS;AZ.TextWidth=AR;return true;}}return false;}function L(AW,Af,AV,AX){var Ah={},AZ=AW.length;AX=AX||false;if(AX){var Ab=0,Ag=0,Ae=true,Ai=this.mSubTextHolder,AR=Ai.GetSpaceWidthEx(this.mFormatFontPtr),AS=this.mFormatFontPtr.GetStringExtent("...").Width,AT="",Aa=-1;if(AS>Af){return false;}var Ad;for(Ad=0;Ad<AZ;Ad++){Ag=Ai.GetOneWordWidth(AW[Ad]);if(Ab+(Ad>0?AR:0)>Af-AS){break;}if(Ab+Ag+(Ad>0?AR:0)>Af-AS){break;}AT=AT.concat(Ai.mVecStr[AW[Ad]]);if(Ad>0){AT=AT.concat(" ");}Ab+=Ag+(Ad>0?AR:0);Aa=Ad;}var Ac,AY=0;for(Ac=0;Ac<=Aa;Ac++){AY=AW[Ac];AV.Texts.push({Truncated:true,Index:AY,Word:Ai.mVecStr[AY]});}if(Ad>=AZ){p.visPrint("where is the truncated word....");return true;}Af-=Ab;if(Ae===false&&Aa!==-1){Af-=AR;}AY=AW[Ad];var AU="";AU=AU.concat(Ai.mVecStr[AY]);if(w.call(this,AU,Af,Ah)){AV.Texts.push({Truncated:true,Highlighted:false,Index:AY,Word:Ah.Text});Ab+=Ah.TextWidth;}else{p.visPrint("Should have truncated, but...");AV.Texts.push({Truncated:false,Highlighted:false,Index:AY,Word:Ai.mVecStr[AY]});Ab+=((AY===0?0:AR)+Ai.GetOneWordWidth(AY));}AV.TextWidth=Ab;AV.TextXBearing=0;return true;}if(w.call(this,AW,Af,Ah)){AV.TextWidth=Ah.TextWidth;AV.TextXBearing=0;AV.Texts.push({Truncated:true,Highlighted:false,Index:-1,Word:Ah.Text});return true;}return false;}function AO(Ae,AZ){var AR=this.mChartContextPtr,AY=this.mSubTextHolder,AT={TextWidth:0,TextXBearing:0,Texts:[]},AV,AS,AU;AZ=AZ||false;AS=AY.GetOneLineWidth(Ae);AV=AY.GetOneLineString(Ae);if(AS<=this.rect.width+(AK?4:0)){AT.TextXBearing=AY.GetOneLineXBearing(Ae);AT.TextWidth=AS;if(AZ){var AW,Ad=-1,Aa=AY.GetOneLineWords(Ae);for(AW=0;AW<Aa.length;AW++){Ad=Aa[AW];AT.Texts.push({Index:Ad,Word:AY.mVecStr[Ad],Highlighted:false,Truncated:false});}}else{AT.Texts.push({Index:-1,Word:AV,Highlighted:false,Truncated:false});}return AT;}var AX=AR.mIsGraphMatrix,Ac=AZ?AY.GetOneLineWords(Ae):AV;if(AX&&!AR.isUADataAreaOutput()){if(this.mFormatFontPtr.mFontRotation===P.FR_90){var Ab=this.GetBoundingRect(true);if(Ab.y+AS>AR.mGraphHeight){if(L.call(this,Ac,AR.mGraphHeight,AT,AZ)){this.mIsTruncated=true;return AT;}}}if(this.rect.x<0&&AS>this.rect.width+this.rect.x){if(L.call(this,Ac,this.rect.width+this.rect.x,AT,AZ)){this.mIsTruncated=true;return AT;}}}if(L.call(this,Ac,this.rect.width,AT,AZ)){this.mIsTruncated=true;return AT;}this.mIsTruncated=true;AU=this.mFormatFontPtr.GetStringExtent(AT.Text);AT.TextWidth=AU.Width;AT.TextXBearing=0;AT.Texts.push({Index:-1,Word:AX?"":"...",Highlighted:false,Truncated:true});return AT;}function O(Ac,Af,Aa){var AU=this.mChartContextPtr,AY,Ab,AR,Ae,AV=this.mFormatFontPtr,AZ;Aa=Aa||false;AY=AO.call(this,Af,Aa);Ab=AY.Text;AR=AY.Texts;AZ=AY.TextWidth;switch(this.mFormatFontPtr.mFontAlignment){case f.FA_LEFT:Ac.x+=this.mWidthEdgeMargin;break;case f.FA_CENTER:Ac.x+=Math.floor((this.rect.width-AZ)/2+0.5);break;case f.FA_RIGHT:Ac.x+=Math.floor(this.rect.width-AZ-this.mWidthEdgeMargin+0.5);break;}if(AU.mIsGraphMatrix&&!AU.isUADataAreaOutput()){if(this.rect.x<0&&this.mIsTruncated){Ac.x=this.rect.width+this.rect.x-AZ+0.5;}if(AV.mFontRotation===P.FR_90){var AS=this.GetBoundingRect();if(AS.y+AS.height>AU.mGraphHeight&&this.mIsTruncated){var Ag=this.mSubTextHolder.GetOneLineWidth(Af),Ai=Ag-AZ;Ac.x-=Ai/2;Ac.x+=Ai;}}}if(AR===undefined){return ;}e=z.call(this,this.mTripleId);G=m.call(this,this.mTripleId);var Ah={x:Ac.x,y:Ac.y-e},Ad,AT,AW;for(Ae=0;Ae<AR.length;Ae++){Ab=AR[Ae];Ac.x=Ah.x;Ac.y=Ah.y;if(Ae>0){AW=u.call(this,Af,Ab.Index,AR);Ac.x+=AW;}AT={};if(G!==0){AT={BaselineOffset:G};}Ad=Ac;if(Ab.Highlighted){var AX=AV.mFontColor;AV.mFontColor=c;AU.AddFormatedText(AV,Ad,Ab.Word,AT);AV.mFontColor=AX;}else{AU.AddFormatedText(AV,Ad,Ab.Word,AT);}}}function W(){var AT,AX=this.mChartContextPtr,AU=false;if(AX.mIsGraphMatrix){if(this.showBBox){AT=h.call(this);AX.DrawPolygon(AT,true);if(this.mTripleId.mObjectId===AF.DssGraphDataText){AU=true;}this.mChartContextPtr.FinishTextBoundingBox(AT,this.BBoxColor,AU);}else{if(V.isValidNumber(this.BBoxColor)){var AW=true,AV=true;if(AW){var AR=1,AS=new r.FormatFont({Font:this.mFormatFontPtr});AS.mStrokeColor=this.BBoxColor;AS.mStrokeWidth=this.mChartContextPtr.isCombinationChart()?0.01:0.5;if(AV){AS.mFontStyle=AR;}this.mFormatFontPtr=AS;}}}}else{if(R||this.mFormatFontPtr.mFontBox!==i.BS_NOFRAME){AT=h.call(this);AX.DrawPolygon(AT,false,null,null,null);this.ApplyFillFormat();}}return this.mFormatFontPtr;}mstrmojo.chart.TextObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.TextObject",clientDrag:false,rect:null,mFormatFontPtr:null,mText:"",mSubTextHolder:null,mIsShown:true,mWidthEdgeMargin:0,mHeightEdgeMargin:0,mTextLineSpace:0,mFontHeight:0,mIsRectCalculated:false,mTextWidthLimit:-1,mIsStringent:true,mLineCount:-1,mIsTruncated:false,mOnMarker:false,mIsOnScreen:true,init:function AH(AR){AR.hasLine=false;AR.hasFill=false;if(AR.hasLine||AR.hasFill){this._super(AR);}else{this.mpParentObject=AR.GraphCollectionObject||null;this.mTripleId=AR.TripleId||r.gNullTripleId;this.mpManager=AR.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(AR.Shape){this.mShapeType=AR.Shape;}}if(AR.Identity!==undefined&&AR.Identity!==null){this.identity=AR.Identity;}this.rect=this.rect||new r.Rect2D();this.mSubTextHolder=new r.SubTextHolder();if(AR&&AR.OnMarker){this.mOnMarker=AR.OnMarker;}AQ.call(this);J.call(this);},GetFormatFont:function AN(){return this.mFormatFontPtr;},SetText:function AP(AR,AT){if(AT===undefined){AT=-1;}this.mText=AR;this.mIsRectCalculated=false;if(this.mText!==""){var AS=this.mSubTextHolder;AS.Clear();AS.ParseText(this.mText," ",AT);AS.UpdateText(this.mChartContextPtr,this.mFormatFontPtr);}},GetBoundingRectEx:function AM(AT){var AR=this.mFormatFontPtr.mFontRotation;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AS=this.rect;if(AR!==P.FR_NORMAL){if(AR===P.FR_90||AR===P.FR_270){AT.Reset(AS.x,AS.y,AS.width,AS.height);var AV=AS.x+0.5*AS.width,AU=AS.y+0.5*AS.height;AT.width=this.rect.height;AT.height=this.rect.width;AT.x=AV-0.5*AT.width;AT.y=AU-0.5*AT.height;}else{var AW=this.GetBoundingRectFromPolygon(h.call(this));AT.ResetRect(AW);}}else{AT.Reset(AS.x,AS.y,AS.width,AS.height);}},GetBoundingRect:function y(AR){var AT=this.mFormatFontPtr.mFontRotation,AS;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}if(AT!==P.FR_NORMAL){if(AT===P.FR_90||AT===P.FR_270){AS=new r.Rect2D({Rect2D:this.rect});var AU=this.rect,AW=AU.x+0.5*AU.width,AV=AU.y+0.5*AU.height;AS.width=this.rect.height;AS.height=this.rect.width;AS.x=AW-0.5*AS.width;AS.y=AV-0.5*AS.height;}else{AS=this.GetBoundingRectFromPolygon(h.call(this));}}else{AR=AR||false;if(AR){return this.rect;}AS=new r.Rect2D({Rect2D:this.rect});}return AS;},GetClockwisePolygon:function I(){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}return h.call(this);},CalculateDeviceRect:function AJ(){var AX=this.mSubTextHolder,AZ=this.rect,AR=this.mFontHeight,AU=this.mTextWidthLimit,AW=this.mTextLineSpace,AV=this.mWidthEdgeMargin,AY=this.mHeightEdgeMargin,AS=1,AT=this.mLineCount;if(AZ.width===0||AZ.height===0){if(AU===-1&&AT===-1){AS=AX.GetLineCount();AZ.width=AX.GetMaxWidth();AZ.height=(AR+(AS===1?0:AW))*AS;AZ.Explode(AV,AY);}else{if(AU!==-1&&AT===-1){AX.PartitionBy(AU,this.mIsStringent);AS=AX.GetLineCount();AZ.height=(AR+(AS===1?0:AW))*AS+AY*2;if(this.mIsStringent){AZ.width=Math.min(AX.GetMaxWidth(),AU)+AV*2;}else{AZ.width=AX.GetMaxWidth()+AV*2;}}else{if(AU===-1&&AT!==-1){AX.SetLineCount(AT);AS=AX.GetLineCount();AZ.width=AX.GetMaxWidth();AZ.height=(AR+(AS===1?0:AW))*AS;AZ.Explode(AV,AY);}else{AX.SetLineCount(AT,AU);AS=AX.GetLineCount();AZ.height=(AR+(AS===1?0:AW))*AS+AY*2;if(this.mIsStringent){AZ.width=Math.min(AX.GetMaxWidth(),AU)+AV*2;}else{AZ.width=AX.GetMaxWidth()+AV*2;}}}}}else{if(AU===-1){if(AX.GetMaxWidth()>AZ.width){AX.PartitionBy(AZ.width);}}else{if(AX.GetMaxWidth()>AU){AX.PartitionBy(AU,this.mIsStringent);if(this.mIsStringent){AZ.width=Math.min(AX.GetMaxWidth(),AU)+AV*2;}else{AZ.width=AX.GetMaxWidth()+AV*2;}}}AS=AX.GetLineCount();AZ.height=(AR+(AS===1?0:AW))*AS+AY*2;}this.mIsRectCalculated=true;},GetLineCount:function C(){return this.mSubTextHolder.GetLineCount();},SetTextWidthLimit:function v(AS,AR){if(AR===undefined){AR=true;}this.mTextWidthLimit=AS;this.mIsStringent=AR;this.mIsRectCalculated=false;},SetRect:function B(AR){this.rect.copy(AR);},SetRotation:function AA(AT){var AS=this.mFormatFontPtr.mFontRotation;if(AT!==AS){var AR=new r.FormatFont({Font:this.mFormatFontPtr});AR.mFontRotation=AT;this.mFormatFontPtr=AR;}},MoveTo:function q(AT,AS,AR){AR=AR||AB.TOP_LEFT;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AU=this.rect;switch(AR){case AB.TOP_LEFT:AU.x=AT;AU.y=AS;break;case AB.CENTER:AU.x=AT-AU.width/2;AU.y=AS-AU.height/2;break;case AB.TOP_MIDDLE:AU.x=AT-AU.width/2;AU.y=AS;break;case AB.TOP_RIGHT:AU.x=AT-AU.width;AU.y=AS;break;case AB.LEFT_MIDDLE:AU.x=AT;AU.y=AS-AU.height/2;break;case AB.RIGHT_MIDDLE:AU.x=AT-AU.width;AU.y=AS-AU.height/2;break;case AB.BOTTOM_LEFT:AU.x=AT;AU.y=AS-AU.height;break;case AB.BOTTOM_MIDDLE:AU.x=AT-AU.width/2;AU.y=AS-AU.height;break;case AB.BOTTOM_RIGHT:AU.x=AT-AU.width;AU.y=AS-AU.height;break;}},MoveToCenter:function AD(AS,AR){this.rect.x=Math.round(AS-this.rect.width/2);this.rect.y=Math.round(AR-this.rect.height/2);},GetTransformedRect:function H(AS){var AR,AV,AT;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AU=this.mFormatFontPtr.mFontRotation;if(AU===P.DssGraphFontRotate45||AU===P.DssGraphFontRotate315){AT=new r.Rect2D({Rect2D:this.rect});AR=new r.Point2D({x:AT.x+AT.width*0.5,y:AT.y+AT.height*0.5});AV=(AU===P.DssGraphFontRotate45)?1:-1;AT.x=Math.floor((AR.x-AV*AR.y)*Math.SQRT1_2+(AT.x-AR.x)+0.5);AT.y=Math.floor((AV*AR.x+AR.y)*Math.SQRT1_2+(AT.y-AR.y)+0.5);}else{AT=this.GetBoundingRect(AS);}return AT;},GetTransformedRectEx:function AL(AT){var AV,AU,AS;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AR=this.mFormatFontPtr.mFontRotation;if(AR===P.FR_45||AR===P.FR_315){AT.ResetRect(this.rect);AV=AT.x+AT.width*0.5;AU=AT.y+AT.height*0.5;AS=(AR===P.FR_45)?1:-1;AT.x=Math.floor((AV-AS*AU)*Math.SQRT1_2+(AT.x-AV)+0.5);AT.y=Math.floor((AS*AV+AU)*Math.SQRT1_2+(AT.y-AU)+0.5);}else{this.GetBoundingRectEx(AT);}},HasOverlapForSameRotation:function A(AR,AS,AU){AS=AS||0;AU=AU||M.REC_EXP_INVALID;var AT=this.GetTransformedRect(true),AV=AR.GetTransformedRect(true),AW=AS/2;if(AW>0){t.ResetRect(AT);N.ResetRect(AV);t.Expand(AW,AU);N.Expand(AW,AU);return t.HasIntersection(N);}return AT.HasIntersection(AV);},strokeBBox:function E(AS){var AR=false,AT=this.mChartContextPtr;if(AS===undefined){if(AR){AS=AT.getDefaultContrastColor();}else{AS=AT.getDefaultThemeColor();}}this.BBoxColor=AS;},Draw:function AC(){var AX=this.mChartContextPtr,AV=this.mFormatFontPtr,AS,AW,AU,AT,AR=false;if(AE.call(this)===false){return ;}if(isNaN(this.rect.x)||isNaN(this.rect.y)){return ;}this.mIsTruncated=false;AV=W.call(this);AV.ApplyFontFormat(AX,false);switch(this.mTripleId.mObjectId){case AF.DssGraph2DO1Label:case AF.DssGraph2DO2Label:AR=true;break;default:AR=false;break;}if(AV.mFontRotation!==P.FR_NORMAL){AX.saveState();Z.x=this.rect.x+this.rect.width/2;Z.y=this.rect.y+this.rect.height/2;AX.Rotate(Z,AI.call(this));}AS=this.mSubTextHolder.GetLineCount();AW=this.mFontHeight+this.mTextLineSpace;AU=Math.max((this.rect.height-AW*AS)/2,0);for(AT=0;AT<AS;AT++){o.x=this.rect.x;o.y=this.rect.y+AU+(AT+1)*this.mFontHeight;O.call(this,o,AT,AR);}if(AV.mFontRotation!==P.FR_NORMAL){AX.RestoreState();}AX.FinishDrawText(this.mTripleId,{OnMarker:this.mOnMarker,Tooltip:this.mIsTruncated?this.mText:null,Identities:this.IdentityMap,Identity:this.identity});},getFormatFromParent:function n(){var AR=this.mpParentObject;this.mFormatLinePtr=AR.mFormatLinePtr;this.mFormatFillPtr=AR.GetFormatFill();this.mFormatFontPtr=AR.GetFormatFont();},GetBoundingRectNoRotation:function b(AR){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}AR=AR||false;if(AR){return this.rect;}return new r.Rect2D({Rect2D:this.rect});},RestoreWidthAndHeight:function S(){this.mSubTextHolder.ParseText(this.mText," ",-1);this.rect.width=0;this.rect.height=0;this.mTextWidthLimit=-1;this.mIsStringent=true;this.mLineCount=-1;this.CalculateDeviceRect();},Restore:function g(AR){if(AR===undefined){this.RestoreWidthAndHeight();return ;}this.rect.width=0;this.rect.height=0;this.rect.x=0;this.rect.y=0;this.mTextWidthLimit=(AR.TextWidthLimit!==undefined)?AR.TextWidthLimit:-1;this.mLineCount=(AR.LineCount!==undefined)?AR.LineCount:-1;this.mIsStringent=(AR.Stringent!==undefined)?AR.Stringent:true;if(AR.Restroke!==undefined&&AR.Restroke){this.SetText(this.mText,this.mTextWidthLimit);}},GetOneLineHeight:function a(){return this.mFontHeight;},getWidthHeightMargin:function j(AR){return AR?this.mWidthEdgeMargin:this.mHeightEdgeMargin;},possibleTruncate:function l(){return this.mTextWidthLimit>0&&this.rect.width>this.mTextWidthLimit&&!this.mIsStringent;},getDevicePolygon:function Q(){return h.call(this);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGenericDirection","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","FormatLine","Rect2D");var U=mstrmojo.chart,L=mstrmojo.chart.model,W=L.enums,C=W.EnumShapeType,G=W.EnumDSSGraphObject,M=U.FormatLine,P=mstrmojo.chart.enums,A=P.EnumLineStyle,N=P.EnumGenericDirection,R=P.EnumRectExpandDirection,E=U.model.enums.EnumDSSGraphMarkerShape;var H=new U.Rect2D();function D(){var Z=[],Y=this.mRect;if(this.mBorderOpenType===N.NONE){Z.push(Y.GetTopLeft());Z.push(Y.GetTopRight());Z.push(Y.GetBottomRight());Z.push(Y.GetBottomLeft());Z.push(Y.GetTopLeft());}else{Z.push(Y.GetBottomLeft());Z.push(Y.GetTopLeft());Z.push(Y.GetTopRight());Z.push(Y.GetBottomRight());var X=0;switch(this.mBorderOpenType){case N.BOTTOM:break;case N.LEFT:X=1;break;case N.TOP:X=2;break;case N.RIGHT:X=3;break;default:break;}if(X!==0){Z=U.gModuleMain.ShiftPolygonBy(Z,X);}}return Z;}function S(Z,Y){var X,a=[];if(this.mChartContextPtr.mImageFormat===103){return a;}if(Y){X=Z.GetBottomLeft();if(X.x>1){X.x--;}a.push(X);X=Z.GetTopLeft();if(X.x>1){X.x--;}if(X.y>1){X.y--;}a.push(X);X=Z.GetTopRight();if(X.y>1){X.y--;}a.push(X);a.push(Z.GetBottomRight());}else{X=Z.GetTopLeft();if(X.x>0){X.x--;}if(X.y>0){X.y--;}a.push(X);X=Z.GetTopRight();if(X.y>0){X.y--;}a.push(X);a.push(Z.GetBottomRight());X=Z.GetBottomLeft();if(X.x>0){X.x--;}a.push(X);}return a;}function T(Y){var c=this.mChartContextPtr,X=this.mFormatLinePtr.mLineStyle,b,a,Z;if(X!==A.LS_SOLID){c.NewPath();b=M.getLinePattern(X);a=new U.Point2D({x:Y.x+0.5,y:Y.y+0.5});Z=new U.Point2D({x:Y.x+0.5+Y.width,y:Y.y+0.5});c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5+Y.width;Z.y=Y.y+0.5+Y.height;c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5;Z.y=Y.y+0.5+Y.height;c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5;Z.y=Y.y+0.5;c.DrawDashedLine(a,Z,b);}}function K(Y,X){if(X){if(Y.x>1){--Y.x;++Y.width;}if(Y.y>1){--Y.y;++Y.height;}}else{if(Y.x>0){--Y.x;++Y.width;}if(Y.y>0){--Y.y;++Y.height;}}}function B(Z){var Y=this.mFormatLinePtr,X=Y.mLineThickness,a=true;if(X>=1){var b=X/2;if(this.mShapeType===C._BAR){switch(this.mBorderOpenType){case N.BOTTOM:if((Z.width>X)&&(Z.height>b)){Z.Expand(-b,R.REC_EXP_HORIZONTAL);Z.y+=b;}else{a=false;}break;case N.LEFT:if((Z.height>X)&&(Z.width>b)){Z.Expand(-b,R.REC_EXP_VERTICAL);Z.wdith-=b;}else{a=false;}break;case N.TOP:if((Z.width>X)&&(Z.height>b)){Z.Expand(-b,R.REC_EXP_HORIZONTAL);Z.y-=b;}else{a=false;}break;case N.RIGHT:if((Z.height>X)&&(Z.width>b)){Z.Expand(-b,R.REC_EXP_VERTICAL);Z.wdith+=b;}else{a=false;}break;default:if(Z.height>X&&Z.width>X){Z.Expand(-b,R.REC_EXP_BOTH);}else{a=false;}break;}}else{if(Z.height>X&&Z.width>X){Z.Expand(-b,R.REC_EXP_BOTH);}else{a=false;}}}return a;}function F(){var Z=this.mChartContextPtr,f=this.mFormatLinePtr,a=Z.mIsGraphMatrix,d=Z.GetGraphMatrixContext(),c=(this.mShapeType===C._TICKER)||(d.mMarkerShape===E.DssGraphMarkerShapeGMTick);if(this.mTripleId.mObjectId===G.DssGraphRiser&&Z.mPartialRendering){if(this.fallOut(true)){return ;}}var b=B.call(this,this.mRect);Z.DrawRectangle(this.mRect,false);this.ApplyFillFormat();H.ResetRect(this.mRect);var X=f.mLineThickness;this.SetLineWidth();if(a){if(c===false){var e=this.mTripleId.mObjectId;if(e===G.DssGraphRiser){if(Z.IsBarChart()){b=true;this.SetOutlineWidthEx(X);var h=Z.IsVertical(),Y=S.call(this,H,h);if((Y.length===4)&&((h&&this.mBorderOpenType!==N.BOTTOM)||(!h&&this.mBorderOpenType!==N.LEFT))){Y[0].swapPoints(Y[1]);Y[2].swapPoints(Y[3]);Z.DrawPolyLine(Y,true);}}else{if(Z.IsGridChart()||Z.IsLineChart()||Z.IsBubbleChart()||Z.IsScatterChart()){b=true;Z.DrawRectangle(H,true);}}}}}else{if(Z.NeedAdjustedLinePath()&&!a){if(this.mBorderOpenType!==N.NONE){var g;g=D.call(this);Z.DrawPolyLine(g,true);}else{Z.DrawRectangle(H,true);}}else{Z.DrawRectangle(this.mRect,true);}}if(b){if(!a){T.call(this,this.mRect);}this.ApplyLineFormat();}else{this.hSetLineWidth(0);}Z.FinishDrawRect(H,this.mTripleId);}mstrmojo.chart.RectangleObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.RectangleObject",mRect:null,mBorderOpenType:0,init:function Q(X){if(X.hasFill===undefined){X.hasFill=true;}if(X.hasLine===undefined){X.hasLine=true;}this.mpParentObject=X.GraphCollectionObject||null;this.mTripleId=X.TripleId;this.mpManager=X.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(X.Shape){this.mShapeType=X.Shape;}if(X.hasLine&&this.mTripleId.mObjectId!==-3){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,0,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;if(X.hasFill&&this.mTripleId.mObjectId!==G.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,0):this.mpParentObject.GetFormatFill();}if(X&&X.Area){this.mRect=new U.Rect2D({Rect2D:X.Area});}this.mIsVirtual=X.IsVirtualMarker||false;},Draw:function O(){var X=this.mChartContextPtr;if(this.mIsVirtual){return ;}if(this.mIsAnimationEnabled){X.BeginFirstFrame();this.SetProgress(0);F.call(this);X.EndFrame();X.BeginLastFrame();}F.call(this);if(this.mIsAnimationEnabled){X.EndFrame();}},GetClockwisePolygon:function V(){var X=this.mRect;return[X.GetTopLeft(),X.GetTopRight(),X.GetBottomRight(),X.GetBottomLeft()];},GetBoundingRect:function I(X){X=X||false;if(X){return this.mRect;}return new U.Rect2D({Rect2D:this.mRect});},getShapeSize:function J(){return Math.round(Math.max(0.5*this.mRect.width,0.5*this.mRect.height)+0.5);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Angle","Rect2D","ChartContext","ShapeObject","ImageMap","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumObjectShape","EnumBoundingRectType","EnumRadientGradientUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphFillBevelEffect");var f=mstrmojo.chart,O=f.enums,AJ=O.EnumLineJoinType,D=O.EnumBoundingRectType,m=O.EnumRadientGradientUsage,l=f.gModuleMain,Y=f.model,R=Y.enums,i=R.EnumDSSGraphFillBevelEffect,AF=0,t=0,g=1,I=8;function Z(){var AM=this.mFormatFillPtr;AM.MakeDarker(0.75);this.ApplyFillFormat(true);AM.RestoreColor();}function A(){if(this.mIsOutline){this.ApplyOutlineFormat();}else{var AM=this.mBoundingRectType;if((AM===D.BRT_TOP)||(AM===D.BRT_BOTTOM)){this.ApplyFillFormat();}else{Z.call(this);}this.ApplyLineFormat();}}function X(){var AN=l.mGlowWidth,AO=this.mChartContextPtr,AM=this.mSliceInfo;AO.DrawRingSector(AM.mCenter,AM.mRadius+AN,AM.mRadius,l.DegreeToRadian(AM.mStartAngle),l.DegreeToRadian(AM.mEndAngle));AO.saveState();AO.Clip();AO.RestoreState();}function L(){var AP=this.mChartContextPtr,AO=this.mSliceInfo,AN=new f.Point2D({x:AO.mCenter.x,y:AO.mCenter.y-AO.mDepth}),AM=AO.mRadius*(AO.mRingPieFactor*0.01);if(this.mIsOutline){AP.drawArc(AN,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AP.drawArc(AN,AM,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AP.DrawRingSector(AN,AO.mRadius,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);this.ApplyFillFormat();AP.drawArc(AN,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AP.drawArc(AN,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function x(){var AO=this.mChartContextPtr,AN=this.mSliceInfo,AM=AN.mRadius*(AN.mRingPieFactor*0.01);if(this.mIsOutline){AO.drawArc(AN.mCenter,AN.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AO.drawArc(AN.mCenter,AM,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AO.DrawRingSector(AN.mCenter,AN.mRadius,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);this.ApplyFillFormat();AO.drawArc(AN.mCenter,AN.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AO.drawArc(AN.mCenter,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function AA(){var AO=this.mSliceInfo,AN=new f.Point2D({x:AO.mCenter.x,y:AO.mCenter.y-AO.mDepth});var AM=AO.mRadius*(AO.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AN,AO.mRadius,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function S(){var AN=this.mSliceInfo,AM=AN.mRadius*(AN.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AN.mCenter,AN.mRadius,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function k(AO){var AQ=this.mSliceInfo,AP,AU=0;if(AO===t){AP=AQ.mStartAngle%360;if((AP<=90)||(AP>=270)){return ;}AU=this.mStartAngleRadian;}else{AP=AQ.mEndAngle%360;if((AP>=90)&&(AP<=270)){return ;}AU=this.mEndAngleRadian;}var AS=AQ.mRadius;var AR=AQ.mRadius;AS*=Math.cos(AU);AR*=Math.sin(AU);var AW=new f.Point2D({x:AQ.mCenter.x,y:AQ.mCenter.y});AW.x+=AS;AW.y+=AR;var AT=new f.Point2D({x:AQ.mCenter.x,y:AQ.mCenter.y});AT.x+=AS*(AQ.mRingPieFactor*0.01);AT.x+=AR*(AQ.mRingPieFactor*0.01);var AN=[];AN.push(AT);AN.push(AW);var AM=new f.Point2D({x:AW.x,y:AW.y-AQ.mDepth});AN.push(AM);var AV=new f.Point2D({x:AT.x,y:AT.y-AQ.mDepth});AN.push(AV);this.mChartContextPtr.DrawPolygon(AN);if(AO===t){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function F(AM,AQ,AS){var AR=this.mSliceInfo;if(this.mIsOutline&&AM){return ;}var AP=l.DegreeToRadian(AQ);var AO=l.DegreeToRadian(AS);var AN=AR.mRadius;if(AM){AN*=(AR.mRingPieFactor*0.01);}this.mChartContextPtr.DrawCylinder(AR.mCenter,AN,AP,AO,AR.mDepth);if(AM){this.SetBoundingRectType(D.BRT_RING_CYLINDER);}else{this.SetBoundingRectType(D.BRT_CYLINDER);}this.SetCylinderStart(AQ);this.SetCylinderEnd(AS);A.call(this);}function N(){var AO=this.mSliceInfo,AN=AO.mStartAngle,AM=AO.mEndAngle;if(AN<180){if(AM<180){F.call(this,false,AN,AM);}else{if(AM<=360){F.call(this,true,180,AM);F.call(this,false,AN,180);}else{F.call(this,true,180,360);F.call(this,false,AN,180);F.call(this,false,360,AM);}}}else{if(AN<360){if(AM<=360){F.call(this,true,AN,AM);}else{if(AM<540){F.call(this,true,AN,360);F.call(this,false,360,AM);}else{F.call(this,true,AN,360);F.call(this,true,540,AM);F.call(this,false,360,540);}}}else{if(AN<540){if(AM<540){F.call(this,false,AN,AM);}else{F.call(this,true,540,AM);F.call(this,false,AN,540);}}else{F.call(this,true,AN,AM);}}}}function B(){N.call(this);k.call(this,t);k.call(this,g);}function v(){var AM=this.mSliceInfo;if(this.mOneSeries){if(AM.mIs2DCircular){x.call(this);}else{N.call(this);L.call(this);}this.mChartContextPtr.FinishDrawRing(AM.mCenter,AM.mRadius,AM.mRadius*AM.mRingPieFactor/100,this.mTripleId,true);}else{if(AM.mIs2DCircular){S.call(this);}else{B.call(this);AA.call(this);}this.mChartContextPtr.FinishDrawRingPieSlice(AM.mCenter,AM.mRadius,AM.mRadius*AM.mRingPieFactor/100,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId);}}function G(){var AN=this.mSliceInfo,AM=new f.Point2D({x:AN.mCenter.x,y:AN.mCenter.y-AN.mDepth});this.mChartContextPtr.drawArc(AM,AN.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function H(){var AM=this.mSliceInfo;this.mChartContextPtr.drawArc(AM.mCenter,AM.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function j(){var AN=this.mSliceInfo,AM=new f.Point2D({x:AN.mCenter.x,y:AN.mCenter.y-AN.mDepth});this.mChartContextPtr.DrawSector(AM,AN.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function h(){var AM=this.mSliceInfo;this.mChartContextPtr.DrawSector(AM.mCenter,AM.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function AL(AN){var AS=this.mSliceInfo,AR,AQ=0;if(AN===t){AR=AS.mStartAngle%360;if((AR<=90)||(AR>=270)){return ;}AQ=this.mStartAngleRadian;}else{AR=AS.mEndAngle%360;if((AR>=90)&&(AR<=270)){return ;}AQ=this.mEndAngleRadian;}var AP=new f.Point2D({x:AS.mCenter.x,y:AS.mCenter.y});AP.x+=AS.mRadius*Math.cos(AQ);AP.y+=AS.mRadius*Math.sin(AQ);var AO=[];AO.push(AS.mCenter);AO.push(AP);var AM=new f.Point2D({x:AP.x,y:AP.y-AS.mDepth});AO.push(AM);var AT=new f.Point2D({x:AS.mCenter.x,y:AS.mCenter.y-AS.mDepth});AO.push(AT);this.mChartContextPtr.DrawPolygon(AO);if(AN===t){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function AB(){var AO=this.mSliceInfo,AN=AO.mStartAngle,AM=AO.mEndAngle;if(AN<180){if(AM<180){F.call(this,false,AN,AM);}else{if(AM<=360){F.call(this,false,AN,180);}else{F.call(this,false,AN,180);F.call(this,false,360,AM);}}}else{if(AN<360){if(AM<=360){AF++;}else{if(AM<540){F.call(this,false,360,AM);}else{F.call(this,false,360,540);}}}else{if(AN<540){if(AM<540){F.call(this,false,AN,AM);}else{F.call(this,false,AN,540);}}else{AF++;}}}}function M(){AB.call(this);AL.call(this,t);AL.call(this,g);}function P(){var AM=this.mSliceInfo;if(this.mOneSeries){if(AM.mIs2DCircular){H.call(this);}else{AB.call(this);G.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AM.mCenter,AM.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,true,this.mIsWhitenOuterBorder);}else{if(AM.mIs2DCircular){h.call(this);}else{M.call(this);j.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AM.mCenter,AM.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,false,this.mIsWhitenOuterBorder);}}function AI(AN){var AQ=this.mSliceInfo,AM={mStartAngle:AQ.mStartAngle,mEndAngle:AQ.mEndAngle};this.ConvertAngle(AM);if(AM.mStartAngle>AM.mEndAngle){var AO=[{mStartAngle:0,mEndAngle:AM.mEndAngle},{mStartAngle:AM.mStartAngle,mEndAngle:360}];if(AN.mStartAngle>AN.mEndAngle){return true;}return this.GetIntersectionAngle(AN,AO[0])||this.GetIntersectionAngle(AN,AO[1]);}if(AN.mStartAngle>AN.mEndAngle){var AP=[{mStartAngle:0,mEndAngle:AN.mEndAngle},{mStartAngle:AN.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AM,AP[0])||this.GetIntersectionAngle(AM,AP[1]);}return this.GetIntersectionAngle(AM,AN);}function c(AZ){var Ab,AS,AT=this.mSliceInfo,AU=AT.mCenter,Aa=AT.mRadius;if(AT.mIs2DCircular){Ab=(AZ.x-AU.x);AS=(AZ.y-AU.y);var AQ=Math.sqrt(Ab*Ab+AS*AS);if(((Aa-AQ)>-l.mTolerance)&&((AQ-(Aa*AT.mRingPieFactor/100))>-l.mTolerance)){var Ac=l.RadianToDegree(Math.acos(Ab/AQ));if(AS<-l.mTolerance){Ac=360-Ac;}if((Ac>=AT.mStartAngle)&&(Ac<=AT.mEndAngle)){return true;}Ac+=360;if((Ac>=AT.mStartAngle)&&(Ac<=AT.mEndAngle)){return true;}return false;}return false;}Ab=(AZ.x-AU.x);var AP,AM,AY,AO,AV,Ad=(Aa*Aa-Ab*Ab),AR=Aa*Aa*(AT.mRingPieFactor*AT.mRingPieFactor/10000)-Ab*Ab;if(Ad<-l.mTolerance){return false;}if(AR<-l.mTolerance){AP=l.RadianToDegree(Math.asin(Math.sqrt(Ad)/Aa));AS=(AZ.y-(AU.y-AT.mDepth));AO=new f.Angle();AV=new f.Angle();if(Ab>l.mTolerance){AO.mEndAngle=AP;AO.mStartAngle=360-AP;AM=Math.sqrt(Ab*Ab+AS*AS);if(AS>l.mTolerance){AV.mEndAngle=l.RadianToDegree(Math.asin(AS/AM));}else{AV.mEndAngle=360+l.RadianToDegree(Math.asin(AS/AM));}AS-=AT.mDepth;AM=Math.sqrt(Ab*Ab+AS*AS);if(AS>l.mTolerance){AV.mStartAngle=l.RadianToDegree(Math.asin(AS/AM));}else{AV.mStartAngle=360+l.RadianToDegree(Math.asin(AS/AM));}}else{AO.mStartAngle=180-AP;AO.mEndAngle=180+AP;AM=Math.sqrt(Ab*Ab+AS*AS);AV.mStartAngle=180-l.RadianToDegree(Math.asin(AS/AM));AS-=AT.mDepth;AM=Math.sqrt(Ab*Ab+AS*AS);AV.mEndAngle=180-l.RadianToDegree(Math.asin(AS/AM));}AY=new f.Angle();if(!this.GetIntersectionConvertedAngles(AO,AV,AY)){return false;}return AI.call(this,AY);}AP=l.RadianToDegree(Math.asin(Math.sqrt(Ad)/Aa));var AN=l.RadianToDegree(Math.asin(Math.sqrt(AR)/(Aa*AT.mRingPieFactor)));AS=(AZ.y-(AU.y-AT.mDepth));var AX=new f.Angle();var AW=new f.Angle();AV={};if(Ab>l.mTolerance){AX.mStartAngle=360-AP;AX.mEndAngle=360-AN;AW.mStartAngle=AN;AW.mEndAngle=AP;AM=Math.sqrt(Ab*Ab+AS*AS);if(AS>l.mTolerance){AV.mEndAngle=l.RadianToDegree(Math.asin(AS/AM));}else{AV.mEndAngle=360+l.RadianToDegree(Math.asin(AS/AM));}AS-=AT.mDepth;AM=Math.sqrt(Ab*Ab+AS*AS);if(AS>l.mTolerance){AV.mStartAngle=l.RadianToDegree(Math.asin(AS/AM));}else{AV.mStartAngle=360+l.RadianToDegree(Math.asin(AS/AM));}}else{AX.mStartAngle=180-AP;AX.mEndAngle=180-AN;AW.mStartAngle=180+AN;AW.mEndAngle=180+AP;AM=Math.sqrt(Ab*Ab+AS*AS);AV.mStartAngle=180-l.RadianToDegree(Math.asin(AS/AM));AS-=AT.mDepth;AM=Math.sqrt(Ab*Ab+AS*AS);AV.mEndAngle=180-l.RadianToDegree(Math.asin(AS/AM));}AY=[new f.Angle(),new f.Angle()];if(!this.GetIntersectionConvertedAngles(AX,AV,AY[0])){if(!this.GetIntersectionConvertedAngles(AW,AV,AY[1])){return false;}return AI.call(this,AY[1]);}if(!this.GetIntersectionConvertedAngles(AW,AV,AY[1])){return AI.call(this,AY[0]);}return(AI.call(this,AY[0])||AI.call(this,AY[1]));}function r(AR){var AU,AT,AM,AQ=this.mSliceInfo,AX=AQ.mCenter,AP=AQ.mRadius;if(AQ.mIs2DCircular){AU=(AR.x-AX.x);AT=(AR.y-AX.y);AM=Math.sqrt(AU*AU+AT*AT);if((AP-AM)>-l.mTolerance){if(AM<l.mTolerance){return false;}var AN=l.RadianToDegree(Math.acos(AU/AM));if(AT<-l.mTolerance){AN=360-AN;}if((AN>=AQ.mStartAngle)&&(AN<=AQ.mEndAngle)){return true;}AN+=360;if((AN>=AQ.mStartAngle)&&(AN<=AQ.mEndAngle)){return true;}return false;}return false;}AU=(AR.x-AX.x);var AZ,AV,AW,AY=AP*AP-AU*AU;if(AY<-l.mTolerance){return false;}var AO=l.RadianToDegree(Math.asin(Math.sqrt(AY)/AP));AT=(AR.y-(AX.y-AQ.mDepth));AZ={mStartAngle:0,mEndAngle:0};AV={mStartAngle:0,mEndAngle:0};if(AU>l.mTolerance){AZ.mEndAngle=AO;AZ.mStartAngle=360-AO;AW=Math.sqrt(AU*AU+AT*AT);if(AT>l.mTolerance){AV.mEndAngle=l.RadianToDegree(Math.asin(AT/AW));}else{AV.mEndAngle=360+l.RadianToDegree(Math.asin(AT/AW));}AT-=AQ.mDepth;AW=Math.sqrt(AU*AU+AT*AT);if(AT>l.mTolerance){AV.mStartAngle=l.RadianToDegree(Math.asin(AT/AW));}else{AV.mStartAngle=360+l.RadianToDegree(Math.asin(AT/AW));}}else{AZ.mStartAngle=180-AO;AZ.mEndAngle=180+AO;AW=Math.sqrt(AU*AU+AT*AT);AV.mStartAngle=180-l.RadianToDegree(Math.asin(AT/AW));AT-=AQ.mDepth;AW=Math.sqrt(AU*AU+AT*AT);AV.mEndAngle=180-l.RadianToDegree(Math.asin(AT/AW));}var AS={mStartAngle:0,mEndAngle:0};if(!this.GetIntersectionConvertedAngles(AZ,AV,AS)){return false;}return AI.call(this,AS);}function y(AS){var Ac,AP=this.mSliceInfo,AW=AP.mDepth,AQ=AP.mCenter,Aa=AP.mRadius,AO=l.DegreeToRadian(AP.mStartAngle),AT=l.DegreeToRadian(AP.mEndAngle);var AZ=new f.Point2D({x:AQ.x+Aa*Math.cos(AO),y:AQ.y+Aa*Math.sin(AO)});var AU=new f.Point2D({x:AQ.x+Aa*Math.cos(AT),y:AQ.y+Aa*Math.sin(AT)});if(this.mBoundingRectType===D.BRT_TOP){AZ.y-=AW;AU.y-=AW;}var Ae=new f.Point2D({x:Math.min(AZ.x,AU.x),y:Math.min(AZ.y,AU.y)});var AV=new f.Point2D({x:Math.max(AZ.x,AU.x),y:Math.max(AZ.y,AU.y)});if(AP.mIsRingPie){Ac=Aa*(AP.mRingPieFactor/100);var AN=new f.Point2D({x:AQ.x+Ac*Math.cos(AO),y:AQ.y+Ac*Math.sin(AO)});var AY=new f.Point2D({x:AQ.x+Ac*Math.cos(AT),y:AQ.y+Ac*Math.sin(AT)});if(this.mBoundingRectType===D.BRT_TOP){AN.y-=AW;AY.y-=AW;}Ae.x=Math.min(Ae.x,AN.x);Ae.y=Math.min(Ae.y,AN.y);AV.x=Math.max(AV.x,AN.x);AV.y=Math.max(AV.y,AN.y);Ae.x=Math.min(Ae.x,AY.x);Ae.y=Math.min(Ae.y,AY.y);AV.x=Math.max(AV.x,AY.x);AV.y=Math.max(AV.y,AY.y);}else{Ae.x=Math.min(Ae.x,AQ.x);AV.x=Math.max(AV.x,AQ.x);var AX=AQ.y;if(this.mBoundingRectType===D.BRT_TOP){AX-=AW;}Ae.y=Math.min(Ae.y,AX);AV.y=Math.max(AV.y,AX);}var AM;for(AM=(AP.mStartAngle/90+1)*90;AM<AP.mEndAngle;(AM+=90)){var Ab=l.DegreeToRadian(AM);var Ad=new f.Point2D({x:AQ.x+Aa*Math.cos(Ab),y:AQ.y+Aa*Math.sin(Ab)});if(this.mBoundingRectType===D.BRT_TOP){Ad.y-=AW;}Ae.x=Math.min(Ae.x,Ad.x);Ae.y=Math.min(Ae.y,Ad.y);AV.x=Math.max(AV.x,Ad.x);AV.y=Math.max(AV.y,Ad.y);if(AP.mIsRingPie){Ac=Aa*(AP.mRingPieFactor/100);var AR=new f.Point2D({x:AQ.x+Ac*Math.cos(Ab),y:AQ.y+Ac*Math.sin(Ab)});if(this.mBoundingRectType===D.BRT_TOP){AR.y-=AW;}Ae.x=Math.min(Ae.x,AR.x);Ae.y=Math.min(Ae.y,AR.y);AV.x=Math.max(AV.x,AR.x);AV.y=Math.max(AV.y,AR.y);}}AS.x=Ae.x;AS.y=Ae.y;AS.width=AV.x-Ae.x;AS.height=AV.y-Ae.y;}function K(AV){var AT=this.mSliceInfo,AO=AT.mDepth,AZ=AT.mCenter,AY=AT.mRadius;if(this.mBoundingRectType===D.BRT_RING_CYLINDER){AY*=(AT.mRingPieFactor/100);}var AS=l.DegreeToRadian(this.mCylinderStart);var AN=l.DegreeToRadian(this.mCylinderEnd);var AM=new f.Point2D({x:AZ.x+AY*Math.cos(AS),y:AZ.y+AY*Math.sin(AS)});var AR=new f.Point2D({x:AZ.x+AY*Math.cos(AN),y:AZ.y+AY*Math.sin(AN)});var AU=new f.Point2D({x:Math.min(AM.x,AR.x),y:Math.min(AM.y-AO,AR.y-AO)});var AP=new f.Point2D({x:Math.max(AM.x,AR.x),y:Math.max(AM.y,AR.y)});var AQ;for(AQ=(this.mCylinderStart/90+1)*90;AQ<this.mCylinderEnd;(AQ+=90)){var AX=l.DegreeToRadian(AQ);var AW=new f.Point2D({x:AZ.x+AY*Math.cos(AX),y:AZ.y+AY*Math.sin(AX)});AU.x=Math.min(AU.x,AW.x);AU.y=Math.min(AU.y,(AW.y-AO));AP.x=Math.max(AP.x,AW.x);AP.y=Math.max(AP.y,AW.y);}AV.x=AU.x;AV.y=AU.y;AV.width=AP.x-AU.x;AV.height=AP.y-AU.y;}function p(AO){var AT=this.mSliceInfo,AR=AT.mRadius,AM=AT.mDepth,AQ=AT.mCenter,AP=AT.mRingPieFactor,AS=(this.mBoundingRectType===D.BRT_START_RECT)?AT.mStartAngle:AT.mEndAngle;if(AS>=360){AS-=360;}var AN=l.DegreeToRadian(AS);if(AT.mIsRingPie){AO.width=(AR*(1-AP/100)*Math.abs(Math.cos(AN)));AO.height=(AM+AR*(1-AP/100)*Math.abs(Math.sin(AN)));}else{AO.width=(AR*Math.abs(Math.cos(AN)));AO.height=(AM+Math.abs(AR*Math.sin(AN)));}if(AS<90){if(AT.mIsRingPie){AO.x=(AQ.x+AR*(AP/100)*Math.cos(AN));AO.y=(AQ.y-AM+AR*(AP/100)*Math.sin(AN));}else{AO.x=AQ.x;AO.y=AQ.y-AM;}}else{if(AS<180){AO.x=(AQ.x+AR*Math.cos(AN));if(AT.mIsRingPie){AO.y=(AQ.y-AM+AR*(AP/100)*Math.sin(AN));}else{AO.y=AQ.y-AM;}}else{if(AS<270){AO.x=(AQ.x+AR*Math.cos(AN));AO.y=(AQ.y-AM+AR*Math.sin(AN));}else{AO.y=(AQ.y-AM+AR*Math.sin(AN));if(AT.mIsRingPie){AO.x=(AQ.x+AR*(AP/100)*Math.cos(AN));}else{AO.x=AQ.x;}}}}}mstrmojo.chart.PieSliceObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PieSliceObject",mSliceInfo:null,mBoundingRectType:D.BRT_TOP,mCylinderStart:0,mCylinderEnd:0,mOneSeries:false,mIsOutline:false,mStartAngleRadian:0,mEndAngleRadian:0,mMiddleAngleRadian:0,mMiddleAngle:0,mIsShown:false,mIsWhitenOuterBorder:false,init:function AD(AO){if(AO.TripleId){AO.TripleId.angleByIndex=AO.AngleIndex||0;AO.TripleId.sliceById=AO.SliceId||0;}this._super(AO);this.mSliceInfo={};var AN=this.mSliceInfo;AN.mStartAngle=AO.StartAngle;AN.mEndAngle=AO.EndAngle;AN.mRingPieFactor=AO.RingPieFactor;AN.mIsRingPie=AO.IsRing;AN.mIs2DCircular=AO.Is2DCircular;AN.mScale=AO.Scale;AN.mCenter=AO.Center;AN.mRadius=AO.Radius;AN.mDepth=AO.Depth;this.mOneSeries=AO.OneSeries;this.mIsShown=AO.IsShown;this.mStartAngleRadian=l.DegreeToRadian(AN.mStartAngle);this.mEndAngleRadian=l.DegreeToRadian(AN.mEndAngle);this.mMiddleAngleRadian=0.5*(this.mStartAngleRadian+this.mEndAngleRadian);this.mMiddleAngle=(0.5*(AN.mStartAngle+AN.mEndAngle));var AM=this.mMiddleAngle;if(AM>=360){AM%=360;}this.mMiddleAngleQuadrant=Math.floor(AM/90+1);if(!this.mOneSeries){AN.mCenter.x+=(AO.Explode*Math.cos(this.mMiddleAngleRadian));AN.mCenter.y+=(AO.Explode*Math.sin(this.mMiddleAngleRadian));}this.mIsWhitenOuterBorder=AO.IsWhitenOuterBorder||false;},SetCylinderStart:function Q(AM){this.mCylinderStart=AM;},SetCylinderEnd:function e(AM){this.mCylinderEnd=AM;},SetBoundingRectType:function q(AM){this.mBoundingRectType=AM;},SetDrawOutline:function AE(AM){this.mIsOutline=AM;},GetSliceInfo:function w(){return this.mSliceInfo;},GetMiddleAngleQuadrant:function T(){return this.mMiddleAngleQuadrant;},GetMiddleAngle:function a(){return this.mMiddleAngle;},GetMiddleAngleRadian:function o(){return this.mMiddleAngleRadian;},Draw:function z(){if(this.mIsShown){this.SetLineWidth();this.mIsOutline=false;if(this.mSliceInfo.mIsRingPie){v.call(this);}else{P.call(this);}}},DrawOutLine:function AH(){if(this.mIsShown){var AO=this.mChartContextPtr,AN=this.mSliceInfo;if(!(AN.mIsRingPie)&&AN.mIs2DCircular){X.call(this);}var AM=this.mChartContextPtr.GetLineJoin();AO.SetLineJoin(AJ.LJT_BEVEL);this.SetOutlineWidth();if(!AN.mIs2DCircular){AO.Scale(1,AN.mScale);}this.mIsOutline=true;if(AN.mIsRingPie){v.call(this);}else{P.call(this);}if(!AN.mIs2DCircular){AO.Scale(1,1/AN.mScale);}AO.SetLineJoin(AM);}},PointInObject:function J(AN){if(this.mIsShown&&this.mFormatLinePtr){var AM=false;if(this.mSliceInfo.mIsRingPie){AM=c.call(this,AN);}else{AM=r.call(this,AN);}return AM;}return false;},GetBoundingRect:function u(AM){if(AM===undefined){AM=new f.Rect2D();}var AQ=this.mFormatFillPtr,AP=this.mSliceInfo,AO=AP.mCenter,AN=AP.mRadius;switch(this.mBoundingRectType){case D.BRT_TOP:case D.BRT_BOTTOM:if(AQ.supportAdvancedFill(0)&&AQ.mFillBevel.type===i.DssGraphFillBevelSphere){AM.x=AO.x-AN;AM.y=AO.y-AP.mDepth-AN;AM.width=2*AN;AM.height=2*AN;}else{y.call(this,AM);}break;case D.BRT_CYLINDER:case D.BRT_RING_CYLINDER:K.call(this,AM);break;case D.BRT_START_RECT:case D.BRT_END_RECT:p.call(this,AM);break;}return AM;},FillBevel:function s(){var AS=this.mFormatFillPtr,AQ=this.mSliceInfo,AR=this.mChartContextPtr;if(AS.supportAdvancedFill(0)===false){return ;}if(AS.mFillBevel.type===i.DssGraphFillBevelDonut){var AM=0;if(AQ.mIsRingPie){AM=AQ.mRadius*AQ.mRingPieFactor/100;}var AP=AQ.mCenter.x;var AO=AQ.mCenter.y;if(!(AQ.mIs2DCircular)){AO-=AQ.mDepth;}AR.saveState();AR.Clip();AR.FillRadientGradient(AS,m.RG_PIESLICE,AP,AO,AM,AQ.mRadius);AR.RestoreState();}else{if(AS.mFillBevel.type===i.DssGraphFillBevelSphere){var AN=AS.mFillBevel.lightAngle;AS.mFillBevel.lightAngle=270;f.ShapeObject.prototype.FillBevel.apply(this,[]);AS.mFillBevel.lightAngle=AN;}}},ConvertAngle:function AC(AM){while(AM.mStartAngle<0){AM.mStartAngle+=360;}while(AM.mStartAngle>360){AM.mStartAngle-=360;}while(AM.mEndAngle<0){AM.mEndAngle+=360;}while(AM.mEndAngle>360){AM.mEndAngle-=360;}},GetIntersectionConvertedAngles:function U(AN,AM,AP){var AQ,AO;if(AN.mStartAngle>AN.mEndAngle){AQ=[{mStartAngle:0,mEndAngle:AN.mEndAngle},{mStartAngle:AN.mStartAngle,mEndAngle:360}];if(AM.mStartAngle>AM.mEndAngle){AO=[{mStartAngle:0,mEndAngle:AM.mEndAngle},{mStartAngle:AM.mStartAngle,mEndAngle:360}];var AR={mStartAngle:0,mEndAngle:0};this.GetIntersectionAngle(AQ[0],AO[0],AR);AP.mEndAngle=AR.mEndAngle;this.GetIntersectionAngle(AQ[1],AO[1],AR);AP.mStartAngle=AR.mStartAngle;return true;}return this.GetIntersectionAngle(AM,AQ[0],AP)||this.GetIntersectionAngle(AM,AQ[1],AP);}if(AM.mStartAngle>AM.mEndAngle){AO=[{mStartAngle:0,mEndAngle:AM.mEndAngle},{mStartAngle:AM.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AN,AO[0],AP)||this.GetIntersectionAngle(AN,AO[1],AP);}return this.GetIntersectionAngle(AN,AM,AP);},GetIntersectionAngle:function W(AP,AO,AQ){var AM=(AP.mStartAngle>AO.mStartAngle)?AP.mStartAngle:AO.mStartAngle;var AN=(AP.mEndAngle>AO.mEndAngle)?AO.mEndAngle:AP.mEndAngle;if(AM>AN){return false;}if(AQ){AQ.mStartAngle=AM;AQ.mEndAngle=AN;}return true;},ElementDrawRingPieTop:function d(){AA.call(this);},ElementDrawNormalPieTop:function b(){j.call(this);},ElementFillSide:function C(){Z.call(this);},GetClockwisePolygon:function E(){var AM=[],AR=this.mSliceInfo;var AN=new f.Point2D({x:AR.mCenter.x,y:AR.mCenter.y});if(!(AR.mIs2DCircular)){AN.y-=AR.mDepth;}AM.push(new f.Point2D({x:AN.x,y:AN.y*AR.mScale}));var AQ;for(AQ=AR.mStartAngle;AQ-AR.mEndAngle<0;AQ+=I){var AP=l.DegreeToRadian(AQ);AM.push(new f.Point2D({x:AN.x+AR.mRadius*Math.cos(AP),y:((AN.y+AR.mRadius*Math.sin(AP))*AR.mScale)}));}var AO=l.DegreeToRadian(AR.mEndAngle);AM.push(new f.Point2D({x:AN.x+AR.mRadius*Math.cos(AO),y:(AN.y+AR.mRadius*Math.sin(AO))*AR.mScale}));return AM;},IsCircularShape:function AG(){return true;},SetWhitenOuterBorder:function V(AM){this.mIsWhitenOuterBorder=AM;},getRadialInfo:function AK(){var AN=this.mSliceInfo,AM={r:AN.mRadius,cx:AN.mCenter.x,cy:AN.mCenter.y,fx:0,fy:0};AM.fx=AM.cx;AM.fy=AM.cy;if(AN.mIsRingPie){AM.startStop=AN.mRingPieFactor/100;}return AM;},getShapeSize:function n(){if(this.mSliceInfo){return this.mSliceInfo.mRadius||0;}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","ImageMap","FormatLine","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumMarkerShape","EnumLineStyle","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject");var X=mstrmojo.chart,T=X.enums,N=T.EnumObjectShape.OS_CIRCLE,W=T.EnumMarkerShape,B=T.EnumLineStyle,C=T.EnumGraphMajorType,O=mstrmojo.hash,R=103,P=X.model,b=P.enums,I=b.EnumDSSGraphMarkerShape,J=b.EnumDSSGraphObject,E=10,a=31,D=100,H=[[4,-100,-100,100,-100,100,100,-100,100],[12,-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[12,-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[12,-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[0],[4,0,-100,100,0,0,100,-100,0],[3,0,-100,100,100,-100,100],[4,-100,-100,100,-100,100,100,-100,100],[10,0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[7,0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100],[8,-100,-100,0,-50,100,-100,50,0,100,100,0,50,-100,100,-50,0]];X.gMarkerShapeMap=[I.DssGraphMarkerShapeRectangle,I.DssGraphMarkerShapePlainX,I.DssGraphMarkerShapePlus,I.DssGraphMarkerShapeFatPlus,I.DssGraphMarkerShapeCircle,I.DssGraphMarkerShapeDiamond,I.DssGraphMarkerShapeTriangle1,I.DssGraphMarkerShapeSquare,I.DssGraphMarkerShapeStar5,I.DssGraphMarkerShapeHouse,I.DssGraphMarkerShapeStar45];X.gMarkerShapeDict=[];function c(f){var e=H.length,h=X.gMarkerShapeMap,j=X.gMarkerShapeDict,g=false,d;if(j.length===0){for(d=0;d<h.length;d++){j[h[d]]=d;}}if(g){for(d=0;d<e;++d){if(h[d]===f){return d;}}}else{return j[f]||0;}return 0;}function L(){var d=this.mPolygon=[],g=this.mMarkerShape,k=this.mMarkerSize,f=this.mMarkerPosition;var m,h,e,o=false,l,j;if(g===W.MS_Circle){if(o){for(m=0;m<360;m+=E){h=X.gModuleMain.DegreeToRadian(m);d.push(new X.Point2D({x:f.x+k*Math.cos(h),y:f.y+k*Math.sin(h)}));}}else{d.push(new X.Point2D({x:f.x-k,y:f.y-k}));d.push(new X.Point2D({x:f.x+k,y:f.y-k}));d.push(new X.Point2D({x:f.x+k,y:f.y+k}));d.push(new X.Point2D({x:f.x-k,y:f.y+k}));}return ;}var q=H[g];var p=q[0];if(this.mIsIsometric){for(e=0;e<p;++e){l=q[2*e+1]*k/D+f.x;j=q[2*e+2]*k/D+f.y;d.push(new X.Point2D({x:l,y:j}));}}else{var n;for(e=0;e<p;++e){l=q[2*e+1]*k/D+f.x;j=q[2*e+2]*k/D+f.y;n={x:l,y:j};n=this.mChartContextPtr.vdPoint(n);d.push(n);}}}function S(f){var d={drawBorder:true,shapeSize:f},e=this.mFormatLinePtr;if(e&&f>=e.mLineThickness+1&&e.mLineStyle!==B.LS_NONE){d.shapeSize=f-e.mLineThickness;}else{d.drawBorder=false;}return d;}mstrmojo.chart.MarkerObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.MarkerObject",mMarkerSize:0,mMarkerShape:I.DssGraphMarkerShapeNone,mMarkerPosition:null,mIsIsometric:true,mPolygon:null,mIsShown:true,init:function U(d){d.hasLine=d.MarkerSize>=2;this._super(d);var e=this.mChartContextPtr;this.mMarkerPosition=new X.Point2D({Point2D:d.MarkerPosition});this.mMarkerShape=c.call(this,d.MarkerShape);this.mIsIsometric=d.IsIsometric;this.mMarkerSize=d.MarkerSize;this.mIsShown=true;if(d.IsDialogSize){this.mMarkerSize=e.dialogSizeToPixelSize(d.MarkerSize);}},fallOut:function A(i){var l=this.mChartContextPtr,f=l.mGraphWidth,g=l.mGraphHeight,e=this.mMarkerPosition,d=e.x,k=e.y,j=this.mMarkerSize;if(i){return d+j<0||d-j>f||k+j<0||k-j>g;}else{return(d-j>=0&&d+j<=f)&&(k-j>=0&&k+j<=g);}},Draw:function Q(){if(!this.mIsShown){return ;}var e=this.mChartContextPtr,d=e.GetGraphMajorType();if(e.mPartialRendering){if(this.fallOut(true)){return ;}}if(this.mIsAnimationEnabled&&d===C.GMT_BUBBLE){e.BeginFirstFrame();this.SetProgress(0);this.DoDraw();e.EndFrame();e.BeginLastFrame();}this.DoDraw();if(this.mIsAnimationEnabled&&d===C.GMT_BUBBLE){this.mChartContextPtr.EndFrame();}},DoDraw:function Z(){var e=this.mChartContextPtr;var m,f,n,j,o,l,g,h,p,d,k;o=this.mMarkerSize;m=S.call(this,o);this.mMarkerSize=m.shapeSize;p=m.drawBorder;if(p){this.SetLineWidth();}this.setMarkerPath(false);this.ApplyFillFormat();if(e.NeedAdjustedLinePath()){this.setMarkerPath(true);}if(p&&this.mFormatLinePtr.mLineStyle!==B.LS_SOLID&&!e.mUseAnimation){if(this.mMarkerShape===W.MS_Circle){m=X.FormatLine.getLinePattern(this.mFormatLinePtr.mLineStyle);f=this.mMarkerSize*Math.abs(2*Math.PI);n=0;j=0;l=m.length;g=Math.PI/5;h=0;while(n<f){d=Math.min(m[j%l],f-n);k=d/this.mMarkerSize;++j;if(g>k){k=g;}n+=k*this.mMarkerSize;if(j%2===1){e.NewPath();e.drawArc(this.mMarkerPosition,this.mMarkerSize,h,h+k,false);this.ApplyLineFormat();}h+=k;}}}if(p){this.ApplyLineFormat();}if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){e.FinishDrawCircle({x:this.mMarkerPosition.x,y:this.mMarkerPosition.y,r:this.mMarkerSize},this.mTripleId);}else{e.FinishDrawPolygon(this.mPolygon,0,this.mTripleId);}this.mMarkerSize=o;},setMarkerPath:function F(f){var h=this.mChartContextPtr,e,g=this.mMarkerSize,d=this.mMarkerShape;if(h.mImageFormat===R){return ;}if(this.mPolygon===null){L.call(this);}if(d===I.DssGraphMarkerShapeCircle){h.drawArc(this.mMarkerPosition,g,0,Math.PI*2);}else{h.DrawPolygon(this.mPolygon,f);}},GetBoundingRect:function K(){if(this.mPolygon===null){L.call(this);}return this.GetBoundingRectFromPolygon(this.mPolygon);},GetClockwisePolygon:function Y(){if(this.mPolygon===null){L.call(this);}return X.Polygon2D.clone(this.mPolygon);},SetMarkerShape:function G(e){var d=c.call(this,e);if(this.mMarkerShape===d){return ;}this.mMarkerShape=d;L.call(this);},getRadialInfo:function V(){if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){var d={r:this.mMarkerSize,cx:this.mMarkerPosition.x,cy:this.mMarkerPosition.y,fx:0,fy:0};d.fx=d.cx;d.fy=d.cy;return d;}return null;},getShapeSize:function M(){return this.mMarkerSize;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","FormatFill","FormatLine","PieSliceObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixPiePlotType","EnumGraphMatrixMarkerTypeInChart");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphNumberFormatType");var c=mstrmojo.chart,b=mstrmojo.VisUtility,V=c.ChartConstants,X=c.enums,R=X.EnumGraphMatrixPiePlotType,J=X.EnumGraphMatrixMarkerTypeInChart,S=c.model,g=S.enums,N=g.EnumDSSGraphObject,E=g.EnumShapeType,L=g.EnumDSSGraphMarkerShape,f=0,O=1,I=1,A=2,W=3;var P=new c.TripleId(),U=new c.ChartAdvFormat();function e(){var i=this.mChartContextPtr,h=i.GetGraphMatrixContext();this.mMinSizeByTotal=0;if(!this.mHasSizeBy){return this.mMinSizeByTotal;}this.mMinSizeByTotal=h.mMinSizeVal;return this.mMinSizeByTotal;}function d(){var i=this.mChartContextPtr,h=i.GetGraphMatrixContext();if(!this.mHasSizeBy){this.mMaxSizeByTotal=1;return this.mMaxSizeByTotal;}this.mMaxSizeByTotal=h.mMaxSizeVal;return this.mMaxSizeByTotal;}function F(){var i=this.mChartContextPtr,h=i.GetGraphMatrixContext();d.call(this);e.call(this);if(h.mMarkerShape===L.DssGraphMarkerShape2DPie){this.mPieOption.mLayout=f;}else{this.mPieOption.mLayout=O;}}function Z(l,m,o,j){var i=this.mChartContextPtr.GetGraphMatrixContext(),k,n,h=2;if(this.mHasSizeBy){h=i.getSizeByPieRadius(this.mDatasetPtr,l,m,this.mMaxSizeByTotal,this.mMinSizeByTotal,this.mPieOption.mMaxRadius);if(h>=0&&h<1){h=1;}}else{h=this.mPieOption.mMaxRadius;}k=1;if(this.mPlotType===R.GMPPT_VALUE){n=j||this.mDatasetPtr.GetPieCountAtOneDataPoint(l,m);k=(o+1)/n;h=k*h;if(n>1){h-=1;}}return h;}function D(h,j,l){var m,k,p,o,n=this.mDatasetPtr,q=this.mPieOption,s={};s.Angles=[];s.ValidSeriesNumber=0;s.ValidSeriesIndex=[];s.IsValid=false;m=360-q.mPieRotation;s.Angles.push(m);s.ValidSeriesIndex.splice(0,s.ValidSeriesIndex.length);k=this.mDatasetPtr.GetPieSliceCount(h,j,0);p=0;for(o=0;o<k;++o){var r=n.GetPieSlicePercentage(h,j,l,o);if(r!==null){if(r<=1||r>=-1){++s.ValidSeriesNumber;s.ValidSeriesIndex.push(o);}p+=r;if(o===(k-1)){m=720-q.mPieRotation;}else{m=Math.round(Math.abs(360*p)+1)+(360-q.mPieRotation);}}else{if(o===(k-1)){m=720-q.mPieRotation;}}if(m>720-q.mPieRotation){m=720-q.mPieRotation;}s.Angles.push(m);}s.IsValid=true;return s;}function Q(z,t){var l=this.mChartContextPtr,AA=l.GetGraphMatrixContext(),x="",p,u=this.mDatasetPtr,y=new c.TripleId({ObjectId:N.DssGraphDataText,SeriesId:z.mSeriesId,GroupId:z.mGroupId}),s,w,h,v=u.dataLabelStyle,i,o=t.GetSliceInfo(),k,j,AB,r,q,m=false,n=5;if(u.showPieSliceDatalabel(z.mSeriesId,z.mGroupId,z.angleByIndex,z.sliceById)===false){return null;}y.angleByIndex=z.angleByIndex;y.sliceById=z.sliceById;if(l.mIsGraphMatrix){n=AA.getPadding(V.kDataLabel);}switch(v){case A:p=u.GetPieSliceData(z.mSeriesId,z.mGroupId,z.angleByIndex,z.sliceById);if(p===undefined||p===null){return null;}U.restore();u.getGridDataFormatForPie(U,z);s=new c.NumberObject({TripleId:y,GraphObjectManager:this.mpManager,Number:p,NumberFormat:U,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(s!==undefined&&s!==null){x=s.mText;}h=s;break;case W:w=u.GetTextLabel(z.mSeriesId,z.mGroupId,z.angleByIndex,z.sliceById);x=w;h=new c.TextObject({TripleId:y,GraphObjectManager:this.mpManager,GraphCollectionObject:null});break;}if(h!==undefined&&h!==null&&x!==""){h.SetText(x);i=h.GetBoundingRect();}else{return null;}k=t.GetMiddleAngleRadian();AB=(o.mRadius+n)*Math.cos(k);r=(o.mRadius+n)*Math.sin(k);j=t.GetMiddleAngleQuadrant();if(j===2||j===3){m=true;}q=i.height*0.5*Math.sin(k);if(m){h.MoveToCenter(o.mCenter.x+AB-(i.width+1)/2,o.mCenter.y+r+q);}else{h.MoveToCenter(o.mCenter.x+AB+(i.width+1)/2,o.mCenter.y+r+q);}return h;}function C(AD,s,j,AB,v,AA,x,n,k){var p={mObjectId:N.DssGraphPieSlice,mSeriesId:AD,mGroupId:s},m=this.mChartContextPtr,z=m.getUtiliy().tripleId,y=this.mPieOption,t=m.mIsGraphMatrix,r,o,i,q=(this.mPlotType===R.GMPPT_VALUE),l=y.mLayout,h,w;var AC=k||this.mDatasetPtr.GetPieCountAtOneDataPoint(iSeriesId,s);if(AA>=x){return null;}z.reset(P,p.mObjectId,p.mSeriesId,p.mGroupId,j,AB);if(m.checkColorByAndSizeByValue(P,this.mDatasetPtr,this.mHasColorBy,false)===false){return null;}if(x-AA===360){n=true;}r=((l===O)||(q&&j>0));if(r){if(l===O){if(q&&j>0){y.mRingFactor=(1-1/(j+1)*0.3)*100;}else{y.mRingFactor=70;}}else{y.mRingFactor=100/(j+1);}}o=Z.call(this,AD,s,j);if(o<=0){return null;}i=new c.PieSliceObject({TripleId:p,AngleIndex:j,SliceId:AB,GraphObjectManager:this.mpManager,Explode:0,StartAngle:AA,EndAngle:x,RingPieFactor:y.mRingFactor,IsRing:r,Is2DCircular:true,Scale:y.mScale,Center:v,Radius:o,MaxRadius:y.mMaxRadius,Depth:y.mDepthInChart,OneSeries:n,ParentObject:null,IsShown:true,Shape:E._PIESLICE,hasFill:true});if(t){var u=this.mDatasetPtr.showPieDatalabels();if(u&&!(q&&j<AC-1)){h=Q.call(this,p,i);if(h!==undefined&&h!==null){h.mIsShown=false;w=new c.GMDataLabelInfo({SeriesId:AD,GroupId:s,isValid:true,Label:h});w.HostMarkerPoint=v;w.HostMarkerBound=new c.Rect2D({x:v.x-o,y:v.y-o,height:2*o,width:2*o});this.dataLabels.push(w);}}}return i;}function H(){var j,h=this.mChartContextPtr.GetGraphMatrixContext(),i=J._PIE;if(this.mPlotType===R.GMPPT_CATEGORY){var k=this.mChartContextPtr.IsVertical(),l=this.mDatasetPtr.GetGroupCount();j=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);return h.GetMaxMarkerSize(i,k,l*j);}else{if(this.mPlotType===R.GMPPT_VALUE){return h.GetMaxMarkerSize(i,true,1,this.mHasSizeBy);}}return 0;}function G(m){var u=this.mPieCircles,v=u.length,p,n,o=false,l=[],s=[],q=[],t,r,k,h;for(p=0;p<v;++p){o=false;h=u[p];for(n=0;n<l.length;++n){if(h.mCenter.x===l[n].x&&h.mCenter.y===l[n].y&&h.mRadius===s[n]){o=true;break;}}if(!o){t=h.mCenter;r=h.mRadius;s.push(r);l.push(t);q.push(h);}}m.CirclePieObjects=m.CirclePieObjects.concat(q);}mstrmojo.chart.PiePlotRenderer=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.PiePlotRenderer",mDatasetPtr:null,mChartContextPtr:null,mMaxSizeByTotal:0,mMinSizeByTotal:0,mHasColorBy:false,mHasSizeBy:false,mPlotType:R.GMPPT_CATEGORY,mPieOption:{mLayout:f,mRingFactor:70,mScale:1,mDepthInChart:0,mPieRotation:90},mpManager:null,dataLabels:[],shownDataLabels:[],mPieCircles:[],init:function Y(h){this._super(h);this.mpManager=h.GraphObjectManager;this.mChartContextPtr=h.ChartContext;this.mDatasetPtr=h.Dataset;this.mPieOption={mLayout:f,mRingFactor:70,mScale:1,mMaxRadius:10,mDepthInChart:0,mPieRotation:90};this.mPieOption.mLayout=h.Layout;this.mPlotType=h.PlotType;if(h.MaxRadius){this.mPieOption.mMaxRadius=h.MaxRadius;}else{this.mPieOption.mMaxRadius=H.call(this);}this.mHasColorBy=this.mChartContextPtr.GetGraphMatrixContext().mHasColorBy;this.mHasSizeBy=this.mChartContextPtr.GetGraphMatrixContext().mHasSizeBy;this.dataLabels=[];this.shownDataLabels=[];this.mPieCircles=[];if(h.shownDatalabels!==undefined&&h.shownDataLabels!==null){this.shownDataLabels=h.shownDataLabels;}F.call(this);},getShapeSizeAt:function a(k,i,h,j){if(j===undefined){j=true;}if(j){return this.mPieOption.mMaxRadius;}return Z.call(this,k,i,h);},drawSinglePie:function B(k,r,j,s,h){var l=[],o,w,u,m,t,x,y,n={},v;if(s.x<0||s.y<0){return l;}m=Z.call(this,k,r,j,h);n.mCenter=s;n.mRadius=m;t=D.call(this,k,r,j);if(!t.IsValid){return l;}w=t.ValidSeriesIndex;o=t.ValidSeriesNumber;u=t.Angles;var z=h||this.mDatasetPtr.GetPieCountAtOneDataPoint(k,r),p=(this.mPlotType===R.GMPPT_VALUE),q=((this.mPieOption.mLayout===O)||(p&&j>0));if(o===0){b.visPrint("pieplotRenderer::Should not reach here");}else{if(o===1){x=C.call(this,k,r,j,w[0],s,360-this.mPieOption.mPieRotation,720-this.mPieOption.mPieRotation,true,z);if(x){x.SetWhitenOuterBorder(p&&j<z-1&&!q);l.push(x);}this.mPieCircles.push(n);}else{for(v=0;v<o;++v){y=w[v];x=C.call(this,k,r,j,y,s,u[y],u[y+1],false,z);if(x){x.SetWhitenOuterBorder(p&&j<z-1&&!q);l.push(x);}}this.mPieCircles.push(n);}}return l;},SetInfo:function T(i,h,j){this.mPieOption.mLayout=i;this.mPieOption.mMaxRadius=j;this.mPlotType=h;},enableDataLabel:function M(k,j){var l=this.mChartContextPtr,i=l.mIsGraphMatrix,h=l.GetGraphMatrixContext();if(i){G.call(this,k);k.PlaceDataLabels(this.dataLabels,j);}},GetPieRadius:function K(h,i,j){return Z.call(this,h,i,j);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","RectangleObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle");var D=mstrmojo.chart,B=mstrmojo.chart.enums,C=B.EnumBoxStyle;function A(){var N=this.mChartContextPtr,L=this.mBoxStyle,M=this.mFormatFillPtr.mAlpha,I,K,H,J,G;I=4;K=new D.Rect2D({Rect2D:this.mRect});K.Implode(I,I);N.DrawRectangle(this.mRect,false);this.ApplyFillFormat();if(L===C.BS_BEVELED_FRAME||L===C.BS_REVERSE_BEVELED_FRAME){H=D.gBlack.ToInteger();J=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.153:0.353));G=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.353:0.153));N.ApplyBeveledFrameToRectangle(this.mRect,0,I,H,J,H,G);}else{if(L===C.BS_DOUBLE_LINE_FRAME){if(L===C.BS_DOUBLE_LINE_FRAME){N.DrawRectangle(K,true);this.ApplyLineFormat();}}}this.SetLineWidth();N.DrawRectangle(this.mRect,true);this.hSetBorderStyle(this.mRect);this.ApplyLineFormat();}mstrmojo.chart.FancyBoxObject=mstrmojo.declare(mstrmojo.chart.RectangleObject,null,{scriptClass:"mstrmojo.chart.FancyBoxObject",mBoxStyle:C.BS_NOFRAME,init:function F(G){this._super(G);this.mBoxStyle=G.BoxStyle||C.BS_NOFRAME;},Draw:function E(){if(this.mBoxStyle===C.BS_NOFRAME){this.mChartContextPtr.DrawRectangle(this.mRect,false);this.ApplyFillFormat();}else{A.call(this);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","GraphObjectManager","ShapeObject","TextObject","StraightLineObject","GraphCollectionObject","PolygonObject","PolyLineObject","GraphAxisGeneral","AxisObject","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphTitleName","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphAxisLabelLocation");var Ac=mstrmojo.chart,AV=Ac.ChartConstants,N=Ac.enums,y=N.EnumCollectionType,AZ=N.EnumGraphMajorType,Ah=N.EnumDSSExtraGraphObject,An=N.EnumAnchorPoint,Z=N.EnumAxisLabelsLocation,Ag=N.EnumAxisDirection,V=N.EnumGraphObjectType,AF=Ac.gNullGroupId,m=Ac.gNullTripleId,AA=Ac.gNullObjectId,F=0,E=1,AE=2,p=3,o=4,n=5,l=6,s=7,AC=8,D=100,Ak=2;var AT=mstrmojo.chart.model,AH=AT.enums,As=AH.EnumDSSGraphProperty,At=AH.EnumDSSGraphObject,AM=AH.EnumDSSGraphTitleName,Af=AH.EnumDSSExtraGraphProperty,H=AH.EnumDSSGraphFontRotation,Au=AH.EnumDSSGraphGridLineType,O=AH.EnumDSSGraphAxisLabelLocation;var g=1,AD=2,b=4,v=8;var X=null,M=null,L=null,AX=null,u=null;function AP(){if(!this.mUseDepth){return ;}var A0=this.mDeviceDataArea,Az=this.mDepthOffset;A0.x+=Az.x;A0.y+=Az.y;this.mUseDepth=false;}function Ap(Az){switch(Az.mGridStyle){case Au.DssGraphGridRegular:case Au.DssGraphGridBoth:Az.mGridStyle=Au.DssGraphGridRegular;break;case Au.DssGraphGridInnerTicks:case Au.DssGraphGridOuterTicks:case Au.DssGraphGridSpanningTicks:Az.mShowGridLines=false;break;default:Az.mGridStyle=Au.DssGraphGridRegular;}}function T(A2,A6,A7){var A9,A4,A3,Az,BA,A5,BB,A1=this.mDeviceDataArea,A0=true,A8=true;if(this.IsVerticalAxis()){A0=(A2.x===A1.x);A8=(A2.x+A2.width===A1.x+A1.width);}else{A0=(A2.y+A2.height===A1.y+A1.height);A8=(A2.y===A1.y);}if(A0&&A8){this.generateGridsByArea(A7);this.MoveGraphObjectList(A6);return ;}A9=this.mUseDepth;A4=A1;A3=this.mMajorGrid.mShowGridLines;Az=this.mMinorGrid.mShowGridLines;BA=this.mMajorGrid.mGridStyle;A5=this.mMinorGrid.mGridStyle;BB=this.mAxisInfo.mAxisLabelsLocation;this.mDeviceDataArea=A2;if(A0||A8){if(A0){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;}else{this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;}if(!this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){AP.call(this);}}else{AP.call(this);Ap.call(this,this.mMajorGrid);Ap.call(this,this.mMinorGrid);}this.generateGridsByArea(A7);this.MoveGraphObjectList(A6);this.mUseDepth=A9;this.mDeviceDataArea.ResetRect(A4);this.mMajorGrid.mShowGridLines=A3;this.mMinorGrid.mShowGridLines=Az;this.mMajorGrid.mGridStyle=BA;this.mMinorGrid.mGridStyle=A5;this.mAxisInfo.mAxisLabelsLocation=BB;}function AJ(Az){var A2=this.mDeviceDataArea,A1,A0;switch(Az){case Z.ALL_BOTTOM:A1=A2.GetBottomLeft();A0=A2.GetBottomRight();if(this.mChartContextPtr.mIsTimeSeriesChart){A1.x=0;}break;case Z.ALL_TOP:A1=A2.GetTopLeft();A0=A2.GetTopRight();break;case Z.ALL_LEFT:A1=A2.GetTopLeft();A0=A2.GetBottomLeft();break;case Z.ALL_RIGHT:A1=A2.GetTopRight();A0=A2.GetBottomRight();break;default:A1=null;A0=null;break;}return{Start:A1,End:A0};}function Ax(Az){var A3,A0,A2,A1;if(this.mUseDepth){return ;}A1=AJ.call(this,Az);A3=A1.Start;A0=A1.End;A2=new Ac.StraightLineObject({TripleId:this.mTripleId,GraphObjectManager:this,StartPoint:A3,EndPoint:A0,GraphCollectionObject:this.mpAxisLineSet});this.mManagerGraphObjectList.push(A2);this.mpAxisLineSet.AddGraphObject(A2);}function B(){var A0,A1,A3,A4,A7=[],Az,A5,A6,A2;A3=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;A4=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;if(this.hasDepthAxisLine(A3)){A6=AJ.call(this,A3);}else{if(this.hasDepthAxisLine(A4)){A6=AJ.call(this,A4);}else{return ;}}A0=A6.Start;A1=A6.End;A7.push(A0);A7.push(A1);A7.push(A1.Shifted(this.mDepthOffset));A7.push(A0.Shifted(this.mDepthOffset));A2=new Ac.TripleId({ObjectId:At.DssGraphFrame});Az=new Ac.PolygonObject({TripleId:A2,GraphObjectManager:this,Polygon:A7});Az.mIsDetectable=false;A5=Az.GetFormatFill();A5.MakeDarker(this.IsVerticalAxis()?0.8:0.6);this.mManagerGraphObjectList.push(Az);}function e(A8,A3,A5,A7,A9,Az){var A1,A6,A2,A0,A4;A6=this.mChartContextPtr.CalculateDepthOffset(A5,this.mDepthDirection,true);A1=new Ac.Point2D({x:A6.OffsetX,y:A6.OffsetY});Az.splice(0,Az.length);A2=new Ac.Point2D();A0=new Ac.Point2D();A2.init({Point2D:A7});A0.init({Point2D:A9});if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){A2.init({Point2D:A9});A0.init({Point2D:A7});}A0=A0.Shifted(this.mDepthOffset);A4=new Ac.Point2D();A4.Reset(0,0);if(this.IsVerticalAxis()){A4.x=this.IsLeftDirection()?A5:-A5;}else{A4.y=this.IsDownDirection()?-A5:A5;}switch(A3){case Au.DssGraphGridRegular:Az.push(A2);Az.push(A2.Shifted(this.mDepthOffset));Az.push(A0);break;case Au.DssGraphGridBoth:if(this.hasDepthAxisLine(A8)||this.HasLabelsOnBothSides()){Az.push(A2.Shifted(A4));}Az.push(A2);Az.push(A2.Shifted(this.mDepthOffset));Az.push(A0);if(!this.hasDepthAxisLine(A8)||this.HasLabelsOnBothSides()){Az.push(A0.Shifted(-A4));}break;case Au.DssGraphGridInnerTicks:if(this.hasDepthAxisLine(A8)){Az.push(A2);Az.push(A2.Shifted(A1));}else{Az.push(A0);Az.push(A0.Shifted(A4));}break;case Au.DssGraphGridOuterTicks:if(this.hasDepthAxisLine(A8)){Az.push(A2.Shifted(A4));Az.push(A2);}else{Az.push(A0);Az.push(A0.Shifted(-A4));}break;case Au.DssGraphGridSpanningTicks:if(this.hasDepthAxisLine(A8)){Az.push(A2.Shifted(A4));Az.push(A2);Az.push(A2.Shifted(A1));}else{Az.push(A0.Shifted(A4));Az.push(A0.Shifted(-A4));}break;}}mstrmojo.chart.Axis=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Axis",mDeviceDataArea:null,mTickLength:-1,mUseDepth:false,mDepth:0,mDepthDirection:0,mDepthOffset:null,mManagerGraphObjectList:null,mpMajorGridSet:null,mpMinorGridSet:null,mpAxisLabelSet:null,mpAxisLineSet:null,mIsUniformAxis:false,maxLabelLength:-1,hasLabelCreated:false,hasMajorTickCreated:false,hasMinorTickCreated:false,mLabelInterval:0,resizeAction:-1,mLabelList:null,restrictWidth:null,restrictHeight:null,mIsShown:true,mIntegrity:15,init:function AI(Az){this._super(Az);var A0=this.mChartContextPtr;this.mLabelList=[];if(this.mUseDepth){this.mDepthOffset=new Ac.Point2D();}this.mManagerGraphObjectList=[];if(!!Az.IsUA){this.mIsUniformAxis=true;}if(this.mIsUniformAxis){this.restrictHeight=this.restrictWidth=-1;}this.mAxisInfo=new Ac.GraphAxisGeneral(Az);this.mMajorGrid={mShowGridLines:true,mGridStyle:Au.DssGraphGridRegular,mUseManualGrid:false,mGridInterval:0};this.mMinorGrid={mShowGridLines:false,mGridStyle:Au.DssGraphGridNone,mUseManualGrid:false,mGridInterval:0};switch(Az.AxisDirection){case Ag.AD_X:this.mTickLength=A0.mGraphHeight/D+1;break;case Ag.AD_Y:this.mTickLength=A0.mGraphWidth/D+1;break;case Ag.AD_Z:this.mTickLength=2;break;}this.mTickLength=Math.max(4,this.mTickLength);},SetDeviceDataArea:function I(Az){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new Ac.Rect2D({Rect2D:Az});}else{this.mDeviceDataArea.ResetRect(Az);}},IsReverseOrder:function W(){return this.mAxisInfo.mAxisDrawInReverse;},SetIntegrity:function q(Az){this.mIntegrity=Az;if((Az&g)===0){this.mAxisInfo.mShowAxisLine=false;this.mMajorGrid.mGridStyle=Au.DssGraphGridNone;}if((Az&AD)===0){this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Au.DssGraphGridNone;}if((Az&v)===0){this.mMinorGrid.mShowGridLines=false;this.mMinorGrid.mGridStyle=Au.DssGraphGridNone;}if((Az&b)===0){this.mAxisInfo.mShowAxisLabels=false;}},HasLabelsOnBothSides:function AY(){return(this.mAxisInfo.mAxisLabelsLocation===Z.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===Z.ALL_LEFT_RIGHT)&&!(this.mChartContextPtr.mIsTimeSeriesChart);},IsVerticalAxis:function J(){return this.mAxisInfo.mAxisDirection===Ag.AD_Y;},IsLeftDirection:function Al(){return this.mDepthDirection>90&&this.mDepthDirection<270;},IsDownDirection:function x(){return this.mDepthDirection>180;},HasOuterTicks:function AR(Az){return Az===Au.DssGraphGridOuterTicks||Az===Au.DssGraphGridBoth||Az===Au.DssGraphGridSpanningTicks;},HasTwoGridLineParts:function AG(Az){return this.HasLabelsOnBothSides()&&(Az===Au.DssGraphGridInnerTicks||Az===Au.DssGraphGridOuterTicks||Az===Au.DssGraphGridSpanningTicks);},IsLogarithmic:function Am(){return false;},getIndex:function Q(){switch(this.mTripleId.mObjectId){case At.DssGraphO1Body:return F;case At.DssGraphO2Body:return E;case At.DssGraphX1Body:return AE;case At.DssGraphY1Body:return p;case At.DssGraphY2Body:return o;case At.DssGraphY3Body:return n;case At.DssGraphY4Body:return l;case At.DssGraphZBody:return s;case At.DssGraphX2Body:return AC;default:return 0;}},GetInterlacedGridId:function Ay(){return Ah.DssGraphO1Interlaced+this.getIndex();},ReserveTitleArea:function d(A2){var A0,Az,A4,A1,A3;if(!this.mAxisInfo.mShowAxisTitle){return ;}A0=this.getIndex();Az=Ac.gAxisObjects[A0].mTitleId;if(Az.mObjectId===Ac.gNullObjectId){return ;}A4=new Ac.TripleId({ObjectId:Az.mObjectId,SeriesId:Ac.gNullSeriesId,GroupId:AF});A1=new Ac.Rect2D();this.InitObjectSet(A4,V.GOT_AXIS_TITLE);A3=new Ac.TextObject({TripleId:A4,GraphObjectManager:this,rect:A1,ParentObject:this.mpAxisTitleSet});this.mpAxisTitleSet.AddGraphObject(A3);A3.SetText(this.mAxisTitle);this.mGraphObjectList.push(A3);this.ReserveTitle(A2,false);},ReserveTitle:function AW(A4,A1){var A3,A0,Az,A2;if(!this.mAxisInfo.mShowAxisTitle){return ;}A3=this.mGraphObjectList[0];A0=A3.GetBoundingRect();Az=A1?-1:1;A2=((this.IsVerticalAxis()?A0.width:A0.height)+Ak)*Az;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:A4.height-=A2;break;case Z.ALL_TOP:if(this.mTripleId.mObjectId===At.DssGraphO1Body){A4.height-=A2;}else{A4.y+=A2;A4.height-=A2;}break;case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:A4.x+=A2;A4.width-=A2;break;case Z.ALL_RIGHT:if(this.mTripleId.mObjectId===At.DssGraphO1Body){A4.x+=A2;A4.width-=A2;}else{A4.width-=A2;}break;}},UpdateTitleLocation:function Ao(A4){var A3,A1,A0,Az,A2,A5;if(!this.mAxisInfo.mShowAxisTitle){return ;}A3=this.mGraphObjectList[0];if(this.mChartContextPtr.mManualLayoutMode&&!this.mChartContextPtr.mRecalculateFrame){this.MoveTitleForManual(A3);return ;}A1=A3.GetBoundingRect();A0=this.GetLabelOffset(this.mAxisInfo.mAxisLabelsLocation);if(this.IsVerticalAxis()){Az=A4.y+A4.height/2+A0.y;}else{Az=A4.x+A4.width/2+A0.x;}A2=(this.IsVerticalAxis()?A1.width:A1.height)/2+Ak;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:A3.MoveTo(Az,A4.y+A4.height+A2,An.CENTER);break;case Z.ALL_TOP:if(this.mTripleId.mObjectId===At.DssGraphO1Body){A3.MoveTo(Az,A4.y+A4.height+A2,An.CENTER);}else{A3.MoveTo(Az,A4.y-A2,An.CENTER);}break;case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:A3.MoveTo(A4.x-A2,Az,An.CENTER);break;case Z.ALL_RIGHT:if(this.mTripleId.mObjectId===At.DssGraphO1Body){A3.MoveTo(A4.x-A2,Az,An.CENTER);}else{A3.MoveTo(A4.x+A4.width+A2,Az,An.CENTER);}break;}A5=A3.mTripleId;A1=A3.GetBoundingRectNoRotation();this.mChartContextPtr.PutLocation(this.getAxisTitleLocationId(A5.mObjectId),A1);},generateAxisLine:function Av(Az){this.CreateAxisLine();return this.MoveGraphObjectList(Az);},CreateAxisLine:function j(){var Az;if(this.mUseDepth){B.call(this);return ;}if(!this.mAxisInfo.mShowAxisLine){return ;}Az=new Ac.TripleId({ObjectId:this.mTripleId.mObjectId});this.InitObjectSet(Az,V.GOT_AXIS_LINE);switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM_TOP:Ax.call(this,Z.ALL_BOTTOM);Ax.call(this,Z.ALL_TOP);break;case Z.ALL_LEFT_RIGHT:Ax.call(this,Z.ALL_LEFT);Ax.call(this,Z.ALL_RIGHT);break;default:Ax.call(this,this.mAxisInfo.mAxisLabelsLocation);break;}},ReserveDepthAxisLine:function Aj(A2,A0,Az){var A1;if(!this.mUseDepth){return ;}A1=new Ac.Point2D({Point2D:this.mDepthOffset});A1.x=Math.abs(A1.x);A1.y=Math.abs(A1.y);if(A0){A1.x=-A1.x;A1.y=-A1.y;}if(this.mAxisInfo.mAxisDirection===Ag.AD_X||Az){if(this.mDepthDirection<180){A2.y+=A1.y;A2.height-=A1.y;}else{A2.height-=A1.y;}}else{if(this.mAxisInfo.mAxisDirection===Ag.AD_Y||Az){if(this.mDepthDirection<90||this.mDepthDirection>270){A2.width-=A1.x;}else{A2.x+=A1.x;A2.width-=A1.x;}}}},TrimMarginsForDepthAxis:function AO(A2,A3){var A1,Az,A0;A1=A2;Az=A3;if(!this.mUseDepth){A0={HighMargin:Az,LowMargin:A1};return A0;}if(this.IsVerticalAxis()){if(this.mDepthDirection<180){Az+=this.mDepthOffset.y;}else{A1-=this.mDepthOffset.y;}}else{if(this.mDepthDirection<90||this.mDepthDirection>270){Az-=this.mDepthOffset.x;}else{A1+=this.mDepthOffset.x;}}Az=(Az>=0)?Az:0;A1=(A1>=0)?A1:0;A0={HighMargin:Az,LowMargin:A1};return A0;},getDepthMargin:function w(A2,A3){if(!this.mUseDepth){return null;}var A0=this.mDepthOffset,A1=A2,Az=A3;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_LEFT:case Z.ALL_RIGHT:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A0.y>0){A1=A0.y;}else{Az=-A0.y;}}else{if(A0.y>0){Az=A0.y;}else{A1=-A0.y;}}break;case Z.ALL_BOTTOM:case Z.ALL_TOP:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A0.x>0){Az=A0.x;}else{A1=-A0.x;}}else{if(A0.x>0){A1=A0.x;}else{Az=-A0.x;}}break;case Z.ALL_LEFT_RIGHT:case Z.ALL_BOTTOM_TOP:break;default:return null;}return{highMargin:Az,lowMargin:A1};},GetLabelOffset:function S(Az,A0){if(!A0){A0=new Ac.Point2D();}A0.Reset(0,0);if((!this.mUseDepth)||this.hasDepthAxisLine(Az)){return A0;}A0.ResetPoint(this.mDepthOffset);return A0;},GenerateGridLinesEx:function Ad(){this.GenerateGridLines(this.mDeviceDataArea,0,this.mGraphObjectList);},GenerateGridLines:function c(A0,A1,Az){if((this.mMajorGrid.mShowGridLines&&this.mMajorGrid.mGridStyle!==Au.DssGraphGridNone)||(this.mMinorGrid.mShowGridLines&&this.mMinorGrid.mGridStyle!==Au.DssGraphGridNone)){T.call(this,A0,Az,true);}},GenerateInterlacedGrids:function a(A0,A1,Az){if(this.mAxisInfo.mUseInterlacedGrids){T.call(this,A0,Az,false);}},MoveGraphObjectList:function C(A0){var Az,A1;Az=this.mManagerGraphObjectList.length;for(A1=0;A1<Az;++A1){A0.push(this.mManagerGraphObjectList[A1]);}this.mManagerGraphObjectList.splice(0,this.mManagerGraphObjectList.length);},GenerateOneLineObject:function Ar(A2,A1,A0){var Az;Az=new Ac.PolyLineObject({TripleId:A2,GraphObjectManager:this,PolyLine:A1,GraphCollectionObject:A0});A0.AddGraphObject(Az);this.mManagerGraphObjectList.push(Az);},SetDepthAndDirection:function Aa(A1,Az){var A0;this.mUseDepth=true;this.mDepth=A1;this.mDepthDirection=Az;A0=this.mChartContextPtr.CalculateDepthOffset(this.mDepth,this.mDepthDirection);this.mDepthOffset.x=A0.OffsetX;this.mDepthOffset.y=A0.OffsetY;},getAxisTitleLocationId:function Ab(Az){switch(Az){case AM.DssGraphTitleCategory:return As.DssGraphTitleXLocation;case AM.DssGraphTitleY1:return As.DssGraphTitleY1Location;case AM.DssGraphTitleY2:return As.DssGraphTitleY2Location;case AM.DssGraph3DRowTitle:return As.DssGraph3DRowTitleLocationNEW;case AM.DssGraph3DColTitle:return As.DssGraph3DColTitleLocationNEW;case AM.DssGraph3DLYTitle:return As.DssGraph3DLYTitleLocation;case AM.DssGraph3DRYTitle:return As.DssGraph3DRYTitleLocation;default:return 0;}},MoveLabel:function AU(A5,Az,A1,A7){var A4,A2,A9,A3,A0;if(A7===undefined){A7=Ac.Axis.gLabelMargin;}A4=A5.GetTransformedRect(true);A9=A5.mFormatFontPtr.mFontRotation;if(X===null){X=new Ac.Point2D();}else{X.Reset(0,0);}switch(A9){case H.Rotate45:case H.Rotate315:case H.Normal:if(A9===H.Rotate45||A9===H.Rotate315){A2=(A9===H.Rotate45)?1:-1;A1.Reset((A1.x-A2*A1.y)*Math.SQRT1_2,(A2*A1.x+A1.y)*Math.SQRT1_2);Az.Reset((Az.x-A2*Az.y)*Math.SQRT1_2,(A2*Az.x+Az.y)*Math.SQRT1_2);}X.Reset(A4.width/2,A4.height/2);break;case H.Rotate90:X.Reset(A4.width/2,(A4.height+1)/2);break;case H.Rotate180:X.Reset((A4.width+1)/2,(A4.height+1)/2);break;case H.Rotate270:X.Reset((A4.width+1)/2,A4.height/2);break;case H.Custom:break;default:}A3=0.1;var A8=0,A6=0;if(Math.abs(A1.x)<A3||Math.abs(A1.y)<A3){if(Math.abs(A1.x)<A3&&A1.y<0){X.y=A4.height-X.y;}else{if(A1.x<0&&Math.abs(A1.y)<A3){X.x=A4.width-X.x;}}A0=X.x*Math.abs(A1.x)+X.y*Math.abs(A1.y)+A7;A8=Az.x+A0*A1.x;A6=Az.y+A0*A1.y;}else{if(A1.x>0&&A1.y<0){X.y=-(A4.height-X.y);}else{if(A1.x<0&&A1.x>0){X.x=-(A4.width-X.x);}else{if(A1.x<0&&A1.y<0){X.Reset(-(A4.width-X.x),-(A4.height-X.y));}}}A8=Az.x+A7*A1.x+X.x;A6=Az.y+A7*A1.y+X.y;}if(A9===H.Rotate45||A9===H.Rotate315){A2=(A9===H.Rotate45)?-1:1;A8=(A8-A2*A6)*Math.SQRT1_2;A6=(A2*A8+A6)*Math.SQRT1_2;}A5.MoveTo(Math.floor(A8+(A8<0?-0.5:0.5)),Math.floor(A6+(A6<0?-0.5:0.5)),An.CENTER);},MoveTitleForManual:function AK(A1){if(!this.mChartContextPtr.mManualLayoutMode){return ;}var A0=A1.mTripleId,Az=this.mChartContextPtr.GetLocationRect(this.getAxisTitleLocationId(A0.mObjectId));if(Az){A1.SetRect(Az);A1.CalculateDeviceRect();}else{A1.mIsShown=false;}},InitObjectSet:function AL(A2,A1){var A0,Az=y.CT_LINE;switch(A1){case V.GOT_AXIS_TITLE:A0=this.mpAxisTitleSet;Az=y.CT_TEXT;break;case V.GOT_AXIS_LABEL:A0=this.mpAxisLabelSet;Az=y.CT_TEXT;break;case V.GOT_AXIS_LINE:A0=this.mpAxisLineSet;break;case V.GOT_MAJOR_GRID:A0=this.mpMajorGridSet;break;case V.GOT_MINOR_GRID:A0=this.mpMinorGridSet;break;case V.GOT_INTERLACED_GRID:A0=this.mpInterlacedGridSet;Az=y.CT_GENERAL_SHAPE;break;default:}if(A0!==null&&A0!==undefined){return ;}if(this.mTripleId.mSeriesId>0){A0=this.GetGraphObject(A2,false);}if(!A0){A0=new Ac.GraphCollectionObject({TripleId:A2,GraphObjectManager:this,CollectionType:Az});this.AddToMap(A0);}switch(A1){case V.GOT_AXIS_TITLE:this.mpAxisTitleSet=A0;break;case V.GOT_AXIS_LABEL:this.mpAxisLabelSet=A0;break;case V.GOT_AXIS_LINE:this.mpAxisLineSet=A0;break;case V.GOT_MAJOR_GRID:this.mpMajorGridSet=A0;break;case V.GOT_MINOR_GRID:this.mpMinorGridSet=A0;break;case V.GOT_INTERLACED_GRID:this.mpInterlacedGridSet=A0;break;default:}},LoadProperties:function AQ(){var A2,A5,A4=this.mChartContextPtr,A3,A1,Az,A0;if(A4.mIsGraphMatrix){A5=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Au.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){A2=A4.GetProperty(As.DssGraphStyleMajor,A5);if(this.mMajorGrid.mShowGridLines&&A2){this.mMajorGrid.mGridStyle=A2;}}return ;}A5=new Ac.TripleId({ObjectId:this.mTripleId.mObjectId});A2=A4.GetProperty(As.DssGraphShow2DAxisLabels,A5);if(A2){this.mAxisInfo.mShowAxisLabels=A2!==false;}if(A4.GetGraphMajorType()===AZ.GMT_GAUGE){return ;}A3=0;switch(this.mTripleId.mObjectId){case At.DssGraphO1Body:A3=As.DssGraphShow2DXTitle;break;case At.DssGraphO2Body:A3=As.DssGraphShowTitleSeries;break;case At.DssGraphX1Body:A3=As.DssGraphShow2DXTitle;break;case At.DssGraphY1Body:A3=As.DssGraphShow2DY1Title;break;case At.DssGraphY2Body:case At.DssGraphX2Body:A3=As.DssGraphShow2DY2Title;break;case At.DssGraphY3Body:case At.DssGraphY4Body:break;case At.DssGraphZBody:A3=As.DssGraphShow3DColTitle;break;default:}A2=A4.GetProperty(A3,m);if(A3!==0&&A2){this.mAxisInfo.mShowAxisTitle=A2!==false;}if(A4.isUADataAreaOutput()){this.mAxisInfo.mShowAxisLabels=false;this.mAxisInfo.mShowAxisTitle=false;}A1=this.mAxisInfo.mShowAxisTitle;if(A1){A0=Ac.gAxisObjects[this.getIndex()].mTitleId;A2=A4.GetProperty(As.DssGraphTextContent,A0);if(A0.mObjectId!==AA&&A2){this.mAxisTitle=A2;}}A2=A4.GetProperty(Af.DssGraphUseInterlacedGrid,A5);if(A2){this.mAxisInfo.mUseInterlacedGrids=A2!==false;}A2=A4.GetProperty(As.DssGraphShow2DAxisMajor,A5);if(A2){this.mMajorGrid.mShowGridLines=A2!==false;}A2=A4.GetProperty(As.DssGraphStyleMajor,A5);if(this.mMajorGrid.mShowGridLines&&A2){this.mMajorGrid.mGridStyle=A2;}A2=A4.GetProperty(As.DssGraphShow2DAxisMinor,A5);if(A2){this.mMinorGrid.mShowGridLines=A2!==false;}A2=A4.GetProperty(As.DssGraphStyleMinor,A5);if(this.mMinorGrid.mShowGridLines&&A2){this.mMinorGrid.mGridStyle=A2;}A2=A4.GetProperty(As.DssGraphManualMinor,A5);if(A2){this.mMinorGrid.mUseManualGrid=A2!==false;}A2=A4.GetProperty(As.DssGraphCountMinor,A5);if(A2){this.mMinorGrid.mGridInterval=A2;}A2=A4.GetProperty(As.DssGraphShow2DAxisLine,A5);if(A2){this.mAxisInfo.mShowAxisLine=A2;}switch(A4.GetGraphMajorType()){case AZ.GMT_POLAR:case AZ.GMT_RADAR:return ;default:break;}A2=A4.GetProperty(As.DssGraph2DSide,A5);if(A2){if(A2===O.DssGraphAxisLabelLowSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;}else{if(A2===O.DssGraphAxisLabelHighSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;}else{if(A2===O.DssGraphAxisLabelBothSides){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT_RIGHT:Z.ALL_BOTTOM_TOP;}}}}},generateGridsByArea:function r(){},GetOneGridLine:function Y(A0,A3,A2,Az,A1,A4){if(this.mUseDepth){e.call(this,A0,A3,A2,Az,A1,A4);return ;}A4.splice(0,A4.length);M=new Ac.Point2D({Point2D:Az});L=new Ac.Point2D({Point2D:A1});A4.push(M);A4.push(L);if(AX===null){AX=new Ac.Point2D();}else{AX.Reset(0,0);}if(u===null){u=new Ac.Point2D();}else{u.Reset(0,0);}if(this.IsVerticalAxis()){if(A0===Z.ALL_RIGHT){u.x=A2;}else{AX.x=-A2;}}else{if(A0===Z.ALL_TOP){u.y=-A2;}else{AX.y=A2;}}switch(A3){case Au.DssGraphGridRegular:break;case Au.DssGraphGridBoth:A4[0].x+=AX.x;A4[0].y+=AX.y;if(this.HasLabelsOnBothSides()){A4[1].x-=AX.x;A4[1].y-=AX.y;}else{A4[1].x+=u.x;A4[1].y+=u.y;}break;case Au.DssGraphGridInnerTicks:if(A0!==Z.ALL_RIGHT&&A0!==Z.ALL_TOP){A4[1].x=A4[0].x-AX.x;A4[1].y=A4[0].y-AX.y;}else{A4[0].x=A4[1].x-u.x;A4[0].y=A4[1].y-u.y;}break;case Au.DssGraphGridOuterTicks:if(A0!==Z.ALL_RIGHT&&A0!==Z.ALL_TOP){A4[1].x=A4[0].x+AX.x;A4[1].y=A4[0].y+AX.y;}else{A4[0].x=A4[1].x+u.x;A4[0].y=A4[1].y+u.y;}break;case Au.DssGraphGridSpanningTicks:if(A0!==Z.ALL_RIGHT&&A0!==Z.ALL_TOP){A4[1].x=A4[0].x-AX.x;A4[1].y=A4[0].y-AX.y;A4[0].x+=AX.x;A4[0].y+=AX.y;}else{A4[0].x=A4[1].x-u.x;A4[0].y=A4[1].y-u.y;A4[1].x+=u.x;A4[1].y+=u.y;}break;default:}},hasDepthAxisLine:function f(Az){if(!this.mUseDepth){return false;}switch(Az){case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:return(this.mDepthDirection<90||this.mDepthDirection>270);case Z.ALL_RIGHT:return(this.mDepthDirection>90&&this.mDepthDirection<270);case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:return(this.mDepthDirection<180);case Z.ALL_TOP:return(this.mDepthDirection>180);default:return false;}},TrimAxisPadding:function P(){},resetRestrictSpace:function Aq(Az){if(Az!==undefined){this.restrictWidth=Az.width;this.restrictHeight=Az.height;}else{this.restrictWidth=this.restrictHeight=-1;}},GetAxisLabelRotation:function Ai(){},isBaseLineQualified:function G(Az){return false;},liftedFromZero:function Aw(){return false;},SetTrimWithPadding:function z(){},GetPositionAtTick:function i(){},getLabelRotation:function AN(){if(this.mpAxisLabelSet){var Az=this.mpAxisLabelSet.GetFormatFont();return Az.mFontRotation;}return -1;},GetOuterTickLength:function k(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength;}return 0;},updateMaxLabelLength:function AS(A0,Az){if(A0>0){if(Az===undefined){Az=false;}if(Az){A0=this.calculateMaxAxisSpace(A0);}}this.maxLabelLength=A0;},calculateMaxAxisSpace:function R(A0){var Az=this.mChartContextPtr.GetGraphMatrixContext();A0-=(this.GetOuterTickLength()+Az.getPadding(AV.kLabelToChart));if(this instanceof mstrmojo.chart.CategoryAxis){A0-=Az.getPadding(AV.kCategoricalLabelToTick);}else{A0-=Az.getPadding(AV.kNumericLabelToTick);}return Math.max(A0,0);},getNextStatus:function Ae(A0){var A2=-1,A3=1,A7=!this.IsVerticalAxis(),A6=0,A5=1,A4=2,A1=this.getStatus(),Az=this.mLabelInterval;if(A7){if(A0===A6){if(Az>1){A1=A2;}}else{if(A0===A4){if(Az>=2&&A1!==A3){A1=A2;}}}}else{if(A0===A5){if(Az!==1){A1=A2;}}else{if(Az<2){A1=A2;}}}return A1;},clearTickObjects:function AB(A5,A3){var A2,A0=this.mChartContextPtr.getUtiliy().tripleId,A1=this.mGraphObjectList,Az=A1.length,A4=A3?this.mpMajorGridSet:this.mpMinorGridSet;if(A4){A4.ClearCollection();}for(A2=Az-1;A2>=0;A2--){if(A0.equal(A1[A2].mTripleId,A5)){A1.splice(A2,1);}}},restoreLabels:function K(A0){var A2;if(this.hasLabelCreated){var A1,Az=this.mpAxisLabelSet.GetCollectionSize(),A4=Az<=0,A3;if(Az===0){Az=this.mLabelList.length;}for(A2=0;A2<Az;++A2){if(A4){A1=this.mLabelList[A2];}else{A1=this.mpAxisLabelSet.GetObjectByIndex(A2);}if(!!A1===false){continue;}A3={Stringent:true,Restroke:true,TextWidthLimit:this.maxLabelLength,DivideByWord:true};if(this instanceof mstrmojo.chart.CategoryAxis&&this.mChartContextPtr.mIsGraphMatrix){if(this.mWordWrap===false){A3.LineCount=1;}else{A3.LineCount=2;}}A1.Restore(A3);if(A0){A1.mIsShown=true;}}}},checkShownLabelCount:function t(A3){var A4=this.mLabelList,Az=A4.length,A0=0,A5=-2,A1=-1;for(var A2=0;A2<Az;A2++){if(A4[A2]&&A4[A2].mIsShown){A0++;}if(A3!==undefined&&A0>=A3){return A5;}}if(A3!==undefined){return A1;}return A0;},checkCondense:function A(){return false;},getCondenseStatus:function U(){return undefined;},getUniformAxisLabelsInfo:function h(A2){var A1=0,A3=[],Az=this.mLabelList.length;while(A1<Az){var A0=this.mLabelList[A1];if(A0.mIsShown){if(A2){if(A2.CheckTruncated){if(A0.mIsTruncated===false){continue;}}}A3.push({Text:A0.mText,Rect:A0.GetBoundingRect()});}++A1;}return A3;}});Ac.Axis.gLabelMargin=4;}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","FractionNumber","Utility");mstrmojo.requiresClsP("mstrmojo.chart","TextObject","ChartAdvFormat","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumDSSGraphProperty");var c=mstrmojo.chart,K=c.enums,b=mstrmojo.VisUtility,d=K.EnumGraphMajorType,h=K.EnumNumberCategory,N=5,r=5;var V=mstrmojo.chart.model,M=V.enums,l=M.EnumDSSGraphType,s=M.EnumDSSGraphObject,q=M.EnumDSSGraphProperty,F=mstrmojo.num,D=mstrmojo.chart.common,G=D.Utility,A=G.tripleId;var B=["[SF:-3]","[SF:-6]","[SF:-9]"];var i=new c.TripleId(),k=new c.ChartAdvFormat(),L=new c.ChartAdvFormat(),g=new c.ChartAdvFormat();function Y(x){switch(x){case s.DssGraphY1Label:case s.DssGraphY2Label:case s.DssGraphY3Label:case s.DssGraphY4Label:case s.DssGraphX1Label:case s.DssGraphX2Label:return true;}return false;}function O(x){switch(x.mObjectId){case s.DssGraphUserLabel1:return s.DssGraphY1Label;case s.DssGraphUserLabel2:return s.DssGraphY2Label;case s.DssGraphUserLabel3:return s.DssGraphX1Label;case s.DssGraphUserLabel4:return s.DssGraphX2Label;default:return x.mObjectId;}}function E(AA){var x,y=this.mSuffix,z=AA;if(z.length&&this.mNumber<0){if(z[0]==="-"&&this.mPrefix!=="-"){z=z.substring(1);this.mPrefix="-"+this.mPrefix;}}x=this.mPrefix;if(this.mHasBracket){if(z.length>=2&&z[0]==="("&&z[z.length-1]===")"){z="("+x+z.substring(1,z.length-2)+y+")";}else{z=x+z+y;}}else{z=x+z+y;}if(this.mIsFinal){this.SetText(z);}else{this.mText=z;}}function S(x){return(x.search(/\?\/[0-9\?]/)!==-1);}function T(x){return x.replace(/[^"]E-/,"E");}function t(AD,AC,AH,AF){var AA,AB,z,AE,x,AG,y;y=AH;AA=new D.FractionNumber();AB=new D.FractionNumber();z=new D.FractionNumber();AE=new D.FractionNumber();AB.mNumerator=0;AB.mDenominator=z.mDenominator=z.mNumerator=1;AE.mDenominator=AB.mDenominator+z.mDenominator;AE.mNumerator=AB.mNumerator+z.mNumerator;AG=AD>=0;AD=Math.abs(AD);x=Math.floor(AD);AD-=x;while(AE.mDenominator<y){if(Math.abs(AE.ToDouble()-AD)<1e-15){AA.Copy(AE);break;}if(AE.ToDouble()>AD){z.Copy(AE);}else{AB.Copy(AE);}AE.mDenominator=AB.mDenominator+z.mDenominator;AE.mNumerator=AB.mNumerator+z.mNumerator;}if(AE.mDenominator>=y){if(AD-AB.ToDouble()<z.ToDouble()-AD){AA.Copy(AB);}else{AA.Copy(z);}}if(x>0){AA.mNumerator+=x*AA.mDenominator;}return AA.ToString(AC,AG,AF);}function W(AD,y,AA){var AB,z,AF,x=10,AE,AG;AG=y.indexOf("# ",0);AE=(AG!==-1);for(AB=5;AB>0;AB--){AF="/";for(z=0;z<AB;z++){AF+="?";}AG=y.indexOf(AF,0);if(AG!==-1){for(z=1;z<AB;z++){x*=10;}break;}}var AC;AC=t(AD,AE,x,AA);return AC;}function p(AJ,AD){var AA,AL,AK,AH=AD.lastIndexOf("/"),y=AD.substr(AH+1,AD.length);AA=(y.indexOf("?")===-1);if(AA){var AC=AJ<0,AI=(AD.indexOf("# ",0)!==-1),x,z=y.ToInteger();AJ=Math.abs(AJ);x=Math.floor(AJ);AJ-=x;var AE=Math.floor(AJ*z+0.5);x+=AE/z;AE%=z;if(!AI){AE+=x*z;x=0;}if(x===0&&AE===0){return"0";}if(x!==0){AK=x.ToString();if(AE!==0){AK+=" ";}}if(AE!==0){AK=AE.ToString();AK+="/";AK+=z.ToString();}AL=AK;if(AC){AL="-"+AL;}return AL;}var AG=this.mTripleId.mObjectId,AB=Y.call(this,AG),AF=AG===s.DssGraphDataText;AL=W(AJ,AD,!AB&&!AF);return AL;}function C(AC){var AB,AA,y,x="",z="";AB='"';AA=AC.indexOf(AB);if(AA===-1){return{Format:AC,HasLeftOver:true,Prefix:x,Suffix:z};}y=AC.indexOf(AB,AA+1);if(y===-1){return{Format:AC,HasLeftOver:false,Prefix:x,Suffix:z};}if(AA===0){x=AC.substring(1,y);AC=AC.substring(y+1);}AA=AC.lastIndexOf(AB);if(AA===-1){return{Format:AC,HasLeftOver:true,Prefix:x,Suffix:z};}y=AC.lastIndexOf(AB,AA-1);if(y===-1){return{Format:AC,HasLeftOver:false,Prefix:x,Suffix:z};}if(AA===AC.length-1){z=AC.substring(y+1,AA);AC=AC.substring(0,y);}return{Format:AC,HasLeftOver:true,Prefix:x,Suffix:z};}function R(AA,AH){AH=AH||false;var AJ,AL="",AB="",AE,AK,AD,y,z,AC,AG,x,AI=false,AF;AE=AA.indexOf(";");AJ=false;if(AE!==-1){AL=AA.substring(0,AE);AB=AA.substring(AE+1);}else{AL=AA;if(AH===false){AB=AL;AI=true;}}AK=AB.length>0;AD=AK;if(AD){AD=AB[0]==="[";if(AD){z=AB.indexOf("]");AD=z!==-1;if(AD){y=AB.substring(0,z+1);AB=AB.substring(z+1);}}}if(AB.length>=2){AJ=(AB[0]==="("&&AB[AB.length-1]===")");}if(AJ){AB=AB.substring(1,AB.length-1);}AC=false;if(this.mNumber>=0){AF=C.call(this,AL);AL=AF.Format;AC=AF.HasLeftOver;AG=AF.Prefix;x=AF.Suffix;AF=C.call(this,AB);AB=AF.Format;}else{AF=C.call(this,AB);AB=AF.Format;AC=AF.HasLeftOver;AG=AF.Prefix;x=AF.Suffix;AF=C.call(this,AL);AL=AF.Format;}if(AJ){AB="("+AB+")";}if(AD){AB=y+AB;}if(AK){if(AI){AA=AB;}else{AA=AL+";"+AB;}}else{AA=AL;}return{Format:AA,HasLeftOver:AC,HasBracket:AJ,Prefix:AG,Suffix:x};}function J(y,AB){AB=(AB!==undefined)?AB:true;var x,AA,AC,z;if(this.mPrefix.length>0||this.mSuffix.length>0){return y;}x=y.substring(0);z=R.call(this,x,AB);x=z.Format;AA=z.Prefix;AC=z.Suffix;if(AA.length){this.mPrefix=AA;}if(AC.length){this.mSuffix=AC;}return x.substring(0);}function P(x,y,AB){var AA,z;AA=this.mNumber;if(this.mNumber<0&&y>=2&&y!==5){AA=-this.mNumber;}z=G.hFormatValue(x,AA);if(this.mNumber<0){if(y===3||y===4){z="("+z+")";}if(y===2||y===4||y===5){this.mColor=255;}}E.call(this,z);}function v(AF,AI){var AB,AH,z,x,AC,AD=-1,AA=-1,AE=["[SF:-3]","[SF:-6]","[SF:-9]"];AB=AF.mCustomFormat[0];x=AF.mCustomFormat.length;AH=AF.mCustomFormat[x-1];AC=AF.mCustomFormat.substring(0);if(AB==="K"){AD=1;AA=0;z="K";}else{if(AH==="K"){AD=x;AA=0;z="K";}else{if(AB==="M"){AD=1;AA=1;z="M";}else{if(AH==="M"){AD=x;AA=1;z="M";}else{if(AB==="B"){AD=1;AA=2;z="B";}else{if(AH==="B"){AD=x;AA=2;z="B";}}}}}}if(AD!==-1){AC.replace(/([KMB])/g,'"$1"');var y;var AG=AC.indexOf(";");if(AG!==-1){if(AB===z){y='"'+z+'"'+B[AA];}else{y=B[AA]+'"'+z+'"';}AC.replace(";",";"+AE[AA]);}AC=B[AA]+AC;}P.call(this,AC,AF.mNegFormat,AI);}function Q(y,AE){var AA,x=y.mCustomFormat.substring(0);AA=R.call(this,x);this.mHasBracket=this.mHasBracket||AA.HasBracket;x=AA.Format;var AB=!AA.HasLeftOver,z=AA.HasBracket,AC=AA.Prefix,AD=AA.Suffix;if(AC.length){this.mPrefix=AC.substring(0);}if(AD.length){this.mSuffix=AD.substring(0);}y.mCustomFormat=x.substring(0);if(AB){y.mCustomFormat=J.call(this,y.mCustomFormat);}P.call(this,y.mCustomFormat,y.mNegFormat,AE);}function X(AB){var AA,z,y,x=AB.length;if(x===0){return{Format:AB,Base:1};}if(AB[x-1]!==","){return{Format:AB,Base:1};}if(AB===","){return{Format:AB,Base:1000};}z=AB.reverse();AA=z.search(/[^,]/);if(AA===-1){y=Math.pow(1000,x);return{Format:"",Base:y};}y=Math.pow(1000,AA);return{Format:AB.substring(0,x-1),Base:y};}function I(AV,AH){var AU=this.mNumber,AX,AQ,AF,AJ,AD,AN,AE,z,AC,AO,AA,y,AS,AT,AL,AP,AB,AK,AM,x,AR;if(AV===null){E.call(this,G.hFormatValue("General",this.mNumber));}else{L.restore();AX=AV.getGridDataFormat(L,(this.mTripleId.mSeriesId<0)?0:this.mTripleId.mSeriesId,(this.mTripleId.mGroupId<0)?0:this.mTripleId.mGroupId,this.mColumnOffset);if(AX!==true){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AQ=L.mCustomFormat.substring(0);if(S.call(this,AQ)){L.mFormatType=h.Fraction;}if(L.mFormatType===h.Fraction){AF=L.mCustomFormat.substring(0);AJ=p.call(this,this.mNumber,AF);E.call(this,AJ);return ;}L.mCustomFormat=J.call(this,L.mCustomFormat);AF=L.mCustomFormat.substring(0);T.call(this,AF);var AW=X.call(this,AF);AD=AW.Base;AF=AW.Format;this.mNumber/=AD;if(this.replaceQuestionMarkWithHash(AF)){AN=AF.indexOf(".");AE=AF.length-AN-1;AL=G.hFormatValue(AF,this.mNumber);z=AL.indexOf(".");AC=0;if(z===-1){z=AL.length;AE=AC;}else{AC=AL.length-AN-1;}AN-=z;AE-=AC;if(AN>0){this.mPrefix="";for(AR=0;AR<AN;AR++){this.mPrefix+=" ";}}if(AE>0){this.mSuffix="";for(AR=0;AR<AN;AR++){this.mSuffix+=" ";}}E.call(this,AL);this.mNumber=AU;return ;}if(L.mFormatType===h.Scientific){AF.replace("#","0");}AO=".";AD=1;AA=AF.lastIndexOf(AO);y=this.mNumber;if(AA!==-1&&L.mFormatType===h.Custom){var AG=this.AdjustFormatStringWithDot(AF,AA);AD=AG.BASE;AF=AG.STRING;y/=AD;}else{if(L.mFormatType===h.Custom){AS=AF.length;if(AS>2){var AI=AF[AS-1];if(AF[AS-2]==="\\"&&(AI==="B"||AI==="b"||AI==="M"||AI==="m"||AI==="K"||AI==="k")){AT=AF[AS-1];AP='"';AF=AF.substring(0,AS-2);AF+=AP;AF+=AT;AF+=AP;AB="";AD=this.getBaseForCustomFormatting(AF);y/=AD;AF+=AP;AF+=AB;AF+=AP;}}}}AK=false;if(AF.indexOf("* -")!==-1){AK=this.mNumber<0;if(AK){AF.replace("* -","* ");}}if(AF===""){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AL=G.hFormatValue(AF,y);AM=AL.length;if(AL.length){x=L.mNegFormat>=3&&AL[0]==="("&&AL[AM-1]===")";if(x&&AL.length>this.mPrefix.length&&this.mPrefix.length&&this.mNumber<0){AL="("+this.mPrefix+AL.substring(1);this.mPrefix=this.mSuffix="";}}if(AK){this.mText=AL;AE=this.mText.search(/[0-9]/);if(AE!==-1){if(AE>0){AL=this.mText.substring(0,AE);}AL=AL+"-"+this.mText.substring(AE);}}E.call(this,AL);this.mNumber=AU;}}function U(AR,AE,AG){var AP,AO,AQ,AI,AC,AN,AF,AH,AK,AA,AL,AB,x,z,AM,y,AJ;switch(AE.mFormatType){case h.Default:b.visPrint("should not reach here.");break;case h.General:E.call(this,G.hFormatValue("",this.mNumber));break;case h.FromGrid:I.call(this,AR,AG);break;case h.Fixed:v.call(this,AE,AG);break;case h.Date:case h.Time:AC=AE.mCustomFormat.substring(0);AC.replace(/[:(tt)]/g,"");E.call(this,G.hFormatValue(AC,this.mNumber));break;case h.Percentage:AC=AE.mCustomFormat.substring(0);P.call(this,AC,AE.mNegFormat,AG);break;case h.Fraction:AC=AE.mCustomFormat.substring(0);AI=p.call(this,this.mNumber,AC);E.call(this,AI);break;case h.Special:AP=new c.ChartAdvFormat({ChartAdvFormat:AE});if(AP.mCustomFormat.localeCompare("#####")===false&&this.mNumber===0){AP.mCustomFormat[4]="0";}E.call(this,G.hFormatValue(AP.mCustomFormat,this.mNumber));break;case h.Currency:AP=new c.ChartAdvFormat({ChartAdvFormat:AE});Q.call(this,AP,AG);break;case h.Scientific:AC=AE.mCustomFormat.substring(0);AC.replace("#","0");E.call(this,F.formatByMask(AC,this.mNumber));break;default:AQ=this.mNumber;AF=false;AP=new c.ChartAdvFormat({ChartAdvFormat:AE});AH=AP.mCustomFormat.substring(0);if(AH==="?"){AH="0";}if(AP.mFormatType===h.Custom){AK=S.call(this,AH);if(AK){AI=p.call(this,this.mNumber,AH);E.call(this,AI);return ;}AH=T.call(this,AH);AN=X.call(this,AH);AA=AN.Base;AH=AN.Format;this.mNumber/=AA;if(this.replaceQuestionMarkWithHash(AH)){AL=AH.indexOf(".");AB=AH.length-AL-1;AJ=G.hFormatValue(AH,this.mNumber);x=AJ.indexOf(".");z=0;if(x===-1){x=AJ.length;AB=z;}else{z=AJ.length-AL-1;}AL-=x;AB-=z;if(AL>0){this.mPrefix="";for(AO=0;AO<AL;AO++){this.mPrefix+=" ";}}if(AB>0){this.mSuffix="";for(AO=0;AO<AL;AO++){this.mSuffix+=" ";}}E.call(this,AJ);this.mNumber=AQ;return ;}if(AH.indexOf("* -")!==-1){AH.replace("* -","* ");AF=true;}}AM=".";y=AH.lastIndexOf(AM);if(y!==-1){var AD=this.AdjustFormatStringWithDot(AH,y);AA=AD.BASE;AH=AD.STRING;this.mNumber/=AA;}E.call(this,G.hFormatValue(AH,this.mNumber));if(AF&&this.mNumber<0){AJ=this.mText.substring(0);AB=AJ.search(/[0-9]/);if(AB!==-1){if(AB>0){this.mText=AJ.substring(0,AB);}this.mText=this.mText+"-"+AJ.substring(AB);E.call(this,this.mText);}}this.mNumber=AQ;break;}}function a(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}return this.expectCondense===true;}function m(AB,AG,AD){var x=this.mChartContextPtr,AA,AF=this.mChartContextPtr.mIsGraphMatrix,AE=O.call(this,this.mTripleId);if(x.mIsTimeSeriesChart&&AE===s.DssGraphY1Label){this.SetNumberFormatForTimeSeries(AB);return ;}if(AF===false){return ;}if(Y.call(this,AE)){if(this.shouldCondense){this.SetNumberFormatForTimeSeries(AB);return ;}g.reset(AB);AA=this.mNumber;if(g.mFormatType===h.Default){var y=x.getAxisKeyFromObjectId(AE),z=x.getUniformAxisInformationFromKey(y),AH=z.Metrics;if(AH===undefined||AH.length===0){AH=[0];}x.getAxisAutoNumberFormat(g,AH);g.mCustomFormat=J.call(this,g.mCustomFormat);}U.call(this,AD,g,AG);var AC=this.mChartContextPtr.GetGraphMatrixContext();if(a.call(this)){if(this.mText.length>AC.getCondensedTextLimit(g.mFormatType)){this.mNumber=AA;this.mPrefix=this.mSuffix="";this.SetNumberFormatForTimeSeries(AB);}}}}mstrmojo.chart.NumberObject=mstrmojo.declare(mstrmojo.chart.TextObject,null,{scriptClass:"mstrmojo.chart.NumberObject",mNumber:0,mColor:-1,mIsFinal:false,mIsAbbreviated:false,mColumnOffset:0,mHasBracket:false,mPrefix:"",mSuffix:"",expectCondense:false,shouldCondense:false,init:function u(x){if(x.Locale===undefined){x.Locale=0;}this._super(x);this.mNumber=x.Number;this.mIsFinal=x.IsFinal!==undefined?x.IsFinal:true;this.mColumnOffset=x.ColumnOffset!==undefined?x.ColumnOffset:0;this.mPrefix="";this.mSuffix="";if(x.ExpectCondense){this.expectCondense=x.ExpectCondense;}if(x.ShouldCondense){this.shouldCondense=x.ShouldCondense;}this.SetNumberFormat(x.NumberFormat,x.Locale,x.DataSet);},SetNumberFormat:function Z(AB,AH,AC){var x=this.mChartContextPtr,AD,AA=this.mChartContextPtr.mIsGraphMatrix,AE=O.call(this,this.mTripleId),AG,AF,y,z;if(x.mIsTimeSeriesChart&&AE===s.DssGraphY1Label){return m.call(this,AB,AH,AC);}if(x.mIsGraphMatrix&&Y.call(this,AE)){return m.call(this,AB,AH,AC);}k.reset(AB);y=k.mFormatType;AD=x.GetGraphMajorType();A.reset(i,this.mTripleId.mObjectId);if(((AE===s.DssGraphDataText||AE===s.DssGraphRiser)&&(AD===d.GMT_SCATTER||AD===d.GMT_BUBBLE))&&!AA){switch(this.mColumnOffset){case 0:A.reset(i,s.DssGraphX1Body);break;case 1:A.reset(i,s.DssGraphY1Body);break;case 2:A.reset(i,s.DssGraphZBody);break;default:break;}AG=x.GetProperty(q.DssGraphAxisNumberFormat,i);if(AG){x.ParseValueToFormat(AG,k);}switch(this.mColumnOffset){case 0:A.reset(i,s.DssGraphX1Label);break;case 1:A.reset(i,s.DssGraphY1Label);break;default:break;}}AE=i.mObjectId;if(Y.call(this,AE)){if(AA===false){if(((y===h.FromGrid)||(y===h.Default))){if(x.mGraphType===l.DssGraphTypePareto_Percent){k.mFormatType=h.General;}else{x.getAxisAutoNumberFormat(k);k.mCustomFormat=J.call(this,k.mCustomFormat);}}}}else{if(y===h.Default){k.mFormatType=h.FromGrid;}if(AE===s.DssGraphDataText&&y===h.FromGrid&&AD===d.GMT_HISTOGRAM){k.mFormatType=h.General;}}if((this.mNumber>1000000000000000||this.mNumber<-1000000000000000)&&y===h.Currency){AF="0";for(z=0;z<k.mDigits;z++){if(z===0){AF+=".";}AF+="0";}AF+="E+00";k.mCustomFormat=AF.substr(0);k.mFormatType=h.Scientific;}U.call(this,AC,k,AH);},Draw:function o(){var y=this.mFormatFontPtr,x=this.mColor;if(x>=0){var z=x;if(y){z=y.mFontColor;y.mFontColor=x;}this._super();if(y){y.mFontColor=z;}}else{this._super();}},replaceQuestionMarkWithHash:function w(AB){var z,y,AA,x="";if(AB.length===0){return false;}y=AB.length;z=0;for(AA=0;AA<y;AA++){if(x.indexOf(AB[AA])===-1){x+=AB[AA];}if(AB[AA]==="."){z++;}}if(x===".?"||x==="?."){if(z===1){AB.replace("?","#");return true;}}return false;},AddTextBeforeNumber:function H(z){var x,y;x=new c.Rect2D();this.SetRect(x);y=z+"\n"+this.mText;this.SetText(y);this.mIsFinal=true;},getBaseForCustomFormatting:function n(AA){var AD="",AG="",AC=1000,y='"',AE=AA.lastIndexOf(y);if(AE!==-1&&AE===AA.length-1){AE=AA.lastIndexOf(y,AE-1);if(AE!==-1){if(AE!==0&&!(AE===1&&AA.charAt(0)==="-")){if(AA.lastIndexOf("(",AE-1)===-1){var z=AA.substr(AE,AA.length);AG=z.replace(/"""/gi,"");AA=AA.substr(0,AE);}}}}AE=AA.length-1;var x=1,AF=AA.charAt(AE),AB=true;switch(AF){case"K":case"k":x*=AC;AD=AF;AE-=1;break;case"M":case"m":x*=AC*AC;AD=AF;AE-=1;break;case"B":case"b":x*=AC*AC*AC;AD=AF;AE-=1;break;default:AB=false;break;}AA=AA.substr(0,AE+1);if(AB){AE=AA.length-1;if(AA.charAt(AE)===","){AA=AA.substr(0,AE);}return{BASE:x,STRING:AA,TAG:AD,SUFFIX:AG};}var AH=",";while(AE>0){if(AA.charAt(AE)!==AH){break;}AE--;x*=AC;}AA=AA.substr(0,AE+1);return{BASE:x,STRING:AA,TAG:AD,SUFFIX:AG};},AdjustFormatStringWithDot:function e(AE,AH){var z=".",AB=",",AM=0,AF=0,AA=1,AL="",AN=".",AK=AH-1;while(AK>=0){if(AE[AK]===AB){AF++;AA*=1000;}else{break;}AK--;AL+=AB;}AL+=z;if(!(AM===0&&AF===0)){var y=0,AD=AE.indexOf(AL),x="";while(AD!==-1){x=x.concat(AE.substr(y,AD-y));y=AD+AL.length;x=x.concat(AN);AD=AE.indexOf(AL,y);}x+=AE.substr(y,AE.length);AE=x;}var AG,AC,AI,AJ=AE.lastIndexOf(z);while(AJ!==-1){AI=AE.lastIndexOf(AB,AJ);if((AI!==-1)&&(AI<AJ)&&(AJ-AI>1)&&(AJ-AI<4)){AC="";AC=AC.concat(AE.substr(0,AI+1));for(AG=0;AG<4-(AJ-AI);AG++){AC=AC.concat(AE[AI+1]);}AC=AC.concat(AE.substr(AI+1));AE=AC;}AJ=AE.lastIndexOf(z,AJ-1);}return{BASE:AA,STRING:AE};},SetNumberFormatForTimeSeries:function j(AC){var y=this.mChartContextPtr,AA=this.mNumber,AG,z,AB=y.mIsGraphMatrix;if(AC.mFormatType===0&&!AB){var AF;if(this.mNumber>0){AF=y.getInt(AA);AG="$"+AF.ToString();}else{AA=-AA;AF=y.getInt(AA);AG="($"+AF.ToString()+")";}E.call(this,AG);return ;}this.mIsAbbreviated=this.mIsAbbreviated||AB;var AE=this.mTripleId.mObjectId,AD=AB&&Y.call(this,AE),x=AD?r:N;AG=G.abbreviateNumber(this.mNumber,x);E.call(this,AG);},GetNumberFromText:function f(){if(this.mText!==""){var x=parseFloat(this.mText);if(G.isValidNumber(x)){return x;}return null;}return null;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Point2D","Rect2D","PolyLineObject","PolygonObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFontRotation","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var $C=mstrmojo.chart,$M=mstrmojo.chart.model,$MODEL_ENUMS=$M.enums,$CHART_ENUMS=$C.enums,$FR=$MODEL_ENUMS.EnumDSSGraphFontRotation,$GO=$MODEL_ENUMS.EnumDSSGraphObject,$SHP=$MODEL_ENUMS.EnumShapeType,$GMDLP=$CHART_ENUMS.EnumGraphMatrixDataLabelPosition,kOffset=[[0,0],[0,1],[1,0],[1,1]],kGridGeneric=1,kGridOccupy=2,kGridObject=4,kGridCircle=8,k_MaxCount=10000000;function hPointToIndex(point,isUseFloorValue){var x=point.x-this.Origin.x,y=point.y-this.Origin.y,xIndex,yIndex;if(isUseFloorValue===undefined){isUseFloorValue=true;}if(isUseFloorValue){xIndex=Math.floor(x/this.XUnit);yIndex=Math.floor(y/this.YUnit);}else{xIndex=Math.ceil(x/this.XUnit);yIndex=Math.ceil(y/this.YUnit);}return{flag:!(xIndex<0||yIndex<0),col:xIndex,row:yIndex};}function hGetRectPosition(rect,adjustValue){var x,y,xCover,yCover,temp,result;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;if(x<0||y<0||xCover>this.XCount||yCover>this.YCount||x+xCover>this.XCount||y+yCover>this.YCount){if(!adjustValue){result=null;}else{result={x:Math.max(0,x),y:Math.max(0,y),xRange:Math.min(xCover,this.XCount),yRange:Math.min(yCover,this.YCount)};}}else{result={x:x,y:y,xRange:xCover,yRange:yCover};}return result;}function hIndexToPoint(x,y,point){if(point){point.x=this.Origin.x+x*this.XUnit;point.y=this.Origin.y+y*this.YUnit;return point;}return new $C.Point2D({x:this.Origin.x+x*this.XUnit,y:this.Origin.y+y*this.YUnit});}function hIsOccupiedByHostMarkerRect(hostMarker,x,y){var lX,lY,lXRange,lYRange,lRetVal;lRetVal=hGetRectPosition.call(this,hostMarker,true);lX=lRetVal.x;lY=lRetVal.y;lXRange=lRetVal.xRange;lYRange=lRetVal.yRange;return(x>=lX&&x<=lX+lXRange&&y>=lY&&lY<=lY+lYRange);}function hIsOccupiedByHostMarkerCircle(center,radius,x,y){var i,xIndex,yIndex,point=new $C.Point2D();for(i=0;i<4;++i){xIndex=x+kOffset[i][0];yIndex=y+kOffset[i][1];point=hIndexToPoint.call(this,xIndex,yIndex,point);if(point.Distance(center)<radius){return true;}}return false;}function hGetApproximateCenterFromTopLeft(topLeftPoint,xOffset,yOffset){var point=new $C.Point2D({Point2D:topLeftPoint});point.x+=Math.ceil((0.5*xOffset)*this.XUnit);point.y+=Math.ceil((0.5*yOffset)*this.YUnit);return point;}function hCountOverlapsInRect(startX,startY,xCover,yCover,point,limit){var count=0,i,j,matrix=this.Matrix,tempPoint;for(j=0;j<yCover;++j){for(i=0;i<xCover;++i){count+=matrix[startY+j][startX+i];if(count>limit){return count;}}}tempPoint=hIndexToPoint.call(this,startX,startY);point.x=tempPoint.x;point.y=tempPoint.y;return count;}function hTreatTiltOccupation(occupy,isAdd,is45){return true;}function hGetRectRange(rect){var x,y,xCover,yCover,temp;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;return{xRange:xCover,yRange:yCover};}function hDirection(point1,point2,point3){var dir1,dir2;dir1=new $C.Vector2D({StartPoint:point1,EndPoint:point3});dir2=new $C.Vector2D({StartPoint:point1,EndPoint:point2});return dir1.CrossProduct(dir2);}function hOnSegment(point1,point2,point3){var xMax,xMin,yMax,yMin;if(point1.x<point2.x){xMin=point1.x;xMax=point2.x;}else{xMin=point2.x;xMax=point1.x;}if(point1.y<point2.y){yMin=point1.y;yMax=point2.y;}else{yMin=point2.y;yMax=point1.y;}return !(point3.x<xMin||point3.x>xMax||point3.y<yMin||point3.y>yMax);}function hSegmentsIntersection(point1,point2,point3,point4){var d1=hDirection.call(this,point3,point4,point1),d2=hDirection.call(this,point3,point4,point2),d3=hDirection.call(this,point1,point2,point3),d4=hDirection.call(this,point1,point2,point4);if(d1*d2<0&&d3*d4<0){return true;}if(d1===0&&hOnSegment.call(this,point3,point4,point1)){return true;}if(d2===0&&hOnSegment.call(this,point3,point4,point2)){return true;}if(d3===0&&hOnSegment.call(this,point1,point2,point3)){return true;}if(d4===0&&hOnSegment.call(this,point1,point2,point4)){return true;}return false;}function hSearchAlongAxes(point,markerCenter,originIndex,xyOffset,rectCover,alreadyHasOnePlacement,isYFirst){var position=new $C.Point2D(),limit=1,outerStart,innerStart,outerRange,innerRange,outerOffset,innerOffset,outerCover,innerCover,needCheckForFullAccommodation,i,j,startX,startY,tempPoint1,tempPoint2,distSqr1,distSqr2,result=null;if(isYFirst===undefined){isYFirst=true;}outerStart=isYFirst?originIndex.x:originIndex.y;innerStart=originIndex.x+originIndex.y-outerStart;outerRange=isYFirst?this.XCount:this.YCount;innerRange=this.XCount+this.YCount-outerRange;outerOffset=isYFirst?xyOffset.x:xyOffset.y;innerOffset=xyOffset.x+xyOffset.y-outerOffset;outerCover=isYFirst?rectCover.x:rectCover.y;innerCover=rectCover.x+rectCover.y-outerCover;needCheckForFullAccommodation=(xyOffset.x===-1);for(i=outerStart;
/*lIsFound && */
(i>=0&&i<outerRange);i+=outerOffset){if(i+outerCover>outerRange||i+outerCover<0){continue;}for(j=innerStart;
/*lIsFound &&*/
(j>=0&&j<innerRange);j+=innerOffset){if(j+innerCover>innerRange||j+innerCover<0){continue;}startX=isYFirst?i:j;startY=i+j-startX;if(startX<0||startY<0){continue;}if(hCountOverlapsInRect.call(this,startX,startY,rectCover.x,rectCover.y,position,limit)<=limit){if(alreadyHasOnePlacement){tempPoint1=hGetApproximateCenterFromTopLeft.call(this,point,rectCover.x,rectCover.y);distSqr1=tempPoint1.DistanceSquared(markerCenter);tempPoint2=hGetApproximateCenterFromTopLeft.call(this,position,rectCover.x,rectCover.y);distSqr2=tempPoint2.DistanceSquared(markerCenter);if(distSqr1>distSqr2){result=position;}}else{result=position;alreadyHasOnePlacement=true;}if(!needCheckForFullAccommodation||(isYFirst&&needCheckForFullAccommodation&&(startX+rectCover.x)<=originIndex.x)){return result;}if(isYFirst){i=originIndex.x-rectCover.x;j=innerStart;}}}}return result;}function hSearchInAreas(position,markerCenter,originX,originY,width,height){var atLeastOneFound=false,eachArea,addX,addY,offset,originIndex,xyOffset,rectCover;for(eachArea=0;eachArea<4;++eachArea){addX=(eachArea===0||eachArea===1)?-1:1;addY=(eachArea===1||eachArea===2)?-1:1;offset=(eachArea===0||eachArea===1)?0:1;originIndex=new $C.Point2D({x:originX+offset,y:originY});xyOffset=new $C.Point2D({x:addX,y:addY});rectCover=new $C.Point2D({x:width,y:height});atLeastOneFound=(hSearchAlongAxes.call(this,position,markerCenter,originIndex,xyOffset,rectCover,atLeastOneFound)!==null);}return atLeastOneFound;}function hAreTwoRectsFitPadding(rectDataLabel,rect,padding){return((rectDataLabel.x+rectDataLabel.width+padding<=rect.x)||(rectDataLabel.x>=rect.x+rect.width+padding)||(rectDataLabel.y+rectDataLabel.height+padding<=rect.y)||(rectDataLabel.y>=rect.y+rect.height+padding));}function hAreTwoObjectsFitPadding(center,radius,rectDataLabel,padding){return !((center.Distance(rectDataLabel.GetTopLeft())<radius+padding)||(center.Distance(rectDataLabel.GetBottomLeft())<radius+padding)||(center.Distance(rectDataLabel.GetTopRight())<radius+padding)||(center.Distance(rectDataLabel.GetBottomRight())<radius+padding));}function hPopulateOneColumn(columnObject,columnElementCount,defaultValue){var oneColumnVector=[];for(var i=0;i<columnElementCount;i++){oneColumnVector[i]=defaultValue===0?0:[];}columnObject.push(oneColumnVector);}function hPopulateGrid(props){var propRect,propUnit,propRectWidth,propRectHeight,propUnitWidth,propUnitHeight,i=0,j=0,matrixType,gridOccupyCircleVector;props.MatrixType=props.MatrixType||15;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];if(props&&props.Rect&&props.Unit){propRect=props.Rect;propUnit=props.Unit;propRectWidth=propRect.width;propRectHeight=propRect.height;propUnitWidth=propUnit.width;propUnitHeight=propUnit.height;matrixType=props.MatrixType;this.IsValid=((propRectWidth*propRectHeight>propUnitWidth*propUnitHeight)&&(propRectWidth>=propUnitWidth)&&(propRectHeight>=propUnitHeight));if(!this.IsValid){return false;}this.Origin=propRect.GetTopLeft();this.XCount=Math.ceil(propRectWidth/propUnitWidth);this.YCount=Math.ceil(propRectHeight/propUnitHeight);this.XUnit=propUnitWidth;this.YUnit=propUnitHeight;for(i=0;i<this.YCount;++i){if(matrixType&kGridGeneric){hPopulateOneColumn.call(this,this.Matrix,this.XCount,0);}if(matrixType&kGridOccupy){hPopulateOneColumn.call(this,this.MatrixOccupy,this.XCount,1);}if(matrixType&kGridObject){hPopulateOneColumn.call(this,this.MatrixOccupyObject,this.XCount,1);}if(matrixType&kGridCircle){hPopulateOneColumn.call(this,this.MatrixOccupyCircleObject,this.XCount,1);}}return true;}return false;}mstrmojo.chart.GridMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridMap",IsValid:false,Metric:0,XUnit:0,YUnit:0,XCount:0,YCount:0,Origin:null,Matrix:null,MatrixOccupy:null,MatrixOccupyObject:null,MatrixOccupyCircleObject:null,dataLabelPadding:5,initialized:false,init:function init(props){this.initialized=hPopulateGrid.call(this,props);},populate:function populate(props){this.initialized=this.initialized||hPopulateGrid.call(this,props);},destroy:function destroy(){this.initialized=this.IsValid=false;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];},ToMetric:function ToMetric(){var i,j,count=0,xCount=this.XCount,yCount=this.YCount;for(i=0;i<yCount;++i){for(j=0;j<xCount;++j){if(this.Matrix[i][j]>=2){++count;}}}return count;},ToInspectedMetric:function ToInspectedMetric(shapeInfo){var density={Max:-100,Min:10000000000,Occupied:0,Total:0},rect=shapeInfo.BoundingBox,range=hGetRectPosition.call(this,rect,true),isPie=shapeInfo.Shape===$SHP._PIE,position=shapeInfo.Position,isCircle=isPie||(shapeInfo.Shape===$SHP._CIRCLE),inspectPoint=new $C.Point2D(),x=range.x,y=range.y,i,j,k,radius=shapeInfo.Size,restrictRadius=0,xRange=range.xRange,yRange=range.yRange;if(isPie&&shapeInfo.ExclusiveRect){restrictRadius=0.5*shapeInfo.ExclusiveRect.width;}for(i=0;i<range.xRange;++i){for(j=0;j<range.yRange;++j){x=range.x+i;y=range.y+j;if(x>=this.XCount||y>=this.YCount){continue;}var shouldCount=false;if(isCircle){for(k=0;k<4;++k){var distance,tempIndexY=y+kOffset[k][0],tempIndexX=x+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}inspectPoint=hIndexToPoint.call(this,tempIndexX,tempIndexY,inspectPoint);distance=inspectPoint.Distance(position);if(distance<radius&&distance>=restrictRadius){shouldCount=true;break;}}}else{shouldCount=true;}if(shouldCount){var metric=this.Matrix[y][x];density.Max=Math.max(metric,density.Max);density.Min=Math.min(metric,density.Min);density.Occupied+=metric;}}}density.Total=range.xRange*range.yRange;return density;},veryDense:function veryDense(){return false;},UpdateMatrixCircle:function UpdateMatrixCircle(center,radius,isAdd){var x,y,xRange,yRange,occupyArea=new $C.Rect2D({x:center.x-radius,y:center.y-radius,height:radius*2,width:radius*2}),returnVal,delta=isAdd?1:-1,i,j,gridCellIndexPie,xIndex,yIndex,k,addMetric=0,matrix=this.Matrix,tempIndexX,tempIndexY,point=new $C.Point2D();returnVal=hGetRectPosition.call(this,occupyArea,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){gridCellIndexPie=false;xIndex=x+i;yIndex=y+j;if(xIndex>=this.XCount||yIndex>=this.YCount){continue;}for(k=0;k<4;++k){tempIndexY=y+i+kOffset[k][0];tempIndexX=x+j+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}point=hIndexToPoint.call(this,tempIndexX,tempIndexY,point);if(point.Distance(center)<radius){gridCellIndexPie=true;break;}}if(gridCellIndexPie){matrix[yIndex][xIndex]+=delta;if(matrix[yIndex][xIndex]===1){++addMetric;}}}}this.Metric+=addMetric;return true;},UpdateMatrixDataLabelMarker:function UpdateMatrixDataLabelMarker(isDataLabel,occupy){var x,y,xRange,yRange,i,j,xIndex,yIndex,matrix=this.Matrix,addMetric=0,returnVal;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;matrix[yIndex][xIndex]+=k_MaxCount;if(matrix[yIndex][xIndex]===k_MaxCount){addMetric++;}}}this.Metric+=addMetric;return true;},UpdateMatrixPolyLine:function UpdateMatrixPolyLine(occupy,isAdd){var linePoints,i,numberOfLinePoints;if(isAdd===undefined){isAdd=true;}if(occupy===null||occupy===undefined){return false;}linePoints=occupy.mLinePoints;numberOfLinePoints=linePoints.length;for(i=0;i<numberOfLinePoints-1;++i){this.UpdateMatrixLineSegment(linePoints[i],linePoints[i+1],isAdd);}return true;},UpdateMatrixLineSegment:function UpdateMatrixLineSegment(segmentStart,segmentEnd,isAdd){var startPoint=new $C.Point2D({Point2D:segmentStart}),endPoint=new $C.Point2D({Point2D:segmentEnd}),tempPoint,startX,startY,endX,endY,deltaX,deltaY,ratio,temp,interEnd,tempStartY,tempEndX,tempEndY,i,j,matrix=this.Matrix,addMetric=0,subtractMetric=0,yOffset,yExchanged,xIndex,yIndex,delta;if(segmentStart.x>segmentEnd.x){tempPoint=startPoint;startPoint=endPoint;endPoint=tempPoint;}temp=hPointToIndex.call(this,startPoint);startX=temp.col;startY=temp.row;temp=hPointToIndex.call(this,endPoint);endX=temp.col;endY=temp.row;if(startPoint.x!==endPoint.x){deltaX=endPoint.x-startPoint.x;deltaY=endPoint.y-startPoint.y;ratio=deltaY/deltaX;interEnd=new $C.Point2D({Point2D:endPoint});tempStartY=startY;for(i=startX;i<=endX;++i){if(i<0||i>=this.XCount){continue;}deltaX=(i+1)*this.XUnit-startPoint.x;if(i===endX){deltaX=endPoint.x-startPoint.x;}yOffset=deltaX*ratio;interEnd.x=(i+1)*this.XUnit;interEnd.y=startPoint.y+yOffset;temp=hPointToIndex.call(this,interEnd);tempEndX=temp.col;tempEndY=temp.row;yExchanged=false;if(tempStartY>tempEndY){temp=tempStartY;tempStartY=tempEndY;tempEndY=temp;yExchanged=true;}for(j=tempStartY;j<=tempEndY;++j){if(j<0||j>=this.YCount){continue;}xIndex=i;yIndex=j;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}if(!yExchanged){tempStartY=tempEndY;}}}else{if(startY>endY){temp=startY;startY=endY;endY=temp;}for(i=startY;i<=endY;++i){if(i<0||i>=this.YCount){continue;}if(startX<0||startX>=this.XCount){break;}xIndex=startX;yIndex=i;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygon:function UpdateMatrixPolygon(occupy,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);if(occupy.PointInObject(vertex)){occupied=true;break;}}if(!occupied){vertex=hIndexToPoint.call(this,xIndex,yIndex);currentUnit=new $C.Rect2D({x:vertex.x,y:vertex.y,width:this.XUnit,height:this.YUnit});for(k=0;k<polygonPoints.length;++k){if(currentUnit.PointInRectangle(polygonPoints[k])){occupied=true;break;}}}if(!occupied){len=polygonPoints.length;for(k=0;k<4;++k){occupied=false;for(l=0;l<len;++l){var lP1,lP2,lP3,lP4;lP1=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);lP2=hIndexToPoint.call(this,xIndex+kOffset[(k+1)%4][0],yIndex+kOffset[(k+1)%4][1]);lP3=polygonPoints[l];lP4=polygonPoints[(l+1)%len];occupied=hSegmentsIntersection.call(this,lP1,lP2,lP3,lP4);if(occupied){break;}}if(occupied){break;}}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygonWithCanvas:function UpdateMatrixPolygonWithCanvas(occupy,canvas,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}var ctx=canvas.getContext("2d");ctx.globalAlpha=0.01;ctx.beginPath();ctx.moveTo(polygonPoints[0].x,polygonPoints[0].y);for(i=1;i<polygonPoints.length;i++){ctx.lineTo(polygonPoints[i].x,polygonPoints[i].y);}ctx.closePath();ctx.fill();var imagedata=ctx.getImageData(0,0,canvas.width,canvas.height);var data=imagedata.data;function getAlpha(x,y){var i=((y*canvas.width)+x)*4;var a=data[i+3];return a/2;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);var alpha=getAlpha(vertex.x,vertex.y);if(alpha>0){occupied=true;break;}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixRect:function UpdateMatrixRect(occupy,isAdd,rotation){var isTilt,delta,x,y,xRange,yRange,lVal,i,j,addMetric=0,subtractMetric=0,matrix=this.Matrix,indexX,indexY;if(isAdd===undefined){isAdd=true;}rotation=rotation||$FR.Normal;isTilt=(rotation===$FR.Rotate45||rotation===$FR.Rotate315);if(isTilt){return hTreatTiltOccupation.call(this,occupy,(rotation===$FR.Rotate45));}delta=isAdd?1:-1;lVal=hGetRectPosition.call(this,occupy,true);x=lVal.x;y=lVal.y;xRange=lVal.xRange;yRange=lVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){indexY=y+i;indexX=x+j;matrix[indexY][indexX]+=delta;if(isAdd&&matrix[indexY][indexX]===2){addMetric++;}if(!isAdd&&matrix[indexY][indexX]===0){subtractMetric++;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixOccupyCircleObject:function UpdateMatrixOccupyCircleObject(occupy,center,radius){var x,y,xRange,yRange,i,j,xIndex,yIndex,circleOccupied={},returnVal,circleMatrix=this.MatrixOccupyCircleObject;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){if((yIndex<circleMatrix.length)&&(xIndex<circleMatrix[yIndex].length)){circleOccupied.c=center;circleOccupied.r=radius;circleMatrix[yIndex][xIndex].push(circleOccupied);}}}}return true;},UpdateMatrixOccupyObject:function UpdateMatrixOccupyObject(occupy,occupiedObject){var x,y,xRange,yRange,xIndex,yIndex,returnVal,i,j,rectMatrix=this.MatrixOccupyObject;returnVal=hGetRectPosition.call(this,occupy);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;rectMatrix[yIndex][xIndex].push(occupiedObject);}}return true;},UpdateMatrixOccupy:function UpdateMatrixOccupy(isDataLabel,occupy,dataLabelIndex){var x,y,xRange,yRange,returnVal,i,j,occupyMatrix=this.MatrixOccupy,xIndex,yIndex;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(isDataLabel){occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:1});}else{occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:0});}}}},IsFitPaddingWithBorder:function IsFitPaddingWithBorder(occupy,frame){var dataLabelPadding=this.dataLabelPadding;if(occupy.x<frame.x+dataLabelPadding||occupy.x+occupy.width+dataLabelPadding>frame.x+frame.width){return false;}if(occupy.y<frame.y+dataLabelPadding||occupy.y+occupy.height+dataLabelPadding>frame.y+frame.height){return false;}return true;},IsAccomdatableConsiderRotation:function IsAccomdatableConsiderRotation(hostMarker,occupy,position,rotation){var isFound,xCover,yCover,returnVal,markerPosition,col,row,rowColInfo;if(rotation===undefined){rotation=$FR.Normal;}returnVal=hGetRectRange.call(this,occupy);xCover=returnVal.xRange;yCover=returnVal.yRange;if((xCover>this.XCount)||(yCover>this.YCount)){return false;}markerPosition=hostMarker.GetCenter();rowColInfo=hPointToIndex.call(this,markerPosition);if(!rowColInfo.flag){return false;}row=rowColInfo.row;col=rowColInfo.col;isFound=hSearchInAreas.call(this,position,markerPosition,col,row,xCover,yCover);return isFound;},IsAccomdatableDataLabel:function IsAccomdatableDataLabel(hostMarker,occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=2){return false;}if(count===1){if(!hIsOccupiedByHostMarkerRect.call(this,hostMarker,x+j,y+i)){return false;}}}}return true;},IsAccomdatableConsiderLocation:function IsAccomdatableConsiderLocation(occupy,location){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<=xRange;++j){switch(location){case $GMDLP._TOP:if(i===yRange){continue;}break;case $GMDLP._BOTTOM:if(i===-1){continue;}break;case $GMDLP._LEFT:if(j===xRange){continue;}break;case $GMDLP._RIGHT:if(j===-1){continue;}break;default:}count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableConsiderLabelPaddingOnly:function IsAccomdatableConsiderLabelPaddingOnly(occupy,isExceptDataLabel){var returnVal,x,y,xRange,yRange,xIndex,yIndex,count,i;if(isExceptDataLabel){returnVal=this.IsAccomdatableNoPadding(occupy);if(!returnVal){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}return true;}return this.IsAccomdatableNoPadding(occupy);},IsAccomdatableNoPadding:function IsAccomdatableNoPadding(occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableCircle:function IsAccomdatableCircle(center,radius,occupy){var lX,lY,lXRange,lYRange,lVal,lCount,i,j;lVal=hGetRectPosition.call(this,occupy,false);if(lVal===null){return false;}lX=lVal.x;lY=lVal.y;lXRange=lVal.xRange;lYRange=lVal.yRange;for(i=0;i<lYRange;++i){for(j=0;j<lXRange;++j){lCount=this.Matrix[lY+i][lX+j];if(lCount>=2){return false;}if(lCount===1){if(!hIsOccupiedByHostMarkerCircle.call(this,center,radius,lX+j,lY+i)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingCircle:function IsAccomdatableConsiderAccuDistPaddingCircle(center,radius,occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,objects,i,j,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableCircle(center,radius,occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingRect:function IsAccomdatableConsiderAccuDistPaddingRect(occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,i,j,objects,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableNoPadding(occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}return true;},ToDraw:function ToDraw(graphObjManager){var xCount=this.XCount,yCount=this.YCount,matrix=this.Matrix,gridCellOccupied=[],i,j,k,gridPoints,point,tripleId,gridCell,formatLine;for(i=0;i<xCount;++i){for(j=0;j<yCount;++j){if(matrix[i][j]>=1){gridPoints=[];for(k=0;k<5;++k){point=hIndexToPoint.call(this,j+kOffset[k%4][0],i+kOffset[k%4][1]);gridPoints.push(point);}tripleId=new $C.TripleId({ObjectId:$GO.DssGraphDataLine});gridCell=new $C.PolyLineObject({TripleId:tripleId,GraphObjectManager:graphObjManager,PolyLine:gridPoints});formatLine=gridCell.mFormatLinePtr;formatLine.mLineColor=65280;formatLine.mLineThickness=1;gridCellOccupied.push(gridCell);}}}return gridCellOccupied;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GridMap","TextObject","ChartContext","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixDataLabelPosition");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumShapeType");var I=mstrmojo.chart,G=I.ChartConstants,D=I.model,E=D.enums,M=I.enums,H=E.EnumDSSGraphMarkerShape,J=M.EnumGraphMatrixDataLabelPosition,C=E.EnumShapeType,L={};function A(){var U=this.ChartContext,g=U.IsPieChart(),c=(U.IsBubbleChart()||U.IsScatterChart()),a=this.SinglePointObjects.length,Y,d=new I.Rect2D(),b,f=this.GridMap,X=this.PolyLineObjects,R=this.PolygonObjects,V=this.RectangleObjects,e=this.DataAreaFrame,W=this.CirclePieObjects;for(Y=0;Y<a;++Y){d.Reset(0,0,0,0);b=this.SinglePointObjects[Y].GetBoundingRect();if(U.RectangleIntersection(b,e,d)){f.UpdateMatrixRect(d);}}a=X.length;for(Y=0;Y<a;++Y){f.UpdateMatrixPolyLine(X[Y]);}a=R.length;var T=document.createElement("canvas");T.width=this.ChartContext.mGraphWidth;T.height=this.ChartContext.mGraphHeight;for(Y=0;Y<a;++Y){f.UpdateMatrixPolygonWithCanvas(R[Y],T);}a=V.length;for(Y=0;Y<a;++Y){d.Reset(0,0,0,0);if(U.RectangleIntersection(V[Y],e,d)){f.UpdateMatrixRect(d);if(c){f.UpdateMatrixOccupyObject(d,V[Y]);}}}a=W.length;for(Y=0;Y<a;++Y){var Q=W[Y].mCenter,Z=W[Y].mRadius,S=new I.Rect2D({x:Q.x-Z,y:Q.y-Z,height:Z*2,width:Z*2});f.UpdateMatrixCircle(Q,Z,true);if(g){f.UpdateMatrixOccupyCircleObject(S,Q,Z);}}}function K(S,b){var R=this.ChartContext,Y=R.IsLineChart(),T=R.IsAreaChart(),Z=(R.IsBubbleChart()||R.IsScatterChart()),a=false,V=R.GetGraphMatrixContext(),X=S,W,U,Q=b.HostMarkerPoint;W=V.mMarkerShape;if(W===H.DssGraphMarkerShapeCircle||W===H.DssGraphMarkerShapeRectangle||W===H.DssGraphMarkerShapeSquare){a=true;}if((Y&&!a)||T){if(S===J._BOTTOM){X=J._TOP;}else{if(S===J._TOP){X=J._BOTTOM;}}}else{if(Z){U=new I.Rect2D({x:0,y:0,width:R.mGraphWidth,height:R.mGraphHeight});if(S===J._BOTTOM){if(Q.y<=U.height/2){X=J._TOP;}else{X=J._BOTTOM;}}else{if(S===J._TOP){if(Q.y<=U.height/2){X=J._BOTTOM;}else{X=J._TOP;}}}}}return X;}function B(Y,X,Q){var R=Y.HostMarkerPoint,V=Y.CenterXOffset,S=Y.CenterYOffset,U=R.x,T=R.y,W=Y.Label.GetBoundingRect(true);switch(X){case J._BOTTOM:T+=S+Q+W.height*0.5;break;case J._TOP:T-=S+Q+W.height*0.5;break;case J._LEFT:U-=V+Q+W.width*0.5;break;case J._RIGHT:U+=V+Q+W.width*0.5;break;default:break;}Y.Label.MoveToCenter(U,T);}function F(Q,R,S){if(Q.x+Q.width+S<=R.x||Q.x>=R.x+R.width+S){return true;}return(Q.y+Q.height+S<=R.y||Q.y>=R.y+R.height+S);}mstrmojo.chart.DataLabelManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.DataLabelManager",GridMap:null,DataAreaFrame:null,ChartContext:null,seriesOptions:[],SinglePointObjects:[],PolygonObjects:[],PolyLineObjects:[],RectangleObjects:[],CirclePieObjects:[],init:function N(R){var T=this.ChartContext,Q,S;if(R&&R.DataArea){this.DataAreaFrame=R.DataArea;L.height=2;L.width=2;if(T!==null&&T!==undefined){Q=T.GetGraphMatrixContext();S=Q.getPadding(G.kDataLabel);}this.GridMap=new I.GridMap({Rect:this.DataAreaFrame,Unit:L,dataLabelPadding:S});}this.allowOverlap=(T&&T.allowOverlapBetweenDatalabels())||false;this.SinglePointObjects=[];this.PolygonObjects=[];this.PolyLineObjects=[];this.RectangleObjects=[];this.CirclePieObjects=[];this.seriesOptions=[];},PlaceDataLabels:function P(h,m,Q){var Y=false,a=this.ChartContext,v=a.GetGraphMatrixContext(),d=a.IsLineChart(),V=a.IsAreaChart(),W=a.IsPieChart(),f=(a.IsBubbleChart()||a.IsScatterChart()),y=v.isCombinationChart(),w,u,s,q,X,p,x,Z,n=new I.Rect2D(),U,T,t,c,S,g,l,e,r,b=v.getPadding(G.kDataLabel);this.allowOverlap=(a&&a.allowOverlapBetweenDatalabels())||false;this.GridMap.populate();r=this.GridMap;Z=v.mMarkerShape;Q=Q||!(a.isCombinationChart()||a.IsDualAxis());if(Z===H.DssGraphMarkerShapeCircle||Z===H.DssGraphMarkerShapeRectangle||Z===H.DssGraphMarkerShapeSquare){Y=true;}A.call(this);w=h.length;for(u=0;u<w;++u){var R=h[u],o=R.isValid;if(!o){continue;}if(y){T=R.SeriesId;t=R.SeriesInfo;c=this.seriesOptions[t];if(c){S=c.mRealSereisType;if(S===C._LINE||S===C._GENERIC){d=true;}else{if(S===C._CIRCLE||S===C._SQUARE||S===C._RECTANGLE){d=true;Y=true;}else{if(S===C._AREA){V=true;}else{if(S===C._PIE){W=true;}}}}}}x=this.allowOverlap;for(s=J._BOTTOM;s<=J._RIGHT;++s){if(W&&s>0){break;}X=J._BOTTOM;if(!W){X=K.call(this,s,R);B.call(this,R,X,b);}U=R.Label.GetBoundingRectNoRotation(true);p=this.DataAreaFrame;if(this.allowOverlap===false){x=r.IsFitPaddingWithBorder(U,p);if(!x){continue;}if(d&&Y){x=r.IsAccomdatableConsiderLocation(U,X);}else{if((d&&!W)||V){x=r.IsAccomdatableConsiderLabelPaddingOnly(U,true);}else{if(f){x=r.IsAccomdatableConsiderAccuDistPaddingRect(U);}else{if(W){x=r.IsAccomdatableConsiderAccuDistPaddingCircle(R.HostMarkerPoint,R.HostMarkerBound.width/2,U);}}}}if(!x){continue;}g=(m!==undefined&&m!==null)?m.length:0;for(q=0;q<g;++q){l=m[q];if(l.mIsShown){e=l.GetBoundingRect(true);x=F.call(this,U,e,b);if(!x){break;}}}}if(x){R.display=true;R.DataLabelLocation=X;n.Reset(0,0,0,0);if(a.RectangleIntersection(U,this.DataAreaFrame,n)){r.UpdateMatrixDataLabelMarker(true,n);if(f||W){r.UpdateMatrixOccupyObject(n,U);}}R.Label.mIsShown=true;if(m!==undefined&&m!==null){m.push(R.Label);}break;}}if(!x){R.Label.mIsShown=false;}}if(Q){this.GridMap.destroy();}return true;},UpdateMatrixDataLabel:function O(Q){return this.GridMap.UpdateMatrixDataLabelMarker(true,Q);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","Axis","ChartAdvFormat","NumberObject","AxisObject","Vector2D","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphOffScaleType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumNumberCategory","EnumCollectionType","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphMarkerShape");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresCls("mstrmojo.gm.GMUtility");var AJ=mstrmojo.hash,Bb=mstrmojo.chart,BX=Bb.ChartConstants,BE=Bb.enums,BT=mstrmojo.VisUtility,b=BE.EnumGraphMajorType,Ap=BE.EnumDSSGraphOffScaleType,a=BE.EnumAnchorPoint,U=BE.EnumAxisLabelsLocation,h=BE.EnumAxisDirection,AK=BE.EnumGraphObjectType,r=BE.EnumCollectionType,AI=Bb.gNullObjectId,BW=Bb.model,AU=BW.enums,f=AU.EnumDSSGraphMarkerShape,A0=AU.EnumDSSGraphType,A3=AU.EnumDSSGraphProperty,A5=AU.EnumDSSGraphObject,A4=AU.EnumDSSExtraGraphProperty,BI=AU.EnumDSSGraphFontRotation,o=AU.EnumDSSGraphGridLineType,p=BE.EnumRectExpandDirection,T=BE.EnumGraphMatrixMajorGraphType,AN=Bb.common.Utility,A8=mstrmojo.gm,AB=A8.GMUtility,BS=0.00001,Ba=0,AF=1e-14,z=10000,BY=0.1;var AD=new Bb.Rect2D(),Bk=new Bb.Rect2D(),O=new Bb.Rect2D(),R=null,F=null,y=null,V=null,u=new Bb.TripleId();function Az(Bl){switch(Bl){case A5.DssGraphY2Body:case A5.DssGraphX2Body:return true;}return false;}function BP(Bs,Br,Bn){var Bq=Bs,Bo=10,Bl=this.mChartContextPtr,Bp=Bl.mGraphWidth,Bm=Bl.mGraphHeight,Bu=this.IsVerticalAxis();if(Bn===undefined){var Bt=Bu?Bm:Bp;if((Bu^Br)===0){Bn=0.5*Bs;}else{Bn=0.5*(Bt-Bs);}}Bn=Br?-Bn:Bn;if(!Bu){Bn=-Bn;}Bq+=Bn;if(Bq<Bo||Bq+Bo>(Bu?Bm:Bp)){return null;}return Bq;}function X(){if(this.hasLabelCreated){var Bm,Bn=this.mLabelList,Bl=Bn.length;for(Bm=0;Bm<Bl;Bm++){if(Bn[Bm]&&Bn[Bm].mIsShown){return true;}}return false;}return e.call(this);}function Ad(){var Bm=this.mChartContextPtr,Bu=Bm.GetGraphMatrixContext(),Bv={Include:false,DrawFromZero:false};if(Bu.isCombinationChart()){var Bq=Bm.mDataset,Bp=Bq.GetSeriesByShape(),Bx=this.mTripleId.mObjectId,Bw=false,Bt=Az.call(this,Bx),Br=Bp.Bar,Bo=Bp.Area,Bn=0,Bl=0;var Bz=Bq.GetSeriesCount();if(Bm.IsDualAxis()){var Bs=Bt?1:0,By=Bt?"Secondary":"Primary";Bp=Bq.GetShapesDistributionByValueAxis(Bs)[By];Br=Bp.BAR;Bo=Bp.AREA;Bz=Bq.GetSeriesByValueAxis(Bs).length;Bw=(Br&&Br.indexOf(Bs)!==-1)||(Bo&&Bo.indexOf(Bs)!==-1);}else{Bw=((Br&&Br.length>0)||(Bo&&Bo.length>0));}Bw=!!Bw;Bv.Include=Bw;if(Br&&Br.length>0){Bn=Br.length;}if(Bo&&Bo.length>0){Bl=Bo.length;}Bv.DrawFromZero=(Bl+Bn===Bz);}return Bv;}function K(Bl){return Math.log(Bl)/Math.log(10);}function E(){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var Bl=this.mMajorGrid;return Bl.mUseManualGrid&&(Bl.mGridInterval<(this.mMaxTick-this.mMinTick)/30);}function S(){return this.mOptions.mUseMinValue&&this.mOptions.mShowMinLabel;}function BV(B1,Bv,Bn){var Bu,Bp;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}Bu=0;if(Bn){Bu=Math.max(B1,B1-Bv);Bu=Math.max(Bu,-Bv);}else{Bu=B1-Bv;}if(Bu===0){this.mIsShown=false;return 1;}if(Bu>=1&&Bu<=4&&parseInt(Bu)===Bu){var B2=this.PrimaryMetricIndex,Bq=B2.length;for(var Bx=0;Bx<Bq;Bx++){var Bt=this.mChartContextPtr.mDatasetPtr,Bw=Bt.dataProvider,Bo=Bw.getSeriesCount(),Bs=Bw.getGroupCount(),Bm=B2[Bx],Br,Bz;for(var B0=0;B0<Bo;B0++){Br=Bw.getMetricIndexForSeries(B0);if(Br===Bm){Bz=true;for(var By=0;By<Bs;By++){var B3=Bt.GetData(B0,By);if(parseInt(B3)!==B3){Bz=false;break;}}}if(Bz){return 1;}}}}var Bl=Bu;Bp=1;while(Bu<1){Bu*=10;Bp/=10;}while(Bu>=10){Bu/=10;Bp*=10;}if(Bu<1.8){Bp*=2;Bp/=10;}else{if(Bu<3.1){Bp*=4;Bp/=10;}else{if(Bu<4.6){Bp*=5;Bp/=10;}else{if(Bu>=8.1){Bp*=2;}}}}Bp=this.postProcessStep(Bp,Bl);return Bp;}function Ax(){return this.mGraphMajorType===b.GMT_HISTOGRAM&&this.mTripleId.mObjectId===A5.DssGraphX1Body;}function Aq(){return(this.mGraphMajorType===b.GMT_HISTOGRAM||this.mGraphMajorType===b.GMT_POLAR)&&this.mTripleId.mObjectId===A5.DssGraphX1Body;}function J(){var Bl=this.mChartContextPtr;if(Bl.mIsGraphMatrix){return !this.IsVerticalAxis();}if(!this.mChartContextPtr.mManualLayoutMode&&this.mTripleId.mObjectId===A5.DssGraphX1Body&&!this.IsVerticalAxis()){switch(this.mGraphMajorType){case b.GMT_HISTOGRAM:case b.GMT_SCATTER:case b.GMT_BUBBLE:return true;default:break;}}return false;}function AH(){var B3,Bo,Bw,B2,Bn,Bz=0,Bt=this.mOptions,B1,Bq,Bu,Bp=0;var Bm=this.mChartContextPtr,Bs=Bm.mIsGraphMatrix,Bl=Bm.getUniformAxisLabelRotateMode("x");B3=[];this.GetTicks(B3);if(B3.length<2){if(!Bs||Bl===BI.Automatic){return ;}}Bw=Bb.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(Bw,AK.GOT_AXIS_LABEL);Bn=this.mpAxisLabelSet.GetFormatFont();if(Bs){if(Bl!==BI.Automatic){Bn.mFontRotation=Bl;return ;}}B1=B3.length;B2=50;Bo=false;AD.Reset(0,0,0,0);Bn.mFontRotation=BI.Normal;if(!Bs&&B1>=2){if(this.mOptions.mUseMinValue){Bz=1;Bp=1;}if(this.mOptions.mUseMaxValue){B1--;}}var Bx,By=Bz,B0=this.mChartContextPtr.GetGraphMatrixContext();for(Bx=0;Bz<B1;Bz++){if(this.hasLabelCreated){Bq=this.mLabelList[Bz];}Bq=Bq||new Bb.NumberObject({TripleId:Bw,GraphObjectManager:this,Number:B3[Bz],NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});Bq.MoveTo(this.ValueToPosition(B3[Bz]),B2,a.CENTER);Bu=Bq.GetBoundingRect(true);if(Bz!==Bp){if(Bs){var Bv=(Bz===1&&Bt.mUseMinValue)||(Bz===B1-1&&Bt.mUseMaxValue);if(!Bv){var Br=1;Bo=Bu.HasIntersection(AD)||B0.checkPaddingBetweenLabels(AD,Bu,Br,true);}}else{Bo=Bu.HasIntersection(AD);}}AD.ResetRect(Bu);}this.hasLabelCreated=this.mpAxisLabelSet.GetCollectionSize()===B1;if(Bo){Bn.mFontRotation=Bs?BI.Rotate90:BI.Rotate270;}else{Bn.mFontRotation=BI.Normal;}this.maxLabelLength=this.fakeMaxLabelLength;if(this.maxLabelLength!==-1){this.restoreLabels(true);for(Bx=0;By<B1;By++){Bq=this.mLabelList[By];Bq.MoveTo(this.ValueToPosition(B3[By]),B2,a.CENTER);}}}function AZ(){switch(this.mChartContextPtr.GetGraphType()){case A0.DssGraphTypeVertical_Area_DualAxis_Absolute:case A0.DssGraphTypeVertical_Area_DualAxis_Stacked:case A0.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case A0.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case A0.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case A0.DssGraphTypeVertical_Bar_DualAxis_Stacked:case A0.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case A0.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case A0.DssGraphTypeVertical_Line_DualAxis_Absolute:case A0.DssGraphTypeVertical_Line_DualAxis_Stacked:case A0.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case A0.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case A0.DssGraphTypeVertical_Bar_DualAxis_Absolute:case A0.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:return true;default:return false;}}function g(){if(this.mUseDepth){return(Az.call(this,this.mTripleId.mObjectId)===false||!(AZ.call(this)));}return this.mAxisInfo.mShowAxisLine;}function w(Bn,Bl){var Bm;Bm=new Bb.NumberObject({TripleId:Bn,GraphObjectManager:this,Number:Bl,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectedCondense:this.mCondenseLabels});this.mGraphObjectList.push(Bm);this.mpAxisLabelSet.AddGraphObject(Bm);}function Bj(){var Bn,Bl,Bo,Bm;Bn=[];this.GetTicks(Bn);Bl=Bn.length;Bo=this.mLabelObjectId;for(Bm=0;Bm<Bl;++Bm){w.call(this,Bo,Bn[Bm]);}}function AA(Bt,Bm,Br){var Bo=this.mChartContextPtr,Bu=this.mOptions,Bl=Bm,Bq=Br;var Bn=Bo.mIsGraphMatrix&&Bu.mUseCustomMinMax;if(!Bo.mIsTimeSeriesChart&&!Bn){if(Bo.mIsGraphMatrix){var Bs=1e-9,Bp=Math.abs((Bt-this.mMaxTick)/(this.mMaxTick-this.mMinTick));if((Bt<this.mMinTick||(Bt>this.mMaxTick&&Bp>Bs))&&Bu.mOffScaleType===Ap.DssGraphOffScaleHide){return{Flag:false,Value:Bt,Min:Bl,Max:Bq};}if(Bt>this.mMaxTick&&Bu.mOffScaleType===Ap.DssGraphOffScaleHide){Bt=this.mMaxTick;}}else{if((Bt<this.mMinTick||Bt>this.mMaxTick)&&Bu.mOffScaleType===Ap.DssGraphOffScaleHide){return{Flag:false,Value:Bt,Min:Bl,Max:Bq};}}if(Bu.mOffScaleType===Ap.DssGraphOffScaleClip){Bt=(Bt>this.mMaxTick)?this.mMaxTick:Bt;Bt=(Bt<this.mMinTick)?this.mMinTick:Bt;}}Bl=this.mMinTick;Bq=this.mMaxTick;if(this.IsLogarithmic()){if(Bt<=0){return{Flag:false,Value:Bt,Min:Bl,Max:Bq};}Bt=K.call(this,Bt);Bl=K.call(this,Bl);Bq=K.call(this,Bq);}return{Flag:true,Value:Bt,Min:Bl,Max:Bq};}function C(){}function AW(Bo){if(y===null){y=new Bb.Point2D();}else{V.Reset(0,0);}if(V===null){V=new Bb.Point2D();}else{V.Reset(0,0);}var Bm=y,Bq=V,Bn=this.mDeviceDataArea,Bl,Bp;Bl=this.IsVerticalAxis()?Bn.x:Bn.x+Bn.width;Bp=this.IsVerticalAxis()?Bn.y:Bn.y+Bn.height;Bm.Reset(Bl,Bp);Bq.Reset(Bn.x+Bn.width,Bn.y);if(this.IsVerticalAxis()){Bm.y=this.ValueToPosition(Bo);Bq.y=Bm.y;}else{Bm.x=this.ValueToPosition(Bo);Bq.x=Bm.x;}return{LowEnd:Bm,HighEnd:Bq};}function Bh(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Bp=this.mOptions;if(Bp.mUseCustomMinMax||Bp.mUseLogarithmicScale){return ;}var Bn=false,Bl=false,Bo=[];this.GetTicks(Bo);if(Bo.length>=2){var Bm=Bo.length;Bl=((Math.abs(this.mMaximum-Bo[Bm-2])<BY*this.mStep));Bn=((Math.abs(this.mMinimum-Bo[1])<BY*this.mStep));if(this.mIsPercent){Bl=false;}}if(Bl&&Bn){this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;Bp.mUseMinValue=true;Bp.mShowMinLabel=false;Bp.mUseMaxValue=true;Bp.mShowMaxLabel=false;}else{if(Bl){this.mMaxTick=this.mMaximum;Bp.mUseMaxValue=true;Bp.mShowMaxLabel=false;}else{if(Bn){this.mMinTick=this.mMinimum;Bp.mUseMinValue=true;Bp.mShowMinLabel=false;}else{Ba++;}}}if(Bp.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}function Aw(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}if(this.mGraphMajorType===b.GMT_BUBBLE&&this.mTripleId.mObjectId===A5.DssGraphZBody){return ;}Bh.call(this);}function t(){var Bp=this.mChartContextPtr;if(!Bp.mIsGraphMatrix){return false;}var Bo=Bp.mDataset;if(!Bo){return false;}if(!this.mIsUniformAxis){var Bn=Bp.GetGraphMatrixContext();if(Bn.isPieOrRingShape()===false&&Bo.showDatalabels()===false){return true;}if(Bn.isPieOrRingShape()===true&&Bo.showPieDatalabels()===false){return true;}}if(this.mPrimaryMetrics){if(!!this.mNumberFormat.isDefault){this.mNumberFormat=new Bb.ChartAdvFormat();}var Bm=Bo.getValueAxisNumberFormat(this.mNumberFormat,this.mPrimaryMetrics);if(this.mIsPercent===false){return Bm;}}var Bl=this.mNumberFormat;if(this.mIsPercent){Bl.mFormatType=4;Bl.mCustomFormat="0%";return true;}return false;}function AR(Bo){var Bm,Bn,Bl;for(Bm=0;Bm<2;Bm++){Bn=(Bm===0)?this.mHighTicksToLabel:this.mLowTicksToLabel,Bl=Bn[Bo];if(Bl&&Bl.mIsShown){return Bl;}}return null;}function AV(Bq,Bn){var Bo,Bp=this.mChartContextPtr;if(Bp.mIsGraphMatrix){if(this.IsVerticalAxis()){if(Bn.y===Bp.mGraphHeight){--Bn.y;--Bq.y;}}if(Bp.isUADataAreaOutput()){var Bm=Bp.GetGraphMatrixContext().getPadding(BX.kEndTickToChart),Bl=Bp.getUniformAxisContext();if(this.IsVerticalAxis()){if(Bl.mDataAreaRightMargin>=0){if(Bq.x+Bl.mDataAreaRightMargin<=Bp.mGraphWidth){Bq.x+=Bl.mDataAreaRightMargin;}else{Bq.x=Bp.mGraphWidth;}}if(Bl.mDataAreaLeftMargin>=0){if(Bn.x>=Bl.mDataAreaLeftMargin){Bn.x-=Bl.mDataAreaLeftMargin;}}Bo=Bp.mGraphHeight;if(Math.abs(Bn.y-Bo)<Bm||Math.abs(Bn.y)<Bm){return false;}}else{if(Bl.mDataAreaBottomMargin>=0){if(Bn.y+Bl.mDataAreaBottomMargin<=Bp.mGraphHeight){Bn.y+=Bl.mDataAreaBottomMargin;}else{Bn.y=Bp.mGraphHeight;}}if(Bl.mDataAreaTopMargin>=0){if(Bq.y>=Bl.mDataAreaTopMargin){Bq.y-=Bl.mDataAreaTopMargin;}}Bo=Bp.mGraphWidth;if(Math.abs(Bn.x)<Bm||Math.abs(Bq.x-Bo)<Bm){return false;}}}}return true;}function Ac(Bu,Bv,Bw,Bo){var Bx,By,Bq,Br,Bm=[],Bn=this.mChartContextPtr,Bl=Bo?this.hasMajorTickCreated:this.hasMinorTickCreated,Bp;if(Bv>this.mMaxTick||Bv<this.mMinTick){return ;}if(Bn.mIsGraphMatrix){if(this.mAxisInfo.mAxisDirection>=h.AD_Z){return ;}if(Bn.isUADataAreaOutput()){var Bt=Bn.GetGraphMatrixContext().mShownValueTickSet[this.mAxisInfo.mAxisDirection];if(Bt[Bv]===undefined){return ;}}if(this.mIsUniformAxis){if(this.mAxisInfo.mShowAxisLabels===false){return ;}var Bs=AR.call(this,Bv);if(!Bs||!Bs.mIsShown){return ;}}}Bp=AW.call(this,Bv);Bx=Bp.LowEnd;By=Bp.HighEnd;if(!AV.call(this,By,Bx)){return ;}Bq=Bo?this.mMajorGrid.mGridStyle:this.mMinorGrid.mGridStyle;Br=Math.floor(Bo?this.mTickLength:this.mTickLength*2/3+1);this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,Bq,Br,Bx,By,Bm);this.GenerateOneLineObject(Bu,Bm,Bw);if(this.HasTwoGridLineParts(Bq)){Bm.splice(0,Bm.length);this.GetOneGridLine(this.IsVerticalAxis()?U.ALL_RIGHT:U.ALL_TOP,Bq,Br,Bx,By,Bm);this.GenerateOneLineObject(Bu,Bm,Bw);}}function s(Bm,Bo,Bl){var Bn=Bm?this.mHighTicksToLabel:this.mLowTicksToLabel;Bn[Bo]=Bl;}function Bc(Bn,Bo){var Bm,Bl=this.mpAxisLabelSet.GetCollectionSize(),Bp=Bn?this.mHighTicksToLabel:this.mLowTicksToLabel;Bp={};if(Bo<0||Bo>=Bl){return ;}for(Bm=Bo;Bm<Bl;Bm++){var Bq=this.mpAxisLabelSet.GetObjectByIndex(Bm);if(Bq){s.call(this,Bn,Bq.mNumber,Bq);}}}function Q(Bl,Bn){if(Bn<=0){return 0;}var Bs=this.mOptions,Br=this.mMaxTick,Bp=this.mMinTick,Bq=this.mMaximum,Bo=this.mMinimum,Bm;if(Bs.mUseLogarithmicScale){Bq=Bq<=0?-1:K.call(this,Bq);Bo=Bo<=0?-1:K.call(this,Bo);Br=K.call(this,Br);Bp=K.call(this,Bp);}Bm=Bl?Br-Bq:Bo-Bp;Bm=Math.abs(Bm);return Bm/(Br-Bp)*Bn;}function BG(){var Bn,Bo,Bl,Bm;if(this.mIsUniformAxis){Bn=this.mTripleId;}else{Bn=Bb.gAxisObjects[this.getIndex()].mMajorId;}if(this.hasMajorTickCreated){this.clearTickObjects(Bn,true);this.hasMajorTickCreated=false;}this.InitObjectSet(Bn,AK.GOT_MAJOR_GRID);if(this.mChartContextPtr.mIsGraphMatrix){Ac.call(this,Bn,this.mMinTick,this.mpMajorGridSet,true);Ac.call(this,Bn,this.mMaxTick,this.mpMajorGridSet,true);}else{Bo=true;Bl=this.mChartContextPtr.GetProperty(A3.DssGraphLineAlpha,new Bb.TripleId({ObjectId:A5.DssGraphFrame}));if(Bl){Bo=(Bl>0);}if(!Bo||this.mAxisInfo.mAxisDrawInReverse){Ac.call(this,Bn,this.mMinTick,this.mpMajorGridSet,true);}if(!Bo||!this.mAxisInfo.mAxisDrawInReverse){Ac.call(this,Bn,this.mMaxTick,this.mpMajorGridSet,true);}}for(Bm=0;Bm<this.mTicks.length;++Bm){Ac.call(this,Bn,this.mTicks[Bm],this.mpMajorGridSet,true);}this.hasMajorTickCreated=true;}function P(){var Bo,Bn=this.mOptions,Bl,Bq,Bp,Bm;Bo=1;if(Bn.mUseLogarithmicScale){Bo=8;}else{if(this.mMinorGrid.mUseManualGrid){Bo=Math.floor(this.mMinorGrid.mGridInterval);}}if(this.mIsUniformAxis){Bl=this.mTripleId;}else{Bl=Bb.gAxisObjects[this.getIndex()].mMinorId;}if(this.hasMinorTickCreated){this.clearTickObjects(Bl,false);this.hasMinorTickCreated=false;}this.InitObjectSet(Bl,AK.GOT_MINOR_GRID);Bq=this.mStep/(Bo+1);for(Bp=0;Bp<this.mTicks.length;++Bp){Bq=Bn.mUseLogarithmicScale?this.mTicks[Bp]:Bq;for(Bm=1;Bm<=Bo;++Bm){Ac.call(this,Bl,this.mTicks[Bp]+Bm*Bq,this.mpMinorGridSet,false);}}if(this.mTicks.length===0){Bq=Math.floor(Bn.mUseLogarithmicScale?this.mMinTick:(this.mMaxTick-this.mMinTick)/(Bo+1));for(Bm=1;Bm<=Bo;++Bm){Ac.call(this,Bl,this.mMinTick+Bm*Bq,this.mpMinorGridSet,false);}return ;}Bq=Bn.mUseLogarithmicScale?this.mMinTick:Bq;for(Bm=1;Bm<=Bo;++Bm){Ac.call(this,Bl,this.mTicks[0]-Bm*Bq,this.mpMinorGridSet,false);}this.hasMinorTickCreated=true;}function Ah(){if(this.mpAxisLabelSet===null){return ;}if(this.mCondenseLabels!==true){return ;}var Bp=this.mpAxisLabelSet.GetCollectionSize()-1,Bq,Bl=null,Bn=true,Bo,Bm,Bs,Bt=0;while(Bp>=0){Bm=this.mpAxisLabelSet.GetObjectByIndex(Bp);Bo=0;if(Bm.mIsShown){if(Bn){Bq=Bm.mText;Bl=Bm;Bn=false;Bs=Bl.GetNumberFromText();if(Bs!==null){Bo=Bs;Bt=Math.abs(Bo-Bl.mNumber);}}else{var Br=Bm.mText;if(Br===Bq){if(Bl.mIsShown){if(Bt>0){Bl.mIsShown=false;}}Bs=Bm.GetNumberFromText();if(Bs!==null){Bo=Bs;if(Math.abs(Bo-Bm.mNumber)>0){Bm.mIsShown=false;}}else{Bm.mIsShown=false;}}else{Bq=Br;Bl=Bm;Bs=Bl.GetNumberFromText();if(Bs){Bo=Bs;Bt=Math.abs(Bo-Bm.mNumber);}else{Bt=0;}}}}Bp--;}}function Bi(){var Bo=this.mChartContextPtr;if(Bo.mIsGraphMatrix&&!Bo.isUADataAreaOutput()){if(this.mAxisInfo.mAxisDirection>=h.AD_Z){return ;}var Bm=Bo.GetGraphMatrixContext(),Bl=Bm.mShownValueTickSet[this.mAxisInfo.mAxisDirection]={},Bn=function(Bp){AJ.forEach(Bp,function(Bq){if(Bq.mIsShown){Bl[Bq]=true;}});};Bn(this.mHighTicksToLabel);Bn(this.mLowTicksToLabel);}}function Av(Bm,Bo,Bn){var Bl=this.ValueToFloatPosition(Bm),Bp=Bo+0.5*Bn,Bq=this.mChartContextPtr;if(Bl>=Bp&&Bl+Bp<=Bq.mGraphWidth){return true;}return false;}function e(){var Bm=this.mChartContextPtr,Bq=Bm.GetGraphMatrixContext(),Br=this.mDeviceDataArea,Bt=this.IsVerticalAxis(),Bl,Bu=this.mpAxisLabelSet.mFormatFontPtr,Bn=Bq.getPadding(BX.kEndLabelToChart);if(Bt){Bl=Math.max(Br.height,Bm.mGraphHeight);}else{Bl=Math.max(Br.width,Bm.mGraphWidth);}if(Bl<Bu.mFontSize+2*Bn){return false;}if(Bl<Bu.GetStringHeight("H")+2*Bn){return false;}if(Br.width>=0&&Br.height>0){var Bs=[];this.GetTicks(Bs);var Bo,Bp=Bs.length;for(Bo=0;Bo<Bp;Bo++){if(Av.call(this,Bs[Bo],Bn,Bu.mFontSize)===true){return true;}}}return true;}function BN(Bn){if(this.mOptions.mUseMaxValue||Bn>this.mDeviceDataArea.height){return false;}var Bl,Bm=(this.mMaxTick-this.mMinTick)/(this.mDeviceDataArea.height-Bn)*this.mDeviceDataArea.height;for(Bl=this.mMaxTick;Bl<Bm;Bl+=this.mStep){this.mTicks.push(Bl);}this.mMaxTick=Bm;return true;}function L(Bn){var Bo=this.mChartContextPtr,Bm=0,Bl=0;if(Bo.mIsGraphMatrix){Bl=Bm=Bo.GetGraphMatrixContext().getPadding(BX.kChartToChart);if(Bn){Bl=Bm=0;}else{if(this.mMaxTick<=0){Bm=0;}if(this.mMinTick>=0){Bl=0;}}}return{LowPadding:Bl,HighPadding:Bm};}function Af(){var Bp=this.mChartContextPtr,Bm=0,Bl=Bp.GetGraphMatrixContext(),Bo=Bp.mDataset.GetGroupCount();if(Bp.mIsGraphMatrix===false){return 0;}if(Bl.isCombinationChart()){var Bn=Bp.mDataset.GetSeriesByShape();if(Bn.Circle&&Bn.Circle.length){return Bl.getPadding(BX.kExtra);}if(Bn.Square&&Bn.Square.length){return Bl.getPadding(BX.kExtra);}if(Bn.Circle&&Bn.Circle.length){return Bl.getPadding(BX.kExtra);}if((Bn.Line&&Bn.Line.length)||(Bn.Area&&Bn.Area.length)){if(Bo===1){return Bl.getPadding(BX.kExtra);}}return 0;}switch(Bp.GetGraphMatrixGraphMajorType()){case T._BUBBLE:case T._SCATTER:case T._PIE:Bm=Bl.getPadding(BX.kExtra);break;case T._LINE:case T._AREA:if(Bo===1||Bl.mMarkerShape!==f.DssGraphMarkerShapeNone){Bm=Bl.getPadding(BX.kExtra);}break;}return Bm;}function W(Bt,B8,B4,B3){var Bo=this.mChartContextPtr,Bx=0,Bp=0,By=0,B7=0,B2=0,B5=0,Bv=0,Bu=B4,Bm=B3,B0=this.mTripleId.mObjectId===A5.DssGraphY1Body||this.mTripleId.mObjectId===A5.DssGraphX1Body,Bs=this.mAxisInfo.mAxisDirection===h.AD_X,Bq=this.mOptions.mUseCustomMinMax,Bl=!Bq||(Bq&&!this.mOptions.mUseMinValue),Bn=!Bq||(Bq&&!this.mOptions.mUseMaxValue),Bz=Bo.mUniformAxisContext,B6=Bo.GetGraphMatrixContext();if(Bn){Bx=Af.call(this);B5=B6.GetValueAxisPadding(Bs,true,B0);B5=B5>0?B5+Bx:B5;Bp=Q.call(this,true,B8-B5-Bv);B7=B5-Bp;Bu=Math.max(Bu,B7);}if(Bl){Bx=Af.call(this);Bv=B6.GetValueAxisPadding(Bs,false,B0);Bv=Bv>0?Bv+Bx:Bv;By=Q.call(this,false,B8-B5-Bv);B2=Bv-By;Bm=Math.max(Bm,B2);}var Bw=0,Br=Bs?Bz.mDataAreaRightMargin:Bz.mDataAreaTopMargin,B1=Bs?Bz.mDataAreaLeftMargin:Bz.mDataAreaBottomMargin;if(!Bt){Bw=Bu;if(Br>=0&&Br<Bw){Bu=Bw-Br;}else{Bu=0;}Bw=Bm;if(B1>=0&&B1<Bw){Bm=Bw-B1;}else{Bm=0;}}return{HighPadding:Bu,LowPadding:Bm};}function G(Bo,Bn,Br,Bm){var Bl=Br,Bq=Bn,Bp=(this.mAxisInfo.mAxisDirection===h.AD_X)?Bm.width:Bm.height;if(Bl<0){Bl=0;}if(Bq<0){Bq=0;}if(Bp<=0||Bp<Bl+Bq){return ;}Bp-=Bl+Bq;this.mLowTrim=Bl;this.mHighTrim=Bq;if(!Bo){this.mIsTrimmedWithPadding=true;}if(this.mAxisInfo.mAxisDirection===h.AD_X){Bm.x+=Bl;Bm.width=Bp;}if(this.mAxisInfo.mAxisDirection===h.AD_Y){Bm.y+=Bq;Bm.height=Bp;}}function l(){if(this.mChartContextPtr.mIsGraphMatrix&&this.mOptions.mUseCustomMinMax){return z;}return 32757;}function AS(Bq,Bs){var Br=this.mChartContextPtr,Bl=0,Bo=Bq-1;if(!Br.mIsGraphMatrix){return -1;}if(this.mIsPercent&&!this.mOptions.mUseCustomMinMax){if(Bs&&this.mMaxTick===1){return Bo;}if(this.mMinTick===-1){return Bl;}}var Bn,Bp=Br.GetGraphMatrixContext().getPadding(BX.kEndLabelToChart),Bm=this.mGraphObjectList;if(Bs){while(Bo>=0){Bn=Bm[Bo];if(!Bn.mIsShown){Bo--;continue;}if(Ai.call(this,Bn,Bp)){return Bo;}Bn.mIsShown=false;Bo--;}}else{while(Bl<=Bo){Bn=Bm[Bl];if(!Bn.mIsShown){Bl++;continue;}if(Ai.call(this,Bn,Bp)){return Bl;}Bn.mIsShown=false;Bl++;}}return -1;}function A9(B6,Br,Bm,Bq,Bn){var Bz=true,B3=this.mChartContextPtr.mIsGraphMatrix,B5=B3&&this.mIsPercent,Bs=1,B1=this.mLabelSpan,Bo=this.mOptions,Bp=this.mGraphObjectList,Bw=Bp[Bq],Bt=Bw;while(Bz){Bz=false;var B2=B5?Bq-Bs:Bq+Bs,B4=B5?(B2>=Br):(B2<Bm);while(B4){var B0=Bp[B2];if(B0.HasOverlapForSameRotation(Bt,B1,Bn)){Bz=true;Bt=Bw;++Bs;break;}else{Bt=B0;}B2+=B5?-Bs:Bs;B4=B5?(B2>=Br):(B2<Bm);}}var Bx=this.mIsPercent?(Bq-Br)/Bs:(Bm-Bq)/Bs;Bx=Math.floor(Bx);if(Bx<3){return Bs;}var By,Bl,Bu=AS.call(this,Bm,false),Bv=AS.call(this,Bm,true);if(Bu===-1||Bv===-1){return Bs;}if(this.mIsPercent){if(Bu<=Bq-Bx*Bs){return Bs;}if(Bu===0&&Bo.mUseMinValue&&Bo.mShowMinLabel&&this.mMinTick!==-1){Bu++;}By=(Bq-Bu)/Bs;Bl=(Bq-By*Bs)-Bu;Bs+=Bl/By;}else{if(Bv>=Bq+Bx*Bs){return Bs;}By=(Bv-Bq)/Bs;Bl=Bv-(Bq+By*Bs);Bs+=Math.floor(Bl/By);}return Bs;}function B(Bv,Bn,Bp,Bm,Bu){var Br,Bl=this.mChartContextPtr,Bs=Bl.mIsGraphMatrix,Bw=Bl.mIsTimeSeriesChart;if(this.mOptions.mShowMaxLabel){if((!Bs&&!Bw)||(Bs&&this.mIsPercent)){var Bo=((Bn-1-Bp)%Bm);if(Bo!==0){Br=this.mGraphObjectList[Bn-1];Br.mIsShown=true;var Bq=Bn-1-Bo,Bt=this.mGraphObjectList[Bq];if(Br.HasOverlapForSameRotation(Bt,this.mLabelSpan,Bu)&&(Bq>Bv||!this.mOptions.mShowMinLabel)){Bt.mIsShown=false;}}}else{if(Bs&&this.mOptions.mUseMaxValue&&Bn-Bv>2){Br=this.mGraphObjectList[Bn-1];Br.mIsShown=false;}}}}function AE(Bn){var Bl,Bm=this.mChartContextPtr.mIsGraphMatrix;if(this.mOptions.mShowMinLabel){if(Bm){if(this.mIsPercent&&this.mMinTick===-1){Bl=this.mGraphObjectList[Bn];Bl.mIsShown=true;}else{if(this.mIsPercent&&this.mOptions.mUseMinValue){Bl=this.mGraphObjectList[Bn];Bl.mIsShown=false;}}}}}function BF(Bt,Bm,Bq,Bn,Bo,Bv,Bu){var Br=Bm,Bp=Bo?1:-1,Bl=0,Bs=Bo?(Bn?Br-Bq<=0:Br-Bq<0):(Bn?Br-Bq>=0:Br-Bq>0);while(Bs){if(Bo){Bl=Br-Bv;}else{Bl=Bv-Br;}if(Bl%Bt!==0){this.mGraphObjectList[Br].mIsShown=false;}else{if(Bu&&Bu(Br,Bt,Bm,Bq)){this.mGraphObjectList[Br].mIsShown=false;}}Br+=Bp;Bs=Bo?(Bn?Br-Bq<=0:Br-Bq<0):(Bn?Br-Bq>=0:Br-Bq>0);}}function v(Bm,Bn,Bt,Bo,Bl){var Br=Bl,Bs=function(Bw,Bv,By,Bx){return Bw===Bx;},Bu=function(Bw,Bv,By,Bx){return Bw<Bv+Bx;};if(this.mChartContextPtr.mIsGraphMatrix&&this.mIsPercent){if(this.mMinTick===-1){if(this.mMaxTick===0){BF.call(this,Br,Bn,Bo,true,true,0,Bs);}else{var Bq=(Bo-Bn)/Bl,Bp=(Bo-Bn)/Bq;BF.call(this,Bp,Bo-1,Bn,false,false,Bo,Bu);Br=Bp;}}else{BF.call(this,Br,Bo-1,Bn,true,false,Bo);}}else{BF.call(this,Br,Bo+1,Bt,false,true,Bo);}return Br;}function j(Bu,Br,Bn){if(Br>this.mMaxTick||Br<this.mMinTick){return ;}var Bs={},Bt={},Bq,Bv=false,Bl=[];Bq=AW.call(this,Br);Bs.x=Bq.LowEnd.x;Bs.y=Bq.LowEnd.y;Bt.x=Bq.HighEnd.x;Bt.y=Bq.HighEnd.y;var Bm=this.mChartContextPtr;if(Bm.mIsGraphMatrix){if(this.IsVerticalAxis()){Bv=Bs.y===Bm.mGraphHeight||Bs.y===0;}else{Bv=Bs.x===Bm.mGraphWidth||Bs.x===0;}}if(Bv){return ;}if(Bm.mIsGraphMatrix){if(this.IsVerticalAxis()){Bs.x=Math.min(Bs.x,0);Bt.x=Math.max(Bt.x,Bm.mGraphWidth);}else{Bt.y=Math.min(Bt.y,0);Bs.y=Math.max(Bs.y,Bm.mGraphHeight);}}if(this.mUseDepth){if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){Bs.swapPoints(Bt);}Bl.push(Bt.Shifted(this.mDepthOffset));}Bl.push(Bt);Bl.push(Bs);var Bo=new Bb.TripleId({ObjectId:Bn,SeriesId:0,GroupId:0}),Bp;if(this.mTripleId.mSeriesId>0){Bp=this.mpManager.GetGraphObject(Bo,false);}if(!Bp){Bp=new Bb.GraphCollectionObject({TripleId:Bo,GraphObjectManager:this,CollectionType:r.CT_LINE});this.mpManager.AddToMap(Bp);}var Bw=new Bb.PolyLineObject({TripleId:Bo,GraphObjectManager:this,PolyLine:Bl,GraphCollectionObject:Bp});Bp.AddGraphObject(Bw);Bu.push(Bw);}function AO(){this.mTicks.splice(0,this.mTicks.length);var Bl=AB.computeTicksForAxis(this);this.mMaxTick=Bl.mMaxTick;this.mMinTick=Bl.mMinTick;this.mTicks=Bl.mTicks;this.mStep=Bl.mStep;}function BR(Bp){var Bo,Bl,Bn,Bm;Bo=0;Bl=this.mTicks.length+(this.mOptions.mShowMinLabel?1:0)+(this.mOptions.mShowMaxLabel?1:0);for(Bn=0;Bn<Bl;++Bn){Bm=this.mGraphObjectList[Bn+this.mLabelStartIndex];Bm.GetBoundingRectEx(Bk);if(Bp){Bo=(Bo<Bk.width)?Bk.width:Bo;}else{Bo=(Bo<Bk.height)?Bk.height:Bo;}}return Bo;}function Aa(Br,Bp,Bt){var Bm,Bl,Bs,Bq,Bo=true,Bn=this.mLabelArea;Bm=this.mGraphObjectList[Br];if(!!Bm===false){return ;}if(this.mUseDepth){Bl=new Bb.Point2D();this.GetLabelOffset(Bp,Bl);Bs=Bl.x;Bq=Bl.y;}else{Bs=Bq=0;}if(R===null){R=new Bb.Point2D();}else{R.Reset(0,0);}if(F===null){F=new Bb.Point2D();}else{F.Reset(1,0);}switch(Bp){case U.ALL_BOTTOM:case U.ALL_BOTTOM_TOP:R.x=this.ValueToPosition(Bt)+Bs;R.y=Bn.y+Bn.height;F.x=0;F.y=1;break;case U.ALL_TOP:R.x=this.ValueToPosition(Bt)+Bs;R.y=Bn.y;F.x=0;F.y=-1;break;case U.ALL_LEFT:case U.ALL_LEFT_RIGHT:R.x=Bn.x;R.y=this.ValueToPosition(Bt)+Bq;F.x=-1;F.y=0;break;case U.ALL_RIGHT:R.x=Bn.x+Bn.width;R.y=this.ValueToPosition(Bt)+Bq;F.x=1;F.y=0;break;default:Bo=false;break;}if(Bo){this.MoveLabel(Bm,R,F);}}function Bd(){var Bq,Bt=[],Bm,Bu,Bo,Bp;this.GetTicks(Bt);if(Bt.length===0){return ;}Bm=new Bb.Rect2D({Rect2D:this.mLabelArea});if(this.mIsStagger){Bo=BR.call(this,this.IsVerticalAxis());if(this.IsVerticalAxis()){Bm.x-=Bo;Bm.width+=Bo*2;}else{Bm.x-=Bo;Bm.height+=Bo*2;}}else{var Bn,Bl,Bs=3,Bv=this.mGraphObjectList,Br=Bv.length;if(this.hasLabelCreated){Bl=this.IsVerticalAxis()?this.mLabelArea.height:this.mLabelArea.width;Bl-=this.mChartContextPtr.GetGraphMatrixContext().getPadding(BX.kEndLabelToChart)+4;Bn=Bl>Bs;if(Bn===false){for(Bq=0;Bq<Br;Bq++){Bv[Bq].mIsShown=false;}return ;}}}Bu=new Bb.Rect2D({Rect2D:this.mLabelArea});Bp=Bt.length;for(Bq=0;Bq<Bp;++Bq){this.mLabelArea=(Bq&1)===0?Bu:Bm;Aa.call(this,Bq+this.mLabelStartIndex,this.mAxisInfo.mAxisLabelsLocation,Bt[Bq]);}this.HideOverlappedLabels(this.mLabelStartIndex,this.mLabelStartIndex+Bt.length);if(this.HasLabelsOnBothSides()){for(Bq=0;Bq<Bp;++Bq){this.mLabelArea=(Bq&1)===0?Bu:Bm;Aa.call(this,Bq+Bp+this.mLabelStartIndex,this.IsVerticalAxis()?U.ALL_RIGHT:U.ALL_TOP,Bt[Bq]);}this.HideOverlappedLabels(this.mLabelStartIndex+Bp,this.mLabelStartIndex+2*Bp);}Bi.call(this);}function BL(Bm,Bs){var Bu,Bl=this.mChartContextPtr,Bq=Bl.mIsGraphMatrix,Br=Bm+(S.call(this)||Bq?1:0),Bn=false,Bv=this.mLabelList,Bp=Bv.length,Bt=Bl.GetGraphMatrixContext().getPadding(BX.kLabelToChart),Bo;for(Bo=Br;Bo<Bp;Bo++){Bu=Bv[Bo];if(Ai.call(this,Bu,Bt)){Bn=true;break;}}if(!Bq){return{Start:Br,PaddingPossible:Bn};}if(this.mIsPercent){return{Start:Bs-1,PaddingPossible:Bn};}if(Bn){return{Start:Bo,PaddingPossible:Bn};}return{Start:Br,PaddingPossible:Bn};}function Ay(){var Bs=0,Br=0,Bt,Bl=this.mChartContextPtr,Bp=Bl.GetGraphMatrixContext(),Bn=this.mOptions,Bm=this.mAxisInfo,Bq=this.mDeviceDataArea,Bo;if(this.mLabelStartIndex>=this.mGraphObjectList.length){return{LowMargin:Bs,HighMargin:Br};}if(Bn.mUseCustomMinMax){return{LowMargin:Bs,HighMargin:Br};}if(this.mUseDepth){this.ReserveDepthAxisLine(Bq,false,this.mTripleId.mObjectId!==A5.DssGraphX1Body);}O.Reset(0,0,0,0);Bt=this.mLabelList[this.mLabelStartIndex];Bt.GetBoundingRectEx(O);Bo=this.ValueToPosition(Bt.mNumber);if(Bm.mAxisDrawInReverse){Br=this.IsVerticalAxis()?O.height/2-(Bo-Bq.y):O.width/2-(Bq.x+Bq.width-Bo);Br=(Br<0)?0:Br;}else{if(Bl.mIsGraphMatrix){if(this.mIsPercent&&this.mMinTick===-1){Bs=this.IsVerticalAxis()?O.height/2-(Bq.y+Bq.height-Bo):O.width/2-(Bo-Bq.x);Bs+=Bp.getPadding(BX.kLabelToChart);}else{Bs=0;}Bs=Math.max(Bs,0);}else{Bs=this.IsVerticalAxis()?O.height/2-(Bq.y+Bq.height-Bo):O.width/2-(Bo-Bq.x);Bs=(Bs<0)?0:Bs;}}O.Reset(0,0,0,0);Bt=this.mLabelList[this.mLabelList.length-1];Bt.GetBoundingRectEx(O);Bo=this.ValueToPosition(Bt.mNumber);if(!Bm.mAxisDrawInReverse){Br=this.IsVerticalAxis()?O.height/2-(Bo-Bq.y):O.width/2-(Bq.x+Bq.width-Bo);if(Bl.mIsGraphMatrix){if(this.mIsPercent&&this.mMaxTick===1){Br+=Bp.getPadding(BX.kLabelToChart);}else{Br=0;}}Br=(Br<0)?0:Br;}else{Bs=this.IsVerticalAxis()?O.height/2-(Bq.y+Bq.height-Bo):O.width/2-(Bo-Bq.x);Bs=(Bs<0)?0:Bs;}if(!this.mUseDepth){return{LowMargin:Bs,HighMargin:Br};}var Bu=this.getDepthMargin(0,0);Bs=(Bs<Bu.lowMargin)?0:Bs-Bu.lowMargin;Br=(Br<Bu.highMargin)?0:Br-Bu.highMargin;return{LowMargin:Bs,HighMargin:Br};}function Ai(Bm,Bo){var Bn=this.mChartContextPtr,Bl=Bm.GetBoundingRect(true);if(this.IsVerticalAxis()){return(Bl.y>=Bo&&Bl.y+Bl.height+Bo<=Bn.mGraphHeight);}return(Bl.x>=Bo&&Bl.x+Bl.width+Bo<=Bn.mGraphWidth);}function d(Bo){var Bn=this.mChartContextPtr;if(Bo.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Bo.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Bo.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<AF){var Bm=Bn.mIsGraphMatrix;if(this.mMinimum<-AF||this.mMinimum>AF){var Bl=Math.abs(this.mMinimum)*0.5;if(Bm===false){this.mMaximum=this.mMaximum+Bl;this.mMinimum=this.mMinimum-Bl;}else{if(this.mMaximum>0){this.mMinimum=0;}else{this.mMaximum=0;}}}else{if(Bm===false||Bm&&this.mMinimum!==this.mMaximum){this.mMinimum=-6;this.mMaximum=6;}}}}mstrmojo.chart.ValueAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.ValueAxis",mLargerGridInterval:false,mIsPercent:false,mMinimum:-1,mMaximum:-1,mMaxTick:-1,mMinTick:-1,mStep:-1,mLabelStartIndex:0,mTicks:null,mLabelSpan:0,mIsStagger:false,mNumberFormat:null,mLabelArea:null,mGraphMajorType:b.GMT_CATEGORY,mLabelObjectId:null,mIsMaxZoom:false,mPrimaryMetrics:-1,mHighTicksToLabel:null,mLowTicksToLabel:null,mIsTrimmedWithPadding:false,mCondenseLabels:null,init:function Be(Bq){Bq.AxisLabelsLocation=U.ALL_LEFT;this._super(Bq);this.mOptions={mUseLogarithmicScale:false,mAlwaysIncludeZero:true,mDrawFromZero:true,mUseMinValue:false,mUseMaxValue:false,mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mDrawSecondCustomLine:false,mUseSmartScaleBreak:false,mOffScaleType:Ap.DssGraphOffScaleHide,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mAxisSecondCustomValue:0,mUseCustomMinMax:false};var Bu,Bm=this.mChartContextPtr,Bs=this.mTripleId.mObjectId;this.mTicks=[];this.mHighTicksToLabel={};this.mLowTicksToLabel={};this.mLargerGridInterval=Bq.LargerGridInterval;this.mIsPercent=Bq.IsPercent;this.mMinimum=Math.min(Bq.Max,Bq.Min);this.mMaximum=Math.max(Bq.Max,Bq.Min);this.mLabelStartIndex=0;this.mIsStagger=false;this.mLabelObjectId=null;this.mIsMaxZoom=false;if(Bq.IsShown!==null){this.mIsShown=Bq.IsShown;}if(Bm.mIsTimeSeriesChart){this.mIsShown=true;}if(Bm.mIsUniformAxisMode){this.mIsShown=!Bm.isUADataAreaOutput();}if(this.mIsUniformAxis||Bm.mIsGraphMatrix===false){this.mNumberFormat=new Bb.ChartAdvFormat({});}else{this.mNumberFormat=Bb.dNF;}if(Bq.PrimaryMetricIndex!==null){this.mPrimaryMetrics=Bq.PrimaryMetricIndex;}else{this.mPrimaryMetrics=[];}if(this.mDeviceDataArea===null){this.mDeviceDataArea=new Bb.Rect2D();this.mDeviceDataArea.width=this.mDeviceDataArea.height=-1;}this.mGraphMajorType=Bm.GetGraphMajorType();if(this.mIsUniformAxis===false){if(this.mGraphMajorType===b.GMT_HISTOGRAM){this.mIsShown=this.mIsShown||(this.mTripleId.mObjectId===A5.DssGraphY1Body);if(this.mTripleId.mObjectId===A5.DssGraphX1Body){this.mMaximum+=(this.mMinimum===this.mMaximum)?10:(this.mMaximum-this.mMinimum)*0.01;}}}var Bn=this.mAxisInfo,Bo=this.mOptions,Bp=Bm.GetGraphMatrixContext(),Bt=Bp.AxisLayout;if(Bq.AxisDirection===h.AD_Y){if(Bs!==A5.DssGraphY1Body){Bn.mAxisLabelsLocation=U.ALL_RIGHT;}else{if(Bm.IsBubbleChart()||Bm.IsScatterChart()){var Br=4;if(Bt&Br){Bn.mAxisLabelsLocation=U.ALL_RIGHT;}}}}else{if(Bq.AxisDirection===h.AD_X){if(Bs===A5.DssGraphY1Body||Bs===A5.DssGraphX1Body){Bn.mAxisLabelsLocation=U.ALL_BOTTOM;if(Bm.IsBubbleChart()||Bm.IsScatterChart()){var Bl=8;if(Bt&Bl){Bn.mAxisLabelsLocation=U.ALL_TOP;}}}else{Bn.mAxisLabelsLocation=U.ALL_TOP;}}}this.hLoadProperties();d.call(this,Bo);AO.call(this);if(Bo.mUseLogarithmicScale&&Bm.IsStackedChart()){this.mMaximum=Bo.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Bo.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var Bv=AB.computeTicksForLogScale(this);this.mMaxTick=Bv.mMaxTick;this.mMinTick=Bv.mMinTick;this.mTicks=Bv.mTicks;this.mStep=Bv.mStep;}Aw.call(this);},IsBaseAtZero:function Bg(){var Bl=this.mOptions;return Bl.mDrawFromZero&&!Bl.mUseLogarithmicScale;},hLoadProperties:function A7(){var Bm=this.mChartContextPtr,Bw=Bm.mIsGraphMatrix,Bs=Bm.GetGraphMatrixContext(),Bp=this.mOptions,Bu,Bx;AN.tripleId.reset(u,this.mTripleId.mObjectId);if(Bw){var Br=Bm.hasBarAreaInComb()||Bm.IsBarChart()||Bm.IsAreaChart()||Bm.IsPercentChart()||(Bm.IsStackedChart()&&this.mMaximum*this.mMinimum<0);Bp.mDrawFromZero=Br;Bp.mAlwaysIncludeZero=Br;if(Bs.isCombinationChart()){var Bt=Ad.call(this);Bp.mAlwaysIncludeZero=Bp.mAlwaysIncludeZero||Bt.Include;Bp.mDrawFromZero=Bp.mDrawFromZero||Bt.DrawFromZero;}if(this.mLabelSpan===0){this.mLabelSpan=Bs.getPadding(BX.kBetweenLabels);}var By=Bm.getUniformAxisInformation(this.mTripleId.mObjectId);if(By.CustomScale){Bp.mUseCustomMinMax=By.CustomScale;Bp.mUseMaxValue=!By.AutoMax;Bp.mUseMinValue=!By.AutoMin;Bp.mAxisMaxValue=By.Max;Bp.mAxisMinValue=By.Min;}var Bo=this.mDatasetPtr||Bm.mDataset,Bl=Bm.getAxisKeyFromObjectId(this.mTripleId.mObjectId);if(Bl==="Z"){return ;}var Bn=Bo.getAxisOriginFormat(Bl);Bp.mDrawCustomLine=Bn.show||false;Bp.mAxisCustomValue=Bn.number||0;Bp.mUseLogarithmicScale=Bo.isLogScaleAxis(Bl);if(Bp.mUseLogarithmicScale){Bp.mAlwaysIncludeZero=false;Bp.mDrawFromZero=false;}}else{Bu=Bm.GetProperty(A3.DssGraph2ExcludeZero,u);if(Bu){Bp.mAlwaysIncludeZero=Bu!==false;}if(Bm.mIsTimeSeriesChart){Bp.mShowMinLabel=false;}else{Bu=Bm.GetProperty(A3.DssGraph2ScaleEndMin,u);if(Bu){Bp.mShowMinLabel=Bu!==false;}}Bu=Bm.GetProperty(A3.DssGraph2ScaleEndMax,u);if(Bu){Bp.mShowMaxLabel=Bu!==false;}if(Bm.mImageUsage===0){Bu=Bm.GetProperty(A3.DssGraph2LogScale,u);if(!this.mIsPercent&&Bu){Bp.mUseLogarithmicScale=Bu!==false;}Bu=Bm.GetProperty(A3.DssGraph2ScaleUseMin,u);if(Bu){Bp.mUseMinValue=Bu!==false;}Bu=Bm.GetProperty(A3.DssGraph2ScaleUseMax,u);if(Bu){Bp.mUseMaxValue=Bu!==false;}Bu=Bm.GetProperty(A4.DssGraphOffScaleType,u);if(Bu){Bp.mOffScaleType=Bu;}Bu=Bm.GetProperty(A3.DssGraph2ScaleMin,u);if(Bp.mUseMinValue&&Bu){Bp.mAxisMinValue=Bu;}Bu=Bm.GetProperty(A3.DssGraph2ScaleMax,u);if(Bp.mUseMaxValue&&Bu){Bp.mAxisMaxValue=Bu;}if(Bp.mUseMinValue&&Bp.mUseMaxValue){if(Bp.mAxisMinValue>Bp.mAxisMaxValue){Bx=Bp.mAxisMinValue;Bp.mAxisMinValue=Bp.mAxisMaxValue;Bp.mAxisMaxValue=Bx;}else{if(Bp.mAxisMinValue===Bp.mAxisMaxValue){Bx=Bp.mAxisMinValue===0?10:Math.abs(Bp.mAxisMinValue);Bp.mAxisMaxValue=Bp.mAxisMaxValue+Bx*0.5;Bp.mAxisMinValue=Bp.mAxisMinValue-Bx*0.5;}}}}}var Bv=false;if(Bw){Bv=t.call(this);}if(!Bv){Bu=Bm.GetProperty(A3.DssGraphAxisNumberFormat,u);if(Bu){Bm.ParseValueToFormat(Bu,this.mNumberFormat);}}if(this.mGraphMajorType===b.GMT_BUBBLE&&this.mTripleId.mObjectId===A5.DssGraphZBody){return ;}if(Bm.mIsGraphMatrix){var Bq=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=o.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){Bu=Bm.GetProperty(A3.DssGraphStyleMajor,Bq);if(this.mMajorGrid.mShowGridLines&&Bu){this.mMajorGrid.mGridStyle=Bu;}}return ;}if(Bm.mImageUsage===0&&!Bm.mIsGraphMatrix){Bu=Bm.GetProperty(A3.DssGraph2ScaleDirection,u);if(Bu){this.mAxisInfo.mAxisDrawInReverse=Bu!==false;}if(this.mGraphMajorType===b.GMT_GAUGE){return ;}Bu=Bm.GetProperty(A3.DssGraphAxisShowUserLine,u);if(Bu){Bp.mDrawCustomLine=Bu!==false;}Bu=Bm.GetProperty(A4.DssGraphAxisShowSecondUserLine,u);if(Bu){Bp.mDrawSecondCustomLine=Bu!==false;}Bu=Bm.GetProperty(A3.DssGraphManualMajor,u);if(Bu){this.mMajorGrid.mUseManualGrid=Bu!==false;}Bu=Bm.GetProperty(A3.DssGraphCountMajor,u);if(this.mMajorGrid.mUseManualGrid&&Bu){this.mMajorGrid.mGridInterval=Bu;}if(Ax.call(this)){Bu=Bm.GetProperty(A3.DssGraphAxisStagger,u);if(Bu){this.mIsStagger=Bu!==false;}return ;}Bu=Bm.GetProperty(A3.DssGraphAxisUserLineValue,u);if(Bp.mDrawCustomLine&&Bu){Bp.mAxisCustomValue=Bu;}Bu=Bm.GetProperty(A4.DssGraphAxisSecondUserLineValue,u);if(Bp.mDrawSecondCustomLine&&Bu){Bp.mAxisSecondCustomValue=Bu;}}},GetStep:function Z(){return this.mStep;},IsLogarithmic:function AX(){return this.mOptions.mUseLogarithmicScale;},ReserveTitleAndLabels:function Ag(Br,Bp,Bn){var Bl,Bq,Bm;if(!this.mIsShown||!this.mChartContextPtr.mIsValueAxisShown){return ;}if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(Br);this.mLabelStartIndex=1;}else{this.mLabelStartIndex=0;}if(this.mAxisInfo.mShowAxisLabels){this.mDeviceDataArea.ResetRect(Br);if(this.mLabelObjectId===null){this.mLabelObjectId=Bb.gAxisObjects[this.getIndex()].mLabelId;}if(J.call(this)){this.fakeMaxLabelLength=this.maxLabelLength;this.maxLabelLength=-1;this.restoreLabels(true);AH.call(this);}else{this.restoreLabels(true);this.InitObjectSet(this.mLabelObjectId,AK.GOT_AXIS_LABEL);}if(e.call(this)===false){return ;}this.GenerateTickLabels();if(Bp<1000){if(this.mUseDepth&&this.mTripleId.mObjectId===A5.DssGraphX1Body){var Bo=this.TrimMarginsForDepthAxis(Bp,Bn);Bp=Bo.LowMargin;Bn=Bo.HighMargin;}Bm=Ay.call(this);Bl=Bm.LowMargin;Bq=Bm.HighMargin;Bl=Bl>Bp+this.mLowTrim?Bl-Bp-this.mLowTrim:0;Bq=Bq>Bn+this.mHighTrim?Bq-Bn-this.mHighTrim:0;if(this.IsVerticalAxis()){Br.y+=Bq;Br.height-=Bq+Bl;}else{Br.x+=Bl;Br.width-=Bl+Bq;}if(this.mIsUniformAxis){if(Bl>0){this.mLowTrim+=Bl;}if(Bq>0){this.mHighTrim+=Bq;}}}this.hReserveLabelOrTickArea(Br,true,false);}},CreateAxisLine:function BO(){if(this.mChartContextPtr.mIsValueAxisShown){}else{return ;}if(!this.mIsShown&&!this.mUseDepth){return ;}if(g.call(this)){this._super();}},GenerateTickLabels:function Aj(){if(this.hasLabelCreated){return ;}this.mLabelList.splice(0,this.mLabelList.length);var Bn=this.mChartContextPtr.mIsGraphMatrix;Bj.call(this);if(Bn){Bc.call(this,true,0);}var Bm,Bl=this.mpAxisLabelSet.GetCollectionSize();if(this.mAxisInfo.mAxisLabelsLocation===U.ALL_LEFT_RIGHT||this.mAxisInfo.mAxisLabelsLocation===U.ALL_BOTTOM_TOP){Bj.call(this);if(Bn){Bc.call(this,false,Bl);}}Bl=this.mpAxisLabelSet.GetCollectionSize();for(Bm=0;Bm<Bl;Bm++){this.mLabelList.push(this.mpAxisLabelSet.GetObjectByIndex(Bm));}this.hasLabelCreated=true;},GetTicks:function A2(Bm){if(this.mOptions.mShowMinLabel){Bm.push(this.mMinTick);}var Bl;for(Bl=0;Bl<this.mTicks.length;++Bl){Bm.push(this.mTicks[Bl]);}if(this.mOptions.mShowMaxLabel){Bm.push(this.mMaxTick);}},hReserveLabelOrTickArea:function AY(Bq,Br,Bm,Bs){var Bl=this.mAxisInfo.mAxisLabelsLocation,Bo,Bn;if(Br){Bn=Bs!==undefined?Bs:BR.call(this,this.IsVerticalAxis());var Bp=this.mChartContextPtr.mpGraphMatrixContext.getPadding(BX.kLabelToChart);Bo=(Bn*(this.mIsStagger?2:1)+Bb.Axis.gLabelMargin)+Bp;}else{Bo=this.GetOuterTickLength();}if(Bm){Bo=-Bo;}if(this.IsVerticalAxis()){if(Bl===U.ALL_LEFT||Bl===U.ALL_LEFT_RIGHT){Bq.x+=Bo;Bq.width-=Bo;}if(Bl===U.ALL_RIGHT||Bl===U.ALL_LEFT_RIGHT){Bq.width-=Bo;}}else{if(Bl===U.ALL_BOTTOM||Bl===U.ALL_BOTTOM_TOP){Bq.height-=Bo;}if(Bl===U.ALL_TOP||Bl===U.ALL_BOTTOM_TOP){Bq.y+=Bo;Bq.height-=Bo;}}},ValueToPosition:function k(Bm,Bl){if(Bl===undefined){if(this.mOptions.mOffScaleType!==Ap.DssGraphOffScaleHide){Bl=false;}else{Bl=true;}}if(Bl){Bm=(Bm>this.mMaxTick)?this.mMaxTick:Bm;Bm=(Bm<this.mMinTick)?this.mMinTick:Bm;}return Math.floor(this.ValueToFloatPosition(Bm)+0.5);},ValueToPosition2:function AQ(Bq,Bn,Bp){var Bm=this.mMinTick;var Bl=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bq=Bq<=0?-1:K.call(this,Bq);Bm=K.call(this,Bm);Bl=K.call(this,Bl);}var Bo=this.mAxisInfo.mAxisDrawInReverse?(Bl-Bq):(Bq-Bm);return Bn+((Bp-Bn)*Bo/(Bl-Bm));},ValueToFloatPosition:function Au(Bt){var Bu=0,Bq=this.mMinTick,Bn=this.mMaxTick,Bp=this.mOptions,Bs=this.mDeviceDataArea,Bo=this.mAxisInfo,Br;if(Bp.mUseLogarithmicScale){Bt=Bt<=0?-1:K.call(this,Bt);Bq=K.call(this,Bq);Bn=K.call(this,Bn);}Br=Bo.mAxisDrawInReverse?(Bt-Bq):(Bn-Bt);if(Bn===Bq){return Bu;}if(Bo.mAxisDirection===h.AD_Y){Bu=Bs.y+Br/(Bn-Bq)*Bs.height;}else{Bu=Bs.x+Bs.width-Br/(Bn-Bq)*Bs.width;}var Bl=l.call(this),Bm=-Bl;if(Bu>Bl){Bu=Bl;this.mIsMaxZoom=true;}else{if(Bu<Bm){Bu=Bm;this.mIsMaxZoom=true;}}return Bu;},ValueToPositionCheckLogScale:function n(Bq,Bn,Bp){var Bo,Bm,Bl;Bo=this.mMinTick;Bm=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bq=Bq<=0?-1:K.call(this,Bq);Bo=K.call(this,Bo);Bm=K.call(this,Bm);}Bl=this.mAxisInfo.mAxisDrawInReverse?(Bm-Bq):(Bq-Bo);return Bn+((Bp-Bn)*Bl/(Bm-Bo));},ValueToPositionCheckValue:function BU(Bs,Bp,Br){var Bq,Bm,Bo,Bl,Bn;Bq=0;Bm=0;Bo=AA.call(this,Bs,Bq,Bm);Bs=Bo.Value;Bq=Bo.Min;Bm=Bo.Max;if(!Bo.Flag){return{Flag:false};}Bl=this.mAxisInfo.mAxisDrawInReverse?(Bm-Bs):(Bs-Bq);Bn=Bp+Math.floor((Br-Bp)*Bl/(Bm-Bq));return{Flag:true,Position:Bn};},GetValueForUnit:function Bf(){var Bo=this.mAxisInfo,Bm,Br=this.mDeviceDataArea,Bq=(this.mMinTick+this.mMaxTick)/2,Bp=0,Bl=0,Bn=AA.call(this,Bq,Bp,Bl);Bp=Bn.Min;Bl=Bn.Max;if(!this.mOptions.mUseLogarithmicScale&&Bn.Flag){if(Bo.mAxisDirection===h.AD_Y){Bm=(Bl-Bp)/Br.height;}else{Bm=(Bl-Bp)/Br.width;}}return Bm;},GetOuterTickLength:function BB(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength/2;}return 0;},AdjustDeviceDataArea:function Ab(Bm,Bl){if(this.mIsShown&&this.mAxisInfo.mShowAxisLabels){this.hReserveLabelOrTickArea(Bm,false,Bl);}if(this.mIsShown||this.mUseDepth){this.ReserveDepthAxisLine(Bm,Bl);}},UpdateTitleAndLabelArea:function AP(Bm){var Bn=this.mChartContextPtr,Bl=this.mAxisInfo;if(!this.mIsShown||!Bn.mIsValueAxisShown){return ;}if(this.mLabelArea===null||this.mLabelArea===undefined){this.mLabelArea=new Bb.Rect2D({Rect2D:Bm});}else{this.mLabelArea.ResetRect(Bm);}if(Bl.mShowAxisLabels&&X.call(this)){Bd.call(this);this.hReserveLabelOrTickArea(Bm,true,true);}if(Bl.mShowAxisTitle){this.UpdateTitleLocation(Bm);this.ReserveTitle(Bm,true);}},HideCustomPercentOverlappedLabels:function BQ(){BT.visPrint("To be impl with percetn in custom scale");},HideOverlappedLabels:function Am(Bs,Bn){var Bw,Bt,Bo,B6,Bp=this.mChartContextPtr,B4=Bp.mIsGraphMatrix,Bm=this.IsVerticalAxis()?p.REC_EXP_VERTICAL:p.REC_EXP_HORIZONTAL;if(Bn-Bs<2){return ;}var B7=this.mIsPercent&&B4,B8=BL.call(this,Bs,Bn),Br=B8.Start,B0=this.mLabelList,Bq=this.mGraphObjectList,B2=B8.PaddingPossible;Bw=Bq[Br];Bt=Bw;if(B2===false){var B3,B5=B0.length;for(B3=0;B3<B5;B3++){if(B0[B3]){B0[B3].mIsShown=false;}}return ;}if(S.call(this)||(!this.mIsPercent&&B4)){Bt=Bq[Bs];var By=B4?Bt:Bw;if(Bt.HasOverlapForSameRotation(Bw,this.mLabelSpan,Bm)){By.mIsShown=false;}}var Bu,Bv=this.mOptions,Bz=this.mGraphMajorType,B1=this.mTripleId.mObjectId,Bl=Bn;if(Bl-Bs>2&&!B7){if(Bv.mUseMaxValue&&Bv.mShowMaxLabel){Bl--;}}Bu=A9.call(this,B7,Bs,Bl,Br,Bm);Bu=v.call(this,B7,Bs,Bl,Br,Bu);B.call(this,Bs,Bn,Br,Bu,Bm);AE.call(this,Bs);if(Bw.mIsShown){var Bx=Bp.GetGraphMatrixContext().getPadding(BX.kEndLabelToChart);Bw.mIsShown=Ai.call(this,Bw,Bx);}if((Bz===b.GMT_POLAR&&B1===A5.DssGraphX1Body)||(Bz===b.GMT_RADAR&&B1===A5.DssGraphO1Body)){Bo=((Bn-1-Br)%Bu);B6=Bq[Bn-1-Bo];if(B6.HasOverlapForSameRotation(Bt)){B6.mIsShown=false;}}if(B2){AS.call(this,Bn,true);AS.call(this,Bn,false);}this.mLabelInterval=Bu;},ValueToBubbleSize:function D(Bl,Br){var Bp,Bt,Bo,Bq,Bs,Bn,Bm=this.mChartContextPtr;Br=(Br>this.mMaxTick)?this.mMaxTick:Br;Br=(Br<this.mMinTick)?this.mMinTick:Br;Bp=this.mMinTick;Bt=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Br=Br<=0?-1:(K.call(this,Br));Bp=K.call(this,Bp);Bt=K.call(this,Bt);}Bo=Math.min(Bm.mGraphHeight,Bm.mGraphWidth)*Bl;Bq=Bo/5000;Bs=Bo/1000;Bn=Bq+((Br-Bp)*(Bs-Bq)/(Bt-Bp));return Math.ceil(Bn);},GetBottomPosition:function AT(Bl){if(this.mChartContextPtr.mIsGraphMatrix){Bl=Bl||false;if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(this.GetBaseValue(Bl),false);}}return this.ValueToPosition(this.mMinTick);},GetAxisOriginValue:function Ak(){var Bl=this.mOptions;if(Bl.mDrawCustomLine){return Bl.mAxisCustomValue;}return null;},GetBasePosition:function As(Bm,Bl){Bm=Bm||false;if(Bl===null||Bl===undefined){Bl=this.GetBaseValue(Bm);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(Bl,false);}}return this.ValueToPosition(Bl);},GetMinTick:function Ao(){return this.mMinTick;},GetMaxTick:function BC(){return this.mMaxTick;},GetBaseValue:function Ar(Bm){Bm=Bm||false;var Bn=this.mChartContextPtr,Bl=this.mOptions;if(Bn.mIsGraphMatrix){if(Bm&&Bl.mDrawCustomLine){if(AN.isValidNumber(Bl.mAxisCustomValue)){return Bl.mAxisCustomValue;}}if(Bl.mUseCustomMinMax&&Bl.mDrawFromZero){return 0;}}if(this.mMaxTick<0){return this.mMaxTick;}if(!Bl.mDrawFromZero||this.mMinTick>0||this.mMaxTick<0){return this.mMinTick;}return 0;},GetPositionByValue:function Al(Bm){var Bl=this.GetFloatPositionByValue(Bm);if(Bl===null){return Bl;}Bl=Math.floor(Bl+0.5);return Bl;},GetFloatPositionByValue:function BK(Bs){var Bm=0,Br=0,Bo,Bt,Bq;Bq=AA.call(this,Bs,Bm,Br);Bs=Bq.Value;Bm=Bq.Min;Br=Bq.Max;if(!Bq.Flag){return null;}var Bn=this.mAxisInfo,Bp=this.mDeviceDataArea;Bo=Bn.mAxisDrawInReverse?(Bs-Bm):(Br-Bs);Bt=0;if(Br===Bm){return Bt;}if(Bn.mAxisDirection===h.AD_Y){Bt=Bp.y+Bo*Bp.height/(Br-Bm);}else{Bt=Bp.x+Bp.width-Bo*Bp.width/(Br-Bm);}var Bl=l.call(this);if(Bt>Bl){Bt=Bl;this.mIsMaxZoom=true;}if(Bt<-Bl){Bt=-Bl;this.mIsMaxZoom=true;}return Bt;},GenerateCustomLine:function c(Bl,Bo){var Bq=this.mOptions,Bn=this.mDeviceDataArea;if(this.mChartContextPtr.mIsGraphMatrix){if(this.mPrimaryMetrics.length===0){return ;}}if(!Bq.mDrawCustomLine&&!Bq.mDrawSecondCustomLine){return ;}var Bm,Bp;if(this.mChartContextPtr.mIsGraphMatrix){Bp=Bb.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bm=Bn;}else{Bp=Bb.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bm=new Bb.Rect2D({Rect2D:this.mDeviceDataArea});Bn.ResetRect(Bl);}if(Bq.mDrawCustomLine){j.call(this,Bo,Bq.mAxisCustomValue,Bp);}if(this.mTripleId.mObjectId===A5.DssGraphY1Body&&Bq.mDrawSecondCustomLine){j.call(this,Bo,Bq.mAxisSecondCustomValue,A5.DssGraphY1SecondUserLine);}Bn.ResetRect(Bm);},GenerateMapAndList:function A1(){},generateGridsByArea:function AM(Bn){if(!this.mIsShown){return ;}var Bm=this.mMajorGrid,Bl=this.mMinorGrid;if(Bn){if(Bm.mShowGridLines&&Bm.mGridStyle!==o.DssGraphGridNone){BG.call(this);}if(Bl.mShowGridLines&&Bl.mGridStyle!==o.DssGraphGridNone){P.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){C.call(this);}}},GetNumberFormat:function A(){return this.mNumberFormat;},GetTrimWithPadding:function An(){return this.mIsTrimmedWithPadding;},GetPositionAtTick:function BZ(Bl){var Bm=this.GetFloatPositionByValue(Bl);if(Bm!==null){return Bm;}return 0;},GetMaxMinDataInput:function BJ(){return{Max:this.mMaximum,Min:this.mMinimum};},GetMaxMinDataInputPosition:function M(){var Bl=this.GetPositionByValue(this.mMinimum),Bm=this.GetPositionByValue(this.mMaximum);return{LowBoundary:Bl,HighBoundary:Bm};},postProcessStep:function q(Bl,Bn){var Bm=Bl,Br=this.mChartContextPtr;switch(this.mGraphMajorType){case b.GMT_HISTOGRAM:case b.GMT_POLAR:case b.GMT_SCATTER:case b.GMT_BUBBLE:case b.GMT_3D_SCATTER:case b.GMT_GANTT:break;case b.GMT_GAUGE:break;case b.GMT_CATEGORY:if(!this.IsVerticalAxis()&&!Br.mIsGraphMatrix){this.mLargerGridInterval=true;}break;default:if(!this.IsVerticalAxis()&&!Br.mIsGraphMatrix){this.mLargerGridInterval=true;}break;}if(this.mLargerGridInterval){if(Bn<Bm*7){Bm*=2;}else{Bm*=4;}}if(Br.mIsGraphMatrix){var Bp=this.mChartContextPtr.GetGraphMatrixContext().GetValueAxisZoomScale(this.mTripleId.mObjectId);if(Bp>1){Bm/=Bp;}if(Math.abs(this.mMaximum)<0.3&&Math.abs(this.mMinimum)<0.3){var Bq=Math.ceil(this.mMaximum/Bm)*Bm,Bo=Math.floor(this.mMinimum/Bm)*Bm;if(Bq<Bo+Bm){Bm/=2;}}}return Bm;},GetLogicalCoord:function x(Bo){var Bm=0,Bq=this.mDeviceDataArea,Bn=this.mMinTick,Bl=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bn=K.call(this,Bn);Bl=K.call(this,Bl);}var Bp=this.IsVerticalAxis()?(Bl-Bn)*(Bo-Bq.y)/Bq.height:(Bl-Bn)*(Bq.x+Bq.width-Bo)/Bq.width;Bm=this.mAxisInfo.mAxisDrawInReverse?Bn+Bp:Bl-Bp;if(this.mOptions.mUseLogarithmicScale){Bm=Math.pow(10,Bm);}return Bm;},GetSlopeFactor:function BM(Bm){var Bl=this.IsVerticalAxis()?-this.mDeviceDataArea.height:this.mDeviceDataArea.width;if(this.mOptions.mUseLogarithmicScale){Bl/=((Math.log(this.mMaxTick)-Math.log(this.mMinTick))*Bm);}else{Bl/=(this.mMaxTick-this.mMinTick);}return this.mAxisInfo.mAxisDrawInReverse?-Bl:Bl;},GetMinMaxLogicalCoord:function A6(){return{Min:this.mMinTick,Max:this.mMaxTick};},GenerateLabelsFor3D:function BD(){},GetGridLinePositionsFor3D:function H(){},OnZooming:function N(){},getStatus:function Y(){var Bn=0,Bo=2,Bm=this.getLabelRotation(),Bl=this.mLabelInterval;if(Bm===BI.Rotate90){return Bo;}if(Bl===1){return Bn;}return Bo;},getCondenseStatus:function i(){return this.mCondenseLabels;},checkCondense:function I(Bl){this.mCondenseLabels=Bl;return this.mCondenseLabels;},isBaseLineQualified:function AL(Bl){Bl=Bl||0;return this.mMaxTick>Bl&&this.mMinTick<Bl;},liftedFromZero:function AC(){return this.mMinTick===0&&this.mLowTrim>0;},getBandings:function At(){var Bn=0,Bl,Bm=this.mChartContextPtr;if(this.IsVerticalAxis()){Bl=Bm.mGraphHeight;}else{Bl=Bm.mGraphWidth;}return[{Start:Bn,Size:Bl}];},formatAsLabel:function Ae(Bm){var Bn=Bb.gAxisObjects[this.getIndex()].mLabelId,Bl=new Bb.NumberObject({TripleId:Bn,GraphObjectManager:this,Number:Bm,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});return Bl.mText;},getGridLinePosition:function BA(Bt){if(!!(this.mIntegrity&4)===false){return[];}if(Bt===undefined){Bt=true;}var Bm,Bq,Bw=[];var B0=this.mLabelList,Bu=B0.length;var Bp=10,Bn=this.mChartContextPtr,Br=Bn.mGraphWidth,Bo=Bn.mGraphHeight,Bz=this.IsVerticalAxis();for(Bq=0;Bq<Bu;Bq++){if(B0[Bq].mIsShown){Bm=this.ValueToPosition(B0[Bq].mNumber);if(Bm<Bp||Bm+Bp>(Bz?Bo:Br)){continue;}Bw.push(Bm);}}if(Bt){return Bw;}var Bx,By,Bl=[];Bu=Bw.length;if(Bu===0){return Bl;}else{var Bv,Bs;for(Bq=1;Bq<Bu;Bq++){Bm=0.5*(Bw[Bq-1]+Bw[Bq]);if(Bq===1){Bv=Math.abs(Bm-Bw[Bq-1]);}else{if(Bq===Bu-1){Bs=Math.abs(Bm-Bw[Bq-1]);}}Bl.push(Bm);}By=!Bz?Bu-1:0;Bx=Bw[By];Bm=BP.call(this,Bx,false,Bv);if(Bm!==null){Bl.push(Bm);}By=Bz?Bu-1:0;Bx=Bw[By];Bm=BP.call(this,Bx,true,Bs);if(Bm!==null){Bl.push(Bm);}}return Bl;},TrimDeviceDataArea:function BH(Bm){var Bn=this.mChartContextPtr,Bl;Bl=Bn.getUniformAxisInformation(this.mTripleId.mObjectId);if(Bl.PerCell){return this.TrimAxisPadding(Bm,false);}this.mLowTrim=Bl.Trims[0];this.mHighTrim=Bl.Trims[1];G.call(this,false,this.mHighTrim,this.mLowTrim,Bm);},refresh:function AG(Bm,Bo){if(Bm==="clipping"){var Bq=this.mChartContextPtr,Bp=this.mOptions;if(this.mMaximum!==Bo.max||this.mMinimum!==Bo.min){this.mMaximum=Bo.max;this.mMinimum=Bo.min;Bp.mAxisMaxValue=Bo.max;Bp.mAxisMinValue=Bo.min;d.call(this,this.mOptions);this.mTicks=[];this.mMaxTick=this.mMinTick=-1;this.mStep=-1;AO.call(this);if(Bp.mUseLogarithmicScale&&Bq.IsStackedChart()){this.mMaximum=Bp.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Bp.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var Bl=AB.computeTicksForLogScale(this);this.mMaxTick=Bl.mMaxTick;this.mMinTick=Bl.mMinTick;this.mTicks=Bl.mTicks;this.mStep=Bl.mStep;}Aw.call(this);}var Bn={x:0,y:0,width:Bq.mGraphWidth,height:Bq.mGraphHeight};this.TrimAxisPadding(Bn,false);}},TrimAxisPadding:function m(Bp,Bo){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Bn,Bl,Bm,Bq,Br=this.mOptions.mUseCustomMinMax;this.mLowTrim=this.mHighTrim=0;Bn=L.call(this,Br);Bl=Bn.LowPadding;Bm=Bn.HighPadding;Bq=this.mAxisInfo.mAxisDirection===h.AD_X?Bp.width:Bp.height;Bq-=(Bm+Bl);Bn=W.call(this,Bo,Bq,Bm,Bl);Bl=Bn.LowPadding;Bm=Bn.HighPadding;G.call(this,Bo,Bm,Bl,Bp);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphRegressionType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumDSSGraphOffScaleType","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphTrendLineOptions","GraphObject","Axis","FormatLine","Point2D","BezierCurve","CurveLineObject");mstrmojo.requiresCls("mstrmojo.VisUtility");var f=mstrmojo.chart,g=f.model.enums,d=mstrmojo.VisUtility,Y=f.enums,N=Y.EnumDSSGraphOffScaleType,U=g.EnumDSSGraphType,E=g.EnumShapeType,c=Y.EnumLineJoinType,C=Y.EnumLineStyle,D=g.EnumDSSGraphRegressionType,F=1e-10,K=100,I=0.25,J=0.01,h=0.15,O=0.3,a=1,P=1.001,B=0,R=1;function Q(i){var j=i.x;i.x=i.y;i.y=j;}function H(n){var k,j,m,l,p=this.mCoefficients,o=this.mTrendLineOptions.mRegressionType;j=n.length;for(k=0;k<j;++k){m=n[k];if(typeof (m)==="number"){p.push(m);}else{if(typeof (m)==="string"&&o===D.DssGraphRegressionExp){if(m.indexOf("Ln")===0){l=m.substr(2);m=parseFloat(l);if(isNaN(m)){return false;}this.subType=R;p.push(m);}}else{return false;}}}if((j===1)&&(o===D.DssGraphRegressionExp||o===D.DssGraphRegressionLog||o===D.DssGraphRegressionPow)){this.deformed=true;}return true;}function X(l,k){var i=l.mOptions.mOffScaleType,j;l.mOptions.mOffScaleType=N.DssGraphOffScaleShow;j=l.GetPositionByValue(k);l.mOptions.mOffScaleType=i;return j;}function b(AC){var o=this.mChartContextPtr,w=this.mFormatLinePtr.mLineStyle,s,r,AD;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||o.mUseAnimation){return ;}o.NewPath();var p=AC.length;if(p<2){return ;}var k=f.FormatLine.getLinePattern(w),q=k.length,v=0,m=0,l=[],u=[];for(s=0;s<p;++s){u.push(0);l.push(0);}var AB=AC[0].x;var AA=AC[0].y;var z=0.05;if(w===C.LS_DOT_DOT_DOT){z=0.03;k[q-1]*=3;}else{if(w===C.LS_DOT){z=0.005;}}for(AD=0;AD<=1;AD+=z/p){for(s=1;s<p;++s){for(r=0;r<p-s;++r){if(s===1){l[r]=AC[r].x*(1-AD)+AC[r+1].x*AD;u[r]=AC[r].y*(1-AD)+AC[r+1].y*AD;continue;}l[r]=l[r]*(1-AD)+l[r+1]*AD;u[r]=u[r]*(1-AD)+u[r+1]*AD;}}m+=Math.sqrt((AB-l[0])*(AB-l[0])+(AA-u[0])*(AA-u[0]));if(m>=k[v]){if(v%2===0){if(this.mIsVertical){o.MoveTo(AB,AA);o.LineTo(l[0],u[0]);}else{o.MoveTo(AA,AB);o.LineTo(u[0],l[0]);}}v=(v+1)%q;m=0;AB=l[0];AA=u[0];}}}function A(m,j,k,o,l){var n,i={};i.usedDefaultValueX=false;switch(m){case D.DssGraphRegressionLog:n=j;j*=k;if(j-n>l){j=n+l;i.usedDefaultValueX=true;}i.startX=j;break;case D.DssGraphRegressionExp:j+=k/Math.pow(o,j*0.25);i.startX=j;break;case D.DssGraphRegressionPoly:j+=k;i.startX=j;break;}return i;}function e(i,x,u,p,w,t,n,k){var z=0,m,l=0,s,q,j,r,v,o,y;for(v=x;v<u;){k.push(v);k.push(G.call(this,v));o=v;y=A.call(this,i,v,p,n,w);v=y.startX;r=y.usedDefaultValueX;if(!r){z=L.call(this,o);l=L.call(this,v);}m=Math.abs(z);s=Math.abs(l-z);if(t===0){q=this.mpXAxis.GetPositionByValue(o);j=this.mpXAxis.GetPositionByValue(v);}while(!r&&(v<u)&&((t===0&&Math.abs(j-q)<5)||(t!==0&&Math.abs(v-o)<t)||(m<=K&&m>I&&s<h*m)||(m<=I&&m>J&&s<O*m)||(m<=J&&s<a*m))){y=A.call(this,i,v,p,n,w);v=y.startX;r=y.usedDefaultValueX;if(!r){l=L.call(this,v);s=Math.abs(l-z);}if(t===0){j=this.mpXAxis.GetPositionByValue(v);}}if(v>=u){k.push(u);k.push(G.call(this,u));return ;}}}function W(){var m=this.mTrendLineOptions.mRegressionType,w,j=this.mTrendLineDataValues,q=this.mCoefficients,v=q.length-1,k=j.length,AD=[],l,AA,u,z,s,AE,AC,n,p,y,AB=16,x,o;n=[];for(w=0;2*w<k-k%2;++w){if(j[2*w]!==null&&j[2*w+1]!==null){AD.push(j[2*w]);AD.push(j[2*w+1]);}}l=AD.length;if(l<2){this.isValid=false;return ;}AA=AD[0];u=AD[l-l%2-2];x=(u-AA)/AB;z=G.call(this,AA);s=G.call(this,u);AE=this.mpXAxis.GetPositionByValue(AA);AC=this.mpYAxis.GetPositionByValue(z);this.startPoint={x:AE,y:AC};AE=this.mpXAxis.GetPositionByValue(u);AC=this.mpYAxis.GetPositionByValue(s);this.endPoint={x:AE,y:AC};if(x<F){this.deformed=true;}if(this.deformed){n.push(AD[0]);n.push(AD[1]);n.push(AD[l-l%2-2]);n.push(AD[l-l%2-1]);}else{var t=this.mpXAxis.GetValueForUnit(),r;if(t!==undefined&&t!==null){r=5*t;}else{r=0;}switch(m){case D.DssGraphRegressionNone:break;case D.DssGraphRegressionLinear:n=AD;break;case D.DssGraphRegressionLog:if(q[1]!==0){p=1+Math.SQRT2/Math.pow(Math.abs(q[1]),0.25);}p=Math.max(p,P);e.call(this,m,AA,u,p,x,r,0,n);break;case D.DssGraphRegressionExp:if(this.subType===R){o=Math.pow(Math.E,q[1]);}else{o=q[1];}if((q[0]!==0)&&(o!==0)){p=Math.pow(24/Math.abs(q[0]),0.25)/Math.abs(Math.log(o));p=Math.min(p,x);p=Math.max(p,r);e.call(this,m,AA,u,p,x,r,o,n);break;}else{for(y=AA;y<u;){n.push(y);n.push(G.call(this,y));y+=x;if(y>=u){n.push(u);n.push(G.call(this,u));break;}}}break;case D.DssGraphRegressionPow:for(y=AA;y<u;){n.push(y);n.push(G.call(this,y));y+=x;if(y>=u){n.push(u);n.push(G.call(this,u));break;}}break;case D.DssGraphRegressionPoly:p=1;if(v>1){p=1/Math.pow(Math.abs(q[v]),1/v);}else{p=x;}p=Math.min(x,p);p=Math.max(p,r);e.call(this,m,AA,u,p,x,r,0,n);break;default:break;}}this.mCalcValues=n;}function G(m){var l=this.mTrendLineOptions.mRegressionType,o,n=this.mCoefficients,j,k;switch(l){case D.DssGraphRegressionNone:o=null;break;case D.DssGraphRegressionLinear:o=null;break;case D.DssGraphRegressionLog:o=n[0]+n[1]*Math.log(m);break;case D.DssGraphRegressionExp:switch(this.subType){case B:o=n[0]*Math.pow(n[1],m);break;case R:o=n[0]*Math.pow(Math.E,n[1]*m);break;}break;case D.DssGraphRegressionPow:o=n[0]*Math.pow(m,n[1]);break;case D.DssGraphRegressionPoly:j=n.length-1;o=n[0];for(k=1;k<=j;++k){o+=n[k]*Math.pow(m,k);}break;default:o=null;break;}return o;}function L(m){var l=this.mTrendLineOptions.mRegressionType,o,n=this.mCoefficients,j,k;switch(l){case D.DssGraphRegressionNone:o=null;break;case D.DssGraphRegressionLinear:o=null;break;case D.DssGraphRegressionLog:o=n[1]/m;break;case D.DssGraphRegressionExp:switch(this.subType){case B:o=n[0]*Math.log(n[1])*Math.pow(n[1],m);break;case R:o=n[0]*n[1]*Math.pow(Math.E,n[1]*m);}break;case D.DssGraphRegressionPow:o=n[0]*n[1]*Math.pow(m,n[1]-1);break;case D.DssGraphRegressionPoly:j=n.length-1;o=0;for(k=1;k<=j;++k){o+=n[k]*k*Math.pow(m,k-1);}break;default:o=null;break;}return o;}function T(p,m,o,n,j){var i,l=o,k=n;if(p){if(l>j){if(k>m&&k<j){l=(m+2*k)/3;}else{l=(m+2*j)/3;}}if(k<m||k<l){k=(l+j)/2;}}else{if(l<j){if(k<m&&k>j){l=(m+2*k)/3;}else{l=(m+2*j)/3;}}if(k>m||k>l){k=(l+j)/2;}}i={control1:l,control2:k};return i;}function S(p,k,m,l,j){var i,n=this.mCoefficients,o;if(p===D.DssGraphRegressionPow){if((n[1]<0&&n[0]>0)||(n[1]>0&&n[0]<0)){i=T(false,k,m,l,j);}else{if((n[1]>0&&n[0]>0)||(n[1]<0&&n[0]<0)){i=T(true,k,m,l,j);}}}else{if(p===D.DssGraphRegressionLog){if(n[1]>0){i=T(true,k,m,l,j);}else{if(n[1]<0){i=T(false,k,m,l,j);}}}else{if(p===D.DssGraphRegressionExp){if(this.subType===R){o=Math.pow(Math.E,n[1]);}else{o=n[1];}if((o<1&&n[0]>0)||(o>1&&n[0]<0)){i=T(false,k,m,l,j);}else{if((o>1&&n[0]>0)||(o<1&&n[0]<0)){i=T(true,k,m,l,j);}}}}}if(i===undefined||i===null){i={control1:m,control2:l};}return i;}mstrmojo.chart.TrendLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.TrendLineObject",mpXAxis:null,mpYAxis:null,mTrendLineOptions:null,mDataArea:null,mDepthOffset:null,mIsVertical:false,mTextPtr:null,mRealObjectId:U.DssGraphTypeReserved,mCurveLinePtr:null,mMinXLogical:0,mMaxXLogical:0,mMinYLogical:0,mMaxYLogical:0,mTrendLineType:0,mCoefficients:[],mTrendLineDataValues:[],mCalcValues:[],mBezierCurves:[],identity:null,isValid:null,subType:B,deformed:false,startPoint:{},midPoint:{},endPoint:{},init:function Z(j){var i=0,k;this._super(j);this.deformed=false;this.mCoefficients=[];this.mTrendLineDataValues=[];if(j){if(j.RealObjectId){this.mRealObjectId=j.RealObjectId;}if(j.XAxis){this.mpXAxis=j.XAxis;}if(j.YAxis){this.mpYAxis=j.YAxis;}if(j.TrendLineOptions){this.mTrendLineOptions=j.TrendLineOptions;}this.mDataArea=j.DataArea||new f.Rect2D();this.mDepthOffset=j.DepthOffset||new f.Point2D();this.mIsVertical=j.IsVertical||false;if(j.Coefficients){this.isValid=H.call(this,j.Coefficients);}else{this.isValid=false;}if(j.TrendLineValues){this.mTrendLineDataValues=j.TrendLineValues;}if(j.Identity){this.identity=j.Identity;}}this.startPoint={};this.midPoint={};this.endPoint={};this.mCalcValues=[];W.call(this);this.mBezierCurves=[];if(!this.mIsVertical){i=this.mDepthOffset.x;this.mDepthOffset.x=this.mDepthOffset.y;this.mDepthOffset.y=i;}if(this.mpXAxis){k=this.mpXAxis.GetMinMaxLogicalCoord();this.mMinXLogical=k.Min;this.mMaxXLogical=k.Max;}if(this.mpYAxis){k=this.mpYAxis.GetMinMaxLogicalCoord();this.mMinYLogical=k.Min;this.mMaxYLogical=k.Max;}},Draw:function V(){var j=this.mChartContextPtr,n=this.mBezierCurves,l=j.GetLineJoin(),m,t,q=[];if(!this.isValid){return ;}j.SetLineJoin(c.LJT_ROUND);this.SetLineWidth();t=n.length;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||j.mUseAnimation){j.NewPath();n[0].MoveToStart(j);for(m=0;m<t;++m){n[m].CurveToEnd(j);}}else{for(m=0;m<t;++m){n[m].GetControlPoints(q);b.call(this,q);this.ApplyLineFormat();}}if(this.isClosePath){j.ClosePath();}if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||j.mUseAnimation){this.ApplyLineFormat();}j.SetLineJoin(l);for(m=0;m<t;++m){var k=n[m],s=new f.Point2D({Point2D:k.mP0}),r=new f.Point2D({Point2D:k.mP1}),p=new f.Point2D({Point2D:k.mP2}),o=new f.Point2D({Point2D:k.mP3});if(!this.mIsVertical){s.swap();r.swap();p.swap();o.swap();Q.call(this,this.startPoint);Q.call(this,this.midPoint);Q.call(this,this.endPoint);}q.push(s);q.push(r);q.push(p);q.push(o);}j.FinishDrawCurves(q,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},CreateTrendLine:function M(){var AQ,AP,m=this.mTrendLineOptions,AE=m.mRegressionType,y,x,k,AW,AL,AN=[],AO,AC=new f.Point2D(),t=new f.Point2D(),AG,AF,AK,AJ,v,u,AS,AI,AV,w,AT,AB,AA,s,r,n,l,z,AR=this.mTrendLineDataValues,AD=AR.length,o,q,AM=this.mBezierCurves,AH=0,AU,p=null;if(!this.isValid){return p;}AD=AD-(AD%2);if(AE===D.DssGraphRegressionLinear){if(m.mSeasonal){for(AQ=0;2*AQ<AD;++AQ){y=AR[2*AQ];x=AR[2*AQ+1];if(y!==null&&y!==undefined&&x!==null&&x!==undefined){k=X.call(this,this.mpXAxis,y);AW=X.call(this,this.mpYAxis,x);if(k!==undefined&&k!==null&&AW!==undefined&&AW!==null){AL=new f.Point2D({x:k,y:AW});AN.push(AL);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AQ)+" and "+(2*AQ+1));d.visPrint("\tvalueX = "+y+", valueY = "+x);d.visPrint("\tx = "+k+", y = "+AW);}}}if(AN.length>=2){AB=AN[0].x;s=AN[AD-1].x;n=(AB+s)/2;for(AQ=0;AQ<AD;++AQ){if(AN[AQ].x===n){l=AN[AQ].y;break;}else{if(AQ<AD-1&&AN[AQ].x<n&&AN[AQ+1].x>n){z=(AN[AQ+1].y-AN[AQ].y)/(AN[AQ+1].x-AN[AQ].x);l=AN[AQ].y+z*(n-AN[AQ].x);break;}}}this.midPoint.x=n;this.midPoint.y=l;}}else{for(AQ=0;AQ*2<AD;++AQ){y=AR[2*AQ];x=AR[2*AQ+1];if(y!==null&&y!==undefined&&x!==null&&x!==undefined){k=X.call(this,this.mpXAxis,y);AW=X.call(this,this.mpYAxis,x);if(k!==undefined&&k!==null&&AW!==undefined&&AW!==null){AL=new f.Point2D({x:k,y:AW});AN.push(AL);break;}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AQ)+" and "+(2*AQ+1));d.visPrint("\tvalueX = "+y+", valueY = "+x);d.visPrint("\tx = "+k+", y = "+AW);}}}for(AP=(AD/2)-1;AP>AQ;--AP){y=AR[2*AP];x=AR[2*AP+1];if(y!==null&&y!==undefined&&x!==null&&x!==undefined){k=X.call(this,this.mpXAxis,y);AW=X.call(this,this.mpYAxis,x);if(k!==undefined&&k!==null&&AW!==undefined&&AW!==null){AL=new f.Point2D({x:k,y:AW});AN.push(AL);break;}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AP)+" and "+(2*AP+1));d.visPrint("\tvalueX = "+y+", valueY = "+x);d.visPrint("\tx = "+AL.x+", y = "+AL.y);}}}if(AN.length>=2){n=(AN[0].x+AN[1].x)/2;l=(AN[0].y+AN[1].y)/2;this.midPoint.x=n;this.midPoint.y=l;}}if(AN.length>=2){AO=new f.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AN,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}p=AO;}else{o=this.mCalcValues;q=o.length;if(this.deformed){y=o[0];x=o[1];if(y!==null&&y!==undefined&&x!==null&&x!==undefined){k=X.call(this,this.mpXAxis,y);AW=X.call(this,this.mpYAxis,x);if(k!==undefined&&k!==null&&AW!==undefined&&AW!==null){AL=new f.Point2D({x:k,y:AW});AN.push(AL);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: 0 and 1");d.visPrint("\tvalueX = "+y+", valueY = "+x);d.visPrint("\tx = "+k+", y = "+AW);}}y=o[2];x=o[3];if(y!==null&&y!==undefined&&x!==null&&x!==undefined){k=X.call(this,this.mpXAxis,y);AW=X.call(this,this.mpYAxis,x);if(k!==undefined&&k!==null&&AW!==undefined&&AW!==null){AL=new f.Point2D({x:k,y:AW});AN.push(AL);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: 2 and 3");d.visPrint("\tvalueX = "+y+", valueY = "+x);d.visPrint("\tx = "+AL.x+", y = "+AL.y);}}if(AN.length>=2){n=(AN[0].x+AN[1].x)/2;l=(o[0].y+AN[1].y)/2;this.midPoint.x=n;this.midPoint.y=l;AO=new f.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AN,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}p=AO;}else{for(AQ=0;2*AQ+3<2*q;++AQ){AG=o[2*AQ];AF=o[2*AQ+1];AK=o[2*AQ+2];AJ=o[2*AQ+3];if(AG!==undefined&&AG!==null&&AF!==undefined&&AF!==null&&AK!==undefined&&AK!==null&&AJ!==undefined&&AJ!==null){w=L.call(this,AG);AT=L.call(this,AK);v=AF+w*((2*AG+AK)/3-AG);u=AJ+AT*((AG+2*AK)/3-AK);if(AE===D.DssGraphRegressionExp||AE===D.DssGraphRegressionLog||AE===D.DssGraphRegressionPow){AV=S.call(this,AE,AF,v,u,AJ);v=AV.control1;u=AV.control2;}AB=X.call(this,this.mpXAxis,AG);AA=X.call(this,this.mpYAxis,AF);s=X.call(this,this.mpXAxis,AK);r=X.call(this,this.mpYAxis,AJ);AS=X.call(this,this.mpYAxis,v);AI=X.call(this,this.mpYAxis,u);if(AB!==undefined&&AB!==null&&AA!==undefined&&AA!==null&&s!==undefined&&s!==null&&r!==undefined&&r!==null&&AS!==undefined&&AS!==null&&AI!==undefined&&AI!==null){AC=new f.Point2D({x:AB,y:AA});t=new f.Point2D({x:s,y:r});AM.push(new f.BezierCurve({P0:AC,F1:AS,F2:AI,P3:t,IsVertical:this.mIsVertical}));}else{d.visPrint("Trendline point calculation abnormal:");if(AB===undefined||AB===null||AA===undefined||AA===null){d.visPrint("\tdata point #: "+(2*AQ)+" and "+(2*AQ+1));d.visPrint("\tvalueX = "+AG+", valueY = "+AF);d.visPrint("\tx = "+AB+", y = "+AA);}if(s===undefined||s===null||r===undefined||r===null){d.visPrint("\tdata point #: "+(2*AQ+2)+" and "+(2*AQ+3));d.visPrint("\tvalueX = "+AK+", valueY = "+AJ);d.visPrint("\tx = "+s+", y = "+r);}}}}AH=AM.length;AB=AM[0].mP0.x;s=AM[AH-1].mP3.x;n=(AB+s)/2;AP=-1;for(AQ=0;AQ<AH;++AQ){if(AM[AQ].mP0.x===n){l=AM[AQ].mP0.y;AP=AQ;break;}else{if(AM[AQ].mP3.x===n){l=AM[AQ].mP3.y;AP=AQ+1;break;}else{if(AM[AQ].mP0.x<n&&AM[AQ].mP3.x>n){AP=AQ;break;}}}}if(l!==undefined){this.midPoint.x=n;this.midPoint.y=l;}else{if(AP<AH){l=AM[AP].evaluate(n);this.midPoint.x=n;this.midPoint.y=l;}}AU=new f.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this,IsVertical:true,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});for(AQ=0;AQ<AH;++AQ){AU.AddBezierCurveLine(AM[AQ]);}p=AU;}}return p;}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Axis","TripleId","Rect2D","CategoryAxisInfo","ChartConstants","StraightLineObject","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumCategoryAxisOidItem","EnumCategoryLabelStyle","EnumRectCompare","EnumChartStyle","EnumImageUsage","EnumRectExpandDirection","EnumGraphMatrixMajorGraphType","EnumLabelLevelOption");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType");var Ar=mstrmojo.chart,Ai=Ar.ChartConstants,Q=Ar.enums,A6=Q.EnumAnchorPoint,Al=Q.EnumGraphMajorType,g=Q.EnumAxisLabelsLocation,Av=Q.EnumAxisDirection,Y=Q.EnumGraphObjectType,c=Q.EnumCategoryAxisOidItem,G=Q.EnumCategoryLabelStyle,AI=Q.EnumImageUsage,As=Q.EnumLabelLevelOption,AJ=Q.EnumChartStyle,Ae=Q.EnumRectCompare,AO=Ar.gNullGroupId,AQ=Ar.gNullSeriesId;var Ag=mstrmojo.chart.model,AP=Ag.enums,A7=AP.EnumDSSGraphType,BC=AP.EnumDSSGraphProperty,BD=AP.EnumDSSGraphObject,J=AP.EnumDSSGraphFontRotation,BO=AP.EnumDSSGraphGridLineType,Ac=0,A8=1,BG=2,C=3;var v=new Ar.Point2D(),AX=new Ar.Point2D(),BJ=new Ar.Rect2D(),Aw=new Ar.Rect2D(),H=new Ar.Rect2D(),t=new Ar.Rect2D(),Aa=new Ar.Rect2D();function h(BQ,BP){if(BP===undefined){BP=-3;}switch(this.mTripleId.mObjectId){case BD.DssGraphO1Body:return new Ar.TripleId({ObjectId:BD.DssGraph2DO1Label,GroupId:BQ,SeriesId:BP});case BD.DssGraphO2Body:return new Ar.TripleId({ObjectId:BD.DssGraph2DO2Label,GroupId:BQ,SeriesId:BP});default:return new Ar.TripleId({ObjectId:BD.DssGraph2DO1Label,GroupId:BQ,SeriesId:BP});}}function s(BR,BU,BQ){var BP=BU||0,BT=BR||0,BS=(this.mAxisInfo.mAxisDirection===Av.AD_X)?BQ.width:BQ.height;if(BP<0){BP=0;}if(BT<0){BT=0;}if(BS<=0||BS<BP+BT){return ;}BS-=BP+BT;this.mLowTrim=BP;this.mHighTrim=BT;if(this.mAxisInfo.mAxisDirection===Av.AD_X){BQ.x+=BP;BQ.width=BS;}if(this.mAxisInfo.mAxisDirection===Av.AD_Y){BQ.y+=BT;BQ.height=BS;}}function AL(BQ){var BR,BS=this.mLabelList,BP=BS.length;for(BR=0;BR<BP;BR++){if(BS[BR]){BS[BR].Restore({LineCount:BQ});}}}function i(BP,BT){var BS=this.mChartContextPtr,BQ=BS.GetGraphMatrixContext(),BT=BT||BQ.getPadding(Ai.kLabelToChart),BR=BP.GetBoundingRect(true);return(BR.y>=BT&&BR.y+BR.height+BT<=BS.mGraphHeight);}function I(){var BS=this.mChartContextPtr,BV=BS.GetGraphMatrixContext(),BU=BS.RenderClusterShapes(),BT=this.mDatasetPtr,BX=false,BP=BU;if(BU===false){if(BV.isCombinationChart()){var BQ=BS.mUniformAxisContext.CategoryAxis,BW=this.IsVerticalAxis()?"Y":"X";BU=BQ[BW].EnforceFringe;if(BU){return true;}var BR=BT.GetSeriesByShape().Bar;BP=BX=BR&&BR.length>0;BP=BP||BU;}else{BP=BS.IsBarChart()&&BS.IsAdvancedBarChart(AJ._bullet)===false;}}return BP;}function Au(){if(I.call(this)){var BV=this.mChartContextPtr,BQ=BV.GetGraphMatrixContext(),BR=false,BT=false;if(BQ.isCombinationChart()){var BP=BV.mUniformAxisContext.CategoryAxis,BS=this.IsVerticalAxis()?"Y":"X";BR=BP[BS].EnforceCluster;if(BR){return true;}var BU=this.mDatasetPtr.GetSeriesByShape().Bar;BT=BU&&BU.length>0;return(BV.IsBarChart(AJ._cluster)||(BT&&!BV.IsPercentChart()&&!BV.IsStackedChart()));}return BV.IsBarChart(AJ._cluster);}return false;}function Ah(){var BS=this.mChartContextPtr;if(BS.mPartialRendering&&BS.mRenderingWindow){var BQ,BP,BR=BS.mRenderingWindow;if(this.IsVerticalAxis()){BQ=BR.y;BP=BQ+BR.height;}else{BQ=BR.x;BP=BQ+BR.width;}this.screenWindow={Min:this.getGroupSlotAt(BQ)-1,Max:this.getGroupSlotAt(BP)+1};}}function AZ(BV,BT){if(BV===0&&BT===0){return 0;}var BP=0,Be,BR=this.mChartContextPtr,BX=BR.mIsGraphMatrix,Ba=BR.GetGraphMatrixContext(),BQ=this.mCategoryOption.mLabelStyle,Bb=BX?Ba.getPadding(Ai.kLabelToChart):0,BW=this.mLevelSize,BS=BX?Ba.getPadding(Ai.kCategoricalLabelToTick):this.mLevelSpace,BU,Bd=this.mGroupCount;switch(BQ){case G.CLS_NORMAL:case G.CLS_MANUAL:case G.CLS_AUTOMATIC:BW.push(Math.max(BV,BT));BP=Math.max(BV,BT)+BS;break;default:Be=this.mpAxisLabelSet.GetFormatFont().mFontRotation;if(Be===J.Rotate45||Be===J.Rotate315){BV=0;var Bc=this.getGroupSize(),BZ,BY;for(BU=0;BU<(Bd+1)/2;++BU){BZ=this.mLabelList[BU].GetBoundingRectNoRotation(true);BY=Math.max(BZ.width,BZ.height)*Math.SQRT1_2;if(BY>Bc){BY+=(BY-Bc);}BV=Math.max(BV,(BY+0.5));}}BW.push(BV);BW.push(BT);BP=BV+BS+BT+this.mLevelSpace;break;}return BP+Bb;}function Z(BP){var BQ=this.mDeviceDataArea;return(BP>BQ.x&&BP<BQ.x+BQ.width);}function L(BP){var BQ=this.mDeviceDataArea;return(BP>BQ.y&&BP<BQ.y+BQ.height);}function BK(){return this.mTripleId.mObjectId===BD.DssGraphO2Body;}function Am(BP){return this.mGroupOrder.length===0?BP:this.mGroupOrder[BP];}function BF(BQ,BT){var BS,BR,BP;BP=BQ.length;for(BS=0;BS<BP;++BS){BR=new Ar.StraightLineObject({TripleId:BT.mTripleId,GraphObjectManager:this,StartPoint:BQ[BS],EndPoint:BQ[BS].Shifted(this.mDepthOffset),ParentObject:BT});BT.AddGraphObject(BR);this.mManagerGraphObjectList.push(BR);}}function l(BU,BS){var BT,BR,BQ,BP,BV=this.mDeviceDataArea,BW;if(this.mChartContextPtr.mIsTimeSeriesChart){BP=this.mShownLabelList.length;for(BT=0;BT<BP;++BT){BR=this.mShownLabelList[BT].mTripleId.mGroupId;if(!this.IsVerticalAxis()){BQ=new Ar.Point2D({x:this.getGroupMiddlePos(BR),y:BV.GetBottomMiddle().y});BU.push(BQ);BQ=new Ar.Point2D({x:this.getGroupMiddlePos(BR),y:BV.GetTopMiddle().y});BS.push(BQ);}else{BQ=new Ar.Point2D({x:BV.GetLeftMiddle().x,y:this.getGroupMiddlePos(BR)});BU.push(BQ);BQ=new Ar.Point2D({x:BV.GetRightMiddle().x,y:this.getGroupMiddlePos(BR)});BS.push(BQ);}}}else{BW=this.mGroupCount;for(BT=0;BT<BW;++BT){if(this.mAxisCross&&BT===0){continue;}if(!this.IsVerticalAxis()){BQ=new Ar.Point2D({x:this.getGroupMiddlePos(BT),y:BV.y+BV.height});BU.push(BQ);BQ=new Ar.Point2D({x:this.getGroupMiddlePos(BT),y:BV.y});BS.push(BQ);}else{BQ=new Ar.Point2D({x:BV.x,y:this.getGroupMiddlePos(BT)});BU.push(BQ);BQ=new Ar.Point2D({x:BV.x+BV.width,y:this.getGroupMiddlePos(BT)});BS.push(BQ);}}}}function O(){var BS=this.mMajorGrid;if(!BS.mShowGridLines||(BS.mGridStyle!==BO.DssGraphGridRegular&&BS.mGridStyle!==BO.DssGraphGridBoth)){return ;}var BR=Ar.gAxisObjects[this.getIndex()].mMajorId;this.InitObjectSet(BR,Y.GOT_MAJOR_GRID);var BQ=[],BP=[];l.call(this,BQ,BP);BF.call(this,BP,this.mpMajorGridSet);}function u(BZ,Bc){var BX=this.mMinorGrid,BY=this.mDeviceDataArea,BS=1,BP,BR,BV,Ba=this.mGroupCount,BW,BU,BT,BQ,Bb;if(BX.mUseManualGrid){BS=(BX.mGridInterval);}BP=Math.floor(BS/2);BR=this.getGroupSize()/(BS+1);BV=((BS%2)===0)?BP:(BP+1);for(BW=0;BW<Ba;++BW){for(BU=-BP;BU<=BV;++BU){if((BU!==0)){if(BW===this.mGroupCount-1){if((BS%2)!==0&&BU===BV){continue;}}BT=(BR*BU+(BU>=0?0.5:-0.5));if(!this.IsVerticalAxis()){BQ=this.getGroupMiddlePos(BW)+BT;if(Z.call(this,BQ)){BZ.push(new Ar.Point2D({x:BQ,y:BY.y+BY.height}));Bc.push(new Ar.Point2D({x:BQ,y:BY.y}));}}else{Bb=this.getGroupMiddlePos(BW)+BT;if(L.call(this,Bb)){BZ.push(new Ar.Point2D({x:BY.x,y:Bb}));Bc.push(new Ar.Point2D({x:BY.x+BY.width,y:Bb}));}}}}}}function Af(){var BR=this.mMinorGrid;if(!BR.mShowGridLines||(BR.mGridStyle!==BO.DssGraphGridRegular&&BR.mGridStyle!==BO.DssGraphGridBoth)){return ;}var BP=Ar.gAxisObjects[this.getIndex()].mMinorId;this.InitObjectSet(BP,Y.GOT_MINOR_GRID);var BS=[],BQ=[];u.call(this,BS,BQ);BF.call(this,BQ,this.mpMinorGridSet);}function n(){}function M(BP,BQ){return BP;}function BE(BR,BP){var BQ=As.LLO_NORMAL;if(this.mChartContextPtr.mIsGraphMatrix){return{Option:BQ,Index:BP};}return{Option:BQ,Index:BP};}function AF(BR,Ba,Bb){if(Bb){var BV=this.mDatasetPtr,BS=Bb.length,Bc=BR?BV.GetSeriesLabelIdentities(Ba):BV.GetGroupLabelIdentities(Ba),BZ=Bc.length,BX=1,BQ=[],BT=0,BW,BU;for(BW=0;BW<BS;++BW){var BY=Bb[BW],BP=BY.match(/ /g);if(BP){BX=BP.length+1;}for(BU=0;BU<BX;++BU){if(BW<BZ){BQ[BT]=Bc[BW];}else{BQ[BT]=null;}BT++;}}return BQ;}return null;}function o(){var BW=this.mChartContextPtr,BT=this.mLabelList,BP=BT.length,BR,BV=BK.call(this),BQ,BU,BS;if(BW.mImageUsage===AI.GENERAL){for(BS=0;BS<BP;BS++){BR=BT[BS];if(BR&&BR.texts){if(BR.mIsShown===false){delete BR.texts;continue;}BQ=BR.mTripleId.mGroupId;BU=AF.call(this,BV,BQ,BR.texts);if(BU&&BU.length){BR.IdentityMap=BU;delete BR.texts;}}}}}function Ak(Bc,BS){BS=BS||false;var BR=this.mChartContextPtr,BQ=!this.IsVerticalAxis(),Ba,Bb,BU=this.mDatasetPtr,BV=As.LLO_NORMAL,BX;if(BQ&&this.mIsUniformAxis){var BW=BR.getUniformAxisContext(),BP=BW.CategoryAxis.X.Truncation;if(BP){var BY=-1,BZ=BP.Indices,BT=BP.Texts;if(BZ&&BZ.length){BY=BZ.indexOf(Bc);if(BY!==-1){Ba=BT[BY];if(Ba){return Ba;}}}}}if(BK.call(this)){BX=BE.call(this,false,Bc);Bc=BX.Index;BV=BX.Option;Bb=BU.GetSeriesLabel(Bc,0,BV,BS);Ba=BU.GetMergedLabel(Bb,BV);if(BR.mImageUsage===AI.GENERAL&&BS){return{Text:Ba,Texts:Bb};}return{Text:Ba};}BX=BE.call(this,true,Bc);Bc=Am.call(this,BX.Index);BV=BX.Option;Bb=BU.GetGroupLabel(Bc,0,BV,BS);Ba=BU.GetMergedLabel(Bb,BV);if(BR.mImageUsage===AI.GENERAL&&BS){return{Text:Ba,Texts:Bb};}return{Text:Ba};}function p(BP){var BS=this.mChartContextPtr;if(BS.mPartialRendering){var BR=BP.mTripleId.mGroupId,BQ=this.screenWindow;return BR>=BQ.Min&&BR<=BQ.Max;}return true;}function x(BP){switch(this.mAxisInfo.mAxisLabelsLocation){case g.ALL_BOTTOM:case g.ALL_TOP:case g.ALL_LEFT:case g.ALL_RIGHT:return this.mAxisInfo.mAxisLabelsLocation;}if(this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP){if(BP<this.mLabelSubIndex){return g.ALL_BOTTOM;}return g.ALL_TOP;}if(BP<this.mLabelSubIndex){return g.ALL_LEFT;}return g.ALL_RIGHT;}function AN(BP){var BQ=this.HasOuterTicks(this.mMajorGrid.mGridStyle)||this.HasOuterTicks(this.mMinorGrid.mGridStyle);if(this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===g.ALL_LEFT_RIGHT){return BQ;}return BQ&&(BP===this.mAxisInfo.mAxisLabelsLocation);}function k(BQ,BS,BP){var BR=this.mDeviceDataArea;switch(BQ){case g.ALL_BOTTOM:BP.Reset(0,1);return BR.y+BR.height+BS;case g.ALL_TOP:BP.Reset(0,-1);return BR.y-BS;case g.ALL_LEFT:BP.Reset(-1,0);return BR.x-BS;case g.ALL_RIGHT:BP.Reset(1,0);return BR.x+BR.width+BS;default:return 0;}}function V(){if(this.mIsUniformAxis===false){return false;}return this.restrictWidth>=0&&this.restrictHeight>=0;}function AM(BW,BV){var BY=BV,BT=this.getLabelRotation(),BU=(BT===J.Rotate90),BQ=V.call(this)&&BU,BS=this.mChartContextPtr.getUniformAxisContext();if(V.call(this)){if(BU){if(this.maxLabelLength===-1){var BP=this.mAxisInfo.mAxisDirection===Av.AD_X;if(BP&&BU&&(this.resizeAction===Ae.ShrinkX||this.resizeAction===Ae.ExpandX)){BY=1000;}else{BY=this.calculateMaxAxisSpace(this.restrictHeight);}}else{BY=this.maxLabelLength;}}else{BY=this.calculateMaxAxisSpace(this.restrictWidth);BW.rect.width=BW.rect.height=0;BW.mIsRectCalculated=false;}}else{var BX=false,BR=BS.CategoryAxis.X;if(BR.Layout===C){BX=true;}if(!this.IsVerticalAxis()){if(BU||BX){var BZ=BS.CategoryAxis.X.LabelWidthLimit;if(BZ){BY=BZ;BQ=true;}if((BU||BX)&&!V.call(this)){BQ=true;BY=1000;}}else{if(!this.mWordWrap){BY=1000;}}}}return{Stringent:BQ,WidthLimit:BY};}function AK(){if(this.mPaddingOnSide===-1){var BS=this.mDatasetPtr,BU=this.mChartContextPtr;if(!BU.mIsGraphMatrix){this.mPaddingOnSide=0;}else{if(I.call(this)){var BQ=1,BT=this.mGroupCount;if(Au.call(this)===false){BQ=(BT+0.5);}else{BQ=BT*BS.GetClusterSeriesCount()+0.5;}var BP=0,BR=this.mDeviceDataArea;switch(this.mAxisInfo.mAxisDirection){case Av.AD_X:BP=BR.width;break;case Av.AD_Y:BP=BR.height;break;case Av.AD_Z:break;}this.mPaddingOnSide=BP/BQ/4;}else{this.mPaddingOnSide=0;}this.mPaddingOnSide=Math.round(this.mPaddingOnSide);}}return this.mPaddingOnSide;}function P(){var BP=0;switch(this.mAxisInfo.mAxisDirection){case Av.AD_X:BP=this.mDeviceDataArea.width;break;case Av.AD_Y:BP=this.mDeviceDataArea.height;break;case Av.AD_Z:break;}return BP-2*AK.call(this);}function AC(BW,BY,BQ){var BR,BX,BS=this.mChartContextPtr,BT=!this.IsVerticalAxis(),BP=false;if(BT){BR=0;if(BS.mManualLayoutMode){BR=(BY*this.getGroupSize(true)+0.5);}else{BR=BX=BY*this.getGroupSize(true);if(BS.mIsGraphMatrix===false){BR=Math.floor((BX*Math.max(1,((P.call(this)/10)/BX))-Ar.Axis.gLabelMargin+0.5));if(this.mAxisCross||BS.mIsTimeSeriesChart){BR=Math.min(BR,BQ);}}BR=Math.max(1,BR);}if(this.mIsUniformAxis){var BV=AM.call(this,BW,BR);BR=BV.WidthLimit;BP=BP||BV.Stringent;}BW.mSubTextHolder.SetLineCount(1);BW.SetTextWidthLimit(BR,BP);}else{BR=this.mDeviceDataArea.width;if(!this.mIsUniformAxis){BR=BR/2;}else{var BU=BS.getUniformAxisContext(),BZ=BU.CategoryAxis.Y;BR=BZ.LabelWidthLimit||BR;}if(this.mIsUniformAxis){if(V.call(this)){BW.rect.width=BW.rect.height=0;BW.mIsRectCalculated=false;}}BW.SetTextWidthLimit(BR);}}function At(BU,BQ,BR){BR=(BR!==undefined)?BR:false;var BT=this.mDeviceDataArea,BP,BS;if(this.IsVerticalAxis()){BP=BT.x+BT.width/2;BS=this.getGroupMiddlePos(BU.mGroupId,BR);}else{BP=this.getGroupMiddlePos(BU.mGroupId,BR);BS=BT.y+BT.height;}BQ.MoveTo(BP,BS,A6.CENTER);}function a(BW,BS,BV,BQ){var BP,BT,BU;if(BQ===undefined){if(this.maxLabelLength>0){BQ=this.maxLabelLength;}else{BQ=1000;}}var BR=BW.mGroupId;BP=this.mLabelList[BR];if(BP===undefined){BU=BW;BP=new Ar.TextObject({TripleId:BU,GraphObjectManager:this,GraphCollectionObject:this.mpAxisLabelSet,hasFill:false,hasLine:false});BT=Ak.call(this,BU.mGroupId,true);BP.SetText(BT.Text);delete BT.Text;if(BT.Texts){BP.texts=BT.Texts;delete BT.Texts;}this.mLabelList[BR]=BP;}AC.call(this,BP,BS,BQ);if(BV){At.call(this,BW,BP);}return BP;}function BI(BT,BV,BU,BR){var BS=BU,BQ=BR,BP;if(this.mUseDepth){BP=this.getDepthMargin(0,0);BS=BS-BP.lowMargin;BQ=BQ-BP.highMargin;}BS=(BS<0)?0:BS;BQ=(BQ<0)?0:BQ;return{LowMargin:BS>BT?BS-BT:0,HighMargin:BQ>BV?BQ-BV:0};}function AA(BX,BT,BQ,BU,BV){var BW,BR;t.ResetRect(BU);Aa.ResetRect(BV);if(this.mChartContextPtr.mIsGraphMatrix){var BS=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ai.kLabelToChart);var BP=0;if(this.IsVerticalAxis()){t.y-=BS;t.height+=BS;Aa.height+=BS;}else{t.x-=(BS+BP);t.width+=BS+BP;Aa.width+=BS;}}BW=this.IsVerticalAxis()?Aa.y+Aa.height-(BQ.y+BQ.height):BQ.x-t.x;BR=this.IsVerticalAxis()?BQ.y-t.y:Aa.x+Aa.width-(BQ.x+BQ.width);return BI.call(this,BX,BT,BW,BR);}function BH(BV,BW,BU){BU=BU||0;var BQ,BS,BT,BX,BR=this.mChartContextPtr,BP={x:0,y:0,width:BR.mGraphWidth,height:BR.mGraphHeight};if(BW){BQ=BV.x-BU;BS=BV.x+BV.width+BU;BT=BP.x;BX=BP.x+BP.width;}else{BQ=BV.y-BU;BS=BV.y+BV.height+BU;BT=BP.y;BX=BP.y+BP.height;}return !(BQ>=BT&&BS<=BX);}function AE(BY,BW,BV,BR,BU){var BQ=this.mChartContextPtr,BP=0,BS=1,BX=false,BT=BQ.GetGraphMatrixContext();if(BY){switch(BV){case Ac:case C:case A8:if(BW){BX=BT.checkPaddingBetweenLabels(BR,BU,BP,true);}else{BX=BT.checkPaddingBetweenLabels(BR,BU,BS,true);}break;default:BX=BT.checkPaddingBetweenLabels(BR,BU,BS,true);break;}}else{BX=BT.checkPaddingBetweenLabels(BR,BU,BS,false);}return BX;}function AD(BR,BQ){var BP;var BS=h.call(this,BR,-3);BP=BP||a.call(this,BS,BQ,true);return BP;}function AH(BS,BT,BP,BX,BQ,BV,BU){var BW=false,BR=this.mChartContextPtr;if(!BS){BW=BT.HasIntersection(BP);BW=BW||(BR.mIsGraphMatrix&&AE.call(this,BX,BQ,BV,BP,BT));}if(BX&&!BQ){BW=BW||(BR.mIsGraphMatrix&&BH.call(this,BT,BX,BU));}return BW;}function AH(BS,BT,BP,BX,BQ,BV,BU){var BW=false,BR=this.mChartContextPtr;if(!BS){BW=BT.HasIntersection(BP);BW=BW||(BR.mIsGraphMatrix&&AE.call(this,BX,BQ,BV,BP,BT));}if(BX&&!BQ){BW=BW||(BR.mIsGraphMatrix&&BH.call(this,BT,BX,BU));}return BW;}function BM(BS,Bb,BZ,BV){var BU,BY=new Ar.Rect2D(),Ba,BT=true,Bd=!this.IsVerticalAxis(),BR=this.mChartContextPtr,BX=0,BQ=this.mPlotGroupCount,BW=this.mCategoryOption.mLabelStyle,BP=this.getLabelRotation()===J.Rotate90||this.getLabelRotation()===J.Rotate270,Bc={Overlapped:false,MaxSpace:BZ};if(BR.mIsGraphMatrix){BX=BR.GetGraphMatrixContext().getPadding(Ai.kLabelToChart);}Aw.Reset(0,0,0,0);for(BU=Bb;BU<BQ;BU+=BS){Ba=AD.call(this,BU,BS);BV.push(Ba);Ba.GetTransformedRectEx(BY);Bc.Overlapped=AH.call(this,BT,BY,Aw,Bd,BP,BW,BX);if(Bc.Overlapped){Bc.MaxSpace=BZ;return Bc;}if(BT===true){BT=false;Aw.ResetRect(BY);}else{Aw.ResetRect(BY);BZ=Math.max(BZ,this.IsVerticalAxis()?BY.width:BY.height);Bc.MaxSpace=BZ;}}if(Bb>=BS){BT=true;Aw.Reset(0,0,0,0);for(BU=Bb;BU>=0;BU-=BS){Ba=AD.call(this,BU,BS);if(BU!==Bb){BV.unshift(Ba);}BY=Ba.GetTransformedRect(true);Bc.Overlapped=AH.call(this,BT,BY,Aw,Bd,BP,BW,BX);if(Bc.Overlapped){Bc.MaxSpace=BZ;return Bc;}if(BT===true){BT=false;Aw.ResetRect(BY);}else{Aw.ResetRect(BY);BZ=Math.max(BZ,this.IsVerticalAxis()?BY.width:BY.height);Bc.MaxSpace=BZ;}}}Bc.Overlapped=false;return Bc;}function z(BP,BQ){if(this.IsVerticalAxis()){this.mDeviceDataArea.y+=BQ;this.mDeviceDataArea.height-=BQ+BP;}else{this.mDeviceDataArea.x+=BP;this.mDeviceDataArea.width-=BP+BQ;}}function U(BT,BQ,BR,BP,BS){if(!BT){return ;}if(this.IsVerticalAxis()){if(BR>0){BP.mIsShown=false;}if(BQ>0){BS.mIsShown=false;}}else{if(BQ>0){BP.mIsShown=false;}if(BR>0){BS.mIsShown=false;}}}function AU(){var BR=this.mChartContextPtr,BP=BR.getUniformAxisContext();if(BR.mIsGraphMatrix){var BQ=BP.CategoryAxis.X;return !!BQ.ForbideStagger===false;}return true;}function e(Bb,BS,Bj,BX,BY,Bi,Bg,BR,Bk,BW){var Bc,Bd,BU,Bf,Ba,BT,BZ,Bh,BQ,BV,BP=[],Be;BU={MaxSpace1:Bi,MaxSpace2:Bg,Overlapped:true};Bf=this.mPlotGroupCount-((this.mPlotGroupCount&1)===0?1:2);Bc=h.call(this,Bf);BT=a.call(this,Bc,2,true,BS*2);Ba=BT.GetBoundingRect();BZ=AA.call(this,Bb,BS,BX,BR,Ba);BQ=BZ.LowMargin;BV=BZ.HighMargin;if(BQ>Bk||BV>BW){this.mDeviceDataArea=BX;BQ=Math.max(Bk,BQ);BV=Math.max(BW,BV);if(!Bj){z.call(this,BQ,BV);}BU.MaxSpace1=0;BZ=BM.call(this,2,0,Bi,BP);BU.MaxSpace1=BZ.MaxSpace;if(BZ.Overlapped){return BU;}}else{BP=BP.concat(BY);}BZ=BM.call(this,2,1,Bg,BP);BU.MaxSpace2=Bg=BZ.MaxSpace;if(BZ.Overlapped){return BU;}Bh=Bi+this.mLevelSpace+Bg+this.mLevelSpace;if(this.HasLabelsOnBothSides()){Bh+=Bh;}if(Bh*2>(this.IsVerticalAxis()?this.mDeviceDataArea.width:this.mDeviceDataArea.height)){return BU;}BT=(this.mPlotGroupCount&1)===0?BP[BP.length-1]:BP[Math.floor(this.mPlotGroupCount/2)];U.call(this,Bj,BQ,BV,BP[0],BT);BY.splice(0,BY.length);Be=BP.length;for(Bd=0;Bd<Be;++Bd){BY.push(BP[Bd]);}BU.Overlapped=false;return BU;}function B(BP){return e.call(this,BP.LowMargin,BP.HighMargin,BP.FixedMargin,BP.BackupRect2D,BP.LabelArray,BP.MaxSpace_1,BP.MaxSpace_2,BP.FirstRect,BP.LowLabelMargin,BP.HighLabelMargin);}function BN(BV,Ba,BS){Ba=Ba||0;var BR=this.mPlotGroupCount-1,BX=Ba,BW,BU=false,BZ,BT,BQ=this.mCategoryOption.mLabelStyle,BP=!this.IsVerticalAxis(),BY;if(this.mPlotGroupCount<2){return 1;}if(BP&&this.mIsUniformAxis){if(BQ===A8){if(BS===1){return BQ;}}if(BQ===BG){if(BS===2){return BQ;}}}while(BR>BX){BW=Math.floor((BR+BX+1)/2);BT=h.call(this,BW);BY=a.call(this,BT,BS,true);BZ=BY.GetTransformedRect(true);if(BV.HasIntersection(BZ)){BX=BW;BU=true;}else{BU=false;if(BR===BW){break;}BR=BW;}}return BU?this.mGroupCount:Math.max(BR-Ba,BS);}function BB(BP,BR,BQ){switch(BP){case g.ALL_BOTTOM:BR.height-=BQ;break;case g.ALL_TOP:BR.y+=BQ;BR.height-=BQ;break;case g.ALL_LEFT:BR.x+=BQ;BR.width-=BQ;break;case g.ALL_RIGHT:BR.width-=BQ;break;}}function j(BP){var BQ=this.mAxisInfo.mAxisLabelsLocation;switch(BQ){case g.ALL_BOTTOM:case g.ALL_TOP:case g.ALL_LEFT:case g.ALL_RIGHT:BP.push(BQ);break;}if(BQ===g.ALL_BOTTOM_TOP){BP.push(g.ALL_BOTTOM);BP.push(g.ALL_TOP);}else{if(BQ===g.ALL_LEFT_RIGHT){BP.push(g.ALL_LEFT);BP.push(g.ALL_RIGHT);}}}function W(BZ){var BY,BU,BS,BW,BT=BZ.FirstLabel,BQ=this.mChartContextPtr,BV=BQ.mIsGraphMatrix,Ba=this.mCategoryOption.mManualSkip,BR=this.mDeviceDataArea,Bb=this.mAxisInfo.mAxisDirection===Av.AD_Y,BP=this.mCategoryOption.mLabelStyle,BX=new Ar.Rect2D({Rect2D:BR});switch(BZ.Interval){case 1:if(!this.IsVerticalAxis()&&BZ.FirstLabel.possibleTruncate()){BP=C;}else{BP=A8;}break;case 2:BU=this.getLabelRotation();BY=(BU===J.Rotate90)||(BU===J.Rotate270);BS=true;if(BV){BS=BS&&!Bb&&!BY;if(BS){BS=AU.call(this)&&(BT.mTripleId.mGroupId===0);}}else{}if(BS){BW=B.call(this,BZ);BZ.MaxSpace_1=BW.MaxSpace1;BZ.MaxSpace_2=BW.MaxSpace2;BS=BW.Overlapped===false;}if(BS){if(BV&&this.mPlotGroupCount===2){BR.ResetRect(BX);BP=C;Ba=2;}else{BP=BG;}}else{BR.ResetRect(BX);BP=G.CLS_MANUAL;Ba=2;}break;default:BP=G.CLS_MANUAL;Ba=BZ.Interval;break;}this.mCategoryOption.mManualSkip=Ba;this.mCategoryOption.mLabelStyle=BP;}function A2(BW){var BS=this.mpAxisLabelSet;if(BS){var Bb=BS.GetFormatFont();if(!!Bb===false){return 1;}var Ba=this.getGroupSize(true),BZ=BW.mGroupId,BU=this.mDatasetPtr,BR;if(BK.call(this)){BR=BU.GetSeriesLabel(BZ);}else{BR=BU.GetGroupLabel(BZ);}var BV=Bb.mFontRotation,BQ=this.mChartContextPtr,BX=BQ.getUniformAxisContext(),BP=BX.CategoryAxis,Bc=Bb.GetStringExtent(BR);if(BV===J.Rotate180||BV===J.Normal){var BY=2;if(this.IsVerticalAxis()){if(Bc.Height>=Ba){BY=Math.ceil(Bc.Height/Ba);return Math.min(BY,this.mGroupCount);}}else{if(Bc.Width>=Ba){BY=Math.ceil(Bc.Width/Ba);return Math.min(BY,this.mGroupCount);}}if(this.IsVerticalAxis()===false){var BT=BP.X;if(BT&&BT.Layout===BG){return Math.min(2,this.mGroupCount);}}}else{if(BV===J.Rotate90||BV===J.Rotate270){if(Bc.Height>=Ba){return Math.min(2,this.mGroupCount);}}}}return 1;}function A1(Br,BZ,Bt,Bk){Bk=(Bk!==undefined)?Bk:0;var BX,Bi,Bh,Bp=this.mChartContextPtr,Bf,BS,Bs,Bo,BP,BU,BR,Bb=this.mGroupCount,Bl=this.mShownLabelList,Bu=this.mLabelList,Ba=0,Bw=0,Bn,Bc,Bx,B0,BQ,By,Bd,Bz,Bj;this.mLevelSize.splice(0,this.mLevelSize.length);Bi=Bh=0;if(Bb<1){return 0;}var Be=Bp.getUniformAxisLabelRotateMode("x"),BW=this.IsVerticalAxis()?"Y":"X";BQ=Be===-1;Bf=Bp.mIsGraphMatrix?Bk:0;BS=Bb-1;Bf=AV.call(this,BW,Bf,BS);if(!Bp.mManualLayoutMode||Bp.mRecalculateFrame){Bs=h.call(this,Bf);BR=A2.call(this,Bs);Bo=a.call(this,Bs,BR,true);BP=Bo.GetBoundingRect(true);BU=Bo.GetTransformedRect(true);BR=BN.call(this,BU,Bf,BR);H.ResetRect(this.mDeviceDataArea);var BT=this.mDeviceDataArea;while(BR<=Bb){BT.ResetRect(H);Bi=0;Bh=0;if(true){Bs=h.call(this,Bf);AC.call(this,Bo,BR,Br*2);At.call(this,Bs,Bo);BP=Bo.GetBoundingRect(true);}Bi=this.IsVerticalAxis()?BP.width:BP.height;Bn=parseInt(BS/BR)*BR;Bs=h.call(this,Bn);if(this.mIsUniformAxis){Bc=a.call(this,Bs,BR,true);}else{Bc=a.call(this,Bs,BR,true,2*BZ);}Bx=Bc.GetBoundingRect(true);if(this.mChartContextPtr.GetGraphType()===A7.DssGraphTypeGridChart&&BW==="X"){Ba=0;Bw=0;this.mLowTrim=0;this.mHighTrim=0;}else{Bj=AA.call(this,Br,BZ,BT,BP,Bx);Ba=Bj.LowMargin;Bw=Bj.HighMargin;this.mLowTrim=Ba;this.mHighTrim=Bw;}if(!Bt){z.call(this,Ba,Bw);}if(!this.IsVerticalAxis()){By=this.getLabelRotation();Bd=(By===J.Rotate90);if(Bd===false){Bs=h.call(this,Bf);AC.call(this,Bo,BR,Br*2);At.call(this,Bs,Bo);BP=Bo.GetBoundingRect(true);if(BH.call(this,BP,true,5)){if(BQ){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mLabelInterval=-1;this.mCategoryOption.mLabelStyle=C;return 0;}else{Bo.mIsShown=false;Bf++;}}}}Bl.splice(0,Bl.length);if(this.mGroupCount===1&&!this.IsVerticalAxis()){if(BT.width<BP.width){By=this.getLabelRotation();Bd=(By===J.Rotate90)||(By===J.Rotate270);if(Bd){Bo.mIsShown=false;Bi=Bh=0;break;}BR=2;this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;Bu.splice(0,Bu.length);this.mLabelList.push(Bo);Bl.push(Bo);BP=Bo.GetBoundingRect();return BP.height+5;}}Bj=BM.call(this,BR,Bf,Bi,Bl);Bi=Bj.MaxSpace;if(Bj.Overlapped){++BR;}else{this.mLabelInterval=BR;if(Bl.length>=1){U.call(this,Bt,Ba,Bw,Bl[0],Bl[Bl.length-1]);if(this.mChartContextPtr.GetGraphType()===A7.DssGraphTypeGridChart&&BW==="X"){Bx=Bl[Bl.length-1].GetBoundingRect(true);if(BH.call(this,Bx,true,0)){Bl.splice(Bl.length-1,1);}}}break;}}Bz={Interval:BR,FirstLabel:Bo,LowMargin:Br,HighMargin:BZ,BackupRect2D:H,FirstRect:BP,FixedMargin:Bt,MaxSpace_1:Bi,MaxSpace_2:Bh,LabelArray:Bl,LowLabelMargin:Ba,HighLabelMargin:Bw};W.call(this,Bz);Bi=Bz.MaxSpace_1;Bh=Bz.MaxSpace_2;if(Bp.mIsGraphMatrix){var Bm=[],BY=this.mGraphObjectList,Bv=BY.length,BV=Bl.length;for(B0=0;B0<BV;++B0){Bl[B0].mIsShown=true;Bm.push(Bl[B0].mTripleId.mGroupId);}var Bq,Bg;Bg=Bu.length;for(B0=0;B0<Bg;B0++){if(Bu[B0]){Bu[B0].mIsShown=false;}}Bg=Bl.length;for(B0=0;B0<Bg;B0++){Bq=Bl[B0].mTripleId.mGroupId;if(Bu[Bq]){Bu[Bq].mIsShown=true;}else{Bu[Bq]=Bl[B0];}}}else{Bu=Bu.concat(Bl);}}this.hasLabelCreated=true;BX=AZ.call(this,Bi,Bh);return BX;}function BA(BP){this.mDeviceDataArea.ResetRect(BP.Rect2D);this.mLevelSize.splice(0,this.mLevelSize.length);this.mShownLabelList.splice(0,this.mShownLabelList.length);return A1.call(this,BP.LowMargin,BP.HighMargin,BP.FixedMargin,BP.StartIndex);}function AV(BQ,BX,BV){var BU,BP,BR,BW,BT=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ai.kLabelToChart);var BS=function(){BU=h.call(this,BX);BP=A2.call(this,BU);BR=a.call(this,BU,BP,true);BW=BR.GetBoundingRect(true);while(BX<=BV){if((BQ==="Y"&&BW.y>=BT)||(BQ==="X"&&BW.x>0)){break;}BX++;BU=h.call(this,BX);BP=A2.call(this,BU);BR=a.call(this,BU,BP,true);BW=BR.GetBoundingRect(true);}};if(BQ==="Y"){BS.call(this);}else{if(this.mChartContextPtr.GetGraphType()===A7.DssGraphTypeGridChart&&BQ==="X"){BS.call(this);}}return BX;}function A3(){if(this.mLabelInterval<=1){return 0;}var BP=this.mGroupCount%this.mLabelInterval;if(BP<=0){BP=this.mLabelInterval;}return Math.ceil((BP+1)/2)-1;}function Ad(BQ){var BR=[[BD.DssGraph2DO1Label,BD.DssGraph2DO2Label],[BD.DssGraphO1Major,BD.DssGraphO2Major],[BD.DssGraphO1Minor,BD.DssGraphO2Minor]],BP=1;if(this.mTripleId.mObjectId===BD.DssGraphO1Body){BP=0;}return BR[BQ][BP];}function F(BR){if(BR<0){return true;}var BV=new Ar.TripleId({ObjectId:Ad.call(this,c.OID_LABEL)});this.InitObjectSet(BV,Y.GOT_AXIS_LABEL);var BT=this.mpAxisLabelSet.mFormatFontPtr,BQ=4+2*BT.GetStringHeight("H"),BS=this.mChartContextPtr.GetGraphMatrixContext(),BU=this.mGroupCount,BP=BS.getPadding(Ai.kEndLabelToChart)*2+BQ*BU+BS.getPadding(Ai.kBetweenLabels)*(BU-1);return BP<BR;}function A4(BQ){var BR=this.mChartContextPtr,BP={Skip:false,Space:-1};if(!BR.mIsGraphMatrix){return BP;}if(!BQ){if(this.resizeAction===-1||this.maxLabelLength===-1){return BP;}this.mWordWrap=F.call(this,this.mDeviceDataArea.height);if(this.resizeAction===Ae.ShrinkX||this.resizeAction===Ae.ExpandX){BP.Skip=!this.mWordWrap;BP.Space=AZ.call(this,this.maxLabelLength,0);}}else{if(this.resizeAction===-1||this.maxLabelLength===-1){return BP;}if(this.resizeAction===Ae.ExpandY||this.resizeAction===Ae.ShrinkY){if(this.getStatus()===2){this.mWordWrap=F.call(this,this.mDeviceDataArea.height);BP.Skip=!this.mWordWrap;this.mLevelSize.splice(0,this.mLevelSize.length);BP.Space=AZ.call(this,this.maxLabelLength,0);}}}return BP;}function AY(BQ){var BT=this.mChartContextPtr;if(!BT.mIsGraphMatrix){return false;}var Ba=BT.GetGraphMatrixContext(),BY,Bc,BU,BR=this.mPlotGroupCount,BZ=0,BP=1,Bb=this.getLabelRotation()===J.Rotate90,BS=1,BW,BX=0,BV=0,Bd;for(BW=0;BW<BR;BW+=BS){BY=h.call(this,BW,-3);Bc=a.call(this,BY,BS,false);if(this.maxLabelLength===-1){Bc.Restore({Stringent:false,Restroke:true});}Bd=Bc.GetBoundingRect(true);BU=Bb?Bd.height:Bd.width;if(BW%2===0){BX+=BU;}else{BV+=BU;}}if(BQ===BP){BU=Math.max(BX,BV)+Math.ceil(BR/2)*Ba.getPadding(Ai.kBetweenLabels);}else{if(BQ===BZ){BU=BX+BV+(BR-1)*Ba.getPadding(Ai.kBetweenLabels);}else{BU=BX+BV+(BR-1)*Ba.getPadding(Ai.kBetweenLabels);}}BU+=2*Ba.getPadding(Ai.kLabelToChart);return BU<=this.mDeviceDataArea.width;}function m(){var BR=V.call(this),BP=this.mChartContextPtr,BS=BP.getUniformAxisContext(),BX=this.mAxisInfo.mAxisDirection===Av.AD_X,BQ=BS.CategoryAxis.X,BU=this.mpAxisLabelSet.GetFormatFont(),BV=false;if(this.mIsUniformAxis&&BX&&BQ){var BT=BP.getUniformAxisLabelRotateMode("x");if(BT===J.Automatic){if(BQ.Layout){var BW=this.mCategoryOption;BW.mLabelStyle=BQ.Layout;if(BR){this.restoreLabels();}if(BW.mLabelStyle===1||BW.mLabelStyle===2){BU.mFontRotation=J.Normal;}else{BU.mFontRotation=J.Rotate90;}BV=true;}}else{BV=true;BU.mFontRotation=BT;}}if(!BV){if(BR){this.restoreLabels();if(BR&&this.maxLabelLength===-1){BU.mFontRotation=J.Normal;}}if(this.mIsUniformAxis&&BX&&BU.mFontRotation===J.Normal){if(AY.call(this,1)===false){BU.mFontRotation=J.Rotate90;}}}}function d(BX,BQ,Bb,BW,Bh){var BT=this.mChartContextPtr,BS={Rect2D:BQ,LowMargin:Bb,HighMargin:BW,FixedMargin:Bh,StartIndex:0},Bg;Bg=BA.call(this,BS);if(BT.mIsGraphMatrix===false){return Bg;}BS={Rect2D:BQ,LowMargin:Bb,HighMargin:BW,FixedMargin:Bh,StartIndex:0};var Bd,Bc=this.mCategoryOption.mLabelStyle,Ba=600,BZ=800,Be=this.mLabelInterval;if(BX){Bd=BT.getUniformAxisLabelRotateMode("x");if(Bc!==BG&&Be!==1&&this.mPlotGroupCount<=Ba){if(Bd===J.Automatic||Bd===J.Rotate90){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;}AL.call(this,1);BS.StartIndex=(Be>=3)?A3.call(this):0;Bg=BA.call(this,BS);if(Bc===C&&Be>=3&&BT.GetGraphType()===Y.DssGraphTypeGridChart){BS.StartIndex=A3.call(this);Bg=BA.call(this,BS);}}}else{if(Be>1&&this.mGroupCount>1){var Bf=this.checkShownLabelCount();if(Bf>=2){}else{if(Bf===1){var BU=true,BV=A3.call(this),BR=this.mLabelList[BV],BP=this.mShownLabelList[0],BY=BP&&BR;if(BY){BU=BP.mTripleId.mGroupId!==BR.mTripleId.mGroupId;}if(BY&&BU){if(i.call(this,BR)){BP.mIsShown=false;BR.mIsShown=true;this.mShownLabelList=[];this.mShownLabelList.push(BR);BU=false;}}if(BU){BS.StartIndex=A3.call(this);Bg=BA.call(this,BS);}}}}}return Bg;}function b(BX,BU,BT){var BY=this.mLabelList,BW=[],BQ,BS,Ba,BP,BR=V.call(this),BZ=this.mAxisInfo.mAxisDirection===Av.AD_X,BV;BJ.ResetRect(this.mDeviceDataArea);j.call(this,BW);Ba=A4.call(this,BZ);if(Ba.Skip&&BR){if(BR){this.restoreLabels();if(this.mLowTrim!==undefined&&this.mHighTrim!==undefined){if(this.mLowTrim>=0&&this.mHighTrim>=0){z.call(this,this.mLowTrim,this.mHighTrim);}}}return Ba.Space;}m.call(this);BQ=d.call(this,BZ,BJ,BX,BU,BT);BV=BW.length;for(BS=0;BS<BV;++BS){BP=BQ;if(AN.call(this,BW[BS])){BP+=this.mTickLength;}BB.call(this,BW[BS],this.mDeviceDataArea,BP);}if(this.HasLabelsOnBothSides()){BV=BY.length;for(BS=0;BS<BV;++BS){BY.push(BY[BS]);}}this.mLabelSubIndex=this.mLabelList.length/(this.HasLabelsOnBothSides()?2:1);if(this.hasLabelCreated){o.call(this);}}function AT(BP){switch(this.mAxisInfo.mAxisDirection){case Av.AD_X:switch(BP){case g.ALL_BOTTOM:if(this.mDepthDirection>0&&this.mDepthDirection<180){return true;}break;case g.ALL_TOP:if(this.mDepthDirection>=180&&this.mDepthDirection<360){return true;}break;}break;case Av.AD_Y:switch(BP){case g.ALL_LEFT:if(!(this.mDepthDirection>=90&&this.mDepthDirection<270)){return true;}break;case g.ALL_RIGHT:if(this.mDepthDirection>=90&&this.mDepthDirection<270){return true;}break;}break;}return false;}function Az(BP,BS){var BR,BQ=this.mChartContextPtr.GetGraphMatrixContext(),BT=AN.call(this,BP)?this.mTickLength:0;if(this.mIsGraphMatrix){BT+=BQ.getPadding(Ai.kCategoricalLabelToTick);}else{BT+=this.mLevelSpace*BS;}for(BR=0;BR+1<BS;++BR){BT+=this.mLevelSize[BR];}return BT;}function Aj(){var BU,Bc,BT,BV,BY,BQ,BZ,Be=1,Bd=2,BX=this.mShownLabelList,BP=BX.length,BS=this.mChartContextPtr,BW=BS.getUniformAxisContext(),Bb=this.mIsUniformAxis,Ba=this.mCategoryOption,BR=BW.CategoryAxis.X;v.Reset(0,0);AX.Reset(0,0);for(BU=0;BU<BP;++BU){Bc=x.call(this,BU);BT=BX[BU];if(!(BT.mIsShown)){continue;}BT.mIsOnScreen=p.call(this,BT);if(!BT.mIsOnScreen){continue;}BV=this.getGroupMiddlePos(BT.mTripleId.mGroupId,true);BQ=Be;if(Ba.mLabelStyle===G.CLS_STAGGER&&!(BS.mIsTimeSeriesChart)){BZ=(BU>=this.mLabelSubIndex)?(BU-this.mLabelSubIndex):BU;if(BZ>=Math.floor((this.mLabelSubIndex+1)/2)){BQ=Bd;}if(Bb){if(BR.StartRow&&BR.StartRow===Bd){BQ=Bd+Be-BQ;}}}BY=Az.call(this,Bc,BQ);v.x=0;v.y=1;AX.x=BV;AX.y=k.call(this,Bc,BY,v);if(this.IsVerticalAxis()){AX.swap();}if(this.mUseDepth){if(!AT.call(this,Bc)){AX.x+=this.mDepthOffset.x;AX.y+=this.mDepthOffset.y;}}this.MoveLabel(BT,AX,v,0);}}function Ao(BR,BT,BP){var BQ=this.mAxisCross?this.getGroupMiddlePos(BR):(this.getGroupStartPos(BR)+0.5),BS=this.mAxisCross?this.getGroupMiddlePos(BR+1):(this.getGroupStartPos(BR)+this.getGroupSize()+0.5);BT.y=this.mDeviceDataArea.y;BP.y=this.mDeviceDataArea.y;if(this.IsVerticalAxis()){BT.x=this.mDeviceDataArea.x+this.mDeviceDataArea.width;BP.x=BT.x;BT.y=BQ;BP.y=BS;}else{BT.y=this.mDeviceDataArea.y;BP.y=BT.y;BT.x=BQ;BP.x=BS;}}function AS(BQ,BX,BW,BU,BR,BV){var BS=this.mChartContextPtr.getUtiliy().tripleId,BT,BP=[];BT=BS.create(BQ,this.mTripleId.mSeriesId,M());this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,BW,this.mTickLength,BU,BR,BP);this.GenerateOneLineObject(BT,BP,BV);if(this.HasTwoGridLineParts(BW)){BP.splice(0,BP.length);this.GetOneGridLine(this.IsVerticalAxis()?g.ALL_RIGHT:g.ALL_TOP,BW,this.mTickLength,BU,BR,BP);this.GenerateOneLineObject(BT,BP,BV);}}function Aq(){var BT=Ar.gAxisObjects[this.getIndex()].mMajorId,BS=[],BQ=[],BR,BP;l.call(this,BS,BQ);this.InitObjectSet(BT,Y.GOT_MAJOR_GRID);BP=BS.length;for(BR=0;BR<BP;++BR){AS.call(this,BD.DssGraphO1Major,BR,this.mMajorGrid.mGridStyle,BS[BR],BQ[BR],this.mpMajorGridSet);}}function Ay(){var BQ=[],BT=[],BS=Ar.gAxisObjects[this.getIndex()].mMinorId,BR,BP;u.call(this,BQ,BT);this.InitObjectSet(BS,Y.GOT_MINOR_GRID);BP=BQ.length;for(BR=0;BR<BP;++BR){AS.call(this,BD.DssGraphO1Minor,BR,this.mMinorGrid.mGridStyle,BQ[BR],BT[BR],this.mpMinorGridSet);}}function r(BP){return BP?this.mPlotGroupCount:this.mGroupCount;}function AG(BP){return BP?this.mPlotGroupSize:this.mGroupSize;}mstrmojo.chart.CategoryAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.CategoryAxis",mLevelSpace:4,mLevelSize:null,mShownLabelList:null,mGroupOrder:null,mLabelSubIndex:0,mCategoryOption:null,mAxisCross:false,mGroupSize:-1,mPlotGroupSize:-1,mPlotGroupCount:0,mGroupCount:1,mDatasetPtr:null,mPaddingOnSide:-1,mWordWrap:true,screenWindow:null,init:function AR(BP){this._super(BP);if(this.mChartContextPtr.mIsGraphMatrix){this.mLevelSpace=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ai.kBetweenLabelLines);}this.mLevelSize=[];this.mShownLabelList=[];this.mGroupOrder=[];this.mCategoryOption={mLabelStyle:G.CLS_AUTOMATIC,mManualSkip:0};if(this.mChartContextPtr.mIsUniformAxisMode){this.mIsShown=this.mIsUniformAxis;}if(BP.AxisDirection===Av.AD_X){this.mAxisInfo.mAxisLabelsLocation=g.ALL_BOTTOM;}if(BP.AxisDirection===Av.AD_Y){this.mAxisInfo.mAxisLabelsLocation=g.ALL_LEFT;}this.mDatasetPtr=null;this.mWordWrap=false;this.LoadProperties();},SetDataset:function AB(BP){this.mGroupSize=-1;var BQ=this.mDatasetPtr=BP;if(BQ!==null){if(BK.call(this)){this.mGroupCount=BQ.GetSeriesCount();}else{this.mGroupCount=BQ.GetGroupCount();}this.mPlotGroupCount=this.mGroupCount;}},getSubGroupMiddlePos:function Ax(BT,BS,BQ,BU){if(BQ<=0){return 0;}BU=BU||false;if(BQ===1){return this.getGroupMiddlePos(BT);}var BP=this.getGroupSize(BU),BR=this.getGroupStartPos(BT,BU);BR+=BP/(2*BQ);return BR+BS*(BP/BQ);},getGroupMiddlePos:function A9(BP,BQ){BQ=(BQ!==undefined)?BQ:false;return Math.round(this.getGroupStartPos(BP,BQ)+this.getGroupSize()/2);},getFloatGroupMiddlePos:function BL(BP,BQ){BQ=(BQ!==undefined)?BQ:false;return this.getGroupStartPos(BP,BQ)+this.getGroupSize()/2;},getGroupStartPos:function f(BQ,BR){BR=(BR!==undefined)?BR:false;var BP=0;switch(this.mAxisInfo.mAxisDirection){case Av.AD_X:BP=this.mDeviceDataArea.x+AK.call(this);break;case Av.AD_Y:BP=this.mDeviceDataArea.y+AK.call(this);break;}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mAxisCross){BP-=this.getGroupSize(BR)*0.5;}}else{if(this.mAxisCross){BP-=this.getGroupSize(BR)*0.5;}}return BP+this.getGroupSize(BR)*BQ;},getGroupSize:function T(BQ){BQ=(BQ!==undefined)?BQ:false;var BP=AG.call(this,BQ);if(BP!==-1){return BP;}BP=0;var BR=r.call(this,BQ);if(this.mDatasetPtr!==null){if(!this.mAxisCross){if(BR===0){BR=1;}BP=P.call(this)/BR;}else{if(BR>1){BP=P.call(this)/(BR-1);}else{BP=P.call(this)*2;}}}return BP;},GenerateMapAndList:function y(){var BU,BW,BR=this.mGraphObjectList,BT=this.mpAxisLabelSet,BS=this.mLabelList,BP;if(this.mIsShown===false){return ;}Ah.call(this);if(BS.length!==0){Aj.call(this);if(this.mChartContextPtr.mIsGraphMatrix){var BQ=[],BV=Ar.gAxisObjects[this.getIndex()].mLabelId;for(BU=0;BU<BR.length;BU++){if(BR[BU]&&BR[BU].mTripleId.mObjectId!==BV.mObjectId){BQ.push(BR[BU]);}}BR=this.mGraphObjectList=[];BT.ClearCollection();BP=BS.length;for(BU=0;BU<BP;++BU){if(BS[BU]){BR.push(BS[BU]);BT.AddGraphObject(BS[BU]);}}for(BU=0;BU<BQ.length;BU++){BR.push(BQ[BU]);}}else{BP=BS.length;for(BU=0;BU<BP;++BU){if(BS[BU]){BR.push(BS[BU]);BT.AddGraphObject(BS[BU]);}}}}if(this.mAxisInfo.mShowAxisTitle){BW=this.getAdjustedTitleArea();this.UpdateTitleLocation(BW);}},getAdjustedTitleArea:function E(){var BS=new Ar.Rect2D({Rect2D:this.mDeviceDataArea}),BR,BQ,BP=this.mLevelSize.length;if(this.IsVerticalAxis()){BQ=g.ALL_LEFT;if(BQ===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===g.ALL_LEFT_RIGHT){BS.x-=AN.call(this,BQ)?this.mTickLength:0;for(BR=0;BR<BP;++BR){BS.x-=this.mLevelSpace;BS.x-=this.mLevelSize[BR];}if(!AT.call(this,BQ)){BS.x+=this.mDepthOffset.x;}}}else{BQ=g.ALL_BOTTOM;if(BQ===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP){BS.height+=AN.call(this,BQ)?this.mTickLength:0;for(BR=0;BR<BP;++BR){BS.height+=this.mLevelSpace;BS.height+=this.mLevelSize[BR];}if(!AT.call(this,BQ)){BS.height+=this.mDepthOffset.y;}}}return BS;},generateInterlacedSection:function AW(){var BT=new Ar.TripleId({ObjectId:this.GetInterlacedGridId(),SeriesId:AQ,GroupId:AO}),BQ,BP=[],BR,BS=this.mGroupCount;this.InitObjectSet(BT,Y.GOT_INTERLACED_GRID);for(BQ=0;BQ<BS;BQ+=2){if(this.mAxisCross&&BQ===BS-1){continue;}BP.splice(0,BP.length);this.getInterlacedSectionPolygon(BQ,BP);BR=new Ar.PolygonObject({TripleId:BT,GraphObjectManager:this,Polygon:BP,GraphCollectionObject:this.mpInterlacedGridSet});this.mpInterlacedGridSet.AddGraphObject(BR);this.mManagerGraphObjectList.push(BR);}},getInterlacedSectionPolygon:function q(BU,BY){var BV=this.mUseDepth,BS=this.mDeviceDataArea,BT=this.mDepthDirection,BP=this.mDepthOffset,BX=new Ar.Point2D(),BW=new Ar.Point2D(),BR,BQ;Ao.call(this,BU,BX,BW);BR=new Ar.Point2D({Point2D:BX});BQ=new Ar.Point2D({Point2D:BW});if(!this.IsVerticalAxis()){BR.y=BS.GetBottomLeft().y;BQ.y=BR.y;if(BV&&BT>=180&&BT<360){BR.swapPoints(BX);BQ.swapPoints(BW);}}else{BR.x=BS.x;BQ.x=BR.x;if(BV&&BT>=90&&BT<270){BR.swapPoints(BX);BQ.swapPoints(BW);}}if(BV){BY.push(BR);BY.push(BQ);BY.push(BQ.Shifted(BP));BY.push(BW.Shifted(BP));BY.push(BX.Shifted(BP));BY.push(BR.Shifted(BP));}else{BY.push(BR);BY.push(BQ);BY.push(BW);BY.push(BX);}},AdjustTitleArea:function Ap(BP){if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(BP);}},AdjustDataArea:function A(BP,BR,BT,BV){var BU;if(!this.mIsShown){return ;}if(BR===undefined){BR=1000;}if(BT===undefined){BT=1000;}if(BV===undefined){BV=false;}if(this.mUseDepth){this.ReserveDepthAxisLine(BP);}if(this.mDatasetPtr!==null&&this.mAxisInfo.mShowAxisLabels){if(this.mUseDepth){var BQ=this.TrimMarginsForDepthAxis(BR,BT);BR=BQ.LowMargin;BT=BQ.HighMargin;BT=BQ.HighMargin;}BU=Ar.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(BU,Y.GOT_AXIS_LABEL);if(this.mChartContextPtr.mIsGraphMatrix&&this.mAxisInfo.mAxisDirection===Av.AD_Y){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Normal;}this.SetDeviceDataArea(BP);b.call(this,BR,BT,BV);var BS=this.mDeviceDataArea;BS.width=Math.max(BS.width,0);BS.height=Math.max(BS.height,0);BP.ResetRect(BS);}},generateGridsByArea:function w(BP){if(BP){if(this.mMajorGrid.mShowGridLines){Aq.call(this);}if(this.mMinorGrid.mShowGridLines){Ay.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){this.generateInterlacedSection();}}},getMinMaxLogicalCoord:function An(){if(this.mAxisCross){return{min:1,max:(this.mGroupCount>1)?this.mGroupCount:2};}return{min:0.5,max:this.mGroupCount+0.5};},GenerateGridsOnMiddleWall:function N(BQ,BP){var BR=this.mDeviceDataArea;this.mDeviceDataArea=BQ;n.call(this);O.call(this);Af.call(this);if(!this.mManagerGraphObjectList.empty()){this.MoveGraphObjectList(BP);}this.mDeviceDataArea=BR;},getTotalGroupCount:function X(){var BQ=this.mDatasetPtr.GetSliceFlag(),BP;this.mDatasetPtr.EnableSlices(false);BP=this.mDatasetPtr.GetGroupCount();this.mDatasetPtr.EnableSlices(BQ);return BP;},LoadProperties:function Ab(){var BS,BQ;this._super();if(!this.mIsShown){return ;}var BR=this.mChartContextPtr,BP=this.mCategoryOption;if(!BR.mIsGraphMatrix){BS=new Ar.TripleId({ObjectId:this.mTripleId.mObjectId});BQ=BR.GetProperty(BC.DssGraphAxisAutoFit,BS);if(BQ!==null&&BQ!==undefined){if(BQ!==false){BP.mLabelStyle=G.CLS_NORMAL;}else{BQ=BR.GetProperty(BC.DssGraphAxisStagger,BS);if(BQ!==null&&BQ!==undefined){if(BQ!==false){BP.mLabelStyle=G.CLS_STAGGER;}else{BP.mLabelStyle=G.CLS_MANUAL;BQ=BR.GetProperty(BC.DssGraphAxisScaleFreq,BS);if(BQ){BP.mManualSkip=BQ;if(BP.mManualSkip<1){BP.mManualSkip=1;}}}}}}switch(BR.GetGraphMajorType()){case Al.GMT_RADAR:case Al.GMT_3D_CATEGORY:return ;case Al.GMT_CATEGORY:if(BR.isParetoChart()){return ;}break;default:break;}}},TrimAxisPadding:function R(BT){var BU=this.mChartContextPtr,BQ=BU.getUniformAxisContext(),BS=BQ.CategoryAxis;if(BU.mIsGraphMatrix===false){return ;}var BR,BP="X";if(this.IsVerticalAxis()){BP="Y";}if(this.mIsUniformAxis===false){BR=BS[BP];this.mHighTrim=BR.Trims[1]||0;this.mLowTrim=BR.Trims[0]||0;}s.call(this,this.mHighTrim,this.mLowTrim,BT);},ResetAxisPadding:function D(){this.mPaddingOnSide=-1;},getStatus:function K(){var BS=0,BP=1,BT=2,BR=this.getLabelRotation(),BQ=this.mLabelInterval;if(BR===J.Rotate90){return BT;}if(BQ===1){return BS;}if(BQ===2&&this.mCategoryOption.mLabelStyle===G.CLS_STAGGER){return BP;}return BT;},getGroupSlotAt:function A5(BQ){var BR=this.getGroupStartPos(0),BP=this.getGroupSize();return Math.ceil((BQ-BR)/BP)-1;},getGridLinePosition:function A0(){return[];},getBandings:function S(){var BW=[],BV=0,BS=0,BR,BU=this.mGroupCount,BT=this.mChartContextPtr,BQ;if(BU===1){if(this.IsVerticalAxis()){BS=BT.mGraphHeight;}else{BS=BT.mGraphWidth;}BW.push({Start:BV,Size:BS});}else{var BP=this.getGroupSize(true);for(BQ=0;BQ<BU;++BQ){if(BQ===0){BV=0;BS=this.getGroupStartPos(1,true);}else{if(BQ===BU-1){if(this.IsVerticalAxis()){BS=BT.mGraphHeight;}else{BS=BT.mGraphWidth;}BR=BW[BQ-1];BV=BR.Start+BR.Size;BS=BS-BV;}else{BR=BW[BQ-1];BV=BR.Start+BR.Size;BS=BP;}}BW.push({Start:BV,Size:BS});}}return BW;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Point2D","GraphObjectManager","TripleId","FormatFont","ChartContext","GraphCollectionObject","FancyBoxObject","MarkerObject","FormatFill","StraightLineObject","TextObject","Rect2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMarkerShape","EnumBoxStyle","EnumLineStyle","EnumLegendLayout","EnumLegendMarkersStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantType","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphMarkerLayout","EnumDSSGraphLegendPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");var V=mstrmojo.chart,M=mstrmojo.chart.enums,L=M.EnumCollectionType.CT_TEXT,U=M.EnumMarkerShape,S=M.EnumBoxStyle,G=M.EnumLineStyle,K=M.EnumLegendLayout,p=M.EnumLegendMarkersStyle,m=V.gNullTripleId,N=0.75,q=16,A=0.5,h=0.15,c=0.9,F=1742,P=725,D=2;var T=mstrmojo.chart.model,O=T.enums,f=O.EnumDSSGraphMarkerShape,a=O.EnumDSSGraphType,d=O.EnumDSSGraphProperty,e=O.EnumDSSGraphObject,E=O.EnumVariantBool,B=E.VARIANT_FALSE,Z=O.EnumDSSExtraGraphProperty,n=O.EnumDSSGraphMarkerLayout,I=O.EnumDSSGraphLegendPosition;var C=0;function X(r){this.mLegendMarkerSize=r.mFontSize<q?r.mFontSize:q;this.mLegendMarkerSize=Math.floor(this.mLegendMarkerSize*N+1.5);if(this.mLegendMarkerSize<2){this.mLegendMarkerSize=2;}this.mItemMargin=Math.floor(this.mLegendMarkerSize*0.3);this.mEdgeMargin=Math.floor(this.mLegendMarkerSize*0.8);}function l(AG,x){var t=this.mChartContextPtr,AC=this.mDatasetPtr,r=this.mGraphOptionsLegend,AE,u,AD,AB,v,w,s,AA,AI,y,AJ,z,AF,AH;AE=AC.GetSeriesCount();u=new V.Rect2D();AH=this.mLegendItemCount;for(AD=0;AD<AH;++AD){AB=new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AD});v=new V.TextObject({TripleId:AB,GraphObjectManager:this,GraphCollectionObject:x});v.mIsShown=false;x.AddGraphObject(v);s=t.mGraphType;if(AD>=AE&&s!==a.DssGraphTypeGridChart){if(t.mGraphType===a.DssGraphTypePareto_Percent){AA=t.GetProperty(d.DssGraphCumulativePercentLabel,new V.TripleId({SeriesId:AD-AE}));if(AA){w=AA;}else{w="Cumulative Percent";}}else{if(s>=a.DssGraphTypeHiLo_Stock_Chart&&s<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){w=this.mStockMetricValue[this.mLegendItemIndexToStockMetricIndex[AD]];}}}else{if(r.mIsByGroup){w=AC.GetGroupLabel(AD,false);}else{w=AC.GetSeriesLabel(AD,false);}}v.SetText(w);AF=v.GetBoundingRect();this.AddToMapAndList(v);if(AF.width>u.width){u.width=AF.width;}}if(!t.mManualLayoutMode||r.mReposition){y=Math.floor(AG.width*h+0.5);if(r.mLegendPosition===I.DssGraphLegendPositionBottom){y=AG.width;}AI=(u.width<y)?u.width:y;}else{AJ=t.GetLocation(d.DssGraphLegendLocation);if(AJ.width===0){y=Math.floor(AG.width*h+0.5);AI=(u.width<y)?u.width:y;}else{AI=AJ.width-2*this.mEdgeMargin;if(r.mLegendMarkersStyle===n.DssGraphMarkerLeft||r.mLegendMarkersStyle===n.DssGraphMarkerRight){AI-=this.mLegendMarkerSize*(1+A);}}}u.width=0;for(AD=0;AD<AH;++AD){z=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AD}));z.SetTextWidthLimit(AI);AF=z.GetBoundingRect();if(AF.height>u.height){u.height=AF.height;}if(AF.width>u.width){u.width=AF.width;}}return u;}function Y(){var r=this.mChartContextPtr.mGraphType;switch(r){case a.DssGraphTypeVertical_Area_Stacked:case a.DssGraphTypeVertical_Area_BiPolar_Stacked:case a.DssGraphTypeVertical_Area_DualAxis_Stacked:case a.DssGraphTypeVertical_Area_Percent:case a.DssGraphTypeVertical_Bar_Stacked:case a.DssGraphTypeVertical_Bar_DualAxis_Stacked:case a.DssGraphTypeVertical_Bar_BiPolar_Stacked:case a.DssGraphTypeVertical_Bar_Percent:case a.DssGraphTypeVertical_Line_Stacked:case a.DssGraphTypeVertical_Line_BiPolar_Stacked:case a.DssGraphTypeVertical_Line_DualAxis_Stacked:case a.DssGraphTypeVertical_Line_Percent:case a.DssGraphRadar_Line_Stacked:case a.DssGraphTypePareto:case a.DssGraphTypePareto_Percent:return true;default:return false;}}function J(AT,AE){var w=this.mGraphOptionsLegend,Aa=l.call(this,AT,AE),AV=new V.Rect2D(),Ac=this.mItemMargin,AH=this.mItemMargin,y=this.mDatasetPtr.GetSeriesCount(),AQ=new V.Rect2D({x:0,y:0,width:this.mLegendMarkerSize,height:this.mLegendMarkerSize}),AC=0,Ag=0,AX,Ah,AA,AG,AL,AZ,AM,AF,AO,t,AR,Ad,r,x,AN,Ab,AI,AB,AS,AW,s,AD,v,AY,AK,AJ,z,Af,u,Ae,AP;switch(w.mLegendMarkersStyle){case n.DssGraphMarkerLeft:case n.DssGraphMarkerRight:AC=Math.floor(Aa.width+AQ.width*(1+A));Ag=Aa.height;break;case n.DssGraphMarkerCentered:AC=Aa.width;Ag=Aa.height;break;case n.DssGraphMarkerAbove:case n.DssGraphMarkerBelow:AC=Aa.width;Ag=Math.floor(Aa.height+AQ.height*(1+A));break;default:break;}if(Ag===0){Ag=1;}if(AC===0){AC=1;}AX=0;Ah=0;AA=this.mLegendItemCount;switch(w.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:AG=Math.floor((AT.height-Ac)/(Ag+Ac));if(AG===0){AG=1;}AX=Math.floor(this.mLegendItemCount/AG);if(AX*AG<this.mLegendItemCount){AX++;}Ah=Math.floor(this.mLegendItemCount/AX);if(Ah*AX<this.mLegendItemCount){Ah++;}break;case I.DssGraphLegendPositionBottom:AG=Math.floor((AT.width-AH)/(AC+AH));if(AG===0){AG=1;}Ah=Math.floor(this.mLegendItemCount/AG);if(Ah*AG<this.mLegendItemCount){Ah++;}AX=Math.floor(this.mLegendItemCount/Ah);if(Ah*AX<this.mLegendItemCount){AX++;}break;case I.DssGraphLegendPositionFreeFloat:AL=this.mChartContextPtr.GetLocation(d.DssGraphLegendLocation);AV.y=AL.y;AV.x=AL.x;if(!w.mRecalculate){AV.width=AL.width;AV.height=AL.height;AZ=Math.floor((AV.height-this.mEdgeMargin*2+D)/Ag);AM=Math.floor((AV.width-this.mEdgeMargin*2+D)/AC);if(AZ*AM<AA){AA=AZ*AM;Ah=AZ;AX=AM;}else{AX=Math.floor(this.mLegendItemCount/AZ);if(AX===0){AX=1;}if(AX*AZ<this.mLegendItemCount){AX++;}Ah=Math.floor(this.mLegendItemCount/AX);if(Ah*AX<this.mLegendItemCount){Ah++;}}if(Ah>0){Ac=Math.floor((AV.height-Ah*Ag-this.mEdgeMargin*2)/Ah);}if(AX>0){AH=Math.floor((AV.width-AX*AC-this.mEdgeMargin*2)/AX);}}else{AG=Math.floor((AT.height-Ac)/(Ag+Ac));if(AG===0){AG=1;}AX=Math.floor(this.mLegendItemCount/AG);if(AX*AG<this.mLegendItemCount){AX++;}Ah=Math.floor(this.mLegendItemCount/AX);if(Ah*AX<this.mLegendItemCount){Ah++;}}break;default:break;}if(w.mLegendPosition!==I.DssGraphLegendPositionFreeFloat||w.mRecalculate){AV.height=Math.floor(Ag*Ah+Ac*Ah+this.mEdgeMargin*2);AV.width=Math.floor(AC*AX+AH*AX+this.mEdgeMargin*2);if(w.mRecalculate){if(!this.mIsExpanded){AF=this.mChartContextPtr.mGraphWidth;AO=this.mChartContextPtr.mGraphHeight;if(AV.x+AV.width>AF){AV.width=AF-AV.x;}if(AV.y+AV.height>AO){AV.height=AO-AV.y;}}}}if(this.mIsExpanded){switch(w.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:this.mArea.width=AV.width*1.8+530;if(this.mArea.width>F){this.mArea.width=F;}this.mChartContextPtr.SetGraphSize(this.mArea.x+this.mArea.width+this.mChartContextPtr.vdWidth(C),this.mChartContextPtr.mGraphHeight);break;case I.DssGraphLegendPositionBottom:this.mArea.height=AV.height*0.4+400;if(this.mArea.height>P){this.mArea.height=P;}this.mChartContextPtr.SetGraphSize(this.mChartContextPtr.mGraphWidth,this.mArea.y+this.mArea.height+this.mChartContextPtr.vdHeight(C));break;case I.DssGraphLegendPositionFreeFloat:t=this.mChartContextPtr.mGraphWidth;AR=this.mChartContextPtr.mGraphHeight;if(AV.x+AV.width>this.mChartContextPtr.mGraphWidth){t=AV.x+AV.width+this.mChartContextPtr.vdWidth(C);}if(AV.y+AV.height>this.mChartContextPtr.mGraphHeight){AR=AV.y+AV.height+this.mChartContextPtr.vdHeight(C);}this.mChartContextPtr.SetGraphSize(t,AR);break;default:break;}}switch(w.mLegendPosition){case I.DssGraphLegendPositionRight:AV.y=Math.floor(this.mArea.y+this.mArea.height/2-AV.height/2);AV.x=Math.floor(this.mArea.x+this.mArea.width-AV.width);break;case I.DssGraphLegendPositionLeft:AV.y=Math.floor(this.mArea.y+this.mArea.height/2-AV.height/2);AV.x=this.mArea.x;break;case I.DssGraphLegendPositionBottom:AV.y=this.mArea.y+this.mArea.height-AV.height;AV.x=Math.floor(this.mArea.x+(this.mArea.width-AV.width)/2);break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}if(!this.mChartContextPtr.mManualLayoutMode||w.mReposition){this.mChartContextPtr.PutLocation(d.DssGraphLegendLocation,AV);}for(Ad=0;Ad<AA;++Ad){r=Math.floor(Ad/AX);x=Ad-r*AX;AN=0;switch(w.mLegendMarkersStyle){case n.DssGraphMarkerRight:AN=AH;break;case n.DssGraphMarkerCentered:case n.DssGraphMarkerAbove:case n.DssGraphMarkerBelow:AN=AH/2;break;}Ab=new V.Point2D();Ab.x=AV.x+(AC+AH)*x+this.mEdgeMargin+AN;Ab.y=Math.floor(AV.y+(Ag+Ac)*r+this.mEdgeMargin+Ac/2);AI=new V.Point2D();AB=new V.Point2D();switch(w.mLegendMarkersStyle){case n.DssGraphMarkerLeft:AI.x=Math.floor(Ab.x+AQ.width/2);AI.y=Math.floor(Ab.y+Ag/2);AB.x=Math.floor(Ab.x+AQ.width*(1+A));AB.y=Ab.y;break;case n.DssGraphMarkerRight:AI.x=Math.floor(Ab.x+AC-AQ.width/2);AI.y=Math.floor(Ab.y+Ag/2);AB.x=Ab.x;AB.y=Ab.y;break;case n.DssGraphMarkerCentered:AI.x=Math.floor(Ab.x+AC/2);AI.y=Math.floor(Ab.y+Ag/2);AB.x=Ab.x;AB.y=Ab.y;break;case n.DssGraphMarkerAbove:AI.x=Math.floor(Ab.x+AC/2);AI.y=Math.floor(Ab.y+AQ.height/2);AB.x=Ab.x;AB.y=Ab.y+AQ.height*(1+A);break;case n.DssGraphMarkerBelow:AI.x=Math.floor(Ab.x+AC/2);AI.y=Math.floor(Ab.y+Ag-AQ.height/2);AB.x=Ab.x;AB.y=Ab.y;break;default:break;}AS=Y.call(this)?(this.mLegendItemCount-Ad-1):Ad;AW=new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AS});AD=this.mChartContextPtr.mGraphType;if(AD>=a.DssGraphTypeHiLo_Stock_Chart&&AD<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart&&Ad>=y){var AU=this.mLegendItemIndexToStockMetricIndex[Ad];if(AU===undefined){break;}v=AU.value;if(this.mStockMetricLayout[v]===e.DssGraphMetricVerticalLine||this.mStockMetricLayout[v]===e.DssGraphMetricLine){AY=new V.Point2D({Point2D:AI});AK=this.mLegendMarkerSize/2;AJ=this.mStockMetricLayout[v]===e.DssGraphMetricVerticalLine?new V.Point2D({x:AY.x,y:Math.floor(AY.y-1.75*AK)}):new V.Point2D({x:Math.floor(AY.x-1.75*AK),y:AY.y});z=this.mStockMetricLayout[v]===e.DssGraphMetricVerticalLine?new V.Point2D({x:AY.x,y:Math.floor(AY.y+1.75*AK)}):V.Point2D({x:Math.floor(AY.x+1.75*AK),y:AY.y});Af=new V.StraightLineObject({TripleId:AW,GraphObjectManager:this,StartPoint:AJ,EndPoint:z});u=new V.FormatLine({LineStyle:G.LS_SHORT_DASH,Alpha:255,LineThickness:1,LineColor:V.gBlack.ToInteger()});Af.SetFormatLine(u);this.mLegendMarkerLines.push(Af);s=new V.MarkerObject({TripleId:AW,GraphObjectManager:this,MarkerPosition:AI,MarkerShape:U.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});s.mIsShown=false;}else{Ae=this.mStockMetricLayout[v]===e.DssGraphMetricBar?f.DssGraphMarkerShapeRectangle:f.DssGraphMarkerShapeHouse;s=new V.MarkerObject({TripleId:AW,GraphObjectManager:this,MarkerPosition:AI,MarkerShape:Ae,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});s.SetFormatFill(new V.FormatFill({SimpleColor:V.gBlack.ToInteger()}));}}else{s=new V.MarkerObject({TripleId:AW,GraphObjectManager:this,MarkerPosition:AI,MarkerShape:U.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});}this.AddToMapAndList(s);AP=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AS}));AP.SetRect(Aa);AP.MoveTo(AB.x,AB.y);AP.mIsShown=true;}return AV;}function W(){var r=this.mDatasetPtr;if(!this.mGraphOptionsLegend.mIsByGroup){return r.GetSeriesCount();}return r.GetGroupCount();}function Q(){var x=this.mChartContextPtr,v,u,w=[],t,r,s;v=x.GetLocationRect(d.DssGraphLegendLocation);u=new V.Point2D({x:Math.floor(v.x+v.width/2),y:Math.floor(v.y+v.height/2)});w[0]=u.Distance(new V.Point2D({x:x.mGraphWidth,y:Math.floor(x.mGraphHeight/2)}));w[1]=u.Distance(new V.Point2D({x:0,y:Math.floor(x.mGraphHeight/2)}));w[2]=u.Distance(new V.Point2D({x:Math.floor(x.mGraphWidth/2),y:x.mGraphHeight}));t=w[0];r=0;for(s=1;s<3;++s){if(w[s]<t){t=w[s];r=s;}}return(r+1);}function H(){var y=this.mChartContextPtr,s=this.mGraphOptionsLegend,v,r,w,x,u,t;v=y.GetProperty(d.DssGraphShowLegendText,m);if(v){s.mShowLegend=(v!==B);}v=y.GetProperty(d.DssGraphMarkerLayout,m);if(v){s.mLegendMarkersStyle=v;}v=y.GetProperty(d.DssGraphLegendLock,m);if(v){s.mLegendPosition=v;if(!y.mManualLayoutMode&&s.mLegendPosition===K.LL_LegendFreeFloat){s.mLegendPosition=K.LL_LegendOnRightSide;}}if(y.mManualLayoutMode){s.mLegendPosition=K.LL_LegendFreeFloat;v=y.GetProperty(d.DssGraphInfoRecalculateLegend,m);if(v){s.mRecalculate=v!==B;if(s.mRecalculate){v=y.GetProperty(Z.DssGraphInfoRecalculateChartFrame,m);if(v){s.mReposition=v!==B;if(s.mReposition){s.mLegendPosition=Q.call(this);}}}}v=y.GetProperty(d.DssGraphAxisAutoFit,m);if(v){s.mAxisLabelsAutoFit=v!==B;}if(s.mAxisLabelsAutoFit){s.mRecalculate=true;s.mReposition=true;s.mLegendPosition=Q.call(this);}}s.mIsByGroup=y.isLegendByGroup();if(!y.mManualLayoutMode||s.mRecalculate){v=y.GetProperty(Z.DssGraphInfoAutosizeHorizontal,m);r=y.GetProperty(Z.DssGraphInfoAutosizeVertical,m);if(v&&r){this.mIsExpanded=v!==B&&r!==B;}this.mIsExpanded=false;}this.mLegendItemCount=W.call(this);u=y.mGraphType;if(u===a.DssGraphTypePareto_Percent){w=false;x=1;v=y.GetProperty(Z.DssGraphUseChartArea,m);if(v){w=v!==B;}if(w){v=y.GetProperty(Z.DssGraphChartAreaNumber,m);if(v){x=v;if(x>this.mLegendItemCount){x=this.mLegendItemCount;}}}this.mLegendItemCount+=x;}else{if(u>=a.DssGraphTypeHiLo_Stock_Chart&&u<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){for(t=0;t<3;++t){v=y.GetProperty(d.DssGraphShowMetric1+t,m);if(v){if(v!==B){this.mLegendItemIndexToStockMetricIndex[this.mLegendItemCount++]=t;v=y.GetProperty(d.DssGraphMetric1Value+t,m);if(v){this.mStockMetricValue[t]=v;}v=y.GetProperty(d.DssGraphMetric1Style+t,m);if(v){this.mStockMetricLayout[t]=v;}}}}}}}mstrmojo.chart.Legend=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Legend",mDatasetPtr:null,mLegendArea:null,mArea:null,mGraphOptionsLegend:null,mStockMetricLayout:null,mStockMetricValue:null,mLegendMarkerLines:null,mItemMargin:0,mEdgeMargin:0,mLegendMarkerSize:0,mIsExpanded:false,mLegendItemCount:0,mLegendItemIndexToStockMetricIndex:null,init:function k(r){this._super(r);this.mDatasetPtr=r.DataSet||null;this.mLegendArea=r.Area?new V.Rect2D({Rect2D:r.Area}):null;this.mArea=r.Area?new V.Rect2D({Rect2D:r.Area}):null;this.mGraphOptionsLegend={mShowLegend:true,mShowSeriesTitles:true,mLegendPosition:K.LL_LegendOnRightSide,mLegendMarkersStyle:p.LMS_LeftOfText,mLegendBoxStyle:S.BS_NOFRAME,mLegendItemsNum:0,mAxisLabelsAutoFit:true,mVertical:true,mRecalculate:false,mReposition:false,mIsByGroup:false};this.mStockMetricLayout=[0,0,0];this.mStockMetricValue=new Array(3);this.mLegendMarkerLines=[];this.mLegendItemIndexToStockMetricIndex={};H.call(this);},GenerateMapAndList:function j(){var w=this.mChartContextPtr,v,s,t,u,r;v=new V.TripleId({ObjectId:e.DssGraphLegendText});s=new V.GraphCollectionObject({TripleId:v,GraphObjectManager:this,CollectionType:L});this.AddToMap(s);t=w.GetFormatFont(new V.TripleId({ObjectId:e.DssGraphLegendText}));s.SetFormatFont(t);X.call(this,t);this.mLegendArea=J.call(this,this.mArea,s);u=w.GetProperty(d.DssGraphLegendBox,m);if(u===null||u===undefined){u=S.BS_NOFRAME;}v=new V.TripleId({ObjectId:e.DssGraphLegendArea});r=new V.FancyBoxObject({TripleId:v,GraphObjectManager:this,BoxStyle:u,Area:this.mLegendArea});this.AddToMapAndList(r);},GetLegendArea:function i(){return this.mLegendArea;},CalculateFrame:function R(v,u,t){var r,s;r=this.GetLegendArea();switch(this.mGraphOptionsLegend.mLegendPosition){case I.DssGraphLegendPositionRight:if(r.width<this.mArea.width*c){t.width=r.x-v-this.mArea.x;}break;case I.DssGraphLegendPositionLeft:if(r.width<this.mArea.width*c){s=this.mArea.x+this.mArea.width;t.x=r.x+r.width+v;t.width=s-t.x;}break;case I.DssGraphLegendPositionBottom:if(r.height<this.mArea.height*c){t.height=r.y-u-this.mArea.y;}break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}},Draw:function b(){var t=this.mGraphObjectList,u=this.mLegendMarkerLines,r,s;t[0].Draw();r=u.length;for(s=0;s<r;++s){u[s].Draw();}r=t.length;for(s=1;s<r;++s){t[s].Draw();}},SetFormatLineOfLegendMarkerLine:function g(y,AB,u){var s=this.mChartContextPtr,v,w,AA,x,r,z;if(u===undefined){u=false;}v=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AB}));if(!v){return false;}w=v.mMarkerPosition;AA=v.mMarkerSize;x=s.mIsGraphMatrix?1:1.75;r=u?new V.Point2D({x:w.x,6:w.y-x*AA}):new V.Point2D({x:w.x-x*AA,y:w.y});z=u?new V.Point2D({x:w.x,y:w.y+x*AA}):new V.Point2D({x:w.x+x*AA,y:w.y});var t=new V.StraightLineObject({TripleId:new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AB}),GraphObjectManager:this,StartPoint:r,EndPoint:z});t.SetFormatLine(y);this.mLegendMarkerLines.push(t);return true;},UpdateFormatForLegendMarker:function o(r,x,u,w,s){if(r<0||r>=this.mLegendItemCount){return ;}w=(w!==undefined)?w:false;s=(s!==undefined)?s:false;var v=new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:r});var t=this.GetGraphObject(v);if(!t){return ;}if(x){t.SetFormatFill(x);}if(u){if(w){this.SetFormatLineOfLegendMarkerLine(u,r,s);}else{t.SetFormatLine(u);}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","TrendLineObject","Rect2D","TripleId","TrendLineObject","ChartContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumValueAxis","EnumTrendLineIndex","EnumAnchorPoint","EnumCollectionType","EnumGraphMajorType","EnumFontRotation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var Z=mstrmojo.chart,V=Z.enums,c=V.EnumCollectionType,C=V.EnumGraphMajorType,X=V.EnumValueAxis,J=V.EnumAnchorPoint,d=Z.gNullTripleId,B=Z.gNullObjectId,R=mstrmojo.chart.model,e=R.enums,I=e.EnumDSSGraphType,K=e.EnumDSSGraphMarkerShape,L=e.EnumDSSGraphProperty,a=e.EnumDSSGraphDataTextPosition,M=e.EnumDSSGraphObject;mstrmojo.chart.Plot=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Plot",mDatasetPtr:null,mLegendPtr:null,mSeriesId:null,mDataArea:null,mTrendLines:null,mPostTrendLineObjects:null,mHasSizeBy:false,mHasColorBy:false,mPartialRendering:false,mClippedElementSize:null,shownDataLabels:[],shownRefLabels:[],dataLabelManager:null,axisOriginLabels:[],DPCount:0,seriesDPCount:[],init:function W(h){this._super(h);this.mSeriesId=[];this.mTrendLines=[[],[]];this.mPostTrendLineObjects=[];var i=this.mChartContextPtr,g=i.GetGraphMatrixContext();this.mHasSizeBy=g.mHasSizeBy;this.mHasColorBy=g.mHasColorBy;this.mPartialRendering=i.mPartialRendering;this.mClippedElementSize={};this.shownDataLabels=[];this.shownRefLabels=[];this.dataLabelManager=null;this.axisOriginLabels=[];if(h.Area){this.mDataArea=new Z.Rect2D({Rect2D:h.Area});}this.DPCount=0;this.seriesDPCount=[];},Draw:function T(g){var h=false;if(g&&g.Skip){g.Skip--;h=true;}this._super();if(!h){this.DrawTrendLinesAndEquationsInArea(this.mDataArea,false);this.DrawTrendLinesAndEquationsInArea(this.mDataArea,true);this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function b(){var g=this.mDataArea;this.DrawTrendLinesAndEquationsInArea(g,false);this.DrawTrendLinesAndEquationsInArea(g,true);},OnRectangleSelection:function H(i,h,g){g=g||0;return h;},SetDataArea:function F(g){if(this.mDataArea===null){this.mDataArea=new Z.Rect2D({Rect2D:g});}else{this.mDataArea.ResetRect(g);}},MoveLabel:function Y(m,p,t,i,g,l){var r,k,o,q,j,s,h,n;if(m===null){return ;}r=m.GetBoundingRect();k=r.width/2;o=r.height/2;q=p;j=t;if(i){s=q;q=j;j=s;}n=q;if(l===a.DssGraphDTPositionOutMin||l===a.DssGraphDTPositionInMin){n=j;}h=i?-1:1;switch(l){case a.DssGraphDTPositionCenter:n=q.MiddleTo(j);break;case a.DssGraphDTPositionInMin:case a.DssGraphDTPositionOutMax:if(g){n.y-=o*h;}else{n.x+=k*h;}break;case a.DssGraphDTPositionOutMin:case a.DssGraphDTPositionInMax:if(g){n.y+=o*h;}else{n.x-=k*h;}break;default:break;}m.MoveTo(n.x,n.y,J.CENTER);},AddLegendMarkerToCollection:function G(h,q,j,m,s,p,n){var i=this.mChartContextPtr,r,k,l,g,o;if(this.mLegendPtr===null||q===null){return ;}if(i.mIsGraphMatrix){return ;}j=j||false;s=s||K.DssGraphMarkerShapeRectangle;n=n||false;if(m===undefined){m=true;}if(p===undefined){p=true;}g=i.mGraphType;r=new Z.TripleId({ObjectId:M.DssGraphLegendMarker,SeriesId:h});k=this.mLegendPtr.GetGraphObject(r);if(k){if(j){l=k;q.AddGraphObject(k,false);if(p&&g!==I.DssGraphTypePareto_Percent){r.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(i.GetFormatLine(r,c.CT_LINE),h,n);}r.mObjectId=M.DssGraphRiser;l.SetFormatLine(i.GetFormatLine(r,c.CT_NO_COLLECTION));l.SetFormatFill(i.GetFormatFill(r,c.CT_DEPTH_LINE_OR_LINE_MARKER));l.mIsShown=m;if(m){l.SetMarkerShape(s);}}else{o=i.GetGraphMajorType();q.AddGraphObject(k);if(o===C.GMT_BUBBLE){if(p){r.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(i.GetFormatLine(r,c.CT_LINE),h);}if(m){l=k;l.SetMarkerShape(s);}}if(g===I.DssGraphTypePareto_Percent||o===C.GMT_GAUGE){if(m){l=k;l.SetMarkerShape(s);}}if(o===C.GMT_STOCK){if(p){r.mObjectId=M.DssGraphRiser;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(i.GetFormatLine(r,c.CT_LINE),h,n);}if(m){l=k;l.SetMarkerShape(s);}}}}},CreateTrendLine:function P(p,o,r,i,k,j,g,m,n,h,l,q){},AdjustTrendLineEquation:function N(h,g){},DrawTrendLinesAndEquationsInArea:function U(g,h){var m=this.mChartContextPtr,k=h?this.mTrendLines[1]:this.mTrendLines[0],j;if(k.length===0){return ;}m.saveState();m.DrawRectangle(g,true);m.Clip();for(j=0;j<k.length;++j){k[j].Draw();}m.RestoreState();for(j=0;j<k.length;++j){var l=k[j].mTextPtr;if(l!==null){l.Draw();}}},DrawPostTrendLineObjects:function f(){var j=this.mPostTrendLineObjects,g=j.length,h;for(h=0;h<g;++h){j[h].Draw();}},LoadTrendLineProperties:function D(i,h){var l=this.mChartContextPtr;if(l.mIsGraphMatrix||!!h){return ;}if(l.mIsGraphMatrix){var g=this.mDatasetPtr.GetTrendLinePropertiesBySeries(i);if(g){h.mRegressionType=g.RegressionType||h.mRegressionType;if(g.Order!==null&&g.Order!==undefined){h.mOrder=g.Order;}if(g.Period!==null&&g.Period!==undefined){h.mPeriod=g.Period;}h.mShowCoefficients=g.ShowCoefficients||h.mShowCoefficients;h.mShowEquation=g.ShowEquation||h.mShowEquation;h.mUserSeriesGraphColor=g.UserSeriesGraphColor||h.mUserSeriesGraphColor;}}else{var j,k=new Z.TripleId({ObjectId:M.DssGraphRiser,SeriesId:i});j=l.GetProperty(L.DssGraphSDRegressionType,k);if(j){h.mRegressionType=j;}j=l.GetProperty(L.DssGraphSDPolyFactor,k);if(j){h.mOrder=j;}j=l.GetProperty(L.DssGraphSDMOVAFactor,k);if(j){h.mPeriod=j;}j=l.GetProperty(L.DssGraphShowSDLinrCorr,k);if(j){h.mShowCoefficients=j;}j=l.GetProperty(L.DssGraphShowSDLinrFormula,k);if(j){h.mShowEquation=j;}k.mObjectId=B;j=l.GetProperty(L.DssGraphCurveColorAsSeries,k);if(j){h.mUserSeriesGraphColor=j;}}},LoadValueAxisInfo:function S(j,g){var m=this.mChartContextPtr,i=this.mSeriesId,h,l,k;if(g){if(m.mIsGraphMatrix){k=this.mDatasetPtr.GetValueAxisBySeries(i[j]);}else{h=m.GetProperty(L.DssGraph2DSplitYAutomatic,d);if(h===null||h===undefined){k=(j%2===0)?X.VA_Y1:X.VA_Y2;}else{l=new Z.TripleId({ObjectId:L.DssGraphRiser,SeriesId:i[j]});h=m.GetProperty(L.DssGraph2DSDSplitY,l);if(h){k=h?X.VA_Y2:X.VA_Y1;}}}}else{k=X.VA_Y1;}return k;},GetDataset:function Q(){return this.mDatasetPtr;},SetDataset:function O(g){this.mDatasetPtr=g;},AddSeries:function E(g){this.mSeriesId.push(g);},GetMaxElementOffsetClippedByBoundary:function A(h,i){var g={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},j=this.mChartContextPtr;if(j.IsBarChart()||j.mGraphType===I.DssGraphTypeGridChart){return g;}if(j.IsLineChart()||j.IsAreaChart()){return g;}return g;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","TripleId","Plot","GridMap","LabelInfo","TextObject","StraightLineObject","PolyLineObject","NumberObject","GraphCollectionObject","MarkerObject","DataLabelManager","GMDataLabelInfo","ChartConstants","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumCollectionType","EnumAnchorPoint","EnumImageUsage","EnumFontRotation","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumDSSGraphDataTextShowType","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphDataTextPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresCls("mstrmojo.VisUtility");var An=mstrmojo.chart;var Ao=An.gModuleMain,Ai=An.ChartConstants,AN=mstrmojo.VisUtility,R=An.enums,AK=R.EnumCollectionType,Aj=R.EnumGraphMajorType,A0=R.EnumAnchorPoint,M=R.EnumFontRotation,Ah=R.EnumGraphMatrixMarkerTypeInChart,d=R.EnumGraphMatrixElementSizeMode,AM=R.EnumImageUsage,q=R.EnumGraphMatrixPiePlotType,l=An.common,AB=An.gNullTripleId,Aq=An.gNullGroupId,Af=mstrmojo.chart.model,AR=Af.enums,A3=AR.EnumDSSGraphProperty,Q=AR.EnumDSSGraphRegressionType,Ae=AR.EnumDSSGraphDataTextPosition,Ac=AR.EnumDSSGraphDataTextShowType,Az=AR.EnumDSSGraphDataTextPosition,A4=AR.EnumDSSGraphObject,As=AR.EnumDSSExtraGraphProperty,c=AR.EnumShapeType,A7=AR.EnumDSSGraphMarkerShape;var F=-1,A6=0.7,AH=2,J=3,z=1,x=2,w=3,u=4,t=5,s=6,b=1,A2=1,O=2,A1=3,L=4;var Ad=new An.Point2D();function j(BE,BD){var BF;if(BE.cannotFitVertically===true&&BD.cannotFitVertically===false){return 1;}if(BE.cannotFitVertically===false&&BD.cannotFitVertically===true){return -1;}if(BE.cannotFitHorizontally===true&&BD.cannotFitHorizontally===false){return 1;}if(BE.cannotFitHorizontally===false&&BD.cannotFitHorizontally===true){return -1;}BF=BE.overlapRefLabelCount-BD.overlapRefLabelCount;if(BF<0){return -1;}else{if(BF>0){return 1;}else{BF=BE.overlapRefLineCount-BD.overlapRefLineCount;if(BF<0){return -1;}else{if(BF>0){return 1;}else{BF=BE.overlapDataLabelCount-BD.overlapDataLabelCount;if(BF<=0){return -1;}else{return 1;}}}}}}function At(){var BD={ConnectDataPoint:false,ShowDataLabel:false,MarkerSize:33,MarkerShape:4,ValueAxisIndex:0,SeriesID:0,IsNullData:[],TrendLineOptions:{mRegressionType:Q.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true}};return BD;}function p(BI){var BF,BM=this.labelMatrix.length,BD=this.mDataArea.width,BL=this.mDataArea.height,BJ,BE=this.mChartContextPtr,BH=0.25;if(BE.mIsGraphMatrix){var BG=BE.GetGraphMatrixContext(),BK=BG.mConstants.FixedTickerSize;if(BG.mMarkerShape===A7.DssGraphMarkerShapeGMTick){BL=BK;BD=this.minRadius*BH;}else{BL=BD=this.minRadius*BH;}}else{for(BF=0;BF<BM;++BF){BJ=this.labelMatrix[BF].Label.GetBoundingRectNoRotation(true);BD=Math.min(BJ.width,BD);BL=Math.min(BJ.height,BL);if(this.isBubbleChart){BD=Math.min(this.labelMatrix[BF].HostMarker.width,BD);BL=Math.min(this.labelMatrix[BF].HostMarker.height,BL);}}if(!this.isBubbleChart){BD=Math.min(this.labelMatrix[0].HostMarker.width,BD);BL=Math.min(this.labelMatrix[0].HostMarker.height,BL);}if(BD>1){BD=Math.round(BD*BH);}if(BL>1){BL=Math.round(BL*BH);}}BI.width=Math.max(BD,1);BI.height=Math.max(BL,1);}function G(BD){return 3;}function AC(BH,BI){var BF=BI.Size,BD=BI.Position,BE=BF+BD.y<BH.y||BD.y-BF>BH.y+BH.height,BG=BF+BD.x<BH.x||BD.x-BF>BH.x+BH.width;return !BG&&!BE;}function U(BL){var BE=this.mChartContextPtr,BG,BD=5;if(BE.mPartialRendering===false){return false;}if(BE.mIsGraphMatrix){BG=BE.GetGraphMatrixContext();BD=BG.getPadding(Ai.kDataLabel);if(AC.call(this,BE.mRenderingWindow,BL)===false){return true;}}if(this.shapeCanvas===null){var BI=new An.Rect2D();p.call(this,BI);this.shapeCanvas=new An.GridMap({Rect:this.mDataArea,Unit:BI,MatrixType:1,dataLabelPadding:BD});if(F<0){F=G.call(this,1);}}var BJ,BK=this.shapeCanvas;if(BK.veryDense()){return true;}BJ=BK.ToInspectedMetric(BL);if(BJ.Min>=F-1||((BJ.Occupied/BJ.Total)>=F-1&&BJ.Min>0)){return true;}var BH=BL.BoundingBox,BF=BL.Position,BM=BL.Size;switch(BL.Shape){case c._CIRCLE:BK.UpdateMatrixCircle(BF,BM,true);break;case c._PIE:BK.UpdateMatrixCircle(BF,BM,true);if(BL.ExclusiveRect){BK.UpdateMatrixCircle(BF,BM*A6,false);}break;case c._TICKER:case c._RECTANGLE:BK.UpdateMatrixRect(BH,true);break;default:console.alert("Bubble partial rendering: shape not support yet");break;}return false;}function H(BJ,BK,BD){var BE=this.mChartContextPtr,BH=BE.GetGraphMatrixContext(),BL,BI,BO;switch(BJ){case A7.DssGraphMarkerShapeGMTick:var BM=Math.round(BH.mConstants.FixedTickerSize*0.5),BN=Math.round(0.5*BD);BL=new An.Rect2D();BL.x=BK.x-BN;BL.y=BK.y-BM;BL.width=2*BN;BL.height=2*BM;BI=c._TICKER;break;case A7.DssGraphMarkerShape2DPie:case A7.DssGraphMarkerShape2DRingPie:var BF=0;if(BJ===A7.DssGraphMarkerShape2DRingPie){BF=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new An.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BE,Layout:BF,MaxRadius:this.maxUnitRadius,PlotType:q.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}var BG=this.mPieRenderer.GetPieRadius(0,0,0);BL=BE.transformToRect(BK,BG,true);BI=c._PIE;if(BF===1){BO=BE.transformToRect(BK,BG*A6,true);}break;case A7.DssGraphMarkerShapeSquare:case A7.DssGraphMarkerShapeRectangle:BL=BE.transformToRect(BK,BD,true);BI=c._RECTANGLE;break;default:BL=BE.transformToRect(BK,BD,true);BI=c._CIRCLE;break;}return{BoundingBox:BL,Shape:BI,ExclusiveRect:BO};}function Ax(BG,BE,BF){var BH,BI,BD;BH=this.mDatasetPtr.GetData(this.VecSeriesInfo[BG].SeriesID,BE,0);if(BH===null){return false;}BD=this.xAxis.GetPositionByValue(BH);if(BD===null){return false;}BF.x=BD;BH=this.mDatasetPtr.GetData(this.VecSeriesInfo[BG].SeriesID,BE,1);if(BH===null){return false;}BI=(this.VecSeriesInfo[BG].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;BD=BI.GetPositionByValue(BH);if(BD===null){return false;}BF.y=BD;return true;}function BA(BE,BL){var BO,BM,BD=this.mChartContextPtr,BI=BD.GetGraphMatrixContext(),BF=this.mDatasetPtr,BG=this.VecSeriesInfo,BK,BN,BH=c._CIRCLE,BJ=BI.mMarkerShape;if(BD.mIsGraphMatrix){if(this.isBubbleChart){BK=BF.GetSizeByData(this.VecSeriesInfo[BE].SeriesID,BL);if(BK===null){return null;}BN=this.maxUnitRadius;if(BJ===A7.DssGraphMarkerShapeGMTick){BH=c._TICKER;BN=BI.GetScaledSize(BK,BN,BH);}else{if(BJ===A7.DssGraphMarkerShape2DPie||BJ===A7.DssGraphMarkerShape2DRingPie){BH=c._PIE;BN=BI.GetScaledSize(BK,BN,BH);BN=Math.max(BN,BI.mConstants.MinimalSize.Pie);}else{if(BJ!==A7.DssGraphMarkerShapeCircle){BH=c._SQUARE;}BN=BI.GetScaledSize(BK,BN,BH);}}BO=BN;this.maxRadius=Math.max(this.maxRadius,BN);this.minRadius=Math.min(this.minRadius,BN);}else{BO=this.maxUnitRadius;this.minRadius=this.maxRadius=this.maxUnitRadius;}}else{if(this.isBubbleChart){BM=0;BK=BF.GetProperty(A3.DssGraphMarkerSize,AB);if(BK){BM=BK;}BK=BF.GetData(this.VecSeriesInfo[BE].SeriesID,BL,2);if(BK===null){BG[BE].IsNullData[BL]=true;}else{BG[BE].IsNullData[BL]=false;BO=this.zAxis.ValueToBubbleSize(BM,BK);}}else{BO=BG[BE].MarkerSize;}}if(BO){BO=Math.max(BO,1);BO=Math.floor(BO);}return BO;}function g(BF,BE,BM,BG){var BL,BH,BD,BI,BJ,BK=null;if(BM===0){BL=this.xAxis;}else{if(BM===1){BL=(this.VecSeriesInfo[BF].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;}else{if(BM===2){BL=this.zAxis;}}}if(BL===null){return BK;}BH=this.mDatasetPtr.GetData(this.VecSeriesInfo[BF].SeriesID,BE,BM);if(BH===null){return BK;}BD=BL.GetNumberFormat();BI=new An.TripleId({ObjectId:A4.DssGraphDataText,SeriesId:this.VecSeriesInfo[BF].SeriesID,GroupId:BE});BJ=new An.NumberObject({TripleId:BI,GraphObjectManager:this,Number:BH,NumberFormat:BD,GraphCollectionObject:BG,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:BM});if(BJ!==null){BK=BJ.mText;}return BK;}function Ag(BI,BD,BE,BH){var BG,BF;BG=BI.GetBoundingRectNoRotation();BF=BG;BI.SetRect(BF);return Math.sqrt((BF.x-BD.x)*(BF.x-BD.x)+(BF.y-BD.y)*(BF.y-BD.y));}function AG(BI,BM,BS,BP){var BN=false,BK=false,BL=2,BO,BD=0,BH,BR=0,BG=0,BF,BQ,BE,BJ=this.isSmarted?BP:this.labelLocation;switch(BS){case M.FR_90:case M.FR_270:BN=true;break;case M.FR_45:case M.FR_315:BK=true;break;default:break;}if(BK){BL=1.414;}BO=BI.GetBoundingRectNoRotation();if((BJ===Ae.DssGraphDTPositionOutMin)||(BJ===Ae.DssGraphDTPositionInMin)){BD=BK?BM.height/2+BM.width/2:BM.width;}else{BD=BK?BM.width/2+BM.height/2:BM.height;}BH=BD;switch(BJ){case Ae.DssGraphDTPositionCenter:BR=BG=0;break;case Ae.DssGraphDTPositionOutMin:BR=1;BH+=(BN||BK)?BO.Height/BL:BO.Width/2;break;case Ae.DssGraphDTPositionInMin:BR=-1;BH+=(BN||BK)?BO.Height/BL:BO.Width/2;break;case Ae.DssGraphDTPositionInMax:BG=-1;BE=BN?BO.Width:BO.Height;BH+=(BN||BK)?BE/BL:BO.Height/2;break;case Ae.DssGraphDTPositionOutMax:BG=1;BE=BN?BO.Width:BO.Height;BH+=(BN||BK)?BE/BL:BO.Height/2;break;default:break;}BF=BM.GetCenter().x+BR*BH;BQ=BM.GetCenter().y+BG*BH;BI.MoveTo(BF,BQ,A0.CENTER);return BD;}function AQ(BH,BK,BF,BE){var BD=BF.GetCenter(),BJ=(BE.y+BE.height-BD.y)<0,BL=(BE.x+BE.width-BD.x)<0,BI=(BE.x-BD.x)*(BE.x+BE.width-BD.y),BG=(BE.y-BD.y)*(BE.y+BE.height-BD.y);if(BG<=0){BH.x=BL?BF.x:BF.x+BF.width;BH.y=BL?Math.round(BF.y+0.5*BF.height):Math.round(BF.y+0.5*BF.height);BK.y=BD.y;BK.x=BL?BE.x+BE.width:BE.x;}else{BH.x=BJ?Math.round(BF.x+0.5*BF.width):Math.round(BF.x+0.5*BF.width);BH.y=BJ?BF.y:BF.y+BF.height;if(BI<=0){BK.x=BD.x;BK.y=BJ?BE.y+BE.height:BE.y;}else{if(BL){BK.x=BJ?BE.x+BE.width:BE.x+BE.width;BK.y=BJ?BE.y+BE.height:BE.y;}else{BK.x=BJ?BE.x:BE.x;BK.y=BJ?BE.y+BE.height:BE.y;}}}}function BC(BF,BE,BI,BJ,BH){var BG=0,BD=0;switch(BH){case Ae.DssGraphDTPositionOutMin:BG=1;BF.x=BI.x+BI.width;BF.y=BI.y+0.5*BI.height;BJ-=BI.width/2;break;case Ae.DssGraphDTPositionInMin:BG=-1;BF.x=BI.x;BF.y=BI.y+0.5*BI.height;BJ-=BI.width/2;break;case Ae.DssGraphDTPositionInMax:BD=-1;BF.x=BI.x+0.5*BI.width;BF.y=BI.y;BJ-=BI.height/2;break;case Ae.DssGraphDTPositionOutMax:BD=1;BF.x=BI.x+0.5*BI.width;BF.y=BI.y;BJ-=BI.height/2;break;}BE.x=BF.x+BG*BJ;BE.y=BF.y+BD*BJ;}function Aa(BG,BJ,BL,BF){var BD,BH,BK,BI,BE;if(BG===null){return ;}BD=AG.call(this,BG,BJ,BL,this.labelLocation);if(this.dataLabelLine){BH=new An.Point2D();BK=new An.Point2D();BC.call(this,BH,BK,BJ,BD,this.labelLocation);BI=new An.TripleId({ObjectId:A4.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3});BE=new An.StraightLineObject({TripleId:BI,GraphObjectManager:this,Start:BH,End:BK});this.mGraphObjectList.push(BE);BF.AddGraphObject(BE);}}function Ab(BJ,BI,BH){var BE=this.mDatasetPtr,BK=BE.dataLabelStyle,BG="",BF,BD,BL;switch(BK){case AH:BF=g.call(this,BJ,BI,0,BH);BD=g.call(this,BJ,BI,1,BH);BG="("+BF+", "+BD+")";break;case J:BG=BE.GetTextLabel(this.VecSeriesInfo[BJ].SeriesID,BI);break;}BL=new An.TextObject({TripleId:new An.TripleId({ObjectId:A4.DssGraphDataText,SeriesId:this.VecSeriesInfo[BJ].SeriesID,GroupId:BI}),GraphObjectManager:this,GraphCollectionObject:BH});BL.SetText(BG);this.mPostTrendLineObjects.push(BL);return BL;}function Av(BJ){var BF,BG=this.VecSeriesInfo.length,BD=BJ.length,BI,BH;if(BD>0){BJ.splice(0,BD);}for(BF=0;BF<BG;++BF){var BE=this.VecSeriesInfo[BF].ShowDataLabel;if(BE){BI=new An.TripleId({ObjectId:A4.DssGraphDataText,SeriesId:this.VecSeriesInfo[BF].SeriesID});BH=new An.GraphCollectionObject({TripleId:BI,GraphObjectManager:this,CollectionType:AK.CT_TEXT});BJ.push(BH);this.AddToMap(BH);}}}function K(BK){var BG,BJ=this.VecSeriesInfo,BI=BJ.length,BF=BK.length,BD,BH;if(BF>0){BK.splice(0,BF);}for(BG=0;BG<BI;++BG){var BE=BJ[BG].ShowDataLabel;if(BE){BD=new An.TripleId({ObjectId:A4.DssGraphDataText,SeriesId:BJ[BG].SeriesID});BH=new An.GraphCollectionObject({TripleId:BD,GraphObjectManager:this,CollectionType:AK.CT_TEXT});BK.push(BH);this.AddToMap(BH);}}}function v(){if(this.mChartContextPtr.mIsGraphMatrix){return(this.xAxis&&this.xAxis.mOptions.mUseCustomMinMax)||(this.y1Axis&&this.y1Axis.mOptions.mUseCustomMinMax)||(this.y2Axis&&this.y2Axis.mOptions.mUseCustomMinMax);}return false;}function AY(BE){var BD=this.mDataArea,BF=v.call(this);if(BF){if(BE.x<BD.x||BE.x+BE.width>BD.x+BD.width){return false;}if(BE.y<BD.y||BE.y+BE.height>BD.y+BD.height){return false;}}return true;}function AW(BO,BT){var BM=this.VecSeriesInfo,BI=BM.length,BE=this.waitingList,BH,BG,BQ=null,BL=0,BS,BR,BK,BP;if(BE&&this.waitingList.length){var BN=this.waitingList,BJ=BN.length,BF;this.hiddenMarkers=this.hiddenMarkers||[];BQ=this.hiddenMarkers;for(BH=0;BH<BJ;BH++){BF=BN[BH].Id;BQ[BF.mSeriesId]=BQ[BF.mSeriesId]||[];BQ[BF.mSeriesId][BF.mGroupId]=1;}}for(BH=0;BH<BI;++BH){BL=0;BS=BM[BH].SeriesID;BR=BM[BH].IsNullData.length;for(BG=0;BG<BR;++BG){if(BQ&&BQ[BS][BG]!==undefined){if(!BM[BH].IsNullData[BG]){++BL;}continue;}var BD=BM[BH].ShowDataLabel;if(!BD){this.standAloneMarkers.push(BO[BH][BL++]);continue;}if(!BM[BH].IsNullData[BG]){BK=new An.GMDataLabelInfo();BK.isValid=true;BK.GroupId=BG;BK.SeriesId=BS;BK.HostMarkerBound=BO[BH][BG];BK.HostMarkerPoint=BK.HostMarkerBound.GetCenter();BK.Label=Ab.call(this,BH,BG,BT[BH]);if(!AY.call(this,BK.HostMarkerBound)){BK.isValid=false;continue;}if(BK.Label===null||BK.Label===undefined){BK.isValid=false;continue;}else{}this.mDataLabels.push(BK);BT[BH].AddGraphObject(BK.Label);}}}delete this.hiddenMarkers;}function C(BF){var BI,BH,BG=BF.length,BE=0,BD=[];for(BI=0;BI<BG;++BI){if(BF[BI].length>0){BE=BF[BI].length;for(BH=0;BH<BE;++BH){BD.push(BF[BI][BH]);}}}return BD;}function A9(BE){var BD=this.mDataArea;if(BE.x<BD.x||BE.y<BD.y){return true;}return(BE.x+BE.width>BD.x+BD.width||BE.y+BE.height>BD.y+BD.height);}function W(BE,BH,BI,BD){var BG=Math.max(BE.y,BH.y),BF=BE.y+BH.y-BG;if(BF>BD.y||BG<BD.y){return false;}BG=Math.max(BE.x,BH.x);BF=BE.x+BH.x-BG;return !(BF>Math.max(BI.x,BD.x)||BG<Math.min(BI.x,BD.x));}function AI(BE,BH,BI,BD){var BG=Math.max(BE.x,BH.x),BF=BE.x+BH.x-BG;if(BF>BD.x||BG<BD.x){return false;}BG=Math.max(BE.y,BH.y);BF=BE.y+BH.y-BG;return !(BF>Math.max(BI.y,BD.y)||BG<Math.min(BI.y,BD.y));}function Z(BH,BI,BG){var BE=true,BD=BG.length,BF;for(BF=0;BF<BD;++BF){BE=(BF===0)||(BF===2);if(BE){if(W.call(this,BH,BI,BG[BF],BG[(BF+1)%BD])){return true;}}else{if(AI.call(this,BH,BI,BG[BF],BG[(BF+1)%BD])){return true;}}}return false;}function f(BQ,BP){var BF=1,BL,BU,BO,BM,BG,BV,BH,BS,BJ=[],BN,BK,BI,BT,BE,BD,BR;switch(BQ.LabelRotation){case M.FR_NORMAL:case M.FR_CUSTOME:case M.FR_90:case M.FR_180:case M.FR_270:case M.FR_HOTEL:break;case M.FR_45:break;case M.FR_315:BF=-1;break;}BL=BQ.Label.GetBoundingRectNoRotation();BU=BL.GetCenter();BO=0.5*BL.width;BM=0.5*BL.height;BG=Math.sqrt(BO*BO+BM*BM);for(BR=0;BR<4;++BR){BH=(BR===0||BR===3)?-1:1;BS=(BR===0||BR===1)?-1:1;BV=new An.Point2D({x:BH*BO,y:BS*BM});BJ.push(BV);}for(BR=0;BR<4;BR++){BN=(BR===0||BR===3)?180:0;BK=Math.atan(BJ[BR].x/BJ[BR].y);BI=Ao.RadianToDegree(BK);BI+=(BN+BF*45);BT=Ao.DegreeToRadian(BI);BE=Math.round(BG*Math.cos(BT))+BU.x;BD=Math.round(BG*Math.sin(BT))+BU.y;BV=new An.Point2D({x:BE,y:BD});BP.push(BV);}}function e(BF,BI,BJ,BH){var BE=BI.length,BD=0,BG=0;BJ=BJ||false;BH=BH||false;if(!BH){for(BG=0;BG<BE;++BG){if(BF.HasIntersection(BI[BG])){++BD;}}}else{AN.visPrint("Checking label overlap with tilt targets has not been implemented yet.");}return BD;}function o(BK,BD,BF){var BI=0,BE=BD.length,BM=((BK.LabelRotation===M.FR_45)||(BK.LabelRotation===M.FR_315)),BH=[],BG=0,BL,BJ;BF=BF||false;if(BM){f.call(this,BK,BH);for(BG=0;BG<BE;++BG){BL=[];BL.push(BD[BG].GetBottomLeft());BL.push(BD[BG].GetBottomRight());BL.push(BD[BG].GetTopRight());BL.push(BD[BG].GetTopLeft());if(!BF){if(Z.call(this,BH[0],BH[1],BL)||Z.call(this,BH[1],BH[2],BL)||Z.call(this,BH[2],BH[3],BL)||Z.call(this,BH[3],BH[0],BL)){++BI;}}else{AN.visPrint("We currently do not support tilt rectangle against tilt targets");}}}else{BJ=BK.Label.GetBoundingRect();BI=e.call(this,BJ,BD,false,BF);}return BI;}function B(BJ){var BI,BF,BE=this.mDataArea,BH,BD,BK,BG;BH=this.standAloneMarkers.length;BD=new An.Rect2D();for(BF=0;BF<BH;++BF){BD.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.standAloneMarkers[BF],BE,BD)){BJ.UpdateMatrixRect(BD);}}BH=this.labelMatrix.length;for(BI=0;BI<BH;++BI){BD.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.labelMatrix[BI].HostMarker,BE,BD)){BJ.UpdateMatrixRect(BD);}if(this.labelMatrix[BI].IsPut){BK=this.labelMatrix[BI].Label.GetBoundingRectNoRotation();if(this.mChartContextPtr.RectangleIntersection(BK,BE,BD)){BJ.UpdateMatrixRect(BD,true,this.labelMatrix[BI].LabelRotation);}}}BG=Math.round(0.95*BJ.XCount*BJ.YCount);return BJ.Metric<BG;}function N(BG,BK,BJ){var BE=new An.Point2D(),BF=new An.Point2D(),BD=new An.TripleId({ObjectId:A4.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3}),BI,BH;if(!BG.IsValid){return false;}if(BG.IsPut){if(BG.SuggestedStart===Ae.DssGraphDTPositionPieSmart){if(this.dataLabelLine||(!this.dataLabelLine&&BG.IsMoved(this.labelLocation))){BI=BG.Label.GetBoundingRect();AQ.call(this,BE,BF,BG.HostMarker,BI);}else{return false;}}else{if(this.dataLabelLine||(!this.dataLabelLine&&BG.IsMoved(this.labelLocation))){BC.call(this,BE,BF,BG.HostMarker,BJ,BG.SuggestedStart);}else{return false;}}BH=new An.StraightLineObject({TripleId:BD,GraphObjectManager:this,StartPoint:BE,EndPoint:BF,GraphCollectionObject:BK});this.mGraphObjectList.push(BH);BK.AddGraphObject(BH);return true;}if(this.dataLabelLine){BC.call(this,BE,BF,BG.HostMarker,BJ,BG.SuggestedStart);}else{return false;}BH=new An.StraightLineObject({TripleId:BD,GraphObjectManager:this,StartPoint:BE,EndPoint:BF,GraphCollectionObject:BK});this.mGraphObjectList.push(BH);BK.AddGraphObject(BH);return true;}function a(BG,BH){var BL=this.labelMatrix.length,BJ=new An.Point2D(),BM=new An.Rect2D(),BE,BK,BD,BI,BF;for(BI=0;BI<BL;++BI){BF=this.labelMatrix[BI];if(!BF.IsPut){BE=BF.Label.GetBoundingRectNoRotation();BK=BG.IsAccomdatableConsiderRotation(BF.HostMarker,BE,BJ,BF.LabelRotation);if(BK){BF.IsPut=true;BF.SuggestedStart=Az.DssGraphDTPositionPieSmart;BD=Ag.call(this,BF.Label,BF.HostMarker,BJ,BF.LabelRotation);BE=BF.Label.GetBoundingRectNoRotation();N.call(this,BF,BH,BD);this.AddToMap(BF.Label);BM.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(BE,this.mDataArea,BM)){BG.UpdateMatrixRect(BM,true,BF.LabelRotation);}}}}return true;}function Ap(BI){var BF,BK,BD,BH,BJ,BG,BE=this.VecSeriesInfo.length;BD=this.isBubbleChart?A4.DssGraphRiser:A4.DssGraphDataLine;BH=this.isBubbleChart?AK.CT_GENERAL_SHAPE:AK.CT_LINE;for(BF=0;BF<BE;++BF){BK=this.VecSeriesInfo[BF];BJ=new An.TripleId({ObjectId:BD,SeriesId:BK.SeriesID,GroupId:Aq});BG=new An.GraphCollectionObject({TripleId:BJ,GraphObjectManager:this,CollectionType:BH});BI.push(BG);this.AddToMap(BI[BF]);if(!this.mChartContextPtr.mIsGraphMatrix){this.AddLegendMarkerToCollection(BK.SeriesID,BI[BF],!this.isBubbleChart,true,BK.MarkerShape,BK.ConnectDataPoint);}}}function A8(BG){var BE=this.labelMatrix.length,BJ,BI,BF,BH,BD;for(BH=0;BH<BE;++BH){BD=this.labelMatrix[BH];BJ=BD.Label.mTripleId;BF=M.FR_NORMAL;BI=this.mChartContextPtr.GetProperty(A3.DssGraphFontRotation,BJ);if(BI){BF=BI;}if(!BD.IsPut){Aa.call(this,BD.Label,BD.HostMarker,BF,BG);this.AddToMap(BD.Label);}}}function AX(BI,BG,BD,BE){var BF,BH;if(this.labelLocation===Ae.DssGraphDTPositionOutMin){BI.SuggestedStart=Ae.DssGraphDTPositionInMin;}BH=AG.call(this,BI.Label,BI.HostMarker,BI.LabelRotation,BI.SuggestedStart);BF=BI.ToRectangle();if(A9.call(this,BF)||(o.call(this,BI,BG)>0)||(o.call(this,BI,this.standAloneMarkers)>0)||(o.call(this,BI,BD)>0)){if(BI.SuggestedStart>=Ae.DssGraphDTPositionOutMax){return false;}++BI.SuggestedStart;if(BI.SuggestedStart===this.labelLocation){++BI.SuggestedStart;}if(BI.SuggestedStart>Ae.DssGraphDTPositionOutMax){return false;}return AX.call(this,BI,BG,BD,BE);}BD.push(BF);BI.IsPut=true;N.call(this,BI,BE,BH);return true;}function AD(BJ,BM,BE){var BL=this.labelMatrix.length,BH=0,BI,BD,BK,BG,BF;for(BF=0;BF<BL;++BF){BI=this.labelMatrix[BF];BD=AG.call(this,BI.Label,BI.HostMarker,BI.LabelRotation,this.labelLocation);BK=BI.ToRectangle();BG=(A9.call(this,BK)||(o.call(this,BI,BJ)>0)||(o.call(this,BI,this.standAloneMarkers)>0)||(o.call(this,BI,BM)>0));if(!BG){BM.push(BK);BI.IsPut=true;BI.SuggestedStart=this.labelLocation;N.call(this,BI,BE,BD);++BH;this.AddToMap(BI.Label);continue;}if(AX.call(this,BI,BJ,BM,BE)){++BH;this.AddToMap(BI.Label);}else{BI.SuggestedStart=this.labelLocation;}}return BH;}function r(BJ,BO){var BL,BG=this.VecSeriesInfo.length,BI,BF,BE=0,BN,BM,BH,BK;for(BF=0;BF<BG;++BF){BL=this.VecSeriesInfo[BF];BI=0;BN=this.VecSeriesInfo[BF].SeriesID;BM=this.VecSeriesInfo[BF].IsNullData.length;for(BE=0;BE<BM;++BE){var BD=this.VecSeriesInfo[BF].ShowDataLabel;if(!BD){this.standAloneMarkers.push(BJ[BF][BI++]);continue;}if(!this.VecSeriesInfo[BF].IsNullData[BE]){BH=new An.LabelInfo();BH.IsValid=true;BH.GroupId=BE;BH.SeriesId=BN;BH.HostMarker=BJ[BF][BI++];BH.Label=Ab.call(this,BF,BE,BO[BF]);if(BH.Label===null){BH.IsValid=false;continue;}else{}this.labelMatrix.push(BH);BO[BF].AddGraphObject(BH.Label);}}}}function S(BO,BF){var BM,BK=this.VecSeriesInfo.length,BI,BG=0,BE,BJ,BP,BR=0,BL,BN,BQ,BH;for(BI=0;BI<BK;++BI){BM=this.VecSeriesInfo[BI];var BD=this.mDatasetPtr.showSeriesDatalabel(BM.SeriesID);if(BD){BJ=new An.TripleId({ObjectId:A4.DssGraphDataText,SeriesId:BM.SeriesID});BE=new An.GraphCollectionObject({TripleId:BJ,GraphObjectManager:this,CollectionType:AK.CT_TEXT});BP=BO[BI];BR=0;BN=BM.IsNullData.length;for(BG=0;BG<BN;++BG){if(BM.IsNullData[BG]){continue;}BQ=Ab.call(this,BI,BG,BE);BE.AddGraphObject(BQ);this.AddToMap(BQ);BJ=BQ.mTripleId;BH=M.FR_NORMAL;BL=this.mChartContextPtr.GetProperty(A3.DssGraphFontRotation,BJ);if(BL){BH=BL;}Aa.call(this,BQ,BP[BR++],BH,BF);}if(BE.GetCollectionSize()>0){this.AddToMap(BE);}}}}function A(){var BJ=this.mChartContextPtr,BG=this.dataLabelManager,BF,BD=this.mDataLabels,BE=BD.length,BH=[],BI=new An.Rect2D({x:0,y:0,width:BJ.mGraphWidth,height:BJ.mGraphHeight});if(BG===null||BG===undefined){BG=this.dataLabelManager=new An.DataLabelManager({DataArea:BI});BG.ChartContext=BJ;}BG.RectangleObjects=BG.RectangleObjects.concat(this.standAloneMarkers);for(BF=0;BF<BE;++BF){BH.push(BD[BF].HostMarkerBound);}BG.RectangleObjects=BG.RectangleObjects.concat(BH);return BG;}function AU(){var BD=this.mDataLabels,BF=BD.length,BE;for(BE=0;BE<BF;++BE){BD[BE].CenterXOffset=BD[BE].HostMarkerBound.width/2;BD[BE].CenterYOffset=BD[BE].HostMarkerBound.height/2;}}function P(){var BT=this.VecSeriesInfo.length,BE,BO,BR,BS,BF,BJ,BI,BH,BN,BU,BP,BQ,BK=this.mDatasetPtr,BG=this.mChartContextPtr,BD,BL,BM;if(this.mTrendLineObjects===null){this.mTrendLineObjects=[];}if(BK.isBare(BG.IsPieChart())){return ;}for(BR=0;BR<BT;++BR){BO=this.VecSeriesInfo[BR];BE=BO.SeriesID;BH=this.mDatasetPtr.GetTrendLineOfSeries(BE);BS=BO.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BI=new An.TripleId({ObjectId:A4.DssGraphTrendLine,SeriesId:BE});if(BH){BN=BH.getTrendLineType();if(BN!==Q.DssGraphRegressionNone){BU=BH.getIdentity();BF=BH.getTrendLineValuesWithForecast();BJ=BH.getTrendLineValues();if(E(BJ)<=1){continue;}BP=BH.getCoefficients(true);BQ=BP.length-1;if(BF&&BF.length){BD={mRegressionType:BN,mOrder:BQ,mPeriod:0,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeasonal:false};BL=new An.TrendLineObject({TripleId:BI,GraphObjectManager:this,GraphCollectionObject:null,TrendLineOptions:BD,XAxis:this.xAxis,YAxis:BS,TrendLineValues:BF,Coefficients:BP,IsVertical:true,Identity:BU});if(BL!==undefined&&BL!==null){BM=BL.CreateTrendLine();if(BM!==undefined&&BM!==null){this.mTrendLineObjects.push(BM);}}}}}}}function AA(BG,BN,BJ,BD,BF,BM,BL,BI,BH,BK){var BE={};BE.rect=new An.Rect2D({x:0,y:0,width:BD+2*BH,height:BN+2*BH});switch(BG){case z:if(BK){BE.xOffset=BM+BH+BF;BE.yOffset=BH+BJ;BE.rect.x=BM;BE.rect.y=0;}else{BE.xOffset=BI-BH-BF;BE.yOffset=BM-BH-BJ;BE.rect.x=BI-2*BH-BD;BE.rect.y=BM-2*BH-BN;}break;case x:if(BK){BE.xOffset=BM-BH-BF;BE.yOffset=BH+BJ;BE.rect.x=BM-2*BH-BD;BE.rect.y=0;}else{BE.xOffset=BI-BH-BF;BE.yOffset=BM+BH+BJ;BE.rect.x=BI-2*BH-BD;BE.rect.y=BM;}break;case w:if(BK){BE.xOffset=BM+BH+BF;BE.yOffset=BL/2;BE.rect.x=BM;BE.rect.y=BL/2-BH-BJ;}else{BE.xOffset=BI/2;BE.yOffset=BM-BH-BJ;BE.rect.x=BI/2-BH-BF;BE.rect.y=BM-2*BH-BN;}break;case u:if(BK){BE.xOffset=BM-BH-BF;BE.yOffset=BL/2;BE.rect.x=BM-2*BH-BD;BE.rect.y=BL/2-BH-BJ;}else{BE.xOffset=BI/2;BE.yOffset=BM+BH+BJ;BE.rect.x=BI/2-BH-BF;BE.rect.y=BM;}break;case t:if(BK){BE.xOffset=BM+BH+BF;BE.yOffset=BL-BH-BJ;BE.rect.x=BM;BE.rect.y=BL-2*BH-BN;}else{BE.xOffset=BH+BF;BE.yOffset=BM-BH-BJ;BE.rect.x=0;BE.rect.y=BM-2*BH-BN;}break;case s:if(BK){BE.xOffset=BM-BH-BF;BE.yOffset=BL-BH-BJ;BE.rect.x=BM-2*BH-BD;BE.rect.y=BL-2*BH-BN;}else{BE.xOffset=BH+BF;BE.yOffset=BM+BH+BJ;BE.rect.x=0;BE.rect.y=BM;}break;}return BE;}function Ak(BH,BO,BK,BI,BF,BD){var BL=BH.rect,BJ,BG,BE,BM,BN;if(BL.y<0||BL.y+BL.height>BO){BH.cannotFitVertically=true;return ;}if(BL.x<0||BL.x+BL.width>BK){BH.cannotFitHorizontally=true;}BJ=BF.length;for(BG=0;BG<BJ;++BG){BE=BF[BG].GetBoundingRect();if(BL.HasIntersection(BE)){++BH.overlapRefLabelCount;}}BJ=BD.length;for(BG=0;BG<BJ;++BG){BN=BD[BG];if(BN.isVertical){if(BL.x<BN.position&&BL.x+BL.width>BN.position){++BH.overlapRefLineCount;}}else{if(BL.y<BN.position&&BL.y+BL.height>BN.position){++BH.overlapRefLineCount;}}}BJ=BI.length;for(BG=0;BG<BJ;++BG){BM=BI[BG];if(BM.mIsShown){BE=BM.GetBoundingRect();if(BL.HasIntersection(BE)){++BH.overlapDataLabelCount;BH.overlapDataLabels.push(BI[BG]);}}}}function AE(BY,BT,BL){var BF=this.mChartContextPtr,BX=BF.GetGraphMatrixContext(),BE=BX.getPadding(Ai.kRefLabel),BK=BL.length,BI,BJ,BQ,BN,BH,BO,BD,BV,BU,BR,BG,BM,BS,BP,BW;for(BV=0;BV<BK;++BV){BI=BL[BV];BJ=new An.TextObject({TripleId:BI.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:BI.identity});if(BJ!==null){BJ.SetText(BI.labelText);for(BU=0;BU<2;++BU){if(BU===1){BG=BJ.mText;BJ.SetText(BG[0]+"...");BJ.rect.height=0;BJ.rect.width=0;}BD=BJ.GetBoundingRect();BN=BD.height;BO=BN/2;BQ=BD.width;BH=BQ/2;BP=[];for(BR=z;BR<=s;++BR){BM={};BM.position=BR;BM.cannotFitVertically=false;BM.cannotFitHorizontally=false;BM.overlapRefLabelCount=0;BM.overlapRefLineCount=0;BM.overlapDataLabelCount=0;BM.overlapDataLabels=[];BS=AA.call(this,BR,BN,BO,BQ,BH,BI.position,BY,BT,BE,BI.isVertical);BM.xOffset=BS.xOffset;BM.yOffset=BS.yOffset;BM.rect=BS.rect;Ak.call(this,BM,BY,BT,this.shownDataLabels,this.shownRefLabels,BL);BP.push(BM);}BP.sort(j);if(BP[0].cannotFitVertically){break;}if(BP[0].cannotFitHorizontally){if(BV===0){continue;}else{break;}}BJ.MoveTo(BP[0].xOffset,BP[0].yOffset,A0.CENTER);BJ.mIsShown=true;BW=BP[0].overlapDataLabelCount;for(BR=0;BR<BW;++BR){BP[0].overlapDataLabels[BR].mIsShown=false;}this.mPostTrendLineObjects.push(BJ);this.shownRefLabels.push(BJ);break;}}}}function Al(){var BP=this.VecSeriesInfo.length,BF,BS,Ba,BW,Bb,BT,BY=[],BH,BZ,BQ,BG,BX,Bh,Bf,BM,BI,Bg,Bc,BE,BK={},Be,BD,BN=this.mDatasetPtr,BV=BN.GetSeriesCount()*BN.GetGroupCount(),BJ=this.mChartContextPtr,BU=BJ.mGraphWidth,Bd=BJ.mGraphHeight,BL,BO=[];if(this.mReferenceLineObjects===null){this.mReferenceLineObjects=[];}if(BJ.mPartialRendering===false){BV=this.DPCount;}for(Ba=0;Ba<BP;++Ba){BS=this.VecSeriesInfo[Ba];BF=BS.SeriesID;BQ=this.mDatasetPtr.GetReferenceLinesOfSeries(BF);Bb=BS.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BD={};BD.Condense=Bb.mCondenseLabels;if(!BD.Condense){if(Bb.mNumberFormat.isDefault){var BR=new An.ChartAdvFormat();BJ.getAxisAutoNumberFormat(BR,Bb.mPrimaryMetrics);Bb.mNumberFormat=BR;}BD.NumberFormat=Bb.mNumberFormat.mCustomFormat;}BL=BQ.length;for(BW=0;BW<BL;++BW){BH=new An.TripleId({GroupId:BW,ObjectId:A4.DssGraphReferenceLine,SeriesId:BF});Be=new An.TripleId({ObjectId:A4.DssGraphRefLineText,SeriesId:BF,GroupId:BW});BY=[];BZ=BQ[BW];if(BZ){Bh=BZ.getIdentity();BT=BZ.getReferenceLineValue();Bf=BZ.getReferenceLineDirection();BG=BZ.getReferenceLineLabel(false,false,BD);BX=BZ.getLevel();if(BV===0){continue;}if(BT===null&&BT===undefined){continue;}BM=(Bf!=="horizontal");if(BM){Bg=this.xAxis.GetPositionByValue(BT);}else{Bg=Bb.GetPositionByValue(BT);}if(Bg!==null){Bc=1;if(BM){if(Bg===0){Bg=1;}else{if(Bg===BU){--Bg;}}BE=Bd-1;BY.push(new An.Point2D({x:Bg,y:Bc}));BY.push(new An.Point2D({x:Bg,y:BE}));BK.x=Bg;BK.y=(BY[0].y+BY[1].y)/2;}else{if(Bg===0){Bg=1;}else{if(Bg===Bd){--Bg;}}BE=BU-1;BY.push(new An.Point2D({x:Bc,y:Bg}));BY.push(new An.Point2D({x:BE,y:Bg}));BK.x=(BY[0].x+BY[1].x)/2;BK.y=Bg;}BI=new An.StraightLineObject({TripleId:BH,GraphObjectManager:this,StartPoint:BY[0],EndPoint:BY[1],GraphCollectionObject:null,Identity:Bh,Shape:c._LINE,MidPoint:BK});if(BI!==null){if(!BI.mFormatLinePtr){BI.mFormatLinePtr=new An.FormatLine();}this.mReferenceLineObjects.push(BI);BO.push({tripleId:Be,identity:Bh,isVertical:BM,position:Bg,labelText:BG});}}else{AN.visPrint("Reference line point calculation abnormal:");AN.visPrint("\tref line #: "+BW+" direction: "+Bf);AN.visPrint("\tvalue = "+BT);if(BM){AN.visPrint("\tx = "+Bg);}else{AN.visPrint("\ty = "+Bg);}}}}}AE.call(this,Bd,BU,BO);}function n(){var BE=this.mTrendLineObjects.length,BD;for(BD=0;BD<BE;++BD){this.mTrendLineObjects[BD].Draw();}}function X(){var BE=this.mReferenceLineObjects,BD;for(BD=0;BD<BE.length;++BD){BE[BD].Draw();}}function E(BF){var BE,BD=0;for(BE=0;BE<BF.length;BE++){if(BF[BE]!==null){BD++;}}return BD;}function Au(BO,BJ){if(!BJ){return ;}var BG=this.mChartContextPtr,BL=this.mDatasetPtr,BY=this.mChartContextPtr.GetGraphMatrixContext(),BZ=BG.mIsGraphMatrix,BM,BT,Bc,BF,BV,BR,BX,BS,BE,Ba,BU;var BN=BL.showDatalabels();if(BZ&&BN){Ba=this.dataLabelManager;if(Ba===null||Ba===undefined){BU=new An.Rect2D({x:0,y:0,width:BG.mGraphWidth,height:BG.mGraphHeight});Ba=this.dataLabelManager=new An.DataLabelManager({DataArea:BU});Ba.ChartContext=BG;}if(BY.mMarkerShape===A7.DssGraphMarkerShape2DPie||BY.mMarkerShape===A7.DssGraphMarkerShape2DRingPie){this.mPieRenderer.enableDataLabel(Ba,this.shownDataLabels);BS=this.mPieRenderer.dataLabels;BR=BS.length;for(BX=0;BX<BR;++BX){BE=BS[BX].Label;if(BE.mIsShown){this.AddToMapAndList(BE);}}}else{BT=[];K.call(this,BT);AW.call(this,BO,BT);AU.call(this);Ba=A.call(this);Ba.PlaceDataLabels(this.mDataLabels,this.shownDataLabels);}}else{if(this.isSmarted){BM=[];Bc=[];BF=[];BV=C.call(this,BO);if(BV){Bc=BV;}Av.call(this,BM);r.call(this,BO,BM);var BI=new An.TripleId({ObjectId:A4.DssGraphDataTextConnectLine,SeriesId:this.TripleId.mSeriesId,GroupId:this.TripleId.mGroupId}),BH=new An.GraphCollectionObject({TripleId:BI,GraphObjectManager:this,CollectionType:AK.CT_LINE});var Bb=this.labelMatrix.length,BK=AD.call(this,Bc,BF,BH);if(BK===Bb){return ;}if(BK===0){BJ=false;}else{var BQ=new An.Rect2D(),BW,BD;p.call(this,BQ);BW=new An.GridMap({Rect:this.mDataArea,Unit:BQ,dataLabelPadding:5});BD=B.call(this,BW);if(BD){var BP=function BP(Be,Bd){return Be.HostMarker.x-Bd.HostMarker.x;};this.labelMatrix.sort(BP);a.call(this,BW,BH);}else{A8.call(this,BH);}}if(BH.GetCollectionSize()){this.AddToMap(BH);}if(!this.isSmarted){if(this.isSmarted){this.mPostTrendLineObjects.splice(0,this.mPostTrendLineObjects.length);}if(!this.dataLabelLine){S.call(this,BO);}else{BH=new An.GraphCollectionObject({TripleId:BI,GraphObjectManager:this,CollectionType:AK.CT_LINE});S.call(this,BO,BH);if(BH.GetCollectionSize()>0){this.AddToMap(BH);}}}}}}function D(){var BF=this.mChartContextPtr,BD=this.mDataArea,BE=this.mPostTrendLineObjects;if(BF.mIsGraphMatrix){BE=[];}this.y1Axis.GenerateCustomLine(BD,BE);if(this.mChartContextPtr.IsDualAxis()){this.y2Axis.GenerateCustomLine(BD,BE);}this.xAxis.GenerateCustomLine(BD,BE);if(BF.mIsGraphMatrix&&BE.length){this.mGraphObjectList=BE.concat(this.mGraphObjectList);}}function I(BG){var BK=this.mChartContextPtr,BH=BK.mGraphHeight,BF=BK.mGraphWidth,BJ,BE,BI,BD;if(BG===undefined||BG===null){return false;}BJ=BG.mOptions;BE=BJ.mAxisCustomValue;BI=BG.IsVerticalAxis();BD=BG.ValueToPosition(BE);if(!BJ.mDrawCustomLine){return false;}if(BE>BG.mMaxTick||BE<BG.mMinTick){return false;}if(BD===0){return false;}if(BI){if(BD===BH){return false;}}else{if(BD===BF){return false;}}return true;}function AJ(BI,BP,BD,BO,BM,BK,BF,BG){var BE={},BJ=BP/2,BH=BD/2,BL=BG.IsVerticalAxis(),BN;if(BG.mTripleId.mObjectId===A4.DssGraphY2Body){BN=A1;}else{if(BG.mTripleId.mObjectId===A4.DssGraphX2Body){BN=L;}else{BN=BL?A2:O;}}BE.rect=new An.Rect2D({x:0,y:0,width:BD+2*BF,height:BP+2*BF});switch(BI){case 0:switch(BN){case A2:BE.xOffset=BF+BH;BE.yOffset=BO-BF-BJ;BE.rect.y=BO-2*BF-BP;BE.rect.x=0;break;case O:BE.xOffset=BO-BF-BH;BE.yOffset=BM-BF-BJ;BE.rect.y=BM-2*BF-BP;BE.rect.x=BO-2*BF-BD;break;case A1:BE.xOffset=BK-BF-BH;BE.yOffset=BO-BF-BJ;BE.rect.y=BO-2*BF-BP;BE.rect.x=BK-2*BF-BD;break;case L:BE.xOffset=BO-BF-BH;BE.yOffset=BF+BJ;BE.rect.y=0;BE.rect.x=BO-2*BF-BD;break;}break;case 1:switch(BN){case A2:BE.xOffset=BF+BH;BE.yOffset=BO+BF+BJ;BE.rect.y=BO;BE.rect.x=0;break;case O:BE.xOffset=BO+BF+BH;BE.yOffset=BM-BF-BJ;BE.rect.y=BM-2*BF-BP;BE.rect.x=BO;break;case A1:BE.xOffset=BK-BF-BH;BE.yOffset=BO+BF+BJ;BE.rect.y=BO;BE.rect.x=BK-2*BF-BD;break;case L:BE.xOffset=BO+BF+BH;BE.yOffset=BF+BJ;BE.rect.y=0;BE.rect.x=BO;break;}break;}return BE;}function Aw(BH,BN,BK,BI,BE,BF){var BL=BH.rect,BJ,BG,BD,BM;if(BL.y<0||BL.y+BL.height>BN){return false;}if(BL.x<0||BL.x+BL.width>BK){return false;}BJ=BF.length;for(BG=0;BG<BJ;++BG){BD=BF[BG].GetBoundingRect(true);if(BL.HasIntersection(BD)){return false;}}BJ=BE.length;for(BG=0;BG<BJ;++BG){BD=BE[BG].GetBoundingRect(true);if(BL.HasIntersection(BD)){return false;}}BJ=BI.length;for(BG=0;BG<BJ;++BG){BM=BI[BG];if(BM.mIsShown){BD=BM.GetBoundingRect(true);if(BL.HasIntersection(BD)){return false;}}}return true;}function AP(BF){var BI=this.mChartContextPtr,BT=BI.mGraphWidth,BX=BI.mGraphHeight,BV=BI.mpGraphMatrixContext,BM=BF.mOptions.mAxisCustomValue,BK=BF.Key==="Y1"||BF.Key==="Y2",BN=this.mDatasetPtr.fetchShownLabels(BK),BY=BN&&BN[BF.Key],BH=BY&&BY.length,BL,BG=false,BU,Bb,BE,BJ,BQ,BD,BO,BP,Ba,BW,BS,BR,BZ=BV.getPadding(Ai.kAxisOriginLabel);BQ=An.gAxisObjects[BF.getIndex()].mCustomLabelId;for(BU=0;BU<BH&&!BG;++BU){BL=BY[BU];if(BL===BM){BG=true;}}if(BG){return ;}Bb=new An.NumberObject({TripleId:BQ,GraphObjectManager:this,Number:BM,NumberFormat:BF.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BF.mCondenseLabels});if(Bb===null||Bb===undefined){return ;}BJ=Bb;BE=Bb.mText;BJ.SetText(BE);BD=BJ.GetBoundingRect(true);BO=BD.height;BP=BD.width;Ba=BF.ValueToPosition(BM);BW=false;for(BU=0;BU<=1&&!BW;++BU){BS={};BR=AJ.call(this,BU,BO,BP,Ba,BX,BT,BZ,BF);BS.xOffset=BR.xOffset;BS.yOffset=BR.yOffset;BS.rect=BR.rect;BW=Aw.call(this,BS,BX,BT,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(BW){BJ.MoveTo(BS.xOffset,BS.yOffset,A0.CENTER);BJ.mIsShown=true;this.mPostTrendLineObjects.push(BJ);this.axisOriginLabels.push(BJ);}}function AT(BI,BL,BE,BD,BJ,BG){var BF={},BK=BL/2,BH=BE/2;BF.rect=new An.Rect2D({x:0,y:0,width:BE+2*BG,height:BL+2*BG});switch(BI){case 0:BF.xOffset=BD+BG+BH;BF.yOffset=BJ-BG-BK;BF.rect.x=BD;BF.rect.y=BJ-2*BG-BL;break;case 1:BF.xOffset=BD-BG-BH;BF.yOffset=BJ-BG-BK;BF.rect.x=BD-2*BG-BE;BF.rect.y=BJ-2*BG-BL;break;case 2:BF.xOffset=BD-BG-BH;BF.yOffset=BJ+BG+BK;BF.rect.x=BD-2*BG-BE;BF.rect.y=BJ;break;case 3:BF.xOffset=BD+BG+BH;BF.yOffset=BJ+BG+BK;BF.rect.x=BD;BF.rect.y=BJ;break;}return BF;}function Ay(BF){var BI=this.mChartContextPtr,BU=BI.mGraphWidth,BZ=BI.mGraphHeight,BW=BI.mpGraphMatrixContext,BD,BP,BR,BH,BM,BK,BJ,BX,BS,BG,BL,BE,BO,BQ,BY,BN,BT,BV,Ba=BW.getPadding(Ai.kAxisOriginLabel);BM=this.xAxis;BS=An.gAxisObjects[BM.getIndex()].mCustomLabelId;BD=BF?this.y1Axis:this.y2Axis;BP=BD.mOptions.mAxisCustomValue;BR=BD.ValueToPosition(BP);BH=new An.NumberObject({TripleId:BS,GraphObjectManager:this,Number:BP,NumberFormat:BD.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BM.mCondenseLabels});BK=BM.mOptions.mAxisCustomValue;BJ=BM.ValueToPosition(BK);BX=new An.NumberObject({TripleId:BS,GraphObjectManager:this,Number:BK,NumberFormat:BM.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BM.mCondenseLabels});BG="("+BX.mText+", "+BH.mText+")";BL=new An.TextObject({TripleId:BS,GraphObjectManager:this,GraphCollectionObject:null});BL.SetText(BG);BE=BL.GetBoundingRect(true);BO=BE.height;BQ=BE.width;BY=false;for(BV=0;BV<4&&!BY;++BV){BN={};BT=AT.call(this,BV,BO,BQ,BJ,BR,Ba);BN.xOffset=BT.xOffset;BN.yOffset=BT.yOffset;BN.rect=BT.rect;BY=Aw.call(this,BN,BZ,BU,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(BY){BL.MoveTo(BN.xOffset,BN.yOffset,A0.CENTER);BL.mIsShown=true;this.mPostTrendLineObjects.push(BL);this.axisOriginLabels.push(BL);}}function AL(){var BF=0,BE,BD,BG;BE=I.call(this,this.y1Axis);BD=I.call(this,this.y2Axis);BG=I.call(this,this.xAxis);if((BE||BD)&&BG){BF=true;}if(BF){Ay.call(this,BE);}else{if(BE){AP.call(this,this.y1Axis);}if(BD){AP.call(this,this.y2Axis);}if(BG){AP.call(this,this.xAxis);}}}function k(BT,BS){var BK=this.mChartContextPtr,BN=null,BH,BD,BL,BG,BJ=BT.Id,BO=BT.MarkerType,BM=BT.Shape,BF=BT.Position,BQ=BT.Size,BE=[];if(BK.mIsGraphMatrix){var BP=BT.BoundingBox;if(U.call(this,BT)){if(this.waitingList===null){this.waitingList=[];}this.waitingList.push(BT);return[];}BH=null;switch(BO){case A7.DssGraphMarkerShapeGMTick:var BR=BK.transformRectToTicker(BP,true);if(BR.length>=2){BN=new An.StraightLineObject({TripleId:BJ,GraphObjectManager:this,StartPoint:BR[0],EndPoint:BR[1],GraphCollectionObject:null,Shape:c._TICKER});}else{return[];}break;case A7.DssGraphMarkerShape2DPie:case A7.DssGraphMarkerShape2DRingPie:var BI=0;if(BO===A7.DssGraphMarkerShape2DRingPie){BI=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new An.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BK,Layout:BI,PlotType:q.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}BD=this.mDatasetPtr.GetPieCountAtOneDataPoint(BJ.mSeriesId,BJ.mGroupId);for(BG=0;BG<BD;++BG){BL=this.mPieRenderer.drawSinglePie(BJ.mSeriesId,BJ.mGroupId,BG,BF,BD);BE=BE.concat(BL);}break;case A7.DssGraphMarkerShapeSquare:case A7.DssGraphMarkerShapeRectangle:BN=new An.RectangleObject({TripleId:BJ,GraphObjectManager:this,GraphCollectionObject:null,Area:BP,Shape:BM});break;default:BN=new An.MarkerObject({TripleId:BJ,GraphObjectManager:this,MarkerPosition:BF,MarkerShape:BO,IsIsometric:true,MarkerSize:BQ,GraphCollectionObject:BH,IsDialogSize:false,Shape:BM});break;}}else{BN=new An.MarkerObject({TripleId:BJ,GraphObjectManager:this,MarkerPosition:BF,MarkerShape:BO,IsIsometric:true,MarkerSize:BQ,GraphCollectionObject:BS,IsDialogSize:!this.isBubbleChart});}if(BN!==null&&BN!==undefined){BE.push(BN);this.AddToMap(BN);if(BS){BS.AddGraphObject(BN);}}return BE;}function BB(BT,BL,BD,BR,BM){var BE=this.VecSeriesInfo[BR].MarkerShape,BI=0,BK=this.VecSeriesInfo[BR].IsNullData.length,BS,BQ,BP,BN,BF,BH,BU,BG,BJ,BO;BO=new An.TripleId({ObjectId:A4.DssGraphRiser,SeriesId:this.VecSeriesInfo[BR].SeriesID});BS=new An.GraphCollectionObject({TripleId:BO,GraphObjectManager:this,CollectionType:AK.CT_GENERAL_SHAPE});for(BQ=0;BQ<BK;++BQ){if(this.VecSeriesInfo[BR].IsNullData[BQ]){continue;}BF=BD[BI];BH=this.isBubbleChart?BM:BS;BU=new An.TripleId({ObjectId:A4.DssGraphRiser,SeriesId:this.VecSeriesInfo[BR].SeriesID,GroupId:BQ});BN={MarkerShape:BE,Size:BF,Position:BL,Id:BU,MarkerType:this.VecSeriesInfo[BR].MarkerShape};BG=k.call(this,BN,BM);if(BG.length>0){for(BP=0;BP<BG.length;++BP){this.mGraphObjectList.push(BG[BP]);this.AddToMap(BG[BP]);BH.AddGraphObject(BG[BP]);BJ=BG[BP].GetBoundingRect();BT[BR].push(BJ);}}}if(!this.isBubbleChart){this.AddToMap(BS);}}function A5(BI,BF,BH){var BE,BG,BD;if(BI.length===0){return ;}if(this.VecSeriesInfo[BF].ConnectDataPoint){BE=this.isBubbleChart?null:BH;BD=new An.TripleId({ObjectId:A4.DssGraphDataLine,SeriesId:this.VecSeriesInfo[BF].mSeriesId,GroupId:Aq});BG=new An.PolyLineObject({TripleId:BD,GraphObjectManager:this,PolyLine:BI,Parent:BE});this.mGraphObjectList.push(BG);this.AddToMap(BG);if(!this.isBubbleChart){BH.AddGraphObject(BG);}}}function y(BJ,BE){Ap.call(this,BJ);var BH,BG,BM=this.VecSeriesInfo,BK=BM.length,BQ=this.mDatasetPtr.GetGroupCount(),BP,BI,BO,BF,BN,BL=false;for(BH=0;BH<BK;++BH){BF=[];BN=[];var BD=BM[BH].ShowDataLabel;BL=BL||BD;for(BG=0;BG<BQ;++BG){BI=new An.Point2D();BP=Ax.call(this,BH,BG,BI);this.VecSeriesInfo[BH].IsNullData.push(!BP);if(!BP){continue;}BO=BA.call(this,BH,BG);if(BO===undefined){continue;}BF.push(BI);BN.push(BO);}A5.call(this,BF,BH,BJ[BH]);BB.call(this,BE,BF,BN,BH,BJ[BH]);}return{IsLabelPossible:BL,MarkerRectangles:BE};}function AV(BO){var BV,BS,BN=this.VecSeriesInfo,BZ=BN.length,BF=this.mDatasetPtr.GetGroupCount(),BE,Be,BW,BI=this.mGraphObjectList,Bd=this.drawBySize,BY=[],BJ=false,BH=this.mChartContextPtr,BX=BH.GetGraphMatrixContext(),BG=BX.mMarkerShape,BQ=BG===A7.DssGraphMarkerShape2DPie||BG===A7.DssGraphMarkerShape2DRingPie,BD=BH.mPartialRendering,Bc=[],BU=function BU(Bh,Bg){if(Bh.Size<Bg.Size){return 1;}if(Bh.Size>Bg.Size){return -1;}return 0;};for(BV=0;BV<BZ;++BV){var Bb=BN[BV].ShowDataLabel;BJ=BJ||Bb;for(BS=0;BS<BF;++BS){Be=new An.Point2D();BE=Ax.call(this,BV,BS,Be);BN[BV].IsNullData.push(!BE);if(!BE){continue;}BW=BA.call(this,BV,BS);if(BW===undefined){continue;}var Bf=new An.TripleId({ObjectId:A4.DssGraphRiser,SeriesId:BN[BV].SeriesID,GroupId:BS});if(BH.checkColorByAndSizeByValue(Bf,this.mDatasetPtr,this.mHasColorBy&&!BQ,this.mHasSizeBy)===false){BN[BV].IsNullData[BN[BV].IsNullData.length-1]=true;continue;}var BP=H.call(this,BG,Be,BW);BP.Id=Bf;BP.Position=Be;BP.Size=BW;BP.MarkerType=BN[BV].MarkerShape;BY.push(BP);++this.DPCount;if(this.seriesDPCount[BV]===undefined||this.seriesDPCount[BV]===null){this.seriesDPCount[BV]=1;}else{++this.seriesDPCount[BV];}}}if(Bd||BD){BY.sort(BU);if(BD){BY.reverse();}}var BR;for(BV=0;BV<BY.length;BV++){var BK=k.call(this,BY[BV],null);for(BR=0;BR<BK.length;++BR){var Ba=BY[BV],BL=Ba.Id.mSeriesId,BM=Ba.Id.mGroupId;BG=Ba.MarkerType;var BT=BG===A7.DssGraphMarkerShape2DPie||BG===A7.DssGraphMarkerShape2DRingPie;BO[BL][BM]=Ba.BoundingBox;if(BT){this.AddToMap(BK[BR]);}Bc.push(BK[BR]);}}if(BD){Bc.reverse();this.shapeCanvas=null;}for(BV=0;BV<Bc.length;BV++){BI.push(Bc[BV]);}return{IsLabelPossible:BJ,MarkerRectangles:BO};}function h(BH,BI,BL,BK){var BF=this.mChartContextPtr,BJ=BF.GetGraphMatrixContext(),BD,BG,BE;if(BF.mIsGraphMatrix&&!BK){BJ=BF.GetGraphMatrixContext();if(BJ.isPieOrRingShape()){BD=BJ.GetMaxMarkerSize(Ah._PIE,true,1,this.isBubbleChart);}else{if(BJ.mMarkerShape===A7.DssGraphMarkerShapeGMTick){BD=BJ.GetMaxMarkerSize(Ah._TICK_VALUE,true,this.isBubbleChart);}else{BD=BJ.GetMaxMarkerSize(Ah._SHAPES_IN_BUBBLESCATTER,false,0,this.isBubbleChart);}}return Math.round(BD);}BG=BH.width;BE=BH.height;return Math.round(Math.min(BG/BI+0.5,BE/BL+0.5)*0.5);}function i(){var BG,BD,BH=this.mDatasetPtr.GetSeriesCount(),BF=this.mDatasetPtr.GetGroupCount(),BE;if(this.mDatasetPtr.GetSeriesByColumn()){BG=BF;BD=BH;}else{BD=BF;BG=BH;}if(BG*BD===0){return 0;}BE=h.call(this,this.mDataArea,BG,BD,false);if(BE<3){BE=3;}return BE;}mstrmojo.chart.ValuePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.ValuePlot",dataLabelLine:false,isBubbleChart:false,isSmarted:false,maxUnitRadius:-1,maxRadius:-10,minRadius:10000,labelFormat:Ac.DssGraphDataTextSeriesDependent|Ac.DssGraphDataTextLabel,labelLocation:Ae.DssGraphDTPositionCenter,xAxis:null,y1Axis:null,y2Axis:null,zAxis:null,VecSeriesInfo:[],standAloneMarkers:[],labelMatrix:[],drawBySize:false,mPieRenderer:null,mDataLabels:[],mTrendLineObjects:null,mReferenceLineObjects:null,waitingList:null,shapeCanvas:null,viewPort:null,init:function AS(BD){var BE;this._super(BD);BE=this.mChartContextPtr;this.xAxis=null;this.y1Axis=null;this.y2Axis=null;this.zAxis=null;this.VecSeriesInfo=[];this.standAloneMarkers=[];this.labelMatrix=[];this.isBubbleChart=(BE.GetGraphMajorType()===Aj.GMT_BUBBLE);this.drawBySize=this.isBubbleChart&&this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];},OnRectangleSelection:function m(BL,BO,BJ){BJ=BJ||0;var BE=this.mChartContextPtr;if(BJ===0&&this.waitingList){var BN=this.waitingList,BH=BN.length,BG,BM,BK,BI,BD,BF=(BN[0].Shape===c._PIE)?"pie":"shape";for(BG=0;BG<BH;BG++){BM=BN[BG].Position.x;BK=BN[BG].Position.y;if((BM>=BL.x&&BM<=BL.x+BL.width)&&(BK>=BL.y&&BK<=BL.y+BL.height)){BD=BN[BG].Id;BI=BE.getIdentity(BD,BF);BO.push(BI);}}}},GenerateMapAndList:function AF(){var BD,BJ=[],BI,BH,BK=this.mChartContextPtr,BF=BK.mIsGraphMatrix,BE=this.VecSeriesInfo.length;this.maxUnitRadius=i.call(this);BD=[];for(BI=0;BI<BE;++BI){BD.push([]);}if(BK.mImageUsage!==AM.GENERAL){return ;}var BG;if(BF){BG=AV.call(this,BD);}else{BG=y.call(this,BJ,BD);}BD=BG.MarkerRectangles;BH=BG.IsLabelPossible;Au.call(this,BD,BH);P.call(this);Al.call(this);D.call(this);AL.call(this);},Draw:function Ar(){var BF=this.drawBySize,BH=this.mChartContextPtr,BE=this.VecSeriesInfo.length;if(BF){var BD=[],BG;for(BG=0;BG<BE;BG++){BD[BG]=0;}BH.setDrawingOrderToCanvas(BD);}An.GraphObjectManager.prototype.Draw.apply(this,[]);n.call(this);X.call(this);this.DrawPostTrendLineObjects();},AssignValueAxis:function T(BE,BD){switch(BD){case 0:this.xAxis=BE;break;case 1:this.y1Axis=BE;break;case 2:this.y2Axis=BE;break;case 3:this.zAxis=BE;break;default:break;}},AssignSeriesInfo:function Y(BF,BI){var BE=BF.length,BH,BG,BD;for(BD=0;BD<BE;++BD){BG=At.call(this);this.VecSeriesInfo.push(BG);BH=BF[BD];this.VecSeriesInfo[BD].SeriesID=BH;this.VecSeriesInfo[BD].ValueAxisIndex=BI[BH];}this.LoadProperties();},GetMaxElementRadius:function AO(){var BE=new An.TripleId(),BD=this.mChartContextPtr.GetProperty(As.DssGraphMatrixUsePerfectPadding,BE);if(BD===null||BD===undefined){return 0;}return this.maxUnitRadius;},GetMaxElementOffsetClippedByBoundary:function V(BF,BR){var Bb={LowOffset:0,HighOffset:0},BI=this.mChartContextPtr,BX=BI.GetGraphMatrixContext(),BS,BK,Bd,BJ,BQ,BP,BO,BN,BV,BH,BU,BT,BG,BW;if(BR===undefined){BR=true;}if(!BI.mIsGraphMatrix){return Bb;}var BE=BF?(BR?"X1":"X2"):(BR?"Y1":"Y2"),BD=this.mClippedElementSize;if(BD[BE]!==undefined){return BD[BE];}if(this.maxUnitRadius<0){this.maxUnitRadius=i.call(this);}BV=this.mDatasetPtr.GetSeriesCount();BH=this.mDatasetPtr.GetGroupCount();var BM={LowOffset:0,HighOffset:0};var BL={LowOffset:0,HighOffset:0};for(BU=0;BU<BV;++BU){for(BT=0;BT<BH;++BT){Ad.Reset(0,0);BG=Ax.call(this,BU,BT,Ad);if(!BG){continue;}BW=BA.call(this,BU,BT);if(BW===undefined){continue;}var Bc=0,BZ=0;var Ba=0,BY=0;Bb={LowOffset:0,HighOffset:0};BS=this.xAxis;BK=this.y1Axis;if(BS===null||BK===null){BD[BE]=Bb;return ;}Bd=BS.GetMaxMinDataInput();BJ=BK.GetMaxMinDataInput();BQ=BS.GetPositionByValue(Bd.Min);BP=BK.GetPositionByValue(BJ.Min);if(BQ===null||BP===null){BD[BE]=Bb;return ;}BO=BS.GetPositionByValue(Bd.Max);BN=BK.GetPositionByValue(BJ.Max);if(BO===null||BN===null){BD[BE]=Bb;return ;}Bc=BM.LowOffset;BZ=BM.HighOffset;BM=BX.getClippedOffset(BQ,BO,BW,Ad,true,Bc,BZ);Bc=Math.max(BM.LowOffset,Bc);BZ=Math.max(BM.HighOffset,BZ);BD.X1=BM;Ba=BL.LowOffset;BY=BL.HighOffset;BL=BX.getClippedOffset(BP,BN,BW,Ad,false,Ba,BY);Ba=Math.max(BL.LowOffset,Ba);BY=Math.max(BL.HighOffset,BY);BD.Y1=BL;}}if(BD.X1){BD.X2=mstrmojo.hash.copy(BD.X1);}else{BD.X1=BD.X2={LowOffset:0,HighOffset:0};}if(BD.Y1){BD.Y2=mstrmojo.hash.copy(BD.Y1);}else{BD.Y1=BD.Y2={LowOffset:0,HighOffset:0};}return BD[BE];},refresh:function Am(BD,BE){if(BD==="clipping"){this.mDataArea.width=this.mChartContextPtr.mGraphWidth;this.mDataArea.height=this.mChartContextPtr.mGraphHeight;this.maxUnitRadius=-1;this.mClippedElementSize={};}else{}},LoadProperties:function AZ(){var BF,BJ,BD,BI=this.isBubbleChart?A3.DssGraphShowSDLine:A3.DssGraphShowLine,BH,BK=this.mChartContextPtr,BE=BK.GetGraphMatrixContext(),BG=BK.mIsGraphMatrix;for(BH=0;BH<this.VecSeriesInfo.length;++BH){BF=this.VecSeriesInfo[BH];BD=new An.TripleId({ObjectId:A4.DssGraphRiser,SeriesId:BF.SeriesID});if(BG){BF.MarkerShape=BE.mMarkerShape;}else{BJ=BK.GetProperty(A3.DssGraphSDMarkerShape,BD);if(BJ){BF.MarkerShape=BJ;}else{BF.MarkerShape=A7.DssGraphMarkerShapeCircle;}}switch(BF.MarkerShape){case A7.DssGraphMarkerShapeCircle:case A7.DssGraphMarkerShapeRectangle:case A7.DssGraphMarkerShapeSquare:case A7.DssGraphMarkerShape2DPie:case A7.DssGraphMarkerShape2DRingPie:break;default:this.drawBySize=false;break;}if(BK.mImageUsage!==0){return ;}BJ=BK.GetProperty(BI,BD);if(BJ){BF.ConnectDataPoint=BJ;}BJ=BK.GetProperty(A3.DssGraphSDShowDataText,BD);if(BJ){BF.ShowDataLabel=BJ;}if(BG){BF.ShowDataLabel=this.mDatasetPtr.showSeriesDatalabel(BD.mSeriesId);}this.LoadTrendLineProperties(this.VecSeriesInfo[BH].SeriesID,BF.TrendLineOptions);}BJ=BK.GetProperty(A3.DssGraphNewUseSmartLabels,AB);if(BJ){this.isSmarted=BJ;}BJ=BK.GetProperty(A3.DssGraphAxisDataTextPlace,AB);if(BJ){this.labelLocation=BJ;}BJ=BK.GetProperty(A3.DssGraphShowDataText,AB);if(BJ){this.labelFormat=BJ;}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","NumberObject","Rect2D","TextObject");var A=mstrmojo.chart;mstrmojo.chart.CategoryPlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.CategoryPlot",createRiserLabel:function C(G,F,K,H,E){var L,D=this.realComboChart;if((K===null&&H==="")||E===null){return null;}if(K){L=new A.NumberObject({TripleId:G,GraphObjectManager:this,Number:F,NumberFormat:K,GraphCollectionObject:E,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr,IsFinal:(H==="")});if(L===null){return null;}if(H&&H!==""){L.AddTextBeforeNumber(H);}if(D){L.strokeBBox();}this.AddToMap(L);E.AddGraphObject(L);return L;}var J=new A.Rect2D({x:0,y:0,width:0,height:0}),I=new A.TextObject({TripleId:G,GraphObjectManager:this,rect:J,GraphCollectionObject:E,clientDrag:true});if(I!==null){I.SetText(H);if(D){I.strokeBBox();}this.AddToMap(I);E.AddGraphObject(I);return I;}return null;},ReserveAreaForDataLabels:function B(D){}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Plot","CategoryAxis");var B=mstrmojo.chart;mstrmojo.chart.GridBasePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.GridBasePlot",mHasXAxis:false,mHasYAxis:false,mMarkerShape:0,mXaxis:null,mYaxis:null,mDataArea:null,init:function E(F){this._super(F);this.mMarkerShape=4;this.mHasXAxis=true;this.mHasYAxis=true;this.mDataArea=new B.Rect2D();},AssignSeries:function A(F){},AssignAxis:function D(G,F){if(F){this.mYAxis=G;}else{this.mXAxis=G;}},AssignDataArea:function C(F,G){this.mDataArea.ResetRect(F);if(G){this.mYAxis.SetDeviceDataArea(F);}else{this.mXAxis.SetDeviceDataArea(F);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","Point2D","RectangleObject","TextObject","NumberObject","GraphCollectionObject","GridDataLabelInfo","GridBasePlot","CategoryAxis","PiePlotRenderer","MarkerObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixElementSizeMode","EnumGraphMatrixMarkerTypeInChart","EnumAnchorPoint");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.common","Utility","MapStructure");var W=mstrmojo.chart,T=W.ChartConstants,J=W.enums,o=J.EnumAnchorPoint,C=J.EnumCollectionType,Q=J.EnumGraphMatrixMarkerTypeInChart,n=J.EnumGraphMatrixElementSizeMode,U=J.EnumGraphMatrixPiePlotType,S=mstrmojo.chart.model,O=S.enums,s=O.EnumDSSGraphMarkerShape,r=O.EnumDSSGraphObject,t=O.EnumShapeType,B=W.common,F=B.Utility,V=F.tripleId;var P=new W.Rect2D(),AE=new W.Point2D(),AC=new W.Point2D(),q=new W.ChartAdvFormat(),p=new W.Point2D();var L=0,d=1,b=2;var M=1,N=2,X=3;function K(AH,AG){if(AH.mYIndex===AG.mYIndex){return AH.mXIndex-AG.mXIndex;}return AH.mYIndex-AG.mYIndex;}function y(){var AG=this.mXAxis,AM=this.mYAxis,AK=this.mDatasetPtr;if(this.mPartialRendering){var AI=this.mChartContextPtr,AO={PartialRendering:true,Group:{},Series:{}},AH,AL,AP,AJ,AN=AI.mRenderingWindow;AH=AN.x;AL=AH+AN.width;AP=AN.y;AJ=AP+AN.height;if(AG){AL=AG.getGroupSlotAt(AL)+1;AH=AG.getGroupSlotAt(AH)-1;}if(AM){AJ=AM.getGroupSlotAt(AJ)+1;AP=AM.getGroupSlotAt(AP)-1;}if(this.mDatasetPtr.GetSeriesByColumn()){if(AM){AO.Group.Max=AJ;AO.Group.Min=AP;}if(AG){AO.Series.Max=AL;AO.Series.Min=AH;}}else{if(AM){AO.Series.Max=AJ;AO.Series.Min=AP;}if(AG){AO.Group.Max=AL;AO.Group.Min=AH;}}AK.updateDataWindow(AO);}else{AK.resetDataWindow();}}function z(AN){if(!AN){var AI=this.mChartContextPtr.GetGraphMatrixContext(),AM=AI.mElementsInfo;if(this.mMarkerShape===s.DssGraphMarkerShapeRectangle){var AL=AM.Max.Size,AJ=1;var AH=this.mAutoFitMarkerRect;this.mAdjustMarkerRect=new W.Rect2D({Rect2D:AH});var AG=this.mAdjustMarkerRect;if(AM.Max.Mode===n._MANUAL){AJ=Math.min(AJ,AL);if(AJ<1){AG.width=AH.width*AJ;AG.height=AH.height*AJ;}}}if(this.mMarkerShape===s.DssGraphMarkerShapeGMTick){var AK=new W.Rect2D();AK.width=AI.mConstants.FixedTickerSize;AK.height=AI.GetMaxMarkerSize(Q._TICK_CATEGORY,false,this.mYArity);this.mAdjustMarkerRect=AK;}}return this.mAdjustMarkerRect;}function k(){var AG=this.mSeriesSet.length,AI=this.mDatasetPtr.GetGroupCount(),AH=this.mDatasetPtr;if(this.mIsSeriesByCol){this.mXArity=AG;this.mYArity=AI;}else{this.mXArity=AI;this.mYArity=AG;}if(this.mXArity===0&&!this.mHasXAxis){this.mXArity=1;}if(this.mXArity===0&&!AH.mHasMetrics){this.mXArity=1;}if(this.mYArity===0&&!this.mHasYAxis){this.mYArity=1;}if(this.mYArity===0&&!AH.mHasMetrics){this.mYArity=1;}}function AB(){return this.mDatasetPtr.IsGridPieAngleBreakX();}function h(){var AI=this.mChartContextPtr,AL=AI.GetGraphMatrixContext(),AH=AL.mElementsInfo,AQ=0,AO=this.mMarkerShape,AS=AO===s.DssGraphMarkerShape2DPie||AO===s.DssGraphMarkerShape2DRingPie,AN=1,AG=1,AK=2500,AM=1,AT,AR,AJ;if(AO!==s.DssGraphMarkerShapeRectangle){if(this.mHasXAxis){AR=this.mXAxis.getGroupSize();}else{AR=this.mDataArea.width;}if(this.mHasYAxis){AJ=this.mYAxis.getGroupSize();}else{AJ=this.mDataArea.height;}if(AS){if(AH.Max.Mode===n._AUTOMATIC){AK=250;}AQ=this.mDatasetPtr.GetAngleNumber();var AP=AB.call(this);if(AP){AN=AQ;}else{AG=AQ;}if(AH.Max.Mode===n._AUTOMATIC){AM=this.mDatasetPtr.showDatalabels()?0.5:0.9;if(AM<0){AM=0.1;}AM=Math.min(AM,1);}}if(AH.Max.Mode===n._MANUAL){AM=AH.Max.Size;if(AM<0){AM=0.1;}AM=Math.min(AM,1);}AT=0.5*Math.min(AR/AN,AJ/AG);if(AO!==s.DssGraphMarkerShapeCircle||AT>=4){AT-=1;}AT=Math.max(AT,1);AT*=AM;AT=Math.min(AT,AK);AT=Math.max(AT,1);return Math.floor(AT);}return 1;}function E(){var AL=this.mDatasetPtr,AJ=this.mDataArea,AK=this.mXAxis,AI=this.mYAxis,AH=this.mAutoFitMarkerRect,AM=this.mChartContextPtr,AG=this.mpManager.mPlotOption;this.mIsAutoFitMode=AG.mIsAutoFitMode;this.mMaxDataVal=AG.mMaxDataVal;this.mMinDataVal=AG.mMinDataVal;this.mUniformColorMode=AL.GetSeriesByColumn()?b:d;if(this.mHasXAxis){AH.width=AK.getGroupSize();}else{AH.width=AJ.width;}if(this.mHasYAxis){AH.height=AI.getGroupSize();}else{AH.height=AJ.height;}this.mMarkerShape=AG.mMarkerShape;if(this.mMarkerShape===s.DssGraphMarkerShapeNone){this.mMarkerShape=s.DssGraphMarkerShapeRectangle;}this.mIsSeriesByCol=AL.GetSeriesByColumn();if(this.mHasXAxis){this.mPreXCoord=AK.getGroupStartPos(0);}else{this.mPreXCoord=AJ.x;}if(this.mHasYAxis){this.mPreYCoord=AI.getGroupStartPos(0);}else{this.mPreYCoord=AJ.y;}k.call(this);z.call(this,false);this.mMinMarkerSize=1;this.mMaxMarkerSize=h.call(this);this.mDataGroup=AL.GetDataGroup();}function c(AG,AH){if(this.mHasColorBy===false){return this.mMarkerCollectionSet[0]||null;}return null;}function e(AG,AI,AH){if(!AH){return ;}if(this.mLegendPtr===null||this.mLegendPtr===undefined){return ;}if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function i(AL,AH,AK,AG){var AJ=AL?AG.x:AG.y,AM=0,AI;if(AL){AM=AH?this.mXAxis.getGroupMiddlePos(AK+1):this.mXAxis.getGroupMiddlePos(AK-1);AI=(AM+AJ)/2;}else{AM=AH?this.mYAxis.getGroupMiddlePos(AK+1):this.mYAxis.getGroupMiddlePos(AK-1);AI=(AM+AJ)/2;}var AN=AI-Math.floor(AI);if(AN!==0){AI-=0.5;}if(AI===0){AI=1;}return AI;}function Y(AT,AR){var AV=1,AL=0,AO=t._RECTANGLE,AH=false,AK=this.mDatasetPtr.dataProvider;AE.x=this.mXAxis.getGroupMiddlePos(AT);AE.y=this.mYAxis.getGroupMiddlePos(AR);P.Reset(0,0,0,0);if(this.mMarkerShape===s.DssGraphMarkerShapeRectangle){if(this.mXArity*this.mYArity===1){P=z.call(this,true);}else{var AQ=0,AJ=0;if(!this.resizerLine){this.resizerLine=AK.getResizerLineThickNess();}if(!this.chartInfo){this.chartInfo=AK.getChartRowColCount();}if(AT===0){AQ=this.mDataArea.x+AV+AL;AJ=i.call(this,true,true,AT,AE);}else{if(AT===this.mXArity-1){AQ=i.call(this,true,false,AT,AE);AJ=this.mDataArea.x+this.mDataArea.width;}else{AQ=i.call(this,true,false,AT,AE);AJ=i.call(this,true,true,AT,AE);}}if(AT===this.mXArity-1){if(AK.colIndex!==this.chartInfo.cir-1){AJ-=this.resizerLine.MATRIX_VLINE_THICKNESS;}else{AJ-=parseInt(this.resizerLine.MATRIX_VLINE_THICKNESS/2);}}P.x=AQ;P.width=AJ-AQ;P.width=Math.max(0,P.width);if(AR===0){AQ=this.mDataArea.y+AV;AJ=i.call(this,false,true,AR,AE);}else{if(AR===this.mYArity-1){AQ=i.call(this,false,false,AR,AE);AJ=this.mDataArea.y+this.mDataArea.height;}else{AQ=i.call(this,false,false,AR,AE);AJ=i.call(this,false,true,AR,AE);}}if(AK.rowIndex!==0&&AR===0){AQ+=this.resizerLine.MATRIX_HLINE_THICKNESS;}if(AK.rowIndex===this.chartInfo.cic-1&&AR===this.mYArity-1){AJ-=this.resizerLine.AXIS_X_THICKNESS;}P.y=AQ;P.height=AJ-AQ;P.height=Math.max(0,P.height);if(P.width>AV){P.width-=AV+AL*2;}if(P.height>AV){P.height-=AV+AL;}}}else{AH=true;AO=t._TICKER;var AS=z.call(this,true);AC.x=AC.y=0;if(this.mHasXAxis){AC.x=this.mXAxis.getGroupMiddlePos(AT);}else{AC.x=this.mDataArea.GetCenter().x;}if(this.mHasYAxis){AC.y=this.mYAxis.getGroupMiddlePos(AR);}else{AC.y=this.mDataArea.GetCenter().y;}P.width=AS.width;P.height=AS.height;P.x=AC.x-0.5*P.width;P.y=AC.y-0.5*P.height;}if(this.mMinDataVal===this.mMaxDataVal){return P;}var AN=this.mChartContextPtr.GetGraphMatrixContext(),AM=AN.mElementsInfo.Max;if(this.mIsAutoFitMode){if(AM.Mode===n._AUTOMATIC){return P;}if(AM.Mode===n._MANUAL&&AM.Size===1){return P;}}var AI,AG;if(AM.Mode===n._MANUAL&&AM.Size!==1){var AP=AM.Size;AI=Math.round((1-AP)*0.5*P.width);AG=Math.round((1-AP)*0.5*P.height);P.x+=AI;P.y+=AG;P.width-=2*AI;P.height-=2*AG;}if(this.mIsAutoFitMode){return P;}var AU=0;if(this.mIsSeriesByCol){AU=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AT],AR);}else{AU=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AR],AT);}AI=0.5*P.width;AG=0.5*(P.height-AN.GetScaledSize(AU,P.height,AO)+0.5);if(AH){P.x+=AI-1;P.y+=AG;P.width=AN.mConstants.FixedTickerSize;}else{AI=0.5*(P.width-AN.GetScaledSize(AU,P.width,AO)+0.5);P.x+=AI;P.y+=AG;P.width-=2*AI;}P.height-=2*AG;return P;}function v(AI,AL,AS,AJ,AH,AP){var AN=-1,AM=-1,AG,AQ,AK,AR,AO=new W.Point2D({x:-1,y:-1});if(this.mHasXAxis){AN=this.mXAxis.getSubGroupMiddlePos(AI,AS,AH);}else{AG=this.mDataArea.x;AK=this.mDataArea.width/AH;AN=AG+AK*AS+AK/2;}if(this.mHasYAxis){AM=this.mYAxis.getSubGroupMiddlePos(AL,AJ,AP);}else{AR=this.mDatasetPtr.GetSeriesCount();AG=this.mDataArea.y;AQ=this.mDataArea.height/AR;AK=this.mDataArea.height/AP/AR;AM=AG+AQ*AL+AK*AJ+AK/2;}if(AN>=0&&AM>=0){AO.x=AN;AO.y=AM;}return AO;}function R(AP,AK,AS){var AQ=[AP,AK,AS],AO,AJ,AM,AH,AL,AI=1,AN=1;if(this.mPieCentersPool===null){this.mPieCentersPool=new B.MapStructure();}var AG=this.mPieCentersPool.find(AQ);if(AG!==null&&AG!==undefined){return AG;}AJ=AK;AH=AS;AM=AP;AL=AS;var AR=this.mDatasetPtr.GetPieCountAtOneDataPoint(AP,AK);if(AB.call(this)){AH=AS;AI=AR;}else{AL=AS;AN=AR;}AO=v.call(this,AJ,AM,AH,AL,AI,AN);this.mPieCentersPool.replace(AQ,AO);return AO;}function g(AH,AK){var AJ=this.mDataArea,AI=AH,AG=AK;if(this.mIsSeriesByCol){if(this.mHasXAxis){AI=this.mSeriesSet.length>AH?this.mSeriesSet[AH]:AH;}AG=AK;}else{AI=AH;if(this.mHasYAxis){AG=this.mSeriesSet.length>AK?this.mSeriesSet[AK]:AK;}}if(this.mHasXAxis){p.x=this.mXAxis.getGroupMiddlePos(AI);}else{p.x=AJ.x+AJ.width/2;}if(this.mHasYAxis){p.y=this.mYAxis.getGroupMiddlePos(AG);}else{p.y=AJ.y+AJ.height/2;}return p;}function m(AH,AM){var AG,AL,AJ=t._SQUARE,AI=this.mChartContextPtr.GetGraphMatrixContext(),AK=AI.mMarkerShape;if(this.mIsAutoFitMode){AG=this.mMaxMarkerSize;}else{if(this.mMinDataVal===this.mMaxDataVal){return this.mMaxMarkerSize;}if(AK===s.DssGraphMarkerShapeCircle){AJ=t._CIRCLE;}else{if(AK===s.DssGraphMarkerShape2DPie||AK===s.DssGraphMarkerShape2DRingPie){AJ=t._PIE;}}if(this.mIsSeriesByCol){AL=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AH],AM);}else{AL=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AM],AH);}AG=AI.GetScaledSize(AL,this.mMaxMarkerSize,AJ);}return AG;}function A(AO,AN){var AM=this.mChartContextPtr,AY=r.DssGraphRiser,AV,AS,AL=this.mMarkerShape,AQ=(AL===s.DssGraphMarkerShape2DPie||AL===s.DssGraphMarkerShape2DRingPie),AI=null,AK,AU,AZ,AG,AP=[],AH;AV=(this.mSeriesSet.length>AO)?this.mSeriesSet[AO]:AO;AS=new W.TripleId({ObjectId:AY,SeriesId:AV,GroupId:AN});if(!this.mIsSeriesByCol){AS.mSeriesId=(this.mSeriesSet.length>AN)?this.mSeriesSet[AN]:AN;AS.mGroupId=AO;}if(this.mDatasetPtr&&this.mDatasetPtr.useSliceWindow){if(this.mDatasetPtr.IsInSlicedWindow(AS.mSeriesId,AS.mGroupId)===false){return AP;}}if(AM.checkColorByAndSizeByValue(AS,this.mDatasetPtr,this.mHasColorBy&&!AQ,this.mHasSizeBy)===false){return AP;}var AJ=t._RECTANGLE,Aa=c.call(this,AO,AN);e.call(this,AO,AN,Aa);if(AL===s.DssGraphMarkerShapeRectangle||AL===s.DssGraphMarkerShapeGMTick){AH=Y.call(this,AO,AN);if(AL===s.DssGraphMarkerShapeGMTick){AJ=t._TICKER;}if(AH.width<=0){AH.width=1;}if(AH.height<=0){AH.height=1;}if(AL===s.DssGraphMarkerShapeRectangle){AI=new W.RectangleObject({TripleId:AS,GraphObjectManager:this,Area:AH,GraphCollectionObject:Aa,IsOnlyForToolTip:false,Shape:AJ});}else{var AT=AM.transformRectToTicker(AH,false);if(AT.length>=2){AI=new W.StraightLineObject({TripleId:AS,GraphObjectManager:this,StartPoint:AT[0],EndPoint:AT[1],GraphCollectionObject:null,Shape:AJ});}else{return AP;}}}else{if(AQ){var AX=0;if(AL===s.DssGraphMarkerShape2DRingPie){AX=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new W.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:AM,Layout:0,PlotType:U.GMPPT_GRID,MaxRadius:this.mMaxMarkerSize,ShownDataLabels:this.shownDataLabels});}AK=this.mDatasetPtr.GetPieCountAtOneDataPoint(AS.mSeriesId,AS.mGroupId);for(AU=0;AU<AK;++AU){AZ=R.call(this,AS.mSeriesId,AS.mGroupId,AU);AG=this.mPieRenderer.drawSinglePie(AS.mSeriesId,AS.mGroupId,AU,AZ,AK);AP=AP.concat(AG);}}else{var AR=g.call(this,AO,AN),AW=m.call(this,AO,AN);if(AW<=0){return AP;}if(AL===s.DssGraphMarkerShapeSquare){AH=this.mChartContextPtr.transformToRect(AR,AW,true,AH);AI=new W.RectangleObject({TripleId:AS,GraphObjectManager:this,GraphCollectionObject:null,Area:AH,Shape:AJ});}else{AJ=t._CIRCLE;AI=new W.MarkerObject({TripleId:AS,MarkerPosition:AR,MarkerShape:AL,IsIsometric:true,MarkerSize:AW,GraphObjectManager:this,GraphCollectionObject:Aa,Shape:AJ});}}}if(AP.length===0&&AI){AP.push(AI);}return AP;}function l(AI,AM,AL,AG,AK){var AJ=new W.TripleId(r.DssGraphDataText,AL,AG);q.restore();this.mDatasetPtr.getSizeByDataFormat(q,AL,AG);var AH=new W.NumberObject({TripleId:AJ,GraphObjectManager:this,Number:AI,NumberFormat:q,GraphCollectionObject:AK,Locale:0,clientDrag:false,DataSet:null});if(AH){AM=AH.mText;}return AM;}function D(AM,AL){var AJ="",AO=(this.mSeriesSet.length>AM)?this.mSeriesSet[AM]:AM,AI=AL,AK=this.mChartContextPtr.GetGraphMatrixContext(),AH=this.mDatasetPtr,AN=AH.dataLabelStyle;if(!this.mIsSeriesByCol){AO=(this.mSeriesSet.length>AL)?this.mSeriesSet[AL]:AL;AI=AM;}if((AN===N)&&AK.mHasSizeBy){var AG;if(this.mIsSeriesByCol){AG=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AM],AL);}else{AG=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AL],AM);}if(!!AG===false){return null;}AJ=l.call(this,AG,AJ,AO,AI,null);}var AP=new W.TextObject({TripleId:new W.TripleId({ObjectId:r.DssGraphDataText,SeriesId:AO,GroupId:AI}),GraphObjectManager:this,OnMarker:true});AP.SetText(AJ);return AP;}function Z(AH,AK){if(this.mMarkerShape===s.DssGraphMarkerShapeRectangle||this.mMarkerShape===s.DssGraphMarkerShapeGMTick){return new W.Rect2D({Rect2D:Y.call(this,AH,AK)});}var AG=g.call(this,AH,AK),AI=m.call(this,AH,AK),AJ=Math.floor(AI+0.5);return new W.Rect2D({x:AG.x-AJ,y:AG.y-AJ,width:AJ*2,height:AJ*2});}function j(){var AJ,AG,AL=this.mXArity,AI=this.mYArity,AM;for(AJ=0;AJ<AL;++AJ){for(AG=0;AG<AI;++AG){var AN=(this.mSeriesSet.length>AJ)?this.mSeriesSet[AJ]:AJ;var AH=AG;if(!this.mIsSeriesByCol){AN=(this.mSeriesSet.length>AG)?this.mSeriesSet[AG]:AG;AH=AJ;}if(this.mDatasetPtr.showSeriesDatalabel(AN)===false){continue;}var AK=new W.GridDataLabelInfo();AK.mIsValid=true;AK.mGroupId=AH;AK.mSeriesId=AN;AK.mXIndex=AJ;AK.mYIndex=AG;AK.mHostMarkerBound=Z.call(this,AJ,AG);AK.mLabelPtr=D.call(this,AJ,AG);if(AK.mLabelPtr===null||AK.mLabelPtr===undefined){AK.mIsValid=false;continue;}else{}this.mDataLabels.push(AK);}}}function AA(){var AI,AG=286,AN=this.mChartContextPtr,AK=AN.GetGraphMatrixContext(),AH,AJ,AL=this.mMarkerCollectionSet;AL.splice(0,AL.length);var AM;if(this.mHasColorBy){return ;}if(AN.mIsGraphMatrix){AJ=AK.markerToShape(AK.mMarkerShape);}if(AJ!==t._PIE){AI=V.create(AG,0,0);AH=new W.GraphCollectionObject({TripleId:AI,GraphObjectManager:this,CollectionType:C.CT_GENERAL_SHAPE,Shape:AJ});AL.push(AH);}else{}}function f(AH){var AI=this.mDataLabels,AK=AI[AH].mHostMarkerBound,AJ={x:AK.x+0.5*AK.width,y:AK.y+0.5*AK.height},AL=AJ.x,AG=AJ.y;AL+=AK.width%2;AG+=AK.height%2;AI[AH].mLabelPtr.MoveTo(AL,AG,o.CENTER);}function I(AG,AH){return AH*this.mXArity+AG;}function AD(AG,AH){return new W.Rect2D({x:AG.x-AH,y:AG.y-AH,width:AG.width+2*AH,height:AG.height+2*AH});}function G(AH,AI){var AG=new W.Rect2D({x:0,y:0,width:this.mChartContextPtr.mGraphWidth,height:this.mChartContextPtr.mGraphHeight});if(AH.x<AG.x+AI||AH.x+AH.width+AI>=AG.x+AG.width){return false;}return !(AH.y<AG.y+AI||AH.y+AH.height+AI>=AG.y+AG.height);}function H(){var AP,AN,AG=this.mDataLabels,AW=AG.length,AJ=this.mChartContextPtr,AV=AJ.GetGraphMatrixContext(),AK=AV.getPadding(T.kDataLabel),AU,AQ,AO,AS,AX={};for(AU=0;AU<AW;++AU){AS=I.call(this,AG[AU].mXIndex,AG[AU].mYIndex);AX[AS]=AU;}for(AU=0;AU<AW;++AU){var AH,AT,AR,AL,AI=false;f.call(this,AU);AH=this.mDataLabels[AU].mLabelPtr.GetBoundingRectNoRotation(true);AR=AD.call(this,AH,AK);AT=G.call(this,AH,AK);if(!AT){continue;}AP=AG[AU].mXIndex;AN=AG[AU].mYIndex;for(AQ=AP-1;AQ<=AP+1;AQ++){if(AQ<0||AQ>=this.mXArity){continue;}for(AO=AN-1;AO<=AN+1;AO++){if(AO<0||AO>=this.mYArity){continue;}if(AQ===AP&&AO===AN){continue;}AS=I.call(this,AQ,AO);AL=AX[AS];if(AL>=AG.length){continue;}if(!!AG[AL]===false){continue;}if(AG[AL].mIsValid===false||!!AG[AL].mLabelPtr===false){continue;}AI=AR.HasIntersection(AG[AL].mHostMarkerBound);if(AI){break;}if(AG[AL].mIsDisPlayed){var AM=AG[AL].mLabelPtr.GetBoundingRectNoRotation(true);AI=AI||AR.HasIntersection(AM);}if(AI){break;}}if(AI){break;}}if(!AI){AG[AU].mIsDisPlayed=true;AG[AU].mLabelPtr.mIsShown=true;this.AddToMapAndList(this.mDataLabels[AU].mLabelPtr);}else{AG[AU].mLabelPtr.mIsShown=false;}}}function a(){var AL,AG=this.mChartContextPtr;if(AG.mIsGraphMatrix){var AM=AG.GetGraphMatrixContext();if(this.mDatasetPtr.showDatalabels()){var AH=this.dataLabelManager;if(AH===null||AH===undefined){AL=new W.Rect2D({x:0,y:0,width:AG.mGraphWidth,height:AG.mGraphHeight});AH=this.dataLabelManager=new W.DataLabelManager({DataArea:AL});AH.ChartContext=AG;}if(AM.mMarkerShape===s.DssGraphMarkerShape2DPie||AM.mMarkerShape===s.DssGraphMarkerShape2DRingPie){var AK=[];this.mPieRenderer.enableDataLabel(AH,AK);var AI,AN=this.mPieRenderer.dataLabels,AJ=AN.length;for(AI=0;AI<AJ;++AI){var AO=AN[AI].Label;if(AO.mIsShown){this.AddToMapAndList(AO);}}}else{j.call(this);this.mDataLabels.sort(K);H.call(this);}}}}mstrmojo.chart.GridChartPlot=mstrmojo.declare(mstrmojo.chart.GridBasePlot,null,{scriptClass:"mstrmojo.chart.GridChartPlot",mXArity:0,mYArity:0,mDataGroup:1,mIsSeriesByCol:false,mIsAutoFitMode:false,mDataLabelTextMode:0,mMaxDataVal:0,mMinDataVal:0,mMaxMarkerSize:0,mMinMarkerSize:0,mPreXCoord:0,mPreYCoord:0,mUniformColorMode:0,mSeriesSet:null,mMarkerCollectionSet:null,mAutoFitMarkerRect:null,mAdjustMarkerRect:null,mDataLabels:null,mPieRenderer:null,mPieCentersPool:null,init:function x(AG){this._super(AG);this.mSeriesSet=[];this.mMarkerCollectionSet=[];this.mDataLabels=[];this.mAutoFitMarkerRect=new W.Rect2D();this.mAdjustMarkerRect=new W.Rect2D();},AssignSeries:function u(AG){this.mSeriesSet=AG.slice();},GetMaxElementRadius:function AF(){if(this.mMarkerShape===s.DssGraphMarkerShapeRectangle){return Math.min(this.mAdjustMarkerRect.width,this.mAdjustMarkerRect.height);}return this.mMaxMarkerSize;},GenerateMapAndList:function w(){var AJ=this.mDatasetPtr,AG=this.mDataArea,AL,AK,AH,AN,AO;if(AJ===null||AJ===undefined){return ;}if((AJ.mHasMetrics)&&(this.mSeriesSet.length===0)){return ;}if(AG.width*AG.height===0){return ;}y.call(this);E.call(this);AA.call(this);AN=this.mXArity;AO=this.mYArity;for(AL=0;AL<AN;++AL){for(AK=0;AK<AO;++AK){var AI=A.call(this,AL,AK),AM=AI.length;for(AH=0;AH<AM;++AH){this.AddToMapAndList(AI[AH]);}}}if(this.mChartContextPtr.mImageUsage===0){a.call(this);}AJ.resetDataWindow();}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumAnchorPoint","EnumGraphMatrixMarkerTypeInChart","EnumLineStyle","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode","EnumCollectionType","EnumFontStyle");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","PiePlotRenderer","Rect2D","Vector2D","NumberObject","MarkerObject","FormatFill","Point2D","GMDataLabelInfo");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure","mstrmojo.VisUtility");var AR=mstrmojo.chart,Y=AR.common,P=AR.enums,AN=AR.ChartConstants,z=mstrmojo.VisUtility,AW=P.EnumLayout,AB=P.EnumOrientation,y=P.EnumValueAxis,Aa=P.EnumAnchorPoint,AL=P.EnumGraphMatrixMarkerTypeInChart,AU=P.EnumAxisDirection,x=P.EnumImageUsage,a=P.EnumGraphMatrixPiePlotType,w=P.EnumCollectionType;var AK=AR.model,AA=AK.enums,Ae=AA.EnumDSSGraphMarkerShape,O=AA.EnumDSSGraphRegressionType,AJ=AA.EnumDSSGraphDataTextPosition,U=AA.EnumShapeType,AD=P.EnumGraphMatrixElementSizeMode,Ad=AA.EnumDSSGraphObject,E=P.EnumFontStyle;var D=AR.common.Utility;var AP=1e-10,t=0.00001,u=2,G=3,l=1,k=2,j=3,h=4,f=5,d=6;var p=new AR.ChartAdvFormat(),AY=new AR.Point2D(),v=new AR.Point2D(),L=new AR.Point2D();function W(Ak,Aj){var Al;if(Ak.cannotFitVertically===true&&Aj.cannotFitVertically===false){return 1;}if(Ak.cannotFitVertically===false&&Aj.cannotFitVertically===true){return -1;}if(Ak.cannotFitHorizontally===true&&Aj.cannotFitHorizontally===false){return 1;}if(Ak.cannotFitHorizontally===false&&Aj.cannotFitHorizontally===true){return -1;}Al=Ak.overlapRefLabelCount-Aj.overlapRefLabelCount;if(Al<0){return -1;}if(Al>0){return 1;}Al=Ak.overlapRefLineCount-Aj.overlapRefLineCount;if(Al<0){return -1;}if(Al>0){return 1;}Al=Ak.overlapDataLabelCount-Aj.overlapDataLabelCount;return Al;}function o(Aj){switch(Aj){case U._CIRCLE:return Ae.DssGraphMarkerShapeCircle;case U._RECTANGLE:return Ae.DssGraphMarkerShapeRectangle;case U._SQUARE:return Ae.DssGraphMarkerShapeSquare;case U._TICKER:return Ae.DssGraphMarkerShapeGMTick;default:return Ae.DssGraphMarkerShapeNone;}}function Ah(Al,Ak,Ap,Aw,Am,Aj,Au){var Ar=-1,Aq=-1,At=-1,As=new AR.Point2D({x:-1,y:-1}),Ao=this.mpABLPlotContext,An=Ao.mCategoryAxisPtr,Av=Ao.mValueAxis;if(this.mIsVertical){Ar=An.getSubGroupMiddlePos(Ak,Aw,Aj);At=Av[this.mSeriesInfo[Al].mValueAxis].GetPositionByValue(Ap);if(At!==null){Aq=At;}}else{Aq=An.getSubGroupMiddlePos(Ap,Am,Au);At=Av[this.mSeriesInfo[Al].mValueAxis].GetPositionByValue(Ak);if(At!==null){Ar=At;}}if(Ar>=0&&Aq>=0){As.x=Ar;As.y=Aq;}return As;}function e(Av,An,Ax,Ak){var Am=0,Ap,Aj,Ao,Al=1,As=1,Aw,Ar,At=[Av,An,Ax];if(this.mPieCentersPool===null){this.mPieCentersPool=new Y.MapStructure();}var Aq=this.mPieCentersPool.find(At);if(Aq!==null&&Aq!==undefined){return Aq;}Aw=Ak||this.mDatasetPtr.GetPieCountAtOneDataPoint(this.mSeriesInfo[Av].mSeriesId,An);if(this.mIsVertical){Al=Aw;}else{As=Aw;}Ar=this.GetData(Av,An);if(Ar!==null){Am=Ar;}Aj=this.mSeriesInfo[Av].mSeriesId;Ap=An;Ao=Ax;if(this.mIsVertical){var Au;Au=Am;Am=Ap;Ap=Au;Au=Aj;Aj=Ao;Ao=Au;}Aq=Ah.call(this,Av,Am,Ap,Aj,Ao,Al,As);this.mPieCentersPool.replace(At,Aq);return Aq;}function Z(){var Ak=this.mTrendLineObjects.length,Aj;for(Aj=0;Aj<Ak;++Aj){this.mTrendLineObjects[Aj].Draw();}}function R(){var Ak=this.mReferenceLineObjects.length,Aj;for(Aj=0;Aj<Ak;++Aj){this.mReferenceLineObjects[Aj].Draw();}}function B(Al){var Ak,Aj=0;for(Ak=0;Ak<Al.length;Ak++){if(Al[Ak]!==null){Aj++;}}return Aj;}function i(Am,Al,As,Au,Aq,Ak){var Ao,An,Aj,At,Av,Ap,Ar;if(this instanceof mstrmojo.chart.BarSeriesRenderer){Ao={groupID:Al,seriesInfoID:Am,groupIndex:0,useFloat:!Ak};if(Ak){An=this.GetRiserStartPosAndSize(Ao);At=Au.GetPositionByValue(As);}else{An=this.GetRiserStartPosAndSize(Ao);At=Au.GetFloatPositionByValue(As);}Aj=An.Start+An.Size/2;}else{if(this instanceof mstrmojo.chart.AreaSeriesRenderer||this instanceof mstrmojo.chart.LineSeriesRenderer){if(Ak){Aj=this.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(Al);At=Au.GetPositionByValue(As);}else{Aj=this.mpABLPlotContext.mCategoryAxisPtr.getFloatGroupMiddlePos(Al);At=Au.GetFloatPositionByValue(As);}}}Av=Aq?Aj:At;Ap=Aq?At:Aj;Ar=new AR.Point2D({x:Av,y:Ap});return Ar;}function b(Ao){var Am,Aj,Al,An,Ak,Ap;Al=Ao.length;if(Al<=2){Aj=Ao;}else{Aj=[];Aj.push(Ao[0]);for(Am=0;Am+2<Al;++Am){Ap=false;if((Math.abs(Ao[Am].x-Ao[Am+1].x)>AP)&&(Math.abs(Ao[Am+1].x-Ao[Am+2].x)>AP)){An=(Ao[Am+1].y-Ao[Am].y)/(Ao[Am+1].x-Ao[Am].x);Ak=(Ao[Am+2].y-Ao[Am+1].y)/(Ao[Am+2].x-Ao[Am+1].x);if(Math.abs(An-Ak)<t){Ap=true;}}else{if((Math.abs(Ao[Am].x-Ao[Am+1].x)<=AP)&&(Math.abs(Ao[Am+1].x-Ao[Am+2].x)<=AP)){Ap=true;}else{if((Math.abs(Ao[Am].x-Ao[Am+1].x)>AP)&&(Math.abs(Ao[Am+1].x-Ao[Am+2].x)<=AP)){if(Math.abs(Ao[Am+1].y-Ao[Am+2].y)<=AP){Ap=true;}}}}if(!Ap){Aj.push(Ao[Am+1]);}}Aj.push(Ao[Al-1]);}return Aj;}function m(Am,At,Ap,Aj,Al,As,Ar,Ao,An,Aq){var Ak={};Ak.rect=new AR.Rect2D({x:0,y:0,width:Aj+2*An,height:At+2*An});switch(Am){case l:if(Aq){Ak.xOffset=As+An+Al;Ak.yOffset=An+Ap;Ak.rect.x=As;Ak.rect.y=0;}else{Ak.xOffset=Ao-An-Al;Ak.yOffset=As-An-Ap;Ak.rect.x=Ao-2*An-Aj;Ak.rect.y=As-2*An-At;}break;case k:if(Aq){Ak.xOffset=As-An-Al;Ak.yOffset=An+Ap;Ak.rect.x=As-2*An-Aj;Ak.rect.y=0;}else{Ak.xOffset=Ao-An-Al;Ak.yOffset=As+An+Ap;Ak.rect.x=Ao-2*An-Aj;Ak.rect.y=As;}break;case j:if(Aq){Ak.xOffset=As+An+Al;Ak.yOffset=Ar/2;Ak.rect.x=As;Ak.rect.y=Ar/2-An-Ap;}else{Ak.xOffset=Ao/2;Ak.yOffset=As-An-Ap;Ak.rect.x=Ao/2-An-Al;Ak.rect.y=As-2*An-At;}break;case h:if(Aq){Ak.xOffset=As-An-Al;Ak.yOffset=Ar/2;Ak.rect.x=As-2*An-Aj;Ak.rect.y=Ar/2-An-Ap;}else{Ak.xOffset=Ao/2;Ak.yOffset=As+An+Ap;Ak.rect.x=Ao/2-An-Al;Ak.rect.y=As;}break;case f:if(Aq){Ak.xOffset=As+An+Al;Ak.yOffset=Ar-An-Ap;Ak.rect.x=As;Ak.rect.y=Ar-2*An-At;}else{Ak.xOffset=An+Al;Ak.yOffset=As-An-Ap;Ak.rect.x=0;Ak.rect.y=As-2*An-At;}break;case d:if(Aq){Ak.xOffset=As-An-Al;Ak.yOffset=Ar-An-Ap;Ak.rect.x=As-2*An-Aj;Ak.rect.y=Ar-2*An-At;}else{Ak.xOffset=An+Al;Ak.yOffset=As+An+Ap;Ak.rect.x=0;Ak.rect.y=As;}break;}return Ak;}function AO(An,Au,Aq,Ao,Al,Aj){var Ar=An.rect,Ap,Am,Ak,As,At;if(Ar.y<0||Ar.y+Ar.height>Au){An.cannotFitVertically=true;return ;}if(Ar.x<0||Ar.x+Ar.width>Aq){An.cannotFitHorizontally=true;}Ap=Al.length;for(Am=0;Am<Ap;++Am){Ak=Al[Am].GetBoundingRect();if(Ar.HasIntersection(Ak)){++An.overlapRefLabelCount;}}Ap=Aj.length;for(Am=0;Am<Ap;++Am){At=Aj[Am];if(At.isVertical){if(Ar.x<At.position&&Ar.x+Ar.width>At.position){++An.overlapRefLineCount;}}else{if(Ar.y<At.position&&Ar.y+Ar.height>At.position){++An.overlapRefLineCount;}}}Ap=Ao.length;for(Am=0;Am<Ap;++Am){As=Ao[Am];if(As.mIsShown){Ak=As.GetBoundingRect();if(Ar.HasIntersection(Ak)){++An.overlapDataLabelCount;An.overlapDataLabels.push(Ao[Am]);}}}}function r(A6,A1,Ar){var Al=this.mChartContextPtr,A5=Al.GetGraphMatrixContext(),Ak=A5.getPadding(AN.kRefLabel),Aq=Ar.length,Ao,Ap,Ay,Av,An,Aw,Aj,A3,A2,Az,Am,At,A0,Ax,A4,As=this.mpABLPlot.shownDataLabels,Au=this.mpABLPlot.shownRefLabels;for(A3=0;A3<Aq;++A3){Ao=Ar[A3];Ap=new AR.TextObject({TripleId:Ao.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:Ao.identity});if(Ap!==null){Ap.SetText(Ao.labelText);for(A2=0;A2<2;++A2){if(A2===1){Am=Ap.mText;Ap.SetText(Am[0]+"...");Ap.rect.height=0;Ap.rect.width=0;}Aj=Ap.GetBoundingRect();Av=Aj.height;Aw=Av/2;Ay=Aj.width;An=Ay/2;Ax=[];for(Az=l;Az<=d;++Az){At={};At.position=Az;At.cannotFitVertically=false;At.cannotFitHorizontally=false;At.overlapRefLabelCount=0;At.overlapRefLineCount=0;At.overlapDataLabelCount=0;At.overlapDataLabels=[];A0=m.call(this,Az,Av,Aw,Ay,An,Ao.position,A6,A1,Ak,Ao.isVertical);At.xOffset=A0.xOffset;At.yOffset=A0.yOffset;At.rect=A0.rect;AO.call(this,At,A6,A1,As,Au,Ar);Ax.push(At);}Ax.sort(W);if(Ax[0].cannotFitVertically){break;}if(Ax[0].cannotFitHorizontally){if(A3===0){continue;}else{break;}}Ap.MoveTo(Ax[0].xOffset,Ax[0].yOffset,Aa.CENTER);Ap.mIsShown=true;A4=Ax[0].overlapDataLabelCount;for(Az=0;Az<A4;++Az){Ax[0].overlapDataLabels[Az].mIsShown=false;}this.mpABLPlot.mPostTrendLineObjects.push(Ap);Au.push(Ap);break;}}}}mstrmojo.chart.SeriesRenderer=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.SeriesRenderer",mDeviceDataArea:null,mpABLPlot:null,mGroupCount:0,mSeriesCount:0,mDatasetPtr:null,mLegendPtr:null,mSeriesInfo:null,mCumulateData:null,mSeriesNumber:null,mTextCollection:null,mTrendLineObjects:null,mReferenceLineObjects:null,mpABLPlotContext:null,mIsVertical:true,mUseDepth:false,mHasNegativeValue:false,mDepth:0,mDepthDirection:0,mStartLevel:0,mGroupIdMapPerSeries:[],mHasSizeBy:false,mHasColorBy:false,mClippedMarkerSize:null,mPieRenderer:null,mPieCentersPool:null,renderSequence:null,init:function AC(Ak){this._super(Ak);this.mSeriesInfo=[];this.mCumulateData=[[],[]];this.mClippedMarkerSize={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};this.mSeriesNumber=[0,0];this.mTextCollection=[];this.mTrendLineObjects=[];this.mReferenceLineObjects=[];this.mDatasetPtr=Ak.DataSet;this.mLegendPtr=Ak.Legend;this.mDepth=0;this.mDepthDirection=0;this.mHasNegativeValue=false;this.mpABLPlot=this.mpManager;this.mGroupCount=this.mDatasetPtr.GetGroupCount();var Am=this.mpABLPlotContext=this.mpABLPlot.mABLPlotContext;this.mIsVertical=(Am.mABLOptions.mOrientation===AB.OR_VERTICAL);this.mUseDepth=Am.mABLOptions.mUseDepth;if(this.mUseDepth){this.mDepth=this.mpABLPlot.unitLevelDepth;this.mDepthDirection=Am.mABLOptions.mDepthDirection;}var Al=this.mChartContextPtr,Aj=Al.GetGraphMatrixContext();this.mHasSizeBy=Aj.mHasSizeBy;this.mHasColorBy=Aj.mHasColorBy;this.renderSequence=[];},AddSeries:function Ag(Ak,Am,Aj,Al){this.mSeriesInfo.push({mSeriesId:Ak,mSeriesIndex:Am,mDataIndex:Aj,mValueAxis:Al});++this.mSeriesNumber[Al];},GetMinMaxValue:function Q(Az,An,Au,Ar){var Ak=this.mChartContextPtr,Aq,Aw,Ax,At=[],Ao,Am,Al,Ay=this.mSeriesInfo,As,Aj;if(Ay.length===0){return{Min:An,Max:Au,AreInitialized:Ar};}if(Ak.mIsUniformAxisMode){var Ap=Ak.getUniformAxisContext(),Av=Ap.ValueAxis;if(Ak.IsVertical()===false){if(Az===0){return{Min:Av.X1.Min,Max:Av.X1.Max,AreInitialized:true};}else{return{Min:Av.X2.Min,Max:Av.X2.Max,AreInitialized:true};}}if(Az===0){return{Min:Av.Y1.Min,Max:Av.Y1.Max,AreInitialized:true};}return{Min:Av.Y2.Min,Max:Av.Y2.Max,AreInitialized:true};}Aq=Ak.mIsTimeSeriesChart&&this.mpABLPlotContext.mABLOptions.mUseGlobalAutoScale;Aw=0;Ax=this.mDatasetPtr.GetDataGroup();for(Ao=0;Ao<Ay.length;++Ao){if(Ay[Ao].mValueAxis===Az){if(Aq){At.push(Ay[Ao].mSeriesId);}else{for(Am=0;Am<this.mGroupCount;++Am){for(Al=0;Al<Ax;++Al){Aw=this.GetData(Ao,Am,false,Al);if(Aw!==null){continue;}if(!Ar){Ar=true;An=Aw;Au=Aw;}else{Au=Math.max(Aw,Au);An=Math.min(Aw,An);}}}}}}if(Aq&&At.length!==0){As=0;Aj=0;Aw=this.mDatasetPtr.GetPeakValuesAcrossSeries(Aj,As,At,0);Au=(Aw.Max>Au)?Aw.Max:Au;An=(Aw.Min<An)?Aw.Min:An;Ar=true;}return{Min:An,Max:Au,AreInitialized:Ar};},GetData:function AF(Ap,Aq,An,Ak){var Au=this.mpABLPlotContext,As=Au.mABLOptions,Am=this.mpABLPlot,At=As.mLayout,Ax=this.mSeriesInfo,Ao=this.mDatasetPtr,Av=Ax[Ap].mValueAxis,Aw,Ar,Aj,Al;An=An||false;Ak=Ak||0;if((At===AW.LO_STACKED)||(At===AW.LO_PERCENT)){Aw=this.hGetCumulateData(Av,Ax[Ap].mDataIndex,Aq);Ar=Ao.GetData(Ax[Ap].mSeriesId,Aq,Ak);if(Ar!==null){if(An){Aj=Au.mValueAxis[Av].GetBaseValue();Aw=(Aw-Aj-Ar)+Aj;if(D.AlmostZero(Aw)){Aw=0;}}if(At===AW.LO_PERCENT){Al=Am.getGroupTotals(Aq,Av);if(Al===0){Aw=0;}else{Aw/=Al;}}return Aw;}if(At===AW.LO_PERCENT){Al=Am.getGroupTotals(Aq,Av);if(Al===0){Aw=0;}else{Aw/=Al;}}return null;}Ar=Ao.GetData(Ax[Ap].mSeriesId,Aq,Ak);if(Ar!==null){Aw=Ar;}else{Aw=null;}return Aw;},SetDeviceDataArea:function I(Aj){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AR.Rect2D({Rect2D:Aj});}else{this.mDeviceDataArea.ResetRect(Aj);}}},IsReverseSeriesOrder:function c(Al){var Aj=this.mpABLPlotContext.mValueAxis,Ak;if(Al>=Aj.length){return false;}Ak=Aj[Al];return this.mChartContextPtr.IsReverseSeriesOrder(Ak,this.mIsVertical,this.mDepthDirection);},IsReverseGroupOrder:function n(){return this.mChartContextPtr.IsReverseGroupOrder(this.mIsVertical,this.mDepthDirection);},PriorToNextSeries:function N(Ak){var An=this.mChartContextPtr,Al,Am,Aj=false;Al=this.mIsVertical?new AR.Vector2D({x:1,y:0}):new AR.Vector2D({x:0,y:1});Am=An.normalDirection(Ak,this.mDepthDirection)*An.normalDirection(Al,this.mDepthDirection);if(Am===0){Aj=this.mIsVertical?(Ak.y>0):(Ak.x<0);}else{Aj=Am>0;}return Aj;},CreateTotalLabel:function S(Aq,Ak,Ao){var Ar=this.mSeriesInfo,An=true,Am=0,Al,Ap,Aj;for(Al=0;Al<Ar.length;++Al){if(Ar[Al].mValueAxis===Aq&&this.mpABLPlotContext.mSeriesOptions[Ar[Al].mSeriesIndex].mShowDataLabels){Ap=this.mDatasetPtr.GetData(Ar[Al].mSeriesId,Ak);if(Ap!==null){Am+=Ap;if(An){An=false;}}}}if(An){return null;}Aj=new AR.NumberObject({TripleId:new AR.TripleId({ObjectId:401,SeriesId:Aq,GroupId:Ak}),GraphObjectManager:this,Number:Am,NumberFormat:this.mpABLPlotContext.mSeriesOptions[0].mGraphNumberFormat,GraphCollectionObject:Ao,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr});this.AddToMap(Aj);Ao.AddGraphObject(Aj);return Aj;},GetUpmostIndexByValueAxisAndGroup:function M(Ap,Am){var An=this.mSeriesInfo,Ak,Al,Ao,Aj;Ak=-1;Aj=An.length;for(Al=Aj-1;Al>-1;--Al){if(An[Al].mValueAxis===Ap){Ao=this.mDatasetPtr.GetData(An[Al].mSeriesId,Am);if(Ao!==null){Ak=Al;if(Ao>0){break;}}}}return Ak;},createRiserLabel:function AS(Aj,Ak,An){var As=this.mSeriesInfo,Ar=As[Aj],Am=this.mpABLPlotContext.mABLOptions,Al,Ao,Aq=null,Ap="";Al=this.mDatasetPtr.GetData(Ar.mSeriesId,Ak);if(Al===null){return null;}Ao=0;if(((Am.mLayout===AW.LO_STACKED)||(Am.mLayout===AW.LO_PERCENT))&&(!Am.mShowCumulate)){Ao=Al;if(Am.mLayout===AW.LO_PERCENT&&Am.mShowAsPercentage){Ao/=this.mpABLPlot.getGroupTotals(Ak,Ar.mValueAxis);}}else{if(Am.mLayout===AW.LO_PERCENT&&!Am.mShowAsPercentage){Ao=this.hGetCumulateData(Ar.mValueAxis,Ar.mDataIndex,Ak);}else{Ao=this.GetData(Aj,Ak);if(Ao===null||Ao===undefined){return null;}}}Am.mShowValue=true;if(Am.mShowValue){Aq=this.mpABLPlotContext.mSeriesOptions[Ar.mSeriesIndex].mGraphNumberFormat;}if(Am.mShowLabel){Ap=this.mDatasetPtr.GetSeriesLabel(Ar.mSeriesId,false);}return this.mpABLPlot.createRiserLabel(new AR.TripleId({ObjectId:Ad.DssGraphDataText,SeriesId:Ar.mSeriesId,GroupId:Ak}),Ao,Aq,Ap,An);},AddTextToMapAndList:function AH(){},GetIndexFromSeriesId:function Ai(Am){var Al=this.mSeriesInfo,Aj=Al.length,Ak;for(Ak=0;Ak<Aj;++Ak){if(Al[Ak].mSeriesId===Am){return Ak;}}return -1;},AddLegendMarkerToCollection:function s(An,Ak,Aj,Al,Am,Ao){Aj=Aj||false;Al=(Al===undefined)?true:Al;Am=Am||Ae.DssGraphMarkerShapeRectangle;Ao=(Ao===undefined)?true:Ao;this.mpABLPlot.AddLegendMarkerToCollection(this.mSeriesInfo[An].mSeriesId,Ak,Aj,Al,Am,Ao);},MoveLabel:function AM(Ax,Aw,A5,A3,Aj){var A1=this.mSeriesInfo,Ay=this.mpABLPlotContext.mABLOptions,A8,As,A7,Aq,Av,Ap,Ak,Ar,A0,A2,Ao,An,Am,A4,A6,Al,Au,At,Az,A9;if(Aw===null||Aw===undefined){return ;}A8=this.mpABLPlotContext.mValueAxis[A1[Aj].mValueAxis].IsReverseOrder();As=A8;A7=A8?-1:1;Aq=0;A9=this.GetData(Aj,Ax);if(A9!==null&&A9!==undefined){Aq=A9;}if(A9&&(Aq<0)){A7=-A7;As=!As;}v.Reset(A5.x,A5.y);L.Reset(A3.x,A3.y);Av=v;Ap=L;if(this.mIsVertical){if(As){if(Av.y<Ap.y){Av.swapPoints(Ap);}}else{if(Ap.y<Av.y){Av.swapPoints(Ap);}}}else{if(As){if(Ap.x<Av.x){Av.swapPoints(Ap);}}else{if(Av.x<Ap.x){Av.swapPoints(Ap);}}}Ak=Aw.GetBoundingRect();Ar=Math.floor(Ak.width/2);A0=Math.floor(Ak.height/2);AY.Reset(Av.x,Av.y);A2=AY;Ao=Aw.mTripleId;An=(Ao.mObjectId===Ad.DssGraphDataTextStackTotal);Am=An?AJ.DssGraphDTPositionOutMax:Ay.mTextPosition;if(Am===AJ.DssGraphDTPositionOutMin||Am===AJ.DssGraphDTPositionInMin){A2.x=Ap.x;A2.y=Ap.y;}switch(Am){case AJ.DssGraphDTPositionCenter:A2.x=(A2.x+Ap.x)/2;A2.y=(A2.y+Ap.y)/2;break;case AJ.DssGraphDTPositionInMin:case AJ.DssGraphDTPositionOutMax:if(this.mIsVertical){A2.y-=A0*A7;}else{A2.x+=Ar*A7;}break;case AJ.DssGraphDTPositionOutMin:case AJ.DssGraphDTPositionInMax:if(this.mIsVertical){A2.y+=A0*A7;}else{A2.x-=Ar*A7;}break;default:break;}if(An&&Ay.mTextPosition===AJ.DssGraphDTPositionOutMax){A4=this.GetUpmostIndexByValueAxisAndGroup(y.VA_Y1,Ax);A6=this.mpManager.GetGraphObject(new AR.TripleId({ObjectId:Ad.DssGraphDataText,SeriesId:A1[A4].mSeriesId,GroupId:Ax}));if(!A6){Aw.MoveTo(A2.x,A2.y,Aa.CENTER);return ;}Al=A6.GetBoundingRect();Au=A6.GetFormatFont();At=Aw.GetFormatFont();Az=Au.mFontSize+At.mFontSize;if(this.mIsVertical){if(Au.isHorizontal()||At.isHorizontal()){A2.y-=Math.floor(Al.height+Az/3)*A7;}else{if(Au.isVertical()){A2.x+=Az;}else{A2.x+=Math.floor(Az*Math.SQRT2);}}}else{if(Au.isVertical()||At.isVertical()){A2.x+=Math.floor(Al.width+Az/3)*A7;}else{if(Au.isHorizontal()){A2.y+=Az;}else{A2.y+=Math.floor(Az*Math.SQRT2);}}}}Aw.MoveTo(A2.x,A2.y,Aa.CENTER);},updateGroupStackInfoWithBase:function AG(Au,An,Ay){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}function Ax(A3,A2){var A1=A2+1;for(;A1<A3.length;A1++){if(A3[A1]!==null&&A3[A1]!==undefined){return Math.min(A3[A1],Ay);}}return Ay;}function Ao(A3,A2){var A1=A2-1;for(;A1>=0;A1--){if(A3[A1]!==null&&A3[A1]!==undefined){return Math.max(A3[A1],Ay);}}return Ay;}var Aq=this.mStackedGroupInfos,Ak;if(Aq[Au]&&Aq[Au][An]){return Aq[Au][An];}var Av=Aq[Au],As,Az=[],Al=this.mSeriesInfo,At=Al.length;var Ap=[],Ar=[];for(As=0;As<At;As++){var Am=this.GetData(As,An),A0={Min:Am,Max:Am,SeriesIndex:As};(Am>=0)?Ap.push(A0):Ar.unshift(A0);}Ak=Ar.concat(Ap);var Aj=[],Aw=-1;for(As=0;As<Ak.length;As++){Az[Ak[As].SeriesIndex]=As;Aj.push(Ak[As].Max);}for(As=0;As<Ak.length;As++){if(Ak[As].Max!==null&&Ak[As].Max!==undefined){if(Ak[As].Max>=Ay){Ak[As].Min=Ao(Aj,As);}else{Ak[As].Max=Ax(Aj,As);}}}Av[An]=Ak;Aq[Au+2][An]=Az;return Av[An];},getGroupStackedInformation:function AQ(Av,Ap){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}var Am=this.mStackedGroupInfos;if(Am[Av]&&Am[Av][Ap]){return Am[Av][Ap];}var Aj=Am[Av],Ar,Ak=[],As=this.mSeriesInfo,Ao=As.length;var Aq=[],An=[];for(Ar=0;Ar<Ao;Ar++){var At=this.GetData(Ar,Ap,true),Au=this.GetData(Ar,Ap),Al={Min:Math.min(At,Au),Max:Math.max(At,Au),SeriesIndex:Ar};(Au>=0)?Aq.push(Al):An.unshift(Al);}Aj[Ap]=An.concat(Aq);for(Ar=0;Ar<Aj[Ap].length;Ar++){Ak[Aj[Ap][Ar].SeriesIndex]=Ar;}Am[Av+2][Ap]=Ak;return Aj[Ap];},getSeriesOffsetIntoStackedInfo:function J(Ap,Am,Ak){var Ao=this.mStackedGroupInfos;if(Ao[Ap+2]&&Ao[Ap+2][Am]){return Ao[Ap+2][Am][Ak];}var Aj=Ao[Ap],An=Aj[Am],Al;for(Al=0;Al<An.length;Al++){if(An[Al].SeriesIndex===Ak){return Al;}}return Ak;},analyzeGroupInfo:function T(Ap,Ao,An){this.groupStackAnalysis=this.groupStackAnalysis||[[],[]];if(this.groupStackAnalysis[Ap][Ao]){return this.groupStackAnalysis[Ap][Ao];}var Aj=this.groupStackAnalysis[Ap],Am=this.getGroupStackedInformation(Ap,Ao),Al,Ak={Reverse:3};if(Am&&Am.length){Al=Am.length-1;if(Am[Al].Max<=An){Ak={Reverse:0,CeilUpdated:Al};}else{if(Am[0].Min>=An){Ak={Reverse:1,FloorUpdated:0};}else{for(Al=0;Al<Am.length;Al++){if(Am[Al].Max>=An){Ak.FloorUpdated=Al;Ak.CeilUpdated=Al>0?Al-1:-1;}}}}}else{Ak={Reverse:4};}Aj[Ao]=Ak;return Aj[Ao];},UpdateCumulateData:function AX(Az,At,Ax){var As=this.mSeriesInfo,Ap=this.mDatasetPtr,Al=this.mGroupCount,Ar=this.mCumulateData,A1,Ak,Aj,Ay,Aw,Av,Au,Aq=this.mChartContextPtr.IsDualAxis(),A2=Ax!==undefined&&Ax>=0,Am,A0,A3,An;if(A2){var Ao=Ap.GetValueAxisBySeries(Ax);if(Ao!==Az){return At;}}A1=As.length;if(A1===0){return At;}Ay=A1;if(Aq){Ak=this.mSeriesNumber[0];Aj=A1-Ak;}for(Aw=0;Aw<Al;++Aw){Am=(At&&At.positive[Aw])||0;A0=(At&&At.negative[Aw])||0;for(Av=0;Av<A1;++Av){if(A2){if(As[Av].mSeriesId!==Ax){continue;}}if(As[Av].mValueAxis===Az){A3=Ap.GetData(As[Av].mSeriesId,Aw);An=0;if(A3!==null&&A3!==undefined){An=A3;if(An<0){this.mHasNegativeValue=true;An+=A0;A0=An;}else{An+=Am;Am=An;}}else{An=Am;}if(A2){if(An>=0){At.positive[Aw]=An;}else{At.negative[Aw]=An;}if(Aq){Ay=Az===y.VA_Y1?Ak:Aj;}Au=Aw*Ay+As[Av].mDataIndex;Ar[Az][Au]=An;}else{Ar[Az].push(An);if(Av===A1-1){if(An>=0){At.positive[Aw]=An;}else{At.negative[Aw]=An;}}}}}}return At;},AddBaseToCumulateData:function AI(Am,Al){var Aj=this.mCumulateData[Am].length,Ak;for(Ak=0;Ak<Aj;++Ak){this.mCumulateData[Am][Ak]+=Al;}},drawSingleDataPoint:function V(Au,At,Ak,Aq){var Ao=this.mChartContextPtr,Ax=Ao.GetGraphMatrixContext(),Al=0,Aw,Av,A0,Ap,Aj,Ay,As=[],Ar=this.mpABLPlot.shownDataLabels;var Am=Ax.mMarkerShape;if(Am===Ae.DssGraphMarkerShape2DPie||Am===Ae.DssGraphMarkerShape2DRingPie){if(this.mPieRenderer===null){var Az=0;if(Am===Ae.DssGraphMarkerShape2DRingPie){Az=1;}this.mPieRenderer=new AR.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:this.mChartContextPtr,Layout:Az,PlotType:a.GMPPT_CATEGORY,ShownDataLabel:Ar});}var An=this.mPieRenderer;Al=this.mDatasetPtr.GetPieCountAtOneDataPoint(Au.mSeriesId,Au.mGroupId);for(Aw=0;Aw<Al;++Aw){if(Ao.checkColorByAndSizeByValue(Au,this.mDatasetPtr,false,this.mHasSizeBy)===false){As.push({Object:null,ShapeSize:Ap});continue;}if(Ao.mImageUsage===x.GENERAL){A0=e.call(this,Au.mSeriesId,Au.mGroupId,Aw,Al);Aj=An.drawSinglePie(Au.mSeriesId,Au.mGroupId,Aw,A0,Al);for(Av=0;Av<Aj.length;Av++){if(Aj[Av]){As.push({Object:Aj[Av],ShapeSize:Aj[Av].getShapeSize()});}}}else{if(Ao.mImageUsage===x.OBJECT_CLIP_COMPUTATION){Ap=An.getShapeSizeAt(Au.mSeriesId,Au.mGroupId,Aw,!this.mHasSizeBy);As.push({Object:null,ShapeSize:Ap});}}}}else{if(Ak===U._COMBINED){Ak=this.mDatasetPtr.GetShapeByCell(Au.mSeriesId,Au.mGroupId);if(Ak===U._GENERIC){Ak=U._CIRCLE;}}Ay=this.drawSinglePoint(Au,At,Ak,Aq);As.push(Ay);}return As;},drawSinglePoint:function Ac(Ay,Ax,Am,Aw){var Ap=(Am!==undefined)?Am!==U._LINE:false,Ar=this.mChartContextPtr,A1=Ar.GetGraphMatrixContext(),As=this.mGroupCount,A2,Ao,Aq,A0,An,Av,Al,Az=this.mDatasetPtr.getForecastCount();if(Ar.checkColorByAndSizeByValue(Ay,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return{Object:null,ShapeSize:0};}if(Aw===U._AREA){Ap=false;}Aq=o.call(this,Am);if(Ar.RenderClusterShapes()){if(!(As===1&&Am===2)){As*=this.mSeriesInfo.length;}}if(Aq===Ae.DssGraphMarkerShapeGMTick){A0=A1.GetMaxMarkerSize(AL._TICK_CATEGORY,Ar.IsVertical(),As);}else{if(Am===U._AREA||Aw===U._AREA){A0=A1.GetMaxElementSizeInAreaChart(this.mIsVertical,As,!Ap,Az);}else{A0=A1.GetMaxElementSizeInLineChart(this.mIsVertical,As,!Ap,Aq);}}Ao=this.mDatasetPtr.GetGroupCount();if(this.mHasSizeBy){A2=this.mDatasetPtr.GetSizeByData(Ay.mSeriesId,Ay.mGroupId);if(A2!==null&&A2!==undefined){if(Aq===Ae.DssGraphMarkerShapeNone&&(A1.mMaxSizeVal===A1.mMinSizeVal)){if(!Ap&&Ao>=3){A0=A1.GetAdjustThicknessValue(A1.mConstants.MinimalSize.General);}A0=Math.round(Math.max(A0,1));}else{A0=A1.GetScaledSize(A2,A0,Am);A0=Math.max(Math.round(A0),A1.mConstants.MinimalSize.General);}}}if(Ar.mImageUsage===x.OBJECT_CLIP_COMPUTATION){var Au=A0;if(Aq===Ae.DssGraphMarkerShapeGMTick){Au=Math.round(0.5*(this.mIsVertical?A1.mConstants.FixedTickerSize:A0));}return{Object:null,ShapeSize:Au};}if(Aq===Ae.DssGraphMarkerShapeNone){Aq=Ae.DssGraphMarkerShapeCircle;}if(Aq===Ae.DssGraphMarkerShapeGMTick){var Ak,Aj,At=Math.round(0.5*A0);if(Ar.IsVertical()){Ak={x:Ax.x-At,y:Ax.y};Aj={x:Ax.x+At,y:Ax.y};}else{Ak={y:Ax.y-At,x:Ax.x};Aj={y:Ax.y+At,x:Ax.x};}An=new AR.StraightLineObject({TripleId:Ay,GraphObjectManager:this,StartPoint:Ak,EndPoint:Aj,GraphCollectionObject:null,Shape:U._TICKER});}else{if(Aq===Ae.DssGraphMarkerShapeSquare||Aq===Ae.DssGraphMarkerShapeRectangle){Al=this.mChartContextPtr.transformToRect(Ax,A0,true);An=new AR.RectangleObject({TripleId:Ay,GraphObjectManager:this,GraphCollectionObject:null,Area:Al,Shape:U._RECTANGLE,hasFill:true});}else{An=new AR.MarkerObject({TripleId:Ay,GraphObjectManager:this,MarkerPosition:Ax,MarkerShape:Aq,IsIsometric:true,MarkerSize:A0,GraphCollectionObject:null,IsDialogSize:false,Shape:U._CIRCLE,hasFill:true});}}if(A1.mMarkerShape===Ae.DssGraphMarkerShapeNone){A1.AddToIsolatedDotList(Ay);if(Ay.mObjectId!==Ad.DssGraphDataMarker){Av=new AR.TripleId({ObjectId:Ad.DssGraphDataMarker,SeriesId:Ay.mSeriesId,GroupId:Ay.mGroupId});A1.AddToIsolatedDotList(Av);}}return{Object:An,ShapeSize:An.getShapeSize()};},getCorrectGroupIdInSeriesPoints:function Ab(Aj,Al){var Ak=this.mGroupIdMapPerSeries[Aj];if(Ak!==null&&Ak!==undefined){return Ak;}return Al;},prepareTransitionalGradient:function g(Aj,Ao,Ap){var Am,Al,An={Effective:false};if(Ap!==undefined){Ap=Math.min(Ao.length,Ap);}else{Ap=Ao.length;}An.Colors=[];for(Am=0;Am<Ap;Am++){var Ak=this.mDatasetPtr.GetColorByData(Aj.mSeriesId,Aj.mGroupId+Am);if(Ak===null){Ak=this.mDatasetPtr.GetDefaultShapeFillColor();}if(Am===0){Al=Ak;An.StartGraphColor=Ak;}else{if(Am===Ap-1){An.EndGraphColor=Ak;An.Effective=An.Effective||Ak!==Al;}else{An.Colors.push({Color:Ak,Step:Am/(Ap-1)});An.Effective=An.Effective||Ak!==Al;}}}An.Style=1;An.EndAlpha=255;An.Angle=this.mChartContextPtr.IsVertical()?0:1;return An;},getMaxElementOffsetClippedByBoundary:function AE(Aj,Am,Ak){var An=Am?(Ak?"X1":"X2"):(Ak?"Y1":"Y2");if(this.mClippedMarkerSize[An]){var Al=this.mClippedMarkerSize[An];Aj.LowOffset=Math.max(Al.LowOffset,Aj.LowOffset);Aj.HighOffset=Math.max(Al.HighOffset,Aj.HighOffset);}else{Aj.LowOffset=Math.max(0,Aj.LowOffset);Aj.HighOffset=Math.max(0,Aj.HighOffset);}},CreateOneDataMarker:function F(Ak,At,As,Az,Aw,A6){var Ay=this.mSeriesInfo[Ak],Ao=this.mChartContextPtr,A0=new AR.TripleId({ObjectId:Ad.DssGraphRiser,SeriesId:Ay.mSeriesId,GroupId:At}),A2=Ao.GetGraphMatrixContext(),Au=this.mDatasetPtr,Am=Au.GetShapeBySeries(Ay.mSeriesId),A3=(Am===U._LINE||Am===U._GENERIC),Ax=(Am===U._AREA),Ap=A2.IsIsolatedDot(A0),Ar=A2.mHasSizeBy,A4,Av,Aj,Aq;A6=A6||false;var A5,An=Ae.DssGraphMarkerShapeCircle;if(A2.mMarkerShape===Ae.DssGraphMarkerShapeCombined){A4=(Am===U._CIRCLE||Am===U._RECTANGLE||Am===U._SQUARE);}else{A4=(A2.mMarkerShape===Ae.DssGraphMarkerShapeCircle||A2.mMarkerShape===Ae.DssGraphMarkerShapeRectangle||A2.mMarkerShape===Ae.DssGraphMarkerShapeSquare);}A5=(!Ap&&!A4&&!Ar);if(!A5){return ;}Aj=this.mDatasetPtr.getMarkerShapeInfoAt(Ay.mSeriesId,At);A5=(Aj.Show||A6)&&An!==undefined;if(!A5){return ;}An=Aj.Shape;As=null;var A7=new AR.TripleId({ObjectId:Ad.DssGraphDataMarker,SeriesId:Ay.mSeriesId,GroupId:At}),A1=Aj.Size||3;if(A6){An=Ae.DssGraphMarkerShapeCircle;A1=A2.mConstants.FixedDataMarkerSize;}if(An===Ae.DssGraphMarkerShapeCircle){Av=new AR.MarkerObject({TripleId:A7,MarkerPosition:Az,MarkerShape:An,IsIsometric:true,MarkerSize:A1,GraphCollectionObject:As,GraphObjectManager:this,IsDialogSize:false,Shape:U._CIRCLE});}else{if(An===Ae.DssGraphMarkerShapeRectangle||An===Ae.DssGraphMarkerShapeSquare){var Al=this.mChartContextPtr.transformToRect(Az,A1,true);Av=new AR.RectangleObject({TripleId:A7,GraphObjectManager:this,GraphCollectionObject:As,Area:Al,Shape:U._RECTANGLE});}}Aq=this.mGraphObjectList;if(A3){Aq.push(Av);}else{if(Ax){Aq.push(Av);}}},CreateAllDataLabels:function A(){var Am,Ak,An,Ao,At=this.mTextCollection,Al,Ar,Au=true,Aq=this.mDataLabels,Ap=this.mSeriesInfo,Aj,As;An=new AR.TripleId({ObjectId:Ad.DssGraphDataText});if(Au){Ao=new AR.GraphCollectionObject({TripleId:An,GraphObjectManager:this,CollectionType:w.CT_TEXT});}for(Am=0;Am<Ap.length;++Am){As=Ap[Am].mSeriesId;if(this.mDatasetPtr.showSeriesDatalabel(As)===false){continue;}if(!Au){Ao=new AR.GraphCollectionObject({TripleId:An,GraphObjectManager:this,CollectionType:w.CT_TEXT});}At.push(Ao);for(Ak=0;Ak<this.mGroupCount;++Ak){Al=this.mDatasetPtr.GetData(As,Ak);if(Al!==undefined&&Al!==null){Ar=this.CreateOneDataLabel(As,Ak,Al,Ao);if(Ar!==null&&Ar!==undefined){Aj=new AR.GMDataLabelInfo({SeriesId:As,GroupId:Ak,SeriesInfo:Am,isValid:true,Label:Ar});Ar.mIsShown=false;Aq.push(Aj);this.AddToMapAndList(Ar);}}}}},hGetCumulateData:function X(Al,Ak,Aj){return this.mCumulateData[Al][Aj*this.mSeriesNumber[Al]+Ak];},GetAccompanyPoints:function AZ(Al,An){var Am=new AR.Point2D(),Aj=new AR.Point2D(),Ak={};Am.x=Al.x;Am.y=Al.y;Aj.x=Al.x;Aj.y=Al.y;if(this.mIsVertical){Am.y-=An;Aj.y+=An;}else{Am.x-=An;Aj.x+=An;}Ak.lowPoint=Am;Ak.highPoint=Aj;return Ak;},CreateOneDataLabel:function Af(Ay,Ao,Aj,Au){var Ap=Aj,As="",Av,Ar,Am,Az,An,Ax,Aw,Aq,At,Al=this.mpABLPlot.realComboChart,Ak;Ar=new AR.TripleId({ObjectId:Ad.DssGraphDataText,SeriesId:Ay,GroupId:Ao});An=this.mDatasetPtr;Aw=this.mpABLPlotContext;Aq=Aw.mABLOptions;At=Aq.mLayout;if(At===AW.LO_STACKED||At===AW.LO_PERCENT){Ap=An.GetData(Ay,Ao);}Ax=An.dataLabelStyle;switch(Ax){case u:Av=this.mSeriesInfo[0].mValueAxis;p.restore();An.getGridDataFormat(p,Ay,Ao,0);Am=new AR.NumberObject({TripleId:Ar,GraphObjectManager:this,Number:Ap,NumberFormat:p,GraphCollectionObject:Au,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(Am){As=Am.mText;Az=Am;}break;case G:As=this.mDatasetPtr.GetTextLabel(Ay,Ao);Az=new AR.TextObject({TripleId:Ar,GraphObjectManager:this,GraphCollectionObject:Au});break;}if(As.length!==0){Az.SetText(As);if(Al){Ak=Az.mFormatFontPtr;Ak.mFontStyle=E.FS_BOLD;Az.strokeBBox();}return Az;}return null;},Draw:function AT(){this._super();Z.call(this);R.call(this);},updateSeriesRenderSequence:function q(Ak,Aq,Am){var Ao,Al,An=0,Ap=this.renderSequence,Aj=Ap.length;if(Am===undefined){Am=true;}Aq=Am?Aq:0;for(Ao=0;Ao<Aj;Ao++){Al=Ap[Ao];if(Al!==null&&Al!==undefined){An++;Ak[Ao]=Al+Aq;}}if(Am){return Aq+An;}return 0;},populateRenderSequence:function AV(An){if(An){this.renderSequence=An;}else{var Ak,Al=this.renderSequence,Am=this.mSeriesInfo,Aj=Am.length;Al.splice(0,Al.length);for(Ak=0;Ak<Aj;Ak++){Al[Am[Ak].mSeriesId]=Ak;}}},evalBarStyleUnitWidth:function H(Aj,Am,Ao){var Ap=this.mChartContextPtr,Al=Ap.GetGraphMatrixContext(),Ak={unitWidth:0,columns:1,riserGap:0,groupGap:0,overlapRatio:0,gapRatio:10};if(Ao===undefined){Ao=10;var An=Al.mElementsInfo;if(An.Max.Mode===AD._MANUAL){Ao=An.Max.Size*100;if(Ao<1){Ao=1;}if(Ao>100){Ao=99;}Ak.gapRatio=100-Ao;}}else{Ak.gapRatio=Ao;}Ak.columns=Am||this.mSeriesInfo.length;Ak.unitWidth=(Aj*(1-Ak.gapRatio/100)/Ak.columns);if(Ap.mIsGraphMatrix){if(Ak.unitWidth>2){Ak.unitWidth-=1;}if(Al.mElementsInfo.Max.Mode===AD._AUTOMATIC){Ak.unitWidth=Math.min(Ak.unitWidth,Al.mConstants.MaximalSize.Bar);}if(this.mHasSizeBy===false){if(!Ap.isCompactMode()){Ak.unitWidth=Math.max(Ak.unitWidth,Al.mConstants.MinimalSize.Bar);}}Ak.gapRatio=(1-Ak.unitWidth*Ak.columns/Aj)*100;Ak.riserGap=0;Ak.groupGap=Aj*Ak.gapRatio/100;}return Ak;},GenerateTrendLine:function K(){var A3=this.mpABLPlotContext,At,A4,Aq=A3.mCategoryAxisPtr,BF,BD,BB,Ay,BC,BI,Ax,A9,BE=this.mDatasetPtr,A0=this.mChartContextPtr,Az=this.mSeriesInfo,Ar=Az.length,Al,A1,A7,Am,Ap,A2,A5=[],As,A6,BH,A8,Ak,Aj,Au,Av,An,BG,Aw={},BA={},Ao={};if(BE.isBare(A0.IsPieChart())){return ;}if(Aq.mAxisInfo.mAxisDirection===AU.AD_X){A4=true;}else{A4=false;}for(BF=0;BF<Ar;++BF){A5=[];Al=Az[BF];A1=Al.mSeriesId;At=BE.GetTrendLineOfSeries(A1);Am=Al.mValueAxis;Ap=A3.mValueAxis[Am];As=new AR.TripleId({ObjectId:Ad.DssGraphTrendLine,SeriesId:A1});if(!!At===false){continue;}Ay=At.getTrendLineType();if(Ay===O.DssGraphRegressionNone){continue;}A8=At.getIdentity();BI=At.getTrendLineValuesWithForecast();Ax=At.getTrendLineValues();BC=At.getSeasonalityType();if(B(Ax)<=1){continue;}if(!!BI===false||BI.length===0){continue;}A9=BI.length;if(Ay===O.DssGraphRegressionLinear){if(BC!==0){for(BD=0;BD<A9;++BD){A7=BI[BD];if(A7!==null&&A7!==undefined){A2=i.call(this,BF,BD,A7,Ap,A4,true);if(A2.x!==null&&A2.y!==null){A5.push(A2);}else{z.visPrint("Trendline point calculation abnormal:");z.visPrint("\tseries #: "+BF+", data point #:"+BD);z.visPrint("\tvalue = "+A7);z.visPrint("\tx = "+A2.x+", y = "+A2.y);}}}A5=b.call(this,A5);BG=A5.length;if(BG>=2){Av=A5[0].x;An=A5[BG-1].x;Ak=(Av+An)/2;for(BF=0;BF<BG;++BF){if(A5[BF].x===Ak){Aj=A5[BF].y;break;}else{if(BF<BG-1&&A5[BF].x<Ak&&A5[BF+1].x>Ak){Au=(A5[BF+1].y-A5[BF].y)/(A5[BF+1].x-A5[BF].x);Aj=A5[BF].y+Au*(Ak-A5[BF].x);break;}}}BA.x=Ak;BA.y=Aj;}}else{for(BD=0;BD<A9;++BD){A7=BI[BD];if(A7!==null&&A7!==undefined){A2=i.call(this,BF,BD,A7,Ap,A4,true);if(A2.x!==null&&A2.y!==null){A5.push(A2);break;}else{z.visPrint("Trendline point calculation abnormal:");z.visPrint("\tseries #: "+BF+", data point #:"+BD);z.visPrint("\tvalue = "+A7);z.visPrint("\tx = "+A2.x+", y = "+A2.y);}}}for(BB=A9-1;BB>BD;--BB){A7=BI[BB];if(A7!==null&&A7!==undefined){A2=i.call(this,BF,BB,A7,Ap,A4,true);if(A2.x!==null&&A2.y!==null){A5.push(A2);break;}else{z.visPrint("Trendline point calculation abnormal:");z.visPrint("\tseries #: "+BF+", data point #:"+BB);z.visPrint("\tvalue = "+A7);z.visPrint("\tx = "+A2.x+", y = "+A2.y);}}}BG=A5.length;if(BG>=2){Ak=(A5[0].x+A5[1].x)/2;Aj=(A5[0].y+A5[1].y)/2;BA.x=Ak;BA.y=Aj;}}if(BG>=2){Aw.x=A5[0].x;Aw.y=A5[0].y;Ao.x=A5[BG-1].x;Ao.y=A5[BG-1].y;A6=new AR.PolyLineObject({TripleId:As,GraphObjectManager:this,PolyLine:A5,Shape:U._LINE,Identity:A8,startPoint:Aw,midPoint:BA,endPoint:Ao});if(A6!==null){this.mTrendLineObjects.push(A6);}}}else{for(BD=0;BD<A9;++BD){A7=BI[BD];if(A7!==null&&A7!==undefined){A2=i.call(this,BF,BD,A7,Ap,A4,false);if(A2.x!==null&&A2.y!==null){A5.push(A2);}else{z.visPrint("Trendline point calculation abnormal:");z.visPrint("\tseries #: "+BF+", data point #:"+BD);z.visPrint("\tvalue = "+A7);z.visPrint("\tx = "+A2.x+", y = "+A2.y);}}}if(A5.length>=2){BH=new AR.CurveLineObject({TripleId:As,GraphObjectManager:this,Points:A5,IsVertical:A4,Identity:A8,Shape:U._CURVE});if(BH!==undefined&&BH!==null){this.mTrendLineObjects.push(BH);}}}}},GenerateRefLine:function C(){var An=this.mpABLPlotContext,Ar=this.mChartContextPtr,A5=Ar.mGraphWidth,BC=Ar.mGraphHeight,Ay=this.mSeriesInfo.length,Am,A1,A9,A6,As,BA,A2,BE,A7=[],Ao,A8,Az,Al,A4,BG,Aq,Ap,BF,BB,Ak,At={},BD,Aj,Aw=this.mDatasetPtr,Av,Ax=[],Au,A3=Aw.GetSeriesCount()*Aw.GetGroupCount();if(Ar.mPartialRendering===false){A3=this.mpABLPlot.DPCount;}for(A9=0;A9<Ay;++A9){A1=this.mSeriesInfo[A9];Am=A1.mSeriesId;Az=Aw.GetReferenceLinesOfSeries(Am);As=A1.mValueAxis;BA=An.mValueAxis[As];Aj={};Aj.Condense=BA.mCondenseLabels;if(!Aj.Condense){if(BA.mNumberFormat.isDefault){var A0=new AR.ChartAdvFormat();Ar.getAxisAutoNumberFormat(A0,BA.mPrimaryMetrics);BA.mNumberFormat=A0;}Aj.NumberFormat=BA.mNumberFormat.mCustomFormat;}Au=Az.length;for(A6=0;A6<Au;++A6){A7=[];A8=Az[A6];if(A8){BG=A8.getIdentity();A2=A8.getReferenceLineValue();BE=A8.getReferenceLineDirection();Av=(BE!=="horizontal");Al=A8.getReferenceLineLabel(false,false,Aj);Aq=A8.getRefLineLabelIdentity();if(A3===0){continue;}Ao=new AR.TripleId({ObjectId:Ad.DssGraphReferenceLine,SeriesId:Am,GroupId:A6});BD=new AR.TripleId({ObjectId:Ad.DssGraphRefLineText,SeriesId:Am,GroupId:A6});if(A2!==null&&A2!==undefined){BF=BA.GetPositionByValue(A2);if(BF!==null&&BF!==undefined){BB=1;if(Av){if(BF===0){BF=1;}else{if(BF===A5){--BF;}}Ak=BC-1;A7.push(new AR.Point2D({x:BF,y:BB}));A7.push(new AR.Point2D({x:BF,y:Ak}));At.x=BF;At.y=(A7[0].y+A7[1].y)/2;}else{if(BF===0){BF=1;}else{if(BF===BC){--BF;}}Ak=A5-1;A7.push(new AR.Point2D({x:BB,y:BF}));A7.push(new AR.Point2D({x:Ak,y:BF}));At.x=(A7[0].x+A7[1].x)/2;At.y=BF;}Ap=new AR.StraightLineObject({TripleId:Ao,GraphObjectManager:this,StartPoint:A7[0],EndPoint:A7[1],GraphCollectionObject:null,Identity:BG,Shape:U._LINE,MidPoint:At});if(Ap!==null){if(!Ap.mFormatLinePtr){Ap.mFormatLinePtr=new AR.FormatLine();}this.mReferenceLineObjects.push(Ap);Ax.push({tripleId:BD,identity:Aq,isVertical:Av,position:BF,labelText:Al});}}else{z.visPrint("Reference line point calculation abnormal:");z.visPrint("\tseries #: "+A9+"ref line #: "+A6);z.visPrint("\tvalue = "+A2);z.visPrint("\ty = "+BF);}}}}}r.call(this,BC,A5,Ax);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,M=O.enums,B=M.EnumOrientation,P=O.gNullObjectId,L=O.gNullTripleId;var J=mstrmojo.chart.model,Q=J.enums,E=Q.EnumDSSGraphType,F=Q.EnumDSSGraphObject,K=Q.EnumVariantBool.VARIANT_FALSE,R=Q.EnumDSSExtraGraphProperty;mstrmojo.chart.PlotManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.PlotManager",mLegendPtr:null,mDatasetPtr:null,mGraphType:E.DssGraphTypeVertical_Bar_Side_by_Side,mPlotArea:null,mChartAreaOptions:null,mRecalculateFrame:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,init:function N(S){this._super(S);this.mChartAreaOptions={useChartArea:false,chartAreaNumber:1,orientation:B.OR_VERTICAL,vecPercentageHeightOrWidth:[],seriesDistribution:[]};this.mPlotArea=S.Area||null;this.mChartContextPtr=S.GraphObjectManager.mChartContextPtr;},SetDataset:function G(S){this.mDatasetPtr=S;},SetMarginInfo:function H(V,T,S,U){this.mLeftMargin=V;this.mRightMargin=T;this.mTopMargin=S;this.mBottomMargin=U;},LoadProperties:function I(){var Z,U,b,W,X,S=[],V=[],a=[];var T=this.mChartContextPtr,Y=this.mChartAreaOptions;this.mGraphType=T.mGraphType;this.mRecalculateFrame=T.mRecalculateFrame;if(!T.mIsGraphMatrix){Z=T.GetProperty(R.DssGraphUseChartArea,P);if(Z){Y.useChartArea=Z!==K;}}U=this.mDatasetPtr.GetSeriesCount();b=1;W=0;if(Y.useChartArea){Z=T.GetProperty(R.DssGraphChartAreaNumber,P);if(Z){Y.chartAreaNumber=Z;if(Y.chartAreaNumber>U){Y.chartAreaNumber=U;}}Z=T.GetProperty(R.DssGraphChartAreaOrientation,P);if(Z){Y.orientation=(Z!==K?B.OR_VERTICAL:B.OR_HORIZONTAL);}for(X=0;X<Y.chartAreaNumber;X++){Z=T.GetProperty(R.DssGraphChartAreaSpacePercentage,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphFrame,SeriesId:X}));if(Z&&Z>=0){Y.vecPercentageHeightOrWidth.push(Z/100);b-=Z/100;}else{Y.vecPercentageHeightOrWidth.push(-1);W++;}}}else{Y.chartAreaNumber=1;Y.vecPercentageHeightOrWidth.push(1);}for(X=0;X<Y.chartAreaNumber;X++){Y.seriesDistribution.push(S);}this.mDatasetPtr.GetOneSliceRangeSimple(V,a);for(X=0;X<U;X++){if(T.mIsGraphMatrix){Y.seriesDistribution[X%Y.chartAreaNumber].push(V[X]);}else{Z=T.GetProperty(R.DssGraphChartAreaDestination,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphRiser,SeriesId:X}));if(Y.useChartArea&&Z){Y.seriesDistribution[Z].push(X);}else{Y.seriesDistribution[X%Y.chartAreaNumber].push(V[X]);}}}if(W>0){for(X=0;X<Y.chartAreaNumber;X++){if(Y.vecPercentageHeightOrWidth[X]<=0){Y.vecPercentageHeightOrWidth[X]=b/W;}}}},CalculateChartAreas:function A(W,a){var c,S,Y,V,Z=this.mChartAreaOptions,U,T,X,b;c=0;if(Z.orientation===B.OR_VERTICAL){S=W.height/20;b=Z.chartAreaNumber;for(V=0;V<b;V++){U=(W.height-S*(Z.chartAreaNumber-1))*Z.vecPercentageHeightOrWidth[V];a.push(new mstrmojo.chart.Rect2D({x:W.x,y:W.y+(W.height-S*(b-1))*c+S*V,width:W.width,height:U}));c+=Z.vecPercentageHeightOrWidth[V];}X=a[Z.chartAreaNumber-1];X.height=W.y+W.height-X.y;}else{Y=W.width/20;b=Z.chartAreaNumber;for(V=0;V<b;V++){T=(W.width-Y*(Z.chartAreaNumber-1))*Z.vecPercentageHeightOrWidth[V]+0.5;a.push(new mstrmojo.chart.Rect2D({x:W.x+(W.width-Y*(b-1))*c+Y*V,y:W.y,widht:T,height:W.height}));c+=Z.vecPercentageHeightOrWidth[V];}X=a[b-1];X.width=W.x+W.width-X.x;}},RectangleUnion:function C(S,U,T){T.x=Math.min(S.x,U.x);T.y=Math.min(S.y,U.y);T.width=Math.max(S.x+S.width,U.x+U.width)-T.x;T.height=Math.max(S.y+S.height,U.y+U.height)-T.y;},RectangleIntersection:function D(S,U,T){if((S.x>(U.x+U.width))||(U.x>(S.x+S.width))||(S.y>(U.y+U.height))||(U.y>(S.y+S.height))){return false;}T.x=Math.max(S.x,U.x);T.y=Math.max(S.y,U.y);T.width=Math.min(S.x+S.width,U.x+U.width)-T.x;T.height=Math.min(S.y+S.height,U.y+U.height)-T.y;return true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumValueAxis","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","ValuePlot","GraphObjectManager");var d=mstrmojo.chart,Z=d.enums,B=Z.EnumGraphMajorType,D=Z.EnumAxisDirection,A=Z.EnumOrientation,c=Z.EnumValueAxis,f=Z.EnumDSSGraphObjectManager,Y=d.gNullTripleId,T=mstrmojo.chart.model,h=T.enums,J=h.EnumDSSGraphType,K=h.EnumDSSGraphProperty,M=h.EnumDSSGraphObject;var G=new d.Rect2D(),I=new d.Rect2D();function F(i){var j=this.mChartContextPtr;return j.mirrorPrimaryInBubbleScatter(i);}function P(j,i,k){var l=this.mChartContextPtr;if(l.mIsGraphMatrix===false){return j;}if(j==="X1"||j==="Y1"){if(F.call(this,k)){j=j[0]+"2";i=(j==="X2")?4:2;}}return{Key:j,Index:i};}function N(){var i=this.mChartContextPtr.GetGraphType();return((i===J.DssGraphTypeDualAxis_X_Y_Scatter)||(i===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels)||(i===J.DssGraphTypeBubble_DualAxis)||(i===J.DssGraphTypeBubble_DualAxis_With_Labels));}function b(){return(this.mChartAreaOptions.orientation===A.OR_VERTICAL);}function O(n,l){var j=this.Y1Axis[l],o,m=new d.Rect2D({Rect2D:n}),k,p,i;j.TrimDeviceDataArea(m);j.SetDeviceDataArea(m);k=new d.Rect2D({Rect2D:m});j.AdjustDeviceDataArea(k,true);p=new d.Rect2D({Rect2D:k});if(N.call(this)){o=this.Y2Axis[l];o.TrimDeviceDataArea(m);o.SetDeviceDataArea(m);i=new d.Rect2D({Rect2D:m});o.AdjustDeviceDataArea(i,true);this.RectangleUnion(k,i,p);}j.UpdateTitleAndLabelArea(p);if(N.call(this)){o.UpdateTitleAndLabelArea(p);}}function C(j,k){var i=0,l=[this.XAxis,this.Y1Axis,this.Y2Axis];if(((k===1||k===2)&&b.call(this))||(k===0&&!b.call(this))){i=j;}return l[k][i];}function E(s,w){var m=0,r=0,n=Number.MAX_VALUE,v=-n,l,u,q=0,t=[],p=0,z,k,j,y=false;if(this.mChartContextPtr.mIsUniformAxisMode){var o=this.mChartContextPtr.getUniformAxisContext(),x=o.ValueAxis;switch(w){case 0:n=x.X1.Min;v=x.X1.Max;l=x.X1.Metrics.concat();break;case 1:n=x.Y1.Min;v=x.Y1.Max;l=x.Y1.Metrics.concat();break;case 2:n=x.Y2.Min;v=x.Y2.Max;l=x.Y2.Metrics.concat();break;case 3:n=x.Z.Min;v=x.Z.Max;l=[];break;case 4:n=x.X2.Min;v=x.X2.Max;l=x.X2.Metrics.concat();break;default:n=x.Y1.Min;v=x.Y1.Max;l=x.Y1.Metrics.concat();break;}return{Min:n,Max:v,Metrics:l};}if(w===1||w===2){r=1;}else{if(w===3){r=2;}}u=this.mDatasetPtr.GetGroupCount();if(s===-3){q=this.mDatasetPtr.GetSeriesCount();for(m=0;m<q;++m){t.push(m);}}else{t=this.mChartAreaOptions.seriesDistribution[s];}z=t.length;for(m=0;m<u;++m){for(p=0;p<z;++p){if((w===0||w===3)||((w===1||w===2)&&((w-1)===this.VecSeriesVAIndex[t[p]]))){k=this.mDatasetPtr.GetData(t[p],m,r);}if(k!==null){j=k;if(!y){y=true;}if(n>j){n=j;}if(v<j){v=j;}}}}if(n>v){n=0;v=0;}if(y){return{Min:n,Max:v};}}function L(q){var k=[],j,m,p=this.Y1Axis.length,l,o,n;j=N.call(this);for(m=0;m<p;++m){o=new d.Rect2D({Rect2D:q});n=new d.Rect2D({Rect2D:q});if(j){this.Y2Axis[m].ReserveTitleAndLabels(n,this.mBottomMargin,this.mTopMargin);o=n;o.y=q.y;o.height=q.height;}this.Y1Axis[m].ReserveTitleAndLabels(o,this.mBottomMargin,this.mTopMargin);if(j){n=o;n.y=q.y;n.height=q.height;}this.Y1Axis[m].AdjustDeviceDataArea(o,false);k.push(o);if(j){this.Y2Axis[m].AdjustDeviceDataArea(n,false);}k.push(n);}l=k.length;I.ResetRect(k[0]);G.Reset(0,0,0,0);var r;for(m=1;m<l;++m){if(!this.RectangleIntersection(I,k[m],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function X(m){var o=[],l,j=this.XAxis.length,k,p,n;for(l=0;l<j;++l){n=this.XAxis[l];p=new d.Rect2D({Rect2D:m});n.ReserveTitleAndLabels(p,this.mLeftMargin,this.mRightMargin);n.AdjustDeviceDataArea(p,false);o.push(p);}I.ResetRect(o[0]);G.Reset(0,0,0,0);k=o.length;for(l=1;l<k;++l){if(!this.RectangleIntersection(I,o[l],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function S(o){var m,l,p=this.Y1Axis.length,k=this.XAxis.length,n=this.mChartAreaOptions.chartAreaNumber;for(m=0;m<p;++m){if(b.call(this)){this.Y1Axis[m].GenerateGridLines(o[m],m,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[m].GenerateGridLines(o[m],m,this.mGraphObjectList);}}else{for(l=0;l<n;++l){this.Y1Axis[m].GenerateGridLines(o[l],l,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[m].GenerateGridLines(o[l],l,this.mGraphObjectList);}}}}for(m=0;m<k;++m){if(b.call(this)){for(l=0;l<n;++l){this.XAxis[m].GenerateGridLines(o[l],l,this.mGraphObjectList);}}else{this.XAxis[m].GenerateGridLines(o[m],m,this.mGraphObjectList);}}}function e(i){}function U(){var l,m=this.Y1Axis.length,j=this.Y2Axis.length,k=this.XAxis.length;for(l=0;l<m;++l){this.Y1Axis[l].generateAxisLine(this.mGraphObjectList);}if(N.call(this)){for(l=0;l<j;++l){this.Y2Axis[l].generateAxisLine(this.mGraphObjectList);}}for(l=0;l<k;++l){this.XAxis[l].generateAxisLine(this.mGraphObjectList);}}function Q(){var k=this.mChartContextPtr.GetGraphMajorType(),i=0,j;if(k===B.GMT_SCATTER||k===B.GMT_BUBBLE){i=this.mDatasetPtr.GetSeriesCount();j=this.mChartContextPtr.GetGraphType();if(j===J.DssGraphTypeX_Y_Scatter||j===J.DssGraphTypeX_Y_Scatter_with_Labels||j===J.DssGraphTypeBubble||j===J.DssGraphTypeBubble_With_Labels){return i>=1;}if(j===J.DssGraphTypeDualAxis_X_Y_Scatter||j===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels||j===J.DssGraphTypeBubble_DualAxis||j===J.DssGraphTypeBubble_DualAxis_With_Labels){return i>=2;}}return false;}function H(k,p,q,i){var n=this.mChartContextPtr.getAxisTripleId(k),l=new d.ValueAxis({TripleId:n,GraphObjectManager:this,Min:p.Min,Max:p.Max,LargerGridInterval:false,PrimaryMetricIndex:p.Metrics,IsPercent:false,AxisDirection:q,IsShown:i,Key:k});var j=this.mChartContextPtr;if(j.mIsGraphMatrix&&l.mIsUniformAxis===false){var m=j.getUniformAxisInformation(n.mObjectId),o=m.CondenseEnforced;l.checkCondense(!!o);}return l;}function g(k,j,n,p,l,i){var o=E.call(this,j,n);if(o){var m=H.call(this,k,o,p,l);i.push(m);this.mGraphObjectManagerList.push(m);}}mstrmojo.chart.ValuePlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.ValuePlotManager",ValuePlot:[],XAxis:[],Y1Axis:[],Y2Axis:[],ZAxis:[],VecSeriesVAIndex:[],init:function a(i){this._super(i);this.ValuePlot=[];this.XAxis=[];this.Y1Axis=[];this.Y2Axis=[];this.ZAxis=[];this.VecSeriesVAIndex=[];},Draw:function W(){var n,l=0,o=[this.XAxis,this.Y2Axis,this.Y1Axis],m,k=this.ValuePlot;d.GraphObjectManager.prototype.Draw.apply(this,[]);for(n=0;n<=2;++n){m=o[n];for(l=0;l<m.length;++l){m[l].Draw();}}for(n=0;n<k.length;++n){k[n].Draw();}},GenerateMapAndList:function V(){var n=this.mChartContextPtr,o=this.mPlotArea,AD=this.mGraphObjectManagerList,p=n.isUADataAreaOutput(),w,y,t,u,k,AA,AB,AC=0,l,q,j,AF,AE,x,m,s=[],v,r;if(o.width<=0||o.height<=0){return ;}this.LoadProperties();if(!Q.call(this)){return ;}if(b.call(this)){y=P.call(this,"X1",0,true);g.call(this,y.Key,-3,y.Index,D.AD_X,!p,this.XAxis);for(AC=0;AC<this.mChartAreaOptions.chartAreaNumber;++AC){y=P.call(this,"Y1",1,false);g.call(this,y.Key,AC,y.Index,D.AD_Y,!p,this.Y1Axis);if(N.call(this)){y=P.call(this,"Y2",2,false);g.call(this,y.Key,AC,y.Index,D.AD_Y,!p,this.Y2Axis);}}}else{y=P.call(this,"Y1",1,false);g.call(this,y.Key,-3,y.Index,D.AD_Y,!p,this.Y1Axis);if(N.call(this)){y=P.call(this,"Y2",2,false);g.call(this,y.Key,-3,y.Index,D.AD_Y,!p,this.Y2Axis);}for(AC=0;AC<this.mChartAreaOptions.chartAreaNumber;++AC){y=P.call(this,"X1",0,true);g.call(this,y.Key,AC,y.Index,D.AD_X,!p,this.XAxis);}}if(n.GetGraphMajorType()===B.GMT_BUBBLE){if(n.isUADataAreaOutput()){l=n.getUniformAxisContext();w={Metrics:[]};w.Min=l.ValueAxis.Z.Min;w.Max=l.ValueAxis.Z.Max;}else{w=E.call(this,-3,3);}if(w){AA=H.call(this,"Z",w,D.AD_Z,false);this.ZAxis.push(AA);AD.push(AA);}}j=X.call(this,o);this.mLeftMargin+=j.x-o.x;this.mRightMargin+=o.x+o.width-(j.x+j.width);this.mTopMargin+=j.y-o.y;this.mBottomMargin+=o.y+o.height-(j.y+j.height);j.width=Math.max(0,j.width);j.height=Math.max(0,j.height);q=L.call(this,j);q.width=Math.max(0,q.width);q.height=Math.max(0,q.height);AE=o.y+Math.max(j.y-o.y,q.y-j.y);x=o.y+o.height-Math.max(o.y+o.height-(j.y+j.height),j.y+j.height-(q.y+q.height))-AE;q.y=AE;q.height=x;AF=o.x+Math.max(j.x-o.x,q.x-j.x);m=o.x+o.width-Math.max(o.x+o.width-(j.x+j.width),j.x+j.width-(q.x+q.width))-AF;q.x=AF;q.width=m;if(n.mManualLayoutMode&&!this.mRecalculateFrame){q=o;}else{}this.CalculateChartAreas(q,s);if(n.isUADataAreaOutput()){var z=n.getUniformAxisContext();s[0].x=z.mDataAreaLeftMargin;s[0].y=z.mDataAreaTopMargin;s[0].width=n.mGraphWidth-s[0].x-z.mDataAreaRightMargin;s[0].height=n.mGraphHeight-s[0].y-z.mDataAreaBottomMargin;q=s[0];}if(b.call(this)){j=new d.Rect2D({Rect2D:q});t=this.XAxis[0];t.TrimDeviceDataArea(j);t.SetDeviceDataArea(j);t.AdjustDeviceDataArea(j,true);t.UpdateTitleAndLabelArea(j);for(AC=0;AC<this.mChartAreaOptions.chartAreaNumber;++AC){O.call(this,s[AC],AC);}}else{O.call(this,q,0);for(AC=0;AC<this.mChartAreaOptions.chartAreaNumber;++AC){t=this.XAxis[AC];j=new d.Rect2D({Rect2D:s[AC]});t.TrimDeviceDataArea(j);t.SetDeviceDataArea(j);t.AdjustDeviceDataArea(j,true);t.UpdateTitleAndLabelArea(j);}}if(n.mManualLayoutMode&&!this.mRecalculateFrame){q=o;}for(AC=0;AC<this.mChartAreaOptions.chartAreaNumber;++AC){if(!n.mIsGraphMatrix){AB=new d.TripleId({ObjectId:M.DssGraphFrame,SeriesId:AC});v=new d.RectangleObject({TripleId:AB,GraphObjectManager:this,Area:s[AC]});this.AddToMapAndList(v);}e.call(this,s);S.call(this,s);U.call(this);t=C.call(this,AC,0);u=C.call(this,AC,1);if(N.call(this)){k=C.call(this,AC,2);}if(n.mIsGraphMatrix){AB=d.PlotId0;}else{AB=new d.TripleId({ObjectId:f.DssPlot,SeriesId:AC});}r=new d.ValuePlot({TripleId:AB,GraphObjectManager:this,Area:s[AC]});this.ValuePlot.push(r);AD.push(r);r.SetDataset(this.mDatasetPtr);r.mLegendPtr=this.mLegendPtr;r.AssignValueAxis(t,0);r.AssignValueAxis(u,1);if(N.call(this)){r.AssignValueAxis(k,2);}if(n.GetGraphMajorType()===B.GMT_BUBBLE){r.AssignValueAxis(this.ZAxis[0],3);}r.AssignSeriesInfo(this.mChartAreaOptions.seriesDistribution[AC],this.VecSeriesVAIndex);r.GenerateMapAndList();}if(n.isUADataAreaOutput()){l=n.getUniformAxisContext();s[0].x=l.mDataAreaLeftMargin;s[0].y=l.mDataAreaTopMargin;s[0].width=n.mGraphWidth-s[0].x-l.mDataAreaRightMargin;s[0].height=n.mGraphHeight-s[0].y-l.mDataAreaBottomMargin;q.ResetRect(s[0]);}},LoadProperties:function R(){var p=this.mChartContextPtr,l=this.VecSeriesVAIndex,k,j,m,o,n;this._super();k=this.mDatasetPtr.GetSeriesCount();l.splice(0,l.length);for(j=0;j<k;++j){o=new d.TripleId({ObjectId:M.DssGraphRiser,SeriesId:j});l[j]=c.VA_Y1;if(N.call(this)){n=p.GetProperty(K.DssGraph2DSplitYAutomatic,Y);if(n){m=p.GetProperty(K.DssGraph2DSDSplitY,o);if(m){l[j]=(m===false)?c.VA_Y1:c.VA_Y2;}}else{l[j]=(j%2===0)?c.VA_Y1:c.VA_Y2;}}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","CategoryAxis","PlotManager","GridChartPlot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,K=O.enums,A=K.EnumOrientation,E=K.EnumDSSGraphObjectManager,H=O.model,P=H.enums,D=P.EnumDSSGraphProperty;var C=new O.Rect2D(),B=new O.Rect2D();mstrmojo.chart.PlotOption=mstrmojo.provide("mstrmojo.chart.PlotOption",{});function R(S){var T,U;if(this.mChartContextPtr.mIsGraphMatrix){U=O.PlotId0;}else{U=new O.TripleId();U.mObjectId=E.DssPlot;U.mSeriesId=S;}T=new O.GridChartPlot({TripleId:U,GraphObjectManager:this,Area:O.gEmptyRect});T.SetDataset(this.mDatasetPtr);return T;}function Q(U,S){var T=this.mChartAreaOptions.chartAreaNumber,W=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet,V;W[0].SetDeviceDataArea(U);for(V=0;V<T;++V){this.mPlots[V].AssignDataArea(S[V],!this.mIsReuseYAxis);}}function N(Z,V){if(V){var X=new O.Rect2D({Rect2D:Z}),a=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;a[0].AdjustTitleArea(X);a[0].AdjustDataArea(X,0,0,true);return X;}var Y=!(this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet,b=Y.length,S=[],W,U;this.CalculateChartAreas(Z,S);for(U=0;U<b;++U){Y[U].AdjustTitleArea(S[U]);Y[U].AdjustDataArea(S[U],0,0,true);}W=S;var T=W.length;C.Reset(0,0,0,0);B.ResetRect(W[0]);for(U=1;U<T;++U){if(!this.RectangleIntersection(B,W[U],C)){B.Reset(0,0,0,0);break;}B.ResetRect(C);}return B;}function F(S){var T=new O.CategoryAxisInfo(),U,X,V,W=this.mDatasetPtr.GetSeriesByColumn();if(this.mIsReuseYAxis){T.ToY(!W);}else{T.ToX(W);}U=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;if(U.length===0){X=new O.CategoryAxis({TripleId:T.mId,GraphObjectManager:this,AxisLabelsLocation:T.mAxisLabelsLocation,AxisDirection:T.mAxisDirection});X.SetDataset(this.mDatasetPtr);U.push(X);}this.mPlots[S].AssignAxis(U[0],this.mIsReuseYAxis);if(this.mIsReuseYAxis){T.ToX(W);}else{T.ToY(!W);}T.mId.mSeriesId=S;V=(!this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet;X=new O.CategoryAxis({TripleId:T.mId,GraphObjectManager:this,AxisLabelsLocation:T.mAxisLabelsLocation,AxisDirection:T.mAxisDirection});X.SetDataset(this.mDatasetPtr);V.push(X);this.mPlots[S].AssignAxis(V[S],!this.mIsReuseYAxis);}function M(){var S=this.mChartContextPtr.GetGraphMatrixContext();if(S){this.mPlotOption.mIsAutoFitMode=!S.mHasSizeBy;this.mPlotOption.mMaxDataVal=S.mMaxSizeVal;this.mPlotOption.mMinDataVal=S.mMinSizeVal;this.mPlotOption.mMarkerShape=S.mMarkerShape;}}mstrmojo.chart.GridChartPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.GridChartPlotManager",mPlots:null,mXAxisSet:null,mYAxisSet:null,mIsReuseYAxis:false,mPlotOption:{},init:function L(S){this._super(S);this.mPlots=[];this.mXAxisSet=[];this.mYAxisSet=[];this.mPlotOption={mIsAutoFitMode:false,mMaxDataVal:100000,mMinDataVal:0,mMarkerShape:4};this.mIsReuseYAxis=false;},Draw:function J(){this._super();var U=this.mYAxisSet.length,V=this.mXAxisSet.length,T=this.mPlots.length,S;for(S=0;S<U;++S){this.mYAxisSet[S].Draw();}for(S=0;S<V;++S){this.mXAxisSet[S].Draw();}for(S=0;S<T;++S){this.mPlots[S].Draw();}},LoadProperties:function G(){this._super();this.mIsReuseYAxis=(this.mChartAreaOptions.mOrientation===A.OR_HORIZONTAL);M.call(this);},GenerateMapAndList:function I(){var S=this.mPlotArea,d=this.mChartAreaOptions,T=this.mGraphObjectManagerList,U=this.mChartContextPtr,Y,a;if(S.width*S.height===0){return ;}if(this.mDatasetPtr===null||this.mDatasetPtr===undefined){return ;}this.LoadProperties();var e=d.chartAreaNumber;for(Y=0;Y<e;++Y){var W=R.call(this,Y);W.AssignSeries(d.seriesDistribution[Y]);W.mLegendPtr=this.mLegendPtr;this.mPlots.push(W);F.call(this,Y);}a=this.mPlots.length;for(Y=0;Y<a;++Y){T.push(this.mPlots[Y]);}a=this.mXAxisSet.length;for(Y=0;Y<a;++Y){T.push(this.mXAxisSet[Y]);}a=this.mYAxisSet.length;for(Y=0;Y<a;++Y){T.push(this.mYAxisSet[Y]);}var c=N.call(this,S,true),V=N.call(this,c,false);if(V.width<0){V.width=0;}if(V.height<0){V.height=0;}var b=S.y+Math.max(c.y-S.y,V.y-c.y),f=S.y+S.height-Math.max(S.y+S.height-(c.y+c.height),c.y+c.height-(V.y+V.height))-b;V.y=b;V.height=f;if(U.mManualLayoutMode&&!this.mRecalculateFrame){V=S;}else{}var X=[];this.CalculateChartAreas(V,X);if(U.isUADataAreaOutput()){var Z=U.getUniformAxisContext();X[0].x=Z.mDataAreaLeftMargin;X[0].y=Z.mDataAreaTopMargin;X[0].width=U.mGraphWidth-X[0].x-Z.mDataAreaRightMargin;X[0].height=U.mGraphHeight-X[0].y-Z.mDataAreaBottomMargin;this.mXAxisSet[0].TrimAxisPadding(X[0],false);this.mYAxisSet[0].TrimAxisPadding(X[0],false);V=X[0];}Q.call(this,V,X);a=this.mPlots.length;for(Y=0;Y<a;++Y){this.mPlots[Y].GenerateMapAndList();}a=this.mXAxisSet.length;for(Y=0;Y<a;++Y){this.mXAxisSet[Y].GenerateMapAndList();}a=this.mYAxisSet.length;for(Y=0;Y<a;++Y){this.mYAxisSet[Y].GenerateMapAndList();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Point2D","Vector2D","Polygon2D","SeriesRenderer","CategoryPlot","MarkerObject","NumberObject","Plot","ChartConstants","GraphObjectAggregation","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumValueAxis","EnumShowFace","EnumAttachedPointsStyle","EnumPictureFormatType","EnumImageUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape");var i=mstrmojo.chart,d=i.ChartConstants,O=mstrmojo.chart.enums,S=O.EnumAttachedPointsStyle,C=O.EnumCollectionType,o=O.EnumMajorGraphType,T=O.EnumLayout,D=O.EnumValueAxis,y=O.EnumDSSExtraGraphObject,J=O.EnumImageUsage,x=O.EnumPictureFormatType,b=mstrmojo.chart.model,V=b.enums,AA=V.EnumDSSGraphObject,AB=V.EnumDSSGraphMarkerShape,AC=V.EnumShapeType,R=V.EnumDSSGraphFillEffect,w=i.gNullGroupId;var K=new i.Rect2D(),u=new i.TripleId();var A=new i.Point2D();A.Reset(-1,-1);A.isNull=true;function t(){var AL,AK,AJ,AM,AN,AI=this.mAreaCollection;AI.splice(0,AI.length);AL=this.mIsVertical?C.CT_VERTICAL_AREA:C.CT_HORIZONTAL_AREA;AK=this.mSeriesInfo.length;for(AJ=0;AJ<AK;++AJ){AM=new i.TripleId({ObjectId:AA.DssGraphRiser,SeriesId:this.mSeriesInfo[AJ].mSeriesId});AN=new i.GraphCollectionObject({TripleId:AM,GraphObjectManager:this,CollectionType:AL});AI.push(AN);this.AddToMap(AI[AJ]);this.AddLegendMarkerToCollection(AJ,AI[AJ]);}}function F(AJ){var AO,AK,AN,AM,AL,AI,AP;AO=this.mSeriesInfo[AJ].mSeriesId;AN=new i.TripleId({ObjectId:AA.DssGraphDataText,SeriesId:AO,GroupId:w});AK=new i.GraphCollectionObject({TripleId:AN,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AK);AM=this.mFinalSeriesPolygons[AJ];AP=this.mGroupCount;for(AL=0;AL<AP;++AL){if(AM[AL].x!==-1){AI=this.createRiserLabel(AJ,AL,AK);this.MoveLabel(AL,AI,AM[AL],AM[2*this.mGroupCount-1-AL],AJ);}}}function B(AN,AL){var AK,AM,AI,AJ;for(AK=0;AK<this.mGroupCount;++AK){AM=this.CreateTotalLabel(AN,AK,AL);if(AM!==null){AI=this.GetUpmostIndexByValueAxisAndGroup(AN,AK);AJ=this.mFinalSeriesPolygons[AI];this.MoveLabel(AK,AM,AJ[AK],AJ[2*this.mGroupCount-1-AK],AI);}}}function e(){var AK,AJ,AO,AM,AI,AN=this.mpABLPlotContext,AL=AN.mABLOptions;AK=this.mSeriesInfo.length;for(AJ=0;AJ<AK;++AJ){if(AN.mSeriesOptions[this.mSeriesInfo[AJ].mSeriesIndex].mShowDataLabels){F.call(this,AJ);}}if(AL.mMajorGraphType===o.MGT_AREA&&AL.mLayout===T.LO_STACKED&&!AL.mShowCumulate&&AL.mShowValue&&AL.mShowTotal){AM=this.mpManager.mTripleId;AO=new i.TripleId({ObjectId:AA.DssGraphDataTextStackTotal,SeriesId:AM.mSeriesId,GroupId:w});AI=new i.GraphCollectionObject({TripleId:AO,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AI);B.call(this,D.VA_Y1,AI);if(AL.mDualAxes){B.call(this,D.VA_Y2,AI);}}}function p(){}function l(AI){var AJ=AI,AL=this.mpABLPlotContext.mABLOptions.mLayout,AK=this.mChartContextPtr.mIsGraphMatrix;if(AK&&(AL===T.LO_STACKED||AL===T.LO_PERCENT)){if(AI>=0&&AI<this.mSeriesDrawingOrder.length){AJ=this.mSeriesDrawingOrder[AI];}}return AJ;}function G(AJ){var AK=0,AI=0;this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);while(AK<this.mGroupCount){if(AJ[AK].x===-1){++AK;continue;}this.mGroupIdMapPerSeries[AI]=AK;++AK;AI++;}}function j(AL){this.mGroupRangeList.splice(0,this.mGroupRangeList.length);if(AL.length===0){return ;}var AK=0,AO,AN,AJ,AM,AI;AI=AL.length;for(AM=0;AM<AI;++AM){AO=AK+AL[AM].length/2;AN=this.getCorrectGroupIdInSeriesPoints(AK,AK);AJ=this.getCorrectGroupIdInSeriesPoints(AO-1,AO-1);this.mGroupRangeList.push({Start:AN,End:AJ});AK=AO;}}function L(AQ,AO){var AU=[],AR=[],AV,AT,AL,AK,AS,AJ=this.mChartContextPtr,AN=AJ.mIsGraphMatrix,AP=AJ.mIsTimeSeriesChart;AV=0;AT=AQ.length;AS=(AP||AN)?0:1;for(AL=0;AL*2<=AT;++AL){if(AQ[AL].x!==-1){continue;}if(AL-AV>AS){var AI=2*(AL-AV);for(AK=AV;AK<AL;++AK){AU[AK-AV]=AQ[AK];AU[AI-1-(AK-AV)]=AQ[AT-1-AK];}AR.push(AU);AO.push(AU);AU=[];}AV=AL+1;}if(AV<AT/2){var AW=AT/2-AV;if(AW>AS){if(AV===0){AR.push(AQ);AO.push(AQ);}else{if(AV<AT/2){var AM=AW*2,AX=AQ.slice(AV,AV+AM);AR.push(AX);AO.push(AX);}}}}G.call(this,AQ);j.call(this,AR);return AR;}function W(AI,AJ){if(AI<0||AI>=this.mGroupRangeList.length){return AJ;}return this.mGroupRangeList[AI].Start;}function AD(AM,AJ,AP){var AL=new i.TripleId({TripleId:AM}),AK=null,AO=this.mChartContextPtr;if(AJ.length===2){AL.mObjectId=AA.DssGraphDataMarker;var AN=4,AI=AB.DssGraphMarkerShapeCircle;AK=new i.MarkerObject({TripleId:AL,MarkerPosition:AJ[0],MarkerShape:AI,IsIsometric:true,MarkerSize:AN,GraphObjectManager:this,GraphCollectionObject:AP});return AK;}if(AO.mImageUsage===J.OBJECT_CLIP_COMPUTATION){return AK;}AK=new i.PolygonObject({TripleId:AL,GraphObjectManager:this,Polygon:AJ,ParentObject:AP,Shape:AC._POLYGON});if(AO.mIsGraphMatrix&&this.mChartContextPtr.mImageFormat===x.SVG){AK.mPointsStyle=S.TOOLTIP_UPPER;}return AK;}function a(AI,AJ,AM){var AL=new i.TripleId({ObjectId:AA.DssGraphRiser,SeriesId:this.mSeriesInfo[AI].mSeriesId,GroupId:w}),AN=this.mAreaCollection[AI],AK;AK=AD.call(this,AL,AJ,AM,AN);if(AK){this.mGraphObjectList.push(AK);AN.AddGraphObject(AK);}}function AG(AT,AI,AQ){var AJ=this.mChartContextPtr,AN=AJ.GetGraphMatrixContext(),AU=AT.GetMaxMinDataInputPosition(),AR=AT.mTripleId.mObjectId,AO=AU.LowBoundary,AP=AU.HighBoundary,AL;if(this.mIsVertical){AL=(AR===AA.DssGraphY1Body)?"Y1":"Y2";}else{AL=(AR===AA.DssGraphX1Body)?"X1":"X2";}var AK=this.mClippedMarkerSize[AL],AS=AK.LowOffset,AM=AK.HighOffset;AU=AN.getClippedOffset(AO,AP,AQ,AI,!this.mIsVertical,AS,AM);AK.LowOffset=AS=AU.LowOffset;AK.HighOffset=AM=AU.HighOffset;}function z(AO,AR,AN){if(!this.mChartContextPtr.mIsGraphMatrix){return AO;}var AM,AL=0,AS=false,AK;if(AR.IsBaseAtZero()){AM=AR.GetPositionByValue(0);if(AM!==null){AL=AM;if(AR.isBaseLineQualified()){var AQ=AO.length;if(AQ%2===0&&AQ>=4){var AI=AQ/2,AP,AJ;AP=AO.slice(0,AI);AJ=AO.slice(AI,AO.length+1);if(AN&&AJ[0].y===AL){AS=true;for(AK=0;AK<AI;++AK){if(AP[AK].y!==AJ[AI-1-AK].y){AJ[AI-1-AK].y--;}}}if(!AN&&AJ[0].x===AL){AS=true;for(AK=0;AK<AI;++AK){if(AP[AK].x!==AJ[AI-1-AK].x){AJ[AI-1-AK].x++;}}}if(AS){AO.splice(0,AO.length);AO=AP.concat(AJ);}}}}}return AO;}function M(AM,AO){if(!this.mChartContextPtr.mIsGraphMatrix){return AM;}var AI=AM.length,AL;if(AI%2===0&&AI>=4){var AK=AI/2,AN,AJ;AN=AM.slice(0,AK);AJ=AM.slice(AK,AM.length+1);for(AL=0;AL<AK;++AL){if(AO){if(AN[AL].y!==AJ[AK-1-AL].y){AJ[AK-1-AL].y++;}}else{if(AN[AL].x!==AJ[AK-1-AL].x){AJ[AK-1-AL].x--;}}}AM.splice(0,AM.length);AM=AN.concat(AJ);return AM;}return AM;}function r(AW,AM,AS,AK){var AY=this.mChartContextPtr.mIsGraphMatrix,AZ,AX,Ab,AP;if(!AY){a.call(this,AW,AS,AK);}var AL=this.mpABLPlotContext.mValueAxis,AT=new i.TripleId({ObjectId:AA.DssGraphRiser,SeriesId:this.mSeriesInfo[AW].mSeriesId,GroupId:AM});if(AS.length===1){return ;}if(AS.length<=2){var AQ=this.drawSinglePoint(AT,AS[0],AC._CIRCLE,AC._AREA);AZ=AQ.Object;if(this.mDatasetPtr.showSeriesDatalabel(this.mSeriesInfo[AW].mSeriesId)){if(AZ!==undefined&&AZ!==null){this.mSinglePointObjects.push(AZ);}}AP=AQ.ShapeSize;if(AP===undefined){if(AZ){AP=AZ.getShapeSize();}else{AP=0;}}AX=AL[this.mSeriesInfo[AW].mValueAxis];if(AX){AG.call(this,AX,AS[0],AP);}}else{var AU=this.mHasColorBy&&this.mDatasetPtr.isGradientABL();AX=AL[this.mSeriesInfo[AW].mValueAxis];Ab=AS.slice(0);Ab=z.call(this,Ab,AX,this.mIsVertical);if(AT.mSeriesId!==0){Ab=M.call(this,Ab,this.mIsVertical);AZ=AD.call(this,AT,Ab,AK,null);}else{AZ=AD.call(this,AT,Ab,AK,null);}if(AU){var AV=Ab;if(AZ){var AN=this.prepareTransitionalGradient(AT,AV,AV.length/2),AO=AZ.GetFormatFill(),Aa=AO.transformToGradient(AN);AZ.SetFormatFill(Aa);if(AN.Effective){var AR=Aa.getGradient(),AJ=AZ.mFormatLinePtr.transformToGradientFromFill(AR,AV[0],AV[AV.length/2-1]);AZ.SetFormatLine(AJ);}}}var AI=AZ&&(AZ instanceof i.MarkerObject);if(AI){AX=AL[this.mSeriesInfo[AW].mValueAxis];if(AX){AP=AZ.getShapeSize();AG.call(this,AX,AS[0],AP);}}}if(AZ){this.mGraphObjectList.push(AZ);this.AddToMap(AZ);}}function g(AI,AK){var AN=AK.length/2,AM=AK.length-1,AL=[],AJ;if(AI.mSeriesId===0&&this.mIgnoreBasesSeriesBorder){delete this.mIgnoreBasesSeriesBorder;return null;}AL.push(AK[AM]);for(AJ=0;AJ<=AN;++AJ){AL.push(AK[AJ]);}return new i.PolyLineObject({TripleId:AI,GraphObjectManager:this,PolyLine:AL});}function I(AK,AS,AN){var AJ=this.mChartContextPtr,AT=this.mSeriesInfo[AK],AQ=AT.mSeriesId,AR=new i.TripleId({ObjectId:AA.DssGraphRiser,SeriesId:AQ,GroupId:AS}),AI,AL,AU,AM;if(AN.length<4){return ;}if(!AJ.mIsGraphMatrix){return ;}AI=this.GetGraphObject(AR);if(AI!==undefined&&AI!==null){AL=new i.TripleId({ObjectId:AA.DssGraphDataLine,SeriesId:AQ});AU=g.call(this,AL,AN,AK);if(AU){AM=AU.mFormatLinePtr;AM.mLineThickness=2;var AP=AI.mFormatLinePtr,AO=AI.GetFormatFill();if(AP){AM=mstrmojo.hash.copy(AP,AM);}else{if(AO){AM.mLineColor=AO.mSimpleColor;}}}if(AU){AU.mIsDetectable=false;this.mGraphObjectList.push(AU);}}}function v(AL,AS,AP){var AJ=this.mChartContextPtr,AK=this.mDatasetPtr,AN,AT=this.mSeriesInfo[AL],AR=AT.mSeriesId,AQ,AI,AM,AU,AO;if(AP.length<4){return ;}if(!AJ.mIsGraphMatrix){return ;}AN=AK.showSeriesDatalabel(AR);if(AN){AQ=new i.TripleId({ObjectId:AA.DssGraphRiser,SeriesId:AR,GroupId:AS});AI=this.GetGraphObject(AQ);if(AI!==undefined&&AI!==null){AM=new i.TripleId({ObjectId:AA.DssGraphDataLine,SeriesId:AR});AU=g.call(this,AM,AP,AL);if(AU===null){return ;}AO=AU.mFormatLinePtr;AO.mLineThickness=2;AO.mAlpha=255;this.mAreaBoundForDataLabel.push(AU);}}}function H(AI,AK){var AN,AO,AQ,AJ,AR=[],AM=this.mChartContextPtr.mIsGraphMatrix;var AL=l.call(this,AI);AN=this.mSeriesPolygons[AL];if(AN.length<4&&!AM){return ;}this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);this.mGroupRangeList.splice(0,this.mGroupRangeList.length);AO=L.call(this,AN,AR);AQ=AO.length;for(AJ=0;AJ<AQ;++AJ){var AP=-3;if(AM){AP=W.call(this,AJ,AP);}r.call(this,AL,AP,AO[AJ],AK);I.call(this,AL,AP,AR[AJ],AK);v.call(this,AL,AP,AR[AJ],AK);}}function k(){}function Q(AJ,AL){var AK=this.mSeriesPolygons[AJ];if(AK[AL-1].x===-1||AK[AL].x===-1){return ;}var AI=[];AI[0]=AK[AL-1];AI[1]=AK[AL];AI[2]=AK[AK.length-AL-1];AI[3]=AK[AK.length-AL];return AI;}function U(AO,AK){var AS,AP=[],AQ=[],AJ=[],AN,AL,AT,AR,AI,AM;if(this.mHasNegativeValue){k.call(this,AO,AK);return ;}AS=this.IsReverseSeriesOrder(AO);AN=this.mSeriesInfo.length;for(AM=0;AM<AN;++AM){AL=AS?AN-1-AM:AM;if(this.mSeriesInfo[AL].mValueAxis===AO){AT=Q.call(this,AL,AK);if(AT===undefined){continue;}AP.push(AT);AQ.push(AL);AJ.push(true);}}AR=AP.length;for(AM=0;AM+1<AR;++AM){if(AS){AI=new i.Vector2D({StartPoint:AP[AM][3],EndPoint:AP[AM][2]});}else{AI=new i.Vector2D({StartPoint:AP[AM][0],EndPoint:AP[AM][1]});}if(this.PriorToNextSeries(AI,AK)){p.call(this,AQ[AM],AP[AM],AK);AJ[AM]=false;}}for(AM=AR-1;AM>=0;--AM){if(AJ[AM]){p.call(this,AQ[AM],AP[AM],AK);}}}function m(AN){var AJ,AM,AL,AK=this.mSeriesInfo,AI=AK.length;if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){for(AJ=0;AJ<AI;++AJ){if(AN===AK[AJ].mValueAxis||AN===D.VA_BOTH){H.call(this,AJ,this.mUseDepth);}}}else{AM=this.IsReverseGroupOrder();if(this.mpABLPlotContext.mABLOptions.mCurvedLines){k.call(this,AN,0);}else{for(AJ=1;AJ<this.mGroupCount;++AJ){AL=AM?this.mGroupCount-AJ:AJ;U.call(this,AN,AL);}}for(AJ=0;AJ<AI;++AJ){if(AN===AK[AJ].mValueAxis||AN===D.VA_BOTH){H.call(this,AJ,false);}}}}function Y(AJ,AK,AL,AI){if(AJ){if(AL){return AI.y<AK;}return AI.y<=AK;}if(AL){return AI.x>AK;}return AI.x>=AK;}function E(Ae){var AI=this.mpABLPlotContext,AO=this.mpABLPlot,AT=[],Al=0,Aj=0,Ab,Ah,AN,Ao,AW,AM,Ad,AU,AP,AZ,Ai,AR,Ak,AS,AL,Ag=false,AV=false,AX=false,Am=this.mpABLPlotContext.mABLOptions.mLayout,Af=this.mChartContextPtr.mIsGraphMatrix,AK=this.mGroupCount;if(this.mUseDepth){Ab=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[Ae].mSeriesIndex);Al=Ab.OffsetX;Aj=Ab.OffsetY;}AN=this.mSeriesInfo[Ae].mValueAxis;Ah=AI.mValueAxis[AN];AS=Ah.GetAxisOriginValue();AU=Ah.mOptions.mDrawFromZero;Ah.mOptions.mDrawFromZero=(AS===null||AS===0)&&(Ah.mOptions.mUseLogarithmicScale===false);AM=Ah.GetBasePosition(true);Ao=Ah.GetBaseValue(true);AL=Ah.GetPositionByValue(AS!==null?AS:0);if(AL===null){AL=-100;}AW=Ah.GetBasePosition(AS);for(Ad=0;Ad<AK;++Ad){AP=0;Ab=this.GetData(Ae,Ad);AZ=(Ab===null);if(Ab!==null){AP=Ab;++AO.DPCount;if(AO.seriesDPCount[this.mSeriesInfo[Ae].mSeriesId]===undefined||AO.seriesDPCount[this.mSeriesInfo[Ae].mSeriesId]===null){AO.seriesDPCount[this.mSeriesInfo[Ae].mSeriesId]=1;}else{++(AO.seriesDPCount[this.mSeriesInfo[Ae].mSeriesId]);}}Ai=0;Ab=Ah.GetPositionByValue(AP);if(Ab!==null){Ai=Ab;}if(Af&&AZ){AT[Ad]=A;AT[AK*2-Ad-1]=A;continue;}if((this.mIsAbsolute&&AZ)||Ab===null){AT[Ad]=A;AT[AK*2-Ad-1]=A;continue;}AR=AI.mCategoryAxisPtr.getGroupMiddlePos(Ad);if(!this.mIsAbsolute){var AQ=Am===T.LO_STACKED,AJ=Ah.mOptions.mUseCustomMinMax,An=Ah.mOptions.mUseLogarithmicScale;if(Ah.mOptions.mDrawFromZero||T.LO_PERCENT===Am||(AQ&&!AJ&&An)){if((AQ&&!AJ&&An)&&(Ae===0)){Ak=Ao;}else{Ak=0;Ab=this.GetData(Ae,Ad,true);if(Ab!==null){Ak=Ab;}}Ab=Ah.GetPositionByValue(Ak);if(Ab!==null){AM=Ab;}else{AT[Ad]=A;AT[AK*2-Ad-1]=A;continue;}}else{var AY=this.updateGroupStackInfoWithBase(AN,Ad,AS);var Aa=this.getSeriesOffsetIntoStackedInfo(AN,Ad,Ae);var Ap=AY[Aa];AM=Ah.ValueToPosition(AP>=Ao?Ap.Min:Ap.Max);Ai=Ah.ValueToPosition(AP>=Ao?Ap.Max:Ap.Min);}}if(Ai===AW&&AP!==Ao){if(this.mIsAbsolute&&this.mSeriesInfo.length===1){if(this.mIsVertical){Aj=AP>0?-1:1;}else{Al=AP>0?1:-1;}}else{if(Ae===0){this.mIgnoreBasesSeriesBorder=true;}}}if(this.mIsVertical){AT[Ad]=new i.Point2D({x:AR+Al,y:Ai+Aj});AT[AK*2-Ad-1]=new i.Point2D({x:AR+Al,y:AM+Aj});}else{AT[Ad]=new i.Point2D({x:Ai+Al,y:AR+Aj});AT[AK*2-Ad-1]=new i.Point2D({x:AM+Al,y:AR+Aj});}if(!AX&&Af){var Ac=AT[Ad];var Aq=Y.call(this,this.mIsVertical,AL,true,Ac);Ag=Ag||Aq;AV=AV||!Aq;Ac=AT[AK*2-Ad-1];Aq=Y.call(this,this.mIsVertical,AL,false,Ac);Ag=Ag||Aq;AV=AV||!Aq;AX=AV&&Ag;}}Ah.mOptions.mDrawFromZero=AU;return{POLYGON:AT,CROSS:AX};}function n(){var AL=this.mFinalSeriesPolygons,AR=this.mSeriesPolygons,AJ,AI,AK,AT,AS,AM=this.mpABLPlotContext.mABLOptions.mLayout;this.mSeriesDrawingOrder.splice(0,this.mSeriesDrawingOrder.length);AK=this.mSeriesInfo.length;for(AJ=0;AJ<AK;++AJ){var AN=E.call(this,AJ);var AP=AN.POLYGON;AS=AN.CROSS;AL.push(AP);if((AM===T.LO_STACKED||AM===T.LO_PERCENT)&&this.mChartContextPtr.mIsGraphMatrix){if(AS){this.mSeriesDrawingOrder.unshift(AJ);}else{this.mSeriesDrawingOrder.push(AJ);}}}AR.splice(0,AR.length);var AO;AK=AL.length;for(AJ=0;AJ<AK;++AJ){AO=[];AT=AL[AJ].length;for(AI=0;AI<AT;++AI){var AQ=new i.Point2D();this.GetAreaPointByProgress(AJ,AI,this.mProgress,AQ);AO.push(AQ);}AR.push(AO);}}function q(AJ){var AI;for(AI=0;AI<this.mSeriesInfo.length;++AI){if(AJ===this.mSeriesInfo[AI].mValueAxis||AJ===D.VA_BOTH){h.call(this,AI);}}}function h(AI){var AR=this.mSeriesInfo,AO=this.mSeriesPolygons[AI],AQ=this.mChartContextPtr.mIsGraphMatrix,AK,AN,AL,AS,AM=d.kVirtualMarkerSize,AJ,AP=AO.length;for(AJ=0;AJ*2<AP;++AJ){if(AO[AJ].x===-1){continue;}AK=this.mDatasetPtr.GetData(AR[AI].mSeriesId,AJ,0);if(AK===null||AK===undefined){continue;}if(AQ){this.CreateOneDataMarker(AI,AJ,null,AO[AJ],AJ);}else{AN=new i.Rect2D({x:AO[AJ].x-AM/2,y:AO[AJ].y-AM/2,height:AM,width:AM});AL=new i.TripleId({ObjectId:AA.DssGraphDataMarker,SeriesId:AR[AI].mSeriesId,GroupId:AJ});AS=new i.RectangleObject({TripleId:AL,GraphObjectManager:this,Area:AN,GraphCollectionObject:null,IsOnlyForToolTip:true,IsVirtualMarker:true});this.AddToMapAndList(AS);}}}function AH(AQ){var AO=this.mFinalSeriesPolygons[AQ.SeriesInfo],AP=0,AM=0,AI=this.mChartContextPtr,AN=AI.GetGraphMatrixContext(),AJ=AI.getUtiliy().tripleId,AL,AK;AJ.reset(u,AA.DssGraphRiser,AQ.SeriesId,AQ.GroupId);AL=AN.IsIsolatedDot(u);if(AO[AQ.GroupId].x===-1){return false;}if(AL){AK=this.GetGraphObject(u);if(AK!==null&&AK!==undefined&&AK.mMarkerSize!==undefined&&AK.mMarkerSize!==null){AP=AK.mMarkerSize;}AM=AP;}AQ.HostMarkerPoint=AO[AQ.GroupId];AQ.CenterXOffset=AP;AQ.CenterYOffset=AM;return true;}function c(){var AK,AJ=this.mDataLabels,AI=AJ.length;for(AK=0;AK<AI;++AK){AJ[AK].isValid=AH.call(this,AJ[AK]);}}function X(){var AI=this.mpABLPlot.dataLabelManager,AK=this.mChartContextPtr,AJ=new i.Rect2D({x:0,y:0,width:AK.mGraphWidth,height:AK.mGraphHeight});if(AI===null||AI===undefined){AI=this.mpABLPlot.dataLabelManager=new i.DataLabelManager({DataArea:AJ});AI.ChartContext=AK;}AI.SinglePointObjects=AI.SinglePointObjects.concat(this.mSinglePointObjects);AI.PolyLineObjects=AI.PolyLineObjects.concat(this.mAreaBoundForDataLabel);AI.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AI;}function P(){var AJ=this.mDataLabels,AI=AJ.length,AK;for(AK=0;AK<AI;++AK){if(AJ[AK].display){this.CreateOneDataMarker(AJ[AK].SeriesInfo,AJ[AK].GroupId,null,AJ[AK].HostMarkerPoint,-3,true);}}}function f(AJ){if(this.mChartContextPtr.mIsGraphMatrix){if(this.mDatasetPtr.showDatalabels()){this.CreateAllDataLabels();c.call(this);var AI=X.call(this);AI.PlaceDataLabels(this.mDataLabels,AJ);P.call(this);}}else{e.call(this);}}mstrmojo.chart.AreaSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.AreaSeriesRenderer",mAreaCollection:null,mSeriesPolygons:null,mFinalSeriesPolygons:null,mIsAbsolute:false,mIsPolygonSplit:false,mSeriesDrawingOrder:null,mGroupRangeList:null,mSinglePointObjects:null,mHasCreatedMarkers:false,mAreaBoundForDataLabel:null,mDataLabels:null,init:function AF(AI){this._super(AI);this.mAreaCollection=[];this.mSeriesPolygons=[];this.mFinalSeriesPolygons=[];this.mSeriesDrawingOrder=[];this.mGroupRangeList=[];this.mIsAbsolute=this.mpABLPlot.isAbsoluteOrCluster();this.mProgress=1;this.mSinglePointObjects=[];this.mAreaBoundForDataLabel=[];this.mDataLabels=[];},GenerateMapAndList:function AE(AI){var AJ=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}t.call(this);n.call(this);var AO=new i.TripleId({ObjectId:y.DssGraphRendererLayer,SeriesId:D.VA_BOTH}),AM=new i.GraphObjectAggregation({TripleId:AO,GraphObjectManager:this}),AR=this.mGraphObjectList;AR.splice(0,AR.length);this.GenerateInterpolationFrame(1,AM);if(AJ.mUseAnimation){this.GenerateInterpolationFrame(0,AM);}AR.push(AM);if(AJ.mImageUsage===J.GENERAL){f.call(this,AI);this.GenerateTrendLine();this.GenerateRefLine();}if(this.mSeriesDrawingOrder&&this.mSeriesDrawingOrder.length){var AL=this.renderSequence,AK=this.mSeriesDrawingOrder,AS=this.mSeriesInfo,AN,AQ=this.mSeriesDrawingOrder.length;AL.splice(0,AL.length);for(AN=0;AN<AQ;AN++){var AP=AK[AN];AP=AS[AP].mSeriesId;AL[AP]=AN;}}else{this.populateRenderSequence();}},GenerateByValueAxis:function s(AP){var AM=[],AL=[],AJ,AI,AK=this.mGraphObjectList,AO,AN;if(this.mSeriesPolygons.length===0){t.call(this);n.call(this);}AO=new i.TripleId({ObjectId:y.DssGraphRendererLayer,SeriesId:AP,GroupId:w});AN=new i.GraphObjectAggregation({TripleId:AO,GraphObjectManager:this});AM.push(AN);this.GenerateInterpolationFrame(1,AN);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0,AN);}AJ=AK.length;for(AI=0;AI<AJ;AI++){AL.push(AK[AI]);}AK.splice(0,AJ);AK.splice(0,AJ);for(AI=0;AI<AJ;++AI){AK.push(AL[AI]);}if(AP===D.VA_Y1){e.call(this);this.GenerateTrendLine();this.GenerateRefLine();}},GenerateInterpolationFrame:function Z(AI,AJ){var AQ=this.mSeriesPolygons,AN=this.mGraphObjectList,AU=AN.slice(0),AL=this.mFinalSeriesPolygons.length,AM,AK,AO,AS,AP,AT,AR;this.mProgress=AI;AQ.splice(0,AQ.length);for(AM=0;AM<AL;++AM){AO=[];AS=this.mFinalSeriesPolygons[AM].length;for(AK=0;AK<AS;++AK){AP=new i.Point2D();this.GetAreaPointByProgress(AM,AK,this.mProgress,AP);AO.push(AP);}AQ.push(AO);}AT=AJ.mTripleId.mSeriesId;if(AT===D.VA_BOTH){if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){m.call(this,D.VA_BOTH);q.call(this,D.VA_BOTH);}else{m.call(this,D.VA_Y2);m.call(this,D.VA_Y1);q.call(this,D.VA_Y2);q.call(this,D.VA_Y1);}}else{m.call(this,AT===D.VA_Y1?D.VA_Y1:D.VA_Y2);q.call(this,AT===D.VA_Y1?D.VA_Y1:D.VA_Y2);}AJ.Clear(AI<0.5,AI>=0.5);AR=AN.length;for(AM=0;AM<AR;++AM){AJ.AddGraphObject(AN[AM],AI<0.5);}if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AJ.SetAnimationEnable(true);AJ.SetProgress(AI);}AN.splice(0,AN.length);AN=AN.concat(AU);this._super(AI);},GetAreaPointByProgress:function N(AN,AQ,AI,AS){var AO=this.mFinalSeriesPolygons,AK=this.mChartContextPtr,AR=false,AM=[],AL,AT;if(AO[AN][AQ].x===-1&&AO[AN][AQ].y===-1){AS.x=-1;AS.y=-1;return ;}if(!!AK.mpOldChartManager){AL=AK.mpOldChartManager;var AP=AL.GetGraphObjectManager(this.mTripleId,true);if(AP!==null){AT=AP;AM=AT.mFinalSeriesPolygons.slice(0);AR=true;}}if(AR&&AN<AM.length&&AQ<AM[AN].length&&!(AM[AN][AQ].x===-1&&AM[AN][AQ].y===-1)){AS.x=AM[AN][AQ].x+(AO[AN][AQ].x-AM[AN][AQ].x)*AI;AS.y=AM[AN][AQ].y+(AO[AN][AQ].y-AM[AN][AQ].y)*AI;}else{var AJ=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AN].mValueAxis].GetBasePosition();if(this.mIsVertical){AS.x=AO[AN][AQ].x;AS.y=AJ-(AJ-AO[AN][AQ].y)*AI;}else{AS.x=AJ-(AJ-AO[AN][AQ].x)*AI;AS.y=AO[AN][AQ].y;}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","MarkerObject","NumberObject","Point2D","SeriesRenderer","PolyLineObject","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumAttachedPointsStyle","EnumImageUsage","EnumGraphMatrixElementSizeMode","EnumValueAxis");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType","EnumDSSExtraGraphProperty");var f=mstrmojo.chart,O=f.enums,E=O.EnumCollectionType,AA=O.EnumDSSExtraGraphObject,n=O.EnumMajorGraphType,Q=O.EnumLayout,J=O.EnumOrientation,F=O.EnumValueAxis,P=O.EnumAttachedPointsStyle,L=O.EnumImageUsage,AH=O.EnumGraphMatrixElementSizeMode,z=f.gNullGroupId,Z=f.model,S=Z.enums,AD=S.EnumDSSGraphMarkerShape,AC=S.EnumDSSGraphObject,AE=S.EnumShapeType;var K=new f.TripleId(),U=new f.Point2D(),C=new f.Point2D();U.Reset(-2,-2);C.Reset(-1,-1);U.dangling=true;C.isNull=true;mstrmojo.chart.LineSeriesOptions=mstrmojo.provide("mstrmojo.chart.LineSeriesOptions",{});function b(){if(this.mExpectedLineCount===undefined){var AS=this.mSeriesInfo,AR,AU,AQ=0,AT=this.mDatasetPtr,AP=AS.length;for(AR=0;AR<AP;AR++){AU=AS[AR].mSeriesId;if(AT.GetShapeBySeries(AU)===AE._LINE){AQ++;}}this.mExpectedLineCount=AQ;}return this.mExpectedLineCount;}function d(){return{mShowStepLine:false,mShowMarkers:true,mMarkerShape:0,mMarkerSize:50};}function AO(AT){if(!this.mSupportDiscretePoints){return ;}var AP=[],AR=0,AU=new f.Point2D(),AX=this.mVecGroupIdMapPerSeries,AQ,AV;if(this.discreteMatrix===undefined){this.discreteMatrix=[];}var AS=[];AX.splice(0,AX.length);AV=this.mGroupCount;for(AQ=0;AQ<AV;++AQ){if(this.GetLinePoint(AT,AQ,AU)){AP[AR]=AQ;AR++;}else{if(AP.length>0){var AW=AP.concat();AX.push(AW);}AP.splice(0,AP.length);AR=0;AS.push(AQ);}}AS.push(AV);this.discreteMatrix[AT]=AS;if(AP.length>0){AX.push(AP);}}function w(){if(this.mChartContextPtr.mUseAnimation){return this.mProgress===1;}return true;}function h(){return true;}function M(AW,AT){var AS=-1,AR,AP,AQ=this.clusterInfo,AU=this.mpABLPlotContext,AV=AU.mCategoryAxisPtr;AR=this.mSeriesInfo[AW].mDataIndex;if(AQ.Circle){AS=AQ.Circle.indexOf(AR);}if(AS===-1&&AQ.Tick){AS=AQ.Tick.indexOf(AR);}if(AS===-1&&AQ.Square){AS=AQ.Square.indexOf(AR);}if(AS===-1){AS=AR%AQ.columns;}AP=AV.getGroupStartPos(AT)+0.5*AQ.groupGap+(AQ.unitWidth+AQ.riserGap)*AS+0.5*AQ.unitWidth;AP=Math.floor(AP+0.5);return AP;}function x(AT,AW,AR){var AP=this.mChartContextPtr;if(AP.RenderClusterShapes()&&this.mpABLPlotContext.takeGroupCenter===false){if(this.clusterInfo===undefined){var AS,AQ=this.mDatasetPtr.GetClusterSeriesCount(),AX=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),AZ=this.evalBarStyleUnitWidth(AX,AQ);this.clusterInfo=mstrmojo.hash.copy(AZ);if(AS){var AY=this.clusterInfo;AY.Circle=AS.Circle.concat();AY.Tick=AS.Tick.concat();AY.Square=AS.Square.concat();}}var AU=M.call(this,AT,AW),AV=new f.Point2D({Point2D:AR});if(this.mIsVertical){AV.x=AU;}else{AV.y=AU;}return AV;}return AR;}function N(Ab,AQ,Aa,AY){var Ag,Ap,Am,Ak,Ai,Af,Aj,AT=false,AV,AR=Ab.shape,AU,Ae,Al=Aa[AY],AS=this.mChartContextPtr,AZ=this.mDatasetPtr,Ac=this.mSinglePointObjects,Ao=AS.GetGraphMatrixContext(),Aq,An;Ap=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AQ].mValueAxis];if(Ap){AT=true;Ag=Ap.GetMaxMinDataInputPosition();AU=Ag.LowBoundary;Ae=Ag.HighBoundary;Aj="y1";var AP=Ap.mTripleId.mObjectId;Aj=AS.getAxisKeyFromObjectId(AP);AV=this.mClippedMarkerSize[Aj];}Aq=Al.length;var Ar;var Ad,Ah,AX,As,AW;for(Am=0;Am<Aq;++Am){Ai=new f.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:this.mSeriesInfo[AQ].mSeriesId,GroupId:this.getCorrectGroupIdInSeriesPoints(Am,AY)});Ar=x.call(this,AQ,Ai.mGroupId,Al[Am]);Af=this.drawSingleDataPoint(Ai,Ar,AR);An=Af.length;for(Ak=0;Ak<An;++Ak){if(Af[Ak].Object){this.AddToMapAndList(Af[Ak].Object);}}Ad=AZ.showSeriesDatalabel(Ai.mSeriesId);if(Af.length>0){if(Af[0].Object!==null&&Af[0].Object!==undefined&&Ad){Ac.push(Af[0].Object);}Ab.AlreadyInMapAndList=true;Ab.Obj=Af[0];if(AT){An=Af.length;for(Ak=0;Ak<An;++Ak){Ah=Af[Ak];AX=AV.LowOffset;As=AV.HighOffset;AW=Ah.ShapeSize;if(AW===undefined){if(Ah.Object){AW=Ah.Object.getShapeSize();}else{AW=0;}}Ag=Ao.getClippedOffset(AU,Ae,AW,Al[Am],!AS.IsVertical(),AX,As);AV.LowOffset=AX=Ag.LowOffset;AV.HighOffset=As=Ag.HighOffset;}}}}Ab.AlreadyInMapAndList=true;Ab.Obj=null;return Ab;}function y(AS){var AV=this.mChartContextPtr,AQ,AT=[];if(AV.mIsGraphMatrix&&this.mGroupCount===1){AQ=new f.Point2D();if(!this.GetLinePoint(AS,0,AQ)){return ;}AT.push(AQ);var AU=[];AU.push(AT);var AP={};var AR=i.call(this,AS);AP.shape=AR;N.call(this,AP,AS,AU,0);if(AP.AlreadyInMapAndList===false){this.AddToMapAndList(AP.Obj);}}}function m(AW,AR,AQ){var AP,AT,AV=true,AS=0,AU=100;for(AP=0;AP<AQ;++AP){AT=this.mDatasetPtr.GetSizeByData(AW,AR+AP);if(AT!==null){if(AV){AS=AT;AV=false;}else{if(AS!==AT){return true;}}}if(AP>AU){return true;}}return false;}function I(Ag,AW,AU,AQ,AP){var AS=this.mChartContextPtr,Ad=AW[AU],Ab=new f.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:this.mSeriesInfo[AQ].mSeriesId,GroupId:AU}),AY,Ac,AV=this.mDatasetPtr,Af;Ab.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,Ab.mGroupId);AY=new f.PolyLineObject({TripleId:Ab,GraphObjectManager:this,PolyLine:Ad,GraphCollectionObject:this.mLineCollections[AQ],Shape:AE._LINE});Ac=AY.mFormatLinePtr;AY.movePointsAgainstBorder();Ad=AY.mLinePoints;var AZ=Ag&&this.mDatasetPtr.isGradientABL();if(AZ){var Ae,AT,AX=Ad.length,Aa,AR={Valid:true,Angle:AS.IsVertical()?0:1,EndAlpha:255,Style:1,Colors:[],Start:{x:Ad[0].x,y:Ad[0].y},End:{x:Ad[AX-1].x,y:Ad[AX-1].y}};Af=Ad.length;for(Ae=0;Ae<Af;++Ae){AT=Ae/(Ad.length-1);Aa=AV.GetColorByData(Ab.mSeriesId,Ab.mGroupId+Ae);AR.Colors.push({Step:AT,Color:Aa});}AY.mFormatLinePtr=Ac.transformToGradient(AR);this.AddToMapAndList(AY);}if(AV.showSeriesDatalabel(Ab.mSeriesId)){this.mPolyLineObjects.push(AY);}return{Obj:AY,AlreadyInMapAndList:AZ};}function k(AP,AW,AS,AV,AU){var AT=this.mChartContextPtr.GetGraphMatrixContext(),AX=AT.GetScaledSizeWithRatio(AS,AW)/2,AR=new f.Point2D({Point2D:AP}),AQ=new f.Point2D({Point2D:AP});if(this.mIsVertical){AR.y-=AX;AQ.y+=AX;}else{AR.x-=AX;AQ.x+=AX;}AV.x=AR.x;AV.y=AR.y;AU.x=AQ.x;AU.y=AQ.y;}function u(AU,Ac,AV){var AX=this.mChartContextPtr.GetGraphMatrixContext(),AP=AX.mElementsInfo.Min.Mode,AQ,AS,AT=[],AW=[],AZ=0,AY,Ab,AR,Ad,Aa;Aa=Ac.length;for(AS=0;AS<Aa;++AS){AQ=Ac[AS];AY=this.mDatasetPtr.GetSizeByData(AU.mSeriesId,AU.mGroupId+AS);if(AY!==null){AZ=AX.ToRatioEx(AY,(AP===AH._PROPORTIONAL));if(AZ<0){AZ=0;}}Ab=new f.Point2D();AR=new f.Point2D();k.call(this,AQ,AV,AZ,Ab,AR);AT.push(Ab);AW.push(AR);}AW.reverse();Ad=AT.concat(AW);return Ad;}function V(Aq,Ad,Ab,AR,AQ){var Ac=this.mDatasetPtr,AZ=Ad[Ab],Al,Ak,Am,Ae,AU,AS=null,AV=this.mChartContextPtr,Aa=this.mSeriesInfo,Ao=AV.GetGraphMatrixContext(),Ag=Ao.GetAdjustThicknessValue(AQ),Aj=new f.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:Aa[AR].mSeriesId,GroupId:Ab}),Ap,Ah,AW,Af,AY,Ai,AP;Aj.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,Aj.mGroupId);Ae=u.call(this,Aj,AZ,Ag);if(AV.mImageUsage===L.GENERAL){AS=new f.PolygonObject({TripleId:Aj,GraphObjectManager:this,Polygon:Ae,Shape:AE._POLYGON});AS.mPointsStyle=P.TOOLTIP_TRAPEZOID;}var An=this.mpABLPlotContext.mValueAxis[Aa[AR].mValueAxis];if(An){Ah=An.GetMaxMinDataInputPosition();AW=Ah.LowBoundary;Af=Ah.HighBoundary;AP=An.mTripleId.mObjectId;Ai=AV.getAxisKeyFromObjectId(AP);AY=this.mClippedMarkerSize[Ai];}if(Aq&&AS){Ak=AS.mFormatFillPtr;AU=this.prepareTransitionalGradient(Aj,AZ);Am=Ak.transformToGradient(AU);AS.SetFormatFill(Am);}Ap=Ae.length;var AX,AT=2+2;for(Al=0;Al<Ap;++Al){AX=this.mChartContextPtr.IsVertical()?Ae[Al].y:Ae[Al].x;if(this.mChartContextPtr.IsVertical()){if(AX<Af){AY.HighOffset=Math.max(AY.HighOffset,Af-AX);AY.HighOffset=Math.max(AY.HighOffset,AT);}if(AW<AX){AY.LowOffset=Math.max(AY.LowOffset,AX-AW);AY.LowOffset=Math.max(AY.LowOffset,AT);}}else{if(AX-Af>0){AY.HighOffset=Math.max(AY.HighOffset,AX-Af);AY.HighOffset=Math.max(AY.HighOffset,AT);}if(AW-AX>0){AY.LowOffset=Math.max(AY.LowOffset,AW-AX);AY.LowOffset=Math.max(AY.LowOffset,AT);}}}if(AS){this.AddToMapAndList(AS);if(Ac.showSeriesDatalabel(Aj.mSeriesId)){this.mPolygonObjects.push(AS);}}return{Obj:AS,AlreadyInMapAndList:true};}function t(AS,AT,AQ){var AR=this.mChartContextPtr,AU=4,AW=AR.GetGraphMatrixContext(),AV=AW.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount,false,AD.DssGraphMarkerShapeNone),AP=false,AX=true;if(this.mHasSizeBy){AX=(AV<=AU)&&!m.call(this,this.mSeriesInfo[AS].mSeriesId,this.getCorrectGroupIdInSeriesPoints(0,AT),AQ[AT].length);if(AW.mMaxSizeVal===AW.mMinSizeVal){AV=Math.max(AW.mElementsInfo.Max.Size,AW.mConstants.MinimalSize.Line);}}AP=AP||this.mHasColorBy;if(AX){return I.call(this,AP,AQ,AT,AS,AV);}return V.call(this,AP,AQ,AT,AS,AV);}function i(AQ){var AU=this.mChartContextPtr,AS=AU.GetGraphMatrixContext(),AR,AP=AS.mMarkerShape;if(AU.mIsGraphMatrix){if(AU.isCombinationChart()){var AT=this.mDatasetPtr;AQ=this.mSeriesInfo[AQ].mSeriesId;AR=AT.GetShapeBySeries(AQ);return AR;}switch(AP){case AD.DssGraphMarkerShapeCircle:return AE._CIRCLE;case AD.DssGraphMarkerShapeRectangle:case AD.DssGraphMarkerShapeSquare:return AE._SQUARE;case AD.DssGraphMarkerShape2DPie:case AD.DssGraphMarkerShape2DRingPie:return AE._PIE;case AD.DssGraphMarkerShapeGMTick:return AE._TICKER;default:return AE._LINE;}}else{return 0;}}function T(AR,AS,AP){var AQ=this.mChartContextPtr,AT,AU,AW=AQ.mIsGraphMatrix,AX={Obj:null,AlreadyInMapAndList:false};if(AW){var AV=i.call(this,AR);AX.shape=AV;if(AP[AS].length===1){if(this.mDatasetPtr.ShouldTakeGroupCenter()&&AQ.isCombinationChart()){if(AX.shape===AE._LINE){AX.shape=AE._CIRCLE;}}return N.call(this,AX,AR,AP,AS);}switch(AV){case AE._CIRCLE:case AE._SQUARE:case AE._PIE:case AE._TICKER:case AE._COMBINED:return N.call(this,AX,AR,AP,AS);default:return t.call(this,AR,AS,AP);}}AT=new f.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:this.mSeriesInfo[AR].mSeriesId,GroupId:AS});AU=new f.PolyLineObject({TripleId:AT,GraphObjectManager:this,PolyLine:AP[AS],GraphCollectionObject:this.mLineCollections[AR]});AX.Obj=AU;return AX;}function B(AR,AQ){var AW=this.discreteMatrix,AT=0,AS,AU,AX;if(AW&&AW[AR]){AX=AW[AR];AU=AX.length;for(AS=0;AS<AU;AS++){if(AQ>=AT&&AQ<AX[AS]){return AS;}AT=AX[AS];}}var AP=[],AV;AT=0;this.GetLinePointSet(AR,AP);AV=AP.length;for(AS=0;AS<AV;++AS){if(AQ>=AT&&AQ<AT+AP[AS].length){return AQ;}AT+=AP[AS].length;}return AQ;}function s(AU,AR,AT){var AP,AQ=new f.Point2D(),AS=new f.Point2D();AQ.x=AR.x;AQ.y=AR.y;AS.x=AR.x;AS.y=AR.y;AP={HighPoint:AQ,LowPoint:AS};if(AU){AS.y-=AT;AQ.y+=AT;}else{AS.x-=AT;AQ.y+=AT;}return AP;}function g(AR,AT,AQ){var AP=this.mChartContextPtr.GetGraphMatrixContext(),AS=AP.GetScaledSizeWithRatio(AQ,AT)/2;return s.call(this,this.mIsVertical,AR,AS);}function H(AV,Ad){var AP=new f.Point2D(),AS,AZ=true,AX=this.mChartContextPtr.GetGraphMatrixContext(),AQ=AX.mElementsInfo.Min.Mode,AW,Ae,Aa,AU=0,Ac,AY=1,Ab,AT,AR={};this.GetLinePoint(AV,Ad,AP);AS=AX.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount);if(AX.mHasSizeBy){AZ=false;if(AX.mMaxSizeVal===AX.mMinSizeVal){AS=Math.max(AX.mElementsInfo.Max.Size,AX.mConstants.MinimalSize.Line);AZ=true;}}if(AZ){AT=B.call(this,AV,Ad);AW=new f.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:this.mSeriesInfo[AV].mSeriesId,GroupId:AT});Ae=this.GetGraphObject(AW);if(Ae!==undefined&&Ae!==null){Aa=Ae.mFormatLinePtr;AS=Aa.mLineThickness;AU=AS/2;}Ac=s.call(this,this.mIsVertical,AP,AU);}else{Ab=this.mDatasetPtr.GetData(this.mSeriesInfo[AV].mSeriesId,Ad,AX.mSizeIndex,false);if(Ab!==null&&Ab!==undefined){AY=AX.ToRatioEx(Ab,(AQ===AH._PROPORTIONAL));if(AY<0){AY=0;}}Ac=g.call(this,AP,AS,AY);}AR.XCenterOffset=(Ac.HighPoint.x-Ac.LowPoint.x)/2;AR.YCenterOffset=(Ac.HighPoint.y-Ac.LowPoint.y)/2;return AR;}function AL(Ab){var AV=new f.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:Ab.SeriesId,GroupId:Ab.GroupId}),AQ=this.mChartContextPtr,AY=AQ.GetGraphMatrixContext(),AZ=AY.IsIsolatedDot(AV),AR,AP=new f.Point2D(),Aa=0,AU=0,AT,AW,AS=this.mDatasetPtr,AX;if(this.GetLinePoint(Ab.SeriesInfo,Ab.GroupId,AP)){if(AY.mMarkerShape===AD.DssGraphMarkerShapeCombined){AX=AS.GetShapeBySeries(Ab.SeriesId);AR=(AX===AE._CIRCLE||AX===AE._RECTANGLE||AX===AE._TICKER||AX===AE._SQUARE);}else{AR=(AY.mMarkerShape===AD.DssGraphMarkerShapeCircle||AY.mMarkerShape===AD.DssGraphMarkerShapeRectangle||AY.mMarkerShape===AD.DssGraphMarkerShapeGMTick||AY.mMarkerShape===AD.DssGraphMarkerShapeSquare);}if(AZ||AR){AT=this.GetGraphObject(AV);if(AT!==null&&AT!==undefined){if(AT.mMarkerSize!==undefined&&AT.mMarkerSize!==null&&AT.MarkerPosition!==undefined&&AT.MarkerPosition!==null){Aa=AT.mMarkerSize;AU=Aa;AP.x=AT.MarkerPosition.x;AP.y=AT.MarkerPosition.y;}else{if(AT instanceof mstrmojo.chart.RectangleObject&&AT.mRect!==undefined&&AT.mRect!==null){Aa=AT.mRect.width/2;AU=AT.mRect.height/2;AP.x=AT.mRect.x+Aa;AP.y=AT.mRect.y+AU;}else{if(AT instanceof mstrmojo.chart.StraightLineObject){AP.x=0.5*(AT.mDeviceStartPoint.x+AT.mDeviceEndPoint.x);AP.y=0.5*(AT.mDeviceStartPoint.y+AT.mDeviceEndPoint.y);}}}}}else{AW=H.call(this,Ab.SeriesInfo,Ab.GroupId);if(AW!==null&&AW!==undefined){Aa=AW.XCenterOffset;}AU=AW.YCenterOffset;}Ab.HostMarkerPoint=AP;Ab.CenterXOffset=Aa;Ab.CenterYOffset=AU;return true;}return false;}function a(){var AR,AQ=this.mDataLabels,AP=AQ.length;for(AR=0;AR<AP;++AR){AQ[AR].isValid=AL.call(this,AQ[AR]);}}function W(){var AP=this.mpABLPlot.dataLabelManager,AR=this.mChartContextPtr,AQ=new f.Rect2D({x:0,y:0,width:AR.mGraphWidth,height:AR.mGraphHeight});if(AP===null||AP===undefined){AP=this.mpABLPlot.dataLabelManager=new f.DataLabelManager({DataArea:AQ});AP.ChartContext=AR;}AP.SinglePointObjects=AP.SinglePointObjects.concat(this.mSinglePointObjects);AP.PolyLineObjects=AP.PolyLineObjects.concat(this.mPolyLineObjects);AP.PolygonObjects=AP.PolygonObjects.concat(this.mPolygonObjects);AP.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AP;}function l(){var AS=this.mDataLabels.length,AR,AQ,AP;for(AP=0;AP<AS;++AP){AQ=this.mDataLabels[AP];if(AQ.display){AR=AQ.GroupId;this.CreateOneDataMarker(AQ.SeriesInfo,AQ.GroupId,this.mMarkerCollections[AQ.SeriesInfo],AQ.HostMarkerPoint,AR,true);}}}function AM(AP){var AQ=this.mChartContextPtr,AT=this.mDatasetPtr,AW=AQ.GetGraphMatrixContext(),AZ,AX,AR=this.mpABLPlot;if(AQ.mIsGraphMatrix){AX=AT.showDatalabels();AZ=(AW.mMarkerShape===AD.DssGraphMarkerShape2DPie||AW.mMarkerShape===AD.DssGraphMarkerShape2DRingPie);}if(AX){var AS=AR.dataLabelManager;if(AS===null||AS===undefined){var AV=new f.Rect2D({x:0,y:0,width:AQ.mGraphWidth,height:AQ.mGraphHeight});AS=AR.dataLabelManager=new f.DataLabelManager({DataArea:AV});AS.ChartContext=AQ;}if(AZ){var Ac=this.mPieRenderer;Ac.enableDataLabel(this.mpABLPlot.dataLabelManager,AP);var AU,AY=Ac.dataLabels,Ab,Aa=AY.length;for(AU=0;AU<Aa;++AU){Ab=AY[AU].Label;if(Ab.mIsShown){this.AddToMapAndList(Ab);}}}else{this.CreateAllDataLabels();a.call(this);AS=W.call(this);AS.PlaceDataLabels(this.mDataLabels,AP);l.call(this);}}}mstrmojo.chart.LineSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.LineSeriesRenderer",mLineCollections:null,mMarkerCollections:null,mVecSeriesPoints:null,mLineSeriesOptions:null,mDepth:0,mInitialized:false,mIsByValueAxis:false,mGroupIdMapPerSeries:null,mVecGroupIdMapPerSeries:null,mHasCreatedMarkers:false,mDataLabels:null,mSinglePointObjects:null,mPolyLineObjects:null,mPolygonObjects:null,init:function AJ(AP){this._super(AP);this.mDepth=this.mpABLPlot.unitLevelDepth;this.mLineCollections=[];this.mMarkerCollections=[];this.mVecSeriesPoints=[];this.mLineSeriesOptions=[];this.mGroupIdMapPerSeries=[];this.mVecGroupIdMapPerSeries=[];this.mSupportDiscretePoints=this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];this.mSinglePointObjects=[];this.mPolyLineObjects=[];this.mPolygonObjects=[];},GenerateMapAndList:function AI(AR){var AV=this.mChartContextPtr,AQ,AS,AU=mstrmojo.chart.RenderLayer2,AT=this.mSeriesInfo,AP=this.mLineSeriesOptions;if(AT.length===0){return ;}for(AQ=0;AQ<AT.length;++AQ){AP.push(d());if(AV.mIsGraphMatrix){AP[this.mLineSeriesOptions.length-1].mShowMarkers=false;}this.loadSeriesProperties(AQ);}this.GenerateLineCollections();this.GenerateMarkerCollections();AS=new f.GraphObjectAggregation({TripleId:AU,GraphObjectManager:this});this.mGraphObjectList.push(AS);this.GenerateInterpolationFrame(1);if(AV.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AV.mImageUsage===L.GENERAL){this.CreateAllSeriesLabels(AR);this.GenerateTrendLine();this.GenerateRefLine();this.populateRenderSequence();}},GenerateByValueAxis:function v(AS,AP){var AR=this.mSeriesInfo,AQ;if(AR.length===0){return ;}if(!this.mInitialized){for(AQ=0;AQ<AR.length;++AQ){this.mLineSeriesOptions.push(d());this.loadSeriesProperties(AQ);}this.GenerateLineCollections();this.GenerateMarkerCollections();this.mInitialized=true;this.mIsByValueAxis=true;}this.mGraphObjectList.push(new f.GraphObjectAggregation({TripleId:new f.TripleId({ObjectId:AA.DssGraphRendererLayer,SeriesId:AS,GroupId:z}),GraphObjectManager:this}));this.GenerateInterpolationFrame(1);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AS===F.VA_Y1){this.CreateAllSeriesLabels();}},loadSeriesProperties:function r(AP){if(this.mChartContextPtr.mImageUsage!==0){return ;}},LoadStepLine:function c(AP){this.mLineSeriesOptions[AP].mShowStepLine=false;},GenerateMapAndListForSeries:function p(AU){var AQ=this.mChartContextPtr,AP=[],AR,AV,AW,AT,Aa,AZ,AX;if(this.mGroupCount<2&&this.mSupportDiscretePoints){y.call(this,AU);return ;}AO.call(this,AU);this.GetLinePointSet(AU,AP);AR=w.call(this);if(!this.mpABLPlotContext.mABLOptions.mUseDepth){var AY=this.mGraphObjectList,AS=this.mLineCollections;if(AP&&AP.length){if(this.mpABLPlotContext.mABLOptions.mCurvedLines){AX=AP.length;for(AV=0;AV<AX;++AV){AW=new f.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:this.mSeriesInfo[AU].mSeriesId,GroupId:AV});AT=null;if(AT){AY.push(AT);}if(AR){this.mGraphObjectMap.push(AW,AT);AS[AU].AddGraphObject(AT);}}}else{AX=AP.length;for(AV=0;AV<AX;++AV){if(AQ.mIsGraphMatrix){this.mGroupIdMapPerSeries=this.mVecGroupIdMapPerSeries[AV];}else{this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);}Aa=false;AZ=T.call(this,AU,AV,AP);AT=AZ.Obj;Aa=AZ.AlreadyInMapAndList;if(AQ.mIsTimeSeriesChart){AT.mIsDetectable=false;}if(!Aa&&AT){AY.push(AT);if(AR){this.AddToMap(AT);AS[AU].AddGraphObject(AT);}}}}}}},GenerateByValueAxisAndGroup:function AB(AV,AR){var AS,AZ,AT=[],Aa=[],AX=[],AW,AP,AY,AQ,AU;if(this.mGroupCount<2){return ;}if((AR===-1)||this.mHasNegativeValue){this.GenerateOrderedDepthLine(AV,AR,false);}else{AZ=this.IsReverseSeriesOrder(AV);AU=this.mSeriesInfo.length;for(AS=0;AS<AU;++AS){AW=AZ?this.mSeriesInfo.length-AS:AS;if(this.mSeriesInfo[AW].mValueAxis===AV){AP=new f.Point2D();AY=new f.Point2D();if(this.GetLinePoint(AW,AR-1,AP)&&this.GetLinePoint(AW,AR,AY)){AT.push([AP,AY]);Aa.push(AW);AX.push(true);}}}AU=AT.length;for(AS=0;AS+1<AU;++AS){AQ=new f.Vector2D({x:AT[AS+1][0],y:AT[AS+1][1]});if(this.PriorToNextSeries(AQ,AR)){this.GenerateDepthLine(Aa[AS],AR,AT[AS]);AX[AS]=false;}}for(AS=AT.length-1;AS>=0;--AS){if(AX[AS]){this.GenerateDepthLine(Aa[AS],AR,AT[AS]);}}}},GetLinePointSet:function e(AV,AR){var AU=[],AT=this.mSupportDiscretePoints?0:1,AS,AQ,AP,AW=this.mGroupCount;for(AS=0;AS<AW;++AS){AP=new f.Point2D();if(this.GetLinePoint(AV,AS,AP)){AU.push(AP);}else{if(AU.length>AT){AQ=AU.slice(0);AR.push(AQ);}AU.length=0;}}if(AU.length>AT){AR.push(AU);}},GetLinePoint:function AF(AW,Ab,AU){var AS=this.mChartContextPtr,AY=0,AX=0,Aa,AV,AQ,AP=false,Ac,AT,AR,AZ;if(!this.GetFinalLinePoint(AW,Ab,AU,false)){return false;}if(this.mProgress===1){return true;}if(this.mUseDepth){AZ=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[AW].mSeriesIndex);AY=AZ.OffsetX;AX=AZ.OffsetY;}if(AS.mOldChartManager!==null){AV=AS.mOldChartManager;Aa=AV.GetGraphObjectManager(this.mTripleId,true);}AQ=new f.Point2D({Point2D:AU});if(Aa!==null){Ac=Aa;AP=Ac.GetFinalLinePoint(AW,Ab,AQ,true);if(!AP){AT=Ac.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(Ab);if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){if(this.mDeviceDataArea){if(AT>this.mDeviceDataArea.y+this.mDeviceDataArea.height){AT=this.mDeviceDataArea.y+this.mDeviceDataArea.height;}if(AT<this.mDeviceDataArea.y){AT=this.mDeviceDataArea.y;}AQ.y=AT+AX;}}else{if(this.mDeviceDataArea){if(AT>this.mDeviceDataArea.x+this.mDeviceDataArea.width){AT=this.mDeviceDataArea.x+this.mDeviceDataArea.width;}if(AT<this.mDeviceDataArea.x){AT=this.mDeviceDataArea.x;}AQ.x=AT+AY;}}}}if(!AP){AR=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AW].mValueAxis].GetBasePosition();if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){AQ.x=AR+AY;}else{AQ.y=AR+AX;}}AU.x=AQ.x+(AU.x-AQ.x)*this.mProgress;AU.y=AQ.y+(AU.y-AQ.y)*this.mProgress;return true;},GetFinalLinePoint:function D(AV,Ac,AQ,Ab){var Ad,AT=this.mVecSeriesPoints,AU=this.mpABLPlotContext,AR=this.mpABLPlot,AY=0,AX=0,AW,AP,Aa,AZ;if(Ab&&(AV>=AT.length||Ac>=AT[AV].length)){return false;}while(AT.length<=AV){Ad=[];AT.push(Ad);}while(AT[AV].length<=Ac){AT[AV].push(U);}var AS=AT[AV][Ac];if(AS.x!==-2&&!!AS.dangling===false){if(AS.x===-1&&AS.isNull){return false;}AQ.ResetPoint(AS);return true;}if(Ab){return false;}AT[AV][Ac]=C;if(this.mUseDepth){AZ=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[AV].mSeriesIndex);AY=AZ.OffsetX;AX=AZ.OffsetY;}AW=this.GetData(AV,Ac);if(AW===null){return false;}K.mSeriesId=this.mSeriesInfo[AV].mSeriesId;K.mGroupId=Ac;if(this.mDatasetPtr.GetShapeBySeries(K.mSeriesId)===AE._LINE){if(this.mChartContextPtr.checkColorByAndSizeByValue(K,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return false;}}AP=Math.floor(AU.mCategoryAxisPtr.getGroupMiddlePos(Ac));Aa=AU.mValueAxis[this.mSeriesInfo[AV].mValueAxis].GetPositionByValue(AW);if(Aa===null){return false;}if(AU.mABLOptions.mOrientation===J.OR_HORIZONTAL){AQ.x=Aa+AY;AQ.y=AP+AX;}else{AQ.x=AP+AY;AQ.y=Aa+AX;}AT[AV][Ac]=new f.Point2D({Point2D:AQ});++AR.DPCount;if(AR.seriesDPCount[this.mSeriesInfo[AV].mSeriesId]===undefined||AR.seriesDPCount[this.mSeriesInfo[AV].mSeriesId]===null){AR.seriesDPCount[this.mSeriesInfo[AV].mSeriesId]=1;}else{++(AR.seriesDPCount[this.mSeriesInfo[AV].mSeriesId]);}return true;},GenerateDepthLine:function Y(AR,AQ,AP){},GenerateLineCollections:function R(){var AP=this.mChartContextPtr,AR,AQ,AW,AV,AS,AY,AT,AU=AP.GetGraphMatrixContext(),AX=AP.mIsGraphMatrix;AQ=this.mUseDepth?E.CT_DEPTH_LINE_OR_LINE_MARKER:E.CT_LINE;AW=this.mUseDepth?AC.DssGraphRiser:AC.DssGraphDataLine;AV=this.mSeriesInfo.length;if(AX){if(AP.isLegendByGroup()){AV=this.mGroupCount;}AQ=E.CT_LINE;}for(AR=0;AR<AV;++AR){AY=this.mSeriesInfo[AR].mSeriesId;AS=new f.TripleId({ObjectId:AW,SeriesId:AY});if(AU.isCombinationChart()===false&&AU.isPieOrRingShape()){AT=null;}else{AT=new f.GraphCollectionObject({TripleId:AS,GraphObjectManager:this,CollectionType:AQ});}this.mLineCollections.push(AT);if(this.mpABLPlotContext.mABLOptions.mMajorGraphType!==n.MGT_PARETO||this.mUseDepth){if(!AX){this.AddLegendMarkerToCollection(AR,this.mLineCollections[AR],true,this.mLineSeriesOptions[AR].mShowMarkers,this.mLineSeriesOptions[AR].mMarkerShape,this.mpABLPlotContext.mABLOptions.mShowLines);}}}},GenerateMarkerCollections:function A(){var AQ,AT,AR=this.mLineSeriesOptions,AP=this.mGraphObjectMap,AS=this.mMarkerCollections,AU,AV;AQ=this.mSeriesInfo.length;for(AT=0;AT<AQ;++AT){if(AR[AT].mShowMarkers&&(!this.mUseDepth)){AU=new f.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:this.mSeriesInfo[AT].mSeriesId});AV=new f.GraphCollectionObject({TripleId:AU,GraphObjectManager:this,CollectionType:E.CT_DEPTH_LINE_OR_LINE_MARKER});AP.push(AU,AV);AS.push(AV);}else{AS.push(null);}}},CreateSeriesMarkers:function G(AR){var AQ,AP,AS;AS=this.mGroupCount;for(AQ=0;AQ<AS;++AQ){AP=new f.Point2D();if(this.GetLinePoint(AR,AQ,AP)){this.CreateMarker(AR,AQ,this.mMarkerCollections[AR],AP);}}},CreateAllSeriesLabels:function AG(AQ){var Ab,Aa,AV,AU,AT,Ad,AY,Ac,AZ,AS,AX,AP=this.mpABLPlotContext,AW=AP.mABLOptions,AR=AP.mSeriesOptions,Ae=this.mGroupCount;if(this.mChartContextPtr.mIsGraphMatrix){AM.call(this,AQ);return ;}AX=this.mSeriesInfo.length;for(AV=0;AV<AX;++AV){if(AR[this.mSeriesInfo[AV].mSeriesIndex].mShowDataLabels){Ab=new f.TripleId({ObjectId:AC.DssGraphDataText,SeriesId:this.mSeriesInfo[AV].mSeriesId});Aa=new f.GraphCollectionObject({TripleId:Ab,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Aa);for(AU=0;AU<Ae;++AU){AT=this.createRiserLabel(AV,AU,Aa);if(AT!==null){Ad=new f.Point2D();AY=new f.Point2D();this.GetMinMaxPoint(AV,AU,Ad,AY);this.MoveLabel(AU,AT,AY,Ad,AV);}}}}if((AW.mMajorGraphType===n.MGT_LINE)&&(AW.mLayout===Q.LO_STACKED)&&(!AW.mShowCumulate)&&(AW.mShowValue)&&(AW.mShowTotal)){Ab=new f.TripleId({ObjectId:AC.DssGraphDataTextStackTotal,SeriesId:this.mTripleId.mSeriesId});Aa=new f.GraphCollectionObject({TripleId:Ab,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Aa);if(AW.mDualAxes){for(AV=0;AV<Ae;++AV){Ac=this.CreateTotalLabel(F.VA_Y1,AV,Aa);AZ=this.CreateTotalLabel(F.VA_Y2,AV,Aa);if(Ac!==null){Ad=new f.Point2D();AY=new f.Point2D();AS=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AV);this.GetMinMaxPoint(AS,AV,Ad,AY);this.MoveLabel(AV,Ac,AY,Ad,AS);}if(AZ!==null){Ad=new f.Point2D();AY=new f.Point2D();AS=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y2,AV);this.GetMinMaxPoint(AS,AV,Ad,AY);this.MoveLabel(AV,AZ,AY,Ad,AS);}}}else{for(AV=0;AV<Ae;++AV){AT=this.CreateTotalLabel(F.VA_Y1,AV,Aa);if(AT!==null){Ad=new f.Point2D();AY=new f.Point2D();AS=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AV);this.GetMinMaxPoint(AS,AV,Ad,AY);this.MoveLabel(AV,AT,AY,Ad,AS);}}}}},CreateMarker:function AK(AQ,AR,AS,AV){var AP=this.mChartContextPtr,AT,AY,AU;AT=new f.TripleId({ObjectId:AC.DssGraphDataMarker,SeriesId:this.mSeriesInfo[AQ].mSeriesId,GroupId:AR});if(AP.mIsTimeSeriesChart){var AX=this.GetData(AQ,AR-1);var AW=this.GetData(AQ,AR+1);if((AR>0&&AX!==null)||(AR<this.mGroupCount-1&&AW!==null)){return ;}AY=4;AU=new f.MarkerObject({TripleId:AT,GraphObjectManager:this,MarkerPosition:AV,MarkerShape:AD.DssGraphMarkerShapeCircle,IsIsometric:true,MarkerSize:AY,GraphCollectionObject:AS,IsDialogSize:false});AS.AddGraphObject(AU);this.mGraphObjectList.push(AU);}else{if(AP.mIsGraphMatrix){this.CreateOneDataMarker(AQ,AR,AS,AV,AR);}else{}}},GetMinMaxPoint:function AN(AU,AT,AR,AS){var AQ,AV,AP;AQ=new f.Point2D();if(!this.GetFinalLinePoint(AU,AT,AQ,false)){return ;}AV=this.mChartContextPtr.dialogSizeToPixelSize(this.mLineSeriesOptions[AU].mMarkerSize);AP=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AU].mValueAxis].IsReverseOrder();if(this.mIsVertical){if(AP){AR.Reset(AQ.x,AQ.y-AV);AS.Reset(AQ.x,AQ.y+AV);}else{AR.Reset(AQ.x,AQ.y+AV);AS.Reset(AQ.x,AQ.y-AV);}}else{if(AP){AR.Reset(AQ.x+AV,AQ.y);AS.Reset(AQ.x-AV,AQ.y);}else{AR.Reset(AQ.x-AV,AQ.y);AS.Reset(AQ.x+AV,AQ.y);}}},GetPointPair:function o(AS,AQ,AR,AP){return this.GetLinePoint(AS,AQ-1,AR)&&this.GetLinePoint(AS,AQ,AP);},GenerateOrderedDepthLine:function q(AR,AP,AQ){},GenerateInterpolationFrame:function X(AQ){var AT,AR,AP,AS;this.mProgress=AQ;AT=this.mGraphObjectList.length;AP=this.mGraphObjectList.concat();this.mGraphObjectList.splice(0,AT);for(AR=0;AR<AT;++AR){AS=AP[AR];if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AS.SetAnimationEnable(true);}AS.SetProgress(AQ);this.GenerateFrameInOnePlot(AS,AQ<0.5);}this.mGraphObjectList=AP.concat();this._super(AQ);},GenerateFrameInOnePlot:function j(AY,AZ){var AR=this.mChartContextPtr,AW=AR.GetGraphMatrixContext(),AQ=this.mpABLPlotContext,AU=AQ.mABLOptions,AT,Ad,Ab,AV,AP,Aa=this.mGroupCount;if(this.mIsByValueAxis){var AX=F.VA_BOTH;if(AU.mLayout===Q.LO_STACKED){if(AU.mCurvedLines){this.GenerateByValueAxisAndGroup(AX,-1);}else{Ad=this.IsReverseGroupOrder();for(AT=1;AT<this.mGroupCount;++AT){Ab=Ad?Aa-AT:AT;this.GenerateByValueAxisAndGroup(AX,Ab);}}}else{var Ac=this.mSeriesInfo,AS=this.mSeriesInfo.length;for(AT=0;AT<AS;++AT){if(Ac[AT].mValueAxis===AX){this.GenerateMapAndListForSeries(AT);}}}}else{if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){AV=this.mSeriesInfo.length;for(AT=0;AT<AV;++AT){if(AU.mShowLines){this.GenerateMapAndListForSeries(AT);}if(!(AR.mIsGraphMatrix&&AW.isPieOrRingShape())){this.CreateSeriesMarkers(AT);this.mHasCreatedMarkers=true;}}}else{if(AU.mShowLines){if(AU.mCurvedLines){this.GenerateByValueAxisAndGroup(F.VA_Y2,-1);this.GenerateByValueAxisAndGroup(F.VA_Y1,-1);}else{Ad=this.IsReverseGroupOrder();for(AT=1;AT<Aa;++AT){Ab=Ad?Aa-AT:AT;this.GenerateByValueAxisAndGroup(F.VA_Y2,Ab);}for(AT=1;AT<Aa;++AT){Ab=Ad?Aa-AT:AT;this.GenerateByValueAxisAndGroup(F.VA_Y1,Ab);}}}}}if(AR.mIsGraphMatrix===false){if(!this.mHasCreatedMarkers){AV=this.mSeriesInfo.length;for(AT=0;AT<AV;++AT){this.CreateSeriesMarkers(AT);}}}AP=this.mGraphObjectList.length;for(AT=0;AT<AP;++AT){AY.AddGraphObject(this.mGraphObjectList[AT],AZ);}this.mGraphObjectList.splice(0,this.mGraphObjectList.length);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","MarkerObject","SeriesRenderer","Plot","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumGraphMatrixElementSizeMode","EnumGraphMatrixDataLabelPosition","EnumFontRotation","EnumAnchorPoint","EnumImageUsage","EnumGenericDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphProperty","EnumDSSGraphObject");var AD=mstrmojo.chart,AA=AD.ChartConstants,I=AD.enums,h=I.EnumCollectionType,AH=I.EnumLayout,m=I.EnumOrientation,j=I.EnumValueAxis,AJ=I.EnumAnchorPoint,B=I.EnumFillType,AV=I.EnumGenericDirection,i=I.EnumImageUsage,r=I.EnumGraphMatrixElementSizeMode,W=I.EnumGraphMatrixDataLabelPosition,D=I.EnumFontRotation,z=mstrmojo.chart.model,l=z.enums,AQ=l.EnumDSSGraphMarkerShape,N=l.EnumShapeType,AO=l.EnumDSSGraphObject,A=AD.common.Utility;var AL=0,p=1,v=2,R=3;var x=new AD.Rect2D(),O=new AD.Rect2D();function L(){var AZ=this.mSeriesInfo,AX=0,Aa=0,AY,AW=AZ.length;for(AY=0;AY<AW;++AY){if(AZ[AY].mValueAxis===j.VA_Y1){AX=1;}if(AZ[AY].mValueAxis===j.VA_Y2){Aa=1;}}return AX+Aa;}function e(AX){var AW=0;switch(this.mBarRenderType){case p:AW=AX.seriesInfoID;break;case v:if(L.call(this)>1&&!this.mpABLPlotContext.mABLOptions.mSplitDualAxes){AW=this.mSeriesInfo[AX.seriesInfoID].mValueAxis;}break;}return AW;}function S(Aa){var AX=this.mChartContextPtr.GetGraphMatrixContext(),Ab=this.mDatasetPtr,AZ=this.mSeriesInfo,Ac,AY,AW;if(AX&&this.mHasSizeBy){Ac=Ab.GetSizeByData(AZ[Aa.seriesInfoID].mSeriesId,Aa.groupID);Ac=Ac||0;AY=AX.GetScaledSize(Ac,this.mBarWidth,N._BAR);AY=Math.max(AY,1);if(this.mBarRenderType===v){AW=AY;if(AW%2===0){AW++;}return AW;}return AY;}return this.mBarWidth;}function P(Af,Ai){var AX,Aj,Ac,Ad,Ae,AY,Ag,AW,Ah,AZ,Ab=this.mpABLPlotContext,Aa=false;if(Af.useFloat!==undefined){Aa=Af.useFloat;}Ai=Ai||this.mBarWidth;Ad=Ab.mCategoryAxisPtr;AY=Af.groupID;if(Ab.takeGroupCenter){Ah=this.mDatasetPtr.GetClusterDataGroup();Ag=Ad.getFloatGroupMiddlePos(AY);if(Ah<=1){Ag=Ag-0.5*Ai;}else{AZ=Af.seriesInfoID%Ah;Ag-=0.5*Ah*Ai;Ag+=AZ*Ai;}}else{Ae=e.call(this,Af);Ag=Ad.getGroupStartPos(AY)+this.mSpaceBetweenGroup/2+(Ai+this.mSpaceBetweenRiser)*Ae;}AX=Math.floor(Ag+0.5);if(this.mChartContextPtr.mIsGraphMatrix){Aj=Ai;if(this.mHasSizeBy){if(!this.mUseDepth){AW=S.call(this,Af);Ac=Aj-AW;Ag+=Ac*0.5;AX=Math.round(Ag);Aj=Math.round(AW);}}else{Aj=(Aa?(Ag+Ai):Math.round(Ag+Ai))-AX;}}else{Aj=(Aa?(Ag+Ai):Math.round(Ag+Ai))-AX;}if(Aj===0&&Ai>=0.5){Aj=1;}return{Start:AX,Size:Aj};}function H(AX){var AW,AY;if(this.mBarOptions.mColorBySeries){if(AX<0||AX>=this.mSeriesInfo.length){return true;}}else{AY=this.mDatasetPtr.GetGroupCount();if(AX<0||AX>=AY){return true;}}AW=(this.mAddedLegendMarkerSet[AX]!==undefined);if(!AW){this.mAddedLegendMarkerSet[AX]=true;}return AW;}function n(Ac,AY){var Ab,Aa,AX,AZ,AW,Ad;Ad=AY.length;for(Ab=0;Ab<(Ad-1);++Ab){Aa=AY[Ab].GetBoundingRect();AX=AY[Ab+1].GetBoundingRect();AZ=this.mpABLPlotContext.mValueAxis[Ac].IsReverseOrder()?1:-1;if(Aa.HasIntersection(AX)){AW=new AD.Point2D({x:Math.floor(AX.x+AX.height/2),y:Aa.y});if(AZ===1){AW.y+=Aa.height;}AW.y+=Math.floor(AZ*AX.height/2);AY[Ab+1].MoveTo(AW.x,AW.y,AJ.CENTER);}}}function AK(Ad,AW,Ac){var Ae,Ab,AX,Aa,AZ,AY=this.mBarRenderType,Af;Ae=this.createRiserLabel(Ad.seriesInfoID,Ad.groupID,Ac);if(Ae===null){return null;}if(AY===v||AY===R){Ae.mOnMarker=true;}Ab=this.mIsVertical?AW.GetTopMiddle():AW.GetRightMiddle();AX=this.mIsVertical?AW.GetBottomMiddle():AW.GetLeftMiddle();Aa=false;AZ=this.GetData(Ad.seriesInfoID,Ad.groupID);if(AZ!==null&&AZ!==undefined){Af=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[Ad.seriesInfoID].mValueAxis];Aa=(AZ<0)^Af.IsReverseOrder();}if(Aa){Ab.swapPoints(AX);}this.MoveLabel(Ad.groupID,Ae,Ab,AX,Ad.seriesInfoID);return Ae;}function T(AY,Aa){var AZ=this.mSeriesInfo,AX,AW=AZ.length;for(AX=0;AX<AW;++AX){if(Aa===j.VA_BOTH||AZ[AX].mValueAxis===Aa){AY.push(AX);}}}function AE(){var AX=this.mpABLPlotContext.mABLOptions;var AY=j.VA_Y1,AW=j.VA_Y2;if(AX.mUseDepth&&L.call(this)>1&&AX.mDualAxes&&!AX.mSplitDualAxes){if((AX.mOrientation===m.OR_VERTICAL&&AX.mDepthDirection>=90&&AX.mDepthDirection<270)||(AX.mOrientation===m.OR_HORIZONTAL&&AX.mDepthDirection>=0&&AX.mDepthDirection<180)){AY=j.VA_Y2;AW=j.VA_Y1;}}return{First:AY,Second:AW};}function X(AZ,Ab){if(Ab.length===0){return Ab;}var AX,AW=[],AY,Aa;for(AX in Ab){if(Ab.hasOwnProperty(AX)){Aa=Ab[AX];AY=this.mDatasetPtr.GetData(Aa,AZ);if(AY!==null&&AY<0){AW.unshift(Aa);}else{AW.push(Aa);}}}return AW;}function M(Ad,AX,Ac){var Ab=this.mpABLPlotContext.mABLOptions,AY=Ab.mDepthDirection,AW=Ab.mOrientation,AZ=this.mBarRenderType,Aa=false;switch(this.mBarRenderType){case AL:Aa=false;break;case p:if(Ab.mUseDepth&&((AW===m.OR_VERTICAL&&AY>=90&&AY<270)||(AW===m.OR_HORIZONTAL&&AY>0&&AY<180))){Aa=true;}break;case v:case R:if((Ab.mUseDepth)&&((AW===m.OR_VERTICAL&&AY>=180&&AY<360)||(AW===m.OR_HORIZONTAL&&AY>=90&&AY<270))){Aa=true;}break;}AX.splice(0,AX.length);T.call(this,AX,Ac);if(AX.length===0){return ;}if(AZ===v||(AZ===R&&Ac!==j.VA_BOTH)){AX=X.call(this,Ad,AX);var Ae=this.mpABLPlotContext.mValueAxis[Ac];if(Ae.IsReverseOrder()){Aa=!Aa;}}if(Aa&&AX.length>0){AX.reverse();}}function U(){var AZ=this.mpABLPlotContext,AY=this.mBarOptions;if(this.mBarColumns===-1){this.mBarColumns=1;switch(this.mBarRenderType){case p:this.mBarColumns=this.mSeriesInfo.length;break;case v:if(L.call(this)>1&&!AZ.mABLOptions.mSplitDualAxes){this.mBarColumns=2;}break;}var AW=this.mGroupSize,AX=this.evalBarStyleUnitWidth(AW,this.mBarColumns,AY.mGapWidth);this.mBarWidth=AX.unitWidth;this.mSpaceBetweenRiser=AX.riserGap;this.mSpaceBetweenGroup=AX.groupGap;}}function k(){switch(this.mpABLPlotContext.mABLOptions.mLayout){case AH.LO_ABSOLUTE:if(this.mChartContextPtr.GetGraphMatrixContext().isCombinationChart()){return p;}return AL;case AH.LO_CLUSTER:return p;case AH.LO_STACKED:return v;case AH.LO_PERCENT:return R;default:return p;}}function AM(AZ,AX){var AW,AY;AW=this.mDatasetPtr.GetColorByData(AZ.mSeriesId,AZ.mGroupId);if(AW){AY=new AD.FormatFill();AY.mFillType=B.FT_SIMPLE;AY.mAlpha=255*0.7;AY.mSimpleColor=AW;AX.SetFormatFill(AY);}}function J(){if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function E(){}function AI(Ab,AW,Ai){var AZ,Ae,Aa,Aj,AX=this.mpABLPlot,AY=this.mpABLPlotContext,Ag=this.mSeriesInfo[Ab.seriesInfoID].mValueAxis,Ah=AY.mValueAxis[Ag],Ad=Ah.mOptions.mDrawFromZero,Af=Ah.GetAxisOriginValue();Ah.mOptions.mDrawFromZero=(Af===null||Af===0);AZ=this.hPrepareData(Ab);if(A.isValidNumber(AZ)===false){return ;}Ae=this.hPrepareRect(Ab,AZ);Aj=Ae.Rect;Aa=Ae.AboveBase;if(!this.hUpdateBarRect(Ab,Aj,Aa,AZ)){Ah.mOptions.mDrawFromZero=Ad;return ;}if(Aj.width<=0||Aj.height<=0){Ah.mOptions.mDrawFromZero=Ad;return ;}if(!Ai){var Ac=this.hPrepareRectangleObject(Ab,Aj,Aa);if(Ac){this.hPostProcessOneBar(Ab,Ac);++AX.DPCount;if(AX.seriesDPCount[Ab.seriesInfoID]===undefined||AX.seriesDPCount[Ab.seriesInfoID]===null){AX.seriesDPCount[Ab.seriesInfoID]=1;}else{++(AX.seriesDPCount[Ab.seriesInfoID]);}}}Ah.mOptions.mDrawFromZero=Ad;}function AF(Aa,AX,Ac){var AY,Ab,AW,AZ=[];if((Ac===j.VA_BOTH&&this.mBarRenderType===v)||this.mBarRenderType===R){AY=AE.call(this);Ab=AY.First;AW=AY.Second;M.call(this,Aa,AX,Ab);M.call(this,Aa,AZ,AW);if(AZ.length>0){AX=AX.concat(AZ);}}else{M.call(this,Aa,AX,Ac);}return AX;}function g(Af,Ah){var Ag=this.mChartContextPtr,Ae=1500,AW=-1,AX=-1;if(this.mBarRenderType===p&&!this.mDatasetPtr.ShouldTakeGroupCenter()){if(Ah>=Ae&&Ag.mPartialRendering){var AZ,Ac,Ai=this.mBarWidth,Ab=Ag.mRenderingWindow,Ad=Ag.IsVertical(),AY=this.mpABLPlotContext,Aa=AY.mCategoryAxisPtr;if(Ad){AZ=Ab.x;Ac=AZ+Ab.width;}else{AZ=Ab.y;Ac=AZ+Ab.height;}AW=AZ-Aa.getGroupStartPos(Af)-this.mSpaceBetweenGroup/2;AW=Math.round(AW/(Ai+this.mSpaceBetweenRiser))-1;AW=Math.max(AW,0);AX=Ac-Aa.getGroupStartPos(Af)-this.mSpaceBetweenGroup/2;AX=Math.round(AX/(Ai+this.mSpaceBetweenRiser))+1;AX=Math.min(AX,Ah-1);return[AW,AX];}}return[];}function Y(Ad){var AX=this.mpABLPlotContext,Aj=this.IsReverseGroupOrder(),Ai,Af,Ae=[],AW=[],AY,AZ,Ab=[],Ag=[],Ac,Aa,Ah;Ai=this.mDatasetPtr.GetGroupCount();for(Ah=0;Ah<Ai;++Ah){Af=Ah;if(Aj){Af=Ai-1-Af;}Ae=AF.call(this,Af,Ae,Ad);AY=Ae.length;Aa=g.call(this,Af,AY);for(AZ=0;AZ<AY;++AZ){if(Aa.length===2&&(AZ<Aa[0]||AZ>Aa[1])){continue;}Ac={groupID:Af,seriesInfoID:Ae[AZ]};AI.call(this,Ac,AW);}if(this.mBarRenderType===p){AY=AW.length;for(AZ=0;AZ<AY;++AZ){if(AX.mSeriesOptions[AW[AZ].first].mValueAxis===j.VA_Y1){Ab.push(AW[AZ].second);}else{Ag.push(AW[AZ].second);}}if(Ab.length!==0){n.call(this,j.VA_Y1,Ab);}if(Ag.length!==0){n.call(this,j.VA_Y2,Ag);}}AW.splice(0,AW.length);}}function AS(AX){var Aa=this.mChartContextPtr;if(Aa.mIsGraphMatrix&&this.mHasColorBy){return null;}if(this.mGroupCount<2){return null;}var AW,AY=this.mDatasetPtr;AW=new AD.TripleId({ObjectId:AO.DssGraphRiser});if(this.mBarOptions.mColorBySeries){AW.mSeriesId=this.mSeriesInfo[AX.seriesInfoID].mSeriesId;}else{AW.mSeriesId=AX.groupID;}var AZ=this.GetGraphObject(AW);if(AZ===undefined){if(Aa.mIsGraphMatrix){if(AY.findCell(true,AW.mSeriesId,1)!==-1){AZ=null;return AZ;}}if(AZ===undefined){AZ=new AD.GraphCollectionObject({TripleId:AW,GraphObjectManager:this,CollectionType:(this.mIsVertical?h.CT_VERTICAL_BAR:h.CT_HORIZONTAL_BAR)});}this.AddToMap(AZ);}return this.GetGraphObject(AW);}function V(AX){if(this.mChartContextPtr.mIsGraphMatrix){var AW=this.mpABLPlotContext.mValueAxis[AX];if(AW){return AW.mOptions.mUseCustomMinMax;}return false;}return false;}function b(AW,AX){if(AW.x<AX||AW.x+AW.width+AX>this.mChartContextPtr.mGraphWidth){return false;}return(!(AW.y<AX||AW.y+AW.height+AX>this.mChartContextPtr.mGraphHeight));}function f(AW,AX,AY){if(AW.x+AW.width+AY<=AX.x||AW.x>=AX.x+AX.width+AY){return true;}return(AW.y+AW.height+AY<=AX.y||AW.y>=AX.y+AX.height+AY);}function AU(Ad,Ah,Af,Ac){var Ae,Aa=0,AZ=0,AY,Ag,AX=this.mChartContextPtr,Ab=AX.GetGraphMatrixContext(),AW=5;if(AX.mIsGraphMatrix){AW=Ab.getPadding(AA.kDataLabel);}if(Ac){Ah.GetFormatFont().mFontRotation=D.FR_90;}else{Ah.GetFormatFont().mFontRotation=D.FR_NORMAL;}Ae=Ah.GetBoundingRect();switch(Af){case W._BOTTOM:Aa=0;AZ=(Ad.height+Ae.height)/2+AW;break;case W._TOP:Aa=0;AZ=-1*((Ad.height+Ae.height)/2+AW);break;case W._LEFT:Aa=-1*((Ad.width+Ae.width)/2+AW);AZ=0;break;case W._RIGHT:Aa=(Ad.width+Ae.width)/2+AW;AZ=0;break;case W._CENTER:Aa=0;AZ=0;break;}AY=Ad.GetCenter().x+Ad.width%2+Aa;Ag=Ad.GetCenter().y+Ad.height%2+AZ;Ah.MoveTo(AY,Ag,AJ.CENTER);}function Q(Ah,Af,Ae,Ad,Aa,Ac){var AY=this.mChartContextPtr,Ab=AY.GetGraphMatrixContext(),AX,Ag=this.mpABLPlotContext.mABLOptions,AZ=Ag.mLayout,AW=Ag.mOrientation;if(Aa===null||Aa===undefined){Aa=false;}if(Ac===null||Ac===undefined){Ac=false;}if(Aa){AX=Ac;}else{AX=Ab.mIsNeedRotateDataLabel;}if(AW===m.OR_VERTICAL){if(AZ===AH.LO_ABSOLUTE||AZ===AH.LO_CLUSTER){if(Ae-Ad<0){AU.call(this,Ah,Af,W._BOTTOM,AX);}else{AU.call(this,Ah,Af,W._TOP,AX);}}else{if(this.mSeriesInfo.length===1){if(Ae-Ad<0){AU.call(this,Ah,Af,W._BOTTOM,AX);}else{AU.call(this,Ah,Af,W._TOP,AX);}}else{AU.call(this,Ah,Af,W._CENTER,AX);}}}else{if(AZ===AH.LO_ABSOLUTE||AZ===AH.LO_CLUSTER){if(Ae-Ad<0){AU.call(this,Ah,Af,W._LEFT,AX);}else{AU.call(this,Ah,Af,W._RIGHT,AX);}}else{if(this.mSeriesInfo.length===1){if(Ae-Ad<0){AU.call(this,Ah,Af,W._LEFT,AX);}else{AU.call(this,Ah,Af,W._RIGHT,AX);}}else{AU.call(this,Ah,Af,W._CENTER,AX);}}}}function o(Ak,Ad,Ae,Af,AW,Ag){var AY=this.mChartContextPtr,Ab=this.mDatasetPtr,Aj=AY.mIsGraphMatrix,Aa={},Ac=new AD.TripleId({ObjectId:AO.DssGraphDataText}),Ai=-3,Ah,AZ;if(Aj){var AX=Ab.showSeriesDatalabel(Ak.mSeriesId);if(AX){Aa.SeriesId=Ak.mSeriesId;Aa.GroupId=Ad.groupID;Aa.SeriesInfo=Ad.seriesInfoID;Aa.HostMarkerBound=Af;Ah=this.mSGMapLabel[Ai];if(Ah===null||Ah===undefined){this.mSGMapLabel[Ai]=new AD.GraphCollectionObject({TripleId:Ac,GraphObjectManager:this,CollectionType:h.CT_TEXT});}var Al=false;if(Al&&this.mBarRenderType===p){AZ=this.CreateOneDataLabel(Ad.groupID,this.mSeriesInfo[Ad.seriesInfoID].mSeriesId,AW,this.mSGMapLabel[Ai]);}else{AZ=this.CreateOneDataLabel(this.mSeriesInfo[Ad.seriesInfoID].mSeriesId,Ad.groupID,AW,this.mSGMapLabel[Ai]);}if(AZ!==null&&AZ!==undefined){Aa.Label=AZ;AZ.mIsShown=false;Q.call(this,Af,AZ,AW,Ag);this.mDataLabels.push(Aa);this.AddToMapAndList(AZ);}}}}function AN(Ag,AX,Ab,AZ,Aj){var Am,Ah,Ae,Ad,Ak,AY,Aa,Ai,Af,Al,AW,An,Ac;Am=this.hPrepareData(Ag);if(Am===null||Am===undefined){return ;}Ah=this.hPrepareRect(Ag,Am);Ak=new AD.Rect2D({Rect2D:Ah.Rect});Ae=Ah.AboveBase;Ad=Ah.AxisOriginValue;if(Ak.width<0||Ak.height<0){return ;}AY=new AD.Rect2D();AY.x=Ak.x;AY.y=Ak.y;AY.width=Ak.width;AY.height=Ak.height;if(!this.hUpdateBarRect(Ag,Ak,Ae,Am)){return ;}AX.push(Ak);if(Aj){Aa=false;Ai=new AD.TripleId({ObjectId:AO.DssGraphDataText});Af=new AD.GraphCollectionObject({TripleId:Ai,GraphObjectManager:this,CollectionType:h.CT_TEXT});if(Aa&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===p){Al=this.CreateOneDataLabel(Ag.groupID,this.mSeriesInfo[Ag.seriesInfoID].mSeriesId,Am,Af);}else{Al=this.CreateOneDataLabel(this.mSeriesInfo[Ag.seriesInfoID].mSeriesId,Ag.groupID,Am,Af);}if(Al!==null&&Al!==undefined){Q.call(this,Ak,Al,Am,Ad,true,AZ);AW=Al.GetBoundingRect();Ab.push(AW);}}else{Ai=new AD.TripleId({ObjectId:AO.DssGraphDataText});An=this.mSeriesInfo[Ag.seriesInfoID].mSeriesId;Ai.mSeriesId=An;Ac=this.mSGMapLabel[An];if(Ac===null||Ac===undefined){this.mSGMapLabel[An]=new AD.GraphCollectionObject({TripleId:Ai,GraphObjectManager:this,CollectionType:h.CT_TEXT});}o.call(this,Ai,Ag,Ak,AY,Am,Ad);}}function AB(Aj,Ag,Ah,AW){var Ac=this.IsReverseGroupOrder(),Al,Ad=this.mpABLPlotContext.mCategoryAxisPtr,AZ=false,Ak,Ai,AX=[],AY,Ab,Af,Ae,Aa;Aj.splice(0,Aj.length);Ag.splice(0,Ag.length);if(this.mChartContextPtr.mIsGraphMatrix){Al=Ad.mGroupCount;}else{Al=this.mDatasetPtr.GetGroupCount();}for(Ak=0;Ak<Al;++Ak){Ai=Ak;if(Ac){Ai=Al-1-Ai;}if(AZ&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===p){AY=this.mDatasetPtr.GetGroupCount();for(Ab=0;Ab<AY;++Ab){AX.push(Ab);}}else{AX=AF.call(this,Ai,AX,j.VA_BOTH);}Aa=AX.length;for(Af=0;Af<Aa;++Af){Ae={};Ae.groupID=Ai;Ae.seriesInfoID=AX[Af];AN.call(this,Ae,Aj,Ag,Ah,AW);}}}function u(Ah){var Ai=[],Ag=[],Aj=[],Ae=0,Ac,Ab,Aa,AX,Ad,AY,AZ=this.mChartContextPtr,Af=AZ.GetGraphMatrixContext(),AW=5;if(AZ.mIsGraphMatrix){AW=Af.getPadding(AA.kDataLabel);}AB.call(this,Ai,Ag,Ah,true);for(Ac=0;Ac<Ag.length;++Ac){AX=b.call(this,Ag[Ac],AW);if(!AX){continue;}Ad=true;for(Ab=0;Ab<Ai.length;++Ab){if(Ac===Ab){continue;}AY=f.call(this,Ag[Ac],Ai[Ab],AW);if(!AY){Ad=false;break;}}if(!Ad){continue;}for(Aa=0;Aa<Aj.length;++Aa){AY=f.call(this,Ag[Ac],Aj[Aa],AW);if(!AY){Ad=false;break;}}if(Ad){++Ae;Aj.push(Ag[Ac]);}}return Ae;}function s(){var AW,AX;if(this.mSeriesInfo.length===0){return false;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();U.call(this);AW=u.call(this,false);AX=u.call(this,true);return(AX>AW);}function AT(AW){var AZ=this.mChartContextPtr,AY=AZ.mIsGraphMatrix,AX;if(AY&&AZ.mIsUniformAxisMode){AX=AZ.getUniformAxisContext();if(AW.x<AX.mDataAreaLeftMargin||AW.x+AW.width>AZ.mGraphWidth-AX.mDataAreaRightMargin){return false;}if(AW.y<AX.mDataAreaTopMargin||AW.y+AW.height>AZ.mGraphHeight-AX.mDataAreaBottomMargin){return false;}}return true;}function AG(Ae){var Ak,Aj,Ai,Ah,AZ=this.mChartContextPtr,Al=AZ.GetGraphMatrixContext(),Ao,AW,AX=this.mDataLabels,Am,Ad=AZ.allowOverlapBetweenDatalabels(),AY,Af,Aa,Ac,Ag=new AD.Rect2D({x:0,y:0,width:AZ.mGraphWidth,height:AZ.mGraphHeight}),An=this.mpABLPlot.dataLabelManager,Ab=5;if(AZ.mIsGraphMatrix){Ab=Al.getPadding(AA.kDataLabel);}if(An===null||An===undefined){An=this.mpABLPlot.dataLabelManager=new AD.DataLabelManager({DataArea:Ag});An.ChartContext=AZ;}Am=AX.length;for(Ak=0;Ak<Am;++Ak){for(Ah=0;Ah<4;++Ah){if(Al.mMarkerShape===AQ.DssGraphMarkerShapeGMTick){AW=Ah;AU.call(this,AX[Ak].HostMarkerBound,AX[Ak].Label,AW,false);}else{if(Ah>0){break;}}Ao=AX[Ak].Label.GetBoundingRect();Af=Ad||b.call(this,Ao,Ab);if(!Af){continue;}Aa=true;for(Aj=0;Aj<Am;++Aj){if(Aj===Ak){continue;}Ac=Ad||f.call(this,Ao,AX[Aj].HostMarkerBound,Ab);if(!Ac){Aa=false;break;}}if(!Aa){continue;}AY=Ae.length;for(Ai=0;Ai<AY;++Ai){Ac=Ad||f.call(this,Ao,Ae[Ai].GetBoundingRect(),Ab);if(!Ac){Aa=false;break;}}if(V.call(this,this.mSeriesInfo[AX[Ak].SeriesInfo].mValueAxis)){if(!AT.call(this,Ao)){Aa=false;}}if(Aa){if(!Ad){An.UpdateMatrixDataLabel(Ao);}Ae.push(AX[Ak].Label);AX[Ak].IsDisplayed=true;AX[Ak].Label.mIsShown=true;if(Al.mMarkerShape===AQ.DssGraphMarkerShapeGMTick){break;}}}}}mstrmojo.chart.BarSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.BarSeriesRenderer",mSGMapLabel:[],mpSeriesLineInfo:null,mBarRenderType:AL,mBarWidth:0,mGroupSize:0,mSpaceBetweenRiser:0,mSpaceBetweenGroup:0,mBarColumns:-1,mBarOptions:null,mAddedLegendMarkerSet:null,mDataLabels:null,init:function q(AW){this._super(AW);this.mSGMapLabel=[];this.mAddedLegendMarkerSet=[];this.mDataLabels=[];this.mBarOptions={mOverlap:0,mGapWidth:40,mRiserShape:0,mShowErrorBar:false,mHasMiddleValue:false,mMiddleValueSize:50,mShowSeriesLines:false,mColorBySeries:true};this.LoadProperties();},SetDeviceDataArea:function F(AW){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AD.Rect2D({Rect2D:AW});}else{this.mDeviceDataArea.ResetRect(AW);}}this.mBarRenderType=k.call(this);},AddTextToMapAndList:function y(AW,AX){var AZ,AY,Ab,Aa,Ac,Ad;Ab=this.mSGMapLabel.length;for(AY=0;AY<Ab;++AY){Ac=this.mSGMapLabel[AY];if(Ac!==null&&Ac!==undefined){Aa=Ac.GetCollectionSize();for(AZ=0;AZ<Aa;++AZ){AX.push(Ac.GetObjectByIndex(AZ));}Ad=Ac.mTripleId;AW.push(Ad,Ac);}}this.mSGMapLabel.splice(0,this.mSGMapLabel.length);this._super(AW,AX);},CreateTrendLine:function Z(AY,AX,AW){this._super(AY,AX,AW);},GenerateMapAndList:function a(AW){var AX=this.mChartContextPtr;if(AX.mImageUsage!=i.OBJECT_CLIP_COMPUTATION){return this.GenerateByValueAxis(j.VA_BOTH,AW);}},GenerateByValueAxis:function G(Aa,AY){var AZ=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();U.call(this);Y.call(this,Aa);if(AZ.mIsGraphMatrix){if(AZ.mImageUsage===i.GENERAL){if(this.mDatasetPtr.showDatalabels()){var AX=[],AW=[];AB.call(this,AX,AW,false,false);AG.call(this,AY);}this.GenerateTrendLine();this.GenerateRefLine();}}this.populateRenderSequence();},LoadProperties:function w(){var Aa=this.mChartContextPtr,AY=this.mBarOptions,AZ,AW=Aa.GetGraphMatrixContext(),AX=AW.mElementsInfo;if(Aa.mIsGraphMatrix){AY.mColorBySeries=!this.mChartContextPtr.isLegendByGroup();AY.mGapWidth=10;if(AX.Max.Mode===r._MANUAL){AZ=AX.Max.Size*100;if(AZ<1){AZ=1;}if(AZ>100){AZ=99;}AY.mGapWidth=100-AZ;}}if(Aa.mImageUsage!==0){return ;}},ShouldRotateDataLabel:function t(){var AX=this.mChartContextPtr.GetGraphMatrixContext(),AY=this.mpABLPlotContext.mABLOptions,AW=AY.mOrientation,AZ=AY.mLayout;if(AX.mMarkerShape===AQ.DssGraphMarkerShapeGMTick){return false;}if(AW===m.OR_HORIZONTAL){return false;}if(AX.isCombinationChart()&&(AZ===AH.LO_ABSOLUTE)){AZ=AH.LO_CLUSTER;}if(AZ===AH.LO_ABSOLUTE||this.mSeriesInfo.length===1){return s.call(this);}if(AZ===AH.LO_CLUSTER){return true;}return false;},GetSeriesOrderByType:function d(AX,AW,AY){return AF.call(this,AX,AW,AY);},GetRiserStartPosAndSize:function c(AX,AW){return P.call(this,AX,AW);},hUpdateBarRect:function AP(Af,Ag,Ad,AX){var AZ=this.mChartContextPtr,Ae,Aj,Ab,AW,Ai=this.mpABLPlotContext,Ak=Ai.mABLOptions,Aa=this.mDatasetPtr,Ah=this.mSeriesInfo,AY=Ak.mOrientation,Ac=Ak.mLayout;if(!AZ.mIsGraphMatrix){return true;}if(AX!==0&&(this.mBarRenderType===v||this.mBarRenderType===R)){AX=Aa.GetData(Ah[Af.seriesInfoID].mSeriesId,Af.groupID,0);}if(AX!==0){if(AY===m.OR_VERTICAL&&Ag.height===0){Ag.height=1;}if(AY===m.OR_HORIZONTAL&&Ag.width===0){Ag.width=1;}}if(Ag.width*Ag.height===0){return false;}Ae=this.mSeriesInfo[Af.seriesInfoID].mValueAxis;Aj=Ai.mValueAxis[Ae];if(Aj===null){return false;}x.ResetRect(Ag);Ab=Aj.GetBasePosition(true);AW=Aj.GetBaseValue(true);if(Ab===null||AW===null){return false;}if(AY===m.OR_VERTICAL){if(Aj.isBaseLineQualified()){if(x.y===Ab){if(Ad){--(x.y);--(x.y);}else{}if(x.height>1&&Ac===AH.LO_STACKED){++(x.y);--(x.height);}}else{if(x.y+x.height===Ab){if(x.height>1){x.height--;}else{x.y--;}}}}else{if(x.y===Ab){if(AX>=AW){--(x.y);--(x.y);}else{if(x.height>1){x.y++;x.height--;}}}if(x.y+x.height===Ab&&x.height===1){if(AX>=AW){--(x.y);++(x.height);}}}}if(AY===m.OR_HORIZONTAL){if(Aj.isBaseLineQualified()){if(x.x===Ab){if(Ad){++(x.x);}else{--(x.x);--(x.x);}if(x.width>1&&Ac===AH.LO_STACKED){--(x.width);}}else{if(x.x+x.width===Ab){if(x.width>1){}else{x.x--;}}}}else{if(x.x===Ab){if(Ad&&AX>AW){if(x.x>Ab){x.width+=x.x;x.x=Ab;}}}if(x.x+x.width===Ab){--(x.x);++(x.width);}}}Ag.copy(x);return true;},hPrepareData:function K(AX){var AY,Aa=this.mChartContextPtr,AW;AY=this.GetData(AX.seriesInfoID,AX.groupID);if(AY===null){if(Aa.mIsGraphMatrix===false){AW=AS.call(this,AX);if(AW){if(this.mBarOptions.mColorBySeries&&!H.call(this,AX.seriesInfoID)){this.AddLegendMarkerToCollection(AX.seriesInfoID,AW);}}}}else{var AZ={mSeriesId:this.mSeriesInfo[AX.seriesInfoID].mSeriesId,mGroupId:AX.groupID};if(Aa.checkColorByAndSizeByValue(AZ,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){AY=null;}}return AY;},hPrepareRect:function C(Ag,Ap,Af){var AY=this.mpABLPlotContext,Ae=AY.mABLOptions,Aa=this.mSeriesInfo[Ag.seriesInfoID].mValueAxis,Ak=AY.mValueAxis[Aa];var Ad=Ak.GetAxisOriginValue(),An=Ak.GetBaseValue(true),AZ=Ap>An,Am=P.call(this,Ag,Af),AX=Am.Start,Ah=Am.Size,AW=Ak.GetBasePosition(true),Al=Ak.GetPositionByValue(Ap);O.Reset(0,0,0,0);if(Al===null){O.width=O.height=-1;return{Rect:O,AboveBase:AZ};}if(this.mBarRenderType===v||this.mBarRenderType===R){var Ac,Aq=false,Ai,Aj,Ab;if(Ad===null||Ad===0||this.mBarRenderType===R){Aq=true;}else{Ai=this.updateGroupStackInfoWithBase(Aa,Ag.groupID,Ad);Aj=this.getSeriesOffsetIntoStackedInfo(Aa,Ag.groupID,Ag.seriesInfoID);var Ao=Ai[Aj];if(Ao.Max===null||Ao.Min===null){O.width=O.height=-1;return{Rect:O,AboveBase:AZ};}AW=Ak.ValueToPosition(Ao.Min);Al=Ak.ValueToPosition(Ao.Max);}if(Aq){if(this.mBarRenderType===v&&Ak.mOptions.mUseLogarithmicScale&&Ag.seriesInfoID===0){Ac=An;}else{Ac=this.GetData(Ag.seriesInfoID,Ag.groupID,true);}Ab=this.GetData(Ag.seriesInfoID,Ag.groupID);AW=Ak.GetPositionByValue(Ac);Al=Ak.GetPositionByValue(Ab);}if(AW===null||Al===null){O.width=O.height=-1;return{Rect:O,AboveBase:AZ};}AZ=(Ab>=An);}switch(Ae.mOrientation){case m.OR_VERTICAL:O.x=AX;O.y=Math.min(AW,Al);O.width=Ah;O.height=Math.abs(AW-Al);break;case m.OR_HORIZONTAL:O.x=Math.min(AW,Al);O.y=AX;O.width=Math.abs(AW-Al);O.height=Ah;break;}return{Rect:O,AboveBase:AZ,AxisOriginValue:(Ad||0)};},hPostProcessOneBar:function AR(AZ,Ab){var AW=AS.call(this,AZ);if(Ab!==null){var AX=this.mBarOptions;if(AW){AW.AddGraphObject(Ab);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mHasColorBy&&!this.mChartContextPtr.mDebugUseNewProperties){var Aa=Ab.mTripleId;AM.call(this,Aa,Ab);}}this.mGraphObjectList.push(Ab);this.AddToMap(Ab);if(AX.mColorBySeries&&!H.call(this,AZ.seriesInfoID)){this.AddLegendMarkerToCollection(AZ.seriesInfoID,AW);}else{if(!this.mBarOptions.mColorBySeries&&this.mChartContextPtr.mIsGraphMatrix){if(this.mAddedLegendMarkerSet[AZ.groupID]===null&&this.mLegendPtr!==null){var AY;if(AW){AY=AW.GetFormatFill();}else{AY=Ab.GetFormatFill();}this.mLegendPtr.UpdateFormatForLegendMarker(AZ.groupID,AY,null);this.mAddedLegendMarkerSet[AZ.groupID]=true;}}}}},hPrepareRectangleObject:function AC(Ac,Ae,AW){if(Ae.width<0||Ae.height<0){return null;}var AX=this.mChartContextPtr,Aa=this.mpABLPlot.mABLPlotContext,Ab=Aa.mABLOptions,Ad=AS.call(this,Ac),AY=new AD.TripleId({ObjectId:AO.DssGraphRiser,SeriesId:this.mSeriesInfo[Ac.seriesInfoID].mSeriesId,GroupId:Ac.groupID}),AZ;if(Ab.mUseDepth){console.alert("Missing method for depth rectangle object");}else{AZ=new AD.RectangleObject({TripleId:AY,GraphObjectManager:this,Area:Ae,GraphCollectionObject:Ad,Shape:N._BAR,hasFill:true});if(AX.mIsGraphMatrix){if(AW){AZ.mBorderOpenType=this.mIsVertical?AV.BOTTOM:AV.LEFT;}else{AZ.mBorderOpenType=this.mIsVertical?AV.TOP:AV.RIGHT;}}}if(AX.mUseAnimation){AZ.SetAnimationEnable(true);AZ.SetProgress(1);}return AZ;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","StraightLineObject","MarkerObject","SeriesRenderer","BarSeriesRenderer","Plot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumOrientation","EnumGraphMatrixThemeType","EnumValueAxis","EnumFontRotation","EnumFontRotation","EnumGenericDirection");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var W=mstrmojo.chart,J=W.enums,F=J.EnumOrientation,V=J.EnumGraphMatrixThemeType,B=J.EnumCollectionType,E=J.EnumFontRotation,P=mstrmojo.chart.model,L=P.enums,b=L.EnumDSSGraphDataTextPosition,i=L.EnumDSSGraphObject;var R=W.ChartConstants,G=mstrmojo.chart.common.Utility,a=0.9,K=5,Z=0,Q=2,d=3,M=4,D=100,X=10,C=3,f=1,I=1;function j(v){var p={},t,o,n=[0.1,0.2,0.3],r,u,s,q=this.mChartContextPtr;if(this.oneGroupBandColors){return this.oneGroupBandColors;}this.oneGroupBandColors=null;switch(this.bandOptions.ColorMode){case Q:t=7697781;break;case Z:r=new W.TripleId([i.DssGraphRiser,C,v]);u=this.GetGraphObject(r,true);if(u&&u.mFormatFillPtr){s=u.mFormatFillPtr.mSimpleColor;}else{s=q.GetColorValue(r,0,true);}t=s;break;case M:o=[16711680,65280,16776960];break;case d:o=[255,16776960,65280];break;default:break;}if(t){p.Color=t;}if(o){if(this.bandOptions.DescentLayout){p.Colors=o.reverse();}else{p.Colors=o;}}p.Alphas=n;this.oneGroupBandColors=p;return p;}function O(w,o){o=o||0;var u,z,q;u=this.mDatasetPtr.getBandDivision(w,o);if(u.Metrics&&u.Metrics.length){u=u.Metrics;z=[];var v,p=this.mpABLPlotContext,t=this.mSeriesInfo[o].mValueAxis,y=p.mValueAxis[t],s=y.mMinTick,n=y.mMaxTick-s,r=u.length;for(q=0;q<r;++q){if(q===r-1){v=1;}else{v=u[q];v=Math.max(v-s/n,0);v=Math.min(v,1);}z.push(v);}}else{if(u.Ratios&&u.Ratios.length){z=u.Ratios;}}return(z||[3/11,6/11,1]);}function A(w,o){o=o||0;if(this.oneGroupBandValues){return this.oneGroupBandValues;}var r=O.call(this,w,o),p=this.mpABLPlotContext,u=this.mSeriesInfo[o].mValueAxis,x=p.mValueAxis[u],t=x.mMinTick,n=x.mMaxTick-t,v=[],q,s=r.length;for(q=0;q<s;++q){v.push(t+r[q]*n);}this.oneGroupBandValues=v;return v;}function Y(){if(this.mBarWidth<=0){var s=this.mBarOptions,t=this.bandOptions;if(this.mBarColumns===-1){s.mGapWidth=0;this.mBarColumns=1;var o=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),r=t.Width.Padding;this.mBarWidth=(o-2*r)*t.Width.Ratio;this.mBarWidth=Math.round(this.mBarWidth);var q=this.bandOptions.Width.Limit;this.mBarWidth=Math.min(this.mBarWidth,q.Max);this.mBarWidth=Math.max(this.mBarWidth,q.Min);this.mBarWidth=Math.round(this.mBarWidth);t.Width.Padding=r=Math.max((o-this.mBarWidth)/2,0);this.mSpaceBetweenRiser=0;this.mSpaceBetweenGroup=r*2;}}var n=this.mBarWidth,p;if(G.isIntegar(n)){p=n%3;this.bulletWidth=(n-p)/3+p;}else{this.bulletWidth=n/3;}}function m(z,x){var AE=z.seriesInfoID,v=AE>=C&&AE<C+f,r=x.mRect,t=0,p=this.mpABLPlotContext,y=p.mABLOptions,AC=p.mCategoryAxisPtr,u=z.groupID;this.hPostProcessOneBar(z,x);if(v){switch(y.mOrientation){case F.OR_VERTICAL:t=Math.abs(AC.getGroupMiddlePos(u)-r.GetBottomMiddle().x);r.x+=t;break;case F.OR_HORIZONTAL:t=Math.abs(AC.getGroupMiddlePos(u)-r.GetLeftMiddle().y);r.y-=t;break;}}else{var s=this.mSeriesInfo[z.seriesInfoID].mValueAxis,AD=p.mValueAxis[s],o=A.call(this,z.groupID),n=z.seriesInfoID,AB=o[n],q=AD.ValueToPosition(AB),AF=AD.ValueToPosition(AD.mMinTick);switch(y.mOrientation){case F.OR_VERTICAL:if(z.seriesInfoID!==0){AB=o[n-1];AF=AD.ValueToPosition(AB);}r.y=q;r.height=Math.abs(q-AF);break;case F.OR_HORIZONTAL:if(z.seriesInfoID!==0){AB=o[n-1];AF=AD.ValueToPosition(AB);}r.x=AF;r.width=Math.abs(q-AF);break;}var w=x.mFormatFillPtr,AA=j.call(this,z.groupID);w.mSimpleColor=AA.Color||AA.Colors[z.seriesInfoID]||255;w.mAlpha=AA.Alphas[z.seriesInfoID]*255||255;}}function S(q,u){var r=q.seriesInfoID,s=r>=C&&r<C+f,w={Bar:null,AddToMapAndList:false};var o=this.PrepareData(q,s);if(o===null||o===undefined){return w;}var t=this.hPrepareRect(q,o,s?this.bulletWidth:this.mBarWidth),v=t.Rect,n=t.AboveBase;if(s){if(!this.hUpdateBarRect(q,v,n,o)){return w;}}if(v.width<=0||v.height<=0){return w;}if(!u){var p=this.hPrepareRectangleObject(q,v,n);if(p){m.call(this,q,p);}w.Bar=p;w.AddToMapAndList=true;}return w;}function U(y,AB,u){u=u||0;AB=AB||false;if(AB){return ;}var r=this.mChartContextPtr,AE=r.GetGraphMatrixContext(),o=this.mpABLPlotContext,AA=this.mDatasetPtr.GetData(y.seriesInfoID,y.groupID),t=this.mSeriesInfo[u].mValueAxis,AD=o.mValueAxis[t],w=o.mABLOptions,x,z,AC=[],q=new W.Point2D(),p=new W.Point2D(),s=new W.TripleId([i.DssGraphRiser,0,y.groupID]),AF=new W.TripleId([i.DssGraphDataLine,y.seriesInfoID,y.groupID]);z=this.GetGraphObject(s);if(z){var n=z.GetBoundingRect();switch(w.mOrientation){case F.OR_VERTICAL:q.x=n.GetLeftMiddle().x;p.x=n.GetRightMiddle().x;q.y=p.y=AD.ValueToPosition(AA);break;case F.OR_HORIZONTAL:q.y=n.GetTopMiddle().y;p.y=n.GetBottomMiddle().y;q.x=p.x=AD.ValueToPosition(AA);break;}}else{var v=this.GetRiserStartPosAndSize(y);switch(w.mOrientation){case F.OR_VERTICAL:q.x=v.Start;p.x=v.Start+v.Size;q.y=p.y=AD.ValueToPosition(AA);break;case F.OR_HORIZONTAL:q.y=v.Start;p.y=v.Start+v.Size;q.x=p.x=AD.ValueToPosition(AA);break;}}AC.push(q);AC.push(p);x=new W.StraightLineObject({TripleId:AF,GraphObjectManager:this,StartPoint:AC[0],EndPoint:AC[1],GraphCollectionObject:null});if(x){this.AddToMapAndList(x);}}function H(v,y,AB,p,AE,q){var s,t,z,AA,r=this.mChartContextPtr,u=this.mIsVertical,AC;p=p||false;s=u?AB.GetTopMiddle():AB.GetRightMiddle();t=u?AB.GetBottomMiddle():AB.GetLeftMiddle();z=false;AA=this.GetData(y.seriesInfoID,y.groupID);if(AA!==null){AC=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[y.seriesInfoID].mValueAxis];z=(AA<0)^AC.IsReverseOrder();}else{return false;}if(AE===undefined){AE=0;}if(q===undefined){q=this.mIsVertical?r.mGraphHeight:r.mGraphWidth;}var n=v.GetBoundingRect(),AD=r.GetGraphMatrixContext();if(z){s.swapPoints(t);AE=0;q=AC.GetBasePosition();}var x=AD.getPadding(R.kLabelToChart),w=this.mpABLPlotContext.mABLOptions,o=w.mTextPosition;switch(o){case b.DssGraphDTPositionCenter:break;case b.DssGraphDTPositionInMin:case b.DssGraphDTPositionOutMax:if(p){if(z){if(u){s.y-=x;}else{s.x+=x;}}else{if(u){s.y+=x;}else{s.x-=x;}}}else{if(z){if(u){s.y+=x;}else{s.x-=x;}}else{if(u){s.y-=x;}else{s.x+=x;}}}break;case b.DssGraphDTPositionOutMin:case b.DssGraphDTPositionInMax:break;default:break;}this.MoveLabel(y.groupID,v,s,t,y.seriesInfoID);n=v.GetBoundingRect();return AD.checkLabelPaddingToBorder(n,AE,q,!this.mIsVertical);}function T(n,o){var p=o.rect;if(this.mIsVertical){return !(p.GetBottomMiddle().y>=n&&p.GetTopMiddle().y<=n);}return !(p.GetRightMiddle().x>=n&&p.GetLeftMiddle().x<=n);}function h(q,r,p,t){t=t||false;var o=new W.Rect2D({Rect:q}),n,s;if(this.mIsVertical){if(p){if(t){o.height-=Math.max(0,r-o.y);o.y=Math.max(r,o.y);}else{o.height+=Math.max(0,o.y-r);o.y=Math.min(r,o.y);}}else{if(t){o.height-=Math.max(0,r-o.y);}else{o.height+=Math.max(0,o.y-r);}}}else{if(p){if(t){o.width=r-o.x;}else{o.width=r-o.x;}}else{if(t){o.width-=Math.max(r-o.x,0);o.x=r;}else{o.width+=Math.max(o.x-r,0);o.x=r;}}}return{Valid:true,Rect:o,Low:n,High:s};}function k(z){var AC=new W.TripleId({ObjectId:i.DssGraphRiser,SeriesId:this.mSeriesInfo[z.seriesInfoID].mSeriesId,GroupId:z.groupID}),u=I>0,s=u,w,AF,AJ=this.GetGraphObject(AC),AG,AI,AD;if(!AJ){return null;}AF=AJ.GetBoundingRect();AC.mObjectId=i.DssGraphDataText;if(this.mSGMapLabel[AC.mSeriesId]===undefined){this.mSGMapLabel[AC.mSeriesId]=new W.GraphCollectionObject({TripleId:AC,GraphObjectManager:this,CollectionType:B.CT_TEXT});}var x=this.mSGMapLabel[AC.mSeriesId],AA=0,AB=true,r=this.mDatasetPtr.GetData(AC.mSeriesId,AC.mGroupId),t=this.createRiserLabel(z.seriesInfoID,z.groupID,x);if(t===null){return null;}if(s){var q=this.mDatasetPtr.GetData(C+f,AC.mGroupId);if(q){if(q===0||q===r){s=false;}else{s=(q>0&&r>=0)||(q<0&&r<=0);if(s){AB=(q>r&&r>=0)||(q<r&&r<=0);}}}else{s=false;}}for(AG=0;AG<2;++AG){if(w===true){return t;}if(AG===1){t.SetRotation(E.FR_90);}w=H.call(this,t,z,AF);if(s&&AB&&w){w=T.call(this,AA,t);if(!w){AI=h.call(this,AF,AA,(r>=0),false);if(AI.Valid){w=H.call(this,t,z,AI.Rect,false,AI.High,AI.Low);}}}if(!w){var v=this.mpABLPlotContext.mABLOptions,n=v.mTextPosition,AE=n;v.mTextCollection=b.DssGraphDTPositionInMax;w=H.call(this,t,z,AF,true);if(s&&!AB&&w){w=T.call(this,AA,t);if(!w){AI=h.call(this,AF,AA,(r>=0),true);if(AI.Valid){w=H.call(this,t,z,AI.Rect,true,AI.High,AI.Low);}}}var p=true,AH=false;if(this.mIsVertical){AH=AF.height<=t.height;}else{AH=AF.width<=t.width;}if(p){AD=this.mChartContextPtr.getDefaultContrastColor();var y=1,o=new W.FormatFont({Font:t.mFormatFontPtr});o.mStrokeColor=AD;if(AH){o.mFontStyle=y;}t.mFormatFontPtr=o;}v.mTextCollection=AE;}}return t;}function N(y,u,AA){var q=u,z={groupID:y,seriesInfoID:0},o=true,AC=true,v=true,n=true;var t,AB,x;if(o){for(t=0;t<f;++t){z.seriesInfoID=q[C+t];AB=S.call(this,z,AA);if(AB.Bar===null){return ;}}}else{return ;}if(AC){for(t=0;t<C;++t){z.seriesInfoID=q[t];AB=S.call(this,z,AA);}}if(v){for(t=0;t<I;++t){z.seriesInfoID=q[C+f+t];x=U.call(this,z,AA);}}if(n){for(t=0;t<f;++t){z.seriesInfoID=q[C+t];var w=this.mpABLPlotContext.mABLOptions,s=w.mShowValue,r=this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[z.seriesInfoID].mSeriesIndex].mShowDataLabels;w.mShowValue=true;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[z.seriesInfoID].mSeriesIndex].mShowDataLabels=true;var p=k.call(this,z);if(p){p.mTripleId.mSeriesID=C+f+I;this.AddToMapAndList(p);}w.mShowValue=s;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[z.seriesInfoID].mSeriesIndex].mShowDataLabels=r;}}}function g(t){var o=this.IsReverseGroupOrder(),p,s=[],n,q;var r=this.mDatasetPtr.GetGroupCount();for(q=0;q<r;++q){p=q;if(o){p=r-1-p;}s=this.GetSeriesOrderByType(p,s,t);n=s.length;A.call(this,p,t);j.call(this,p);N.call(this,p,s);this.oneGroupBandValues=null;this.oneGroupBandColors=null;}this.GenerateTrendLine();this.GenerateRefLine();}mstrmojo.chart.BulletSeriesRenderer=mstrmojo.declare(mstrmojo.chart.BarSeriesRenderer,null,{scriptClass:"mstrmojo.chart.BulletSeriesRenderer",bandOptions:null,bulletWidth:0,oneGroupBandValues:null,oneGroupBandColors:null,labelCollection:null,init:function l(n){this._super(n);this.bandOptions={DescentLayout:false,Width:{Ratio:a,Padding:K,Limit:{Max:D,Min:X}},ColorMode:Q,PositionByMetric:false};},GenerateByValueAxis:function e(n){this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();Y.call(this);if(this.mSeriesInfo.length===0){return ;}g.call(this,n);},PrepareData:function c(o,p){if(p){return this.hPrepareData(o);}var n=A.call(this,o.groupID);return n[o.seriesInfoID];}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","BarSeriesRenderer","AreaSeriesRenderer","LineSeriesRenderer","BulletSeriesRenderer","Plot","GraphObjectManager","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumMajorGraphType","EnumGraphSubType","EnumOrientation","EnumValueAxis","EnumAnchorPoint","EnumTrendLineIndex");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumShapeType","EnumDSSGraphObject");var R=mstrmojo.hash,f=mstrmojo.chart,Z=f.ChartConstants,M=f.enums,g=M.EnumMajorGraphType,O=M.EnumLayout,i=M.EnumGraphSubType,K=M.EnumOrientation,E=M.EnumValueAxis,a=M.EnumTrendLineIndex,n=M.EnumAnchorPoint,k=f.gNullTripleId,W=mstrmojo.chart.model,Q=W.enums,t=Q.EnumShapeType,o=Q.EnumDSSGraphType,r=Q.EnumDSSGraphProperty,S=Q.EnumDSSGraphDataTextShowType,s=Q.EnumDSSGraphObject,V=0,b=1,p=2,AA=1,N=2,x=3,L=4;var AB=new f.TripleId();function AD(){var AE=this.mChartContextPtr,AF=this.mABLPlotContext,AI=AF.mABLOptions,AH,AM={positive:[],negative:[]},AJ=this.mAreaSeriesRendererPtr,AN=this.mBarSeriesRendererPtr,AL=this.mLineSeriesRendererPtr;if((AI.mLayout===O.LO_STACKED)||(AI.mLayout===O.LO_PERCENT)){if(AE.isCombinationChart()){var AK=this.mSeriesId,AG=AK.length;for(AH=0;AH<AG;++AH){if(AJ){AM=AJ.UpdateCumulateData(E.VA_Y1,AM,AK[AH]);}if(AN){AM=AN.UpdateCumulateData(E.VA_Y1,AM,AK[AH]);}if(AL){AM=AL.UpdateCumulateData(E.VA_Y1,AM,AK[AH]);}}if(AI.mDualAxes){AM={positive:[],negative:[]};for(AH=0;AH<AG;++AH){if(AJ){AM=AJ.UpdateCumulateData(E.VA_Y2,AM,AK[AH]);}if(AN){AM=AN.UpdateCumulateData(E.VA_Y2,AM,AK[AH]);}if(AL){AM=AL.UpdateCumulateData(E.VA_Y2,AM,AK[AH]);}}}}else{if(AJ){AM=AJ.UpdateCumulateData(E.VA_Y1,AM);}if(AN){AM={positive:[],negative:[]};AM=AN.UpdateCumulateData(E.VA_Y1,AM);}if(AL){AM={positive:[],negative:[]};AL.UpdateCumulateData(E.VA_Y1,AM);}if(AI.mDualAxes){AM={positive:[],negative:[]};if(AJ){AM=AJ.UpdateCumulateData(E.VA_Y2,AM);}if(AN){AM={positive:[],negative:[]};AM=AN.UpdateCumulateData(E.VA_Y2,AM);}if(AL){AM={positive:[],negative:[]};AL.UpdateCumulateData(E.VA_Y2,AM);}}}}}function U(){var AI=[],AG=[this.mAreaSeriesRendererPtr,this.mBarSeriesRendererPtr,this.mLineSeriesRendererPtr],AE=AG.length,AF,AH=0;for(AF=0;AF<AE;AF++){if(AG[AF]){AH=AG[AF].updateSeriesRenderSequence(AI,AH);}}return AI;}function w(){var AF=this.mABLPlotContext,AI=AF.mCategoryAxisPtr,AG=this.mDatasetPtr;this.DPCount=0;this.seriesDPCount.splice(0,this.seriesDPCount.length);if(this.mPartialRendering){var AE=this.mChartContextPtr,AK={PartialRendering:true,Group:{}},AH,AL,AJ=AE.mRenderingWindow,AM=AE.IsVertical();if(AM){AH=AJ.x;AL=AH+AJ.width;}else{AH=AJ.y;AL=AH+AJ.height;}AK.Group.Max=AI.getGroupSlotAt(AL)+1;AK.Group.Min=AI.getGroupSlotAt(AH)-1;AK.Data={Max:-1,Min:-1};AG.updateDataWindow(AK);}else{AG.resetDataWindow();}}function AC(){var AF=this.mDatasetPtr,AM,AG,AL=E.VA_Y1,AE,AJ,AH,AN,AK,AI;AM=AF.GetGroupCount();AG=this.mSeriesId.length;if(this.mChartContextPtr.IsDualAxis()){AE=AF.GetSeriesByValueAxis(E.VA_Y2);}else{AE=[];}for(AJ=0;AJ<AM;++AJ){AN=AK=0;for(AH=0;AH<AG;++AH){AI=AF.GetData(this.mSeriesId[AH],AJ);if(AI!==null&&AI!==undefined){if(AE.indexOf(this.mSeriesId[AH])!==-1){AL=E.VA_Y2;if(AI>0){AK+=AI;}else{AK+=Math.abs(AI);}}else{AL=E.VA_Y1;if(AI>0){AN+=AI;}else{AN+=Math.abs(AI);}}}}this.groupTotals[0].push(AN);this.groupTotals[1].push(AK);}}function c(){var AN=this.mABLPlotContext.mABLOptions,AH=this.mABLPlotContext.mSeriesOptions,AG=this.mChartContextPtr,AT,AK,AJ,AL,AM,AR,AP,AS=0;if(AG.mIsGraphMatrix&&AG.isCombinationChart()){var AQ,AI=this.mDatasetPtr.GetSeriesByShape(),AF=[AI.Tick,AI.Line,AI.Square,AI.Circle,AI.Bar,AI.Area,AI.Pie],AO=[t._TICKER,t._LINE,t._SQUARE,t._CIRCLE,t._BAR,t._AREA,t._PIE];AP=AF.length;for(AK=0;AK<AP;++AK){AQ=AF[AK];AR=AO[AK];if(AQ&&AQ.length){++AS;for(AJ=0;AJ<AQ.length;AJ++){AH[AQ[AJ]].mRealSeriesType=AR;}}}this.countOfTypes=AS;this.realComboChart=(AS>1);return ;}var AE=AG.getUtiliy().tripleId;AL=AH.length;for(AK=0;AK<AL;++AK){switch(AH[AK].mSeriesType){case t._AREA:AH[AK].mRealSeriesType=t._AREA;break;case t._BAR:AH[AK].mRealSeriesType=t._BAR;break;case t._LINE:if(AN.mCurvedLines){AH[AK].mRealSeriesType=t._LINE;}else{AM=AE.create(s.DssGraphRiser,this.mSeriesId[AK]);AT=AG.GetProperty(r.DssGraphShowStepLine,AM);if(AT!==undefined&&AT!==null){if(AT){AH[AK].mRealSeriesType=t._STEPLINE;}else{AH[AK].mRealSeriesType=t._LINE;}}}break;case t._PIE:AH[AK].mRealSereisType=t._LINE;break;case t._DEFAULT:if(AN.mMajorGraphType===g.MGT_AREA){AH[AK].mRealSeriesType=t._AREA;}else{if(AN.mMajorGraphType===g.MGT_BAR){AH[AK].mRealSeriesType=t._BAR;}else{if(AN.mCurvedLines){AH[AK].mRealSeriesType=t._LINE;}else{AM=AE.create(s.DssGraphRiser,this.mSeriesId[AK]);AT=AG.GetProperty(r.DssGraphShowStepLine,AM);if(AT!==undefined&&AT!==null){if(AT){AH[AK].mRealSeriesType=t._STEPLINE;}else{AH[AK].mRealSeriesType=t._LINE;}}else{AH[AK].mRealSeriesType=t._LINE;}}}}break;}}}function Y(AF){var AK=this.mChartContextPtr,AJ=this.mABLPlotContext,AH=AJ.mABLOptions,AE=AJ.mSeriesOptions,AI;var AG=AK.getUtiliy().tripleId;AG.reset(AB,s.DssGraphRiser,this.mSeriesId[AF]);if(!AK.mIsGraphMatrix){AI=AK.GetProperty(r.DssGraphSDRiserType,AB);if(AI){switch(AI){case V:AE[AF].mSeriesType=t._DEFAULT;break;case b:if(AH.mMajorGraphType===g.MGT_LINE){AE[AF].mSeriesType=t._BAR;}else{AE[AF].mSeriesType=t._LINE;}break;case p:if(AH.mMajorGraphType===g.MGT_AREA){AE[AF].mSeriesType=t._BAR;}else{AE[AF].mSeriesType=t._AREA;}break;default:AE[AF].mSeriesType=AI;break;}}}AE[AF].mValueAxis=this.LoadValueAxisInfo(AF,AH.mDualAxes);if(AK.mImageUsage!==0){return ;}this.LoadTrendLineProperties(this.mSeriesId[AF],AE[AF].mTrendLineOptions);if(AK.mIsGraphMatrix===false){AE[AF].mGraphNumberFormat=new f.ChartAdvFormat();AI=AK.GetProperty(-r.DssGraphFormatDataTextAdv,AB);if(AI){AK.ParseValueToFormat(AI,AE[AF].mGraphNumberFormat);}}}function I(){var AJ=this.mChartContextPtr,AI=this.mABLPlotContext,AF=AI.mABLOptions,AG;this.SetGraphType(AJ.mGraphType);if(AJ.mImageUsage!==0){return ;}if(AJ.mIsGraphMatrix){return ;}var AH=new f.TripleId({SeriesId:this.mTripleId.mSeriesId});AG=AJ.GetProperty(r.DssGraphShowDataText,AH);if(AG){AF.mTextShowType=AG;AF.mShowCumulate=(AG&S.DssGraphDataTextAbs)===0;}var AE=21001;AG=AJ.GetProperty(AE,AH);if(AG){AF.mUseGlobalAutoScale=AG;}AG=AJ.GetProperty(r.DssGraphDepthMode,AH);if(AG){AF.mUseDepth=AG;}AG=AJ.GetProperty(r.DssGraph2DDepth,AH);if(AG){AF.mDepth=AG;}AG=AJ.GetProperty(r.DssGraph2DAngle,AH);if(AG){AF.mDepthDirection=AG;}AG=AJ.GetProperty(r.DssGraphShowLine,AH);if(AG){AF.mShowLines=AG;}AG=AJ.GetProperty(r.DssGraphShowDivBiPolar,AH);if(AG){AF.mShowAxisSplit=AG;}AG=AJ.GetProperty(r.DssGraphShowDataLabel,AH);if(AG){AF.mShowLabel=AG;}AG=AJ.GetProperty(r.DssGraphShowDataValue,AH);if(AG){AF.mShowValue=AG;}AG=AJ.GetProperty(r.DssGraphShowDVPercent,AH);if(AG){AF.mShowAsPercentage=AG;}AG=AJ.GetProperty(r.DssGraphShowTotalValue,AH);if(AG){AF.mShowTotal=AG;}AG=AJ.GetProperty(r.DssGraphCurvedLines,AH);if(AG){AF.mCurvedLines=AG;}AG=AJ.GetProperty(r.DssGraphAxisDataTextPlace,AH);if(AG){AF.mTextPosition=AG;}AG=AJ.GetProperty(r.DssGraphSplitYPosition,AH);if(AG){AF.mSplitAxisPosition=AG;}}function y(AG){var AK=this.mChartContextPtr,AF=AK.GetGraphMatrixContext();if(AK.mIsGraphMatrix){if(AF.isCombinationChart()){var AH=AK.mImageUsage===mstrmojo.chart.enums.EnumImageUsage.OBJECT_CLIP_COMPUTATION;var AI=this.mDatasetPtr,AJ=AI.GetSeriesByShape(),AE=((AJ.Square&&AJ.Square.length)||(AJ.Circle&&AJ.Circle.length)||(AJ.Tick&&AJ.Tick.length));if((AJ.Bar&&AJ.Bar.length)){if(!AH||AI.onlyBarDataLabelEnabled()){this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AG,{TripleId:f.BarRenderer0}));}}if(AJ.Area&&AJ.Area.length){this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AG,{TripleId:f.AreaRenderer0}));}if((AJ.Line&&AJ.Line.length)||AE){if(!AH||(AH&&!(AJ.Line.length===1&&AI.GetGroupCount()===1))){this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AG,{TripleId:f.LineRenderer0}));}}return true;}if(AK.IsBarChart()){if(AK.IsBulletChart()){this.mBarSeriesRendererPtr=new f.BulletSeriesRenderer(R.copy(AG,{TripleId:f.BarRenderer0}));}else{this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AG,{TripleId:f.BarRenderer0}));}}else{if(AK.IsLineChart()){this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AG,{TripleId:f.LineRenderer0}));}else{if(AK.IsAreaChart()){this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AG,{TripleId:f.AreaRenderer0}));}else{return false;}}}return true;}this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AG,{TripleId:f.AreaRenderer0}));this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AG,{TripleId:f.BarRenderer0}));this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AG,{TripleId:f.LineRenderer0}));return true;}function P(AP,AG){var AN=y.call(this,AP);if(!AN){return ;}var AL=this.mAreaSeriesRendererPtr,AR=this.mBarSeriesRendererPtr,AQ=this.mLineSeriesRendererPtr;var AJ=[[0,0],[0,0],[0,0],[0,0]],AE=[],AM,AI=0,AH=this.mDatasetPtr,AF=this.mChartContextPtr,AO=this.mSeriesId,AK=AO.length;if(AF.isCombinationChart()){AE=AH.GetSeriesIndexByPriority();}for(AM=0;AM<AK;++AM){if(AE&&AE.length>AM){AI=AE[AM];}else{AI=AM;}switch(AG[AI].mRealSeriesType){case t._AREA:if(AL){AL.AddSeries(AO[AI],AI,AJ[t._AREA][AG[AI].mValueAxis],AG[AI].mValueAxis);++AJ[t._AREA][AG[AI].mValueAxis];}break;case t._BAR:if(AR){AR.AddSeries(AO[AI],AI,AJ[t._BAR][AG[AI].mValueAxis],AG[AI].mValueAxis);++AJ[t._BAR][AG[AI].mValueAxis];}break;case t._TICKER:case t._LINE:case t._SQUARE:case t._CIRCLE:case t._PIE:if(AQ){AQ.AddSeries(AO[AI],AI,AJ[t._LINE][AG[AI].mValueAxis],AG[AI].mValueAxis);++AJ[t._LINE][AG[AI].mValueAxis];}break;default:}}}function C(AJ,AQ,AE,AP,AN,AL,AG,AH){var AF={},AK=AQ/2,AI=AE/2,AM=AH.IsVerticalAxis(),AO;if(AH.mTripleId.mObjectId===s.DssGraphY2Body){AO=AM?x:L;}else{AO=AM?AA:N;}AF.rect=new f.Rect2D({x:0,y:0,width:AE+2*AG,height:AQ+2*AG});switch(AJ){case 0:switch(AO){case AA:AF.xOffset=AG+AI;AF.yOffset=AP-AG-AK;AF.rect.y=AP-2*AG-AQ;AF.rect.x=0;break;case N:AF.xOffset=AP-AG-AI;AF.yOffset=AN-AG-AK;AF.rect.y=AN-2*AG-AQ;AF.rect.x=AP-2*AG-AE;break;case x:AF.xOffset=AL-AG-AI;AF.yOffset=AP-AG-AK;AF.rect.y=AP-2*AG-AQ;AF.rect.x=AL-2*AG-AE;break;case L:AF.xOffset=AP-AG-AI;AF.yOffset=AG+AK;AF.rect.y=0;AF.rect.x=AP-2*AG-AE;break;}break;case 1:switch(AO){case AA:AF.xOffset=AG+AI;AF.yOffset=AP+AG+AK;AF.rect.y=AP;AF.rect.x=0;break;case N:AF.xOffset=AP+AG+AI;AF.yOffset=AN-AG-AK;AF.rect.y=AN-2*AG-AQ;AF.rect.x=AP;break;case x:AF.xOffset=AL-AG-AI;AF.yOffset=AP+AG+AK;AF.rect.y=AP;AF.rect.x=AL-2*AG-AE;break;case L:AF.xOffset=AP+AG+AI;AF.yOffset=AG+AK;AF.rect.y=0;AF.rect.x=AP;break;}break;}return AF;}function j(AI,AO,AL,AJ,AF,AG){var AM=AI.rect,AK,AH,AE,AN;if(AM.y<0||AM.y+AM.height>AO){return false;}if(AM.x<0||AM.x+AM.width>AL){return false;}AK=AG.length;for(AH=0;AH<AK;++AH){AE=AG[AH].GetBoundingRect(true);if(AM.HasIntersection(AE)){return false;}}AK=AF.length;for(AH=0;AH<AK;++AH){AE=AF[AH].GetBoundingRect(true);if(AM.HasIntersection(AE)){return false;}}AK=AJ.length;for(AH=0;AH<AK;++AH){AN=AJ[AH];if(AN.mIsShown){AE=AN.GetBoundingRect(true);if(AM.HasIntersection(AE)){return false;}}}return true;}function D(){var Ab=this.mABLPlotContext.mValueAxis,Ah=this.mABLPlotContext.mABLOptions,AK=this.mChartContextPtr,AX=AK.mGraphWidth,Af=AK.mGraphHeight,Ac=AK.mpGraphMatrixContext,AE=Ah.mOrientation,AM=AE===1,AR=this.mDatasetPtr.fetchShownLabels(AM),AH,AQ,Ad,AZ,AY,Ag,AJ,AO,AP,AI,Ak,AF,AU,AS,AT,Aj,AW,AL,AG,AV,Ai=Ac.getPadding(Z.kAxisOriginLabel),Ae,AN;Ad=Ab.length;for(AZ=0;AZ<Ad;++AZ){AH=Ab[AZ];AU=f.gAxisObjects[AH.getIndex()].mCustomLabelId;AQ=AH.mOptions;AP=AQ.mAxisCustomValue;Ag=AR&&AR[AH.Key];AJ=Ag&&Ag.length;AI=false;if(!AQ.mDrawCustomLine){continue;}for(AY=0;AY<AJ&&!AI;++AY){AO=Ag[AY];if(AO===AP){AI=true;}}if(AI){continue;}if(AP>AH.mMaxTick||AP<AH.mMinTick){continue;}var Aa={};if(AH.mIsPercent){Aa.mFormatType=4;Aa.mCustomFormat="0%";}else{Aa=AH.mNumberFormat;}Aj=new f.NumberObject({TripleId:AU,GraphObjectManager:this,Number:AP,NumberFormat:Aa,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:AH.mCondenseLabels});if(Aj===null||Aj===undefined){continue;}AL=Aj;AG=Aj.mText;AL.SetText(AG);AF=AL.GetBoundingRect(true);AS=AF.height;AT=AF.width;Ak=AH.ValueToPosition(AP);AN=AH.IsVerticalAxis();if(Ak===0){continue;}if(AN){if(Ak===Af){continue;}}else{if(Ak===AX){continue;}}Ae=false;for(AY=0;AY<=1&&!Ae;++AY){AW={};AV=C.call(this,AY,AS,AT,Ak,Af,AX,Ai,AH);AW.xOffset=AV.xOffset;AW.yOffset=AV.yOffset;AW.rect=AV.rect;Ae=j.call(this,AW,Af,AX,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(Ae){AL.MoveTo(AW.xOffset,AW.yOffset,n.CENTER);AL.mIsShown=true;this.mPostTrendLineObjects.push(AL);this.axisOriginLabels.push(AL);}}}function T(){return{mSeriesOptions:[],mValueAxis:[],mABLOptions:{mGraphType:o.DssGraphTypeVertical_Line_Absolute,mMajorGraphType:g.MGT_LINE,mLayout:O.LO_ABSOLUTE,mOrientation:K.OR_VERTICAL,mGraphSubType:i.GST_NULL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mShowAxisSplit:true,mShowLabel:false,mShowValue:false,mShowAsPercentage:false,mShowTotal:true,mShowCumulate:false,mCurvedLines:false,mShowLines:true,mUseGlobalAutoScale:true,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mTextPosition:4,mTextShowType:S.DssGraphDataTextValue,mTotalNumberFormat:null}};}mstrmojo.chart.ABLPlot=mstrmojo.declare(mstrmojo.chart.CategoryPlot,null,{scriptClass:"mstrmojo.chart.ABLPlot",mAreaSeriesRendererPtr:null,mBarSeriesRendererPtr:null,mLineSeriesRendererPtr:null,mABLPlotContext:null,mDepthLevel:null,mAxesAreas:null,unitLevelDepth:0,takeGroupCenter:false,groupTotals:null,groupOrder:null,countOfTypes:0,realComboChart:false,init:function v(AE){this._super(AE);this.mDepthLevel=[];this.groupTotals=[[],[]];this.mAxesAreas=[];this.groupOrder=[];this.mABLPlotContext=T.call(this);this.mABLPlotContext.takeGroupCenter=this.mChartContextPtr.mDatasetPtr.ShouldTakeGroupCenter();},getLayout:function J(){return this.mABLPlotContext.mABLOptions.mLayout;},getOrientation:function z(){return this.mABLPlotContext.mABLOptions.mOrientation;},isAbsoluteOrCluster:function F(){var AE=this.mABLPlotContext.mABLOptions.mLayout;return AE===O.LO_ABSOLUTE||AE===O.LO_CLUSTER;},GenerateMapAndList:function u(){var AJ=this.mChartContextPtr,AF=this.mABLPlotContext,AN=AF.mABLOptions,AK=this.mDataArea,AM,AL,AS,AW,AO=this.shownDataLabels;if(AK.width<=0||AK.height<=0){return ;}w.call(this);var AI=this.mAxesAreas;if(AN.mDualAxes&&AN.mSplitDualAxes){AM=new f.Rect2D();AL=new f.Rect2D();this.mChartContextPtr.SplitRect(AK,AN.mOrientation===K.OR_VERTICAL,AN.mSplitAxisPosition,AM,AL);AI.push(AM);AI.push(AL);}else{AM=new f.Rect2D({x:AK.x,y:AK.y,width:AK.width,height:AK.height});AI.push(AM);if(AN.mDualAxes){AL=new f.Rect2D({x:AK.x,y:AK.y,width:AK.width,height:AK.height});AI.push(AL);}}var AP=this.mABLPlotContext.mValueAxis,AT,AU=AP.length,AE=this.mAreaSeriesRendererPtr,AR=this.mBarSeriesRendererPtr,AX=this.mLineSeriesRendererPtr,AG=this.mGraphObjectManagerList,AQ=this.mGraphObjectMap,AH=this.mPostTrendLineObjects;if(AJ.mIsGraphMatrix===false){for(AS=0;AS<AU;++AS){AT=AP[AS];if(!AT.IsBaseAtZero()&&AT.mOptions.mUseLogarithmicScale===false){AW=AT.GetBaseValue();if(AE){AE.AddBaseToCumulateData(AS,AW);}if(AR){AR.AddBaseToCumulateData(AS,AW);}if(AX){AX.AddBaseToCumulateData(AS,AW);}}}}if(AE){AE.SetDeviceDataArea(AK);}if(AR){AR.SetDeviceDataArea(AK);}if(AX){AX.SetDeviceDataArea(AK);}if(!(AN.mDualAxes&&AN.mSplitDualAxes&&AN.mUseDepth)){if(AE){AE.GenerateMapAndList(AO);AG.push(AE);}if(AR){AR.GenerateMapAndList(AO);AG.push(AR);}if(AX){AX.GenerateMapAndList(AO);AG.push(AX);}}if(AN.mDualAxes){if(AN.mSplitDualAxes){this.AdjustTrendLineEquation(AI[0],a.TLI_Y1);this.AdjustTrendLineEquation(AI[1],a.TLI_Y2);}else{this.AdjustTrendLineEquation(AK,a.TLI_BOTH);}}else{this.AdjustTrendLineEquation(AK,a.TLI_Y1);}AU=AP.length;this.axisOriginLines=[];var AV=this.axisOriginLines;for(AS=0;AS<AU;++AS){AT=AP[AS];if(this.mChartContextPtr.mIsGraphMatrix){AT.GenerateCustomLine(AI[AS],AV);}else{AT.GenerateCustomLine(AI[AS],AH);}}D.call(this);if(AE){AE.AddTextToMapAndList(AQ,AH);}if(AR){AR.AddTextToMapAndList(AQ,AH);}if(AX){AX.AddTextToMapAndList(AQ,AH);}this.mDatasetPtr.resetDataWindow();},Draw:function q(){var AE=this.mChartContextPtr,AF=this.mDataArea,AM=this.mAreaSeriesRendererPtr,AP=this.mBarSeriesRendererPtr,AO=this.mLineSeriesRendererPtr;var AN=this.axisOriginLines;if(AN&&AN.length){var AI,AK=AN.length;for(AI=0;AI<AK;AI++){AN[AI].Draw();}}if(this.mAreaSeriesRendererPtr){var AG=U.call(this);AE.setDrawingOrderToCanvas(AG);}if(AE.mIsTimeSeriesChart){var AL=new f.Rect2D({x:AF.x+1,y:AF.y,width:AF.width-1,height:AF.height});AE.DrawRectangle(AL,false);AE.saveState();AE.Clip();if(AM){AM.Draw();}if(AP){AP.Draw();}if(AO){AO.Draw();}this._super();this.DrawPostTrendLineObjects();AE.RestoreState();}else{var AH=this.mABLPlotContext,AJ=AH.mABLOptions;if(!AJ.mDualAxes||!AJ.mSplitDualAxes||!AJ.mUseDepth){if(AM){AM.Draw();}}if(AP){AP.Draw();}if(!AJ.mDualAxes||!AJ.mSplitDualAxes||!AJ.mUseDepth){if(AO){AO.Draw();}}this._super({Skip:1});if(this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquations();}this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function e(){if(!this.mChartContextPtr.mIsTimeSeriesChart&&this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[0],false);if(this.mABLPlotContext.mABLOptions.mDualAxes){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[1],true);}}},AddValueAxis:function A(AE){this.mABLPlotContext.mValueAxis.push(AE);},SetCategoryAxis:function h(AJ){var AE=this.mChartContextPtr,AH=this.mABLPlotContext,AF,AM,AG,AN,AK,AI,AL=AH.mCategoryAxisPtr=AJ;AF=false;if(AE.mIsTimeSeriesChart){AF=true;}else{AM=AE.GetProperty(r.DssGraph2DOrdSpaceMode,k);if(AM){AF=AM;}}AG=AH.mABLOptions.mMajorGraphType!==g.MGT_BAR;AN=true;AK=this.mSeriesId.length;for(AI=0;AI<AK;++AI){if(AH.mSeriesOptions[AI].mRealSeriesType===t._BAR){AN=false;break;}}AL.mAxisCross=(AF&&AG&&AN);if(AE.mIsGraphMatrix&&AE.IsLineChart()){if(this.mDatasetPtr.GetGroupCount()<=1){AL.mAxisCross=false;}}},GetDepthOffset:function B(AE){return this.mChartContextPtr.CalculateDepthOffset(this.mDepthLevel[AE]*this.unitLevelDepth,this.mABLPlotContext.mABLOptions.mDepthDirection);},getGroupTotals:function m(AE,AF){return this.groupTotals[AF][AE];},Init:function l(){var AH,AE,AJ=this.mABLPlotContext,AG=AJ.mSeriesOptions;AG.splice(0,AG.length);AE=this.mSeriesId.length;for(AH=0;AH<AE;++AH){var AI={mSeriesType:t._DEFAULT,mRealSeriesType:t._LINE,mValueAxis:E.VA_Y1,mShowDataLabels:false,mTrendLineOptions:null,mGraphNumberFormat:f.dNF};if(this.mChartContextPtr.mIsGraphMatrix==false){AI.mTrendLineOptions=new f.GraphTrendLineOptions();}AG.push(AI);}I.call(this);for(AH=0;AH<AE;++AH){Y.call(this,AH);}c.call(this);var AF={GraphObjectManager:this,DataSet:this.mDatasetPtr,Legend:this.mLegendPtr};P.call(this,AF,AG);AC.call(this);AD.call(this);},SetGraphType:function d(AF){var AE=this.mABLPlotContext.mABLOptions;AE.mGraphType=AF;switch(AF){case o.DssGraphTypeVertical_Area_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Area_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Area_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Area_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Area_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Area_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Area_Percent:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Area_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Area_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Area_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Area_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Area_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Area_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Area_Percent:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Bar_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Bar_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Bar_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Bar_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Bar_Percent:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Bar_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Bar_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Bar_Percent:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Line_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Line_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Line_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Line_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Line_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Line_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Line_Percent:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Line_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Line_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Line_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Line_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Line_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Line_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Line_Percent:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Bullet:case o.DssGraphTypeVertical_Bar_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Bullet:case o.DssGraphTypeHorizontal_Bar_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Bar_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Bar_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Area_DualAxis_Percent:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Area_DualAxis_Percent:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Bar_DualAxis_Percent:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Bar_DualAxis_Percent:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Line_DualAxis_Percent:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Line_DualAxis_Percent:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;}switch(AE.mGraphSubType){case i.GST_NULL:AE.mDualAxes=false;AE.mSplitDualAxes=false;break;case i.GST_DUALAXIS:AE.mDualAxes=true;AE.mSplitDualAxes=false;break;case i.GST_BIPOLAR:AE.mDualAxes=true;AE.mSplitDualAxes=true;break;}},GetMinMaxValue:function H(AL,AH,AE,AJ){var AG,AK=this.mChartContextPtr;if(AK.mIsUniformAxisMode){var AF=AK.getUniformAxisContext(),AI=AF.ValueAxis;if(AL===E.VA_Y1){if(AK.IsVertical()===false){return{Min:AI.X1.Min,Max:AI.X1.Max,AreInitialized:true};}return{Min:AI.Y1.Min,Max:AI.Y1.Max,AreInitialized:true};}if(AK.IsVertical()===false){return{Min:AI.X2.Min,Max:AI.X2.Max,AreInitialized:true};}return{Min:AI.Y2.Min,Max:AI.Y2.Max,AreInitialized:true};}if(this.mAreaSeriesRendererPtr){AG=this.mAreaSeriesRendererPtr.GetMinMaxValue(AL,AH,AE,AJ);}if(this.mBarSeriesRendererPtr){AG=this.mBarSeriesRendererPtr.GetMinMaxValue(AL,AG.Min,AG.Max,AG.AreInitialized);}if(this.mLineSeriesRendererPtr){AG=this.mLineSeriesRendererPtr.GetMinMaxValue(AL,AG.Min,AG.Max,AG.AreInitialized);}return{Min:AG.Min,Max:AG.Max,AreInitialized:AG.AreInitialized};},ShouldRotateDataLabel:function X(){return this.mBarSeriesRendererPtr.ShouldRotateDataLabel();},GetMaxElementOffsetClippedByBoundary:function G(AM,AP){var AF={LowOffset:0,HighOffset:0},AL,AG,AJ,AN;if(AP===undefined||AP===null){AP=true;}if(!this.mChartContextPtr.mIsGraphMatrix){return AF;}var AH=AM?(AP?"X1":"X2"):(AP?"Y1":"Y2"),AE=this.mClippedElementSize;if(AE[AH]!==undefined){return AE[AH];}for(AG=0;AG<2;++AG){for(AJ=0;AJ<2;++AJ){var AO=[this.mLineSeriesRendererPtr,this.mAreaSeriesRendererPtr],AK=(AJ===0),AI=(AG===0),AQ=AK?(AI?"X1":"X2"):(AI?"Y1":"Y2");AF={LowOffset:0,HighOffset:0};AN=AO.length;for(AL=0;AL<AN;++AL){if(AO[AL]){AO[AL].getMaxElementOffsetClippedByBoundary(AF,AK,AI);}}AE[AQ]=AF;}}return AE[AH];}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","CategoryPlot","ABLPlot","Axis","CategoryAxis","ValueAxis","GraphObjectManager","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumLayout","EnumOrientation","EnumValueAxis","EnumAxisLabelsLocation","EnumAxisDirection","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSExtraGraphProperty","EnumDSSGraphObject","EnumVariantBool");var W=mstrmojo.chart,M=W.enums,X=M.EnumGraphMajorType,d=M.EnumDSSGraphObjectManager.DssPlot,N=M.EnumLayout,J=M.EnumOrientation,E=M.EnumValueAxis,a=M.EnumAxisLabelsLocation,A=M.EnumAxisDirection,o=W.gNullTripleId,T=mstrmojo.chart.model,O=T.enums,g=O.EnumDSSGraphType,i=O.EnumDSSGraphProperty,f=O.EnumDSSExtraGraphProperty,k=O.EnumDSSGraphObject,B=O.EnumVariantBool.VARIANT_FALSE;var l=new W.Rect2D(),j=new W.Rect2D(),C=new W.Rect2D(),I=new W.Rect2D(),H=new W.Rect2D(),K=new W.Rect2D(),L=new W.Rect2D();function P(){var w=this.mChartContextPtr,u=this.mDatasetPtr,r=w.GetGraphMatrixContext(),v=false,s=false,t;if(w.mIsGraphMatrix&&this.mOrientation===J.OR_VERTICAL){var q=this.mCategoryPlots[0];t=w.GetProperty(f.DssGraphMatrixInitedDataLabelRotation,o);if(t){v=t;}if(!v){if(w.isCombinationChart()&&!u.onlyBarDataLabelEnabled()){w.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,o,true);r.mIsNeedRotateDataLabel=false;w.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,o,false);return ;}if(w.IsBarChart()||(w.isCombinationChart()&&u.onlyBarDataLabelEnabled())){s=q.ShouldRotateDataLabel();w.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,o,true);r.mIsNeedRotateDataLabel=s;w.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,o,s);}}}}function b(v,s){var z=this.mChartContextPtr;if(z.mIsGraphMatrix){s.Reset(v.x,v.y,v.width,v.height);return ;}var r,t,w,q,u=new W.Rect2D();Z.call(this,v,u);u.width=Math.max(0,u.width);u.height=Math.max(0,u.height);this.mLeftMargin+=u.x-v.x;this.mRightMargin+=v.x+v.width-(u.x+u.width);this.mTopMargin+=u.y-v.y;this.mBottomMargin+=v.y+v.height-(u.y+u.height);this.ReserveAreaCategoryAxis(u,s);if(s.width<0){s.width=0;}if(s.height<0){s.height=0;}if(this.mOrientation===J.OR_HORIZONTAL){r=v.x+Math.max(u.x-v.x,s.x-u.x);t=v.x+v.width-Math.max(v.x+v.width-(u.x+u.width),u.x+u.width-(s.x+s.width))-r;s.x=r;s.width=t;}else{w=v.y+Math.max(u.y-v.y,s.y-u.y);q=v.y+v.height-Math.max(v.y+v.height-(u.y+u.height),u.y+u.height-(s.y+s.height))-w;s.y=w;s.height=q;}}function Y(q){var t=this.mChartContextPtr,s,r;s=t.GetGraphMajorType();if(t.mIsGraphMatrix){r=W.PlotId0;}else{r=new W.TripleId({ObjectId:d,SeriesId:q});}switch(s){case X.GMT_CATEGORY:return new W.ABLPlot({TripleId:r,GraphObjectManager:this,Area:W.gEmptyRect});default:break;}return null;}function Z(t,AE){var r=this.mChartContextPtr,s=[],y=this.mVecY1Axis.length,v,AC,z,u,AA,x,w,q,AD;for(v=0;v<y;++v){AC=this.mOrientation===J.OR_VERTICAL?this.mBottomMargin:this.mLeftMargin;z=this.mOrientation===J.OR_VERTICAL?this.mTopMargin:this.mRightMargin;u=AC;if(r.mIsGraphMatrix){L.ResetRect(t);K.ResetRect(t);}else{K=new W.Rect2D({Rect2D:t});L=new W.Rect2D({Rect2D:t});}if(this.mDualAxes){AA=z;if(this.mSplitDualAxes){x=new W.Rect2D();w=new W.Rect2D();r.SplitRect(L,r.IsVertical(),this.mSplitAxisPosition,x,w);if(this.mOrientation===J.OR_VERTICAL){AA+=x.height;u+=w.height;}else{AA+=x.width;u+=w.width;}}this.mVecY2Axis[v].ReserveTitleAndLabels(K,AC,AA);if(!this.mSplitDualAxes){L.ResetRect(K);if(this.mOrientation===J.OR_VERTICAL){L.y=t.y;L.height=t.height;}else{L.x=t.x;L.width=t.width;}}if(this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&K.y>t.y){q=K.y+K.height;K.y=t.y+(K.y-t.y)*100/this.mSplitAxisPosition;K.height=q-K.y;}if(this.mOrientation===J.OR_HORIZONTAL&&K.x+K.width<t.x+t.width){K.width=t.width-(t.x+t.width-(K.x+K.width))*100/this.mSplitAxisPosition;}}}this.mVecY1Axis[v].ReserveTitleAndLabels(L,u,z);if(this.mDualAxes&&this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&L.y+L.height<t.y+t.height){L.height=(t.y+t.height-(L.y+L.height))*100/this.mSplitAxisPosition;}if(this.mOrientation===J.OR_HORIZONTAL&&L.x>t.x){var AB=L.x+L.width;L.x=t.x+(L.x-t.x)*100/this.mSplitAxisPosition;L.width=AB-L.x;}}if(this.mDualAxes&&!this.mSplitDualAxes){K.ResetRect(L);if(this.mOrientation===J.OR_VERTICAL){K.y=t.y;K.height=t.height;}else{K.x=t.x;K.width=t.width;}}this.mVecY1Axis[v].AdjustDeviceDataArea(L,false);s.push(L);if(this.mDualAxes){this.mVecY2Axis[v].AdjustDeviceDataArea(K,false);s.push(K);}}l.Reset(0,0,0,0);j.ResetRect(s[0]);AD=s.length;for(v=1;v<AD;++v){if(!this.RectangleIntersection(j,s[v],l)){j.Reset(0,0,0,0);break;}j.ResetRect(l);}AE.ResetRect(j);}function p(r,t){var v=this.mChartContextPtr,s=v.mUniformAxisContext,q=new W.Rect2D({Rect2D:t});if(v.mIsGraphMatrix){var u=0;if(v.IsVertical()){u=s.yDataLabelPadding||0;u-=q.y;if(u){q.y+=u;q.height-=u;}}else{u=s.xDataLabelPadding||0;u-=v.mGraphWidth-q.x-q.width;if(u){q.width-=u;}}}return q;}function Q(q,s){var r=this.mChartContextPtr,AA=this.mVecY1Axis,z=this.mVecY2Axis,y=AA[s],x=z[s],v,u,w,t;if(this.mDualAxes&&this.mSplitDualAxes){w=new W.Rect2D({Rect2D:q});v=new W.Rect2D();u=new W.Rect2D();r.SplitRect(w,r.IsVertical(),this.mSplitAxisPosition,v,u);y.SetDeviceDataArea(v);y.AdjustDeviceDataArea(v,true);y.UpdateTitleAndLabelArea(v);x.SetDeviceDataArea(u);x.AdjustDeviceDataArea(u,true);x.UpdateTitleAndLabelArea(u);}else{if(this.mDualAxes){v=p.call(this,0,q);if(AA.length){y.TrimDeviceDataArea(v);}y.SetDeviceDataArea(v);y.AdjustDeviceDataArea(v,true);u=p.call(this,1,q);if(z.length){x.TrimDeviceDataArea(u);}x.SetDeviceDataArea(u);if(!r.mIsGraphMatrix){t=new W.Rect2D({Rect2D:v});x.AdjustDeviceDataArea(u,true);this.RectangleUnion(v,u,t);y.UpdateTitleAndLabelArea(t);x.UpdateTitleAndLabelArea(t);}}else{v=p.call(this,0,q);if(AA.length){y.TrimDeviceDataArea(v);}y.SetDeviceDataArea(v);if(!r.mIsGraphMatrix){y.AdjustDeviceDataArea(v,true);t=new W.Rect2D({Rect2D:v});y.UpdateTitleAndLabelArea(t);}}}}function R(){var r=this.mGraphObjectList,s,t,q;s=this.mVecY1Axis.length;for(q=0;q<s;++q){this.mVecY1Axis[q].generateAxisLine(r);if(this.mDualAxes){this.mVecY2Axis[q].generateAxisLine(r);}}t=this.mVecO1Axis.length;for(q=0;q<t;++q){this.mVecO1Axis[q].generateAxisLine(r);}}function e(u){var q=this.mChartContextPtr,y=this.mGraphObjectList,AA=this.mChartAreaOptions,z=AA.chartAreaNumber,t,s,x,r,w,v;x=this.mVecY1Axis.length;for(t=0;t<x;++t){if(!this.isMutipleValueAxis()){for(s=0;s<z;++s){if(this.mDualAxes&&this.mSplitDualAxes){w=new W.Rect2D();v=new W.Rect2D();q.SplitRect(u[s],q.IsVertical(),this.mSplitAxisPosition,w,v);this.mVecY1Axis[t].GenerateGridLines(w,s,y);this.mVecY2Axis[t].GenerateGridLines(v,s,y);}else{this.mVecY1Axis[t].GenerateGridLines(u[s],s,y);if(this.mDualAxes){this.mVecY2Axis[t].GenerateGridLines(u[s],s,y);}}}}else{if(this.mDualAxes&&this.mSplitDualAxes){w=new W.Rect2D();v=new W.Rect2D();q.SplitRect(u[t],q.IsVertical(),this.mSplitAxisPosition,w,v);this.mVecY1Axis[t].GenerateGridLines(w,t,y);this.mVecY2Axis[t].GenerateGridLines(v,t,y);}else{this.mVecY1Axis[t].GenerateGridLines(u[t],t,y);if(this.mDualAxes){this.mVecY2Axis[t].GenerateGridLines(u[t],t,y);}}}}r=this.mVecO1Axis.length;for(t=0;t<r;++t){if(this.isMutipleValueAxis()){for(s=0;s<z;++s){this.mVecO1Axis[t].GenerateGridLines(u[s],s,y);}}else{this.mVecO1Axis[t].GenerateGridLines(u[t],t,y);}}}function D(r,q){var v=this.mChartContextPtr,u,s;I.Reset(r.x,r.y,r.width,r.height);H.Reset(r.x,r.y,r.width,r.height);if(!v.mIsGraphMatrix){if(v.mManualLayoutMode&&!this.mRecalculateFrame){I.ResetRect(this.mPlotArea);}else{v.PutLocation(i.DssGraphFrameLocationNEW,I);}q.splice(0,q.length);this.CalculateChartAreas(I,q);}else{q.splice(0,q.length);q.push(H);}if(v.isUADataAreaOutput()){var t=v.mUniformAxisContext;H.x=t.mDataAreaLeftMargin;H.y=t.mDataAreaTopMargin;H.width=v.mGraphWidth-H.x-t.mDataAreaRightMargin;H.height=v.mGraphHeight-H.y-t.mDataAreaBottomMargin;if(this.mVecO1Axis.length){this.mVecO1Axis[0].TrimAxisPadding(H,false);}I.ResetRect(H);this.mCategoryPlots[0].SetDataArea(H);if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);Q.call(this,H,0);}else{Q.call(this,I,0);this.mVecO1Axis[0].SetDeviceDataArea(H);}return ;}u=this.mChartAreaOptions.chartAreaNumber;for(s=0;s<u;++s){this.mCategoryPlots[s].SetDataArea(q[s]);}if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);for(s=0;s<this.mChartAreaOptions.chartAreaNumber;++s){Q.call(this,q[s],s);}}else{Q.call(this,I,0);for(s=0;s<this.mChartAreaOptions.chartAreaNumber;++s){this.mVecO1Axis[s].SetDeviceDataArea(q[s]);}}}function c(s,r){var w=this.mChartContextPtr,t;D.call(this,s,r);var q=this.mDatasetPtr.showDatalabels();if(q){P.call(this);if(!w.mIsGraphMatrix){var v=new W.Rect2D({Rect2D:s}),u=this.mCategoryPlots.length;for(t=0;t<u;++t){this.mCategoryPlots[t].ReserveAreaForDataLabels(s);}if(s.width!==v.width||s.height!==v.height){D.call(this,s,r);}}else{this.ShouldRotateDataLabel();}}}function G(t,u,z,AB,q){var s=this.mChartContextPtr,w=s.getAxisTripleId(t),v=s.getUniformAxisInformation(w.mObjectId),y=v.Metrics,AA=(this.mOrientation===J.OR_VERTICAL?A.AD_Y:A.AD_X),r=new W.ValueAxis({TripleId:w,GraphObjectManager:this,Min:u,Max:z,PrimaryMetricIndex:y,LargerGridInterval:AB!==1||(this.mDualAxes&&this.mSplitDualAxes),IsPercent:this.mLayout===N.LO_PERCENT,AxisDirection:AA,IsShown:q,Key:t});if(s.mIsGraphMatrix&&r.mIsUniformAxis===false){var x=v.CondenseEnforced;r.checkCondense(!!x);}return r;}mstrmojo.chart.CategoryPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.CategoryPlotManager",mGraphType:g.DssGraphTypeVertical_Line_Absolute,mLayout:N.LO_ABSOLUTE,mOrientation:J.OR_VERTICAL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mDataAreaSplitX:50,mCategoryPlots:null,mVecO1Axis:null,mVecY1Axis:null,mVecY2Axis:null,init:function n(q){this._super(q);this.mCategoryPlots=[];this.mVecO1Axis=[];this.mVecY1Axis=[];this.mVecY2Axis=[];this.mChartContextPtr=q.GraphObjectManager.mChartContextPtr;},GenerateMapAndList:function m(){var AA=this.mChartAreaOptions,x=AA.chartAreaNumber,w=this.mPlotArea,s=this.mCategoryPlots,v=this.mChartContextPtr,r=this.mGraphObjectManagerList,AO,AM,q,AR,AP,AJ,AN,y,AC,AF,AU,z,AI,AB=[],u,AG,AQ;var AL="Y1",AD=this.mVecO1Axis,AT=this.mVecY1Axis,AS=this.mVecY2Axis;if(w.width<=0||w.height<=0){return ;}this.LoadProperties();for(AO=0;AO<x;++AO){q=Y.call(this,AO);q.SetDataset(this.mDatasetPtr);q.mLegendPtr=this.mLegendPtr;s.push(q);AQ=AA.seriesDistribution[AO].length;for(AM=0;AM<AQ;++AM){s[AO].AddSeries(AA.seriesDistribution[AO][AM]);}q.Init();}var t;if(this.isMutipleValueAxis()){t=v.getAxisTripleId("O1");var AH=new W.CategoryAxis({TripleId:t,GraphObjectManager:this,AxisLabelsLocation:a.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});AD.push(AH);for(AO=0;AO<x;++AO){AR=false;AP=false;AJ=[0,0];AN=[0,0];AG=s[AO].GetMinMaxValue(E.VA_Y1,AJ[0],AN[0],AR);AJ[0]=AG.Min;AN[0]=AG.Max;AR=AG.AreInitialized;if(this.mDualAxes){AG=s[AO].GetMinMaxValue(E.VA_Y2,AJ[1],AN[1],AP);AJ[1]=AG.Min;AN[1]=AG.Max;AP=AG.AreInitialized;}s[AO].SetCategoryAxis(AH);if(v.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AL="X1";}y=G.call(this,AL,AJ[0],AN[0],x,AR);AT.push(y);s[AO].AddValueAxis(y);if(this.mDualAxes){AL="Y2";if(v.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AL="X2";}AC=G.call(this,AL,AJ[1],AN[1],x,AP);AS.push(AC);s[AO].AddValueAxis(AC);}}}else{AR=false;AP=false;AJ=[0,0];AN=[0,0];for(AO=0;AO<x;++AO){AG=s[AO].GetMinMaxValue(E.VA_Y1,AJ[0],AN[0],AR);AJ[0]=AG.Min;AN[0]=AG.Max;AR=AG.AreInitialized;if(this.mDualAxes){AG=s[AO].GetMinMaxValue(E.VA_Y2,AJ[1],AN[1],AP);AJ[1]=AG.Min;AN[1]=AG.Max;AP=AG.AreInitialized;}t=v.mIsGraphMatrix?v.getAxisTripleId("O1"):new W.TripleId({ObjectId:k.DssGraphO1Body,SeriesId:AO});AF=new W.CategoryAxis({TripleId:t,GraphObjectManager:this,AxisLabelsLocation:a.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});s[AO].SetCategoryAxis(AF);AD.push(AF);}if(v.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AL="X1";}y=G.call(this,AL,AJ[0],AN[0],x,AR);AT.push(y);for(AO=0;AO<x;++AO){s[AO].AddValueAxis(y);}if(this.mDualAxes){AL="Y2";if(v.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AL="X2";}AC=G.call(this,AL,AJ[1],AN[1],x,AP);AS.push(AC);for(AO=0;AO<x;++AO){s[AO].AddValueAxis(AC);}}}AU=this.mVecO1Axis.length;z=this.mVecY1Axis.length;AI=this.mVecY2Axis.length;if(this.mUseDepth){for(AO=0;AO<AU;++AO){AD[AO].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AO=0;AO<z;++AO){AT[AO].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AO=0;AO<AI;++AO){AS[AO].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}}AQ=AD.length;for(AO=0;AO<AQ;++AO){AD[AO].SetDataset(this.mDatasetPtr);}for(AO=0;AO<AU;++AO){r.push(this.mVecO1Axis[AO]);}for(AO=0;AO<z;++AO){r.push(this.mVecY1Axis[AO]);if(this.mDualAxes){r.push(this.mVecY2Axis[AO]);}}C.Reset(0,0,0,0);b.call(this,w,C);c.call(this,C,AB);u=s.length;for(AO=0;AO<u;++AO){r.push(s[AO]);s[AO].GenerateMapAndList();}for(AO=0;AO<AU;++AO){AT[AO].GenerateMapAndList();}for(AO=0;AO<z;++AO){AT[AO].GenerateMapAndList();if(this.mDualAxes){AS[AO].GenerateMapAndList();}}var AE=v.mIsGraphMatrix,AK=v.isUADataAreaOutput();if(!(AE&&AK)){if(this.mUseDepth){R.call(this);e.call(this,AB);}else{e.call(this,AB);R.call(this);}}},LoadProperties:function V(){var r,s=this.mChartContextPtr;this._super();var q=this.mGraphType=s.mGraphType;if(!(s.mIsTimeSeriesChart)){if(!s.mIsGraphMatrix){r=s.GetProperty(i.DssGraphDepthMode,o);if(r){this.mUseDepth=(r!==B);}r=s.GetProperty(i.DssGraph2DDepth,o);if(r){this.mDepth=r;}r=s.GetProperty(i.DssGraph2DAngle,o);if(r){this.mDepthDirection=r;}}this.mOrientation=s.IsVertical()?J.OR_VERTICAL:J.OR_HORIZONTAL;this.mDualAxes=s.IsDualAxis();}if((q>=g.DssGraphTypeVertical_Area_Percent)&&(q<=g.DssGraphTypeHorizontal_Line_Percent)&&(q%7===0)){this.mLayout=N.LO_PERCENT;}if(this.mLayout!==N.LO_PERCENT&&(q>=g.DssGraphTypeVertical_Bar_DualAxis_Percent&&q<=g.DssGraphTypeHorizontal_Area_DualAxis_Percent)){this.mLayout=N.LO_PERCENT;}},isMutipleValueAxis:function S(){var q=this.mChartAreaOptions;return(this.mOrientation===q.mOrientation);},ReserveAreaCategoryAxis:function F(u,AC){var r=this.mChartContextPtr,t=[],x=[],v,w,z,y,s,AB,q,AA;if(!this.isMutipleValueAxis()){this.CalculateChartAreas(u,x);}v=this.mVecO1Axis.length;for(w=0;w<v;++w){if(r.mIsGraphMatrix){j.ResetRect(this.isMutipleValueAxis()?u:x[w]);}else{j=this.isMutipleValueAxis()?new W.Rect2D({Rect2D:u}):new W.Rect2D({Rect2D:x[w]});}this.mVecO1Axis[w].AdjustTitleArea(j);if(r.mIsTimeSeriesChart){this.mVecO1Axis[w].AdjustDataArea(j,0,0,true);}else{z=this.mOrientation===J.OR_HORIZONTAL?this.mBottomMargin:this.mLeftMargin;y=this.mOrientation===J.OR_HORIZONTAL?this.mTopMargin:this.mRightMargin;this.mVecO1Axis[w].AdjustDataArea(j,z,y);}if(r.mRecalculateFrame){if(this.mOrientation===J.OR_VERTICAL){s=u.x;q=u.width;if(w===0){if(j.x>u.x){s=j.x;q-=(j.x-u.x);}}if(w===this.mVecO1Axis.length-1){if(u.x+u.width>j.x+j.width){q=j.x+j.width-s;}}j.x=s;j.width=q;}else{AB=u.y;AA=u.height;if(w===0){if(j.y>u.y){AB=j.y;AA-=(j.y-u.y);}}if(w===this.mVecO1Axis.length-1){if(u.y+u.height>j.y+j.height){AA=j.y+j.height-AB;}}j.y=AB;j.height=AA;}}t.push(j);}j.ResetRect(t[0]);for(w=1;w<t.length;++w){if(!this.RectangleIntersection(j,t[w],l)){j.Reset(0,0,0,0);break;}j.ResetRect(l);}AC.ResetRect(j);},Draw:function h(){var r=this.mCategoryPlots,t,v,u,q,s;this._super();t=this.mVecY1Axis.length;for(s=0;s<t;++s){this.mVecY1Axis[s].Draw();}v=this.mVecY2Axis.length;for(s=0;s<v;++s){this.mVecY2Axis[s].Draw();}u=this.mVecO1Axis.length;for(s=0;s<u;++s){this.mVecO1Axis[s].Draw();}q=r.length;for(s=0;s<q;++s){r[s].Draw();}},ShouldRotateDataLabel:function U(){var x=this.mChartContextPtr,v=this.mDatasetPtr,q=x.GetGraphMatrixContext(),u=v.showDatalabels(),s=false,w=false;if(u&&x.mIsGraphMatrix&&v.onlyBarDataLabelEnabled()){var r=this.mCategoryPlots[0],t;if(this.mOrientation===J.OR_VERTICAL){t=x.GetProperty(f.DssGraphMatrixInitedDataLabelRotation,W.gNullTripleId);if(t!==undefined&&t!==null){w=t;}if(w){t=x.GetProperty(f.DSSGraphMatrixDataLabelRotated,W.gNullTripleId);if(t!==undefined&&t!==null){q.mIsNeedRotateDataLabel=t;return ;}}s=r.ShouldRotateDataLabel();q.mIsNeedRotateDataLabel=s;x.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,W.gNullTripleId,true);x.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,W.gNullTripleId,s);}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlotManager","TripleId","Rect2D","RectangleObject","TextObject","Legend","GridChartPlotManager","ValuePlotManager");var W=mstrmojo.chart,R=W.enums,A=R.EnumDSSExtraGraphObject,B=R.EnumGraphMajorType,J=W.ChartContext,X=R.EnumDSSGraphObjectManager,K=X.DssLegend,Y=W.gNullTripleId,C=W.gNullSeriesId,E=W.gNullGroupId;var M=mstrmojo.chart.model,Z=M.enums,D=Z.EnumDSSGraphType,F=Z.EnumDSSGraphProperty,G=Z.EnumDSSGraphObject,U=Z.EnumVariantBool,Q=U.VARIANT_FALSE,a=Z.EnumDSSExtraGraphProperty;function P(g,f){var i=this.mChartContextPtr,e=this.mGraphObjectList,d,b,c;f=f||false;if(!this.isSupportedChartType()||f){d="Graph Type Not Supported";b=new W.TextObject({TripleId:new W.TripleId({ObjectId:A.DssGraphWarningMessage}),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}if(!this.checkDataset()){d="Insufficient Data To Plot";b=new W.TextObject({TripleId:new W.TripleId([A.DssGraphWarningMessage,C,E]),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}var h=i.mImageUsage===32;if(h){d=this.mDatasetPtr.GetBannerText();b=new W.TextObject({TripleId:new W.TripleId([A.DssGraphBanner,0,0]),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}return false;}mstrmojo.chart.ChartManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.ChartManager",mGraphType:D.DssGraphTypeVertical_Bar_Side_by_Side,mPlotManagers:null,mDatasetPtr:null,mLegendPtr:null,mHighlightLayerObjectPtr:null,mIsTitleShown:false,mIsSubtitleShown:false,mIsFootnoteShown:false,mIsLegendShown:false,mIsExpanded:false,mIsInitialized:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,mAxisLabelsAutoFit:true,init:function T(b){this._super(b);this.mPlotManagers=[];},GenerateMapAndList:function N(){var j=this.mChartContextPtr,f,g,e,h,c,b,d;this.LoadProperties();f=new W.Rect2D({x:0,y:0,width:j.mGraphWidth,height:j.mGraphHeight});if(P.call(this,f)===true){this.mIsInitialized=true;return ;}if(!j.mIsGraphMatrix){g=j.GetProperty(F.DssGraph2ScaleDirection,new W.TripleId({ObjectId:G.DssGraphO1Body,SeriesId:-3}));if(g){this.mDatasetPtr.mReverseGroup=(g!==Q);}else{this.mDatasetPtr.mReverseGroup=false;}e=this.CreateBackground();this.mGraphObjectList.unshift(e);this.AddToMap(e);}h=null;c=null;switch(j.GetGraphMajorType()){case B.GMT_GRID:this.CalculateLayout(f);c=new W.GridChartPlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;case B.GMT_BOX:case B.GMT_CATEGORY:this.CalculateLayout(f);c=new W.CategoryPlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;case B.GMT_PIE:break;case B.GMT_SCATTER:case B.GMT_BUBBLE:this.CalculateLayout(f);c=new W.ValuePlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;default:P.call(this,f,true);break;}if(c!==null&&c!==undefined){this.mGraphObjectManagerList.unshift(c);c.SetDataset(this.mDatasetPtr);c.mLegendPtr=this.mLegendPtr;if(j.mIsTimeSeriesChart){this.mRightMargin=0;}c.SetMarginInfo(this.mLeftMargin,this.mRightMargin,this.mTopMargin,this.mBottomMargin);this.mPlotManagers.push(c);b=this.mPlotManagers.length;for(d=0;d<b;++d){this.mPlotManagers[d].GenerateMapAndList();}}this.mIsInitialized=true;},LoadProperties:function L(){var f=this.mChartContextPtr,d,e,c,b;d=f.GetProperty(F.DssGraphType,Y);if(d){this.mGraphType=d;}if(f.mIsTimeSeriesChart||f.mIsGraphMatrix){this.mIsTitleShown=false;this.mIsSubtitleShown=false;this.mIsFootnoteShown=false;this.mIsLegendShown=false;return ;}e=f.GetGraphMajorType();if(e!==B.GMT_3D_CATEGORY&&e!==B.GMT_HISTOGRAM&&e!==B.GMT_BOX){d=f.GetProperty(F.DssGraphShowLegendText,Y);if(d){this.mIsLegendShown=d!==Q;}}d=f.GetProperty(F.DssGraphShowTitle,Y);if(d){this.mIsTitleShown=d!==Q;}d=f.GetProperty(F.DssGraphShowSubtitle,Y);if(d){this.mIsSubtitleShown=d!==Q;}d=f.GetProperty(F.DssGraphShowfootnote,Y);if(d){this.mIsFootnoteShown=d!==Q;}c=false;if(!f.mManualLayoutMode){c=true;}else{d=f.GetProperty(a.DssGraphInfoRecalculateLegend,Y);if(d){if(d!==Q){c=true;}}}if(c){d=f.GetProperty(a.DssGraphInfoAutosizeHorizontal,Y);b=f.GetProperty(a.DssGraphInfoAutosizeVertical,Y);if(d&&b){this.mIsExpanded=(d!==Q&&b!==Q);}}if(f.mManualLayoutMode){d=f.GetProperty(F.DssGraphAxisAutoFit,new W.TripleId({ObjectId:G.DssGraphO1Body}));if(d){this.mAxisLabelsAutoFit=d!==Q;}if(this.mAxisLabelsAutoFit){f.mRecalculateFrame=true;}}},CreateBackground:function I(){var d=this.mChartContextPtr,c,b;c=new W.TripleId({ObjectId:G.DssGraphBackground,SeriesId:C,GroupId:E});b=new W.Rect2D({x:0,y:0,width:d.mGraphWidth,height:d.mGraphHeight});return new W.RectangleObject({TripleId:c,GraphObjectManager:this,Area:b});},isSupportedChartType:function V(){var c=this.mChartContextPtr,b;b=c.GetGraphMajorType();switch(b){case B.GMT_CATEGORY:case B.GMT_PIE:case B.GMT_BUBBLE:case B.GMT_SCATTER:case B.GMT_GRID:case B.GMT_BOX:return true;default:return false;}},checkDataset:function H(){var c=this.mDatasetPtr.GetSeriesCount(),e=this.mChartContextPtr;if(this.mDatasetPtr.CountMetric()===0&&this.mChartContextPtr.mIsGraphMatrix){var b=this.mDatasetPtr.IsHeaderEmpty(true),d=this.mDatasetPtr.IsHeaderEmpty(false);return(!d||!b);}return true;},CalculateLayout:function S(x){var h=this.mChartContextPtr,y,r,AC,l,AE,f,t,AA,j,m,k,b,s,n,w,AD,v,e,d,i,o,z,AB,q,u,c,p,g;y=0;r=0;if(h.mIsTimeSeriesChart){g=J.sDefaultMarginForTimeSeries;y=g;r=g;this.mRightMargin=0;}else{if(h.mIsUniformAxisMode&&!(h.mIsEntireChart)){g=J.sDefaultUniformAxisMargin;y=g;r=g;this.mRightMargin=r;}else{g=J.sDefaultMargin;y=h.vdHeight(g);r=h.vdWidth(g);this.mRightMargin=r;}}AC=x.x+x.width;l=x.y+x.height;x.x+=r;x.y+=y;AC-=this.mRightMargin;l-=y;x.width=AC-x.x;x.height=l-x.y;this.mLeftMargin=r;this.mTopMargin=y;this.mBottomMargin=y;if(h.mIsTimeSeriesChart){return ;}AE=null;if(this.mIsTitleShown){f=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultTitlePosition);t=new W.TripleId({ObjectId:G.DssGraphTitle});c=h.GetProperty(F.DssGraphTextContent,t);if(c){v=c;}else{v="Graph Title";}AE=new W.TextObject({TripleId:t,GraphObjectManager:this,rect:f});AE.SetText(v);this.AddToMapAndList(AE);if(!h.mManualLayoutMode||h.mRecalculateFrame){AA=AE.GetBoundingRect();l=x.y+x.height;x.y=AA.y+AA.height+y;x.height=l-x.y;if(x.height<0){x.height=0;}}if(h.mManualLayoutMode){f=h.GetLocation(F.DssGraphTitleLocation);AE.SetRect(f);AE.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(F.DssGraphTitleLocation,AA);}}}j=null;if(this.mIsSubtitleShown){k=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultSubtitlePosition);m=new W.TripleId({ObjectId:G.DssGraphSubtitle});c=h.GetProperty(F.DssGraphTextContent,m);v=(c===null||c===undefined)?("Graph Subtitle"):c;j=new W.TextObject({TripleId:m,GraphObjectManager:this,rect:k});j.SetText(v);this.AddToMapAndList(j);if(!h.mManualLayoutMode||h.mRecalculateFrame){j.MoveTo(k.x,x.y);b=j.GetBoundingRect();l=x.y+x.height;x.y=b.y+b.height+y;x.height=l-x.y;if(x.height<0){x.height=0;}}if(h.mManualLayoutMode){k=h.GetLocation(W.DssGraphSubTitleLocation);j.SetRect(k);j.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(W.DssGraphTitleLocation,b);}}}s=null;if(this.mIsFootnoteShown){w=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultFootnotePosition);n=new W.TripleId({ObjectId:G.DssGraphFootnote});c=h.GetProperty(F.DssGraphTextContent,n);if(c===null||c===undefined){v="Graph Footnote";}else{v=c;}s=new W.TextObject({TripleId:n,GraphObjectManager:this,rect:w});s.SetText(v);this.AddToMapAndList(s);if(!h.mManualLayoutMode||h.mRecalculateFrame){AD=s.GetBoundingRect();s.MoveTo(w.x,x.y+x.height-AD.height);x.height=(x.y+x.height-y-AD.height)-x.y;if(x.height<0){x.height=0;}}if(h.mManualLayoutMode){w=h.GetLocation(F.DssGraphFootnoteLocation);s.SetRect(w);s.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(F.DssGraphTitleLocation,AD);}}}e=h.mGraphWidth;d=h.mGraphHeight;if(this.mIsLegendShown&&!h.mIsGraphMatrix){i=this.mDatasetPtr.GetSeriesCount();if(i===1){o=this.mDatasetPtr.GetSeriesLabel(0,false);if(o===""){this.mIsLegendShown=false;}}}if(this.mIsLegendShown){if(x.height>0){this.mLegendPtr=new W.Legend({TripleId:new W.TripleId({ObjectId:K}),GraphObjectManager:this,DataSet:this.mDatasetPtr,Area:x});this.mLegendPtr.GenerateMapAndList();this.mGraphObjectManagerList.push(this.mLegendPtr);if(!h.mManualLayoutMode||h.mRecalculateFrame){z=new W.Rect2D({Rect2D:x});this.mLegendPtr.CalculateFrame(r,y,x);this.mLeftMargin+=x.x-z.x;this.mRightMargin+=z.x+z.width-(x.x+x.width);this.mBottomMargin+=z.y+z.height-(x.y+x.height);if(!h.mManualLayoutMode){if(this.mIsExpanded){if(AE!==null&&AE!==undefined){f=h.vdRect(W.gDefaultTitlePosition);AE.SetRect(f);AE.CalculateDeviceRect();h.PutLocation(F.DssGraphTitleLocation,f);}if(j!==null&&j!==undefined){k=h.vdRect(W.gDefaultSubtitlePosition);j.SetRect(k);j.CalculateDeviceRect();h.PutLocation(F.DssGraphSubTitleLocation,k);}if(s!==null&&s!==undefined){w=h.vdRect(W.gDefaultFootnotePosition);s.SetRect(w);s.CalculateDeviceRect();h.PutLocation(F.DssGraphFootnoteLocation,w);}}}}}}if(h.mManualLayoutMode&&!h.mRecalculateFrame){AB=h.mGraphWidth;q=h.mGraphHeight;if(this.mIsExpanded){h.SetGraphSize(e,d);}if(this.mIsExpanded){h.SetGraphSize(AB,q);}}else{if(!this.mChartContextPtr.mIsGraphMatrix){u=15;c=h.GetProperty(F.DssGraphFontSize100,new W.TripleId({ObjectId:G.DssGraphDataText,SeriesId:0}));if(c){u=Math.floor(c/100+0.5);}if(u>this.mTopMargin){p=u-this.mTopMargin;if(p>x.height/10){p=x.height/10;}x.y+=p;x.height-=p;this.mTopMargin=u;}}}},Draw:function O(){var b,d,c;if(!this.mIsInitialized){this.GenerateMapAndList();}b=this.mGraphObjectList.length;if(b>0){this.mGraphObjectList[0].Draw();}d=this.mPlotManagers.length;for(c=0;c<d;++c){this.mPlotManagers[c].Draw();}if(this.mLegendPtr!==null&&this.mLegendPtr!==undefined){this.mLegendPtr.Draw();}for(c=1;c<b;++c){this.mGraphObjectList[c].Draw();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","GenericContext","GraphObjectManager","ChartManager","Point2D","NumberObject","ChartAdvFormat");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory","EnumLabelLevelOption","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMajorGraphType","EnumAxisLabelsLocation","EnumGraphMatrixMarkerTypeInChart","EnumFontRotation","EnumRectCompare");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphFillEffect","EnumDSSGraphStockLayout");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var As=mstrmojo.chart,Q=As.enums,Aq=Q.EnumGraphMajorType,k=Q.EnumGraphMatrixMajorGraphType,Aw=Q.EnumAxisDirection,f=Q.EnumAxisLabelsLocation,t=Q.EnumGraphMatrixMajorGraphType,I=Q.EnumFontRotation,Am=Q.EnumGraphMatrixMarkerTypeInChart,Ai=Q.EnumRectCompare,AS=Q.EnumImageUsage,Z=mstrmojo.hash,Ab=As.gNullTripleId,Al=mstrmojo.chart.model,AY=Al.enums,A8=AY.EnumDSSGraphType,A9=AY.EnumDSSGraphProperty,BA=AY.EnumDSSGraphObject,AU=AY.EnumVariantBool,AP=AU.VARIANT_FALSE,Av=AY.EnumDSSExtraGraphProperty,AW=mstrmojo.chart.common.Utility,AZ=AW.tripleId;var W=0,p=2147483647,A0=0,Ad=2,Y=0;var AF=new As.Rect2D();var AH=new As.TripleId();var AN=new As.ChartAdvFormat();var AT=20;function S(BJ){var BK=1,BP=2,BL=4,BO=8;var BN=this.mDatasetPtr.showHideItemsOnAxis(BJ),BM=0;if(BN.axisLabels){BM=BM|BL;}if(BN.majorGrids){BM=BM|BP;}if(BN.minorGrids){BM=BM|BO;}if(BN.axisBody){BM=BM|BK;}return BM;}function Au(BN){var BM={HighTrim:0,LowTrim:0,isCaTrim:true};if(this.mUniformAxisPtr){var BL,BO=this.mChartContextPtr,BK=BO.getUniformAxisContext(),BJ=BK.CategoryAxis;BL=BN?BJ.X:BJ.Y;BM.HighTrim=BL.Trims[1];BM.LowTrim=BL.Trims[0];}return BM;}function AC(){var BL={PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};if(this.mUniformAxisPtr){var BK,BN=this.mUniformAxisPtr,BO=this.mChartContextPtr,BJ=BO.getUniformAxisContext(),BM=BJ.ValueAxis;switch(BN.Key){case"x2":case"X2":BK=BM.X2;BL.SecondaryLowTrim=BK.Trims[0];BL.SecondaryHighTrim=BK.Trims[1];break;case"y2":case"Y2":BK=BM.Y2;BL.SecondaryLowTrim=BK.Trims[0];BL.SecondaryHighTrim=BK.Trims[1];break;case"x":case"x1":case"X":case"X1":BK=BM.X1;BL.PrimaryLowTrim=BK.Trims[0];BL.PrimaryHighTrim=BK.Trims[1];break;default:BK=BM.Y1;BL.PrimaryLowTrim=BK.Trims[0];BL.PrimaryHighTrim=BK.Trims[1];break;}}return BL;}function x(BS){var BQ=this.mChartContextPtr.GetGraphMatrixContext(),BT=BS.ShapeType||BQ.mMarkerShape;BQ.mGraphType=this.mGraphType;BQ.updateGMGraphTypeWithMarkerShape(BT);if(BS.DataAreaPaddings){BQ.UpdateValueAxisPadding(BS.DataAreaPaddings);}if(BS.ColorBy){var BR=BS.ColorBy;BQ.mHasColorBy=BR.HasColorBy||false;}if(BS.SizeBy){var BX=BS.SizeBy;BQ.mHasSizeBy=BX.HasSizeBy||BQ.mHasSizeBy;BQ.mMaxSizeVal=BX.Max||BQ.mMaxSizeVal;BQ.mMinSizeVal=BX.Min||BQ.mMinSizeVal;BQ.mCustomScaleForSizeBy=BX.mCustomScaleForSizeBy||BX.CustomScaleForSizeBy;}var BN=this.mChartContextPtr,BW=BN.GetGraphMajorType();BQ.mHasSizeBy=(BW===Aq.GMT_BUBBLE)||BQ.mHasSizeBy;var BL=1,BY=2,BV=4,BJ=8;BQ.AxisLayout=BS.AxisLayout||(BL|BY);if(BS.ElementInfo){var BP=BQ.mElementsInfo.Max,BM=BQ.mElementsInfo.Min,BK=BS.ElementInfo;if(BK.Max){var BU=BK.Max;BP.Mode=BU.Mode||BP.Mode;BP.Size=BU.Size||BP.Size;}if(BK.Min){var BO=BK.Min;BM.Mode=BO.Mode||BM.Mode;BM.Size=BO.Size||BM.Size;}}}function r(BR){var BN=this.mChartContextPtr,BQ=BN.getUniformAxisContext();if(BR.UniformAxisPaddings){var BO=BR.UniformAxisPaddings;this.UpdateUniformAxisMargins(BO);if(BN.IsGridChart()===false){var BU=BQ.ValueAxis,BL=BU.X1,BK=BU.X2,BT=BU.Y1,BS=BU.Y2;BS.Trims[1]=BO.ySecondaryHighTrim;BK.Trims[1]=BO.xSecondaryHighTrim;BS.Trims[0]=BO.ySecondaryLowTrim;BK.Trims[0]=BO.xSecondaryLowTrim;BT.Trims[1]=BO.yPrimaryHighTrim;BL.Trims[1]=BO.xPrimaryHighTrim;BT.Trims[0]=BO.yPrimaryLowTrim;BL.Trims[0]=BO.xPrimaryLowTrim;BK.perCell=BO.x2PerCell;BS.PerCell=BO.y2PerCell;BT.PerCell=BO.yPerCell;BL.PerCell=BO.xPerCell;}if(BN.IsBubbleChart()===false&&BN.IsScatterChart()===false){var BP=BQ.CategoryAxis,BM=BP.X,BJ=BP.Y;BM.Trims[0]=BO.xCaLowTrim;BM.Trims[1]=BO.xCaHighTrim;BJ.Trims[0]=BO.yCaLowTrim;BJ.Trims[1]=BO.yCaHighTrim;}}BQ.mIsAxisTitleAndLabelRequired=false;}function BE(BJ){switch(BJ){case BA.DssGraphY1Body:case BA.DssGraphY2Body:case BA.DssGraphY3Body:case BA.DssGraphY4Body:case BA.DssGraphX1Body:case BA.DssGraphX2Body:return true;}return false;}function AG(){var BJ=this.mChartContextPtr.mGraphType;switch(BJ){case A8.DssGraphTypeX_Y_Scatter:case A8.DssGraphTypeDualAxis_X_Y_Scatter:case A8.DssGraphTypeX_Y_Scatter_with_Labels:case A8.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case A8.DssGraphTypeBubble:case A8.DssGraphTypeBubble_DualAxis:case A8.DssGraphTypeBubble_With_Labels:case A8.DssGraphTypeBubble_DualAxis_With_Labels:case A8.DssGraphTypeHorizontal_Line_Absolute:case A8.DssGraphTypeHorizontal_Line_Stacked:case A8.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case A8.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case A8.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case A8.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case A8.DssGraphTypeHorizontal_Line_Percent:case A8.DssGraphTypeHorizontal_Bar_Side_by_Side:case A8.DssGraphTypeHorizontal_Bar_Stacked:case A8.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case A8.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case A8.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case A8.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case A8.DssGraphTypeHorizontal_Bar_Percent:case A8.DssGraphTypeHorizontal_Bar_Absolute:case A8.DssGraphTypeHorizontal_Area_Absolute:case A8.DssGraphTypeHorizontal_Area_Stacked:case A8.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case A8.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case A8.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case A8.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case A8.DssGraphTypeHorizontal_Area_Percent:case A8.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case A8.DssGraphTypeHorizontal_Line_DualAxis_Percent:case A8.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function A1(){switch(this.mChartContextPtr.mGraphType){case A8.DssGraphTypeHorizontal_Line_Absolute:case A8.DssGraphTypeHorizontal_Line_Stacked:case A8.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case A8.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case A8.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case A8.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case A8.DssGraphTypeHorizontal_Line_Percent:case A8.DssGraphTypeHorizontal_Bar_Side_by_Side:case A8.DssGraphTypeHorizontal_Bar_Stacked:case A8.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case A8.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case A8.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case A8.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case A8.DssGraphTypeHorizontal_Bar_Percent:case A8.DssGraphTypeHorizontal_Bar_Absolute:case A8.DssGraphTypeHorizontal_Area_Absolute:case A8.DssGraphTypeHorizontal_Area_Stacked:case A8.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case A8.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case A8.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case A8.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case A8.DssGraphTypeHorizontal_Area_Percent:case A8.DssGraphTypeGridChart:case A8.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case A8.DssGraphTypeHorizontal_Line_DualAxis_Percent:case A8.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function Ar(BJ,BK){if(BJ){return AG.call(this)?1:0;}return A1.call(this)?0:1;}function Ac(BL,BP,BK,BM,BO,BQ){BL.mDataAreaBottomMargin=BL.mDataAreaTopMargin=BL.mDataAreaRightMargin=BL.mDataAreaLeftMargin=0;return ;var BJ,BN;if(BO){if(BM>=0){BL.mDataAreaLeftMargin=BP.x;}else{if(BL.mDataAreaLeftMargin<BP.x){BL.mDataAreaLeftMargin=BP.x;}}BL.mDataAreaRightMargin=BK-(BP.x+BP.width);BL.mDataAreaLeftMargin=Math.max(0,BL.mDataAreaLeftMargin);BL.mDataAreaRightMargin=Math.max(0,BL.mDataAreaRightMargin);BJ=BL.mDataAreaLeftMargin;BN=BL.mDataAreaRightMargin;}else{BL.mDataAreaTopMargin=BP.y;BL.mDataAreaBottomMargin=BK-(BP.y+BP.height);if(BL.mDataAreaBottomMargin<0){BL.mDataAreaBottomMargin=0;}BL.mDataAreaTopMargin=Math.max(0,BL.mDataAreaTopMargin);BL.mDataAreaBottomMargin=Math.max(0,BL.mDataAreaBottomMargin);BJ=BL.mDataAreaBottomMargin;BN=BL.mDataAreaTopMargin;}}function AE(){var BK,BL=this.mChartContextPtr;if(BL.mIsGraphMatrix){var BJ=BL.getUniformAxisContext();BK=BJ.ValueAxis.Y2;return BK.Metrics.length>0;}return BL.IsDualAxis();}function g(BL,BM){if(Ar.call(this,BL,BM)===0){return true;}var BN=this.mChartContextPtr,BJ=BN.getValueAxisKeyFromLayout(BL,BM),BK=BN.getUniformAxisContext().ValueAxis;return BK[BJ].Metrics.length>0;}function Ax(){var BK=this.mChartContextPtr,BJ;if(BK.mIsGraphMatrix){BK.mAbsoluteFontLineSize=true;BK.mManualLayoutMode=false;this.mFontAntiAlias=true;BK.mIsFontAntiAlias=this.mFontAntiAlias;return ;}if(!BK.mIsTimeSeriesChart){BJ=BK.GetProperty(A9.DssGraphLockFontSize,Ab);if(BJ){BK.mAbsoluteFontLineSize=(BJ!==AP);}else{BK.mAbsoluteFontLineSize=true;}BJ=BK.GetProperty(A9.DssGraphSeriesByColumn,Ab);if(BJ){this.mDatasetPtr.mSeriesByColumn=(BJ!==AP);}else{this.mDatasetPtr.mSeriesByColumn=true;}}BJ=BK.GetProperty(A9.DssGraphAutoArrange,Ab);if(BJ){BK.mManualLayoutMode=(BJ===AP);if(BJ===AP){BJ=BK.GetProperty(Av.DssGraphInfoRecalculateChartFrame,Ab);if(BJ){BK.mRecalculateFrame=(BJ!==AP);}else{BK.mRecalculateFrame=false;}}}else{BK.mManualLayoutMode=false;}BJ=BK.GetProperty(A9.DssGraphFontAntiAlias,Ab);if(BJ){this.mFontAntiAlias=BJ;}else{this.mFontAntiAlias=true;}BK.SetFontAntiAlias(this.mFontAntiAlias);}function A5(BM,BL,BN,BK){BL=(BL!==undefined)?BL:-1;BN=(BN!==undefined)?BN:true;this.mAxisLayoutHighPadding=0;this.mAxisLayoutLowPadding=0;if(g.call(this,BM,BN)===false){BK.CanSkip=true;return ;}var BO=this.mChartContextPtr;BK.IsPrimary=BN;BK.MaxLabelLength=BL;var BJ=BO.getUniformAxisContext();BJ.mIsAxisTitleAndLabelRequired=true;BO.mIsEntireChart=false;Ax.call(this);if(g.call(this,BM,BN)===false){BK.CanSkip=true;}}function BI(){this.mAxisLayoutHighPadding=this.mUniformAxisPtr.mHighTrim||0;this.mAxisLayoutLowPadding=this.mUniformAxisPtr.mLowTrim||0;}function AR(BN,BM,BJ,BO,BL){if(this.mVisualMode===A0){BL.CanSkip=true;return ;}if(BN){if(BM<=AT&&AG.call(this)){BL.CanSkip=true;return ;}}else{if(BJ<=AT&&A1.call(this)===false){BL.CanSkip=true;return ;}}var BP=this.mChartContextPtr;BP.SetGraphSize(BM,BJ);BP.mIsEntireChart=false;var BK=BP.getUniformAxisContext();BK.mIsAxisTitleAndLabelRequired=true;if(BO===undefined){BO=true;}BL.IsPrimary=BO;if(BL===undefined){BL={SkipLayout:false};}else{if(BL&&BL.SkipLayout){BL.SkipLayout=BL.SkipLayout&&(this.mUniformAxisPtr!==null);}else{BL.SkipLayout=false;}}BP.populateCanvas();}function b(BK,BR){var BL=200,BO=201,BJ=202,BU=4,BM=1,BV=24,BN=this.mChartContextPtr,BT=BN.GetGraphMatrixContext(),BP=BN.mGraphType;BN.mGraphType=BK;var BS=BN.GetGraphMajorType(),BQ=BT.isCombinationChart()||BR===203;if(BR===BL){if(BS===Aq.GMT_CATEGORY){if(BN.IsBarChart()){switch(BK){case A8.DssGraphTypeVertical_Bar_Absolute:case A8.DssGraphTypeVertical_Bar_Side_by_Side:BK=A8.DssGraphTypeVertical_Line_Absolute;break;case A8.DssGraphTypeVertical_Bar_Stacked:BK=A8.DssGraphTypeVertical_Line_Stacked;break;case A8.DssGraphTypeVertical_Bar_BiPolar_Absolute:BK=A8.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case A8.DssGraphTypeVertical_Bar_BiPolar_Stacked:BK=A8.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Absolute:BK=A8.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Stacked:BK=A8.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case A8.DssGraphTypeVertical_Bar_Percent:BK=A8.DssGraphTypeVertical_Line_Percent;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Percent:BK=A8.DssGraphTypeVertical_Line_DualAxis_Percent;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;case A8.DssGraphTypeHorizontal_Bar_Percent:BK=A8.DssGraphTypeHorizontal_Line_Percent;break;case A8.DssGraphTypeHorizontal_Line_Percent:BK=A8.DssGraphTypeHorizontal_Line_Percent;break;case A8.DssGraphTypeHorizontal_Bar_Absolute:case A8.DssGraphTypeHorizontal_Bar_Side_by_Side:BK=A8.DssGraphTypeHorizontal_Line_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_Stacked;break;case A8.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;}}else{if(BN.IsAreaChart()){switch(BK){case A8.DssGraphTypeVertical_Area_Absolute:BK=A8.DssGraphTypeVertical_Line_Absolute;break;case A8.DssGraphTypeVertical_Area_Stacked:BK=A8.DssGraphTypeVertical_Line_Stacked;break;case A8.DssGraphTypeVertical_Area_BiPolar_Absolute:BK=A8.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case A8.DssGraphTypeVertical_Area_BiPolar_Stacked:BK=A8.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case A8.DssGraphTypeVertical_Area_DualAxis_Absolute:BK=A8.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case A8.DssGraphTypeVertical_Area_DualAxis_Stacked:BK=A8.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case A8.DssGraphTypeVertical_Area_Percent:BK=A8.DssGraphTypeVertical_Line_Percent;break;case A8.DssGraphTypeHorizontal_Area_Absolute:BK=A8.DssGraphTypeHorizontal_Line_Absolute;break;case A8.DssGraphTypeHorizontal_Area_Stacked:BK=A8.DssGraphTypeHorizontal_Line_Stacked;break;case A8.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case A8.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case A8.DssGraphTypeHorizontal_Area_Percent:BK=A8.DssGraphTypeHorizontal_Line_Percent;break;case A8.DssGraphTypeVertical_Area_DualAxis_Percent:BK=A8.DssGraphTypeVertical_Line_DualAxis_Percent;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Percent:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}else{if(BR===BO||BR===BJ){if(BN.IsAreaChart()){switch(BK){case A8.DssGraphTypeVertical_Area_Absolute:BK=A8.DssGraphTypeVertical_Line_Absolute;break;case A8.DssGraphTypeVertical_Area_Stacked:BK=A8.DssGraphTypeVertical_Line_Stacked;break;case A8.DssGraphTypeVertical_Area_BiPolar_Absolute:BK=A8.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case A8.DssGraphTypeVertical_Area_BiPolar_Stacked:BK=A8.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case A8.DssGraphTypeVertical_Area_DualAxis_Absolute:BK=A8.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case A8.DssGraphTypeVertical_Area_DualAxis_Stacked:BK=A8.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case A8.DssGraphTypeVertical_Area_Percent:BK=A8.DssGraphTypeVertical_Line_Percent;break;case A8.DssGraphTypeHorizontal_Area_Absolute:BK=A8.DssGraphTypeHorizontal_Line_Absolute;break;case A8.DssGraphTypeHorizontal_Area_Stacked:BK=A8.DssGraphTypeHorizontal_Line_Stacked;break;case A8.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case A8.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case A8.DssGraphTypeHorizontal_Area_Percent:BK=A8.DssGraphTypeHorizontal_Line_Percent;break;case A8.DssGraphTypeVertical_Area_DualAxis_Percent:BK=A8.DssGraphTypeVertical_Line_DualAxis_Percent;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Percent:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BN.IsBarChart()){switch(BK){case A8.DssGraphTypeVertical_Bar_Absolute:case A8.DssGraphTypeVertical_Bar_Side_by_Side:BK=A8.DssGraphTypeVertical_Line_Absolute;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Stacked:BK=A8.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case A8.DssGraphTypeVertical_Bar_Stacked:BK=A8.DssGraphTypeVertical_Line_Stacked;break;case A8.DssGraphTypeVertical_Bar_BiPolar_Stacked:BK=A8.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case A8.DssGraphTypeHorizontal_Bar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_Stacked;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case A8.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case A8.DssGraphTypeVertical_Bar_Percent:BK=A8.DssGraphTypeVertical_Line_Percent;break;case A8.DssGraphTypeHorizontal_Bar_Percent:BK=A8.DssGraphTypeHorizontal_Line_Percent;break;case A8.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case A8.DssGraphTypeVertical_Bar_BiPolar_Absolute:BK=A8.DssGraphTypeVertical_Bar_BiPolar_Absolute;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case A8.DssGraphTypeVertical_Bar_DualAxis_Absolute:BK=A8.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case A8.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case A8.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_Side_by_Side:case A8.DssGraphTypeHorizontal_Bar_Absolute:BK=A8.DssGraphTypeHorizontal_Line_Absolute;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Percent:BK=A8.DssGraphTypeVertical_Line_DualAxis_Percent;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BR===BU||BR===BM||BR===BV){if(BN.IsAreaChart()){switch(BK){case A8.DssGraphTypeVertical_Area_Absolute:BK=A8.DssGraphTypeVertical_Line_Absolute;break;case A8.DssGraphTypeVertical_Area_Stacked:BK=A8.DssGraphTypeVertical_Line_Stacked;break;case A8.DssGraphTypeVertical_Area_BiPolar_Absolute:BK=A8.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case A8.DssGraphTypeVertical_Area_BiPolar_Stacked:BK=A8.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case A8.DssGraphTypeVertical_Area_DualAxis_Absolute:BK=A8.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case A8.DssGraphTypeVertical_Area_DualAxis_Stacked:BK=A8.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case A8.DssGraphTypeVertical_Area_Percent:BK=A8.DssGraphTypeVertical_Line_Percent;break;case A8.DssGraphTypeHorizontal_Area_Absolute:BK=A8.DssGraphTypeHorizontal_Line_Absolute;break;case A8.DssGraphTypeHorizontal_Area_Stacked:BK=A8.DssGraphTypeHorizontal_Line_Stacked;break;case A8.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case A8.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case A8.DssGraphTypeHorizontal_Area_Percent:BK=A8.DssGraphTypeHorizontal_Line_Percent;break;case A8.DssGraphTypeVertical_Area_DualAxis_Percent:BK=A8.DssGraphTypeVertical_Line_DualAxis_Percent;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Percent:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BN.IsBarChart()){switch(BK){case A8.DssGraphTypeVertical_Bar_Side_by_Side:case A8.DssGraphTypeVertical_Bar_Absolute:BK=A8.DssGraphTypeVertical_Line_Absolute;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Absolute:case A8.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:BK=A8.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case A8.DssGraphTypeVertical_Bar_BiPolar_Absolute:case A8.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:BK=A8.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_Side_by_Side:case A8.DssGraphTypeHorizontal_Bar_Absolute:BK=A8.DssGraphTypeHorizontal_Line_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case A8.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case A8.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Stacked:BK=A8.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case A8.DssGraphTypeVertical_Bar_Stacked:BK=A8.DssGraphTypeVertical_Line_Stacked;break;case A8.DssGraphTypeVertical_Bar_BiPolar_Stacked:BK=A8.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case A8.DssGraphTypeHorizontal_Bar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_Stacked;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case A8.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case A8.DssGraphTypeVertical_Bar_Percent:BK=A8.DssGraphTypeVertical_Line_Percent;break;case A8.DssGraphTypeHorizontal_Bar_Percent:BK=A8.DssGraphTypeHorizontal_Line_Percent;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Percent:BK=A8.DssGraphTypeVertical_Line_DualAxis_Percent;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BQ){if(BN.IsBarChart()){switch(BK){case A8.DssGraphTypeVertical_Bar_Absolute:case A8.DssGraphTypeVertical_Bar_Side_by_Side:BK=A8.DssGraphTypeVertical_Line_Absolute;break;case A8.DssGraphTypeVertical_Bar_Stacked:BK=A8.DssGraphTypeVertical_Line_Stacked;break;case A8.DssGraphTypeVertical_Bar_BiPolar_Absolute:BK=A8.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case A8.DssGraphTypeVertical_Bar_BiPolar_Stacked:BK=A8.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case A8.DssGraphTypeVertical_Bar_DualAxis_Absolute:BK=A8.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Stacked:BK=A8.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case A8.DssGraphTypeVertical_Bar_Percent:BK=A8.DssGraphTypeVertical_Line_Percent;break;case A8.DssGraphTypeHorizontal_Bar_Percent:BK=A8.DssGraphTypeHorizontal_Line_Percent;break;case A8.DssGraphTypeHorizontal_Bar_Absolute:case A8.DssGraphTypeHorizontal_Bar_Side_by_Side:BK=A8.DssGraphTypeHorizontal_Line_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_Stacked;break;case A8.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case A8.DssGraphTypeHorizontal_Line_Percent:BK=A8.DssGraphTypeHorizontal_Line_Percent;break;case A8.DssGraphTypeVertical_Bar_DualAxis_Percent:BK=A8.DssGraphTypeVertical_Line_DualAxis_Percent;break;case A8.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BN.IsAreaChart()){switch(BK){case A8.DssGraphTypeVertical_Area_Absolute:BK=A8.DssGraphTypeVertical_Line_Absolute;break;case A8.DssGraphTypeVertical_Area_Stacked:BK=A8.DssGraphTypeVertical_Line_Stacked;break;case A8.DssGraphTypeVertical_Area_BiPolar_Absolute:BK=A8.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case A8.DssGraphTypeVertical_Area_BiPolar_Stacked:BK=A8.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case A8.DssGraphTypeVertical_Area_DualAxis_Absolute:BK=A8.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case A8.DssGraphTypeVertical_Area_DualAxis_Stacked:BK=A8.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case A8.DssGraphTypeVertical_Area_Percent:BK=A8.DssGraphTypeVertical_Line_Percent;break;case A8.DssGraphTypeHorizontal_Area_Absolute:BK=A8.DssGraphTypeHorizontal_Line_Absolute;break;case A8.DssGraphTypeHorizontal_Area_Stacked:BK=A8.DssGraphTypeHorizontal_Line_Stacked;break;case A8.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case A8.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BK=A8.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case A8.DssGraphTypeHorizontal_Area_Percent:BK=A8.DssGraphTypeHorizontal_Line_Percent;break;case A8.DssGraphTypeVertical_Area_DualAxis_Percent:BK=A8.DssGraphTypeVertical_Line_DualAxis_Percent;break;case A8.DssGraphTypeHorizontal_Area_DualAxis_Percent:BK=A8.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}}}BN.mGraphType=BP;return BK;}function H(BN,BM,BK){var BJ=BK.length,BL;for(BL=0;BL<BJ;++BL){if(BK[BL].si===BN&&BK[BL].gi===BM){return true;}}return false;}function o(BM,BX,BR,BP,BO,BW){var BY={},BN=this.mChartContextPtr,BQ,BU;if(BN.mCanvas===null){BN.populateCanvas();}BM=BM||1014;BX=BX||694;BY.GW=BM;BY.GH=BX;BN.SaveSurfaceToObject(BY);var BV=this.mChartContextPtr.GetProperty(A9.DssGraphSeriesByColumn,Ab),BT,BJ;if(BV&&BV!==AP){BT=BP;BJ=BR;}else{BT=BR;BJ=BP;}var BK=[];BU=BK.length;if(BU>0){BY.Areas=[];for(BQ=0;BQ<BU;++BQ){var BL={};var BS=new As.TripleId({ObjectId:BK[BQ].GetObjectID(),SeriesId:BK[BQ].GetSeriesID(),GroupId:BK[BQ].GetGroupID()});if(BS.mObjectId!==BA.DssGraphRiser&&BS.mObjectId!==BA.DssGraphDataMarker&&BS.mObjectId!==BA.DssGraphPieSlice&&BS.mObjectId!==BA.DssGraphLegendMarker&&BS.mObjectId!==BA.DssGraphLegendText&&BS.mObjectId!==BA.DssGraph2DO1Label){continue;}if(!H.call(this,BS.mSeriesId,BS.mGroupId,BW)){continue;}BL.OID=BS.mObjectId;BL.SID=BS.mSeriesId;BL.GID=BS.mGroupId;BL.Shape=BK[BQ].GetShape();BL.Coords=BK[BQ].GetCoordinates();BY.Areas.push(BL);}}if(BW.length>0){BU=BW.length;BY.Selected=[];for(BQ=0;BQ!==BU;++BQ){BY.Selected.push(BW[BQ].sid);BY.Selected.push(BW[BQ].gid);}}return BY;}function B(BO){if(BO){var BN=this.mChartContextPtr,BL=this.mChartManagerPtr;if(!(BN&&BL&&BN.mIsGraphMatrix)){return ;}if(BN.mPartialRendering&&(BN.IsBubbleChart()||BN.IsScatterChart())){var BK=BL.GetGraphObjectManager(As.PlotId0),BJ,BM=false;if(BK&&BK.waitingList){BJ=BK.waitingList;if(BM){BO.hiddenItems=BO.hiddenItems||[];BJ.forEach(function(BP){BO.hiddenItems.push({x:BP.Position.x,y:BP.Position.y,shp:BP.Shape,sz:BP.Size,id:null});});}else{BO.hiddenItems=BK.waitingList;delete BK.waitingList;}}}}}function N(){this.mDatasetPtr.finalize();var BJ=this.mChartManagerPtr;BJ.Draw();}function A2(){var BJ=this.mChartContextPtr;if(BJ.GetGraphMatrixGraphMajorType()===t._AREA&&BJ.IsVertical()){return 1;}return 2;}function AL(BK,BM,BL,BJ){if(BL===null||BL===undefined){return ;}if(BJ){if(BM){BL.ResetAxisPadding();BL.SetDataset(this.mDatasetPtr);BL.AdjustTitleArea(BK);BL.AdjustDataArea(BK,Y,Y,false);}else{BL.TrimAxisPadding(BK);BL.ReserveTitleAndLabels(BK,Y,Y);BL.AdjustDeviceDataArea(BK,false);}}else{if(BM){BL.TrimAxisPadding(BK,false);BL.SetDeviceDataArea(BK);BL.ResetAxisPadding();BL.GenerateMapAndList();}else{BL.TrimAxisPadding(BK,false);BL.SetDeviceDataArea(BK);BL.AdjustDeviceDataArea(BK,true);BL.UpdateTitleAndLabelArea(BK);BL.GenerateGridLinesEx();}}}function C(BK,BR,BQ){var BL=this.mChartContextPtr;if(!BL.mIsGraphMatrix){return null;}var BM=null;if(BR){BM=this.mUniformAxisPtr;}else{var BJ=[BA.DssGraphO1Body,BA.DssGraphX1Body,BA.DssGraphY1Body,BA.DssGraphY2Body];if(!BQ&&!BL.IsDualAxis()){BQ=true;}if(BL.GetGraphType()===A8.DssGraphTypeGridChart){var BN=new As.CategoryAxisInfo(),BP=this.mDatasetPtr.mSeriesByColumn;if(!BK){BN.ToY(!BP);}else{BN.ToX(BP);}AZ.reset(AH,BN.mId.mObjectId,BN.mId.mSeriesId,BN.mId.mGroupId);}else{var BO;if(BL.IsVertical()){BO=BK?0:2;}else{BO=BK?2:0;}if(!BQ){BO++;}AZ.reset(AH,BJ[BO],0,-3);}BM=this.mChartManagerPtr.GetGraphObjectManager(AH,true);}return BM;}function BC(BL){var BQ=this.mChartContextPtr,BJ=false;if(BQ.mIsTimeSeriesChart){BJ=true;}else{var BN=BQ.GetProperty(A9.DssGraph2DOrdSpaceMode,As.gNullTripleId);if(BN){BJ=BN;}}var BK,BM=BQ.GetGraphType();if(BM>=A8.DssGraphTypeVertical_Line_Absolute&&BM<=A8.DssGraphTypeHorizontal_Line_Percent){BK=true;}var BP=this.mDatasetPtr.GetGroupCount(),BO=(BP<=1&&BK);BL.mAxisCross=(BJ&&BK&&!BO);}function AO(BJ,BP,BQ){var BO=BP[BJ.toUpperCase()],BL=BO.CondenseLabel,BM=BQ.PrimaryMetricIndex,BN=BM.length>=1?BM[0]:-1,BK=BL[BN],BR=BQ.getCondenseStatus();if(BK!==null&&BK!==undefined){if(BR!==undefined){if(BR!==BK){BQ.checkCondense(BK);}}}}function AQ(BQ,BT){BT=(BT!==undefined)?BT:true;var Bc="X1",Ba="X1",BN=C.call(this,BQ,true,BT),BO=0,BY=BQ?Aw.AD_X:Aw.AD_Y,BL=this.mChartContextPtr,BS=BL.getUniformAxisContext(),BR=BS.ValueAxis;var BU=Ar.call(this,BQ,BT)===BO,BW,BX,BM,BZ,BV;if(BN){if(BU===false){BV=BN.getCondenseStatus();if(BV===null){BW=Bc;AO.call(this,BW,BR,BN);}}return BN;}var BP=1;if(BU){var BJ=BL.GetGraphType();if(BJ===A8.DssGraphTypeGridChart){var Bb=this.mDatasetPtr.mSeriesByColumn;if(BQ){Ba=!Bb?"O1":"O2";}else{Ba=Bb?"O1":"O2";Bc="Y1";}}else{Ba="O1";if(!BQ){Bc="Y1";}}if(Ba==="O1"){BL.caKeyMap.c1=Bc;}else{BL.caKeyMap.c2=Bc;}BN=this.mUniformAxisPtr=new As.CategoryAxis({TripleId:BL.getAxisTripleId(Ba),mChartContextPtr:this.mChartContextPtr,GraphObjectManager:this.mChartManagerPtr,AxisLabelsLocation:f.ALL_BOTTOM,AxisDirection:BY,IsUA:true});BC.call(this,BN);BX=S.call(this,Bc);BN.SetIntegrity(BX);}else{if(!BQ){Bc="Y1";Ba="Y1";}var BK=BQ?BR.X1:BR.Y1;if(BT===false){Bc=BQ?"X2":"Y2";BK=BR[Bc];Ba=BQ?"X2":"Y2";}BM=BK.Metrics;BN=this.mUniformAxisPtr=new As.ValueAxis({mChartContextPtr:this.mChartContextPtr,TripleId:BL.getAxisTripleId(Ba),GraphObjectManager:this.mChartManagerPtr,Min:BK.Min,Max:BK.Max,LargerGridInterval:false,IsPercent:BL.IsPercentChart(),AxisDirection:BY,IsShown:true,PrimaryMetricIndex:BM,IsUA:true});BW=Bc;AO.call(this,BW,BR,BN);BZ=BR[BW.toUpperCase()];if(BZ.Valid===false){BN.SetIntegrity(BP);}else{BW=Bc;if(BW==="x"){BW="X1";}BX=S.call(this,BW);BN.SetIntegrity(BX);}}BN.mIsUniformAxis=true;BN.Key=Bc;return BN;}function AI(BR,BQ,BJ,BM){var BL,BN,BP,BK=this.mChartContextPtr,BO=BK.getUniformAxisContext();if(BQ===false){if(BR){BL=BJ?"X1":"Y1";}else{BL=BJ?"X2":"Y2";}BN=BO.ValueAxis[BL];BN.Trims[0]=BM.mLowTrim||0;BN.Trims[1]=BM.mHighTrim||0;}else{BL=BJ?"X":"Y";BP=BO.CategoryAxis[BL];BP.Trims[0]=BM.mLowTrim||0;BP.Trims[1]=BM.mHighTrim||0;}}function L(BK,BO,BM,BN){if(BN===undefined){BN=true;}this.mChartContextPtr.resetCanvas();this.mDatasetPtr.finalize();var BL=AQ.call(this,BO,BN);BL.SetDeviceDataArea(BK);AL.call(this,BK,BM,BL,false);BL.resetRestrictSpace();AI.call(this,BN,BM,BO,BL);var BJ=Ar.call(this,BO,BN)===1;if(BJ){this.mDatasetPtr.saveShownLabels(BL);}BL.Draw();}function F(BO,BP,BW){var BM=this.mChartContextPtr,BQ=BM.mDataset,BY,BT=BM.getUniformAxisContext(),BX=BT.ValueAxis,BL=BP?"X":"Y",BV;BL+=BW?"1":"2";BV=BX[BL].Max;var BS=true;var BK=BQ.showDatalabels();if(BK){BS=(BQ.dataLabelStyle===2);}var BJ=BV,BR,BU=null;if(BS){AN.restore();this.mDatasetPtr.getValueAxisNumberFormat(AN,BO);var BN=new As.NumberObject({TripleId:new As.TripleId({ObjectId:BA.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,Number:BJ,NumberFormat:AN,GraphCollectionObject:BU,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(BN){BR=BN.mText;}BY=BN;}else{BR=BQ.GetTextLabel(0,0);BY=new As.TextObject({TripleId:new As.TripleId({ObjectId:BA.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,GraphCollectionObject:BU});}if(BY){BY.SetText(BR);}return BY;}function Aj(BM,Bm,BL,BV,Bg){var BO=this.mChartContextPtr,BZ=this.mDatasetPtr,Bf,Bd=BO.getUniformAxisContext(),BT=this.mUniformAxisPtr,BP=new As.Rect2D(),BR=false,Bi,BK,Bb,BW,BQ,BY,BX,BS,Bc,BU,BN,BJ,Bj;BP.ResetRect(BM);Bf=BO.GetProperty(Av.DSSGraphMatrixDataLabelRotated,As.gNullTripleId);var Ba=BZ.showDatalabels();if(Ba&&BO.IsBarChart()&&Bf!==null){var Be=Bf,Bl=Bd.ValueAxis,Bh=BV?"X":"Y";Bh+=Bg?"1":"2";Bi=Bl[Bh].Max;BJ=F.call(this,Bm,BV,Bg);if(BV){BJ.GetFormatFont().mFontRotation=I.FR_NORMAL;}else{if(Be){BJ.GetFormatFont().mFontRotation=I.FR_90;}else{BJ.GetFormatFont().mFontRotation=I.FR_NORMAL;}}BK=BJ.GetBoundingRect();Bb=5;BW=BT.GetMaxTick();BQ=BT.GetMinTick();BY=BT.GetPositionByValue(BW);BX=BT.GetPositionByValue(BQ);BS=BT.GetPositionByValue(Bi);if(BV){if(BL-BS<Bb*2+BK.width){Bc=BL-(Bb*2+BK.width);BU=(BW-BQ)/(Bi-BQ);BN=BY-BX-BU*(Bc-BX);BN+=2;var Bk=(Bc>BX);if(Bk&&BN/(BY-BX)<0.2){BP.width-=BN;BR=true;BM.ResetRect(BP);BT.dataLabelPadding=BN;}}}else{if(Bi>0&&BS<Bb*2+BK.height){Bc=Bb*2+BK.height;BU=(BW-BQ)/(Bi-BQ);BN=BX-BY-BU*(BX-Bc);BN+=2;Bj=(Bc>BS);if(Bj&&BN/(BX-BY)<0.2){BP.y+=BN;BP.height-=BN;BR=true;BM.ResetRect(BP);BT.dataLabelPadding=BN;}}}}return BR;}function A6(BL,Bh,BV,Bd){return Aj.call(this,BL,Bh,BV,true,Bd);var Bc,BM=0,BN=this.mChartContextPtr,BX=BN.mDataset,Bb=BN.getUniformAxisContext(),Be=this.mUniformAxisPtr,BO=new As.Rect2D(),BQ=false;BO.ResetRect(BL);Bc=BN.GetProperty(Av.DSSGraphMatrixDataLabelRotated,As.gNullTripleId);var BY=BX.showDatalabels();if(BY&&BN.IsBarChart()&&Bc!==null){var Bf=Bb.ValueAxis.X1.Max,BJ=F.call(this,Bh,true);if(!!BJ===false){return BQ;}BJ.GetFormatFont().mFontRotation=I.FR_NORMAL;var BK=BJ.GetBoundingRect(),BZ=5,BT=Be.GetMaxTick(),BP=Be.GetMinTick();var BW,BU,BR;BW=Be.GetPositionByValue(BT);BU=Be.GetPositionByValue(BP);BR=Be.GetPositionByValue(Bf);if(BV-BR<BZ*2+BK.width){var Ba=BV-(BZ*2+BK.width),BS=(BT-BP)/(Bf-BP);BM=BW-BU-BS*(Ba-BU);BM+=2;var Bg=(Ba>BU);if(Bg&&BM/(BW-BU)<0.2){BO.width-=BM;BQ=true;BL.ResetRect(BO);Be.dataLabelPadding=BM;}}}return BQ;}function P(BL,Bj,Bb,Bf){return Aj.call(this,BL,Bj,Bb,false,Bf);var BN=this.mChartContextPtr,BX=this.mDatasetPtr,Be,Bc=BN.getUniformAxisContext(),BT=this.mUniformAxisPtr,BO=new As.Rect2D(),BQ=false,Bh,Bg,BK,BZ,BU,BP,BW,BV,BR,Ba,BS,BM,BJ,Bi;BO.ResetRect(BL);Be=BN.GetProperty(Av.DSSGraphMatrixDataLabelRotated,As.gNullTripleId);var BY=BX.showDatalabels();if(BY&&BN.IsBarChart()&&Be!==null){var Bd=Be;Bh=Bc.ValueAxis.Y1.Max;Bg=Bc.ValueAxis.Y1.Min;BJ=F.call(this,Bj,false);if(Bd){BJ.GetFormatFont().mFontRotation=I.FR_90;}else{BJ.GetFormatFont().mFontRotation=I.FR_NORMAL;}BK=BJ.GetBoundingRect();BZ=5;BU=BT.GetMaxTick();BP=BT.GetMinTick();BW=BT.GetPositionByValue(BU);BV=BT.GetPositionByValue(BP);BR=BT.GetPositionByValue(Bh);if(Bh>0&&BR<BZ*2+BK.height){Ba=BZ*2+BK.height;BS=(BU-BP)/(Bh-BP);BM=BV-BW-BS*(BV-Ba);BM+=2;Bi=(Ba>BR);if(Bi&&BM/(BV-BW)<0.2){BO.y+=BM;BO.height-=BM;BQ=true;BL.ResetRect(BO);BT.dataLabelPadding=BM;}}}return BQ;}function a(BO,BQ,BP){var BM=false,BL=false,BJ=Ai.NONE,BK=this.mChartContextPtr.getUniformAxisContext(),BN=this.mUniformAxisSpace;if(BQ<0||BP<0){BN.width=BQ;BN.height=BP;return BJ;}BM=BQ===BN.width;BL=BP===BN.height;if(BM&&BL){BJ=Ai.KeepBoth;}else{if(BM){BJ=BP>BN.height?Ai.ExpandY:Ai.ShrinkY;}else{if(BL){BJ=BQ>BN.width?Ai.ExpandX:Ai.ShrinkX;}else{BJ=Ai.NONE;if(BO){BJ=BQ>BN.width?Ai.ExpandX:Ai.ShrinkX;}else{BJ=BP>BN.height?Ai.ExpandY:Ai.ShrinkY;}}}}BN.width=BQ;BN.height=BP;return BJ;}function E(BK,BJ){var BL=this.mChartContextPtr;if(this.mInitialized){return false;}if(BL.GetGraphMajorType()===Aq.GMT_HISTOGRAM){this.mDatasetPtr.mIsForHistogram=true;}BL.SetGraphSize(BK,BJ);Ax.call(this);this.mChartManagerPtr=new As.ChartManager({mTripleId:As.ManagerId,mDatasetPtr:this.mDatasetPtr,mChartContextPtr:BL});this.mChartManagerPtr.GenerateMapAndList();this.mInitialized=true;return true;}function z(BJ){switch(BJ){case A8.DssGraphTypeVertical_Area_Absolute:case A8.DssGraphTypeVertical_Area_Stacked:case A8.DssGraphTypeVertical_Area_BiPolar_Absolute:case A8.DssGraphTypeVertical_Area_BiPolar_Stacked:case A8.DssGraphTypeVertical_Area_DualAxis_Absolute:case A8.DssGraphTypeVertical_Area_DualAxis_Stacked:case A8.DssGraphTypeVertical_Area_Percent:case A8.DssGraphTypeHorizontal_Area_Absolute:case A8.DssGraphTypeHorizontal_Area_Stacked:case A8.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case A8.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case A8.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case A8.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case A8.DssGraphTypeHorizontal_Area_Percent:case A8.DssGraphTypeD3_Connect_Group_Areas:case A8.DssGraphTypeD3_Connect_Group_Ribbons:case A8.DssGraphTypeD3_Connect_Series_Areas:case A8.DssGraphTypeD3_Connect_Series_Ribbons:case A8.DssGraphTypeD3_Surface:case A8.DssGraphTypeD3_Surface_with_Sides:case A8.DssGraphTypeD3_Honeycomb_Surface:return 2;default:return 1;}}function u(BT,BR,BJ,BP){var BS=BT?BP:BJ,BQ=BT?BJ:BP,BK=BJ,BN=true,BL,BO,BM=AQ.call(this,BT,BR);BO=BM.resizeAction=a.call(this,BT,BS,BQ);if(BO===Ai.KeepBoth){return BM;}if(BJ>=0){BM.resetRestrictSpace(this.mUniformAxisSpace);}if(BT){BL=this.isAxisLabelRotated(BT,BR);if(BL){if(!(BO===Ai.ShrinkX||BO===Ai.ShrinkY||BO===Ai.ExpandY)){BK=-1;BN=false;}}else{if(BM.getLabelRotation()===I.FR_NORMAL&&BM.resizeAction===Ai.ExpandX){BK=BP;BN=false;}else{BK=-1;BN=false;}}}BM.updateMaxLabelLength(BK,BN);return BM;}function Ah(){if(this.mUniformAxisSpace===null){this.mUniformAxisSpace={width:0,height:0,x:0,y:0};this.mUniformAxisSpace.width=-1;}}mstrmojo.chart.ChartImpl=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.chart.ChartImpl",mFontAntiAlias:true,mDatasetPtr:null,mFormatManager:null,mChartManagerPtr:null,mOldChartManager:null,mChartContextPtr:null,mInitialized:false,mUniformAxisSpace:null,mUniformAxisPtr:null,mVisualMode:null,init:function Aa(BJ){this._super(BJ);this.mDatasetPtr=this.mDatasetPtr||BJ.DataSet||null;this.mChartContextPtr=this.addDisposable(new As.GenericContext(BJ));this.mFormatManager=this.mFormatManager||BJ.FormatManager||null;this.mVisualMode=Ad;},SetData:function AM(BK){var BJ=this.mDatasetPtr=BK;this.mChartContextPtr.mDataset=BK;BJ.SetFormatManager(this.mFormatManager);},GetOptions:function w(BJ,BN,BK,BM){var BL,BO=AZ.create(BJ,BN,BK);BL=this.mChartContextPtr.GetProperty(BM,BO);if(BL){return BL;}switch(BM){case A9.DssGraphAutoArrange:return{Value:this.mChartContextPtr.mManualLayoutMode,IsValid:true};case A9.DssGraphType:case A9.DssGraphEnhancedSeriesEffect:case A9.DssGraphCurvedLines:case A9.DssGraphFontAntiAlias:case A9.DssGraphInfoSuppressLastLevel:case A9.DssGraphInfoIncludeSubtotal:case A9.DssGraphInfoNestedLabel:case A9.DssGraphInfoNestedLabelBracket:case A9.DssGraph2DSplitYAutomatic:case A9.DssGraphAxisNumberFormat:return{Value:this.mChartContextPtr.GetProperty(BM,BO),IsValid:true};case A9.DssGraph2ScaleDirection:if(BJ===A9.DssGraphO1Body){return{Value:this.mDatasetPtr.mReverseGroup,IsValid:true};}break;case A9.DssGraphSeriesByColumn:return{Value:this.mDatasetPtr.mSeriesByColumn,IsValid:true};}return{IsValid:false};},OnRectangleSelection:function l(BK,BL){var BJ=[],BN=[],BO,BP=this.mChartManagerPtr,BM=new As.Rect2D({x:BK.x,y:BK.y,width:BK.w,height:BK.h});BO=BP.GetGraphObjectManager(As.PlotId0);if(!!BO===false){return BN;}BO.OnRectangleSelection(BM,BN,BL.outPut);return BN;},SaveImageToObject:function At(BN,BK,BO,BJ,BM,BL){BN=BN||1014;BK=BK||694;E.call(this,BN,BK);N.call(this);return o.call(this,BN,BK,BO,BJ,BM,BL);},PlainDraw:function J(BJ,BK){var BL=this.mChartContextPtr;BJ=BJ||BL.mGraphWidth;BK=BK||BL.mGraphHeight;return E.call(this,BJ,BK);},GetDataGroup:function s(){if(this.mChartContextPtr.mIsGraphMatrix){return this.mDatasetPtr.GetDataGroup();}return 1;},setCanvasProps:function A3(BJ){if(this.mChartContextPtr){this.mChartContextPtr.mCanvasInfo=Z.copy(BJ,this.mChartContextPtr.mCanvasInfo);}},SetFormatManager:function BB(BJ){this.mFormatManager=BJ;this.mChartContextPtr.SetFormatManager(BJ);this.mDatasetPtr.SetFormatManager(BJ);},IsDataEnough:function O(){if(this.mChartContextPtr.mIsGraphMatrix){return true;}var BK,BJ;BK=this.mDatasetPtr.GetGroupCount();BJ=z.call(this,this.mChartContextPtr.mGraphType);return BK>=BJ;},DrawUniformYAxis:function BH(BK,BS,BR,BQ){var BL=this.mChartContextPtr;BL.startTimer({functionName:"DrawUniformYAxis",purpose:"render uniform Y axis",caller:arguments.caller||"unknown"});BQ=BQ||{};AR.call(this,false,BK,BS,BR,BQ);if(BQ.CanSkip){BL.endTimer();return o.call(this,BK,BS,false,false,false,[]);}BR=BQ.IsPrimary;var BO=BL.getUniformAxisContext();if(BQ.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(g.call(this,false,BR)===false){BL.endTimer();return o.call(this,BK,BS,false,false,false,[]);}var BP=A1.call(this),BJ=Math.round(BQ.dataLabelPadding||0),BN=BO.mDataAreaTopMargin,BT=BS-BN-BO.mDataAreaBottomMargin,BM=new As.Rect2D({x:(BR?BK:0),y:BN,width:0,height:BT});if(BJ){BM.y=BJ;BM.height-=BJ;}L.call(this,BM,false,BP,BR);}BL.endTimer();return o.call(this,BK,BS,false,false,false,[]);},DrawUniformXAxis:function U(BK,BT,BR,BQ){var BL=this.mChartContextPtr;this.mChartContextPtr.startTimer({functionName:"DrawUniformXAxis",purpose:"render uniform X axis",caller:arguments.caller||"unknown"});BQ=BQ||{};AR.call(this,true,BK,BT,BR,BQ);if(BQ.CanSkip){BL.endTimer();return o.call(this,BK,BT,false,false,false,[]);}BR=BQ.IsPrimary;var BO=BL.getUniformAxisContext();if(BQ.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(g.call(this,true,BR)===false){BL.endTimer();return o.call(this,BK,BT,false,false,false,[]);}var BP=!AG.call(this),BJ=Math.round(BQ.dataLabelPadding||0),BU=BO.mDataAreaLeftMargin,BN=0,BS=BK-BU-BO.mDataAreaRightMargin,BM=new As.Rect2D({x:BU,y:(BR?BN:BT),width:BS,height:0});if(BJ){BM.width-=BJ;}L.call(this,BM,true,BP,BR);}BL.endTimer();return o.call(this,BK,BT,false,false,false,[]);},DrawDataAreaForUniformAxis:function AJ(BM,BJ,BL){this.mChartContextPtr.startTimer({functionName:"DrawDataAreaForUniformAxis",purpose:"render data area for the mini chart",caller:arguments.caller||"unknown"});if(this.mVisualMode===A0){return o.call(this,BM,BJ,false,false,false,[]);}var BO=this.mChartContextPtr,BK=BO.getUniformAxisContext();BK.xDataLabelPadding=BL.xDataLabelPadding||0;BK.yDataLabelPadding=BL.yDataLabelPadding||0;BK.mIsAxisTitleAndLabelRequired=false;this.mInitialized=false;BO.mIsEntireChart=false;this.mChartContextPtr.populateCanvas();E.call(this,BM,BJ);N.call(this);BK.xDataLabelPadding=0;BK.yDataLabelPadding=0;BO.endTimer();var BN=o.call(this,BM,BJ,false,false,false,[]);B.call(this,BN);return BN;},GetUniformAxisMargins:function D(){var BL=this.mChartContextPtr,BK=BL.getUniformAxisContext(),BJ={LEFT:BK.mDataAreaLeftMargin,RIGHT:BK.mDataAreaRightMargin,TOP:BK.mDataAreaTopMargin,BOTTOM:BK.mDataAreaBottomMargin};return BJ;},UpdateUniformAxisMargins:function A7(BK){var BL=this.mChartContextPtr,BJ=BL.getUniformAxisContext();if(BK.LEFT){BJ.mDataAreaLeftMargin=BK.LEFT;}if(BK.RIGHT){BJ.mDataAreaRightMargin=BK.RIGHT;}if(BK.TOP){BJ.mDataAreaTopMargin=BK.TOP;}if(BK.BOTTOM){BJ.mDataAreaBottomMargin=BK.BOTTOM;}},GetUniformAxisLabelsInfo:function BF(BL,BM,BK){var BJ=AQ.call(this,BL);if(BJ){return BJ.getUniformAxisLabelsInfo(BK);}return[];},GetPositionAtTick:function v(BN,BJ,BQ){var BK=this.mChartContextPtr,BW,BM,BT,BV;if(!BK.mIsGraphMatrix){return 0;}var BP=BK.getUniformAxisContext();if(!BP){return 0;}var BL=this.mUniformAxisPtr;if(BL){var BS=BL.mTripleId.mObjectId;if(BE.call(this,BS)){var BU=BL.mDeviceDataArea;if(!BL.GetTrimWithPadding()){var BR=new As.Rect2D();if(BJ){BW=BP.mDataAreaLeftMargin;BM=0;BT=BQ-BW-BP.mDataAreaRightMargin;BR.Reset(BW,BM,BT,0);}else{BW=0;BM=BP.mDataAreaTopMargin;BV=BQ-BM-BP.mDataAreaBottomMargin;BR.Reset(BW,BM,0,BV);}BL.TrimAxisPadding(BR,false);BL.SetDeviceDataArea(BR);BL.SetTrimWithPadding(false);}var BO=BL.GetPositionAtTick(BN);BL.SetDeviceDataArea(BU);return BO;}}return 0;},getZeroLineInfo:function AV(BN,BM,BL){var BK={};BK.Qualified=this.IsZeroBaseLineQualified(BN,BM);if(BK.Qualified){var BJ=this.mUniformAxisPtr;if(BJ===null||BJ===undefined){this.mUniformAxisPtr=AQ.call(this,BN,BM);}BK.Position=this.GetPositionAtTick(0,BN,BL);BK.Shapes=this.mDatasetPtr.GetShapesDistributionByValueAxis();}else{BK.Position=-1;BK.Shapes={};}return BK;},IsZeroBaseLineQualified:function j(BR,BP){BR=BR||false;if(BP===undefined){BP=true;}this.useOriginFormatForZeroLine=false;var BK=this.mChartContextPtr;if(!BK.mIsGraphMatrix){return false;}if(BK.IsBarChart()===false&&BK.IsLineChart()===false&&BK.IsAreaChart()===false){return false;}var BM=this.mUniformAxisPtr;if(BM){var BQ=BM.mTripleId.mObjectId;if(BE.call(this,BQ)){if(BM.isBaseLineQualified()){return true;}else{if(BK.isCombinationChart()===false){return false;}if(BM.liftedFromZero()){var BS=this.mDatasetPtr.GetShapesDistributionByValueAxis();var BJ=BS.Primary;if(BP&&BJ&&(BJ.BAR&&BJ.BAR.length||BJ.AREA&&BJ.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}BJ=BS.Secondary;if(!BP&&BJ&&(BJ.BAR&&BJ.BAR.length||BJ.AREA&&BJ.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}}}}}else{var BL,BO=BK.getUniformAxisContext();if(BO.ValueAxis){if(BP){BL=BR?"X1":"Y1";}else{BL=BR?"X2":"Y2";}var BN=BO.ValueAxis[BL];if(BN){return BN.Min<0&&BN.Max>0;}}}return false;},GetAxisLabelRotation:function A4(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}var BJ=this.mUniformAxisPtr;if(BJ===null){return false;}return BJ.getLabelRotation();},GetShownNumericTicks:function AB(BJ){var BL=this.mChartContextPtr;if(BL.mIsGraphMatrix){var BK=BL.GetGraphMatrixContext();return BJ?BK.mShownValueTickSet[0]:BK.mShownValueTickSet[1];}},SetShowNumericTicks:function m(BL,BJ){var BM=this.mChartContextPtr;if(BM.mIsGraphMatrix){var BK=BM.GetGraphMatrixContext();if(BJ){BK.mShownValueTickSet[0]=BL;}else{BK.mShownValueTickSet[1]=BL;}}},refreshChartComponents:function AK(BL){var BM=this.mChartContextPtr,BP=BM.IsVertical(),BS=BM.IsGridChart(),BW=BM.IsBarChart()||BM.IsAreaChart()||BM.IsLineChart(),BN=BM.IsBubbleChart()||BM.IsScatterChart();var BU=BL.size;if(BU){BM.SetGraphSize(BU.w,BU.h);}var Bb=BL.dataProvider;if(Bb){this.mDatasetPtr.refresh(Bb);}var BX="Y1",BZ,BJ=this.mChartManagerPtr,BK;var BO=BL.plot;if(BO){var Ba={mObjectId:20002,mSeriesId:0,mGroupId:-3};var BY=BJ.GetGraphObjectManager(Ba);if(BY){BY.refresh(BL.purpose,BO);}}var BQ=BL.primaryValueAxis;if(BQ){if(BW&&!BP){BX="X1";}BZ=BM.getAxisTripleId(BX);BK=BJ.GetGraphObjectManager(BZ);if(BK){BK.refresh(BL.purpose,BQ);}}BX="X1";var BV=BL.secondaryValueAxis;if(BV){if(BN){BX="X1";}BZ=BM.getAxisTripleId(BX);BK=BJ.GetGraphObjectManager(BZ);if(BK){BK.refresh(BL.purpose,BV);}}BX="O1";var BT=BL.primaryCategoryAxis;if(BT){BZ=BM.getAxisTripleId(BX);BK=BJ.GetGraphObjectManager(BZ);if(BK){BK.refresh(BL.purpose,BT);}}var BR=BL.secondaryCategoryAxis;if(BR){}},GetDataAreaPadding:function BG(){var BL=this.mChartContextPtr,Be=BL.GetGraphMatrixContext(),BT={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},Bc,Bb;if(!BL.mIsGraphMatrix){return BT;}var Bf=function(Bk){var Bj=0;Bk.forEach(function(Bl){Bj+=Bl;});return Bj;};var BS;var BK;if(Be.isCombinationChart()){var BZ=this.mDatasetPtr.GetSeriesByShape(),BN=0,BP=0,BU=0,Bi=0,BY=0;if(BZ.Circle){BP=BZ.Circle.length;}if(BZ.Square){BU=BZ.Square.length;}if(BZ.Line){BY=BZ.Line.length;}if(BZ.Area){Bi=BZ.Area.length;}if(BZ.Bar){BN=BZ.Bar.length;}BS=this.mDatasetPtr;BK=BS.GetDiscreteSeries();if(!(BP>0||BU>0||(Be.mHasSizeBy&&BY>0)||(!Be.mHasSizeBy&&(BY>0||Bi>0)&&BK.length>0&&(AW.HasArrayIntersection(BK,BZ.Line)||AW.HasArrayIntersection(BK,BZ.Area))))){return BT;}if(BN===BS.GetSeriesCount()){return BT;}}else{if(BL.IsBarChart()||BL.mGraphType===A8.DssGraphTypeGridChart||(Be.mMarkerShape===200&&BL.IsBubbleChart()===false&&BL.IsScatterChart()===false)){return BT;}}var Bd=BL.IsAreaChart()||BL.IsLineChart(),Bg=Be.isCombinationChart()===false;if(Bg===false){Bg=Bf([BN,Bi,BY,BU,BP])<=1;}if(Bg&&BL.GetGraphMajorType()===Aq.GMT_CATEGORY){var BV=2;BS=this.mDatasetPtr;BK=BS.GetDiscreteSeries();if(Be.mHasSizeBy===false&&(!(Bd&&BK.length>0)||(Bd&&BS.GetGroupCount()<=1&&BS.GetSeriesCount<=1))){var BO=this.GetMaxElementRadius(BL.mGraphWidth,BL.mGraphHeight);if(BL.IsLineChart()){BO=Math.max(BO,BV);}BT.Y1.LowOffset=BT.Y1.HighOffset=BT.Y2.LowOffset=BT.Y2.HighOffset=BO;BT.X2.LowOffset=BT.X2.HighOffset=BO;BT.X1.LowOffset=BT.X1.HighOffset=BO;return BT;}}var BQ=true;if(BQ){if(BL.IsScatterChart()){BO=this.GetMaxElementRadius(BL.mGraphWidth,BL.mGraphHeight);BT.Y1.LowOffset=BT.Y1.HighOffset=BT.Y2.LowOffset=BT.Y2.HighOffset=BO;BT.X2.LowOffset=BT.X2.HighOffset=BO;BT.X1.LowOffset=BT.X1.HighOffset=BO;return BT;}}var BW=BL.getUniformAxisContext();BW.mIsAxisTitleAndLabelRequired=false;BL.mImageUsage=AS.OBJECT_CLIP_COMPUTATION;E.call(this,BL.mGraphWidth,BL.mGraphHeight);BL.mImageUsage=AS.GENERAL;var Ba=As.PlotId0,Bh=this.mChartManagerPtr.GetGraphObjectManager(Ba);if(!Bh){return BT;}var BM;for(Bc=0;Bc<2;++Bc){for(Bb=0;Bb<2;++Bb){var BR=Bc===0,BX=Bb===0,BJ=BR?(BX?"X1":"X2"):(BX?"Y1":"Y2");BM=Bh.GetMaxElementOffsetClippedByBoundary(BR,BX);BT[BJ].LowOffset=BM.LowOffset;BT[BJ].HighOffset=BM.HighOffset;}}return BT;},GetUniformYAxisWidth:function Af(BU,BJ,BT){this.mChartContextPtr.startTimer({functionName:"GetUniformYAxisWidth",purpose:"Create uniform Y axis instance and do axis layout",caller:arguments.caller||"unknown"});Ah.call(this);var BS={};A5.call(this,false,BJ,BT,BS);if(BS.CanSkip){return 0;}BJ=BS.MaxLabelLength;BT=BS.IsPrimary;var BL=this.mChartContextPtr,BO=BL.mDataset,BQ=BL.getUniformAxisContext(),BR=A1.call(this),BV,BN,BW,BP=900,BM;AF.Reset(Y,Y,BU,BU-A2.call(this)*Y);BL.SetGraphSize(BU,BU-A2.call(this)*Y);BN=u.call(this,false,BT,BJ,BU);if(BN.resizeAction===Ai.KeepBoth){return this.mUniformAxisSpace.width;}AF.width=Math.max(AF.width,0);AF.height=Math.max(AF.height,0);if(BN.restrictWidth===-1){AF.width=Math.max(AF.width,BP);}else{AF.width=Math.min(BN.restrictWidth,BP);}BM=AF.width;AL.call(this,AF,BR,BN,true);var BK=BO.showDatalabels();if(!BR&&BK){this.AdjustingAxisPaddingForDataLabel(AF,false,BU,BU);}Ac.call(this,BQ,AF,BU,BJ,false,BT);BV=0;this.mUniformAxisPtr=BN;if(BT){BW=AF.x+BV;}else{BW=BM-(AF.x+AF.width)-Y+BV;}if(this.mUniformAxisSpace.width===-1){BN.restrictWidth=this.mUniformAxisSpace.width=BW;}BI.call(this);BL.endTimer();return Math.max(BW,0);},GetUniformXAxisHeight:function i(BL,BJ,BT){this.mChartContextPtr.startTimer({functionName:"GetUniformXAxisHeight",purpose:"Create uniform X axis instance and do axis layout",caller:arguments.caller||"unknown"});Ah.call(this);var BS={};A5.call(this,true,BJ,BT,BS);if(BS.CanSkip){return 0;}BJ=BS.MaxLabelLength;BT=BS.IsPrimary;var BM=this.mChartContextPtr,BO=BM.mDataset,BP=BM.getUniformAxisContext(),BR=!AG.call(this),BQ=400,BK,BU,BN,BV;AF.Reset(0,0,BL,BQ);BM.SetGraphSize(BL,BQ);BN=u.call(this,true,BT,BJ,BL);if(BN.resizeAction===Ai.KeepBoth){return this.mUniformAxisSpace.height;}AL.call(this,AF,BR,BN,true);BK=BO.showDatalabels();if(!BR&&BK){this.AdjustingAxisPaddingForDataLabel(AF,true,BL,BT);}Ac.call(this,BP,AF,BL,BJ,true,BT);BU=0;this.mUniformAxisPtr=BN;if(BT){BV=BQ-(AF.y+AF.height)-Y+BU;}else{BV=AF.y;}if(this.mUniformAxisSpace.height===-1){BN.restrictHeight=this.mUniformAxisSpace.height=BV;}BI.call(this);BM.endTimer();return Math.max(BV,0);},UpdatePartialRenderingWindow:function G(BK,BL,BJ){BK=BK||false;var BM=this.mChartContextPtr;if(BM.IsScatterChart()||BM.IsBubbleChart()){BM.mPartialRendering=BK;}else{BM.mPartialRendering=BK&&(BL!==undefined);if(BM.mPartialRendering){BM.mPartialRendering=BM.mPartialRendering&&(BL.x!==undefined&&BL.y!==undefined&&BL.width!==undefined&&BL.height!==undefined);}}if(BM.mPartialRendering){if(BM.mRenderingWindow===null){BM.mRenderingWindow={};}if(BL){Z.copy(BL,BM.mRenderingWindow);}}else{BM.mRenderingWindow=null;}if(BJ!==undefined){if(BM.mPartialRendering){this.mVisualMode=BJ;}else{this.mVisualMode=Ad;}}},updateUniformXAxisLayout:function A(BM){var BK=BM,BJ=this.mChartContextPtr.getUniformAxisContext(),BP=BJ.CategoryAxis.X,BL=1,BO=2,BN=3,BQ=4;BP.Layout=BK.Layout;if(BK.Layout===BQ){BP.Layout=BL;BP.ForbideStagger=true;}else{if(BK.Layout===BN){BP.ForbideStagger=true;}else{BP.ForbideStagger=false;}}BP.StartRow=0;if(BP.Layout===BO){BP.StartRow=BK.StartRow;}if(BK.LabelWidthLimit!==undefined){BP.LabelWidthLimit=BK.LabelWidthLimit;}BP.EnforceCluster=(!!BK.EnforceCluster)||BP.EnforceCluster;BP.EnforceFringe=(!!BK.EnforceFringe)||BP.EnforceFringe;},updateUniformAxisLabelRotation:function Az(BN,BL){if(BL===undefined){BL=-1;}var BK={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};var BM=this.mChartContextPtr,BJ=BM.getUniformAxisContext();if(BL===-1){if(BN===undefined){return ;}switch(BN){case BK.NORMAL:case BK.STAGGER:BJ.mLabelRotation.X1=I.FR_AUTOMATIC;break;default:BJ.mLabelRotation.X1=I.FR_90;break;}}else{if(BL===2){BJ.mLabelRotation.X1=I.FR_90;}else{BJ.mLabelRotation.X1=I.FR_NORMAL;}}},EnableUniformAxis:function V(BP,BL){BL=BL||false;var BQ=this.mChartContextPtr,BX=BQ.getUniformAxisContext(),Bf=BX.ValueAxis,Bd,BM,Bc=Bf.X1,Bb=Bf.X2,BT=Bf.Z,BO=Bf.Y1,BN=Bf.Y2;Bd=AW.isValidNumber(BP.YMinValue);BM=AW.isValidNumber(BP.YMaxValue);BO.Valid=Bd&&BM;BO.Min=parseFloat(Bd?BP.YMinValue:0);BO.Max=parseFloat(BM?BP.YMaxValue:0);BO.CustomScale=(BP.YCustomScale!==undefined)?BP.YCustomScale:false;BO.CondenseLabel=(BP.YCondenseLabel!==undefined)?BP.YCondenseLabel:{};BO.CondenseEnforced=BP.YCondenseEnfored||false;BO.AutoMin=BP.YAutoMin;BO.AutoMax=BP.YAutoMax;Bd=AW.isValidNumber(BP.Y2MinValue)||AW.isValidNumber(BP.X2MinValue);BM=AW.isValidNumber(BP.Y2MaxValue)||AW.isValidNumber(BP.X2MaxValue);BN.Valid=Bd&&BM;BN.Min=parseFloat(AW.isValidNumber(BP.Y2MinValue)?BP.Y2MinValue:(AW.isValidNumber(BP.X2MinValue)?BP.X2MinValue:0));BN.Max=parseFloat(AW.isValidNumber(BP.Y2MaxValue)?BP.Y2MaxValue:(AW.isValidNumber(BP.X2MaxValue)?BP.X2MaxValue:0));BN.CustomScale=(BP.Y2CustomScale!==undefined)?BP.Y2CustomScale:((BP.X2CustomScale!==undefined)?BP.X2CustomScale:false);BN.CondenseLabel=(BP.Y2CondenseLabel!==undefined)?BP.Y2CondenseLabel:(BP.X2CondenseLabel!==undefined?BP.X2CondenseLabel:{});BN.CondenseEnforced=BP.Y2CondenseEnfored||BP.X2CondenseEnfored||false;BN.AutoMin=BP.Y2AutoMin;BN.AutoMax=BP.Y2AutoMax;Bd=AW.isValidNumber(BP.XMinValue);BM=AW.isValidNumber(BP.XMaxValue);Bc.Valid=Bd&&BM;Bc.Min=parseFloat(Bd?BP.XMinValue:0);Bc.Max=parseFloat(BM?BP.XMaxValue:0);Bc.CustomScale=(BP.XCustomScale!==undefined)?BP.XCustomScale:false;Bc.CondenseLabel=(BP.XCondenseLabel!==undefined)?BP.XCondenseLabel:{};Bc.CondenseEnforced=BP.XCondenseEnfored||false;Bc.AutoMin=BP.XAutoMin;Bc.AutoMax=BP.XAutoMax;Bd=AW.isValidNumber(BP.X2MinValue);BM=AW.isValidNumber(BP.X2MaxValue);Bb.Valid=Bd&&BM;Bb.Min=parseFloat(Bd?BP.X2MinValue:0);Bb.Max=parseFloat(BM?BP.X2MaxValue:0);Bb.CustomScale=(BP.X2CustomScale!==undefined)?BP.X2CustomScale:false;Bb.CondenseLabel=(BP.X2CondenseLabel!==undefined)?BP.X2CondenseLabel:{};Bb.CondenseEnforced=BP.X2CondenseEnfored||false;Bb.AutoMin=BP.X2AutoMin;Bb.AutoMax=BP.X2AutoMax;BT.Min=parseFloat(AW.isValidNumber(BP.ZMinValue)?BP.ZMinValue:0);BT.Max=parseFloat(AW.isValidNumber(BP.ZMaxValue)?BP.ZMaxValue:0);BT.CustomScale=(BP.ZCustomScale!==undefined)?BP.ZCustomScale:false;BT.AutoMin=BP.ZAutoMin;BT.AutoMax=BP.ZAutoMax;BX.mGraphHeight=(BP.GraphHeight!==undefined)?BP.GraphHeight:0;if(BL){return ;}BQ.mIsUniformAxisMode=true;BQ.mIsGraphMatrix=true;if(BP.XMetrics){Bc.Metrics.splice(0,Bc.Metrics.length);Bc.Metrics=Bc.Metrics.concat(BP.XMetrics);}if(BP.YMetrics){BO.Metrics.splice(0,Bf.Y1.Metrics.length);BO.Metrics=Bf.Y1.Metrics.concat(BP.YMetrics);}if(BP.Y2Metrics){BN.Metrics.splice(0,BN.Metrics.length);BN.Metrics=BN.Metrics.concat(BP.Y2Metrics);}if(BP.X2Metrics){Bb.Metrics.splice(0,Bb.Metrics.length);Bb.Metrics=Bb.Metrics.concat(BP.X2Metrics);}if(BP.ZMetrics){BT.Metrics.splice(0,BT.Metrics.length);BT.Metrics=BT.Metrics.concat(BP.ZMetrics);}if(BP.LabelPlacement!==undefined){this.updateUniformAxisLabelRotation(BP.LabelPlacement,BP.xAxisRotateMode);}if(BP.XCategoryAxis){var Be=BP.XCategoryAxis,BZ=BX.CategoryAxis.X,BR=3;BZ.Truncation={Idices:[],Texts:[]};if(BZ.Layout!==BR){BZ.Truncation.Idices=BP.TruncatedIdices;BZ.Truncation.Texts=BP.TruncatedTexts;}this.updateUniformXAxisLayout(Be);}if(BP.YCategoryAxis){var BW=BP.YCategoryAxis;var BS=BX.CategoryAxis.Y;if(BW.LabelWidthLimit!==undefined){BS.LabelWidthLimit=BW.LabelWidthLimit;}BS.EnforceCluster=(!!BW.EnforceCluster)||BS.EnforceCluster;BS.EnforceFringe=(!!BW.EnforceFringe)||BS.EnforceFringe;}if(BQ.IsScatterChart()||BQ.IsBubbleChart()){var Ba=BQ.GetGraphMatrixContext(),BY=Ba.AxisLayout;if(BY===null||BY===undefined){return ;}var BK=1,BV=2,BU=4,BJ=8;if(!!(BY&BU)){BO.Min=parseFloat((BP.Y2MinValue!==undefined)?BP.Y2MinValue:0);BO.Max=parseFloat((BP.Y2MaxValue!==undefined)?BP.Y2MaxValue:0);BO.CustomScale=(BP.Y2CustomScale!==undefined)?BP.Y2CustomScale:false;BO.CondenseLabel=(BP.Y2CondenseLabel!==undefined)?BP.Y2CondenseLabel:{};BO.Metrics.splice(0,BO.Metrics.length);BO.Valid=BN.Valid;if(BP.Y2Metrics){BO.Metrics=BO.Metrics.concat(BP.Y2Metrics);}BN.Metrics.splice(0,BN.Metrics.length);}if(!!(BY&BJ)){Bc.Min=parseFloat((BP.X2MinValue!==undefined)?BP.X2MinValue:0);Bc.Max=parseFloat((BP.X2MaxValue!==undefined)?BP.X2MaxValue:0);Bc.CustomScale=(BP.X2CustomScale!==undefined)?BP.X2CustomScale:false;Bc.CondenseLabel=(BP.X2CondenseLabel!==undefined)?BP.X2CondenseLabel:{};Bc.Metrics.splice(0,Bc.Metrics.length);Bc.Valid=BN.Valid;if(BP.X2Metrics){Bc.Metrics=Bf.Y1.Metrics.concat(BP.X2Metrics);}BN.Metrics.splice(0,BN.Metrics.length);}}},AdjustingAxisPaddingForDataLabel:function d(BR,BL,BP,BQ){var BJ=this.mChartContextPtr,BK=BJ.getValueAxisKeyFromLayout(BL,BQ),BM;var BO=BJ.getAxisTripleId(BK);BM=BJ.getUniformAxisInformation(BO.mObjectId);var BT=BM.Metrics||[];var BS=BJ.GetProperty(Av.DSSGraphMatrixUseCustomMinMax,BO),BN;if(BS){BN=BS;if(BN){return false;}}if(BL){return A6.call(this,BR,BT,BP,BQ);}return P.call(this,BR,BT,BP,BQ);},ShouldRotateDataLabel:function Ae(BK,BT){var BL=this.mChartContextPtr,BN=this.mDatasetPtr,BQ=BN.showDatalabels(),BR=BL.GetGraphMatrixContext();var BS=false;if(BQ){BS=BL.IsBarChart();if(!BS&&BL.isCombinationChart()){var BJ=BN.GetSeriesByShape().Bar,BM=BN.GetSeriesCount();BS=(BJ.length===BM);if(!BS&&BJ.length){BS=true;for(var BO=0;BO<BM;BO++){if(BJ.indexOf(BO)===-1&&BN.showSeriesDatalabel(BO)){BS=false;break;}}}}}if(BS){this.mInitialized=false;var BP=BL.getUniformAxisContext();BP.mIsAxisTitleAndLabelRequired=false;BL.mIsEntireChart=false;E.call(this,BK,BT);}return{Rotation:BR.mIsNeedRotateDataLabel,Adjust:BS};},ShouldAdjustValueAxis:function M(BL,BJ,BM,BK){return false;},GetMaxElementRadius:function AX(BK,BW,BR){var BL=this.mChartContextPtr,BQ=BL.GetGraphMatrixContext(),BJ=BL.GetGraphType(),BO=BL.GetGraphMatrixGraphMajorType(),BV=this.mDatasetPtr.GetGroupCount(),BS;BR=BR||false;switch(BO){case k._GRID:case k._SCATTER:case k._BUBBLE:return BQ.GetMaxMarkerSize(Am._SHAPES_IN_BUBBLESCATTER,false,BV,BQ.mHasSizeBy);case k._AREA:BS=((BJ>=A8.DssGraphTypeVertical_Area_Absolute&&BJ<=A8.DssGraphTypeVertical_Area_Percent));return BQ.GetMaxElementSizeInAreaChart(BS,BV);case k._LINE:BS=((BJ>=A8.DssGraphTypeVertical_Line_Absolute&&BJ<=A8.DssGraphTypeVertical_Line_Percent));if(BQ.isCombinationChart()){var BU=0,BT=0,BP=0,BN=4,BM=this.mDatasetPtr.GetSeriesByShape();if(BM.Line&&BM.Line.length>0){BU=BQ.GetMaxElementSizeInLineChart(BS,BV,false,BP);}if((BM.Circle&&BM.Circle.length>0)||(BM.Square&&BM.Square.length>0)){BT=BQ.GetMaxElementSizeInLineChart(BS,BV,true,BN);}return Math.max(BU,BT);}return BQ.GetMaxElementSizeInLineChart(BS,BV);case k._PIE:if(this.mDatasetPtr){BV*=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);}BS=this.mChartContextPtr.IsVertical();return BQ.GetMaxMarkerSize(Am._PIE,BS,BV,BQ.mHasSizeBy);case k._BAR:return 0;default:break;}return 0;},setGraphType:function AD(BJ){this.mGraphType=this.mChartContextPtr.mGraphType=BJ;},setThemeType:function h(BJ){this.mChartContextPtr.mThemeType=BJ;},getCondenseStatus:function c(){var BK,BJ=this.mUniformAxisPtr;if(BJ){BK=BJ.mCondenseLabels;}return BK;},enableCondense:function Ao(BK,BJ){var BL=this.mUniformAxisPtr;if(BL){BL.checkCondense(BK,BJ);}},isAxisLabelRotated:function y(BL,BM){var BK=this.mUniformAxisPtr;if(BK===null){return false;}var BJ=BK.getLabelRotation();return BJ===I.FR_90;},liftedFromZero:function BD(){if(this.mUniformAxisPtr){if(this.mMinTick!==undefined){return this.mMinTick===0&&this.mLowTrim>0;}}return false;},configureChart:function Ap(BJ){var BL=this.mChartContextPtr;BL.mIsUniformAxisMode=true;BL.mIsGraphMatrix=true;if(BJ.ThemeType){this.setThemeType(BJ.ThemeType);}if(BJ.Usage){BL.mImageUsage=BJ.Usage;}if(BJ.Timer!==undefined){BL.mUseTimer=BJ.Timer||false;}if(BL.mImageUsage===AS.BANNER){return ;}var BK;BK=BJ.isABL&&BJ.Extremes&&((BJ.Extremes.X2Metrics&&BJ.Extremes.X2Metrics.length)||(BJ.Extremes.Y2Metrics&&BJ.Extremes.Y2Metrics.length));if(BJ.GraphType){if(BK){BJ.GraphType=BL.mapGraphTypeToDualAxis(BJ.GraphType);}if(BJ.ShapeType){this.setGraphType(b.call(this,BJ.GraphType,BJ.ShapeType));}else{this.setGraphType(BJ.GraphType);}}if(BJ.GraphSize){BL.SetGraphSize(BJ.GraphSize.W,BJ.GraphSize.H);}if(BJ.Extremes){this.EnableUniformAxis(BJ.Extremes,false);}if(BJ.OutputType){BL.mImageFormat=BJ.OutputType;}r.call(this,BJ);x.call(this,BJ);},resetCanvas:function An(){var BJ=this.mChartContextPtr;BJ.resetCanvas();},updateUniformAxis:function q(BM){var BL=this.mUniformAxisPtr,BK=BL.mDeviceDataArea.width,BJ=BL.mDeviceDataArea.height;if(!BL){return o.call(this,BK,BJ,false,false,false,[]);}if(BM.Redraw){BL.Draw();}return o.call(this,BK,BJ,false,false,false,[]);},getUniformAxisBanding:function AA(){var BJ=true,BK=this.mUniformAxisPtr;if(BJ&&BK){return BK.getBandings();}return[];},getUniformAxisGridLinePosition:function K(BK){var BJ=true,BL=this.mUniformAxisPtr;if(BJ&&BL){return BL.getGridLinePosition(BK);}return[];},echoCondenseStatus:function T(BM,BK){var BL=this.mUniformAxisPtr;if(BL===null){return ;}var BJ=BL.getCondenseStatus();if(BJ!==undefined){BM[BK]=BJ;}},echoLayoutPaddings:function Ay(BL,BJ){var BK=this.mUniformAxisPtr;if(BK===null){return ;}BL[BJ]=BL[BJ]||{};BL[BJ].HighOffset=this.mAxisLayoutHighPadding||0;BL[BJ].LowOffset=this.mAxisLayoutLowPadding||0;},UpdateValueAxisPadding:function Ak(BK){var BJ=this.mChartContextPtr.GetGraphMatrixContext();BJ.UpdateValueAxisPadding(BK);},getUniformAxisTrims:function Ag(BK,BL){var BJ=(BK&&AG.call(this)===false)||(!BK&&A1.call(this));if(BJ){return Au.call(this,BK);}else{return AC.call(this);}},getUniformAxisFormat:function R(){var BJ=this.mUniformAxisPtr;if(!!BJ){if(BJ.mCondenseLabels){return"Condensed";}if(BJ.mNumberFormat){return BJ.mNumberFormat.mCustomFormat;}}return undefined;},formatAsUniformAxisLabel:function n(BJ){if(!!this.mUniformAxisPtr===false){return undefined;}return this.mUniformAxisPtr.formatAsLabel(BJ);},getAxisPadding:function e(BM){var BK=0,BN=1,BL=2;if(BM===BK){return{L:0,H:(this.mUniformAxisPtr&&this.mUniformAxisPtr.dataLabelPadding||0)};}else{if(BM===BN){var BJ=this.mAxisLayoutLowPadding||0;var BO=this.mAxisLayoutHighPadding||0;return{L:BJ,H:BO};}else{return{L:0,H:0};}}},getStatistics:function X(BK){var BS={},BY,BU,BZ,BL,BP=0,BW,BV;BY=As.PlotId0;switch(BK.Type){case BP:var BT=0,BM=this.mChartContextPtr,BR=this.mDatasetPtr;var BX=BR.GetSeriesCount(),BJ=BR.GetGroupCount();BS.Total=BX*BJ;if(BM.IsScatterChart()||BM.IsBubbleChart()){BU=this.mChartManagerPtr.GetGraphObjectManager(BY);if(BU){BZ=BU.mGraphObjectList;BL=BZ.length;for(BW=0;BW<BL;++BW){if(BZ[BW].mTripleId.mObjectId===BA.DssGraphRiser){BT++;}}BS.Displayed=BT;}}else{if(BM.IsBarChart()||BM.IsAreaChart()||BM.IsLineChart()||BM.IsGridChart()){if(BR.endSeries!==-1||BR.endGroup!==-1){var Bb=Math.max(BR.startSeries,0),BO=Math.max(BR.startGroup,0),BQ=BR.endSeries===-1?BX:BR.endSeries,BN=BR.endGroup===-1?BJ:BR.endGroup;BS.Displayed=(BN-BO)*(BQ-Bb);}else{BU=this.mChartManagerPtr.GetGraphObjectManager(BY);if(BU){var Ba=[BU.AreaSeriesRenderer,BU.mBarSeriesRendererPtr,BU.mLineSeriesRendererPtr];for(BV=0;BV<Ba.length;++BV){if(Ba[BV]){BZ=Ba[BV].mGraphObjectList;BL=BZ.length;for(BW=0;BW<BL;++BW){if(BZ[BW].mTripleId.mObjectId===BA.DssGraphRiser){BT++;}}}}BS.Displayed=BT;}}}}break;default:break;}return BS;}});}());