mstrmojo.LoadedExternalJSURLs={};function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function requiresMethod(n){if(!n){return false;}if(typeof this[n]==="function"){return true;}var fqcn=this[n]||(this.methods&&(this.methods[n]||this.methods["*"]));if(typeof fqcn==="string"){this.requiresCls(fqcn);return typeof this[n]==="function";}return false;},requiresCls:function req(mixins,callback){if(mixins){if(typeof mixins==="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin,i,len;for(i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(propName,bForceStartup){var fqcn=this[propName];if(fqcn){var c,firstTime=false;if(typeof fqcn==="string"){c=mstrmojo.registry.ref(fqcn);this[propName]=c;firstTime=true;}else{c=fqcn;}if(c&&(firstTime||bForceStartup)){c.parent=this;if(c.startup){c.startup();}}return c;}return null;},requiresExternalScripts:function requiresExternalScripts(esScripts,callback,context){if(esScripts&&esScripts instanceof Array){if(esScripts.length===0){if(callback){callback.call(context);}return false;}if(esScripts[0]&&esScripts[0].forceReload===false&&mstrmojo.LoadedExternalJSURLs[esScripts[0].url]){esScripts.splice(0,1);return this.requiresExternalScripts(esScripts,callback,context);}var script=document.createElement("script"),isIE=!!document.all,url=esScripts[0].url;if(url.substr(0,7)==="file://"){url=url.substr(7);}else{if(mstrApp.isSingleTier&&url.substr(0,4)!=="http"){url="http:"+url;}}script.type="text/javascript";script.src=url;if(!esScripts[0].callbackParamName){if(isIE){script.onreadystatechange=function(){if(script.readyState==="loaded"||script.readyState==="complete"){script.onreadystatechange=null;if(esScripts.length>1){mstrmojo.LoadedExternalJSURLs[esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(esScripts,callback);}else{if(esScripts.length===1){mstrmojo.LoadedExternalJSURLs[esScripts[0].url]=true;if(callback){callback.call(context);}}}}};}else{script.onload=function(){script.onload=null;if(esScripts.length>1){mstrmojo.LoadedExternalJSURLs[esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(esScripts,callback);}else{if(esScripts.length===1){mstrmojo.LoadedExternalJSURLs[esScripts[0].url]=true;if(callback){callback.call(context);}}}};}}else{if(esScripts[0].callbackParamName.length!==0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy===true){var that=this;window.setTimeout(function(){that.requiresExternalScripts(esScripts,callback,context);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;script.src+="&"+esScripts[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=esScripts;mstrmojo._LoadsScript.callback=callback;mstrmojo._LoadsScript.esScritsContext=context;}}document.getElementsByTagName("head")[0].appendChild(script);}}});