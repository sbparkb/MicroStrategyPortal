(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo._IsList","mstrmojo.ListBase");mstrmojo.requiresDescs(505,629);var $DOM=mstrmojo.dom;mstrmojo.qb.mdx.CubeList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.qb.mdx.CubeList",cssClass:"mstrmojo-qb-emma-tablelist",init:function init(props){this._super(props);var $this=this,evtConfig={},listConfig=evtConfig[this.id]={};listConfig.refreshTables=function tablesRefreshed(evt){$this.set("items",evt.items);};mstrApp.getRootController().attachDataChangeListeners(evtConfig);},getItemMarkup:function(item,idx){return'<div class="item {@cls}" idx="{@idx}" style="{@style}"><div class="item-ic"></div><div class="item-n" title="{@n}"> {@n} </div><div class="item-refresh {@isNew}" title="'+mstrmojo.desc(505,"Update")+'"></div><div class="item-del {@isNew}" title="'+mstrmojo.desc(629,"Delete")+'"></div></div>';},getItemProps:function getItemProps(item,idx){return{cls:"tp"+item.tp,n:item.n,isNew:item.isNew?"new":"exist",idx:idx};},onclick:function onclick(evt){try{var target=evt.target||$DOM.eventTarget(evt.hWin,evt.e),item=$DOM.findAncestorByAttr(target,"idx",true,this.domNode),idx=item&&parseInt(item.value,10);if(idx!==null&&!isNaN(idx)){if(target.className.indexOf("item-del")>-1){mstrApp.getRootController().removeCube(idx);}else{if(target.className.indexOf("item-refresh")>-1){mstrApp.getRootController().updateCube(idx);}}}}catch(ex){mstrApp.onerror(ex);}}});}());