(function(){mstrmojo.requiresCls("mstrmojo.Container");var _C=mstrmojo.css;mstrmojo.Refine.RefineTagBox=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.Refine.RefineTagBox",markupString:'<div id="{@id}" class="refine-tag-box-container {@cssClass}" style="{@cssText}"><div class="refine-tag-box"></div></div>',markupSlots:{boxNode:function(){return this.domNode.children[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function preBuildRendering(){var newNode={scriptClass:"mstrmojo.Refine.RefineTagBoxNew",slot:"boxNode"};this.inputBox=this.addChildren(newNode);return this._super();},setupScrollNodes:function setupScrollNodes(){this.scrollNode=this.boxNode;},onaddChild:function onaddChild(){if(this.children.length>1){this.inputBox.input.emptyText="";_C.toggleClass(this.inputBox.input.domNode,"short",true);}},onremoveChild:function(evt){var children=evt.value;for(var i=0;i<children.length;i++){children[i].destroy();}this.updateScrollbars();if(this.children.length===1){this.inputBox.input.emptyText=mstrmojo.desc(14518,"Press Enter Key to input multiple keywords");_C.toggleClass(this.inputBox.input.domNode,"short",false);}},removeTags:function removeTags(){for(var i=this.children.length-2;i>=0;i--){this.removeChildren(this.children[i]);}}});mstrmojo.Refine.RefineTagBoxNew=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Refine.RefineTagBoxNew",markupString:'<div id="{@id}" class="refine-tag-box-new {@cssClass}" style="{@cssText}" mstrAttach:keydown></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline-block":"none";}},children:[{scriptClass:"mstrmojo.TextBox",alias:"input",slot:"domNode",cssClass:"refine-tag-box-new-input",tooltip:mstrmojo.desc(14518,"Press Enter Key to input multiple keywords"),emptyText:mstrmojo.desc(14518,"Press Enter Key to input multiple keywords")}],onkeydown:function onkeydown(event){var KEY_ENTER=13;var KEY_BACKSPACE=8;var labelNode={scriptClass:"mstrmojo.Refine.RefineTagBoxLabel",slot:"boxNode"};if(event.e.keyCode===KEY_ENTER){if(this.input.value){labelNode.text=this.input.value;this.input.set("value","");this.parent.addChildren([labelNode],this.parent.children.length-1);this.parent.updateScrollbars();}}else{if(event.e.keyCode===KEY_BACKSPACE&&this.input.value===""){var length=this.parent.children.length;if(length>1){var child=this.parent.children[length-2];this.parent.removeChildren(child);}}}}});mstrmojo.Refine.RefineTagBoxLabel=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Refine.RefineTagBoxLabel",markupString:'<div id="{@id}" class="refine-tag-box-label {@cssClass}" style="{@cssText}"><span class="refine-tag-box-label-text">{@text}</span><a class="refine-tag-box-close"><span class="refine-tag-box-icon" mstrAttach:click>Ã—</span></div>',text:"",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline-block":"none";}},markupSlots:{textNode:function(){return this.domNode.children[0];}},onclick:function(){this.parent.removeChildren(this);}});}());