(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.gm._IsAnchorable","mstrmojo.ui._HasUITheme","mstrmojo.VisUtility");var $DOM=mstrmojo.dom,$UTILS=mstrmojo.VisUtility;mstrmojo.gm.DndTooltip=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.gm._IsAnchorable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.gm.DndTooltip",left:0,top:0,zIndex:10,boundaryNodeName:"boundary",popupNodeName:"infoNode",baseTipClass:"arrow",infoNodeOffset:0,popupNodeOffset:5,anchor:null,boundary:null,utils:mstrmojo.VisChartUtils,themeClassName:"mojo-theme-light",markupString:'<div id="{@id}" class="mstrmojo-Tooltip {@cssClass}" style="top:{@top}px;left:{@left}px;z-index:{@zIndex};position:absolute;{@cssText};"><div class="mstrmojo-Tooltip-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Tooltip-content {@contentNodeCssClass}" style="{@contentNodeCssText}"><div class="content"></div><div class="arrow"><div class="after"></div><div class="before"></div></div></div></div>',markupSlots:{infoNode:function(){return this.domNode.childNodes[1];},contentNode:function(){return this.domNode.childNodes[1].firstChild;},tipNode:function(){return this.domNode.childNodes[1].lastChild;}},toggle:function toggle(show){if(show){this.domNode.style.display="block";}else{this.domNode.style.display="none";}},updateContent:function(anchor,anchorPosition,content){this.set("themeClassName",mstrApp.getThemeClassName());this.fillContent(anchor,anchorPosition,content);this.positionDialog();},fillContent:function fC(anchor,anchorPosition,content){this.anchor=anchor;this.anchorPosition=anchorPosition;this.contentNode.innerHTML=content||this.anchor.innerText||this.anchor.textContent;this.toggle(true);var fs=$UTILS.getComputedFontStyle(this.contentNode),str=this.contentNode.innerHTML,contentWidth=$UTILS.measureTextWidth(str,fs),maxWidth=130;if(contentWidth<=maxWidth){this.contentNode.style.width=contentWidth+"px";}else{this.contentNode.innerHTML=$UTILS.truncateTextToLineWithWordWrap(str,fs,maxWidth,3);this.contentNode.style.width=maxWidth+"px";}},getTipDimension:function getTipDimension(){var tipNode=this[this.tipNodeName],tipPosition=$DOM.position(tipNode.firstChild);return tipPosition;},applyPopupNodePos:function applyPopupNodePos(popTop,popLeft,tipTop,tipLeft){var tipNode=this[this.tipNodeName],tipNodeStyle=tipNode.style,popupNode=this[this.popupNodeName],popupNodeStyle=popupNode.style;popupNodeStyle.top=popTop+"px";popupNodeStyle.left=popLeft+"px";tipNodeStyle.top=(tipTop-popTop)+"px";tipNodeStyle.left=(tipLeft-popLeft)+"px";}});}());