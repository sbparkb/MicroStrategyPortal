(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.ui.menus.MenuConfig");var $FUNC=mstrmojo.func,TXT_CLOSE=mstrmojo.desc(2177,"Close");function getShowMenuFunction(menuCfg){return function(item,toolbar){toolbar.openMenu(menuCfg,item);};}mstrmojo.ui.menus.ToolbarConfig=mstrmojo.declare(mstrmojo.ui.menus.MenuConfig,null,{scriptClass:"mstrmojo.ui.menus.ToolbarConfig",btns:null,hasCloseButton:false,closeButtonText:TXT_CLOSE,addCloseButton:function addCloseButton(text){this.hasCloseButton=true;if(text){this.closeButtonText=text;}},addToolbarBtn:function addToolbarBtn(text,cls,fn,ctxt,index){var button={n:text,cls:cls,fn:fn,ctxt:ctxt};if(isNaN(index)||index>=this.btns.length){this.btns.push(button);}else{this.btns.splice(index,0,button);}return button;},addDisabledToolbarBtn:function addToolbarBtn(text,cls){var button=this.addToolbarBtn(text,(cls||"")+" disabled",mstrmojo.emptyFn);button.dsbld=true;},addToolbarPickerBtn:function addToolbarPickerBtn(text,cls,fn,menuCfg,ctxt,index){var button={n:text,cls:cls,fn:fn,ctxt:ctxt,tp:"pb",menufn:getShowMenuFunction(menuCfg||this)};if(isNaN(index)||index>=this.btns.length){this.btns.push(button);}else{this.btns.splice(index,0,button);}},addMenuToolbarBtn:function addMenuToolbarBtn(text,cls,menuCfg,index,fn){if(!menuCfg&&!this.hasMenuItems()){return ;}this.addToolbarBtn(text,cls,$FUNC.composite([getShowMenuFunction(menuCfg||this),(fn||mstrmojo.emptyFn)]),null,index);},addToggleToolbarButton:function addToggleToolbarButton(text,cls,fnOn,fnOff,scopeId,isOn,ctxt){var states=this.getToggleItemStates(text,cls,fnOn,fnOff,isOn,ctxt);this.addDualStateItem(scopeId,states[0],states[1],true);},addDualStateItem:function addDualStateItem(scopeId,initialState,toggleState,isToolbarBtn){this["add"+(isToolbarBtn?"ToolbarBtn":"MenuItem")](initialState.n,initialState.cls,this.getDualStateHandler(scopeId,initialState,toggleState),initialState.ctxt);},getDualStateHandler:function getDualStateHandler(scopeId,initialState,toggleState){var baseFn=this._super(scopeId,initialState,toggleState);return function(item,widget){baseFn.call(this,item,widget);widget.refresh();};},clear:function clear(){this.btns=[];this.hasCloseButton=false;this.closeButtonText=TXT_CLOSE;this._super();}});}());