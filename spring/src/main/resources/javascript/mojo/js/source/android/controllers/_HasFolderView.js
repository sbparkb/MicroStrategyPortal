(function(){function itemSelected(item,isExecute){var subType=item.st;if(!subType||subType===2048||subType==="Project"){this.openFolder(item);}else{if(isExecute||!mstrApp.isTablet()||this.orientation){this.openItem(item);}else{this.rootCtrl.updateItemProperties("",item,this.id,this.isItemAvail(item));}}}mstrmojo.android.controllers._HasFolderView=mstrmojo.provide("mstrmojo.android.controllers._HasFolderView",{_mixinName:"mstrmojo.android.controllers._HasFolderView",start:function start(params){this._super(params);var publisher=mstrmojo.publisher,id=this.id;mstrmojo.array.forEach([publisher.CONNECTIVITY_CHANGED_EVENT,publisher.RECONCILE_END_EVENT],function(evt){publisher.subscribe(publisher.NO_SRC,evt,function(){var view=this.view;if(view.hasRendered){view.refresh();}},id);});},initFolderView:function initFolderView(){var view=this.view=this.newView("Folder",{cssClass:"folder-browser",multiSelect:false,hasEvenRows:!mstrApp.isTablet()||!this.orientation,postselectionChange:function(evt){var added=evt.added;if(added){itemSelected.call(this.controller,this.items[added[0]]);}}});return view;},executeItem:function executeItem(item){var nextController=this.nextController;if(nextController){nextController.destroy();this.rootCtrl.updateFolder(this.view);}if(mstrApp.isTablet()&&!this.orientation){itemSelected.call(this,item,true);}else{this.view.singleSelect(item._renderIdx);}},onorientationChange:function onorientationChange(){this._super();var view=this.view;if(view&&mstrApp.isTablet()){view.set("hasEvenRows",!this.orientation);if(view.hasRendered&&view.domNode&&view.domNode.parentNode){var cfg=view.scrollerConfig;if(cfg&&cfg.origin){cfg.offsetIdx=view.getOffsetIndex();cfg.origin.y=0;view.updateScroller();}this.syncItemProperties();}}},syncItemProperties:function syncItemProperties(){if(mstrApp.isTablet()&&!this.orientation){var view=this.view,item=view&&view.getSelectedItems&&view.getSelectedItems()[0];if(item){this.rootCtrl.updateItemProperties("",item,this.id,this.isItemAvail(item));}else{this.updatePropertiesMsg();}}},getDefaultMessage:function getDefaultMessage(){return"";},updatePropertiesMsg:function updatePropertiesMsg(){var view=this.view;this.rootCtrl.updateItemProperties(this.getDefaultMessage(view&&view.items));},canItemLinger:function canItemLinger(item){if(!mstrApp.isTablet()){return true;}var subType=item.st;if(subType===2048||subType==="Project"||this.orientation){return true;}return false;},itemLongPressed:function itemLongPressed(item){var id=this.id;if(!mstrApp.isTablet()||this.orientation){this.rootCtrl.updateItemProperties("",item,id,this.isItemAvail(item));return true;}return false;},isItemAvail:function isItemAvail(item,skipCacheCheck){if(mstrMobileApp.isOnline()||item.act===5||item.act===3){return true;}if(item.t===8&&(item.st==="Project"||item.systemFolder)){var project=mstrApp.getConfiguration().getProject(item.did);return !!(project&&project.realPid);}return skipCacheCheck?false:this.isItemCached(item);},isItemCached:function isItemCached(item){var itemType=item.t,itemSubtype=item.st;if(!(itemType===3||itemType===55||itemSubtype===2048||itemSubtype==="Project")){return false;}if(itemSubtype===2048&&mstrMobileApp.isOnline()){return true;}var itemPid=item.pid||item.projectID;if(!itemPid){var project=mstrApp.getConfiguration().getProject(mstrApp.getCurrentProjectId());itemPid=project&&project.realPid;}return !!(itemPid&&mstrMobileApp.isCached(itemPid,item.sub_id||item.did,(item.sub_id)?-1:itemSubtype));}});}());