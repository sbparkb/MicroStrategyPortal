(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.UnitList","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.dom","mstrmojo.css");mstrmojo.requiresDescs(2177,6424);var $DESC=mstrmojo.desc,$DOM=mstrmojo.dom,CLS_MENU="mnu",CLS_CLOSE="clsx",CLS_MENU_SUB="icn "+CLS_MENU+"_sub";function getMenuHandler(isOpen,el,fn){return function(){el.style.overflow=(isOpen)?"visible":"hidden";if(fn){fn();}};}function _foo(){window.alert("foo");}mstrmojo.vi.ui.TestInteractiveUnitList=mstrmojo.declare(mstrmojo.vi.ui.UnitList,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.TestInteractiveUnitList",panelId:"",init:function init(props){this._super(props);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIInteractiveUnitList");},getItemMarkup:function getItemMarkup(item){if(!itemMarkup){itemMarkup=this._super(item).replace(">{@en@n}",'>{@en@n}<div class="'+CLS_MENU+'"><div title="'+$DESC(6424,"Menu")+'" class="'+CLS_MENU_SUB+'"></div></div><div class="'+CLS_CLOSE+'" title="'+$DESC(2177,"Close")+'"><div class="icn"></div></div>');}return itemMarkup;},getItemProps:function getItemProps(item,idx){var props=this._super(item,idx);if(item.mnu){props.addCls("has-m");}if(item.x){props.addCls("has-x");}return props;},onclick:function onclick(evt){var target=evt.target||$DOM.eventTarget(evt.hWin,evt.e),info=$DOM.findAncestorByAttr(target,"idx",true,this.domNode),idx=info&&parseInt(info.value,10);if(idx!==null&&!isNaN(idx)){var item=this.items[idx];switch(target.className){case CLS_MENU_SUB:var lastMenu=this._lastOpened,parentNode=target.parentNode;if(lastMenu&&this[lastMenu.slot]==parentNode){this.closePopup();}else{this.showItemMenu(item,parentNode);}break;case CLS_CLOSE:this.deleteItem(item);break;default:this._super(evt);}}},configurePopup:function configurePopup(config,itemBtn,fnOpen,fnClose){mstrmojo.all[this.panelId].addPopupHandlers(config);var listElement=itemBtn.parentNode;config.addPopupHandlers("iulMenuOverflow",getMenuHandler(true,listElement,fnOpen),getMenuHandler(false,listElement,fnClose));config.hostId=this.id;config.hostElement=itemBtn;var s="";for(var x=0;x<100;x++){s+="x";}_foo(s);},showItemMenu:mstrmojo.emptyFn,deleteItem:mstrmojo.emptyFn});}());