(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.array","mstrmojo.Button","mstrmojo.css","mstrmojo.hash","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.func");mstrmojo.requiresDescs(221,1442,2751,2891,11949,11950,11951,11942,13397,13398,14640,14648);var $A=mstrmojo.array,$CSS=mstrmojo.css,$H=mstrmojo.hash,$FUNC=mstrmojo.func,$NWB=mstrmojo.Button.newWebButton,$D=mstrmojo.dom,$VALIDATION_MESSAGE_ID="mstrmojo-link-validation",$VALIDATION_TOOLTIP_ID="mstrmojo-link-vt",removeLink=function removeLink(link){if(link.old){this.removedLinks.push(link);}this.links.removeChildren(link);},getDsTree=function getDsTree(){var map=this.dsMap,docModel=this.docModel,datasets=docModel.datasets,createNode=function createNode(parent,did,name){var node={n:name||"",did:did||null,parent:parent||null,lv:(parent?parent.lv+1:-1),children:[]};if(parent){parent.children.push(node);}return node;},tree=createNode(),p1,p2,p3,node,tables,table,dm,hr,a,i,j,k,x,ilen,jlen,klen,xlen;$H.forEach(datasets,function(dataset){if(docModel.isMDXDataset(dataset)){tables=dataset.tables;for(i=0,ilen=tables.length;i<ilen;i++){table=tables[i];p1=createNode(tree,table.did,table.n);p1.isMDX=true;for(j=0,jlen=table.dimensions.length;j<jlen;j++){dm=table.dimensions[j];p2=createNode(p1,dm.did,dm.n);for(k=0,klen=dm.hierarchies.length;k<klen;k++){hr=dm.hierarchies[k];p3=createNode(p2,hr.did,hr.n);for(x=0,xlen=hr.att.length;x<xlen;x++){a=hr.att[x];node=createNode(p3,a.did,a.n);node.att=a;map[table.did+":"+a.did]=node;}}}}}else{p1=createNode(tree,dataset.did,dataset.name);p1.isMDX=false;$A.forEach(dataset.att,function(a){node=createNode(p1,a.did,a.n);node.att=a;map[dataset.did+":"+a.did]=node;});}});return tree;},getTargetAttributes=function getTargetAttributes(srcFormIds,callback){srcFormIds=$A.ensureArray(srcFormIds);var that=this,srcAttrId=this.attribute.did,docModel=this.docModel,srcDataSetId=docModel.findDatasetIdFromUnit(srcAttrId),formSeparator="\u001F",updateTargetAttributesCallback={success:function(res){var linkableAttrs=res.als,links=(docModel.als&&docModel.als.links)||{},dsTree=that.dsTree;$A.forEach(srcFormIds,function(srcFormId,i){var toLink={},namesHash={},tgtAttrs=[],tgtForms={},srcLink=srcAttrId+" "+srcFormId,ats=$A.filter(linkableAttrs[i].ats,function(unit){return !docModel.isInDataset(srcDataSetId,unit.at,["att"]);}),addTgtForm=function addTgtForm(attrId,formId){if(!tgtForms[attrId]){tgtForms[attrId]={};}if(!tgtForms[attrId][formId]){tgtForms[attrId][formId]=true;}};$A.forEach(ats,function(unit){var at=unit.at,fms=unit.fms;toLink[at]=true;if(fms){$A.forEach(fms,function(fm){addTgtForm(at,fm.fm);});}});$H.keyarray(links).forEach(function(k){if(k===srcLink){$A.forEach(links[k],function(link){link=link.split(" ");toLink[link[0]]=true;addTgtForm(link[0],link[1]);});}});if($H.keyarray(toLink).length>0){$A.forEach(dsTree.children,function(dataset){var cb=function(unit){var dup;if(!unit.att){return ;}unit=unit.att;if(toLink[unit.did]){if(!namesHash[unit.n]){namesHash[unit.n]={};}if(!namesHash[unit.n][unit.did]){namesHash[unit.n][unit.did]=[];}namesHash[unit.n][unit.did].push(dataset.n);dup=$H.copy(unit,dup);dup.dsId=dataset.did;tgtAttrs.push(dup);}};if(dataset.isMDX){$A.forEach(dataset.children,function(dimensions){$A.forEach(dimensions.children,function(hierarchies){$A.forEach(hierarchies.children,cb);});});}else{$A.forEach(dataset.children,cb);}});}that.tgtAttrs[srcFormId]=tgtAttrs;that.tgtForms[srcFormId]=tgtForms;that.namesHash[srcFormId]=namesHash;});}},params={taskId:"validateDocumentLinks",msgID:docModel.mid,action:1,attributeList:srcAttrId,attributeFormList:srcFormIds.join(formSeparator)};mstrApp.serverRequest(params,$FUNC.wrapMethods(updateTargetAttributesCallback,callback));},updateRichTooltip=function(item,target,tipText,datasetName){item.richTooltip=null;if(!item.isSearching){var isClipped=target&&target.scrollWidth>target.clientWidth;tipText=isClipped?mstrmojo.desc(14648,"## from ###").replace("##",tipText):"";if(datasetName){if(!isClipped){tipText=mstrmojo.desc(14640,"From ###");}tipText=tipText.replace("###",datasetName);}var position=mstrmojo.dom.position(target);item.richTooltip={cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:tipText,top:position.y-6,left:position.x};}},addLink=function addLink(oldData){var that=this,getForms=function(att){var fs=att.fs,de=att.de,rs=[];(fs||[]).forEach(function(f){if(f.obf&&(!de||f.idf)){rs.push({n:f.fnm,v:f.fid,idf:f.idf});}});return rs;},myItems=getForms(this.attribute),getLinkableForms=function(att,srcFormId){var fs=getForms(att);var linkableForms=(that.tgtForms[srcFormId]&&that.tgtForms[srcFormId][att.did])||{};var rs=[];$A.forEach(fs,function(f){if(linkableForms[f.v]){rs.push(f);}});return rs;},getTargetAttributeItems=function getTargetAttributeItems(formId){var res=[];$A.forEach(that.tgtAttrs[formId],function(attr){if(getLinkableForms(attr,formId||that.idFormId).length>0){var nh=that.namesHash[formId],tt=attr.n;if(nh[attr.n]&&$H.keyarray(nh[attr.n]).length>1){tt=tt+" ("+nh[attr.n][attr.did].join(",")+")";}res.push({n:attr.n,v:attr,tt:tt});}});if(res.length===0){res.push({n:mstrmojo.desc(13398,"No valid object"),v:{did:null},cls:"nvo",t:1});}return res;},tgtAttrsItems=getTargetAttributeItems((oldData&&oldData.srcFormId)||this.idFormId),getIdIndex=function(att,id){return $A.find(att.fs,id?"fid":"idf",id||true);},getAttIndex=function(id){var r=-1;tgtAttrsItems.forEach(function(att,ix){if(att.v.did===id){r=ix;}});return r;},getAttNameFromIndex=function(index){var att=tgtAttrsItems[index];if(!att){return mstrmojo.desc(13397,"Select an attribute");}else{return att.n;}},ensureId=function(pullDown){var its=pullDown.items,idx=pullDown.selectedIndex;if(idx>=0){if(its[idx].idf){return ;}}its.forEach(function(it,ix){if(it.idf){pullDown.set("selectedIndex",ix);}});};this.links.addChildren({scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linkRow",slot:"containerNode",old:!!oldData,oldMeta:oldData,getMeta:function(){var linkFromForm=this.linkFromForm,linkToAtt=this.linkToAtt,linkToForm=this.linkToForm;return{srcAttrId:that.attribute.did,srcFormId:linkFromForm.items[linkFromForm.selectedIndex].v,tgtAttrId:linkToAtt.items[linkToAtt.selectedIndex]&&linkToAtt.items[linkToAtt.selectedIndex].v.did,tgtFormId:linkToForm.items[linkToForm.selectedIndex]&&linkToForm.items[linkToForm.selectedIndex].v};},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-attName",text:that.attribute.n,useRichTooltip:true,updateTooltipConfig:function(e){var target=e.target,tipText=this.text,datasetId=that.datasetId,datasetName=datasetId?that.docModel.datasets[datasetId].name:"";updateRichTooltip(this,target,tipText,datasetName);}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormFromPD",alias:"linkFromForm",value:"ID",isHostedWithin:true,items:myItems,selectedIndex:getIdIndex(that.attribute,oldData&&oldData.srcFormId),onitemSelected:function(item){var me=this,updateLinkToAtt=function(){var linkToAtt=me.parent.linkToAtt;tgtAttrsItems=getTargetAttributeItems(item.v);linkToAtt.set("items",tgtAttrsItems);linkToAtt.set("selectedIndex",-1);linkToAtt.set("text",mstrmojo.desc(13397,"Select an attribute"));$CSS.addClass(linkToAtt.selectedNode,"nvo");},callback={success:updateLinkToAtt};if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!item.idf){ensureId(this.parent.linkToForm);if(!that.tgtForms[item.v]){getTargetAttributes.call(that,item.v,callback);return ;}}updateLinkToAtt();}}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-linksToLabel",text:mstrmojo.desc(11949,"links to")},{scriptClass:"mstrmojo.ui.SearchablePulldown",cssClass:"mstrmojo-linkToAtt",alias:"linkToAtt",useRichTooltip:true,isHostedWithin:false,items:tgtAttrsItems,text:getAttNameFromIndex(getAttIndex(oldData&&oldData.tgtAttrId)),selectedIndex:getAttIndex(oldData&&oldData.tgtAttrId),allowCustomText:true,allowEmptyText:true,updateTooltipConfig:function(e){var target=e.target,tipText=target.getAttribute("tt"),selectedItem=this.getSelectedItem(),datasetId=selectedItem?selectedItem.v.dsId:null,datasetName=datasetId?that.docModel.datasets[datasetId].name:"";if(this.selectedNode===target&&selectedItem){tipText=selectedItem.tt;}updateRichTooltip(this,target,tipText,datasetName);},onitemSelected:function(item){if(!item||item.v.did===null){return ;}var linkToForm=this.parent.linkToForm,linkFromForm=this.parent.linkFromForm,forms=getLinkableForms(item.v,linkFromForm.items[linkFromForm.selectedIndex].v),getIndex=function getIndex(fs,id){var index=$A.find(fs,id?"v":"idf",id||true);if(index===-1&&fs.length>0){index=0;}return index;},showForms;$A.forEach(forms,function(f){if(f.idf){showForms=false;return false;}});if(showForms){showAttributeForms.call(that,true);}linkToForm.set("items",forms);linkToForm.set("selectedIndex",getIndex(forms,!this.hasRendered&&oldData&&oldData.tgtFormId));if(this.hasRendered&&this.parent.old){this.parent.oldUpdated=true;}enableOkButton.call(that);},onPopupWidgetOpened:function onPopupWidgetOpened(){if(this.selectedIndex===-1){this.set("text","");}$CSS.removeClass(this.selectedNode,"nvo");},onPopupWidgetClosed:function onPopupWidgetClosed(){mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this);if(this.selectedIndex===-1&&this.text===""){this.set("text",mstrmojo.desc(13397,"Select an attribute"));$CSS.addClass(this.selectedNode,"nvo");}else{$CSS.removeClass(this.selectedNode,"nvo");}this.hideTooltip();$A.forEach(that.collapseTargets,function(t){t.className="arrow-b";$CSS.removeClass(t.parentNode.parentNode,"collapse");});$A.forEach(that.collapseTreeNodes,function(tn){delete tn.collapse;});$A.forEach(this.list.itemsContainerNode.childNodes,function(n){n.style.display="";});},postBuildRendering:function postBuildRendering(){mstrmojo.ui.SearchablePulldown.prototype.postBuildRendering.call(this);if(this.selectedIndex===-1){$CSS.addClass(this.selectedNode,"nvo");}this.list.popupConfig.clear();},getPopupListConfig:function getpopupListConfig(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",width:"170px",tooltipOrientation:"vertical",selectionPolicy:"reselect",useRichTooltip:true,locksHover:true,listHooks:{select:function select(el,item,index){this.parent.set("selectedIndex",index);this.close();}},onclick:function onclick(evt){try{var target=evt.getTarget(),item=this.getItemFromTarget(target),idxNode=$D.findAncestorByAttr(target,"idx",true,this.domNode);if(item){evt.cancel();if(target.className==="arrow-b"||target.className==="arrow-r"){var items=this.items,itemNodes=this.itemsContainerNode.childNodes,getLevel=function getLevel(node){var lvClass;while(node){lvClass=node.className||"";if(lvClass.indexOf("lv")===0){return window.parseInt(lvClass.substring(2),10);}node=node.firstChild;}return null;},findTreeNode=function findTreeNode(att,level){var dsMap=that.dsMap,node=dsMap[att.dsId+":"+att.did];while(node){if(node.lv===level){return node;}node=node.parent;}return null;},doCollapse=function doCollapse(){var collapse=(target.className==="arrow-b"),curNode=target.parentNode.parentNode,curLv=getLevel(curNode),curIdx=item._renderIdx,curTreeNode=findTreeNode(item.v,curLv),len=items.length,i,node,nodeLv,treeNode,parent,show;target.className=collapse?"arrow-r":"arrow-b";if(!that.collapseTargets){that.collapseTargets=[];}that.collapseTargets.push(target);$CSS.toggleClass(curNode,"collapse",collapse);curTreeNode.collapse=collapse;if(!that.collapseTreeNodes){that.collapseTreeNodes=[];}that.collapseTreeNodes.push(curTreeNode);for(i=curIdx+1;i<len;i++){node=itemNodes[i];nodeLv=getLevel(node);if(nodeLv<=curLv){break;}treeNode=findTreeNode(items[i].v,nodeLv);parent=treeNode.parent;show=true;while(parent){if(parent.collapse){show=false;break;}parent=parent.parent;}node.style.display=(show?"":"none");}};doCollapse();}else{if(idxNode&&idxNode.node.className.indexOf("item")!==-1){this.doItemSelect(item,evt||{});}}}}catch(ex){mstrApp.onerror(ex);}},getItemProps:function getItemProps(item,idx){var props=mstrmojo._IsList.getItemProps.call(this,item,idx);var itemCss=item.cls;if(itemCss){props.addCls(itemCss);}return props;},getItemMarkup:function getItemMarkup(item,idx){if(item.v.did===null){return'<{@tag} class="item {@cls}" did="'+item.v.did+'" idx="{@idx}" style="{@style}">{@n}</{@tag}>';}var markup=[],curItemId=item.v.did,dsId=item.v.dsId,ds=dsId?that.docModel.datasets[dsId]:null,dsName=ds?ds.name:"",prevItem=idx>0&&this.items[idx-1].v,dsMap=that.dsMap,curNode=dsMap[item.v.dsId+":"+curItemId],prevNode=dsMap[(prevItem&&(prevItem.dsId+":"+prevItem.did))];markup.push("</div>");while(curNode){if(curNode.lv===-1){break;}if(curNode.att){var cClass=curNode.att.da?"derived-attr":"attr";markup.push('<div class="lv'+curNode.lv+' dim item {@cls}" tt="'+item.tt+'" did="'+curItemId+'" dsName="'+dsName+'" idx="{@idx}" style="{@style}"><div><div class="'+cClass+'"></div></div>{@n}</div>');}else{if(curNode!==prevNode){markup.push('<div class="lv'+curNode.lv+' dim" dtt="'+curNode.n+'" idx="{@idx}"><div><div class="arrow-b"></div></div>'+curNode.n+"</div>");}else{break;}}curNode=curNode.parent;prevNode=(prevNode&&prevNode.parent)||null;}markup.push("<div>");return markup.reverse().join("");},updateTooltipConfig:function updateTooltipConfig(e){var target=e.target,tt=target.getAttribute("tt"),dtt=target.getAttribute("dtt"),datasetName=target.getAttribute("dsName"),tipText=tt||dtt;if(tipText){updateRichTooltip(this,target,tipText,datasetName);}}};}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormToPD",alias:"linkToForm",value:"ID",isHostedWithin:true,items:[],onitemSelected:function(item){if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!item.idf){ensureId(this.parent.linkFromForm);}}}},$NWB("",function(){removeLink.call(that,this.parent);},false,{cssClass:"mstrmojo-removeLink"})]});this.links.renderChildren();},showAttributeForms=function(show){$CSS.toggleClass(this.editorNode,"mstrmojo-advanced",show);},showValidationMessage=function(msg){var that=this,id=$VALIDATION_MESSAGE_ID,cfg;try{mstrmojo.all[id].destroy();}catch(e){}cfg={scriptClass:"mstrmojo.Editor",id:id,title:mstrmojo.desc(2751,"Message"),cssClass:"mstrmojo-alert",buttons:[$NWB(mstrmojo.desc(1442,"Ok"),function(){mstrmojo.all[id].destroy();showValidationTooltip.call(that);},true)],children:[{scriptClass:"mstrmojo.Label",text:msg}],visible:true,zIndex:1000};mstrmojo.insert(cfg).render();},showValidationTooltip=function(){var that=this,illLinks=this.illLinks,links=this.links.children,id=$VALIDATION_TOOLTIP_ID;$A.forEach(illLinks,function(illLink){illLink=illLink.al;$A.forEach(links||[],function(link){var meta=link.getMeta(),linkToAtt=link.linkToAtt,position,tooltip;if(meta.srcAttrId===illLink.alaid1&&meta.tgtAttrId===illLink.alaid2){if(!mstrmojo.all[id]){tooltip=new mstrmojo.Tooltip({id:id,cssClass:that.themeClassName+" vi-warning vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,updatePopupConfig:null});$D.attachEvent(that.editorNode,"click",function(){tooltip.close();$CSS.toggleClass(linkToAtt.selectedNode,"mstrmojo-Warning",false);});}else{tooltip=mstrmojo.all[id];}tooltip.close();position=mstrmojo.dom.position(linkToAtt.selectedNode);tooltip.set("top",position.y-6);tooltip.set("left",position.x);tooltip.set("content",illLink.alstmsg);$CSS.toggleClass(linkToAtt.selectedNode,"mstrmojo-Warning",true);tooltip.open();return false;}});});},closeValidationTooltip=function(){var tooltip=mstrmojo.all[$VALIDATION_TOOLTIP_ID];if(tooltip){tooltip.close();}},enableOkButton=function enableOkButton(){this.buttons[0].enabled=true;if(this.btnHbox){this.btnHbox.children[0].set("enabled",true);}},addChildren=function addChildren(){var that=this,cc=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-addLink",text:mstrmojo.desc(11950,"Add A Link"),title:mstrmojo.desc(11950,"Add A Link"),onclick:function(){addLink.call(that);closeValidationTooltip.call(that);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-showForms",text:mstrmojo.desc(2891,"Show Attribute Forms"),title:mstrmojo.desc(2891,"Show Attribute Forms"),onclick:function(){showAttributeForms.call(that,true);closeValidationTooltip.call(that);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-hideForms",text:mstrmojo.desc(11951,"Hide Attribute Forms"),title:mstrmojo.desc(11951,"Hide Attribute Forms"),onclick:function(){showAttributeForms.call(that,false);closeValidationTooltip.call(that);}}],slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linksBox mstrmojo-advanced",alias:"links",slot:"containerNode"}];this.addChildren(cc);};mstrmojo.vi.ui.editors.AttributeLinkEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",title:mstrmojo.desc(11942,"Link Attributes"),cssClass:"mstrmojo-att-link",btnAlignment:"right",buttons:null,modal:true,visible:false,help:"link_attributes_editor.htm",attribute:null,tgtAttrs:null,tgtForms:null,docModel:null,datasetId:null,namesHash:null,removedLinks:null,preBuildRendering:function preBuildRendering(){var that=this,docModel=this.docModel,getLinksSet=function(){var links=(docModel.als&&docModel.als.links)||{},res=[];$H.keyarray(links).forEach(function(k){if(k.indexOf(that.attribute.did+" ")===0){links[k].forEach(function(link){res.push({srcAttrId:k.split(" ")[0],srcFormId:k.split(" ")[1],tgtAttrId:link.split(" ")[0],tgtFormId:link.split(" ")[1]});});}});return res;},ls;this.set("buttons",[$NWB(mstrmojo.desc(1442,"OK"),function(){var actions=[],links=that.links.children,submitActions=function(){var controller=docModel.controller,updateCallback=docModel.controller.getRefreshCallback();if(actions.length>0){controller.cmdMgr.execute({execute:function(){this.submit(actions,updateCallback);},urInfo:{callback:updateCallback}});}that.close();},validate=false,action,meta;that.removedLinks.forEach(function(link){action=$H.copy(link.oldMeta,{act:"applyAttributeLinking",unlink:true});actions.push(action);});(links||[]).forEach(function(link){if(link.old&&link.oldUpdated){action=$H.copy(link.oldMeta,{act:"applyAttributeLinking",unlink:true});actions.push(action);}if(!link.old||(link.old&&link.oldUpdated)){meta=link.getMeta();if(!meta.tgtAttrId){return ;}action=$H.copy(meta,{act:"applyAttributeLinking",unlink:false});actions.push(action);}});$A.forEach(actions,function(ac){if(!ac.unlink){validate=true;return false;}});if(!validate){submitActions();return ;}var params={taskId:"validateDocumentLinks",msgID:docModel.mid,action:2,manipulationList:'{"ml":'+JSON.stringify(actions)+"}"},validateCallback={success:function(res){if(res.als&&res.als.length>0){var errorMsg="";$A.forEach(res.als,function(illLink){errorMsg+=illLink.al.alstmsg+"\n";});that.illLinks=res.als;showValidationMessage.call(that,errorMsg);return ;}submitActions();}};mstrApp.serverRequest(params,validateCallback);},true,{enabled:false}),$NWB(mstrmojo.desc(221,"Cancel"),function(){that.close();})]);addChildren.call(this);ls=getLinksSet(this.attribute.did);if(ls.length>0){ls.forEach(function(link){addLink.call(that,link);});enableOkButton.call(this);}else{addLink.call(this);}this._super();},close:function close(){closeValidationTooltip.call(this);this.destroy();}});mstrmojo.vi.ui.editors.AttributeLinkEditor.open=function(props){var w=mstrmojo.insert($H.copy(props,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",tgtAttrs:{},tgtForms:{},namesHash:{},removedLinks:[]})),srcAttr=w.attribute,srcAttrId=srcAttr.did,docModel=w.docModel,links=(docModel.als&&docModel.als.links)||{},forms=[],OpenEditorCallback={success:function(){w.set("visible",true);w.render();}};$A.forEach(srcAttr.fs,function(f){if(f.idf){w.idFormId=f.fid;return false;}});$H.keyarray(links).forEach(function(k){var sLink=k.split(" ");if(sLink[0]===srcAttrId){forms.push(sLink[1]);}});if($A.indexOf(forms,w.idFormId)===-1){forms.push(w.idFormId);}w.dsMap={};w.dsTree=getDsTree.call(w);getTargetAttributes.call(w,forms,OpenEditorCallback);};}());