(function(){mstrmojo.requiresCls("mstrmojo.array");var $ARR=mstrmojo.array;mstrmojo.vi.ui.rw._HasBufferSlice=mstrmojo.provide("mstrmojo.vi.ui.rw._HasBufferSlice",{_mixinName:"mstrmojo.vi.ui.rw._HasBufferSlice",_bufferedSlices:null,bufferSlice:function bufferSlice(rEvt){var bs=this._bufferedSlices=this._bufferedSlices||{};if(rEvt.ctlKey){bs[rEvt.ctlKey]=rEvt;this.set("applyEnabled",true);}},applyBufferedSlices:function applyBufferedSlices(deferred,update,puKeys){var bufferedSlices=this._bufferedSlices;if(!bufferedSlices){return ;}var tks,i;for(i in bufferedSlices){tks=bufferedSlices[i]&&bufferedSlices[i].tks;if(tks){break;}}var evt={tks:tks,events:bufferedSlices};if(deferred){if(puKeys){$ARR.forEach(this.model.buildSliceUrInfo(evt).extraPuKeys,function(puKey){puKeys.push(puKey);});}this.model.sliceDeferred(update,evt);}else{this.model.slice(evt);}this.clearBuffSlices();},clearBuffSlices:function(){this._bufferedSlices=null;this.set("applyEnabled",false);},clearSingleBuffSlice:function(ctlKey){var bs=this._bufferedSlices;if(bs&&bs[ctlKey]){delete bs[ctlKey];}}});}());