(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.ui.menus.Menu","mstrmojo._IsList","mstrmojo.vi.ui._HasMask","mstrmojo.dom","mstrmojo.hash","mstrmojo.string","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui._HasListTooltip");var $DOM=mstrmojo.dom;mstrmojo.vi.ui.toolbars.Toolbar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi.ui._HasMask,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.vi.ui.toolbars.Toolbar",tooltipOrientation:"vertical",init:function init(props){this._super(props);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIToolbar");},selectionPolicy:"reselect",toolbarCfg:null,toolbarClicked:mstrmojo.emptyFn,tooltipCss:null,_set_toolbarCfg:function(n,v){var vWas=this.toolbarCfg,chg=(vWas!==v);if(chg){if(vWas){vWas.destroy();}this.toolbarCfg=v;}return chg;},getItemProps:function getItemProps(item,idx){var props=this._super(item,idx);props.addCls(item.cls);props.addStyle("display:inline-block");return props;},postBuildRendering:function postBuildRendering(){var mask=document.createElement("div");mask.className="mstrmojo-VIDND-mask";this.maskNode=this.domNode.appendChild(mask);return this._super();},postselectionChange:function(evt){var added=evt.added;if(added){var item=this.items[added[0]];if(item.tp==="pb"&&item.isMenuClicked){item.menufn(item,this);}else{item.fn(item,this);}}},ontoolbarCfgChange:function ontoolbarCfgChange(evt){var oldToolbarCfg=evt.valueWas;if(oldToolbarCfg){oldToolbarCfg.destroy();}var toolbarCfg=evt.value;if(!toolbarCfg){return ;}this.set("items",toolbarCfg.btns);if(this.hasRendered){this.raiseEvent({name:"renderComplete"});}},openMenu:function openMenu(menuCfg,item){menuCfg.hostId=this.id;menuCfg.hostElement=this._getItemNode(item._renderIdx);this.openPopup(menuCfg.newInstance());},onclick:function onclick(evt){var target=evt.target||$DOM.eventTarget(evt.hWin,evt.e),selectedItem=this.getItemFromTarget(target);if(selectedItem&&selectedItem.tp==="pb"){if(target&&target.className){selectedItem.isMenuClicked=target.className.indexOf("icn")===-1;}}this.toolbarClicked(evt);this._super(evt);},destroy:function destroy(skipCleanup){var toolbarCfg=this.toolbarCfg;if(toolbarCfg){toolbarCfg.destroy();}delete this.items;this._super(skipCleanup);}});}());