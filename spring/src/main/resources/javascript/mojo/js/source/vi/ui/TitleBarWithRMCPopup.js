(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TitleBar","mstrmojo.ui.menus._HasMenuPopup");function showPopup(pos,popupCfg){var ph=this.domPopupPH;ph.style.top=pos.y+"px";ph.style.left=pos.x+"px";ph.innerHTML="";document.body.appendChild(ph);popupCfg.hostId=this.id;popupCfg.hostElement=ph;mstrmojo.css.toggleClass(ph,mstrApp.getThemeClassName(),true);this.openPopup(popupCfg.newInstance());}function hidePopup(){var ph=this.domPopupPH,phChild=ph.firstChild,phParent=ph.parentNode;if(phChild){ph.removeChild(phChild);}if(phParent){phParent.removeChild(ph);}}function handleRMC(pos){var popupCfg;if(typeof this.parent.boxContent.getTitleRMCPopup==="function"){popupCfg=this.parent.boxContent.getTitleRMCPopup.call(this);}if(popupCfg){showPopup.call(this,pos,popupCfg);}}mstrmojo.vi.ui.TitleBarWithRMCPopup=mstrmojo.declare(mstrmojo.vi.ui.TitleBar,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.TitleBarWithRMCPopup",markupString:'<div id="{@id}" class="mstrmojo-VITitleBar {@cssClass}" style="{@cssText}" mstrAttach:contextmenu, click><div class="left-toolbar"></div><div class="title-text"></div><div class="right-toolbar"></div></div>',init:function init(props){this._super(props);var div=document.createElement("div");div.setAttribute("class","gm-menu-placeholder");this.domPopupPH=div;},oncontextmenu:function oncontextmenu(evt){handleRMC.call(this,{x:evt.e.pageX+2,y:evt.e.pageY+2});},unrender:function(){this._super();hidePopup.call(this);},onclick:function(){hidePopup.call(this);}});}());