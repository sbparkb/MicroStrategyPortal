(function(){mstrmojo.requiresCls("mstrmojo._IsList","mstrmojo.array","mstrmojo.css","mstrmojo.ListBase");var $A=mstrmojo.array,$DOM=mstrmojo.dom,$STR=mstrmojo.string,STR_DELETE=mstrmojo.desc(629,"Delete"),STR_RENAME=mstrmojo.desc(1388,"Rename"),renameEditor;mstrmojo.architect.ui.UnitList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.architect.ui.UnitList",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-ar-UnitList {@cssClass}" style="{@cssText}" mstrAttach:click><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',selectionPolicy:"reselect",multiSelect:false,getItemProps:function getItemProps(item,index){var cssClasses=["item",(item.tp?("tp"+(item.icntp||item.tp)):""),(item.multi?"mso":"")];return{tag:"div",cls:cssClasses.join(" "),n:$STR.encodeHtmlString(item.n||item.name||""),idx:index,ttp:$STR.encodeXMLAttribute(item.ttp||item.n)};},getItemMarkup:function getItemMarkup(){return'<div class="item {@cls} tp{@tp}" idx="{@idx}" style="{@style}"><div class="mstrmojo-ar-ulist-txt" title="{@ttp}">{@n}</div><span ren="{@idx}" class="mstrmojo-ar-ulist-icn-ren" title="'+STR_RENAME+'"></span><span del="{@idx}" class="mstrmojo-ar-ulist-icn-del" title="'+STR_DELETE+'"></span></div>';},onclick:function onclick(evt){var $this=this,target=evt.target||$DOM.eventTarget(evt.hWin,evt.e),delObj=$DOM.findAncestorByAttr(target,"del",true,this.domNode),delIndex=delObj&&parseInt(delObj.value,10),delItem=this.items[delIndex],renObj=$DOM.findAncestorByAttr(target,"ren",true,this.domNode),renIndex=renObj&&parseInt(renObj.value,10),renItem=this.items[renIndex];if(delIndex!==null&&!isNaN(delIndex)){this.onItemDeleted(delItem,delIndex);}else{if(renIndex!==null&&!isNaN(renIndex)){renameEditor=renameEditor||new mstrmojo.architect.ui.editors.NameEditor({isNew:false});renameEditor.onOK=function onOK(name){$this.onItemRenamed(renItem,name);};renameEditor.data=renItem;renameEditor.tp=renItem.tp;renameEditor.open();}else{this._super(evt);}}},onItemDeleted:mstrmojo.emptyFn,onItemRenamed:mstrmojo.emptyFn,_set_selected:function _set_selected(propName,propValue){this.selected=propValue;if(propValue!==null){this.singleSelect($A.find(this.items,"did",propValue));return true;}return false;}});}());