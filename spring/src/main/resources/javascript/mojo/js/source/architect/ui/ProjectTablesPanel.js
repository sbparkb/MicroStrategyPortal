(function(){mstrmojo.requiresCls("mstrmojo.architect.ui.panels.UnitsPanel","mstrmojo.architect.ui.ProjectTablesTree","mstrmojo.css");var $A=mstrmojo.array,$CSS=mstrmojo.css,$ENUM_DATA_CHANGE_EVENTS=mstrmojo.architect.EnumDataChangeEvents,STR_NUM_ITEMS="%% Items",STR_PROJECT_TABLES=mstrmojo.desc(11136,"project tables"),STR_UPDATE_ALL=mstrmojo.desc(11384,"Update All");mstrmojo.architect.ui.ProjectTablesPanel=mstrmojo.declare(mstrmojo.architect.ui.panels.UnitsPanel,null,{scriptClass:"mstrmojo.architect.ui.ProjectTablesPanel",title:STR_PROJECT_TABLES,init:function init(props){this._super(props);var searchBox=this.searchBox;this.addNewTitleButton({alias:"updateBtn",title:STR_UPDATE_ALL,cssClass:"mstrmojo-wh-refresh",onclick:function onclick(){searchBox.clearSearch();mstrApp.getRootController().handleUpdateStructures();}});var $this=this,evtConfig={},projectTablesConfig=evtConfig[this.id]={},rootController=mstrApp.getRootController();projectTablesConfig[$ENUM_DATA_CHANGE_EVENTS.TABLES_LOADED]=function tablesLoaded(evt){var count=0;$A.forEach(evt.items,function(item){count+=item.items.length;});$this.set("titleTooltip",STR_NUM_ITEMS.replace("%%",count.toString()));};rootController.attachDataChangeListeners(evtConfig);},onPanelSearch:function onPanelSearch(evt){mstrApp.rootController.findDependentsByNameSearch(evt.searchValue);var hasSearchText=this.contentWidget.searchMode=this.searchBox._hasText;$CSS.toggleClass(this.domNode,"searchMode",hasSearchText);},clearSearch:function clearSearch(){this.searchBox.clearSearch();},getContentWidget:function getContentWidget(){return{scriptClass:"mstrmojo.architect.ui.ProjectTablesTree"};}});}());