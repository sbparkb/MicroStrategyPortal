(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.TextBox","mstrmojo.ui.Pulldown");var $A=mstrmojo.array,$DOM=mstrmojo.dom,$WIDGET=mstrmojo.Widget;function dataTypeChanged(dataTypeInfo){this.set("options",dataTypeInfo.options);}mstrmojo.architect.ui.editors.ColumnDefinitionEditor=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.architect.ui.editors.ColumnDefinitionEditor",clnName:mstrmojo.desc(11455,"Column name:"),dtName:mstrmojo.desc(9658,"Data type:"),precisionName:"",scaleName:"",dtpPulldown:undefined,precisionText:undefined,scaleText:undefined,clnText:undefined,markupString:'<div class="mstrmojo-ar-cde" mstrAttach:click><div class="mstrmojo-ar-cde-cln"><div>{@clnName}</div></div><div class="mstrmojo-ar-cde-dtp"><div>{@dtName}</div></div><div class="mstrmojo-ar-cde-byt"><div>{@precisionName}</div></div><div class="mstrmojo-ar-cde-scale"><div>{@scaleName}</div></div></div>',markupSlots:{containerNode:function containerNode(){return this.domNode;},columnContainer:function columnInput(){return this.domNode.firstChild;},dataTypeContainer:function dataTypeContainer(){return this.domNode.children[1];},precisionContainer:function precisionContainer(){return this.domNode.children[2];},scaleContainer:function scaleContainer(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:$WIDGET.visibleMarkupMethod,onheightChange:$WIDGET.heightMarkupMethod,onwidthChange:$WIDGET.widthMarkupMethod,onprecisionNameChange:function onprecisionNameChange(){this.precisionContainer.firstChild.innerHTML=this.precisionName;},onscaleNameChange:function onscaleNameChange(){this.scaleContainer.firstChild.innerHTML=this.scaleName;}},postBuildRendering:function postBuildRendering(){this._super();var dataTypeWidget=this.dtpPulldown;this.clnText.set("value",this.colName);dataTypeWidget.set("items",this.items);dataTypeWidget.set("selectedIndex",$A.find(dataTypeWidget.items,"id",this.type));this.precisionText.set("value",this.precision);this.scaleText.set("value",this.scale);},onoptionsChange:function onoptionsChange(){var propsConfig=["precision","scale"],options=this.options;$A.forEach(propsConfig,function updateEachOption(propName,idx){var optionObj=options[idx];this.set(propName+"Name",(optionObj&&optionObj.txt)||"");this[propName+"Text"].set("value",((optionObj&&optionObj.id)===this.type?this[propName]:0));this[propName+"Text"].set("visible",!!optionObj);},this);},onclick:function onclick(evt){try{if(evt.hWin){$DOM.stopPropogation(evt.hWin,evt.e);}}catch(ex){mstrApp.onerror(ex);}},getEditorData:function getEditorData(){return{colName:this.clnText.value,type:this.dtpPulldown.selectedItem.id,precision:this.precisionText.value,scale:this.scaleText.value};},children:[{scriptClass:"mstrmojo.ui.Pulldown",alias:"dtpPulldown",slot:"dataTypeContainer",onitemSelected:function onitemSelected(item){this.selectedItem=item;dataTypeChanged.call(this.parent,item);}},{scriptClass:"mstrmojo.TextBox",alias:"clnText",slot:"columnContainer"},{scriptClass:"mstrmojo.TextBox",alias:"precisionText",slot:"precisionContainer",type:"number"},{scriptClass:"mstrmojo.TextBox",alias:"scaleText",slot:"scaleContainer",type:"number"}]});}());