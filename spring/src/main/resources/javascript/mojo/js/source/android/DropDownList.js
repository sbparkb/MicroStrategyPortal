(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._TouchGestures","mstrmojo.android.ui.Button","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.android.nativedialog.ListDialog");mstrmojo.requiresDescs(221);var $CSS=mstrmojo.css,$BTN=mstrmojo.android.ui.Button.newButton,$HASH=mstrmojo.hash;mstrmojo.android.DropDownList=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.DropDownList",cssDisplay:"block",markupString:'<div id="{@id}" class="mstrmojo-AndroidDropDownList {@cssClass}" mstrAttach:click><div>{@value}</div></div>',markupSlots:{valueNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onvalueChange:function(){var value=this.value,options=this.options;if(options){var idx=mstrmojo.array.find(options,"v",value),item=options[idx];this.valueNode.innerHTML=item.n;if(value!=="-1"&&options[0].v==="-1"){options.shift();idx--;}this.idx=idx;}}},options:null,value:"",name:"",idx:0,singleSelectByField:function singleSelectByField(value){this.set("value",value);},touchTap:function touchTap(){var id=this.id,domNode=this.domNode,app=mstrApp,config={autoClose:true,title:this.name,fadeOnClose:false,cssClass:"dropDownList",onClose:function(){$CSS.removeClass(domNode,"down");},children:[{scriptClass:"mstrmojo.ui.MobileCheckList",items:this.options,multiSelect:false,isElastic:true,selectedIndex:this.idx,hasEvenRows:true,postselectionChange:function(evt){mstrApp.closeDialog();mstrmojo.all[id].set("idx",evt.added[0]);}}],buttons:[$BTN(mstrmojo.desc(221,"Cancel"),function(){mstrApp.closeDialog();})]};if(mstrApp.useBinaryFormat){$HASH.copy({isNative:true,scriptClass:"mstrmojo.android.nativedialog.ListDialog",onSelectionChange:function(index){mstrmojo.all[id].set("idx",index);this.close();}},config);}app.showDialog(config);$CSS.addClass(domNode,"down");},touchSelect:function touchSelect(){this.touchTap();},onidxChange:function onidxChange(){var options=this.options;if(options){this.set("value",options[this.idx].v);}},preBuildRendering:function preBuildRendering(){this._super();var options=this.options;if(options){this.value=options[this.idx].v;}}});}());