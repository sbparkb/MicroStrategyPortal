(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo._HasOwnAvatar","mstrmojo.warehouse._CanToggleAvatarClass","mstrmojo.architect.EnumDragActions","mstrmojo.architect.EnumDataChangeEvents","mstrmojo.array","mstrmojo.css","mstrmojo.Button");var $A=mstrmojo.array,$CSS=mstrmojo.css,$DOM=mstrmojo.dom,$ENUM_DRAG_ACTIONS=mstrmojo.architect.EnumDragActions,$ENUM_DATA_CHANGE_EVENTS=mstrmojo.architect.EnumDataChangeEvents;function onTableChange(evt){var itemColumns=evt.columns;var columnItems=[];$A.forEach(itemColumns,function(column){columnItems.push({n:column.cln,cmid:column.cmid});});this.set("items",columnItems);}mstrmojo.architect.ui.TableColumnsList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo._HasOwnAvatar,mstrmojo.warehouse._CanToggleAvatarClass],{scriptClass:"mstrmojo.architect.ui.TableColumnsList",draggable:true,dropZone:false,getItemMarkup:function getItemMarkup(){return'<div class="item {@cls}" idx="{@idx}" style="{@style}"><span class="item-icn"></span><span>{@n}</span></div>';},init:function init(props){this._super(props);var evtConfig={},containerConfig=evtConfig[this.id]={};containerConfig[$ENUM_DATA_CHANGE_EVENTS.TABLE_LOADED]=onTableChange;mstrApp.getRootController().attachDataChangeListeners(evtConfig);},isDragValid:function isDragValid(){return true;},createAvatar:function createAvatar(sourceNode){var div=document.createElement("div");var item=$DOM.findAncestorByAttr(sourceNode,"idx",true,this.domNode);if(item&&item.node){div.appendChild(item.node.cloneNode(true));div.appendChild(document.createElement("div"));}div.className=this.domNode.className;return div;},getDragData:function getDragData(context){var item=$DOM.findAncestorByAttr(context.src.node,"idx",true,this.domNode);context.createRelations=false;return{item:this.items[item.value]};},getDragAction:function getDragAction(){return $ENUM_DRAG_ACTIONS.PROJECT_TABLE_COLUMN;},toggleAvatarClass:function toggleAvatarClass(cls,isAdd){$CSS.toggleClass(this.avatar,cls,isAdd);}});}());