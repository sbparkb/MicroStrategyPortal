(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.android._IsList","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller");var DURATION=200;function collapsePath(){if(!this._expanded){return false;}this._tchHandler.clear();delete this._tchHandler;this._expanded=false;this.set("width",this._collapsedWidth);var id=this.id;window.setTimeout(function(){var path=mstrmojo.all[id];path.updateScroller(false,DURATION);path._scroller.scrollToEnd(true,false,DURATION);},DURATION);return true;}mstrmojo.android.ui.PathView=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo.android._IsList,mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.android.ui.PathView",scrollerConfig:{bounces:false,showScrollbars:false},setDimensions:function setDimensions(h,w){if(!this._expanded){this.set("width",w);if(this.hasRendered){this.updateScroller();var scroller=this._scroller;if(scroller){scroller.scrollToEnd(true,false,DURATION);}}}},updateScrollerConfig:function updateScrollerConfig(){var cfg=this._super(),icn=this.itemsContainerNode,w=parseInt(this.width,10);if(isNaN(w)){w=this.domNode.clientWidth;}cfg.scrollEl=icn;cfg.noVScroll=true;cfg.origin=cfg.origin||{x:0,y:0};var offsetEnd=Math.max(icn.clientWidth-w,0);var enableScroll=cfg.hScroll=(offsetEnd!==0);if(enableScroll){cfg.offset={x:{start:0,end:offsetEnd}};}else{cfg.offset=null;}return cfg;},onitemsChange:function onitemsChange(evt){var domNode=this.domNode;if(domNode){domNode.style.height=(this.items.length)?"":0;}if(!collapsePath.call(this)&&evt.value.length>evt.valueWas.length){this._scroller.scrollToEnd(true,false,DURATION);}},postselectionChange:function(evt){var added=evt.added,item=added&&this.items[added[0]];if(item){item.fn();}},touchSelectBegin:function touchSelectBegin(touch){if(this._expanded){collapsePath.call(this);return ;}if(!this._scroller.canScroll()){return ;}var idx=this.getItemIdxTouch(touch);if(idx>-1){this._collapsedWidth=this.width;var newWidth=mstrApp.getContentDimensions().w,id=this.id;this._expanded=true;delete this.scrollerConfig.origin;this.set("width",newWidth+"px");this.updateScroller(false,DURATION);this._tchHandler=mstrmojo.touchManager.attachEventListener("touchesBegin",id,function(evt){if(evt.srcId!==id){collapsePath.call(this);}});}},touchSelectEnd:mstrmojo.emptyFn});}());