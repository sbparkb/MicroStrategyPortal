(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function preBuildRendering(){var btns=[],ds=this.ds,cp=this.cp,np=this.np,ps=this.ps,id=this.id,cnt=2;var fnClickHandler=function(){mstrmojo.all[id].set("cp",this.text);};var arw={f:1,p:Math.max(cp-1,1),n:Math.min(cp+1,np),l:np};for(var a in arw){btns.push(new mstrmojo.Button({iconClass:"arrow "+a,title:ds[a],enabled:(arw[a]!==cp),text:arw[a],onclick:fnClickHandler}));}var start=Math.max(Math.min(cp-2,np-4),1),end=Math.min(start+4,np);for(var i=start;i<=end;i++){var b;if(i===cp){if(end-start===4&&np!==5){b=new mstrmojo.DropDownButton({height:"13px",title:ds.a?ds.a:"",text:i,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:ds.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(np).length,onEnter:function(){var t=this.inputNode.value,p=this.parent.parent;if(t===""){p.close();return ;}var v=parseInt(t,10),isValid=!(isNaN(v)||v<1||v>np);if(isValid){mstrmojo.all[id].set("cp",v);p.close();}else{this.setInvalidState(ds.v.replace("###",np).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:ds.ap?ds.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var tb=this.children[0].children[1].inputNode;window.setTimeout(function(){tb.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{b=new mstrmojo.Button({iconClass:"pg on",text:i});}}else{b=new mstrmojo.Button({iconClass:"pg",text:i,onclick:fnClickHandler});}btns.splice(cnt++,0,b);}btns.splice(cnt++,0,new mstrmojo.Label({text:ds.pgs.replace("###",np).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});btns.push(this._iWait);this.addChildren(btns);return this._super?this._super():true;},_set_cp:function _set_cp(n,v){if(parseInt(v,10)!==this.cp){this.raiseEvent({name:"fetch",v:v,iWait:this._iWait});}}});})();