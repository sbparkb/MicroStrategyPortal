(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var $HASH=mstrmojo.hash,$ARR=mstrmojo.array;function fnGetIteratorFn(collection){return function(key){collection[key]=true;};}mstrmojo.rw.model.UpdateKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.UpdateKeysConfig",init:function init(){this.nodes=[];this.selectors={};this.objects={};}});mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig=function getConsolidateConfig(actions){var result={},resultNodes={},resultSelectors={},resultObjects={};$ARR.forEach(actions,function actionIterator(action){var partialUpdate=action.partialUpdate;if(partialUpdate){$ARR.forEach(partialUpdate.nodes,fnGetIteratorFn(resultNodes));$ARR.forEach(partialUpdate.selectors,fnGetIteratorFn(resultSelectors));$ARR.forEach(partialUpdate.objects,function(object){if(!resultObjects[object.id]||object.flag>resultObjects[object.id].flag){resultObjects[object.id]=object;}});delete action.partialUpdate;}$ARR.forEach(action.actions,actionIterator);});if(!$HASH.isEmpty(resultNodes)){result.nodes=$HASH.keyarray(resultNodes);}if(!$HASH.isEmpty(resultSelectors)){result.selectors=$HASH.keyarray(resultSelectors);}if(!$HASH.isEmpty(resultObjects)){result.objects=$HASH.valarray(resultObjects);}return result;};}());