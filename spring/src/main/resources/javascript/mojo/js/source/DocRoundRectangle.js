(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocRoundRectangle=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocRoundRectangle",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocRoundRectangle" title="{@tooltip}" style="{@domNodeCssText}"><div class="mstrmojo-DocRoundRectangle-l1" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l2" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l3" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div style="{@rectNodeCssText}{@rectNodeGradCssText}"></div><div class="mstrmojo-DocRoundRectangle-l3" style="{@bCornersCssText}{@bCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l2" style="{@bCornersCssText}{@bCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l1" style="{@bCornersCssText}{@bCornersCssGradText}"></div></div>',markupSlots:{rectNode:function(){return this.domNode.childNodes[3];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},formatHandlers:{domNode:["top","left","width","z-index","fx"],rectNode:["height","background-color"],tCorners:["background-color"],bCorners:["background-color"]},update:function update(node){if(this.thresholdId||node.data.tid){delete this.fmts;}this.thresholdId=node.data.tid;this.set("visible",!node.data.hidden);},preBuildRendering:function preBuildRendering(){var rtn=this._super();var f=this.getFormats(),topOnly=!!this.defn.topc,delta=topOnly?4:8,$2="(\\d*px)",h=Math.max(parseInt(f.height,10)-delta,0);if(f.height==="100%"){$2="(100%)";h=this.parent.getHeight()-delta;}this.rectNodeCssText=this.rectNodeCssText.replace(new RegExp("(.*height:)"+$2+"(.*)"),"$1"+h+"px$3");if(topOnly){this.bCornersCssText="display:none;";}return rtn;},formatGradient:function formatGradient(gp,flt){var gd=mstrmojo.css.buildGradient(gp.t,gp.sc,gp.ec);if(!gd){return ;}var gdt=gd.n+":"+gd.v+";",bc="background-color:";this.rectNodeGradCssText=gdt;if(gp.t===0){this.tCornersCssGradText=bc+gp.sc+";";this.bCornersCssGradText=bc+gp.ec+";";}else{this.tCornersCssGradText=this.bCornersCssGradText=gdt;}}});}());