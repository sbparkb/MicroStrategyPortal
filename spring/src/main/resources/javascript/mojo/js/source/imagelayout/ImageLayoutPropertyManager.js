(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.num","mstrmojo.VisEnum","mstrmojo.gm.GMEnums","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.VisUtility");var $VISUTIL=mstrmojo.VisUtility,$NUM=mstrmojo.num,PROPERTIES_TYPE=mstrmojo.VisEnum.IMAGELAYOUT_PROPERTIES,ENUM_LEGEND_MODE=mstrmojo.VisEnum.EnumLegendMode,SUFFIX_FONT_FAMILY="FntFml",SUFFIX_FONT_STYLE="FntStyle",SUFFIX_FONT_SIZE="FntSz",SUFFIX_FONT_COLOR="FntClr",SUFFIX_COLOR="Clr",SUFFIX_BORDER_STYLE="CmbStyle",SUFFIX_FILL_TRANS="FillTrans",$ENUM_FONT_STYLE_VALUE=mstrmojo.chart.enums.EnumFontStyle,$ENUM_LINE_STYLE=mstrmojo.gm.EnumCombinedLineStyle;var LEVEL_SEPARATOR="@",NAME_FIELD_SEPARATOR=":",OPT_SEPARATOR="#";var enableDebug=false;function debugLog(msg){if(enableDebug&&window.console){window.console.log(msg);}}function convertLineStyle(){var lineStyleValue=parseInt(this.getFormatPropertyValue(PROPERTIES_TYPE.SHAPE_BORDER_STYLE),10),lineStyle=this.convertLineStyle(lineStyleValue);this.shapeBorderWidth=lineStyle.borderWidth;this.shapeBorderLineDash=lineStyle.lineDashArray;}function convertShapeFillOpacity(){var opacityPercent=parseInt(this.getFormatPropertyValue(PROPERTIES_TYPE.SHAPE_FILL_OPC_PER),10);this.shapeFillOpacity=opacityPercent/100;this.polygonUnselectedOpacity=opacityPercent*5/800;this.hoverOpacity=opacityPercent*5/800;}function parseBoolean(value){return value===true||value==="true";}function parsePropValue(propKey,propValue){switch(propKey){case PROPERTIES_TYPE.DATA_LABEL_SWITCH:case PROPERTIES_TYPE.SHAPE_BORDER_STYLE:case PROPERTIES_TYPE.SHAPE_FILL_OPC_PER:case PROPERTIES_TYPE.DATA_LABEL_FONT_SIZE:case PROPERTIES_TYPE.DATA_LABEL_FONT_STYLE:case PROPERTIES_TYPE.LEGEND_POSITION:case PROPERTIES_TYPE.LEGEND_FONT_SIZE:case PROPERTIES_TYPE.LEGEND_FONT_STYLE:case PROPERTIES_TYPE.LEGEND_MODE:case PROPERTIES_TYPE.ALL_MATRIX_LINE_STYLE:case PROPERTIES_TYPE.H_MATRIX_LINE_STYLE:case PROPERTIES_TYPE.V_MATRIX_LINE_STYLE:propValue=parseInt(propValue,10);break;case PROPERTIES_TYPE.LEGEND_SCALE:propValue=parseFloat(propValue);break;case PROPERTIES_TYPE.LEGEND_SHOW:propValue=parseBoolean(propValue);break;}return propValue;}function getBackGroundColorFromFormats(){var formats=this.vis.getFormats();return formats&&formats["background-color"];}mstrmojo.imagelayout.ImageLayoutPropertyManager=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.imagelayout.ImageLayoutPropertyManager",vis:null,CONSTANTS:{DISPLAY_MODE:{AUTOMATIC:"0",AREA:"1",BUBBLE:"2"},MAX_RATIO_LIMIT:{UP_LIMIT:1,LOW_LIMIT:0.01},DATA_LABEL:{NONE:0,SHOW_TEXT:1,SHOW_VALUE:2,SHOW_BOTH:3},EnumMinSizeType:{AUTO:"1",MANUAL:"2",PROPORTIONAL:"3"},EnumMaxSizeType:{AUTO:"0",MANUAL:"1"},LINE_STYLE:{THIN:1,THICK:2,DASHED:3,DOTTED:4},EnumLegendSlot:{RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8}},initPropsFromVP:function initPropsFromVP(){if(!this._hasInitFromVP){var vp=this.vis.getVp(),props=this.props,propKey;var oldShapeFillOpcKey="sfop";if(vp[oldShapeFillOpcKey]){this.setPropsWithSyncToVP(PROPERTIES_TYPE.SHAPE_FILL_OPC_PER,vp[oldShapeFillOpcKey]);delete vp[oldShapeFillOpcKey];}for(propKey in props){if(vp.hasOwnProperty(propKey)){this.setProps(propKey,vp[propKey]);}else{vp[propKey]=props[propKey];}}this._hasInitFromVP=true;}},initPropWithDefaultValue:function initPropWithDefaultValue(){var me=this,CONSTANTS=me.CONSTANTS,isDarkTheme=true;if(this.vis){isDarkTheme=this.vis.getThemeMode()===this.vis.CONSTANTS.THEME.DARK;}this.setProps(PROPERTIES_TYPE.DISPLAY_MODE,CONSTANTS.DISPLAY_MODE.AUTOMATIC);this.setProps(PROPERTIES_TYPE.MAP_FILE_PATH,"");this.setProps(PROPERTIES_TYPE.MAX_SIZE_TYPE,CONSTANTS.EnumMaxSizeType.AUTO);this.setProps(PROPERTIES_TYPE.MAX_SIZE_VALUE,$NUM.toLocaleString(0.9));this.setProps(PROPERTIES_TYPE.MIN_SIZE_TYPE,CONSTANTS.EnumMinSizeType.PROPORTIONAL);this.setProps(PROPERTIES_TYPE.MIN_SIZE_VALUE,$NUM.toLocaleString(0.2));this.setProps(PROPERTIES_TYPE.SHAPE_FILL_OPC_PER,80);this.setProps(PROPERTIES_TYPE.SHAPE_BORDER_STYLE,$ENUM_LINE_STYLE.THICK);this.setProps(PROPERTIES_TYPE.BLANK_MAP_BORDER_COLOR,isDarkTheme?"#4c4c4c":"#ffffff");this.setProps(PROPERTIES_TYPE.BLANK_MAP_COLOR,isDarkTheme?"#8b8b8b":"#c3c3c3");this.setProps(PROPERTIES_TYPE.DEFAULT_MAP_COLOR,isDarkTheme?"#21c3ff":"#70a8cf");this.setProps(PROPERTIES_TYPE.DEFAULT_BUBBLE_COLOR,isDarkTheme?"#21c3ff":"#1f77b4");this.setProps(PROPERTIES_TYPE.DEFAULT_MAP_BORDER_COLOR,isDarkTheme?"#4c4c4c":"#ffffff");this.setProps(PROPERTIES_TYPE.DEFAULT_BUBBLE_BORDER_COLOR,isDarkTheme?"#a6a6a6":"#818181");this.setProps(PROPERTIES_TYPE.DATA_LABEL_SWITCH,CONSTANTS.DATA_LABEL.NONE);this.setProps(PROPERTIES_TYPE.DATA_LABEL_FONT_SIZE,11);this.setProps(PROPERTIES_TYPE.DATA_LABEL_FONT_FAMILY,"Tahoma");this.setProps(PROPERTIES_TYPE.DATA_LABEL_FONT_COLOR,"#000000");this.setProps(PROPERTIES_TYPE.DATA_LABEL_FONT_STYLE,0);this.setProps(PROPERTIES_TYPE.LEGEND_SHOW,true);this.setProps(PROPERTIES_TYPE.LEGEND_SCALE,1);this.setProps(PROPERTIES_TYPE.LEGEND_POSITION,CONSTANTS.EnumLegendSlot.RIGHT_MIDDLE);this.setProps(PROPERTIES_TYPE.LEGEND_MODE,ENUM_LEGEND_MODE.RESTORED);this.setProps(PROPERTIES_TYPE.LEGEND_BACKGROUND_COLOR,isDarkTheme?"#353739":"#eeeeee");this.setProps(PROPERTIES_TYPE.LEGEND_FONT_FAMILY,"Arial");this.setProps(PROPERTIES_TYPE.LEGEND_FONT_SIZE,8);this.setProps(PROPERTIES_TYPE.LEGEND_FONT_COLOR,isDarkTheme?"#A8A8A8":"#747474");this.setProps(PROPERTIES_TYPE.LEGEND_FONT_STYLE,0);this.setProps(PROPERTIES_TYPE.LEGEND_OPC_PER,0);var matrixLineColor=isDarkTheme?"#494949":"#b0b0b0";this.setProps(PROPERTIES_TYPE.H_MATRIX_LINE_COLOR,matrixLineColor);this.setProps(PROPERTIES_TYPE.V_MATRIX_LINE_COLOR,matrixLineColor);this.setProps(PROPERTIES_TYPE.ALL_MATRIX_LINE_COLOR,matrixLineColor);this.setProps(PROPERTIES_TYPE.H_MATRIX_LINE_STYLE,$ENUM_LINE_STYLE.THIN);this.setProps(PROPERTIES_TYPE.V_MATRIX_LINE_STYLE,$ENUM_LINE_STYLE.THIN);this.setProps(PROPERTIES_TYPE.ALL_MATRIX_LINE_STYLE,$ENUM_LINE_STYLE.THIN);this.isMultipleIL=false;},init:function init(props){this._super(props);this._hasInitFromVP=false;this.props={};this.targetSelectors={};this._fmtPropsListeners={};this._fmtSelListeners={};this.initPropWithDefaultValue();},registerSelector:function(selectorName,control){this.targetSelectors[selectorName]=control;},onTargetSelectionChanged:function(selectorName,value){var controls=selectorName&&this._fmtSelListeners[selectorName];(controls||[]).forEach(function(control){if(!control.onSelectorsValueChanged){return debugLog("[Manager] onSelectorsValueChanged not defined for control: "+control.controlName);}control.onSelectorsValueChanged(selectorName,value);},this);},_addListener:function(bindings,listenOn,control){var listeners=bindings[listenOn]||[];listeners.push(control);bindings[listenOn]=listeners;},_removeListener:function(bindings,listenOn,control){var listeners=(bindings&&bindings[listenOn])||[];listeners.splice(listeners.indexOf(control));bindings[listenOn]=listeners;},registerFormatControl:function registerFormatControl(control){if(!control){return ;}var listenOn=control.listenFormatProps;(listenOn||[]).forEach(function(smartName){this._addListener(this._fmtPropsListeners,smartName,control);},this);listenOn=control.listenSelector;(listenOn||[]).forEach(function(selName){this._addListener(this._fmtSelListeners,selName,control);},this);},clearRegisterFormatControl:function clearRegisterFormatControl(){this.targetSelectors={};this._fmtPropsListeners={};this._fmtSelListeners={};},removeRegisterFormatControl:function removeRegisterFormatControl(control){var listenOn=control.listenFormatProps;if(this._fmtPropsListeners){(listenOn||[]).forEach(function(smartName){this._removeListener(this._fmtPropsListeners,smartName,control);},this);}if(this._fmtSelListeners){listenOn=control.listenSelector;(listenOn||[]).forEach(function(selName){this._removeListener(this._fmtSelListeners,selName,control);},this);}},getListentingControllers:function getListentingControllers(smartName){return this._fmtPropsListeners&&this._fmtPropsListeners[smartName];},notifyListeningControllers:function notifyListeningControllers(smartName,value){var listeners=this.getListentingControllers(smartName);if(listeners){listeners.forEach(function(control){if(control.onFmtPropsChanged){control.onFmtPropsChanged(smartName,value);}});}},getSelectedValue:function(selectorName,fieldName,suffixName){var sel=this.getTargetSelector(selectorName);fieldName=fieldName||"v";return sel&&sel.getSelectedItem(suffixName)&&sel.getSelectedItem(suffixName)[fieldName];},getFmtPropName:function(smartName){var propName,separatorIdx=smartName.indexOf(LEVEL_SEPARATOR);if(separatorIdx>-1){var selName=smartName.slice(0,separatorIdx),propNameSuffix=smartName.slice(separatorIdx+1);propName=this.getSelectedValue(selName,"prefix",propNameSuffix)+propNameSuffix;}else{propName=smartName;}return propName;},setProps:function(propKey,value){this.props[propKey]=value;switch(propKey){case PROPERTIES_TYPE.SHAPE_BORDER_STYLE:convertLineStyle.call(this);break;case PROPERTIES_TYPE.SHAPE_FILL_OPC_PER:convertShapeFillOpacity.call(this);break;}},setPropsWithSyncToVP:function(propKey,value){this.setProps(propKey,value);var vis=this.vis,vp=vis.getProperties();vp[propKey]=value;},setFormatPropertyValue:function setFormatPropertyValue(smartName,value){var props=this.props,propertyChangeHandler,vis=this.vis,prevValue;smartName=this.getFmtPropName(smartName);prevValue=this.getFormatPropertyValue(smartName);if(prevValue===value){return ;}if(props.hasOwnProperty(smartName)){this.setProps(smartName,value);}else{this[smartName]=value;}this.notifyListeningControllers(smartName,value);if(smartName===PROPERTIES_TYPE.DATA_LABEL_SWITCH){propertyChangeHandler=function(){this.reDrawDataLabels();};}else{if(smartName===PROPERTIES_TYPE.DATA_LABEL_FONT_SIZE||smartName===PROPERTIES_TYPE.DATA_LABEL_FONT_FAMILY||smartName===PROPERTIES_TYPE.DATA_LABEL_FONT_COLOR||smartName===PROPERTIES_TYPE.DATA_LABEL_FONT_STYLE){propertyChangeHandler=function(){this.reDrawDataLabels();};}else{if(smartName===PROPERTIES_TYPE.DISPLAY_MODE||smartName===PROPERTIES_TYPE.MIN_SIZE_VALUE||smartName===PROPERTIES_TYPE.MIN_SIZE_TYPE){propertyChangeHandler=function(){this.reDrawMaps(true);};}else{if(smartName===PROPERTIES_TYPE.MAX_SIZE_VALUE||smartName===PROPERTIES_TYPE.MAX_SIZE_TYPE){propertyChangeHandler=function(){var modelData=this.modelData;if(modelData&&modelData.bubbleSizeParas){delete modelData.bubbleSizeParas;}this.reDrawMaps(true);};}else{if(smartName===PROPERTIES_TYPE.H_MATRIX_LINE_COLOR||smartName===PROPERTIES_TYPE.V_MATRIX_LINE_COLOR){if(this.getFormatPropertyValue(PROPERTIES_TYPE.H_MATRIX_LINE_COLOR)!==this.getFormatPropertyValue(PROPERTIES_TYPE.V_MATRIX_LINE_COLOR)){this.setPropsWithSyncToVP(PROPERTIES_TYPE.ALL_MATRIX_LINE_COLOR,-1);}else{this.setPropsWithSyncToVP(PROPERTIES_TYPE.ALL_MATRIX_LINE_COLOR,value);}propertyChangeHandler=function(){var doRow=smartName.substr(0,1)==="h";this.imageLayoutTable.doUpdateInChartSplitters(doRow,!doRow);};}else{if(smartName===PROPERTIES_TYPE.H_MATRIX_LINE_STYLE||smartName===PROPERTIES_TYPE.V_MATRIX_LINE_STYLE){if(this.getFormatPropertyValue(PROPERTIES_TYPE.H_MATRIX_LINE_STYLE)!==this.getFormatPropertyValue(PROPERTIES_TYPE.V_MATRIX_LINE_STYLE)){this.setPropsWithSyncToVP(PROPERTIES_TYPE.ALL_MATRIX_LINE_STYLE,-1);}else{this.setPropsWithSyncToVP(PROPERTIES_TYPE.ALL_MATRIX_LINE_STYLE,value);}propertyChangeHandler=function(){var doRow=smartName.substr(0,1)==="h";this.imageLayoutTable.doUpdateInChartSplitters(doRow,!doRow);};}else{if(smartName===PROPERTIES_TYPE.ALL_MATRIX_LINE_COLOR){this.setPropsWithSyncToVP(PROPERTIES_TYPE.H_MATRIX_LINE_COLOR,value);this.setPropsWithSyncToVP(PROPERTIES_TYPE.V_MATRIX_LINE_COLOR,value);propertyChangeHandler=function(){this.imageLayoutTable.doUpdateInChartSplitters(true,true);};}else{if(smartName===PROPERTIES_TYPE.ALL_MATRIX_LINE_STYLE){this.setPropsWithSyncToVP(PROPERTIES_TYPE.H_MATRIX_LINE_STYLE,value);this.setPropsWithSyncToVP(PROPERTIES_TYPE.V_MATRIX_LINE_STYLE,value);propertyChangeHandler=function(){this.imageLayoutTable.doUpdateInChartSplitters(true,true);};}else{if(smartName===PROPERTIES_TYPE.MAP_FILE_PATH){propertyChangeHandler=function(){this.reRender();};}else{if(smartName===PROPERTIES_TYPE.SHAPE_FILL_OPC_PER){propertyChangeHandler=function(){this.reDrawMaps(true);};}else{if(smartName===PROPERTIES_TYPE.SHAPE_BORDER_STYLE){propertyChangeHandler=function(){this.reDrawMaps(true);};}else{if(smartName===PROPERTIES_TYPE.LEGEND_SCALE||smartName===PROPERTIES_TYPE.LEGEND_POSITION||smartName===PROPERTIES_TYPE.LEGEND_MODE||smartName===PROPERTIES_TYPE.LEGEND_SHOW){propertyChangeHandler=function(){this.reRender();};}else{if(smartName===PROPERTIES_TYPE.LEGEND_FONT_SIZE||smartName===PROPERTIES_TYPE.LEGEND_FONT_FAMILY||smartName===PROPERTIES_TYPE.LEGEND_FONT_COLOR||smartName===PROPERTIES_TYPE.LEGEND_FONT_STYLE||smartName===PROPERTIES_TYPE.LEGEND_BACKGROUND_COLOR||smartName===PROPERTIES_TYPE.LEGEND_OPC_PER){propertyChangeHandler=function(){this.renderLegend();};}else{if(smartName===PROPERTIES_TYPE.SHAPE_FILL_COLOR){this.setPropsWithSyncToVP(PROPERTIES_TYPE.DEFAULT_MAP_COLOR,value);this.setPropsWithSyncToVP(PROPERTIES_TYPE.DEFAULT_BUBBLE_COLOR,value);propertyChangeHandler=function(){this.reDrawMaps(true);};}else{if(smartName===PROPERTIES_TYPE.SHAPE_BORDER_COLOR){this.setPropsWithSyncToVP(PROPERTIES_TYPE.DEFAULT_MAP_BORDER_COLOR,value);this.setPropsWithSyncToVP(PROPERTIES_TYPE.DEFAULT_BUBBLE_BORDER_COLOR,value);propertyChangeHandler=function(){this.reDrawMaps(true);};}else{if(smartName==="calcDisplayMode"){var isAreaMode=value===this.CONSTANTS.DISPLAY_MODE.AREA,defaultShapeFillColor=isAreaMode?this.getFormatPropertyValue(PROPERTIES_TYPE.DEFAULT_MAP_COLOR):this.getFormatPropertyValue(PROPERTIES_TYPE.DEFAULT_BUBBLE_COLOR),defaultShapeBorderColor=isAreaMode?this.getFormatPropertyValue(PROPERTIES_TYPE.DEFAULT_MAP_BORDER_COLOR):this.getFormatPropertyValue(PROPERTIES_TYPE.DEFAULT_BUBBLE_BORDER_COLOR);this.setPropsWithSyncToVP(PROPERTIES_TYPE.SHAPE_FILL_COLOR,defaultShapeFillColor);this.setPropsWithSyncToVP(PROPERTIES_TYPE.SHAPE_BORDER_COLOR,defaultShapeBorderColor);}else{if(smartName==="bgFillClr"){$VISUTIL.changeWidgetBackground(vis,value,prevValue);}}}}}}}}}}}}}}}}}if(props.hasOwnProperty(smartName)&&propertyChangeHandler){propertyChangeHandler.call(vis);vis.setProperty(smartName,value,{suppressData:true,clientUndoRedoCallback:function(){this.propertyManager.setProps(smartName,this.getVp()[smartName]);this.legendFixedW=null;propertyChangeHandler.call(this);}});}},getFormatPropertyValue:function getFormatPropertyValue(smartName){var formatPropertyName=this.getFmtPropName(smartName),props=this.props,value;if(smartName==="bgFillClr"){return getBackGroundColorFromFormats.call(this);}if(props.hasOwnProperty(formatPropertyName)){value=props[formatPropertyName];}else{value=this[smartName];}value=parsePropValue(smartName,value);return value;},getMatrixLineStyles:function getMatrixLineStyles(isVertical){var linePropName=isVertical?PROPERTIES_TYPE.V_MATRIX_LINE_STYLE:PROPERTIES_TYPE.H_MATRIX_LINE_STYLE,colorPropName=isVertical?PROPERTIES_TYPE.V_MATRIX_LINE_COLOR:PROPERTIES_TYPE.H_MATRIX_LINE_COLOR,lineStyle=this.convertLineStyle(this.getFormatPropertyValue(linePropName)),borderColor=this.getFormatPropertyValue(colorPropName),matrixLineStyles={borderWidth:lineStyle.borderWidth+"px",borderColor:borderColor,},borderStyleName=isVertical?"borderLeftStyle":"borderTopStyle";matrixLineStyles[borderStyleName]=lineStyle.borderStyle;return matrixLineStyles;},convertLineStyle:function convertLineStyle(lineStyle){var borderWidth=1,borderStyle="solid",lineDashArray=[];switch(lineStyle){case $ENUM_LINE_STYLE.THIN:borderWidth=1;borderStyle="solid";break;case $ENUM_LINE_STYLE.THICK:borderWidth=2;borderStyle="solid";break;case $ENUM_LINE_STYLE.DASHED:borderWidth=1;borderStyle="dashed";lineDashArray=[2];break;case $ENUM_LINE_STYLE.DOTTED:borderWidth=1;borderStyle="dotted";lineDashArray=[1];break;case $ENUM_LINE_STYLE.NONE:borderWidth=0;borderStyle="none";break;default:borderWidth=1;borderStyle="solid";}return{borderWidth:borderWidth,borderStyle:borderStyle,lineDashArray:lineDashArray};},getLegendStyles:function getLegendStyles(){var fontStyles=this.convertFontStyle(this.getFormatPropertyValue(PROPERTIES_TYPE.LEGEND_FONT_STYLE));return{backgroundColor:this.getFormatPropertyValue(PROPERTIES_TYPE.LEGEND_BACKGROUND_COLOR),color:this.getFormatPropertyValue(PROPERTIES_TYPE.LEGEND_FONT_COLOR),fontFamily:this.getFormatPropertyValue(PROPERTIES_TYPE.LEGEND_FONT_FAMILY),fontSize:this.getFormatPropertyValue(PROPERTIES_TYPE.LEGEND_FONT_SIZE)+"pt",fontStyle:fontStyles.fontStyle,fontWeight:fontStyles.fontWeight,textDecoration:fontStyles.textDecoration,opacity:this.getFormatPropertyValue(PROPERTIES_TYPE.LEGEND_OPC_PER)/100};},generateSmartName:function generateSmartName(prefix,suffix,fieldAlias,levelSelectorName,formatTarget){function fnHash(key){var levelSelector=key.levelSelector,optSfx=levelSelector&&(levelSelector.opt||levelSelector.key),rst=(key.namePrefix||"")+(key.nameSuffix||"");if(key.filedAlias){rst+=NAME_FIELD_SEPARATOR+key.filedAlias;}if(optSfx){rst+=OPT_SEPARATOR+optSfx;}return rst;}var key={namePrefix:prefix,nameSuffix:suffix,filedAlias:fieldAlias,levelSelector:levelSelectorName,target:formatTarget},sn=fnHash(key);return sn;},getSmartNamesMapForFontGroup:function getSmartNamesMapForFontGroup(namePrefix,nameSuffix,fieldAlias,placeHolderPosition,levelSelector,formatTarget){var me=this;function getSmartName(valForPh){var sfx=nameSuffix,fld=fieldAlias;if(placeHolderPosition==="fld"){fld=(fld||"")+valForPh;}else{sfx=(sfx||"")+valForPh;}return me.generateSmartName(namePrefix,sfx,fld,levelSelector,formatTarget);}return{fontFamily:getSmartName(SUFFIX_FONT_FAMILY),fontStyle:getSmartName(SUFFIX_FONT_STYLE),fontSize:getSmartName(SUFFIX_FONT_SIZE),fontColor:getSmartName(SUFFIX_FONT_COLOR)};},getSmartNamesMapForColorFormat:function getSmartNamesMapForColorFormat(namePrefix){function getSmartName(valForPh){return(namePrefix||"")+valForPh;}return{color:getSmartName(SUFFIX_COLOR),fillTrans:getSmartName(SUFFIX_FILL_TRANS)};},convertFontStyle:function convertFontStyle(fontStyleValue){var styles={fontStyle:(fontStyleValue&$ENUM_FONT_STYLE_VALUE.FS_ITALIC)>0?"italic":"normal",fontWeight:(fontStyleValue&$ENUM_FONT_STYLE_VALUE.FS_BOLD)>0?"bold":"normal",textDecoration:""};if((fontStyleValue&$ENUM_FONT_STYLE_VALUE.FS_STRIKETHROUGH)>0){styles.textDecoration+=" line-through";}if((fontStyleValue&$ENUM_FONT_STYLE_VALUE.FS_UNDERLINE)>0){styles.textDecoration+=" underline";}return styles;},getSmartNamesMapForLineGroup:function getSmartNamesMapForLineGroup(namePrefix,nameSuffix,fieldAlias,placeHolderPosition,levelSelector,formatTarget){var me=this;function getSmartName(valForPh){var sfx=nameSuffix,fld=fieldAlias;if(placeHolderPosition==="fld"){fld=(fld||"")+valForPh;}else{sfx=(sfx||"")+valForPh;}return me.generateSmartName(namePrefix,sfx,fld,levelSelector,formatTarget);}return{lineColor:getSmartName(SUFFIX_COLOR),lineStyle:getSmartName(SUFFIX_BORDER_STYLE)};},getDependingSelectorNames:function getDependingSelectorNames(smartName){var selName,separatorIdx=smartName.indexOf(LEVEL_SEPARATOR);if(separatorIdx>-1){selName=smartName.slice(0,separatorIdx);}else{selName=smartName;}return selName;},getTargetSelector:function getTargetSelector(selectorName){if(!this.targetSelectors[selectorName]){debugLog("Selector with name "+selectorName+" does not found.");}return this.targetSelectors[selectorName];},destroy:function destroy(ignoreDom){if(this._fmtPropsListeners){delete this._fmtPropsListeners;}if(this._fmtSelListeners){delete this._fmtSelListeners;}if(this.targetSelectors){delete this.targetSelectors;}this._super(ignoreDom);delete this.vis;}});}());