(function(){mstrmojo.requiresCls("mstrmojo.TextArea","mstrmojo._CanValidate");var _VAL=mstrmojo.validation,SC=_VAL.STATUSCODE,_VALIDATOR=_VAL.VALIDATOR,_DTP=mstrmojo.expr.DTP,NO_VALIDATION=0,PHONE_NO=1,EMAIL_ADDRESS=2,ZIP_CODE=3,SOCIAL_SECURITY_NO=4,REG_EXP=5;var $CSS=mstrmojo.css,$VALIDATE=mstrmojo.validation,$VALIDATE_TRIGGER=$VALIDATE.TRIGGER,$VALIDATE_CODE=$VALIDATE.STATUSCODE;mstrmojo.TextAreaValidation=mstrmojo.declare(mstrmojo.TextArea,[mstrmojo._CanValidate],{scriptClass:"mstrmojo.TextAreaValidation",markupString:'<textarea id="{@id}" class="mstrmojo-TextArea {@cssClass}"  style="{@cssText}" title="{@tooltip}" placeholder="{@placeholderText}" rows="{@rows}" cols="{@cols}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keydown,keyup,blur,input></textarea>',init:function(props){if(this._super){this._super(props);}this.constraints=mstrmojo.hash.copy();var di=props.dic,c=this.constraints={trigger:mstrmojo.validation.TRIGGER.ONKEYUP},dt=di.dt;if(di.ml){this.maxLength=di.ml;}if(di.psw){this.type="password";this.value=this.lv="";this.owner.applyPasswordMask&&this.owner.applyPasswordMask();}if(_VAL.isNumeric(dt)||_VAL.isInt(dt)||_VAL.isString(dt)){this.dtp=dt;}switch(di.vm){case PHONE_NO:c.validator=_VALIDATOR.VALIDATE_PHONENO;break;case EMAIL_ADDRESS:c.validator=_VALIDATOR.VALIDATE_EMAIL;break;case ZIP_CODE:c.validator=_VALIDATOR.VALIDATE_ZIPCODE;break;case SOCIAL_SECURITY_NO:c.validator=_VALIDATOR.VALIDATE_SSN;break;case REG_EXP:c.regExp=new RegExp("^"+di.rgx+"$");break;}c.min=di.emin?di.min:null;c.max=di.emax?di.max:null;c.maxLen=(di.ml!==undefined)?di.ml:null;c.minLen=(di.mnl!==undefined)?di.mnl:null;if(di.req||di.emin){this.required=true;}},preinput:function(){this._super();this.validate();},undoValidate:function(){this.set("value","");this.parent.set("value","");this.set("validationStatus",{code:0});},handleInvalid:function(){if(mstrmojo.all.mojoConfirmx9){return ;}var me=this;mstrmojo.confirm(this.validationStatus.msg+"\n("+mstrmojo.desc(9199)+")",null,{buttons:[{scriptClass:"mstrmojo.DICAutoFocusButton",text:mstrmojo.desc(1442),onclick:function(){me.focus();}},{scriptClass:"mstrmojo.Button",text:mstrmojo.desc(221),onclick:function(){me.undoValidate();}}],title:mstrmojo.desc(7548),cssClass:"mstrmojo-TextFieldDIC-ValidationError"});},});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.TextAreaValidation,{onvalidationStatusChange:function(){var vs=this.validationStatus;if(!vs){return ;}var inputNode=this.inputNode,isInvalid=(vs.code>$VALIDATE_CODE.VALID),css=this.constraints.invalidCssClass;$CSS.toggleClass(inputNode,css||"mstrmojo-TextBox-ErrValidation",isInvalid);var title=isInvalid?vs.msg:this._original_tooltip;if(title!==undefined&&title!==null){inputNode.setAttribute("title",title);}}});})();