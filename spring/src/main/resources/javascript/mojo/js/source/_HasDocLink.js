(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.css");var timeoutId=null;function getReportViewMode(object){var __result=1;if(object.tstp===769){__result=2;}else{if(object.tstp===774){__result=3;}}return __result;}function getUrlWithExecution(target){var ctxt=mstrApp.name,url=ctxt+"?",reportViewMode=-1,addArg=function(argName,val){url+=argName+"="+val+"&";};if(!!target){switch(target.ttp){case 3:addArg("evt","4001");addArg("reportID",target.tid);reportViewMode=getReportViewMode(target);if(reportViewMode!==-1){addArg("reportViewMode",reportViewMode);}break;case 55:if(target.tstp===14080){addArg("evt","32001");addArg("documentID",target.tid);}else{if(target.tvmd&(8192|2048)&&!((target.tvmd&2048&&mstrApp.features["run-vi-flash"]))){addArg("evt","3140");addArg("documentID",target.tid);if(mstrmojo.dom.isIE6||mstrmojo.dom.isIE7||mstrmojo.dom.isIE8){mstrmojo.alert(mstrmojo.desc(12187,"To work with HTML5 dashboards, please turn off your browser Compatibility View or update your browser to one of the following browser versions: Chrome, Firefox, Safari, Internet Explorer 9 or above."));return null;}}else{addArg("evt","2048001");addArg("objectID",target.tid);addArg("visMode","0");}}break;}}return url;}mstrmojo._HasDocLink=mstrmojo.provide("mstrmojo._HasDocLink",{_mixinName:"mstrmojo._HasDocLink",url:"",target:"",linkEnabled:true,ifw:"",update:function update(node){var d=node.defn;this.url=node.data.url||d.url;if(d.target){this.target=d.target;}if(d.ifw){this.ifw=d.ifw;}this._super(node);},postBuildRendering:function postBuildRendering(){if(this.url||this.ifw){mstrmojo.css.addClass(this.domNode,"hasLink");}var doc=this.controller&&this.controller.view,layout=doc&&doc.getCurrentLayout&&doc.getCurrentLayout();if(layout&&layout.addLinkInfo){layout.addLinkInfo(this.id,{url:this.url,target:this.target,src:this});}return this._super();},setLinkEnabled:function setLinkEnabled(value){this.linkEnabled=value;var node=this.domNode;if(!node){return ;}var childNodes=node.childNodes,lastChild=childNodes[childNodes.length-1],maskId=this.id+"_mask",mask=(lastChild.id===maskId)?lastChild:null;if(value){if(mask){node.removeChild(mask);delete this._mask;}}else{if(!mask){mask=document.createElement("div");mask.className="mstrmojo-DocLinkMask";mask.id=maskId;mask.innerHTML="&nbsp;";node.appendChild(mask);}}},cancelDocLink:false,onclick:function(){if(timeoutId===null){var that=this,cl=function(){if(that.linkEnabled&&!that.isEditing){var drillLinkItems=that.drillLinkItems,defaultLink=drillLinkItems&&drillLinkItems[0],url=that.url||(defaultLink&&defaultLink.url);if(that.ifw){that.model.showInfoWin(that.ifw,(that.getAnchor&&that.getAnchor())||that.domNode,"v",true);}else{if(url){that.model.executeLink(url,that.target,that);}else{if(that.node&&that.node.data&&that.node.data.tid){url=getUrlWithExecution(that.node.data);if(!!url){that.model.executeLink(url,that.target,that);}}}}}};timeoutId=window.setTimeout(function(){if(!that.cancelDocLink){cl();}that.cancelDocLink=false;timeoutId=null;},200);}},hasActiveLink:function(){var res=false;if(this.linkEnabled){var drillLinkItems=this.drillLinkItems,defaultLink=drillLinkItems&&drillLinkItems[0],url=this.url||(defaultLink&&defaultLink.url);if(this.node&&this.node.data&&this.node.data.tid){res=true;}else{if(url){res=true;}}}return res;}});}());