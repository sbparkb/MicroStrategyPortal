(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.DI.DIModel","mstrmojo.DI.DIConstants");mstrmojo.requiresDescs(11636);var $FUNC=mstrmojo.func,$HASH=mstrmojo.hash,defaultExtras={style:{params:{treesToRender:1}},hideCancel:true};mstrmojo.DI.controller.DIDocController=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.DI.controller.DIDocController",submitUpdate:function(actions,callback,extras){var diApp=mstrApp,viApp=mstrApp.launchingApp,cb={success:function(res){window.mstrApp=diApp;if(res&&res.mid){mstrApp.getRootController().getModel().analysisID=res.mid;}},failure:function(){window.mstrApp=diApp;}};window.mstrApp=viApp;if(mstrApp.rootCtrl.docCtrl){mstrApp.rootCtrl.docCtrl.cmdMgr.getInterimCmd().submitInterim(actions,$FUNC.wrapMethods(cb,callback,{}),extras);}else{cb.success();callback.success();}},createNewManagedDataset:function(callback,params){var action={act:"createDataset",mgo:true,name:mstrmojo.desc(11636,"New Dataset"),prm:true,rid:"4B43EC5548911FC01AF5D3ACE3F16256",disablePU:true,execFlags:131072};this.submitUpdate($HASH.copy(params,action),callback,{style:{params:{treesToRender:1}},hideCancel:true});},removeDataset:function(callback,dataset){var action={act:"removeDataset",did:dataset&&dataset.id,disablePU:true};if(dataset&&dataset.id){this.submitUpdate(action,callback,defaultExtras);}},renameDataset:function renameDataset(did,name,callback){var action={act:"renameDataset",datasetID:did,name:name};this.submitUpdate(action,callback,defaultExtras);},setDatasetDDA:function(callback,dataset){var action={act:"toggleDatasetServeMode",execFlags:131072,dsid:dataset&&dataset.id,dsm:2};var extras={style:{params:{treesToRender:1}},params:{stateID:-1}};if(dataset&&dataset.id){this.submitUpdate(action,callback,extras);}},getVIModelDatasets:function(){var viApp=mstrApp.launchingApp,datasets=null,ds=[];if(viApp&&viApp.rootCtrl&&viApp.rootCtrl.docCtrl&&viApp.rootCtrl.docCtrl.model){datasets=viApp.rootCtrl.docCtrl.model.datasets;$HASH.forEach(datasets,function(dataset){ds.push(dataset);});}return ds;},getVIDocData:function(callback){var extras={style:{params:{treesToRender:0}},hideCancel:true};this.submitUpdate([],callback,extras);}});}());