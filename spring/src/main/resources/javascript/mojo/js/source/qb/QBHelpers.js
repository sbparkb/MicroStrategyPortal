(function(){mstrmojo.requiresCls("mstrmojo.DI.ui.dialogs.DISaveAsDialog");mstrmojo.requiresDescs(1442,3415,3416,12376,12377,12925);var $DESC=mstrmojo.desc;var QB_SAVEAS_DIALOG_ID;mstrmojo.qb.QBHelpers={showSaveAsDialog:function showSaveAsDialog(callback,defaultNameObj){var ERR_OK=0,ERR_INVALID_NAME=-1,ERR_EXISTING_NAME=-2;var dialog;dialog=QB_SAVEAS_DIALOG_ID&&mstrmojo.all[QB_SAVEAS_DIALOG_ID];if(!dialog){dialog=new mstrmojo.DI.ui.dialogs.DISaveAsDialog();QB_SAVEAS_DIALOG_ID=dialog.id;}dialog.set("name",defaultNameObj.name||"");dialog.set("desc",defaultNameObj.desc||"");dialog.set("saveParams",{});dialog.set("retainPrevFolder",true);if(mstrApp.cubeSaveFolderId){dialog.set("rootFolderID",mstrApp.cubeSaveFolderId);}dialog.saveAs=function(overwrite){var popUpZIndex=dialog.zIndex+2;this.validateInput(overwrite,function(result){var params={folderID:dialog.folderID,objDesc:dialog.desc||"",objName:dialog.name||"",saveAsOverwrite:dialog.saveAsOverwrite,objPath:dialog.getObjectPath()};switch(result){case ERR_OK:dialog.close();callback.onOK(params);break;case ERR_INVALID_NAME:mstrmojo.alert($DESC(12376,"Please enter a valid cube name"),null,"",popUpZIndex);break;case ERR_EXISTING_NAME:mstrmojo.confirm(mstrmojo.desc(12925,"The name ## already exists. Do you want to replace the existing one?").replace("##",this.name),{confirmBtn:{fn:function(){dialog.close();callback.onOK(params);}}},{title:$DESC(12377,"Saving cube with the same name"),zIndex:popUpZIndex});break;}});};dialog.open();return dialog;},clone:function clone(obj){if(!obj){return null;}var c;if(obj.constructor===Array){c=obj.concat();var first=c[0];if(first&&typeof first==="object"){var len=c.length,i;for(i=0;i<len;i++){c[i]=this.clone(obj[i]);}}}else{c={};var k,v;for(k in obj){if(k==="parent"){continue;}v=obj[k];if(v&&typeof v==="object"){c[k]=this.clone(v);}else{c[k]=v;}}}return c;}};}());