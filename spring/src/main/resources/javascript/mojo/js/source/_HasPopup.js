(function(){mstrmojo._HasPopup=mstrmojo.provide("mstrmojo._HasPopup",{_mixinName:"mstrmojo._HasPopup",_lastOpened:null,openPopup:function openPopup(ref,config){var isProp=!!ref&&(typeof ref==="string")&&!ref.match(/\./)&&!!this[ref],popup=mstrmojo.registry.ref(isProp?this[ref]:ref);if(popup&&popup.open){if(isProp){this[ref]=popup;}if(popup.disposable!==false){this.addDisposable(popup);}var slot=popup.slot&&this[popup.slot];if(slot){if(popup.parent!==this){if(this.addChildren){this.addChildren([popup]);}else{var skipCheck=false,el=popup.domNode||popup.placeholder;if(el&&typeof el==="string"){el=document.getElementById(el);}if(!el){skipCheck=true;el=document.createElement("span");popup.placeholder=el;}if(skipCheck||(el.parentNode!==slot)){slot.appendChild(el);}}}}try{popup.open(this,config);}catch(e){console.log("Error opening popup: "+e);}this._lastOpened=popup;}},closePopup:function closePopup(){var popup=this._lastOpened;if(popup&&popup.visible&&popup.close){popup.close();delete this._lastOpened;}}});}());