(function(){mstrmojo.requiresCls("mstrmojo._CanValidate","mstrmojo.HBox","mstrmojo.Label","mstrmojo.WidgetList","mstrmojo.TextBox","mstrmojo.num","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.Table");mstrmojo.requiresDescs(8329);var _TC=mstrmojo.txEditor.CommonComponent,_TCCT=_TC.CTRL_TYPES,_TCIV=_TC.INPUT_VALUES,_TCLT=_TC.LIST_TYPES,_V=mstrmojo.validation,_TR=_V.TRIGGER,_DTP=mstrmojo.expr.DTP,_N=mstrmojo.num;function createDICWiget(cfg){var showRowHeader=(!!cfg.rowHeaders),vt=showRowHeader?cfg.rowHeaders[0]:"",nt=showRowHeader?cfg.rowHeaders[1]:"",ct=cfg.colHeader||"";return{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{},{}]},{cells:[{cssClass:"top-align"},{}]}],children:[{slot:"0,1",scriptClass:"mstrmojo.HBox",getVisibility:function(){return showRowHeader;},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Label left",text:vt},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Label right",text:nt}]},_TC.createLabel({slot:"1,0",cssClass:"mstrmojo-Label colHeader"},ct),{slot:"1,1",scriptClass:"mstrmojo.WidgetList",renderOnScroll:false,maxID:1,itemIdField:"idx",makeObservable:true,getVisibility:function(){this.set("items",mstrmojo.all.teModel.currentTxInput.ctl.pr.vls);return true;},onitemsChange:function(){var cti=mstrmojo.all.teModel.currentTxInput,pr=cti&&cti.ctl.pr,vls=pr.vls;if(vls.length===0){this.add([{},{}],0);}if(pr.t===_TCCT.CTRL_TOGGLE||(pr.t===_TCCT.CTRL_LIST&&pr.st===_TCLT.LIST_TYPE_PULLDOWN)){if(!vls[0].unset){this.add([{n:pr.ust,unset:1}],0);}}},itemFunction:function(item,idx,w){item.idx=w.maxID++;var dtp=mstrmojo.all.teModel.currentTxInput.dtp,inputWidget;if(item.unset){inputWidget={scriptClass:"mstrmojo.TextBox",cssClass:"fixed-width",enabled:false,value:mstrmojo.desc(8329)};}else{inputWidget={scriptClass:"mstrmojo.ValidationTextBox",cssClass:"fixed-width",maxLength:256,dtp:dtp,constraints:{trigger:_TR.ONKEYUP},value:_N.toLocaleString(item.v||""),onValid:function(){this.parent.data.v=_N.toString(this.value||"",true);this.parent.data.invalidFlag=0;},onInvalid:function(){this.parent.data.invalidFlag=1;}};}return new mstrmojo.HBox({data:item,children:[inputWidget,{scriptClass:"mstrmojo.ValidationTextBox",cssClass:"mstrmojo-TransactionEditor-TextBox fixed-width",dtp:_DTP.VARCHAR,maxLength:256,value:item.n,constraints:{trigger:_TR.ONKEYUP},onValid:function(){var data=this.parent.data;if(data.unset){mstrmojo.all.teModel.currentTxInput.ctl.pr.ust=this.value;}data.n=this.value;},visible:!!nt},{scriptClass:"mstrmojo.Button",text:"",cssClass:"mstrmojo-TransactionEditor-ManualList-AddButton",onclick:function(){w.add([{}],w.itemIndex(this.parent.data)+1);}},{scriptClass:"mstrmojo.Button",text:"",cssClass:"mstrmojo-TransactionEditor-ManualList-RemoveButton",visible:idx>0,onclick:function(){w.remove(this.parent.data);}}]});}}]};}mstrmojo.txEditor.ManualPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.ManualPanel",cssClass:"mstrmojo-TransactionEditor-Panel manual",rowHeaders:null,colHeader:null,init:function(props){this._super(props);this.set("children",createDICWiget({rowHeaders:this.rowHeaders,colHeader:this.colHeader}));},getVisibility:function(){var pr=mstrmojo.all.teModel.currentTxInput.ctl.pr;return pr.t===_TCCT.CTRL_TOGGLE||pr.ipt===_TCIV.INPUT_VALUES_MANUAL;}});}());