(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo._IsList","mstrmojo.ListBase");var $DOM=mstrmojo.dom,$ARR=mstrmojo.array,$ENUM_DATA_CHANGE_EVENTS=mstrmojo.warehouse.EnumDataChangeEvents;mstrmojo.qb.es.TableList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.qb.es.TableList",cssClass:"mstrmojo-qb-emma-tablelist",itemMaxWidth:"",onitemMaxWidthChange:function onitemMaxWidthChange(evt){var containerNode=this.itemsContainerNode,items=containerNode&&containerNode.children,width=evt.value;$ARR.forEach(items,function(item){item.children[1].style.maxWidth=width;});},init:function init(props){this._super(props);var $this=this,evtConfig={},listConfig=evtConfig[this.id]={};listConfig.refreshTables=function tablesRefreshed(evt){$this.set("items",evt.items);};listConfig[$ENUM_DATA_CHANGE_EVENTS.DBROLES_DELETE]=function removeDBRoleTables(evt){mstrApp.getRootController().removeDBRoleTables(evt.item.did);};mstrApp.getRootController().attachDataChangeListeners(evtConfig);},getItemMarkup:function(item,idx){return'<div class="item cf {@cls}" idx="{@idx}" style="{@style}"><div class="item-ic"></div><div class="item-n" title="{@title}" style="max-width: {@maxWidth}">{@n}</div><div class="item-del"></div></div>';},getItemProps:function getItemProps(item,idx){return{cls:"tp"+item.tp,n:item.n,idx:idx,title:[item.n," [",item.dbrn,"]"].join(""),maxWidth:this.itemMaxWidth};},onclick:function onclick(evt){try{var target=evt.target||$DOM.eventTarget(evt.hWin,evt.e),item=$DOM.findAncestorByAttr(target,"idx",true,this.domNode),idx=item&&parseInt(item.value,10);if(idx!==null&&!isNaN(idx)){if(target.className==="item-del"){mstrApp.getRootController().removeTable(idx);}}}catch(ex){mstrApp.onerror(ex);}}});}());