(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.vi.ui._IsPanel","mstrmojo.dom","mstrmojo.css");var $DOM=mstrmojo.dom,LEVEL_DIFF=13,PADDING_LEFT=9;mstrmojo.vi.ui.PanelPortlet=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.vi.ui._IsPanel],{scriptClass:"mstrmojo.vi.ui.PanelPortlet",init:function init(props){this._super(props);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIPanelPortlet");this.markupMethods=mstrmojo.hash.copy(this.markupMethods,{onenabledChange:mstrmojo.Widget.enabledMarkupMethod});},layoutConfig:{h:{titlebarNode:"20px",containerNode:"100%"},w:{titlebarNode:"100%",containerNode:"100%"},xt:true},showTitleBarContextMenu:false,canCollapse:true,level:null,onCollapsedChange:mstrmojo.emptyFn,panelId:"",ignoreLayout:true,togglePortlet:function togglePortlet(isCollapsed){if(this.canCollapse){this.titleBar.set("isCollapsed",isCollapsed);}},getTitleBarCfg:function getTitleBarCfg(){var cfg=this._super(),me=this;cfg.canCollapse=this.canCollapse;cfg.cssClass="small";cfg.editTitleOnDoubleClick=false;if(this.showTitleBarContextMenu){cfg.oncontextmenu=function(evt){$DOM.preventDefault(window,evt.e);var target=evt.getTarget();if($DOM.contains(this.textNode,target,true,this.domNode)){evt.cancel();this.tbToolbar.closePopup();var menuCfg=this.getMenuConfig();menuCfg.hostId=this.tbToolbar.id;menuCfg.hostElement=this.tbToolbar.domNode;menuCfg.position=$DOM.getMousePosition(evt.e,evt.hWin);this.tbToolbar.openPopup(menuCfg.newInstance());menuCfg.position=null;}};}cfg.onToggleCollapseByUI=function(){me.onCollapsedChange();};return cfg;},onRender:function onRender(){this._super();if(this.level!==null){this.titleBar.leftToolNode.style.paddingLeft=PADDING_LEFT+this.level*LEVEL_DIFF+"px";this.titleBar.doLayout();}},updateToolbar:function updateToolbar(cfg){this.addMenuItems(cfg);var panelId=this.panelId;if(panelId){mstrmojo.all[panelId].addPopupHandlers(cfg);}return this._super(cfg);},addMenuItems:function addMenuItems(cfg){},getLayoutOffsets:function(){return{h:0,w:18};}});}());