(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumFontAlignment","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumVariantBool","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","ChartConstants","ChartContext","FormatFont","Rect2D","FormatLine","FormatFill");var $C=mstrmojo.chart,$VISUTIL=mstrmojo.VisUtility,$HASH=mstrmojo.hash,$K=$C.ChartConstants,$CHART_ENUMS=$C.enums,$CT=$CHART_ENUMS.EnumCollectionType,$CT_LINE=$CT.CT_LINE,$GMT=$CHART_ENUMS.EnumGraphMajorType,$EGO=$CHART_ENUMS.EnumDSSExtraGraphObject,$FA=$CHART_ENUMS.EnumFontAlignment,$LS=$CHART_ENUMS.EnumLineStyle,$FT=$CHART_ENUMS.EnumFillType,$NTID=$C.gNullTripleId,$GM_MGT=$CHART_ENUMS.EnumGraphMatrixMajorGraphType,$M=$C.model,$MODEL_ENUMS=$M.enums,$MS=$MODEL_ENUMS.EnumDSSGraphMarkerShape,$GT=$MODEL_ENUMS.EnumDSSGraphType,$GP=$MODEL_ENUMS.EnumDSSGraphProperty,$GO=$MODEL_ENUMS.EnumDSSGraphObject,$EGP=$MODEL_ENUMS.EnumDSSExtraGraphProperty,$FR=$MODEL_ENUMS.EnumDSSGraphFontRotation,$GLT=$MODEL_ENUMS.EnumDSSGraphGridLineType,$FE=$MODEL_ENUMS.EnumDSSGraphFillEffect,$VB=$MODEL_ENUMS.EnumVariantBool,$SHP=$MODEL_ENUMS.EnumShapeType,kAxisTicks=0,kBanner=1,kDefaultPieSliceLabelFontSize=7;var kLine=0,kFill=1,kFont=2;function hResolveLineFormat(formatObject,tripleId,shape){var formatType,dataset=this.mDataset,format,useGlobal=false,result={valid:false,object:formatObject},objectId=tripleId.mObjectId;if(objectId===$GO.DssGraphTrendLine||objectId===$GO.DssGraphReferenceLine){var isTrendline=objectId===$GO.DssGraphTrendLine,infos,info;if(isTrendline){infos=dataset.GetTrendLineOfSeries(tripleId.mSeriesId);info=infos;}else{infos=dataset.GetReferenceLinesOfSeries(tripleId.mSeriesId);if(tripleId.mGroupId>=0){info=infos[tripleId.mGroupId];}}if(info){formatObject.mLineThickness=info.getLineThickness();formatObject.mLineThicknessPt=75*formatObject.mLineThickness;formatObject.mAlpha=255;formatObject.mLineStyle=info.getLineRenderType();formatObject.mLineColor=info.getLineColor();result.valid=true;}}if(result.valid){return result;}result.valid=true;var axiskey;switch(tripleId.mObjectId){case $GO.DssGraphUserLine1:axiskey="y1";break;case $GO.DssGraphUserLine2:axiskey="x1";break;case $GO.DssGraphUserLine3:axiskey="y2";break;case $GO.DssGraphUserLine4:axiskey="x2";break;default:result.valid=false;break;}if(result.valid){var axisOriginFormat=dataset.getAxisOriginFormat(axiskey);delete axisOriginFormat.show;$HASH.copy(axisOriginFormat,formatObject);return result;}var lineFormatType="all",offsetIndex=0,subIndex=0,groupId=tripleId.mGroupId;result.valid=true;if(objectId===$GO.DssGraphRiser){if(shape===$SHP._PIE||shape===$SHP._PIESLICE){objectId=$GO.DssGraphPieSlice;}}switch(objectId){case $GO.DssGraphDataMarker:lineFormatType="lineMarker";break;case $GO.DssGraphRiser:if(shape===$SHP._TICKER){lineFormatType="lineShape";}else{lineFormatType="shapeBorder";}break;case $GO.DssGraphDataLine:lineFormatType="lineShape";groupId=0;break;case $GO.DssGraphTargetLine:break;case $GO.DssGraphPieSlice:offsetIndex=tripleId.angleByIndex||0;subIndex=tripleId.sliceById||0;lineFormatType="pieSliceBorder";break;default:result.valid=false;break;}if(result.valid){format=dataset.getGenericLineFormat(tripleId.mSeriesId,groupId,offsetIndex,subIndex,lineFormatType);formatObject=$HASH.copy(format,formatObject);result.object=formatObject;return result;}var whichAxis,isVerticalChart=this.IsVertical();switch(objectId){case $GO.DssGraphY1Major:formatType="majorTick";whichAxis="y1";break;case $GO.DssGraphY1Minor:formatType="minorTick";whichAxis="y1";break;case $GO.DssGraphY2Major:formatType="majorTick";whichAxis=isVerticalChart?"y2":"x2";break;case $GO.DssGraphY2Minor:formatType="minorTick";whichAxis=isVerticalChart?"y2":"x2";break;case $GO.DssGraphX1Major:formatType="majorTick";whichAxis="x1";break;case $GO.DssGraphX1Minor:formatType="minorTick";whichAxis="x1";break;case $GO.DssGraphX2Major:formatType="majorTick";whichAxis="x2";break;case $GO.DssGraphX2Minor:formatType="minorTick";whichAxis="x2";break;case $GO.DssGraphO1Major:formatType="majorTick";whichAxis=this.caKeyMap.c1||"x1";break;case $GO.DssGraphO1Minor:formatType="minorTick";whichAxis=this.caKeyMap.c1||"x1";break;case $GO.DssGraphO2Major:formatType="majorTick";whichAxis=this.caKeyMap.c2||"x2";break;case $GO.DssGraphO2Minor:formatType="minorTick";whichAxis=this.caKeyMap.c2||"x2";break;case $GO.DssGraphY1Body:formatType="axisBody";whichAxis="y1";break;case $GO.DssGraphX2Body:formatType="axisBody";whichAxis="x2";break;case $GO.DssGraphY2Body:formatType="axisBody";whichAxis=isVerticalChart?"y2":"x2";break;case $GO.DssGraphX1Body:formatType="axisBody";whichAxis="x1";break;case $GO.DssGraphO1Body:formatType="axisBody";whichAxis=this.caKeyMap.c1||"x1";break;case $GO.DssGraphO2Body:formatType="axisBody";whichAxis=this.caKeyMap.c2||"x2";break;}var pool;if(useGlobal){switch(formatType){case"axisBody":pool=this.globalFormats.AxisBodies;break;case"majorTick":pool=this.globalFormats.AxisMajorTicks;break;case"minorTick":pool=this.globalFormats.AxisMinorTicks;break;default:result.valid=false;break;}result.valid=!!pool;if(result.valid&&pool[whichAxis]){result.object=pool[whichAxis];return result;}}result.valid=true;switch(formatType){case"axisBody":format=dataset.getAxisLineFormat(whichAxis);break;case"majorTick":case"minorTick":format=dataset.getAxisTickFormat(whichAxis,formatType);break;default:result.valid=false;$VISUTIL.visPrint("failed to get a match for this line format");break;}if(useGlobal){switch(formatType){case"axisBody":this.globalFormats.AxisBodies=this.globalFormats.AxisBodies||{};pool=this.globalFormats.AxisBodies;break;case"majorTick":this.globalFormats.AxisMajorTicks=this.globalFormats.AxisMajorTicks||{};pool=this.globalFormats.AxisMajorTicks;break;case"minorTick":this.globalFormats.AxisMinorTicks=this.globalFormats.AxisMinorTicks||{};pool=this.globalFormats.AxisMinorTicks;break;default:result.valid=false;break;}if(result.valid){if(pool[whichAxis]===undefined){pool[whichAxis]=$HASH.copy(format,pool[whichAxis]);formatObject=pool[whichAxis];if(formatType==="minorTick"&&formatObject.mAlpha!==undefined&&formatObject.mAlpha!==null){formatObject.mAlpha*=0.6;}}result.object=pool[whichAxis];return result;}}else{if(result.valid){$HASH.copy(format,formatObject);if(formatType==="minorTick"&&formatObject.mAlpha!==undefined&&formatObject.mAlpha!==null){formatObject.mAlpha*=0.6;}result.object=formatObject;}}return result;}function hResolveFillFormat(formatObject,tripleId,shape){var format,dataset=this.mDataset,angleById=0,sliceById=0,fillType,result={valid:false,object:formatObject},objectId=tripleId.mObjectId;if(objectId===$GO.DssGraphRiser){if(shape===$SHP._PIE||shape===$SHP._PIESLICE){objectId=$GO.DssGraphPieSlice;}}result.valid=true;switch(objectId){case $GO.DssGraphRiser:fillType="shape";break;case $GO.DssGraphDataMarker:fillType="lineMarker";break;case $GO.DssGraphPieSlice:fillType="pieSlice";angleById=tripleId.angleByIndex!==undefined?tripleId.angleByIndex:0;sliceById=tripleId.sliceById!==undefined?tripleId.sliceById:0;break;default:$VISUTIL.visPrint("fail to find a match for this fill format");result.valid=false;break;}if(result.valid){if(tripleId.mSeriesId>=0&&tripleId.mGroupId>=0){format=dataset.getGenericFillFormat(tripleId.mSeriesId,tripleId.mGroupId,angleById,sliceById,fillType);result.object=$HASH.copy(format,formatObject);}}return result;}function hGetMappedObjectId(tripleId){switch(tripleId.mObjectId){case $GO.DssGraphUserLabel1:return $GO.DssGraphY1Label;case $GO.DssGraphUserLabel2:return $GO.DssGraphY2Label;case $GO.DssGraphUserLabel3:return $GO.DssGraphX1Label;case $GO.DssGraphUserLabel4:return $GO.DssGraphX2Label;default:return tripleId.mObjectId;}}function hResolveTextFormat(formatObject,tripleId,shape){var format,useGlobal=false,dataset=this.mDataset,objectId=hGetMappedObjectId.call(this,tripleId);if(objectId===$GO.DssGraphDataText||objectId===$GO.DssGraphRefLineText||objectId===$GO.DssGraphTrendLineText){var kDatalabel=0,kReflienLabel=1,kTrendlineLabel=2;useGlobal=true;if(shape<0){switch(objectId){case $GO.DssGraphRefLineText:shape=kReflienLabel;break;case $GO.DssGraphTrendLineText:shape=kTrendlineLabel;break;default:shape=kDatalabel;break;}}switch(shape){case kDatalabel:if(useGlobal){var globalFormats=this.globalFormats;if(globalFormats.DatatextFormat===null||globalFormats.DatatextFormat===undefined){globalFormats.DatatextFormat=new $C.FormatFont({Bare:true});if(dataset===null||dataset===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:formatObject};}format=dataset.getDataLabelFontFormat();$HASH.copy(format,globalFormats.DatatextFormat);var fontFormats=globalFormats.DatatextFormat;if(fontFormats&&fontFormats.mFontSize&&typeof fontFormats.mFontSize!=="number"){fontFormats.mFontSize=parseFloat(fontFormats.mFontSize);}}formatObject=globalFormats.DatatextFormat;}else{if(dataset===null||dataset===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:formatObject};}format=dataset.getDataLabelFontFormat();$HASH.copy(format,formatObject);}return{valid:true,object:formatObject};case kReflienLabel:var info,infos=dataset.GetReferenceLinesOfSeries(tripleId.mSeriesId);if(tripleId.mGroupId>=0){info=infos[tripleId.mGroupId];}if(info){var reflineFont=info.getReferenceLineLabelFont();if(reflineFont){formatObject.mFontColor=reflineFont.rfLnFntClr;formatObject.mFontSize=parseInt(reflineFont.rfLnFntSz,10);formatObject.mFontStyle=reflineFont.rfLnFntStyle;formatObject.mFontName=reflineFont.rfLnFntFml;}}break;case kTrendlineLabel:break;default:return{valid:false,object:formatObject};}return{valid:false,object:formatObject};}var whichAxis;switch(objectId){case $GO.DssGraphY1Label:whichAxis="y1";break;case $GO.DssGraphX2Label:whichAxis="x2";break;case $GO.DssGraphY2Label:whichAxis=this.IsVertical()?"y2":"x2";break;case $GO.DssGraphX1Label:whichAxis="x1";break;case $GO.DssGraph2DO1Label:whichAxis=this.caKeyMap.c1||"x1";break;case $GO.DssGraph2DO2Label:whichAxis=this.caKeyMap.c2||"x2";break;default:return{valid:false,object:formatObject};}useGlobal=false;if(useGlobal){var globalAxisLabelFormats=this.globalFormats.AxisLabelFormats;if(globalAxisLabelFormats===null||globalAxisLabelFormats===undefined){this.globalFormats.AxisLabelFormats={};}globalAxisLabelFormats=this.globalFormats.AxisLabelFormats;if(!!globalAxisLabelFormats[whichAxis]){return globalAxisLabelFormats[whichAxis];}globalAxisLabelFormats[whichAxis]={};$HASH.copy(format,globalAxisLabelFormats[whichAxis]);return globalAxisLabelFormats[whichAxis];}else{format=dataset.getAxisLabelFontFormat(whichAxis);$HASH.copy(format,formatObject);}return{valid:true,object:formatObject};}function hGetColorValue(tripleId,dataIndex,considerColorBy){dataIndex=dataIndex||0;considerColorBy=considerColorBy||false;var gmCtx=this.GetGraphMatrixContext(),result,dataset=this.mDataset;considerColorBy=considerColorBy&&gmCtx.mHasColorBy;if(dataset&&considerColorBy){var color;if(tripleId.mObjectId===$GO.DssGraphPieSlice){var angleIndex=tripleId.angleByIndex||0,sliceId=tripleId.sliceById||0;color=dataset.GetPieSliceColorByData(tripleId.mSeriesId,tripleId.mGroupId,angleIndex,sliceId);}else{color=dataset.GetColorByData(tripleId.mSeriesId,tripleId.mGroupId,dataIndex);}if(color!==null&&color!==undefined){result=color;}}if(result===undefined){if(this.mIsGraphMatrix&&!gmCtx.mHasColorBy){result=this.GetColorFromPalette(0);}else{if(tripleId.mSeriesId<0&&tripleId.mGroupId<0){result=0;}else{var idx=tripleId.mSeriesId;if(idx<0){idx=tripleId.mGroupId;}idx=Math.max(0,idx);result=this.GetColorFromPalette(idx);}}}return result;}mstrmojo.chart.GenericContext=mstrmojo.declare(mstrmojo.chart.ChartContext,null,{scriptClass:"mstrmojo.chart.GenericContext",init:function init(props){this._super(props);this.mGraphType=$GT.DssGraphTypeVertical_Bar_Side_by_Side;this.mFormatManager=this.mFormatManager||props.FormatManager||null;this.mIsFontAntiAlias=true;},GetColorValue:function GetColorValue(tripleId,dataIndex,considerColorBy){return hGetColorValue.call(this,tripleId,dataIndex,considerColorBy);},GetProperty:function GetProperty(propertyId,tripleId){var result,value,graphMajorType;if(propertyId===$GP.DssGraphType){return this.mGraphType;}if(!this.mIsTimeSeriesChart){value=this.mFormatManager.GetGraphProperty(propertyId,tripleId.mObjectId,tripleId.mSeriesId,tripleId.mGroupId);if(value!==undefined&&value!==null){return value;}}if(!this.mIsGraphMatrix){value=this._super(propertyId,tripleId);if(!value){value=this._super(propertyId,new $C.TripleId({ObjectId:tripleId.mObjectId}));if(!value){value=this._super(propertyId,new $C.TripleId({SeriesId:tripleId.mSeriesId}));if(!value){value=this._super(propertyId,$NTID);}}}if(value){return value;}}switch(propertyId){case $GP.DssGraphAxisNumberFormat:case -$GP.DssGraphFormatDataTextAdv:result="-2,0,0,0,0,$,#";return result;case $GP.DssGraphTextContent:switch(tripleId.mObjectId){case $GO.DssGraphY1Title:result="Y1";return result;}return result;case $GP.DssGraphStyleMajor:if(this.mIsGraphMatrix){switch(tripleId.mObjectId){case $GO.DssGraphY1Body:case $GO.DssGraphY2Body:case $GO.DssGraphX1Body:case $GO.DssGraphX2Body:result=$GLT.DssGraphGridOuterTicks;break;default:result=$GLT.DssGraphGridNone;break;}}else{result=$GLT.DssGraphGridRegular;}return result;case $GP.DssGraphShow2DAxisMinor:case $GP.DssGraphShow2DAxisLine:result=!this.mIsGraphMatrix;return result;case $GP.DssGraph2DSide:switch(tripleId.mObjectId){case $GO.DssGraphY1Body:result=$GLT.DssGraphAxisLabelLowSide;return result;case $GO.DssGraphO1Body:result=$GLT.DssGraphAxisLabelLowSide;return result;}break;case $EGP.DssGraphChartAreaNumber:result=3;return result;case $GP.DssGraphDepthMode:result=false;return result;case $GP.DssGraphEnhancedSeriesEffect:result=false;return result;case $GP.DssGraphCurveColorAsSeries:case $GP.DssGraphShowLegendText:case $GP.DssGraphShowTitle:result=true;return result;case $EGP.DssGraphUseChartArea:case $GP.DssGraphShowDataValue:case $GP.DssGraphShowTotalValue:case $EGP.DssGraphChartAreaOrientation:case $GP.DssGraphLockFontSize:result=false;return result;case $GP.DssGraphSDShowDataText:result=false;return result;case $GP.DssGraphShow2DAxisMajor:graphMajorType=this.GetGraphMajorType();if(graphMajorType===$GMT.GMT_3D_CATEGORY||graphMajorType===$GMT.GMT_3D_SCATTER){if(tripleId.mObjectId===$GO.DssGraphY1Body){result=true;return result;}}if(this.mIsGraphMatrix){return true;}result=(this.mIsTimeSeriesChart?true:false);return result;case $EGP.DssGraphCumulativePercentLabel:result="Cumulative Percent";return result;case $EGP.DssGraphInfoNestedLabel:case $EGP.DssGraphInfoNestedLabelBracket:result=false;return result;case $GP.DssGraphShowDataLabel:result=false;return result;case $GP.DssGraphLineColor:if(this.mIsTimeSeriesChart){if(tripleId.mSeriesId>=0){result=parseInt(this.GetColorFromPalette(tripleId.mSeriesId),10);return result;}switch(tripleId.mObjectId){case $GO.DssGraphO1Major:result=5460819;return result;case $GO.DssGraphY1Major:result=5658198;return result;case $GO.DssGraphO1Body:case $GO.DssGraphY1Body:result=13421772;return result;default:return undefined;}}if(this.mIsGraphMatrix){switch(tripleId.mObjectId){case $GO.DssGraphY1Major:case $GO.DssGraphX1Major:case $GO.DssGraphX2Major:case $GO.DssGraphY2Major:result=this.getDefaultContrastColor(kAxisTicks);break;default:return undefined;}}else{return undefined;}break;case $GP.DssGraphFillEffect:result=$FE.DssGraphFillSimple;return result;case $GP.DssGraphLineAlpha:if(tripleId.mObjectId===$GO.DssGraphRiser){result=0;return result;}return undefined;case $GP.DssGraphMarkerSize:result=33;return result;case $GP.DssGraph2DDepth:result=1000;return result;case $GP.DssGraphAxisAutoFit:graphMajorType=this.GetGraphMajorType();result=graphMajorType===$GMT.GMT_CATEGORY;return result;case $GP.DssGraphFontColor:if(this.mIsGraphMatrix){result=this.getDefaultContrastColor();return result;}break;default:return undefined;}return undefined;},PutGraphProperty:function PutGraphProperty(iPropertyId,iTripleId,iValue){this.mFormatManager.PutGraphProperty(iPropertyId,iTripleId.mObjectId,iTripleId.mSeriesId,iTripleId.mGroupId,iValue);},GetFormatFont:function GetFormatFont(tripleId){var formatFont,useResolvedFormat=this.mDebugUseNewProperties;formatFont=this.GetFormatObject(tripleId,-1,2,useResolvedFormat);switch(tripleId.mObjectId){case $GO.DssGraphPieGroupLabel:case $GO.DssGraphPieRingLabel:if(formatFont.mFontAlignment===null||!useResolvedFormat){formatFont.mFontAlignment=$FA.FA_CENTER;}if(formatFont.mFontSize===null||!useResolvedFormat){formatFont.mFontSize=Math.floor(formatFont.mFontSize*3/4+1);}break;case $GO.DssGraphOPILBLValue:case $GO.DssGraphPieFeelerLabel:if(formatFont.mFontAlignment===null||!useResolvedFormat){formatFont.mFontAlignment=$FA.FA_CENTER;}if(formatFont.mFontSize===null||!useResolvedFormat){formatFont.mFontSize=kDefaultPieSliceLabelFontSize;}break;case $GO.DssGraphY1Label:case $GO.DssGraph2DO1Label:case $GO.DssGraph2DO2Label:case $GO.DssGraphX1Label:case $GO.DssGraphX2Label:case $GO.DssGraphY2Label:if(this.mIsTimeSeriesChart){formatFont.mFontSize=14;formatFont.mFontColor=13158600;}else{if(formatFont.mFontColor===null||!useResolvedFormat){formatFont.mFontColor=this.getDefaultContrastColor();}if(formatFont.mFontSize===null||!useResolvedFormat){formatFont.mFontSize=8;}}break;case $GO.DssGraphDataText:if(formatFont.mFontSize===null||!useResolvedFormat){formatFont.mFontSize=Math.floor($K.kVirtualCoordinateHeight/45);}if(this.isVerticalBar()&&!this.IsBulletChart()){if(formatFont.mFontRotation===null||!useResolvedFormat){formatFont.mFontRotation=$FR.Rotate90;}}break;case $EGO.DssGraphWarningMessage:formatFont.mFontColor=255;break;case $EGO.DssGraphBanner:var defaultColor=this.getDefaultContrastColor(kBanner);formatFont.mFontColor=defaultColor;formatFont.mFontSize=11;break;default:break;}this.UpdateFormatFont(tripleId,formatFont);formatFont.mFontSize=this.vdFontSize(formatFont.mFontSize);if(useResolvedFormat){formatFont.restoreDefaults(false);}return formatFont;},GetFormatObject:function GetFormatObject(tripleId,shape,formatObjectType,useResolvedFormat){var props,formatObject,returnVal;useResolvedFormat=useResolvedFormat&&(!!this.mDataset)&&this.mDebugUseNewProperties;if(useResolvedFormat){props={Bare:true};}else{props=undefined;}switch(formatObjectType){case kLine:formatObject=new $C.FormatLine(props);break;case kFill:formatObject=new $C.FormatFill(props);break;case kFont:formatObject=new $C.FormatFont(props);break;default:break;}if(useResolvedFormat){returnVal=this.ResolveFormat(formatObject,tripleId,formatObjectType,shape);return returnVal.object;}return formatObject;},GetFormatLine:function GetFormatLine(tripleId,collectionType,shape){if(shape===undefined){shape=$SHP._GENERIC;}var backupGroupId=tripleId.mGroupId,objectId=tripleId.mObjectId,useResolvedFormat;switch(objectId){case $GO.DssGraphTrendLine:case $GO.DssGraphReferenceLine:case $GO.DssGraphY1Major:case $GO.DssGraphY2Major:case $GO.DssGraphY3Major:case $GO.DssGraphY4Major:case $GO.DssGraphX1Major:case $GO.DssGraphX2Major:case $GO.DssGraphO1Major:case $GO.DssGraphY1Minor:case $GO.DssGraphY2Minor:case $GO.DssGraphY3Minor:case $GO.DssGraphY4Minor:case $GO.DssGraphX1Minor:case $GO.DssGraphX2Minor:case $GO.DssGraphO1Minor:case $GO.DssGraphO1Body:case $GO.DssGraphX1Body:case $GO.DssGraphY1Body:case $GO.DssGraphY2Body:case $GO.DssGraphX2Body:case $GO.DssGraphY3Body:case $GO.DssGraphY4Body:case $GO.DssGraphUserLine1:case $GO.DssGraphUserLine2:case $GO.DssGraphUserLine3:case $GO.DssGraphUserLine4:case $GO.DssGraphDataLine:useResolvedFormat=true;break;default:if(backupGroupId===-3){var trySeries=tripleId.mSeriesId;trySeries=Math.max(trySeries,0);tripleId.mGroupId=this.mDataset.findCell(false,trySeries,0);}useResolvedFormat=tripleId.mSeriesId>=0&&tripleId.mGroupId>=0;break;}var needLineWidthCalculation=true,formatLine;formatLine=this.GetFormatObject(tripleId,shape,kLine,useResolvedFormat);switch(objectId){case $GO.DssGraphBackground:case $GO.DssGraphLegendArea:formatLine.mAlpha=0;break;case $GO.DssGraphRiser:case $GO.DssGraphDataLine:if(collectionType===$CT_LINE&&tripleId.mSeriesId>=0){if(formatLine.mLineColor===null||!useResolvedFormat){formatLine.mLineColor=hGetColorValue.call(this,tripleId,0);}}if(objectId===$GO.DssGraphRiser&&this.mIsGraphMatrix){if(formatLine.mLineColor===null||!useResolvedFormat){formatLine.mLineColor=hGetColorValue.call(this,tripleId,0,(tripleId.mGroupId>=0&&tripleId.mSeriesId>=0));}switch(shape){case $SHP._TICKER:if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()){if(formatLine.mLineThickness===null||!useResolvedFormat){formatLine.mLineThicknessPt=200;formatLine.mLineThickness=2;}needLineWidthCalculation=false;}break;case $SHP._CIRCLE:case $SHP._RECTANGLE:case $SHP._SQUARE:if(shape===$SHP._CIRCLE||shape===$SHP._RECTANGLE||shape===$SHP._SQUARE){if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()||this.IsBarChart()||this.IsLineChart()||this.IsAreaChart()){if(formatLine.mLineThickness===null||!useResolvedFormat){formatLine.mLineThicknessPt=200;formatLine.mLineThickness=2;}needLineWidthCalculation=false;}}break;default:break;}}break;case $GO.DssGraphY1Major:case $GO.DssGraphY2Major:case $GO.DssGraphX1Major:case $GO.DssGraphX2Major:if(this.mIsTimeSeriesChart){formatLine.mLineStyle=$LS.LS_DOT;}else{if(this.mIsGraphMatrix){if(formatLine.mLineColor===null||!useResolvedFormat){formatLine.mLineColor=this.getDefaultContrastColor(kAxisTicks);}}}break;default:break;}this.UpdateFormatLine(tripleId,formatLine,useResolvedFormat);if(needLineWidthCalculation||!useResolvedFormat){formatLine.mLineThickness=formatLine.mLineThicknessPt;if(!this.mAbsoluteFontLineSize){formatLine.mLineThicknessPt=this.vdHeight(formatLine.mLineThicknessPt);}formatLine.mLineThickness=this.vdLineWidth(formatLine.mLineThickness);}if(useResolvedFormat){formatLine.restoreDefaults(false);}tripleId.mGroupId=backupGroupId;return formatLine;},GetFormatFill:function GetFormatFill(tripleId,collectionType,shape){if(shape===undefined){shape=$SHP._GENERIC;}var backupGroupId=tripleId.mGroupId;if(backupGroupId===-3){var trySeries=tripleId.mSeriesId;trySeries=Math.max(trySeries,0);tripleId.mGroupId=this.mDataset.findCell(false,trySeries,0);}var useResolvedFormat=(tripleId.mSeriesId>=0&&tripleId.mGroupId>=0)&&this.mDebugUseNewProperties,formatFill,gmCtx=this.mpGraphMatrixContext;formatFill=this.GetFormatObject(tripleId,shape,kFill,useResolvedFormat);switch(tripleId.mObjectId){case $GO.DssGraphPieSlice:case $GO.DssGraphRiser:case $GO.DssGraphDataLine:if(this.mIsGraphMatrix){if(formatFill.mFillType===null||!useResolvedFormat){formatFill.mFillType=$FT.FT_SIMPLE;}var gmMajorType=this.GetGraphMatrixGraphMajorType();switch(gmMajorType){case $GM_MGT._BAR:case $GM_MGT._SCATTER:case $GM_MGT._BUBBLE:case $GM_MGT._AREA:if(formatFill.mAlpha===null||!useResolvedFormat){formatFill.mAlpha=178.5;}break;case $GM_MGT._LINE:if(gmCtx.mMarkerShape!==$MS.DssGraphMarkerShapeNone||tripleId.mObjectId===$GO.DssGraphRiser){if(formatFill.mAlpha===null||!useResolvedFormat){formatFill.mAlpha=178.5;}}break;default:break;}if(gmCtx.mMarkerShape===$MS.DssGraphMarkerShapeGMTick){if(formatFill.mAlpha===null||!useResolvedFormat){formatFill.mAlpha=255;}}if(formatFill.mSimpleColor===null||!useResolvedFormat){formatFill.mSimpleColor=hGetColorValue.call(this,tripleId,0,(tripleId.mSeriesId>=0&&tripleId.mGroupId>=0));}}else{if((tripleId.mSeriesId>=0&&tripleId.mGroupId===-3)){formatFill.mSimpleColor=$C.gColorPalette[tripleId.mSeriesId];}else{if((tripleId.mGroupId>=0&&tripleId.mSeriesId===-3)){formatFill.mSimpleColor=$C.gColorPalette[tripleId.mGroupId];}}}break;default:break;}this.UpdateFormatFill(tripleId,formatFill,collectionType,useResolvedFormat);if(useResolvedFormat){formatFill.restoreDefaults(false);}tripleId.mGroupId=backupGroupId;return formatFill;},ResolveFormat:function ResolveFormat(formatObject,tripleId,formatObjectType,shape){if(formatObject){switch(formatObjectType){case kLine:return hResolveLineFormat.call(this,formatObject,tripleId,shape);case kFill:return hResolveFillFormat.call(this,formatObject,tripleId,shape);case kFont:return hResolveTextFormat.call(this,formatObject,tripleId,shape);default:return{valid:false,object:formatObject};}}return{valid:false,object:formatObject};}});}());