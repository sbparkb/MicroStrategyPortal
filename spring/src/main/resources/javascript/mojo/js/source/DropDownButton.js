(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var fnPositionPopup=function(){var ddb=this.opener;if(ddb.direction.toLowerCase()==="up"){this.domNode.style.top=-ddb.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"19px",text:"",direction:"down",enabled:true,title:"",markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.text;},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function preBuildRendering(){if(this._super){this._super();}var pr=this.popupRef;if(pr){if(pr.nudge){pr.nudge=mstrmojo.func.composite([pr.nudge,fnPositionPopup]);}else{if(this.direction.toLowerCase()!=="down"){pr.nudge=fnPositionPopup;}}}},popupRef:null,popupOpenConfig:null,destroy:function destroy(skipCleanup){var pr=this.popupRef;if(pr&&pr.hasRendered){pr.destroy(false);}if(this._super){this._super(skipCleanup);}},togglePopup:function togglePopup(){var p=this._lastOpened;if(p&&p.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function premousedown(evt){this.togglePopup();}});}());