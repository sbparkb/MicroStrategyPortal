(function(){mstrmojo.requiresCls("mstrmojo.hash");var $H=mstrmojo.hash;mstrmojo._CanSupportTransaction={_mixinName:"mstrmojo._CanSupportTransaction",updatedCellsMap:null,getUpdates:mstrmojo.emptyFn,getUpdateObject:mstrmojo.emptyFn,getKeyContext:mstrmojo.emptyFn,autoRefresh:mstrmojo.emptyFn,editNext:mstrmojo.emptyFn,buildConditions:mstrmojo.emptyFn,dataChanged:function dataChanged(k,r,v,d,ctlKey){var autoRefresh=this.updateValue(k,v);this.updatedCellsMap[k]={r:r,v:v};this.controller.onTransactionUpdates(this,this.getUpdateObject(),autoRefresh,ctlKey);},postBuildRendering:function pstBldRnd(){if(this._super){this._super();}if(!this.txModel){this.txModel=this.model.docModel||this.model;}this.updatedCellsMap=this.updatedCellsMap||{};},updateValue:function(k,v){if(this.txModel.deltaUpdate){this.txModel.deltaUpdate(this);}return false;},getUpdatedValues:function(){var um=this.updatedCellsMap,i,u,vs=[];for(i in um){if(um.hasOwnProperty(i)){u={};u.v=um[i].v.v;vs.push($H.copy(this.getKeyContext(i),u));}}return vs;},clear:function(){this.updatedCellsMap={};},registerTxWidget:function(){function fnRegisterOnPS(w,ps){var k=w.node.data.k;ps.txWidgets=ps.txWidgets||{};ps.txWidgets[k]=w;return false;}var p=this.parent;while(p){if(p.isPanelStack===true){fnRegisterOnPS(this,p);}p=p.parent;}}};}());