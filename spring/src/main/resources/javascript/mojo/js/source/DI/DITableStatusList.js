(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.CheckBox","mstrmojo.StackContainer","mstrmojo.FileUploadBox","mstrmojo.DataGrid","mstrmojo.fe.FilterEditor","mstrmojo.fe.FilterUtils","mstrmojo.ui.menus.Menu","mstrmojo.ui.menus.MenuConfig","mstrmojo.qb.QBAlertDialog","mstrmojo.onetier.vi.ui.DBCredentialEditor");mstrmojo.requiresDescs(187,221,773,1088,1302,2461,9117,9118,12085,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12814,12837,13048,13049,13050,13051,13052,13053,13054,13055,13056,13057,13099,1825,13275,13276,13277,12949,13942,13943,13959,13960,13969,13970,13971,13972,14215);var constants=mstrmojo.DI.DIConstants,MAX_FILE_SIZE=4*1024*1024,$A=mstrmojo.array,$H=mstrmojo.hash,$CSS=mstrmojo.css,$DOM=mstrmojo.dom,$DESC=mstrmojo.desc,EVENT_CAN_SAVE_SCHEDULE="canSaveSchedule",EVENT_CAN_START_REFRESH="canStartRefresh",tableStatusCls={"0":"tablestatus-col status waiting","1":"tablestatus-col status waiting","2":"tablestatus-col status waiting","3":"tablestatus-col status finished","4":"tablestatus-col status warning","5":"tablestatus-col status waiting","6":"tablestatus-col status warning"};function openAlternateSourceEditor(tableID){var cellWidget=this.parent,container=this.parent.dataGrid.parent,POPUP_ID="di-alt-popup",popupWidget,popupZIndex=container.parent.zIndex+10,qbParams={emmaIRRMessageID:mstrApp.getRootController().dataService.emmaIRRMessageID,emmaSingleIsForAlternateSource:true,emmaSingleAlertCfg:{zIndex:popupZIndex+1000}},source=mstrApp.getRootController().getModel().getImportSource(tableID),XDA_TYPES=constants.xdaType,xdaType=source.xdaType;if(mstrApp.size){qbParams.size=mstrApp.size;}else{mstrApp.size={};mstrApp.size.h="552px";mstrApp.size.w="1010px";qbParams.size=mstrApp.size;}if(xdaType===XDA_TYPES.excel||xdaType===XDA_TYPES.text){var rootController=mstrApp.getRootController(),slot=rootController.navigationController.getPageSlot(),hasEdit=false;slot.setConfig({properties:{operationMode:constants.operationMode.create,singleURL:true,onFinishButtonClick:function(){var urls=this.getURLs(),url=(urls.length===1)?urls[0]:"",callback={success:function(){var data,altSource;rootController.showPage(constants.pageType.emmaPreview);data=cellWidget.data;if(!data.alternateSource){data.alternateSource={};}altSource=data.alternateSource;altSource.tableName=mstrmojo.DI.DIHelpers.getURLFileName(url);cellWidget.update();},failure:function(res){rootController.displayError(mstrmojo.desc(12837,"Cannot set alternate source."),false,(res&&res.message)||"");}};if(!url){return ;}rootController.getScheduleController().selectAlternateSourceURL(tableID,url,callback);hasEdit=true;},onCancelButtonClick:function(){if(hasEdit){var callback={success:function(){cellWidget.data.alternateSource=null;cellWidget.update();},failure:function(res){rootController.displayError($DESC(12394,"Cannot delete alternate source."),false,(res&&res.message)||"");}};rootController.getScheduleController().editEmmaIRRSourceTableSingleTable(tableID,null,"1",null,null,null,callback);}}},footerConfig:{next:{visible:false},back:{visible:false},cancel:{visible:true},finish:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false}}});rootController.showDialog(constants.dialogType.diPageDialog,{slot:slot,pageType:constants.pageType.file,sourceInfo:1,cssClass:"mstrmojo-di-SelectURLAlternateSource-editor"});return ;}if(xdaType!==XDA_TYPES.qbSingleTable){return ;}popupWidget=mstrmojo.all[POPUP_ID];if(!popupWidget){popupWidget=mstrmojo.insert({scriptClass:"mstrmojo.qb.QBContainer",id:POPUP_ID});mstrmojo.hash.copy(qbParams,popupWidget.QBParams);}container.openPopup({scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(13048,"Select Alternate Source"),cssClass:"mstrmojo-di-SelectAlternateSource-editor",onPreClose:function onPreClose(){this.buttonBox.cancel.onclick();return true;},children:[popupWidget,{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",alias:"buttonBox",children:[{scriptClass:"mstrmojo.Button",alias:"finish",text:mstrmojo.desc(1302,"Finish"),cssClass:"mstrmojo-WebButton hot",onclick:function(){var editor=this.parent.parent,o=editor&&editor.opener,callback;callback={success:function(res){var data,altSource;data=cellWidget.data;if(!data.alternateSource){data.alternateSource={};}altSource=data.alternateSource;altSource.tableName=res.tableName;cellWidget.update();if(o){o.closePopup();}}};mstrApp.getRootController().selectAlternateSource(tableID,callback,popupZIndex+10);}},{scriptClass:"mstrmojo.Button",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-WebButton",onclick:function(){var editor=this.parent.parent,o=editor&&editor.opener,messageID,emmaIRRMessageID,diDataService,callback,hasEditEmmaIRRSource;messageID=mstrApp.msgid;emmaIRRMessageID=mstrApp.getRootController().dataService.emmaIRRMessageID;hasEditEmmaIRRSource=mstrApp.hasEditEmmaIRRSource;mstrApp.container.unloadQB();diDataService=mstrApp.getRootController().dataService;mstrApp.messageID=messageID;if(messageID){diDataService.set("messageID",messageID);}if(emmaIRRMessageID){diDataService.set("emmaIRRMessageID",emmaIRRMessageID);}callback={success:function(){cellWidget.data.alternateSource=null;cellWidget.update();if(o){o.closePopup();}},failure:function(res){mstrApp.getRootController().displayError($DESC(12394,"Cannot delete alternate source."),false,(res&&res.message)||"");}};if(hasEditEmmaIRRSource){mstrApp.rootController.getScheduleController().editEmmaIRRSourceTableSingleTable(tableID,null,"1",null,null,null,callback);}else{if(o){o.closePopup();}}}}]}]},{zIndex:popupZIndex});popupWidget.loadQB();mstrmojo.dom.center(popupWidget.domNode.parentNode.parentNode);mstrApp.hasEditEmmaIRRSource=false;}function openFilterEditor(model){var dataGrid=this.parent.dataGrid,showEditor=function showEditor(data,filter){var filterModel={expr:filter,targets:data.slice(0)},fnOnSaveFilter=function fnOnSaveFilter(filterModel){var filterExpression=filterModel.expr;model.filter=filterExpression;mstrApp.getRootController().getScheduleController().setEmmaIRRFilter(mstrmojo.fe.FilterUtils.getExprXml(filterExpression),{success:function success(){model.updateFilterUsedInTable();dataGrid.refresh();},failure:function(res){mstrApp.getRootController().displayError($DESC(13099,"Failed to set refresh filter."),false,(res&&res.message)||"");}});},editorId="irrfe",editor,disableElementBrowsing=function disableElementBrowsing(){return true;};editor=editorId&&window.mstrmojo&&mstrmojo.all[editorId];if(!editor){editor=mstrmojo.insert({id:editorId,scriptClass:"mstrmojo.fe.FilterEditor",showLimits:false,cssClass:"mstrmojo-charcoalboxe mstrmojo-FE mstrmojo-IRRFilter-editor"});editor.walk.getAttributeForms=function getAttributeForms(did){return editor.IRRAttrForms&&editor.IRRAttrForms[did];};}editor.IRRAttrForms=model.IRRAttrForms;editor.objectBrowsingEnabled=false;editor.set("title",mstrmojo.desc(12085,"Select a filter"));editor.set("onSave",fnOnSaveFilter);editor.set("model",filterModel);editor.set("disableElementsBrowsing",disableElementBrowsing);editor.open(null,{zIndex:mstrApp.getRootController().getDialogController().getNextZIndex()});};showEditor(model.IRRAttributes,model.filter||"");}mstrmojo.DI.AlternateSourceMenu=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.DI.AlternateSourceMenu",menuCssClass:"mstrmojo-di-AlternateSourceMenu",tableID:null,menuCfg:null,getMenuConfig:function(){var cfg=this.menuCfg;if(!cfg){cfg=this.menuCfg=new mstrmojo.ui.menus.MenuConfig({menuCssClass:this.menuCssClass});}else{cfg.clear();}cfg.addMenuItem($DESC(12393,"Set Source"),"",this.handleSetSource,{tableID:this.tableID,cellWidget:this.cellWidget});cfg.addMenuItem($DESC(12396,"Delete Source"),"",this.handleDeleteSource,{tableID:this.tableID,cellWidget:this.cellWidget});return cfg;},handleSetSource:function(item){var ctxt=item.ctxt;openAlternateSourceEditor.call(ctxt.cellWidget,ctxt.tableID);return true;},handleDeleteSource:function(item){var ctxt=item.ctxt,tableID=ctxt.tableID,cellWidget=ctxt.cellWidget,callback;callback={success:function(){cellWidget.data.alternateSource=null;cellWidget.update();},failure:function(res){mstrApp.getRootController().displayError($DESC(12394,"Cannot delete alternate source."),false,(res&&res.message)||"");}};mstrApp.rootController.getScheduleController().editEmmaIRRSourceTableSingleTable(tableID,null,"1",null,null,null,callback);return true;}});function openAlternateSourceMenu(opener,data){var menuHelper,cfg;if(!opener.openPopup){opener.openPopup=function(ref,config){mstrmojo._HasPopup.openPopup.call(opener,ref,config);};}if(!opener.closePopup){opener.closePopup=function(){mstrmojo._HasPopup.closePopup.call(opener);};}menuHelper=opener.menuHelper;if(!menuHelper){menuHelper=opener.menuHelper=new mstrmojo.DI.AlternateSourceMenu();}menuHelper.tableID=data.tableID;menuHelper.cellWidget=data.cellWidget;cfg=menuHelper.getMenuConfig();cfg.hostId=opener.id;cfg.hostElement=opener.domNode;cfg.isHostedWithin=false;opener.openPopup(new mstrmojo.ui.menus.Menu({popupConfig:cfg}));}mstrmojo.DI.DITableStatusList=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DI.DITableStatusList",bHasRefreshCheckbox:true,bHasRefreshPolicy:true,bHasSourceFilter:false,bHasAlternateSource:false,title:null,items:null,importFileFunc:mstrmojo.func.emptyFn,forceFullPublish:true,hasIRR:false,markupString:'<div id="{@id}" class="mstrmojo-di-tablestatuslist {@cssClass}" style="{@cssText}"><div></div><div></div></div>',markupSlots:{titleNode:function(){return this.domNode.children[0];},listNode:function(){return this.domNode.children[1];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function(){var model=this.model;this.update();model.attachEventListener("PublishStatusUpdate",this.id,"updateStatus");if(this._super){this._super();}},updateStatus:function(evt){var me=this;if(evt&&evt.name){this.set("updateStarted",true);}if(evt&&evt.reset){this.set("updateStarted",false);window.setTimeout(function(){me.checkCanRefresh();},0);}},update:function(evt){var model=this.model,items=[];if(evt&&evt.name){this.set("updateStarted",true);}mstrmojo.hash.forEach(model.importSources,function(value){if(value.checked===undefined){if(model.operationMode===constants.operationMode.create||model.operationMode===constants.operationMode.edit){value.checked=true;}else{value.checked=false;}if(model.operationMode===constants.operationMode.refresh){if(value.canSubscribe()){value.checked=true;}else{value.checked=false;}}}items.push(value);});this.set("items",items);},getFileUploader:function(tableID){var model=this.model;var r=null;if(model.importSources[tableID]){r=model.importSources[tableID].fileUploader;}return r;},checkCanRefresh:function(){var rootController=mstrApp.getRootController(),model=this.model,operationMode=model.operationMode,allTableIds=model.getAllTableID(),canRefresh=true,cnt=0;if(operationMode===constants.operationMode.refresh){$A.forEach(allTableIds,function(id){var source=model.getImportSource(id);if(source.checked){cnt++;if(source.type===constants.sourceType.file){if(source.subtype===constants.sourceSubtype.clipboard||source.subtype===constants.sourceSubtype.localFile){if(!source.hasSelectFile){canRefresh=false;}}}}});if(cnt===0){canRefresh=false;}}if(operationMode===constants.operationMode.edit){$A.forEach(allTableIds,function(id){var source=model.getImportSource(id),needUpload=false;if(source.type===constants.sourceType.file){if(source.subtype===constants.sourceSubtype.clipboard||source.subtype===constants.sourceSubtype.localFile){if(!model.isCubePublished||!model.rawDataExistsInAE){needUpload=!source.hasRefreshedData;}else{needUpload=!source.isAll&&source.executeAction===constants.tableStatsExecutionAction.forceExecution&&!source.hasRefreshedData;}if(needUpload&&!source.hasSelectFile){canRefresh=false;}}}});}rootController.raiseModelEvent({name:EVENT_CAN_START_REFRESH,value:canRefresh});return canRefresh;},checkCanChange:function(){var model=this.model,operationMode=model.operationMode,allTableIds=model.getAllTableID(),canChange=false;if(operationMode===constants.operationMode.refresh){canChange=true;}if(operationMode===constants.operationMode.edit){if(!model.isCubePublished||!model.rawDataExistsInAE){canChange=false;}else{$A.forEach(allTableIds,function(id){var source=model.getImportSource(id),enabled;enabled=source.hasRefreshedData&&(!source.forceRepublish||!source.schemaChanged);if(enabled){canChange=true;}});}}return canChange;},children:[{slot:"titleNode",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-di-tablestatuslist-title",bindings:{text:"this.parent.title",visible:"this.parent.title"}},{slot:"listNode",alias:"list",scriptClass:"mstrmojo.DataGrid",cssClass:"mstrmojo-di-tablestatuslist-list",lockHeader:true,bindings:{items:"this.parent.items",forceFullPublish:"this.parent.forceFullPublish",updateStarted:"this.parent.updateStarted"},columns:[],listSelector:null,resizableColumns:true,onitemsChange:function(){if(this._super){this._super();}var bHasRefreshCheckbox=this.parent.bHasRefreshCheckbox,bHasRefreshPolicy=this.parent.bHasRefreshPolicy,bHasSourceFilter=this.parent.bHasSourceFilter,bHasAlternateSource=this.parent.bHasAlternateSource,columns=[];if(bHasRefreshCheckbox){columns.push({headerWidget:{scriptClass:"mstrmojo.TristateCheckBox",cssClass:"tristate tablestatus-header refresh",grayed:false,checked:false,eventSubs:null,tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var pos;if(this.tooltipContent){pos=$DOM.position(this.domNode);this.set("richTooltip",{keepArrowXPos:true,cssClass:"vi-regular vi-tooltip-V",top:Math.max(pos.y-3,0),left:Math.max(pos.x-7,0),posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:this.tooltipContent});}},preBuildRendering:function(){this.evts=[];if(!this.eventSubs){var evtConfig={},listConfig=evtConfig[this.id]={};listConfig.scheduleCheckedChange=this.updateStatus;listConfig.refreshCheckedChange=this.updateStatus;listConfig.PublishStatusUpdate=this.updatePublishStatus;this.eventSubs=mstrApp.getRootController().attachDataChangeListeners(evtConfig);}this.updateStatus();},onUnRender:function onUnRender(){if(this.eventSubs){mstrApp.getRootController().detachDataChangeListeners(this.eventSubs);this.eventSubs=null;}if(this._super){this._super();}},updatePublishStatus:function updatePublishStatus(evt){if(evt&&evt.name){this.set("enabled",false);}if(evt&&evt.reset){this.set("enabled",this.origEnabled);}},updateStatus:function updateStatus(){if(!this.visible){return ;}var dataWidget=this,totalItemsNum=0,checkedItemsNum=0,grayed,checked,enabled=true,modelChecked=false,model=dataWidget.dataGrid.parent.model,operationMode=model.operationMode;if(operationMode===constants.operationMode.create||operationMode===constants.operationMode.edit){dataWidget.dataGrid.parent.checkCanRefresh();this.set("visible",false);return ;}$A.forEach(dataWidget.dataGrid.items,function(item){if(!item.isAll){if(item.checked){checkedItemsNum++;}totalItemsNum++;}});if(!checkedItemsNum){grayed=false;checked=false;}else{if(checkedItemsNum<totalItemsNum){grayed=true;checked=true;}else{grayed=false;checked=true;modelChecked=true;}}if(operationMode===constants.operationMode.refresh){enabled=!dataWidget.dataGrid.forceFullPublish;if(!enabled){this.set("tooltipContent",mstrmojo.desc(13960,"Cube doesnot exist in memory so all tables must be republished."));}}model.checked=modelChecked;this.set("grayed",grayed);this.set("checked",checked);this.set("enabled",enabled);this.set("origEnabled",enabled);if(operationMode===constants.operationMode.subscribe){mstrApp.getRootController().raiseModelEvent({name:EVENT_CAN_SAVE_SCHEDULE,value:checkedItemsNum>0});}if(operationMode===constants.operationMode.refresh){dataWidget.dataGrid.parent.checkCanRefresh();}},onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);}else{this.set("checked",!this.checked);}var dataWidget=this,operationMode=dataWidget.dataGrid.parent.model.operationMode,changeList=[],refreshTypes=[],isChecked=this.checked,hasIRRInstance=dataWidget.dataGrid.parent.hasIRR,rootController=mstrApp.getRootController(),scheduleController=rootController.getScheduleController(),model=dataWidget.dataGrid.parent.model,baseReportID=model.cubeID,items=dataWidget.dataGrid.items,canSaveSchedule=false;model.checked=!this.grayed&&this.checked;if(operationMode===constants.operationMode.refresh||operationMode===constants.operationMode.subscribe){$A.forEach(items,function(item){if(!item.isAll&&item.checked!==isChecked){if(isChecked&&operationMode===constants.operationMode.subscribe&&!item.canSubscribe()){return true;}if(operationMode===constants.operationMode.refresh&&item.forceRepublish){dataWidget.set("grayed, true");return true;}changeList.push(item.tableID);refreshTypes.push(item.refreshType.toString());item.checked=isChecked;}});if(changeList.length>0){rootController.raiseModelEvent({name:"allCheckedChange"});if(hasIRRInstance){if(isChecked){scheduleController.createEmmaIRRSourceTables(baseReportID,changeList,refreshTypes);}else{scheduleController.deleteEmmaIRRSourceTable(changeList);}}}if(operationMode===constants.operationMode.subscribe){$A.forEach(items,function(item){if(item.checked){canSaveSchedule=true;return false;}});rootController.raiseModelEvent({name:EVENT_CAN_SAVE_SCHEDULE,value:canSaveSchedule});}if(operationMode===constants.operationMode.refresh){dataWidget.dataGrid.parent.checkCanRefresh();}}}},colWidth:"65",dataWidget:{scriptClass:"mstrmojo.StackContainer",cssClass:"tablestatus-col refreshBox",colWidth:"65",children:[{scriptClass:"mstrmojo.CheckBox",cssClass:"refreshCheckbox",cssDisplay:"table",colWidth:"65",visible:false,text:"",tooltipOpenDelay:0,useRichTooltip:true,preBuildRendering:function(){var dataGrid=this.parent.dataGrid,model=dataGrid.parent.model,data=this.parent.data,subs;this.update();this.subEvts=[];subs=model.attachEventListener("allCheckedChange",this.id,"updateCheck");this.subEvts.push(subs);if(!data.isAll){this.dataEvt=data.attachEventListener("checkedChange",this.id,"updateCheck");}subs=model.attachEventListener("PublishStatusUpdate",this.id,"updatePublishStatus");this.subEvts.push(subs);},onUnRender:function(){var dataGrid=this.parent.dataGrid,data=this.parent.data,model=dataGrid.parent.model;$A.forEach(this.subEvts,function(subs){model.detachEventListener(subs);});if(this.dataEvt){data.detachEventListener(this.dataEvt);}},updatePublishStatus:function(evt){if(evt&&evt.name){this.set("enabled",false);}if(evt&&evt.reset){this.set("enabled",this.origEnabled);}},updateTooltipConfig:function(){var pos;if(this.tooltipContent){pos=$DOM.position(this.domNode);this.set("richTooltip",{keepArrowXPos:true,cssClass:"vi-regular vi-tooltip-V",top:Math.max(pos.y-3,0),left:Math.max(pos.x-7,0),posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:this.tooltipContent});}},update:function(){var dataWidget=this.parent,data=this.parent.data,operationMode=dataWidget.dataGrid.parent.model.operationMode,enabled=true,checked=false;if(data.isAll){return false;}if(operationMode===constants.operationMode.refresh){enabled=!dataWidget.dataGrid.forceFullPublish&&!data.forceRepublish;checked=dataWidget.dataGrid.forceFullPublish||dataWidget.data.checked===true||data.forceRepublish;if(!enabled){if(dataWidget.dataGrid.forceFullPublish){this.set("tooltipContent",mstrmojo.desc(13960,"Cube doesnot exist in memory so all tables must be republished."));}else{if(data.forceRepublish){this.set("tooltipContent",mstrmojo.desc(13969,"The edit operations require the following table to be refreshed."));}}}}else{if(operationMode===constants.operationMode.subscribe){enabled=dataWidget.data.canSubscribe();checked=dataWidget.data.checked;if(!enabled){this.set("tooltipContent",mstrmojo.desc(13056,"No scheduling support for local files"));}}}this.set("enabled",enabled);this.set("origEnabled",enabled);this.set("checked",checked);},updateCheck:function(){var data=this.parent.data;this.set("checked",!!data.checked);},oncheckedChange:function(){var dataWidget=this.parent,model=dataWidget.dataGrid.parent.model,rootController=mstrApp.getRootController(),scheduleController=rootController.getScheduleController(),tableID,refreshType,baseReportID=model.cubeID,data=dataWidget.data,callback,isChecked=this.checked,hasIRRInstance=dataWidget.dataGrid.parent.hasIRR,operationMode=model.operationMode;if(data.checked===isChecked){if(model.operationMode===constants.operationMode.refresh){rootController.raiseModelEvent({name:"refreshCheckedChange",data:data});}return ;}if(!data.isAll){if(isChecked&&operationMode===constants.operationMode.subscribe&&!data.canSubscribe()){return ;}data.set("checked",isChecked);}if(model.operationMode===constants.operationMode.refresh){rootController.raiseModelEvent({name:"refreshCheckedChange",data:data});}if(model.operationMode===constants.operationMode.subscribe){rootController.raiseModelEvent({name:"scheduleCheckedChange"});tableID=data.tableID;if(!hasIRRInstance){return ;}if(isChecked){refreshType=data.refreshType.toString();callback={failure:function failure(res){rootController.displayError($DESC(12395,"Cannot create source table."),false,(res&&res.message)||"");}};scheduleController.createEmmaIRRSourceTables(baseReportID,[tableID],[refreshType],callback);}else{callback={failure:function failure(res){rootController.displayError($DESC(12394,"Cannot delete source table."),false,(res&&res.message)||"");}};scheduleController.deleteEmmaIRRSourceTable([tableID],callback);}}}},{scriptClass:"mstrmojo.Label",cssClass:"refreshBox-status",visible:false,preBuildRendering:function(){var model=this.parent.dataGrid.parent.model;this.update();this.subEvt=model.attachEventListener("PublishStatusUpdate",this.id,"update");},onUnRender:function(){var model=this.parent.dataGrid.parent.model;if(this.subEvt){model.detachEventListener(this.subEvt);}},update:function(){var data=this.parent.data,updateStarted=this.parent.dataGrid.parent.updateStarted,status=data&&data.status,title="",cls="tablestatus-col status";if(status==="4"||status==="6"){title=data.errmsg||"";}if(tableStatusCls[status]){cls=tableStatusCls[status];}else{if(updateStarted){cls=tableStatusCls[0];}}this.set("title",title);this.set("cssClass",cls);if(this.domNode){this.domNode.className=cls;}}}],preBuildRendering:function(){var model=this.dataGrid.parent.model;this.update();this.subEvt=model.attachEventListener("PublishStatusUpdate",this.id,"update");},onUnRender:function(){var model=this.dataGrid.parent.model;if(this.subEvt){model.detachEventListener(this.subEvt);}},update:function(evt){var selected=null,operationMode=this.dataGrid.parent.model.operationMode,updateStarted=this.dataGrid.parent.updateStarted,data=this.data;if(evt&&evt.reset){updateStarted=false;}if(data.isAll){selected=null;}else{selected=this.children[0];if(operationMode!==constants.operationMode.subscribe&&data.checked){if((updateStarted&&data.published)||operationMode!==constants.operationMode.refresh){selected=this.children[1];}}}this.set("selected",selected);}}});}columns.push({headerText:mstrmojo.desc(12949,"Data Source"),headerCss:"tablestatus-header label",dataWidget:{scriptClass:"mstrmojo.Box",cssClass:"tablestatus-col tableNameBox cf",preBuildRendering:function(){var model=this.dataGrid.parent.model,operationMode=model.operationMode;if(operationMode===constants.operationMode.refresh){model.attachEventListener("refreshCheckedChange",this.id,"update");}if(operationMode===constants.operationMode.subscribe){if(!this.data.isAll&&!this.data.canSubscribe()){this.children[0].set("enabled",false);}}this.update();},update:function(){var data=this.data,checked=data.checked,model=this.dataGrid.parent.model,hasSelectFile=data.hasSelectFile,widget=this.children[0],node=widget&&widget.domNode,visible=false;if(model.operationMode===constants.operationMode.refresh){visible=checked;}if(model.operationMode===constants.operationMode.edit){if(!model.isCubePublished||!model.rawDataExistsInAE){visible=!data.hasRefreshedData;}else{visible=!data.isAll&&data.executeAction===constants.tableStatsExecutionAction.forceExecution&&!data.hasRefreshedData;}}if(node){$CSS.toggleClass(node,"selected",checked);$CSS.toggleClass(node,"hasSelectFile",hasSelectFile||!visible);}else{if(checked){$CSS.addWidgetCssClass(widget,"selected");}else{$CSS.removeWidgetCssClass(widget,"selected");}if(hasSelectFile||!visible){$CSS.addWidgetCssClass(widget,"hasSelectFile");}else{$CSS.removeWidgetCssClass(widget,"hasSelectFile");}}this.children[1].set("visible",visible);},children:[{scriptClass:"mstrmojo.Label",tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var pos;if(this.title){pos=$DOM.position(this.domNode);this.set("richTooltip",{keepArrowXPos:true,cssClass:"vi-regular vi-tooltip-A",top:Math.max(pos.y+pos.h+2,0),left:Math.max(pos.x+2,0),posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.title});}},resetText:function(){var data=this.parent.data,v="";if(data.sourceInfo){v=data.sourceInfo.dbTableName||data.sourceInfo.name;}this.set("text",v);},bindings:{title:function(){var name=mstrmojo.desc(13050,"###T Name: ###F."),sheet=mstrmojo.desc(13051," Sheet Name: ###S."),dataSource="";if(this.parent.data.getDataSource){dataSource=this.parent.data.getDataSource()+" ";}if(this.parent.data.sourceInfo){name=name.replace("###T",this.parent.data.getSourceObjectType());name=name.replace("###F",this.parent.data.sourceInfo.dbTableName||this.parent.data.sourceInfo.name);if(this.parent.data.sourceInfo.sheetName){sheet=sheet.replace("###S",this.parent.data.sourceInfo.sheetName);name+="<br>";name+=sheet;}}else{name="";}return dataSource+"<br>"+name;},cssClass:function(){var data=this.parent.data,model=this.parent.dataGrid.parent.model,cls="tableNameBox-name";if(data.type===constants.sourceType.file&&model.operationMode!==constants.operationMode.create){if(data.subtype===constants.sourceSubtype.localFile||data.subtype===constants.sourceSubtype.clipboard){cls+=" hasBrowse";}}return cls;},text:function(){var data=this.parent.data,v="";if(data.sourceInfo){v=data.sourceInfo.dbTableName||data.sourceInfo.name;}return v;}}},{scriptClass:"mstrmojo.StackContainer",renderMode:"notonShow",markupMethods:mstrmojo.hash.copy({onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},mstrmojo.StackContainer.prototype.markupMethods),cssClass:"tableNameBox-stack",visible:false,children:[{scriptClass:"mstrmojo.Button",cssClass:"tableNameBox-stack-edit",visible:false,text:mstrmojo.desc(1088,"Edit"),onclick:function(){mstrApp.getRootController().showDialog(constants.dialogType.diPageDialog,{tableID:this.parent.parent.data.tableID,left:"200px",top:"115px",cssClass:"mstrmojo-di-refresh-data-editor"});}},{scriptClass:"mstrmojo.FileUploadBox",cssClass:"mstrmojo-di-button mstrmojo-WebButton",visible:false,uploadTaskId:"importFile",action:mstrConfig.taskURL,fileFieldName:"myFile",initValue:false,browseLabel:mstrmojo.desc(1825,"Browse"),onvalueChange:function(){var data=this.parent.parent.data,hasFile=(this.value!==""),dataGrid=this.parent.parent.dataGrid;data.hasSelectFile=hasFile;data.fileUploader=this;if(hasFile){data.set("checked",true);}this.parent.parent.update();if(hasFile){this.parent.parent.children[0].set("text",this.getFileName());}else{this.parent.parent.children[0].resetText();}dataGrid.parent.checkCanRefresh();},getFileName:function(){var ret;if(mstrmojo.dom.supports(mstrmojo.dom.htmlFeatures.FILE_READER)&&this.fileNode.files){ret=this.fileNode.files.length>0&&this.fileNode.files[0].name;}else{ret=this.value;}return ret;},getFileSize:function(){var ret=0;if(mstrmojo.dom.supports(mstrmojo.dom.htmlFeatures.FILE_READER)&&this.fileNode.files){ret=this.fileNode.files.length>0&&this.fileNode.files[0].size;}else{try{var oas=new ActiveXObject("Scripting.FileSystemObject");var file=oas.getFile(this.fileNode.value);if(file){ret=file.Size;}}catch(e){}}return ret;},submit:function(ps,callbacks,config){function handleFileLoaded(e){var array=[];array.push(e.target.result);var blob=new Blob(array);mstrApp.showProgress(config);mstrmojo.xhr.upload("POST",mstrConfig.taskURL,callbacks,ps,blob,config);}function handleFileLoadError(){var res={code:0,message:mstrmojo.desc(12814,"Cannot read file content")};if(callbacks.failure){callbacks.failure(res);}if(callbacks.complete){callbacks.complete();}}function load(e){ps.fileName=filename;ps.index++;var array=[];array.push(e.target.result);var blob=new Blob(array);if(ps.index===ps.numberOfChunks){mstrmojo.xhr.upload("POST",mstrConfig.taskURL,callbacks,ps,blob,config);}else{mstrmojo.xhr.upload("POST",mstrConfig.taskURL,null,ps,blob,config);}if(start+MAX_FILE_SIZE<file.size){start=start+MAX_FILE_SIZE;reader=new FileReader();array=file.slice(start,Math.min(file.size,start+MAX_FILE_SIZE));reader.onload=load;reader.readAsArrayBuffer(array);}}var r=true;var reader,file,filename,numOfChunks,start,blob;if(this.onsubmit){r=this.onsubmit();}if(r){ps=ps||{};ps.fileFieldName=this.fileFieldName;ps.taskId=this.uploadTaskId;ps.jsonp=this.jsonp.replace("{@id}",this.id);if(mstrmojo.dom.supports(mstrmojo.dom.htmlFeatures.FILE_READER)){reader=new FileReader();file=this.fileNode.files[0];filename=file.name;if(this.params){ps=this.params;}reader.onerror=handleFileLoadError;if(file.size>MAX_FILE_SIZE){numOfChunks=Math.ceil(file.size/MAX_FILE_SIZE);start=0;ps.index=0;ps.numberOfChunks=numOfChunks;ps.chunkSize=MAX_FILE_SIZE;ps.fileSize=file.size;ps.fileType="application/octet-stream";mstrApp.showProgress(config);mstrmojo.xhr.upload("POST",mstrConfig.taskURL,null,ps,null,config);blob=file.slice(start,start+MAX_FILE_SIZE);reader.onload=load;reader.readAsArrayBuffer(blob);}else{ps.fileName=this.fileNode.files[0].name;reader.onload=handleFileLoaded;reader.readAsArrayBuffer(file);}}else{ps.taskEnv="jsonp2";ps.fileName=this.value;var h=[],p;for(p in ps){h.push('<input type="hidden" name="'+p+'" value="'+mstrmojo.string.encodeHtmlString(ps[p])+'"/>');}if(this.params){ps=this.params;for(p in ps){h.push('<input type="hidden" name="'+p+'" value="'+mstrmojo.string.encodeHtmlString(ps[p])+'"/>');}}this.paramsNode.innerHTML=h.join("");if(callbacks){this.onSuccess=callbacks.success;this.onFailed=callbacks.failure;}this.formNode.submit();}this.set("status","loading");}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-di-button mstrmojo-WebButton",visible:false,text:mstrmojo.desc(13052,"Upload"),replaceOneTierFile:function(selectedFiles){var importSource=this.parent.parent.data,dataGrid=this.parent.parent.dataGrid;var i=0,pos;if(!selectedFiles){return ;}var files=selectedFiles.split("*"),file,newfiles=[];for(i=0;i<files.length;i++){file=files[i];newfiles.push(file);pos=file.lastIndexOf("\\");if(pos===-1){pos=file.lastIndexOf("/");}importSource.hasSelectFile=true;importSource.files=[];importSource.files.push(newfiles[0]);this.parent.parent.children[0].set("text",newfiles[0].substr(pos+1));this.parent.parent.update();dataGrid.parent.checkCanRefresh();}},onclick:function(){var rootController=mstrApp.getRootController(),importSource=this.parent.parent.data,dataGrid=this.parent.parent.dataGrid,slot=rootController.navigationController.getPageSlot(),pageType=constants.pageType.dataSelection,sourceInfo=null,box=this.parent.parent,footerConfig={next:{visible:true,text:mstrmojo.desc(13052,"Upload")},back:{visible:false},cancel:{visible:true},finish:{visible:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};switch(importSource.type){case constants.sourceType.file:if(importSource.subtype===constants.sourceSubtype.clipboard){slot.setConfig({footerConfig:footerConfig,properties:{operationMode:constants.operationMode.refresh,tableID:importSource.tableID,currentSource:importSource,onNextButtonClick:function(){rootController.showPage(constants.pageType.emmaPreview);importSource.hasSelectFile=true;importSource.fileUploader=this;box.update();dataGrid.parent.checkCanRefresh();}}});this.pageSlot=slot;pageType=constants.pageType.clipboard;sourceInfo=0;rootController.showDialog(constants.dialogType.diPageDialog,{pageType:pageType,sourceInfo:sourceInfo,slot:slot});}else{if(importSource.subtype===constants.sourceSubtype.localFile){mstrmojo.DI.DITableStatusList.selectedUploader=this.id;rootController.launchOneTierBrowser("mstrmojo.DI.DITableStatusList.OneTierFiles");}}break;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-di-button mstrmojo-WebButton",visible:false,text:mstrmojo.desc(14287,"Input Credentials"),onclick:function(){var source=this.parent.parent.data;var tableIDs=[this.parent.parent.data.did];var controller=mstrApp.getRootController();switch(source.type){case constants.sourceType.googleBigQuery:case constants.sourceType.dropbox:case constants.sourceType.facebook:case constants.sourceType.googleAnalytics:case constants.sourceType.googleDrive:case constants.sourceType.salesforce:case constants.sourceType.twitter:controller.setTableIDsForOAuth(tableIDs);controller.gotoOAuthLogin(source.type);break;default:new mstrmojo.onetier.vi.ui.DBCredentialEditor({data:source,zIndex:controller.getDialogController().getNextZIndex()}).open();break;}}}],preBuildRendering:function(){var source=this.parent.data,model=this.parent.dataGrid.parent.model,selected=null;switch(source.type){case constants.sourceType.file:if(source.subtype===constants.sourceSubtype.clipboard){selected=this.children[2];}else{if(source.subtype===constants.sourceSubtype.localFile){if(mstrApp.isSingleTier){selected=this.children[2];}else{selected=this.children[1];}}}break;default:selected=null;if(mstrApp.isSingleTier&&model.missingCredentialsData){var that=this;mstrmojo.array.forEach(model.missingCredentialsData.datasets[0].tables,function(table){if(table.did===source.tableID){if(table.dbRole){source.dbRole=table.dbRole;}selected=that.children[3];}});}break;}if(selected){this.set("selected",selected);}this.subEvt=model.attachEventListener("PublishStatusUpdate",this.id,"update");if(this._super){this._super();}},onUnRender:function(){var model=this.parent.dataGrid.parent.model;if(this.subEvt){model.detachEventListener(this.subEvt);}},update:function(evt){if(evt&&evt.name&&this.selected){this.selected.set("enabled",false);}if(evt&&evt.reset&&this.selected){this.selected.set("enabled",true);this.parent.update();}if(evt&&evt.reset&&evt.errors){switch(evt.errors[this.parent.data.tableID]){case constants.backendError.noExternalSession:case constants.backendError.databaseCredentialsNotAvailable:this.selected=this.children[3];this.selected.set("visible",true);this.parent.update();break;case constants.backendError.switchingFileType:if(this.selected){this.selected.set("enabled",true);this.parent.update();}break;}}}}]}});if(bHasRefreshPolicy){columns.push({headerText:mstrmojo.desc(13053,"Refresh Policy"),headerCss:"tablestatus-header pulldown",colWidth:"260",dataWidget:{scriptClass:"mstrmojo.StackContainer",cssClass:"tablestatus-col stack pulldown",colWidth:"65",children:[{scriptClass:"mstrmojo.Pulldown",popupZIndex:9999,popupToBody:true,colWidth:"230",visible:false,items:[],tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var pos;if(this.tooltipContent){pos=$DOM.position(this.domNode);this.set("richTooltip",{keepArrowXPos:true,cssClass:"vi-regular vi-tooltip-V",top:Math.max(pos.y-3,0),left:Math.max(pos.x,0),posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:this.tooltipContent});}},postCreate:function postCreate(){var data=this.parent.data,dataWidget=this.parent,enabled=true,operationMode=this.parent.dataGrid.parent.model.operationMode,items=[{n:$DESC(9117,"Replace existing data"),dssid:constants.cubeRefreshType.replaceTable},{n:$DESC(9118,"Update existing data and add new data"),dssid:constants.cubeRefreshType.upsert},{n:$DESC(12397,"Update existing data"),dssid:constants.cubeRefreshType.update},{n:$DESC(12398,"Add new data"),dssid:constants.cubeRefreshType.add}];if(data.isAll){items.push({n:"",dssid:constants.cubeRefreshType.dummy});this.parent.set("visible",false);}else{if(operationMode===constants.operationMode.edit){if(dataWidget.dataGrid.forceFullPublish){enabled=false;}else{enabled=(!data.forceRepublish||!data.schemaChanged)&&data.hasRefreshedData;}this.set("enabled",enabled);if(!enabled){this.set("tooltipContent",mstrmojo.desc(13970,'The edit operations require the refresh policy to be "Replace existing data".'));}}if(operationMode===constants.operationMode.refresh){enabled=!dataWidget.dataGrid.forceFullPublish&&(!data.forceRepublish||!data.schemaChanged);this.set("enabled",enabled);if(!this.enabled){if(dataWidget.dataGrid.forceFullPublish){this.set("tooltipContent",mstrmojo.desc(13971,'Cube doesnot exist in memory so the refresh policy has to be "Replace existing data".'));}else{this.set("tooltipContent",mstrmojo.desc(13972,'The edit operations require the refresh policy to be "Replace existing data".'));}}}if(operationMode===constants.operationMode.subscribe){enabled=data.canSubscribe();this.set("enabled",enabled);if(!enabled){this.set("tooltipContent",mstrmojo.desc(13056,"No scheduling support for local files"));}}}this.set("origEnabled",this.enabled);this.set("items",items);},updateStatus:function updateStatus(){var dataWidget=this.parent,data=dataWidget.data,refreshType=null,oldRefreshType=data.model.refreshType,isSame=true;$A.forEach(dataWidget.dataGrid.items,function(item){if(!item.isAll){if(item.refreshType!==refreshType){if(refreshType===null){refreshType=item.refreshType;}else{isSame=false;return false;}}}return true;});if(!isSame){refreshType=constants.cubeRefreshType.dummy;}if(refreshType!==null&&refreshType!==oldRefreshType){data.model.set("refreshType",refreshType);}},updatePublishStatus:function(evt){if(evt&&evt.name){this.set("enabled",false);}if(evt&&evt.reset){this.set("enabled",this.origEnabled);}},preBuildRendering:function preBuildRendering(){var evtConfig,listConfig;if(this._super){this._super();}if(!this.parent.data.isAll){if(!this.eventSubs){evtConfig={};listConfig=evtConfig[this.id]={};listConfig.PublishStatusUpdate=this.updatePublishStatus;this.eventSubs=mstrApp.getRootController().attachDataChangeListeners(evtConfig);}return ;}if(!this.eventSubs){evtConfig={};listConfig=evtConfig[this.id]={};listConfig.scheduleRefreshTypeChange=this.updateStatus;listConfig.PublishStatusUpdate=this.updatePublishStatus;this.eventSubs=mstrApp.getRootController().attachDataChangeListeners(evtConfig);}this.updateStatus();},onUnRender:function onUnRender(){if(this.eventSubs){mstrApp.getRootController().detachDataChangeListeners(this.eventSubs);this.eventSubs=null;}if(this._super){this._super();}},premousedown:function premousedown(evt){if(this.enabled){mstrmojo.Pulldown.prototype.premousedown.call(this,evt);}},onvalueChange:function(){var idx=$A.find(this.items,this.itemIdField,this.value),rootController=mstrApp.getRootController(),scheduleController=rootController.getScheduleController(),refreshType,tableID,callback,data=this.parent.data,oldRefreshType,dataWidget=this.parent,changeList=[],refreshTypes=[],hasIRRInstance=dataWidget.dataGrid.parent.hasIRR,operationMode=dataWidget.dataGrid.parent.model.operationMode;if(idx<0){return ;}callback={failure:function failure(res){rootController.displayError(mstrmojo.desc(13054,"Cannot edit source table."),false,(res&&res.message)||"");}};refreshType=this.items[this.selectedIndex].dssid;if(data.isAll){oldRefreshType=data.model.refreshType;if(refreshType===oldRefreshType){return ;}data.model.refreshType=refreshType;if(refreshType===constants.cubeRefreshType.dummy){return ;}$A.forEach(dataWidget.dataGrid.items,function(item){if(!item.isAll&&item.refreshType!==refreshType){if(item.checked){changeList.push(item.tableID);refreshTypes.push(refreshType.toString());}item.set("refreshType",refreshType);}});if(operationMode===constants.operationMode.subscribe&&changeList.length>0&&hasIRRInstance){scheduleController.editEmmaIRRSourceTableRefreshTypes(changeList,refreshTypes,null,callback);}return ;}oldRefreshType=data.refreshType;if(refreshType===oldRefreshType){return ;}data.refreshType=refreshType;rootController.raiseModelEvent({name:"scheduleRefreshTypeChange"});if(!(hasIRRInstance&&data.checked&&oldRefreshType!==refreshType)){return ;}tableID=data.tableID;scheduleController.editEmmaIRRSourceTableURL(tableID,refreshType.toString(),null,null,callback);},bindings:{value:function(){return this.parent.data.isAll?this.parent.data.model.refreshType:this.parent.data.refreshType;}}},{scriptClass:"mstrmojo.Label",colWidth:"100",visible:false,bindings:{text:function(){var v="";var type=this.parent.data.xdaType;switch(type){case constants.xdaType.excel:case constants.xdaType.text:v=mstrmojo.desc(13056,"No scheduling support for local files");break;}return v;}}}],preBuildRendering:function(){this.set("selected",this.children[0]);if(this._super){this._super();}}}});}if(bHasSourceFilter){columns.push({headerWidget:{scriptClass:"mstrmojo.Box",cssClass:"tablestatus-header sourceFilter cf",preBuildRendering:function(){var model=this.dataGrid.parent.model,hasFilter=false;$H.forEach(model.isFilterInTable,function(value){if(value){hasFilter=true;return false;}});if(hasFilter){this.children[0].set("text",mstrmojo.desc(13275,"Edit Refresh Filter"));}else{this.children[0].set("text",mstrmojo.desc(13276,"Set Refresh Filter"));}this.children[1].set("visible",hasFilter);},children:[{scriptClass:"mstrmojo.Label",cssClass:"filterLink",onclick:function(){openFilterEditor.call(this,this.parent.dataGrid.parent.model);}},{scriptClass:"mstrmojo.Button",cssClass:"deleteFilter",onclick:function(){var dataGrid=this.parent.dataGrid,model=dataGrid.parent.model;model.filter="";mstrApp.getRootController().getScheduleController().setEmmaIRRFilter(mstrmojo.fe.FilterUtils.getExprXml(""),{success:function success(){model.updateFilterUsedInTable();dataGrid.refresh();},failure:function(res){mstrApp.getRootController().displayError($DESC(13099,"Failed to set refresh filter."),false,(res&&res.message)||"");}});}}]},dataWidget:{scriptClass:"mstrmojo.StackContainer",cssClass:"tablestatus-col sourceFilterBox",children:[{scriptClass:"mstrmojo.Button",cssClass:"sourceFilterButton",visible:false,bindings:{enabled:function(){var data=this.parent.data;return data.model&&data.model.IRRAttributes&&data.model.IRRAttributes.length>0;}},text:$DESC(12400,"Set Filter"),onclick:function(){openFilterEditor.call(this,this.parent.data.model);}},{scriptClass:"mstrmojo.Label",cssClass:"sourceFilterLabel",visible:false,bindings:{text:function(){var value,data=this.parent.data,model=this.parent.dataGrid.parent.model;if(data.xdaType===constants.xdaType.qbSingleTable){value=(model.isFilterInTable&&model.isFilterInTable[data.tableID])?$DESC(14215,"Set"):$DESC(12402,"Not Set");}else{value="";}return value;}}}],preBuildRendering:function(){var selected;if(this.data.isAll){selected=this.children[0];}else{selected=this.children[1];}this.set("selected",selected);if(this._super){this._super();}}}});}if(bHasAlternateSource){columns.push({headerText:$DESC(12401,"Alternate Source"),headerCss:"tablestatus-header alternateSource",dataWidget:{scriptClass:"mstrmojo.Box",cssClass:"tablestatus-col alternateSourceBox cf",preBuildRendering:function(){this.update();},update:function(){var data=this.data,support=data.canSetAlternateSource(),v,altSource=data.alternateSource,sourceLabel=this.children[0];this.set("visible",support);if(altSource){v=mstrmojo.desc(13277,"Edit Source");sourceLabel.set("title",altSource.tableName);}else{v=mstrmojo.desc(12393,"Set Source");sourceLabel.set("title","");}sourceLabel.set("text",v);this.children[1].set("visible",!!altSource);},children:[{scriptClass:"mstrmojo.Label",cssClass:"tablestatus-col alternateSource active",onclick:function(){var data=this.parent.data;if(!(data.checked&&mstrApp.getRootController().getScheduleController().isAdvMode())){return ;}openAlternateSourceEditor.call(this,data.tableID);}},{scriptClass:"mstrmojo.Button",cssClass:"deleteAltersource",onclick:function(){var cellWidget=this.parent,tableID=this.parent.data.tableID,callback={success:function(){cellWidget.data.alternateSource=null;cellWidget.update();},failure:function(res){mstrApp.getRootController().displayError($DESC(12394,"Cannot delete alternate source."),false,(res&&res.message)||"");}};mstrApp.rootController.getScheduleController().editEmmaIRRSourceTableSingleTable(tableID,null,"1",null,null,null,callback);}}]}});}if(this.hasRendered){this.unrender();this.columns=columns;this.render();}else{this.columns=columns;}}}]});mstrmojo.DI.DITableStatusList.OneTierFiles=function(file){var component=mstrmojo.all[mstrmojo.DI.DITableStatusList.selectedUploader];component.replaceOneTierFile(file);};}());