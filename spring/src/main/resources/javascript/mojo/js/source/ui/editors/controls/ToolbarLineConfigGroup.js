(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.ui.ButtonBar","mstrmojo.HBox","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.array","mstrmojo.chart.enums.EnumLineStyle");var $ARR=mstrmojo.array,$ENUM_LINE_STYLE=mstrmojo.gm.EnumCombinedLineStyle;var EnumLineCompName={LINE_COLOR:"Clr",LINE_STYLE:"CmbStyle"},LINE_STYLE_ID_VALUE_MAP={"1pt solid":$ENUM_LINE_STYLE.THIN,"2pt solid":$ENUM_LINE_STYLE.THICK,"1pt dashed":$ENUM_LINE_STYLE.DASHED,"1pt dotted":$ENUM_LINE_STYLE.DOTTED,none:$ENUM_LINE_STYLE.NONE};mstrmojo.ui.editors.controls.ToolbarLineConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.ToolbarLineConfigGroup",propNames:undefined,showNoFillInColor:true,showNoneOption:true,children:[{scriptClass:"mstrmojo.HBox",alias:"lineToolbarConfig",cssText:"border-collapse: separate;",width:"190px",children:[{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"lineColor",cssText:"border-collapse: collapse;",showGradient:false,selectedValue:"#000000",isHostedWithin:true,width:"60px",postselectedValueChange:function(evt){if(this.propName){this.parent.parent.raiseFormatValueChange(this.propName,evt.value,evt.valueWas);}}},{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",alias:"lineStyle",cssText:"border-collapse: collapse;",showThickOption:true,showNoneOption:true,selectedIndex:0,width:"60px",defaultSelectedIndex:3,postInit:function postInit(){var css=["mstrmojo-ui-LineStyle"];if(!this.showNoneOption){css.push("no-none");}mstrmojo.css.addWidgetCssClass(this,css);(this.list.items||[]).forEach(function(item){item.v=(LINE_STYLE_ID_VALUE_MAP[item.id]!==undefined?LINE_STYLE_ID_VALUE_MAP[item.id]:LINE_STYLE_ID_VALUE_MAP["not defined"]);});},onshowNoneOptionChange:function(evt){var css=["no-none"];if(!evt.value){mstrmojo.css.addWidgetCssClass(this,css);}else{mstrmojo.css.removeWidgetCssClass(this,css);}var hr=this.hasRendered;if(hr){this.refresh();}},postselectedValueChange:function(evt){var selectedIndex=$ARR.find(this.list.items,"id",evt.value),selectedIndexWas=$ARR.find(this.list.items,"id",evt.valueWas);if(selectedIndex===-1){selectedIndex=this.defaultSelectedIndex;}if(selectedIndexWas===-1){selectedIndexWas=this.defaultSelectedIndex;}var newValue=this.list.items[selectedIndex].v,valueWas=this.list.items[selectedIndexWas].v;if(valueWas!==newValue){if(this.propName){this.parent.parent.raiseFormatValueChange(this.propName,newValue,valueWas);}}}}]}],getChildComp:function getChildComp(propName){var rst=null;if(propName.indexOf(EnumLineCompName.LINE_COLOR)!==-1){rst=this.lineToolbarConfig.lineColor;}else{if(propName.indexOf(EnumLineCompName.LINE_STYLE)!==-1){rst=this.lineToolbarConfig.lineStyle;}}return rst;},init:function init(props){this._super(props);if(props.propNames){this.propNames=props.propNames;}this.lineToolbarConfig.lineColor.showNoFill=this.showNoFillInColor;},initPropNameToComp:function initPropNameToComp(propNames){$ARR.forEach(propNames,function(propName){var comp=this.getChildComp(propName);if(comp&&comp!==undefined){comp.propName=propName;}},this);if(this.lineToolbarConfig.lineStyle){this.lineToolbarConfig.lineStyle.showNoneOption=this.showNoneOption;this.lineToolbarConfig.lineStyle.postInit();}},onshowNoneOptionChange:function(evt){if(this.lineToolbarConfig.lineStyle){this.lineToolbarConfig.lineStyle.set("showNoneOption",evt.value);}},setChildValue:function setChildValue(propName,newValue){var comp=this.getChildComp(propName),newlySelectedIdx;if(comp===undefined){return false;}switch(comp.alias){case"lineColor":if(typeof newValue==="undefined"){comp.set("selectedValue","transparent");}else{if(newValue!==comp.selectedValue){comp.set("selectedValue",newValue);}}break;case"lineStyle":if(typeof newValue==="undefined"){comp.list.clearSelect();comp.selectedValue="none";comp.updatePreview();}else{newlySelectedIdx=$ARR.find(comp.list.items,"v",newValue);if(newlySelectedIdx===-1){newlySelectedIdx=0;}var newlyValue=comp.list.items[newlySelectedIdx].id;if(newlyValue!==comp.selectedValue){comp.set("selectedValue",newlyValue);}}break;}},setChildrenValue:function setChildrenValue(propNamesAndValues){propNamesAndValues.forEach(function(item){this.setChildValue(item[0],item[1]);});}});}());