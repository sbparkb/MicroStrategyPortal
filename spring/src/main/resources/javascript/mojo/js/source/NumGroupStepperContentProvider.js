(function(){mstrmojo.requiresCls("mstrmojo.NumStepperContentProvider","mstrmojo.num","mstrmojo.array");var $NUM=mstrmojo.num,$ARR=mstrmojo.array;var DEFAULT_VALUE="?";function has(cp,direction){var boundary=direction?cp.max:cp.min,altBoundary=direction?cp.min:cp.max,newValGroup=cp.getValGroup(direction?1:-1);return(boundary===null||(direction?(newValGroup.every(function(value){return value<=boundary;})):(newValGroup.every(function(value){return value>=boundary;})))||(altBoundary!==null&&cp.canLoop));}function traverse(cp,direction){var min=cp.min,max=cp.max,newValGroup=cp.getValGroup(direction?1:-1)||[];if((direction&&max!==null&&newValGroup.some(function(value){return value>max;})||(!direction&&min!==null&&newValGroup.some(function(value){return value<min;})))){if(cp.canLoop){newValGroup.forEach(function(newVal,idx){newVal=((newVal-min)%(max-min+1))+min;newVal=(newVal>=min)?newVal:newVal+(max-min+1);newValGroup[idx]=newVal;});}else{return ;}}cp.item[cp.valField]=cp.curValGroup=newValGroup;cp.onTraverse();}mstrmojo.NumGroupStepperContentProvider=mstrmojo.declare(mstrmojo.NumStepperContentProvider,null,{scriptClass:"mstrmojo.NumGroupStepperContentProvider",curValGroup:null,init:function(props){this._super(props);},_initCurrent:function(){var item=this.item,curValGroup=this.curValGroup=item[this.valField];if(curValGroup===null||curValGroup===undefined){var min=this.min;this.curValGroup=min!==null?[min]:0;}this.curValGroup=$ARR.ensureArray(this.curValGroup);},next:function(){traverse(this,true);},prev:function(){traverse(this,false);},hasPrev:function(){return has(this,false);},hasNext:function(){return has(this,true);},getValGroup:function(delta){var vg=this.curValGroup,interval=this.interval,_rtn=[];(vg||[]).forEach(function(value,idx){_rtn[idx]=vg[idx]+(interval*(delta||0));});return _rtn;},getVal:function(){var _rtn=null;(this.curValGroup||[]).forEach(function(val){if(_rtn===null){_rtn=val;}else{if(_rtn!==DEFAULT_VALUE&&val!==_rtn){_rtn=DEFAULT_VALUE;}}});return _rtn;},setVal:function(newVal){var min=this.min,max=this.max,vg=this.curValGroup;if(typeof newVal!=="number"||isNaN(newVal)||$NUM.inNumericRange(newVal,min,max)!==0){return ;}(vg||[]).forEach(function(val,idx){vg[idx]=newVal;});this.onTraverse();},_set_curValGroup:function(n,newValGroup){var min=this.min,max=this.max,oldValGroup=this.getValGroup();if(newValGroup.some(function(val){return typeof val!=="number";})||newValGroup.some(function(val){return isNaN(val);})||newValGroup.every(function(val,idx){return val===oldValGroup[idx];})||newValGroup.every(function(val){return $NUM.inNumericRange(val,min,max)!==0;})){return false;}this.item[this.valField]=this.curValGroup=newValGroup;return true;}});}());