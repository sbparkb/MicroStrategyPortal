(function(){mstrmojo.requiresCls("mstrmojo.SearchWidget","mstrmojo.hash","mstrmojo.string","mstrmojo.css");var $H=mstrmojo.hash,$S=mstrmojo.string,$CSS=mstrmojo.css;var filterItemName=function(item,itemNameField,filterExpression){var name=item[itemNameField],filterRegExp=new RegExp($S.regEscape(filterExpression),"ig"),filterMarkedName;if(filterRegExp.test(name)){filterMarkedName=filterExpression?name.replace(filterRegExp,function(match){return"<em>"+$S.encodeHtmlString(match)+"</em>";}):name;}return filterMarkedName;};mstrmojo.vi.ui.rw.selectors._IsSearchableList=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._IsSearchableList",{_mixinName:"mstrmojo.vi.ui.rw.selectors._IsSearchableList",itemNameField:"n",updatefilterItemNode:function updatefilterItemNode(item,idx){var itemNode=this._getItemNode(idx),clonedItem=$H.copy(item),filteredName=filterItemName(item,this.itemNameField,this.filterExpr),tempElement;if(itemNode){if(filteredName){clonedItem[this.itemNameField]=filteredName;tempElement=document.createElement("div");tempElement.innerHTML=this.itemRenderer.render(clonedItem,idx,this);mstrmojo.dom.replace(itemNode,tempElement.firstChild);itemNode=tempElement.firstChild;}$CSS.toggleClass(itemNode,"Out",!filteredName);}},postfilterExprChange:function postfilterExprChange(){var items=this.items;for(var i=0;i<items.length;i++){this.updatefilterItemNode(items[i],i);}},getSearchbarCfg:function getSearchbarCfg(){return{scriptClass:"mstrmojo.SearchWidget",alias:"search",quickSearch:true,placeholder:this.searchboxNode,onsearch:function onsearch(pattern){this.parent.set("filterExpr",pattern);},onclear:function onclear(){this.parent.set("filterExpr","");}};},postBuildRendering:function postBuildRendering(){var tb=this.getSearchbarCfg(),sn=tb.placeholder,searchbox=this.searchbox,cls=tb.scriptClass,fn;if(sn){if(!searchbox){mstrmojo.requiresCls(cls);tb.parent=this;fn=eval(cls);searchbox=new fn(tb);this.searchbox=searchbox;}searchbox.placeholder=sn;searchbox.render();}return this._super();},unrender:function unrender(ignoreDom){var searchbox=this.searchbox;if(searchbox){searchbox.unrender(ignoreDom);}return this._super(ignoreDom);}});}());