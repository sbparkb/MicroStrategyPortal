(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.vi.util.ThresholdUtils","mstrmojo.array");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates");var $MOJO=mstrmojo,$ARR=$MOJO.array,$VIZ=$MOJO.vi.viz,$VIZTEMPLATES=$VIZ.EnumVisualizationTemplates,$THRESHOLD_UTILS=mstrmojo.vi.util.ThresholdUtils;mstrmojo.vi.viz.VisualizationTransition=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.vi.viz.VisualizationTransition",vis:null,transitionDropZones:mstrmojo.getMissingFn(),addClearAllThresholdsActions:function addClearAllThresholdsActions(actions){var host=this.vis;$THRESHOLD_UTILS.addClearAllThresholdsActions(host.model,host.node,actions);},addThresholds:function addThresholds(node,templateMetric,actions,colors,ranges,replaceExistingThreshold){var host=this.vis;return $THRESHOLD_UTILS.addThresholds(host.model,host,host.node,templateMetric,actions,colors,ranges,replaceExistingThreshold);},clearImageThreshold:function clearImageThreshold(thresholds,thresholdActions){var th,i;for(key in thresholds){if(thresholds.hasOwnProperty(key)){th=thresholds[key];if(th&&th.length){for(i=0;i<th.length;i++){if(!(th[i].fmt&&th[i].fmt.bc)){this.addClearAllThresholdsActions(thresholdActions);break;}}}}}},isGraphMatrix:function isGraphMatrix(templateID){var result=false;switch(templateID){case $VIZTEMPLATES.UNKNOWN_GRAPHMATRIX_TYPE:case $VIZTEMPLATES.GRAPHMATRIXBUBBLECIRCLEMM:case $VIZTEMPLATES.GRAPHMATRIXBUBBLEGRIDCIRCLEAA:case $VIZTEMPLATES.GRAPHMATRIXBUBBLEGRIDSQUAREAA:case $VIZTEMPLATES.GRAPHMATRIXBUBBLESQUAREAM:case $VIZTEMPLATES.GRAPHMATRIXBUBBLESQUAREMM:case $VIZTEMPLATES.GRAPHMATRIXHORIZONTALBARCLUSTERED:case $VIZTEMPLATES.GRAPHMATRIXHORIZONTALBARSTACKED:case $VIZTEMPLATES.GRAPHMATRIXHORIZONTALBARPERCENT:case $VIZTEMPLATES.GRAPHMATRIXHORIZONTALLINECLUSTERED:case $VIZTEMPLATES.GRAPHMATRIXHORIZONTALLINESTACKED:case $VIZTEMPLATES.GRAPHMATRIXHORIZONTALLINEPERCENT:case $VIZTEMPLATES.GRAPHMATRIXHORIZONTALAREACLUSTERED:case $VIZTEMPLATES.GRAPHMATRIXHORIZONTALAREASTACKED:case $VIZTEMPLATES.GRAPHMATRIXHORIZONTALAREAPERCENT:case $VIZTEMPLATES.GRAPHMATRIXSCATTERCIRCLEMM:case $VIZTEMPLATES.GRAPHMATRIXSCATTERGRIDCIRCLEAA:case $VIZTEMPLATES.GRAPHMATRIXSCATTERGRIDSQUAREAA:case $VIZTEMPLATES.GRAPHMATRIXSCATTERSQUAREAM:case $VIZTEMPLATES.GRAPHMATRIXSCATTERSQUAREMM:case $VIZTEMPLATES.GRAPHMATRIXVERTICALBARCLUSTERED:case $VIZTEMPLATES.GRAPHMATRIXVERTICALBARSTACKED:case $VIZTEMPLATES.GRAPHMATRIXVERTICALBARPERCENT:case $VIZTEMPLATES.GRAPHMATRIXVERTICALLINECLUSTERED:case $VIZTEMPLATES.GRAPHMATRIXVERTICALLINESTACKED:case $VIZTEMPLATES.GRAPHMATRIXVERTICALLINEPERCENT:case $VIZTEMPLATES.GRAPHMATRIXVERTICALAREACLUSTERED:case $VIZTEMPLATES.GRAPHMATRIXVERTICALAREASTACKED:case $VIZTEMPLATES.GRAPHMATRIXVERTICALAREAPERCENT:case $VIZTEMPLATES.GRAPHMATRIXPIE:case $VIZTEMPLATES.GRAPHMATRIXRING:result=true;break;default:break;}return result;},filterGMTrainingMetric:function filterGMTrainingMetric(dz,mx){var metrics,found,rets=[];if(!dz||!dz.ColorBy||!mx){return mx;}var getTm=function(dzn){return(dzn&&dzn.TemplateMetric)||[];};metrics=getTm(dz.AngleBy).concat(getTm(dz.Rows)).concat(getTm(dz.YAxis)).concat(getTm(dz.Columns)).concat(getTm(dz.XAxis)).concat(getTm(dz.ColorBy)).concat(getTm(dz.SizeBy)).concat(getTm(dz.AdditionalMetrics));$ARR.forEach(mx,function(outer){found=false;$ARR.forEach(metrics,function(inner){if(outer.did===inner.id){found=true;return false;}});if(found){rets.push(outer);}});return rets;}});}());