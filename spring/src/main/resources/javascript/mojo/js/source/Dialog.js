(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var $D=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" style="z-index: 1100;" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},editorNode:null,btnHbox:null,markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(init){if(init){return ;}var v=this.visible,d=v?"block":"none";this.editorNode.style.display=d;if(this.modal){this.curtainNode.style.display=d;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function preBuildRendering(){var b;var buttons=this.buttons;if(buttons&&!this.btnHbox){for(b in buttons){buttons[b].cssClass=(buttons[b].cssClass||"")+(this.noButtonCls?"":" mstrmojo-Editor-button");}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:buttons},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function buildRendering(){var ph=this.placeholder;if(this._super()){if(!this.parent&&!ph){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function getResizeHandler(){var id=this.id;return function(){var dialog=mstrmojo.all[id];dialog.resizeDialog();dialog.positionDialog();};},postBuildRendering:function postBuildRendering(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var fn=this._resizeHandler=this.getResizeHandler();$D.attachEvent(window,"resize",fn);}this.resizeDialog();this.positionDialog();try{this.domNode.focus();}catch(ex){}return true;},resizeDialog:function resizeDialog(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function resizeCurtain(){var w=this,curtainNode=w.curtainNode,body=document.body,docElement=document.documentElement,cs=curtainNode.style,curtainPosition=w.curtainPosition;cs.width=Math.max(body.clientWidth,docElement.scrollWidth)+"px";if(curtainPosition&&curtainPosition.h){cs.height=curtainPosition.h+"px";}else{cs.height=Math.max(body.clientHeight,docElement.scrollHeight)+"px";}if(curtainPosition&&curtainPosition.y){cs.top=curtainPosition.y+"px";}w.raiseEvent({name:"resizeCurtain"});},positionDialog:function positionDialog(){var editor=this.editorNode,left=this.left,top=this.top;if(!left||!top){$D.center(editor);var style=editor.style;if(this.alignment==="top"){style.top="10px";}if(left){style.left=left;}if(top){style.top=top;}}},destroy:function(ignoreDom){var fn=this._resizeHandler;if(fn){$D.detachEvent(window,"resize",fn);}this._super(ignoreDom);}});mstrmojo.toast=function toast(msg,duration,callback,toastConfig){var id="mojoToast9",dom,time=duration||3000;if(toastConfig&&toastConfig.id){id=toastConfig.id+"-"+id;}try{mstrmojo.all[id].destroy();}catch(e){}mstrmojo.insert({id:id,scriptClass:"mstrmojo.Label",cssClass:(toastConfig&&toastConfig.cssClass)?toastConfig.cssClass:"toastCss",text:msg}).render();dom=mstrmojo.all[id].domNode;if(toastConfig&&toastConfig.dom){toastConfig.dom.appendChild(dom);}else{document.body.appendChild(dom);$D.bottomCenter(dom);}window.setTimeout(function(){if(callback){callback();}try{mstrmojo.all[id].destroy();}catch(e){}},time);};mstrmojo.mask={show:function(){var win=mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});win.render();document.body.appendChild(win.domNode);},hide:function(){mstrmojo.mask.win.destroy();}};}());