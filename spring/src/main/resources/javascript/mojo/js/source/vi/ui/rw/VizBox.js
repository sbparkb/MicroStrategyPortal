(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.func","mstrmojo.hash","mstrmojo.ToolSeparator","mstrmojo.CheckBox","mstrmojo.Label","mstrmojo.Dialog","mstrmojo.Button","mstrmojo.ui.menus.MenuConfig","mstrmojo.vi.models.VIComponentMap","mstrmojo.vi.ui.VizBoxTitleBar","mstrmojo.vi.ui.ViewDataDialog","mstrmojo.vi.ui.rw.UnitContainer","mstrmojo.vi.ui.editors.VisAsFilterDialog","mstrmojo.vi.ui.VizGalleryList","mstrmojo.EnumRWUnitType","mstrmojo.vi.viz.KnownVisualizations","mstrmojo.vi.viz.EnumWidgetTypes","mstrmojo.vi.models.EnumDragSources");mstrmojo.requiresDescs(14389,9126);var $CSS=mstrmojo.css,$DOM=mstrmojo.dom,$FUNC=mstrmojo.func,$HASH=mstrmojo.hash,$RW_UNIT_TYPES=mstrmojo.EnumRWUnitType,$KNOWN_VIZ=mstrmojo.vi.viz.KnownVisualizations,$WIDGET_TYPES=mstrmojo.vi.viz.EnumWidgetTypes,WTP_GRID=$WIDGET_TYPES.GRID,ENUM_SOURCE=mstrmojo.vi.models.EnumDragSources,PX="px",STATE_RESTORE=0,STATE_MAXIMIZE=2,$VI_COMPONENT_TYPES=mstrmojo.vi.models.VIComponentMap.TYPES,$VIZ_TEMPLATES=mstrmojo.vi.viz.EnumVisualizationTemplates;var $MOJO=mstrmojo;var $CLASS_VF_ACTIVE="vf-active",$CLASS_HIDDEN="hidden",$PADDING_CLASS="hasViewFilter";var VF_SHOW_GLOW=true;var EXP_PDF=3,EXP_EXCEL=4;var EXP_PDF_PRIV="web-export-to-pdf-privilege",EXP_EXCEL_PRIV="web-export-to-excel-privilege",EXP_CSV_PRIV="web-export-to-csv-privilege";var TYPE_METRIC=4;var BTN_MAX={n:mstrmojo.desc(4541,"Maximize"),cls:"max",fn:function fn(){this.parent.setPortalState(this,STATE_MAXIMIZE);this.isMaxed=true;},ctxt:null,dsbld:false};var BTN_RESTORE={n:mstrmojo.desc(4540,"Restore"),cls:"rt",fn:function fn(){this.parent.setPortalState(this,STATE_RESTORE);delete this.isMaxed;},ctxt:null,dsbld:false};function requestFailed(err){mstrApp.onerror(err);}function addCopyMoveMenuItems(cfg){var docModel=this.model,me=this,groups=[{n:mstrmojo.desc(11670,"Copy to"),toLayoutTitle:mstrmojo.desc(13933,"Copy to #"),toNewLayoutTitle:mstrmojo.desc(13934,"Copy to a New Sheet"),crossLayoutMessage:mstrmojo.desc(12137,"Copying will clear all filters from the new visualization. Do you want to continue?"),cls:"",fn:function fn(viz,vizPanelStack,dstPanelKey,dstLayoutKey){docModel.copyVisualization(viz,vizPanelStack,dstPanelKey,dstLayoutKey);}},{n:mstrmojo.desc(10461,"Move to"),toLayoutTitle:mstrmojo.desc(13935,"Move to #"),toNewLayoutTitle:mstrmojo.desc(13936,"Move to a New Sheet"),crossLayoutMessage:mstrmojo.desc(13937,"Moving will clear all filters from the new visualization. Do you want to continue?"),cls:"",fn:function fn(viz,vizPanelStack,dstPanelKey,dstLayoutKey){docModel.moveVisualization(viz,vizPanelStack,dstPanelKey,dstLayoutKey);}}],fnCrossLayout=function fnCrossLayout(title,msg,fnOK){return function(){mstrmojo.warn(msg,{confirmBtn:{fn:fnOK}},{title:title});};};groups.forEach(function(group){cfg.addPopupMenuItem(group.n,null,function(){var groupFn=group.fn,subMenu=new mstrmojo.ui.menus.MenuConfig(),panelStack=me.boxContent.builder.getLayoutVIMap(docModel.getCurrentLayoutKey()).getComponent($VI_COMPONENT_TYPES.VIZ_CONTENT),curLayoutKey=docModel.getCurrentLayoutKey(),otherPanels=panelStack.panels.filter(function(panel){return panel.k!==panelStack.selectedKey;}),otherLayouts=docModel.defn.layouts.filter(function(layoutDefn){return layoutDefn.k!==curLayoutKey;});otherPanels.forEach(function(panel){var panelKey=panel.k;subMenu.addMenuItem(panel.titleText,"",function(){groupFn(me,panelStack,panelKey,curLayoutKey);});});subMenu.addMenuItem(mstrmojo.desc(11671,"New Panel"),"",function(){groupFn(me,panelStack,null,curLayoutKey);});subMenu.addSeparator();otherLayouts.forEach(function(layout){subMenu.addMenuItem(layout.title,"",fnCrossLayout(group.toLayoutTitle.replace("#",layout.title),group.crossLayoutMessage,function(){groupFn(me,panelStack,null,layout.k);}));});subMenu.addMenuItem(mstrmojo.desc(11672,"New Sheet"),"",fnCrossLayout(group.toNewLayoutTitle,group.crossLayoutMessage,function(){groupFn(me,panelStack,null,null);}));return subMenu;},group.cls);});}function createFilterButtonMenuCfg(){var visualization=this.boxContent,data=visualization.node.data;if(!data){return ;}var model=visualization.model,filterExpression=data.vfexpr,limitExpression=data.vlexpr,selectorObjects=model.getSelectorDataFromViewFilter(filterExpression),filterBtnNode=this.filterBtnNode,filterMenuCfg;if(limitExpression||selectorObjects===null||selectorObjects.length>0){var controller=visualization.controller,submitFn=function submitFn(item){var callback=$FUNC.wrapMethods(controller._getXtabCallback(visualization),{success:function success(){visualization.raiseEvent({name:"regenerateToolbar"});}});controller.applyKeepOnly(visualization,callback,undefined,item.ctxt);};filterMenuCfg=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"mstrmojo-viz-fe-menu",isHostedWithin:false,useTooltip:true});filterMenuCfg.addMenuItem(mstrmojo.desc(1763,"Clear All"),"",submitFn,-1);filterMenuCfg.addSeparator();if(selectorObjects===null||limitExpression){filterMenuCfg.addMenuItem(data.vftext||mstrmojo.desc(14016,"Advanced Qualification"),"",submitFn,-1);}else{selectorObjects.forEach(function(selectorData,index){var menuStringArray=[],CLEAR_STR=mstrmojo.desc(2827,"Clear"),firstUnitName="",hasCommonUnit=true;selectorData.data.every(function(ORArray){[].concat(ORArray).every(function(elementData){if(firstUnitName===""){firstUnitName=elementData.tn;}return(hasCommonUnit=(firstUnitName===elementData.tn));});return hasCommonUnit;});selectorData.data.forEach(function(ORArray,idx){if(idx>0){menuStringArray.push(mstrmojo.desc(5283,"OR"));}var andString=[];[].concat(ORArray).forEach(function(elementData){andString.push((hasCommonUnit?"":(elementData.tn+" = "))+(elementData.v||mstrmojo.desc(14323,"NULL")));});menuStringArray.push(andString.join(" "));});var typeString=selectorData.keepOnly?"##":mstrmojo.desc(13232,"Not ##");filterMenuCfg.addMenuItem(CLEAR_STR+' "'+typeString.replace("##",(hasCommonUnit?firstUnitName+" = ":"")+menuStringArray.join(" "))+'"',"",submitFn,index);});}}this.filterMenuCfg=filterMenuCfg;toggleViewFilterTitleCSS.call(this,!!filterMenuCfg);$CSS.toggleClass(filterBtnNode,$CLASS_HIDDEN,!filterMenuCfg);}function autoHideFilterBtn(){if(this.filterMenuCfg){var onMoveCount=this._onMoveCount;if(onMoveCount===undefined||onMoveCount>=5){this._onMoveCount=0;window.clearTimeout(this._hideDNDHandler);var dndHandleNode=this.filterBtnNode;$CSS.removeClass(dndHandleNode,$CLASS_HIDDEN);this._hideDNDHandler=window.setTimeout(function(){$CSS.addClass(dndHandleNode,$CLASS_HIDDEN);},2000);}else{this._onMoveCount++;}}}function addExportMenu(cfg){var controllerID=this.model.controller.id,visualization=this.boxContent,gridKey=visualization.k;cfg.addPopupMenuItem(mstrmojo.desc(246,"Export"),this.id,function(){var exportCfg=new mstrmojo.ui.menus.MenuConfig(),visId=$KNOWN_VIZ.getDefinition(this.boxContent.model.data.visName||"Grid").id;if(canDisplayExcel(visId)){exportCfg.addMenuItem(mstrmojo.desc(3958,"Excel"),"exportToExcel",function(){mstrmojo.all[controllerID].exportVisualization(visualization,EXP_EXCEL);});}if(canDisplayPDF(visId)){exportCfg.addMenuItem(mstrmojo.desc(1877,"PDF"),"exportToPDF",function(){if(visualization.isClientExport&&visualization.exportVisualization){visualization.exportVisualization(EXP_PDF);}else{mstrmojo.all[controllerID].exportVisualization(visualization,EXP_PDF);}});}if(canDisplayCSV()){exportCfg.addMenuItem(mstrmojo.desc(11807,"Data"),"exportToCSV",function(){mstrmojo.all[controllerID].exportCSV(gridKey);});}return exportCfg;},"export");}function canDisplayExcel(visId){return(visId===$KNOWN_VIZ.GRID&&(!!mstrApp.features[EXP_EXCEL_PRIV]||!!mstrApp.isSingleTier));}function canDisplayPDF(visId){return([$KNOWN_VIZ.UNKNOWN,$KNOWN_VIZ.IMAGELAYOUT].indexOf(visId)===-1&&(!!mstrApp.features[EXP_PDF_PRIV]||!!mstrApp.isSingleTier));}function canDisplayCSV(){return !!mstrApp.features[EXP_CSV_PRIV]||!!mstrApp.isSingleTier;}function canDisplayExportMenu(){var visId=$KNOWN_VIZ.getDefinition(this.boxContent.model.data.visName||"Grid").id;return canDisplayExcel(visId)||canDisplayPDF(visId)||canDisplayCSV();}function addChangeVisItem(cfg){var content=this.boxContent,VizGalleryList=mstrmojo.vi.ui.VizGalleryList,listType=VizGalleryList.VIZ_LIST_TYPE;cfg.addPopupMenuItem(mstrmojo.desc(13165,"Change Visualization"),this.id,function(){var shapeCfg=new $MOJO.ui.menus.MenuConfig(),currentVisStyle=content.model.data.visName||"",visTypes=[{n:mstrmojo.desc(114,"Grid"),id:"VisGrid",s:"",vt:$VIZ_TEMPLATES.GRID}].concat(VizGalleryList.getVizList(listType.BUILT_IN_LIST+listType.CUSTOM_LIST));visTypes=visTypes.filter(function(item){return(item.s===""||$MOJO.ExpressVisList.getVis(item.s)!==null)&&item.s!==currentVisStyle;});var docModel=(content.getDocModel&&content.getDocModel())||content.model.docModel;visTypes.forEach(function(sp){shapeCfg.addMenuItem(sp.n,"",function(){docModel.changeSelectedVisType(sp.s||"",sp.vt,sp.wtp||WTP_GRID,sp.dz);});});return shapeCfg;},"");}function dropFromDataSource(context,updateDatasetsPanel){var dragData=context.getCtxtDragData();this.getZonesModel().addUnitsFromDataSource(dragData.items,dragData.dsid,context.actions,updateDatasetsPanel?context.callback:null);}function toggleViewFilterTitleCSS(hasViewFilter){if(this.titleBar){$CSS.toggleClass(this.titleBar.domNode,$PADDING_CLASS,hasViewFilter);}}mstrmojo.vi.ui.rw.VizBox=mstrmojo.declare(mstrmojo.vi.ui.rw.UnitContainer,[mstrmojo.vi.ui._CanDropFromSchema],{scriptClass:"mstrmojo.vi.ui.rw.VizBox",showTitleBar:true,titleBar:null,filterMenuCfg:null,filterBtnNode:null,init:function init(props){this._super(props);$CSS.addWidgetCssClass(this,"mstrmojo-VIBox");this.isMaxed=(this.defn.ds===STATE_MAXIMIZE);},getPanelForAddAction:function getPanelForAddAction(){return"editPanel";},getExcludedPanels:function getExcludedPanels(){return[];},getDocModel:function getDocModel(){var model=this.model;return model.docModel||model;},getTitleBarCfg:function getTitleBarCfg(){var cfg=this._super();cfg.scriptClass="mstrmojo.vi.ui.VizBoxTitleBar";cfg.close=function close(){var vizBox=this.parent,vizBoxParent=vizBox.parent;vizBoxParent.deleteBoxAndSubmit(vizBox);vizBoxParent.removeChildren(vizBox);vizBox.destroy();};cfg.titleEdited=function titleEdited(titleText,textChanged,oldText){var box=this.parent;box.draggable=true;if(textChanged){var model=box.getDocModel();model.renameRWUnitTitle(titleText,this.title,box.k,{success:function success(appliedTitle){box.defn.ttl=appliedTitle;box.set("title",appliedTitle);},failure:function failure(err){requestFailed(err);box.titleBar.set("title",oldText);}});}};return cfg;},getTitleVisibilityFmts:function getTitleVisibilityFmts(value){var fmts=this._super(value);fmts.FormattingView.ShowWidgetTitleBar=value;return fmts;},onclick:function onclick(evt){this._super(evt);this.titleBar.onclick();},switchPropertyOnClick:function switchPropertyOnClick(){var boxContent=this.boxContent;if(!boxContent||!boxContent.supportsEditorClickSwitching){return false;}return this._super();},postBuildRendering:function postBuildRendering(){try{this._super();var filterBtnNode=this.filterBtnNode=document.createElement("div"),id=this.id;filterBtnNode.className="hover-filter-btn "+$CLASS_HIDDEN;toggleViewFilterTitleCSS.call(this,!!this.filterMenuCfg);$DOM.attachEvent(filterBtnNode,"click",function(){var vizBox=mstrmojo.all[id],cfg=vizBox.filterMenuCfg;cfg.hostId=id;cfg.hostElement=filterBtnNode;vizBox.openPopup(new mstrmojo.ui.menus.Menu({popupConfig:cfg}));});this.domNode.appendChild(filterBtnNode);if(this.defn.ds===STATE_MAXIMIZE){this.parent.setPortalState(this,STATE_MAXIMIZE,true);}if(VF_SHOW_GLOW){$CSS.addClass(this.titleBar.leftToolbar.domNode,$CLASS_VF_ACTIVE);}}catch(e){var div=this.domNode.appendChild(document.createElement("div"));div.className="errorNode";div.innerText=mstrmojo.desc(11461,"There was an error rendering your visualization");this.getZonesModel=function getZonesModel(){return null;};}},doLayout:function doLayout(){var boxContent=this.boxContent;if(boxContent){boxContent.skipReRender=true;}this._super();if(boxContent){delete boxContent.skipReRender;}},applyBoxSize:function applyBoxSize(height,width,top,left){this._super(height,width,top,left);var boxContent=this.boxContent,childFormats=boxContent&&boxContent.getFormats();if(childFormats){var titleOffset=this.titleBar.visible?$DOM.position(this.titlebarNode).h:0;childFormats.height=(parseInt(height,10)-titleOffset)+PX;childFormats.width=width;}},updateDisplayName:function updateDisplayName(displayText,oldDisplayText){this._super(displayText,oldDisplayText,true);},createDeleteUpdate:function createDeleteUpdate(){var model=this.model,update=model.getDataService().newUpdate(),clearTargetUpdate=model.clearVisAsFilterAction(this,true);if(clearTargetUpdate){update.addUpdate(clearTargetUpdate);}var unitKey=this.boxContent.node.k;this.parent.children.forEach(function(childWidget){var unitDefn=childWidget.defn,targetKeys=unitDefn.tks;if(targetKeys){if((targetKeys||"").split("\u001E").indexOf(unitKey)>-1){update.addActions(model.getDataService().getRemoveCtrlTargetAction(unitDefn.ck,unitKey,undefined,true));if(childWidget.defn&&childWidget.defn.srct&&childWidget.defn.srct===TYPE_METRIC){update.setTreesToRender(3);}}}});var pRKeys=model.getSourceFilterKeys(unitKey,true);if(pRKeys){update.setTreesToRender(3);}update.addUpdate(model.getRemoveUnitUpdate({unit:this,partialRetrievalKeys:pRKeys}));update.addUpdate(model.associatedNodesUpdate(this.parent.children));return update;},generateToolbar:function generateToolbar(){createFilterButtonMenuCfg.call(this);this._super();},updateToolbar:function updateToolbar(cfg){var me=this,visualization=this.boxContent,showDesignItems=this.canShowDesignMenuItems(),addShowDataMenu=function(){cfg.addMenuItem(mstrmojo.desc(11476,"Show Data"),"shwd",function(){mstrmojo.vi.ui.ViewDataDialog.open(mstrmojo.all[me.id]);});},addMaxRestore=function(buttonConfigs,toolbar){if(buttonConfigs&&buttonConfigs.length===2){cfg.addDualStateItem(me.id,buttonConfigs[0],buttonConfigs[1],toolbar);}},maxButtons=null,parent=this.parent,isAppStatePresentation=mstrApp.isAppStatePresentation();if(parent&&parent.hasMultipleChildren()){maxButtons=[BTN_MAX,BTN_RESTORE];if(this.isMaxed){maxButtons.reverse();}}addMaxRestore(maxButtons,true);if(!isAppStatePresentation&&mstrApp.allowWebDashboardDesign()){addChangeVisItem.call(this,cfg);if(visualization.getContainerMenuItems){visualization.getContainerMenuItems(cfg);}cfg.addSeparator();var dropZonesModel=visualization.zonesModel;if(dropZonesModel&&dropZonesModel.canSwapAxis()){cfg.addMenuItem(mstrmojo.desc(11658,"Swap"),"",function(){dropZonesModel.swapAxis();});cfg.addSeparator();}if(dropZonesModel&&dropZonesModel.canDefineSubtotals()){cfg.addToggleMenuItem(mstrmojo.desc(6193,"Show Totals"),"",function(){dropZonesModel.showQuickSubtotals();},function(){dropZonesModel.hideDefinedSubtotals();},null,dropZonesModel.hasVisibleSubtotals());cfg.addSeparator();}if(visualization.handlesMultiSelection){if(parent&&parent.getTargetKeysByType([$RW_UNIT_TYPES.GRID,$RW_UNIT_TYPES.GRAPH,$RW_UNIT_TYPES.MOJOVISUALIZATION]).length>1){cfg.addMenuItem(mstrmojo.desc(11958,"Use as Filter..."),"uaf",function(){mstrmojo.vi.ui.editors.VisAsFilterDialog.open(mstrmojo.all[me.id]);});cfg.addSeparator();}}addShowDataMenu();cfg.addMenuItem(mstrmojo.desc(14389,"Remove Data"),"",function(){var dropZonesModel=visualization.zonesModel;dropZonesModel.clearAllDropZones(dropZonesModel.docModel.clearVisAsFilterAction(me));});cfg.addPopupMenuItem(mstrmojo.desc(12949,"Data Source"),this.id,function(){var setPrimDSCfg=new mstrmojo.ui.menus.MenuConfig(),model=me.model,datasets=model.datasets,gridSource=me.boxContent.model.data.datasetId||"",datasetOptions=[];var hasRecursiveAttribute=function(datasets){var hasRA=false;$HASH.forEach(datasets,function(ds){var att=ds.att&&ds.att[0];if(att&&att.t===12&&att.st===3076){hasRA=true;return false;}});return hasRA;};$HASH.forEach(datasets,function(dataset,id){datasetOptions.push({name:dataset.name,id:id});});if(!hasRecursiveAttribute(datasets)){datasetOptions.push({name:mstrmojo.desc(5949,"None"),id:""});}datasetOptions.forEach(function(opt){var id=opt.id;setPrimDSCfg.addMenuItem(opt.name,gridSource===id?"on":"",function(){var nodeKey=me.k,datasetId=id;if(gridSource===id){return ;}visualization.zonesModel.submitActionForDatasetUpdate({act:"editNode",nodeKey:nodeKey,treeType:me.defn.tt,datasetId:datasetId||"00000000000000000000000000000000",partialRetrieval:{nodes:[nodeKey]}});});});return setPrimDSCfg;});cfg.addSeparator();if(canDisplayExportMenu.call(this)){addExportMenu.call(this,cfg);}if(showDesignItems){cfg.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"dup",function(){me.model.duplicateVisualization(me);});addCopyMoveMenuItems.call(this,cfg);}cfg.addSeparator();this.addToggleTitleMenuItem(cfg);}else{addShowDataMenu();addExportMenu.call(this,cfg);}addMaxRestore(maxButtons,false);this._super(cfg);if(!isAppStatePresentation&&mstrApp.allowWebDashboardDesign()){cfg.addSeparator();cfg.addMenuItem(mstrmojo.desc(9126,"More Options...")+"...","",function(){var editorModel=me.getEditorModel(),hostModel=editorModel.getHost().model,hostModelData=hostModel&&hostModel.data,prop=(hostModelData&&hostModelData.gsi&&hostModelData.gsi.prop)||{};if(visualization instanceof mstrmojo.vi.ui.rw.Xtab){editorModel.openMoreOptionsEditor(prop,true,hostModelData.lhv);}else{editorModel.openMoreOptionsEditor(prop);}});}return cfg;},addFormatMenuItem:function addFormatMenuItem(menuCfg,formatData,fnCustom){var editModel=this.getEditorModel(),fnCustomOfModel=editModel.getFormatToTargetFn&&editModel.getFormatToTargetFn();if(fnCustomOfModel){fnCustom=fnCustom?$FUNC.composite([fnCustom,fnCustomOfModel]):fnCustomOfModel;}return this._super(menuCfg,formatData,fnCustom);},getFormatMenuItemTarget:function getFormatMenuItemTarget(formatData){var boxContent=this.boxContent;if(boxContent.getFormatMenuItemTarget){var target=boxContent.getFormatMenuItemTarget(formatData);if(target!==undefined){return target;}}return this._super(formatData);},getZonesModel:function getZonesModel(){return this.boxContent.zonesModel;},allowDropFromDataset:function allowDropFromDataset(context){var boxContent=this.boxContent;if(boxContent&&boxContent.allowBoxDropFromDataset){return boxContent.allowBoxDropFromDataset(context);}return true;},dropFromDataset:function dropFromDataset(context){dropFromDataSource.call(this,context,false);},dropFromAllObjects:function dropFromAllObjects(context){this.augmentDropContextForSchema(context,this.getZonesModel().docModel);dropFromDataSource.call(this,context,true);},isDragValid:function isDragValid(context){var boxContent=this.boxContent;if(boxContent.canOnlyDragOnTitleBar){if(!$DOM.contains(this.titleBar.getLabelNode(),context.src.node,true,this.domNode)){return false;}}return this._super(context)&&!this.isMaxed;},getAvatarCls:function getAvatarCls(){return this._super().concat(["viz-avi"]);},ondragenter:function ondragenter(context){var boxContent=this.boxContent,dragSource=context.getCtxtDragData().src;if(boxContent.handleDndForParentNode&&boxContent.ondragenter){if(dragSource===ENUM_SOURCE.DATASETS||dragSource===ENUM_SOURCE.VIZ_EDITOR||dragSource===ENUM_SOURCE.VIZ||dragSource===ENUM_SOURCE.ALL_OBJECT_LIST){boxContent.ondragenter(context);return ;}}this._super(context);},setTitleBarVisibility:function setTitleBarVisibility(isVisible){this._super(isVisible);this.titleBar.onclick();$CSS.toggleClass(this.filterBtnNode,$CLASS_HIDDEN,isVisible||!this.filterMenuCfg);},onmouseover:function onmouseover(evt){this._super(evt);if(!mstrApp.isInteractive()){return ;}$DOM.attachEvent(this.domNode,"mousemove",autoHideFilterBtn.bind(this));},onmouseout:function onmouseout(evt){this._super(evt);$DOM.detachEvent(this.domNode,"mousemove",autoHideFilterBtn.bind(this));}});mstrmojo.vi.ui.rw.VizBox.ENUM_PORTAL_STATE={RESTORE:STATE_RESTORE,MAXIMIZE:STATE_MAXIMIZE};}());