(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.fx","mstrmojo.Widget");function _getWidgetWidth(w,width){return w.getPaddingWidth?parseInt(width,10)-w.getPaddingWidth()+"px":width;}function _getWidgetHeight(w,height){return w.getPaddingHeight?parseInt(height,10)-w.getPaddingHeight()+"px":height;}mstrmojo.CMS.WidgetRenderer=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.CMS.WidgetRenderer",markupString:'<div id="{@id}" class="mstrmojo-WidgetRenderer {@cssClass}" style="{@cssText}">&nbsp;</div>',markupMethods:{onwidthChange:function(){if(!isNaN(parseInt(this.width,10))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height,10))){this.domNode.style.height=this.height;}}},autoDestroy:true,anim:true,_set_widget:function(n,v){var vWas=this.widget,changed=false,me=this,re=function(){if(vWas&&vWas.destroy&&me.autoDestroy){vWas.destroy(true);}v.width=_getWidgetWidth(v,me.width);v.height=_getWidgetHeight(v,me.height);me.widget=v;me.renderWidget();};if(vWas!=v){if(me.anim&&vWas&&vWas.domNode){new mstrmojo.fx.FadeOut({duration:200,interval:40,target:vWas.domNode,onEnd:function(){re();new mstrmojo.fx.FadeIn({duration:1000,interval:40,target:me.domNode}).play();}}).play();}else{re();}changed=true;}return changed;},onwidthChange:function(){var w=this.widget;if(!isNaN(parseInt(this.width,10))&&w&&w.hasRendered){w.set("width",_getWidgetWidth(w,this.width));}},onheightChange:function(){var w=this.widget;if(!isNaN(parseInt(this.height,10))&&w&&w.hasRendered){w.set("height",_getWidgetHeight(w,this.height));}},renderWidget:function renderWidget(){var w=this.widget;if(!w){return ;}if(!w.hasRendered){w.placeholder=this.domNode.firstChild;w.render();}else{mstrmojo.dom.replace(this.domNode.firstChild,w.domNode);}this.widget=w;w.set("width",w.getPaddingWidth?(parseInt(this.width,10)-w.getPaddingWidth()+"px"):this.width);w.set("height",w.getPaddingHeight?(parseInt(this.height,10)-w.getPaddingHeight()+"px"):this.height);},destroy:function(skipCleanup){var w=this.widget;if(w&&w.hasRendered){w.destroy(skipCleanup);}this._super(skipCleanup);},postBuildRendering:function postBuildRendering(){if(this._super){this._super();}this.renderWidget();}});})();