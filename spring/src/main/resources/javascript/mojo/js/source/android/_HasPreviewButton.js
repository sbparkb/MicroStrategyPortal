(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.css");var touchClass="tx-touch",HOLD_TIME=100,previewMarkup='<div class="mstrmojo-dicPreview dicx{@t} {@x}" ontouchstart="mstrmojo.all[\'{@id}\'].previewTouchStart()";><div><div>{@v}</div></div></div>';mstrmojo.android._HasPreviewButton=mstrmojo.provide("mstrmojo.android._HasPreviewButton",{_mixinName:"mstrmojo.android._HasPreviewButton",renderPreview:function renderPreview(){var openerNode=this.openerNode,group=this.group||this,showFullPreview=(group.openerType===2)||!!this.dic.dm||this.dicChanged;this.renderPreviewButton(openerNode,showFullPreview?this.dv:openerNode.innerHTML);},renderPreviewButton:function renderPreviewButton(target,value){var dic=this.dic,dicType=dic.t,group=this.group||this,showPreview=false,showArrow=true,$TYPES=mstrmojo.DICConfig.TYPES,cls=[];switch(dicType){case $TYPES.SLIDER:case $TYPES.TEXTAREA:showArrow=!dic.dm;break;case $TYPES.SWITCH:case $TYPES.TOGGLE:case $TYPES.RATING:case $TYPES.STEPPER:case $TYPES.LIKERTSCALE:showArrow=false;break;}if(group.openerType===2){showPreview=showArrow;}if(showArrow){var targetStyle=target.style;targetStyle.border="";targetStyle.padding="";cls.push("arw");if(showPreview){cls.push("prv");}}var id=this.id;target.innerHTML=mstrmojo.string.apply(previewMarkup,{t:dicType,v:value||"&nbsp;",id:id,x:cls.join(" ")});this._previewNode=target.firstChild;if(this.inlineExtraCssText){this._previewNode.style.cssText+=" "+this.inlineExtraCssText;}},setDirtyFlag:function setDirtyFlag(c,d){var previewNode=this._previewNode,childNode=previewNode&&previewNode.firstChild;mstrmojo.css.addClass(childNode||d,"tx-active");},previewTouchStart:function previewTouchStart(){var me=this;mstrmojo.css.addClass(me._previewNode,touchClass);if(this._holdTimer){clearTimeout(this._holdTimer);}this._holdTimer=setTimeout(function(){delete me._holdTimer;mstrmojo.css.removeClass(me._previewNode,touchClass);},HOLD_TIME);}});}());