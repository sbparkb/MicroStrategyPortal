(function(){mstrmojo.requiresCls("mstrmojo._FillsBrowser","mstrmojo._HasLayout","mstrmojo.DI.DIFooter","mstrmojo.DI.DIFileUpload","mstrmojo.DI.DIURLUpload","mstrmojo.DI.DISampleFiles","mstrmojo.DI.DIPreview","mstrmojo.DI.DIExitOptions","mstrmojo.DI.DISourceList","mstrmojo.DI.DICubesList","mstrmojo.DI.DISourceIntro","mstrmojo.DI.DIDatabaseIntro","mstrmojo.DI.ProgressPolyfill","mstrmojo.DI.DISourceObjects","mstrmojo.DI.DISourceObjectsGA","mstrmojo.DI.DIDataset","mstrmojo.DI.DIMappingPage","mstrmojo.DI.TableSources","mstrmojo.DI.DIClipboard","mstrmojo.DI.DIPublicData","mstrmojo.qb.QBContainer","mstrmojo.DI.DIHadoop","mstrmojo.DI.DITwitterPage","mstrmojo.DI.DIFacebookPage","mstrmojo.DI.DISourceObjectsDnD","mstrmojo.ui.SearchablePulldown","mstrmojo.DI.DIRemoteProjects","mstrmojo.DI.DIHelpers","mstrmojo.css","mstrmojo.DI.DISourceListAdmin","mstrmojo.DI.DISearchTableBox");mstrmojo.requiresDescs(118,172,531,773,1059,1143,1302,3389,7972,10236,10766,11677,12446,12479,12480,12484,12490,12715,12716,12721,12722,12723,12752,12805,12806,13152,13308,13466,13467,13468,13469,13612,13781,13852,13978,14512);var $WIDGET=mstrmojo.Widget,$DOM=mstrmojo.dom,$HELPER=mstrmojo.DI.DIHelpers,constants=mstrmojo.DI.DIConstants,pageType=constants.pageType,operationMode=constants.operationMode,$ARR=mstrmojo.array,$CSS=mstrmojo.css;var allProjectPage={scriptClass:"mstrmojo.DI.DIRemoteProjects",alias:"allProjectPage",pageType:pageType.allProjectSource,slot:"layoutNode"};var hadoopPage={scriptClass:"mstrmojo.DI.DIHadoop",alias:"hadoopPage",pageType:pageType.hadoop,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var mstrFileUpload={scriptClass:"mstrmojo.DI.DIMstrUpload",alias:"mstrFileUpload",slot:"layoutNode"};var fileUploadPage={scriptClass:"mstrmojo.DI.DIFileUpload",pageType:pageType.file,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var urlUploadPage={scriptClass:"mstrmojo.DI.DIURLUpload",pageType:pageType.file,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var clipboardPage={scriptClass:"mstrmojo.DI.DIClipboard",alias:"clipboardPage",cssClassLabel:"mstrmojo-clipboard-label",pageType:pageType.clipboard,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var publicDataPage={scriptClass:"mstrmojo.DI.DIPublicData",pageType:pageType.publicData,slot:"layoutNode",size:{h:"557px",w:"1010px"}};var databasePage={scriptClass:"mstrmojo.DI.DIDatabaseIntro",pageType:pageType.database,slot:"layoutNode",size:{w:"1328px",h:"636px"}};var singleTableQB={scriptClass:"mstrmojo.qb.QBContainer",pageType:pageType.database,slot:"layoutNode",size:{w:"1328px",h:"636px"}};var datasetPage={scriptClass:"mstrmojo.DI.DIDataset",pageType:pageType.dataset,slot:"layoutNode"};var sampleFilesPage={scriptClass:"mstrmojo.DI.DISampleFiles",pageType:pageType.sampleFiles,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var sourceList={scriptClass:"mstrmojo.DI.DISourceList",pageType:pageType.dataSelection,slot:"layoutNode",size:{h:"557px",w:"1010px"}};var sourceObjectsPage={scriptClass:"mstrmojo.DI.DISourceObjects",pageType:pageType.sourceObjects,slot:"layoutNode"};var sourceObjectsDnDPage={scriptClass:"mstrmojo.DI.DISourceObjectsDnD",pageType:pageType.sourceObjectsDnD,slot:"layoutNode",size:{h:"556px",w:"1010px"}};var sourceObjectsGAPage={scriptClass:"mstrmojo.DI.DISourceObjectsGA",alias:"sourceObjectsPage",pageType:pageType.sourceObjects,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var emptyPage={scriptClass:"mstrmojo.Box",alias:"emptyPage",slot:"layoutNode",size:{h:"557px",w:"1010px"}};var previewPage={scriptClass:"mstrmojo.DI.DIPreview",pageType:pageType.preview,slot:"layoutNode"};var mappingPage={scriptClass:"mstrmojo.DI.DIMappingPage",pageType:pageType.emmaPreview,slot:"layoutNode",size:{w:"95%",h:"95%"}};var footer={scriptClass:"mstrmojo.DI.DIFooter",slot:"footerNode",alias:"footer"};var redirect={scriptClass:"mstrmojo.DI.DIExitOptions",pageType:pageType.redirect,slot:"layoutNode",size:{h:"380px",w:"500px"}};var twitterPage={scriptClass:"mstrmojo.DI.DITwitterPage",pageType:pageType.twitter,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var facebookPage={scriptClass:"mstrmojo.DI.DIFacebookPage",pageType:pageType.facebook,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var sourceAdminPage={scriptClass:"mstrmojo.DI.DISourceListAdmin",pageType:pageType.sourceAdmin,slot:"layoutNode",size:{h:"557px",w:"1010px"}};var header={scriptClass:"mstrmojo.Box",slot:"headerNode",alias:"header",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-di-title",alias:"title",text:mstrmojo.desc(12721,"Connect to Your Data")},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-di-title mstrmojo-di-subtitle",alias:"subtitle",ontextChange:function ontextChange(evt){if(evt.value!==""){this.text="("+evt.value+")";}else{this.text="";}}},{scriptClass:"mstrmojo.Button",cssClass:"di-title-btn",iconClass:"mstrmojo-di-close",alias:"closeBtn",title:mstrmojo.desc(2102,"Close"),tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var pos=$DOM.position(this.domNode);this.set("richTooltip",{cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(pos.y+40,0),left:Math.max(pos.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title});},onclick:function(){this._ontooltipout();mstrApp.getRootController().onCancelButtonClick();},premousedown:function(){$CSS.toggleClass(this.domNode,"hit",true);},premouseup:function(){$CSS.toggleClass(this.domNode,"hit",false);}},{scriptClass:"mstrmojo.Button",cssClass:"di-title-btn",iconClass:"mstrmojo-di-help",title:mstrmojo.desc(1143,"Help"),tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var pos=$DOM.position(this.domNode);this.set("richTooltip",{cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(pos.y+40,0),left:Math.max(pos.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title});},onclick:function(){mstrApp.getRootController().onHelpButtonClick();},premousedown:function(){$CSS.toggleClass(this.domNode,"hit",true);},premouseup:function(){$CSS.toggleClass(this.domNode,"hit",false);}},{alias:"customizeButton",scriptClass:"mstrmojo.Button",cssClass:"di-title-btn",iconClass:"mstrmojo-di-customize",title:mstrmojo.desc(14512,"Customize your page"),tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var pos=$DOM.position(this.domNode);this.set("richTooltip",{cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(pos.y+40,0),left:Math.max(pos.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title});},onclick:function(){mstrApp.getRootController().showPage(constants.pageType.sourceAdmin);},premousedown:function(){$CSS.toggleClass(this.domNode,"hit",true);},premouseup:function(){$CSS.toggleClass(this.domNode,"hit",false);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12668,"All Objects View")+"...",visible:false,cssClass:"all-objects-view-link",alias:"allObjectsLink",onclick:function showAllObjects(){mstrApp.getRootController().allObjectsController.showAllObjects();}},{scriptClass:"mstrmojo.DI.DISearchTableBox",alias:"searchTable",visible:false}]};var sourceObjectsPages={};var sourceIntroPages={};function createPage(newPage,model,title,slot){var page=null;var cfg=newPage;if(slot){page=slot.get();}if(!page){if(model){newPage.model=model;}if(slot&&slot.getConfig()){cfg=slot.getConfig().properties||{};cfg=mstrmojo.hash.copy(newPage,cfg);}page=this.addChildren(mstrmojo.insert(cfg));page.render();if(page.alias==="sourceIntroPage"){sourceIntroPages[newPage.sourceInfo.id]=page;}if(newPage.sourceObjectsInfo){sourceObjectsPages[newPage.sourceObjectsInfo.name]=page;}if(slot){slot.set(page);}}this.currentPage=page;if(slot.getConfig()&&page.updatePageConfig){page.updatePageConfig(slot.getConfig());}if(this.header){this.header.title.set("text",title);}if(slot){window.setTimeout(function(){slot.destroy();},0);}}function resizeCurtainNode(){var curtainNode=this.curtainNode;if(!curtainNode){return ;}var body=document.body,docElement=document.documentElement,cs=curtainNode.style;cs.width=Math.max(body.clientWidth,docElement.scrollWidth)+"px";cs.height=Math.max(body.clientHeight,docElement.scrollHeight)+"px";}function centralizeNode(){if(this.domNode){var dn=this.domNode,dnStyle=dn&&dn.style;if(dnStyle){dnStyle.height=this.height;dnStyle.width=this.width;}mstrmojo.dom.center(this.domNode);$HELPER.reevaluatePopupPosition(this.domNode);if(this.parent&&this.parent.setPosition){this.parent.setPosition(dnStyle.left,dnStyle.top);}}}function getTitleForSourceObjects(sourceType){var title;switch(sourceType){case constants.sourceType.salesforce:title=mstrmojo.desc(13466,"Salesforce: Import your CRM reports from your account");break;case constants.sourceType.dropbox:title=mstrmojo.desc(13467,"Dropbox: Import files from your account");break;case constants.sourceType.googleAnalytics:title=mstrmojo.desc(13468,"Google Analytics: Import Web Analytics data from your account");break;case constants.sourceType.googleDrive:title=mstrmojo.desc(13469,"Google Drive: Import files and Google Spreadsheets from your account");break;default:title=mstrmojo.desc(10766,"Select Data");break;}return title;}function getSize(size){var browserSize=this.getBrowserDimensions(),retSize={};var browserWidth=parseInt(browserSize.w,10);if(size.h.match(/%$/)){retSize.h=parseInt(browserSize.h,10)*parseInt(size.h,10)/100+"px";}else{retSize.h=size.h;}if(browserWidth>=800&&browserWidth<=1063){retSize.w=(browserWidth*0.95)+"px";return retSize;}if(browserWidth<800){retSize.w="760px";return retSize;}if(size.w.match(/%$/)){retSize.w=browserWidth*parseInt(size.w,10)/100+"px";}else{retSize.w=size.w;}return retSize;}function getIsHadoopQB(tableID){var source=mstrApp.getRootController().getModel().getImportSource(tableID),isHadoop=false;if(!source){return isHadoop;}switch(source.databaseType){case 3100:case 4100:case 7300:case 6800:case 6400:isHadoop=true;break;case 700:isHadoop=$ARR.indexOf(constants.ibmDb2Versions,source.databaseVersion)===-1;break;default:break;}return isHadoop;}mstrmojo.DI.DIRootView=mstrmojo.declare(mstrmojo.Container,[mstrmojo._FillsBrowser,mstrmojo._HasLayout],{scriptClass:"mstrmojo.DI.DIRootView",markupString:'<div id="{@id}" class="mstrmojo-di-view {@cssClass}" mstrAttach:contextmenu><div class="mstrmojo-di-header"></div><div class="mstrmojo-di-layout"></div><div class="mstrmojo-di-footer"></div><div class="mstrmojo-di-curtain"></div></div>',markupSlots:{headerNode:function(){return this.domNode.firstChild;},layoutNode:function(){return this.domNode.children[1];},footerNode:function(){return this.domNode.children[2];},curtainNode:function(){return this.domNode.children[3];}},offsetHeight:48,offsetWidth:1,headerHeight:41,footerHeight:61,layoutBorder:2,showHeader:true,visible:false,saveVisualTime:4000,saveVisualTimeoutID:null,saveVisualTimeoutFn:null,markupMethods:{onvisibleChange:$WIDGET.visibleMarkupMethod,onheightChange:$WIDGET.heightMarkupMethod,onwidthChange:$WIDGET.widthMarkupMethod},showPage:function showPage(page,sourceInfo,slot,footerCfg){var controller=mstrApp.getRootController(),model=controller.getModel();if(sourceInfo){if(mstrApp.isSingleTier&&sourceInfo.checkConectivity&&window.FormWrapper.testInternetConnection()!==0){var errorMessage=mstrmojo.desc(13961,"No Internet connection. You can configure an Internet proxy through your computer's #."),replaceStr='<a href="" onclick="mstrApp.getRootController().dialogController.close(mstrmojo.DI.DIConstants.dialogType.errorDialog);window.setTimeout(function(){window.FormWrapper.showProxyEditor();},100);return false;">'+mstrmojo.desc(14125,"settings")+"</a>";errorMessage=errorMessage.replace("#",replaceStr)+".";controller.displayError(errorMessage,false,"",null,mstrmojo.desc(11812,"Notification"));return ;}}this.set("visible",true);this.clearModalNodes();if(this.currentPage){this.currentPage.set("visible",false);}var footerConfig={};var CONTINUE_TEXT=mstrmojo.desc(13852,"Prepare Data"),FINISH_TEXT=model.operationMode===constants.operationMode.edit?mstrmojo.desc(13850,"Update Dataset"):mstrmojo.desc(1302,"Finish");var continueText=CONTINUE_TEXT,slotCfg=slot&&slot.getConfig(),tableID,qbParams,dialogController=controller.dialogController,isPreview=false,title,hasContainer=mstrApp.container,isEMMACube=mstrApp.isEMMACube,sourceType,XDA_TYPE=constants.xdaType;if(!footerCfg&&slotCfg){footerCfg=slotCfg.footerConfig;}mstrApp.QTtabIndex=[mstrApp.diParams.isMDD?"EDD":"TD",(model.operationMode===operationMode.refresh)?"refresh":"select",0];switch(page){case pageType.dataSelection:createPage.call(this,sourceList,model,mstrmojo.desc(12721,"Connect to Your Data"),slot);footerConfig={next:{visible:false,enabled:false,text:continueText},back:{visible:false},cancel:{visible:false},finish:{visible:false},cubeQuota:{visible:true},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false},sourceAdmin:{visible:true},};if(!mstrApp.isSingleTier&&mstrApp.launchingApp&&mstrApp.launchingApp.pageName==="Html5Vi"){if(!model.hasEMMAReportInstance()){footerConfig.managedCheckbox={visible:false,enabled:true};}}if(model.analysisID){footerConfig.cubeQuota={visible:false};}if(!mstrApp.isSingleTier&&model.operationMode===constants.operationMode.edit&&!model.cubesInfo){controller.getCubeQuota();}break;case pageType.mstrFile:createPage.call(this,mstrFileUpload,model,mstrmojo.desc(12479,"Mstr File upload"),slot);footerConfig={next:{visible:false,text:continueText},back:{visible:false},cancel:{visible:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.allProjectSource:createPage.call(this,allProjectPage,model,mstrmojo.desc(12480,"Connect to MicroStrategy Projects"),slot);footerConfig={next:{visible:false,text:continueText},back:{visible:true},finish:{visible:true,enabled:false},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.hadoop:createPage.call(this,hadoopPage,model,mstrmojo.desc(12805,"Connect to Hadoop"),slot);footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true,enabled:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.dataset:createPage.call(this,datasetPage,model,mstrmojo.desc(11677,"Select a dataset"),slot);footerConfig={next:{visible:true,text:continueText},back:{visible:false},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.file:if(sourceInfo!==null){if(sourceInfo===1){if(model.operationMode!==constants.operationMode.create&&mstrApp.diParams.EnableURLImport===false){sourceInfo=0;}}}if(slot.getConfig()&&slot.getConfig().sourceInfo!==undefined){sourceInfo=slot.getConfig().sourceInfo;}if(sourceInfo===0){fileUploadPage.sourceSubtype=constants.sourceSubtype.localFile;createPage.call(this,fileUploadPage,model,mstrmojo.desc(12715,"Upload your files"),slot);}else{urlUploadPage.sourceSubtype=constants.sourceSubtype.url;createPage.call(this,urlUploadPage,model,mstrmojo.desc(12715,"Upload your files"),slot);}footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.database:if(sourceInfo!==null){databasePage.sourceInfo=sourceInfo;}if(isEMMACube){continueText=CONTINUE_TEXT;title=(sourceInfo&&sourceInfo.type===constants.xdaType.mdx)?mstrmojo.desc(13152,"Import From Cubes"):mstrmojo.desc(12716,"Import From Tables");createPage.call(this,singleTableQB,model,title,slot);qbParams=controller.getQueryBuilderParams(sourceInfo.type,sourceInfo.extParams||null);slotCfg=slot&&slot.getConfig();tableID=slotCfg&&slotCfg.properties&&slotCfg.properties.tableID;if(tableID){qbParams.tableID=tableID;qbParams.isHadoopQB=getIsHadoopQB(tableID);}var me=this,isSapHanaSingleTable=false,hasNonSapHana=false;mstrmojo.hash.forEach(controller.model.importSources,function(source){if(source.subtype===constants.sourceSubtype.hanaSingleTable){isSapHanaSingleTable=true;}else{hasNonSapHana=true;}});qbParams.isSapHanaSingleTable=isSapHanaSingleTable;qbParams.hasNonSapHana=hasNonSapHana;if(isSapHanaSingleTable){mstrApp.supportDBObjects=controller.model.supportDBObjects;}qbParams.diShowFooterFunction=function(footerConfig){me.showFooter(footerConfig);};this.currentPage.size=qbParams.size;mstrmojo.hash.copy(qbParams,this.currentPage.QBParams);if(controller.dataService.messageID){if(this.currentPage.QBParams.size){this.currentPage.QBParams.size=getSize.call(me,this.currentPage.QBParams.size);}this.currentPage.loadQB();}else{controller.createNewReportInstance({success:function(){var params=me.currentPage.QBParams;params.size=getSize.call(me,params.size);params.messageID=controller.dataService.messageID;controller.getQBParamsDDA(params);params.operationMode=model.operationMode;me.currentPage.loadQB();}});}}else{createPage.call(this,databasePage,model,mstrmojo.desc(10766,"Select Data"),slot);}footerConfig=footerCfg||{next:{visible:true,enabled:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};if(isEMMACube){footerConfig.next.enabled=false;footerConfig.finish.enabled=false;tableID=qbParams&&qbParams.tableID;if(tableID){sourceType=sourceInfo.type;if(sourceType!==XDA_TYPE.querybuilder&&sourceType!==XDA_TYPE.ffsql&&sourceType!==XDA_TYPE.googleBigQuery&&sourceType!==XDA_TYPE.googleBigQueryFFSQL){footerConfig.cancel.visible=false;}footerConfig.back.visible=false;}}if(sourceInfo.type===constants.xdaType.mdx){footerConfig.next.visible=false;}else{if(sourceInfo.sourceType===constants.sourceType.bisource){footerConfig.cancel.visible=true;if(this.header){this.header.title.set("text",mstrmojo.desc(12752,"BI Sources"));this.header.subtitle.set("text",mstrmojo.desc(12806,"Import from SAP Business Object, Cognos, and OBIEE"));}}}break;case pageType.sampleFiles:createPage.call(this,sampleFilesPage,model,mstrmojo.desc(12446,"File Samples"),slot);footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true,enabled:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.emmaPreview:var SAVE_TEXT=mstrmojo.desc(13612,"Save Progress");if(mstrApp.isSingleTier){footerConfig={next:{visible:true,text:FINISH_TEXT},back:{visible:false},cancel:{visible:true},finish:{visible:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};}else{footerConfig={next:{visible:true,text:FINISH_TEXT},back:{visible:false},cancel:{visible:true},finish:{visible:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:true,text:SAVE_TEXT},managedCheckbox:{visible:false}};}if(model.isManagedCube){footerConfig.save={visible:false};}createPage.call(this,mappingPage,model,mstrmojo.desc(3389,"Preview"),slot);this.header.subtitle.set("text","");mstrApp.QTtabIndex=[mstrApp.diParams.isMDD?"EDD":"TD","review",0];isPreview=true;break;case pageType.preview:createPage.call(this,previewPage,model,mstrmojo.desc(3389,"Preview"),slot);footerConfig={next:{visible:true},back:{visible:true},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};mstrApp.QTtabIndex=[mstrApp.diParams.isMDD?"EDD":"TD","review",0];break;case pageType.redirect:createPage.call(this,redirect,model,mstrmojo.desc(13308,"Start your analysis"),slot);footerConfig={next:{visible:false},back:{visible:false},cancel:{visible:false},previewNote:{visible:false},finish:{visible:false},dda:{visible:false},cubeQuota:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.sourceIntro:mstrApp.getRootController().getOAuthSourceReports(sourceInfo.type,false,slot);break;case pageType.sourceObjects:title=getTitleForSourceObjects(sourceInfo.type);if(constants.sourceType.googleAnalytics===sourceInfo.type){sourceObjectsGAPage.sourceObjectsInfo=sourceInfo;createPage.call(this,sourceObjectsGAPage,model,title,slot);}else{sourceObjectsPage.sourceObjectsInfo=sourceInfo;createPage.call(this,sourceObjectsPage,model,title,slot);}footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.sourceObjectsDnD:title=getTitleForSourceObjects(sourceInfo.type);if(constants.sourceType.googleAnalytics===sourceInfo.type){sourceObjectsGAPage.sourceObjectsInfo=sourceInfo;createPage.call(this,sourceObjectsGAPage,model,title,slot);}else{sourceObjectsDnDPage.sourceObjectsInfo=sourceInfo;createPage.call(this,sourceObjectsDnDPage,model,title,slot);}footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true,enabled:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.suggestNewSource:var add="productfeedback@microstrategy.com",product=mstrApp.isSingleTier?"Analytics%20Desktop":"Analytics%20Enterprise",topic="New%20Data%20Source%20Suggestion";mstrApp.getRootController().openMailClient("mailto:"+add+"?subject="+product+":%20"+topic);break;case pageType.clipboard:clipboardPage.url=sourceInfo;createPage.call(this,clipboardPage,model,mstrmojo.desc(12490,"Create custom data"),slot);if(model.operationMode===constants.operationMode.refresh){footerConfig=footerCfg||{next:{visible:true,text:mstrmojo.desc(773,"Refresh")},back:{visible:false},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};}else{footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true,enabled:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};}break;case pageType.twitter:twitterPage.sourceObjectsInfo=sourceInfo;createPage.call(this,twitterPage,model,mstrmojo.desc(12722,"Import data from Twitter"),slot);footerConfig=footerCfg||{next:{visible:true,enabled:false,text:continueText},cancel:{visible:true},finish:{visible:true,enabled:false},back:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.facebook:facebookPage.sourceObjectsInfo=sourceInfo;createPage.call(this,facebookPage,model,mstrmojo.desc(12723,"Import data from Facebook"),slot);footerConfig=footerCfg||{next:{visible:true,enabled:false,text:continueText},cancel:{visible:true},finish:{visible:true,enabled:false},back:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.publicData:publicDataPage.url=sourceInfo;createPage.call(this,publicDataPage,model,mstrmojo.desc(13978,"Public Data"),slot);if(model.operationMode===constants.operationMode.refresh){footerConfig={next:{visible:true,text:mstrmojo.desc(773,"Refresh")},back:{visible:false},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};}else{footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true,enabled:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};}break;case pageType.sourceAdmin:createPage.call(this,sourceAdminPage,model,mstrmojo.desc(12721,"Connect to Your Data"),slot);footerConfig=footerCfg||{next:{visible:false},back:{visible:false},cancel:{visible:true},finish:{visible:true,enabled:true,text:mstrmojo.desc(118,"Save")},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;}if(page===pageType.dataSelection||page===pageType.redirect){this.showFooterDividerLine(false);}else{this.showFooterDividerLine(true);}if(controller.model.isAddingNewTable&&page!==pageType.sourceAdmin){if(footerConfig.next){footerConfig.next.text=mstrmojo.desc(531,"Add");}if(footerConfig.finish){footerConfig.finish.visible=false;}}if(!footerConfig.mdxRACheckbox){footerConfig.mdxRACheckbox={visible:false};}this.showFooter(footerConfig);var pageHeader=this.header;if(pageHeader){pageHeader.allObjectsLink.set("visible",isPreview);pageHeader.searchTable.set("visible",isPreview);pageHeader.customizeButton.set("visible",footerConfig.sourceAdmin?footerConfig.sourceAdmin.visible:false);}this.currentPage.set("visible",true);if(this.currentPage.size&&hasContainer){this.windowResize(this.currentPage.size);}if(dialogController&&dialogController.pageZIndex>0){dialogController.centerPageDialog();}return this.currentPage;},showFooter:function showFooter(footerConfig){this.footer.showControls(footerConfig);},showFooterDividerLine:function showFooterDividerLine(isshow){if(isshow){this.layoutNode.className="mstrmojo-di-layout";this.footerNode.className="mstrmojo-di-footer";}else{this.layoutNode.className="mstrmojo-di-layout-noborder";this.footerNode.className="mstrmojo-di-footer-noborder";}},setModalNodes:function(modalNodes,modalZIndex){var curtainNode=this.curtainNode;if(!curtainNode){return ;}this.clearModalNodes();var zIndex=modalZIndex||9999;var i;if(!modalNodes||!modalNodes.length){return ;}this.modalNodes=modalNodes;for(i=0;i<modalNodes.length;i++){this.modalNodesZIndexes.push(modalNodes[i].style.zIndex);}for(i=0;i<modalNodes.length;i++){modalNodes[i].style.zIndex=zIndex;if(modalNodes[i].style.position===""){modalNodes[i].style.position="relative";}}this.curtainNode.style.display=this.visible?"block":"none";this.curtainNode.style.zIndex=zIndex-1;resizeCurtainNode.call(this);modalNodes[0].focus();},clearModalNodes:function(){var curtainNode=this.curtainNode;if(!curtainNode){return ;}var i,origZIndexes,nodes,node;nodes=this.modalNodes;origZIndexes=this.modalNodesZIndexes;for(i=0;nodes&&i<nodes.length;i++){node=nodes[i];if(node&&node.style){node.style.zIndex=origZIndexes[i];}}this.modalNodes=[];this.modalNodesZIndexes=[];this.curtainNode.style.height="0px";this.curtainNode.style.weight="0px";this.curtainNode.style.display="none";},windowResize:function windowResize(size){var height,width,retSize,model;if(!size||!size.h||!size.w){return ;}retSize=getSize.call(this,size);mstrApp.size=retSize;height=retSize.h;width=retSize.w;if(!this.layoutConfig){this.layoutConfig={h:{},w:{}};}this.layoutConfig.w.layoutNode=width;this.layoutConfig.h.layoutNode=parseInt(height,10)-(this.headerHeight+this.footerHeight+this.layoutBorder)+"px";this.setDimensions(height,width);resizeCurtainNode.call(this);centralizeNode.call(this);model=mstrApp.getRootController().model;if(model){model.raiseEvent({name:"windowSizeChanged",size:retSize});}},browserResized:function browserResized(size){var height,width,event;if(this.domNode){if(document.createEvent){event=document.createEvent("MouseEvents");event.initMouseEvent("mousedown",true,true,window,0,0,0,0,0,false,false,false,false,0,null);this.domNode.dispatchEvent(event);}else{if(document.createEventObject){event=document.createEventObject();this.domNode.fireEvent("onmousedown",event);}}}if(mstrApp.container||mstrApp.placeholder==="mainApp"){height=this.height;width=this.width;this.setDimensions(height,width);if(this.currentPage){this.windowResize(this.currentPage.size);}resizeCurtainNode.call(this);centralizeNode.call(this);}else{height=(parseInt(size.h,10)-this.offsetHeight);width=(parseInt(size.w,10)-this.offsetWidth);if(!this.layoutConfig){this.layoutConfig={h:{},w:{}};}this.layoutConfig.w.layoutNode=width+"px";this.layoutConfig.h.layoutNode=height-(this.headerHeight+this.footerHeight)+"px";this.setDimensions(height+"px",width+"px");}return true;},preBuildRendering:function preBuildRendering(){if(this._super){this._super();}mstrmojo.DI.ProgressPolyfill.createProgressPolyfill();var children=[];if(!this.footer){footer.model=mstrApp.getRootController().getModel();children.push(footer);}if(!this.header&&this.showHeader){children.push(header);}this.addChildren(children);this.footer.showControls({next:{visible:false},back:{visible:false},cancel:{visible:false}});if(!this.emptyPage){this.currentPage=this.addChildren(emptyPage);if(this.currentPage.size&&mstrApp.container){this.windowResize(this.currentPage.size);}}},oncontextmenu:function oncontextmenu(evt){var target=$DOM.eventTarget(evt.hWin,evt.e),tagName;if(target&&target.tagName){tagName=target.tagName.toLowerCase();}if(tagName!=="input"&&tagName!=="textarea"&&target.contentEditable!=="true"){$DOM.preventDefault(window,evt.e);return false;}},setHomepageViewMode:function setHomepageViewMode(value){sourceList.mode=value;},focusFooter:function focusFooter(){if(this.footer&&this.footer.containerNode){this.footer.containerNode.focus();}},showSaveVisual:function(){var me=this,oldTitle=me.header&&me.header.subtitle.text,title=mstrmojo.desc(13781,"Saved Successfully");if(me.saveVisualTimeoutID){window.clearTimeout(me.saveVisualTimeoutID);}else{me.header.subtitle.set("text",title);$CSS.toggleClass(me.header.subtitle.domNode,"saveVisual",true);me.saveVisualTimeoutFn=function(){me.header.subtitle.set("text",oldTitle||"");$CSS.toggleClass(me.header.subtitle.domNode,"saveVisual",false);me.saveVisualTimeoutID=null;};}me.saveVisualTimeoutID=window.setTimeout(me.saveVisualTimeoutFn,me.saveVisualTime);},destroy:function(ignore){if(this.saveVisualTimeoutID){window.clearTimeout(this.saveVisualTimeoutID);}this._super(ignore);}});}());