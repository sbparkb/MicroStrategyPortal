(function(){mstrmojo.requiresCls("mstrmojo.architect.menu.ArchitectMenu","mstrmojo.architect.menu.EnumMenuActions","mstrmojo._HasContextMenu");var $A=mstrmojo.array,$ENUM_MENU_ACTIONS=mstrmojo.architect.menu.EnumMenuActions,ENUM_ACTION_NONE=$ENUM_MENU_ACTIONS.NONE,STR_REMOVE_RELATION=mstrmojo.desc(11419,"Remove relation"),STR_ONE_TO_ONE=mstrmojo.desc(11420,"One to One"),STR_ONE_TO_MANY=mstrmojo.desc(11421,"One to Many"),STR_MANY_TO_MANY=mstrmojo.desc(11422,"Many to Many"),STR_REL_TABLE=mstrmojo.desc(11423,"Relationship Table"),STR_ADD_JOIN_CHILDREN=mstrmojo.desc(12219,"Add joint children");mstrmojo.architect.menu.RelationMenu=mstrmojo.declare(mstrmojo.architect.menu.ArchitectMenu,null,{scriptClass:"mstrmojo.architect.menu.RelationMenu",cm:[{action:$ENUM_MENU_ACTIONS.DELETE_RELATIONSHIP,n:STR_REMOVE_RELATION,icn:"del"},{action:ENUM_ACTION_NONE},{action:$ENUM_MENU_ACTIONS.ONE_TO_ONE,n:STR_ONE_TO_ONE},{action:$ENUM_MENU_ACTIONS.ONE_TO_MANY,n:STR_ONE_TO_MANY},{action:$ENUM_MENU_ACTIONS.MANY_TO_MANY,n:STR_MANY_TO_MANY},{action:ENUM_ACTION_NONE},{action:$ENUM_MENU_ACTIONS.RELATIONSHIP_TABLE,n:STR_REL_TABLE,items:[],buildSubMenuConfig:function buildSubMenuConfig(){var data=this.data,tables=mstrApp.getRootController().getTablesForRelationship(data.parentAttributeId,data.childAttributeId),items=[];$A.forEach(tables,function(table){items.push({did:table.did,n:table.n,action:$ENUM_MENU_ACTIONS.RELATIONSHIP_TABLE_ENTRY,checked:(data.relationTableId===table.did)});});return this.getMenuConfig(items);}},{action:$ENUM_MENU_ACTIONS.ADD_JOIN_CHILDREN,n:STR_ADD_JOIN_CHILDREN,items:[],buildSubMenuConfig:function buildSubMenuConfig(){var this$=this,data=this.data,attributes=mstrApp.getRootController().getJointChildrenCandidates(data),items=[];$A.forEach(attributes,function(attribute){items.push({did:attribute.did,n:attribute.n,action:$ENUM_MENU_ACTIONS.ADD_JOIN_CHILDREN,isChecked:false});});return this$.getMenuConfig(items);}}]});}());