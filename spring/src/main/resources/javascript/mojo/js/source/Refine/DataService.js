(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.Box","mstrmojo.Editor","mstrmojo.Widget","mstrmojo.hash");var $H=mstrmojo.hash;mstrmojo.requiresDescs(12705);function getGetData(params){var getData="";var key;for(key in params){if(params.hasOwnProperty(key)){getData+="&"+key+"="+encodeURIComponent(params[key]);}}return getData;}function getPostData(params){var postData="";var key;for(key in params){if(params.hasOwnProperty(key)){postData+="&"+key+"="+encodeURIComponent(params[key]);}}return postData;}function submitRequest(isPost,command,callback,params,postParams,config){if(config.showProgress){mstrApp.showProgress(config);}var refineCommand=command+"?"+getGetData.call(this,params);var taskParams={taskId:"DataWranglerServer",command:refineCommand};if(isPost){taskParams.postData=getPostData.call(this,postParams);}window.setTimeout(function(){mstrApp.serverProxy.request(mstrmojo.func.wrapMethods({success:mstrmojo.emptyFn,complete:function(){if(config.showProgress){mstrApp.hideProgress();}},failure:mstrmojo.emptyFn},callback),taskParams,false,{});},0);}mstrmojo.Refine.DataService=mstrmojo.declare(mstrmojo.Obj,null,{projectID:null,refineServerURL:null,getPreviewData:function getPreviewData(callback,params,postParams){submitRequest.call(this,true,"command/core/get-rows",callback,params,postParams,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},getColumns:function getColumns(callback,params){submitRequest.call(this,false,"command/core/get-models",callback,params,null,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},getHistory:function getHistory(callback,params){submitRequest.call(this,false,"command/core/get-history",callback,params,null,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},getOperations:function getOperations(callback,params){submitRequest.call(this,false,"command/core/get-operations",callback,params,null,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},getProcesses:function getProcesses(callback,params,config){submitRequest.call(this,false,"command/core/get-processes",callback,params,null,{showProgress:true,progressValue:config.progress,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},applyOperations:function applyOperation(callback,params,postParams){submitRequest.call(this,true,"command/core/apply-operations",callback,params,postParams,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},computeFacets:function computeFacets(callback,params,postParams){submitRequest.call(this,true,"command/core/compute-facets",callback,params,postParams,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},computeFacetsQuiet:function computeFacetsQuiet(callback,params,postParams){submitRequest.call(this,true,"command/core/compute-facets",callback,params,postParams,{showProgress:false,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},computeClusters:function computeClusters(callback,params,postParams){submitRequest.call(this,true,"command/core/compute-clusters",callback,params,postParams,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},massEdit:function massEdit(callback,params,postParams){submitRequest.call(this,true,"command/core/mass-edit",callback,params,postParams,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},undoRedo:function undo(callback,params,postParams){submitRequest.call(this,true,"command/core/undo-redo",callback,params,postParams,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},addSampleData:function addSampleData(callback,params,postParams){submitRequest.call(this,true,"command/core/append-sample",callback,params,postParams,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},setSampleData:function setSampleData(callback,params,postParams){submitRequest.call(this,true,"command/core/set-sample",callback,params,postParams,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});},getSampleStatus:function setSampleData(callback,params,postParams){submitRequest.call(this,true,"command/core/get-sample",callback,params,postParams,{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12705,"Wrangling...")});}});}());