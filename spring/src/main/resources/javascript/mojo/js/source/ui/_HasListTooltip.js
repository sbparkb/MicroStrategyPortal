(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var $DOM=mstrmojo.dom,$STR=mstrmojo.string,$HASH=mstrmojo.hash,$ARR=mstrmojo.array,$TTP=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",tooltipOrientation:"horizontal",tooltipOffset:8,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function getTooltipText(item){return item&&(item.ttp||item.n);},showTooltip:function showTooltip(e,win){var $this=this;if(!$this.hasOpenTooltip&&!($this._lastOpened&&$this._lastOpened.visible)){var target=$DOM.eventTarget(win,e),item=$this.getItemFromTarget(target),node=$this.getItemNodeFromTarget(target),name=$this.getTooltipText(item),cfg=$this.tooltipCss;if(!name){return ;}var position=$DOM.position(node),tooltipLeft,tooltipTop,positionType,contentStyle="",tooltipOffset=$this.tooltipOffset;if(this.tooltipOrientation==="vertical"){tooltipLeft=position.x+position.w/2;positionType=$TTP.POS_TOPCENTER;tooltipTop=position.y+position.h+tooltipOffset;$this.tooltipCss=$HASH.copy({cssClass:"vi-regular vi-tooltip-A A-center"},cfg);}else{var winDimension=$DOM.windowDim(),widthBuffer=40,rightPosition=position.x+position.w+tooltipOffset,leftPosition=position.x-tooltipOffset,leftWidth=leftPosition-widthBuffer,rightWidth=winDimension.w-(rightPosition+widthBuffer),tooltipCssString="vi-regular vi-tooltip-",contentWidth;tooltipTop=position.y;if(rightWidth>=leftWidth){tooltipLeft=rightPosition;contentWidth=rightWidth;positionType=$TTP.POS_TOPLEFT;cfg.cssClass=tooltipCssString+"C  "+cfg.rightCssClass;}else{tooltipLeft=leftPosition;contentWidth=leftWidth;positionType=$TTP.POS_TOPRIGHT;cfg.cssClass=tooltipCssString+"D  "+cfg.leftCssClass;}contentStyle="max-width: "+contentWidth+"px;";}if($this.tooltipContrast){cfg.cssClass=cfg.cssClass+" contrast";}if(cfg&&cfg.getItemCssClass){cfg.cssClass=$ARR.filter([cfg.cssClass,cfg.getItemCssClass(item)],function(cls){return !!cls;}).join(" ");}$this.richTooltip=$HASH.copy($this.tooltipCss,{content:$STR.apply($this.tooltipMarkup,{c:name,style:contentStyle}),top:tooltipTop,left:tooltipLeft,posType:positionType});$this.richTooltip.keepArrowXPos=!!$this.keepArrowXPos;$this.richTooltip.keepArrowYPos=!!$this.keepArrowYPos;this._super(e,win);}},onclick:function onclick(evt){var $this=this;window.setTimeout(function(){if($this.hasOpenTooltip){$this.hideTooltip();}window.clearTimeout($this._tooltipTimeOut);},0);this._super(evt);}});}());