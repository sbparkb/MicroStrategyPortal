(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.JSONUtil","mstrmojo.chart.enums.EnumInstructionName");var $C=mstrmojo.chart,$CHART_ENUMS=mstrmojo.chart.enums,$JI=$CHART_ENUMS.EnumInstructionName,$JSONUtil=$C.JSONUtil.prototype;mstrmojo.chart.JSONUnit=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUnit",mIsAnimated:false,mIsLastFrame:true,mIsFirstPass:true,mIsFirstFrameSet:false,mIsLastFrameSet:false,mInstructionList:[],mCurrentIndex:-1,init:function init(props){this.mInstructionList=[];if(props){this.mIsAnimated=props.mIsAnimated||false;this.mIsLastFrame=props.mIsLastFrame||false;}},AppendToJSONObject:function AppendToJSONObject(JSONObject){JSONObject.IsAnimated=this.mIsAnimated?1:0;if(this.mInstructionList.length>0){$JSONUtil.AppendCompoundPointerVectorToJSONObject("InstructionList",this.mInstructionList,JSONObject);}},AddInstruction:function AddInstruction(instructionName,originalAddress){if(instructionName===undefined){instructionName=$JI.JSONInsUndefined;}if(originalAddress===undefined){originalAddress=null;}++this.mCurrentIndex;if(this.mIsFirstPass){this.mInstructionList.push(new $C.JSONInstruction({mInstructionName:instructionName,mpOriginalAddress:originalAddress}));}else{this.mInstructionList[this.mCurrentIndex].SetSecondPass();}this.mInstructionList[this.mCurrentIndex].SetLastFrame(this.mIsLastFrame);return this.mInstructionList[this.mCurrentIndex];},SetAnimated:function SetAnimated(iIsAnimated){this.mIsAnimated=iIsAnimated;},IsAnimated:function IsAnimated(){return this.mIsAnimated;},IsValid:function IsValid(){if(this.mInstructionList.length===0){return false;}if(this.mIsAnimated){return(this.mIsFirstFrameSet&&this.mIsLastFrameSet);}return true;},SetToFirstFrame:function SetToFirstFrame(){this.mIsFirstFrameSet=true;this.mIsLastFrame=false;this.mCurrentIndex=-1;if(this.mIsLastFrameSet){this.mIsFirstPass=false;}},SetToLastFrame:function SetToLastFrame(){this.mIsLastFrameSet=true;this.mIsLastFrame=true;this.mCurrentIndex=-1;if(this.mIsFirstFrameSet){this.mIsFirstPass=false;}},CalculateFormatIndex:function CalculateFormatIndex(iFormatList){var len,i;len=this.mInstructionList.length;for(i=0;i<len;++i){this.mInstructionList[i].CalculateFormatIndex(iFormatList);}}});}());