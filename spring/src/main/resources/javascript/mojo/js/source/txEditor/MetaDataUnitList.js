(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.dom","mstrmojo.hash","mstrmojo._IsList");var $D=mstrmojo.dom,$H=mstrmojo.hash;function _getInfoByNode(el){if(el){var itemNodeObj=$D.findAncestorByAttr(el,"idx",true,this.domNode),item=itemNodeObj&&this.items[parseInt(itemNodeObj.value,10)];if(item){return{item:item,node:itemNodeObj&&itemNodeObj.node};}}return null;}mstrmojo.txEditor.MetaDataUnitList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.txEditor.MetaDataUnitList",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:dblclick><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',cssClass:"mstrmojo-TransactionEditor-MetaDataUnitList",markupMethods:$H.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";}}},$H.copy(mstrmojo.ListBase.prototype.markupMethods)),draggable:true,isDragValid:function isDragValid(context){return this.draggable&&!isNaN(parseInt(context.src.node.getAttribute("idx"),10));},getDragData:function getDragData(context){var data={},sourceNode=context.src.node,info=_getInfoByNode.call(this,sourceNode),item=info&&info.item;context.src.node=info&&info.node?info.node:sourceNode;if(item){data.item=$H.clone(item);data.html=data.html||item.n;}return data;},ondblclick:function ondblclick(evt){this._super&&this._super(evt);var sourceNode=evt.target||$D.eventTarget(evt.hWin,evt.e),info=_getInfoByNode.call(this,sourceNode),item=info&&info.item;if(item){var data={item:$H.clone(item)};mstrmojo.all.offModel.sendData(data);}}});}());