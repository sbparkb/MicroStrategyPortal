(function(){mstrmojo.requiresCls("mstrmojo.array");var $ARR=mstrmojo.array;function getBuildConfig(){var cfg=this.buildConfig=this.buildConfig||{};cfg.pk=this.k;cfg.fgk=this.defn&&this.defn.fgk;return cfg;}mstrmojo._HasBuilder={builder:null,postBuildRendering:function postBuildRendering(){if(!this.builtChildren){this.buildChildren();}return this._super();},getChildren:function getChildren(){return this.model.getChildren(this.node,false);},buildChildren:function buildChildren(noAddChildren){if(!this.builder||!this.model){return false;}var existingChildren=this.children;if(existingChildren&&existingChildren.length){this.set("children",[]);}var children=this.builder.build(this.getChildren(),this.model,getBuildConfig.call(this));if(!noAddChildren){this.addChildren(children);}this.builtChildren=true;return noAddChildren?children:true;},rebuildChildren:function rebuildChildren(childrenToBuild){var currentChildren=this.children.slice(0),model=this.model,childNodeKeys=[];childrenToBuild=childrenToBuild||currentChildren.slice(0);childrenToBuild.forEach(function(child){var childIdx=$ARR.indexOf(currentChildren,child),childKey=child.k;if(childIdx===-1){throw new Error("Invalid child requested rebuild in mstrmojo._HasBuilder::rebuildChild.");}this.removeChildren(child);child.destroy();childNodeKeys.push(childKey);},this);var childNodes=model.getChildrenByKey(this.node,false,childNodeKeys);var newChildren=this.builder.build(childNodes,model,getBuildConfig.call(this));this.addChildren(newChildren);return newChildren;},rebuildChild:function rebuildChild(child){return this.rebuildChildren([child])[0];}};}());