(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.MapHelper","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.hash");var $EDZ=mstrmojo.vi.viz.EnumDSSDropZones,$MH=mstrmojo.vi.viz.MapHelper,REG_SPLIT32=new RegExp(".{32}","g");mstrmojo.vi.viz.GoogleMapHelper=mstrmojo.declare(mstrmojo.vi.viz.MapHelper,null,{scriptClass:"mstrmojo.vi.viz.GoogleMapHelper",supportAreaMap:false,tooltip:[],showColorByZone:function(){return $MH.canShowColorByZone(this.mapType||this.vp.mtp);},showSizeByZone:function(){return $MH.canShowSizeByZone(this.mapType||this.vp.mtp);},getXml:function getXml(){var vp=this.vp,ga=this.geoAttribute,lat=this.latitude,lng=this.longitude,colorBy=this.colorBy,sizeBy=this.sizeBy,tooltip=this.tooltip,mtp=this.mapType,dv=this.defaultView,useAttributeForm=this.useAttributeForm;if(mtp){vp.mtp=mtp;}if(dv){vp.dv=dv;}vp.ga=ga||"";vp.flat=lat||"";vp.flong=lng||"";vp.cmt=colorBy||"";vp.smt=sizeBy||"";if(useAttributeForm){vp.af=useAttributeForm;}vp.tooltip="";tooltip.forEach(function(item){vp.tooltip+=item;});return this._super();}});mstrmojo.vi.viz.GoogleMapHelper.zonesCfg=[{n:mstrmojo.desc(11661,"Geo Attribute"),id:$EDZ.GeoAttribute,prm:true,show:function(vp){return true;},v:function(vp){return vp.ga?[vp.ga]:[];},onDel:function(vp){vp.ga="";},onAdd:function(vp,context){vp.ga=context.item.did;vp.af=$MH.USE_ATTRIBUTE_FORM;}},{n:mstrmojo.desc(7696,"Latitude"),id:$EDZ.Latitude,prm:true,show:function(vp){return vp.mtp!=="3";},v:function(vp){return vp.flat?[vp.flat]:[];},onDel:function(vp){vp.flat="";},onAdd:function(vp,context){var item=context.item;vp.flat=item.did;vp.af=item.t===21?$MH.USE_ATTRIBUTE_FORM:$MH.USE_ATTRIBUTE;}},{n:mstrmojo.desc(7697,"Longitude"),id:$EDZ.Longitude,prm:true,show:function(vp){return vp.mtp!=="3";},v:function(vp){return vp.flong?[vp.flong]:[];},onDel:function(vp){vp.flong="";},onAdd:function(vp,context){var item=context.item;vp.flong=item.did;vp.af=item.t===21?$MH.USE_ATTRIBUTE_FORM:$MH.USE_ATTRIBUTE;}},{n:mstrmojo.desc(11662,"Color By"),id:$EDZ.ColorBy,prm:true,show:function(vp){return $MH.canShowColorByZone(vp.mtp);},v:function(vp){return vp.cmt?[vp.cmt]:[];},onDel:function(vp){vp.cmt="";},onAdd:function(vp,context){vp.cmt=context.item.did;}},{n:mstrmojo.desc(11663,"Size By"),id:$EDZ.SizeBy,prm:true,show:function(vp){return $MH.canShowSizeByZone(vp.mtp);},v:function(vp){return vp.smt?[vp.smt]:[];},onDel:function(vp){vp.smt="";},onAdd:function(vp,context){vp.smt=context.item.did;}},{n:mstrmojo.desc(2962,"Tooltip"),id:$EDZ.AdditionalMetrics,prm:false,show:function(vp){return true;},v:function(vp){var ids=vp.tooltip;return ids?ids.match(REG_SPLIT32):[];},onDel:function(vp,context){vp.tooltip=vp.tooltip.replace(context.item.did,"");},onAdd:function(vp,context){var ids=vp.tooltip?vp.tooltip.match(REG_SPLIT32):[];ids.splice(context.idx,0,context.item.did);vp.tooltip=ids.join("");}}];}());