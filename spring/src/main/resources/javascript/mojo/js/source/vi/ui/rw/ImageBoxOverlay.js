(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.Box","mstrmojo._HasLayout","mstrmojo._Formattable","mstrmojo.Label","mstrmojo.Button","mstrmojo.TextBox");var $STR=mstrmojo.string;mstrmojo.vi.ui.rw.ImageBoxOverlay=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout,mstrmojo._Formattable],{scriptClass:"mstrmojo.vi.ui.rw.ImageBoxOverlay",markupString:'<div id="{@id}" class="mstrmojo-ImageBoxOverlay cf {@cssClass}" style="{@domNodeCssText}"><div class="lbl"></div><div class="txt"></div><div class="btn"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},labelNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.children[1];},buttonNode:function(){return this.domNode.lastChild;}},layoutConfig:{h:{containerNode:"100%"},w:{containerNode:"100%"}},formatHandlers:{domNode:["BG"]},imageBox:undefined,imgURL:undefined,origURLStr:undefined,children:[{scriptClass:"mstrmojo.Label",slot:"labelNode",cssClass:"init-label",text:mstrmojo.desc(12277,"Input image path:")},mstrmojo.Button.newActionButton(mstrmojo.desc(1442,"OK"),function(){var overlayWidget=this.parent;if(overlayWidget.imgURL.value!==overlayWidget.origURLStr){overlayWidget.imageBox.urlEdited(overlayWidget.imgURL.value);}else{overlayWidget.imageBox.hideControlOverlay();}},{alias:"okBtn",slot:"buttonNode",enabled:false}),{scriptClass:"mstrmojo.TextBox",cssClass:"init-input",alias:"imgURL",slot:"textNode",hint:mstrmojo.desc(10493,"Image URL"),onkeydown:function(eventWrapper){if(eventWrapper.e.keyCode===13){var overlayWidget=this.parent;if(overlayWidget.imgURL.value!==overlayWidget.origURLStr){overlayWidget.imageBox.urlEdited(this.value);}else{overlayWidget.imageBox.hideControlOverlay();}}},getLayoutOffsets:function getLayoutOffsets(){return{h:0,w:2};},_set_value:function(n,v){var oldValue=this.value;if(oldValue!==v){this.value=v;var okBtn=this.parent.okBtn;okBtn.set("enabled",!$STR.isEmpty(v));okBtn.set("iconClass",!$STR.isEmpty(v)?"hot":"");}}}]});}());