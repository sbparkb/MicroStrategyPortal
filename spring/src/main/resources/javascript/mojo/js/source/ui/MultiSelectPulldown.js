(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.ui.PopupButton","mstrmojo.ui.PulldownCheckList");var $CSS=mstrmojo.css,$H=mstrmojo.hash,$DEFAULT_SELECTED={0:true};function buildSelectedText(){var indices=this.selectedIndices=$H.copy(this.getPopupList().selectedIndices),items=this.items,names=[],allIdx=this.allIdx,noneIdx=this.noneIdx;if(items){if(indices[allIdx]){names.push(items[allIdx].n);}else{if(indices[noneIdx]){names.push(items[noneIdx].n);}else{mstrmojo.array.forEach(items,function(item,index){if(indices[index]){names.push(item.n);}});}}}this.set("value",names.join(", "));}mstrmojo.ui.MultiSelectPulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown],{scriptClass:"mstrmojo.ui.MultiSelectPulldown",isHostedWithin:false,popupWidget:undefined,init:function init(props){this._super(props);$CSS.addWidgetCssClass(this,"multi");this.hostedCSSClass=this.hostedCSSClass+" multi";},submitSelections:function submitSelections(){buildSelectedText.call(this);this.onchange();},_set_selectedIndices:function _set_selectedIndices(n,v){var selectedIndices=this.selectedIndices=$H.copy(v||this.selectedIndices||$DEFAULT_SELECTED);this.getPopupList().set("selectedIndices",selectedIndices);buildSelectedText.call(this);return true;},select:function select(idxs){this.getPopupList().select(idxs);},getPopupWidget:function getPopupWidget(){return this.popupWidget;},getPopupList:function getPopupList(){return this.popupWidget.list;},children:[{scriptClass:"mstrmojo.ui.PulldownCheckList",alias:"popupWidget"}]});}());