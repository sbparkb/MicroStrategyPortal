(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","BarSeriesRenderer","AreaSeriesRenderer","LineSeriesRenderer","BulletSeriesRenderer","Plot","GraphObjectManager","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumMajorGraphType","EnumGraphSubType","EnumOrientation","EnumValueAxis","EnumAnchorPoint","EnumTrendLineIndex");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumShapeType","EnumDSSGraphObject");var $HASH=mstrmojo.hash,$C=mstrmojo.chart,$K=$C.ChartConstants,$CHART_ENUMS=$C.enums,$MAJOR_GRAPH_TYPE=$CHART_ENUMS.EnumMajorGraphType,$LAYOUT=$CHART_ENUMS.EnumLayout,$GRAPH_SUBTYPE=$CHART_ENUMS.EnumGraphSubType,$OR=$CHART_ENUMS.EnumOrientation,$VA=$CHART_ENUMS.EnumValueAxis,$TLI=$CHART_ENUMS.EnumTrendLineIndex,$AP=$CHART_ENUMS.EnumAnchorPoint,$NULL_ID=$C.gNullTripleId,$M=mstrmojo.chart.model,$MODEL_ENUMS=$M.enums,$SHP=$MODEL_ENUMS.EnumShapeType,$GT=$MODEL_ENUMS.EnumDSSGraphType,$GP=$MODEL_ENUMS.EnumDSSGraphProperty,$DTST=$MODEL_ENUMS.EnumDSSGraphDataTextShowType,$GO=$MODEL_ENUMS.EnumDSSGraphObject,k_None=0,k_LineOrLineToBar=1,k_AreaOrAreaToBar=2,k_y1=1,k_x1=2,k_y2=3,k_x2=4;var queryId=new $C.TripleId();function hUpdateStackedValues(){var chartCtx=this.mChartContextPtr,ablPlotCtx=this.mABLPlotContext,ablOptions=ablPlotCtx.mABLOptions,i,topValues={positive:[],negative:[]},areaSeriesRenderer=this.mAreaSeriesRendererPtr,barSeriesRenderer=this.mBarSeriesRendererPtr,lineSeriesRenderer=this.mLineSeriesRendererPtr;if((ablOptions.mLayout===$LAYOUT.LO_STACKED)||(ablOptions.mLayout===$LAYOUT.LO_PERCENT)){if(chartCtx.isCombinationChart()){var seriesIds=this.mSeriesId,numberOfSeries=seriesIds.length;for(i=0;i<numberOfSeries;++i){if(areaSeriesRenderer){topValues=areaSeriesRenderer.UpdateCumulateData($VA.VA_Y1,topValues,seriesIds[i]);}if(barSeriesRenderer){topValues=barSeriesRenderer.UpdateCumulateData($VA.VA_Y1,topValues,seriesIds[i]);}if(lineSeriesRenderer){topValues=lineSeriesRenderer.UpdateCumulateData($VA.VA_Y1,topValues,seriesIds[i]);}}if(ablOptions.mDualAxes){topValues={positive:[],negative:[]};for(i=0;i<numberOfSeries;++i){if(areaSeriesRenderer){topValues=areaSeriesRenderer.UpdateCumulateData($VA.VA_Y2,topValues,seriesIds[i]);}if(barSeriesRenderer){topValues=barSeriesRenderer.UpdateCumulateData($VA.VA_Y2,topValues,seriesIds[i]);}if(lineSeriesRenderer){topValues=lineSeriesRenderer.UpdateCumulateData($VA.VA_Y2,topValues,seriesIds[i]);}}}}else{if(areaSeriesRenderer){topValues=areaSeriesRenderer.UpdateCumulateData($VA.VA_Y1,topValues);}if(barSeriesRenderer){topValues={positive:[],negative:[]};topValues=barSeriesRenderer.UpdateCumulateData($VA.VA_Y1,topValues);}if(lineSeriesRenderer){topValues={positive:[],negative:[]};lineSeriesRenderer.UpdateCumulateData($VA.VA_Y1,topValues);}if(ablOptions.mDualAxes){topValues={positive:[],negative:[]};if(areaSeriesRenderer){topValues=areaSeriesRenderer.UpdateCumulateData($VA.VA_Y2,topValues);}if(barSeriesRenderer){topValues={positive:[],negative:[]};topValues=barSeriesRenderer.UpdateCumulateData($VA.VA_Y2,topValues);}if(lineSeriesRenderer){topValues={positive:[],negative:[]};lineSeriesRenderer.UpdateCumulateData($VA.VA_Y2,topValues);}}}}}function hUpdateRenderSequence(){var sequence=[],renders=[this.mAreaSeriesRendererPtr,this.mBarSeriesRendererPtr,this.mLineSeriesRendererPtr],len=renders.length,i,base=0;for(i=0;i<len;i++){if(renders[i]){base=renders[i].updateSeriesRenderSequence(sequence,base);}}return sequence;}function hUpdateDatasetSliceWindow(){var ablPlotCtx=this.mABLPlotContext,categoryAxis=ablPlotCtx.mCategoryAxisPtr,dataset=this.mDatasetPtr;this.DPCount=0;this.seriesDPCount.splice(0,this.seriesDPCount.length);if(this.mPartialRendering){var chartCtx=this.mChartContextPtr,props={PartialRendering:true,Group:{}},min,max,window=chartCtx.mRenderingWindow,isVertical=chartCtx.IsVertical();if(isVertical){min=window.x;max=min+window.width;}else{min=window.y;max=min+window.height;}props.Group.Max=categoryAxis.getGroupSlotAt(max)+1;props.Group.Min=categoryAxis.getGroupSlotAt(min)-1;props.Data={Max:-1,Min:-1};dataset.updateDataWindow(props);}else{dataset.resetDataWindow();}}function hInitializeGroupTotals(){var dataset=this.mDatasetPtr,groupCount,seriesCount,valueIndex=$VA.VA_Y1,y2Series,i,j,totalPrimary,totalSecondary,data;groupCount=dataset.GetGroupCount();seriesCount=this.mSeriesId.length;if(this.mChartContextPtr.IsDualAxis()){y2Series=dataset.GetSeriesByValueAxis($VA.VA_Y2);}else{y2Series=[];}for(i=0;i<groupCount;++i){totalPrimary=totalSecondary=0;for(j=0;j<seriesCount;++j){data=dataset.GetData(this.mSeriesId[j],i);if(data!==null&&data!==undefined){if(y2Series.indexOf(this.mSeriesId[j])!==-1){valueIndex=$VA.VA_Y2;if(data>0){totalSecondary+=data;}else{totalSecondary+=Math.abs(data);}}else{valueIndex=$VA.VA_Y1;if(data>0){totalPrimary+=data;}else{totalPrimary+=Math.abs(data);}}}}this.groupTotals[0].push(totalPrimary);this.groupTotals[1].push(totalSecondary);}}function hGetRealSeriesType(){var ablOptions=this.mABLPlotContext.mABLOptions,seriesOptions=this.mABLPlotContext.mSeriesOptions,chartCtx=this.mChartContextPtr,value,i,j,numberOfSeries,tripleId,type,len,countOfTypes=0;if(chartCtx.mIsGraphMatrix&&chartCtx.isCombinationChart()){var array,seriesTypes=this.mDatasetPtr.GetSeriesByShape(),arrays=[seriesTypes.Tick,seriesTypes.Line,seriesTypes.Square,seriesTypes.Circle,seriesTypes.Bar,seriesTypes.Area,seriesTypes.Pie],types=[$SHP._TICKER,$SHP._LINE,$SHP._SQUARE,$SHP._CIRCLE,$SHP._BAR,$SHP._AREA,$SHP._PIE];len=arrays.length;for(i=0;i<len;++i){array=arrays[i];type=types[i];if(array&&array.length){++countOfTypes;for(j=0;j<array.length;j++){seriesOptions[array[j]].mRealSeriesType=type;}}}this.countOfTypes=countOfTypes;this.realComboChart=(countOfTypes>1);return ;}var Utility_id=chartCtx.getUtiliy().tripleId;numberOfSeries=seriesOptions.length;for(i=0;i<numberOfSeries;++i){switch(seriesOptions[i].mSeriesType){case $SHP._AREA:seriesOptions[i].mRealSeriesType=$SHP._AREA;break;case $SHP._BAR:seriesOptions[i].mRealSeriesType=$SHP._BAR;break;case $SHP._LINE:if(ablOptions.mCurvedLines){seriesOptions[i].mRealSeriesType=$SHP._LINE;}else{tripleId=Utility_id.create($GO.DssGraphRiser,this.mSeriesId[i]);value=chartCtx.GetProperty($GP.DssGraphShowStepLine,tripleId);if(value!==undefined&&value!==null){if(value){seriesOptions[i].mRealSeriesType=$SHP._STEPLINE;}else{seriesOptions[i].mRealSeriesType=$SHP._LINE;}}}break;case $SHP._PIE:seriesOptions[i].mRealSereisType=$SHP._LINE;break;case $SHP._DEFAULT:if(ablOptions.mMajorGraphType===$MAJOR_GRAPH_TYPE.MGT_AREA){seriesOptions[i].mRealSeriesType=$SHP._AREA;}else{if(ablOptions.mMajorGraphType===$MAJOR_GRAPH_TYPE.MGT_BAR){seriesOptions[i].mRealSeriesType=$SHP._BAR;}else{if(ablOptions.mCurvedLines){seriesOptions[i].mRealSeriesType=$SHP._LINE;}else{tripleId=Utility_id.create($GO.DssGraphRiser,this.mSeriesId[i]);value=chartCtx.GetProperty($GP.DssGraphShowStepLine,tripleId);if(value!==undefined&&value!==null){if(value){seriesOptions[i].mRealSeriesType=$SHP._STEPLINE;}else{seriesOptions[i].mRealSeriesType=$SHP._LINE;}}else{seriesOptions[i].mRealSeriesType=$SHP._LINE;}}}}break;}}}function hLoadSeriesProperties(seriesIndex){var chartCtx=this.mChartContextPtr,ablPlotCtx=this.mABLPlotContext,ablOptions=ablPlotCtx.mABLOptions,seriesOptions=ablPlotCtx.mSeriesOptions,value;var Utility_id=chartCtx.getUtiliy().tripleId;Utility_id.reset(queryId,$GO.DssGraphRiser,this.mSeriesId[seriesIndex]);if(!chartCtx.mIsGraphMatrix){value=chartCtx.GetProperty($GP.DssGraphSDRiserType,queryId);if(value){switch(value){case k_None:seriesOptions[seriesIndex].mSeriesType=$SHP._DEFAULT;break;case k_LineOrLineToBar:if(ablOptions.mMajorGraphType===$MAJOR_GRAPH_TYPE.MGT_LINE){seriesOptions[seriesIndex].mSeriesType=$SHP._BAR;}else{seriesOptions[seriesIndex].mSeriesType=$SHP._LINE;}break;case k_AreaOrAreaToBar:if(ablOptions.mMajorGraphType===$MAJOR_GRAPH_TYPE.MGT_AREA){seriesOptions[seriesIndex].mSeriesType=$SHP._BAR;}else{seriesOptions[seriesIndex].mSeriesType=$SHP._AREA;}break;default:seriesOptions[seriesIndex].mSeriesType=value;break;}}}seriesOptions[seriesIndex].mValueAxis=this.LoadValueAxisInfo(seriesIndex,ablOptions.mDualAxes);if(chartCtx.mImageUsage!==0){return ;}this.LoadTrendLineProperties(this.mSeriesId[seriesIndex],seriesOptions[seriesIndex].mTrendLineOptions);if(chartCtx.mIsGraphMatrix===false){seriesOptions[seriesIndex].mGraphNumberFormat=new $C.ChartAdvFormat();value=chartCtx.GetProperty(-$GP.DssGraphFormatDataTextAdv,queryId);if(value){chartCtx.ParseValueToFormat(value,seriesOptions[seriesIndex].mGraphNumberFormat);}}}function hLoadProperties(){var chartCtx=this.mChartContextPtr,ablPlotCtx=this.mABLPlotContext,ablOptions=ablPlotCtx.mABLOptions,value;this.SetGraphType(chartCtx.mGraphType);if(chartCtx.mImageUsage!==0){return ;}if(chartCtx.mIsGraphMatrix){return ;}var tripleId=new $C.TripleId({SeriesId:this.mTripleId.mSeriesId});value=chartCtx.GetProperty($GP.DssGraphShowDataText,tripleId);if(value){ablOptions.mTextShowType=value;ablOptions.mShowCumulate=(value&$DTST.DssGraphDataTextAbs)===0;}var DssGraphUseGlobalAutoScale=21001;value=chartCtx.GetProperty(DssGraphUseGlobalAutoScale,tripleId);if(value){ablOptions.mUseGlobalAutoScale=value;}value=chartCtx.GetProperty($GP.DssGraphDepthMode,tripleId);if(value){ablOptions.mUseDepth=value;}value=chartCtx.GetProperty($GP.DssGraph2DDepth,tripleId);if(value){ablOptions.mDepth=value;}value=chartCtx.GetProperty($GP.DssGraph2DAngle,tripleId);if(value){ablOptions.mDepthDirection=value;}value=chartCtx.GetProperty($GP.DssGraphShowLine,tripleId);if(value){ablOptions.mShowLines=value;}value=chartCtx.GetProperty($GP.DssGraphShowDivBiPolar,tripleId);if(value){ablOptions.mShowAxisSplit=value;}value=chartCtx.GetProperty($GP.DssGraphShowDataLabel,tripleId);if(value){ablOptions.mShowLabel=value;}value=chartCtx.GetProperty($GP.DssGraphShowDataValue,tripleId);if(value){ablOptions.mShowValue=value;}value=chartCtx.GetProperty($GP.DssGraphShowDVPercent,tripleId);if(value){ablOptions.mShowAsPercentage=value;}value=chartCtx.GetProperty($GP.DssGraphShowTotalValue,tripleId);if(value){ablOptions.mShowTotal=value;}value=chartCtx.GetProperty($GP.DssGraphCurvedLines,tripleId);if(value){ablOptions.mCurvedLines=value;}value=chartCtx.GetProperty($GP.DssGraphAxisDataTextPlace,tripleId);if(value){ablOptions.mTextPosition=value;}value=chartCtx.GetProperty($GP.DssGraphSplitYPosition,tripleId);if(value){ablOptions.mSplitAxisPosition=value;}}function hPopulateRendersByShapes(commonParams){var chartCtx=this.mChartContextPtr,gmCtx=chartCtx.GetGraphMatrixContext();if(chartCtx.mIsGraphMatrix){if(gmCtx.isCombinationChart()){var calculatingClipping=chartCtx.mImageUsage===mstrmojo.chart.enums.EnumImageUsage.OBJECT_CLIP_COMPUTATION;var dataset=this.mDatasetPtr,allShapes=dataset.GetSeriesByShape(),hasGenericShape=((allShapes.Square&&allShapes.Square.length)||(allShapes.Circle&&allShapes.Circle.length)||(allShapes.Tick&&allShapes.Tick.length));if((allShapes.Bar&&allShapes.Bar.length)){if(!calculatingClipping||dataset.onlyBarDataLabelEnabled()){this.mBarSeriesRendererPtr=new $C.BarSeriesRenderer($HASH.copy(commonParams,{TripleId:$C.BarRenderer0}));}}if(allShapes.Area&&allShapes.Area.length){this.mAreaSeriesRendererPtr=new $C.AreaSeriesRenderer($HASH.copy(commonParams,{TripleId:$C.AreaRenderer0}));}if((allShapes.Line&&allShapes.Line.length)||hasGenericShape){if(!calculatingClipping||(calculatingClipping&&!(allShapes.Line.length===1&&dataset.GetGroupCount()===1))){this.mLineSeriesRendererPtr=new $C.LineSeriesRenderer($HASH.copy(commonParams,{TripleId:$C.LineRenderer0}));}}return true;}if(chartCtx.IsBarChart()){if(chartCtx.IsBulletChart()){this.mBarSeriesRendererPtr=new $C.BulletSeriesRenderer($HASH.copy(commonParams,{TripleId:$C.BarRenderer0}));}else{this.mBarSeriesRendererPtr=new $C.BarSeriesRenderer($HASH.copy(commonParams,{TripleId:$C.BarRenderer0}));}}else{if(chartCtx.IsLineChart()){this.mLineSeriesRendererPtr=new $C.LineSeriesRenderer($HASH.copy(commonParams,{TripleId:$C.LineRenderer0}));}else{if(chartCtx.IsAreaChart()){this.mAreaSeriesRendererPtr=new $C.AreaSeriesRenderer($HASH.copy(commonParams,{TripleId:$C.AreaRenderer0}));}else{return false;}}}return true;}this.mAreaSeriesRendererPtr=new $C.AreaSeriesRenderer($HASH.copy(commonParams,{TripleId:$C.AreaRenderer0}));this.mBarSeriesRendererPtr=new $C.BarSeriesRenderer($HASH.copy(commonParams,{TripleId:$C.BarRenderer0}));this.mLineSeriesRendererPtr=new $C.LineSeriesRenderer($HASH.copy(commonParams,{TripleId:$C.LineRenderer0}));return true;}function hAssignSeriesToRender(commonParams,seriesOptions){var isOK=hPopulateRendersByShapes.call(this,commonParams);if(!isOK){return ;}var areaSeriesRenderer=this.mAreaSeriesRendererPtr,barSeriesRenderer=this.mBarSeriesRendererPtr,lineSeriesRenderer=this.mLineSeriesRendererPtr;var cumulateIndex=[[0,0],[0,0],[0,0],[0,0]],drawOrder=[],idx,i=0,dataset=this.mDatasetPtr,chartCtx=this.mChartContextPtr,seriesIds=this.mSeriesId,len=seriesIds.length;if(chartCtx.isCombinationChart()){drawOrder=dataset.GetSeriesIndexByPriority();}for(idx=0;idx<len;++idx){if(drawOrder&&drawOrder.length>idx){i=drawOrder[idx];}else{i=idx;}switch(seriesOptions[i].mRealSeriesType){case $SHP._AREA:if(areaSeriesRenderer){areaSeriesRenderer.AddSeries(seriesIds[i],i,cumulateIndex[$SHP._AREA][seriesOptions[i].mValueAxis],seriesOptions[i].mValueAxis);++cumulateIndex[$SHP._AREA][seriesOptions[i].mValueAxis];}break;case $SHP._BAR:if(barSeriesRenderer){barSeriesRenderer.AddSeries(seriesIds[i],i,cumulateIndex[$SHP._BAR][seriesOptions[i].mValueAxis],seriesOptions[i].mValueAxis);++cumulateIndex[$SHP._BAR][seriesOptions[i].mValueAxis];}break;case $SHP._TICKER:case $SHP._LINE:case $SHP._SQUARE:case $SHP._CIRCLE:case $SHP._PIE:if(lineSeriesRenderer){lineSeriesRenderer.AddSeries(seriesIds[i],i,cumulateIndex[$SHP._LINE][seriesOptions[i].mValueAxis],seriesOptions[i].mValueAxis);++cumulateIndex[$SHP._LINE][seriesOptions[i].mValueAxis];}break;default:}}}function hGetAxisOriginLabelRectInfo(position,height,width,valuePosition,drawingAreaHeight,drawingAreaWidth,labelPadding,axis){var retVal={},halfHeight=height/2,halfWidth=width/2,isVertical=axis.IsVerticalAxis(),axisLocation;if(axis.mTripleId.mObjectId===$GO.DssGraphY2Body){axisLocation=isVertical?k_y2:k_x2;}else{axisLocation=isVertical?k_y1:k_x1;}retVal.rect=new $C.Rect2D({x:0,y:0,width:width+2*labelPadding,height:height+2*labelPadding});switch(position){case 0:switch(axisLocation){case k_y1:retVal.xOffset=labelPadding+halfWidth;retVal.yOffset=valuePosition-labelPadding-halfHeight;retVal.rect.y=valuePosition-2*labelPadding-height;retVal.rect.x=0;break;case k_x1:retVal.xOffset=valuePosition-labelPadding-halfWidth;retVal.yOffset=drawingAreaHeight-labelPadding-halfHeight;retVal.rect.y=drawingAreaHeight-2*labelPadding-height;retVal.rect.x=valuePosition-2*labelPadding-width;break;case k_y2:retVal.xOffset=drawingAreaWidth-labelPadding-halfWidth;retVal.yOffset=valuePosition-labelPadding-halfHeight;retVal.rect.y=valuePosition-2*labelPadding-height;retVal.rect.x=drawingAreaWidth-2*labelPadding-width;break;case k_x2:retVal.xOffset=valuePosition-labelPadding-halfWidth;retVal.yOffset=labelPadding+halfHeight;retVal.rect.y=0;retVal.rect.x=valuePosition-2*labelPadding-width;break;}break;case 1:switch(axisLocation){case k_y1:retVal.xOffset=labelPadding+halfWidth;retVal.yOffset=valuePosition+labelPadding+halfHeight;retVal.rect.y=valuePosition;retVal.rect.x=0;break;case k_x1:retVal.xOffset=valuePosition+labelPadding+halfWidth;retVal.yOffset=drawingAreaHeight-labelPadding-halfHeight;retVal.rect.y=drawingAreaHeight-2*labelPadding-height;retVal.rect.x=valuePosition;break;case k_y2:retVal.xOffset=drawingAreaWidth-labelPadding-halfWidth;retVal.yOffset=valuePosition+labelPadding+halfHeight;retVal.rect.y=valuePosition;retVal.rect.x=drawingAreaWidth-2*labelPadding-width;break;case k_x2:retVal.xOffset=valuePosition+labelPadding+halfWidth;retVal.yOffset=labelPadding+halfHeight;retVal.rect.y=0;retVal.rect.x=valuePosition;break;}break;}return retVal;}function hCheckAxisOriginLabelCandidate(labelCandidate,drawingAreaHeight,drawingAreaWidth,dataLabels,refLabels,axisOriginLabels){var rect=labelCandidate.rect,len,i,checkRect,currentDataLabel;if(rect.y<0||rect.y+rect.height>drawingAreaHeight){return false;}if(rect.x<0||rect.x+rect.width>drawingAreaWidth){return false;}len=axisOriginLabels.length;for(i=0;i<len;++i){checkRect=axisOriginLabels[i].GetBoundingRect(true);if(rect.HasIntersection(checkRect)){return false;}}len=refLabels.length;for(i=0;i<len;++i){checkRect=refLabels[i].GetBoundingRect(true);if(rect.HasIntersection(checkRect)){return false;}}len=dataLabels.length;for(i=0;i<len;++i){currentDataLabel=dataLabels[i];if(currentDataLabel.mIsShown){checkRect=currentDataLabel.GetBoundingRect(true);if(rect.HasIntersection(checkRect)){return false;}}}return true;}function hGenerateAxisOriginLabels(){var valueAxis=this.mABLPlotContext.mValueAxis,mABLOptions=this.mABLPlotContext.mABLOptions,chartCtx=this.mChartContextPtr,drawingAreaWidth=chartCtx.mGraphWidth,drawingAreaHeight=chartCtx.mGraphHeight,gmCtx=chartCtx.mpGraphMatrixContext,mOrientation=mABLOptions.mOrientation,savedInRow=mOrientation===1,backupTicks=this.mDatasetPtr.fetchShownLabels(savedInRow),axis,axisOptions,len,i,j,ticks,numberOfTicks,tickValue,axisOriginValue,matchTick,position,textRect,tripleId,height,width,numberObject,axisOriginLabelCandidate,label,valueStr,positionInfo,labelPadding=gmCtx.getPadding($K.kAxisOriginLabel),labelValid,isVertical;len=valueAxis.length;for(i=0;i<len;++i){axis=valueAxis[i];tripleId=$C.gAxisObjects[axis.getIndex()].mCustomLabelId;axisOptions=axis.mOptions;axisOriginValue=axisOptions.mAxisCustomValue;ticks=backupTicks&&backupTicks[axis.Key];numberOfTicks=ticks&&ticks.length;matchTick=false;if(!axisOptions.mDrawCustomLine){continue;}for(j=0;j<numberOfTicks&&!matchTick;++j){tickValue=ticks[j];if(tickValue===axisOriginValue){matchTick=true;}}if(matchTick){continue;}if(axisOriginValue>axis.mMaxTick||axisOriginValue<axis.mMinTick){continue;}var numberFormat={};if(axis.mIsPercent){numberFormat.mFormatType=4;numberFormat.mCustomFormat="0%";}else{numberFormat=axis.mNumberFormat;}numberObject=new $C.NumberObject({TripleId:tripleId,GraphObjectManager:this,Number:axisOriginValue,NumberFormat:numberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:axis.mCondenseLabels});if(numberObject===null||numberObject===undefined){continue;}label=numberObject;valueStr=numberObject.mText;label.SetText(valueStr);textRect=label.GetBoundingRect(true);height=textRect.height;width=textRect.width;position=axis.ValueToPosition(axisOriginValue);isVertical=axis.IsVerticalAxis();if(position===0){continue;}if(isVertical){if(position===drawingAreaHeight){continue;}}else{if(position===drawingAreaWidth){continue;}}labelValid=false;for(j=0;j<=1&&!labelValid;++j){axisOriginLabelCandidate={};positionInfo=hGetAxisOriginLabelRectInfo.call(this,j,height,width,position,drawingAreaHeight,drawingAreaWidth,labelPadding,axis);axisOriginLabelCandidate.xOffset=positionInfo.xOffset;axisOriginLabelCandidate.yOffset=positionInfo.yOffset;axisOriginLabelCandidate.rect=positionInfo.rect;labelValid=hCheckAxisOriginLabelCandidate.call(this,axisOriginLabelCandidate,drawingAreaHeight,drawingAreaWidth,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(labelValid){label.MoveTo(axisOriginLabelCandidate.xOffset,axisOriginLabelCandidate.yOffset,$AP.CENTER);label.mIsShown=true;this.mPostTrendLineObjects.push(label);this.axisOriginLabels.push(label);}}}function hPopulateABLPlotContext(){return{mSeriesOptions:[],mValueAxis:[],mABLOptions:{mGraphType:$GT.DssGraphTypeVertical_Line_Absolute,mMajorGraphType:$MAJOR_GRAPH_TYPE.MGT_LINE,mLayout:$LAYOUT.LO_ABSOLUTE,mOrientation:$OR.OR_VERTICAL,mGraphSubType:$GRAPH_SUBTYPE.GST_NULL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mShowAxisSplit:true,mShowLabel:false,mShowValue:false,mShowAsPercentage:false,mShowTotal:true,mShowCumulate:false,mCurvedLines:false,mShowLines:true,mUseGlobalAutoScale:true,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mTextPosition:4,mTextShowType:$DTST.DssGraphDataTextValue,mTotalNumberFormat:null}};}mstrmojo.chart.ABLPlot=mstrmojo.declare(mstrmojo.chart.CategoryPlot,null,{scriptClass:"mstrmojo.chart.ABLPlot",mAreaSeriesRendererPtr:null,mBarSeriesRendererPtr:null,mLineSeriesRendererPtr:null,mABLPlotContext:null,mDepthLevel:null,mAxesAreas:null,unitLevelDepth:0,takeGroupCenter:false,groupTotals:null,groupOrder:null,countOfTypes:0,realComboChart:false,init:function init(props){this._super(props);this.mDepthLevel=[];this.groupTotals=[[],[]];this.mAxesAreas=[];this.groupOrder=[];this.mABLPlotContext=hPopulateABLPlotContext.call(this);this.mABLPlotContext.takeGroupCenter=this.mChartContextPtr.mDatasetPtr.ShouldTakeGroupCenter();},getLayout:function getLayout(){return this.mABLPlotContext.mABLOptions.mLayout;},getOrientation:function getOrientation(){return this.mABLPlotContext.mABLOptions.mOrientation;},isAbsoluteOrCluster:function isAbsoluteOrCluster(){var layout=this.mABLPlotContext.mABLOptions.mLayout;return layout===$LAYOUT.LO_ABSOLUTE||layout===$LAYOUT.LO_CLUSTER;},GenerateMapAndList:function GenerateMapAndList(){var chartCtx=this.mChartContextPtr,ablPlotCtx=this.mABLPlotContext,ablOptions=ablPlotCtx.mABLOptions,dataArea=this.mDataArea,rectY1,rectY2,i,baseValue,shownDataLabels=this.shownDataLabels;if(dataArea.width<=0||dataArea.height<=0){return ;}hUpdateDatasetSliceWindow.call(this);var axesAreas=this.mAxesAreas;if(ablOptions.mDualAxes&&ablOptions.mSplitDualAxes){rectY1=new $C.Rect2D();rectY2=new $C.Rect2D();this.mChartContextPtr.SplitRect(dataArea,ablOptions.mOrientation===$OR.OR_VERTICAL,ablOptions.mSplitAxisPosition,rectY1,rectY2);axesAreas.push(rectY1);axesAreas.push(rectY2);}else{rectY1=new $C.Rect2D({x:dataArea.x,y:dataArea.y,width:dataArea.width,height:dataArea.height});axesAreas.push(rectY1);if(ablOptions.mDualAxes){rectY2=new $C.Rect2D({x:dataArea.x,y:dataArea.y,width:dataArea.width,height:dataArea.height});axesAreas.push(rectY2);}}var valueAxisSet=this.mABLPlotContext.mValueAxis,valueAxis,len=valueAxisSet.length,areaSeriesRenderer=this.mAreaSeriesRendererPtr,barSeriesRenderer=this.mBarSeriesRendererPtr,lineSeriesRenderer=this.mLineSeriesRendererPtr,graphObjMgrList=this.mGraphObjectManagerList,graphObjectMap=this.mGraphObjectMap,postTrendLineObjects=this.mPostTrendLineObjects;if(chartCtx.mIsGraphMatrix===false){for(i=0;i<len;++i){valueAxis=valueAxisSet[i];if(!valueAxis.IsBaseAtZero()&&valueAxis.mOptions.mUseLogarithmicScale===false){baseValue=valueAxis.GetBaseValue();if(areaSeriesRenderer){areaSeriesRenderer.AddBaseToCumulateData(i,baseValue);}if(barSeriesRenderer){barSeriesRenderer.AddBaseToCumulateData(i,baseValue);}if(lineSeriesRenderer){lineSeriesRenderer.AddBaseToCumulateData(i,baseValue);}}}}if(areaSeriesRenderer){areaSeriesRenderer.SetDeviceDataArea(dataArea);}if(barSeriesRenderer){barSeriesRenderer.SetDeviceDataArea(dataArea);}if(lineSeriesRenderer){lineSeriesRenderer.SetDeviceDataArea(dataArea);}if(!(ablOptions.mDualAxes&&ablOptions.mSplitDualAxes&&ablOptions.mUseDepth)){if(areaSeriesRenderer){areaSeriesRenderer.GenerateMapAndList(shownDataLabels);graphObjMgrList.push(areaSeriesRenderer);}if(barSeriesRenderer){barSeriesRenderer.GenerateMapAndList(shownDataLabels);graphObjMgrList.push(barSeriesRenderer);}if(lineSeriesRenderer){lineSeriesRenderer.GenerateMapAndList(shownDataLabels);graphObjMgrList.push(lineSeriesRenderer);}}if(ablOptions.mDualAxes){if(ablOptions.mSplitDualAxes){this.AdjustTrendLineEquation(axesAreas[0],$TLI.TLI_Y1);this.AdjustTrendLineEquation(axesAreas[1],$TLI.TLI_Y2);}else{this.AdjustTrendLineEquation(dataArea,$TLI.TLI_BOTH);}}else{this.AdjustTrendLineEquation(dataArea,$TLI.TLI_Y1);}len=valueAxisSet.length;this.axisOriginLines=[];var axisOriginLines=this.axisOriginLines;for(i=0;i<len;++i){valueAxis=valueAxisSet[i];if(this.mChartContextPtr.mIsGraphMatrix){valueAxis.GenerateCustomLine(axesAreas[i],axisOriginLines);}else{valueAxis.GenerateCustomLine(axesAreas[i],postTrendLineObjects);}}hGenerateAxisOriginLabels.call(this);if(areaSeriesRenderer){areaSeriesRenderer.AddTextToMapAndList(graphObjectMap,postTrendLineObjects);}if(barSeriesRenderer){barSeriesRenderer.AddTextToMapAndList(graphObjectMap,postTrendLineObjects);}if(lineSeriesRenderer){lineSeriesRenderer.AddTextToMapAndList(graphObjectMap,postTrendLineObjects);}this.mDatasetPtr.resetDataWindow();},Draw:function Draw(){var chartCtx=this.mChartContextPtr,dataArea=this.mDataArea,areaSeriesRenderer=this.mAreaSeriesRendererPtr,barSeriesRenderer=this.mBarSeriesRendererPtr,lineSeriesRenderer=this.mLineSeriesRendererPtr;var axisOriginLines=this.axisOriginLines;if(axisOriginLines&&axisOriginLines.length){var i,len=axisOriginLines.length;for(i=0;i<len;i++){axisOriginLines[i].Draw();}}if(this.mAreaSeriesRendererPtr){var sequence=hUpdateRenderSequence.call(this);chartCtx.setDrawingOrderToCanvas(sequence);}if(chartCtx.mIsTimeSeriesChart){var lDataArea=new $C.Rect2D({x:dataArea.x+1,y:dataArea.y,width:dataArea.width-1,height:dataArea.height});chartCtx.DrawRectangle(lDataArea,false);chartCtx.saveState();chartCtx.Clip();if(areaSeriesRenderer){areaSeriesRenderer.Draw();}if(barSeriesRenderer){barSeriesRenderer.Draw();}if(lineSeriesRenderer){lineSeriesRenderer.Draw();}this._super();this.DrawPostTrendLineObjects();chartCtx.RestoreState();}else{var ablPlotCtx=this.mABLPlotContext,ablOptions=ablPlotCtx.mABLOptions;if(!ablOptions.mDualAxes||!ablOptions.mSplitDualAxes||!ablOptions.mUseDepth){if(areaSeriesRenderer){areaSeriesRenderer.Draw();}}if(barSeriesRenderer){barSeriesRenderer.Draw();}if(!ablOptions.mDualAxes||!ablOptions.mSplitDualAxes||!ablOptions.mUseDepth){if(lineSeriesRenderer){lineSeriesRenderer.Draw();}}this._super({Skip:1});if(this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquations();}this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function DrawTrendLinesAndEquations(){if(!this.mChartContextPtr.mIsTimeSeriesChart&&this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[0],false);if(this.mABLPlotContext.mABLOptions.mDualAxes){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[1],true);}}},AddValueAxis:function AddValueAxis(valueAxis){this.mABLPlotContext.mValueAxis.push(valueAxis);},SetCategoryAxis:function SetCategoryAxis(categoryAxis){var chartCtx=this.mChartContextPtr,ablPlotCtx=this.mABLPlotContext,axisCross,value,isLineOrArea,noRiser,len,i,currentCategoryAxis=ablPlotCtx.mCategoryAxisPtr=categoryAxis;axisCross=false;if(chartCtx.mIsTimeSeriesChart){axisCross=true;}else{value=chartCtx.GetProperty($GP.DssGraph2DOrdSpaceMode,$NULL_ID);if(value){axisCross=value;}}isLineOrArea=ablPlotCtx.mABLOptions.mMajorGraphType!==$MAJOR_GRAPH_TYPE.MGT_BAR;noRiser=true;len=this.mSeriesId.length;for(i=0;i<len;++i){if(ablPlotCtx.mSeriesOptions[i].mRealSeriesType===$SHP._BAR){noRiser=false;break;}}currentCategoryAxis.mAxisCross=(axisCross&&isLineOrArea&&noRiser);if(chartCtx.mIsGraphMatrix&&chartCtx.IsLineChart()){if(this.mDatasetPtr.GetGroupCount()<=1){currentCategoryAxis.mAxisCross=false;}}},GetDepthOffset:function GetDepthOffset(seriesIndex){return this.mChartContextPtr.CalculateDepthOffset(this.mDepthLevel[seriesIndex]*this.unitLevelDepth,this.mABLPlotContext.mABLOptions.mDepthDirection);},getGroupTotals:function getGroupTotals(groupId,valueIndex){return this.groupTotals[valueIndex][groupId];},Init:function Init(){var i,len,ablPlotCtx=this.mABLPlotContext,seriesOptions=ablPlotCtx.mSeriesOptions;seriesOptions.splice(0,seriesOptions.length);len=this.mSeriesId.length;for(i=0;i<len;++i){var oneSeriesOption={mSeriesType:$SHP._DEFAULT,mRealSeriesType:$SHP._LINE,mValueAxis:$VA.VA_Y1,mShowDataLabels:false,mTrendLineOptions:null,mGraphNumberFormat:$C.dNF};if(this.mChartContextPtr.mIsGraphMatrix==false){oneSeriesOption.mTrendLineOptions=new $C.GraphTrendLineOptions();}seriesOptions.push(oneSeriesOption);}hLoadProperties.call(this);for(i=0;i<len;++i){hLoadSeriesProperties.call(this,i);}hGetRealSeriesType.call(this);var commonParams={GraphObjectManager:this,DataSet:this.mDatasetPtr,Legend:this.mLegendPtr};hAssignSeriesToRender.call(this,commonParams,seriesOptions);hInitializeGroupTotals.call(this);hUpdateStackedValues.call(this);},SetGraphType:function SetGraphType(type){var ablOptions=this.mABLPlotContext.mABLOptions;ablOptions.mGraphType=type;switch(type){case $GT.DssGraphTypeVertical_Area_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeVertical_Area_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeVertical_Area_BiPolar_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeVertical_Area_BiPolar_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeVertical_Area_DualAxis_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeVertical_Area_DualAxis_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeVertical_Area_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeHorizontal_Area_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeHorizontal_Area_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeHorizontal_Area_BiPolar_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeHorizontal_Area_BiPolar_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeHorizontal_Area_DualAxis_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeHorizontal_Area_DualAxis_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeHorizontal_Area_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeVertical_Bar_Side_by_Side:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_CLUSTER;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeVertical_Bar_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_CLUSTER;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeVertical_Bar_DualAxis_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_CLUSTER;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeVertical_Bar_BiPolar_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeVertical_Bar_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeHorizontal_Bar_Side_by_Side:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_CLUSTER;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeHorizontal_Bar_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_CLUSTER;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_CLUSTER;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeHorizontal_Bar_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeVertical_Line_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeVertical_Line_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeVertical_Line_BiPolar_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeVertical_Line_BiPolar_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeVertical_Line_DualAxis_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeVertical_Line_DualAxis_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeVertical_Line_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeHorizontal_Line_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeHorizontal_Line_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeHorizontal_Line_BiPolar_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeHorizontal_Line_BiPolar_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeHorizontal_Line_DualAxis_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeHorizontal_Line_DualAxis_Stacked:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_STACKED;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeHorizontal_Line_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeVertical_Bullet:case $GT.DssGraphTypeVertical_Bar_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeHorizontal_Bullet:case $GT.DssGraphTypeHorizontal_Bar_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_NULL;break;case $GT.DssGraphTypeVertical_Bar_BiPolar_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeVertical_Bar_DualAxis_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_BIPOLAR;break;case $GT.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_ABSOLUTE;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeVertical_Area_DualAxis_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeHorizontal_Area_DualAxis_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_AREA;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeVertical_Bar_DualAxis_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeHorizontal_Bar_DualAxis_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_BAR;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeVertical_Line_DualAxis_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_VERTICAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;case $GT.DssGraphTypeHorizontal_Line_DualAxis_Percent:ablOptions.mMajorGraphType=$MAJOR_GRAPH_TYPE.MGT_LINE;ablOptions.mLayout=$LAYOUT.LO_PERCENT;ablOptions.mOrientation=$OR.OR_HORIZONTAL;ablOptions.mGraphSubType=$GRAPH_SUBTYPE.GST_DUALAXIS;break;}switch(ablOptions.mGraphSubType){case $GRAPH_SUBTYPE.GST_NULL:ablOptions.mDualAxes=false;ablOptions.mSplitDualAxes=false;break;case $GRAPH_SUBTYPE.GST_DUALAXIS:ablOptions.mDualAxes=true;ablOptions.mSplitDualAxes=false;break;case $GRAPH_SUBTYPE.GST_BIPOLAR:ablOptions.mDualAxes=true;ablOptions.mSplitDualAxes=true;break;}},GetMinMaxValue:function GetMinMaxValue(valueAxis,min,max,areInitialized){var tempVal,chartCtx=this.mChartContextPtr;if(chartCtx.mIsUniformAxisMode){var uaCtx=chartCtx.getUniformAxisContext(),uaVA=uaCtx.ValueAxis;if(valueAxis===$VA.VA_Y1){if(chartCtx.IsVertical()===false){return{Min:uaVA.X1.Min,Max:uaVA.X1.Max,AreInitialized:true};}return{Min:uaVA.Y1.Min,Max:uaVA.Y1.Max,AreInitialized:true};}if(chartCtx.IsVertical()===false){return{Min:uaVA.X2.Min,Max:uaVA.X2.Max,AreInitialized:true};}return{Min:uaVA.Y2.Min,Max:uaVA.Y2.Max,AreInitialized:true};}if(this.mAreaSeriesRendererPtr){tempVal=this.mAreaSeriesRendererPtr.GetMinMaxValue(valueAxis,min,max,areInitialized);}if(this.mBarSeriesRendererPtr){tempVal=this.mBarSeriesRendererPtr.GetMinMaxValue(valueAxis,tempVal.Min,tempVal.Max,tempVal.AreInitialized);}if(this.mLineSeriesRendererPtr){tempVal=this.mLineSeriesRendererPtr.GetMinMaxValue(valueAxis,tempVal.Min,tempVal.Max,tempVal.AreInitialized);}return{Min:tempVal.Min,Max:tempVal.Max,AreInitialized:tempVal.AreInitialized};},ShouldRotateDataLabel:function ShouldRotateDataLabel(){return this.mBarSeriesRendererPtr.ShouldRotateDataLabel();},GetMaxElementOffsetClippedByBoundary:function GetMaxElementOffsetClippedByBoundary(isOnXAxis,isPrimary){var retVal={LowOffset:0,HighOffset:0},i,m,k,len;if(isPrimary===undefined||isPrimary===null){isPrimary=true;}if(!this.mChartContextPtr.mIsGraphMatrix){return retVal;}var clippedMarkerKey=isOnXAxis?(isPrimary?"X1":"X2"):(isPrimary?"Y1":"Y2"),clippedSize=this.mClippedElementSize;if(clippedSize[clippedMarkerKey]!==undefined){return clippedSize[clippedMarkerKey];}for(m=0;m<2;++m){for(k=0;k<2;++k){var rendererArray=[this.mLineSeriesRendererPtr,this.mAreaSeriesRendererPtr],inspectX=(k===0),inspectPrimary=(m===0),newKey=inspectX?(inspectPrimary?"X1":"X2"):(inspectPrimary?"Y1":"Y2");retVal={LowOffset:0,HighOffset:0};len=rendererArray.length;for(i=0;i<len;++i){if(rendererArray[i]){rendererArray[i].getMaxElementOffsetClippedByBoundary(retVal,inspectX,inspectPrimary);}}clippedSize[newKey]=retVal;}}return clippedSize[clippedMarkerKey];}});}());