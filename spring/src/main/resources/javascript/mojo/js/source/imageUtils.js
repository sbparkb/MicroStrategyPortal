(function(){mstrmojo.imageUtils=mstrmojo.provide("mstrmojo.imageUtils",{compress:function(sourceImage,quality,outputFormat){var mimeType="image/jpeg";if(outputFormat==="png"||outputFormat==="image/png"){mimeType="image/png";}var qualityValue=parseInt(quality);qualityValue=qualityValue>1&&qualityValue<=100?qualityValue:100;var cvs=document.createElement("canvas");if(!!(cvs.getContext&&cvs.getContext("2d"))){cvs.width=sourceImage.naturalWidth;cvs.height=sourceImage.naturalHeight;cvs.getContext("2d").drawImage(sourceImage,0,0);var newImageData=cvs.toDataURL(mimeType,qualityValue/100);var resultImage=new Image();resultImage.src=newImageData;return resultImage;}return sourceImage;},dataURLToBlob:function(dataURL){var BASE64_MARKER=";base64,",parts,contentType,raw;dataURL=dataURL||"";if(dataURL.indexOf(BASE64_MARKER)===-1){parts=dataURL.split(",");contentType=parts[0].split(":")[1];raw=decodeURIComponent(parts[1]);return new Blob([raw],{type:contentType});}parts=dataURL.split(BASE64_MARKER);contentType=parts[0].split(":")[1];raw=window.atob(parts[1]);var rawLength=raw.length;var uInt8Array=new Uint8Array(rawLength);for(var i=0;i<rawLength;++i){uInt8Array[i]=raw.charCodeAt(i);}return new Blob([uInt8Array],{type:contentType});}});})();