(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.android.ui._CanBeFullScreen","mstrmojo.android.ui.ActionToolbar","mstrmojo.android.ui.TitleLabel","mstrmojo.android.ui.Image","mstrmojo.hash","mstrmojo.array","mstrmojo.css");var $HASH=mstrmojo.hash,$ARR=mstrmojo.array,$CSS=mstrmojo.css;var $AB=mstrmojo.android.ui.ActionBar=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.android.ui._CanBeFullScreen],{scriptClass:"mstrmojo.android.ui.ActionBar",markupString:'<div id="{@id}" class="mstrmojo-ActionBar {@cssClass}" style="{@cssText}" ><div><div class="mstrmojo-ActionBar-logo"></div><div><div class="mstrmojo-ActionBar-contents"></div></div><div class="mstrmojo-ActionBar-toolbar"></div></div></div>',markupSlots:{logoNode:function(){return this.domNode.firstChild.firstChild;},containerNodeWrapper:function(){return this.domNode.firstChild.childNodes[1];},containerNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},toolbarNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},layoutConfig:{h:{logoNode:"56px",containerNodeWrapper:"56px",containerNode:"56px",toolbarNode:"56px"},w:{logoNode:"66px",containerNodeWrapper:"100%",containerNode:"100%",toolbarNode:"auto"}},children:[{scriptClass:"mstrmojo.android.ui.Image",slot:"logoNode",alias:"logo",onactiveChange:function(){$CSS.toggleClass(this.domNode,"active",this.active);},touchTap:function(){mstrApp.closeAllDialogs();if(this.active){var domNode=this.domNode,cls="selected";$CSS.addClass(domNode,cls);this.parent.controller.goUp();window.setTimeout(function(){$CSS.removeClass(domNode,cls);},500);}}},{scriptClass:"mstrmojo.android.ui.TitleLabel",slot:"containerNode",alias:"title",onlistSelectionMade:function(evt){this.parent.controller.jumpTo(evt.item);}},{scriptClass:"mstrmojo.android.ui.ActionToolbar",slot:"toolbarNode",alias:"toolbar"}],reset:function reset(){this.title.reset();this.toolbar.reset();},setUpStatus:function setUpStatus(isActive){this.logo.set("active",isActive);},setNavigation:mstrmojo.emptyFn,clearNavigation:mstrmojo.emptyFn,restoreNavigation:mstrmojo.emptyFn,selectNavigationItem:function selectNavigationItem(item){var list=this.getNavList(),res=false;$ARR.forEach(list&&list.items,function(btn,idx){if(item.act===btn.act){list.singleSelect(idx);res=true;return false;}});return res;},getNavList:mstrmojo.emptyFn,hasNavigationItems:function hasNavigationItems(){return this.getNavList().items.length>0;},setLastOpened:function setLastOpened(items){this.title.setListItems(items);},updateTitle:function updateTitle(text){this.title.setText(text);},updateToolbar:function updateToolbar(id,tbCfg){this.toolbar.setActions(id,tbCfg);this.title.checkTextFit();},setActionToolbarStatus:function setActionToolbarStatus(isActive){this.toolbar.set("active",isActive);},onEnterFullScreen:function onEnterFullScreen(){this.reset();}});$AB.adjustLayoutConfig=function(dpi,isTablet){var $DPI_MANAGER=mstrmojo.DPIManager;$HASH.forEach($AB.prototype.layoutConfig.h,function(value,slot){$DPI_MANAGER.registerClass($AB,"h",slot,dpi);});var widthDpi=$HASH.copy(dpi);if(isTablet){$HASH.forEach(widthDpi,function(value,key){widthDpi[key]=Math.ceil(value*1.333);});}$DPI_MANAGER.registerClass($AB,"w","logoNode",widthDpi);};}());