(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.color");var SELECTED_COLOR=[127,206,255];var HIGHLIGHTED_COLOR=[216,230,239];var highlight=function(colorStr,highlightRgb){if(!colorStr||colorStr==="transparent"){colorStr="#FFFFFF";}var rgb=mstrmojo.color.hex2rgb(colorStr),r,g,b;if(!highlightRgb){r=Math.round((3/5)*parseInt(rgb[0])+110);g=Math.round((3/5)*parseInt(rgb[1])+110);b=Math.round((3/5)*parseInt(rgb[2])+110);}else{r=rgb[0]*highlightRgb[0]/255;g=rgb[1]*highlightRgb[1]/255;b=rgb[2]*highlightRgb[2]/255;var luminosity=rgb[0]*0.3+rgb[1]*0.59+rgb[2]*0.11;if(luminosity<85){r=r+(63*((85-luminosity)/85));if(r>255){r=255;}g=g+(63*((85-luminosity)/85));if(g>255){g=255;}b=b+(96*((85-luminosity)/85));if(b>255){b=255;}}}return"#"+mstrmojo.color.rgb2hex(r,g,b);};var changeColor=function(el,widget,ct){if(el&&el.style){el.style.backgroundColor=widget["bg"+ct+"Color"]||"";el.style.color=widget["text"+ct+"Color"]||"";}};mstrmojo.LinkItemRenderer=mstrmojo.hash.copy({render:function(item,idx,widget){var nAll=item.v!=="u;"?" nAll":"";return'<input mstridx="'+idx+'" class="'+widget.itemCssClass+(widget.selectedIndices[idx]?" "+widget.itemSelectedCssClass:"")+nAll+'" style="'+widget.itemCssText+" color:"+(widget.selectedIndices[idx]?widget.textSelectedColor:widget.textNormalColor)+"; background-color:"+(widget.selectedIndices[idx]?widget.bgSelectedColor:widget.bgNormalColor)+';" type="button"  value="'+item[widget.itemDisplayField]+'"  onmouseover="mstrmojo.all.'+widget.id+".onmouseover(self, "+idx+')" onmouseout="mstrmojo.all.'+widget.id+".onmouseout(self, "+idx+')"/>';},select:function(el,item,idx,widget){el.className+=" selected";changeColor(el,widget,"Selected");},unselect:function(el,item,idx,widget){el.className=el.className.replace(/selected/g,"");changeColor(el,widget,"Normal");},highlight:function(el,item,idx,widget){var ct=widget.selectedIndices[idx]?"Selected":"Highlighted";changeColor(el,widget,ct);},unhighlight:function(el,item,idx,widget){var ct=widget.selectedIndices[idx]?"Selected":"Normal";changeColor(el,widget,ct);}},mstrmojo.hash.copy(mstrmojo.DivItemRenderer));mstrmojo._RendersItemLinks=mstrmojo.hash.copy({onmouseover:function(win,idx){if(isNaN(idx)||idx<0){return ;}var el=this._getItemNode(idx);this.itemRenderer.highlight(el,this.items[idx],idx,this);},onmouseout:function(win,idx){if(isNaN(idx)||idx<0){return ;}var el=this._getItemNode(idx);this.itemRenderer.unhighlight(el,this.items[idx],idx,this);},preBuildRendering:function(){this.bgNormalColor=this["background-color"]||this.parent&&this.parent["background-color"];this.bgSelectedColor=this.parent&&this.parent.defn&&this.parent.defn.ssc;if(this.bgSelectedColor!=null){if(this.bgSelectedColor==="transparent"){this.bgHighlightedColor=mstrmojo.LinkList.dftTrptBgHltColor;}else{this.bgHighlightedColor=highlight(this.bgSelectedColor);}}else{this.bgSelectedColor=highlight(this.bgNormalColor,SELECTED_COLOR);this.bgHighlightedColor=highlight(this.bgNormalColor,HIGHLIGHTED_COLOR);}this.textSelectedColor=(this.bgSelectedColor==="transparent")?mstrmojo.LinkList.dftTrptTxSelColor:mstrmojo.color.getContrastingColor(this.bgSelectedColor,"#ffffff","#000000");this.textHighlightedColor=(this.bgSelectedColor==="transparent")?mstrmojo.LinkList.dftTrptTxHltColor:mstrmojo.color.getContrastingColor(this.bgHighlightedColor,"#ffffff","#000000");this.textNormalColor=this.color;if(this._super){this._super();}}},mstrmojo.hash.copy(mstrmojo._RendersItemDivs));mstrmojo._RendersItemLinks.itemRenderer=mstrmojo.LinkItemRenderer;mstrmojo.requiresCls("mstrmojo.ListBox");mstrmojo.LinkList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersItemLinks],{scriptClass:"mstrmojo.LinkList",cssClass:"mstrmojo-LinkList",itemCssClass:"mstrmojo-LinkList-item",selectionPolicy:"toggle"});mstrmojo.LinkList.dftTrptBgHltColor="#FFFFFF";mstrmojo.LinkList.dftTrptTxSelColor="#FFFFFF";mstrmojo.LinkList.dftTrptTxHltColor="#000000";mstrmojo.requiresCls("mstrmojo.ListBoxHoriz");mstrmojo.LinkListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersItemLinks],{scriptClass:"mstrmojo.LinkListHoriz",cssClass:"mstrmojo-LinkListHoriz",itemCssClass:"mstrmojo-LinkListHoriz-item",selectionPolicy:"toggle"});})();