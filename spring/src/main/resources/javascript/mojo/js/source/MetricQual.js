(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo._HasPopup","mstrmojo.css");var _C=mstrmojo.css,_E=mstrmojo.expr,_F=_E.FN;mstrmojo.MetricQual=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.MetricQual",data:null,betweenText:"and",markupString:'<div class="mstrmojo-cond mstrmojo-MetricQual"><span class="mstrmojo-cond-text" mstrAttach:click><span class="mstrmojo-text mstrmojo-metric"></span><span class="mstrmojo-text mstrmojo-fn"></span><span class="mstrmojo-text mstrmojo-m2"></span><span class="mstrmojo-text mstrmojo-c1"></span><span class="mstrmojo-text mstrmojo-btwn">{@betweenText}</span><span class="mstrmojo-text mstrmojo-c2"></span></span><span class="mstrmojo-cond-popupNode"></span><span class="mstrmojo-onhover mstrmojo-topright mstrmojo-cond-tools"><img class="mstrmojo-del" src="../images/1ptrans.gif" /></span></div>',markupSlots:{metricNode:function(){return this.domNode.firstChild.firstChild;},fnNode:function(){return this.domNode.firstChild.childNodes[1];},m2Node:function(){return this.domNode.firstChild.childNodes[2];},c1Node:function(){return this.domNode.firstChild.childNodes[3];},btwnNode:function(){return this.domNode.firstChild.childNodes[4];},c2Node:function(){return this.domNode.firstChild.lastChild;},popupNode:function(){return this.domNode.childNodes[1];}},markupMethods:{ondataChange:function(){var d=this.data;this.metricNode.innerHTML=(d&&d.m&&d.m.n!=null)?d.m.n:"";this.fnNode.innerHTML=(d&&d.fn!=null)?_E.fnName(d.et,d.fn,d.fnt,_E.DTP.REAL):"";var mc=(d.et===_E.ET.MC),cc=mc?0:_E.fnCstCount(d&&d.fn,d&&d.fnt);for(var i=1;i<3;i++){var el=this["c"+i+"Node"],b=i<=cc;if(b){var v=d&&d.cs&&d.cs[i-1]&&d.cs[i-1].v;el.innerHTML=(v!=null)?v:"";}el.style.display=b?"inline":"none";}this.btwnNode.style.display=(cc>1)?"inline":"none";if(mc){this.m2Node.innerHTML=(d&&d.m2&&d.m2.n!=null)?d.m2.n:"";}this.m2Node.style.display=mc?"inline":"none";},onselectedChange:function(){_C.toggleClass(this.domNode,["selected"],this.selected);}}});})();