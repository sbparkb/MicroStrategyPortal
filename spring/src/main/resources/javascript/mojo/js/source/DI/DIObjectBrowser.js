(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout");mstrmojo.requiresDescs(39,12545);var fileIcons={"application/vnd.google-apps.spreadsheet":"mstrmojo-di-tree-node-icon google-spreadsheet","application/vnd.ms-excel":"mstrmojo-di-tree-node-icon excel-doc","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"mstrmojo-di-tree-node-icon excel-doc","text/csv":"mstrmojo-di-tree-node-icon csv-doc","text/plain":"mstrmojo-di-tree-node-icon text-doc",file:"mstrmojo-di-tree-node-icon ga-document",graph:"mstrmojo-ListIcon  t3 st769",gridGraph:"mstrmojo-ListIcon  t3 st774",cube:"mstrmojo-ListIcon  t3 st776",grid:"mstrmojo-ListIcon  t3 st768"};function compare(a,b){var str1=a.n.toLowerCase(),str2=b.n.toLowerCase();if((a.isFolder&&b.isFolder)||(!a.isFolder&&!b.isFolder)){if(str1<str2){return -1;}if(str1>str2){return 1;}return 0;}if(a.isFolder&&!b.isFolder){return -1;}if(!a.isFolder&&b.isFolder){return 1;}}mstrmojo.DI.DIObjectBrowser=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.DI.DIObjectBrowser",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"><div></div><div></div></div>',markupSlots:{listHeaderNode:function(){return this.domNode.children[0];},listNode:function(){return this.domNode.children[1];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},canRefresh:false,children:[{scriptClass:"mstrmojo.List",slot:"listHeaderNode",itemMarkupFunction:function(item,idx,w){var refreshButtonHTML=w.parent.canRefresh?'<div class="di-refresh-reports icon-clickable di-object-browser-header-right" mstrAttach:click></div>':"";return'<div><table cellpadding="0" cellspacing="0" style="width: 100%;"><tr><td class="mstrmojo-di-so-list-header cf" style="width: 30%;"><div class="di-object-browser-header-left">'+item.n+"</div>"+refreshButtonHTML+'</td><td class="mstrmojo-di-so-list-header" style="width: 70%;">'+item.desc+"</td></tr></table></div>";},items:[{n:mstrmojo.desc(12545,"Files"),desc:mstrmojo.desc(39,"Description")}],onmousedown:function(evt){if(evt.e.target.className==="di-refresh-reports icon-clickable di-object-browser-header-right"){this.parent.clickedNode=this.parent.fileTree;this.parent.refreshFunction();}}},{scriptClass:"mstrmojo.DI.DITree",alias:"fileTree",slot:"listNode",cssClass:"mstrmojo-di-ga-table",bindings:{isMultiSelect:"this.parent.isMultiSelect"}}],browseFunction:mstrmojo.emptyFn(),editFunction:mstrmojo.emptyFn(),refreshFunction:mstrmojo.emptyFn(),clickedNode:null,fileList:null,sortRoot:true,isMultiSelect:false,forceEnableContinue:false,onfileListChange:function(){var i,j,items=[],cItems,tn,tcn;var list=this.fileList;var self=this;for(i=0;i<list.length;i++){var item=list[i];item.clickHandler=self.onTreeNodeClick;item.list=self.fileTree;item.browser=self;if(this.clickedNode.data){var parentFolder=this.clickedNode.data.folderPath||"";item.folderPath=parentFolder+"/"+this.clickedNode.data.n;}if(!item.isFolder){item.editHandler=self.onEditButtonClick;item.iconEntity=fileIcons[item.type]||fileIcons["text/plain"];}tn=new mstrmojo.DI.DITreeNode(item);if(item.cItem){cItems=[];for(j=0;j<item.cItem.length;j++){var cItem=item.cItem[j];cItem.clickHandler=self.onTreeNodeClick;cItem.list=self.fileTree;cItem.browser=self;cItem.iconEntity="mstrmojo-di-tree-node-icon salesforce";tcn=new mstrmojo.DI.DITreeNode(cItem);cItems.push(tcn);}cItems.sort(compare);tn.set("items",cItems);tn.fetched=true;}items.push(tn);}if(this.sortRoot){items.sort(compare);}this.clickedNode.set("items",items);this.clickedNode.selectedItem=null;this.clickedNode.selectedNode=null;},onEditButtonClick:function onEditButtonClick(node){node.data.browser.editFunction(node);},onTreeNodeClick:function onTreeNodeClick(node){if(node.data.isFolder){node.data.browser.clickedNode=node;node.data.browser.browseFunction(node);}else{this.data.list.selectedItem=node.data;mstrApp.getRootController().sourceSelected(this.data.list.selectedNodes.length>0||node.data.browser.forceEnableContinue);}},postBuildRendering:function postBuildRendering(){if(this._super){this._super();}this.clickedNode=this.fileTree;},setDimensions:function setDimensions(h,w){var height=parseInt(h,10);var width=parseInt(w,10);if(isNaN(height)||isNaN(width)){return ;}if(!this.layoutConfig){this.layoutConfig={h:{},w:{}};}this.layoutConfig.h.listHeaderNode="28px";this.layoutConfig.w.listHeaderNode=width+"px";this.layoutConfig.w.listNode=Math.max(width,0)+"px";if(this._super){this._super(height+"px",w);}}});}());