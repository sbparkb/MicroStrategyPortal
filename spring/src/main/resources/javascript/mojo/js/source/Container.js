(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.array","mstrmojo._HasChildren");var $ARR=mstrmojo.array;function disableChildren(children){if(!this.shouldPropagateEnabled){return ;}var disabledCollection=this._disabledChildren;$ARR.forEach(children,function(child){if(child.enabled){disabledCollection.push(child.id);child.set("enabled",false);}});}function enableChildren(){$ARR.forEach(this._disabledChildren,function(childId){var child=mstrmojo.all[childId];if(child&&child.parent===this){child.set("enabled",true);}},this);this._disabledChildren=[];}mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",containerNode:null,preserveChildDomOrder:true,shouldPropagateEnabled:false,init:function init(props){this._super(props);this._disabledChildren=[];this.attachEventListener("addChild",this.id,function(evt){if(this.shouldPropagateEnabled&&!this.enabled){disableChildren.call(this,evt.value);}});if(this.children){this.initChildren();}var parent=this.parent;if(!parent||parent.hasInitBindings){this.initBindings();}},destroy:function dst(skipCleanup){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(skipCleanup);},unrender:function unrender(ignoreDom){var c=this.children,len=(c&&c.length)||0,i;for(i=len-1;i>-1;i--){c[i].unrender(true);}this._super(ignoreDom);},postBuildRendering:function postBuildRendering(){if(this._super()!==false){this.renderChildren();return true;}return false;},renderChildren:function renderChildren(){var ch=this.children,len=(ch&&ch.length)||0,i;for(i=0;i<len;i++){var c=ch[i];if(this.childRenderCheck(c)){c.render();}}},childRenderCheck:function childRenderCheck(c){if(c&&!c.hasRendered){var s=c.slot||this.defaultChildSlot;return !!this[s];}return false;},addChildren:function addChildren(c,idx,silent){var arr=this._super(c,idx,silent);if(arr){this.childRenderOnAddCheck(arr);}return arr;},removeChildren:function removeChildren(c,silent){var c2r=c?[c]:(this.children||[]),len=c2r.length,i;for(i=len-1;i>-1;i--){var w=c2r[i],dn=w&&w.domNode;if(dn){var s=this[(w.slot||this.defaultChildSlot)];if(dn.parentNode===s){s.removeChild(dn);}}}return this._super(c,silent);},childRenderOnAddCheck:function childRenderOnAddCheck(ch){if(this.hasRendered&&ch){var len=ch.length,i;for(i=0;i<len;i++){var c=ch[i];if(this.childRenderCheck(c)){c.render();}else{if(c&&c.hasRendered){this.onchildRenderingChange(c);}}}}},onchildRenderingChange:function onchildRenderingChange(child){var d=child&&child.domNode;if(!d){return ;}var defaultChildSlot=this.defaultChildSlot,childSlot=child.slot||defaultChildSlot,slot=this[childSlot],children=this.children;if(!slot){if(d.parentNode){d.parentNode.removeChild(d);}}else{if(d.parentNode===slot){return ;}if(!this.preserveChildDomOrder){slot.appendChild(d);}else{var sib,i;for(i=children.length-1;i>=0;i--){var c=children[i];if(c===child){break;}if(childSlot===(c.slot||defaultChildSlot)){var cNode=c.domNode;if(cNode&&cNode.parentNode===slot){sib=cNode;}}}if(sib){slot.insertBefore(d,sib);}else{slot.appendChild(d);}}}if(mstrmojo.publisher.hasSubs(this.id,"childrenRendered")){var childrenLength=children.length,k;for(k=0;k<childrenLength;k++){if(!children[k].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}},propagateChildProps:function propagateChildProps(propName){var containerProp=this[propName],children=this.children||[],childCount=children.length,i;for(i=0;i<childCount;i++){children[i].set(propName,containerProp);}}});mstrmojo.Container.enabledMarkupMethod=function(){mstrmojo.Widget.enabledMarkupMethod.apply(this,arguments);if(this.shouldPropagateEnabled){if(this.enabled){enableChildren.call(this);}else{disableChildren.call(this,this.children);}}};}());