mstrFolderTreeViewImplScript=true;mstrFolderTreeViewImpl.prototype=new mstrTreeViewImpl();mstrFolderTreeViewImpl.prototype.folderBeanPath;mstrFolderTreeViewImpl.prototype.inlineRenameObject=null;mstrFolderTreeViewImpl.prototype.folderHref=null;mstrFolderTreeViewImpl.prototype.serverName=null;mstrFolderTreeViewImpl.prototype.projectName=null;mstrFolderTreeViewImpl.prototype.portNum=null;mstrFolderTreeViewImpl.prototype.processRename=function(){try{if(this.inlineRenameObject){this.inlineRenameObject.processRename(this.folderBeanPath);this.inlineRenameObject=null;}this.currentContextMenuNode.parentNode.className="";}catch(err){microstrategy.errors.log(err);return false;}};mstrFolderTreeViewImpl.prototype.cancelRename=function(){try{if(this.inlineRenameObject){this.inlineRenameObject.cancelRename();this.inlineRenameObject=null;}this.currentContextMenuNode.parentNode.className="";}catch(err){microstrategy.errors.log(err);return false;}};mstrFolderTreeViewImpl.prototype.getNameTag=function(){try{var span=this.currentContextMenuNode.firstChild;return span;}catch(err){microstrategy.errors.log(err);return false;}};mstrFolderTreeViewImpl.prototype.enableRenameField=function(){try{if(this.currentContextMenuNode){this.inlineRenameObject=new mstrInlineRenameImpl();this.inlineRenameObject.parentBone=this;var objectId=this.currentContextMenuNode.getAttribute("did");var objectType=this.currentContextMenuNode.getAttribute("type");this.inlineRenameObject.enableRenameField(objectType,objectId);this.currentContextMenuNode.parentNode.className="edit";}}catch(err){microstrategy.errors.log(err);return false;}};mstrFolderTreeViewImpl.prototype.onActionItemClick=function(action){try{if(!this.currentContextMenuNode){return ;}var objectId="";var objectType="";if(this.currentContextMenuNode.getAttribute("isSC")=="true"){objectId=this.currentContextMenuNode.getAttribute("sc_id");objectType="18";}else{objectId=this.currentContextMenuNode.getAttribute("did");objectType=this.currentContextMenuNode.getAttribute("type");}mstrFolderActions.submitShowBeanEvent(action,objectId,objectType);}catch(err){microstrategy.errors.log(err);return false;}};mstrFolderTreeViewImpl.prototype.isCreateDocumentMenuItemAvailable=function(){try{if(this.currentContextMenuNode==null){return false;}var objectType=this.currentContextMenuNode.getAttribute("type");if(objectType==microstrategy.DSSTYPE_RPT_DEFINITION){var subtype=this.currentContextMenuNode.getAttribute("subtype");return(subtype!=772&&subtype!=776);}return false;}catch(err){microstrategy.errors.log(err);return false;}};mstrFolderTreeViewImpl.prototype.findParentFolder=function(node){try{var parentFolder=this.findParentTreeNode(node);while(parentFolder&&parentFolder.getAttribute("type")!=8){parentFolder=findParentTreeNode(parentFolder);}return parentFolder;}catch(err){microstrategy.errors.log(err);return null;}};mstrFolderTreeViewImpl.prototype.isMenuItemAvailable=function(menuItem){try{if(this.currentContextMenuNode==null){return false;}var checkAttr;var parentFolder=this.findParentFolder(this.currentContextMenuNode);switch(menuItem){case"delete":return(this.currentContextMenuNode.getAttribute(mstrHTMLAttributes.ATTR_CAN_DELETE)=="true");case"move":checkAttr=mstrHTMLAttributes.ATTR_CAN_MOVE;return(this.currentContextMenuNode.getAttribute(checkAttr)=="true"&&parentFolder&&parentFolder.getAttribute(mstrHTMLAttributes.ATTR_CAN_REMOVE_CHILD)=="true");case"rename":return(this.currentContextMenuNode.getAttribute(mstrHTMLAttributes.ATTR_CAN_RENAME)=="true");case"create-shortcut":return(this.currentContextMenuNode.getAttribute(mstrHTMLAttributes.ATTR_CAN_CREATE_SHORTCUT)=="true");case"copy":return(this.currentContextMenuNode!=null&&this.currentContextMenuNode.getAttribute(mstrHTMLAttributes.ATTR_CAN_COPY)=="true");default:return true;}}catch(err){microstrategy.errors.log(err);return false;}};mstrFolderTreeViewImpl.prototype.onDeleteMenuItemClick=function(){try{if(!this.currentContextMenuNode){return ;}var objectId="";var objectType="";var isSC=false;if(this.currentContextMenuNode.getAttribute("isSC")=="true"){objectId=this.currentContextMenuNode.getAttribute("sc_id");objectType="18";isSC=true;}else{objectId=this.currentContextMenuNode.getAttribute("did");objectType=this.currentContextMenuNode.getAttribute("type");}var anchor=this.util_getChildNode(this.currentContextMenuNode,"A");var objectName;if(anchor){objectName=anchor.innerHTML;}mstrFolderActions.actionConfirmDelete(objectId,objectType,objectName,this.folderBeanPath,isSC);}catch(err){microstrategy.errors.log(err);return false;}};mstrFolderTreeViewImpl.prototype.onNewCreateObjectMenuClick=function(menuItem,args){try{var objectId=this.currentContextMenuNode.getAttribute("did");mstrFolderActions.actionNewMenuItemClick(menuItem,objectId,args);}catch(err){microstrategy.errors.log(err);return false;}};mstrFolderTreeViewImpl.prototype.onClickTree=function(e){if(!e){e=window.event;}if(this.treeProcessing){e.returnValue=false;return ;}var oTarget=getEventTarget(e);if(oTarget==null){return false;}if(oTarget.tagName!=null&&(oTarget.tagName=="DIV"||oTarget.tagName=="UL")){return false;}mstrTreeViewImpl.prototype.onClickTree.call(this,e);};mstrFolderTreeViewImpl.prototype.showShareLink=function(appendStr){var anchor=this.util_getChildNode(this.currentContextMenuNode,"A"),objectId=this.currentContextMenuNode.getAttribute("did"),objectType=this.currentContextMenuNode.getAttribute("type"),objectName=this.currentContextMenuNode.textContent;if(!objectName){objectName=this.currentContextMenuNode.innerText;}var URL=anchor.href;if(appendStr){URL+=appendStr;}microstrategy.showSharingEditor(URL,{objectName:objectName,objId:objectId,objType:objectType,mid:-1});};function mstrFolderTreeViewImpl(id){this.inherits=mstrTreeViewImpl;this.inherits(id);delete this.inherits;return this;}