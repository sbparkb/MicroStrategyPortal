mstrEntitySelectorImplScript=true;mstrEntitySelectorImpl.prototype=new mstrEditorImpl();mstrEntitySelectorImpl.prototype.initializing=false;mstrEntitySelectorImpl.prototype.childCart=null;mstrEntitySelectorImpl.prototype.selectionType=null;mstrEntitySelectorImpl.prototype.browserPath=null;mstrEntitySelectorImpl.prototype.projectId=null;mstrEntitySelectorImpl.prototype.onload=function(){try{this.initializing=true;this.initEditor();this.initSettings();this.initializing=false;}catch(err){microstrategy.errors.log(err);return false;}};mstrEntitySelectorImpl.prototype.initSettings=function(){try{this.getCart();}catch(err){microstrategy.errors.log(err);return false;}};mstrEntitySelectorImpl.prototype.getCart=function(){try{if(this.childCart==null){var cart=microstrategy.objectListFind(this.elem,["DIV"],"cart");if(cart){this.childCart=microstrategy.findBone(cart[0]);}}return this.childCart;}catch(err){microstrategy.errors.log(err);return false;}};mstrEntitySelectorImpl.prototype.resetCart=function(){try{this.childCart=null;}catch(err){microstrategy.errors.log(err);return false;}};mstrEntitySelectorImpl.prototype.getBrowserPath=function(){try{if(this.browserPath==null){this.browserPath=this.beanPath;}return this.browserPath;}catch(err){microstrategy.errors.log(err);return false;}};mstrEntitySelectorImpl.prototype.exec=function(cmdId,cmdVal){try{switch(cmdId){case"search":var searchType=(this.selectionType==0)?"1":"";var action=microstrategy.updateManager.createActionObject(this.elem,mstrUpdateManager.SEARCH_SELECTOR_ELEMENTS,this.getBrowserPath(),["91303","91304"],[cmdVal,searchType]);microstrategy.updateManager.add([action]);break;default:return false;}return true;}catch(err){microstrategy.errors.log(err);return false;}};mstrEntitySelectorImpl.prototype.changeProject=function(oCombo){try{this.applyChanges();var projId=oCombo.value;var action=microstrategy.updateManager.createActionObject(this.elem,mstrUpdateManager.SET_SECURITY_ROLE_PROJECT_ID,this.beanPath,["91309"],[projId]);microstrategy.updateManager.add([action]);microstrategy.updateManager.addURL("isProjectRequest=true");microstrategy.updateManager.flushAndSubmitChanges();}catch(err){microstrategy.errors.log(err);return false;}};mstrEntitySelectorImpl.prototype.applyChanges=function(){try{var cart=this.getCart();if(this.isNew||(this.getCart()&&this.getCart().hasChanged)){this.isNew=false;var selected=this.getCart().selected;if(selected){var argNames=new Array();var argValues=new Array();var event=this.setEvent;var selectedList="";var options=selected.options;for(var i=0;i<options.length;i++){if(options[i].value!="-none-"){if(selectedList.length>0){selectedList+=this.delimiter;}selectedList+=options[i].value;}}this.resetCart();if(selectedList.length>0){argNames.push("91307");argValues.push(selectedList);}else{event=this.clearEvent;}argNames.push("91308");argValues.push("0");if(this.selectionType!=null){argNames.push("91302");argValues.push(this.selectionType);}if(this.projectId!=null){argNames.push("91309");argValues.push(this.projectId);}var action=microstrategy.updateManager.createActionObject(this.elem,event,this.beanPath,argNames,argValues);microstrategy.updateManager.add([action]);}}}catch(err){microstrategy.errors.log(err);return false;}};function mstrEntitySelectorImpl(id){this.inherits=mstrEditorImpl;this.inherits(id);delete this.inherits;return this;}