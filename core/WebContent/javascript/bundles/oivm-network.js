mstrmojo.vi.viz.EnumWidgetTypes={GRID:0,GRAPH_MATRIX:1,HEATMAP:2,NETWORK:3,IMAGELAYOUT:4,ESRIMAP:5,GOOGLEMAP:6,CUSTOM:7};mstrmojo.chart.enums.EnumGraphMajorType={GMT_INVALID:0,GMT_CATEGORY:1,GMT_PIE:2,GMT_SCATTER:3,GMT_POLAR:4,GMT_RADAR:5,GMT_BUBBLE:6,GMT_STOCK:7,GMT_HISTOGRAM:8,GMT_GAUGE:9,GMT_FUNNEL:10,GMT_BOX:11,GMT_GANTT:12,GMT_SPECTRAL:13,GMT_TABLE:14,GMT_3D_CATEGORY:15,GMT_3D_SCATTER:16,GMT_GRID:17};mstrmojo.chart.model.enums.EnumDSSGraphDataTextShowType={DssGraphDataTextNone:0,DssGraphDataTextValue:1,DssGraphDataTextLabel:2,DssGraphDataTextBoth:3,DssGraphDataTextAbs:4,DssGraphDataTextAbsValue:5,DssGraphDataTextAbsBoth:7,DssGraphDataTextTotal:8,DssGraphDataTextZValue:16,DssGraphDataTextPercent:32,DssGraphDataTextYValue:64,DssGraphDataTextInternal:128,DssGraphDataTextSeriesDependent:256,DssGraphDataTextQualityObjectMode:512};mstrmojo.vi.viz.EnumVizStyles={GRAPH_MATRIX:"GraphMatrixVisualizationStyle",NETWORK:"NetworkVisualizationStyle",HEAT_MAP:"VIHeatMapVisualizationStyle",GOOGLE_MAP:"GoogleMapVisualizationStyle",ESRI_MAP:"ESRIMapVisualizationStyle",IMAGE_LAYOUT:"ImageLayoutVisualizationStyle"};mstrmojo.VisEnum={ControlType:{BUTTON:"button",LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",SPLITTER:"splitter",GM_ROW_HEADER:"rh",GM_ROW_HEADER_TEXT:"rhtext",GM_ROW_HEADER_EXTRA:"rhext",GM_COL_HEADER:"ch",GM_COL_HEADER_TEXT:"chtext",GM_COL_HEADER_EXTRA:"chext",GM_YAXIS:"y",GM_XAXIS:"x",GM_YLABEL:"y-label",GM_XLABEL:"x-label",GM_ROW_HEADER_TITLE:"rht",GM_ROW_HEADER_TITLE_TEXT:"rhttext",GM_COL_HEADER_TITLE:"cht",GM_COL_HEADER_TITLE_TEXT:"chttext",GM_MINI_CHART:"chart",GM_TEXT_BODY:"text-body",GM_SHAPE:"shape",GM_MARKER:"marker",GM_SET_SHAPE:"set-shape",GM_YAXIS2:"y2",GM_XAXIS2:"x2",GM_TREND_LINE:"trendLine",GM_TREND_LINE_HOVER:"trendLineHover",GM_TREND_LINE_SELECT:"trendLineSelect",GM_REF_LINE:"referenceLine",GM_REF_LINE_HOVER:"referenceLineHover",GM_REL_LINE_SELECT:"referenceLineSelect",GM_HIGHLIGHT_BOX:"highlight-box",GM_AXIS_TEXT:"axis-text",GM_AXIS_WORD:"axis-word",GM_SVG_X_NUMERIC:"svg-x-numeric",GM_SVG_X_CATEGORY:"svg-x-category",GM_SVG_Y_NUMERIC:"svg-y-numeric",GM_SVG_Y_CATEGORY:"svg-y-category",GM_X_NUMERIC:"x-numeric",GM_X_CATEGORY:"x-category",GM_Y_NUMERIC:"y-numeric",GM_Y_CATEGORY:"y-category",GM_SVG_CHART:"svg-chart",GM_DATA_LABEL:"data-label",GM_YAXIS_LINE:"y-line",GM_XAXIS_LINE:"x-line",GM_YAXIS2_LINE:"y2-line",GM_XAXIS2_LINE:"x2-line",LGD_TITLE:"lgd-title",LGD_TEXT:"lgd-text",LGD_COLORBOX:"lgd-colorbox",LGD_COLORBOX_CTN:"lgd-colorbox-ctn",LGD_CANVAS:"lgd-canvas",LINE_CONTAINER:"line-ctn",GM_V_MATRIX_LINE:"v-line",GM_H_MATRIX_LINE:"h-line",GM_V_CHART_LINE:"v-ctline",GM_H_CHART_LINE:"h-ctline",GM_CHART_ROW:"ct-row",GM_CHART_COL:"ct-col",GM_H_GRID_LINE:"h-gline",GM_V_GRID_LINE:"v-gline",GM_H_MINOR_GRID_LINE:"h-gline-minor",GM_V_MINOR_GRID_LINE:"v-gline-minor",GM_ORIGIN_LINE:"originLine",GM_ORIGIN_LABEL:"origin-label",GM_ORIGIN_LINE_H:"origin-line-h",GM_ORIGIN_LINE_V:"origin-line-v",GM_ORIGIN_LABEL_H:"origin-label-h",GM_ORIGIN_LABEL_V:"origin-label-v",GM_DUMMY_A:"dummy-a",GM_V_EXTRA_LINE:"v-extra-line",GM_REF_LABEL:"ref-label",GM_RIGHT_BORDER:"border-r",GM_BOTTOM_BORDER:"border-b"},GMDropZoneID:{ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10},NETWORK_LOCAL_PROPS:{ZOOM_FACTOR:"zf",NODE_POSITION:"np"},NETWORK_PROPERTIES:{showLegend:"showLegend",showEdgeDirection:"showedgearrow",showTransition:"animatelayout",nodeSizeAggregation:"nodesizeaggfunc",minNodeSize:"minns",maxNodeSize:"maxns",themeType:"th",circleLabelFont:"BubFnt",modifiedNodes:"mn",layoutMode:"layout",legendPosition:"legendposition",dragMode:"mode",bubbleStyle:"bbs",propsCategory:"pc",lgdBgFillClr:"lgdBgFillClr",lgdBgFillTrans:"lgdBgFillTrans",lgdFntClr:"lgdFntClr",lgdFntSz:"lgdFntSz",lgdFntFml:"lgdFntFml",lgdFntStyle:"lgdFntStyle"},NETWORK_LAYOUT:{CIRCULAR:"circular",LINEAR:"linear",FORCE_DIRECTED:"forceDirected"},NETWORK_DRAG_MODE:{pan:0,select:1},NETWORK_AGGREGATION_METHOD:{"Count of":0,"Sum of":1,"Average of":2,"Min of":3,"Max of":4},NETWORK_MIN_NODE_SIZE_TYPE:{PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3},NETWORK_MAX_NODE_SIZE_TYPE:{AUTOMATIC:1,MANUAL:2},NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE:[0,0.2],HEATMAP_PROPERTIES:{showLegend:"showLegend",deleteButton:"ed",showMetricValues:"mv",labelSize:"lb",layout:"la",themeType:"th",headerType:"he",deletedList:"dl",refreshType:"rt",metricList:"ml",colorByType:"cbt",absoluteFixed:"abs",blendColor:"blc",background:"bg",legendBackground:"lbg",headerColors:"hcl",fonts:"fts",propsCategory:"pc",attrColorByOpacity:"acbo",metricColorByOpacity:"mcbo"},HEATMAP_LABEL_SIZE:{On:0,Off:1,Proportional:2},MAPS_PROPERTIES:{SHOW_LEGEND:"showLegend"},VIS_CARDLIMIT:{GRID:250,NON_GRID:8000},GMLegendDataType:{COLOR_BY:1,SIZE_BY:2},GMLegendFormatingPropertyTag:{LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",COLOR_SQUARE_COLOR:"clrSqrClr"},LegendPropertyTag:{LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr"},EnumLegendMode:{RESTORED:1,MINIMIZED:2},EnumColorRankMode:{INVALID:-1,VALUE:0,TOP:1,BOTTOM:2,TOP_PERCENT:3,BOTTOM_PERCENT:4},FormNameDisplayType:{OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4},SERVER_JSON_ERROR_TYPE:{EMPTY_DATA:0,NO_DATASET:1,AE_ERROR:2,NO_TEMPLATE_UNIT:3},NETWORK_CIRCLE_BORDER_WIDTH:8,IMAGELAYOUT_PROPERTIES:{DISPLAY_MODE:"mt",MAX_SIZE_TYPE:"ty",MAX_SIZE_VALUE:"val",MIN_SIZE_TYPE:"mst",MIN_SIZE_VALUE:"msv",MAP_FILE_PATH:"mf",SHAPE_FILL_OPC_PER:"shapeFillTrans",SHAPE_FILL_COLOR:"shapeClr",SHAPE_BORDER_STYLE:"shapeBorderCmbStyle",SHAPE_BORDER_COLOR:"shapeBorderClr",DATA_LABEL_SWITCH:"dls",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",BLANK_MAP_BORDER_STYLE:"blankMapBorderStyle",BLANK_MAP_BORDER_COLOR:"blankMapBorderClr",BLANK_MAP_COLOR:"blankMapClr",DEFAULT_MAP_COLOR:"dftMapClr",DEFAULT_BUBBLE_COLOR:"dftBubbleClr",DEFAULT_MAP_BORDER_COLOR:"dftMapBorderClr",DEFAULT_BUBBLE_BORDER_COLOR:"dftBubbleBorderClr",LEGEND_FONT_SIZE:"lgFntSz",LEGEND_FONT_FAMILY:"lgFntFml",LEGEND_FONT_COLOR:"lgFntClr",LEGEND_FONT_STYLE:"lgFntStyle",LEGEND_BACKGROUND_COLOR:"lgBgClr",LEGEND_OPC_PER:"lgBgFillTrans",LEGEND_POSITION:"lgPos",LEGEND_SHOW:"lgShow",LEGEND_MODE:"lgMode",LEGEND_SCALE:"lgScale",H_MATRIX_LINE_COLOR:"hMatrixLnClr",V_MATRIX_LINE_COLOR:"vMatrixLnClr",ALL_MATRIX_LINE_COLOR:"allMatrixLnClr",H_MATRIX_LINE_STYLE:"hMatrixLnCmbStyle",V_MATRIX_LINE_STYLE:"vMatrixLnCmbStyle",ALL_MATRIX_LINE_STYLE:"allMatrixLnCmbStyle"}};mstrmojo.gm.GMEnums={};mstrmojo.gm.DualAxisSubAxisBit={PRIMARY:0,SECONDARY:1};mstrmojo.gm.StackExetrmeId={PRIMARY_Y_AXIS:-2,SECONDARY_Y_AXIS:-18,PRIMARY_X_AXIS:-1,SECONDARY_X_AXIS:-17};mstrmojo.gm.FormNameType={OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4};mstrmojo.gm.EnumSelectionOptionLevel={GLOBAL:1,ITSELF:2,ATTS_METRIC_COMBINATION:3,METRIC_AXIS:4,METRIC:5,AXIS:6,COLOR_BY:7,ALL_SHAPE:8,ITSELF_RESOLVED:9};mstrmojo.gm.EnumLabelRotation={VERTICAL:2,HORIZONTAL:0,AUTOMATIC:-1};mstrmojo.gm.EnumIdentityType={LEGEND:Math.pow(2,0),GRAPH_SHAPE:Math.pow(2,1),X_AXIS:Math.pow(2,2),Y_AXIS:Math.pow(2,3),X2_AXIS:Math.pow(2,4),Y2_AXIS:Math.pow(2,5),GRID_LINE:Math.pow(2,6),TREND_LINE:Math.pow(2,7),REF_LINE:Math.pow(2,8),DATA_LABEL:Math.pow(2,9),COLOR_SQUARE:Math.pow(2,10),ROW_TITLE:Math.pow(2,11),COL_TITLE:Math.pow(2,12),ROW_HEADER:Math.pow(2,13),COL_HEADER:Math.pow(2,14),LOG_SCALE:Math.pow(2,15),H_MATRIX_LINE:Math.pow(2,16),V_MATRIX_LINE:Math.pow(2,17),LEGEND_TEXT:Math.pow(2,18),SHAPE_COLLECTION:Math.pow(2,19),MINOR_GRID_LINE:Math.pow(2,20),AXIS_SCALE:Math.pow(2,22),AXIS_ORIGIN:Math.pow(2,23),ROWS_BACKGROUND:Math.pow(2,24),COLS_BACKGROUND:Math.pow(2,25),X_NUMERIC:Math.pow(2,26),X_CATEGORY:Math.pow(2,27),Y_NUMERIC:Math.pow(2,28),Y_CATEGORY:Math.pow(2,29),X_METRIC_AXIS_TITLE:Math.pow(2,30),Y_METRIC_AXIS_TITLE:Math.pow(2,31),VIZ_BOX_TITLE:Math.pow(2,32),REF_LINE_LABEL:Math.pow(2,33),LINE_MARKER:Math.pow(2,34),X_AXIS_ORIGIN_LABEL:Math.pow(2,35),Y_AXIS_ORIGIN_LABEL:Math.pow(2,36),X_AXIS_ORIGIN_LINE:Math.pow(2,37),Y_AXIS_ORIGIN_LINE:Math.pow(2,38),Y_ATTRIBUTE_AXIS_TITLE:Math.pow(2,39),ROW_HEADER_TEXT:Math.pow(2,40),ROW_TITLE_TEXT:Math.pow(2,41),COL_HEADER_TEXT:Math.pow(2,42),COL_TITLE_TEXT:Math.pow(2,43),VIZ_BOX_CONTAINER:Math.pow(2,44),X_ATTRIBUTE_AXIS_TITLE:Math.pow(2,45),AXIS_ORIGIN_DEFINE:Math.pow(2,46)};mstrmojo.gm.EnumGMZoneIds={ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10};mstrmojo.gm.EnumClickType={NONE:-1,LEFT_CLICK:1,RIGHT_CLICK:2,DOUBLE_CLICK:3};mstrmojo.gm.EnumLegendSlot={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8};mstrmojo.gm.EnumAxisType={ATTRIBUTE:0,METRIC:1};mstrmojo.gm.EnumGraphType={UNDEFINED:-1,AREA:1,BAR:2,LINE:3,SCATTER:4,BUBBLE:5,PIE:6,GRID:7};mstrmojo.gm.EnumContextMenu={SEPARATOR:0,KEEP_ONLY:1,EXCLUDE:2,SORT_ASCENDING:3,SORT_DESCENDING:4,CLEAR_SORT:5,SHOW_DATA:6,SWITCH_THEME:7,KEEP_ONLY_AND_SHOW:8,CLOSE_LEGEND:9,OPEN_LEGEND:10,AXIS_SCALE:11,DRILL_TO:100,CHART_TYPE:200,AREA_ABS:201,AREA_STACKED:202,AREA_PERCENT:203,BAR_SBS:204,BAR_ABS:205,BAR_STACKED:206,BAR_PERCENT:207,LINE_ABS:208,LINE_STACKED:209,LINE_PERCENT:210,BUBBLE:211,SCATTER:212,H_AREA_ABS:213,H_AREA_STACKED:214,H_AREA_PERCENT:215,H_BAR_SBS:216,H_BAR_ABS:217,H_BAR_STACKED:218,H_BAR_PERCENT:219,H_LINE_ABS:220,H_LINE_STACKED:221,H_LINE_PERCENT:222,GRID:223,CIRCLE:224,SQUARE:225,PIE:226,TICKER:227,RING:228,CANVAS:229,SVG:230,LARGE_ABL:231,OUTPUT_EXTREMES:232,COMBINATION:233,ENABLE_PARTIAL_RENDERING:234,DISABLE_PARTIAL_RENDERING:235,OUTPUT_DATA_COUNT:236,ENABLE_TIMER:239,DISABLE_TIMER:240,ENABLE_CE_TIMER:241,DISABLE_CE_TIMER:242};mstrmojo.gm.EnumColorRankMode={RANK_MODE_VALUE:0,RANK_MODE_TOP:1,RANK_MODE_BOTTOM:2,RANK_MODE_TOP_PERCENT:3,RANK_MODE_BOTTOM_PERCENT:4};mstrmojo.gm.EnumColorByType={NULL:0,ATT:1,METRICS_ITEM:2,METRICS:3,ATT_METRICS:4};mstrmojo.gm.EnumDockPosition={TOP:1,RIGHT:2,BOTTOM:3,LEFT:4};mstrmojo.gm.EnumXAxisLabelStatus={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};mstrmojo.gm.EnumABLDirection={HORIZONTAL:1,VERTICAL:2};mstrmojo.gm.EnumMetricsPosition={MetricsByRow:0,MetricsByColumn:1,MetricsByAxis:2,MetricsByBreakBy:3,MetricsBySlice:4,MetricsByXAxis:5,MetricsByYAxis:6};mstrmojo.gm.EnumDrawingAPI={GET_CHART_WIDTH:0,GET_CHART_HEIGHT:1,GET_ROW_HEADER:2,GET_COLUMN_HEADER:3,CREATE_UNIT_Y_AXIS:4,CREATE_UNIT_X_AXIS:5,GET_FULL_FLEDGED_CHART:6,GET_ROW_SPAN:7,GET_COLUMN_SPAN:8,GET_METRICS_ON_X:9,GET_METRICS_ON_Y:10,GET_METRICS_ON_SIZE_BY:11,UPDATE_MINI_CHART:12,UPDATE_X_AXIS:13,UPDATE_Y_AXIS:14,MAX_RADIUS_CALC:15,GET_EXTRA_COLUMN_HEADER:16,UPDATE_COLUMN_HEADER:17,UPDATE_ROW_HEADER:18,LAYOUT_ALL_X_AXIS_LABELS:19,LAYOUT_ONE_X_AXIS_LABELS:20};mstrmojo.gm.WidgetPropertyTag={FIT_TO:"FitTo",AXIS_SCALE:"MinMax",SHAPE:"Shape",SUB_TYPE:"Subtype",DATA_LABEL:"DataLabel",DATA_LABELS_PLACEMENT:"DataLabelPalcement",METRIC_LEVEL_DATA_LABEL:"mtcLvlDataLabel",BANDING:"Banding",LEGEND_VISIBLE:"LegendVisibleness",COL_ALIGNMENT:"Columnalignment",ROW_ALIGNMENT:"Rowalignment",MAX_SIZE_TYPE:"SizeType",MAX_SIZE_VALUE:"SizeValue",MIN_SIZE_TYPE:"minSizeType",MIN_SIZE_VALUE:"minSizeValue",OUTSIDE_BORDER:"OutSideBorder",AXES:"AxisLine",MATRIX_LINES:"MatrixLine",GRID_LINES:"GridLine",SELECTION_TYPE:"SelectionType",SELECTIONS:"Selections",LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr",SCALE_CHART_HEIGHT:"rr",SCALE_CHART_WIDTH:"cr",SCALE_ROW_HEADERS:"rvr",SCALE_COL_HEADERS:"chr",SCALE_Y:"yr",SCALE_X:"xr",SCALE_Y2:"y2r",SCALE_X2:"x2r",SCALE_ALL:"scales",SCALE_V_EXTRA_LINE:"vExtraLine",SORT_ORDER:"so",SORT_INDEX:"si",AXIS_SCALE_DATA:"AxisScale",AXIS_SCALE_REAL_MIN:"rMin",AXIS_SCALE_REAL_MAX:"rMax",AXIS_SCALE_MANUAL_MIN:"mMin",AXIS_SCALE_MANUAL_MAX:"mMax",AXIS_SCALE_AUTO_MIN:"autoMin",AXIS_SCALE_AUTO_MAX:"autoMax",SINGLE_AXIS_SCALE_TYPE:"scaleType",LOG_SCALE:"logScale",GROUP_INFO:"groupInfo",METRIC_SHAPES:"metricShapes",AXIS_ORIGIN:"axisOrigin",AXIS_ORIGIN_AUTO:"axOriAuto",AXIS_ORIGIN_VALUE:"axOriValue",TREND_LINE_DEF:"trdDef",REF_LINE_DEF:"refDef",TREND_TYPE:"trdTp",TREND_LEVEL:"trdLvl",TREND_ENABLED:"trdEnabled",TREND_INCLUDE_BREAK_BY:"trdIncBB",TREND_POLY_DEGREE:"trdDgr",TREND_FORECAST_ENABLED:"trdFstEnabled",TREND_BWD_FORECAST:"trdBwdFst",TREND_FWD_FORECAST:"trdFwdFst",TREND_SEASONALITY:"trdSeason",TREND_BUBBLE_FORE_DEF:"trdBbForeDef",TREND_BUBBLE_FORE_FWD:"trdBbForeFwd",TREND_BUBBLE_FORE_BWD:"trdBbForeBwd",TREND_BUBBLE_FORE_ENABLED:"trdBbForeEnabled",TREND_BUBBLE_MAX:"trdBbMax",TREND_BUBBLE_MIN:"trdBbMin",REF_TYPE:"refTp",REF_LEVEL:"refLvl",REF_ENABLED:"refEnabled",REF_SHOW_LABEL:"refLbShw",REF_LABEL_TYPE:"refLbTp",REF_CONST_VALUE:"refCstVl",REF_LINE_NAME:"refLnName",TREND_REF_LINE_THICKNESS:"trdRefLnThk",TREND_REF_LINE_COLOR:"trdRefLnClr",TREND_REF_LINE_STYLE:"trdRefLnStyle",TREND_REF_LINE_COMBINED_STYLE:"trdRefLnCmbStyle",FORMATS_ON_COMBINATION:"fmtOnComb",PARTIAL_RENDER:"prtRdn"};mstrmojo.gm.FormatingPropertyTag={IS_DEFAULT_VALUE:"_default",MODIFIED_DEF_FILL_COLOR:"modDefFillClr",ALL_SHAPE_FORMAT:"allShpFmt",SHAPE_LINE_THICKNESS:"shpLnThk",SHAPE_LINE_COLOR:"shpLnClr",SHAPE_LINE_STYLE:"shpLnStyle",SHAPE_LINE_COMBINED_STYLE:"shpLnCmbStyle",SHAPE_FILL_COLOR:"shpFillClr",SHAPE_FILL_COLOR_DEFAULT:"shpFillClr_default",SHAPE_FILL_STYLE:"shpFillStyle",SHAPE_FILL_TRANSPARENCY:"shpFillTrans",SHAPE_FILL_EFFECT:"shpFillEff",SHAPE_BORDER_COLOR:"shpBdrClr",SHAPE_BORDER_STYLE:"shpBdrStyle",SHAPE_BORDER_COMBINED_STYLE:"shpBdrCmbStyle",SHAPE_BORDER_THICKNESS:"shpBdrThk",LINE_MARKER_SHOW:"lnMkShw",LINE_MARKER_SHAPE:"lnMkShp",LINE_MARKER_SIZE:"lnMkSz",LINE_MARKER_COLOR:"lnMkClr",LINE_MARKER_COLOR_EQUAL:"lnMkClrEq",LINE_MARKER_BORDER_COLOR:"lnMkBdrClr",PIE_EXPLODE:"pieExpl",DATA_LABELS_SHOW:"dlShw",DATA_LABELS_FONT_FAMILY:"dlFntFml",DATA_LABELS_FONT_SIZE:"dlFntSz",DATA_LABELS_FONT_STYLE:"dlFntStyle",DATA_LABELS_FONT_COLOR:"dlFntClr",REF_LABELS_FONT_FAMILY:"rfLnFntFml",REF_LABELS_FONT_SIZE:"rfLnFntSz",REF_LABELS_FONT_STYLE:"rfLnFntStyle",REF_LABELS_FONT_COLOR:"rfLnFntClr",LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",ALL_LINE_SHOW:"allLnShw",ALL_LINE_COLOR:"allLnClr",ALL_LINE_STYLE:"allLnStyle",ALL_LINE_COMBINED_STYLE:"allLnCmbStyle",ALL_LINE_THICKNESS:"allLnThk",ALL_AXIS_ORIGIN_LINE_SHOW:"axOriLnShw",ALL_AXIS_ORIGIN_LINE_COLOR:"axOriLnClr",ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE:"axOriLnCmbStyle",X_AXIS_ORIGIN_LINE_SHOW:"xAxOriLnShw",X_AXIS_ORIGIN_LINE_COLOR:"xAxOriLnClr",X_AXIS_ORIGIN_LINE_STYLE:"xAxOriLnStyle",X_AXIS_ORIGIN_LINE_COMBINED_STYLE:"xAxOriLnCmbStyle",X_AXIS_ORIGIN_LINE_THICKNESS:"xAxOriLnThk",Y_AXIS_ORIGIN_LINE_SHOW:"yAxOriLnShw",Y_AXIS_ORIGIN_LINE_COLOR:"yAxOriLnClr",Y_AXIS_ORIGIN_LINE_STYLE:"yAxOriLnStyle",Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:"yAxOriLnCmbStyle",Y_AXIS_ORIGIN_LINE_THICKNESS:"yAxOriLnThk",ALL_AXIS_LINE_SHOW:"allAxLnShw",ALL_AXIS_LINE_COLOR:"allAxLnClr",ALL_AXIS_LINE_STYLE:"allAxLnStyle",ALL_AXIS_LINE_COMBINED_STYLE:"allAxLnCmbStyle",ALL_AXIS_LINE_THICKNESS:"allAxLnThk",ALL_AXIS_TITLE_SHOW:"allAxTtShw",ALL_AXIS_TITLE_CONTENT:"allAxTtCtt",ALL_AXIS_TITLE_FONT_COLOR:"allAxTtFntClr",ALL_AXIS_TITLE_FONT_FAMILY:"allAxTtFntFml",ALL_AXIS_TITLE_FONT_STYLE:"allAxTtFntStyle",ALL_AXIS_TITLE_FONT_SIZE:"allAxTtFntSz",ALL_AXIS_LABELS_FONT_SIZE:"allAxLbFntSz",ALL_AXIS_LABELS_FONT_FAMILY:"allAxLbFntFml",ALL_AXIS_LABELS_FONT_STYLE:"allAxLbFntStyle",ALL_AXIS_LABELS_FONT_COLOR:"allAxLbFntClr",ALL_AXIS_LABELS_ROTATION:"allAxLbRtt",ALL_AXIS_LABELS_SHOW:"allAxLbShw",X_AXIS_LINE_SHOW:"xAxLnShw",X_AXIS_LINE_COLOR:"xAxLnClr",X_AXIS_LINE_STYLE:"xAxLnStyle",X_AXIS_LINE_COMBINED_STYLE:"xAxLnCmbStyle",X_AXIS_LINE_THICKNESS:"xAxLnThk",X_AXIS_TITLE_SHOW:"xAxTtShw",X_AXIS_TITLE_CONTENT:"xAxTtCtt",X_AXIS_TITLE_FONT_COLOR:"xAxTtFntClr",X_AXIS_TITLE_FONT_FAMILY:"xAxTtFntFml",X_AXIS_TITLE_FONT_STYLE:"xAxTtFntStyle",X_AXIS_TITLE_FONT_SIZE:"xAxTtFntSz",X_AXIS_LABELS_FONT_SIZE:"xAxLbFntSz",X_AXIS_LABELS_FONT_FAMILY:"xAxLbFntFml",X_AXIS_LABELS_FONT_STYLE:"xAxLbFntStyle",X_AXIS_LABELS_FONT_COLOR:"xAxLbFntClr",X_AXIS_LABELS_ROTATION:"xAxLbRtt",X_AXIS_LABELS_SHOW:"xAxLbShw",Y_AXIS_LINE_SHOW:"yAxLnShw",Y_AXIS_LINE_COLOR:"yAxLnClr",Y_AXIS_LINE_STYLE:"yAxLnStyle",Y_AXIS_LINE_COMBINED_STYLE:"yAxLnCmbStyle",Y_AXIS_LINE_THICKNESS:"yAxLnThk",Y_AXIS_TITLE_SHOW:"yAxTtShw",Y_AXIS_TITLE_CONTENT:"yAxTtCtt",Y_AXIS_TITLE_FONT_COLOR:"yAxTtFntClr",Y_AXIS_TITLE_FONT_FAMILY:"yAxTtFntFml",Y_AXIS_TITLE_FONT_STYLE:"yAxTtFntStyle",Y_AXIS_TITLE_FONT_SIZE:"yAxTtFntSz",Y_AXIS_LABELS_FONT_SIZE:"yAxLbFntSz",Y_AXIS_LABELS_FONT_FAMILY:"yAxLbFntFml",Y_AXIS_LABELS_FONT_STYLE:"yAxLbFntStyle",Y_AXIS_LABELS_FONT_COLOR:"yAxLbFntClr",Y_AXIS_LABELS_ROTATION:"yAxLbRtt",Y_AXIS_LABELS_SHOW:"yAxLbShw",ALL_FILL_COLOR:"allFillClr",ALL_FILL_TRANSPARENCY:"allFillTrans",BG_COLOR:"bgFillClr",BG_FILL_EFFECT:"bgFillEff",BG_FILL_STYLE:"bgFillStyle",BG_FILL_TRANSPARENCY:"bgFillTrans",ROW_HEADER_FILL_COLOR:"rwHdrFillClr",ROW_HEADER_FILL_EFFECT:"rwHdrFillEff",ROW_HEADER_FILL_STYLE:"rwHdrFillStyle",ROW_HEADER_FILL_TRANSPARENCY:"rwHdrFillTrans",COLUMN_HEADER_FILL_COLOR:"colHdrFillClr",COLUMN_HEADER_FILL_EFFECT:"colHdrFillEff",COLUMN_HEADER_FILL_STYLE:"colHdrFillStyle",COLUMN_HEADER_FILL_TRANSPARENCY:"colHdrFillTrans",ALL_MATRIX_LINES_SHOW:"allMatrixLnShw",ALL_MATRIX_LINES_COLOR:"allMatrixLnClr",ALL_MATRIX_LINES_THICKNESS:"allMatrixLnThk",ALL_MATRIX_LINES_STYLE:"allMatrixLnStyle",ALL_MATRIX_LINES_COMBINED_STYLE:"allMatrixLnCmbStyle",V_MATRIX_LINES_SHOW:"vMatrixLnShw",V_MATRIX_LINES_COLOR:"vMatrixLnClr",V_MATRIX_LINES_THICKNESS:"vMatrixLnThk",V_MATRIX_LINES_STYLE:"vMatrixLnStyle",V_MATRIX_LINES_COMBINED_STYLE:"vMatrixLnCmbStyle",H_MATRIX_LINES_SHOW:"hMatrixLnShw",H_MATRIX_LINES_COLOR:"hMatrixLnClr",H_MATRIX_LINES_THICKNESS:"hMatrixLnThk",H_MATRIX_LINES_STYLE:"hMatrixLnStyle",H_MATRIX_LINES_COMBINED_STYLE:"hMatrixLnCmbStyle",OUTSIDE_BORDER_SHOW:"outBdrShw",OUTSIDE_BORDER_COLOR:"outBdrClr",OUTSIDE_BORDER_STYLE:"outBdrStyle",OUTSIDE_BORDER_THICKNESS:"outBdrThk",OUTSIDE_BORDER_COMBINED_STYLE:"outBdrCmbStyle",GRID_LINE_AUTO:"gridLineAuto",ALL_GRID_LINES_SHOW:"allGridLnShw",ALL_GRID_LINES_COLOR:"allGridLnClr",ALL_GRID_LINES_THICKNESS:"allGridLnThk",ALL_GRID_LINES_STYLE:"allGridLnStyle",ALL_GRID_LINES_COMBINED_STYLE:"allGridLnCmbStyle",AUTO_GRID_LINES_COLOR:"autoGridLnClr",AUTO_GRID_LINES_COMBINED_STYLE:"autoGridLnCmbStyle",MAJOR_GRID_LINES_SHOW:"majorGridLnShw",MAJOR_GRID_LINES_COLOR:"majorGridLnClr",MAJOR_GRID_LINES_THICKNESS:"majorGridLnThk",MAJOR_GRID_LINES_STYLE:"majorGridLnStyle",MAJOR_GRID_LINES_COMBINED_STYLE:"majorGridLnCmbStyle",MINOR_GRID_LINES_SHOW:"minerGridLnShw",MINER_GRID_LINES_COLOR:"minerGridLnClr",MINER_GRID_LINES_THICKNESS:"minerGridLnThk",MINER_GRID_LINES_STYLE:"minerGridLnStyle",MINER_GRID_LINES_COMBINED_STYLE:"minerGridLnCmbStyle",ALL_ROW_COLUMN_SHOW:"allRwColShw",COLUMN_TEXT_SHOW:"colTxtShw",ROW_TEXT_SHOW:"rwTxtShw",COLUMN_HEADER_SHOW:"colHdrShw",ROW_HEADER_SHOW:"rwHdrShw",COLUMN_VALUES_SHOW:"colVlShw",ROW_VALUES_SHOW:"rwVlShw",ALL_TEXT_FONT_COLOR:"allTxtFntClr",ALL_TEXT_FONT_SIZE:"allTxtFntSz",ALL_TEXT_FONT_FAMILY:"allTxtFntFml",ALL_TEXT_FONT_STYLE:"allTxtFntStyle",ALL_ROW_COLUMN_TEXT_FONT_COLOR:"allRwColTxtFntClr",ALL_ROW_COLUMN_TEXT_FONT_SIZE:"allRwColTxtFntSz",ALL_ROW_COLUMN_TEXT_FONT_FAMILY:"allRwColTxtFntFml",ALL_ROW_COLUMN_TEXT_FONT_STYLE:"allRwColTxtFntStyle",ALL_ROW_COLUMN_TEXT_ALIGNMENT_HORIZONTAL:"allRwColTxtAlignH",ALL_ROW_COLUMN_TEXT_ALIGNMENT_VERTICAL:"allRwColTxtAlignV",ROW_TEXT_TEXT_FONT_COLOR:"rwTxtTxtFntClr",ROW_TEXT_TEXT_FONT_SIZE:"rwTxtTxtFntSz",ROW_TEXT_TEXT_FONT_FAMILY:"rwTxtTxtFntFml",ROW_TEXT_TEXT_FONT_STYLE:"rwTxtTxtFntStyle",ROW_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"rwTxtTxtAlignH",ROW_TEXT_TEXT_ALIGNMENT_VERTICAL:"rwTxtTxtAlignV",COLUMN_TEXT_TEXT_FONT_COLOR:"colTxtTxtFntClr",COLUMN_TEXT_TEXT_FONT_SIZE:"colTxtTxtFntSz",COLUMN_TEXT_TEXT_FONT_FAMILY:"colTxtTxtFntFml",COLUMN_TEXT_TEXT_FONT_STYLE:"colTxtTxtFntStyle",COLUMN_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"colTxtTxtAlignH",COLUMN_TEXT_TEXT_ALIGNMENT_VERTICAL:"colTxtTxtAlignV",ROW_HEADER_TEXT_FONT_COLOR:"rwHdrTxtFntClr",ROW_HEADER_TEXT_FONT_SIZE:"rwHdrTxtFntSz",ROW_HEADER_TEXT_FONT_FAMILY:"rwHdrTxtFntFml",ROW_HEADER_TEXT_FONT_STYLE:"rwHdrTxtFntStyle",ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"rwHdrTxtAlignH",ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:"rwHdrTxtAlignV",COLUMN_HEADER_TEXT_FONT_COLOR:"colHdrTxtFntClr",COLUMN_HEADER_TEXT_FONT_SIZE:"colHdrTxtFntSz",COLUMN_HEADER_TEXT_FONT_FAMILY:"colHdrTxtFntFml",COLUMN_HEADER_TEXT_FONT_STYLE:"colHdrTxtFntStyle",COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"colHdrTxtAlignH",COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:"colHdrTxtAlignV",ROW_VAVLUE_TEXT_FONT_COLOR:"rwVlTxtFntClr",ROW_VAVLUE_TEXT_FONT_SIZE:"rwVlTxtFntSz",ROW_VAVLUE_TEXT_FONT_FAMILY:"rwVlTxtFntFml",ROW_VAVLUE_TEXT_FONT_STYLE:"rwVlTxtFntStyle",ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"rwVlTxtAlignH",ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"rwVlTxtAlignV",COLUMN_VAVLUE_TEXT_FONT_COLOR:"colVlTxtFntClr",COLUMN_VAVLUE_TEXT_FONT_SIZE:"colVlTxtFntSz",COLUMN_VAVLUE_TEXT_FONT_FAMILY:"colVlTxtFntFml",COLUMN_VAVLUE_TEXT_FONT_STYLE:"colVlTxtFntStyle",COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"colVlTxtAlignH",COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"colVlTxtAlignV",TITLE_FONT_COLOR:"ttlFntClr",TITLE_FONT_SIZE:"ttlFntSz",TITLE_FONT_FAMILY:"ttlFntFml",TITLE_FONT_STYLE:"ttlFntStyle",COLOR_SQUARE_COLOR:"clrSqrClr"};mstrmojo.gm.EnumAxis={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5};mstrmojo.gm.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gm.EnumSizeByType={SQUARE:1,CIRCLE:4};mstrmojo.gm.EnumTheme={DARK:0,LIGHT:1};mstrmojo.gm.EnumFitTo={CONTENT:1,PANEL:2,COMPACT:3};mstrmojo.gm.EnumAxisScale={GLOBAL:0,PERROWCOL:1,PERCELL:2,CUSTOM:3,DIFFERENT:4};mstrmojo.gm.EnumShape={GENERIC:-1,AREA:0,BAR:1,LINE:2,STEPLINE:3,CIRCLE:4,RECTANGLE:5,SQUARE:6,TICK:7,PIESLICE:8,POLYGON:9,PIE:10,RING:11,DEFAULT:12,BULLET:13};mstrmojo.gm.EnumSubtype={AUTO:1,ABSOLUTE:2,STACKED:3,CLUSTERED:4,PERCENT:5};mstrmojo.gm.EnumDataLabels={HIDE:1,SHOW_VALUE_ONLY:2,SHOW_TEXT_ONLY:3};mstrmojo.gm.EnumDataLabelPlacements={AUTOMATIC:1,GENERIC:2,RESERVED:3};mstrmojo.gm.EnumLegend={SHOW:0,HIDE:1,MINIMIZED:2};mstrmojo.gm.EnumLegendMode={RESTORED:1,MINIMIZED:2};mstrmojo.gm.EnumTextAlignH={LEFT:0,MIDDLE:1,RIGHT:2};mstrmojo.gm.EnumTextAlignV={TOP:0,MIDDLE:1,BOTTOM:2};mstrmojo.gm.EnumMaxSizeType={AUTO:1,MANUAL:2,AUTO_FIT:3};mstrmojo.gm.EnumMinSizeType={AUTO:1,MANUAL:2,PROPORTIONAL:3};mstrmojo.gm.EnumAxes={SHOW_BOTH:1,SHOW_NONE:2,SHOW_X:3,SHOW_Y:4};mstrmojo.gm.EnumMatrixLines={SHOW_ALL:1,SHOW_NONE:2,SHOW_HORIZONTAL:3,SHOW_VERTICAL:4};mstrmojo.gm.EnumGridLines={AUTO:1,SHOW:2,HIDE:3,SHOW_MAJOR_ONLY:4};mstrmojo.gm.LineMarkerShape={Circle:4,Square:1};mstrmojo.gm.ShapeFillType={Solid:0,Gradient:14,Pattern:3};mstrmojo.gm.ShapeFillEffect={None:1,Bevel:2};mstrmojo.gm.Enum3DGMapping={SizeType:"9999_1002",SizeValue:"9999_1003",lgdBgFillClr:"6_564",lgdBgFillStyle:"6_10002",lgdBgFillEff:"6_608",lgdFntSz:"9_603",lgdFntFml:"9_576",lgdFntStyle:"9_584",lgdFntClr:"9_574",LegendVisibleness:"9999_116",xAxShw:"9999_124",xAxTtCtt:"293_9999",xAxTtFntClr:"293_574",xAxTtFntFml:"293_576",xAxTtFntStyle:"293_584",xAxLbFntSz:"272_603",xAxLbFntFml:"272_576",xAxLbFntStyle:"272_584",yAxShw:"9999_125",yAxTtCtt:"299_9999",yAxTtFntClr:"299_574",yAxTtFntFml:"299_576",yAxTtFntStyle:"299_584",yAxLbFntSz:"296_603",yAxLbFntFml:"296_576",yAxLbFntStyle:"296_584",bgFillClr:"1_564",bgFillEff:"1_879",bgFillTrans:"1_608",outBdrClr:"1_588"};mstrmojo.gm.EnumRefLineModelType={MAX:1,MIN:2,AVG:3,MED:4,FIRST:5,LAST:6,CONST:7};mstrmojo.gm.EnumTrendLineModelType={BEST_FIT:256,LINEAR:257,LOG:258,EXP:259,POW:260,POLY:261};mstrmojo.gm.EnumTrendRefLevel={DssModelLevelReserved:0,DssModelLevelPerCell:1,DssModelLevelPerRow:2,DssModelLevelPerColumn:3,DssModelLevelPerPanel:4,DssModelLevelLastOne:5};mstrmojo.gm.EnumTimeRole={None:0,YearOfDecade:3083,QuarterOfYear:2826,MonthOfYear:2825,MonthOfQuarter:2569,WeekOfYear:2824,WeekOfQuarter:2568,WeekOfMonth:2312,DayOfYear:2823,DayOfQuarter:2567,DayOfMonth:2311,DayOfWeek:2055,HourOfDay:1798,MinuteOfDay:1797,MinuteOfHour:1541,SecondOfDay:1796,SecondOfHour:1540,SecondOfMinute:1284};mstrmojo.gm.EnumTrendRefModelLabels={DssModelLabelsReserved:-1,DssModelLabelsNone:0,DssModelLabelsType:1,DssModelLabelsMetric:2,DssModelLabelsValue:4};mstrmojo.gm.EnumTRFManipulations={AddTRLine:"141",RemoveTRLine:"142",UpdateTRLine:"143",UpdateForecastInfo:"144"};mstrmojo.gm.EnumShapeFormatStatus={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2};mstrmojo.vi.viz.EnumDSSDropZones={Reserved:0,Rows:1,Columns:2,XAxis:3,YAxis:4,BreakBy:5,SliceBy:6,ColorBy:7,SizeBy:8,AdditionalMetrics:9,Angle:10,Grouping:11,GeoAttribute:12,Layout:13,FromItem:14,ToItem:15,ItemSize:16,Latitude:17,Longitude:18};mstrmojo.chart.enums.EnumLineStyle={LS_SOLID:0,LS_DASH:1,LS_DOT:2,LS_DOT_DASH:3,LS_DASH_DOT_DOT:4,LS_MEDIUM_DASH:5,LS_SHORT_DASH:6,LS_LONGEST_DASH:7,LS_LONG_DOT:8,LS_DOT_DOT_DOT:9,LS_DASH_DASH_DOT:10,LS_DASH_DASH_DOT_DOT:11,LS_LONG_DASH_DOT:12,LS_LONG_DASH_DOT_DOT:13,LS_LONG_DASH_DASH:14,LS_LONG_DASH_DASH_DASH:15,LS_GRADIENT:16,LS_NONE:99};(function(){function B(L,Q,N){var M,O;M=0;if(N){M=Math.max(L,L-Q);M=Math.max(M,-Q);}else{M=L-Q;}if(M===0){this.mIsShown=false;return 1;}var P=M;O=1;while(M<1){M*=10;O/=10;}while(M>=10){M/=10;O*=10;}if(M<1.8){O*=2;O/=10;}else{if(M<3.1){O*=4;O/=10;}else{if(M<4.6){O*=5;O/=10;}else{if(M>=8.1){O*=2;}}}}return O;}function K(P){var L,N;this.mStep=B.call(this,this.mMaximum,this.mMinimum,P.mAlwaysIncludeZero);this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:this.mMinTick;if(P.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}var M=this.mMaxTick-this.mMinTick;if(this.mStep>=M){return ;}L=Math.floor((this.mMaxTick-this.mMinTick+this.mStep/100)/this.mStep)+1;for(N=1;N<L-1;++N){var O=this.mMinTick+N*this.mStep;this.mTicks.push(O);}}function C(M){var L;this.mMaxTick=1;this.mStep=this.mMinimum<0?0.2:0.1;if(M.mUseCustomMinMax){this.mMaxTick=M.mAxisMaxValue;this.mMinTick=M.mAxisMinValue;this.mMaxTick=Math.min(1,this.mMaxTick);this.mMinTick=Math.max(-1,this.mMinTick);this.mStep=0.1;}else{if(this.mMaximum>=0.5){this.mMaxTick=1;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:(this.mMinTick>0?0:this.mMinTick);if(this.mMinimum<-0.5){this.mMinTick=-1;}}else{if(this.mMaximum>0){this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=-1;}else{this.mStep=0.1;this.mMaxTick=0;this.mMinTick=-1;}}}for(L=this.mMinTick+this.mStep;L+0.01<this.mMaxTick;L+=this.mStep){this.mTicks.push(Math.round(L*100)/100);}}function I(L){return Math.log(L)/Math.log(10);}function H(O){var N,L,M;this.mStep=1;if(this.mMaximum<=0){this.mMinTick=1;this.mMaxTick=10;return ;}if(this.mMinimum<=0){L=this.mMaximum>1?0:-1;this.mMinTick=Math.pow(10,L);if(O.mUseCustomMinMax){this.mMaxTick=this.mMaximum;N=Math.floor(I.call(this,this.mMaximum));if(I.call(this,this.mMaximum)===N){N--;}}else{N=Math.ceil(I.call(this,this.mMaximum));this.mMaxTick=Math.pow(10,N);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}return ;}if(O.mUseCustomMinMax){N=I.call(this,this.mMaximum);L=I.call(this,this.mMinimum);this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;}else{N=Math.ceil(I.call(this,this.mMaximum));L=Math.floor(I.call(this,this.mMinimum));this.mMaxTick=Math.pow(10,N);this.mMinTick=Math.pow(10,L);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}}function J(L){this.mTicks.splice(0,this.mTicks.length);if(this.mIsPercent){return C.call(this,L);}if(L.mUseLogarithmicScale){return H.call(this,L);}K.call(this,L);}function G(Q){if(Q.mUseCustomMinMax||Q.mUseLogarithmicScale){return ;}var M=0.1,O=false,L=false,P=[];this.GetTicks(P);if(P.length>=2){var N=P.length;L=((Math.abs(this.mMaximum-P[N-2])<M*this.mStep));O=((Math.abs(this.mMinimum-P[1])<M*this.mStep));if(this.mIsPercent){L=false;}}if(L&&O){this.mMinTick=this.mMinimum;this.mMaxTick=this.mMaximum;Q.mUseMinValue=Q.mShowMinLabel=true;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(L){this.mMaxTick=this.mMaximum;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(O){this.mMinTick=this.mMinimum;Q.mUseMinValue=Q.mShowMinLabel=true;}else{}}}if(Q.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}mstrmojo.chart.common.ScalePlate=mstrmojo.provide("mstrmojo.chart.common.ScalePlate",{mOptions:{mShowMinLabel:true,mShowMaxLabel:true},isStackedChart:false,mStep:0,mIsPercent:false,mMinimum:0,mMaximum:0,mMaxTick:0,mMinTick:0,mTicks:[],clear:function F(){this.isStackedChart=this.mIsPercent=false;this.mMinimum=this.mMaximum=0;this.mMinTick=this.mMaxTick=0;this.mStep=0;this.mTicks=[];},GetTicks:function A(M){if(this.mOptions.mShowMinLabel){M.push(this.mMinTick);}var L;for(L=0;L<this.mTicks.length;++L){M.push(this.mTicks[L]);}if(this.mOptions.mShowMaxLabel){M.push(this.mMaxTick);}},getMaxMinTickValue:function D(O,N,L,M){this.computeTicks(O,N,L,M);return{Max:this.mMaxTick,Min:this.mMinTick};},computeTicks:function E(Q,P,L,N){this.mMinimum=N;this.mMaximum=L;this.mIsPercent=!!(P&1);this.isStackedChart=!!(P&2);var O=1e-14;if(!Q.mUseLogarithmicScale&&this.isStackedChart){this.mMinimum=Math.min(this.mMinimum,0);this.mMaximum=Math.max(this.mMaximum,0);}if(Q.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Q.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Q.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<O){if(this.mMinimum<-O||this.mMinimum>O){var M=Math.abs(this.mMinimum)*0.5;this.mMaximum=this.mMaximum+M;this.mMinimum=this.mMinimum-M;}else{this.mMinimum=-6;this.mMaximum=6;}}J.call(this,Q);if(Q.mUseLogarithmicScale&&this.isStackedChart){this.mMaximum=Q.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Q.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);H.call(this,Q);}G.call(this,Q);}});}());mstrmojo.chart.enums.EnumFontStyle={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};mstrmojo.chart.model.enums.EnumDSSGraphObject={DssGraphNull:-3,DssGraphBackground:1,DssGraphFrame:2,DssGraphFootnote:3,DssGraphSubtitle:4,DssGraphTitle:5,DssGraphLegendArea:6,DssGraphLegendLine:7,DssGraphLegendMarker:8,DssGraphLegendText:9,DssGraphCurve:257,DssGraphDataLine:258,DssGraphDataMarker:259,DssGraphDataText:260,DssGraphDivBiPolar:261,DssGraphErrorBar:262,DssGraphLinrExp:263,DssGraphLinrLine:264,DssGraphLinrLog:265,DssGraphLinrNatLog:266,DssGraphLinrNPoly:267,DssGraphLinrText:268,DssGraphMeanLine:269,DssGraphMovAvgLine:270,DssGraphO1Body:271,DssGraph2DO1Label:272,DssGraphO1Major:273,DssGraphO1Minor:274,DssGraphO1Super:275,DssGraphO1Title:276,DssGraphO2Body:277,DssGraph2DO2Label:278,DssGraphO2Major:279,DssGraphO2Minor:280,DssGraphO2Title:281,DssGraphConnectDataLine:282,DssGraphRiser:286,DssGraphRiserShadow:287,DssGraphStdDevLine:288,DssGraphX1Body:289,DssGraphX1Label:290,DssGraphX1Major:291,DssGraphX1Minor:292,DssGraphXTitle:293,DssGraphY1Body:295,DssGraphY1Label:296,DssGraphY1Major:297,DssGraphY1Minor:298,DssGraphY1Title:299,DssGraphY2Body:301,DssGraphY2Label:302,DssGraphY2Major:303,DssGraphY2Minor:304,DssGraphY2Title:305,DssGraph3DShowColumnHeaders:318,DssGraph3DShowLeftHeaders:321,DssGraph3DShowRightHeaders:323,DssGraph3DShowRowHeaders:325,DssGraphOBPBox:329,DssGraphOBPMedian:330,DssGraphOBPStem:331,DssGraphOBPTail:332,DssGraphPieFeelerLine:337,DssGraphPieFeelerLabel:338,DssGraphPieGroupLabel:339,DssGraphPieRingLabel:340,DssGraphPieSlice:341,DssGraphSeriesTitle:398,DssGraphConnectStackLine:399,DssGraphDataTextStackTotal:401,DssGraphOPILBLValue:418,DssGraphUserLine1:414,DssGraphUserLine2:415,DssGraphUserLine3:416,DssGraphUserLine4:417,DssGraphDataTextConnectLine:431,DssGraphGauge:444,DssGraphGaugeTitle:450,DssGraphGaugeRange:451,DssGraphY3Body:477,DssGraphY3Label:478,DssGraphY3Major:479,DssGraphY3Minor:480,DssGraphY4Body:483,DssGraphY4Label:484,DssGraphY4Major:485,DssGraphY4Minor:486,DssGraph3DColHeader:512,DssGraph3DColTitle:515,DssGraph3DDataText:518,DssGraph3DRowHeader:552,DssGraph3DRowTitle:555,DssGraph3DRYHeader:558,DssGraph3DRYTitle:561,DssGraphGaugeBorder:1319,DssGraphGaugeNeedleBase:1320,DssGraphGaugeNeedleBaseLine:1330,DssGraphZBody:10003,DssGraphTrendLine:10004,DssGraphY1RightBody:10005,DssGraphY1RightTitle:10006,DssGraphReferenceLine:10007,DssGraphStraightLine:10008,DssGraphTargetLine:10009,DssGraphRefLineText:10010,DssGraphTrendLineText:10011,DssGraphUserLabel1:100100,DssGraphUserLabel2:100101,DssGraphUserLabel3:100102,DssGraphUserLabel4:100103,DssGraphX2Body:100200,DssGraphX2Label:100201,DssGraphX2Major:100202,DssGraphX2Minor:100203,DssGraphX2Title:100204};mstrmojo.chart.model.enums.EnumDSSGraphProperty={DssGraphTextContent:9999,DssGraphContent:9999,DssGraphPropertyReserved:0,DssGraphAutoFitO1:4,DssGraphAutoFitO2:5,DssGraphAutoFitX:6,DssGraphAutoFitY1:7,DssGraphAutoFitY2:8,DssGraphGroupSpacing:10,DssGraphRiserWidth:11,DssGraphColorBySeries:12,DssGraphCurveColorAsSeries:13,DssGraphSDMOVAFactor:14,DssGraph2DAngle:18,DssGraph2DDepth:20,DssGraphDepthMode:21,DssGraph2ScaleDirectionX:22,DssGraph2ScaleDirectionY1:23,DssGraph2ScaleDirectionY2:24,DssGraph2ExcludeZeroX:25,DssGraph2ExcludeZeroY1:26,DssGraph2ExcludeZeroY2:27,DssGraphFormatDataTextX:28,DssGraphFormatDataTextY1:29,DssGraphFormatDataTextY2:30,DssGraphFormatX:33,DssGraphFormatY1:34,DssGraphFormatY2:35,DssGraphFormatZ:36,DssGraphGridLineO1:37,DssGraphGridLineO2:38,DssGraphGridLineX:39,DssGraphGridLineY1:40,DssGraphGridLineY2:41,DssGraphLabelModeO1:48,DssGraphLabelModeO2:49,DssGraphLegendLocation:52,DssGraphTitleXLocation:54,DssGraphTitleY1Location:55,DssGraphTitleY2Location:56,DssGraph2LogScaleX:57,DssGraph2LogScaleY1:58,DssGraph2LogScaleY2:59,DssGraphMarkerShape:60,DssGraphMarkerSize:61,DssGraph2DPlaceX:65,DssGraph2DPlaceY1:66,DssGraph2DPlaceY2:67,DssGraphConnectLine:68,DssGraphShowStepLine:70,DssGraph2ScaleEndX:74,DssGraph2ScaleEndY1:75,DssGraph2ScaleEndY2:76,DssGraph2DScaleFreqO1:87,DssGraph2DScaleFreqO2:88,DssGraph2DScaleFreqX:89,DssGraph2DScaleFreqY1:90,DssGraph2DScaleFreqY2:91,DssGraphScaleX:92,DssGraphScaleY1:93,DssGraphScaleY2:94,DssGraphShowSDDataLineType:96,DssGraphSDRiserType:97,DssGraphShowSDLine:98,DssGraphShowSDCurve:99,DssGraphShowSDLinrCorr:101,DssGraphShowSDLinrExp:102,DssGraphShowSDLinrFormula:103,DssGraphShowSDLinrLine:104,DssGraphShowSDLinrLog:105,DssGraphShowSDLinrNatLog:106,DssGraphShowSDLinrNPoly:107,DssGraphSDPolyFactor:108,DssGraphShowSDMeanLine:109,DssGraphShowSDMOVALine:110,DssGraphShowSDSTDDLine:111,DssGraphShowDataText:113,DssGraphShowDivBiPolar:114,DssGraphShowErrorBar:115,DssGraphShowLegendText:116,DssGraphShow2DO1Label:117,DssGraphShow2DO1:-117,DssGraphShow2DO2:118,DssGraphOffScaleTypeX:119,DssGraphOffScaleTypeY1:120,DssGraphOffScaleTypeY2:121,DssGraphShowQuadrants:122,DssGraphShowRiserShadows:123,DssGraphShow2DXTitle:124,DssGraphShow2DY1Title:125,DssGraphShow2DY2Title:126,DssGraphShow2DXLabel:127,DssGraphShow2DX:-127,DssGraphShow2DY1Label:128,DssGraphShow2DY1:-128,DssGraphShow2DY2Label:129,DssGraphShow2DY2:-129,DssGraphShowZeroLineX:130,DssGraphShowZeroLineY1:131,DssGraphShowZeroLineY2:132,DssGraph2DSideO1:133,DssGraph2DSideO2:134,DssGraph2DSideX:135,DssGraph2DSideY1:136,DssGraph2DSideY2:137,DssGraph2DSDSplitY:140,DssGraphStaggerO1:142,DssGraphStaggerO2:143,DssGraphStaggerX:144,DssGraphStaggerY1:145,DssGraphStaggerY2:146,DssGraphUniformBorders:148,DssGraphPieDepthValue:192,DssGraphPieHoleSizeValue:198,DssGraphPieInset:200,DssGraphPiesPerRowValue:201,DssGraphPieRotationValue:202,DssGraphShowFeeler:204,DssGraphShowLBLFeelerLabel:205,DssGraphShowLBLFeeler:-205,DssGraphShowLBLPie:206,DssGraphShowLBLRing:207,DssGraphDeleteSlice:208,DssGraphDetachSlice:209,DssGraphPieRestore:210,DssGraphPieTiltValue:211,DssGraphPieTiltOn:212,DssGraphShowPolarCoordinateAxis:215,DssGraphShowPolarConnectLines:218,DssGraphStockDataValueType:222,DssGraphShowBubbleGrid:245,DssGraphSDShowDataText:247,DssGraphShowTitleSeries:248,DssGraphConnectStackBars:249,DssGraphLegendBox:250,DssGraphLinkColors:260,DssGraph3DCustomView:265,DssGraph3DGridFloor:277,DssGraph3DGridLWall:278,DssGraph3DGridRiser:279,DssGraph3DGridRWall:280,DssGraph3DColTitleLocation:285,DssGraph3DLYTitleLocation:287,DssGraph3DRowTitleLocation:288,DssGraph3DRYTitleLocation:289,DssGraph3DScalefreqX:299,DssGraph3DScalefreqY:300,DssGraph3DScalefreqZ:301,DssGraphShow3DScatterLine:308,DssGraphShow3DLineToLWall:309,DssGraphShow3DLineToFloor:310,DssGraphShow3DLineToRWall:311,DssGraphSD3DRiserType:312,DssGraphShow3DShowDataLabelsBox:313,DssGraph3DOffScaleTypeX:314,DssGraph3DOffScaleTypeY:315,DssGraph3DOffScaleTypeZ:316,DssGraphShow3DCHeader:318,DssGraphShow3DColTitle:319,DssGraph3DShowDataText:320,DssGraphShow3DLNumber:321,DssGraphShow3DLYTitle:322,DssGraphShow3DRNumber:323,DssGraphShow3DRYTitle:324,DssGraphShow3DRHeader:325,DssGraphShow3DRowTitle:326,DssGraphShow3DFloor:327,DssGraphShow3DLegend:328,DssGraphShow3DLWall:329,DssGraphShow3DRWall:330,DssGraph3DViewStruct:337,DssGraphACMColorModel:549,DssGraphLegendItems:554,DssGraphSeriesColor:556,DssGraphReverseGroup:558,DssGraphReverseSeries:559,DssGraphSeriesByColumn:560,DssGraphAreaBackColor:561,DssGraphAreaTransparency:563,DssGraphAreaColor:564,DssGraphAreaPattern:566,DssGraphAreaSFX:567,DssGraphFontAlign:570,DssGraphFontTransparency:573,DssGraphFontColor:574,DssGraphFontName:576,DssGraphFontRotation:578,DssGraphVirtualFontSize:583,DssGraphFontStyle:584,DssGraphType:585,DssGraphLineTransparency:587,DssGraphLineColor:588,DssGraphLinePattern:589,DssGraphVirtualLineWidth:591,DssGraphFootnoteLocation:592,DssGraphFrameLocation:593,DssGraphSubTitleLocation:594,DssGraphTitleLocation:595,DssGraphShowfootnote:596,DssGraphShowSubtitle:597,DssGraphShowTitle:598,DssGraphFontBox:601,DssGraphFontSize:603,DssGraphLockFontSize:604,DssGraphLineWidth:605,DssGraphAreaAlpha:608,DssGraphLineAlpha:609,DssGraphFontAlpha:610,DssGraphAreaCustomBevelEffect:612,DssGraphFormatDataTextAdv:616,DssGraphFormatXAdv:618,DssGraphFormatY1Adv:619,DssGraphFormatY2Adv:620,DssGraphFormatZAdv:621,DssGraphMiddleValue:630,DssGraphSplitYPosition:631,DssGraphAxisShowUserLine:632,DssGraphAxisUserLineValue:633,DssGraphAxisUserLineAxis:634,DssGraphMarkerLayout:637,DssGraphPieDataValueLoc:638,DssGraphPieDataLabelLoc:639,DssGraph2DOrdSpaceMode:642,DssGraphLegendLock:644,DssGraphGridStepY1:645,DssGraphGridStepY2:646,DssGraphGridStepX:647,DssGraphDataTextShowConnectLine:652,DssGraphGridLineZ:658,DssGraphScaleZ:659,DssGraphStaggerZ:660,DssGraph2ScaleEndZ:662,DssGraph2ExcludeZeroZ:663,DssGraph2ScaleDirectionZ:664,DssGraphGridStepZ:665,DssGraphGaugeInfo:668,DssGraphGaugeFancyBox:669,DssGraphSDMarkerSize:671,DssGraphSDMarkerShape:683,DssGraphMetric1:690,DssGraphMetric2:691,DssGraphStockStyle:692,DssGraph2ScaleDirectionY3:693,DssGraph2ExcludeZeroY3:694,DssGraphGridLineY3:697,DssGraphFormatY3Adv:699,DssGraphGridStepY3:701,DssGraphOffScaleTypeY3:702,DssGraphShow2DY3:704,DssGraph2DSideY3:706,DssGraphStaggerY3:707,DssGraph2DPlaceY3:709,DssGraph2ScaleEndY3:710,DssGraph2DScaleFreqY3:713,DssGraphScaleY3:714,DssGraph2ScaleDirectionY4:715,DssGraph2ExcludeZeroY4:716,DssGraphGridLineY4:719,DssGraphFormatY4Adv:721,DssGraphGridStepY4:723,DssGraphOffScaleTypeY4:724,DssGraphShow2DY4:726,DssGraph2DSideY4:728,DssGraphStaggerY4:729,DssGraph2DPlaceY4:731,DssGraph2ScaleEndY4:732,DssGraph2DScaleFreqY4:735,DssGraphScaleY4:736,DssGraphSpiderLines:739,DssGraphPolarStartAngle:740,DssGraphMetric3:742,DssGraphRadarCircularDataLines:782,DssGraphRemoteAxis:784,DssGraphConnectFirstLast:790,DssGraphGaugeShowAxisLabelsOutside:791,DssGraphGaugeShowNeedle:792,DssGraphTailShape:793,DssGraphPieForceRound:794,DssGraphGaugeStyleValue:795,DssGraphGaugeBorderStyleValue:796,DssGraphGaugeBorderThicknessValue:797,DssGraphGaugeRangeThicknessValue:798,DssGraphGaugeRangeStartAngleValue:799,DssGraphGaugeRangeStopAngleValue:800,DssGraphGaugeNeedleStyleValue:801,DssGraphCurvedLines:804,DssGraphAreaBevelEffect:879,DssGraphFontAntiAlias:881,DssGraphFormatDataTextY3:695,DssGraphFormatDataTextY4:717,DssGraphColorPalette:10000,DssGraphOriContent:10001,DssGraphFillEffect:10002,DssGraphGradient:10003,DssGraphSDShowToolTip:10004,DssGraphSDToolTip:10005,DssGraphSDRegressionType:10006,DssGraph2LogScale:10007,DssGraphManualMajor:10008,DssGraphManualMinor:10009,DssGraph2ScaleDirection:10010,DssGraphShow2DAxisLine:10011,DssGraph2ExcludeZero:10012,DssGraph2ScaleUseMax:10013,DssGraph2ScaleUseMin:10014,DssGraph2ScaleMax:10015,DssGraph2ScaleMin:10016,DssGraphShow2DAxisLabels:10017,DssGraph2ScaleEndMax:10018,DssGraph2ScaleEndMin:10019,DssGraphShow2DAxisMajor:10020,DssGraphShow2DAxisMinor:10021,DssGraph2DSide:10022,DssGraphStyleMajor:10023,DssGraphStyleMinor:10024,DssGraphCountMajor:10025,DssGraphCountMinor:10026,DssGraphShowTotalValue:10027,DssGraph2DPie:10028,DssGraphShowDataValue:10029,DssGraphShowDVPercent:10030,DssGraphShowDataLabel:10031,DssGraphShowPieLabelOnSide:10032,DssGraphShowMarker:10033,DssGraphShowMetric1:10034,DssGraphShowMetric2:10035,DssGraphShowMetric3:10036,DssGraphMetric1Style:10037,DssGraphMetric2Style:10038,DssGraphMetric3Style:10039,DssGraphShowLine:10040,DssGraphShowToolTip:10041,DssGraphToolTip:10042,DssGraphAxisAutoFit:10043,DssGraphAxisStagger:10044,DssGraphAxisScaleFreq:10045,DssGraphMetric1Value:10046,DssGraphMetric2Value:10047,DssGraphMetric3Value:10048,DssGraph2AxisFormatText:10049,DssGraph2AxisFormatDataText:10050,DssGraphDPI:10051,DssGraphDocSize:10052,DssGraphAutoArrange:10053,DssGraph2DSplitYAutomatic:10054,DssGraphHistogramRangeMin:10055,DssGraphHistogramRangeMax:10056,DssGraphHistogramBuckets:10057,DssGraphGaugeSAngle:10058,DssGraphGaugeEAngle:10059,DssGraphGaugeThickness:10060,DssGraphGauge1Show:10061,DssGraphGauge1Min:10062,DssGraphGauge1Max:10063,DssGraphGauge2Show:10064,DssGraphGauge2Min:10065,DssGraphGauge2Max:10066,DssGraphGauge3Show:10067,DssGraphGauge3Min:10068,DssGraphGauge3Max:10069,DssGraphGauge4Show:10070,DssGraphGauge4Min:10071,DssGraphGauge4Max:10072,DssGraphGauge5Show:10073,DssGraphGauge5Min:10074,DssGraphGauge5Max:10075,DssGraphAxisDataTextPlace:10076,DssGraphAxisNumberFormat:10077,DssGraphAxisDataNumberFormat:10078,DssGraphAxisHasErrorBar:10079,DssGraphAxisHasMiddleValue:10080,DssGraphHeight:10081,DssGraphWidth:10082,DssGraphPicture:10083,DssGraph3DTurnXCounterClockwise:10084,DssGraph3DTurnYCounterClockwise:10085,DssGraph3DTurnZCounterClockwise:10086,DssGraph3DTurnXClockwise:10087,DssGraph3DTurnYClockwise:10088,DssGraph3DTurnZClockwise:10089,DssGraph3DMoveXTowardsOrigin:10090,DssGraph3DMoveYTowardsOrigin:10091,DssGraph3DMoveZTowardsOrigin:10092,DssGraph3DMoveXAwayFromOrigin:10093,DssGraph3DMoveYAwayFromOrigin:10094,DssGraph3DMoveZAwayFromOrigin:10095,DssGraph3DDecreaseCubeX:10096,DssGraph3DDecreaseCubeY:10097,DssGraph3DDecreaseCubeZ:10098,DssGraph3DIncreaseCubeX:10099,DssGraph3DIncreaseCubeY:10100,DssGraph3DIncreaseCubeZ:10101,DssGraph3DDecreaseWallX:10102,DssGraph3DDecreaseWallY:10103,DssGraph3DDecreaseWallZ:10104,DssGraph3DIncreaseWallX:10105,DssGraph3DIncreaseWallY:10106,DssGraph3DIncreaseWallZ:10107,DssGraph3DPanXLeft:10108,DssGraph3DPanYUp:10109,DssGraph3DRelative:10110,DssGraph3DPanXRight:10111,DssGraph3DPanYDown:10112,DssGraph3DAbsolute:10113,DssGraph3DZoomIn:10114,DssGraph3DIncreasePerspectiveDistortion:10115,DssGraph3DStepSize:10116,DssGraph3DZoomOut:10117,DssGraph3DDecreasePerspectiveDistortion:10118,DssGraph3DInitMatrix:10119,DssGraphGaugeQBShow:10120,DssGraphGaugeQBStart:10121,DssGraphGaugeQBStop:10122,DssGraphEnhancedSeriesEffect:10123,DssGraphLocale:10124,DssGraph3DViewStructName:10125,DssGraphLabelsDistance:10126,DssGraphLegendDetails:10127,DssGraphDefaultsInitialized:10128,DssGraphShow3DAxisMajor:10129,DssGraphGradientColorMode:10130,DssGraphLegendDetailsNEW:10131,DssGraphFrameLocationNEW:10132,DssGraph3DColTitleLocationNEW:10133,DssGraph3DRowTitleLocationNEW:10134,DssGraphLabelsDistanceNEW:10135,DssGraphDocSizeNEW:10136,DssGraphUseManualHistogramBuckets:10137,DssGraphFontSize100:10138,DssGraphUseSpecialSeries:10140,DssGraphIsOnlyAdditionalMetrics:10170};mstrmojo.vi.viz.EnumVisualizationTemplates={UNKNOWN_GRAPHMATRIX_TYPE:-1,GRID:0,HEATMAP:1,GOOGLEMAP:2,PIE:3,RING:4,GRAPHMATRIXVERTICALBARSTACKED:6,GRAPHMATRIXVERTICALBARCLUSTERED:7,GRAPHMATRIXVERTICALBARPERCENT:8,GRAPHMATRIXHORIZONTALBARSTACKED:9,GRAPHMATRIXHORIZONTALBARCLUSTERED:10,GRAPHMATRIXHORIZONTALBARPERCENT:11,GRAPHMATRIXVERTICALLINESTACKED:12,GRAPHMATRIXVERTICALLINECLUSTERED:13,GRAPHMATRIXVERTICALLINEPERCENT:14,GRAPHMATRIXHORIZONTALLINESTACKED:15,GRAPHMATRIXHORIZONTALLINECLUSTERED:16,GRAPHMATRIXHORIZONTALLINEPERCENT:17,GRAPHMATRIXSCATTERCIRCLEMM:18,GRAPHMATRIXSCATTERGRIDCIRCLEAA:19,GRAPHMATRIXBUBBLECIRCLEMM:21,GRAPHMATRIXBUBBLEGRIDCIRCLEAA:22,GRAPHMATRIXSCATTERSQUAREAM:23,GRAPHMATRIXSCATTERSQUAREMM:24,GRAPHMATRIXSCATTERGRIDSQUAREAA:25,GRAPHMATRIXBUBBLESQUAREAM:26,GRAPHMATRIXBUBBLESQUAREMM:27,GRAPHMATRIXBUBBLEGRIDSQUAREAA:28,GRAPHHORIZONTALBARCLUSTERED:29,GRAPHMATRIXVERTICALAREASTACKED:30,GRAPHMATRIXVERTICALAREAPERCENT:31,GRAPHMATRIXVERTICALAREACLUSTERED:32,GRAPHMATRIXHORIZONTALAREASTACKED:40,GRAPHMATRIXHORIZONTALAREAPERCENT:41,GRAPHMATRIXHORIZONTALAREACLUSTERED:42,GRAPHHORIZONTALBARDUALAXISCLUSTERED:33,GRAPHHORIZONTALBARDUALAXISABSOLUTE:34,GRAPHHORIZONTALLINEABSOLUTE:35,GRAPHHORIZONTALLINEDUALAXISABSOLUTE:36,GRAPHHORIZONTALAREAABSOLUTE:37,GRAPHHORIZONTALAREADUALAXISABSOLUTE:38,GRAPHVERTICALBARCLUSTERED:39,GRAPHVERTICALBARDUALAXISCLUSTERED:43,GRAPHVERTICALBARDUALAXISABSOLUTE:44,GRAPHVERTICALBARDUALAXISSTACKED:45,GRAPHVERTICALLINEABSOLUTE:46,GRAPHVERTICALLINESTACKED:47,GRAPHVERTICALLINEPERCENT:48,GRAPHVERTICALLINEDUALAXISABSOLUTE:49,GRAPHVERTICALLINEDUALAXISSTACKED:50,GRAPHVERTICALAREAABSOLUTE:51,GRAPHVERTICALAREAPERCENT:52,GRAPHVERTICALAREASTACKED:53,GRAPHVERTICALAREADUALAXISABSOLUTE:54,GRAPHVERTICALAREADUALAXISSTACKED:55,GRAPHCOMBINATIONBARAREA:56,GRAPHCOMBINATIONBARAREADUALAXIS:57,NETWORK:58,IMAGELAYOUT:59,GOOGLEMAPDENSITY:60,GRAPHMATRIXPIE:61,GRAPHMATRIXRING:62,GRAPHHORIZONTALBARABSOLUTE:63,GRAPHHORIZONTALBARPERCENT:64,GRAPHHORIZONTALBARSTACKED:65,GRAPHVERTICALBARABSOLUTE:66,GRAPHVERTICALBARPERCENT:67,GRAPHVERTICALBARSTACKED:68,ESRIMAP:69,GRAPHMATRIXVERTICALBARAUTOMATIC:70,GRAPHMATRIXHORIZONTALBARAUTOMATIC:71,GRAPHMATRIXVERTICALLINEAUTOMATIC:72,GRAPHMATRIXHORIZONTALLINEAUTOMATIC:73,GRAPHMATRIXVERTICALAREAAUTOMATIC:74,GRAPHMATRIXHORIZONTALAREAAUTOMATIC:75};(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.VisEnum");var D=mstrmojo.array,A=mstrmojo.VisEnum,B=A.NETWORK_LAYOUT.CIRCULAR;mstrmojo.netviz._CircularLayout=mstrmojo.provide("mstrmojo.netviz._CircularLayout",{_mixinName:"mstrmojo.netviz._CircularLayout",init:function(E){if(this._super){this._super(E);}if(this.layouts===undefined){this.layouts={};}this.layouts[B]=C;}});function C(L,N,J){function K(Q){if(Q.isExcluded){return ;}var R=Q.sprite.getGeometry(),P,O;G+=F;R.x=Math.cos(G)*E+E+I;R.y=Math.sin(G)*E+E+I;Q.sprite.setGeometry(R);if(Q.edges){for(P=0,O=Q.edges.length;P<O;P++){Q.edges[P].sprite.setGeometry({x:E+I,y:E+I,type:"bezier"});}}G+=F;}var G=0,I=J.maxR+A.NETWORK_CIRCLE_BORDER_WIDTH,M=J.circleCount,H=M*I*2,E=Math.max(Math.min(N.width,N.height)/2-I,H/(2*Math.PI)),F=Math.PI/M;N.currentLayout=B;D.forEach(L.nodes,K);}}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.VisEnum");var D=mstrmojo.array,A=mstrmojo.VisEnum,B=A.NETWORK_LAYOUT.LINEAR;mstrmojo.netviz._LinearLayout=mstrmojo.provide("mstrmojo.netviz._LinearLayout",{_mixinName:"mstrmojo.netviz._LinearLayout",init:function(E){if(this._super){this._super(E);}if(this.layouts===undefined){this.layouts={};}this.layouts[B]=C;}});function C(H,J,G){var E=H.nodes,I=E.length,M=G.dimension,K=Math.max(10,(180-M)/I)/2,F=J.height,L=-1*K,N=F/2;J.currentLayout=B;D.forEach(H.nodes,function(P){if(P.isExcluded){return ;}var O=P.sprite,Q=O.getGeometry(),R=Q.s;Q.x=L+R+K;Q.y=N;O.setGeometry(Q);L+=2*(R+K);});D.forEach(H.edges,function(Q){var V=Q.from.sprite,W=Q.to.sprite,O=V.getGeometry(),P=W.getGeometry(),T=P.x-O.x,S=P.y-O.y,X=(O.x+P.x)/2,U=(O.y+P.y)/2;Q=Q.sprite;var R={x:X-S*0.5,y:U+T*0.5};Q.setGeometry(R);});}}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom,D=Math;mstrmojo.gm._IsAnchorable={PLACEMENT_ABOVE:1,PLACEMENT_BELOW:2,PLACEMENT_LEFT:3,PLACEMENT_RIGHT:4,anchor:null,anchorPosition:null,boundary:null,boundaryPosition:null,popupNodeName:"infoNode",tipNodeName:"tipNode",baseTipClass:"arrow",infoNodeOffset:25,popupNodeOffset:0,placementOrder:[this.PLACEMENT_ABOVE,this.PLACEMENT_BELOW,this.PLACEMENT_LEFT,this.PLACEMENT_RIGHT],hasScrollbars:function G(){return(!mstrApp.isTouchApp||!mstrApp.isTouchApp());},positionDialog:function E(){if(!this.anchorPopup()){if(typeof this._super==="function"){this._super();}}},positionTipNode:function A(I){var J=this.baseTipClass,K=this[this.tipNodeName];K.className=J+" "+I;},getTipDimension:function B(){var J=this[this.tipNodeName],I=C.position(J);return I;},anchorPopup:function F(){this.positionTipNode("top");var K=this.anchor,b=this.boundary,n=this[this.popupNodeName],q=this.infoNodeOffset,h=this.popupNodeOffset,k=this.hasScrollbars(),Y=this.anchorPosition||C.position(K,true),M=this.boundaryPosition||C.position(b,true),s=M.w,L=M.h,c=n.offsetWidth,O=n.offsetHeight,U=c/2,I=O/2,W=this.getTipDimension(),g=D.min(W.h,W.w),P=D.max(W.h,W.w)/2;if(k){s-=15;L-=15;}var Z=C.contains(b,n),j=Z?0:M.y,r=s/2-U,Q=L/2-I+j,m=-1000,t=-1000;if(Z){Y.x=Y.x-M.x;Y.y=Y.y-M.y;}var f=Y.y+Y.h,N=Y.x+Y.w,e=Y.x>c,o=((N+c)<s),R=Y.y>O,l=((f+O)<L),T=this,V=function(i,w,u){return D.min(D.max(i,u),D.max(w,0));},d=function(){if((Y.x<s)&&R){var i=Y.x+(Y.w/2);T.positionTipNode("bottom");t=Y.y-g-h;Q=t-O+q;r=V(0,s-c,i-U);m=V(Y.x,N,i)-P;return true;}return false;},J=function(){if((Y.x<s)&&l){var i=Y.x+(Y.w/2);T.positionTipNode("top");t=f+h;Q=t+g-q;r=V(0,s-c,i-U);m=V(Y.x,N,i)-P;return true;}return false;},a=function(){if((Y.y<L)&&e){var i=Y.y+(Y.h/2);T.positionTipNode("right");m=Y.x-g-h;r=m-c+q;Q=V(j,L-O,i-I);t=V(Y.y,f,i)-P;return true;}return false;},X=function(){if((Y.y<L)&&o){var i=Y.y+(Y.h/2);T.positionTipNode("left");m=N+h;r=m+g-q;Q=V(j,L-O,i-I);t=V(Y.y,f,i)-P;return true;}return false;},S=[],p;for(p=0;p<this.placementOrder.length;p++){switch(this.placementOrder[p]){case this.PLACEMENT_ABOVE:S.push(d);break;case this.PLACEMENT_BELOW:S.push(J);break;case this.PLACEMENT_LEFT:S.push(a);break;case this.PLACEMENT_RIGHT:S.push(X);break;}}for(p=0;p<S.length;p++){if(S[p]()){break;}}Q=D.round(Q);r=D.round(r);t=D.round(t);m=D.round(m);this.applyPopupNodePos(Q,r,t,m);return true;},applyPopupNodePos:function H(K,J,M,I){var O=this[this.tipNodeName],L=O.style,P=this[this.popupNodeName],N=P.style;L.top=M+"px";L.left=I+"px";N.top=K+"px";N.left=J+"px";}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var C=function(R){var Q=(mstrApp.docModelData&&mstrApp.docModelData.mid)||"";return R.k+"-"+Q;},E={},L=mstrmojo.array;mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",{_mixinName:"mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",postBuildRendering:function G(){this._super();this.setup();if(!this.getExp()){if(E[C(this)]){this.highlight.apply(this,E[C(this)]);}else{this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}},getExp:function(){var Q=this.model.data,R=Q&&Q.sc&&Q.sc.exp;return R;},clearsBrushingOnHighlight:true,brushSub:null,clearSub:null,getAssociatedNodes:function B(){var Q=this.defn.an;return Q&&Q.length>0?Q:[];},hasAssociatedNodes:function K(){var Q=this.getAssociatedNodes();return Q.length>0;},getDocModelForEvent:function P(){return this.model&&this.model.docModel;},setup:function H(){var Q=this.getDocModelForEvent(),R=this.id;if(Q){[this.brushSub,this.clearSub].forEach(function(S){if(S){S.clear();}});this.brushSub=Q.attachEventListener("brushing",R,this.onBrushing);this.clearSub=Q.attachEventListener("clearBrush",R,this.onClearBrushing);}},handlesMultiSelection:function I(){return(this._super&&this._super())||this.getAssociatedNodes().length>0;},getHighlightKeys:function F(){var R=[],Q=this.getAssociatedNodes();Q.forEach(function(S){R.push(S.k);});return R;},onSelectionChange:function J(R){var S=false;if(this._super){S=this._super(R);}var Q=this.getDocModelForEvent();if(this.clearsBrushingOnHighlight){Q.raiseEvent({name:"clearBrush",from:this});}if(this.handlesMultiSelection()&&!S){Q.raiseEvent({name:"brushing",from:this,keys:this.getHighlightKeys()});return true;}return false;},onBrushing:function A(R){var Q=R.keys.slice();if(Q.indexOf(this.k)!==-1){if(this.highlight){var S=R.from;this.highlight(S.getSelectionType(),S.getSelectionHash());Q.push(S.k);this.getDocModelForEvent().raiseEvent({name:"clearBrush",from:this,excludeKeys:Q});}else{throw new Error(this.scriptClass+" must implement highlight method.");}}},onClearBrushing:function O(R){var Q=false;if(L.indexOf(R.excludeKeys,this.k)===-1){if(this._super){Q=this._super(R);}if(!Q){var S=this.getAssociatedNodes();if(L.find(S,"k",R.from.k)!==-1){this.clearSelections(true);}}}return true;},highlight:function D(){E[C(this)]=arguments;if(this._super){this._super.apply(this,arguments);}},clearSelections:function N(){delete E[C(this)];if(this._super){this._super.apply(this,arguments);}},updateAssociatedNodesOnMove:function M(){this.clearSelections(true);this.endSelections();delete this.defn.an;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.gm.GMEnums");var A=mstrmojo.gm.EnumIdentityType;mstrmojo.gm.GMIdentities=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMIdentities"});mstrmojo.gm.HeaderCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.HeaderCellIdentity",eid:undefined,v:undefined,tid:undefined,n:undefined,tui:undefined,fid:undefined,o:undefined,isRowAttribute:undefined,at:undefined,dei:undefined,dpt:undefined});mstrmojo.gm.GeneralIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GeneralIdentity",objType:undefined});mstrmojo.gm.TitleCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.TitleCellIdentity",tid:undefined,fid:undefined,n:undefined,tui:undefined,isRowAttribute:undefined,otp:undefined,init:function(B){this.fid=B.fid;this.tid=B.id;this.isRowAttribute=B.isRowAttribute;if(B.isRowAttribute){this.objType=A.ROW_TITLE;}else{this.objType=A.COL_TITLE;}this.n=B.n;this.otp=B.otp;this.ost=B.ost;this.tui=B.tui;}});mstrmojo.gm.MetricAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.MetricAxisTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AttributeAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AttributeAxiTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AxisIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AxisIdentity",isNumericAxis:undefined,metricIdxArr:undefined,attrIdArr:undefined});mstrmojo.gm.ColorSquareIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.ColorSquareIdentity",init:function(B){this._super(B);this.comb=this.getElementsCombination();},getElementsCombination:function(){var B,F=this.token,C,H,G,E,I,D;if(F){D=[];C=F.levels;H=F.elements;G=F.types;B=C.length;for(E=0;E<B;E++){I={eid:H[E],tid:C[E]};if(G){I.tp=G[E];}D.push(I);}return D;}return undefined;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=false;mstrmojo.netviz.Bitmap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.netviz.Bitmap",init:function(F){if(this._super){this._super();}var I=F.scale||1,H=F.left,G=F.top,E=F.right,D=F.bottom;if(I>1){H/=I;G/=I;E/=I;D/=I;}this._colCnt=Math.ceil(E)-Math.floor(H)+1;this._rowCnt=Math.ceil(D)-Math.floor(G)+1;this._scale=I;this._bits=[];},testZeros:function(H){var J=C.call(this,H),G=J.left,I=J.top,L=J.right,D=J.bottom,M=this._bits,K=this._colCnt,N,F,E;for(N=I;N<=D;N+=1){for(F=G;F<=L;F+=1){E=M[N*K+F];if(E&&A(E,H)){return false;}}}return true;},set:function(G){var I=C.call(this,G),F=I.left,H=I.top,L=I.right,D=I.bottom,M=this._bits,K=this._colCnt,N,E,J;for(N=H;N<=D;N+=1){for(E=F;E<=L;E+=1){J=N*K+E;if(!M[J]){M[J]=G;}}}}});function A(E,D){if(E.left>D.right||D.left>E.right){return false;}if(E.top>D.bottom||D.top>E.bottom){return false;}return true;}function C(G){var I=G.left,H=G.top,F=G.right,D=G.bottom,E=this._colCnt,K=this._rowCnt,J=this._scale;if(J>1){I/=J;H/=J;F/=J;D/=J;}I=Math.floor(I);F=Math.ceil(F);H=Math.floor(H);D=Math.ceil(D);if(F>=E){F=E-1;}if(I<0){I=0;}if(I>F){I=F;}if(D>=K){D=K-1;}if(H<0){H=0;}if(H>D){H=D;}return{top:H,left:I,bottom:D,right:F};}if(B){(function(){function D(I,H,G,F){return{left:I,top:H,right:G,bottom:F};}var E=new mstrmojo.netviz.Bitmap({left:0,top:0,right:100,bottom:100});console.assert(E.testZeros(D(10,15,50,20)));E.set(D(10,25,50,50));console.assert(E._bits.reduce(function(F){return F+1;},0)===41*26);console.assert(E.testZeros(D(10,15,50,20)));console.assert(!E.testZeros(D(10,15,50,25)));console.assert(!E.testZeros(D(0,0,100,100)));console.assert(E.testZeros(D(75,70,100,75)));console.assert(E.testZeros(D(-1,-1,-1,-1)));console.assert(E.testZeros(D(-1,100,1000,1000)));console.assert(!E.testZeros(D(50,50,50,50)));}());}}());(function(){var E=false;mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.netviz.PropertyParser=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.netviz.PropertyParser",methods:{unmarshal:function(W,V){var U=this;U._withConfig({unmarshal:true},function(){U.parsedProps[W]=V;});},marshal:function(V){var U=this;return U._withConfig({marshal:true},function(){return U.parsedProps[V];});}},init:function(U){if(this._super){this._super(U);}this.config={marshal:false,unmarshal:false};this.parsedProps={};},parse:function(V,X){var W=this,Y=this.parsedProps,U=this.methods;this.raw=V;this.schema=X;Object.keys(U).forEach(function(Z){W.defineMethod(Z,U[Z]);});Object.keys(X).forEach(function(Z){var a=X[Z];W.defineProperty(Z,a.type);Y.unmarshal(Z,V[a.key]);});return Y;},defineProperty:function(U,c){var b=this,W=b.config,a=this.parsedProps,V=(this.schema||{})[U]||{},g=V.preSet,Y=V.postSet,X=V.preGet,d=V.postGet,f=V.key,e=this.raw,Z;if(!T(c)){throw new TypeError("type does not implement required methods");}Object.defineProperty(a,U,{enumerable:true,get:function(){var h=Z;if(h!==undefined&&W.marshal){if(X instanceof Function){h=X.call(a,h,U,e,f);}h=c.marshal(h);if(d instanceof Function){h=d.call(a,h,U,e,f);}}return h;},set:function(i){var h=i;if(W.unmarshal){if(g instanceof Function){h=g.call(a,h,U,e,f);}h=c.unmarshal(h);if(Y instanceof Function){h=Y.call(a,h,U,e,f);}}if(h!==undefined&&!c.validate(h)){throw new TypeError("Invalid value in setter. Consider unmarshal(prop, val).");}Z=h;}});},defineMethod:function(X,U){var V=this,W=V.parsedProps;if(!L(X)||!(U instanceof Function)){return ;}Object.defineProperty(W,X,{enumerable:false,value:U.bind(V)});},_withConfig:function(W,Z){var X=this.config,Y=Object.keys(W||{}),V=Y.reduce(function(b,a){b[a]=X[a];return b;},{}),U;Y.forEach(function(a){X[a]=W[a];});U=Z();Y.forEach(function(a){X[a]=V[a];});return U;}});var O=Object.prototype.toString,G=mstrmojo.netviz.PropertyParser;function J(X,W,V){var U=parseInt(X,W);return isNaN(U)?V:U;}function N(U){return O.call(U)==="[object Number]";}function L(U){return O.call(U)==="[object String]";}var I=mstrmojo.declare(mstrmojo.Base,[],{scriptClass:"mstrmojo.netviz.PropertyParser.Property",init:function(U){if(this._super){this._super();}this.defval=U.defval;},marshal:function(U){return JSON.stringify(U).replace(/"/g,"'");}});G.BooleanProperty=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.PropertyParser.BooleanProperty",unmarshal:function(U){if(U===undefined){return this.defval;}return U.toString()==="true";},validate:function(U){return U===true||U===false||O.call(U)==="[object Boolean]";}});G.IntegerProperty=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.PropertyParser.IntegerProperty",unmarshal:function(U){return J(U,10,this.defval);},validate:N});G.FloatProperty=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.PropertyParser.FloatProperty",unmarshal:function(V){var U=parseFloat(V);return isNaN(U)?this.defval:U;},validate:N});G.JsonProperty=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.PropertyParser.JsonProperty",unmarshal:function(U){function V(X){var W;if(X!==undefined){try{W=JSON.parse(X.replace(/'/g,'"'));}catch(Y){W=X;}}return W;}if(typeof U==="string"){return V(U);}if(U!==undefined&&U!==null){return U;}return this.defval;},validate:function(U){return true;}});G.StringProperty=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.PropertyParser.StringProperty",unmarshal:function(U){if(U!==undefined&&U!==null){return U.toString();}return this.defval;},marshal:function(U){return U;},validate:L});var K=["BooleanProperty","StringProperty","JsonProperty","IntegerProperty","FloatProperty"];K.forEach(function(U){var V=G[U];V.preset=function(W){return new V({defval:W});};});function T(U){return Q(U,["marshal","unmarshal","validate"]);}function Q(V,U){if(!V){return false;}return(U||[]).every(function(W){return V[W] instanceof Function;});}if(E){var C=new G(),F=G.BooleanProperty,H=G.IntegerProperty,B=G.FloatProperty,S=G.StringProperty,M=G.JsonProperty;var R={x:1,y:{x:"n+1"},z:true,m:3.14};var P={bp1:"false",bp2:"true",bp3:"",dp1:"12",dp2:22,fp1:23.3,fp2:"3.14",sp1:"foobar",jp1:R,jp3:"transparent"};var A={boolProp1:{key:"bp1",type:F.preset(false)},boolProp2:{key:"bp2",type:F.preset(false)},boolProp3:{key:"bp3",type:F.preset(false)},boolProp4:{key:"bp4",type:F.preset(false)},boolProp5:{key:"bp5",type:F.preset(true)},decimalProp1:{key:"dp1",type:H.preset(-1)},decimalProp2:{key:"dp2",type:H.preset(-1)},decimalPropn:{key:"dpn",type:H.preset(-1)},floatProp1:{key:"fp1",type:B.preset(0)},floatProp2:{key:"fp2",type:B.preset(0)},floatProp3:{key:"fp3",type:B.preset(0.03)},stringProp1:{key:"sp1",type:S.preset("")},stringProp2:{key:"sp2",type:S.preset("string")},jsonProp1:{key:"jp1",type:M.preset({})},jsonProp2:{key:"jp2",type:M.preset({})},jsonProp3:{key:"jp3",type:M.preset("error")}};var D=C.parse(P,A);console.assert(Object.keys(D).length===Object.keys(A).length,"wrong property count");console.assert(D.unmarshal instanceof Function,"unmarshal not found");console.assert(D.marshal instanceof Function,"marshal not found");console.assert(D.boolProp1===false);console.assert(D.boolProp2===true);console.assert(D.boolProp3===false);console.assert(D.boolProp4===false);console.assert(D.boolProp5===true);console.assert(D.marshal("boolProp5")==="true");D.unmarshal("boolProp5","false");console.assert(D.boolProp5===false);console.assert(D.marshal("boolProp5")==="false");console.assert(D.decimalProp1===12);console.assert(D.decimalProp2===22);console.assert(D.decimalPropn===-1);D.unmarshal("decimalProp1",42);console.assert(D.decimalProp1===42);console.assert(D.marshal("decimalProp1")==="42");console.assert(D.floatProp1===23.3);console.assert(D.marshal("floatProp1")==="23.3");console.assert(D.floatProp2===3.14);console.assert(D.floatProp3===0.03);D.unmarshal("floatProp3",100);console.assert(D.floatProp3===100);console.assert(D.stringProp1==="foobar");console.assert(D.stringProp2==="string");D.unmarshal("stringProp2","quux");console.assert(D.marshal("stringProp2")==="quux");D.unmarshal("stringProp2",42);console.assert(D.stringProp2==="42");console.assert(JSON.stringify(D.jsonProp1)===JSON.stringify(R));console.assert(Object.keys(D.jsonProp2).length===0);console.assert(D.jsonProp3==="transparent");console.assert(D.marshal("jsonProp1")===JSON.stringify(R).replace(/"/g,"'"));D.unmarshal("jsonProp2",true);console.assert(D.jsonProp2===true);console.assert(D.marshal("jsonProp2")==="true");console.info("PropertyParser: all tests processed");}}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.DSSTimeUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSTimeUtil",DaysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],DaysBeforeMonth:[0,31,59,90,120,151,181,212,243,273,304,334],DateAbove1970:[1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981]});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.DSSTimeUtil");var H=24*60*60*1000;var A=60*60*1000;var L=60*1000;var C=1000;var K=24;var D=24*60;var J=24*60*60;var B=new mstrmojo.chart.common.DSSTimeUtil();mstrmojo.chart.common.DSSDateTime=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSDateTime",mnYear:1899,mnMonth:12,mnDay:30,mnHour:0,mnMinute:0,mnSecond:0,mnMillisecond:0,mnWeek:-1,mnDayOfWeek:-1,init:function P(T){if(!T||!T.ifTime){this.mnYear=1899;this.mnMonth=12;this.mnDay=30;this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;this.mnWeek=-1;this.mnDayOfWeek=-1;return ;}var S=0;var V=23242571;var R=-693593;if(T.ifTime>V){this.mnYear=65535;this.mnMonth=12;this.mnDay=30;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<R){this.mnYear=1;this.mnMonth=1;this.mnDay=1;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}else{if(T.ifTime>0){var W=this.DAYSToYMD(Math.floor(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<0){var W=this.DAYSToYMD(Math.ceil(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}}}}S*=H;var U=S+0.5;if(U==H){U--;}if(U>0){this.mnHour=Math.floor(U/A);U-=this.mnHour*A;this.mnMinute=Math.floor(U/L);U-=this.mnMinute*L;this.mnSecond=Math.floor(U/C);U-=this.mnSecond*C;this.mnMillisecond=Math.floor(U);}else{this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;}this.mnWeek=-1;this.mnDayOfWeek=-1;this.Sanitize();},Sanitize:function O(){var R=false;if(this.mnHour==24&&this.mnMinute==0&&this.mnSecond==0){R=true;this.mnHour=0;}if(this.mnMonth<1){this.mnMonth=1;}else{if(this.mnMonth>12){this.mnMonth=12;}}if(this.mnDay<1){this.mnDay=1;}else{if(this.mnDay>B.DaysInMonth[this.mnMonth-1]){this.mnDay=B.DaysInMonth[this.mnMonth-1];if(this.mnMonth==2&&this.IsLeapYear(this.mnYear)){this.mnDay++;}}}if(this.mnHour<0){this.mnHour=0;}else{if(this.mnHour>23){this.mnHour=23;}}if(this.mnMinute<0){this.mnMinute=0;}else{if(this.mnMinute>59){this.mnMinute=59;}}if(this.mnSecond<0){this.mnSecond=0;}else{if(this.mnSecond>59){this.mnSecond=59;}}if(this.mnMillisecond<0){this.mnMillisecond=0;}else{if(this.mnMillisecond>999){this.mnMillisecond=999;}}if(R){var S=this.ToMilliseconds();S=S+H;this.init({ifTime:this.MillisecondsToDATE(S)});}},IsLeapYear:function Q(R){return((R&3)==0)&&((R%100)!=0||(R%400)==0);},ToMilliseconds:function I(){var R=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var S=R*H;S+=this.mnHour*A+this.mnMinute*L+this.mnSecond*C+this.mnMillisecond;return S;},MillisecondsToDATE:function E(S){var R=Math.floor(S/H);var T=(S-R*H)/H;if(T<0){R--;T+=1;}return R>=0?R+T:R-T;},DAYSToYMD:function N(T){var W=0;var Y=0;var S=0;T+=693959;var V=Math.floor(T/365);var U=T-V*365;var X=Math.floor(V/4)-Math.floor(V/100)+Math.floor(V/400);U=U-X;if(U<0){V--;U+=365;while(U<=0){V--;U+=365;}}var R=T-(V*365+Math.floor(V/4)+(V%4?1:0)-Math.floor((V-1)/100)+Math.floor((V-1)/400));if(R==365&&!this.IsLeapYear(V)){W=V+1;Y=1;S=1;return{year:W,month:Y,day:S};}if(R==-1){W=V-1;Y=12;S=31;return{year:W,month:Y,day:S};}W=V;Y=12;while(R<B.DaysBeforeMonth[Y-1]){Y--;}S=R-B.DaysBeforeMonth[Y-1]+1;if(Y>2&&this.IsLeapYear(W)){S--;if(S==0){Y--;S=B.DaysInMonth[Y-1];if(Y==2){S++;}}}return{year:W,month:Y,day:S};},YMDToDAYS:function G(U,T,S){if(T<1||T>12){return 0;}var R=U*365+Math.floor(U/4)+(U%4?1:0)-Math.floor((U-1)/100)+Math.floor((U-1)/400);R+=B.DaysBeforeMonth[T-1];if(T>2&&this.IsLeapYear(U)){R++;}R+=S-1;R-=693959;return R;},ToDATE:function F(){var S=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var R=this.mnHour/K+this.mnMinute/D+this.mnSecond/J+this.mnMillisecond/H;if(S>=0){return S+R;}else{return S-R;}},DateTimeOrder:function M(R){if(this.mnYear>R.mnYear){return 1;}else{if(this.mnYear<R.mnYear){return -1;}}if(this.mnMonth>R.mnMonth){return 1;}else{if(this.mnMonth<R.mnMonth){return -1;}}if(this.mnDay>R.mnDay){return 1;}else{if(this.mnDay<R.mnDay){return -1;}}if(this.mnHour>R.mnHour){return 1;}else{if(this.mnHour<R.mnHour){return -1;}}if(this.mnMinute>R.mnMinute){return 1;}else{if(this.mnMinute<R.mnMinute){return -1;}}if(this.mnSecond>R.mnSecond){return 1;}else{if(this.mnSecond<R.mnSecond){return -1;}}if(this.mnMillisecond>R.mnMillisecond){return 1;}else{if(this.mnMillisecond<R.mnMillisecond){return -1;}}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var C=Math,I=mstrmojo.dom,K=mstrmojo.css,E="active",L="ready",J=6,F=10,O=10,P={LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",BUTTON:"button"};mstrmojo.util.ui.LassoSelectorParamsType=null;function Q(S,R,T){return function(U){S.call(mstrmojo.all[R],U,T);};}function M(S){var U=S.view,T=I.eventTarget(window,S),R=this.lassoSelector;if(this.clickFromLassoResizer||(T!==R&&this.clickFromCreatingLasso)){I.stopPropogation(U,S);I.preventDefault(U,S);}delete this.clickFromLassoResizer;delete this.clickFromCreatingLasso;}function D(b,U){var R,d,S,Z,a=b.clientX,Y=b.clientY,T=this.lassoSelector,X=U.startX,W=U.startY,V=U.containerPos,e=a-V.x,c=Y-V.y;e=C.min(e,U.maxX);e=C.max(e,U.minX);c=C.min(c,U.maxY);c=C.max(c,U.minY);R=C.abs(e-X);d=C.abs(c-W);Z=C.min(W,c);S=C.min(X,e);T.style.width=R+"px";T.style.height=d+"px";T.style.left=S+"px";T.style.top=Z+"px";U.width=R;U.height=d;U.left=S;U.top=Z;if(R<=O&&d<=O){T.style.visibility="hidden";K.removeClass(T,E);}else{T.style.visibility="visible";K.addClass(T,E);document.body.style.cursor="crosshair";}}function H(T,W){var V=window.document,S=this.lassoSelector,U=W.width,R=W.height;I.detachEvent(V,"mousemove",W.fnMove);I.detachEvent(V,"mouseup",W.fnUp);delete W.fnMove;delete W.fnUp;document.body.style.cursor="default";if(!U||U===0||!R||R===0){this.dismissLassoSelector();}else{W.ctrlKey=T.ctrlKey;this.lassoSelected(W);this.clickFromCreatingLasso=true;K.addClass(S,L);this.positionBoxResizers();}}function N(g){var Z,c=g.view,b,a,d=I.eventTarget(window,g),R=d.getAttribute("type"),V=this.lassoSelector,S=this.lassoContainer,h=this.excludeAttrArr,U=h.length,Y,X={};delete this.clickFromLassoResizer;delete this.clickFromCreatingLasso;if(!V||!S||!this.lassoSelectorEnabled){return ;}if(I.contains(this.dropDownBtn,d,true)){return ;}for(Z=0;Z<U;Z++){if(R===h[Z]){return ;}}this.lassoSelecting();Y=I.position(S);b=g.clientX-Y.x;a=g.clientY-Y.y;X.containerPos=Y;X.maxX=Y.w;X.maxY=Y.h;X.startX=b;X.startY=a;X.minX=0;X.minY=0;X.info=this.getLassoSelectionInfo(d);X.useAsSelectorOrBrushes=this.useAsSelectorOrBrushes||((this.hasAssociatedNodes&&this.hasAssociatedNodes())||this.selectorControl);V.style.visibility="hidden";V.style.left=b+"px";V.style.top=a+"px";V.style.width="0px";V.style.height="0px";K.removeClass(V,L);S.appendChild(V);var T=this.id,e=document,W=Q(D,T,X),f=Q(H,T,X);I.attachEvent(e,"mousemove",W);I.attachEvent(e,"mouseup",f);X.fnMove=W;X.fnUp=f;I.stopPropogation(c,g);I.preventDefault(c,g);}function G(a,U){var Y=U.index,X=U.startX,W=U.startY,V=U.containerPos,f=a.clientX-V.x,e=a.clientY-V.y,T=this.lassoSelector;f=C.min(f,U.maxX);f=C.max(f,U.minX);e=C.min(e,U.maxY);e=C.max(e,U.minY);var d=f-X,c=e-W;if(Y%3===1){d=0;}if(Y===3||Y===5){c=0;}var R=U.selWidth,b=U.selHeight,S=U.selLeft,Z=U.selTop;if(d!==0){if(Y%3===0){S+=d;R-=d;}else{R+=d;}}if(c!==0){if(Y<3){Z+=c;b-=c;}else{b+=c;}}T.style.width=R+"px";T.style.left=S+"px";T.style.top=Z+"px";T.style.height=b+"px";U.width=R;U.left=S;U.height=b;U.top=Z;this.positionBoxResizers();}function B(R,U){var T=R.view,S=window.document;I.detachEvent(S,"mousemove",U.fnMove);I.detachEvent(S,"mouseup",U.fnUp);delete U.fnMove;delete U.fnUp;this.clickFromLassoResizer=true;I.stopPropogation(T,R);I.preventDefault(T,R);this.lassoSelectorResized(U);}function A(V){var T=V.view,h=I.eventTarget(window,V),U=parseInt(h.getAttribute("index"),10),a=this.lassoSelector,Z=a.offsetLeft,j=a.offsetTop,Y=Z+a.offsetWidth,g=j+a.offsetHeight,R=I.position(this.lassoContainer),f=0,c=0,d=R.w,b=R.h,e={};if(U%3===0){d=Y-F;}if(U%3===2){f=Z+F;}if(U<3){b=g-F;}if(U>=6){c=j+F;}e.minX=f;e.minY=c;e.maxX=d;e.maxY=b;e.startX=V.clientX-R.x;e.startY=V.clientY-R.y;e.index=U;e.containerPos=R;e.selWidth=a.clientWidth;e.selHeight=a.clientHeight;e.selLeft=a.offsetLeft;e.selTop=a.offsetTop;var X=this.id,i=document,S=Q(G,X,e),W=Q(B,X,e);I.attachEvent(i,"mousemove",S);I.attachEvent(i,"mouseup",W);e.fnMove=S;e.fnUp=W;I.stopPropogation(T,V);I.preventDefault(T,V);}mstrmojo.util.ui._LassoSelector=mstrmojo.provide("mstrmojo.util.ui._LassoSelector",{_mixinName:"mstrmojo.util.ui._LassoSelector",lassoContainer:undefined,lassoSelector:undefined,lassoSelectorEnabled:true,excludeAttrArr:null,boxResizers:null,useDropDownBtn:false,dropDownBtn:undefined,init:function(R){if(this._super){this._super(R);}this.excludeAttrArr=[];this.boxResizers=[];},registerLassoSelector:function(S,V,U){V=V||[];V.push(P.LASSO_SELECTOR);V.push(P.LASSO_RESIZER);V.push(P.BUTTON);this.lassoContainer=S;this.excludeAttrArr=V;this.useDropDownBtn=U||false;I.attachEvent(S,"mousedown",Q(N,this.id));I.attachEvent(S,"click",Q(M,this.id));var R=this.lassoSelector;if(!R){R=this.createLassoSelector();this.lassoSelector=R;}var T=R.parentNode;if(T){T.removeChild(R);}},createLassoSelector:function(){var U,V,S,T=this.boxResizers,R=document.createElement("div");R.setAttribute("class","lasso-selector");R.setAttribute("type",P.LASSO_SELECTOR);R.setAttribute("draggable",false);R.draggable=false;for(U=0;U<9;U++){if(U!==4){V=document.createElement("div");V.setAttribute("class","lasso-selector-resizer");V.setAttribute("type",P.LASSO_RESIZER);V.setAttribute("index",String(U));V.setAttribute("draggable",false);V.draggable=false;R.appendChild(V);T[U]=V;I.attachEvent(V,"mousedown",Q(A,this.id));}}K.addClass(T[0],["top","left"]);K.addClass(T[1],["top"]);K.addClass(T[2],["top","right"]);K.addClass(T[3],["left"]);K.addClass(T[5],["right"]);K.addClass(T[6],["bottom","left"]);K.addClass(T[7],["bottom"]);K.addClass(T[8],["bottom","right"]);if(this.useDropDownBtn===true){S=document.createElement("div");S.setAttribute("type",P.BUTTON);S.setAttribute("class","lasso-selector-dropdown-button");R.appendChild(S);I.attachEvent(S,"click",Q(this.lassoButtonClicked,this.id));this.dropDownBtn=S;}return R;},positionBoxResizers:function(){var T=this.boxResizers,S=this.lassoSelector,U=S.clientWidth,R=S.clientHeight,W=(U-J)>>1,V=(R-J)>>1;T[1].style.left=W+"px";T[3].style.top=V+"px";T[5].style.top=V+"px";T[7].style.left=W+"px";},dismissLassoSelector:function(){var R=this.lassoSelector;if(R){K.removeClass(R,[E,L]);if(R.parentNode){R.parentNode.removeChild(R);}}},isLassoSelectorActive:function(){function S(V,U){var W=V.className.split(/\s+/),T;for(T=0;T<W.length;T++){if(W[T]===U){return true;}}return false;}var R=this.lassoSelector;if(R){return S(R,E);}return false;},getLassoSelectionInfo:mstrmojo.emptyFn,lassoSelected:mstrmojo.emptyFn,lassoSelecting:mstrmojo.emptyFn,lassoButtonClicked:mstrmojo.emptyFn,lassoSelectorResized:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.color","mstrmojo.css","mstrmojo.hash");var A=mstrmojo.color,C=mstrmojo.css,H=mstrmojo.hash;function B(I){I=G(I);if(isNaN(I)){I=0;}I%=16777216;return{b:I%(1<<8),g:(I%(1<<16))>>8,r:(I%(1<<24))>>16};}function F(M,N,L){M=G(M);L=H.copy(L,{retainGradientObject:false});if(D(M)){var K=F(M.c1,N),I=F(M.c2,N);if(L.retainGradientObject){return{c1:K,c2:I,or:M.or};}return C.buildGradient(M.or,K,I).v;}if(typeof N==="number"){var J=B(M);if(isNaN(M)){N=0;}return"rgba("+J.r+" ,"+J.g+" ,"+J.b+" ,"+N+" )";}else{if(isNaN(M)){M=0;}return"#"+(16777216+M%16777216).toString(16).substring(1,7);}}function G(K){var J=K.c1,I=K.c2;if(D(K)){return{c1:G(J),c2:G(I),or:K.or};}if(typeof K==="number"){return K;}if(typeof K!=="string"){return NaN;}if(K[0]!=="#"){return parseInt(K,10);}if(K.length===4){K=K[0]+K[1]+K[1]+K[2]+K[2]+K[3]+K[3];}return parseInt(K.substring(1,7),16);}function E(K,I){var N=K.value,P=K.opacity;if(D(N)){return["c1","c2"].reduce(function(U,V,T){var W=E({value:N[V],opacity:P},I);U.value[V]=W.value;if(T===0){U.opacity=W.opacity;}return U;},{value:{or:N.or}});}if(N==="transparent"){K.value=I.value;}var M=A.hex2rgb(F(K.value)),L=A.hex2rgb(F(I.value)),S=K.opacity,R=I.opacity,Q=1-S,O,J;J=S+R*Q;O=M.map(function(T,U){return(T*S+L[U]*R*Q)/J;});return{value:"#"+A.rgb2hex.apply(undefined,O),opacity:J};}function D(I){return I&&["c1","c2","or"].every(function(J){return I.hasOwnProperty(J);});}mstrmojo.util.color=mstrmojo.provide("mstrmojo.util.color",{getCSSColorString:F,getColorValue:G,mix:E,isGradientColor:D,getRGB:B,createCanvasFillPattern:function(K,Q,J,P,I,O){var L=K.value,N=K.opacity,M;if(D(L)){M=Q.createLinearGradient(J,P,I,O);M.addColorStop(0,F(L.c1,N));M.addColorStop(1,F(L.c2,N));}else{M=F(L,N);}return M;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");var B="___value",E="___parent",A="___key_map",D="___IS_LEAF";mstrmojo.netviz.ObservableModel=mstrmojo.declare(mstrmojo.Obj,[],{scriptClass:"mstrmojo.netviz.ObservableModel",init:function(H){var G=[];H=H||{};H=mstrmojo.hash.clone(H);var L=Object.keys(H),F=L.length,K,J;for(K=0;K<F;K++){var I=L[K],M=H[I];if(!(M instanceof Object)){J=new C();J[B]=M;J[D]=true;H[I]=J;}else{H[I]=J=new C(M);}G.push(J);H[I][E]=this;}if(this._super){this._super(H);}this.addDisposable(G);this[A]=H;},getParent:function(){return this[E];},getChildrenKeys:function(){return Object.keys(this[A]);},isLeafNode:function(){return this[D];},getValue:function(){if(this.isLeafNode()){return this[B];}return this.getRawObject();},setValue:function(G,K){var F=this.getValue();var M,J,I,L,H;if(this.isLeafNode()){if(!(G instanceof Object)){if(F!==G){this[B]=G;if(!K){this.raiseEvent({name:"valueChanged",target:this,oldValue:F,newValue:G});}}}else{this[B]=undefined;this[D]=undefined;this[A]=G;M=Object.keys(G);J=M.length;H=this.addDisposable(new C(G));for(I=0;I<J;I++){L=M[I];this[L]=H[L];H[E]=this;}if(!K){this.raiseEvent({name:"valueChanged",target:this,oldValue:F,newValue:G});}}}else{var N=this.getChildrenKeys();J=N.length;for(I=0;I<J;I++){L=N[I];this[L]=undefined;}if(!(G instanceof Object)){this[D]=true;this[B]=G;this[A]=undefined;this[B]=G;if(!K){this.raiseEvent({name:"valueChanged",target:this,oldValue:F,newValue:G});}}else{this[A]=G;M=Object.keys(G);J=M.length;H=this.addDisposable(new C(G));for(I=0;I<J;I++){L=M[I];this[L]=H[L];H[E]=this;}if(!K){this.raiseEvent({name:"valueChanged",target:this,oldValue:F,newValue:G});}}}},stopPropagation:function(F){F._isStopped=true;},raiseEvent:function(G){if(this._super){this._super(G);}if(G._isStopped){return ;}var F=this.getParent();if(F){F.raiseEvent(G);}},getRawObject:function(){var G={},J=this.getChildrenKeys(),F=J.length,I;for(I=0;I<F;I++){var H=J[I],K=this[H];if(K.isLeafNode()){G[H]=K.getValue();}else{G[H]=K.getRawObject();}}return G;}});var C=mstrmojo.netviz.ObservableModel;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.DocDataService");mstrmojo.requiresDescs(5421,5422);var P=mstrmojo.hash,L=mstrmojo.array,F=mstrmojo.desc,G=mstrmojo.DocDataService,B=mstrmojo.string;function K(f,g,c,Y){var h=f.selCells,d=[],b=f.model.getCellTitleInfo(g).title,e,a,Z=function(i){var j=f.getCellForNode(i);d.push(f.getCellUnitIndex(j));e=j.dpt;},X;if(typeof Y==="string"&&Y.indexOf(";")>0){a=parseInt(Y.substring(Y.indexOf(";")+1),10);Y=parseInt(Y.substring(0,Y.indexOf(";")),10);}if(a===1&&!c){h.reverse().forEach(Z);}else{if(a===1){X=1;h.forEach(Z);}else{h.forEach(Z);}}return{oId:b.id,oTp:b.otp,depth:e,ordinals:d.join(","),sliceId:f.sid,viewKey:f.k,funcVal:Y,switchOrder:X};}function C(Z,Y,b){var e=Z.getDEInfo(Y),d=e&&e.deObject&&e.deObject.des,c=1,a=b===-1?F(5187,"Group"):F(5188,"Calculation"),X=function(f){return f.n===a+" "+c;};while(true&&d){if(d.some(X)){c++;}else{break;}}Z.controller.onAddQuickDE(Z,P.copy(K(Z,Y,false,b),{act:"addQuickDE",deName:a+" "+c}));}function W(X,Y){for(did in X){if(L.find(X[did].att,"did",Y)>-1){return did;}}return undefined;}function A(i,Y,f,b,X){var e=f.es,Z=f.id,d;X.forEach(function(j){d=j[0];if(d.eid.indexOf(Z)<0){e.push({n:B.decodeHtmlString(d.v,true),t:mstrmojo.vi.enums.EnumDerivedElementType.LIST,v:d.eid.split(";")[0].slice(1)});}});var a=i.controller,h=i.model&&i.model.docModel,g=a._getXtabCallback(i),c={act:"applyDEChanges",deId:Y.did,attId:Y.attId,attName:Y.attName,dsId:Y.dsId,k:i&&i.k,actions:[U(f,b)]};h.addUpdateObjects(c,{id:c.deId||c.attId,type:47,flag:G.PARTIAL_UPDATE_FLAGS.DATA_CHANGE});g=mstrmojo.func.wrapMethods(g,h.getDatasetsUpdateCallback(),{success:function(){h.callOnNDECreated([f]);}});a.submitUndoRedoUpdates(c,{},g);}function U(Y,X){return{act:"update",position:X+1,item:Y};}function E(Z,Y,c,b,a){var X=Z.model.getCellTitleInfo(Y).title;Z.controller.onSetDEHierachyOptions(Z,{act:"setDEHierarchyOptions",oId:X.id,eId:c.id,splice:b,expand:a});}function O(b,Y){var X=[],a=Y.t,Z=Y.did;b.getDropZones().zones.forEach(function(c){((c&&c.items)||[]).forEach(function(e){var f=e.t,d=e.did;if(f!==21&&d!=="-1"&&d!=="00000000000000000000000000000000"&&((f===4&&a===4)||(f!==4&&a!==4))&&d!==Z&&L.find(X,"did",d)===-1){X.push(e);}});});b.docModel.getDatasetUnits(a===4?["mx"]:["att"]).forEach(function(c){if(L.find(X,"did",c.did)===-1&&c.did!==Z&&!c.hide){X.push(c);}});return mstrmojo.vi.ui.DatasetUnitMenuUtils.getSortedDatasetUnits(X);}mstrmojo.vi.ui.rw._XtabDE=mstrmojo.provide("mstrmojo.vi.ui.rw._XtabDE",{scriptClass:"mstrmojo.vi.ui.rw._XtabDE",derivedElementGroup:function M(X){C(this,X,-1);},addElementsToGroup:function N(Z,a,Y,X){A(this,Z,a,Y,X);},derivedElementCalculation:function D(Y,X){C(this,Y,X);},separateOthers:function Q(X,Y){E(this,X,Y,1,1);},renameDEList:function I(X){this.controller.onEditQuickDEList(this,P.copy(K(this,X,true,-1),{act:"editQuickDEList",deName:X.v}));},editQuickDECalculationNumberFormat:function J(Y,Z){var X=K(this,Y);X.deId=Z.de.id;X.act="editQuickDECalculationNumberFormat";this.controller.editQuickDECalculationNumberFormat(this,P.copy(X,this.model.docModel.createNumberFormatParams(Z)));},editDECalculation:function H(Y,X){if(X!==undefined&&X!==null){this.controller.editQuickDECalculation(this,P.copy(K(this,Y,true,X),{act:"editQuickDECalculation"}));}else{this.controller.onEditQuickDECalculation(this,P.copy(K(this,Y,true),{act:"editQuickDECalculation",deName:Y.v}));}},removeQuickDE:function S(d,h){var a=h&&h.deObject,b=(a&&a.des)||[],i=this,k=2,g=L.filter(b,function(l){return !l.ido;},{max:k+1}),j={success:function(n){var o=i.controller.view.getLayouts(),l=o.length,m;for(m=0;m<l;m++){i.controller.model.data.layouts[m].loaded=false;o[m].defn.loaded=false;}}};if(a&&(b.length<=k||g.length<=k)){var c=[],f=this.zonesModel.getZoneForObject(a.did),Z=O(this.zonesModel,a),Y=L.find(Z,"did",a.attId),X=Y>=0?Z[Y]:null,e={};if(X&&f){c.push(this.model.getAddTemplateUnitAction(X,a.dsId,f.id,L.find(f.items,"dsId",a.dsId)));c=[this.zonesModel.getUpdateTemplateAction(c)];e=this.controller._getXtabCallback(this);}c.push({act:"removeNDEFromDS",dsid:a.dsId,oid:a.did,partialRetrieval:{nodes:this.model.docModel.getSourceFilterKeys(this.zonesModel.getHost().k)}});e=mstrmojo.func.wrapMethods(e,this.controller.model.getDatasetsUpdateCallback(),this.controller.getReloadLayoutViewCallback(),j);this.controller.submitUndoRedoUpdates(c,null,e,G.REQUEST_DEFN_DATA);}else{this.controller.removeQuickDE(this,P.copy(K(this,d),{act:"removeQuickDE"}));}},derivedElementsEdit:function T(f,a){if(!a){a=this.getDEInfo(f);}var b=this.model,Y=b.getCellTitleInfo(f).title,Z=a&&a.deObject,e=a&&a.de,X,d,c;if(!Z){X=this.gridData.datasetId||W(b.docModel.datasets,Y.id);d=Y.id;c=Y.n;}this.controller.openDEEditor(this,{dsId:X,attId:d,attName:c,deObj:Z,elemId:e&&e.id,dispName:f.n});},getDEInfo:function V(Y){var Z=this.model,X=Z.getCellTitleInfo(Y).title,a=Y.dei,b,c;if(X.ost!==12033){return null;}b=Z.docModel.getDEObject(X.id);if(b&&a!==undefined){c=b.des[a];}return{deObject:b,de:c,ttl:X};},getOthersDEInfo:function R(Y){var X;L.forEach(Y.des,function(Z){if(Z.t===4){X=Z;return false;}});return X;}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.Container");mstrmojo.requiresDescs(1442,2140);var C=mstrmojo.dom;mstrmojo.ui.menus.ToolbarEditor=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._IsMenuPopup,mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.menus.ToolbarEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-ToolbarEditor mstrmojo-ui-MenuEditor {@cssClass}" style="..." mstrAttach:mouseover,mouseout,click><div class="te-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},popupConfig:null,children:null,autoCloses:false,locksHover:true,visible:true,onclick:function B(E){C.stopPropogation(null,E.e);},init:function D(F){this._super(F);var E=this.popupConfig,G=E.contents;if(!G){throw new Error("Cannot open editor without editor content.");}this.cssClass=E.cssClass;this.addChildren(G);}});}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.VisMenuList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.VisMenuList",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);},getItemProps:function A(F,D){var E=this._super(F,D);E.tag="a";E.addCls("mstrmojo-ui-Menu-item");return E;},onselectionChange:function B(D){this._super(D);this.parent.data.set("valid",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.ToolbarEditor","mstrmojo.hash");mstrmojo.ui.menus.ToolbarEditorConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.ToolbarEditorConfig",cssClass:"",contents:null,init:function C(D){this._super(D);this.initBindings();},clear:function A(){this._super();this.contents=null;},newInstance:function B(D){return new mstrmojo.ui.menus.ToolbarEditor(mstrmojo.hash.copy({popupConfig:this},D));}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasLayout","mstrmojo.css");var B=mstrmojo.css;mstrmojo.vi.ui.editors.EditorGroup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",layoutConfig:{w:{containerNode:"100%"},xt:true},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},showDivider:true,isNested:false,isContainer:false,init:function D(E){this._super(E);B.addWidgetCssClass(this,["mstrmojo-vi-EditorGroup","ctrl-group"]);},preBuildRendering:function A(){var E=[];if(this.showDivider){E.push("divide");}if(this.isContainer){E.push("container");}if(E.length){B.addWidgetCssClass(this,E);}return this._super();},getLayoutOffsets:function C(){return{h:0,w:this.isNested?0:18};}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.array","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._Formattable","mstrmojo._IsDocumentTemplate","mstrmojo.Label","mstrmojo.ui.menus.MenuConfig");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");var T={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"};var D=["background-color","fx"],I=mstrmojo.array;mstrmojo.VisBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._IsDocumentTemplate],{scriptClass:"mstrmojo.VisBase",updated:false,waitingForData:false,node:null,skipReRender:false,updateFormatsOnUpdate:true,setModel:function M(Z){this.set("model",Z);},destroy:function W(){var Z=this.model;if(Z&&Z.destroy){Z.destroy();delete this.model;}this._super();},resize:function X(){var Z=this.getFormats();if(parseInt(Z.height,10)===0||parseInt(Z.width,10)===0){this.domNode.style.display="none";}else{this.setDimensions(Z.height,Z.width);this.domNode.style.display="";}},setDimensions:function O(b,a){var Z=this._super(b,a);if(Z&&this.hasRendered&&!this.skipReRender){this.reRender();}return Z;},reRender:function F(){this.unrender();this.render();},getWidth:function B(){return parseInt(this.width,10);},getHeight:function K(){return parseInt(this.height,10);},getLeft:function R(){return parseInt(this.left,10);},getTop:function A(){return parseInt(this.top,10);},buildRendering:function H(){this.height=this.getHeight();this.width=this.getWidth();this.left=this.getLeft();this.top=this.getTop();if(!this.updated){this.update();}this._super();},initFromVisProps:function V(){},postBuildRendering:function(){var Z=this.isEmpty();this._super();this.raiseEvent({name:"toggleCtrlOverlay",visible:Z,controls:this.getVisEmptyMsgControls()});this.applyBackground();return !Z;},applyBackground:function(){var a=this.defn&&this.defn.fmts,f=(a&&a.p_fmts)||a,c={},d,Z,e,b;if(mstrApp.isExpress&&f){d=this.formatHandlers=this.formatHandlers||{};e=d.domNode=d.domNode||[];Z="BG";b=I.indexOf(e,Z);if(b<0){e.push(Z);}I.forEach(D,function(g){if(f[g]){c[g]=f[g];}});this.applyCSSFormatToNode("domNode",c);}},update:function G(c){c=c||this.node;if(c){var Z=c.data;if(Z){this.model.set("data",Z);}this.waitingForData=!!Z.nsj;if(this.waitingForData){var a="ServerJsonRWDStyle";var d=this.model,b=d.getDataService(),e={host:this,nodes:[this.k]},g;if(Z.wid!==undefined){e.slices=[Z.wid];}g=mstrmojo.func.wrapMethods(d.docModel.getUpdateColorMapCallback(),d.docModel.getUpdateThemePaletteCallback(true),d.controller._getXtabCallback(this));b.retrieveServerJson(e,g,{preserveUndo:true,style:{name:a,params:{treesToRender:3}},params:{styleName:a}});this.updated=true;return false;}this.updateContentFormats(c);}if(this.model){var h=this.model&&this.model.docModel;this.initFromVisProps(this.model.vp);if(h&&h.getDocBuilder){var f=h.getDocBuilder().getMojoVisName(c);if(f){c.data.visName=f;}}}this.updated=true;if(this._super){return this._super(c);}return true;},updateContentFormats:function(e){var d=this.parent,c=e.defn,Z=c&&c.fmts;if(this.updateFormatsOnUpdate&&Z){if(this.clearFormats){this.clearFormats();}if(d&&d._createFormats&&!Z.p_fmts){d._createFormats();}Z=(this.getFormats&&this.getFormats())||Z;for(var b in T){if(T.hasOwnProperty(b)){var a=T[b];if(b in Z){this[a]=Z[b];}}}}},isEmpty:function L(){return false;},getVisEmptyMsgControls:function C(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(11668,"Drag objects here.")}];},getModel:function N(){return this.model;},getData:function J(){return this.model.data;},getRowsAndCols:function(){var Z=this.model.data.gts;return(Z.row||[]).concat(Z.col||[]);},getExp:function(){var Z=this.model.data,a=Z&&Z.sc&&Z.sc.exp;return a;},getDocModel:function S(){return this.model&&this.model.docModel;},getTitleRMCPopup:mstrmojo.emptyFn,getMenuHandler:function U(){return mstrmojo.emptyFn;},renderErrorMessage:function Y(Z){this.domNode.innerHTML='<div class="mstrmojo-message">'+Z+"</div>";},getMessageID:function E(){return this.model.docModel.mid||this.model.mid;},performAction:function Q(Z){var b=this.model.getAction(Z),a=b&&b.h;if(a&&this.controller[a]){this.controller[a](this,b.a);return true;}return false;},findSelectorControl:function P(){var a=this.getData(),Z=a&&a.sc;if(Z&&parseInt(Z.ct,10)===6){this.selectorControl=Z;this.isMultiSelect=true;}else{delete this.selectorControl;}return this.selectorControl;}});})();(function(){mstrmojo.requiresCls("mstrmojo.VisBase","mstrmojo.DocPortlet");var L={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"},P,B;mstrmojo.Vis=mstrmojo.declare(mstrmojo.VisBase,null,{scriptClass:"mstrmojo.Vis",offsetTop:0,offsetLeft:0,isAndroid:window.navigator.userAgent.indexOf("Android")!=-1,reRenderOnDimensionChg:true,isVis:function(){return true;},setModel:function Q(R){this._super(R);if(R.data){this.set("model",R.data);}this.xtabModel=R;if(this.controller&&typeof (this.controller.getPageByTree)!="undefined"){this.controller.getPageByTree(false);}},destroy:function O(){this._super();var R=this.xtabModel;if(R&&R.destroy){R.destroy();delete this.xtabModel;}},setDimensions:function N(T,S){var R=this._super(T,S);if(R&&this.hasRendered&&this.reRenderOnDimensionChg){this.reRender();}return R;},buildRendering:function M(){if(this.parent instanceof mstrmojo.DocPortlet){delete this.left;delete this.top;this.height=this.fmts&&this.fmts.height;}this._super();},postBuildRendering:function G(){P=this.width;B=this.height;this.adjustWidgetOffsets();this._super();},adjustWidgetOffsets:function E(){var R=this.domNode,S={top:0,left:0};if(typeof (mstr)!="undefined"&&mstr.utils.BoxModel){S.top=mstr.utils.BoxModel.getElementSumOffsetTop(R);S.left=mstr.utils.BoxModel.getElementSumOffsetLeft(R);}else{if(typeof (mstrmojo)!="undefined"){S=mstrmojo.boxmodel.offset(R);}}this.offsetTop=S.top;this.offsetLeft=S.left;},update:function F(V){V=V||this.node;if(V){if(V.data){this.set("model",V.data);if(this.xtabModel&&this.xtabModel.set){this.xtabModel.set("data",V.data);}this.model=V.data;if(this.model.layoutModel){this.layoutModel=this.model.layoutModel;}if(this.model.layoutNode){this.layoutNode=this.model.layoutNode;}mstrmojo.hash.copy(V.data.extProps,this);}var T=this.controller,S=T.view,X=(S.hasRendered&&S.getCurrentLayout&&S.getCurrentLayout());if(T.view.fullScreenInfoWindow&&(X&&X.defn.visName)){var W=mstrApp.rootView.getContentDimensions();this.height=W.h+"px";this.width=W.w+"px";}else{this.fmts=V.defn.fmts||V.defn.units[this.model.k].fmts;var R=this.fmts;if(R){for(var U in L){v=L[U];if(U in R){this[v]=R[U];}}}}}if(this.model){this.initFromVisProps(this.model.vp);}this.updated=true;return true;},getModel:function A(S){if(S){var R=mstrmojo.Vis.getVisGrid(this.layoutModel,this.layoutNode,S);if(R){return R.data;}else{alert(mstrmojo.desc(8427,"Incorrect visualization properties encountered.  Data may be inconsistent.  Please reset your properties."));return{};}}else{return this.model;}},getDataParser:function K(R){return new mstrmojo.Vis.DataParser(this.getModel(R));},renderErrorMessage:function H(R){this.domNode.innerHTML='<div class="mstrmojo-message">'+R+"</div>";},getMessageID:function J(){return this.model.mid&&this.model.mid||this.xtabModel&&this.xtabModel.docModel&&this.xtabModel.docModel.mid;},hasNoninfowindowTarget:function D(U){var b=this.xtabModel,a=(b&&b.docModel);var c=false;if(a){var Z=a.defn&&a.defn.layouts,T=null;var S;if(Z){for(S in Z){if(Z[S].loaded){T=Z[S];break;}}}var V=T&&T.units;this.selectorTargets={};if(V&&U.scObjList){for(var S=0;S<U.scObjList.length;S++){var W=U.scObjList[S];var X=W.sc.tks.split("\x1E");for(var R=0;R<X.length;R++){var Y=V[X[R]];if(Y){this.selectorTargets[X[R]]=Y;if(!this.isChildOfIfw(V,Y)){c=true;}}}}}}return c;},isChildOfIfw:function I(R,S){while(S){if(S.ifw){return true;}S=R[S.pnk];}return false;},performAction:function C(R){var T=this.xtabModel.getAction(R),S=T&&T.h;if(S&&this.controller[S]){this.controller[S](this,T.a);return true;}return false;}});mstrmojo.Vis.getVisGrid=function(R,Y,S){var W=Y;var U=R.getChildren(Y,false);for(var T=0;T<U.length;T++){var X=U[T];if(X.k==S){return X;}else{var V=mstrmojo.Vis.getVisGrid(R,X,S);if(V){Y=W;return V;}}}};mstrmojo.Vis.DataParser=function(T){var a=mstrmojo.Vis;return{getRowTitles:function(){return new a.Titles(T,true);},getColTitles:function(){return new a.Titles(T,false);},findMetricValue:function(f,k){var j=T.ghs.rhs.items;for(var g in j){var h=j[g].items;var d=true;for(var b in f){if(f[b]!=h[b].idx){d=false;break;}}if(d){return new mstrmojo.Vis.MetricValue(T.gvs.items[g].items[k]);}}},getTotalRows:function W(){var b=T.ghs&&T.ghs.rhs&&T.ghs.rhs.items;return(T.eg||!b)?0:b.length;},getTotalColHeaderRows:function U(){return(!T.ghs.chs.items?0:T.ghs.chs.items.length);},getTotalCols:function R(){return this.getColHeaders(0).size();},getRowHeaders:function Z(b){return new a.Headers(T,b,true);},getColHeaders:function Y(b){return new a.Headers(T,b,false);},getMetricValue:function X(c,b){return new a.MetricValue(T,T.gvs.items[c].items[b]);},getColumnHeaderCount:function V(){return T.gvs.items[0].items.length;},getCSSString:function S(){return T.cssString;}};};mstrmojo.Vis.Titles=function(R,W){var V=(W)?R.gts.row:R.gts.col;return{size:function U(){return V.length;},getTitle:function T(X){return new mstrmojo.Vis.Title(V[X]);},getCSS:function S(X){return R.css[V[X].cni].n;}};};mstrmojo.Vis.Headers=function(S,T,X){var Y=(X)?S.gts.row:S.gts.col;var W=(X)?S.ghs.rhs:S.ghs.chs;var U=W.items&&W.items[T].items;return{size:function Z(){return(!U?0:U.length);},getHeader:function R(a){return U&&U[a]&&new mstrmojo.Vis.Header(U[a],X?Y[a]:Y[T]);},getCSS:function V(a){return U&&S.css[U[a].cni].n;},getHeaderCell:function(a){return U&&U[a];}};};mstrmojo.Vis.Title=function(S){return{getActionType:function(){return S.at;},getDrillPath:function(){return S.dp;},getHeaderValues:function R(){return S.es;},getHeaderName:function T(V){return S.es[V].n;},getHeaderId:function T(V){return S.es[V].id;},getForms:function U(){return S.fs;},getFormId:function(){return S.fid;},getFormType:function(){return S.ftp;},getUnitId:function(){return S.id;},getLinkMap:function(){return S.lm;},getName:function(){return S.n;},getUnitDssType:function(){return S.otp;},getSelectorControl:function(){return S.sc;}};};mstrmojo.Vis.Header=function(T,R){return{getName:function V(){return(T.idx===-1)?"":R.es[T.idx].n;},getElementId:function Y(){return(T.idx===-1)?"":R.es[T.idx].id;},getObjectId:function U(){return(T.idx===-1)?"":R.es[T.idx].oid;},getElementIndex:function S(){return T.idx;},getActionType:function X(){return T.at;},isTotal:function W(){return T.otr===1;}};};mstrmojo.Vis.MetricValue=function(R,Y){var X=Y;return{getValue:function S(){return X.v;},getThresholdType:function T(){return X.ty;},getRawValue:function W(){return X.rv;},getCSS:function U(){return R.css[X.cni].n;},getThresholdValue:function Z(a){if(X.ti==undefined){return a;}return R.th[X.ti].n;},getFillColor:function V(a){if(X.ci==undefined){return a;}return R.fc[X.ci].n;}};};})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Vis","mstrmojo._HasOwnAvatar");var K=mstrmojo.css,I=mstrmojo.dom,F="px";function B(Q,P){return{x:Q.x-P.x,y:Q.y-P.y};}function M(Q,P){return(Q.x-P.x)*(Q.x-P.x)+(Q.y-P.y)*(Q.y-P.y);}function N(P){var Q=P.src.data;return(!Q||!Q.isScrollBar);}mstrmojo.VisLegend=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.gm.VisLegend",bodyCssClass:"",avatarCssClass:"legend-dragged",dropZoneHighlightCss:"legend-dropZone",ownAvatar:true,draggable:true,dropZone:true,dockedPositions:null,calculateDockedPositions:mstrmojo.emptyFn,widget:null,boundaryNode:null,draggableNodeName:"domLegend",legendMarkup:"",extrasMarkup:"",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;position:absolute;" mstrAttach:click,mouseover,mouseout><div class="gm-legend-bg"><div class="{@bodyCssClass}" style="width:{@width}px;height:{@height}px;text-decoration:inherit">{@legendMarkup}</div></div><div class="gm-anchor-point topLeft"></div><div class="gm-anchor-point topRight"></div><div class="gm-anchor-point bottomLeft"></div><div class="gm-anchor-point bottomRight"></div>{@extrasMarkup}</div>',markupSlots:{dropZoneNode:function(){return this.domNode;},domLegend:function(){return this.domNode.firstChild.firstChild;}},postBuildRendering:function(){this._super();this.calculateDockedPositions(this.widget.getWidth(),this.widget.getHeight());this.boundaryNode=this.widget.domNode;this.boundaryPosition=I.position(this.boundaryNode,true);},createAvatar:function D(){return this[this.draggableNodeName];},updateDropZoneNode:function C(R){var P=this.dockedPositions;if(P&&P.length>0){var W=B(R.tgt.pos,this.boundaryPosition);var U=M(W,P[0]),T=0,Q,V;for(Q=1;Q<P.length;Q++){V=M(W,P[Q]);if(V<U){U=V;T=Q;}}if(T!==this.currDockedPositionIdx){var S=this.dropZoneNode.style;S.left=P[T].x+F;S.top=P[T].y+F;if(this.widget.onLegendDropZoneChange){this.widget.onLegendDropZoneChange(P[T],T);}this.currDockedPositionIdx=T;this.updateAlignClass();return true;}}return false;},toggleDropZoneBorder:function O(P){K.toggleClass(this.dropZoneNode,this.dropZoneHighlightCss,P);},isDragValid:N,ondragstart:function E(P){if(!N(P)){return ;}this._super(P);this.toggleDropZoneBorder(true);},ondragmove:function A(P){if(!N(P)){return ;}this.updateDropZoneNode(P);this._super(P);},allowDrop:function H(P){var R=P.src,Q=R&&R.widget;return(Q&&Q!==this&&Q.parent===this.parent);},ondrop:function J(R){var P=this.domLegend;K.removeClass(P,this.avatarCssClass);var S=P.style;S.left="0";S.top="0";this.dropZoneNode.firstChild.appendChild(P);if(this.widget.onLegendDropped){var Q=this.getDockedPosition();this.widget.onLegendDropped(Q&&Q.pos);}R.dropSuccessful=true;},getDockedPosition:function G(){return this.dockedPositions&&this.dockedPositions[this.currDockedPositionIdx];},ondragend:function A(P){if(!N(P)){return ;}this._super(P);if(!P.dropSuccessful){this.ondrop(P);}this.toggleDropZoneBorder(false);},positionAvatar:function L(U){var R=this,Q=this.avatar,S=Q.style,T=this.boundaryPosition;var P=function(V,W){if(V==="x"){if(W<T.x){return T.x;}return Math.min(W,T.x+T.w-R.domNode.offsetWidth);}if(V==="y"){if(W<T.y){return T.y;}return Math.min(W,T.y+T.h-R.domNode.offsetHeight);}};S.left=P("x",U.x)+F;S.top=P("y",U.y)+F;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.hash","mstrmojo.array","mstrmojo.ValidationTextBox","mstrmojo.expr");var K=mstrmojo.emptyFn,B=mstrmojo.hash,H=mstrmojo.array,I=mstrmojo.expr.DTP,F={FILL_COLOR:"Clr",FILL_TRANSPARENT:"FillTrans"},C=1,J=2;function N(T,Q,P,S,R){return{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"fillColor",slot:T,showNoFill:S!==false,showAutomatic:!!R,showGradient:P!==false,selectedValue:"#000000",isHostedWithin:Q||false,postselectedValueChange:function(U){if(this.propName&&this.parent&&this.parent.parent){this.parent.parent.raiseFormatValueChange(this.propName,U.value,U.valueWas);}},postclick:function(U){this.parent.parent.postclick(U);}};}function O(Q){return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillAlpha",slot:Q,col1Width:"100%",col2Width:"10px",children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"fillAlphaText",slot:"col1Node",value:"100",cssText:"text-align:right",dtp:I.INTEGER,required:true,constraints:{min:0,max:100},onvalueChange:function(R){this.valueWas=R.valueWas;},onValid:function P(){if(this.propName&&this.value!==this.valueWas){this.parent.parent.parent.raiseFormatValueChange(this.propName,this.value,this.valueWas);}},postclick:function(R){this.parent.parent.parent.postclick(R);}},{scriptClass:"mstrmojo.Label",slot:"col2Node",text:"%"}]};}mstrmojo.ui.editors.controls.FillConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.FillConfigGroup",propNames:undefined,postclick:K,visibleControls:C+J,fillColorAndTrans:undefined,init:function M(T){this._super(T);var Q=[],W="col1Node",R=T&&T.colorPickerHostWithin,P=T&&T.showGradient,V=T&&T.showNoFill,S=T&&T.showAutomaticInColor,U;if((this.visibleControls&C)>0){Q.push(N(W,R,P,V,S));W="col2Node";}if((this.visibleControls&J)>0){Q.push(O(W));}if(Q.length===1){U={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}this.addChildren([B.copy(U,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillColorAndTrans",children:Q})]);},getChildComp:function L(P){if(P.indexOf(F.FILL_COLOR)!==-1){return this.fillColorAndTrans.fillColor;}if(P.indexOf(F.FILL_TRANSPARENT)!==-1){return this.fillColorAndTrans.fillAlpha.fillAlphaText;}return undefined;},iniChildrenComp:function E(P){this.propNames=P;H.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);},setChildValue:function D(Q,R){var P=this.getChildComp(Q);if(P===undefined){return false;}switch(P.alias){case"fillColor":if(R!==P.selectedValue){P.set("selectedValue",R==="undefined"?"conflict":R);}break;case"fillAlphaText":if(R!==P.value){P.set("value",R==="undefined"?"":R);}break;}},setChildEnable:function G(R,Q){var P=this.getChildComp(R);if(P!==undefined){P.set("enabled",Q);}},setChildrenValue:function A(P){P.forEach(function(Q){this.setChildValue(Q[0],Q[1]);});}});mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS={FILL_COLOR:C,FILL_TRANSPARENCY:J};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.array","mstrmojo.hash","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.LineStyleButton");var L=mstrmojo.emptyFn,I=mstrmojo.array,C=mstrmojo.hash,E=mstrmojo.gm.EnumCombinedLineStyle;var J={LINE_COLOR:"Clr",LINE_STYLE:"Style"},A={"1pt solid":E.THIN,"2pt solid":E.THICK,"1pt dashed":E.DASHED,"1pt dotted":E.DOTTED,none:E.NONE};function D(P,O){return C.copy(O,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"lineColor",slot:P,selectedValue:"#000000",postselectedValueChange:function(Q){if(this.propName){this.parent.parent.raiseFormatValueChange(this.propName,Q.value,Q.valueWas);}},postclick:function(Q){this.parent.parent.postclick(Q);}});}function K(P){return{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:true,showNoneOption:true,defaultSelectedIndex:3,propName:undefined,alias:"lineStyle",slot:P,postInit:function O(){var Q=["mstrmojo-ui-LineStyle"];if(!this.showNoneOption){Q.push("no-none");}mstrmojo.css.addWidgetCssClass(this,Q);(this.list.items||[]).forEach(function(R){R.v=(A[R.id]!==undefined?A[R.id]:A["not defined"]);});},onshowNoneOptionChange:function(Q){var R=["no-none"];if(!Q.value){mstrmojo.css.addWidgetCssClass(this,R);}else{mstrmojo.css.removeWidgetCssClass(this,R);}var S=this.hasRendered;if(S){this.refresh();}},postselectedValueChange:function(R){this._super();var Q=I.find(this.list.items,"id",R.value);if(Q===-1){Q=this.defaultSelectedIndex;}var S=this.list.items[Q].v;if(this.propName){this.parent.parent.setChildEnable(J.LINE_COLOR,S!==A.none);this.parent.parent.raiseFormatValueChange(this.propName,S,A[R.valueWas]);}},postclick:function(Q){this.parent.parent.postclick(Q);}};}mstrmojo.ui.editors.controls.LineConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.LineConfigGroup",propNames:undefined,postclick:L,hideColorControl:false,showGradient:false,showNoFillInColor:true,showAutomaticInColor:false,showNoneOption:true,lineColorAndStyle:undefined,lineTitle:undefined,init:function N(Q){this._super(Q);var O=[],R;O.push(K("col1Node"));if(!this.hideColorControl){O.push(D("col2Node",{showGradient:this.showGradient,showNoFill:this.showNoFillInColor,showAutomatic:this.showAutomaticInColor}));}else{R={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}var P=[];if(this.lineTitle&&this.lineTitle!==""){P.push(new mstrmojo.Label({text:this.lineTitle}));}P.push(C.copy(R,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"lineColorAndStyle",children:O}));this.addChildren(P);},getChildComp:function M(O){if(O.indexOf(J.LINE_COLOR)!==-1){return this.lineColorAndStyle.lineColor;}if(O.indexOf(J.LINE_STYLE)!==-1){return this.lineColorAndStyle.lineStyle;}return null;},iniChildrenComp:function G(P){I.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);var O=this.lineColorAndStyle.lineStyle;O.showNoneOption=this.showNoneOption;O.postInit();},onshowNoneOptionChange:function(O){this.lineColorAndStyle.lineStyle.set("showNoneOption",O.value);},setChildValue:function F(Q,R){var O=this.getChildComp(Q);if(O===undefined){return false;}var P;switch(O.alias){case"lineColor":if(R!==O.selectedValue){O.set("selectedValue",typeof R==="undefined"?"conflict":R);}break;case"lineStyle":if(typeof R==="undefined"){O.list.clearSelect();this.syncControls(function(){O.set("selectedValue","conflict");});}else{P=I.find(O.list.items,"v",R);if(P===-1){P=O.defaultSelectedIndex;}var S=O.list.items[P].id;if(S!==O.selectedValue){O.set("selectedValue",S);}}break;}},setChildEnable:function H(Q,P){var O=this.getChildComp(Q);if(O!==undefined){O.set("enabled",P);}},setChildrenValue:function B(O){O.forEach(function(P){this.setChildValue(P[0],P[1]);});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.num","mstrmojo.array","mstrmojo.VisMenuList","mstrmojo.mstr.EnumFunction","mstrmojo._HasMarkup","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel","mstrmojo.css","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.ui.DatasetUnitMenuUtils");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig");var m=document.getElementById("vis-measure-canvas"),A=document.getElementById("vis-measure-span"),AB={},Y={},q={},S=mstrmojo.dom,d=mstrmojo.elementHelper,p=mstrmojo.vi.ui.DatasetUnitMenuUtils,z=mstrmojo.VisEnum.EnumColorRankMode,AA=mstrmojo.chart.model.enums.EnumDSSObjectType,c=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,J=mstrmojo.chart.enums.EnumFontStyle,T=mstrmojo.hash,R=mstrmojo.func.wrapMethods,u=mstrmojo.VisEnum,e=u.SERVER_JSON_ERROR_TYPE;var o=64,f=128,O=4,k=5,t=6,w=7,i=mstrmojo,j=i.array,s=mstrmojo.array,P=i.desc,y=i.mstr.EnumFunction,a=mstrmojo.vi.enums.EnumDerivedElementType,Z=i._HasMarkup,F=i.css;mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869);function AD(AJ,AI){var AK=n.pluck(AI,"tid"),AL=n.pluck(AI,"eid"),AH=(AJ.getDocModel&&AJ.getDocModel())||n.getPropertyByPath(AJ,"model.docModel");if(n.getPropertyByPath(AH,"getColorBy") instanceof Function){return AH.getColorBy(AK,AL);}}function AC(AH,AJ,AL){var AK=AJ.id,AI=AJ.getHost();if(AI&&AI.observableModel){AH.forEach(function(AN){var AM=AI.observableModel[AN];if(AM){AM.attachEventListener("valueChanged",AK,AL);}});}}function U(AI){var AH={SINGLE:[{text:P(358,"Absolute"),value:y.FunctionAbs,n:P(358,"Absolute"),v:y.FunctionAbs}],PAIR:[{text:P(6017,"Add"),value:y.FunctionAdd,n:P(6017,"Add"),v:y.FunctionAdd},{text:P(2122,"Average"),value:y.FunctionAverage,n:P(2122,"Average"),v:y.FunctionAverage},{text:P(5868,"Least"),value:y.FunctionLeast,n:P(5868,"Least"),v:y.FunctionLeast},{text:P(5869,"Greatest"),value:y.FunctionGreatest,n:P(5869,"Greatest"),v:y.FunctionGreatest},{text:"A-B",value:y.FunctionMinus+";0",n:"A-B",v:y.FunctionMinus+";0"},{text:"B-A",value:y.FunctionMinus+";1",n:"B-A",v:y.FunctionMinus+";1"},{text:"A/B",value:y.FunctionDivide+";0",n:"A/B",v:y.FunctionDivide+";0"},{text:"B/A",value:y.FunctionDivide+";1",n:"B/A",v:y.FunctionDivide+";1"}],MORE:[{text:P(6017,"Add"),value:y.FunctionAdd,n:P(6017,"Add"),v:y.FunctionAdd},{text:P(2122,"Average"),value:y.FunctionAverage,n:P(2122,"Average"),v:y.FunctionAverage},{text:P(5868,"Least"),value:y.FunctionLeast,n:P(5868,"Least"),v:y.FunctionLeast},{text:P(5869,"Greatest"),value:y.FunctionGreatest,n:P(5869,"Greatest"),v:y.FunctionGreatest}]};return AH[AI];}function B(AI,AH){return !!(((AI&&AI.at)||0)&AH);}function N(AH){return !AH.selCells.some(function(AI){var AJ=AH.getCellForNode(AI);return d.isNonGroupNull(AJ)||!B(AJ,o)||AJ.dei!==undefined||AH.model.isRecursiveAttribute(AJ.tid);});}function I(AI){var AH;return !AI.selCells.some(function(AJ){AH=AI.getCellForNode(AJ);return(d.isNonGroupNull(AH)||!B(AH,f))||AI.model.isRecursiveAttribute(AH.tid);});}function E(AK,AJ,AM,AL,AI){var AH=AM&&AM.func;if((AH===AL)||(typeof AL==="string"&&AL.indexOf(AH)===0&&AL.indexOf(";0")>0)){return ;}if(AI){AK.editDECalculation(AJ,AL);}else{AK.derivedElementCalculation(AJ,AL);}}function M(AT,AR,AP){var AS=AR&&AR.es,AH=(AS&&AS.length)||AT.selCells.length,AK=(AH===1)?"SINGLE":((AH===2)?"PAIR":"MORE"),AQ=U(AK),AJ=(AR&&AR.func),AL,AU=AT.selCells,AI,AO,AN,AM;if(AK==="PAIR"){if(AR){AM=AS[0].v>AS[1].v;if(AM){AN=AS[0].n;AO=AS[1].n;AQ[4]={value:y.FunctionMinus+";1",v:y.FunctionMinus+";1"};AQ[5]={value:y.FunctionMinus+";0",v:y.FunctionMinus+";0"};AQ[6]={value:y.FunctionDivide+";1",v:y.FunctionDivide+";1"};AQ[7]={value:y.FunctionDivide+";0",v:y.FunctionDivide+";0"};}else{AO=AS[0].n;AN=AS[1].n;}}else{AO=AP(AU[0]);AN=AP(AU[1]);}AQ[O].text=AO+" - "+AN;AQ[k].text=AN+" - "+AO;AQ[t].text=AO+" / "+AN;AQ[w].text=AN+" / "+AO;AQ[O].n=AO+" - "+AN;AQ[k].n=AN+" - "+AO;AQ[t].n=AO+" / "+AN;AQ[w].n=AN+" / "+AO;}for(AL in AQ){if(typeof AQ[AL].value==="string"&&AQ[AL].value.indexOf(AJ)===0&&AQ[AL].value.indexOf(";0")>0){AI=AQ[AL];break;}if(AQ[AL].value===AJ){AI=AQ[AL];break;}}return{items:AQ,selectedItem:AI};}function V(AH,AK){if(!AH){return AH;}if(AK.length===1){return AH[AK[0]];}var AJ=(AK&&AK.length)||0,AI;for(AI=0;AI<AJ;AI++){AH=AH[AK[AI]];if(!AH){break;}}return AH;}function x(AJ,AI,AH){return AJ.every(function(AK){return AK.ttp===AI||AK.ttp===AH;});}function AG(AI,AL,AM){var AK=(AL&&AL.length)||0,AJ,AH,AN=AI;for(AJ=0;AJ<AK-1;AJ++){AH=AL[AJ];if(!AN[AH]){AN[AH]={};}AN=AN[AH];}AN[AL[AK-1]]=AM;}function X(AP){var AQ,AO,AK,AM,AH,AN=this.model.docModel.datasets,AI=false,AL=false,AJ={isDM:false};for(AQ in AN){if(AN.hasOwnProperty(AQ)){AO=AN[AQ].mx;j.forEach((AO||[]),function(AR){if(AR.did===AP){if(AR.um||AR.rdm){AL=true;}AI=true;return false;}});if(AI){break;}}}if(AL){AH=this.model.data.gts.col;AK=(AH&&AH[AH.length-1]);if(AK&&AK.otp===-1){AM=AK.es;}j.forEach((AM||[]),function(AR){if(AR.oid===AP){AJ={isDM:true,id:AR.id};return false;}});}return AJ;}function H(AH,AK){var AN=[],AJ={act:"updateElementsPropertiesMap",epm:AN},AL=[],AI={},AP=[AI],AO=this;AN.push({epmk:AL,epmv:AP});AH.forEach(function(AR){var AS=AR.tid,AQ=AS===-1,AT={ob:{did:AQ?"":AS}};AL.push(AT);});if(AK&&AK.indexOf("default")<0){AI.v={vv:AK};}var AM=[];AI.k={chn:AM};AH.forEach(function(AS){var AT=AS.tid,AQ=AT===-1,AR;if(AQ){AR=X.call(AO,AS.eid);if(AR.isDM){AM.push({emt:2,ei:AR.id});}else{AM.push({emt:2,mt:{did:AS.eid,tp:4,ql:0}});}}else{AM.push({emt:1,ei:AS.eid,at:{did:AT,tp:AS.tp,ql:0}});}});return AJ;}function C(AL,AJ){var AK="00000000000000000000000000000000",AI=AL&&AL.dropZones,AH=j.find(AI,"id",AJ);return AH===-1?[]:j.filter(AI[AH].items,function(AM){return AM.t===4&&AM.id!==AK;});}function b(AI,AH){return function(){var AJ=new i.ui.menus.MenuConfig();AJ.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);AJ.addRadioMenuGroup(null,AI,AH,"checkMark",undefined,true);return AJ;};}mstrmojo.VisUtility=mstrmojo.provide("mstrmojo.VisUtility",{getCache:function(){return JSON.stringify(q);},getUpdateColorMapAction:function(AI,AH){return H.call(this,AI,AH);},measureTextSize:function(AI,AH,AJ){return{width:this.measureTextWidth(AI,AH,AJ),height:this.measureTextHeight(AI,AH,AJ)};},measureTextWidth:function(AK,AJ,AL,AI,AH){if(S.isIE||S.isIEW3C){return this.measureTextWidthWithSpan(AK,AJ,AL,AI,AH);}return this.measureTextWidthWithCanvas(AK,AJ,AL);},measureTextWidthWithCanvas:function(AK,AL,AO,AM){AM=AM||false;if(AK===""){return 0;}if(AK===" "){AK="\u00A0";}var AN=AL.fontFamily,AQ=AL.fontSize,AJ=AL.fontStyle,AP=AL.fontWeight;if(typeof AQ==="number"){AQ+="pt";}AJ=AJ||"normal";AP=AP||"normal";AO=AO||0;var AI=AM?undefined:V(AB,[AN,AQ,AJ,AP,AK]);if(!AI){if(!m){m=document.createElement("canvas");m.width=0;m.height=0;m.id="vis-measure-canvas";m.style.position="absolute";m.style.top="0";m.style.fontSize="medium";document.body.appendChild(m);}var AH=m.getContext("2d");AH.font=AJ+" "+AP+" "+AQ+" "+AN;AI=Math.ceil(AH.measureText(AK).width);AG(AB,[AN,AQ,AJ,AP,AK],AI);}return AI+AO;},measureTextWidthWithSpan:function(AJ,AK,AO,AQ,AL){if(AJ===""){return 0;}if(AJ===" "){AJ="\u00A0";}var AM=AK.fontFamily,AR=AK.fontSize,AI=AK.fontStyle,AN=AK.fontWeight;if(typeof AR==="number"){AR+="px";}AI=AI||"normal";AN=AN||"normal";AQ=AQ||"auto";AO=AO||0;AL=!!AL;if(typeof AQ==="number"){AQ+="px";}var AH=V(Y,[AM,AR,AI,AN,AQ,AJ]);if(!AH){var AP;if(!A){A=document.createElement("span");AP=A.style;A.id="vis-measure-span";AP.position="absolute";AP.top="0";AP.visibility="hidden";AP.width="auto";AP.height="auto";if(AL){AP.whiteSpace="nowrap";}else{AP.whiteSpace="normal";}document.body.appendChild(A);}AP=A.style;if(AL){AP.whiteSpace="nowrap";}else{AP.whiteSpace="normal";}AP.width="auto";AP.height=AQ;AP.fontFamily=AM;AP.fontSize=AR;AP.fontStyle=AI;AP.fontWeight=AN;A.innerHTML=AJ;AH=Math.ceil(A.clientWidth);AG(Y,[AM,AR,AI,AN,AQ,AJ],AH);}return AH+AO;},measureTextHeight:function(AJ,AK,AP,AR,AH,AM,AL){if(AJ===""){return 0;}if(AJ===" "){AJ="\u00A0";}var AN=AK.fontFamily,AT=AK.fontSize,AI=AK.fontStyle,AO=AK.fontWeight;AH=AH||"normal";AL=!!AL;if(typeof AT==="number"){AT+="px";}AI=AI||"normal";AO=AO||"normal";AR=AR||"auto";AP=AP||0;if(typeof AR==="number"){AR+="px";}var AS=AM?undefined:V(q,[AN,AT,AI,AO,AR,AJ]);if(!AS){var AQ;if(!A){A=document.createElement("span");AQ=A.style;A.id="vis-measure-span";AQ.position="absolute";AQ.top="0";AQ.visibility="hidden";AQ.width="auto";AQ.height="auto";if(AL){AQ.whiteSpace="nowrap";}else{AQ.whiteSpace="normal";}document.body.appendChild(A);}AQ=A.style;if(AL){AQ.whiteSpace="nowrap";}else{AQ.whiteSpace="normal";}AQ.heigth="auto";AQ.width=AR;AQ.fontFamily=AN;AQ.fontSize=AT;AQ.fontStyle=AI;AQ.fontWeight=AO;AQ.wordBreak=AH;A.innerHTML=AJ;AS=A.clientHeight;if(!AM){AG(q,[AN,AT,AI,AO,AR,AJ],AS);}}return AS+AP;},getVisEmptyMsg:function(AH){var AI="";switch(AH){case"AE_ERROR":AI='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div style="padding:25px"><div class="gm-warning-icon" style="padding-bottom:18px"></div><div style="padding-bottom:8px">'+mstrmojo.desc(14436,"Unable to load visualization.")+"</div><div>"+mstrmojo.desc(14437,"Use a filter to reduce the data and try again.")+"</div></div></div></div></div>";break;case"NODATA_OTHERERROR":AI='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div>'+(this.errorMsg||mstrmojo.desc(12093,"Filter excludes all data"))+"</div></div></div></div>";break;default:AI='<div class="mstrmojo-Label dropMsg" style="display: block;" >'+mstrmojo.desc(11668,"Drag objects here.")+"</div>";}return AI;},applyStyles2DomNode:function(AM,AP){var AH,AN=AM.style;if(Object.prototype.hasOwnProperty.call(AP,"backgroundColor")&&AP.backgroundColor!==""&&AP.backgroundColor!=="transparent"){var AL=1;if(Object.prototype.hasOwnProperty.call(AP,"opacity")&&AP.opacity!==""){AL=AP.opacity;}var AI=AP.backgroundColor,AO=function AO(AQ){if(isNaN(AQ)){AQ=0;}AQ%=16777216;return{b:AQ%256,g:(AQ>>8)%256,r:(AQ>>16)%256};},AK="";if(AI){var AJ=function AJ(AR,AS){if(AR==="transparent"){return"rgba(0,0,0,0)";}AR=this.parseCSSColor(AR,false);var AQ=AO(AR);return"rgba("+AQ.r+" ,"+AQ.g+" ,"+AQ.b+" ,"+AS+" )";}.bind(this);if(AI.c1!==undefined&&AI.c2!==undefined&&AI.or!==undefined){AK=(F.buildGradient(AI.or,AJ(AI.c1,AL),AJ(AI.c2,AL))).v;}else{AK=AJ(AI,AL);}AN.background=AK;}}else{AN.backgroundColor="rgba(0,0,0,0)";}for(AH in AP){if(AH!=="backgroundColor"&&AH!=="opacity"&&Object.prototype.hasOwnProperty.call(AP,AH)&&AP[AH]&&AP[AH]!==""){AN[AH]=AP[AH];}}},parseCSSColor:function(AL,AI){var AH,AJ;if(AL.length===7){if(AI===true){AH=AL[5]+AL[6]+AL[3]+AL[4]+AL[1]+AL[2];}else{AH=AL.slice(1);}}else{AH=[];var AK=AL.slice(1);if(AI===true){for(AJ=2;AJ>=0;AJ--){AH.push(AK[AJ]);AH.push(AK[AJ]);}}else{for(AJ=0;AJ<3;AJ++){AH.push(AK[AJ]);AH.push(AK[AJ]);}}AH=AH.join("");}return parseInt(AH,16);},positionDomNode:function(AJ,AL){var AI,AO,AM,AK=["width","height","top","left","right","bottom"],AN=AK.length,AH=AJ.style;for(AI=0;AI<AN;AI++){AO=AK[AI];AM=AL[AO];if(AM!==undefined){if((typeof AM)==="number"){AM+="px";}AH[AO]=AM;}}},getComputedFontStyle:function G(AJ){var AH=mstrmojo.css.getComputedStyle(AJ);var AK={};AK.fontFamily=AH.fontFamily;AK.fontSize=AH.fontSize;AK.fontStyle=AH.fontStyle;AK.fontWeight=AH.fontWeight;AK.fontVariant=AH.fontVariant;var AI=parseInt(AH.paddingLeft)||0,AL=parseInt(AH.paddingLeft)||0;AK.bonus=AI+AL;return AK;},splitWordIfTooLong:function(AR,AP,AK){var AN=[];var AO=AR.length;var AL;for(AL=0;AL<AO;AL++){var AI=AR[AL];while(true){var AS=this.measureTextWidth(AI,AK);if(AS>AP){var AQ=(AP/AS)*AI.length;var AH=Math.max(Math.round(AQ),1);while(AH>0){var AM=AI.substr(0,AH);var AJ=Math.round(this.measureTextWidth(AM,AK));if(AJ<=AP||AH===1){AN.push(AM);break;}else{AH--;}}AI=AI.substr(AH,AI.length-AH);}else{AN.push(AI);break;}}}return AN;},truncateTextToLineWithWordWrap:function Q(Ah,Aa,AY,AN,AZ,AR){var AV=Ah.split(" "),Ab=AV.length;if(!AR){AV=this.splitWordIfTooLong(AV,AY,Aa);}var Ao,AT=[],Aj=[],AH=0,AL=AV.length,Aq=this.measureTextWidth(" ",Aa),AK=0,AQ=false,AX=(Ab===AV.length);Aj.push(0);for(Ao=0;Ao<AL;Ao++){var Af=this.measureTextWidth(AV[Ao],Aa);if(!AR&&Af>AY){var AI=AV[Ao];var Am=(AY/Af)*AI.length;AV[Ao]=AI.substr(0,parseInt(Am,10));Af=AY;}AT.push(Af);AH+=Af;Aj.push(AH);if(Ao!==AL-1){AH+=Aq;}}var Al,An,Ad=AN;for(Al=0,An=0;An<Aj.length;){var AP=Aj[An]-Aj[Al];if(Al>0&&An!==Al){AP-=Aq;}var AO=Aj[An+1]-Aj[Al];if(Al>0&&An+1!==Al){AO-=Aq;}if(AP<=AY&&((An+1===Aj.length)||(AO>AY))){AK=Math.max(AK,AP);Ad--;if(Ad===0||An===AL){break;}else{Al=An;An++;}}else{An++;}}if(An>AL){An=AL;}var AS=Aj[An]-Aj[Al];if(Al>0&&An!==Al){AS-=Aq;}var Ag;if(An>=AL&&AS<AY){Ag=AV.join(" ");}else{AQ=true;AK=AY;Ag=AV.slice(0,An).join(" ");var AU=this.measureTextWidth("...",Aa);if(AS+AU<=AY){if(AS+Aq+AU>AY){Ag+="...";}else{var Ap=AV[An],AW;for(var Ac=1;Ac<Ap.length;Ac++){AW=this.measureTextWidth(Ap.substr(0,Ac),Aa);if(AS+Aq+AW+AU>AY){break;}}Ag+=" "+Ap.substr(0,Ac-1)+"...";}}else{if(Ag.charAt(Ag.length-1)===" "){Ag=Ag.substr(0,Ag.length-1);}var Ae=Ag.lastIndexOf(" ");var AJ=Ag.length-1-Ae;if(AJ===3){Ag=Ag.substr(0,Ag.length-3)+" ...";}else{var Ai=0,AM="",Ak=0;while(Ai<AU&&Ag.length>Ak){Ak++;AM=Ag.substr(Ag.length-Ak,Ag.length);Ai=this.measureTextWidth(AM,Aa);}Ag=Ag.substr(0,Ag.length-Ak)+"...";}}}if(AZ){return{text:Ag,truncated:AQ,maxLineLen:AK,canWordWrap:AX};}return Ag;},measureSuperTextWidth:function AF(AI,AJ,AH,AK){return AI?this.measureTextWidth("<sup>"+AJ+"</sup>",AH,AK):this.measureTextWidth(AJ,AH,AK);},splitTokenIfTooLong:function h(AS,AQ,AK){var AO=[];var AP=AS.length;var AL,AI,AT,AN,AU;for(AL=0;AL<AP;AL++){AI=AS[AL];AN=AI.isSuper;while(true){AT=AI.v;if(AI.textWidth!==undefined){AU=AI.textWidth;}else{AU=AI.textWidth=this.measureSuperTextWidth(AN,AT,AK);}if(AU>AQ){var AR=(AQ/AU)*AT.length;var AH=Math.max(Math.round(AR),1);while(AH>0){var AM=AT.substr(0,AH);var AJ=Math.round(this.measureSuperTextWidth(AN,AM,AK));if(AJ<=AQ||AH===1){AO.push({v:AM,isSuper:AN,textWidth:AJ});break;}else{AH--;}}AI={v:AT.substr(AH,AT.length-AH),isSuper:AN};}else{AO.push(AI);break;}}}return AO;},truncateTextToLineWithWordWrapForTokens:function W(AR,AL,Ak,Ac,Al,AX){var Af=AR.length;AR=this.splitTokenIfTooLong(AR,Ak,AL);var Aj,AW=[],AH=0,Aa=AR.length,AI=0,Ab=false,AN=(Af===AR.length),AP,AU,Ad,AJ,Ah,AQ,AV;if(AX&&!AN){return{canWordWrap:AN};}AW.push(0);for(Aj=0;Aj<Aa;Aj++){AP=AR[Aj];Ad=AP.v;AU=AP.isSuper;if(AP.textWidth!==undefined){AJ=AP.textWidth;}else{AJ=AP.textWidth=this.measureSuperTextWidth(AU,Ad,AL);}if(AJ>Ak){var Ai=(Ak/AJ)*Ad.length;AP.v=Ad.substr(0,parseInt(Ai,10));AJ=AP.textWidth=Ak;}AH+=AJ;AW.push(AH);}var AT,Ae,AS=Ac;for(AT=0,Ae=0;Ae<AW.length;){var AO=AW[Ae]-AW[AT];var AM=AW[Ae+1]-AW[AT];if(AO<=Ak&&((Ae+1===AW.length)||(AM>Ak))){AI=Math.max(AI,AO);AS--;if(AS===0||Ae===Aa){break;}else{AT=Ae;Ae++;}}else{Ae++;}}if(Ae>Aa){Ae=Aa;}var AZ=AW[Ae]-AW[AT];var Am;if(Ae>=Aa&&AZ<Ak){Am=AR;}else{Ab=true;AI=Ak;Am=AR.slice(0,Ae);var AK=this.measureTextWidth("...",AL);if(AZ+AK<=Ak){AQ=AR[Ae];Ad=AQ.v;AU=AQ.isSuper;for(Ah=1;Ah<Ad.length;Ah++){AV=this.measureSuperTextWidth(AU,Ad.substr(0,Ah),AL);if(AZ+AK+AV>Ak){break;}}if(Ah>1){AP={v:Ad.substr(0,Ah-1),isSuper:AU};AP.textWidth=this.measureSuperTextWidth(AU,AP.v,AL);Am.push(AP);Am.push({v:"...",textWidth:AK});}}else{var AY=0,Ag;for(Aj=Am.length-1;Aj>=0;Aj--){AP=Am[Aj];Ad=AP.v;AU=AP.isSuper;Ag=0;for(Ah=Ad.length-1;Ah>=0;Ah--){Ag=this.measureSuperTextWidth(AU,Ad.substr(Ah),AL);if(AY+Ag>=AK){break;}}if(Ah>=0){break;}else{AY+=Ag;}}if(Aj>=0){if(Ah>0){AP.v=Ad.substr(0,Ah);AP.textWidth=this.measureSuperTextWidth(AU,AP.v,AL);Am=Am.slice(0,Aj+1);}else{if(Ah===0){Am=Am.slice(0,Aj);}}Am.push({v:"...",textWidth:AK});}else{Am=[{v:"...",textWidth:AK}];}}}if(Al){return{text:Am,truncated:Ab,maxLineLen:AI,canWordWrap:AN};}return Am;},getRankMode:function g(AN){var AP=1,AO=2,AM=3,AI=4,AK=5,AH=6,AL=7,AJ=z.INVALID;if(AN){if(x(AN,AM,AO)){AJ=z.TOP_PERCENT;}else{if(x(AN,AM,AP)){AJ=z.BOTTOM_PERCENT;}else{if(x(AN,AH,AI)){AJ=z.BOTTOM;}else{if(x(AN,AH,AK)){AJ=z.TOP;}else{if(x(AN,AL)){AJ=z.VALUE;}}}}}}return AJ;},getColorByTitle:function L(AI,AH){if(AH===z.BOTTOM_PERCENT||AH===z.TOP_PERCENT){AI=mstrmojo.desc(2787,"Percentage of ##").replace("'##'",AI);}else{if(AH===z.BOTTOM||AH===z.TOP){AI=mstrmojo.desc(2788,"Rank of ##").replace("'##'",AI);}}return AI;},getColorByFormatStr:function r(AI,AH){if(AH===z.BOTTOM_PERCENT||AH===z.TOP_PERCENT){AI="0%;(0%)";}else{if(AH===z.BOTTOM||AH===z.TOP){AI="";}}return AI;},getColorByItems:function AE(AH,AR,AY,AU,AP,AN,AV){var AT=[],AZ,AJ,AO=mstrmojo.num,AM,AQ;if(AH===undefined||AH.length===0){return AT;}var Ab=true;if(AH.length>1){if(AH[0].ceil===AH[1].flr){Ab=false;}else{Ab=true;}}for(AZ=0;AZ<AH.length;AZ++){var Aa=AH[AZ],AL={},AI=Aa.ceil,AX=Aa.flr;if((AZ===0&&Ab)||(AZ===AH.length-1&&!Ab)){if(AR===z.BOTTOM_PERCENT||AR===z.TOP_PERCENT){AL.flr=AX/100;AL.ceil=1;}else{if(AR===z.TOP||AR===z.BOTTOM){AX+=1;AL.flr=Math.floor(AX);AL.ceil=AP;}else{AL.flr=AX;AL.ceil=AY;}}AQ=AL.ceil;}else{if((AZ===0&&!Ab)||(AZ===AH.length-1&&Ab)){if(AR===z.BOTTOM_PERCENT||AR===z.TOP_PERCENT){AL.flr=0;AL.ceil=AI/100;}else{if(AR===z.TOP||AR===z.BOTTOM){AL.flr=0;AL.ceil=Math.floor(AI);}else{AL.flr=AU;AL.ceil=AI;}}AM=AL.flr;}else{if(AR===z.BOTTOM_PERCENT||AR===z.TOP_PERCENT){AX=AX/100;AI=AI/100;}else{if(AR===z.TOP||AR===z.BOTTOM){AX+=1;AX=Math.floor(AX);AI=Math.floor(AI);}}AL.flr=AX;AL.ceil=AI;}}if(AR===z.TOP||AR===z.BOTTOM){AL.ceil=AL.ceil>AP?AP:AL.ceil;}if(AN){AL.label=AO.formatByMask(AN,AL.flr)+" - "+AO.formatByMask(AN,AL.ceil);}else{AL.label=AL.flr+" - "+AL.ceil;}if(Aa.fmt&&Aa.fmt.bc){AL.color=Aa.fmt.bc;}else{AL.color=AV;}AT.push(AL);}AT=AT.filter(function(Ac){return Ac.flr<=Ac.ceil&&!(Ac.flr>AQ||Ac.ceil<AM);});if(AR===z.TOP||AR===z.BOTTOM){AJ=AP;}else{if(AT.length>0){if(Ab){AJ=AT[0].ceil-AT[(AT.length-1)].flr;}else{AJ=AT[(AT.length-1)].ceil-AT[0].flr;}}}var AW=0,AS,AK;for(AZ=0;AZ<AT.length;AZ++){if(AZ===AT.length-1){AT[AZ].scopePercent=1-AW;}else{if(AR===z.TOP||AR===z.BOTTOM){AK=AT[AZ].ceil-AT[AZ].flr+1;}else{AK=AT[AZ].ceil-AT[AZ].flr;}AS=AK/AJ;AT[AZ].scopePercent=AS;AW+=AS;}}return AT;},getDefaultColorByItems:function(AK,AI,AJ){var AH={};AH.label=AJ+" - "+AI;AH.flr=AJ;AH.ceil=AI;AH.color=AK;AH.scopePercent=1;return[AH];},getNumberFormat:function(AK,AI){var AL=AK.nf,AJ=AK.gvs;function AH(){var AO=(AJ&&AJ.items&&AJ.items[0]&&AJ.items[0].items)||[],AN=AO[AI]||{},AM=AN.nfs;return typeof AM==="string"?AM:"";}if(typeof AL[AI].nfs!=="string"){AL[AI].nfs=AH();}return AL[AI].nfs;},hasOnlyMetricsOnColumn:function(AI){var AH=(AI&&AI.gts&&AI.gts.col)||[];return AH.every(function(AJ){return AJ.otp===AA.DssTypeUnknown&&(AJ.es||[]).every(function(AK){return AK.otp===AA.DssTypeMetric;});});},hasNoMetricOnRow:function(AI){var AJ=(AI&&AI.gts&&AI.gts.row)||[],AH=function(AK){return AK.otp!==AA.DssTypeMetric;};return AJ.every(AH);},isOnExpressMode:function(){return mstrApp.isExpress;},modifyScExp:function(AP,AH,AT,AN){if(!AP||!AH){return ;}var AK=AP.nds,AO,AI,AQ,AS,AR,AM,AL,AJ;s.forEach(AK||[],function(AU){AO=AU.nds;s.forEach(AO||[],function(AV){AI=AV.es;s.forEach(AI||[],function(AW){AS=AW.v;AM=AN[AS];if(!AM){AM=AT.getNormalizedFormElementId(AS);AN[AS]=AM;}s.forEach(AH||[],function(AX){AQ=AX.es;s.forEach(AQ||[],function(AY){AJ=false;AR=AY.id;if(AR===AS){AJ=true;}else{AL=AN[AR];if(!AL){AL=AT.getNormalizedFormElementId(AR);AN[AR]=AL;}if(AM===AL){AJ=true;}}if(AJ){AW.v=AY.id;AW.n=AY.n;return false;}});if(AJ){return false;}});});});});},modifyScExpDeprecated:function(AN,AO,AL,AJ){if(!AN||!AO){return ;}var AK=AN.nds,AI,AH,AM;s.forEach(AK||[],function(AP){AI=AP.nds;s.forEach(AI||[],function(AQ){AH=AQ.es;s.forEach(AH||[],function(AR){s.forEach(AO||[],function(AS){s.forEach(AS||[],function(AT){AM=AT.es;s.forEach(AM||[],function(AU){if(AL.call(AJ,AU.id,AR.v)){AR.v=AU.id;AR.n=AU.n;}});});});});});});},getMouseOffset:function(AI){var AH=(AI.offsetX!==undefined)?AI.offsetX:(AI.layerX),AJ=(AI.offsetY!==undefined)?AI.offsetY:(AI.layerY);return{x:AH,y:AJ};},translateLineStyle:function(AH){var AJ=["none","solid","solid","dashed","dotted"],AI=["1px","1px","2px","1px","1px"];return{width:AI[AH]||"0px",style:AJ[AH]||"none"};},getGroupAndCalculationContextMenuForDataPoints:function(AQ,Ae){var AS,AU=[],AJ=[],Ab=[],AO=Ae.fnCellName,AW=Ae.fnUnique,AN=Ae.fnMakeNode,AZ=AQ.getCellForNode.bind(AQ),Ag=Ae.selection;var AM=new i.ui.menus.MenuConfig(),AI=new i.ui.menus.MenuConfig(),AY=new i.ui.menus.MenuConfig(),Ad=new i.ui.menus.MenuConfig();function Af(Ah){AQ.selCells=AU[Ah].selCells;AQ.derivedElementGroup(AZ(AQ.selCells[0]));}function AP(Aj){AQ.selCells=AJ[Aj].selCells;var Ai=AZ(AJ[Aj].selCells[0]),Ah=AQ.getDEInfo(Ai);AQ.derivedElementsEdit(AZ(AQ.selCells[0]),Ah);}function AV(Ai){AQ.selCells=AJ[Ai].selCells;var Ah=AZ(AJ[Ai].selCells[0]);AQ.removeQuickDE(Ah);}function AT(Ai){AQ.selCells=AJ[Ai].selCells;var Ah=AZ(AJ[Ai].selCells[0]);AQ.renameDEList(Ah);}function AX(Ah){E(AQ,AZ(AQ.selCells[0]),null,Ah,false);}function AH(Ah){E(AQ,AZ(AQ.selCells[0]),null,Ah,true);}function AL(Ai){var Ah=AZ(AJ[Ai].selCells[0]);AQ.removeQuickDE(Ah);}function Ac(Ai){var Ah=AZ(AJ[Ai].selCells[0]);AQ.editDECalculation(Ah);}function AR(Ah){Ah=Ah||[];function Ai(Am){var Aj=Am.extra||{},An=Am.setup||mstrmojo.emptyFn,Ak=Am.action||mstrmojo.emptyFn,Al=[];An(Al,Aj);Ak(Al,Aj);}Ah.forEach(Ai);}var AK=[{name:"group",setup:function(Ah){AU.forEach(function(Ai){AQ.selCells=AU[Ai.v].selCells;if(!Object.prototype.hasOwnProperty.call(AJ,Ai.v)&&N(AQ)){Ah.push(Ai);}});},action:function(Ai){var Ah;if(Ai.length===1){Ah=Ai[0].v;AM.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AQ.selCells=AU[Ah].selCells;AQ.derivedElementGroup(AZ(AQ.selCells[0]));});}if(Ai.length>1){AM.addPopupMenuItem(mstrmojo.desc(1911,"Group"),AQ.id,b(Af,Ai),"xt");}}},{name:"edit-group",setup:function(Ah){AJ.forEach(function(Al){var Ak=AZ(AJ[Al.v].selCells[0]),Aj=AQ.getDEInfo(Ak),Ai=Aj&&Aj.de;if(Ai&&Ai.t===a.LIST){Ah.push(Al);}});},action:function(Ai){var Ah,Ak,Aj;if(Ai.length===1){Ah=AJ[Ai[0].v].selCells;Ak=AZ(Ah[0]);Aj=AQ.getDEInfo(Ak);AI.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AQ.selCells=Ah;AQ.derivedElementsEdit(AZ(AQ.selCells[0]),Aj);});AI.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AQ.selCells=Ah;AQ.removeQuickDE(Ak);});Ad.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AQ.selCells=Ah;AQ.renameDEList(Ak);});}if(Ai.length>1){AI.addPopupMenuItem(mstrmojo.desc(13395,"Edit Group..."),AQ.id,b(AP,Ai),"xt");AI.addPopupMenuItem(mstrmojo.desc(12195,"Ungroup"),AQ.id,b(AV,Ai),"xt");Ad.addPopupMenuItem(mstrmojo.desc(13968,"Rename Group..."),AQ.id,b(AT,Ai),"xt");}}},{name:"calculation",setup:function(Ah){Ab.forEach(function(Ak,Aj,Ai){AQ.selCells=Ai[Ak.v].selCells;var Am=AZ(AQ.selCells[0]),Al=AQ.getDEInfo(Am),An=Al&&Al.de;if(!(An&&An.t===a.RESIDUE)&&I(AQ)){Ah.push(Ak);}});},action:function(Ah){if(Ah.length===1){AM.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AQ.id,function(){var Ai=Ah[0].v,Aj=new i.ui.menus.MenuConfig();AQ.selCells=Ab[Ai].selCells;Aj.addRadioMenuGroup(null,AX,M(AQ,null,AO).items,"checkMark",undefined,true);return Aj;},"xt");}if(Ah.length>1){AM.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AQ.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Ah,selectedIndex:0,onitemSelected:function(Ai){var Aj=Ai.v;AQ.selCells=Ab[Aj].selCells;this.parent.checkList.set("items",[]);this.parent.checkList.set("items",M(AQ,null,AO).items);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Aj,Ai){E(AQ,AZ(AQ.selCells[0]),null,Ai.checkList.selectedItem.v,false);}});});}}},{name:"edit-calculation",setup:function(Ah){AJ.forEach(function(Al){var Ak=AZ(AJ[Al.v].selCells[0]),Aj=AQ.getDEInfo(Ak),Ai=Aj&&Aj.de;if(Ai&&Ai.t===a.CALCULATION){Ah.push(Al);}});},action:function(Ah){function Ai(){var Aj=Ah[0].v;AQ.selCells=AJ[Aj].selCells;var An=AZ(AQ.selCells[0]),Am=AQ.getDEInfo(An),Ao=Am&&Am.de,Al=M(AQ,Ao,AO),Ak=new i.ui.menus.MenuConfig();Ak.addRadioMenuGroup(Al.selectedItem.value,AH,Al.items,"checkMark",undefined,true);return Ak;}if(Ah.length===1){AY.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AQ.id,Ai,"xt");AY.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){var Aj=Ah[0].v;AQ.selCells=AJ[Aj].selCells;var Ak=AZ(AQ.selCells[0]);AQ.removeQuickDE(Ak);});Ad.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){var Aj=Ah[0].v;AQ.selCells=AJ[Aj].selCells;var Ak=AZ(AQ.selCells[0]);AQ.editDECalculation(Ak);});}if(Ah.length>1){AY.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AQ.id,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Ah,selectedIndex:0,onitemSelected:function(Am){var An=Am.v;AQ.selCells=AJ[An].selCells;var Al=AZ(AQ.selCells[0]),Ak=AQ.getDEInfo(Al),Ao=Ak&&Ak.de;var Aj=M(AQ,Ao,AO);this.parent.checkList.set("items",[]);this.parent.checkList.set("items",Aj.items);this.parent.checkList.set("selectedItem",Aj.selectedItem);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Ak,Aj){E(AQ,AZ(AQ.selCells[0]),null,Aj.checkList.selectedItem.v,true);}});});AY.addPopupMenuItem(mstrmojo.desc(12197,"Delete Calculation"),AQ.id,b(AL,Ah),"xt");Ad.addPopupMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),AQ.id,b(Ac,Ah),"xt");}}}];AS=AW(Ag);AS.forEach(function(Ai){var Ak=AN(Ai),Ah=AZ(Ak),Aj,Al,Am;if(!AQ.model.supportsViewFilterActions(Ah.tid)){return ;}Aj=Ah.dei===undefined?AU:AJ;Al=Ah.tid;Am=AQ.model.getObjectInfo(Al).n;if(Aj[Al]===undefined){Aj[Al]={};Aj[Al].selCells=[];Aj.push({n:Am,v:Al,text:Am,value:Al});}Aj[Al].selCells.push(Ak);if(Ab[Al]===undefined){Ab[Al]={};Ab[Al].selCells=[];Ab.push({n:Am,v:Al,text:Am,value:Al});}Ab[Al].selCells.push(Ak);});var Aa=this.getPropertyByPath(AQ,"model.data.visName")||this.getPropertyByPath(AQ,"model.data.vis.vn");if(Aa==="VIHeatMapVisualizationStyle"){AK.splice(2,2);}AR(AK);return{createDe:AM,editGroup:AI,editCalculation:AY,renameDe:Ad};},getGroupAndCalculationContextMenu:function(AP,Ad,Aa){var Ac=AP,AW=Aa.skipSingleAttrCheck||Ac.isSingleAttrSelection(),AK=false,AM=Ac.isSingleSelection(),AQ=Ac.getDEInfo(Ad),AL=AQ&&AQ.deObject,AZ=AQ&&AQ.de,AU=AL&&Ac.getOthersDEInfo(AL),AS=Ac.getSelections(),AY=true,AO=Aa.fnCellName,Ab=this.getPropertyByPath(Ac,"model.data.visName")||this.getPropertyByPath(Ac,"model.data.vis.vn");var AN=new i.ui.menus.MenuConfig(),AI=new i.ui.menus.MenuConfig(),AT=new i.ui.menus.MenuConfig(),AX=new i.ui.menus.MenuConfig();Ac.selCells=Aa.selection;if(AP.model.supportsViewFilterActions(Ad.tid)){if((AK||AW)&&B(Ad,o)&&N(Ac)){AN.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AP.derivedElementGroup(Ad);});}if(AM&&AZ&&AZ.t===a.LIST){AI.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AP.derivedElementsEdit(Ad,AQ);});AI.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AP.removeQuickDE(Ad);});AX.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AP.renameDEList(Ad);});}var AR=function(Ae){E(Ac,Ad,AZ,Ae,false);},AV=function(Ae){E(Ac,Ad,AZ,Ae,true);};if(AU&&!AM&&AW){j.forEach(AS,function(Ae){if(Ae[0]&&Ae[0].eid.indexOf(AU.id)>-1){AY=false;return false;}});}if(Ab!=="VIHeatMapVisualizationStyle"&&!(AM&&AZ&&AZ.t===a.RESIDUE)&&(AK||AW)&&B(Ad,f)&&I(Ac)){var AH=function(){var Ae=new i.ui.menus.MenuConfig(),Af=M(Ac,null,AO);Ae.addRadioMenuGroup(null,AR,Af.items,"checkMark",undefined,true);return Ae;};AN.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),this.id,AH,"xt");}if(AM&&AZ&&AZ.t===a.CALCULATION){var AJ=function(){var Ae=new i.ui.menus.MenuConfig(),Af=M(Ac,AZ,AO);Ae.addRadioMenuGroup(Af.selectedItem.value,AV,Af.items,"checkMark",undefined,true);return Ae;};AT.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),this.id,AJ,"xt");AT.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){AP.removeQuickDE(Ad);});AX.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){AP.editDECalculation(Ad);});}}return{createDe:AN,editGroup:AI,editCalculation:AT,renameDe:AX};},isHostedPopupNode:function(AL,AJ,AI,AH){var AM=AI?AL:AL&&AL.parentNode;while(AM&&(AM!==AH)){var AK=AM.getAttribute&&AM.getAttribute(AJ);if(AK!==null&&AK.indexOf("mstrmojo-popup-widget-hosted")>=0){return true;}AM=AM.parentNode;}return false;},applyStyle2Legend:function(AK,AJ,AI){var AH,AM={},AL={};for(AH in AK){if(AH.indexOf("font")>=0||AH.indexOf("color")>=0||AH.indexOf("textDecoration")>=0){AM[AH]=AK[AH];}else{AL[AH]=AK[AH];}}if(AJ){AJ.style.background="";this.applyStyles2DomNode(AJ,AL);}if(AI){this.applyStyles2DomNode(AI,AM);}},mergeMenuConfigs:function K(AI,AH){function AJ(AL,AM,AK){if(!AM){return ;}if(!AK&&AL.hasMenuItems()&&AM.hasMenuItems()){AL.addSeparator();}if(AM.hasMenuItems()){AL.absorbMenuItems(AM);}}return AH.reduce(function(AK,AL){AJ(AK,AI[AL.name],AL.noSeparator);return AK;},new mstrmojo.ui.menus.MenuConfig());},absorbMenuItems:function(AI,AH,AJ){AI.addDisposable(AH);AI.absorbMenuItems(AH);if(AJ&&AH.menus.length>0){AI.addSeparator();}},addWheelListener:(function(){var AK=mstrmojo.dom,AJ=AK.attachEvent,AI=AK.preventDefault,AL;function AH(AP,AO,AQ,AN){var AM=(AL==="wheel")?AQ:function(AR){if(!AR){AR=window.event;}var AT={originalEvent:AR,target:AR.target||AR.srcElement,type:"wheel",deltaMode:(AR.deltaMode!==undefined?AR.deltaMode:1),deltaX:0,deltaZ:0,preventDefault:function(){AI(window,AR);}},AS=this;if(AL==="mousewheel"){AT.deltaY=-AR.wheelDelta;if(AR.wheelDeltaX!==undefined){AT.deltaX=-AR.wheelDeltaX;}}else{AT.deltaY=AR.detail;}return AQ.call(AS,AT);};return AJ(AP,AO,AM,AN);}if(Object.prototype.hasOwnProperty.call(document.createElement("div"),"onwheel")){AL="wheel";}else{AL=document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";}return function(AN,AO,AM){return AH(AN,AL,AO,AM);};}()),isNearZero:function(AI,AH){AH=AH||5;var AJ=1/Math.pow(10,AH);return(Math.abs(AI)<AJ);},hasMergedRowCells:function(AH){return false;},getMockUpThresholds:function(AJ,AK){var AH=[{tid:1,n:"threshold 0",scope:1,rtp:2,rtxt:"",fmt:{bc:"#cc2525",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,flr:0,ceil:10},{tid:2,n:"threshold 1",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e34b4b",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5},{v:"30%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:10,ceil:30},{tid:3,n:"threshold 2",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e97d7d",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"30%",dtp:5},{v:"50%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:30,ceil:50},{tid:4,n:"threshold 3",scope:1,rtp:2,rtxt:"",fmt:{bc:"#79d479",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"50%",dtp:5},{v:"70%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:50,ceil:70},{tid:5,n:"threshold 4",scope:1,rtp:2,rtxt:"",fmt:{bc:"#57ba57",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"70%",dtp:5},{v:"90%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:70,ceil:90},{tid:6,n:"threshold 5",scope:1,rtp:2,rtxt:"",fmt:{bc:"#2ca02c",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"90%",dtp:5}],fn:5,fnt:3}],fn:19},ttp:1,flr:90,ceil:100}];j.forEach(AH,function(AM){var AL=AM.expr.nds[0].m;AL.did=AJ;AL.n=AK;});var AI={};AI[AJ]=AH;return AI;},generateThresholdsInfo:function(AJ,AO,AH,AL){var AN=AH.length,AI=[],AR,AK,AS=0,AQ=0;for(var AM=0;AM<AN;AM++){AK=Math.round(AL[AM]*100);AQ=AS;AS=AK||100;AR={tid:AM+1,n:"threshold "+AM,scope:1,rtp:2,rtxt:"",fmt:{bc:AH[AM],bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:AJ,n:AO},cs:[{v:AK+"%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,ceil:AS,flr:AQ};AI.push(AR);}var AP={};AP[AJ]=AI;return AP;},psPt2CssPt:function(AJ,AI){var AH=parseInt(AJ,10)*0.75;if(AI instanceof Function){AH=AI(AH);}return AH+"pt";},captureEventOnce:function(AM,AL,AH,AK,AJ){function AI(AN){AL.call(AH,Z.newDomEvent(AM,window,AN||window.event),AJ);S.detachEvent(AK,AM,AI);}AJ=AJ||{};AK=AK||document;S.attachEvent(AK,AM,AI);},getPropertyByPath:function(AL,AK,AH){var AI,AJ;if(typeof AK!=="string"){return AH;}AI=AK.split(".");AJ=AI.every(function(AN){var AM=AL[AN];if(AM!==undefined){AL=AM;return true;}return false;});return AJ?AL:AH;},mergeHashes:function(){return Array.prototype.slice.apply(arguments).reduce(function(AH,AI){if(AI){Object.keys(AI).forEach(function(AJ){AH[AJ]=AI[AJ];});}return AH;},{});},toggleControlEnabled:function(AH,AI){[].concat(AH).forEach(function(AJ){AJ.set("enabled",!!AI);});},findInArray:function(AK,AJ,AI){var AM=-1,AL,AH;if(!Array.isArray(AK)){return AM;}for(AL=AI===undefined?0:AI,AH=AK.length;AL<AH;AL+=1){if(AJ(AK[AL])){return AL;}}return AM;},arrayUnique:function(AH,AI){if(!Array.isArray(AH)){return AH;}return AH.filter(function(AJ,AK){return n.findInArray(AH,function(AL){return AI(AJ,AL);},AK+1)===-1;});},range:function(AH,AL,AK){AK=AK||1;var AJ,AI=[];for(AJ=AH;AJ!==AL;AJ+=AK){AI.push(AJ);}return AI;},drawDashLine:function D(AP,AJ,AN,AI,AL,AH,AO){var AM=(AJ===AI),AK;AP.beginPath();AP.moveTo(AJ,AN);if(AM){AK=0;AN+=AH;while(AN<=AL){if(AK%2===0){AP.lineTo(AJ,AN);AN+=AO;}else{AP.moveTo(AJ,AN);AN+=AH;}AK++;}if(AK%2===0){AP.lineTo(AI,AL);}}else{AK=0;AJ+=AH;while(AJ<=AI){if(AK%2===0){AP.lineTo(AJ,AN);AJ+=AO;}else{AP.moveTo(AJ,AN);AJ+=AH;}AK++;}if(AK%2===0){AP.lineTo(AI,AL);}}AP.stroke();},repeat:function(AJ,AK){var AH=[],AI;AK=Math.max(0,AK);for(AI=0;AI<AK;AI+=1){AH[AI]=AJ;}return AH;},isHierarchyObject:function(AH){return(AH&&AH.t)===AA.DssTypeDimension;},selectPropertyPanel:function(AI,AJ){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AI.getDocModel().selectVIUnit(AI.parent.id,true);var AH=AI.edtModel;if(AH){AH.selectTargetByValue(AJ);}},pluck:function(AI,AH){if(!j.isArray(AI)){return AI;}return AI.map(function(AJ){return AJ&&AJ[AH];});},pick:function(AI,AH){return AH.reduce(function(AK,AJ){AK[AJ]=AI[AJ];return AK;},{});},isColorManuallySet:function(AJ,AI){var AH=AD(AJ,AI);if(AH){return AH.isManual;}},getCombColor:function(AJ,AI){var AH=AD(AJ,AI);if(AH){return AH.color;}},setColorPickerShowAutomatic:function(AI,AH){AI.children[0].fillColor.colorPicker.showAutomatic=AH;},getCharGroupValueChangeCb:function(AH){var AI=(function(){var AJ={};AJ[c.FONT_WEIGHT]=J.FS_BOLD;AJ[c.FONT_STYLE]=J.FS_ITALIC;AJ[c.UNDERLINE]=J.FS_UNDERLINE;AJ[c.LINE_THROUGH]=J.FS_STRIKETHROUGH;return function(AK,AL){return AK^AJ[AL];};}());return function(AK,AJ){if(AH instanceof Function){AH=AH();}if(!AH){return ;}switch(AK){case c.COLOR:AH.fontColor.fill.value.setValue(AJ);break;case c.FONT_SIZE:AH.fontSize.setValue(AJ);break;case c.FONT_FAMILY:AH.fontFamily.setValue(AJ);break;case c.FONT_WEIGHT:case c.FONT_STYLE:case c.UNDERLINE:case c.LINE_THROUGH:AH.fontStyle.setValue(AI(AH.fontStyle.getValue(),AK));break;}};},getMetricsInDropZone:C,addLegendFontChangeListeners:function(AI,AJ){var AH=["lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle"];AC(AH,AI,AJ);},addLegendBackgroundChangeListeners:function(AI,AJ){var AH=["lgdBgFillClr","lgdBgFillTrans"];AC(AH,AI,AJ);},isValidDropZone:function(AH){if(AH===undefined){return false;}var AJ=Object.keys(AH).filter(function(AK){return AK!=="visProp";});var AI=T.copyProps(AJ,AH);return AH&&!T.equals(AI,{});},getDrillCandidates:function(AM){var AJ=AM.modelData,AK=AM.model,AI=AK.docModel.datasets,AH=AJ.gts,AL=AJ.datasetId,AN=AI[AL],AO=AN.att||[];return AO.filter(function(AR){var AQ=AR.did,AS=AH.row||[],AP=AH.col||[];return AS.concat(AP).every(function(AT){return AT.id!==AQ&&AR.hide!==true;});});},getDrillMenuItemsCallback:function(AI,AJ,AH){return function(){var AL=n.getDrillCandidates(AI),AK=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});AL.forEach(function(AM){AK.addMenuItem(AM.n,"xt",AJ,T.copy(AH,{drillUnit:AM}));});return AK;};},doDrill:function(AJ,AX,AS,AY){var AZ=AJ;function AP(Ab){return Ab.model.controller.cmdMgr;}function AV(){return{success:function Ab(){n.visPrint("reaise");this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}var AI=AZ.model,AW=(AZ.getDocModel&&AZ.getDocModel())||AZ.model.docModel,AU=AW.getDataService(),AM=AU.newUpdate();var AO=true;if(AW.prefs&&AW.prefs.rtprnt){AO=parseInt(AW.prefs.rtprnt,10)===1;}else{if(AI.xtab.defn.tkp!==undefined){AO=parseInt(AI.xtab.defn.tkp,10)===-1;}}AY=AY||{};AY.keepParent=AO;var AN=AS.call(AJ,AX,AY);var AQ=AZ.zonesModel,Aa=AQ.getUpdateCallback(),AR=AZ.model.controller||AW.controller,AK=AR._getXtabCallback(AZ);AM.add(AN,R(Aa,AK));var AH=AI.getSelectorDataFromViewFilter(AZ.model.data.vfexpr).concat({keepOnly:true,data:AZ.getSelections()}),AT=AW.getKeepOnlyOrExcludeAction(AZ.k,AH);AM.add(AT,AV.call(AZ));AP(AZ).execute({execute:function AL(){this.submitUpdate(AM);},urInfo:{callback:AM.callback}});},strStartsWith:function(AJ,AI,AH){AH=AH||0;return AJ.lastIndexOf(AI,AH)===AH;},changeWidgetBackground:function(AJ,AK,AI){var AH=AJ.parent;if(AH&&AK!==AI){AH.changeUnitFormats(false,1,AJ.getFormats(),c.BACKGROUND_COLOR,AK,AI);AH.raiseEvent({name:"BEMFormatChange",propertyName:c.BACKGROUND_COLOR,value:AK,isTitle:false});}},translateGridError:function(AI,AH){if(AH===undefined){AH=e.AE_ERROR;}if(AH===e.EMPTY_DATA){AI=mstrmojo.desc(12093,"Filter excludes all data");}if(AH===e.NO_DATASET||AH===e.NO_TEMPLATE_UNIT){AI=mstrmojo.desc(11668,"Drag objects here.");}if(!AI){AI=mstrmojo.desc(13687,"Unknown error");}return{msg:AI,type:AH};},hasValidValueInMetric:function(AJ,AH){var AI=n.getPropertyByPath(AJ,"model.data.gsi.mx");if(AI===undefined||AI.length<=AH||AH<0){return false;}var AK=AI[AH];return["min","max"].every(function(AL){var AM=AK[AL];return AM!==undefined&&AM!==null&&AM!=="";});},renderWidgetErrorRSD:function(AK,AM,AI){var AO=document.createElement("div");var AN='<div style="display: table; height: 100%; width: 100%; background-color:#F5F5F2; border: solid 1px #A7A7A7; box-sizing: border-box;"><div style="display: table-cell; vertical-align: middle; text-align: center; color: #000000; font-size: 14pt;">'+AM+"</div></div>";AO.innerHTML=AN;AO=AO.firstChild;var AH=AK.width,AJ=AK.height;if(AH!==undefined){AO.style.width=AH+"px";}if(AJ!==undefined){AO.style.height=AJ+"px";}var AL=AK.domNode;if(AL){AI.forEach(function(AP){AL["on"+AP]=undefined;});while(AL.firstChild){AL.removeChild(AL.firstChild);}AL.appendChild(AO);}else{AK.parent.domNode.appendChild(AO);}},visPrint:function(){var AH=mstrmojo.VisUtility.enableInVis;if(AH&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},hasCGorCon:function(AK,AH){var AJ=AH&&AH.did,AI=AK.model.data.datasetId||"",AL=null;if(AJ){AL=p.getDatasetFromAttributeId(AK.model.docModel.datasets,AJ);}else{if(AI){AL=p.getDatasetFromId(AK.model.docModel.datasets,AI);}}return AL&&p.hasCGorCon(AL);},findElementsByAttribute:function l(AJ,AL,AK,AH){AH=!!AH;var AM=[];if(AK.constructor!==Array){AK=[AK];}var AN=function(AO){if(AH){return AO.identity&&AO.identity.tlOpt&&AO.identity.tlOpt[AL];}else{return AO.getAttribute(AL);}};function AI(AQ){var AO=AN(AQ),AP;if(AQ.hasChildNodes()){AP=AQ.firstChild;while(AP){if(AP.nodeType===1){AO=AN(AP);if(AK.indexOf(AO)!==-1){AM.push(AP);}else{AI(AP);}}AP=AP.nextSibling;}}}AI(AJ);return AM;}});mstrmojo.VisUtility.enableInVis=true;var n=mstrmojo.VisUtility;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.gm._IsAnchorable","mstrmojo.ui._HasUITheme","mstrmojo.VisUtility");var D=mstrmojo.dom,E=mstrmojo.VisUtility;mstrmojo.gm.DndTooltip=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.gm._IsAnchorable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.gm.DndTooltip",left:0,top:0,zIndex:10,boundaryNodeName:"boundary",popupNodeName:"infoNode",baseTipClass:"arrow",infoNodeOffset:0,popupNodeOffset:5,anchor:null,boundary:null,utils:mstrmojo.VisChartUtils,themeClassName:"mojo-theme-light",markupString:'<div id="{@id}" class="mstrmojo-Tooltip {@cssClass}" style="top:{@top}px;left:{@left}px;z-index:{@zIndex};position:absolute;{@cssText};"><div class="mstrmojo-Tooltip-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Tooltip-content {@contentNodeCssClass}" style="{@contentNodeCssText}"><div class="content"></div><div class="arrow"><div class="after"></div><div class="before"></div></div></div></div>',markupSlots:{infoNode:function(){return this.domNode.childNodes[1];},contentNode:function(){return this.domNode.childNodes[1].firstChild;},tipNode:function(){return this.domNode.childNodes[1].lastChild;}},toggle:function A(G){if(G){this.domNode.style.display="block";}else{this.domNode.style.display="none";}},updateContent:function(G,I,H){this.set("themeClassName",mstrApp.getThemeClassName());this.fillContent(G,I,H);this.positionDialog();},fillContent:function C(I,M,K){this.anchor=I;this.anchorPosition=M;this.contentNode.innerHTML=K||this.anchor.innerText||this.anchor.textContent;this.toggle(true);var G=E.getComputedFontStyle(this.contentNode),L=this.contentNode.innerHTML,H=E.measureTextWidth(L,G),J=130;if(H<=J){this.contentNode.style.width=H+"px";}else{this.contentNode.innerHTML=E.truncateTextToLineWithWordWrap(L,G,J,3);this.contentNode.style.width=J+"px";}},getTipDimension:function B(){var H=this[this.tipNodeName],G=D.position(H.firstChild);return G;},applyPopupNodePos:function F(I,H,K,G){var M=this[this.tipNodeName],J=M.style,N=this[this.popupNodeName],L=N.style;L.top=I+"px";L.left=H+"px";J.top=(K-I)+"px";J.left=(G-H)+"px";}});}());(function(){mstrmojo.requiresCls("mstrmojo.gm.GMEnums","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.VisEnum.GMLegendFormatingPropertyTag","mstrmojo.VisUtility");var N=mstrmojo.gm.EnumTRFManipulations;var J=mstrmojo.array,C=mstrmojo.hash,M=mstrmojo.func.wrapMethods,G=mstrmojo.func.composite,I=mstrmojo.VisEnum.GMLegendFormatingPropertyTag;var D={silent:false,undo:mstrmojo.emptyFn,redo:mstrmojo.emptyFn};function K(O){return O.model.controller.cmdMgr;}function L(){return(this.getDocModel&&this.getDocModel())||this.model.docModel;}function H(){return{success:function O(){this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}function E(P,R){var O,U,Q,S,T={};T.tks=this.k;T.selectorObjects=P;T.keepOnly=!!R;T.isDocVis=true;O=L.call(this);U=O.getDataService();Q=U.getGMViewFilterAction(T);S=O.getSliceCallback(T);return{action:Q,callbacks:S};}function B(Q,P){var O,S,R;O=L.call(this);R=O.getDataService();if(!this.isXMLDirty()){R.submitUpdates(Q,P);}else{S=this.getPersistAction();R.submitUpdates([Q,S],P);this.resetXMLDirtyFlag();}}function A(){var b=this.modelData||this.model.data,S=b.k,Z,Y="FormattingWidget",U,T,X,P,Q,R=[],W=[],V=this.edtModel;if(!b){console.log("warning: modelData is missing");return null;}var a=function(d,f){var c=T.createElement(f),e;if(d instanceof Object){for(e in d){if(d.hasOwnProperty(e)){var g=a(d[e],e);if(g){c.appendChild(g);}}}}else{c.setAttribute("value",d);}return c;};var O=function(c){return c.replace(/</g,"&lt;").replace(/"/g,"&quot;");};W=!!V&&!!V.getActionsWithUpdateProperty?V.getActionsWithUpdateProperty():[];X=this.createWidgetPropsXML?this.createWidgetPropsXML():null;if(!X||X.length===0){U=this.getProperties();if(this.useCompatibleXML){T=(new DOMParser()).parseFromString("<widgetProps></widgetProps>","text/xml");T.firstChild.appendChild(a(U,"fmt"));}else{T=(new DOMParser()).parseFromString("<props><widgetProps></widgetProps></props>","text/xml");T.firstChild.firstChild.appendChild(a(U,"fmt"));}X=(new XMLSerializer()).serializeToString(T);}P=O(X);Q={act:"setProperty",nodeKey:S,prs:Y,pri:4,v:P};R.push(Q);if(!!W){R=R.concat(W);}return R;}function F(P,Q,O,T){if(!(T instanceof Function)){return D;}var S=this.id;function R(U){return function(){var W=mstrmojo.all[S],V=W.getProperties();V[P]=U;T.call(W,U,true);W.getDocModel().selectVIUnit(W.parent.id,true);};}return{silent:true,undo:R(O),redo:R(Q)};}mstrmojo._VizSelectionHelper=mstrmojo.provide("mstrmojo._VizSelectionHelper",{postBuilderingCalled:false,listenToUpdateColorMap:function(R){if(mstrmojo.VisUtility.isOnExpressMode()){return ;}var Q=this,P,O=(Q.getDocModel&&Q.getDocModel())||Q.model.docModel;if(O){return O.attachEventListener("colorMapChanged",Q.id,function(T){P=Q.parent&&Q.parent.parent;if(Q.forceUpdateColorMap||(P&&P.isPanelDisplaying())){R.call(Q);}else{var S=P.attachEventListener("panelDisplaying",Q.id,function(U){if(Q.postBuilderingCalled){R.call(Q);}P.detachEventListener(S);});}});}},detachUpdateColorMapListener:function(P){if(!P){return ;}var O=(this.getDocModel&&this.getDocModel())||this.model.docModel;O.detachEventListener(P);},updateTargets:function(P){var S={},Q=this,O=L.call(this);S.fromGM=true;S.type=1;S.src=this.k;S.selectorObjects=P;function R(V){var T=Q.modelData||Q.model.data,U=T.sc;if(U!==undefined){return U[V];}return undefined;}S.keepOnly=true;S.ck=R.call(this,"ck");S.keyContext=S.ck;S.tks=R.call(this,"tks");S.ckey=R.call(this,"ckey");S.isDocVis=true;S.include=true;S.showall=R.call(this,"showall");O.slice(S);},updateAfterViewFilter:function(Q,O){var V,U,P,T,S,W,R;V=L.call(this);U=V.getDataService();T=E.call(this,Q,O);P=T.action;S=T.callbacks;R=this.model.controller||V.controller;if(this.currKeepOnlyAction){W=[C.clone(this.currKeepOnlyAction)];}else{W=E.call(this,[],false).action;}this.currKeepOnlyAction=P;R.submitUndoRedoUpdates([P],W,S);},updateAfterKeepOnly:function(Q){var P=L.call(this),O=this.model.controller||P.controller,R=M(O._getXtabCallback(this),H.call(this));O.applyKeepOnly(this,R,{keepOnly:Q,data:this.getSelections()},Q?-2:undefined);},updateAfterDrill:function(O,Y){var V=this,Z=L.call(this),X=Z.getDataService(),R=X.newUpdate(),Q=this.getSelections(),U=this.model.getSelectorDataFromViewFilter(V.model.data.vfexpr).concat({keepOnly:true,data:Q}),P=Z.getKeepOnlyOrExcludeAction(V.k,U),S=V.model.controller||Z.controller,T=S._getXtabCallback(V);R.add(O,M(Y,T));R.add(P,H.call(V));K(V).execute({execute:function W(){this.submitUpdate(R);},urInfo:{callback:R.callback}});},updateAfterSort:function(R){var P=this,O=L.call(this),S=O.getDataService(),T=O.getSliceCallback({tks:P.k});K(P).execute({execute:function Q(){var V=S.newUpdate(this,undefined),U={act:"sortGM",nodeKey:P.k,subActions:R};V.add(U,T,undefined);if(P.isXMLDirty()){V.addActions(P.getPersistAction());}this.submitUpdate(V,undefined);},urInfo:{callback:T}});},updateAfterAction:function(T,O,P,a,X){if(!T){return ;}var V=this,Q=V.parent&&V.parent.id,b=V.model.docModel,U=V.model.controller||b.controller,Z,Y,S={},W,R=X||D;if(P){Z=mstrmojo.emptyFn;W=function(){this.submitSilent(T);};}else{Z=b.getSliceCallback({tks:this.k});Z.success=G([Z.success,function(){b.selectVIUnit(Q,true);}]);W=function(){this.submit(T,Z,S);};}Y=U._getXtabCallback(V);if(O){Z=M(Z,O);Y=M(Y,O);}Y.success=G([Y.success,function(){b.selectVIUnit(Q,true);}]);if(P){C.copy(mstrmojo.DocDataService.SUPPRESS_DATA,S);}if(a){C.copy(mstrmojo.DocDataService.REQUEST_DEFN_DATA,S);}K(this).execute({execute:W,urInfo:{silent:R.silent,callback:Y,redo:R.redo,undo:R.undo}});},getProperties:mstrmojo.emptyFn,getSetPropertiesAction:A,updateAfterPropertiesChange:function(P,Q,O,R){this.updateAfterAction(A.call(this),P,Q,O,R);},setProperty:function(V,R,T){var P=T.callback,Q=!!T.suppressData,X=T.requestDefinition,S=T.clientUndoRedoCallback,W=this.getProperties(),O=W[V],U;if(V===I.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorMap(this.colorSqureIdentity.comb,R);}}else{if(W&&(W[V]===undefined||W[V].toString()!==R.toString())){W[V]=R;U=F.call(this,V,R,O,S);this.updateAfterPropertiesChange(P,Q,X,U);}}},showData:function(O){if(!this.gridData){this.gridData=this.model.data;}mstrmojo.vi.ui.ViewDataDialog.open(this.parent,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash","mstrmojo.Label","mstrmojo.array","mstrmojo.Popup","mstrmojo.Box","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.PopupConfig","mstrmojo.ui.Pulldown","mstrmojo.ui.editors.controls.LineStyleButton","mstrmojo.dom","mstrmojo.models.FormatModel","mstrmojo.VisUtility");var K=mstrmojo.array,B=mstrmojo.hash,J=mstrmojo.dom,E=mstrmojo.VisUtility,D=11,G=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES;function O(){var R=D,S,Q=[],U=Math.round(100/(R-1));for(S=0;S<R;S++){var T=(S*U)/100,P=(S*U)+"%";if(S===R-1){P="100%";T=1;}Q.push({n:P,did:T});}return Q;}function I(){var P=[{n:mstrmojo.desc(12100,"Circle"),did:"Circle"},{n:mstrmojo.desc(12101,"Square"),did:"Square"},{n:mstrmojo.desc(14433,"Diamond"),did:"Diamond"},{n:mstrmojo.desc(14434,"Hexagon"),did:"Hexagon"},{n:mstrmojo.desc(14435,"Triangle"),did:"Triangle"},{n:mstrmojo.desc(12103,"Ring"),did:"Ring"}];return P;}function N(S){var Q=D,R,P=0,T=Math.round(100/(Q-1));S=Math.round(S*100);for(R=0;R<Q;R++){if(Math.abs(S-R*T)<0.5*T){P=R;break;}}return P;}function L(P){P=P||[];K.forEach(P,function(Q){Q.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.Box",cssClass:"row-container",children:P};}function H(Q,P,R,T){T=T||"60px";var S=new mstrmojo.ui.Pulldown({items:Q,width:T});S.set("selectedIndex",P);S.postselectedIndexChange=function(U){var V=U.value,W=Q[V]&&Q[V].did;R.setValue(W);};return{scriptClass:"mstrmojo.Box",children:[S]};}function F(Q,P){return B.copy(P,{scriptClass:"mstrmojo.Label",text:Q,cssText:"width: 60px;"});}function A(P,R){var Q;K.forEach(P,function(T,S){if(T===R||T.did===R){Q=S;return false;}});return Q;}var C={background:function(Q,P){var S=(P&&P.label)||mstrmojo.desc(3905,"Background"),R=mstrApp.getThemeClassName()||"";return{scriptClass:"mstrmojo.Popup",cssClass:"widget-inner-context-menu "+R,locksHover:true,children:[L([F(S),{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",isHostedWithin:true,cssClass:R,selectedValue:Q.value.getValue(),model:Q.value,showNoFill:false,width:"60px",postselectedValueChange:function(T){this.model.setValue(T.value);}}]}])]};},bubble:function(Q,P){var S=mstrApp.getThemeClassName()||"",R=P.alignment.attSrc==="from"?Q.circleStyle.fromNode:Q.circleStyle.toNode;return{scriptClass:"mstrmojo.Popup",cssClass:"widget-inner-context-menu "+S,locksHover:true,children:[L([F(mstrmojo.desc(2923,"Shape")),H(I(),A(I(),R.shape.getValue()),R.shape,"128px")]),L([F(mstrmojo.desc(2885,"Fill")),{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",isHostedWithin:true,cssClass:S,showNoFill:false,selectedValue:R.color.value.getValue(),model:R.color.value,width:"60px",postselectedValueChange:function(T){if(!B.equals(T.value,T.valueWas)){this.model.setValue(T.value);}}}]},H(O(),N(R.color.opacity.getValue()),R.color.opacity)]),L([F(mstrmojo.desc(9736,"Border")),{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",isHostedWithin:true,cssClass:S,showNoFill:false,showGradient:false,selectedValue:R.border.color.value.getValue(),model:R.border.color.value,width:"60px",postselectedValueChange:function(T){this.model.setValue(T.value);}}]},{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",width:"60px",isHostedWithin:true,model:R.border.style,selectedValue:R.border.style.getValue(),postselectedValueChange:function(T){this.model.setValue(T.value);}}]}]),L([F(mstrmojo.desc(11993,"Data Labels")),{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.ui.editors.controls.CharacterGroup",cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,showNoFillInColor:false,width:"380px",height:"22px,",onGroupValueChange:E.getCharGroupValueChangeCb(Q.circleLabelStyle)}]}])]};}};function M(V,T,U,Q){var S=C[V];if(S){var P=S(T,Q),W=J.position(this.containerNode,true),Y=U.pageX-W.x,X=U.pageY-W.y;var R=this._contextMenuAnchor;if(!R||!R.parentElement){R=document.createElement("div");R.style.position="absolute";this._contextMenuAnchor=R;this.containerNode.appendChild(R);}R.style.left=Y+1+"px";R.style.top=X+1+"px";var Z={hostId:this.id,hostElement:R,isHostedWithin:false};if(Q&&Q.alignment){Z.alignment=Q.alignment;}P.popupConfig=new mstrmojo.ui.PopupConfig(Z);P.visible=true;P.onClose=function(){this.unrender();};return P;}}mstrmojo.netviz._HasNetworkContextMenu=mstrmojo.provide("mstrmojo.netviz._HasNetworkContextMenu",{getWidget:function(){return this.owner;},showContextMenu:function(T,S,U,P){var R=M.call(this,T,S,U,P);if(P&&E.getPropertyByPath(P,"alignment.attSrc",false)!==false){if(P.alignment.attSrc==="from"){this.parent.textSelectedIndex=1;}else{this.parent.textSelectedIndex=2;}}if(T==="bubble"){R=mstrmojo.registry.ref(R);var Q=E.getPropertyByPath(R,"children.3.children.1.children.0");if(Q!==undefined){Q.setFormatSource(this.getDataLabelFormats());Q.fontColor.isHostedWithin=true;Q.fontSize.isHostedWithin=true;Q.fontFamily.isHostedWithin=true;}}this.openPopup(R);},unrender:function(P){this._contextMenuAnchor=undefined;this._super(P);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.VisUtility");var R=mstrmojo.css,A=mstrmojo.VisUtility,H=mstrmojo.array,D=mstrmojo.string,I="vis-tooltip",N=20,P=165,L=350,E=350,G="px";function Q(){var U=this.domNode;U.innerHTML="";var S=document.createElement("div");S.className=I+"-container";var V=document.createElement("table");V.className=I+"-table";for(var T=0;T<3;T++){V.appendChild(document.createElement("COL"));}S.appendChild(V);this.domNode.appendChild(S);return V;}function K(T){var S=[],U=false;H.forEach(T,function(V){if(!V.isSuper){S.push(V.v);}else{U=true;S.push("<sup>"+V.v+"</sup>");}});return{hasSuper:U,htmlText:S.join("")};}mstrmojo.VisTooltip=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.VisTooltip",init:function O(S){this._super(S);R.addWidgetCssClass(this,(S&&S.widgetClass)?[S.widgetClass,I]:I);},toggle:function M(S){var T=mstrApp.isAppStatePrintPreview&&mstrApp.isAppStatePrintPreview();if(this.domNode){this.domNode.style.display=S&&!T?"block":"none";}},displayInfo:function C(V,c,S){var U=this.domNode,d=Q.call(this),a=false,T=0,b=0,W=10,Z=false,Y=d.childNodes[0],X=d.childNodes[2];V.forEach(function(m){var s,l,u,p,e,k,q,o,w,n,t,r;if(!Z){var g=d.insertRow(-1),j=g.insertCell(-1),i=g.insertCell(-1),h=g.insertCell(-1);g.className=I+"-tr";j.className=I+"-name";i.className=I+"-space";h.className=I+"-value";if(m===null){R.addClass(g,"separator");a=true;}else{if(a){R.addClass(g,"below-separator");}if(!S){i.innerHTML=":";}s=m.n;r=!m.skipEncode;j.innerHTML=r?D.encodeHtmlString(s,true):s;u=A.getComputedFontStyle(j);p=Math.ceil(A.measureTextWidth(j.innerHTML,u,u.bonus));q=U.offsetHeight>=E?1:2;if(p>P){o=A.truncateTextToLineWithWordWrap(s,u,P,q,true);if(o.canWordWrap){j.innerHTML=r?D.encodeHtmlString(o.text,true):o.text;}else{o=A.truncateTextToLineWithWordWrap(s,u,P,1);j.innerHTML=r?D.encodeHtmlString(o,true):o;}}T=Math.min(Math.max(T,p),P);l=m.v;n=m.isTrendLineFuncToken;if(n){w=K(l);}if(!n||!w.hasSuper){if(n){l=w.htmlText;}h.innerHTML=r?D.encodeHtmlString(l,true):l;e=A.getComputedFontStyle(h);k=Math.ceil(A.measureTextWidth(h.innerHTML,e,e.bonus,null,true));if(k>P){o=A.truncateTextToLineWithWordWrap(l,e,P,m.noTruncate?100:q,true);if(!o.canWordWrap){o=A.truncateTextToLineWithWordWrap(l,e,P,1,true);}h.innerHTML=r?D.encodeHtmlString(o.text,true):o.text;k=o.maxLineLen;}b=Math.min(Math.max(b,k),P);}else{h.innerHTML=w.htmlText;e=A.getComputedFontStyle(h);k=0;H.forEach(l,function(x){x.textWidth=A.measureSuperTextWidth(x.isSuper,x.v,e,e.bonus);k+=x.textWidth;});k=Math.ceil(k);if(k>P){o=A.truncateTextToLineWithWordWrapForTokens(l,e,P,m.noTruncate?100:q,true,true);if(!o.canWordWrap){o=A.truncateTextToLineWithWordWrapForTokens(l,e,P,1,true);}h.innerHTML=K(o.text).htmlText;k=o.maxLineLen;}b=Math.min(Math.max(b,k),P);}Y.style.width=T+"px";X.style.width=b+"px";t=T+b+W;d.style.width=mstrmojo.dom.isIE9?(t+2)+"px":t+"px";a=false;}if(U.offsetHeight>=E){var f=d.lastChild;f&&f.removeChild(f.lastChild);Z=true;}}});if(c){this.moveTo(c.x,c.y);}},moveTo:function(a,Z){var Y=mstrmojo.dom.position(document.body),W=this.domNode,b=W.offsetWidth,X=W.offsetHeight,V=Y.x+Y.w,c=Y.y+Y.h,T=a+N,S=Z+N;if(T>V-b||S>c-X){if(T<=V-b){S=c-X;}else{if(S<=c-X){T=V-b;}else{T=V-b;S=Z-N-X;}}}var U=W.style;U.left=T+G;U.top=S+G;},doLayout:function B(S){var U=this.domNode.getElementsByTagName("table")[0];if(!U){return ;}var V=R.getComputedStyle(this.domNode),T=S-parseInt(V.paddingLeft,10)-parseInt(V.paddingRight,10);T-=U.rows[0].cells[0].offsetWidth;T-=10;U.getElementsByClassName(I+"-value").forEach(function(W){W.style.maxWidth=T+G;});},posTo:function J(T){var S=this.domNode.style;S.left=T.x+G;S.top=T.y+G;},renderErrMsg:function F(S){Q.call(this).insertRow(-1).insertCell(-1).innerText=S;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.VisUtility");var D=mstrmojo.array;var E=mstrmojo.VisUtility;var C=mstrmojo.vi.ui.rw.SelectionType;var F=2;function B(I){var H=-1;var J=this.modelData.gts.row||[],G=J.length,K;for(K=0;K<G;K++){if(J[K].id===I){H=K;}}return H;}mstrmojo.netviz._SupportNetworkBrushesAndHighlights=mstrmojo.provide("mstrmojo.netviz._SupportNetworkBrushesAndHighlights",{_mixinName:"mstrmojo.netviz._SupportNetworkBrushesAndHighlights",prepareSelectedNodesInfo:function(G){this.clearSelections();var H=this.getSelectedNodes();if(G instanceof Function){H=G.call(this,H);}D.forEach(H,function(J){var I=J.attributeElements;this.addAttributeSelection(J.attribute.id,I[0].id,E.pluck(I,"name").join(":"));},this);},highlight:function(X,e){if(this._super){this._super.apply(this,arguments);}if(this.noHighlightAfterKeepOnlyExcludeDrill){return ;}var J,I,G,Z,T,a=[],W,S,Q=[],b=this.stage,V=(b&&b.spriteCollection)||[],L,K,O,M,N=this.model;if(!this.stage){return ;}function P(l,i){var m,k,h,g,j=[],f;if(l){j.push(l);}if(i){j.push(i);}D.forEach(j,function(n){m=n.sprite;if(m&&a.indexOf(m)===-1){a.push(m);}});f=j.length;if(f===2){h=j[0].edges;g=j[1].edges;D.forEach(h,function(n){S=n&&n.sprite;if(g.indexOf(n)!==-1&&Q.indexOf(S)===-1){Q.push(S);}});}else{if(f===1){k=j[0].edges;D.forEach(k,function(n){S=n&&n.sprite;if(S&&Q.indexOf(S)===-1){Q.push(S);}});}}}function U(f){var g=null;D.forEach(V,function(h){if(h.type==="Circle"&&h.text===f){g=h;return false;}});return g;}function R(f){var j=null,g,i,h=[];D.forEach(V,function(k){if(k.type==="Circle"){g=k.unit;i=g?g.attributeElements:[];if(g&&g.hasSelfLoop){h=g.secondaryAttributeElements;}i=i.concat(h);D.forEach(i,function(l){if(N.compareElementsId(l.id,f)){j=k;return false;}});if(j){return false;}}});return j;}function Y(f){D.forEach(f,function(g){if(g){b.addToSelection(g);}});}function d(f){D.forEach(f,function(g){b.addToSelection(g);});}function c(){Y(a);d(Q);b.draw();}function H(f){var g="";D.forEach(f||[],function(h){g+=h.n+" ";});g=g.substring(0,g.length-1);return g;}if(X===C.ATTS){b.clearSelection();for(J in e){if(e.hasOwnProperty(J)){I=e[J];for(G in I){if(I.hasOwnProperty(G)){Z=B.call(this,G);if(Z<0){continue;}T=I[G];if(T&&T.length>0){W=R.call(this,T[0].id);}if(W&&a.indexOf(W)===-1){a.push(W);}}}}}c();}else{if(X===C.METRICS){b.clearSelection();for(J in e){if(!e.hasOwnProperty(J)){continue;}I=e[J];L=null;K=null;O=null;M=null;for(G in I){if(!I.hasOwnProperty(G)){continue;}Z=B.call(this,G);if(Z<0||Z>1){continue;}else{if(Z===0){T=I[G];if(T&&T.length>0){O=R.call(this,T[0].id);}L=O&&O.unit;}else{if(Z===1){T=I[G];if(T&&T.length>0){M=R.call(this,T[0].id);}K=M&&M.unit;}}}}P(L,K);}c();}else{if(X===C.EMPTY){b.clearSelection();b.draw();}}}},singleUnitSelect:function A(){var I=this.getSelections().length>0||this.clearSelectionsFlag;if(this.clearSelectionsFlag){delete this.clearSelectionsFlag;}if(I){var H=function(){var K=this.model.scm,M=Object.keys(K||{}),O=(M&&M[0])||"",N=this.model.data.gts.row,L=this.model.data.gts.col;D.forEach(N.concat(L),function(P){if(M.indexOf(P.id)!==-1){O=P.id;return false;}});return O;};var J=function(){var K={};K.tid=H.call(this);K.eid="";K.isClearAll=false;K.anchor=this.domNode;K.at=F;K.selections=this.getSelections();K.selectionType=this.getSelectionType();return K;};var G=J.call(this);this.performAction([G]);}},clearSelections:function(G){this.clearSelectionsFlag=true;if(this._super){this._super();}if(G&&this.stage){this.stage.dismissLassoSelector();this.stage.clearSelection();this.stage.draw(false);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumFontStyle");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","DSSDateTime","ScalePlate");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumDSSGraphObject");var g=mstrmojo.chart,c=g.model,o=mstrmojo.VisUtility,Q=g.enums,E=Q.EnumFontStyle,S=c.enums,y=S.EnumDSSGraphProperty,X=S.EnumDSSGraphDataTextShowType,z=S.EnumDSSGraphObject;var F=mstrmojo.gm.EnumDataLabels;var V=[["xAxLbFntClr","yAxLbFntClr","dlFntClr","lgdFntClr"],["xAxLbFntFml","yAxLbFntFml","dlFntFml","lgdFntFml"],["xAxLbFntSz","yAxLbFntSz","dlFntSz","lgdFntSz"],["xAxLbFntStyle","yAxLbFntStyle","dlFntStyle","lgdFntFml"]];var p=[["majorGridLnThk","minerGridLnThk","majorGridLnThk","minerGridLnThk"],["majorGridLnClr","minerGridLnClr","majorGridLnClr","minerGridLnClr"],["majorGridLnStyle","minerGridLnStyle","majorGridLnStyle","minerGridLnStyle"]];var Y=[["bgFillClr"],["bgFillStyle"],["bgFillTrans"]];function U(AI){switch(AI){case y.DssGraphFontColor:return 0;case y.DssGraphFontName:return 1;case y.DssGraphFontSize:return 2;case y.DssGraphFontStyle:return 3;case y.DssGraphFontSize100:return 4;default:return -1;}}function t(AI){switch(AI){case y.DssGraphAreaColor:return 0;case y.DssGraphFillEffect:return 1;case y.DssGraphAreaAlpha:return 2;}return -1;}function w(AI){var AJ;switch(AI){case z.DssGraphX1Body:case z.DssGraphX1Label:case z.DssGraphX1Major:case z.DssGraphX1Minor:case z.DssGraphUserLabel3:case z.DssGraphUserLine3:AJ="X1";break;case z.DssGraphX2Body:case z.DssGraphX2Label:case z.DssGraphX2Major:case z.DssGraphX2Minor:case z.DssGraphUserLabel4:case z.DssGraphUserLine4:AJ="X2";break;case z.DssGraphY1Body:case z.DssGraphY1Label:case z.DssGraphY1Major:case z.DssGraphY1Minor:case z.DssGraphUserLabel1:case z.DssGraphUserLine1:AJ="Y1";break;case z.DssGraphY2Body:case z.DssGraphY2Label:case z.DssGraphY2Major:case z.DssGraphY2Minor:case z.DssGraphUserLabel2:case z.DssGraphUserLine2:AJ="Y2";break;case z.DssGraphZBody:AJ="Z";break;case z.DssGraphO1Body:case z.DssGraph2DO1Label:case z.DssGraphO1Major:case z.DssGraphO1Minor:AJ="O1";break;case z.DssGraphO2Body:case z.DssGraph2DO2Label:case z.DssGraphO2Major:case z.DssGraphO2Minor:AJ="O2";break;default:AJ="No_Axis";break;}return AJ;}function d(AI,AJ){if(!!AI===false){return undefined;}return undefined;}function W(AN,AI){if(!!AN===false){return undefined;}var AS,AQ,AP=AI.isVertical!==undefined?AI.isVertical:true,AK=AI.isGridChart||false,AT=AI.isPieShape||false,AO={Name:0,Value:0},AL=AN.gaid,AM=AN.goid,AJ=AN.gsid,AR=AN.v;if(!!AL===false){return undefined;}switch(AL){case y.DssGraphShowLBLFeeler:if(AT){AO.Name="DataLabel";if((AR&X.DssGraphDataTextValue)!==0){AO.Value=F.SHOW_VALUE_ONLY;}else{if((AR&X.DssGraphDataTextLabel)!==0){AO.Value=F.SHOW_TEXT_ONLY;}else{AO.Value=F.HIDE;}}}break;case y.DssGraphAreaColor:case y.DssGraphFillEffect:case y.DssGraphAreaAlpha:AQ=t.call(this,AL);if(AQ<0){return undefined;}if(AM===z.DssGraphBackground){AO.Name=Y[AQ][0];if(AO.Name.search("Trans")!==-1){AO.Value=AR/255*100;}else{AO.Value=AR;}}break;case y.DssGraphShowLegendText:AO.Name="LegendVisibleness";AO.Value=AR===0?false:true;break;case y.DssGraphSDShowDataText:AO.Name="ShowSeriesDataLabel";AO.Value=AR!==0;break;case y.DssGraphShowDataText:if(AT===false){AO.Name="DataLabel";AO.Value=F.HIDE;if(AR&X.DssGraphDataTextValue){AO.Value=F.SHOW_VALUE_ONLY;}else{if(AR&X.DssGraphDataTextLabel){AO.Value=F.SHOW_TEXT_ONLY;}}}break;case y.DssGraphFontColor:case y.DssGraphFontName:case y.DssGraphFontSize100:case y.DssGraphFontSize:case y.DssGraphFontStyle:AO.Value=AR;AS=w.call(this,AM);AQ=U.call(this,AL);if(AQ<0){return undefined;}if(AQ===4){AQ=3;AO.Value/=100;}if(AS==="No_Axis"){if(AM===z.DssGraphDataText){if(AT){return undefined;}AO.Name=V[AQ][2];}else{if(AM===z.DssGraphPieFeelerLabel||AM===z.DssGraphPieFeelerLabel){if(AT===false){return undefined;}AO.Name=V[AQ][2];}else{if(AM===z.DssGraphLegendText){AO.Name=V[AQ][3];}else{return undefined;}}}}else{if(AS[0]==="X"){AO.Name=V[AQ][0];}else{if(AS[0]==="Y"){AO.Name=V[AQ][1];}else{if(AS[0]==="O"){AO.Name=AP?V[AQ][0]:V[AQ][1];}else{return undefined;}}}}break;}return AO;}var T,i=String.fromCharCode,AC=mstrmojo.locales.datetime,AH=0,L=document.getElementById("measureText"),B={},h={};var m=0.03,K=0,R=0,H=0.2;function n(AJ){var AI,AK=[],AL;for(AI=0;AI<=AJ;AI++){AL=AI.toString(16);if(AL.length===1){AL="0"+AL;}AK[AI]=AL;}T=AK;return AK;}function AF(AI){var AJ=parseFloat(AI);if(isNaN(AJ)===false&&AJ!==undefined&&AJ!==null){return AJ;}return 0;}function D(AI){AI=AI.replace(/ddd/g,"EEE");AI=AI.replace(/AM\/PM/g,"a");AI=AI.replace(/tt/g,"a");AI=AI.replace(/:'/g,":");AI=AI.replace(/'\/'/g,"/");AI=AI.replace(/\\/g,"");var AJ,AL=true,AK=AI.length;for(AJ=0;AJ<AK;AJ++){if(AI[AJ]==="h"||AI[AJ]==="H"||AI[AJ]===":"){AL=true;}else{if(AI[AJ]===" "&&AL){AL=true;}}if(AI[AJ]==="m"&&AL){AI=AI.substring(0,AJ)+"M"+AI.substring(AJ+1);}}return AI;}mstrmojo.chart.common.Utility=mstrmojo.provide("mstrmojo.chart.common.Utility",{point2D:{},rect2D:{},tripleId:{create:function M(AJ,AN,AL,AK,AM){if(AJ===null||AJ===undefined){AJ=-3;}if(AN===null||AN===undefined){AN=-3;}if(AL===null||AL===undefined){AL=-3;}var AI={mObjectId:AJ,mSeriesId:AN,mGroupId:AL};if(AK!==undefined&&AK!==null){AI.angleByIndex=AK;}if(AM!==undefined&&AM!==null){AI.sliceById=AM;}return AI;},walks:function k(AM,AK){if(!!AM===false||!!AK===false){return null;}if(AM.length===1){return AK[AM[0]];}var AL=(AM&&AM.length)||0,AJ,AI=AM[AJ];for(AJ=0;AJ<AL;AJ++){if(AK[AI]===undefined){AK[AI]={};}AK=AK[AI];}return AK;},equal:function a(AI,AJ){return(AI.mObjectId===AJ.mObjectId&&AI.mSeriesId===AJ.mSeriesId&&AI.mGroupId===AJ.mGroupId);},reset:function q(AK,AM,AL,AJ,AI,AN){AK.mObjectId=AM!==undefined?AM:-3;AK.mSeriesId=AL!==undefined?AL:-3;AK.mGroupId=AJ!==undefined?AJ:-3;if(AI!==undefined&&AI!==null){AK.angleByIndex=AI;}if(AN!==undefined&&AN!==null){AK.sliceById=AN;}return AK;}},transformProperty:function A(AI,AK,AJ){if(AK===0){return W.call(this,AI,AJ);}return d.call(this,AI,AJ);},abbreviateNumber:function b(AS,AI){var AT,AJ,AU="",AL=(AS<0),AV=(this.isIntegar(AS)===false);if(AV){AI++;}if(AS<0){AI++;}var AO=AL?-AS:AS;var AP=0;if(AO>=1e+27){AO=999;AU="Y";}else{if(AO>=1e+24){AO/=1e+24;AU="Y";}else{if(AO>=1e+21){AO/=1e+21;AU="Z";}else{if(AO>=1000000000000000000){AO/=1000000000000000000;AU="E";}else{if(AO>=1000000000000000){AO/=1000000000000000;AU="P";}else{if(AO>=1000000000000){AO/=1000000000000;AU="T";}else{if(AO>=1000000000){AO/=1000000000;AU="B";}else{if(AO>=1000000){AO/=1000000;AU="M";}else{if(AO>=1000){AO/=1000;AU="K";}else{if(AO>=1){AP++;}else{if(AO>=0.001){AP++;}else{if(AO>=0.000001){AP++;}else{if(AO>=1e-9){AP++;}else{if(AO>=1e-12){AP++;}else{AL=false;}}}}}}}}}}}}}}if(this.isIntegar(AO)===false){AT=AO.toString();var AK=5,AN=2,AW;AJ=AT.indexOf(".");AW=AT.length-AJ-1;if(AW>AK||(AW>AN&&AW>AJ)){if(AW>AK&&AI-AW<0){AN=Math.max(AN,Math.min(AN,AI-AW));}else{AN=Math.max(1,Math.min(AN,AI-AW));}AO=AO.toFixed(AN);}}AT=AO.toString();if(this.isIntegar(AO)===false){var AR=AT.length-1;AJ=AT.indexOf(".");if(AJ!==-1){if(AJ>=AR){AT=AT.substring(0,AJ);}else{var AQ,AM=true;for(AQ=AR;AQ>AJ&&AM;--AQ){if(AT[AQ]!=="0"){AM=false;}}if(AM){AT=AT.substring(0,AJ);}}}}if(AL){AT="-"+AT;}AT+=AU;return AT;},getScalePlate:function AE(AI){AI=AI||false;this.mScalePlate=mstrmojo.chart.common.ScalePlate;if(AI){this.mScalePlate.clear();}return this.mScalePlate;},prepareScalePlateOptions:function AB(AK,AJ,AL){var AI={mUseLogarithmicScale:AK,mAlwaysIncludeZero:!AK&&(AJ||!!(AL&1)||!!(AL&2)),mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mUseCustomMinMax:false};return AI;},evaluateTextMargin:function P(AI){this.mTextMargins=this.mTextMargins||{};var AJ=this.mTextMargins;if(AJ[AI]){return AJ[AI];}var AK=[];AK[0]=Math.floor(AI*m+0.5);AK[1]=Math.floor(AI*K+0.5);AK[2]=Math.max(Math.floor(AI*R+0.5),1);AJ[AI]=AK;return AK;},AlmostZero:function x(AI){return(Math.abs(AI)<0.000001);},isValidNumber:function J(AI){if(typeof AI==="number"){if(AI===0){return true;}return !!AI;}return false;},isIntegar:function j(AI){return AI===+AI&&AI===(AI|0);},HasArrayIntersection:function O(AJ,AI){var AK;for(AK=0;AK<AJ.length;AK++){if(AI.indexOf(AJ[AK])!==-1){return true;}}return false;},EscapeString:function C(AI){var AK='"',AJ='\\"',AL=new RegExp(AK,"g");return String(AI).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"\\\\").replace(AL,AJ).replace(/\r\n/g,"<br/>").replace(/\r/g,"<br/>").replace(/\n/g,"<br/>");},EscapeStringForJSON:function N(AI){var AK='"',AJ='\\"',AL=new RegExp(AK,"g");return String(AI).replace(/\\/g,"\\\\").replace(AL,AJ).replace(/\r/g,"\\r").replace(/\n/g,"\\n");},TrimLastComma:function AD(AJ){var AI;if(!AJ.buf||AJ.len===-1){return ;}AI=AJ.len;var AK=String(AJ.buf[AI]);if(AK&&AK[AK.length-1]===","){AJ.buf[AI]=AK.slice(0,-1);}},decodeUTF8:function f(AI){var AJ="",AL=0,AN=0,AM=0,AK=0;while(AL<AI.length){AN=AI.charCodeAt(AL);if(AN<128){AJ+=i(AN);AL++;}else{if((AN>191)&&(AN<224)){AM=AI.charCodeAt(AL+1);AJ+=i(((AN&31)<<6)|(AM&63));AL+=2;}else{AM=AI.charCodeAt(AL+1);AK=AI.charCodeAt(AL+2);AJ+=i(((AN&15)<<12)|((AM&63)<<6)|(AK&63));AL+=3;}}}return AJ;},formatDateTimeValue:function e(AJ,AO){var AM=new mstrmojo.chart.common.DSSDateTime({ifTime:AO});var AI="";var AL="";var AP=0;while(AP<AJ.length){var AK=1;switch(AJ.charAt(AP)){case"[":AP++;while(AP<AJ.length&&AJ.charAt(AP)!=="]"){AL+=AJ.charAt(AP);AP++;}if(AL.length>0&&(AL[0]===">"||AL[0]==="<"||AL[0]==="=")){AL="";}AP++;break;case"y":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="y"){AK++;AP++;if(AK===4){break;}}if(AK===1||AK===2){AI+=this.fillZeroToWidth(AM.mnYear%100,2);}else{if(AK===3){AI+=this.fillZeroToWidth(AM.mnYear%100,2);AP--;}else{if(AK===4){AI+=AM.mnYear;}}}break;case"M":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="M"){AK++;AP++;}if(AK<3){AI+=this.fillZeroToWidth(AM.mnMonth,AK);}else{if(AK===3){AI+=AC.MONTHNAME_SHORT[AM.mnMonth];}else{AI+=AC.MONTHNAME_FULL[AM.mnMonth];}}break;case"d":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="d"){AK++;AP++;}if(AK<3){AI+=this.fillZeroToWidth(AM.mnDay,AK);}else{if(AK===3){AI+=AC.dayShortNames[AM.mnDay];}else{AI+=AC.dayNames[AM.mnDay];}}break;case"h":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="h"){AK++;AP++;}var AN=AM.mnHour;if(AN===0){AN=12;}if(AN>12){AN-=12;}AI+=this.fillZeroToWidth(AN,AK);break;case"H":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="H"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnHour,AK);break;case"m":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="m"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnMinute,AK);break;case"s":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="s"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnSecond,AK);break;case"S":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="S"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnMillisecond,AK);break;case"a":AN=AM.mnHour;if(AN<12){AI+=AC.AM_NAME;}else{AI+=AC.PM_NAME;}AP++;break;default:AI+=AJ.charAt(AP++);break;}}if(AL.length!==0){AI='<SPAN STYLE="COLOR: '+AL+'" >'+AI+"</SPAN>";}return AI;},fillZeroToWidth:function l(AM,AK){var AJ="",AL=AJ+AM;var AI=AL.length;while(AI<AK){AL="0"+AL;AI++;}return AL;},updateCache:function AG(AJ,AM,AN){var AL=(AM&&AM.length)||0,AK,AI,AO=AJ;for(AK=0;AK<AL-1;AK++){AI=AM[AK];if(!AO[AI]){AO[AI]={};}AO=AO[AI];}AO[AM[AL-1]]=AN;},measureTextHeight:function(AN,AK,AR,AO,AI){var AQ,AM=AN;if(AM===" "){AM="\u00A0";}AI=AI||"pt";if(typeof AR==="number"){AR=AR+AI;}var AJ="none",AP="normal";if(AO&E.FS_ITALIC){AJ="italic";}if(AO&E.FS_BOLD){AP="bold";}var AL={fontFamily:AK,fontSize:AR,fontStyle:AJ,fontWeight:AP};if(h&&h.H&&h.H[AK]&&h.H[AK][AR]&&h.H[AK][AR][AO]){AQ=h.H[AK][AR][AO];}else{AQ=o.measureTextHeight("H",AL,1);this.updateCache(h,["H",AK,AR,AO],AQ);}return AQ;},measureText:function u(AP,AM,AV,AQ,AK){var AJ=true,AI,AT=AV+1;var AO=AP;if(AO===" "){AO="\u00A0";}AK=AK||"pt";if(typeof AV==="number"){AV=AV+AK;}if(B&&B[AO]&&B[AO][AM]&&B[AO][AM][AV]&&B[AO][AM][AV][AQ]){return B[AO][AM][AV][AQ];}if(AJ){var AL="normal",AR="normal";if(AQ&E.FS_ITALIC){AL="italic";}if(AQ&E.FS_BOLD){AR="bold";}var AN={fontFamily:AM,fontSize:AV,fontStyle:AL,fontWeight:AR};if(h&&h.H&&h.H[AM]&&h.H[AM][AV]&&h.H[AM][AV][AQ]){AT=h.H[AM][AV][AQ];}else{AT=o.measureTextHeight("H",AN,true);this.updateCache(h,["H",AM,AV,AQ],AT);}AI=o.measureTextWidth(AP,AN,0);}else{if(!L){var AS=document.createElement("div");AS.id="measureText";AS.style.position="absolute";AS.style.top="0";AS.style.visibility="hidden";AS.style.height="auto";AS.style.width="auto";document.body.appendChild(AS);L=AS;}L.innerHTML="";L.appendChild(document.createTextNode(AO));L.style.fontFamily=AM;L.style.fontSize=AV;L.style.fontWeight="normal";L.style.fontStyle="none";if(AQ&E.FS_ITALIC){L.style.fontStyle="italic";}if(AQ&E.FS_BOLD){L.style.fontWeight="bold";}AI=L.scrollWidth+1;AT=L.scrollHeight+1;}var AU={Width:AI,Height:AT};this.updateCache(B,[AO,AM,AV,AQ],AU);return AU;},ReplaceDecimalPoint:function AA(AJ,AI){return AJ.replace(".",AI);},ReplaceMinusSign:function s(AI,AJ){return AI.replace("-",AJ);},insert:function G(AJ,AI,AK){if(typeof AJ==="string"&&typeof AI==="string"&&AK<=AJ.length){return AJ.substr(0,AK)+AI+AJ.substr(AK);}return AJ;},InsertThousandSeparator:function r(AK,AL,AP){var AI=AP.mstrDecimalPoint;var AJ=AK.indexOf(AI);if(AJ===-1){AJ=AK.length;}var AM=0;while(AM<AJ&&!this.chk_val(AK.charAt(AM))){AM++;}var AO=AK;var AN;for(AN=AJ-3;AN>AM;AN-=3){AO=this.insert(AO,AL,AN);}return AO;},chk_val:function I(AI){return/^\d+$/.test(AI);},hFormatValue:function Z(AV,AM,Ag,A5){var AT=0;var Ao=0;var Ac=AV.length;var BD=false;if(!A5){A5={};var Am=window.navigator.userLanguage||window.navigator.language;var BO=Am.split("-");this.mstrLanguageCode=BO[0];this.mstrCountryCode=BO[1]||BO[0];A5.mstrThousandSeparator=mstrmojo.locales.number.THOUSANDSEPARATOR||",";A5.mstrCurrencySymbol="$";A5.mstrDecimalPoint=mstrmojo.locales.number.DECIMALSEPARATOR||".";A5.mstrPercentSign="%";A5.mstrMinusSign="-";}while(AT<Ac){if(AV.charAt(AT)==='"'){AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){AT++;}}else{if(AV.charAt(AT)==="["){AT++;var An="";while(AT<Ac&&AV.charAt(AT)!=="]"){An+=AV.charAt(AT);AT++;}if(An.length>1&&(An.charAt(0)===">"||An.charAt(0)==="<"||An.charAt(0)==="=")){var AJ=-1;var A7=0;switch(An.charAt(0)){case">":if(An.charAt(1)>="0"&&An.charAt(1)<="9"){AJ=1;A7=1;}else{if(An.charAt(1)==="="&&An.length>2&&An.charAt(2)>="0"&&An.charAt(2)<="9"){AJ=2;A7=2;}}break;case"=":if(An.charAt(1)>="0"&&An.charAt(1)<="9"){AJ=3;A7=1;}else{if(An.charAt(1)==="="&&An.length>2&&An.charAt(2)>="0"&&An.charAt(2)<="9"){AJ=3;A7=2;}}break;case"<":if(An.charAt(1)>="0"&&An.charAt(1)<="9"){AJ=5;A7=1;}else{if(An.charAt(1)==="="&&An.length>2&&An.charAt(2)>="0"&&An.charAt(2)<="9"){AJ=4;A7=2;}}break;}if(AJ>0){var AX=An.substr(A7);var BG=parseFloat(AX);if((AJ===1&&AM>BG)||(AJ===2&&AM>=BG)||(AJ===3&&AM===BG)||(AJ===4&&AM<=BG)||(AJ===5&&AM<BG)){BD=true;}}}}else{if(AV.charAt(AT)===";"){if(BD){Ac=AT;break;}else{Ao=AT+1;AT++;}}else{AT++;}}}}if(!BD){Ao=0;}AT=Ao;var At=false;while(AT<Ac){if(AV.charAt(AT)==='"'){AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){AT++;}}else{if(AV.charAt(AT)==="["){AT++;while(AT<Ac&&AV.charAt(AT)!=="]"){AT++;}}else{if(AV.charAt(AT)==="y"||AV.charAt(AT)==="M"||AV.charAt(AT)==="d"||AV.charAt(AT)==="h"||AV.charAt(AT)==="H"||AV.charAt(AT)==="m"||AV.charAt(AT)==="s"||AV.charAt(AT)==="S"){At=true;break;}else{AT++;}}}}if(At){var BB="";if(BD){BB=AV.substr(Ao,Ac-Ao);}else{BB=AV;}return mstrmojo.num.formatByMask(BB,AM);}var BF;var Ak;var Aq=false;var AP=false;var BA=false;var Ab=false;var BL=[];var Af="K";var AY=0;var A6=false;var AW=0;var BM="";var AQ="";var Aj="";var A4="";var AU=0;var BI=0;var BH=false;var A8=A5.mstrCurrencySymbol;var Az=A5.mstrThousandSeparator;var Av=A5.mstrDecimalPoint;var A9=A5.mstrPercentSign;var A3=A5.mstrMinusSign;AT=Ao;var Ai="";if(AM<0&&!BD){while(AT<Ac&&AV.charAt(AT)!==";"){if(AV.charAt(AT)==='"'){AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){AT++;}}AT++;}AT++;if(AT>=Ac){if(AM<0){BM+="-";}AT=Ao;}}var BN=false;while(AT<Ac){var Ap=false;switch(AV.charAt(AT)){case"[":AT++;while(AT<Ac&&AV.charAt(AT)!=="]"){Aj+=AV.charAt(AT);AT++;}if(Aj.length>0&&(Aj.charAt(0)===">"||Aj.charAt(0)==="<"||Aj.charAt(0)==="=")){Aj="";}AT++;break;case'"':AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){if(AV.charAt(AT)==="K"){BA=true;Af="K";}else{if(BN){AQ+=AV.charAt(AT);}else{BM+=AV.charAt(AT);}}AT++;}AT++;break;case"#":case"0":var Aa=AV.charAt(AT);BN=true;var Ae=1;AT++;while(AT<Ac&&AV.charAt(AT)===Aa){Ae++;AT++;}if(AT+1<Ac&&AV.charAt(AT)==="-"&&AV.charAt(AT+1)===Aa){Ab=true;BL.push(Ae);AT++;while(true){Ae=0;while(AT<Ac&&AV.charAt(AT)===Aa){Ae++;AT++;}BL.push(Ae);if(AT>=Ac||AV.charAt(AT)!=="-"){break;}AT++;}}while(AT<Ac){if(AV.charAt(AT)===","){if(AT+1<Ac&&AV.charAt(AT+1)===Aa){Aq=true;}else{break;}}else{if(AV.charAt(AT)!==Aa){break;}}AT++;}break;case".":BN=true;AT++;AY=0;while(AT<Ac&&AV.charAt(AT)==="0"){AY++;AT++;}if(AY===0){while(AT<Ac&&AV.charAt(AT)==="#"){AY++;AT++;}}break;case"E":BI=6;while(AT<Ac&&AV.charAt(AT)!=="0"){if(AV.charAt(AT)==="+"&&AT<Ac&&AV.charAt(AT+1)==="0"){AP=true;}else{A4+=AV.charAt(AT);}AT++;}AU=0;while(AT<Ac&&AV.charAt(AT)==="0"){AU++;AT++;}break;case"%":BI=4;AT++;break;case"(":AT++;BM+="(";break;case")":AT++;AQ+=")";break;case"-":AT++;if(AM<0){BM+=A3;}break;case"?":AT++;break;case"/":if(AT>Ao&&AV.charAt(AT-1)==="?"&&AT+1<Ac&&AV.charAt(AT+1)==="?"){BI=5;A6=false;Ak=AT-1;while(Ak>Ao&&AV.charAt(Ak)==="?"){Ak--;}while(Ak>Ao&&AV.charAt(Ak)===" "){Ak--;}if(Ak>=Ao&&(AV.charAt(Ak)==="#"||AV.charAt(Ak)==="0")){A6=true;}AW=0;AT++;while(AT<Ac&&AV.charAt(AT)==="?"){AW++;AT++;}}else{AT++;}break;case",":if(AT>Ao&&(AV.charAt(AT-1)==="0"||AV.charAt(AT-1)==="#")){if(AT+1<Ac&&(AV.charAt(AT+1)==="K"||AV.charAt(AT+1)==="k")){BA=true;Af=AV.charAt(AT+1);AT++;}}Ak=AT+1;while(Ak<Ac){if(AV.charAt(Ak)===","){Ak++;continue;}else{break;}}if(Ak===Ac||AV.charAt(Ak)==="."){BH=true;}if(BH||(!BH&&AT+1<Ac&&AV.charAt(AT+1)===",")){while(AT<Ac&&AV.charAt(AT)===","){AM/=1000;AT++;}AT--;}AT++;break;case";":Ap=true;break;case"$":if(BN){AQ+=A8;}else{BM+=A8;}AT++;break;default:if(BN){AQ+=AV.charAt(AT);}else{BM+=AV.charAt(AT);}AT++;}if(Ap){break;}}if(AM<0){AM=-AM;}var Ax="";if(Ab){var As=0;for(BF=0;BF<BL.length;BF++){As+=BL[BF];}Ax=Ai=this.fillZeroToWidth(As,AM.toFixed());for(BF=0;BF<BL.length-1;BF++){As-=BL[BF];var Ar=Ax.length-As;Ax=Ax.slice(0,Ar)+"-"+Ax.slice(Ar);}}else{switch(BI){case 0:if(BA){AM/=1000;}var A1=AM;if(A1<0){A1=-A1;}var AI=0;while(A1>=10){A1/=10;AI++;}if(AI>=15){Ax=Ai=this.fillZeroToWidth((AM<0?-AM:AM),10);var Al=Ax.indexOf(".");if(Al!==-1){Ax=Ax.slice(0,Al)+Ax.slice(Al+1);}Ax=Ax.substr(0,16);if(Ax.charAt(15)>="5"){var AS=14;while(AS>=0&&Ax.charAt(AS)==="9"){Ax=Ax.slice(0,AS)+"0"+Ax.slice(AS+1);AS--;}var AN=Ax.charAt(AS);AN++;if(AS>=0){Ax=Ax.slice(0,AS)+AN+Ax.slice(AS+1);}else{Ax="1"+Ax;}}Ax=Ax.substr(0,15);var BE;for(BE=AI-14;BE>0;BE--){Ax+="0";}if(AM<0){Ax=A3+Ax;}}else{Ai+=(AM+Math.pow(0.1,AY+6)).toFixed(AY);Ax=Ai;Ax=this.ReplaceDecimalPoint(Ax,Av);if(AM<0){Ax=this.ReplaceMinusSign(Ax,A3);}}if(Aq){Ax=this.InsertThousandSeparator(Ax,Az,A5);}if(BA){Ax+=Af;}break;case 5:if(BA){AM/=1000;}var Ah=10;for(BF=1;BF<AW;BF++){Ah*=10;}var AK={numerator:0,denominator:1};var AR={numerator:1,denominator:1};var AO={numerator:1,denominator:2};var Aw={numerator:0,denominator:1};var Ad=AM>=0;var A2=Math.abs(AM);var A0=parseInt(A2,10);A2-=A0;while(AO.denominator<Ah){if(Math.abs(AF.call(AO)-A2)<1e-15){Aw=AO;break;}if(AF.call(AO)>A2){AR=AO;}else{AK=AO;}AO.denominator=AK.denominator+AR.denominator;AO.numerator=AK.numerator+AR.numerator;}if(AO.denominator>=Ah){if(A2-AF.call(AK)<AF.call(AR)-A2){Aw=AK;}else{Aw=AR;}}if(A0>0){Aw.numerator+=A0*Aw.denominator;}if(Aw.denominator===0){A6=false;}var BC=false;var Ay=false;var BK=Aw.numerator;if(A6){A0=Math.floor(Aw.numerator/Aw.denominator);BK=Aw.numerator%Aw.denominator;Ay=Ay||(BK!==0);if(A0>0){BC=true;Ai+=A0;if(Ay){Ai+=" ";}}}if(!Ay&&!BC&&BK===0){Ai+="0";}else{if(!Ay&&BC&&BK===0){AH++;}else{Ai+=BK;Ai+="/";Ai+=Aw.denominator;}}Ax=Ai;if(!Ad){Ax=A3+Ax;}if(Aq){Ax=this.InsertThousandSeparator(Ax,Az,A5);}if(BA){Ax+=Af;}break;case 4:AM*=100;Ai+=(AM+Math.pow(0.1,AY+6)).toFixed(AY);Ax=Ai;Ax=this.ReplaceDecimalPoint(Ax,Av);if(AM<0){Ax=this.ReplaceMinusSign(Ax,A3);}if(Aq){Ax=this.InsertThousandSeparator(Ax,Az,A5);}Ax+=A9;break;case 6:var Au=AM;var BJ=0;if(Au>1){while(Au>=10){Au/=10;BJ++;}}else{if(Au!==0){while(Au<1){Au*=10;BJ--;}}}Ai+=(Au+Math.pow(0.1,AY+6)).toFixed(AY);Ai+=A4;if(AP&&BJ>=0){Ai<<"+";}if(BJ<0){Ai<<"-";BJ=-BJ;}Ai+=this.fillZeroToWidth(BJ,AU);Ax=Ai;Ax=this.ReplaceDecimalPoint(Ax,Av);if(AM<0){Ax=this.ReplaceMinusSign(Ax,A3);}break;}}var AL=BM+Ax+AQ;var AZ=false;if(Aj.length!==0&&AZ){AL='<SPAN STYLE="COLOR: '+Aj+'" >'+AL+"</SPAN>";}return AL;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.VisEnum","mstrmojo.VisUtility");var S=mstrmojo,N=S.array,M=S.VisEnum,L=S.VisUtility,J=M.NETWORK_LAYOUT.FORCE_DIRECTED,E=M.NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE,A=Math.ceil,U=Math.sqrt,O=Math.abs,I=0.1,T=U(I/2),C=L.isNearZero,D=(window.env||{}).isDebugging;function G(V){if(D){L.visPrint(V);}}mstrmojo.netviz._ForceDirectedLayout=mstrmojo.provide("mstrmojo.netviz._ForceDirectedLayout",{_mixinName:"mstrmojo.netviz._ForceDirectedLayout",init:function(V){if(this._super){this._super(V);}if(this.layouts===undefined){this.layouts={};}this.layouts[J]=R;}});function R(e,g){function Z(){var h=0,i;F(f);H(e.edges);g.setScene();g.draw();i=setInterval(function(){if(l>0){Q(f,a,l,Y,V);l-=W;F(f);H(e.edges);g.setScene();g.draw(false,true);G("iteration: "+h++);}else{clearInterval(i);}},17);}var f=[],a=[],j=100,d=100;g.currentLayout=J;B(e,f,a,j,d);var X=200,c=f.length,Y=U(j*d/c),V=Y*Y,l=j/(2*U(c)),W=l/X,b;if(D){Z();}else{for(b=0;b<X;b++){Q(f,a,l,Y,V);l-=W;}F(f,e.nodesIdHash);H(e.edges);}}function B(X,a,W,V,Y){function Z(g){var k=g.length,d=A(U(k)),b=V/d,m=Y/d,f,e;for(f=0;f<d;f++){for(e=0;e<d;e++){var h=f*d+e;if(h<k){var l=g[h];l.px=f*b-V/2;l.py=e*m-Y/2;}}}}N.forEach(X.nodes,function(c){if(!c.isExcluded){var b=c.getSize();var d={m:b*b,px:0,py:0,ax:0,ay:0,nodeId:c.id};c._shadowSprite=d;a.push(d);}});N.forEach(X.edges,function(b){if(!b.isExcluded){W.push({from:b.from._shadowSprite,to:b.to._shadowSprite});}});Z(a);}function K(c,e,X){var b=e.px-c.px,a=e.py-c.py,Z,Y,W,V;if(!C(b)&&!C(a)){Z=U(b*b+a*a);Y=Z*Z/X;W=b/Z*Y;V=a/Z*Y;c.ax+=W;c.ay+=V;e.ax-=W;e.ay-=V;}}function P(c,d,V){var b=d.px-c.px,Z=d.py-c.py,Y=b*b+Z*Z,a,X,W;if(Y<I){Y=I;b=(b>=0?1:-1)*T;Z=(Z>=0?1:-1)*T;}a=V/Y;X=-b*a;W=-Z*a;c.ax+=X;c.ay+=W;d.ax-=X;d.ay-=W;}function Q(a,Y,e,W,V){N.forEach(a,function(g){g.ax=0;g.ay=0;});var Z,b=a.length,X,f;for(Z=0;Z<b;Z++){f=a[Z];for(X=Z+1;X<b;X++){P(f,a[X],V);}}N.forEach(Y,function(c){K(c.from,c.to,W);});for(Z=0;Z<b;Z++){var d=a[Z];d.ax+=-d.px;d.ay+=-d.py;}N.forEach(a,function(g){if(O(g.ax)>e){g.ax=(g.ax>=0?1:-1)*e;}if(O(g.ay)>e){g.ay=(g.ay>=0?1:-1)*e;}g.px=g.px+g.ax;g.py=g.py+g.ay;});}function F(X,V){var W;N.forEach(X,function(Y){W=V[Y.nodeId];W.sprite.setGeometry({x:Y.px,y:Y.py});delete W._shadowSprite;});}function H(V){N.forEach(V,function(Y){Y=Y.sprite;var b=Y.from,a=Y.to,X=b.getGeometry(),W=a.getGeometry(),Z=E[(Y.unit.reversedEdge?1:0)];Y.setGeometry({x:(X.x+W.x)/2+(X.y-W.y)*Z,y:(X.y+W.y)/2+(W.x-X.x)*Z,type:"bezier"});});}}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo.css","mstrmojo.VisEnum","mstrmojo.VisUtility");var A=mstrmojo.VisEnum.NETWORK_LOCAL_PROPS,B=mstrmojo.VisEnum.NETWORK_DRAG_MODE;var C=mstrmojo.css,E=mstrmojo.dom,D=mstrmojo.VisUtility;mstrmojo.netviz.VisNetworkStageScaleBar=mstrmojo.declare(mstrmojo.Container,[],{scriptClass:"mstrmojo.netviz.VisNetworkStageScaleBar",markupString:'<div class="VisNetworkStageScaleBar" id="{@id}-networkStageScaleBar" style="position: absolute; top:{@top}px; left:{@left}px; height: {@height}px; width: {@width}px; z-index: 2;" mstrAttach:mousedown,click><div class="_label"></div><div style="position: relative"><div class="_zoomTool"><div class="_FTWTrigger"></div><div class="_zoomInButton"></div><div class="_scaleBar"><div class="_bar"></div><div class="_slider"></div></div><div class="_zoomOutButton"></div></div><div class="pan-select-tool"><input class="_inputPan" type="radio" id="{@id}-panButton" name="{@id}-sptype"><label for="{@id}-panButton" class="_panButton"></label><input class="_inputSelect" type="radio" id="{@id}-selectButton" name="{@id}-sptype"><label for="{@id}-selectButton" class="_selectButton"></label></div></div></div>',markupSlots:{label:function(){return this.domNode.childNodes[0];},fitToWindowTrigger:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0];},zoomInButton:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[1];},zoomTool:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[2].childNodes[0];},slider:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[2].childNodes[1];},zoomOutButton:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[3];},SPTrigger:function(){return this.domNode.childNodes[1].childNodes[1];},inputPan:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[0];},panButton:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[1];},inputSelect:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[2];},selectButton:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[3];}},init:function(F){if(this._super){this._super(F);}if(!this.placeholder){D.visPrint("A placeholder is needed for set the position for the ScaleBar. Init failed.");return ;}this.left=this.placeholder.offsetLeft;this.top=this.placeholder.offsetTop;},postBuildRendering:function(){if(this._super){this._super();}var I=["mousedown","mouseup","mousemove","click","mousewheel"],H,F=I.length;for(H=0;H<F;H++){var J=I[H],G="on"+J;if(this[G]){this.attachEventListener(J,this.id,this[G]);}}this.setScaleFactor(this.scaleFactor);this.initSPType();},initSPType:function(){var G=this.dragMode,F=this.owner;F.dragMode=G;if(G===B.pan){this.inputPan.checked=true;this.owner.lassoSelectorEnabled=false;}else{if(G===B.select){this.inputSelect.checked=true;this.owner.lassoSelectorEnabled=true;}}},onclick:function(H){H=H.e||H;H.stopPropagation();var G=H.target;var F;if(G===this.fitToWindowTrigger){this.resetScene.call(this.owner);this.setScaleFactor(1);var I=this;this._deActiveTimer=window.setTimeout(function(){I.setScaleFactorDone();},1000);}else{if(G===this.zoomInButton){this.setScaleFactor(this.scaleFactor+0.1,false,true);}else{if(G===this.zoomOutButton){this.setScaleFactor(this.scaleFactor-0.1,false,true);}else{if(G===this.panButton){F=B.pan;}else{if(G===this.selectButton){F=B.select;}}}}}if(F!==undefined){this.setSPType(F);}},setSPType:function(F){if(this.hasInterface("setDragType")){this.setDragType.call(this.owner,F);}},onmousedown:function(G){G=G.e||G;this.owner.dismissLassoSelector();G.stopPropagation();var F=G.target;if(F===this.slider){E.attachMouseMoveEvents(this.onmousemove.bind(this),this.onmouseup.bind(this));this._oldPageY=G.pageY;}},onmousemove:function(J){J=J.e||J;J.stopPropagation();var F=J.pageY-this._oldPageY;this._oldPageY=J.pageY;var K=this.slider.offsetTop+this.slider.offsetHeight/2+F-this.zoomTool.offsetTop,G=this.zoomTool.offsetHeight,I;if(this.hasInterface("range")){var H=this.range;I=(G-K)/G*(H.max-H.min)+H.min;}this.setScaleFactor(I);},onmouseup:function(F){F=F.e||F;F.stopPropagation();this.setScaleFactorDone();},setScaleFactor:function(P,K,F){if(isNaN(P)){D.visPrint("Invalid scale factor");return ;}if(this.hasInterface("owner")&&this.hasInterface("scale")&&this.hasInterface("range")){var Q,I;var O;var J=this.range;var G=1;if(P<J.min){O=J.min;}else{if(P>J.max){O=J.max;}else{O=P;}}if(O>this.scaleFactor){Q=true;}if(O<this.scaleFactor){I=true;}G=O/this.scaleFactor;this.scaleFactor=O;this.slider.style.top=(J.max-this.scaleFactor)/(J.max-J.min)*this.zoomTool.offsetHeight+this.zoomTool.offsetTop-this.slider.offsetHeight/2+"px";var H,L;if(Q){H=this.zoomInButton;L="_zoomInButtonActive";}if(I){H=this.zoomOutButton;L="_zoomOutButtonActive";}if(H){this.setScaleFactorDone();this._zoomButtonDomNode=H;this._zoomButtonActiveClassName=L;if(!F){C.addClass(H,L);}}var N=this.label;N.innerHTML=Math.floor(this.scaleFactor*100)+"%";this.owner.setLocalProp(A.ZOOM_FACTOR,this.scaleFactor);if(this.fadeLabelTimer){window.clearInterval(this.fadeLabelTimer);N.style.opacity=1;}var M=this;this.fadeLabelTimer=window.setInterval(function(){var R=N.style.opacity,S=0.01;if(R>S){R-=S;}else{R=0;if(M.fadeLabelTimer){window.clearInterval(M.fadeLabelTimer);}}N.style.opacity=R;},10);if(!K){this.scale.call(this.owner,G);}}},setScaleFactorDone:function(){if(this._zoomButtonActiveClassName&&this._zoomButtonDomNode){C.removeClass(this._zoomButtonDomNode,this._zoomButtonActiveClassName);delete this._zoomButtonActiveClassName;delete this._zoomButtonDomNode;}if(this._deActiveTimer){window.clearTimeout(this._deActiveTimer);}},hasInterface:function(F){if(this[F]){return true;}D.visPrint("warning: no interface found: "+F);return false;},scaleFactor:1,savedScaleFactor:1,range:null,scale:null,owner:null,dragMode:B.pan});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.num","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.color","mstrmojo.chart","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var m=mstrmojo,n=mstrmojo.array,P=mstrmojo.hash,H=mstrmojo.num,G=mstrmojo.VisUtility,a=mstrmojo.chart,K=a.enums,b=K.EnumGraphMajorType,J=a.common.Utility,T=a.model,M=T.enums,u=M.EnumDSSGraphObject,z=mstrmojo.VisEnum.ControlType,w=m.gm,U=mstrmojo.gm.EnumTextAlignH,p=mstrmojo.gm.EnumTextAlignV,t=";",i=",",A="_tmsp",L=" ",Y=-20,j=mstrmojo.gm.EnumSelectionOptionLevel,AB=mstrmojo.gm.EnumShape,f=mstrmojo.color,I=mstrmojo.gm.EnumIdentityType,R=0.00001,D,Z=Math.pow(2,30),c=Math.pow(2,60);var e=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(7194,"Constant")];function k(AH,AG){var AI,AF=AH.length;if(AF!==AG.length){return false;}for(AI=0;AI<AF;AI++){if(AH[AI]!==AG[AI]){return false;}}return true;}function AA(AI,AG,AJ){var AH=false,AK=AJ+A,AF=AI[AK],AL=AG[AK];if(AG[AJ]===undefined){AH=true;}else{if((AL===undefined&&AF!==undefined)||(AL!==undefined&&AF!==undefined&&AL<AF)){AH=true;}}if(AH){AG[AJ]=AI[AJ];if(AL!==undefined){AG[AK]=AF;}}}function AE(AG,AF){var AH;for(AH in AG){if(AG.hasOwnProperty(AH)){AA(AG,AF,AH);}}return AF;}function W(AJ){var AI={},AH,AG=[],AF;n.forEach(AJ,function(AK){if(AK!==undefined){AG.push(AK);}});AF=AG.length;if(AF===1){return AG[0];}for(AH=0;AH<AF;AH++){AE(AG[AH],AI);}return AI;}function y(AF){return{n:AF,s:AF.toString(),on:AF};}function X(AH,AF,AJ){if(AF===AH){return 0;}var AG=AF-AH,AI=1;while(AG<1){AG*=10;AI/=10;}while(AG>=10){AG/=10;AI*=10;}if(AG<1.8){AI*=0.2;}else{if(AG<3.1){AI*=0.4;}else{if(AG<4.6){AI*=0.5;}else{if(AG>=8.1){AI*=2;}}}}if(AJ){AI=Math.round(AI);if(AI<1){AI=1;}}return AI;}function B(AI,AM,AO,AG){var AK=[];if(AI===AM){if(AI<0){AK.push(mstrmojo.gm.GMUtility.formatNumber(AI,"nearest"));}AK.push({n:0,s:"0",on:0});if(AI>0){AK.push(mstrmojo.gm.GMUtility.formatNumber(AI,"nearest"));}return AK;}var AF=AG>0?AG:X(AI,AM,AO);var AH=Math.ceil(AM/AF)*AF;if(AH-AM>=AF*0.9){AH=Math.floor(AM/AF)*AF;}var AL=Math.floor(AI/AF)*AF;if(AI-AL>=AF*0.9){AL=Math.ceil(AI/AF)*AF;}var AN=Math.floor((AH-AL+AF/100)/AF)+1,AJ;for(AJ=0;AJ<AN;++AJ){AK.push(mstrmojo.gm.GMUtility.formatNumber(AL+AJ*AF,"nearest"));}return AK;}function S(AF,AI){var AH;AF.mMaxTick=1;if(this.mChartContextPtr.mIsGraphMatrix){AF.mStep=this.mMinimum<0?0.2:0.1;if(AI.mUseCustomMinMax){var AG=AI;AF.mMaxTick=AG.mAxisMaxValue;AF.mMinTick=AG.mAxisMinValue;AF.mMaxTick=Math.min(1,AF.mMaxTick);AF.mMinTick=Math.max(-1,AF.mMinTick);AF.mStep=0.1;}else{if(this.mMaximum>=0.5){AF.mMaxTick=1;AF.mMinTick=Math.floor(this.mMinimum/AF.mStep)*AF.mStep;AF.mMinTick=(AF.mMinTick*this.mMinimum<0)?0:(AF.mMinTick>0?0:AF.mMinTick);if(this.mMinimum<-0.5){AF.mMinTick=-1;}}else{if(this.mMaximum>0){AF.mMaxTick=Math.ceil(this.mMaximum/AF.mStep)*AF.mStep;AF.mMinTick=-1;}else{AF.mStep=0.1;AF.mMaxTick=0;AF.mMinTick=-1;}}}}else{AF.mMinTick=(this.mMinimum<0)?-1:0;if(s.call(this,AF)){return ;}AF.mStep=this.mMajorGrid.mUseManualGrid?this.mMajorGrid.mGridInterval:(AF.mMaxTick-AF.mMinTick)/10;}for(AH=AF.mMinTick+AF.mStep;AH+a.gModuleMain.mTolerance<AF.mMaxTick;AH+=AF.mStep){AF.mTicks.push(Math.round(AH*100)/100);}}function O(AF,AK){var AJ,AG,AM=AK,AL=AM.mDrawCustomLine,AH=AM.mAxisCustomValue,AI;AF.mStep=1;if(this.mMaximum<=0){AF.mMinTick=1;AF.mMaxTick=10;if(AL&&AH<=1){AM.mAxisCustomValue=AF.mMinTick;}return ;}if(this.mMinimum<=0){AG=this.mMaximum>1?0:-1;AF.mMinTick=Math.pow(10,AG);if(AM.mUseCustomMinMax){AF.mMaxTick=this.mMaximum;AJ=Math.floor(g.call(this,this.mMaximum));if(g.call(this,this.mMaximum)===AJ){AJ--;}}else{AJ=Math.ceil(g.call(this,this.mMaximum));AF.mMaxTick=Math.pow(10,AJ);}for(AI=AG+1;AI<AJ;++AI){AF.mTicks.push(Math.pow(10,Math.floor(AI)));}if(AL&&AH<=0){AM.mAxisCustomValue=Math.max(AF.mMinTick,AM.mAxisCustomValue);}return ;}if(AM.mUseCustomMinMax){AJ=g.call(this,this.mMaximum);AG=g.call(this,this.mMinimum);AF.mMaxTick=this.mMaximum;AF.mMinTick=this.mMinimum;}else{AJ=Math.ceil(g.call(this,this.mMaximum));AG=Math.floor(g.call(this,this.mMinimum));AF.mMaxTick=Math.pow(10,AJ);AF.mMinTick=Math.pow(10,AG);}for(AI=AG+1;AI<AJ;++AI){AF.mTicks.push(Math.pow(10,Math.floor(AI)));}if(AL&&AH<=0){AM.mAxisCustomValue=AF.mMinTick;}}function q(AP,AK){var AH=AK,AF,AI;AP.mStep=d.call(this,this.mMaximum,this.mMinimum,AH.mAlwaysIncludeZero);AP.mMaxTick=Math.ceil(this.mMaximum/AP.mStep)*AP.mStep;AP.mMinTick=Math.floor(this.mMinimum/AP.mStep)*AP.mStep;AP.mMinTick=(AP.mMinTick*this.mMinimum<0)?0:AP.mMinTick;if(AH.mAlwaysIncludeZero){AP.mMaxTick=(this.mMaximum<0)?0:AP.mMaxTick;AP.mMinTick=(this.mMinimum>0)?0:AP.mMinTick;}var AJ=AP.mMaxTick-AP.mMinTick;if(AP.mStep>=AJ){return ;}if(s.call(this,AP)){return ;}AF=Math.floor((AP.mMaxTick-AP.mMinTick+AP.mStep/100)/AP.mStep)+1;var AL=this.mNumberFormat;for(AI=1;AI<AF-1;++AI){var AN=AP.mMinTick+AI*AP.mStep,AO,AG,AM;if(AP.mStep<1&&AL.mFormatType===4&&AL.mCustomFormat.indexOf("%")!==-1){AO=AN*100;if(!J.isIntegar(AO)){AG=Math.round(AO);AM=Math.abs(AO-AG);if(AM<R){AN=AG/100;}}}AP.mTicks.push(AN);}}function C(AP,AJ){var AO=AJ,AI,AF,AM,AH,AL,AK,AG,AN;AP.mMaxTick=AO.mAxisMaxValue;AP.mMinTick=AO.mAxisMinValue;if(s.call(this,AP)){return ;}if(!V.call(this)||this.mMajorGrid.mUseManualGrid){AP.mStep=d.call(this,AP.mMaxTick,AP.mMinTick,false);AI=AP.mMaxTick-AP.mMinTick;if(AP.mStep>=AI){return ;}AF=Math.floor(AI/AP.mStep);if(!(this.mChartContextPtr.mIsTimeSeriesChart)&&AI===AF*AP.mStep){for(AH=1;AH<AF;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}else{AI=AP.mMaxTick-AP.mMinTick;AM=10;AL=false;for(AH=3;AH<AF;++AH){AK=AI/AH;while(AK<1){AK*=10;}while(AK>=10){AK/=10;}if(AK===Math.floor(AK)){AM=AH;AL=true;break;}}if(AL){AP.mStep=AI/AM;for(AH=1;AH<AM;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}else{AG=Math.ceil((AP.mMinTick+AP.mStep/100)/AP.mStep)*AP.mStep;AN=Math.floor((AP.mMaxTick-AP.mStep/100-AG)/AP.mStep)+3;for(AH=0;AH<AN-2;++AH){AP.mTicks.push(AG+AH*AP.mStep);}}}}else{AI=AP.mMaxTick-AP.mMinTick;AM=10;for(AH=6;AH<=9;++AH){AK=AI/AH;while(AK<10){AK*=10;}while(AK>=100){AK/=10;}if(AK===Math.floor(AK)){AM=AH;break;}}AP.mStep=AI/AM;for(AH=1;AH<AM;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}}function E(AF,AJ){var AI,AG,AH;AF.mMaxTick=AJ.mAxisMaxValue;if(AF.mMaxTick<=this.mMinimum){this.mMinimum=AF.mMaxTick-1;}AF.mStep=d.call(this,AF.mMaxTick,this.mMinimum,AJ.mAlwaysIncludeZero&&(AF.mMaxTick>0));AI=(AJ.mAlwaysIncludeZero&&(this.mMinimum>0))?0:this.mMinimum;if(V.call(this)){AF.mMinTick=AF.mMaxTick-Math.ceil((AF.mMaxTick-AI)/AF.mStep)*AF.mStep;}else{AF.mMinTick=Math.floor(AI/AF.mStep)*AF.mStep;}if(s.call(this,AF)){return ;}AG=Math.floor((AF.mMaxTick-AF.mStep/100-AF.mMinTick)/AF.mStep)+2;for(AH=1;AH<AG-1;++AH){AF.mTicks.push(AF.mMinTick+AH*AF.mStep);}}function h(AF,AK){var AG,AJ,AH,AI;AF.mMinTick=AK.mAxisMinValue;if(AF.mMinTick>=this.mMaximum){this.mMaximum=AF.mMinTick+1;}AF.mStep=d.call(this,this.mMaximum,AF.mMinTick,AK.mAlwaysIncludeZero&&(AF.mMinTick<0));AG=(AK.mAlwaysIncludeZero&&(this.mMaximum<0))?0:this.mMaximum;if(V.call(this)){AF.mMaxTick=AF.mMinTick+Math.ceil((AG-AF.mMinTick)/AF.mStep)*AF.mStep;}else{AF.mMaxTick=Math.ceil(AG/AF.mStep)*AF.mStep;}if(s.call(this,AF)){return ;}AJ=Math.ceil((AF.mMinTick+AF.mStep/100)/AF.mStep)*AF.mStep;AH=Math.floor((AF.mMaxTick-AJ+AF.mStep/100)/AF.mStep)+2;for(AI=0;AI<AH-2;++AI){AF.mTicks.push(AJ+AI*AF.mStep);}}function d(AV,AP,AH){var AO,AJ;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}AO=0;if(AH){AO=Math.max(AV,AV-AP);AO=Math.max(AO,-AP);}else{AO=AV-AP;}if(AO===0){this.mIsShown=false;return 1;}if(AO>=1&&AO<=4&&parseInt(AO)===AO){var AW=this.PrimaryMetricIndex,AK=AW.length;for(var AR=0;AR<AK;AR++){var AN=this.mChartContextPtr.mDatasetPtr,AQ=AN.dataProvider,AI=AQ.getSeriesCount(),AM=AQ.getGroupCount(),AG=AW[AR],AL,AT;for(var AU=0;AU<AI;AU++){AL=AQ.getMetricIndexForSeries(AU);if(AL===AG){AT=true;for(var AS=0;AS<AM;AS++){var AX=AN.GetData(AU,AS);if(parseInt(AX)!==AX){AT=false;break;}}}if(AT){return 1;}}}}var AF=AO;AJ=1;while(AO<1){AO*=10;AJ/=10;}while(AO>=10){AO/=10;AJ*=10;}if(AO<1.8){AJ*=2;AJ/=10;}else{if(AO<3.1){AJ*=4;AJ/=10;}else{if(AO<4.6){AJ*=5;AJ/=10;}else{if(AO>=8.1){AJ*=2;}}}}AJ=this.postProcessStep(AJ,AF);return AJ;}function s(AF){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var AG=this.mMajorGrid;return AG.mUseManualGrid&&(AG.mGridInterval<(AF.mMaxTick-AF.mMinTick)/30);}function g(AF){return Math.log(AF)/Math.log(10);}function V(){return(this.mGraphMajorType===b.GMT_HISTOGRAM||this.mGraphMajorType===b.GMT_POLAR)&&this.mTripleId.mObjectId===u.DssGraphX1Body;}function x(AI){var AJ=this,AF=AJ.id,AH=AI.metricId,AG=new m.ui.menus.MenuConfig();(AI.options).forEach(function(AK){if(AK!==w.EnumRefLineModelType.CONST){AG.addMenuItem(e[AK],"xt",function(){AJ.toggleRefLineEnabled(AH,AK,true);});}else{AG.addEditorMenuItem(e[w.EnumRefLineModelType.CONST],AF,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:mstrmojo.expr.DTP.FLOAT,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR},onEnter:function(){this.validate();}}],fnOk:function(AM,AL){var AN=AL.constVal;if(AN.isValid()){AJ.toggleRefLineEnabled(AH,AK,true,AN.value);}}});});}});return AG;}function r(AH){var AI=this,AG=AH.metricId,AF=new m.ui.menus.MenuConfig();(AH.options).forEach(function(AL){var AJ=AL.refType,AK=e[AJ]+((AJ===w.EnumRefLineModelType.CONST)?("-["+H.toLocaleString(AL.c)+"]"):"");AF.addMenuItem(AK,"xt",function(){AI.toggleRefLineEnabled(AG,AJ,false,0,AL.modix);});});return AF;}function AC(AJ,AF){var AI=AJ.GMController,AG=AI.getForbiddenShapeForMetric(AF),AH=[];[{text:mstrmojo.desc(12097,"Bar"),value:AB.BAR},{text:mstrmojo.desc(2059,"Line"),value:AB.LINE},{text:mstrmojo.desc(9738,"Area"),value:AB.AREA},{text:mstrmojo.desc(12100,"Circle"),value:AB.CIRCLE},{text:mstrmojo.desc(12101,"Square"),value:AB.SQUARE},{text:mstrmojo.desc(12102,"Tick"),value:AB.TICK}].forEach(function(AK){if(AG.indexOf(AK.value)<0){AH.push(AK);}});return AH;}function o(AG,AF){return function(AI,AH){if(AI!==AH){AF({ctxt:{sp:AI,mid:AG}});}};}function AD(AI){var AG=AI.options,AF=this.getMenuHandler("changeShape"),AH=new mstrmojo.ui.menus.MenuConfig();AH.addRadioMenuGroup(AI.currValue,o(AI.metricId,AF),AG,"checkMark",undefined,true);return AH;}mstrmojo.gm.GMUtility=mstrmojo.provide("mstrmojo.gm.GMUtility",{mTimers:[],mUseTimer:true,timerId:0,startTimer:function Q(AG){if(this.mUseTimer){var AF=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:AF,desc:AG.functionName+": "+AG.purpose});return AF;}},endTimer:function F(AF){if(this.mUseTimer){var AJ,AI=this.mTimers;if(AF===undefined){AJ=AI.pop();}else{var AH,AG;for(AH=0;AH<AI.length;AH++){AG=AI[AH];if(AG.timerId===AF){AJ=AG;AI.splice(AH,1);AH--;}}}if(AJ){G.visPrint("%c"+AJ.desc+": "+(new Date()-AJ.timeStamp)+"ms","color: blue");}}},computeTicksForPercentchart:function(AG,AF,AH){return B(AG,AF,false,AH);},computeTicksForFlexMinMax:function(AG,AF,AH,AI){return B(AG,AF,AH,AI);},formatNumber:function(AH,AG,AF){return y(AH,AG,AF===undefined?3:AF);},sizeCalculator:{sum:function(AF,AJ,AK){var AH,AG=0,AI=0;if(AK===undefined){AK=AF.length;}AJ=AJ||1;for(AH=0;AH<AK;AH++){if(AF[AH]>0){AI+=AF[AH];AG+=1;}}if(AG>1){AI+=(AG-1)*AJ;}return AI;},add:function(AH,AF,AG){AG=AG||1;if(AF>0){AH+=(AF+AG);}return AH;},minus:function(AH,AF,AG){if(AF>0){AH-=(AF+AG);}return AH;}},replaceSpecialChars:function(AF){AF=AF.replace(/&/g,"&amp;");AF=AF.replace(/</g,"&lt;");AF=AF.replace(/>/g,"&gt;");AF=AF.replace(/"/g,"&quot;");return AF;},restoreSpecialChars:function(AF){AF=AF.replace(/&nbsp;/g," ");AF=AF.replace(/&lt;/g,"<");AF=AF.replace(/&gt;/g,">");AF=AF.replace(/&quot;/g,'"');AF=AF.replace(/&amp;/g,"&");return AF;},removeExtraSpace:function(AF){return AF.replace(/ {2,}/g," ");},stringToJSON:function(AF){if(AF===undefined){return undefined;}if(typeof AF==="string"){AF=AF.replace(/'/g,'"');return JSON.parse(AF);}return AF;},everythingToString:function(AG){if(AG===undefined){return undefined;}var AF;if(typeof AG==="object"){AF=JSON.stringify(AG.jsonObj||AG);}else{AF=AG.toString();}AF=AF.replace(/"/g,"'");return AF;},compareElementObj:function(AJ,AG){var AI=AJ.tid.toString(),AF=AG.tid.toString(),AK=AJ.eid,AH=AG.eid;if(AI!==AF){return AI>AF?1:-1;}if(AK===AH){return 0;}return AK>AH?1:-1;},isEqualComb:function(AG,AF){var AK=true,AJ,AI=AG.length,AH=AF.length;if(AI!==AH){return false;}if(AG.length>1){AG.sort(this.compareElementObj);}if(AF.length>1){AF.sort(this.compareElementObj);}for(AJ=0;AJ<AI;AJ++){if(this.compareElementObj(AG[AJ],AF[AJ])!==0){AK=false;break;}}return AK;},serializeCombination:function(AG){var AF="";if(AG.length>1){AG.sort(this.compareElementObj);}n.forEach(AG,function(AH){if(AF!==""){AF+=t;}AF+=(AH.tid+i+AH.eid);});return AF;},deserializeCombination:function(AG){var AH=AG.split(t),AF=[];n.forEach(AH,function(AL){var AI=AL.split(i);var AK=AI[0];var AJ=AI[1];AF.push({tid:AK,eid:AJ});});return AF;},getElementCombinationForMetric:function(AF){var AG=[];AG.push({tid:-1,eid:AF});return AG;},getResolvedFormatsObject:function(AF){return W(AF);},isDigitalArrayEqual:function(AG,AF){return k.call(this,AG,AF);},indexOf:function(AG,AI){var AH,AF=AG.length;for(AH=0;AH<AF;AH++){if(k(AG[AH],AI)){return AH;}}return -1;},parseAxisScaleData:function(AJ){var AH,AK,AG,AF=AJ.split(","),AI=[];for(AH=0,AK=AF.length;AH<AK;AH++){AG=AF[AH].split(":");AI.push(AG);}return AI;},parseCSSColor:function(AJ,AG){var AI=AJ.slice(1),AF=[],AH;if(AI.length===6){if(AG===true){AF[0]=AI[4];AF[1]=AI[5];AF[2]=AI[2];AF[3]=AI[3];AF[4]=AI[0];AF[5]=AI[1];}else{for(AH=0;AH<6;AH++){AF[AH]=AI[AH];}}}else{if(AG===true){for(AH=2;AH>=0;AH--){AF.push(AI[AH]);AF.push(AI[AH]);}}else{for(AH=0;AH<3;AH++){AF.push(AI[AH]);AF.push(AI[AH]);}}}return parseInt("0x"+AF.join(""),16);},RGB_BRG_Switch:function(AG){var AI=(AG>>16)&255,AH=(AG>>8)&255,AF=(AG>>0)&255;return(AF<<16)|(AH<<8)|(AI<<0);},encodeColor:function(AG){if(AG===undefined||AG===null||AG==="transparent"||AG==="default"){return AG;}var AH=false,AF={};if(AH){if(typeof AG==="object"){AF.c1=this.RGB_BRG_Switch(f.encodeColor(AG.c1));AF.c2=this.RGB_BRG_Switch(f.encodeColor(AG.c2));AF.or=AG.or;return AF;}return this.RGB_BRG_Switch(f.encodeColor(AG));}if(typeof AG==="object"){AF.c1=f.encodeColor(AG.c1);AF.c2=f.encodeColor(AG.c2);AF.or=AG.or;return AF;}return f.encodeColor(AG);},checkEquality:function(AG,AF){if(typeof AG==="object"&&AG.c1!==undefined){if(AG.c1!==AF.c1){return false;}if(AG.c2!==AF.c2){return false;}if(AG.or!==AF.or){return false;}return true;}return AG===AF;},decodeColor:function(AG){if(AG===undefined||AG===null||AG==="transparent"||AG==="default"){return AG;}var AH=false,AF={};if(AH){if(typeof AG==="object"){AF.c1=f.decodeColor(this.RGB_BRG_Switch(AG.c1));AF.c2=f.decodeColor(this.RGB_BRG_Switch(AG.c2));AF.or=AG.or;return AF;}return f.decodeColor(this.RGB_BRG_Switch(AG));}if(typeof AG==="object"){AF.c1=f.decodeColor(AG.c1);AF.c2=f.decodeColor(AG.c2);AF.or=AG.or;return AF;}return f.decodeColor(AG);},getTrendLineToggleHandler:function(AF,AH,AG){return function(){AF.switchOnOffTrendLineForMetric(AH,AG);};},getTrendLineToggleState:function(AF,AG){return AF.queryTrendLineStatusForMetric(AG);},getEditTrendLineHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.TREND_LINE,AG);};},getEditRefLineHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.REF_LINE,AG);};},getEditAxisScaleHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.AXIS_SCALE,AG);};},getEditAxisOriginHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.AXIS_ORIGIN_DEFINE,AG);};},getEditLogScaleHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.LOG_SCALE,AG);};},getOptionObjArr:function(AF,AH,AJ){if(!D){D=mstrmojo.gm.GMUtility;}var AG={},AI;if(AH!==undefined){AH=AH.toLowerCase();if(AH==="x1"){AH="x";}else{if(AH==="y1"){AH="y";}}}if(AF.length>1||(AJ&&AF.length===1)){if(AH==="x"){AG.opt=mstrmojo.desc(11712,"Bottom Axis");AG.key="XAxis";}else{if(AH==="x2"){AG.opt=mstrmojo.desc(11710,"Top Axis");AG.key="X2Axis";}else{if(AH==="y"){AG.opt=mstrmojo.desc(11715,"Left Axis");AG.key="YAxis";}else{if(AH==="y2"){AG.opt=mstrmojo.desc(11713,"Right Axis");AG.key="Y2Axis";}else{if(AH==="z"){AG.opt=mstrmojo.desc(12090,"SizeBy");AG.key="SizeBy";}}}}}AG.optLvl=j.AXIS;AG.mos=this.getMetricFormatFromIndexArray(AF);}else{if(AF.length===1){AI=this.getMetricFormat(AF[0]);AG.opt=AI.n;AG.mos=[AI];AG.key=AI.mId;AG.comb=D.getElementCombinationForMetric(AI.mId);AG.optLvl=j.METRIC;if(AH==="z"){AG.sizeBy=true;}}}return AG;},filterInValidMetricIndex:function(AG){var AF=[];n.forEach(AG,function(AH){if(AH!==Y){AF.push(AH);}});return AF;},fillBackgroundDiv:function(AG){var AF=document.createElement("div");AF.setAttribute("class","gm-bk-div");AF.style.backgroundColor="rgba(0,0,0,0)";AG.appendChild(AF);},getSubMenu:function(AK,AL,AJ,AI){var AH=AC(AK,AI),AF=AK.getMenuHandler("changeShape"),AG=AK.GMController.getOnTheFlyShapeForMetric(AI);if(AH.length>1){AL.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",AK.id,AD,{currValue:AG,options:AH,metricId:AJ});}else{AL.addRadioMenuGroup(AG,o(AJ,AF),AH,"checkMark",undefined,true);}},getReferenceLineSubMenu:function(AG,AK,AL,AF){var AM=mstrmojo.gm.EnumSubtype,AJ=AG.GMController.chartSubType;if(AL&&AJ===AM.PERCENT){return ;}var AN=AG.id,AH=AG.getAvailableRefLineTypes(AF)||[];if(AH.length>0){AK.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",AN,x,{metricId:AF,options:AH});}var AI=AG.getExistingRefLineOptions(AF)||[];if(AI.length>0){AK.addMenuItem(mstrmojo.desc(13659,"Edit Reference Line"),"xt",D.getEditRefLineHandler(AG,AF));AK.addSubMenuItem(mstrmojo.desc(13022,"Remove Reference Line"),"xt",AN,r,{metricId:AF,options:AI});}},reverseMapping:function l(AG){var AI={},AH,AF=AG.length;for(AH=0;AH<AF;AH++){AI[AG[AH]]=AH;}return AI;},longIntAnd:function(AG,AF){var AH;if(AG===AF){return AG;}if(AG>c||AF>c){throw new Error("Operand exceeds valid data range.");}if(AG<Z&&AF<Z){return AG&AF;}if(AG>=Z||AF>=Z){if(AG<AF){AH=AG;AG=AF;AF=AH;}}var AJ=Math.floor(AG/Z),AI=Math.floor(AF/Z),AL=AG-AJ*Z,AK=AF-AI*Z;return(AL&AK)+(AJ&AI)*Z;},longIntOr:function(AG,AF){var AH;if(AG===AF){return AG;}if(AG<Z&&AF<Z){return AG|AF;}if(AG<AF){AH=AG;AG=AF;AF=AH;}AH=this.longIntAnd(AG,AF);return AF-AH+AG;},parseNumeric:function(AF){return +AF||parseFloat(AF);},fillTextInDiv:function(AF,AO,AQ,AG,AR,AH,AT,AJ,AM){if(AG===undefined){AG=AF.offsetWidth;}if(AR===undefined){AR=AF.offsetHeight;}if(AJ===undefined){AJ=U.MIDDLE;}if(AM===undefined){AM=p.MIDDLE;}if(AH===undefined){AH=false;}var AN,AP,AL,AS=AH?"gm-text-body":"gm-text-body-nowrap",AI=false,AK;AN=G.measureTextWidth(AQ,AT,6);AK=G.measureTextWidth("...",AT,6);if(AN>AG&&AK>AG){return ;}AL=document.createElement("div");AL.setAttribute("class",AS);AL.setAttribute("type",z.GM_TEXT_BODY);AL.identity=AO;G.applyStyles2DomNode(AL,AT);AL.innerHTML=AQ;AF.appendChild(AL);if(AH){if(AN>AG){AP=AL.offsetHeight;}else{AP=G.measureTextHeight(AQ,AT,4);}}else{AP=G.measureTextHeight(AQ,AT,4);AI=AN>AG;}AN=Math.min(AN,AG);AL.style.width=AN+"px";if(AH){AI=AL.scrollWidth>AN||AL.scrollHeight>AP;}if(AI){AL.setAttribute("title",AQ);}else{AL.setAttribute("title","");}switch(AJ){case U.LEFT:AL.style.left="0px";AL.style.textAlign="left";break;case U.MIDDLE:AL.style.left=((AG-AN)>>1)+"px";break;case U.RIGHT:AL.style.right="0px";AL.style.textAlign="right";break;}switch(AM){case p.TOP:AL.style.top="0px";break;case p.MIDDLE:AL.style.top=((AR-AP)>>1)+"px";break;case p.BOTTOM:AL.style.bottom="0px";break;}},updateTextColorAndAlignment:function(AF,AH,AI){var AJ=AF.firstChild,AK=AJ.style,AG=AF.clientWidth,AL=AJ.clientWidth,AN=AF.clientHeight,AM=AJ.clientHeight;AK.left="auto";AK.right="auto";switch(AH){case U.LEFT:AK.left="0px";break;case U.MIDDLE:AK.left=((AG-AL)>>1)+"px";break;case U.RIGHT:AK.right="0px";break;}AK.top="auto";AK.bottom="auto";switch(AI){case p.TOP:AK.top="0px";break;case p.MIDDLE:AK.top=((AN-AM)>>1)+"px";break;case p.BOTTOM:AK.bottom="0px";break;}},toggleDisplay:function(AG,AF){if(!AG){return ;}if(AF){AG.style.display="block";}else{AG.style.display="none";}},isTrendLineAvailableForMetric:function(AJ,AK,AN){var AU=false,AR=mstrmojo.gm.EnumSubtype,AM=m.gm.EnumShape,AS=AJ.GMController,AO=AS.chartSubType,AT=AJ.model.data.dz,AH=AT.XAxis,AF=AT.YAxis,AI=AT.BreakBy,AL=AT.SliceBy,AP=AN,AG=AS.getChartInfo(),AQ=AS.getBreakByAttrsID().length>0||(AG.isABL&&((AH.MetricNames!==undefined)||(AF.MetricNames!==undefined)||(AI.MetricNames!==undefined)||(AL.MetricNames!==undefined)));if(AP===undefined){AP=AS.getOnTheFlyShapeForMetric(AK);}if(AG.isABL&&AO===AR.PERCENT){AU=true;}if(AQ&&!AG.isBubbleOrScatter&&(AP===AM.BAR||AO===AR.STACKED||(AO===AR.AUTO&&AP===AM.AREA))){AU=true;}if(AG.isABL){if(AH.TemplateUnit&&AH.TemplateUnit.length>1){AU=true;}if(AF.TemplateUnit&&AF.TemplateUnit.length>1){AU=true;}if(AH.TemplateUnit===undefined&&AF.TemplateUnit===undefined){AU=true;}}AU=AU||this.isIgnoredMetric(AJ,AK);return !AU;},isTrendLineAvailableForAnyMetric:function(AH){var AG=AH.model.data.gsi.mx,AF;for(AF in AG){if(this.isTrendLineAvailableForMetric(AH,AF)){return true;}}return false;},isIgnoredMetric:function(AI,AG){var AH=AI.GMController,AJ,AF;if(AH.bubbleSeriesNum!==undefined){AJ=AH.getMetricsOnYAxis();AF=AJ.indexOf(AG);if(AF>=AH.bubbleSeriesNum){return true;}AJ=AH.getMetricsOnXAxis();AF=AJ.indexOf(AG);if(AF>=AH.bubbleSeriesNum){return true;}}return false;},getAxisMetricsInfo:function(AK){var AF=AK.model.data.dz,AL=AK.model.data.gsi.mx,AG,AH,AJ=[];if(!AF||!AF.ColorBy||!AL){return AL;}var AI=function(AM){return(AM&&AM.TemplateMetric)||[];};AG=AI(AF.YAxis).concat(AI(AF.XAxis));n.forEach(AL,function(AM){AH=false;n.forEach(AG,function(AN){if(AM.did===AN.id){AH=true;return false;}});if(AH){AJ.push(AM);}});return AJ;},isInvalidTemplate:function N(AI){if(AI.eg){return false;}var AG=AI.gts;var AF=AG.row.length===0&&AG.col.length===0;n.forEach(AG.row,function(AL){if(AL.otp===-1){AF=true;}});var AK=AG.col;if(AK.length>0){var AH,AJ=AK.length-1;for(AH=0;AH<AJ;AH++){if(AK[AH].otp===-1){AF=true;}}}return AF;},isNoData:function(AF){return AF.eg!==undefined;},getInvalidTemplateErrMsg:function(AF){return AF||mstrmojo.desc(12094,"The Graph Matrix requires:")+"\n"+mstrmojo.desc(12095,"- at least one attribute to be placed on the row or column axis")+"\n"+mstrmojo.desc(12096,"- all metrics to be placed on the column axis, below any attributes");},initColorPickerBtnWithGradientDir:function(AG,AH){mstrmojo.func.override({showPickerForCurrentMode:function AF(){this._super();if(this.pickerMode===2&&typeof this.color!=="object"){var AI=this.gradientOrientation,AJ=AH.getChartInfo().dirc===mstrmojo.gm.EnumABLDirection.VERTICAL;AI.set("selectedIndex",n.find(AI.items,"id",AJ?0:1));}}},AG.colorPicker);},generateToolTipContent:function(AO,AJ,AF,AK,AM,AL,AR){var AI,AG,AH,AN,AP,AQ;for(AI=AO;AI<AJ;AI++){AG=AK[AI];AN=AM[AI];if(AI>AO){AH=AK[AI-1];AP=AM[AI-1];if(AG.id===AH.id){if(AN===""){continue;}if(AG.fid===AH.fid&&AN.idx===AP.idx){continue;}if(AG.n===""){AL[AL.length-1].v+=L+AN.n;continue;}}}if(AR){AL.push({n:AG.n,tid:AG.id,v:AN.n});}else{AQ=AF===undefined?AG.isRowAttribute:AF;AL.push({n:AG.n,tid:AG.id,v:AN.n,eid:AN.id,tp:AG.otp,axis:AQ?1:2,tui:AG.tui,ui:AG.tui,dpt:AG.tui+1,at:AN.at,isRowAttribute:AQ,dei:AN.dei,o:AN.o});}}},getAttributeFormCnt:function(AF){var AG;if((AF.fcnt===undefined||AF.fcnt===null)&&AF.fs){AF.fcnt=AF.fs.length||1;}if(AF.fcnt!==undefined&&AF.fcnt!==null){AG=AF.fcnt;}else{if(AF.t===47){AG=1;}else{AG=AF.cs!==undefined?AF.cs:AF.rs;}}return AG;},isTrueForBoolValue:function(AF){return AF===true||AF==="true";},computeTicksForAxis:function(AI,AG){var AH=AI.mOptions,AJ,AF={mTicks:[]};if(AG){AJ=P.copy(AH);P.copy(AG,AJ);}else{AJ=AH;}if(AI.mIsPercent){S.call(AI,AF,AJ);return AF;}if(AJ.mUseLogarithmicScale){O.call(AI,AF,AJ);return AF;}if(AI.mGraphMajorType===b.GMT_BUBBLE&&AI.mTripleId.mObjectId===u.DssGraphZBody){AF.mMinTick=AJ.mUseMinValue?AJ.mAxisMinValue:AI.mMinimum;AF.mMaxTick=AJ.mUseMaxValue?AJ.mAxisMaxValue:AI.mMaximum;if(AI.mMinTick>=AI.mMaxTick){AF.mMaxTick=AF.mMinTick+1;}return AF;}if(!AJ.mUseMaxValue&&!AJ.mUseMinValue){q.call(AI,AF,AJ);}else{if(AJ.mUseMaxValue&&AJ.mUseMinValue){C.call(AI,AF,AJ);}else{if(AJ.mUseMaxValue){E.call(AI,AF,AJ);}else{h.call(AI,AF,AJ);}}}return AF;},computeTicksForLogScale:function(AH){var AG=AH.mOptions,AF={mTicks:[]};O.call(AH,AF,AG);return AF;},destroyDisposable:function(AF,AG){if(AG){n.removeItem(AF.disposables,AG);AG.destroy();}},handleDestroy:function(AI,AH){if(!AI){return ;}var AJ,AG=0,AF=AI.disposables,AK=(AF&&AF.length)||0;while(AG<AK){AJ=AF[AG];if(!AJ.scriptClass||AH.indexOf(AJ.scriptClass)<0){this.destroyDisposable(AI,AJ);}if(AF.length<AK){AK=AF.length;}else{AG++;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.gm.DndTooltip","mstrmojo.VisUtility","mstrmojo.vi.models.EnumDragSources");var N=mstrmojo,I=N.dom,K=N.VisUtility,C=N.vi.models.EnumDragSources,J=N.array;mstrmojo.gm._SupportDndAsBlackBox=mstrmojo.provide("mstrmojo.gm._SupportDndAsBlackBox",{_mixinName:"mstrmojo.gm._SupportDndAsBlackBox",mainContainerNode:"domNode",handleDndForParentNode:true,dndAsBlackBox:true,allowDrop:function H(R){var S=R.src.data,Q=S&&S.src;if(Q===C.DATASETS||Q===C.VIZ_EDITOR||Q===C.VIZ||Q===C.ALL_OBJECT_LIST){return true;}return false;},cleanUpAfterTarget:function E(Q){this._super(Q);if(this.domNode.contains(this.dndHighlightCanvas)){this.domNode.removeChild(this.dndHighlightCanvas);}delete this.dndHighlightCanvas;if(this.dndTooltip){this.dndTooltip.destroy();}delete this.dndTooltip;},ondragenter:function M(R){if(this._super){this._super(R);}var W=this.isEmpty();if(W){R.tgt.widget=this;this.raiseEvent({name:"toggleCtrlOverlay",visible:false,controls:this.getVisEmptyMsgControls()});}var V;if(!this.dndHighlightCanvas){var Q=document.createElement("canvas"),U=I.position(this.domNode),T=I.position(this[this.mainContainerNode]);this.domNode.appendChild(Q);Q.style.position="absolute";Q.style.zIndex=1000;Q.width=T.w||U.w;Q.height=T.h||U.h;Q.style.top=(T.y-U.y)+"px";Q.style.left=(T.x-U.x)+"px";this.dndHighlightCanvas=Q;}if(!this.dndTooltip){V=document.createElement("div");document.body.appendChild(V);var S={placeholder:V,contentNodeCssClass:"gm-dnd-replace-node-tooltip",boundary:document.body};this.dndTooltip=new mstrmojo.gm.DndTooltip(S);this.dndTooltip.render();this.dndTooltip.parent=this;}this.ondragover(R);},ondragover:function B(Q){if(this._super){this._super(Q);}if(this.dndAsBlackBox){this.clearHighlightDropZoneOnGraph();this.drawBlackBoxHighlight(Q);}},ondragleave:function P(Q){var R=this.isEmpty();if(R){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});}if(this._super){this._super(Q);}},ondrop:function L(R){if(this._super){this._super(R);}if(this.dndAsBlackBox){var U=this.zonesModel,T=R.src.data,Q=T.items,S=R.getCtxtDragData().src;U.addUnitsFromDataSource(Q,T.dsid,R.actions,S===C.ALL_OBJECT_LIST?R.callback:null);}},clearHighlightDropZoneOnGraph:function G(){var R=this.dndHighlightCanvas,Q=R.getContext("2d");Q.clearRect(0,0,R.width,R.height);this.dndTooltip.toggle(false);},isMetric:function O(Q){return Q&&Q.t===4;},isAttrCategory:function D(Q){return Q&&(Q.t===12||Q.t===1||Q.t===47);},singleTypeObject:function F(Q){var T=0,S=0,R=this;J.forEach(Q.src.data.items,function(U){if(R.isAttrCategory(U)){T++;}else{if(R.isMetric(U)){S++;}}});return !(T>0&&S>0);},drawBlackBoxHighlight:function A(S){var T=this.dndHighlightCanvas,a=T.getContext("2d"),X=I.position(this[this.mainContainerNode]),Q=I.position(this.domNode),R=X.w||Q.w,Z=X.h||Q.h,W=Math.min(30,0.25*R),b=Math.min(30,0.25*Z);a.save();a.beginPath();a.rect(W,b,R-2*W,Z-2*b);a.fillStyle="#bce8ff";a.globalAlpha=0.4;a.fill();a.strokeStyle="#34abeb";a.globalAlpha=1;K.drawDashLine(a,W,b,W,Z-b,2,2);K.drawDashLine(a,W,b,R-W,b,2,2);K.drawDashLine(a,R-W,b,R-W,Z-b,2,2);K.drawDashLine(a,W,Z-b,R-W,Z-b,2,2);a.restore();if(!this.singleTypeObject(S)){var U=this.dndTooltip,Y={x:S.tgt.e.x,y:S.tgt.e.y,w:0,h:0},V=S.src.widget.avatar;if(V){Y=I.position(V);}U.placementOrder=[U.PLACEMENT_ABOVE];U.popupNodeOffset=5;U.updateContent(null,Y,"Add Attributes and Metrics");}}});}());(function(){var y=false,D=function(Av){if(y){AL.visPrint(Av);}};mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.Base","mstrmojo.dom","mstrmojo.Container","mstrmojo.hash","mstrmojo.array","mstrmojo.netviz.VisNetworkStageScaleBar","mstrmojo.css","mstrmojo.netviz.ObservableModel","mstrmojo._HasPopup","mstrmojo.netviz._HasNetworkContextMenu","mstrmojo.VisEnum","mstrmojo.VisTooltip","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.chart.enums.EnumLineStyle","mstrmojo.ui.PopupConfig","mstrmojo.VisUtility","mstrmojo.gm.GMUtility","mstrmojo.util.ui._LassoSelector","mstrmojo.netviz.Bitmap","mstrmojo.util.color","mstrmojo.ui.menus.MenuConfig");var AZ=mstrmojo.dom,AQ=AZ.position,Ab=mstrmojo.VisEnum.NETWORK_DRAG_MODE,AS=mstrmojo.netviz.ObservableModel,Al=mstrmojo.css,N=mstrmojo.hash,J=mstrmojo.array,Q=mstrmojo.VisEnum,AL=mstrmojo.VisUtility,AR=mstrmojo.gm.GMUtility,g=mstrmojo.util.color,F=mstrmojo.color;var Ak=Q.NETWORK_LOCAL_PROPS,X=Q.FormNameDisplayType,j=Q.NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE,Aa=mstrmojo.chart.enums.EnumFontStyle,e=Q.NETWORK_LAYOUT;var O=["Select","Swipe","Multi","Tap",""],AF=["Begin","End","Move","Cancel",""];var Ao=["click","dblclick","drage","dragend","dragenter","dragleave","dragover","dragstart","drop","mousedown","mousemove","mouseup","mouseout","mouseover","mousewheel","scroll","contextmenu"];var p=["mousemove","mouseup"];var Ah=[];J.forEach(O,function(Av){J.forEach(AF,function(Aw){Ah.push("touch"+Av+Aw);});});var Ad=5*1000;var f=6;var V=40*Math.PI/180;var Z=3,k=30*Math.PI/180,M=Math.pow(Z,2)+1-2*Math.cos(k)*Z,AH=Math.cos(k)*Z,AW=Math.sin(k)*Z;var AM=500;var AJ=26,Au=5,Ag=25,T=350,AN={EDGE:0,CIRCLE:1,HIGHLIGHT:2},Ae={BASE:0,HIGHLIGHT:1};var AE={fontFamily:"Helvetica",fontSize:AL.psPt2CssPt("12pt",Math.round),fontStyle:Aa.FS_BOLD},x=4,R=3,Aj=5;(function(){var Ay=["ms","moz","webkit","o"],Ax=0,Aw,Av=Ay.length;for(Aw=0;Aw<Av&&!window.requestAnimationFrame;Aw+=1){window.requestAnimationFrame=window[Ay[Aw]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[Ay[Aw]+"CancelAnimationFrame"]||window[Ay[Aw]+"CancelRequestAnimationFrame"];}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(A2){var A1=new Date().getTime(),Az=16-(A1-Ax),A0;if(Az<0){Ax=A1;A0=0;}else{A0=Az;}return setTimeout(function(){A2(Ax);},A0);};}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=clearTimeout;}}());function AX(Ay,Az){if(typeof Ay!=="object"){return ;}var Ax=Object.keys(Ay),Aw,Av;for(Aw=0,Av=Ax.length;Aw<Av;Aw++){Az(Ax[Aw]);}}function Am(Av){var Aw=[];if(Av&Aa.FS_BOLD){Aw.push("bold");}if(Av&Aa.FS_ITALIC){Aw.push("italic");}return Aw.join(" ");}function S(Av){return[Am(Av.fontStyle),Av.fontSize,Av.fontFamily].join(" ");}function s(Av){var Aw=[];if(Av&Aa.FS_UNDERLINE){Aw.push("underline");}if(Av&Aa.FS_STRIKETHROUGH){Aw.push("line-through");}return Aw.join(" ");}var H=(function(){var Av={},Aw=new RegExp("(\\d+)(p[xt])","i");return function Ax(Az){var Ay,A1,A0;if(Av.hasOwnProperty(Az)){return Av[Az];}Ay=Aw.exec(Az);if(!Ay){return ;}A1=parseInt(Ay[1],10);A0=Ay[2].toLowerCase();if(A0==="pt"){A1*=96/72;}A1=Math.ceil(A1);Av[Az]=A1;return A1;};}());function AO(Aw,A1){if(A1 instanceof Object){var Az=Object.keys(A1),Av=Az.length,Ay,Ax,A0;for(Ay=0;Ay<Av;Ay++){Ax=Az[Ay];A0=A1[Ax];if(!(A0 instanceof Object)){Aw[Ax]=A0;}else{if(!Aw[Ax]){Aw[Ax]={};}AO(Aw[Ax],A0);}}}return Aw;}function A(Aw){var Av=arguments.length,Ax,Ay;Aw=N.clone(Aw||{});for(Ax=1;Ax<Av;Ax++){Ay=arguments[Ax];if(Ay instanceof Object){AO(Aw,Ay);}}return Aw;}function Aq(Aw){var Av;if(Aw.which===undefined||Aw.which===null){Av=(Aw.button<2)?0:((Aw.button===4)?1:2);}else{Av=(Aw.which<2)?0:((Aw.which===2)?1:2);}return Av;}function B(Av){var Aw=Av._delayHideTimerId;if(Aw){clearTimeout(Aw);delete Av._delayHideTimerId;}}function G(Av){B(Av);Av._delayHideTimerId=setTimeout(function(){Av.toggle(false);delete this._isTooltipShown;},Ad);}function L(Aw){var Ay=[],Av,Ax;Aw=Aw||[];for(Ax=0,Av=Aw.length;Ax!==Av;Ax++){Ay.push(Ax);}return Ay;}function r(A1){var Av=mstrmojo.ui.PopupConfig.ENUM_CORNERS,A3={pageX:A1.pageX,pageY:A1.pageY-6},Ax=this,Aw=Ax.owner;Aw.closePopup();var Az="";if(Ax.selectedSprites[Ax.selectedSprites.length-1].attSrc==="to"){Az="to";}else{Az="from";}Ax.showContextMenu("bubble",Ax.observableModel,A3,{alignment:{host:Av.TOP_LEFT,popup:Av.BOTTOM_LEFT,attSrc:Az}});var A2=Ax._lastOpened;Aw.showMenu(Ax.owner.getFormatMenuConfig(),A1);var Ay=Aw._lastOpened,A0=Ay._unlockHoverCheck;Ay._unlockHoverCheck=function(A5,A4){if(!AZ.contains(A2.domNode,AZ.eventTarget(A4,A5),true)){Ay._unlockHoverCheck=A0;Ay._unlockHoverCheck(A5,A4);}};}function c(Aw,A2,A1,A0){var Ay,Ax,Av,Az;if(isNaN(Aw)||Aw<0||Aw>1){return{x:NaN,y:NaN};}Ay=1-Aw;Av=Ay*Ay;Ax=Aw*Aw;Az=2*Ay*Aw;return{x:Av*A2.x+Az*A1.x+Ax*A0.x,y:Av*A2.y+Az*A1.y+Ax*A0.y};}var An=mstrmojo.chart.enums.EnumLineStyle;function t(Av){var Ay=1,Ax=An.LS_SOLID;if(Av){if(Av==="none"){Ax=An.LS_NONE;}else{var Aw=parseInt(Av,10);if(!isNaN(Aw)){Ay=Aw;}if(/dotted/.test(Av)){Ax=An.LS_DOT;}else{if(/dashed/.test(Av)){Ax=An.LS_DASH;}else{if(/solid/.test(Av)){Ax=An.LS_SOLID;}}}}}return{ceLnStyle:Ax,thk:Ay};}var I=mstrmojo.declare(mstrmojo.Base,[],{scriptClass:"mstrmojo.netviz.VisNetworkStage.Sprite",init:function(Az){this.zIndex=0;this.selectionState={};this.geometry={x:0,y:0,s:0};this.record();if(this._super){this._super(Az);}var Av=this.stage,Ax=this,Aw=Ao;var Ay=function(A2){var A0=A2.layerX,A3=A2.layerY,A1=A2.name;if(!Av.transitionTimer&&!Av.eventHasBeenHandled&&this["on"+A1]&&(p.indexOf(A1)!==-1||Ax.isHit(A0,A3))&&!this.isExcluded){Ax["on"+A1](A2);}};J.forEach(Aw,function(A0){Av.attachEventListenerForSprites(A0,Ax,Ay);});},updateZIndex:function(){var A0=this.stage&&this.stage.layers&&this.stage.layers[this.layerIndex];if(!(A0 instanceof Array&&A0.length>0)){return ;}var Av=A0.length,Az=this.type,Ax,Aw,Ay;for(Ax=0;Ax<Av;Ax++){Ay=A0[Ax];if(Ay.type===Az){if(Ay!==this){Aw=A0.indexOf(this);this.zIndex=Ay.zIndex+1;Ay.zIndex=A0[Ax-1]?A0[Ax-1]-1:0;A0[Aw]=Ay;A0[Ax]=this;this.stylesChanged();}break;}}},stopPropagation:function(){this.stage.eventHasBeenHandled=true;},draw:function(){this.record();},record:function(){var Av=this.getGeometry();this.oldGeometry=N.clone(Av);},drawStage:function(Av,Aw){this.stage.draw(Av,Aw);},stylesChanged:function(){this.hasStyleChanged=true;var Av=this.stage;if(Av){if(Av.onSpriteStyleChange&&Av.hasRendered){Av.onSpriteStyleChange(this.layerIndex);}}},highlight:function(){this.stage.addSpriteToLayer(this,AN.HIGHLIGHT);},unHighlight:function(){var Av=this.selectionState;if(!Av.selected&&!Av.hovered){this.stage.removeSpriteFromLayer(this,AN.HIGHLIGHT);var Aw=this.type==="Circle"?AN.CIRCLE:AN.EDGE;this.stage.addSpriteToLayer(this,Aw);}},showTooltip:function(Av){var Aw=this.stage.tooltip;if(!this._isTooltipShown){this._isTooltipShown=true;Aw.displayInfo(this.getTooltipInfo(),Av);}else{Aw.moveTo(Av.x,Av.y);}Aw.toggle(true);G(Aw);},hideTooltip:function(){var Av=this.stage.tooltip;B(Av);Av.toggle(false);delete this._isTooltipShown;}});var U={normal:{color:{value:2212863,opacity:0.8},border:{color:{value:8487297,opacity:0.8},width:3,style:"2pt solid"}},hovered:{color:{opacity:0.5},highlightBorder:{color:{value:16777215,opacity:1},width:2,distance:3}},selected:{color:{opacity:1},selectionBorders:{inner:{color:{value:0,opacity:1},width:1},outer:{color:{value:16777215,opacity:1},width:2}}}};var Ap={normal:{color:{value:2062260,opacity:0.7},border:{color:{value:2062260,opacity:1},width:3,style:"1pt solid"}},hovered:{color:{opacity:0.35},fromNode:{color:{opacity:0.35}},toNode:{color:{opacity:0.35}},highlightBorder:{color:{value:0,opacity:1},width:2,distance:3}},selected:{color:{opacity:1},fromNode:{color:{opacity:1}},toNode:{color:{opacity:1}},selectionBorders:{inner:{color:{value:16777215,opacity:1},width:1},outer:{color:{value:0,opacity:1},width:2}}},selectedHovered:{color:{opacity:0.7},fromNode:{color:{opacity:0.7}},toNode:{color:{opacity:0.7}}}};function Af(Aw,Av,A0,Ay,Az,Ax){Aw.arc(Av,A0,Ay,Az,Ax);}function C(Aw,Av,Ay,Ax){Aw.rect(Av-Math.sqrt(2)*Ax/2,Ay-Math.sqrt(2)*Ax/2,Math.sqrt(2)*Ax,Math.sqrt(2)*Ax);}function AK(Aw,Av,Ay,Ax){Aw.moveTo(Av,Ay-Ax);Aw.lineTo(Av+Ax,Ay);Aw.lineTo(Av,Ay+Ax);Aw.lineTo(Av-Ax,Ay);Aw.lineTo(Av,Ay-Ax);}function Ac(Aw,Av,Ay,Ax){Aw.moveTo(Av,Ay-Ax);Aw.lineTo(Av+Ax*Math.sqrt(3)/2,Ay-Ax/2);Aw.lineTo(Av+Ax*Math.sqrt(3)/2,Ay+Ax/2);Aw.lineTo(Av,Ay+Ax);Aw.lineTo(Av-Ax*Math.sqrt(3)/2,Ay+Ax/2);Aw.lineTo(Av-Ax*Math.sqrt(3)/2,Ay-Ax/2);Aw.lineTo(Av,Ay-Ax);}function m(Aw,Av,Ay,Ax){Aw.moveTo(Av,Ay-Ax);Aw.lineTo(Av+Ax*Math.sqrt(3)/2,Ay+Ax/2);Aw.lineTo(Av-Ax*Math.sqrt(3)/2,Ay+Ax/2);Aw.lineTo(Av,Ay-Ax);}var b={Circle:Af,Square:C,Diamond:AK,Hexagon:Ac,Triangle:m,Ring:Af};function w(A8,A2,A0,A4,BB,BK){if(!A8||!A4){return A4;}BB=BB||{color:{value:0,opacity:1},width:1};var BI=An.LS_SOLID,Aw=BB.distance||0;if(BB.style){var Ay=t(BB.style);BI=Ay.ceLnStyle;BB.width=Ay.thk+1;}A4+=Aw;var A3=BB.width,A6=BB.color,BH=g.getCSSColorString(A6.value,A6.opacity);if(BI===An.LS_NONE){return A4;}A8.save();var BJ=A4+A3*0.5,BG=Math.PI*2;A8.strokeStyle=BH;A8.lineWidth=A3;A8.beginPath();if(BI===An.LS_SOLID){b[BK](A8,A2,A0,BJ,0,BG,true);}else{var A1=BI===An.LS_DASH?0.5:0.2;var A7=BJ/A1,Ax=Math.PI*2/A7,BA=[],A9=-1,Az,A5,BE=(Math.cos(Ax)*BJ)+A2,Av=(Math.sin(Ax)*BJ)+A0,BF=(Math.cos(2*Ax)*BJ)+A2,BD=(Math.sin(2*Ax)*BJ)+A0,BC=Math.sqrt(Math.pow(BE-BF,2)+Math.pow(Av-BD,2));if(BK==="Ring"||BK==="Circle"){while(A9<A7){Az=Ax*A9;A5=Ax*(A9+1);BA.push({x:(Math.cos(Az)*BJ)+A2,y:(Math.sin(Az)*BJ)+A0,ex:(Math.cos(A5)*BJ)+A2,ey:(Math.sin(A5)*BJ)+A0});A9+=2;}J.forEach(BA,function(BL){A8.moveTo(BL.x,BL.y);A8.lineTo(BL.ex,BL.ey);});}else{A8.setLineDash([BC,BC]);A8.lineWidth=2;b[BK](A8,A2,A0,A4);}}A8.stroke();A8.closePath();A8.restore();return A4+A3;}function AV(A4,Ax,A0,A1,Ay){var A3=A0.x,A2=A0.y,Av=0,Aw=0,Az=Ax.value;if(g.isGradientColor(Az)){Av=Az.or;Aw=1-Av;}A4.save();A4.fillStyle=g.createCanvasFillPattern(Ax,A4,A3-A1*Av,A2-A1*Aw,A3+A1*Av,A2+A1*Aw);A4.beginPath();if(Ay==="Ring"){A4.lineWidth=A1*0.3;A4.strokeStyle=A4.fillStyle;Af(A4,A0.x,A0.y,A1*0.85,0,2*Math.PI,true);A4.stroke();}else{b[Ay](A4,A0.x,A0.y,A1,0,2*Math.PI,true);}A4.closePath();if(Ay!=="Ring"){A4.fill();}A4.restore();}var W={dark:U,light:Ap},As={dark:{stroke:{value:"#1f1f1f",opacity:1},fill:{value:"#ffffff",opacity:1}},light:{stroke:{value:"#ffffff",opacity:1},fill:{value:"#000000",opacity:1}}};var AT=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.VisNetworkStage.CircleSprite",init:function(Av){this.position={x:0,y:0,r:0};this.style=null;if(this._super){this._super(Av);}var Aw=this.position;Aw.x=isNaN(Aw.x)||Math.abs(Aw.x)===Infinity?0:Aw.x;Aw.y=isNaN(Aw.y)||Math.abs(Aw.y)===Infinity?0:Aw.y;Aw.r=isNaN(Aw.r)||Math.abs(Aw.r)===Infinity?0:Aw.r;this.updateTextSize();},getTooltipInfo:function(){var Av=this.getTooltipAttrInfo();if(this.aggregationName){Av.push({n:this.aggregationName,v:this.displayValue});}return Av;},getTooltipAttrInfo:function(Ax){var Aw=this.stage.owner.abstractedModel.formNameDisplayType,Av=this.forms,A0=this.formValues,Az=Ax||this.title,Ay;if(Aw===X.OFF||this.selfLoop){Ay=[{n:Az,v:this.text}];}else{Ay=Av.map(function(A2,A1){return{n:A2,v:A0[A1]};});}return Ay;},onclick:function(){this.stopPropagation();},onmousedown:function(Aw){Aw=Aw.e||Aw;var Ay=Aw.srcElement||Aw.target,Ax=this.stage,Av=Ax&&Ax.lassoSelector;this.stopPropagation();if(!(Aq(Aw)===2&&Ay===Av)){this.stage.dismissLassoSelector();}if(Ax.dragMode===Ab.select){Ax.lassoSelectorEnabled=false;}this._isMouseDown=true;this._selectionState=N.clone(this.selectionState);this._lastMousePosition={x:Aw.pageX,y:Aw.pageY};},onmousemove:function(A3){var Ay,A2,A0;var A6=A3.layerX,A5=A3.layerY,Aw=this.stage,Ax=false;A3=A3.e||A3;if(this._isMouseDown&&Aq(window.event||A3)===0){var A1=this._lastMousePosition,BA=A3.pageX-A1.x,A7=A3.pageY-A1.y;this._lastMousePosition={x:A3.pageX,y:A3.pageY};this.stopPropagation();if(BA!==0||A7!==0){if(!this._dragged){Aw.onSpriteStyleChange(AN.EDGE);Aw.onSpriteStyleChange(AN.CIRCLE);}this._dragged=true;if(!this.selectionState.selected){if(!(A3.ctrlKey||A3.metaKey)){Aw.clearSelection();}Aw.addToSelection(this);Ax=true;Aw.owner.doSelection();}var A9=this.stage.selectedSprites,Az=this.stage.currentLayout;J.forEach(A9,function(BB){A0=BB.getGeometry();A0.x+=BA;A0.y+=A7;BB.setGeometry(A0);if(Az===e.LINEAR||Az===e.FORCE_DIRECTED){J.forEach(BB.unit.edges,function(BD){var BC=BD.from.sprite.getGeometry(),BE=BD.to.sprite.getGeometry(),BG,BF;if(Az===e.LINEAR){BF={x:(BC.x+BE.x)*0.5-(BE.y-BC.y)*0.5,y:(BC.y+BE.y)*0.5+(BE.x-BC.x)*0.5};}else{if(Az===e.FORCE_DIRECTED){BG=j[BD.reversedEdge?1:0];BF={x:(BC.x+BE.x)*0.5+(BC.y-BE.y)*BG,y:(BC.y+BE.y)*0.5+(BE.x-BC.x)*BG};}}BD.sprite.setGeometry(BF);});}});this.drawStage(false,Ax);}}else{var A4,A8,Av=this.isHit(A6,A5);if(Av){this.stopPropagation();}if(this._hoverHighlighted){if(!Av){A4=this.getInvolvedSprites();A2=A4.length;for(Ay=0;Ay<A2;Ay++){A8=A4[Ay];A4[Ay].unHoverHighlight();}delete this._hoverHighlighted;this.hideTooltip();if(Aw._pendingRefresh){Aw.onSpriteStyleChange(AN.CIRCLE);Aw.onSpriteStyleChange(AN.EDGE);}Ax=true;if(Aw._pendingRefresh){delete Aw._pendingRefresh;}}}else{if(Av){A4=this.getInvolvedSprites();A2=A4.length;for(Ay=0;Ay<A2;Ay++){A8=A4[Ay];A8.hoverHighlight();}this._hoverHighlighted=true;Ax=true;}}if(Aw.selectedSprites.length>0){Aw.onSpriteStyleChange(AN.HIGHLIGHT);}this.drawStage(false,Ax);}if(this._hoverHighlighted){this.showTooltip({x:A3.clientX,y:A3.clientY});}},onmouseup:function(Av){var Aw=this.stage;Av=Av.e||Av;if(this._isMouseDown){this.stopPropagation();if(!this._dragged){if(Av.button===0){this.clickHandler(Av);}}Aw._bubbleToolbarPos=Av;Aw._pendingRefresh=true;delete this._selectionState;delete this._isMouseDown;delete this._lastMousePosition;delete this._dragged;}},clickHandler:function(Az,Ax){Az=Az.e||Az;var Ay=this.selectionState.selected,A1=Az.ctrlKey||Az.metaKey,A0=this.stage,Av=A0.selectedSprites.length>1,Aw=A0.isClearAllEnabled(this);if(Ay&&!Av){if(!Ax&&Aw){A0.clearSelection();}}if((Ay&&!A1&&Av&&!Ax)||(!Ay&&!A1)){A0.clearSelection();A0.addToSelection(this);}if(!Ay&&A1){A0.addToSelection(this);}if(Ay&&A1&&Av){if(!Ax){A0.removeFromSelection(this);}}this.drawStage(false,true);A0.owner.doSelection();},oncontextmenu:function AP(Aw){var Ay=this.stage,Av=Ay.owner,Ax=Aw.e||Aw;Aw.preventDefault();Aw.cancel();this.stopPropagation();this.clickHandler(Ax,true);if(this._isMouseDown){delete this._selectionState;delete this._isMouseDown;delete this._lastMousePosition;delete this._dragged;}if(Ay.isOnFormattingMode){r.call(Ay,Ax);}else{Av.showSelectionMenu(Ax,function(){r.call(Ay,Ax);AL.selectPropertyPanel(Av,"de");});}this.hideTooltip();return false;},getInvolvedSprites:function(){var Ax=[],A0;Ax.push(this);var Az=this.unit;if(Az){var Aw=Az.edges,Av=Aw.length,Ay;for(Ay=0;Ay<Av;Ay++){A0=Aw[Ay];Ax.push(A0.sprite);if(A0.from===Az){Ax.push(A0.to.sprite);}else{Ax.push(A0.from.sprite);}}}return Ax;},touchSwipeMove:function(Ay){var Av=Ay.layerX,Ax=Ay.layerY,Aw=this.getGeometry();Aw.x=Av;Aw.y=Ax;this.setGeometry(Aw);this.drawStage(false);},hoverHighlight:function(){if(!this.selectionState.hovered){this.selectionState.hovered=true;this.highlight();}},unHoverHighlight:function(){if(this.selectionState.hovered){this.selectionState.hovered=false;this.unHighlight();}},getStyle:function(){var Ax=this.selectionState,Av=this.stage,Aw=this.stage.themeType==="dark"?Av.circleStyle.dark:Av.circleStyle.light;return A(Aw.normal,Ax.hovered&&Aw.hovered,Ax.selected&&Aw.selected,Ax.hovered&&Ax.selected&&Aw.selectedHovered);},getLabelBoundingBox:function(){var A4=this.textSize,Ax=this.stage,Ay=(Ax.currentLayout===e.LINEAR),Av=this.position,A2=Av.x,A1=Av.y,A3,A0,Az,Aw;if(Ay){A3=A4.height;A0=A4.width;}else{A3=A4.width;A0=A4.height;}Az=(A3+Aj)/2;Aw=(A0+Aj)/2;return{top:A1-Aw,left:A2-Az,bottom:A1+Aw,right:A2+Az};},isShowLabel:function AC(){var A0=this.stage,Ax=A0.circleStyle.showNodeLabel||(this.selectionState.hovered&&!this._hoverHighlighted),Av=!A0.transitionTimer&&Ax,Ay=this.getLabelBoundingBox(),Az=A0.labelBitmap,Aw;if(Av){Aw=Az&&Az.testZeros(Ay);if(Aw){Az.set(Ay);}}return Av&&Aw;},draw:function Af(Az,A1){if(this.isExcluded){return ;}this._super();var A2=this.stage,Ay=this.getCanvas(),A6=A2.background;if(!Ay){D("cannot find the corresponding canvas.");return ;}var A7=Ay.getContext("2d"),Ax=this.position,Av=Ax.r>1?Ax.r:1,Aw=this.getStyle(),A4;var A0,A3=[];function A5(A8){A0=Aw[A8+"Node"].shape;A4=Aw[A8+"Node"].color;if(!Aw.selectionBorders){A3.push(Aw[A8+"Node"].border);}return A3;}A3=A5(A1);if(Az){A4=g.mix(A4,A6);}AV(A7,A4,Ax,Av,A0);if(Aw.selectionBorders){A3.push(Aw.selectionBorders.inner);A3.push(Aw.selectionBorders.outer);}if(Aw.highlightBorder){A3.push(Aw.highlightBorder);}J.forEach(A3,function(A8){if(Az){A8.color=g.mix(A8.color,A6);}Av=w(A7,Ax.x,Ax.y,Av,A8,A0);});if(A2.onDraw){A2.onDraw(this);}this.drawText();},drawText:function(){function A2(A6,A4,BA){function A7(BC,BG,BD){var BF=BG.x,BE=BG.y,BB=A4&Aa.FS_BOLD?2:1;BC.save();BC.lineWidth=1;BC.strokeRect(BF-1,BE-1,BD+2,BB+2);BC.fillRect(BF,BE,BD,BB);BC.restore();}var A8=this.textSize,A5=A8.width,A9=BA.x-A5/2;if(A4&Aa.FS_UNDERLINE){A7(A6,{x:A9,y:BA.y+A8.height/2},A5);}if(A4&Aa.FS_STRIKETHROUGH){A7(A6,{x:A9,y:BA.y},A5);}}var Az=this.stage,Aw=this.getCanvas(),A3=Aw.getContext("2d"),Av=this.position,A1=Av,A0=this.stage.circleLabelStyle,Ay=A0.fontColor,Ax=A0.fontStyle;if(!this.isShowLabel()){this.hasDrawnLabel=false;return ;}A3.save();A3.font=S(A0);A3.lineWidth=x;A3.fillStyle=g.getCSSColorString(Ay.fill.value,Ay.fill.opacity);A3.strokeStyle=g.getCSSColorString(Ay.stroke.value,Ay.stroke.opacity);A3.lineJoin="round";A3.textBaseline="middle";A3.textAlign="center";if(Az.currentLayout===e.LINEAR){A3.translate(Av.x,Av.y);A3.rotate(-Math.PI/2);A1={x:0,y:0};}A3.strokeText(this.text,A1.x,A1.y);A3.fillText(this.text,A1.x,A1.y);A2.call(this,A3,Ax,A1);A3.restore();this.hasDrawnLabel=true;},isHit:function(Av,A1){var Az=this.position,Ax=Az.x-Av,Aw=Az.y-A1,Ay=Az.r,A0=Ax*Ax+Aw*Aw;return(A0<=Ay*Ay);},setGeometry:function(Az){if(Az){var Av=Az.x,A1=Az.y,Ax=Az.s,Ay=this.position,A0=false,Aw;if(!isNaN(Av)&&Math.abs(Av)!==Infinity){if(Av!==Ay.x){A0=true;Ay.x=Av;}}if(!isNaN(A1)&&Math.abs(A1)!==Infinity){if(A1!==Ay.y){A0=true;Ay.y=A1;}}if(!isNaN(Ax)&&Math.abs(Ax)!==Infinity){if(Ax!==Ay.r){A0=true;Ay.r=Ax;}}if(A0){this.stylesChanged();Aw=this.unit&&this.unit.edges;J.forEach(Aw,function(A2){A2=A2.sprite;A2.stylesChanged(true);});}}},getGeometry:function(){var Aw=this.position,Av=this.geometry;Av.x=Aw.x;Av.y=Aw.y;Av.s=Aw.r;return Av;},getBorderWidth:function(){var Ax,Av,Az=this.getStyle(),A0=[],Aw,Ay=0;if(Az.selectionBorders){A0.push(Az.selectionBorders.inner);A0.push(Az.selectionBorders.outer);}else{if(AL.getPropertyByPath(Az,"fromNode.border",false)===false&&AL.getPropertyByPath(Az,"toNode.border",false)===false){A0.push(Az.border);}else{A0.push(Az.fromNode.border);A0.push(Az.toNode.border);}}for(Ax=0,Av=A0.length;Ax!==Av;Ax++){Az=A0[Ax];if(Az.style){Aw=t(Az.style);Ay+=Aw.thk+1;}else{Ay+=Az.width||1;}}return Ay;},updateTextSize:function(){var Av=this.text,Ax=this.stage.circleLabelStyle,Ay=H(Ax.fontSize),Aw=AL.measureTextWidth(Av,{fontSize:Ax.fontSize,fontFamily:Ax.fontFamily,fontStyle:Am(Ax.fontStyle)},R);this.textSize={width:Aw,height:Ay};}});var E={hovered:"white"};var a={hovered:"black"};function AB(Ay){var Az=Ay.start,Av=Ay.end,Aw,Ax=false;if(Az>Av){Aw=Az;Az=Av;Av=Aw;Ax=!Ax;}if(Az<=Math.PI&&Av>Az+Math.PI){Aw=Az;Az=Av;Av=Aw;Ax=!Ax;}if(Ax){Aw=Ay.p1;Ay.p1=Ay.p2;Ay.p2=Aw;}Ay.start=Az;Ay.end=Av;}function Y(Av,Az){var Ax=Az.x-Av.x,Aw=Az.y-Av.y,Ay=Math.acos(Ax/Math.sqrt(Ax*Ax+Aw*Aw));if(Aw>=0){return Ay;}return 2*Math.PI-Ay;}function d(BF,A7,A1,A2,A9){var Ax=AL.isNearZero,BD=A9/2,BB=A2*Math.cos(BD)+Math.sqrt(A1*A1-A2*A2*Math.pow(Math.sin(BD),2)),A5=A7.x-BF.x,A4=A7.y-BF.y,BA,Az,Ay,BE,A0,BC,A8,A6,A3,Aw,Av;BA=Math.sqrt(A5*A5+A4*A4);Az=A5*BB/BA;Ay=A4*BB/BA;A0=Math.acos((A1*A1+BB*BB-A2*A2)/(2*A1*BB));BC=Ay/BB;if(Ax(Math.abs(Ay)-Math.abs(BB))){if(Ay<0){BC=-1;}else{if(Ay>0){BC=1;}}}BC=Math.asin(BC);A8=BC+A0;A6=BC-A0;A3=A5/Math.abs(A5);BE={x:A7.x+Az,y:A7.y+Ay};if(isNaN(A3)){Aw={x:A7.x+A1*Math.cos(A8),y:A7.y+A1*Math.sin(A8)};Av={x:A7.x+A1*Math.cos(A6),y:A7.y+A1*Math.sin(A6)};}else{Aw={x:A7.x+A1*Math.abs(Math.cos(A8))*A3,y:A7.y+A1*Math.sin(A8)};Av={x:A7.x+A1*Math.abs(Math.cos(A6))*A3,y:A7.y+A1*Math.sin(A6)};}return{center:BE,p1:Aw,p2:Av};}function u(){var A5=this,A3=this.stage,A1=A3.currentLayout,Ax=A5.from.position,Az;var Ay=A5.width>1?A5.width:1,Av=Ax.r+A5.from.getBorderWidth()/2,A6=f+Ay/2;if(A1===e.CIRCULAR){Az=A3.graphCenter;}else{if(A1===e.FORCE_DIRECTED){Az=A3.findForceDirectedGraphCenter(A5.from);}else{Az=A3.findLinearLayoutGraphCenter(A5.from);}}var A4=d(Az,Ax,Av,A6,V);var Aw=Y(A4.center,A4.p1);var A0=Y(A4.center,A4.p2);var A2=A4;A2.start=Aw;A2.end=A0;A2.r=A6;AB(A2);return A2;}function l(A2){var Aw=this,A0=u.call(Aw),A4,A3,A1,Av=A0.start,Ay=A0.end,Az=Math.max(Aw.width,1),Ax;if(isNaN(A0.center.x)||isNaN(A0.center.y)){return false;}A4=A2.x-A0.center.x;A3=A2.y-A0.center.y;A1=Math.sqrt(A4*A4+A3*A3)-f;if(A1<0||A1>Az){return false;}Ax=Y(A0.center,A2);if(Av<Ay){return Ax<=Av||Ax>=Ay;}if(Av>Ay){return Ay<=Ax&&Ax<=Av;}return true;}function AU(Ax,Aw,Av){Av.save();Av.fillStyle=Aw;Av.lineWidth=Ax.width;Av.lineJoin="round";Av.lineCap="round";Av.miterLimit=0;Av.beginPath();Av.moveTo(Ax.tip.x,Ax.tip.y);Av.lineTo(Ax.wing1.x,Ax.wing1.y);Av.lineTo(Ax.crossing1.x,Ax.crossing1.y);Av.lineTo(Ax.crossing2.x,Ax.crossing2.y);Av.lineTo(Ax.wing2.x,Ax.wing2.y);Av.closePath();Av.fill();Av.restore();}function z(Av,A0,A1){var A7=A0.x-Av.x,A6=A0.y-Av.y,A2=AL.isNearZero,Ay=A2(A7),Aw=A2(A6),Ax,Az,A3,A5,A4;if(Ay&&Aw){return{x:A0.x,y:A0.y};}if(Ay){return{x:A0.x,y:A0.y-(A6>0?A1:-A1)};}if(Aw){return{x:A0.x-(A7>0?A1:-A1),y:A0.y};}Az=A7/A6;Ax=A6>0?-1:1;A3=Math.sqrt(A1*A1/(Az*Az+1));A4=A0.y+Ax*A3;A5=A0.x+Az*(A4-A0.y);return{x:A5,y:A4};}function Ar(A1,Av,Aw){var A3=Av.x-A1.x,A2=Av.y-A1.y,A0=AL.isNearZero,Ay=A0(A3),Ax=A0(A2),Az;if(Ay&&Ax){return{a:Aw.y/Aw.x,b:-1,c:0};}if(Ay){return{a:0,b:1,c:-Aw.y};}if(Ax){return{a:1,b:0,c:-Aw.x};}Az=A3/A2;return{a:-A3,b:-A2,c:(Aw.x*Az+Aw.y)*A2};}function K(A2,BN,Av,BE){var BL=A2.a,BK=A2.b,BI=A2.c,Ax=AL.isNearZero,A9=Ax(BL),A0=Ax(BK);if(A9||A0){var A1=AH*BE,BJ=z(BN,Av,A1),A3=AW*BE;if(A9&&A0){return[{x:Av.x,y:Av.y},{x:Av.x,y:Av.y}];}if(A9){return[{x:BJ.x+A3,y:BJ.y},{x:BJ.x-A3,y:BJ.y}];}if(A0){return[{x:BJ.x,y:BJ.y+A3},{x:BJ.x,y:BJ.y-A3}];}}var BM=BL*BL,BH=BN.x,Az=BN.y,BD=Math.sqrt(BL*BL+BK*BK),BC=AW*BE*BD,BB=M*BE*BE,BA=BC-BI,A8=BL*BL+BK*BK,A7=2*(BH*BL*BK-BK*BA-BM*Az),A6=BA*BA+BM*BH*BH-2*BH*BL*BA+BM*Az*Az-BB*BM,A5=Math.sqrt(A7*A7-4*A8*A6),A4=2*A8,Ay=(-A7+A5)/A4,Aw=(-A7-A5)/A4,BG=(BA-BK*Ay)/BL,BF=(BA-BK*Aw)/BL;return[{x:BG,y:Ay},{x:BF,y:Aw}];}function i(A2,Aw,A1,Ax){var A4=z(A2,Aw,A1),A5=z(A2,Aw,A1+Ax),A3=Ar(A2,Aw,A5),Av=K(A3,A5,A4,Ax),A0=M*Ax/3,Az=z(A5,Av[0],A0),Ay=z(A5,Av[1],A0);return{tip:A4,inner:A5,wing1:Av[0],wing2:Av[1],crossing1:Az,crossing2:Ay,width:Ax};}function q(A3,Ax,A2){var A0=A3.x,Az=A3.y,Aw=Ax.x,Av=Ax.y,A1=A2.x,Ay=A2.y;return AL.isNearZero(A0*(Av-Ay)+Aw*(Ay-Az)+A1*(Az-Av));}var o=mstrmojo.declare(I,[],{scriptClass:"mstrmojo.netviz.VisNetworkStage.EdgeSprite",init:function(Av){this.controlPoint={x:0,y:0};if(this._super){this._super(Av);}},getTooltipInfo:function(){function Ax(A4){var A5=A4.unit;return[].concat(A4.from.getTooltipAttrInfo(A3),A4.to.getTooltipAttrInfo(Ay),A5.values.map(function(A6,A7){return{n:A6.metricName,v:A5.format(A6.value,A7)};}));}var Aw,Av=this.unit.reversedEdge,Az=this.stage.currentLayout===e.CIRCULAR,A1=this.stage.owner.abstractedModel||{},A2=A1.indexes,A0=A1.attributes,A3,Ay;if(A2&&A0){A3=(A0[A2.fromIndex]||{}).name;Ay=(A0[A2.toIndex]||{}).name;}Aw=Ax(this);if(Az&&Av){Aw=Aw.concat(null,Ax(Av.sprite));}return Aw;},onmousemove:function(Ay){var Av=Ay.layerX,A0=Ay.layerY,Aw=this.isHit(Av,A0),Az=this.stage,Ax=false;Ay=Ay.e||Ay;if(this.selectionState.hovered&&!Aw){this.unHoverHighlight();this.hideTooltip();delete Az._isEdgeHovered;if(Az._pendingRefresh){Az.onSpriteStyleChange(AN.CIRCLE);Az.onSpriteStyleChange(AN.EDGE);}Ax=true;}else{if(!this.selectionState.hovered&&Aw){this.stopPropagation();this.hoverHighlight();Az._isEdgeHovered=true;Ax=true;}}if(Ax){if(Az.selectedSprites.length>0){Az.onSpriteStyleChange(AN.HIGHLIGHT);}Az.draw(false,true);if(!this.selectionState.hovered){delete Az._pendingRefresh;}}if(this.selectionState.hovered){this.stopPropagation();this.showTooltip({x:Ay.clientX,y:Ay.clientY});}},oncontextmenu:function(Az){Az=Az.e||Az;this.stopPropagation();var Aw=new mstrmojo.ui.menus.MenuConfig(),Ay=this.stage,Ax=Ay.owner,A1=Ax.getColorByMetric();if(A1){Aw.addMenuItem(mstrmojo.desc(13174,"Select color ranges..."),"",function(){Ax.model.openThresholdEditor(A1,true,false);});}var Av=Ax.observableModel.showEdgeDirection,A0=Av.getValue();Aw.addMenuItem(mstrmojo.desc(12080,"Show Edge Direction"),A0?"on":"",function(){Av.setValue(!A0);});Ax.showMenu(Aw,Az);},hoverHighlight:function(){this.selectionState.hovered=true;if(this.from){this.from.hoverHighlight();}if(this.to){this.to.hoverHighlight();}this.highlight();},unHoverHighlight:function(){this.selectionState.hovered=false;if(this.from){this.from.unHoverHighlight();}if(this.to){this.to.unHoverHighlight();}this.unHighlight();},getEndPoint:function(){var Aw=this.stage,Ay=Aw.showEdgeDirection,A4=this,Az=A4.to,A3=Az.getGeometry(),A1=A3,A0=A4.controlPoint,Av=A4.width>1?A4.width:1,Ax=Av<4?4:Av,A5,A2;if(Ay){A5=A4.arrow||i(A0,A3,A3.s+Az.getBorderWidth(),Ax);A2={x:(A5.crossing1.x+A5.crossing2.x)/2,y:(A5.crossing1.y+A5.crossing2.y)/2};A1=z(A3,A2,0.15);if(!A4.arrow){A4.arrow=A5;}}return{pos:A1,arrow:A5};},draw:function h(){if(this.isExcluded){return ;}var BC=this.stage,A5=BC.currentLayout===e.CIRCULAR,A7=this.unit,A6,A8=this,Ax=this.getCanvas(),BA=Ax.getContext("2d"),A4=A8.to,Aw=A8.from.position,Av=A4.position,A3=A8.controlPoint,A9=A8.width>1?A8.width:1,A1=A8.selectionState,BB,BD,BE,Az,A2,A0=Aw,Ay;if(A5&&this.skipBidirectional){return ;}if(A1.hovered||A1.selected){BB=this.stage.themeType==="dark"?E.hovered:a.hovered;}else{BB=A8.color;}BA.strokeStyle=BB;BA.lineWidth=A9;if(Aw===Av){BD=u.call(this);BA.beginPath();BA.arc(BD.center.x,BD.center.y,BD.r,BD.start,BD.end,true);BA.stroke();}else{BE=this.getEndPoint();Ay=BE.pos;A2=BE.arrow;A6=A7.reversedEdge;if(A5&&A6){A6=A6.sprite;A6.skipBidirectional=true;A8.skipBidirectional=false;BE=A6.getEndPoint();A0=BE.pos;Az=BE.arrow;}BA.beginPath();BA.moveTo(A0.x,A0.y);if(q(A0,A3,Ay)){BA.lineTo(Ay.x,Ay.y);}else{BA.quadraticCurveTo(A3.x,A3.y,Ay.x,Ay.y);}BA.stroke();}if(Az){AU(Az,BA.strokeStyle,BA);}if(A2){AU(A2,BA.strokeStyle,BA);}if(BC.onDraw){BC.onDraw(this);}this._super();},isHit:function(A8,A5){var BE=Math.max(1,this.width/2),Aw=this.controlPoint,Av=this.to.position,Ax=this.from.position,A9=Ax.x-2*Aw.x+Av.x,BD=2*(Aw.x-Ax.x),A0=Ax.x-A8,A4=BD*BD-4*A9*A0,A7=Ax.y-2*Aw.y+Av.y,BC=2*(Aw.y-Ax.y),Ay=Ax.y-A5,A2=BC*BC-4*A7*Ay,BF;function Az(BI,BH){return Math.sqrt(Math.pow((BI.x-BH.x),2)+Math.pow((BI.y-BH.y),2));}if(this.from===this.to){return l.call(this,{x:A8,y:A5});}var A1=[];var BA,A6,A3;if(A9===0){if(BD!==0){BA=(A8-Ax.x)/(2*(Aw.x-Ax.x));}else{BA=0;}A1.push(BA);}else{if(A4>=0){A6=(Math.sqrt(A4)-BD)/(2*A9);A3=(-1*Math.sqrt(A4)-BD)/(2*A9);A1.push(A6);A1.push(A3);}}if(A7===0){if(BC!==0){BA=(A5-Ax.y)/(2*(Aw.y-Ax.y));}else{BA=0;}A1.push(BA);}else{if(A2>=0){A6=(Math.sqrt(A2)-BC)/(2*A7);A3=(-1*Math.sqrt(A2)-BC)/(2*A7);A1.push(A6);A1.push(A3);}}var BB,BG;for(BB=0;BB<A1.length;BB++){BG=c(A1[BB],Ax,Aw,Av);BF=Az({x:A8,y:A5},BG);if(BF<=BE){return true;}}return false;},getGeometry:function(){var Aw=this.controlPoint,Av=this.geometry;Av.x=Aw.x;Av.y=Aw.y;Av.s=this.width;return Av;},setGeometry:function(Ay){if(Ay){var Av=Ay.x,A0=Ay.y,Aw=Ay.s,Ax=this.controlPoint,Az=false;if(!isNaN(Av)&&Math.abs(Av)!==Infinity){if(Av!==Ax.x){Ax.x=Av;Az=true;}}if(!isNaN(A0)&&Math.abs(A0)!==Infinity){if(A0!==Ax.y){Ax.y=A0;Az=true;}}if(!isNaN(Aw)&&Math.abs(Aw)!==Infinity){if(Aw!==this.width){this.width=Aw;Az=true;}}if(Az){this.stylesChanged();}}},stylesChanged:function(Av){if(this._super){this._super();}if(Av){this.arrow=undefined;}}});function AI(){function Aw(){var Ax=this.circleStyle,A1=this.themeType==="dark"?Ax.dark:Ax.light,Ay=N.clone(A1.normal),A2=AL.getPropertyByPath(Ay,"color.value",false)!==false?g.getCSSColorString(Ay.color.value):undefined,A9=AL.getPropertyByPath(Ay,"border.color.value",false)!==false?g.getCSSColorString(Ay.border.color.value):undefined,A6=AL.getPropertyByPath(Ay,"fromNode.color.value",false),A8=AL.getPropertyByPath(Ay,"toNode.color.value",false),A0=AL.getPropertyByPath(Ay,"fromNode.border.color.value",false),A4=AL.getPropertyByPath(Ay,"toNode.border.color.value",false),A5=A6===false?A2:A6,A7=A8===false?A2:A8,Az=A0===false?A9:A0,A3=A4===false?A9:A4;Ay={fromNode:{border:AL.getPropertyByPath(Ay,"fromNode.border",false)!==false?Ay.fromNode.border:Ay.border,color:AL.getPropertyByPath(Ay,"fromNode.color",false)!==false?Ay.fromNode.color:Ay.color,shape:Ay.fromNode!==undefined?Ay.fromNode.shape:"Circle"},toNode:{border:AL.getPropertyByPath(Ay,"toNode.border",false)!==false?Ay.toNode.border:Ay.border,color:AL.getPropertyByPath(Ay,"toNode.color",false)!==false?Ay.toNode.color:Ay.color,shape:Ay.toNode!==undefined?Ay.toNode.shape:"Circle"}};Ay.fromNode.border.color.value=g.getCSSColorString(Az);Ay.fromNode.color.value=g.getCSSColorString(A5,undefined,{retainGradientObject:true});Ay.toNode.border.color.value=g.getCSSColorString(A3);Ay.toNode.color.value=g.getCSSColorString(A7,undefined,{retainGradientObject:true});Ay.showNodeLabel=Ax.showNodeLabel;A1.normal=Ay;return Ay;}var Av=this.addDisposable(new AS({background:this.background,circleStyle:Aw.call(this),circleLabelStyle:this.circleLabelStyle,dragMode:this.dragMode}));Av.background.attachEventListener("valueChanged",this.id,function(Ay){var A0=Av.background.getRawObject();this.background=A0;var Ax=this.owner,Az=F.encodeColor(Ax.getFormats()["background-color"],10),A1=F.encodeColor(Ay.newValue,10);if(Az!==A1){AL.changeWidgetBackground(Ax,Ay.newValue,Ay.oldValue);}Ax.onStylesModified("background",A0);});Av.circleStyle.attachEventListener("valueChanged",this.id,function(){function Az(A3,A2){var A0=this.observableModel,A1=A3;this.circleStyle=A3;Ai.call(this);if(A2){A1=Aw.call(this);A0.circleStyle.setValue(A1,true);}this.draw(false,true,true);}var Ax=Av.circleStyle.getRawObject();Ax.fromNode.border.color.value=g.getColorValue(Ax.fromNode.border.color.value);Ax.fromNode.color.value=g.getColorValue(Ax.fromNode.color.value);Ax.toNode.border.color.value=g.getColorValue(Ax.toNode.border.color.value);Ax.toNode.color.value=g.getColorValue(Ax.toNode.color.value);var Ay=this.themeType==="dark"?this.circleStyle.dark:this.circleStyle.light;Ay.normal=Ax;this.circleStyle.showNodeLabel=Ax.showNodeLabel;this.owner.onStylesModified("circleStyle",Ax,Az);Az.call(this,this.circleStyle);});Av.circleLabelStyle.attachEventListener("valueChanged",this.id,function(Ax){function Az(A2,A1){var A0=this.observableModel;this.circleLabelStyle=A2;if(A1){P.call(this);A0.circleLabelStyle.setValue(this.circleLabelStyle,true);}if(Ay){(this.spriteCollection||[]).forEach(function(A3){if(A3.type==="Circle"){A3.updateTextSize();}});}this.draw(false,true,true);}var Ay=(Ax.target!==Av.circleLabelStyle.fontColor.fill.value);this.owner.onStylesModified("circleLabelStyle",Av.circleLabelStyle.getRawObject(),Az);Az.call(this,Av.circleLabelStyle.getRawObject());});Av.dragMode.attachEventListener("valueChanged",this.id,function(Ax){function Az(A1,A0){this.dragMode=A1;if(A0){this.observableModel.dragMode.setValue(A1,true);}if(A1===Ab.pan){this.dismissLassoSelector();this.lassoSelectorEnabled=false;this.scaleBar.inputPan.checked=true;}else{if(A1===Ab.select){this.lassoSelectorEnabled=true;this.scaleBar.inputSelect.checked=true;}}}var Ay=Ax.newValue;Az.call(this,Ay);this.owner.onStylesModified("dragMode",Ay,Az);});return Av;}function P(){var Av=this.circleLabelStyle,Aw=N.clone(AE);N.copy(Av||{},Aw);if(!Aw.fontColor){Aw.fontColor=N.clone(this.themeType==="dark"?As.dark:As.light);}this.circleLabelStyle=Aw;this.owner.propInfo.circleLabelStyle=Aw;}function Ai(){var Ax=this.circleStyle,Aw=Object.keys(Ax),Av;if(!Ax||(Aw.length===1&&Aw[0]==="showNodeLabel")){Av=Ax.showNodeLabel;this.circleStyle=N.clone(W);this.circleStyle.showNodeLabel=Av;}else{if(!this.circleStyle.light||!this.circleStyle.dark){var Az=N.clone(W),Ay=this.themeType==="dark"?Az.dark:Az.light;Ay.normal=this.circleStyle;Az.showNodeLabel=this.circleStyle.showNodeLabel;delete this.circleStyle.showNodeLabel;this.circleStyle=Az;}}}mstrmojo.netviz.VisNetworkStage=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup,mstrmojo.netviz._HasNetworkContextMenu,mstrmojo.util.ui._LassoSelector],{scriptClass:"mstrmojo.netviz.VisNetworkStage",markupString:'<div id="{@id}-networkstage" style="position: absolute; left: {@left}px; top: {@top}px; width: {@width}px; height:{@height}px;" mstrAttach:mousedown,mousemove,click,contextmenu><div id="{@id}-canvas-parent-parent" style="position: absolute; width: {@width}px; height: {@height}px;"><div id="{@id}-canvas-parent" style="position: relative; z-index: 0;"><canvas id="{@id}-canvas" style="position: absolute; z-index: {@canvasCount}" id="canvas" width= "{@width}" height="{@height}"></canvas></div></div><div style="position: absolute; display:none; border: 2px dotted white; -webkit-user-select: none;"></div><div style="position: absolute; left: '+AJ+"px; top: "+Au+'px;"></div><div style="position: absolute;"></div></div>',markupSlots:{baseCanvas:function(){return this.domNode.firstChild.firstChild.firstChild;},canvasContainer:function(){return this.domNode.firstChild.firstChild;},canvasOuterContainer:function(){return this.domNode.firstChild;},selectionRectangle:function(){return this.domNode.childNodes[1];},scaleBarPlaceHolder:function(){return this.domNode.childNodes[2];},containerNode:function(){return this.domNode.childNodes[0];}},init:function(Av){this.spriteCollection=[];this.selectedSprites=[];this.frameRate=60;this.frameInterval=Math.ceil(1000/this.frameRate);this.eventHasBeenHandled=false;this.isOnFormattingMode=false;this.dragMode=Ab.pan;this.canvases=[];this.canvasCount=2;this.layers=[];this.transitionDuration=AM;if(this._super){this._super(Av);}this.scaleBarRect={x:AJ,y:Au,w:Ag,h:T};Ai.call(this);P.call(this);if(this.showTransition){this.enableTransition();}this.observableModel=AI.call(this);if(!this.tooltip){this.tooltip=this.addDisposable(new mstrmojo.VisTooltip({placeholder:document.body.appendChild(document.createElement("div")),owner:this}));this.tooltip.render();this.tooltip.domNode.style.display="none";}this.enableRaiseEventsForGestures();},themeType:"dark",destroy:function(){var Av=this.tooltip;if(Av.domNode&&Av.domNode.parentNode){Av.domNode.parentNode.removeChild(Av.domNode);}delete this.spriteCollection;delete this.selectedSprites;delete this.canvases;delete this.layers;if(this._super){this._super();}},preBuildRendering:function(Av){this._super(Av);},postBuildRendering:function(Aw){if(this._super){this._super(Aw);}var Av=this.baseCanvas;if(!Av){D("No canvas found. Init failed");return ;}this.putSpritesInCanvases();J.forEach(this.layers,function(Ay){if(Ay){Ay.sort(function(A0,Az){if(A0.zIndex>Az.zIndex){return 1;}if(A0.zIndex===Az.zIndex){return 0;}return -1;});}});this.clear();this.updateCanvasPosition();this.draw();this.scaleBar=this.addDisposable(new mstrmojo.netviz.VisNetworkStageScaleBar({owner:this,placeholder:this.scaleBarPlaceHolder,width:this.scaleBarRect.w,height:this.scaleBarRect.h,scale:this.scale,range:{min:y?0.00001:0.5,max:y?10:2},setDragType:this.setDragType,resetScene:this.resetScene,dragMode:this.dragMode}));this.scaleBar.render();var Ax=this;AL.addWheelListener(this.domNode,function(A1){A1.preventDefault();Ax.dismissLassoSelector();if(Ax.transitionTimer){return ;}var Ay=Ax.scaleBar,A0=A1.deltaY>0?-1:1,A2=0.1,Az=isNaN(Ay.scaleFactor)?1:Ay.scaleFactor;Az+=A0*A2;Ay.setScaleFactor(Az);Ay._deActoniveTimer=window.setTimeout(function(){Ay.setScaleFactorDone();},1000);});this.registerLassoSelector(this.domNode,[],false);},lassoSelecting:function(){Al.removeClass(this.lassoSelector,"lasso-selector-hasContent");},lassoSelected:function(Ax){var Aw=this,Av=Aw.owner;Aw.areaSelect({x0:Ax.left,y0:Ax.top,x1:Ax.left+Ax.width,y1:Ax.top+Ax.height},Ax);if(Aw.selectedSprites.length){Al.addClass(this.lassoSelector,"lasso-selector-hasContent");}Av.doSelection();},lassoSelectorResized:function(Av){this.lassoSelecting();this.lassoSelected(Av);},initScaleBar:function(Aw){var Av=this.scaleBar;var Ax=Aw||this.getLocalProp(Ak.ZOOM_FACTOR);if(!isNaN(Ax)&&Ax!==1){Av.setScaleFactor(Ax);}},getLocalProp:function(Aw){var Av=this.owner;return Av&&Av.getLocalProp(Aw);},setLocalProp:function(Ax,Aw){var Av=this.owner;return Av&&Av.setLocalProp(Ax,Aw);},setMainRect:function(Av){if(!Av){return ;}this.scaleBarRect.x=Av.x+AJ;if(this.scaleBar&&this.scaleBar.domNode){this.scaleBar.domNode.style.left=this.scaleBarRect.x+"px";}Av.x=this.scaleBarRect.x+this.scaleBarRect.w;Av.w=Av.w-this.scaleBarRect.w-AJ;this.mainRect=Av;},onSpriteStyleChange:function(Aw){if(!this.toBeDrawnLayersIndexes){this.toBeDrawnLayersIndexes=[];}var Av=this.toBeDrawnLayersIndexes;if(!isNaN(Aw)&&Av.indexOf(Aw)===-1){Av.push(Aw);}},removeSpriteFromLayer:function(Ax,Aw){var Av=false,Az=this.layers[Aw],Ay=Az.indexOf(Ax);if(Ay!==-1){Az.splice(Ay,1);Av=true;if(this.hasRendered){this.onSpriteStyleChange(Aw);}}return Av;},addSpriteToLayer:function(Ax,Aw){var Ay=this.layers[Aw],Av=false;if(Ay){Ax.layerIndex=Aw;if(Ay.indexOf(Ax)===-1){Ay.push(Ax);Av=true;}if(this.hasRendered){this.onSpriteStyleChange(Aw);}}return Av;},putSpritesInCanvases:function(){this.canvases=[];var Av=this.canvasCount-1,Ay=this.canvases,A0=[],Ax,Aw=document.createDocumentFragment(),A2;[AN.EDGE,AN.CIRCLE,AN.HIGHLIGHT].forEach(function(A4){var A3=A0[A4]=[];A3.canvasIndex=A4===AN.HIGHLIGHT?Ae.HIGHLIGHT:Ae.BASE;});function Az(A5,A4){var A3=A0[A4];if(A3.indexOf(A5)===-1){A5.layerIndex=A4;A3.push(A5);}A5.getCanvas=function(){return this.stage.canvases[this.stage.layers[this.layerIndex].canvasIndex];};}for(Ax=0;Ax<Av;Ax++){A2=document.createElement("canvas");A2.width=this.width;A2.height=this.height;A2.style.position="absolute";A2.style.zIndex=(Ax+1).toString();Aw.appendChild(A2);Ay.push(A2);}this.canvasContainer.appendChild(Aw);this.canvases.push(this.baseCanvas);var A1=this.spriteCollection;J.forEach(A1,function(A3){if(A3.type==="Circle"){Az(A3,AN.CIRCLE);J.forEach(A3.unit.edges,function(A4){A4=A4.sprite;Az(A4,AN.EDGE);});}});this.layers=A0;},unrender:function(Av){if(this.scaleBar&&this.scaleBar.unrender){this.scaleBar.unrender(Av);}if(this._super){this._super(Av);}},updateCanvasPosition:function(){this.canvasPosition=AQ(this.baseCanvas,true);},enableRaiseEventsForGestures:function(){var A0=Ao;var Az=this,Ay,A1,A4=this.id;var A3=function(A9,A8){return function(BC){var BB=AQ(this.baseCanvas,true),BA=BC.e||BC.evt||BC;BC.name=A9;BC.layerX=BA.pageX-BB.x;BC.layerY=BA.pageY-BB.y;mstrmojo.all[A4].eventHasBeenHandled=false;mstrmojo.all[A4].raiseEventForSprites(BC);if(A8){A8.call(mstrmojo.all[A4],BC);}};};var A2=Az.onmousemove,A6,Aw,Ax,Av,A5,A7;for(Ay=0,A1=A0.length;Ay<A1;Ay++){A6=A0[Ay];Aw="on"+A6;Ax=Az[Aw];Az[Aw]=A3(A6,Ax);}Av=Az.onmousemove;Az.onmousemove=function(A8){if(!mstrmojo.all[A4]._isMouseDown){Av.call(mstrmojo.all[A4],A8);}else{A2.call(mstrmojo.all[A4],A8);}};A5=Az.onmousedown;A7=Az.onmouseup;Az.onmousedown=function(A8){A5.call(mstrmojo.all[A4],A8);AL.captureEventOnce("mouseup",A7,mstrmojo.all[A4]);};},clear:function AA(Ay){var Ax=[],Az=this,Av=this.width,Aw=this.height;if(Ay instanceof Array){Ay.forEach(function(A1){var A0=Az.canvases[Az.layers[A1].canvasIndex];if(Ax.indexOf(A0)===-1){Ax.push(A0);}});}else{Ax=this.canvases;}Ax.forEach(function(A1){var A0;A0=A1.getContext("2d");A0.clearRect(0,0,Av,Aw);A0.fillStyle="rgba(0, 0, 0, 0)";A0.fillRect(0,0,Av,Aw);});},applyScaleAndPosition:function(){var A0=this.spriteCollection,Az=A0.length,Aw=this.sceneInformation.position,Ay=this.scaleFactor,A3=this.width/2,A1=this.height/2,Ax,A4,Av;if(isNaN(Ay)){Ay=1;}for(Ax=0;Ax<Az;Ax++){A4=A0[Ax];Av=A4.getGeometry();Av.s=Av.s*Ay;Av.x=(Av.x-A3)*Ay+A3+Aw.x;Av.y=(Av.y-A1)*Ay+A1+Aw.y;A4.setGeometry(Av);}if(this.currentLayout===e.CIRCULAR){var A2=this.graphCenter;if(A2){A2.x=(A2.x-A3)*Ay+A3+Aw.x;A2.y=(A2.y-A1)*Ay+A1+Aw.y;}}this.scaleFactor=1;Aw.x=0;Aw.y=0;},setDragType:function(Aw){var Av=AL.getPropertyByPath(this,"observableModel.dragMode");if(Av!==undefined){Av.setValue(Aw);}},drawLayer:function AG(Ax,Az){if(!Ax){return ;}var Av=Ax.length,Aw,Ay;for(Aw=Av-1;Aw>=0;Aw--){Ay=Ax[Aw];Ay.draw(Az,Ay.attSrc);delete Ay.hasStyleChanged;}},drawFrame:function AY(Aw,A9){var BE,BD,Av,BA,Ay,A6,A4,A1,BC,BG,A8,A3,BI=this;function BF(BL){var BJ=A6["diff"+BL],BK=BJ*A3;if(!isNaN(BK)){A6[BL]=A6["start"+BL]+BK;}}if(!BI._hasDrawnTheFirstFrame){AR.startTimer({functionName:"VisNetworkStage.draw",purpose:"Rendering the canvas"});}BI.clear(A9);A4=[];if(A9 instanceof Array){for(BD=0;BD<A9.length;BD++){A1=A9[BD];BG=BI.layers.length;for(BC=0;BC<BG;BC++){var BB=BI.layers[A1],A7=BI.layers[BC];if(BC!==A1&&BB&&A7&&BB.canvasIndex===A7.canvasIndex&&A9.indexOf(BC)===-1){A9.push(BC);}}}A9.sort();J.forEach(A9,function(BK){var BJ=BI.layers[BK];if(BJ){A4.push(BJ);}});}else{A4=BI.layers;}if(!A4.length){D("nothing to draw");return ;}if(BI.transitionTimer){Av=BI.spriteCollection;BE=Av.length;A8=Aw-BI.transitionStartTime;if(A8>BI.transitionDuration){for(BD=0;BD<BE;BD++){BA=Av[BD];Ay=BA.newGeometry;BA.setGeometry(Ay);delete BA.transitionGeometry;}BI.onDrawTransitionEnd();}else{A3=A8/BI.transitionDuration;for(BD=0;BD<BE;BD++){BA=Av[BD];A6=BA.transitionGeometry;Ay=BA.getGeometry();AX(Ay,BF);BA.setGeometry(A6);}}}var BH=BI.labelBitmap,Az=A9||N.valarray(AN),A0=Az.some(function(BJ){return BJ===AN.CIRCLE;}),Ax=Az.some(function(BJ){return BJ===AN.HIGHLIGHT;})?BI.layers[AN.HIGHLIGHT]:[];BI.spriteCollection.forEach(function(BK){var BL,BJ;if(BK.type==="Circle"&&BK.hasDrawnLabel){BJ=A0||Ax.some(function(BM){return BM===BK;});if(!BJ){BL=BK.getLabelBoundingBox();BH.set(BL.left,BL.top,BL.right,BL.bottom);}}});var A2=A4.length;if(A4[AN.HIGHLIGHT]!==undefined&&A2>1){if(A2===2){D("WARN: refresh only two layers: highlight and [circle|edge]");}A4=A4.slice();A4.splice(AN.HIGHLIGHT,1);}var A5=BI.layers[AN.HIGHLIGHT];J.forEach(A4,function(BJ){if(BJ){BI.drawLayer(BJ,BJ===A5);}});D("draw done");BI.toBeDrawnLayersIndexes=[];if(!BI._hasDrawnTheFirstFrame){BI._hasDrawnTheFirstFrame=true;AR.endTimer();}},draw:function AD(Av,A7,Az){var Aw,A3,A1,Ax,A6,A5,A4,A0=this;function A2(A8){A5["diff"+A8]=A4[A8]-A5[A8];A5["start"+A8]=A5[A8];}function Ay(A9){if(!A7&&A0.transitionTimer===undefined){if(A0.lastDrawTime!==undefined&&A9-A0.lastDrawTime<A0.frameInterval){D("draw ignored");return ;}}if(A0.transitionTimer&&!A0.transitionStartTime){A0.transitionStartTime=A9;}A0.labelBitmap=A0.addDisposable(new mstrmojo.netviz.Bitmap({left:0,top:0,right:A0.width,bottom:A0.height,scale:4}));var A8=A0.id;A0.drawFrame.call(mstrmojo.all[A8],A9,Aw);A0.toBeDrawnLayersIndexes=[];A0.lastDrawTime=A9;if(A0.transitionTimer){A0.transitionTimer=window.requestAnimationFrame(Ay);}}this.onDrawTransitionEnd();Aw=this.toBeDrawnLayersIndexes;if(typeof Aw==="number"&&this.layers[Aw]){Aw=[Aw];}if(Az){Aw=L(this.layers);}if(!Av){window.requestAnimationFrame(Ay);}else{A3=this.spriteCollection;A1=A3.length;for(Ax=0;Ax<A1;Ax++){A6=A3[Ax];A5=N.clone(A6.oldGeometry);A4=N.clone(A6.getGeometry());AX(A4,A2);A6.newGeometry=A4;A6.transitionGeometry=A5;}this.transitionTimer=window.requestAnimationFrame(Ay);}},onDrawTransitionEnd:function(){if(this.transitionTimer){window.cancelAnimationFrame(this.transitionTimer);delete this.transitionTimer;delete this.transitionStartTime;}},clearHoverHighlight:function(){var Aw=this.spriteCollection,Av=Aw.length,Ay,Ax;for(Ax=0;Ax<Av;Ax++){Ay=Aw[Ax];if(Ay.type==="Edge"){Ay.unHoverHighlight();}}},clearSelection:function(){var Ax=this.selectedSprites,Av=Ax.length,Aw,Ay;for(Aw=0;Aw<Av;Aw++){Ay=Ax[Aw];Ay.selectionState.selected=false;Ay.unHighlight();}this.selectedSprites=[];},addToSelection:function(Aw){var Av=this.selectedSprites;if(Av.indexOf(Aw)===-1){Aw.selectionState.selected=true;Aw.highlight();Av.push(Aw);}},removeFromSelection:function(Ax){var Aw=this.selectedSprites,Av=Aw.indexOf(Ax);if(Av!==-1){Ax.selectionState.selected=false;Ax.unHighlight();Aw.splice(Av,1);}},onclick:function(){},onmousedown:function(Av){Av=Av.e||Av;if(this.eventHasBeenHandled||this.transitionTimer||(this.lassoSelector!==Av.target&&this.canvases.indexOf(Av.target)===-1)){return ;}if(this.dragMode===Ab.select){this.lassoSelectorEnabled=true;}this._isMouseDown=true;this._lastMousePosition={x:Av.pageX,y:Av.pageY};if(this._isEdgeHovered){delete this._isEdgeHovered;this._isEdgeMouseDown=true;}},onmousemove:function(A0){A0=A0.e||A0;if(this.eventHasBeenHandled||this.transitionTimer||!this._isMouseDown){return ;}var Ax=this._lastMousePosition,Az={x:A0.pageX,y:A0.pageY},Aw=Az.x-Ax.x,Av=Az.y-Ax.y;if(!this._isDragged){if(Aw||Av){this._isDragged=true;if(this._isEdgeMouseDown){this._pendingRefresh=true;delete this._isEdgeMouseDown;}}}if(this.dragMode===Ab.pan&&A0.button===0){var Ay=this.sceneInformation.position;Ay.x+=Aw;Ay.y+=Av;this.applyScaleAndPosition();this.draw(false);}this._lastMousePosition=Az;},onmouseup:function(Aw){var Ay=Aw.e||Aw,Az=Ay.srcElement||Ay.target,Av=this.owner,Ax;if(this.eventHasBeenHandled||this.transitionTimer||!this._isMouseDown){return ;}if(!this._isDragged){if(!(Aq(Ay)===2&&this.lassoSelector===Az)){Ax=(this.selectedSprites||[]).filter(this.isClearAllEnabled,this);Ax.forEach(function(A0){if(this.isClearAllEnabled(A0)){this.removeFromSelection(A0);}},this);if(Ax.length>0){Av.doSelection();this.draw(false);}}}delete this._isMouseDown;delete this._lastMousePosition;delete this._isDragged;delete this._isEdgeMouseDown;},oncontextmenu:function AP(Aw){var Ay=Aw.e||Aw,A0=Ay.target||Ay.srcElement,Ax=this.lassoSelector;AZ.stopPropogation(window,Ay);AZ.preventDefault(window,Ay);if(this.eventHasBeenHandled||this.transitionTimer){return ;}if(this.isOnFormattingMode){this.showContextMenu("background",this.observableModel.background,Ay);}else{var Av=this.owner;if(A0===Ax){Av.showSelectionMenu(Ay);}else{if(!AZ.contains(this.scaleBar.domNode,A0,true)){var Az=this;Av.showBlankSpaceMenu(Ay,function(){Az.showContextMenu("background",Az.observableModel.background,Ay);AL.selectPropertyPanel(Az.owner,0);});}}}if(this._isMouseDown){delete this._selectionState;delete this._isMouseDown;delete this._lastMousePosition;delete this._dragged;}},getCircleSpriteItems:function(){var Av=[];J.forEach(this.spriteCollection,function(Aw){if(Aw.type==="Circle"){Av.push({n:Aw.text,id:Aw});}});return Av;},areaSelect:function(Aw,A0){if(isNaN(Aw.x0)||isNaN(Aw.x1)||isNaN(Aw.y0)||isNaN(Aw.y1)){D("Invalid selection area.");return ;}var A2=this.spriteCollection,Av=A2.length,Ay,Ax,Az;if(!A0.ctrlKey){this.clearSelection();}for(Ay=0;Ay<Av;Ay++){Ax=A2[Ay];if(Ax.type==="Circle"){Az=Ax.getGeometry();if((Az.x-Aw.x0)*(Az.x-Aw.x1)<=0&&(Az.y-Aw.y0)*(Az.y-Aw.y1)<=0){this.addToSelection(Ax);}}}var A1=AQ(this.baseCanvas,true);this._bubbleToolbarPos={pageX:Aw.x0+A1.x,pageY:Aw.y0+A1.y};this.draw(false);},enableTransition:function(Av){this.showTransition=true;if(isNaN(Av)){Av=AM;}this.transitionDuration=Av;},disableTransition:function(){this.showTransition=false;delete this.transitionDuration;var Ax=this.spriteCollection,Av=Ax.len,Aw;for(Aw=0;Aw<Av;Aw++){delete Ax[Aw].oldGeometry;delete Ax[Aw].newGeometry;}},getSpriteIndex:function At(Ax){var Av=this.spriteCollection,Aw;for(Aw=0;Av[Aw];Aw++){if(Ax===Av[Aw]){return Aw;}}return null;},createSprite:function(Aw){Aw.stage=this;var Av=null;if(Aw.type==="Circle"){Av=this.addDisposable(new AT(Aw));}if(Aw.type==="Edge"){Av=this.addDisposable(new o(Aw));}return Av;},addSprite:function n(Aw,Av){if(!isNaN(Av)){this.spriteCollection.splice(Av,0,Aw);}else{this.spriteCollection.push(Aw);}},clearSprites:function(){this.spriteCollection=[];},removeSprite:function(Aw,Av){if(isNaN(Av)){Av=this.getInex(Aw);}if(!isNaN(Av)){this.spriteCollection.splice(Av,1);}},attachEventListenerForSprites:function(Aw,Av,Ax){if(!Av.eventHandlers){Av.eventHandlers={};}var Ay=Av.eventHandlers;Ay["on"+Aw]=Ax;},removeEventListenerForSprites:function(Aw,Av){var Ax=Aw.eventHandlers;if(Ax){delete Ax[Av];if(Object.keys(Ax).length===0){delete Aw.eventHandlers;}}},raiseEventForSprites:function(A1){if(this.eventHasBeenHandled){return ;}var A2=A1.name;if(A2){var Ax=[];J.forEach(this.layers,function(A5){var A4=[];Ax.push(A4);J.forEach(A5,function(A6){A4.push(A6);});});var A0=Ax.length,Ay,Aw,Az,A3,Av;for(Ay=A0-1;Ay>=0;Ay--){Az=Ax[Ay];for(Aw=0;Aw<Az.length;Aw++){A3=Az[Aw];Av=A3.eventHandlers;if(Av&&Av["on"+A2]){Av["on"+A2].call(A3,A1);}if(this.eventHasBeenHandled){return ;}}}}},mainRect:null,setScene:function(){function A4(BS,BR,BQ){function BT(BV,BU){return AL.isNearZero(BV.x-BU.x)&&AL.isNearZero(BV.y-BU.y);}var BO=["x","y"].map(function BP(BW){var BU=(BS[BW]-2*BQ[BW]+BR[BW]),BV=AL.isNearZero(BU)?1:(BS[BW]-BQ[BW])/BU;if(BV<0||BV>=1){return BR;}return c(BV,BS,BQ,BR);}).filter(function(BU){return !(BT(BU,BS)||BT(BU,BR));}),BN=BO.length;if(BN===2&&BT.apply(undefined,BO)){BO.pop();BN=1;}if(BN===0){return BR;}else{return BO[0];}}this.sceneInformation={};this.scaleFactor=1;var A9=this.mainRect||{x:0,y:0,w:this.width,h:this.height},Aw,BC,BA,A8=[],A5=null,BH=null,BL=Q.NETWORK_CIRCLE_BORDER_WIDTH,BI=4,BG=Infinity,Az=this.showEdgeDirection,BB=Math.max,A7=Math.min,Ax=Math.ceil,A0=Math.pow,BK=Math.sqrt,BD,Av,BM,BF,A6;Aw=this.spriteCollection||[];J.forEach(Aw,function(BQ){var BU,BT,BS,BO,BN,BR,BP;if(BQ.isExcluded){return ;}BU=BQ.getGeometry();if(BQ.type==="Circle"){BT=BU.s+BL;BS=BU;A8.push(BQ);}else{BT=BB(Ax(BU.s/2),BI);if(Az){A6=BQ.getEndPoint().pos;}else{A6=BQ.to.getGeometry();}BS=A4(BQ.from.getGeometry(),A6,BU);}BO=BS.x-BT;BN=BS.x+BT;BR=BS.y-BT;BP=BS.y+BT;if(!A5){A5={x1:BO,x2:BN,y1:BR,y2:BP};}else{A5.x1=A7(A5.x1,BO);A5.x2=BB(A5.x2,BN);A5.y1=A7(A5.y1,BR);A5.y2=BB(A5.y2,BP);}if(!BH){BH={x1:BS.x,x2:BS.x,y1:BS.y,y2:BS.y};}else{BH.x1=A7(BH.x1,BS.x);BH.x2=BB(BH.x2,BS.x);BH.y1=A7(BH.y1,BS.y);BH.y2=BB(BH.y2,BS.y);}});if(!A5){A5={x1:0,x2:0,y1:0,y2:0};BH={x1:0,x2:0,y1:0,y2:0};}this.sceneInformation.position={x:0,y:0};var A1={left:BH.x1-A5.x1,top:BH.y1-A5.y1,bottom:A5.y2-BH.y2,right:A5.x2-BH.x2},BE,Ay,BJ;if(AL.isNearZero(BH.x2-BH.x1)){BE=0;}else{BE=(A9.w-A1.left-A1.right)/(BH.x2-BH.x1);}if(AL.isNearZero(BH.y2-BH.y1)){Ay=0;}else{Ay=(A9.h-A1.top-A1.bottom)/(BH.y2-BH.y1);}if(BE===0&&Ay!==0){BJ=Ay;}else{if(Ay===0&&BE!==0){BJ=BE;}else{BJ=A7(BE,Ay);}}if(Math.abs(BJ)===Infinity){return ;}var A3=(A9.w-(BH.x2-BH.x1)*BJ-A1.left-A1.right)/2+A1.left,A2=(A9.h-(BH.y2-BH.y1)*BJ-A1.top-A1.bottom)/2+A1.top;J.forEach(Aw,function(BO){var BP=BO.getGeometry(),BN=BP.x,BQ=BP.y;BN-=BH.x1;BN*=BJ;BP.x=BN+A9.x+A3;BQ-=BH.y1;BQ*=BJ;BP.y=BQ+A9.y+A2;BO.setGeometry(BP);});if(this.currentLayout===e.CIRCULAR){this.graphCenter={x:A9.w/2+A9.x,y:A9.h/2+A9.y};}for(BC=0,BD=A8.length;BC<BD;BC++){Av=A8[BC].getGeometry();for(BA=BC+1;BA<BD;BA++){BM=A8[BA].getGeometry();BF=BK(A0(Av.x-BM.x,2)+A0(Av.y-BM.y,2));if(BF>2){BG=A7(BG,BF/(Av.s+BM.s));}}}if(BG<1){J.forEach(Aw,function(BN){BN.setGeometry({s:BN.getGeometry().s*BG});});}},resetScene:function(){if(this.sceneInformation){this.sceneInformation.position={x:0,y:0};}this.setScene();},scale:function(Av){if(!this.sceneInformation){this.sceneInformation={size:{width:this.width,height:this.height},position:{x:0,y:0}};}this.scaleFactor=Av;this.applyScaleAndPosition();this.draw(false);},findForceDirectedGraphCenter:function(Aw){var A1=this.spriteCollection,Ax={x:0,y:0},Ay=0,Az,A0,A6,A5,A4,A2,A3={x:0,y:0},Av={};for(Az=0,A0=A1.length;Az!==A0;Az++){A6=A1[Az];if(A6 instanceof o){A5=A6.from;A4=A6.to;if(A5===Aw&&!Av.hasOwnProperty(A4.id)){A2=A4.position;Ay++;Av[A4.id]=true;}else{if(A4===Aw&&!Av.hasOwnProperty(A5.id)){A2=A5.position;Ay++;Av[A5.id]=true;}else{A2=A3;}}Ax.x+=A2.x;Ax.y+=A2.y;}}Ax.x/=Ay;Ax.y/=Ay;return Ax;},findLinearLayoutGraphCenter:function(Av){var A0=this.spriteCollection,Aw=Av.position,A2=0,Ay,Az,A3,A1,Ax;for(Ay=0,Az=A0.length;Ay!==Az;Ay++){A3=A0[Ay];if(A3 instanceof o){if(A3.from===A3.to){continue;}A1=A3.controlPoint;if(A1.y<Aw.y){A2++;}else{A2--;}}}if(A2>=0){Ax={x:Aw.x,y:0};}else{Ax={x:Aw.x,y:2*Aw.y};}return Ax;},getDataLabelFormats:function(){var Av=this.circleLabelStyle;return{color:g.getCSSColorString(Av.fontColor.fill.value),font:S(Av),"text-decoration":s(Av.fontStyle)};},execFormatHandler:function(){var Av=this.selectedSprites;if(Av&&Av.length>0){r.call(this,this._bubbleToolbarPos);AL.selectPropertyPanel(this.owner,"de");}else{AL.selectPropertyPanel(this.owner,0);}},isClearAllEnabled:function(Av){return this.owner.isClearAllEnabled(Av.unit);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMUtility","mstrmojo.color","mstrmojo.ui.menus.EditorConfig","mstrmojo.ui.menus.ToolbarEditorConfig","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.ui.editors.controls.LineConfigGroup","mstrmojo.ui.editors.controls.FillConfigGroup","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.AdvancedColorPicker");var Z=mstrmojo,I=Z.dom,K=Z.hash,a=Z.array,A=Z.css,i=Z.VisEnum.ControlType,h=mstrmojo.gm,F=mstrmojo.color,U=h.GMUtility,R=Z.VisUtility,j=h.FormatingPropertyTag,e=mstrmojo.models.FormatModel,c=e.ENUM_PROPERTY_NAMES,P=mstrmojo.chart.enums.EnumFontStyle,f=mstrmojo.VisEnum.GMLegendFormatingPropertyTag,G=mstrmojo.VisEnum.NetworkLegendFormattingCategory,V=mstrmojo.ui.editors.controls.AdvancedColorPicker,W={GLOBAL:"glb",FORMATTING:"fmt"},D={FONT_COMP:"FntCmp",FONT_FAMILY:"FntFml",FONT_STYLE:"FntStyle",FONT_SIZE:"FntSz",FONT_COLOR:"FntClr",LINE_COMP:"LnCmp",SHOW:"Shw",COLOR:"Clr",STYLE:"Style",THICKNESS:"Thk"};function N(q,n){var m=this.widget,o=m.domToolbarPH,p=this;m._lastOpened=null;o.innerHTML="";document.body.appendChild(o);A.toggleClass(o,mstrApp.getThemeClassName(),true);this.configureLegendPopup(n,o);m.toolEditor=n.newInstance({unrender:function(){}});m.toolEditorClosefn=function(r){var t=r.target,s=m.toolEditor.domNode;if(!I.contains(s,t,true,s)&&!R.isHostedPopupNode(t,"class",true,document.body)){p.hideToolbar();}};I.attachEvent(document.body,"mousedown",m.toolEditorClosefn,true);m.openPopup(this.widget.toolEditor);A.toggleClass(document.body,"hasToolbarPopup",true);}function L(n,m){var o;if(m===W.GLOBAL){o=this.readGlobalProperty(n);}else{if(m===W.FORMATTING){o=this.widget.getPropertiesOfFormatable();}}if(n.slice(-3)===D.COLOR){if(n!==j.COLOR_SQUARE_COLOR||m!==W.GLOBAL){o=U.decodeColor(o);}}return o;}function Q(n,m){var o=this;if(m===W.GLOBAL){return function(q){var p=L.call(o,n,W.GLOBAL);if(n===j.COLOR_SQUARE_COLOR){p=p.color;}if(!K.equals(q,p)){if(n.indexOf(D.COLOR)!==-1){q=U.encodeColor(q);}o.writeGlobalProperty(n,q);}};}return function(r,p){var q=L.call(o,n,W.FORMATTING);if(r!==q){if(n.indexOf(D.COLOR)!==-1){r=F.encodeColor(r);}o.widget.writeFormatableProperties(n,r,p);}};}function O(n,m){n=n||[];m=m||"";a.forEach(n,function(o){o.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",cssClass:m,children:n};}function d(n,o){n=n||[];var m=new mstrmojo.Box({children:n,cssText:o});return m;}function B(q,r,m){var p="white-space: nowrap; width: 50px;";if(q===mstrmojo.desc(3905,"Background")||q===mstrmojo.desc(6242,"Color")){p="white-space: nowrap;";}else{if(q===mstrmojo.desc(2885,"Fill")){p="white-space: nowrap; margin-right: 9px;";}}var n=new mstrmojo.Label({text:q}),o=d(n,p);return O([o,r],m);}function b(n,o,m){var p=this;n=n||{};if(n.propNames===undefined){n.propNames=o;}n.onGroupValueChange=function(q,s,r){if(s!==r&&s!==undefined){(Q.call(p,q,m))(s,r);}};return n;}function S(o,n,m){var p=this;a.forEach(n,function(q){var r=L.call(p,q,m);if(r!==undefined){o.setChildValue(q,r);}});}function C(m,p,o,n){n=b.call(this,n,p,o);K.copy({width:"140px",height:"22px",colorPickerHostWithin:true},n);var q=new mstrmojo.ui.editors.controls.FillConfigGroup(n);if(q){q.iniChildrenComp(p);S.call(this,q,p,o);}if(typeof m==="string"){return B(m,q,(n||[]).rowContainerCSSClass);}return q;}function Y(o,n,m){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolBoxBackgroundFill",children:[C.call(this,mstrmojo.desc(2885,"Fill"),o,n,K.copy({rowContainerCSSClass:"mstrmojo-ui-rowContainer"},m))]}]});}function k(q,o,s,r,n){var p=L.call(this,s,r),t=this;var m=new mstrmojo.ui.editors.controls.ColorPickerButton({showGradient:!!n,isHostedWithin:true,width:"40px",selectedValue:p,showNoFill:false,postselectedValueChange:function(u){(Q.call(t,s,r))(u.value,u.valueWas);}});if(q){m.alias=q;}if(typeof o==="string"){return B(o,m);}return m;}function l(n){var m;if(n.listenToUpdateColorMap instanceof Function){m=n.listenToUpdateColorMap(function(){n.raiseEvent({name:"colorByColorChange",type:"invalidateCache"});if(m&&n.detachUpdateColorMapListener instanceof Function){n.detachUpdateColorMapListener(m);}});}}function g(o,n){var m=L.call(this,o,n),p=this;return new mstrmojo.ui.menus.ToolbarEditorConfig({cssClass:"cbsquare-colorpicker",contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker({showAutomatic:!m.isDefaultColor,color:m.color,colorChanged:function(q){q=(this.showAutomatic&&q===V.VAL_AUTOMATIC)?"default":q;l(p.widget);(Q.call(p,o,n))(q,m.color);p.hideToolbar();},colorCanceled:function(){p.hideToolbar();}})]});}function T(s,n){var m={},r=L.call(this,n+D.FONT_STYLE,W.GLOBAL),p=L.call(this,n+D.FONT_COLOR,W.GLOBAL),o=L.call(this,n+D.FONT_FAMILY,W.GLOBAL),q=L.call(this,n+D.FONT_SIZE,W.GLOBAL);if(r!==undefined){m[c.FONT_WEIGHT]=(!isNaN(r)&&((r&P.FS_BOLD)>0));m[c.FONT_STYLE]=(!isNaN(r)&&((r&P.FS_ITALIC)>0));m[c.UNDERLINE]=(!isNaN(r)&&((r&P.FS_UNDERLINE)>0));m[c.LINE_THROUGH]=(!isNaN(r)&&((r&P.FS_STRIKETHROUGH)>0));}if(p!==undefined){m[c.COLOR]=p;}if(q!==undefined){m[c.FONT_SIZE]=q;}if(o!==undefined){m[c.FONT_FAMILY]=o;}s.setFormatSource(m);}function H(n,m){var o=null;if(m.indexOf(D.FONT_FAMILY)!==-1){o=n.fontFamily;}else{if(m.indexOf(D.FONT_STYLE)!==-1){o=n.fontStyle;}else{if(m.indexOf(D.FONT_SIZE)!==-1){o=n.fontSize;}else{if(m.indexOf(D.FONT_COLOR)!==-1){o=n.fontColor;}}}}return o;}function M(p,o,m){var n={bold:P.FS_BOLD,italic:P.FS_ITALIC,underline:P.FS_UNDERLINE,strikeout:P.FS_STRIKETHROUGH},q=this;o.forEach(function(r){var s=H(p,r);if(s){s.propName=r;if(r.indexOf(D.FONT_STYLE)!==-1){s.postselectionChange=function(t){var x=t.added,y=s.items[(x&&x[0]!==undefined)?x[0]:t.removed[0]],w=!!x,u=L.call(q,r,m),z=(u===undefined?0:u);if(w){z=z|n[y.css];}else{z=z&(~n[y.css]);}s.parent.raiseFormatValueChange(r,z,u);};}else{if(r.indexOf(D.FONT_FAMILY)!==-1){s.postselectedIndexChange=function(t){var x=t.value,w=t.valueWas;if(x!==w){var u=s.items;s.parent.raiseFormatValueChange(r,u[x].id,u[w]&&u[w].id);}};}else{if(r.indexOf(D.FONT_SIZE)!==-1){s.postselectedValueChange=function(t){var w=parseInt(t.value,10)+"pt",u=parseInt(t.valueWas,10)+"pt";if(w!==u){s.parent.parent.raiseFormatValueChange(r,w,u);}};}else{s.postselectedValueChange=function(t){s.parent.parent.raiseFormatValueChange(r,t.value,t.valueWas);};}}}}});}function X(n,q,p,o){var t=this;o=o||{};if(o.propNames===undefined){o.propNames=q;}if(o.onGroupValueChange===undefined){o.onGroupValueChange=function(u,x,w){if(x!==w&&x!==undefined){(Q.call(t,u,W.GLOBAL))(x,w);}};}var m={cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,width:"381px",height:"22px"};o=K.copy(m,o);var s=new mstrmojo.ui.editors.controls.CharacterGroup(o),r=H(s,j.LEGEND_FONT_COLOR);r.showNoFill=false;M.call(this,s,q,p);T.call(this,s,n);return s;}function J(q,p){var u=p.firstChild,z=u?u.offsetWidth:0,n=u?u.offsetHeight:0,r=document.body.offsetWidth,y=document.body.offsetHeight,s=10,t=5,x=5;if(u){u.style.left="0";u.style.right="auto";u.style.top="0";u.style.bottom="auto";}var w={w:z,h:0};var o=n>0;if(o){w.h=n;}else{return false;}if(o){p.style.left=q.x+"px";p.style.top=q.y-n-s/2+"px";}if(q.x+w.w>r){p.style.left=q.x-z+"px";}if(o){var m=0;if(q.y-n-s/2<t){m=t;p.style.top=m+"px";}else{if(q.y+s/2>y){m=Math.max(y-s-n,t);p.style.top=m+"px";}}}}function E(m,p,o,n){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[X.call(this,m,p,o,n)]}]});}mstrmojo._FormateVisLegend=mstrmojo.provide("mstrmojo._FormateVisLegend",{_mixinName:"mstrmojo._FormateVisLegend",widget:null,readGlobalProperty:undefined,writeGlobalProperty:undefined,configureLegendPopup:undefined,init:function(m){this.widget=null;if(this._super){this._super(m);}if(this.widget&&!this.widget.domToolbarPH){var n;n=document.createElement("div");n.setAttribute("class","gm-menu-placeholder");this.widget.domToolbarPH=n;}},handleRMCOnLegend:function(y){var r=y.getTarget(),s=y.e,w={x:s.pageX,y:s.pageY},u=r.getAttribute("type"),n,t,p,q=this,o=this.widget;y.cancel();y.preventDefault();if(mstrApp.isAppStatePresentation()||!mstrApp.allowWebDashboardDesign()){return ;}var x,m=function(z){switch(z){case i.LGD_COLORBOX_CTN:case i.LGD_COLORBOX:if(z===i.LGD_COLORBOX){r=r.parentNode;}t=r.firstChild.identity;if(t&&t.comb){this.widget.colorSqureIdentity=t;this.selectColorBox(r,this.fmtMode);n=g.call(this,j.COLOR_SQUARE_COLOR,W.GLOBAL);w=this.adjustColorPickerPos(r);if(!w.alignLeft){p=n.ENUM_CORNERS;n.setAlignment(p.BOTTOM_LEFT,p.TOP_RIGHT);}}break;case i.LGD_TITLE:case i.LGD_TEXT:this.selectText(true);var AA=[j.LEGEND_FONT_SIZE,j.LEGEND_FONT_FAMILY,j.LEGEND_FONT_STYLE,j.LEGEND_FONT_COLOR];n=E.call(this,"lgd",AA,W.GLOBAL);x="lgd";break;default:this.selectLegendBody();var AB=[j.LEGEND_BG_COLOR,j.LEGEND_BG_FILL_TRANSPARENCY];n=Y.call(this,AB,W.GLOBAL);x="lgd";break;}if(n){N.call(this,w,n);if(!!x){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");o.parent.selectVIUnit();var AC=o.edtModel._targetPulldown;if(AC){AC.selectItemByField("v",x);}}}};m.call(this,u);J.call(this,w,this.widget.domToolbarPH);},hideToolbar:function(){var n=this.widget,o=n.domToolbarPH,q=o.firstChild,m=o.parentNode;if(q){o.removeChild(q);}if(m){m.removeChild(o);}var p=n.toolEditor;if(p){p.unrender=function(){p._super();};p.destroy();p.unrender=function(){};delete n.toolEditor;A.toggleClass(document.body,"hasToolbarPopup",false);A.toggleClass(o,mstrApp.getThemeClassName(),false);}if(n.toolEditorClosefn){I.detachEvent(document.body,"mousedown",n.toolEditorClosefn,true);delete n.toolEditorClosefn;}},highlightText:function(m){throw new Error("subclass need to implement highlightText function");}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.VisEnum","mstrmojo.VisLegend","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.gm.GMIdentities","mstrmojo.gm.GMUtility","mstrmojo.array","mstrmojo.string","mstrmojo.hash","mstrmojo._FormateVisLegend","mstrmojo.ui._HasScroller");var Ae=mstrmojo,Ab=Ae.gm,z=Ae.dom,Aa=Ae.css,R=Ae.hash,AM=Ae.VisUtility,Z=Ab.GMUtility,O=mstrmojo.array,X=mstrmojo.string,e=Ab.ColorSquareIdentity,C=Ae.VisEnum.ControlType,i=Ab.EnumLegendSlot,AK=Ab.EnumDockPosition,m=Ab.EnumLegendSlot,AE=Ab.EnumIdentityType,AC=Ab.EnumShape,AW=Ae.VisEnum.GMLegendDataType,I=mstrmojo.desc(13966,"Size by:"),u="px",E=1.35,Y=0.75,V=5,J=20,k=J,AD=5,A=5,w=16,d=15,G=16,AH=20,q=15,Ac=1,y="setAttribute",j=3,g=2,P=8,p=15,AR=14,s=1,Q=2,f=4,Af=8,Ad=16,K=10,AT=3,AI=50,AO=-3,r=5,AP="gm-legend-lock-icon",AL=mstrmojo.desc(14442,"This metric has its axis scale set to custom min and max values"),N="http://www.w3.org/2000/svg",t="\u2026",M=/[ \-]/;function AQ(Al,An,Ag,Ao){if(!Al){return ;}var Ai,Ar,Aj,Aq,Am=Al.style,As=An===AK.TOP,Ah=An===AK.BOTTOM,Ap=An===AK.LEFT,Ak=An===AK.RIGHT;if(As||Ah){Ai=Ag;Ar=1;Aj=-1;Aq=AO;if(Ah){Aq+=Ao;}}else{if(Ap||Ak){Ai=1;Ar=Ao;Aq=-1;Aj=AO;if(Ak){Aj+=Ag;}}}Am.cssText="left:"+Aj+u+";top:"+Aq+u+";width:"+Ai+u+";height:"+Ar+u+";";}function H(Ah){var Ag=String(Ah);return Ag.indexOf(" ")>=0||Ag.indexOf("-")>=0;}function W(Ai,Ah,Aj){var Ag=typeof Ai==="string"?Z.restoreSpecialChars(Ai):Ai;return AM.measureTextWidth(Ag,Ah,Aj);}function AG(Ak,Aj,Ah,Ag){var Ai=W(Aj,Ah,K);Ak.setAttribute("measureWidth",Ai);if(Ai>Ag){Ai=Ag;}else{Ak.style.overflow="visible";}Ak.setAttribute("displayWidth",Ai);Ak.style.width=Ai+u;return Ai;}function B(Ah){var Ag;if(Ah.textContent&&typeof (Ah.textContent)!==undefined){Ag=Ah.textContent;}else{Ag=Ah.innerText;}return Ag;}function a(Ai){var Ah=Ai.getAttribute("measureWidth"),Ag=Ai.getAttribute("displayWidth");if(!Ah){Ai[y]("title","");}Ah=parseFloat(Ah,10);Ag=parseFloat(Ag,10);if((Ah-Ag)>0.1){Ai[y]("title",B(Ai));}else{Ai[y]("title","");}}function AJ(Ak,Ag,Ah,Aj){var Ai=document.createElement("div");Ai[y]("class","gm-legend-underLine");Ai.style.width=Aj-K+u;Ai.style.left=Ag+5+u;Ai.style.top=Ah+u;Ak.appendChild(Ai);}function AV(Aj,Ag,Ah){var Ai=document.createElement("div");Ai[y]("class","gm-legend-underLine-anchorPoint");Ai.style.left=Ag+u;Ai.style.top=Ah-3+u;Aj.appendChild(Ai);}function AF(Aj,Ag,Ah,Ai){AJ(Aj,Ag,Ah,Ai);AV(Aj,Ag,Ah);}function l(Ai,At,Ap,An,Ar){var Ao,Aj,Aq,Ag,As=Z.restoreSpecialChars(Ai.innerHTML),Am=As.length,Ak=0,Ah=Am,Al=false;if(Ai.scrollHeight>1.5*G){Ao=W(Ai.innerHTML,At,K);Aj=Ao-Ap+K;if(Aj>Ar){while((Ah-Ak)>1){Aq=(Ak+Ah)>>1;Ag=As.substring(0,Aq)+t;Ao=W(Ag,At,K);Aj=Ao-Ap+K;if(Aj>Ar){Ah=Aq;}else{Ak=Aq;}}Ai.innerHTML=X.encodeHtmlString(As.substring(0,Ak)+t,true);Ai[y]("title",As);Al=true;Ao=W(Ai.innerHTML,At,K);Aj=Ao-Ap+K;}AJ(Ai,0,An+G,(Aj<Ar)?Aj:Ar);}if(Ap>Ar){Ai[y]("title",As);}else{if(!Al){Ai[y]("title","");}}}function x(Ag,Ap,Al,Ah,Ao,Aq){var Ai,Ak,Am,An,Aj=document.createElement("div");Aj[y]("class","gm-legend-textcell");Aj[y]("type",C.LGD_TEXT);Aj.style.lineHeight=d+u;if(Ao){An=AG(Aj,Ap,Aq,Ao);}if(Ah&s){Ai=(AH+AR)/2+Al*AH;Am=w;}else{Ai=(q+AR)/2+Al*q;if(Ah&Af){if(Ah&Ad){Am=0;}else{Am=p;}}else{if(Ah&f){Am=P;}else{Am=0;}}}Ak=An||p+K;Aj.innerHTML=Ap;Aj.identity={objType:AE.LEGEND_TEXT};AF(Ag,Am,Ai,Ak);this.textDivs.push(Aj);Ag.appendChild(Aj);}function AY(Ag,Aj){var Ah,Al,Ak,Ai=0;if(Ag){Ak=Ag.elements;for(Ah=0,Al=Ak.length;Ah<Al;Ah++){Ai=Math.max(Ai,W(Ak[Ah].label,Aj,K));}Ai+=w+A*2+AT;}return Ai;}function U(Aj,Ai){var Am,Ag,Al,Ak=Aj.items,Ah=0;if(!Ak){return 0;}Am=Ak.length;Al=Aj.custMetrics;for(Ag=0;Ag<Am;Ag++){if(Al&&Al.indexOf(Ak[Ag])!==-1){Ah=Math.max(Ah,W(Ak[Ag],Ai,K)+P);}else{Ah=Math.max(Ah,W(Ak[Ag],Ai,K));}}return Ah;}function AN(Aj,Ai){var Ag,Al,Ak,Ah=0;if(Aj){Ak=Aj.elements;Al=Ak.length;if(Aj.caseFlag===1){Ah=U(Aj,Ai);}else{if(Aj.caseFlag===0){for(Ag=0;Ag<Al;Ag++){Ah=Math.max(Ah,W("Max: "+Ak[Ag].v,Ai,K));}Ah+=q*j;Ah=Math.max(Ah,U(Aj,Ai));}else{if(Aj.caseFlag===2){for(Ag=0;Ag<Al;Ag++){Ah=Math.max(Ah,W(Ak[Ag].v,Ai,K));}Ah+=q*Al+p;Ah=Math.max(Ah,U(Aj,Ai));}else{if(Aj.caseFlag===3){for(Ag=0;Ag<Al;Ag++){Ah=Math.max(Ah,W(Ak[Ag].v,Ai,K));}Ah+=q*r;}}}}Ah=Math.max(Ah,W(I,Ai,K));Ah+=A*3;}return Ah;}function c(Ar,Aj,Av){if(!Ar||!Ar.length||Ar.length<1){return 0;}var Ak,Ah,Au,Ag,An,Aq,Am,Ap,Ao,Ai,Al,At=k+2*Ac,As=At;for(Ak=0;Ak<Ar.length;Ak++){Am=Ar[Ak];if(Am.dataType===AW.COLOR_BY){Ap=Am.dataObj;if(Ap){Ai=2*AD+G;Au=Z.removeExtraSpace(Ap.item);Aq=W(Au,Av,K);if((Aq+2*A>Aj-2*Ac)&&H(Au)){Ai+=G;}Ag=Ap.elements;Ah=Ag.length;Ai+=A;Ai+=g;At+=Ai+AH*Ah;As+=Ai+(Ah>0?AH:0);}}else{if(Am.dataType===AW.SIZE_BY){Ao=Am.dataObj;if(Ao){Al=2*AD+G;Au=Z.removeExtraSpace(Ao.item);Aq=W(Au,Av,K);if((Aq+2*A>Aj-2*Ac)&&H(Au)){Al+=G;}An=Ao.caseFlag;if(An===1){Ah=0;}else{if(An===0){Ah=2;}else{if(Ao.caseFlag===2||An===3){Ah=Ao.elements.length;}}}Ah+=(Ao.items&&Ao.items.length)||0;Al+=q*Ah;Al+=A;Al+=g;At+=Al;As+=Al;}}}}return{height:At,minHeight:As};}function AZ(Ag,Ah){var Aj=0,Ai=0;O.forEach(Ag||[],function(Ak){var Al;if(Ak.dataType===AW.COLOR_BY){Al=AY(Ak.dataObj,Ah);if(Al>Aj){Aj=Al;}}else{if(Ak.dataType===AW.SIZE_BY){Al=AN(Ak.dataObj,Ah);if(Al>Ai){Ai=Al;}}}});return Math.max(Aj,Ai)+2*Ac;}function h(Ah,An,Al,Ak){var Ai=c(Ah,An,Ak),Ag=Ai.height,Am=Al-V*2,Aj={};Aj.autoCollapse=Ai.minHeight>Am;Aj.minHeight=Ai.minHeight;Aj.width=An;Aj.height=Math.min(Ag,Am);if(Ag>Am){Aj.cutBy=Ag-Am;}return Aj;}function F(Ah,Ai){var Aj=Ah.decodedColor||Ah.color,Ag;if(Aj.c1){Ag=Aa.buildGradient(Aj.or,Aj.c1,Aj.c2);Ai.style[Aa.convertCssToCamelCase(Ag.n)]=Ag.v;}else{Ai.style.backgroundColor=Aj;}if(Ah.image){Ai.style.backgroundImage=Ah.image;}Ai.identity=new e({objType:AE.COLOR_SQUARE,parentIdentity:this.identity,token:Ah.token,decodedColor:Ah.decodedColor,encodedColor:Ah.encodedColor,isDefaultColor:Ah.isDefaultColor});}function AS(){var Av,As,Aq,Ag,Ar,Ax,Ah,Ao,Am,Aj,Az=document,Ay=this.triBtn,Au=this.closeBtn,Al=this.cbContainer,Ai=this.sb1Container,At=this.sb2Container,An=this.cbTableContainer,Ak=null,Aw=this.height-k-A-2*Ac,Ap=this.width-2*A-2*Ac;Ay[y]("class","gm-legend-tri-button-collapsed");if(this.autoCollapse){Ay[y]("title",mstrmojo.desc(13682,"There is not enough space to display the legend"));}else{Ay[y]("title",mstrmojo.desc(13683,"Maximize Legend"));}Au.style.display="none";this.splitter.style.display="none";this.domNode.style.overflow="hidden";for(Av=0;this.dataArray&&Av<this.dataArray.length;Av++){Ag=this.dataArray[Av];if(Ag.dataType===AW.COLOR_BY){Ak=Ag.dataObj;break;}}Al.style.display=Ak?"block":"none";Ai.style.display="none";At.style.display="none";if(Ak){Aq=Ak.elements;As=Aq.length;Ar=this.cbTitle;Ar.style.display="none";Al.style.top=k+u;Al.style.width=Ap+u;An.style.top="0px";Ax=this.cbTable;Ax.innerHTML="";for(Av=0;Av<As;Av++){Ah=Az.createElement("tr");Ao=Az.createElement("td");Aj=Az.createElement("div");Am=Az.createElement("div");Aj[y]("class","gm-legend-colorbox-ctn-div");Aj[y]("type",C.LGD_COLORBOX_CTN);Aj[y]("title",Aq[Av].label);Am[y]("class","gm-legend-colorbox-div");Am[y]("type",C.LGD_COLORBOX);F.call(this,Aq[Av],Am);Ah[y]("class","gm-legend-tr");Ah.style.height=AH+u;Ao[y]("class","gm-legend-colorbox");Aj.appendChild(Am);Ao.appendChild(Aj);Ah.appendChild(Ao);Ax.appendChild(Ah);if(Ax.offsetHeight+AH>Aw){break;}}Ax.style.top="0px";Ax.style.marginLeft="0px";An.style.top=A+u;An.style.height=Ax.offsetHeight+u;}Al.style.height=Aw+u;}function n(Ai,Ah,Ak,Ag){var Aj=document.createElementNS(N,"circle");Aj.setAttribute("cx",Ah);Aj.setAttribute("cy",Ak);Aj.setAttribute("r",Ag);Aj.setAttribute("class","gm-legend-sizeby-circle");Ai.appendChild(Aj);}function AB(Ai,Aj,Am,Ah,Al,An,Ak){var Ag=document.createElementNS(N,"line");Ag.setAttribute("x1",Aj);Ag.setAttribute("y1",Am);Ag.setAttribute("x2",Ah);Ag.setAttribute("y2",Al);Ag.style.strokeWidth=An;if(Ak){Ag.setAttribute("class",Ak);}Ai.appendChild(Ag);}function AX(Ah,Av){var Au,Ai,Ak,Al,Aj,Ag,At,Am,Aw,An,Ar=Math.PI,Ao=Av.elements,Ap=Ao.length,Aq=Ap*q,As=Ah.getContext("2d"),Ax={LINE_COLOR:"#b0b0b0",MIN_WIDTH:1,MAX_WIDTH:10},Ay=AM.getPropertyByPath(this,"widget.model.data.visName")||AM.getPropertyByPath(this,"widget.model.data.vis.vn");switch(Ay){case"GraphMatrixVisualizationStyle":if(this.shapeType===AC.SQUARE||this.shapeType===AC.TICK||this.shapeType===AC.LINE||this.shapeType===AC.BAR||this.shapeType===AC.AREA||this.shapeType===AC.RECTANGLE){An="rectangle";}else{An="circle";}break;case"VIHeatMapVisualizationStyle":An="rectangle";break;default:An="circle";break;}switch(Av.caseFlag){case 0:As.save();if(mstrApp.getThemeClassName().indexOf("dark")>=0){As.strokeStyle="rgba(116, 116, 117, 0.7)";As.fillStyle="rgba(116, 116, 117, 0.7)";}else{As.strokeStyle="rgba(188, 188, 189, 0.7)";As.fillStyle="rgba(188, 188, 189, 0.7)";}Aq=q*j;Aw=Math.floor(q*0.75+0.5);Ai=Math.floor(Aw/3.5+0.5);if(An==="circle"){Al=Aw+1;Aj=q;As.beginPath();As.arc(Al,Aj,Aw,0,2*Ar,false);As.fill();As.stroke();Al=2*Al+2*Ai;Aj=Math.floor(0.53*q+0.5);As.beginPath();As.arc(Al,Aj,Ai,0,2*Ar,false);As.fill();As.stroke();}else{Al=1;Aj=q-Aw;As.beginPath();As.fillRect(Al,Aj,2*Aw,2*Aw);Al=2*Aw+2+Ai;Aj=Math.floor(0.53*q-Ai+0.5);As.beginPath();As.fillRect(Al,Aj,2*Ai,2*Ai);}As.translate(0.5,0.5);As.lineWidth=1;As.strokeStyle="#9C9C9C";Al=2*Aw+3*Ai+3;Aj=Math.floor(0.53*q+0.5);As.beginPath();As.moveTo(Al,Aj);As.lineTo(Aq,Aj);As.stroke();Al=2*Aw+2;Aj=Math.floor(1.53*q-Ai+0.5);As.beginPath();As.moveTo(Al,Aj);As.lineTo(Al+Ai,Aj+Ai);As.lineTo(Aq,Aj+Ai);As.stroke();As.restore();break;case 1:break;case 2:Ak=parseInt(Ao[0].diameter,10);Ak=Math.min(Ak,Aq);As.fillStyle="#ADADAC";As.strokeStyle="#ADADAC";if(An==="circle"){Al=Aq>>1;Aj=Al;As.arc(Al,Aj,Ak>>1,0,2*Ar,false);As.fill();As.stroke();}else{Al=(Aq-Ak)>>1;Aj=Al;As.rect(Al,Aj,Ak,Ak);As.fill();As.stroke();}break;case 3:Ag=Ax.MIN_WIDTH;At=(Ap===1?0:(Ax.MAX_WIDTH-Ax.MIN_WIDTH)/(Ap-1));Aq=Ah.width;Am=q;Al=0;Aj=q/2;As.strokeStyle=Ax.LINE_COLOR;for(Au=0;Au<Ap;Au++){As.lineWidth=Ag;As.beginPath();As.moveTo(Al,Aj);As.lineTo(Aq-Al,Aj);As.stroke();Aj+=Am;Ag+=At;}break;default:break;}}function AU(Ah,Ap){var An=1,Ag,Al=1.5*G,Ao=Ah.innerHTML,Am=Z.restoreSpecialChars(Ao),Ai=Am.split(M),Aq,Aj;var Ak=function(Ar){Aj=Am[Ar];return Aj!==undefined?Aj:"";};if(Ah.scrollHeight>Al){if(!Ai[0]){return 0;}Ag=Ai[0]+Ak(Ai[0].length);while(Ai[An]!==undefined){Aq=Ag+Ai[An];Aq+=Ak(Aq.length);Ah.innerHTML=Z.replaceSpecialChars(Aq);if(Ah.scrollHeight>Al){break;}Ag=Aq;An++;}Ah.innerHTML=Ao;}else{Ag=Am;}return W(Ag,Ap,K);}function b(Aw,Au,Av,Aq){var At,Ai,Al,Ak,Ap,As,Ao=Au.elements,Ar=Ao.length,An=[],Ax=document,Ag=Ax.createDocumentFragment(),Aj=false,Am=this.styles,Ah=Av;switch(Aq){case 0:if(Ar>0){An.push({v:"Min: "+Ao[Ar-1].v});An.push({v:"Max: "+Ao[0].v});Ar=2;}break;case 1:Ao=Au.items;O.forEach(Ao,function(Ay){An.push({v:Ay});});break;case 3:An=Ao;break;default:An=Ao;Aj=true;break;}Ar=An.length;for(At=0;At<Ar;At++){Ai=Ax.createElement("tr");Ai[y]("class","gm-legend-tr2");Ai.style.height=q+u;if(Aj){Al=Ax.createElement("td");x.call(this,Al,An[At].sign,At,Q|Af|Ad);Al[y]("class","gm-legend-sign");Ai.appendChild(Al);Ah-=p;}Ak=Ax.createElement("td");Ak[y]("class","gm-legend-desc");if(Au.custMetrics&&Au.custMetrics.indexOf(An[At].v)!==-1){x.call(this,Ak,An[At].v,At,Q|f,Ah-P,Am);As=parseInt(Ak.lastChild.style.width,10);Ap=Ax.createElement("div");Ap.setAttribute("class",AP);Ap.setAttribute("title",AL);Ak.appendChild(Ap);Ap.style.top=(q-8)/2+At*q+u;Ak.lastChild.style.marginLeft=As+u;}else{if(Aj){x.call(this,Ak,An[At].v,At,Q|Af,Ah,Am);}else{x.call(this,Ak,An[At].v,At,Q,Ah,Am);}}Ai.appendChild(Ak);Ag.appendChild(Ai);}Aw.appendChild(Ag);}function T(){var Ai="."+AP,Ag=this.domLegend.querySelectorAll(Ai),Ah;O.forEach(Ag,function(Aj){Ah=Aj.parentNode;if(Ah){Ah.removeChild(Aj);}});}function S(){var A9,A1,BE=0,BF,Aw,A3,Ax,Aj,A7,BA,An,BD,A8,Ag=this.width-2*Ac,Ar=Ag-2*A,Al=document,Ai=this.triBtn,A2=this.closeBtn,A0=this.cbContainer,As=this.cbTableContainer,BG=this.sb1Container,Am=this.sb2Container,Aq,Ao,Ak,Ap,A5,Au,A4=this.cutBy,Az=k,BB=0,Ay=this.styles,A6,BC,Av=(G+AR)/2,Ah,At;Ai[y]("class","gm-legend-tri-button");Ai[y]("title",mstrmojo.desc(13684,"Minimize Legend"));A2.style.display="block";A2[y]("title",mstrmojo.desc(12002,"Hide Legend"));this.updateSplitter();T.call(this);this.domNode.style.overflow="visible";A0.style.display="none";BG.style.display="none";Am.style.display="none";for(A1=0;this.dataArray&&A1<this.dataArray.length;A1++){Ao=this.dataArray[A1];A5=null;Au=null;if(Ao.dataType===AW.COLOR_BY){A5=Ao.dataObj;if(A5){A0.style.display="block";Ax=Z.removeExtraSpace(A5.item);Aj=A5.elements;A9=Aj.length;A0.style.top=Az+u;A0.style.width=Ar+u;BD=0;if(BB===0){Aa.addClass(this.sepLine1,"toggleHide");BB++;}BF=this.cbTitle;BF.style.display="block";AG(BF,Ax,Ay,Ar);BF.innerHTML=X.encodeHtmlString(Ax,true);BD+=BF.offsetHeight+2*AD;Ah=AU(BF,Ay);l(BF,Ay,Ah,Av,Ar);AF(BF,0,Av,(Ah<Ar)?Ah:Ar);Aw=this.cbTable;Aw.style.display="block";Aw.style.width=(Ar-AT)+u;Aw.style.marginLeft=AT+u;Aw.innerHTML="";Aw.appendChild(this.fillColorByTable(A5,0));A7=AH*A9+1;As.style.top=BD+u;Aw.style.display="table";BD+=A7+A;if(A4){BD-=A4;A7-=A4;}A0.style.height=BD+u;As.style.height=A7+u;Az+=BD+g;}}else{if(Ao.dataType===AW.SIZE_BY){Au=Ao.dataObj;if(Au){BE++;if(BE===1){Ak=BG;Ap=this.sb1Title;A3=this.sb1MetricNamesTable;Aw=this.sb1DataTable;Aq=this.sb1Canvas;}else{Ak=Am;Ap=this.sb2Title;A3=this.sb2MetricNamesTable;Aw=this.sb2DataTable;Aq=this.sb2Canvas;}Ak.style.display="block";Ax=Z.removeExtraSpace(Au.item);Aj=Au.elements;A9=Aj.length;Ak.style.top=Az+u;Ak.style.width=Ar+u;BD=0;if(BB===0){Aa.addClass(this.sepLine2,"toggleHide");BB++;}if(Au.caseFlag===0){BA=j*q;An=2*q;}else{if(Au.caseFlag===3){BA=r*q;An=A9*q;}else{BA=A9*q;An=BA;}}BF=Ap;BF.innerHTML=X.encodeHtmlString(Ax,true);BC=Au.custMetrics&&Au.custMetrics.indexOf(Ax)!==-1;if(BC){At=Ar-P;}else{At=Ar;}AG(BF,Ax,Ay,At);if(BC){A6=Al.createElement("div");A6.setAttribute("class",AP);A6.setAttribute("title",AL);Ak.appendChild(A6);A6.style.top=(BF.offsetHeight-8)/2+AD+g+u;A6.style.left=BF.offsetWidth+"px";}Ah=AU(BF,Ay);l(BF,Ay,Ah,Av,At);AF(BF,0,Av,(Ah<At)?Ah:At);BD+=BF.offsetHeight+2*AD;A8=Ar;A3.innerHTML="";if(Au.items&&Au.items.length>0){A3.style.display="block";b.call(this,A3,Au,A8,1);}else{A3.style.display="none";}A3.style.top=BD+u;A3.style.left="0"+u;A3.style.width=A8+u;BD+=A3.offsetHeight;if(BA>0){A8-=BA+A;}Aw.innerHTML="";if(Au.elements&&Au.elements.length>0){Aw.style.display="block";b.call(this,Aw,Au,A8,Au.caseFlag);}else{Aw.style.display="none";}Aq.style.position="absolute";Aq.style.top=BD+u;Aq.style.marginLeft=A+u;Aw.style.top=BD+u;Aw.style.left=(BA+A)+u;Aw.style.width=A8+u;BD+=Aw.offsetHeight+A;Ak.style.height=BD+u;Aw.style.display="table";Aq.width=BA;Aq.height=An;AX.call(this,Aq,Au);Az+=BD+g;}}}}}function o(){var Ag,Ah=this.textDivs,Ai=Ah.length;for(Ag=0;Ag<Ai;Ag++){a(Ah[Ag]);}}mstrmojo.gm.GMLegend=mstrmojo.declare(mstrmojo.VisLegend,[mstrmojo._FormateVisLegend,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.gm.GMLegend",cssClass:"gm-legend",dropZoneHighlightCss:"gm-legend-slot",dockedPositions:[{pos:m.LEFT_TOP},{pos:m.LEFT_MIDDLE},{pos:m.LEFT_BOTTOM},{pos:m.RIGHT_TOP},{pos:m.RIGHT_MIDDLE},{pos:m.RIGHT_BOTTOM}],dockPos:AK.LEFT,GMW:0,GMH:0,isMinimal:false,shapeType:undefined,legendMarkup:'<div class="gm-legend-tri-button"></div><div class="gm-legend-close-button"></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><div class="gm-legend-table-container"><table class="gm-legend-table"></table></div></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-resizer-v" draggable="false"></div><div class="gm-legend-resizeRect"></div>',init:function AA(Ah){this.styles={};this.cutBy=null;this.dataArray=null;this.textDivs=[];var Ai=Ah.placeholder,Ag=Ai.style;if(Ai){this.cssClass=Ai.getAttribute("class");if(!this.cssClass){this.cssClass="";}if(Ah.hasOwnProperty("width")===false){Ah.width=(Ag&&Ag.width)||Ai.clientWidth;}if(Ah.hasOwnProperty("height")===false){Ah.height=(Ag&&Ag.height)||Ai.clientHeight;}if(Ah.hasOwnProperty("left")===false){Ah.left=Ai.offsetLeft;}if(Ah.hasOwnProperty("top")===false){Ah.top=Ai.offsetTop;}}this._super(Ah);},setupScrollNodes:function L(){this.scrollNode=this.cbTableContainer;},getSplitterDockPos:function(){return(this.currDockedPositionIdx<3)?AK.RIGHT:AK.LEFT;},updateAlignClass:function(){var Ak=this.getDockedPosition(),Al=Ak&&Ak.pos,Ai=(Al===m.RIGHT_MIDDLE||Al===m.RIGHT_TOP||Al===m.RIGHT_BOTTOM||Al===m.RIGHT),Ag=this.domLegend,Ah=this.domNode,Aj=this.resizeRect;if(Ai){Aa.removeClass(Ag,"gm-align-left");Aa.addClass(Ag,"gm-align-right");Aa.toggleClass(Ag,"gm-legend-alignRight",true);Aa.toggleClass(Ag,"gm-legend-alignLeft",false);Aa.toggleClass(Ah,"gm-legend-alignRight",true);Aa.toggleClass(Ah,"gm-legend-alignLeft",false);Aa.toggleClass(Aj,"gm-legend-alignRight",true);Aa.toggleClass(Aj,"gm-legend-alignLeft",false);}else{Aa.removeClass(Ag,"gm-align-right");Aa.addClass(Ag,"gm-align-left");Aa.toggleClass(Ag,"gm-legend-alignRight",false);Aa.toggleClass(Ag,"gm-legend-alignLeft",true);Aa.toggleClass(Ah,"gm-legend-alignRight",false);Aa.toggleClass(Ah,"gm-legend-alignLeft",true);Aa.toggleClass(Aj,"gm-legend-alignRight",false);Aa.toggleClass(Aj,"gm-legend-alignLeft",true);}},postBuildRendering:function(){this._super();var As=this.styles,Au=this.domNode,Aj=this.domLegend.childNodes,An=Aj[2],Al=Aj[3],At=Aj[4],Ax={objType:AE.LEGEND};this.addSlots({triBtn:Aj[0],closeBtn:Aj[1],cbContainer:Aj[2],sepLine1:An.firstChild,cbTitle:An.childNodes[1],cbTableContainer:An.childNodes[2],cbTable:An.childNodes[2].firstChild,sb1Container:Al,sepLine2:Al.firstChild,sb1Title:Al.childNodes[1],sb1MetricNamesTable:Al.childNodes[2],sb1DataTable:Al.childNodes[3],sb1Canvas:Al.childNodes[4],sb2Container:At,sepLine3:At.firstChild,sb2Title:At.childNodes[1],sb2MetricNamesTable:Al.childNodes[2],sb2DataTable:At.childNodes[3],sb2Canvas:At.childNodes[4],splitter:Aj[5],resizeRect:Aj[6]});Ab.GMLegend.applyHTML5Props(As);this.bgColor=As.background||As.backgroundColor||"transparent";AM.applyStyle2Legend(As,Au,this.domLegend);var Am=this.getSplitterDockPos(),Aw=this.width-2*A-2*Ac,Ao=this.cbTitle,Ah=Ao.style,Ai=this.sb1Title,Ak=this.sb2Title,Av=Ai.style,Ag=Ak.style,Ar=this.sepLine1,Aq=this.sepLine2,Ap=this.sepLine3;Ar.style.width=Aw+u;Aq.style.width=Aw+u;Ap.style.width=Aw+u;Ah.lineHeight=G+u;Av.lineHeight=G+u;Ag.lineHeight=G+u;Ah.maxHeight=2*G+u;Av.maxHeight=2*G+u;Ag.maxHeight=2*G+u;Ao.identity={objType:AE.LEGEND_TEXT,parentIdentity:Ax};Ai.identity={objType:AE.LEGEND_TEXT,parentIdentity:Ax};Ak.identity={objType:AE.LEGEND_TEXT,parentIdentity:Ax};this.dockPos=Am;this.identity=Au.identity=Ax;this.updateAlignClass();},feedData:function(Ag,Ah){this.dataArray=Ag;this.isMinimal=Ah;this.textDivs=[];Ab.GMLegend.applyHTML5Props(this.styles);this.autoCollapseLegend();if(Ah||this.autoCollapse){AS.call(this);this.draggable=false;}else{S.call(this);this.draggable=true;}o.call(this);this.updateScrollbars();},autoCollapseLegend:function(){this.autoCollapse=this.minHeight&&(this.minHeight>(this.GMH-V*2));},updateColorBySquare:function(Ai){var Aj,Ak,Ah,Ag;if(Ai){Ag=this.domNode.querySelectorAll(".gm-legend-colorbox-div");Aj=Ai.elements;Ak=Math.min(Aj.length,Ag.length);for(Ah=0;Ah<Ak;Ah++){F.call(this,Aj[Ah],Ag[Ah]);}}},updateContainerSize:function(Ag,Ah){this.GMW=Ag;this.GMH=Ah;this.calculateDockedPositions(Ag,Ah);},updateAfterResize:function(){Ab.GMLegend.applyHTML5Props(this.styles);var Al=0,Ak=this.width,Am=this.cbContainer,Ao=this.sb1Container,Ai=this.sb2Container,Aj=this.sepLine1,Ah=this.sepLine2,Ag=this.sepLine3,An=Ak-2*A-2*Ac;O.forEach(this.dataArray||[],function(Ap){if(Ap.dataType===AW.COLOR_BY){if(Ap.dataObj){if(Am){Am.style.width=An+u;}}}else{if(Ap.dataType===AW.SIZE_BY){if(Ap.dataObj){Al++;if(Al===1&&Ao){Ao.style.width=An+u;}if(Al===2&&Ai){Ai.style.width=An+u;}}}}});if(Aj){Aj.style.width=An+u;}if(Ah){Ah.style.width=An+u;}if(Ag){Ag.style.width=An+u;}this.domLegend.style.width=this.width+u;this.domLegend.style.height=this.height+u;},updateStyle:function(Ag){this.styles=Ag;this.bgColor=Ag.background||Ag.backgroundColor||"transparent";AM.applyStyle2Legend(Ag,this.domNode,this.domLegend);},updateTitleLineHeight:function(){var Ah=this.cbTitle,Ak=Ah.style,Ai=this.sb1Title,Ag=this.sb2Title,Al=Ai.style,Aj=Ag.style;Ab.GMLegend.applyHTML5Props(this.styles);Ak.lineHeight=G+u;Al.lineHeight=G+u;Aj.lineHeight=G+u;Ak.maxHeight=2*G+u;Al.maxHeight=2*G+u;Aj.maxHeight=2*G+u;},getSplitterPosition:function(Ai){var Ah=Ai.src.startPos+Ai.tgt.pos.x-Ai.src.pos.x,Ak=Ai.src.posInfo,Aj=Ak&&Ak.min,Ag=Ak&&Ak.max;if(Aj!==undefined){Ah=Math.max(Ah,Aj);}if(Ag!==undefined){Ah=Math.min(Ah,Ag);}return Ah;},positionResizeRect:function(Ag,Ah){var Aj=Ag.src.posInfo.dockPosition===AK.LEFT,Ak=Ah-AO,Al=Aj?Ak:0,Ai=Aj?this.width-Ak:Ak;this.resizeRect.style.left=(Al-1)+u;this.resizeRect.style.width=(Ai-2)+u;},updateLegendSlot:function(Aj,Ag){var Ai=this.getDockedPosition(),Ah=Ai&&Ai.pos;if(Ah!==Aj){this.currDockedPositionIdx=Ag;this.dockPos=this.getSplitterDockPos();this.updateDropZonePosition();this.updateAlignClass();this.updateSplitter();this.widget.onLegendDropZoneChange(this.getDockedPosition());}},ondragstart:function(Ag){var Ai=Ag.src.e.target,Ah=Ag.src.data;if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(false);}if(Ai===this.splitter){Ag.src.startPos=Ai.offsetLeft;Ag.src.posInfo=this.getSplitterInfo(Ai);this.positionResizeRect(Ag,Ag.src.startPos);Aa.addClass(this.resizeRect,"resizing");}else{this.cbTableScrollTop=this.cbTableContainer.scrollTop;this._super(Ag);if(!Ah||!Ah.isScrollBar){this.clearSelectedTargets();Aa.toggleClass(this.domNode,"gm-legend-hover",false);Aa.toggleClass(this.domLegend,"active",false);this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background=this.bgColor;this.isDragging=true;}}},ondragmove:function D(Ag){var Ai=Ag.src.e.target,Ah;if(Ai===this.splitter){Ah=this.getSplitterPosition(Ag);Ai.style.left=Ah+u;this.positionResizeRect(Ag,Ah);}else{this._super(Ag);}},ondragend:function(Ag){var Ai=Ag.src.e.target;if(Ai===this.splitter){Aa.removeClass(this.resizeRect,"resizing");this.splitterMoved(this.getSplitterPosition(Ag)-Ag.src.startPos,Ag.src.posInfo);}else{this._super(Ag);var Ah=Ag.src.data;if(!Ah||!Ah.isScrollBar){this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background="transparent";this.isDragging=false;}delete this.cbTableScrollTop;}if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},onscroll:function(){var Ah,Al,Ak=this.scrollNode.scrollTop,Aj,Ai,Ag;if(this.prevScrpllTop===Ak){return ;}Al=(this.dataArray&&this.dataArray.length)||0;for(Ah=0;Ah<Al;Ah++){Ai=this.dataArray[Ah];if(Ai.dataType===AW.COLOR_BY){Ag=Ai.dataObj;break;}}if(Ag){Aj=this.cbTable;Aj.innerHTML="";Aj.appendChild(this.fillColorByTable(Ag,Math.floor(Ak/AH)));this.prevScrpllTop=Ak;this.scrollNode.scrollTop=Ak;this._super();}},fillColorByTable:function(Aw,Am){var Ax,Au,Ai,Al,Ak,An,Ao,Ap=this.styles,Ag,As=this.cutBy,Aq=this.width-2*Ac-2*A,Ar,Aj,Ah,Ay,At;Ar=Aw.elements;Au=Ar.length;Ag=document.createDocumentFragment();Aj=Aq-w-AT;Ah=0;Ay=AH*Au;At=Am*AH;function Av(Az){Ai=document.createElement("tr");Al=document.createElement("td");Ai.style.height=Az+u;Al[y]("class","gm-legend-colorbox");Ai.appendChild(Al);Ag.appendChild(Ai);}if(Am>0){Av(At);}for(Ax=Am;Ax<Au;Ax++){Ai=document.createElement("tr");Al=document.createElement("td");Ak=document.createElement("td");An=document.createElement("div");Ao=document.createElement("div");An[y]("class","gm-legend-colorbox-ctn-div");An[y]("type",C.LGD_COLORBOX_CTN);Ao[y]("class","gm-legend-colorbox-div");Ao[y]("type",C.LGD_COLORBOX);F.call(this,Ar[Ax],Ao);Ai[y]("class","gm-legend-tr");Ai.style.height=AH+u;Al[y]("class","gm-legend-colorbox");Ak[y]("class","gm-legend-desc");x.call(this,Ak,Ar[Ax].label,Ax,s,Aj,Ap);An.appendChild(Ao);Al.appendChild(An);Ai.appendChild(Al);Ai.appendChild(Ak);Ag.appendChild(Ai);Ah+=AH;if(As&&(As+Ah-AH)>Ay){Av(Ay-Ah-At);break;}}return Ag;},calculateDockedPositions:function(Ah,Ak){var Aj,Am=this.getWidth(),Ag=this.getHeight(),Ai=this.dockedPositions,Al=function(An){switch(An.pos){case i.LEFT_TOP:An.x=0;An.y=V;break;case i.LEFT_MIDDLE:An.x=0;An.y=Math.max(V,(Ak-Ag)>>1);break;case i.LEFT_BOTTOM:An.x=0;An.y=Math.max(0,Ak-Ag-V);break;case i.RIGHT_TOP:An.x=Ah-Am;An.y=V;break;case i.RIGHT_MIDDLE:An.x=Ah-Am;An.y=Math.max(V,(Ak-Ag)>>1);break;case i.RIGHT_BOTTOM:An.x=Ah-Am;An.y=Math.max(0,Ak-Ag-V);break;}};for(Aj=0;Aj<Ai.length;Aj++){Al(Ai[Aj]);}this.updateDropZonePosition();},updateDropZonePosition:function(){var Ag=this.getDockedPosition(),Ah=this.dropZoneNode.style;Ah.left=Ag.x+u;Ah.top=Ag.y+u;},updateDropZoneNode:function(Ag){this._super(Ag);this.dockPos=this.getSplitterDockPos();this.updateSplitter();},onmouseover:function(Ag){var Ai=this.domLegend,Am=Ag.getTarget(),Aj=Am.getAttribute("type"),Al=this.widget,Ah;if(this.isDragging){return ;}var Ak=R.copy(this.styles);Ak.opacity+=0.4;AM.applyStyles2DomNode(this.domNode,Ak);if(z.contains(Ai,Am,true)){Aa.addClass(Ai,"active");}if(Aj===C.LGD_COLORBOX){Am=Am.parentNode;Aj=Am.getAttribute("type");}if(Aj===C.LGD_COLORBOX_CTN){Ah=Am.firstChild.identity;if(!Ah||!Ah.comb){return ;}Aa.toggleClass(Am,"hover-colorsquare",true);return ;}if(Al.formattingMode){switch(Aj){case C.LGD_TITLE:case C.LGD_TEXT:Aa.toggleClass(Ai,"hover-txt",true);break;default:Aa.toggleClass(this.domNode,"gm-legend-hover",true);break;}}},onmouseout:function(Ah){var Aj=this.domLegend,Ag=Ah.e.toElement||Ah.e.relatedTarget,Am=Ah.getTarget(),Ak=Am.getAttribute("type"),Al=this.widget,Ai;AM.applyStyles2DomNode(this.domNode,this.styles);if(!z.contains(Aj,Ag,true)){Aa.removeClass(Aj,"active");}if(Ak===C.LGD_COLORBOX){Am=Am.parentNode;Ak=Am.getAttribute("type");}if(Ak===C.LGD_COLORBOX_CTN){Ai=Am.firstChild.identity;if(!Ai||!Ai.comb){return ;}Aa.toggleClass(Am,"hover-colorsquare",false);return ;}if(Al.formattingMode||Al.isOnFormattingMode){switch(Ak){case C.LGD_COLORBOX_CTN:case C.LGD_COLORBOX:break;case C.LGD_TITLE:case C.LGD_TEXT:Aa.toggleClass(Aj,"hover-txt",false);break;default:Aa.toggleClass(this.domNode,"gm-legend-hover",false);break;}}},onclick:function(Ag){var Aj=Ag.getTarget(),Ah=Aj.getAttribute("type"),Ai=this.widget;if(Aj===this.triBtn){if(!this.autoCollapse){this.raiseEvent({name:"gm-legend-clicked",action:(this.isMinimal?"restore":"minimize")});}}else{if(Aj===this.closeBtn){this.raiseEvent({name:"gm-legend-clicked",action:"close"});}else{if(Ah===C.LGD_COLORBOX){Aj=Aj.parentNode;Ah=Aj.getAttribute("type");}if(Ai.formattingMode||Ai.isOnFormattingMode){if(Ah===C.LGD_COLORBOX_CTN){this.selectColorBox(Aj,true);}else{if(Ah===C.LGD_TEXT||Ah===C.LGD_TITLE){this.selectText();}else{this.selectLegendBody();}}}else{this.clearSelectedColorBox();}}}z.stopPropogation(null,Ag.e);},attachClearEvent:function(){if(this.clearSelectTargetfn){return ;}var Ah=this,Ag=this.domLegend;this.clearSelectTargetfn=function(Al){var Ak=Al.target,Ai=Ah.widget.toolEditor,Aj;if(!z.contains(Ag,Ak,true,Ag)){if(Ai){Aj=Ai.domNode;if(!z.contains(Aj,Ak,true,Aj)){Ah.clearSelectedTargets();}}else{Ah.clearSelectedTargets();}}};z.attachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);},clearSelectedColorBox:function(){var Ag=this.selectedColorBox;if(Ag){Aa.toggleClass(Ag,"select",false);Aa.toggleClass(Ag,"selectfmt",false);this.selectedColorBox=undefined;}},clearSelectedText:function(){Aa.removeClass(this.domNode,"select-txt");},clearSelectedLegendBody:function(){Aa.removeClass(this.domNode,"gm-legend-select");},clearSelectedTargets:function(){this.clearSelectedColorBox();this.clearSelectedText();this.clearSelectedLegendBody();if(this.clearSelectTargetfn){z.detachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);delete this.clearSelectTargetfn;}},selectColorBox:function(Ai,Ah){var Ag=Ai.firstChild.identity;if(!Ag||!Ag.comb){return ;}this.clearSelectedText();this.clearSelectedLegendBody();if(this.selectedColorBox!==Ai){this.clearSelectedColorBox();this.selectedColorBox=Ai;if(Ah){Aa.toggleClass(Ai,"selectfmt",true);}else{Aa.toggleClass(Ai,"select",true);}this.attachClearEvent();}},selectText:function(){this.clearSelectedColorBox();this.clearSelectedLegendBody();Aa.addClass(this.domNode,"select-txt");this.attachClearEvent();},selectLegendBody:function(){this.clearSelectedColorBox();this.clearSelectedText();Aa.addClass(this.domNode,"gm-legend-select");this.attachClearEvent();},adjustColorPickerPos:function(Ag){var Aj=z.position(Ag),Ah=0,Ai={};if(this.currDockedPositionIdx<3){Ai.x=Aj.x+Aj.w+Ah;Ai.alignLeft=true;}else{Ai.x=Aj.x-Ah;Ai.alignLeft=false;}Ai.y=Aj.y+Aj.h+Ah;return Ai;},getSplitterInfo:function(Al){if(!Al){return{};}var Ah=this.dockPos,Ak={},Aj=this.width,Ag=AI,Ai=Math.floor(this.GMW/3);Ak.dockPosition=Ah;if(Ah===AK.LEFT){Ak.min=Math.min(Aj-Ai,0);Ak.max=Math.max(Aj-Ag,0);}else{if(Ah===AK.RIGHT){Ak.min=Ag;Ak.max=Ai;}}Ak.min+=AO;Ak.max+=AO;return Ak;},splitterMoved:function(Ag,Ah){if(Ag===0){return ;}if(Ah.dockPosition===AK.LEFT){Ag=-Ag;}this.raiseEvent({name:"gm-legend-resized",position:Ag});this.updateSplitter();if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},updateSplitter:function(){AQ(this.splitter,this.dockPos,this.width,this.height);this.resizeRect.style.height=this.height-2+u;}});Ab.GMLegend.applyHTML5Props=function(Ai){var Aj=parseInt(Ai.fontSize,10)||8,Ah;if(Ai.fontSize.indexOf("px")>=0){Aj=Math.floor(Aj*Y+0.5);}Ah=Math.floor(Aj/Y*E+0.5);G=Math.max(Aj,8)+9;AR=Math.floor(Aj/Y+0.5);d=Math.max(Ah,15);AH=Math.max(Ah,20)+2;q=Math.max(Ah,14)+2;Ac=parseInt(Ai.borderWidth,10)||1;var Ag=parseInt(Ai.tbHeight,10);k=isNaN(Ag)?J:Ag;};Ab.GMLegend.getLegendSize4MinMode=function(Ah,Ai){var Ak,Aj,Ag=k+2*Ac;if(Ah){Aj=Ah.elements;Ak=Aj.length;Ag+=AH*Ak;Ag+=2*A;}Ag=Math.min(Ag,Ai-V*2);return{width:w+5+7+2*Ac,height:Ag};};Ab.GMLegend.getLegendSize=function(Au,Aj,Ag,Am,Aw,An){var Ao,Ah,Av,Al,Ak=Am-V*2,As=0,Ai=0,Ar={},Aq,Ap,At;if(!Au||!Au.length||Au.length<1){return{};}if(Aj!==undefined){if(!An){An=Math.floor(AZ(Au,Aw)*Aj);}Al=Math.min(An,Math.floor(Ag/3));Al=Math.max(Al,50);return h(Au,Al,Am,Aw);}Al=Math.min(Math.floor(0.2*Ag),300);for(Ao=0;Ao<Au.length;Ao++){Ap=Au[Ao];if(Ap.dataType===AW.COLOR_BY){Aq=AY(Ap.dataObj,Aw);if(Aq>As){As=Aq;}}else{if(Ap.dataType===AW.SIZE_BY){Aq=AN(Ap.dataObj,Aw);if(Aq>Ai){Ai=Aq;}}}}Ah=Math.max(As,Ai)+2*Ac;Ar.width=Math.min(Ah,Al);Ar.scale=Ar.width/Ah;At=c(Au,Ar.width,Aw);Av=At.height;Ar.autoCollapse=At.minHeight>Ak;Ar.minHeight=At.minHeight;Ar.height=Math.min(Av,Ak);if(Av>Ak){Ar.cutBy=Av-Ak;}return Ar;};}());(function(){if(!window.env){window.env={};}var h=window.env;h.isDebugging=false;var w=h.isDebugging;function I(Ab){if(w){AF.visPrint(Ab);}}mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.hash","mstrmojo.color","mstrmojo.dom","mstrmojo.Base","mstrmojo.Container","mstrmojo.Label","mstrmojo.VisBase","mstrmojo.ui.Pulldown","mstrmojo.VisMenuList","mstrmojo._VizSelectionHelper","mstrmojo._LoadsScript","mstrmojo.VisUtility","mstrmojo.VisEnum","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi._MonitorsAppState","mstrmojo.chart.common.Utility","mstrmojo.vi.ui._IsDropTarget","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.util.color");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","_HasMenuPopup","EditorConfig");mstrmojo.requiresClsP("mstrmojo.gm","GMLegend","GMUtility","EnumLegendSlot","_SupportDndAsBlackBox");mstrmojo.requiresClsP("mstrmojo.netviz","_SupportNetworkBrushesAndHighlights","VisNetworkStage","ObservableModel","PropertyParser","_ForceDirectedLayout","_CircularLayout","_LinearLayout");mstrmojo.requiresClsP("mstrmojo.vi.ui.rw","_HasVisSelections","selectors._IsMultiUnitControl","selectors._BrushesAndHighlights","_XtabDE");var AS={lgdBgFillClr:[15461355,1710618],lgdBgFillStyle:[0,0],lgdBgFillEff:[1,1],lgdBgFillTrans:[0,100],lgdFntSz:["8pt","8pt"],lgdFntFml:["Arial","Arial"],lgdFntStyle:[0,0],lgdFntClr:[6710886,16777215],lgdBdrShw:[false,false],lgdBdrClr:[11579568,5855577],lgdBdrThk:["1px","1px"],lgdBdrLnStyle:[0,0],lm:[0,0],lwr:[undefined,undefined]};function AH(Ab){var Ac={};mstrmojo.hash.keyarray(AS).forEach(function(Ad){Ac[Ad]=AS[Ad][Ab];});return Ac;}var c=mstrmojo,AR=c.dom,AF=c.VisUtility,AX=c.num,Q=c.array,T=c.hash,AM=c.netviz.ObservableModel,y=c.util.color,AY=c.gm,S=AY.GMLegend,e=5,m=AY.EnumLegendSlot,AT=c.VisEnum.GMLegendDataType,G=c.chart.enums.EnumFontStyle,AU=mstrmojo.VisEnum.GMLegendFormatingPropertyTag,W=c.VisEnum,AP=W.LegendPropertyTag,AI=W.EnumLegendMode,AL=AY.GMUtility,AE=W.NETWORK_AGGREGATION_METHOD,AC=W.NETWORK_PROPERTIES,k=W.NETWORK_LAYOUT,A=mstrmojo.vi.viz.EnumDSSDropZones,Z=mstrmojo.chart.model.enums.EnumDSSObjectType,b=W.NETWORK_MAX_NODE_SIZE_TYPE,z=W.NETWORK_MIN_NODE_SIZE_TYPE;var V=24,s=24,R=76,O=28;var p=[{pos:m.LEFT_TOP},{pos:m.LEFT_MIDDLE},{pos:m.LEFT_BOTTOM},{pos:m.RIGHT_TOP},{pos:m.RIGHT_MIDDLE},{pos:m.RIGHT_BOTTOM}];var AN=0.5;var Aa=W.SERVER_JSON_ERROR_TYPE;var H=[k.CIRCULAR,k.LINEAR,k.FORCE_DIRECTED];var M=50;var AO=4;var X=0.2;var i={};i[b.AUTOMATIC]={"size-by":0.9,"no-size-by":0.08};i[b.MANUAL]={"size-by":0.5,"no-size-by":0.16};var E=["click","contextmenu","mouseup"];function AG(Ai,Af){function Ak(As){var Aq=Ah.getDropZone();var Ar={from:A.FromItem,to:A.ToItem};var At;Object.keys(Ar).some(function(Au){var Av=Au+".TemplateUnit.0.id";if(AF.getPropertyByPath(Aq,Av)===As){At=Ar[Au];return true;}return false;});return At;}var Ah=this,Am={act:"updateTemplate",keyContext:Ah.k,actions:[]},Ac=Am.actions,Ap=[AF.pick(Ai,["did","t"])];var Ad=Af.drillFromUnit.id;var Ae=Ak(Ad);if(Ae===undefined){return Am;}var Al={id:Ae},Aj=Ah.zonesModel,Ag=Aj.getZoneModelByZoneId(Ae),Ao=Ag.items||[],An;var Ab=AF.findInArray(Ao,function(Aq){return Aq.did===Ad;});if(Ab!==-1){An=Ao[Ab];}if(An){Ac.push(Aj.getRemoveDropZoneUnitAction(Al,An));Array.prototype.push.apply(Ac,Aj.getAddDropZoneUnitsActions(Al,Ap,An.idx));}return Am;}function D(){var Ab=this.propInfo.layoutMode,Ac=H[Ab];if(Ac===k.LINEAR){this.inputLinearIcon.checked=true;}else{if(Ac===k.CIRCULAR){this.inputCircularIcon.checked=true;}else{if(Ac===k.FORCE_DIRECTED){this.inputForceDirectedIcon.checked=true;}}}}function q(Ad){var Ab,Ac=p.length;for(Ab=0;Ab<Ac;Ab++){if(Ad===p[Ab].pos){return Ab;}}return -1;}function L(Ab,Ac){if(isNaN(Ab)){return"rgba(0,0,0,1)";}Ab=parseInt(Ab,10);if(isNaN(Ac)){Ac=1;}return y.getCSSColorString(Ab,Ac);}function AW(Ab){var Ac=0;Q.forEach(Ab,function(Ae){var Ad=parseFloat(Ae);if(!isNaN(Ad)){Ac+=Ad;}});return Ac;}var j={COUNT:"Count of",SUM:"Sum of",AVERAGE:"Average of",MIN:"Min of",MAX:"Max of"};var C={};C[j.COUNT]=function(Ab){return Ab.length;};C[j.SUM]=AW;C[j.AVERAGE]=function(Ac){var Ab=Ac.length;return(Ab>0?AW(Ac)/Ab:NaN);};C[j.MIN]=function(Ad){var Ab=Ad.length,Af,Ae,Ac;if(Ab<1){return NaN;}Af=Ad[0];for(Ae=1;Ae<Ab;Ae++){Ac=Ad[Ae];if(Af>Ac){Af=Ac;}}return Af;};C[j.MAX]=function(Ae){var Ac=Ae.length,Ab,Af,Ad;if(Ac<1){return NaN;}Ab=Ae[0];for(Af=1;Af<Ac;Af++){Ad=Ae[Af];if(Ab<Ad){Ab=Ad;}}return Ab;};function AV(Ag){if(!this.range||!this.sizeRange){I("No value range or size range available, cannot calculate size.");return 0;}var Ac=this.range,Ae=this.sizeRange,Ab=Math.max(Ac.max,Ac.min*Ae.max/Ae.min);var Af=Ab-Ac.min||Infinity;var Ad=(Ag-Ac.min)/Af*(Ae.max-Ae.min)+Ae.min;if(isNaN(Ad)){I("something wrong in linear interpolation");Ad=0;}return Ad;}function d(){var Ab=this.stage;if(Ab){if(Ab.parent!==undefined){this.removeChildren(Ab);}Ab.destroy();delete this.stage;}}var AZ=0;var AQ=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.netviz.VisNetwork.Node",init:function(Ab){this.adjacence=[];this.edges=[];this.properties={};this.range={};this.attribute={};this.attributeElements=[];this.aggregationName=0;this.aggregationMethod=null;this.itemSizeMetricName=null;this.size=0;this.style=null;this._super(Ab);this.id="x"+(++AZ);},getAttributeName:function(){return this.hasSelfLoop?"Name":this.attribute&&this.attribute.name;},getName:function g(){var Ab="";Q.forEach(this.attributeElements||[],function(Ac){Ab+=(Ac.name+" ");});return Ab.slice(0,Ab.length-1);},getFormNames:function(){var Ab=[];Q.forEach(this.attribute.forms,function(Ac){Ab.push(Ac.name);});return Ab;},getFormValues:function(){var Ab=[];Q.forEach(this.attributeElements,function(Ac){Ab.push(Ac.name);});return Ab;},setAggregationMethod:function(){var Ab=j.SUM;this.aggregationMethodName=(this.properties&&this.properties.nodeSizeAggregation)||Ab;if(!AE.hasOwnProperty(this.aggregationMethodName)){this.aggregationMethodName=Ab;}this.aggregationMethod=C[this.aggregationMethodName];},getAggregatedValue:function(){if(!this.aggregationMethod){this.setAggregationMethod();}var Ad=this.edges,Ac=[],Ae,Ab;this.aggregationName=this.aggregationMethodName+" "+(this.itemSizeMetricName||"");if(this.itemSizeMetricName!==null){for(Ae=0,Ab=Ad.length;Ae<Ab;Ae++){var Af=Ad[Ae];if(Af&&Af.itemSizeValue&&!Af.isExcluded&&!isNaN(Af.itemSizeValue)){Ac.push(Af.itemSizeValue);}}return this.aggregationMethod(Ac);}return 0;},getSize:function(){if(isNaN(this.aggregatedValue)){this.aggregatedValue=this.getAggregatedValue();}return this.valueToSize(this.aggregatedValue);},valueToSize:function(Ai){var Ac=this.getNodeSizeRange();var Ag=this.range;var Ad=Ac.min,Ah=Ac.max,Af=Ag.min,Ak=Ag.max,Ab=Ac.area;var Aj,Ae;if(Af===Ak){Aj=Ah;}else{Ae=(Ai-Af)/(Ak-Af);if(Ab){Ae=Math.sqrt(Ae);}Aj=Ad+(Ah-Ad)*Ae;}return Aj;},getNodeSizeRange:function(){var Ae=this.properties;var Ag=this.range;var Ad=Ae.maxNodeSize;var Ah=Ae.minNodeSize;var Ak=Ag.max,Af=Ag.min,Al=false,Ai=M,Ac=AO;var Aj,Ab;if(this.isMetricSizeBy){switch(Ah.type){case z.PROPORTIONAL:Aj=Ad.ratio*Ai;if(Ak===0){Ab=Ac;}else{Ab=Aj*Math.sqrt(Af/Ak);}Al=true;break;case z.FULL_RANGE:Aj=Ad.ratio*Ai;Ab=Ac;break;case z.ADJUSTED_RANGE:Aj=Ad.ratio*Ai;Ab=Aj*Ah.ratio;break;default:Aj=Ad.ratio*Ai;Ab=Ac;break;}}else{Aj=Ai*Ad.ratio;Ab=Aj;}if(Aj<Ac){Aj=Ac;}if(Aj>Ai){Aj=Ai;}if(Ab<Ac){Ab=Ac;}return{min:Ab,max:Aj,area:Al};},updateValues:function(){var Ab=this.getAggregatedValue();if(!isNaN(Ab)){if(this.itemSizeMetricName!==undefined&&this.itemSizeMetricName!==null&&this.properties.minNodeSize.type===z.PROPORTIONAL){if(Ab<0&&Math.abs(Ab)<this.range.min){this.range.minNegtive=true;}if(Ab<0&&Math.abs(Ab)>this.range.max){this.range.maxNegtive=true;}Ab=Math.abs(Ab);}this.aggregatedValue=Ab;this.range.min=Math.min(this.range.min,Ab);this.range.max=Math.max(this.range.max,Ab);}},updateStyles:function(){this.size=this.getSize();},update:function(){this.updateValues();this.updateStyles();},exclude:function(){this.isExcluded=true;this.sprite.isExcluded=true;var Aj=this.edges,Af=Aj.length,Ad=this.adjacence,Ab=Ad.length,Ak;for(Ak=0;Ak<Af;Ak++){var Al=Aj[Ak];Al.isExcluded=true;Al.sprite.isExcluded=true;}for(Ak=0;Ak<Ab;Ak++){var Ag=Ad[Ak],Ae=0,Ah=Ag.edges,Ac=Ah.length,Ai;for(Ai=0;Ai<Ac;Ai++){if(!Ah[Ai].isExcluded){Ae++;}}if(Ae===0){Ag.isExcluded=true;Ag.sprite.isExcluded=true;}Ag.update();}},format:function(Ad){if(this.edges&&this.edges.length){var Ac=this.edges[0];var Ab;if(this.aggregationMethodName===j.COUNT){Ab=null;}else{if(Ac&&Ac.values[Ac.indexes.nodeSizeMIndex]){Ab=Ac.values[Ac.indexes.nodeSizeMIndex].formatString;}else{Ab=null;}}return AX.formatByMask(Ab,Ad);}return Ad.toString();},getActionInfo:function(){var Ac=[],Ab=this;Q.forEach(Ab.attributeElements,function(Ad){Ac.push({n:Ab.attribute.name,tid:Ab.attribute.id,v:Ad.name,eid:Ad.id});});return Ac;}});var J=[13376797,16734244,16749895,16762209,6672939];J.MISSING=5066061;J.FIRST_PALETTE_COLOR=2062260;var n=mstrmojo.declare(mstrmojo.Base,[],{scriptClass:"mstrmojo.netviz.VisNetwork.Edge",sizeRange:{min:1,max:16},valueToWidth:AV,init:function(Ab){this.from=null;this.to=null;this.values=[];this.indexes={};this.properties={};this.range={};this.colorValueRange={};this.sizeValue=0;this.colorValue=0;this.itemSizeValue=0;this.width=0;this.color=0;if(this._super){this._super(Ab);}},update:function(){this.updateValues();this.updateStyles();},updateValues:function(){if(!this.values){return ;}var Ab=this.values[this.indexes.edgeColorMIndex],Ac=this.values[this.indexes.edgeSizeMIndex],Ad=this.values[this.indexes.nodeSizeMIndex];this.colorValue=Ab?parseFloat(Ab.value):"missing";this.sizeValue=Ac?parseFloat(Ac.value):"missing";this.itemSizeValue=Ad?parseFloat(Ad.value):"missing";if(!isNaN(this.sizeValue)){this.range.min=Math.min(this.sizeValue,this.range.min);this.range.max=Math.max(this.sizeValue,this.range.max);}if(!isNaN(this.colorValue)){this.colorValueRange.min=Math.min(this.colorValue,this.colorValueRange.min);this.colorValueRange.max=Math.max(this.colorValue,this.colorValueRange.max);}},updateStyles:function(){this.width=this.valueToWidth(this.sizeValue);},format:function(Ad,Ac){var Ab=(this.values[Ac]&&this.values[Ac].formatString)||null;return AX.formatByMask(Ab,Ad);}});function K(Ah,Ad){var Aj=mstrmojo.netviz.PropertyParser,Ac=Aj.BooleanProperty,Ai=Aj.IntegerProperty,Ae=Aj.FloatProperty,Ab=Aj.StringProperty,Ag=Aj.JsonProperty;var Af={showLegend:{key:AC.showLegend,type:Ac.preset(true)},showEdgeDirection:{key:AC.showEdgeDirection,type:Ac.preset(false)},showTransition:{key:AC.showTransition,type:Ac.preset(false)},nodeSizeAggregation:{key:AC.nodeSizeAggregation,type:Ab.preset(j.SUM)},minNodeSize:{key:AC.minNodeSize,type:Ag.preset({type:z.PROPORTIONAL}),postSet:function(Am,An,Ak,Al){if(Am.type!==z.ADJUSTED_RANGE){Am.ratio=AO/M;}else{if(Am.ratio===undefined){Am.ratio=X;}}return Am;}},maxNodeSize:{key:AC.maxNodeSize,type:Ag.preset({type:b.AUTOMATIC}),postSet:function(An,Ao,Ak,Al){var Am=Ah.hasSizeByMetric()?"size-by":"no-size-by";if(An.type===b.AUTOMATIC||An.type===b.MANUAL&&An.ratio===undefined){An.ratio=i[An.type][Am];}return An;}},themeType:{key:AC.themeType,type:Ab.preset("light"),preSet:function(Am,An,Ak,Al){return(parseInt(Am,10)===0)?"dark":"light";}},background:{key:AC.background,type:Ag.preset({})},circleStyle:{key:AC.bubbleStyle,type:Ag.preset({}),postSet:function(An,Ao,Al,Am){var Ak=Al.shownodelabel;if(An.showNodeLabel===undefined){An.showNodeLabel=!!(Ak!==undefined&&Ak.toString()==="true");}return An;}},circleLabelStyle:{key:AC.circleLabelFont,type:Ag.preset({})},layoutMode:{key:AC.layoutMode,type:Ai.preset(0)},dragMode:{key:AC.dragMode,type:Ai.preset(W.NETWORK_DRAG_MODE.pan)},lgdBgFillClr:{key:AU.LEGEND_BG_COLOR,type:Ag.preset(undefined)},lgdBgFillStyle:{key:AU.LEGEND_BG_FILL_STYLE,type:Ab.preset(undefined)},lgdBgFillEff:{key:AU.LEGEND_BG_FILL_EFFECT,type:Ab.preset(undefined)},lgdBgFillTrans:{key:AU.LEGEND_BG_FILL_TRANSPARENCY,type:Ab.preset(undefined)},lgdFntSz:{key:AU.LEGEND_FONT_SIZE,type:Ab.preset(undefined)},lgdFntFml:{key:AU.LEGEND_FONT_FAMILY,type:Ab.preset(undefined)},lgdFntStyle:{key:AU.LEGEND_FONT_STYLE,type:Ai.preset(undefined)},lgdFntClr:{key:AU.LEGEND_FONT_COLOR,type:Ai.preset(undefined)},lgdBdrShw:{key:AU.LEGEND_BORDER_SHOW,type:Ac.preset(undefined)},lgdBdrClr:{key:AU.LEGEND_BORDER_COLOR,type:Ab.preset(undefined)},lgdBdrStyle:{key:AU.LEGEND_BORDER_LINE_STYLE,type:Ab.preset(undefined)},lm:{key:AP.LEGEND_MODE,type:Ai.preset(undefined)},LegendPosition:{key:AP.LEGEND_POSITION,type:Ai.preset(2)},lwr:{key:AP.SCALE_LEGEND_WIDTH,type:Ae.preset(undefined)}};return new Aj().parse(Ad,Af);}function AK(Ab){function Ac(Af){var Ad=Ab[Af],Ae=Ad&&(Ad.TemplateUnit||Ad.TemplateMetric);return(Ae&&Ae[0])||{};}return{edgeColor:Ac("ColorBy"),edgeSize:Ac("SizeBy"),itemSize:Ac("itemsz"),from:Ac("from"),to:Ac("to")};}var AB=["at","dei","dpt","o","tui","ui"];function U(Bj,BP,Ag){BP=BP||{};BP.nodeValueRange=BP.nodeValueRange||{min:Infinity,max:-Infinity};BP.edgeValueRange=BP.edgeValueRange||{min:Infinity,max:-Infinity};BP.edgeColorValueRange=BP.edgeColorValueRange||{min:Infinity,max:-Infinity};BP.circleStyle.fromNode.shape=BP.circleStyle.fromNode.shape||"Circle";BP.circleStyle.toNode.shape=BP.circleStyle.toNode.shape||"Circle";var Af=[],A5=[],Bg=[],BL=[],Bf={};var Aq=Ag.edgeColor.id,Al=Ag.edgeSize.id,BZ=Ag.itemSize.id,BQ=Ag.from.id,As=Ag.to.id;var Ay={nodes:Af,edges:A5,nodesIdHash:Bf,attributes:Bg,metrics:BL,indexes:{edgeColorMIndex:-1,edgeSizeMIndex:-1,nodeSizeMIndex:-1,fromIndex:-1,toIndex:-1},modifiedNodes:[],formNameDisplayType:Bj.lnm};var BY=this.model;function Bk(By,Bz,Bx){return new AQ({attribute:By,attributeElements:Bz,adjacence:[],edges:[],properties:BP,range:BP.nodeValueRange,isMetricSizeBy:BZ!==undefined,attSrc:By.id===Bx?"from":"to",shape:By.id===Bx?BP.circleStyle.fromNode.shape:BP.circleStyle.toNode.shape});}function BF(Bz,By,Bx){return new n({from:Bz,to:By,values:[],indexes:Bx,properties:BP,range:BP.edgeValueRange,colorValueRange:BP.edgeColorValueRange});}var BU=Bj.gts.row;var BS=Bj.gts.col;var Bd=Bj.ghs.rhs.items;var BC=Bj.gvs.items||[];var An={};var Ao=true,Ah;Q.forEach(BU,function(B0,Bz){var B1=[],Bx=[],By;Q.forEach(B0.es,function(B2){B1.push({id:B2.id,name:B2.n});});Q.forEach(B0.fs,function(B2){Bx.push({name:B2.n});});Ah=BY.supportsViewFilterActions(B0.id);Ao=Ao&&Ah;By={id:B0.id,name:B0.n,elements:B1,supportsViewFilter:Ah,forms:Bx,formsLength:(B0.fs&&B0.fs.length)||1};if(B0.sc!==undefined){By.sc=B0.sc;}Bg.push(By);An[B0.id]=Bz;});Ay.allSupportsViewFilter=Ao;var Ba=(Bj.gsi&&Bj.gsi.mx)||[];try{Q.forEach(Ba,function(Bx,By){BL.push({id:Bx.did,name:Bx.n,formatString:AF.getNumberFormat(Bj,By)||""});An[Bx.did]=By;});}catch(Bw){mstrmojo.err(Bw);}var BN=Ay.indexes;BN.edgeColorMIndex=An[Aq];BN.edgeSizeMIndex=An[Al];BN.nodeSizeMIndex=An[BZ];BN.fromIndex=An[BQ];BN.toIndex=An[As];var Ap=[];if(BN.edgeColorMIndex!==undefined){var A3=Bj.gsi&&Bj.gsi.thresholds[BL[BN.edgeColorMIndex].id],BD;if(A3!==undefined&&A3.length>0){for(BD=0;BD<A3.length;BD++){if(A3[BD].fmt&&A3[BD].fmt.bc){Ap[BD]=mstrmojo.VisUtility.parseCSSColor(A3[BD].fmt.bc);}else{Ap[BD]=J.FIRST_PALETTE_COLOR;}}}}var Az={max:-Infinity,min:Infinity};if(AF.isOnExpressMode()){var A8=BN.edgeColorMIndex;Q.forEach(BC,function(By){var Bx=By&&By.items&&By.items[A8];if(Bx){Az.max=Math.max(Az.max,Bx.rv);Az.min=Math.min(Az.min,Bx.rv);}});}var A6={},Ae={};var Ad=(Bd&&Bd.length)||0,BK,BJ,BH,Bi,Ak,Bv,Bc,Bn,A7,Bq,Ac,BV,Bs,Bo,A4,BG,Aj,BI=AB.length,Aw,BR,BX;for(BK=0;BK<Ad;++BK){Bi=Bd[BK].items;Ak=Bi.length;Bv=[];Bc=0;Bn=1;BX=1;if(Bj.gts.row[0].cs){BX=Bj.gts.row[0].cs;}if(Bg[0].formsLength>1){BX=Bg[0].formsLength;}for(BJ=0;BJ<Ak;BJ+=BX,Bc++){if(Bc!==BN.fromIndex&&Bc!==BN.toIndex){Bv.push(null);continue;}A7=Bg[Bc];Bq=A7.elements;Ac=[];BV="";Bn=A7.formsLength;Aw=[];for(BH=BJ;BH<BJ+Bn;BH++){A4=Bi[BH];Bs=Bq[A4.idx];if(Aw.indexOf(Bs)===-1){for(BG=0;BG!==BI;BG+=1){Aj=AB[BG];Bs[Aj]=A4[Aj];}BV+=Bs.name;Aw.push(Bs);Ac.push(Bs);}}if(!A6[BV]){BR=Bk(A7,Ac,BQ,As);A6[BV]=Bf[BR.id]=BR;Af.push(BR);}else{Bo=A6[BV];if(Bo.attSrc==="to"&&BJ===0){Bo.attSrc="from";Bo.shape=BP.circleStyle.fromNode.shape;}if(Bo.attribute!==A7){Bo.hasSelfLoop=true;Bo.secondaryAttribute=A7;Bo.secondaryAttributeElements=Ac;}}Bv.push(A6[BV]);}var Bh=Bv[BN.fromIndex],BM=Bv[BN.toIndex];try{if(Bh&&BM){var Av=BF(Bh,BM,Ay.indexes),A9=Av.from.id+Av.to.id,Ax=Av.to.id+Av.from.id,Bt,A0=BC[BK]?BC[BK].items:[];if(A0!==null){var Bb=BL.length;for(BJ=0;BJ<Bb;++BJ){var Au={},Be=BL[BJ],A1=A0[BJ];Au.metricName=Be.name;Au.value=A1.rv;Au.formatString=Be.formatString;Av.values[BJ]=Au;if(BN.edgeColorMIndex!==undefined&&BN.edgeColorMIndex===BJ&&Ap.length>0){var BW=A1.ti;if(BW===undefined&&AF.isOnExpressMode()){var BE,At=Az.max,Bu=Az.min,Bm=A1.rv;if(At===Bu){BE=0;}else{BE=(Bm-Bu)/(At-Bu);}if(BE<0.1){BW=0;}else{if(BE>=0.1&&BE<0.3){BW=1;}else{if(BE>=0.3&&BE<0.5){BW=2;}else{if(BE>=0.5&&BE<0.7){BW=3;}else{if(BE>=0.7&&BE<0.9){BW=4;}else{if(BE>=0.9){BW=5;}}}}}}}Av.color=L(Ap[BW],AN);}}if(BN.edgeColorMIndex===undefined||Ap.length===0){Av.color=L(J.MISSING,AN);}}if(Ae[A9]){var BO=Ae[A9],BT=Av.values||[],Am=BT.length,Ai;for(Ai=0;Ai<Am;Ai++){BO.values[Ai].value+=BT[Ai].value;}}else{Bt=Ae[Ax];if(Bt){Av.reversedEdge=Bt;Bt.reversedEdge=Av;}Ae[A9]=Av;A5.push(Av);Bh.adjacence.push(BM);Bh.edges.push(Av);if(Bh!==BM){BM.adjacence.push(Bh);BM.edges.push(Av);}}}}catch(Bw){mstrmojo.err(Bw);}}Q.forEach(A5,function(Bx){Bx.updateValues();});Q.forEach(A5,function(Bx){Bx.updateStyles();});var Bl=BN.nodeSizeMIndex,BA=(BL[Bl]&&BL[Bl].name)||null;Q.forEach(Af,function(Bx){Bx.itemSizeMetricName=BA;Bx.updateValues();});Q.forEach(Af,function(Bx){Bx.updateStyles();});Q.forEach(BP.modifiedNodes,function(By){var Bx=A6[By.name];if(Bx){Bx.style=By.style;if(Ay.modifiedNodes.indexOf(Bx)===-1){Ay.modifiedNodes.push(Bx);}else{I("warning: duplicated nodes are store in the server.");}}});function Br(Bx){var By;Q.forEach(BS[0].es,function(Bz){if(Bz.oid===Bx){By=Bz.n;return false;}});return By;}function BB(By,Bz){var Bx;if(isNaN(Bz)){Bx="--";}else{Bx=By.format(Bz);}return Bx;}function Bp(){if(Ag&&Ag.itemSize&&Ag.itemSize.id){var B0=Ay.nodes[0]||new AQ(),By={},B3=[],B4=B0.range.minNegtive?(-B0.range.min):B0.range.min,Bz=B0.range.maxNegtive?(-B0.range.max):B0.range.max,B2,B1,Bx;B2=parseFloat(Bz);if(Bz===B4){B2=parseFloat(Bz);B3.push({label:BB(B0,B2)});}else{[Bz,B4].forEach(function(B5){B2=parseFloat(B5);B3.push({label:BB(B0,B2)});});}By.item=mstrmojo.desc(13616,"Item size:")+" "+Br(Ag.itemSize.id);if(B3.length>1){B1=By.elements=[];Q.forEach(B3,function(B5){B1.push({sign:"=",v:B5.label});});By.caseFlag=0;}else{if(B3.length===1){By.elements=[{diameter:12,shape:"rect",sign:"=",v:B3[0].label}];By.caseFlag=2;}}return By;}}Ay.itemSizeByInfo=Bp();function Ar(By,B2,B5,Bz){var B7=[];if(!B5||B5.length<2){for(BK=0;BK<Bz;BK++){B7.push(By);}return B7;}var B6=(B2-By)/(Bz-1),B0=B5[2]?(B5[2]-B5[1]):(B5[1]-B5[0]),B3,B1=B5[1],Bx=1,B4,B8;while(B0<1){B0*=10;Bx/=10;}while(B0>=10){B0/=10;Bx*=10;}B7.push(By);while(B1>By){B1-=Bx;}for(BK=1;BK<Bz-1;BK++){B3=parseFloat(By+BK*B6);B8=Number.POSITIVE_INFINITY;B4=Math.abs(B3-B1);while(B4<B8){B8=B4;B1+=Bx;B4=Math.abs(B3-B1);}B1-=Bx;B7.push(B1);}B7.push(B2);return B7;}function A2(){if(Ag&&Ag.edgeSize&&Ag.edgeSize.id){var Bz=Ay.edges[0]||new n(),B7=5,B6=[],Bx,B1={},B8=Bz.range.min,CB=Bz.range.max,B3=Bz.indexes.edgeSizeMIndex,B9,B0=c.chart.common.Utility,CA,By,B2,B4,B5=[];if((!B8&&B8!==0)||(!CB&&CB!==0)||!isFinite(B8)||!isFinite(CB)||(CB<B8)){B5.push("Error");}else{if(B8===CB){B5.push(B8);}else{CA=B0.prepareScalePlateOptions(false,0,4);By=B0.getScalePlate(true);By.computeTicks(CA,4,CB,B8);By.GetTicks(B5);B5=Ar(B8,CB,B5,B7);}}for(B2=0,B4=B5.length;B2<B4;B2++){if(!isFinite(B5[B2])){B9="--";}else{B9=Bz.format(B5[B2],B3);}B6.push({label:B9});}B1.item=mstrmojo.desc(13617,"Edge size:")+" "+Br(Ag.edgeSize.id);Bx=B1.elements=[];Q.forEach(B6,function(CC){Bx.push({sign:"<",v:CC.label});});B4=Bx.length;if(B4===5){Bx[0].sign="=";Bx[4].sign="=";}if(B4===1){Bx[0].sign="=";}B1.caseFlag=3;return B1;}}Ay.edgeSizeByInfo=A2();function Ab(B5){var Bx=Ag&&Ag.edgeColor&&Ag.edgeColor.id,B4=Bj.gsi.mx,B0;if(Bx&&B5!==undefined){Q.forEach(B4,function(B6){if(B6.did===Bx){B0=B6;}});if(B0){var B1=B5[Bx];if(B1&&B1.length>0&&B1[0].fmt&&B1[0].fmt.bc){var B3=mstrmojo.VisUtility.getRankMode(B1),Bz=AF.getNumberFormat(Bj,Ay.indexes.edgeColorMIndex),B2=Bz?mstrmojo.VisUtility.getColorByFormatStr(Bz.replace(/\'/g,'"'),B3):"",By=mstrmojo.VisUtility.getColorByItems(B1,B3,B0.max,B0.min,B0.cnt,B2,L(J.FIRST_PALETTE_COLOR));return{item:mstrmojo.desc(13618,"Edge color:")+" "+mstrmojo.VisUtility.getColorByTitle(Br(Bx),B3),elements:By};}}}}Ay.edgeColorByInfo=Ab(Bj.gsi.thresholds);return Ay;}function AD(){function Ad(Ai,Al,Ak){var Ah=this.propInfo,Aj;Ah.unmarshal(Ai,Al);Aj=Ah[Ai];if(Ak){this.observableModel[Ai].setValue(Aj,true);}return Aj;}function Ag(Ah,Aj,Ai,Al){function Ak(Ao,An){var Am=this.legend;if(!Am||!Am.hasRendered){return ;}Ad.call(this,Ah,Ao,An);this.initHTML5Props(this.HTML5PROPS);Am.updateStyle(this.HTML5PROPS.LEGEND);if(Al){Am.updateTitleLineHeight();this.hEvalSize4Legend();this.updateLegend();Am.updateSplitter();this.updateStageContentForLegendChanged(p[Am.currDockedPositionIdx].pos);}}Ak.call(this,Aj);this.setProperty(Ai,this.propInfo.marshal(Ah),{suppressData:true,clientUndoRedoCallback:Ak});}function Af(Ai){return function Ah(Ak){var Aj=Ak.newValue;function Al(Ao,An){var Am=this.propInfo;Ad.call(this,Ai,Ao,An);Am.nodeValueRange={min:Infinity,max:-Infinity};Am.edgeValueRange={min:Infinity,max:-Infinity};Am.edgeColorValueRange={min:Infinity,max:-Infinity};this.abstractedModel=U.call(this,this.modelData,Am,this.dropZoneInfo);this.generateSprites(this.abstractedModel,this.stage);this.refresh();}Al.call(this,Aj);this.setProperty(AC[Ai],this.propInfo.marshal(Ai),{suppressData:true,clientUndoRedoCallback:Al});};}var Ab=this.propInfo,Ae=["showEdgeDirection","showTransition","nodeSizeAggregation","layoutMode","lgdBgFillTrans","lgdBgFillClr","lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle","showLegend","maxNodeSize","minNodeSize"],Ac=this.addDisposable(new AM(Ae.reduce(function(Ah,Ai){Ah[Ai]=Ab[Ai];return Ah;},{})));Ac.showEdgeDirection.attachEventListener("valueChanged",this.id,function(Aj){var Ai=Aj.newValue,Ah="showEdgeDirection";function Ak(An,Am){var Al=Ad.call(this,Ah,An,Am);this.stage.showEdgeDirection=Al;this.stage.draw(false,true,true);}Ak.call(this,Ai);this.setProperty(AC.showEdgeDirection,this.propInfo.marshal(Ah),{suppressData:true,clientUndoRedoCallback:Ak});});Ac.showTransition.attachEventListener("valueChanged",this.id,function(Aj){var Ai=Aj.newValue,Ah="showTransition";function Ak(An,Am){var Al=Ad.call(this,Ah,An,Am);this.stage.showTransition=Al;}Ak.call(this,Ai);this.setProperty(AC.showTransition,this.propInfo.marshal(Ah),{suppressData:true,clientUndoRedoCallback:Ak});});Ac.nodeSizeAggregation.attachEventListener("valueChanged",this.id,Af("nodeSizeAggregation"));Ac.maxNodeSize.attachEventListener("valueChanged",this.id,Af("maxNodeSize"));Ac.minNodeSize.attachEventListener("valueChanged",this.id,Af("minNodeSize"));Ac.layoutMode.attachEventListener("valueChanged",this.id,function(Aj){var Ai=Aj.newValue,Ah="layoutMode";function Ak(An,Am){var Al=Ad.call(this,Ah,An,Am);D.call(this);this.layoutSprites(this.abstractedModel,this.stage,H[Al]);this.stage.draw(this.propInfo.showTransition,true,true);}Ak.call(this,Ai);this.setProperty(AC.layoutMode,this.propInfo.marshal(Ah),{suppressData:true,clientUndoRedoCallback:Ak});});Ac.lgdBgFillTrans.attachEventListener("valueChanged",this.id,function(Ah){Ag.call(this,"lgdBgFillTrans",Ah.newValue,AC.lgdBgFillTrans);});Ac.lgdBgFillClr.attachEventListener("valueChanged",this.id,function(Ah){Ag.call(this,"lgdBgFillClr",Ah.newValue,AC.lgdBgFillClr);});Ac.lgdFntClr.attachEventListener("valueChanged",this.id,function(Ah){Ag.call(this,"lgdFntClr",Ah.newValue,AC.lgdFntClr);});Ac.lgdFntSz.attachEventListener("valueChanged",this.id,function(Ah){Ag.call(this,"lgdFntSz",Ah.newValue,AC.lgdFntSz,true);});Ac.lgdFntFml.attachEventListener("valueChanged",this.id,function(Ah){Ag.call(this,"lgdFntFml",Ah.newValue,AC.lgdFntFml,true);});Ac.lgdFntStyle.attachEventListener("valueChanged",this.id,function(Ah){Ag.call(this,"lgdFntStyle",Ah.newValue,AC.lgdFntStyle,true);});Ac.showLegend.attachEventListener("valueChanged",this.id,function(Aj){var Ai=Aj.newValue,Ah="showLegend";function Ak(An,Am){var Al=Ad.call(this,Ah,An,Am);this.toggleLegend(Al);this.updateStageContentForLegendChanged(p[this.legend.currDockedPositionIdx].pos,(Ab.showLegend?this.legendW:0));}Ak.call(this,Ai);this.setProperty(AC.showLegend,this.propInfo.marshal(Ah),{suppressData:true,clientUndoRedoCallback:Ak});});return Ac;}function AJ(){var Ae=this.selectedSprites,Ad,Ac,Ab;for(Ad=0,Ac=Ae.length;Ad!==Ac;Ad++){Ab=Ae[Ad].unit.attribute;if(!Ab.supportsViewFilter){return false;}}return true;}function l(Ad,Ab){var Ac=this.menuAnchor;if(!Ac){Ac=document.createElement("div");Ac.id=this.id+"-netviz-menu-anchor";Ac.style.position="absolute";document.body.appendChild(Ac);this.menuAnchor=Ac;}Ac.style.left=Ab.pageX+"px";Ac.style.top=Ab.pageY+"px";this.configurePopup(Ad,Ac);this.openPopup(Ad.newInstance());}function x(){function Ad(Ag){var Af=AF.getPropertyByPath(this,"modelData.gts.row",[]);var Ae=AF.findInArray(Af,function(Ah){return Ah.id===Ag;});if(Ae!==-1){return Af[Ae];}}function Ac(){var Ae=this.getDropZone();var Af=this;return["to","from"].map(function(Ah){var Ak=Ah+".TemplateUnit.0.id";var Aj=AF.getPropertyByPath(Ae,Ak);var Ag=Ad.call(Af,Aj);var Ai=AF.pick(Ag,["n","id"]);Ai.title=Ai.n;return Ai;});}var Ab=this;return function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attributeList",items:Ac.call(Ab),selectedIndex:0},{scriptClass:"mstrmojo.VisMenuList",alias:"candidateList",itemField:"n",items:AF.getDrillCandidates(Ab)}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Ai,Ag){var Af=AF.getPropertyByPath(Ag,"candidateList.selectedItem");var Ah=AF.pick(Ag.attributeList.getSelectedItem(),["id","n"]);Ab.doSelection(function Ae(Ak){var Aj=Ah.id;return Ak.filter(function(Al){return Al.hasSelfLoop||Al.attribute.id===Aj;}).map(function(Am){var Al=Am;if(Am.hasSelfLoop&&Am.attribute.id!==Aj){Al={attribute:Am.secondaryAttribute,attributeElements:Am.secondaryAttributeElements};}return Al;});});AF.doDrill(Ab,Af,AG,{drillFromUnit:Ah});}});};}function F(){var Ad=this.abstractedModel.allSupportsViewFilter||AJ.call(this.stage),Af=new mstrmojo.ui.menus.MenuConfig(),Ah=new mstrmojo.ui.menus.MenuConfig(),Ac={filter:Af,showData:Ah},Ag=this,Ae=function(Ak){var Aj=Ag.stage.selectedSprites;var Ai=N(Aj);if(Ai.isSameAttr){return AF.getDrillMenuItemsCallback(Ag,Ak,{drillFromUnit:AF.pick(Ai.nonLoopAttr,["id","n"])});}else{return x.call(Ag);}};if(Ad){Af.addMenuItem(mstrmojo.desc(11701,"Keep only"),"xt",this.getMenuHandler("keepOnly"));Af.addMenuItem(mstrmojo.desc(3946,"Exclude"),"xt",this.getMenuHandler("exclude"));var Ab=AF.getDrillCandidates(this);if(Ab.length>0){Af.addPopupMenuItem(mstrmojo.desc(145,"Drill"),this.id,Ae(this.getMenuHandler("drill")),"xt");}else{Af.addNonInteractiveMenuItem(mstrmojo.desc(145,"Drill"),"",true);}Ah.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",this.getMenuHandler("showData"));}return Ac;}function N(Ac){var Ab,Ad=Ac.every(function(Ag){var Af=Ag.unit,Ae=Af.attribute;if(!Af.hasSelfLoop){if(Ab===undefined){Ab=Ae;}return Ab===Ae;}return false;});return{isSameAttr:Ad,allSelfloops:Ab===undefined,nonLoopAttr:Ab};}function r(Ae){if(Ae.length===0){return{isSameAttr:false,allSelfloops:false,selection:[]};}var Ad=N(Ae),Ag=Ad.isSameAttr,Ac=Ad.allSelfloops,Af=Ad.nonLoopAttr;var Ab=Ae.reduce(function(Ai,Al){var Ak=Al.unit,Ah=Ak.attribute,Aj;if(Ak.hasSelfLoop){if(Ac||Ah!==Af){Aj={attribute:Ak.secondaryAttribute,attributeElements:Ak.secondaryAttributeElements};Ai.push({text:Al.text,unit:Aj,title:Aj.attribute.name});}if(Ac||Ah===Af){Aj={attribute:Ah,attributeElements:Ak.attributeElements};Ai.push({text:Al.text,unit:Aj,title:Ah.name});}}else{Aj={attribute:Ah,attributeElements:Ak.attributeElements};Ai.push({text:Al.text,unit:Aj,title:Ah.name});}return Ai;},[]);return{allSelfloops:Ac,isSameAttr:Ag,selection:Ab};}function a(){var Ac={};if(mstrApp.isAppStatePresentation()){return Ac;}var Ag=this.stage.selectedSprites,Ae,Ab,Ah,Af=function(Ai){return Ai.text;},Ad=function(Ai){return Ai;};if(Ag&&Ag.length>0){Ae=r(Ag);Ag=Ae.selection;Ab=Ae.allSelfloops;if(!Ab&&Ae.isSameAttr){Ah=this.getCellForNode(Ag[0]);Ac=AF.getGroupAndCalculationContextMenu(this,Ah,{selection:Ag,skipSingleAttrCheck:true,fnCellName:Af});}else{if(Ab){Ac=AF.getGroupAndCalculationContextMenuForDataPoints(this,{selection:Ag,fnCellName:Af,fnUnique:Ad,fnMakeNode:Ad});}}}return Ac;}function P(Ac){var Ab=0,Af=0,Ad=0;function Ae(Ag){if(Ag.isExcluded){return ;}var Ah=Ag.sprite.getGeometry();Ab++;if(!isNaN(Ah.s)){Af+=Ah.s*2;if(Ad<Ah.s){Ad=Ah.s;}}}Q.forEach(Ac.nodes,Ae);return{circleCount:Ab,dimension:Af,maxR:Ad};}function u(Ac){var Ab=Ac.nodes.reduce(function(Ag,Af,Ae){Ag[Af.id]=Ae;return Ag;},{});Ac.nodes.sort(function Ad(Af,Ae){var Ai=Af.sprite.getGeometry().s,Ah=Ae.sprite.getGeometry().s,Ag;if(Ai>Ah){Ag=1;}else{if(Ai===Ah){Ag=Ab[Af.id]>Ab[Ae.id]?1:-1;}else{Ag=-1;}}return Ag;});}mstrmojo.netviz.VisNetwork=mstrmojo.declare(mstrmojo.VisBase,[mstrmojo._VizSelectionHelper,mstrmojo._LoadsScript,mstrmojo.vi.ui.rw._HasVisSelections,mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl,mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights,mstrmojo.vi.ui.rw._XtabDE,mstrmojo.vi.ui._IsDropTarget,mstrmojo.gm._SupportDndAsBlackBox,mstrmojo.netviz._ForceDirectedLayout,mstrmojo.netviz._CircularLayout,mstrmojo.netviz._LinearLayout,mstrmojo.netviz._SupportNetworkBrushesAndHighlights,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.netviz.VisNetwork",localProps:null,normalizedIdCache:{},markupString:'<div class="VisNetwork network-{@themeType}-theme mil-{@themeType} gm-{@themeType}-theme" id={@id} style="position: absolute; left: {@left}px; top: {@top}px; width: {@width}px; height: {@height}px; z-index: 1;" mstrAttach:'+E.join(",")+'><div style="width: {@width}px; height:{@height}px;"></div><div></div><div class="_layoutIcons" style="position: absolute; right: '+V+"px; top: "+s+"px; width: "+R+"px; height: "+O+'px"><input id="{@id}-inputForceDirectedIcon" class="_inputForceDirectedIcon" type="radio" name="{@id}-layoutTypes" style="display:none;"><label for="{@id}-inputForceDirectedIcon" class="_forceDirectedIcon" style=""></label><input id="{@id}-inputCircularIcon" class="_inputCircularIcon" type="radio" name="{@id}-layoutTypes" style="display:none;"><label for="{@id}-inputCircularIcon" class="_circularIcon" style=""></label><input id="{@id}-inputLinearIcon" class="_inputLinearIcon" type="radio" name="{@id}-layoutTypes" style="display:none;"><label for="{@id}-inputLinearIcon" class="_linearIcon" style=""></label></div>',markupSlots:{stageContainer:function(){return this.domNode.firstChild;},legendPlaceholder:function(){return this.domNode.childNodes[1];},modeSwitchButton:function(){return this.domNode.childNodes[2];},inputForceDirectedIcon:function(){return this.domNode.childNodes[2].childNodes[0];},forceDirectedIcon:function(){return this.domNode.childNodes[2].childNodes[1];},inputCircularIcon:function(){return this.domNode.childNodes[2].childNodes[2];},circularIcon:function(){return this.domNode.childNodes[2].childNodes[3];},inputLinearIcon:function(){return this.domNode.childNodes[2].childNodes[4];},linearIcon:function(){return this.domNode.childNodes[2].childNodes[5];}},init:function(Ab){this._super(Ab);this.modeSwitchButtonRect={r:V,t:s,w:R,h:O};this.HTML5PROPS={};this.localProps={};this.canOnlyDragOnTitleBar=true;},update:function(Ac){var Ae,Af,Aj,Ab,Ad;AL.startTimer({functionName:"VisNetwork.update",purpose:"JSON loading and consuming"});Ae=this._super(Ac);if(Ae!==false){this.clearError();Aj=this.model.data||{};Ab=Aj.egt;Ad=Aj.eg;if(Ab!==undefined||Ad!==undefined){this.setError(Ad,Ab);return Ae;}this.modelData=this.model.data;this.dropZoneInfo=AK(this.getDropZone());this.propInfo=K(this,this.getProperties());var Ai=this.getFormats()["background-color"];if(Ai===undefined){Ai=this.propInfo.themeType==="dark"?"#333333":"#ffffff";}this.propInfo.background={value:Ai,opacity:1};this.observableModel=AD.call(this);d.call(this);Af=this.propInfo;this.stage=this.addDisposable(new mstrmojo.netviz.VisNetworkStage({owner:this,slot:"stageContainer",showTransition:Af.showTransition,showEdgeDirection:Af.showEdgeDirection,themeType:Af.themeType,background:T.clone(Af.background),circleStyle:T.clone(Af.circleStyle),circleLabelStyle:T.clone(Af.circleLabelStyle),dragMode:Af.dragMode}));this.propInfo.circleStyle=this.stage.observableModel&&this.stage.observableModel.circleStyle;this.layoutMode=H[Af.layoutMode];this.themeType=Af.themeType;if(AF.isOnExpressMode()&&this.dropZoneInfo.edgeColor.id){var Ah=this.modelData.gsi;if(Object.keys(Ah.thresholds).length===0){var Ag=this.dropZoneInfo.edgeColor;Ah.thresholds=AF.getMockUpThresholds(Ag.id,Ag.n);}}if(AF.hasMergedRowCells(this.modelData)){this.error=mstrmojo.desc(13702,"The Network doesn't support grid data with merged row cell. Please disable cell merge and retry");}else{if(this.dropZoneInfo.from.id||this.dropZoneInfo.to.id){if(Af.showLegend&&!this.hasSizebyOrColorby()){Af.showLegend=false;}this.abstractedModel=U.call(this,this.modelData,Af,this.dropZoneInfo);this.generateSprites(this.abstractedModel,this.stage);}else{this.setError(null,Aa.NO_TEMPLATE_UNIT);}}}AL.endTimer();return Ae;},getColorByMetric:function(){return AF.getMetricsInDropZone(this.zonesModel,mstrmojo.vi.viz.EnumDSSDropZones.ColorBy)[0]||null;},hasSizebyOrColorby:function(){return AF.getPropertyByPath(this,"dropZoneInfo.edgeColor.id",false)||AF.getPropertyByPath(this,"dropZoneInfo.edgeSize.id",false)||AF.getPropertyByPath(this,"dropZoneInfo.itemSize.id",false);},hasSizeByMetric:function(){return AF.getPropertyByPath(this,"dropZoneInfo.itemSize.t")===Z.DssTypeMetric;},setError:function(Ad,Ac){var Ab=AF.translateGridError(Ad,Ac);this.error=Ab.msg;this.errorType=Ab.type;},clearError:function(){this.error=undefined;this.errorType=undefined;},hasError:function(){return this.error!==undefined||this.errorType!==undefined;},isEmpty:function(){return this.hasError();},getVisEmptyMsgControls:function(){var Ac=this.error,Ab=this.errorType,Ad;if(!this.hasError()){return ;}switch(Ab){case Aa.NO_DATASET:case Aa.NO_TEMPLATE_UNIT:Ad=[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:Ac}];break;case Aa.AE_ERROR:Ad=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:AF.getVisEmptyMsg("AE_ERROR"),markupSlots:{containerNode:function(){return this.domNode;}}}];break;default:Ad=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:'<div class="{@cssClass}"><div class="error-content">'+Ac+"</div></div>",markupSlots:{containerNode:function(){return this.domNode;}}}];break;}return Ad;},preBuildRendering:function(){if(this.waitingForData){return ;}this._super();var Ab=this.stage;if(Ab){Ab.height=parseInt(this.height,10);Ab.width=parseInt(this.width,10);if(!this.hasError()&&!this.waitingForData){this.defaultsLegendPop=AH.call(this,(this.themeType==="light"?0:1));this.initHTML5Props(this.HTML5PROPS);}}},postBuildRendering:function(){if(this.waitingForData){return ;}if(this.isEmpty()){if(AF.isOnExpressMode()){AF.renderWidgetErrorRSD(this,this.error,E);}else{this._super();}return ;}this.addChildren(this.stage);this.stage.render();this.initLegend();D.call(this);this.layoutSprites(this.abstractedModel,this.stage,H[this.propInfo.layoutMode]);this.stage.draw(false);this.attachEventListener("click",this.id,this.onclick);var Ab=this.getExp(),Ac=this.getRowsAndCols();AF.modifyScExp(Ab,Ac,this.model,this.normalizedIdCache);if(this._super){this._super();}},destroy:function(){if(this.legend){this.legend.hideToolbar();}d.call(this);delete this.modelData;delete this.propInfo;delete this.legend;delete this.abstractedModel;if(this._super){this._super();}},getProperties:function(){return(this.modelData&&this.modelData.vp)||{};},getProperty:function(Ab){var Ac=this.getProperties();return Ac[Ab];},getDropZone:function(){var Ac=this.modelData&&this.modelData.dz;if(!AF.isValidDropZone(Ac)){Ac={};var Ah=this.model&&this.model.data;if(Ah){var Ad=Ah.gts||{},Ae=Ad.row||[],Ag=(Ad.col&&Ad.col[0]&&Ad.col[0].es)||[],Ai=["from","to"],Ab=["SizeBy","ColorBy","itemsz"],Af=[{units:Ae,unitKeys:Ai,setKey:"TemplateUnit"},{units:Ag,unitKeys:Ab,setKey:"TemplateMetric"}];Q.forEach(Af,function(Aj){Q.forEach(Aj.units,function(Al,An){var Ak=Aj.unitKeys[An];if(Ak){var Am={};Am[Aj.setKey]=[{id:Al.oid||Al.id,t:Al.otp}];Ac[Ak]=Am;}});});}}return Ac;},onAppStateChange:function AA(Ab){this._super(Ab);if(!this.selectorControl){this.clearSelections(true);}},onclick:function(Ab){delete this.noHighlightAfterKeepOnlyExcludeDrill;var Ae=Ab.e||Ab,Ad=Ae.target,Ac;if(Ad===this.circularIcon){Ac="0";}if(Ad===this.linearIcon){Ac="1";}if(Ad===this.forceDirectedIcon){Ac="2";}if(Ac){this.observableModel.layoutMode.setValue(Ac);}this.stage.dismissLassoSelector();if(this.legend){this.legend.hideToolbar();}},oncontextmenu:function(Ab){delete this.noHighlightAfterKeepOnlyExcludeDrill;var Ac=Ab.getTarget();Ab.cancel();Ab.preventDefault();if(this.legend){if(AR.contains(this.legend.domNode,Ac,true)){this.legend.handleRMCOnLegend(Ab);}else{this.legend.hideToolbar();}}},onmouseup:function(Ab){var Ad=Ab.e||Ab,Ae=this.stage,Ac=Ad.target||Ad.srcElement;if(!AR.contains(Ae.domNode,Ac,true)){Ae.dismissLassoSelector();}},initLegend:function(){var Ac=0,Ab=0;this.hEvalSize4Legend();if(this.propInfo.showLegend){this.renderLegend();var Ad=p[this.legend.currDockedPositionIdx];Ac=this.isOnRight(Ad.pos)?0:this.legendW;if(this.isLegendSwitchOverlap()){Ab=V+this.modeSwitchButtonRect.w;this.modeSwitchButtonRect.r=this.legendW+V;}else{this.modeSwitchButtonRect.r=V;}}this.modeSwitchButton.style.right=this.modeSwitchButtonRect.r+"px";this.stage.setMainRect({x:Ac,y:0,w:parseInt(this.width-Ab-this.legendW,10),h:parseInt(this.height,10)});},hEvalSize4Legend:function(){var Ag,Ae=this.abstractedModel.edgeColorByInfo,Ad=this.abstractedModel.itemSizeByInfo,Ac=this.abstractedModel.edgeSizeByInfo,Af=this.getWidth(),Ab=this.getHeight(),Ah=this.HTML5PROPS.LEGEND,Ai;if(this.propInfo.showLegend===false){this.legendW=this.legendH=this.legendP=0;}else{S.applyHTML5Props(Ah);this.legendP=e;Ai=this.readGlobalProperty(AP.SCALE_LEGEND_WIDTH);if(Ai===undefined||!this.legendScale||this.legendScale!==Ai){this.legendScale=Ai;this.legendResized=true;this.legendFixedW=undefined;}Ag=S.getLegendSize([{dataType:AT.COLOR_BY,dataObj:Ae},{dataType:AT.SIZE_BY,dataObj:Ad},{dataType:AT.SIZE_BY,dataObj:Ac}],this.legendResized?this.legendScale:undefined,Af,Ab,Ah,this.legendFixedW);this.legendCutBy=Ag.cutBy;this.legendMinHeight=Ag.minHeight;this.legendFixedW=Ag.width;if(Ag.scale){this.legendScale=Ag.scale;}if(this.readGlobalProperty(AP.LEGEND_MODE)===AI.MINIMIZED||Ag.autoCollapse){Ag=S.getLegendSize4MinMode(Ae,Ab);this.legendCutBy=undefined;}this.legendW=Ag.width;this.legendH=Ag.height;}},hInitLegendListeners:function(){var Ab=this,Ac=this.id;if(this.legend){this.legendResizeListener=this.legend.attachEventListener("gm-legend-resized",Ac,function(Ad){Ab.onLegendResized(Ad.position);});this.legendClickListener=this.legend.attachEventListener("gm-legend-clicked",Ac,function(Ad){Ab.onLegendClicked(Ad);});}},onLegendResized:function(Ad){function Ab(){var Ae=this.legend;if(Ae){this.hEvalSize4Legend();this.updateLegend();Ae.updateAfterResize();this.updateStageContentForLegendChanged(p[Ae.currDockedPositionIdx].pos);}}function Ac(Af,Ae){if(Ae){this.legendScale=Af;this.legendResized=true;this.legendFixedW=undefined;Ab.call(this);}}if(this.legend){this.legendFixedW=this.legendW+Ad;this.legendScale=(this.legendFixedW)/(this.legendW/this.legendScale);this.legendResized=true;this.writeLgendFormatProperty(AP.SCALE_LEGEND_WIDTH,this.legendScale,{success:Ac});Ab.call(this);}},onLegendClicked:function(Ab){var Ad=Ab.action,Ac=this.legend,Ae={success:function(){this.hEvalSize4Legend();this.updateLegend();this.updateStageContentForLegendChanged(p[Ac.currDockedPositionIdx].pos);}};if(Ad==="close"){this.observableModel.showLegend.setValue(false);return ;}if(Ad==="minimize"){this.writeLgendFormatProperty(AP.LEGEND_MODE,AI.MINIMIZED,Ae);}else{if(Ad==="restore"){this.writeLgendFormatProperty(AP.LEGEND_MODE,AI.RESTORED,Ae);}}},renderLegend:function(){var Ab=this.legendPlaceholder;if(!this.propInfo.showLegend){Ab.style.display="none";}Ab.style.width=this.legendW+"px";Ab.style.height=this.legendH+"px";this.legend=this.addDisposable(new AY.GMLegend({widget:this,model:this.model,placeholder:Ab,currDockedPositionIdx:q(this.readGlobalProperty(AP.LEGEND_POSITION)),cutBy:this.legendCutBy,cssClass:"gm-legend",styles:this.HTML5PROPS.LEGEND,readGlobalProperty:function(Ac){return this.widget.readGlobalProperty(Ac);},writeGlobalProperty:function(Ac,Ad){this.widget.writeLgendFormatProperty(Ac,Ad,{success:function(){this.widget.reRender();}.bind(this)});},configureLegendPopup:function(Ac,Ad){return this.widget.configurePopup(Ac,Ad);}}));this.legend.render();this.legend.parent=this;this.legend.cutBy=this.legendCutBy;this.legend.minHeight=this.legendMinHeight;this.legend.updateContainerSize(this.getWidth(),this.getHeight());this.legendPlaceholder=this.legend.domNode;this.hInitLegendListeners();this.legend.feedData([{dataType:AT.COLOR_BY,dataObj:this.abstractedModel.edgeColorByInfo},{dataType:AT.SIZE_BY,dataObj:this.abstractedModel.edgeSizeByInfo},{dataType:AT.SIZE_BY,dataObj:this.abstractedModel.itemSizeByInfo}],(this.readGlobalProperty(AP.LEGEND_MODE)===AI.MINIMIZED));},showMenu:l,showSelectionMenu:function(Ac,Ad){var Ab;if(!AF.isOnExpressMode()){Ab=this.getSelectionMenuConfig();if(!mstrApp.isAppStatePresentation()&&mstrApp.allowWebDashboardDesign()&&Ad){if(Ab.hasMenuItems()){Ab.addSeparator();}Ab.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",Ad);}if(Ab.hasMenuItems()){this.showMenu(Ab,Ac);}}},showBlankSpaceMenu:function(Ab,Ac){if(!AF.isOnExpressMode()&&!mstrApp.isAppStatePresentation()&&mstrApp.allowWebDashboardDesign()){this.showMenu(this.getBlankSpaceMenuConfig(Ac),Ab);}},getSelectionMenuConfig:function(){var Ab=AF.mergeHashes(F.call(this),a.call(this)),Ac=[{name:"filter"},{name:"editGroup"},{name:"editCalculation"},{name:"createDe"},{name:"showData"},{name:"renameDe"}];return AF.mergeMenuConfigs(Ab,Ac);},getFormatMenuConfig:function(){var Ab=this.addDisposable(new mstrmojo.ui.menus.MenuConfig()),Ac=AF.getPropertyByPath(this,"stage.observableModel.circleStyle.showNodeLabel"),Ae=!!(Ac&&Ac.getValue()),Ad;if(Ae){Ad=mstrmojo.desc(13688,"Hide Node Label");}else{Ad=mstrmojo.desc(12079,"Show Node Label");}Ab.addMenuItem(Ad,"xt",function(){Ac.setValue(!Ae);});return Ab;},getBlankSpaceMenuConfig:function(Ad){var Ab=this.addDisposable(new mstrmojo.ui.menus.MenuConfig()),Ac=this;Ad=Ad||function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");};Ab.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",Ad);if(this.hasSizebyOrColorby()){if(!Ac.propInfo.showLegend){Ab.addMenuItem(mstrmojo.desc(12001,"Show Legend"),"xt",this.getMenuHandler("showLegend"));}}return Ab;},getLocalProp:function(Ab){return this.localProps[Ab];},setLocalProp:function(Ac,Ab){this.localProps[Ac]=Ab;},unrender:function(){if(this.legendResizeListener){this.legendResizeListener.clear();}if(this.legendClickListener){this.legendClickListener.clear();}if(this.legend){this.legend.unrender();}if(this.stage){this.removeChildren(this.stage);}if(this.menuAnchor){document.body.removeChild(this.menuAnchor);this.menuAnchor=undefined;}if(this._super){this._super();}},generateSprites:function o(Ac,Ad){function Ae(Af){Af.sprite=Ad.createSprite({type:"Circle",position:{x:0,y:0,r:Af.size},text:Af.getName(),title:Af.getAttributeName(),attSrc:Af.attSrc,forms:Af.getFormNames(),formValues:Af.getFormValues(),displayValue:Af.format(Af.getAggregatedValue()),aggregationName:Af.itemSizeMetricName?Af.aggregationName:null,unit:Af,style:Af.style,selfLoop:Af.hasSelfLoop});Ad.addSprite(Af.sprite);}function Ab(Af){Af.sprite=Ad.createSprite({type:"Edge",from:Af.from.sprite,to:Af.to.sprite,controlPoint:{x:Ad.width/2,y:Ad.height/2},color:Af.color,width:Af.width,unit:Af});Ad.addSprite(Af.sprite);}Ad.clearSprites();Q.forEach(Ac.nodes,Ae);Q.forEach(Ac.edges,Ab);},getSelectedNodes:function(){return AF.pluck((this.stage.selectedSprites||[]).filter(function(Ab){return Ab.type==="Circle"&&Ab.unit;}),"unit");},keepOnly:function(){var Ab=this.abstractedModel.nodes,Ai=Ab.length,Aj=this.getSelectedNodes(),Ae=Aj.length,Ag,Ac;for(Ag=0;Ag<Ae;Ag++){Ac=Aj[Ag];var Ad=Ac.adjacence,Ah=Ad.length,Af;for(Af=0;Af<Ah;Af++){if(!Ad[Af].isExcluded&&Aj.indexOf(Ad[Af])===-1){Aj.push(Ad[Af]);}}}for(Ag=0;Ag<Ai;Ag++){Ac=Ab[Ag];if(Aj.indexOf(Ac)===-1){Ac.exclude();}}this.stage.draw(false);},exclude:function(){var Ad=this.getSelectedNodes(),Ab=Ad.length,Ac;for(Ac=0;Ac<Ab;Ac++){Ad[Ac].exclude();}this.stage.draw(false);},getSelectedNodesInfo:function(){var Ab=[];Q.forEach(this.getSelectedNodes(),function(Ac){Ab.push(Ac.getActionInfo());});return Ab;},getMenuHandler:function(Ac){var Ah=this,Ak=this._super(Ac);if(Ak!==mstrmojo.emptyFn){return Ak;}var Ad={keepOnly:function Ae(){Ah.updateAfterKeepOnly(true);Ah.noHighlightAfterKeepOnlyExcludeDrill=true;},exclude:function Aj(){Ah.updateAfterKeepOnly(false);Ah.noHighlightAfterKeepOnlyExcludeDrill=true;},drill:function Ag(Al){AF.doDrill(Ah,Al.ctxt.drillUnit,AG,Al.ctxt);Ah.noHighlightAfterKeepOnlyExcludeDrill=true;},showData:function Af(){Ah.showData(Ah.getSelectedNodesInfo());},showLegend:function Ai(){Ah.observableModel.showLegend.setValue(true);},hideLegend:function Ab(){Ah.observableModel.showLegend.setValue(false);}};if(Ad.hasOwnProperty(Ac)){return Ad[Ac];}return mstrmojo.emptyFn;},doSelection:function(Ab){this.prepareSelectedNodesInfo(Ab);this.endSelections();},onStylesModified:function(Ad,Ae,Ag){var Af=function(Ah){return function(Ak,Aj){var Ai=this.propInfo;Ai.unmarshal(Ah,Ak);Ag.call(this.stage,Ai[Ah],Aj);};};var Ab={circleStyle:function(Ah){this.setProperty(AC.bubbleStyle,Ah,{suppressData:true,clientUndoRedoCallback:Af("circleStyle")});},background:function(Ah){this.propInfo.background=Ah;},circleLabelStyle:function(Ah){this.setProperty(AC.circleLabelFont,Ah,{suppressData:true,clientUndoRedoCallback:Af("circleLabelStyle")});},dragMode:function(Ah){this.setProperty(AC.dragMode,Ah,{suppressData:true,clientUndoRedoCallback:Af("dragMode")});}};if(Ab[Ad]){this.propInfo[Ad]=Ae;var Ac=Ab[Ad];if(Ac instanceof Function){Ac.call(this,this.propInfo.marshal(Ad));}}},layoutSprites:function(Ac,Ad,Ab){AL.startTimer({functionName:"VisNetwork.layoutSprites",purpose:"layout the bubbles"});u(Ac);Q.forEach(Ac.nodes,function(Ae){Ae.sprite.setGeometry({s:Ae.size});});Q.forEach(Ac.edges,function(Ae){Ae.sprite.setGeometry({s:Ae.width});});this.layouts[Ab].call(this,Ac,Ad,P(Ac));Ad.setScene();AL.endTimer();},readGlobalProperty:function(Ab){var Ac;switch(Ab){case AU.LEGEND_BG_COLOR:Ac=this.propInfo.lgdBgFillClr;break;case AU.LEGEND_BG_FILL_STYLE:Ac=this.propInfo.lgdBgFillStyle;break;case AU.LEGEND_BG_FILL_EFFECT:Ac=this.propInfo.lgdBgFillEff;break;case AU.LEGEND_BG_FILL_TRANSPARENCY:Ac=this.propInfo.lgdBgFillTrans;break;case AU.LEGEND_FONT_SIZE:Ac=this.propInfo.lgdFntSz;break;case AU.LEGEND_FONT_FAMILY:Ac=this.propInfo.lgdFntFml;break;case AU.LEGEND_FONT_STYLE:Ac=this.propInfo.lgdFntStyle;break;case AU.LEGEND_FONT_COLOR:Ac=this.propInfo.lgdFntClr;break;case AU.LEGEND_BORDER_SHOW:Ac=this.propInfo.lgdBdrShw;break;case AU.LEGEND_BORDER_COLOR:Ac=this.propInfo.lgdBdrClr;break;case AU.LEGEND_BORDER_LINE_STYLE:Ac=this.propInfo.lgdBdrStyle;break;case AU.COLOR_SQUARE_COLOR:Ac=this.propInfo.clrSqrClr;break;case AP.LEGEND_MODE:Ac=this.propInfo.lm;break;case AP.LEGEND_POSITION:Ac=this.propInfo.LegendPosition;break;case AP.SCALE_LEGEND_WIDTH:Ac=this.propInfo.lwr;break;}if(Ac===undefined||((typeof Ac)==="number"&&isNaN(Ac))){Ac=this.defaultsLegendPop[Ab];}return Ac;},initHTML5Props:function(Ad){function Ac(Af,Ae){Af.fontWeight=(Ae&G.FS_BOLD?"bold":"normal");Af.fontStyle=(Ae&G.FS_ITALIC?"italic":"normal");if((Ae&G.FS_STRIKETHROUGH)&&(Ae&G.FS_UNDERLINE)){Af.textDecoration="line-through underline";}else{if(Ae&G.FS_STRIKETHROUGH){Af.textDecoration="line-through";}else{if(Ae&G.FS_UNDERLINE){Af.textDecoration="underline";}else{Af.textDecoration="none";}}}}var Ab={};Ab.fontFamily=this.readGlobalProperty(AU.LEGEND_FONT_FAMILY);Ab.fontSize=this.readGlobalProperty(AU.LEGEND_FONT_SIZE);Ac(Ab,this.readGlobalProperty(AU.LEGEND_FONT_STYLE));Ab.color=AL.decodeColor(this.readGlobalProperty(AU.LEGEND_FONT_COLOR));Ab.backgroundColor=AL.decodeColor(this.readGlobalProperty(AU.LEGEND_BG_COLOR));Ab.opacity=this.readGlobalProperty(AU.LEGEND_BG_FILL_TRANSPARENCY)/100;if(this.readGlobalProperty(AU.LEGEND_BORDER_SHOW)){Ab.borderWidth=AF.translateLineStyle(this.readGlobalProperty(AU.LEGEND_BORDER_LINE_STYLE)).width;Ab.borderStyle=AF.translateLineStyle(this.readGlobalProperty(AU.LEGEND_BORDER_LINE_STYLE)).style;Ab.borderColor=AL.decodeColor(this.readGlobalProperty(AU.LEGEND_BORDER_COLOR));}Ad.LEGEND=Ab;},configurePopup:function t(Ab,Ac){Ab.hostId=this.id;Ab.hostElement=Ac;},writeLgendFormatProperty:function(Ad,Ae,Ag){var Ac=!!(Ag&&Ag.success),Af=function(Aj,Ai){var Ah=this.propInfo;Ah.unmarshal(Ad,Aj);if(Ac){Ag.success.call(this,Ah[Ad],Ai);}},Ab;if(Ad===AU.COLOR_SQUARE_COLOR){this.propInfo.unmarshal(Ad,Ae);this.setProperty(Ad,Ae,{callback:Ag});}else{if(this.observableModel[Ad]){Ab=this.observableModel[Ad];Ab.setValue(Ae);}else{Af.call(this,Ae,false);this.setProperty(Ad,Ae,{suppressData:true,clientUndoRedoCallback:Ac?Af:undefined});}}},onLegendDropZoneChange:function Y(Ab,Ac){this.setLegendSlot(Ab,Ac);},onLegendDropped:function(Ab){this.writeLgendFormatProperty(AP.LEGEND_POSITION,Ab,{success:function(Ad,Ac){if(Ac){this.renderLegend();this.updateStageContentForLegendChanged(Ad);}}});},setLegendSlot:function(Ae,Ah){var Ag=this.legend.currDockedPositionIdx;if(Ah!==Ag){var Ab=this.isOnRight(p[Ag].pos),Af=this.isOnRight(Ae.pos),Ac=this.isOnRightTop(p[Ag].pos),Ad=this.isOnRightTop(Ae.pos);if(Ab!==Af||(Ab&&Af&&Ac!==Ad)){this.updateStageContentForLegendChanged(Ae.pos);}}},isOnRight:function(Ab){return(Ab===m.RIGHT_MIDDLE||Ab===m.RIGHT_TOP||Ab===m.RIGHT_BOTTOM);},isOnRightTop:function(Ab){return Ab===m.RIGHT_TOP;},isLegendSwitchOverlap:function(){var Ae=AR.position(this.legend.domNode),Ac=AR.position(this.modeSwitchButton),Ad=Ae.x,Ak=Ae.y,Ag=Ad+Ae.w,Ai=Ak+Ae.h,Ab=Ac.x,Aj=Ac.y,Af=Ab+Ac.w,Ah=Aj+Ac.h;return !(Ad>=Af||Ak>=Ah||Ab>=Ag||Aj>=Ai);},updateStageContentForLegendChanged:function(Ae,Ad){var Ac=0,Ab=0;Ad=(typeof Ad==="number")?Ad:this.legendW;this.modeSwitchButtonRect.r=V;if(this.propInfo.showLegend){Ae=Ae||this.readGlobalProperty(AP.LEGEND_POSITION);Ac=this.isOnRight(Ae)?0:Ad;if(this.isLegendSwitchOverlap()){Ab=V+this.modeSwitchButtonRect.w;this.modeSwitchButtonRect.r=Ad+V;}}this.stage.setMainRect({x:Ac,y:0,w:parseInt(this.width-Ab-Ad,10),h:parseInt(this.height,10)});this.modeSwitchButton.style.right=this.modeSwitchButtonRect.r+"px";D.call(this);this.stage.setScene();this.stage.draw(false);},updateLegend:function(){var Ab=this.legend,Ad=this.abstractedModel,Ac=this.legendPlaceholder.style;Ac.width=this.legendW+"px";Ac.height=this.legendH+"px";Ab.width=this.legendW;Ab.height=this.legendH;Ab.cutBy=this.legendCutBy;Ab.minHeight=this.legendMinHeight;Ab.updateContainerSize(this.getWidth(),this.getHeight());Ab.feedData([{dataType:AT.COLOR_BY,dataObj:Ad.edgeColorByInfo},{dataType:AT.SIZE_BY,dataObj:Ad.edgeSizeByInfo},{dataType:AT.SIZE_BY,dataObj:Ad.itemSizeByInfo}],(this.readGlobalProperty(AP.LEGEND_MODE)===AI.MINIMIZED));Ab.updateAfterResize();},toggleLegend:function(Ab){var Ad=this.legend,Ac;if(!Ad||!Ad.hasRendered||!Ad.domNode){this.initLegend();Ad=this.legend;}Ac=Ad.domNode.style;if(!Ab){Ad.hideToolbar();Ac.display="none";}else{if(Ac.display!=="block"){Ac.display="block";}}},getCellForNode:function f(Ac){var Ae=Ac.unit,Ab=Ae.attribute,Ad=Ae.attributeElements[0];return{at:Ad.at,dei:Ad.dei,dpt:Ad.dpt,o:Ad.o,n:Ac.title,tui:Ad.tui,ui:Ad.tui,axis:1,v:Ac.text,tid:Ab.id};},getCellUnitIndex:function B(Ab){return Ab.o;},execFormatHandler:function(){var Ab=this.stage;if(Ab){Ab.execFormatHandler();}},onNDECreated:function(Ab){var Ad=this.stage,Ac=Ad.spriteCollection;Ab.forEach(function(Ah){var Ae=Ah.id,Ag=Ah.unitId;var Af=AF.findInArray(Ac,function(Ai){var Aj=Ai.unit;return Ai.type==="Circle"&&Aj.attribute.id===Ag&&Aj.attributeElements.some(function(Ak){return Ak.id.indexOf(Ae)!==-1;});});if(Af!==-1){Ad.addToSelection(Ac[Af]);}});Ad.draw(false,true);},isClearAllEnabled:function(Ac){var Ab=AF.getPropertyByPath(this,"modelData",{}),Ad=AF.getPropertyByPath(Ac,"attribute.sc",Ab.sc);return !!(Ad===undefined||Ad.showall);}});}());