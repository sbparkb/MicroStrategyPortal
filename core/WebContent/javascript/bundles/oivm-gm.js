mstrmojo.chart.Angle=mstrmojo.provide("mstrmojo.chart.Angle",{});mstrmojo.chart.model.enums.EnumDSSGraphNumberFormatType={DssGraphNumberFormatDefault:-2,DssGraphNumberFormatFixed:0,DssGraphNumberFormatCurrency:1,DssGraphNumberFormatDate:2,DssGraphNumberFormatTime:3,DssGraphNumberFormatPercentage:4,DssGraphNumberFormatFraction:5,DssGraphNumberFormatScientific:6,DssGraphNumberFormatCustom:7,DssGraphNumberFormatSpecial:8,DssGraphNumberFormatGeneral:9,DssGraphNumberFormatFromGrid:10};mstrmojo.chart.enums.EnumFormatType={FMT_UNDEFINED:0,FMT_LINE:1,FMT_FILL:2,FMT_FONT:3};mstrmojo.chart.enums.EnumGraphMatrixPiePlotType={GMPPT_CATEGORY:0,GMPPT_VALUE:1,GMPPT_GRID:2};mstrmojo.vi.viz.EnumVizStyles={GRAPH_MATRIX:"GraphMatrixVisualizationStyle",NETWORK:"NetworkVisualizationStyle",HEAT_MAP:"VIHeatMapVisualizationStyle",GOOGLE_MAP:"GoogleMapVisualizationStyle",ESRI_MAP:"ESRIMapVisualizationStyle",IMAGE_LAYOUT:"ImageLayoutVisualizationStyle"};mstrmojo.chart.model.enums.EnumDSSGraphPictureFormat={DssGraphPictureJPEG:0,DssGraphPictureGIF:1,DssGraphPicturePNG:2,DssGraphPictureWMF:3,DssGraphPictureBMP:4};mstrmojo.chart.enums.EnumCategoryAxisOidItem={OID_LABEL:0,OID_MAJOR_TICKS:1,OID_MINOR_TICKS:2};(function(){mstrmojo.vi.ui._IsUnitContainerTitleBar=mstrmojo.provide("mstrmojo.vi.ui._IsUnitContainerTitleBar",{_mixinName:"mstrmojo.vi.ui._IsUnitContainerTitleBar",layoutConfig:{w:{leftToolNode:"auto",textNode:"100%",rightToolNode:"auto"},xt:true},setDimensions:function A(C,B){return this._super("auto",B);}});}());mstrmojo.chart.enums.EnumObjectShape={OS_ELLIPSE:2,OS_LINE:5,OS_POLYGON:6,OS_RECTANGLE:7,OS_WEDGE:12,OS_WEDGECRUST:13,OS_POLYLINE:18,OS_PATH:24,OS_CIRCLE:100,OS_RINGSECTOR:101,OS_NORMALSECTOR:102};mstrmojo.chart.model.enums.EnumDSSGraphType={DssGraphTypeReserved:0,DssGraphTypeVertical_Area_Absolute:1,DssGraphTypeVertical_Area_Stacked:2,DssGraphTypeVertical_Area_BiPolar_Absolute:3,DssGraphTypeVertical_Area_BiPolar_Stacked:4,DssGraphTypeVertical_Area_DualAxis_Absolute:5,DssGraphTypeVertical_Area_DualAxis_Stacked:6,DssGraphTypeVertical_Area_Percent:7,DssGraphTypeHorizontal_Area_Absolute:8,DssGraphTypeHorizontal_Area_Stacked:9,DssGraphTypeHorizontal_Area_BiPolar_Absolute:10,DssGraphTypeHorizontal_Area_BiPolar_Stacked:11,DssGraphTypeHorizontal_Area_DualAxis_Absolute:12,DssGraphTypeHorizontal_Area_DualAxis_Stacked:13,DssGraphTypeHorizontal_Area_Percent:14,DssGraphTypeVertical_Bar_Side_by_Side:15,DssGraphTypeVertical_Bar_Stacked:16,DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:17,DssGraphTypeVertical_Bar_DualAxis_Stacked:18,DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:19,DssGraphTypeVertical_Bar_BiPolar_Stacked:20,DssGraphTypeVertical_Bar_Percent:21,DssGraphTypeHorizontal_Bar_Side_by_Side:22,DssGraphTypeHorizontal_Bar_Stacked:23,DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:24,DssGraphTypeHorizontal_Bar_DualAxis_Stacked:25,DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:26,DssGraphTypeHorizontal_Bar_BiPolar_Stacked:27,DssGraphTypeHorizontal_Bar_Percent:28,DssGraphTypeVertical_Line_Absolute:29,DssGraphTypeVertical_Line_Stacked:30,DssGraphTypeVertical_Line_BiPolar_Absolute:31,DssGraphTypeVertical_Line_BiPolar_Stacked:32,DssGraphTypeVertical_Line_DualAxis_Absolute:33,DssGraphTypeVertical_Line_DualAxis_Stacked:34,DssGraphTypeVertical_Line_Percent:35,DssGraphTypeHorizontal_Line_Absolute:36,DssGraphTypeHorizontal_Line_Stacked:37,DssGraphTypeHorizontal_Line_BiPolar_Absolute:38,DssGraphTypeHorizontal_Line_BiPolar_Stacked:39,DssGraphTypeHorizontal_Line_DualAxis_Absolute:40,DssGraphTypeHorizontal_Line_DualAxis_Stacked:41,DssGraphTypeHorizontal_Line_Percent:42,DssGraphTypePies:43,DssGraphTypeRing_Pie:44,DssGraphTypeMultiple_Pies:45,DssGraphTypeMultiple_Ring_Pies:46,DssGraphTypeMultiple_Proportional:47,DssGraphTypeMultiple_Proportional_Ring_Pies:48,DssGraphTypePie_Bar:49,DssGraphTypeRing_Pie_Bar:50,DssGraphTypeX_Y_Scatter:51,DssGraphTypeDualAxis_X_Y_Scatter:52,DssGraphTypeX_Y_Scatter_with_Labels:53,DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:54,DssGraphTypePolar_Coordinate_Chart:55,DssGraphTypeDualAxis_Polar_Coordinate_Chart:56,DssGraphTypeRadar_Line:57,DssGraphTypeRadar_Stacked_Area:58,DssGraphTypeDualAxis_Radar_Line:59,DssGraphTypeDualAxis_Radar_Stacked_Area:60,DssGraphTypeBubble:61,DssGraphTypeBubble_DualAxis:62,DssGraphTypeGantt_Chart:63,DssGraphTypeHiLo_Stock_Chart:64,DssGraphTypeHiLo_DualAxis_Stock_Chart:65,DssGraphTypeHiLoOpen_Stock_Chart:66,DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:67,DssGraphTypeHiLoOpenClose_Stock_Chart:68,DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:69,DssGraphTypeSpectral_Chart:70,DssGraphTypeVertical_Histogram:71,DssGraphTypeHorizontal_Histogram:72,DssGraphTypeTable_Chart:73,DssGraphTypeD3_Riser_Bars:74,DssGraphTypeD3_Riser_Pyramids:75,DssGraphTypeD3_Riser_Octogans:76,DssGraphTypeD3_Riser_Cut_Corner_Bars:77,DssGraphTypeD3_Floating_Cubes:78,DssGraphTypeD3_Floating_Spheres:79,DssGraphTypeD3_Connect_Group_Areas:80,DssGraphTypeD3_Connect_Group_Ribbons:81,DssGraphTypeD3_Connect_Group_Steps:82,DssGraphTypeD3_Connect_Series_Areas:83,DssGraphTypeD3_Connect_Series_Ribbons:84,DssGraphTypeD3_Connect_Series_Steps:85,DssGraphTypeD3_Surface:86,DssGraphTypeD3_Surface_with_Sides:87,DssGraphTypeD3_Honeycomb_Surface:88,DssGraphTypeD3_X_Y_Z_Scatter_Chart:89,DssGraphTypeD3_X_Y_Z_Scatter_with_Labels_Chart:90,DssGraphTypeVertical_Bar_Absolute:91,DssGraphTypeHorizontal_Bar_Absolute:92,DssGraphTypeBubble_With_Labels:93,DssGraphTypeBubble_DualAxis_With_Labels:94,DssGraphTypeGauge:95,DssGraphTypeFunnel:96,DssGraphTypePareto:97,DssGraphTypePareto_Percent:98,DssGraphTypeBoxPlot:99,DssGraphTypeRadar_Area_Stacked:100,DssGraphTypeRadar_Absolute_Area:101,DssGraphTypeVertical_Bar_BiPolar_Absolute:102,DssGraphTypeVertical_Bar_DualAxis_Absolute:103,DssGraphTypeHorizontal_Bar_BiPolar_Absolute:104,DssGraphTypeHorizontal_Bar_DualAxis_Absolute:105,DssGraphRadar_Line_Stacked:106,DssGraphRadar_DualAxis_Radar_Stacked_Line:107,DssGraphRadar_DualAxis_Radar_Area:108,DssGraphTypeMaxDeskTopGraphTypes:109,DssGraphTypeBarArea:201,DssGraphTypeBarLine:202,DssGraphTypeAreaLine:203,DssGraphTypeDualAxisBarArea:204,DssGraphTypeDualAxisBarLine:205,DssGraphTypeDualAxisAreaLine:206,DssGraphTypeGridChart:20000,DssGraphTypeVertical_Bar_DualAxis_Percent:20001,DssGraphTypeVertical_Line_DualAxis_Percent:20002,DssGraphTypeVertical_Area_DualAxis_Percent:20003,DssGraphTypeHorizontal_Bar_DualAxis_Percent:20004,DssGraphTypeHorizontal_Line_DualAxis_Percent:20005,DssGraphTypeHorizontal_Area_DualAxis_Percent:20006,DssGraphTypeHorizontal_CategoryPies_Absolute:21077,DssGraphTypeHorizontal_CategoryPies_Stacked:21078,DssGraphTypeHorizontal_CategoryPies_Percent:21079,DssGraphTypeVertical_CategoryPies_Absolute:21080,DssGraphTypeVertical_CategoryPies_Stacked:21081,DssGraphTypeVertical_CategoryPies_Percent:21082,DssGraphTypeScatter_Pies:21111,DssGraphTypeBubble_Pies:21121,DssGraphTypeGrid_Pies:21211,DssGraphTypeVertical_Bullet:21212,DssGraphTypeHorizontal_Bullet:21213};mstrmojo.chart.enums.EnumTrendLineIndex={TLI_Y1:0,TLI_Y2:1,TLI_BOTH:2};mstrmojo.VisEnum={ControlType:{BUTTON:"button",LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",SPLITTER:"splitter",GM_ROW_HEADER:"rh",GM_ROW_HEADER_TEXT:"rhtext",GM_ROW_HEADER_EXTRA:"rhext",GM_COL_HEADER:"ch",GM_COL_HEADER_TEXT:"chtext",GM_COL_HEADER_EXTRA:"chext",GM_YAXIS:"y",GM_XAXIS:"x",GM_YLABEL:"y-label",GM_XLABEL:"x-label",GM_ROW_HEADER_TITLE:"rht",GM_ROW_HEADER_TITLE_TEXT:"rhttext",GM_COL_HEADER_TITLE:"cht",GM_COL_HEADER_TITLE_TEXT:"chttext",GM_MINI_CHART:"chart",GM_TEXT_BODY:"text-body",GM_SHAPE:"shape",GM_MARKER:"marker",GM_SET_SHAPE:"set-shape",GM_YAXIS2:"y2",GM_XAXIS2:"x2",GM_TREND_LINE:"trendLine",GM_TREND_LINE_HOVER:"trendLineHover",GM_TREND_LINE_SELECT:"trendLineSelect",GM_REF_LINE:"referenceLine",GM_REF_LINE_HOVER:"referenceLineHover",GM_REL_LINE_SELECT:"referenceLineSelect",GM_HIGHLIGHT_BOX:"highlight-box",GM_AXIS_TEXT:"axis-text",GM_AXIS_WORD:"axis-word",GM_SVG_X_NUMERIC:"svg-x-numeric",GM_SVG_X_CATEGORY:"svg-x-category",GM_SVG_Y_NUMERIC:"svg-y-numeric",GM_SVG_Y_CATEGORY:"svg-y-category",GM_X_NUMERIC:"x-numeric",GM_X_CATEGORY:"x-category",GM_Y_NUMERIC:"y-numeric",GM_Y_CATEGORY:"y-category",GM_SVG_CHART:"svg-chart",GM_DATA_LABEL:"data-label",GM_YAXIS_LINE:"y-line",GM_XAXIS_LINE:"x-line",GM_YAXIS2_LINE:"y2-line",GM_XAXIS2_LINE:"x2-line",LGD_TITLE:"lgd-title",LGD_TEXT:"lgd-text",LGD_COLORBOX:"lgd-colorbox",LGD_COLORBOX_CTN:"lgd-colorbox-ctn",LGD_CANVAS:"lgd-canvas",LINE_CONTAINER:"line-ctn",GM_V_MATRIX_LINE:"v-line",GM_H_MATRIX_LINE:"h-line",GM_V_CHART_LINE:"v-ctline",GM_H_CHART_LINE:"h-ctline",GM_CHART_ROW:"ct-row",GM_CHART_COL:"ct-col",GM_H_GRID_LINE:"h-gline",GM_V_GRID_LINE:"v-gline",GM_H_MINOR_GRID_LINE:"h-gline-minor",GM_V_MINOR_GRID_LINE:"v-gline-minor",GM_ORIGIN_LINE:"originLine",GM_ORIGIN_LABEL:"origin-label",GM_ORIGIN_LINE_H:"origin-line-h",GM_ORIGIN_LINE_V:"origin-line-v",GM_ORIGIN_LABEL_H:"origin-label-h",GM_ORIGIN_LABEL_V:"origin-label-v",GM_DUMMY_A:"dummy-a",GM_V_EXTRA_LINE:"v-extra-line",GM_REF_LABEL:"ref-label",GM_RIGHT_BORDER:"border-r",GM_BOTTOM_BORDER:"border-b"},GMDropZoneID:{ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10},NETWORK_LOCAL_PROPS:{ZOOM_FACTOR:"zf",NODE_POSITION:"np"},NETWORK_PROPERTIES:{showLegend:"showLegend",showEdgeDirection:"showedgearrow",showTransition:"animatelayout",nodeSizeAggregation:"nodesizeaggfunc",minNodeSize:"minns",maxNodeSize:"maxns",themeType:"th",circleLabelFont:"BubFnt",modifiedNodes:"mn",layoutMode:"layout",legendPosition:"legendposition",dragMode:"mode",bubbleStyle:"bbs",propsCategory:"pc",lgdBgFillClr:"lgdBgFillClr",lgdBgFillTrans:"lgdBgFillTrans",lgdFntClr:"lgdFntClr",lgdFntSz:"lgdFntSz",lgdFntFml:"lgdFntFml",lgdFntStyle:"lgdFntStyle"},NETWORK_LAYOUT:{CIRCULAR:"circular",LINEAR:"linear",FORCE_DIRECTED:"forceDirected"},NETWORK_DRAG_MODE:{pan:0,select:1},NETWORK_AGGREGATION_METHOD:{"Count of":0,"Sum of":1,"Average of":2,"Min of":3,"Max of":4},NETWORK_MIN_NODE_SIZE_TYPE:{PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3},NETWORK_MAX_NODE_SIZE_TYPE:{AUTOMATIC:1,MANUAL:2},NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE:[0,0.2],HEATMAP_PROPERTIES:{showLegend:"showLegend",deleteButton:"ed",showMetricValues:"mv",labelSize:"lb",layout:"la",themeType:"th",headerType:"he",deletedList:"dl",refreshType:"rt",metricList:"ml",colorByType:"cbt",absoluteFixed:"abs",blendColor:"blc",background:"bg",legendBackground:"lbg",headerColors:"hcl",fonts:"fts",propsCategory:"pc",attrColorByOpacity:"acbo",metricColorByOpacity:"mcbo"},HEATMAP_LABEL_SIZE:{On:0,Off:1,Proportional:2},MAPS_PROPERTIES:{SHOW_LEGEND:"showLegend"},VIS_CARDLIMIT:{GRID:250,NON_GRID:8000},GMLegendDataType:{COLOR_BY:1,SIZE_BY:2},GMLegendFormatingPropertyTag:{LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",COLOR_SQUARE_COLOR:"clrSqrClr"},LegendPropertyTag:{LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr"},EnumLegendMode:{RESTORED:1,MINIMIZED:2},EnumColorRankMode:{INVALID:-1,VALUE:0,TOP:1,BOTTOM:2,TOP_PERCENT:3,BOTTOM_PERCENT:4},FormNameDisplayType:{OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4},SERVER_JSON_ERROR_TYPE:{EMPTY_DATA:0,NO_DATASET:1,AE_ERROR:2,NO_TEMPLATE_UNIT:3},NETWORK_CIRCLE_BORDER_WIDTH:8,IMAGELAYOUT_PROPERTIES:{DISPLAY_MODE:"mt",MAX_SIZE_TYPE:"ty",MAX_SIZE_VALUE:"val",MIN_SIZE_TYPE:"mst",MIN_SIZE_VALUE:"msv",MAP_FILE_PATH:"mf",SHAPE_FILL_OPC_PER:"shapeFillTrans",SHAPE_FILL_COLOR:"shapeClr",SHAPE_BORDER_STYLE:"shapeBorderCmbStyle",SHAPE_BORDER_COLOR:"shapeBorderClr",DATA_LABEL_SWITCH:"dls",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",BLANK_MAP_BORDER_STYLE:"blankMapBorderStyle",BLANK_MAP_BORDER_COLOR:"blankMapBorderClr",BLANK_MAP_COLOR:"blankMapClr",DEFAULT_MAP_COLOR:"dftMapClr",DEFAULT_BUBBLE_COLOR:"dftBubbleClr",DEFAULT_MAP_BORDER_COLOR:"dftMapBorderClr",DEFAULT_BUBBLE_BORDER_COLOR:"dftBubbleBorderClr",LEGEND_FONT_SIZE:"lgFntSz",LEGEND_FONT_FAMILY:"lgFntFml",LEGEND_FONT_COLOR:"lgFntClr",LEGEND_FONT_STYLE:"lgFntStyle",LEGEND_BACKGROUND_COLOR:"lgBgClr",LEGEND_OPC_PER:"lgBgFillTrans",LEGEND_POSITION:"lgPos",LEGEND_SHOW:"lgShow",LEGEND_MODE:"lgMode",LEGEND_SCALE:"lgScale",H_MATRIX_LINE_COLOR:"hMatrixLnClr",V_MATRIX_LINE_COLOR:"vMatrixLnClr",ALL_MATRIX_LINE_COLOR:"allMatrixLnClr",H_MATRIX_LINE_STYLE:"hMatrixLnCmbStyle",V_MATRIX_LINE_STYLE:"vMatrixLnCmbStyle",ALL_MATRIX_LINE_STYLE:"allMatrixLnCmbStyle"}};mstrmojo.chart.enums.EnumGraphObjectType={GOT_AXIS_TITLE:0,GOT_AXIS_LABEL:1,GOT_AXIS_LINE:2,GOT_MAJOR_GRID:3,GOT_MINOR_GRID:4,GOT_INTERLACED_GRID:5};mstrmojo.chart.enums.EnumAttachedPointsStyle={NORMAL:0,TOOLTIP_UPPER:1,TOOLTIP_LOWER:2,TOOLTIP_MIDDLE:3,TOOLTIP_U2L:4,TOOLTIP_TRAPEZOID:5};(function(){mstrmojo.vi.ui.theme=mstrmojo.provide("mstrmojo.vi.ui.theme",{getThemeClass:function A(){var C=this.parent||this.opener,B="";while(C){var D=C.themeClassName;if(D){B=D;break;}C=C.parent||C.opener;}return B;}});}());mstrmojo.chart.enums.EnumInstructionName={JSONInsUndefined:0,JSONInsSaveState:1,JSONInsRestoreState:2,JSONInsClip:11,JSONInsScale:12,JSONInsRotate:13,JSONInsNewPath:101,JSONInsClosePath:102,JSONInsMoveTo:111,JSONInsLineTo:112,JSONInsBezierCurveTo:113,JSONInsAddRect:121,JSONInsAddArc:122,JSONInsAddNeedle:131,JSONInsAddGaugeMarker:132,JSONInsAddString:201,JSONInsSetLineDash:301,JSONInsSetLineWidth:302,JSONInsSetLineJoin:303,JSONInsSetFontSize:311,JSONInsSetRGBAFillColor:321,JSONInsSetRGBAStrokeColor:322,JSONInsFillPath:401,JSONInsStrokePath:402,JSONInsFillSimple:501,JSONInsFillPattern:502,JSONInsFillGradient:503,JSONInsFillEdgeType:511,JSONInsFillDonutOrSphere:512,JSONInsFillRadientGradient:513,JSONInsFillDonut2Rect:514,JSONInsFillBorderMetallic:515,JSONInsMakeDarker:521,JSONInsRestoreColor:522,JSONInsApplyLineFormat:601,JSONInsAddFormatedText:701,JSONInsApplyBeveledFrameToRectangle:801};mstrmojo.chart.enums.EnumDSSGraphObjectManager={DssChartManager:20000,DssPlotManager:20001,DssPlot:20002,DssLegend:20003,DssAreaSeriesRenderer:20004,DssBarSeriesRenderer:20005,DssLineSeriesRenderer:20006,DssStepLineSeriesRenderer:20007};mstrmojo.chart.model.enums.EnumDSSGraphStockLayout={DssGraphStockLayoutDefault:0,DssGraphStockLayoutVerticalLine:1,DssGraphStockLayoutCandleStick:2,DssGraphStockLayoutLine:3,DssGraphStockLayoutArea:4,DssGraphStockLayoutLineCircle:5,DssGraphStockLayoutDot:6,DssGraphStockLayoutArea2:7};mstrmojo.chart.enums.EnumCategoryLabelStyle={CLS_AUTOMATIC:0,CLS_NORMAL:1,CLS_STAGGER:2,CLS_MANUAL:3};mstrmojo.chart.enums.EnumDataSetStatus={DTST_INVALID:0,DTST_OKAY:1,DTST_DISABLED:2};mstrmojo.chart.model.enums.EnumDSSGraphFillBevelEffect={DssGraphFillBevelNone:0,DssGraphFillBevelSmoothEdge:1,DssGraphFillBevelChiselEdge:2,DssGraphFillBevelDonut:3,DssGraphFillBevelSphere:4};mstrmojo.chart.enums.EnumGraphMatrixMarkerTypeInChart={_LINE_IN_LINE:0,_DOTS_IN_LINE:1,_ISODOT_IN_LINEAREA:2,_MUTATION_IN_LINE:3,_BAR:4,_SHAPES_IN_BUBBLESCATTER:5,_SHAPES_IN_GRID:6,_TICK_CATEGORY:7,_TICK_VALUE:8,_TICK_GRID:9,_PIE:10};mstrmojo.chart.enums.EnumLegendLayout={LL_LegendFreeFloat:0,LL_LegendOnRightSide:1,LL_LegendOnLeftSide:2,LL_LegendBelowChart:3};mstrmojo.chart.enums.EnumLineJoinType={LJT_MITER:0,LJT_BEVEL:1,LJT_ROUND:2};mstrmojo.chart.enums.EnumShowFace={SF_FRONT:1,SF_SIDE:2,SF_HIDDEN_SIDE:4};mstrmojo.chart.model.enums.EnumDSSGraphPictureScaleType={DssGraphPictureScaleNone:0,DssGraphPictureScale2Fit:1,DssGraphPictureScale2Frame:2,DssGraphPictureScale2Background:3,DssGraphPictureTiled:4,DssGraphPictureTiled2Frame:5,DssGraphPictureTiled2Background:6,DssGraphPictureBrickHorizontal:7,DssGraphPictureBrickVertical:8,DssGraphPictureStack:9,DssGraphPictureScaleProportional:10};mstrmojo.chart.enums.EnumSliceType={SLICE_STEPWISE:0,SLICE_GROUPADJACENT:1,SLICE_INDEPENDENT:2,SLICE_STRIPPED:3,SLICE_SPECIFY:4,SLICE_MIXED_GROUP:5,SLICE_MIXED_SERIES:6};mstrmojo.chart.model.enums.EnumDSSGraphObject={DssGraphNull:-3,DssGraphBackground:1,DssGraphFrame:2,DssGraphFootnote:3,DssGraphSubtitle:4,DssGraphTitle:5,DssGraphLegendArea:6,DssGraphLegendLine:7,DssGraphLegendMarker:8,DssGraphLegendText:9,DssGraphCurve:257,DssGraphDataLine:258,DssGraphDataMarker:259,DssGraphDataText:260,DssGraphDivBiPolar:261,DssGraphErrorBar:262,DssGraphLinrExp:263,DssGraphLinrLine:264,DssGraphLinrLog:265,DssGraphLinrNatLog:266,DssGraphLinrNPoly:267,DssGraphLinrText:268,DssGraphMeanLine:269,DssGraphMovAvgLine:270,DssGraphO1Body:271,DssGraph2DO1Label:272,DssGraphO1Major:273,DssGraphO1Minor:274,DssGraphO1Super:275,DssGraphO1Title:276,DssGraphO2Body:277,DssGraph2DO2Label:278,DssGraphO2Major:279,DssGraphO2Minor:280,DssGraphO2Title:281,DssGraphConnectDataLine:282,DssGraphRiser:286,DssGraphRiserShadow:287,DssGraphStdDevLine:288,DssGraphX1Body:289,DssGraphX1Label:290,DssGraphX1Major:291,DssGraphX1Minor:292,DssGraphXTitle:293,DssGraphY1Body:295,DssGraphY1Label:296,DssGraphY1Major:297,DssGraphY1Minor:298,DssGraphY1Title:299,DssGraphY2Body:301,DssGraphY2Label:302,DssGraphY2Major:303,DssGraphY2Minor:304,DssGraphY2Title:305,DssGraph3DShowColumnHeaders:318,DssGraph3DShowLeftHeaders:321,DssGraph3DShowRightHeaders:323,DssGraph3DShowRowHeaders:325,DssGraphOBPBox:329,DssGraphOBPMedian:330,DssGraphOBPStem:331,DssGraphOBPTail:332,DssGraphPieFeelerLine:337,DssGraphPieFeelerLabel:338,DssGraphPieGroupLabel:339,DssGraphPieRingLabel:340,DssGraphPieSlice:341,DssGraphSeriesTitle:398,DssGraphConnectStackLine:399,DssGraphDataTextStackTotal:401,DssGraphOPILBLValue:418,DssGraphUserLine1:414,DssGraphUserLine2:415,DssGraphUserLine3:416,DssGraphUserLine4:417,DssGraphDataTextConnectLine:431,DssGraphGauge:444,DssGraphGaugeTitle:450,DssGraphGaugeRange:451,DssGraphY3Body:477,DssGraphY3Label:478,DssGraphY3Major:479,DssGraphY3Minor:480,DssGraphY4Body:483,DssGraphY4Label:484,DssGraphY4Major:485,DssGraphY4Minor:486,DssGraph3DColHeader:512,DssGraph3DColTitle:515,DssGraph3DDataText:518,DssGraph3DRowHeader:552,DssGraph3DRowTitle:555,DssGraph3DRYHeader:558,DssGraph3DRYTitle:561,DssGraphGaugeBorder:1319,DssGraphGaugeNeedleBase:1320,DssGraphGaugeNeedleBaseLine:1330,DssGraphZBody:10003,DssGraphTrendLine:10004,DssGraphY1RightBody:10005,DssGraphY1RightTitle:10006,DssGraphReferenceLine:10007,DssGraphStraightLine:10008,DssGraphTargetLine:10009,DssGraphRefLineText:10010,DssGraphTrendLineText:10011,DssGraphUserLabel1:100100,DssGraphUserLabel2:100101,DssGraphUserLabel3:100102,DssGraphUserLabel4:100103,DssGraphX2Body:100200,DssGraphX2Label:100201,DssGraphX2Major:100202,DssGraphX2Minor:100203,DssGraphX2Title:100204};mstrmojo.chart.model.enums.EnumDSSGraphProperty={DssGraphTextContent:9999,DssGraphContent:9999,DssGraphPropertyReserved:0,DssGraphAutoFitO1:4,DssGraphAutoFitO2:5,DssGraphAutoFitX:6,DssGraphAutoFitY1:7,DssGraphAutoFitY2:8,DssGraphGroupSpacing:10,DssGraphRiserWidth:11,DssGraphColorBySeries:12,DssGraphCurveColorAsSeries:13,DssGraphSDMOVAFactor:14,DssGraph2DAngle:18,DssGraph2DDepth:20,DssGraphDepthMode:21,DssGraph2ScaleDirectionX:22,DssGraph2ScaleDirectionY1:23,DssGraph2ScaleDirectionY2:24,DssGraph2ExcludeZeroX:25,DssGraph2ExcludeZeroY1:26,DssGraph2ExcludeZeroY2:27,DssGraphFormatDataTextX:28,DssGraphFormatDataTextY1:29,DssGraphFormatDataTextY2:30,DssGraphFormatX:33,DssGraphFormatY1:34,DssGraphFormatY2:35,DssGraphFormatZ:36,DssGraphGridLineO1:37,DssGraphGridLineO2:38,DssGraphGridLineX:39,DssGraphGridLineY1:40,DssGraphGridLineY2:41,DssGraphLabelModeO1:48,DssGraphLabelModeO2:49,DssGraphLegendLocation:52,DssGraphTitleXLocation:54,DssGraphTitleY1Location:55,DssGraphTitleY2Location:56,DssGraph2LogScaleX:57,DssGraph2LogScaleY1:58,DssGraph2LogScaleY2:59,DssGraphMarkerShape:60,DssGraphMarkerSize:61,DssGraph2DPlaceX:65,DssGraph2DPlaceY1:66,DssGraph2DPlaceY2:67,DssGraphConnectLine:68,DssGraphShowStepLine:70,DssGraph2ScaleEndX:74,DssGraph2ScaleEndY1:75,DssGraph2ScaleEndY2:76,DssGraph2DScaleFreqO1:87,DssGraph2DScaleFreqO2:88,DssGraph2DScaleFreqX:89,DssGraph2DScaleFreqY1:90,DssGraph2DScaleFreqY2:91,DssGraphScaleX:92,DssGraphScaleY1:93,DssGraphScaleY2:94,DssGraphShowSDDataLineType:96,DssGraphSDRiserType:97,DssGraphShowSDLine:98,DssGraphShowSDCurve:99,DssGraphShowSDLinrCorr:101,DssGraphShowSDLinrExp:102,DssGraphShowSDLinrFormula:103,DssGraphShowSDLinrLine:104,DssGraphShowSDLinrLog:105,DssGraphShowSDLinrNatLog:106,DssGraphShowSDLinrNPoly:107,DssGraphSDPolyFactor:108,DssGraphShowSDMeanLine:109,DssGraphShowSDMOVALine:110,DssGraphShowSDSTDDLine:111,DssGraphShowDataText:113,DssGraphShowDivBiPolar:114,DssGraphShowErrorBar:115,DssGraphShowLegendText:116,DssGraphShow2DO1Label:117,DssGraphShow2DO1:-117,DssGraphShow2DO2:118,DssGraphOffScaleTypeX:119,DssGraphOffScaleTypeY1:120,DssGraphOffScaleTypeY2:121,DssGraphShowQuadrants:122,DssGraphShowRiserShadows:123,DssGraphShow2DXTitle:124,DssGraphShow2DY1Title:125,DssGraphShow2DY2Title:126,DssGraphShow2DXLabel:127,DssGraphShow2DX:-127,DssGraphShow2DY1Label:128,DssGraphShow2DY1:-128,DssGraphShow2DY2Label:129,DssGraphShow2DY2:-129,DssGraphShowZeroLineX:130,DssGraphShowZeroLineY1:131,DssGraphShowZeroLineY2:132,DssGraph2DSideO1:133,DssGraph2DSideO2:134,DssGraph2DSideX:135,DssGraph2DSideY1:136,DssGraph2DSideY2:137,DssGraph2DSDSplitY:140,DssGraphStaggerO1:142,DssGraphStaggerO2:143,DssGraphStaggerX:144,DssGraphStaggerY1:145,DssGraphStaggerY2:146,DssGraphUniformBorders:148,DssGraphPieDepthValue:192,DssGraphPieHoleSizeValue:198,DssGraphPieInset:200,DssGraphPiesPerRowValue:201,DssGraphPieRotationValue:202,DssGraphShowFeeler:204,DssGraphShowLBLFeelerLabel:205,DssGraphShowLBLFeeler:-205,DssGraphShowLBLPie:206,DssGraphShowLBLRing:207,DssGraphDeleteSlice:208,DssGraphDetachSlice:209,DssGraphPieRestore:210,DssGraphPieTiltValue:211,DssGraphPieTiltOn:212,DssGraphShowPolarCoordinateAxis:215,DssGraphShowPolarConnectLines:218,DssGraphStockDataValueType:222,DssGraphShowBubbleGrid:245,DssGraphSDShowDataText:247,DssGraphShowTitleSeries:248,DssGraphConnectStackBars:249,DssGraphLegendBox:250,DssGraphLinkColors:260,DssGraph3DCustomView:265,DssGraph3DGridFloor:277,DssGraph3DGridLWall:278,DssGraph3DGridRiser:279,DssGraph3DGridRWall:280,DssGraph3DColTitleLocation:285,DssGraph3DLYTitleLocation:287,DssGraph3DRowTitleLocation:288,DssGraph3DRYTitleLocation:289,DssGraph3DScalefreqX:299,DssGraph3DScalefreqY:300,DssGraph3DScalefreqZ:301,DssGraphShow3DScatterLine:308,DssGraphShow3DLineToLWall:309,DssGraphShow3DLineToFloor:310,DssGraphShow3DLineToRWall:311,DssGraphSD3DRiserType:312,DssGraphShow3DShowDataLabelsBox:313,DssGraph3DOffScaleTypeX:314,DssGraph3DOffScaleTypeY:315,DssGraph3DOffScaleTypeZ:316,DssGraphShow3DCHeader:318,DssGraphShow3DColTitle:319,DssGraph3DShowDataText:320,DssGraphShow3DLNumber:321,DssGraphShow3DLYTitle:322,DssGraphShow3DRNumber:323,DssGraphShow3DRYTitle:324,DssGraphShow3DRHeader:325,DssGraphShow3DRowTitle:326,DssGraphShow3DFloor:327,DssGraphShow3DLegend:328,DssGraphShow3DLWall:329,DssGraphShow3DRWall:330,DssGraph3DViewStruct:337,DssGraphACMColorModel:549,DssGraphLegendItems:554,DssGraphSeriesColor:556,DssGraphReverseGroup:558,DssGraphReverseSeries:559,DssGraphSeriesByColumn:560,DssGraphAreaBackColor:561,DssGraphAreaTransparency:563,DssGraphAreaColor:564,DssGraphAreaPattern:566,DssGraphAreaSFX:567,DssGraphFontAlign:570,DssGraphFontTransparency:573,DssGraphFontColor:574,DssGraphFontName:576,DssGraphFontRotation:578,DssGraphVirtualFontSize:583,DssGraphFontStyle:584,DssGraphType:585,DssGraphLineTransparency:587,DssGraphLineColor:588,DssGraphLinePattern:589,DssGraphVirtualLineWidth:591,DssGraphFootnoteLocation:592,DssGraphFrameLocation:593,DssGraphSubTitleLocation:594,DssGraphTitleLocation:595,DssGraphShowfootnote:596,DssGraphShowSubtitle:597,DssGraphShowTitle:598,DssGraphFontBox:601,DssGraphFontSize:603,DssGraphLockFontSize:604,DssGraphLineWidth:605,DssGraphAreaAlpha:608,DssGraphLineAlpha:609,DssGraphFontAlpha:610,DssGraphAreaCustomBevelEffect:612,DssGraphFormatDataTextAdv:616,DssGraphFormatXAdv:618,DssGraphFormatY1Adv:619,DssGraphFormatY2Adv:620,DssGraphFormatZAdv:621,DssGraphMiddleValue:630,DssGraphSplitYPosition:631,DssGraphAxisShowUserLine:632,DssGraphAxisUserLineValue:633,DssGraphAxisUserLineAxis:634,DssGraphMarkerLayout:637,DssGraphPieDataValueLoc:638,DssGraphPieDataLabelLoc:639,DssGraph2DOrdSpaceMode:642,DssGraphLegendLock:644,DssGraphGridStepY1:645,DssGraphGridStepY2:646,DssGraphGridStepX:647,DssGraphDataTextShowConnectLine:652,DssGraphGridLineZ:658,DssGraphScaleZ:659,DssGraphStaggerZ:660,DssGraph2ScaleEndZ:662,DssGraph2ExcludeZeroZ:663,DssGraph2ScaleDirectionZ:664,DssGraphGridStepZ:665,DssGraphGaugeInfo:668,DssGraphGaugeFancyBox:669,DssGraphSDMarkerSize:671,DssGraphSDMarkerShape:683,DssGraphMetric1:690,DssGraphMetric2:691,DssGraphStockStyle:692,DssGraph2ScaleDirectionY3:693,DssGraph2ExcludeZeroY3:694,DssGraphGridLineY3:697,DssGraphFormatY3Adv:699,DssGraphGridStepY3:701,DssGraphOffScaleTypeY3:702,DssGraphShow2DY3:704,DssGraph2DSideY3:706,DssGraphStaggerY3:707,DssGraph2DPlaceY3:709,DssGraph2ScaleEndY3:710,DssGraph2DScaleFreqY3:713,DssGraphScaleY3:714,DssGraph2ScaleDirectionY4:715,DssGraph2ExcludeZeroY4:716,DssGraphGridLineY4:719,DssGraphFormatY4Adv:721,DssGraphGridStepY4:723,DssGraphOffScaleTypeY4:724,DssGraphShow2DY4:726,DssGraph2DSideY4:728,DssGraphStaggerY4:729,DssGraph2DPlaceY4:731,DssGraph2ScaleEndY4:732,DssGraph2DScaleFreqY4:735,DssGraphScaleY4:736,DssGraphSpiderLines:739,DssGraphPolarStartAngle:740,DssGraphMetric3:742,DssGraphRadarCircularDataLines:782,DssGraphRemoteAxis:784,DssGraphConnectFirstLast:790,DssGraphGaugeShowAxisLabelsOutside:791,DssGraphGaugeShowNeedle:792,DssGraphTailShape:793,DssGraphPieForceRound:794,DssGraphGaugeStyleValue:795,DssGraphGaugeBorderStyleValue:796,DssGraphGaugeBorderThicknessValue:797,DssGraphGaugeRangeThicknessValue:798,DssGraphGaugeRangeStartAngleValue:799,DssGraphGaugeRangeStopAngleValue:800,DssGraphGaugeNeedleStyleValue:801,DssGraphCurvedLines:804,DssGraphAreaBevelEffect:879,DssGraphFontAntiAlias:881,DssGraphFormatDataTextY3:695,DssGraphFormatDataTextY4:717,DssGraphColorPalette:10000,DssGraphOriContent:10001,DssGraphFillEffect:10002,DssGraphGradient:10003,DssGraphSDShowToolTip:10004,DssGraphSDToolTip:10005,DssGraphSDRegressionType:10006,DssGraph2LogScale:10007,DssGraphManualMajor:10008,DssGraphManualMinor:10009,DssGraph2ScaleDirection:10010,DssGraphShow2DAxisLine:10011,DssGraph2ExcludeZero:10012,DssGraph2ScaleUseMax:10013,DssGraph2ScaleUseMin:10014,DssGraph2ScaleMax:10015,DssGraph2ScaleMin:10016,DssGraphShow2DAxisLabels:10017,DssGraph2ScaleEndMax:10018,DssGraph2ScaleEndMin:10019,DssGraphShow2DAxisMajor:10020,DssGraphShow2DAxisMinor:10021,DssGraph2DSide:10022,DssGraphStyleMajor:10023,DssGraphStyleMinor:10024,DssGraphCountMajor:10025,DssGraphCountMinor:10026,DssGraphShowTotalValue:10027,DssGraph2DPie:10028,DssGraphShowDataValue:10029,DssGraphShowDVPercent:10030,DssGraphShowDataLabel:10031,DssGraphShowPieLabelOnSide:10032,DssGraphShowMarker:10033,DssGraphShowMetric1:10034,DssGraphShowMetric2:10035,DssGraphShowMetric3:10036,DssGraphMetric1Style:10037,DssGraphMetric2Style:10038,DssGraphMetric3Style:10039,DssGraphShowLine:10040,DssGraphShowToolTip:10041,DssGraphToolTip:10042,DssGraphAxisAutoFit:10043,DssGraphAxisStagger:10044,DssGraphAxisScaleFreq:10045,DssGraphMetric1Value:10046,DssGraphMetric2Value:10047,DssGraphMetric3Value:10048,DssGraph2AxisFormatText:10049,DssGraph2AxisFormatDataText:10050,DssGraphDPI:10051,DssGraphDocSize:10052,DssGraphAutoArrange:10053,DssGraph2DSplitYAutomatic:10054,DssGraphHistogramRangeMin:10055,DssGraphHistogramRangeMax:10056,DssGraphHistogramBuckets:10057,DssGraphGaugeSAngle:10058,DssGraphGaugeEAngle:10059,DssGraphGaugeThickness:10060,DssGraphGauge1Show:10061,DssGraphGauge1Min:10062,DssGraphGauge1Max:10063,DssGraphGauge2Show:10064,DssGraphGauge2Min:10065,DssGraphGauge2Max:10066,DssGraphGauge3Show:10067,DssGraphGauge3Min:10068,DssGraphGauge3Max:10069,DssGraphGauge4Show:10070,DssGraphGauge4Min:10071,DssGraphGauge4Max:10072,DssGraphGauge5Show:10073,DssGraphGauge5Min:10074,DssGraphGauge5Max:10075,DssGraphAxisDataTextPlace:10076,DssGraphAxisNumberFormat:10077,DssGraphAxisDataNumberFormat:10078,DssGraphAxisHasErrorBar:10079,DssGraphAxisHasMiddleValue:10080,DssGraphHeight:10081,DssGraphWidth:10082,DssGraphPicture:10083,DssGraph3DTurnXCounterClockwise:10084,DssGraph3DTurnYCounterClockwise:10085,DssGraph3DTurnZCounterClockwise:10086,DssGraph3DTurnXClockwise:10087,DssGraph3DTurnYClockwise:10088,DssGraph3DTurnZClockwise:10089,DssGraph3DMoveXTowardsOrigin:10090,DssGraph3DMoveYTowardsOrigin:10091,DssGraph3DMoveZTowardsOrigin:10092,DssGraph3DMoveXAwayFromOrigin:10093,DssGraph3DMoveYAwayFromOrigin:10094,DssGraph3DMoveZAwayFromOrigin:10095,DssGraph3DDecreaseCubeX:10096,DssGraph3DDecreaseCubeY:10097,DssGraph3DDecreaseCubeZ:10098,DssGraph3DIncreaseCubeX:10099,DssGraph3DIncreaseCubeY:10100,DssGraph3DIncreaseCubeZ:10101,DssGraph3DDecreaseWallX:10102,DssGraph3DDecreaseWallY:10103,DssGraph3DDecreaseWallZ:10104,DssGraph3DIncreaseWallX:10105,DssGraph3DIncreaseWallY:10106,DssGraph3DIncreaseWallZ:10107,DssGraph3DPanXLeft:10108,DssGraph3DPanYUp:10109,DssGraph3DRelative:10110,DssGraph3DPanXRight:10111,DssGraph3DPanYDown:10112,DssGraph3DAbsolute:10113,DssGraph3DZoomIn:10114,DssGraph3DIncreasePerspectiveDistortion:10115,DssGraph3DStepSize:10116,DssGraph3DZoomOut:10117,DssGraph3DDecreasePerspectiveDistortion:10118,DssGraph3DInitMatrix:10119,DssGraphGaugeQBShow:10120,DssGraphGaugeQBStart:10121,DssGraphGaugeQBStop:10122,DssGraphEnhancedSeriesEffect:10123,DssGraphLocale:10124,DssGraph3DViewStructName:10125,DssGraphLabelsDistance:10126,DssGraphLegendDetails:10127,DssGraphDefaultsInitialized:10128,DssGraphShow3DAxisMajor:10129,DssGraphGradientColorMode:10130,DssGraphLegendDetailsNEW:10131,DssGraphFrameLocationNEW:10132,DssGraph3DColTitleLocationNEW:10133,DssGraph3DRowTitleLocationNEW:10134,DssGraphLabelsDistanceNEW:10135,DssGraphDocSizeNEW:10136,DssGraphUseManualHistogramBuckets:10137,DssGraphFontSize100:10138,DssGraphUseSpecialSeries:10140,DssGraphIsOnlyAdditionalMetrics:10170};mstrmojo.vi.enums.EnumDerivedElementType={LIST:1,CALCULATION:2,RESIDUE:4};mstrmojo.chart.enums.EnumCollectionType={CT_NO_COLLECTION:0,CT_LINE:1,CT_GENERAL_SHAPE:2,CT_TEXT:3,CT_VERTICAL_AREA:4,CT_VERTICAL_BAR:5,CT_HORIZONTAL_AREA:6,CT_HORIZONTAL_BAR:7,CT_DEPTH_LINE_OR_LINE_MARKER:8,CT_NO_FORMAT:9};mstrmojo.vi.viz.EnumDSSDropZones={Reserved:0,Rows:1,Columns:2,XAxis:3,YAxis:4,BreakBy:5,SliceBy:6,ColorBy:7,SizeBy:8,AdditionalMetrics:9,Angle:10,Grouping:11,GeoAttribute:12,Layout:13,FromItem:14,ToItem:15,ItemSize:16,Latitude:17,Longitude:18};mstrmojo.chart.enums.EnumBoxStyle={BS_NOFRAME:0,BS_SINGLE_LINE_FRAME:1,BS_DOUBLE_LINE_FRAME:2,BS_EXTRUDE:3,BS_BEVELED_FRAME:4,BS_REVERSE_BEVELED_FRAME:5};mstrmojo.chart.enums.EnumBoundingRectType={BRT_TOP:0,BRT_BOTTOM:1,BRT_CYLINDER:2,BRT_RING_CYLINDER:3,BRT_START_RECT:4,BRT_END_RECT:5};mstrmojo.chart.model.enums.EnumDSSGraphMarkerLayout={DssGraphMarkerLeft:0,DssGraphMarkerRight:1,DssGraphMarkerCentered:2,DssGraphMarkerAbove:3,DssGraphMarkerBelow:4,DssGraphMarkerAuto:5};mstrmojo.chart.enums.EnumAxisDirection={AD_X:0,AD_Y:1,AD_Z:2};mstrmojo.chart.enums.EnumPictureFormatType={JPEG:0,PNG:1,BMP:7,GIF:100,PDF:102,SVG:103,WIN32:104,INSTRUCTIONS:105};mstrmojo.chart.model.enums.EnumDSSGraphDataLineType={DssGraphDataLineNone:0,DssGraphDataLineMarker:1,DssGraphDataLineLine:2};mstrmojo.chart.model.enums.EnumDSSGraphAxisLabelLocation={DssGraphAxisLabelLowSide:0,DssGraphAxisLabelHighSide:1,DssGraphAxisLabelBothSides:2,DssGraphAxisLabelNeitherSide:3};mstrmojo.chart.enums.EnumChartStyle={_general:0,_cluster:1,_absolute:2,_stacked:3,_percent:4,_ring:5,_bullet:6,_udf:100};mstrmojo.chart.enums.EnumLegendMarkersStyle={LMS_LeftOfText:0,LMS_RightOfText:1,LMS_CenterOnMarkers:2,LMS_AboveText:3,LMS_BelowText:4};mstrmojo.chart.enums.EnumLineStyle={LS_SOLID:0,LS_DASH:1,LS_DOT:2,LS_DOT_DASH:3,LS_DASH_DOT_DOT:4,LS_MEDIUM_DASH:5,LS_SHORT_DASH:6,LS_LONGEST_DASH:7,LS_LONG_DOT:8,LS_DOT_DOT_DOT:9,LS_DASH_DASH_DOT:10,LS_DASH_DASH_DOT_DOT:11,LS_LONG_DASH_DOT:12,LS_LONG_DASH_DOT_DOT:13,LS_LONG_DASH_DASH:14,LS_LONG_DASH_DASH_DASH:15,LS_GRADIENT:16,LS_NONE:99};mstrmojo.chart.enums.EnumLabelLevelOption={LLO_NORMAL:0,LLO_COMMON:1,LLO_SPECIFIC:2};mstrmojo.chart.enums.EnumAxisLabelsLocation={ALL_LEFT:0,ALL_RIGHT:1,ALL_LEFT_RIGHT:2,ALL_BOTTOM:3,ALL_TOP:4,ALL_BOTTOM_TOP:5};mstrmojo.chart.model.enums.EnumVariantBool={VARIANT_TRUE:65535,VARIANT_FALSE:0};mstrmojo.chart.enums.EnumGraphMatrixElementSizeMode={_AUTOMATIC:0,_PROPORTIONAL:1,_MANUAL:2};mstrmojo.chart.enums.EnumOrientation={OR_HORIZONTAL:0,OR_VERTICAL:1};mstrmojo.chart.model.enums.EnumDSSGraphGradientType={DssGraphGradientReserved:0,DssGraphGradientCircular:9,DssGraphGradientRectangular:10,DssGraphGradientLinear:14};mstrmojo.chart.enums.EnumAnchorPoint={TOP_LEFT:0,TOP_MIDDLE:1,TOP_RIGHT:2,LEFT_MIDDLE:3,CENTER:4,RIGHT_MIDDLE:5,BOTTOM_LEFT:6,BOTTOM_MIDDLE:7,BOTTOM_RIGHT:8};(function(){var A;mstrmojo.chart.Polygon2D=A=mstrmojo.provide("mstrmojo.chart.Polygon2D",{});A.clone=function(D){var B=D.length,C,E=[];for(C=0;C<B;++C){E.push(D[C].clone());}return E;};}());mstrmojo.chart.enums.EnumImageUsage={GENERAL:0,FIRST_IMAGE_OF_SCROLL_VIEW:1,SECOND_IMAGE_OF_SCROLL_VIEW:2,IMAGE_OF_SCROLL_VIEW:4,EMPTY_IMAGE:8,OBJECT_CLIP_COMPUTATION:16,BANNER:32};mstrmojo.chart.enums.EnumFontAlignment={FA_LEFT:0,FA_CENTER:1,FA_RIGHT:2};mstrmojo.chart.enums.EnumDSSGraphOffScaleType={DssGraphOffScaleHide:0,DssGraphOffScaleClip:1,DssGraphOffScaleShow:2};mstrmojo.chart.enums.EnumGraphMatrixMajorGraphType={_UNDEFINED:0,_AREA:1,_BAR:2,_LINE:3,_SCATTER:4,_BUBBLE:5,_PIE:6,_GRID:7};mstrmojo.chart.enums.EnumMajorGraphType={MGT_AREA:0,MGT_BAR:1,MGT_LINE:2,MGT_PARETO:3};mstrmojo.chart.enums.EnumFontRotation={FR_NORMAL:0,FR_45:5,FR_90:2,FR_180:3,FR_270:4,FR_315:6,FR_CUSTOME:7,FR_HOTEL:1,FR_AUTOMATIC:-1};mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition={DssGraphDTPositionCenter:0,DssGraphDTPositionOutMin:1,DssGraphDTPositionInMin:2,DssGraphDTPositionInMax:3,DssGraphDTPositionOutMax:4,DssGraphDTPositionOnSide:5,DssGraphDTPositionPieSmart:6,DssGraphDTPositionPieSmartRadial:7,DssGraphDTPositionPieSmartStacked:8};mstrmojo.vi.viz.EnumVisualizationTemplates={UNKNOWN_GRAPHMATRIX_TYPE:-1,GRID:0,HEATMAP:1,GOOGLEMAP:2,PIE:3,RING:4,GRAPHMATRIXVERTICALBARSTACKED:6,GRAPHMATRIXVERTICALBARCLUSTERED:7,GRAPHMATRIXVERTICALBARPERCENT:8,GRAPHMATRIXHORIZONTALBARSTACKED:9,GRAPHMATRIXHORIZONTALBARCLUSTERED:10,GRAPHMATRIXHORIZONTALBARPERCENT:11,GRAPHMATRIXVERTICALLINESTACKED:12,GRAPHMATRIXVERTICALLINECLUSTERED:13,GRAPHMATRIXVERTICALLINEPERCENT:14,GRAPHMATRIXHORIZONTALLINESTACKED:15,GRAPHMATRIXHORIZONTALLINECLUSTERED:16,GRAPHMATRIXHORIZONTALLINEPERCENT:17,GRAPHMATRIXSCATTERCIRCLEMM:18,GRAPHMATRIXSCATTERGRIDCIRCLEAA:19,GRAPHMATRIXBUBBLECIRCLEMM:21,GRAPHMATRIXBUBBLEGRIDCIRCLEAA:22,GRAPHMATRIXSCATTERSQUAREAM:23,GRAPHMATRIXSCATTERSQUAREMM:24,GRAPHMATRIXSCATTERGRIDSQUAREAA:25,GRAPHMATRIXBUBBLESQUAREAM:26,GRAPHMATRIXBUBBLESQUAREMM:27,GRAPHMATRIXBUBBLEGRIDSQUAREAA:28,GRAPHHORIZONTALBARCLUSTERED:29,GRAPHMATRIXVERTICALAREASTACKED:30,GRAPHMATRIXVERTICALAREAPERCENT:31,GRAPHMATRIXVERTICALAREACLUSTERED:32,GRAPHMATRIXHORIZONTALAREASTACKED:40,GRAPHMATRIXHORIZONTALAREAPERCENT:41,GRAPHMATRIXHORIZONTALAREACLUSTERED:42,GRAPHHORIZONTALBARDUALAXISCLUSTERED:33,GRAPHHORIZONTALBARDUALAXISABSOLUTE:34,GRAPHHORIZONTALLINEABSOLUTE:35,GRAPHHORIZONTALLINEDUALAXISABSOLUTE:36,GRAPHHORIZONTALAREAABSOLUTE:37,GRAPHHORIZONTALAREADUALAXISABSOLUTE:38,GRAPHVERTICALBARCLUSTERED:39,GRAPHVERTICALBARDUALAXISCLUSTERED:43,GRAPHVERTICALBARDUALAXISABSOLUTE:44,GRAPHVERTICALBARDUALAXISSTACKED:45,GRAPHVERTICALLINEABSOLUTE:46,GRAPHVERTICALLINESTACKED:47,GRAPHVERTICALLINEPERCENT:48,GRAPHVERTICALLINEDUALAXISABSOLUTE:49,GRAPHVERTICALLINEDUALAXISSTACKED:50,GRAPHVERTICALAREAABSOLUTE:51,GRAPHVERTICALAREAPERCENT:52,GRAPHVERTICALAREASTACKED:53,GRAPHVERTICALAREADUALAXISABSOLUTE:54,GRAPHVERTICALAREADUALAXISSTACKED:55,GRAPHCOMBINATIONBARAREA:56,GRAPHCOMBINATIONBARAREADUALAXIS:57,NETWORK:58,IMAGELAYOUT:59,GOOGLEMAPDENSITY:60,GRAPHMATRIXPIE:61,GRAPHMATRIXRING:62,GRAPHHORIZONTALBARABSOLUTE:63,GRAPHHORIZONTALBARPERCENT:64,GRAPHHORIZONTALBARSTACKED:65,GRAPHVERTICALBARABSOLUTE:66,GRAPHVERTICALBARPERCENT:67,GRAPHVERTICALBARSTACKED:68,ESRIMAP:69,GRAPHMATRIXVERTICALBARAUTOMATIC:70,GRAPHMATRIXHORIZONTALBARAUTOMATIC:71,GRAPHMATRIXVERTICALLINEAUTOMATIC:72,GRAPHMATRIXHORIZONTALLINEAUTOMATIC:73,GRAPHMATRIXVERTICALAREAAUTOMATIC:74,GRAPHMATRIXHORIZONTALAREAAUTOMATIC:75};mstrmojo.EnumDSSDisplayMode={RESERVED:0,GRID:1,GRAPH:2,ENGINE:3,TEXT:4,DATAMART:5,BASE:6,GRIDGRAPH:7,NONINTERACTIVE:8};mstrmojo.chart.model.enums.EnumDSSGraphLegendPosition={DssGraphLegendPositionFreeFloat:0,DssGraphLegendPositionRight:1,DssGraphLegendPositionLeft:2,DssGraphLegendPositionBottom:3};mstrmojo.chart.model.enums.EnumShapeType={_COMBINED:-2,_GENERIC:-1,_AREA:0,_BAR:1,_LINE:2,_STEPLINE:3,_CIRCLE:4,_RECTANGLE:5,_SQUARE:6,_TICKER:7,_PIESLICE:8,_POLYGON:9,_PIE:10,_BULLET:11,_CURVE:12,_DEFAULT:100};(function(){function B(L,Q,N){var M,O;M=0;if(N){M=Math.max(L,L-Q);M=Math.max(M,-Q);}else{M=L-Q;}if(M===0){this.mIsShown=false;return 1;}var P=M;O=1;while(M<1){M*=10;O/=10;}while(M>=10){M/=10;O*=10;}if(M<1.8){O*=2;O/=10;}else{if(M<3.1){O*=4;O/=10;}else{if(M<4.6){O*=5;O/=10;}else{if(M>=8.1){O*=2;}}}}return O;}function K(P){var L,N;this.mStep=B.call(this,this.mMaximum,this.mMinimum,P.mAlwaysIncludeZero);this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:this.mMinTick;if(P.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}var M=this.mMaxTick-this.mMinTick;if(this.mStep>=M){return ;}L=Math.floor((this.mMaxTick-this.mMinTick+this.mStep/100)/this.mStep)+1;for(N=1;N<L-1;++N){var O=this.mMinTick+N*this.mStep;this.mTicks.push(O);}}function C(M){var L;this.mMaxTick=1;this.mStep=this.mMinimum<0?0.2:0.1;if(M.mUseCustomMinMax){this.mMaxTick=M.mAxisMaxValue;this.mMinTick=M.mAxisMinValue;this.mMaxTick=Math.min(1,this.mMaxTick);this.mMinTick=Math.max(-1,this.mMinTick);this.mStep=0.1;}else{if(this.mMaximum>=0.5){this.mMaxTick=1;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:(this.mMinTick>0?0:this.mMinTick);if(this.mMinimum<-0.5){this.mMinTick=-1;}}else{if(this.mMaximum>0){this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=-1;}else{this.mStep=0.1;this.mMaxTick=0;this.mMinTick=-1;}}}for(L=this.mMinTick+this.mStep;L+0.01<this.mMaxTick;L+=this.mStep){this.mTicks.push(Math.round(L*100)/100);}}function I(L){return Math.log(L)/Math.log(10);}function H(O){var N,L,M;this.mStep=1;if(this.mMaximum<=0){this.mMinTick=1;this.mMaxTick=10;return ;}if(this.mMinimum<=0){L=this.mMaximum>1?0:-1;this.mMinTick=Math.pow(10,L);if(O.mUseCustomMinMax){this.mMaxTick=this.mMaximum;N=Math.floor(I.call(this,this.mMaximum));if(I.call(this,this.mMaximum)===N){N--;}}else{N=Math.ceil(I.call(this,this.mMaximum));this.mMaxTick=Math.pow(10,N);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}return ;}if(O.mUseCustomMinMax){N=I.call(this,this.mMaximum);L=I.call(this,this.mMinimum);this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;}else{N=Math.ceil(I.call(this,this.mMaximum));L=Math.floor(I.call(this,this.mMinimum));this.mMaxTick=Math.pow(10,N);this.mMinTick=Math.pow(10,L);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}}function J(L){this.mTicks.splice(0,this.mTicks.length);if(this.mIsPercent){return C.call(this,L);}if(L.mUseLogarithmicScale){return H.call(this,L);}K.call(this,L);}function G(Q){if(Q.mUseCustomMinMax||Q.mUseLogarithmicScale){return ;}var M=0.1,O=false,L=false,P=[];this.GetTicks(P);if(P.length>=2){var N=P.length;L=((Math.abs(this.mMaximum-P[N-2])<M*this.mStep));O=((Math.abs(this.mMinimum-P[1])<M*this.mStep));if(this.mIsPercent){L=false;}}if(L&&O){this.mMinTick=this.mMinimum;this.mMaxTick=this.mMaximum;Q.mUseMinValue=Q.mShowMinLabel=true;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(L){this.mMaxTick=this.mMaximum;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(O){this.mMinTick=this.mMinimum;Q.mUseMinValue=Q.mShowMinLabel=true;}else{}}}if(Q.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}mstrmojo.chart.common.ScalePlate=mstrmojo.provide("mstrmojo.chart.common.ScalePlate",{mOptions:{mShowMinLabel:true,mShowMaxLabel:true},isStackedChart:false,mStep:0,mIsPercent:false,mMinimum:0,mMaximum:0,mMaxTick:0,mMinTick:0,mTicks:[],clear:function F(){this.isStackedChart=this.mIsPercent=false;this.mMinimum=this.mMaximum=0;this.mMinTick=this.mMaxTick=0;this.mStep=0;this.mTicks=[];},GetTicks:function A(M){if(this.mOptions.mShowMinLabel){M.push(this.mMinTick);}var L;for(L=0;L<this.mTicks.length;++L){M.push(this.mTicks[L]);}if(this.mOptions.mShowMaxLabel){M.push(this.mMaxTick);}},getMaxMinTickValue:function D(O,N,L,M){this.computeTicks(O,N,L,M);return{Max:this.mMaxTick,Min:this.mMinTick};},computeTicks:function E(Q,P,L,N){this.mMinimum=N;this.mMaximum=L;this.mIsPercent=!!(P&1);this.isStackedChart=!!(P&2);var O=1e-14;if(!Q.mUseLogarithmicScale&&this.isStackedChart){this.mMinimum=Math.min(this.mMinimum,0);this.mMaximum=Math.max(this.mMaximum,0);}if(Q.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Q.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Q.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<O){if(this.mMinimum<-O||this.mMinimum>O){var M=Math.abs(this.mMinimum)*0.5;this.mMaximum=this.mMaximum+M;this.mMinimum=this.mMinimum-M;}else{this.mMinimum=-6;this.mMaximum=6;}}J.call(this,Q);if(Q.mUseLogarithmicScale&&this.isStackedChart){this.mMaximum=Q.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Q.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);H.call(this,Q);}G.call(this,Q);}});}());mstrmojo.chart.model.enums.EnumDSSGraphDataTextShowType={DssGraphDataTextNone:0,DssGraphDataTextValue:1,DssGraphDataTextLabel:2,DssGraphDataTextBoth:3,DssGraphDataTextAbs:4,DssGraphDataTextAbsValue:5,DssGraphDataTextAbsBoth:7,DssGraphDataTextTotal:8,DssGraphDataTextZValue:16,DssGraphDataTextPercent:32,DssGraphDataTextYValue:64,DssGraphDataTextInternal:128,DssGraphDataTextSeriesDependent:256,DssGraphDataTextQualityObjectMode:512};mstrmojo.chart.enums.EnumNumberCategory={Default:-2,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7,Special:8,General:9,FromGrid:10};mstrmojo.chart.enums.EnumGraphSubType={GST_NULL:0,GST_BIPOLAR:1,GST_DUALAXIS:2};mstrmojo.chart.enums.EnumGenericDirection={NONE:0,TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};mstrmojo.chart.enums.EnumGraphMajorType={GMT_INVALID:0,GMT_CATEGORY:1,GMT_PIE:2,GMT_SCATTER:3,GMT_POLAR:4,GMT_RADAR:5,GMT_BUBBLE:6,GMT_STOCK:7,GMT_HISTOGRAM:8,GMT_GAUGE:9,GMT_FUNNEL:10,GMT_BOX:11,GMT_GANTT:12,GMT_SPECTRAL:13,GMT_TABLE:14,GMT_3D_CATEGORY:15,GMT_3D_SCATTER:16,GMT_GRID:17};mstrmojo.chart.model.enums.EnumDSSGraphGridLineType={DssGraphGridNone:0,DssGraphGridRegular:1,DssGraphGridBoth:2,DssGraphGridInnerTicks:3,DssGraphGridOuterTicks:4,DssGraphGridSpanningTicks:5};mstrmojo.chart.model.enums.EnumDSSExtraGraphProperty={DssGraphOffScaleType:10139,DssGraphTypeRingPie:20015,DssGraphPieRadius:20016,DssGraphPieSliceQuadrant:20017,DssGraphUseInterlacedGrid:20018,DssGraphUseSmartBreak:20019,DssGraphSmartBreakStyle:20020,DssGraphSmartBreakStart:20021,DssGraphSmartBreakEnd:20022,DssGraphSmartBreakUsePercent:20023,DssGraphUseQualityBand:20024,DssGraphQualityBandUsePercent:20025,DssGraphQualityBandPosition:20026,DssGraphQualityBandShowTitle:20027,DssGraphUseChartArea:20028,DssGraphChartAreaNumber:20029,DssGraphChartAreaOrientation:20030,DssGraphChartAreaSpacePercentage:20031,DssGraphChartAreaDestination:20032,DssGraphChartAreaShowTitle:20033,DssGraphGaugeBorderClipped:20034,DssGraphCumulativePercentLabel:20035,DssGraphNewUseSmartLabels:20053,DssGraphIsIPhoneCharting:21000,DssGraphUseGlobalAutoScale:21001,DssGraphLegendItemText:21023,DssGraphAxisShowSecondUserLine:21024,DssGraphAxisSecondUserLineValue:21025,DssGraphCategoryLabelAreaHeight:21026,DssGraphGradientEndAlpha:21027,DssTimeSeriesYAxisLabelMinSpan:21076,DssTimeSeriesYAxisExtendHeight:21077,DssGraphMatrixUsePerfectPadding:21120,DssGraphMatrixIsValueAxisForPercentChart:21136,DssGraphMatrixDataLabelEnabled:21153,DSSGraphMatrixDataLabelRotated:21154,DssGraphMatrixInitedDataLabelRotation:21155,DSSGraphMatrixAxisAdjusted:21156,DSSGraphMatrixUseCustomMinMax:21157,DssGraphInfoReserved:30000,DssGraphInfoMajorType:30007,DssGraphInfoMinorType:30008,DssGraphInfoAutosizeHorizontal:30011,DssGraphInfoAutosizeVertical:30012,DssGraphInfoSeriesByColumn:30013,DssGraphInfoIncludeSubtotal:30014,DssGraphInfoSuppressLastLevel:30016,DssGraphInfoRecalculateChartFrame:30026,DssGraphInfoRecalculateLegend:30027,DssGraphInfoNestedLabel:30038,DssGraphInfoNestedLabelBracket:30039,DssGraphInfoUseMaxCategoriesAsMin:30048,DssGraphInfoUseZerosForGraphNulls:30049};mstrmojo.vi.viz.EnumWidgetTypes={GRID:0,GRAPH_MATRIX:1,HEATMAP:2,NETWORK:3,IMAGELAYOUT:4,ESRIMAP:5,GOOGLEMAP:6,CUSTOM:7};mstrmojo.gm.GMEnums={};mstrmojo.gm.DualAxisSubAxisBit={PRIMARY:0,SECONDARY:1};mstrmojo.gm.StackExetrmeId={PRIMARY_Y_AXIS:-2,SECONDARY_Y_AXIS:-18,PRIMARY_X_AXIS:-1,SECONDARY_X_AXIS:-17};mstrmojo.gm.FormNameType={OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4};mstrmojo.gm.EnumSelectionOptionLevel={GLOBAL:1,ITSELF:2,ATTS_METRIC_COMBINATION:3,METRIC_AXIS:4,METRIC:5,AXIS:6,COLOR_BY:7,ALL_SHAPE:8,ITSELF_RESOLVED:9};mstrmojo.gm.EnumLabelRotation={VERTICAL:2,HORIZONTAL:0,AUTOMATIC:-1};mstrmojo.gm.EnumIdentityType={LEGEND:Math.pow(2,0),GRAPH_SHAPE:Math.pow(2,1),X_AXIS:Math.pow(2,2),Y_AXIS:Math.pow(2,3),X2_AXIS:Math.pow(2,4),Y2_AXIS:Math.pow(2,5),GRID_LINE:Math.pow(2,6),TREND_LINE:Math.pow(2,7),REF_LINE:Math.pow(2,8),DATA_LABEL:Math.pow(2,9),COLOR_SQUARE:Math.pow(2,10),ROW_TITLE:Math.pow(2,11),COL_TITLE:Math.pow(2,12),ROW_HEADER:Math.pow(2,13),COL_HEADER:Math.pow(2,14),LOG_SCALE:Math.pow(2,15),H_MATRIX_LINE:Math.pow(2,16),V_MATRIX_LINE:Math.pow(2,17),LEGEND_TEXT:Math.pow(2,18),SHAPE_COLLECTION:Math.pow(2,19),MINOR_GRID_LINE:Math.pow(2,20),AXIS_SCALE:Math.pow(2,22),AXIS_ORIGIN:Math.pow(2,23),ROWS_BACKGROUND:Math.pow(2,24),COLS_BACKGROUND:Math.pow(2,25),X_NUMERIC:Math.pow(2,26),X_CATEGORY:Math.pow(2,27),Y_NUMERIC:Math.pow(2,28),Y_CATEGORY:Math.pow(2,29),X_METRIC_AXIS_TITLE:Math.pow(2,30),Y_METRIC_AXIS_TITLE:Math.pow(2,31),VIZ_BOX_TITLE:Math.pow(2,32),REF_LINE_LABEL:Math.pow(2,33),LINE_MARKER:Math.pow(2,34),X_AXIS_ORIGIN_LABEL:Math.pow(2,35),Y_AXIS_ORIGIN_LABEL:Math.pow(2,36),X_AXIS_ORIGIN_LINE:Math.pow(2,37),Y_AXIS_ORIGIN_LINE:Math.pow(2,38),Y_ATTRIBUTE_AXIS_TITLE:Math.pow(2,39),ROW_HEADER_TEXT:Math.pow(2,40),ROW_TITLE_TEXT:Math.pow(2,41),COL_HEADER_TEXT:Math.pow(2,42),COL_TITLE_TEXT:Math.pow(2,43),VIZ_BOX_CONTAINER:Math.pow(2,44),X_ATTRIBUTE_AXIS_TITLE:Math.pow(2,45),AXIS_ORIGIN_DEFINE:Math.pow(2,46)};mstrmojo.gm.EnumGMZoneIds={ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10};mstrmojo.gm.EnumClickType={NONE:-1,LEFT_CLICK:1,RIGHT_CLICK:2,DOUBLE_CLICK:3};mstrmojo.gm.EnumLegendSlot={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8};mstrmojo.gm.EnumAxisType={ATTRIBUTE:0,METRIC:1};mstrmojo.gm.EnumGraphType={UNDEFINED:-1,AREA:1,BAR:2,LINE:3,SCATTER:4,BUBBLE:5,PIE:6,GRID:7};mstrmojo.gm.EnumContextMenu={SEPARATOR:0,KEEP_ONLY:1,EXCLUDE:2,SORT_ASCENDING:3,SORT_DESCENDING:4,CLEAR_SORT:5,SHOW_DATA:6,SWITCH_THEME:7,KEEP_ONLY_AND_SHOW:8,CLOSE_LEGEND:9,OPEN_LEGEND:10,AXIS_SCALE:11,DRILL_TO:100,CHART_TYPE:200,AREA_ABS:201,AREA_STACKED:202,AREA_PERCENT:203,BAR_SBS:204,BAR_ABS:205,BAR_STACKED:206,BAR_PERCENT:207,LINE_ABS:208,LINE_STACKED:209,LINE_PERCENT:210,BUBBLE:211,SCATTER:212,H_AREA_ABS:213,H_AREA_STACKED:214,H_AREA_PERCENT:215,H_BAR_SBS:216,H_BAR_ABS:217,H_BAR_STACKED:218,H_BAR_PERCENT:219,H_LINE_ABS:220,H_LINE_STACKED:221,H_LINE_PERCENT:222,GRID:223,CIRCLE:224,SQUARE:225,PIE:226,TICKER:227,RING:228,CANVAS:229,SVG:230,LARGE_ABL:231,OUTPUT_EXTREMES:232,COMBINATION:233,ENABLE_PARTIAL_RENDERING:234,DISABLE_PARTIAL_RENDERING:235,OUTPUT_DATA_COUNT:236,ENABLE_TIMER:239,DISABLE_TIMER:240,ENABLE_CE_TIMER:241,DISABLE_CE_TIMER:242};mstrmojo.gm.EnumColorRankMode={RANK_MODE_VALUE:0,RANK_MODE_TOP:1,RANK_MODE_BOTTOM:2,RANK_MODE_TOP_PERCENT:3,RANK_MODE_BOTTOM_PERCENT:4};mstrmojo.gm.EnumColorByType={NULL:0,ATT:1,METRICS_ITEM:2,METRICS:3,ATT_METRICS:4};mstrmojo.gm.EnumDockPosition={TOP:1,RIGHT:2,BOTTOM:3,LEFT:4};mstrmojo.gm.EnumXAxisLabelStatus={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};mstrmojo.gm.EnumABLDirection={HORIZONTAL:1,VERTICAL:2};mstrmojo.gm.EnumMetricsPosition={MetricsByRow:0,MetricsByColumn:1,MetricsByAxis:2,MetricsByBreakBy:3,MetricsBySlice:4,MetricsByXAxis:5,MetricsByYAxis:6};mstrmojo.gm.EnumDrawingAPI={GET_CHART_WIDTH:0,GET_CHART_HEIGHT:1,GET_ROW_HEADER:2,GET_COLUMN_HEADER:3,CREATE_UNIT_Y_AXIS:4,CREATE_UNIT_X_AXIS:5,GET_FULL_FLEDGED_CHART:6,GET_ROW_SPAN:7,GET_COLUMN_SPAN:8,GET_METRICS_ON_X:9,GET_METRICS_ON_Y:10,GET_METRICS_ON_SIZE_BY:11,UPDATE_MINI_CHART:12,UPDATE_X_AXIS:13,UPDATE_Y_AXIS:14,MAX_RADIUS_CALC:15,GET_EXTRA_COLUMN_HEADER:16,UPDATE_COLUMN_HEADER:17,UPDATE_ROW_HEADER:18,LAYOUT_ALL_X_AXIS_LABELS:19,LAYOUT_ONE_X_AXIS_LABELS:20};mstrmojo.gm.WidgetPropertyTag={FIT_TO:"FitTo",AXIS_SCALE:"MinMax",SHAPE:"Shape",SUB_TYPE:"Subtype",DATA_LABEL:"DataLabel",DATA_LABELS_PLACEMENT:"DataLabelPalcement",METRIC_LEVEL_DATA_LABEL:"mtcLvlDataLabel",BANDING:"Banding",LEGEND_VISIBLE:"LegendVisibleness",COL_ALIGNMENT:"Columnalignment",ROW_ALIGNMENT:"Rowalignment",MAX_SIZE_TYPE:"SizeType",MAX_SIZE_VALUE:"SizeValue",MIN_SIZE_TYPE:"minSizeType",MIN_SIZE_VALUE:"minSizeValue",OUTSIDE_BORDER:"OutSideBorder",AXES:"AxisLine",MATRIX_LINES:"MatrixLine",GRID_LINES:"GridLine",SELECTION_TYPE:"SelectionType",SELECTIONS:"Selections",LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr",SCALE_CHART_HEIGHT:"rr",SCALE_CHART_WIDTH:"cr",SCALE_ROW_HEADERS:"rvr",SCALE_COL_HEADERS:"chr",SCALE_Y:"yr",SCALE_X:"xr",SCALE_Y2:"y2r",SCALE_X2:"x2r",SCALE_ALL:"scales",SCALE_V_EXTRA_LINE:"vExtraLine",SORT_ORDER:"so",SORT_INDEX:"si",AXIS_SCALE_DATA:"AxisScale",AXIS_SCALE_REAL_MIN:"rMin",AXIS_SCALE_REAL_MAX:"rMax",AXIS_SCALE_MANUAL_MIN:"mMin",AXIS_SCALE_MANUAL_MAX:"mMax",AXIS_SCALE_AUTO_MIN:"autoMin",AXIS_SCALE_AUTO_MAX:"autoMax",SINGLE_AXIS_SCALE_TYPE:"scaleType",LOG_SCALE:"logScale",GROUP_INFO:"groupInfo",METRIC_SHAPES:"metricShapes",AXIS_ORIGIN:"axisOrigin",AXIS_ORIGIN_AUTO:"axOriAuto",AXIS_ORIGIN_VALUE:"axOriValue",TREND_LINE_DEF:"trdDef",REF_LINE_DEF:"refDef",TREND_TYPE:"trdTp",TREND_LEVEL:"trdLvl",TREND_ENABLED:"trdEnabled",TREND_INCLUDE_BREAK_BY:"trdIncBB",TREND_POLY_DEGREE:"trdDgr",TREND_FORECAST_ENABLED:"trdFstEnabled",TREND_BWD_FORECAST:"trdBwdFst",TREND_FWD_FORECAST:"trdFwdFst",TREND_SEASONALITY:"trdSeason",TREND_BUBBLE_FORE_DEF:"trdBbForeDef",TREND_BUBBLE_FORE_FWD:"trdBbForeFwd",TREND_BUBBLE_FORE_BWD:"trdBbForeBwd",TREND_BUBBLE_FORE_ENABLED:"trdBbForeEnabled",TREND_BUBBLE_MAX:"trdBbMax",TREND_BUBBLE_MIN:"trdBbMin",REF_TYPE:"refTp",REF_LEVEL:"refLvl",REF_ENABLED:"refEnabled",REF_SHOW_LABEL:"refLbShw",REF_LABEL_TYPE:"refLbTp",REF_CONST_VALUE:"refCstVl",REF_LINE_NAME:"refLnName",TREND_REF_LINE_THICKNESS:"trdRefLnThk",TREND_REF_LINE_COLOR:"trdRefLnClr",TREND_REF_LINE_STYLE:"trdRefLnStyle",TREND_REF_LINE_COMBINED_STYLE:"trdRefLnCmbStyle",FORMATS_ON_COMBINATION:"fmtOnComb",PARTIAL_RENDER:"prtRdn"};mstrmojo.gm.FormatingPropertyTag={IS_DEFAULT_VALUE:"_default",MODIFIED_DEF_FILL_COLOR:"modDefFillClr",ALL_SHAPE_FORMAT:"allShpFmt",SHAPE_LINE_THICKNESS:"shpLnThk",SHAPE_LINE_COLOR:"shpLnClr",SHAPE_LINE_STYLE:"shpLnStyle",SHAPE_LINE_COMBINED_STYLE:"shpLnCmbStyle",SHAPE_FILL_COLOR:"shpFillClr",SHAPE_FILL_COLOR_DEFAULT:"shpFillClr_default",SHAPE_FILL_STYLE:"shpFillStyle",SHAPE_FILL_TRANSPARENCY:"shpFillTrans",SHAPE_FILL_EFFECT:"shpFillEff",SHAPE_BORDER_COLOR:"shpBdrClr",SHAPE_BORDER_STYLE:"shpBdrStyle",SHAPE_BORDER_COMBINED_STYLE:"shpBdrCmbStyle",SHAPE_BORDER_THICKNESS:"shpBdrThk",LINE_MARKER_SHOW:"lnMkShw",LINE_MARKER_SHAPE:"lnMkShp",LINE_MARKER_SIZE:"lnMkSz",LINE_MARKER_COLOR:"lnMkClr",LINE_MARKER_COLOR_EQUAL:"lnMkClrEq",LINE_MARKER_BORDER_COLOR:"lnMkBdrClr",PIE_EXPLODE:"pieExpl",DATA_LABELS_SHOW:"dlShw",DATA_LABELS_FONT_FAMILY:"dlFntFml",DATA_LABELS_FONT_SIZE:"dlFntSz",DATA_LABELS_FONT_STYLE:"dlFntStyle",DATA_LABELS_FONT_COLOR:"dlFntClr",REF_LABELS_FONT_FAMILY:"rfLnFntFml",REF_LABELS_FONT_SIZE:"rfLnFntSz",REF_LABELS_FONT_STYLE:"rfLnFntStyle",REF_LABELS_FONT_COLOR:"rfLnFntClr",LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",ALL_LINE_SHOW:"allLnShw",ALL_LINE_COLOR:"allLnClr",ALL_LINE_STYLE:"allLnStyle",ALL_LINE_COMBINED_STYLE:"allLnCmbStyle",ALL_LINE_THICKNESS:"allLnThk",ALL_AXIS_ORIGIN_LINE_SHOW:"axOriLnShw",ALL_AXIS_ORIGIN_LINE_COLOR:"axOriLnClr",ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE:"axOriLnCmbStyle",X_AXIS_ORIGIN_LINE_SHOW:"xAxOriLnShw",X_AXIS_ORIGIN_LINE_COLOR:"xAxOriLnClr",X_AXIS_ORIGIN_LINE_STYLE:"xAxOriLnStyle",X_AXIS_ORIGIN_LINE_COMBINED_STYLE:"xAxOriLnCmbStyle",X_AXIS_ORIGIN_LINE_THICKNESS:"xAxOriLnThk",Y_AXIS_ORIGIN_LINE_SHOW:"yAxOriLnShw",Y_AXIS_ORIGIN_LINE_COLOR:"yAxOriLnClr",Y_AXIS_ORIGIN_LINE_STYLE:"yAxOriLnStyle",Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:"yAxOriLnCmbStyle",Y_AXIS_ORIGIN_LINE_THICKNESS:"yAxOriLnThk",ALL_AXIS_LINE_SHOW:"allAxLnShw",ALL_AXIS_LINE_COLOR:"allAxLnClr",ALL_AXIS_LINE_STYLE:"allAxLnStyle",ALL_AXIS_LINE_COMBINED_STYLE:"allAxLnCmbStyle",ALL_AXIS_LINE_THICKNESS:"allAxLnThk",ALL_AXIS_TITLE_SHOW:"allAxTtShw",ALL_AXIS_TITLE_CONTENT:"allAxTtCtt",ALL_AXIS_TITLE_FONT_COLOR:"allAxTtFntClr",ALL_AXIS_TITLE_FONT_FAMILY:"allAxTtFntFml",ALL_AXIS_TITLE_FONT_STYLE:"allAxTtFntStyle",ALL_AXIS_TITLE_FONT_SIZE:"allAxTtFntSz",ALL_AXIS_LABELS_FONT_SIZE:"allAxLbFntSz",ALL_AXIS_LABELS_FONT_FAMILY:"allAxLbFntFml",ALL_AXIS_LABELS_FONT_STYLE:"allAxLbFntStyle",ALL_AXIS_LABELS_FONT_COLOR:"allAxLbFntClr",ALL_AXIS_LABELS_ROTATION:"allAxLbRtt",ALL_AXIS_LABELS_SHOW:"allAxLbShw",X_AXIS_LINE_SHOW:"xAxLnShw",X_AXIS_LINE_COLOR:"xAxLnClr",X_AXIS_LINE_STYLE:"xAxLnStyle",X_AXIS_LINE_COMBINED_STYLE:"xAxLnCmbStyle",X_AXIS_LINE_THICKNESS:"xAxLnThk",X_AXIS_TITLE_SHOW:"xAxTtShw",X_AXIS_TITLE_CONTENT:"xAxTtCtt",X_AXIS_TITLE_FONT_COLOR:"xAxTtFntClr",X_AXIS_TITLE_FONT_FAMILY:"xAxTtFntFml",X_AXIS_TITLE_FONT_STYLE:"xAxTtFntStyle",X_AXIS_TITLE_FONT_SIZE:"xAxTtFntSz",X_AXIS_LABELS_FONT_SIZE:"xAxLbFntSz",X_AXIS_LABELS_FONT_FAMILY:"xAxLbFntFml",X_AXIS_LABELS_FONT_STYLE:"xAxLbFntStyle",X_AXIS_LABELS_FONT_COLOR:"xAxLbFntClr",X_AXIS_LABELS_ROTATION:"xAxLbRtt",X_AXIS_LABELS_SHOW:"xAxLbShw",Y_AXIS_LINE_SHOW:"yAxLnShw",Y_AXIS_LINE_COLOR:"yAxLnClr",Y_AXIS_LINE_STYLE:"yAxLnStyle",Y_AXIS_LINE_COMBINED_STYLE:"yAxLnCmbStyle",Y_AXIS_LINE_THICKNESS:"yAxLnThk",Y_AXIS_TITLE_SHOW:"yAxTtShw",Y_AXIS_TITLE_CONTENT:"yAxTtCtt",Y_AXIS_TITLE_FONT_COLOR:"yAxTtFntClr",Y_AXIS_TITLE_FONT_FAMILY:"yAxTtFntFml",Y_AXIS_TITLE_FONT_STYLE:"yAxTtFntStyle",Y_AXIS_TITLE_FONT_SIZE:"yAxTtFntSz",Y_AXIS_LABELS_FONT_SIZE:"yAxLbFntSz",Y_AXIS_LABELS_FONT_FAMILY:"yAxLbFntFml",Y_AXIS_LABELS_FONT_STYLE:"yAxLbFntStyle",Y_AXIS_LABELS_FONT_COLOR:"yAxLbFntClr",Y_AXIS_LABELS_ROTATION:"yAxLbRtt",Y_AXIS_LABELS_SHOW:"yAxLbShw",ALL_FILL_COLOR:"allFillClr",ALL_FILL_TRANSPARENCY:"allFillTrans",BG_COLOR:"bgFillClr",BG_FILL_EFFECT:"bgFillEff",BG_FILL_STYLE:"bgFillStyle",BG_FILL_TRANSPARENCY:"bgFillTrans",ROW_HEADER_FILL_COLOR:"rwHdrFillClr",ROW_HEADER_FILL_EFFECT:"rwHdrFillEff",ROW_HEADER_FILL_STYLE:"rwHdrFillStyle",ROW_HEADER_FILL_TRANSPARENCY:"rwHdrFillTrans",COLUMN_HEADER_FILL_COLOR:"colHdrFillClr",COLUMN_HEADER_FILL_EFFECT:"colHdrFillEff",COLUMN_HEADER_FILL_STYLE:"colHdrFillStyle",COLUMN_HEADER_FILL_TRANSPARENCY:"colHdrFillTrans",ALL_MATRIX_LINES_SHOW:"allMatrixLnShw",ALL_MATRIX_LINES_COLOR:"allMatrixLnClr",ALL_MATRIX_LINES_THICKNESS:"allMatrixLnThk",ALL_MATRIX_LINES_STYLE:"allMatrixLnStyle",ALL_MATRIX_LINES_COMBINED_STYLE:"allMatrixLnCmbStyle",V_MATRIX_LINES_SHOW:"vMatrixLnShw",V_MATRIX_LINES_COLOR:"vMatrixLnClr",V_MATRIX_LINES_THICKNESS:"vMatrixLnThk",V_MATRIX_LINES_STYLE:"vMatrixLnStyle",V_MATRIX_LINES_COMBINED_STYLE:"vMatrixLnCmbStyle",H_MATRIX_LINES_SHOW:"hMatrixLnShw",H_MATRIX_LINES_COLOR:"hMatrixLnClr",H_MATRIX_LINES_THICKNESS:"hMatrixLnThk",H_MATRIX_LINES_STYLE:"hMatrixLnStyle",H_MATRIX_LINES_COMBINED_STYLE:"hMatrixLnCmbStyle",OUTSIDE_BORDER_SHOW:"outBdrShw",OUTSIDE_BORDER_COLOR:"outBdrClr",OUTSIDE_BORDER_STYLE:"outBdrStyle",OUTSIDE_BORDER_THICKNESS:"outBdrThk",OUTSIDE_BORDER_COMBINED_STYLE:"outBdrCmbStyle",GRID_LINE_AUTO:"gridLineAuto",ALL_GRID_LINES_SHOW:"allGridLnShw",ALL_GRID_LINES_COLOR:"allGridLnClr",ALL_GRID_LINES_THICKNESS:"allGridLnThk",ALL_GRID_LINES_STYLE:"allGridLnStyle",ALL_GRID_LINES_COMBINED_STYLE:"allGridLnCmbStyle",AUTO_GRID_LINES_COLOR:"autoGridLnClr",AUTO_GRID_LINES_COMBINED_STYLE:"autoGridLnCmbStyle",MAJOR_GRID_LINES_SHOW:"majorGridLnShw",MAJOR_GRID_LINES_COLOR:"majorGridLnClr",MAJOR_GRID_LINES_THICKNESS:"majorGridLnThk",MAJOR_GRID_LINES_STYLE:"majorGridLnStyle",MAJOR_GRID_LINES_COMBINED_STYLE:"majorGridLnCmbStyle",MINOR_GRID_LINES_SHOW:"minerGridLnShw",MINER_GRID_LINES_COLOR:"minerGridLnClr",MINER_GRID_LINES_THICKNESS:"minerGridLnThk",MINER_GRID_LINES_STYLE:"minerGridLnStyle",MINER_GRID_LINES_COMBINED_STYLE:"minerGridLnCmbStyle",ALL_ROW_COLUMN_SHOW:"allRwColShw",COLUMN_TEXT_SHOW:"colTxtShw",ROW_TEXT_SHOW:"rwTxtShw",COLUMN_HEADER_SHOW:"colHdrShw",ROW_HEADER_SHOW:"rwHdrShw",COLUMN_VALUES_SHOW:"colVlShw",ROW_VALUES_SHOW:"rwVlShw",ALL_TEXT_FONT_COLOR:"allTxtFntClr",ALL_TEXT_FONT_SIZE:"allTxtFntSz",ALL_TEXT_FONT_FAMILY:"allTxtFntFml",ALL_TEXT_FONT_STYLE:"allTxtFntStyle",ALL_ROW_COLUMN_TEXT_FONT_COLOR:"allRwColTxtFntClr",ALL_ROW_COLUMN_TEXT_FONT_SIZE:"allRwColTxtFntSz",ALL_ROW_COLUMN_TEXT_FONT_FAMILY:"allRwColTxtFntFml",ALL_ROW_COLUMN_TEXT_FONT_STYLE:"allRwColTxtFntStyle",ALL_ROW_COLUMN_TEXT_ALIGNMENT_HORIZONTAL:"allRwColTxtAlignH",ALL_ROW_COLUMN_TEXT_ALIGNMENT_VERTICAL:"allRwColTxtAlignV",ROW_TEXT_TEXT_FONT_COLOR:"rwTxtTxtFntClr",ROW_TEXT_TEXT_FONT_SIZE:"rwTxtTxtFntSz",ROW_TEXT_TEXT_FONT_FAMILY:"rwTxtTxtFntFml",ROW_TEXT_TEXT_FONT_STYLE:"rwTxtTxtFntStyle",ROW_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"rwTxtTxtAlignH",ROW_TEXT_TEXT_ALIGNMENT_VERTICAL:"rwTxtTxtAlignV",COLUMN_TEXT_TEXT_FONT_COLOR:"colTxtTxtFntClr",COLUMN_TEXT_TEXT_FONT_SIZE:"colTxtTxtFntSz",COLUMN_TEXT_TEXT_FONT_FAMILY:"colTxtTxtFntFml",COLUMN_TEXT_TEXT_FONT_STYLE:"colTxtTxtFntStyle",COLUMN_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"colTxtTxtAlignH",COLUMN_TEXT_TEXT_ALIGNMENT_VERTICAL:"colTxtTxtAlignV",ROW_HEADER_TEXT_FONT_COLOR:"rwHdrTxtFntClr",ROW_HEADER_TEXT_FONT_SIZE:"rwHdrTxtFntSz",ROW_HEADER_TEXT_FONT_FAMILY:"rwHdrTxtFntFml",ROW_HEADER_TEXT_FONT_STYLE:"rwHdrTxtFntStyle",ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"rwHdrTxtAlignH",ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:"rwHdrTxtAlignV",COLUMN_HEADER_TEXT_FONT_COLOR:"colHdrTxtFntClr",COLUMN_HEADER_TEXT_FONT_SIZE:"colHdrTxtFntSz",COLUMN_HEADER_TEXT_FONT_FAMILY:"colHdrTxtFntFml",COLUMN_HEADER_TEXT_FONT_STYLE:"colHdrTxtFntStyle",COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"colHdrTxtAlignH",COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:"colHdrTxtAlignV",ROW_VAVLUE_TEXT_FONT_COLOR:"rwVlTxtFntClr",ROW_VAVLUE_TEXT_FONT_SIZE:"rwVlTxtFntSz",ROW_VAVLUE_TEXT_FONT_FAMILY:"rwVlTxtFntFml",ROW_VAVLUE_TEXT_FONT_STYLE:"rwVlTxtFntStyle",ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"rwVlTxtAlignH",ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"rwVlTxtAlignV",COLUMN_VAVLUE_TEXT_FONT_COLOR:"colVlTxtFntClr",COLUMN_VAVLUE_TEXT_FONT_SIZE:"colVlTxtFntSz",COLUMN_VAVLUE_TEXT_FONT_FAMILY:"colVlTxtFntFml",COLUMN_VAVLUE_TEXT_FONT_STYLE:"colVlTxtFntStyle",COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"colVlTxtAlignH",COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"colVlTxtAlignV",TITLE_FONT_COLOR:"ttlFntClr",TITLE_FONT_SIZE:"ttlFntSz",TITLE_FONT_FAMILY:"ttlFntFml",TITLE_FONT_STYLE:"ttlFntStyle",COLOR_SQUARE_COLOR:"clrSqrClr"};mstrmojo.gm.EnumAxis={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5};mstrmojo.gm.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gm.EnumSizeByType={SQUARE:1,CIRCLE:4};mstrmojo.gm.EnumTheme={DARK:0,LIGHT:1};mstrmojo.gm.EnumFitTo={CONTENT:1,PANEL:2,COMPACT:3};mstrmojo.gm.EnumAxisScale={GLOBAL:0,PERROWCOL:1,PERCELL:2,CUSTOM:3,DIFFERENT:4};mstrmojo.gm.EnumShape={GENERIC:-1,AREA:0,BAR:1,LINE:2,STEPLINE:3,CIRCLE:4,RECTANGLE:5,SQUARE:6,TICK:7,PIESLICE:8,POLYGON:9,PIE:10,RING:11,DEFAULT:12,BULLET:13};mstrmojo.gm.EnumSubtype={AUTO:1,ABSOLUTE:2,STACKED:3,CLUSTERED:4,PERCENT:5};mstrmojo.gm.EnumDataLabels={HIDE:1,SHOW_VALUE_ONLY:2,SHOW_TEXT_ONLY:3};mstrmojo.gm.EnumDataLabelPlacements={AUTOMATIC:1,GENERIC:2,RESERVED:3};mstrmojo.gm.EnumLegend={SHOW:0,HIDE:1,MINIMIZED:2};mstrmojo.gm.EnumLegendMode={RESTORED:1,MINIMIZED:2};mstrmojo.gm.EnumTextAlignH={LEFT:0,MIDDLE:1,RIGHT:2};mstrmojo.gm.EnumTextAlignV={TOP:0,MIDDLE:1,BOTTOM:2};mstrmojo.gm.EnumMaxSizeType={AUTO:1,MANUAL:2,AUTO_FIT:3};mstrmojo.gm.EnumMinSizeType={AUTO:1,MANUAL:2,PROPORTIONAL:3};mstrmojo.gm.EnumAxes={SHOW_BOTH:1,SHOW_NONE:2,SHOW_X:3,SHOW_Y:4};mstrmojo.gm.EnumMatrixLines={SHOW_ALL:1,SHOW_NONE:2,SHOW_HORIZONTAL:3,SHOW_VERTICAL:4};mstrmojo.gm.EnumGridLines={AUTO:1,SHOW:2,HIDE:3,SHOW_MAJOR_ONLY:4};mstrmojo.gm.LineMarkerShape={Circle:4,Square:1};mstrmojo.gm.ShapeFillType={Solid:0,Gradient:14,Pattern:3};mstrmojo.gm.ShapeFillEffect={None:1,Bevel:2};mstrmojo.gm.Enum3DGMapping={SizeType:"9999_1002",SizeValue:"9999_1003",lgdBgFillClr:"6_564",lgdBgFillStyle:"6_10002",lgdBgFillEff:"6_608",lgdFntSz:"9_603",lgdFntFml:"9_576",lgdFntStyle:"9_584",lgdFntClr:"9_574",LegendVisibleness:"9999_116",xAxShw:"9999_124",xAxTtCtt:"293_9999",xAxTtFntClr:"293_574",xAxTtFntFml:"293_576",xAxTtFntStyle:"293_584",xAxLbFntSz:"272_603",xAxLbFntFml:"272_576",xAxLbFntStyle:"272_584",yAxShw:"9999_125",yAxTtCtt:"299_9999",yAxTtFntClr:"299_574",yAxTtFntFml:"299_576",yAxTtFntStyle:"299_584",yAxLbFntSz:"296_603",yAxLbFntFml:"296_576",yAxLbFntStyle:"296_584",bgFillClr:"1_564",bgFillEff:"1_879",bgFillTrans:"1_608",outBdrClr:"1_588"};mstrmojo.gm.EnumRefLineModelType={MAX:1,MIN:2,AVG:3,MED:4,FIRST:5,LAST:6,CONST:7};mstrmojo.gm.EnumTrendLineModelType={BEST_FIT:256,LINEAR:257,LOG:258,EXP:259,POW:260,POLY:261};mstrmojo.gm.EnumTrendRefLevel={DssModelLevelReserved:0,DssModelLevelPerCell:1,DssModelLevelPerRow:2,DssModelLevelPerColumn:3,DssModelLevelPerPanel:4,DssModelLevelLastOne:5};mstrmojo.gm.EnumTimeRole={None:0,YearOfDecade:3083,QuarterOfYear:2826,MonthOfYear:2825,MonthOfQuarter:2569,WeekOfYear:2824,WeekOfQuarter:2568,WeekOfMonth:2312,DayOfYear:2823,DayOfQuarter:2567,DayOfMonth:2311,DayOfWeek:2055,HourOfDay:1798,MinuteOfDay:1797,MinuteOfHour:1541,SecondOfDay:1796,SecondOfHour:1540,SecondOfMinute:1284};mstrmojo.gm.EnumTrendRefModelLabels={DssModelLabelsReserved:-1,DssModelLabelsNone:0,DssModelLabelsType:1,DssModelLabelsMetric:2,DssModelLabelsValue:4};mstrmojo.gm.EnumTRFManipulations={AddTRLine:"141",RemoveTRLine:"142",UpdateTRLine:"143",UpdateForecastInfo:"144"};mstrmojo.gm.EnumShapeFormatStatus={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2};mstrmojo.chart.ChartConstants={kPI:3.141592653589793,kHalfSqrt2:0.70710678,kVirtualCoordinateWidth:700,kVirtualCoordinateHeight:400,kGroupLabelsRatio:0.1,kGridLineMarginFactor:10,kAngleMargin:0.1,kLabelMarginFactor:20,kVirtualMarkerSize:2,kBetweenLabels:0,kBetweenLabelLines:1,kLabelToChart:2,kNumericLabelToTick:3,kChartToChart:4,kExtra:5,kEndTickToChart:6,kEndLabelToChart:7,kBetweenLabelCenters:8,kCategoricalLabelToTick:9,kBandSide:10,kDataLabel:11,kRefLabel:12,kAxisOriginLabel:13};mstrmojo.chart.enums.EnumValueAxis={VA_Y1:0,VA_Y2:1,VA_BOTH:2,VA_Y3:3,VA_Y4:4};mstrmojo.chart.enums.EnumMarkerShape={MS_Rectangle:0,MS_XShape:1,MS_PlusSymbolthin:2,MS_PlusSymbolthick:3,MS_Circle:4,MS_Diamond:5,MS_Triangle:6,MS_Square:7,MS_Star:8,MS_Area:9,MS_Star45:10};mstrmojo.chart.enums.EnumGraphMatrixThemeType={UNDEFINED:-1,_black:0,_white:1};mstrmojo.chart.enums.EnumFontStyle={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};mstrmojo.chart.model.enums.EnumDSSGraphFillEffect={DssGraphFillSimple:0,DssGraphFillGenericGradient:1,DssGraphFillWash:3,DssGraphFillPicture:4,DssGraphFillUserPicture:6,DssGraphFillBrush:13,DssGraphFillAdvancedWash:14,DssGraphFillPattern:101};mstrmojo.chart.enums.EnumRadientGradientUsage={RG_PIESLICE:0,RG_RING:1,RG_BORDERRING:2};mstrmojo.chart.model.enums.EnumDSSGraphFontRotation={Automatic:-1,Normal:0,RotateHotel:1,Rotate90:2,Rotate180:3,Rotate270:4,Rotate45:5,Rotate315:6,Custom:7};mstrmojo.chart.enums.EnumFillType={FT_SIMPLE:0,FT_TEXTURE:4,FT_PICTURE:6,FT_GRADIENT:14,FT_PATTERN:101};mstrmojo.chart.enums.EnumDssGraphGridChartUniformColorMode={BYX:0,BYY:1,BYBOTH:2};mstrmojo.chart.enums.EnumDSSExtraGraphObject={DssGraphO1Interlaced:20000,DssGraphO2Interlaced:20001,DssGraphX1Interlaced:20002,DssGraphY1Interlaced:20003,DssGraphY2Interlaced:20004,DssGraphY3Interlaced:20005,DssGraphY4Interlaced:20006,DssGraphZInterlaced:20007,DssGraphQualityBand:20008,DssGraphQualityBandTitle:20009,DssGraphY1SecondUserLine:21000,DssGraphWarningMessage:21001,DssGraphO1BracketLine:21002,DssGraphBaseLayer:21004,DssGraphMiddleWallLayer:21005,DssGraphPlotLayer:21006,DssGraphRendererLayer:21007,DssGraphBanner:22005};mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition={_BOTTOM:0,_TOP:1,_LEFT:2,_RIGHT:3,_CENTER:4};mstrmojo.chart.enums.EnumLayout={LO_ABSOLUTE:0,LO_CLUSTER:1,LO_STACKED:2,LO_PERCENT:3};mstrmojo.chart.enums.EnumRectCompare={NONE:-1,ExpandX:0,ExpandY:1,ShrinkX:2,ShrinkY:3,KeepX:4,KeepY:5,KeepBoth:6};mstrmojo.chart.enums.EnumRectExpandDirection={REC_EXP_INVALID:0,REC_EXP_HORIZONTAL:1,REC_EXP_VERTICAL:2,REC_EXP_BOTH:3};mstrmojo.chart.model.enums.EnumVariantType={VT_EMPTY:0,VT_NULL:1,VT_I2:2,VT_I4:3,VT_R4:4,VT_R8:5,VT_CY:6,VT_DATE:7,VT_BSTR:8,VT_DISPATCH:9,VT_ERROR:10,VT_BOOL:11,VT_VARIANT:12,VT_UNKNOWN:13,VT_DECIMAL:14,VT_I1:16,VT_UI1:17,VT_UI2:18,VT_UI4:19,VT_I8:20,VT_UI8:21,VT_INT:22,VT_UINT:23,VT_VOID:24,VT_HRESULT:25,VT_PTR:26,VT_SAFEARRAY:27,VT_CARRAY:28,VT_USERDEFINED:29,VT_LPSTR:30,VT_LPWSTR:31,VT_RECORD:36,VT_FILETIME:64,VT_BLOB:65,VT_STREAM:66,VT_STORAGE:67,VT_STREAMED_OBJECT:68,VT_STORED_OBJECT:69,VT_BLOB_OBJECT:70,VT_CF:71,VT_CLSID:72,VT_BSTR_BLOB:4095,VT_VECTOR:4096,VT_ARRAY:8192,VT_BYREF:16384,VT_RESERVED:32768,VT_ILLEGAL:65535,VT_ILLEGALMASKED:4095,VT_TYPEMASK:4095};mstrmojo.chart.model.enums.EnumDSSGraphMarkerShape={DssGraphMarkerShapeNone:0,DssGraphMarkerShapeRectangle:1,DssGraphMarkerShapeStar45:2,DssGraphMarkerShapePlus:3,DssGraphMarkerShapeCircle:4,DssGraphMarkerShapeDiamond:5,DssGraphMarkerShapeSpikedX:6,DssGraphMarkerShapePlainX:7,DssGraphMarkerShapeTriangle1:8,DssGraphMarkerShapeFatPlus:10,DssGraphMarkerShapeSquare:24,DssGraphMarkerShapeHouse:27,DssGraphMarkerShapeStar5:37,DssGraphMarkerShapeGMTick:200,DssGraphMarkerShape2DPie:201,DssGraphMarkerShape2DRingPie:202,DssGraphMarkerShapeCombined:203,DssGraphMarkerShapeGMPolyLine:204,DssGraphMarkerShapeGMBar:205,DssGraphMarkerShapeGMArea:206,DssGraphMarkerBullet:207};(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom,D=Math;mstrmojo.gm._IsAnchorable={PLACEMENT_ABOVE:1,PLACEMENT_BELOW:2,PLACEMENT_LEFT:3,PLACEMENT_RIGHT:4,anchor:null,anchorPosition:null,boundary:null,boundaryPosition:null,popupNodeName:"infoNode",tipNodeName:"tipNode",baseTipClass:"arrow",infoNodeOffset:25,popupNodeOffset:0,placementOrder:[this.PLACEMENT_ABOVE,this.PLACEMENT_BELOW,this.PLACEMENT_LEFT,this.PLACEMENT_RIGHT],hasScrollbars:function G(){return(!mstrApp.isTouchApp||!mstrApp.isTouchApp());},positionDialog:function E(){if(!this.anchorPopup()){if(typeof this._super==="function"){this._super();}}},positionTipNode:function A(I){var J=this.baseTipClass,K=this[this.tipNodeName];K.className=J+" "+I;},getTipDimension:function B(){var J=this[this.tipNodeName],I=C.position(J);return I;},anchorPopup:function F(){this.positionTipNode("top");var K=this.anchor,b=this.boundary,o=this[this.popupNodeName],r=this.infoNodeOffset,h=this.popupNodeOffset,k=this.hasScrollbars(),Y=this.anchorPosition||C.position(K,true),M=this.boundaryPosition||C.position(b,true),t=M.w,L=M.h,c=o.offsetWidth,O=o.offsetHeight,U=c/2,I=O/2,W=this.getTipDimension(),g=D.min(W.h,W.w),P=D.max(W.h,W.w)/2;if(k){t-=15;L-=15;}var Z=C.contains(b,o),j=Z?0:M.y,s=t/2-U,Q=L/2-I+j,n=-1000,u=-1000;if(Z){Y.x=Y.x-M.x;Y.y=Y.y-M.y;}var f=Y.y+Y.h,N=Y.x+Y.w,e=Y.x>c,p=((N+c)<t),R=Y.y>O,l=((f+O)<L),T=this,V=function(w,y,x){return D.min(D.max(w,x),D.max(y,0));},d=function(){if((Y.x<t)&&R){var w=Y.x+(Y.w/2);T.positionTipNode("bottom");u=Y.y-g-h;Q=u-O+r;s=V(0,t-c,w-U);n=V(Y.x,N,w)-P;return true;}return false;},J=function(){if((Y.x<t)&&l){var w=Y.x+(Y.w/2);T.positionTipNode("top");u=f+h;Q=u+g-r;s=V(0,t-c,w-U);n=V(Y.x,N,w)-P;return true;}return false;},a=function(){if((Y.y<L)&&e){var w=Y.y+(Y.h/2);T.positionTipNode("right");n=Y.x-g-h;s=n-c+r;Q=V(j,L-O,w-I);u=V(Y.y,f,w)-P;return true;}return false;},X=function(){if((Y.y<L)&&p){var w=Y.y+(Y.h/2);T.positionTipNode("left");n=N+h;s=n+g-r;Q=V(j,L-O,w-I);u=V(Y.y,f,w)-P;return true;}return false;},S=[],q;for(q=0;q<this.placementOrder.length;q++){switch(this.placementOrder[q]){case this.PLACEMENT_ABOVE:S.push(d);break;case this.PLACEMENT_BELOW:S.push(J);break;case this.PLACEMENT_LEFT:S.push(a);break;case this.PLACEMENT_RIGHT:S.push(X);break;}}for(q=0;q<S.length;q++){if(S[q]()){break;}}Q=D.round(Q);s=D.round(s);u=D.round(u);n=D.round(n);this.applyPopupNodePos(Q,s,u,n);return true;},applyPopupNodePos:function H(K,J,M,I){var O=this[this.tipNodeName],L=O.style,P=this[this.popupNodeName],N=P.style;L.top=M+"px";L.left=I+"px";N.top=K+"px";N.left=J+"px";}};}());(function(){mstrmojo.requiresCls("mstrmojo.EnumDSSDisplayMode");mstrmojo.requiresDescs(981);var B=mstrmojo.vi.viz;mstrmojo.vi.viz.KnownVisualizations={CUSTOM:-2,UNKNOWN:-1,GRID:0,ESRIMAP:2,GRAPHMATRIX:3,IMAGELAYOUT:4,HEATMAP:16,GOOGLEMAP:17,NETWORK:18,getDefinition:function A(E){var F=B.KnownVisualizations,H={Grid:{id:F.GRID,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,title:mstrmojo.desc(981,"Grid")},visAjaxDatePicker:{id:1},ESRIMapVisualizationStyle:{id:F.ESRIMAP,mobileVIStyles:{IPhoneVisualization:"ViEsriMapAdapter",IPadVisualization:"ViEsriMapAdapter"}},GraphMatrixVisualizationStyle:{id:F.GRAPHMATRIX,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,widgetEnable:"-1",mobileVIStyles:{IPadVisualization:"IPadGraphMatrix2Style"}},ImageLayoutVisualizationStyle:{id:F.IMAGELAYOUT,mobileVIStyles:{IPadVisualization:"IPhoneImageMapStyle",ATabletVisualization:"AndroidImageMapStyle"}},SurveyVisualizationStyle:{id:8,mobileVIStyles:{IPadVisualization:"SurveyVisualizationStyle"}},VIHeatMapVisualizationStyle:{id:F.HEATMAP,mobileVIStyles:{IPadVisualization:"IPadHeatMapStyle",ATabletVisualization:"HeatMapVisualizationStyle"}},GoogleMapVisualizationStyle:{id:F.GOOGLEMAP,mobileVIStyles:{IPhoneVisualization:"IPhoneMapStyle",IPadVisualization:"IPadMapStyle"}},NetworkVisualizationStyle:{id:F.NETWORK,mobileVIStyles:{IPadVisualization:"IPhoneNetVizStyle"}}};var G=H[E];if(!G){var C=mstrConfig.pluginsVisList,D=C&&C[E];G={id:D?F.CUSTOM:F.UNKNOWN};G.mobileVIStyles=(D&&D.mobileVIStyles)||{};}return G;}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.EnumRWUnitType");var F=mstrmojo.array;var G=2;var I={attribute:"attribute",metric:"metric",empty:"empty;"};function B(){var L=this.model.data.gts,O=(L&&L.row)||[],M=(L&&L.col)||[],N=O.concat(M);return N;}function C(){var L=this.model.scm,N=Object.keys(L||{}),P=(N&&N[0])||"",O=this.model.data.gts.row,M=this.model.data.gts.col;F.forEach(O.concat(M),function(Q){if(N.indexOf(Q.id)!==-1){P=Q.id;return false;}});return P;}mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights=mstrmojo.provide("mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights",{_mixinName:"mstrmojo.netviz._SupportNetworkBrushesAndHighlights",selectedMetricIds:null,TUSType:I.empty,init:function K(L){this.selectedMetricIds=[];if(this._super){this._super(L);}},addAttributeSelection:function(M,L,N){this.TUSType=I.attribute;this._super(M,L,N);},addMetricValueSelection:function(L){this.TUSType=I.attribute;this._super(L);},getTUSType:function(){return this.TUSType;},precessSelectedAttributes:function(M,L,O){if(!O){var N=this.getSingleAttributeSelectorControl();if(!N){this.interactor.clearSelectedTargets();this.interactor.clearSelectRules();this.clearSelections(true);}}},processSelectedMetricIds:function(M,L,O){if(!O){var N=this.getMetricSelectorControl();if(N){this.interactor.clearMetricSelectorHighlight();this.selectedMetricIds=[];}}},highlight:function(M,N){if(this._super){this._super.apply(this,arguments);}if(this.noHighlightAfterKeepOnlyExcludeDrill){return ;}var L=this.interactor;if(L){L.doHighlight(M,N);}},singleUnitSelect:function A(){var Q=this.selectedMetricIds.length>0&&this.hasMetricSelector(),S=(this.getSelections().length>0||this.clearSelectionsFlag)&&this.hasAttributeSelector();if(this.clearSelectionsFlag){delete this.clearSelectionsFlag;}Q=false;if(S&&Q){var N={multiSelect:true,type:mstrmojo.EnumRWUnitType.GRID,src:this.model.k,sliceId:1,sid:1,anchor:this.domNode,selectorObjects:[]};var T=this.getSingleAttributeSelectorControl(),R=this.model.getSelectedAttributeElementIdStr();N.selectorObjects.push({ck:T.ck,ctlKey:T.ckey,tks:T.tks,eid:R});var M=this.getMetricSelectorControl(),P=this.getSelectedMetricIdStr();N.selectorObjects.push({ck:M.ck,ctlKey:M.ckey,tks:M.tks,eid:P});this.controller.onGridSelector(this,N);}else{if(Q){var O=this.getMetricSelectorControl();this.singleMetricSelect(O);}else{if(S){var L=function(){var V={};V.tid=C.call(this);V.eid="";V.isClearAll=false;V.anchor=this.domNode;V.at=G;V.selections=this.getSelections();V.selectionType=this.getSelectionType();return V;};var U=L.call(this);this.performAction([U]);}}}},getSelectedMetricIdStr:function(M){var P=this.selectedMetricIds,O=P.join("\u001E"),Q=M.sc,N=Q.showall&&P.length===0,L=N?"OA:(All)":O;return L;},singleMetricSelect:function E(M){var O=M.sc,L=this.getSelectedMetricIdStr(M),N={type:mstrmojo.EnumRWUnitType.GRID,anchor:this.domNode,ck:O.ck,tks:O.tks,eid:L,ctlKey:O.ckey,sliceId:this.sid,isUConDS:O.isUConDS,isDocVis:true};this.controller.onGridSelector(this,N);},getSingleAttributeSelectorControl:function(){var M=null;if(this.hasAttributeSelector()){var L=C.call(this);M=this.model.scm[L];}return M;},getMetricSelectorControl:function D(){var M=B.call(this),L=null;F.forEach(M,function(N){if(N.otp===-1&&N.hasOwnProperty("sc")){L=N;return false;}});return L;},hasAttributeSelector:function J(){var M=B.call(this),L=false;F.forEach(M,function(N){if(N.otp!==-1&&N.hasOwnProperty("sc")){L=true;return false;}});return L;},hasMetricSelector:function H(){var M=B.call(this),L=false;F.forEach(M,function(N){if(N.otp===-1&&N.hasOwnProperty("sc")){L=true;return false;}});return L;},hasRSSelector:function(){return this.hasAttributeSelector()||this.hasMetricSelector();},postBuildRendering:function(){if(this.cetSelectors){var L=this.cetSelectors.attrs,M=this.cetSelectors.metrics,N=this;if(L.length>0){L.forEach(function(O){N.addAttributeSelection(O.tid,O.id,O.n);});}if(M.length>0){M.forEach(function(O){N.addMetricValueSelection(O.tid,O.id,O.n);});}}this._super();},clearSelections:function(L,M){this.clearSelectionsFlag=true;this.TUSType=I.empty;if(this._super){this._super();}if(L){this.clearSelectedHighlights(M);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash,A={shpLnThk:[2],shpLnClr:[11826975,16756758],shpLnStyle:[0],shpFillClr:[11826975,16756758],shpFillStyle:[0],shpFillTrans:[80],shpFillEff:[1],shpBdrClr:[undefined],shpBdrStyle:[0],shpBdrThk:[2],lnMkShw:[false],lnMkShp:[4],lnMkSz:[3],lnMkClr:[undefined],lnMkClrEq:[true],lnMkBdrClr:[undefined],pieExpl:[false],dlFntFml:["Arial"],dlFntSz:["8pt"],dlFntStyle:[0],dlFntClr:[5066061,16514043],rfLnFntFml:["Arial"],rfLnFntSz:["8pt"],rfLnFntStyle:[0],rfLnFntClr:[5066061,16514043],lgdBgFillClr:[15461355,1710618],lgdBgFillStyle:[0],lgdBgFillEff:[1],lgdBgFillTrans:[0,0],lgdFntSz:["8pt"],lgdFntFml:["Arial"],lgdFntStyle:[0],lgdFntClr:[6710886,16777215],lgdBdrShw:[false],lgdBdrClr:[11579568,5855577],lgdBdrThk:[1],lgdBdrStyle:[0],xAxOriLnShw:[false],xAxOriLnClr:[11579568,5855577],xAxOriLnStyle:[1],xAxOriLnThk:[1],yAxOriLnShw:[false],yAxOriLnClr:[11579568,5855577],yAxOriLnStyle:[1],yAxOriLnThk:[1],xAxShw:[true],xAxLnShw:[true],xAxLnClr:[11579568,5855577],xAxLnStyle:[0],xAxLnThk:[1],xAxTtShw:[true],xAxTtFntSz:["8pt"],xAxTtFntClr:[6710886,16777215],xAxTtFntFml:["Arial"],xAxTtFntStyle:[0],xAxLbFntClr:[6710886,16777215],xAxLbFntSz:["8pt"],xAxLbFntFml:["Arial"],xAxLbFntStyle:[0],xAxLbRtt:[-1],xAxLbShw:[true],yAxShw:[true],yAxLnShw:[true],yAxLnClr:[11579568,5855577],yAxLnStyle:[0],yAxLnThk:[1],yAxTtShw:[true],yAxTtFntSz:["8pt"],yAxTtFntClr:[6710886,16777215],yAxTtFntFml:["Arial"],yAxTtFntStyle:[0],yAxLbFntClr:[6710886,16777215],yAxLbFntSz:["8pt"],yAxLbFntFml:["Arial"],yAxLbFntStyle:[0],yAxLbRtt:[-1],yAxLbShw:[true],bgFillClr:[16777215,2631720],bgFillEff:[1],bgFillStyle:[0],bgFillTrans:[100],rwHdrFillClr:[16382457,2631720],rwHdrFillEff:[1],rwHdrFillStyle:[0],rwHdrFillTrans:[100],colHdrFillClr:[16382457,2631720],colHdrFillEff:[1],colHdrFillStyle:[0],colHdrFillTrans:[100],vMatrixLnShw:[true],vMatrixLnClr:[11579568,5855577],vMatrixLnThk:[1],vMatrixLnStyle:[0],hMatrixLnShw:[true],hMatrixLnClr:[11579568,5855577],hMatrixLnThk:[1],hMatrixLnStyle:[0],allTxtFntClr:[6710886],allTxtFntSz:["8pt"],allTxtFntFml:["Arial"],allTxtFntStyle:[0],outBdrClr:[11579568,5855577],outBdrStyle:[0],outBdrThk:[1],gridLineAuto:[true],gridLnClr:[11579568,5855577],gridLnThk:[1],gridLnStyle:[0],majorGridLnShw:[1],majorGridLnClr:[11579568,5855577],majorGridLnThk:[1],majorGridLnStyle:[0],minerGridLnShw:[1],minerGridLnClr:[11579568,5855577],minerGridLnThk:[1],minerGridLnStyle:[0],rwHdrShw:[true],colHdrShw:[true],rwVlShw:[true],colVlShw:[true],rwHdrTxtFntClr:[6710886,16777215],rwHdrTxtFntSz:["8pt"],rwHdrTxtFntFml:["Arial"],rwHdrTxtFntStyle:[0],rwHdrTxtAlignH:[1],rwHdrTxtAlignV:[1],colHdrTxtFntClr:[6710886,16777215],colHdrTxtFntSz:["8pt"],colHdrTxtFntFml:["Arial"],colHdrTxtFntStyle:[0],colHdrTxtAlignH:[1],colHdrTxtAlignV:[1],rwVlTxtFntClr:[6710886,16777215],rwVlTxtFntSz:["8pt"],rwVlTxtFntFml:["Arial"],rwVlTxtFntStyle:[0],rwVlTxtAlignH:[1],rwVlTxtAlignV:[1],colVlTxtFntClr:[6710886,16777215],colVlTxtFntSz:["8pt"],colVlTxtFntFml:["Arial"],colVlTxtFntStyle:[0],colVlTxtAlignH:[1],colVlTxtAlignV:[1],ttlFntClr:[6710886,16777215],ttlFntSz:["8pt"],ttlFntFml:["Arial"],ttlFntStyle:[0],prtRdn:[false],trdDgr:[2],trdRefLnThk:[1],trdRefLnClr:[5066061,16514043],trdRefLnStyle:[0]};function B(D){var E={};C.keyarray(A).forEach(function(G){var F=A[G];E[G]=F[D]||F[0];});return E;}mstrmojo.gm.GMPropDefaults=mstrmojo.provide("mstrmojo.gm.GMPropDefaults",{propValuesLight:null,propValuesDark:null,update:function(I,H){var G,F,D=1,E=I===D?this.propValuesLight:this.propValuesDark;if(E&&H&&H[0]){F=H[0];G=H[1]!==undefined?H[1]:A[F][I];E[F]=G;}},lightTheme:function(){var D=this.propValuesLight;if(!D){D=B(0);this.propValuesLight=D;}return D;},darkTheme:function(){var D=this.propValuesDark;if(!D){D=B(1);this.propValuesDark=D;}return D;}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphProperty");var B=mstrmojo.chart.model,C=B.enums,A=C.EnumDSSGraphProperty;mstrmojo.chart.model.enums.EnumDSSGraphRegressionType={DssGraphRegressionNone:0,DssGraphRegressionLinear:A.DssGraphShowSDLinrLine,DssGraphRegressionLog:A.DssGraphShowSDLinrLog,DssGraphRegressionPoly:A.DssGraphShowSDLinrNPoly,DssGraphRegressionExp:A.DssGraphShowSDLinrExp,DssGraphRegressionMA:A.DssGraphShowSDMOVALine,DssGraphRegressionNatLog:A.DssGraphShowSDLinrNatLog,DssGraphRegressionSTDD:A.DssGraphShowSDSTDDLine,DssGraphRegressionMean:A.DssGraphShowSDMeanLine,DssGraphRegressionPow:200};})();(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphObject");var A=mstrmojo.chart.model,C=A.enums,B=C.EnumDSSGraphObject;mstrmojo.chart.model.enums.EnumDSSGraphTitleName={DssGraphTitleReserved:0,DssGraphTitleTitle:B.DssGraphTitle,DssGraphTitleSubtitle:B.DssGraphSubtitle,DssGraphTitleFootnote:B.DssGraphFootnote,DssGraphTitleCategory:B.DssGraphXTitle,DssGraphTitleSeries:B.DssGraphSeriesTitle,DssGraphTitleY1:B.DssGraphY1Title,DssGraphTitleY2:B.DssGraphY2Title,DssGraphTitleY1Right:B.DssGraphY1RightTitle};})();(function(){mstrmojo.requiresCls("mstrmojo.array");var L=10,C=20,a=false,k=false,W=L,b=[],V=mstrmojo.array,J=false,P,f;var B=6,X=7,A=100,h=101,O=102,F=103;function D(o,r,p){var n=r[0],l=r[1],q;o.beginPath();o.moveTo(n,l);for(q=2;q<r.length-1;q=q+2){o.lineTo(r[q],r[q+1]);}o.lineTo(n,l);o.fillStyle=p;o.stroke();o.fill();}function g(o,r,p){var n=r[0],s=r[1],q=r[2]-n,l=r[3]-s;o.fillStyle=p;o.strokeRect(n,s,q,l);o.fillRect(n,s,q,l);}function Z(t,q,u){var o=q[0],n=q[1],s=q[2],p=q[3],r=q[4],l=q[5];t.beginPath();t.arc(o,n,p,r,l,false);t.lineTo(o+s*Math.cos(l),n+s*Math.sin(l));t.arc(o,n,s,l,r,true);t.closePath();t.fillStyle=u;t.stroke();t.fill();}function M(t,q,u){var p=q[0],o=q[1],r=q[2],s=q[3],l=q[4],n=q[5];t.scale(1,n);t.beginPath();t.arc(p,o,r,s,l,false);t.lineTo(p,o);t.arc(p,o,0,l,s,true);t.closePath();t.fillStyle=u;t.stroke();t.fill();t.scale(1,1/n);}function N(u,r,w){var p=r[0],o=r[1],s=r[2],t=r[3],l=r[4],q=r[5],n=r[6];u.scale(1,n);u.beginPath();u.arc(p,o,s,t,l,false);u.lineTo(p+s*Math.cos(l),o+s*Math.sin(l)-q);u.arc(p,o-q,s,l,t,true);u.closePath();u.fillStyle=w;u.stroke();u.fill();u.scale(1,1/n);}function E(l,o,n){l.fillStyle=n;l.beginPath();l.arc(o[0],o[1],o[2],0,Math.PI*2,true);l.stroke();l.fill();}function T(n,l){return n.Point.X-l.Point.X;}function I(n,AC,x){var AB=this.tooltipArr[x],p=n.Text,s=n.SC,l=AB.style,AA=this.model.getZoomFactor(),t=mstrMobileApp.getDeviceDPI()/160,y=2*t,z=mstrApp.getScreenDimensions().w-(P*2);if(mstrApp.isTablet()){AA=(AA*t)+"em";}else{if(mstrMobileApp.getDeviceDPI()>240){AA=(AA*1.5)+"em";}else{AA+="em";}}var r="font-size:"+AA+";";r+="padding:"+y+"px;";r+="maxWidth:"+z+"px;";if(s){r+="border-color:#"+s;}AB.innerHTML=p;l.cssText=r;l.display="block";var w=0,q=0;var o=AB.offsetHeight,u=AB.offsetWidth;w=AC.y-o-6;q=AC.x-u-6;b.push({x:n.Point.X,y:n.Point.Y,clr:s||"#000000",top:w,left:q,width:u,height:o});}function Q(o,n,l){var q=l.left,p=Math.max(l.top,f+C);width=l.width,style=n.style,newLeft=q+width+12;if(newLeft+width<=mstrApp.getScreenDimensions().w){q=newLeft;}else{if(q<0){q=P;}}style.left=q+"px";style.top=p+"px";o.showAreaMarker(l.x,l.y,l.clr);}function e(l,AF){var AA=b[AF],AC=l.tooltipArr,z=AC[AF].style,o=AA.left,r=AA.top,w=AA.width,s=AA.height,x=mstrApp.getScreenDimensions().w,y,u;if(AF>0){var t=b[AF-1],q=t.top,n=t.left,AE=n+t.width,p=n+w,AD;o=n;if(p>AE){o-=(p-AE);}else{if(p<AE){o+=(AE-p);}}if(o<0){if((w*2)+12>x){a=false;J=true;o=P;for(y=0;y<AF;y++){AD=AC[y];t=b[y];u=o+w-t.width;t.left=u;AD.style.left=o+w-t.width+"px";}}else{a=true;}}r=q-C-s;if(r<f){var AB=Math.abs(r)+f+C;for(y=0;y<AF;y++){AD=AC[y];t=b[y];q=t.top+AB;t.top=q;AD.style.top=q+"px";}r+=AB;}}else{if(o<0){if((w*2)+12>x){J=true;o=P;}else{a=true;}}if(r<f){r=f+C;}}if(!a){z.left=o+"px";AA.left=o;}z.top=r+"px";AA.top=r;l.showAreaMarker(AA.x,AA.y,AA.clr);}function U(r,l,p,t){var o=r.tooltipArr[l].style,q=b[l],s=b[l-p].top,n=q.width;if(t+n>mstrApp.getScreenDimensions().w){k=true;o.display="none";return ;}o.left=t+"px";o.top=s+"px";r.showAreaMarker(q.x,q.y,q.clr);}function c(AB){var AC=b.length,n=AB.tooltipArr,q=Math.ceil(AC/2),s=0,AA=1,y=Math.min(AC,L/2),l=mstrApp.getScreenDimensions().w,p,o,x,u;for(s=0;s<q;s++){e(AB,s);}if(a||J){for(s;s<y;s++){e(AB,s);}if(!J){var r=s-1,z=0,w=0,t,AD;p=b[r];o=p.left+p.width+12;for(r=s-1;r>=0;r--){x=n[r];AD=b[r].width;if(o+AD>l){w=P+AD;if(w>z){u=w;t=b[r];}}x.style.left=o+"px";}if(z>0){for(r=0;r<s;r++){x=n[r];x.style.left=(P+t.width-b[r].width)+"px";}}}}else{p=b[AC-1];o=p.left+p.width+12;for(s;s<AC;s++){U(AB,s,AA,o);AA+=2;if(k){break;}}if(k&&s<=y){for(s=q;s<AC;s++){e(AB,s);n[s].style.display="block";}}}}function S(){var l=this,n=b.length;if(n===0){return ;}f=mstrApp.rootView.getTitleHeight();if(n===1){Q(l,l.tooltipArr[0],b[0]);}else{c(l);}}function K(o,l,p,n){switch(o){case X:g(l,p,n);break;case A:E(l,p,n);break;case h:Z(l,p,n);break;case O:M(l,p,n);break;case F:N(l,p,n);break;default:D(l,p,n);}}mstrmojo.graph._MobileGraphAreaHelper=mstrmojo.provide("mstrmojo.graph._MobileGraphAreaHelper",{highlightArea:function j(q,o){var p=this,l=q.getContext("2d"),n="rgba(255, 255, 255, 0.5)";p.clearHighlightArea(q);l.strokeStyle="#FFFFFF";V.forEach(o,function(r){K(r.Shape,l,r.Coords,n);});},highlightAreaInInit:function G(x,t){var z=x.getContext("2d"),l=this.graphData.Areas,q="rgba(255, 255, 255, 0.5)";z.clearRect(0,0,x.width,x.height);z.strokeStyle="#FFFFFF";var n=l.length,AA=286,s=259,y=341;var w=t.length/2,r,u;for(u=0;u<n;u++){var o=l[u],p=parseInt(o.OID,10);if(p!==AA&&p!==s&&p!==y){continue;}if(o.SID<0||o.GID<0){continue;}for(r=0;r<w;r++){if(o.SID!==t[2*r]||o.GID!==t[2*r+1]){continue;}K(o.Shape,z,o.Coords,q);}}},clearHighlightArea:function R(n){if(n){var l=n.getContext("2d");l.clearRect(0,0,n.width,n.height);n.width=n.width;}},showAreaMarker:function H(l,p,o){if(l>=0&&p>=0){var n=this.highlightNode.getContext("2d");n.save();n.fillStyle="#FFFFFF";n.strokeStyle=o||"#000000";n.lineWidth=2;n.beginPath();n.arc(l,p,5,0,Math.PI*2,true);n.stroke();n.fill();n.fillStyle=o||"#000000";n.beginPath();n.arc(l,p,2,0,Math.PI*2,true);n.stroke();n.fill();n.restore();}},displayTooltips:function d(l,r,q){l.sort(T);var p=this.tooltipArr,s;a=false;k=false;b=[];this.clearHighlightArea(this.highlightNode);if(!p){P=8*(mstrMobileApp.getDeviceDPI()/160);p=[];for(s=0;s<L;s++){var u=document.createElement("div");u.id="mstrmojo-mobileGraph-tooltip";u.className=mstrmojo.GraphBase.tooltipCLS;document.body.appendChild(u);p[s]=u;}this.tooltipArr=p;}W=Math.min(l.length,L);var t=mstrmojo.touchManager;if(W===0&&this._touchListener){t.detachEventListener(this._touchListener);delete this._touchListener;}else{if(W>0&&!this._touchListener){this._touchListener=t.attachEventListener("touchesBegin",this.id,function(x){var y=mstrmojo.all[x.srcId];if(!(y instanceof mstrmojo.android.ui.ActionToolbarButtons||y instanceof mstrmojo.android.ui.Menu)){this.displayTooltips([],0,0);}});}}var o=null,w={},n;J=false;for(s=0;s<L;s++){n=p[s].style;n.left=-9999;n.display="none";}for(s=0;s<W;s++){o=l[s];w.x=o.Point.X+r;w.y=o.Point.Y+q;I.call(this,o,w,s);}S.call(this);window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},destroy:function Y(l){V.forEach(this.tooltipArr,function(n){document.body.removeChild(n);});delete this.tooltipArr;if(this._super){this._super(l);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var A=mstrmojo,D=A.array;mstrmojo.vi.util.TemplateUtils=mstrmojo.provide("mstrmojo.vi.util.TemplateUtils",{getTemplateUnits:function B(F){var E=[].concat(F.mx);(F.rows||[]).concat(F.cols||[]).forEach(function(G){if(G.did!=="-1"){E.push({did:G.did,t:G.t,n:G.n});}});return E;},findUnitsById:function C(H,F){var E=mstrmojo.vi.util.TemplateUtils.getTemplateUnits(H),G=[];D.ensureArray(F).forEach(function(K){var J=D.find(E,"did",K),I=J>-1?E[J]:null;if(I){G.push(I);}});return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var C=function(R){var Q=(mstrApp.docModelData&&mstrApp.docModelData.mid)||"";return R.k+"-"+Q;},E={},L=mstrmojo.array;mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",{_mixinName:"mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",postBuildRendering:function G(){this._super();this.setup();if(!this.getExp()){if(E[C(this)]){this.highlight.apply(this,E[C(this)]);}else{this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}},getExp:function(){var Q=this.model.data,R=Q&&Q.sc&&Q.sc.exp;return R;},clearsBrushingOnHighlight:true,brushSub:null,clearSub:null,getAssociatedNodes:function B(){var Q=this.defn.an;return Q&&Q.length>0?Q:[];},hasAssociatedNodes:function K(){var Q=this.getAssociatedNodes();return Q.length>0;},getDocModelForEvent:function P(){return this.model&&this.model.docModel;},setup:function H(){var Q=this.getDocModelForEvent(),R=this.id;if(Q){[this.brushSub,this.clearSub].forEach(function(S){if(S){S.clear();}});this.brushSub=Q.attachEventListener("brushing",R,this.onBrushing);this.clearSub=Q.attachEventListener("clearBrush",R,this.onClearBrushing);}},handlesMultiSelection:function I(){return(this._super&&this._super())||this.getAssociatedNodes().length>0;},getHighlightKeys:function F(){var R=[],Q=this.getAssociatedNodes();Q.forEach(function(S){R.push(S.k);});return R;},onSelectionChange:function J(R){var S=false;if(this._super){S=this._super(R);}var Q=this.getDocModelForEvent();if(this.clearsBrushingOnHighlight){Q.raiseEvent({name:"clearBrush",from:this});}if(this.handlesMultiSelection()&&!S){Q.raiseEvent({name:"brushing",from:this,keys:this.getHighlightKeys()});return true;}return false;},onBrushing:function A(R){var Q=R.keys.slice();if(Q.indexOf(this.k)!==-1){if(this.highlight){var S=R.from;this.highlight(S.getSelectionType(),S.getSelectionHash());Q.push(S.k);this.getDocModelForEvent().raiseEvent({name:"clearBrush",from:this,excludeKeys:Q});}else{throw new Error(this.scriptClass+" must implement highlight method.");}}},onClearBrushing:function O(R){var Q=false;if(L.indexOf(R.excludeKeys,this.k)===-1){if(this._super){Q=this._super(R);}if(!Q){var S=this.getAssociatedNodes();if(L.find(S,"k",R.from.k)!==-1){this.clearSelections(true);}}}return true;},highlight:function D(){E[C(this)]=arguments;if(this._super){this._super.apply(this,arguments);}},clearSelections:function N(){delete E[C(this)];if(this._super){this._super.apply(this,arguments);}},updateAssociatedNodesOnMove:function M(){this.clearSelections(true);this.endSelections();delete this.defn.an;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphRegressionType");var B=mstrmojo.chart.model,D=B.enums,A=D.EnumDSSGraphRegressionType;mstrmojo.chart.GraphTrendLineOptions=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphTrendLineOptions",mRegressionType:A.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeansonal:false,init:function C(E){if(E){if(E.RegressionType){this.mRegressionType=E.RegressionType;}if(E.Order){this.mOrder=E.Order;}if(E.Period){this.mPeriod=E.Period;}if(E.ShowEquation){this.mShowEquation=E.ShowEquation;}if(E.ShowCoefficients){this.mShowCoefficients=E.ShowCoefficients;}if(E.UserSeriesGraphColor){this.mUserSeriesGraphColor=E.UserSeriesGraphColor;}if(E.Seasonal){this.mSeasonal=E.Seasonal;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var S=mstrmojo.chart,M=295,B=301,H=289,C=271,T=277,E=10003,V=100200,G=20000,U=20001,O=20002,Q=20003,N=20004,P=20005,L=20006,J=20007,I=21007,A=S.gNullObjectId=-3,F=S.gNullSeriesId=-3,D=S.gNullGroupId=-3;mstrmojo.chart.TripleId=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.TripleId",mObjectId:A,mSeriesId:F,mGroupId:D,init:function R(W){if(!W){this.mObjectId=A;this.mSeriesId=F;this.mGroupId=D;}else{if((W instanceof Array)&&W.length>=3){this.mObjectId=W[0];this.mSeriesId=W[1];this.mGroupId=W[2];}else{if(W.TripleId){var X=W.TripleId;this.mObjectId=X.mObjectId;this.mSeriesId=X.mSeriesId;this.mGroupId=X.mGroupId;}else{this.mObjectId=(W.ObjectId!==undefined)?W.ObjectId:A;this.mSeriesId=(W.SeriesId!==undefined)?W.SeriesId:F;this.mGroupId=(W.GroupId!==undefined)?W.GroupId:D;}}}}});S.gNullTripleId=new mstrmojo.chart.TripleId({ObjectId:A,SeriesId:F,GroupId:D});var K=S.gAxisTripleIds={};K.Y1=new mstrmojo.chart.TripleId({ObjectId:M,SeriesId:0,GroupId:D});K.Y2=new mstrmojo.chart.TripleId({ObjectId:B,SeriesId:0,GroupId:D});K.X1=new mstrmojo.chart.TripleId({ObjectId:H,SeriesId:0,GroupId:D});K.X2=new mstrmojo.chart.TripleId({ObjectId:V,SeriesId:0,GroupId:D});K.Z=new mstrmojo.chart.TripleId({ObjectId:E,SeriesId:0,GroupId:D});K.O1=new mstrmojo.chart.TripleId({ObjectId:C,SeriesId:0,GroupId:D});K.O2=new mstrmojo.chart.TripleId({ObjectId:T,SeriesId:0,GroupId:D});mstrmojo.chart.ManagerId=new mstrmojo.chart.TripleId({ObjectId:G,SeriesId:-3,GroupId:D});mstrmojo.chart.PlotManagerId=new mstrmojo.chart.TripleId({ObjectId:U,SeriesId:F,GroupId:D});mstrmojo.chart.PlotId0=new mstrmojo.chart.TripleId({ObjectId:O,SeriesId:0,GroupId:D});mstrmojo.chart.BarRenderer0=new mstrmojo.chart.TripleId({ObjectId:P,SeriesId:0,GroupId:D});mstrmojo.chart.LineRenderer0=new mstrmojo.chart.TripleId({ObjectId:L,SeriesId:0,GroupId:D});mstrmojo.chart.AreaRenderer0=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:0,GroupId:D});mstrmojo.chart.RenderLayer2=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:2,GroupId:D});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumNumberCategory");var B=mstrmojo.chart,A=B.enums,F=A.EnumNumberCategory;mstrmojo.chart.ChartAdvFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartAdvFormat",mFormatType:F.General,mDigits:0,mGrouping:3,mCurrency:"$",mPosCurr:0,mNegFormat:3,mCustomFormat:"General",init:function E(I){var H=mstrmojo.hash;if(I&&I.ChartAdvFormat){var G=I.ChartAdvFormat;H.copy(G,this);this.mCurrency=this.mCurrency||"$";this.mCustomFormat=this.mCustomFormat||"General";}},reset:function D(H){var G=mstrmojo.hash;G.copy(H,this);},restore:function C(){this.mFormatType=F.General;this.mDigits=0;this.mGrouping=3;this.mCurrency="$";this.mPosCurr=0;this.mNegFormat=3;this.mCustomFormat="General";}});mstrmojo.chart.dNF=new B.ChartAdvFormat();mstrmojo.chart.dNF.isDefault=true;}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.JSONUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUtil",AppendCompoundPointerVectorToJSONObject:function A(E,C,G){var F,B,D;D=G[E]=[];B=C.length;if(B>0){for(F=0;F<B;++F){C[F].AppendToJSONObject(D);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.DSSTimeUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSTimeUtil",DaysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],DaysBeforeMonth:[0,31,59,90,120,151,181,212,243,273,304,334],DateAbove1970:[1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981]});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var E=0;mstrmojo.chart.common.FractionNumber=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.FractionNumber",mDenominator:0,mNumerator:0,init:function D(F){},Copy:function B(F){this.mDenominator=F.mDenominator;this.mNumerator=F.mNumerator;},ToDouble:function A(){if(this.mDenominator===0){if(this.mNumerator>=0){return Number.POSITIVE_INFINITY;}return Number.NEGATIVE_INFINITY;}return(this.mNumerator)/this.mDenominator;},ToString:function C(L,G,K){if(this.mDenominator===0){L=false;}var J="",I=this.mNumerator,F=false;if(L){var H=parseInt(this.mNumerator/this.mDenominator);I=this.mNumerator%this.mDenominator;K=K||(I!==0);if(H>0){F=true;J=H.toString();if(K){J+=" ";}}}if(!K&&!F&&I===0){J="0";}else{if(!K&&F&&I===0){E++;}else{J+=I.toString();J+="/";J+=this.mDenominator.toString();}}if(!G){J="-"+J;}return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=mstrmojo.chart;mstrmojo.chart.JSONParameter=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONParameter",mIsFirstFrameSet:false,mIsLastFrameSet:false,mParameterName:"",mParameterValue:null,mParameterStartValue:null,init:function E(H){this._super(H);this.mIsFirstFrameSet=!H.mIsLastFrameSet;if(this.mIsFirstFrameSet){this.mParameterStartValue=H.mParameterValue;}},SetName:function D(H){this.mParameterName=H;},GetName:function C(){return this.mParameterName;},SetValue:function G(H,I){if(I){this.mParameterValue=H;this.mIsLastFrameSet=true;}else{this.mParameterStartValue=H;this.mIsFirstFrameSet=true;}},GetValue:function A(H){return H?this.mParameterValue:this.mParameterStartValue;},AppendToJSONObject:function F(J){var H,I=function I(K,L){if(K instanceof B.Point2D){J[L]={X:K.x,Y:K.y};}else{if(K instanceof B.Rect2D){J[L]={X:K.x,Y:K.y,Width:K.width,Height:K.height};}else{if(K instanceof B.RGBColor){J[L]={R:K.mR,G:K.mG,B:K.mB};}else{J[L]=K;}}}};if(this.mIsLastFrameSet&&this.mIsFirstFrameSet){J[this.mParameterName]=[this.mParameterStartValue,this.mParameterValue];}else{if(this.mIsLastFrameSet){I(this.mParameterValue,this.mParameterName);}else{if(this.mIsFirstFrameSet){I(this.mParameterStartValue,this.mParameterName);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var R=mstrmojo.chart;mstrmojo.chart.Point2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Point2D",x:0,y:0,init:function P(V){if(V){if(V.Point2D){this.x=V.Point2D.x;this.y=V.Point2D.y;}else{this._super(V);}}},Reset:function A(V,W){this.x=V;this.y=W;},ResetPoint:function N(V){this.x=V.x;this.y=V.y;},DistanceSquared:function D(V){return(this.x-V.x)*(this.x-V.x)+(this.y-V.y)*(this.y-V.y);},Distance:function C(V){return Math.sqrt(this.DistanceSquared(V));},isEqual:function O(V){return(this.x===V.x&&this.y===V.y);},IsInPolygon:function I(Y){var Z=Y.length,V=false,X,W;if(Z<3){return false;}for(X=0,W=Z-1;X<Z;W=X++){if(((Y[X].y<=this.y&&this.y<Y[W].y)||(Y[W].y<=this.y&&this.y<Y[X].y))&&this.x<=(Y[W].x-Y[X].x)*(this.y-Y[X].y)/(Y[W].y-Y[X].y)+Y[X].x){V=!V;}}return V;},IsStrictlyInPolygon:function K(Z){var Y=new R.Point2D({x:this.x+0.1,y:this.y}),W=new R.Point2D({x:this.x-0.1,y:this.y}),V=new R.Point2D({x:this.x,y:this.y+0.1}),X=new R.Point2D({x:this.x,y:this.y-0.1});if(Y.IsInPolygon(Z)){return false;}if(W.IsInPolygon(Z)){return false;}if(V.IsInPolygon(Z)){return false;}return !X.IsInPolygon(Z);},Rotate:function M(W,Y){var V=this.x-W.x,X=this.y-W.y;this.x=W.x+Math.cos(Y)*V-Math.sin(Y)*X;this.y=W.y+Math.sin(Y)*V+Math.cos(Y)*X;},MiddleTo:function F(V){return new R.Point2D({x:(this.x+V.x)/2,y:(this.y+V.y)/2});},Shifted:function Q(V){return new R.Point2D({x:this.x+V.x,y:this.y+V.y});},NegativeShifted:function T(V){return new R.Point2D({x:this.x-V.x,y:this.y-V.y});},swap:function L(){var V=this.x;this.x=this.y;this.y=V;},swapPoints:function B(W){var V;V=this.x;this.x=W.x;W.x=V;V=this.y;this.y=W.y;W.y=V;},IsOnSegment:function H(Y,W,X){var V=X?0.01:-0.01;if(Math.abs(Y.x-W.x)<0.01){if((this.y-Y.y)>V&&(W.y-this.y)>V){return true;}if((this.y-W.y)>V&&(Y.y-this.y)>V){return true;}}else{if((this.x-Y.x)>V&&(W.x-this.x)>V){return true;}if((this.x-W.x)>V&&(Y.x-this.x)>V){return true;}}return false;},IsOnVerOrHorSegment:function G(W,V){if(this.y===W.y&&this.y===V.y){return(((this.x-W.x)>=0&&(V.x-this.x)>=0)||((this.x-W.x)<=0&&(V.x-this.x)<=0));}if(this.x===W.x&&this.x===V.x){return(((this.y-W.y)>=0&&(V.y-this.y)>=0)||((this.y-W.y)<=0&&(V.y-this.y)<=0));}return false;},DistanceToLine:function J(d,Z){var a=this.DistanceSquared(d),W=this.DistanceSquared(Z),Y=d.DistanceSquared(Z),c=0.01,V,b,X;if(a<c||W<c){return 0;}if(Y<c){return Math.sqrt(a);}if(a>=W+Y){return Math.sqrt(W);}if(W>=a+Y){return Math.sqrt(a);}V=new R.Point2D({x:this.x-d.x,y:this.y-d.y});b=new R.Point2D({x:Z.x-d.x,y:Z.y-d.y});X=V.x*b.y-V.y*b.x;return(X<0?-X:X)/Math.sqrt(Y);},DistanceToPolygon:function S(X){var Z=X.length,V=this.DistanceToLine(X[0],X[Z-1]),Y,W;if(this.IsInPolygon(X)){return 0;}for(W=0;W+1<Z;++W){Y=this.DistanceToLine(X[W],X[W+1]);if(V>Y){V=Y;}}return V;},rotateAndClone:function E(V,W){this.Rotate(V,W);return this;},clone:function U(){return new R.Point2D({Point2D:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var A="_tmsp";var B=mstrmojo.gm.GMPropertyNode=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMPropertyNode",modifiedPropertyKeys:undefined,children:undefined,dirty:undefined,jsonObj:undefined,init:function(F){this._super(F);this.children={};this.modifiedPropertyKeys=[];var G=this.jsonObj,D,C,E;for(E in G){if(G.hasOwnProperty(E)){D=G[E];C=typeof D;if(C==="object"||C==="array"){this.setProperty(E,G[E],true);}}}},setProperty:function(D,C,E){if(typeof C==="object"){this.children[D]=new B({jsonObj:C,parent:this});this.jsonObj[D]=C;}else{this.jsonObj[D]=C;this.jsonObj[D+A]=(new Date()).getTime();}if(E!==true){this.modifiedPropertyKeys.push(D);}},manuallyAddModifiedPropertyName:function(C){this.modifiedPropertyKeys.push(C);},getRawJson:function(){return this.jsonObj;},toString:function(){return JSON.stringify(this.jsonObj);},getPropertyNode:function(C){return this.children[C];},getPropertyJSONValue:function(D){var C=this.children[D];if(C){return C.jsonObj;}return this.jsonObj[D];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.Vector2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Vector2D",x:0,y:0,init:function H(I){if(I){if(I.x!==undefined&&I.y!==undefined){this.x=I.x;this.y=I.y;}else{if(I.Point){this.x=I.Point.x;this.y=I.Point.y;}else{if(I.StartPoint&&I.EndPoint){this.x=I.EndPoint.x-I.StartPoint.x;this.y=I.EndPoint.y-I.StartPoint.y;}}}}},Reset:function B(I,J){this.x=I;this.y=J;},LengthSquared:function G(){return this.x*this.x+this.y*this.y;},InnerProduct:function A(I){return(this.x*I.x+this.y*I.y);},CrossProduct:function D(I){return(this.x*I.y-this.y*I.x);},IncludedAngle:function F(J){var I;I=this.InnerProduct(J)/(Math.sqrt(this.LengthSquared()*J.LengthSquared()));I=I>1?1:I;I=I<-1?-1:I;return Math.acos(I);},Length:function E(){return Math.sqrt(this.LengthSquared());},Normalize:function C(){var I=this.Length();this.x/=I;this.y/=I;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ChartCanvas=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartCanvas",chartContext:null});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.MapStructure=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.MapStructure",map:null,init:function H(K){this._super(K);this.map={};},replace:function B(L,O){var N=(L&&L.length)||0,P,M,K;for(K=0,P=this.map;K<N-1;K++){M=P[L[K]];if(M===undefined){M=P[L[K]]={};}P=M;}P[L[N-1]]=O;},replaceByTripleId:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId],L);},replaceByGraphPropertyKey:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId],L);},push:function G(K,L){this.replace(K,L);},find:function F(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}return O[L[N-1]];},findByTripleId:function J(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId]);},findByGraphPropertyKey:function I(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},deleteElement:function A(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}delete O[L[N-1]];},deleteByTripleId:function E(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId]);},deleteByGraphPropertyKey:function C(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},clear:function D(){this.map={};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumFormatType");var C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONFormat",mpOriginalAddress:0,mFormatType:A.FMT_UNDEFINED,init:function D(E){if(E.Font){this.mpOriginalAddress=E.Font.id;}else{if(E.Line){this.mpOriginalAddress=E.Line.id;}else{this.mpOriginalAddress=E.id;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=0;mstrmojo.chart.FormatBase=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatBase",init:function A(C){}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.gm.GMEnums");var A=mstrmojo.gm.EnumIdentityType;mstrmojo.gm.GMIdentities=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMIdentities"});mstrmojo.gm.HeaderCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.HeaderCellIdentity",eid:undefined,v:undefined,tid:undefined,n:undefined,tui:undefined,fid:undefined,o:undefined,isRowAttribute:undefined,at:undefined,dei:undefined,dpt:undefined});mstrmojo.gm.GeneralIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GeneralIdentity",objType:undefined});mstrmojo.gm.TitleCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.TitleCellIdentity",tid:undefined,fid:undefined,n:undefined,tui:undefined,isRowAttribute:undefined,otp:undefined,init:function(B){this.fid=B.fid;this.tid=B.id;this.isRowAttribute=B.isRowAttribute;if(B.isRowAttribute){this.objType=A.ROW_TITLE;}else{this.objType=A.COL_TITLE;}this.n=B.n;this.otp=B.otp;this.ost=B.ost;this.tui=B.tui;}});mstrmojo.gm.MetricAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.MetricAxisTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AttributeAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AttributeAxiTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AxisIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AxisIdentity",isNumericAxis:undefined,metricIdxArr:undefined,attrIdArr:undefined});mstrmojo.gm.ColorSquareIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.ColorSquareIdentity",init:function(B){this._super(B);this.comb=this.getElementsCombination();},getElementsCombination:function(){var B,F=this.token,C,H,G,E,I,D;if(F){D=[];C=F.levels;H=F.elements;G=F.types;B=C.length;for(E=0;E<B;E++){I={eid:H[E],tid:C[E]};if(G){I.tp=G[E];}D.push(I);}return D;}return undefined;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ImageMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ImageMap",mShape:-1,mObjectID:-1,mSeriesID:-1,mGroupID:-1,mCoordinates:null,mToolTip:"",GetShape:function E(){return this.mShape;},GetObjectID:function D(){return this.mObjectID;},GetSeriesID:function C(){return this.mSeriesID;},GetGroupID:function A(){return this.mGroupID;},GetCoordinates:function B(){return this.mCoordinates;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.array");var H=mstrmojo,F=H.array,A="00000000000000000000000000000000",E=-1;function J(K){return K.t===4&&K.id!==A;}function G(L){var K,M=(L&&L.length)||0;if(M===0){return false;}for(K=0;K<M;K++){if(!J(L[K])){return false;}}return true;}mstrmojo.VisProps=null;mstrmojo.vi.viz.DropZoneHelper=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.vi.viz.DropZoneHelper",getXml:function B(){return"";},setData:function I(K){},isMetric:function(K){return J(K);},isMetricZone:function(K){return G(K);},getMetricCountInZone:function D(L){var K=0;F.forEach(L,function(M){if(J(M)){K++;}});return K;}});mstrmojo.vi.viz.DropZoneHelper.METRIC_NAMES_ID=A;mstrmojo.vi.viz.DropZoneHelper.isMetricNames=function C(K){return(parseInt(K.did,10)===E)||(K.id===A)||(K.did===A);};}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.HSLColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.HSLColor",h:0,s:0,l:0});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.GraphAxisGeneral=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphAxisGeneral",mAxisLabelsLocation:-1,mAxisDrawInReverse:false,mShowAxisLine:true,mShowAxisLabels:true,mShowAxisTitle:false,mAxisDirection:-1,mUseInterlacedGrids:false,init:function A(B){if(B.AxisLabelsLocation!==undefined){this.mAxisLabelsLocation=B.AxisLabelsLocation;}if(B.AxisDrawInReverse!==undefined){this.mAxisDrawInReverse=B.AxisDrawInReverse;}if(B.ShowAxisLine!==undefined){this.mShowAxisLine=B.ShowAxisLine;}if(B.ShowAxisLabels!==undefined){this.mShowAxisLabels=B.ShowAxisLabels;}if(B.ShowAxisTitle!==undefined){this.mShowAxisTitle=B.ShowAxisTitle;}if(B.AxisDirection!==undefined){this.mAxisDirection=B.AxisDirection;}if(B.UseInterlacedGrids!==undefined){this.mUseInterlacedGrids=B.UseInterlacedGrids;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition","mstrmojo.chart.enums.EnumFontRotation");var D=mstrmojo.chart,G=D.enums,H=G.EnumFontRotation,A=mstrmojo.chart.model,B=A.enums,F=B.EnumDSSGraphDataTextPosition;mstrmojo.chart.LabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.LabelInfo",IsPut:false,IsClockWise:false,IsValid:false,SeriesId:0,GroupId:0,HostMarker:null,SuggestedStart:F.DssGraphDTPositionOutMin,LabelRotation:H.FR_NORMAL,Label:null,init:function I(J){this.Label=null;this.HostMarker=null;this._super(J);},IsMoved:function C(J){return(this.SuggestedStart!==J);},ToRectangle:function E(){return this.Label.GetBoundingRect();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var A=mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition;mstrmojo.chart.GMDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GMDataLabelInfo",display:false,isValid:false,SeriesId:0,GroupId:0,HostMarkerBound:null,Label:null,DataLabelLocation:A._BOTTOM,dataLabelLCenterPoints:[],CenterXOffset:0,CenterYOffset:0,dataLabelPosition:[],XIndex:0,YIndex:0,SeriesInfo:0,HostMarkerPoint:null,init:function B(C){this.dataLabelLCenterPoints=[];this.dataLabelPosition=[];this._super(C);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumShapeType","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumGraphMajorType","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixElementSizeMode");mstrmojo.requiresCls("mstrmojo.Base");var V=mstrmojo.chart,S=V.ChartConstants,C=V.common,P=V.model,k=P.enums,g=k.EnumDSSGraphMarkerShape,d=k.EnumDSSGraphType,h=k.EnumShapeType,Z=V.enums,W=Z.EnumGraphMajorType,N=Z.EnumGraphMatrixMarkerTypeInChart,c=Z.EnumGraphMatrixElementSizeMode;function q(w){var u=0.9;switch(w){case N._MUTATION_IN_LINE:case N._ISODOT_IN_LINEAREA:u=this.mHasSizeBy?0.9:0.5;break;case N._PIE:if(this.getPieShapeLayout()===W.GMT_GRID){var t=this.parentContext&&this.parentContext.mDatasetPtr&&this.parentContext.mDatasetPtr.showPieDatalabels();u=t?0.5:0.9;}break;case N._SHAPES_IN_BUBBLESCATTER:u=this.mHasSizeBy?0.9:0.5;break;case N._TICK_CATEGORY:case N._TICK_VALUE:case N._TICK_GRID:u=0.8;break;}return u;}function U(z,AC,AF,w,x,AD){w=w||false;if(x!==0){x=x||this.mMarkerShape;}if(AD===undefined||AD===null){AD=0;}var AA=0,u=(x===g.DssGraphMarkerShapeNone);if(w){u=w;}var AB=AF-AD;if(this.mHasSizeBy||!u||AF===1||AB===1){var AE=u?N._LINE_IN_LINE:N._MUTATION_IN_LINE;if(u){if(AF===1){AE=N._DOTS_IN_LINE;}else{if(w){AE=N._DOTS_IN_LINE;}}}else{if(AF===1){AE=N._ISODOT_IN_LINEAREA;}}AA=this.GetMaxMarkerSize(AE,AC,AF,this.mHasSizeBy);}else{if(z){if(w){AE=N._ISODOT_IN_LINEAREA;return this.GetMaxMarkerSize(AE,AC,AF,this.mHasSizeBy);}return 0;}else{if(w){AE=N._ISODOT_IN_LINEAREA;return this.GetMaxMarkerSize(AE,AC,AF,this.mHasSizeBy);}var t=this.parentContext;if(t&&t.mDatasetPtr){var y=t.mDatasetPtr.getGenericLineFormat(0,0);AA=y&&y.mLineThickness;if(AA<=2){AA=3;}}}AA=Math.max(AA,this.mConstants.MinimalSize.Line);}return AA;}mstrmojo.chart.GraphMatrixContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphMatrixContext",mHasSizeBy:false,mMaxSizeVal:100000,mMinSizeVal:0,mCustomScaleForSizeBy:false,mHasColorBy:false,mEstGraphWidth:600,mEstGraphHeight:400,mMarkerShape:0,mGraphType:0,mClippedPaddings:null,mHasChartWithOnlyDataMarkers:false,mIsNeedRotateDataLabel:false,mIsNeedAdjustAxis:false,mShownValueTickSet:null,mIsolatedDots:null,mConstants:null,mInputs:null,mElementsInfo:null,parentContext:null,init:function o(t){this.mShownValueTickSet=[{},{}];this.mClippedPaddings={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};if(t&&t.GraphType){this.mGraphType=t.GraphType;}this.mElementsInfo={Max:{Size:0.9,Mode:0},Min:{Size:0,Mode:0}};this.mConstants={FixedTickerSize:2,FixedDataMarkerSize:3,MinimalSize:{Bar:5,Pie:10,Band:10,Line:1,ProportionalMin:1,General:2},MaximalSize:{Bar:44,Band:100},CondenseLimit:{Percentage:10,Default:-1}};},GetAdjustThicknessValue:function X(t){switch(t){case 1:case 2:case 3:case 4:t++;break;default:break;}return t;},AddToIsolatedDotList:function s(t){if(this.mIsolatedDots===null){this.mIsolatedDots=new C.MapStructure();}this.mIsolatedDots.replaceByTripleId(t,true);},IsIsolatedDot:function j(u,t){if(this.mIsolatedDots===null){return false;}t=(t!==undefined)?t:false;if(t){if(this.mMarkerShape!==g.DssGraphMarkerShapeNone){return false;}}return(this.mIsolatedDots.findByTripleId(u)!==undefined);},IsIsolatedDotInLine:function D(t){return this.IsIsolatedDot(t,true);},GetMaxElementSizeInAreaChart:function M(w,x,t,u){return U.call(this,true,w,x,t,null,u);},GetMaxElementSizeInLineChart:function O(w,x,u,t){return U.call(this,false,w,x,u,t);},GetValueAxisPadding:function Y(u,x,w){if(w===undefined){w=true;}var t=u?(w?"X1":"X2"):(w?"Y1":"Y2");return x?this.mClippedPaddings[t].HighOffset:this.mClippedPaddings[t].LowOffset;},UpdateValueAxisPadding:function Q(w){var u,y,x,z,t;for(u=0;u<2;++u){for(t=0;t<2;++t){y=u===0;z=t===0;x=y?(z?"X1":"X2"):(z?"Y1":"Y2");if(w[x]!==undefined){this.mClippedPaddings[x].LowOffset=w[x].LowOffset;this.mClippedPaddings[x].HighOffset=w[x].HighOffset;}}}},GetMaxMarkerSize:function b(AM,AC,AK,t){t=t===undefined?false:t;var AQ=this.mElementsInfo,y=10000,AH=24,AJ=12,AA=AC?this.mEstGraphWidth:this.mEstGraphHeight,AD=AA/(AK*2)+0.5,w=AQ.Max.Size,AE=AQ.Max.Size;if(AM===N._MUTATION_IN_LINE||AM===N._ISODOT_IN_LINEAREA){w=AE;}if(AQ.Max.Mode===c._AUTOMATIC){if(AM!==N._LINE_IN_LINE){y=this.mHasSizeBy?24:12;}if(AM!==N._LINE_IN_LINE&&AM!==N._DOTS_IN_LINE){y=t?AH:AJ;}w=q.call(this,AM);}switch(AM){case N._LINE_IN_LINE:case N._DOTS_IN_LINE:var AO=AC?this.mEstGraphHeight:this.mEstGraphWidth,AL=AO*0.15;AL=Math.min(AL,y*2);if(AM===N._DOTS_IN_LINE){if(AK!==1){AD=AD*2;}AL=Math.min(AL,AD);var u=AQ.Min.Size;if(AQ.Min.Mode===c._MANUAL){u=0;}AL=Math.max(AL/2,u);}return AL;case N._MUTATION_IN_LINE:case N._ISODOT_IN_LINEAREA:case N._SHAPES_IN_BUBBLESCATTER:var z=1;z=Math.min(this.mEstGraphHeight,this.mEstGraphWidth)*0.15;z=Math.min(z*w,y);if(AM===N._MUTATION_IN_LINE||AM===N._ISODOT_IN_LINEAREA){z=Math.min(z,AD);z=Math.ceil(z);}return z;case N._PIE:var AF=true,AI=0.2,x=this.getPieShapeLayout(),AB=Math.min(this.mEstGraphWidth,this.mEstGraphHeight);if(x===W.GMT_CATEGORY){var AG=AC?this.mEstGraphHeight:this.mEstGraphWidth;if(AB/AG<0.15){AF=false;}}z=w*AB/2;if(x===W.GMT_GRID||(x===W.GMT_CATEGORY&&!AF)){if(AQ.Max.Mode===c._AUTOMATIC){z=Math.min(z,250);}}else{z*=AI;z=Math.min(z,AB);if(AQ.Max.Mode===c._AUTOMATIC){z=Math.min(z,50);}}if(x===W.GMT_CATEGORY){z=Math.min(z,AD);}z=Math.floor(Math.max(z,10));return z;case N._TICK_CATEGORY:case N._TICK_VALUE:case N._TICK_GRID:y=24;var AN=24;if(AM===N._TICK_CATEGORY){AN=AA/AK;}var AP=AN*w;if(AM===N._TICK_CATEGORY){AP=Math.min(AP,y);}return AP+0.5;default:return 0;}},GetScaledSize:function p(w,y,u){if(!this.mHasSizeBy){return y;}var t=this.mElementsInfo.Min.Mode,x=this.ToRatioEx(w,(t===c._PROPORTIONAL));if(t===c._PROPORTIONAL&&u!==null&&u!==undefined){if(u===h._CIRCLE||u===h._PIE||u===h._PIESLICE||u===h._SQUARE){x=Math.sqrt(x);}}return this.GetScaledSizeWithRatio(x,y);},GetScaledSizeWithRatio:function I(z,AB,u){var t=false,w=this.mElementsInfo,x=w.Min.Mode,AA;if(!(isNaN(u)||u===null)){AA=u;t=true;}else{AA=w.Min.Size;}if(x===c._MANUAL){AA=w.Min.Size*AB;if(AA<0){AA=0;}if(AA>AB){AA=AB;}}else{if(x===c._PROPORTIONAL){return Math.max(this.mConstants.MinimalSize.ProportionalMin,z*AB);}else{if(!t){AA=this.mConstants.MinimalSize.General;}}}var y=Math.max((AB-AA),0);var AC=z*y+AA;return Math.min(AC,AB);},ToRatio:function B(w,t,u,x){x=x||false;if(x){if(u>0){u=0;}if(t<0){t=0;}}if(u===t){return 1;}if(w>t){w=t;}if(w<u){w=u;}return Math.min((w-u)/(t-u),1);},ToRatioEx:function R(x,w){w=w||false;var t=this.mMaxSizeVal,u=this.mMinSizeVal;if(w){x=Math.abs(x);t=Math.max(Math.abs(t),Math.abs(u));u=0;}else{x=Math.min(t,x);x=Math.max(u,x);}if(this.mCustomScaleForSizeBy){return this.ToRatio(x,t,u,false);}return this.ToRatio(x,t,u,w);},getCondensedTextLimit:function e(t){switch(t){case 4:return this.mConstants.CondenseLimit.Percentage;}return this.mConstants.CondenseLimit.Default;},GetRealTripleId:function A(w,t,u){var x=800,y=new V.TripleId({TripleId:u});if(u.mSeriesId>=0){y.mSeriesId+=t*x;}if(u.mGroupId>=0){y.mGroupId+=w*x;}return y;},GetLogicalTripleId:function r(u){var w=new V.TripleId({TripleId:u}),t=341;if(u.mObjectId===t){w.mSeriesId=this.hGetLogicalId(w.mSeriesId);w.mGroupId=this.hGetLogicalId(w.mGroupId);}return w;},hGetLogicalId:function F(t){var u=800;if(t<0){return t;}t%=u;return t;},GetValueAxisZoomScale:function f(t){return 1;},checkPaddingBetweenLabels:function E(u,t,y,AA){if(y===undefined){return u.HasIntersection(t);}var x=0,z=1,AB,w;if(AA){AB=Math.abs(u.x+u.width/2-t.x-t.width/2);}else{AB=Math.abs(u.y+u.height/2-t.y-t.height/2);}switch(y){case x:w=this.getPadding(S.kBetweenLabelCenters);break;case z:if(AA){AB-=0.5*(u.width+t.width);}else{AB-=0.5*(u.height+t.height);}w=this.getPadding(S.kBetweenLabels);break;default:return u.HasIntersection(t);}return AB<w;},checkLabelPaddingToBorder:function n(y,u,AA,z){var w,t,x=this.getPadding(S.kLabelToChart);if(z){w=y.x;t=y.x+y.width;}else{w=y.y;t=y.y+y.height;}return(w>=u+x)&&(t+x<=AA);},getPadding:function L(t){switch(t){case S.kBetweenLabels:return 10;case S.kBetweenLabelLines:return 5;case S.kLabelToChart:return 5;case S.kNumericLabelToTick:return 4;case S.kExtra:return 2;case S.kChartToChart:return 10;case S.kEndTickToChart:return 10;case S.kEndLabelToChart:return 5;case S.kBetweenLabelCenters:return 20;case S.kBandSide:var u=this.mElementsInfo.Max.Mode;if(u===c._AUTOMATIC){return 5;}return 0;case S.kCategoricalLabelToTick:return 5;case S.kDataLabel:return 5;case S.kRefLabel:return 5;case S.kAxisOriginLabel:return 5;default:return 0;}},getClippedOffset:function a(w,AB,u,x,AA,z,t){var y=AA?x.x:x.y;return{LowOffset:Math.max(z,u-Math.abs(y-w)),HighOffset:Math.max(t,u-Math.abs(AB-y))};},getSizeByPieRadius:function H(w,AD,x,AA,u,z){if(w===undefined||w===null){return -1;}var AC=w.GetSizeByData(AD,x);if(AC===undefined){return -1;}var AE,t=this.mElementsInfo.Min.Mode;var AB=this.ToRatioEx(AC,t===c._PROPORTIONAL);if(t===c._PROPORTIONAL){var y=Math.max(0,z-this.mConstants.MinimalSize.Pie);AE=Math.round(y*AB+this.mConstants.MinimalSize.Pie);}else{AE=this.GetScaledSizeWithRatio(AB,z,this.mConstants.MinimalSize.Pie);}return AE;},updateGMGraphTypeWithMarkerShape:function K(t){if(t){this.mMarkerShape=t;}if(this.mMarkerShape!==202&&this.mMarkerShape!==201){return ;}switch(this.mGraphType){case d.DssGraphTypeGridChart:this.mGraphType=d.DssGraphTypeGrid_Pies;return ;case d.DssGraphTypeX_Y_Scatter:case d.DssGraphTypeDualAxis_X_Y_Scatter:case d.DssGraphTypeX_Y_Scatter_with_Labels:case d.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:this.mGraphType=d.DssGraphTypeScatter_Pies;return ;case d.DssGraphTypeBubble:case d.DssGraphTypeBubble_DualAxis:case d.DssGraphTypeBubble_With_Labels:case d.DssGraphTypeBubble_DualAxis_With_Labels:this.mGraphType=d.DssGraphTypeBubble_Pies;return ;case d.DssGraphTypeVertical_Area_Absolute:case d.DssGraphTypeVertical_Area_DualAxis_Absolute:case d.DssGraphTypeVertical_Area_BiPolar_Absolute:case d.DssGraphTypeVertical_Line_Absolute:case d.DssGraphTypeVertical_Line_BiPolar_Absolute:case d.DssGraphTypeVertical_Line_DualAxis_Absolute:case d.DssGraphTypeVertical_Bar_BiPolar_Absolute:case d.DssGraphTypeVertical_Bar_DualAxis_Absolute:case d.DssGraphTypeVertical_Bar_Absolute:case d.DssGraphTypeVertical_Bar_Side_by_Side:case d.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case d.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:this.mGraphType=d.DssGraphTypeVertical_CategoryPies_Absolute;return ;case d.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case d.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case d.DssGraphTypeHorizontal_Bar_Absolute:case d.DssGraphTypeHorizontal_Area_Absolute:case d.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case d.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case d.DssGraphTypeHorizontal_Line_Absolute:case d.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case d.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case d.DssGraphTypeHorizontal_Bar_Side_by_Side:case d.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case d.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:this.mGraphType=d.DssGraphTypeHorizontal_CategoryPies_Absolute;return ;case d.DssGraphTypeVertical_Bar_DualAxis_Stacked:case d.DssGraphTypeVertical_Bar_Stacked:case d.DssGraphTypeVertical_Bar_BiPolar_Stacked:case d.DssGraphTypeVertical_Area_BiPolar_Stacked:case d.DssGraphTypeVertical_Area_DualAxis_Stacked:case d.DssGraphTypeVertical_Area_Stacked:case d.DssGraphTypeVertical_Line_Stacked:case d.DssGraphTypeVertical_Line_BiPolar_Stacked:case d.DssGraphTypeVertical_Line_DualAxis_Stacked:this.mGraphType=d.DssGraphTypeVertical_CategoryPies_Stacked;return ;case d.DssGraphTypeHorizontal_Bar_Stacked:case d.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case d.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case d.DssGraphTypeHorizontal_Area_Stacked:case d.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case d.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case d.DssGraphTypeHorizontal_Line_Stacked:case d.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case d.DssGraphTypeHorizontal_Line_DualAxis_Stacked:this.mGraphType=d.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case d.DssGraphTypeVertical_Bar_Percent:case d.DssGraphTypeVertical_Line_Percent:case d.DssGraphTypeVertical_Area_Percent:this.mGraphType=d.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case d.DssGraphTypeHorizontal_Bar_Percent:case d.DssGraphTypeHorizontal_Line_Percent:case d.DssGraphTypeHorizontal_Area_Percent:this.mGraphType=d.DssGraphTypeVertical_CategoryPies_Percent;return ;}},isCombinationChart:function J(){return this.mMarkerShape===g.DssGraphMarkerShapeCombined;},isPieOrRingShape:function T(){return this.mMarkerShape===g.DssGraphMarkerShape2DPie||this.mMarkerShape===g.DssGraphMarkerShape2DRingPie;},getPieShapeLayout:function l(){switch(this.mGraphType){case d.DssGraphTypeHorizontal_CategoryPies_Absolute:case d.DssGraphTypeHorizontal_CategoryPies_Stacked:case d.DssGraphTypeHorizontal_CategoryPies_Percent:case d.DssGraphTypeVertical_CategoryPies_Absolute:case d.DssGraphTypeVertical_CategoryPies_Stacked:case d.DssGraphTypeVertical_CategoryPies_Percent:return W.GMT_CATEGORY;case d.DssGraphTypeScatter_Pies:return W.GMT_SCATTER;case d.DssGraphTypeBubble_Pies:return W.GMT_BUBBLE;case d.DssGraphTypeGrid_Pies:return W.GMT_GRID;default:return W.GMT_SPECTRAL;}},markerToShape:function G(t){switch(t){case g.DssGraphMarkerShapeCircle:return h._CIRCLE;case g.DssGraphMarkerShapeRectangle:case g.DssGraphMarkerShapeSquare:return h._SQUARE;case g.DssGraphMarkerShape2DPie:case g.DssGraphMarkerShape2DRingPie:return h._PIE;case g.DssGraphMarkerShapeGMTick:return h._TICKER;default:return h._GENERIC;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.string","mstrmojo.StringBuffer");mstrmojo._XMLNode=mstrmojo.declare(null,null,{nodeName:null,init:function N(O){mstrmojo.hash.copy(O,this);},addChild:function F(P){var O=new mstrmojo._XMLNode({nodeName:P});return this.appendNode(O);},appendNode:function J(O){if(O){if(!this.children){this.children=[];}this.children.push(O);O.parent=this;}return O;},addAttribute:function L(O,P){if(O!=null){if(!this.attributes){this.attributes={};}this.attributes[O]=P;}return this;},addText:function M(O){this._addToStringMember("text",O);return this;},addRawXML:function K(O){this._addToStringMember("rawXML",O);return this;},getXMLString:function I(){var O=new mstrmojo.StringBuffer();this.buildXMLString(O);return O.toString();},buildXMLString:function E(O){O=O||new mstrmojo.StringBuffer();O.append("<").append(this.nodeName).append(" ");this._buildAttributesXMLString(O).append(">").append(((this.text!=null)?this._escapeString(this.text):"")).append(((this.rawXML!=null)?this.rawXML:""));this._buildChildrenXMLString(O).append("</").append(this.nodeName).append(">");return O;},_buildAttributesXMLString:function D(O){var Q=this.attributes;if(Q){var R;for(R in Q){if(Q[R]!=null){var P=String(Q[R]);switch(R){case"et":case"nt":case"dmt":case"ddt":case"fnt":case"tp":case"stp":break;default:P=this._escapeString(P);}O.append(R+'="'+P+'" ');}}}return O;},_escapeString:function C(O){return mstrmojo.string.escape4HTMLText(O);},_buildChildrenXMLString:function H(P){var R=this.children;var O=R&&R.length;if(O){var Q;for(Q=0;Q<O;Q++){if(R[Q]&&R[Q].buildXMLString){R[Q].buildXMLString(P);}}}return P;},_addToStringMember:function A(O,Q){var P=this[O];if(P==null){this[O]=Q;}else{this[O]=P+Q;}}});mstrmojo.XMLBuilder=mstrmojo.declare(null,null,{root:null,curNode:null,addChild:function F(O){if(!this.root){this.currentNode=this.root=new mstrmojo._XMLNode({nodeName:O});}else{this.currentNode=this.currentNode.addChild(O);}return this;},appendNode:function J(O){if(!this.root){this.currentNode=this.root=O;}else{this.currentNode=this.currentNode.appendNode(O);}return this;},addAttribute:function L(O,P){if(this.currentNode){this.currentNode.addAttribute(O,P);}else{alert("no root node");}return this;},addText:function M(O){if(this.currentNode){this.currentNode.addText(O);}else{alert("no root node");}return this;},addRawXML:function K(O){if(this.currentNode){this.currentNode.addRawXML(O);}else{alert("no root node");}return this;},closeElement:function G(){this.currentNode=this.currentNode.parent;},toString:function B(){if(this.root){return this.root.getXMLString();}return"";}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");mstrmojo.vi.ui._HasMask=mstrmojo.provide("mstrmojo.vi.ui._HasMask",{_mixinName:"mstrmojo.vi.ui._HasMask",isMasked:false,onisMaskedChange:function A(){if(!this.hasRendered){return ;}var B=this.maskNode,C=this.isMasked;B.style.display=C?"block":"none";mstrmojo.css.toggleClass(B,"masked",C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var E=mstrmojo.dom,H=mstrmojo.css,C="active";var A=false;mstrmojo.util.ui.SplitterParamsType=null;function G(M,P){var O=P.info,N=O&&O.min,L=O&&O.max,K=P.start+(E.getMousePosition(M,window)[P.mouseProp]-P.mousePosition)*(O&&!!O.isReverseMove?-1:1);if(N!==undefined){K=Math.max(K,N);}if(L!==undefined){K=Math.min(K,L);}return K;}function F(L,K,M){return function(N){L.call(mstrmojo.all[K],N,M);};}function B(K,L){L.target.style[L.styleProp]=G(K,L)+"px";}function J(K,M){if(!A){return ;}var L=window.document;E.detachEvent(L,"mousemove",M.fnMove);E.detachEvent(L,"mouseup",M.fnUp);delete M.fnMove;delete M.fnUp;A=false;mstrApp.setInteractive(true);this.splitterMoved(G(K,M)-M.start,M.info);H.removeClass(M.target,C);(this.children||[]).forEach(function(N){N.domNode.style.pointerEvents="inherit";});this.splitterMouseUp();}function I(U){if(A){return ;}mstrApp.setInteractive(false);var K=this.id,L,M,P=E.eventTarget(window,U),R=(P.className.indexOf("v")===-1),Q=R?"y":"x",O={};O.target=P;O.info=this.getSplitterInfo(P);M=O.info&&!!O.info.isReverseMove;L=R?"Top":M?"Right":"Left";O.start=M?parseInt(P.style.right):P["offset"+L];O.mouseProp=Q;O.mousePosition=E.getMousePosition(U,window)[Q];O.styleProp=L.toLowerCase();H.addClass(P,C);(this.children||[]).forEach(function(V){V.domNode.style.pointerEvents="none";});this.splitterMouseDown();var N=F(B,K,O),T=F(J,K,O);var S=window.document;E.attachEvent(S,"mousemove",N);E.attachEvent(S,"mouseup",T);O.fnMove=N;O.fnUp=T;A=true;}mstrmojo.util.ui._HostsSplitter=mstrmojo.provide("mstrmojo.util.ui._HostsSplitter",{_mixinName:"mstrmojo.util.ui._HostsSplitter",registerSplitter:function D(K){E.attachEvent(K,"mousedown",F(I,this.id));},getSplitterInfo:mstrmojo.emptyFn,splitterMoved:mstrmojo.emptyFn,splitterMouseDown:mstrmojo.emptyFn,splitterMouseUp:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var C=Math,I=mstrmojo.dom,K=mstrmojo.css,E="active",L="ready",J=6,F=10,O=10,P={LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",BUTTON:"button"};mstrmojo.util.ui.LassoSelectorParamsType=null;function Q(S,R,T){return function(U){S.call(mstrmojo.all[R],U,T);};}function M(S){var U=S.view,T=I.eventTarget(window,S),R=this.lassoSelector;if(this.clickFromLassoResizer||(T!==R&&this.clickFromCreatingLasso)){I.stopPropogation(U,S);I.preventDefault(U,S);}delete this.clickFromLassoResizer;delete this.clickFromCreatingLasso;}function D(b,U){var R,d,S,Z,a=b.clientX,Y=b.clientY,T=this.lassoSelector,X=U.startX,W=U.startY,V=U.containerPos,e=a-V.x,c=Y-V.y;e=C.min(e,U.maxX);e=C.max(e,U.minX);c=C.min(c,U.maxY);c=C.max(c,U.minY);R=C.abs(e-X);d=C.abs(c-W);Z=C.min(W,c);S=C.min(X,e);T.style.width=R+"px";T.style.height=d+"px";T.style.left=S+"px";T.style.top=Z+"px";U.width=R;U.height=d;U.left=S;U.top=Z;if(R<=O&&d<=O){T.style.visibility="hidden";K.removeClass(T,E);}else{T.style.visibility="visible";K.addClass(T,E);document.body.style.cursor="crosshair";}}function H(T,W){var V=window.document,S=this.lassoSelector,U=W.width,R=W.height;I.detachEvent(V,"mousemove",W.fnMove);I.detachEvent(V,"mouseup",W.fnUp);delete W.fnMove;delete W.fnUp;document.body.style.cursor="default";if(!U||U===0||!R||R===0){this.dismissLassoSelector();}else{W.ctrlKey=T.ctrlKey;this.lassoSelected(W);this.clickFromCreatingLasso=true;K.addClass(S,L);this.positionBoxResizers();}}function N(g){var Z,c=g.view,b,a,d=I.eventTarget(window,g),R=d.getAttribute("type"),V=this.lassoSelector,S=this.lassoContainer,h=this.excludeAttrArr,U=h.length,Y,X={};delete this.clickFromLassoResizer;delete this.clickFromCreatingLasso;if(!V||!S||!this.lassoSelectorEnabled){return ;}if(I.contains(this.dropDownBtn,d,true)){return ;}for(Z=0;Z<U;Z++){if(R===h[Z]){return ;}}this.lassoSelecting();Y=I.position(S);b=g.clientX-Y.x;a=g.clientY-Y.y;X.containerPos=Y;X.maxX=Y.w;X.maxY=Y.h;X.startX=b;X.startY=a;X.minX=0;X.minY=0;X.info=this.getLassoSelectionInfo(d);X.useAsSelectorOrBrushes=this.useAsSelectorOrBrushes||((this.hasAssociatedNodes&&this.hasAssociatedNodes())||this.selectorControl);V.style.visibility="hidden";V.style.left=b+"px";V.style.top=a+"px";V.style.width="0px";V.style.height="0px";K.removeClass(V,L);S.appendChild(V);var T=this.id,e=document,W=Q(D,T,X),f=Q(H,T,X);I.attachEvent(e,"mousemove",W);I.attachEvent(e,"mouseup",f);X.fnMove=W;X.fnUp=f;I.stopPropogation(c,g);I.preventDefault(c,g);}function G(a,U){var Y=U.index,X=U.startX,W=U.startY,V=U.containerPos,f=a.clientX-V.x,e=a.clientY-V.y,T=this.lassoSelector;f=C.min(f,U.maxX);f=C.max(f,U.minX);e=C.min(e,U.maxY);e=C.max(e,U.minY);var d=f-X,c=e-W;if(Y%3===1){d=0;}if(Y===3||Y===5){c=0;}var R=U.selWidth,b=U.selHeight,S=U.selLeft,Z=U.selTop;if(d!==0){if(Y%3===0){S+=d;R-=d;}else{R+=d;}}if(c!==0){if(Y<3){Z+=c;b-=c;}else{b+=c;}}T.style.width=R+"px";T.style.left=S+"px";T.style.top=Z+"px";T.style.height=b+"px";U.width=R;U.left=S;U.height=b;U.top=Z;this.positionBoxResizers();}function B(R,U){var T=R.view,S=window.document;I.detachEvent(S,"mousemove",U.fnMove);I.detachEvent(S,"mouseup",U.fnUp);delete U.fnMove;delete U.fnUp;this.clickFromLassoResizer=true;I.stopPropogation(T,R);I.preventDefault(T,R);this.lassoSelectorResized(U);}function A(V){var T=V.view,h=I.eventTarget(window,V),U=parseInt(h.getAttribute("index"),10),a=this.lassoSelector,Z=a.offsetLeft,k=a.offsetTop,Y=Z+a.offsetWidth,g=k+a.offsetHeight,R=I.position(this.lassoContainer),f=0,c=0,d=R.w,b=R.h,e={};if(U%3===0){d=Y-F;}if(U%3===2){f=Z+F;}if(U<3){b=g-F;}if(U>=6){c=k+F;}e.minX=f;e.minY=c;e.maxX=d;e.maxY=b;e.startX=V.clientX-R.x;e.startY=V.clientY-R.y;e.index=U;e.containerPos=R;e.selWidth=a.clientWidth;e.selHeight=a.clientHeight;e.selLeft=a.offsetLeft;e.selTop=a.offsetTop;var X=this.id,j=document,S=Q(G,X,e),W=Q(B,X,e);I.attachEvent(j,"mousemove",S);I.attachEvent(j,"mouseup",W);e.fnMove=S;e.fnUp=W;I.stopPropogation(T,V);I.preventDefault(T,V);}mstrmojo.util.ui._LassoSelector=mstrmojo.provide("mstrmojo.util.ui._LassoSelector",{_mixinName:"mstrmojo.util.ui._LassoSelector",lassoContainer:undefined,lassoSelector:undefined,lassoSelectorEnabled:true,excludeAttrArr:null,boxResizers:null,useDropDownBtn:false,dropDownBtn:undefined,init:function(R){if(this._super){this._super(R);}this.excludeAttrArr=[];this.boxResizers=[];},registerLassoSelector:function(S,V,U){V=V||[];V.push(P.LASSO_SELECTOR);V.push(P.LASSO_RESIZER);V.push(P.BUTTON);this.lassoContainer=S;this.excludeAttrArr=V;this.useDropDownBtn=U||false;I.attachEvent(S,"mousedown",Q(N,this.id));I.attachEvent(S,"click",Q(M,this.id));var R=this.lassoSelector;if(!R){R=this.createLassoSelector();this.lassoSelector=R;}var T=R.parentNode;if(T){T.removeChild(R);}},createLassoSelector:function(){var U,V,S,T=this.boxResizers,R=document.createElement("div");R.setAttribute("class","lasso-selector");R.setAttribute("type",P.LASSO_SELECTOR);R.setAttribute("draggable",false);R.draggable=false;for(U=0;U<9;U++){if(U!==4){V=document.createElement("div");V.setAttribute("class","lasso-selector-resizer");V.setAttribute("type",P.LASSO_RESIZER);V.setAttribute("index",String(U));V.setAttribute("draggable",false);V.draggable=false;R.appendChild(V);T[U]=V;I.attachEvent(V,"mousedown",Q(A,this.id));}}K.addClass(T[0],["top","left"]);K.addClass(T[1],["top"]);K.addClass(T[2],["top","right"]);K.addClass(T[3],["left"]);K.addClass(T[5],["right"]);K.addClass(T[6],["bottom","left"]);K.addClass(T[7],["bottom"]);K.addClass(T[8],["bottom","right"]);if(this.useDropDownBtn===true){S=document.createElement("div");S.setAttribute("type",P.BUTTON);S.setAttribute("class","lasso-selector-dropdown-button");R.appendChild(S);I.attachEvent(S,"click",Q(this.lassoButtonClicked,this.id));this.dropDownBtn=S;}return R;},positionBoxResizers:function(){var T=this.boxResizers,S=this.lassoSelector,U=S.clientWidth,R=S.clientHeight,W=(U-J)>>1,V=(R-J)>>1;T[1].style.left=W+"px";T[3].style.top=V+"px";T[5].style.top=V+"px";T[7].style.left=W+"px";},dismissLassoSelector:function(){var R=this.lassoSelector;if(R){K.removeClass(R,[E,L]);if(R.parentNode){R.parentNode.removeChild(R);}}},isLassoSelectorActive:function(){function S(V,U){var W=V.className.split(/\s+/),T;for(T=0;T<W.length;T++){if(W[T]===U){return true;}}return false;}var R=this.lassoSelector;if(R){return S(R,E);}return false;},getLassoSelectionInfo:mstrmojo.emptyFn,lassoSelected:mstrmojo.emptyFn,lassoSelecting:mstrmojo.emptyFn,lassoButtonClicked:mstrmojo.emptyFn,lassoSelectorResized:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var S=mstrmojo.css,D=mstrmojo.dom,I=mstrmojo.array,J=[],E=null,K=function(V){return(V&&V.rw&&V.rw.row&&V.rw.row.tc)||0;},B=function(W,V){if(V){if(W===1){return mstrmojo.desc(11944,"1 of 1 Row selected");}return mstrmojo.desc(11945,"# of ## Rows selected").replace("##",W).replace("#",V);}return W===1?mstrmojo.desc(11946,"1 Row"):mstrmojo.desc(11947,"## Rows").replace("##",W);},H=function(){var a="",X,Y,b=J[0]&&J[0].parentNode.firstChild,V=this.hiddenField,Z=J.length,W=K(this.gridData);for(X=0;b&&X<b.childNodes.length;X++){Y=b.childNodes[X].innerText||b.childNodes[X].textContent;a+=Y?(Y+"\t"):"";}a+="\n";J.forEach(function(c){for(X=0;X<c.childNodes.length;X++){Y=c.childNodes[X].innerText||c.childNodes[X].textContent;a+=Y?(Y+"\t"):"";}a+="\n";});V.value=a;V.focus();V.select();a=B(W,Z);this.viewDataDialog.tools.rowCount.set("text",a);},M=function M(Y,V){var W=this.controller,X=W.cmdMgr;X.getInterimCmd().submitInterim(Y,W._getXtabCallback(this,V||{}),{preserveUndo:true});},G=function G(W,V){M.call(this,this.controller.dataService().getUpdateTemplateAction(this.k,W),V);},P=function(W,Y){var V=I.indexOf(J,W),X=V>-1;if(X||Y===false){J.splice(V,1);}if(!X||Y===true){J.push(W);E=W;}S.toggleClass(W,"selected",!X||Y===true);},C=function C(){J.forEach(function(V){S.removeClass(V,"selected");});J=[];};mstrmojo.vi.ui.rw._IsViewDataGrid=mstrmojo.provide("mstrmojo.vi.ui.rw._IsViewDataGrid",{_mixinName:"mstrmojo.vi.ui.rw._IsViewDataGrid",submitUndoRedoActionsWithCallback:function A(V,W){M.call(this,V,W);},doSelection:function N(q,V,c){if(c.getAttribute("r")==="0"){var r=this.getCellForNode(c);if(r.at&8&&D.getButton(V,q)!==D.MOUSE_BUTTON.RIGHT){this.sort(r);}return ;}if(c&&~c.className.indexOf("xtab-td")){var d=D.isMetaKey(V,q),o=D.shiftKey(V,q),Z=D.findAncestorByName(c,"tr",true,this.domNode),W=D.findAncestorByName(c,"tbody",true,this.domNode);if(d||(o&&!E)){P(Z);}else{if(o&&W){var Y=D.findAncestorByName(E,"tbody",true,this.domNode),p=this.zone.rowsPerPage,n=function(e){return e.tBodyN*p+e.index;},h=function(e){return this.zone.tableNode.childNodes[e+1].childNodes;}.bind(this),a={row:E,tBodyN:parseInt(Y.getAttribute("n")||0),index:I.indexOf(Y.childNodes,E),body:Y},f={row:Z,tBodyN:parseInt(W.getAttribute("n")||0),index:I.indexOf(W.childNodes,Z),body:W},g,X,l,k,b;if(n(a)<n(f)){g=a;X=f;}else{g=f;X=a;}P(g.row,true);if(g.tBodyN===X.tBodyN){b=g.body.childNodes;for(k=g.index+1;k<X.index;k++){P(b[k]);}}else{for(l=g.tBodyN;l<=X.tBodyN;l++){if(l===g.tBodyN){b=g.body.childNodes;for(k=g.index+1;k<b.length;k++){P(b[k]);}}else{if(l===X.tBodyN){b=X.body.childNodes;for(k=0;k<X.index;k++){P(b[k]);}}else{b=h(l);for(k=0;k<b.length;k++){P(b[k]);}}}}}P(X.row,true);}else{C();P(Z,true);}}}else{C();}H.call(this);},onclick:function U(Z,V){if(!this.interactiveCellsArray.length){return ;}Z=Z.e||Z;var W=mstrmojo.dom,Y=W.eventTarget(V,Z),X=Y&&W.findAncestorByName(Y,"td",true,this.viewport);if(X){this.doSelection(Z,V,X);W.clearBrowserHighlights();}},changeColumnWidth:function L(Z,X,Y,W,V){G.call(this,this._super(Z,X,Y,W,V,true));},postBuildRendering:function O(){this._super();var V=K(this.gridData);this.viewDataDialog.tools.rowCount.set("text",B(V));},lastSortedCell:[],sort:function Q(d,b){var W=d._ei,a=b===undefined,c=a?true:!!b,V=this.lastSortedCell,X={success:function(){try{var j=this.tableContainerNode.lastElementChild.firstChild.firstChild.firstChild.lastChild.firstChild.childNodes,f=this.tableContainerNode.childNodes[1].firstChild.firstChild.lastChild.firstChild.childNodes,g;for(g=0;g<j.length;g++){if(W===Number(j[g].getAttribute("ei"))){S.addClass(j[g],c?"asc":"desc");S.addClass(f[g],c?"asc":"desc");}}}catch(h){}}.bind(this)};if(V){if(V[0]===W){c=a?!V[1]:b;}}V[0]=W;V[1]=c;var Z=this.controller,e=Z.getSorts(this.model.getSortAction(d,c)),Y={act:"sort",sorts:e.sorts,nodeKey:this.k,subTotalsPos:e.subTotalsPos};G.call(this,Y,X);},pivot:function F(V,W){var X=this.model.getPivotAction(V,W);G.call(this,X);},selectAll:function R(){var W=this.zone,X=W.tableNode.childNodes,Z,Y,a,V,b,c=true;C();for(Z=0;Z<X.length;Z++){a=X[Z];if(a.tagName.toLowerCase()==="tbody"){V=a.getAttribute("n")||0;if(!W.pageStatus[V].isOnDemand()){b=a.childNodes;for(Y=0;Y<b.length;Y++){if(!c){P(b[Y],true);}c=false;}}}}H.call(this);},isMultiSelect:false,onHandleDblClick:function T(){var V={act:"changeXtabColWidthScenario",value:2};G.call(this,V);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.vi.viz.DropZoneHelper","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.XMLBuilder","mstrmojo.gm.GMEnums");var L=mstrmojo,F=L.hash,I=L.array,P=L.vi.viz,B=P.EnumDSSDropZones,A=1,H=0,D=P.DropZoneHelper.METRIC_NAMES_ID,O,E=mstrmojo.gm.DualAxisSubAxisBit,G=E.PRIMARY;mstrmojo.vi.viz.GraphMatrixHelper=mstrmojo.declare(mstrmojo.vi.viz.DropZoneHelper,null,{scriptClass:"mstrmojo.vi.viz.GraphMatrixHelper",handled:false,rowObjects:null,columnObjects:null,xAxisObjects:null,yAxisObjects:null,angleObjects:null,sliceObjects:null,breakByObjects:null,colorByObjects:null,currentXML:"",sizeByObjects:null,tooltipMetrics:null,data:null,metricsDropZone:"",secondaryMetricsDropZone:"",shape:"",subtype:"",metricShapes:null,visType:-1,init:function N(Q){this._super(Q);this.rowObjects=[];this.columnObjects=[];this.xAxisObjects=[];this.yAxisObjects=[];this.angleObjects=[];this.sliceObjects=[];this.breakByObjects=[];this.colorByObjects=[];this.sizeByObjects=[];this.tooltipMetrics=[];this.currentXML="";this.metricsDropZone="";this.secondaryMetricsDropZone="";this.shape="";this.subtype="";this.metricShapes="{}";},clone:function J(R){var Q=this;Q.rowObjects=R.rowObjects.concat();Q.columnObjects=R.columnObjects.concat();Q.xAxisObjects=R.xAxisObjects.concat();Q.yAxisObjects=R.yAxisObjects.concat();Q.angleObjects=R.angleObjects.concat();Q.sliceObjects=R.sliceObjects.concat();Q.breakByObjects=R.breakByObjects.concat();Q.colorByObjects=R.colorByObjects.concat();Q.sizeByObjects=R.sizeByObjects.concat();Q.tooltipMetrics=R.tooltipMetrics.concat();Q.currentXML=R.currentXML;Q.metricsDropZone=R.metricsDropZone;Q.secondaryMetricsDropZone=R.secondaryMetricsDropZone;Q.shape=R.shape;Q.subtype=R.subtype;Q.metricShapes=R.metricShapes;},exists:function(S,Q){var T=this[Q],R=false;I.forEach(T,function(U){R=(U.did===S.did);if(R){return false;}});return R;},removeAngleMetricFromOthers:function(Q){["xAxisObjects","yAxisObjects","tooltipMetrics"].every(function(T){var S=this[T],R=I.find(S,"did",Q.did);if(R>-1){S.splice(R,1);return false;}});},getXml:function C(){var Q=this.data.dz,R=Q?F.copy(Q.visProp&&Q.visProp.fmt,{}):{},S=new mstrmojo.XMLBuilder();if(this.shape){R.Shape=this.shape;}if(this.subtype){R.Subtype=this.subtype;}if(this.metricShapes){R.metricShapes=this.metricShapes;}R.visType=this.visType;S.addChild("props");S.addChild("widgetProps");S.addChild("fmt");F.forEach(R,function(T,U){S.addChild(U);S.addAttribute("value",T);S.closeElement();});S.closeElement();S.closeElement();S.closeElement();return S.toString();},setData:function K(T){if(!T){return ;}var R=this,S=function(V,W){if(V){var U=V.TemplateUnit||V.TemplateMetric;if(U){U.forEach(function(X){var Y=F.copy(X);if(!Y.did){Y.did=Y.id;}W.push(Y);});}}};S(T[O.PROP_ROWS],this.rowObjects);S(T[O.PROP_COLUMNS],this.columnObjects);S(T[O.PROP_XAXIS],this.xAxisObjects);S(T[O.PROP_YAXIS],this.yAxisObjects);S(T[O.PROP_BREAKBY],this.breakByObjects);S(T[O.PROP_COLORBY],this.colorByObjects);S(T[O.PROP_SIZEBY],this.sizeByObjects);S(T[O.PROP_SLICE],this.sliceObjects);S(T[O.PROP_ANGLE],this.angleObjects);S(T[O.PROP_TOOLTIPMETRICS],this.tooltipMetrics);var Q=T.visProp.fmt;this.shape=Q[O.PROP_SHAPE];this.subtype=Q[O.PROP_SUBTYPE];},setMetricsDropZone:function M(Q){if(!Q){return ;}var R=this;[O.PROP_ROWS,O.PROP_COLUMNS,O.PROP_XAXIS,O.PROP_YAXIS,O.PROP_BREAKBY,O.PROP_SLICE,O.PROP_COLORBY].forEach(function(S){if(Q[S]&&Q[S].hasOwnProperty("MetricNames")){if(R.metricsDropZone){R.secondaryMetricsDropZone=S;}else{R.metricsDropZone=S;}}});},getAddDropZonesAction:function(){var U=this,R=this.metricsDropZone,Q=this.secondaryMetricsDropZone,S={act:"updateTemplate",keyContext:this.data.k,actions:[]},T=function(V){S.actions.push({act:"addDropZoneUnit",zoneId:B[V],unitId:D,unitType:H});};[{p:"rowObjects",v:"Rows"},{p:"columnObjects",v:"Columns"},{p:"xAxisObjects",v:"XAxis"},{p:"yAxisObjects",v:"YAxis"},{p:"breakByObjects",v:"BreakBy"},{p:"colorByObjects",v:"ColorBy"},{p:"sizeByObjects",v:"SizeBy"},{p:"angleObjects",v:"Angle"},{p:"sliceObjects",v:"SliceBy"},{p:"tooltipMetrics",v:"AdditionalMetrics"}].forEach(function(X){var V=U[X.p],Y=B[X.v];V.forEach(function(Z){S.actions.push({act:"addDropZoneUnit",zoneId:Y,unitId:Z.did,unitType:Z.t,ax:Z.ax||G});});if(R===X.v){var W=function(Z){return(Z&&(Z.length>A)&&U.isMetricZone(Z));};if(W(U.xAxisObjects)||W(U.yAxisObjects)||W(U.angleObjects)){T(R);}}});if(Q==="ColorBy"){T(Q);}return S;}});O=mstrmojo.vi.viz.GraphMatrixHelper;O.PROP_ROWS="Rows";O.PROP_COLUMNS="Columns";O.PROP_HORIZONTAL_AXIS="HorizontalAxis";O.PROP_VERTICAL_AXIS="VerticalAxis";O.PROP_XAXIS="XAxis";O.PROP_YAXIS="YAxis";O.PROP_SLICE="SliceBy";O.PROP_ANGLE="AngleBy";O.PROP_BREAKBY="BreakBy";O.PROP_COLORBY="ColorBy";O.PROP_SIZEBY="SizeBy";O.PROP_TOOLTIPMETRICS="AdditionalMetrics";O.PROP_SHAPE="Shape";O.PROP_SUBTYPE="Subtype";O.PROP_METRICSHAPES="metricShapes";O.PROP_SHAPE_AREA="Area";O.PROP_SHAPE_LINE="Line";O.PROP_SHAPE_BAR="Bar";O.PROP_SHAPE_CIRCLE="Circle";O.PROP_SHAPE_SQUARE="Square";O.PROP_SHAPE_PIE="Pie";O.PROP_SHAPE_RING="Ring";O.PROP_SHAPE_TICK="Tick";O.PROP_SUBTYPE_CLUSTERED="Clustered";O.PROP_SUBTYPE_AUTOMATIC="Automatic";O.PROP_SUBTYPE_STACKED="Stacked";O.PROP_SUBTYPE_ABSOLUTE="Absolute";O.PROP_SUBTYPE_PERCENT="Percent";}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.viz.DropZoneHelper");var V=mstrmojo,I=V.array,T=V.vi.viz.EnumDSSDropZones,N=V.hash,M;function C(b,a){var c=b.getDropZoneItems(a);return c[0];}function R(b,a){var c=C(b,a);return c?c.id:"";}mstrmojo.vi.viz.MapHelper=mstrmojo.declare(mstrmojo.vi.viz.DropZoneHelper,null,{scriptClass:"mstrmojo.vi.viz.MapHelper",widget:null,data:null,vp:null,geoAttribute:null,latitude:null,longitude:null,angle:null,colorBy:null,sizeBy:null,tooltip:null,mapType:null,useAttributeForm:null,supportAreaMap:true,defaultView:null,init:function S(a){this._super(a);this.tooltip=[];this.data=this.data||{};this.vp=this.data.vp||{};},setWidget:function W(a){this.widget=a;var b=a.model.data.vp;this.geoAttribute=R(a,T.GeoAttribute);this.latitude=R(a,T.Latitude);this.longitude=R(a,T.Longitude);this.angle=R(a,T.Angle);this.colorBy=R(a,T.ColorBy);this.sizeBy=R(a,T.SizeBy);this.tooltip=a.getDropZoneItems(T.AdditionalMetrics).map(function(c){return c.id;});this.mapType=b.mtp;this.useAttributeForm=b.af;this.defaultView=b.dv;},getGeoUnit:function P(){return C(this.widget,T.GeoAttribute);},getLatitudeUnit:function H(){return C(this.widget,T.Latitude);},getLongitudeUnit:function L(){return C(this.widget,T.Longitude);},getAngleUnit:function A(){return C(this.widget,T.Angle);},getColorByUnit:function B(){return C(this.widget,T.ColorBy);},getSizeByUnit:function K(){return C(this.widget,T.SizeBy);},getTooltipUnits:function G(){return this.widget.getDropZoneItems(T.AdditionalMetrics);},setMapType:function(a){this.mapType=a;},setUseAttributeForm:function J(a){this.useAttributeForm=a?M.USE_ATTRIBUTE_FORM:M.USE_ATTRIBUTE;},getGeoForm:function F(d,b){var a=d&&d.fs,c=null;if(!b){b=function(){return true;};}if((d.otp===12||d.t===12)&&a){I.forEach(a,function(e){if(b(e)){c=e;return false;}});}return c;},getLatitudeForm:function Z(a){return this.getGeoForm(a,function(b){return M.isLatitude(b.fnm,b.fgr)&&b.obf;});},getLongitudeForm:function D(a){return this.getGeoForm(a,function(b){return M.isLongitude(b.fnm,b.fgr)&&b.obf;});},getXml:function O(){return M.getXmlFromJson(this.vp);}});M=mstrmojo.vi.viz.MapHelper;M.USE_ATTRIBUTE="0";M.USE_ATTRIBUTE_FORM="1";M.MTP_MARKER="1";M.MTP_BUBBLE="2";M.MTP_AREA="3";M.MTP_DENSITY="4";M.MTP_PATH="5";M.canShowColorByZone=function(a){return a===M.MTP_MARKER||a===M.MTP_BUBBLE||a===M.MTP_AREA||a===M.MTP_PATH;};M.canShowSizeByZone=function(a){return a===M.MTP_BUBBLE;};M.supportImageThreshold=function(a){return a!==M.MTP_BUBBLE&&a!==M.MTP_AREA;};M.isLatitude=function Y(b,a){return a===5||(b&&b.toLowerCase().indexOf("latitude")>-1);};M.isLongitude=function X(b,a){return a===6||(b&&b.toLowerCase().indexOf("longitude")>-1);};M.getXmlFromJson=function E(a){var b=new mstrmojo.XMLBuilder();b.addChild("widgetProps");b.addChild("fmt");N.forEach(a,function(c,d){b.addChild(d);b.addAttribute("value",c);b.closeElement();});b.closeElement();b.closeElement();return b.toString();};M.getMapTypeByElementCount=function Q(a){return a>500?M.MTP_DENSITY:M.MTP_MARKER;};M.isGeoRoleSupportArea=function U(d){var c=1,e=3,g=2,b=8,f=9,a=7;return d===e||d===g||d===b||d===f||d===c||d===a;};}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.HSLColor");var F=mstrmojo.chart,H=0.01;function I(N){if(N<0){N+=1;}if((N-1)>0){N-=1;}return N;}function B(P,O,N){if((N-1/6)<0){return P+(O-P)*6*N;}if((N-0.5)<0){return O;}if((N-2/3)<0){return P+(O-P)*6*(2/3-N);}return P;}mstrmojo.chart.RGBColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.RGBColor",mR:0,mG:0,mB:0,init:function M(V,Z){this._super(V);Z=Z||false;if(V!==null){if(V.Color){this.mR=V.Color.mR;this.mG=V.Color.mG;this.mB=V.Color.mB;}else{if(V.R!==undefined&&V.G!==undefined&&V.B!==undefined){this.mR=V.R;this.mG=V.G;this.mB=V.B;}else{if(V.H!==undefined&&V.S!==undefined&&V.L!==undefined){var S=V.H,Y=V.S,O=V.L;var R,T,W,N,U,X;if(Y<H){this.mR=this.mG=this.mB=(O*255);}else{R=0;if((0.5-O)>0){R=O*(1+Y);}else{R=O+Y-(O*Y);}T=2*O-R;W=S/360;N=W+1/3;U=W;X=W-1/3;N=I(N);U=I(U);X=I(X);this.mR=B(T,R,N)*255;this.mG=B(T,R,U)*255;this.mB=B(T,R,X)*255;}}else{if(typeof V==="number"){if(Z){this.mR=V&255;this.mG=(V&65280)>>8;this.mB=(V&16711680)>>16;}else{this.mB=V&255;this.mG=(V&65280)>>8;this.mR=(V&16711680)>>16;}}}}}}},ToInteger:function G(N){N=N||false;if(N){return this.mB+(this.mG<<8)+(this.mR<<16);}return this.mR+(this.mG<<8)+(this.mB<<16);},MakeDarker:function J(N){this.mR*=N;this.mG*=N;this.mB*=N;},Reset:function D(P,O,N){this.mR=P;this.mG=O;this.mB=N;},ResetFromColorValue:function L(O,N){N=N||false;if(N){this.mR=O&255;this.mG=(O&65280)>>8;this.mB=(O&16711680)>>16;}else{this.mB=O&255;this.mG=(O&65280)>>8;this.mR=(O&16711680)>>16;}},ResetFromHSLValue:function K(R){var T=R.H,Y=R.S,O=R.L;var S,U,W,N,V,X;if(Y<H){this.mR=this.mG=this.mB=(O*255);}else{S=0;if((0.5-O)>0){S=O*(1+Y);}else{S=O+Y-(O*Y);}U=2*O-S;W=T/360;N=W+1/3;V=W;X=W-1/3;N=I(N);V=I(V);X=I(X);this.mR=B(U,S,N)*255;this.mG=B(U,S,V)*255;this.mB=B(U,S,X)*255;}},Copy:function E(N){this.mR=N.mR;this.mG=N.mG;this.mB=N.mB;},ToHSL:function A(){var O,R,N,Q,P;O=Math.max(this.mR,this.mG,this.mB);R=Math.min(this.mR,this.mG,this.mB);if(O===R){P=0;}else{if(O===this.mR){if(this.mG>=this.mB){P=60*(this.mG-this.mB)/(O-R);}else{P=60*(this.mG-this.mB)/(O-R)+360;}}else{if(O===this.mG){P=60*(this.mB-this.mR)/(O-R)+120;}else{P=60*(this.mR-this.mG)/(O-R)+240;}}}N=0.5*(O+R)/255;if(O===R){Q=0;}else{if((0.5-N)>0){Q=(O-R)/(O+R);}else{Q=(O-R)/(510-(O+R));}}return new F.HSLColor({h:P,s:Q,l:P});}});var C=mstrmojo.chart.RGBColor;F.gWhite=new C({R:255,G:255,B:255});F.gBlack=new C({R:0,G:0,B:0});F.gLeaderLineColor=new C({R:37,G:108,B:83});F.gStrokeColorForDarkBackground=new C({R:254,G:254,B:254});F.gStrokeColorForLightBackground=new C({R:230,G:230,B:230});F.gColorPalette=[new C({R:62,G:117,B:167}),new C({R:92,G:151,B:70}),new C({R:248,G:215,B:83}),new C({R:23,G:185,B:51}),new C({R:255,G:138,B:14}),new C({R:156,G:57,B:164}),new C({R:144,G:173,B:207}),new C({R:31,G:171,B:242}),new C({R:255,G:255,B:204}),new C({R:255,G:204,B:153}),new C({R:0,G:51,B:0}),new C({R:128,G:0,B:0}),new C({R:49,G:255,B:49}),new C({R:0,G:0,B:255}),new C({R:255,G:128,B:64}),new C({R:99,G:101,B:255}),new C({R:255,G:0,B:0}),new C({R:255,G:255,B:0}),new C({R:0,G:255,B:0}),new C({R:255,G:0,B:255})];F.gLightColorPalette=[new C({R:31,G:119,B:180}),new C({R:214,G:39,B:40}),new C({R:44,G:160,B:44}),new C({R:255,G:127,B:14}),new C({R:148,G:103,B:189}),new C({R:188,G:189,B:34}),new C({R:23,G:190,B:207}),new C({R:127,G:127,B:127}),new C({R:174,G:199,B:232}),new C({R:255,G:152,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:187,B:120}),new C({R:197,G:189,B:5}),new C({R:219,G:219,B:141}),new C({R:158,G:218,B:229}),new C({R:199,G:199,B:199})];F.gDarkColorPalette=[new C({R:22,G:176,B:255}),new C({R:255,G:55,B:41}),new C({R:4,G:186,B:34}),new C({R:255,G:150,B:14}),new C({R:174,G:121,B:222}),new C({R:204,G:205,B:37}),new C({R:25,G:206,B:224}),new C({R:169,G:169,B:169}),new C({R:179,G:205,B:239}),new C({R:255,G:167,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:223,B:128}),new C({R:218,G:195,B:236}),new C({R:225,G:224,B:144}),new C({R:161,G:223,B:234}),new C({R:214,G:214,B:214})];}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.DropZoneHelper");var A="mstrmojo-VIUnitList",G="icn clsx_sub",B=mstrmojo.vi.viz.DropZoneHelper.isMetricNames;mstrmojo.vi.ui.VIDragUnit=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.ui.VIDragUnit",getItemDisplayName:function F(I){return I.n;},getUnitAvatar:function D(L){var K=document.createElement("div"),N=L.getCtxtDragData(),I=N.items,J=['<div class="',[A,mstrApp.getThemeClassName()].join(" "),'">'],M=this;I.forEach(function(P){var Q=M.getItemDisplayName(P),O="item unit isAvatar ic"+P.t;if(P.t===12&&P.st&&P.st===3076){O+=" st"+P.st;}if(B(P)){Q=mstrmojo.desc(3582,"Metrics");O+=" is-mh";}J.push('<div class="'+O+'"><span class="txt" unselectable="on">'+Q+"</span></div>");});J.push("</div>");K.innerHTML=J.join("");return K.removeChild(K.firstChild);},getUnitDragData:function C(K,I){var J=this.setAvatarClass.bind(this);return{items:I,item:I[0],setAvatarClass:function L(N){J(K,N);},setInvalidAvatarClass:function M(){J(K,G);}};},getDragUnitOffsets:function H(){return{x:21,y:16};},setAvatarClass:function E(L,I){var J=L.avatar;if(J){var K=[A,"hasOwnAvatar",mstrApp.getThemeClassName(),I||""];J.className=K.join(" ");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatFont=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFont",mFontAlignment:0,mFontStyle:0,mFontRotation:0,mFontBox:0,mFontColor:null,mFontAlpha:0,mFontName:0,mFontSize:0,init:function D(G){G.mFormatType=A.FMT_FONT;this._super(G);E.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize","id"],G,this);},AppendToJSONObject:function F(H){var G=this.mFontColor;H.push({FormatType:this.mFormatType,Alignment:this.mFontAlignment,Style:this.mFontStyle,Rotation:this.mFontRotation,Box:this.mFontBox,Alpha:this.mFontAlpha,Name:this.mFontName,Size:this.mFontSize,Color:{R:G.mR,G:G.mG,B:G.mB}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatLine=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatLine",mLineStyle:0,mAlpha:0,mLineThickness:0,mLineThicknessPt:0,mLineColor:null,mGradient:null,init:function D(H){H.mFormatType=A.FMT_LINE;this._super(H);E.copyProps(["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","id"],H,this);this.mGradient={};var G=this.mGradient,J=H.mGradient;G.range={start:{x:0,y:0},end:{x:0,y:0}};if(J){G.valid=H.mGradient.valid||false;G.angle=H.mGradient.angle||0;G.endAlpha=H.mGradient.endAlpha||255;G.style=H.mGradient.style||1;G.colors=H.mGradient.colors.slice(0)||[];var I=J.range;if(H&&I!==undefined){if(I.start!==undefined){G.range.start.x=I.start.x;G.range.start.y=I.start.y;}if(I.end!==undefined){G.range.end.x=I.end.x;G.range.end.y=I.end.y;}}}else{G.valid=false;G.angle=0;G.endAlpha=255;G.style=1;G.colors=[];G.range={start:{x:0,y:0},end:{x:0,y:0}};}},AppendToJSONObject:function F(G){var I=this.mLineColor,H=this.mGradient;G.push({FormatType:this.mFormatType,Style:this.mLineStyle,Alpha:this.mAlpha,Thickness:this.mLineThickness,ThicknessPt:this.mLineThicknessPt,Color:{R:I.mR,G:I.mG,B:I.mB},Gradient:{Valid:H.valid,Angle:H.angle,EndAlpha:H.endAlpha,Style:H.style,Colors:H.colors.slice(0),Start:H.range.start,End:H.range.end}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.MapStructure","mstrmojo.chart.JSONParameter","mstrmojo.chart.enums.EnumInstructionName");var J=mstrmojo.chart,K=J.enums,N=K.EnumInstructionName;function I(P,Q){++this.mCurrentIndex;if(this.mIsFirstPass){this.mParameterList.push(new J.JSONParameter({mParameterName:P,mParameterValue:Q,mIsLastFrameSet:this.mIsLastFrame}));}}mstrmojo.chart.JSONInstruction=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONInstruction",mInstructionName:N.JSONInsUndefined,mpOriginalAddress:0,mFormatIdx:-1,mParameterList:[],mCurrentIndex:-1,mIsLastFrame:true,mIsFirstPass:true,init:function O(P){this._super(P);this.mParameterList=[];},SetInstructionName:function F(P){this.mInstructionName=P;},GetInstructionName:function H(){return this.mInstructionName;},SetSecondPass:function D(){this.mIsFirstPass=false;this.mCurrentIndex=-1;},SetLastFrame:function A(P){this.mIsLastFrame=P;},AppendToParameterList:function E(P,Q){I.call(this,P,Q);},AppendArrayToParameterList:function B(P,Q,R){if(R>0){I.call(this,P,Q);}},AppendSimpleVectorToParameterList:function M(P,Q){if(Q.length>0){I.call(this,P,Q);}},SetFormatAddress:function C(P){this.mpOriginalAddress=P;},CalculateFormatIndex:function G(S){var R=this.mpOriginalAddress,Q,T,P;if(R!==null&&R!==undefined){Q=0;P=S.length-1;while(Q<=P){T=Math.floor((Q+P)/2);if(S[T].mpOriginalAddress<R){Q=T+1;}else{if(S[T].mpOriginalAddress>R){P=T-1;}else{this.mFormatIdx=T;return ;}}}Q=0;P=S.length-1;while(Q<=P){T=Math.floor((Q+P)/2);if(S[T].id<R){Q=T+1;}else{if(S[T].id>R){P=T-1;}else{this.mFormatIdx=T;return ;}}}}},AppendToJSONObject:function L(U){var R=this.mParameterList,Q=this.mFormatIdx,T,P,S={Ins:this.mInstructionName};if(Q>=0){S.Format=Q;}P=R.length;for(T=0;T<P;T++){R[T].AppendToJSONObject(S);}U.push(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.chart.common.MapStructure");mstrmojo.requiresCls("mstrmojo.gm.GMEnums");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumNumberCategory","EnumLabelLevelOption","EnumSliceType","EnumDataSetStatus");mstrmojo.requiresClsP("mstrmojo.chart","ChartAdvFormat");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumShapeType");var An=mstrmojo.chart,b=mstrmojo.hash,P=An.enums,AR=An.model.enums,Aq=P.EnumNumberCategory,Ao=P.EnumLabelLevelOption,AB=P.EnumDataSetStatus,c=AR.EnumShapeType;var A6=mstrmojo.gm,C=A6.FormatingPropertyTag;var F=1,AI=2,I=3;var AV={lineShape:[C.SHAPE_LINE_COLOR,C.SHAPE_LINE_STYLE,C.SHAPE_LINE_THICKNESS],lineMarker:["lnMkBdrClr",C.LINE_MARKER_STYLE,C.LINE_MARKER_THICKNESS],shapeBorder:[C.SHAPE_BORDER_COLOR,C.SHAPE_BORDER_STYLE,C.SHAPE_BORDER_THICKNESS]};function A4(BL,BK){BL=BL||{};var BI={mLineStyle:BL[BK[1]]||0,mAlpha:255,mLineThickness:BL[BK[2]]||null};if(BI.mLineThickness!==null){BI.mLineThickness=parseFloat(BI.mLineThickness);}if(BI.mLineThickness!==null&&BI.mLineThickness!==undefined){BI.mLineThicknessPt=75*BI.mLineThickness;}var BJ=BL[BK[0]];if(BJ!==null&&BJ!==undefined){if(typeof BJ==="number"){BI.mLineColor=BJ;}else{if(BJ.c1!==undefined&&typeof BJ.c1==="number"){BI.mLineColor=BJ.c1;}}}if(BI.mLineStyle===99){BI.mAlpha=0;}return BI;}function AS(BL,BK){BK=BK||"all";var BJ,BI={};switch(BK){case"lineShape":BJ=AV.lineShape;return b.copyProps(BJ,BL);case"targetLine":return BI;case"lineMarker":BJ=AV.lineMarker;return b.copyProps(BJ,BL);case"shapeBorder":case"pieSliceBorder":BJ=AV.shapeBorder;return b.copyProps(BJ,BL,BI);default:b.copy(BL,BI);return BI;}}function t(BJ,BK){if(BJ===undefined){return ;}var BI=9;if(BJ.nct!==undefined){BK.mFormatType=BJ.nct;}if(BK.mFormatType===undefined){BK.mFormatType=BI;}BK.mDigits=BJ.ndp||0;if(BJ.nth!==undefined){BK.mGrouping=BJ.nth;}if(BK.mGrouping===undefined){BK.mGrouping=3;}BK.mPosCurr=BJ.ncp||0;if(BJ.nnn!==undefined){BK.mNegFormat=BJ.nnn;}if(BK.mNegFormat===undefined){BK.mNegFormat=3;}BK.mCurrency=((typeof BJ.ncs==="string")&&BJ.ncs)||"$";BK.mCustomFormat=((typeof BJ.nfs==="string")&&BJ.nfs)||"General";}function Ad(){this.mHasMetrics=this.dataProvider.getMetricsCount()>0;return this.mHasMetrics;}function AM(){return false;}function z(){var BI=this.dataProvider;var BJ=BI.getDimensionSize(true),BK=BI.getDimensionSize(false);if(BJ*BK===0){return false;}this.SetDataGroup(BI.getDataGroup());this.SetSeriesByColumn(BI.getSeriesByColumn());this.dataLabelStyle=BI.getDataLabelType();this.mDataGroup=BI.getDataGroup();return true;}function M(BK,BJ,BI){if(!!BK===false){return"";}var BM=0,BL=BK.length;BI=BI||false;if(BL<=0){return"";}if(BJ===Ao.LLO_COMMON){BL--;}else{if(BJ===Ao.LLO_SPECIFIC){BM=BL-1;}}if(BI){return BK;}if(BK.length===1){return BK[0].trim();}return BK.slice(BM,BL).join(" ").trim();}function A1(BI,BL){if(this.useSliceWindow){var BK=this.startSeries;if(BK!==-1){if(!(BI>=BK&&BI<=this.endSeries)){return false;}}var BJ=this.startGroup;if(BJ!==-1){if(!(BL>=BJ&&BL<=this.endGroup)){return false;}}}return true;}mstrmojo.chart.DataSetImpl=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.DataSetImpl",mpFormatManager:null,mDataGroup:1,mStatus:AB.DTST_OKAY,mSeriesByColumn:true,mSeriesSplit:null,mDiscreteSeries:null,dataLabelStyle:-1,mHasMetrics:false,useSliceWindow:false,startSeries:-1,startGroup:-1,endSeries:-1,endGroup:-1,gp:null,init:function AY(BI){this.InitFromDataProvider(BI);this.reset();},reset:function AJ(){this.resetDataWindow();this.genericFormats=undefined;this.gp={};},InitFromDataProvider:function Ay(BJ){if(BJ===null||BJ===undefined){return false;}this.mStatus=AB.DTST_INVALID;this.dataProvider=BJ.dataProvider;if(this.dataProvider===null||this.dataProvider.isValid===false){return false;}this.SetFormatManager(BJ.formatManager);var BI=z.call(this);if(BI===false){return false;}Ad.call(this);this.mStatus=AB.DTST_OKAY;return this.dataProvider.isValid;},IsInSlicedWindow:function Ai(BJ,BI){return A1.call(this,BJ,BI);},SetDataGroup:function a(BI){if(BI>=1){this.mDataGroup=BI;}},GetSeriesCount:function AO(){return this.dataProvider.getSeriesCount();},GetClusterSeriesCount:function D(){var BI=this.GetSeriesByShape().Bar.length;if(BI===0){BI=this.GetSeriesCount();}return BI;},GetGroupCount:function At(){return this.dataProvider.getGroupCount();},SeriesGroupIndexToRowColumnIndex:function r(BM,BJ,BL,BI){BL=BL!==undefined?BL:0;BI=BI||false;var BN,BK;BN=this.dataProvider.getGraphCell(BM,BJ).getRowIndex(BL);BK=this.dataProvider.getGraphCell(BM,BJ).getColIndex(BL);return{RowIndex:BN,ColumnIndex:BK};},ShouldTakeGroupCenter:function G(){return this.dataProvider.isClusteredBarSpecialCase();},GetClusterDataGroup:function Aw(){return this.dataProvider.getClusterDataGroup();},GetOneSliceRangeSimple:function T(BJ,BM){var BI,BK,BL,BN;BI=false;BL=this.GetSeriesCount();BN=this.GetGroupCount();for(BK=0;BK<BL;++BK){BJ.push(BK);}for(BK=0;BK<BN;++BK){BM.push(BK);}return BI;},GetSeriesLabel:function AX(BM,BL,BK,BI){BL=BL||0;BK=BK||Ao.LLO_NORMAL;BI=BI||false;var BJ=this.dataProvider.getGraphCell(BM,0).getSeriesLabel(BL);return M.call(this,BJ,BK,BI);},GetGroupLabel:function Ax(BO,BJ,BN,BL){BJ=BJ!==undefined?BJ:0;BN=BN!==undefined?BN:Ao.LLO_NORMAL;BL=BL||false;var BM=this.dataProvider,BQ=BM.lds.gmm.gmCtr,BK=BM.getSeriesCount(),BR,BP,BI;if(BQ.clusteredBarSpecialCase){for(BR=0;BR<BK;BR++){BP=BM.getGraphCell(BR,BO);if(!BP.isFaked&&!!BP){BI=BP.getGroupLabel(BJ);break;}}}else{BP=BM.getGraphCell(0,BO);if(!!BP){BI=BP.getGroupLabel(BJ);}}return M.call(this,BI,BN,BL);},GetGroupLabelIdentities:function d(BJ){var BI=this.dataProvider.getGraphCell(0,BJ);if(BI){return BI.getGroupLabelIdentities();}return[];},GetSeriesLabelIdentities:function A(BJ){var BI=this.dataProvider.getGraphCell(BJ,0);if(BI){return BI.getSeriesLabelIdentities();}return[];},GetMergedLabel:function E(BI,BJ){return M.call(this,BI,BJ,false);},GetDataGroup:function n(){return this.mDataGroup;},GetData:function AZ(BL,BI,BJ){BJ=BJ!==undefined?BJ:0;var BK=null;if(A1.call(this,BL,BI)){BK=this.dataProvider.getGraphCell(BL,BI).getData(BJ);}if(!!this.hasMetricCell===false){if(!(BK===null||BK===undefined||isNaN(BK))&&typeof BK==="number"){this.hasMetricCell=true;}}if(isNaN(BK)===true){return null;}return BK;},GetSizeByData:function X(BJ,BI){return this.dataProvider.getGraphCell(BJ,BI).getSizeByData();},GetColorByData:function K(BN,BL,BK,BM){BM=BM||false;BK=(BK!==undefined)?BK:0;var BJ=this.dataProvider.getGraphCell(BN,BL);if(!!BJ===false||BJ.isFaked){return 0;}var BI=BJ.getColorByData(BK,false);if(!BM){if(BI&&BI.c1){BI=BI.c1;}else{if(BI==="transparent"){BI=0;}}}return BI;},GetDefaultShapeFillColor:function(){var BJ=this.dataProvider,BI=BJ.lds.gmm.gmCtr;return BI.property.defaultsObj.shpFillClr;},GetPieCountAtOneDataPoint:function Au(BK,BI){var BJ=this.dataProvider.getGraphCell(BK,BI);if(!!BJ){if(BJ.isFaked){BJ=this.dataProvider.innerGetGraphCell(BK,BI);}return BJ.getSinglePieDPs().length;}return 0;},GetPieSliceCount:function H(BM,BI,BJ){var BK=this.dataProvider.getGraphCell(BM,BI);if(!!BK){if(BK.isFaked){BK=this.dataProvider.innerGetGraphCell(BM,BI);}var BL=BK.getSinglePieDPs();if(!!BL){return BL[BJ].getSliceCount();}}return 0;},GetSinglePieTotal:function BE(BM,BI,BJ){var BK=this.dataProvider.getGraphCell(BM,BI);if(!!BK){if(BK.isFaked){BK=this.dataProvider.innerGetGraphCell(BM,BI);}var BL=BK.getSinglePieDPs();if(!!BL){return BL[BJ].getTotalValue();}}return 100000;},GetPieSliceData:function Ah(BO,BI,BJ,BK){var BM=this.dataProvider.getGraphCell(BO,BI);if(!!BM){if(BM.isFaked){BM=this.dataProvider.innerGetGraphCell(BO,BI);}var BN=BM.getSinglePieDPs(),BL;if(!!BN){BL=BN[BJ].getData(BK);if(!!this.hasMetricCell===false){if(!(BL===null||BL===undefined||isNaN(BL))&&typeof BL==="number"){this.hasMetricCell=true;}}return BL;}}return null;},GetPieSliceColorByData:function AT(BP,BJ,BL,BM,BK){BK=BK||false;var BN=this.dataProvider.getGraphCell(BP,BJ);if(!!BN){if(BN.isFaked){BN=this.dataProvider.innerGetGraphCell(BP,BJ);}var BO=BN.getSinglePieDPs();if(!!BO){var BI=BO[BL].getColorByData(BM,false,false);if(!BK){if(BI&&BI.c1){BI=BI.c1;}else{if(BI==="transparent"){BI=0;}}}return BI;}}return null;},GetPieSlicePercentage:function y(BN,BI,BJ,BK){var BL=this.dataProvider.getGraphCell(BN,BI);if(!!BL){if(BL.isFaked){BL=this.dataProvider.innerGetGraphCell(BN,BI);}var BM=BL.getSinglePieDPs();if(!!BM){return BM[BJ].getPercentage(BK);}}return 0;},GetAngleNumber:function u(){return this.GetPieCountAtOneDataPoint(0,0);},IsGridPieAngleBreakX:function Ae(){return this.dataProvider.isGridPieSplitAlongXAxis();},isBare:function k(BL){if(this.hasOwnProperty("hasMetricCell")){return !this.hasMetricCell;}var BP,BN,BK,BI,BO,BM=this.GetSeriesCount(),BQ=this.GetGroupCount(),BJ=1,BR=1;if(BL){BR=this.GetAngleNumber();}for(BP=0;BP<BM;BP++){for(BN=0;BN<BQ;BN++){for(BK=0;BK<BR;BK++){if(BL){BJ=this.GetPieSliceCount(BP,BN,BK);}for(BI=0;BI<BJ;BI++){if(BL){BO=this.GetPieSliceData(BP,BN,BK,BI);}else{BO=this.GetData(BP,BN);}if(!(BO===null||BO===undefined||isNaN(BO))&&typeof BO==="number"){this.hasMetricCell=true;return false;}}}}}this.hasMetricCell=false;return true;},getValueAxisNumberFormat:function BB(BU,BW,BQ){BW=BW||null;BQ=BQ||false;var BL,BN,BK,BY,BX,BI=this.mDataGroup,BV=this.dataProvider.isMetricOnRowAxis(),BJ=this.mSeriesByColumn,BZ=this.dataProvider,BM=new An.ChartAdvFormat(),BP=new An.ChartAdvFormat(),BT,BS,BR;BU.mCustomFormat="General";BU.mFormatType=Aq.General;BU.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null||this.dataProvider===undefined){return false;}BL=true;BN=true;if(BQ===false&&BW&&BW.length>0){this.GetMetricNumberFormat(BM,BW[0]);BT=1;for(;BT<BW.length&&BL;BT++){BK=BW[BT];this.GetMetricNumberFormat(BP,BK);if((BM.mFormatType!==BP.mFormatType)||(BM.mFormatType===Aq.Currency&&(BM.mCustomFormat.localeCompare(BP.mCustomFormat)!==0))){BL=false;}}if(BL){BU.reset(BM);}return true;}BK=0;BL=true;BN=true;if(BV){BY=!BJ?BZ.getSeriesCount():BZ.getGroupCount();BX=1;}else{BY=1;BX=BJ?BZ.getSeriesCount():BZ.getGroupCount();}var BO;for(BT=0;BT<BY&&BL;++BT){for(BS=0;BS<BX;++BS){for(BR=0;BR<BI;++BR){BO={S:BT,G:BS,D:BR};if(BJ){BO.S=BS;BO.G=BT;}if(BN){if(BW&&BW.length){BK=this.getHostMetricIndex(BO.S,BO.G,BO.D);if(BK===null){continue;}if(BW.indexOf(BK)!==-1){this.getChartAdvFormatForOneCell(BO,BM,BQ);BN=false;}}else{this.getChartAdvFormatForOneCell(BO,BM,BQ);BN=false;}}else{BK=this.getHostMetricIndex(BO.S,BO.G,BO.D);if(BK===null){continue;}if(BW&&BW.indexOf(BK)!==-1){this.getChartAdvFormatForOneCell(BO,BP,BQ);if((BM.mFormatType!==BP.mFormatType)||(BM.mFormatType===Aq.Currency&&(BM.mCustomFormat.localeCompare(BP.mCustomFormat)!==0))){BL=false;}}}}}}if(BL){BU.reset(BM);}return true;},getGridDataFormat:function A5(BI,BJ,BK,BL){BI.mCustomFormat="General";BI.mFormatType=Aq.General;BI.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null){return false;}this.getChartAdvFormatForOneCell({S:BJ,G:BK,D:BL},BI,true);return true;},getGridDataFormatForPie:function Az(BO,BP){var BQ=BP.mSeriesId,BM=BP.mGroupId,BN=BP.angleByIndex,BJ=BP.sliceById,BL,BK,BI;BO.mCustomFormat="General";BO.mFormatType=Aq.General;BO.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null){return false;}BL=this.dataProvider.getGraphCell(BQ,BM).getSinglePieDPs();if(BL&&BL.length>0&&BN<BL.length){BL=BL[BN];if(BL){BK=BL.getSliceCount();if(BJ<BK){BI=BL.getMetric(BJ);if(BI&&BI.fullNf){t.call(this,BI.fullNf,BO);return true;}}}}return false;},getSizeByDataFormat:function Af(BK,BL,BM){var BJ=this.dataProvider.getGraphCell(BL,BM);if(BJ){var BI=BJ.getSizeByMetricFormat();if(BI.fullNf){t.call(this,BI.fullNf,BK);}}},getChartAdvFormatForOneCell:function AQ(BJ,BL,BK){BJ.D=BJ.D||0;BK=BK||false;var BI=this.dataProvider.getGraphCell(BJ.S,BJ.G).getFormat(BJ.D);if(BI.fullNf){t.call(this,BI.fullNf,BL);}},SetFormatManager:function A7(BI){this.mpFormatManager=BI;},GetStatus:function L(){return this.mStatus;},SetSeriesByColumn:function e(BI){this.mSeriesByColumn=BI;},GetSeriesByColumn:function J(){return this.mSeriesByColumn;},getHostMetricIndex:function Y(BK,BJ,BI){BI=BI!==undefined?BI:0;return this.dataProvider.getGraphCell(BK,BJ).getMetricIndex(BI);},GetSliceGroupRange:function Am(){return{};},GetSliceFlag:function l(){return false;},EnableSlices:function Aj(){},GetThresholdFillColor:function Ap(BI,BJ,BK){return this.dataProvider.getGraphCell(BI,BJ).getThreshold(BK).Color;},GetZoomScale:function f(){return 1;},IsHeaderEmpty:function g(BI){BI=BI||false;return false;},CountMetric:function AH(){return this.dataProvider.getMetricsCount();},isMetricBySeries:function Av(){return((!this.dataProvider.isMetricOnRowAxis()&&this.mSeriesByColumn)||(this.dataProvider.isMetricOnRowAxis()&&!this.mSeriesByColumn));},GetOneMetricName:function AA(BI){return this.dataProvider.getOneMetricName(BI);},GetMetricNumberFormat:function A3(BK,BJ){var BI=this.dataProvider.getMetricFormat(BJ,true);t.call(this,BI.fullNf,BK);},GetPeakValuesAcrossSeries:function p(BJ,BI,BL,BK){},GetSeriesByShape:function Ag(BK){var BJ=true;if(BJ){this.seriesByShapeMap=this.seriesByShapeMap||{Tick:null,Line:null,Bar:null,Area:null,Circle:null,Square:null,Pie:null,All:null};var BL=BK||"All";var BI=this.seriesByShapeMap[BL];if(BI===null){if(BL==="All"){BI=BI=this.seriesByShapeMap[BL]=this.dataProvider.getSeriesByShape(BK);}else{BI=this.seriesByShapeMap[BL]=this.dataProvider.getSeriesByShape(BK).contact();}}return BI;}else{return this.dataProvider.getSeriesByShape(BK);}},GetShapeBySeries:function V(BI){return this.dataProvider.getShapeBySeries(BI);},GetShapeByCell:function x(BK,BI){var BJ=this.dataProvider.getGraphCell(BK,BI);if(!!BJ){return BJ.getShape();}return -1;},GetValueAxisBySeries:function Ak(BI){return this.dataProvider.getValueAxisBySeries(BI);},GetSeriesByValueAxis:function B(BJ){if(this.mSeriesSplit===null){this.mSeriesSplit=[];}var BI=this.mSeriesSplit;if(!!BI[BJ]===false){var BK=this.dataProvider.getSeriesByValueAxis(BJ);BI[BJ]=BK.slice(0);}return BI[BJ];},GetShapesDistributionByValueAxis:function j(BN){if(BN===undefined){BN=2;}var BI={},BM,BP,BJ,BK,BO=this.GetSeriesCount(),BL;for(BL=0;BL<BO;++BL){if(BN===0||BN===2){BI.Primary=BI.Primary||{};}if(BN===1||BN===2){BI.Secondary=BI.Secondary||{};}BK=this.GetValueAxisBySeries(BL);BJ=this.GetShapeBySeries(BL);if(BK===BN||BN===2){BP=BK===0?BI.Primary:BI.Secondary;switch(BJ){case 0:BM="AREA";break;case 1:BM="BAR";break;case 2:BM="LINE";break;case 4:BM="CIRCLE";break;case 5:BM="RECTANGLE";break;case 6:BM="SQUARE";break;case 7:BM="TICK";break;case 10:BM="PIE";break;default:BM="Generic";break;}BP[BM]=BP[BM]||[];BP[BM].push(BK);}}return BI;},GetTrendLinePropertiesBySeries:function AP(BI){BI=BI||0;return{};},GetTrendLinesOfChart:function As(){return this.dataProvider.getTrendsOfChart();},GetTrendLineOfSeries:function N(BM){var BJ=this.dataProvider.getTrendsOfChart(),BL,BI=null,BK;if(BJ&&BJ.length){for(BK=0;BK<BJ.length;++BK){BL=BJ[BK];if(BL){if(BL.seriesId===BM){BI=BL;break;}}}}return BI;},GetReferenceLinesOfChart:function BD(){return this.dataProvider.getRefsOfChart();},GetReferenceLinesOfSeries:function S(BM){var BK=this.dataProvider.getRefsOfChart(),BL,BI=[],BJ;if(BK&&BK.length){for(BJ=0;BJ<BK.length;++BJ){BL=BK[BJ];if(BL){if(BL.seriesId===BM){BI.push(BL);}}}}return BI;},GetTextLabel:function AN(BL,BJ,BI,BK){BI=BI||0;BK=BK||0;return this.dataProvider.getTextLabel(BL,BJ,BI,BK);},GetBannerText:function AW(BK,BI,BJ){return"Demo Demo Demo Demo Demo Demo Demo Demo Demo Demo";},GetDiscreteSeries:function Ab(){if(this.mDiscreteSeries===null){this.mDiscreteSeries=this.dataProvider.GetDiscreteSeries().slice(0);}return this.mDiscreteSeries;},GetSeriesIndexByPriority:function BG(){return this.dataProvider.getPrioritizedSeriesIndex();},updateDataWindow:function Ar(BJ){if(BJ.PartialRendering===true){this.useSliceWindow=true;var BI=BJ.Series;if(BI){this.startSeries=BI.Min;this.startSeries=Math.max(0,this.startSeries);this.endSeries=BI.Max;this.endSeries=Math.max(this.startSeries,this.endSeries);}var BK=BJ.Group;if(BK){this.startGroup=BK.Min;this.startGroup=Math.max(0,this.startGroup);this.endGroup=BK.Max;this.endGroup=Math.max(this.startGroup,this.endGroup);}}},resetDataWindow:function BA(){this.useSliceWindow=false;this.startGroup=this.endGroup=-1;this.startSeries=this.endSeries=-1;},getBandNumber:function q(){return 3;},getTargetNumber:function BH(){return 1;},getBandsByGroup:function Q(BI,BJ){return{Divisions:{Ratios:null,Metrics:null},Descent:false,Colors:null};},getBandDivision:function AL(BI,BJ){return{Ratios:null,Metrics:null};},getDataLabelFontFormat:function R(){var BJ=this.dataProvider.getDataLabelFontFormat(),BK={mFontAlignment:null,mFontStyle:BJ.dlFntStyle,mFontAlpha:255,mFontBox:0,mFontName:BJ.dlFntFml,mFontSize:BJ.dlFntSz};var BI=BJ.dlFntClr;if(BI!==null&&BI!==undefined){BK.mFontColor=BI;}return BK;},showHideItemsOnAxis:function AG(BJ){var BI,BK=this.dataProvider.getAxisFormats(BJ,"showHide");if(BJ==="x1"||BJ==="x2"||BJ==="X1"||BJ==="X2"){BI={axisBody:BK[C.X_AXIS_LINE_SHOW]||false,axisLabels:BK[C.X_AXIS_LABELS_SHOW]||false,majorGrids:BK[C.MAJOR_GRID_LINES_SHOW]||false,minorGrids:BK[C.MINOR_GRID_LINES_SHOW]||false};}else{if(BJ==="y1"||BJ==="y2"||BJ==="Y1"||BJ==="Y2"){BI={axisBody:BK[C.Y_AXIS_LINE_SHOW]||false,axisLabels:BK[C.Y_AXIS_LABELS_SHOW]||false,majorGrids:BK[C.MAJOR_GRID_LINES_SHOW]||false,minorGrids:BK[C.MINOR_GRID_LINES_SHOW]||false};}}return BI;},showSeriesDatalabel:function W(BO){if(this.dataLabelStyle===F){return false;}var BM,BL,BJ,BI=this.dataProvider.getGraphCell(BO,0,true);if(BI===null||BI.isFaked){BJ=this.findCell(false,BO,0);BI=this.dataProvider.getGraphCell(BO,BJ,true);}if(BI){BM=BI.chtInfo&&BI.chtInfo.isPie;if(BM){var BK,BN=BI.getSinglePieDPs()[0].getSliceCount();for(BK=0;BK<BN;++BK){if(this.showPieSliceDatalabel(BO,0,0,BK)){return true;}}}else{BL=BI.getFormattingProperties();return BL&&(!!BL[C.DATA_LABELS_SHOW]);}}return false;},showPieSliceDatalabel:function Aa(BN,BK,BJ,BM){BJ=BJ||0;BM=BM||0;if(this.dataLabelStyle===F){return false;}var BL,BI=this.dataProvider.getGraphCell(BN,BK,true).getSinglePieDPs();if(BI&&BI.length>0){BI=BI[BJ];if(BI){BL=BI.getFormattingProperties(BM);return BL&&(!!BL[C.DATA_LABELS_SHOW]);}return false;}return false;},showPieDatalabels:function AC(){if(this.dataLabelStyle===F){return false;}if(this.gp.showDatalabels!==undefined){return this.gp.showDatalabels;}var BJ,BI,BK=this.GetAngleNumber(),BL=this.GetPieSliceCount(0,0,0);for(BI=0;BI<BK;++BI){for(BJ=0;BJ<BL;++BJ){if(this.showPieSliceDatalabel(0,0,BI,BJ)){this.gp.showDatalabels=true;return true;}}}this.gp.showDatalabels=false;return false;},showDatalabels:function h(){if(this.dataLabelStyle===F){return false;}if(this.gp.showDatalabels!==undefined){return this.gp.showDatalabels;}var BI,BJ=this.GetSeriesCount();for(BI=0;BI<BJ;++BI){if(this.showSeriesDatalabel(BI)){this.gp.showDatalabels=true;return true;}}this.gp.showDatalabels=false;return false;},onlyBarDataLabelEnabled:function AF(){var BK,BL=this.GetSeriesCount(),BI=0,BJ;if(this.dataLabelStyle===F){return false;}for(BK=0;BK<BL;++BK){if(this.showSeriesDatalabel(BK)){BJ=this.GetShapeBySeries(BK);if(BJ===c._BAR){++BI;}else{return false;}}}return(BI>0);},getAllFormats:function AU(BK){this.genericFormats=this.genericFormats||{id:{},formats:{}};var BJ=this.genericFormats;for(var BI in BK){if(BJ.id[BI]!==BK[BI]){return null;}}return BJ.formats;},setAllFormats:function AU(BK,BI){this.genericFormats=this.genericFormats||{id:{},formats:{}};var BJ=this.genericFormats;BJ.id=b.copy(BK);BJ.formats=BI;},getGenericLineFormat:function o(BR,BN,BQ,BL,BO){var BK,BJ,BP;if(BO==="pieSliceBorder"){BQ=BQ||0;var BI=this.dataProvider.getGraphCell(BR,BN).getSinglePieDPs();BK=BI[BQ];}else{BK=this.dataProvider.getGraphCell(BR,BN);if(!!BK){if(BK.isFaked){BK=this.dataProvider.innerGetGraphCell(BR,BN);}}}if(BK){BP=BK.getFormattingProperties(BL);BJ=AS(BP,BO);}var BM;switch(BO){case"lineShape":BM=["shpLnClr","shpLnStyle","shpLnThk"];break;case"targetLine":break;case"lineMarker":BM=["lnMkBdrClr",C.LINE_MARKER_STYLE,C.LINE_MARKER_THICKNESS];break;case"shapeBorder":case"pieSliceBorder":BM=["shpBdrClr","shpBdrStyle","shpBdrThk"];break;default:BM=["shpBdrClr","shpBdrStyle","shpBdrThk"];break;}return A4.call(this,BJ||BP,BM);},getGenericFillFormat:function BF(BV,BQ,BT,BN,BP){var BL,BS;if(BP==="pieSlice"){BT=BT||0;var BJ=this.dataProvider.getGraphCell(BV,BQ).getSinglePieDPs();BL=BJ[BT];}else{BL=this.dataProvider.getGraphCell(BV,BQ);}if(BL){BS=BL.getFormattingProperties(BN);}BS=BS||{};var BO;switch(BP){case"pieSlice":case"shape":BO=["shpFillClr","shpFillStyle","shpFillTrans","shpFillEff"];break;case"lineMarker":BO=["lnMkClr"];break;default:BO=["shpFillClr","shpFillStyle","shpFillTrans","shpFillEff"];break;}var BW={mSimpleColor:null,mAlpha:255,mFillType:0};if(BO[1]&&BS[BO[1]]!==undefined){BW.mFillType=BS[BO[1]];}if(BO[2]&&BS[BO[2]]!==undefined){BW.mAlpha=Math.round(255*BS[BO[2]]/100);}var BM=BS[BO[0]];if(BM!==null&&BM!==undefined){var BK=0,BU=14;var BI=14,BR=9;if(typeof BM==="string"&&BM==="transparent"){BW.mAlpha=0;return BW;}switch(BW.mFillType){case BK:BW.mSimpleColor=BM;break;case BU:if(typeof BM==="object"){BW.mFillGradient={startGraphColor:BM.c1,endGraphColor:BM.c2,angle:1-BM.or,horizontalOffset:50,verticalOffset:50,gradientType:(BP==="pieSlice"?BR:BI),endAlpha:255,intermediateColors:[],style:1};}break;default:BW.mFillType=BK;if(typeof BM==="number"){BW.mSimpleColor=BM;}break;}}return BW;},getMarkerShapeInfoAt:function A9(BN,BM){var BK,BL,BO=1,BJ=false,BI=0;BK=this.dataProvider.getGraphCell(BN,BM);if(BK&&!!BK.isFaked===false){BL=BK.getFormattingProperties();BJ=BL.lnMkShw;BI=BL.lnMkShp;BO=BL.lnMkSz;}return{Show:BJ,Size:BO,Shape:BI};},isLogScaleAxis:function s(BI){return !!this.dataProvider.isLogScale(BI);},isGradientABL:function AE(){return this.dataProvider.isGradientABL();},getAxisOriginFormat:function AD(BK){var BJ,BL=this.dataProvider.getAxisFormats(BK,"axisOrigin");if(BK==="x1"||BK==="x2"||BK==="X1"||BK==="X2"){BJ=["xAxOriLnClr","xAxOriLnStyle","xAxOriLnThk","xAxOriLnShw"];}else{if(BK==="y1"||BK==="y2"||BK==="Y1"||BK==="Y2"){BJ=["yAxOriLnClr","yAxOriLnStyle","yAxOriLnThk","yAxOriLnShw"];}}var BI=A4.call(this,BL,BJ);BI.show=BL[BJ[3]];BI.number=this.dataProvider.getAxisOriginValue(BK);return BI;},getAxisTickFormat:function A2(BJ,BK){var BI,BL=this.dataProvider.getAxisFormats(BJ,BK);if(BK==="majorTick"){BI=["majorGridLnClr","majorGridLnStyle","majorGridLnThk"];}else{BI=["minorGridLnClr","minorGridLnStyle","minorGridLnThk"];}return A4.call(this,BL,BI);},getAxisLineFormat:function A0(BK){var BJ,BI=this.dataProvider.getAxisFormats(BK,"body");if(BK==="x1"||BK==="x2"||BK==="X1"||BK==="X2"){BJ=[C.X_AXIS_LINE_COLOR,C.X_AXIS_LINE_STYLE,C.X_AXIS_LINE_THICKNESS];}else{if(BK==="y1"||BK==="y2"||BK==="Y1"||BK==="Y2"){BJ=[C.Y_AXIS_LINE_COLOR,C.Y_AXIS_LINE_STYLE,C.Y_AXIS_LINE_THICKNESS];}}return A4.call(this,BI,BJ);},findCell:function Ac(BO,BK,BN){BN=BN||0;var BM,BL,BI,BJ;if(BO===false){BM=this.dataProvider.getGroupCount();}else{BM=this.dataProvider.getSeriesCount();}for(BL=0;BL<BM;BL++){if(BO===false){BI=this.dataProvider.getGraphCell(BK,BL);}else{BI=this.dataProvider.getGraphCell(BL,BK);}if(!!BI===false||BI.isFaked){continue;}BJ=BI.isIndividualFormatted();if(BN===0){if(BJ===false){return BL;}}else{if(BJ){return BL;}}}return -1;},getUniformAxis:function AK(BI,BJ){return null;},finalize:function A8(){this.dataProvider.resetDPCache();},allowDatalabelOverlap:function BC(){var BI=this.dataProvider;return BI&&BI.allowDatalabelOverlap();},getAxisLabelFontFormat:function Z(BK){var BJ,BL,BI,BM=this.dataProvider.getAxisFormats(BK,"axisLabel");if(BK==="x1"||BK==="x2"||BK==="X1"||BK==="X2"){BJ=[C.X_AXIS_LABELS_FONT_SIZE,C.X_AXIS_LABELS_FONT_FAMILY,C.X_AXIS_LABELS_FONT_STYLE,C.X_AXIS_LABELS_ROTATION,C.X_AXIS_LABELS_FONT_COLOR];}else{if(BK==="y1"||BK==="y2"||BK==="Y1"||BK==="Y2"){BJ=[C.Y_AXIS_LABELS_FONT_SIZE,C.Y_AXIS_LABELS_FONT_FAMILY,C.Y_AXIS_LABELS_FONT_STYLE,C.Y_AXIS_LABELS_ROTATION,C.Y_AXIS_LABELS_FONT_COLOR];}}BL=BM[BJ[3]];if(BL===-1){BL=0;}BI=BM[BJ[4]];return{mFontSize:parseInt(BM[BJ[0]],10),mFontName:BM[BJ[1]],mFontStyle:BM[BJ[2]],mFontRotation:BL,mFontAlignment:1,mFontBox:0,mFontColor:BI===undefined?null:BI,mFontAlpha:255};},refresh:function Al(BI){if(BI){this.dataProvider=BI;this.reset();}},getForecastCount:function U(){var BI=this.dataProvider;return(BI.fwdSteps+BI.bwdSteps);},saveShownLabels:function O(BN){var BM=this.dataProvider,BL=BN.mLabelList,BI=BL&&BL.length,BJ=[],BK;for(BK=0;BK<BI;BK++){if(BL[BK].mIsShown){BJ.push(BL[BK].mNumber);}}BM.backupTicks=BM.backupTicks||{};BM.backupTicks[BN.Key]=BJ;},fetchShownLabels:function w(BN){var BO=this.dataProvider,BK=BO.lds.gmm,BM=BK.gmCtr,BJ,BI;var BL=function(){var BP,BQ,BR;BP=BM.mapFromChartToLDSIndex(this.rowIndex,this.colIndex);BQ=BN?BK.getLocalDataSet(BP.r,0):BK.getLocalDataSet(0,BP.c);BR=BQ.generateDataProvider();return BR[BP.dpIdx];};BJ=BL.call(BO);BI=BJ.backupTicks;return BI;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.common.MapStructure");var I=mstrmojo.chart,E=I.gNullTripleId;var G=0;mstrmojo.chart.GraphObjectManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObjectManager",mGraphObjectList:null,mGraphObjectManagerList:null,mTripleId:null,mpManager:null,mChartContextPtr:null,mGraphObjectMap:null,init:function N(O){this._super(O);this.mGraphObjectList=[];this.mGraphObjectManagerList=[];this.mTripleId=this.mTripleId||O.TripleId||E;this.mpManager=O.GraphObjectManager||null;if(this.mpManager!==null){this.mChartContextPtr=this.mpManager.mChartContextPtr;}if(G===-1){}else{if(G===1||(!!this.mpManager)===false){this.mGraphObjectMap=new mstrmojo.chart.common.MapStructure();}else{this.mGraphObjectMap=this.mpManager.mGraphObjectMap||new mstrmojo.chart.common.MapStructure();}}},getMapGenesis:function A(){return G;},AddToMapAndList:function L(O){this.AddToMap(O);this.mGraphObjectList.push(O);},AddObjectsToMapAndList:function M(Q){var P,O;O=Q.length;for(P=0;P<O;++P){this.AddToMapAndList(Q[P]);}},AddToManagerList:function H(O){this.mGraphObjectManagerList.push(O);},AddToMap:function C(O){if(O){this.mGraphObjectMap.replaceByTripleId(O.mTripleId,O);}},getGraphObjectFromList:function J(V,R){var S,T,O,U=this.mGraphObjectManagerList,Q=this.mGraphObjectList,P=this.mChartContextPtr.getUtiliy();for(S=Q.length-1;S>=0;--S){T=Q[S].mTripleId;if(P.tripleId.equal(T,V)){O={object:Q[S],find:true};return O;}}if(R){for(S=U.length-1;S>=0;--S){O=U[S].getGraphObjectFromList(V);if(O.find){return O;}}}return{object:null,find:false};},GetGraphObject:function F(U,P){var S,R,Q=this.mGraphObjectMap,T=this.mGraphObjectManagerList,O;P=(P===undefined)?true:P;if(Q){S=Q.findByTripleId(U);if(S!==undefined){return S;}if(P){O=T.length;for(R=O-1;R>=0;--R){S=T[R].GetGraphObject(U,true);if(S!==undefined){return S;}}}return null;}S=this.getGraphObjectFromList(U,P);return S;},GetGraphObjectManager:function K(U,P){if(P===undefined){P=true;}var Q,T=this.mGraphObjectManagerList,O=this.mChartContextPtr.getUtiliy();for(Q=T.length-1;Q>=0;--Q){var S=T[Q].mTripleId;if(O.tripleId.equal(S,U)){return T[Q];}if(P){var R=T[Q].GetGraphObjectManager(U,true);if(R){return R;}}}return null;},Draw:function B(){var O,P;O=this.mGraphObjectList.length;for(P=0;P<O;++P){this.mGraphObjectList[P].Draw();}},GenerateInterpolationFrame:function D(O){var Q=this.mGraphObjectManagerList.length,P,R;this.mProgress=O;for(P=0;P<Q;++P){this.mGraphObjectManagerList[P].GenerateInterpolationFrame(O);}R=this.mGraphObjectList.length;for(P=0;P<R;++P){this.mGraphObjectList[P].SetProgress(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumDSSGraphDataTextShowType","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphDataLineType");var S=mstrmojo.chart,D=S.common;var N=mstrmojo.chart.model,U=N.enums,H=U.EnumDSSGraphType,I=U.EnumDSSGraphProperty,A=U.EnumDSSGraphRegressionType,T=U.EnumDSSGraphDataTextPosition,F=U.EnumDSSGraphDataTextShowType,J=U.EnumDSSGraphObject,R=U.EnumVariantBool,V=U.EnumDSSExtraGraphProperty,B=U.EnumDSSGraphDataLineType;function C(Y,X,W){var Z;if(X>=J.DssGraphX2Body&&X<=J.DssGraphX2Title){X-=99899;}if(X===J.DssGraphTrendLine){X=J.DssGraphLinrLine;Z=this.GetGraphProperty(I.DssGraphSDRegressionType,J.DssGraphRiser,Y,-3);if(Z){switch(Z){case I.DssGraphShowSDLinrLine:case A.DssGraphRegressionNone:X=J.DssGraphLinrLine;break;case I.DssGraphShowSDLinrLog:X=J.DssGraphLinrLog;break;case I.DssGraphShowSDLinrNPoly:X=J.DssGraphLinrNPoly;break;case I.DssGraphShowSDLinrExp:X=J.DssGraphLinrExp;break;case I.DssGraphShowSDMOVALine:X=J.DssGraphMovAvgLine;break;case I.DssGraphShowSDLinrNatLog:X=J.DssGraphLinrNatLog;break;case I.DssGraphShowSDSTDDLine:X=J.DssGraphStdDevLine;break;case I.DssGraphShowSDMeanLine:X=J.DssGraphMeanLine;break;}}}switch(X){case J.DssGraphFrame:case J.DssGraphPieFeelerLine:case J.DssGraphErrorBar:case J.DssGraphPieGroupLabel:case J.DssGraphDataTextConnectLine:case J.DssGraphGaugeBorder:case J.DssGraphGaugeNeedleBase:case J.DssGraphGaugeTitle:case J.DssGraphGauge:case J.DssGraphDataTextStackTotal:Y=-3;break;default:break;}switch(W){case V.DssGraphInfoAutosizeHorizontal:case V.DssGraphInfoAutosizeVertical:case V.DssGraphInfoSuppressLastLevel:case V.DssGraphInfoIncludeSubtotal:case V.DssGraphInfoNestedLabel:case V.DssGraphInfoNestedLabelBracket:case V.DssGraphInfoRecalculateChartFrame:case V.DssGraphInfoRecalculateLegend:X=-3;break;case I.DssGraphSeriesByColumn:X=-3;break;case I.DssGraphShow2DAxisLabels:if(this.mGraphType===H.DssGraphTypeGauge){Y=-3;}break;case I.DssGraphSDShowDataText:case I.DssGraphSDRegressionType:case I.DssGraphShowSDLinrCorr:case I.DssGraphShowSDLinrFormula:case I.DssGraphCurveColorAsSeries:case I.DssGraphShowStepLine:case I.DssGraphSDMarkerSize:case I.DssGraphShowMarker:case I.DssGraphShowLBLFeeler:case I.DssGraphShowFeeler:case I.DssGraphDetachSlice:case I.DssGraphDeleteSlice:case I.DssGraph2DSDSplitY:case I.DssGraphShowSDLine:case I.DssGraphShowLine:case I.DssGraphSDShowToolTip:case I.DssGraphSDToolTip:case I.DssGraphGauge1Show:case I.DssGraphGauge2Show:case I.DssGraphGauge3Show:case I.DssGraphGauge4Show:case I.DssGraphGauge5Show:case I.DssGraphGauge1Min:case I.DssGraphGauge2Min:case I.DssGraphGauge3Min:case I.DssGraphGauge4Min:case I.DssGraphGauge5Min:case I.DssGraphGauge1Max:case I.DssGraphGauge2Max:case I.DssGraphGauge3Max:case I.DssGraphGauge4Max:case I.DssGraphGauge5Max:X=J.DssGraphRiser;break;case I.DssGraph2DAngle:case I.DssGraph2DDepth:case I.DssGraphShowDataText:case I.DssGraphMarkerLayout:case I.DssGraphLegendLock:case I.DssGraphLegendBox:case I.DssGraphDepthMode:case I.DssGraphCurvedLines:case I.DssGraphGroupSpacing:case I.DssGraphRiserWidth:case I.DssGraphACMColorModel:case I.DssGraphAxisHasErrorBar:case I.DssGraphSplitYPosition:case I.DssGraphAxisHasMiddleValue:case I.DssGraphMiddleValue:case I.DssGraphConnectStackBars:case I.DssGraphShowDivBiPolar:case I.DssGraphGaugeRangeStartAngleValue:case I.DssGraphGaugeRangeStopAngleValue:case I.DssGraphGaugeBorderThicknessValue:case I.DssGraphGaugeStyleValue:case I.DssGraphGaugeShowNeedle:case I.DssGraphGaugeFancyBox:case I.DssGraphGaugeNeedleStyleValue:case I.DssGraphGaugeBorderStyleValue:case I.DssGraphPiesPerRowValue:case I.DssGraphTailShape:case I.DssGraphOBPMedian:case I.DssGraphOBPStem:case I.DssGraphOBPTail:case I.DssGraphGaugeThickness:Y=-3;break;case I.DssGraphSDMOVAFactor:case I.DssGraphPieDataValueLoc:case I.DssGraphPieDataLabelLoc:X=J.DssGraphRiser;Y=-3;break;case I.DssGraphGradient:W=I.DssGraphAreaSFX;break;case I.DssGraphFrameLocationNEW:W=I.DssGraphFrameLocation;break;case I.DssGraph3DRowTitleLocationNEW:W=I.DssGraph3DRowTitleLocation;break;case I.DssGraph3DColTitleLocationNEW:W=I.DssGraph3DColTitleLocation;break;case I.DssGraphLineAlpha:case I.DssGraphLineColor:case I.DssGraphLinePattern:case I.DssGraphLineWidth:if(this.mGraphType===H.DssGraphTypeBoxPlot&&X===J.DssGraphRiser){X=J.DssGraphOBPBox;}break;default:break;}return{ObjectId:X,SeriesId:Y,PropertyId:W};}function M(X){var Y,W,Z;Y=((X>>8)-((X>>16)<<8))<<8;W=(X-((X>>8)<<8))<<8;Z=((X>>16)-((X>>24)<<16))<<8;return(W>>8)*65536+(Y>>8)*256+(Z>>8);}function O(X){var W=-1;switch(X){case J.DssGraphX1Body:W=J.DssGraphUserLine3;break;case J.DssGraphY1RightBody:case J.DssGraphY1Body:W=J.DssGraphUserLine1;break;case J.DssGraphY2Body:W=J.DssGraphUserLine2;break;case J.DssGraphY3Body:W=J.DssGraphUserLine3;break;case J.DssGraphY4Body:W=J.DssGraphUserLine4;break;case J.DssGraphZBody:W=J.DssGraphUserLine4;break;}return W;}mstrmojo.chart.FormatManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatManager",mpTemplate:null,mIsValid:false,mpGraphPropertyPool:null,mKey:"",mHasMetrics:true,mIsUseGraphProperties:true,mGraphType:H.DssGraphTypeVertical_Bar_Side_by_Side,init:function P(W){this.mIsValid=this.ConsumeJSON(W);},ConsumeJSON:function Q(W){if(W&&W.GraphPropertyMap){this.mpGraphPropertyPool=W.GraphPropertyMap;}else{this.mpGraphPropertyPool=new D.MapStructure();}return true;},IsValid:function G(){return this.mIsValid;},GetGraphProperty:function E(a,e,h,Y){var X=this.mGraphType,c=null,b,g,d,Z,W,f;if(!this.mIsUseGraphProperties){return c;}var j=this.mpGraphPropertyPool;b=e;g=C.call(this,h,e,a);h=g.SeriesId;e=g.ObjectId;a=g.PropertyId;if(!this.mpGraphPropertyPool){return c;}if(a===V.DssGraphMatrixInitedDataLabelRotation||a===V.DSSGraphMatrixDataLabelRotated){g=j.find([h,-3,a]);if(g!==undefined){return g;}}if(a>V.DssGraphTypeRingPie&&a<=V.DssGraphInfoReserved){return c;}switch(a){case V.DssGraphInfoAutosizeHorizontal:case V.DssGraphInfoAutosizeVertical:case V.DssGraphInfoSuppressLastLevel:case V.DssGraphInfoIncludeSubtotal:case V.DssGraphInfoSeriesByColumn:case V.DssGraphInfoNestedLabel:case V.DssGraphInfoNestedLabelBracket:case V.DssGraphInfoRecalculateChartFrame:case V.DssGraphInfoRecalculateLegend:case V.DssGraphInfoUseMaxCategoriesAsMin:case V.DssGraphInfoUseZerosForGraphNulls:g=j.find([h,-3,a-V.DssGraphInfoReserved]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShowTitle:case I.DssGraphLockFontSize:case I.DssGraphShowSubtitle:case I.DssGraphShowfootnote:case I.DssGraphShowLegendText:case I.DssGraphCurvedLines:case I.DssGraphDepthMode:case I.DssGraphShow2DY1Title:case I.DssGraphShow2DY2Title:case I.DssGraphShow2DXTitle:case I.DssGraphEnhancedSeriesEffect:case I.DssGraphAxisHasErrorBar:case I.DssGraphAutoArrange:case I.DssGraphAxisHasMiddleValue:case I.DssGraphConnectStackBars:case I.DssGraph2DOrdSpaceMode:case I.DssGraphShowStepLine:case I.DssGraph2DSplitYAutomatic:case I.DssGraphFontAntiAlias:case I.DssGraphShowLBLPie:case I.DssGraphShowLBLRing:case I.DssGraphDeleteSlice:case I.DssGraph2DPie:case I.DssGraphDataTextShowConnectLine:case I.DssGraphShowSDLine:case I.DssGraphGaugeShowNeedle:case I.DssGraphSDShowToolTip:case I.DssGraphShow3DLineToLWall:case I.DssGraphShow3DLineToRWall:case I.DssGraphShow3DScatterLine:case I.DssGraphShow3DLineToFloor:case I.DssGraphSeriesByColumn:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShowDivBiPolar:case I.DssGraphShowSDLinrCorr:case I.DssGraphShowSDLinrFormula:case I.DssGraphCurveColorAsSeries:case I.DssGraph2DSDSplitY:g=j.find([-3,h,e,a]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}else{c=0;}break;case I.DssGraphFontAlign:case I.DssGraphFontRotation:case I.DssGraphFontBox:case I.DssGraphAreaAlpha:case I.DssGraphLinePattern:case I.DssGraphLineAlpha:case I.DssGraphLineWidth:case I.DssGraphFontStyle:case I.DssGraphFontAlpha:case I.DssGraphSDRiserType:case I.DssGraphSDPolyFactor:case I.DssGraphSDMOVAFactor:case I.DssGraphRiserWidth:case I.DssGraphACMColorModel:case I.DssGraphPiesPerRowValue:case I.DssGraphPieRotationValue:case I.DssGraphSplitYPosition:case I.DssGraphMiddleValue:case I.DssGraphPieHoleSizeValue:case I.DssGraphPieDepthValue:case I.DssGraphPieTiltValue:case I.DssGraphPieDataValueLoc:case I.DssGraphPieDataLabelLoc:case I.DssGraphDetachSlice:case I.DssGraph2DAngle:case I.DssGraph2DDepth:case I.DssGraphMarkerLayout:case I.DssGraphLegendLock:case I.DssGraphLegendBox:case I.DssGraphMarkerSize:case I.DssGraphGaugeRangeStartAngleValue:case I.DssGraphGaugeRangeStopAngleValue:case I.DssGraphGaugeBorderThicknessValue:case I.DssGraphGaugeStyleValue:case I.DssGraphGaugeFancyBox:case I.DssGraphGaugeNeedleStyleValue:case I.DssGraphGaugeBorderStyleValue:case I.DssGraphTailShape:case I.DssGraphGaugeThickness:g=j.find([-3,h,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphGroupSpacing:g=j.find([-3,h,e,a]);if(g!==undefined){c=(g%127);}break;case I.DssGraphShowDataText:g=j.find([-3,-3,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphShowLBLFeeler:g=j.find([-3,h===-3?0:h,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphShowFeeler:g=j.find([-3,h===-3?0:h,e,a]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAreaSFX:g=j.find([-3,h,e,a]);if(g){d=g.split(",");c={StartColor:parseInt(M.call(this,d[0]),16),EndColor:parseInt(M.call(this,d[1]),16),gradientType:parseInt(d[2]),angle:parseInt(d[3]),horizontalOffset:parseInt(d[4]),verticalOffset:parseInt(d[5])};}break;case I.DssGraphAreaCustomBevelEffect:g=j.find([-3,h,e,a]);if(g){d=g.split(",");c={type:parseInt(d[0]),lightAngle:parseInt(d[1]),intensity:parseInt(d[2]),depth:parseInt(d[3])};}break;case I.DssGraphAxisDataTextPlace:if((X>=H.DssGraphTypeX_Y_Scatter&&X<=H.DssGraphTypeDualAxis_Polar_Coordinate_Chart)||X===H.DssGraphTypeBubble||X===H.DssGraphTypeBubble_DualAxis||X===H.DssGraphTypeBubble_With_Labels||X===H.DssGraphTypeBubble_DualAxis_With_Labels||X===H.DssGraphTypeD3_X_Y_Z_Scatter_Chart||X===H.DssGraphTypeD3_X_Y_Z_Scatter_with_Labels_Chart){W=j.find([-3,-3,e,I.DssGraph2DPlaceX]);f=j.find([-3,-3,e,I.DssGraph2DPlaceY1]);if(W&&f){switch(W){case T.DssGraphDTPositionOutMin:if(f===T.DssGraphDTPositionCenter){Z=T.DssGraphDTPositionInMin;}break;case T.DssGraphDTPositionOutMax:if(f===T.DssGraphDTPositionCenter){Z=T.DssGraphDTPositionOutMin;}break;case T.DssGraphDTPositionCenter:switch(f){case T.DssGraphDTPositionCenter:Z=T.DssGraphDTPositionCenter;break;case T.DssGraphDTPositionOutMin:Z=T.DssGraphDTPositionOutMax;break;case T.DssGraphDTPositionOutMax:Z=T.DssGraphDTPositionInMax;break;}break;}c=Z;}}else{f=j.find([-3,-3,e,I.DssGraph2DPlaceY1]);if(f!==undefined){c=f;}}break;case I.DssGraphShowLine:if(X===H.DssGraphTypeBubble||X===H.DssGraphTypeBubble_DualAxis||X===H.DssGraphTypeBubble_With_Labels||X===H.DssGraphTypeBubble_DualAxis_With_Labels){g=j.find([-3,h===-3?0:h,e,I.DssGraphShowSDLine]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}}else{g=j.find([-3,h===-3?0:h,e,I.DssGraphShowSDDataLineType]);if(g===undefined){g=j.find([-3,e,I.DssGraphShowSDDataLineType]);}if(g!==undefined){c=(g&B.DssGraphDataLineLine)?true:false;}}break;case I.DssGraphShowMarker:g=j.find([-3,h===-3?0:h,e,I.DssGraphShowSDDataLineType]);if(g===undefined){g=j.find([-3,e,I.DssGraphShowSDDataLineType]);}if(g!==undefined){c=(g&B.DssGraphDataLineMarker)?true:false;}break;case I.DssGraphSDMarkerSize:g=j.find([-3,h===-3?0:h,e,I.DssGraphSDMarkerSize]);if(g===undefined){g=j.find([-3,e,I.DssGraphMarkerSize]);}if(g!==undefined){c=g;}break;case I.DssGraphSDMarkerShape:g=j.find([-3,h===-3?0:h,e,I.DssGraphMarkerShape]);if(g===undefined){g=j.find([-3,e,I.DssGraphMarkerShape]);}if(g!==undefined){c=g;}break;case I.DssGraphShowDataLabel:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextLabel)?true:false;}break;case I.DssGraphShowDataValue:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextValue)?true:false;}break;case I.DssGraphShowTotalValue:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextTotal)?true:false;}break;case I.DssGraphShowDVPercent:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextPercent)?true:false;}break;case I.DssGraphLineColor:case I.DssGraphAreaColor:case I.DssGraphFontColor:case I.DssGraphSeriesColor:g=j.find([-3,h,e,a]);if(g){c=M.call(this,parseInt(g,16));}break;case I.DssGraphFontName:g=j.find([-3,h,e,a]);if(g){c=g;}break;case -I.DssGraphFormatDataTextAdv:case I.DssGraphTextContent:case I.DssGraphSDToolTip:g=j.find([-3,h,e,a]);if(g){c=g;}break;case I.DssGraphFontSize100:g=j.find([-3,h,e,I.DssGraphFontSize]);if(g!==undefined){c=g*100;}break;case I.DssGraphFillEffect:g=j.find([h,e,a]);if(g){c=parseInt(g);}break;case I.DssGraphSDRegressionType:g=j.find([-3,h,e,I.DssGraphShowSDLinrLog]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionLog;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrNPoly]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionPoly;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrExp]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionExp;break;}g=j.find([-3,h,e,I.DssGraphShowSDMOVALine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionMA;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrLine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionLinear;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrNatLog]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionNatLog;break;}g=j.find([-3,h,e,I.DssGraphShowSDSTDDLine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionSTDD;break;}g=j.find([-3,h,e,I.DssGraphShowSDMeanLine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionMean;break;}c=A.DssGraphRegressionNone;break;case I.DssGraphShow2DAxisLabels:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisMajor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisMinor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisLine:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ExcludeZero:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleUseMax:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleUseMin:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleMax:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraph2ScaleMin:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraph2LogScale:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphManualMajor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphCountMajor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraph2ScaleEndMax:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleEndMin:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAxisNumberFormat:g=j.find([-3,h,e,a]);if(g){c=g;}break;case I.DssGraphSDShowDataText:g=j.find([-3,h,e,a]);if(!g){c=false;}else{c=g;}break;case I.DssGraph2ScaleDirection:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAxisShowUserLine:case I.DssGraphAxisUserLineValue:b=O.call(this,b);g=j.find([-3,h,b,a]);if(g!==undefined){c=g;}break;case I.DssGraphAxisAutoFit:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphOffScaleType:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;case I.DssGraphStyleMajor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;case I.DssGraphStyleMinor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;case I.DssGraphCountMinor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraphManualMinor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2DSide:g=j.find([-3,h,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphAxisStagger:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAxisScaleFreq:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;default:c=undefined;break;}return c;},PutGraphProperty:function L(c,W,b,X,Z){var a;if(!this.mIsUseGraphProperties){return ;}var Y=this.mpGraphPropertyPool;if(!Y){return ;}a=C.call(this,b,W,c);b=a.SeriesId;W=a.ObjectId;c=a.PropertyId;if(c===V.DssGraphMatrixInitedDataLabelRotation||c===V.DSSGraphMatrixDataLabelRotated){Y.replace([b,-3,c],Z);}},SetGraphType:function K(W){this.mGraphType=W;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Base","mstrmojo.chart.Point2D","mstrmojo.chart.enums.EnumRectExpandDirection");var M=mstrmojo.hash,T=mstrmojo.chart,V=T.enums,P=V.EnumRectExpandDirection;mstrmojo.chart.Rect2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Rect2D",x:0,y:0,width:0,height:0,init:function O(Y){if(Y){if(Y.Rect2D){var Z=Y.Rect2D;mstrmojo.hash.copy(Z,this);}else{this._super(Y);}}},Explode:function F(Z,Y){this.x-=Z;this.y-=Y;this.width+=(Z*2);this.height+=(Y*2);},Implode:function A(Z,Y){this.Explode(-Z,-Y);},GetTopLeft:function H(Y){return new T.Point2D({x:this.x,y:this.y});},GetBottomLeft:function G(Y){return new T.Point2D({x:this.x,y:this.y+this.height});},GetTopRight:function E(Y){return new T.Point2D({x:this.x+this.width,y:this.y});},GetBottomRight:function X(Y){return new T.Point2D({x:this.x+this.width,y:this.y+this.height});},GetCenter:function W(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y+this.height/2});},GetLeftMiddle:function C(Y){return new T.Point2D({x:this.x,y:this.y+this.height/2});},GetTopMiddle:function I(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y});},GetRightMiddle:function R(Y){return new T.Point2D({x:this.x+this.width,y:this.y+this.height/2});},GetBottomMiddle:function Q(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y+this.height});},HasIntersection:function J(Y){return(this.x<(Y.x+Y.width)&&Y.x<(this.x+this.width)&&this.y<(Y.y+Y.height)&&Y.y<(this.y+this.height));},PointInRectangle:function S(Y){return((Y.x>=this.x)&&(Y.x<=this.x+this.width)&&(Y.y>=this.y)&&(Y.y<=this.y+this.height));},Reset:function B(Y,b,Z,a){this.x=Y;this.y=b;this.width=Z;this.height=a;},copy:function N(Y){return M.copyProps(["x","y","width","height"],Y,this);},ResetRect:function D(Y){this.copy(Y);},Expand:function L(Z,Y){if((Y&P.REC_EXP_HORIZONTAL)>0){this.x-=Z;this.width+=2*Z;}if((Y&P.REC_EXP_VERTICAL)>0){this.y-=Z;this.height+=2*Z;}},clone:function U(){return new T.Rect2D({Rect2D:this});},ToPoints:function K(Y){if(Y){return{Center:this.GetCenter(),Origin:this.GetTopLeft(),Width:this.width,Height:this.height};}return{TopLeft:this.GetTopLeft(),TopRight:this.GetTopRight(),BottomLeft:this.GetBottomLeft(),BottomRight:this.GetBottomRight()};}});T.gDefaultTitlePosition=new T.Rect2D({x:15,y:15,width:670,height:21});T.gDefaultSubtitlePosition=new T.Rect2D({x:15,y:51,width:670,height:17});T.gDefaultFootnotePosition=new T.Rect2D({x:15,y:370,width:670,height:15});T.gEmptyRect=new T.Rect2D({x:0,y:0,width:0,height:0});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.DSSTimeUtil");var H=24*60*60*1000;var A=60*60*1000;var L=60*1000;var C=1000;var K=24;var D=24*60;var J=24*60*60;var B=new mstrmojo.chart.common.DSSTimeUtil();mstrmojo.chart.common.DSSDateTime=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSDateTime",mnYear:1899,mnMonth:12,mnDay:30,mnHour:0,mnMinute:0,mnSecond:0,mnMillisecond:0,mnWeek:-1,mnDayOfWeek:-1,init:function P(T){if(!T||!T.ifTime){this.mnYear=1899;this.mnMonth=12;this.mnDay=30;this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;this.mnWeek=-1;this.mnDayOfWeek=-1;return ;}var S=0;var V=23242571;var R=-693593;if(T.ifTime>V){this.mnYear=65535;this.mnMonth=12;this.mnDay=30;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<R){this.mnYear=1;this.mnMonth=1;this.mnDay=1;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}else{if(T.ifTime>0){var W=this.DAYSToYMD(Math.floor(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<0){var W=this.DAYSToYMD(Math.ceil(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}}}}S*=H;var U=S+0.5;if(U==H){U--;}if(U>0){this.mnHour=Math.floor(U/A);U-=this.mnHour*A;this.mnMinute=Math.floor(U/L);U-=this.mnMinute*L;this.mnSecond=Math.floor(U/C);U-=this.mnSecond*C;this.mnMillisecond=Math.floor(U);}else{this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;}this.mnWeek=-1;this.mnDayOfWeek=-1;this.Sanitize();},Sanitize:function O(){var R=false;if(this.mnHour==24&&this.mnMinute==0&&this.mnSecond==0){R=true;this.mnHour=0;}if(this.mnMonth<1){this.mnMonth=1;}else{if(this.mnMonth>12){this.mnMonth=12;}}if(this.mnDay<1){this.mnDay=1;}else{if(this.mnDay>B.DaysInMonth[this.mnMonth-1]){this.mnDay=B.DaysInMonth[this.mnMonth-1];if(this.mnMonth==2&&this.IsLeapYear(this.mnYear)){this.mnDay++;}}}if(this.mnHour<0){this.mnHour=0;}else{if(this.mnHour>23){this.mnHour=23;}}if(this.mnMinute<0){this.mnMinute=0;}else{if(this.mnMinute>59){this.mnMinute=59;}}if(this.mnSecond<0){this.mnSecond=0;}else{if(this.mnSecond>59){this.mnSecond=59;}}if(this.mnMillisecond<0){this.mnMillisecond=0;}else{if(this.mnMillisecond>999){this.mnMillisecond=999;}}if(R){var S=this.ToMilliseconds();S=S+H;this.init({ifTime:this.MillisecondsToDATE(S)});}},IsLeapYear:function Q(R){return((R&3)==0)&&((R%100)!=0||(R%400)==0);},ToMilliseconds:function I(){var R=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var S=R*H;S+=this.mnHour*A+this.mnMinute*L+this.mnSecond*C+this.mnMillisecond;return S;},MillisecondsToDATE:function E(S){var R=Math.floor(S/H);var T=(S-R*H)/H;if(T<0){R--;T+=1;}return R>=0?R+T:R-T;},DAYSToYMD:function N(T){var W=0;var Y=0;var S=0;T+=693959;var V=Math.floor(T/365);var U=T-V*365;var X=Math.floor(V/4)-Math.floor(V/100)+Math.floor(V/400);U=U-X;if(U<0){V--;U+=365;while(U<=0){V--;U+=365;}}var R=T-(V*365+Math.floor(V/4)+(V%4?1:0)-Math.floor((V-1)/100)+Math.floor((V-1)/400));if(R==365&&!this.IsLeapYear(V)){W=V+1;Y=1;S=1;return{year:W,month:Y,day:S};}if(R==-1){W=V-1;Y=12;S=31;return{year:W,month:Y,day:S};}W=V;Y=12;while(R<B.DaysBeforeMonth[Y-1]){Y--;}S=R-B.DaysBeforeMonth[Y-1]+1;if(Y>2&&this.IsLeapYear(W)){S--;if(S==0){Y--;S=B.DaysInMonth[Y-1];if(Y==2){S++;}}}return{year:W,month:Y,day:S};},YMDToDAYS:function G(U,T,S){if(T<1||T>12){return 0;}var R=U*365+Math.floor(U/4)+(U%4?1:0)-Math.floor((U-1)/100)+Math.floor((U-1)/400);R+=B.DaysBeforeMonth[T-1];if(T>2&&this.IsLeapYear(U)){R++;}R+=S-1;R-=693959;return R;},ToDATE:function F(){var S=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var R=this.mnHour/K+this.mnMinute/D+this.mnSecond/J+this.mnMillisecond/H;if(S>=0){return S+R;}else{return S-R;}},DateTimeOrder:function M(R){if(this.mnYear>R.mnYear){return 1;}else{if(this.mnYear<R.mnYear){return -1;}}if(this.mnMonth>R.mnMonth){return 1;}else{if(this.mnMonth<R.mnMonth){return -1;}}if(this.mnDay>R.mnDay){return 1;}else{if(this.mnDay<R.mnDay){return -1;}}if(this.mnHour>R.mnHour){return 1;}else{if(this.mnHour<R.mnHour){return -1;}}if(this.mnMinute>R.mnMinute){return 1;}else{if(this.mnMinute<R.mnMinute){return -1;}}if(this.mnSecond>R.mnSecond){return 1;}else{if(this.mnSecond<R.mnSecond){return -1;}}if(this.mnMillisecond>R.mnMillisecond){return 1;}else{if(this.mnMillisecond<R.mnMillisecond){return -1;}}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.JSONUtil","mstrmojo.chart.enums.EnumInstructionName");var D=mstrmojo.chart,H=mstrmojo.chart.enums,K=H.EnumInstructionName,F=D.JSONUtil.prototype;mstrmojo.chart.JSONUnit=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUnit",mIsAnimated:false,mIsLastFrame:true,mIsFirstPass:true,mIsFirstFrameSet:false,mIsLastFrameSet:false,mInstructionList:[],mCurrentIndex:-1,init:function L(N){this.mInstructionList=[];if(N){this.mIsAnimated=N.mIsAnimated||false;this.mIsLastFrame=N.mIsLastFrame||false;}},AppendToJSONObject:function I(N){N.IsAnimated=this.mIsAnimated?1:0;if(this.mInstructionList.length>0){F.AppendCompoundPointerVectorToJSONObject("InstructionList",this.mInstructionList,N);}},AddInstruction:function J(O,N){if(O===undefined){O=K.JSONInsUndefined;}if(N===undefined){N=null;}++this.mCurrentIndex;if(this.mIsFirstPass){this.mInstructionList.push(new D.JSONInstruction({mInstructionName:O,mpOriginalAddress:N}));}else{this.mInstructionList[this.mCurrentIndex].SetSecondPass();}this.mInstructionList[this.mCurrentIndex].SetLastFrame(this.mIsLastFrame);return this.mInstructionList[this.mCurrentIndex];},SetAnimated:function A(N){this.mIsAnimated=N;},IsAnimated:function M(){return this.mIsAnimated;},IsValid:function E(){if(this.mInstructionList.length===0){return false;}if(this.mIsAnimated){return(this.mIsFirstFrameSet&&this.mIsLastFrameSet);}return true;},SetToFirstFrame:function G(){this.mIsFirstFrameSet=true;this.mIsLastFrame=false;this.mCurrentIndex=-1;if(this.mIsLastFrameSet){this.mIsFirstPass=false;}},SetToLastFrame:function C(){this.mIsLastFrameSet=true;this.mIsLastFrame=true;this.mCurrentIndex=-1;if(this.mIsFirstFrameSet){this.mIsFirstPass=false;}},CalculateFormatIndex:function B(O){var N,P;N=this.mInstructionList.length;for(P=0;P<N;++P){this.mInstructionList[P].CalculateFormatIndex(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.model.enums.EnumDSSGraphObject");var F=mstrmojo.chart,A=mstrmojo.chart.model,B=A.enums,G=B.EnumDSSGraphObject,C=F.gNullObjectId;function H(J){return new F.TripleId({ObjectId:J});}mstrmojo.chart.AxisObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.AxisObject",mLabelId:-1,mMajorId:-1,mMinorId:-1,mTitleId:-1,mCustomLineId:-1,mCustomLabelId:-1,init:function I(J){this.mLabelId=J.LabelId;this.mMajorId=J.MajorId;this.mMinorId=J.MinorId;this.mTitleId=J.TitleId;this.mCustomLineId=J.CustomLineId;this.mCustomLabelId=J.CustomLabelId;}});var E=mstrmojo.chart.AxisObject;var D=F.gAxisObjects=[];D.push(new E({LabelId:H.call(this,G.DssGraph2DO1Label),MajorId:H.call(this,G.DssGraphO1Major),MinorId:H.call(this,G.DssGraphO1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraph2DO2Label),MajorId:H.call(this,G.DssGraphO2Major),MinorId:H.call(this,G.DssGraphO2Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphX1Label),MajorId:H.call(this,G.DssGraphX1Major),MinorId:H.call(this,G.DssGraphX1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,G.DssGraphUserLabel3)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphY1Title),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphY2Label),MajorId:H.call(this,G.DssGraphY2Major),MinorId:H.call(this,G.DssGraphY2Minor),TitleId:H.call(this,G.DssGraphY2Title),CustomLineId:H.call(this,G.DssGraphUserLine2),CustomLabelId:H.call(this,G.DssGraphUserLabel2)}));D.push(new E({LabelId:H.call(this,G.DssGraphY3Label),MajorId:H.call(this,G.DssGraphY3Major),MinorId:H.call(this,G.DssGraphY3Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY4Label),MajorId:H.call(this,G.DssGraphY4Major),MinorId:H.call(this,G.DssGraphY4Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphX2Label),MajorId:H.call(this,G.DssGraphX2Major),MinorId:H.call(this,G.DssGraphX2Minor),TitleId:H.call(this,G.DssGraphX2Title),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,G.DssGraphUserLabel4)}));}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D");var B=mstrmojo.chart,C=new B.Rect2D();mstrmojo.chart.GridDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridDataLabelInfo",mIsDisPlayed:false,mIsValid:false,mSeriesId:-3,mGroupId:-3,mXIndex:-1,mYIndex:-1,mHostMarkerBound:null,mLabelPtr:null,init:function D(E){this._super(E);this.mHostMarkerBound=C;},ToRectangle:function A(){return this.mLabelPtr.GetBoundingRect();}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.array","mstrmojo.vi.ui.theme","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui.VIDragUnit");var F=mstrmojo.css,D=mstrmojo.dom,A=mstrmojo.vi.ui.theme,E=mstrmojo.array;function C(M,N,L){var K=false;E.forEach(this.getSelectedItems(),function(O){if(O.itemNode===N){K=true;}});if(M&&!K){this.doItemSelect(M,L||{});}}mstrmojo.vi.ui._HasUnitListAvatar=mstrmojo.provide("mstrmojo.vi.ui._HasUnitListAvatar",mstrmojo.mixin({avatarCssClass:"mstrmojo-VIUnitList",getDragData:function J(K){var L=K.src.node,N=D.findAncestorByAttr(L,"idx",true,this.domNode);K.src.node=N?N.node:L;var M=(K.dragUnitHelper=new mstrmojo.vi.ui.VIDragUnit()).getUnitDragData(K,this.getSelectedItems());if(this.getItemDisplayName){mstrmojo.func.override({getItemDisplayName:this.getItemDisplayName},K.dragUnitHelper);}M.srcId=this.id;return M;},createAvatar:function B(L,K){return K.dragUnitHelper.getUnitAvatar(K);},selectDragNode:function I(K){var L=K.src;C.call(this,this.getItemFromTarget(L.node),this.getItemNodeFromTarget(L.node),L);},onItemContextMenu:function H(L,K){C.call(this,L,this.getItemNodeFromTarget(K.getTarget()),K);if(this._super){return this._super(L,K);}},positionAvatar:function G(L,K){K.dragOffsets=K.dragUnitHelper.getDragUnitOffsets();if(this._super){this._super(L,K);}}},mstrmojo.mixin(mstrmojo._HasOwnAvatar)));}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","RGBColor","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillBevelEffect","EnumDSSGraphGradientType","EnumDSSGraphPictureScaleType","EnumDSSGraphPictureFormat");var Q=mstrmojo.chart,I=Q.enums,W=I.EnumFillType,N=mstrmojo.chart.model,J=N.enums,Y=J.EnumDSSGraphGradientType,d=J.EnumDSSGraphPictureScaleType,n=J.EnumDSSGraphPictureFormat,S=J.EnumDSSGraphFillBevelEffect;var A=0,L=1,P=2,h=3,B=4,X=5;var D=Q.gWhite.ToInteger(),a=Q.gBlack.ToInteger();var M=["mFillType","mAlpha","mSimpleColor","mDarkerFactor"],c=[W.FT_SIMPLE,255,1],k=["startGraphColor","endGraphColor","angle","horizontalOffset","verticalOffset","gradientType","endAlpha","intermediateColors","style"],F=[null,null,0,50,50,Y.DssGraphGradientCircular,0,null,0],e=["fillFlip","scaleType","pictureFormat","nameLength","pictureFilePtr","tripleId"],f=[A,d.DssGraphPictureScaleNone,n.DssGraphPicturePNG,0,null,null],j=["type","depth","lightAngle","intensity"],U=[S.DssGraphFillBevelNone,0,270,10];var K=false;mstrmojo.chart.FormatFill=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFill",mFillType:W.FT_SIMPLE,mAlpha:255,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillPicture:null,mFillBevel:null,mDarkerFactor:1,init:function g(q){var p,o=M.length;this._super(q);if(q&&q.Bare){for(p=0;p<o;++p){this[M[p]]=null;}}else{if(q&&q.SimpleColor!==undefined){this.mSimpleColor=q.SimpleColor;}else{this.mSimpleColor=D;}if(q&&q.Alpha!==undefined){this.mAlpha=q.Alpha;}else{this.mAlpha=255;}}if(K){this.mFillPattern={foregroundColor:D,backgroundColor:a,patternId:28};this.mFillPicture={fillFlip:A,scaleType:d.DssGraphPictureScaleNone,pictureFormat:n.DssGraphPicturePNG,nameLength:0,pictureFilePtr:null,tripleId:null};this.mFillBevel={type:S.DssGraphFillBevelNone,depth:0,lightAngle:270,intensity:10};}},transformToGradient:function E(o){var p=new Q.FormatFill({SimpleColor:this.SimpleColor,Alpha:this.mAlpha});p.mFillType=W.FT_GRADIENT;var q=p.getGradient();q.startGraphColor=o.StartGraphColor;q.endGraphColor=o.EndGraphColor;q.angle=o.Angle;q.gradientType=Y.DssGraphGradientLinear;q.endAlpha=o.EndAlpha;q.style=o.Style;q.intermediateColors=o.Colors.slice(0);return p;},getGradient:function H(){if(this.mFillGradient===null){this.mFillGradient={startGraphColor:a,endGraphColor:D,angle:0,horizontalOffset:50,verticalOffset:50,gradientType:Y.DssGraphGradientCircular,endAlpha:0,intermediateColors:[],style:0};}return this.mFillGradient;},FillSimple:function R(o){o.FillSimple(this,this.mDarkerFactor,this.mSimpleColor,false);},FillGradient:function b(p,o){return p.FillGradient(this,o,this.mDarkerFactor);},EnhancedSeriesEffect:function T(t,r,o,p,s){this.mAlpha=t;if(K){var q=this.mFillBevel;q.type=r;q.depth=o;q.lightAngle=p;q.intensity=s;}},FillEdgeType:function C(p,o){p.FillEdgeType(this,o);},FillDonutOrSphere:function O(q,o,p){q.FillDonutOrSphere(this,o,p);},MakeDarker:function V(o){this.mDarkerFactor=o;},RestoreColor:function l(){this.mDarkerFactor=1;},supportAdvancedFill:function G(o){return K;},restoreDefaults:function Z(u){var p,q,s,t,r,o;if(u){o=M.length;for(p=0;p<o;++p){this[M[p]]=c[p];}this.mSimpleColor=D;t=this.mFillGradient={};o=t.length;for(p=0;p<o;++p){t[k[p]]=F[p];}t.startGraphColor=a;t.endGraphColor=D;if(K){this.mFillPattern={foregroundColor:D,backgroundColor:a,patternId:28};q=this.mFillBevel={};o=j.length;for(p=0;p<o;++p){q[j[p]]=U[p];}s=this.mFillPicture={};o=e.length;for(p=0;p<o;++p){s[e[p]]=f[p];}}}else{o=M.length;for(p=0;p<o;++p){if(this[M[p]]===null){this[M[p]]=c[p];}}if(this.mSimpleColor===null){this.mSimpleColor=D;}if(this.mFillType===0){return ;}if(this.mFillGradient===null){this.mFillGradient={};}t=this.mFillGradient;o=k.length;for(p=0;p<o;++p){if(t[k[p]]===null||t[k[p]]===undefined){t[k[p]]=F[p];}}if(t.startGraphColor===null||t.startGraphColor===undefined){t.startGraphColor=a;}if(t.endGraphColor===null||t.endGraphColor===undefined){t.endGraphColor=D;}if(K){if(this.mFillPattern===null){this.mFillPattern={};}r=this.mFillPattern;if(r.foregroundColor===undefined||r.foregroundColor===null){r.foregroundColor=D;}if(r.backgroundColor===undefined||r.backgroundColor===null){r.backgroundColor=a;}if(r.patternId===undefined||r.patternId===null){r.patternId=28;}if(this.mFillBevel===null){this.mFillBevel={};}q=this.mFillBevel;o=j.length;for(p=0;p<o;++p){if(q[j[p]]===null){q[j[p]]=U[p];}}if(this.mFillPicture===null){this.mFillPicture={};}s=this.mFillPicture;o=e.length;for(p=0;p<o;++p){s[e[p]]=f[p];}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Vector2D","Point2D","RGBColor","ChartConstants");var J=mstrmojo.chart,F=J.ChartConstants,B=mstrmojo.chart.model,C=B.enums;mstrmojo.chart.CEModuleMain=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CEModuleMain",mTolerance:0.01,mDefaultGraphWidth:700,mDefaultGraphHeight:400,mRiserCountLimit:32767,mpController:null,mGlowWidth:10,mColorParser:null,mGraphObjectMap:null,DegreeToRadian:function G(O){return O*F.kPI/180;},GetColorParser:function I(){if(this.mColorParser===null){this.mColorParser=new J.RGBColor();}return this.mColorParser;},GetGraphObjectMap:function A(){if(this.mGraphObjectMap===null){this.mGraphObjectMap=new J.common.MapStructure();}return this.mGraphObjectMap;},ResetGraphObjectMap:function K(){if(this.mGraphObjectMap){this.mGraphObjectMap.clear();}},RadianToDegree:function E(O){return(O*180/F.kPI+(O>=0?0.5:-0.5));},setController:function D(O){this.mpController=O;},GetLocalizedValue:function N(){},ShiftPolygonBy:function M(Q,R){if(R<=0){return Q;}var S,O,P=Q.length;R%=P;if(P<=1){return Q;}S=Q.slice(R,Q.length);O=Q.slice(0,R);return S.concat(O);},GetAngularBisectorIntersectionPoint:function L(O,Z,Y,S,T){var X=new J.Vector2D({x:O.x-Z.x,y:O.y-Z.y}),W=new J.Vector2D({x:Y.x-Z.x,y:Y.y-Z.y}),V=X.Length(),U=W.Length(),R=new J.Vector2D({x:X.x/V,y:X.y/V}),Q=new J.Vector2D({x:W.x/U,y:W.y/U}),P=0;if(Math.abs(R.x-Q.y)<this.mTolerance){P=S*(Q.x+R.x)/(R.y-Q.y);}else{P=S*(Q.y+R.y)/(Q.x-R.x);}T.x=Z.x+P*Q.x+S*(-Q.y);T.y=Z.y+P*Q.y+S*Q.x;},MakePolygonClockwise:function H(T){var Q=T.length,V=0,S,P,U,R,O;if(Q<3){return ;}for(S=1;S<Q;++S){if(T[S].x<T[V].x||(T[S].x<=T[V].x&&T[S].y<T[V].y)){V=S;}}P=(V+Q-1)%Q;U=new J.Vector2D({x:(T[P].x-T[V].x),y:(T[P].y-T[V].y)});P=(V+1)%Q;R=new J.Vector2D({x:(T[P].x-T[V].x),y:(T[P].y-T[V].y)});if(R.CrossProduct(U)<-this.mTolerance){for(S=0;S<Q/2;++S){O=T[S];T[S]=T[Q-S-1];T[Q-S-1]=O;}}}});J.gModuleMain=new J.CEModuleMain();}());(function(){mstrmojo.requiresCls("mstrmojo.chart.FormatBase","mstrmojo.chart.RGBColor","mstrmojo.chart.enums.EnumLineStyle");var E=mstrmojo.chart,J=E.enums,L=J.EnumLineStyle;E.gLinePatterns=[[1,0],[18,6],[3,3],[9,6,3,6],[9,3,3,3,3,3],[9,2],[3,8],[30,10],[10,10],[3,8,3,8,3,17],[12,8,12,8,3,8],[12,5,12,5,3,5,3,5],[25,10,10,10],[25,5,8,5,8,5],[35,10,25,10,10,10],[37,5,37,5,8,5,8,5]];var G=["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","mGradient"],I=[L.LS_SOLID,255,1,75,null,null];function M(){if(this.mGradient===null){this.mGradient={valid:false,angle:0,endAlpha:0,style:1,colors:[],range:{start:{x:0,y:0},end:{x:0,y:0}}};}}mstrmojo.chart.FormatLine=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatLine",mLineStyle:L.LS_SOLID,mAlpha:255,mLineThickness:1,mLineThicknessPt:75,mLineColor:0,mGradient:null,init:function K(Q){var O,N=G.length;this._super(Q);if(Q){if(Q.Line){var P=Q.Line;this.mLineStyle=P.LineStyle;this.mAlpha=P.Alpha;this.mLineThickness=P.LineThickness;this.mLineColor=P.LineColor;}else{if(Q.Bare){for(O=0;O<N;++O){this[G[O]]=null;}}else{this.mLineStyle=Q.LineStyle||L.LS_SOLID;this.mAlpha=Q.Alpha||255;this.mLineThickness=Q.LineThickness||1;this.mLineColor=Q.LineColor||0;}}}},getGradient:function C(){M.call(this);return this.mGradient;},transformToGradient:function B(N){var P=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var O=P.getGradient();O.valid=N.Valid;O.angle=N.Angle;O.endAlpha=N.EndAlpha;O.style=N.Style;O.colors=N.Colors.slice(0);O.range={start:{x:N.Start.x,y:N.Start.y},end:{x:N.End.x,y:N.End.y}};O.strokePatten=this.mLineStyle;return P;},transformToGradientFromFill:function D(N,O,Q){var R=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var P=R.getGradient();P.valid=true;P.angle=N.angle;P.endAlpha=N.endAlpha;P.style=N.style;P.colors=[];P.colors=N.intermediateColors.slice(0);P.colors.push({Color:N.endGraphColor,Step:1});P.colors.splice(0,0,{Color:N.startGraphColor,Step:0});P.range={start:{x:O.x,y:O.y},end:{x:Q.x,y:Q.y}};return R;},ApplyLineFormat:function A(N){N.ApplyLineFormat(this);},getLinePattern:function H(N){return E.gLinePatterns[N];},restoreDefaults:function F(O){var N;if(O){for(N=0;N<G.length;++N){this[G[N]]=I[N];}}else{for(N=0;N<G.length;++N){if(this[G[N]]===null){this[G[N]]=I[N];}}}if(this.mLineColor===null){this.mLineColor=E.gBlack.ToInteger();}}});mstrmojo.chart.FormatLine.getLinePattern=function H(N){return E.gLinePatterns[N];};E.gOutlineWhite=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:1,LineColor:E.gWhite.ToInteger()});E.gOutlineBlack=new E.FormatLine({LineStyle:L.LS_DASH,Alpha:255,LineThickness:2,LineColor:E.gBlack.ToInteger()});E.gLeaderLine=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:2,LineColor:E.gLeaderLineColor.ToInteger()});E.gStrokeForDarkBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForDarkBackground.ToInteger()});E.gStrokeForLightBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForLightBackground.ToInteger()});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.MapHelper","mstrmojo.vi.viz.EnumDSSDropZones");var E=mstrmojo.vi.viz.MapHelper,D=mstrmojo.vi.viz.EnumDSSDropZones,H=mstrmojo.gmaps,A=new RegExp(".{32}","g");function C(I){return(I.sa==="1")?E.MTP_AREA:I.mtp;}mstrmojo.vi.viz.ESRIMapHelper=mstrmojo.declare(mstrmojo.vi.viz.MapHelper,null,{scriptClass:"mstrmojo.vi.viz.ESRIMapHelper",setWidget:function G(I){this._super(I);this.mapType=C(I.model.data.vp);},setMapType:function F(I){this._super(I);if(I===mstrmojo.vi.viz.MapHelper.MTP_AREA){this.vp.sa="1";this.vp.sm="0";}else{this.vp.sm="1";this.vp.sa="0";}},showAngleZone:function(){return(vp.mtp===H.EnumMapType.Marker||vp.mtp===H.EnumMapType.Bubble)&&vp.mc===H.EnumClusterMode.PIE;},showColorByZone:function(){return E.canShowColorByZone(this.mapType||C(this.vp));},showSizeByZone:function(){return E.canShowSizeByZone(this.mapType||C(this.vp));},getXml:function B(){var K=this.vp,P=this.geoAttribute,N=this.latitude,O=this.longitude,Q=this.colorBy,I=this.sizeBy,R=this.tooltip,M=this.mapType,J=this.defaultView,L=this.useAttributeForm;if(M){K.mtp=M;K.sa=M===E.MTP_AREA?"1":"0";K.sm=M===(E.MTP_MARKER||M===E.MTP_BUBBLE)?"1":"0";}if(J){K.dv=J;}K.ma=P||"";K.lat=N||"";K.lng=O||"";K.cmt=Q||"";K.smt=I||"";if(L){K.af=L;}K.tooltip="";R.forEach(function(S){K.tooltip+=S;});return this._super();}});mstrmojo.vi.viz.ESRIMapHelper.zonesCfg=[{n:mstrmojo.desc(11661,"Geo Attribute"),id:D.GeoAttribute,prm:true,show:function(I){return true;},v:function(I){return[I.ma];},onDel:function(I){I.ma="";},onAdd:function(I,J){I.ma=J.item.did;I.af=E.USE_ATTRIBUTE_FORM;I.lid="";}},{n:mstrmojo.desc(7696,"Latitude"),id:D.Latitude,prm:true,show:function(I){return I.sa!=="1";},v:function(I){return I.lat?[I.lat]:[];},onDel:function(I){I.lat="";},onAdd:function(I,J){var K=J.item;I.lat=K.did;I.af=K.t===21?E.USE_ATTRIBUTE_FORM:E.USE_ATTRIBUTE;}},{n:mstrmojo.desc(7697,"Longitude"),id:D.Longitude,prm:true,show:function(I){return I.sa!=="1";},v:function(I){return I.lng?[I.lng]:[];},onDel:function(I){I.lng="";},onAdd:function(I,J){var K=J.item;I.lng=K.did;I.af=K.t===21?E.USE_ATTRIBUTE_FORM:E.USE_ATTRIBUTE;}},{n:mstrmojo.desc(14294,"Angle"),id:D.Angle,prm:true,show:function(I){return(I.mtp===H.EnumMapType.Marker||I.mtp===H.EnumMapType.Bubble)&&I.mc===H.EnumClusterMode.PIE;},v:function(I){return[I.amt];},onDel:function(I){I.amt="";},onAdd:function(I,J){I.amt=J.item.did;}},{n:mstrmojo.desc(11662,"Color By"),id:D.ColorBy,prm:true,show:function(I){return E.canShowColorByZone(C(I));},v:function(I){return[I.cmt];},onDel:function(I){I.cmt="";},onAdd:function(I,J){I.cmt=J.item.did;}},{n:mstrmojo.desc(11663,"Size By"),id:D.SizeBy,prm:true,show:function(I){return E.canShowSizeByZone(C(I));},v:function(I){return[I.smt];},onDel:function(I){I.smt="";},onAdd:function(I,J){I.smt=J.item.did;}},{n:mstrmojo.desc(2962,"Tooltip"),id:D.AdditionalMetrics,prm:false,show:function(I){return true;},v:function(I){var J=I.tooltip;return J&&J.match(A);},onDel:function(I,J){I.tooltip=I.tooltip.replace(J.item.did,"");},onAdd:function(I,J){var K=I.tooltip?I.tooltip.match(A):[];K.splice(J.idx,0,J.item.did);I.tooltip=K.join("");}}];}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.MapHelper","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.hash");var C=mstrmojo.vi.viz.EnumDSSDropZones,D=mstrmojo.vi.viz.MapHelper,A=new RegExp(".{32}","g");mstrmojo.vi.viz.GoogleMapHelper=mstrmojo.declare(mstrmojo.vi.viz.MapHelper,null,{scriptClass:"mstrmojo.vi.viz.GoogleMapHelper",supportAreaMap:false,tooltip:[],showColorByZone:function(){return D.canShowColorByZone(this.mapType||this.vp.mtp);},showSizeByZone:function(){return D.canShowSizeByZone(this.mapType||this.vp.mtp);},getXml:function B(){var G=this.vp,L=this.geoAttribute,J=this.latitude,K=this.longitude,M=this.colorBy,E=this.sizeBy,N=this.tooltip,I=this.mapType,F=this.defaultView,H=this.useAttributeForm;if(I){G.mtp=I;}if(F){G.dv=F;}G.ga=L||"";G.flat=J||"";G.flong=K||"";G.cmt=M||"";G.smt=E||"";if(H){G.af=H;}G.tooltip="";N.forEach(function(O){G.tooltip+=O;});return this._super();}});mstrmojo.vi.viz.GoogleMapHelper.zonesCfg=[{n:mstrmojo.desc(11661,"Geo Attribute"),id:C.GeoAttribute,prm:true,show:function(E){return true;},v:function(E){return E.ga?[E.ga]:[];},onDel:function(E){E.ga="";},onAdd:function(E,F){E.ga=F.item.did;E.af=D.USE_ATTRIBUTE_FORM;}},{n:mstrmojo.desc(7696,"Latitude"),id:C.Latitude,prm:true,show:function(E){return E.mtp!=="3";},v:function(E){return E.flat?[E.flat]:[];},onDel:function(E){E.flat="";},onAdd:function(E,F){var G=F.item;E.flat=G.did;E.af=G.t===21?D.USE_ATTRIBUTE_FORM:D.USE_ATTRIBUTE;}},{n:mstrmojo.desc(7697,"Longitude"),id:C.Longitude,prm:true,show:function(E){return E.mtp!=="3";},v:function(E){return E.flong?[E.flong]:[];},onDel:function(E){E.flong="";},onAdd:function(E,F){var G=F.item;E.flong=G.did;E.af=G.t===21?D.USE_ATTRIBUTE_FORM:D.USE_ATTRIBUTE;}},{n:mstrmojo.desc(11662,"Color By"),id:C.ColorBy,prm:true,show:function(E){return D.canShowColorByZone(E.mtp);},v:function(E){return E.cmt?[E.cmt]:[];},onDel:function(E){E.cmt="";},onAdd:function(E,F){E.cmt=F.item.did;}},{n:mstrmojo.desc(11663,"Size By"),id:C.SizeBy,prm:true,show:function(E){return D.canShowSizeByZone(E.mtp);},v:function(E){return E.smt?[E.smt]:[];},onDel:function(E){E.smt="";},onAdd:function(E,F){E.smt=F.item.did;}},{n:mstrmojo.desc(2962,"Tooltip"),id:C.AdditionalMetrics,prm:false,show:function(E){return true;},v:function(E){var F=E.tooltip;return F?F.match(A):[];},onDel:function(E,F){E.tooltip=E.tooltip.replace(F.item.did,"");},onAdd:function(E,F){var G=E.tooltip?E.tooltip.match(A):[];G.splice(F.idx,0,F.item.did);E.tooltip=G.join("");}}];}());(function(){mstrmojo.requiresCls("mstrmojo.threshold.ThresholdModel","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel");var I=mstrmojo,E=mstrmojo.chart.model.enums.EnumDSSObjectType,F=1,C=["#97D2FC","#62B4EE","#2798EB","#2387CF","#1F77B4"],G=[0.2,0.4,0.6,0.8],B=I.models.FormatModel,H=B.ENUM_PROPERTY_NAMES;function D(L,K,M,N){K.reverse().forEach(function(O){N.push(L.getClearThresholdAction(M.did,M.t||E.DssTypeMetric,O.tid));});}mstrmojo.vi.util.ThresholdUtils=mstrmojo.provide("mstrmojo.vi.util.ThresholdUtils",{addClearAllThresholdsActions:function J(K,M,Q){var P=M.data.gsi,L=P.mx,N=P.thresholds,O;if(N){L.forEach(function(R){O=N[R.did];if(O){D(K,O,R,Q);}});P.thresholds={};}},addThresholds:function A(S,X,N,R,P,K,L,O){var Q,U=[],T=new mstrmojo.threshold.ThresholdModel({data:N.data}),V=T.data.gsi.thresholds,M=V&&V[R.did];P=P||[];if(!M||O){K=K||C;L=L||G;for(Q=0;Q<K.length;Q++){var W={};W.fmt=B.getFormatUpdate(H.BACKGROUND_COLOR,K[Q]);B.getFormatUpdate(H.FILL_STYLE,0,W.fmt);if(Q>0){W.flr=T.getRealValue(L[Q-1],F);}if(Q<L.length){W.ceil=T.getRealValue(L[Q],F);}U.push(W);}if(M){D(S,M,R,P);}P.push(S.getCreateSimpleThresholdAction(U,X.k,R.did,F,null,4));}T.destroy();return P;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget");var A=Math,E=mstrmojo.dom,G=mstrmojo.css,B=1,I=0;function F(L,N){if(isNaN(L[0])){console.log("Invalid input to function doHitTest.");return 0;}if(isNaN(N)){console.log("Invalid input to function doHitTest.");}N=N||0;var K,O,M,P=L.length;if(P<1||N<=L[0]){return 0;}if(N>L[P-1]){return P-1;}O=0;M=P-1;while(M-O>1){K=O+((M-O)>>1);if(L[K]===N){return K;}if(L[K]<N){O=K;}else{if(L[K]>N){M=K;}}}return M;}function C(L){var K=parseFloat(L);if(isNaN(K)){K=0;}return Math.floor(K+0.5);}function H(P,X){var M=P.x,V=P.y,K=M+P.w,T=V+P.h,R=X.x,O=X.y,Q=R+X.w,N=O+X.h;if(M>=Q||V>=N||K<=R||T<=O){return{flag:0};}if(M<=R&&V<=O&&K>=Q&&T>=N){return{flag:2};}var U=Math.max(M-R,0),S=Math.max(V-O,0),L=Math.min(K-R,X.w)-U,W=Math.min(T-O,X.h)-S;return{flag:1,x:U,y:S,width:L,height:W};}function D(K,N){var L,M=K.length;for(L=0;L<M;L++){if(K[L].id===N){return L;}}return -1;}mstrmojo.WidgetMatrix=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WidgetMatrix",left:0,top:0,width:100,height:100,phCss:"",nRows:1,nCols:1,chartW:100,chartH:100,fixWidth:false,fixHeight:false,depth:undefined,origin:undefined,offset:undefined,hArr:undefined,hAccArr:undefined,wArr:undefined,wAccArr:undefined,domHSBar:undefined,domVSBar:undefined,domHSBarBody:undefined,domVSBarBody:undefined,chartsPool:undefined,activeCharts:undefined,activeFlags:undefined,API:undefined,APIOwner:undefined,contentSummary:undefined,markupString:'<div class="{@cssClass}" style="position:absolute; left:{@left}px; top:{@top}px; width:{@width}px; height:{@height}px;"><div style="position:absolute; left:0px; bottom:0px; width:100%; height:100%; overflow:hidden"><div class="canvas" style="position:absolute; width:{@canvasW}px; height:{@canvasH}px"></div></div><span style="visibility:hidden"></span></div>',markupSlots:{domContainer:function(){return this.domNode.firstChild;},domCanvas:function(){return this.domNode.firstChild.firstChild;},domSpan:function(){return this.domNode.lastChild;}},init:function J(K){this.origin={x:0,y:0};this.offset={x:{s:0,e:0},y:{s:0,e:0}};this.hArr=[];this.hAccArr=[];this.wArr=[];this.wAccArr=[];this.chartsPool=[];this.activeCharts=[];this.activeFlags=[];this.contentSummary=null;this.canvasScrolled=K&&K.canvasScrolled;this.API={handleDroppedChart:undefined,getChartWidth:undefined,getChartHeight:undefined,createUnitChart:undefined,updateUnitChart:undefined,getRowSpan:function(M){return[M,M];},getColSpan:function(M){return[M,M];}};var L=K.placeholder;if(L!==undefined){this.cssClass=L.getAttribute("class");if(!this.cssClass){this.cssClass="";}if(K.hasOwnProperty("width")===false){K.width=C(L.style.width);}if(K.hasOwnProperty("height")===false){K.height=C(L.style.height);}if(K.hasOwnProperty("left")===false){K.left=C(L.style.left);}if(K.hasOwnProperty("top")===false){K.top=C(L.style.top);}}if(this._super){this._super(K);}},preBuildRendering:function(){this.resetGrid();},postBuildRendering:function(){if(this._super){this._super();}var L=this.domSpan,K;L.setAttribute("class",this.phCss);K=G.getComputedStyle(L);this.borderL=C(K.borderLeftWidth);this.borderR=C(K.borderRightWidth);this.borderT=C(K.borderTopWidth);this.borderB=C(K.borderBottomWidth);this.borderH=this.borderL+this.borderR;this.borderV=this.borderT+this.borderB;},highlightText:function(K){if(K){G.addClass(this.domNode,"highlight-label");}else{G.removeClass(this.domNode,"highlight-label");}},clearCharts:function(){this.chartsPool=[];this.activeCharts=[];this.activeFlags=[];if(this.domCanvas){this.domCanvas.innerHTML="";}},getChart:function(M,K){var L=this.chartsPool;return L[M]&&L[M][K];},addChart:function(M,K,N){var L=this.chartsPool;L[M]=L[M]||[];L[M][K]=N;},getActiveFlag:function(M,L){var K=this.activeFlags;return !!(K[M]&&K[M][L]);},setActiveFlag:function(N,M,K){var L=this.activeFlags;L[N]=L[N]||[];L[N][M]=K;},filterChartsByRow:function(Q,P){var R,M,O,L,W,N=false,U=this.nRows,T=this.contentSummary,V=T.unit,K=T.elements,S=[];for(L in Q){if(Q.hasOwnProperty(L)){W=Q[L];if(L===V){for(R=0;R<U;R++){if(D(W,K[R])!==-1){if(N){O++;}else{M=O=R;N=true;}}else{if(N){S.push({start:M,end:O,depth:P,byRow:true,att:V,elements:W});N=false;}}}if(N){S.push({start:M,end:O,depth:P,byRow:true,att:V,elements:W});}return S;}return null;}}return null;},filterChartsByCol:function(Q,P){var R,M,O,N=false,S=this.nCols,L,W,U=this.contentSummary,V=U.unit,K=U.elements,T=[];for(L in Q){if(Q.hasOwnProperty(L)){W=Q[L];if(L===V){for(R=0;R<S;R++){if(D(W,K[R])!==-1){if(N){O++;}else{M=O=R;N=true;}}else{if(N){T.push({start:M,end:O,depth:P,byRow:false});N=false;}}}if(N){T.push({start:M,end:O,depth:P,byRow:false});}return T;}return null;}}return null;},filterRelevantDimension:function(R,P){var O=this.contentSummary,Q=O.unit;if(!P.hasOwnProperty(Q)){return R;}var M,T,N=[],L=R.length,S=P[Q],K=O.elements;for(M=0;M<L;M++){T=R[M];if(D(S,K[T])!==-1){N.push(T);}}return N;},filterRelevantRows:function(L,K){return this.filterRelevantDimension(L,K);},filterRelevantCols:function(L,K){return this.filterRelevantDimension(L,K);},resize:function(L,K){this.width+=L;this.height+=K;this.offset.x.e=A.max(this.domCanvas.clientWidth-this.width,0);this.offset.y.e=A.max(this.domCanvas.clientHeight-this.height,0);this.domNode.style.width=this.width+"px";this.domNode.style.height=this.height+"px";if(this.fixHeight&&this.nRows===1){this.chartH+=K;}if(this.fixWidth&&this.nCols===1){this.chartW+=L;}},resizeAbs:function(K,M){var L=K-this.width,N=M-this.height;this.width=K;this.height=M;this.offset.x.e=A.max(this.domCanvas.clientWidth-K,0);this.offset.y.e=A.max(this.domCanvas.clientHeight-M,0);this.domNode.style.width=K+"px";this.domNode.style.height=M+"px";if(this.fixHeight&&this.nRows===1){this.resizeRow([0],[N]);this.doUpdateChartsGlobally();this.chartH=M;}if(this.fixWidth&&this.nCols===1){this.resizeCol([0],[L]);this.doUpdateChartsGlobally();this.chartW=K;}},setRowHeight:function(K,L){this.hArr[K]=L;return this.updateAccHeight(K,K);},setColWidth:function(L,K){this.wArr[L]=K;return this.updateAccWidth(L,L);},resizeRow:function(P,O,N){var M,L,K;for(M=0;M<P.length;M+=1){L=P[M];K=O[M];this.setRowHeight(L,this.getRowHeight(L)+K);}if(O[0]!==0){this.updateCanvas(0,O[0]*N);}},resizeCol:function(P,O,N){var M,L,K;for(M=0;M<P.length;M+=1){L=P[M];K=O[M];this.setColWidth(L,this.getColWidth(L)+K);}if(O[0]!==0){this.updateCanvas(O[0]*N,0);}},toggleClsByRows:function(Q,R,L,K){var N,M,P,O=this.nCols;for(N=Q;N<=R;N++){for(M=0;M<O;M++){P=this.getChart(N,M);if(P){if(L){G.addClass(P,K);}else{G.removeClass(P,K);}}}}},toggleClsByCols:function(R,K,M,L){var P,N,Q,O=this.nRows;for(N=R;N<=K;N++){for(P=0;P<O;P++){Q=this.getChart(P,N);if(Q){if(M){G.addClass(Q,L);}else{G.removeClass(Q,L);}}}}},scrollTo:function(K,P,L){var O,M,N=this.origin;if(K===undefined){K=N.x;}if(P===undefined){P=N.y;}if(K===N.x&&P===N.y){return ;}N.x=K;N.y=P;if(!this.canvasScrolled){this.domCanvas.style[E.CSS3_TRANSFORM]=E.createTranslateString(-K,-P,0);}if(L){O=this.domHSBar;M=this.domVSBar;if(O){O.scrollLeft=K;}if(M){M.scrollTop=P;}}},adjustOriginIfNeeded:function(){var R,O,L=this.origin,N=this.offset,Q=L.x,M=L.y,K=N.x,P=N.y;if(Q<K.s||Q>K.e){R=K.s;}if(M<P.s||M>P.e){O=P.s;}this.scrollTo(R,O,true);},createMiniChart:function(S,P,T,M,U,L,R,N,Q){var O=U,K=L;if(this.depth){if(this.depthOnRow){O=this.depth;}else{K=this.depth;}}S-=this.borderH;P-=this.borderV;if(this.API.createUnitChart!==undefined){if(this.APIOwner){return this.API.createUnitChart.call(this.APIOwner,S,P,T,M,O,K,R,N,this.phCss,this.isPrimary,Q);}return this.API.createUnitChart(S,P,T,M,O,K,R,N,this.phCss,this.isPrimary,Q);}return this.createMiniPH(S,P,T,M,O,K,R,N,this.phCss);},createMiniPH:function(R,O,S,M,T,L,Q,N,P){var K=document.createElement("div");K.setAttribute("row",T);K.setAttribute("col",L);K.setAttribute("class",P);K.setAttribute("rowSpan",Q);K.setAttribute("colSpan",N);K.style.width=R+"px";K.style.height=O+"px";K.style.top=S+"px";K.style.left=M+"px";return K;},updateMiniChart:function(P,L,N,M,K,O){if(L){L-=this.borderH;}if(N){N-=this.borderV;}if(this.API.updateUnitChart!==undefined){if(this.APIOwner){this.API.updateUnitChart.call(this.APIOwner,P,L,N,M,K,this.isPrimary,O);}else{this.API.updateUnitChart(P,L,N,M,K,this.isPrimary,O);}}else{if(L){P.style.width=L+"px";}if(N){P.style.height=N+"px";}if(M){P.style.top=M+"px";}if(K){P.style.left=K+"px";}}},shiftCharts:function(M,L){if(M===0&&L===0){return ;}var N,P,O=this.activeCharts,K=O.length;for(N=0;N<K;N+=1){P=O[N];if(M!==0){P.style.left=P.offsetLeft+M+"px";}if(L!==0){P.style.top=P.offsetTop+L+"px";}}},updateCanvas:function(e,c,L,j){var Z=this.domCanvas,S=Z.offsetWidth,Y=Z.offsetHeight,b=S+e,O=Y+c,M=this.domHSBarBody,W=this.domVSBarBody,P=this.offset,g=this.origin,a=g.x,X=g.y,Q=P.x.e,T=P.y.e,R=a===Q,d=X===T,f=a===0,N=X===0,V=function(){if(e===0){return ;}if(M){M.style.width=b-B+"px";}Z.style.width=b+"px";P.x.e=A.max(Q+e,0);},K=function(){if(c===0){return ;}if(W){W.style.height=O-B+"px";}Z.style.height=O+"px";P.y.e=A.max(T+c,0);},U=function(){if(L===true){a+=e;}if(j===true){X+=c;}if((a>P.x.e)){a=P.x.e;}if((X>P.y.e)){X=P.y.e;}};this.canvasW=b;this.canvasH=O;V();K();U();this.scrollTo(a,X,true);},calculateBBox:function(){var L=this.origin.x,N=this.origin.y,K=this.width,M=this.height;this._x1=L-K*I;this._x2=L+K*(I+1);this._y1=N-M*I;this._y2=N+M*(I+1);},calculateMatrixBBox:function(){var L,N,R,K,P,M,O=this.activeCharts,Q=O.length;this._minRow=this.nRows;this._maxRow=-1;this._minCol=this.nCols;this._maxCol=-1;for(L=0;L<Q;L+=1){M=O[L];N=parseInt(M.getAttribute("row"),10);R=parseInt(M.getAttribute("col"),10);K=this.API.getRowSpan(N,this.depth);P=this.API.getColSpan(R,this.depth);this._minRow=A.min(this._minRow,K[0]);this._maxRow=A.max(this._maxRow,K[1]);this._minCol=A.min(this._minCol,P[0]);this._maxCol=A.max(this._maxCol,P[1]);}},isRowInSight:function(K){this.calculateMatrixBBox();return K>=this._minRow&&K<=this._maxRow;},isColInSight:function(K){this.calculateMatrixBBox();return K>=this._minCol&&K<=this._maxCol;},detachDomCanvas:function(){this.domContainer.removeChild(this.domCanvas);},setupDomCanvas:function(){this.domContainer.appendChild(this.domCanvas);},handleDroppedChart:function(){this.calculateBBox();var P,R,Q,O,S,T,L,N,M=this.activeCharts,K=M.length;for(P=K-1;P>=0;P-=1){N=M[P];T=parseInt(N.getAttribute("row"),10);L=parseInt(N.getAttribute("col"),10);R=this.getColWidth(L);Q=this.getRowHeight(T);O=this.getColPosition(L);S=this.getRowPosition(T);if(S+Q<this._y1||S>this._y2||O+R<this._x1||O>this._x2){if(this.API.handleDroppedChart){if(this.APIOwner){this.API.handleDroppedChart.call(this.APIOwner,this.domCanvas,N);}else{this.API.handleDroppedChart(this.domCanvas,N);}}else{this.domCanvas.removeChild(N);M.splice(P,1);this.setActiveFlag(T,L,false);}}}},initAccHeight:function(){var L,M=this.nRows,K=this.manager.heightCache,N=this.hAccArr,O=N[M-1];N[0]=K[0];for(L=1;L<M;L++){N[L]=N[L-1]+K[L];}this.updateCanvas(0,N[M-1]-O);},initAccWidth:function(){var M,O=this.nCols,L=this.manager.widthCache,K=this.wAccArr,N=K[O-1];K[0]=L[0];for(M=1;M<O;M++){K[M]=K[M-1]+L[M];}this.updateCanvas(K[O-1]-N,0);},resetHGrid:function(){var K=this.nCols,L=this.chartW,O=this.domCanvas,N=L*K,M=function(S,R,Q,U,P){var T;if(P){for(T=0;T<Q;T+=1){S[T]=U;}}R[0]=U;for(T=1;T<Q;T+=1){R[T]=R[T-1]+U;}};this.canvasW=N;this.offset.x.e=A.max(this.canvasW-this.width,0);if(!this.wArr){this.wArr=[];}if(!this.wAccArr){this.wAccArr=[];}this.wArr.length=0;this.wArr.length=K;this.wAccArr.length=0;this.wAccArr.length=K;M(this.wArr,this.wAccArr,K,L,this.fixWidth);if(O){O.style.width=N+"px";}},resetVGrid:function(){var O=this.nRows,L=this.chartH,N=this.domCanvas,K=L*O,M=function(S,R,Q,U,P){var T;if(P){for(T=0;T<Q;T+=1){S[T]=U;}}R[0]=U;for(T=1;T<Q;T+=1){R[T]=R[T-1]+U;}};this.canvasH=K;this.offset.y.e=A.max(this.canvasH-this.height,0);if(!this.hArr){this.hArr=[];}if(!this.hAccArr){this.hAccArr=[];}this.hArr.length=0;this.hArr.length=O;this.hAccArr.length=0;this.hAccArr.length=O;M(this.hArr,this.hAccArr,O,L,this.fixHeight);if(N){N.style.height=K+"px";}},resetGrid:function(){this.resetHGrid();this.resetVGrid();this.clearActiveCharts();},updateGrid:function(){this.calculateBBox();if(this.activeCharts.length===0){var P=this.doRowIntersectionCheck(),M=this.doColIntersectionCheck();this.doUpdateGridXIYI(P.start,M.start);}else{this.calculateMatrixBBox();var L=this._minRow,K=this._maxRow,O=this._minCol,N=this._maxCol;this.doUpdateGridXIYI({rowStart:K+1,colStart:O});this.doUpdateGridXIYD({rowStart:K,colStart:N+1});this.doUpdateGridXDYD({rowStart:L-1,colStart:N});this.doUpdateGridXDYI({rowStart:L,colStart:O-1});}},updateCharts:function(){if(!this.shouldDrawShapeFlag){return ;}this.handleDroppedChart();var L=this.doRowIntersectionCheck(),K=this.doColIntersectionCheck();this.doUpdateCharts(L.start,L.end,K.start,K.end);},updateVLayout:function(L,K){this.origin.y=K;this.domCanvas.style.height=L+"px";this.domCanvas.style[E.CSS3_TRANSFORM]=E.createTranslateString(0,-K,0);},updateHLayout:function(K,L){this.origin.x=L;this.domCanvas.style.width=K+"px";this.domCanvas.style[E.CSS3_TRANSFORM]=E.createTranslateString(-L,0,0);},doUpdateCharts:function(L,P,Y,a,e){var Z,d,b,V,N,O,K,Q,U,S,R,f,X,W,g=this.origin,M={x:g.x,y:g.y,w:this.width,h:this.height},T={};if(e===undefined){e=false;}for(Z=L;Z<=P;Z+=1){b=this.API.getRowSpan(Z,this.depth);N=b[0];K=b[1]-b[0]+1;S=this.getRowPosition(N);f=this.getRowHeight(b);if(f<=0){continue;}T.y=S;T.h=f-this.borderV;for(d=Y;d<=a;d+=1){V=this.API.getColSpan(d,this.depth);O=V[0];Q=V[1]-V[0]+1;U=this.getColPosition(O);R=this.getColWidth(V);T.x=U;T.w=R-this.borderH;W=H(M,T);if(W.flag!==0){X=this.getChart(N,O);if(!X&&!e){X=this.createMiniChart(R,f,S,U,N,O,K,Q,W);this.addChart(N,O,X);}else{if(X){this.updateMiniChart(X,R,f,S,U,W);}}if(X){if(this.getActiveFlag(N,O)===false){this.domCanvas.appendChild(X);this.activeCharts.push(X);this.setActiveFlag(N,O,true);}}}d+=V[1]-d;}Z+=b[1]-Z;}},doUpdateChartsGlobally:function(){if(!this.shouldDrawShapeFlag){return ;}this.handleDroppedChart();var L=this.doRowIntersectionCheck(),K=this.doColIntersectionCheck();this.doUpdateCharts(L.start,L.end,K.start,K.end);},updateActiveCharts:function(){var Q,K,L,Y,V,P,Z,N,T,S,O=this.activeCharts,M=O.length,W=this.origin,U,R={x:W.x,y:W.y,w:this.width,h:this.height},X={};for(Q=0;Q<M;Q++){K=O[Q];Z=parseInt(K.getAttribute("row"),10);N=parseInt(K.getAttribute("col"),10);T=this.API.getRowSpan(Z,this.depth);S=this.API.getColSpan(N,this.depth);V=this.getRowPosition(Z);P=this.getColPosition(N);Y=this.getRowHeight(T);L=this.getColWidth(S);X.y=V;X.x=P;X.h=Y-this.borderV;X.w=L-this.borderH;U=H(R,X);this.updateMiniChart(K,L,Y,V,P,U);}},clearActiveCharts:function(){var M,Q,O,L,K=this.domCanvas,N=this.activeCharts,P=N.length;for(M=0;M<P;M++){Q=N[M];O=parseInt(Q.getAttribute("row"),10);L=parseInt(Q.getAttribute("col"),10);this.setActiveFlag(O,L,false);K.removeChild(Q);}N.length=0;},doUpdateGridXIYI:function(X){var S,P,K=this.nRows,L=this.nCols,Q=this.hArr,U=this.wArr,M=X.rowStart||0,R=X.colStart||0,V=X.rowEnd||K-1,Z=X.colEnd||L-1;if(M>V||R>Z){return ;}var Y=this.getColPosition(R),W=this.getRowPosition(M),T=false;for(S=M;S<=V;S+=1){if(W>this._y2){break;}if(Q[S]===undefined){Q[S]=this.getMiniChartHeight(S,R);T=true;}W+=Q[S];}V=S-1;for(P=R;P<=Z;P+=1){if(Y>this._x2){break;}if(U[P]===undefined){U[P]=this.getMiniChartWidth(M,P);T=true;}Y+=U[P];}Z=P-1;if(T===true){var O=this.updateAccWidth(R,Z),N=this.updateAccHeight(M,V);if(O!==0||N!==0){this.updateCanvas(O,N,false,false);}}},doUpdateGridXDYD:function(O){var X,W,S=this.nRows,T=this.nCols,Z=this.hArr,K=this.wArr,P=O.rowStart||S-1,R=O.colStart||T-1,U=O.rowEnd||0,M=O.colEnd||0;if(P<U||R<M){return ;}var N=this.getColPosition(R+1),Q=this.getRowPosition(P+1),L=N,V=Q,Y=false;for(X=P;X>=U;X-=1){if(V<this._y1){break;}if(Z[X]===undefined){Z[X]=this.getMiniChartHeight(X,R);Y=true;}V-=Z[X];}U=X+1;for(W=R;W>=M;W-=1){if(L<this._x1){break;}if(K[W]===undefined){K[W]=this.getMiniChartWidth(P,W);Y=true;}L-=K[W];}M=W+1;if(Y===true){var b=this.updateAccWidth(M,R),a=this.updateAccHeight(U,P);if(b!==0||a!==0){this.updateCanvas(b,a,true,true);this.shiftCharts(b,a);}}},doUpdateGridXIYD:function(X){var S,P,K=this.nRows,L=this.nCols,Q=this.hArr,U=this.wArr,M=X.rowStart||K-1,R=X.colStart||0,V=X.rowEnd||0,Z=X.colEnd||L-1;if(M<V||R>Z){return ;}var Y=this.getColPosition(R),W=this.getRowPosition(M+1),T=false;for(S=M;S>=V;S-=1){if(W<this._y1){break;}if(Q[S]===undefined){Q[S]=this.getMiniChartHeight(S,R);T=true;}W-=Q[S];}V=S+1;for(P=R;P<=Z;P+=1){if(Y>this._x2){break;}if(U[P]===undefined){U[P]=this.getMiniChartWidth(S,P);T=true;}Y+=U[P];}Z=P-1;if(T===true){var O=this.updateAccWidth(R,Z),N=this.updateAccHeight(V,M);if(O!==0||N!==0){this.updateCanvas(O,N,false,true);this.shiftCharts(0,N);}}},doUpdateGridXDYI:function(X){var S,P,K=this.nRows,L=this.nCols,Q=this.hArr,U=this.wArr,M=X.rowStart||0,R=X.colStart||L-1,V=X.rowEnd||K-1,Z=X.colEnd||0;if(M>V||R<Z){return ;}var Y=this.getColPosition(R+1),W=this.getRowPosition(M),T=false;for(S=M;S<=V;S+=1){if(W>this._y2){break;}if(Q[S]===undefined){Q[S]=this.getMiniChartHeight(S,R);T=true;}W+=Q[S];}V=S-1;for(P=R;P>=Z;P-=1){if(Y<this._x1){break;}if(U[P]===undefined){U[P]=this.getMiniChartWidth(S,P);T=true;}Y-=U[P];}Z=P+1;if(T===true){var O=this.updateAccWidth(Z,R),N=this.updateAccHeight(M,V);if(O!==0||N!==0){this.updateCanvas(O,N,true,false);this.shiftCharts(O,0);}}},updateAccWidth:function(O,Q){var N,K=this.nCols,L=0,M=this.wArr,P=this.wAccArr;for(N=O;N<=Q;N+=1){L+=M[N]-this.getColWidth(N)-L;P[N]+=L;}if(L!==0){for(N=Q+1;N<K;N+=1){P[N]+=L;}}return L;},updateAccHeight:function(L,M){var O,Q=this.nRows,K=0,N=this.hArr,P=this.hAccArr;for(O=L;O<=M;O+=1){K+=N[O]-this.getRowHeight(O)-K;P[O]+=K;}if(K!==0){for(O=M+1;O<Q;O+=1){P[O]+=K;}}return K;},getMiniChartWidth:function(K,L){if(this.API.getChartWidth){return Math.floor(this.API.getChartWidth(K,L)*this.manager.widthScale);}if(this.manager.API.getChartWidth){return Math.floor(this.manager.API.getChartWidth(K,L)*this.manager.widthScale);}return this.getColWidth(L);},getMiniChartHeight:function(K,L){if(this.API.getChartHeight){return Math.floor(this.API.getChartHeight(K,L)*this.manager.heightScale);}if(this.manager.API.getChartHeight){return Math.floor(this.manager.API.getChartHeight(K,L)*this.manager.heightScale);}return this.getRowHeight(K);},getRowHeight:function(N){var M,L,K=this.hAccArr;if(N instanceof Array){M=N[0]-1;L=N[1];}else{M=N-1;L=N;}return K[L]-((M===-1)?0:K[M]);},getColWidth:function(N){var M,L,K=this.wAccArr;if(N instanceof Array){M=N[0]-1;L=N[1];}else{M=N-1;L=N;}return K[L]-((M===-1)?0:K[M]);},getRowPosition:function(K){if(K===0){return 0;}return this.hAccArr[K-1];},getColPosition:function(K){if(K===0){return 0;}return this.wAccArr[K-1];},doRowIntersectionCheck:function(L,K,M){M=M||false;if(L===undefined){L=this._y1;}else{if(M){L+=this.origin.y;}}if(K===undefined){K=this._y2;}else{if(M){K+=this.origin.y;}}return{start:F(this.hAccArr,L),end:F(this.hAccArr,K)};},doColIntersectionCheck:function(L,K,M){M=M||false;if(L===undefined){L=this._x1;}else{if(M){L+=this.origin.x;}}if(K===undefined){K=this._x2;}else{if(M){K+=this.origin.x;}}return{start:F(this.wAccArr,L),end:F(this.wAccArr,K)};},getChartBBox:function(P,N,M){var K,Q,L=this.origin,O={};K=this.getColPosition(N);Q=this.getRowPosition(P);if(M){K-=L.x;Q-=L.y;}O.left=K;O.top=Q;O.width=this.getColWidth(N);O.height=this.getRowHeight(P);return O;},filterRowsByType:function(K,P,S){var M,L,Q,R,N=this.nCols,O=[];for(M=K;M<=P;M++){for(L=0;L<N;L++){Q=this.getChart(M,L);if(Q&&Q.getAttribute){R=Q.getAttribute("type");if(R===S){O.push(Q);}}}}return O;},filterColsByType:function(L,S,Q){var M,K,O,P,R=this.nRows,N=[];for(K=L;K<=S;K++){for(M=0;M<R;M++){O=this.getChart(M,K);if(O&&O.getAttribute){P=O.getAttribute("type");if(P===Q){N.push(O);}}}}return N;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.Widget","mstrmojo.ui._HasScroller");var A=mstrmojo,D=A.dom,B=A.css;mstrmojo.gm.GMScroll=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.gm.GMScroll",cssClass:undefined,bodyClass:undefined,view:undefined,direction:undefined,markupString:'<div id="{@id}" class="gm-scrollbar"><div class="{@cssClass}"><div class="{@bodyClass}"></div></div></div>',markupSlots:{domContainer:function(){return this.domNode.firstChild;},domBody:function(){return this.domNode.firstChild.firstChild;}},init:function(F){this._super(F);},addScrollListener:function(){if(this.useNativeScrollBar()){D.attachMarkupEvent(this.id,this.domContainer,"scroll");}},setupScrollNodes:function(){this.scrollNode=this.domContainer;},onscroll:function C(){this.view.updateChartsPosition(this.direction,this.getCurrentPosition());this._super();},toggleHoverState:function(F){B.toggleClass(this.domNode,"hover",F);},updateScrollPosition:function(G){var F=this.domContainer;if(this.direction==="v"){if(F.scrollTop===G){return ;}F.scrollTop=G;}else{if(F.scrollLeft===G){return ;}F.scrollLeft=G;}},updateScrollbars:function E(){var G=this.domNode.style,F;this._super();if(this.scrollNode){F=this.scrollNode.style;if(this.direction==="v"){if(F.overflowY==="scroll"){G.display="block";}else{G.display="none";}}else{if(F.overflowX==="scroll"){G.display="block";}else{G.display="none";}}}},getCurrentPosition:function(){var F=this.domContainer;if(this.direction==="v"){return F.scrollTop;}return F.scrollLeft;},useNativeScrollBar:function(){return !this.hasCustomScrollbar;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var D=mstrmojo.dom;mstrmojo.gm.DndReplaceNode=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.gm.DndReplaceNode",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;z-index:{@zIndex};position:absolute;"></div>',markupSlots:{nodesContainer:function(){return this.domNode;}},toggle:function A(E){if(E){this.nodesContainer.style.display="block";}else{this.nodesContainer.style.display="none";}},getBoundaryPosForAllNodes:function B(){var H,E=this.nodesContainer,K=E.children,I=K.length;if(I<1){return{x:0,y:0,w:0,h:0};}var F=D.position(K[0]),J=F.x+F.w,M=F.y+F.h;if(I===1){return F;}for(H=1;H<I;H++){var L=K[H],G=D.position(L);J=Math.max(J,G.x+G.w);M=Math.max(M,G.y+G.h);F.x=Math.min(F.x,G.x);F.y=Math.min(F.y,G.y);}F.w=J-F.x;F.h=M-F.y;return F;},updateNodes:function C(S,H,N){var L=this.nodesContainer,U,T,V,J,P,M,E=function(a,Z,X,W){var Y=a.style;if(X&&W){if(T.svgNodePos){X=X+T.svgNodePos.x-J;W=W+T.svgNodePos.y-P;}Y.transformOrigin=X+"px "+W+"px";Y.msTransformOrigin=X+"px "+W+"px";Y.webkitTransformOrigin=X+"px "+W+"px";}Y.transform="rotate("+Z+"deg)";Y.msTransform="rotate("+Z+"deg)";Y.webkitTransform="rotate("+Z+"deg)";};L.innerHTML="";if(!S){return ;}this.toggle(true);for(U=0;U<S.length;U++){T=S[U];M=T.nodePos;if(T.clonedNode){V=T.clonedNode;}else{V=document.createElement("div");V.innerHTML=T.nodeContent;}L.appendChild(V);if(T.isMultipleTspan){M.w=V.offsetWidth;M.h=V.offsetHeight;}V.classList.add(this.nodeCss);if(N){V.classList.add(N);}J=Math.round(M.x-Math.ceil((V.offsetWidth-M.w)/2));P=Math.round(M.y-Math.ceil((V.offsetHeight-M.h)/2));V.style.left=(J-H.x)+"px";V.style.top=(P-H.y)+"px";var O=T.transform;if(O){var K=O.indexOf("("),I=O.indexOf(")");if(K>=0&&I>=0){var F=O.substring(K+1,I).split(" "),G=parseInt(F[0],10),R,Q;if(F.length===3){R=parseInt(F[1],10);Q=parseInt(F[2],10);}E(V,G,R,Q);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.ProgressBar=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ProgressBar",markupString:'<div id="{@id}" class="mstrmojo-ProgressBar {@cssClass}" style="{@cssText}"><div class="bar"><div class="indicator" style="width: 0"></div></div><div class="text">{@progressText}</div></div>',markupSlots:{barNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onprogressTextChange:function(){this.textNode.innerHTML=this.progressText||"";}},progressText:"",updateProgress:function A(C,B){if(this.hasRendered){this.barNode.firstChild.style.width=Math.min(100,Math.max(0,parseInt(C,10)))+"%";if(B!==undefined){this.set("progressText",B);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.boxmodel","mstrmojo.Widget");var X=mstrmojo.hash,f=mstrmojo.css,L=mstrmojo.dom,c="animate",P="px";function a(g){return X.copy(X.walk(g,window).boxConfiguration||mstrmojo.vi.ui._IsBoxLayoutChild.boxConfiguration);}function H(j){var h=j.boxCache,k=h&&h[this.id],g=false;if(!k){g=this.domNode.className.indexOf(c)>-1;this.cacheCtxtBoxPosition(j);}j.boxAnimating=g;}mstrmojo.vi.ui._IsBoxLayoutChild=mstrmojo.provide("mstrmojo.vi.ui._IsBoxLayoutChild",{_mixinName:"mstrmojo.vi.ui._IsBoxLayoutChild",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,ontopChange:mstrmojo.Widget.topMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod,onzIndexChange:function(){this.domNode.style.zIndex=this.zIndex||1;}},id:null,left:"0px",top:"0px",zIndex:1,draggable:false,dropZone:false,getBoxConfiguration:function C(){return a(this.scriptClass);},getBoxBorderWidth:function I(){return 0;},getMinBoxSize:function A(g){return mstrmojo.vi.ui._IsBoxLayoutChild.getBoxMinimums(this.scriptClass)[g];},getIdentifier:function Q(){return this.id;},updateLayout:function O(j,g){if(X.equals(j,this._currentLayout)){return ;}var h=this.domNode,l=window.Modernizr,k=this.getBoxBorderWidth();if(h&&g&&l.testProp("transition")){f.addClass(h,c);f.onTransitionEnd(h,function(){f.removeClass(h,c);});}this._currentLayout=j;this.applyBoxSize(Math.max((parseInt(j.height,10)-k),0)+P,Math.max((parseInt(j.width,10)-k),0)+P,j.top,j.left);if(this.hasRendered&&this.doLayout){this.doLayout();}this.postUpdateLayout();},postUpdateLayout:function D(){},applyBoxSize:function Y(g,k,n,l){this.height=g;this.width=k;this.top=n;this.left=l;var j=this.domNode;if(j){var h=this.domNode.style;h.top=n;h.left=l;h.height=g;h.width=k;if(parseInt(g,10)<=0||parseInt(k,10)<=0){h.borderWidth="0";}}},createAvatar:function V(){return this.offsetAvatar(this.domNode);},offsetAvatar:function S(g){g.style.margin="20px 0 0 20px";return g;},setMaskVisibility:function T(g){var h=this.maskNode.style;h.display=g?"block":"none";if(!g){this.resetMask();}},isDragValid:function F(g){return true;},initializeDrag:function G(g){},ondragstart:function e(g){this.initializeDrag(g);delete this._currentLayout;this.parent.beginBoxMove(g,this);this._super(g);},ondragend:function N(g){this._super(g);this.parent.endBoxMove(g,this);if(!g.dropSuccessful){this.parent.cancelBoxMove(g);}var h=this.domNode;h.style.margin="0";},allowDrop:function K(g){var j=g.src,h=j&&j.widget;return(h&&h.parent===this.parent);},wasDropped:function M(g){},cancelBoxMove:function J(g){return false;},ondragenter:function U(g){this.setMaskVisibility(true);},ondragover:function W(g){H.call(this,g);this.highlightMask(this.parent.getPanelTargetEdge(g)||this.getTargetDropZone(g),g);if(g.boxAnimating){delete g.boxCache[this.id];}},cacheCtxtBoxPosition:function E(h){var g=h.boxCache=h.boxCache||{};g[this.id]=L.position(this.domNode);},ondrop:function b(g){H.call(this,g);var j=g.src.widget;if(j.wasDropped){j.wasDropped(g);}var h=this.parent;if(j.parent===h){h.dropBox(g,this,this.maskNode.zone,true);}this.setMaskVisibility(false);},ondragleave:function B(){this.setMaskVisibility(false);},highlightMask:function d(k,j){var g=this.maskNode,h=j.boxAnimating;if(k!==g.zone||h||g.isAnimating!==h){g.zone=k;g.isAnimating=h;this.parent.updateDropCue(k,j,j.boxCache[this.id]);}},getTargetDropZone:function R(g){return mstrmojo.boxmodel.getEdgeQuadrantByPoint(g.boxCache[this.id],g.tgt.pos);},resetMask:function Z(){this.parent.updateDropCue("");var g=this.maskNode;delete g.zone;delete g.isAnimating;},getBoxDimension:mstrmojo.emptyFn,postDropBox:mstrmojo.emptyFn});mstrmojo.vi.ui._IsBoxLayoutChild.boxConfiguration={addToEnd:true};mstrmojo.vi.ui._IsBoxLayoutChild.getBoxMinimums=function(g){var h=a(g);return X.copy(h.minSize||h.f||{h:75,v:75});};mstrmojo.vi.ui._IsBoxLayoutChild.BoxConfigurationType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.DocDataService");mstrmojo.requiresDescs(5421,5422);var P=mstrmojo.hash,L=mstrmojo.array,F=mstrmojo.desc,G=mstrmojo.DocDataService,B=mstrmojo.string;function K(f,g,c,Y){var h=f.selCells,d=[],b=f.model.getCellTitleInfo(g).title,e,a,Z=function(j){var k=f.getCellForNode(j);d.push(f.getCellUnitIndex(k));e=k.dpt;},X;if(typeof Y==="string"&&Y.indexOf(";")>0){a=parseInt(Y.substring(Y.indexOf(";")+1),10);Y=parseInt(Y.substring(0,Y.indexOf(";")),10);}if(a===1&&!c){h.reverse().forEach(Z);}else{if(a===1){X=1;h.forEach(Z);}else{h.forEach(Z);}}return{oId:b.id,oTp:b.otp,depth:e,ordinals:d.join(","),sliceId:f.sid,viewKey:f.k,funcVal:Y,switchOrder:X};}function C(Z,Y,b){var e=Z.getDEInfo(Y),d=e&&e.deObject&&e.deObject.des,c=1,a=b===-1?F(5187,"Group"):F(5188,"Calculation"),X=function(f){return f.n===a+" "+c;};while(true&&d){if(d.some(X)){c++;}else{break;}}Z.controller.onAddQuickDE(Z,P.copy(K(Z,Y,false,b),{act:"addQuickDE",deName:a+" "+c}));}function W(X,Y){for(did in X){if(L.find(X[did].att,"did",Y)>-1){return did;}}return undefined;}function A(j,Y,f,b,X){var e=f.es,Z=f.id,d;X.forEach(function(k){d=k[0];if(d.eid.indexOf(Z)<0){e.push({n:B.decodeHtmlString(d.v,true),t:mstrmojo.vi.enums.EnumDerivedElementType.LIST,v:d.eid.split(";")[0].slice(1)});}});var a=j.controller,h=j.model&&j.model.docModel,g=a._getXtabCallback(j),c={act:"applyDEChanges",deId:Y.did,attId:Y.attId,attName:Y.attName,dsId:Y.dsId,k:j&&j.k,actions:[U(f,b)]};h.addUpdateObjects(c,{id:c.deId||c.attId,type:47,flag:G.PARTIAL_UPDATE_FLAGS.DATA_CHANGE});g=mstrmojo.func.wrapMethods(g,h.getDatasetsUpdateCallback(),{success:function(){h.callOnNDECreated([f]);}});a.submitUndoRedoUpdates(c,{},g);}function U(Y,X){return{act:"update",position:X+1,item:Y};}function E(Z,Y,c,b,a){var X=Z.model.getCellTitleInfo(Y).title;Z.controller.onSetDEHierachyOptions(Z,{act:"setDEHierarchyOptions",oId:X.id,eId:c.id,splice:b,expand:a});}function O(b,Y){var X=[],a=Y.t,Z=Y.did;b.getDropZones().zones.forEach(function(c){((c&&c.items)||[]).forEach(function(e){var f=e.t,d=e.did;if(f!==21&&d!=="-1"&&d!=="00000000000000000000000000000000"&&((f===4&&a===4)||(f!==4&&a!==4))&&d!==Z&&L.find(X,"did",d)===-1){X.push(e);}});});b.docModel.getDatasetUnits(a===4?["mx"]:["att"]).forEach(function(c){if(L.find(X,"did",c.did)===-1&&c.did!==Z&&!c.hide){X.push(c);}});return mstrmojo.vi.ui.DatasetUnitMenuUtils.getSortedDatasetUnits(X);}mstrmojo.vi.ui.rw._XtabDE=mstrmojo.provide("mstrmojo.vi.ui.rw._XtabDE",{scriptClass:"mstrmojo.vi.ui.rw._XtabDE",derivedElementGroup:function M(X){C(this,X,-1);},addElementsToGroup:function N(Z,a,Y,X){A(this,Z,a,Y,X);},derivedElementCalculation:function D(Y,X){C(this,Y,X);},separateOthers:function Q(X,Y){E(this,X,Y,1,1);},renameDEList:function I(X){this.controller.onEditQuickDEList(this,P.copy(K(this,X,true,-1),{act:"editQuickDEList",deName:X.v}));},editQuickDECalculationNumberFormat:function J(Y,Z){var X=K(this,Y);X.deId=Z.de.id;X.act="editQuickDECalculationNumberFormat";this.controller.editQuickDECalculationNumberFormat(this,P.copy(X,this.model.docModel.createNumberFormatParams(Z)));},editDECalculation:function H(Y,X){if(X!==undefined&&X!==null){this.controller.editQuickDECalculation(this,P.copy(K(this,Y,true,X),{act:"editQuickDECalculation"}));}else{this.controller.onEditQuickDECalculation(this,P.copy(K(this,Y,true),{act:"editQuickDECalculation",deName:Y.v}));}},removeQuickDE:function S(d,h){var a=h&&h.deObject,b=(a&&a.des)||[],j=this,l=2,g=L.filter(b,function(n){return !n.ido;},{max:l+1}),k={success:function(p){var q=j.controller.view.getLayouts(),n=q.length,o;for(o=0;o<n;o++){j.controller.model.data.layouts[o].loaded=false;q[o].defn.loaded=false;}}};if(a&&(b.length<=l||g.length<=l)){var c=[],f=this.zonesModel.getZoneForObject(a.did),Z=O(this.zonesModel,a),Y=L.find(Z,"did",a.attId),X=Y>=0?Z[Y]:null,e={};if(X&&f){c.push(this.model.getAddTemplateUnitAction(X,a.dsId,f.id,L.find(f.items,"dsId",a.dsId)));c=[this.zonesModel.getUpdateTemplateAction(c)];e=this.controller._getXtabCallback(this);}c.push({act:"removeNDEFromDS",dsid:a.dsId,oid:a.did,partialRetrieval:{nodes:this.model.docModel.getSourceFilterKeys(this.zonesModel.getHost().k)}});e=mstrmojo.func.wrapMethods(e,this.controller.model.getDatasetsUpdateCallback(),this.controller.getReloadLayoutViewCallback(),k);this.controller.submitUndoRedoUpdates(c,null,e,G.REQUEST_DEFN_DATA);}else{this.controller.removeQuickDE(this,P.copy(K(this,d),{act:"removeQuickDE"}));}},derivedElementsEdit:function T(f,a){if(!a){a=this.getDEInfo(f);}var b=this.model,Y=b.getCellTitleInfo(f).title,Z=a&&a.deObject,e=a&&a.de,X,d,c;if(!Z){X=this.gridData.datasetId||W(b.docModel.datasets,Y.id);d=Y.id;c=Y.n;}this.controller.openDEEditor(this,{dsId:X,attId:d,attName:c,deObj:Z,elemId:e&&e.id,dispName:f.n});},getDEInfo:function V(Y){var Z=this.model,X=Z.getCellTitleInfo(Y).title,a=Y.dei,b,c;if(X.ost!==12033){return null;}b=Z.docModel.getDEObject(X.id);if(b&&a!==undefined){c=b.des[a];}return{deObject:b,de:c,ttl:X};},getOthersDEInfo:function R(Y){var X;L.forEach(Y.des,function(Z){if(Z.t===4){X=Z;return false;}});return X;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","JSONFormat","FormatFill");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumFormatType");var F=mstrmojo.hash,D=mstrmojo.chart,B=D.enums,A=B.EnumFormatType,C=B.EnumFillType;mstrmojo.chart.JSONFormatFill=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFill",mFillType:0,mAlpha:0,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillBevel:null,init:function E(H){H.mFormatType=A.FMT_FILL;this._super(H);F.copyProps(["mFillType","mAlpha","mSimpleColor","mFillGradient","mFillPattern","mFillBevel","id"],H,this);},AppendToJSONObject:function G(N){var I=this.mFillBevel,H=this.mFillGradient,O=this.mFillType,K={FormatType:this.mFormatType,FillType:O,Alpha:this.mAlpha,Bevel:{FillBevelType:I.type,Depth:I.depth,LightAngle:I.lightAngle,Intensity:I.intensity}};switch(O){case C.FT_SIMPLE:var L=this.mSimpleColor;K.SimpleColor={R:L.mR,G:L.mG,B:L.mB};break;case C.FT_TEXTURE:break;case C.FT_PICTURE:break;case C.FT_GRADIENT:var M=H.startGraphColor,J=H.endGraphColor;K.Gradient={StartGraphColor:{R:M.mR,G:M.mG,B:M.mB},EndGraphColor:{R:J.mR,G:J.mG,B:J.mB},Angle:H.angle,HorizontalOffset:H.horizontalOffset,VerticalOffset:H.verticalOffset,GradientType:H.gradientType,EndAlpha:H.endAlpha,Style:H.style,IntermediateColors:H.intermediateColors.slice(0)};break;case C.FT_PATTERN:break;default:break;}N.push(K);}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.Container");mstrmojo.requiresDescs(1442,2140);var C=mstrmojo.dom;mstrmojo.ui.menus.ToolbarEditor=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._IsMenuPopup,mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.menus.ToolbarEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-ToolbarEditor mstrmojo-ui-MenuEditor {@cssClass}" style="..." mstrAttach:mouseover,mouseout,click><div class="te-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},popupConfig:null,children:null,autoCloses:false,locksHover:true,visible:true,onclick:function B(E){C.stopPropogation(null,E.e);},init:function D(F){this._super(F);var E=this.popupConfig,G=E.contents;if(!G){throw new Error("Cannot open editor without editor content.");}this.cssClass=E.cssClass;this.addChildren(G);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Button","mstrmojo.EnumRWUnitType","mstrmojo.vi.models.VIComponentMap","mstrmojo.VisEnum");mstrmojo.requiresDescs(14292,14293,14607);var F=mstrmojo.array,B=12,A=1,E=2,D=mstrmojo.Button.newWebButton,C=mstrmojo.vi.models.VIComponentMap.TYPES;mstrmojo.vi.models._CheckDataCards=mstrmojo.provide("mstrmojo.vi.models._CheckDataCards",{_mixinName:"mstrmojo.vi.models._CheckDataCards",CARDLIMIT:mstrmojo.VisEnum.VIS_CARDLIMIT.NON_GRID,isUnitRestrictedInViz:function(){var G=this.docModel,H=[],I=G.getVIComponent(C.FILTER_PANEL),J=I&&I.parent;H=H.concat((J&&J.getFilterDefinitions())||[]);return H.length;},_addInLargeItems:[],_columnCardinalityCount:1,clearCardinalityFlags:function(){this._addInLargeItems=[];this._columnCardinalityCount=1;},existLargeOrManyItems:function(){return(!!this._addInLargeItems.length||this._columnCardinalityCount>this.CARDLIMIT);},findTotalColumnCount:function(L,M){var N=this,P,I=1,K=0,O=this.getHost().gridData;N._columnCardinalityCount=1;if(O){if(M&&M.id===A){var G=O.rw,Q=G&&G.row;N._columnCardinalityCount=(Q&&Q.tc)||1;return ;}var H=O.ghs,J=H&&H.chs;F.forEach(J&&J.items,function(R){if(R.items){I=Math.max(I,R.items.length);}});}F.forEach(L,function(R){if(M&&M.id===E){M.items.every(function(S){if(S.t===B&&S.did===R.did&&S.card){K++;I=I/S.card;return false;}return true;});}P=R.cardg>0?R.cardg:R.card;if(!P&&R.otp===B&&R.es){P=R.es.length+1;}if(P){I=I*P;}});N._columnCardinalityCount=(K===L.length)?1:I;},findLargeItemsForAddUnits:function(G,H,J){var I=this,K;if((!H&&!I.isUnitRestrictedInViz())||H){G.forEach(function(M){var L=M.cardg>0?M.cardg:M.card;K=!!J?J:I.CARDLIMIT;if(L&&L>K){I._addInLargeItems.push(M.n+" ("+L+")");}});}},warnAndExecCallBackForAddUnits:function(M,L,I){if(this.existLargeOrManyItems()){var J=this._addInLargeItems,K=J.length,H;if(K>1){H=mstrmojo.desc(14292,"The following attributes contain a large number of elements: ##. This action may impact dashboard performance.").replace("##",J);}else{if(K===1){H=mstrmojo.desc(14293,"The attribute ## has too many elements. This action may impact dashboard performance.").replace("##",J);}else{H=mstrmojo.desc(14607,"The dashboard will attempt to display more than ### columns. This can affect performance and stability.").replace("###",this.CARDLIMIT);}}var G=[];if(K&&L){G.push(D(mstrmojo.desc(7977,"Move to Rows"),function(){L();},true));}G.push(D(mstrmojo.desc(212,"Continue"),function(){M();}));G.push(D(mstrmojo.desc(2140,"Cancel"),function(){if(I){mstrmojo._DocToolbarActions.close.call({model:{isnew:false}});}}));mstrmojo.warn(H,{},{buttons:G});J.splice(0,J.length);return ;}M();},checkAndWarnLargeItemsForAddUnits:function(J,M,L,G,I,H,K){this.clearCardinalityFlags();if(!I||I.id===E){this.findLargeItemsForAddUnits(J,H,K);}if(G){this.findTotalColumnCount(J,I);}this.warnAndExecCallBackForAddUnits(M,L,H);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui._HasScroller");var D=mstrmojo.Widget;mstrmojo.ui.ScrollableContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableContainer",markupString:'<div id="{@id}" class="mstrmojo-ui-ScrollableContainer {@cssClass}" style="{@cssText}"><div class="ScrollableContainer-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:D.visibleMarkupMethod,onheightChange:D.heightMarkupMethod,onwidthChange:D.widthMarkupMethod},setupScrollNodes:function C(){this.scrollNode=this.containerNode;},onOpen:function B(){this.updateScrollbars();}});}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.VisMenuList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.VisMenuList",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);},getItemProps:function A(F,D){var E=this._super(F,D);E.tag="a";E.addCls("mstrmojo-ui-Menu-item");return E;},onselectionChange:function B(D){this._super(D);this.parent.data.set("valid",true);}});}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.vi.ui.CalculationWidget=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.vi.ui.CalculationWidget",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-vi-calculation");},_set_selectedItems:function(G,E){var D=(E||[]).map(function(H){return H.t;}),F=this.prevSelection={};D.forEach(function(H){F[H]=true;});this.setSelectedItems(this.items.filter(function(H){return D.indexOf(H.v)>-1;}));},getCalculationTypes:function A(){var F=this.items,G=this.selectedIndices,I=this.prevSelection,E=F.filter(function(K,J){return G[J]&&!I[K.v];}),H=F.filter(function(K,J){return !G[J]&&I[K.v];}),D=function(J){return J.v;};return[E.map(D),H.map(D)];},onselectionChange:function B(D){this._super(D);this.parent.applyCalculation(this.selectedItem.v);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.WidgetMatrix","mstrmojo.array");function D(O){var N,M=[];M.length=O;for(N=0;N<O;N++){M[N]=N;}return M;}function F(Q){var N,P=this.master,R=this.hSlaves,M=this.vSlaves,S=R.length,O=M.length;for(N=0;N<S;N+=1){R[N][Q]();}for(N=0;N<O;N+=1){M[N][Q]();}if(P){P[Q]();}}function J(P){var N,O,M=this.vSlaves,R=M.length,Q=D(this.nRows);for(N=0;N<R;N++){O=M[N];if(O===this.yAxis||O===this.yAxis2){continue;}Q=O.filterRelevantRows(Q,P);}return Q;}function G(P){var N,O,M=this.hSlaves,R=M.length,Q=D(this.nCols);for(N=0;N<R;N++){O=M[N];if(O===this.xAxis||O===this.xAxis2){continue;}Q=O.filterRelevantCols(Q,P);}return Q;}function E(M,U){var S,R,Q,O,P,T,N=this.master;if(this.GMController.checkAttributeIntersection(M,["Rows","Columns","XAxis","YAxis","ColorBy","BreakBy"]).length>0){P=J.call(this,M);T=G.call(this,M);}else{P=[];T=[];}for(S=0,Q=P.length;S<Q;S++){for(R=0,O=T.length;R<O;R++){if(N.filterShapes){N.filterShapes(U,P[S],T[R],M);}}}}function H(P,N,O,M){if(O<P.start||O>P.end){return false;}if(M<N.start||M>N.end){return false;}return true;}function I(M,N,V,W){var U,T,S,Q,Y,P,R,X,O=this.master;if(this.GMController.checkAttributeIntersection(N,["Rows","Columns","XAxis","YAxis","ColorBy","BreakBy"]).length>0){R=J.call(this,N);X=G.call(this,N);}else{R=[];X=[];}for(U=0,S=R.length;U<S;U++){for(T=0,Q=X.length;T<Q;T++){Y=R[U];P=X[T];if(H(V,W,Y,P)&&O.efficientFilterShapes){if(M[Y]===undefined){M[Y]={};}if(M[Y][P]===undefined){M[Y][P]={};}O.efficientFilterShapes(M[Y][P],Y,P,N);}}}}function C(M,W,P,U,X,V){var T,S,R,O,Z,N,Q,Y;if(W.checkAttributeIntersection(M,P).length>0){Q=J.call(this,M);Y=G.call(this,M);}else{Q=[];Y=[];}for(T=0,R=Q.length;T<R;T++){for(S=0,O=Y.length;S<O;S++){Z=Q[T];N=Y[S];if(H(U,X,Z,N)){if(V[Z]===undefined){V[Z]={};}if(V[Z][N]===undefined){V[Z][N]=[];}V[Z][N].push(M);}}}}function A(S,M,U){var R,O,N,T,P,Q;for(T in S){if(S.hasOwnProperty(T)&&T!=="rowIndex"&&T!=="colIndex"){Q=S[T];for(P in Q){if(Q.hasOwnProperty(P)){N=Q[P][M];O=(N&&N.length)||0;for(R=0;R<O;R++){U.push(N[R]);}}}}}}function K(S,R){var P,N,Q,O,M=this.vSlaves,T=M.length;for(P=0;P<T;P++){Q=M[P];if(Q===this.yAxis||Q===this.yAxis2){continue;}O=Q.filterChartsByRow(S,P);if(O){for(N=0;N<O.length;N++){R.push(O[N]);}return true;}}return false;}function B(S,R){var P,N,Q,O,M=this.hSlaves,T=M.length;for(P=0;P<T;P++){Q=M[P];if(Q===this.xAxis||Q===this.xAxis2){continue;}O=Q.filterChartsByCol(S,P);if(O){for(N=0;N<O.length;N++){R.push(O[N]);}return true;}}return false;}mstrmojo.WidgetMatrixManager=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.WidgetMatrixManager",isAsynchronous:false,widthScale:1,heightScale:1,hSlaves:null,vSlaves:null,yAxis:undefined,yAxis2:undefined,xAxis:undefined,xAxis2:undefined,master:undefined,hArr:null,wArr:null,hAccArr:null,wAccArr:null,widthCache:null,heightCache:null,API:null,GMController:null,init:function(M){if(this._super){this._super(M);}this.hArr=[];this.wArr=[];this.hAccArr=[];this.wAccArr=[];this.widthCache=[];this.heightCache=[];this.hSlaves=[];this.vSlaves=[];this.API={getChartWidth:undefined,getChartHeight:undefined};},setMaster:function(M){this.master=M;},setSlaves:function(M,N){this.hSlaves=M;this.vSlaves=N;},setAxises:function(P,M,N,O){this.yAxis=P;this.xAxis=M;this.yAxis2=N;this.xAxis2=O;},setDimensions:function(R,S,Q,N){var P,M=this.heightCache,O=this.widthCache;this.nRows=R;this.nCols=S;this.chartW=Q;this.chartH=N;for(P=0;P<R;P+=1){M[P]=N;}for(P=0;P<S;P+=1){O[P]=Q;}},enableXSplitter:function(N){var M=this.xAxis,O=this.xAxis2;if(M){M.enableSplitter(N);}if(O){O.enableSplitter(N);}},enableYSplitter:function(M){var O=this.yAxis,N=this.yAxis2;if(O){O.enableSplitter(M);}if(N){N.enableSplitter(M);}},enableRowHeaderSplitter:function(M){var N,Q,O,P=this.vSlaves;for(N=0,Q=P.length;N<Q;N++){O=P[N];if(O===this.yAxis||O===this.yAxis2){continue;}O.enableSplitter(M);}},enableColHeaderSplitter:function(M){var O,Q,P,N=this.hSlaves;for(O=0,Q=N.length;O<Q;O++){P=N[O];if(P===this.xAxis||P===this.xAxis2){continue;}P.enableSplitter(M);}},enableInChartRowSplitter:function(M){var N,P,O=this.vSlaves;for(N=0,P=O.length;N<P;N++){O[N].enableRowSplitter(M);}this.master.enableRowSplitter(M);},enableInChartColSplitter:function(M){var O,P,N=this.hSlaves;for(O=0,P=N.length;O<P;O++){N[O].enableColSplitter(M);}this.master.enableColSplitter(M);},doUpdateInChartSplitters:function(P,M){this.master.doUpdateInChartSplitters(true,true);var O,R,Q=this.vSlaves,N=this.hSlaves;for(O=0,R=Q.length;O<R;O++){Q[O].doUpdateInChartSplitters(P,M);}for(O=0,R=N.length;O<R;O++){N[O].doUpdateInChartSplitters(P,M);}},binding:function(){var R,Q,S=this,O=this.master,U=this.hSlaves,P=this.vSlaves,M=U.length,T=P.length,N=this.API;if(!O){return ;}if(!N.getChartWidth){N.getChartWidth=function(Z,b){var X,a,V,Y=0,W=S.widthCache;if(b instanceof Array){a=b[0];V=b[1];}else{a=b;V=b+1;}for(X=a;X<V;X++){Y+=W[X];}return Y;};}if(!N.getChartHeight){N.getChartHeight=function(Z,b){var X,a,W,Y=0,V=S.heightCache;if(Z instanceof Array){a=Z[0];W=Z[1];}else{a=Z;W=Z+1;}for(X=a;X<W;X++){Y+=V[X];}return Y;};}for(R=0;R<M;R+=1){Q=U[R];Q.wArr=O.wArr;Q.wAccArr=O.wAccArr;Q.offset.x=O.offset.x;Q.API.getChartWidth=N.getChartWidth;Q.API.getChartHeight=N.getChartHeight;}for(R=0;R<T;R+=1){Q=P[R];Q.hArr=O.hArr;Q.hAccArr=O.hAccArr;Q.offset.y=O.offset.y;Q.API.getChartWidth=N.getChartWidth;Q.API.getChartHeight=N.getChartHeight;}this.master.API.getChartWidth=N.getChartWidth;this.master.API.getChartHeight=N.getChartHeight;},updateHSlaves:function(){if(!this.master){return ;}var N,R,Q=this.master,M=Q.origin,O=Q.domCanvas.offsetWidth,S=this.hSlaves,P=S.length;for(N=0;N<P;N++){R=S[N];R.updateHLayout(O,M.x);R.updateActiveCharts();R.updateCharts();}},updateVSlaves:function(){if(!this.master){return ;}var Q,S,R=this.master,P=R.origin,M=R.domCanvas.offsetHeight,O=this.vSlaves,N=O.length;for(Q=0;Q<N;Q++){S=O[Q];S.updateVLayout(M,P.y);S.updateActiveCharts();S.updateCharts();}},isVSlaveNodeValid:function(P,N,O){var M=(P===this.yAxis2)||(P===this.yAxis&&!O);if(N==="row"){return !M;}return M;},isHSlaveNodeValid:function(P,O,M){var N=(P===this.xAxis)||(P===this.xAxis2&&!M);if(O==="column"){return !N;}return N;},updateSubSetOfVSlaves:function(R,U){if(!this.master){return ;}var P,O,M=this.master,S=M.origin,T=M.domCanvas.offsetHeight,N=this.vSlaves,Q=N.length;for(P=0;P<Q;P++){O=N[P];if(this.isVSlaveNodeValid(O,R,U)){O.updateVLayout(T,S.y);O.updateActiveCharts();}}},updateSubSetOfHSlaves:function(S,N){if(!this.master){return ;}var R,Q,O=this.master,U=O.origin,P=O.domCanvas.offsetWidth,T=this.hSlaves,M=T.length;for(R=0;R<M;R++){Q=T[R];if(this.isHSlaveNodeValid(Q,S,N)){Q.updateHLayout(P,U.x);Q.updateActiveCharts();}}},drawCharts:function(){var M=this.master;if(!M){return ;}M.updateGrid();this.updateHSlaves();this.updateVSlaves();M.updateCharts();},dismissLassoSelector:function(){F.call(this,"dismissLassoSelector");},updateXYAxis:function(){var P=this.xAxis,N=this.xAxis2,O=this.yAxis,M=this.yAxis2;if(P){P.clearCharts();P.updateCharts();}if(N){N.clearCharts();N.updateCharts();}if(O){O.clearCharts();O.updateCharts();}if(M){M.clearCharts();M.updateCharts();}},scrollTo:function(M,O){var N=this.master;if(!N){return ;}N.scrollTo(M,O);this.translateHSlaves(M);this.translateVSlaves(O);},translateHSlaves:function(M){var N,P=this.hSlaves,O=P.length;for(N=0;N<O;N+=1){P[N].scrollTo(M,undefined);}},translateVSlaves:function(P){var O,N=this.vSlaves,M=N.length;for(O=0;O<M;O+=1){N[O].scrollTo(undefined,P);}},feedChartWidthInfo:function(M){var Q=this.master;if(!Q){return ;}Q.resetHGrid();var N,R,O=this.nCols,S=this.widthCache,P=Q.wArr;S.length=0;S.length=O;for(N=0;N<O;N++){R=M[N];if(R){R*=this.widthScale;S[N]=R;P[N]=R;}else{S[N]=this.chartW;}}Q.initAccWidth();},feedChartHeightInfo:function(M){var P=this.master;if(!P){return ;}P.resetVGrid();var O,R,N=this.nRows,S=this.heightCache,Q=P.hArr;S.length=0;S.length=N;for(O=0;O<N;O++){R=M[O];if(R){R*=this.heightScale;S[O]=R;Q[O]=R;}else{S[O]=this.chartH;}}P.initAccHeight();},resizeBorder:function(M,R,Q){var N=this.master;if(!N){return ;}var S,Y=M.nRows,V=M.nCols,W,U=[],P=[],O=[],X=0,T=0;if(!!Q){for(S=0;S<Y;S++){X+=M.getRowHeight(S);}W=Q/X;this.heightScale*=(1+W);for(S=0;S<Y;S++){if(M.hArr[S]!==undefined){U.push(S);O.push(M.getMiniChartHeight(S,0)-M.getRowHeight(S));}else{M.hArr[S]=M.getMiniChartHeight(S,0);}}N.resizeRow(U,O);M.updateAccHeight(0,Y-1);N.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartHeightScale:this.heightScale});}if(!!R){for(S=0;S<V;S++){T+=M.getColWidth(S);}W=R/T;this.widthScale*=(1+W);for(S=0;S<V;S++){if(M.wArr[S]!==undefined){P.push(S);O.push(M.getMiniChartWidth(0,S)-M.getColWidth(S));}else{M.wArr[S]=M.getMiniChartWidth(0,S);}}this.master.resizeCol(P,O);M.updateAccWidth(0,V-1);N.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartWidthScale:this.widthScale});}N.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},resizeRow:function(M,V,W){var O=this.master;if(!O){return ;}var Q,U=M.nRows,T=M.API.getRowSpan(V,M.depth),N=M.getRowHeight(T),S=W/N,R=[],P=[];this.heightScale*=(1+S);for(Q=0;Q<U;Q++){if(M.hArr[Q]!==undefined){R.push(Q);P.push(M.getMiniChartHeight(Q,0)-M.getRowHeight(Q));}else{M.hArr[Q]=M.getMiniChartHeight(Q,0);}}O.resizeRow(R,P,U);M.updateAccHeight(0,U-1);O.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartHeightScale:this.heightScale});O.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},resizeCol:function(M,V,W){var N=this.master;if(!N){return ;}var R,S=M.nCols,T=M.API.getColSpan(V,M.depth),Q=M.getColWidth(T),U=W/Q,P=[],O=[];this.widthScale*=(1+U);for(R=0;R<S;R++){if(M.wArr[R]!==undefined){P.push(R);O.push(M.getMiniChartWidth(0,R)-M.getColWidth(R));}else{M.wArr[R]=M.getMiniChartWidth(0,R);}}this.master.resizeCol(P,O,S);M.updateAccWidth(0,S-1);this.master.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartWidthScale:this.widthScale});this.master.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},resizeMiniCharts:function(N){var M=this;M.chartWidthScale=N;M.chartHeightScale=N;M.master.resizeMiniCharts(N);},resizeRowCol:function(N,Z,Y){var O=this.master;if(!O){return ;}var S,U=N.nCols,V=N.API.getColSpan(Z,N.depth),R=N.getColWidth(V),P=[],a=[],X=N.nRows,W=N.API.getRowSpan(Z,N.depth),M=N.getRowHeight(W),T=[],Q=[];this.widthScale=Y;this.heightScale=Y;for(S=0;S<X;S++){if(N.hArr[S]!==undefined){T.push(S);Q.push(N.getMiniChartHeight(S,0)-N.getRowHeight(S));}}for(S=0;S<U;S++){if(N.wArr[S]!==undefined){P.push(S);a.push(N.getMiniChartWidth(0,S)-N.getColWidth(S));}}this.master.resizeCol(P,a);this.master.resizeRow(T,Q);this.master.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartWidthScale:this.widthScale,chartHeightScale:this.heightScale});this.master.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},toggleClsByRows:function(N,Q,O,R,U){if(R===undefined){R=true;}var P,M=this.master,T=this.vSlaves,S=T.length;for(P=O;P<S;P++){T[P].toggleClsByRows(N,Q,R,U);}if(M){M.toggleClsByRows(N,Q,R,U);}},toggleClsByCols:function(O,U,P,R,T){if(R===undefined){R=true;}var Q,N=this.master,S=this.hSlaves,M=S.length;for(Q=P;Q<M;Q++){S[Q].toggleClsByCols(O,U,R,T);}if(N){N.toggleClsByCols(O,U,R,T);}},intersectCheck4Row:function(M){return this.master.doRowIntersectionCheck(0,M,true);},intersectCheck4Col:function(M){return this.master.doColIntersectionCheck(0,M,true);},getRowStartDepth:function(Q){var N,P,O,R=this.vSlaves,M=R.length;for(N=0;N<M;N++){P=R[N];if(P===this.yAxis||P===this.yAxis2){break;}O=P.API.getRowSpan(Q,N);if(O[1]===Q){return N;}}return N;},collectDepths:function L(V,U,Q,N,S){var P,O,R,M;if(N==="row"){R=this.vSlaves[V];M=R.API.getRowSpan;}else{if(N==="col"){R=this.hSlaves[V];M=R.API.getColSpan;}}if(!R){throw new Error("vSlave number does not match the depth");}if(R===this.yAxis||R===this.yAxis2||R===this.xAxis||R===this.xAxis2){for(P=U;P<Q;P++){S[P]=V;}return S;}for(P=U;P<Q;P++){var T=M(P,V),O=T[1]-T[0];if(T[1]-T[0]>0){this.collectDepths(V+1,P,P+O,N,S);P+=O;}S[T[1]]=V;}return S;},collectRowDepths:function(M){return this.collectDepths(0,0,M,"row",[]);},collectColDepths:function(M){return this.collectDepths(0,0,M,"col",[]);},getColStartDepth:function(M){var O,Q,R,N=this.hSlaves,P=N.length;for(O=0;O<P;O++){Q=N[O];if(Q===this.xAxis||Q===this.xAxis2){break;}R=Q.API.getColSpan(M,O);if(R[1]===M){return O;}}return O;},getRowOffset:function(N){var M=this.master;return M.getRowPosition(N)-M.origin.y;},getColOffset:function(M){var N=this.master;return N.getColPosition(M)-N.origin.x;},getRowHeight:function(M){return this.master.getRowHeight(M);},getColWidth:function(M){return this.master.getColWidth(M);},filterCharts:function(O){var N,R,M,Q,P=[];if(O.constructor===Array){R=O.length;for(N=0;N<R;N++){Q=O[N];delete Q.hashKey;if(!K.call(this,Q,P)){B.call(this,Q,P);}}}else{for(M in O){if(O.hasOwnProperty(M)){Q=O[M];if(!K.call(this,Q,P)){B.call(this,Q,P);}}}}return P;},isSelectionRuleEqual:function(N,M){},generateHighlightKeys:function(M){},filterShapesDeprecated:function(P){var O,Q,N,M=[];if(P.constructor===Array){Q=P.length;for(O=0;O<Q;O++){delete P[O].hashKey;E.call(this,P[O],M);}}else{for(N in P){if(P.hasOwnProperty(N)){E.call(this,P[N],M);}}}return M;},filterShapes:function(O){if(!O){return[];}var S,R,Q,P,N=this.master,T=N.doRowIntersectionCheck(),V=N.doColIntersectionCheck(),U=this.GMController,M=U.highLightShapeIndex,W=[];if(U.resetHighLightIndex){M=U.highLightShapeIndex={};this.selectHighLightShapes(M,O,T,V);}for(S=T.start,Q=T.end;S<=Q;S++){for(R=V.start,P=V.end;R<=P;R++){if(M[S]&&M[S][R]){N.selectHighLightShapes(M[S][R],S,R,W);}}}return W;},selectHighLightShapes:function(M,O,U,Y){var S,R,X,Z,Q,T,W=this.GMController,N=this.master,P=["Rows","Columns","XAxis","YAxis","ColorBy","BreakBy"],V={};if(O.constructor===Array){R=O.length;for(S=0;S<R;S++){delete O[S].hashKey;C.call(this,O[S],W,P,U,Y,V);}}else{for(X in O){if(O.hasOwnProperty(X)){C.call(this,O[X],W,P,U,Y,V);}}}for(Z in V){if(V.hasOwnProperty(Z)){T=V[Z];if(M[Z]===undefined){M[Z]={};}for(Q in T){if(T.hasOwnProperty(Q)){if(M[Z][Q]===undefined){M[Z][Q]={};}N.efficientFilterShapes(M[Z][Q],Z,Q,T[Q]);}}}}},getTheRightKey:function(b,Y){var T,M,R,O,a=this.GMController,U=a.view.model,S,X=a.getAttributeIds(),V,c,Z,N,W,Q=false,P={};for(N in Y){W=Y[N];if(X.hasOwnProperty(N)){P[N]=W;continue;}Q=true;S=U.getLinkedAttributes(N)||[];M=S.length;for(T=0;T<M;T++){if(X.hasOwnProperty(S[T])){V=S[T];break;}}Z=X[V]||[];M=Z.length;for(T=0;T<M;T++){O=W.length;for(R=0;R<O;R++){if(U.compareElementsId(Z[T].id,W[R].id)){c=Z[T];break;}}if(c){break;}}P[V]=[c];}if(!Q){return b;}return this.master.getSelectionHash(P);},resetShapeHighlightMap:function(){},constructShapeHighlightMap:function(){},resize:function(O,M){var P,S,Q=this.master,R=this.hSlaves,N=this.vSlaves;if(O===undefined){O=0;}if(M===undefined){M=0;}if(O!==0){S=R.length;for(P=0;P<S;P++){R[P].resize(O,0);}}if(M!==0){S=N.length;for(P=0;P<S;P++){N[P].resize(0,M);}}if(O!==0||M!==0){Q.resize(O,M);}},queryRowHeight:function(M){var P=this,O=this.master,N=function(Q,R){if(O.isRowInSight(Q)){P.resizeRow(P.master,Q,R);P.doUpdateChartsGlobally();}};},queryColWidth:function(N){var P=this,O=this.master,M=function(R,Q){if(O.isColInSight(R)){P.resizeCol(P.master,R,Q);P.doUpdateChartsGlobally();}};},queryMiniChart:function(N,M){var P=this.master,O=function(R,Q){if(P.isRowInSight(R)&&P.isColInSight(Q)){P.doUpdateCharts(R,R,Q,Q);}};},queryYAxis:function(N){var M=this.yAxis,O=function(P){M.doUpdateCharts(P,P,0,0);};},queryXAxis:function(N){var O=this.xAxis,M=function(P){O.doUpdateCharts(0,0,P,P);};},queryRowHeader:function(O,P){var M=this.vSlaves[P],N=function(Q){M.doUpdateCharts(Q,Q,0,0);};},queryColHeader:function(M,P){var O=this.hSlaves[P],N=function(Q){O.doUpdateCharts(0,0,Q,Q);};},queryRowSpan:function(M){var P=this,O=this.master,R=this.vSlaves,Q=R.length,N=function(T){var S;for(S=0;S<Q-1;S+=1){R[S].doUpdateCharts(T,T,0,0);}};},queryColSpan:function(M){var N=this.hSlaves,P=N.length,O=function(){var Q;for(Q=0;Q<P-1;Q+=1){N[Q].doUpdateCharts(0,0,M,M);}};},filterRowHeaders:function(O,P,Q,N){var M,R=this.vSlaves;return R[Q].filterRowsByType(O,P,N);},filterColHeaders:function(R,M,Q,P){var O,N=this.hSlaves;return N[Q].filterColsByType(R,M,P);}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.GraphMatrixHelper","mstrmojo.vi.viz.GoogleMapHelper","mstrmojo.vi.viz.ESRIMapHelper","mstrmojo.vi.viz.KnownVisualizations","mstrmojo.vi.util.ThresholdUtils","mstrmojo.gm.GMEnums");var N=mstrmojo,K=N.array,P=N.vi.viz,B=P.GraphMatrixHelper,A=P.EnumDSSDropZones,H=P.KnownVisualizations,I=N.vi.util.ThresholdUtils,L=mstrmojo.gm.EnumABLDirection;function C(Q){return Q&&Q.getHostModel&&Q.getHostModel();}function M(R){var Q=false;if(R.t!==4){K.forEach(R.fs||[],function(S){if(S.ftr||S.bftp===1||S.bftp===8||S.bftp===9){Q=true;return false;}});}return Q;}function F(o,V,s,Z,c){var U=s.dz,q=s.gsi||{},R=[],W=false,Q=false,S=false,a=function(t){return t.shape==="Pie"||t.shape==="Ring";},n=function(){var t=Z.getHost();return t&&t.GMController&&t.GMController.isBubbleOrScatter();},h=function(t,y){R.push({act:"addDropZoneUnit",zoneId:t,datasetId:V,unitId:o.did,unitType:o.t,unitPos:y||0});W=true;S=(t===A.ColorBy);Q=(t===A.AdditionalMetrics);var x=["Reserved","Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy"],w=x[t],u=o.t===4?"TemplateMetric":"TemplateUnit";if(U[w]){if(!U[w][u]){U[w][u]=[];}U[w][u].push(o);}},g=function(t,u){R.push({act:"removeDropZoneUnit",zoneId:t,unitId:u.did,unitType:u.t});},l=function(t){R.push({act:"addDropZoneUnit",zoneId:t,unitId:"00000000000000000000000000000000",unitType:0});},p=new P.GraphMatrixHelper({data:s}),r=function(t){if(!p.shape){p.shape=t;c=true;}},X=function(t,AA){h(t,AA);if(!p.metricsDropZone){if(t===A.XAxis&&p.xAxisObjects.length){l(A.Columns);}else{if(t===A.YAxis&&p.yAxisObjects.length){l(A.Rows);}}}var x=Z.getHost(),y=x.GMController,w,z=y.getChartInfo(),u={dndGM:false};if(y.shallWeUseGroupInfo){w=y.getGroupInfo();if((z.dirc===L.VERTICAL&&t===A.YAxis)||(z.dirc===L.HORIZONTAL&&t===A.XAxis)){w=Z.fillGroupInfo(u,w,o.did,true);}y.setGroupInfo(w);c=true;}};p.setData(s.dz);p.setMetricsDropZone(s.dz);if(o.t===4){if(p.exists(o,"yAxisObjects")||p.exists(o,"xAxisObjects")||p.exists(o,"sizeByObjects")||p.exists(o,"colorByObjects")||p.exists(o,"angleObjects")){var k=!p.exists(o,"yAxisObjects")&&!p.exists(o,"xAxisObjects");if(k&&(!p.yAxisObjects.length||p.yAxisObjects[0].t===4)){X(A.YAxis);}else{if(k&&(!p.xAxisObjects.length||p.xAxisObjects[0].t===4)){X(A.XAxis);}else{if(!p.angleObjects.length&&a(p)){h(A.Angle);}else{if(!p.colorByObjects.length){h(A.ColorBy);}else{if(!p.sizeByObjects.length||(!p.exists(o,"sizeByObjects")&&n())){h(A.SizeBy);}}}}}}else{if(!p.angleObjects.length&&a(p)){h(A.Angle);}else{if((!p.yAxisObjects.length)&&(!p.xAxisObjects.length)){X(A.YAxis);r(B.PROP_SHAPE_BAR);}else{if(p.yAxisObjects.length&&!p.xAxisObjects.length){if(!p.exists(o,"yAxisObjects")){X(A.XAxis);r(Z.isMetricZone(A.YAxis)?B.PROP_SHAPE_CIRCLE:B.PROP_SHAPE_BAR);}}else{if((!p.yAxisObjects.length)&&p.xAxisObjects.length){if(!p.exists(o,"xAxisObjects")){X(A.YAxis);r(Z.isMetricZone(A.XAxis)?B.PROP_SHAPE_CIRCLE:B.PROP_SHAPE_BAR);}}else{if((p.xAxisObjects[0].t!==4)&&(p.yAxisObjects[0].t===4)&&!p.exists(o,"yAxisObjects")&&!p.exists(o,"sizeByObjects")&&!p.exists(o,"colorByObjects")){X(A.YAxis);if(p.metricsDropZone!==B.PROP_COLUMNS&&p.metricsDropZone!==B.PROP_ROWS&&(!p.colorByObjects.length||p.colorByObjects[0].t!==4)){l(A.ColorBy);}}else{if((p.xAxisObjects[0].t===4)&&(p.yAxisObjects[0].t!==4)&&!p.exists(o,"xAxisObjects")&&!p.exists(o,"sizeByObjects")&&!p.exists(o,"colorByObjects")){X(A.XAxis);if(p.metricsDropZone!==B.PROP_COLUMNS&&p.metricsDropZone!==B.PROP_ROWS&&(!p.colorByObjects.length||p.colorByObjects[0].t!==4)){l(A.ColorBy);}}else{if((p.xAxisObjects[0].t===4)&&(p.yAxisObjects[0].t===4)&&!p.exists(o,"xAxisObjects")&&!p.exists(o,"yAxisObjects")&&!p.exists(o,"sizeByObjects")&&!p.exists(o,"colorByObjects")){if(!p.colorByObjects.length&&p.metricsDropZone!==B.PROP_COLORBY){h(A.ColorBy);}else{if(!p.sizeByObjects.length&&p.shape!=="Area"){h(A.SizeBy);}else{if(p.xAxisObjects.length===1){X(A.XAxis);}else{if(p.yAxisObjects.length===1){X(A.YAxis);}else{if(p.sizeByObjects.length===1&&p.shape!=="Area"){h(A.SizeBy);}else{if(!p.exists(o,"tooltipMetrics")){h(A.AdditionalMetrics);}}}}}}}else{if(!p.colorByObjects.length&&p.metricsDropZone!==B.PROP_COLORBY){h(A.ColorBy);}else{if(!p.sizeByObjects.length){h(A.SizeBy);}else{if(!p.exists(o,"tooltipMetrics")){h(A.AdditionalMetrics);}}}}}}}}}}if((!Q)&&W){if(p.exists(o,"tooltipMetrics")){var f=K.find(p.tooltipMetrics,"did",o.did);if(f>-1){p.tooltipMetrics.splice(f,1);g(A.AdditionalMetrics,o);}}}}if(W&&S){var e=Z.getHost();I.addThresholds(e.model,e,e.node,o,R);}}else{if((q.rows||[]).concat(q.cols||[]).some(function(t){return t.did===o.did;})){if(!p.colorByObjects.length||(p.colorByObjects[0].t!==4&&!p.exists(o,"colorByObjects"))){h(A.ColorBy);}}else{if(!p.sliceObjects.length&&a(p)){h(A.SliceBy);if(!p.colorByObjects.length){h(A.ColorBy);}}else{if((!p.yAxisObjects.length)&&(!p.xAxisObjects.length)){h(A.XAxis);r(M(o)?B.PROP_SHAPE_LINE:B.PROP_SHAPE_BAR);}else{if((p.yAxisObjects.length)&&(!p.xAxisObjects.length)){h(A.XAxis);r(M(o)&&p.yAxisObjects[0]===4?B.PROP_SHAPE_LINE:B.PROP_SHAPE_BAR);}else{if((!p.yAxisObjects.length)&&(p.xAxisObjects.length)){h(A.YAxis);r(M(o)&&p.xAxisObjects[0]===4?B.PROP_SHAPE_LINE:B.PROP_SHAPE_BAR);}else{if((p.xAxisObjects[0].t!==4)&&(p.yAxisObjects[0].t===4)){if(!p.colorByObjects.length){h(A.ColorBy);if(!p.exists(o,"breakByObjects")){h(A.BreakBy);}}else{h(A.Columns);}}else{if((p.xAxisObjects[0].t===4)&&(p.yAxisObjects[0].t!==4)){if(!p.colorByObjects.length){h(A.ColorBy);if(!p.exists(o,"breakByObjects")){h(A.BreakBy);}}else{h(A.Rows);}}else{if((p.xAxisObjects[0].t!==4)&&(p.yAxisObjects[0].t!==4)){h(A.Columns);}else{if((p.xAxisObjects[0].t===4)&&(p.yAxisObjects[0].t===4)){if(!p.colorByObjects.length){h(A.ColorBy);if(!p.exists(o,"breakByObjects")){h(A.BreakBy);}}else{if(!p.columnObjects.length&&p.rowObjects.length&&p.rowObjects[0].t!==4){h(A.Rows);}else{h(A.Columns);}}}}}}}}}}}}var Y=[];if(R.length){var d=Z.getUpdateTemplateAction(R);var T=Z.docModel,j=T.controller.view.builder,b=j.getLayoutVIMap(T.getCurrentLayoutKey()).getComponent(mstrmojo.vi.models.VIComponentMap.TYPES.FILTER_STACK);if(b){d.partialRetrieval.nodes.push(b.k);}Y.push(d);}if(c){Y.push({act:"setProperty",nodeKey:s.k,prs:"FormattingWidget",pri:4,v:mstrmojo.string.encodeXMLAttribute(p.getXml())});}if(Y.length){Z.clearCardinalityFlags();Z.findLargeItemsForAddUnits([o]);}return Y;}function J(T,V,U,Q){var R,S=true;function W(a,c,Z){var b=Q.getZoneModelByZoneId(a);if(Q.getUnitIndexInZone(b,T)===-1&&(!Z||Z(b))){var Y=c?0:b.items.length;R=Q.getAddItemActions(b,[T],Y,false,c?b.items[Y]:null,V);b.items.push(T);return false;}return true;}function X(Y){return Y.items.length===0;}if(!Q.isMetric(T)){S=W(A.ColorBy,false,function(Y){return X(Y)&&Q.getItemCountInZone(A.Grouping)>=2;});S=S&&W(A.Grouping);if(R){Q.clearCardinalityFlags();Q.findLargeItemsForAddUnits([T]);}}else{S=W(A.ColorBy,false,X);S=S&&W(A.SizeBy,false,X);S=S&&W(A.SizeBy,true,function(Y){return Y.items[0].did===Q.getZoneModelByZoneId(A.ColorBy).items[0].did;});S=S&&W(A.AdditionalMetrics,false,function(){return Q.getUnitIndexInZone(Q.getZoneModelByZoneId(A.SizeBy),T)===-1&&Q.getUnitIndexInZone(Q.getZoneModelByZoneId(A.ColorBy),T)===-1;});}return R?[Q.docModel.getDataService().getUpdateTemplateAction(Q.getHost().k,R)]:[];}function D(S,U,T,Q){var R=null,V=!Q.isMetric(S)?[A.FromItem,A.ToItem]:[A.ColorBy,A.ItemSize,A.SizeBy];K.forEach(V,function(W){var X=Q.getZoneModelByZoneId(W);if(X.items.length===0){R=Q.getAddItemActions(X,[S],0,U);X.items.push(S);return false;}});if(R){Q.clearCardinalityFlags();Q.findLargeItemsForAddUnits([S]);return[Q.docModel.getDataService().getUpdateTemplateAction(Q.getHost().k,R)];}return[];}function G(S,U,T,Q){var R=null,V=!Q.isMetric(S)?[A.GeoAttribute,A.Layout]:[A.ColorBy,A.SizeBy,A.AdditionalMetrics];K.forEach(V,function(W){var X=Q.getZoneModelByZoneId(W);if((W===A.AdditionalMetrics||X.items.length===0)&&Q.isZoneAvalaible(W)){R=Q.getAddDropZoneUnitsActions(X,[S],0,{datasetId:U});return false;}});return R?[Q.docModel.getDataService().getUpdateTemplateAction(Q.getHost().k,R)]:[];}function E(h,V,l,Z,S){var j=l.gsi||{},Y=Z.getHost(),a=[],c=false,e=Z.getZoneModelByZoneId(A.ColorBy),f=Z.getZoneModelByZoneId(A.SizeBy),T=Z.getZoneModelByZoneId(A.AdditionalMetrics),g=mstrmojo.vi.viz,b=g.MapHelper,W=false,X=function(r,q,p,s){if(r){a.push(Z.getUpdateTemplateAction([{act:"addDropZoneUnit",zoneId:p,unitId:r,unitType:q,datasetId:s}]));if(p===A.ColorBy){a.push(Z.getUpdateTemplateAction(I.addThresholds(Y.model,Y,Y.node,h)));}}switch(p){case A.GeoAttribute:S.geoAttribute=r;break;case A.Latitude:S.latitude=r;break;case A.Longitude:S.longitude=r;break;case A.ColorBy:S.colorBy=r;break;case A.SizeBy:S.sizeBy=r;break;case A.AdditionalMetrics:S.tooltip.push(r);break;}W=true;},o=function(r,q,p){if(r){a.push(Z.getUpdateTemplateAction([{act:"removeDropZoneUnit",zoneId:p,unitId:r,unitType:q}]));}switch(p){case A.geoAttribute:S.geoAttribute="";break;case A.Latitude:S.latitude="";break;case A.Longitude:S.longitude="";break;case A.ColorBy:S.colorBy="";break;case A.SizeBy:S.sizeBy="";break;case A.AdditionalMetrics:S.tooltip=K.filter(S.tooltip,function(s){return s!==r;},{max:S.tooltip.length});break;}},k=function(p,q){a.push(Z.getUpdateTemplateAction({act:"addForm",unitId:p,attFormId:q,unitPos:1}));};S.setWidget(Y);K.forEach((j.rows||[]).concat(j.cols||[]),function(p){if(p.did===h.did){c=true;return false;}});if(c){return[];}switch(h.t){case 4:if(e&&!e.items.length){X(h.did,h.t,A.ColorBy,V);}else{if(f&&!f.items.length){X(h.did,h.t,A.SizeBy,V);}else{if(T){X(h.did,h.t,A.AdditionalMetrics,V);}}}break;default:var Q=!S.geoAttribute&&!S.latitude&&!S.longitude,R=S.getGeoForm(h,function(p){return b.isGeoRoleSupportArea(p.fgr);}),d=function(){var p=S.mapType,q=S.tooltip;if(!b.canShowSizeByZone(p)&&S.sizeBy&&q.indexOf(S.sizeBy)<0){X(S.sizeBy,4,A.AdditionalMetrics);o(S.sizeBy,4,A.SizeBy);}if(!b.canShowColorByZone(p)&&S.colorBy&&q.indexOf(S.colorBy)<0){X(S.colorBy,4,A.AdditionalMetrics);o(S.colorBy,4,A.ColorBy);}};if(Q&&S.supportAreaMap&&R){S.setMapType(b.MTP_AREA);S.setUseAttributeForm(false);X(h.did,h.t,A.GeoAttribute,V);k(h.did,R.fid);}else{var U=S.getLatitudeForm(h),n=S.getLongitudeForm(h);if(U&&n&&Q){X(h.did,h.t,A.GeoAttribute,V);S.setMapType(b.getMapTypeByElementCount(h.card));S.setUseAttributeForm(true);k(h.did,U.fid);k(h.did,n.fid);X(U.fid,21,A.Latitude,V);X(n.fid,21,A.Longitude,V);}else{if((U||b.isLatitude(h.n))&&(!n&&!b.isLongitude(h.n))&&!S.geoAttribute&&!S.latitude){X(h.did,h.t,A.Latitude,V);S.setMapType(b.getMapTypeByElementCount(h.card));S.setUseAttributeForm(false);}else{if((!U&&!b.isLatitude(h.n))&&(n||b.isLongitude(h.n))&&!S.geoAttribute&&!S.longitude){X(h.did,h.t,A.Longitude,V);S.setMapType(b.getMapTypeByElementCount(h.card));S.setUseAttributeForm(false);}else{if(S.tooltip.indexOf(h.did)<0){X(h.did,h.t,A.AdditionalMetrics,V);}}}}}if(W){d();}break;}if(W){a.push({act:"setProperty",nodeKey:l.k,prs:"FormattingWidget",pri:4,v:mstrmojo.string.encodeXMLAttribute(S.getXml())});}return a;}function O(b,U,T,Z){var Y=T.gsi||{},c=Y.rows||[],W=Y.cols||[],V=Y.mx||[],S=[],R,X,Q,a;Z.clearCardinalityFlags();if(K.find(c.concat(W).concat(V),"did",b.did)===-1){a=!!K.filterOne(W,function(d){return d.t!==4;});Q=!!K.filterOne(c,function(d){return d.t!==4;});if(b.t===4){R=-1;if(V.length===0){if(!Q&&!!a){R=1;X=c.length;}else{R=2;X=W.length;}}X=V.length;}else{if(a&&!Q){R=2;X=W.length;Z.findLargeItemsForAddUnits([b]);Z.findTotalColumnCount([b],null);}else{R=1;X=c.length;}}S.push({act:"updateTemplate",keyContext:T.k,actions:[Z.getHost().model.getAddTemplateUnitAction(b,U,R,X)]});}return S;}mstrmojo.vi.models.DatasetDoubleClick=mstrmojo.provide("mstrmojo.vi.models.DatasetDoubleClick",{addObject:function(X,S,W){var R=C(W),Q=[],V=W.getHost();if(!X||!R){return Q;}var Y=R.visName||"Grid";switch(H.getDefinition(Y).id){case H.GRAPHMATRIX:Q=F(X,S,R,W);break;case H.ESRIMAP:Q=E(X,S,R,W,new P.ESRIMapHelper({data:R}));break;case H.GOOGLEMAP:Q=E(X,S,R,W,new P.GoogleMapHelper({data:R}));break;case H.HEATMAP:Q=J(X,S,R,W);break;case H.NETWORK:Q=D(X,S,R,W);break;case H.IMAGELAYOUT:Q=G(X,S,R,W);break;case H.CUSTOM:Q=(W.getCustomDropZones&&W.getCustomDropZones())?[]:O(X,S,R,W);break;default:Q=O(X,S,R,W);break;}if(S!==R.datasetId){var U=W.getHost().model.data.gsi;var T=U?(U.rows||[]).concat(U.cols||[]).concat(U.mx||[]):[];if(S&&(Q.length||mstrmojo.array.find(T,"did",X.did)!==-1)){Q.push({act:"editNode",nodeKey:V.k,datasetId:S});}}return Q;}});}());(function(){mstrmojo.requiresClsP("mstrmojo","Button","Box","vi.ui.CalculationWidget","mstr.EnumFunction");mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869);var C=mstrmojo.desc,B=mstrmojo.mstr.EnumFunction,I=4,E=5,H=6,F=7;var D={SINGLE:[{n:C(358,"Absolute"),v:B.FunctionAbs}],PAIR:[{n:C(6017,"Add"),v:B.FunctionAdd},{n:C(2122,"Average"),v:B.FunctionAverage},{n:C(5868,"Least"),v:B.FunctionLeast},{n:C(5869,"Greatest"),v:B.FunctionGreatest},{n:"A-B",v:B.FunctionMinus+";0"},{n:"B-A",v:B.FunctionMinus+";1"},{n:"A/B",v:B.FunctionDivide+";0"},{n:"B/A",v:B.FunctionDivide+";1"}],MORE:[{n:C(6017,"Add"),v:B.FunctionAdd},{n:C(2122,"Average"),v:B.FunctionAverage},{n:C(5868,"Least"),v:B.FunctionLeast},{n:C(5869,"Greatest"),v:B.FunctionGreatest}]};mstrmojo.vi.ui.CalculationMenuEditor=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.vi.ui.CalculationMenuEditor",onSubmenuOpen:function G(){var P=this.parent,O=P.de,Q=O&&O.es,J=(Q&&Q.length)||P.cellsNum,L=(J===1)?"SINGLE":((J===2)?"PAIR":"MORE"),N=D[L],K=(O&&O.func)||P.func,M,R;if(L==="PAIR"){if(O){N[I].n=Q[0].n+" - "+Q[1].n;N[E].n=Q[1].n+" - "+Q[0].n;N[H].n=Q[0].n+" / "+Q[1].n;N[F].n=Q[1].n+" / "+Q[0].n;}else{R=this.xtab.selCells;N[I].n=R[0].innerText+" - "+R[1].innerText;N[E].n=R[1].innerText+" - "+R[0].innerText;N[H].n=R[0].innerText+" / "+R[1].innerText;N[F].n=R[1].innerText+" / "+R[0].innerText;}}this.checkList.set("items",N);for(M in N){if(typeof N[M].v==="string"&&N[M].v.indexOf(K)===0&&N[M].v.indexOf(";0")>0){this.checkList.set("selectedItem",N[M]);break;}if(N[M].v===K){this.checkList.set("selectedItem",N[M]);break;}}},applyCalculation:function A(L){var K=this.xtab,J=this.parent;if((J.de&&J.de.func===L)||(typeof L==="string"&&L.indexOf(J.de.func)===0&&L.indexOf(";0")>0)){return ;}if(this.parent.isEdit===true){K.editDECalculation(J.node,L);}else{K.derivedElementCalculation(J.node,L);}this.onSubmenuClosed();},children:[{scriptClass:"mstrmojo.vi.ui.CalculationWidget",alias:"checkList"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasLayout","mstrmojo.css");var B=mstrmojo.css;mstrmojo.vi.ui.editors.EditorGroup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",layoutConfig:{w:{containerNode:"100%"},xt:true},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},showDivider:true,isNested:false,isContainer:false,init:function D(E){this._super(E);B.addWidgetCssClass(this,["mstrmojo-vi-EditorGroup","ctrl-group"]);},preBuildRendering:function A(){var E=[];if(this.showDivider){E.push("divide");}if(this.isContainer){E.push("container");}if(E.length){B.addWidgetCssClass(this,E);}return this._super();},getLayoutOffsets:function C(){return{h:0,w:this.isNested?0:18};}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.ToolbarEditor","mstrmojo.hash");mstrmojo.ui.menus.ToolbarEditorConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.ToolbarEditorConfig",cssClass:"",contents:null,init:function C(D){this._super(D);this.initBindings();},clear:function A(){this._super();this.contents=null;},newInstance:function B(D){return new mstrmojo.ui.menus.ToolbarEditor(mstrmojo.hash.copy({popupConfig:this},D));}});}());(function(){mstrmojo.requiresCls("mstrmojo.graph._MobileGraphAreaHelper","mstrmojo.GraphBase","mstrmojo.dom");var AA=0,Ap=0,A9=0,AZ=1,e=2,Y=11,W=12,AQ=13,BF=101,k=102,Aw=111,AX=112,BA=113,j=121,A1=122,Aa=131,s=132,AD=201,H=301,F=302,x=303,p=311,f=321,A5=322,B=401,Az=402,Ag=501,J=502,AL=503,AJ=511,o=512,M=513,BD=514,Ao=515,BG=521,AP=522,Q=601,N=701,AS=801;var Af=0,I=9,AF=10,Z=14;var u=0,AH=1,G=2,Ae=3,Ab=4;var l=0,Ay=1,Ad=2;var U=2,c=3;var Av=0,AK=3,A8=4,t=6,E=13,A=14,D=101;var A4=0,Au=1,Aj=2;var Ac=3.14159265;var d,a;var As=0,A2=1,Am=2,R=3,AB=4,BE=5,z=6,AU=7,AR=8,AW=9;var A3=100;var A6=[[-100,-100,100,-100,100,100,-100,100],[-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[],[0,-100,100,0,0,100,-100,0],[0,-100,100,100,-100,100],[-100,-100,100,-100,100,100,-100,100],[0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100]];function An(Ce,B0,Cz,By){var Be=Cz.InstructionList,B7=Be.length,Bm,CC,Bx,Bw,CF,Bz,Bd,Bi,BM,BQ,CE,B5,BU,Ct,CL,CG,Cx;for(CC=0;CC<B7;CC++){Bm=Be[CC];if(typeof (Bm)==="undefined"){continue;}switch(Bm.Ins){case A9:break;case AZ:Ce.save();break;case e:Ce.restore();break;case Y:Ce.clip();break;case W:Ce.scale(Bm.X,Bm.Y);break;case AQ:if(Bm.Radian!==0){Ce.translate(Bm.Anchor.X,Bm.Anchor.Y);Ce.rotate(Bm.Radian);Ce.translate(-Bm.Anchor.X,-Bm.Anchor.Y);}break;case BF:Ce.beginPath();break;case k:Ce.closePath();break;case Aw:if(Cz.IsAnimated===0){Ce.moveTo(Bm.X,Bm.Y);}else{if(Bm.CA[0]==0){Bx=Bm.X[0]*(1-B0)+Bm.X[1]*B0;Bw=Bm.Y[0]*(1-B0)+Bm.Y[1]*B0;Ce.moveTo(Bx,Bw);}else{var Bk=Math.sqrt((Bm.X[0]-Bm.BPX[0])*(Bm.X[0]-Bm.BPX[0])+(Bm.Y[0]-Bm.BPY[0])*(Bm.Y[0]-Bm.BPY[0]));var Bh=Math.sqrt((Bm.X[1]-Bm.BPX[0])*(Bm.X[1]-Bm.BPX[0])+(Bm.Y[1]-Bm.BPY[0])*(Bm.Y[1]-Bm.BPY[0]));var CI=Math.sqrt((Bm.X[0]-Bm.X[1])*(Bm.X[0]-Bm.X[1])+(Bm.Y[0]-Bm.Y[1])*(Bm.Y[0]-Bm.Y[1]));var Bj=Math.acos((Bk*Bk+Bh*Bh-CI*CI)/(2*Bk*Bh));var C2=(Bm.X[0]-Bm.BPX[0])*Math.cos(Bj)-(Bm.Y[0]-Bm.BPY[0])*Math.sin(Bj)+Bm.BPX[0]-Bm.X[1];if(C2<-0.01||C2>0.01){Bj=2*Ac-Bj;}Bx=(Bm.X[0]-Bm.BPX[0])*Math.cos(B0*Bj)-(Bm.Y[0]-Bm.BPY[0])*Math.sin(B0*Bj)+Bm.BPX[0];Bw=(Bm.Y[0]-Bm.BPY[0])*Math.cos(B0*Bj)+(Bm.X[0]-Bm.BPX[0])*Math.sin(B0*Bj)+Bm.BPY[0];Ce.moveTo(Bx,Bw);}}break;case AX:if(Cz.IsAnimated===0){Ce.lineTo(Bm.X,Bm.Y);}else{if(Bm.CA[0]==0){Bx=Bm.X[0]*(1-B0)+Bm.X[1]*B0;Bw=Bm.Y[0]*(1-B0)+Bm.Y[1]*B0;Ce.lineTo(Bx,Bw);}else{var Bk=Math.sqrt((Bm.X[0]-Bm.BPX[0])*(Bm.X[0]-Bm.BPX[0])+(Bm.Y[0]-Bm.BPY[0])*(Bm.Y[0]-Bm.BPY[0]));var Bh=Math.sqrt((Bm.X[1]-Bm.BPX[0])*(Bm.X[1]-Bm.BPX[0])+(Bm.Y[1]-Bm.BPY[0])*(Bm.Y[1]-Bm.BPY[0]));var CI=Math.sqrt((Bm.X[0]-Bm.X[1])*(Bm.X[0]-Bm.X[1])+(Bm.Y[0]-Bm.Y[1])*(Bm.Y[0]-Bm.Y[1]));var Bj=Math.acos((Bk*Bk+Bh*Bh-CI*CI)/(2*Bk*Bh));var C2=(Bm.X[0]-Bm.BPX[0])*Math.cos(Bj)-(Bm.Y[0]-Bm.BPY[0])*Math.sin(Bj)+Bm.BPX[0]-Bm.X[1];if(C2<-0.02||C2>0.02){Bj=2*Ac-Bj;}Bx=(Bm.X[0]-Bm.BPX[0])*Math.cos(B0*Bj)-(Bm.Y[0]-Bm.BPY[0])*Math.sin(B0*Bj)+Bm.BPX[0];Bw=(Bm.Y[0]-Bm.BPY[0])*Math.cos(B0*Bj)+(Bm.X[0]-Bm.BPX[0])*Math.sin(B0*Bj)+Bm.BPY[0];Ce.lineTo(Bx,Bw);}}break;case BA:if(Cz.IsAnimated===0){Ce.bezierCurveTo(Bm.CP1X,Bm.CP1Y,Bm.CP2X,Bm.CP2Y,Bm.X,Bm.Y);}else{cp1x=Bm.CP1X[0]*(1-B0)+Bm.CP1X[1]*B0;cp1y=Bm.CP1Y[0]*(1-B0)+Bm.CP1Y[1]*B0;cp2x=Bm.CP2X[0]*(1-B0)+Bm.CP2X[1]*B0;cp2y=Bm.CP2Y[0]*(1-B0)+Bm.CP2Y[1]*B0;Bx=Bm.X[0]*(1-B0)+Bm.X[1]*B0;Bw=Bm.Y[0]*(1-B0)+Bm.Y[1]*B0;Ce.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,Bx,Bw);}break;case j:if(Cz.IsAnimated===0){Ce.rect(Bm.X,Bm.Y,Bm.W,Bm.H);}else{Bx=Bm.X[0]*(1-B0)+Bm.X[1]*B0;Bw=Bm.Y[0]*(1-B0)+Bm.Y[1]*B0;Bz=Bm.W[0]*(1-B0)+Bm.W[1]*B0;CF=Bm.H[0]*(1-B0)+Bm.H[1]*B0;Ce.rect(Bx,Bw,Bz,CF);}break;case A1:if(Cz.IsAnimated===0){if(Bm.EndAngle==6.283){Bm.EndAngle=2*Ac;}Ce.arc(Bm.X,Bm.Y,Bm.Radius,Bm.StartAngle,Bm.EndAngle,Bm.AntiClockwise);}else{if(Bm.EndAngle[0]==6.283){Bm.EndAngle[0]=2*Ac;}if(Bm.EndAngle[1]==6.283){Bm.EndAngle[1]=2*Ac;}Ce.arc(Bm.X[0]*(1-B0)+Bm.X[1]*B0,Bm.Y[0]*(1-B0)+Bm.Y[1]*B0,Bm.Radius[0]*(1-B0)+Bm.Radius[1]*B0,Bm.StartAngle[0]*(1-B0)+Bm.StartAngle[1]*B0,Bm.EndAngle[0]*(1-B0)+Bm.EndAngle[1]*B0,Bm.AntiClockwise[0]);}break;case s:if(Cz.IsAnimated==1){var Bs=Bm.Angle[0]*(1-B0)+Bm.Angle[1]*B0;var Bc=Bm.NeedleSize[0];var CJ=Bm.BPX[0];var CH=Bm.BPY[0];var BN=Bm.MarkSize[0];var Cj=Bm.MarkShape[0];var CU={X:Bc*Math.cos(Bs)+CJ,Y:Bc*Math.sin(Bs)*-1+CH};var B3=AM(Cj,CU,BN);C(Ce,B3,false,false);}break;case AD:case H:break;case F:Ce.lineWidth=Bm.LineWidth;break;case x:switch(Bm.Type){case A4:Ce.lineJoin="miter";break;case Au:Ce.lineJoin="bevel";break;case Aj:Ce.lineJoin="round";break;}break;case p:case f:case A5:break;case B:Ce.fill();break;case Az:Ce.stroke();break;case Ag:BM=Bm.Format;Bd=By[BM];if(Bm.HEP==1){Bi=Bm.FC;}else{Bi=Bd.SimpleColor;}Ce.fillStyle="RGBA("+Math.round(Bi.R*Bm.DarkerFactor)+", "+Math.round(Bi.G*Bm.DarkerFactor)+", "+Math.round(Bi.B*Bm.DarkerFactor)+", "+Bd.Alpha/255+")";Ce.fill();break;case J:break;case AL:if(Cz.IsAnimated===0){BU=Bm.BoundingRect;Cx=Bm.DarkerFactor;}else{BU=Bm.BoundingRect[0];Cx=Bm.DarkerFactor[0];var C0=Bm.BoundingRect[1];BU.X=BU.X*(1-B0)+C0.X*B0;BU.Y=BU.Y*(1-B0)+C0.Y*B0;BU.Width=BU.Width*(1-B0)+C0.Width*B0;BU.Height=BU.Height*(1-B0)+C0.Height*B0;}if(BU.Width<1||BU.Height<1){continue;}BU.Width=Math.floor(BU.Width);BU.Height=Math.floor(BU.Height);var Bd=By[Bm.Format];if(Bd.Bevel.FillBevelType!=Ab||B0<1){At(Ce,Bd,BU,Cx);}else{Ak(Ce,Bd);At(Ce,Bd,BU,Cx);}break;case AJ:Bd=By[Bm.Format];CL=Bd.Bevel;B3=AC(Bm.Polygon);var Br=B3.length;var BT=[];for(var CD=0;CD<Br;CD++){BT.push(B3[CD]);}while(true){Br=BT.length;if(Br<3){break;}var BZ=[];var B4=[];var BO=false;if(Br>3){var Cs={X:0,Y:0};for(var CD=0;((CD<(Br-2))&&(!BO));++CD){for(var CA=CD+2;CA<(Br-1);++CA){var Cv=b(BT[CD],BT[CD+1],BT[CA],BT[CA+1],Cs,false);Cs=Cv.interSection;if(Cv.val==1){BO=true;for(m=0;m<=CD;++m){if(!AT(BT[m],Cs)){BZ.push(BT[m]);}}BZ.push(Cs);for(m=CA+1;m<Br;++m){if(!AT(BT[m],Cs)){BZ.push(BT[m]);}}B4.push(Cs);for(m=CA;m>CD;--m){if(!AT(BT[m],Cs)){B4.push(BT[m]);}}break;}}if((CD!=0)&&(!BO)){var Cv=b(BT[CD],BT[CD+1],BT[0],BT[Br-1],Cs,false);Cs=Cv.interSection;if(Cv.val==1){for(m=0;m<=CD;++m){BZ.push(BT[m]);}BZ.push(Cs);B4.push(Cs);for(m=Br-1;m>CD;--m){B4.push(BT[m]);}BO=true;}}}}if(!BO){BZ=BT;}var Cr=0;var Cf=BI(BZ,Cr);Cr=Cf.depth;if(!Cf.mark){break;}Cr*=CL.Depth*0.01;var Bv=[];var BS=[];var B1=BZ.length;for(var CD=0;CD<B1;++CD){var CZ;var Bp;var Cf=Ar(BZ[(CD+B1-1)%B1],BZ[CD],BZ[(CD+1)%B1],Cr);CZ=Cf.start;Bp=Cf.end;Bv.push(CZ);BS.push(Bp);}for(var CD=0;CD<B1;++CD){var CR={X:BS[CD].X-Bv[CD].X,Y:BS[CD].Y-Bv[CD].Y};var BP=Math.sqrt(Aq(CR));var CW={X:CR.X/BP,Y:CR.Y/BP};var BK=w((540-CL.LightAngle)%360);var BV={X:Math.cos(BK),Y:Math.sin(BK)};var B2=AI(CW,BV);var CS=0;var B9=0;var Ch=0.1;var Cu=0.2;if(B2<-0.01){CS=(1+B2)*Ch;B9=(1+Math.abs(B2))*Cu*CL.Intensity*0.01;}else{CS=(1-Ch)+B2*Ch;B9=((1-Cu)+B2*Cu)*CL.Intensity*0.01;}var B8=CD+1;if(B8==B1){B8-=B1;}Ce.beginPath();Ce.moveTo(BZ[CD].X,BZ[CD].Y);Ce.lineTo(BZ[B8].X,BZ[B8].Y);Ce.lineTo(Bv[B8].X,Bv[B8].Y);Ce.lineTo(Bv[CD].X,Bv[CD].Y);Ce.closePath();var CQ=Math.round(CS*255);if(isNaN(CQ)){continue;}if(CL.FillBevelType==AH){Ce.save();Ce.clip();var BL=Ce.createLinearGradient(BS[CD].X,BS[CD].Y,Bv[CD].X,Bv[CD].Y);BL.addColorStop(0,"rgba("+CQ+","+CQ+","+CQ+","+B9+")");BL.addColorStop(1,"rgba("+CQ+","+CQ+","+CQ+","+0+")");Ce.fillStyle=BL;Ce.fill();Ce.restore();}else{Ce.fillStyle="RGBA("+CQ+", "+CQ+", "+CQ+", "+B9+")";Ce.fill();}}if(BO){BT=B4;}else{break;}}if(B3.length!=0){Ce.beginPath();Ce.moveTo(B3[0].X,B3[0].Y);for(var CD=1;CD<B3.length;++CD){Ce.lineTo(B3[CD].X,B3[CD].Y);}Ce.closePath();}break;case o:Bd=By[Bm.Format];CL=Bd.Bevel;if(Cz.IsAnimated===0){BU=Bm.BoundingRect;CG=Bm.IsCircularShape;}else{var C1=Bm.BoundingRect[0];var C0=Bm.BoundingRect[1];BU={X:0,Y:0,Width:0,Height:0};BU.X=C1.X*(1-B0)+C0.X*B0;BU.Y=C1.Y*(1-B0)+C0.Y*B0;BU.Width=C1.Width*(1-B0)+C0.Width*B0;BU.Height=C1.Height*(1-B0)+C0.Height*B0;}if(CL.FillBevelType===Ae){var Cy=0.2;var CN=CL.Intensity*0.01*Bd.Alpha/255;var CP=1-CL.Depth*0.01;Ct=Ce.createLinearGradient(BU.X,BU.Y,BU.X+BU.Width,BU.Y);CE="RGBA(0,0,0,"+CN+")";B5="RGBA(255,255,255,"+CN+")";Ct.addColorStop(0,CE);Ct.addColorStop(CP*Cy,CE);Ct.addColorStop(CP,B5);Ct.addColorStop(1,CE);}else{CE=Bd.SimpleColor;var BW={x:BU.X+BU.Width/2,y:BU.Y+BU.Height/2};Bl={x:0,y:0};Bg={x:0,y:0};y(BU,CL.LightAngle,BW);var Ba=Bd.Alpha/255;var Bo=Ba;if(Bd.FillType!=Av){Ba*=0.8;Bo*=0.5;CE={R:128,G:128,B:128};}var BL=Ce.createLinearGradient(Bl.x,Bl.y,Bg.x,Bg.y);BL.addColorStop(0,"rgba(255,255,255,"+Ba+")");BL.addColorStop(0.05+CL.Intensity*0.001,"rgba(255,255,255,"+9*Ba/(10-Ba)+")");BL.addColorStop(0.5,"rgba("+CE.R+","+CE.G+","+CE.B+","+Bo+")");BL.addColorStop(0.85+(1-CL.Intensity*0.01)*0.05,"rgba(0,0,0,"+9*Ba/(10-Ba)+")");BL.addColorStop(1,"rgba(0,0,0,"+Ba+")");Ce.fillStyle=BL;Ce.fill();if(Bd.FillType!=Av){continue;}var BJ=Math.max(BU.Width,BU.Height)*0.5*(2-CL.Intensity*0.01);BJ*=CG?0.75:2;Ct=Ce.createRadialGradient(BW.x,BW.y,0,BW.x,BW.y,BJ);Ct.addColorStop(0,"rgba("+CE.R+","+CE.G+","+CE.B+","+Ba+")");Ct.addColorStop(0.5,"rgba("+CE.R+","+CE.G+","+CE.B+","+Ba/2+")");Ct.addColorStop(0.8,"rgba("+CE.R+","+CE.G+","+CE.B+","+Ba/10+")");Ct.addColorStop(1,"rgba("+CE.R+","+CE.G+","+CE.B+",0)");}Ce.fillStyle=Ct;Ce.fill();break;case Ao:Bd=By[Bm.Format];CL=Bd.Bevel;var Cc=Bm.CX;var Cb=Bm.CY;var Cm=Bm.Radius;var BJ;var CN;switch(Bm.BorderUse){case U:CN=0.4;Bl={x:Cc+Cm*Math.cos(Ac*1.25),y:Cb+Cm*Math.sin(Ac*1.25)};Bg={x:Cc+Cm*Math.cos(Ac*0.25),y:Cb+Cm*Math.sin(Ac*0.25)};Ce.save();Ce.clip();var BL=Ce.createLinearGradient(Bl.x,Bl.y,Bg.x,Bg.y);BL.addColorStop(0,"rgba(0,0,0,"+CN+")");BL.addColorStop(1,"rgba(255,255,255,"+CN+")");Ce.fillStyle=BL;Ce.fill();Ce.restore();CN=0.4;BJ=Cm*0.3;Bi=Bd.SimpleColor;Bl={x:Cc+BJ*Math.cos(Ac*0.75),y:Cb+BJ*Math.sin(Ac*0.75)};Bg={x:Cc+BJ*Math.cos(Ac*1.75),y:Cb+BJ*Math.sin(Ac*1.75)};Ce.save();Ce.clip();var BL=Ce.createLinearGradient(Bl.x,Bl.y,Bg.x,Bg.y);BL.addColorStop(0,"rgba("+Bi.R+","+Bi.G+","+Bi.B+","+0+")");BL.addColorStop(0.2,"rgba("+Bi.R+","+Bi.G+","+Bi.B+","+1+")");BL.addColorStop(0.8,"rgba("+Bi.R+","+Bi.G+","+Bi.B+","+1+")");BL.addColorStop(1,"rgba("+Bi.R+","+Bi.G+","+Bi.B+","+0+")");Ce.fillStyle=BL;Ce.fill();Ce.restore();break;case c:CN=0.6;BJ=Cm*0.2;var CP=0.3;Bl={x:Cc+BJ*Math.cos(Ac*1.25),y:Cb+BJ*Math.sin(Ac*1.25)};Bg={x:Cc+Cm*Math.cos(Ac*0.25),y:Cb+Cm*Math.sin(Ac*0.25)};Ce.save();Ce.clip();var BL=Ce.createLinearGradient(Bl.x,Bl.y,Bg.x,Bg.y);BL.addColorStop(0,"rgba(255,255,255,"+CN+")");BL.addColorStop(CP,"rgba(0,0,0,"+CN+")");BL.addColorStop(1,"rgba(255,255,255,"+CN+")");Ce.fillStyle=BL;Ce.fill();Ce.restore();break;default:CN=0.4;BJ=Cm-Bm.Thickness;Bl={x:Cc+BJ*Math.cos(Ac*1.25),y:Cb+BJ*Math.sin(Ac*1.25)};Bg={x:Cc+BJ*Math.cos(Ac*0.25),y:Cb+BJ*Math.sin(Ac*0.25)};Ce.save();Ce.clip();var BL=Ce.createLinearGradient(Bl.x,Bl.y,Bg.x,Bg.y);BL.addColorStop(0,"rgba(0,0,0,"+CN+")");BL.addColorStop(1,"rgba(255,255,255,"+CN+")");Ce.fillStyle=BL;Ce.fill();Ce.restore();break;}break;case M:Bd=By[Bm.Format];CL=Bd.Bevel;var CN;var CP;var Cc;var Cb;var Bn;var BY;var CO;var Bt;var Bq;var Cg;if(Cz.IsAnimated===0){Cc=Bm.CX;Cb=Bm.CY;Bn=Bm.InnerRadius;BY=Bm.OuterRadius;CO=Bm.RGUsage;Bt=Bm.HEP;if(Bt==1){Bq=Bm.ExtraDepth;Cg=Bm.ExtraIntensity;}}else{Cc=Bm.CX[0]*(1-B0)+Bm.CX[1]*B0;Cb=Bm.CY[0]*(1-B0)+Bm.CY[1]*B0;Bn=Bm.InnerRadius[0];BY=Bm.OuterRadius[0];CO=Bm.RGUsage[0];Bt=Bm.HEP[0];if(Bt==1){Bq=Bm.ExtraDepth[0];Cg=Bm.ExtraIntensity[0];}}switch(CO){case l:CN=CL.Intensity*0.01*Bd.Alpha/255;CP=1-CL.Depth*0.01;Ct=Ce.createRadialGradient(Cc,Cb,Bn,Cc,Cb,BY);CE="RGBA(0,0,0,"+CN+")";B5="RGBA(255,255,255,"+CN+")";Ct.addColorStop(0,CE);Ct.addColorStop(CP,B5);Ct.addColorStop(1,CE);Ce.fillStyle=Ct;Ce.fill();break;case Ay:CN=CL.Intensity*0.01*Bd.Alpha/255;Ct=Ce.createRadialGradient(Cc,Cb,Bn,Cc,Cb,BY);CE="RGBA(0,0,0,"+CN+")";B5="RGBA(255,255,255,"+CN+")";Ct.addColorStop(0,CE);Ct.addColorStop(1,B5);Ce.fillStyle=Ct;Ce.fill();break;case Ad:if(Bt==0){CN=CL.Intensity*0.01*Bd.Alpha/255;CP=CL.Depth*0.01;}else{CN=Cg*0.01*Bd.Alpha/255;CP=Bq*0.01;}Ct=Ce.createRadialGradient(Cc,Cb,Bn,Cc,Cb,BY);CE="RGBA(0,0,0,"+CN+")";B5="RGBA(255,255,255,"+CN+")";Ct.addColorStop(0,CE);Ct.addColorStop(CP,B5);Ct.addColorStop(1,CE);Ce.fillStyle=Ct;Ce.fill();break;}break;case BD:Bd=By[Bm.Format];CL=Bd.Bevel;CN=CL.Intensity*0.01*Bd.Alpha/255;CP=1-CL.Depth*0.01;CE="RGBA(0,0,0,"+CN+")";B5="RGBA(255,255,255,"+CN+")";Ct=Ce.createLinearGradient(Bm.StartPoint.X,Bm.StartPoint.Y,Bm.EndPoint.X,Bm.EndPoint.Y);Ct.addColorStop(0,CE);Ct.addColorStop(CP,B5);Ct.addColorStop(1,CE);Ce.save();Ce.clip();Ce.fillStyle=Ct;Ce.fill();Ce.restore();break;case BG:case AP:break;case Q:var Cd;BM=Bm.Format;Bd=By[BM];if(Bd.Gradient&&Bd.Gradient.Valid){var Cq=Bd.Gradient,Ck=Cq.Colors,Bl=Cq.Start,Bg=Cq.End;if(Cq.style==0){var Bu=Ce.createLinearGradient(Bl.x,Bl.y,Bg.x,Bg.y);}else{if(Cq.angle==0){Bu=Ce.createLinearGradient(Bl.x,0,Bg.x,0);}else{Bu=Ce.createLinearGradient(0,Bl.y,0,Bg.y);}}var Bb,B6=1,Cp=Ck.length;if(Cp>0){for(CD=0;CD<Cp;CD++){Bb="RGBA("+Math.round(B6*Ck[CD].Color.mR)+", "+Math.round(B6*Ck[CD].Color.mG)+", "+Math.round(B6*Ck[CD].Color.mB)+", "+Bd.Alpha/255+")";Bu.addColorStop(Ck[CD].Step,Bb);}Cd=Bu;}else{Bi=Bd.Color;Cd="RGBA("+Bi.R+", "+Bi.G+", "+Bi.B+", "+Bd.Alpha/255+")";}}else{Bi=Bd.Color;Cd="RGBA("+Bi.R+", "+Bi.G+", "+Bi.B+", "+Bd.Alpha/255+")";}Ce.strokeStyle=Cd;Ce.stroke();break;case N:BM=Bm.Format;Bd=By[BM];Bi=Bd.Color;Ce.font=Bd.Size+"px "+Bd.Name;if(Bd.Style&2){Ce.font="italic "+Ce.font;}if(Bd.Style&1){Ce.font="bold "+Ce.font;}Ce.fillStyle="RGBA("+Bi.R+", "+Bi.G+", "+Bi.B+", "+Bd.Alpha/255+")";Ce.fillText(Bm.Text,Bm.StartPoint.X,Bm.StartPoint.Y);if(Bd.Style&12){Ce.beginPath();var CM=Ce.measureText(Bm.Text);if(Bd.Style&4){Ce.moveTo(Math.round(Bm.StartPoint.X),Math.round(Bm.StartPoint.Y));Ce.lineTo(Math.round(Bm.StartPoint.X+CM.width),Math.round(Bm.StartPoint.Y));}if(Bd.Style&8){Ce.moveTo(Math.round(Bm.StartPoint.X),Math.round(Bm.StartPoint.Y-Bd.Size*0.5));Ce.lineTo(Math.round(Bm.StartPoint.X+CM.width),Math.round(Bm.StartPoint.Y-Bd.Size*0.5));}Ce.strokeStyle="RGBA("+Bi.R+", "+Bi.G+", "+Bi.B+", "+Bd.Alpha/255+")";Ce.lineWidth=Math.round(Math.max(1,Bd.Size*3/40));Ce.stroke();}break;case AS:var Cw;if(Cz.IsAnimated===0){Cw=Bm.Rect;}else{Cw=Bm.Rect[0];var C0=Bm.Rect[1];Cw.X=Cw.X*(1-B0)+C0.X*B0;Cw.Y=Cw.Y*(1-B0)+C0.Y*B0;Cw.Width=Cw.Width*(1-B0)+C0.Width*B0;Cw.Height=Cw.Height*(1-B0)+C0.Height*B0;}var CB=Bm.RotationAngle;var CK=Bm.BevelDepth;var CV=Bm.LTColor;var CT=Bm.LTAlpha;var Co=Bm.RBColor;var Cl=Bm.RBAlpha;var Cn={X:Cw.X+Cw.Width/2,Y:Cw.Y+Cw.Height/2};var Ca={X:0,Y:0,Width:0,Height:0};Ca.X=Cw.X;Ca.Y=Cw.Y;Ca.Width=Cw.Width;Ca.Height=Cw.Height;BC(Ca,CK,CK);var Bf=[];Bf.push(A0({X:Cw.X,Y:Cw.Y},Cn,CB));Bf.push(A0({X:Cw.X+Cw.Width,Y:Cw.Y},Cn,CB));Bf.push(A0({X:Cw.X+Cw.Width,Y:Cw.Y+Cw.Height},Cn,CB));Bf.push(A0({X:Cw.X,Y:Cw.Y+Cw.Height},Cn,CB));var Ci=[];Ci.push(A0({X:Ca.X,Y:Ca.Y},Cn,CB));Ci.push(A0({X:Ca.X+Ca.Width,Y:Ca.Y},Cn,CB));Ci.push(A0({X:Ca.X+Ca.Width,Y:Ca.Y+Ca.Height},Cn,CB));Ci.push(A0({X:Ca.X,Y:Ca.Y+Ca.Height},Cn,CB));var BX=[];BX.push(A0({X:Cw.X,Y:Cw.Y+Cw.Height},Cn,CB));BX.push(A0({X:Ca.X,Y:Ca.Y+Ca.Height},Cn,CB));BX.push(A0({X:Ca.X,Y:Ca.Y},Cn,CB));BX.push(A0({X:Ca.X+Ca.Width,Y:Ca.Y},Cn,CB));BX.push(A0({X:Cw.X+Cw.Width,Y:Cw.Y},Cn,CB));BX.push(A0({X:Cw.X,Y:Cw.Y},Cn,CB));C(Ce,BX,false,false);Ce.fillStyle="RGBA("+CV.R+", "+CV.G+", "+CV.B+", "+CT/255+")";Ce.fill();var BR=[];BR.push(A0({X:Cw.X,Y:Cw.Y+Cw.Height},Cn,CB));BR.push(A0({X:Ca.X,Y:Ca.Y+Ca.Height},Cn,CB));BR.push(A0({X:Ca.X+Ca.Width,Y:Ca.Y+Ca.Height},Cn,CB));BR.push(A0({X:Ca.X+Ca.Width,Y:Ca.Y},Cn,CB));BR.push(A0({X:Cw.X+Cw.Width,Y:Cw.Y},Cn,CB));BR.push(A0({X:Cw.X+Cw.Width,Y:Cw.Y+Cw.Height},Cn,CB));C(Ce,BR,false,false);Ce.fillStyle="RGBA("+Co.R+", "+Co.G+", "+Co.B+", "+Cl/255+")";Ce.fill();Ce.strokeStyle="RGBA(230, 230, 230, "+CT*0.5/255+")";Ce.lineWidth=1;C(Ce,Bf,true,true);Ce.stroke();C(Ce,Ci,true,true);Ce.stroke();break;}}}function Ax(BJ,BK){return 1-(Math.sqrt((BK-256)*(BK-256)+(BJ-256)*(BJ-256))/(1.5*256));}function V(BN,BJ,BO,BL,BK){var BM=(BL&&BK)?0.5:0;BN.moveTo(BJ+BM,BO+BM);}function BH(BN,BJ,BO,BL,BK){var BM=(BL&&BK)?0.5:0;BN.lineTo(BJ+BM,BO+BM);}function h(BM,BJ,BL,BK){var BO=BJ.length;if(BO<=0){return ;}BM.beginPath();V(BM,BJ[0].X,BJ[0].Y,BL,BK);var BN=0;for(i=1;i<BO;++i){BH(BM,BJ[i].X,BJ[i].Y,BL,BK);BN=i;}}function X(BL){var BK=A6[BL];var BJ=BK.length/2;return{number:BJ,points:BK};}function AM(BS,BN,BK){var BJ=[];if(BS==AB){BJ.push({X:BN.X-BK,Y:BN.Y-BK});BJ.push({X:BN.X+BK,Y:BN.Y-BK});BJ.push({X:BN.X+BK,Y:BN.Y+BK});BJ.push({X:BN.X-BK,Y:BN.Y+BK});return BJ;}var BP;var BR;var BO=X(BS);BP=BO.number;BR=BO.points;for(var BQ=0;BQ<BP;BQ++){var BM=(BR[2*BQ])*BK/A3+BN.X;var BL=(BR[2*BQ+1])*BK/A3+BN.Y;BJ.push({X:BM,Y:BL});}return BJ;}function C(BO,BK,BM,BL){var BQ=BK.length;if(BQ<3){return ;}BO.beginPath();if(BM&&BL){var BJ=[];for(var BN=0;BN<BQ;++BN){BJ.push(BK[BN]);}var BP=BQ-1;for(var BN=0;BN<BQ;++BN){lNextIndex=(BN+1==BQ)?0:BN+1;if(BK[BN].X==BK[BP].X||BK[BN].X==BK[lNextIndex].X){BJ[BN].X+=0.5;}if(BK[BN].Y==BK[BP].Y||BK[BN].Y==BK[lNextIndex].Y){BJ[BN].Y+=0.5;}BP=BN;}h(BO,BJ,false,BL);}else{h(BO,BK,false,BL);}BO.closePath();}function A7(BJ,BM,BL){var BN=BJ.X-BM.X;var BK=BJ.Y-BM.Y;BJ.X=BM.X+Math.cos(BL)*BN-Math.sin(BL)*BK;BJ.Y=BM.Y+Math.sin(BL)*BN+Math.cos(BL)*BK;return BJ;}function A0(BJ,BL,BK){return A7(BJ,BL,BK);}function BC(BK,BL,BJ){if(BL*2>BK.Width){BL=BK.Width/2;}if(BJ*2>BK.Height){BJ=BK.Height/2;}return AE(BK,-BL,-BJ);}function AE(BK,BL,BJ){BK.X-=BL;BK.Y-=BJ;BK.Width+=(BL*2);BK.Height+=(BJ*2);return BK;}function r(BK,BJ,BL){return S(BK,BJ)+S(BJ,BL)+S(BL,BK);}function n(BK,BJ){return Math.sqrt((BK.X-BJ.X)*(BK.X-BJ.X)+(BK.Y-BJ.Y)*(BK.Y-BJ.Y));}function P(BM,BQ,BZ){var BV=BZ;var BL=BM.length;var BU=BQ;var BW=BM[(BU+BL-1)%BL];var BT=BM[(BU+1)%BL];var BO=0;var BY={X:0,Y:0};var BX={X:BM[BQ].X-BM[(BQ+BL-1)%BL].X,Y:BM[BQ].Y-BM[(BQ+BL-1)%BL].Y};for(var BR=(BU+2)%BL;BR!=BU;BR=(BR+1)%BL){var BS=BR-1;if(BS<0){BS+=BL;}var Bb={X:BM[BS].X-BM[BU].X,Y:BM[BS].Y-BM[BU].Y};var Ba={X:BM[BR].X-BM[BU].X,Y:BM[BR].Y-BM[BU].Y};if(S(BX,Bb)<0.01&&S(BX,Ba)>0.01){var BK=b(BW,BM[BU],BM[BS],BM[BR],BY,false);BY=BK.interSection;BO=BR;break;}}var BJ=0;var BP={X:0,Y:0};var BN={X:BM[BQ].X-BM[(BQ+1)%BL].X,Y:BM[BQ].Y-BM[(BQ+1)%BL].Y};for(var BR=(BU+BL-2)%BL;BR!=BU;BR=(BR-1+BL)%BL){var BS=BR+1;if(BS>=BL){BS-=BL;}var Bb={X:BM[BS].X-BM[BU].X,Y:BM[BS].Y-BM[BU].Y};var Ba={X:BM[BR].X-BM[BU].X,Y:BM[BR].Y-BM[BU].Y};if(S(BN,Bb)>-0.01&&S(BN,Ba)<-0.01){var BK=b(BT,BM[BU],BM[BS],BM[BR],BP,false);BP=BK.interSection;BJ=BR;break;}}BV.push(BM[BU]);BV.push(BY);for(m=BO;;m=(m+1)%BL){BV.push(BM[m]);if(m==BJ){break;}}BV.push(BP);return BV;}function g(BU,BR){var BS=BU.length;if(BS==3){var BK=BI(BU,BR);return BK;}else{var Bb=BU[BS-1];var BJ={X:BU[1].X-BU[0].X,Y:BU[1].Y-BU[0].Y};var BV={X:-BJ.X,Y:-BJ.Y};var BM={X:Bb.X-BU[0].X,Y:Bb.Y-BU[0].Y};var Bc={X:-BM.X,Y:-BM.Y};var BO=false;var BT=10000000000;for(var Ba=2;Ba<BS;++Ba){var BY=Ba-1;var BZ={X:BU[Ba].X-BU[BY].X,Y:BU[Ba].Y-BU[BY].Y};if(S(BV,BZ)<-0.01){var BL={X:0,Y:0};var BP=b(BU[0],BU[1],BU[BY],BU[Ba],BL,false);BL=BP.interSection;if(BP.val>0){var BQ={X:BL.X-BU[0].X,Y:BL.Y-BU[0].Y};if(AI(BJ,BQ)>0.01){var BN={X:BL.X+BZ.X,Y:BL.Y+BZ.Y};var BW={X:0,Y:0};var BX;var BK=T(Bb,BU[0],BL,BN,BW,BX);BW=BK.point;BX=BK.val;if(BK.mark){BO=true;if((BX<BT)&&Al(BW,BU[BY-1],BU[BY],BU[Ba],BU[(Ba+1)%BS])){BT=BX;}}}}}else{if(S(Bc,BZ)<-0.01){var BL={X:0,Y:0};var BP=b(BU[0],Bb,BU[BY],BU[Ba],BL,false);BL=BP.interSection;if(BP.val>0){var BQ={X:BL.X-BU[0].X,Y:BL.Y-BU[0].Y};if(AI(BM,BQ)>0.01){var BN={X:BL.x-BZ.x,Y:BL.y-BZ.y};var BW={X:0,Y:0};var BX;var BK=T(BN,BL,BU[0],BU[1],BW,BX);BW=BK.point;BX=BK.val;if(BK.mark){BO=true;if((BX<BT)&&Al(BW,BU[BY-1],BU[BY],BU[Ba],BU[(Ba+1)%BS])){BT=BX;}}}}}}}return{mark:BO,depth:BT};}}function Aq(BJ){return BJ.X*BJ.X+BJ.Y*BJ.Y;}function Ar(BV,BT,BS,BN){var BO={X:BV.X-BT.X,Y:BV.Y-BT.Y};var BM={X:BS.X-BT.X,Y:BS.Y-BT.Y};var BL=Math.sqrt(Aq(BO));var BK=Math.sqrt(Aq(BM));var BR={X:BO.X/BL,Y:BO.Y/BL};var BQ={X:BM.X/BK,Y:BM.Y/BK};var BU=0;if(Math.abs(BR.X-BQ.X)<0.01){BU=BN*(BQ.X+BR.X)/(BR.Y-BQ.Y);}else{BU=BN*(BQ.Y+BR.Y)/(BQ.X-BR.X);}var BP={X:0,Y:0};var BJ={X:0,Y:0};BP.X=BT.X+BU*BQ.X;BP.Y=BT.Y+BU*BQ.Y;BJ.X=BP.X+BN*(-BQ.Y);BJ.Y=BP.Y+BN*BQ.X;return{start:BJ,end:BP};}function Ai(BK,BJ){var BL=AI(BK,BJ)/(Math.sqrt(Aq(BK)*Aq(BJ)));BL=(BL>1)?1:BL;BL=(BL<-1)?-1:BL;return Math.acos(BL);}function Al(BP,BX,BW,BU,BT){var BR={X:BX.X-BW.X,Y:BX.Y-BW.Y};var BO={X:BU.X-BW.X,Y:BU.Y-BW.Y};var BV=q(Ai(BR,BO));if(S(BO,BR)<-0.01){BV=360-BV;}var BL={X:BP.X-BW.X,Y:BP.Y-BW.Y};var BQ=q(Ai(BL,BO));if(S(BO,BL)<-0.01){BQ=360-BQ;}if(2*BQ>BV){return false;}var BK={X:-BO.X,Y:-BO.Y};var BJ={X:BT.X-BU.X,Y:BT.Y-BU.Y};var BS=q(Ai(BK,BJ));if(S(BJ,BK)<-0.01){BS=360-BS;}var BN={X:BP.X-BU.X,Y:BP.Y-BU.Y};var BM=q(Ai(BK,BN));if(S(BN,BK)<-0.01){BM=360-BM;}if(2*BM>BS){return false;}return true;}function AN(BJ){return Math.sqrt(Aq(BJ));}function T(BX,BW,BU,BS,BN,Ba){var Bi;var BZ;var Bg={X:BW.X-BX.X,Y:BW.Y-BX.Y};var Bc={X:BS.X-BU.X,Y:BS.Y-BU.Y};var BQ={X:BU.X-BW.X,Y:BU.Y-BW.Y};var Bf=Math.sqrt(Aq(BQ));var Bd=S(Bg,Bc);if(Bd>0.01||Bd<-0.01){var BR={X:0,Y:0};var BT=b(BX,BW,BU,BS,BR,false);BR=BT.interSection;var Be=n(BW,BR);var BK=n(BU,BR);if(Bd<-0.01){var BM=Bf+Be+BK;BN.X=(BK*BW.X+Be*BU.X+Bf*BR.X)/BM;BN.Y=(BK*BW.Y+Be*BU.Y+Bf*BR.Y)/BM;Bi=r(BW,BU,BR)/BM;BZ=true;}else{var BM=Be+BK-Bf;if(BM<0.01){var Bb=0;if(Math.abs(S(Bg,BQ))<0.01){var Bh={X:-BQ.X/Bf,Y:-BQ.Y/Bf};var BL=Math.sqrt(Aq(Bc));var BO={X:Bc.X/BL,Y:Bc.Y/BL};Bb=(Bh.Y-BO.Y)*Bf/(Bh.X+BO.X);BN.X=BW.X+Bb*Bh.Y;BN.Y=BW.Y+Bb*(-Bh.X);}else{var BV={X:BQ.X/Bf,Y:BQ.Y/Bf};var BY=AN(Bg);var BP={X:-Bg.X/BY,Y:-Bg.Y/BY};Bb=(BP.Y-BV.Y)*Bf/(BP.X+BV.X);BN.X=BU.X+Bb*(-BV.Y);BN.Y=BU.Y+Bb*BV.X;}Bi=Bb;BZ=true;return{val:Bi,mark:BZ,point:BN};}BN.X=(BK*BW.X+Be*BU.X-Bf*BR.X)/BM;BN.Y=(BK*BW.Y+Be*BU.Y-Bf*BR.Y)/BM;Bi=r(BW,BR,BU)/BM;BZ=true;}}else{if(Math.abs(S(Bg,BQ))<0.01){BZ=false;return{val:Bi,mark:BZ,point:BN};}var BY=Math.sqrt(Aq(Bg));var BJ={X:-Bg.X/BY,Y:-Bg.Y/BY};BN.X=(BW.X+BU.X+Bf*BJ.X)/2;BN.Y=(BW.Y+BU.Y+Bf*BJ.Y)/2;Bi=S(BQ,BJ)/2;BZ=true;}return{val:Bi,mark:BZ,point:BN};}function BI(BX,BU){var Bg=false;var BK=BX.length;if(BK==3){var BS=n(BX[0],BX[1]);var BR=n(BX[1],BX[2]);var BQ=n(BX[2],BX[0]);var BJ=BS+BR+BQ;BU=r(BX[0],BX[1],BX[2])/BJ;Bg=true;}else{var BP=false;var BW=10000000000;for(var Bc=0;Bc<BK;++Bc){var Bd=BX[Bc];var Be=BX[(Bc+BK-1)%BK];var Bb=BX[(Bc+1)%BK];var Ba=BX[(Bc+2)%BK];var BN={X:Be.X-Bd.X,Y:Be.Y-Bd.Y};var BL={X:Bb.X-Bd.X,Y:Bb.Y-Bd.Y};var BY={X:-BL.X,Y:-BL.Y};var BV={X:Ba.X-Bb.X,Y:Ba.Y-Bb.Y};var BT=S(BN,BL);if(BT<0.01){if(S(BY,BV)<0.01){var BO={X:0,Y:0};var BZ=0;var BM=T(Be,Bd,Bb,Ba,BO,BZ);BO=BM.point;BZ=BM.val;if(BM.mark){BP=true;BW=(BW>BZ)?BZ:BW;}}}else{if(BT>0.01){var Bf=[];Bf=P(BX,Bc,Bf);var BM=g(Bf,BZ);var BZ=BM.depth;if(BM.mark){BP=true;BW=(BW>BZ)?BZ:BW;}}}}BU=BW;Bg=BP;}return{mark:Bg,depth:BU};}function AT(BK,BJ){return(Math.abs(BK.X-BJ.X)<0.01&&Math.abs(BK.Y-BJ.Y)<0.01);}function AC(BK){var BL=[];BL.push(BK[0]);pcount=BK.length;for(var BJ=1;BJ<pcount;BJ++){if(BK[BJ-1].X==BK[BJ].X&&BK[BJ-1].Y==BK[BJ].Y){continue;}BL.push(BK[BJ]);}var BM=new Array();pcount=BL.length;for(var BJ=0;BJ<pcount;BJ++){if(BJ===pcount-1){if(BL[BJ].X==BL[0].X&&BL[BJ].Y==BL[0].Y){continue;}}BM.push(BL[BJ]);}return BM;}function AV(BK,BJ,BN,BM){var BL=0.01;if(BM===false){BL=-0.01;}if(Math.abs(BJ.X-BN.X)<0.01){if(BK.Y-BJ.Y>BL&&BN.Y-BK.Y>BL){return true;}if(BK.Y-BN.Y>BL&&BJ.Y-BK.Y>BL){return true;}}else{if(BK.X-BJ.X>BL&&BN.X-BK.X>BL){return true;}if(BK.X-BN.X>BL&&BJ.X-BK.X>BL){return true;}}return false;}function b(BT,BS,BQ,BP,BO,BK){var BL={X:BS.X-BT.X,Y:BS.Y-BT.Y};var BM={X:BP.X-BQ.X,Y:BP.Y-BQ.Y};if(Math.abs(S(BL,BM))<0.01){var BJ={X:BQ.X-BT.X,Y:BQ.Y-BT.Y};if(Math.abs(S(BL,BJ))<0.01){return{val:-1,interSection:BO};}else{return{val:0,interSection:BO};}}else{var BN={X:BT.X-BQ.X,Y:BT.Y-BQ.Y};var BR=S(BM,BN)/S(BL,BM);BO.X=BT.X+BR*BL.X;BO.Y=BT.Y+BR*BL.Y;if(AV(BO,BT,BS,BK)&&AV(BO,BQ,BP,BK)){return{val:1,interSection:BO};}else{return{val:2,interSection:BO};}}}function y(BS,BL,BN){var BK=BL;while(BK<0){BK+=360;}while(BK>=360){BK-=360;}var BV=BS.X+BS.Width-BN.x;var BQ=BN.y-BS.Y;var BX=BN.x-BS.X;var BO=BS.Y+BS.Height-BN.y;var BT=w(BK);var BM={x:Math.cos(BT),y:-Math.sin(BT)};var BP;var BJ;if(BK>=0&&BK<90){var BY={x:BV,y:-BQ};var BU={x:-BX,y:BO};BP=O(BY,BM);BJ=O(BU,BM);}else{if(BK>=90&&BK<180){var BZ={x:-BX,y:-BQ};var BW={x:BV,y:BO};BP=O(BZ,BM);BJ=O(BW,BM);}else{if(BK>=180&&BK<270){var BY={x:BV,y:-BQ};var BU={x:-BX,y:BO};BP=O(BU,BM);BJ=O(BY,BM);}else{var BZ={x:-BX,y:-BQ};var BW={x:BV,y:BO};BP=O(BW,BM);BJ=O(BZ,BM);}}}a.x=BN.x+BP*BM.x;a.y=BN.y+BP*BM.y;d.x=BN.x+BJ*BM.x;d.y=BN.y+BJ*BM.y;var BR=-BJ/(BP-BJ);if(BR<0){BR=0;}else{if(BR>1){BR=1;}}return BR;}function w(BJ){return BJ*Ac/180;}function q(BJ){return BJ*180/Ac;}function O(BK,BJ){return(BK.x*BJ.x+BK.y*BJ.y);}function AI(BK,BJ){return(BK.X*BJ.X+BK.Y*BJ.Y);}function S(BK,BJ){return(BK.X*BJ.Y-BK.Y*BJ.X);}function At(BL,Bb,BK,BM){var BJ=Bb.Gradient;var BX="RGBA("+Math.round(BM*BJ.StartGraphColor.R)+", "+Math.round(BM*BJ.StartGraphColor.G)+", "+Math.round(BM*BJ.StartGraphColor.B)+", "+Bb.Alpha/255+")";var BV="RGBA("+Math.round(BM*BJ.EndGraphColor.R)+", "+Math.round(BM*BJ.EndGraphColor.G)+", "+Math.round(BM*BJ.EndGraphColor.B)+", "+BJ.EndAlpha/255+")";var BT;switch(BJ.GradientType){case Z:if(BJ.style==0){var Bd=BJ.HorizontalOffset;if((BJ.Angle>90&&BJ.Angle<180)||BJ.Angle>270){Bd=100-Bd;}var BZ={x:BK.X+BK.Width*Bd/100,y:BK.Y+BK.Height*BJ.VerticalOffset/100};d={x:0,y:0};a={x:0,y:0};var BN=y(BK,BJ.Angle,BZ);BT=BL.createLinearGradient(d.x,d.y,a.x,a.y);BT.addColorStop(0,BV);BT.addColorStop(BN,BX);BT.addColorStop(1,BV);}else{var BQ=BJ.Angle==0;d={x:0,y:0};a={x:0,y:0};if(BQ){d.x=BK.X;a.x=BK.X+BK.Width;d.y=a.y=0;}else{d.y=BK.Y;a.y=BK.Y+BK.Height;d.x=a.x=0;}BT=BL.createLinearGradient(d.x,d.y,a.x,a.y);BT.addColorStop(0,BX);var Bc=BJ.IntermediateColors;for(var Ba=0;Ba<Bc.length;Ba++){var BW=Bc[Ba].Color;var BY="RGBA("+Math.round(BM*BW.mR)+", "+Math.round(BM*BW.mG)+", "+Math.round(BM*BW.mB)+", "+Bb.Alpha/255+")";BT.addColorStop(Bc[Ba].Step,BY);}BT.addColorStop(1,BV);}BL.fillStyle=BT;BL.fill();break;case I:var BZ={x:BK.X+BK.Width*BJ.HorizontalOffset/100,y:BK.Y+BK.Height*BJ.VerticalOffset/100};var BR=BK.Width*1/BK.Height;BZ.y*=BR;BT=BL.createRadialGradient(BZ.x,BZ.y,0,BZ.x,BZ.y,BK.Width*2);BT.addColorStop(0,BX);BT.addColorStop(0.5,BV);BT.addColorStop(1,BV);BL.fillStyle=BT;BL.save();BL.scale(1,1/BR);BL.fill();BL.restore();break;case AF:var BZ={x:BK.X+BK.Width*BJ.HorizontalOffset/100,y:BK.Y+BK.Height*BJ.VerticalOffset/100};var BO=BJ.Angle%90;var BS=q(Math.atan(BK.Height/BK.Width));var BP=2*BO-BS*BO/45+90+BS;d={x:0,y:0};a={x:0,y:0};var BN=y(BK,BP,BZ);var BU=BL.createLinearGradient(d.x,d.y,a.x,a.y);BX="RGBA("+Math.round(BM*BJ.StartGraphColor.R)+", "+Math.round(BM*BJ.StartGraphColor.G)+", "+Math.round(BM*BJ.StartGraphColor.B)+", "+Bb.Alpha/(255*2-Bb.Alpha)+")";BV="RGBA("+Math.round(BM*BJ.EndGraphColor.R)+", "+Math.round(BM*BJ.EndGraphColor.G)+", "+Math.round(BM*BJ.EndGraphColor.B)+", "+BJ.EndAlpha/(255*2-BJ.EndAlpha)+")";BU.addColorStop(0,BV);BU.addColorStop(BN,BX);BU.addColorStop(1,BV);BL.fillStyle=BU;BL.fill();BP=BS*BO/45+90-BS;BN=y(BK,BP,BZ);BT=BL.createLinearGradient(d.x,d.y,a.x,a.y);BX="RGBA("+Math.round(BM*BJ.StartGraphColor.R)+", "+Math.round(BM*BJ.StartGraphColor.G)+", "+Math.round(BM*BJ.StartGraphColor.B)+", "+Bb.Alpha/(255*2)+")";BV="RGBA("+Math.round(BM*BJ.EndGraphColor.R)+", "+Math.round(BM*BJ.EndGraphColor.G)+", "+Math.round(BM*BJ.EndGraphColor.B)+", "+BJ.EndAlpha/(255*2)+")";BT.addColorStop(0,BV);BT.addColorStop(BN,BX);BT.addColorStop(1,BV);BL.fillStyle=BT;BL.fill();break;}}function Ak(BJ,BL){var BK=BL.Alpha/255;BJ.fillStyle="rgba(255,255,255,"+BL.Alpha/255+")";BJ.fill();}function AG(BK){var BJ=BK.canvas;BK.clearRect(0,0,BJ.width,BJ.height);}function Ah(BJ){Ap=(new Date()).getTime();L(BJ);}function L(BS){var BR=BS.graphData,BT=BR.UnitList,BU=BT.length,BM=BR.FormatList,BX=BS.graphNode,BP=BS.highlightNode,BN=BP.getContext("2d"),BW=BS.selectionNode,BO=BW.getContext("2d"),BL=BX.getContext("2d");AG(BL);AG(BN);AG(BO);var BY=Math.min(((new Date()).getTime()-Ap)/AA,1),BV=(1-BY),BQ;var BJ=0.3*BY*BV*BV+2.7*BV*BY*BY+BY*BY*BY;var BK=0;for(BQ=0;BQ<BU;BQ++){An(BL,BJ,BT[BQ],BM);if(BT[BQ].IsAnimated!==0){BK=1;}}if(BY<1&&BK===1){setTimeout(function(){L(BS);},20);}}mstrmojo.graph._CanvasGraph=mstrmojo.provide("mstrmojo.graph._CanvasGraph",{markupString:'<div class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><canvas id="{@id}" height="{@height}" width="{@width}">{@unsupportedError}</canvas>{@map}<canvas id="{@id}-highlight" class="mobile-graph-selection-canvas" height="{@height}" width="{@width}" style="position:absolute;top:0;left:0"></canvas><canvas id="{@id}-highlight" class="'+mstrmojo.GraphBase.canvasCLS+'" height="{@height}" width="{@width}" style="position:relative;top:0;left:0"></canvas></div>',unsupportedError:"This text is displayed if your browser does not support HTML5 Canvas element.",markupSlots:{graphNode:function(){return this.domNode.childNodes[1];},imgNode:function(){return this.domNode.childNodes[1];},mapNode:function(){return null;},textNode:function(){return this.domNode.firstChild;},selectionNode:function(){return this.domNode.lastChild.previousSibling;},highlightNode:function(){return this.domNode.lastChild;}},graphData:null,retrieveGraphSrc:function BB(BM,BQ){var BO=this.graphNode,BR=this.highlightNode,BN=this.selectionNode,BP=this.graphData,BL=(BP&&BP.data);if(BL&&BL.eg){var BS=this.textNode,BK=this.imgNode;BK.style.display="none";BR.style.display="none";BN.style.display="none";BS.innerHTML=BL.eg||"";BS.style.display="block";BS.className="mstrmojo-message";}else{var BT=BP.GH||parseInt(BM,10),BJ=BP.GW||parseInt(BQ,10);BO.setAttribute("height",BT);BO.setAttribute("width",BJ);BR.style.display="block";BR.setAttribute("height",BT);BR.setAttribute("width",BJ);BR.style.top=-BT+"px";BN.style.display="block";BN.setAttribute("height",BT);BN.setAttribute("width",BJ);this.displayTooltips([],0,0);Ah(this);if(BP.Selected){this.highlightAreaInInit(BN,BP.Selected);}}},unrender:function AO(BJ){this._super(false);},invalidate:function K(){var BJ=this.graphNode;if(BJ){AG(BJ.getContext("2d"));}},getCaptureDimensions:function AY(){var BK=this.graphNode,BJ=mstrmojo.dom.position(this.domNode,true);BJ.w=BK.width;BJ.h=BK.height;return BJ;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo.css","mstrmojo.Pulldown","mstrmojo.ProgressBar");var N=mstrmojo.dom,Q=mstrmojo.css,R="disabled",C=-1;function O(){var V=this.selected,T=this.panels.length,W=this.getValidPanelsNum(V),U=this.getValidPanelsNum(T);if(W===U-1){Q.addClass(this.nextBtnNode,R);}else{Q.removeClass(this.nextBtnNode,R);}if(W===0){Q.addClass(this.prevBtnNode,R);}else{Q.removeClass(this.prevBtnNode,R);}}mstrmojo.PageNavigationPanel=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.PageNavigationPanel",markupString:'<div class="mstrmojo-PageNavPanel {@cssClass}" style="{@cssText}" mstrAttach:click><div class="header"><div class="titles"><div class="title">{@title}</div><div class="subtitle">{@subtitle}</div></div><div class="progress"></div><div class="navigation"></div></div><div class="content"></div><div class="footer"><div class="prev"><div class="btn" btnv="pre">{@prevText}</div></div><div class="pges"></div><div class="next"><div class="btn" btnv="nxt">{@nextText}</div></div></div></div>',markupSlots:{headerNode:function(){return this.domNode.firstChild;},progressBarNode:function(){return this.domNode.firstChild.childNodes[1];},navigationNode:function(){return this.domNode.firstChild.childNodes[2];},containerNode:function(){return this.domNode.childNodes[1];},footerNode:function(){return this.domNode.lastChild;},prevBtnNode:function(){return this.domNode.lastChild.firstChild;},pagesNode:function(){return this.domNode.lastChild.childNodes[1];},nextBtnNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{onsubtitleChange:function(){this.headerNode.firstChild.lastChild.innerHTML=this.subtitle||"";},onheaderVisibleChange:function(){this.headerNode.style.display=this.headerVisible?"":"none";},ontitleVisibleChange:function(){this.headerNode.firstChild.style.display=this.titleVisible?"":"none";},onsubtitleVisibleChange:function(){this.headerNode.lastChild.style.display=this.subtitleVisible?"":"none";},onheightChange:function(){var U=this.headerHeight,T=this.footerHeight;if(this.height){if(!U||!T){U=this.headerHeight=this.headerNode.offsetHeight||0;T=this.headerHeight=this.footerNode.offsetHeight||0;}this.containerNode.style.height=(parseInt(this.height,10)-U-T)+"px";}}},title:"",subtitle:"",prevText:"Prev",nextText:"Next",selected:0,headerVisible:true,titleVisible:true,subtitleVisible:true,panels:null,renderedPanels:0,init:function M(T){this.panels=[];this._super(T);},onselectedChange:function K(){var V=this.selected,T=this._lastSelected,W=this.panels[V],U=this.panels[T];if(U){U.set("visible",false);}if(W){W.set("visible",true);}this.set("subtitle",W.title);this._lastSelected=this.selected;O.call(this);if(this.navlst){this.navlst.set("value",V);}this.updatePageNode();},onrenderedPanelsChange:function J(){var T=this.panels.length,U=this.renderedPanels;if(T>0){this.updateProgressNode(Math.floor(100*U/T));}else{this.updateProgressNode(0);}},updateProgressNode:function E(T){if(this.prgbar){this.prgbar.updateProgress(T,T+"% completed");}},updatePageNode:function A(){this.pagesNode.innerHTML=(this.getValidPanelsNum(this.selected)+1)+"/"+this.getValidPanelsNum(this.panels.length);},getValidPanelsNum:function D(X){var W=0,U=this.panels||[];for(var V=0,T=U.length;V<T;V++){if(V===X){return W;}if(!U[V].isHide){W++;}}return W;},getNextValidPanel:function H(W){var U=this.panels||[];for(var V=W+1,T=U.length;V<T;V++){if(!U[V].isHide){return V;}}return C;},getPreValidPanel:function F(V){var T=this.panels||[];for(var U=V-1;U>=0;U--){if(!T[U].isHide){return U;}}return C;},showNextPanel:function I(){var U=this.selected,V=this.panels[U],T=this.getNextValidPanel(U);if(T===C){return ;}if(!V.viewed){V.viewed=true;this.set("renderedPanels",this.renderedPanels+1);}this.set("selected",T);},showPreviousPanel:function L(){var T=this.selected,V=this.panels[T],U=this.getPreValidPanel(T);if(U===C){return ;}if(!V.viewed){V.viewed=true;this.set("renderedPanels",this.renderedPanels+1);}this.set("selected",U);},update:function G(W){var V=this.panels,T=V.length,X=this.navlst,U;if(W>=T){return ;}U=this.panels[W];this.updatePageNode();O.call(this);X.items[W].css=(!U.isHide)?"enabled":"disabled";},preBuildRendering:function B(){var U,T,Z=this.panels||[],Y=[],X=0,V=this;if(Z.length>0){for(U=0,T=Z.length;U<T;U++){if(U!==this.selected){Z[U].visible=false;}else{X=U;}Y.push({n:Z[U].title,v:U,css:(X===U)?"enabled":"disabled"});}this.set("children",[{scriptClass:"mstrmojo.ProgressBar",alias:"prgbar",slot:"progressBarNode"},{scriptClass:"mstrmojo.Pulldown",alias:"navlst",slot:"navigationNode",items:Y,itemIdField:"v",defaultSelection:X,onvalueChange:function a(){var b=V.panels,c=b[V._lastSelected];V.set("selected",this.value);this.items[this.value].css="enabled";if(!c.viewed){c.viewed=true;V.set("renderedPanels",V.renderedPanels+1);}},prevalueChange:function W(){var b=V.panels;if(!b[this.value].viewed||b[this.value].isHide){this.value=V._lastSelected;}}}].concat(Z));this.set("subtitle",Z[0].title);this._lastSelected=this.selected;}this._super();},postBuildRendering:function P(){this._super();this.updateProgressNode(0);this.updatePageNode();O.call(this);},onclick:function S(Z){var X=N.eventTarget(window,Z.e),U=X.getAttribute("btnv"),Y=this.selected,V=this.panels,T=V.length,a=this.getValidPanelsNum(Y),W=this.getValidPanelsNum(T);if(U){if(U==="pre"&&a>0){this.showPreviousPanel();}else{if(U==="nxt"&&a<W-1){this.showNextPanel();}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.ui.menus.Menu","mstrmojo._IsList","mstrmojo.vi.ui._HasMask","mstrmojo.dom","mstrmojo.hash","mstrmojo.string","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui._HasListTooltip");var F=mstrmojo.dom;mstrmojo.vi.ui.toolbars.Toolbar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi.ui._HasMask,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.vi.ui.toolbars.Toolbar",tooltipOrientation:"vertical",init:function G(I){this._super(I);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIToolbar");},selectionPolicy:"reselect",toolbarCfg:null,toolbarClicked:mstrmojo.emptyFn,tooltipCss:null,_set_toolbarCfg:function(L,I){var J=this.toolbarCfg,K=(J!==I);if(K){if(J){J.destroy();}this.toolbarCfg=I;}return K;},getItemProps:function D(K,I){var J=this._super(K,I);J.addCls(K.cls);J.addStyle("display:inline-block");return J;},postBuildRendering:function C(){var I=document.createElement("div");I.className="mstrmojo-VIDND-mask";this.maskNode=this.domNode.appendChild(I);return this._super();},postselectionChange:function(I){var J=I.added;if(J){var K=this.items[J[0]];if(K.tp==="pb"&&K.isMenuClicked){K.menufn(K,this);}else{K.fn(K,this);}}},ontoolbarCfgChange:function H(I){var K=I.valueWas;if(K){K.destroy();}var J=I.value;if(!J){return ;}this.set("items",J.btns);if(this.hasRendered){this.raiseEvent({name:"renderComplete"});}},openMenu:function E(J,I){J.hostId=this.id;J.hostElement=this._getItemNode(I._renderIdx);this.openPopup(J.newInstance());},onclick:function A(I){var K=I.target||F.eventTarget(I.hWin,I.e),J=this.getItemFromTarget(K);if(J&&J.tp==="pb"){if(K&&K.className){J.isMenuClicked=K.className.indexOf("icn")===-1;}}this.toolbarClicked(I);this._super(I);},destroy:function B(J){var I=this.toolbarCfg;if(I){I.destroy();}delete this.items;this._super(J);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.graph._CanvasGraph");function B(){var D=document.createElement("canvas");D.width=10;D.height=10;return D;}mstrmojo.gm.VecDrawer=mstrmojo.declare(mstrmojo.Base,[mstrmojo.graph._CanvasGraph],{scriptClass:"mstrmojo.gm.VecDrawer",init:function C(D){this._super(D);this.selectionNode=B();this.highlightNode=B();},displayTooltips:function A(){}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.hash","mstrmojo.Button","mstrmojo.Label","mstrmojo.ToolSeparator","mstrmojo.ui.ScrollableContainer","mstrmojo.ui.Pulldown");mstrmojo.requiresDescs(1442,8689,11952,11953,11954,11955,11956,11957,12136);var D=mstrmojo.hash,G=mstrmojo.Button.newWebButton,N=function(P){if(P){var O=P.t;return Math.round(O/10)==52||O==115;}return false;},L={},K,E,I,F,H,B=function(){var Q=this,T=Q.vis,V=[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",allowHTML:true,text:mstrmojo.desc(11952,"Use  <span>#</span> to filter the following targets:").replace("#",T.title),visible:true},{scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"VisContainer",cssClass:"mstrmojo-scrollable-container",children:[]},{scriptClass:"mstrmojo.ToolSeparator"},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-filter-type",cssDisplay:"table-cell",alias:"filterType",selectedIndex:(!!H&&H.length>0)&&!E&&!K?1:0,isHostedWithin:true,enabled:false,items:[{n:mstrmojo.desc(8689,"Filter"),v:true},{n:mstrmojo.desc(11953,"Highlight"),v:false}],onitemSelected:function(W){L.isFilter=W.v;this.isFilter=W.v;Q.csl.set("enabled",R>0&&this.isFilter);Q.forType.set("enabled",this.isFilter);},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-type-label",cssDisplay:"table-cell",text:mstrmojo.desc(11954,"data on selection"),visible:true},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-for-type",cssDisplay:"table-cell",alias:"forType",value:0,visible:false,selectedIndex:0,isHostedWithin:true,enabled:false,items:[{n:mstrmojo.desc(11955,"for #").replace("#",(I[0]||{}).n),v:false},{n:mstrmojo.desc(11956,"for All Data"),v:true}],onitemSelected:function(W){L.forAllData=W.v;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);}},{scriptClass:"mstrmojo.CheckBox",cssClass:"mstrmojo-clear-check",alias:"csl",checked:(K?K.showall:true),cssDisplay:"block",label:mstrmojo.desc(11957,"Allow users to clear all selections"),enabled:false,oncheckedChange:function(){L.clearAll=this.checked;}}],O=T.parent.children,P,S={},R=0,U=function(Y){var X=O[Y],Z,a,W;if(H){Z=mstrmojo.array.find(H,"k",X.k)!==-1;}else{if(I.length>0){if(I[0]&&I[0].sc&&I[0].sc.tks){Z=I[0].sc.tks.indexOf(X.k)>-1;}}}R+=Z?1:0;if(X!==T&&N(X.defn)){a=X.boxContent.getFilterType();W=X.boxContent.model.getSelectorControlMapInfo();S[X.k]={c:false,v:Z,ft:a,cgbs:W};V[1].children.unshift({scriptClass:"mstrmojo.CheckBox",cssDisplay:"block",label:X.title,checked:Z,oncheckedChange:function(){S[X.k]={c:true,v:this.checked,ft:a,cgbs:W};L.targetKeys=S;R+=this.checked?1:-1;Q.forType.set("enabled",R>0&&Q.filterType.isFilter);Q.filterType.set("enabled",R>0);Q.csl.set("enabled",R>0&&Q.filterType.isFilter);}});}};for(P=O.length-1;P>=0;P--){U(P);}this.addChildren(V);this.targetKeys=S;};mstrmojo.vi.ui.editors.VisAsFilterDialog=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.VisAsFilterDialog",title:mstrmojo.desc(12136,"Filtering options"),cssClass:"mstrmojo-vis-as-filter",btnAlignment:"right",vis:null,buttons:null,modal:true,visible:false,help:"filtering_options_dialog_box_html5.htm",onOpen:function C(){this.VisContainer.onOpen();},postBuildRendering:function A(){this._super();L={};},toggleFields:function J(){if(I.length!==0){this.forType.set("visible",true);this.filterType.set("enabled",true);}if(H&&H.length>0){this.filterType.set("enabled",true);}if(K){this.csl.set("enabled",true);}},preBuildRendering:function M(){var Q=this,O=Q.id,P=Q.vis.boxContent.model,R=Q.vis;I=(P.getSelectorControlMapInfo?P.getSelectorControlMapInfo():[]);if(I.length>0){K=I[0].sc;F=I[0].did;E=true;}else{H=R.defn.an;K=R.boxContent.selectorControl||(R.boxContent.findSelectorControl&&R.boxContent.findSelectorControl());E=false;}this.set("buttons",[G(mstrmojo.desc(1442,"OK"),function(){if(!D.isEmpty(L)){L.targetKeys=Q.targetKeys;L.singleUnit=E;if(E){L.unitId=F;}L.sc=K;R.model.setVisAsFilter(R,L);}mstrmojo.all[O].destroy();},true),G(mstrmojo.desc(221,"Cancel"),function(){mstrmojo.all[O].destroy();})]);B.call(this);this.toggleFields();this._super();}});mstrmojo.vi.ui.editors.VisAsFilterDialog.open=function(P){var O=mstrmojo.insert({scriptClass:"mstrmojo.vi.ui.editors.VisAsFilterDialog",vis:P});O.open();};}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.ui.menus.MenuConfig");var A=mstrmojo.func,J=mstrmojo.desc(2177,"Close");function G(L){return function(N,M){M.openMenu(L,N);};}mstrmojo.ui.menus.ToolbarConfig=mstrmojo.declare(mstrmojo.ui.menus.MenuConfig,null,{scriptClass:"mstrmojo.ui.menus.ToolbarConfig",btns:null,hasCloseButton:false,closeButtonText:J,addCloseButton:function E(L){this.hasCloseButton=true;if(L){this.closeButtonText=L;}},addToolbarBtn:function I(Q,M,P,L,N){var O={n:Q,cls:M,fn:P,ctxt:L};if(isNaN(N)||N>=this.btns.length){this.btns.push(O);}else{this.btns.splice(N,0,O);}return O;},addDisabledToolbarBtn:function I(N,L){var M=this.addToolbarBtn(N,(L||"")+" disabled",mstrmojo.emptyFn);M.dsbld=true;},addToolbarPickerBtn:function B(R,M,P,Q,L,N){var O={n:R,cls:M,fn:P,ctxt:L,tp:"pb",menufn:G(Q||this)};if(isNaN(N)||N>=this.btns.length){this.btns.push(O);}else{this.btns.splice(N,0,O);}},addMenuToolbarBtn:function H(P,L,O,M,N){if(!O&&!this.hasMenuItems()){return ;}this.addToolbarBtn(P,L,A.composite([G(O||this),(N||mstrmojo.emptyFn)]),null,M);},addToggleToolbarButton:function D(S,O,Q,N,M,R,L){var P=this.getToggleItemStates(S,O,Q,N,R,L);this.addDualStateItem(M,P[0],P[1],true);},addDualStateItem:function K(M,L,N,O){this["add"+(O?"ToolbarBtn":"MenuItem")](L.n,L.cls,this.getDualStateHandler(M,L,N),L.ctxt);},getDualStateHandler:function C(M,L,N){var O=this._super(M,L,N);return function(P,Q){O.call(this,P,Q);Q.refresh();};},clear:function F(){this.btns=[];this.hasCloseButton=false;this.closeButtonText=J;this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.array","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._Formattable","mstrmojo._IsDocumentTemplate","mstrmojo.Label","mstrmojo.ui.menus.MenuConfig");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");var T={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"};var D=["background-color","fx"],I=mstrmojo.array;mstrmojo.VisBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._IsDocumentTemplate],{scriptClass:"mstrmojo.VisBase",updated:false,waitingForData:false,node:null,skipReRender:false,updateFormatsOnUpdate:true,setModel:function M(Z){this.set("model",Z);},destroy:function W(){var Z=this.model;if(Z&&Z.destroy){Z.destroy();delete this.model;}this._super();},resize:function X(){var Z=this.getFormats();if(parseInt(Z.height,10)===0||parseInt(Z.width,10)===0){this.domNode.style.display="none";}else{this.setDimensions(Z.height,Z.width);this.domNode.style.display="";}},setDimensions:function O(b,a){var Z=this._super(b,a);if(Z&&this.hasRendered&&!this.skipReRender){this.reRender();}return Z;},reRender:function F(){this.unrender();this.render();},getWidth:function B(){return parseInt(this.width,10);},getHeight:function K(){return parseInt(this.height,10);},getLeft:function R(){return parseInt(this.left,10);},getTop:function A(){return parseInt(this.top,10);},buildRendering:function H(){this.height=this.getHeight();this.width=this.getWidth();this.left=this.getLeft();this.top=this.getTop();if(!this.updated){this.update();}this._super();},initFromVisProps:function V(){},postBuildRendering:function(){var Z=this.isEmpty();this._super();this.raiseEvent({name:"toggleCtrlOverlay",visible:Z,controls:this.getVisEmptyMsgControls()});this.applyBackground();return !Z;},applyBackground:function(){var a=this.defn&&this.defn.fmts,f=(a&&a.p_fmts)||a,c={},d,Z,e,b;if(mstrApp.isExpress&&f){d=this.formatHandlers=this.formatHandlers||{};e=d.domNode=d.domNode||[];Z="BG";b=I.indexOf(e,Z);if(b<0){e.push(Z);}I.forEach(D,function(g){if(f[g]){c[g]=f[g];}});this.applyCSSFormatToNode("domNode",c);}},update:function G(c){c=c||this.node;if(c){var Z=c.data;if(Z){this.model.set("data",Z);}this.waitingForData=!!Z.nsj;if(this.waitingForData){var a="ServerJsonRWDStyle";var d=this.model,b=d.getDataService(),e={host:this,nodes:[this.k]},g;if(Z.wid!==undefined){e.slices=[Z.wid];}g=mstrmojo.func.wrapMethods(d.docModel.getUpdateColorMapCallback(),d.docModel.getUpdateThemePaletteCallback(true),d.controller._getXtabCallback(this));b.retrieveServerJson(e,g,{preserveUndo:true,style:{name:a,params:{treesToRender:3}},params:{styleName:a}});this.updated=true;return false;}this.updateContentFormats(c);}if(this.model){var h=this.model&&this.model.docModel;this.initFromVisProps(this.model.vp);if(h&&h.getDocBuilder){var f=h.getDocBuilder().getMojoVisName(c);if(f){c.data.visName=f;}}}this.updated=true;if(this._super){return this._super(c);}return true;},updateContentFormats:function(e){var d=this.parent,c=e.defn,Z=c&&c.fmts;if(this.updateFormatsOnUpdate&&Z){if(this.clearFormats){this.clearFormats();}if(d&&d._createFormats&&!Z.p_fmts){d._createFormats();}Z=(this.getFormats&&this.getFormats())||Z;for(var b in T){if(T.hasOwnProperty(b)){var a=T[b];if(b in Z){this[a]=Z[b];}}}}},isEmpty:function L(){return false;},getVisEmptyMsgControls:function C(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(11668,"Drag objects here.")}];},getModel:function N(){return this.model;},getData:function J(){return this.model.data;},getRowsAndCols:function(){var Z=this.model.data.gts;return(Z.row||[]).concat(Z.col||[]);},getExp:function(){var Z=this.model.data,a=Z&&Z.sc&&Z.sc.exp;return a;},getDocModel:function S(){return this.model&&this.model.docModel;},getTitleRMCPopup:mstrmojo.emptyFn,getMenuHandler:function U(){return mstrmojo.emptyFn;},renderErrorMessage:function Y(Z){this.domNode.innerHTML='<div class="mstrmojo-message">'+Z+"</div>";},getMessageID:function E(){return this.model.docModel.mid||this.model.mid;},performAction:function Q(Z){var b=this.model.getAction(Z),a=b&&b.h;if(a&&this.controller[a]){this.controller[a](this,b.a);return true;}return false;},findSelectorControl:function P(){var a=this.getData(),Z=a&&a.sc;if(Z&&parseInt(Z.ct,10)===6){this.selectorControl=Z;this.isMultiSelect=true;}else{delete this.selectorControl;}return this.selectorControl;}});})();(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.toolbars.Toolbar","mstrmojo.css");var D=mstrmojo.css;var B;mstrmojo.vi.ui.toolbars.TitleToolbar=mstrmojo.declare(mstrmojo.vi.ui.toolbars.Toolbar,null,{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",init:function F(H){this._super(H);D.addWidgetCssClass(this,"mstrmojo-VITitleToolbar");},markupMethods:{onvisibleChange:function A(){var H=this.visible,I=this.domNode;D.toggleClass(I,"visible",H);if(!H){D.onTransitionEnd(I,function(){D.addClass(I,"hidden");});}else{D.removeClass(I,"hidden");}}},getItemMarkup:function E(H){if(!B){B=this._super(H).replace("{@en@n}",'<div class="icn"></div>');}return B;},ontoolbarCfgChange:function G(H){var I=H.value;if(I){I.addMenuToolbarBtn("","mnu");if(I.hasCloseButton){I.addToolbarBtn(I.closeButtonText,"cls",function(K,J){J.parent.close();});}}this._super(H);},onItemContextMenu:function C(H){this.closePopup();if(H.fn){H.fn(H,this);return true;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.vi._MonitorsAppState","mstrmojo.EditableLabel","mstrmojo.vi.ui.toolbars.TitleToolbar");var I=mstrmojo.dom;mstrmojo.vi.ui.TitleBar=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.TitleBar",markupString:'<div id="{@id}" class="mstrmojo-VITitleBar {@cssClass}" style="{@cssText}" mstrAttach:contextmenu,click><div class="left-toolbar"></div><div class="title-text"></div><div class="right-toolbar"></div></div>',markupSlots:{leftToolNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.childNodes[1];},rightToolNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode;}},markupMethods:{ontitleChange:function(){this.lblTitle.set("text",this.title||" ");},ontoolbarCfgChange:function(){var O=this.toolbarCfg;if(!O){return ;}this.tbToolbar.set("toolbarCfg",O);this.doLayout();},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{w:{leftToolNode:"auto",textNode:"100%",rightToolNode:"auto"},h:{leftToolNode:"100%",textNode:"100%",rightToolNode:"100%"},xt:true},lblTitle:null,tbToolbar:null,editTitleOnClick:false,editTitleOnDoubleClick:true,title:"",close:mstrmojo.emptyFn,toolbarCfg:null,titleEdited:mstrmojo.emptyFn,useRichTooltip:true,init:function N(O){this._super(O);this.addChildren([].concat(this.getLeftToolbarChildren()).concat(this.getTitleChildren()).concat(this.getRightToolbarChildren()));},shouldShowTooltip:function J(O,Q){var P=O.target||I.eventTarget(O.hWin,O.e);return P===this.textNode.firstChild&&(P.scrollWidth>P.clientWidth);},getTooltipContent:function K(O){var Q=O.target||I.eventTarget(O.hWin,O.e),P=Q.innerHTML;return P;},showTooltip:function L(O,P){if(this.shouldShowTooltip(O,P)){this._super(O,P);}},updateTooltipConfig:function H(P){var Q=P.target||I.eventTarget(P.hWin,P.e),O=I.position(Q);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.getTooltipContent(P),top:O.y+O.h+3,left:O.x+4,cssClass:"vi-regular vi-tooltip-A"};},getLabelNode:function C(){return this.lblTitle.domNode;},getMenuConfig:function B(){var O=this.toolbarCfg;if(O){if(O.hasMenuItems()){return O;}}return null;},setToolbarVisibility:function D(O){this.tbToolbar.set("visible",O);},editTitle:function M(){this.lblTitle.set("isEditing",true);},onAppStateChange:function F(O){var P=this.lblTitle,Q=O.value===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION,R=O.valueWas===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION;if(Q&&this._confgTitleEditable===undefined){this._confgTitleEditable=this.editTitleOnClick||this.editTitleOnDoubleClick;}P.set("isEditing",false);if(Q||R){P.set("editOnDoubleClick",!Q&&this._confgTitleEditable);}},getLeftToolbarChildren:function A(){},getTitleChildren:function G(){return[{scriptClass:"mstrmojo.EditableLabel",slot:"textNode",alias:"lblTitle",bindings:{editOnClick:"this.parent.editTitleOnClick",editOnDoubleClick:"this.parent.editTitleOnDoubleClick",selectable:"this.isEditing"},onTextEditComplete:function(Q,P){this.parent.titleEdited(this.text,Q,P);},getLayoutOffsets:function O(){return{h:2,w:2};}}];},getRightToolbarChildren:function E(){return[{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",slot:"rightToolNode",alias:"tbToolbar",visible:true,useRichTooltip:true}];}});}());(function(){mstrmojo.requiresCls("mstrmojo.VisBase","mstrmojo.DocPortlet");var L={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"},P,B;mstrmojo.Vis=mstrmojo.declare(mstrmojo.VisBase,null,{scriptClass:"mstrmojo.Vis",offsetTop:0,offsetLeft:0,isAndroid:window.navigator.userAgent.indexOf("Android")!=-1,reRenderOnDimensionChg:true,isVis:function(){return true;},setModel:function Q(R){this._super(R);if(R.data){this.set("model",R.data);}this.xtabModel=R;if(this.controller&&typeof (this.controller.getPageByTree)!="undefined"){this.controller.getPageByTree(false);}},destroy:function O(){this._super();var R=this.xtabModel;if(R&&R.destroy){R.destroy();delete this.xtabModel;}},setDimensions:function N(T,S){var R=this._super(T,S);if(R&&this.hasRendered&&this.reRenderOnDimensionChg){this.reRender();}return R;},buildRendering:function M(){if(this.parent instanceof mstrmojo.DocPortlet){delete this.left;delete this.top;this.height=this.fmts&&this.fmts.height;}this._super();},postBuildRendering:function G(){P=this.width;B=this.height;this.adjustWidgetOffsets();this._super();},adjustWidgetOffsets:function E(){var R=this.domNode,S={top:0,left:0};if(typeof (mstr)!="undefined"&&mstr.utils.BoxModel){S.top=mstr.utils.BoxModel.getElementSumOffsetTop(R);S.left=mstr.utils.BoxModel.getElementSumOffsetLeft(R);}else{if(typeof (mstrmojo)!="undefined"){S=mstrmojo.boxmodel.offset(R);}}this.offsetTop=S.top;this.offsetLeft=S.left;},update:function F(V){V=V||this.node;if(V){if(V.data){this.set("model",V.data);if(this.xtabModel&&this.xtabModel.set){this.xtabModel.set("data",V.data);}this.model=V.data;if(this.model.layoutModel){this.layoutModel=this.model.layoutModel;}if(this.model.layoutNode){this.layoutNode=this.model.layoutNode;}mstrmojo.hash.copy(V.data.extProps,this);}var T=this.controller,S=T.view,X=(S.hasRendered&&S.getCurrentLayout&&S.getCurrentLayout());if(T.view.fullScreenInfoWindow&&(X&&X.defn.visName)){var W=mstrApp.rootView.getContentDimensions();this.height=W.h+"px";this.width=W.w+"px";}else{this.fmts=V.defn.fmts||V.defn.units[this.model.k].fmts;var R=this.fmts;if(R){for(var U in L){v=L[U];if(U in R){this[v]=R[U];}}}}}if(this.model){this.initFromVisProps(this.model.vp);}this.updated=true;return true;},getModel:function A(S){if(S){var R=mstrmojo.Vis.getVisGrid(this.layoutModel,this.layoutNode,S);if(R){return R.data;}else{alert(mstrmojo.desc(8427,"Incorrect visualization properties encountered.  Data may be inconsistent.  Please reset your properties."));return{};}}else{return this.model;}},getDataParser:function K(R){return new mstrmojo.Vis.DataParser(this.getModel(R));},renderErrorMessage:function H(R){this.domNode.innerHTML='<div class="mstrmojo-message">'+R+"</div>";},getMessageID:function J(){return this.model.mid&&this.model.mid||this.xtabModel&&this.xtabModel.docModel&&this.xtabModel.docModel.mid;},hasNoninfowindowTarget:function D(U){var b=this.xtabModel,a=(b&&b.docModel);var c=false;if(a){var Z=a.defn&&a.defn.layouts,T=null;var S;if(Z){for(S in Z){if(Z[S].loaded){T=Z[S];break;}}}var V=T&&T.units;this.selectorTargets={};if(V&&U.scObjList){for(var S=0;S<U.scObjList.length;S++){var W=U.scObjList[S];var X=W.sc.tks.split("\x1E");for(var R=0;R<X.length;R++){var Y=V[X[R]];if(Y){this.selectorTargets[X[R]]=Y;if(!this.isChildOfIfw(V,Y)){c=true;}}}}}}return c;},isChildOfIfw:function I(R,S){while(S){if(S.ifw){return true;}S=R[S.pnk];}return false;},performAction:function C(R){var T=this.xtabModel.getAction(R),S=T&&T.h;if(S&&this.controller[S]){this.controller[S](this,T.a);return true;}return false;}});mstrmojo.Vis.getVisGrid=function(R,Y,S){var W=Y;var U=R.getChildren(Y,false);for(var T=0;T<U.length;T++){var X=U[T];if(X.k==S){return X;}else{var V=mstrmojo.Vis.getVisGrid(R,X,S);if(V){Y=W;return V;}}}};mstrmojo.Vis.DataParser=function(T){var a=mstrmojo.Vis;return{getRowTitles:function(){return new a.Titles(T,true);},getColTitles:function(){return new a.Titles(T,false);},findMetricValue:function(f,k){var j=T.ghs.rhs.items;for(var g in j){var h=j[g].items;var d=true;for(var b in f){if(f[b]!=h[b].idx){d=false;break;}}if(d){return new mstrmojo.Vis.MetricValue(T.gvs.items[g].items[k]);}}},getTotalRows:function W(){var b=T.ghs&&T.ghs.rhs&&T.ghs.rhs.items;return(T.eg||!b)?0:b.length;},getTotalColHeaderRows:function U(){return(!T.ghs.chs.items?0:T.ghs.chs.items.length);},getTotalCols:function R(){return this.getColHeaders(0).size();},getRowHeaders:function Z(b){return new a.Headers(T,b,true);},getColHeaders:function Y(b){return new a.Headers(T,b,false);},getMetricValue:function X(c,b){return new a.MetricValue(T,T.gvs.items[c].items[b]);},getColumnHeaderCount:function V(){return T.gvs.items[0].items.length;},getCSSString:function S(){return T.cssString;}};};mstrmojo.Vis.Titles=function(R,W){var V=(W)?R.gts.row:R.gts.col;return{size:function U(){return V.length;},getTitle:function T(X){return new mstrmojo.Vis.Title(V[X]);},getCSS:function S(X){return R.css[V[X].cni].n;}};};mstrmojo.Vis.Headers=function(S,T,X){var Y=(X)?S.gts.row:S.gts.col;var W=(X)?S.ghs.rhs:S.ghs.chs;var U=W.items&&W.items[T].items;return{size:function Z(){return(!U?0:U.length);},getHeader:function R(a){return U&&U[a]&&new mstrmojo.Vis.Header(U[a],X?Y[a]:Y[T]);},getCSS:function V(a){return U&&S.css[U[a].cni].n;},getHeaderCell:function(a){return U&&U[a];}};};mstrmojo.Vis.Title=function(S){return{getActionType:function(){return S.at;},getDrillPath:function(){return S.dp;},getHeaderValues:function R(){return S.es;},getHeaderName:function T(V){return S.es[V].n;},getHeaderId:function T(V){return S.es[V].id;},getForms:function U(){return S.fs;},getFormId:function(){return S.fid;},getFormType:function(){return S.ftp;},getUnitId:function(){return S.id;},getLinkMap:function(){return S.lm;},getName:function(){return S.n;},getUnitDssType:function(){return S.otp;},getSelectorControl:function(){return S.sc;}};};mstrmojo.Vis.Header=function(T,R){return{getName:function V(){return(T.idx===-1)?"":R.es[T.idx].n;},getElementId:function Y(){return(T.idx===-1)?"":R.es[T.idx].id;},getObjectId:function U(){return(T.idx===-1)?"":R.es[T.idx].oid;},getElementIndex:function S(){return T.idx;},getActionType:function X(){return T.at;},isTotal:function W(){return T.otr===1;}};};mstrmojo.Vis.MetricValue=function(R,Y){var X=Y;return{getValue:function S(){return X.v;},getThresholdType:function T(){return X.ty;},getRawValue:function W(){return X.rv;},getCSS:function U(){return R.css[X.cni].n;},getThresholdValue:function Z(a){if(X.ti==undefined){return a;}return R.th[X.ti].n;},getFillColor:function V(a){if(X.ci==undefined){return a;}return R.fc[X.ci].n;}};};})();(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.ToolbarConfig");mstrmojo.vi.ui.toolbars._HasToolbar=mstrmojo.provide("mstrmojo.vi.ui.toolbars._HasToolbar",{_mixinName:"mstrmojo.vi.ui.toolbars._HasToolbar",preBuildRendering:function A(){this.generateToolbar();return this._super();},generateToolbar:function B(){this.passToolbarCfg(this.updateToolbar(new mstrmojo.ui.menus.ToolbarConfig()));},updateToolbar:function D(E){if(this._super){E=this._super(E);}return E;},passToolbarCfg:function C(E){var F=this.toolbar.toolbarCfg;if(F){F.destroy();}this.toolbar.set("toolbarCfg",E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.desc","mstrmojo.vi.ui.NumberFormatter");var B=mstrmojo.desc;mstrmojo.vi.ui.NumberFormatterEditor=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.vi.ui.NumberFormatterEditor",onSubmenuOpen:function A(){},myData:null,oldData:null,formatValue:null,onOK:mstrmojo.emptyFn,children:[{scriptClass:"mstrmojo.vi.ui.NumberFormatter",bindings:{myData:"this.parent.myData",oldData:"this.parent.oldData",formatValue:"this.parent.formatValue"}},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-subtotals-button",children:[{scriptClass:"mstrmojo.Button",text:B(221,"Cancel"),onclick:function(){this.parent.parent.onSubmenuClosed();}},{scriptClass:"mstrmojo.Button",text:B(1442,"OK"),onclick:function(){var C=this.parent.parent,D=C.xtab;C.onSubmenuClosed();this.parent.parent.onOk();}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.AdvancedColorPickerPopup","mstrmojo.Label","mstrmojo.HBox","mstrmojo.array","mstrmojo.ui.Checkbox");function A(G,H){var E=new mstrmojo.Label({text:G}),F=[H,E];mstrmojo.array.forEach(F,function(I){I.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",children:F};}function C(){var F=this,G=F.parent.sourceColor;var E=new mstrmojo.ui.Checkbox({cssDisplay:"inline-block",checked:F.isChecked,oncheckedChange:function(){var H=this.checked;if(H){F.set("color",G);F.colorChanged(G);}}});F.addChildren([A(F.parent.checkboxLabel,E)]);}mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker=mstrmojo.declare(mstrmojo.ui.editors.controls.AdvancedColorPickerPopup,null,{scriptClass:"mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker",isChecked:false,init:function D(E){this._super(E);if(this.parent.sourceColor===this.parent.selectedValue){this.isChecked=true;}},renderContent:function B(){this._super();if(this.parent.checkboxLabel){C.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Vis","mstrmojo._HasOwnAvatar");var K=mstrmojo.css,I=mstrmojo.dom,F="px";function B(Q,P){return{x:Q.x-P.x,y:Q.y-P.y};}function M(Q,P){return(Q.x-P.x)*(Q.x-P.x)+(Q.y-P.y)*(Q.y-P.y);}function N(P){var Q=P.src.data;return(!Q||!Q.isScrollBar);}mstrmojo.VisLegend=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.gm.VisLegend",bodyCssClass:"",avatarCssClass:"legend-dragged",dropZoneHighlightCss:"legend-dropZone",ownAvatar:true,draggable:true,dropZone:true,dockedPositions:null,calculateDockedPositions:mstrmojo.emptyFn,widget:null,boundaryNode:null,draggableNodeName:"domLegend",legendMarkup:"",extrasMarkup:"",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;position:absolute;" mstrAttach:click,mouseover,mouseout><div class="gm-legend-bg"><div class="{@bodyCssClass}" style="width:{@width}px;height:{@height}px;text-decoration:inherit">{@legendMarkup}</div></div><div class="gm-anchor-point topLeft"></div><div class="gm-anchor-point topRight"></div><div class="gm-anchor-point bottomLeft"></div><div class="gm-anchor-point bottomRight"></div>{@extrasMarkup}</div>',markupSlots:{dropZoneNode:function(){return this.domNode;},domLegend:function(){return this.domNode.firstChild.firstChild;}},postBuildRendering:function(){this._super();this.calculateDockedPositions(this.widget.getWidth(),this.widget.getHeight());this.boundaryNode=this.widget.domNode;this.boundaryPosition=I.position(this.boundaryNode,true);},createAvatar:function D(){return this[this.draggableNodeName];},updateDropZoneNode:function C(R){var P=this.dockedPositions;if(P&&P.length>0){var W=B(R.tgt.pos,this.boundaryPosition);var U=M(W,P[0]),T=0,Q,V;for(Q=1;Q<P.length;Q++){V=M(W,P[Q]);if(V<U){U=V;T=Q;}}if(T!==this.currDockedPositionIdx){var S=this.dropZoneNode.style;S.left=P[T].x+F;S.top=P[T].y+F;if(this.widget.onLegendDropZoneChange){this.widget.onLegendDropZoneChange(P[T],T);}this.currDockedPositionIdx=T;this.updateAlignClass();return true;}}return false;},toggleDropZoneBorder:function O(P){K.toggleClass(this.dropZoneNode,this.dropZoneHighlightCss,P);},isDragValid:N,ondragstart:function E(P){if(!N(P)){return ;}this._super(P);this.toggleDropZoneBorder(true);},ondragmove:function A(P){if(!N(P)){return ;}this.updateDropZoneNode(P);this._super(P);},allowDrop:function H(P){var R=P.src,Q=R&&R.widget;return(Q&&Q!==this&&Q.parent===this.parent);},ondrop:function J(R){var P=this.domLegend;K.removeClass(P,this.avatarCssClass);var S=P.style;S.left="0";S.top="0";this.dropZoneNode.firstChild.appendChild(P);if(this.widget.onLegendDropped){var Q=this.getDockedPosition();this.widget.onLegendDropped(Q&&Q.pos);}R.dropSuccessful=true;},getDockedPosition:function G(){return this.dockedPositions&&this.dockedPositions[this.currDockedPositionIdx];},ondragend:function A(P){if(!N(P)){return ;}this._super(P);if(!P.dropSuccessful){this.ondrop(P);}this.toggleDropZoneBorder(false);},positionAvatar:function L(U){var R=this,Q=this.avatar,S=Q.style,T=this.boundaryPosition;var P=function(V,W){if(V==="x"){if(W<T.x){return T.x;}return Math.min(W,T.x+T.w-R.domNode.offsetWidth);}if(V==="y"){if(W<T.y){return T.y;}return Math.min(W,T.y+T.h-R.domNode.offsetHeight);}};S.left=P("x",U.x)+F;S.top=P("y",U.y)+F;}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TitleBar","mstrmojo.Image","mstrmojo.css");mstrmojo.vi.ui.CollapsibleTitleBar=mstrmojo.declare(mstrmojo.vi.ui.TitleBar,null,{scriptClass:"mstrmojo.vi.ui.CollapsibleTitleBar",btnCollapse:null,canCollapse:false,isCollapsed:false,collapse:mstrmojo.emptyFn,onToggleCollapseByUI:mstrmojo.emptyFn,setToolbarVisibility:function C(D){if(!D||!this.isCollapsed){this._super(D);}},onisCollapsedChange:function B(){if(this.canCollapse){var D=this.isCollapsed;this.parent.set("isCollapsed",D);}},getLeftToolbarChildren:function A(){var D=this;return[{scriptClass:"mstrmojo.Image",slot:"leftToolNode",alias:"btnCollapse",onclick:function(){var E=this.parent;if(E.canCollapse){E.set("isCollapsed",!E.isCollapsed);D.onToggleCollapseByUI();}}}];}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.vi.ui.CollapsibleTitleBar,{oncanCollapseChange:function(){this.btnCollapse.set("visible",this.canCollapse);},onisCollapsedChange:function(){mstrmojo.css.toggleClass(this.domNode,"collapsed",this.isCollapsed);}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TitleBar","mstrmojo.ui.menus._HasMenuPopup");function E(H,F){var G=this.domPopupPH;G.style.top=H.y+"px";G.style.left=H.x+"px";G.innerHTML="";document.body.appendChild(G);F.hostId=this.id;F.hostElement=G;mstrmojo.css.toggleClass(G,mstrApp.getThemeClassName(),true);this.openPopup(F.newInstance());}function B(){var G=this.domPopupPH,H=G.firstChild,F=G.parentNode;if(H){G.removeChild(H);}if(F){F.removeChild(G);}}function A(G){var F;if(typeof this.parent.boxContent.getTitleRMCPopup==="function"){F=this.parent.boxContent.getTitleRMCPopup.call(this);}if(F){E.call(this,G,F);}}mstrmojo.vi.ui.TitleBarWithRMCPopup=mstrmojo.declare(mstrmojo.vi.ui.TitleBar,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.TitleBarWithRMCPopup",markupString:'<div id="{@id}" class="mstrmojo-VITitleBar {@cssClass}" style="{@cssText}" mstrAttach:contextmenu, click><div class="left-toolbar"></div><div class="title-text"></div><div class="right-toolbar"></div></div>',init:function D(F){this._super(F);var G=document.createElement("div");G.setAttribute("class","gm-menu-placeholder");this.domPopupPH=G;},oncontextmenu:function C(F){A.call(this,{x:F.e.pageX+2,y:F.e.pageY+2});},unrender:function(){this._super();B.call(this);},onclick:function(){B.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TitleBarWithRMCPopup","mstrmojo.vi.ui._IsUnitContainerTitleBar","mstrmojo.vi.ui.toolbars.TitleToolbar");function C(F,D,E){return[{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",slot:F+"ToolNode",alias:D,visible:true,useRichTooltip:E}];}mstrmojo.vi.ui.VizBoxTitleBar=mstrmojo.declare(mstrmojo.vi.ui.TitleBarWithRMCPopup,[mstrmojo.vi.ui._IsUnitContainerTitleBar],{scriptClass:"mstrmojo.vi.ui.VizBoxTitleBar",leftToolbar:undefined,getLeftToolbarChildren:function A(){return C("left","leftToolbar",false);},getRightToolbarChildren:function B(){return C("right","tbToolbar",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.CollapsibleTitleBar","mstrmojo.ui.menus.ToolbarConfig","mstrmojo.ui.menus.Menu","mstrmojo.dom","mstrmojo.css");var F=mstrmojo.css,C="visible",G="containerNode";function E(Q){Q.btn.style.display=!!Q.menuCfg?"block":"none";}mstrmojo.vi.ui._IsPanel=mstrmojo.provide("mstrmojo.vi.ui._IsPanel",{_mixinName:"mstrmojo.vi.ui._IsPanel",markupString:'<div id="{@id}" class="mstrmojo-VIPanel {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="mstrmojo-VIPanel-titlebar"></div><div class="mstrmojo-VIPanel-content"></div><div class="mstrmojo-VIDND-mask"></div><div class="mstrmojo-VIPanel-handle splitter v"></div></div>',markupSlots:{titlebarNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.childNodes[1];},maskNode:function(){return this.domNode.childNodes[2];},handleNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onisCollapsedChange:function L(){if(this.canCollapse){this.containerNode.style.display=this.isCollapsed?"none":"block";if(!this.isCollapsed){this.doLayout();}}}},title:"",titleBar:null,titlebarNode:null,containerNode:null,maskNode:null,handleNode:null,bubbleMouseOver:true,canCollapse:false,isCollapsed:false,autoHideToolbar:false,init:function K(Q){this._super(Q);this.addChildren([this.getTitleBarCfg()]);this.menuBtnInfo={};},skipsSlotLayout:function(Q){return Q===G&&this.isCollapsed;},getTitleBarCfg:function P(){return{scriptClass:"mstrmojo.vi.ui.CollapsibleTitleBar",slot:"titlebarNode",alias:"titleBar",isCollapsed:this.isCollapsed,title:this.title,close:function(){this.parent.setOpenStatus(false);mstrApp.rootCtrl.generateToolbar();},collapse:function(Q){this.parent.set("isCollapsed",Q);}};},ontitleChange:function H(){this.titleBar.set("title",this.title);},_set_children:function A(T,R,Q){if(R!==this.children){var S=this.titleBar;if(S){R.push(S);}}return this._super(T,R,Q);},preBuildRendering:function I(){this.generateToolbar();this.titleBar.setToolbarVisibility(!this.autoHideToolbar);return this._super();},generateToolbar:function B(){var Q=this.titleBar;Q.set("toolbarCfg",this.updateToolbar(new mstrmojo.ui.menus.ToolbarConfig()));if(!Q.visible){this.menuBtnInfo.menuCfg=Q.getMenuConfig();}},updateToolbar:function O(Q){return Q;},setOpenStatus:function N(Q){if(this.visible!==Q){this.set("visible",Q);this.parent.doLayout();}},setTitleBarVisibility:function D(Q){var S=this.titleBar;S.set("visible",Q);this.generateToolbar();var T=this.menuBtnInfo,R=T.btn;if(!R){R=T.btn=document.createElement("div");R.className="hover-menu-btn";var U=this.id;mstrmojo.dom.attachEvent(R,"click",function(){var W=mstrmojo.all[U],V=T.menuCfg;V.hostId=U;V.hostElement=R;W.openPopup(new mstrmojo.ui.menus.Menu({popupConfig:V}));});this.domNode.appendChild(R);}T.menuCfg=Q?null:S.getMenuConfig();E(T);this.doLayout();},onmouseover:function M(Q){if(!mstrApp.isInteractive()){return ;}if(!this.bubbleMouseOver){Q.cancel();}var S=this._panelTimeout;if(S){window.clearTimeout(S);delete this._panelTimeout;}if(this.autoHideToolbar){this.titleBar.setToolbarVisibility(true);}var R=this.menuBtnInfo;if(!!R.menuCfg){F.addClass(R.btn,C);}},onmouseout:function J(){var Q=this.id;this._panelTimeout=window.setTimeout(function(){var R=mstrmojo.all[Q];if(R){if(R.autoHideToolbar){R.titleBar.setToolbarVisibility(false);}var S=R.menuBtnInfo;if(!!S.menuCfg){F.removeClass(S.btn,C);}}},200);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.array","mstrmojo.hash","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.LineStyleButton");var L=mstrmojo.emptyFn,I=mstrmojo.array,C=mstrmojo.hash,E=mstrmojo.gm.EnumCombinedLineStyle;var J={LINE_COLOR:"Clr",LINE_STYLE:"Style"},A={"1pt solid":E.THIN,"2pt solid":E.THICK,"1pt dashed":E.DASHED,"1pt dotted":E.DOTTED,none:E.NONE};function D(P,O){return C.copy(O,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"lineColor",slot:P,selectedValue:"#000000",postselectedValueChange:function(Q){if(this.propName){this.parent.parent.raiseFormatValueChange(this.propName,Q.value,Q.valueWas);}},postclick:function(Q){this.parent.parent.postclick(Q);}});}function K(P){return{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:true,showNoneOption:true,defaultSelectedIndex:3,propName:undefined,alias:"lineStyle",slot:P,postInit:function O(){var Q=["mstrmojo-ui-LineStyle"];if(!this.showNoneOption){Q.push("no-none");}mstrmojo.css.addWidgetCssClass(this,Q);(this.list.items||[]).forEach(function(R){R.v=(A[R.id]!==undefined?A[R.id]:A["not defined"]);});},onshowNoneOptionChange:function(Q){var R=["no-none"];if(!Q.value){mstrmojo.css.addWidgetCssClass(this,R);}else{mstrmojo.css.removeWidgetCssClass(this,R);}var S=this.hasRendered;if(S){this.refresh();}},postselectedValueChange:function(R){this._super();var Q=I.find(this.list.items,"id",R.value);if(Q===-1){Q=this.defaultSelectedIndex;}var S=this.list.items[Q].v;if(this.propName){this.parent.parent.setChildEnable(J.LINE_COLOR,S!==A.none);this.parent.parent.raiseFormatValueChange(this.propName,S,A[R.valueWas]);}},postclick:function(Q){this.parent.parent.postclick(Q);}};}mstrmojo.ui.editors.controls.LineConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.LineConfigGroup",propNames:undefined,postclick:L,hideColorControl:false,showGradient:false,showNoFillInColor:true,showAutomaticInColor:false,showNoneOption:true,lineColorAndStyle:undefined,lineTitle:undefined,init:function N(Q){this._super(Q);var O=[],R;O.push(K("col1Node"));if(!this.hideColorControl){O.push(D("col2Node",{showGradient:this.showGradient,showNoFill:this.showNoFillInColor,showAutomatic:this.showAutomaticInColor}));}else{R={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}var P=[];if(this.lineTitle&&this.lineTitle!==""){P.push(new mstrmojo.Label({text:this.lineTitle}));}P.push(C.copy(R,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"lineColorAndStyle",children:O}));this.addChildren(P);},getChildComp:function M(O){if(O.indexOf(J.LINE_COLOR)!==-1){return this.lineColorAndStyle.lineColor;}if(O.indexOf(J.LINE_STYLE)!==-1){return this.lineColorAndStyle.lineStyle;}return null;},iniChildrenComp:function G(P){I.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);var O=this.lineColorAndStyle.lineStyle;O.showNoneOption=this.showNoneOption;O.postInit();},onshowNoneOptionChange:function(O){this.lineColorAndStyle.lineStyle.set("showNoneOption",O.value);},setChildValue:function F(Q,R){var O=this.getChildComp(Q);if(O===undefined){return false;}var P;switch(O.alias){case"lineColor":if(R!==O.selectedValue){O.set("selectedValue",typeof R==="undefined"?"conflict":R);}break;case"lineStyle":if(typeof R==="undefined"){O.list.clearSelect();this.syncControls(function(){O.set("selectedValue","conflict");});}else{P=I.find(O.list.items,"v",R);if(P===-1){P=O.defaultSelectedIndex;}var S=O.list.items[P].id;if(S!==O.selectedValue){O.set("selectedValue",S);}}break;}},setChildEnable:function H(Q,P){var O=this.getChildComp(Q);if(O!==undefined){O.set("enabled",P);}},setChildrenValue:function B(O){O.forEach(function(P){this.setChildValue(P[0],P[1]);});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.hash","mstrmojo.array","mstrmojo.ValidationTextBox","mstrmojo.expr");var K=mstrmojo.emptyFn,B=mstrmojo.hash,H=mstrmojo.array,I=mstrmojo.expr.DTP,F={FILL_COLOR:"Clr",FILL_TRANSPARENT:"FillTrans"},C=1,J=2;function N(T,Q,P,S,R){return{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"fillColor",slot:T,showNoFill:S!==false,showAutomatic:!!R,showGradient:P!==false,selectedValue:"#000000",isHostedWithin:Q||false,postselectedValueChange:function(U){if(this.propName&&this.parent&&this.parent.parent){this.parent.parent.raiseFormatValueChange(this.propName,U.value,U.valueWas);}},postclick:function(U){this.parent.parent.postclick(U);}};}function O(Q){return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillAlpha",slot:Q,col1Width:"100%",col2Width:"10px",children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"fillAlphaText",slot:"col1Node",value:"100",cssText:"text-align:right",dtp:I.INTEGER,required:true,constraints:{min:0,max:100},onvalueChange:function(R){this.valueWas=R.valueWas;},onValid:function P(){if(this.propName&&this.value!==this.valueWas){this.parent.parent.parent.raiseFormatValueChange(this.propName,this.value,this.valueWas);}},postclick:function(R){this.parent.parent.parent.postclick(R);}},{scriptClass:"mstrmojo.Label",slot:"col2Node",text:"%"}]};}mstrmojo.ui.editors.controls.FillConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.FillConfigGroup",propNames:undefined,postclick:K,visibleControls:C+J,fillColorAndTrans:undefined,init:function M(T){this._super(T);var Q=[],W="col1Node",R=T&&T.colorPickerHostWithin,P=T&&T.showGradient,V=T&&T.showNoFill,S=T&&T.showAutomaticInColor,U;if((this.visibleControls&C)>0){Q.push(N(W,R,P,V,S));W="col2Node";}if((this.visibleControls&J)>0){Q.push(O(W));}if(Q.length===1){U={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}this.addChildren([B.copy(U,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillColorAndTrans",children:Q})]);},getChildComp:function L(P){if(P.indexOf(F.FILL_COLOR)!==-1){return this.fillColorAndTrans.fillColor;}if(P.indexOf(F.FILL_TRANSPARENT)!==-1){return this.fillColorAndTrans.fillAlpha.fillAlphaText;}return undefined;},iniChildrenComp:function E(P){this.propNames=P;H.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);},setChildValue:function D(Q,R){var P=this.getChildComp(Q);if(P===undefined){return false;}switch(P.alias){case"fillColor":if(R!==P.selectedValue){P.set("selectedValue",R==="undefined"?"conflict":R);}break;case"fillAlphaText":if(R!==P.value){P.set("value",R==="undefined"?"":R);}break;}},setChildEnable:function G(R,Q){var P=this.getChildComp(R);if(P!==undefined){P.set("enabled",Q);}},setChildrenValue:function A(P){P.forEach(function(Q){this.setChildValue(Q[0],Q[1]);});}});mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS={FILL_COLOR:C,FILL_TRANSPARENCY:J};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker");mstrmojo.ui.editors.controls.MarkerColorPickerButton=mstrmojo.declare(mstrmojo.ui.editors.controls.ColorPickerButton,null,{scriptClass:"mstrmojo.ui.editors.controls.MarkerColorPickerButton",sourceColor:null,checkboxLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker",alias:"colorPicker",slot:"widgetHostNode",color:this.selectedValue,colorChanged:function(A){this.parent.set("selectedValue",A);this.close();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.array","mstrmojo._HasLayout","mstrmojo.vi.ui._IsPanel","mstrmojo._HasPopup","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui._IsBoxLayoutChild","mstrmojo.vi.ui._IsDropTarget","mstrmojo.vi._MonitorsAppState","mstrmojo._Formattable","mstrmojo.vi.ui._IsUnitContainerTitleBar","mstrmojo.DynamicClassFactory","mstrmojo.Box","mstrmojo.css","mstrmojo.dom","mstrmojo.func","mstrmojo.models.FormatModel","mstrmojo.DocDataService","mstrmojo.vi.ui.TitleBar","mstrmojo.vi.models.EnumDragSources","mstrmojo.EnumRWUnitType");mstrmojo.requiresDescs(629,1388,11477,11478);var Q=mstrmojo.array,Ak=mstrmojo.css,AD=mstrmojo.dom,Ap=mstrmojo.vi.models.EnumDragSources,b=mstrmojo.models.FormatModel,Y=b.ENUM_PROPERTY_NAMES,W=mstrmojo.DocDataService.SUPPRESS_DATA,AV=1,AA="visible",AJ="ctrlOverlay",d="or-v",E="or-h";mstrmojo.vi.ui.rw.UnitContainerTitleBar=mstrmojo.DynamicClassFactory.newComponent(mstrmojo.vi.ui.TitleBar,[mstrmojo.vi.ui._IsUnitContainerTitleBar],{scriptClass:"mstrmojo.vi.ui.rw.UnitContainerTitleBar"});var AZ={n:mstrmojo.desc(11477,"Hide Titlebar"),cls:"htb",fn:function(){this.toggleTitleBar(false);},dsbld:false};var Am={n:mstrmojo.desc(11478,"Show Titlebar"),cls:"stb",fn:function(){this.toggleTitleBar(true);},dsbld:false};function AL(At){var Au=mstrApp.isAppStatePresentation(),As=mstrApp.isAppStatePrintPreview(),Av=this.domNode;Ak.toggleClass(Av,"selected",At&&!Au&&!As);}function N(Au,At,Av){var Ay=mstrmojo.vi.VisualInsightApp.APP_STATES,As=Ay.PRESENTATION,Aw=mstrApp.appState===As;var Ax=this.domNode;Ak.toggleClass(this.domNode,"pulse",Au&&!Aw&&!Av);if(At){setTimeout(function(){Ak.toggleClass(Ax,"pulse",false);},500);}}function Ah(At,As){return mstrmojo.all[At].getPanel().getUnitByKey(As);}function g(As){As.btn.style.display=!!As.menuCfg?"block":"none";}function An(As,Au){var At=this.getContextDragData(As);return !!(At&&(At.src===Au));}function k(As){return An.call(this,As,Ap.FILTERS);}function AF(As){return An.call(this,As,Ap.DATASETS);}function w(As){return An.call(this,As,Ap.ALL_OBJECT_LIST);}function Ai(As){var At=As.children;if(At&&At.length){As.removeChildren();At.forEach(function(Au){Au.destroy();});}}function K(){var As=this.boxContent;if(As&&As.getFormats){return As.getFormats();}return null;}function Ab(As){if(As.visible){if(As.controls){this.showControlOverlay(As.controls);}else{throw new Error('mstrmojo.vi.ui.rw.UnitContainer: "controls" should be provided when showing the control overlay');}}else{this.hideControlOverlay();}}function AU(Aw,At){var Au=this.model.controller,Av="propertiesPanel",As=function(){var Ay=this.getFormatMenuItemTarget(Aw);var A0=this.getEditorModel();if(A0.selectTargetByValue){A0.selectTargetByValue(Ay);}if(At){At(Ay);}var Ax=Au.getViPanel(Av),Az=Ax&&Ax.parent;if(Az&&Az.highlightSelected){Az.highlightSelected();}}.bind(this);if(Au.getViPanel(Av)){Au.selectViPanel(Av);As();}else{Au.openViPanel(Av,{success:As});}}function H(Au,As){var At=Au?"titlebarNode":"domNode";this.clearCache();this.clearSlotBackgroundCSS(At);this.applyCSSFormatToNode(At,As);}mstrmojo.vi.ui.rw.UnitContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._HasPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsBoxLayoutChild,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.rw.UnitContainer",markupString:'<div id="{@id}" class="mstrmojo-UnitContainer {@cssClass}" style="{@cssText} {@domNodeCssText}" mstrAttach:mouseover,mouseout,click,contextmenu><div class="mstrmojo-UnitContainer-titlebar" style="{@titlebarNodeCssText}"></div><div class="mstrmojo-UnitContainer-content"></div><div class="mstrmojo-VIDND-mask"></div></div>',markupSlots:{titlebarNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.childNodes[1];},maskNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,ontopChange:mstrmojo.Widget.topMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod,onzIndexChange:function(){this.domNode.style.zIndex=this.zIndex||AV;},onenabledChange:function(){Ak.toggleClass(this.domNode,"inactive",!this.enabled);},onorientationChange:function(){var At=this.ctrlOverlay.domNode,As=this.orientation;Ak.toggleClass(At,d,As==="v");Ak.toggleClass(At,E,As==="h");this.orientationHasChanged();}},layoutConfig:{h:{titlebarNode:"auto",containerNode:"100%"},w:{titlebarNode:"100%",containerNode:"100%"},xt:true},formatHandlers:{domNode:["B","BG"],titlebarNode:{src:"ttl",props:["F","BG","text-align"]}},updateOverlay:mstrmojo.emptyFn,getCacheKey:function z(){return this._super()+"-vi-uc";},getPanelForAddAction:function AY(){return"propertiesPanel";},getExcludedPanels:function Al(){return["editPanel"];},titleBarCss:"",orientation:"h",k:"",boxContent:null,parent:null,enabled:true,draggable:true,ctrlOverlay:null,model:null,title:"",titleBar:null,showTitleBar:false,bubbleMouseOver:true,dimensionsSet:false,getEditOverlayControls:mstrmojo.emptyFn,isNewUnitContainer:true,shouldShowCustomizeContextMenu:function(As){var At=As.getTarget(),Au=At&&At.nodeName.toLowerCase();return Au&&!(Au==="textarea"||(Au==="input"&&At.type.toLowerCase()==="text"));},switchToEditMode:function Ae(){this.showControlOverlay(this.getEditOverlayControls());},init:function AI(Au){this._super(Au);var Av=this.id,At=this.model,As;At.attachEventListener("viUnitSelected",Av,function(Aw){AL.call(this,Av===Aw.id);});At.attachEventListener("viIconTabClicked",Av,function(Ax){var Aw=At.hgl;if(At.getSelectedViUnit()&&Ax.id!="vi_flt"&&!!Aw==0){N.call(this,Av===At.getSelectedViUnit().id,true,false);}});At.attachEventListener("viVizEditorDrag",Av,function(Ax){var Aw=At.hgl;if(At.getSelectedViUnit()&&Ax.id!="vi_flt"&&!!Aw==0){N.call(this,Av===At.getSelectedViUnit().id,false,!Ax.isIn);}});this.addChildren([this.getTitleBarCfg(),{scriptClass:"mstrmojo.Box",cssClass:AJ,alias:"ctrlOverlay",slot:"containerNode",visible:false}],0);As=this.titleBar;if(As&&As.tbToolbar){As.tbToolbar.toolbarClicked=function(){At.selectVIUnit(Av);};}this.menuBtnInfo={};this.showTitleBar=!!this.defn.httl;this.draggable=mstrApp.allowWebDashboardDesign();this.boxContent.attachEventListener("toggleCtrlOverlay",this.id,Ab);},getDocModel:function F(){return this.model;},getBoxBorderWidth:function AX(){var As=K.call(this),At=As&&As.border;if(At){var Au=[2,4];if(mstrApp.isSingleTier&&AD.getOSInfo().name.toLowerCase().indexOf("mac")>=0){Au=[2.66,5.34];}return At.indexOf("2pt")>-1?Au[1]:Au[0];}return 0;},onFormat:function l(){var As=this.boxContent;if(As.execFormatHandler){As.execFormatHandler();return ;}AU.call(this);},showControlOverlay:function D(Au,At){var Av=this.ctrlOverlay,Aw=Av.domNode;if(Aw){var As=[AJ];As.push((this.orientation==="v")?d:E);if(At){As.push(At);}Aw.className=As.join(" ");}Av.set("visible",true);Ai(Av);Av.addChildren(Au);},hideControlOverlay:function Ac(){var As=this.ctrlOverlay;As.set("visible",false);Ai(As);},getTitleBarCfg:function AB(){return{scriptClass:"mstrmojo.vi.ui.rw.UnitContainerTitleBar",slot:"titlebarNode",alias:"titleBar",title:this.title,editTitleOnDoubleClick:mstrApp.allowWebDashboardDesign(),close:function(){this.parent.deleteSelf();},getLayoutOffsets:function As(){return{h:1,w:0};}};},getDisplayName:function AN(){return this.title;},updateDisplayName:function x(Av,Aw,As){var At=this.model,Au=this.k;if(As){At.renameRWUnitTitle(Av,Aw,Au,{success:function(Ax){this.set("title",Ax);}.bind(this),failure:function(Ax){mstrmojo.err(Ax);this.set("title",Aw);}.bind(this)});}else{At.renameRWUnit(Av,Aw,Au,{success:function(){this.synchronizeEditors();}.bind(this)});}},ontitleChange:function Ar(){this.titleBar.set("title",this.title);},oncontextmenu:function AT(As){if(this.shouldShowCustomizeContextMenu(As)){var At=this.addContextMenuItems(new mstrmojo.ui.menus.MenuConfig({position:AD.getMousePosition(As.e,As.hWin),isHostedWithin:false}),As);if(At.hasMenuItems()){AD.preventDefault(window,As.e);this.openPopup(At.newInstance());}}As.cancel();},addContextMenuItems:function V(Av,As){var Au=this.getEditorModel(),At;if(Au.getFormattingToolbar){At=function(Aw){var Ax=Au.getFormattingToolbar(Aw,As.getTarget());if(Ax){this.openPopup(Ax);}}.bind(this);}this.addFormatMenuItem(Av,As,At);return Av;},addFormatMenuItem:function I(Au,At,As){if(!mstrApp.isAppStatePresentation()&&mstrApp.allowWebDashboardDesign()){Au.addMenuItem(mstrmojo.desc(1918,"Format"),"",function(){this.selectVIUnit();AU.call(this,At,As);}.bind(this));}return Au;},getFormatMenuItemTarget:function h(As){return mstrmojo.vi.models.editors.BaseEditorModel.TITLE_CONTAINER_VALUE;},applyBoxSize:function Z(As,Au,Aw,Av){this._super(As,Au,Aw,Av);this.dimensionsSet=true;var At=parseInt(Au,10)>parseInt(As,10)?"h":"v";if(At!==this.orientation){this.set("orientation",At);}},childRenderCheck:function AM(At){var As=this._super(At);if(At===this.boxContent){As=As&&this.dimensionsSet;}return As;},postUpdateLayout:function o(){var Au=this.boxContent;if(!this.domNode){return ;}if(!Au.hasRendered){Au.render();var As=this.model.getLatestSelectedViUnitKey(),At=As&&this.parent.getUnitByKey(As);if(At){this.model.selectVIUnit(At.id);}else{this.parent.selectFirstBox();}}else{Au.refresh();}this.isNewUnitContainer=false;},orientationHasChanged:mstrmojo.emptyFn,onRender:function AR(){this._super();var As=this.model.getSelectedViUnit();AL.call(this,(As&&As.k===this.k));},onAppStateChange:function AP(At){var As=mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION,Av=At.value===As;if(Av||At.valueWas===As){this.draggable=!Av;this.generateToolbar();}var Au=this.model.getSelectedViUnit();AL.call(this,(Au&&Au.k===this.k));},selectVIUnit:function R(As){if(this.enabled){AL.call(this,this.parent.selectVIUnit(this,As));}},synchronizeEditors:function r(){if(this.model.getLatestSelectedViUnitKey()===this.k){this.selectVIUnit(true);}},addToggleTitleMenuItem:function L(As){var At=[AZ,Am];if(!this.titleBar.visible){At.reverse();}As.addDualStateItem(this.id,At[0],At[1]);},canShowDesignMenuItems:function e(){return mstrApp.allowWebDashboardDesign();},updateToolbar:function c(As){var At=As.ENUM_CORNERS;As.setAlignment(At.BOTTOM_RIGHT,At.TOP_RIGHT);As.isHostedWithin=false;if(this.canShowDesignMenuItems()&&mstrApp.appState!==mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION){As.addSeparator();this.addFormatMenuItem(As);if(this.showTitleBar){As.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){this.draggable=false;this.titleBar.editTitle();}.bind(this));}if(undefined!==this.getEditOverlayControls()){As.addMenuItem(mstrmojo.desc(3272,"Edit"),"cls",this.switchToEditMode.bind(this));}var Au=this.k,Av=this.model.id;As.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){Ah(Av,Au).deleteSelf();});}return As;},deleteSelf:function AH(A3){var Aw=this.k,At=this.model,A2=At.id,A5=At.data,A0=Ah(A2,Aw).parent,A1=A0.k,A4=[A1],As=[],Ay=function(A6){return A6.sections||A6.subsections||A6.objects||A6.panels||A6.layouts||A6.children;},Au=function(A9,A8){var A7=Ay(A9);for(var A6=0;A7&&(A6<A7.length);A6++){if((A7[A6]&&A7[A6].k)===A8){Q.removeIndices(A7,A6,1);return ;}else{Au(A7[A6],A8);}}},Av=At.getRebuildCallback();As=As.concat(At.getSourceFilterKeys(Aw,true));this.model.execute({execute:function(){var A7=Ah(A2,Aw);if(A7){var A6=A7.parent,A8=mstrmojo.all[A2],BB=A8.getDataService().newUpdate();var A9=A6.hasMultipleChildren();BB.addUpdate(A7.createDeleteUpdate());BB.addCallbacks({success:function BA(BC){A8.partialUpdate(BC.data,A8.getTargetDefn(As),BC.defn,As);Au(A5,Aw);A8.deleteDataCache(A7.boxContent&&A7.boxContent.id);A7.defn._isDeleted=true;A7.destroy();}});A6.deleteBoxAndSubmitDeferred(BB,A7,null,true);if(!A9){A8.addVisualizationDeferred(BB,A6.k);}A6.selectFirstBox();BB.addCallbacks(A3);BB.addExtras({style:{params:{treesToRender:0}}});this.submitUpdate(BB);}},urInfo:{undo:function Az(){var A6=Ah(A2,Aw);if(A6){delete A6.defn._isDeleted;}},redo:function Ax(){var A6=Ah(A2,Aw);if(A6){A6.defn._isDeleted=true;}},puKeys:A4,extras:mstrmojo.DocDataService.REQUEST_DEFN_DATA,callback:Av}});},undoInsert:function AS(){var As=this.parent,At=mstrmojo.all[this.model.id];As.deleteBoxAndSubmitDeferred(At.getDataService().newUpdate(),this,null,true);As.selectFirstBox();this.destroy();},createDeleteUpdate:function j(){},getTitleBarVisibility:function P(){return this.titleBar&&this.titleBar.visible;},setTitleBarVisibility:function f(As){var Au=this.titleBar;Au.set("visible",As);var Av=this.menuBtnInfo,At=Av.btn;if(!At){At=Av.btn=document.createElement("div");At.className="hover-menu-btn";var Aw=this.id;AD.attachEvent(At,"click",function(){var Ay=mstrmojo.all[Aw],Ax=Av.menuCfg;Ax.hostId=Aw;Ax.hostElement=At;Ay.openPopup(new mstrmojo.ui.menus.Menu({popupConfig:Ax}));});}this.domNode.appendChild(At);Av.menuCfg=As?null:Au.getMenuConfig();g(Av);this.doLayout();},refresh:function Aa(){delete this._currentLayout;if(!this.parent.boxLayoutConfig.dirty){this._super();}else{H.call(this,false,this.getFormats());if(this.showTitleBar){H.call(this,true,this.getFormats());}}},addFormatProps:function T(At,As){return At;},onclick:function AC(As){this.selectVIUnit();if(!As.e.ptvSelected&&this.switchPropertyOnClick()){this.boxContent.edtModel.selectTargetByValue(mstrmojo.vi.models.editors.BaseEditorModel.TITLE_CONTAINER_VALUE);}},switchPropertyOnClick:function AK(){var As=this.boxContent.edtModel;return !!(As&&As.selectTargetByValue);},getZonesModel:function AW(){return null;},getEditorModel:function Aq(){return this.boxContent.edtModel;},onmouseover:function G(As){if(!mstrApp.isInteractive()){return ;}if(!this.bubbleMouseOver){As.cancel();}var Au=this._panelTimeout;if(Au){window.clearTimeout(Au);delete this._panelTimeout;}if(this.titleBar.visible){this.titleBar.setToolbarVisibility(true);}var At=this.menuBtnInfo;if(!!At.menuCfg){Ak.addClass(At.btn,AA);}},onmouseout:function p(){var As=this.id;this._panelTimeout=window.setTimeout(function(){var At=mstrmojo.all[As];if(At){var Au=At.menuBtnInfo;if(!!Au.menuCfg){Ak.removeClass(Au.btn,AA);}At.titleBar.setToolbarVisibility(false);}},200);},isDragValid:function y(At){var As=At.src.node.tagName;As=(As&&As.toLowerCase())||"";if(As==="input"||As==="textarea"){return false;}return this.parent.hasMultipleChildren();},initializeDrag:function t(){this.selectVIUnit();},getTargetDropZone:function s(As){if(AF.call(this,As)||w.call(this,As)){return"";}return this._super(As);},allowDrop:function B(As){var Au=As.src,At=Au&&Au.widget;if(At&&At===this){return false;}if(k.call(this,As)&&this.allowDropFromFilter(As)){return true;}if(AF.call(this,As)&&this.allowDropFromDataset(As)){return true;}if(w.call(this,As)&&this.allowDropFromAllObjectsBrowser(As)){return true;}return this._super(As);},allowDropFromFilter:function Ag(){return mstrApp.allowWebDashboardDesign();},allowDropFromDataset:function AQ(As){return false;},allowDropFromAllObjectsBrowser:function M(As){return this.allowDropFromDataset(As);},close:function(){this.parent.deleteBoxAndSubmit(this);this.parent.removeChildren(this);mstrApp.rootCtrl.generateToolbar();this.destroy();},createAvatar:function O(){this.domNode.style.zIndex="-1";var As=document.createElement("div");As.className=this.getAvatarCls().join(" ");As.textContent=this.getDisplayName();return this.offsetAvatar(As);},ondragend:function S(As){this.domNode.style.zIndex=AV;this._super(As);},wasDropped:function a(As){this.domNode.style.zIndex=AV;this._super(As);},ondrop:function A(Au){var Ay=k.call(this,Au),Aw=this.maskNode.zone,At,Av=this;if(Ay){At=Au.src.widget.selector.node;}this._super(Au);if(AF.call(this,Au)){this.dropFromDataset(Au);}if(w.call(this,Au)){var Ax=Au.src.widget,Az=Ax&&Ax.dataProvider;if(Az){Az.loadObjects(Au.getCtxtDragData().items,{success:function(){Av.dropFromAllObjects(Au);}});}}if(Ay){var As=this;if(!Aw){Aw=this.parent.getPanelTargetEdge(Au);if(Aw){As=null;}}this.model.insertExistingFilter(At,As,Aw);}},postDropBox:function Af(){this.domNode.style.zIndex=AV;},rebuildBoxContent:function u(Au){var At=this.boxContent,As=this.parent;this.removeChildren(At);At.destroy();At=this.model.rebuildUnitFromDataCache(At.id,As.k,As.builder).boxContent;if(Au){Au(At);}this.addChildren([At]);},dropFromDataset:mstrmojo.emptyFn,dropFromAllObjects:mstrmojo.emptyFn,generateToolbar:function C(){var As=this.titleBar,At=As.toolbarCfg;if(At){At.destroy();}As.set("toolbarCfg",this.updateToolbar(new mstrmojo.ui.menus.ToolbarConfig()));if(!As.visible){this.menuBtnInfo.menuCfg=As.getMenuConfig();}},getTitleVisibilityFmts:function U(As){return{FormattingView:{ShowTitleBar:As}};},toggleTitleBar:function AE(As){var Ax=this.boxContent.id,Av=this.model,Aw=function Aw(Ay){var A0=mstrmojo.all[Ax],Az=A0.parent;Az.setTitleBarVisibility(Ay);Az.parent.selectVIUnit(Az,true);Az.applyBoxSize(Az.height,Az.width,Az.top,Az.left);A0.refresh();};Av.controller.cmdMgr.execute({execute:function(){var Ay=mstrmojo.all[Ax].parent;this.submit([Av.getUnitFormatAction(Ay,Ay.defn.t===mstrmojo.EnumRWUnitType.SELECTOR?5:1,Ay.getTitleVisibilityFmts(As?1:0),true)],{failure:function Az(){Aw(!As);}},W);Aw(As);},urInfo:{silent:true,undo:function At(){Aw(!As);},redo:function Au(){Aw(As);}}});},getFormats:function AG(){var As=this.boxContent;if(As){return As.getFormats();}return null;},clearFormats:function J(){var As=this.boxContent;if(As&&As.clearFormats){As.clearFormats();}},preBuildRendering:function X(){var As=this.boxContent;if(As){As.attachEventListener("regenerateToolbar",this.id,"generateToolbar");}this.generateToolbar();return this._super();},postBuildRendering:function Ao(){var As=this.showTitleBar;this.setTitleBarVisibility(As);this.titleBar.setToolbarVisibility(false);if(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation()){this.draggable=false;}this._super();this.applyBoxSize(this.height,this.width,this.top,this.left);return true;},changeUnitFormats:function Aj(Au,Ax,A0,Az,At,As,Av,Ay){var Aw=function(A2){if(Av){A2=Av(A2);}b.updateFormatBlock(Au?A0.ttl:A0,Az,A2);var A1=this.parent?this:this.model.getSelectedViUnit();H.call(A1,Au,A0);if(Ay){Ay(A2);}A1.synchronizeEditors();if(Au&&Az===Y.FONT_SIZE){A1.doLayout();}};this.model.saveUnitFormatProperty(this,[{formatType:Ax,propertyName:Az,newValue:At,oldValue:As}],{success:Aw.bind(this,At)},mstrmojo.DocDataService.SUPPRESS_DATA,{silent:true,undo:Aw.bind(this,As),redo:Aw.bind(this,At)});},redraw:function q(){if(this.boxContent.redraw()===true){return true;}return this._super();},getAvatarCls:function AO(){return["mstrmojo-VIUnit-avatar","icn-avi",mstrApp.getThemeClassName()];},addDragHandle:function n(){var As=document.createElement("div");As.className="uc-drag-handle";this.domNode.appendChild(As);},toggleDragHandleVisibility:function Ad(As){Ak.toggleClass(this.domNode,"no-handler",!As);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.num","mstrmojo.array","mstrmojo.VisMenuList","mstrmojo.mstr.EnumFunction","mstrmojo._HasMarkup","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel","mstrmojo.css","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.ui.DatasetUnitMenuUtils");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig");var o=document.getElementById("vis-measure-canvas"),A=document.getElementById("vis-measure-span"),AD={},Y={},s={},S=mstrmojo.dom,d=mstrmojo.elementHelper,r=mstrmojo.vi.ui.DatasetUnitMenuUtils,AB=mstrmojo.VisEnum.EnumColorRankMode,AC=mstrmojo.chart.model.enums.EnumDSSObjectType,c=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,J=mstrmojo.chart.enums.EnumFontStyle,T=mstrmojo.hash,R=mstrmojo.func.wrapMethods,x=mstrmojo.VisEnum,e=x.SERVER_JSON_ERROR_TYPE;var q=64,f=128,O=4,l=5,w=6,y=7,j=mstrmojo,k=j.array,u=mstrmojo.array,P=j.desc,AA=j.mstr.EnumFunction,a=mstrmojo.vi.enums.EnumDerivedElementType,Z=j._HasMarkup,F=j.css;mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869);function AF(AL,AK){var AM=p.pluck(AK,"tid"),AN=p.pluck(AK,"eid"),AJ=(AL.getDocModel&&AL.getDocModel())||p.getPropertyByPath(AL,"model.docModel");if(p.getPropertyByPath(AJ,"getColorBy") instanceof Function){return AJ.getColorBy(AM,AN);}}function AE(AJ,AL,AN){var AM=AL.id,AK=AL.getHost();if(AK&&AK.observableModel){AJ.forEach(function(AP){var AO=AK.observableModel[AP];if(AO){AO.attachEventListener("valueChanged",AM,AN);}});}}function U(AK){var AJ={SINGLE:[{text:P(358,"Absolute"),value:AA.FunctionAbs,n:P(358,"Absolute"),v:AA.FunctionAbs}],PAIR:[{text:P(6017,"Add"),value:AA.FunctionAdd,n:P(6017,"Add"),v:AA.FunctionAdd},{text:P(2122,"Average"),value:AA.FunctionAverage,n:P(2122,"Average"),v:AA.FunctionAverage},{text:P(5868,"Least"),value:AA.FunctionLeast,n:P(5868,"Least"),v:AA.FunctionLeast},{text:P(5869,"Greatest"),value:AA.FunctionGreatest,n:P(5869,"Greatest"),v:AA.FunctionGreatest},{text:"A-B",value:AA.FunctionMinus+";0",n:"A-B",v:AA.FunctionMinus+";0"},{text:"B-A",value:AA.FunctionMinus+";1",n:"B-A",v:AA.FunctionMinus+";1"},{text:"A/B",value:AA.FunctionDivide+";0",n:"A/B",v:AA.FunctionDivide+";0"},{text:"B/A",value:AA.FunctionDivide+";1",n:"B/A",v:AA.FunctionDivide+";1"}],MORE:[{text:P(6017,"Add"),value:AA.FunctionAdd,n:P(6017,"Add"),v:AA.FunctionAdd},{text:P(2122,"Average"),value:AA.FunctionAverage,n:P(2122,"Average"),v:AA.FunctionAverage},{text:P(5868,"Least"),value:AA.FunctionLeast,n:P(5868,"Least"),v:AA.FunctionLeast},{text:P(5869,"Greatest"),value:AA.FunctionGreatest,n:P(5869,"Greatest"),v:AA.FunctionGreatest}]};return AJ[AK];}function B(AK,AJ){return !!(((AK&&AK.at)||0)&AJ);}function N(AJ){return !AJ.selCells.some(function(AK){var AL=AJ.getCellForNode(AK);return d.isNonGroupNull(AL)||!B(AL,q)||AL.dei!==undefined||AJ.model.isRecursiveAttribute(AL.tid);});}function I(AK){var AJ;return !AK.selCells.some(function(AL){AJ=AK.getCellForNode(AL);return(d.isNonGroupNull(AJ)||!B(AJ,f))||AK.model.isRecursiveAttribute(AJ.tid);});}function E(AM,AL,AO,AN,AK){var AJ=AO&&AO.func;if((AJ===AN)||(typeof AN==="string"&&AN.indexOf(AJ)===0&&AN.indexOf(";0")>0)){return ;}if(AK){AM.editDECalculation(AL,AN);}else{AM.derivedElementCalculation(AL,AN);}}function M(AV,AT,AR){var AU=AT&&AT.es,AJ=(AU&&AU.length)||AV.selCells.length,AM=(AJ===1)?"SINGLE":((AJ===2)?"PAIR":"MORE"),AS=U(AM),AL=(AT&&AT.func),AN,AW=AV.selCells,AK,AQ,AP,AO;if(AM==="PAIR"){if(AT){AO=AU[0].v>AU[1].v;if(AO){AP=AU[0].n;AQ=AU[1].n;AS[4]={value:AA.FunctionMinus+";1",v:AA.FunctionMinus+";1"};AS[5]={value:AA.FunctionMinus+";0",v:AA.FunctionMinus+";0"};AS[6]={value:AA.FunctionDivide+";1",v:AA.FunctionDivide+";1"};AS[7]={value:AA.FunctionDivide+";0",v:AA.FunctionDivide+";0"};}else{AQ=AU[0].n;AP=AU[1].n;}}else{AQ=AR(AW[0]);AP=AR(AW[1]);}AS[O].text=AQ+" - "+AP;AS[l].text=AP+" - "+AQ;AS[w].text=AQ+" / "+AP;AS[y].text=AP+" / "+AQ;AS[O].n=AQ+" - "+AP;AS[l].n=AP+" - "+AQ;AS[w].n=AQ+" / "+AP;AS[y].n=AP+" / "+AQ;}for(AN in AS){if(typeof AS[AN].value==="string"&&AS[AN].value.indexOf(AL)===0&&AS[AN].value.indexOf(";0")>0){AK=AS[AN];break;}if(AS[AN].value===AL){AK=AS[AN];break;}}return{items:AS,selectedItem:AK};}function V(AJ,AM){if(!AJ){return AJ;}if(AM.length===1){return AJ[AM[0]];}var AL=(AM&&AM.length)||0,AK;for(AK=0;AK<AL;AK++){AJ=AJ[AM[AK]];if(!AJ){break;}}return AJ;}function z(AL,AK,AJ){return AL.every(function(AM){return AM.ttp===AK||AM.ttp===AJ;});}function AI(AK,AN,AO){var AM=(AN&&AN.length)||0,AL,AJ,AP=AK;for(AL=0;AL<AM-1;AL++){AJ=AN[AL];if(!AP[AJ]){AP[AJ]={};}AP=AP[AJ];}AP[AN[AM-1]]=AO;}function X(AR){var AS,AQ,AM,AO,AJ,AP=this.model.docModel.datasets,AK=false,AN=false,AL={isDM:false};for(AS in AP){if(AP.hasOwnProperty(AS)){AQ=AP[AS].mx;k.forEach((AQ||[]),function(AT){if(AT.did===AR){if(AT.um||AT.rdm){AN=true;}AK=true;return false;}});if(AK){break;}}}if(AN){AJ=this.model.data.gts.col;AM=(AJ&&AJ[AJ.length-1]);if(AM&&AM.otp===-1){AO=AM.es;}k.forEach((AO||[]),function(AT){if(AT.oid===AR){AL={isDM:true,id:AT.id};return false;}});}return AL;}function H(AJ,AM){var AP=[],AL={act:"updateElementsPropertiesMap",epm:AP},AN=[],AK={},AR=[AK],AQ=this;AP.push({epmk:AN,epmv:AR});AJ.forEach(function(AT){var AU=AT.tid,AS=AU===-1,AV={ob:{did:AS?"":AU}};AN.push(AV);});if(AM&&AM.indexOf("default")<0){AK.v={vv:AM};}var AO=[];AK.k={chn:AO};AJ.forEach(function(AU){var AV=AU.tid,AS=AV===-1,AT;if(AS){AT=X.call(AQ,AU.eid);if(AT.isDM){AO.push({emt:2,ei:AT.id});}else{AO.push({emt:2,mt:{did:AU.eid,tp:4,ql:0}});}}else{AO.push({emt:1,ei:AU.eid,at:{did:AV,tp:AU.tp,ql:0}});}});return AL;}function C(AN,AL){var AM="00000000000000000000000000000000",AK=AN&&AN.dropZones,AJ=k.find(AK,"id",AL);return AJ===-1?[]:k.filter(AK[AJ].items,function(AO){return AO.t===4&&AO.id!==AM;});}function b(AK,AJ){return function(){var AL=new j.ui.menus.MenuConfig();AL.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);AL.addRadioMenuGroup(null,AK,AJ,"checkMark",undefined,true);return AL;};}mstrmojo.VisUtility=mstrmojo.provide("mstrmojo.VisUtility",{getCache:function(){return JSON.stringify(s);},getUpdateColorMapAction:function(AK,AJ){return H.call(this,AK,AJ);},measureTextSize:function(AK,AJ,AL){return{width:this.measureTextWidth(AK,AJ,AL),height:this.measureTextHeight(AK,AJ,AL)};},measureTextWidth:function(AM,AL,AN,AK,AJ){if(S.isIE||S.isIEW3C){return this.measureTextWidthWithSpan(AM,AL,AN,AK,AJ);}return this.measureTextWidthWithCanvas(AM,AL,AN);},measureTextWidthWithCanvas:function(AM,AN,AQ,AO){AO=AO||false;if(AM===""){return 0;}if(AM===" "){AM="\u00A0";}var AP=AN.fontFamily,AS=AN.fontSize,AL=AN.fontStyle,AR=AN.fontWeight;if(typeof AS==="number"){AS+="pt";}AL=AL||"normal";AR=AR||"normal";AQ=AQ||0;var AK=AO?undefined:V(AD,[AP,AS,AL,AR,AM]);if(!AK){if(!o){o=document.createElement("canvas");o.width=0;o.height=0;o.id="vis-measure-canvas";o.style.position="absolute";o.style.top="0";o.style.fontSize="medium";document.body.appendChild(o);}var AJ=o.getContext("2d");AJ.font=AL+" "+AR+" "+AS+" "+AP;AK=Math.ceil(AJ.measureText(AM).width);AI(AD,[AP,AS,AL,AR,AM],AK);}return AK+AQ;},measureTextWidthWithSpan:function(AL,AM,AQ,AS,AN){if(AL===""){return 0;}if(AL===" "){AL="\u00A0";}var AO=AM.fontFamily,AT=AM.fontSize,AK=AM.fontStyle,AP=AM.fontWeight;if(typeof AT==="number"){AT+="px";}AK=AK||"normal";AP=AP||"normal";AS=AS||"auto";AQ=AQ||0;AN=!!AN;if(typeof AS==="number"){AS+="px";}var AJ=V(Y,[AO,AT,AK,AP,AS,AL]);if(!AJ){var AR;if(!A){A=document.createElement("span");AR=A.style;A.id="vis-measure-span";AR.position="absolute";AR.top="0";AR.visibility="hidden";AR.width="auto";AR.height="auto";if(AN){AR.whiteSpace="nowrap";}else{AR.whiteSpace="normal";}document.body.appendChild(A);}AR=A.style;if(AN){AR.whiteSpace="nowrap";}else{AR.whiteSpace="normal";}AR.width="auto";AR.height=AS;AR.fontFamily=AO;AR.fontSize=AT;AR.fontStyle=AK;AR.fontWeight=AP;A.innerHTML=AL;AJ=Math.ceil(A.clientWidth);AI(Y,[AO,AT,AK,AP,AS,AL],AJ);}return AJ+AQ;},measureTextHeight:function(AL,AM,AR,AT,AJ,AO,AN){if(AL===""){return 0;}if(AL===" "){AL="\u00A0";}var AP=AM.fontFamily,AV=AM.fontSize,AK=AM.fontStyle,AQ=AM.fontWeight;AJ=AJ||"normal";AN=!!AN;if(typeof AV==="number"){AV+="px";}AK=AK||"normal";AQ=AQ||"normal";AT=AT||"auto";AR=AR||0;if(typeof AT==="number"){AT+="px";}var AU=AO?undefined:V(s,[AP,AV,AK,AQ,AT,AL]);if(!AU){var AS;if(!A){A=document.createElement("span");AS=A.style;A.id="vis-measure-span";AS.position="absolute";AS.top="0";AS.visibility="hidden";AS.width="auto";AS.height="auto";if(AN){AS.whiteSpace="nowrap";}else{AS.whiteSpace="normal";}document.body.appendChild(A);}AS=A.style;if(AN){AS.whiteSpace="nowrap";}else{AS.whiteSpace="normal";}AS.heigth="auto";AS.width=AT;AS.fontFamily=AP;AS.fontSize=AV;AS.fontStyle=AK;AS.fontWeight=AQ;AS.wordBreak=AJ;A.innerHTML=AL;AU=A.clientHeight;if(!AO){AI(s,[AP,AV,AK,AQ,AT,AL],AU);}}return AU+AR;},getVisEmptyMsg:function(AJ){var AK="";switch(AJ){case"AE_ERROR":AK='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div style="padding:25px"><div class="gm-warning-icon" style="padding-bottom:18px"></div><div style="padding-bottom:8px">'+mstrmojo.desc(14436,"Unable to load visualization.")+"</div><div>"+mstrmojo.desc(14437,"Use a filter to reduce the data and try again.")+"</div></div></div></div></div>";break;case"NODATA_OTHERERROR":AK='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div>'+(this.errorMsg||mstrmojo.desc(12093,"Filter excludes all data"))+"</div></div></div></div>";break;default:AK='<div class="mstrmojo-Label dropMsg" style="display: block;" >'+mstrmojo.desc(11668,"Drag objects here.")+"</div>";}return AK;},applyStyles2DomNode:function(AO,AR){var AJ,AP=AO.style;if(Object.prototype.hasOwnProperty.call(AR,"backgroundColor")&&AR.backgroundColor!==""&&AR.backgroundColor!=="transparent"){var AN=1;if(Object.prototype.hasOwnProperty.call(AR,"opacity")&&AR.opacity!==""){AN=AR.opacity;}var AK=AR.backgroundColor,AQ=function AQ(AS){if(isNaN(AS)){AS=0;}AS%=16777216;return{b:AS%256,g:(AS>>8)%256,r:(AS>>16)%256};},AM="";if(AK){var AL=function AL(AT,AU){if(AT==="transparent"){return"rgba(0,0,0,0)";}AT=this.parseCSSColor(AT,false);var AS=AQ(AT);return"rgba("+AS.r+" ,"+AS.g+" ,"+AS.b+" ,"+AU+" )";}.bind(this);if(AK.c1!==undefined&&AK.c2!==undefined&&AK.or!==undefined){AM=(F.buildGradient(AK.or,AL(AK.c1,AN),AL(AK.c2,AN))).v;}else{AM=AL(AK,AN);}AP.background=AM;}}else{AP.backgroundColor="rgba(0,0,0,0)";}for(AJ in AR){if(AJ!=="backgroundColor"&&AJ!=="opacity"&&Object.prototype.hasOwnProperty.call(AR,AJ)&&AR[AJ]&&AR[AJ]!==""){AP[AJ]=AR[AJ];}}},parseCSSColor:function(AN,AK){var AJ,AL;if(AN.length===7){if(AK===true){AJ=AN[5]+AN[6]+AN[3]+AN[4]+AN[1]+AN[2];}else{AJ=AN.slice(1);}}else{AJ=[];var AM=AN.slice(1);if(AK===true){for(AL=2;AL>=0;AL--){AJ.push(AM[AL]);AJ.push(AM[AL]);}}else{for(AL=0;AL<3;AL++){AJ.push(AM[AL]);AJ.push(AM[AL]);}}AJ=AJ.join("");}return parseInt(AJ,16);},positionDomNode:function(AL,AN){var AK,AQ,AO,AM=["width","height","top","left","right","bottom"],AP=AM.length,AJ=AL.style;for(AK=0;AK<AP;AK++){AQ=AM[AK];AO=AN[AQ];if(AO!==undefined){if((typeof AO)==="number"){AO+="px";}AJ[AQ]=AO;}}},getComputedFontStyle:function G(AL){var AJ=mstrmojo.css.getComputedStyle(AL);var AM={};AM.fontFamily=AJ.fontFamily;AM.fontSize=AJ.fontSize;AM.fontStyle=AJ.fontStyle;AM.fontWeight=AJ.fontWeight;AM.fontVariant=AJ.fontVariant;var AK=parseInt(AJ.paddingLeft)||0,AN=parseInt(AJ.paddingLeft)||0;AM.bonus=AK+AN;return AM;},splitWordIfTooLong:function(AT,AR,AM){var AP=[];var AQ=AT.length;var AN;for(AN=0;AN<AQ;AN++){var AK=AT[AN];while(true){var AU=this.measureTextWidth(AK,AM);if(AU>AR){var AS=(AR/AU)*AK.length;var AJ=Math.max(Math.round(AS),1);while(AJ>0){var AO=AK.substr(0,AJ);var AL=Math.round(this.measureTextWidth(AO,AM));if(AL<=AR||AJ===1){AP.push(AO);break;}else{AJ--;}}AK=AK.substr(AJ,AK.length-AJ);}else{AP.push(AK);break;}}}return AP;},truncateTextToLineWithWordWrap:function Q(Aj,Ac,Aa,AP,Ab,AT){var AX=Aj.split(" "),Ad=AX.length;if(!AT){AX=this.splitWordIfTooLong(AX,Aa,Ac);}var Aq,AV=[],Al=[],AJ=0,AN=AX.length,As=this.measureTextWidth(" ",Ac),AM=0,AS=false,AZ=(Ad===AX.length);Al.push(0);for(Aq=0;Aq<AN;Aq++){var Ah=this.measureTextWidth(AX[Aq],Ac);if(!AT&&Ah>Aa){var AK=AX[Aq];var Ao=(Aa/Ah)*AK.length;AX[Aq]=AK.substr(0,parseInt(Ao,10));Ah=Aa;}AV.push(Ah);AJ+=Ah;Al.push(AJ);if(Aq!==AN-1){AJ+=As;}}var An,Ap,Af=AP;for(An=0,Ap=0;Ap<Al.length;){var AR=Al[Ap]-Al[An];if(An>0&&Ap!==An){AR-=As;}var AQ=Al[Ap+1]-Al[An];if(An>0&&Ap+1!==An){AQ-=As;}if(AR<=Aa&&((Ap+1===Al.length)||(AQ>Aa))){AM=Math.max(AM,AR);Af--;if(Af===0||Ap===AN){break;}else{An=Ap;Ap++;}}else{Ap++;}}if(Ap>AN){Ap=AN;}var AU=Al[Ap]-Al[An];if(An>0&&Ap!==An){AU-=As;}var Ai;if(Ap>=AN&&AU<Aa){Ai=AX.join(" ");}else{AS=true;AM=Aa;Ai=AX.slice(0,Ap).join(" ");var AW=this.measureTextWidth("...",Ac);if(AU+AW<=Aa){if(AU+As+AW>Aa){Ai+="...";}else{var Ar=AX[Ap],AY;for(var Ae=1;Ae<Ar.length;Ae++){AY=this.measureTextWidth(Ar.substr(0,Ae),Ac);if(AU+As+AY+AW>Aa){break;}}Ai+=" "+Ar.substr(0,Ae-1)+"...";}}else{if(Ai.charAt(Ai.length-1)===" "){Ai=Ai.substr(0,Ai.length-1);}var Ag=Ai.lastIndexOf(" ");var AL=Ai.length-1-Ag;if(AL===3){Ai=Ai.substr(0,Ai.length-3)+" ...";}else{var Ak=0,AO="",Am=0;while(Ak<AW&&Ai.length>Am){Am++;AO=Ai.substr(Ai.length-Am,Ai.length);Ak=this.measureTextWidth(AO,Ac);}Ai=Ai.substr(0,Ai.length-Am)+"...";}}}if(Ab){return{text:Ai,truncated:AS,maxLineLen:AM,canWordWrap:AZ};}return Ai;},measureSuperTextWidth:function AH(AK,AL,AJ,AM){return AK?this.measureTextWidth("<sup>"+AL+"</sup>",AJ,AM):this.measureTextWidth(AL,AJ,AM);},splitTokenIfTooLong:function h(AU,AS,AM){var AQ=[];var AR=AU.length;var AN,AK,AV,AP,AW;for(AN=0;AN<AR;AN++){AK=AU[AN];AP=AK.isSuper;while(true){AV=AK.v;if(AK.textWidth!==undefined){AW=AK.textWidth;}else{AW=AK.textWidth=this.measureSuperTextWidth(AP,AV,AM);}if(AW>AS){var AT=(AS/AW)*AV.length;var AJ=Math.max(Math.round(AT),1);while(AJ>0){var AO=AV.substr(0,AJ);var AL=Math.round(this.measureSuperTextWidth(AP,AO,AM));if(AL<=AS||AJ===1){AQ.push({v:AO,isSuper:AP,textWidth:AL});break;}else{AJ--;}}AK={v:AV.substr(AJ,AV.length-AJ),isSuper:AP};}else{AQ.push(AK);break;}}}return AQ;},truncateTextToLineWithWordWrapForTokens:function W(AT,AN,Am,Ae,An,AZ){var Ah=AT.length;AT=this.splitTokenIfTooLong(AT,Am,AN);var Al,AY=[],AJ=0,Ac=AT.length,AK=0,Ad=false,AP=(Ah===AT.length),AR,AW,Af,AL,Aj,AS,AX;if(AZ&&!AP){return{canWordWrap:AP};}AY.push(0);for(Al=0;Al<Ac;Al++){AR=AT[Al];Af=AR.v;AW=AR.isSuper;if(AR.textWidth!==undefined){AL=AR.textWidth;}else{AL=AR.textWidth=this.measureSuperTextWidth(AW,Af,AN);}if(AL>Am){var Ak=(Am/AL)*Af.length;AR.v=Af.substr(0,parseInt(Ak,10));AL=AR.textWidth=Am;}AJ+=AL;AY.push(AJ);}var AV,Ag,AU=Ae;for(AV=0,Ag=0;Ag<AY.length;){var AQ=AY[Ag]-AY[AV];var AO=AY[Ag+1]-AY[AV];if(AQ<=Am&&((Ag+1===AY.length)||(AO>Am))){AK=Math.max(AK,AQ);AU--;if(AU===0||Ag===Ac){break;}else{AV=Ag;Ag++;}}else{Ag++;}}if(Ag>Ac){Ag=Ac;}var Ab=AY[Ag]-AY[AV];var Ao;if(Ag>=Ac&&Ab<Am){Ao=AT;}else{Ad=true;AK=Am;Ao=AT.slice(0,Ag);var AM=this.measureTextWidth("...",AN);if(Ab+AM<=Am){AS=AT[Ag];Af=AS.v;AW=AS.isSuper;for(Aj=1;Aj<Af.length;Aj++){AX=this.measureSuperTextWidth(AW,Af.substr(0,Aj),AN);if(Ab+AM+AX>Am){break;}}if(Aj>1){AR={v:Af.substr(0,Aj-1),isSuper:AW};AR.textWidth=this.measureSuperTextWidth(AW,AR.v,AN);Ao.push(AR);Ao.push({v:"...",textWidth:AM});}}else{var Aa=0,Ai;for(Al=Ao.length-1;Al>=0;Al--){AR=Ao[Al];Af=AR.v;AW=AR.isSuper;Ai=0;for(Aj=Af.length-1;Aj>=0;Aj--){Ai=this.measureSuperTextWidth(AW,Af.substr(Aj),AN);if(Aa+Ai>=AM){break;}}if(Aj>=0){break;}else{Aa+=Ai;}}if(Al>=0){if(Aj>0){AR.v=Af.substr(0,Aj);AR.textWidth=this.measureSuperTextWidth(AW,AR.v,AN);Ao=Ao.slice(0,Al+1);}else{if(Aj===0){Ao=Ao.slice(0,Al);}}Ao.push({v:"...",textWidth:AM});}else{Ao=[{v:"...",textWidth:AM}];}}}if(An){return{text:Ao,truncated:Ad,maxLineLen:AK,canWordWrap:AP};}return Ao;},getRankMode:function g(AP){var AR=1,AQ=2,AO=3,AK=4,AM=5,AJ=6,AN=7,AL=AB.INVALID;if(AP){if(z(AP,AO,AQ)){AL=AB.TOP_PERCENT;}else{if(z(AP,AO,AR)){AL=AB.BOTTOM_PERCENT;}else{if(z(AP,AJ,AK)){AL=AB.BOTTOM;}else{if(z(AP,AJ,AM)){AL=AB.TOP;}else{if(z(AP,AN)){AL=AB.VALUE;}}}}}}return AL;},getColorByTitle:function L(AK,AJ){if(AJ===AB.BOTTOM_PERCENT||AJ===AB.TOP_PERCENT){AK=mstrmojo.desc(2787,"Percentage of ##").replace("'##'",AK);}else{if(AJ===AB.BOTTOM||AJ===AB.TOP){AK=mstrmojo.desc(2788,"Rank of ##").replace("'##'",AK);}}return AK;},getColorByFormatStr:function t(AK,AJ){if(AJ===AB.BOTTOM_PERCENT||AJ===AB.TOP_PERCENT){AK="0%;(0%)";}else{if(AJ===AB.BOTTOM||AJ===AB.TOP){AK="";}}return AK;},getColorByItems:function AG(AJ,AT,Aa,AW,AR,AP,AX){var AV=[],Ab,AL,AQ=mstrmojo.num,AO,AS;if(AJ===undefined||AJ.length===0){return AV;}var Ad=true;if(AJ.length>1){if(AJ[0].ceil===AJ[1].flr){Ad=false;}else{Ad=true;}}for(Ab=0;Ab<AJ.length;Ab++){var Ac=AJ[Ab],AN={},AK=Ac.ceil,AZ=Ac.flr;if((Ab===0&&Ad)||(Ab===AJ.length-1&&!Ad)){if(AT===AB.BOTTOM_PERCENT||AT===AB.TOP_PERCENT){AN.flr=AZ/100;AN.ceil=1;}else{if(AT===AB.TOP||AT===AB.BOTTOM){AZ+=1;AN.flr=Math.floor(AZ);AN.ceil=AR;}else{AN.flr=AZ;AN.ceil=Aa;}}AS=AN.ceil;}else{if((Ab===0&&!Ad)||(Ab===AJ.length-1&&Ad)){if(AT===AB.BOTTOM_PERCENT||AT===AB.TOP_PERCENT){AN.flr=0;AN.ceil=AK/100;}else{if(AT===AB.TOP||AT===AB.BOTTOM){AN.flr=0;AN.ceil=Math.floor(AK);}else{AN.flr=AW;AN.ceil=AK;}}AO=AN.flr;}else{if(AT===AB.BOTTOM_PERCENT||AT===AB.TOP_PERCENT){AZ=AZ/100;AK=AK/100;}else{if(AT===AB.TOP||AT===AB.BOTTOM){AZ+=1;AZ=Math.floor(AZ);AK=Math.floor(AK);}}AN.flr=AZ;AN.ceil=AK;}}if(AT===AB.TOP||AT===AB.BOTTOM){AN.ceil=AN.ceil>AR?AR:AN.ceil;}if(AP){AN.label=AQ.formatByMask(AP,AN.flr)+" - "+AQ.formatByMask(AP,AN.ceil);}else{AN.label=AN.flr+" - "+AN.ceil;}if(Ac.fmt&&Ac.fmt.bc){AN.color=Ac.fmt.bc;}else{AN.color=AX;}AV.push(AN);}AV=AV.filter(function(Ae){return Ae.flr<=Ae.ceil&&!(Ae.flr>AS||Ae.ceil<AO);});if(AT===AB.TOP||AT===AB.BOTTOM){AL=AR;}else{if(AV.length>0){if(Ad){AL=AV[0].ceil-AV[(AV.length-1)].flr;}else{AL=AV[(AV.length-1)].ceil-AV[0].flr;}}}var AY=0,AU,AM;for(Ab=0;Ab<AV.length;Ab++){if(Ab===AV.length-1){AV[Ab].scopePercent=1-AY;}else{if(AT===AB.TOP||AT===AB.BOTTOM){AM=AV[Ab].ceil-AV[Ab].flr+1;}else{AM=AV[Ab].ceil-AV[Ab].flr;}AU=AM/AL;AV[Ab].scopePercent=AU;AY+=AU;}}return AV;},getDefaultColorByItems:function(AM,AK,AL){var AJ={};AJ.label=AL+" - "+AK;AJ.flr=AL;AJ.ceil=AK;AJ.color=AM;AJ.scopePercent=1;return[AJ];},getNumberFormat:function(AM,AK){var AN=AM.nf,AL=AM.gvs;function AJ(){var AQ=(AL&&AL.items&&AL.items[0]&&AL.items[0].items)||[],AP=AQ[AK]||{},AO=AP.nfs;return typeof AO==="string"?AO:"";}if(typeof AN[AK].nfs!=="string"){AN[AK].nfs=AJ();}return AN[AK].nfs;},hasOnlyMetricsOnColumn:function(AK){var AJ=(AK&&AK.gts&&AK.gts.col)||[];return AJ.every(function(AL){return AL.otp===AC.DssTypeUnknown&&(AL.es||[]).every(function(AM){return AM.otp===AC.DssTypeMetric;});});},hasNoMetricOnRow:function(AK){var AL=(AK&&AK.gts&&AK.gts.row)||[],AJ=function(AM){return AM.otp!==AC.DssTypeMetric;};return AL.every(AJ);},isOnExpressMode:function(){return mstrApp.isExpress;},modifyScExp:function(AR,AJ,AV,AP){if(!AR||!AJ){return ;}var AM=AR.nds,AQ,AK,AS,AU,AT,AO,AN,AL;u.forEach(AM||[],function(AW){AQ=AW.nds;u.forEach(AQ||[],function(AX){AK=AX.es;u.forEach(AK||[],function(AY){AU=AY.v;AO=AP[AU];if(!AO){AO=AV.getNormalizedFormElementId(AU);AP[AU]=AO;}u.forEach(AJ||[],function(AZ){AS=AZ.es;u.forEach(AS||[],function(Aa){AL=false;AT=Aa.id;if(AT===AU){AL=true;}else{AN=AP[AT];if(!AN){AN=AV.getNormalizedFormElementId(AT);AP[AT]=AN;}if(AO===AN){AL=true;}}if(AL){AY.v=Aa.id;AY.n=Aa.n;return false;}});if(AL){return false;}});});});});},modifyScExpDeprecated:function(AP,AQ,AN,AL){if(!AP||!AQ){return ;}var AM=AP.nds,AK,AJ,AO;u.forEach(AM||[],function(AR){AK=AR.nds;u.forEach(AK||[],function(AS){AJ=AS.es;u.forEach(AJ||[],function(AT){u.forEach(AQ||[],function(AU){u.forEach(AU||[],function(AV){AO=AV.es;u.forEach(AO||[],function(AW){if(AN.call(AL,AW.id,AT.v)){AT.v=AW.id;AT.n=AW.n;}});});});});});});},getMouseOffset:function(AK){var AJ=(AK.offsetX!==undefined)?AK.offsetX:(AK.layerX),AL=(AK.offsetY!==undefined)?AK.offsetY:(AK.layerY);return{x:AJ,y:AL};},translateLineStyle:function(AJ){var AL=["none","solid","solid","dashed","dotted"],AK=["1px","1px","2px","1px","1px"];return{width:AK[AJ]||"0px",style:AL[AJ]||"none"};},getGroupAndCalculationContextMenuForDataPoints:function(AS,Ag){var AU,AW=[],AL=[],Ad=[],AQ=Ag.fnCellName,AY=Ag.fnUnique,AP=Ag.fnMakeNode,Ab=AS.getCellForNode.bind(AS),Ai=Ag.selection;var AO=new j.ui.menus.MenuConfig(),AK=new j.ui.menus.MenuConfig(),Aa=new j.ui.menus.MenuConfig(),Af=new j.ui.menus.MenuConfig();function Ah(Aj){AS.selCells=AW[Aj].selCells;AS.derivedElementGroup(Ab(AS.selCells[0]));}function AR(Al){AS.selCells=AL[Al].selCells;var Ak=Ab(AL[Al].selCells[0]),Aj=AS.getDEInfo(Ak);AS.derivedElementsEdit(Ab(AS.selCells[0]),Aj);}function AX(Ak){AS.selCells=AL[Ak].selCells;var Aj=Ab(AL[Ak].selCells[0]);AS.removeQuickDE(Aj);}function AV(Ak){AS.selCells=AL[Ak].selCells;var Aj=Ab(AL[Ak].selCells[0]);AS.renameDEList(Aj);}function AZ(Aj){E(AS,Ab(AS.selCells[0]),null,Aj,false);}function AJ(Aj){E(AS,Ab(AS.selCells[0]),null,Aj,true);}function AN(Ak){var Aj=Ab(AL[Ak].selCells[0]);AS.removeQuickDE(Aj);}function Ae(Ak){var Aj=Ab(AL[Ak].selCells[0]);AS.editDECalculation(Aj);}function AT(Aj){Aj=Aj||[];function Ak(Ao){var Al=Ao.extra||{},Ap=Ao.setup||mstrmojo.emptyFn,Am=Ao.action||mstrmojo.emptyFn,An=[];Ap(An,Al);Am(An,Al);}Aj.forEach(Ak);}var AM=[{name:"group",setup:function(Aj){AW.forEach(function(Ak){AS.selCells=AW[Ak.v].selCells;if(!Object.prototype.hasOwnProperty.call(AL,Ak.v)&&N(AS)){Aj.push(Ak);}});},action:function(Ak){var Aj;if(Ak.length===1){Aj=Ak[0].v;AO.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AS.selCells=AW[Aj].selCells;AS.derivedElementGroup(Ab(AS.selCells[0]));});}if(Ak.length>1){AO.addPopupMenuItem(mstrmojo.desc(1911,"Group"),AS.id,b(Ah,Ak),"xt");}}},{name:"edit-group",setup:function(Aj){AL.forEach(function(An){var Am=Ab(AL[An.v].selCells[0]),Al=AS.getDEInfo(Am),Ak=Al&&Al.de;if(Ak&&Ak.t===a.LIST){Aj.push(An);}});},action:function(Ak){var Aj,Am,Al;if(Ak.length===1){Aj=AL[Ak[0].v].selCells;Am=Ab(Aj[0]);Al=AS.getDEInfo(Am);AK.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AS.selCells=Aj;AS.derivedElementsEdit(Ab(AS.selCells[0]),Al);});AK.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AS.selCells=Aj;AS.removeQuickDE(Am);});Af.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AS.selCells=Aj;AS.renameDEList(Am);});}if(Ak.length>1){AK.addPopupMenuItem(mstrmojo.desc(13395,"Edit Group..."),AS.id,b(AR,Ak),"xt");AK.addPopupMenuItem(mstrmojo.desc(12195,"Ungroup"),AS.id,b(AX,Ak),"xt");Af.addPopupMenuItem(mstrmojo.desc(13968,"Rename Group..."),AS.id,b(AV,Ak),"xt");}}},{name:"calculation",setup:function(Aj){Ad.forEach(function(Am,Al,Ak){AS.selCells=Ak[Am.v].selCells;var Ao=Ab(AS.selCells[0]),An=AS.getDEInfo(Ao),Ap=An&&An.de;if(!(Ap&&Ap.t===a.RESIDUE)&&I(AS)){Aj.push(Am);}});},action:function(Aj){if(Aj.length===1){AO.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AS.id,function(){var Ak=Aj[0].v,Al=new j.ui.menus.MenuConfig();AS.selCells=Ad[Ak].selCells;Al.addRadioMenuGroup(null,AZ,M(AS,null,AQ).items,"checkMark",undefined,true);return Al;},"xt");}if(Aj.length>1){AO.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AS.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Aj,selectedIndex:0,onitemSelected:function(Ak){var Al=Ak.v;AS.selCells=Ad[Al].selCells;this.parent.checkList.set("items",[]);this.parent.checkList.set("items",M(AS,null,AQ).items);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Al,Ak){E(AS,Ab(AS.selCells[0]),null,Ak.checkList.selectedItem.v,false);}});});}}},{name:"edit-calculation",setup:function(Aj){AL.forEach(function(An){var Am=Ab(AL[An.v].selCells[0]),Al=AS.getDEInfo(Am),Ak=Al&&Al.de;if(Ak&&Ak.t===a.CALCULATION){Aj.push(An);}});},action:function(Aj){function Ak(){var Al=Aj[0].v;AS.selCells=AL[Al].selCells;var Ap=Ab(AS.selCells[0]),Ao=AS.getDEInfo(Ap),Aq=Ao&&Ao.de,An=M(AS,Aq,AQ),Am=new j.ui.menus.MenuConfig();Am.addRadioMenuGroup(An.selectedItem.value,AJ,An.items,"checkMark",undefined,true);return Am;}if(Aj.length===1){Aa.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AS.id,Ak,"xt");Aa.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){var Al=Aj[0].v;AS.selCells=AL[Al].selCells;var Am=Ab(AS.selCells[0]);AS.removeQuickDE(Am);});Af.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){var Al=Aj[0].v;AS.selCells=AL[Al].selCells;var Am=Ab(AS.selCells[0]);AS.editDECalculation(Am);});}if(Aj.length>1){Aa.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AS.id,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Aj,selectedIndex:0,onitemSelected:function(Ao){var Ap=Ao.v;AS.selCells=AL[Ap].selCells;var An=Ab(AS.selCells[0]),Am=AS.getDEInfo(An),Aq=Am&&Am.de;var Al=M(AS,Aq,AQ);this.parent.checkList.set("items",[]);this.parent.checkList.set("items",Al.items);this.parent.checkList.set("selectedItem",Al.selectedItem);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Am,Al){E(AS,Ab(AS.selCells[0]),null,Al.checkList.selectedItem.v,true);}});});Aa.addPopupMenuItem(mstrmojo.desc(12197,"Delete Calculation"),AS.id,b(AN,Aj),"xt");Af.addPopupMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),AS.id,b(Ae,Aj),"xt");}}}];AU=AY(Ai);AU.forEach(function(Ak){var Am=AP(Ak),Aj=Ab(Am),Al,An,Ao;if(!AS.model.supportsViewFilterActions(Aj.tid)){return ;}Al=Aj.dei===undefined?AW:AL;An=Aj.tid;Ao=AS.model.getObjectInfo(An).n;if(Al[An]===undefined){Al[An]={};Al[An].selCells=[];Al.push({n:Ao,v:An,text:Ao,value:An});}Al[An].selCells.push(Am);if(Ad[An]===undefined){Ad[An]={};Ad[An].selCells=[];Ad.push({n:Ao,v:An,text:Ao,value:An});}Ad[An].selCells.push(Am);});var Ac=this.getPropertyByPath(AS,"model.data.visName")||this.getPropertyByPath(AS,"model.data.vis.vn");if(Ac==="VIHeatMapVisualizationStyle"){AM.splice(2,2);}AT(AM);return{createDe:AO,editGroup:AK,editCalculation:Aa,renameDe:Af};},getGroupAndCalculationContextMenu:function(AR,Af,Ac){var Ae=AR,AY=Ac.skipSingleAttrCheck||Ae.isSingleAttrSelection(),AM=false,AO=Ae.isSingleSelection(),AS=Ae.getDEInfo(Af),AN=AS&&AS.deObject,Ab=AS&&AS.de,AW=AN&&Ae.getOthersDEInfo(AN),AU=Ae.getSelections(),Aa=true,AQ=Ac.fnCellName,Ad=this.getPropertyByPath(Ae,"model.data.visName")||this.getPropertyByPath(Ae,"model.data.vis.vn");var AP=new j.ui.menus.MenuConfig(),AK=new j.ui.menus.MenuConfig(),AV=new j.ui.menus.MenuConfig(),AZ=new j.ui.menus.MenuConfig();Ae.selCells=Ac.selection;if(AR.model.supportsViewFilterActions(Af.tid)){if((AM||AY)&&B(Af,q)&&N(Ae)){AP.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AR.derivedElementGroup(Af);});}if(AO&&Ab&&Ab.t===a.LIST){AK.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AR.derivedElementsEdit(Af,AS);});AK.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AR.removeQuickDE(Af);});AZ.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AR.renameDEList(Af);});}var AT=function(Ag){E(Ae,Af,Ab,Ag,false);},AX=function(Ag){E(Ae,Af,Ab,Ag,true);};if(AW&&!AO&&AY){k.forEach(AU,function(Ag){if(Ag[0]&&Ag[0].eid.indexOf(AW.id)>-1){Aa=false;return false;}});}if(Ad!=="VIHeatMapVisualizationStyle"&&!(AO&&Ab&&Ab.t===a.RESIDUE)&&(AM||AY)&&B(Af,f)&&I(Ae)){var AJ=function(){var Ag=new j.ui.menus.MenuConfig(),Ah=M(Ae,null,AQ);Ag.addRadioMenuGroup(null,AT,Ah.items,"checkMark",undefined,true);return Ag;};AP.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),this.id,AJ,"xt");}if(AO&&Ab&&Ab.t===a.CALCULATION){var AL=function(){var Ag=new j.ui.menus.MenuConfig(),Ah=M(Ae,Ab,AQ);Ag.addRadioMenuGroup(Ah.selectedItem.value,AX,Ah.items,"checkMark",undefined,true);return Ag;};AV.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),this.id,AL,"xt");AV.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){AR.removeQuickDE(Af);});AZ.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){AR.editDECalculation(Af);});}}return{createDe:AP,editGroup:AK,editCalculation:AV,renameDe:AZ};},isHostedPopupNode:function(AN,AL,AK,AJ){var AO=AK?AN:AN&&AN.parentNode;while(AO&&(AO!==AJ)){var AM=AO.getAttribute&&AO.getAttribute(AL);if(AM!==null&&AM.indexOf("mstrmojo-popup-widget-hosted")>=0){return true;}AO=AO.parentNode;}return false;},applyStyle2Legend:function(AM,AL,AK){var AJ,AO={},AN={};for(AJ in AM){if(AJ.indexOf("font")>=0||AJ.indexOf("color")>=0||AJ.indexOf("textDecoration")>=0){AO[AJ]=AM[AJ];}else{AN[AJ]=AM[AJ];}}if(AL){AL.style.background="";this.applyStyles2DomNode(AL,AN);}if(AK){this.applyStyles2DomNode(AK,AO);}},mergeMenuConfigs:function K(AK,AJ){function AL(AN,AO,AM){if(!AO){return ;}if(!AM&&AN.hasMenuItems()&&AO.hasMenuItems()){AN.addSeparator();}if(AO.hasMenuItems()){AN.absorbMenuItems(AO);}}return AJ.reduce(function(AM,AN){AL(AM,AK[AN.name],AN.noSeparator);return AM;},new mstrmojo.ui.menus.MenuConfig());},absorbMenuItems:function(AK,AJ,AL){AK.addDisposable(AJ);AK.absorbMenuItems(AJ);if(AL&&AJ.menus.length>0){AK.addSeparator();}},addWheelListener:(function(){var AM=mstrmojo.dom,AL=AM.attachEvent,AK=AM.preventDefault,AN;function AJ(AR,AQ,AS,AP){var AO=(AN==="wheel")?AS:function(AT){if(!AT){AT=window.event;}var AV={originalEvent:AT,target:AT.target||AT.srcElement,type:"wheel",deltaMode:(AT.deltaMode!==undefined?AT.deltaMode:1),deltaX:0,deltaZ:0,preventDefault:function(){AK(window,AT);}},AU=this;if(AN==="mousewheel"){AV.deltaY=-AT.wheelDelta;if(AT.wheelDeltaX!==undefined){AV.deltaX=-AT.wheelDeltaX;}}else{AV.deltaY=AT.detail;}return AS.call(AU,AV);};return AL(AR,AQ,AO,AP);}if(Object.prototype.hasOwnProperty.call(document.createElement("div"),"onwheel")){AN="wheel";}else{AN=document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";}return function(AP,AQ,AO){return AJ(AP,AN,AQ,AO);};}()),isNearZero:function(AK,AJ){AJ=AJ||5;var AL=1/Math.pow(10,AJ);return(Math.abs(AK)<AL);},hasMergedRowCells:function(AJ){return false;},getMockUpThresholds:function(AL,AM){var AJ=[{tid:1,n:"threshold 0",scope:1,rtp:2,rtxt:"",fmt:{bc:"#cc2525",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,flr:0,ceil:10},{tid:2,n:"threshold 1",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e34b4b",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5},{v:"30%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:10,ceil:30},{tid:3,n:"threshold 2",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e97d7d",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"30%",dtp:5},{v:"50%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:30,ceil:50},{tid:4,n:"threshold 3",scope:1,rtp:2,rtxt:"",fmt:{bc:"#79d479",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"50%",dtp:5},{v:"70%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:50,ceil:70},{tid:5,n:"threshold 4",scope:1,rtp:2,rtxt:"",fmt:{bc:"#57ba57",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"70%",dtp:5},{v:"90%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:70,ceil:90},{tid:6,n:"threshold 5",scope:1,rtp:2,rtxt:"",fmt:{bc:"#2ca02c",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"90%",dtp:5}],fn:5,fnt:3}],fn:19},ttp:1,flr:90,ceil:100}];k.forEach(AJ,function(AO){var AN=AO.expr.nds[0].m;AN.did=AL;AN.n=AM;});var AK={};AK[AL]=AJ;return AK;},generateThresholdsInfo:function(AL,AQ,AJ,AN){var AP=AJ.length,AK=[],AT,AM,AU=0,AS=0;for(var AO=0;AO<AP;AO++){AM=Math.round(AN[AO]*100);AS=AU;AU=AM||100;AT={tid:AO+1,n:"threshold "+AO,scope:1,rtp:2,rtxt:"",fmt:{bc:AJ[AO],bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:AL,n:AQ},cs:[{v:AM+"%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,ceil:AU,flr:AS};AK.push(AT);}var AR={};AR[AL]=AK;return AR;},psPt2CssPt:function(AL,AK){var AJ=parseInt(AL,10)*0.75;if(AK instanceof Function){AJ=AK(AJ);}return AJ+"pt";},captureEventOnce:function(AO,AN,AJ,AM,AL){function AK(AP){AN.call(AJ,Z.newDomEvent(AO,window,AP||window.event),AL);S.detachEvent(AM,AO,AK);}AL=AL||{};AM=AM||document;S.attachEvent(AM,AO,AK);},getPropertyByPath:function(AN,AM,AJ){var AK,AL;if(typeof AM!=="string"){return AJ;}AK=AM.split(".");AL=AK.every(function(AP){var AO=AN[AP];if(AO!==undefined){AN=AO;return true;}return false;});return AL?AN:AJ;},mergeHashes:function(){return Array.prototype.slice.apply(arguments).reduce(function(AJ,AK){if(AK){Object.keys(AK).forEach(function(AL){AJ[AL]=AK[AL];});}return AJ;},{});},toggleControlEnabled:function(AJ,AK){[].concat(AJ).forEach(function(AL){AL.set("enabled",!!AK);});},findInArray:function(AM,AL,AK){var AO=-1,AN,AJ;if(!Array.isArray(AM)){return AO;}for(AN=AK===undefined?0:AK,AJ=AM.length;AN<AJ;AN+=1){if(AL(AM[AN])){return AN;}}return AO;},arrayUnique:function(AJ,AK){if(!Array.isArray(AJ)){return AJ;}return AJ.filter(function(AL,AM){return p.findInArray(AJ,function(AN){return AK(AL,AN);},AM+1)===-1;});},range:function(AJ,AN,AM){AM=AM||1;var AL,AK=[];for(AL=AJ;AL!==AN;AL+=AM){AK.push(AL);}return AK;},drawDashLine:function D(AR,AL,AP,AK,AN,AJ,AQ){var AO=(AL===AK),AM;AR.beginPath();AR.moveTo(AL,AP);if(AO){AM=0;AP+=AJ;while(AP<=AN){if(AM%2===0){AR.lineTo(AL,AP);AP+=AQ;}else{AR.moveTo(AL,AP);AP+=AJ;}AM++;}if(AM%2===0){AR.lineTo(AK,AN);}}else{AM=0;AL+=AJ;while(AL<=AK){if(AM%2===0){AR.lineTo(AL,AP);AL+=AQ;}else{AR.moveTo(AL,AP);AL+=AJ;}AM++;}if(AM%2===0){AR.lineTo(AK,AN);}}AR.stroke();},repeat:function(AL,AM){var AJ=[],AK;AM=Math.max(0,AM);for(AK=0;AK<AM;AK+=1){AJ[AK]=AL;}return AJ;},isHierarchyObject:function(AJ){return(AJ&&AJ.t)===AC.DssTypeDimension;},selectPropertyPanel:function(AK,AL){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AK.getDocModel().selectVIUnit(AK.parent.id,true);var AJ=AK.edtModel;if(AJ){AJ.selectTargetByValue(AL);}},pluck:function(AK,AJ){if(!k.isArray(AK)){return AK;}return AK.map(function(AL){return AL&&AL[AJ];});},pick:function(AK,AJ){return AJ.reduce(function(AM,AL){AM[AL]=AK[AL];return AM;},{});},isColorManuallySet:function(AL,AK){var AJ=AF(AL,AK);if(AJ){return AJ.isManual;}},getCombColor:function(AL,AK){var AJ=AF(AL,AK);if(AJ){return AJ.color;}},setColorPickerShowAutomatic:function(AK,AJ){AK.children[0].fillColor.colorPicker.showAutomatic=AJ;},getCharGroupValueChangeCb:function(AJ){var AK=(function(){var AL={};AL[c.FONT_WEIGHT]=J.FS_BOLD;AL[c.FONT_STYLE]=J.FS_ITALIC;AL[c.UNDERLINE]=J.FS_UNDERLINE;AL[c.LINE_THROUGH]=J.FS_STRIKETHROUGH;return function(AM,AN){return AM^AL[AN];};}());return function(AM,AL){if(AJ instanceof Function){AJ=AJ();}if(!AJ){return ;}switch(AM){case c.COLOR:AJ.fontColor.fill.value.setValue(AL);break;case c.FONT_SIZE:AJ.fontSize.setValue(AL);break;case c.FONT_FAMILY:AJ.fontFamily.setValue(AL);break;case c.FONT_WEIGHT:case c.FONT_STYLE:case c.UNDERLINE:case c.LINE_THROUGH:AJ.fontStyle.setValue(AK(AJ.fontStyle.getValue(),AM));break;}};},getMetricsInDropZone:C,addLegendFontChangeListeners:function(AK,AL){var AJ=["lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle"];AE(AJ,AK,AL);},addLegendBackgroundChangeListeners:function(AK,AL){var AJ=["lgdBgFillClr","lgdBgFillTrans"];AE(AJ,AK,AL);},isValidDropZone:function(AJ){if(AJ===undefined){return false;}var AL=Object.keys(AJ).filter(function(AM){return AM!=="visProp";});var AK=T.copyProps(AL,AJ);return AJ&&!T.equals(AK,{});},getDrillCandidates:function(AO){var AL=AO.modelData,AM=AO.model,AK=AM.docModel.datasets,AJ=AL.gts,AN=AL.datasetId,AP=AK[AN],AQ=AP.att||[];return AQ.filter(function(AT){var AS=AT.did,AU=AJ.row||[],AR=AJ.col||[];return AU.concat(AR).every(function(AV){return AV.id!==AS&&AT.hide!==true;});});},getDrillMenuItemsCallback:function(AK,AL,AJ){return function(){var AN=p.getDrillCandidates(AK),AM=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});AN.forEach(function(AO){AM.addMenuItem(AO.n,"xt",AL,T.copy(AJ,{drillUnit:AO}));});return AM;};},doDrill:function(AL,AZ,AU,Aa){var Ab=AL;function AR(Ad){return Ad.model.controller.cmdMgr;}function AX(){return{success:function Ad(){p.visPrint("reaise");this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}var AK=Ab.model,AY=(Ab.getDocModel&&Ab.getDocModel())||Ab.model.docModel,AW=AY.getDataService(),AO=AW.newUpdate();var AQ=true;if(AY.prefs&&AY.prefs.rtprnt){AQ=parseInt(AY.prefs.rtprnt,10)===1;}else{if(AK.xtab.defn.tkp!==undefined){AQ=parseInt(AK.xtab.defn.tkp,10)===-1;}}Aa=Aa||{};Aa.keepParent=AQ;var AP=AU.call(AL,AZ,Aa);var AS=Ab.zonesModel,Ac=AS.getUpdateCallback(),AT=Ab.model.controller||AY.controller,AM=AT._getXtabCallback(Ab);AO.add(AP,R(Ac,AM));var AJ=AK.getSelectorDataFromViewFilter(Ab.model.data.vfexpr).concat({keepOnly:true,data:Ab.getSelections()}),AV=AY.getKeepOnlyOrExcludeAction(Ab.k,AJ);AO.add(AV,AX.call(Ab));AR(Ab).execute({execute:function AN(){this.submitUpdate(AO);},urInfo:{callback:AO.callback}});},strStartsWith:function(AL,AK,AJ){AJ=AJ||0;return AL.lastIndexOf(AK,AJ)===AJ;},changeWidgetBackground:function(AL,AM,AK){var AJ=AL.parent;if(AJ&&AM!==AK){AJ.changeUnitFormats(false,1,AL.getFormats(),c.BACKGROUND_COLOR,AM,AK);AJ.raiseEvent({name:"BEMFormatChange",propertyName:c.BACKGROUND_COLOR,value:AM,isTitle:false});}},translateGridError:function(AK,AJ){if(AJ===undefined){AJ=e.AE_ERROR;}if(AJ===e.EMPTY_DATA){AK=mstrmojo.desc(12093,"Filter excludes all data");}if(AJ===e.NO_DATASET||AJ===e.NO_TEMPLATE_UNIT){AK=mstrmojo.desc(11668,"Drag objects here.");}if(!AK){AK=mstrmojo.desc(13687,"Unknown error");}return{msg:AK,type:AJ};},hasValidValueInMetric:function(AL,AJ){var AK=p.getPropertyByPath(AL,"model.data.gsi.mx");if(AK===undefined||AK.length<=AJ||AJ<0){return false;}var AM=AK[AJ];return["min","max"].every(function(AN){var AO=AM[AN];return AO!==undefined&&AO!==null&&AO!=="";});},renderWidgetErrorRSD:function(AM,AO,AK){var AQ=document.createElement("div");var AP='<div style="display: table; height: 100%; width: 100%; background-color:#F5F5F2; border: solid 1px #A7A7A7; box-sizing: border-box;"><div style="display: table-cell; vertical-align: middle; text-align: center; color: #000000; font-size: 14pt;">'+AO+"</div></div>";AQ.innerHTML=AP;AQ=AQ.firstChild;var AJ=AM.width,AL=AM.height;if(AJ!==undefined){AQ.style.width=AJ+"px";}if(AL!==undefined){AQ.style.height=AL+"px";}var AN=AM.domNode;if(AN){AK.forEach(function(AR){AN["on"+AR]=undefined;});while(AN.firstChild){AN.removeChild(AN.firstChild);}AN.appendChild(AQ);}else{AM.parent.domNode.appendChild(AQ);}},visPrint:function(){var AJ=mstrmojo.VisUtility.enableInVis;if(AJ&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},hasCGorCon:function(AM,AJ){var AL=AJ&&AJ.did,AK=AM.model.data.datasetId||"",AN=null;if(AL){AN=r.getDatasetFromAttributeId(AM.model.docModel.datasets,AL);}else{if(AK){AN=r.getDatasetFromId(AM.model.docModel.datasets,AK);}}return AN&&r.hasCGorCon(AN);},findElementsByAttribute:function n(AL,AN,AM,AJ){AJ=!!AJ;var AO=[];if(AM.constructor!==Array){AM=[AM];}var AP=function(AQ){if(AJ){return AQ.identity&&AQ.identity.tlOpt&&AQ.identity.tlOpt[AN];}else{return AQ.getAttribute(AN);}};function AK(AS){var AQ=AP(AS),AR;if(AS.hasChildNodes()){AR=AS.firstChild;while(AR){if(AR.nodeType===1){AQ=AP(AR);if(AM.indexOf(AQ)!==-1){AO.push(AR);}else{AK(AR);}}AR=AR.nextSibling;}}}AK(AL);return AO;}});mstrmojo.VisUtility.enableInVis=true;var p=mstrmojo.VisUtility;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.elementHelper","mstrmojo.mstr.EnumFunction","mstrmojo.rw.xtab.XtabMenuConfig","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.ui.NumberFormatterEditor","mstrmojo.vi.ui.CalculationMenuEditor","mstrmojo.vi.enums.EnumDerivedElementType","mstrmojo.array");mstrmojo.requiresDescs(14388,14717);var R=mstrmojo.hash,N=mstrmojo.array,d=mstrmojo.elementHelper,W=mstrmojo.vi.enums.EnumDerivedElementType,G=mstrmojo.vi.ui.DatasetUnitMenuUtils,b=mstrmojo.mstr.EnumFunction;var U=mstrmojo.rw.xtab.XtabMenuConfig.ACTION_TYPES,O=U.GROUP,f=U.CALCULATION,c=2,T=3,h=1;function I(){return(mstrApp.appState===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION);}function E(j){if(!j||!j.items||!j.data||!j.xtab){return{};}var p=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,isHostedWithin:false,alignWithAnchor:true,maxHeight:350}),k=j.items,n=j.data,o=j.xtab,l=[];if(mstrApp.rootCtrl.resolveFeature("sort-drill-paths")){k.sort(function(r,q){if(r.n>q.n){return 1;}if(r.n<q.n){return -1;}return 0;});}k.forEach(function(r,q){if(l.indexOf(r.id)===-1){l.push(r.id);if(r.att){p.addPopupMenuItem(r.n,this.id,E,"xt",{items:k[q].att,data:n,xtab:o});}else{p.addMenuItem(r.n,"xt",function(){o.drill(n,k[q]);});}}});return p;}function V(r){var y=r.xtab,n=r.data,o=y.model,q=o.getAllDrillWithinPathsForCell(n,undefined,true),s=q.length,p=o.docModel,k=p.datasets[o.data.datasetId],z,t=[],w=-1,u,x,l,j;if(k&&p.isMDXDataset(k)){q.sort(function(AB,AA){AB.did=AB.id;AA.did=AA.id;if(AB.id<AA.id){return -1;}if(AB.id>AA.id){return 1;}return 0;});z=k.tables[0];z.dimensions.forEach(function(AA){l=true;u=-1;AA.hierarchies.forEach(function(AB){j=true;AB.att.forEach(function(AC){x=N.findBin(q,AC,"did",s);if(x!==-1){if(l){t.push({id:AA.did,n:AA.n,att:[]});w++;l=false;}if(j){t[w].att.push({id:AB.did,n:AB.n,att:[]});u++;j=false;}t[w].att[u].att.push(q[x]);}});});});}else{t=q;}return E({items:t,data:n,xtab:y});}function Z(k){var o=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:250});var n=k.xtab,l=k.deObject,j=k.groups;j.forEach(function(q,p){if(q.t===W.LIST&&!q.ido){o.addMenuItem(q.n,"",function(){n.addElementsToGroup(l,j[p],p,n.getSelections());});}});return o;}function B(k){var j=k&&k.des;return !!j&&j.some(function(l){return(l.t===W.LIST&&!l.ido);});}function D(j,p,l){var k=false,o=undefined;if(p){k=!d.isNonGroupNull(j.data)&&this.isActionAvailable(j.data,O)&&j.de===undefined;}else{if(l){var n=Q.call(this,j);k=n.isActionAvailable;o=n.group;}}return{isAddToGroupSupported:k,group:o};}function Q(k,n){var o,q=undefined,p=k.xtab,r=0,l=p.selCells;var j=l.filter(function(s,t){return l.indexOf(s)===t;});o=!j.some(function(s){var t=p.getCellForNode(s);if(!d.isNonGroupNull(t)&&this.isActionAvailable(t,O)){if(t.dei!==undefined){q=p.getDEInfo(t).de;if(q.t!==W.LIST||++r>1){return true;}}return false;}else{return true;}},this);if(n){o=(o)?!!q:o;}return{isActionAvailable:o,group:(o)?q:undefined};}function F(j){var k=j.xtab;return !k.selCells.some(function(l){var n=k.getCellForNode(l);return d.isNonGroupNull(n)||!this.isActionAvailable(n,O)||n.dei!==undefined;},this);}function L(k){var j;return !k.selCells.some(function(l){j=k.getCellForNode(l);return(d.isNonGroupNull(j)||!this.isActionAvailable(j,f));},this);}function M(n){var j=G.generateNumberFormat(n&&n.de&&n.de.nf),o=R.clone(j),q=R.clone(j),k=new mstrmojo.ui.menus.EditorConfig({contents:new mstrmojo.vi.ui.NumberFormatter({myData:o,oldData:q,formatValue:j}),data:o}),l=this.delegateActionToXtab;R.make(o,mstrmojo.Obj);R.make(q,mstrmojo.Obj);k.fnOk=function p(){l(n,"editQuickDECalculationNumberFormat",R.copy(this.data,{de:n.de}));};return k;}function X(p){var AA=new mstrmojo.ui.menus.MenuConfig(),s=4,AD=5,y=6,k=7,AB=" - ",r=" / ",u={SINGLE:[{n:mstrmojo.desc(358,"Absolute"),v:b.FunctionAbs}],PAIR:[{n:mstrmojo.desc(6017,"Add"),v:b.FunctionAdd},{n:mstrmojo.desc(2122,"Average"),v:b.FunctionAverage},{n:mstrmojo.desc(5868,"Least"),v:b.FunctionLeast},{n:mstrmojo.desc(5869,"Greatest"),v:b.FunctionGreatest},{n:"A-B",v:b.FunctionMinus+";0"},{n:"B-A",v:b.FunctionMinus+";1"},{n:"A/B",v:b.FunctionDivide+";0"},{n:"B/A",v:b.FunctionDivide+";1"}],MORE:[{n:mstrmojo.desc(6017,"Add"),v:b.FunctionAdd},{n:mstrmojo.desc(2122,"Average"),v:b.FunctionAverage},{n:mstrmojo.desc(5868,"Least"),v:b.FunctionLeast},{n:mstrmojo.desc(5869,"Greatest"),v:b.FunctionGreatest}]},z=p.isEdit,AC=z&&p.de,AG=p.data,AE=AC&&AC.es,AF=p.xtab,x=z?(AE&&AE.length):AF.getSelectionSize(),j=(x===1)?"SINGLE":((x===2)?"PAIR":"MORE"),w=u[j],q=(AC&&AC.func),o;if(j==="PAIR"){if(z&&AC){w[s].n=AE[0].n+AB+AE[1].n;w[AD].n=AE[1].n+AB+AE[0].n;w[y].n=AE[0].n+r+AE[1].n;w[k].n=AE[1].n+r+AE[0].n;}else{o=this.xtab.selCells;var l=o[0].innerText||o[0].textContent,t=o[1].innerText||o[1].textContent;w[s].n=l+AB+t;w[AD].n=t+AB+l;w[y].n=l+r+t;w[k].n=t+r+l;}}w.forEach(function(n){var AI=n.v,AH=z&&((typeof AI==="string"&&AI.indexOf(q)===0&&AI.indexOf(";0")>0)||AI===q);AA.addMenuItem(n.n,"xt "+(AH?"checked":""),function(){var AK=p.xtab,AJ=AC&&AC.func;if((AC&&AJ===AI)||(typeof AI==="string"&&AI.indexOf(AJ)===0&&AI.indexOf(";0")>0)){return ;}if(p.isEdit===true){AK.editDECalculation(AG,AI);}else{AK.derivedElementCalculation(AG,AI);}});},this);return AA;}function K(l){var y=l.xtab,p=l.data,r=y.getDEInfo(p),o=r&&r.deObject,x=r&&r.de,s=x&&x.t,u=o&&y.getOthersDEInfo(o),k=l.singleCellClick,q=y.isSingleAttrSelection(),t=true,n=y.getSelections(),j=y.isSingleSelection(),w={de:x,xtab:y,data:p,td:l.td,singleClick:k};if(u&&!j&&q){n.forEach(function(z){if(z[0]&&z[0].eid.indexOf(u.id)>-1){t=false;return false;}});}if(!(j&&s===W.RESIDUE)&&(k||q)&&this.isActionAvailable(p,f)&&L.call(this,y)&&t){this.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",this.id,X,R.copy(w,{isEdit:false}));}}function a(){var o=this.xtab,j=o.model,l=this.selectedData,k=o.getSelections(),n=!l.olap;if(k.length>0){k.forEach(function(p){p.forEach(function(q){n=n&&j.supportsViewFilterActions(q.tid);});});}else{n=n&&j.supportsViewFilterActions(j.getCellTitleInfo(l).title.id);}if(l.mix!==undefined){n=n&&j.getCellDataUnion(l).every(function(p){return j.supportsViewFilterActions(p.tid);});}return n;}function g(j){return j&&j.mix!==undefined&&!!j._e;}function H(j){return j&&j.otp===12;}function J(j){var p=j.data,q=this.xtab,l=q.model,r=g(p),o=r?p._e:l.getCellTitleInfo(p).title,k=!r&&o.otp===-1,n;if(k){N.forEach([p._lp,p._tp],function(t){var u=t;while(u&&u!==u._p&&!n){if(u.stt){continue;}var s=l.getCellTitleInfo(u),y=s.title,x=y&&y.id;if(x&&y.ost===12033){var w=q.getDEInfo(u),z=w&&w.de;if(z&&z.t===W.CALCULATION&&z.nf&&Object.keys(z.nf).length>0){n={de:z,xtab:q,data:u,td:j.td,singleClick:j.singleClick};break;}}u=u._p;}return !n;});}if(!n){if(k){o={oid:l.data.gsi.mx[p.mix].did,otp:4};}n={did:o.oid||o.id,t:o.otp,stp:o.ost,fs:o.fs};}return n;}function C(l,j){var k=l&&j.td&&l.getCellForNode(j.td);if(g(k)){k.id=k._e.oid;k.otp=k._e.otp;}return k;}function P(l){var n=l.de?l:J.call(this,l),o=n.de,p=l.xtab,k=p.model,s,j,r,q=k.id;if(o){if(p.isSingleSelection()&&o.t===W.CALCULATION){s=true;r=n;j=M;q=this.id;}}else{s=k.showNumberFormat(n);r={item:n};j=k.getNumberFormatEditorCfg;}if(s){this.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),q,j,r);}}mstrmojo.vi.ui.rw.xtab.XtabMenuConfig=mstrmojo.declare(mstrmojo.rw.xtab.XtabMenuConfig,null,{scriptClass:"mstrmojo.vi.ui.rw.xtab.XtabMenuConfig",buildXtabMenuConfig:function A(u){var t=this.xtab=u.xtab,AT=I(),o=t.model,Ab=this.selectedData=u.data=u.data||C(t,u),Aa=G.getDatasetFromAttributeId(o.docModel.datasets,Ab.id),AI=!!Ab.stt,AL=Ab.otp,AV=Ab.ost,AX=o.getCellTitleInfo(Ab),AQ=t.zonesModel,AP=AQ.id,k=AQ.docModel,AN={did:Ab.id,t:AL},AY=this.delegateActionToXtab,AZ=t.isSingleAttrSelection(),q=u.singleCellClick,AH=a.call(this),AU=t.getDEInfo(Ab),AF=AU&&AU.deObject,s=AU&&AU.de,w=s&&s.t,AS=o.isRecursiveAttribute(Ab.id||AX.title.id),l=t.isSingleSelection(),AM={de:s,xtab:t,data:Ab,cfg:u,td:u.td,singleClick:q},r=mstrmojo.desc(190,"Remove"),AB,y,x=!Aa||!k.isMDXDataset(Aa);this.selectedNode=u.td;if(u.onClose){this.addPopupHandlers(t.id,mstrmojo.emptyFn,u.onClose);}var AA=t.model.getAttributeFormsInTemplate(Ab.id||AX.title.id).length,n=Ab.fix;if(AA>1&&!AU){var p="pivot";if(!H(Ab)){n=AX.title.fix||(AM.data.fi||0)+1;p+="Form";}if(n){if(n>1){this.addMenuItem(mstrmojo.desc(5362,"Move Left"),"",function(){AY(AM,p,["l"]);});}if(n<AA){this.addMenuItem(mstrmojo.desc(5363,"Move Right"),"",function(){AY(AM,p,["r"]);});}this.addSeparator();}}if(AS&&!AI){if(H(Ab)){this.addMenuItem(mstrmojo.desc(14655,"Expand All Levels"),"",function(){AY(AM,"raExpandAll",[true]);});this.addMenuItem(mstrmojo.desc(14656,"Collapse All Levels"),"",function(){AY(AM,"raExpandAll",[false]);});}else{this.addMenuItem(mstrmojo.desc(14669,"Expand All Lower Levels"),"",function(){AY(AM,"raExpandDescendants");});}}if(!AT){if(g(Ab)&&Ab.um){this.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){AY(AM,"derivedMetric",["edit"]);});}if(H(Ab)){if(t.getDerivedAttribute(Ab.id)&&x){this.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){AQ.editDerivedAttribute({item:{did:AN.did,t:AN.t,n:Ab.n}});});}}if(this.isActionAvailable(Ab,U.GROUP_EDIT)&&AF){this.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"",function(){AY(AM,"derivedElementsEdit",[AU]);});}if(l&&w===W.CALCULATION){this.addSubMenuItem(mstrmojo.desc(12196,"Edit Calculation"),"",this.id,X,R.copy(AM,{isEdit:true}));}}this.addSeparator();this.addSortMenuItem(AM);if(t.model.getAllDrillPathsForCell(Ab).length>1){this.addSeparator();}if(!AT){if(l&&w===W.LIST){this.addSeparator();this.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"",function(){AY(AM,"derivedElementsEdit",AU);});}if((l&&w===W.LIST)||(AZ&&!l&&Q.call(this,AM,true).isActionAvailable)){this.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"",function(){AY(AM,"removeQuickDE",AU);});}if(l&&w===W.RESIDUE){this.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"",function(){AY(AM,"separateOthers",[s]);});}if(H(Ab)&&!AQ.isDynamicLink(AN)){this.addSeparator();if((!Aa||!G.hasCGorCon(Aa))&&x){this.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){AY(AM,"newDerivedAttribute");});this.addMenuItem(mstrmojo.desc(14717,"Create Links..."),"",function(){AY(AM,"newDynamicLinkAttr");});}if(this.isActionAvailable(Ab,U.GROUP_EDIT)&&!AF&&!AS){this.addMenuItem(mstrmojo.desc(13295,"Create Groups..."),"",function(){AY(AM,"derivedElementsEdit",[AU]);});}this.addSeparator();}}if(!AI&&this.isActionAvailable(Ab,U.KEEP_ONLY)&&AH){this.addSeparator();var AD=function(Ad){return function(){AY(AM,"keepOnlyOrExclude",[Ad]);};};this.addMenuItem(mstrmojo.desc(11701,"Keep Only"),"",AD(true));this.addMenuItem(mstrmojo.desc(3946,"Exclude"),"",AD(false));}if(!AI){this.addDrillMenuItem(AM);}if(Ab&&Ab.mix===undefined&&AX.isSrcTitle&&AL!==-1&&AL!==1&&!(AL===47&&AV===12032)){this.addShowTotalMenuItem(AM);}var AJ=Ab.axis;if(!AT){if(AQ.shouldShowDisplayFormsMenu(AN)){this.addPopupMenuItem(mstrmojo.desc(11908,"Display Attribute Forms"),this.id,function(){return G.getDisplayFormsMenu(AN,t,t.model.docModel.datasets,function(Ad){AQ.submitDropZoneUpdates(Ad);});});}this.addSeparator();if((q||AZ)&&this.isActionAvailable(Ab,O)&&F.call(this,AM)&&!AS){this.addMenuItem(mstrmojo.desc(1911,"Group"),"",function(){AY(AM,"derivedElementGroup");});}var AO=B(AF)&&D.call(this,AM,l,AZ);if(!!AO.isAddToGroupSupported){this.addAddToGroupMenuItem(AM.xtab,AF,AO.group);}if(g(Ab)){var AE=t&&u.td&&t.getCellForNode(u.td)._e,AW={did:AE.oid,t:AE.otp},AG={zone:{id:-1,items:t.model.data.gsi.mx},axis:AJ,idx:Ab.idx,item:AW};this.addSeparator();if(k.findDatasetIdFromUnit(AW.did)&&!k.isFromSolrCube(AW.did)&&!k.isFromMDXCube(AW.did)){this.addSubMenuItem(mstrmojo.desc(11806,"Aggregate By"),"",AP,AQ.getAggregateByMetricSubMenu,AG);this.addSeparator();}this.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",AP,AQ.getCalculationEditorCfg,AG);this.addSubMenuItem(mstrmojo.desc(12287,"Shortcut Metric"),"",AP,AQ.getShortcutMetricSubMenu,AG);this.addMenuItem(mstrmojo.desc(13624,"Create Metric..."),"",function(){AY(AM,"derivedMetric",["editNew"]);});}if(!g(Ab)&&!AL&&!AS){K.call(this,u);}this.addSeparator();if(!AI){P.call(this,AM);}if(g(Ab)||H(Ab)){this.addThresholdMenuOptions(AM);}}if(g(Ab)){this.addToggleMenuItem(mstrmojo.desc(6193,"Show Totals"),"",function(){AQ.showQuickSubtotals();},function(){AQ.hideDefinedSubtotals();},null,AQ.hasVisibleSubtotals());}if(!AI&&this.isActionAvailable(Ab,U.KEEP_ONLY)&&AH){this.addSeparator();this.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"",function(){mstrmojo.vi.ui.ViewDataDialog.open(t.parent,true);});}var j=t.gridData.gts,AR,AC=[j.rowSubPos,j.colSubPos],AK,Ac;if(AI){Ac=AJ===h;AK=AC[AJ-1];if(AK===c){AR=Ac?mstrmojo.desc(12206,"Move to Bottom"):mstrmojo.desc(13900,"Move to Right");AC[AJ-1]=T;}else{AR=Ac?mstrmojo.desc(12205,"Move to Top"):mstrmojo.desc(13901,"Move to Left");AC[AJ-1]=c;}this.addMenuItem(AR,"",function(){o.moveSubTotals(AM,AC);});}if(this.isActionAvailable(Ab,U.TOTAL_HEADER)&&Ab.mix===undefined){AB=function(){AY(AM,"removeTotal");};}if(!AT&&l&&w===W.LIST){y=function(){AY(AM,"renameDEList",AU);};}if(l&&w===W.CALCULATION){y=function(){this.delegateActionToXtab(AM,"editDECalculation");}.bind(this);AB=function(){this.delegateActionToXtab(AM,"removeQuickDE",AU);}.bind(this);r=mstrmojo.desc(12197,"Delete Calculation");}this.addSeparator();if(!AT&&!AI){var z=t.parent;if(z.addFormatMenuItem){z.addFormatMenuItem(this,{info:AX,isMetricHeader:g(Ab)},function(Ad){var Ae=t.highlightFormatTarget(Ad);t.openPopup(t.edtModel.getFormattingToolbar(Ad,u.td,{onClose:function(){t.restoreHighlights(Ae);}}));});}}if((AX&&AX.isSrcTitle)||g(Ab)){this.addPopupMenuItem(mstrmojo.desc(14003,"Replace with"),AP,AQ.getReplaceSubMenu,"",{zone:AQ.getZoneForObject(AX.title.id||Ab.id),item:AN});}if(y){this.addMenuItem(mstrmojo.desc(2453,"Rename..."),"",y);}if(AB){this.addMenuItem(r,"",AB);}if(!AT){if((AX&&AX.isSrcTitle)||g(Ab)){if(!y){this.addMenuItem(mstrmojo.desc(2453,"Rename..."),"",function(){AY(AM,"renameUnit");});}if(!AB){this.addMenuItem(r,"",function(){AY(AM,"removeUnit");});}}}if(t.isCopySupported&&!AI&&!H(Ab)&&!g(Ab)){this.addSeparator();this.addMenuItem(mstrmojo.desc(14388,"Copy Rows"),"",function(){AY(AM,"copyRowsFromXtab",[t.selCells]);});}},addAddToGroupMenuItem:function(n,k,l){var j=(k&&k.des)||[];this.addPopupMenuItem(mstrmojo.desc(14553,"Add to Group"),this.id,Z,"",{xtab:n,deObject:k,groups:l?[l]:j});},addDrillMenuItem:function Y(j){var o=j.xtab,n=j.data,k=o.model.getUnHiddenDrillPathsForCell(n),l=k.length;if(!(g(n)||n.mix!==undefined)){if(l>1){this.addSubMenuItem(mstrmojo.desc(145,"Drill"),"",this.id,V,j);}else{if(l===1){this._super(j,k[0]);}else{this.addNonInteractiveMenuItem(mstrmojo.desc(145,"Drill"),"",true);}}}},getSubtotalEditorConfig:function e(k){var j=this._super(k),l=k.data,n=k.xtab;j.fnOk=n.getOnSubtotalsChangeFn(j,l);return j;},addThresholdMenuOptions:function S(k){var j=k.data._e||k.data,l={did:j.oid||j.id,t:j.otp,n:j.n};this.xtab.model.buildThresholdMenuOptions(this,{item:l},false,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.models.EnumDragSources","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.models.DatasetDoubleClick","mstrmojo.vi.models._CheckDataCards","mstrmojo.vi.util.TemplateUtils");var Q=mstrmojo.hash,d=mstrmojo.array,t=mstrmojo.func,V=mstrmojo.vi.util.TemplateUtils,o=mstrmojo.vi.ui.DatasetUnitMenuUtils,T="00000000000000000000000000000000",e=mstrmojo.vi.models.EnumDragSources,S=mstrmojo.chart.model.enums.EnumDSSObjectType;var U={ABOVE:0,ON:1,BELOW:2};mstrmojo.vi.models.DropZoneItemType=null;mstrmojo.vi.models.DropZoneType=null;mstrmojo.vi.models.DropZonesEditorConfigType=null;function G(AD,z,AB,AE,AH,AC,AF,AG){var AA={act:AD,zoneId:z,unitId:AB,unitType:AE};if(AH!==undefined){AA.unitPos=AH+1;}if(AG!==undefined){AA.is_disableonly=AG;}if(AC){AA.datasetId=String(AC);AA.datasetType=String(AF);}return AA;}function L(z){return function(AA){var AB=[{t:z,did:NaN}];return !!this.getAllowDropInfo(AA,AB,AA.items.length-1,U.BELOW,{src:{data:{src:e.DATASETS}}}).allowedItems.length;};}mstrmojo.vi.models.DropZonesModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.vi.models._CheckDataCards],{scriptClass:"mstrmojo.vi.models.DropZonesModel",hostId:"",docModel:null,getDropZones:mstrmojo.emptyFn,getDZFlatStruct:function I(){var AC=this.getHost().model.data,AD=AC.gsi||{},z=(AD.rows||[]).concat(AD.cols||[]),AB={},AA={};z.forEach(function(AE){if(AE.hasOwnProperty("st")&&AE.hasOwnProperty("did")){AB[AE.did]=AE.st;}});if(AC.dz){Object.keys(AC.dz).forEach(function(AG){var AE=AC.dz[AG],AF=(AE.TemplateUnit||[]).concat(AE.TemplateMetric||[]);AF.forEach(function(AH){var AI=AH.id;if(AH.st===undefined&&AB.hasOwnProperty(AI)){AH.st=AB[AI];}});AA[AG]=AF;});}return AA;},getAvatarIconClass:function Y(){throw new Error(this.scriptClass+" must implement getAvatarIconClass method.");},canSwapAxis:function n(){return false;},swapAxis:function A(){if(this.canSwapAxis()){throw new Error(this.scriptClass+" must implement swapAxis method if this.canSwapAxis returns true.");}},canDefineSubtotals:function(){return false;},getZoneMenuItems:function q(AA,z){},getUnitMenuItems:function f(AA,z,AC,AB){},getMultiUnitsMenuItems:function c(AA,z,AB){var AC=this.id;if(o.getMultiSelectionShortcutMetricFunctions(AB).length){AA.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",this.id,function(){return mstrmojo.all[AC].getMultipleMetricsCalcMenus(z,AB,true);});}AA.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[AC].deleteItems(z,AB);});},deleteItem:function H(AA,z){this.throwAbstractMethodError("deleteItem");},deleteItems:function H(z,AA){this.throwAbstractMethodError("deleteItems");},addZoneItem:function b(AB,AC){AB.t=AB.t||4;if(AB.did===undefined){AB.did=AB.id;}var z=V.findUnitsById(this.getHost().model.data.gsi,AB.did)[0];if(z){Q.copyProps(["n","um"],z,AB);}if(AB.t===12||AB.t===47||AB.t===4){var AA=this.docModel.datasets,AE=false,AD=AB.t===4?"mx":"att";Object.keys(AA).every(function(AF){(AA[AF][AD]||[]).every(function(AG){if(AG.did===AB.did){AE=true;var AH;for(AH in AG){if(!AB.hasOwnProperty(AH)){AB[AH]=AG[AH];}}}return !AE;});return !AE;});}AC.push(AB);},getZone:function p(AE,AD,AC,z,AA){var AB=[];(AC||[]).forEach(function(AF){this.addZoneItem(Q.copy(AF),AB,AA);},this);return{n:AE,id:AD,enabled:!z,cssClass:(AA&&AA.allowSingle)?"singleUnitZone":"",getDropIconCls:function(){return"pivot";},title:(AA&&AA.title)||"",items:AB};},getZoneForObject:function O(AA){var z=null;this.getDropZones().zones.every(function(AB){if(d.find(AB.items,"did",AA)>-1){z=AB;return false;}return true;});return z;},getUnitIndexInZone:function k(z,AA){return d.find(z.items,"did",AA.did);},isZoneDropAllowed:function R(z){if(!z.enabled){return false;}return true;},getAllowDropInfo:function C(AA,AB,z,AC){return{allowedItems:AB.concat(),removeReplaced:AC===U.ON&&d.find(AB,"did",AA.items[z].did)===-1};},getTargetEdgePortion:function M(z){return 0.33;},allowInsertNewMetric:L(4),allowInsertNewAttribute:L(12),unitsDropped:function u(z,AA,AB,AD,AC){if(this.unitDropped!==mstrmojo.vi.models.DropZonesModel.prototype.unitDropped){return this.unitDropped(z,AA,AB.idx,AB.edge,AD,AC);}this.throwAbstractMethodError("unitsDropped");},getHost:function Z(){return mstrmojo.all[this.hostId];},getHostModel:function B(){this.throwAbstractMethodError("getHostModel");},shouldMetricNameShowIcon:function y(){return true;},addUnitsFromDataSource:function F(AG,AE,AB,AA){var AD=this.docModel.controller,z;AB=AB||[];var AC=false,AI=this.getHost(),AF=[],AJ;[].concat(AG).forEach(function(AK){AJ=this.isMetric(AK);AC=AJ||AC;z=mstrmojo.vi.models.DatasetDoubleClick.addObject(AK,AE,this);AB=AB.concat(z);if(AJ){AF.push(AK);}},this);if(AB&&AB.length){if(AC&&z&&z[0].actions){z[0].actions.push(AI.model.getValuesDefaultFormatGridZoneAction(AF));}var AH=AD._getXtabCallback(this.getHost());if(AA){AH=t.wrapMethods(AA,AH);}if(this.existLargeOrManyItems()){this.warnAndExecCallBackForAddUnits(function(){AD.submitUndoRedoUpdates(AB,{},AH);});return ;}AD.submitUndoRedoUpdates(AB,{},AH);}},changeZoneUnits:function l(AA,z,AB){},getZoneAddCandidates:function X(z){return[];},getRequiredItemsInfo:function g(AA){if(!AA){return 0;}var z=[];this.getDropZones().zones.forEach(function(AB){z=z.concat(AB.items);});return Number(z.reduce(function(AB,AC){if(parseInt(AC.did,10)!==-1&&AC.t===AA){return AB+1;}return AB;},0));},getUpdateCallback:function P(){var AA=this.getHost().parent.k,z=this.docModel;return{success:function(){z.getPanel().getUnitByKey(AA).selectVIUnit(true);}};},getUpdateTemplateAction:function K(z){return this.docModel.getDataService().getUpdateTemplateAction(this.getHost().k,z);},getReplaceCandidates:function J(z,AB){var AA=[],AE=AB.t,AD=AB.did,AC=this.getHostModel().datasetId;this.getDropZones().zones.forEach(function(AF){((AF&&AF.items)||[]).forEach(function(AH){var AI=AH.t,AG=AH.did;if(AI!==21&&AG!=="-1"&&AG!==T&&((AI===4&&AE===4)||(AI!==4&&AE!==4))&&AG!==AD&&d.find(AA,"did",AG)===-1){AA.push(AH);}});});if(AC){this.docModel.getDatasetUnits(AE===4?["mx"]:["att"],null,AC).forEach(function(AF){if(d.find(AA,"did",AF.did)===-1&&AF.did!==AD&&!AF.hide){AA.push(AF);}});}return o.getSortedDatasetUnits(AA);},getDropTargetIndex:function D(AA,AC){var z=AC.idx,AB=(AC.edge===U.ON&&!AC.removeReplaced)?U.BELOW:AC.edge,AE=z,AD=this,AF={};AC.allowedItems.forEach(function(AH){var AG=AD.getUnitIndexInZone(AA,AH);if(AG!==-1){AF[AG]=AH;}});Q.forEach(AF,function(AH,AI){var AG=parseInt(AI,10);if(AG<z){AE--;}else{if(AG===z){AB=U.ON;}}});return AB===U.BELOW?(AE+1):AE;},getAddDropZoneUnitAction:function j(AA,AC,z,AB){return G("addDropZoneUnit",AA.id,AC.did,AC.t,z,AB&&AB.datasetId,(AB&&AB.datasetType)||S.DssTypeReportDefinition);},getAddDropZoneUnitsActions:function x(AA,AB,z,AC){return AB.reverse().map(function(AD){return G("addDropZoneUnit",AA.id,AD.did,AD.t,z,AC&&AC.datasetId,(AC&&AC.datasetType)||S.DssTypeReportDefinition);});},getRemoveDropZoneUnitAction:function W(z,AA,AB){return G("removeDropZoneUnit",z.id,AA.did,AA.t,undefined,undefined,undefined,AB);},checkAndAddThresholdAction:function s(AB,z,AA){return false;},getAllZones:function(){return this.getDropZones().zones||[];},getClearAllUnitsActions:function N(){var z=[];(this.getAllZones()).forEach(function(AA){((AA&&AA.items)||[]).forEach(function(AB){z.push(this.getRemoveDropZoneUnitAction(AA,AB));},this);},this);return z;},getClearAllUnitsUnTemplateActions:function a(){return[];},clearAllDropZones:function r(AI){var AB=this.getClearAllUnitsActions(),AD=this.getClearAllUnitsUnTemplateActions(),AK=this.getHost(),AG=AK.id,AC=AK.gridData||AK.model.data||AK.node.data,AF=AC.vlexpr,AL=this.docModel,AA=AK.model,AE=AL.controller,AH=t.wrapMethods({success:function(){var AM=mstrmojo.all[AG];if(AM._viSelections){AM.clearSelections();AM.endSelections();}}},AE._getXtabCallback(AK),{success:function AJ(){mstrmojo.all[AG].raiseEvent({name:"regenerateToolbar"});}}),z=AA.getKeepOnlyActionsForAssociatedNodes([],AH);if(AF){z.actions.push(AE.dataService().getUpdateTemplateAction(AK.k,AA.getRemoveMetricLimitsAction(AF)));}if(AI){AI.actions=[].concat(AI.actions).concat(z.actions);AI.callback=t.wrapMethods(AI.callback,z.callback);}else{AI=z;}if(AD&&AD.length>0){AI.actions=AI.actions.concat(AD);}this.submitDropZoneTemplateUpdates(AB,AI);},submitDropZoneUpdates:function h(AF,AG,AB){var AD=this.getHost(),AA=this.docModel,z=AA.controller,AC=[].concat(AF||[]);if(AC&&AC.length){var AE=AG||z._getXtabCallback(AD);z.cmdMgr.execute({execute:function(){this.submit(AC,AE,AB);},urInfo:{callback:AE}});}},submitDropZoneTemplateUpdates:function E(z,AB){var AA=(z&&z.length)?[this.getUpdateTemplateAction(z)]:[];if(AB&&AB.actions){AA=AA.concat(AB.actions);}this.submitDropZoneUpdates(AA,AB&&AB.callback,AB&&AB.extras);},getHighlightTargets:function w(AA,z){return[z];}});mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION=U;mstrmojo.vi.models.DropZonesModel.ENUM_REQUIREMENT_TYPE={ATTRIBUTE:12,METRIC:4,LONGITUDE:"long",LATITUDE:"lat"};}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.vi.ui.DatasetUnitMenuUtils");var B=mstrmojo.vi.ui.DatasetUnitMenuUtils;mstrmojo.vi.ui.UnitList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.vi.ui.UnitList",init:function C(D){this._super(D);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIUnitList");},getItemProps:function A(F,D){var E=this._super(F,D);E.addCls("unit "+B.getUnitCssClass(F));return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.UnitList","mstrmojo.vi.ui._HasUnitListAvatar","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.dom","mstrmojo.css","mstrmojo.string");mstrmojo.requiresDescs(629,6424);var I=mstrmojo.desc,F=mstrmojo.dom,J=mstrmojo.hash,B=mstrmojo.string,L="mnu",C="clsx",O="icn "+L+"_sub",M="icn "+C+"_sub",R;function Q(S,U,T){return function(){U.style.overflow=S?"visible":"hidden";if(T){T();}};}mstrmojo.vi.ui.InteractiveUnitList=mstrmojo.declare(mstrmojo.vi.ui.UnitList,[mstrmojo.vi.ui._HasUnitListAvatar,mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:true,panelId:"",useRichTooltip:true,hasTooltipContent:function(T,U){var S=this.getLabelNode(U);return S.scrollWidth>S.clientWidth;},getItemTooltip:function(W,Y,X){var U=this.getLabelNode(Y);if(this.hasTooltipContent(W,Y)){var T=F.position(U),V="<div>"+B.encodeHtmlString(W.n,true)+"</div>"+(W.dsc?"<div>"+B.encodeHtmlString(W.dsc,true)+"</div>":"");var S={areaId:W._renderIdx+"text",cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:V,top:T.y-6,left:T.x,enableHover:true};return S;}return null;},showTooltip:function D(S,V){var U=S.target||F.eventTarget(S.hWin,S.e),T=this.getItemFromTarget(U);if(T&&T.n){var W=this.getItemNodeFromTarget(U);this.richTooltip=this.getItemTooltip(T,W,U);if(this.richTooltip){this._super(S,V);}}},getItemMarkup:function E(S){if(!R){R=this._super(S).replace(">{@en@n}",'><span class="txt" unselectable="on">{@en@n}</span><div class="'+L+'"><div title="'+I(6424,"Menu")+'" class="'+O+'"></div></div><div class="'+C+'" title="'+I(629,"Delete")+'"><div class="'+M+'"></div></div>').replace("<{@tag}",'<{@tag} unselectable="on" ');}return R;},getLabelNode:function N(S){return S.getElementsByClassName("txt")[0];},ondblclick:function H(S){var U=S.getTarget(),T=(F.findWidget(U)===this)&&this.getItemFromTarget(U);if(!!T){S.cancel();this.doubleClickItem(T);}},onItemContextMenu:function P(V,T){var X=T.getTarget();if(V){this.closePopup();var S=mstrmojo.all[this.panelId],U=S&&S.getPanelSelectedItems&&S.getPanelSelectedItems(),W=U&&U.length>1;this[W?"showMultiSelectionMenu":"showItemMenu"](W?U:V,this.getItemNodeFromTarget(X),F.getMousePosition(T.e,T.hWin));return true;}},configurePopup:function K(S,W,V,U){mstrmojo.all[this.panelId].addPopupHandlers(S);var T=W.parentNode;S.addPopupHandlers("iulMenuOverflow",Q(true,T,V),Q(false,T,U));S.hostId=this.id;S.isHostedWithin=false;S.hostElement=W;},showItemMenu:mstrmojo.emptyFn,showMultiSelectionMenu:mstrmojo.emptyFn,deleteItem:mstrmojo.emptyFn,doubleClickItem:mstrmojo.emptyFn,isDragValid:function A(S){return !isNaN(parseInt(S.src.node.getAttribute("idx"),10))||this._super(S)||false;},getSelectedItems:function G(){var V=this,S=this.items,U=null,T=[];J.forEach(this.selectedIndices,function(X,W){U=S[W];if(X&&U){U=J.copy(U);U.ulist=V;U.itemNode=V._getItemNode(U._renderIdx);T.push(U);}});return T;}});mstrmojo.vi.ui.InteractiveUnitList.CLS_HAS_MENU="has-m";mstrmojo.vi.ui.InteractiveUnitList.CLS_HAS_X="has-x";}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.array","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi.models.DropZonesModel");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");mstrmojo.requiresDescs(11819,11825,11827);var U=mstrmojo,L=U.array,T=U.vi.viz,J=mstrmojo.vi.models.DropZonesModel.ENUM_REQUIREMENT_TYPE,K=J.ATTRIBUTE,Q=J.METRIC,C=T.EnumVisualizationTemplates,O=T.EnumVizStyles,I=O.GRAPH_MATRIX,W=T.EnumWidgetTypes.GRAPH_MATRIX,B={},M="custom",P="plugins.";B[O.GOOGLE_MAP]=C.GOOGLEMAP;B[O.HEAT_MAP]=C.HEATMAP;B[O.ESRI_MAP]=C.ESRIMAP;B[O.NETWORK]=C.NETWORK;B[O.IMAGE_LAYOUT]=C.IMAGELAYOUT;function F(Z,Y){var a=[],b=function(c,d){a.push({t:c,r:d});};if(Z){b(Q,Z);}if(Y){b(K,Y);}return a;}var N=[{n:mstrmojo.desc(11820,"Bar Chart"),id:"BarChart",mr:F(1,0),vt:{v:C.GRAPHMATRIXVERTICALBARAUTOMATIC,h:C.GRAPHMATRIXHORIZONTALBARAUTOMATIC}},{n:mstrmojo.desc(8121,"Line Chart"),id:"LineChart",mr:F(1,1),vt:{v:C.GRAPHMATRIXVERTICALLINEAUTOMATIC,h:C.GRAPHMATRIXHORIZONTALLINEAUTOMATIC}},{n:mstrmojo.desc(11821,"Area Chart"),id:"AreaChart",mr:F(1,1),vt:{v:C.GRAPHMATRIXVERTICALAREAAUTOMATIC,h:C.GRAPHMATRIXHORIZONTALAREAAUTOMATIC}},{n:mstrmojo.desc(11822,"Bubble Chart"),id:"BubbleChart",mr:F(1,1),vt:C.GRAPHMATRIXBUBBLECIRCLEMM},{n:mstrmojo.desc(11823,"Pie Chart"),id:"PieChart",mr:F(0,1),vt:C.GRAPHMATRIXPIE},{n:mstrmojo.desc(11824,"Combo Chart"),id:"ComboChart",mr:F(2,1),vt:C.GRAPHCOMBINATIONBARAREADUALAXIS}];N.forEach(function(Y){Y.s=I;Y.wtp=W;});var E={BUILT_IN_LIST:1,CUSTOM_LIST:2};function G(a){var b=[],Y=mstrConfig.pluginsVisList||{},Z=function(c,e,d){d=d||[];e=isNaN(e)?0:parseInt(e,10);if(e>0){d.push({t:c,r:e});}return d;};Object.keys(Y).forEach(function(h){var d=Y[h],c=d.s,g=d.d,f=d.c.indexOf(P)!==-1?E.CUSTOM_LIST:E.BUILT_IN_LIST;if(!(a&f)){return ;}if(c===I){d.st.forEach(function(k){var j=L.find(N,"id",k);if(j>=0){b.push(N[j]);}});return ;}var e=d.desc;if(e){g=mstrmojo.desc(e,"");}b.push({n:g,s:c,mr:Z(K,d.ma,Z(Q,d.mm)),id:c,dz:d.dz,vt:B[c],wtp:d.wtp,pn:d.pn||null});});return b;}function H(Y){return G(E.BUILT_IN_LIST+E.CUSTOM_LIST).filter(function(Z){return Z.s===Y;}).map(function(Z){return{s:Z.s,vt:Z.vt||-1};})[0];}function A(Y,Z){window.FormWrapper.doVisRemove(Y,Z);}var V;mstrmojo.vi.ui.VizGalleryList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.VizGalleryList",init:function R(Y){this._super(Y);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIGalleryList");this.items=(this.items||[]).concat(G(this.type));},items:null,type:E.BUILT_IN_LIST,getItemMarkup:function D(Y){if(!V){V=this._super(Y).replace(">{@en@n}<","><div><div></div></div><");}return V;},getItemProps:function X(a,Y){var Z=this._super(a,Y);Z.addCls("ic-"+a.id);if(this.type===E.CUSTOM_LIST){Z.addCls(M);}return Z;},select:function(a,Y){if(!a){return ;}a=L.ensureArray(a);var c=this._removeAll(),e=this._addSelections(a),b;if(this.selectionPolicy!=="reselect"){for(b=c.length-1;b>=0;b--){var d=L.indexOf(e,c[b]);if(d>-1){c.splice(b,1);e.splice(d,1);}}}var Z={name:"selectionChange",added:e,removed:c};if(Y){if(this.onselectionChange){this.onselectionChange(Z);}}else{this.raiseEvent(Z);}},onItemContextMenu:function S(Z,Y){var a;if(Z.pn){this.hideTooltip();a=new mstrmojo.ui.menus.MenuConfig({position:mstrmojo.dom.getMousePosition(Y.e,Y.hWin),isHostedWithin:false});a.addMenuItem(mstrmojo.desc(629,"Delete"),"",function(){A(Z.id,Z.pn);});this.openPopup(a.newInstance());}}});mstrmojo.vi.ui.VizGalleryList.getVizList=G;mstrmojo.vi.ui.VizGalleryList.getVisType=H;mstrmojo.vi.ui.VizGalleryList.VIZ_LIST_TYPE=E;}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.rw.xtab.XtabMenuConfig");var A=mstrmojo.rw.xtab.XtabMenuConfig.ACTION_TYPES;mstrmojo.vi.ui.rw.xtab.ViewDataXtabMenuConfig=mstrmojo.declare(mstrmojo.vi.ui.rw.xtab.XtabMenuConfig,null,{scriptClass:"mstrmojo.vi.ui.rw.xtab.ViewDataXtabMenuConfig",buildXtabMenuConfig:function B(C){this._super(C);this.menus=this.menus.filter(function(D){return D.ctxt&&!D.ctxt.isTotals&&(this.isActionAvailable(D.ctxt.data,A.SORT)||this.isActionAvailable(D.ctxt.data,A.PIVOT));},this);},addDrillMenuItem:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.string","mstrmojo.Widget","mstrmojo.VisUtility");var M=mstrmojo,R=M.css,O=M.hash,H=M.VisUtility,D=M.dom,A=M.string,C=M.VisEnum.ControlType,K=5,Q=15,G=1,L=5,E=8,S=0,F=mstrmojo.desc(14442,"This metric has its axis scale set to custom min and max values");function I(){var U,W,T=0,V=this.styles,Y=this.contentData,X=Y.length;if(D.isFF){this.DOTS_WIDTH=H.measureTextWidth("W…",V,2*E+2*G);this.DOTS_WIDTH_NO_PADDING=H.measureTextWidth("W…",V,2*G);}else{this.DOTS_WIDTH=H.measureTextWidth("…",V,2*E+2*G);this.DOTS_WIDTH_NO_PADDING=H.measureTextWidth("…",V,2*G);}for(U=0;U<X;U++){W=Y[U];W.width=H.measureTextWidth(W.text,V,2*E+2*G);if(W.sort){T++;}if(W.extraAttributes.customScale){T++;}}this.nSort=T;}function J(){var c,e,b,X=false,d=this.contentData,W=d.length,Z=W,U=parseInt(this.width,10),a=(W-1)*K,Y=this.nSort*Q,T=a+Y,f,V;for(c=0;c<W;c++){delete d[c].actualWidth;}while(!X){while(Z>0){f=Math.floor((U-T)/Z);b=false;for(c=0;c<W;c++){if(d[c].actualWidth!==undefined){continue;}e=d[c].width;if(e<=f){d[c].actualWidth=e;T+=e;b=true;Z--;}}if(!b){break;}}if(Z>0){for(c=W-1;c>=0;c--){if(d[c].actualWidth===undefined){Z--;if(f<this.DOTS_WIDTH_NO_PADDING){d[c].actualWidth=-1;V=0;if(d[c].sort){V++;}if(d[c].extraAttributes.customScale){V++;}if(c>0){T-=K;}T-=V*Q;break;}else{if(f<=this.DOTS_WIDTH){d[c].noPadding=true;}}d[c].actualWidth=f;T+=f;}}if(c===0||Z===0){X=true;}}else{X=true;}}this.contentWidth=T;}function N(){var W=parseInt(this.width,10),b=parseInt(this.height,10),U=this.contentWidth,a=(W-b)>>1,V=(U-b-2*S)>>1,T=(W-U)>>1,Y=this.align,X=this.domNode,Z={};if(Y==="left"||Y==="right"){R.addClass(X,"gm-rotate-270");if(U<W){Z.width=U;}Z.top=a;if(Y==="left"){Z.left=-V;}else{Z.right=-V;}}else{if(Y==="top"||Y==="bottom"){if(U<W){Z.width=U;Z.left=T;}}else{if(Y==="center"){if(U<=W){Z.width=U;Z.right=0;Z.bottom=0;}}}}H.positionDomNode(X,Z);}function B(X,T,W){var V=(X==="left"||X==="right")?"row":"column",U=T?"ascendingly":"descendingly";return"This "+V+" is sorted "+U+" based on "+W;}function P(){var f,p,d,b,g,X,Y,T,k,l,c,o=document,U=o.createDocumentFragment(),h=this.domNode,W=this.styles,j=this.contentData,e=this.align,a=j.length,Z=parseInt(this.height,10),V=0;for(f=0;f<a;f++){b=j[f];if(b.actualWidth<0){continue;}X=b.text;g=b.extraAttributes;c=g.sortOrder;if(e==="left"||e==="right"){if(g.customScale){Y=o.createElement("div");Y.setAttribute("class","gm-lock-icon");Y.setAttribute("title",F);Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}if(g.sort){Y=o.createElement("div");Y.setAttribute("class",c?"gm-sort-icon ascend":"gm-sort-icon");Y.setAttribute("title",B(e,c,X));Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}}k=o.createElement("div");k.setAttribute("class","gm-text-body-nowrap");k.setAttribute("type",C.GM_TEXT_BODY);k.innerHTML=A.encodeHtmlString(X,true);k.container=h;k.style.width=b.actualWidth-2*G+"px";k.style.height=Z-2*G+"px";if(!b.noPadding){k.style.padding=L+"px "+E+"px";}else{k.style.padding="0px";k.innerHTML="…";}H.applyStyles2DomNode(k,W);if(e==="left"||e==="right"){k.rotated=true;}T=o.createElement("div");T.setAttribute("class","gm-textbody-unit");T.appendChild(k);if(b.actualWidth<b.width){k.setAttribute("title",X);}else{k.style.overflow="visible";}T.style.left=V+"px";T.style.width=b.actualWidth-2*G+"px";T.style.height=Z-2*G+"px";U.appendChild(T);for(p in g){if(g.hasOwnProperty(p)){d=g[p];if((typeof d)==="string"||(typeof d)==="number"){T.setAttribute(p,String(d));}else{T[p]=g[p];}}}V+=b.actualWidth;if(e!=="left"&&e!=="right"){if(g.customScale){Y=o.createElement("div");Y.setAttribute("class","gm-lock-icon");Y.setAttribute("title",F);Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}if(g.sort){Y=o.createElement("div");Y.setAttribute("class",c?"gm-sort-icon ascend":"gm-sort-icon");Y.setAttribute("title",B(e,c,X));Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}}if(f!==a-1&&j[f+1].actualWidth>0){l=o.createElement("div");l.setAttribute("class","gm-text-body-nowrap");l.innerHTML="|";l.style.left=V-2+2+"px";l.style.width=K+"px";l.style.padding="5px 2px";l.style.overflow="visible";H.applyStyles2DomNode(l,W);U.appendChild(l);V+=K;}}h.appendChild(U);}mstrmojo.VisAxisLabel=mstrmojo.declare(mstrmojo.Widget,[],{scriptClass:"mstrmojo.VisAxisLabel",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}; height:{@height}"></div>',init:function(T){this.align="left";this.styles={};this.contentData=[];this.contentWidth=0;if(this._super){this._super(T);}I.call(this);},postBuildRendering:function(){J.call(this);N.call(this);P.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Widget","mstrmojo.VisUtility","mstrmojo.VisEnum");var F=mstrmojo.VisUtility,H=mstrmojo.VisEnum.ControlType,B=mstrmojo.array,G=1,E=5,D=8;function I(){var R=this.labelObj,L=F.measureTextHeight(R.text,this.styles,0,100,undefined,true,true);R.textWidth=F.measureTextWidth(R.text,this.styles,0,undefined,true);R.textHeight=F.measureTextHeight(R.text,this.styles,0,this.width-2*G-2*D,"break-word",true,false);this.lineChanged=this.width<R.textWidth+2*G+2*D;if(this.lineChanged){this.actualOffsetWidth=this.width;}else{this.actualOffsetWidth=R.textWidth+2*D+2*G;}var K=Math.floor((this.height-2*G-2*E)/L);this.hasEllipsis=this.height<R.textHeight+2*G+2*E;if(this.hasEllipsis){this.domNode.setAttribute("title",R.text);this.lineCount=Math.min(this.maxLineCount,K);if(this.lineCount===0){R.truncatedText="...";}else{R.truncatedText=F.truncateTextToLineWithWordWrap(R.text,this.styles,this.width-2*G-2*D,this.lineCount,false,true);var N=R.truncatedText.split(" "),J="";for(var M=0;M<N.length;M++){var O=F.measureTextWidth(N[M],this.styles);if(O>this.width-2*G){J+="...";}else{J+=N[M];}if(M===0&&M!==N.length-1){J+=" ";}}R.truncatedText=J;}}else{var P=R.text.split(" "),Q=false;B.forEach(P,function(T){var S=F.measureTextWidth(T,this.styles);if(S>this.width-2*G-2*E){Q=true;return false;}},this);if(Q){this.domNode.setAttribute("title",R.text);}this.lineCount=Math.min(this.maxLineCount,Math.round(R.textHeight/L));}if(this.lineCount===0){this.actualOffsetHeight=this.height;}else{this.actualOffsetHeight=this.lineCount*L+2*G+2*E;}this.domNode.style.width=this.actualOffsetWidth+"px";this.domNode.style.height=this.actualOffsetHeight+"px";}function A(){var J,Q,N,L,P=document,O=P.createDocumentFragment(),M=this.domNode,T=this.styles,S=this.labelObj,R=S.extraAttributes,K=0;L=P.createElement("div");L.setAttribute("class","gm-text-body-nowrap");L.style.whiteSpace="normal";L.style.textAlign="center";L.setAttribute("type",H.GM_TEXT_BODY);L.innerHTML=this.hasEllipsis?S.truncatedText:S.text;L.container=M;L.style.width=this.actualOffsetWidth-2*G+"px";L.style.height=this.actualOffsetHeight-2*G+"px";L.style.padding=E+"px "+D+"px";F.applyStyles2DomNode(L,T);N=P.createElement("div");N.setAttribute("class","gm-textbody-unit");N.style.left=K+"px";N.style.width=this.actualOffsetWidth-2*G+"px";N.style.height=this.actualOffsetHeight-2*G+"px";for(J in R){if(R.hasOwnProperty(J)){Q=R[J];if((typeof Q)==="string"||(typeof Q)==="number"){N.setAttribute(J,String(Q));}else{N[J]=R[J];}}}N.appendChild(L);O.appendChild(N);M.appendChild(O);}function C(){var K=this.domNode,N=this.width,L=this.height,J=this.actualOffsetWidth,M=this.actualOffsetHeight;K.style.left=Math.floor((N-J)/2)+"px";K.style.top=Math.floor((L-M)/2)+"px";}mstrmojo.gm.TitleLabelCapsule=mstrmojo.declare(mstrmojo.Widget,[],{scriptClass:"mstrmojo.gm.TitleLabelCapsule",cssClass:"",width:10,height:10,labelObj:null,styles:null,actualOffsetWidth:0,actualOffsetHeight:0,hasEllipsis:false,lineChanged:false,lineCound:1,maxLineCount:2,markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px; height:auto"></div>',init:function(J){this.labelObj={};this.styles={};if(this._super){this._super(J);}},postBuildRendering:function(){I.call(this);A.call(this);C.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.WidgetMatrix","mstrmojo.gm.GMEnums","mstrmojo.util.ui._HostsSplitter","mstrmojo.util.ui._LassoSelector");var K=Math,S=mstrmojo.chart,I=mstrmojo.VisUtility,U=1,P=mstrmojo.hash,T=mstrmojo.array,G=2,C=mstrmojo.VisEnum.ControlType,W=mstrmojo.gm.EnumDockPosition,A="-1";function M(b,Y,a){var c=document.createElement("div"),Z=b===W.LEFT||b===W.RIGHT,X=Z?"gm-resizer-v":"gm-resizer-h";c.setAttribute("class",X);c.setAttribute("type",C.SPLITTER);c.setAttribute("dockPosition",b);c.setAttribute("splitterType",Y);c.setAttribute("splitterId",a);c.setAttribute("draggable","false");return c;}function L(c,e,X,f){if(!c){return ;}var Z,j,a,h,d=c.style,k=e===W.TOP,Y=e===W.BOTTOM,g=e===W.LEFT,b=e===W.RIGHT;if(k||Y){Z=X;j=U;a=0;h=-G;if(Y){h+=f;}else{h-=U;}}else{if(g||b){Z=U;j=f;h=0;a=-G;if(b){a+=X;}else{h-=U;}}}d.left=a+"px";d.top=h+"px";d.width=Z+"px";d.height=j+"px";}function N(X){return X?X.firstChild:null;}function E(X){return X?X.firstChild.childNodes:[];}function V(c,f,X,e,h,b){var d,Z=f.length,a,g,Y=b[X];if(!Y){Y=e.getNormalizedFormElementId(X);b[X]=Y;}for(d=0;d<Z;d++){g=f[d].id;if(g===X){return true;}a=b[g];if(!a){a=e.getNormalizedFormElementId(g);b[g]=a;}if(h&&c!==A){if(e.compareNormalizedElementsId(a,Y)){return true;}}else{if(a===Y){return true;}}}return false;}function R(x,r,b,Y,w){var p,h,o,k,u,f,l,s=x.getSelectedObjectInfo(true),Z,q,a={},e,c=r.length,d,X,g,t;h=s.length;for(p=0;p<h;p++){q=String(s[p].tid);if(Y&&q!==A){a[p]=[q].concat(b.getLinkedAttributes(q)||[]);}else{a[p]=[q];}}for(e=0;e<c;e++){d=r[e];X=true;g=false;for(f in d){if(d.hasOwnProperty(f)){l=d[f];Z=true;t=false;for(p=0;p<h;p++){u=a[p];for(o=0,k=u.length;o<k;o++){if(u[o]===f){t=true;if(!V(f,l,s[p].eid,b,Y,w)){Z=false;}else{g=true;}break;}}if(t){break;}}if(!Z){X=false;break;}}}if(X&&g){return true;}}return false;}function O(Y){var Z,b,a={},X=Y.identity,c=X.getSelectedObjectInfo(false),d=c.length;for(Z=0;Z<d;Z++){b=c[Z];if(a[b.tid]===undefined){a[b.tid]=[{id:b.eid,n:b.v}];}else{if(b.tid===-1){a[b.tid].push({id:b.eid,n:b.v});}else{a[b.tid][0].n+=(":"+b.v);}}}return a;}mstrmojo.gm.GMContainer=mstrmojo.declare(mstrmojo.WidgetMatrix,[mstrmojo.util.ui._HostsSplitter,mstrmojo.util.ui._LassoSelector],{scriptClass:"mstrmojo.gm.GMContainer",enableLassoSelect:false,useAsSelectorOrBrushes:false,shouldDrawShapeFlag:true,rowSplitterEnabled:true,colSplitterEnabled:true,useDropDownBtn:false,useOwnSplitter:true,minChartHeight:20,minChartWidth:20,init:function Q(X){this.hSplitters=[];this.vSplitters=[];if(this._super){this._super(X);}this.API.lassoSelected=undefined;this.API.lassoSelecting=undefined;},postBuildRendering:function(){if(this._super){this._super();}var Y=this.domNode,X=this.domCanvas,Z=this.styles,b=this.splitterConfig;if(Z){I.applyStyles2DomNode(Y,Z);}if(b){var a=M(b.dockPosition,b.splitterType,b.splitterId);Y.appendChild(a);this.registerSplitter(a);L(a,b.dockPosition,this.width,this.height);this.splitter=a;}if(this.enableLassoSelect){this.registerLassoSelector(X,[C.SPLITTER],this.useDropDownBtn);}},getSplitterInfo:function F(X){if(!X){return{};}var d=X.getAttribute("isInChart")==="yes",g={};if(d===true){var e=parseInt(X.getAttribute("id"),10),a=X.getAttribute("isRowIndex")==="yes",b=a?this.API.getRowSpan:this.API.getColSpan,j=b(e,this.depth)[0];g.min=a?(this.getRowPosition(j)+this.minChartHeight):(this.getColPosition(j)+this.minChartWidth);g.index=e;g.isRowIndex=a;g.isInChart=true;}else{var f=this.splitterConfig.dockPosition,h=f===W.LEFT,c=f===W.RIGHT,k=f===W.TOP,Y=f===W.BOTTOM,Z=this.splitterConfig;if(h){g.max=K.max(this.width-this.minChartWidth,0);}else{if(c){g.min=this.minChartWidth;}else{if(k){g.max=K.max(this.height-this.minChartHeight,0);}else{if(Y){g.min=this.minChartHeight;}}}}if(Z){g.dock=Z.dockPosition;g.type=Z.splitterType;g.id=Z.splitterId;}}return g;},splitterMoved:function(X,b){if(X===0){return ;}if(b.isInChart){var Y=b.index,a=b.isRowIndex,Z=this.manager;if(a){Z.resizeRow(this,Y,X);Z.doUpdateInChartSplitters(true,false);}else{Z.resizeCol(this,Y,X);Z.doUpdateInChartSplitters(false,true);}}else{this.manager.raiseEvent({name:"splitterMoved",position:X,info:b});L(this.splitter,this.splitterConfig.dockPosition,this.width,this.height);}},enableSplitter:function(X){var Y=this.splitter;if(Y){Y.style.display=X?"block":"none";}},clearCharts:function(){this.hSplitters=[];this.vSplitters=[];if(this._super){this._super();}},resize:function(Y,X){if(this._super){this._super(Y,X);}if(this.splitterConfig){L(this.splitter,this.splitterConfig.dockPosition,this.width,this.height);}},resizeAbs:function(X,Y){if(this._super){this._super(X,Y);}if(this.splitterConfig){L(this.splitter,this.splitterConfig.dockPosition,X,Y);}},updateCharts:function(){if(this._super){this._super();}this.doUpdateInChartSplitters(true,true);},doUpdateChartsGlobally:function(){if(this._super){this._super();}},enableRowSplitter:function(X){if(X!==this.rowSplitterEnabled){this.rowSplitterEnabled=X;this.doUpdateInChartSplitters(true,false);}},enableColSplitter:function(X){if(X!==this.colSplitterEnabled){this.colSplitterEnabled=X;this.doUpdateInChartSplitters(false,true);}},createRowSplitter:function D(X){var Y=document.createElement("div");Y.setAttribute("class","gm-resizer-h");Y.setAttribute("type",C.SPLITTER);Y.setAttribute("isInChart","yes");Y.setAttribute("isRowIndex","yes");Y.setAttribute("draggable","false");Y.setAttribute("id",String(X));return Y;},createColSplitter:function B(Y){var X=document.createElement("div");X.setAttribute("class","gm-resizer-v");X.setAttribute("type",C.SPLITTER);X.setAttribute("isInChart","yes");X.setAttribute("isRowIndex","no");X.setAttribute("draggable","false");X.setAttribute("id",String(Y));return X;},positionRowSplitter:function J(c,Y,X,b){var Z=X-Y,a=b-G-U;c.style.cssText="width:"+Z+"px; height:"+U+"px; left:"+Y+"px; top:"+a+"px; display:block";},positionColSplitter:function H(c,a,Z,Y){var X=Z-a,b=Y-G-U;c.style.cssText="width:"+U+"px; height:"+X+"px; left:"+b+"px; top:"+a+"px; display:block";},doUpdateInChartSplitters:function(r,q){if(!this.useOwnSplitter){return ;}this.calculateBBox();var p,c,b,g,o,X=this.domCanvas,f=this.nRows,h=this.nCols,s=this.hSplitters,l=this.vSplitters,n=this.wAccArr,Z=this.hAccArr,d=this.doRowIntersectionCheck(),j=this.doColIntersectionCheck(),a=d.start,k=d.end,e=j.start,Y=j.end;if(r){o=this.rowSplitterEnabled;for(p=0;p<f;p++){g=l[p];if(p>=a&&p<=k&&p!==f-1&&this.getActiveFlag(p+1,e)===true){b=Z[p];if(g===undefined){g=this.createRowSplitter(p);X.appendChild(g);this.registerSplitter(g);l[p]=g;}this.positionRowSplitter(g,K.max(this._x1,0),K.min(this._x2,this.canvasW),b);g.style.display=o?"block":"none";}else{if(g){g.style.display="none";}}}}if(q){o=this.colSplitterEnabled;for(p=0;p<h;p++){g=s[p];if(p>=e&&p<=Y&&p!==h-1&&this.getActiveFlag(a,p+1)===true){c=n[p];if(g===undefined){g=this.createColSplitter(p);X.appendChild(g);this.registerSplitter(g);s[p]=g;}this.positionColSplitter(g,K.max(this._y1,0),K.min(this._y2,this.canvasH),c);g.style.display=o?"block":"none";}else{if(g){g.style.display="none";}}}}},filterShapes:function(e,X,p,q){var h=this.APIOwner.model,b=this.APIOwner.normalizedIdCache,t=!!h.docModel.als,o=this.getChart(X,p);if(!o){this.doUpdateCharts(X,X,p,p,false);o=this.getChart(X,p);}var f,d,a,k,Y,l,Z=E(o)||[],s=Z.length;for(f=0;f<s;f++){k=Z[f];if(!k){continue;}Y=k.childNodes;a=Y.length;for(d=0;d<a;d++){l=Y[d];if(l.getAttribute("type")==="shape"){if(R(l.identity,q,h,t,b)){e.push(l);}}}}},efficientFilterShapes:function(a,h,x,t){var b=this.APIOwner.model,w=this.APIOwner.normalizedIdCache,Y=!!b.docModel.als,f=this.getChart(h,x),AA,z,l,d,y,q;if(!f){this.doUpdateCharts(h,h,x,x,false);f=this.getChart(h,x);}var p,o,k,s,e,X,u=E(f)||[],Z=u.length;for(p=0;p<Z;p++){s=u[p];if(!s){continue;}e=s.childNodes;k=e.length;for(o=0;o<k;o++){X=e[o];if(X.getAttribute("type")==="shape"){AA=X.identity;if(AA.isPie){z=AA.sPieDP.graphCell;l=z.gID;d=z.sID;y=AA.sliceIdx;q=a[l]&&a[l][d]&&a[l][d][y];if(q===undefined){if(a[l]===undefined){a[l]={};}if(a[l][d]===undefined){a[l][d]={};}a[l][d][y]=R(AA,t,b,Y,w);}}else{z=AA.gc;l=z.gID;d=z.sID;q=a[l]&&a[l][d];if(q===undefined){if(a[l]===undefined){a[l]={};}a[l][d]=R(AA,t,b,Y,w);}}}}}},selectHighLightShapes:function(Z,e,s,f){var d=this.getChart(e,s),w,u,k,a,t;if(!d){this.doUpdateCharts(e,e,s,s,false);d=this.getChart(e,s);}var o,l,h,p,b,X,q=E(d)||[],Y=q.length;for(o=0;o<Y;o++){p=q[o];if(!p){continue;}b=p.childNodes;h=b.length;for(l=0;l<h;l++){X=b[l];if(X.getAttribute("type")==="shape"){w=X.identity;if(w.isPie){u=w.sPieDP.graphCell;t=w.sliceIdx;}else{u=w.gc;}k=u.gID;a=u.sID;if(Z[k]===undefined){continue;}if(w.isPie){if(Z[k][a]===undefined){continue;}if(Z[k][a][t]){f.push(X);}}else{if(Z[k][a]){f.push(X);}}}}}},getSelectionHash:function(Z){var X=P.keyarray(Z).sort(),Y=[],b,a=this.APIOwner;T.forEach(X,function(c){b=[];T.forEach(Z[c],function(d){b.push(a.model.getNormalizedFormElementId(d.id));},a);Y.push(c+"-"+b.sort().join("@"));},a);return Y.join("#");},constructShapeMap:function(h,X,o){var l=this.getChart(X,o);if(!l){this.doUpdateCharts(X,X,o,o,false);l=this.getChart(X,o);}var e,d,a,f,Y,k,q,b,Z=E(l)||[],p=Z.length;for(e=0;e<p;e++){f=Z[e];if(!f){continue;}Y=f.childNodes;a=Y.length;for(d=0;d<a;d++){k=Y[d];if(k.getAttribute("type")==="shape"){q=O.call(this,k);q=this.getSelectionHash(q);b=h[q];if(b===undefined){h[q]=[];h[q].push(k);}else{b.push(k);}}}}},intersectionCheckOnChart:function(AF,AV,AU,p,o,Ac,Ab){var Aa=this.getChart(AV,AU),b=N(Aa);if(!Aa||!b){return ;}var AS,AP,AQ,s,AE,AD,AN,AX,z=Aa.offsetLeft,u=Aa.offsetTop,AA=Aa.offsetWidth,AG=Aa.offsetHeight,f=E(Aa),l=f.length,q,AR;p=Math.max(p-z,0);o=Math.min(o-z,AA);Ac=Math.max(Ac-u,0);Ab=Math.min(Ab-u,AG);var c=S.ChartConstants.kPI,a=function(k,j,r,n,h,g){return h>=k&&h<=j&&g>=r&&g<=n;},e=function(h,g,k,j){return(k-h)*(k-h)+(j-g)*(j-g);},AH=function(g,j,h){return g>=j&&g<=h;},Y=function(g,j,h){while(g<h){g+=c*2;}while(g>h){g-=c*2;}return !j||!h||g>=j;},Z=function(h,g){var k=h.x2-h.x1,j=h.y2-h.y1,r=g.x2-g.x1,n=g.y2-g.y1,w=function(x,Ae,Ad,y){return x*y-Ae*Ad;};return w(k,j,g.x1-h.x1,g.y1-h.y1)*w(k,j,g.x2-h.x1,g.y2-h.y1)<=0&&w(r,n,h.x1-g.x1,h.y1-g.y1)*w(r,n,h.x2-g.x1,h.y2-g.y1)<=0;},AB=function(j,n,h,k,g){return Z({x1:j,y1:n,x2:j,y2:k},g)||Z({x1:j,y1:n,x2:h,y2:n},g)||Z({x1:h,y1:n,x2:h,y2:k},g)||Z({x1:j,y1:k,x2:h,y2:k},g);},d=function(j,Ad,h,y,w,k,g,x,Ae){var n=function(Ai,Ah){var r,Ag,Af;if(Math.abs(Ai)>g){return false;}if(Ah){r=Math.acos(Ai/g);Af=k+g*Math.sin(r);return AH(Af,Ad,y)&&Y(r,x,Ae)||AH(2*k-Af,Ad,y)&&Y(-r,x,Ae);}else{r=Math.asin(Ai/g);Ag=w+g*Math.cos(r);return AH(Ag,j,h)&&Y(r,x,Ae)||AH(2*w-Ag,j,h)&&Y(c-r,x,Ae);}};return n(j-w,true)||n(Ad-k,false)||n(h-w,true)||n(y-k,false);};for(AQ=0;AQ<l;AQ++){AX=f[AQ];if(!AX){continue;}AP=AX.childNodes.length;for(AS=0;AS<AP;AS++){s=AX.childNodes[AS];if(s.getAttribute("type")==="shape"){q=s.tagName;AR=false;if(q==="rect"){var AK=parseInt(s.getAttribute("x"),10),AJ=parseInt(s.getAttribute("y"),10),AL=parseInt(s.getAttribute("width"),10),AW=parseInt(s.getAttribute("height"),10);AR=Math.max(AK,0)<=o&&Math.min(AK+AL,AA)>=p&&Math.max(AJ,0)<=Ab&&Math.min(AJ+AW,AG)>=Ac;}else{if(q==="circle"){AE=parseInt(s.getAttribute("cx"),10);AD=parseInt(s.getAttribute("cy"),10);AN=parseInt(s.getAttribute("r"),10);AR=e(AE,AD,p,Ac)<AN*AN||e(AE,AD,p,Ab)<AN*AN||e(AE,AD,o,Ac)<AN*AN||e(AE,AD,o,Ab)<AN*AN||a(p-AN,o+AN,Ac,Ab,AE,AD)||a(p,o,Ac-AN,Ab+AN,AE,AD);}else{if(q==="path"){AE=s.sX;AD=s.sY;AN=s.sR||s.sOutR;if(!!AN){var AO=s.sInR||0,X=s.sRadStart,t=s.sRadEnd,AC=!!s.sRadStart,AM=AC&&(AB(p,Ac,o,Ab,{x1:AE+Math.cos(X)*AO,y1:AD+Math.sin(X)*AO,x2:AE+Math.cos(X)*AN,y2:AD+Math.sin(X)*AN})||AB(p,Ac,o,Ab,{x1:AE+Math.cos(t)*AO,y1:AD+Math.sin(t)*AO,x2:AE+Math.cos(t)*AN,y2:AD+Math.sin(t)*AN}));AR=AM||d(p,Ac,o,Ab,AE,AD,AO,X,t)||d(p,Ac,o,Ab,AE,AD,AN,X,t)||a(p,o,Ac,Ab,AE+Math.cos(X)*AO,AD+Math.sin(X)*AO)||AH(e(p,Ac,AE,AD),AO*AO,AN*AN)&&Y(Math.atan((Ac-AD)/(p-AE))+(p>AE?0:c),X,t);}}else{if(q==="polyline"||q==="polygon"){var AI=s.pointList||[],AT=AI.length,AZ,AY;if(AT>0){AR=a(p,o,Ac,Ab,AI[0].x,AI[0].y);for(AV=1;AV<AT&&!AR;AV++){AZ=AI[AV-1];AY=AI[AV];AR=AB(p,Ac,o,Ab,{x1:AZ.x,y1:AZ.y,x2:AY.x,y2:AY.y});}if(q==="polygon"&&!AR){AR=(new S.Point2D({x:p,y:Ac})).IsInPolygon(AI)||AB(p,Ac,o,Ab,{x1:AY.x,y1:AY.y,x2:AI[0].x,y2:AI[0].y});}}}}}}if(AR){AF.push(s);}}}}},lassoSelecting:function(){var X=this.API.lassoSelecting;if(X){X.call(this.APIOwner);}},lassoSelected:function(Z){if(!Z||Z.left===undefined||Z.top===undefined||Z.width===undefined||Z.height===undefined){return ;}var f,d,g,n,b,h,e,o,c=[],p=[],a=this.API.lassoSelected,Y=Z.left,l=Z.top,X=Y+Z.width,k=l+Z.height;g=this.doRowIntersectionCheck(l,k);n=this.doColIntersectionCheck(Y,X);b=g.start;h=g.end;e=n.start;o=n.end;for(f=b;f<=h;f++){for(d=e;d<=o;d++){c.push({row:f,col:d});this.intersectionCheckOnChart(p,f,d,Y,X,l,k);}}Z.selectedCharts=c;Z.selectedShapes=p;if(a){a.call(this.APIOwner,Z);}},lassoSelectorResized:function(X){this.lassoSelected(X);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.VisUtility");var R=mstrmojo.css,A=mstrmojo.VisUtility,H=mstrmojo.array,D=mstrmojo.string,I="vis-tooltip",N=20,P=165,L=350,E=350,G="px";function Q(){var U=this.domNode;U.innerHTML="";var S=document.createElement("div");S.className=I+"-container";var V=document.createElement("table");V.className=I+"-table";for(var T=0;T<3;T++){V.appendChild(document.createElement("COL"));}S.appendChild(V);this.domNode.appendChild(S);return V;}function K(T){var S=[],U=false;H.forEach(T,function(V){if(!V.isSuper){S.push(V.v);}else{U=true;S.push("<sup>"+V.v+"</sup>");}});return{hasSuper:U,htmlText:S.join("")};}mstrmojo.VisTooltip=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.VisTooltip",init:function O(S){this._super(S);R.addWidgetCssClass(this,(S&&S.widgetClass)?[S.widgetClass,I]:I);},toggle:function M(S){var T=mstrApp.isAppStatePrintPreview&&mstrApp.isAppStatePrintPreview();if(this.domNode){this.domNode.style.display=S&&!T?"block":"none";}},displayInfo:function C(V,c,S){var U=this.domNode,d=Q.call(this),a=false,T=0,b=0,W=10,Z=false,Y=d.childNodes[0],X=d.childNodes[2];V.forEach(function(o){var u,n,x,r,e,l,s,q,y,p,w,t;if(!Z){var g=d.insertRow(-1),k=g.insertCell(-1),j=g.insertCell(-1),h=g.insertCell(-1);g.className=I+"-tr";k.className=I+"-name";j.className=I+"-space";h.className=I+"-value";if(o===null){R.addClass(g,"separator");a=true;}else{if(a){R.addClass(g,"below-separator");}if(!S){j.innerHTML=":";}u=o.n;t=!o.skipEncode;k.innerHTML=t?D.encodeHtmlString(u,true):u;x=A.getComputedFontStyle(k);r=Math.ceil(A.measureTextWidth(k.innerHTML,x,x.bonus));s=U.offsetHeight>=E?1:2;if(r>P){q=A.truncateTextToLineWithWordWrap(u,x,P,s,true);if(q.canWordWrap){k.innerHTML=t?D.encodeHtmlString(q.text,true):q.text;}else{q=A.truncateTextToLineWithWordWrap(u,x,P,1);k.innerHTML=t?D.encodeHtmlString(q,true):q;}}T=Math.min(Math.max(T,r),P);n=o.v;p=o.isTrendLineFuncToken;if(p){y=K(n);}if(!p||!y.hasSuper){if(p){n=y.htmlText;}h.innerHTML=t?D.encodeHtmlString(n,true):n;e=A.getComputedFontStyle(h);l=Math.ceil(A.measureTextWidth(h.innerHTML,e,e.bonus,null,true));if(l>P){q=A.truncateTextToLineWithWordWrap(n,e,P,o.noTruncate?100:s,true);if(!q.canWordWrap){q=A.truncateTextToLineWithWordWrap(n,e,P,1,true);}h.innerHTML=t?D.encodeHtmlString(q.text,true):q.text;l=q.maxLineLen;}b=Math.min(Math.max(b,l),P);}else{h.innerHTML=y.htmlText;e=A.getComputedFontStyle(h);l=0;H.forEach(n,function(z){z.textWidth=A.measureSuperTextWidth(z.isSuper,z.v,e,e.bonus);l+=z.textWidth;});l=Math.ceil(l);if(l>P){q=A.truncateTextToLineWithWordWrapForTokens(n,e,P,o.noTruncate?100:s,true,true);if(!q.canWordWrap){q=A.truncateTextToLineWithWordWrapForTokens(n,e,P,1,true);}h.innerHTML=K(q.text).htmlText;l=q.maxLineLen;}b=Math.min(Math.max(b,l),P);}Y.style.width=T+"px";X.style.width=b+"px";w=T+b+W;d.style.width=mstrmojo.dom.isIE9?(w+2)+"px":w+"px";a=false;}if(U.offsetHeight>=E){var f=d.lastChild;f&&f.removeChild(f.lastChild);Z=true;}}});if(c){this.moveTo(c.x,c.y);}},moveTo:function(a,Z){var Y=mstrmojo.dom.position(document.body),W=this.domNode,b=W.offsetWidth,X=W.offsetHeight,V=Y.x+Y.w,c=Y.y+Y.h,T=a+N,S=Z+N;if(T>V-b||S>c-X){if(T<=V-b){S=c-X;}else{if(S<=c-X){T=V-b;}else{T=V-b;S=Z-N-X;}}}var U=W.style;U.left=T+G;U.top=S+G;},doLayout:function B(S){var U=this.domNode.getElementsByTagName("table")[0];if(!U){return ;}var V=R.getComputedStyle(this.domNode),T=S-parseInt(V.paddingLeft,10)-parseInt(V.paddingRight,10);T-=U.rows[0].cells[0].offsetWidth;T-=10;U.getElementsByClassName(I+"-value").forEach(function(W){W.style.maxWidth=T+G;});},posTo:function J(T){var S=this.domNode.style;S.left=T.x+G;S.top=T.y+G;},renderErrMsg:function F(S){Q.call(this).insertRow(-1).insertCell(-1).innerText=S;}});}());(function(){mstrmojo.requiresCls("mstrmojo.gm.GMEnums","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.VisEnum.GMLegendFormatingPropertyTag","mstrmojo.VisUtility");var N=mstrmojo.gm.EnumTRFManipulations;var J=mstrmojo.array,C=mstrmojo.hash,M=mstrmojo.func.wrapMethods,G=mstrmojo.func.composite,I=mstrmojo.VisEnum.GMLegendFormatingPropertyTag;var D={silent:false,undo:mstrmojo.emptyFn,redo:mstrmojo.emptyFn};function K(O){return O.model.controller.cmdMgr;}function L(){return(this.getDocModel&&this.getDocModel())||this.model.docModel;}function H(){return{success:function O(){this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}function E(P,R){var O,U,Q,S,T={};T.tks=this.k;T.selectorObjects=P;T.keepOnly=!!R;T.isDocVis=true;O=L.call(this);U=O.getDataService();Q=U.getGMViewFilterAction(T);S=O.getSliceCallback(T);return{action:Q,callbacks:S};}function B(Q,P){var O,S,R;O=L.call(this);R=O.getDataService();if(!this.isXMLDirty()){R.submitUpdates(Q,P);}else{S=this.getPersistAction();R.submitUpdates([Q,S],P);this.resetXMLDirtyFlag();}}function A(){var b=this.modelData||this.model.data,S=b.k,Z,Y="FormattingWidget",U,T,X,P,Q,R=[],W=[],V=this.edtModel;if(!b){console.log("warning: modelData is missing");return null;}var a=function(d,f){var c=T.createElement(f),e;if(d instanceof Object){for(e in d){if(d.hasOwnProperty(e)){var g=a(d[e],e);if(g){c.appendChild(g);}}}}else{c.setAttribute("value",d);}return c;};var O=function(c){return c.replace(/</g,"&lt;").replace(/"/g,"&quot;");};W=!!V&&!!V.getActionsWithUpdateProperty?V.getActionsWithUpdateProperty():[];X=this.createWidgetPropsXML?this.createWidgetPropsXML():null;if(!X||X.length===0){U=this.getProperties();if(this.useCompatibleXML){T=(new DOMParser()).parseFromString("<widgetProps></widgetProps>","text/xml");T.firstChild.appendChild(a(U,"fmt"));}else{T=(new DOMParser()).parseFromString("<props><widgetProps></widgetProps></props>","text/xml");T.firstChild.firstChild.appendChild(a(U,"fmt"));}X=(new XMLSerializer()).serializeToString(T);}P=O(X);Q={act:"setProperty",nodeKey:S,prs:Y,pri:4,v:P};R.push(Q);if(!!W){R=R.concat(W);}return R;}function F(P,Q,O,T){if(!(T instanceof Function)){return D;}var S=this.id;function R(U){return function(){var W=mstrmojo.all[S],V=W.getProperties();V[P]=U;T.call(W,U,true);W.getDocModel().selectVIUnit(W.parent.id,true);};}return{silent:true,undo:R(O),redo:R(Q)};}mstrmojo._VizSelectionHelper=mstrmojo.provide("mstrmojo._VizSelectionHelper",{postBuilderingCalled:false,listenToUpdateColorMap:function(R){if(mstrmojo.VisUtility.isOnExpressMode()){return ;}var Q=this,P,O=(Q.getDocModel&&Q.getDocModel())||Q.model.docModel;if(O){return O.attachEventListener("colorMapChanged",Q.id,function(T){P=Q.parent&&Q.parent.parent;if(Q.forceUpdateColorMap||(P&&P.isPanelDisplaying())){R.call(Q);}else{var S=P.attachEventListener("panelDisplaying",Q.id,function(U){if(Q.postBuilderingCalled){R.call(Q);}P.detachEventListener(S);});}});}},detachUpdateColorMapListener:function(P){if(!P){return ;}var O=(this.getDocModel&&this.getDocModel())||this.model.docModel;O.detachEventListener(P);},updateTargets:function(P){var S={},Q=this,O=L.call(this);S.fromGM=true;S.type=1;S.src=this.k;S.selectorObjects=P;function R(V){var T=Q.modelData||Q.model.data,U=T.sc;if(U!==undefined){return U[V];}return undefined;}S.keepOnly=true;S.ck=R.call(this,"ck");S.keyContext=S.ck;S.tks=R.call(this,"tks");S.ckey=R.call(this,"ckey");S.isDocVis=true;S.include=true;S.showall=R.call(this,"showall");O.slice(S);},updateAfterViewFilter:function(Q,O){var V,U,P,T,S,W,R;V=L.call(this);U=V.getDataService();T=E.call(this,Q,O);P=T.action;S=T.callbacks;R=this.model.controller||V.controller;if(this.currKeepOnlyAction){W=[C.clone(this.currKeepOnlyAction)];}else{W=E.call(this,[],false).action;}this.currKeepOnlyAction=P;R.submitUndoRedoUpdates([P],W,S);},updateAfterKeepOnly:function(Q){var P=L.call(this),O=this.model.controller||P.controller,R=M(O._getXtabCallback(this),H.call(this));O.applyKeepOnly(this,R,{keepOnly:Q,data:this.getSelections()},Q?-2:undefined);},updateAfterDrill:function(O,Y){var V=this,Z=L.call(this),X=Z.getDataService(),R=X.newUpdate(),Q=this.getSelections(),U=this.model.getSelectorDataFromViewFilter(V.model.data.vfexpr).concat({keepOnly:true,data:Q}),P=Z.getKeepOnlyOrExcludeAction(V.k,U),S=V.model.controller||Z.controller,T=S._getXtabCallback(V);R.add(O,M(Y,T));R.add(P,H.call(V));K(V).execute({execute:function W(){this.submitUpdate(R);},urInfo:{callback:R.callback}});},updateAfterSort:function(R){var P=this,O=L.call(this),S=O.getDataService(),T=O.getSliceCallback({tks:P.k});K(P).execute({execute:function Q(){var V=S.newUpdate(this,undefined),U={act:"sortGM",nodeKey:P.k,subActions:R};V.add(U,T,undefined);if(P.isXMLDirty()){V.addActions(P.getPersistAction());}this.submitUpdate(V,undefined);},urInfo:{callback:T}});},updateAfterAction:function(T,O,P,a,X){if(!T){return ;}var V=this,Q=V.parent&&V.parent.id,b=V.model.docModel,U=V.model.controller||b.controller,Z,Y,S={},W,R=X||D;if(P){Z=mstrmojo.emptyFn;W=function(){this.submitSilent(T);};}else{Z=b.getSliceCallback({tks:this.k});Z.success=G([Z.success,function(){b.selectVIUnit(Q,true);}]);W=function(){this.submit(T,Z,S);};}Y=U._getXtabCallback(V);if(O){Z=M(Z,O);Y=M(Y,O);}Y.success=G([Y.success,function(){b.selectVIUnit(Q,true);}]);if(P){C.copy(mstrmojo.DocDataService.SUPPRESS_DATA,S);}if(a){C.copy(mstrmojo.DocDataService.REQUEST_DEFN_DATA,S);}K(this).execute({execute:W,urInfo:{silent:R.silent,callback:Y,redo:R.redo,undo:R.undo}});},getProperties:mstrmojo.emptyFn,getSetPropertiesAction:A,updateAfterPropertiesChange:function(P,Q,O,R){this.updateAfterAction(A.call(this),P,Q,O,R);},setProperty:function(V,R,T){var P=T.callback,Q=!!T.suppressData,X=T.requestDefinition,S=T.clientUndoRedoCallback,W=this.getProperties(),O=W[V],U;if(V===I.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorMap(this.colorSqureIdentity.comb,R);}}else{if(W&&(W[V]===undefined||W[V].toString()!==R.toString())){W[V]=R;U=F.call(this,V,R,O,S);this.updateAfterPropertiesChange(P,Q,X,U);}}},showData:function(O){if(!this.gridData){this.gridData=this.model.data;}mstrmojo.vi.ui.ViewDataDialog.open(this.parent,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.Widget","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo._HasOwnAvatar");var B=mstrmojo,G=B.dom,D=B.css,F=B.VisUtility,E=B.gm.EnumDockPosition,H=B.VisEnum.ControlType,C=3;mstrmojo.VisSplitter=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.VisSplitter",cssClass:"gm-matrix-line",bodyCssClass:"gm-matrix-line-body",ctnType:H.LINE_CONTAINER,dir:"h",draggable:true,markControlType:false,markupString:'<div id="{@id}" class="{@cssClass}" type={@ctnType} style="width:{@bodyWidth}px; height:{@bodyWidth}px;"><div class="{@bodyCssClass}" type={@type} style="width:{@width}px; height:{@height}px;"></div></div>',markupSlots:{domBody:function(){return this.domNode.firstChild;}},init:function(I){this._super(I);},preBuildRendering:function(){var K=this.dir,M=this.styles,I=this.draggable,J=this.cssClass,L=this.bodyCssClass;J+=" "+K;J+=(I?" draggable":"");this.cssClass=J;L+=" "+K;L+=(I?" draggable":"");this.bodyCssClass=L;this.bodyWidth=parseInt(M.borderWidth,10)||1;},postBuildRendering:function(){this.domNode.identity=this.identity;this.domBody.identity=this.identity;F.applyStyles2DomNode(this.domBody,this.styles);if(this.markControlType){this.domNode.setAttribute("ctrlType",this.context.type);this.domBody.setAttribute("ctrlType",this.context.type);}},hide:function(){this.domNode.style.display="none";},updateSize:function(I){this.sizeInfo=I;},updateStyle:function(K){var J=this.domNode.style,I=parseInt(K.borderWidth,10)||1;this.styles=K;J.width=I+"px";J.height=I+"px";F.applyStyles2DomNode(this.domBody,K);},updatePosition:function(P){var O=P.left,N=P.top,M=P.width,I=P.height,K=this.dir,L=this.domNode.style,J=this.domBody.style;if(O!==undefined){if(K==="v"){O-=C;}L.left=O+"px";}if(N!==undefined){if(K==="h"){N-=C;}L.top=N+"px";}if(M!==undefined){L.width=M+"px";J.width=M+"px";}if(I!==undefined){L.height=I+"px";J.height=I+"px";}L.display="block";},createAvatar:function(){var J=this.domBody,M=G.position(J),I=J.cloneNode(true),K=I.style,L=D.getStyleValue(J,"borderColor");K.top=M.y+"px";K.left=M.x+"px";K.borderColor=L;return I;},isDragValid:function A(){return true;},ondragstart:function(P){var J,O,N=P.src.pos,L=this.context.dock,K=this.sizeInfo,M=Math.max(K.size-K.min,0),Q=Math.max(K.max-K.size,0),I=(this.dir==="v"?"x":"y");if(L===E.RIGHT||L===E.BOTTOM){J=N[I]-M;O=N[I]+Q;}else{J=N[I]-Q;O=N[I]+M;}this.lower=J;this.upper=O;this.startPos=P.src.pos;this._super(P);},ondragend:function(Q){this._super(Q);var O,J=this.dir,L=this.startPos,I=Q.tgt.pos,K=this.lower,P=this.upper,N=I.x,M=I.y;if(J==="v"){N=Math.max(N,K);N=Math.min(N,P);O=N-L.x;}else{M=Math.max(M,K);M=Math.min(M,P);O=M-L.y;}if(O!==0){this.raiseEvent({name:"splitterMoved",position:O,info:this.context});}},positionAvatar:function(P){var L=this.avatar,N=L.style,K=this.dir,J=this.lower,M=this.upper,I=P.x,O=P.y;if(K==="v"){I=Math.max(I,J);I=Math.min(I,M);N.left=I+"px";}else{O=Math.max(O,J);O=Math.min(O,M);N.top=O+"px";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.gm._IsAnchorable","mstrmojo.ui._HasUITheme","mstrmojo.VisUtility");var D=mstrmojo.dom,E=mstrmojo.VisUtility;mstrmojo.gm.DndTooltip=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.gm._IsAnchorable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.gm.DndTooltip",left:0,top:0,zIndex:10,boundaryNodeName:"boundary",popupNodeName:"infoNode",baseTipClass:"arrow",infoNodeOffset:0,popupNodeOffset:5,anchor:null,boundary:null,utils:mstrmojo.VisChartUtils,themeClassName:"mojo-theme-light",markupString:'<div id="{@id}" class="mstrmojo-Tooltip {@cssClass}" style="top:{@top}px;left:{@left}px;z-index:{@zIndex};position:absolute;{@cssText};"><div class="mstrmojo-Tooltip-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Tooltip-content {@contentNodeCssClass}" style="{@contentNodeCssText}"><div class="content"></div><div class="arrow"><div class="after"></div><div class="before"></div></div></div></div>',markupSlots:{infoNode:function(){return this.domNode.childNodes[1];},contentNode:function(){return this.domNode.childNodes[1].firstChild;},tipNode:function(){return this.domNode.childNodes[1].lastChild;}},toggle:function A(G){if(G){this.domNode.style.display="block";}else{this.domNode.style.display="none";}},updateContent:function(G,I,H){this.set("themeClassName",mstrApp.getThemeClassName());this.fillContent(G,I,H);this.positionDialog();},fillContent:function C(I,M,K){this.anchor=I;this.anchorPosition=M;this.contentNode.innerHTML=K||this.anchor.innerText||this.anchor.textContent;this.toggle(true);var G=E.getComputedFontStyle(this.contentNode),L=this.contentNode.innerHTML,H=E.measureTextWidth(L,G),J=130;if(H<=J){this.contentNode.style.width=H+"px";}else{this.contentNode.innerHTML=E.truncateTextToLineWithWordWrap(L,G,J,3);this.contentNode.style.width=J+"px";}},getTipDimension:function B(){var H=this[this.tipNodeName],G=D.position(H.firstChild);return G;},applyPopupNodePos:function F(I,H,K,G){var M=this[this.tipNodeName],J=M.style,N=this[this.popupNodeName],L=N.style;L.top=I+"px";L.left=H+"px";J.top=(K-I)+"px";J.left=(G-H)+"px";}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumFontStyle");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","DSSDateTime","ScalePlate");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumDSSGraphObject");var g=mstrmojo.chart,c=g.model,q=mstrmojo.VisUtility,Q=g.enums,E=Q.EnumFontStyle,S=c.enums,AA=S.EnumDSSGraphProperty,X=S.EnumDSSGraphDataTextShowType,AB=S.EnumDSSGraphObject;var F=mstrmojo.gm.EnumDataLabels;var V=[["xAxLbFntClr","yAxLbFntClr","dlFntClr","lgdFntClr"],["xAxLbFntFml","yAxLbFntFml","dlFntFml","lgdFntFml"],["xAxLbFntSz","yAxLbFntSz","dlFntSz","lgdFntSz"],["xAxLbFntStyle","yAxLbFntStyle","dlFntStyle","lgdFntFml"]];var r=[["majorGridLnThk","minerGridLnThk","majorGridLnThk","minerGridLnThk"],["majorGridLnClr","minerGridLnClr","majorGridLnClr","minerGridLnClr"],["majorGridLnStyle","minerGridLnStyle","majorGridLnStyle","minerGridLnStyle"]];var Y=[["bgFillClr"],["bgFillStyle"],["bgFillTrans"]];function U(AK){switch(AK){case AA.DssGraphFontColor:return 0;case AA.DssGraphFontName:return 1;case AA.DssGraphFontSize:return 2;case AA.DssGraphFontStyle:return 3;case AA.DssGraphFontSize100:return 4;default:return -1;}}function w(AK){switch(AK){case AA.DssGraphAreaColor:return 0;case AA.DssGraphFillEffect:return 1;case AA.DssGraphAreaAlpha:return 2;}return -1;}function y(AK){var AL;switch(AK){case AB.DssGraphX1Body:case AB.DssGraphX1Label:case AB.DssGraphX1Major:case AB.DssGraphX1Minor:case AB.DssGraphUserLabel3:case AB.DssGraphUserLine3:AL="X1";break;case AB.DssGraphX2Body:case AB.DssGraphX2Label:case AB.DssGraphX2Major:case AB.DssGraphX2Minor:case AB.DssGraphUserLabel4:case AB.DssGraphUserLine4:AL="X2";break;case AB.DssGraphY1Body:case AB.DssGraphY1Label:case AB.DssGraphY1Major:case AB.DssGraphY1Minor:case AB.DssGraphUserLabel1:case AB.DssGraphUserLine1:AL="Y1";break;case AB.DssGraphY2Body:case AB.DssGraphY2Label:case AB.DssGraphY2Major:case AB.DssGraphY2Minor:case AB.DssGraphUserLabel2:case AB.DssGraphUserLine2:AL="Y2";break;case AB.DssGraphZBody:AL="Z";break;case AB.DssGraphO1Body:case AB.DssGraph2DO1Label:case AB.DssGraphO1Major:case AB.DssGraphO1Minor:AL="O1";break;case AB.DssGraphO2Body:case AB.DssGraph2DO2Label:case AB.DssGraphO2Major:case AB.DssGraphO2Minor:AL="O2";break;default:AL="No_Axis";break;}return AL;}function d(AK,AL){if(!!AK===false){return undefined;}return undefined;}function W(AP,AK){if(!!AP===false){return undefined;}var AU,AS,AR=AK.isVertical!==undefined?AK.isVertical:true,AM=AK.isGridChart||false,AV=AK.isPieShape||false,AQ={Name:0,Value:0},AN=AP.gaid,AO=AP.goid,AL=AP.gsid,AT=AP.v;if(!!AN===false){return undefined;}switch(AN){case AA.DssGraphShowLBLFeeler:if(AV){AQ.Name="DataLabel";if((AT&X.DssGraphDataTextValue)!==0){AQ.Value=F.SHOW_VALUE_ONLY;}else{if((AT&X.DssGraphDataTextLabel)!==0){AQ.Value=F.SHOW_TEXT_ONLY;}else{AQ.Value=F.HIDE;}}}break;case AA.DssGraphAreaColor:case AA.DssGraphFillEffect:case AA.DssGraphAreaAlpha:AS=w.call(this,AN);if(AS<0){return undefined;}if(AO===AB.DssGraphBackground){AQ.Name=Y[AS][0];if(AQ.Name.search("Trans")!==-1){AQ.Value=AT/255*100;}else{AQ.Value=AT;}}break;case AA.DssGraphShowLegendText:AQ.Name="LegendVisibleness";AQ.Value=AT===0?false:true;break;case AA.DssGraphSDShowDataText:AQ.Name="ShowSeriesDataLabel";AQ.Value=AT!==0;break;case AA.DssGraphShowDataText:if(AV===false){AQ.Name="DataLabel";AQ.Value=F.HIDE;if(AT&X.DssGraphDataTextValue){AQ.Value=F.SHOW_VALUE_ONLY;}else{if(AT&X.DssGraphDataTextLabel){AQ.Value=F.SHOW_TEXT_ONLY;}}}break;case AA.DssGraphFontColor:case AA.DssGraphFontName:case AA.DssGraphFontSize100:case AA.DssGraphFontSize:case AA.DssGraphFontStyle:AQ.Value=AT;AU=y.call(this,AO);AS=U.call(this,AN);if(AS<0){return undefined;}if(AS===4){AS=3;AQ.Value/=100;}if(AU==="No_Axis"){if(AO===AB.DssGraphDataText){if(AV){return undefined;}AQ.Name=V[AS][2];}else{if(AO===AB.DssGraphPieFeelerLabel||AO===AB.DssGraphPieFeelerLabel){if(AV===false){return undefined;}AQ.Name=V[AS][2];}else{if(AO===AB.DssGraphLegendText){AQ.Name=V[AS][3];}else{return undefined;}}}}else{if(AU[0]==="X"){AQ.Name=V[AS][0];}else{if(AU[0]==="Y"){AQ.Name=V[AS][1];}else{if(AU[0]==="O"){AQ.Name=AR?V[AS][0]:V[AS][1];}else{return undefined;}}}}break;}return AQ;}var T,j=String.fromCharCode,AE=mstrmojo.locales.datetime,AJ=0,L=document.getElementById("measureText"),B={},h={};var o=0.03,K=0,R=0,H=0.2;function p(AL){var AK,AM=[],AN;for(AK=0;AK<=AL;AK++){AN=AK.toString(16);if(AN.length===1){AN="0"+AN;}AM[AK]=AN;}T=AM;return AM;}function AH(AK){var AL=parseFloat(AK);if(isNaN(AL)===false&&AL!==undefined&&AL!==null){return AL;}return 0;}function D(AK){AK=AK.replace(/ddd/g,"EEE");AK=AK.replace(/AM\/PM/g,"a");AK=AK.replace(/tt/g,"a");AK=AK.replace(/:'/g,":");AK=AK.replace(/'\/'/g,"/");AK=AK.replace(/\\/g,"");var AL,AN=true,AM=AK.length;for(AL=0;AL<AM;AL++){if(AK[AL]==="h"||AK[AL]==="H"||AK[AL]===":"){AN=true;}else{if(AK[AL]===" "&&AN){AN=true;}}if(AK[AL]==="m"&&AN){AK=AK.substring(0,AL)+"M"+AK.substring(AL+1);}}return AK;}mstrmojo.chart.common.Utility=mstrmojo.provide("mstrmojo.chart.common.Utility",{point2D:{},rect2D:{},tripleId:{create:function M(AL,AP,AN,AM,AO){if(AL===null||AL===undefined){AL=-3;}if(AP===null||AP===undefined){AP=-3;}if(AN===null||AN===undefined){AN=-3;}var AK={mObjectId:AL,mSeriesId:AP,mGroupId:AN};if(AM!==undefined&&AM!==null){AK.angleByIndex=AM;}if(AO!==undefined&&AO!==null){AK.sliceById=AO;}return AK;},walks:function l(AO,AM){if(!!AO===false||!!AM===false){return null;}if(AO.length===1){return AM[AO[0]];}var AN=(AO&&AO.length)||0,AL,AK=AO[AL];for(AL=0;AL<AN;AL++){if(AM[AK]===undefined){AM[AK]={};}AM=AM[AK];}return AM;},equal:function a(AK,AL){return(AK.mObjectId===AL.mObjectId&&AK.mSeriesId===AL.mSeriesId&&AK.mGroupId===AL.mGroupId);},reset:function s(AM,AO,AN,AL,AK,AP){AM.mObjectId=AO!==undefined?AO:-3;AM.mSeriesId=AN!==undefined?AN:-3;AM.mGroupId=AL!==undefined?AL:-3;if(AK!==undefined&&AK!==null){AM.angleByIndex=AK;}if(AP!==undefined&&AP!==null){AM.sliceById=AP;}return AM;}},transformProperty:function A(AK,AM,AL){if(AM===0){return W.call(this,AK,AL);}return d.call(this,AK,AL);},abbreviateNumber:function b(AU,AK){var AV,AL,AW="",AN=(AU<0),AX=(this.isIntegar(AU)===false);if(AX){AK++;}if(AU<0){AK++;}var AQ=AN?-AU:AU;var AR=0;if(AQ>=1e+27){AQ=999;AW="Y";}else{if(AQ>=1e+24){AQ/=1e+24;AW="Y";}else{if(AQ>=1e+21){AQ/=1e+21;AW="Z";}else{if(AQ>=1000000000000000000){AQ/=1000000000000000000;AW="E";}else{if(AQ>=1000000000000000){AQ/=1000000000000000;AW="P";}else{if(AQ>=1000000000000){AQ/=1000000000000;AW="T";}else{if(AQ>=1000000000){AQ/=1000000000;AW="B";}else{if(AQ>=1000000){AQ/=1000000;AW="M";}else{if(AQ>=1000){AQ/=1000;AW="K";}else{if(AQ>=1){AR++;}else{if(AQ>=0.001){AR++;}else{if(AQ>=0.000001){AR++;}else{if(AQ>=1e-9){AR++;}else{if(AQ>=1e-12){AR++;}else{AN=false;}}}}}}}}}}}}}}if(this.isIntegar(AQ)===false){AV=AQ.toString();var AM=5,AP=2,AY;AL=AV.indexOf(".");AY=AV.length-AL-1;if(AY>AM||(AY>AP&&AY>AL)){if(AY>AM&&AK-AY<0){AP=Math.max(AP,Math.min(AP,AK-AY));}else{AP=Math.max(1,Math.min(AP,AK-AY));}AQ=AQ.toFixed(AP);}}AV=AQ.toString();if(this.isIntegar(AQ)===false){var AT=AV.length-1;AL=AV.indexOf(".");if(AL!==-1){if(AL>=AT){AV=AV.substring(0,AL);}else{var AS,AO=true;for(AS=AT;AS>AL&&AO;--AS){if(AV[AS]!=="0"){AO=false;}}if(AO){AV=AV.substring(0,AL);}}}}if(AN){AV="-"+AV;}AV+=AW;return AV;},getScalePlate:function AG(AK){AK=AK||false;this.mScalePlate=mstrmojo.chart.common.ScalePlate;if(AK){this.mScalePlate.clear();}return this.mScalePlate;},prepareScalePlateOptions:function AD(AM,AL,AN){var AK={mUseLogarithmicScale:AM,mAlwaysIncludeZero:!AM&&(AL||!!(AN&1)||!!(AN&2)),mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mUseCustomMinMax:false};return AK;},evaluateTextMargin:function P(AK){this.mTextMargins=this.mTextMargins||{};var AL=this.mTextMargins;if(AL[AK]){return AL[AK];}var AM=[];AM[0]=Math.floor(AK*o+0.5);AM[1]=Math.floor(AK*K+0.5);AM[2]=Math.max(Math.floor(AK*R+0.5),1);AL[AK]=AM;return AM;},AlmostZero:function z(AK){return(Math.abs(AK)<0.000001);},isValidNumber:function J(AK){if(typeof AK==="number"){if(AK===0){return true;}return !!AK;}return false;},isIntegar:function k(AK){return AK===+AK&&AK===(AK|0);},HasArrayIntersection:function O(AL,AK){var AM;for(AM=0;AM<AL.length;AM++){if(AK.indexOf(AL[AM])!==-1){return true;}}return false;},EscapeString:function C(AK){var AM='"',AL='\\"',AN=new RegExp(AM,"g");return String(AK).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"\\\\").replace(AN,AL).replace(/\r\n/g,"<br/>").replace(/\r/g,"<br/>").replace(/\n/g,"<br/>");},EscapeStringForJSON:function N(AK){var AM='"',AL='\\"',AN=new RegExp(AM,"g");return String(AK).replace(/\\/g,"\\\\").replace(AN,AL).replace(/\r/g,"\\r").replace(/\n/g,"\\n");},TrimLastComma:function AF(AL){var AK;if(!AL.buf||AL.len===-1){return ;}AK=AL.len;var AM=String(AL.buf[AK]);if(AM&&AM[AM.length-1]===","){AL.buf[AK]=AM.slice(0,-1);}},decodeUTF8:function f(AK){var AL="",AN=0,AP=0,AO=0,AM=0;while(AN<AK.length){AP=AK.charCodeAt(AN);if(AP<128){AL+=j(AP);AN++;}else{if((AP>191)&&(AP<224)){AO=AK.charCodeAt(AN+1);AL+=j(((AP&31)<<6)|(AO&63));AN+=2;}else{AO=AK.charCodeAt(AN+1);AM=AK.charCodeAt(AN+2);AL+=j(((AP&15)<<12)|((AO&63)<<6)|(AM&63));AN+=3;}}}return AL;},formatDateTimeValue:function e(AL,AQ){var AO=new mstrmojo.chart.common.DSSDateTime({ifTime:AQ});var AK="";var AN="";var AR=0;while(AR<AL.length){var AM=1;switch(AL.charAt(AR)){case"[":AR++;while(AR<AL.length&&AL.charAt(AR)!=="]"){AN+=AL.charAt(AR);AR++;}if(AN.length>0&&(AN[0]===">"||AN[0]==="<"||AN[0]==="=")){AN="";}AR++;break;case"y":AR++;while(AR<AL.length&&AL.charAt(AR)==="y"){AM++;AR++;if(AM===4){break;}}if(AM===1||AM===2){AK+=this.fillZeroToWidth(AO.mnYear%100,2);}else{if(AM===3){AK+=this.fillZeroToWidth(AO.mnYear%100,2);AR--;}else{if(AM===4){AK+=AO.mnYear;}}}break;case"M":AR++;while(AR<AL.length&&AL.charAt(AR)==="M"){AM++;AR++;}if(AM<3){AK+=this.fillZeroToWidth(AO.mnMonth,AM);}else{if(AM===3){AK+=AE.MONTHNAME_SHORT[AO.mnMonth];}else{AK+=AE.MONTHNAME_FULL[AO.mnMonth];}}break;case"d":AR++;while(AR<AL.length&&AL.charAt(AR)==="d"){AM++;AR++;}if(AM<3){AK+=this.fillZeroToWidth(AO.mnDay,AM);}else{if(AM===3){AK+=AE.dayShortNames[AO.mnDay];}else{AK+=AE.dayNames[AO.mnDay];}}break;case"h":AR++;while(AR<AL.length&&AL.charAt(AR)==="h"){AM++;AR++;}var AP=AO.mnHour;if(AP===0){AP=12;}if(AP>12){AP-=12;}AK+=this.fillZeroToWidth(AP,AM);break;case"H":AR++;while(AR<AL.length&&AL.charAt(AR)==="H"){AM++;AR++;}AK+=this.fillZeroToWidth(AO.mnHour,AM);break;case"m":AR++;while(AR<AL.length&&AL.charAt(AR)==="m"){AM++;AR++;}AK+=this.fillZeroToWidth(AO.mnMinute,AM);break;case"s":AR++;while(AR<AL.length&&AL.charAt(AR)==="s"){AM++;AR++;}AK+=this.fillZeroToWidth(AO.mnSecond,AM);break;case"S":AR++;while(AR<AL.length&&AL.charAt(AR)==="S"){AM++;AR++;}AK+=this.fillZeroToWidth(AO.mnMillisecond,AM);break;case"a":AP=AO.mnHour;if(AP<12){AK+=AE.AM_NAME;}else{AK+=AE.PM_NAME;}AR++;break;default:AK+=AL.charAt(AR++);break;}}if(AN.length!==0){AK='<SPAN STYLE="COLOR: '+AN+'" >'+AK+"</SPAN>";}return AK;},fillZeroToWidth:function n(AO,AM){var AL="",AN=AL+AO;var AK=AN.length;while(AK<AM){AN="0"+AN;AK++;}return AN;},updateCache:function AI(AL,AO,AP){var AN=(AO&&AO.length)||0,AM,AK,AQ=AL;for(AM=0;AM<AN-1;AM++){AK=AO[AM];if(!AQ[AK]){AQ[AK]={};}AQ=AQ[AK];}AQ[AO[AN-1]]=AP;},measureTextHeight:function(AP,AM,AT,AQ,AK){var AS,AO=AP;if(AO===" "){AO="\u00A0";}AK=AK||"pt";if(typeof AT==="number"){AT=AT+AK;}var AL="none",AR="normal";if(AQ&E.FS_ITALIC){AL="italic";}if(AQ&E.FS_BOLD){AR="bold";}var AN={fontFamily:AM,fontSize:AT,fontStyle:AL,fontWeight:AR};if(h&&h.H&&h.H[AM]&&h.H[AM][AT]&&h.H[AM][AT][AQ]){AS=h.H[AM][AT][AQ];}else{AS=q.measureTextHeight("H",AN,1);this.updateCache(h,["H",AM,AT,AQ],AS);}return AS;},measureText:function x(AR,AO,AX,AS,AM){var AL=true,AK,AV=AX+1;var AQ=AR;if(AQ===" "){AQ="\u00A0";}AM=AM||"pt";if(typeof AX==="number"){AX=AX+AM;}if(B&&B[AQ]&&B[AQ][AO]&&B[AQ][AO][AX]&&B[AQ][AO][AX][AS]){return B[AQ][AO][AX][AS];}if(AL){var AN="normal",AT="normal";if(AS&E.FS_ITALIC){AN="italic";}if(AS&E.FS_BOLD){AT="bold";}var AP={fontFamily:AO,fontSize:AX,fontStyle:AN,fontWeight:AT};if(h&&h.H&&h.H[AO]&&h.H[AO][AX]&&h.H[AO][AX][AS]){AV=h.H[AO][AX][AS];}else{AV=q.measureTextHeight("H",AP,true);this.updateCache(h,["H",AO,AX,AS],AV);}AK=q.measureTextWidth(AR,AP,0);}else{if(!L){var AU=document.createElement("div");AU.id="measureText";AU.style.position="absolute";AU.style.top="0";AU.style.visibility="hidden";AU.style.height="auto";AU.style.width="auto";document.body.appendChild(AU);L=AU;}L.innerHTML="";L.appendChild(document.createTextNode(AQ));L.style.fontFamily=AO;L.style.fontSize=AX;L.style.fontWeight="normal";L.style.fontStyle="none";if(AS&E.FS_ITALIC){L.style.fontStyle="italic";}if(AS&E.FS_BOLD){L.style.fontWeight="bold";}AK=L.scrollWidth+1;AV=L.scrollHeight+1;}var AW={Width:AK,Height:AV};this.updateCache(B,[AQ,AO,AX,AS],AW);return AW;},ReplaceDecimalPoint:function AC(AL,AK){return AL.replace(".",AK);},ReplaceMinusSign:function u(AK,AL){return AK.replace("-",AL);},insert:function G(AL,AK,AM){if(typeof AL==="string"&&typeof AK==="string"&&AM<=AL.length){return AL.substr(0,AM)+AK+AL.substr(AM);}return AL;},InsertThousandSeparator:function t(AM,AN,AR){var AK=AR.mstrDecimalPoint;var AL=AM.indexOf(AK);if(AL===-1){AL=AM.length;}var AO=0;while(AO<AL&&!this.chk_val(AM.charAt(AO))){AO++;}var AQ=AM;var AP;for(AP=AL-3;AP>AO;AP-=3){AQ=this.insert(AQ,AN,AP);}return AQ;},chk_val:function I(AK){return/^\d+$/.test(AK);},hFormatValue:function Z(AX,AO,Ai,A7){var AV=0;var Aq=0;var Ae=AX.length;var BF=false;if(!A7){A7={};var Ao=window.navigator.userLanguage||window.navigator.language;var BQ=Ao.split("-");this.mstrLanguageCode=BQ[0];this.mstrCountryCode=BQ[1]||BQ[0];A7.mstrThousandSeparator=mstrmojo.locales.number.THOUSANDSEPARATOR||",";A7.mstrCurrencySymbol="$";A7.mstrDecimalPoint=mstrmojo.locales.number.DECIMALSEPARATOR||".";A7.mstrPercentSign="%";A7.mstrMinusSign="-";}while(AV<Ae){if(AX.charAt(AV)==='"'){AV++;while(AV<Ae&&AX.charAt(AV)!=='"'){AV++;}}else{if(AX.charAt(AV)==="["){AV++;var Ap="";while(AV<Ae&&AX.charAt(AV)!=="]"){Ap+=AX.charAt(AV);AV++;}if(Ap.length>1&&(Ap.charAt(0)===">"||Ap.charAt(0)==="<"||Ap.charAt(0)==="=")){var AL=-1;var A9=0;switch(Ap.charAt(0)){case">":if(Ap.charAt(1)>="0"&&Ap.charAt(1)<="9"){AL=1;A9=1;}else{if(Ap.charAt(1)==="="&&Ap.length>2&&Ap.charAt(2)>="0"&&Ap.charAt(2)<="9"){AL=2;A9=2;}}break;case"=":if(Ap.charAt(1)>="0"&&Ap.charAt(1)<="9"){AL=3;A9=1;}else{if(Ap.charAt(1)==="="&&Ap.length>2&&Ap.charAt(2)>="0"&&Ap.charAt(2)<="9"){AL=3;A9=2;}}break;case"<":if(Ap.charAt(1)>="0"&&Ap.charAt(1)<="9"){AL=5;A9=1;}else{if(Ap.charAt(1)==="="&&Ap.length>2&&Ap.charAt(2)>="0"&&Ap.charAt(2)<="9"){AL=4;A9=2;}}break;}if(AL>0){var AZ=Ap.substr(A9);var BI=parseFloat(AZ);if((AL===1&&AO>BI)||(AL===2&&AO>=BI)||(AL===3&&AO===BI)||(AL===4&&AO<=BI)||(AL===5&&AO<BI)){BF=true;}}}}else{if(AX.charAt(AV)===";"){if(BF){Ae=AV;break;}else{Aq=AV+1;AV++;}}else{AV++;}}}}if(!BF){Aq=0;}AV=Aq;var Av=false;while(AV<Ae){if(AX.charAt(AV)==='"'){AV++;while(AV<Ae&&AX.charAt(AV)!=='"'){AV++;}}else{if(AX.charAt(AV)==="["){AV++;while(AV<Ae&&AX.charAt(AV)!=="]"){AV++;}}else{if(AX.charAt(AV)==="y"||AX.charAt(AV)==="M"||AX.charAt(AV)==="d"||AX.charAt(AV)==="h"||AX.charAt(AV)==="H"||AX.charAt(AV)==="m"||AX.charAt(AV)==="s"||AX.charAt(AV)==="S"){Av=true;break;}else{AV++;}}}}if(Av){var BD="";if(BF){BD=AX.substr(Aq,Ae-Aq);}else{BD=AX;}return mstrmojo.num.formatByMask(BD,AO);}var BH;var Am;var As=false;var AR=false;var BC=false;var Ad=false;var BN=[];var Ah="K";var Aa=0;var A8=false;var AY=0;var BO="";var AS="";var Al="";var A6="";var AW=0;var BK=0;var BJ=false;var BA=A7.mstrCurrencySymbol;var A1=A7.mstrThousandSeparator;var Ax=A7.mstrDecimalPoint;var BB=A7.mstrPercentSign;var A5=A7.mstrMinusSign;AV=Aq;var Ak="";if(AO<0&&!BF){while(AV<Ae&&AX.charAt(AV)!==";"){if(AX.charAt(AV)==='"'){AV++;while(AV<Ae&&AX.charAt(AV)!=='"'){AV++;}}AV++;}AV++;if(AV>=Ae){if(AO<0){BO+="-";}AV=Aq;}}var BP=false;while(AV<Ae){var Ar=false;switch(AX.charAt(AV)){case"[":AV++;while(AV<Ae&&AX.charAt(AV)!=="]"){Al+=AX.charAt(AV);AV++;}if(Al.length>0&&(Al.charAt(0)===">"||Al.charAt(0)==="<"||Al.charAt(0)==="=")){Al="";}AV++;break;case'"':AV++;while(AV<Ae&&AX.charAt(AV)!=='"'){if(AX.charAt(AV)==="K"){BC=true;Ah="K";}else{if(BP){AS+=AX.charAt(AV);}else{BO+=AX.charAt(AV);}}AV++;}AV++;break;case"#":case"0":var Ac=AX.charAt(AV);BP=true;var Ag=1;AV++;while(AV<Ae&&AX.charAt(AV)===Ac){Ag++;AV++;}if(AV+1<Ae&&AX.charAt(AV)==="-"&&AX.charAt(AV+1)===Ac){Ad=true;BN.push(Ag);AV++;while(true){Ag=0;while(AV<Ae&&AX.charAt(AV)===Ac){Ag++;AV++;}BN.push(Ag);if(AV>=Ae||AX.charAt(AV)!=="-"){break;}AV++;}}while(AV<Ae){if(AX.charAt(AV)===","){if(AV+1<Ae&&AX.charAt(AV+1)===Ac){As=true;}else{break;}}else{if(AX.charAt(AV)!==Ac){break;}}AV++;}break;case".":BP=true;AV++;Aa=0;while(AV<Ae&&AX.charAt(AV)==="0"){Aa++;AV++;}if(Aa===0){while(AV<Ae&&AX.charAt(AV)==="#"){Aa++;AV++;}}break;case"E":BK=6;while(AV<Ae&&AX.charAt(AV)!=="0"){if(AX.charAt(AV)==="+"&&AV<Ae&&AX.charAt(AV+1)==="0"){AR=true;}else{A6+=AX.charAt(AV);}AV++;}AW=0;while(AV<Ae&&AX.charAt(AV)==="0"){AW++;AV++;}break;case"%":BK=4;AV++;break;case"(":AV++;BO+="(";break;case")":AV++;AS+=")";break;case"-":AV++;if(AO<0){BO+=A5;}break;case"?":AV++;break;case"/":if(AV>Aq&&AX.charAt(AV-1)==="?"&&AV+1<Ae&&AX.charAt(AV+1)==="?"){BK=5;A8=false;Am=AV-1;while(Am>Aq&&AX.charAt(Am)==="?"){Am--;}while(Am>Aq&&AX.charAt(Am)===" "){Am--;}if(Am>=Aq&&(AX.charAt(Am)==="#"||AX.charAt(Am)==="0")){A8=true;}AY=0;AV++;while(AV<Ae&&AX.charAt(AV)==="?"){AY++;AV++;}}else{AV++;}break;case",":if(AV>Aq&&(AX.charAt(AV-1)==="0"||AX.charAt(AV-1)==="#")){if(AV+1<Ae&&(AX.charAt(AV+1)==="K"||AX.charAt(AV+1)==="k")){BC=true;Ah=AX.charAt(AV+1);AV++;}}Am=AV+1;while(Am<Ae){if(AX.charAt(Am)===","){Am++;continue;}else{break;}}if(Am===Ae||AX.charAt(Am)==="."){BJ=true;}if(BJ||(!BJ&&AV+1<Ae&&AX.charAt(AV+1)===",")){while(AV<Ae&&AX.charAt(AV)===","){AO/=1000;AV++;}AV--;}AV++;break;case";":Ar=true;break;case"$":if(BP){AS+=BA;}else{BO+=BA;}AV++;break;default:if(BP){AS+=AX.charAt(AV);}else{BO+=AX.charAt(AV);}AV++;}if(Ar){break;}}if(AO<0){AO=-AO;}var Az="";if(Ad){var Au=0;for(BH=0;BH<BN.length;BH++){Au+=BN[BH];}Az=Ak=this.fillZeroToWidth(Au,AO.toFixed());for(BH=0;BH<BN.length-1;BH++){Au-=BN[BH];var At=Az.length-Au;Az=Az.slice(0,At)+"-"+Az.slice(At);}}else{switch(BK){case 0:if(BC){AO/=1000;}var A3=AO;if(A3<0){A3=-A3;}var AK=0;while(A3>=10){A3/=10;AK++;}if(AK>=15){Az=Ak=this.fillZeroToWidth((AO<0?-AO:AO),10);var An=Az.indexOf(".");if(An!==-1){Az=Az.slice(0,An)+Az.slice(An+1);}Az=Az.substr(0,16);if(Az.charAt(15)>="5"){var AU=14;while(AU>=0&&Az.charAt(AU)==="9"){Az=Az.slice(0,AU)+"0"+Az.slice(AU+1);AU--;}var AP=Az.charAt(AU);AP++;if(AU>=0){Az=Az.slice(0,AU)+AP+Az.slice(AU+1);}else{Az="1"+Az;}}Az=Az.substr(0,15);var BG;for(BG=AK-14;BG>0;BG--){Az+="0";}if(AO<0){Az=A5+Az;}}else{Ak+=(AO+Math.pow(0.1,Aa+6)).toFixed(Aa);Az=Ak;Az=this.ReplaceDecimalPoint(Az,Ax);if(AO<0){Az=this.ReplaceMinusSign(Az,A5);}}if(As){Az=this.InsertThousandSeparator(Az,A1,A7);}if(BC){Az+=Ah;}break;case 5:if(BC){AO/=1000;}var Aj=10;for(BH=1;BH<AY;BH++){Aj*=10;}var AM={numerator:0,denominator:1};var AT={numerator:1,denominator:1};var AQ={numerator:1,denominator:2};var Ay={numerator:0,denominator:1};var Af=AO>=0;var A4=Math.abs(AO);var A2=parseInt(A4,10);A4-=A2;while(AQ.denominator<Aj){if(Math.abs(AH.call(AQ)-A4)<1e-15){Ay=AQ;break;}if(AH.call(AQ)>A4){AT=AQ;}else{AM=AQ;}AQ.denominator=AM.denominator+AT.denominator;AQ.numerator=AM.numerator+AT.numerator;}if(AQ.denominator>=Aj){if(A4-AH.call(AM)<AH.call(AT)-A4){Ay=AM;}else{Ay=AT;}}if(A2>0){Ay.numerator+=A2*Ay.denominator;}if(Ay.denominator===0){A8=false;}var BE=false;var A0=false;var BM=Ay.numerator;if(A8){A2=Math.floor(Ay.numerator/Ay.denominator);BM=Ay.numerator%Ay.denominator;A0=A0||(BM!==0);if(A2>0){BE=true;Ak+=A2;if(A0){Ak+=" ";}}}if(!A0&&!BE&&BM===0){Ak+="0";}else{if(!A0&&BE&&BM===0){AJ++;}else{Ak+=BM;Ak+="/";Ak+=Ay.denominator;}}Az=Ak;if(!Af){Az=A5+Az;}if(As){Az=this.InsertThousandSeparator(Az,A1,A7);}if(BC){Az+=Ah;}break;case 4:AO*=100;Ak+=(AO+Math.pow(0.1,Aa+6)).toFixed(Aa);Az=Ak;Az=this.ReplaceDecimalPoint(Az,Ax);if(AO<0){Az=this.ReplaceMinusSign(Az,A5);}if(As){Az=this.InsertThousandSeparator(Az,A1,A7);}Az+=BB;break;case 6:var Aw=AO;var BL=0;if(Aw>1){while(Aw>=10){Aw/=10;BL++;}}else{if(Aw!==0){while(Aw<1){Aw*=10;BL--;}}}Ak+=(Aw+Math.pow(0.1,Aa+6)).toFixed(Aa);Ak+=A6;if(AR&&BL>=0){Ak<<"+";}if(BL<0){Ak<<"-";BL=-BL;}Ak+=this.fillZeroToWidth(BL,AW);Az=Ak;Az=this.ReplaceDecimalPoint(Az,Ax);if(AO<0){Az=this.ReplaceMinusSign(Az,A5);}break;}}var AN=BO+Az+AS;var Ab=false;if(Al.length!==0&&Ab){AN='<SPAN STYLE="COLOR: '+Al+'" >'+AN+"</SPAN>";}return AN;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle","EnumFontAlignment","EnumFontStyle","EnumFontRotation");var M=mstrmojo.chart,J=M.enums,H=J.EnumBoxStyle,D=J.EnumFontAlignment,R=J.EnumFontStyle,T=J.EnumFontRotation,I=M.common.Utility,N=1,S=3;var B=["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize"],F=[D.FA_CENTER,R.FS_NORMAL,T.FR_NORMAL,H.BS_NOFRAME,null,255,"Verdana",15];mstrmojo.chart.FormatFont=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFont",mFontAlignment:D.FA_CENTER,mFontStyle:R.FS_NORMAL,mFontRotation:T.FR_NORMAL,mFontBox:H.BS_NOFRAME,mFontColor:null,mFontAlpha:255,mFontName:null,mFontSize:15,init:function L(X){var W,V=B.length;this._super(X);if(X&&X.Font){var U=X.Font;mstrmojo.hash.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontAlpha","mFontName","mFontSize"],U,this);this.mFontColor=U.mFontColor;}else{if(X&&X.Bare){for(W=0;W<V;++W){this[B[W]]=null;}}}if(!this.mFontColor&&!(X&&X.Bare)){this.mFontColor=M.gBlack.ToInteger();}this.mFontName=this.mFontName||"Verdana";},ApplyFontFormat:function K(V,U){if(this.mFontSize<S){this.mFontSize=S;}if(!U){V.applyFontFormat(this);}},GetFontExtent:function A(){return Math.floor(this.mFontSize<S?S:this.mFontSize*N);},GetStringExtent:function O(V){var W,U,X;this.ApplyFontFormat(null,true);X=I.measureText(V,this.mFontName,this.mFontSize,this.mFontStyle);W=X.Width;U=X.Height;return{Width:W,Height:U};},GetStringHeight:function P(U){this.ApplyFontFormat(null,true);return I.measureTextHeight(U,this.mFontName,this.mFontSize,this.mFontStyle);},isVertical:function E(){var U=this.mFontRotation;return U===T.FR_90||U===T.FR_270;},isHorizontal:function C(){var U=this.mFontRotation;return U===T.FR_NORMAL||U===T.FR_180;},evalMargins:function Q(){return I.evaluateTextMargin(this.mFontSize);},restoreDefaults:function G(V){var U;if(V){for(U=0;U<B.length;++U){this[B[U]]=F[U];}}else{for(U=0;U<B.length;++U){if(this[B[U]]===null){this[B[U]]=F[U];}}}if(this.mFontColor===null){this.mFontColor=M.gBlack.ToInteger();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.num","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.color","mstrmojo.chart","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var o=mstrmojo,p=mstrmojo.array,P=mstrmojo.hash,H=mstrmojo.num,G=mstrmojo.VisUtility,a=mstrmojo.chart,K=a.enums,b=K.EnumGraphMajorType,J=a.common.Utility,T=a.model,M=T.enums,x=M.EnumDSSGraphObject,AB=mstrmojo.VisEnum.ControlType,y=o.gm,U=mstrmojo.gm.EnumTextAlignH,r=mstrmojo.gm.EnumTextAlignV,w=";",j=",",A="_tmsp",L=" ",Y=-20,k=mstrmojo.gm.EnumSelectionOptionLevel,AD=mstrmojo.gm.EnumShape,f=mstrmojo.color,I=mstrmojo.gm.EnumIdentityType,R=0.00001,D,Z=Math.pow(2,30),c=Math.pow(2,60);var e=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(7194,"Constant")];function l(AJ,AI){var AK,AH=AJ.length;if(AH!==AI.length){return false;}for(AK=0;AK<AH;AK++){if(AJ[AK]!==AI[AK]){return false;}}return true;}function AC(AK,AI,AL){var AJ=false,AM=AL+A,AH=AK[AM],AN=AI[AM];if(AI[AL]===undefined){AJ=true;}else{if((AN===undefined&&AH!==undefined)||(AN!==undefined&&AH!==undefined&&AN<AH)){AJ=true;}}if(AJ){AI[AL]=AK[AL];if(AN!==undefined){AI[AM]=AH;}}}function AG(AI,AH){var AJ;for(AJ in AI){if(AI.hasOwnProperty(AJ)){AC(AI,AH,AJ);}}return AH;}function W(AL){var AK={},AJ,AI=[],AH;p.forEach(AL,function(AM){if(AM!==undefined){AI.push(AM);}});AH=AI.length;if(AH===1){return AI[0];}for(AJ=0;AJ<AH;AJ++){AG(AI[AJ],AK);}return AK;}function AA(AH){return{n:AH,s:AH.toString(),on:AH};}function X(AJ,AH,AL){if(AH===AJ){return 0;}var AI=AH-AJ,AK=1;while(AI<1){AI*=10;AK/=10;}while(AI>=10){AI/=10;AK*=10;}if(AI<1.8){AK*=0.2;}else{if(AI<3.1){AK*=0.4;}else{if(AI<4.6){AK*=0.5;}else{if(AI>=8.1){AK*=2;}}}}if(AL){AK=Math.round(AK);if(AK<1){AK=1;}}return AK;}function B(AK,AO,AQ,AI){var AM=[];if(AK===AO){if(AK<0){AM.push(mstrmojo.gm.GMUtility.formatNumber(AK,"nearest"));}AM.push({n:0,s:"0",on:0});if(AK>0){AM.push(mstrmojo.gm.GMUtility.formatNumber(AK,"nearest"));}return AM;}var AH=AI>0?AI:X(AK,AO,AQ);var AJ=Math.ceil(AO/AH)*AH;if(AJ-AO>=AH*0.9){AJ=Math.floor(AO/AH)*AH;}var AN=Math.floor(AK/AH)*AH;if(AK-AN>=AH*0.9){AN=Math.ceil(AK/AH)*AH;}var AP=Math.floor((AJ-AN+AH/100)/AH)+1,AL;for(AL=0;AL<AP;++AL){AM.push(mstrmojo.gm.GMUtility.formatNumber(AN+AL*AH,"nearest"));}return AM;}function S(AH,AK){var AJ;AH.mMaxTick=1;if(this.mChartContextPtr.mIsGraphMatrix){AH.mStep=this.mMinimum<0?0.2:0.1;if(AK.mUseCustomMinMax){var AI=AK;AH.mMaxTick=AI.mAxisMaxValue;AH.mMinTick=AI.mAxisMinValue;AH.mMaxTick=Math.min(1,AH.mMaxTick);AH.mMinTick=Math.max(-1,AH.mMinTick);AH.mStep=0.1;}else{if(this.mMaximum>=0.5){AH.mMaxTick=1;AH.mMinTick=Math.floor(this.mMinimum/AH.mStep)*AH.mStep;AH.mMinTick=(AH.mMinTick*this.mMinimum<0)?0:(AH.mMinTick>0?0:AH.mMinTick);if(this.mMinimum<-0.5){AH.mMinTick=-1;}}else{if(this.mMaximum>0){AH.mMaxTick=Math.ceil(this.mMaximum/AH.mStep)*AH.mStep;AH.mMinTick=-1;}else{AH.mStep=0.1;AH.mMaxTick=0;AH.mMinTick=-1;}}}}else{AH.mMinTick=(this.mMinimum<0)?-1:0;if(u.call(this,AH)){return ;}AH.mStep=this.mMajorGrid.mUseManualGrid?this.mMajorGrid.mGridInterval:(AH.mMaxTick-AH.mMinTick)/10;}for(AJ=AH.mMinTick+AH.mStep;AJ+a.gModuleMain.mTolerance<AH.mMaxTick;AJ+=AH.mStep){AH.mTicks.push(Math.round(AJ*100)/100);}}function O(AH,AM){var AL,AI,AO=AM,AN=AO.mDrawCustomLine,AJ=AO.mAxisCustomValue,AK;AH.mStep=1;if(this.mMaximum<=0){AH.mMinTick=1;AH.mMaxTick=10;if(AN&&AJ<=1){AO.mAxisCustomValue=AH.mMinTick;}return ;}if(this.mMinimum<=0){AI=this.mMaximum>1?0:-1;AH.mMinTick=Math.pow(10,AI);if(AO.mUseCustomMinMax){AH.mMaxTick=this.mMaximum;AL=Math.floor(g.call(this,this.mMaximum));if(g.call(this,this.mMaximum)===AL){AL--;}}else{AL=Math.ceil(g.call(this,this.mMaximum));AH.mMaxTick=Math.pow(10,AL);}for(AK=AI+1;AK<AL;++AK){AH.mTicks.push(Math.pow(10,Math.floor(AK)));}if(AN&&AJ<=0){AO.mAxisCustomValue=Math.max(AH.mMinTick,AO.mAxisCustomValue);}return ;}if(AO.mUseCustomMinMax){AL=g.call(this,this.mMaximum);AI=g.call(this,this.mMinimum);AH.mMaxTick=this.mMaximum;AH.mMinTick=this.mMinimum;}else{AL=Math.ceil(g.call(this,this.mMaximum));AI=Math.floor(g.call(this,this.mMinimum));AH.mMaxTick=Math.pow(10,AL);AH.mMinTick=Math.pow(10,AI);}for(AK=AI+1;AK<AL;++AK){AH.mTicks.push(Math.pow(10,Math.floor(AK)));}if(AN&&AJ<=0){AO.mAxisCustomValue=AH.mMinTick;}}function s(AR,AM){var AJ=AM,AH,AK;AR.mStep=d.call(this,this.mMaximum,this.mMinimum,AJ.mAlwaysIncludeZero);AR.mMaxTick=Math.ceil(this.mMaximum/AR.mStep)*AR.mStep;AR.mMinTick=Math.floor(this.mMinimum/AR.mStep)*AR.mStep;AR.mMinTick=(AR.mMinTick*this.mMinimum<0)?0:AR.mMinTick;if(AJ.mAlwaysIncludeZero){AR.mMaxTick=(this.mMaximum<0)?0:AR.mMaxTick;AR.mMinTick=(this.mMinimum>0)?0:AR.mMinTick;}var AL=AR.mMaxTick-AR.mMinTick;if(AR.mStep>=AL){return ;}if(u.call(this,AR)){return ;}AH=Math.floor((AR.mMaxTick-AR.mMinTick+AR.mStep/100)/AR.mStep)+1;var AN=this.mNumberFormat;for(AK=1;AK<AH-1;++AK){var AP=AR.mMinTick+AK*AR.mStep,AQ,AI,AO;if(AR.mStep<1&&AN.mFormatType===4&&AN.mCustomFormat.indexOf("%")!==-1){AQ=AP*100;if(!J.isIntegar(AQ)){AI=Math.round(AQ);AO=Math.abs(AQ-AI);if(AO<R){AP=AI/100;}}}AR.mTicks.push(AP);}}function C(AR,AL){var AQ=AL,AK,AH,AO,AJ,AN,AM,AI,AP;AR.mMaxTick=AQ.mAxisMaxValue;AR.mMinTick=AQ.mAxisMinValue;if(u.call(this,AR)){return ;}if(!V.call(this)||this.mMajorGrid.mUseManualGrid){AR.mStep=d.call(this,AR.mMaxTick,AR.mMinTick,false);AK=AR.mMaxTick-AR.mMinTick;if(AR.mStep>=AK){return ;}AH=Math.floor(AK/AR.mStep);if(!(this.mChartContextPtr.mIsTimeSeriesChart)&&AK===AH*AR.mStep){for(AJ=1;AJ<AH;++AJ){AR.mTicks.push(AR.mMinTick+AJ*AR.mStep);}}else{AK=AR.mMaxTick-AR.mMinTick;AO=10;AN=false;for(AJ=3;AJ<AH;++AJ){AM=AK/AJ;while(AM<1){AM*=10;}while(AM>=10){AM/=10;}if(AM===Math.floor(AM)){AO=AJ;AN=true;break;}}if(AN){AR.mStep=AK/AO;for(AJ=1;AJ<AO;++AJ){AR.mTicks.push(AR.mMinTick+AJ*AR.mStep);}}else{AI=Math.ceil((AR.mMinTick+AR.mStep/100)/AR.mStep)*AR.mStep;AP=Math.floor((AR.mMaxTick-AR.mStep/100-AI)/AR.mStep)+3;for(AJ=0;AJ<AP-2;++AJ){AR.mTicks.push(AI+AJ*AR.mStep);}}}}else{AK=AR.mMaxTick-AR.mMinTick;AO=10;for(AJ=6;AJ<=9;++AJ){AM=AK/AJ;while(AM<10){AM*=10;}while(AM>=100){AM/=10;}if(AM===Math.floor(AM)){AO=AJ;break;}}AR.mStep=AK/AO;for(AJ=1;AJ<AO;++AJ){AR.mTicks.push(AR.mMinTick+AJ*AR.mStep);}}}function E(AH,AL){var AK,AI,AJ;AH.mMaxTick=AL.mAxisMaxValue;if(AH.mMaxTick<=this.mMinimum){this.mMinimum=AH.mMaxTick-1;}AH.mStep=d.call(this,AH.mMaxTick,this.mMinimum,AL.mAlwaysIncludeZero&&(AH.mMaxTick>0));AK=(AL.mAlwaysIncludeZero&&(this.mMinimum>0))?0:this.mMinimum;if(V.call(this)){AH.mMinTick=AH.mMaxTick-Math.ceil((AH.mMaxTick-AK)/AH.mStep)*AH.mStep;}else{AH.mMinTick=Math.floor(AK/AH.mStep)*AH.mStep;}if(u.call(this,AH)){return ;}AI=Math.floor((AH.mMaxTick-AH.mStep/100-AH.mMinTick)/AH.mStep)+2;for(AJ=1;AJ<AI-1;++AJ){AH.mTicks.push(AH.mMinTick+AJ*AH.mStep);}}function h(AH,AM){var AI,AL,AJ,AK;AH.mMinTick=AM.mAxisMinValue;if(AH.mMinTick>=this.mMaximum){this.mMaximum=AH.mMinTick+1;}AH.mStep=d.call(this,this.mMaximum,AH.mMinTick,AM.mAlwaysIncludeZero&&(AH.mMinTick<0));AI=(AM.mAlwaysIncludeZero&&(this.mMaximum<0))?0:this.mMaximum;if(V.call(this)){AH.mMaxTick=AH.mMinTick+Math.ceil((AI-AH.mMinTick)/AH.mStep)*AH.mStep;}else{AH.mMaxTick=Math.ceil(AI/AH.mStep)*AH.mStep;}if(u.call(this,AH)){return ;}AL=Math.ceil((AH.mMinTick+AH.mStep/100)/AH.mStep)*AH.mStep;AJ=Math.floor((AH.mMaxTick-AL+AH.mStep/100)/AH.mStep)+2;for(AK=0;AK<AJ-2;++AK){AH.mTicks.push(AL+AK*AH.mStep);}}function d(AX,AR,AJ){var AQ,AL;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}AQ=0;if(AJ){AQ=Math.max(AX,AX-AR);AQ=Math.max(AQ,-AR);}else{AQ=AX-AR;}if(AQ===0){this.mIsShown=false;return 1;}if(AQ>=1&&AQ<=4&&parseInt(AQ)===AQ){var AY=this.PrimaryMetricIndex,AM=AY.length;for(var AT=0;AT<AM;AT++){var AP=this.mChartContextPtr.mDatasetPtr,AS=AP.dataProvider,AK=AS.getSeriesCount(),AO=AS.getGroupCount(),AI=AY[AT],AN,AV;for(var AW=0;AW<AK;AW++){AN=AS.getMetricIndexForSeries(AW);if(AN===AI){AV=true;for(var AU=0;AU<AO;AU++){var AZ=AP.GetData(AW,AU);if(parseInt(AZ)!==AZ){AV=false;break;}}}if(AV){return 1;}}}}var AH=AQ;AL=1;while(AQ<1){AQ*=10;AL/=10;}while(AQ>=10){AQ/=10;AL*=10;}if(AQ<1.8){AL*=2;AL/=10;}else{if(AQ<3.1){AL*=4;AL/=10;}else{if(AQ<4.6){AL*=5;AL/=10;}else{if(AQ>=8.1){AL*=2;}}}}AL=this.postProcessStep(AL,AH);return AL;}function u(AH){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var AI=this.mMajorGrid;return AI.mUseManualGrid&&(AI.mGridInterval<(AH.mMaxTick-AH.mMinTick)/30);}function g(AH){return Math.log(AH)/Math.log(10);}function V(){return(this.mGraphMajorType===b.GMT_HISTOGRAM||this.mGraphMajorType===b.GMT_POLAR)&&this.mTripleId.mObjectId===x.DssGraphX1Body;}function z(AK){var AL=this,AH=AL.id,AJ=AK.metricId,AI=new o.ui.menus.MenuConfig();(AK.options).forEach(function(AM){if(AM!==y.EnumRefLineModelType.CONST){AI.addMenuItem(e[AM],"xt",function(){AL.toggleRefLineEnabled(AJ,AM,true);});}else{AI.addEditorMenuItem(e[y.EnumRefLineModelType.CONST],AH,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:mstrmojo.expr.DTP.FLOAT,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR},onEnter:function(){this.validate();}}],fnOk:function(AO,AN){var AP=AN.constVal;if(AP.isValid()){AL.toggleRefLineEnabled(AJ,AM,true,AP.value);}}});});}});return AI;}function t(AJ){var AK=this,AI=AJ.metricId,AH=new o.ui.menus.MenuConfig();(AJ.options).forEach(function(AN){var AL=AN.refType,AM=e[AL]+((AL===y.EnumRefLineModelType.CONST)?("-["+H.toLocaleString(AN.c)+"]"):"");AH.addMenuItem(AM,"xt",function(){AK.toggleRefLineEnabled(AI,AL,false,0,AN.modix);});});return AH;}function AE(AL,AH){var AK=AL.GMController,AI=AK.getForbiddenShapeForMetric(AH),AJ=[];[{text:mstrmojo.desc(12097,"Bar"),value:AD.BAR},{text:mstrmojo.desc(2059,"Line"),value:AD.LINE},{text:mstrmojo.desc(9738,"Area"),value:AD.AREA},{text:mstrmojo.desc(12100,"Circle"),value:AD.CIRCLE},{text:mstrmojo.desc(12101,"Square"),value:AD.SQUARE},{text:mstrmojo.desc(12102,"Tick"),value:AD.TICK}].forEach(function(AM){if(AI.indexOf(AM.value)<0){AJ.push(AM);}});return AJ;}function q(AI,AH){return function(AK,AJ){if(AK!==AJ){AH({ctxt:{sp:AK,mid:AI}});}};}function AF(AK){var AI=AK.options,AH=this.getMenuHandler("changeShape"),AJ=new mstrmojo.ui.menus.MenuConfig();AJ.addRadioMenuGroup(AK.currValue,q(AK.metricId,AH),AI,"checkMark",undefined,true);return AJ;}mstrmojo.gm.GMUtility=mstrmojo.provide("mstrmojo.gm.GMUtility",{mTimers:[],mUseTimer:true,timerId:0,startTimer:function Q(AI){if(this.mUseTimer){var AH=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:AH,desc:AI.functionName+": "+AI.purpose});return AH;}},endTimer:function F(AH){if(this.mUseTimer){var AL,AK=this.mTimers;if(AH===undefined){AL=AK.pop();}else{var AJ,AI;for(AJ=0;AJ<AK.length;AJ++){AI=AK[AJ];if(AI.timerId===AH){AL=AI;AK.splice(AJ,1);AJ--;}}}if(AL){G.visPrint("%c"+AL.desc+": "+(new Date()-AL.timeStamp)+"ms","color: blue");}}},computeTicksForPercentchart:function(AI,AH,AJ){return B(AI,AH,false,AJ);},computeTicksForFlexMinMax:function(AI,AH,AJ,AK){return B(AI,AH,AJ,AK);},formatNumber:function(AJ,AI,AH){return AA(AJ,AI,AH===undefined?3:AH);},sizeCalculator:{sum:function(AH,AL,AM){var AJ,AI=0,AK=0;if(AM===undefined){AM=AH.length;}AL=AL||1;for(AJ=0;AJ<AM;AJ++){if(AH[AJ]>0){AK+=AH[AJ];AI+=1;}}if(AI>1){AK+=(AI-1)*AL;}return AK;},add:function(AJ,AH,AI){AI=AI||1;if(AH>0){AJ+=(AH+AI);}return AJ;},minus:function(AJ,AH,AI){if(AH>0){AJ-=(AH+AI);}return AJ;}},replaceSpecialChars:function(AH){AH=AH.replace(/&/g,"&amp;");AH=AH.replace(/</g,"&lt;");AH=AH.replace(/>/g,"&gt;");AH=AH.replace(/"/g,"&quot;");return AH;},restoreSpecialChars:function(AH){AH=AH.replace(/&nbsp;/g," ");AH=AH.replace(/&lt;/g,"<");AH=AH.replace(/&gt;/g,">");AH=AH.replace(/&quot;/g,'"');AH=AH.replace(/&amp;/g,"&");return AH;},removeExtraSpace:function(AH){return AH.replace(/ {2,}/g," ");},stringToJSON:function(AH){if(AH===undefined){return undefined;}if(typeof AH==="string"){AH=AH.replace(/'/g,'"');return JSON.parse(AH);}return AH;},everythingToString:function(AI){if(AI===undefined){return undefined;}var AH;if(typeof AI==="object"){AH=JSON.stringify(AI.jsonObj||AI);}else{AH=AI.toString();}AH=AH.replace(/"/g,"'");return AH;},compareElementObj:function(AL,AI){var AK=AL.tid.toString(),AH=AI.tid.toString(),AM=AL.eid,AJ=AI.eid;if(AK!==AH){return AK>AH?1:-1;}if(AM===AJ){return 0;}return AM>AJ?1:-1;},isEqualComb:function(AI,AH){var AM=true,AL,AK=AI.length,AJ=AH.length;if(AK!==AJ){return false;}if(AI.length>1){AI.sort(this.compareElementObj);}if(AH.length>1){AH.sort(this.compareElementObj);}for(AL=0;AL<AK;AL++){if(this.compareElementObj(AI[AL],AH[AL])!==0){AM=false;break;}}return AM;},serializeCombination:function(AI){var AH="";if(AI.length>1){AI.sort(this.compareElementObj);}p.forEach(AI,function(AJ){if(AH!==""){AH+=w;}AH+=(AJ.tid+j+AJ.eid);});return AH;},deserializeCombination:function(AI){var AJ=AI.split(w),AH=[];p.forEach(AJ,function(AN){var AK=AN.split(j);var AM=AK[0];var AL=AK[1];AH.push({tid:AM,eid:AL});});return AH;},getElementCombinationForMetric:function(AH){var AI=[];AI.push({tid:-1,eid:AH});return AI;},getResolvedFormatsObject:function(AH){return W(AH);},isDigitalArrayEqual:function(AI,AH){return l.call(this,AI,AH);},indexOf:function(AI,AK){var AJ,AH=AI.length;for(AJ=0;AJ<AH;AJ++){if(l(AI[AJ],AK)){return AJ;}}return -1;},parseAxisScaleData:function(AL){var AJ,AM,AI,AH=AL.split(","),AK=[];for(AJ=0,AM=AH.length;AJ<AM;AJ++){AI=AH[AJ].split(":");AK.push(AI);}return AK;},parseCSSColor:function(AL,AI){var AK=AL.slice(1),AH=[],AJ;if(AK.length===6){if(AI===true){AH[0]=AK[4];AH[1]=AK[5];AH[2]=AK[2];AH[3]=AK[3];AH[4]=AK[0];AH[5]=AK[1];}else{for(AJ=0;AJ<6;AJ++){AH[AJ]=AK[AJ];}}}else{if(AI===true){for(AJ=2;AJ>=0;AJ--){AH.push(AK[AJ]);AH.push(AK[AJ]);}}else{for(AJ=0;AJ<3;AJ++){AH.push(AK[AJ]);AH.push(AK[AJ]);}}}return parseInt("0x"+AH.join(""),16);},RGB_BRG_Switch:function(AI){var AK=(AI>>16)&255,AJ=(AI>>8)&255,AH=(AI>>0)&255;return(AH<<16)|(AJ<<8)|(AK<<0);},encodeColor:function(AI){if(AI===undefined||AI===null||AI==="transparent"||AI==="default"){return AI;}var AJ=false,AH={};if(AJ){if(typeof AI==="object"){AH.c1=this.RGB_BRG_Switch(f.encodeColor(AI.c1));AH.c2=this.RGB_BRG_Switch(f.encodeColor(AI.c2));AH.or=AI.or;return AH;}return this.RGB_BRG_Switch(f.encodeColor(AI));}if(typeof AI==="object"){AH.c1=f.encodeColor(AI.c1);AH.c2=f.encodeColor(AI.c2);AH.or=AI.or;return AH;}return f.encodeColor(AI);},checkEquality:function(AI,AH){if(typeof AI==="object"&&AI.c1!==undefined){if(AI.c1!==AH.c1){return false;}if(AI.c2!==AH.c2){return false;}if(AI.or!==AH.or){return false;}return true;}return AI===AH;},decodeColor:function(AI){if(AI===undefined||AI===null||AI==="transparent"||AI==="default"){return AI;}var AJ=false,AH={};if(AJ){if(typeof AI==="object"){AH.c1=f.decodeColor(this.RGB_BRG_Switch(AI.c1));AH.c2=f.decodeColor(this.RGB_BRG_Switch(AI.c2));AH.or=AI.or;return AH;}return f.decodeColor(this.RGB_BRG_Switch(AI));}if(typeof AI==="object"){AH.c1=f.decodeColor(AI.c1);AH.c2=f.decodeColor(AI.c2);AH.or=AI.or;return AH;}return f.decodeColor(AI);},getTrendLineToggleHandler:function(AH,AJ,AI){return function(){AH.switchOnOffTrendLineForMetric(AJ,AI);};},getTrendLineToggleState:function(AH,AI){return AH.queryTrendLineStatusForMetric(AI);},getEditTrendLineHandler:function(AH,AI){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AH.raiseEventCMSelection(I.TREND_LINE,AI);};},getEditRefLineHandler:function(AH,AI){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AH.raiseEventCMSelection(I.REF_LINE,AI);};},getEditAxisScaleHandler:function(AH,AI){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AH.raiseEventCMSelection(I.AXIS_SCALE,AI);};},getEditAxisOriginHandler:function(AH,AI){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AH.raiseEventCMSelection(I.AXIS_ORIGIN_DEFINE,AI);};},getEditLogScaleHandler:function(AH,AI){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AH.raiseEventCMSelection(I.LOG_SCALE,AI);};},getOptionObjArr:function(AH,AJ,AL){if(!D){D=mstrmojo.gm.GMUtility;}var AI={},AK;if(AJ!==undefined){AJ=AJ.toLowerCase();if(AJ==="x1"){AJ="x";}else{if(AJ==="y1"){AJ="y";}}}if(AH.length>1||(AL&&AH.length===1)){if(AJ==="x"){AI.opt=mstrmojo.desc(11712,"Bottom Axis");AI.key="XAxis";}else{if(AJ==="x2"){AI.opt=mstrmojo.desc(11710,"Top Axis");AI.key="X2Axis";}else{if(AJ==="y"){AI.opt=mstrmojo.desc(11715,"Left Axis");AI.key="YAxis";}else{if(AJ==="y2"){AI.opt=mstrmojo.desc(11713,"Right Axis");AI.key="Y2Axis";}else{if(AJ==="z"){AI.opt=mstrmojo.desc(12090,"SizeBy");AI.key="SizeBy";}}}}}AI.optLvl=k.AXIS;AI.mos=this.getMetricFormatFromIndexArray(AH);}else{if(AH.length===1){AK=this.getMetricFormat(AH[0]);AI.opt=AK.n;AI.mos=[AK];AI.key=AK.mId;AI.comb=D.getElementCombinationForMetric(AK.mId);AI.optLvl=k.METRIC;if(AJ==="z"){AI.sizeBy=true;}}}return AI;},filterInValidMetricIndex:function(AI){var AH=[];p.forEach(AI,function(AJ){if(AJ!==Y){AH.push(AJ);}});return AH;},fillBackgroundDiv:function(AI){var AH=document.createElement("div");AH.setAttribute("class","gm-bk-div");AH.style.backgroundColor="rgba(0,0,0,0)";AI.appendChild(AH);},getSubMenu:function(AM,AN,AL,AK){var AJ=AE(AM,AK),AH=AM.getMenuHandler("changeShape"),AI=AM.GMController.getOnTheFlyShapeForMetric(AK);if(AJ.length>1){AN.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",AM.id,AF,{currValue:AI,options:AJ,metricId:AL});}else{AN.addRadioMenuGroup(AI,q(AL,AH),AJ,"checkMark",undefined,true);}},getReferenceLineSubMenu:function(AI,AM,AN,AH){var AO=mstrmojo.gm.EnumSubtype,AL=AI.GMController.chartSubType;if(AN&&AL===AO.PERCENT){return ;}var AP=AI.id,AJ=AI.getAvailableRefLineTypes(AH)||[];if(AJ.length>0){AM.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",AP,z,{metricId:AH,options:AJ});}var AK=AI.getExistingRefLineOptions(AH)||[];if(AK.length>0){AM.addMenuItem(mstrmojo.desc(13659,"Edit Reference Line"),"xt",D.getEditRefLineHandler(AI,AH));AM.addSubMenuItem(mstrmojo.desc(13022,"Remove Reference Line"),"xt",AP,t,{metricId:AH,options:AK});}},reverseMapping:function n(AI){var AK={},AJ,AH=AI.length;for(AJ=0;AJ<AH;AJ++){AK[AI[AJ]]=AJ;}return AK;},longIntAnd:function(AI,AH){var AJ;if(AI===AH){return AI;}if(AI>c||AH>c){throw new Error("Operand exceeds valid data range.");}if(AI<Z&&AH<Z){return AI&AH;}if(AI>=Z||AH>=Z){if(AI<AH){AJ=AI;AI=AH;AH=AJ;}}var AL=Math.floor(AI/Z),AK=Math.floor(AH/Z),AN=AI-AL*Z,AM=AH-AK*Z;return(AN&AM)+(AL&AK)*Z;},longIntOr:function(AI,AH){var AJ;if(AI===AH){return AI;}if(AI<Z&&AH<Z){return AI|AH;}if(AI<AH){AJ=AI;AI=AH;AH=AJ;}AJ=this.longIntAnd(AI,AH);return AH-AJ+AI;},parseNumeric:function(AH){return +AH||parseFloat(AH);},fillTextInDiv:function(AH,AQ,AS,AI,AT,AJ,AV,AL,AO){if(AI===undefined){AI=AH.offsetWidth;}if(AT===undefined){AT=AH.offsetHeight;}if(AL===undefined){AL=U.MIDDLE;}if(AO===undefined){AO=r.MIDDLE;}if(AJ===undefined){AJ=false;}var AP,AR,AN,AU=AJ?"gm-text-body":"gm-text-body-nowrap",AK=false,AM;AP=G.measureTextWidth(AS,AV,6);AM=G.measureTextWidth("...",AV,6);if(AP>AI&&AM>AI){return ;}AN=document.createElement("div");AN.setAttribute("class",AU);AN.setAttribute("type",AB.GM_TEXT_BODY);AN.identity=AQ;G.applyStyles2DomNode(AN,AV);AN.innerHTML=AS;AH.appendChild(AN);if(AJ){if(AP>AI){AR=AN.offsetHeight;}else{AR=G.measureTextHeight(AS,AV,4);}}else{AR=G.measureTextHeight(AS,AV,4);AK=AP>AI;}AP=Math.min(AP,AI);AN.style.width=AP+"px";if(AJ){AK=AN.scrollWidth>AP||AN.scrollHeight>AR;}if(AK){AN.setAttribute("title",AS);}else{AN.setAttribute("title","");}switch(AL){case U.LEFT:AN.style.left="0px";AN.style.textAlign="left";break;case U.MIDDLE:AN.style.left=((AI-AP)>>1)+"px";break;case U.RIGHT:AN.style.right="0px";AN.style.textAlign="right";break;}switch(AO){case r.TOP:AN.style.top="0px";break;case r.MIDDLE:AN.style.top=((AT-AR)>>1)+"px";break;case r.BOTTOM:AN.style.bottom="0px";break;}},updateTextColorAndAlignment:function(AH,AJ,AK){var AL=AH.firstChild,AM=AL.style,AI=AH.clientWidth,AN=AL.clientWidth,AP=AH.clientHeight,AO=AL.clientHeight;AM.left="auto";AM.right="auto";switch(AJ){case U.LEFT:AM.left="0px";break;case U.MIDDLE:AM.left=((AI-AN)>>1)+"px";break;case U.RIGHT:AM.right="0px";break;}AM.top="auto";AM.bottom="auto";switch(AK){case r.TOP:AM.top="0px";break;case r.MIDDLE:AM.top=((AP-AO)>>1)+"px";break;case r.BOTTOM:AM.bottom="0px";break;}},toggleDisplay:function(AI,AH){if(!AI){return ;}if(AH){AI.style.display="block";}else{AI.style.display="none";}},isTrendLineAvailableForMetric:function(AL,AM,AP){var AW=false,AT=mstrmojo.gm.EnumSubtype,AO=o.gm.EnumShape,AU=AL.GMController,AQ=AU.chartSubType,AV=AL.model.data.dz,AJ=AV.XAxis,AH=AV.YAxis,AK=AV.BreakBy,AN=AV.SliceBy,AR=AP,AI=AU.getChartInfo(),AS=AU.getBreakByAttrsID().length>0||(AI.isABL&&((AJ.MetricNames!==undefined)||(AH.MetricNames!==undefined)||(AK.MetricNames!==undefined)||(AN.MetricNames!==undefined)));if(AR===undefined){AR=AU.getOnTheFlyShapeForMetric(AM);}if(AI.isABL&&AQ===AT.PERCENT){AW=true;}if(AS&&!AI.isBubbleOrScatter&&(AR===AO.BAR||AQ===AT.STACKED||(AQ===AT.AUTO&&AR===AO.AREA))){AW=true;}if(AI.isABL){if(AJ.TemplateUnit&&AJ.TemplateUnit.length>1){AW=true;}if(AH.TemplateUnit&&AH.TemplateUnit.length>1){AW=true;}if(AJ.TemplateUnit===undefined&&AH.TemplateUnit===undefined){AW=true;}}AW=AW||this.isIgnoredMetric(AL,AM);return !AW;},isTrendLineAvailableForAnyMetric:function(AJ){var AI=AJ.model.data.gsi.mx,AH;for(AH in AI){if(this.isTrendLineAvailableForMetric(AJ,AH)){return true;}}return false;},isIgnoredMetric:function(AK,AI){var AJ=AK.GMController,AL,AH;if(AJ.bubbleSeriesNum!==undefined){AL=AJ.getMetricsOnYAxis();AH=AL.indexOf(AI);if(AH>=AJ.bubbleSeriesNum){return true;}AL=AJ.getMetricsOnXAxis();AH=AL.indexOf(AI);if(AH>=AJ.bubbleSeriesNum){return true;}}return false;},getAxisMetricsInfo:function(AM){var AH=AM.model.data.dz,AN=AM.model.data.gsi.mx,AI,AJ,AL=[];if(!AH||!AH.ColorBy||!AN){return AN;}var AK=function(AO){return(AO&&AO.TemplateMetric)||[];};AI=AK(AH.YAxis).concat(AK(AH.XAxis));p.forEach(AN,function(AO){AJ=false;p.forEach(AI,function(AP){if(AO.did===AP.id){AJ=true;return false;}});if(AJ){AL.push(AO);}});return AL;},isInvalidTemplate:function N(AK){if(AK.eg){return false;}var AI=AK.gts;var AH=AI.row.length===0&&AI.col.length===0;p.forEach(AI.row,function(AN){if(AN.otp===-1){AH=true;}});var AM=AI.col;if(AM.length>0){var AJ,AL=AM.length-1;for(AJ=0;AJ<AL;AJ++){if(AM[AJ].otp===-1){AH=true;}}}return AH;},isNoData:function(AH){return AH.eg!==undefined;},getInvalidTemplateErrMsg:function(AH){return AH||mstrmojo.desc(12094,"The Graph Matrix requires:")+"\n"+mstrmojo.desc(12095,"- at least one attribute to be placed on the row or column axis")+"\n"+mstrmojo.desc(12096,"- all metrics to be placed on the column axis, below any attributes");},initColorPickerBtnWithGradientDir:function(AI,AJ){mstrmojo.func.override({showPickerForCurrentMode:function AH(){this._super();if(this.pickerMode===2&&typeof this.color!=="object"){var AK=this.gradientOrientation,AL=AJ.getChartInfo().dirc===mstrmojo.gm.EnumABLDirection.VERTICAL;AK.set("selectedIndex",p.find(AK.items,"id",AL?0:1));}}},AI.colorPicker);},generateToolTipContent:function(AQ,AL,AH,AM,AO,AN,AT){var AK,AI,AJ,AP,AR,AS;for(AK=AQ;AK<AL;AK++){AI=AM[AK];AP=AO[AK];if(AK>AQ){AJ=AM[AK-1];AR=AO[AK-1];if(AI.id===AJ.id){if(AP===""){continue;}if(AI.fid===AJ.fid&&AP.idx===AR.idx){continue;}if(AI.n===""){AN[AN.length-1].v+=L+AP.n;continue;}}}if(AT){AN.push({n:AI.n,tid:AI.id,v:AP.n});}else{AS=AH===undefined?AI.isRowAttribute:AH;AN.push({n:AI.n,tid:AI.id,v:AP.n,eid:AP.id,tp:AI.otp,axis:AS?1:2,tui:AI.tui,ui:AI.tui,dpt:AI.tui+1,at:AP.at,isRowAttribute:AS,dei:AP.dei,o:AP.o});}}},getAttributeFormCnt:function(AH){var AI;if((AH.fcnt===undefined||AH.fcnt===null)&&AH.fs){AH.fcnt=AH.fs.length||1;}if(AH.fcnt!==undefined&&AH.fcnt!==null){AI=AH.fcnt;}else{if(AH.t===47){AI=1;}else{AI=AH.cs!==undefined?AH.cs:AH.rs;}}return AI;},isTrueForBoolValue:function(AH){return AH===true||AH==="true";},computeTicksForAxis:function(AK,AI){var AJ=AK.mOptions,AL,AH={mTicks:[]};if(AI){AL=P.copy(AJ);P.copy(AI,AL);}else{AL=AJ;}if(AK.mIsPercent){S.call(AK,AH,AL);return AH;}if(AL.mUseLogarithmicScale){O.call(AK,AH,AL);return AH;}if(AK.mGraphMajorType===b.GMT_BUBBLE&&AK.mTripleId.mObjectId===x.DssGraphZBody){AH.mMinTick=AL.mUseMinValue?AL.mAxisMinValue:AK.mMinimum;AH.mMaxTick=AL.mUseMaxValue?AL.mAxisMaxValue:AK.mMaximum;if(AK.mMinTick>=AK.mMaxTick){AH.mMaxTick=AH.mMinTick+1;}return AH;}if(!AL.mUseMaxValue&&!AL.mUseMinValue){s.call(AK,AH,AL);}else{if(AL.mUseMaxValue&&AL.mUseMinValue){C.call(AK,AH,AL);}else{if(AL.mUseMaxValue){E.call(AK,AH,AL);}else{h.call(AK,AH,AL);}}}return AH;},computeTicksForLogScale:function(AJ){var AI=AJ.mOptions,AH={mTicks:[]};O.call(AJ,AH,AI);return AH;},destroyDisposable:function(AH,AI){if(AI){p.removeItem(AH.disposables,AI);AI.destroy();}},handleDestroy:function(AK,AJ){if(!AK){return ;}var AL,AI=0,AH=AK.disposables,AM=(AH&&AH.length)||0;while(AI<AM){AL=AH[AI];if(!AL.scriptClass||AJ.indexOf(AL.scriptClass)<0){this.destroyDisposable(AK,AL);}if(AH.length<AM){AM=AH.length;}else{AI++;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.gm.DndTooltip","mstrmojo.VisUtility","mstrmojo.vi.models.EnumDragSources");var N=mstrmojo,I=N.dom,K=N.VisUtility,C=N.vi.models.EnumDragSources,J=N.array;mstrmojo.gm._SupportDndAsBlackBox=mstrmojo.provide("mstrmojo.gm._SupportDndAsBlackBox",{_mixinName:"mstrmojo.gm._SupportDndAsBlackBox",mainContainerNode:"domNode",handleDndForParentNode:true,dndAsBlackBox:true,allowDrop:function H(R){var S=R.src.data,Q=S&&S.src;if(Q===C.DATASETS||Q===C.VIZ_EDITOR||Q===C.VIZ||Q===C.ALL_OBJECT_LIST){return true;}return false;},cleanUpAfterTarget:function E(Q){this._super(Q);if(this.domNode.contains(this.dndHighlightCanvas)){this.domNode.removeChild(this.dndHighlightCanvas);}delete this.dndHighlightCanvas;if(this.dndTooltip){this.dndTooltip.destroy();}delete this.dndTooltip;},ondragenter:function M(R){if(this._super){this._super(R);}var W=this.isEmpty();if(W){R.tgt.widget=this;this.raiseEvent({name:"toggleCtrlOverlay",visible:false,controls:this.getVisEmptyMsgControls()});}var V;if(!this.dndHighlightCanvas){var Q=document.createElement("canvas"),U=I.position(this.domNode),T=I.position(this[this.mainContainerNode]);this.domNode.appendChild(Q);Q.style.position="absolute";Q.style.zIndex=1000;Q.width=T.w||U.w;Q.height=T.h||U.h;Q.style.top=(T.y-U.y)+"px";Q.style.left=(T.x-U.x)+"px";this.dndHighlightCanvas=Q;}if(!this.dndTooltip){V=document.createElement("div");document.body.appendChild(V);var S={placeholder:V,contentNodeCssClass:"gm-dnd-replace-node-tooltip",boundary:document.body};this.dndTooltip=new mstrmojo.gm.DndTooltip(S);this.dndTooltip.render();this.dndTooltip.parent=this;}this.ondragover(R);},ondragover:function B(Q){if(this._super){this._super(Q);}if(this.dndAsBlackBox){this.clearHighlightDropZoneOnGraph();this.drawBlackBoxHighlight(Q);}},ondragleave:function P(Q){var R=this.isEmpty();if(R){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});}if(this._super){this._super(Q);}},ondrop:function L(R){if(this._super){this._super(R);}if(this.dndAsBlackBox){var U=this.zonesModel,T=R.src.data,Q=T.items,S=R.getCtxtDragData().src;U.addUnitsFromDataSource(Q,T.dsid,R.actions,S===C.ALL_OBJECT_LIST?R.callback:null);}},clearHighlightDropZoneOnGraph:function G(){var R=this.dndHighlightCanvas,Q=R.getContext("2d");Q.clearRect(0,0,R.width,R.height);this.dndTooltip.toggle(false);},isMetric:function O(Q){return Q&&Q.t===4;},isAttrCategory:function D(Q){return Q&&(Q.t===12||Q.t===1||Q.t===47);},singleTypeObject:function F(Q){var T=0,S=0,R=this;J.forEach(Q.src.data.items,function(U){if(R.isAttrCategory(U)){T++;}else{if(R.isMetric(U)){S++;}}});return !(T>0&&S>0);},drawBlackBoxHighlight:function A(S){var T=this.dndHighlightCanvas,a=T.getContext("2d"),X=I.position(this[this.mainContainerNode]),Q=I.position(this.domNode),R=X.w||Q.w,Z=X.h||Q.h,W=Math.min(30,0.25*R),b=Math.min(30,0.25*Z);a.save();a.beginPath();a.rect(W,b,R-2*W,Z-2*b);a.fillStyle="#bce8ff";a.globalAlpha=0.4;a.fill();a.strokeStyle="#34abeb";a.globalAlpha=1;K.drawDashLine(a,W,b,W,Z-b,2,2);K.drawDashLine(a,W,b,R-W,b,2,2);K.drawDashLine(a,R-W,b,R-W,Z-b,2,2);K.drawDashLine(a,W,Z-b,R-W,Z-b,2,2);a.restore();if(!this.singleTypeObject(S)){var U=this.dndTooltip,Y={x:S.tgt.e.x,y:S.tgt.e.y,w:0,h:0},V=S.src.widget.avatar;if(V){Y=I.position(V);}U.placementOrder=[U.PLACEMENT_ABOVE];U.popupNodeOffset=5;U.updateContent(null,Y,"Add Attributes and Metrics");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Dialog","mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.Box","mstrmojo.vi.ui.toolbars._HasToolbar","mstrmojo.vi.ui.toolbars.Toolbar","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.ui.rw._IsViewDataGrid","mstrmojo.vi.ui.rw.xtab.ViewDataXtabMenuConfig");var Y=mstrmojo.array,U=mstrmojo.hash,W=mstrmojo.dom,T=mstrmojo.Button.newWebButton,L=mstrmojo.vi.ui.DatasetUnitMenuUtils,H=4,C=3,K=10,S,N=function N(a,b){var d=b&&b.xtab;if(d){var Z=b.xtab.getCellForNode(b.td),c=Z.axis;if((c===2&&Z.hasOwnProperty("mix"))||(c===1&&Z.es)){Z.at=Z.at&24;return true;}return false;}return true;},R=function R(b,c){var a=[],d=b.getDatasetUnits(["mx","att"]),Z=c&&c.getDropZones();if(Z&&Z.zones){Z.zones.forEach(function(e){e.items.forEach(function(f){if(parseInt(f.did,10)!==-1){a.push(d[Y.find(d,"did",f.did)]);}});});}return a;},B=function(a,Z,c){var b=R(a,Z);return a.getDatasetUnits(["mx","att"],null,c).filter(function(d){return Y.find(b,"did",d.did)===-1&&!d.hide;});},G=function G(){var e=this.grid,k=this.model,j=k.getSelectedViUnit(),a=j.boxContent.model.data.datasetId,f=j.getZonesModel(),d=[],b=function(p){p.tooltip=p.n+" ("+p.ds+")";return p;},o=B(k,f,a),h=(o.filter(function(p){return p.t!==4;})).map(b),n=(o.filter(function(p){return p.t===4;})).map(b),c=function(p){var q={};(p||[]).forEach(function(s,r){if(Y.find(R(k,e.zonesModel),"did",s.did)>-1){q[r]=true;}});return q;},l=function(p){return(p||[]).filter(function(q){return !q.hide||q.usedInDropZones;});},Z=function(p){p.unshift({t:"All",formType:3,n:mstrmojo.desc(4928,"All"),tooltip:"Select All Objects"});return p;};function g(r,p){p=l(p);p=Z(p);if(p.length){var q=new mstrmojo.ui.CheckList({cssClass:"units",allIdx:0,items:p.map(function(s){s.tt=s.n+" ("+s.ds+")";s.css=L.getUnitCssClass(s);return s;}),selectedIndices:c(p)});d.push({scriptClass:"mstrmojo.vi.ui.PanelPortlet",title:r,children:[q],getSelectedItems:function(){var s=q.getSelectedItems();if(s.length>0&&s[0].t=="All"){s.shift();}return s||[];}});}}g(mstrmojo.desc(3581,"Attributes"),L.getSortedDatasetUnits(h));g(mstrmojo.desc(3582,"Metrics"),L.getSortedDatasetUnits(n));return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"mstrmojo-ui-Menu visible datasetObjects",contents:d,hostId:this.id,fnOk:function(){var t=[],AA,w,p=e.zonesModel,r=p.getDropZones().zones,y=r[1],AB=r[0],u=[],q=y.items.length+1,z=AB.items.length+1,s=R(p.docModel,p),x=R(k,f);d.forEach(function(AC){t=t.concat(AC.getSelectedItems());});AA=(t||[]).filter(function(AC){return Y.find(s,"did",AC.did)===-1;});w=(s||[]).filter(function(AC){if(AC.did==="-1"){return false;}return Y.find(t,"did",AC.did)===-1&&Y.find(x,"did",AC.did)===-1;});AA.forEach(function(AC){u.push(e.model.getAddTemplateUnitAction(AC,a,(AC.t===4?y:AB).id,AC.t===4?q++:z++));});w.forEach(function(AC){u.push(e.model.getRemoveTemplateUnitAction(AC));});e.controller.onSubmitTemplateUpdates(e,u);}});},J=function(b,c,Z){return{success:function d(f){var e=mstrmojo.insert({scriptClass:"mstrmojo.vi.ui.ViewDataDialog",grid:f,model:b,isViewFilter:c,showUnits:Z});e.set("visible",true);e.render();},failure:function a(e){throw {message:"Couldn't open view data dialog <br>("+(e.message||"")+")",name:"Something went wrong"};}};},D=function(Z){return mstrApp.rootCtrl.docCtrl.view.builder.getLayoutVIMap(Z.getCurrentLayoutKey()).getComponent(5).selectedKey;},A,Q=function Q(Z){if(Z&&mstrmojo.dom.isMetaKey(null,Z)&&Z.keyCode===65&&A){A.selectAll();return false;}return true;},I=function I(Z){var a=mstrApp.isSingleTier;if(a||!!mstrApp.features["web-export-to-excel-privilege"]){Z.push({n:mstrmojo.desc(3958,"Excel"),v:H});}if(a||!!mstrApp.features["web-export-to-pdf-privilege"]){Z.push({n:mstrmojo.desc(1877,"PDF"),v:C});}if(a||!!mstrApp.features["web-export-to-csv-privilege"]){Z.push({n:mstrmojo.desc(11807,"Data"),v:K});}};mstrmojo.vi.ui.ViewDataDialog=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.vi.ui.toolbars._HasToolbar],{scriptClass:"mstrmojo.vi.ui.ViewDataDialog",title:mstrmojo.desc(11476,"Show Data"),help:"show_data_dialog_box_for_html5_dashboards.htm",cssClass:"mstrmojo-ViewDataDialog",modal:true,visible:false,btnAlignment:"right",init:function V(c){var b=c.grid,d=this,Z,a=[];if(!b.openPopup){b.requiresCls(["mstrmojo._HasPopup"]);}this.grid=b;b.viewDataDialog=this;A=b;Z=b.openPopup;b.openPopup=function(){if(N.apply(b,arguments)&&Z){Z.apply(b,arguments);}};b.model.canShowCellMenu=function(e){var f=b.model.getCellDataUnion(e);return !!e&&(f.length===0||(f.length===1&&!f[0].eid));};this.set("buttons",[T(mstrmojo.desc(2177,"Close"),function(){d.close();})]);I.call(this,a);c.children=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:[{scriptClass:"mstrmojo.vi.ui.toolbars.Toolbar",alias:"toolbar",useRichTooltip:true,visible:c.showUnits},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-export-type",alias:"exportType",value:mstrmojo.desc(13287,"Export Data"),isHostedWithin:true,items:a,visible:a.length>0,onitemSelected:function(e){this.selectedNode.innerHTML=mstrmojo.desc(121,"Export Data");d.xport(e.v);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-addGridButton mstrmojo-WebHoverButton",text:mstrmojo.desc(11893,"Add as Grid"),onclick:function(){d.close(true);},bindings:{visible:function(){return mstrApp.allowWebDashboardDesign();}}},{scriptClass:"mstrmojo.Label",alias:"rowCount",cssClass:"mstrmojo-rowcount",text:""}],slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-gridBox",children:[b],slot:"containerNode"}];W.attachEvent(document.body,"keydown",Q);this._super(c);},postBuildRendering:function X(){this._super();var a=this.tools.exportType;if(a.visible){a.list.popupConfig.clear();}else{this.tools.rowCount.domNode.className+=" no-export";}var Z=document.createElement("textarea");Z.className="hiddenArea";Z.onblur=function(){Z.focus();Z.select();};this.editorNode.appendChild(Z);this.grid.hiddenField=Z;},openXtabCellMenu:function P(Z){var b=mstrApp.rootCtrl.document,a=new mstrmojo.vi.ui.rw.xtab.ViewDataXtabMenuConfig({isHostedWithin:false,position:Z.cmPos||W.position(Z.btn.domNode),hostId:this.id});a.buildXtabMenuConfig(U.copy({tabularGrid:true,hideAdvancedSort:true},Z));if(a.hasMenuItems()){Z.opener=this;b.openPopup(a.newInstance(),Z);}},closePopup:function(){var Z=mstrApp.rootCtrl.document;if(Z){Z.closePopup();}},close:function O(b){var a=this;W.detachEvent(document.body,"keyup",Q);A=null;this.model.controller.startAutoRefresh();this.model.removeViewDataGrid(this.grid,!!b,S,{failure:function Z(c){throw {name:"Something went wrong.",message:"Couldn't close view data dialog <br>("+(c.message||"")+")"};}});a.destroy();},xport:function M(a){var Z=this.model.controller;switch(a){case K:Z.exportCSV(this.grid.k);break;default:Z.exportVisualization(this.grid,a);}},updateToolbar:function F(a){var d=this,b=this.model,f=b.getSelectedViUnit(),e=f.boxContent.model.data.datasetId,Z=f.getZonesModel(),c=B(b,Z,e);a.btns.push({n:mstrmojo.desc(11780,"Add Data"),cls:"add mojo-theme-dark mstrmojo-Button mstrmojo-WebButton"+(c.length===0?" disabled":""),fn:function(h,g){if(c.length!==0){g.openMenu(G.call(d),h);}}});return a;},passToolbarCfg:function E(Z){this.tools.toolbar.set("toolbarCfg",Z);},oncontextmenu:function(Z){W.preventDefault(window,Z.e);return false;}});mstrmojo.vi.ui.ViewDataDialog.openDS=function(Z,b,a){S=Z.createViewDataGrid(Z.getDatasetUnits(["mx","att"],null,a),Z.getCurrentLayoutKey(),null,J(Z,false,false),a);};mstrmojo.vi.ui.ViewDataDialog.openDSTable=function(Z,c,a,b){S=Z.createViewDataGrid(Z.getDatasetUnits(["mx","att"],null,a,b),Z.getCurrentLayoutKey(),null,J(Z,false,false),a);};mstrmojo.vi.ui.ViewDataDialog.open=function(g,e){var c=g.getDocModel(),d=c.controller;if(d.autoRefReqSent){mstrApp.serverProxy.cancelRequest(d.autoRefReqId);}d.pauseAutoRefresh();g.selectVIUnit();var Z=g.boxContent,h=Z.model.data,b=Z.model,a=(Z.getSelections&&Z.getSelections())||{},f,j=function j(){S=c.createViewDataGrid(null,D(c),f,J(c,e,true),null,Z,g.getZonesModel().getDropZones());};if(e){f=b.getSelectorDataFromViewFilter(h.vfexpr)||[];f=f.concat({keepOnly:true,data:a});j();}else{j();}};}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.InteractiveUnitList","mstrmojo.vi.ui._IsDropTarget","mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.menus.EditorConfig","mstrmojo.vi.models.DropZonesModel","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.dom","mstrmojo.hash","mstrmojo.css","mstrmojo.array","mstrmojo.gm.GMEnums","mstrmojo.vi.viz.DropZoneHelper");var M=mstrmojo.dom,C=mstrmojo.css,O=mstrmojo.hash,g=mstrmojo.array,j=mstrmojo.vi.viz.EnumDSSDropZones,R=mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION,z=R.ABOVE,y=R.ON,N=R.BELOW,AA=mstrmojo.vi.models.EnumDragSources,AD="is-mh",V="icon",A="zone",H="form",Q=mstrmojo.vi.viz.EnumDSSDropZones,q=Q.XAxis,T=Q.YAxis,b=Q.ColorBy,s="mstrmojo-VIVizEditor-Menu",K=mstrmojo.gm.DualAxisSubAxisBit,S=K.SECONDARY,Z=mstrmojo.vi.viz.DropZoneHelper.isMetricNames;var P={};P[z]="Top";P[y]="";P[N]="Bottom";var f='<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}"><div class="outer-wrap"><div unselectable="on" class="inner-wrap"><span unselectable="on" class="txt">{@en@n}</span><div class="'+V+'"></div><div class="'+A+'"></div></div></div></{@tag}>';var c=[];function n(AF){var AE=function(AG){O.keyarray(P).forEach(function(AH){C.removeClass(AG,"dragIn"+P[AH]);});};c.forEach(AE);c=[];AE(AF);}function l(AH,AK,AF){var AJ=AH.y,AE=AH.h*this.zonesModel.getTargetEdgePortion(AF),AG=M.getMousePosition(AK).y,AI=y;if((AG>=AJ)&&(AG<AJ+AE)){AI=z;}else{if(AG>=AJ+AH.h-AE){AI=N;}}return AI;}function a(AG,AE){if(!Z(AG)){var AF={zone:this.zonesSource,item:AG};if(this.zonesModel.hasReplaceCandidates(AF)){var AH=this.zonesModel.getReplaceSubMenu(AF,{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11703,"Replace with:"),cssClass:"mstrmojo-menu-replaceLabel"});AH.position=AE;AH.isHostedWithin=false;AH.hostId=this.id;this.openPopup(AH.newInstance());}}}function x(AH,AE){var AG=this.zonesSource.id;if(AG===j.Latitude||AG===j.Longitude){var AF={zone:this.zonesSource,item:AH};if(this.zonesModel.getSelectGeoFormMenu){var AI=this.zonesModel.getSelectGeoFormMenu(AF);if(AI){AI.position=AE;AI.isHostedWithin=false;AI.hostId=this.id;this.openPopup(AI.newInstance());}}}}function w(AG,AK,AF,AJ){if(M.contains(this.itemsContainerNode,AJ,true,this.domNode)){var AE=AF.tgtData.item,AH=(this.items||[]).length-1,AI=l.call(this,AG,AK,AF);if(AE){AH=AE._renderIdx;}else{AI=AH>=0?N:z;}return{item:AF.getCtxtDragData().item,edge:AI,idx:Math.max(AH,0)};}return null;}function AB(){mstrmojo.all[this.panelId].set("activeZoneId",this.id);}function G(){var AE=mstrmojo.all[this.panelId].activeZoneId;return !AE||(AE===this.id);}function u(AG,AE,AF){var AI=new mstrmojo.ui.menus.MenuConfig({menuCssClass:s}),AH=this.getLabelNode(AG);AF.call(this,AI,AH);if(AI.hasMenuItems()){AI.position=AE;AI.isHostedWithin=false;AI.hostId=this.id;this.openPopup(AI.newInstance());}}mstrmojo.vi.ui.VisualizationEditorUnitList=mstrmojo.declare(mstrmojo.vi.ui.InteractiveUnitList,[mstrmojo.vi.ui._IsDropTarget],{scriptClass:"mstrmojo.vi.ui.VisualizationEditorUnitList",zonesModel:null,zonesSource:null,multiSelect:true,useListModKeys:true,useRichTooltip:true,getItemTooltip:function(AF,AH,AG){var AE=M.position(AG);if(AG===this.getIconNode(AH)&&!Z(AF)){return{areaId:AF._renderIdx+"icon",cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:mstrmojo.desc(11687,"Click to replace"),top:AE.y-8,left:AE.x-4};}else{if(AG===this.getZoneNode(AH)&&AF.geoWarning){return{areaId:AF._renderIdx+"zone",cssClass:"vi-regular vi-tooltip-A",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:mstrmojo.desc(14113,"Select an attribute form as geographic role"),top:AE.y+28,left:AE.x-4};}}return this._super(AF,AH,AG);},doItemSelect:function(AG,AF){var AE=AF.hWin,AH=AF.e;if(G.call(this)||(!M.shiftKey(AE,AH)&&!M.isMetaKey(AE,AH))){AB.call(this);this._super(AG,AF);}},isDragValid:function W(AE){var AF=AE.src.e;return !(!G.call(this)&&(AF.ctrlKey||AF.shiftKey||AF.metaKey))||this._super(AE)||false;},ondragstart:function r(AE){this.selectDragNode(AE);this._super(AE);},onItemContextMenu:function U(AN,AM){var AJ=AM.e,AF=this.getItemNodeFromTarget(AM.getTarget()),AH=AM.hWin,AG=this.getSelectedItems().some(function(AO){return AO.itemNode===AF;});if(AN&&!AG){this.doItemSelect(AN,AM);}var AK=AM.getTarget(),AL=this.getSelectedItems();if(AL.length){this.closePopup();var AI=AL&&AL.length>1,AE=AI?"showMultiSelectionMenu":"showItemMenu";this[AE](AI?AL:AN,this.getItemNodeFromTarget(AK),M.getMousePosition(AJ,AH));return true;}},showItemMenu:function I(AG,AF,AE){u.call(this,AF,AE,function(AH,AI){this.zonesModel.getUnitMenuItems(AH,this.zonesSource,AG,AI);});},showMultiSelectionMenu:function X(AF,AG,AE){u.call(this,AG,AE,function(AH){this.zonesModel.getMultiUnitsMenuItems(AH,this.zonesSource,AF,null);});},deleteItem:function F(AE){this.zonesModel.deleteItem(this.zonesSource,AE._renderIdx);},deleteItems:function E(AE){this.zonesModel.deleteItems(this.zonesSource,AE);},getItemProps:function h(AG,AE){var AF=this._super(AG,AE);AF.n=AF.n||"&nbsp; ";if(AG.t===4&&Z(AG)){AF.addCls(AD);AF.n=mstrmojo.desc(11808,"Metric Names");}var AH=AG.zone;if(!this.zonesModel||this.zonesModel.shouldMetricNameShowIcon(AG,AG.zone)){if(AH!==undefined){AH="icz"+AH;if(AG.ax===S){AH+="s";}AF.addCls(AH);}}if(AG.hidden){AF.addCls("hidden");}if(AG.attn&&AG.fnm){AF.attn=AG.attn;AF.fnm=AG.fnm;}if(AG.geoWarning){AF.addCls(AG.geoWarning);}return AF;},getItemMarkup:function J(AE){if(AE&&AE.attn&&AE.fnm){return f.replace("{@en@n}",'{@en@attn}@<span unselectable="on" class="'+H+'">{@en@fnm}</span>');}return f;},getDragData:function k(AE){this.selectDragNode(AE);var AG=this._super(AE),AF=this;AG.itemIdx=AE.src.node.getAttribute("idx");AG.item=this.items[AG.itemIdx];if(AG.items===undefined){AG.items=[];}if(g.find(AG.items,"did",AG.item.did)===-1){AG.items.push(AG.item);}AG.src=AA.VIZ_EDITOR;AG.srcZoneId=this.zonesSource.id;AG.onRemove=function(AH){if(AH.length>1){AF.deleteItems(AH);}else{AF.deleteItem(AH);}};AG.allowDropOnTarget=function(AJ,AI){var AH=true;if(this.allowDropOnTarget){AH&=this.allowDropOnTarget(AI,AJ);}return AH;}.bind(AF.zonesModel,AG);return AG;},createAvatar:function Y(AG,AF){var AE=this._super(AG,AF);Array.prototype.slice.call((AE&&AE.childNodes)||[]).forEach(function(AH){C.removeClass(AH,mstrmojo.vi.ui.InteractiveUnitList.CLS_HAS_X);C.addClass(AH,mstrApp.rootCtrl.view.themeClassName);},this);return AE;},getIconNode:function AC(AF){var AE=AF.firstElementChild.firstElementChild.childNodes;return AE&&AE[1];},getZoneNode:function L(AF){var AE=AF.firstElementChild.firstElementChild.childNodes;return AE&&AE[2];},ondragover:function e(AH){var AT=this,AQ=AH.tgt,AG=AT.getItemNodeFromTarget(AQ.node)||AQ.node,AI=AH.tgtData,AK=AI&&AI.node,AJ=AQ.widget&&AQ.widget.items;if(!AI||AK!==AG){AI=AH.tgtData={item:AT.zonesSource.items[parseInt(AG.getAttribute("idx"),10)],node:AG,pos:M.position(AG,true)};if(AK){n(AK);}}n(AG);var AF=w.call(this,AI.pos,AQ.e,AH,AG),AM=AF&&AF.edge,AL=this.getContextDragData(AH),AP=this.zonesModel,AR=this.zonesSource,AS=AF&&O.copy(AF,AP.getAllowDropInfo(AR,AL.items,AF.idx,AF.edge,AH));if(AS&&AS.allowedItems.length){var AU=this.itemsContainerNode,AN=Array.prototype.slice.apply(AU.childNodes);if(!AN.length||AN.every(function(AV){return(AV.className||"").indexOf("hidden")>-1;})){C.addClass(AU,"dragIn");this.raiseHLToggle(true);}else{AP.getHighlightTargets(AR,AS).forEach(function(AW){var AV=AN[AW.idx];c.push(AV);C.addClass(AV,"dragIn"+P[AW.edge]);});this.raiseHLToggle(true);}if(AL.setAvatarClass){var AE=AL.src,AO="";if(AE===AA.DATASETS||AE===AA.ALL_OBJECT_LIST){AO=AM===y?"replace":"add";g.forEach(AJ,function(AV){if(AV.zone===b){var AW=0,AX=0;g.forEach(AL.items,function(AY){if(AP.isMetric(AY)){AW++;}else{if(AP.isAttrCategory(AY)){AX++;}}});if(!(AW&&AX)&&(AP.differInType(AV,AL.item)||AP.isMetric(AL.item))){AO="replace";}}if((AV.zone===q||AV.zone===T)&&AP.differInType(AV,AL.item)){AO="replace";}});}else{if(AE===AA.VIZ_EDITOR||AE===AA.VIZ){AO=(AM===z||AM===N||AQ.node===AU)?"move":(AM===y?"replace":"");}}AL.setAvatarClass(AO);}}else{if(AL.setInvalidAvatarClass){AL.setInvalidAvatarClass();}}},getDropAvatarIcon:function B(AG){var AH=AG.getCtxtDragData(),AE=AH.src,AF=this.zonesSource.getDropIconCls(AH);if(AE===AA.DATASETS||AE===AA.ALL_OBJECT_LIST){AF="add";}return AF;},ondrop:function d(AF){this.ondragover(AF);var AM=AF.tgt,AJ=AF.src&&AF.src.data,AG=AJ&&AJ.src,AE=w.call(this,AF.tgtData.pos,AM.e,AF,this.getItemNodeFromTarget(AM.node)||AM.node),AL=this.zonesModel,AN=this.zonesSource,AO=AE&&O.copy(AE,AL.getAllowDropInfo(AN,AF.getCtxtDragData().items,AE.idx,AE.edge,AF));if(AO&&AO.allowedItems.length){AL.getHost().model.addEditNodeForDatasetAction(AF,AL.getHost().k);var AH=function(){AL.unitsDropped(AN,AF,AO);};if(AG===AA.ALL_OBJECT_LIST){var AK=AF.src.widget,AI=AK&&AK.dataProvider;if(AI){AI.loadObjects(AO.allowedItems,{success:AH},true);}}else{AH();}}this._super(AF);},allowDrop:function D(AF){var AG=AF.getCtxtDragData(),AE=AG.src;if(AE===AA.DATASETS||AE===AA.VIZ_EDITOR||AE===AA.ALL_OBJECT_LIST||AE===AA.VIZ){return this.zonesModel.isZoneDropAllowed(this.zonesSource,AG);}return false;},onclick:function o(AE){var AG=AE.target||M.eventTarget(AE.hWin,AE.e),AF=this.getItemFromTarget(AG);if(AF!==undefined){switch(AG.className){case V:M.preventDefault(window,AE.e);AG=AE.getTarget();AF=this.getItemFromTarget(AG);if(AF){AE.cancel();this.closePopup();a.call(this,AF,M.getMousePosition(AE.e,AE.hWin));}break;case A:case H:M.preventDefault(window,AE.e);AG=AE.getTarget();AF=this.getItemFromTarget(AG);if(AF&&(AF.geoWarning||(AF.attn&&AF.fnm))){AE.cancel();this.closePopup();x.call(this,AF,M.getMousePosition(AE.e,AE.hWin));break;}default:this._super(AE);}}},cleanUpAfterTarget:function p(AE){var AF=AE.tgtData;if(AF){n(AF.node);this.raiseHLToggle(false);}this._super(AE);},raiseHLToggle:function t(AF){var AE;this.parent.parent.parent.model.raiseEvent(O.copy({name:"viVizEditorDrag",isIn:AF,id:this.parent.parent.parent.viPanelType},AE));}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.VisualizationEditorUnitList");mstrmojo.gm.DndItemRenderer=mstrmojo.declare(mstrmojo.vi.ui.VisualizationEditorUnitList,null,{scriptClass:"mstrmojo.gm.DndItemRenderer",renderItem:function A(E,B){var F=this.itemRenderer,C=F&&F.render,D=document.createElement("div");D.innerHTML=C(E,B,this);return D.firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.func","mstrmojo.hash","mstrmojo.ToolSeparator","mstrmojo.CheckBox","mstrmojo.Label","mstrmojo.Dialog","mstrmojo.Button","mstrmojo.ui.menus.MenuConfig","mstrmojo.vi.models.VIComponentMap","mstrmojo.vi.ui.VizBoxTitleBar","mstrmojo.vi.ui.ViewDataDialog","mstrmojo.vi.ui.rw.UnitContainer","mstrmojo.vi.ui.editors.VisAsFilterDialog","mstrmojo.vi.ui.VizGalleryList","mstrmojo.EnumRWUnitType","mstrmojo.vi.viz.KnownVisualizations","mstrmojo.vi.viz.EnumWidgetTypes","mstrmojo.vi.models.EnumDragSources");mstrmojo.requiresDescs(14389,9126);var C=mstrmojo.css,Q=mstrmojo.dom,AI=mstrmojo.func,S=mstrmojo.hash,z=mstrmojo.EnumRWUnitType,e=mstrmojo.vi.viz.KnownVisualizations,AL=mstrmojo.vi.viz.EnumWidgetTypes,W=AL.GRID,AB=mstrmojo.vi.models.EnumDragSources,AQ="px",A=0,h=2,P=mstrmojo.vi.models.VIComponentMap.TYPES,T=mstrmojo.vi.viz.EnumVisualizationTemplates;var k=mstrmojo;var D="vf-active",AR="hidden",AP="hasViewFilter";var U=true;var c=3,o=4;var AF="web-export-to-pdf-privilege",p="web-export-to-excel-privilege",I="web-export-to-csv-privilege";var L=4;var E={n:mstrmojo.desc(4541,"Maximize"),cls:"max",fn:function f(){this.parent.setPortalState(this,h);this.isMaxed=true;},ctxt:null,dsbld:false};var AJ={n:mstrmojo.desc(4540,"Restore"),cls:"rt",fn:function f(){this.parent.setPortalState(this,A);delete this.isMaxed;},ctxt:null,dsbld:false};function Y(AS){mstrApp.onerror(AS);}function y(AU){var AT=this.model,AX=this,AS=[{n:mstrmojo.desc(11670,"Copy to"),toLayoutTitle:mstrmojo.desc(13933,"Copy to #"),toNewLayoutTitle:mstrmojo.desc(13934,"Copy to a New Sheet"),crossLayoutMessage:mstrmojo.desc(12137,"Copying will clear all filters from the new visualization. Do you want to continue?"),cls:"",fn:function AW(AY,Aa,Ab,AZ){AT.copyVisualization(AY,Aa,Ab,AZ);}},{n:mstrmojo.desc(10461,"Move to"),toLayoutTitle:mstrmojo.desc(13935,"Move to #"),toNewLayoutTitle:mstrmojo.desc(13936,"Move to a New Sheet"),crossLayoutMessage:mstrmojo.desc(13937,"Moving will clear all filters from the new visualization. Do you want to continue?"),cls:"",fn:function AW(AY,Aa,Ab,AZ){AT.moveVisualization(AY,Aa,Ab,AZ);}}],AV=function AV(Aa,AZ,AY){return function(){mstrmojo.warn(AZ,{confirmBtn:{fn:AY}},{title:Aa});};};AS.forEach(function(AY){AU.addPopupMenuItem(AY.n,null,function(){var Ae=AY.fn,Aa=new mstrmojo.ui.menus.MenuConfig(),Ab=AX.boxContent.builder.getLayoutVIMap(AT.getCurrentLayoutKey()).getComponent(P.VIZ_CONTENT),AZ=AT.getCurrentLayoutKey(),Ac=Ab.panels.filter(function(Af){return Af.k!==Ab.selectedKey;}),Ad=AT.defn.layouts.filter(function(Af){return Af.k!==AZ;});Ac.forEach(function(Af){var Ag=Af.k;Aa.addMenuItem(Af.titleText,"",function(){Ae(AX,Ab,Ag,AZ);});});Aa.addMenuItem(mstrmojo.desc(11671,"New Panel"),"",function(){Ae(AX,Ab,null,AZ);});Aa.addSeparator();Ad.forEach(function(Af){Aa.addMenuItem(Af.title,"",AV(AY.toLayoutTitle.replace("#",Af.title),AY.crossLayoutMessage,function(){Ae(AX,Ab,null,Af.k);}));});Aa.addMenuItem(mstrmojo.desc(11672,"New Sheet"),"",AV(AY.toNewLayoutTitle,AY.crossLayoutMessage,function(){Ae(AX,Ab,null,null);}));return Aa;},AY.cls);});}function H(){var Ab=this.boxContent,AV=Ab.node.data;if(!AV){return ;}var AX=Ab.model,AZ=AV.vfexpr,AY=AV.vlexpr,Aa=AX.getSelectorDataFromViewFilter(AZ),AS=this.filterBtnNode,AT;if(AY||Aa===null||Aa.length>0){var AW=Ab.controller,AU=function AU(Ac){var Ae=AI.wrapMethods(AW._getXtabCallback(Ab),{success:function Ad(){Ab.raiseEvent({name:"regenerateToolbar"});}});AW.applyKeepOnly(Ab,Ae,undefined,Ac.ctxt);};AT=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"mstrmojo-viz-fe-menu",isHostedWithin:false,useTooltip:true});AT.addMenuItem(mstrmojo.desc(1763,"Clear All"),"",AU,-1);AT.addSeparator();if(Aa===null||AY){AT.addMenuItem(AV.vftext||mstrmojo.desc(14016,"Advanced Qualification"),"",AU,-1);}else{Aa.forEach(function(Ag,Ac){var Ah=[],Af=mstrmojo.desc(2827,"Clear"),Ai="",Ae=true;Ag.data.every(function(Aj){[].concat(Aj).every(function(Ak){if(Ai===""){Ai=Ak.tn;}return(Ae=(Ai===Ak.tn));});return Ae;});Ag.data.forEach(function(Al,Aj){if(Aj>0){Ah.push(mstrmojo.desc(5283,"OR"));}var Ak=[];[].concat(Al).forEach(function(Am){Ak.push((Ae?"":(Am.tn+" = "))+(Am.v||mstrmojo.desc(14323,"NULL")));});Ah.push(Ak.join(" "));});var Ad=Ag.keepOnly?"##":mstrmojo.desc(13232,"Not ##");AT.addMenuItem(Af+' "'+Ad.replace("##",(Ae?Ai+" = ":"")+Ah.join(" "))+'"',"",AU,Ac);});}}this.filterMenuCfg=AT;r.call(this,!!AT);C.toggleClass(AS,AR,!AT);}function J(){if(this.filterMenuCfg){var AS=this._onMoveCount;if(AS===undefined||AS>=5){this._onMoveCount=0;window.clearTimeout(this._hideDNDHandler);var AT=this.filterBtnNode;C.removeClass(AT,AR);this._hideDNDHandler=window.setTimeout(function(){C.addClass(AT,AR);},2000);}else{this._onMoveCount++;}}}function AM(AS){var AV=this.model.controller.id,AU=this.boxContent,AT=AU.k;AS.addPopupMenuItem(mstrmojo.desc(246,"Export"),this.id,function(){var AX=new mstrmojo.ui.menus.MenuConfig(),AW=e.getDefinition(this.boxContent.model.data.visName||"Grid").id;if(Z(AW)){AX.addMenuItem(mstrmojo.desc(3958,"Excel"),"exportToExcel",function(){mstrmojo.all[AV].exportVisualization(AU,o);});}if(b(AW)){AX.addMenuItem(mstrmojo.desc(1877,"PDF"),"exportToPDF",function(){if(AU.isClientExport&&AU.exportVisualization){AU.exportVisualization(c);}else{mstrmojo.all[AV].exportVisualization(AU,c);}});}if(AO()){AX.addMenuItem(mstrmojo.desc(11807,"Data"),"exportToCSV",function(){mstrmojo.all[AV].exportCSV(AT);});}return AX;},"export");}function Z(AS){return(AS===e.GRID&&(!!mstrApp.features[p]||!!mstrApp.isSingleTier));}function b(AS){return([e.UNKNOWN,e.IMAGELAYOUT].indexOf(AS)===-1&&(!!mstrApp.features[AF]||!!mstrApp.isSingleTier));}function AO(){return !!mstrApp.features[I]||!!mstrApp.isSingleTier;}function AE(){var AS=e.getDefinition(this.boxContent.model.data.visName||"Grid").id;return Z(AS)||b(AS)||AO();}function l(AS){var AU=this.boxContent,AV=mstrmojo.vi.ui.VizGalleryList,AT=AV.VIZ_LIST_TYPE;AS.addPopupMenuItem(mstrmojo.desc(13165,"Change Visualization"),this.id,function(){var AY=new k.ui.menus.MenuConfig(),AX=AU.model.data.visName||"",AZ=[{n:mstrmojo.desc(114,"Grid"),id:"VisGrid",s:"",vt:T.GRID}].concat(AV.getVizList(AT.BUILT_IN_LIST+AT.CUSTOM_LIST));AZ=AZ.filter(function(Aa){return(Aa.s===""||k.ExpressVisList.getVis(Aa.s)!==null)&&Aa.s!==AX;});var AW=(AU.getDocModel&&AU.getDocModel())||AU.model.docModel;AZ.forEach(function(Aa){AY.addMenuItem(Aa.n,"",function(){AW.changeSelectedVisType(Aa.s||"",Aa.vt,Aa.wtp||W,Aa.dz);});});return AY;},"");}function AH(AS,AU){var AT=AS.getCtxtDragData();this.getZonesModel().addUnitsFromDataSource(AT.items,AT.dsid,AS.actions,AU?AS.callback:null);}function r(AS){if(this.titleBar){C.toggleClass(this.titleBar.domNode,AP,AS);}}mstrmojo.vi.ui.rw.VizBox=mstrmojo.declare(mstrmojo.vi.ui.rw.UnitContainer,[mstrmojo.vi.ui._CanDropFromSchema],{scriptClass:"mstrmojo.vi.ui.rw.VizBox",showTitleBar:true,titleBar:null,filterMenuCfg:null,filterBtnNode:null,init:function AG(AS){this._super(AS);C.addWidgetCssClass(this,"mstrmojo-VIBox");this.isMaxed=(this.defn.ds===h);},getPanelForAddAction:function u(){return"editPanel";},getExcludedPanels:function AN(){return[];},getDocModel:function AK(){var AS=this.model;return AS.docModel||AS;},getTitleBarCfg:function N(){var AS=this._super();AS.scriptClass="mstrmojo.vi.ui.VizBoxTitleBar";AS.close=function AU(){var AW=this.parent,AV=AW.parent;AV.deleteBoxAndSubmit(AW);AV.removeChildren(AW);AW.destroy();};AS.titleEdited=function AT(AW,Aa,AV){var AZ=this.parent;AZ.draggable=true;if(Aa){var AY=AZ.getDocModel();AY.renameRWUnitTitle(AW,this.title,AZ.k,{success:function Ab(Ac){AZ.defn.ttl=Ac;AZ.set("title",Ac);},failure:function AX(Ac){Y(Ac);AZ.titleBar.set("title",AV);}});}};return AS;},getTitleVisibilityFmts:function g(AT){var AS=this._super(AT);AS.FormattingView.ShowWidgetTitleBar=AT;return AS;},onclick:function t(AS){this._super(AS);this.titleBar.onclick();},switchPropertyOnClick:function s(){var AS=this.boxContent;if(!AS||!AS.supportsEditorClickSwitching){return false;}return this._super();},postBuildRendering:function V(){try{this._super();var AT=this.filterBtnNode=document.createElement("div"),AW=this.id;AT.className="hover-filter-btn "+AR;r.call(this,!!this.filterMenuCfg);Q.attachEvent(AT,"click",function(){var AY=mstrmojo.all[AW],AX=AY.filterMenuCfg;AX.hostId=AW;AX.hostElement=AT;AY.openPopup(new mstrmojo.ui.menus.Menu({popupConfig:AX}));});this.domNode.appendChild(AT);if(this.defn.ds===h){this.parent.setPortalState(this,h,true);}if(U){C.addClass(this.titleBar.leftToolbar.domNode,D);}}catch(AU){var AV=this.domNode.appendChild(document.createElement("div"));AV.className="errorNode";AV.innerText=mstrmojo.desc(11461,"There was an error rendering your visualization");this.getZonesModel=function AS(){return null;};}},doLayout:function M(){var AS=this.boxContent;if(AS){AS.skipReRender=true;}this._super();if(AS){delete AS.skipReRender;}},applyBoxSize:function d(AS,AU,AY,AX){this._super(AS,AU,AY,AX);var AW=this.boxContent,AT=AW&&AW.getFormats();if(AT){var AV=this.titleBar.visible?Q.position(this.titlebarNode).h:0;AT.height=(parseInt(AS,10)-AV)+AQ;AT.width=AU;}},updateDisplayName:function F(AS,AT){this._super(AS,AT,true);},createDeleteUpdate:function n(){var AT=this.model,AW=AT.getDataService().newUpdate(),AU=AT.clearVisAsFilterAction(this,true);if(AU){AW.addUpdate(AU);}var AV=this.boxContent.node.k;this.parent.children.forEach(function(AY){var AX=AY.defn,AZ=AX.tks;if(AZ){if((AZ||"").split("\u001E").indexOf(AV)>-1){AW.addActions(AT.getDataService().getRemoveCtrlTargetAction(AX.ck,AV,undefined,true));if(AY.defn&&AY.defn.srct&&AY.defn.srct===L){AW.setTreesToRender(3);}}}});var AS=AT.getSourceFilterKeys(AV,true);if(AS){AW.setTreesToRender(3);}AW.addUpdate(AT.getRemoveUnitUpdate({unit:this,partialRetrievalKeys:AS}));AW.addUpdate(AT.associatedNodesUpdate(this.parent.children));return AW;},generateToolbar:function q(){H.call(this);this._super();},updateToolbar:function w(AX){var AY=this,Ab=this.boxContent,AU=this.canShowDesignMenuItems(),AW=function(){AX.addMenuItem(mstrmojo.desc(11476,"Show Data"),"shwd",function(){mstrmojo.vi.ui.ViewDataDialog.open(mstrmojo.all[AY.id]);});},AZ=function(Ac,Ad){if(Ac&&Ac.length===2){AX.addDualStateItem(AY.id,Ac[0],Ac[1],Ad);}},AV=null,Aa=this.parent,AT=mstrApp.isAppStatePresentation();if(Aa&&Aa.hasMultipleChildren()){AV=[E,AJ];if(this.isMaxed){AV.reverse();}}AZ(AV,true);if(!AT&&mstrApp.allowWebDashboardDesign()){l.call(this,AX);if(Ab.getContainerMenuItems){Ab.getContainerMenuItems(AX);}AX.addSeparator();var AS=Ab.zonesModel;if(AS&&AS.canSwapAxis()){AX.addMenuItem(mstrmojo.desc(11658,"Swap"),"",function(){AS.swapAxis();});AX.addSeparator();}if(AS&&AS.canDefineSubtotals()){AX.addToggleMenuItem(mstrmojo.desc(6193,"Show Totals"),"",function(){AS.showQuickSubtotals();},function(){AS.hideDefinedSubtotals();},null,AS.hasVisibleSubtotals());AX.addSeparator();}if(Ab.handlesMultiSelection){if(Aa&&Aa.getTargetKeysByType([z.GRID,z.GRAPH,z.MOJOVISUALIZATION]).length>1){AX.addMenuItem(mstrmojo.desc(11958,"Use as Filter..."),"uaf",function(){mstrmojo.vi.ui.editors.VisAsFilterDialog.open(mstrmojo.all[AY.id]);});AX.addSeparator();}}AW();AX.addMenuItem(mstrmojo.desc(14389,"Remove Data"),"",function(){var Ac=Ab.zonesModel;Ac.clearAllDropZones(Ac.docModel.clearVisAsFilterAction(AY));});AX.addPopupMenuItem(mstrmojo.desc(12949,"Data Source"),this.id,function(){var Ah=new mstrmojo.ui.menus.MenuConfig(),Ae=AY.model,Af=Ae.datasets,Ad=AY.boxContent.model.data.datasetId||"",Ac=[];var Ag=function(Aj){var Ai=false;S.forEach(Aj,function(Al){var Ak=Al.att&&Al.att[0];if(Ak&&Ak.t===12&&Ak.st===3076){Ai=true;return false;}});return Ai;};S.forEach(Af,function(Ai,Aj){Ac.push({name:Ai.name,id:Aj});});if(!Ag(Af)){Ac.push({name:mstrmojo.desc(5949,"None"),id:""});}Ac.forEach(function(Ai){var Aj=Ai.id;Ah.addMenuItem(Ai.name,Ad===Aj?"on":"",function(){var Ak=AY.k,Al=Aj;if(Ad===Aj){return ;}Ab.zonesModel.submitActionForDatasetUpdate({act:"editNode",nodeKey:Ak,treeType:AY.defn.tt,datasetId:Al||"00000000000000000000000000000000",partialRetrieval:{nodes:[Ak]}});});});return Ah;});AX.addSeparator();if(AE.call(this)){AM.call(this,AX);}if(AU){AX.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"dup",function(){AY.model.duplicateVisualization(AY);});y.call(this,AX);}AX.addSeparator();this.addToggleTitleMenuItem(AX);}else{AW();AM.call(this,AX);}AZ(AV,false);this._super(AX);if(!AT&&mstrApp.allowWebDashboardDesign()){AX.addSeparator();AX.addMenuItem(mstrmojo.desc(9126,"More Options...")+"...","",function(){var Ac=AY.getEditorModel(),Ad=Ac.getHost().model,Af=Ad&&Ad.data,Ae=(Af&&Af.gsi&&Af.gsi.prop)||{};if(Ab instanceof mstrmojo.vi.ui.rw.Xtab){Ac.openMoreOptionsEditor(Ae,true,Af.lhv);}else{Ac.openMoreOptionsEditor(Ae);}});}return AX;},addFormatMenuItem:function j(AW,AV,AS){var AU=this.getEditorModel(),AT=AU.getFormatToTargetFn&&AU.getFormatToTargetFn();if(AT){AS=AS?AI.composite([AS,AT]):AT;}return this._super(AW,AV,AS);},getFormatMenuItemTarget:function B(AU){var AS=this.boxContent;if(AS.getFormatMenuItemTarget){var AT=AS.getFormatMenuItemTarget(AU);if(AT!==undefined){return AT;}}return this._super(AU);},getZonesModel:function O(){return this.boxContent.zonesModel;},allowDropFromDataset:function X(AS){var AT=this.boxContent;if(AT&&AT.allowBoxDropFromDataset){return AT.allowBoxDropFromDataset(AS);}return true;},dropFromDataset:function R(AS){AH.call(this,AS,false);},dropFromAllObjects:function AD(AS){this.augmentDropContextForSchema(AS,this.getZonesModel().docModel);AH.call(this,AS,true);},isDragValid:function a(AS){var AT=this.boxContent;if(AT.canOnlyDragOnTitleBar){if(!Q.contains(this.titleBar.getLabelNode(),AS.src.node,true,this.domNode)){return false;}}return this._super(AS)&&!this.isMaxed;},getAvatarCls:function x(){return this._super().concat(["viz-avi"]);},ondragenter:function G(AT){var AU=this.boxContent,AS=AT.getCtxtDragData().src;if(AU.handleDndForParentNode&&AU.ondragenter){if(AS===AB.DATASETS||AS===AB.VIZ_EDITOR||AS===AB.VIZ||AS===AB.ALL_OBJECT_LIST){AU.ondragenter(AT);return ;}}this._super(AT);},setTitleBarVisibility:function AA(AS){this._super(AS);this.titleBar.onclick();C.toggleClass(this.filterBtnNode,AR,AS||!this.filterMenuCfg);},onmouseover:function K(AS){this._super(AS);if(!mstrApp.isInteractive()){return ;}Q.attachEvent(this.domNode,"mousemove",J.bind(this));},onmouseout:function AC(AS){this._super(AS);Q.detachEvent(this.domNode,"mousemove",J.bind(this));}});mstrmojo.vi.ui.rw.VizBox.ENUM_PORTAL_STATE={RESTORE:A,MAXIMIZE:h};}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums");var C=mstrmojo.gm.EnumAxisScale,A=mstrmojo.gm.GMUtility;var B=mstrmojo.gm.GMAxisScale=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMAxisScale",axKey:undefined,rMin:undefined,rMax:undefined,mMin:undefined,mMax:undefined,logScale:false,scaleType:undefined,minMax:undefined,isCust:false,autoMin:false,autoMax:false,init:function(D){this._super(D);if(this.mMin===undefined){this.mMin=this.rMin;}if(this.mMax===undefined){this.mMax=this.rMax;}if(D.minMax!==undefined&&D.minMax!==C.CUSTOM){this.scaleType=D.minMax;}},absorbInfo:function(D){var E;if(this.axKey!==D.axKey){return ;}this.logScale=D.logScale;this.scaleType=D.scaleType;E=this.isCust=D.isCust;if(E===false){return ;}this.mMin=D.mMin;this.mMax=D.mMax;this.autoMin=D.autoMin;this.autoMax=D.autoMax;},serialize2String:function(){return[this.axKey,this.scaleType,this.mMin,this.mMax,this.rMin,this.rMax,this.logScale,this.autoMin,this.autoMax].join(":");}});mstrmojo.gm.GMAxisScale.createAxisScaleFromArr=function(D){var E={axKey:D[0],scaleType:parseInt(D[1],10),mMin:parseFloat(D[2]),mMax:parseFloat(D[3]),rMin:parseFloat(D[4]),rMax:parseFloat(D[5]),logScale:D[6]===""?undefined:A.isTrueForBoolValue(D[6]),autoMin:A.isTrueForBoolValue(D[7]),autoMax:A.isTrueForBoolValue(D[8])};E.isCust=(E.mMin!==E.rMin||E.mMax!==E.rMax)||E.scaleType===C.CUSTOM;return new B(E);};mstrmojo.gm.GMAxisScale.createAxisScaleCollectionFromArrays=function(E,D){D=D||{};E.forEach(function(F){D[F[0]]=mstrmojo.gm.GMAxisScale.createAxisScaleFromArr(F);});return D;};mstrmojo.gm.GMAxisScale.createAllMetricsAxObj=function(D){var M,I={axKey:"AllMetrics"},F=[],H=[],J,E=true,L=true,G=true;if(D.AllMetrics!==undefined){return ;}for(M in D){if(M!=="AllMetrics"&&D.hasOwnProperty(M)){J=D[M];if(I.rMin===undefined){I.rMin=J.rMin;}else{if(I.rMin>J.rMin){I.rMin=J.rMin;}}F.push(J.mMin);if(I.mMin===undefined){I.mMin=J.mMin;}else{if(I.mMin>J.mMin){I.mMin=J.mMin;}}if(I.rMax===undefined){I.rMax=J.rMax;}else{if(I.rMax<J.rMax){I.rMax=J.rMax;}}H.push(J.mMax);if(I.mMax===undefined){I.mMax=J.mMax;}else{if(I.mMax<J.mMax){I.mMax=J.mMax;}}if(I.logScale===undefined){I.logScale=J.logScale;}else{if(I.logScale!==J.logScale){E=false;}}if(I.scaleType===undefined){I.scaleType=J.scaleType;}else{if(I.scaleType!==J.scaleType){I.scaleType=C.DIFFERENT;}}if(I.autoMin===undefined){I.autoMin=J.autoMin;}else{if(I.autoMin!==J.autoMin){I.autoMin=false;L=false;}}if(I.autoMax===undefined){I.autoMax=J.autoMax;}else{if(I.autoMax!==J.autoMax){I.autoMax=false;G=false;}}}}if(!E){I.logScale=undefined;}I.isCust=(I.mMin!==I.rMin||I.mMax!==I.rMax)||I.scaleType===C.CUSTOM;if(I.scaleType===C.CUSTOM){var K=false;H.forEach(function(N){if(N!==I.mMax){K=true;}});F.forEach(function(N){if(N!==I.mMin){K=true;}});if(!L||!G){K=true;}if(K){I.scaleType=C.DIFFERENT;}}D.AllMetrics=new B(I);return D.AllMetrics;};mstrmojo.gm.GMAxisScale.serializeCollection2String=function(G){var E,F=G.AllMetrics,D=[];if(F===undefined){F=mstrmojo.gm.GMAxisScale.createAllMetricsAxObj(G);}D.push(F.serialize2String());for(E in G){if(E!=="AllMetrics"&&G.hasOwnProperty(E)){D.push(G[E].serialize2String());}}return D.join(",");};}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility","mstrmojo.Obj","mstrmojo.chart.model.enums.EnumDSSGraphRegressionType","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.chart.enums.EnumLineStyle","mstrmojo.num","mstrmojo.string");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var Z=mstrmojo,G=mstrmojo.gm,a=G.GMUtility,K=Z.VisUtility,H=Z.array,D=Z.gm.EnumGraphType,T=mstrmojo.num,C=mstrmojo.string,J=Z.chart.model.enums.EnumDSSGraphRegressionType,I=G.EnumRefLineModelType,L=G.EnumIdentityType,E=G.WidgetPropertyTag,U=G.EnumTrendRefModelLabels,M=Z.chart.model.enums.EnumDSSObjectType;var W=mstrmojo.chart,V=W.common.Utility;function F(e,c){var g=[],d=[],f,b=Math.min(e.length,c.length),h=function(k,j){return k.x>j.x?1:-1;};for(f=0;f<b;f++){d.push({x:e[f],y:c[f]});}d.sort(h);H.forEach(d,function(j){g.push(j.x);g.push(j.y);});return g;}function S(f,d){var c,e;if(this.isTrendLine===false){return undefined;}c=this.getBBSection();if(f){e=c.fl||[];}else{e=c.bl||[];}if(d){var b=[];H.forEach(e,function(g){b.push(g.join());});return b;}return e;}function P(e,b){var d=1000000000;if(e!==0&&(Math.abs(e)<0.001||Math.abs(e)>d)){return T.format(6,3,"",e);}return parseFloat(e.toFixed(b).replace(/0+$/,"")).toString();}function Q(f,c,h){var b=h,e="",g=[];H.forEach(c,function(j){if(isNaN(j)){g.push(j);}else{g.push(P(j,3));}});function d(o){var n,l="",j,r,k,q;j=o.length;for(n=j-1;n>=0;n--){r=o[n];k=parseFloat(r);q=n;if(k===0){continue;}if(l!==""){if(k>0){l+=" + ";}else{l+=" - ";k=-k;r=r.slice(1);}}if(q!==0){if(q===1){l+=r+b;}else{l+=r+b+"^("+q+")";}}else{l+=r;}}return l;}if(f==="Linear"){e=d(g);}else{if(f==="Exponential"){if(g.length<2){return g[0];}if(typeof g[1]==="string"&&g[1].slice(0,2)==="Ln"){e=g[0]+"e^("+g[1].slice(2)+b+")";}else{if(g[1]>0){e=g[1];}else{e="("+g[1]+")";}e+="^("+b+")*"+g[0];}}else{if(f==="Power"){if(g.length<2){return g[0];}e=b+"^("+g[1]+")*"+g[0];}else{if(f==="Poly"){e=d(g);}else{if(f==="Log"){if(g.length<2){return g[0];}e=g[1]+"ln("+b+")";if(g[0]!==0){if(g[0]>0){e+=" + ";e+=g[0];}else{e+=" - ";e+=(-g[0]);}}}}}}}return e;}function O(f,c,j){var b=j,d="",g=[],h=[];H.forEach(c,function(k){if(isNaN(k)){g.push(k);}else{g.push(P(k,3));}});function e(q){var o,k,t,l,s,n=[],r;k=q.length;for(o=k-1;o>=0;o--){t=q[o];l=parseFloat(t);s=o;if(l===0){continue;}r="";if(n.length){if(l>0){r+=" + ";}else{r+=" - ";l=-l;t=t.slice(1);}}if(s!==0){if(s===1){r+=t+b;n.push({v:r});}else{r+=t+b;n.push({v:r});n.push({v:"("+s+")",isSuper:true});}}else{r+=t;n.push({v:r});}}return n;}if(f==="Linear"){h=e(g);}else{if(f==="Exponential"){if(g.length<2){h.push({v:g[0]});return h;}if(typeof g[1]==="string"&&g[1].slice(0,2)==="Ln"){h.push({v:g[0]+"e"});h.push({v:"("+g[1].slice(2)+b+")",isSuper:true});}else{if(g[1]>0){h.push({v:g[1]});}else{h.push({v:"("+g[1]+")"});}h.push({v:"("+b+")",isSuper:true});h.push({v:"*"+g[0]});}}else{if(f==="Power"){if(g.length<2){h.push({v:g[0]});return h;}h.push({v:b});h.push({v:"("+g[1]+")",isSuper:true});h.push({v:"*"+g[0]});}else{if(f==="Poly"){h=e(g);}else{if(f==="Log"){if(g.length<2){h.push({v:g[0]});return h;}d=g[1]+"ln("+b+")";if(g[0]!==0){if(g[0]>0){d+=" + ";d+=g[0];}else{d+=" - ";d+=(-g[0]);}}h.push({v:d});}}}}}return h;}function N(e,c,d){var b;for(b=0;b<d;b++){e.push(c);}return e;}function X(d){var c,b=0;for(c=0;c<d.length;c++){if(d[c]!==null){b++;}}return b;}function Y(c){var b="";switch(c){case"Linear":b=mstrmojo.desc(4888,"Linear");break;case"Exponential":b=mstrmojo.desc(12022,"Exponential");break;case"Power":b=mstrmojo.desc(12023,"Power");break;case"Poly":b=mstrmojo.desc(12024,"Polynomial");break;case"Log":b=mstrmojo.desc(12021,"Logarithmic");break;}return b;}var A=mstrmojo.declare(mstrmojo.Base,null,{getTooltipContent:function(){var u,b,AI,x,q,r,AF,l,AA,AB,o,p,z,AG,g,AJ,n,s,d=this.objType,c=this.lineModel,AC=[],w="x",j=[];if(c){p=c.def;}if(d===L.TREND_LINE){AI=c.trendLineModel;x=AI.tmData;r=AI.dp;AA=r.lds.gmm;AF=AA.gmCtr;l=AF.getChartInfo();AC.push(x.mid);if(l.tp===D.BUBBLE||l.tp===D.SCATTER){z=x["x-vars"];if(z!==undefined){AC.push(AF.getMetricIndexFromID(x["x-vars"][0]));}}q=AA.getMetricNamesFromIndex(AC);j.push({n:mstrmojo.desc(14440,"Trendline of"),v:q.join(", ")});var AH=false;if(p&&this.lineModel.def.incl===1){AH=true;}if(l.isABL&&AH){var h=AF.getBreakByAttributes();var AE=[],e=[];H.forEach(h,function(f){AE.push(f.n);});if(AE.length>0){var k=this.lineModel.getBBSection();if(k){var y=k.bbes;for(AB=0;AB<AE.length;AB++){e.push(h[AB].es[y[AB]].n);}j.push({n:AE.join(", "),v:e.join(", ")});}}}j.push(null);var AD=c.getFormulas();if(AD){AD=AD[0];z=x["x-vars"];AG=x["x-types"];if(z!==undefined){if(AG[0]===M.DssTypeAttribute){g=AF.getAttributeById(z[0]);if(g&&g.n){w=g.n;}}else{if(AG[0]===M.DssTypeMetric){g=AF.getMetricIndexFromID(z[0]);if(!isNaN(g)){g=AA.getMetricNamesFromIndex([g]);if(g.length>0){w=g[0];}}}}}if(AD.coefficients){n=O.call(this,AD.type,AD.coefficients,C.encodeHtmlString(w,true));j.push({n:mstrmojo.desc(14441,"Trendline function"),v:n,noTruncate:true,isTrendLineFuncToken:true,skipEncode:true});}for(AJ in AD){if(AD.hasOwnProperty(AJ)){if(AJ.indexOf("coefficients")<0){o=isNaN(AD[AJ])?AD[AJ]:P(AD[AJ],3);if(AJ.slice(-2)==="R2"&&(o===0||o==="0")){AJ=AJ.slice(0,AJ.length-2)+"R<sup>2</sup>";s=mstrmojo.desc(6098,"N/A");}else{if(AJ==="type"){AJ=mstrmojo.desc(8733,"Type");s=Y(AD.type);}else{AJ=(AJ.slice(-2)==="R2")?AJ.slice(0,AJ.length-2)+"R<sup>2</sup>":AJ;s=a.everythingToString(o);}}j.push({n:AJ,v:s,skipEncode:true});}}}}return j;}u=c.getReferenceLineLabel(false,true);b=u.split(":");if(b.length>1){return[{n:b[0],v:b[1]}];}return[];}});var B=mstrmojo.declare(mstrmojo.Base,null,{init:function R(f){this._super(f);var d=this.trendLineModel,e=d.midx,h=d.mx,c,b,j,g;if(h&&h[e]){c=h[e].mdls;if(c){b=c.mod_c;j=d.tmData.modix;g=b[j-1];this.def=g;}}else{if(this.isTrendLine===false&&this.trendLineModel.refIsDefOnAxis){this.def=this.trendLineModel.defOnZone;}}},getSeasonalityType:function(){if(this.isTrendLine){return this.trendLineModel.dp.lds.gmm.gmCtr.firstRes.dz.sea;}return 0;},getLevel:function(){var b=this.def,c=b&&b.clientDef;if(c){if(this.isTrendLine){return c.trdLvl;}return c.refLvl;}return -1;},getLineThickness:function(){var b=this.def,c=b&&b.clientDef;if(c){return parseInt(c.trdRefLnThk,10);}return 1;},getLineColor:function(){var c=this.def,d=c&&c.clientDef,b;if(d){b=d.trdRefLnClr;if(typeof b==="string"&&b[0]==="#"){a.encodeColor(b);}return parseInt(d.trdRefLnClr,10);}return 16711680;},getLineRenderType:function(){var b=this.def,c=b&&b.clientDef;if(c){return parseInt(c.trdRefLnStyle,10);}return mstrmojo.chart.enums.EnumLineStyle.LS_DASH;},getTrendLineValuesWithForecast:function(){var f=this.getTrendLineStartingGroup(),e=this.trendLineModel.dp,c=e.getChartInfo(),k=[],g=[],j,l,b,d=false,h;j=this.getBwdData();l=this.getFwdData();if(c.tp===D.BUBBLE||c.tp===D.SCATTER){h=this.getBwdData(true);b=this.getFwdData(true);d=true;}if(j&&j.length>0){g=g.concat(j);if(d){k=k.concat(h);}}else{if(!d){N(g,undefined,f);}}g=g.concat(this.getTrendLineValues());if(d){k=k.concat(this.getTrendLineValues(true));}if(l&&l.length>0){g=g.concat(l);if(d){k=k.concat(b);}}else{if(e.fwdEnabled){if(!d){N(g,undefined,e.fwdSteps);}}}if(d){return F(k,g);}return g;},getTrendLineStartingGroup:function(){var b=this.trendLineModel.dp;if(b.bwdEnabled){return b.bwdSteps;}return 0;},getTrendLineValues:function(b){if(this.isTrendLine===false){K.visPrint("this function is only for trend line only, for reference line, call getReferenceLineValue instead");return undefined;}var g=this,l=g.seriesId,o=g.trendLineModel,n=o.tmData,j=n.trm,d=o.dp,e,c=d.innerGetGroupCount(),k,f=[],h;for(e=0;e<c;e++){k=d.innerGetGraphCell(l,e);if(b){h=k.getData(0);}else{h=k.getAssoDataWithMetricIndex(j,true);}f.push(h);}return f;},getReferenceLineLabelFont:function(){var c=this.def,b={},d=c&&c.clientDef;if(d){["rfLnFntFml","rfLnFntSz","rfLnFntStyle","rfLnFntClr"].forEach(function(e){if(e!=="rfLnFntFml"){b[e]=parseInt(d[e],10);}else{b[e]=d[e];}});return b;}return{rfLnFntFml:"Verdana",rfLnFntSz:"11pt",rfLnFntStyle:0,rfLnFntClr:0};},getReferenceLineLabel:function(y,k,AG){var AH=this,AD=false,x=this.getReferenceLineValue(),AI=AH.trendLineModel,AB=AI.midx,d,t=AI.dp,z=t.lds.gmm,b,AA,AC,h,s,g=[],l=!!this.trendLineModel.defOnZone;if(!l){b=z.getMetricNumberFormat(AB);d=z.getMetricNamesFromIndex([AB])[0];}else{if(AG){if(AG.Condense){AD=true;}else{if(AG.NumberFormat){b=AG.NumberFormat;}}}else{var q=AI.direction==="horizontal",u=true,p=t.rowIndex,AE=t.colIndex,j=q?p:AE,w=(q?"y":"x")+(u?"1":"2");b=z.gmCtr.axisFormats[w][j];AD=b==="Condensed";}}if(AD){AA=V.abbreviateNumber(x,5);}else{if(b){AA=T.formatByMask(b,x);}else{AA=x;}}var n=this.def,o=n&&n.clientDef;AC="Average";h=I.AVG;if(!!(n&&n.tp)){h=n.tp;switch(h){case I.MAX:AC=mstrmojo.desc(2125,"Maximum");break;case I.MIN:AC=mstrmojo.desc(2127,"Minimum");break;case I.AVG:AC=mstrmojo.desc(2122,"Average");break;case I.MED:AC=mstrmojo.desc(2126,"Median");break;case I.FIRST:AC=mstrmojo.desc(4046,"First");break;case I.LAST:AC=mstrmojo.desc(4049,"Last");break;case I.CONST:AC=mstrmojo.desc(7194,"Constant");break;}}if(k===true){if(h===I.CONST&&o&&!!o[E.REF_LINE_NAME]){s=o[E.REF_LINE_NAME];}else{s=l?(AC+" Axis"):(AC+" "+d);}return s+": "+AA;}if(o){var f=o.refLbShw;if(!f){return"";}var e=o.refLbTp;if(e&U.DssModelLabelsType){g.push(AC);}if(e&U.DssModelLabelsMetric){if(!l){g.push(d);}else{g.push("Axis");}}if(e&U.DssModelLabelsValue){g.push(AA);}if(y){return g;}return g.join(" ");}var AF;if(l){AF=[AC,"Axis",AA];}else{AF=[AC,d,AA];}if(y){return AF;}return AF.join(" ");},getReferenceLineValue:function(){return this.trendLineModel.tmData.inChartModel[0].model;},getReferenceLineDirection:function(){return this.trendLineModel.direction;},getBBSection:function(){var f=this,d,c,b=f.trendLineModel,e=b.tmData,g=e.inChartModel;d=f.bbIdx;c=g[d];return c;},getForcastLabelDataPairs:function(h,f){if(!this.isTrendLine){return undefined;}if(f===undefined){f=true;}var c=h?this.getFwdLabels(f):this.getBwdLabels(f),b=c.length,e=[],d,g=h?this.getFwdData():this.getBwdData();for(d=0;d<b;d++){e.push({lb:c[d],v:g[d]});}return e;},getFwdLabels:function(b){if(!this.isTrendLine){return undefined;}return S.call(this,true,b);},getFormulas:function(){if(!this.isTrendLine){return undefined;}var c=this.getBBSection(),b=c.model;return b.formulas;},getCoefficients:function(b){b=b||false;var d=this.getFormulas()[0],c=["coefficients","coefficients(seasonal)"];if(b){return(d&&(d[c[0]]||d[[c[1]]]))||[];}return(d&&d[c[0]])||[];},getTrendLineType:function(){var e=["Linear","Exponential","Power","Poly","Log"],c=[J.DssGraphRegressionLinear,J.DssGraphRegressionExp,J.DssGraphRegressionPow,J.DssGraphRegressionPoly,J.DssGraphRegressionLog],f,d,b;f=this.getFormulas();if(f){d=f[0].type;b=e.indexOf(d);if(b>=0){return c[b];}}return J.DssGraphRegressionNone;},getFwdData:function(e){if(!this.isTrendLine){return undefined;}var g=this.trendLineModel.dp;if(!g.fwdEnabled){return[];}var c=this.getBBSection(),d,f=g.getChartInfo(),b=c.model;if(e){d=[];H.forEach(b.fwdins,function(h){d.push(h[0]);});return d;}if(!c.fse&&f.isABL){return[];}return b.fwdfsts;},getBwdLabels:function(b){if(!this.isTrendLine){return undefined;}return S.call(this,false,b);},getBwdData:function(e){if(!this.isTrendLine){return undefined;}var g=this.trendLineModel.dp;if(!g.bwdEnabled){return[];}var c=this.getBBSection(),d,f=g.getChartInfo(),b=c.model;if(e){d=[];H.forEach(b.bwdins,function(h){d.push(h[0]);});return d;}if(!c.bse&&f.isABL){return[];}return b.bwdfsts;},getRefLineLabelIdentity:function(){var b={objType:L.REF_LINE_LABEL,lineModel:this,tlOpt:this.trendLineOpt};return new A(b);},getIdentity:function(){var b={objType:this.isTrendLine?L.TREND_LINE:L.REF_LINE,lineModel:this,tlOpt:this.trendLineOpt};return new A(b);},testSingleTrendLineModel:function(){var c=this.seriesId,b;if(this.isTrendLine){b=this.getTrendLineValues();K.visPrint("trend line values for seriers "+c+" : "+JSON.stringify(b));K.visPrint("fwd info :"+JSON.stringify(this.getForcastLabelDataPairs(true,true)));K.visPrint("bwd info :"+JSON.stringify(this.getForcastLabelDataPairs(false,true)));K.visPrint("values including forecast: "+JSON.stringify(this.getTrendLineValuesWithForecast()));}else{b=this.getReferenceLineValue();K.visPrint("reference line  for "+this.getReferenceLineLabel()+" : "+JSON.stringify(b));K.visPrint("direction of reference line is "+this.getReferenceLineDirection());}K.visPrint("thickness: "+this.getLineThickness());K.visPrint("line color "+this.getLineColor());K.visPrint("line style "+this.getLineRenderType());K.visPrint("-------------------------------------------------------------------");}});mstrmojo.gm.TrendLineModel=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.TrendLineModel",isTrendLine:undefined,init:function R(b){this._super(b);},getValidSeriesIndex:function(){var o=this.tmData,k=o.trm,c=this.dp,f,e,p=this.seriesIds,b=p.length,d=c.innerGetGroupCount(),g,n,h,l;for(f=0;f<b;f++){l=p[f];g=[];for(e=0;e<d;e++){n=c.innerGetGraphCell(l,e);h=n.getAssoDataWithMetricIndex(k,true);g.push(h);}if(X(g)>1){return f;}}return 0;},getSingleTrendLines:function(b){var k=this,e=this.tmData,n=this.seriesBBUnits,l=this.seriesIds,f=0,c=e.inChartModel,g=[],j,h,d;H.forEach(c,function(o){j=o.bbes;if(j){h=a.indexOf(n,j);}else{if(k.isTrendLine){h=k.getValidSeriesIndex();}else{h=0;}}d=l[h];o.seriesId=d;g.push(new B({trendLineModel:k,bbIdx:f,seriesId:d,isTrendLine:k.isTrendLine,trendLineOpt:k.trendLineOpt}));f++;});if(k.isTrendLine&&b){H.forEach(g,function(q){var p=q.getFwdLabels(false);var o=q.getBwdLabels(false);if(b.fwdLbs===undefined||b.fwdLbs.length<p.length){b.fwdLbs=p;}if(b.bwdLbs===undefined||b.bwdLbs.length<o.length){b.bwdLbs=q.getBwdLabels(false);}});}return g;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.string","mstrmojo.gm.GMEnums","mstrmojo.gm.GMUtility","mstrmojo.chart.enums.EnumFontStyle");var AC=mstrmojo.gm,q=mstrmojo.array,D=mstrmojo.css,I=AC.GMUtility,G=mstrmojo.chart.enums.EnumFontStyle,n=AC.WidgetPropertyTag,T=AC.FormatingPropertyTag,Z=AC.ShapeFillType,b=AC.EnumFitTo,J=AC.EnumAxisScale,N=AC.EnumShape,z=AC.EnumSubtype,M=AC.EnumDataLabels,AI=AC.EnumDataLabelPlacements,U=AC.EnumLegend,B=AC.EnumLegendMode,d=AC.EnumTextAlignH,r=AC.EnumTextAlignV,h=AC.EnumMaxSizeType,e=AC.EnumMinSizeType,AA=AC.EnumAxes,AH=AC.EnumMatrixLines,u=AC.EnumGridLines,F=AC.EnumLegendSlot;var k={Content:1,Window:2,Compact:3},AL={Global:0,PerRC:1,Local:2,Custom:3,Different:4},p={Area:0,Bar:1,Line:2,Circle:4,Square:6,Tick:7,Pie:10,Ring:11},AK={Automatic:1,Absolute:2,Stacked:3,Clustered:4,Percent:5},y={Hide:1,"Show only values":2,"Show only text":3},P={Automatic:1,Generic:2,Reserved:3},w={Automatic:1,Manual:2,"Auto fit":3},t={Automatic:1,Manual:2,Proportional:3},l={"Show Both":1,"Show None":2,"Show Only X":3,"Show Only Y":4},S={"Show All":1,"Show None":2,"Show Only Horizontal":3,"Show Only Vertical":4},K={Automatic:1,Show:2,Hide:3};var AB=[null,"Content","Window","Compact"],j=["Global","PerRC","Local","Custom","Different"],Y=["Area","Bar","Line","StepLine","Circle","Rectangle","Square","Tick","PieSlice","Polygon","Pie","Ring"],R=[null,"Automatic","Absolute","Stacked","Clustered","Percent"],V=[null,"Hide","Show only values","Show only text"],AF=[null,"Automatic","Generic","Reserved"],AE=[null,"Automatic","Manual","Auto fit"],x=[null,"Automatic","Manual","Proportional"],A=[null,"Show Both","Show None","Show Only X","Show Only Y"],AJ=[null,"Show All","Show None","Show Only Horizontal","Show Only Vertical"],g=[null,"Automatic","Show","Hide"];var Q={allAxLnShw:"xAxLnShw:yAxLnShw",allAxLnClr:"xAxLnClr:yAxLnClr",allAxLnStyle:"xAxLnStyle:yAxLnStyle",allAxLnCmbStyle:"xAxLnCmbStyle:yAxLnCmbStyle",allAxLnThk:"xAxLnThk:yAxLnThk",allAxTtShw:"xAxTtShw:yAxTtShw",allAxTtCtt:"xAxTtCtt:yAxTtCtt",allAxTtFntClr:"xAxTtFntClr:yAxTtFntClr",allAxTtFntFml:"xAxTtFntFml:yAxTtFntFml",allAxTtFntStyle:"xAxTtFntStyle:yAxTtFntStyle",allAxTtFntSz:"xAxTtFntSz:yAxTtFntSz",allAxLbFntClr:"xAxLbFntClr:yAxLbFntClr",allAxLbFntSz:"xAxLbFntSz:yAxLbFntSz",allAxLbFntFml:"xAxLbFntFml:yAxLbFntFml",allAxLbFntStyle:"xAxLbFntStyle:yAxLbFntStyle",allAxLbRtt:"xAxLbRtt:yAxLbRtt",allAxLbShw:"xAxLbShw:yAxLbShw",allMatrixLnShw:"vMatrixLnShw:hMatrixLnShw",allMatrixLnClr:"vMatrixLnClr:hMatrixLnClr",allMatrixLnThk:"vMatrixLnThk:hMatrixLnThk",allMatrixLnStyle:"vMatrixLnStyle:hMatrixLnStyle",allMatrixLnCmbStyle:"vMatrixLnCmbStyle:hMatrixLnCmbStyle",allGridLnShw:"majorGridLnShw:minerGridLnShw",allGridLnClr:"majorGridLnClr:minerGridLnClr",allGridLnThk:"majorGridLnThk:minerGridLnThk",allGridLnStyle:"majorGridLnStyle:minerGridLnStyle",allGridLnCmbStyle:"majorGridLnCmbStyle:minerGridLnCmbStyle",allRwColShw:"rwHdrShw:colHdrShw:rwVlShw:colVlShw",allLnShw:"xAxLnShw:yAxLnShw:xAxOriLnShw:yAxOriLnShw",allLnClr:"xAxLnClr:yAxLnClr:xAxOriLnClr:yAxOriLnClr",allLnStyle:"xAxLnStyle:yAxLnStyle:xAxOriLnStyle:yAxOriLnStyle",allLnCmbStyle:"xAxLnCmbStyle:yAxLnCmbStyle:xAxOriLnCmbStyle:yAxOriLnCmbStyle",allLnThk:"xAxLnThk:yAxLnThk:xAxOriLnThk:yAxOriLnThk",allTxtFntClr:"rwHdrTxtFntClr:colHdrTxtFntClr:rwVlTxtFntClr:colVlTxtFntClr:lgdFntClr:dlFntClr:rfLnFntClr:xAxTtFntClr:xAxLbFntClr:yAxTtFntClr:yAxLbFntClr",allTxtFntSz:"rwHdrTxtFntSz:colHdrTxtFntSz:rwVlTxtFntSz:colVlTxtFntSz:lgdFntSz:dlFntSz:rfLnFntSz:xAxTtFntSz:xAxLbFntSz:yAxTtFntSz:yAxLbFntSz",allTxtFntFml:"rwHdrTxtFntFml:colHdrTxtFntFml:rwVlTxtFntFml:colVlTxtFntFml:lgdFntFml:dlFntFml:rfLnFntFml:xAxTtFntFml:xAxLbFntFml:yAxTtFntFml:yAxLbFntFml",allTxtFntStyle:"rwHdrTxtFntStyle:colHdrTxtFntStyle:rwVlTxtFntStyle:colVlTxtFntStyle:lgdFntStyle:dlFntStyle:rfLnFntStyle:xAxTtFntStyle:xAxLbFntStyle:yAxTtFntStyle:yAxLbFntStyle",allRwColTxtFntClr:"rwHdrTxtFntClr:colHdrTxtFntClr:rwVlTxtFntClr:colVlTxtFntClr",allRwColTxtFntSz:"rwHdrTxtFntSz:colHdrTxtFntSz:rwVlTxtFntSz:colVlTxtFntSz",allRwColTxtFntFml:"rwHdrTxtFntFml:colHdrTxtFntFml:rwVlTxtFntFml:colVlTxtFntFml",allRwColTxtFntStyle:"rwHdrTxtFntStyle:colHdrTxtFntStyle:rwVlTxtFntStyle:colVlTxtFntStyle",allRwColTxtAlignH:"rwHdrTxtAlignH:colHdrTxtAlignH:rwVlTxtAlignH:colVlTxtAlignH",allRwColTxtAlignV:"rwHdrTxtAlignV:colHdrTxtAlignV:rwVlTxtAlignV:colVlTxtAlignV",outBdrShw:"OutSideBorder",allFillClr:"bgFillClr:rwHdrFillClr:colHdrFillClr",allFillTrans:"bgFillTrans:rwHdrFillTrans:colHdrFillTrans",colTxtShw:"colHdrShw:colVlShw",rwTxtShw:"rwHdrShw:rwVlShw",rwTxtTxtFntClr:"rwHdrTxtFntClr:rwVlTxtFntClr",rwTxtTxtFntSz:"rwHdrTxtFntSz:rwVlTxtFntSz",rwTxtTxtFntFml:"rwHdrTxtFntFml:rwVlTxtFntFml",rwTxtTxtFntStyle:"rwHdrTxtFntStyle:rwVlTxtFntStyle",rwTxtTxtAlignH:"rwHdrTxtAlignH:rwVlTxtAlignH",rwTxtTxtAlignV:"rwHdrTxtAlignV:rwVlTxtAlignV",colTxtTxtFntClr:"colHdrTxtFntClr:colVlTxtFntClr",colTxtTxtFntSz:"colHdrTxtFntSz:colVlTxtFntSz",colTxtTxtFntFml:"colHdrTxtFntFml:colVlTxtFntFml",colTxtTxtFntStyle:"colHdrTxtFntStyle:colVlTxtFntStyle",colTxtTxtAlignH:"colHdrTxtAlignH:colVlTxtAlignH",colTxtTxtAlignV:"colHdrTxtAlignV:colVlTxtAlignV",axOriLnShw:"xAxOriLnShw:yAxOriLnShw",axOriLnClr:"xAxOriLnClr:yAxOriLnClr",axOriLnStyle:"xAxOriLnStyle:yAxOriLnStyle",axOriLnCmbStyle:"xAxOriLnCmbStyle:yAxOriLnCmbStyle",axOriLnThk:"xAxOriLnThk:yAxOriLnThk",autoGridLnClr:"majorGridLnClr",autoGridLnCmbStyle:"majorGridLnCmbStyle",autoGridLnThk:"majorGridLnThk",autoGridLnStyle:"majorGridLnStyle"};var C={metricShapes:1,mtcLvlDataLabel:1,axisOrigin:1,AxisScale:1,fmtOnComb:1,yr:1,xr:1,y2r:1,x2r:1,rvr:1,chr:1,groupInfo:1};var AG=/[{}\[\],"'_:;\s]/i;var s="@pLd";var H=/@pLd/g;function f(AM){var AN=new window.DOMParser();return AN.parseFromString(AM,"text/xml");}function AD(){var AM=this.xmlData,AN=this.xmlDoc;if(!AN&&AM){this.xmlDoc=AN=f(AM);}return AN;}function X(AN,AM){if(!C[AN]){return AM;}return AM.replace(H,"");}function c(AR,AM,AT){if(!C[AR]){return AM;}var AS="",AQ=0,AP,AO,AN;if(!AM||AM.length===0){return AM;}AP=AM.search(AG);while(AP!==-1){if(AP!==AQ){AO=AM.substring(AQ,AP);if(AO.length===32){AN=AT[AO];if(AN!==undefined){AS+=s+AO;}}else{AS+=AO;}}AS+=AM[AP];AM=AM.substring(AP+1);AP=AM.search(AG);}AS+=AM;return AS;}function O(AN){var AM=new XMLSerializer();return AM.serializeToString(AN);}function E(AN,AP){var AM,AO="",AQ=AP.length;for(AM=0;AM<AQ;AM++){if(AM!==0){AO+=",";}AO+=AN[AM]+":"+AP[AM];}return AO;}function L(AQ){AQ=AQ||"";var AO,AN,AM=AQ.split(","),AR=AM.length,AP={};for(AO=0;AO<AR;AO++){AN=AM[AO].split(":");if(AN.length===2){AP[AN[0]]=parseFloat(AN[1]);}}return AP;}function W(AO){AO=AO||"";var AM=AO.split(":"),AN={};if(AM.length===2){AN[AM[0]]=parseFloat(AM[1])||1;}return AN;}function o(AN){AN=AN||"";var AM=AN.split(",");return{first:parseInt(AM[0],10),second:parseInt(AM[1],10)};}mstrmojo.gm.GMProperty=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gm.GMProperty",scales:null,generalProps:null,xmlDoc:null,xmlData:null,xmlDirty:false,jsonData:null,controller:null,rhIds:null,chIds:null,yIds:null,xIds:null,y2Ids:null,x2Ids:null,templateObjectMapping:null,isItemCached:null,readItemCache:null,init:function(AM){if(this._super){this._super(AM);}this.resetScales();this.resetGeneralProps();this.rhIds=[];this.chIds=[];if(!mstrmojo.gm.GMProperty.propertyMap){this.generatePropertyMap();}this.isItemCached={};this.readItemCache={};},generatePropertyMap:function(){var AN,AP=mstrmojo.gm.GMProperty.propertyMap={};function AM(AQ,AR){if(!AP[AQ]){AP[AQ]=[AR];}else{if(AP[AQ].indexOf(AR)<0){AP[AQ].push(AR);}}}function AO(AQ){return function(AR){AM(AR,AQ);};}for(AN in Q){if(Q.hasOwnProperty(AN)){AP[AN]=Q[AN].split(":");q.forEach(AP[AN],AO(AN));}}},updateDefaults:function(AP,AN){var AM=AN[T.MODIFIED_DEF_FILL_COLOR],AO;if(AM){if(AM==="transparent"){AO=AM;}else{if(AM==="default"){AO=undefined;}else{if(!isNaN(AM)){AO=parseInt(AN[T.MODIFIED_DEF_FILL_COLOR],10);}else{AO=JSON.parse(AM.replace(/'/g,'"'));}}}}if(AO!==undefined){AP[T.SHAPE_FILL_COLOR]=AO;AP[T.SHAPE_FILL_COLOR_DEFAULT]=false;}else{AP[T.SHAPE_FILL_COLOR_DEFAULT]=true;}this.defaultsObj=AP;},resetScales:function(){this.scales={rh:[],ch:[],y:1,y2:1,x:1,x2:1,lgd:1,ctw:1,cth:1};},resetGeneralProps:function(){var AM={};AM.fitTo=b.CONTENT;AM.axisScale=J.GLOBAL;AM.shape=N.LINE;AM.subtype=z.AUTO;AM.dataLabels=M.HIDE;AM.dataLabelPlacements=AI.AUTOMATIC;AM.banding=true;AM.legend=U.SHOW;AM.legendMode=B.RESTORED;AM.legendShow=true;AM.colAlign=d.CENTER;AM.rowAlignH=d.CENTER;AM.rowAlignV=r.CENTER;AM.maxSizeType=h.AUTO;AM.minSizeType=e.AUTO;AM.maxSizeValue=0.9;AM.minSizeValue=0.2;AM.outBorder=true;AM.axes=AA.SHOW_BOTH;AM.matrixLine=AH.SHOW_ALL;AM.gridLine=u.AUTO;AM.legendSlot=F.RIGHT_MIDDLE;this.generalProps=AM;},getXMLString:function(){return this.xmlData;},isXMLDirty:function(){return this.xmlDirty;},resetXMLDirtyFlag:function(){this.xmlDirty=false;},initFromXML:function(AP){if(AP){if(this.xmlData&&this.xmlData!==AP){this.xmlDoc=null;}this.xmlData=AP;}var AN,AQ,AM=[n.FIT_TO,n.AXIS_SCALE,n.SHAPE,n.SUB_TYPE,n.DATA_LABEL,n.DATA_LABELS_PLACEMENT,n.BANDING,n.LEGEND_VISIBLE,n.COL_ALIGNMENT,n.ROW_ALIGNMENT,n.MAX_SIZE_TYPE,n.MAX_SIZE_VALUE,n.MIN_SIZE_TYPE,n.MIN_SIZE_VALUE,n.SELECTION_TYPE,n.SELECTIONS,n.OUTSIDE_BORDER,n.AXES,n.MATRIX_LINES,n.GRID_LINES,n.LEGEND_MODE,n.LEGEND_POSITION,n.SCALE_LEGEND_WIDTH,n.SCALE_CHART_WIDTH,n.SCALE_CHART_HEIGHT,n.METRIC_SHAPES,n.AXIS_ORIGIN,n.LOG_SCALE,n.TREND_LINE_DEF,n.TREND_BUBBLE_FORE_DEF,n.REF_LINE_DEF,T.FORMATS_ON_COMBINATION,T.ALL_SHAPE_FORMAT,T.V_MATRIX_LINES_SHOW,T.V_MATRIX_LINES_COLOR,T.V_MATRIX_LINES_THICKNESS,T.V_MATRIX_LINES_STYLE,T.H_MATRIX_LINES_SHOW,T.H_MATRIX_LINES_COLOR,T.H_MATRIX_LINES_THICKNESS,T.H_MATRIX_LINES_STYLE];for(AN=0,AQ=AM.length;AN<AQ;AN++){this.initItem(AM[AN]);}var AO=this.generalProps;if(AO.legendShow){AO.legend=(AO.legendMode===B.MINIMIZED)?U.MINIMIZED:U.SHOW;}else{AO.legend=U.HIDE;}},initItem:function(AU){var Ac,AY,AS,AR,Ab,Aa,AT,AO,Ae,AQ,Af,AM,AX,Ad=this.rhIds,AV=this.chIds,AW=this.controller,AP=this.scales,AN=this.generalProps,AZ;AZ=this.hGetPropValue(AU);switch(AU){case n.FIT_TO:AN.fitTo=k[AZ]||b.PANEL;break;case n.AXIS_SCALE:AN.axisScale=AL[AZ]||J.GLOBAL;break;case n.SHAPE:AS=p[AZ];AN.shape=isNaN(AS)?N.LINE:AS;break;case n.METRIC_SHAPES:case n.METRIC_LEVEL_DATA_LABEL:case n.AXIS_ORIGIN:case n.LOG_SCALE:case n.TREND_LINE_DEF:case n.TREND_BUBBLE_FORE_DEF:case n.REF_LINE_DEF:case n.FORMATS_ON_COMBINATION:case T.ALL_SHAPE_FORMAT:AN[AU]=I.stringToJSON(AZ);break;case n.SUB_TYPE:AN.subtype=AK[AZ]||z.AUTO;break;case n.DATA_LABEL:AN.dataLabels=y[AZ];break;case n.DATA_LABELS_PLACEMENT:AN.dataLabelPlacements=P[AZ];break;case n.BANDING:AN.banding=AZ==="true";break;case n.LEGEND_VISIBLE:AN.legendShow=AZ!=="Hide";break;case n.COL_ALIGNMENT:if(AZ!==undefined){AS=parseInt(AZ,10);if(!isNaN(AS)&&AS>=0&&AS<=2){this.updateItem(T.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL,AS);this.updateItem(T.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL,AS);}}break;case n.ROW_ALIGNMENT:if(AZ!==undefined){AS=o(AZ).first;if(!isNaN(AS)&&AS>=0&&AS<=2){this.updateItem(T.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL,AS);this.updateItem(T.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL,AS);}AS=o(AZ).second;if(!isNaN(AS)&&AS>=0&&AS<=2){this.updateItem(T.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL,AS);this.updateItem(T.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL,AS);}}break;case n.MAX_SIZE_TYPE:AN.maxSizeType=w[AZ]||h.AUTO;break;case n.MAX_SIZE_VALUE:AS=parseFloat(AZ);AN.maxSizeValue=isNaN(AS)?0.9:AS;break;case n.MIN_SIZE_TYPE:AN.minSizeType=t[AZ]||e.PROPORTIONAL;break;case n.MIN_SIZE_VALUE:AS=parseFloat(AZ);AN.minSizeValue=isNaN(AS)?0.2:AS;break;case n.OUTSIDE_BORDER:AN.outBorder=AZ!=="Hide";break;case n.AXES:if(AZ!==undefined){AN.axes=l[AZ]||AA.SHOW_BOTH;if(AN.axes===AA.SHOW_BOTH){Ab=Aa=true;}else{if(AN.axes===AA.SHOW_X){Ab=true;Aa=false;}else{if(AN.axes===AA.SHOW_Y){Ab=false;Aa=true;}else{Ab=Aa=false;}}}this.updateItem(T.X_AXIS_LINE_SHOW,Ab);this.updateItem(T.Y_AXIS_LINE_SHOW,Aa);}break;case n.MATRIX_LINES:if(AZ!==undefined){AN.matrixLine=S[AZ]||AH.SHOW_ALL;if(AN.matrixLine===AH.SHOW_ALL){Ab=Aa=true;}else{if(AN.matrixLine===AH.SHOW_HORIZONTAL){Ab=false;Aa=true;}else{if(AN.matrixLine===AH.SHOW_VERTICAL){Ab=true;Aa=false;}else{Ab=Aa=false;}}}this.updateItem(T.V_MATRIX_LINES_SHOW,Ab);this.updateItem(T.H_MATRIX_LINES_SHOW,Aa);}break;case n.GRID_LINES:AN.gridLine=K[AZ]||u.AUTO;break;case n.LEGEND_MODE:AN.legendMode=parseInt(AZ,10);break;case n.LEGEND_POSITION:AN.legendSlot=parseInt(AZ,10)||F.RIGHT_MIDDLE;break;case n.SCALE_LEGEND_WIDTH:AP.lgd=parseFloat(AZ)||undefined;break;case n.SCALE_CHART_WIDTH:AP.ctw=parseFloat(AZ)||1;break;case n.SCALE_CHART_HEIGHT:AP.cth=parseFloat(AZ)||1;break;case n.SCALE_ROW_HEADERS:Ad.length=0;Ae=L(AZ);AO=AW.getRowTitleInfo(true);AY=AO.items.length;for(Ac=0;Ac<AY;Ac++){AT=AO.items[Ac].id;if(Ae.hasOwnProperty(AT)){AP.rh[Ac]=Ae[AT]||1;}else{AP.rh[Ac]=1;}Ad.push(AT);}break;case n.SCALE_COL_HEADERS:AV.length=0;Af=L(AZ);AQ=AW.getColTitleInfo(true);AY=AQ.items.length;for(Ac=0;Ac<AY;Ac++){AT=AQ.items[Ac].id;if(Af.hasOwnProperty(AT)){AP.ch[Ac]=Af[AT]||1;}else{AP.ch[Ac]=1;}AV.push(AT);}break;case n.SCALE_Y:case n.SCALE_X:case n.SCALE_Y2:case n.SCALE_X2:if(AU===n.SCALE_Y){AM=AW.getYAxisInfo(undefined,undefined,true,false);AR="y";}else{if(AU===n.SCALE_X){AM=AW.getXAxisInfo(undefined,undefined,true,false);AR="x";}else{if(AU===n.SCALE_Y2){AM=AW.getYAxisInfo(undefined,undefined,false,false);AR="y2";}else{if(AU===n.SCALE_X2){AM=AW.getXAxisInfo(undefined,undefined,false,false);AR="x2";}}}}AX=W(AZ);AY=AM.ids.length;AT="";for(Ac=0;Ac<AY;Ac++){if(Ac!==0){AT+=",";}AT+=AM.ids[Ac];}this[AR+"Ids"]=AT;AP[AR]=AX[AT]||1;break;}},readItem:function(AQ,AM){var AN=this.generalProps,AT=this.scales,AP,AS;switch(AQ){case n.FIT_TO:AS=AN.fitTo;break;case n.AXIS_SCALE:AS=AN.axisScale;break;case n.SHAPE:AS=AN.shape;break;case n.SUB_TYPE:AS=AN.subtype;break;case n.DATA_LABEL:AS=AN.dataLabels;break;case n.DATA_LABELS_PLACEMENT:AS=AN.dataLabelPlacements;break;case n.BANDING:AS=AN.banding;break;case n.LEGEND_VISIBLE:AS=AN.legendShow;break;case n.COL_ALIGNMENT:AS=AN.colAlign;break;case n.ROW_ALIGNMENT:AS={};AS.h=AN.rowAlignH;AS.v=AN.rowAlignV;break;case n.MAX_SIZE_TYPE:AS=AN.maxSizeType;break;case n.MAX_SIZE_VALUE:AS=AN.maxSizeValue;break;case n.MIN_SIZE_TYPE:AS=AN.minSizeType;break;case n.MIN_SIZE_VALUE:AS=AN.minSizeValue;break;case n.OUTSIDE_BORDER:AS=AN.outBorder;break;case n.AXES:AS=AN.axes;break;case n.MATRIX_LINES:AS=AN.matrixLine;break;case n.GRID_LINES:AS=AN.gridLine;break;case n.LEGEND_MODE:AS=AN.legendMode;break;case n.LEGEND_POSITION:AS=AN.legendSlot;break;case n.SCALE_LEGEND_WIDTH:AS=AT.lgd;break;case n.SCALE_CHART_WIDTH:AS=AT.ctw;break;case n.SCALE_CHART_HEIGHT:AS=AT.cth;break;case n.SCALE_ROW_HEADERS:AS=AT.rh;break;case n.SCALE_COL_HEADERS:AS=AT.ch;break;case n.SCALE_Y:AS=AT.y;break;case n.SCALE_X:AS=AT.x;break;case n.SCALE_Y2:AS=AT.y2;break;case n.SCALE_X2:AS=AT.x2;break;case n.SCALE_ALL:AS=AT;break;default:AS=this.hGetPropValue(AQ);break;}AP=AS;switch(AQ){case T.LINE_MARKER_SHOW:case T.LEGEND_BORDER_SHOW:case T.X_AXIS_ORIGIN_LINE_SHOW:case T.Y_AXIS_ORIGIN_LINE_SHOW:case T.X_AXIS_LINE_SHOW:case T.X_AXIS_TITLE_SHOW:case T.X_AXIS_LABELS_SHOW:case T.Y_AXIS_LINE_SHOW:case T.Y_AXIS_TITLE_SHOW:case T.Y_AXIS_LABELS_SHOW:case T.V_MATRIX_LINES_SHOW:case T.H_MATRIX_LINES_SHOW:case T.ALL_ROW_COLUMN_SHOW:case T.COLUMN_HEADER_SHOW:case T.ROW_HEADER_SHOW:case T.COLUMN_VALUES_SHOW:case T.ROW_VALUES_SHOW:case T.GRID_LINE_AUTO:case n.SORT_ORDER:if(AP){AS=(AP==="true"||AP===true);}break;case T.MAJOR_GRID_LINES_SHOW:if(AP===undefined){AP=AN.gridLine;}AS=parseInt(AP,10);break;case T.MINOR_GRID_LINES_SHOW:if(AP===undefined){AP=AN.gridLine;if(AP===2){AP=u.HIDE;}}AS=parseInt(AP,10);break;case T.X_AXIS_LABELS_ROTATION:if(AP){AS=parseInt(AP,10);}break;case n.SORT_INDEX:if(AP){AS={};AS.row=o(AP).first;AS.col=o(AP).second;}break;case n.AXIS_SCALE_DATA:if(AP){AS=I.parseAxisScaleData(AP);}break;case n.METRIC_SHAPES:case n.METRIC_LEVEL_DATA_LABEL:case n.AXIS_ORIGIN:case n.LOG_SCALE:case n.TREND_LINE_DEF:case n.TREND_BUBBLE_FORE_DEF:case n.REF_LINE_DEF:case n.SELECTIONS:case n.FORMATS_ON_COMBINATION:case T.ALL_SHAPE_FORMAT:var AR=this.isItemCached;var AO=this.readItemCache;if(!AR[AQ]){AO[AQ]=I.stringToJSON(AS);AR[AQ]=true;}AS=AO[AQ];break;case n.SCALE_V_EXTRA_LINE:AS=parseFloat(AS)||1;break;case n.MAX_SIZE_VALUE:case n.MIN_SIZE_VALUE:if(AP){AS=parseFloat(AP);}break;case T.REF_LABELS_FONT_FAMILY:case T.REF_LABELS_FONT_SIZE:case T.REF_LABELS_FONT_STYLE:case T.REF_LABELS_FONT_COLOR:if(AP&&typeof AP==="string"&&AP.indexOf("{")>=0){AS=I.stringToJSON(AP);}break;default:break;}if(AS===undefined){if(!AM){AS=this.defaultsObj[AQ];}}else{if(AQ.slice(-3)==="Clr"&&typeof AS==="string"){if(AS!=="transparent"){if(isNaN(AS)){AS=I.stringToJSON(AS);}else{AS=parseInt(AS,10);}}}}if(typeof AS==="string"&&!isNaN(AS)){AS=parseInt(AS,10);}return AS;},clearReadItemCache:function(){this.isItemCached={};},updateItem:function(AO,AN){var AQ=this.scales,AM=this.generalProps,AP=I.everythingToString(AN);this.clearReadItemCache();switch(AO){case n.FIT_TO:AM.fitTo=AN;AP=AB[AN];break;case n.AXIS_SCALE:AM.axisScale=AN;AP=j[AN];break;case n.SHAPE:AM.shape=AN;AP=Y[AN];break;case n.SUB_TYPE:AM.subtype=AN;AP=R[AN];break;case n.DATA_LABEL:AM.dataLabels=AN;AP=V[AN];break;case n.DATA_LABELS_PLACEMENT:AM.dataLabelPlacements=AN===true?1:2;AP=AF[AM.dataLabelPlacements];break;case n.BANDING:AM.banding=AN;break;case n.LEGEND_VISIBLE:AM.legendShow=AN;AP=AN?"Show":"Hide";break;case n.ROW_ALIGNMENT:AM.rowAlignH=AN.h;AM.rowAlignV=AN.v;AP=AN.h+","+AN.v;break;case n.COL_ALIGNMENT:AM.colAlign=AN;break;case n.MAX_SIZE_TYPE:AM.maxSizeType=AN;AP=AE[AN];break;case n.MAX_SIZE_VALUE:AM.maxSizeValue=AN;break;case n.MIN_SIZE_TYPE:AM.minSizeType=AN;AP=x[AN];break;case n.MIN_SIZE_VALUE:AM.minSizeValue=AN;break;case n.OUTSIDE_BORDER:AM.outBorder=AN;AP=AN?"Show":"Hide";break;case n.AXES:AM.axes=AN;AP=A[AN];break;case n.MATRIX_LINES:AM.matrixLine=AN;AP=AJ[AN];break;case n.GRID_LINES:AM.gridLine=AN;AP=g[AN];break;case n.LEGEND_MODE:AM.legendMode=AN;break;case n.LEGEND_POSITION:AM.legendSlot=AN;break;case n.SCALE_LEGEND_WIDTH:AQ.lgd=AN;break;case n.SCALE_CHART_WIDTH:AQ.ctw=AN;break;case n.SCALE_CHART_HEIGHT:AQ.cth=AN;break;case n.SCALE_ROW_HEADERS:AQ.rh=AN;AP=E(this.rhIds,AQ.rh);break;case n.SCALE_COL_HEADERS:AQ.ch=AN;AP=E(this.chIds,AQ.ch);break;case n.SCALE_Y:AQ.y=AN;AP=this.yIds+":"+AQ.y;break;case n.SCALE_X:AQ.x=AN;AP=this.xIds+":"+AQ.x;break;case n.SCALE_Y2:AQ.y2=AN;AP=this.y2Ids+":"+AQ.y2;break;case n.SCALE_X2:AQ.x2=AN;AP=this.x2Ids+":"+AQ.x2;break;case n.SORT_INDEX:AP=AN.row+","+AN.col;break;default:break;}this.hSetPropValue(AO,AP);},removeItem:function(AM){this.hRemoveProp(AM);},updateItems:function(AP,AM){var AN,AO=AP.length;for(AN=0;AN<AO;AN++){this.updateItem(AP[AN],AM[AN]);}},setController:function(AM){this.controller=AM;this.initItem(n.SCALE_ROW_HEADERS);this.initItem(n.SCALE_COL_HEADERS);this.initItem(n.SCALE_Y);this.initItem(n.SCALE_X);this.initItem(n.SCALE_Y2);this.initItem(n.SCALE_X2);},initHTML5Props:function(AO){var AT=this.readItem,Ab=AO.LEGEND={},Ah=AO.BK={},Ae=AO.RH_BK={},AY=AO.CH_BK={},AW=AO.RH_TITLE={},AU=AO.RH={},AX=AO.CH_TITLE={},AQ=AO.CH={},Aa=AO.AXIS_LABEL_X={},AZ=AO.AXIS_LABEL_Y={},Ag=AO.AXIS_TITLE_X={},Af=AO.AXIS_TITLE_Y={},AR=AO.AXIS_LINE_X={},AP=AO.AXIS_LINE_Y={},Ad=AO.MATRIX_LINE_H={},AS=AO.MATRIX_LINE_V={},AN=AO.GRID_LINE_MAJOR={},AV=AO.GRID_LINE_MINOR={},AM=AO.OUTSIDE_BORDER={},Aj=function(An,Ak,Al){if(Ak===Z.Gradient){Al=I.decodeColor(Al);var Am=D.buildGradient(Al.or,Al.c1,Al.c2);if(Am){An[Am.n]=Am.v;}}else{An.backgroundColor=I.decodeColor(Al);}},Ai=function(Al,Ak){Al.fontWeight=(Ak&G.FS_BOLD?"bold":"normal");Al.fontStyle=(Ak&G.FS_ITALIC?"italic":"normal");if((Ak&G.FS_STRIKETHROUGH)&&(Ak&G.FS_UNDERLINE)){Al.textDecoration="line-through underline";}else{if(Ak&G.FS_STRIKETHROUGH){Al.textDecoration="line-through";}else{if(Ak&G.FS_UNDERLINE){Al.textDecoration="underline";}else{Al.textDecoration="none";}}}},Ac=function(Ak){var Al=["solid","dashed","dotted"];return Al[Ak]||"none";};Ab.fontFamily=AT.call(this,T.LEGEND_FONT_FAMILY);Ab.fontSize=AT.call(this,T.LEGEND_FONT_SIZE);Ai(Ab,AT.call(this,T.LEGEND_FONT_STYLE));Ab.color=I.decodeColor(AT.call(this,T.LEGEND_FONT_COLOR));Aj(Ab,AT.call(this,T.LEGEND_BG_FILL_STYLE),AT.call(this,T.LEGEND_BG_COLOR));Ab.opacity=AT.call(this,T.LEGEND_BG_FILL_TRANSPARENCY)/100;if(AT.call(this,T.LEGEND_BORDER_SHOW)){Ab.borderWidth=parseInt(AT.call(this,T.LEGEND_BORDER_THICKNESS),10)+"px";Ab.borderStyle=Ac(AT.call(this,T.LEGEND_BORDER_LINE_STYLE));Ab.borderColor=I.decodeColor(AT.call(this,T.LEGEND_BORDER_COLOR));}Aj(Ah,AT.call(this,T.BG_FILL_STYLE),AT.call(this,T.BG_COLOR));Ah.opacity=AT.call(this,T.BG_FILL_TRANSPARENCY)/100;Aj(Ae,AT.call(this,T.ROW_HEADER_FILL_STYLE),AT.call(this,T.ROW_HEADER_FILL_COLOR));Ae.opacity=AT.call(this,T.ROW_HEADER_FILL_TRANSPARENCY)/100;Aj(AY,AT.call(this,T.COLUMN_HEADER_FILL_STYLE),AT.call(this,T.COLUMN_HEADER_FILL_COLOR));AY.opacity=AT.call(this,T.COLUMN_HEADER_FILL_TRANSPARENCY)/100;AW.fontFamily=AT.call(this,T.ROW_HEADER_TEXT_FONT_FAMILY);AW.fontSize=AT.call(this,T.ROW_HEADER_TEXT_FONT_SIZE);Ai(AW,AT.call(this,T.ROW_HEADER_TEXT_FONT_STYLE));AW.color=I.decodeColor(AT.call(this,T.ROW_HEADER_TEXT_FONT_COLOR));AX.fontFamily=AT.call(this,T.COLUMN_HEADER_TEXT_FONT_FAMILY);AX.fontSize=AT.call(this,T.COLUMN_HEADER_TEXT_FONT_SIZE);Ai(AX,AT.call(this,T.COLUMN_HEADER_TEXT_FONT_STYLE));AX.color=I.decodeColor(AT.call(this,T.COLUMN_HEADER_TEXT_FONT_COLOR));AU.fontFamily=AT.call(this,T.ROW_VAVLUE_TEXT_FONT_FAMILY);AU.fontSize=AT.call(this,T.ROW_VAVLUE_TEXT_FONT_SIZE);Ai(AU,AT.call(this,T.ROW_VAVLUE_TEXT_FONT_STYLE));AU.color=I.decodeColor(AT.call(this,T.ROW_VAVLUE_TEXT_FONT_COLOR));AQ.fontFamily=AT.call(this,T.COLUMN_VAVLUE_TEXT_FONT_FAMILY);AQ.fontSize=AT.call(this,T.COLUMN_VAVLUE_TEXT_FONT_SIZE);Ai(AQ,AT.call(this,T.COLUMN_VAVLUE_TEXT_FONT_STYLE));AQ.color=I.decodeColor(AT.call(this,T.COLUMN_VAVLUE_TEXT_FONT_COLOR));AZ.fontFamily=AT.call(this,T.Y_AXIS_LABELS_FONT_FAMILY);AZ.fontSize=AT.call(this,T.Y_AXIS_LABELS_FONT_SIZE);Ai(AZ,AT.call(this,T.Y_AXIS_LABELS_FONT_STYLE));AZ.color=I.decodeColor(AT.call(this,T.Y_AXIS_LABELS_FONT_COLOR));Aa.fontFamily=AT.call(this,T.X_AXIS_LABELS_FONT_FAMILY);Aa.fontSize=AT.call(this,T.X_AXIS_LABELS_FONT_SIZE);Ai(Aa,AT.call(this,T.X_AXIS_LABELS_FONT_STYLE));Aa.color=I.decodeColor(AT.call(this,T.X_AXIS_LABELS_FONT_COLOR));Af.fontFamily=AT.call(this,T.Y_AXIS_TITLE_FONT_FAMILY);Af.fontSize=AT.call(this,T.Y_AXIS_TITLE_FONT_SIZE);Ai(Af,AT.call(this,T.Y_AXIS_TITLE_FONT_STYLE));Af.color=I.decodeColor(AT.call(this,T.Y_AXIS_TITLE_FONT_COLOR));Ag.fontFamily=AT.call(this,T.X_AXIS_TITLE_FONT_FAMILY);Ag.fontSize=AT.call(this,T.X_AXIS_TITLE_FONT_SIZE);Ai(Ag,AT.call(this,T.X_AXIS_TITLE_FONT_STYLE));Ag.color=I.decodeColor(AT.call(this,T.X_AXIS_TITLE_FONT_COLOR));AR.borderWidth=parseInt(AT.call(this,T.X_AXIS_LINE_THICKNESS),10)+"px";AR.borderColor=I.decodeColor(AT.call(this,T.X_AXIS_LINE_COLOR));AR.borderTopStyle=Ac(AT.call(this,T.X_AXIS_LINE_STYLE));AP.borderWidth=parseInt(AT.call(this,T.Y_AXIS_LINE_THICKNESS),10)+"px";AP.borderColor=I.decodeColor(AT.call(this,T.Y_AXIS_LINE_COLOR));AP.borderLeftStyle=Ac(AT.call(this,T.Y_AXIS_LINE_STYLE));Ad.borderWidth=parseInt(AT.call(this,T.H_MATRIX_LINES_THICKNESS),10)+"px";Ad.borderColor=I.decodeColor(AT.call(this,T.H_MATRIX_LINES_COLOR));Ad.borderTopStyle=Ac(AT.call(this,T.H_MATRIX_LINES_STYLE));AS.borderWidth=parseInt(AT.call(this,T.V_MATRIX_LINES_THICKNESS),10)+"px";AS.borderColor=I.decodeColor(AT.call(this,T.V_MATRIX_LINES_COLOR));AS.borderLeftStyle=Ac(AT.call(this,T.V_MATRIX_LINES_STYLE));AN.borderWidth=parseInt(AT.call(this,T.MAJOR_GRID_LINES_THICKNESS),10)+"px";AN.borderColor=I.decodeColor(AT.call(this,T.MAJOR_GRID_LINES_COLOR));AN.borderTopStyle=Ac(AT.call(this,T.MAJOR_GRID_LINES_STYLE));AN.borderLeftStyle=AN.borderTopStyle;AV.borderWidth=parseInt(AT.call(this,T.MINER_GRID_LINES_THICKNESS),10)+"px";AV.borderColor=I.decodeColor(AT.call(this,T.MINER_GRID_LINES_COLOR));AV.borderTopStyle=Ac(AT.call(this,T.MINER_GRID_LINES_STYLE));AV.borderLeftStyle=AV.borderTopStyle;AM.borderWidth=parseInt(AT.call(this,T.OUTSIDE_BORDER_THICKNESS),10)+"px";AM.borderColor=I.decodeColor(AT.call(this,T.OUTSIDE_BORDER_COLOR));AM.borderLeftStyle=Ac(AT.call(this,T.OUTSIDE_BORDER_STYLE));AM.borderTopStyle=Ac(AT.call(this,T.OUTSIDE_BORDER_STYLE));},readItemDefault:function(AQ,AO){var AP,AM={CIRCLE:0.7,Bar:0.7,AREA:0.7,PIE:0.8,RING:0.8},AN={CIRCLE:2,Bar:1,AREA:2,PIE:1,RING:1};switch(AQ){case T.X_AXIS_TITLE_SHOW:case T.Y_AXIS_TITLE_SHOW:AP=AO.isMetric?true:false;break;case T.SHAPE_FILL_TRANSPARENCY:AP=AM[AO.shapeType];break;case T.SHAPE_BORDER_THICKNESS:AP=AN[AO.shapeType];break;}return AP;},consumeJsonFmt:function(AN){var AP,AO=[],AM=[];for(AP in AN){if(AN.hasOwnProperty(AP)){AO.push(AP);AN[AP]=X(AP,AN[AP],this.templateObjectMapping);AM.push(AN[AP]);}}this.xmlData=this.makeDefaultPropXML(AO,AM);this.jsonData=AN;},hSyncWithJson:function(AO,AN,AP){var AM=this.jsonData;if(AM){if(AP){delete AM[AO];}else{AM[AO]=AN;}}},hGetPropValue:function(AQ){var AP,AN=this.jsonData,AO;if(AN){return AN[AQ];}else{AP=AD.call(this);if(AP){var AM=AP.getElementsByTagName("fmt")[0],AR=AM.getElementsByTagName(AQ)[0];if(AR){AO=AR.getAttribute("value");return X(AQ,AO,this.templateObjectMapping);}}}return undefined;},hRemoveProp:function(AO){this.hSyncWithJson(AO,"",true);var AN=AD.call(this),AM=AN.getElementsByTagName("fmt")[0],AP=AM.getElementsByTagName(AO)[0];if(AP){AP.parentNode.removeChild(AP);this.xmlData=O(AN);this.xmlDirty=true;}return this.xmlData;},hSetPropValue:function(AP,AO){if(typeof AO==="undefined"){return this.hRemoveProp(AP);}if((typeof AO)!=="string"){AO=AO.toString();}this.hSyncWithJson(AP,AO);var AN=AD.call(this),AM=AN.getElementsByTagName("fmt")[0],AQ=AM.getElementsByTagName(AP)[0];if(!AQ){AQ=AN.createElement(AP);AM.appendChild(AQ);}AQ.setAttribute("value",c(AP,AO,this.templateObjectMapping));this.xmlData=O(AN);this.xmlDirty=true;return this.xmlData;},hSetPropValues:function(AT,AS){var AQ,AP,AM,AR,AN=AT.length,AU=AD.call(this),AO=AU.getElementsByTagName("fmt")[0];for(AQ=0;AQ<AN;AQ++){AM=AT[AQ];AR=AS[AQ];this.hSyncWithJson(AM,AR);AP=AO.getElementsByTagName(AM)[0];if(!AP){AP=AU.createElement(AM);AO.appendChild(AP);}AP.setAttribute("value",c(AM,AR,this.templateObjectMapping));}this.xmlData=O(AU);this.xmlDirty=true;return this.xmlData;},clearCachedXMLDoc:function(){if(this.xmlDoc){delete this.xmlDoc;}},setTemplateObjectMapping:function(AM){this.templateObjectMapping=AM;},makeDefaultPropXML:function a(AS,AT){var AP,AO,AM=AS.length,AR=new window.DOMParser(),AQ="<props><widgetProps><fmt></fmt></widgetProps></props>",AU=AR.parseFromString(AQ,"text/xml"),AN=AU.getElementsByTagName("fmt")[0];for(AP=0;AP<AM;AP++){AO=AU.createElement(AS[AP]);AO.setAttribute("value",c(AS[AP],AT[AP],this.templateObjectMapping));AN.appendChild(AO);}return O(AU);}});mstrmojo.gm.GMProperty.getUnderlyingPropertyNameWithAll=function(AM){return(Q[AM]||AM).split(":");};}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.num","mstrmojo.gm.GMEnums","mstrmojo.gm.GMUtility","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.VisTooltip","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.models.DropZonesModel","mstrmojo.gm.DndReplaceNode","mstrmojo.gm.DndTooltip","mstrmojo.vi.ui._CanDropFromSchema","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.ui.menus.PopupConfig","mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.color");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig","ToolbarEditorConfig");mstrmojo.requiresClsP("mstrmojo.ui.editors.controls","LineConfigGroup","FillConfigGroup","ColorPickerButton","MarkerColorPickerButton","CharacterGroup");var V=mstrmojo,Cm=V.VisUtility,P=mstrmojo.ui.editors.controls.AdvancedColorPicker,BF=V.vi,Ch=V.string,BU=V.dom,D=V.num,Cd=V.array,B7=V.css,Ay=V.hash,AD=V.color,k=mstrmojo.expr.DTP,Bs=V.gm.EnumShape,Cj=V.gm.EnumGraphType,AZ=V.VisEnum.ControlType,A7=BF.ui.rw.SelectionType,Cz=BF.ui.DatasetUnitMenuUtils,B2=V.gm,p=B2.GMUtility,Ab=B2.WidgetPropertyTag,C9=B2.FormatingPropertyTag,AE=V.models.FormatModel,A0=AE.ENUM_PROPERTY_NAMES,y=mstrmojo.chart.enums.EnumFontStyle,Ad=B2.EnumABLDirection,C5=BF.models.EnumDragSources,Cx=BF.models.DropZonesModel.ENUM_TARGET_POSITION,Cr=V.vi.viz.EnumDSSDropZones,AA=B2.EnumIdentityType,BX=Cx.ABOVE,r=Cx.ON,C=Cx.BELOW,Au=3,A9=-20,BY=14,BM=7,q=6,BT=8,d=0,CA=1,C4=2,AU="default",Cq="hdtl",s={NORMAL:"normal",HOVER:"hover",SELECTED:"selected",SH:"sh"},C6={INVALID:-1,NORMAL2HOVER:0,NORMAL2SELECTED:1,HOVER2NORMAL:2,HOVER2SELECTED:3,SELECTED2NORMAL:4,SELECTED2HOVER:5,SH2SELECTED:6,SELECTED2SH:7,SH2NORMAL:8},U={"normal-hover":C6.NORMAL2HOVER,"normal-selected":C6.NORMAL2SELECTED,"hover-normal":C6.HOVER2NORMAL,"hover-selected":C6.HOVER2SELECTED,"selected-normal":C6.SELECTED2NORMAL,"selected-hover":C6.SELECTED2HOVER,"sh-selected":C6.SH2SELECTED,"selected-sh":C6.SELECTED2SH,"sh-normal":C6.SH2NORMAL},BK={BAR:"bar",SBAR:"sbar",GBAR:"gbar",CIRCLE:"circle",SCIRCLE:"scircle",TICKER:"ticker",SQUARE:"square",PIE:"pie",RING:"ring"},B5={GLOBAL:"glb",FORMATTING:"fmt"},X={FONT_COMP:"FntCmp",FONT_FAMILY:"FntFml",FONT_STYLE:"FntStyle",FONT_SIZE:"FntSz",FONT_COLOR:"FntClr",LINE_COMP:"LnCmp",SHOW:"Shw",COLOR:"Clr",STYLE:"Style",THICKNESS:"Thk"},Bn={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2},A2,BS=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(7194,"Constant")];var BJ={};BJ[AA.H_MATRIX_LINE]=[AZ.GM_H_MATRIX_LINE,AZ.GM_H_CHART_LINE];BJ[AA.V_MATRIX_LINE]=[AZ.GM_V_MATRIX_LINE,AZ.GM_V_CHART_LINE];BJ[AA.GRID_LINE]=[AZ.GM_H_GRID_LINE,AZ.GM_V_GRID_LINE];BJ[AA.MINOR_GRID_LINE]=[AZ.GM_H_MINOR_GRID_LINE,AZ.GM_V_MINOR_GRID_LINE];BJ[AA.ROW_TITLE]=[AZ.GM_ROW_HEADER_TITLE];BJ[AA.ROW_HEADER]=[AZ.GM_ROW_HEADER,AZ.GM_ROW_HEADER_EXTRA];BJ[AA.COL_TITLE]=[AZ.GM_COL_HEADER_TITLE];BJ[AA.COL_HEADER]=[AZ.GM_COL_HEADER,AZ.GM_COL_HEADER_EXTRA];BJ[AA.ROWS_BACKGROUND]=[];BJ[AA.COLS_BACKGROUND]=[];BJ[AA.X_AXIS]=[AZ.GM_XAXIS_LINE];BJ[AA.Y_AXIS]=[AZ.GM_YAXIS_LINE];BJ[AA.X2_AXIS]=[AZ.GM_XAXIS2_LINE];BJ[AA.Y2_AXIS]=[AZ.GM_YAXIS2_LINE];BJ[AA.X_METRIC_AXIS_TITLE]=[AZ.GM_XLABEL];BJ[AA.Y_METRIC_AXIS_TITLE]=[AZ.GM_YLABEL];BJ[AA.X_NUMERIC]=[AZ.GM_X_NUMERIC];BJ[AA.X_CATEGORY]=[AZ.GM_X_CATEGORY];BJ[AA.Y_NUMERIC]=[AZ.GM_Y_NUMERIC];BJ[AA.Y_CATEGORY]=[AZ.GM_Y_CATEGORY];BJ[AA.X_AXIS_ORIGIN_LABEL]=[AZ.GM_ORIGIN_LABEL_V];BJ[AA.Y_AXIS_ORIGIN_LABEL]=[AZ.GM_ORIGIN_LABEL_H];BJ[AA.AXIS_ORIGIN]=[AZ.GM_ORIGIN_LINE];var Ba={NONE:0,ROW_VALUE:1,ROW_HEADER:2,COL_VALUE:4,COL_HEADER:8};var B=Math.PI,Ac=B/180*1,Q=Ac*0.0001,Ci=10;function BO(DG){function DA(){var DI=[];Cd.forEach(DG||[],function(DL){var DJ=AT(DL);var DK=DJ.getAttribute("type");if(DK){DI.push(DK);}});return DI;}var DF=DA(),DE=0;var DH=DF.indexOf(AZ.GM_ROW_HEADER)>-1||DF.indexOf(AZ.GM_ROW_HEADER_EXTRA)>-1||DF.indexOf(AZ.GM_ROW_HEADER_TEXT)>-1;var DB=DF.indexOf(AZ.GM_ROW_HEADER_TITLE)>-1||DF.indexOf(AZ.GM_ROW_HEADER_TITLE_TEXT)>-1;var DD=DF.indexOf(AZ.GM_COL_HEADER)>-1||DF.indexOf(AZ.GM_COL_HEADER_EXTRA)>-1||DF.indexOf(AZ.GM_COL_HEADER_TEXT)>-1;var DC=DF.indexOf(AZ.GM_COL_HEADER_TITLE)>-1||DF.indexOf(AZ.GM_COL_HEADER_TITLE_TEXT)>-1;if(DH){DE=DE|Ba.ROW_VALUE;}if(DB){DE=DE|Ba.ROW_HEADER;}if(DD){DE=DE|Ba.COL_VALUE;}if(DC){DE=DE|Ba.COL_HEADER;}return DE;}function At(DK){var DO=this.widget,DU=DO.GMController,DS=DU.model,DE=DS.ldss&&DS.ldss[0],DQ,DM=DU.getChartInfo(),DV=this,DF=[],DL=[],DP=DU.getMetricsOnXAxis(),DN=DU.getMetricsOnYAxis(),DD=DO.readGlobalProperty(Ab.METRIC_SHAPES);var DH=false,DR=mstrmojo.gm.EnumSubtype,DJ=DU.chartSubType,DC=DM.shape;if(DM.isABL&&DJ===DR.PERCENT){DH=true;}if(DM.isBubbleOrScatter){DF=p.filterInValidMetricIndex(DN);}else{if(DM.isABL){if(DM.dirc===B2.EnumABLDirection.HORIZONTAL){DF=p.filterInValidMetricIndex(DP);}else{DF=p.filterInValidMetricIndex(DN);}if(DE){DQ=DE.srsCnt;if(DQ===undefined||DQ===null){DQ=DE.getSeriesCount();}}if(DJ===DR.STACKED){if(DU.getBreakByAttrsID().length>0){DH=true;}if(DF&&DF.length>1&&!DU.splitPlottingMetrics){DH=true;}}else{if(DJ===DR.CLUSTERED){if(DM.isCombo){DL=DS.getMetricIDsFromIndex(DF);Cd.forEach(DL,function(DX){var DW=DD.jsonObj[DX];if(DW===Bs.BAR){DH=true;}});}else{if(DC===Bs.BAR){if(DU.getBreakByAttrsID().length>0){DH=true;}}else{if(DU.getBreakByAttrsID().length>0){DH=true;}if(DF&&DF.length>1&&!DU.splitPlottingMetrics){DH=true;}}}}else{if(DM.isCombo){DL=DS.getMetricIDsFromIndex(DF);if(DU.getBreakByAttrsID().length>0){Cd.forEach(DL,function(DX){var DW=DD.jsonObj[DX];if(DW===Bs.BAR){DH=true;}});}}}}}}DH=DH||!p.isTrendLineAvailableForAnyMetric(DO);if(!DH&&DF&&DF.length>0){var DG=[],DB,DT,DA=[],DI=[];Cd.forEach(DF,function(DW){DB=p.getOptionObjArr.call(DU,[DW]);DG.push(DB);DT=DO.readGlobalProperty(Ab.TREND_LINE_DEF,DB);if(!DT.jsonObj.trdEnabled){DT.setProperty("trdEnabled",true);DO.getEnableTrendLineActions(DT.jsonObj,DA,DB.key);}else{DT.setProperty("trdEnabled",false);DO.getEnableTrendLineActions(DT.jsonObj,DI,DB.key);}});DK.addToggleMenuItem(mstrmojo.desc(12160,"Enable trendline"),"xt",function(){if(DA.length>0){Cd.forEach(DA,function(DW){DO.checkCustomScaleNotificationForTrendLine(DW.metricId);});DO.submitUpdatesAndPersistXML(DA,DO.getXTabRefreshCallBack(),undefined,false,false);}},function(){if(DI.length>0){DO.submitUpdatesAndPersistXML(DI,DO.getXTabRefreshCallBack(),undefined,false,false);}},DV.id,DA.length===0);if(DA.length===0&&mstrApp.appState!==mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION){DK.addMenuItem(mstrmojo.desc(12163,"Edit trendline..."),"xt",p.getEditTrendLineHandler(DO,DG[0].key));}}}function CY(DB){var DA="#34ABEB";DB.style.stroke=DA;return ;}function CO(DA){var DB=DA.identity.lineModel.getLineColor();DA.style.stroke=AD.decodeColor(DB)||"#000000";return ;}function Bj(DU){var DA=6,DN=6,DG=2,DT=DA/2,DE=DN/2,DK=1,DI=1,DR=Number.MAX_VALUE,DQ=Number.MAX_VALUE;var DL=function(DY){var DW=[];var DX=DY.getAttribute("highlightPoints"),DZ=DX?DX.split(";"):[];Cd.forEach(DZ||[],function(Dd){var Db=Dd.indexOf(":");if(Db>-1){var Da=Dd.substring(Db+1);var Dc=Da.split(",");Cd.forEach(Dc||[],function(Df,De){Dc[De]=parseFloat(Df,10);});DW.push(Dc);}});return DW;};var DC=function(DY){var DW=[];var DX=DY.getAttribute("points");DX=DX.substring(0,DX.length-1);var DZ=DX.split(" ");Cd.forEach(DZ||[],function(Da,Db){var Dc=Da.split(",");Cd.forEach(Dc||[],function(De,Dd){Dc[Dd]=parseFloat(De,10);});if(Db===0){DW[Db]=Dc;}else{if(Db===1){DW[Db+1]=Dc;}}});if(DW[0]&&DW[2]){DW[1]=[(DW[0][0]+DW[2][0])/2,(DW[0][1]+DW[2][1])/2];}return DW;};var DS=function(DX){var DW=true;Cd.forEach(DX||[],function(DY){if(!DY||DY.length!==2){DW=false;return false;}});if(DW){if(!DX||DX.length!==3){DW=false;}}return DW;};var DJ=function(Da,DY,DZ,DX,DW){if(DW){return Math.min(Math.max(Da-DY,DZ),DX);}else{return Da-DY;}};var DO=DU.getAttribute("type"),DD;if(x(DO)&&DU.hasAttribute("highlightPoints")){DD=DL(DU);}else{if(Bq(DO)||!DU.hasAttribute("highlightPoints")){DD=DC(DU);}else{DD=DL(DU);}}if(!DS(DD)){return ;}var DH=DU.parentNode&&DU.parentNode.parentNode;if(DH){var DP=DH.clientWidth,DB=DH.clientHeight;DR=DP-(DG+DA);DQ=DB-(DG+DN);}var DV=document.createElementNS("http://www.w3.org/2000/svg","rect"),DF=document.createElementNS("http://www.w3.org/2000/svg","rect");DV.setAttribute("type",AZ.GM_TREND_LINE_SELECT);DV.setAttribute("class","gm-trendline-select");DV.setAttribute("x",DJ(DD[0][0],DT,DK,DR,Bq(DO)));DV.setAttribute("y",DJ(DD[0][1],DE,DI,DQ,Bq(DO)));DV.setAttribute("width",DA.toString());DV.setAttribute("height",DN.toString());DF.setAttribute("type",AZ.GM_TREND_LINE_SELECT);DF.setAttribute("class","gm-trendline-select");DF.setAttribute("x",DJ(DD[2][0],DT,DK,DR,Bq(DO)));DF.setAttribute("y",DJ(DD[2][1],DE,DI,DQ,Bq(DO)));DF.setAttribute("width",DA.toString());DF.setAttribute("height",DN.toString());DU.parentNode.appendChild(DV);DU.parentNode.appendChild(DF);var DM=document.createElementNS("http://www.w3.org/2000/svg","rect");DM.setAttribute("type",AZ.GM_TREND_LINE_SELECT);DM.setAttribute("class","gm-trendline-select");if(x(DO)){DM.setAttribute("x",DJ(DD[1][0],DT,DK,DR));DM.setAttribute("y",DJ(DD[1][1],DE,DI,DQ));}else{if(Bq(DO)){DM.setAttribute("x",DJ(DD[1][0],DT,DK,DR));DM.setAttribute("y",DJ(DD[1][1],DE,DI,DQ));}}DM.setAttribute("width",DA.toString());DM.setAttribute("height",DN.toString());DU.parentNode.appendChild(DM);}function z(DB){var DA=CK(DB.parentNode,"type",AZ.GM_TREND_LINE_SELECT);Cd.forEach(DA||[],function(DC){if(DC.parentNode===DB.parentNode){DB.parentNode.removeChild(DC);}});}function C2(DG){var DD=0,DA=0,DL=[],DE;if(DG.tagName==="circle"){DL.push(parseInt(DG.getAttribute("cx"),10));DL.push(parseInt(DG.getAttribute("cy"),10));}else{if(DG.tagName==="rect"){var DJ=parseFloat(DG.getAttribute("x")),DI=parseFloat(DG.getAttribute("y")),DK=parseFloat(DG.getAttribute("width")),DF=parseFloat(DG.getAttribute("height"));DL.push(DJ+DK/2);DL.push(DI+DF/2);}else{if(DG.tagName==="polygon"){var DC=DG.getAttribute("points");DC=DC.substring(0,DC.length-1);DC=DC.replace(/,/g," ");var DB=DC.split(" "),DH=DB.length;for(DE=0;DE<DH;DE++){if(DE%2===0){DD+=parseInt(DB[DE],10);}else{DA+=parseInt(DB[DE],10);}}DL.push(DD/DH*2);DL.push(DA/DH*2);}}}return DL;}function AQ(DB){if(DB.constructor!==Array){DB=[DB];}var DA=[];Cd.forEach(DB||[],function(DC){var DD=Ay.copy(DC);DA.push(DD);});Cd.forEach(DA||[],function(DC){if(DC.objType===AA.Y2_AXIS){DC.objType=AA.Y_AXIS;}else{if(DC.objType===AA.X2_AXIS){DC.objType=AA.X_AXIS;}else{if(DC.objType===AA.X_AXIS_ORIGIN_LINE||DC.objType===AA.Y_AXIS_ORIGIN_LINE){DC.objType=AA.AXIS_ORIGIN;}else{if(DC.objType===AA.X_AXIS_ORIGIN_LABEL){DC.objType=AA.X_NUMERIC;}else{if(DC.objType===AA.X_ATTRIBUTE_AXIS_TITLE){DC.objType=AA.X_METRIC_AXIS_TITLE;}else{if(DC.objType===AA.Y_AXIS_ORIGIN_LABEL){DC.objType=AA.Y_NUMERIC;}else{if(DC.objType===AA.Y_ATTRIBUTE_AXIS_TITLE){DC.objType=AA.Y_METRIC_AXIS_TITLE;}else{if(DC.objType===AA.ROW_HEADER_TEXT){DC.objType=AA.ROW_HEADER;}else{if(DC.objType===AA.ROW_TITLE_TEXT){DC.objType=AA.ROW_TITLE;}else{if(DC.objType===AA.COL_HEADER_TEXT){DC.objType=AA.COL_HEADER;}else{if(DC.objType===AA.COL_TITLE_TEXT){DC.objType=AA.COL_TITLE;}}}}}}}}}}}});return DA;}function CQ(DA){if(DA.constructor!==Array){DA=[DA];}var DB=[];Cd.forEach(DA||[],function(DC){if(DC===AA.X_CATEGORY){DB.push(AA.X_CATEGORY);DB.push(AA.X_NUMERIC);DB.push(AA.X_AXIS_ORIGIN_LABEL);}else{if(DC===AA.Y_CATEGORY){DB.push(AA.Y_CATEGORY);DB.push(AA.Y_NUMERIC);DB.push(AA.Y_AXIS_ORIGIN_LABEL);}else{if(DC===AA.Y_AXIS){DB.push(AA.Y_AXIS);DB.push(AA.Y2_AXIS);}else{if(DC===AA.X_AXIS){DB.push(AA.X_AXIS);DB.push(AA.X2_AXIS);}else{if(DC===AA.Y_METRIC_AXIS_TITLE){DB.push(AA.Y_METRIC_AXIS_TITLE);DB.push(AA.Y_ATTRIBUTE_AXIS_TITLE);}else{if(DC===AA.X_METRIC_AXIS_TITLE){DB.push(AA.X_METRIC_AXIS_TITLE);DB.push(AA.X_ATTRIBUTE_AXIS_TITLE);}else{DB.push(DC);}}}}}}});return DB;}function CK(DC,DE,DD,DA){DA=!!DA;var DF=[];if(DD.constructor!==Array){DD=[DD];}var DG=function(DH){if(DA){return DH.identity&&DH.identity.tlOpt&&DH.identity.tlOpt[DE];}else{return DH.getAttribute(DE);}};function DB(DJ){var DH=DG(DJ),DI;if(DJ.hasChildNodes()){DI=DJ.firstChild;while(DI){if(DI.nodeType===1){DH=DG(DI);if(DD.indexOf(DH)!==-1){DF.push(DI);}else{DB(DI);}}DI=DI.nextSibling;}}}DB(DC);return DF;}function Bm(DC,DB){DB=DB||[];var DA=false;Cd.forEach(DC||[],function(DD){if(DB.indexOf(DD)!==-1){DA=true;}});return DA;}function B8(DA,DD){var DC,DB=DA.dropZones;Cd.forEach(DB,function(DE){Cd.forEach(DE.items,function(DF){if(DC===undefined&&DF.did===DD){DC=DF;}});});return DC;}function Ah(DD,DC){var DB=DD.dropZones,DA=Cd.find(DB,"id",DC);return DA===-1?true:(DB[DA].items.length===0);}function n(DA){if(DA.zonesModel&&DA.zonesModel.gmZones){return DA.zonesModel.gmZones;}return DA.zonesModel;}function T(DA){var DB,DD,DC={},DE=DA.getSelectedObjectInfo(false),DF=DE.length;for(DB=0;DB<DF;DB++){DD=DE[DB];if(DD.tid!==-1){if(DC[DD.tid]===undefined){DC[DD.tid]=[{id:DD.eid,n:DD.v}];}else{DC[DD.tid][0].n+=(":"+DD.v);}}}return DC;}function w(DF,DE){if(!DF){return ;}if(DE.constructor!==Array){DE=[DE];}var DB=DF.getAttribute("class")||"",DH=" "+DB+" ",DC=false,DA=DE.length,DD;for(DD=0;DD<DA;DD++){var DG=DE[DD];if(!DH.match(new RegExp("\\s"+DG+"\\s"))){DB+=" "+DG;DC=true;}}if(DC){DF.setAttribute("class",Ch.trim(DB));}}function Bl(DE,DD){if(!DE){return ;}if(DD.constructor!==Array){DD=[DD];}var DB=" "+(DE.getAttribute("class")||"")+" ",DA=DD.length,DC;for(DC=0;DC<DA;DC++){DB=DB.replace(new RegExp("\\s"+DD[DC]+"\\s","g")," ");}DE.setAttribute("class",Ch.trim(DB));}function CC(DA,DB){var DC=U[DA+"-"+DB];if(DC===undefined){return C6.INVALID;}return DC;}function Ax(DA,DB){switch(DB){case C6.NORMAL2HOVER:w(DA,"hover");break;case C6.NORMAL2SELECTED:w(DA,"selected");break;case C6.HOVER2NORMAL:Bl(DA,"hover");break;case C6.HOVER2SELECTED:Bl(DA,"hover");w(DA,"selected");break;case C6.SELECTED2NORMAL:Bl(DA,"selected");break;case C6.SELECTED2HOVER:Bl(DA,"selected");w(DA,"hover");break;case C6.SH2SELECTED:Bl(DA,"sh");w(DA,"selected");break;case C6.SELECTED2SH:Bl(DA,"selected");w(DA,"sh");break;case C6.SH2NORMAL:Bl(DA,"sh");w(DA,"normal");break;default:break;}}function BA(DA,DF,DD,DE){var DC=DA+DD*Math.cos(DE),DB=DF+DD*Math.sin(DE);return{x:DC,y:DB};}function AF(DA,DB){return"M "+DA+" "+DB;}function Cw(DA,DB){return"L "+DA+" "+DB;}function Bp(DC,DB,DE,DA,DD){return"A "+DC+","+DC+" 0 "+(DB?"1":"0")+","+(DE?"1 ":"0 ")+DA+","+DD;}function BN(){return"Z";}function BR(DA,DB){return"m "+DA+" "+DB;}function C1(DC,DB,DE,DA,DD){return"a "+DC+","+DC+" 0 "+(DB?"1":"0")+","+(DE?"1 ":"0 ")+DA+","+DD;}function Bo(DG,DD){var DI=DG.sX,DE=DG.sY,DJ=DG.sOutR,DH=DG.sInR,DF="";if(Bb(DI,DE,DJ,DH)){return DF;}DJ-=DD;DH+=DD;var DC=BA(DI,DE,DJ,B),DK=BA(DI,DE,DJ,0),DA=BA(DI,DE,DH,B),DB=BA(DI,DE,DH,0);DF=AF(DC.x,DC.y);DF+=(" "+Bp(DJ,true,true,DK.x,DK.y));DF+=(" "+AF(DB.x,DB.y));DF+=(" "+Bp(DH,true,false,DA.x,DA.y));DF+=(" "+Bp(DH,true,false,DB.x,DB.y));DF+=(" "+AF(DK.x,DK.y));DF+=(" "+Bp(DJ,true,true,DC.x,DC.y));return DF;}function AH(DJ,DD){var DK=DJ.sX,DH=DJ.sY,DG=(!DJ.sR&&DJ.sInR&&DJ.sOutR),DI="";if(DK===undefined||DH===undefined){return DI;}if(DG){DI=Bo(DJ,DD);}else{var DL=DJ.sR-DD*2,DC=DJ.sRadStart,DE=DJ.sRadEnd;DI=AF(DK,DH);var DA=BA(DK,DH,DL,DC),DB=BA(DK,DH,DL,DE),DF=(DE-DC)>B;DI+=(" "+Cw(DA.x,DA.y));DI+=(" "+Bp(DL,DF,true,DB.x,DB.y));DI+=(" "+BN());}return DI;}function Ao(DI,DE){var DJ=DI.sX,DH=DI.sY,DL=DI.sR,DD=DI.sRadStart,DF=DI.sRadEnd;if(DJ===undefined||DH===undefined||DL===undefined||DD===undefined||DF===undefined){return"";}var DK=DD+(DF-DD)/2,DB=BA(DJ,DH,DE/Math.abs(Math.tan((DF-DD)/2)),DK);DJ=DB.x;DH=DB.y;DL-=(DE+DE/Math.abs(Math.sin((DF-DD)/2)));if((DF-DD)>B){DL+=(DE+1.5*DE/Math.abs(Math.sin((DF-DD)/2)));}var DG=AF(DJ,DH),DA=BA(DJ,DH,DL,DD),DC=BA(DJ,DH,DL,DF);DG+=(" "+Cw(DA.x,DA.y));DG+=AF(DJ,DH);DG+=(" "+Cw(DC.x,DC.y));return DG;}function b(DD,DF){var DL=DD.sX,DI=DD.sY,DM=DD.sOutR,DK=DD.sInR,DC=DD.sRadStart,DG=DD.sRadEnd;if(!DC&&!DG){return Bo(DD,DF);}if(DL===undefined||DI===undefined||DM===undefined||DK===undefined||DC===undefined||DG===undefined){return"";}DM-=DF;DK+=DF;DC+=DF*Ac;DG-=DF*Ac;var DN=BA(DL,DI,DM,DC),DB=BA(DL,DI,DM,DG),DE=BA(DL,DI,DK,DC),DJ=BA(DL,DI,DK,DG),DA=DG-DC>B,DH=AF(DE.x,DE.y);DH+=(" "+Bp(DK,DA,true,DJ.x,DJ.y));DH+=(" "+Cw(DB.x,DB.y));DH+=(" "+Bp(DM,DA,false,DN.x,DN.y));DH+=(" "+BN());return DH;}function F(DA){var DB=DA.parentNode;while(DB){if(DB.tagName==="svg"){return DB;}DB=DB.parentNode;}return undefined;}function Ap(DE){if(DE.tagName==="svg"){return DE;}var DB,DC,DA=DE.childNodes,DD=DA.length;for(DB=0;DB<DD;DB++){DC=Ap(DA[DB]);if(DC){return DC;}}return null;}function S(DB){var DD=[],DA=DB.length;if(DA<1){return DD;}DB.sort(function(DG,DF){return DG.sRadStart-DF.sRadStart;});var DE={sRadStart:DB[0].sRadStart,sRadEnd:DB[0].sRadEnd};for(var DC=1;DC<DA;DC++){if(DE.sRadEnd>=DB[DC].sRadStart){DE.sRadEnd=Math.max(DE.sRadEnd,DB[DC].sRadEnd);}else{DD.push(DE);DE={sRadStart:DB[DC].sRadStart,sRadEnd:DB[DC].sRadEnd};}}DD.push(DE);if(DD.length>1&&Math.abs(DD[0].sRadStart+2*B-DD[DD.length-1].sRadEnd)<Q){DD[0].sRadStart=DD[0].sRadEnd;DD[0].sRadEnd=DD[DD.length-1].sRadStart;DD[0].bSeepFlag=true;DD.pop();}return DD;}function Bb(){var DA=[].slice.call(arguments);return DA.some(function(DB){return typeof DB==="undefined";});}var CP={createSVGElement:function(DA){return document.createElementNS("http://www.w3.org/2000/svg",DA);},getPiePointString:function(DK,DI,DL,DE,DG,DM,DF){var DJ="";if(Bb(DK,DI,DL)){return DJ;}if(!Bb(DF)){var DB,DD=(DE+DG)/2;DL-=DF;if(DM){DB=BA(DK,DI,2,DD>Math.PI?DD-Math.PI:DD+Math.PI);DE-=DF/DL;DG+=DF/DL;}else{DB=BA(DK,DI,2,DD);DE+=DF/DL;DG-=DF/DL;}DJ=AF(DB.x,DB.y);}else{DJ=AF(DK,DI);}var DA=BA(DK,DI,DL,DE),DC=BA(DK,DI,DL,DG),DH=(DG-DE)>Math.PI;if(DM){DH=!DH;}DJ+=(" "+Cw(DA.x,DA.y));DJ+=(" "+Bp(DL,DH,!DM,DC.x,DC.y));DJ+=(" "+BN());return DJ;},getRingPointString:function(DJ,DI,DL,DC,DB,DF,DM,DD){var DH="",DG=true;if(Bb(DJ,DI,DL,DC)){return DH;}if(!Bb(DB,DF)&&Math.abs(DF-DB-2*B)>Q){var DA,DE,DN,DK;if(!Bb(DD)){DC-=DD;DL+=DD;if(DM){DB-=DD/DC;DF+=DD/DC;}else{DB+=DD/DC;DF-=DD/DC;}DA=BA(DJ,DI,DC,DB);DE=BA(DJ,DI,DC,DF);DN=BA(DJ,DI,DL,DB);DK=BA(DJ,DI,DL,DF);}else{DA=BA(DJ,DI,DC,DB);DE=BA(DJ,DI,DC,DF);DN=BA(DJ,DI,DL,DB);DK=BA(DJ,DI,DL,DF);}DG=(DF-DB)>Math.PI;if(DM){DG=!DG;}DH+=(" "+AF(DN.x,DN.y));DH+=(" "+Cw(DA.x,DA.y));DH+=(" "+Bp(DC,DG,!DM,DE.x,DE.y));DH+=(" "+Cw(DK.x,DK.y));DH+=(" "+Bp(DL,DG,!!DM,DN.x,DN.y));DH+=(" "+BN());}else{if(!Bb(DD)){DC-=DD;DL+=DD;}DH+=(" "+AF(DJ,DI));DH+=(" "+BR(-DC,0));DH+=(" "+C1(DC,DG,true,DC*2,0));DH+=(" "+C1(DC,DG,true,-DC*2,0));DH+=(" "+AF(DJ,DI));DH+=(" "+BR(-DL,0));DH+=(" "+C1(DL,DG,true,DL*2,0));DH+=(" "+C1(DL,DG,true,-DL*2,0));}return DH;},getPieRingDecoratorPie:function(DF,DE,DD,DA,DC){var DB=null;if(Bb(DF.sRadStart,DF.sRadEnd)||Math.abs(DF.sRadStart+2*B-DF.sRadEnd)<Q){DB=CP.createSVGElement("circle");DB.setAttribute("cx",DE);DB.setAttribute("cy",DD);DB.setAttribute("r",DC?DA-DC:DA);}else{DB=CP.createSVGElement("path");DB.setAttribute("d",CP.getPiePointString(DE,DD,DA,DF.sRadStart,DF.sRadEnd,DF.bSeepFlag,DC));}return DB;},getPieRingDecoratorRing:function(DG,DF,DE,DD,DB,DC){var DA=null;DA=CP.createSVGElement("path");DA.setAttribute("d",CP.getRingPointString(DF,DE,DD,DB,DG.sRadStart,DG.sRadEnd,DG.bSeepFlag,DC));return DA;}};var C0=function(DE){var DG=0,DC,DB={pie:{},ring:{}},DF,DH,DD,DA=[];for(DC=DE.length;DG<DC;DG++){DF=DE[DG];DD=DF.getAttribute("subtype");if(DD!==BK.PIE&&DD!==BK.RING&&DD!==BK.CIRCLE){continue;}if(typeof DF.sR!==undefined&&Bb(DF.sInR,DF.sOutR)){DH=""+DF.sX+"-"+DF.sY+"-"+DF.sR;DA=DB.pie[DH]||(DB.pie[DH]=[]);}else{DH=""+DF.sX+"-"+DF.sY+"-"+DF.sInR+"-"+DF.sOutR;DA=DB.ring[DH]||(DB.ring[DH]=[]);}DA.push(DF);}return DB;};function o(DE,DC){if(DC!==BK.PIE&&DC!==BK.RING&&DC!==BK.CIRCLE){return ;}var DD=DE.decorator,DA=DE.selectedShapes;if(DD){DE.removeChild(DD);delete DE.decorator;}if(typeof DA==="undefined"||DA.length===0){return ;}DD=DE.decorator=CP.createSVGElement("g");DD.setAttribute("type","gm-group-decorator");var DG=C0(DA),DB=Object.keys(DG.pie),DF=Object.keys(DG.ring);Cd.forEach(DB,function(DH){var DI=DG.pie[DH],DL=DI[0].sX,DK=DI[0].sY,DQ=DI[0].sR,DJ=DQ<Ci;var DR=S(DI);for(var DN=0,DP=DR.length;DN<DP;DN++){var DS=DR[DN];var DO=CP.getPieRingDecoratorPie(DS,DL,DK,DQ-1);DO.setAttribute("class","gm-outter-decorator");DD.appendChild(DO);if(!Bb(DS.sRadEnd,DS.sRadStart)){var DT=DS.sRadEnd-DS.sRadStart;if(DS.bSeepFlag){DT=2*B-DT;}if(DT*DQ<Ci){DJ=true;}}if(!DJ){var DM=CP.getPieRingDecoratorPie(DS,DL,DK,DQ,3);DM.setAttribute("class","gm-inner-decorator");DD.appendChild(DM);}}});Cd.forEach(DF,function(DH){var DI=DG.ring[DH],DL=DI[0].sX,DK=DI[0].sY,DR=DI[0].sInR,DT=DI[0].sOutR,DJ=(DT-DR<Ci);var DQ=S(DI);for(var DN=0,DP=DQ.length;DN<DP;DN++){var DS=DQ[DN];var DO=CP.getPieRingDecoratorRing(DS,DL,DK,DR+1,DT-1);DO.setAttribute("class","gm-outter-decorator");DD.appendChild(DO);if(!Bb(DS.sRadEnd,DS.sRadStart)){var DU=DS.sRadEnd-DS.sRadStart;if(DS.bSeepFlag){DU=2*B-DU;}if(DU*(DT+DR)<Ci){DJ=true;}}if(!DJ){var DM=CP.getPieRingDecoratorRing(DS,DL,DK,DR,DT,3);DM.setAttribute("class","gm-inner-decorator");DD.appendChild(DM);}}});DE.appendChild(DD);}function G(DA,DG,DF){var DC=DF.left,DE=DF.top,DB=DC+DF.width,DD=DE+DF.height;return DA>=DC&&DA<DB&&DG>=DE&&DG<DD;}function AK(DA){return Math.round(DA*0.1);}function Cp(DA,DJ,DH,DD){var DF,DE=DA.box;if(DH){var DC=DD.GMController,DI=DC.hasGroupInfoStored(),DB=DI.existing&&DI.gi,DG=this.getZoneItems(DD.currEnteredDropZoneID,DD),DK=DI.existing?DB.length:DG.length,DL=DA.axisIndex;DF=(DJ==="H"?DE.width:DE.height);if(DK===1){DF=DF/2;}else{if(DK>1){if(DL===0){DF=DF*0.67;}else{if(DL===DK-1){DF=DF*0.33;}else{DF=DF*0.5;}}}}}else{if(DJ==="H"){DF=3*AK(DE.width);}else{DF=3*AK(DE.height);}}return DF;}function E(DK,DG,DA,DJ,DI,DD){var DE,DH,DB,DC=DA.box,DF=BU.position(DD.domMainContainer);DK=DK-DF.x;DG=DG-DF.y;if(DI){DH=DJ==="H"?DK-DC.left:DG=DG-DC.top;DE=Cp.call(this,DA,DJ,DI,DD);DB=(DH<DE)?BX:C;}else{if(DJ==="H"){DK=DK-DC.left;DE=Cp.call(this,DA,DJ,DI,DD);DB=(DK<DE)?BX:(DK>DC.width-DE)?C:Au;}else{DG=DG-DC.top;DE=Cp.call(this,DA,DJ,DI,DD);DB=(DG<DE)?BX:(DG>DC.height-DE)?C:Au;}}return DB;}function CM(DC,DM,DL){var DI=DC.length,DF=false,DE,DA,DN,DH,DD,DK,DB,DJ,DG;if(DI/2<3){return false;}DN=DC[DI-2];DH=DC[DI-1];for(DG=0;DG<DI;DG=DG+2){DE=DC[DG];DA=DC[DG+1];if(DE>DN){DD=DN;DB=DE;DK=DH;DJ=DA;}else{DD=DE;DB=DN;DK=DA;DJ=DH;}if(DE===DN&&DA===DH){continue;}if((DE<DM)===(DM<=DN)&&((DL-DK)*(DB-DD)<(DJ-DK)*(DM-DD))){DF=!DF;}DN=DE;DH=DA;}return DF;}function g(DB){var DK,DJ,DF,DE,DM,DA,DD=DB.length,DL=this.widget,DG=DL.manager,DC,DI,DH;this.selectedTargets=this.selectedTargets||[];for(DK=0;DK<DD;DK++){DE=DB[DK];if(DE.byRow){DG.toggleClsByRows(DE.start,DE.end,DE.depth,true,"selected");this.highlightedRows.push({start:DE.start,end:DE.end});DC=DG.filterRowHeaders(DE.start,DE.end,DE.depth,AZ.GM_ROW_HEADER);DI=DC.length;for(DH=0;DH<DI;DH++){this.selectedTargets.push(DC[DH]);this.selectBorders(DC[DH]);}}else{DG.toggleClsByCols(DE.start,DE.end,DE.depth,true,"selected");this.highlightedCols.push({start:DE.start,end:DE.end});DC=DG.filterColHeaders(DE.start,DE.end,DE.depth,AZ.GM_COL_HEADER);DI=DC.length;for(DH=0;DH<DI;DH++){this.selectedTargets.push(DC[DH]);this.selectBorders(DC[DH]);}}DM=DE.att;DA=DE.elements;if(DM&&DA){for(DJ=0,DF=DA.length;DJ<DF;DJ++){DL.addAttributeSelection(DM,DA[DJ].id,DA[DJ].n);}}}}function Cg(DA){return DA.getAttribute("status")===s.SELECTED;}function Af(DA){return DA.getAttribute("status")===s.SH;}function CL(DD){if(DD.getAttribute("size")==="small"){if(DD.getAttribute("class")==="gm-shape-bar hover"){DD.setAttribute("class","gm-shape-bar small hover");}return undefined;}var DC=document.createElementNS("http://www.w3.org/2000/svg","rect"),DA=parseFloat(DD.getAttribute("x")),DF=parseFloat(DD.getAttribute("y")),DB=parseFloat(DD.getAttribute("width")),DE=parseFloat(DD.getAttribute("height"));DC.setAttribute("class",DD.getAttribute("subtype")===BK.SQUARE?"gm-marker-square":"gm-marker-bar");DC.setAttribute("type","marker");DC.setAttribute("x",DA+1.5);DC.setAttribute("y",DF+1.5);DC.setAttribute("width",DB-3);DC.setAttribute("height",DE-3);DC.identity=DD.identity;return DC;}function Cb(DA,DE,DC,DB){var DD=document.createElementNS("http://www.w3.org/2000/svg","circle");DD.setAttribute("cx",DA);DD.setAttribute("cy",DE);DD.setAttribute("r",DC-DB);return DD;}function CI(DC){if(DC.getAttribute("size")==="small"){return undefined;}var DA=parseFloat(DC.getAttribute("cx")),DE=parseFloat(DC.getAttribute("cy")),DD=parseFloat(DC.getAttribute("r")),DB=Cb(DA,DE,DD,1.5);DB.setAttribute("class","gm-marker-circle");DB.setAttribute("type","marker");DB.identity=DC.identity;return DB;}function C3(DA){return DA.nodeName==="circle";}function BV(DC){if(DC.getAttribute("size")==="small"){return undefined;}var DB;if(C3(DC)){DB=Cb(DC.sX,DC.sY,DC.sR,2);}else{DB=document.createElementNS("http://www.w3.org/2000/svg","path");var DA=AH(DC,2);if(DA!==""){DB.setAttribute("d",DA);}}DB.setAttribute("class","gm-marker-pie");DB.setAttribute("type","marker");DB.identity=DC.identity;return DB;}function An(DC){if(DC.getAttribute("size")==="small"){return undefined;}var DB=document.createElementNS("http://www.w3.org/2000/svg","path"),DA=Ao(DC,0.5);DB.setAttribute("class","gm-marker-outer-line");DB.setAttribute("type","marker");if(DA!==""){DB.setAttribute("d",DA);}DB.identity=DC.identity;return DB;}function Aa(DC){if(DC.getAttribute("size")==="small"){return undefined;}var DB=document.createElementNS("http://www.w3.org/2000/svg","path"),DA=Ao(DC,2);DB.setAttribute("class","gm-marker-inner-line");DB.setAttribute("type","marker");if(DA!==""){DB.setAttribute("d",DA);}DB.identity=DC.identity;return DB;}function Cl(DC){if(DC.getAttribute("size")==="small"){return undefined;}var DB=document.createElementNS("http://www.w3.org/2000/svg","path"),DA=b(DC,2);DB.setAttribute("class","gm-marker-ring");DB.setAttribute("type","marker");DB.setAttribute("d",DA);DB.identity=DC.identity;return DB;}function Br(DC){if(DC.getAttribute("size")==="small"){return undefined;}var DB=document.createElementNS("http://www.w3.org/2000/svg","circle"),DA=parseFloat(DC.getAttribute("cx")),DE=parseFloat(DC.getAttribute("cy")),DD=parseFloat(DC.getAttribute("r"));DB.setAttribute("class","gm-marker-scircle");DB.setAttribute("type","marker");DB.setAttribute("cx",DA);DB.setAttribute("cy",DE);DB.setAttribute("r",DD-2);DB.identity=DC.identity;return DB;}function AR(DA){var DC,DB=CP.createSVGElement("polygon"),DE=DA.length,DD="";for(DC=0;DC<DE;++DC){DD+=(DA[DC].x+","+DA[DC].y+" ");}DB.setAttribute("points",DD);return DB;}function Cu(DA,DB){this.x=DA;this.y=DB;}var Cv=Cu.prototype;Cv.dot=function(DA){return this.x*DA.x+this.y*DA.y;};Cv.add=function(DA){return new Cu(this.x+DA.x,this.y+DA.y);};Cv.diff=function(DA){return new Cu(this.x-DA.x,this.y-DA.y);};Cv.length=function(){return Math.sqrt(this.dot(this));};Cv.normalize=function(){var DA=this.length();this.x/=DA;this.y/=DA;return this;};Cv.scale=function(DA){return new Cu(this.x*DA,this.y*DA);};Cv.isInPolygon=function(DD){var DE=DD.length,DA=false,DC,DB;if(DE<3){return false;}for(DC=0,DB=DE-1;DC<DE;DB=DC++){if(((DD[DC].y<=this.y&&this.y<DD[DB].y)||(DD[DB].y<=this.y&&this.y<DD[DC].y))&&this.x<=(DD[DB].x-DD[DC].x)*(this.y-DD[DC].y)/(DD[DB].y-DD[DC].y)+DD[DC].x){DA=!DA;}}return DA;};function Ai(DN,DF){DF=DF||2.5;var DG=0,DJ=DN.length,DE=[],DI=[],DD,DM,DH,DK,DB;for(DG=0;DG<DJ;DG++){DE.push(new Cu(DN[DG].x,DN[DG].y));}for(DG=0,DJ=DE.length;DG<DJ;DG++){DM=DE[DG];DD=DE[DG===0?DJ-1:DG-1];DH=DE[DG===DJ-1?0:DG+1];var DP=DD.diff(DM);var DO=DH.diff(DM);DP.normalize();DO.normalize();DK=DP.dot(DO);DB=Math.sqrt((1-DK)/2);var DC=DF/DB;var DA=DP.add(DO).normalize();var DL=DM.add(DA.scale(DC));if(!DL.isInPolygon(DE)){DL=DM.add(DA.scale(-1*DC));}DI.push(DL);}return DI;}function CV(DB){if(DB.tagName==="circle"){return CI(DB);}var DA=CP.createSVGElement("g"),DC=DB.points;DA.setAttribute("type","gm-group-decorator");var DE=AR(DC);DE.setAttribute("class","gm-outter-decorator");DA.appendChild(DE);if(DB.getAttribute("size")==="small"){return DA;}DC=Ai(DC,2.5);var DD=AR(DC);DD.setAttribute("class","gm-inner-decorator");DA.appendChild(DD);return DA;}function Bc(DB,DC){var DA=DB.decorator;if(DA){return DA;}if(!DC){DC=DB.getAttribute("subtype");}switch(DC){case BK.BAR:case BK.GBAR:case BK.SQUARE:DA=CL(DB);break;case BK.SCIRCLE:DA=Br(DB);break;case BK.CIRCLE:DA=CI(DB);break;case BK.PIE:DA=BV(DB);break;case BK.RING:DA=Cl(DB);break;case BK.SBAR:DA=CV(DB);break;case BK.TICKER:break;}if(DA){DA.source=DB;DB.decorator=DA;}return DA;}function c(DD,DE){var DB=parseFloat(DD.getAttribute("x")),DG=parseFloat(DD.getAttribute("y")),DC=parseFloat(DD.getAttribute("width")),DF=parseFloat(DD.getAttribute("height")),DA=parseInt(DD.style.strokeWidth,10);if(DD.getAttribute("size")==="small"){switch(DE){case C6.NORMAL2HOVER:case C6.SELECTED2HOVER:DD.setAttribute("x",DB-DA/2);DD.setAttribute("y",DG-DA/2);DD.setAttribute("width",DC+DA);DD.setAttribute("height",DF+DA);break;case C6.HOVER2NORMAL:case C6.HOVER2SELECTED:DD.setAttribute("x",DB+DA/2);DD.setAttribute("y",DG+DA/2);DD.setAttribute("width",DC-DA);DD.setAttribute("height",DF-DA);break;default:break;}return ;}switch(DE){case C6.NORMAL2HOVER:case C6.NORMAL2SELECTED:DD.setAttribute("x",DB+0.5);DD.setAttribute("y",DG+0.5);DD.setAttribute("width",DC-1);DD.setAttribute("height",DF-1);DD.style.strokeWidth=DA+1;break;case C6.HOVER2NORMAL:case C6.SELECTED2NORMAL:DD.setAttribute("x",DB-0.5);DD.setAttribute("y",DG-0.5);DD.setAttribute("width",DC+1);DD.setAttribute("height",DF+1);DD.style.strokeWidth=DA-1;break;default:break;}}function CZ(DB,DC){var DD=DB.parentNode,DA=Bc(DB);switch(DC){case C6.NORMAL2HOVER:case C6.NORMAL2SELECTED:if(DD&&DA){DD.appendChild(DA);}break;case C6.HOVER2NORMAL:case C6.SELECTED2NORMAL:if(DD&&DA){DD.removeChild(DA);}break;default:break;}}function Ct(DB,DC){var DD=DB.parentNode,DA=Bc(DB);if(DB.tagName==="polygon"&&DB.getAttribute("subtype")===BK.SBAR){DD=DD.parentNode;if(!DD){return ;}switch(DC){case C6.NORMAL2SELECTED:case C6.NORMAL2HOVER:if(DA&&DD){DD.appendChild(DA);}break;case C6.SELECTED2NORMAL:case C6.HOVER2NORMAL:if(DA){DD.removeChild(DA);}break;}}else{if(!DD){return ;}switch(DC){case C6.NORMAL2SELECTED:case C6.HOVER2SELECTED:if(DA){DD.appendChild(DA);}break;case C6.SELECTED2NORMAL:case C6.SELECTED2HOVER:if(DA){DD.removeChild(DA);}break;}}}function As(DA,DB){var DD=DA.sd,DC=DA.sD;switch(DB){case C6.NORMAL2SELECTED:case C6.HOVER2SELECTED:if(C3(DA)){DA.setAttribute("r",DA.sR-0.5);}else{if(!DD){DD=AH(DA,0.5);DA.sd=DD;}DA.setAttribute("d",DD);}DA.style.strokeWidth=2;break;case C6.SELECTED2NORMAL:case C6.SELECTED2HOVER:if(C3(DA)){DA.setAttribute("r",DA.sR);}else{if(!DC){DC=AH(DA,0);DA.sD=DC;}DA.setAttribute("d",DC);}DA.style.strokeWidth=1;break;default:break;}}function CW(DC){var DB=DC.parentNode,DD=DB&&DB.parentNode,DE=[],DH=this.widget.GMController,DG=DH.getChartInfo(),DF=DG.isABL&&(DG.shape===Bs.CIRCLE||DG.shape===Bs.PIE||DG.shape===Bs.RING||DG.shape===Bs.SQUARE);var DA=function(){DD.removeChild(DB);var DI=DD.childNodes.length,DK=DI>0&&DD.childNodes[DI-1],DJ=DK.childNodes.length>0&&DK.childNodes[0].nodeName==="text";if(DJ){DD.insertBefore(DB,DK);}else{DD.appendChild(DB);}};if(!DB||!DD){return ;}switch(DC.getAttribute("subtype")){case BK.SQUARE:case BK.SCIRCLE:if(DF){DA();}break;case BK.PIE:case BK.RING:case BK.CIRCLE:if(DF){DA();}[].slice.call(DB.childNodes).forEach(function(DI){if(DI.sX===DC.sX&&DI.sY===DC.sY){DE.push(DI);}});DE.forEach(function(DI){DB.removeChild(DI);});DE.forEach(function(DI){DB.appendChild(DI);});break;}return ;}function Ce(DC,DB){if(!DC){return ;}var DA=DC.getAttribute("status")||s.NORMAL;if(DB===DA){return ;}var DD=CC(DA,DB);Ax(DC,DD);switch(DC.getAttribute("subtype")){case BK.BAR:c(DC,DD);Ct(DC,DD);break;case BK.SCIRCLE:CZ(DC,DD);break;case BK.GBAR:case BK.SQUARE:case BK.SBAR:case BK.TICKER:Ct(DC,DD);break;default:break;}DC.setAttribute("status",DB);}function BG(DD,DB){if(!DD){return ;}var DA=DD.getAttribute("status")||s.NORMAL;if(DB===DA){return ;}var DC=CC(DA,DB);Ax(DD,DC);DD.setAttribute("status",DB);}function Ak(DE,DA){var DB=this.widget,DC=this.domMenuPH,DD=this;DC.innerHTML="";document.body.appendChild(DC);DB.configurePopup(DA,DC);DB.menuEditor=DA.newInstance({locksHover:false,unrender:function(){}});DB.menuEditorClosefn=function(DG){var DI=DG.target,DF=DB.menuEditor.domNode;if(!BU.contains(DF,DI,true,DF)&&!Cm.isHostedPopupNode(DI,"class",true,document.body)){if(DB.toolEditor){var DH=DB.toolEditor.domNode;if(!BU.contains(DH,DI,true,DH)){DD.hideContextMenu();}}else{DD.hideContextMenu();}}};BU.attachEvent(document.body,"mousedown",DB.menuEditorClosefn,true);DB.openPopup(DB.menuEditor);}function AJ(DE,DB){var DA=this.widget,DC=this.domToolbarPH,DD=this;DA._lastOpened=null;DC.innerHTML="";document.body.appendChild(DC);B7.toggleClass(DC,mstrApp.getThemeClassName(),true);DA.configurePopup(DB,DC);DA.toolEditor=DB.newInstance({unrender:function(){}});DA.toolEditorClosefn=function(DG){var DI=DG.target,DH=DA.toolEditor.domNode;if(!BU.contains(DH,DI,true,DH)&&!Cm.isHostedPopupNode(DI,"class",true,document.body)){if(DA.menuEditor){var DF=DA.menuEditor.domNode;if(!BU.contains(DF,DI,true,DF)){DD.hideToolbar();}}else{DD.hideToolbar();}}};BU.attachEvent(document.body,"mousedown",DA.toolEditorClosefn,true);DA.openPopup(DA.toolEditor);B7.toggleClass(document.body,"hasToolbarPopup",true);}function AL(DE,DB){var DA=this.widget,DC=this.domToolbarPH,DD=this;if(DA._lastOpened){DA.closePopup();}DA._lastOpened=null;DC.style.top=DE.y+"px";DC.style.left=DE.x+"px";DC.innerHTML="";document.body.appendChild(DC);B7.toggleClass(DC,mstrApp.getThemeClassName(),true);DA.configurePopup(DB,DC);DA.toolEditor=DB.newInstance({unrender:function(){}});DA.toolEditorClosefn=function(DG){var DI=DG.target,DH=DA.toolEditor.domNode;if(!BU.contains(DH,DI,true,DH)&&!Cm.isHostedPopupNode(DI,"class",true,document.body)){if(DA.menuEditor){var DF=DA.menuEditor.domNode;if(!BU.contains(DF,DI,true,DF)){DD.hideToolbar();}}else{DD.hideToolbar();}}};BU.attachEvent(document.body,"mousedown",DA.toolEditorClosefn,true);DA.openPopup(DA.toolEditor);B7.toggleClass(document.body,"hasToolbarPopup",true);}function BZ(DD,DC,DB,DA){var DE;if(DA===undefined){if(DB===B5.GLOBAL){if(DC===C9.BG_COLOR){DE=DD.getFormats()["background-color"];}else{DE=DD.readGlobalProperty(DC);}}else{if(DB===B5.FORMATTING){DE=DD.getPropertiesOfFormatable();}}}else{DE=DD.readGlobalProperty(DA.realPropName,DA.opt);}if(typeof DE==="object"&&DE.jsonObj){DE=DE.jsonObj[DC];}if(DC.slice(-3)===X.COLOR&&DC!==C9.BG_COLOR){DE=p.decodeColor(DE);}return DE;}function Az(DD,DC,DB,DA){if(DA!==undefined){return function(DG){var DE=DD.readGlobalProperty(DA.realPropName,DA.opt),DF=DE.jsonObj[DC];if(DC.indexOf(X.COLOR)!==-1){DG=p.encodeColor(DG);}if(DG!==DF){DE.setProperty(DC,DG);DD.writeGlobalProperty(DA.realPropName,DE,DA.opt);}};}if(DB===B5.GLOBAL){return function(DF){var DE=BZ(DD,DC,B5.GLOBAL);if(DF!==DE){if(DC.indexOf(X.COLOR)!==-1){DF=p.encodeColor(DF);}DD.writeGlobalProperty(DC,DF);}};}return function(DH){var DG=BZ(DD,DC,B5.FORMATTING),DF=p.checkEquality(DH,DG);if(!DF){if(DC.indexOf(X.COLOR)!==-1){DH=p.encodeColor(DH);}var DE=DD.getPropertiesOfFormatable();if(DE&&DE.jsonObj&&!p.checkEquality(DE.jsonObj[DC],DH)){DE.setProperty(DC,DH);DD.writeFormatableProperties(DE);}}};}function Cn(DB,DA){DB=DB||[];DA=DA||"";Cd.forEach(DB,function(DC){DC.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",cssClass:DA,children:DB};}function Bv(DA,DB){return new mstrmojo.Box({children:DA||[],cssText:DB});}function CN(DE,DF,DG,DA){var DB=new mstrmojo.Label({text:DE}),DD=Bv(DB,"white-space: nowrap; margin-right:9px;");var DC=[DD,DF];if(DG){DC=[DF,DD];}return Cn(DC,DA);}function BI(DE,DC,DD,DB,DA){DC=DC||{};if(DC.propNames===undefined){DC.propNames=DD;}if(DC.onGroupValueChange===undefined){DC.onGroupValueChange=function(DF,DH,DG){if(DH!==DG&&DH!==undefined){if(DF===C9.BG_COLOR){Cm.changeWidgetBackground(DE,DH,DG);}else{Az(DE,DF,DB,DA).call(this,DH,DG);}}};}return DC;}function CT(DD,DE,DC,DB,DA){Cd.forEach(DC,function(DF){var DG=BZ(DD,DF,DB,DA);DE.syncControls(function(){DE.setChildValue(DF,DG);});});}function CJ(DF,DB,DE,DD,DA,DC){DC=BI(DF,DC,DE,DD,DA);Ay.copy({cssClass:"mstrmojo-ui-ToolBarLineGroup",layoutConfig:null,width:DC.width||"125px",showNoFillInColor:false},DC);var DG=new mstrmojo.ui.editors.controls.LineConfigGroup(DC);if(DG){DG.height="22px;";DG.iniChildrenComp(DE);CT(DF,DG,DE,DD,DA);}if(typeof DB==="string"){return CN(DB,DG,false,(DC||[]).rowContainerCSSClass);}return DG;}function C8(DE,DA,DD,DC,DB){DB=BI(DE,DB,DD,DC);Ay.copy({width:DB.width||"140px",height:"22px",colorPickerHostWithin:true},DB);var DF=new mstrmojo.ui.editors.controls.FillConfigGroup(DB);if(DF){DF.iniChildrenComp(DD);CT(DE,DF,DD,DC);if(DF.children[0]&&DF.children[0].children[0]){p.initColorPickerBtnWithGradientDir(DF.children[0].children[0],DE);}}if(typeof DA==="string"){return CN(DA,DF);}return DF;}function CH(DF,DE,DH,DC,DD){var DB=DF.model.data.dz.ColorBy,DG=CJ(DF,mstrmojo.desc(9736,"Border"),DE,DC,undefined,{rowContainerCSSClass:"mstrmojo-ui-rowContainer",showNoneOption:false}),DA=C8(DF,mstrmojo.desc(2885,"Fill"),DH,DC,{onGroupValueChange:function(DJ,DN,DK){if(DN!==DK&&DN!==undefined){var DL="shpBdrClr_default",DI=DF.getPropertiesOfFormatable(),DM=DI.jsonObj[DL];if(DB.TemplateUnit&&DJ===C9.SHAPE_FILL_COLOR&&DM){DG.children[1].syncControls(function(){this.setChildValue(C9.SHAPE_BORDER_COLOR,DN);});}Az(DF,DJ,DC).call(this,DN,DK);}},showGradient:DF.interactor.isShowGradientAllowed(DD)});return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolbarBorderAndFill",children:[DA,DG]}]});}function Ag(DF,DB,DE,DD,DA,DC){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[CJ(DF,DB,DE,DD,DA,DC)]}]});}function Aj(DE,DA,DD,DC,DB){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[C8(DE,DA,DD,DC,DB)]}]});}function f(DA){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-FillOpacityAndBorderStyleToolbar",children:[C8(DA,mstrmojo.desc(13658,"Fill Opacity"),[C9.SHAPE_FILL_TRANSPARENCY],B5.FORMATTING,{width:"60px",visibleControls:mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS.FILL_TRANSPARENCY}),CJ(DA,mstrmojo.desc(3538,"Border Style"),[C9.SHAPE_BORDER_COMBINED_STYLE],B5.FORMATTING,undefined,{width:"60px",hideColorControl:true,rowContainerCSSClass:"mstrmojo-ui-rowContainer"})]}]});}function CB(DH,DF,DE,DD,DC,DA){var DB=BZ(DF,DE,DD),DG={showGradient:!!DA,isHostedWithin:true,width:"40px",selectedValue:DB,postselectedValueChange:function(DI){Az(DF,DE,DD).call(this,DI.value,DI.valueWas);}};DH=DH||"ColorPickerButton";DC=Ay.copy(DG,DC);return new mstrmojo.ui.editors.controls[DH](DC);}function L(DE,DC,DB){var DD={sourceColor:DC,checkboxLabel:DB},DA=CB("MarkerColorPickerButton",DE,C9.LINE_MARKER_COLOR,B5.FORMATTING,DD);return CN(mstrmojo.desc(6242,"Color"),DA);}function Z(DH,DD,DC,DG,DF,DB){var DE={alias:DD},DA=CB("ColorPickerButton",DH,DG,DF,DE,DB);if(typeof DC==="string"){return CN(DC,DA);}return DA;}function Bk(DG,DF,DE,DD){var DC=DG.readGlobalProperty(DF),DA=DC.color,DH=DG.interactor;return new mstrmojo.ui.menus.ToolbarEditorConfig({cssClass:"cbsquare-colorpicker",contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker(Ay.copy(DD,{color:DC.isDefaultColor?P.VAL_AUTOMATIC:DA,autoPreviewColor:DC.isDefaultColor?DA:null,colorChanged:function(DI){DI=(this.showAutomatic&&DI===P.VAL_AUTOMATIC)?AU:DI;Az(DG,DF,DE).call(this,DI,DA);DH.hideToolbar();},colorCanceled:function(){DH.hideToolbar();},showPickerForCurrentMode:function DB(){mstrmojo.ui.editors.controls.AdvancedColorPicker.prototype.showPickerForCurrentMode.call(this);if(this.pickerMode===2&&typeof this.color!=="object"){var DI=this.gradientOrientation,DJ=DG.getChartInfo().dirc===B2.EnumABLDirection.VERTICAL;DI.set("selectedIndex",Cd.find(DI.items,"id",DJ?0:1));}}}))]});}function A8(DC,DB){var DD=[],DA=[];Cd.forEach(DC,function(DE){DD.push(DE.tid);DA.push(DE.eid);});return DB.getColorBy(DD,DA);}function Al(DE,DD,DC,DA,DF){var DB=DA.jsonObj[DD];return new mstrmojo.ui.menus.PopupConfig({contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker({color:p.decodeColor(DB),showNoFill:DF,colorChanged:function(DG){var DH=p.encodeColor(DG);if(DH!==DB){DA.setProperty(DD,DH);DA.opt=DC.opt;DE.writeGlobalProperty(DC.realPropName,DA,DC.opt);DE.raiseEventFormatableChanged();}this.parent.popupConfig.close();},colorCanceled:function(){this.parent.popupConfig.close();}})]});}function Bi(DG,DI,DL,DE){var DK,DJ,DB,DH=false,DC;if(DL.TemplateUnit||DL.MetricNames!==undefined){DC=true;DK=(DG.getDocModel&&DG.getDocModel())||DG.model.docModel;DJ=DI.identity.getSelectedObjectColorByInfo();var DD=A8(DJ,DK);DB=DD.color;DH=DD.isManual;}else{DC=false;DB=DG.readGlobalProperty(C9.SHAPE_FILL_COLOR);}var DA=p.decodeColor(DB);return new mstrmojo.ui.menus.PopupConfig({contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker(Ay.copy(DE,{color:DH?DA:P.VAL_AUTOMATIC,autoPreviewColor:DH?null:DA,colorChanged:function(DM){var DN=(this.showAutomatic&&DM===P.VAL_AUTOMATIC)?AU:p.encodeColor(DM);if(DN!==DB){if(DC){DG.updateColorByMap([DJ],DN);}else{Az(DG,C9.SHAPE_FILL_COLOR,B5.FORMATTING).call(this,DM);}}this.parent.popupConfig.close();},colorCanceled:function(){this.parent.popupConfig.close();},showPickerForCurrentMode:function DF(){mstrmojo.ui.editors.controls.AdvancedColorPicker.prototype.showPickerForCurrentMode.call(this);var DN=this.parent,DM=function DM(){DN.adjustCornersForPopupOverflow();};if(this.pickerMode===2){this.colorStyle.markupMethods=Ay.copy({onselectedIndexChange:DM},Ay.copy(this.colorStyle.markupMethods));}if(this.pickerMode===2&&typeof this.color!=="object"){var DO=this.gradientOrientation,DP=DG.getChartInfo().dirc===B2.EnumABLDirection.VERTICAL;DO.set("selectedIndex",Cd.find(DO.items,"id",DP?0:1));}DM();}}))]});}function Be(DH,DB,DF){var DA={},DG=BZ(DF,DB+X.FONT_STYLE,B5.GLOBAL),DD=BZ(DF,DB+X.FONT_COLOR,B5.GLOBAL),DC=BZ(DF,DB+X.FONT_FAMILY,B5.GLOBAL),DE=BZ(DF,DB+X.FONT_SIZE,B5.GLOBAL);if(DG!==undefined){DA[A0.FONT_WEIGHT]=(!isNaN(DG)&&((DG&y.FS_BOLD)>0));DA[A0.FONT_STYLE]=(!isNaN(DG)&&((DG&y.FS_ITALIC)>0));DA[A0.UNDERLINE]=(!isNaN(DG)&&((DG&y.FS_UNDERLINE)>0));DA[A0.LINE_THROUGH]=(!isNaN(DG)&&((DG&y.FS_STRIKETHROUGH)>0));}DA[A0.COLOR]=DD!==undefined?DD:-1;DA[A0.FONT_SIZE]=DE!==undefined?DE:-1;DA[A0.FONT_FAMILY]=DC!==undefined?DC:-1;DH.setFormatSource(DA);}function B0(DD,DE,DC,DA){var DB={bold:y.FS_BOLD,italic:y.FS_ITALIC,underline:y.FS_UNDERLINE,strikeout:y.FS_STRIKETHROUGH};DC.forEach(function(DF){var DG=null;if(DF.indexOf(X.FONT_STYLE)>-1){DG=DE.fontStyle;DG.postselectionChange=function(DH){var DK=DH.added,DL=this.items[(DK&&DK[0]!==undefined)?DK[0]:DH.removed[0]],DJ=!!DK,DI=BZ(DD,DF,DA),DM=(DI===undefined?0:DI);if(DJ){DM=DM|DB[DL.css];}else{DM=DM&(~DB[DL.css]);}this.parent.raiseFormatValueChange(DF,DM,DI);};}else{if(DF.indexOf(X.FONT_FAMILY)>-1){DG=DE.fontFamily;DG.postselectedIndexChange=function(DH){var DK=DH.value,DJ=DH.valueWas;if(DK!==DJ){var DI=this.items;this.parent.raiseFormatValueChange(DF,DI[DK].id,DI[DJ]&&DI[DJ].id);}};}else{if(DF.indexOf(X.FONT_SIZE)>-1){DG=DE.fontSize;DG.postselectedValueChange=function(DH){var DJ=parseInt(DH.value,10)+"pt",DI=parseInt(DH.valueWas,10)+"pt";if(DJ!==DI){this.parent.parent.raiseFormatValueChange(DF,DJ,DI);}};DG.validateTextInput=function(DJ,DH){var DI=parseInt(DJ,10);if(isNaN(DI)){return DH;}return DI.toString();};}else{if(DF.indexOf(X.FONT_COLOR)>-1){DG=DE.fontColor;DG.postselectedValueChange=function(DH){this.parent.parent.raiseFormatValueChange(DF,DH.value,DH.valueWas);};}}}}if(DG){DG.propName=DF;}});}function BE(DE,DA,DD,DC,DB,DG){if(DB===undefined){DB={};}if(DG!==undefined){DB.showNoFillInColor=DG;}DB=Ay.copy(DE.getFontToolbarProps(),DB);if(DB.propNames===undefined){DB.propNames=DD;}if(DB.onGroupValueChange===undefined){DB.onGroupValueChange=function(DH,DJ,DI){if(DJ!==DI&&DJ!==undefined){Az(DE,DH,B5.GLOBAL).call(this,DJ,DI);}};}var DF=new mstrmojo.ui.editors.controls.CharacterGroup(DB);B0(DE,DF,DD,DC);Be(DF,DA,DE);return DF;}function K(DE,DA,DD,DC,DB,DF){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[BE(DE,DA,DD,DC,DB,DF)]}]});}function A4(DC,DB,DA){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.HBox",children:[L(DC,DB,DA)]}]});}function Bt(DC){var DA=Ay.keyarray(DC).sort(),DB=[],DD;DA.forEach(function(DE){DD=[];DC[DE].forEach(function(DF){DD.push(DF.id);});DB.push(DE+"-"+DD.sort().join("@"));});return DB.join("#");}function W(DD,DA){var DE,DH,DC=DD.identity,DB,DG={};if(DA){DB=DC.getSelectedObjectColorByInfo();}else{DB=DC.getSelectedObjectLowestLevel(true);}for(DE=0,DH=DB.length;DE<DH;DE++){var DF=DG[DB[DE].tid];if(DF===undefined){DG[DB[DE].tid]=[{id:DB[DE].eid}];}else{DF.push({id:DB[DE].eid});}}DG.hashKey=Bt(DG);return DG;}function A6(DA){return W.call(this,DA,true);}function AY(DA){return W.call(this,DA,false);}function Bf(DC,DA){var DB,DD,DE=DC.length;for(DB=0;DB<DE;DB++){DD=DC[DB];if(DD.hashKey===DA.hashKey){return DB;}}return -1;}function B1(DA){return DA===AZ.GM_SHAPE||DA===AZ.MARKER;}function CU(DA){return DA===AZ.GM_ROW_HEADER||DA===AZ.GM_ROW_HEADER_TITLE||DA===AZ.GM_ROW_HEADER_EXTRA;}function By(DA){return DA===AZ.GM_ROW_HEADER_TITLE;}function CE(DA){return DA===AZ.GM_ROW_HEADER||DA===AZ.GM_ROW_HEADER_EXTRA;}function A5(DA){return DA===AZ.GM_COL_HEADER||DA===AZ.GM_COL_HEADER_TITLE||DA===AZ.GM_COL_HEADER_EXTRA;}function R(DA){return DA===AZ.GM_COL_HEADER_TITLE;}function Ar(DA){return DA===AZ.GM_COL_HEADER||DA===AZ.GM_COL_HEADER_EXTRA;}function h(DA){return DA===AZ.GM_H_MATRIX_LINE||DA===AZ.GM_V_MATRIX_LINE||DA===AZ.GM_H_CHART_LINE||DA===AZ.GM_V_CHART_LINE;}function Ck(DA){return DA===AZ.GM_V_MATRIX_LINE||DA===AZ.GM_V_CHART_LINE;}function CD(DA){return DA===AZ.GM_H_MATRIX_LINE||DA===AZ.GM_H_CHART_LINE;}function t(DA){return DA===AZ.GM_YAXIS_LINE||DA===AZ.GM_XAXIS_LINE||DA===AZ.GM_YAXIS2_LINE||DA===AZ.GM_XAXIS2_LINE;}function B4(DA){return DA===AZ.GM_ORIGIN_LINE;}function BP(DA){return DA===AZ.GM_ORIGIN_LABEL_V||DA===AZ.GM_ORIGIN_LABEL_H;}function x(DA){return DA===AZ.GM_TREND_LINE;}function Bq(DA){return DA===AZ.GM_REF_LINE;}function BD(DA){return DA===AZ.GM_XAXIS_LINE||DA===AZ.GM_XAXIS2_LINE;}function Ca(DA){return DA===AZ.GM_YAXIS_LINE||DA===AZ.GM_YAXIS2_LINE;}function M(DA){return DA===AZ.GM_XLABEL||DA===AZ.GM_YLABEL;}function BQ(DA){return DA===AZ.GM_X_NUMERIC||DA===AZ.GM_Y_NUMERIC;}function AW(DA){return DA===AZ.GM_X_NUMERIC||DA===AZ.GM_X_CATEGORY||DA===AZ.GM_Y_NUMERIC||DA===AZ.GM_Y_CATEGORY;}function Aq(DA){return DA===AZ.GM_H_GRID_LINE||DA===AZ.GM_V_GRID_LINE||DA===AZ.GM_H_MINOR_GRID_LINE||DA===AZ.GM_V_MINOR_GRID_LINE;}function BL(DA){return DA===AZ.GM_H_GRID_LINE||DA===AZ.GM_V_GRID_LINE;}function H(DA){return DA===AZ.GM_H_MINOR_GRID_LINE||DA===AZ.GM_V_MINOR_GRID_LINE;}function A1(DA){return DA===AZ.GM_DATA_LABEL;}function N(DB){if(DB.constructor!==Array){DB=[DB];}var DC=this.selectedTargets||[],DA=false;DC.forEach(function(DE){var DD=DE.getAttribute("type");if(DB.indexOf(DD)>-1){DA=true;}});return DA;}function AX(DE){var DA,DH,DC,DG=DE.getAttribute("type"),DD,DF,DB,DI=false;if(DG===null&&DE.innerHTML==="|"&&DE.className==="gm-text-body-nowrap"){DG=AZ.GM_SVG_Y_NUMERIC;}if(DG===null){DE=DE.parentNode;DG=DE.getAttribute("type");}if(DG===AZ.LINE_CONTAINER){DE=DE.firstChild;DG=DE.getAttribute("type");}if(DG===AZ.GM_AXIS_TEXT||DG===AZ.GM_AXIS_WORD){DE=F(DE);DG=DE&&DE.getAttribute("type");}if(DG===AZ.GM_TEXT_BODY){DA=DE.parentNode;DH=DA.getAttribute("type");switch(DH){case AZ.GM_ROW_HEADER_TITLE:case AZ.GM_COL_HEADER_TITLE:case AZ.GM_COL_HEADER:case AZ.GM_ROW_HEADER:case AZ.GM_COL_HEADER_EXTRA:case AZ.GM_ROW_HEADER_EXTRA:case AZ.GM_YLABEL:case AZ.GM_XLABEL:DC=DA;break;}}else{switch(DG){case AZ.GM_YLABEL:case AZ.GM_XLABEL:case AZ.GM_SVG_Y_NUMERIC:case AZ.GM_SVG_X_NUMERIC:case AZ.GM_SVG_X_CATEGORY:case AZ.GM_SVG_Y_CATEGORY:DC=DE.parentNode.parentNode;break;case AZ.GM_Y_NUMERIC:case AZ.GM_X_NUMERIC:case AZ.GM_X_CATEGORY:case AZ.GM_Y_CATEGORY:case AZ.GM_COL_HEADER:case AZ.GM_ROW_HEADER:case AZ.GM_SHAPE:case AZ.GM_SET_SHAPE:case AZ.LASSO_SELECTOR:case AZ.LASSO_RESIZER:case AZ.GM_SVG_CHART:DC=DE;break;case AZ.GM_TREND_LINE:case AZ.GM_REF_LINE:DD=DE.getAttribute("hover-catcher");if(DD!==undefined&&DD!==null&&DD==="1"){DF=DE.previousElementSibling;if(DF!==null){DB=DF.getAttribute("hover-catcher");if(DB!==undefined&&DB!==null&&DB==="0"&&DF.identity===DE.identity){DI=true;}}}if(DI){DC=DF;}else{DC=DE;}break;case AZ.GM_MARKER:DC=DE.source;break;default:break;}}return DC;}function AT(DE){var DC,DD=DE.getAttribute("type"),DA,DB,DG,DF=false;if(DD===null||DD===AZ.GM_TEXT_BODY){DE=DE.parentNode;DD=DE.getAttribute("type");}if(DD===AZ.GM_DATA_LABEL||DD===AZ.GM_ORIGIN_LABEL){DE.identity=DE.parentNode.identity;}if(DD===AZ.LINE_CONTAINER){DE=DE.firstChild;DD=DE.getAttribute("type");}if(DD===AZ.GM_AXIS_TEXT||DD===AZ.GM_AXIS_WORD){DE=F(DE);DD=DE.getAttribute("type");}switch(DD){case AZ.GM_H_MATRIX_LINE:case AZ.GM_V_MATRIX_LINE:case AZ.GM_H_CHART_LINE:case AZ.GM_V_CHART_LINE:case AZ.GM_YAXIS_LINE:case AZ.GM_XAXIS_LINE:case AZ.GM_YAXIS2_LINE:case AZ.GM_XAXIS2_LINE:case AZ.GM_H_GRID_LINE:case AZ.GM_V_GRID_LINE:case AZ.GM_H_MINOR_GRID_LINE:case AZ.GM_V_MINOR_GRID_LINE:case AZ.GM_ROW_HEADER:case AZ.GM_COL_HEADER:case AZ.GM_COL_HEADER_EXTRA:case AZ.GM_ROW_HEADER_EXTRA:case AZ.GM_ROW_HEADER_TITLE:case AZ.GM_COL_HEADER_TITLE:case AZ.GM_Y_NUMERIC:case AZ.GM_X_NUMERIC:case AZ.GM_ORIGIN_LINE:case AZ.GM_ORIGIN_LABEL_H:case AZ.GM_ORIGIN_LABEL_V:case AZ.GM_DUMMY_A:case AZ.GM_DATA_LABEL:case AZ.GM_YLABEL:case AZ.GM_XLABEL:DC=DE;break;case AZ.GM_TREND_LINE:case AZ.GM_REF_LINE:DA=DE.getAttribute("hover-catcher");if(DA!==undefined&&DA!==null&&DA==="1"){DB=DE.previousElementSibling;if(DB!==null){DG=DB.getAttribute("hover-catcher");if(DG!==undefined&&DG!==null&&DG==="0"&&DB.identity===DE.identity){DF=true;}}}if(DF){DC=DB;}else{DC=DE;}break;case AZ.GM_SHAPE:case AZ.GM_SET_SHAPE:case AZ.LASSO_SELECTOR:case AZ.GM_SVG_CHART:DC=DE;break;case AZ.GM_MARKER:DC=DE.source;break;case AZ.GM_SVG_Y_NUMERIC:case AZ.GM_SVG_X_NUMERIC:case AZ.GM_SVG_X_CATEGORY:case AZ.GM_SVG_Y_CATEGORY:DC=DE.parentNode.parentNode;break;default:break;}return DC;}function BC(DD,DB,DA,DC){var DG=parseInt(DD.getAttribute("row"),10),DE=parseInt(DD.getAttribute("rowSpan"),10),DF=parseInt(DD.getAttribute("depth"),10);DC.toggleClsByRows(DG,DG+DE-1,DF,DB,DA);}function a(DE,DB,DA,DD){var DC=parseInt(DE.getAttribute("col"),10),DF=parseInt(DE.getAttribute("colSpan"),10),DG=parseInt(DE.getAttribute("depth"),10);DD.toggleClsByCols(DC,DC+DF-1,DG,DB,DA);}function Bh(DC){var DM=[C9.ROW_VAVLUE_TEXT_FONT_COLOR,C9.ROW_VAVLUE_TEXT_FONT_SIZE,C9.ROW_VAVLUE_TEXT_FONT_FAMILY,C9.ROW_VAVLUE_TEXT_FONT_STYLE],DF=[C9.ROW_TEXT_TEXT_FONT_COLOR,C9.ROW_TEXT_TEXT_FONT_SIZE,C9.ROW_TEXT_TEXT_FONT_FAMILY,C9.ROW_TEXT_TEXT_FONT_STYLE],DK=[C9.ROW_HEADER_TEXT_FONT_COLOR,C9.ROW_HEADER_TEXT_FONT_SIZE,C9.ROW_HEADER_TEXT_FONT_FAMILY,C9.ROW_HEADER_TEXT_FONT_STYLE],DB=[C9.ROW_HEADER_FILL_COLOR,C9.ROW_HEADER_FILL_TRANSPARENCY],DJ=[C9.COLUMN_VAVLUE_TEXT_FONT_COLOR,C9.COLUMN_VAVLUE_TEXT_FONT_SIZE,C9.COLUMN_VAVLUE_TEXT_FONT_FAMILY,C9.COLUMN_VAVLUE_TEXT_FONT_STYLE],DT=[C9.COLUMN_TEXT_TEXT_FONT_COLOR,C9.COLUMN_TEXT_TEXT_FONT_SIZE,C9.COLUMN_TEXT_TEXT_FONT_FAMILY,C9.COLUMN_TEXT_TEXT_FONT_STYLE],DP=[C9.COLUMN_HEADER_TEXT_FONT_COLOR,C9.COLUMN_HEADER_TEXT_FONT_SIZE,C9.COLUMN_HEADER_TEXT_FONT_FAMILY,C9.COLUMN_HEADER_TEXT_FONT_STYLE],DU=[C9.COLUMN_HEADER_FILL_COLOR,C9.COLUMN_HEADER_FILL_TRANSPARENCY],DV="rwTxtTxt",DH="rwVlTxt",DR="rwHdrTxt",DQ="colTxtTxt",DE="colVlTxt",DG="colHdrTxt",DI,DN,DS,DA,DD=this.widget,DL,DO=(DD.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK);switch(DC){case AZ.GM_ROW_HEADER_TITLE:DL=C9.ROW_HEADER_SHOW;DI=N.call(this,AZ.GM_ROW_HEADER);DN=DI?DV:DR;DS=DI?DF:DK;DA=DB;break;case AZ.GM_COL_HEADER_TITLE:DL=C9.COLUMN_HEADER_SHOW;DI=N.call(this,AZ.GM_COL_HEADER);DN=DI?DQ:DG;DS=DI?DT:DP;DA=DU;break;case AZ.GM_ROW_HEADER:case AZ.GM_ROW_HEADER_EXTRA:DL=C9.ROW_VALUES_SHOW;DI=N.call(this,AZ.GM_ROW_HEADER_TITLE);DN=DI?DV:DH;DS=DI?DF:DM;DA=DB;break;case AZ.GM_COL_HEADER:case AZ.GM_COL_HEADER_EXTRA:DL=C9.COLUMN_VALUES_SHOW;DI=N.call(this,AZ.GM_COL_HEADER_TITLE);DN=DI?DQ:DE;DS=DI?DT:DJ;DA=DU;break;}if(DO){if(DD.readGlobalProperty(DL)){return K(this.widget,DN,DS,B5.GLOBAL);}return Aj(this.widget,mstrmojo.desc(2885,"Fill"),DA,B5.GLOBAL);}return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolBoxFontAndFill",children:[CN(mstrmojo.desc(3433,"Font"),BE(DD,DN,DS,B5.GLOBAL,undefined,false),false,"mstrmojo-ui-rowContainer"),C8(DD,mstrmojo.desc(2885,"Fill"),DA,B5.GLOBAL)]}]});}function j(DB,DA){return(DA>=0)&&(DA<=DB);}function AP(DB){var DA;if(DB.textContent&&typeof (DB.textContent)!==undefined){DA=DB.textContent;}else{DA=DB.innerText;}return DA;}function CX(DA){return DA.outerHTML||new XMLSerializer().serializeToString(DA);}function Cf(DA,DE){var DC=this.selectedTargets,DD=this.selType;if(DC.length>1&&M(DD)&&BQ(DE)){for(var DB=0;DB<DC.length;DB++){if(DC[DB].parentNode.parentNode===DA){return true;}}}return false;}function AC(DC){var DE=DC.parentNode.children||[],DA=DE.length,DB;for(var DD=0;DD<DA;DD++){DB=DE[DD].getAttribute("status");if(DB===s.SELECTED){return false;}}return true;}function Y(DE){var DC=this.selectedTargets||[],DA=DC.length,DG=DE.selectionInfo,DF=DG&&DG.mid;for(var DB=0;DB<DA;DB++){var DD=DC[DB].selectionInfo;if(DD&&DD.mid===DF){this.deselectTarget(DC[DB]);B7.removeClass(DC[DB],"like-normal");if(AC(DC[DB])){B7.removeClass(DC[DB].parentNode.parentNode,"like-selected");this.clearSingleSelectedMarker(DC[DB].parentNode.parentNode);}break;}}}function Av(DB){if(!DB){return ;}if(DB.tagName==="polyline"){var DF=DB.parentNode,DD=DF&&DF.children,DA,DC,DE=DD?DD.length:0;for(DC=0;DC<DE;DC++){DA=DD[DC];if(DA.tagName==="polygon"){return true;}}}return false;}function Bd(DB,DA,DD,DC){if(DB){DA.addSubMenuItem(mstrmojo.desc(145,"Drill"),"",DD,DC);}else{DA.addNonInteractiveMenuItem(mstrmojo.desc(145,"Drill"),"",true);}}function Bu(DB,DA){return Cm.getGroupAndCalculationContextMenuForDataPoints(DB,{selection:DA,fnCellName:function(DC){return DC.innerText||DC.textContent;},fnUnique:function(DE){var DH=[],DG=DB.GMController,DF=DG.dz.Rows.TemplateUnit||[],DD=DG.dz.Columns.TemplateUnit||[],DC=DF.concat(DD);DE.forEach(function(DI){DI.identity.objectInfo.forEach(function(DJ){if(Cd.find(DC,"id",DJ.tid)===-1){DH=DH.filter(function(DK){return DK.tid!==DJ.tid||DK.eid!==DJ.eid;});DH.push(DJ);}});});return DH;},fnMakeNode:function(DC){return{identity:DC,innerText:DC.v};}});}function AG(DC,DD,DB,DA){DD.addMenuItem(mstrmojo.desc(1388,"Rename"),"xt",function(){var DE=Cz.renameItem(DB,DA,function(DI){var DG=DC.zonesModel.gmZones,DF=DI.text.trim(),DH=function(DJ,DK){return{act:"updateTemplate",keyContext:DJ.k,partialRetrieval:{nodes:[DJ.k]},actions:DK};};DG.submitDropZoneUpdates(DH(DC,[{act:"renameUnit",id:DA.did,type:DA.t,name:DF,isDynamicAlias:DA.t===4}]));},{allowEmptyText:true});DC.addDisposable(DE);});}mstrmojo.gm.GMInteractivity=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.vi.ui._CanDropFromSchema],{scriptClass:"mstrmojo.gm.GMInteractivity",widget:null,highlightedRows:[],highlightedCols:[],selectedShapes:[],selectedTargets:[],selectedMarkerLines:[],selectedBorderLines:[],hoveredShape:undefined,hoveredSetShape:undefined,hoveredTargetArr:undefined,tooltipShape:undefined,domWidget:undefined,fmtState:Bn.NORMAL,init:function(DA){this.widget=null;this.highlightedRows=[];this.highlightedCols=[];this.selectedShapes=[];this.selectedTargets=[];this.selectedMarkerLines=[];this.selectedBorderLines=[];this.hoveredShape=undefined;this.hoveredSetShape=undefined;this.hoveredTargetArr=[];this.tooltipShape=undefined;this.domWidget=undefined;this.colorByRules=[];this.colorByShapes=[];this.breakByRules=[];this.breakByShapes=[];this.fmtSelections={};if(this._super){this._super(DA);}var DB=document.createElement("div");DB.setAttribute("type",AZ.GM_HIGHLIGHT_BOX);DB.setAttribute("class","gm-highlight-box");this.domHLBox=DB;DB=document.createElement("div");DB.setAttribute("class","gm-menu-placeholder");this.domMenuPH=DB;DB=document.createElement("div");DB.setAttribute("class","gm-menu-placeholder");this.domToolbarPH=DB;if(!A2){A2=new V.VisTooltip({placeholder:document.body.appendChild(document.createElement("div"))});A2.render();A2.toggle(false);}},destroy:function e(DA){delete this.domWidget;this._super(DA);},clearAll:function(){this.highlightedRows.length=0;this.highlightedCols.length=0;this.selectedShapes.length=0;this.selectedTargets.length=0;this.selectedMarkerLines.length=0;this.selectedBorderLines.length=0;this.hoveredTargetArr.length=0;this.hoveredShape=undefined;this.hoveredSetShape=undefined;this.hideTooltip();},getColorByIdentities:function(){var DA,DB=this.colorByShapes,DD=DB.length,DC=[];for(DA=0;DA<DD;DA++){DC.push(DB[DA].identity);}return DC;},getBreakByIdentities:function(){var DA,DB=this.breakByShapes,DD=DB.length,DC=[];for(DA=0;DA<DD;DA++){DC.push(DB[DA].identity);}return DC;},getIdentities:function(){var DA,DB=this.selectedShapes,DD=DB.length,DC=[];for(DA=0;DA<DD;DA++){DC.push(DB[DA].identity);}return DC;},hoverShape:function(DA){var DB=DA.parentNode.getElementsByClassName?DA.parentNode.getElementsByClassName("gm-marker-scircle"):document.getElementsByClassName("gm-marker-scircle");if(this.hoveredShape===DA||Cg(DA)){Cd.forEach(DB,function(DC){if(Cg(DA)&&DC.getAttribute("cx")===DA.getAttribute("cx")&&DC.getAttribute("cy")===DA.getAttribute("cy")){BG(DC,s.HOVER);}});return ;}Cd.forEach(DB,function(DC){BG(DC,s.NORMAL);});this.clearHoveredShape();Ce(DA,s.HOVER);this.hoveredShape=DA;},hoverOverSelectedShape:function(DA){if(Cg(DA)&&DA.getAttribute("subtype")===BK.BAR&&DA.getAttribute("size")==="small"){this.clearHoveredShape();Ce(DA,s.HOVER);DA.sh=true;this.hoveredShape=DA;}},clearHoveredShape:function(){var DA=this.hoveredShape;if(DA&&DA.sh){Ce(DA,s.SELECTED);this.hoveredShape=undefined;delete DA.sh;}else{if(DA){Ce(DA,s.NORMAL);this.hoveredShape=undefined;}}},getTargetsWithSameTypeForDBL:function(DE){var DC=this.fmtMode,DB=[],DD=DE.getAttribute("type");if(DC){var DA=[[AZ.GM_XAXIS_LINE,AZ.GM_XAXIS2_LINE],[AZ.GM_YAXIS_LINE,AZ.GM_YAXIS2_LINE],[AZ.GM_X_NUMERIC,AZ.GM_X_CATEGORY,AZ.GM_ORIGIN_LABEL_V],[AZ.GM_Y_NUMERIC,AZ.GM_Y_CATEGORY,AZ.GM_ORIGIN_LABEL_H],[AZ.GM_H_CHART_LINE,AZ.GM_H_MATRIX_LINE],[AZ.GM_V_CHART_LINE,AZ.GM_V_MATRIX_LINE],[AZ.GM_H_GRID_LINE,AZ.GM_V_GRID_LINE],[AZ.GM_H_MINOR_GRID_LINE,AZ.GM_V_MINOR_GRID_LINE],[AZ.GM_ORIGIN_LINE],[AZ.GM_ROW_HEADER,AZ.GM_ROW_HEADER_EXTRA],[AZ.GM_ROW_HEADER_TITLE],[AZ.GM_COL_HEADER,AZ.GM_COL_HEADER_EXTRA],[AZ.GM_COL_HEADER_TITLE],[AZ.GM_TREND_LINE],[AZ.GM_REF_LINE]];Cd.forEach(DA,function(DF){if(DF.indexOf(DD)!==-1){if(x(DD)||Bq(DD)){var DG=[DE.identity.tlOpt.key];DB=CK(this.widget.domNode,"key",DG,true);}else{DB=CK(this.widget.domNode,"type",DF);}return false;}},this);if(DB.length===0){DB=CK(this.widget.domNode,"type",DD);}}else{DB=CK(this.widget.domNode,"type",DD);}return DB;},getTargetsWithSameType:function(DF,DE){var DC=this.fmtMode,DB=[],DD=DF.getAttribute("type");if(x(DD)||Bq(DD)){if(!DE){var DG=[DF.identity.tlOpt.key];DB=CK(this.widget.domNode,"key",DG,true);if(DB.length===0){DB.push(DF);}}else{DB.push(DF);}}else{if(DC){var DA=[[AZ.GM_YAXIS_LINE,AZ.GM_YAXIS2_LINE],[AZ.GM_XAXIS_LINE,AZ.GM_XAXIS2_LINE],[AZ.GM_XLABEL],[AZ.GM_YLABEL],[AZ.GM_Y_NUMERIC,AZ.GM_Y_CATEGORY,AZ.GM_ORIGIN_LABEL_H],[AZ.GM_X_NUMERIC,AZ.GM_X_CATEGORY,AZ.GM_ORIGIN_LABEL_V],[AZ.GM_V_CHART_LINE,AZ.GM_H_CHART_LINE,AZ.GM_V_MATRIX_LINE,AZ.GM_H_MATRIX_LINE],[AZ.GM_H_GRID_LINE,AZ.GM_V_GRID_LINE,AZ.GM_H_MINOR_GRID_LINE,AZ.GM_V_MINOR_GRID_LINE],[AZ.GM_ROW_HEADER,AZ.GM_ROW_HEADER_TITLE,AZ.GM_ROW_HEADER_EXTRA,AZ.GM_DUMMY_A],[AZ.GM_COL_HEADER,AZ.GM_COL_HEADER_TITLE,AZ.GM_COL_HEADER_EXTRA],[AZ.GM_DATA_LABEL],[AZ.GM_ORIGIN_LINE]];Cd.forEach(DA,function(DH){if(DH.indexOf(DD)!==-1){DB=CK(this.widget.domNode,"type",DH);return false;}},this);if(DB.length===0){DB.push(DF);}}else{DB.push(DF);}}return DB;},getMainContainer:function(DC){var DB=document.getElementsByClassName("gm-main-container"),DA=DB[0];Cd.forEach(DB,function(DD){if(DC&&DC.parentNode&&DC.parentNode.parentNode&&DC.parentNode.parentNode.parentNode&&DC.parentNode.parentNode.parentNode.parentNode&&DC.parentNode.parentNode.parentNode.parentNode.parentNode===DD){DA=DD;return false;}});return DA;},selectBorders:function(DE){var DC=this.fmtMode,DF=DE.getAttribute("type"),DH=this.getMainContainer(DE),DA=BU.position(DE),DI=BU.position(DH),DG={},DB,DD=[];if(DC){return ;}DG.x=DA.x-DI.x;DG.y=DA.y-DI.y;if(DF===AZ.GM_ROW_HEADER){DG.h=DA.h;DG.w=DI.w-DG.x;}else{if(DF===AZ.GM_COL_HEADER){DG.w=DA.w;DG.h=DI.h-DG.y;}}DB=this.getLineDiv("border-line",DG.x,DG.y,DG.w,1);DH.appendChild(DB);DD.push(DB);DB=this.getLineDiv("border-line",DG.x,DG.y,1,DG.h);DH.appendChild(DB);DD.push(DB);DB=this.getLineDiv("border-line",DG.x+DG.w,DG.y,1,DG.h);DH.appendChild(DB);DD.push(DB);DB=this.getLineDiv("border-line",DG.x,DG.y+DG.h,DG.w,1);DH.appendChild(DB);DD.push(DB);this.selectedBorderLines.push({target:DE,borderLineArray:DD});},clearSelectedBorders:function(){Cd.forEach(this.selectedBorderLines,function(DA){Cd.forEach(DA.borderLineArray,function(DB){if(DB.parentNode){DB.parentNode.removeChild(DB);}});});this.selectedBorderLines=[];},deselectBorders:function(DD){var DB,DA=[];var DC=function(DE){DE.parentNode.removeChild(DE);};for(DB=0;DB<this.selectedBorderLines.length;DB++){if(this.selectedBorderLines[DB].target===DD){Cd.forEach(this.selectedBorderLines[DB].borderLineArray,DC);}else{DA.push(this.selectedBorderLines[DB]);}}this.selectedBorderLines=DA;},updateSelectedBroders:function(){var DA=this;this.clearSelectedBorders();Cd.forEach(this.selectedTargets||[],function(DC){var DB=DC.getAttribute("type");if(DB===AZ.GM_ROW_HEADER||DB===AZ.GM_COL_HEADER){DA.selectBorders(DC);}});},getLineDiv:function(DC,DB,DD,DA,DE){var DF=document.createElement("div");DF.setAttribute("class",DC);DF.style.zIndex="1000";DF.style.position="absolute";DF.style.display="block";DF.style.backgroundColor="#34abeb";DF.style.left=DB+"px";DF.style.top=DD+"px";DF.style.width=DA+"px";DF.style.height=DE+"px";return DF;},selectMarkers:function(DE){var DF=DE.getAttribute("type"),DI=this.getMainContainer(DE),DB=BU.position(DE),DL=BU.position(DI),DD,DH,DA,DK,DG,DC,DJ;if(DF===AZ.GM_X_NUMERIC||DF===AZ.GM_X_CATEGORY){DD=DB.x-DL.x;if(DE.getAttribute("isPrimary")==="true"){DH=DB.y-DL.y-1;}else{DH=DB.y-DL.y+DB.h;}DK=1;DA=DB.w;}else{if(DF===AZ.GM_Y_NUMERIC||DF===AZ.GM_Y_CATEGORY){DH=DB.y-DL.y;if(DE.getAttribute("isPrimary")==="true"){DD=DB.x-DL.x+DB.w;}else{DD=DB.x-DL.x-1;}DK=DB.h;DA=1;}}DG=this.getLineDiv("marker-line",DD,DH,DA,DK);DC=DE.getAttribute("row")+"."+DE.getAttribute("col");DJ=Cd.find(this.selectedMarkerLines,"key",DC);if(DJ===-1){DI.appendChild(DG);this.selectedMarkerLines.push({key:DC,line:DG});}},clearSelectedMarkers:function(){Cd.forEach(this.selectedMarkerLines,function(DB){var DA=DB.line;DA.parentNode.removeChild(DA);});this.selectedMarkerLines=[];},clearSingleSelectedMarker:function(DE){var DB,DD,DA,DC=DE.getAttribute("type");if(BQ(DC)){DB=DE.getAttribute("row")+"."+DE.getAttribute("col");DA=Cd.find(this.selectedMarkerLines,"key",DB);if(DA!==-1){DD=this.selectedMarkerLines[DA].line;DD.parentNode.removeChild(DD);this.selectedMarkerLines.splice(DA,1);}}},selectTarget:function(DB){var DA=this;this.clearSelectedShapes();this.selectedTargets=this.selectedTargets?this.selectedTargets:[];if(DB&&DB.length>0&&Cg(DB[0])){return ;}if(Bm(DB,this.hoveredTargetArr)){this.clearHoveredTarget();}Cd.forEach(DB||[],function(DI){this.selectedTargets.push(DI);BG(DI,s.SELECTED);if(x(DI.getAttribute("type"))||Bq(DI.getAttribute("type"))){Bj.call(this.widget,DI);}var DG=DI.getAttribute("type"),DD=DI.identity,DH=this.widget,DF=DH.manager,DE=this.fmtMode;if(DE){var DC=DH.domMainContainer;if(Ck(DG)){B7.addClass(DC,"select-ml-v");}if(CD(DG)){B7.addClass(DC,"select-ml-h");}if(BD(DG)){B7.addClass(DC,"select-al-x");}if(Ca(DG)){B7.addClass(DC,"select-al-y");}if(BL(DG)){B7.addClass(DC,"select-gl-major");}if(H(DG)){B7.addClass(DC,"select-gl-minor");}if(By(DG)){B7.addClass(DC,"select-rh-header");}if(CE(DG)||(DG===AZ.GM_DUMMY_A)){B7.addClass(DC,"select-rh-value");}if(R(DG)){B7.addClass(DC,"select-ch-header");}if(Ar(DG)){B7.addClass(DC,"select-ch-value");}}else{if(DG===AZ.GM_ROW_HEADER){BC(DI,true,"selected",DF);DA.selectBorders(DI);DH.addAttributeSelection(DD.tid,DD.eid,DD.v);}if(DG===AZ.GM_COL_HEADER){a(DI,true,"selected",DF);DA.selectBorders(DI);DH.addAttributeSelection(DD.tid,DD.eid,DD.v);}if(DG===AZ.GM_YLABEL||DG===AZ.GM_XLABEL){B7.addClass(DI,"like-normal");B7.addClass(DI.parentNode.parentNode,"like-selected");DA.selectMarkers(DI.parentNode.parentNode);}}if(DG===AZ.GM_X_NUMERIC||DG===AZ.GM_Y_NUMERIC||DG===AZ.GM_X_CATEGORY||DG===AZ.GM_Y_CATEGORY){B7.addClass(DI,"with-text");DA.selectMarkers(DI);}},this);},clearSelectedTargets:function(){var DD=this.widget,DA=DD.manager,DB=this.selectedTargets||[],DC=this;DB.forEach(function(DH){BG(DH,s.NORMAL);if(x(DH.getAttribute("type"))||Bq(DH.getAttribute("type"))){z(DH);}var DF=DH.identity,DG=DH.getAttribute("type"),DE=DD.domMainContainer;if(Ck(DG)){B7.removeClass(DE,"select-ml-v");}if(CD(DG)){B7.removeClass(DE,"select-ml-h");}if(BD(DG)){B7.removeClass(DE,"select-al-x");}if(Ca(DG)){B7.removeClass(DE,"select-al-y");}if(BL(DG)){B7.removeClass(DE,"select-gl-major");}if(H(DG)){B7.removeClass(DE,"select-gl-minor");}if(By(DG)){B7.removeClass(DE,"select-rh-header");}if(CE(DG)||(DG===AZ.GM_DUMMY_A)){B7.removeClass(DE,"select-rh-value");}if(R(DG)){B7.removeClass(DE,"select-ch-header");}if(Ar(DG)){B7.removeClass(DE,"select-ch-value");}if(DG===AZ.GM_ROW_HEADER){BC(DH,false,"selected",DA);BC(DH,false,"sh",DA);DD.removeAttributeSelection(DF.tid,DF.eid);}if(DG===AZ.GM_COL_HEADER){a(DH,false,"selected",DA);a(DH,false,"sh",DA);DD.removeAttributeSelection(DF.tid,DF.eid);}if(DG===AZ.GM_YLABEL||DG===AZ.GM_XLABEL){B7.removeClass(DH,"like-normal");B7.removeClass(DH.parentNode.parentNode,"like-selected");DC.clearSelectedMarkers();}if(DG===AZ.GM_X_NUMERIC||DG===AZ.GM_Y_NUMERIC||DG===AZ.GM_X_CATEGORY||DG===AZ.GM_Y_CATEGORY){B7.removeClass(DH,"with-text");DC.clearSelectedMarkers();}});DC.clearSelectedBorders();this.selectedTargets=[];this.selType=undefined;},clearMetricSelectorHighlight:function(){},hoverTarget:function(DA){this.clearHoveredTarget();if(!DA||DA.length===0){return ;}this.hoveredTargetArr=DA;Cd.forEach(DA||[],function(DF){if(!Cg(DF)){BG(DF,s.HOVER);if(x(DF.getAttribute("type"))||Bq(DF.getAttribute("type"))){CY(DF);}var DD=DF.getAttribute("type"),DE=this.widget,DC=DE.manager,DB=this.fmtMode;if(DB){DE.toggleContainerCls(h(DD),"hover-ml");DE.toggleContainerCls(t(DD),"hover-al");DE.toggleContainerCls(Aq(DD),"hover-gl");DE.toggleContainerCls(CU(DD)||(DD===AZ.GM_DUMMY_A),"hover-rh");DE.toggleContainerCls(A5(DD),"hover-ch");}else{if(DD===AZ.GM_ROW_HEADER){BC(DF,true,"hover",DC);}if(DD===AZ.GM_COL_HEADER){a(DF,true,"hover",DC);}if(DD===AZ.GM_YLABEL||DD===AZ.GM_XLABEL){B7.addClass(DF.parentNode.parentNode,"like-hover");}}}},this);},clearSHTargets:function(){var DE=this.widget,DB=DE.manager,DC=this.selectedTargets||[],DA=this.fmtMode,DD=this;(DC||[]).forEach(function(DG){var DF=DG.getAttribute("type");if(!DA&&!DD.isToolbarShow()){if(DF===AZ.GM_ROW_HEADER){BC(DG,false,"sh",DB);BC(DG,false,"hover",DB);BC(DG,true,"selected",DB);BG(DG,s.SELECTED);}if(DF===AZ.GM_COL_HEADER){a(DG,false,"sh",DB);a(DG,false,"hover",DB);a(DG,true,"selected",DB);BG(DG,s.SELECTED);}}});},hoverSelectedTarget:function(DA){if(DA&&DA.length>0&&(!Cg(DA[0])||(DA[0].getAttribute("type")!==AZ.GM_ROW_HEADER&&DA[0].getAttribute("type")!==AZ.GM_COL_HEADER))){this.clearSHTargets();return ;}this.clearSHTargets();Cd.forEach(DA||[],function(DF){var DD=DF.getAttribute("type"),DE=this.widget,DC=DE.manager,DB=this.fmtMode;if(!DB){if(DD===AZ.GM_ROW_HEADER){BC(DF,false,"selected",DC);BC(DF,false,"hover",DC);BC(DF,true,"sh",DC);BG(DF,s.SH);}if(DD===AZ.GM_COL_HEADER){a(DF,false,"selected",DC);a(DF,false,"hover",DC);a(DF,true,"sh",DC);BG(DF,s.SH);}}},this);},clearHoveredTarget:function(){var DB=this.hoveredTargetArr;Cd.forEach(DB||[],function(DC){if(x(DC.getAttribute("type"))||Bq(DC.getAttribute("type"))){BG(DC,s.NORMAL);CO(DC);}},this);var DA=this.selectedTargets||[];Cd.forEach(DA||[],function(DC){if(DB.indexOf(DC)!==-1){DB.splice(DB.indexOf(DC),1);}});Cd.forEach(DB||[],function(DG){BG(DG,s.NORMAL);var DE=DG.getAttribute("type"),DF=this.widget,DD=DF.manager,DC=this.fmtMode;if(DC){if(h(DE)){DF.toggleContainerCls(false,"hover-ml");}if(t(DE)){DF.toggleContainerCls(false,"hover-al");}if(Aq(DE)){DF.toggleContainerCls(false,"hover-gl");}if(CU(DE)||(DE===AZ.GM_DUMMY_A)){DF.toggleContainerCls(false,"hover-rh");}if(A5(DE)){DF.toggleContainerCls(false,"hover-ch");}}else{if(DE===AZ.GM_ROW_HEADER){BC(DG,false,"hover",DD);}if(DE===AZ.GM_COL_HEADER){a(DG,false,"hover",DD);}if(DE===AZ.GM_YLABEL||DE===AZ.GM_XLABEL){B7.removeClass(DG.parentNode.parentNode,"like-hover");}}},this);this.hoveredTargetArr=[];},hoverSetShape:function(DA){var DB=this.hoveredSetShape;if(DB===DA){return ;}if(!Av(DA)){Bl(DB,"hover");w(DA,"hover");}this.hoveredSetShape=DA;},clearHoveredSetShape:function(){var DA=this.hoveredSetShape;if(DA){Bl(DA,"hover");this.hoveredSetShape=undefined;}},selectShape:function(DB,DE,DF,DC){if(Cg(DB)){return ;}if(DF){this.widget.toggleShapeSelectionIndex(DB.identity,true);}if(!DC){CW.call(this,DB);}Ce(DB,s.SELECTED);this.selectedShapes.push(DB);if(DB===this.hoveredShape){this.hoveredShape=undefined;}var DD=F(DB),DA=DD.selectedShapes?DD.selectedShapes:(DD.selectedShapes=[]);DA.push(DB);if(!DE){o(F(DB),DB.getAttribute("subtype"));}},selectShapes:function(DA,DD){var DE,DK,DB=DA.length,DF=this.widget;var DJ=DF.noReorderAfterShowData;for(DE=0;DE<DB;DE++){this.selectShape(DA[DE],true,DD,DJ);DK=T.call(this,DA[DE].identity);DF.addMetricValueSelection(DK);}var DI=[],DH,DC;for(DE=0,DB=DA.length;DE<DB;DE++){DH=DA[DE];DC=F(DH);var DG=DH.getAttribute("subtype");if(DG===BK.PIE||DG===BK.RING||DG===BK.CIRCLE){if(DI.indexOf(DC)>-1){continue;}else{DI.push(DC);}}}for(DE=0,DB=DI.length;DE<DB;DE++){DC=DI[DE];o(DC,"pie");}},deselectShape:function(DC,DG){var DE,DB=this.selectedShapes,DH=DB.length;for(DE=0;DE<DH;DE++){if(DB[DE]===DC){Ce(DC,s.NORMAL);DB.splice(DE,1);}}this.widget.toggleShapeSelectionIndex(DC.identity,false);var DF=F(DC),DA=DF.selectedShapes,DD=DA.indexOf(DC);if(DD>-1){DA.splice(DA.indexOf(DC),1);}else{Cm.visPrint("THIS SHOULD NEVER HAPPEN");}if(!DG){o(F(DC),DC.getAttribute("subtype"));}},toggleSelectShape:function(DA){var DC=this.widget,DB=T.call(this,DA.identity);if(Cg(DA)){this.deselectShape(DA);DC.removeMetricValueSelection(DB);return false;}this.selectShape(DA,undefined,true);DC.addMetricValueSelection(DB);return true;},clearSelectedShapes:function(){var DB,DA,DD=this.selectedShapes,DH=DD.length,DE,DG,DF,DC;for(DB=0;DB<DH;DB++){DA=DD[DB];Ce(DA,s.NORMAL);DC=T.call(this,DA.identity);this.widget.removeMetricValueSelection(DC);DF=DA.getAttribute("subtype");if(DF===BK.PIE||DF===BK.RING||DF===BK.CIRCLE){DE=F(DA);DG=DE&&DE.selectedShapes;if(DE&&DG&&DG.length>0){DG.length=0;o(DE,DF);}}}DD.length=0;},clearSelectRules:function(){this.colorByRules.length=0;this.colorByShapes.length=0;this.breakByRules.length=0;this.breakByShapes.length=0;},getAreaPoint:function(DJ,DI,DG,DF){var DO,DB,DC,DA,DM,DQ,DN,DH,DR=DI.dirc,DP=parseInt(DJ.getAttribute("seriesID"),10),DK=F(DJ),DS=DK.childNodes[DP+1],DE=DS.childNodes,DL=DE.length,DD=BU.position(DK,true);if(DR===1){DC=DF;DM="cy";DN=DD.h;}else{DC=DG;DM="cx";DN=DD.w;}for(DO=0;DO<DL;DO++){DB=DE[DO];DA=parseFloat(DB.getAttribute(DM));DQ=Math.abs(DA-DC);if(DQ<DN){DN=DQ;DH=DB;}}return DH;},mouseOnSetShape:function(DD,DA,DH,DE){var DC,DG=DA.dirc,DB=F(DD),DF=BU.position(DB,true),DJ,DI;DC=this.getAreaPoint(DD,DA,DH,DE);if(DC&&DC!==this.hoveredShape){DJ=parseFloat(DC.getAttribute("cx"));DI=parseFloat(DC.getAttribute("cy"));if(!j.call(this,DG===1?DF.w:DF.h,DG===1?DJ:DI)){this.hideTooltip();this.clearHoveredShape();return ;}if(BU.isFF){DF.x=DB.parentNode.getBoundingClientRect().left;DF.y=DB.parentNode.getBoundingClientRect().top;}DH=DF.x+DJ;DE=DF.y+DI;this.hoverShape(DC);this.showTooltip(DC,{x:DH,y:DE});}},clearSelectedCharts:function(){var DD,DA,DF=this.highlightedRows,DG=this.highlightedCols,DC=DF.length,DE=DG.length,DB=this.widget.manager;for(DD=0;DD<DC;DD++){DA=DF[DD];DB.toggleClsByRows(DA.start,DA.end,0,false,"selected");}for(DD=0;DD<DE;DD++){DA=DG[DD];DB.toggleClsByCols(DA.start,DA.end,0,false,"selected");}DF.length=0;DG.length=0;},showTooltip:function(DB,DD){A2.toggle(true);if(DB===this.tooltipShape){A2.moveTo(DD.x,DD.y);return ;}var DC,DA=DB.identity;if(DA){DC=DA.getTooltipContent();if(DC){if(!A2.domNode.parentNode){B7.addClass(A2.domNode,["vis-tooltip-gm"]);document.body.appendChild(A2.domNode);}A2.displayInfo(DC,DD);this.tooltipShape=DB;}}},hideTooltip:function(){var DA=A2.domNode;if(DA&&DA.parentNode){DA.parentNode.removeChild(DA);this.tooltipShape=undefined;}},getToolbarConfig:function(DE,DI,DB){var Dc=DI?DI.identity:undefined,DW=DI.subType,DS,DZ=this.widget&&this.widget.GMController;if(!DB){return DS;}switch(DE){case AZ.GM_ROW_HEADER_TITLE:case AZ.GM_COL_HEADER_TITLE:case AZ.GM_ROW_HEADER:case AZ.GM_COL_HEADER:case AZ.GM_COL_HEADER_EXTRA:case AZ.GM_ROW_HEADER_EXTRA:DS=Bh.call(this,DE);break;case AZ.GM_SVG_X_CATEGORY:case AZ.GM_X_CATEGORY:var DV=[C9.X_AXIS_LABELS_FONT_COLOR,C9.X_AXIS_LABELS_FONT_FAMILY,C9.X_AXIS_LABELS_FONT_STYLE,C9.X_AXIS_LABELS_FONT_SIZE];DS=K(this.widget,"xAxLb",DV,B5.GLOBAL,undefined,false);break;case AZ.GM_SVG_Y_CATEGORY:case AZ.GM_Y_CATEGORY:var Da=[C9.Y_AXIS_LABELS_FONT_COLOR,C9.Y_AXIS_LABELS_FONT_FAMILY,C9.Y_AXIS_LABELS_FONT_STYLE,C9.Y_AXIS_LABELS_FONT_SIZE];DS=K(this.widget,"yAxLb",Da,B5.GLOBAL,undefined,false);break;case AZ.LASSO_SELECTOR:DS=null;break;case AZ.GM_SHAPE:var DJ=Dc.getShape(),DU=[C9.SHAPE_FILL_COLOR,C9.SHAPE_FILL_TRANSPARENCY],Db=[C9.SHAPE_LINE_COLOR,C9.SHAPE_LINE_COMBINED_STYLE],DF=[C9.SHAPE_BORDER_COLOR,C9.SHAPE_BORDER_COMBINED_STYLE],DR=this.widget.model.data.dz.ColorBy;if(DR.TemplateMetric&&!DR.MetricNames){DS=f(this.widget);break;}switch(DJ){case Bs.TICK:DS=Ag(this.widget,mstrmojo.desc(3546,"Line"),Db,B5.FORMATTING);break;case Bs.LINE:if(DW===BK.SCIRCLE||DW===BK.SBAR){if(DZ.hasSizeBy()){DS=CH(this.widget,DF,DU,B5.FORMATTING,DJ);}else{DS=Ag(this.widget,mstrmojo.desc(3546,"Line"),Db,B5.FORMATTING);}}else{var DA=BZ(this.widget,C9.SHAPE_LINE_COLOR,B5.FORMATTING);DS=A4(this.widget,DA,mstrmojo.desc(11970,"same as line color"));}break;case Bs.AREA:if(DW===BK.SCIRCLE){DS=CH(this.widget,DF,DU,B5.FORMATTING,DJ);}else{var DG=BZ(this.widget,C9.SHAPE_FILL_COLOR,B5.FORMATTING);DS=A4(this.widget,DG,mstrmojo.desc(11971,"same as area color"));}break;case Bs.BAR:case Bs.CIRCLE:case Bs.SQUARE:case Bs.PIE:case Bs.RING:DS=CH(this.widget,DF,DU,B5.FORMATTING,DJ);break;default:DS=null;}break;case AZ.GM_DATA_LABEL:var DK=[C9.DATA_LABELS_FONT_FAMILY,C9.DATA_LABELS_FONT_SIZE,C9.DATA_LABELS_FONT_STYLE,C9.DATA_LABELS_FONT_COLOR];DS=K(this.widget,"dl",DK,B5.GLOBAL,undefined,false);break;case AZ.GM_SVG_X_NUMERIC:var DY=[C9.X_AXIS_LABELS_FONT_COLOR,C9.X_AXIS_LABELS_FONT_FAMILY,C9.X_AXIS_LABELS_FONT_STYLE,C9.X_AXIS_LABELS_FONT_SIZE];DS=K(this.widget,"xAxLb",DY,B5.GLOBAL);break;case AZ.GM_SVG_Y_NUMERIC:var DD=[C9.Y_AXIS_LABELS_FONT_COLOR,C9.Y_AXIS_LABELS_FONT_FAMILY,C9.Y_AXIS_LABELS_FONT_STYLE,C9.Y_AXIS_LABELS_FONT_SIZE];DS=K(this.widget,"yAxLb",DD,B5.GLOBAL);break;case AZ.GM_XLABEL:var DX=[C9.X_AXIS_TITLE_FONT_COLOR,C9.X_AXIS_TITLE_FONT_FAMILY,C9.X_AXIS_TITLE_FONT_STYLE,C9.X_AXIS_TITLE_FONT_SIZE];DS=K(this.widget,"xAxTt",DX,B5.GLOBAL,undefined,false);break;case AZ.GM_YLABEL:var DL=[C9.Y_AXIS_TITLE_FONT_COLOR,C9.Y_AXIS_TITLE_FONT_FAMILY,C9.Y_AXIS_TITLE_FONT_STYLE,C9.Y_AXIS_TITLE_FONT_SIZE];DS=K(this.widget,"yAxTt",DL,B5.GLOBAL,undefined,false);break;case AZ.GM_SVG_CHART:DS=Aj(this.widget,mstrmojo.desc(3905,"Background"),[C9.BG_COLOR],B5.GLOBAL,{width:"60px",visibleControls:mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS.FILL_COLOR,showNoFill:false});break;case AZ.GM_TREND_LINE:var DP=[Ab.TREND_REF_LINE_COLOR,Ab.TREND_REF_LINE_COMBINED_STYLE];DS=Ag(this.widget,mstrmojo.desc(3546,"Line"),DP,B5.GLOBAL,{realPropName:Ab.TREND_LINE_DEF,opt:Dc.tlOpt});break;case AZ.GM_REF_LINE:var DC=[Ab.TREND_REF_LINE_COLOR,Ab.TREND_REF_LINE_COMBINED_STYLE];DS=Ag(this.widget,mstrmojo.desc(3546,"Line"),DC,B5.GLOBAL,{realPropName:Ab.REF_LINE_DEF,opt:Dc.tlOpt});break;case AZ.GM_XAXIS_LINE:case AZ.GM_XAXIS2_LINE:var DO=[C9.X_AXIS_LINE_COLOR,C9.X_AXIS_LINE_COMBINED_STYLE];DS=Ag(this.widget,mstrmojo.desc(3546,"Line"),DO,B5.GLOBAL);break;case AZ.GM_YAXIS_LINE:case AZ.GM_YAXIS2_LINE:var DT=[C9.Y_AXIS_LINE_COLOR,C9.Y_AXIS_LINE_COMBINED_STYLE];DS=Ag(this.widget,mstrmojo.desc(3546,"Line"),DT,B5.GLOBAL);break;case AZ.GM_V_MATRIX_LINE:case AZ.GM_V_CHART_LINE:case AZ.GM_H_MATRIX_LINE:case AZ.GM_H_CHART_LINE:var DM=[C9.ALL_MATRIX_LINES_COLOR,C9.ALL_MATRIX_LINES_COMBINED_STYLE];DS=Ag(this.widget,mstrmojo.desc(3546,"Line"),DM,B5.GLOBAL);break;case AZ.GM_H_GRID_LINE:case AZ.GM_V_GRID_LINE:case AZ.GM_H_MINOR_GRID_LINE:case AZ.GM_V_MINOR_GRID_LINE:DS=Ag(this.widget,mstrmojo.desc(11991,"Grid Lines"),[C9.ALL_GRID_LINES_COLOR,C9.ALL_GRID_LINES_COMBINED_STYLE],B5.GLOBAL,undefined,{showNoneOption:false});break;case AZ.GM_ORIGIN_LINE:var DH;DH=[C9.ALL_AXIS_ORIGIN_LINE_COLOR,C9.ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE];DS=Ag(this.widget,mstrmojo.desc(3546,"Line"),DH,B5.GLOBAL,undefined,{showNoneOption:false});break;case AZ.GM_X_NUMERIC:var DN=[C9.X_AXIS_LABELS_FONT_COLOR,C9.X_AXIS_LABELS_FONT_SIZE,C9.X_AXIS_LABELS_FONT_FAMILY,C9.X_AXIS_LABELS_FONT_STYLE,C9.X_AXIS_LABELS_ROTATION];DS=K(this.widget,"xAxLb",DN,B5.GLOBAL,undefined,false);break;case AZ.GM_Y_NUMERIC:var DQ=[C9.Y_AXIS_LABELS_FONT_COLOR,C9.Y_AXIS_LABELS_FONT_SIZE,C9.Y_AXIS_LABELS_FONT_FAMILY,C9.Y_AXIS_LABELS_FONT_STYLE,C9.Y_AXIS_LABELS_ROTATION];DS=K(this.widget,"yAxLb",DQ,B5.GLOBAL,undefined,false);break;default:DS=null;}return DS;},getMenuConfig:function(ED,Dj,DF,Dz){var D4,Dp,Dx,Dt,DG,DV=this,Do=DF?DF.selectionInfo:undefined,Dy=DF?DF.identity:undefined,Dd=DF.visGM,Dv=Dd.GMController,EA=Dv.getChartInfo(),D0=Dj.length,DH=new V.ui.menus.MenuConfig(),D8=(mstrApp.appState===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION),DC=function(EF,EH){var EG=function(EL){var EJ=(function(){var EN;Cd.forEach(Dd.model.data.gts.row.concat(Dd.model.data.gts.col),function(EO){if(EO.id&&EO.id===EL){EN=EO.dp;D9=EO;}});return EN;}()),EK=Dd.model.docModel.datasets,EI=function(EN,EQ){var EO=Cd.find(EN,"did",EQ.id),EP=EN[EO];if(EP&&!EP.hide){EQ.n=EP.n;return true;}return false;},EM=Cd.filter(EJ,function(EP){var EN;for(EN in EK){var EO=EK[EN];if(EI(EO.att,EP)){return true;}}return false;});if(EM){Dj=Cd.filter(Dj,function(EO){for(var EN in EM){if(EM[EN].n===EO.n){return true;}}return false;});D0=Dj.length;}else{D0=0;}return D0;},DZ=function(){var EI=new V.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});for(D4=0;D4<D0;D4++){if(EH){EI.addMenuItem(Dj[D4].n,"xt",Dd.getMenuHandler("selectionKeepOnlyAndShow"),{drillUnit:Dj[D4]});}else{EI.addMenuItem(Dj[D4].n,"xt",Dd.getMenuHandler("headerDrill"),{drillUnit:Dj[D4],fromUnit:{tid:Dy.tid,isRowAttribute:Dy.isRowAttribute}});}}return EI;},EE=function(){if(EH){DH.addMenuItem(mstrmojo.desc(11698,"Drill to ##").replace("##",Dj[0].n),"xt",Dd.getMenuHandler("selectionKeepOnlyAndShow"),{drillUnit:Dj[0]});}else{DH.addMenuItem(mstrmojo.desc(11698,"Drill to ##").replace("##",Dj[0].n),"xt",Dd.getMenuHandler("headerDrill"),{drillUnit:Dj[0],fromUnit:{tid:Dy.tid,isRowAttribute:Dy.isRowAttribute}});}};D0=EG(EF);switch(D0){case 0:DH.addNonInteractiveMenuItem(mstrmojo.desc(145,"Drill"),"",true);break;case 1:EE();break;default:DH.addSubMenuItem(mstrmojo.desc(145,"Drill"),"",DV.id,DZ);}},D5=function(EE){var EF=DV.widget.zonesModel.gmZones,DZ=new V.ui.menus.MenuConfig();Cd.forEach(EE,function(EG){DZ.addEditorMenuItem(EG.n,EF.id,function(){return DV.getDisplayFormsMenu(EG);});});return DZ;},DI=function(){if(Dy){var EJ=Dy.attrIdArr,EG=DV.widget.zonesModel.gmZones,EF=DV.widget.zonesModel.docModel.datasets,DZ=[],EE=[];if(EJ&&EJ.length>0){DZ=Cd.filter(EJ,function(EK){return Cz.hasMultiForms(EK,EF);});EE=DZ.map(function(EK){return B8(EG,EK);});if(EE.length>0){DH.addEditorMenuItem(mstrmojo.desc(11908,"Display Attribute Forms"),EG.id,function(){return D5(EE);});}}else{var EI=Dy.tid,EH=B8(EG,EI);if(Cz.hasMultiForms(EH.did,EF)){DH.addEditorMenuItem(mstrmojo.desc(11908,"Display Attribute Forms"),EG.id,function(){return DV.getDisplayFormsMenu(EH);});}}}},DT=function(){var EI=mstrmojo.gm.EnumSubtype,EE=Dv.chartSubType,EL=Dd.id;if(EA.isABL&&EE===EI.PERCENT){return ;}var EG=p.getAxisMetricsInfo(Dd),EJ=function(EM){var EN=[];EG.forEach(function(EO){var EP=Dd.getAvailableRefLineTypes(EO.did);if(EP.indexOf(EM)!==-1){EN.push(EO.did);}});return EN;},EH=function(EM,EY,EO){var EN,EU,EW,EP,EX,ER,ES=true,EV=[],EQ=Dd.getPartialUpdateFilterConfigForRefLine(),ET=[];EM.forEach(function(EZ){Dd.checkCustomScaleNotificationForReferenceLine(EZ);EN=Dd.getReferenceOptionForMetricId(EZ);if(EN===undefined){return true;}EU=Dd.getRealReferenceOptionFromAxisOption(EN,EY,ER);EW=Dd.readGlobalProperty(Ab.REF_LINE_DEF,EU);if(EY===B2.EnumRefLineModelType.CONST){EW.setProperty(Ab.REF_CONST_VALUE,D.parseNumeric(EO));}else{EW.setProperty(Ab.REF_ENABLED,ES);}EP=EU.key.split(",")[0];if(ET[EP]){return true;}else{ET[EP]="record";}EX=Dd.processReferenceLine(Ab.REF_LINE_DEF,EW,EU);EV=EV.concat(EX.actions);});Dd.submitUpdatesAndPersistXML(EV,Dd.getXTabRefreshCallBack(),undefined,false,false,EQ);},EK=function(){var EM=[];Object.keys(B2.EnumRefLineModelType).forEach(function(EP){var EN=B2.EnumRefLineModelType[EP],EO;EO=EJ(EN);if(EO.length){EM.push({refType:EN,metricIds:EO});}});return EM;},EF=function(EO){var EM=EO.refLineCfg,EN=new V.ui.menus.MenuConfig();EM.forEach(function(EQ){var EP=EQ.refType,ER=EQ.metricIds;if(EP!==B2.EnumRefLineModelType.CONST){EN.addMenuItem(BS[EP],"xt",function(){EH(ER,EP,0);});}else{EN.addEditorMenuItem(BS[EP],EL,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:k.FLOAT,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR},onEnter:function(){this.validate();}}],fnOk:function(ET,ES){var EU=ES.constVal;if(EU.isValid()){EH(ER,EP,EU.value);}}});});}});return EN;};var DZ=EK();if(DZ.length>0){DH.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",EL,EF,{refLineCfg:DZ});}},DE=function(EL,EM){var EQ=new V.ui.menus.MenuConfig();var EJ=Dd.zonesModel,EF=EJ.gmZones,EU=null,EO=[],EV=(function(){var DZ,EZ,EY;DZ=EF.dropZones;for(EZ in DZ){if(DZ.hasOwnProperty(EZ)){EO=DZ[EZ].items;for(EY in EO){if(EO.hasOwnProperty(EY)){if(EO[EY].did===EM.mid){EU=EO[EY];return DZ[EZ];}}}}}}()),EK={zone:EV,axis:EV&&EV.id,idx:Cd.find(EO,"id",EU.id),cnt:EO.length,item:EU,useDropzone:true};if(EU.um){EQ.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){EJ.editDerivedMetric(EK,"edit");},EK);EQ.addSeparator();}if(EA.isABL){EQ.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dd.getMenuHandler("sortMetricTitle"),{isAsc:true,selInfo:EM});EQ.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dd.getMenuHandler("sortMetricTitle"),{isAsc:false,selInfo:EM});if(Dv.firstRes.gsi.sorts[0].length!==0||Dv.firstRes.gsi.sorts[1].length!==0){EQ.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dd.getMenuHandler("clearSort"));}EQ.addSeparator();}EQ.addMenuItem(mstrmojo.desc(11700,"Axis Scale..."),"xt",p.getEditAxisScaleHandler(Dd,EM.mid));EQ.addMenuItem(mstrmojo.desc(11987,"Log Scale"),"xt",p.getEditLogScaleHandler(Dd,EM.mid));EQ.addMenuItem(mstrmojo.desc(11988,"Axis Origin"),"xt",p.getEditAxisOriginHandler(Dd,EM.mid));EQ.addSeparator();if(EF.docModel.findDatasetIdFromUnit(EU.did)&&!EF.docModel.isFromSolrCube(EU.did)&&!EF.docModel.isFromMDXCube(EU.did)){EQ.addSubMenuItem(mstrmojo.desc(11806,"Aggregate By"),"xt",EJ.id,EJ.getAggregateByMetricSubMenu,EK);EQ.addSeparator();}EQ.addEditorMenuItem(mstrmojo.desc(5188,"Calculation"),EJ.id,EJ.getCalculationEditorCfg,EK);EQ.addSubMenuItem(mstrmojo.desc(12287,"Shortcut Metric"),"xt",EJ.id,EJ.getShortcutMetricSubMenu,EK);EQ.addMenuItem(mstrmojo.desc(13624,"New Metric..."),"xt",function(){EJ.newDerivedMetric(EK);},EK);EQ.addSeparator();if(EF.shouldShowCondensedMenu(EV,EU)){var ER=EU.cds;var EP=EF.getCondenseLableHandler(EV,EK,true),EN=EF.getCondenseLableHandler(EV,EK,false);EQ.addToggleMenuItem(mstrmojo.desc(13660,"Condense Label"),"",EP,EN,EF.id,ER);}if(EF.showNumberFormat(EU)){EQ.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),EF.id,EF.getNumberFormatEditorCfg,EK);EQ.addSeparator();}if(EA.isABL&&!EA.isPie){EQ.addSeparator();p.getSubMenu(Dd,EQ,EM.mid,EM.midx);}EQ.addSeparator();var EW=Dv.getMetricsOnXAxis().concat(Dv.getMetricsOnYAxis()),EI=Dv.model.getMetricIDsFromIndex(EW),EX=false;if(EM.mid){if(EI.indexOf(EM.mid)>=0){EX=true;}}var ET=false;if(EA.isBubbleOrScatter){var EG=Dd.GMController.getMetricsOnXAxis();if(EG.indexOf(EM.midx)>=0){ET=true;}}else{if(!EX){ET=true;}}ET=ET||!p.isTrendLineAvailableForMetric(Dd,EM.midx);if(!ET){EQ.addToggleMenuItem(mstrmojo.desc(12155,"Enable trendline for ##").replace("##",EL),"xt",p.getTrendLineToggleHandler(Dd,EM.mid,true),p.getTrendLineToggleHandler(Dd,EM.mid,false),DV.id,p.getTrendLineToggleState(Dd,EM.mid));var EE=p.getOptionObjArr.call(Dv,[EU.idx]),ES=Dd.readGlobalProperty(Ab.TREND_LINE_DEF,EE);if(ES.jsonObj.trdEnabled){EQ.addMenuItem(mstrmojo.desc(12163,"Edit trendline..."),"xt",p.getEditTrendLineHandler(Dd,EM.mid));}}var EH=false;if(Dv.isStacked&&!Dv.splitPlottingMetrics){EH=true;}else{if(!EX){EH=true;}}EH=EH||p.isIgnoredMetric(Dd,EM.midx);if(!EH){p.getReferenceLineSubMenu(Dd,EQ,EA.isABL,EM.mid);}EQ.addSeparator();Dp=EQ.getMenuItems().length;if(EF.hasReplaceCandidates(EK)){EQ.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",Dd.zonesModel.id,EF.getReplaceSubMenu,EK);}if(EM.elem&&EM.elem.firstChild){AG(Dd,EQ,EM.elem.firstChild,EU);}EQ.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){EF.deleteItem(EV,EK.idx);});return EQ;},Dg=function(){var EE=new V.ui.menus.MenuConfig();function DZ(){function EF(){return function(EH,EG){if(EG!==EH){DV.widget.writeGlobalProperty(C9.LINE_MARKER_SHOW,EH);}};}return function(){var EG=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EI){EG.push(EI);});var EH=DV.widget.readGlobalProperty(C9.LINE_MARKER_SHOW);EE.addRadioMenuGroup(EH,EF(),EG,"checkMark",undefined,true);return EE;};}(DZ())();return EE;},Dr=function(){var DZ=new V.ui.menus.MenuConfig(),EE=Dy.getAssMetricDataLabelID(),EG=Dd.readGlobalProperty(Ab.METRIC_LEVEL_DATA_LABEL).jsonObj;function EF(EJ){function EI(){return function(EN,EK){var EL;if(EN!==EK){if(EN!==B2.EnumDataLabels.HIDE){EG[EE]=true;var EM=true,EO;for(EO in EG){if(EO!=="AllMetrics"&&EG.hasOwnProperty(EO)){if(EG[EO]===false){EM=false;}}}if(EG.AllMetrics!==undefined){EG.AllMetrics=EM;}EJ.setWidgetPropertyValue(Ab.METRIC_LEVEL_DATA_LABEL,EG);EL=[{value:true,name:Ab.METRIC_LEVEL_DATA_LABEL,option:p.getOptionObjArr.call(Dv,[Dv.getMetricIndexFromID(EE)])}];}EJ.writeGlobalProperty(Ab.DATA_LABEL,EN,undefined,undefined,EL);}};}function EH(){var EK=EJ.readGlobalProperty(Ab.DATA_LABEL);if(!EG[EE]){return B2.EnumDataLabels.HIDE;}return EK;}return function(){var EK=[];if(Dv.textTypeDataLabelEnabled()){EK.push({text:mstrmojo.desc(13663,"Only Text"),value:B2.EnumDataLabels.SHOW_TEXT_ONLY});}if(Dv.valueTypeDataLabelEnabled()){EK.push({text:mstrmojo.desc(13664,"Only Value"),value:B2.EnumDataLabels.SHOW_VALUE_ONLY});}EK.push({text:mstrmojo.desc(2057,"None"),value:B2.EnumDataLabels.HIDE});DZ.addRadioMenuGroup(EH(),EI(),EK,"checkMark",undefined,true);return DZ;};}(EF(Dd))();return DZ;},DS=function(){var EF=this;var DZ=function(){var EH=new V.ui.menus.MenuConfig();function EI(EK,EJ){if(EK!==EJ){if(ED===AZ.GM_ROW_HEADER_TITLE){Dd.writeGlobalProperty(C9.ROW_HEADER_SHOW,EK);}else{if(ED===AZ.GM_COL_HEADER_TITLE){Dd.writeGlobalProperty(C9.COLUMN_HEADER_SHOW,EK);}}}}var EG=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EJ){EG.push(EJ);});if(ED===AZ.GM_ROW_HEADER_TITLE){EH.addRadioMenuGroup(Dd.readGlobalProperty(C9.ROW_HEADER_SHOW),EI,EG,"checkMark",undefined,true);}else{if(ED===AZ.GM_COL_HEADER_TITLE){EH.addRadioMenuGroup(Dd.readGlobalProperty(C9.COLUMN_HEADER_SHOW),EI,EG,"checkMark",undefined,true);}}return EH;};var EE="default text";if(ED===AZ.GM_ROW_HEADER_TITLE){EE=mstrmojo.desc(12014,"Row Headers");}else{if(ED===AZ.GM_COL_HEADER_TITLE){EE=mstrmojo.desc(12015,"Column Headers");}}DH.addSubMenuItem(EE,"xt",EF.id,DZ);},Du=function(){var EE=function(){var EF=new V.ui.menus.MenuConfig();function EH(EJ,EI){if(EJ!==EI){if(ED===AZ.GM_ROW_HEADER||ED===AZ.GM_ROW_HEADER_EXTRA){Dd.writeGlobalProperty(C9.ROW_VALUES_SHOW,EJ);if(N.call(DV,AZ.GM_ROW_HEADER_TITLE)){Dd.writeGlobalProperty(C9.ROW_HEADER_SHOW,EJ);}}else{if(ED===AZ.GM_COL_HEADER||ED===AZ.GM_COL_HEADER_EXTRA){Dd.writeGlobalProperty(C9.COLUMN_VALUES_SHOW,EJ);if(N.call(DV,AZ.GM_COL_HEADER_TITLE)){Dd.writeGlobalProperty(C9.COLUMN_HEADER_SHOW,EJ);}}}}}var EG=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EI){EG.push(EI);});if(ED===AZ.GM_ROW_HEADER||ED===AZ.GM_ROW_HEADER_EXTRA){EF.addRadioMenuGroup(Dd.readGlobalProperty(C9.ROW_VALUES_SHOW),EH,EG,"checkMark",undefined,true);}else{if(ED===AZ.GM_COL_HEADER||ED===AZ.GM_COL_HEADER_EXTRA){EF.addRadioMenuGroup(Dd.readGlobalProperty(C9.COLUMN_VALUES_SHOW),EH,EG,"checkMark",undefined,true);}}return EF;};var DZ="default text";if(ED===AZ.GM_ROW_HEADER||ED===AZ.GM_ROW_HEADER_EXTRA){if(N.call(DV,AZ.GM_ROW_HEADER_TITLE)){DZ=mstrmojo.desc(13665,"Row Text");}else{DZ=mstrmojo.desc(12016,"Row Values");}}else{if(ED===AZ.GM_COL_HEADER||ED===AZ.GM_COL_HEADER_EXTRA){if(N.call(DV,AZ.GM_COL_HEADER_TITLE)){DZ=mstrmojo.desc(13666,"Column Text");}else{DZ=mstrmojo.desc(12017,"Column Values");}}}DH.addSubMenuItem(DZ,"xt",this.id,EE);},Dk=function(){var EF="no selection is made",EJ;var EI=Dd.readGlobalProperty(C9.ROW_HEADER_SHOW),EH=Dd.readGlobalProperty(C9.ROW_VALUES_SHOW),EG=Dd.readGlobalProperty(C9.COLUMN_HEADER_SHOW),EE=Dd.readGlobalProperty(C9.COLUMN_VALUES_SHOW);var DZ=BO(DV.selectedTargets||[]);if(DZ===Ba.ROW_HEADER){EF=EI?mstrmojo.desc(13667,"Hide row header"):mstrmojo.desc(13668,"Show row header");EJ=function(){Dd.writeGlobalProperty(C9.ROW_HEADER_SHOW,!EI);};}else{if(DZ===Ba.ROW_VALUE){EF=EH?mstrmojo.desc(13669,"Hide row value"):mstrmojo.desc(13670,"Show row value");EJ=function(){Dd.writeGlobalProperty(C9.ROW_VALUES_SHOW,!EH);};}else{if(DZ===Ba.COL_HEADER){EF=EG?mstrmojo.desc(13671,"Hide column header"):mstrmojo.desc(13672,"Show column header");EJ=function(){Dd.writeGlobalProperty(C9.COLUMN_HEADER_SHOW,!EG);};}else{if(DZ===Ba.COL_VALUE){EF=EE?mstrmojo.desc(13673,"Hide column value"):mstrmojo.desc(13674,"Show column value");EJ=function(){Dd.writeGlobalProperty(C9.COLUMN_VALUES_SHOW,!EE);};}else{if(DZ===(Ba.ROW_VALUE|Ba.ROW_HEADER)){EF=mstrmojo.desc(13675,"Hide row text");EJ=function(){Dd.writeGlobalProperty(C9.ROW_TEXT_SHOW,false);};}else{if(DZ===(Ba.COL_VALUE|Ba.COL_HEADER)){EF=mstrmojo.desc(13676,"Hide column text");EJ=function(){Dd.writeGlobalProperty(C9.COLUMN_TEXT_SHOW,false);};}}}}}}DH.addMenuItem(EF,"xt",EJ);},Ds=function(EE){var DZ=EE||new V.ui.menus.MenuConfig(),EG=[{text:mstrmojo.desc(6019,"Automatic"),value:B2.EnumGridLines.AUTO},{text:mstrmojo.desc(13677,"Show Major and Minor"),value:B2.EnumGridLines.SHOW},{text:mstrmojo.desc(13678,"Show Major Only"),value:B2.EnumGridLines.SHOW_MAJOR_ONLY},{text:mstrmojo.desc(2772,"Hide"),value:B2.EnumGridLines.HIDE}];function EF(){return function(EI,EH){if(EH!==EI){Dd.writeGlobalProperty(C9.ALL_GRID_LINES_SHOW,EI);}};}DZ.addRadioMenuGroup(Dd.readGlobalProperty(C9.ALL_GRID_LINES_SHOW),EF(),EG,"checkMark",undefined,true);return DZ;},DA=function(EJ){var EI=Dd.zonesModel,EG=EI.gmZones,EH,EF=(function(){var DZ,EL,EK;DZ=EG.dropZones;for(EL in DZ){EH=DZ[EL].items;for(EK in EH){if(EH[EK].did===EJ.mid){return DZ[EL];}}}}()),EE=[];Cd.forEach(Di,function(EL){var EK=EL.mid,DZ=Cd.find(EH,"did",EK);if(DZ!==-1){EE.push(EH[DZ]);}});DH.addEditorMenuItem(mstrmojo.desc(5188,"Calculation"),EI.id,function(){return mstrmojo.all[EI.id].getMultipleMetricsCalcMenus(EF,EE,true);});DH.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){EG.deleteItems(EE,true);});};if(Do){Do.elem=DF.elem;}var D2,Dh,DY,DP,Da,Df,DN,DU,Dm,DL,DK,DW,D7=mstrmojo.emptyFn,De=mstrmojo.emptyFn,EB;switch(ED){case AZ.GM_ROW_HEADER_TITLE:case AZ.GM_COL_HEADER_TITLE:if(Dz){Dk.call(this,DV.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK);}else{if(D8){DH.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dy});DH.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dy});if(Dv.firstRes.gsi.sorts[0].length!==0||Dv.firstRes.gsi.sorts[1].length!==0){DH.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dd.getMenuHandler("clearSort"));}DH.addSeparator();DC(Dy&&Dy.tid);}else{if(Dy.otp===47&&(Dy.ost===12033||Dy.ost===12032)){D2=Dd.zonesModel.gmZones;DP=(function(){var DZ,EF,EE;DZ=D2.dropZones;for(EF in DZ){DY=DZ[EF].items;for(EE in DY){if(DY[EE].did===DF.identity.tid){Dh=DY[EE];return DZ[EF];}}}}());Da={zone:DP,axis:DP&&DP.id,idx:Cd.find(DY,"id",Dh.id),cnt:DY.length,item:Dh,useDropzone:true};if(Dy.ost===12033){DH.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"eg",D2.getCreateOrEditElementGroupFunc(Da));DH.addSeparator();}DH.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dy});DH.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dy});if(Dv.firstRes.gsi.sorts[0].length!==0||Dv.firstRes.gsi.sorts[1].length!==0){DH.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dd.getMenuHandler("clearSort"));}DH.addSeparator();}else{D2=Dd.zonesModel.gmZones;DP=(function(){var DZ,EF,EE;DZ=D2.dropZones;for(EF in DZ){DY=DZ[EF].items;for(EE in DY){if(DY[EE].did===DF.identity.tid){Dh=DY[EE];return DZ[EF];}}}}());Da={zone:DP,axis:DP&&DP.id,idx:Cd.find(DY,"id",Dh.id),cnt:DY.length,item:Dh,useDropzone:true};Df=!D2.docModel.isFromMDXCube(Dh.did);if(Dh.da&&Df){DH.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){D2.editDerivedAttribute(Da);},Da);DH.addSeparator();}DH.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dy});DH.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dy});if(Dv.firstRes.gsi.sorts[0].length!==0||Dv.firstRes.gsi.sorts[1].length!==0){DH.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dd.getMenuHandler("clearSort"));}DH.addSeparator();EB=D2.isDynamicLink(Dh);if(D2.allowInsertNewAttribute(DP)&&!Cm.hasCGorCon(Dd,Dh)&&Df&&!EB){DH.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){D2.newDerivedAttribute(Da);},Da);}DL=Dh.t===47&&D2.getUnitInfoInTemplate(Dh.did).unit.ost===12033;DK=D2.isAttribute(Dh)?mstrmojo.desc(13295,"Create Groups..."):(DL?mstrmojo.desc(13296,"Edit Groups..."):null);if(DK!==null&&!EB){DH.addMenuItem(DK,"eg",D2.getCreateOrEditElementGroupFunc(Da));}DH.addSeparator();if(D2.showNumberFormat(Dh)){DH.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),D2.id,D2.getNumberFormatEditorCfg,Da);}DC(Dy&&Dy.tid);if(!EB){DI();}DH.addSeparator();}Dp=DH.getMenuItems().length;if(D2.hasReplaceCandidates(Da)){DH.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",Dd.zonesModel.id,D2.getReplaceSubMenu,Da);}if(DF.elem&&DF.elem.firstChild){AG(Dd,DH,DF.elem.firstChild,Dh);}DH.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){D2.deleteItem(DP,Da.idx);});}}break;case AZ.GM_ROW_HEADER:case AZ.GM_COL_HEADER:if(Dz){Dk.call(this,DV.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK);}else{var DD=true,DM=Dv.supportViewFilterPool;if(!DM[Dy.tid]){DD=false;}(this.selectedTargets||[]).forEach(function(EE){var DZ=EE.identity;if(!DM[DZ.tid]){DD=false;}});if(DD){DH.addMenuItem(mstrmojo.desc(11701,"Keep Only"),"xt",Dd.getMenuHandler("headerKeepOnly"),{selInfo:Do,identity:Dy});DH.addMenuItem(mstrmojo.desc(3946,"Exclude"),"xt",Dd.getMenuHandler("headerExclude"),{selInfo:Do,identity:Dy});DC(Dy&&Dy.tid);DH.addSeparator();}if(D8){if(DD){DH.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",Dd.getMenuHandler("selectionShowData"));}}else{var EC=DV.selectedTargets[0].identity,D9={at:EC.at,dei:EC.dei,dpt:EC.dpt,o:EC.o,n:EC.n,tui:EC.tui,ui:EC.tui,axis:EC.isRowAttribute?1:2,v:EC.v,tid:EC.tid};DW=Cm.getGroupAndCalculationContextMenu(Dd,D9,{selection:DV.selectedTargets||[],fnCellName:function(DZ){return DZ.innerText||DZ.textContent;}});["editGroup","editCalculation","createDe"].forEach(function(DZ){Cm.absorbMenuItems(DH,DW[DZ],true);});if(DD){DH.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",Dd.getMenuHandler("selectionShowData"));}if(DW.renameDe.menus.length>0){DH.addSeparator();}Cm.absorbMenuItems(DH,DW.renameDe);if(DW.renameDe.menus.length>0){Dp=DH.getMenuItems().length-1;}}}break;case AZ.GM_X_CATEGORY:case AZ.GM_Y_CATEGORY:if(D8){DN=(DF.identity.tid||DF.identity.attrIdArr[0]);DU=Dv.attributeSelectionInfo;Dm=DU[DN];DH.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:true,selInfo:Dm});DH.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:false,selInfo:Dm});if(Dv.firstRes.gsi.sorts[0].length!==0||Dv.firstRes.gsi.sorts[1].length!==0){DH.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dd.getMenuHandler("clearSort"));}}else{if(Dz){D7=function(){var DZ=new V.ui.menus.MenuConfig();function EE(EG){function EF(){return function(EI,EH){if(EI!==EH){if(ED===AZ.GM_X_CATEGORY){EG.writeGlobalProperty(C9.X_AXIS_LABELS_SHOW,EI);}else{if(ED===AZ.GM_Y_CATEGORY){EG.writeGlobalProperty(C9.Y_AXIS_LABELS_SHOW,EI);}}}};}return function(){var EH=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EI){EH.push(EI);});if(ED===AZ.GM_X_CATEGORY){DZ.addRadioMenuGroup(EG.readGlobalProperty(C9.X_AXIS_LABELS_SHOW),EF(),EH,"checkMark",undefined,true);}else{if(ED===AZ.GM_Y_CATEGORY){DZ.addRadioMenuGroup(EG.readGlobalProperty(C9.Y_AXIS_LABELS_SHOW),EF(),EH,"checkMark",undefined,true);}}return DZ;};}(EE(Dd))();return DZ;};DH.addSubMenuItem(mstrmojo.desc(12003,"Axis Labels"),"xt",this.id,D7);var D6=function(){var DZ=new V.ui.menus.MenuConfig();function EE(EG){function EF(){return function(EI,EH){if(EI!==EH){if(ED===AZ.GM_X_CATEGORY){EG.writeGlobalProperty(C9.X_AXIS_LABELS_ROTATION,EI);}else{if(ED===AZ.GM_Y_CATEGORY){EG.writeGlobalProperty(C9.Y_AXIS_LABELS_ROTATION,EI);}}}};}return function(){var EH=[];[{text:mstrmojo.desc(12284,"Automatic"),value:B2.EnumLabelRotation.AUTOMATIC},{text:mstrmojo.desc(12285,"Vertical"),value:B2.EnumLabelRotation.VERTICAL},{text:mstrmojo.desc(12286,"Horizontal"),value:B2.EnumLabelRotation.HORIZONTAL}].forEach(function(EI){EH.push(EI);});if(ED===AZ.GM_X_CATEGORY){DZ.addRadioMenuGroup(EG.readGlobalProperty(C9.X_AXIS_LABELS_ROTATION),EF(),EH,"checkMark",undefined,true);}else{if(ED===AZ.GM_Y_CATEGORY){DZ.addRadioMenuGroup(EG.readGlobalProperty(C9.Y_AXIS_LABELS_ROTATION),EF(),EH,"checkMark",undefined,true);}}return DZ;};}(EE(Dd))();return DZ;};if(DV.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK&&ED===AZ.GM_X_CATEGORY){DH.addSubMenuItem(mstrmojo.desc(12283,"Rotation"),"xt",this.id,D6);}}else{DN=(DF.identity.tid||DF.identity.attrIdArr[0]);DU=Dv.attributeSelectionInfo;Dm=DU[DN];DH.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:true,selInfo:Dm});DH.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:false,selInfo:Dm});if(Dv.firstRes.gsi.sorts[0].length!==0||Dv.firstRes.gsi.sorts[1].length!==0){DH.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dd.getMenuHandler("clearSort"));}DH.addSeparator();D2=Dd.zonesModel.gmZones;DP=(function(){var DZ,EF,EE;DZ=D2.dropZones;for(EF in DZ){DY=DZ[EF].items;for(EE in DY){if(DY[EE].did===DN){Dh=DY[EE];return DZ[EF];}}}}());Da={zone:DP,axis:DP&&DP.id,idx:Cd.find(DY,"id",Dh.id),cnt:DY.length,item:Dh,useDropzone:true};Df=!D2.docModel.isFromMDXCube(Dh.did);if(Dh.da&&Df){DH.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){D2.editDerivedAttribute(Da);},Da);}EB=D2.isDynamicLink(Dh);if(D2.allowInsertNewAttribute(DP)&&!Cm.hasCGorCon(Dd,Dh)&&Df&&!EB){DH.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){D2.newDerivedAttribute(Da);},Da);}DL=Dh.t===mstrmojo.chart.model.enums.EnumDSSObjectType.DssTypeConsolidation&&D2.getUnitInfoInTemplate(Dh.did).unit.ost===12033;DK=D2.isAttribute(Dh)?mstrmojo.desc(13295,"Create Groups..."):(DL?mstrmojo.desc(13296,"Edit Groups..."):null);if(DK!==null&&!EB){DH.addMenuItem(DK,"eg",D2.getCreateOrEditElementGroupFunc(Da));}DH.addSeparator();if(!EB){DI();}DH.addSeparator();if(D2.showNumberFormat(Dh)){DH.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),D2.id,D2.getNumberFormatEditorCfg,Da);DH.addSeparator();}Dp=DH.getMenuItems().length;DH.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){D2.deleteItem(DP,Da.idx);});}}break;case AZ.LASSO_SELECTOR:case AZ.GM_SHAPE:case AZ.GM_MARKER:var Dc=Dy&&Dy.getShape();Dt=DF.subType;var Db=this.widget.model.data.dz.ColorBy,D1;if(Dv.supportViewFilter&&DV.selectedShapes){var DB=Dd.model.data.dz,DX=[DB.SliceBy,DB.BreakBy,DB.XAxis,DB.YAxis,DB.Rows,DB.Columns],DQ=[];DV.selectedShapes.forEach(function(DZ){DZ.identity.objectInfo.forEach(function(EE){DQ=DQ.filter(function(EF){return EF!==EE.tid;});DQ.push(EE.tid);});});Cd.forEach(DX,function(DZ){if(DZ.TemplateUnit){for(var EE=DZ.TemplateUnit.length-1;EE>=0;EE--){if(DQ.indexOf(DZ.TemplateUnit[EE].id)!==-1){D1=DZ.TemplateUnit[EE].id;return false;}}}});if(D1){DH.addMenuItem(mstrmojo.desc(11701,"Keep Only"),"xt",Dd.getMenuHandler("selectionKeepOnly"));DH.addMenuItem(mstrmojo.desc(3946,"Exclude"),"xt",Dd.getMenuHandler("selectionExclude"));DC(D1,true);DH.addSeparator();}}if(D8){if(D1){DH.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",Dd.getMenuHandler("selectionShowData"));DH.addSeparator();}DH.addSubMenuItem(mstrmojo.desc(11993,"Data Labels"),"",this.id,Dr);}else{if(!Dz){DW=Bu(Dd,DV.selectedShapes);["editGroup","editCalculation","createDe"].forEach(function(DZ){Cm.absorbMenuItems(DH,DW[DZ],true);});if(D1){DH.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",Dd.getMenuHandler("selectionShowData"));DH.addSeparator();}DH.addSubMenuItem(mstrmojo.desc(11993,"Data Labels"),"",this.id,Dr);if(Dt){if(!Db.TemplateMetric||Db.MetricNames!==undefined){if((Dc===Bs.LINE&&(Dt===BK.SCIRCLE||Dt===BK.SBAR))||Dt==="ticker"){DH.addPopupMenuItem(mstrmojo.desc(3523,"Line Color"),this.id,function(){return Bi(this.widget,DF.elem,Db,{showNoFill:false,showAutomatic:true,showGradient:DV.isShowGradientAllowed(Dc)});});}if((Dc===Bs.AREA&&Dt===BK.SCIRCLE)||Dt==="bar"||Dt==="circle"||Dt==="square"||Dt==="gbar"||Dt==="pie"||Dt==="ring"){DH.addPopupMenuItem(mstrmojo.desc(13619,"Shape Fill Color"),this.id,function(){return Bi(this.widget,DF.elem,Db,{showNoFill:true,showAutomatic:true,showGradient:DV.isShowGradientAllowed(Dc)});});}}}if(Dt){if(this.isLineOrAreaPaint(Dc)&&(Dt===BK.SCIRCLE&&(Dc===Bs.LINE||Dc===Bs.AREA))||Dt==="gmMarker"){DH.addSubMenuItem(mstrmojo.desc(12159,"Marker"),"",this.id,Dg);}}DH.addSeparator();if(Db.TemplateMetric&&!Db.MetricNames){var DO=Cm.getMetricsInDropZone(this.widget.zonesModel,mstrmojo.vi.viz.EnumDSSDropZones.ColorBy);DH.addMenuItem(mstrmojo.desc(13174,"Select color ranges..."),"",function(){DV.widget.model.openThresholdEditor(DO[0],true,false);});}if(EA.isABL&&!EA.isPie){var Dn=Dy&&Dy.getSelectedObjectMetricInfo(),D3=Dn&&Dn.length&&Dn[0],DR=Dd.model.data.gts.col[Dd.model.data.gts.col.length-1].es,Dq=0;if(D3){Cd.forEach(DR,function(DZ){if(DZ.oid===D3.eid){return false;}Dq++;});DH.addSeparator();p.getSubMenu(Dd,DH,D3.eid,Dq);}}else{if(EA.isBubbleOrScatter){DH.addSeparator();var DJ=Dd.getMenuHandler("changeGlobalShape");if(DJ){DH.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",Dd.id,DJ);}}}if(DW.renameDe.menus.length>0){DH.addSeparator();}Cm.absorbMenuItems(DH,DW.renameDe);if(DW.renameDe.menus.length>0){Dp=DH.getMenuItems().length-1;}}}break;case AZ.GM_DATA_LABEL:DH.addSubMenuItem(mstrmojo.desc(11993,"Data Labels"),"",this.id,Dr);break;case AZ.GM_X_NUMERIC:case AZ.GM_Y_NUMERIC:if(D8){Do=Do?Do:DF.selectionInfos[0];if(EA.isABL&&DF.identity&&DF.identity.objType!==AA.Y_ATTRIBUTE_AXIS_TITLE&&DF.identity.objType!==AA.X_ATTRIBUTE_AXIS_TITLE){DH.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dd.getMenuHandler("sortMetricTitle"),{isAsc:true,selInfo:Do});DH.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dd.getMenuHandler("sortMetricTitle"),{isAsc:false,selInfo:Do});if(Dv.firstRes.gsi.sorts[0].length!==0||Dv.firstRes.gsi.sorts[1].length!==0){DH.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dd.getMenuHandler("clearSort"));}}}else{if(Dz){D7=function(){var DZ=new V.ui.menus.MenuConfig();function EE(EG){function EF(){return function(EI,EH){if(EI!==EH){if(ED===AZ.GM_X_NUMERIC){EG.writeGlobalProperty(C9.X_AXIS_LABELS_SHOW,EI);}else{if(ED===AZ.GM_Y_NUMERIC){EG.writeGlobalProperty(C9.Y_AXIS_LABELS_SHOW,EI);}}}};}return function(){var EH=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EI){EH.push(EI);});if(ED===AZ.GM_X_NUMERIC){DZ.addRadioMenuGroup(EG.readGlobalProperty(C9.X_AXIS_LABELS_SHOW),EF(),EH,"checkMark",undefined,true);}else{if(ED===AZ.GM_Y_NUMERIC){DZ.addRadioMenuGroup(EG.readGlobalProperty(C9.Y_AXIS_LABELS_SHOW),EF(),EH,"checkMark",undefined,true);}}return DZ;};}(EE(Dd))();return DZ;};DH.addSubMenuItem(mstrmojo.desc(12003,"Axis Labels"),"xt",this.id,D7);D6=function(){var DZ=new V.ui.menus.MenuConfig();function EE(EG){function EF(){return function(EI,EH){if(EI!==EH){if(ED===AZ.GM_X_NUMERIC){EG.writeGlobalProperty(C9.X_AXIS_LABELS_ROTATION,EI);}else{if(ED===AZ.GM_Y_NUMERIC){EG.writeGlobalProperty(C9.Y_AXIS_LABELS_ROTATION,EI);}}}};}return function(){var EH=[];[{text:mstrmojo.desc(12284,"Automatic"),value:B2.EnumLabelRotation.AUTOMATIC},{text:mstrmojo.desc(12285,"Vertical"),value:B2.EnumLabelRotation.VERTICAL},{text:mstrmojo.desc(12286,"Horizontal"),value:B2.EnumLabelRotation.HORIZONTAL}].forEach(function(EI){EH.push(EI);});if(ED===AZ.GM_X_NUMERIC){DZ.addRadioMenuGroup(EG.readGlobalProperty(C9.X_AXIS_LABELS_ROTATION),EF(),EH,"checkMark",undefined,true);}else{if(ED===AZ.GM_Y_NUMERIC){DZ.addRadioMenuGroup(EG.readGlobalProperty(C9.Y_AXIS_LABELS_ROTATION),EF(),EH,"checkMark",undefined,true);}}return DZ;};}(EE(Dd))();return DZ;};if(DV.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK&&ED===AZ.GM_X_NUMERIC){DH.addSubMenuItem(mstrmojo.desc(12283,"Rotation"),"xt",this.id,D6);}}else{var Di=DF.multiMetrics;if(Di&&Di.length>1){DA(Di[0]);}else{Dx=DF.metrics;if(Dx){DG=DF.selectionInfos;D0=Dx.length;if(D0===1){if(DG[0]&&DG[0].elem){delete DG[0].elem;}Cm.absorbMenuItems(DH,DE(Dx[0],DG[0]));}else{Cd.forEach(Dx,function(EE,DZ){DH.addSubMenuItem(EE,"",DV.id,function(){if(DG[DZ]&&DG[DZ].elem){delete DG[DZ].elem;}return DE(EE,DG[DZ]);});});if(Dv.isStacked&&!Dv.splitPlottingMetrics){DH.addSeparator();p.getReferenceLineSubMenu(Dd,DH,EA.isABL,DG[0].mid);}}break;}}}}break;case AZ.GM_XLABEL:case AZ.GM_YLABEL:if(Dz){De=function(){var DZ=new V.ui.menus.MenuConfig();function EE(EG){function EF(){return function(EI,EH){if(EI!==EH){if(ED===AZ.GM_XLABEL){EG.writeGlobalProperty(C9.X_AXIS_TITLE_SHOW,EI);}else{if(ED===AZ.GM_YLABEL){EG.writeGlobalProperty(C9.Y_AXIS_TITLE_SHOW,EI);}}}};}return function(){var EH=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EI){EH.push(EI);});if(ED===AZ.GM_XLABEL){DZ.addRadioMenuGroup(EG.readGlobalProperty(C9.X_AXIS_TITLE_SHOW),EF(),EH,"checkMark",undefined,true);}else{if(ED===AZ.GM_YLABEL){DZ.addRadioMenuGroup(EG.readGlobalProperty(C9.Y_AXIS_TITLE_SHOW),EF(),EH,"checkMark",undefined,true);}}return DZ;};}(EE(Dd))();return DZ;};DH.addSubMenuItem(mstrmojo.desc(13679,"Axis Title"),"xt",this.id,De);}else{if(D8){if(EA.isABL&&DF.identity&&DF.identity.objType!==AA.Y_ATTRIBUTE_AXIS_TITLE&&DF.identity.objType!==AA.X_ATTRIBUTE_AXIS_TITLE){DH.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dd.getMenuHandler("sortMetricTitle"),{isAsc:true,selInfo:Do});DH.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dd.getMenuHandler("sortMetricTitle"),{isAsc:false,selInfo:Do});if(Dv.firstRes.gsi.sorts[0].length!==0||Dv.firstRes.gsi.sorts[1].length!==0){DH.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dd.getMenuHandler("clearSort"));}}}else{if(DF.identity){if(DF.identity.objType!==AA.Y_ATTRIBUTE_AXIS_TITLE&&DF.identity.objType!==AA.X_ATTRIBUTE_AXIS_TITLE){var Di=DF.multiMetrics;if(Di&&Di.length>1){DA(Do);}else{Cm.absorbMenuItems(DH,DE(DF.metric,Do));}}else{D2=Dd.zonesModel.gmZones;DP=(function(){var DZ,EF,EE;DZ=D2.dropZones;for(EF in DZ){DY=DZ[EF].items;for(EE in DY){if(DY[EE].did===DF.identity.tid){Dh=DY[EE];return DZ[EF];}}}}());Da={zone:DP,axis:DP&&DP.id,idx:Cd.find(DY,"id",Dh.id),cnt:DY.length,item:Dh,useDropzone:true};Df=!D2.docModel.isFromMDXCube(Dh.did);if((Dh.t===47&&(Dh.st===12033||Dh.st===12032))||(Dy.otp===47&&(Dy.ost===12033||Dy.ost===12032))){if(Dy.ost===12033){DH.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"eg",D2.getCreateOrEditElementGroupFunc(Da));DH.addSeparator();}DH.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dy});DH.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dy});if(Dv.firstRes.gsi.sorts[0].length!==0||Dv.firstRes.gsi.sorts[1].length!==0){DH.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dd.getMenuHandler("clearSort"));}DH.addSeparator();}else{if(Dh.da&&Df){DH.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){D2.editDerivedAttribute(Da);},Da);DH.addSeparator();}DH.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dy});DH.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",Dd.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dy});if(Dv.firstRes.gsi.sorts[0].length!==0||Dv.firstRes.gsi.sorts[1].length!==0){DH.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",Dd.getMenuHandler("clearSort"));}DH.addSeparator();EB=D2.isDynamicLink(Dh);if(D2.allowInsertNewAttribute(DP)&&!Cm.hasCGorCon(Dd,Dh)&&Df&&!EB){DH.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){D2.newDerivedAttribute(Da);},Da);}DL=Dh.t===47&&D2.getUnitInfoInTemplate(Dh.did).unit.ost===12033;DK=D2.isAttribute(Dh)?mstrmojo.desc(13295,"Create Groups..."):(DL?mstrmojo.desc(13296,"Edit Groups..."):null);if(DK!==null&&!EB){DH.addMenuItem(DK,"eg",D2.getCreateOrEditElementGroupFunc(Da));}DH.addSeparator();if(D2.showNumberFormat(Dh)){DH.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),D2.id,D2.getNumberFormatEditorCfg,Da);}DC(Dy&&Dy.tid);if(!EB){DI();}DH.addSeparator();}Dp=DH.getMenuItems().length;if(D2.hasReplaceCandidates(Da)){DH.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",Dd.zonesModel.id,D2.getReplaceSubMenu,Da);}if(DF.elem&&DF.elem.firstChild){AG(Dd,DH,DF.elem.firstChild,Dh);}DH.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){D2.deleteItem(DP,Da.idx);});}}}}break;case AZ.GM_ROW_HEADER_EXTRA:case AZ.GM_COL_HEADER_EXTRA:if(Dz){getHeaderMenuInFmtMode.call(this);}else{Cm.absorbMenuItems(DH,DE(DF.metric,Do));}break;case AZ.GM_SVG_CHART:if(Dd.legend){if(Dd.legend.height===0&&Dd.legend.width===0){DH.addMenuItem(mstrmojo.desc(12001,"Show Legend"),"xt",function(){Dd.writeGlobalProperty("LegendVisibleness",true);});}}DH.addPopupMenuItem(mstrmojo.desc(11991,"Grid Lines"),this.id,Ds);DH.addSeparator();At.call(DV,DH);DH.addSeparator();DT();break;case AZ.GM_TREND_LINE:if(!Dz){var Dl=Dd.readGlobalProperty(Ab.TREND_LINE_DEF,Dy.tlOpt);DH.addPopupMenuItem(mstrmojo.desc(3523,"Line Color"),this.id,function(){return Al(this.widget,Ab.TREND_REF_LINE_COLOR,{realPropName:Ab.TREND_LINE_DEF,opt:Dy.tlOpt},Dl,false);});DH.addMenuItem(mstrmojo.desc(13680,"Disable trend line"),"xt",function(){Dl.setProperty(Ab.TREND_ENABLED,false);Dd.writeGlobalProperty(Ab.TREND_LINE_DEF,Dl,Dy.tlOpt);});}break;case AZ.GM_REF_LINE:if(!Dz){var Dw=Dd.readGlobalProperty(Ab.REF_LINE_DEF,Dy.tlOpt);DH.addPopupMenuItem(mstrmojo.desc(3523,"Line Color"),this.id,function(){return Al(this.widget,Ab.TREND_REF_LINE_COLOR,{realPropName:Ab.REF_LINE_DEF,opt:Dy.tlOpt},Dw,false);});DH.addMenuItem(mstrmojo.desc(13681,"Disable reference line"),"xt",function(){Dw.setProperty(Ab.REF_ENABLED,false);Dd.writeGlobalProperty(Ab.REF_LINE_DEF,Dw,Dy.tlOpt);});}break;case AZ.GM_H_GRID_LINE:case AZ.GM_V_GRID_LINE:case AZ.GM_H_MINOR_GRID_LINE:case AZ.GM_V_MINOR_GRID_LINE:Ds(DH);break;default:}if(Dp){DH.fmtOptIdx=Dp;}return DH;},getSelectedTargetsIdentities:function(){var DB=this.selectedTargets,DA=[];(DB||[]).forEach(function(DC){if(DC.identity){DA.push(DC.identity);}});return DA;},handleRMClick:function(DV,DT,DI,DR){DV=this.getRealTargetForSetShape(DV,DR);var DD,DC=this.fmtMode,DB=DR.ctlKey||DR.metaKey,DF=this.widget,DQ=DV.getAttribute("type"),DS=this.fmtMode?AT(DV):AX(DV);var DO,DN;if(!DS&&!this.fmtMode){DS=AT(DV);}if(!DS){var DJ=new V.ui.menus.MenuConfig();this.addFormatOption(DJ);if(DJ&&DJ.menus&&DJ.menus.length){this.hideTooltip();Ak.call(this,DI,DJ);}return ;}DD=DS.getAttribute("type");if(B1(DD)){this.clearSelectedTargets();if(!Cg(DS)){if(DC){if(this.fmtState===Bn.NORMAL){this.fmtState=Bn.PER_COLORBY;}this.handleClickOnShapeFMT(DS,DB);DF.onFormatableTargetChanged();}else{this.handleClickOnShape(DS,DB);}}DI.x-=4;DI.y-=4;}else{if(DC){DO=this.selectedTargets||[];var DU=this.copeTargetChangeForDBLClick([DS])[0];DN=DO&&DO.indexOf(DU)!==-1;if(!DN){this.clearSelectedTargets();this.selectTarget(this.getTargetsWithSameType(DS));}}else{if(DD!==AZ.LASSO_SELECTOR){DO=this.selectedTargets||[];DN=DO&&DO.indexOf(DS)!==-1;if(!DN&&!Cf.call(this,DS,DD)){if(!DB){this.clearSelectedTargets();}if(mstrApp.appState!==mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION&&(h(DD)||t(DD)||Aq(DD)||A1(DD))){this.fmtMode=true;this.selectTarget(this.getTargetsWithSameType(DS));this.fmtMode=false;}else{this.selectTarget(this.getTargetsWithSameType(DS));}}}}}if(!DC){DF.endSelections();}if(DD===AZ.LASSO_SELECTOR&&this.selectedShapes.length===0){return ;}var DK,DA,DW=DS.identity||(DS.parentNode&&DS.parentNode.identity),DH={};if(DD===AZ.LASSO_SELECTOR&&!DW){DW=this.selectedShapes.length&&this.selectedShapes[0].identity;}DH.visGM=DF;DH.identity=DW;DH.selectionInfo=DS.selectionInfo;DH.metric=DS.innerText||DS.textContent||"";DH.metrics=DS.metrics;DH.selectionInfos=DS.selectionInfos;DH.subType=DS.getAttribute("subtype");DH.orgType=DQ;DH.elem=DS;DH.tagName=DS.tagName;if(M(this.selType)){var DG=[],DL;DO=this.selectedTargets||[];Cd.forEach(DO,function(DX){DL=DX.selectionInfo?Cd.find(DG,"mid",DX.selectionInfo.mid):null;if(DL===-1){DG.push(DX.selectionInfo);}});DH.multiMetrics=DG;}DK=this.getMenuConfig(DD,DT,DH,DC);DA=this.getToolbarConfig(DD,DH,DC);this.addFormatOption(DK,DK.fmtOptIdx);if(DK&&DK.menus&&DK.menus.length){this.hideTooltip();Ak.call(this,DI,DK);}var DP=this.domMenuPH.firstChild;if(DP&&DP.offsetTop<0){DI.y+=DP.offsetTop;}if(DA){this.hideTooltip();AJ.call(this,DI,DA);}if(DW&&DW.objType!==AA.GRAPH_SHAPE){var DM;if(DQ===AZ.GM_ROW_HEADER){DM=Ay.copy(DW);DM.objType=AA.ROWS_BACKGROUND;}if(DQ===AZ.GM_COL_HEADER){DM=Ay.copy(DW);DM.objType=AA.COLS_BACKGROUND;}if(DM){DF.raiseEventOnFormattingIdentity(AQ([DM]));}else{if(DC){var DE=this.getSelectedTargetsIdentities();DF.raiseEventOnFormattingIdentity(AQ(DE));}else{DF.raiseEventOnFormattingIdentity(AQ([DW]));}}}this.toggleGMFade();},formatHandler:function(DA){var DF=this,DG=this.widget,DH;mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");DG.parent.selectVIUnit();DA=DA||(DF.selectedTargets.length?DF.selectedTargets:DF.selectedShapes);if(DA.length===0||DA[0].getAttribute("type")===AZ.GM_DUMMY_A){DG.raiseEventOnNonFormattingIdentity(AQ({objType:AA.VIZ_BOX_CONTAINER}));if(DG.mousePos){DH=DF.getToolbarConfig(AZ.GM_SVG_CHART,{},true);DF.hideTooltip();AL.call(DF,DG.mousePos,DH);}return ;}var DE=DA[0],DD=DE.getAttribute("type"),DC=DE.identity,DB={visGM:DG,identity:DC,subType:DE.getAttribute("subtype"),orgType:DD};this.fmtFake=true;this.highlightByFormat(DE);this.fmtFake=false;DH=DF.getToolbarConfig(DD,DB,true);if(DH){DF.hideTooltip();AL.call(DF,DG.mousePos,DH);}},highlightByFormat:function(DE){var DD=DE.getAttribute("type"),DC=this.fmtState,DF=this.widget,DG=false,DH;if(B1(DD)){this.clearSelectedTargets();if(DC===Bn.NORMAL||DC===Bn.PER_COLORBY){DH=this.handleClickOnShapeFMT(DE,DG);DC=Bn.PER_COLORBY;}else{if(DG){DH=this.handleDblClickOnShapeFMT(DE,DG);}else{DF.clearUserSelections();DH=this.handleClickOnShapeFMT(DE,DG);DC=Bn.PER_COLORBY;}}if(DH===0){DC=Bn.NORMAL;}this.fmtState=DC;DF.onFormatableTargetChanged();}else{if(CU(DD)||A5(DD)||h(DD)||t(DD)||M(DD)||AW(DD)||Aq(DD)||A1(DD)||A1(DD)||B4(DD)||BP(DD)||x(DD)||Bq(DD)){DF.clearUserSelections();this.clearSelectedTargets();this.fmtMode=true;this.selectTarget(this.getTargetsWithSameType(DE));this.fmtMode=false;}else{this.clearSelectedTargets();DF.clearUserSelections();}var DB=this.getSelectedTargetsIdentities(),DA=[];Cd.forEach(DB,function(DI){switch(DI.objType){case AA.ROW_TITLE:DA.push({objType:AA.ROWS_BACKGROUND});break;case AA.COL_TITLE:DA.push({objType:AA.COLS_BACKGROUND});break;case AA.REF_LINE:case AA.TREND_LINE:DI.key=DI.lineModel.trendLineModel.metricId;break;default:break;}});if(DB.length===0){DB={objType:AA.VIZ_BOX_CONTAINER};}else{if(DA.length){DB=DB.concat(DA);}}DF.raiseEventOnNonFormattingIdentity(AQ(DB));}},addFormatOption:function(DB,DC){var DE=this;if(mstrApp.appState===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION){return ;}if(!mstrApp.allowWebDashboardDesign()){return ;}if(DB&&DB.menus&&DB.menus.length>0){DB.addSeparator();}var DA=DE.selectedTargets.length?DE.selectedTargets:DE.selectedShapes;var DD=[];Cd.forEach(DA,function(DG){var DF=DG.cloneNode();DF.identity=DG.identity;DD.push(DF);});if(DC){DB.addMenuItem("","separator",function(){return false;},{},DC+1);DB.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){DE.formatHandler(DD);},{},DC+2);DB.addMenuItem("","separator",function(){return false;},{},DC+3);}else{DB.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){DE.formatHandler(DD);});}},copeTargetChangeForDBLClick:function(DC){var DB,DA=[];Cd.forEach(DC||[],function(DE){var DD=DE.getAttribute("type");if(DD===AZ.GM_ROW_HEADER||DD===AZ.GM_ROW_HEADER_EXTRA||DD===AZ.GM_ROW_HEADER_TITLE||DD===AZ.GM_COL_HEADER||DD===AZ.GM_COL_HEADER_TITLE||DD===AZ.GM_COL_HEADER_EXTRA){DB=CK(DE,"type",[AZ.GM_TEXT_BODY]);if(DB.length>0){DA.push(DB[0]);}else{DA.push(DE);}}else{DA.push(DE);}});return DA;},getRealTargetForSetShape:function(DI,DJ){var DD=DI.getAttribute("type"),DF,DK=DI,DG=this.widget,DL=DG.domGM.childNodes[0],DC,DA=this.widget.GMController.getChartInfo(),DE=Cm.getMouseOffset(DJ),DM=(DJ.button===2);if(DD===AZ.GM_SVG_CHART){DL.style.zIndex="-2";DF=document.elementFromPoint(DJ.pageX,DJ.pageY);DL.style.zIndex="auto";DC=DF.getAttribute("type");if(DM&&(DC===AZ.LINE_CONTAINER||DC===AZ.GM_H_GRID_LINE||DC===AZ.GM_V_GRID_LINE||DC===AZ.GM_H_MINOR_GRID_LINE||DC===AZ.GM_V_MINOR_GRID_LINE)){DK=DF;}else{if(DA.tp===Cj.LINE&&DA.shape===Bs.LINE){var DB=this.getLinePoint(DI,DA,DE.x,DE.y);if(DB){DK=DB;}else{DK=DF;}}}}else{if(DD===AZ.GM_SET_SHAPE&&DA.tp===Cj.AREA&&DA.shape===Bs.AREA){var DH=this.getAreaPoint(DI,DA,DE.x,DE.y);if(DH){DK=DH;}}}return DK;},handleClick:function(DS,DB,DP,DA){DS=this.getRealTargetForSetShape(DS,DP);var DF=this.widget,DO=DS.getAttribute("type"),DQ=this.fmtMode?AT(DS):AX(DS),DC=this.fmtMode,DK,DD,DJ=this.fmtState;var DI=DF.isClearAllDisabled();if(!!DA){if(DQ){DD=DQ.getAttribute("type");if(!B1(DD)){return ;}}else{return ;}}if(!DQ){if(DI){return ;}DF.clearUserSelections();this.clearSelectedTargets();if(DC){DF.raiseEventOnFormattingIdentity([]);}if(Cm.isOnExpressMode()){DF.singleUnitSelect();}return ;}DD=DQ.getAttribute("type");if(DC){if(B1(DD)){this.clearSelectedTargets();if(DJ===Bn.NORMAL||DJ===Bn.PER_COLORBY){DK=this.handleClickOnShapeFMT(DQ,DB);DJ=Bn.PER_COLORBY;}else{if(DB){DK=this.handleDblClickOnShapeFMT(DQ,DB);}else{DF.clearUserSelections();DK=this.handleClickOnShapeFMT(DQ,DB);DJ=Bn.PER_COLORBY;}}if(DK===0){DJ=Bn.NORMAL;}this.fmtState=DJ;DF.onFormatableTargetChanged();}else{if((DO===AZ.GM_TEXT_BODY)||CU(DD)||A5(DD)||h(DD)||t(DD)||M(DD)||AW(DD)||Aq(DD)||A1(DD)||A1(DD)||B4(DD)||BP(DD)||x(DD)||Bq(DD)){DF.clearUserSelections();this.clearSelectedTargets();this.selectTarget(this.getTargetsWithSameType(DQ));}else{this.clearSelectedTargets();DF.clearUserSelections();}var DE=this.getSelectedTargetsIdentities();DF.raiseEventOnFormattingIdentity(AQ(DE));}}else{if(Cm.isOnExpressMode()){var DL=M(DD)&&(DQ.identity&&DQ.identity.mOriId);var DM=B1(DD)||CU(DD)||A5(DD);DF.processSelectedMetricIds(DM,DL,DB);DF.precessSelectedAttributes(DM,DL,DB);if(B1(DD)){this.handleClickOnShape(DQ,DB);DF.endSelections();}else{if(DD===AZ.GM_ROW_HEADER||DD===AZ.GM_COL_HEADER||DD===AZ.GM_ROW_HEADER_TITLE||DD===AZ.GM_COL_HEADER_TITLE){DF.clearSelectedShapesAndCharts();this.handleClickOnTarget(DS,DB,Cq);DF.endSelections();}else{if(x(DD)||Bq(DD)){DF.clearUserSelections();this.clearSelectedTargets();this.selectTarget(this.getTargetsWithSameType(DQ));}else{if(DD===AZ.LASSO_RESIZER){}else{if(DF.hasMetricSelector()&&M(DD)){if(DQ.identity.mOriId){DF.selectedMetricIds.push(DQ.identity.mOriId);DF.endSelections();}}else{this.clearSelectedTargets();DF.clearUserSelections();}}}}}}else{if(B1(DD)){if(DI&&this.selectedShapes.indexOf(DQ)>-1){return ;}this.handleClickOnShape(DQ,DB);DF.endSelections();}else{if(DD===AZ.GM_ROW_HEADER||DD===AZ.GM_COL_HEADER||DD===AZ.GM_ROW_HEADER_TITLE||DD===AZ.GM_COL_HEADER_TITLE){if(DI&&this.selectedTargets.indexOf(DQ)>-1){return ;}DF.clearSelectedShapesAndCharts();this.handleClickOnTarget(DS,DB,Cq);DF.endSelections();}else{if(DD===AZ.GM_XLABEL||DD===AZ.GM_YLABEL){DF.clearSelectedShapesAndCharts();DF.endSelections();this.handleClickOnTarget(DS,DB,DD);}else{if(x(DD)||Bq(DD)){this.clearSelectRules();DF.clearSelections(true);DF.endSelections();this.selectTarget(this.getTargetsWithSameType(DQ));}else{if(DD===AZ.LASSO_RESIZER){}else{var DH=this.selectedTargets.length>0&&this.selectedTargets[0],DG=DH&&DH.getAttribute("type"),DN=this.selectedShapes.length>0&&this.selectedShapes[0],DR=DN&&DN.getAttribute("type");if(DI&&((DH&&(DG===AZ.GM_ROW_HEADER||DG===AZ.GM_COL_HEADER))||(DN&&B1(DR)))){return ;}this.clearSelectRules();DF.clearSelections(true);DF.endSelections();}}}}}}}this.toggleGMFade();},deselectTarget:function(DE){var DD=this.widget,DB=DD.manager,DA=DE.identity,DC=DE.getAttribute("type");BG(DE,s.NORMAL);this.selectedTargets=(this.selectedTargets||[]).filter(function(DF){return DF!==DE;});if(DC===AZ.GM_ROW_HEADER){BC(DE,false,"selected",DB);BC(DE,false,"sh",DB);DD.removeAttributeSelection(DA.tid,DA.eid);}if(DC===AZ.GM_COL_HEADER){a(DE,false,"selected",DB);a(DE,false,"sh",DB);DD.removeAttributeSelection(DA.tid,DA.eid);}},toggleSelectTarget:function(DB){if(M(this.selType)){var DA=Cg(DB)||Af(DB);Y.call(this,DB);if(DA){return false;}}else{if(Cg(DB)||Af(DB)){this.deselectTarget(DB);this.deselectBorders(DB);return false;}}this.selectTarget(this.getTargetsWithSameType(DB));return true;},handleClickOnTarget:function(DD,DE,DC){var DB=this.fmtMode?AT(DD):AX(DD);if(!DE||this.selType!==DC){var DA=(this.selectedTargets&&this.selectedTargets.length===1&&this.selectedTargets[0]===DB);this.clearSelectedTargets();this.selType=DC;if(DA){return 0;}}this.toggleSelectTarget(DB);},handleDblClick:function(DG,DA,DH){DG=this.getRealTargetForSetShape(DG,DH);var DB,DI,DF=this.fmtMode,DD=this.fmtState,DC=DF?AT(DG):AX(DG),DE=this.widget;if(!DC){DE.clearUserSelections();this.clearSelectedTargets();if(DF){DE.raiseEventOnFormattingIdentity([]);}return ;}if(DC&&DF){DI=DC.getAttribute("type");if(B1(DI)){if(DD===Bn.NORMAL||DD===Bn.PER_SHAPE){DB=this.handleDblClickOnShapeFMT(DC,DA);DD=Bn.PER_SHAPE;}else{if(DA){DB=this.handleClickOnShapeFMT(DC,DA);}else{DE.clearUserSelections();DB=this.handleDblClickOnShapeFMT(DC,DA);DD=Bn.PER_SHAPE;}}if(DB===0){DD=Bn.NORMAL;}this.fmtState=DD;DE.onFormatableTargetChanged();}else{DE.clearUserSelections();this.clearSelectedTargets();this.selectTarget(this.copeTargetChangeForDBLClick(this.getTargetsWithSameTypeForDBL(DC)));var DJ=this.getSelectedTargetsIdentities();DE.raiseEventOnFormattingIdentity(AQ(DJ));}}},handleDblClickOnShapeFMT:function(DF,DH){var DD,DC,DA,DE=DF.getAttribute("type"),DG=this.breakByRules,DB=this.breakByShapes;if(DE===AZ.GM_MARKER){DD=DF.source;}else{DD=DF;}if(!DH){this.clearSelectRules();}DC=AY(DD);if(Cg(DD)){DA=Bf(DG,DC);if(DA!==-1){DG.splice(DA,1);DB.splice(DA,1);}}else{DG.push(DC);DB.push(DD);}this.doHighlight(A7.METRICS,DG);return DG.length;},handleClickOnShapeFMT:function(DE,DG){var DC,DB,DD=DE.getAttribute("type"),DF=this.colorByRules,DA=this.colorByShapes;if(DD===AZ.GM_MARKER){DC=DE.source;}else{DC=DE;}if(!DG){this.clearSelectRules();}DB=A6(DC);DF.push(DB);DA.push(DC);this.widget.GMController.resetHighLightIndex=true;this.doHighlight(A7.METRICS,DF);return DF.length;},toggleGMFade:function(DB){var DA=this.widget.domGM;DB=(DB===undefined)?this.selectedShapes.length>0:DB;B7.toggleClass(DA,"gm-fade",DB);},handleClickOnShape:function(DE,DF){var DB,DD=false,DA=this.selectedShapes,DC=DE.getAttribute("type");if(!B1(DC)){return -1;}if(DC===AZ.GM_MARKER){DB=DE.source;}else{DB=DE;}if(!DF){DD=DA.length===1&&DA[0]===DB;if(!DD||!this.widget.isClearAllDisabled()){this.widget.clearSelections(true);}if(DD){return 0;}}else{this.clearSelectedTargets();}this.toggleSelectShape(DB);return this.selectedShapes.length;},getLinePoint:function(DL,DC,DK,DI){var DD=function(DP){var DO=DP.length,DS=[],DQ,DR;for(DR=0;DR<DO;DR++){DQ=DP[DR];DS.push({point:C2(DQ),dom:DQ});}return DS;};var DF=function(DO,DZ,DU,DT){var Dd=DO[0],DW=Dd&&Dd.length||0,DY,DR=null,Dc=DZ===Ad.VERTICAL,Da=false,DQ,DX,Db,DP,DS;var DV=function(Dn,Dk,Di,Dh,Dl){var Df=Di.point[0],Dm=Di.point[1],De=Dh.point[0],Dj=Dh.point[1],Dg=(Dj-Dm)/(De-Df);return Dl?Dg*(Dn-Df)+Dm-Dk:Dn-Df+(Dm-Dk)/Dg;};for(DS=0;DS<DW;DS++){DQ=Dc?DU-Dd[DS].point[0]:DT-Dd[DS].point[1];if(DS===0||DX>Math.abs(DQ)){DX=Math.abs(DQ);Db=DS;}if(DQ<0){break;}}DP=DS;if(DP>0&&DP<DW){for(DS=0;DS<DO.length;DS++){DY=DO[DS][Db];DQ=DV(DU,DT,DO[DS][DP-1],DO[DS][DP],Dc);if(DQ<=0){DQ=Math.abs(DQ);Da=true;}if(DS===0||DQ<DX){DX=DQ;DR=DY.dom;}}}return Da?DR:null;};var DJ=DL.childNodes,DE=DJ.length-1,DH,DG,DA=[],DM,DB;for(DG=0;DG<DE;DG++){DH=DJ[DG+1];DB=CK(DH,"type",AZ.GM_SHAPE);DM=DD(DB);if(DM&&DM.length>0){DA.push(DM);}}var DN=DF(DA,DC.dirc,DK,DI);return DN;},isLineOrAreaPaint:function(DF){var DD,DA,DC=0,DG=this.widget,DH=DG.GMController,DE=DG.model.data.gsi.mx,DB=function(DI){switch(DI){case Bs.AREA:return"polygon";case Bs.LINE:return"polyline";}};if(DF!==undefined){DD=DB(DF);}else{Cd.forEach(DE,function(){DF=DH.getOnTheFlyShapeForMetric(DC++);DD=DB(DF);if(DD){return false;}});}if(DD){DA=DG.domGM.getElementsByTagName(DD);for(DC=0;DC<DA.length;DC++){if(DA[DC].getAttribute("type")==="set-shape"){return true;}}}return false;},hoverAreaChartPoint:function(DF,DA,DD,DB){var DC=DF.parentNode,DJ=Cd.filter(DC.childNodes,function(DK){return DK.tagName==="circle";}),DG,DE,DH;Cd.forEach(DJ,function(DK,DM){var DL=C2(DK),DN;if(DA.dirc===Ad.VERTICAL){DN=Math.abs(DD-DL[0]);}else{DN=Math.abs(DB-DL[1]);}if(DM===0||DN<DG){DG=DN;DE=DK;DH=DL;}});if(DE){var DI=BU.position(DC.parentNode);this.hoverShape(DE);this.showTooltip(DE,{x:DI.x+DH[0],y:DI.y+DH[1]});}},hoverLineChartPoint:function(DF,DA,DE,DC){var DI=this.getLinePoint(DF,DA,DE,DC);if(DI&&DI!==this.hoveredShape){var DH=C2(DI),DG=BU.position(DF);var DD=DG.x+DH[0],DB=DG.y+DH[1];this.hoverShape(DI);this.showTooltip(DI,{x:DD,y:DB});}},hoverLineWithDataPoint:function(DC){var DB,DA;if((DC.getAttribute("subtype")===BK.SCIRCLE)){DB=DC.parentNode;DA=DB&&DB.querySelector(".gm-set-polyline");if(DA){this.hoverSetShape(DA);}}},handleMouseOver:function(DD,DF,DA,DE){var DC=this.fmtMode?AT(DD):AX(DD),DB;if(!DC){this.clearHoveredShape();this.clearHoveredSetShape();this.clearHoveredTarget();return ;}DB=DC.getAttribute("type");if(DB===AZ.GM_SHAPE){this.clearHoveredSetShape();this.clearHoveredShape();this.clearHoveredTarget();this.hoverShape(DC);this.hoverLineWithDataPoint(DC);this.hoverOverSelectedShape(DC);}else{if(DB===AZ.GM_SET_SHAPE&&DF.tp===Cj.AREA&&DF.shape===Bs.AREA){this.clearHoveredShape();this.clearHoveredSetShape();this.clearHoveredTarget();this.hoverAreaChartPoint(DC,DF,DA,DE);}else{if(DB===AZ.GM_SET_SHAPE){this.clearHoveredSetShape();this.clearHoveredShape();this.clearHoveredTarget();this.hoverSetShape(DC);}else{if(DB===AZ.GM_SVG_CHART&&DF.tp===Cj.LINE&&DF.shape===Bs.LINE){this.clearHoveredShape();this.clearHoveredSetShape();this.clearHoveredTarget();this.hoverLineChartPoint(DD,DF,DA,DE);}else{this.clearHoveredShape();this.clearHoveredSetShape();this.hoverTarget(this.getTargetsWithSameType(DC,true));if(!this.isToolbarShow()){this.hoverSelectedTarget([DC]);}}}}}},isToolbarShow:function(){return this.domToolbarPH&&this.domToolbarPH.firstChild;},isShowGradientAllowed:function(DF){var DD=this.widget,DI=DD.GMController,DJ=DD.model.data.dz,DB=DJ.ColorBy.TemplateUnit,DH=DJ.XAxis.TemplateUnit,DC=DJ.YAxis.TemplateUnit,DG=DD.model.data.gsi.mx,DE,DA=function(DL){var DK=true;if(DL===Bs.LINE||DL===Bs.TICK){DK=false;}if(DL===Bs.AREA&&DB){Cd.forEach([DH,DC],function(DM){Cd.forEach(DM,function(DN){if(Cd.find(DB,"id",DN.id)!==-1){DK=false;}return DK;});return DK;});}return DK;};if(DF===undefined){for(DE in DG){DF=DI.getOnTheFlyShapeForMetric(DE);if(DA(DF)){return true;}}return false;}else{return DA(DF);}},getDisplayFormsMenu:function(DB){var DA=this.widget.zonesModel;return Cz.getDisplayFormsMenu(DB,DA.getHost(),DA.docModel.datasets,function(DC){DA.submitDropZoneUpdates(DC);});},handleRMCOnLegend:function(DF,DJ){var DI=DF.getAttribute("type"),DK=this.widget.legend,DA,DG,DC,DD,DH=this;if(DI!==AZ.LGD_COLORBOX&&DI!==AZ.LGD_COLORBOX_CTN){DD=new V.ui.menus.MenuConfig();if(mstrApp.appState!==mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION&&mstrApp.allowWebDashboardDesign()){DD.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");DH.widget.raiseEventOnNonFormattingIdentity(AQ({objType:AA.LEGEND}));switch(DI){case AZ.LGD_TITLE:case AZ.LGD_TEXT:DK.selectText(true);var DL=[C9.LEGEND_FONT_SIZE,C9.LEGEND_FONT_FAMILY,C9.LEGEND_FONT_STYLE,C9.LEGEND_FONT_COLOR];DA=K(DH.widget,"lgd",DL,B5.GLOBAL,undefined,false);break;default:DK.selectLegendBody();var DM=[C9.LEGEND_BG_COLOR,C9.LEGEND_BG_FILL_TRANSPARENCY];DA=Aj(DH.widget,mstrmojo.desc(2885,"Fill"),DM,B5.GLOBAL);break;}if(DA){DH.hideTooltip();AL.call(DH,DJ,DA,true);}});Ak.call(DH,DJ,DD);switch(DI){case AZ.LGD_TITLE:case AZ.LGD_TEXT:DK.selectText(true);break;default:DK.selectLegendBody();break;}}}if(!this.fmtMode&&(DI!==AZ.LGD_COLORBOX)&&(DI!==AZ.LGD_COLORBOX_CTN)){return false;}switch(DI){case AZ.LGD_COLORBOX_CTN:case AZ.LGD_COLORBOX:if(DI===AZ.LGD_COLORBOX){DF=DF.parentNode;}DG=DF.firstChild.identity;if(DG&&DG.comb){this.widget.colorSqureIdentity=DG;DK.selectColorBox(DF,this.fmtMode);DA=Bk(this.widget,C9.COLOR_SQUARE_COLOR,B5.GLOBAL,{showGradient:this.isShowGradientAllowed(),showAutomatic:true});DJ=DK.adjustColorPickerPos(DF);if(!DJ.alignLeft){DC=DA.ENUM_CORNERS;DA.setAlignment(DC.BOTTOM_LEFT,DC.TOP_RIGHT);}}break;case AZ.LGD_TITLE:case AZ.LGD_TEXT:DK.selectText(true);var DE=[C9.LEGEND_FONT_SIZE,C9.LEGEND_FONT_FAMILY,C9.LEGEND_FONT_STYLE,C9.LEGEND_FONT_COLOR];DA=K(this.widget,"lgd",DE,B5.GLOBAL,undefined,false);break;default:DK.selectLegendBody();var DB=[C9.LEGEND_BG_COLOR,C9.LEGEND_BG_FILL_TRANSPARENCY];DA=Aj(this.widget,mstrmojo.desc(2885,"Fill"),DB,B5.GLOBAL);break;}if(DA){this.hideTooltip();AJ.call(this,DJ,DA,true);}},hideContextMenu:function(){var DC=this.domMenuPH,DE=DC.firstChild,DA=DC.parentNode,DB=this.widget;p.destroyDisposable(DB,DB.menuEditor);if(DE){DC.removeChild(DE);}if(DA){DA.removeChild(DC);}var DD=DB.menuEditor;if(DD){DB.removeChildren(DD);DD.unrender=function(){DD._super();};DD.destroy();DD.unrender=function(){};delete DB.menuEditor;}if(DB.menuEditorClosefn){BU.detachEvent(document.body,"mousedown",DB.menuEditorClosefn,true);delete DB.menuEditorClosefn;}},hideToolbar:function(){var DC=this.domToolbarPH,DE=DC.firstChild,DA=DC.parentNode,DB=this.widget;p.destroyDisposable(DB,DB.toolEditor);if(DE){DC.removeChild(DE);DB.clearUserSelections();if(DB.legend){DB.legend.clearSelectedTargets();}}if(DA){DA.removeChild(DC);}var DD=DB.toolEditor;if(DD){DB.removeChildren(DD);DD.unrender=function(){DD._super();};DD.destroy();DD.unrender=function(){};delete DB.toolEditor;B7.toggleClass(document.body,"hasToolbarPopup",false);B7.toggleClass(DC,mstrApp.getThemeClassName(),false);}if(DB.toolEditorClosefn){BU.detachEvent(document.body,"mousedown",DB.toolEditorClosefn,true);delete DB.toolEditorClosefn;}},handleMouseMove4DropZone:function(DA,DD){var DC=this.widget,DB=this.prepare4DropZoneManipulation(DA,DD,DC);if(!DB.process){return ;}},doHighlight:function(DH,DE){var DA,DG,DF=this.widget,DD=DF.manager,DB=Ay.clone(DE);DF.clearSelections(true,true);if(DH===A7.METRICS){Ay.forEach(DE,function(DO){DF.addMetricValueSelection(DO);});}else{if(DH===A7.ATTS){Ay.forEach(DE,function(DO){Ay.forEach(DO,function(DP,DQ){Cd.forEach(DP,function(DR){DF.addAttributeSelection(DQ,DR.id,DR.n);});});});}}if(DD){if(DH===A7.METRICS){var DK=Object.keys(DE);if(DK[0]){DB={};var DN=DF.GMController.checkAttributeIntersection(DE[DK[0]],["Rows","Columns","XAxis","YAxis"]);if(DN.length===1){var DJ=DN[0],DM=[];Ay.forEach(DE,function(DO,DP){Ay.forEach(DO,function(DR,DQ){if(DQ===DJ&&DM.indexOf(DR[0].id)===-1){DM.push(DR[0].id);DB[DP]={};DB[DP][DQ]=DR;}});});}DG=DD.filterCharts(DB);if(DG&&DG.length>0){g.call(this,DG);}else{DB=Ay.clone(DE);DA=DD.filterShapes(DB);if(DA&&DA.length>0){this.selectShapes(DA);}}}else{DB=Ay.clone(DE);DA=DD.filterShapes(DB);if(DA&&DA.length>0){this.selectShapes(DA);}}}else{if(DH===A7.ATTS){DB=Ay.clone(DE);DG=DD.filterCharts(DB);if(DG&&DG.length>0){g.call(this,DG);}else{if(!Ay.isEmpty(DE)){DB=Ay.clone(DE);var DI=DF.model.data.dz,DL=(DI.XAxis.TemplateUnit||[]).concat(DI.YAxis.TemplateUnit||[]),DC=[];Cd.forEach(DL,function(DO){DC.push(DO.id);});DA=DD.filterShapes(DB);if(DA&&DA.length>0){this.selectShapes(DA);}}}}}}if((DG&&DG.length>0)||Ay.isEmpty(DE)||(DE&&DE.length===1&&DE[0].hashKey==="")){this.toggleGMFade(false);}DF.resetSelectionEmptyFlag();},prepare4DropZoneManipulation:function(DM,DL,DD,Dd){if(DD.isEmpty()){return{process:true,box:this.getComponentBBox(DD,AZ.GM_MINI_CHART),row:0,col:0};}var DX,DG,DF,Df,DK,DJ,Dc,DZ,DR=BU.position(DD.domMainContainer),DY=this.getComponentBBox(DD,AZ.GM_YAXIS,true),DW=this.getComponentBBox(DD,AZ.GM_YAXIS),DS=this.getComponentBBox(DD,AZ.GM_XAXIS),DO=this.getComponentBBox(DD,AZ.GM_MINI_CHART),Db=this.getComponentBBox(DD,AZ.GM_YAXIS2),DE=this.getComponentBBox(DD,AZ.GM_XAXIS2),DT=this.isAxisPrimary(DD.currEnteredDropZoneID),DQ=DD.manager,DI=DT?DQ.yAxis:DQ.yAxis2,DV=DT?DQ.xAxis:DQ.xAxis2,DC=DT?DQ.xAxis2:DQ.xAxis,Da=DT?DQ.yAxis2:DQ.yAxis,DP=DQ.master,De={process:false},DA=function(Dj,Di,Dh){Dj.left+=Di;Dj.top+=Dh;};var DN=this.getZoneItems(DD.currEnteredDropZoneID,DD,true),DU=DN.length,DB=function(Do,Dn,Dk){var Dp=Do%Dn,Dh=Do-Dp,Dj=Dh+Dn-1,Dm=[],Di,Dl;for(DX=Dh;DX<=Dj;DX++){Di=Dd==="V"?Dk.getChart(DX,0):Dk.getChart(0,DX);Dl=Di&&Di.labelDiv;Dl=Dl&&Dl.firstChild;if(Dl){Dm.push({node:Dl,nodePos:BU.position(Dl),nodeContent:AP(Dl)});}}return Dm;},Dg=function(Dk,Di,Dh,Dj){Dc=Dk&&Dk.labelDiv;DZ=Dk&&Dk.combinedLabelDiv;Dc=Dc&&Dc.firstChild;if(Dc){De.dzId=parseInt(Dc.getAttribute("dzId"),10);De.axisIndex=parseInt(Dc.getAttribute("dzIndex"),10);if(Dh){De.labelNodes=DB(Di,DU,Dh);}}if(DZ&&!Dj){De.labelNodes=[{node:DZ,nodePos:BU.position(DZ),clonedNode:DZ.cloneNode(true)}];}return Dc;},DH=function(Dk,Di,Dh,Dj){if(!Dg(Dk,Di,Dh)){Dg(Dj,null,null,true);}};DM=DM-DR.x;DL=DL-DR.y;if(G(DM,DL,DY)){DM-=DW.left;DL-=DW.top;DG=DI.doRowIntersectionCheck(DL,DL,true).start;Df=DI.getChartBBox(DG,0,true);DJ=DI.getChart(DG,0);DA(Df,DW.left,DW.top);De.process=true;De.box=Df;De.nearToV=((DL-Df.top)<(Df.height>>1))?0:1;De.row=DG;De.col=0;DH(DJ,DG,DI,Da&&Da.getChart(DG,0));}else{if(G(DM,DL,DS)){DM-=DS.left;DL-=DS.top;DF=DV.doColIntersectionCheck(DM,DM,true).start;Df=DV.getChartBBox(0,DF,true);DK=DV.getChart(0,DF);Dc=DK.labelDiv;DZ=DK.combinedLabelDiv;DA(Df,DS.left,DS.top);De.process=true;De.box=Df;De.row=0;De.col=DF;De.nearToH=((DM-Df.left)<(Df.width>>1))?0:1;DH(DK,DF,DV,DC&&DC.getChart(0,DF));}else{if(G(DM,DL,DO)){DM-=DO.left;DL-=DO.top;DP=DQ.master;DG=DP.doRowIntersectionCheck(DL,DL,true).start;DF=DP.doColIntersectionCheck(DM,DM,true).start;Df=DP.getChartBBox(DG,DF,true);DJ=DI&&DI.getChart(DG,0);DK=DV&&DV.getChart(0,DF);DA(Df,DO.left,DO.top);De.process=true;De.box=Df;De.row=DG;De.col=DF;De.nearToV=((DL-Df.top)<(Df.height>>1))?0:1;De.nearToH=((DM-Df.left)<(Df.width>>1))?0:1;if(Dd==="H"){DH(DK,DF,DV,DC&&DC.getChart(0,DF));}else{DH(DJ,DG,DI,Da&&Da.getChart(DG,0));}}else{if(G(DM,DL,Db)){DM-=Db.left;DL-=Db.top;if(!DI){return De;}DG=DI.doRowIntersectionCheck(DL,DL,true).start;Df=DI.getChartBBox(DG,0,true);DJ=DI.getChart(DG,0);DA(Df,Db.left,Db.top);De.process=true;De.box=Df;De.nearToV=((DL-Df.top)<(Df.height>>1))?0:1;De.row=DG;De.col=0;DH(DJ,DG,DI,Da&&Da.getChart(DG,0));}else{if(G(DM,DL,DE)){DM-=DE.left;DL-=DE.top;if(!DV){return De;}DF=DV.doColIntersectionCheck(DM,DM,true).start;Df=DV.getChartBBox(0,DF,true);DK=DV.getChart(0,DF);DA(Df,DE.left,DE.top);De.process=true;De.box=Df;De.row=0;De.col=DF;De.nearToH=((DM-Df.left)<(Df.width>>1))?0:1;DH(DK,DF,DV,DC&&DC.getChart(0,DF));}}}}}return De;},getBackGroundColor:function CG(DA){return B7.getComputedStyle(DA.domGM).backgroundColor;},toggleHoverEffect:function Bg(DA,DC){var DB,DE,DF,DD;if(DC){DB=DA.domNode.getElementsByClassName("disable-draggable");DE=DB.length;for(DD=DE-1;DD>=0;DD--){DF=DB[DD];B7.addClass(DF,"draggable");B7.removeClass(DF,"disable-draggable");}}else{DB=DA.domNode.getElementsByClassName("draggable");DE=DB.length;for(DD=DE-1;DD>=0;DD--){DF=DB[DD];B7.removeClass(DF,"draggable");B7.addClass(DF,"disable-draggable");}}},getComponentBBox:function(DG,DK,DI){var DN,DM,DC,DH={};DN=DM=0;DH.left=DH.top=DH.width=DH.height=0;if(DG.isEmpty()){var DL=DG.domNode.offsetWidth,DF=DG.domNode.offsetHeight;switch(DK){case AZ.GM_ROW_HEADER:DH.height=DF;break;case AZ.GM_COL_HEADER:DH.width=DL;break;case AZ.GM_YAXIS:DH.height=DF;break;case AZ.GM_XAXIS:DH.top=DF;DH.width=DL;break;case AZ.GM_MINI_CHART:DH.width=DL;DH.height=DF;break;case AZ.GM_YAXIS2:DH.height=DF;DH.left=DL;break;case AZ.GM_XAXIS2:DH.width=DL;break;}return DH;}switch(DK){case AZ.GM_ROW_HEADER:DC=DG.domRowHeader;break;case AZ.GM_COL_HEADER:DC=DG.domColHeader;break;case AZ.GM_YAXIS:DC=DG.domYAxis;break;case AZ.GM_XAXIS:DC=DG.domXAxis;break;case AZ.GM_MINI_CHART:DC=DG.domGM;break;case AZ.GM_YAXIS2:DC=DG.domYAxis2;break;case AZ.GM_XAXIS2:DC=DG.domXAxis2;break;}var DJ=function(DP){var DO=parseFloat(DP);DO=isNaN(DO)?0:DO;return Math.floor(DO+0.5);};if(DC){if(DK===AZ.GM_XAXIS2&&DG.domColHeader){DN=DJ(DG.domColHeader.style.left);}DH.left=DJ(DC.style.left)+DN;DH.top=DJ(DC.style.top)+DM;DH.width=DJ(DC.style.width);DH.height=DJ(DC.style.height);}else{if(DK===AZ.GM_XAXIS2){DH.left=DG.offsetX;DH.top=DG.offsetY;DH.width=DG.GMW;DH.height=0;}}if(DI){if(DK===AZ.GM_COL_HEADER){var DB=DG.colHeaderHArr,DA=0;var DE;for(DE=0;DB&&DE<DB.length;DE++){DA+=DB[DE];}DH.height=DA;DH.width+=DJ(DG.colTitleW);DH.left-=DJ(DG.colTitleW);}else{if(DK===AZ.GM_ROW_HEADER){DH.top-=DJ(DG.rowTitleH);DH.height+=DG.actualHeight-DH.top;}else{if(DK===AZ.GM_YAXIS){var DD=this.getComponentBBox(DG,AZ.GM_COL_HEADER,true);DH.top=DD.height;DH.height=DG.actualHeight-DH.top;}}}}return DH;},getOppositeZoneID:function B3(DB){var DA=null;switch(DB){case AZ.GM_XAXIS:DA=AZ.GM_XAXIS2;break;case AZ.GM_XAXIS2:DA=AZ.GM_XAXIS;break;case AZ.GM_YAXIS:DA=AZ.GM_YAXIS2;break;case AZ.GM_YAXIS2:DA=AZ.GM_YAXIS;break;}return DA;},isZoneOnGraphDropAllowed:function Cs(DA,DH,DK){var DL=DK.dropZonesOnGraph[DA],DI=DL.zoneModel,DN=DH.item,DE=this.getOppositeZoneID(DA),DJ=this.getZoneItems(DE,DK,true),DB=0,DM=n(DK),DG,DF;if(DM.isGraphDroppingAllowed(DI,DH.src,DH.item)){if(DM.isAttrCategory(DN)){}else{if(DM.isMetric(DN)){if(DJ&&DJ.length>0&&DM.isAttrCategory(DJ[0])){return false;}if(DH.src!==C5.VIZ){for(DG in DK.dropZonesOnGraph){var DD=this.hasMetricInGraphZone(DG,DK,DH);if(DG!==DA&&DD){DB++;}}if(DB>=2){return false;}}if(DM.isMetricZone(DI.id)&&DJ.length>0){var DO=this.getDropZoneModelByCtlType(this.isWhichAxis(DA)==="x"?AZ.GM_ROW_HEADER:AZ.GM_COL_HEADER,DK),DC=false;for(DF=0;DF<DO.items.length;DF++){if(DM.isMetricName(DO.items[DF])){DC=true;}}if(DC){if(DM.isMetric(DJ[0])&&DN.zone!==DJ[0].zone){return false;}}}}}return true;}return false;},getDropZoneIdByCtlType:function J(DA){var DB=null;if(DA===AZ.GM_ROW_HEADER){DB=Cr.Rows;}else{if(DA===AZ.GM_COL_HEADER){DB=Cr.Columns;}else{if(DA===AZ.GM_XAXIS||DA===AZ.GM_XAXIS2){DB=Cr.XAxis;}else{if(DA===AZ.GM_YAXIS||DA===AZ.GM_YAXIS2){DB=Cr.YAxis;}}}}return DB;},getDropZoneModelByCtlType:function AN(DB,DA){var DC=this.getDropZoneIdByCtlType(DB);return this.getZoneModelByZoneId(DC,DA);},getZoneModelByZoneId:function Bx(DC,DA){var DB=n(DA);return DB&&DB.getZoneModelByZoneId(DC);},hasMetricInGraphZone:function Bw(DG,DA,DH){var DB=this.getZoneItems(DG,DA,true),DE=DB.length,DD,DC=n(DA);if(DE<=0){return false;}if(DH.item&&(DH.src===C5.VIZ_EDITOR||DH.src===C5.VIZ)){var DF=Cd.find(DB,"did",DH.item.did);if(DF>=0){DB.splice(DF,1);}}for(DD=0;DD<DB.length;DD++){if(DC.isMetric(DB[DD])){return true;}}return false;},getDropZoneDirection:function AM(DB){var DA=null;if(DB===AZ.GM_COL_HEADER||DB===AZ.GM_XAXIS||DB===AZ.GM_XAXIS2){DA="H";}else{if(DB===AZ.GM_ROW_HEADER||DB===AZ.GM_YAXIS||DB===AZ.GM_YAXIS2){DA="V";}}return DA;},isWhichAxis:function l(DB){var DA=null;if(DB===AZ.GM_XAXIS||DB===AZ.GM_XAXIS2){DA="x";}else{if(DB===AZ.GM_YAXIS||DB===AZ.GM_YAXIS2){DA="y";}}return DA;},isAxisPrimary:function A(DB){var DA=null;if(DB===AZ.GM_XAXIS||DB===AZ.GM_YAXIS){DA=true;}else{if(DB===AZ.GM_XAXIS2||DB===AZ.GM_YAXIS2){DA=false;}}return DA;},getMetricIDAndDZIdxFromAxisIdx:function AB(DA,DH,DK,DG,DQ){var DB=DG.GMController,DI=this.isWhichAxis(DA)==="x"?DB.isXDualAxis:DB.isYDualAxis,DJ,DN,DO=this.getZoneItems(DA,DG),DU,DF,DE;var DS=DB.shallWeUseGroupInfo,DL=DB.hasGroupInfoStored();if(DS){DE=DL.gi;if(DH>=0&&DH<DE.length){DF=DE[DH];DN=DF.length===2&&(DK?DF[0]:DF[1]);}DJ=Cd.find(DO,"did",DN);}else{if(DI){if(!DS){var DD=DK?DB.getPrimaryMetrics():DB.getSecondaryMetrics(),DP=DB.model.getMetricIds();if(DH>=0&&DH<DD.length){DJ=DD[DH];DN=DP[DJ];}}}else{DJ=DH;var DT={x:DB.getMetricsOnPrimaryXAxis,x2:DB.getMetricsOnSecondaryXAxis,y:DB.getMetricsOnPrimaryYAxis,y2:DB.getMetricsOnSecondaryYAxis};var DR=DT[DA];if(DR&&DR.call(DB).length===0){DN=A9;}else{if(DH>=0&&DH<DO.length){DN=DO[DJ].did;}}}}DU={metricID:DN,dzIndex:DJ};var DC=[],DM=0;if(DQ){if(DE){if(!DK){DC[DM++]=DF[0];}if(DH-1>=0){DC[DM++]=DE[DH-1][1];DC[DM++]=DE[DH-1][0];}DU.prevMetricDZIdx=-1;for(DM=0;DM<DC.length;DM++){if(DC[DM]!==A9){DU.prevMetricDZIdx=Cd.find(DO,"did",DC[DM]);break;}}}else{DU.prevMetricDZIdx=DH;}}return DU;},getDropZonesOnGraph:function CS(DA,DG){var DD=DA.src.data,DJ=DD.item,DK=n(DG),DH,DI,DE,DF=this;var DB=[];if(DK.isAttrCategory(DJ)){DB=[AZ.GM_ROW_HEADER,AZ.GM_COL_HEADER];var DC=function(DL,DN,DM){if(DK.isAttrCategoryZone(DL)){DB.push(DN);}else{if(DK.isMetricZone(DL)){if(DF.getZoneItems(DN,DG,true).length>0){DB.push(DN);}if(DF.getZoneItems(DM,DG,true).length>0){DB.push(DM);}}else{DB.push(DN);}}};DC(Cr.XAxis,AZ.GM_XAXIS,AZ.GM_XAXIS2);DC(Cr.YAxis,AZ.GM_YAXIS,AZ.GM_YAXIS2);}else{if(DK.isMetric(DJ)){DB=[AZ.GM_XAXIS,AZ.GM_YAXIS,AZ.GM_XAXIS2,AZ.GM_YAXIS2];}}DG.dropZonesOnGraph={};for(DH in DB){DE=DB[DH];DI={zoneModel:this.getDropZoneModelByCtlType(DE,DG),direction:this.getDropZoneDirection(DE,DG)};DG.dropZonesOnGraph[DE]=DI;}for(DE in DG.dropZonesOnGraph){if(!this.isZoneOnGraphDropAllowed(DE,DD,DG)){delete DG.dropZonesOnGraph[DE];}}},calculateDropZoneOnGraphRange:function Am(DG,DC){if(!DG.dropZonesOnGraph){this.getDropZonesOnGraph(DC,DG);}var DZ=this,DN=Object.keys(DG.dropZonesOnGraph),DM=DG.actualWidth,DV=DG.actualHeight,DX=DZ.getComponentBBox(DG,AZ.GM_MINI_CHART),DB=DZ.getComponentBBox(DG,AZ.GM_ROW_HEADER),DU=DZ.getComponentBBox(DG,AZ.GM_YAXIS),DO=DZ.getComponentBBox(DG,AZ.GM_COL_HEADER,true),DH=DZ.getComponentBBox(DG,AZ.GM_XAXIS2),DS={x:DX.left+0.75*DX.width,y:DX.top+0.25*DX.height},DT=DN.length,DF=DC.src.data,DA=DF.item,DQ=n(DG),DR=DZ.getZoneItems(DG.currEnteredDropZoneID,DG);var DK=function(Da){return DZ.getDropZoneModelByCtlType(Da,DG).items.length===0;},DW=false;if(!DR&&DQ.isAttrCategory(DA)&&DK(AZ.GM_YAXIS)){DW=true;}if(DG.dropZonesOnGraph[AZ.GM_ROW_HEADER]){DN.splice(DN.indexOf(AZ.GM_ROW_HEADER),1);DT--;if(DW){delete DG.dropZonesOnGraph[AZ.GM_ROW_HEADER];}else{if(DB.width===0){if(DX.left<=1){DB.width+=30;DX.left+=30;DX.width-=30;}else{if(DU.width>0){var DI=Math.min(30,0.5*DU.width);DB.width+=DI;DU.left+=DI;DU.width-=DI;}}}DG.dropZonesOnGraph[AZ.GM_ROW_HEADER].areaCoords=[[0,DH.top,DB.width,DH.top,DB.width,DV,0,DV]];}}if(DG.dropZonesOnGraph[AZ.GM_COL_HEADER]){DN.splice(DN.indexOf(AZ.GM_COL_HEADER),1);DT--;if(DO.height===0){if(DX.top>1){DO.height+=DX.top;DH.top+=DX.top;}else{DO.height+=30;DX.top+=30;DX.height-=30;DH.top+=30;}}DG.dropZonesOnGraph[AZ.GM_COL_HEADER].areaCoords=[[0,0,DM,0,DM,DH.top,0,DH.top]];}var DY=[DX.left,DV,DX.left,DX.top+DX.height,DX.left+DX.width,DX.top+DX.height,DX.left+DX.width,DV],DE=[DB.width,DX.top,DX.left,DX.top,DX.left,DV,DB.width,DV],DL=[DX.left,DH.top,DX.left+DX.width,DH.top,DX.left+DX.width,DX.top,DX.left,DX.top],DP=[DX.left+DX.width,DH.top,DM,DH.top,DM,DV,DX.left+DX.width,DV],DJ=[DB.width,DH.top,DX.left,DH.top,DX.left,DX.top,DB.width,DX.top];switch(DT){case 4:DG.dropZonesOnGraph[AZ.GM_XAXIS].areaCoords=[DY,[DX.left,DX.top+DX.height,DS.x,DS.y,DX.left+DX.width,DX.top+DX.height]];DG.dropZonesOnGraph[AZ.GM_YAXIS].areaCoords=[DE,[DX.left,DX.top,DS.x,DS.y,DX.left,DX.top+DX.height]];DG.dropZonesOnGraph[AZ.GM_XAXIS2].areaCoords=[DL,[DX.left,DX.top,DS.x,DS.y,DX.left+DX.width,DX.top]];DG.dropZonesOnGraph[AZ.GM_YAXIS2].areaCoords=[DP,[DX.left+DX.width,DX.top,DS.x,DS.y,DX.left+DX.width,DX.top+DX.height]];break;case 3:if(DN.indexOf(AZ.GM_XAXIS2)<0){DS={x:DX.left+0.75*DX.width,y:DX.top+0.75*DX.height};DG.dropZonesOnGraph[AZ.GM_XAXIS].areaCoords=[DY,[DX.left,DX.top+DX.height,DS.x,DS.y,DX.left+DX.width,DX.top+DX.height]];DG.dropZonesOnGraph[AZ.GM_YAXIS].areaCoords=[DE,[DX.left,DX.top,DS.x,DX.top,DS.x,DS.y,DX.left,DX.top+DX.height],[DX.left,DH.top,DS.x,DH.top,DS.x,DX.top,DX.left,DX.top]];DG.dropZonesOnGraph[AZ.GM_YAXIS].coordsTransferMap={2:{y:DX.top+1}};DG.dropZonesOnGraph[AZ.GM_YAXIS2].areaCoords=[DP,[DS.x,DS.y,DS.x,DX.top,DX.left+DX.width,DX.top,DX.left+DX.width,DX.top+DX.height],[DS.x,DH.top,DX.left+DX.width,DH.top,DX.left+DX.width,DX.top,DS.x,DX.top]];DG.dropZonesOnGraph[AZ.GM_YAXIS2].coordsTransferMap={2:{y:DX.top+1}};}else{if(DN.indexOf(AZ.GM_YAXIS2)<0){DS={x:DX.left+0.25*DX.width,y:DX.top+0.25*DX.height};DG.dropZonesOnGraph[AZ.GM_XAXIS].areaCoords=[DY,[DX.left,DX.top+DX.height,DS.x,DS.y,DX.left+DX.width,DS.y,DX.left+DX.width,DX.top+DX.height],[DX.left+DX.width,DS.y,DM,DS.y,DM,DV,DX.left+DX.width,DV]];DG.dropZonesOnGraph[AZ.GM_XAXIS].coordsTransferMap={2:{x:DX.left+DX.width-1}};DG.dropZonesOnGraph[AZ.GM_YAXIS].areaCoords=[DE,[DX.left,DX.top,DS.x,DS.y,DX.left,DX.top+DX.height]];DG.dropZonesOnGraph[AZ.GM_XAXIS2].areaCoords=[DL,[DX.left,DX.top,DS.x,DS.y,DX.left+DX.width,DS.y,DX.left+DX.width,DX.top],[DX.left+DX.width,DS.y,DM,DS.y,DM,DH.top,DX.left+DX.width,DH.top]];DG.dropZonesOnGraph[AZ.GM_XAXIS2].coordsTransferMap={2:{x:DX.left+DX.width-1}};}}if((DN.indexOf(AZ.GM_XAXIS2)<0||DN.indexOf(AZ.GM_YAXIS2)<0)){break;}break;case 2:var DD=this.isWhichAxis(DN[0])!==this.isWhichAxis((DN[1]));if(!DD){if(DN.indexOf(AZ.GM_YAXIS)>=0){DG.dropZonesOnGraph[AZ.GM_YAXIS].areaCoords=[[DB.width,DX.top,DS.x,DX.top,DS.x,DX.top+DX.height,DB.width,DX.top+DX.height],[DB.width,DX.top+DX.height,DS.x,DX.top+DX.height,DS.x,DV,DB.width,DV],[DB.width,DH.top,DS.x,DH.top,DS.x,DX.top,DB.width,DX.top]];DG.dropZonesOnGraph[AZ.GM_YAXIS].coordsTransferMap={1:{y:DX.top+DX.height-1},2:{y:DX.top+1}};DG.dropZonesOnGraph[AZ.GM_YAXIS2].areaCoords=[[DS.x,DX.top,DS.x,DX.top+DX.height,DM,DX.top+DX.height,DM,DX.top],[DS.x,DX.top+DX.height,DS.x,DV,DM,DV,DM,DX.top+DX.height],[DS.x,DH.top,DS.x,DX.top,DM,DX.top,DM,DH.top]];DG.dropZonesOnGraph[AZ.GM_YAXIS2].coordsTransferMap={1:{y:DX.top+DX.height-1},2:{y:DX.top+1}};}else{if(DN.indexOf(AZ.GM_XAXIS)>=0){DG.dropZonesOnGraph[AZ.GM_XAXIS].areaCoords=[[DX.left,DS.y,DM,DS.y,DM,DV,DX.left,DV],[DB.width,DS.y,DX.left,DS.y,DX.left,DV,DB.width,DV]];DG.dropZonesOnGraph[AZ.GM_XAXIS].coordsTransferMap={1:{x:DX.left+1}};DG.dropZonesOnGraph[AZ.GM_XAXIS2].areaCoords=[[DX.left,DH.top,DM,DH.top,DM,DS.y,DX.left,DS.y],[DB.width,DH.top,DX.left,DH.top,DX.left,DS.y,DB.width,DS.y]];DG.dropZonesOnGraph[AZ.GM_XAXIS2].coordsTransferMap={1:{x:DX.left+1}};}}}else{if(DN.indexOf(AZ.GM_XAXIS)>=0&&DN.indexOf(AZ.GM_YAXIS)>=0){DG.dropZonesOnGraph[AZ.GM_XAXIS].areaCoords=[DY,DP,[DX.left,DX.top+DX.height,DX.left+DX.width,DX.top,DX.left+DX.width,DX.top+DX.height]];DG.dropZonesOnGraph[AZ.GM_YAXIS].areaCoords=[DE,DL,[DX.left,DX.top,DX.left+DX.width,DX.top,DX.left,DX.top+DX.height]];if(DW){DG.dropZonesOnGraph[AZ.GM_YAXIS].areaCoords.push([0,DH.top,DB.width,DH.top,DB.width,DX.top+DX.height,0,DX.top+DX.height]);DG.dropZonesOnGraph[AZ.GM_YAXIS].areaCoords.push([0,DX.top+DX.height,DB.width,DX.top+DX.height,DB.width,DV,0,DV]);DG.dropZonesOnGraph[AZ.GM_YAXIS].coordsTransferMap={3:{x:DX.left+1},4:{x:DX.left+1,y:DX.top+DX.height-1}};}}else{if(DN.indexOf(AZ.GM_XAXIS2)>=0&&DN.indexOf(AZ.GM_YAXIS2)>=0){DG.dropZonesOnGraph[AZ.GM_XAXIS2].areaCoords=[DE,DL,[DX.left,DX.top,DX.left+DX.width,DX.top,DX.left,DX.top+DX.height]];DG.dropZonesOnGraph[AZ.GM_YAXIS2].areaCoords=[DY,DP,[DX.left,DX.top+DX.height,DX.left+DX.width,DX.top,DX.left+DX.width,DX.top+DX.height]];if(!(DN.indexOf(AZ.GM_XAXIS2)<0||DN.indexOf(AZ.GM_YAXIS2)<0)){if(DA.ax===0&&DA.zone===4){DG.dropZonesOnGraph[AZ.GM_YAXIS].areaCoords=[DE,[DX.left,DX.top,DS.x,DS.y,DX.left,DX.top+DX.height]];}else{if(DA.ax===0&&DA.zone===3){DG.dropZonesOnGraph[AZ.GM_XAXIS].areaCoords=[DY,[DX.left,DX.top+DX.height,DS.x,DS.y,DX.left+DX.width,DX.top+DX.height]];}else{if(DA.ax===1&&DA.zone===4){DG.dropZonesOnGraph[AZ.GM_YAXIS].areaCoords=[DE,[DX.left,DX.top,DS.x,DS.y,DX.left,DX.top+DX.height]];}else{if(DA.ax===1&&DA.zone===3){DG.dropZonesOnGraph[AZ.GM_XAXIS2].areaCoords=[DL,[DX.left,DX.top,DS.x,DS.y,DX.left+DX.width,DX.top]];}}}}}}else{if(DN.indexOf(AZ.GM_XAXIS)>=0&&DN.indexOf(AZ.GM_YAXIS2)>=0){DG.dropZonesOnGraph[AZ.GM_XAXIS].areaCoords=[DY,DE,[DX.left,DX.top,DX.left+DX.width,DX.top+DX.height,DX.left,DX.top+DX.height]];DG.dropZonesOnGraph[AZ.GM_YAXIS2].areaCoords=[DL,DP,[DX.left,DX.top,DX.left+DX.width,DX.top,DX.left+DX.width,DX.top+DX.height]];}else{if(DN.indexOf(AZ.GM_XAXIS2)>=0&&DN.indexOf(AZ.GM_YAXIS)>=0){DG.dropZonesOnGraph[AZ.GM_YAXIS].areaCoords=[DY,DE,[DX.left,DX.top,DX.left+DX.width,DX.top+DX.height,DX.left,DX.top+DX.height]];DG.dropZonesOnGraph[AZ.GM_XAXIS2].areaCoords=[DL,DP,[DX.left,DX.top,DX.left+DX.width,DX.top,DX.left+DX.width,DX.top+DX.height]];}}}}}break;case 1:DG.dropZonesOnGraph[DN[0]].areaCoords=[[DB.width,DO.height,DM,DO.height,DM,DV,DB.width,DV]];break;}if(DG.extraTitleDiv&&DN.indexOf(AZ.GM_YAXIS)>=0){DE=DG.dropZonesOnGraph[AZ.GM_YAXIS].areaCoords;DE=DE.push(DJ);}},getDropAvatarIcon:function AS(DC){var DD=DC.src.data,DB,DA=DC.tgtData;if(DA){if(DD.src===C5.DATASETS||DD.src===C5.ALL_OBJECT_LIST){if(DA.edge===r){DB="replace";}else{DB="add";}}else{if(DD.src===C5.VIZ_EDITOR||DD.src===C5.VIZ){if(DA.edge===r){DB="swap";}else{DB="move";}}}}else{if(DC.isDragingMultipleObj){DB="add";}}return DB;},drawReplaceHighlight:function Aw(DB,DQ,DE,DP,DM,DH,DG){var DC=DB.tgtData,DL=this.getBackGroundColor(DG),DK=DG.currEnteredDropZoneID,DF;DE=Math.max(DE,0);DP=Math.max(DP,0);var DJ=BU.position(DG.domMainContainer),DD=DG.dndTooltip;DC.tooltipAnchorPos={x:DE+DJ.x,y:DP+DJ.y,w:DM,h:DH};var DI;if(DC.isReplaceAll||(DC.highlightNodes&&DC.highlightNodes.length>1)){var DA=this.getZoneItems(DG.currEnteredDropZoneID,DG),DN=DA.length;if(DN===1){DI=mstrmojo.desc(14438,"Replace")+" "+DA[0].n;}else{if(DN>1){DI=mstrmojo.desc(14439,"Replace All")+"( "+DN+"): ";for(DF=0;DF<DN;DF++){DI+=DA[DF].n;if(DF<DN-1){DI+=", ";}}}}}else{var DO=(DC.zoneSource&&DC.zoneSource.zoneModel.items[DC.tgtIdx])||(DC.highlightNodes&&DC.highlightNodes[0]&&DC.highlightNodes[0].item);DI=mstrmojo.desc(14438,"Replace")+" "+DO.n;}DC.tooltipText=DI;DC.placementOrder=[DD.PLACEMENT_ABOVE];DC.popupNodeOffset=5;DQ.save();DQ.beginPath();DQ.rect(DE,DP,DM,DH);DQ.fillStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#bce8ff":"#20516b";DQ.globalAlpha=0.4;DQ.fill();DQ.lineWidth=2;DQ.strokeStyle=DL;DQ.beginPath();DQ.moveTo(DE,DP);if(DK===AZ.GM_XAXIS||DK===AZ.GM_XAXIS2||DK===AZ.GM_COL_HEADER){DQ.lineTo(DE+DM,DP);DQ.moveTo(DE,DP+DH);}else{if(DK===AZ.GM_YAXIS||DK===AZ.GM_YAXIS2||DK===AZ.GM_ROW_HEADER){DQ.lineTo(DE,DP+DH);DQ.moveTo(DE+DM,DP);}}DQ.lineTo(DE+DM,DP+DH);DQ.stroke();DQ.strokeStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#e4f6ff":"#1f333d";DQ.globalAlpha=1;DQ.stroke();DQ.strokeStyle="#34abeb";DQ.globalAlpha=1;if(DK===AZ.GM_XAXIS||DK===AZ.GM_XAXIS2||DK===AZ.GM_COL_HEADER){Cm.drawDashLine(DQ,DE,DP,DE+DM,DP,2,2);Cm.drawDashLine(DQ,DE,DP+DH,DE+DM,DP+DH,2,2);}else{if(DK===AZ.GM_YAXIS||DK===AZ.GM_YAXIS2||DK===AZ.GM_ROW_HEADER){Cm.drawDashLine(DQ,DE,DP,DE,DP+DH,2,2);Cm.drawDashLine(DQ,DE+DM,DP,DE+DM,DP+DH,2,2);}}DQ.restore();},showDndArrow:function AO(DB,DH,DA,DJ,DD){var DE=BU.position(DH.canvas),DF=DD.currEnteredDropZoneID,DG,DC,DI;DG=DA-q+DE.x;DC=DJ-BT+DE.y;if(DF===AZ.GM_XAXIS){DI="gm-dnd-arrow below";}else{if(DF===AZ.GM_XAXIS2){DI="gm-dnd-arrow above";}else{if(DF===AZ.GM_YAXIS){DI="gm-dnd-arrow left";}else{if(DF===AZ.GM_YAXIS2){DI="gm-dnd-arrow right";}}}}if(DD.dndArrow){DD.dndArrow.className=DI;DD.dndArrow.style.top=DC+"px";DD.dndArrow.style.left=DG+"px";DD.dndArrow.style.display="block";}},hideDndArrow:function C7(DA){if(DA.dndArrow){DA.dndArrow.style.display="none";}},drawAddHighlight:function u(DC,DV,Db,DD,Da,DB,DH,DZ){var Dd=DC.tgtData,DJ=Dd&&Dd.edge,DG=DC.src.data;DZ=DZ||{x:0,y:0,w:DH.actualWidth,h:DH.actualHeight};var DS=DZ.x,DK=DZ.y,Dc=DZ.w,DT=DZ.h,DN=(Db===Da),De=2,DL=-(De-1),DO=function(Dg,Dh,Df){return Math.max(Dh+BM,Math.min(Dg,Df-BM-DL));};if(DN){Db=DO(Db,DS,Dc);Da=DO(Da,DS,Dc);}else{DD=DO(DD,DK,DT);DB=DO(DB,DK,DT);}var DU=DN?Db-BM:Db,DR=DN?DD:DD-BM,DP=DN?BY:Da-Db,DY=DN?DB-DD:BY;var DQ=BU.position(DV.canvas),DA=DH.dndTooltip,DM=DU+DQ.x,DF=DR+DQ.y,DI=DG.items,DX=DI.length||0,DE=mstrmojo.desc(531,"Add");for(var DW=0;DW<DX;DW++){if(DW===0){DE+=" "+DI[DW].n;}else{if(DW===DX-1){DE+=" "+mstrmojo.desc(14450,"add")+" "+DI[DW].n;}else{DE+=", "+DI[DW].n;}}}Dd.tooltipText=DE;Dd.tooltipAnchorPos={x:DM,y:DF,w:DP,h:DY};Dd.placementOrder=[DA.PLACEMENT_ABOVE];if(!Dd.isAttr&&(DJ===BX||DJ===C)){Dd.popupNodeOffset=5;}else{Dd.popupNodeOffset=DN?-7:-3;}DV.save();DV.beginPath();DV.rect(DU,DR,DP,DY);DV.fillStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#bce8ff":"#20516b";DV.globalAlpha=0.4;DV.fill();DV.lineWidth=2;DV.strokeStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#e4f6ff":"#1f333d";DV.globalAlpha=1;DV.beginPath();DV.moveTo(Db,DD);DV.lineTo(Da,DB);DV.stroke();DV.strokeStyle="#34abeb";Cm.drawDashLine(DV,Db,DD,Da,DB,2,2);DV.restore();},drawGridScale:function A3(DB,DM,DN,DK,DJ,DP,DA,DC){var DR=DB.tgtData,DF=DR&&DR.edge,DG=DR.highlightType,DE=this.getBackGroundColor(DC),DQ=DC.currEnteredDropZoneID;DN=Math.max(DN,0);DK=Math.max(DK,0);DM.save();DM.lineWidth=2;if(DF===r){DM.strokeStyle=DE;DM.beginPath();DM.moveTo(DN,DK);if(DQ===AZ.GM_XAXIS||DQ===AZ.GM_XAXIS2||DQ===AZ.GM_COL_HEADER){DM.lineTo(DN+DJ,DK);DM.moveTo(DN,DK+DP);}else{if(DQ===AZ.GM_YAXIS||DQ===AZ.GM_YAXIS2||DQ===AZ.GM_ROW_HEADER){DM.lineTo(DN,DK+DP);DM.moveTo(DN+DJ,DK);}}DM.lineTo(DN+DJ,DK+DP);DM.stroke();DM.strokeStyle="#34abeb";if(DQ===AZ.GM_XAXIS||DQ===AZ.GM_XAXIS2||DQ===AZ.GM_COL_HEADER){Cm.drawDashLine(DM,DN,DK,DN+DJ,DK,2,2);Cm.drawDashLine(DM,DN,DK+DP,DN+DJ,DK+DP,2,2);}else{if(DQ===AZ.GM_YAXIS||DQ===AZ.GM_YAXIS2||DQ===AZ.GM_ROW_HEADER){Cm.drawDashLine(DM,DN,DK,DN,DK+DP,2,2);Cm.drawDashLine(DM,DN+DJ,DK,DN+DJ,DK+DP,2,2);}}DM.beginPath();DM.rect(DN,DK,DJ,DP);DM.fillStyle="#34abeb";DM.globalAlpha=0.2;DM.fill();}else{DM.strokeStyle="#1BA11B";DM.beginPath();DM.rect(DN,DK,DJ,DP);DM.stroke();}DM.lineWidth=1;DM.beginPath();var DI,DH,DO,DL=6,DD=10;if(DQ===AZ.GM_XAXIS||DQ===AZ.GM_XAXIS2||DQ===AZ.GM_COL_HEADER){if(DA){if(DG!==C4){for(DI=DN+45;DI<(DN+DJ);DI+=45){DM.moveTo(DI,DK);DM.lineTo(DI,DK+DP);}}}else{if(DG!==C4){if(DQ===AZ.GM_XAXIS){for(DO=1;12*DO<DJ;DO++){DI=DN+12*DO;DM.moveTo(DI,DK);if(DO%2===1){DM.lineTo(DI,DK+DL);}else{DM.lineTo(DI,DK+DD);}}}else{for(DO=1;12*DO<DJ;DO++){DI=DN+12*DO;if(DO%2===1){DM.moveTo(DI,DK+DP-DL);}else{DM.moveTo(DI,DK+DP-DD);}DM.lineTo(DI,DK+DP);}}}}}else{if(DQ===AZ.GM_YAXIS||DQ===AZ.GM_YAXIS2||DQ===AZ.GM_ROW_HEADER){if(DA){if(DG!==C4){for(DH=DK+45;DH<DK+DP;DH+=45){DM.moveTo(DN,DH);DM.lineTo(DN+DJ,DH);}}}else{if(DG!==C4){if(DQ===AZ.GM_YAXIS){for(DO=1;12*DO<DP;DO++){DH=DK+12*DO;if(DO%2===1){DM.moveTo(DN+DJ-DL,DH);}else{DM.moveTo(DN+DJ-DD,DH);}DM.lineTo(DN+DJ,DH);}}else{for(DO=1;12*DO<DP;DO++){DH=DK+12*DO;DM.moveTo(DN,DH);if(DO%2===1){DM.lineTo(DN+DL,DH);}else{DM.lineTo(DN+DD,DH);}}}}}}}DM.stroke();DM.restore();},drawRoundRect:function BW(DC,DA,DF,DB,DD,DE){DE=Math.min(DB/2,DD/2,DE||5);DC.beginPath();DC.moveTo(DA+DE,DF);DC.arcTo(DA+DB,DF,DA+DB,DF+DD,DE);DC.arcTo(DA+DB,DF+DD,DA,DF+DD,DE);DC.arcTo(DA,DF+DD,DA,DF,DE);DC.arcTo(DA,DF,DA+DB,DF,DE);DC.closePath();DC.stroke();},drawHighlightOnWholeAxis:function O(DB,DK,DH,DG,DL,DD,DI){var DE=DB.tgtData,DC=DE.edge,DF=DE.highlightType,DA=2,DJ=-(DA-2);if(DF===CA){if(DH===AZ.GM_XAXIS){this.drawReplaceHighlight(DB,DK,DG.left+d,DL.top+d,DG.width-2*DJ,DL.height-2*DJ,DI);}else{if(DH===AZ.GM_XAXIS2){this.drawReplaceHighlight(DB,DK,DG.left+d,DL.top+d,DG.width-2*DJ,DL.height-2*DJ,DI);}else{if(DH===AZ.GM_YAXIS){this.drawReplaceHighlight(DB,DK,DL.left+d,DG.top+d,DL.width-2*DJ,DG.height-2*DJ,DI);}else{if(DH===AZ.GM_YAXIS2){this.drawReplaceHighlight(DB,DK,DL.left+d,DG.top+d,DL.width-2*DJ,DG.height-2*DJ,DI);}}}}}else{if(DF===C4){if(DC===Au&&DD){if(DH===AZ.GM_XAXIS){this.drawAddHighlight(DB,DK,DL.left+d,DL.top+d,DL.left+DL.width,DL.top+d,DI);}else{if(DH===AZ.GM_YAXIS){this.drawAddHighlight(DB,DK,DL.left+d+DL.width,DL.top+d,DL.left+d+DL.width,DL.top+d+DL.height,DI);}}}else{this.drawReplaceHighlight(DB,DK,DL.left+d,DL.top+d,DL.width-2*DJ,DL.height-2*DJ,DI);}}else{if(DH===AZ.GM_XAXIS){this.drawAddHighlight(DB,DK,DG.left+d,DL.top+d,DG.left+d+DG.width-2*DJ,DL.top+d,DI);}else{if(DH===AZ.GM_XAXIS2){this.drawAddHighlight(DB,DK,DG.left+d,DL.top+DL.height+d,DG.left+d+DG.width-2*DJ,DL.top+DL.height+d,DI);}else{if(DH===AZ.GM_YAXIS){this.drawAddHighlight(DB,DK,DL.left+DL.width+d,DG.top+d,DL.left+DL.width+d,DG.top+d+DG.height-2*DJ,DI);}else{if(DH===AZ.GM_YAXIS2){this.drawAddHighlight(DB,DK,DL.left+d,DG.top+d,DL.left+d,DG.top+d+DG.height-2*DJ,DI);}}}}}}},drawHighlightOnHeaders:function CR(DB,DL,DH,DM,DJ){var DE=DB.tgtData,DC=DE.edge,DD=DE.tgtIdx,DA=2,DK=-(DA-2),DG,DF,DI=0;if(DJ.currEnteredDropZoneID===AZ.GM_COL_HEADER){DG=DJ.colHeaderHArr;}else{if(DJ.currEnteredDropZoneID===AZ.GM_ROW_HEADER){DG=DJ.rowHeaderWArr;}}if(DD===0&&DC===BX){if(DH===AZ.GM_COL_HEADER){this.drawAddHighlight(DB,DL,DM.left+d,DM.top+d,DM.left+d+DM.width-2*DK,DM.top+d,DJ);}else{if(DH===AZ.GM_ROW_HEADER){this.drawAddHighlight(DB,DL,DM.left+d,DM.top+d,DM.left+d,DM.top+d+DM.height-2*DK,DJ);}}}else{if(DD===DG.length-1&&DC===C&&DH===AZ.GM_ROW_HEADER){this.drawAddHighlight(DB,DL,DM.left+DM.width+d,DM.top+d,DM.left+DM.width+d,DM.top+d+DM.height,DJ);}else{if(DC===r){for(DF=0;DF<DD;DF++){DI+=DG[DF]+1;}DI-=1;if(DH===AZ.GM_COL_HEADER){this.drawReplaceHighlight(DB,DL,DM.left+d,DM.top+d+DI,DM.width-2*DK,DG[DD]-2*DK,DJ);}else{if(DH===AZ.GM_ROW_HEADER){this.drawReplaceHighlight(DB,DL,DM.left+d+DI,DM.top+d,DG[DD]-2*DK,DM.height-2*DK,DJ);}}}else{for(DF=0;DF<DD;DF++){DI+=DG[DF]+1;}if(DC===C){DI+=DG[DD]+1;}DI-=1;if(DH===AZ.GM_COL_HEADER){this.drawAddHighlight(DB,DL,DM.left+d,DM.top+d+DI,DM.left+d+DM.width,DM.top+d+DI,DJ);}else{if(DH===AZ.GM_ROW_HEADER){this.drawAddHighlight(DB,DL,DM.left+d+DI,DM.top+d,DM.left+d+DI,DM.top+d+DM.height,DJ);}}}}}},updateAvatarIcon:function BH(DB,DA){var DC=DB.src.data;if(DC.setAvatarClass){DC.setAvatarClass(DA||this.getDropAvatarIcon(DB));}},onHighLightObjectChange:function(DB){if(this.fmtMode){var DC=BJ,DD=[],DA;DB.identities=CQ(DB.identities);Cd.forEach(DB.identities||[],function(DE){if(DC.hasOwnProperty(DE)){DD=DD.concat(DC[DE]);}});DA=CK(this.widget.domNode,"type",DD);this.widget.clearUserSelections();this.clearSelectedTargets();this.selectTarget(DA);}},clearHighlightDropZoneOnGraph:function Co(DE){var DC=DE.dndHighlightCanvas,DA=DC.getContext("2d");DA.clearRect(0,0,DC.width,DC.height);var DB=DE.dndHighlightNodes,DD=DE.dndTooltip;DB.toggle(false);DD.toggle(false);this.hideDndArrow(DE);},highlightDropZoneOnGraph:function B9(Dk,Dc){var DG=Dc.dndHighlightCanvas,DR=DG.getContext("2d");if(!Dk.isDragingMultipleObj){var DV=Dk.tgtData,DU=DV&&DV.tgtInfo,DX=Dc.currEnteredDropZoneID,Dg=Dk.src.data;if(DV){var DL=DV.zonePos,DF=DU&&DU.box,Da=BU.position(Dc.domNode);if(Dc.currEnteredDropZoneID===AZ.GM_COL_HEADER||Dc.currEnteredDropZoneID===AZ.GM_ROW_HEADER){this.drawHighlightOnHeaders(Dk,DR,DX,DL,Dc);}else{if(DV.edge===r||DV.edge===Au){this.drawHighlightOnWholeAxis(Dk,DR,DX,DF,DL,Dg.isAttr,Dc);}else{if(DV.edge===BX||DV.edge===C){var Dh=Dc.GMController,DM=Dh.hasGroupInfoStored(),DZ=DM.existing&&DM.gi,DQ=this.getZoneItems(Dc.currEnteredDropZoneID,Dc),DN=DM.existing?DZ.length:DQ.length,De=DU.axisIndex,DB=this.isAxisPrimary(DV.zoneID),DK=DV.pivotMetricNameTo===AZ.GM_COL_HEADER||DV.pivotMetricNameTo===AZ.GM_ROW_HEADER,DT=this.getMetricIDAndDZIdxFromAxisIdx(Dc.currEnteredDropZoneID,DV.edge===BX?DU.axisIndex-1:DU.axisIndex+1,DB,Dc).metricID,DW=(DV.edge===BX&&De===0)||((DT===A9||DK)&&DV.edge===BX),DJ=(DV.edge===C&&De===DN-1)||((DT===A9||DK)&&DV.edge===C),DE=DW||DJ,DY=DE?(DQ.length===1?3:5):5,DH=DE?0:2.5,DP,Dm,DO,Dl,DD,DC;if(DV.edge===BX){if(DX===AZ.GM_XAXIS){DP=DF.left-DH*AK(DF.width)+d;Dm=DL.top+d;DO=DF.left+d+(DY-DH)*AK(DF.width);Dl=DL.top+d;}else{if(DX===AZ.GM_XAXIS2){DP=DF.left-DH*AK(DF.width)+d;Dm=DL.top+DL.height+d;DO=DF.left+(DY-DH)*AK(DF.width)+d;Dl=DL.top+DL.height+d;}else{if(DX===AZ.GM_YAXIS){DP=DL.left+DL.width+d;Dm=DF.top-DH*AK(DF.height)+d;DO=DL.left+DL.width+d;Dl=DF.top+(DY-DH)*AK(DF.height)+d;}else{if(DX===AZ.GM_YAXIS2){DP=DL.left+d;Dm=DF.top-DH*AK(DF.height)+d;DO=DL.left+d;Dl=DF.top+(DY-DH)*AK(DF.height)+d;}}}}}else{if(DV.edge===C){if(DX===AZ.GM_XAXIS){DP=DF.left+DF.width-(DY-DH)*AK(DF.width)+d;Dm=DL.top+d;DO=DF.left+DF.width+DH*AK(DF.width)+d;Dl=DL.top+d;}else{if(DX===AZ.GM_XAXIS2){DP=DF.left+DF.width-(DY-DH)*AK(DF.width)+d;Dm=DL.top+DL.height+d;DO=DF.left+DF.width+DH*AK(DF.width)+d;Dl=DL.top+DL.height+d;}else{if(DX===AZ.GM_YAXIS){DP=DL.left+DL.width+d;Dm=DF.top+DF.height-(DY-DH)*AK(DF.height)+d;DO=DL.left+DL.width+d;Dl=DF.top+DF.height+DH*AK(DF.height)+d;}else{if(DX===AZ.GM_YAXIS2){DP=DL.left+d;Dm=DF.top+DF.height-(DY-DH)*AK(DF.height)+d;DO=DL.left+d;Dl=DF.top+DF.height+DH*AK(DF.height)+d;}}}}}}this.drawAddHighlight(Dk,DR,DP,Dm,DO,Dl,Dc);if(DX===AZ.GM_XAXIS||DX===AZ.GM_XAXIS2){DC=Dm;if(DW){DD=DP;}else{if(DJ){DD=DO;}else{DD=Math.round((DP+DO)/2);}}}else{if(DX===AZ.GM_YAXIS||DX===AZ.GM_YAXIS2){DD=DP;if(DW){DC=Dm;}else{if(DJ){DC=Dl;}else{DC=Math.round((Dm+Dl)/2);}}}}this.showDndArrow(Dk,DR,DD,DC,Dc);}}}var Df=Dc.dndHighlightNodes,DA=Dc.dndTooltip;var DI=DV.highlightNodes,Dd=DV.tooltipText;if(DI&&DI.length>0){var Di="gm-rotate-270",Db=DI[0].node,Dj=Db&&Db.parentNode,DS=false;while(Dj&&Dj.classList){if(Dj.classList.contains([Di])){DS=true;break;}Dj=Dj.parentNode;}Di=DS?Di:"";Df.updateNodes(DV.highlightNodes,Da,Di);DA.placementOrder=[DA.PLACEMENT_ABOVE];DA.popupNodeOffset=5;DA.updateContent(null,Df.getBoundaryPosForAllNodes(),Dd);}else{if(DV.tooltipAnchorPos){DA.placementOrder=DV.placementOrder;DA.popupNodeOffset=DV.popupNodeOffset;DA.updateContent(null,DV.tooltipAnchorPos,Dd);}}}}},findEnteredDropZoneOnGraph:function Bz(DA,DI){var DF=DA.tgt.pos,DC,DB,DE=BU.position(DI.domMainContainer),DH=DF.x-DE.x,DG=DF.y-DE.y,DD=function(DN,DK,DP){var DM=DI.dropZonesOnGraph[DN],DL=DM.areaCoords,DO=DM.coordsTransferMap,DJ=function(DR,DQ){DF[DQ]=DR+DE[DQ];};for(DC=0;DC<DL.length;DC++){if(CM(DL[DC],DK,DP)){if(DO&&DO[DC]){Ay.forEach(DO[DC],DJ);}return true;}}return false;};if(DI.currEnteredDropZoneID&&DI.dropZonesOnGraph[DI.currEnteredDropZoneID]){if(DD(DI.currEnteredDropZoneID,DH,DG)){return true;}}for(DB in DI.dropZonesOnGraph){if(DD(DB,DH,DG)){DI.currEnteredDropZoneID=DB;return true;}}DI.currEnteredDropZoneID=null;DA.tgtData=null;return false;},prepareDP4Axis:function(DM,DA,DH,DI){var DE=DI.GMController,DC=DE.mapFromChartToLDSIndex(DM,DA),DL=DH==="x"?DM:DC.r,DJ=DH==="x"?DC.c:DA,DK=DC.dpIdx,DD=DE.model,DF=DD.getLocalDataSet(DL,DJ),DG=DF.generateDataProvider(),DB=DG[DK];return DB;},getTgtNode4Dnd:function AV(DB,DA){return this.getTargetInfo(DA,DB&&DB.pos,true);},getZoneItems:function BB(DE,DK,DB,DJ){var DG=this.getDropZoneModelByCtlType(DE,DK),DF=Ay.cloneArray(DG&&DG.items)||[],DM,DD,DI,DL=n(DK);for(DD=0;DD<DF.length;DD++){if(DL.isMetricName(DF[DD])){DF.splice(DD,1);}}if(DJ){for(DD=0;DD<DF.length;DD++){if(!DL.isMetric(DF[DD])){DF.splice(DD,1);}}}if(DF.length>0&&DB){if(DL.isMetric(DF[0])){var DA=DK.GMController,DC=[],DH=[];if(DE===AZ.GM_XAXIS){DC=DA.getMetricsOnPrimaryXAxis();}else{if(DE===AZ.GM_YAXIS){DC=DA.getMetricsOnPrimaryYAxis();}else{if(DE===AZ.GM_XAXIS2){DC=DA.getMetricsOnSecondaryXAxis();}else{if(DE===AZ.GM_YAXIS2){DC=DA.getMetricsOnSecondaryYAxis();}}}}for(DD=0;DD<DC.length;DD++){DI=Cd.find(DF,"idx",DC[DD]);DM=DF[DI];DH.push(DM||{});}return DH;}if(DL.isAttrCategory(DF[0])){if(DE===AZ.GM_XAXIS2||DE===AZ.GM_YAXIS2){return[];}return DF;}return[];}return DF;},handleDropZoneNoChange:function I(Dk,DZ,Db){var DE=n(DZ),DY=DZ.GMController,DM=Dk.tgtData,DH=DM.zoneSource,Dd=Dk.src.data,DD=Dd.item,Dc=Dd.items,De=DE.getUnitIndexInZone(DH.zoneModel,DD),DF=DM.edge,Di=DM.tgtIdx,DL=DM.tgtInfo,DA=Dk.tgt,DX=DA.pos,DW=DX.x,DV=DX.y,DJ=De>=0,Dj,Da,Dh,DB,Dg,DI,DC=this.isAxisPrimary(DZ.currEnteredDropZoneID),DG=this.isWhichAxis(DZ.currEnteredDropZoneID)==="x"?DY.isXDualAxis:DY.isYDualAxis;if(Dc.length>1){return false;}if(DE.isMetric(DD)&&DY.shallWeUseGroupInfo){var DU=DL.axisIndex,DR=DY.getGroupInfo(),DS=Ay.cloneArray(DR),DQ=function(Dm,Dl){for(Dg=0;Dg<Dl.length;Dg++){DI=Dl[Dg];if(DI[0]===Dm||DI[1]===Dm){return Dg;}}return -1;},DN=DQ(DD.did,DR);DS=DE.fillGroupInfo(Dk,DS,DD.did,DC);if(Dd.src===C5.VIZ&&DF===Au&&DN!==DU){DB=false;}else{DB=Ay.equals(DR,DS);}}else{if(DG){var DT=DC!==Dd.isPrimary;if(DM.edge!==Au||DT){DB=false;}else{DB=true;}}else{Dj=De===Di+1&&DM.edge===C;Da=De===Di-1&&DM.edge===BX;Dh=De===Di;DB=DJ&&(Dh||Dj||Da);}}if(DB){DM.edge=r;if(DZ.currEnteredDropZoneID===AZ.GM_COL_HEADER||DZ.currEnteredDropZoneID===AZ.GM_ROW_HEADER){DM.tgtIdx=De;}else{var Df=Dj?1:Dh?0:-1;if(DH.direction==="H"){DW+=Df*Db;}else{DV+=Df*Db;}DM.tgtInfo=this.prepare4DropZoneManipulation(DW,DV,DZ,DH.direction);DM.highlightType=CA;DM.dropZoneNoChange=true;var DO=this.isAxisPrimary(DM.zoneID),DK=this.getMetricIDAndDZIdxFromAxisIdx(DZ.currEnteredDropZoneID,DM.tgtInfo.axisIndex,DO,DZ),DP=DK.dzIndex;DM.tgtIdx=DP;}}return DB;},findTargetInDropZoneOnGraph:function B6(Dk,De){var DA=Dk.tgt,Dc=DA.pos,Dg=Dk.src.data,DQ=Dg.item,DE=null,DT={};DE=this.getTgtNode4Dnd(DA,De);if(DE){DT.highlightNodes=[];DT.highlightNodes.push(DE);DT.edge=r;if(DE.dropZoneID&&DE.dropZoneID!==De.currEnteredDropZoneID){De.currEnteredDropZoneID=DE.dropZoneID;}}var DK=De.dropZonesOnGraph[De.currEnteredDropZoneID],DO=this.getZoneItems(De.currEnteredDropZoneID,De),DH=this.getZoneItems(De.currEnteredDropZoneID,De,true),DI=this.getComponentBBox(De,De.currEnteredDropZoneID),DV=this.getComponentBBox(De,De.currEnteredDropZoneID,true),Db=Dc.x,Da=Dc.y,DZ=BU.position(De.domMainContainer),DD,Dj,DM,DF=n(De),Dd,DP,Df;Dk.tgtData=DT;DT.zonePos=DV;DT.zoneSource=DK;DT.zoneID=De.currEnteredDropZoneID;if(De.currEnteredDropZoneID===AZ.GM_COL_HEADER||De.currEnteredDropZoneID===AZ.GM_ROW_HEADER){Db=Db-DI.left-DZ.x;Da=Da-DI.top-DZ.y;Dg.isAttr=true;DT.isAttr=true;if(DE){DT.tgtIdx=DE.tgtIdx;DT.highlightType=C4;}else{DD=De.currEnteredDropZoneID===AZ.GM_COL_HEADER?De.colHeaderHArr:De.rowHeaderWArr;if(!DD||DD.length===0){DT.tgtIdx=0;DT.edge=BX;}else{DM=De.currEnteredDropZoneID===AZ.GM_COL_HEADER?Da:Db;for(Dj=0;Dj<DD.length;Dj++){if(Dj===0){if(DD.length>1){if(DM<0.67*DD[Dj]){DT.tgtIdx=Dj;DT.edge=BX;break;}else{if(DM<DD[Dj]){DT.tgtIdx=Dj;DT.edge=C;break;}}}else{if(DM<0.5*DD[Dj]){DT.tgtIdx=Dj;DT.edge=BX;break;}else{if(DM<DD[Dj]){DT.tgtIdx=Dj;DT.edge=C;break;}}}}else{if(Dj===DD.length-1){if(DM<0.33*DD[Dj]){DT.tgtIdx=Dj;DT.edge=BX;break;}else{if(De.currEnteredDropZoneID===AZ.GM_COL_HEADER&&DM>0.67*DD[Dj]&&DM<DD[Dj]*1.33){DT.tgtIdx=Dj;DT.edge=C;break;}else{if(De.currEnteredDropZoneID===AZ.GM_ROW_HEADER&&DM<DD[Dj]){DT.tgtIdx=Dj;DT.edge=C;break;}}}}else{if(DM<0.33*DD[Dj]){DT.tgtIdx=Dj;DT.edge=BX;break;}else{if(DM<0.67*DD[Dj]){Dk.tgtData=null;return ;}}if(DM<DD[Dj]){DT.tgtIdx=Dj;DT.edge=C;break;}}}DM-=DD[Dj];}if(Dj>=DD.length){Dk.tgtData=null;return ;}this.handleDropZoneNoChange(Dk,De);}}}else{var DS=this.prepare4DropZoneManipulation(Db,Da,De,DK.direction);if(!DS.process){Dk.tgtData=null;return ;}var Di=this.isWhichAxis(De.currEnteredDropZoneID)==="x"?AZ.GM_YAXIS:AZ.GM_XAXIS,DJ=this.getZoneItems(Di,De,false,true),Dl=DJ.length;DT.tgtIdx=0;DT.tgtInfo=DS;DT.isSideBySide=true;if(DF.isAttrCategory(DQ)){if(DO.length<=0){DT.edge=Au;}else{if(DF.isMetric(DO[0])){DT.edge=r;DT.highlightNodes=DS.labelNodes;DT.highlightType=C4;DT.isAttr=false;DT.isReplaceAll=true;}else{if(DF.isAttrCategory(DO[0])){DT.isAttr=true;if(DE){DT.tgtIdx=DE.dzIndex||0;DT.highlightType=C4;}else{DT.edge=Au;DT.highlightType=C4;DT.tgtIdx=DO.length;}}}}Dg.isAttr=true;}else{if(DF.isMetric(DQ)){Dd=De.GMController;DP=Dd.getSplitPlottingMetrics();DT.isSideBySide=DP;if(DO.length<=0){DT.edge=Au;}else{if(DF.isMetric(DO[0])){DT.isAttr=false;if(DE){DS.axisIndex=DE.axisIndex;DT.tgtIdx=this.getMetricIDAndDZIdxFromAxisIdx(De.currEnteredDropZoneID,DS.axisIndex,this.isAxisPrimary(De.currEnteredDropZoneID),De).dzIndex;DT.highlightType=CA;}else{if((DO.length===1&&Dl<=1)||(DO.length===2&&DH.length===1)){if(DH.length===0){DT.isSideBySide=true;DT.edge=Au;}else{DT.edge=E.call(this,Db,Da,DS,DK.direction,false,De);Df=Cp.call(this,DS,DK.direction,false,De);this.handleDropZoneNoChange(Dk,De,Df);DT.isSideBySide=DT.edge===BX||DT.edge===C;}}else{Dd=De.GMController;DP=Dd.getSplitPlottingMetrics();var Dh=this.isWhichAxis(De.currEnteredDropZoneID)==="x",DR=Dh?AZ.GM_COL_HEADER:AZ.GM_ROW_HEADER,DG=Dh?AZ.GM_ROW_HEADER:AZ.GM_COL_HEADER;if(DP){var DY=this.getDropZoneModelByCtlType(DG,De),DL=false;for(Dj=0;Dj<DY.items.length;Dj++){if(DF.isMetricName(DY.items[Dj])){DL=true;}}var DX=Dl>0&&DF.isMetric(DJ[0]);if(DL&&!DX){DT.isSideBySide=true;DT.edge=Au;DT.tgtIdx=DO.length;DS.axisIndex=DO.length;}else{var DB=this.isAxisPrimary(DT.zoneID),DN=this.getMetricIDAndDZIdxFromAxisIdx(De.currEnteredDropZoneID,DS.axisIndex,DB,De),DU=DN.metricID,DC=DU===A9,DW=DN.dzIndex;DT.tgtIdx=DW;if(Dg.src===C5.VIZ&&!DC){DT.edge=E.call(this,Db,Da,DS,DK.direction,false,De);Df=Cp.call(this,DS,DK.direction,false,De);if(!this.handleDropZoneNoChange(Dk,De,Df)&&DT.edge===Au){DT.pivotMetricNameTo=DF.isMetricZone(this.getDropZoneIdByCtlType(AZ.GM_YAXIS))?AZ.GM_XAXIS:AZ.GM_YAXIS;}}else{DT.isSideBySide=true;if(DC){DT.edge=Au;DW=this.getMetricIDAndDZIdxFromAxisIdx(De.currEnteredDropZoneID,DS.axisIndex,DB,De,true).prevMetricDZIdx;DT.tgtIdx=DW;}else{DT.edge=E.call(this,Db,Da,DS,DK.direction,true,De);Df=Cp.call(this,DS,DK.direction,true,De);this.handleDropZoneNoChange(Dk,De,Df);}}}}else{if(Dg.src===C5.VIZ){DT.edge=E.call(this,Db,Da,DS,DK.direction,false,De);if(DT.edge===BX){DT.isSideBySide=true;DT.tgtIdx=0;DT.pivotMetricNameTo=DR;}else{if(DT.edge===C){DT.isSideBySide=true;DT.tgtIdx=DO.length;DT.pivotMetricNameTo=DR;}else{if(DT.edge===Au){DT.isSideBySide=false;DT.tgtIdx=parseInt(DQ.zoneIdx,10);}}}}else{DT.isSideBySide=false;DT.edge=Au;DT.tgtIdx=DO.length;}}}}}else{if(DF.isAttrCategory(DO[0])){DT.edge=r;DT.highlightType=C4;DT.isAttr=true;DT.isReplaceAll=true;}}}Dg.isAttr=false;}}}},ondrop:function Cy(DA,DI){var DC=DA.tgtData,DK=DI.zonesModel;this.augmentDropContextForSchema(DA,DK.docModel);if(DC&&!DC.dropZoneNoChange){var DE=DC.zoneSource,DJ=DC.tgtIdx,DB=DC.edge,DD=DC.zoneID,DF=this.isAxisPrimary(DD),DG=DC.isSideBySide,DH=this.getDropZoneIdByCtlType(DC.pivotMetricNameTo);DK.unitsDropped(DE.zoneModel,DA,{idx:DJ,edge:DB,allowedItems:DA.src.data.items},DF,DG,DH);}},allowDrag:function AI(){},getElementFromPoint:function(DB,DH,DC){var DG,DE=[],DA=function(){var DI;for(DI=0;DI<DE.length;DI++){DE[DI].display="none";}},DF=function(){var DI;for(DI=0;DI<DE.length;DI++){DE[DI].display="block";}},DD=function(DI){if(DI&&DI.style.display!=="none"){DE.push(DI.style);}};DD(DC.dndHighlightCanvas);DD(this.domHLBox);DA();DG=document.elementFromPoint(DB,DH);DF();return DG;},getTargetInfo:function Cc(Dc,DN,DZ){var DO=this.getElementFromPoint(DN.x,DN.y,Dc),DT=DO&&DO.parentNode,Dp=DT.getAttribute("type"),DJ=DO.getAttribute("type"),Dh,Dm,DQ,DS,DW,DL,DA,DU=n(Dc),DV=BU.position(Dc.domMainContainer),Dk={},Da=DN.x-DV.x,DY=DN.y-DV.y;if(Dp===AZ.GM_COL_HEADER||Dp===AZ.GM_COL_HEADER_TITLE){Dh=this.getDropZoneModelByCtlType(AZ.GM_COL_HEADER,Dc);if(Dp===AZ.GM_COL_HEADER_TITLE){DT=DT.parentNode.parentNode;}Dm=DT.getAttribute("depth");DQ=Dh&&Dh.items[Dm];if(DZ){Dk.node=DO;Dk.nodePos=BU.position(DO);Dk.tgtIdx=Dm;Dk.nodeContent=AP(DO);Dk.dropZoneID=AZ.GM_COL_HEADER;}}else{if(Dp===AZ.GM_ROW_HEADER||Dp===AZ.GM_ROW_HEADER_TITLE){Dh=this.getDropZoneModelByCtlType(AZ.GM_ROW_HEADER,Dc);if(Dp===AZ.GM_ROW_HEADER_TITLE){DT=DT.parentNode.parentNode;}Dm=DT.getAttribute("depth");DQ=Dh&&Dh.items[Dm];if(DZ){Dk.node=DO;Dk.nodePos=BU.position(DO);Dk.tgtIdx=Dm;Dk.nodeContent=AP(DO);Dk.dropZoneID=AZ.GM_ROW_HEADER;}}else{if(Dp===AZ.GM_YLABEL||Dp===AZ.GM_XLABEL||Dp===AZ.GM_COL_HEADER_EXTRA){DS=parseInt(DT.getAttribute("dzid"),10);DW=parseInt(DT.getAttribute("dzindex"),10);if(!isNaN(DS)&&!isNaN(DW)){Dh=this.getZoneModelByZoneId(DS,Dc);if(G(Da,DY,this.getComponentBBox(Dc,AZ.GM_YAXIS))){DL=AZ.GM_YAXIS;DA=true;}else{if(G(Da,DY,this.getComponentBBox(Dc,AZ.GM_XAXIS))){DL=AZ.GM_XAXIS;DA=true;}else{if(G(Da,DY,this.getComponentBBox(Dc,AZ.GM_YAXIS2))){DL=AZ.GM_YAXIS2;DA=false;}else{if(G(Da,DY,this.getComponentBBox(Dc,AZ.GM_XAXIS2))){DL=AZ.GM_XAXIS2;DA=false;}}}}if(DL){Dm=this.getMetricIDAndDZIdxFromAxisIdx(DL,DW,DA,Dc).dzIndex;DQ=this.getZoneItems(DL,Dc,false,true)[Dm];}if(!DQ){Dm=DW;DQ=Dh&&Dh.items[DW];}Dk.axisIndex=DW;Dk.dzId=DS;Dk.isPrimary=DA;Dk.sourceNode=DO;Dk.sourcePos=DN;if(DZ){Dk.node=DO;Dk.nodePos=BU.position(DO);Dk.nodeContent=AP(DO);Dk.dropZoneID=DL;}}}else{if(DJ===AZ.GM_AXIS_WORD){var DM=BU.findAncestorByName(DO,"svg"),Di=DM.getAttribute("type");if(Di===AZ.GM_SVG_Y_CATEGORY||Di===AZ.GM_SVG_X_CATEGORY){var De=DT.identity,Do=parseInt(DO.getAttribute("Index"),10),DR=De&&De[Do];DS=DR&&DR.dzid;DW=DR&&DR.dzindex;if(DS!==undefined&&DW!==undefined){Dh=this.getZoneModelByZoneId(DS,Dc);Dm=DW;DQ=Dh&&Dh.items[Dm];Dk.dzIndex=Dm;}if(DZ){if(Di===AZ.GM_SVG_Y_CATEGORY){Dk.dropZoneID=AZ.GM_YAXIS;}else{Dk.dropZoneID=AZ.GM_XAXIS;}var DC=BU.position(DM.parentNode),DE=BU.position(DO),DD=parseInt(DO.getAttribute("x"),10),DG=parseInt(DO.getAttribute("y"),10),DK=DO.parentNode.style.fontSize,Dd=parseInt(DK,10)||11;Dk.svgNodePos=DC;var DI=DO.parentNode.cloneNode(true),Dn=DI.childNodes,DP=Dn.length,DX="",Db,DB,Dg,Df,Dl=0;for(var Dj=0;Dj<DP;Dj++){Db=Dn[Dj];DB=parseInt(Db.getAttribute("Index"),10);Dg=De&&De[DB];Df=Dg&&Dg.dzindex;if(Df===DW){Dl++;if(Dl===1){DD=parseInt(Db.getAttribute("x"),10);DG=parseInt(Db.getAttribute("y"),10);}else{Db.style.paddingLeft="5px";Dk.isMultipleTspan=true;}Db.style.fontSize=DK;DX+=CX(Db);}}Dk.nodeContent=DX;Dk.transform=DO.parentNode.getAttribute("transform");var DH=Dk.transform&&(Dk.transform.indexOf("rotate(-90")>=0||Dk.transform.indexOf("rotate(90")>=0||Dk.transform.indexOf("rotate(270")>=0),DF=DH?DE.w:DE.h;Dk.nodePos={x:DC.x+DD,y:DC.y+DG-(DF+Dd)/2,w:Math.round(DO.getComputedTextLength()),h:DF};}}}}}}if(DQ&&!DZ){DQ.fromZoneId=Dh.id;DQ.zoneIdx=DU.getUnitIndexInZone(Dh,DQ);}Dk.item=DQ;if(DQ){return Dk;}else{return null;}},getDragData:function Ae(DC,DB){var DF=DB.id,DA=DC.src.pos,DE=this.getTargetInfo(DB,DA);if(DE){DE.setAvatarClass=function DD(DG){var DJ=V.all[DF],DH=DJ.avatar;if(DH){var DI=[DJ.avatarCssClass,"hasOwnAvatar",DG];DH.className=DI.join(" ");}};if(DE.item){DE.items=[];DE.items.push(DE.item);}DE.src=C5.VIZ;DE.onRemove=function(DG){DB.deleteItem(DG);};}return DE;},deleteItem:function CF(DC,DA){var DB=n(DA);DB.deleteItem(this.getZoneModelByZoneId(DC.fromZoneId,DA),DC.zoneIdx);},getShapeSelectionInfo:function(DA){return T.call(this,DA);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.gm.GMUtility");var E=mstrmojo.hash,J=mstrmojo.VisUtility,G=mstrmojo.gm.GMUtility.sizeCalculator,A=mstrmojo.gm.EnumFitTo,N=mstrmojo.gm.EnumAxisType,L=mstrmojo.gm.EnumGraphType,H=mstrmojo.gm.EnumXAxisLabelStatus,C=6,P=2,M=9,K=6,I=5;mstrmojo.gm.GMLayoutResult=null;mstrmojo.gm.GMLayoutConfig=null;function B(U,S){var R,T,Q,V=U.length;for(R=0;R<V;R++){T=U[R];Q=S[R];if(T!==undefined&&T!==Q){return true;}}return false;}function D(Q){var S,U,V=Q.length,R=0,T=0;for(S=0;S<V;S++){U=Q[S];if(U){T+=U;R+=1;}}return(R===0)?40:Math.floor(T/R+0.5);}function O(Q,U){var R,T,V=Q.length,S=0;for(R=0;R<V;R++){T=Q[R];if(T){S+=T;}else{S+=U;}}return S;}function F(U,T,Y,W){var S,Q,X,R=U.length,V=[];T=T||[];W=W||0;for(S=0;S<R;S++){X=T[S];if(X){X-=2*W;}Q=J.measureTextWidth(U[S],Y,2*W,X);V.push(Q);}return V;}mstrmojo.gm.GMLayout=mstrmojo.provide("mstrmojo.gm.GMLayout",{fitTo:A.CONTENT,xAxisType:N.ATTRIBUTE,yAxisType:N.METRIC,chartType:L.BAR,sBarWidth:0,API:{owner:undefined,getXAxisHeight:undefined,getYAxisWidth:undefined,getX2AxisHeight:undefined,getY2AxisWidth:undefined,getRowHeight:undefined,getColWidth:undefined,calculateAllXAxisStyle:undefined,calculateOneXAxisStyle:undefined},nRows:1,nCols:1,widthCache:[],heightCache:[],nLabels:0,maxXAxisWidth:undefined,maxXAxisWidthStagger:undefined,minXLabelWidth:undefined,widthRatio:undefined,heightRatio:undefined,xInfo:undefined,yInfo:undefined,calculateLayout:function(h,d,b,g,Y,n,W,Z,R){var f=this.yInfo,S=this.xInfo,e=this.widthCache,c=this.heightCache,j=E.clone(e),X=E.clone(c),V=Z.ctw!==1,Q=Z.cth!==1,U=this.xAxisType===N.METRIC,T=this.yAxisType===N.METRIC,k=U&&T,l={xAxisHeight:g,xAxis2Height:Y,yAxisWidth:n,yAxis2Width:W};if(this.fitTo===A.CONTENT){l.xScalable=S.items.length===0||U;l.yScalable=f.items.length===0||T;}else{l.xScalable=true;l.yScalable=true;l.minChartWidth=k?60:20;l.minChartHeight=k?60:20;}if(!V){e.length=0;e.length=this.nCols;}if(!Q){c.length=0;c.length=this.nRows;}var a=this.hLayout(h,d,b,l,Z,R);a.widthCacheChanged=B(j,e);a.heightCacheChanged=B(X,c);return a;},hLayout:function(t,Q,S,s,g,AF){var AC=0,Z=this.yInfo.isMetric?"":this.yInfo.items.join(" "),x=0,o=this.API,p=AF.styles,f=this.API.owner,a=0.2,R=Math.max((((Q+t)*(1-a))-t),20),k=s.xScalable,AE=s.yScalable,AB=s.xAxisHeight,X=s.xAxis2Height,Y=s.yAxisWidth,j=s.yAxis2Width,b=AB!==undefined,n=X!==undefined,c=Y!==undefined,d=j!==undefined,h=g.ctw,q=g.cth,V=Y||20,AA=j||0,l=false,AD,y,u,z,T,U,w,W,r,e={};while(true){if(AC>=C){break;}if(Z!==""&&AF.syat){x=this.batchEvalTextHeight([Z],[V],p,P);}w=Q;w-=G.add(0,V,AF.va);w-=G.add(0,AA,AF.va);if(k){this.hFakeWidthCache(w+AF.v,s.minChartWidth);if(this.fitTo!==A.COMPACT){this.hProcessWidthCache();}}r=this.hCheckXLabelStatus(w,g.ctw);o.owner.xLabelPlacement=r;f.layoutPaddingEchos={X1:[],X2:[],Y1:[],Y2:[]};z=b?AB:(o.getXAxisHeight.call(f,r)*g.x);T=n?X:Math.min(AF.rhMaxH,Math.max(x,(o.getXAxis2Height.call(f)*g.x2)));U=this.hCheckPageOverflowX(w+AF.v,h);W=S;W-=G.add(0,z,AF.ha);W-=G.add(0,T,AF.dx?AF.ha:AF.h);if(AE){this.hFakeHeightCache(W+AF.h,s.minChartHeight);if(this.fitTo!==A.COMPACT){this.hProcessHeightCache();}}AD=c?Y:Math.min(R,(o.getYAxisWidth.call(f)*g.y));y=d?j:(o.getYAxis2Width.call(f)*g.y2);u=this.hCheckPageOverflowY(W+AF.h,q);if(AD===V&&y===AA&&u===l){break;}V=AD;AA=y;l=u;AC++;}e.nRows=this.nRows;e.nCols=this.nCols;e.yAxisWidth=V;e.yAxis2Width=AA;e.xAxisHeight=z;e.xAxis2Height=T;e.needHSBar=U;e.needVSBar=l;e.rotateLabelInXAxis=r;e.avgChartWidth=this.hGetChartAvgWidth(h);e.avgChartHeight=this.hGetChartAvgHeight(q);e.canvasWidth=this.hEstimateCanvasWidth(h,e.avgChartWidth);e.canvasHeight=this.hEstimateCanvasHeight(q,e.avgChartHeight);if(!U){e.pageWidth=this.hGetPageWidth(h);}if(!l){e.pageHeight=this.hGetPageHeight(q);}return e;},hCheckXLabelStatus:function(T,R){var S=this.fitTo,Q=H.NORMAL;if(S===A.CONTENT){Q=this.hCheckXLabelStatus4FitContent(T/this.nCols,R);}else{Q=this.hCheckXLabelStatus4FitPanel((T-2*I)/this.nLabels);}return Q;},hCheckXLabelStatus4FitPanel:function(U){var S=false;if(S){var Q=this.minXLabelWidth;if(Q>2*U){return H.ROTATE;}if(Q>U){return H.STAGGER;}return H.NORMAL;}else{var T=this.API.owner,R=this.API.calculateAllXAxisStyle;return R.call(T);}},hCheckXLabelStatus4FitContent:function(U,T){var R,V,Q=this.widthCache,S=(T!==1);if(S){U=65535;V=Q.length;for(R=0;R<V;R++){if(Q[R]){U=Math.min(U,Q[R]*T);}}}if(U>=this.maxXAxisWidth){return H.NORMAL;}if(U>=this.maxXAxisWidthStagger){return H.STAGGER;}return H.ROTATE;},hProcessWidthCache:function(){var S,T=this.nCols,Q=this.widthCache,R=this.minWidths;if(R){for(S=0;S<T;S++){if(R[S]){Q[S]=Math.max(Q[S],R[S]);}}}},hProcessHeightCache:function(){var S,T=this.nRows,Q=this.heightCache,R=this.minHeights;if(R){for(S=0;S<T;S++){if(R[S]){Q[S]=Math.max(Q[S],R[S]);}}}},hFakeWidthCache:function(Q,T){var S=this.widthRatio;if(!S){this.hFakeSizeCacheEvenly(Q,T,this.nCols,this.widthCache);return ;}var R=O(S,1);this.hFakeSizeCacheEvenly(Q,T,this.nCols,this.widthCache,this.widthRatio,R);},hFakeSizeCacheEvenly:function(W,R,T,X,V,Y){var U,Q=0,S=W/T;X.length=0;for(U=0;U<T;U++){if(V){S=W*(V[U]/Y);X[U]=Math.round(Q+S+5e-14)-Math.round(Q);}else{X[U]=Math.round(Q+S+5e-14)-Math.round(Q);}Q+=S;}if(R){for(U=0;U<T;U++){X[U]=Math.max(X[U],R);}}},hFakeHeightCache:function(R,T){var Q=this.heightRatio;if(!Q){this.hFakeSizeCacheEvenly(R,T,this.nRows,this.heightCache);return ;}var S=O(Q,1);this.hFakeSizeCacheEvenly(R,T,this.nRows,this.heightCache,this.heightRatio,S);},hGetChartAvgWidth:function(Q){return Math.floor(D(this.widthCache)*(Q||1));},hGetChartAvgHeight:function(Q){return Math.floor(D(this.heightCache)*(Q||1));},hEstimateCanvasWidth:function(R,Q){return Math.floor(O(this.widthCache,Q)*(R||1));},hEstimateCanvasHeight:function(R,Q){return Math.floor(O(this.heightCache,Q)*(R||1));},hGetPageWidth:function(T){var R,U=this.nCols,S=this.API.getColWidth,Q=0;T=T||1;for(R=0;R<U;R++){Q+=Math.floor(S(0,R)*T);}return Q;},hGetPageHeight:function(T){var R,U=this.nRows,S=this.API.getRowHeight,Q=0;T=T||1;for(R=0;R<U;R++){Q+=Math.floor(S(R,0)*T);}return Q;},hCheckPageOverflowX:function(S,U){var R,V=this.nCols,T=this.API.getColWidth,Q=0;U=U||1;S=Math.ceil(S);for(R=0;R<V;R++){Q+=Math.floor(T(0,R)*U);if(Q>S){return true;}}return false;},hCheckPageOverflowY:function(Q,U){var S,V=this.nRows,T=this.API.getRowHeight,R=0;U=U||1;Q=Math.ceil(Q);for(S=0;S<V;S++){R+=Math.floor(T(S,0)*U);if(R>Q){return true;}}return false;},evalTextHeight:function(Q,T,S,U){if(U===undefined){U=P;}var R=this.batchEvalTextHeight([Q],[T],S,U);return R[0];},batchEvalTextHeight:function(V,Q,a,X,U){var T,Z,Y,R=V.length,W=[];U=U===undefined?1:U;Q=Q||[];X=X||0;for(T=0;T<R;T++){Y=Q[T];if(Y){Y-=2*X;}var S=J.measureTextHeight(V[T],a,0,100,undefined,true,true);Z=J.measureTextHeight(V[T],a,2*X,Y);Z=Math.min(Z,S*U+2*X);W.push(Z);}return W;},getRowHeadersWidth:function(T,S){var Q,W,U,V=T.length,R=[];for(Q=0;Q<V;Q++){W=T[Q];U=F(W,[],S,M);R.push(Math.max.apply(null,U));}return R;},getColHeadersHeight:function(Q,U){var R,W,S,V=Q.length,T=[];for(R=0;R<V;R++){W=Q[R];S=this.batchEvalTextHeight(W,[],U,K);T.push(Math.max.apply(null,S));}return T;},getRowHeaderP1Width:function(R,V,d,W,e,T,Q){var Z,f=Q.isMetricNamesOnYAxis,Y=Q.isMetricNamesOnRows,U=Q.hasHeaderInY,X=Q.haveY2,S=Q.getChartInfo().isPie,c=Q.dz,a=c.AngleBy.TemplateMetric&&c.AngleBy.TemplateMetric.length>1,b=c.XAxis.TemplateMetric&&c.XAxis.TemplateMetric.length===1;if(R===0&&V>0&&Q.haveY1===false&&T&&(!f||(S&&a&&b))&&!(Y&&(U&&!X))){Z=F(d.items,W,e,P);return Math.max.apply(null,Z);}return 0;},getColHeaderP1Height:function(U,Q,S,Z,W,T){var X=[],V=[],Y=[];if(W.hasAndShowRT){X=this.batchEvalTextHeight(U.items,Q,Z.RH_TITLE,K,T);}if(W.hasAndShowYAAT){V=this.batchEvalTextHeight(S.items,[],Z.AXIS_TITLE_Y,K);}if(W.hasAndShowFA){Y=this.batchEvalTextHeight(S.items,[],Z.CH,K);}var R=X.concat(V).concat(Y);return Math.max.apply(null,R);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMUtility","mstrmojo.color","mstrmojo.ui.menus.EditorConfig","mstrmojo.ui.menus.ToolbarEditorConfig","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.ui.editors.controls.LineConfigGroup","mstrmojo.ui.editors.controls.FillConfigGroup","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.AdvancedColorPicker");var Z=mstrmojo,I=Z.dom,K=Z.hash,a=Z.array,A=Z.css,j=Z.VisEnum.ControlType,h=mstrmojo.gm,F=mstrmojo.color,U=h.GMUtility,R=Z.VisUtility,k=h.FormatingPropertyTag,e=mstrmojo.models.FormatModel,c=e.ENUM_PROPERTY_NAMES,P=mstrmojo.chart.enums.EnumFontStyle,f=mstrmojo.VisEnum.GMLegendFormatingPropertyTag,G=mstrmojo.VisEnum.NetworkLegendFormattingCategory,V=mstrmojo.ui.editors.controls.AdvancedColorPicker,W={GLOBAL:"glb",FORMATTING:"fmt"},D={FONT_COMP:"FntCmp",FONT_FAMILY:"FntFml",FONT_STYLE:"FntStyle",FONT_SIZE:"FntSz",FONT_COLOR:"FntClr",LINE_COMP:"LnCmp",SHOW:"Shw",COLOR:"Clr",STYLE:"Style",THICKNESS:"Thk"};function N(s,p){var o=this.widget,q=o.domToolbarPH,r=this;o._lastOpened=null;q.innerHTML="";document.body.appendChild(q);A.toggleClass(q,mstrApp.getThemeClassName(),true);this.configureLegendPopup(p,q);o.toolEditor=p.newInstance({unrender:function(){}});o.toolEditorClosefn=function(t){var w=t.target,u=o.toolEditor.domNode;if(!I.contains(u,w,true,u)&&!R.isHostedPopupNode(w,"class",true,document.body)){r.hideToolbar();}};I.attachEvent(document.body,"mousedown",o.toolEditorClosefn,true);o.openPopup(this.widget.toolEditor);A.toggleClass(document.body,"hasToolbarPopup",true);}function L(p,o){var q;if(o===W.GLOBAL){q=this.readGlobalProperty(p);}else{if(o===W.FORMATTING){q=this.widget.getPropertiesOfFormatable();}}if(p.slice(-3)===D.COLOR){if(p!==k.COLOR_SQUARE_COLOR||o!==W.GLOBAL){q=U.decodeColor(q);}}return q;}function Q(p,o){var q=this;if(o===W.GLOBAL){return function(s){var r=L.call(q,p,W.GLOBAL);if(p===k.COLOR_SQUARE_COLOR){r=r.color;}if(!K.equals(s,r)){if(p.indexOf(D.COLOR)!==-1){s=U.encodeColor(s);}q.writeGlobalProperty(p,s);}};}return function(t,r){var s=L.call(q,p,W.FORMATTING);if(t!==s){if(p.indexOf(D.COLOR)!==-1){t=F.encodeColor(t);}q.widget.writeFormatableProperties(p,t,r);}};}function O(p,o){p=p||[];o=o||"";a.forEach(p,function(q){q.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",cssClass:o,children:p};}function d(p,q){p=p||[];var o=new mstrmojo.Box({children:p,cssText:q});return o;}function B(s,t,o){var r="white-space: nowrap; width: 50px;";if(s===mstrmojo.desc(3905,"Background")||s===mstrmojo.desc(6242,"Color")){r="white-space: nowrap;";}else{if(s===mstrmojo.desc(2885,"Fill")){r="white-space: nowrap; margin-right: 9px;";}}var p=new mstrmojo.Label({text:s}),q=d(p,r);return O([q,t],o);}function b(p,q,o){var r=this;p=p||{};if(p.propNames===undefined){p.propNames=q;}p.onGroupValueChange=function(s,u,t){if(u!==t&&u!==undefined){(Q.call(r,s,o))(u,t);}};return p;}function S(q,p,o){var r=this;a.forEach(p,function(s){var t=L.call(r,s,o);if(t!==undefined){q.setChildValue(s,t);}});}function C(o,r,q,p){p=b.call(this,p,r,q);K.copy({width:"140px",height:"22px",colorPickerHostWithin:true},p);var s=new mstrmojo.ui.editors.controls.FillConfigGroup(p);if(s){s.iniChildrenComp(r);S.call(this,s,r,q);}if(typeof o==="string"){return B(o,s,(p||[]).rowContainerCSSClass);}return s;}function Y(q,p,o){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolBoxBackgroundFill",children:[C.call(this,mstrmojo.desc(2885,"Fill"),q,p,K.copy({rowContainerCSSClass:"mstrmojo-ui-rowContainer"},o))]}]});}function l(s,q,u,t,p){var r=L.call(this,u,t),w=this;var o=new mstrmojo.ui.editors.controls.ColorPickerButton({showGradient:!!p,isHostedWithin:true,width:"40px",selectedValue:r,showNoFill:false,postselectedValueChange:function(x){(Q.call(w,u,t))(x.value,x.valueWas);}});if(s){o.alias=s;}if(typeof q==="string"){return B(q,o);}return o;}function n(p){var o;if(p.listenToUpdateColorMap instanceof Function){o=p.listenToUpdateColorMap(function(){p.raiseEvent({name:"colorByColorChange",type:"invalidateCache"});if(o&&p.detachUpdateColorMapListener instanceof Function){p.detachUpdateColorMapListener(o);}});}}function g(q,p){var o=L.call(this,q,p),r=this;return new mstrmojo.ui.menus.ToolbarEditorConfig({cssClass:"cbsquare-colorpicker",contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker({showAutomatic:!o.isDefaultColor,color:o.color,colorChanged:function(s){s=(this.showAutomatic&&s===V.VAL_AUTOMATIC)?"default":s;n(r.widget);(Q.call(r,q,p))(s,o.color);r.hideToolbar();},colorCanceled:function(){r.hideToolbar();}})]});}function T(u,p){var o={},t=L.call(this,p+D.FONT_STYLE,W.GLOBAL),r=L.call(this,p+D.FONT_COLOR,W.GLOBAL),q=L.call(this,p+D.FONT_FAMILY,W.GLOBAL),s=L.call(this,p+D.FONT_SIZE,W.GLOBAL);if(t!==undefined){o[c.FONT_WEIGHT]=(!isNaN(t)&&((t&P.FS_BOLD)>0));o[c.FONT_STYLE]=(!isNaN(t)&&((t&P.FS_ITALIC)>0));o[c.UNDERLINE]=(!isNaN(t)&&((t&P.FS_UNDERLINE)>0));o[c.LINE_THROUGH]=(!isNaN(t)&&((t&P.FS_STRIKETHROUGH)>0));}if(r!==undefined){o[c.COLOR]=r;}if(s!==undefined){o[c.FONT_SIZE]=s;}if(q!==undefined){o[c.FONT_FAMILY]=q;}u.setFormatSource(o);}function H(p,o){var q=null;if(o.indexOf(D.FONT_FAMILY)!==-1){q=p.fontFamily;}else{if(o.indexOf(D.FONT_STYLE)!==-1){q=p.fontStyle;}else{if(o.indexOf(D.FONT_SIZE)!==-1){q=p.fontSize;}else{if(o.indexOf(D.FONT_COLOR)!==-1){q=p.fontColor;}}}}return q;}function M(r,q,o){var p={bold:P.FS_BOLD,italic:P.FS_ITALIC,underline:P.FS_UNDERLINE,strikeout:P.FS_STRIKETHROUGH},s=this;q.forEach(function(t){var u=H(r,t);if(u){u.propName=t;if(t.indexOf(D.FONT_STYLE)!==-1){u.postselectionChange=function(w){var z=w.added,AA=u.items[(z&&z[0]!==undefined)?z[0]:w.removed[0]],y=!!z,x=L.call(s,t,o),AB=(x===undefined?0:x);if(y){AB=AB|p[AA.css];}else{AB=AB&(~p[AA.css]);}u.parent.raiseFormatValueChange(t,AB,x);};}else{if(t.indexOf(D.FONT_FAMILY)!==-1){u.postselectedIndexChange=function(w){var z=w.value,y=w.valueWas;if(z!==y){var x=u.items;u.parent.raiseFormatValueChange(t,x[z].id,x[y]&&x[y].id);}};}else{if(t.indexOf(D.FONT_SIZE)!==-1){u.postselectedValueChange=function(w){var y=parseInt(w.value,10)+"pt",x=parseInt(w.valueWas,10)+"pt";if(y!==x){u.parent.parent.raiseFormatValueChange(t,y,x);}};}else{u.postselectedValueChange=function(w){u.parent.parent.raiseFormatValueChange(t,w.value,w.valueWas);};}}}}});}function X(p,s,r,q){var w=this;q=q||{};if(q.propNames===undefined){q.propNames=s;}if(q.onGroupValueChange===undefined){q.onGroupValueChange=function(x,z,y){if(z!==y&&z!==undefined){(Q.call(w,x,W.GLOBAL))(z,y);}};}var o={cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,width:"381px",height:"22px"};q=K.copy(o,q);var u=new mstrmojo.ui.editors.controls.CharacterGroup(q),t=H(u,k.LEGEND_FONT_COLOR);t.showNoFill=false;M.call(this,u,s,r);T.call(this,u,p);return u;}function J(s,r){var x=r.firstChild,AB=x?x.offsetWidth:0,p=x?x.offsetHeight:0,t=document.body.offsetWidth,AA=document.body.offsetHeight,u=10,w=5,z=5;if(x){x.style.left="0";x.style.right="auto";x.style.top="0";x.style.bottom="auto";}var y={w:AB,h:0};var q=p>0;if(q){y.h=p;}else{return false;}if(q){r.style.left=s.x+"px";r.style.top=s.y-p-u/2+"px";}if(s.x+y.w>t){r.style.left=s.x-AB+"px";}if(q){var o=0;if(s.y-p-u/2<w){o=w;r.style.top=o+"px";}else{if(s.y+u/2>AA){o=Math.max(AA-u-p,w);r.style.top=o+"px";}}}}function E(o,r,q,p){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[X.call(this,o,r,q,p)]}]});}mstrmojo._FormateVisLegend=mstrmojo.provide("mstrmojo._FormateVisLegend",{_mixinName:"mstrmojo._FormateVisLegend",widget:null,readGlobalProperty:undefined,writeGlobalProperty:undefined,configureLegendPopup:undefined,init:function(o){this.widget=null;if(this._super){this._super(o);}if(this.widget&&!this.widget.domToolbarPH){var p;p=document.createElement("div");p.setAttribute("class","gm-menu-placeholder");this.widget.domToolbarPH=p;}},handleRMCOnLegend:function(AA){var t=AA.getTarget(),u=AA.e,y={x:u.pageX,y:u.pageY},x=t.getAttribute("type"),p,w,r,s=this,q=this.widget;AA.cancel();AA.preventDefault();if(mstrApp.isAppStatePresentation()||!mstrApp.allowWebDashboardDesign()){return ;}var z,o=function(AB){switch(AB){case j.LGD_COLORBOX_CTN:case j.LGD_COLORBOX:if(AB===j.LGD_COLORBOX){t=t.parentNode;}w=t.firstChild.identity;if(w&&w.comb){this.widget.colorSqureIdentity=w;this.selectColorBox(t,this.fmtMode);p=g.call(this,k.COLOR_SQUARE_COLOR,W.GLOBAL);y=this.adjustColorPickerPos(t);if(!y.alignLeft){r=p.ENUM_CORNERS;p.setAlignment(r.BOTTOM_LEFT,r.TOP_RIGHT);}}break;case j.LGD_TITLE:case j.LGD_TEXT:this.selectText(true);var AC=[k.LEGEND_FONT_SIZE,k.LEGEND_FONT_FAMILY,k.LEGEND_FONT_STYLE,k.LEGEND_FONT_COLOR];p=E.call(this,"lgd",AC,W.GLOBAL);z="lgd";break;default:this.selectLegendBody();var AD=[k.LEGEND_BG_COLOR,k.LEGEND_BG_FILL_TRANSPARENCY];p=Y.call(this,AD,W.GLOBAL);z="lgd";break;}if(p){N.call(this,y,p);if(!!z){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");q.parent.selectVIUnit();var AE=q.edtModel._targetPulldown;if(AE){AE.selectItemByField("v",z);}}}};o.call(this,x);J.call(this,y,this.widget.domToolbarPH);},hideToolbar:function(){var p=this.widget,q=p.domToolbarPH,s=q.firstChild,o=q.parentNode;if(s){q.removeChild(s);}if(o){o.removeChild(q);}var r=p.toolEditor;if(r){r.unrender=function(){r._super();};r.destroy();r.unrender=function(){};delete p.toolEditor;A.toggleClass(document.body,"hasToolbarPopup",false);A.toggleClass(q,mstrApp.getThemeClassName(),false);}if(p.toolEditorClosefn){I.detachEvent(document.body,"mousedown",p.toolEditorClosefn,true);delete p.toolEditorClosefn;}},highlightText:function(o){throw new Error("subclass need to implement highlightText function");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","FormatFont");var O=mstrmojo.chart;mstrmojo.chart.SubTextHolder=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.SubTextHolder",mVecStr:null,mInitVecPartition:null,mVecPartition:null,mVecSize:null,mSpaceWidth:0,mMaxWordWidth:0,init:function M(S){this._super(S);this.mVecStr=[];this.mInitVecPartition=[];this.mVecPartition=[];this.mVecSize=[];},Clear:function P(){this.mVecStr.splice(0,this.mVecStr.length);},ParseText:function K(W,c,a){var Y=this.mInitVecPartition,S,Z,V,U,T,b=[],X;S=W.split("\n");Y.splice(0,this.mInitVecPartition.length);Y.push(0);V=0;Z=S.length;for(U=0;U<Z;++U){b=S[U].split(c);V+=b.length;Y.push(V);X=b.length;for(T=0;T<X;++T){this.mVecStr.push(this.TruncateWord(b[T],a));}}this.mVecPartition=Y.concat();},TruncateWord:function E(U,S){if(S<4||S>U.length){return U;}var T=U.substr(0,S-3);T+="...";return T;},UpdateText:function B(W,T){var V,U,S,Z,X,Y;this.mVecSize.splice(0,this.mVecSize.length);V=T;U=0;S=this.mVecStr.length;for(Z=0;Z<S;Z++){X={width:0,mX_bearing:0,mX_advance:0};if(this.mVecStr[Z]===""){this.mVecSize.push(X);}else{Y=V.GetStringExtent(this.mVecStr[Z]);X.width=X.mX_advance=Y.Width;this.mVecSize.push(X);if(Y.Width>U){U=Y.Width;}}}this.mMaxWordWidth=U;Y=V.GetStringExtent(" ");this.mSpaceWidth=Y.Width;},GetMaxWidth:function Q(){var V,S,T,U;V=0;S=this.mVecPartition.length;for(T=0;T+1<S;++T){U=this.GetOneLineWidth(T);if(U>V){V=U;}}return Math.floor(V+0.5);},GetOneLineWidth:function D(W){var S=this.mVecPartition,V=this.mVecSize,U,T;U=0;for(T=S[W];T<S[W+1];T++){if(T===S[W]&&T===S[W+1]-1){U+=V[T].width;}else{if(T===S[W]&&T!==S[W+1]-1){U+=V[T].mX_advance-V[T].mX_bearing;}else{if(T!==S[W]&&T===S[W+1]-1){U+=V[T].width+V[T].mX_bearing;}else{U+=V[T].mX_advance;}}}if(T!==S[W]){U+=this.mSpaceWidth;}}return U;},GetOneWordWidth:function F(S){return this.mVecSize[S].width;},GetStringWidth:function L(U,T){var S=T.GetStringExtent(U);return S.Width;},GetSpaceWidth:function N(){return this.mSpaceWidth;},GetSpaceWidthEx:function C(S){var T=S.GetStringExtent(" ");return T.Width;},GetLineCount:function G(){return this.mVecPartition.length-1;},SetLineCount:function J(T,S){if(T<1){return ;}if(S!==0){S=S||-1;}var U=this.mVecPartition;if(T===1){U.splice(0,U.length);U.push(0);U.push(this.mVecSize.length);}else{if(this.GetLineCount()<=T){if(S===-1){return ;}if(this.GetMaxWidth()<=S){return ;}this.PartitionBy(S,true);if(this.GetLineCount()>T){U.length=T+1;U[U.length-1]=this.mVecSize.length;}}else{U.length=T+1;U[U.length-1]=this.mVecSize.length;}}},PartitionBy:function H(V,a){var U=this.mVecPartition,Y=this.mInitVecPartition,Z,X,W,T,S;a=(a!==undefined)?a:true;if(!a&&V<this.mMaxWordWidth){V=Math.floor(this.mMaxWordWidth+0.5);}U.splice(0,U.length);Z=Y.length;for(X=0;X+1<Z;++X){U.push(Y[X]);T=0;S=Y[X];for(W=Y[X];W<Y[X+1];W++){T+=this.mVecSize[W].mX_advance;if(W!==Y[X+1]-1){T+=this.mSpaceWidth;}if(T>V&&W!==S){T=0;S=W;U.push(W--);}}}if(Z>0){U.push(Y[Z-1]);}},GetOneLineString:function R(U){var S=this.mVecPartition,V="",T;for(T=S[U];T<S[U+1];T++){V=V.concat(this.mVecStr[T]);if(T!==S[U+1]-1){V=V.concat(" ");}}return V;},GetOneLineWords:function A(V){var T=this.mVecPartition,U,S=[];for(U=T[V];U<T[V+1];U++){S.push(U);}return S;},GetOneLineXBearing:function I(S){return this.mVecSize[this.mVecPartition[S]].mX_bearing;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility","mstrmojo.chart.common.Utility","mstrmojo.chart.enums.EnumInstructionName");var Ah=mstrmojo.chart.model,AT=Ah.enums,AQ=mstrmojo.VisUtility,At=AT.EnumDSSGraphGradientType,j=3.141592653589793,q={area:["gm-shape-scircle","",""],line:["gm-shape-scircle","",""],"line-sizeby":["gm-shape-sbar","",""],bar:["gm-shape-bar","","gm-shape-grid-bar"],circle:["gm-shape-circle","gm-shape-circle","gm-shape-grid-circle"],square:["gm-shape-square","gm-shape-square","gm-shape-grid-square"],ticker:["gm-shape-ticker","gm-shape-ticker","gm-shape-grid-ticker"],pie:["gm-shape-pie","gm-shape-pie","gm-shape-pie"],ring:["gm-shape-ring","gm-shape-ring","gm-shape-ring"],markerRect:["gm-shape-bar","gm-shape-bar","gm-shape-bar"],markerCircle:["gm-shape-circle","gm-shape-circle","gm-shape-circle"]},w={area:["scircle","",""],line:["scircle","",""],"line-sizeby":["sbar","",""],bar:["bar","","gbar"],circle:["circle","circle","circle"],square:["square","square","square"],ticker:["ticker","ticker","ticker"],pie:["pie","pie","pie"],ring:["ring","ring","ring"],markerRect:["gmMarker","gmMarker","gmMarker"],markerCircle:["gmMarker","gmMarker","gmMarker"]};var G=mstrmojo.chart.common.Utility;var M={mR:0,mG:0,mB:0},s={"stroke-width":0};function o(A6,A3){var A2=1,A5=2,A4=this.mStyle;if(A6===A2){A4["stroke-dasharray"]=Ak.call(this,true,A3);}else{if(A6===A5){A4["stroke-dasharray"]=Ak.call(this,false,A3);}}}function J(A2){var A4,A3=document.createElementNS(this.mXMLNS,"polygon"),A6=A2.length,A5="";for(A4=0;A4<A6;++A4){A5+=(A2[A4].x+","+A2[A4].y+" ");}A3.setAttribute("points",A5);return A3;}function AA(A5,A2){var A3,A4,A6=this.getDrawOrder(A5);this.mStyle["stroke-width"]="0";this.mAttributes["class"]="gm-set-line-polygon";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A5;A3=this.hCreateSVGPolygon(A2);this.hExtendGroups(A6);A4=this.mSvg.childNodes[A6+1];A4.appendChild(A3);return{Polygon:A3,Group:A4};}function Ak(A4,A2){var A3=A2||1;return[A4?A3*3:A3,A3].join(" ");}function AF(){var A2=[].slice.call(arguments);return A2.some(function(A3){return typeof A3==="undefined";});}function r(A3,BC,A2,A8,BB,BA,A5,A4){var A6="stroke-width:3;stroke-opacity:1;fill:none;",A9="",A7=document.createElementNS(this.mXMLNS,"path");if(AF(A3,BC)){A9+=(" "+this.hMoveTo(A5,A4));A9+=(" "+this.hRelMoveTo(-A8,0));A9+=(" "+this.hRelArcTo(A8,A2,true,A8*2,0));A9+=(" "+this.hRelArcTo(A8,A2,true,-A8*2,0));}else{A9=this.hMoveTo(A3.x,A3.y),A9+=" "+this.hArcTo(A8,A2,true,BC.x,BC.y);}if(BA){A6+="stroke:rgb(255,255,255)";}else{A6+="stroke:rgb(0,0,0)";}A7.sX=A5;A7.sY=A4;A7.sR=A8;A7.sD=A9;A7.setAttribute("d",A9);A7.setAttribute("style",A6);this.mSvg.childNodes[BB+1].appendChild(A7);}mstrmojo.chart.SVGCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.SVGCanvas",mSvg:null,mG:null,mDefs:null,mXMLNS:"http://www.w3.org/2000/svg",mStyle:null,mAttributes:null,mMarkerAttributes:null,mGradientCount:0,mElements:null,seriesDrawOrder:null,init:function AW(A4){var A2;this._super(A4);A2=document.createElementNS(this.mXMLNS,"svg");A2.style.height="100%";A2.style.width="100%";A2.style.padding=0;this.mG=document.createElementNS(this.mXMLNS,"g");this.mDefs=document.createElementNS(this.mXMLNS,"defs");this.mG.appendChild(this.mDefs);A2.appendChild(this.mG);this.mStyle={};this.mSvg=A2;this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];if(A4.seriesDrawOrder&&A4.seriesDrawOrder.length){this.seriesDrawOrder=A4.seriesDrawOrder.concat();var A6=this.seriesDrawOrder,A3=A4.seriesDrawOrder,A7,A5;for(A5=0;A5<A6.length;A5++){A7=A3[A5];A6[A7]=A5;}}},reset:function AP(){this.mStyle={};this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];this.seriesDrawOrder=null;var A2=this.mG;while(A2.firstChild){A2.removeChild(A2.firstChild);}A2=this.mSvg;while(A2.firstChild){A2.removeChild(A2.firstChild);}A2.appendChild(this.mG);this.mG.appendChild(this.mDefs);},setDrawOrder:function F(A2){if(A2){this.seriesDrawOrder=A2;}},getDrawOrder:function N(A3){if(A3===-3){A3=0;}var A2=this.seriesDrawOrder;if(A2&&A2.length){if(A3>=A2.length){AQ.visPrint("Drawing order,Max index exceeded");}return A2[A3];}return A3;},SaveToObject:function D(A2){A2.svg=this.mSvg;return true;},saveState:function Am(){},RestoreState:function Ax(){},Clip:function Ae(){},Scale:function Aq(A2,A3){},Rotate:function AG(A3,A2){this.SetAttribute("transform","rotate("+A2*180/j+" "+A3.x+" "+A3.y+")");},NewPath:function O(){},ClosePath:function AR(){},MoveTo:function Ai(A2,A5,A3,A4){},LineTo:function AJ(A2,A5,A3,A4){},BezierCurveTo:function W(A4,A3,A7,A5,A2,A6){},SetRGBAFillColor:function Z(A3,A4,A2,A5){},BoundedValue:function AX(A4,A3,A2){if(A4<A3){return A3;}if(A4>A2){return A2;}return A4;},SetRGBAStrokeColor:function P(A3,A4,A2,A5){},FillPath:function S(){},StrokePath:function A(){},SetLineDash:function As(A2,A3){},SetLineWidth:function Ab(A2){this.mStyle["stroke-width"]=A2;},SetLineJoin:function c(A2){},SetFontSize:function n(A2){},AddRect:function AB(A2,A5,A3,A4){},SetAttribute:function AM(A2,A3){this.mAttributes[A2]=A3;},SetMarkerAttribute:function Q(A2,A3){this.mMarkerAttributes[A2]=A3;},CreateSVGCircle:function E(A8,A6,BB,BA,BC,A7){var A4=BA.isPie?BA.sPieDP.graphCell.sID:BA.gc.sID,A9=this.getDrawOrder(A4),A2=document.createElementNS(this.mXMLNS,"circle"),A5=this.hToCSSStyleStr();if(BB<=10){A2.setAttribute("size","small");}A2.sX=A8;A2.sY=A6;A2.sR=BB;A2.identity=BA;A2.setAttribute("cx",A8);A2.setAttribute("cy",A6);A2.setAttribute("r",BB);A2.setAttribute("style",A5);this.hExtendGroups(A9);this.hCopyAttribute(this.mAttributes,A2);var A3=BA.getChartInfo();if(BA.objType===17179869184){A3.currentMarkerShape=-1;}this.hSetExtraAttributes(A2,A3,"circle");this.mSvg.childNodes[A9+1].appendChild(A2);if(BC){r.call(this,undefined,undefined,true,BB,A9,A7,A8,A6);}this.hResetStyleAndAttribute();},CreateSVGTextBoundingBox:function Ag(A4,A3,A6,A5){var A2=this.hCreateSimpleSVGPolygon(A4,A3,true,A6);if(A6){if(this.mSvg.childNodes.length<=(A5+2)){this.hExtendGroups(A5+1);}this.mSvg.childNodes[A5+2].appendChild(A2);}else{this.mElements.push({Type:"BBox",Node:A2});}},hCreateSimpleSVGPolygon:function X(BB,A5,A2,A4){var A8=document.createElementNS(this.mXMLNS,"polygon"),A7=BB.length,A9="",A6,BA=this.hToCSSColorStr(A5),A3;if(A4){A3="stroke-width:2;stroke:rgb(0,0,0);stroke-opacity:1";}else{A3="stroke-width:1;stroke:rgb(0,0,0);stroke-opacity:1";}A3+=";stroke:"+BA;A2=A2||false;if(A2){A3+=";fill-opacity:0";}for(A6=0;A6<A7;++A6){A9+=(BB[A6].x+","+BB[A6].y+" ");}A8.setAttribute("points",A9);A8.setAttribute("style",A3);this.hCopyAttribute(this.mAttributes,A8);return A8;},CreateSVGRect:function U(A7,A6,A8,A5,BB){var A3=BB.isPie?BB.sPieDP.graphCell.sID:BB.gc.sID,A9=this.getDrawOrder(A3),BA=document.createElementNS(this.mXMLNS,"rect"),A4=this.hToCSSStyleStr();if(A8<=5||A5<=5){BA.setAttribute("size","small");}BA.identity=BB;BA.setAttribute("x",A7);BA.setAttribute("y",A6);BA.setAttribute("width",A8);BA.setAttribute("height",A5);BA.setAttribute("style",A4);this.hExtendGroups(A9);this.hCopyAttribute(this.mAttributes,BA);var A2=BB.getChartInfo();if(BB.objType===17179869184){A2.currentMarkerShape=-2;}this.hSetExtraAttributes(BA,A2);this.mSvg.childNodes[A9+1].appendChild(BA);this.hResetStyleAndAttribute();},CreateSVGSector:function Ap(BF,BE,BI,A5,A3,BJ,BA,A2){var BH=BJ.gc||BJ.sPieDP.graphCell,BD=BH.sID,A8=this.getDrawOrder(BD),BB=document.createElementNS(this.mXMLNS,"path"),BC=this.hMoveTo(BF,BE),A9=this.hCalPoint(BF,BE,BI,A5),A6=this.hCalPoint(BF,BE,BI,A3),BG=A3-A5>Math.PI,A7=this.hToCSSStyleStr(),A4=this.hCalPoint(BF,BE,BI/2,(A5+A3)/2);BC+=(" "+this.hLineTo(A9.x,A9.y));BC+=(" "+this.hArcTo(BI,BG,true,A6.x,A6.y));BC+=(" "+this.hClosePath());BB.sX=BF;BB.sY=BE;BB.sR=BI;BB.sRadStart=A5;BB.sRadEnd=A3;BB.sD=BC;BB.sGeoCenterX=A4.x;BB.sGeoCenterY=A4.y;if(BI<=10){BB.setAttribute("size","small");}BB.setAttribute("d",BC);BB.setAttribute("style",A7);BB.identity=BJ;this.hExtendGroups(A8);this.hCopyAttribute(this.mAttributes,BB);this.hSetExtraAttributes(BB,BJ.getChartInfo());this.mSvg.childNodes[A8+1].appendChild(BB);if(BA){r.call(this,A9,A6,BG,BI,A8,A2,BF,BE);}this.hResetStyleAndAttribute();},CreateSVGRingSector:function l(BH,BG,A2,BC,A6,A3,BJ){var BF=BJ.isPie?BJ.sPieDP.graphCell.sID:BJ.gc.sID,BB=this.getDrawOrder(BF),BD=document.createElementNS(this.mXMLNS,"path"),A5=this.hCalPoint(BH,BG,A2,A6),A9=this.hCalPoint(BH,BG,A2,A3),A8=this.hCalPoint(BH,BG,BC,A6),A7=this.hCalPoint(BH,BG,BC,A3),BI=A3-A6>Math.PI,BE=this.hMoveTo(A8.x,A8.y),BA=this.hToCSSStyleStr(),A4=this.hCalPoint(BH,BG,(A2+BC)>>1,(A6+A3)/2);BE+=(" "+this.hArcTo(BC,BI,true,A7.x,A7.y));BE+=(" "+this.hLineTo(A9.x,A9.y));BE+=(" "+this.hArcTo(A2,BI,false,A5.x,A5.y));BE+=(" "+this.hClosePath());BD.sX=BH;BD.sY=BG;BD.sOutR=A2;BD.sInR=BC;BD.sRadStart=A6;BD.sRadEnd=A3;BD.sD=BE;BD.sGeoCenterX=A4.x;BD.sGeoCenterY=A4.y;if(A2<=10){BD.setAttribute("size","small");}BD.setAttribute("d",BE);BD.setAttribute("style",BA);BD.identity=BJ;this.hExtendGroups(BB);this.hCopyAttribute(this.mAttributes,BD);this.hSetExtraAttributes(BD,BJ.getChartInfo());this.mSvg.childNodes[BB+1].appendChild(BD);this.hResetStyleAndAttribute();BD.setAttribute("class","gm-shape-ring");BD.setAttribute("subtype","ring");},CreateSVGRing:function p(BB,A9,BD,BA,BF){var A3=BF.isPie?BF.sPieDP.graphCell.sID:BF.gc.sID,BC=this.getDrawOrder(A3),A7=document.createElementNS(this.mXMLNS,"path"),A6=this.hCalPoint(BB,A9,BD,Math.PI),BE=this.hCalPoint(BB,A9,BD,0),A2=this.hCalPoint(BB,A9,BA,Math.PI),A5=this.hCalPoint(BB,A9,BA,0),A8=this.hMoveTo(A6.x,A6.y),A4=this.hToCSSStyleStr();A8+=(" "+this.hArcTo(BD,true,true,BE.x,BE.y));A8+=(" "+this.hMoveTo(A5.x,A5.y));A8+=(" "+this.hArcTo(BA,true,false,A2.x,A2.y));A8+=(" "+this.hArcTo(BA,true,false,A5.x,A5.y));A8+=(" "+this.hMoveTo(BE.x,BE.y));A8+=(" "+this.hArcTo(BD,true,true,A6.x,A6.y));A7.sX=BB;A7.sY=A9;A7.sGeoCenterX=BB;A7.sGeoCenterY=A9;A7.sOutR=BD;A7.sInR=BA;A7.setAttribute("d",A8);A7.setAttribute("style",A4);A7.identity=BF;this.hExtendGroups(BC);this.hCopyAttribute(this.mAttributes,A7);this.hSetExtraAttributes(A7,BF.getChartInfo());this.mSvg.childNodes[BC+1].appendChild(A7);this.hResetStyleAndAttribute();},CreateSVGCurves:function h(BB,BD,A7,BM,BK,A4,BJ,A3){var BE,BC,A8=BB.length,A9=document.createElementNS(this.mXMLNS,"path"),A6,BL="",BH=Math.floor(A8/4),A5="",BA,BI,A2,BG,BF=(BK&&(this.mStyle["stroke-width"]<3));this.mStyle.fill="none";if(BF){A2=this.mStyle["stroke-opacity"];BI=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BG=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;BA=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=A2;this.mStyle["stroke-width"]=BI;if(BG){this.mStyle["stroke-dasharray"]=BG;}A6=document.createElementNS(this.mXMLNS,"path");}BE=this.hToCSSStyleStr();this.hCopyAttribute(this.mAttributes,A9);for(BC=0;BC<BH;++BC){if(BC===0){BL="M "+BB[BC].x+","+BB[BC].y+" ";}BL+=("C "+BB[BC*4+1].x+","+BB[BC*4+1].y+" ");BL+=(BB[BC*4+2].x+","+BB[BC*4+2].y+" ");BL+=(BB[BC*4+3].x+","+BB[BC*4+3].y+" ");}A9.identity=BM;A9.setAttribute("style",BE);A9.setAttribute("d",BL);if(BF){this.hCopyAttribute(this.mAttributes,A6);A6.identity=BM;A6.setAttribute("style",BA);A6.setAttribute("d",BL);}if(BK){A9.setAttribute("type","trendLine");A9.setAttribute("class","gm-set-trendline");A5="startpoint:"+A4.x+","+A4.y+";";A5+="midpoint:"+BJ.x+","+BJ.y+";";A5+="endpoint:"+A3.x+","+A3.y;A9.setAttribute("highlightPoints",A5);A9.setAttribute("hover-catcher","0");if(this.mSvg.childNodes.length<=(BD+2)){this.hExtendGroups(BD+1);}this.mSvg.childNodes[BD+2].appendChild(A9);if(BF){A6.setAttribute("type","trendLine");A6.setAttribute("class","gm-set-trendline");A6.setAttribute("highlightPoints",A5);A6.setAttribute("hover-catcher","1");this.mSvg.childNodes[BD+2].appendChild(A6);}}else{if(A7!==-1){if(this.mSvg.childNodes.length<=(A7+1)){this.hExtendGroups(A7);}this.mSvg.childNodes[A7+1].appendChild(A9);this.hSetExtraAttributes(A9,BM.getChartInfo());}}this.hReset();},CreateSVGPolyLineForTRLine:function AC(BD,BF,BK,BJ,A5,BH,A3){var BE,A7=document.createElementNS(this.mXMLNS,"polyline"),A4,A8=BD.length,BB="",A9,BC,BI,A2,BG,BA=(this.mStyle["stroke-width"]<3),A6;this.mStyle.fill="none";if(BA){A2=this.mStyle["stroke-opacity"];BI=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BG=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;BC=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=A2;this.mStyle["stroke-width"]=BI;if(BG){this.mStyle["stroke-dasharray"]=BG;}A4=document.createElementNS(this.mXMLNS,"polyline");}A9=this.hToCSSStyleStr();for(BE=0;BE<A8;++BE){BB+=(BD[BE].x+","+BD[BE].y+" ");}A7.identity=BK;A7.setAttribute("points",BB);A7.setAttribute("style",A9);if(BJ){A7.setAttribute("type","trendLine");A7.setAttribute("class","gm-set-trendline");}else{A7.setAttribute("type","referenceLine");A7.setAttribute("class","gm-set-referenceline");}A6="startpoint:"+A5.x+","+A5.y+";";A6+="midpoint:"+BH.x+","+BH.y+";";A6+="endpoint:"+A3.x+","+A3.y;A7.setAttribute("highlightPoints",A6);A7.setAttribute("hover-catcher","0");this.hCopyAttribute(this.mAttributes,A7);if(this.mSvg.childNodes.length<=(BF+2)){this.hExtendGroups(BF+1);}this.mSvg.childNodes[BF+2].appendChild(A7);if(BA){A4.identity=BK;A4.setAttribute("points",BB);A4.setAttribute("style",BC);if(BJ){A4.setAttribute("type","trendLine");A4.setAttribute("class","gm-set-trendline");}else{A4.setAttribute("type","referenceLine");A4.setAttribute("class","gm-set-referenceline");}A4.setAttribute("hover-catcher","1");this.hCopyAttribute(this.mAttributes,A4);this.mSvg.childNodes[BF+2].appendChild(A4);}this.hReset();},hCalPoint:function AS(A2,A7,A5,A6){var A4=A2+A5*Math.cos(A6),A3=A7+A5*Math.sin(A6);return{x:A4,y:A3};},hMoveTo:function Y(A2,A3){return"M "+A2+" "+A3;},hLineTo:function Az(A2,A3){return"L "+A2+" "+A3;},hArcTo:function AV(A4,A3,A6,A2,A5){return"A "+A4+","+A4+" 0 "+(A3?"1":"0")+","+(A6?"1 ":"0 ")+A2+","+A5;},hClosePath:function AN(){return"Z";},hRelMoveTo:function I(A2,A5,A3,A4){return"m "+A2+" "+A5;},hRelArcTo:function AV(A4,A3,A6,A2,A5){return"a "+A4+","+A4+" 0 "+(A3?"1":"0")+","+(A6?"1 ":"0 ")+A2+","+A5;},hExtendGroups:function(A5){var A4,A3=this.mSvg,A2=A3.childNodes,A6=A2.length-1;while(A6<=A5){A4=document.createElementNS(this.mXMLNS,"g");A3.appendChild(A4);A6++;}},CreateSVGPolyLine:function AK(A3,BG,A4,A8){var A7,A9=this.getDrawOrder(A3);var BC=0,A6=1,BF=2,BB=3,A5=4,A2=5;A8=A8||BC;this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A3;switch(A8){case BC:break;case A6:break;case BF:break;case BB:break;case A5:this.mAttributes["class"]="gm-set-originline";this.mAttributes.type="originLine";if(BG[0].x===BG[1].x){this.mAttributes.subtype="v";}else{this.mAttributes.subtype="h";}break;case A2:this.mAttributes.subtype="ticker";this.mAttributes.type="shape";this.mAttributes["class"]="gm-shape-ticker";break;default:break;}this.hExtendGroups(A9);A7=this.mSvg.childNodes[A9+1];var BE=this.hCreateSVGPolyline(BG,A7);if(A8===A2||A8===A5){if(A4.length){BE.identity=A4[0];}if(A8===A2){if(BG.length>=2){var BD=BG[0],BA=BG[1];BE.tickerCenter={x:Math.round(0.5*(BD.x+BA.x)),y:Math.round(0.5*(BD.y+BA.y))};}}}this.hResetStyleAndAttribute();},CreateSVGPolylineWithCircles:function AE(A8,A3,A7){var A4,A6,A2,A5,A9=this.getDrawOrder(A8);this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A8;this.hExtendGroups(A9);A5=this.mSvg.childNodes[A9+1];this.hCreateSVGPolyline(A3,A5);for(A4=0;A4<A3.length;++A4){A6=document.createElementNS(this.mXMLNS,"circle");A2=A7[A4];A6.identity=A2;A6.setAttribute("cx",A3[A4].x);A6.setAttribute("cy",A3[A4].y);A6.setAttribute("r","5.5");A6.style.fill=this.mStyle.stroke;this.hCopyAttribute(this.mMarkerAttributes,A6);A6.setAttribute("class","gm-shape-scircle");A6.setAttribute("type","shape");A6.setAttribute("subtype","scircle");A5.appendChild(A6);}this.hResetStyleAndAttribute();},hCreateSVGPolyline:function f(A4,A6){this.mStyle.fill="none";var A5,A3=document.createElementNS(this.mXMLNS,"polyline"),A2=A4.length,A7="",A8=this.hToCSSStyleStr();A3.pointList=A4;for(A5=0;A5<A2;++A5){A7+=(A4[A5].x+","+A4[A5].y+" ");}A3.setAttribute("points",A7);A3.setAttribute("style",A8);this.hCopyAttribute(this.mAttributes,A3);A6.appendChild(A3);return A3;},CreateSVGPolygonWithCircles:function AY(A3,BB,A4){var A5,A9,A2,A8,A7,BA;BA=AA.call(this,A3,BB);A9=BA.Polygon;A7=BA.Group;var A6=BB.length;if((A6&1)!==0){return ;}for(A5=0;A5<A6/2;++A5){A2=document.createElementNS(this.mXMLNS,"circle");A8=A4[A5];A2.identity=A8;A2.setAttribute("cx",BB[A5].x);A2.setAttribute("cy",BB[A5].y);A2.setAttribute("r","5.5");A2.style.fill=this.mStyle.fill;this.hCopyAttribute(this.mMarkerAttributes,A2);A2.setAttribute("class","gm-shape-scircle");A2.setAttribute("type","shape");A2.setAttribute("subtype","scircle");A7.appendChild(A2);}A9.chartInfo=A8.getChartInfo();this.hResetStyleAndAttribute();},CreateSVGPolygonWithTrapezoid:function t(BH,A9,A6){var BG,BB,BC,A2,BN,BD,BA,BF,A8;BA=AA.call(this,BH,A9);BB=BA.Polygon;BD=BA.Group;var BI=A9.length;if((BI&1)!==0||BI<4){return ;}BF=BI/2;var BK,BJ,BM,A5,BL,A4,A7,BE,A3;for(BG=0;BG<BF;++BG){BM=A5=BL=A4=null;A8=[];BK=A9[BG];BJ=A9[BI-1-BG];if(BG!==0){BM=A9[BG-1];A5=A9[BI-BG];}if(BG!==BF-1){BL=A9[BG+1];A4=A9[BI-2-BG];}if(BM){BM={x:0.5*(BM.x+BK.x),y:0.5*(BM.y+BK.y)};}if(A5){A5={x:0.5*(A5.x+BJ.x),y:0.5*(A5.y+BJ.y)};}if(BL){BL={x:0.5*(BL.x+BK.x),y:0.5*(BL.y+BK.y)};}if(A4){A4={x:0.5*(A4.x+BJ.x),y:0.5*(A4.y+BJ.y)};}A7=[BM,BK,BL,A4,BJ,A5];for(BE=0;BE<A7.length;BE++){if(A7[BE]){A8.push(A7[BE]);}}A3=J.call(this,A8);if(A3&&A6[BG]){A3.identity=A6[BG];}A3.setAttribute("class","gm-shape-sbar");A3.setAttribute("type","shape");A3.setAttribute("subtype","sbar");this.hCopyAttribute(s,A3);BD.appendChild(A3);}BB.chartInfo=BC;this.hResetStyleAndAttribute();},CreateSVGPolygonWithRects:function L(A3,BC,A4){var A5,BA,A2,A9,A8,A7,BB;BB=AA.call(this,A3,BC);BA=BB.Polygon;A7=BB.Group;var A6=BC.length;if((A6&1)!==0){return ;}for(A5=0;A5<A6/2;++A5){A9=document.createElementNS(this.mXMLNS,"rect");A8=A4[A5];A2=A8.getChartInfo();A9.identity=A8;if(A2.dirc===1){A9.setAttribute("x",(BC[A5].x).toString());A9.setAttribute("y",String(BC[A5].y-3));A9.setAttribute("width",(BC[A6-A5-1].x-BC[A5].x).toString());A9.setAttribute("height","6");}else{A9.setAttribute("x",(BC[A5].x-3).toString());A9.setAttribute("y",BC[A5].y);A9.setAttribute("width","6");A9.setAttribute("height",(BC[A6-A5-1].y-BC[A5].y).toString());}this.hCopyAttribute(this.mMarkerAttributes,A9);A9.setAttribute("class","gm-shape-sbar");A9.setAttribute("type","shape");A9.setAttribute("subtype","sbar");A7.appendChild(A9);}BA.chartInfo=A2;this.hResetStyleAndAttribute();},hManipulateTextElements:function x(A4){if(A4.Tooltip){var A3=0,A2,A6=this.mElements,A5=A6.length;while(A3<A5){A2=A6[A3];if(A2.Tag&&A2.Tag==="tspan"){A2.Tooltip=A4.Tooltip;}A3++;}}},CreateSVGAxisText:function V(A5,A3,A2){var A4=this.hToCSSStyleStr(),A6=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A6);A6.setAttribute("style",A4);A6.setAttribute("type","axis-text");if(A2){A6.identity=A2;}this.hManipulateTextElements({Tooltip:A3});this.hCopyTextElements(A6,"axis-word");var A7=this.getDrawOrder(A5);this.hExtendGroups(A7);this.mSvg.childNodes[A7+1].appendChild(A6);this.hReset();},CreateSVGBannerText:function An(A4,A2){var A3=this.hToCSSStyleStr(),A5=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A5);A5.setAttribute("style",A3);A5.setAttribute("type","banner-text");if(A2){A5.identity=A2;}this.hCopyTextElements(A5,"banner-text");var A6=this.getDrawOrder(A4);this.hExtendGroups(A6);this.mSvg.childNodes[A6+1].appendChild(A5);this.hReset();},CreateSVGGenericText:function Aj(A5,A2,A4){var A3=this.hToCSSStyleStr(),A6=document.createElementNS(this.mXMLNS,"text");A4=A4||"data-label";if(!!A2){A6.identity=A2;}this.hCopyAttribute(this.mAttributes,A6);A6.setAttribute("style",A3);this.hCopyTextElements(A6,A4);if(A5){if(this.mSvg.childNodes.length<=(A5+2)){this.hExtendGroups(A5+1);}this.mSvg.childNodes[A5+2].appendChild(A6);}else{this.mG.appendChild(A6);}this.hReset();},hCopyTextElements:function d(BA,A7){A7=A7||"axis-word";var A6,A2,A3=0;for(A6=0;A6<this.mElements.length;A6++){var A4=this.mElements[A6];if(A4){if(A4.Type==="text"){var A8=document.createElementNS(this.mXMLNS,A4.Tag),A5=A4.Attributes;for(A2 in A5){A8.setAttribute(A2,A5[A2]);}A8.setAttribute("type",A7);if(A7==="axis-word"){A8.setAttribute("Index",A3);A3++;}A8.setAttribute("class","gm-tspan");A8.textContent=A4.Content;if(A4.Tooltip){var A9=document.createElementNS(this.mXMLNS,"title");A9.textContent=A4.Tooltip;A8.appendChild(A9);}if(A4.Style){A8.setAttribute("style",A4.Style);}BA.appendChild(A8);}else{if(A4.Type==="BBox"){if(A4.Node){this.mG.appendChild(A4.Node);}}}}}},CreateSVGPolygon:function u(A2,A3,A6){var A5,A7=this.getDrawOrder(A2);var A4=this.hCreateSVGPolygon(A3,A6);this.hExtendGroups(A7);A5=this.mSvg.childNodes[A7+1];A5.appendChild(A4);this.mG.appendChild(A4);this.hResetStyleAndAttribute();},hCreateSVGPolygon:function B(A2,A6){var A4,A5=this.hToCSSStyleStr(),A7=A2.length,A3=J.call(this,A2);A3.points=A2;if(A6!==undefined){A3.identity=A6;}A3.setAttribute("style",A5);this.hCopyAttribute(this.mAttributes,A3);return A3;},AddArc:function Av(A2,A7,A6,A3,A5,A4){},AddNeedle:function Aw(A4,A5,A2,A3){},AddString:function Ad(A3,A2){},FillSimple:function Ao(A3,A5,A4,A2){this.mStyle.fill=this.hToCSSColorStr(A4);this.mStyle["fill-opacity"]=A3.mAlpha/255;},FillPattern:function C(A2){},FillGradient:function T(A9,A4,A3){var A7,BB,A5,A8,A6=A9.getGradient();switch(A6.gradientType){case At.DssGraphGradientLinear:if(A4.width===0||A4.height===0){return ;}BB=document.createElementNS(this.mXMLNS,"linearGradient");BB.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));BB.setAttribute("x1","0%");BB.setAttribute("y1","0%");if(A6.angle===0){BB.setAttribute("x2","100%");BB.setAttribute("y2","0%");}else{BB.setAttribute("x2","0%");BB.setAttribute("y2","100%");}A8=this.hCreateLinearGradientStop(0,A6.startGraphColor,A9.mAlpha/255);BB.appendChild(A8);for(A7=0;A7<A6.intermediateColors.length;++A7){var BA=A6.intermediateColors[A7];A8=this.hCreateLinearGradientStop(BA.Step,BA.Color,A9.mAlpha/255);BB.appendChild(A8);}A8=this.hCreateLinearGradientStop(1,A6.endGraphColor,A9.mAlpha/255);BB.appendChild(A8);this.mDefs.appendChild(BB);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case At.DssGraphGradientCircular:A5=document.createElementNS(this.mXMLNS,"radialGradient");A5.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A5.setAttribute("cx",String(A4.cx));A5.setAttribute("cy",String(A4.cy));A5.setAttribute("r",String(A4.r));A5.setAttribute("gradientUnits","userSpaceOnUse");A5.setAttribute("fx",String(A4.fx));A5.setAttribute("fy",String(A4.fy));var A2=A4.startStop||0;A8=this.hCreateLinearGradientStop(A2,A6.startGraphColor,A9.mAlpha/255);A5.appendChild(A8);A8=this.hCreateLinearGradientStop(1,A6.endGraphColor,A9.mAlpha/255);A5.appendChild(A8);this.mDefs.appendChild(A5);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case At.DssGraphGradientRectangular:break;}},hCreateLinearGradientStop:function AU(A6,A4,A5){var A3=document.createElementNS(this.mXMLNS,"stop"),A2="stop-color:"+this.hToCSSColorStr(A4)+";stop-opacity:"+A5;A3.setAttribute("offset",A6*100+"%");A3.setAttribute("style",A2);return A3;},FillEdgeType:function A0(A2,A3){},FillRadientGradient:function Ar(A8,A9,A6,A5,BA,A2,A3,A7,A4){},FillBorderMetallic:function Ay(A4,A2,A6,A5,A7,A3){},FillDonutOrSphere:function Au(A2,A3,A4){},MakeDarker:function R(A3,A2){},RestoreColor:function a(A2){},ApplyLineFormat:function k(A3){var A4=A3.getGradient();if(A4&&A4.valid&&A4.style===1){this.StrokeGradient(A4);o.call(this,A4.strokePatten,A3.mLineThickness);}else{var A2=this.mStyle;A2.stroke=this.hToCSSColorStr(A3.mLineColor);o.call(this,A3.mLineStyle,A3.mLineThickness);}this.mStyle["stroke-opacity"]=A3.mAlpha/255;},StrokeGradient:function AL(A8){var A4=document.createElementNS(this.mXMLNS,"linearGradient");A4.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A4.setAttribute("x1","0%");A4.setAttribute("y1","0%");if(A8.angle===0){A4.setAttribute("x2","100%");A4.setAttribute("y2","0%");}else{A4.setAttribute("x2","0%");A4.setAttribute("y2","100%");}var A5,A2=A8.colors[0].Color,A7=A8.colors[A8.colors.length-1].Color,A3=this.hCreateLinearGradientStop(0,A2,A8.endAlpha/255);A4.appendChild(A3);for(A5=1;A5<A8.colors.length-1;++A5){var A6=A8.colors[A5];A3=this.hCreateLinearGradientStop(A6.Step,A6.Color,A8.endAlpha/255);A4.appendChild(A3);}A3=this.hCreateLinearGradientStop(1,A7,A8.endAlpha/255);A4.appendChild(A3);this.mDefs.appendChild(A4);this.mStyle.stroke="url(#"+this.gradPrefix+(this.mGradientCount++)+")";},AddFormatedText:function e(A6,A2,A4,A5){var A3={Type:"text",Tag:"tspan",Attributes:{x:A2.x,y:A2.y},Content:A4};if(A5&&A5.BaselineOffset){A3.Attributes.y-=A5.BaselineOffset-0.5;A3.Style="dominant-baseline:central";}this.mElements.push(A3);},ApplyBeveledFrameToRectangle:function K(A3,A7,A2,A4,A6,A5,A8){},DrawGaugeMarker:function Aa(A5,A3,A6,A2,A4){},ApplyDonutToRect:function AZ(A2,A4,A3){},BeginFirstFrame:function AI(){},BeginLastFrame:function y(){},EndFrame:function Af(){},EndUnit:function H(){},hToCSSColorStr:function AH(A3){var A2=true;if(typeof A3==="number"){if(A2){M.mR=A3&255;M.mG=(A3&65280)>>8;M.mB=(A3&16711680)>>16;}else{M.mB=A3&255;M.mG=(A3&65280)>>8;M.mR=(A3&16711680)>>16;}}else{return"rgb("+A3.mR+","+A3.mG+","+A3.mB+")";}return"rgb("+M.mR+","+M.mG+","+M.mB+")";},hToCSSStyleStr:function g(){var A4,A3=this.mStyle,A2="";for(A4 in A3){if(A3.hasOwnProperty(A4)){A2=A2+A4+":"+A3[A4]+";";}}return A2.substr(0,A2.length-1);},hCopyAttribute:function AD(A4,A2){var A3;for(A3 in A4){if(A4.hasOwnProperty(A3)){A2.setAttribute(A3,A4[A3]);}}},hResetStyle:function A1(){this.mStyle={};},hResetElements:function Ac(){this.mElements=[];},hResetAttribute:function AO(){this.mAttributes={};this.mMarkerAttributes={};},hResetStyleAndAttribute:function z(){this.hResetStyle();this.hResetAttribute();},hReset:function Al(){this.hResetStyle();this.hResetAttribute();this.hResetElements();},hTranslateMarkerShape:function(A2,A3){var A4="";A2=A2||0;switch(A2){case -2:A4="markerRect";break;case -1:A4="markerCircle";break;case 0:if(A3===1){A4="area";}else{if(A3===2){A4="bar";}else{if(A3===3){A4="line";}}}break;case 4:A4="circle";break;case 24:A4="square";break;case 200:A4="ticker";break;case 201:A4="pie";break;case 202:A4="ring";break;case 204:A4="line";break;case 205:A4="bar";break;case 206:A4="area";break;default:break;}return A4;},hSetExtraAttributes:function(A8,A4,BB){var A9="",A6="shape",A3="",BA=A4.tp,A7=0,A5=A4.currentMarkerShape,BC=BB||(this.hTranslateMarkerShape(A5,BA)||"bar"),A2=A4.hasSizeBy;if(BC==="line"&&A2){BC+="-sizeby";}if(BA===4||BA===5){A7=1;}else{if(BA===7){A7=2;}}if(q.hasOwnProperty(BC)){A9=q[BC][A7];}if(w.hasOwnProperty(BC)){A3=w[BC][A7];}A8.setAttribute("class",A9);A8.setAttribute("type",A6);A8.setAttribute("subtype",A3);},ApplyFontFormat:function b(BD){var A2=this.mStyle,A8=BD.mFontStyle;if(A8!==undefined){var A7=0,BB=1,A4=2,BC=3,BA=4,A5=8;A2["text-decoration"]="none";A2["font-weight"]="normal";if(!!(A8&BB)){A2["font-weight"]="bold";}if(!!(A8&A4)){A2["font-style"]="italic";}if(!!(A8&BA)&&!!(A8&A5)){A2["text-decoration"]="underline line-through";}else{if(!!(A8&BA)){A2["text-decoration"]="underline";}if(!!(A8&A5)){A2["text-decoration"]="line-through";}}}if(BD.mFontAlignment){var A9=0,A3=1,A6=2;switch(BD.mFontAlignment){case A9:A2["text-anchor"]="start";break;case A3:A2["text-anchor"]="middle";break;case A6:A2["text-anchor"]="right";break;}}A2["text-anchor"]="start";if(BD.mFontColor){A2.fill=this.hToCSSColorStr(BD.mFontColor);}if(G.isValidNumber(BD.mStrokeColor)){A2.stroke=this.hToCSSColorStr(BD.mStrokeColor);}if(BD.mStrokeWidth){A2["stroke-width"]=BD.mStrokeWidth;}if(BD.mFontAlpha){A2["fill-opacity"]=BD.mFontAlpha;}if(BD.mFontName){A2["font-family"]=BD.mFontName;}if(BD.mFontSize){A2["font-size"]=BD.mFontSize+"pt";}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill","JSONInstruction","JSONUtil","JSONUnit","JSONFormatFill","JSONFormatFont","JSONFormatLine");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.enums.EnumInstructionName");var d=mstrmojo.chart,L=mstrmojo.chart.enums,y=L.EnumInstructionName,t=d.JSONUtil.prototype,N=mstrmojo.hash;function F(AF,AE){return AF.mpOriginalAddress-AE.mpOriginalAddress;}function X(AF,AE){if(AF===undefined){AF=y.JSONInsUndefined;}if(AE===undefined){AE=null;}else{AE=AE.id;}if(this.mpCurrentUnit===null){this.mpCurrentUnit=new d.JSONUnit();this.mUnitList.push(this.mpCurrentUnit);}return this.mpCurrentUnit.AddInstruction(AF,AE);}function U(AG){var AE=this.mFormatMap,AF=AG.id;if(AG instanceof d.FormatFill){if(AE[AF]===undefined){AE[AF]=new d.JSONFormatFill(AG);}}else{if(AG instanceof d.FormatFont){if(AE[AF]===undefined){AE[AF]=new d.JSONFormatFont(AG);}}else{if(AG instanceof d.FormatLine){if(AE[AF]===undefined){AE[AF]=new d.JSONFormatLine(AG);}}}}}mstrmojo.chart.JSONCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.JSONCanvas",mIsJSONObjectConstructed:false,mpCurrentUnit:null,mUnitList:null,mFormatMap:null,mFormatList:null,mJSONObject:null,init:function w(AE){this._super(AE);this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};},reset:function q(){this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};this.mIsJSONObjectConstructed=false;this.mpCurrentUnit=null;},SaveToObject:function o(AF){var AE;if(!this.mIsJSONObjectConstructed){this.hConstructJSONObject();}for(AE in this.mJSONObject){AF[AE]=this.mJSONObject[AE];}return true;},saveState:function r(){X.call(this,y.JSONInsSaveState);},RestoreState:function W(){X.call(this,y.JSONInsRestoreState);},Clip:function h(){X.call(this,y.JSONInsClip);},Scale:function Q(AE,AG){var AF=X.call(this,y.JSONInsScale);AF.AppendToParameterList("X",AE);AF.AppendToParameterList("Y",AG);},Rotate:function T(AE,AG){var AF=X.call(this,y.JSONInsRotate);AF.AppendToParameterList("Anchor",AE);AF.AppendToParameterList("Radian",AG);},NewPath:function S(){X.call(this,y.JSONInsNewPath);},ClosePath:function l(){X.call(this,y.JSONInsClosePath);},MoveTo:function c(AE,AI,AG,AH){var AF=X.call(this,y.JSONInsMoveTo);AF.AppendToParameterList("X",AE);AF.AppendToParameterList("Y",AI);if(AG){AF.AppendToParameterList("CA",1);AF.AppendToParameterList("BPX",AH.x);AF.AppendToParameterList("BPY",AH.y);}else{AF.AppendToParameterList("CA",0);}},LineTo:function P(AE,AI,AG,AH){var AF;AF=X.call(this,y.JSONInsLineTo);AF.AppendToParameterList("X",AE);AF.AppendToParameterList("Y",AI);if(AG){AF.AppendToParameterList("CA",1);AF.AppendToParameterList("BPX",AH.x);AF.AppendToParameterList("BPY",AH.y);}else{AF.AppendToParameterList("CA",0);}},BezierCurveTo:function K(AH,AG,AK,AI,AE,AJ){var AF;AF=X.call(this,y.JSONInsBezierCurveTo);AF.AppendToParameterList("CP1X",AH);AF.AppendToParameterList("CP1Y",AG);AF.AppendToParameterList("CP2X",AK);AF.AppendToParameterList("CP2Y",AI);AF.AppendToParameterList("X",AE);AF.AppendToParameterList("Y",AJ);},SetRGBAFillColor:function f(AI,AG,AE,AH){var AF;AF=X.call(this,y.JSONInsSetRGBAFillColor);AF.AppendToParameterList("R",this.BoundedValue(AI*256,0,255));AF.AppendToParameterList("G",this.BoundedValue(AG*256,0,255));AF.AppendToParameterList("B",this.BoundedValue(AE*256,0,255));AF.AppendToParameterList("A",this.BoundedValue(AH,0,1));},BoundedValue:function V(AG,AF,AE){if(AG<AF){return AF;}if(AG>AE){return AE;}return AG;},SetRGBAStrokeColor:function z(AI,AG,AE,AH){var AF;AF=X.call(this,y.JSONInsSetRGBAStrokeColor);AF.AppendToParameterList("R",this.BoundedValue(AI*256,0,255));AF.AppendToParameterList("G",this.BoundedValue(AG*256,0,255));AF.AppendToParameterList("B",this.BoundedValue(AE*256,0,255));AF.AppendToParameterList("A",this.BoundedValue(AH,0,1));},FillPath:function j(){X.call(this,y.JSONInsFillPath);},StrokePath:function H(){X.call(this,y.JSONInsStrokePath);},SetLineDash:function E(AG,AF){var AE=X.call(this,y.JSONInsSetLineDash);AE.AppendArrayToParameterList("LinePattern",AG,AF);},SetLineWidth:function n(AE){var AF=X.call(this,y.JSONInsSetLineWidth);AF.AppendToParameterList("LineWidth",AE);},SetLineJoin:function I(AF){var AE=X.call(this,y.JSONInsSetLineJoin);AE.AppendToParameterList("Type",AF);},SetFontSize:function Z(AF){var AE=X.call(this,y.JSONInsSetFontSize);AE.AppendToParameterList("FontSize",AF);},AddRect:function u(AF,AI,AH,AE){var AG=X.call(this,y.JSONInsAddRect);AG.AppendToParameterList("X",AF);AG.AppendToParameterList("Y",AI);AG.AppendToParameterList("W",AH);AG.AppendToParameterList("H",AE);},AddArc:function Y(AF,AK,AE,AI,AG,AJ){var AH=X.call(this,y.JSONInsAddArc);AH.AppendToParameterList("X",AF);AH.AppendToParameterList("Y",AK);AH.AppendToParameterList("Radius",AE);AH.AppendToParameterList("StartAngle",AI);AH.AppendToParameterList("EndAngle",AG);AH.AppendToParameterList("AntiClockwise",AJ);},AddNeedle:function AA(AH,AG,AI,AF){var AE=X.call(this,y.JSONInsAddNeedle);AE.AppendToParameterList("NeedleStyle",AH);AE.AppendToParameterList("BasePoint",AG);AE.AppendToParameterList("Angle",AI);AE.AppendToParameterList("Size",AF);},AddString:function b(AE,AG){var AF=X.call(this,y.JSONInsAddString);AF.AppendToParameterList("Point",AE);AF.AppendToParameterList("Text",AG);},FillSimple:function g(AI,AG,AE,AH){var AF=X.call(this,y.JSONInsFillSimple,AI);AF.AppendToParameterList("DarkerFactor",AG);if(AH){AF.AppendToParameterList("HEP",1);AF.AppendToParameterList("FC",AE);}else{AF.AppendToParameterList("HEP",0);}U.call(this,AI);},FillPattern:function x(AE){X.call(this,y.JSONInsFillPattern,AE);U.call(this,AE);},FillGradient:function s(AH,AE,AG){var AF=X.call(this,y.JSONInsFillGradient,AH);AF.AppendToParameterList("BoundingRect",AE);AF.AppendToParameterList("DarkerFactor",AG);U.call(this,AH);},FillEdgeType:function C(AG,AF){var AE=X.call(this,y.JSONInsFillEdgeType,AG);AE.AppendSimpleVectorToParameterList("Polygon",AF);U.call(this,AG);},FillRadientGradient:function G(AM,AL,AK,AJ,AI,AH,AE,AG,AN){var AF=X.call(this,y.JSONInsFillRadientGradient,AM);AF.AppendToParameterList("RGUsage",AL);AF.AppendToParameterList("CX",AK);AF.AppendToParameterList("CY",AJ);AF.AppendToParameterList("InnerRadius",AI);AF.AppendToParameterList("OuterRadius",AH);if(AE){AF.AppendToParameterList("HEP",1);AF.AppendToParameterList("ExtraDepth",AG);AF.AppendToParameterList("ExtraIntensity",AN);}else{AF.AppendToParameterList("HEP",0);}U.call(this,AM);},FillBorderMetallic:function AB(AK,AF,AJ,AI,AE,AH){var AG=X.call(this,y.JSONInsFillBorderMetallic,AK);AG.AppendToParameterList("BorderUse",AF);AG.AppendToParameterList("CX",AJ);AG.AppendToParameterList("CY",AI);AG.AppendToParameterList("Radius",AE);AG.AppendToParameterList("Thickness",AH);U.call(this,AK);},FillDonutOrSphere:function a(AH,AE,AG){var AF=X.call(this,y.JSONInsFillDonutOrSphere,AH);AF.AppendToParameterList("BoundingRect",AE);AF.AppendToParameterList("IsCircularShape",AG);U.call(this,AH);},MakeDarker:function p(AG,AF){var AE=X.call(this,y.JSONInsMakeDarker,AG);AE.AppendToParameterList("Factor",AF);U.call(this,AG);},RestoreColor:function AD(AE){X.call(this,y.JSONInsRestoreColor,AE);U.call(this,AE);},ApplyLineFormat:function R(AE){X.call(this,y.JSONInsApplyLineFormat,AE);U.call(this,AE);},AddFormatedText:function J(AE,AH,AI,AG){var AF=X.call(this,y.JSONInsAddFormatedText,AE);AF.AppendToParameterList("StartPoint",AH);AF.AppendToParameterList("Text",AI);U.call(this,AE);},ApplyBeveledFrameToRectangle:function e(AJ,AL,AI,AK,AF,AH,AE){var AG=X.call(this,y.JSONInsApplyBeveledFrameToRectangle);AG.AppendToParameterList("Rect",AJ);AG.AppendToParameterList("RotationAngle",AL);AG.AppendToParameterList("BevelDepth",AI);AG.AppendToParameterList("LTColor",AK);AG.AppendToParameterList("LTAlpha",AF);AG.AppendToParameterList("RBColor",AH);AG.AppendToParameterList("RBAlpha",AE);},DrawGaugeMarker:function k(AG,AJ,AE,AI,AH){var AF=X.call(this,y.JSONInsAddGaugeMarker);AF.AppendToParameterList("MarkSize",AJ);AF.AppendToParameterList("MarkShape",AE);AF.AppendToParameterList("Angle",AI);AF.AppendToParameterList("NeedleSize",AH);AF.AppendToParameterList("BPX",AG.x);AF.AppendToParameterList("BPY",AG.y);},ApplyDonutToRect:function A(AG,AF,AH){var AE=X.call(this,y.JSONInsFillDonut2Rect,AH);AE.AppendToParameterList("StartPoint",AG);AE.AppendToParameterList("EndPoint",AF);},BeginFirstFrame:function AC(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new d.JSONUnit({mIsAnimated:true,mIsLastFrame:false});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToFirstFrame();},BeginLastFrame:function B(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new d.JSONUnit({mIsAnimated:true,mIsLastFrame:true});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToLastFrame();},EndFrame:function D(){if(this.mpCurrentUnit!==null&&this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=null;}},EndUnit:function M(){this.mpCurrentUnit=null;},hConstructJSONObject:function O(){var AF=this.mFormatList,AJ=this.mUnitList,AG,AE,AH,AI,AK;AG=this.mJSONObject={};N.forEach(this.mFormatMap,function(AM,AL,AN){AF.push(AM);});AF.sort(F);AE=AJ.length;for(AH=0;AH<AE;++AH){AJ[AH].CalculateFormatIndex(AF);}AG.UnitList=[];if(AE>0){if(AE===1){AI={};AJ[0].AppendToJSONObject(AI);AG.UnitList.push(AI);}else{AK=0;AI={};AJ[0].AppendToJSONObject(AI);AG.UnitList.push(AI);for(AH=1;AH<AE;++AH){AI={};AJ[AH].AppendToJSONObject(AI);if(AJ[AH-1].IsAnimated()!==AJ[AH].IsAnimated()){AG.UnitList.push(AI);AK++;}else{AG.UnitList[AK].InstructionList=AG.UnitList[AK].InstructionList.concat(AI.InstructionList);}}}}t.AppendCompoundPointerVectorToJSONObject("FormatList",AF,AG);this.mIsJSONObjectConstructed=true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.hash");mstrmojo.requiresCls("mstrmojo.VisEnum");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Vector2D","Point2D","CEModuleMain","TripleId","FormatLine","JSONCanvas","SVGCanvas","GraphMatrixContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumPictureFormatType","EnumGraphMajorType","EnumLineJoinType","EnumLineStyle","EnumImageUsage","EnumDSSExtraGraphObject","EnumChartStyle","EnumGraphMatrixMajorGraphType","EnumGraphMatrixThemeType","EnumDssGraphGridChartUniformColorMode","EnumAttachedPointsStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumVariantBool","EnumDSSGraphFillEffect");var CH=mstrmojo.chart,Bt=CH.enums,d=Bt.EnumPictureFormatType,g=Bt.EnumGraphMajorType,A4=Bt.EnumLineJoinType,AX=Bt.EnumImageUsage,An=CH.common.Utility,k=CH.gModuleMain,CD=CH.gNullTripleId,Aa=CH.gNullSeriesId,M=CH.gNullGroupId,Bb=Bt.EnumLineStyle,Bl=Bt.EnumDSSExtraGraphObject,H=Bt.EnumChartStyle,a=Bt.EnumGraphMatrixMajorGraphType,BD=Bt.EnumGraphMatrixThemeType,C=Bt.EnumAttachedPointsStyle,Ak=mstrmojo.VisEnum.ControlType,Ah=mstrmojo.hash;var A0=700,Ba=400,Ae=-16383,J=16383,BV=-16383,AB=16383,AF=500,As=0.1667,BR=96,T=72;var CB=mstrmojo.chart.model,Aw=CB.enums,Bh=Aw.EnumDSSGraphType,Bj=Aw.EnumDSSGraphProperty,Bk=Aw.EnumDSSGraphObject,Z=Aw.EnumDSSGraphFillBevelEffect,B2=Aw.EnumDSSGraphFillEffect;var w=[],AR=new CH.TripleId();var BY=mstrmojo.chart.ChartContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartContext",mBaseLayerObject:null,mPropertyMap:null,mGraphWidth:k.mDefaultGraphWidth,mGraphHeight:k.mDefaultGraphHeight,mGraphType:Bh.DssGraphTypeReserved,mDataset:null,mFormatManager:null,mCanvas:null,mCanvasInfo:null,caKeyMap:null,mLineJoinType:A4.LJT_MITER,mIsLineWidthOdd:false,mAbsoluteFontLineSize:true,mIsFontAntiAlias:true,mFontScaleRatio:1,mAxisAutoNumberFormat:null,mSelectedAxisAutoNumberFormat:null,mThresholdColorCache:{},globalFormats:null,mManualLayoutMode:false,mRecalculateFrame:true,mIsValueAxisShown:true,mUseAnimation:false,mIsTimeSeriesChart:false,mIsUniformAxisMode:false,mIsEntireChart:true,mIsGraphMatrix:false,mThemeType:BD._black,mUniformAxisContext:null,mpGraphMatrixContext:null,mPartialRendering:false,mRenderingWindow:null,mImageUsage:AX.GENERAL,mImageFormat:d.SVG,mDebugUseNewProperties:true,mTimers:[],mUseTimer:false,init:function CO(CW){this._super(CW);this.caKeyMap={c1:"x1",c2:"x1"};this.mUseTimer=CW.UseTimer||false;this.mGraphWidth=k.mDefaultGraphWidth;this.mGraphHeight=k.mDefaultGraphHeight;this.mDataset=CW.DataSet||CW.mDatasetPtr||null;this.mThemeType=BD._black;this.mSelectedAxisAutoNumberFormat={Array:[],Format:null};},getUtiliy:function Am(){return mstrmojo.chart.common.Utility;},populateCanvas:function AY(CX){CX=CX||false;if(CX){this.mCanvas=null;}if(!!this.mCanvas){return ;}var CW="SVG";if(this.mCanvasInfo){CW=this.mCanvasInfo.type||"SVG";delete this.mCanvasInfo.type;}else{this.mCanvasInfo={type:"SVG",gradPrefix:"gmGrad",mGradientCount:0,seriesDrawOrder:this.mDataset.GetSeriesIndexByPriority()};}switch(CW){case"JSON":this.mCanvas=new CH.JSONCanvas({});break;default:this.mCanvas=new CH.SVGCanvas(this.mCanvasInfo);break;}this.mCanvasInfo=null;},startTimer:function Bv(CX){if(this.mUseTimer){var CW=CX.functionName+": "+CX.purpose;console.time(CW);this.mTimers.push(CW);}},endTimer:function Bx(){if(this.mUseTimer){var CW=this.mTimers.pop();if(CW){console.timeEnd(CW);}}},vdWidth:function Bo(CW){return Math.floor(CW*this.mGraphWidth/A0+0.5);},vdHeight:function CC(CX){var CW=this.mGraphHeight;if(this.mIsUniformAxisMode&&!this.mIsEntireChart){CW=this.mUniformAxisContext.mGraphHeight;}return Math.floor(CX*CW/Ba+0.5);},NeedAdjustedLinePath:function Bm(){var CW=this.mImageFormat;return this.mIsLineWidthOdd&&(CW!==d.PDF);},SetGraphSize:function AZ(CX,CW){if(CX>0&&CW>0){this.mGraphWidth=CX;this.mGraphHeight=CW;if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}}},GetGraphType:function A6(){return this.mGraphType;},dialogSizeToPixelSize:function y(CW){return CW*Math.min(this.mGraphWidth,this.mGraphHeight)/2000;},DrawPolygon:function By(CY,Cb,CZ,Ca,CX){if(this.mImageFormat===d.SVG){return ;}if((Cb===undefined)||(Cb===null)){Cb=true;}CZ=CZ||false;Ca=Ca||null;CX=CX||Bb.LS_SOLID;if(CY.length<3){return ;}this.NewPath();if(Cb&&this.NeedAdjustedLinePath()){var CW=this.hAdjustLinePath(CY);this.DrawPolyLine(CW,false,CZ,Ca,CX);}else{this.DrawPolyLine(CY,false,CZ,Ca,CX);}this.ClosePath();},DrawStraightLine:function Ac(CY,CW){if(this.mImageFormat===d.SVG){return ;}this.NewPath();if(this.NeedAdjustedLinePath()){var CX=0,CZ=0;if(CY.x===CW.x){CX=0.5;}if(CY.y===CW.y){CZ=0.5;}this.hMoveTo(CY.x+CX,CY.y+CZ,true);this.hLineTo(CW.x+CX,CW.y+CZ,true);}else{this.hMoveTo(CY.x,CY.y,true);this.hLineTo(CW.x,CW.y,true);}},DrawPolyLine:function AS(Cd,Cc,CZ,CW,Cb){if(this.mImageFormat===d.SVG){return ;}if((Cc===undefined)||(Cc===null)){Cc=true;}CZ=CZ||false;CW=CW||null;Cb=Cb||Bb.LS_SOLID;if(Cb===Bb.LS_GRADIENT){Cb=Bb.LS_SOLID;}var Ce=Cd.length,Ca,CX,Cf;if(Ce<=0){return ;}var CY;if(this.NeedAdjustedLinePath()){CY=this.hAdjustLinePath(Cd);}Ce=CY.length;this.NewPath();this.hMoveTo(CY[0].x,CY[0].y,Cc,CZ,CW);CX=0;for(Ca=1;Ca<Ce;++Ca){if(Cb===Bb.LS_SOLID){this.hLineTo(CY[Ca].x,CY[Ca].y,Cc,CZ,CW);}else{Cf=CH.gLinePatterns[Cb];this.DrawDashedLine(CY[CX],CY[Ca],Cf);}CX=Ca;}},DrawDashedLine:function CJ(CY,Cf,Cd){if(this.mImageFormat===d.SVG){return ;}var CZ,Cg,Ce,Ca,Ch,CW=0,Cb=0,Cc,CX;CZ=Math.sqrt((CY.x-Cf.x)*(CY.x-Cf.x)+(CY.y-Cf.y)*(CY.y-Cf.y));Cg=(Cf.x-CY.x)/CZ;Ce=(Cf.y-CY.y)/CZ;Cc=Cd.length;Ca=CY.x;Ch=CY.y;while(CW<CZ){CX=Math.min(Cd[Cb%Cc],CZ-CW);++Cb;CW+=CX;if(Cb%2===1){this.MoveTo(Ca,Ch);}Ca+=CX*Cg;Ch+=CX*Ce;if(Cb%2===1){this.LineTo(Ca,Ch);}}},isParetoChart:function BM(){return this.mGraphType===Bh.DssGraphTypePareto||this.mGraphType===Bh.DssGraphTypePareto_Percent;},isCombinationChart:function S(){var CW=this.GetGraphMatrixContext();return this.mIsGraphMatrix&&CW.isCombinationChart();},hasBarAreaInComb:function A2(){if(this.isCombinationChart()===false){return false;}var CW=this.mDatasetPtr.GetSeriesByShape();return CW.Bar.length>0||CW.Area.length>0;},getFontScale:function Ag(){if(this.mAbsoluteFontLineSize){return this.mFontScaleRatio;}return 1;},vdRect:function t(CW){return(new CH.Rect2D({x:this.vdWidth(CW.x),y:this.vdHeight(CW.y),width:this.vdWidth(CW.width),height:this.vdHeight(CW.height)}));},vdPoint:function CI(CW){return(new CH.Point2D({x:this.vdWidth(CW.x),y:this.vdHeight(CW.y)}));},vdFontSize:function B5(CW){var CY=CW;if(this.mIsGraphMatrix){return CY;}if(!this.mAbsoluteFontLineSize){CY=this.vdHeight(CY);}if(!this.mIsTimeSeriesChart){CY=this.PtSizeToPixelSize(CY);CY*=this.getFontScale();if(this.mIsGraphMatrix){var CX=this.mDataset.GetZoomScale();CY=CY*CX+0.5;}if(CY===0){CY=1;}}return CY;},vdLineWidth:function A9(CX){var CW=CX;if(!this.mAbsoluteFontLineSize){CW=this.vdHeight(CW);}CW=this.PtSizeToPixelSize(CW);CW=Math.floor(CW/100+0.5);return CW;},TDGToMSTRPoint:function BN(CY,CX){var CW,CZ;CW=Math.floor((CY-Ae)*this.mGraphWidth/(J-Ae)+0.5);CZ=Math.floor((AB-CX)*this.mGraphHeight/(AB-BV)+0.5);return(new CH.Point2D({x:CW,y:CZ}));},setCanvas:function AW(CW){this.mCanvas=CW;},saveState:function Bd(){this.mCanvas.saveState();},Rotate:function CF(CW,CX){this.mCanvas.Rotate(CW,CX);},Scale:function BX(CW,CX){this.mCanvas.Scale(CW,CX);},RestoreState:function W(){this.mCanvas.RestoreState();},Clip:function Bp(){this.mCanvas.Clip();},DrawRectangle:function N(CW,CX){if(this.mImageFormat===d.SVG){return ;}this.NewPath();if(CX&&this.NeedAdjustedLinePath()){this.mCanvas.AddRect(CW.x+0.5,CW.y+0.5,CW.width,CW.height);}else{this.mCanvas.AddRect(CW.x,CW.y,CW.width,CW.height);}},FinishTextBoundingBox:function L(CX,CW,CZ){var CY=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){this.mCanvas.CreateSVGTextBoundingBox(CX,CW,CZ,CY);}},FinishDrawCircle:function A7(CX,CY){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CW=this.hGetIdentity(CY.mSeriesId,CY.mGroupId);this.mCanvas.CreateSVGCircle(CX.x,CX.y,CX.r,CW);}},FinishDrawRect:function Ar(CX,CY){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CW;if(CY.mObjectId===Bk.DssGraphDataMarker){CW=this.hGetIdentityEx(CY.mSeriesId,CY.mGroupId,"marker");}else{CW=this.hGetIdentity(CY.mSeriesId,CY.mGroupId);}if(this.NeedAdjustedLinePath()){CX.x=parseInt(CX.x)===CX.x?CX.x+0.5:CX.x;CX.y=parseInt(CX.y)===CX.y?CX.y+0.5:CX.y;}this.mCanvas.CreateSVGRect(CX.x,CX.y,CX.width,CX.height,CW);}},FinishDrawPieSlice:function B7(CX,Cb,CW,Ca,Cd,Cc,CZ){var CY;if(Cc===undefined){Cc=false;}if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(Cd.angleByIndex!==undefined){CY=this.hGetPieIdentity(Cd.mSeriesId,Cd.mGroupId,Cd.angleByIndex,Cd.sliceById);}else{CY=this.hGetIdentity(Cd.mSeriesId,Cd.mGroupId);}if(Cc){this.mCanvas.CreateSVGCircle(CX.x,CX.y,Cb,CY,CZ,this.mThemeType===BD._white);}else{this.mCanvas.CreateSVGSector(CX.x,CX.y,Cb,CW,Ca,CY,CZ,this.mThemeType===BD._white);}}},FinishDrawRingPieSlice:function s(CX,Cb,Ca,CW,CZ,Cc){var CY;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(Cc.angleByIndex!==undefined){CY=this.hGetPieIdentity(Cc.mSeriesId,Cc.mGroupId,Cc.angleByIndex,Cc.sliceById);}else{CY=this.hGetIdentity(Cc.mSeriesId,Cc.mGroupId);}this.mCanvas.CreateSVGRingSector(CX.x,CX.y,Cb,Ca,CW,CZ,CY);}},FinishDrawRing:function BH(Cb,Ca,CW,CX,CY){CY=CY||false;var CZ;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(CY){CZ=this.hGetPieIdentity(CX.mSeriesId,CX.mGroupId,CX.angleByIndex,CX.sliceById);}else{CZ=this.hGetIdentity(CX.mSeriesId,CX.mGroupId);}this.mCanvas.CreateSVGRing(Cb.x,Cb.y,Ca,CW,CZ);}},FinishDrawPolyline:function CS(Ck,CX,Cg,Ce,CY,Ch,Ca){var Cc=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){Cg=Cg||false;var Cj=0,Cd=1,Cm=2,Ci=3,Cb=4,Cl,Cf=CX.mObjectId,CZ=this.mCanvas;var CW=Ck;if(this.NeedAdjustedLinePath()){CW=this.hAdjustLinePath(Ck);}switch(Cf){case Bk.DssGraphUserLine1:case Bk.DssGraphUserLine2:case Bk.DssGraphUserLine3:case Bk.DssGraphUserLine4:Ce=this.hGetIdentityEx(Cf-Bk.DssGraphUserLine1,0,"originLine");if(Ce){Cl=[Ce];}else{Cl=[];}CZ.CreateSVGPolyLine(CX.mSeriesId,CW,Cl,Cb);break;case Bk.DssGraphO1Major:case Bk.DssGraphO2Major:case Bk.DssGraphY1Major:case Bk.DssGraphY2Major:case Bk.DssGraphX1Major:case Bk.DssGraphX2Major:case Bk.DssGraphO1Minor:case Bk.DssGraphO2Minor:case Bk.DssGraphY1Minor:case Bk.DssGraphY2Minor:case Bk.DssGraphX1Minor:case Bk.DssGraphX2Minor:Cl=[];CZ.CreateSVGPolyLine(CX.mSeriesId,CW,Cl,Cm);break;case Bk.DssGraphO1Body:case Bk.DssGraphO2Body:case Bk.DssGraphX1Body:case Bk.DssGraphX2Body:case Bk.DssGraphY1Body:case Bk.DssGraphY2Body:Cl=[];CZ.CreateSVGPolyLine(CX.mSeriesId,CW,Cl,Ci);break;case Bk.DssGraphTrendLine:CZ.CreateSVGPolyLineForTRLine(Ck,Cc,Ce,true,CY,Ch,Ca);break;default:if(Cg){Cl=[];CZ.CreateSVGPolyLine(CX.mSeriesId,CW,Cl,Cj);}else{Cl=this.hGetIdentities(CX.mSeriesId,CX.mGroupId,Ck.length);CZ.CreateSVGPolylineWithCircles(CX.mSeriesId,CW,Cl);}break;}}},FinishDrawTickerShape:function Bz(Ca,CY,Cb){var CZ=[Ca,CY],CW=this.mCanvas;if(CW instanceof mstrmojo.chart.SVGCanvas){var CX=this.hGetIdentities(Cb.mSeriesId,Cb.mGroupId,1);CW.CreateSVGPolyLine(Cb.mSeriesId,CZ,CX,5);}},FinishDrawStraightLine:function X(CX,Cc,CW,Ca,Cb){var CZ=this.mDataset.GetSeriesCount(),Cd=[CX],CY=this.mCanvas;Cd.push(Cc);if(this.NeedAdjustedLinePath()){Cd=this.hAdjustLinePath(Cd);}if(CY instanceof mstrmojo.chart.SVGCanvas){if(Ca){if(CW.mObjectId===Bk.DssGraphTrendLine){CY.CreateSVGPolyLineForTRLine(Cd,CZ,Ca,true,CX,Cb,Cc);}else{if(CW.mObjectId===Bk.DssGraphReferenceLine){CY.CreateSVGPolyLineForTRLine(Cd,CZ,Ca,false,CX,Cb,Cc);}}}else{switch(CW.mObjectId){case Bk.DssGraphO1Body:case Bk.DssGraphO2Body:case Bk.DssGraphX1Body:case Bk.DssGraphX2Body:case Bk.DssGraphY1Body:case Bk.DssGraphY2Body:var Ce=[];CY.CreateSVGPolyLine(CW.mSeriesId,Cd,Ce);return ;}Ce=this.hGetIdentities(CW.mSeriesId,CW.mGroupId,1);Ce.push(Ce[0]);CY.CreateSVGPolylineWithCircles(CW.mSeriesId,Cd,Ce);}}},FinishDrawPolygon:function Ap(Cb,Cc,Ca){var CX,CY=this.mCanvas,CZ=Cb.length;if(CZ<3){return ;}if(CY instanceof mstrmojo.chart.SVGCanvas){var CW=Cb;if(this.NeedAdjustedLinePath()){CW=this.hAdjustLinePath(Cb);}switch(Cc){case C.NORMAL:CX=this.hGetIdentity(Ca.mSeriesId,Ca.mGroupId);CY.CreateSVGPolygon(Ca.mSeriesId,CW,CX);break;case C.TOOLTIP_UPPER:if((CZ&1)!==0){return ;}CX=this.hGetIdentities(Ca.mSeriesId,Ca.mGroupId,CZ/2);CY.CreateSVGPolygonWithCircles(Ca.mSeriesId,CW,CX);break;case C.TOOLTIP_U2L:if((CZ&1)!==0){return ;}CX=this.hGetIdentities(Ca.mSeriesId,Ca.mGroupId,CZ/2);CY.CreateSVGPolygonWithRects(Ca.mSeriesId,CW,CX);break;case C.TOOLTIP_TRAPEZOID:if((CZ&1)!==0){return ;}CX=this.hGetIdentities(Ca.mSeriesId,Ca.mGroupId,CZ/2);CY.CreateSVGPolygonWithTrapezoid(Ca.mSeriesId,CW,CX);break;default:CY.CreateSVGPolygon(Ca.mSeriesId,CW);break;}}},allowOverlapBetweenDatalabels:function(){var CW=this.mDataset;return CW&&CW.allowDatalabelOverlap();},hGetLabelIdentity:function A8(CZ){var CW={identity:null,type:"data-label"};switch(CZ.mObjectId){case Bk.DssGraph2DO1Label:case Bk.DssGraph2DO2Label:case Bk.DssGraphY1Label:case Bk.DssGraphY2Label:case Bk.DssGraphX2Label:case Bk.DssGraphX1Label:CW.type="axis-text";break;case Bk.DssGraphUserLabel1:case Bk.DssGraphUserLabel2:case Bk.DssGraphUserLabel3:case Bk.DssGraphUserLabel4:var CY=CZ.mObjectId-Bk.DssGraphUserLabel1;CW.identity=this.hGetIdentityEx(CY,0,"origin-label");CW.type=CY<=1?Ak.GM_ORIGIN_LABEL_H:Ak.GM_ORIGIN_LABEL_V;break;case Bk.DssGraphRefLineText:CW.type="ref-label";break;case Bk.DssGraphTrendLineText:CW.type="trend-label";break;default:var CX=null;if(CZ.mSeriesId>=0&&CZ.mGroupId>=0){if(CZ.angleByIndex!==undefined){CX=this.hGetPieIdentityEx(CZ.mSeriesId,CZ.mGroupId,CZ.angleByIndex,CZ.sliceById,"data-label");}else{CX=this.hGetIdentityEx(CZ.mSeriesId,CZ.mGroupId,"data-label");}}CW.identity=CX;break;}return CW;},FinishDrawText:function l(Ca,CZ){var CX=this.mCanvas;if(CX instanceof mstrmojo.chart.SVGCanvas){switch(Ca.mObjectId){case Bk.DssGraph2DO1Label:case Bk.DssGraph2DO2Label:case Bk.DssGraphY1Label:case Bk.DssGraphY2Label:case Bk.DssGraphX2Label:case Bk.DssGraphX1Label:CX.CreateSVGAxisText(Ca.mSeriesId,CZ.Tooltip,CZ.Identities);break;case Bl.DssGraphBanner:if(!CZ.Identities){CZ.Identities=this.hGetIdentities(Ca.mSeriesId,Ca.mGroupId,1);}CX.CreateSVGBannerText(Ca.mSeriesId,CZ.Identities);break;default:var CW=this.hGetLabelIdentity(Ca);var CY=this.mDataset.GetSeriesCount();if(CW.type==="ref-label"){CW.identity=CZ.Identity;}CX.CreateSVGGenericText(CY,CW.identity,CW.type);break;}}},FinishDrawCurves:function G(Cf,Cc,Cb,CW,Cd,CY){var CZ=this.mDataset.GetSeriesCount(),Ce=Cc.mSeriesId,CX=this.mCanvas,Ca;if(CX instanceof mstrmojo.chart.SVGCanvas){CX.CreateSVGCurves(Cf,CZ,Ce,Cb,Cc.mObjectId===Bk.DssGraphTrendLine,CW,Cd,CY);}},hGetIdentities:function BU(CZ,Ca,Cb){var CY=[],CX;for(CX=0;CX<Cb;++CX){var CW=this.hGetIdentity(CZ,Ca+CX);CY.push(CW);}return CY;},hGetPieIdentity:function Ay(CZ,CX,CW,CY){if(CZ<0){CZ=0;}if(CX<0){CX=0;}if(CW===undefined||CW<0){CW=0;}if(CY===undefined||CY<0){CY=0;}return this.mDataset.dataProvider.getGraphCell(CZ,CX).getSliceIdentity(CW,CY);},hGetIdentity:function AK(CW,CX){if(CW<0){CW=0;}if(CX<0){CX=0;}return this.mDataset.dataProvider.getGraphCell(CW,CX).getIdentity();},hGetIdentityEx:function P(CZ,Cb,CY){CY=CY||"generic";if(CZ<0){CZ=0;}if(Cb<0){Cb=0;}var CX=this.mDataset.dataProvider;switch(CY){case"data-label":return CX.getGraphCell(CZ,Cb).getDataLabelIdentity();case"marker":return CX.getGraphCell(CZ,Cb).getMarkerIdentity();case"originLine":case"origin-label":var Ca=["y1","y2","x1","x2"],CW=Ca[CZ]||"y1";if(CY==="originLine"){return CX.getAxisOriginLineIdentity(CW);}return CX.getAxisOriginLabelIdentity(CW);default:return this.hGetIdentity(CZ,Cb);}},hGetPieIdentityEx:function CE(Cd,CX,CW,Ca,CY){if(Cd<0){Cd=0;}if(CX<0){CX=0;}if(CW===undefined||CW<0){CW=0;}if(Ca===undefined||Ca<0){Ca=0;}var Cb=this.mDataset;switch(CY){case"data-label":var CZ=Cb.dataProvider.getGraphCell(Cd,CX);if(!!CZ){if(CZ.isFaked){CZ=Cb.dataProvider.innerGetGraphCell(Cd,CX);}var Cc=CZ.getSinglePieDPs();if(!!Cc){return Cc[CW].getDataLabelIdentity(Ca,true);}}break;default:return this.hGetPieIdentity(Cd,CX,CW,Ca);}},getIdentity:function Au(CY,Cb,Cf){Cf=Cf||"shape";var Cd=[],Ce;if(Cb==="pie"){var Ca=this.mDataset,CW=0,CX=0,Cc,CZ;if(Ca){CW=Ca.GetPieCountAtOneDataPoint(CY.mSeriesId,CY.mGroupId);CX=Ca.GetPieSliceCount(CY.mSeriesId,CY.mGroupId);}for(Cc=0;Cc<CW;Cc++){for(CZ=0;CZ<CX;CZ++){Ce=this.hGetPieIdentityEx(CY.mSeriesId,CY.mGroupId,Cc,CZ,Cf);Cd.push(Ce);}}}else{Ce=this.hGetIdentityEx(CY.mSeriesId,CY.mGroupId,Cf);Cd.push(Ce);}return Cd;},hAdjustLinePath:function AU(CY){var Ca=CY.length,Cb,CX,CZ;var CW=Ah.cloneArray(CY);Cb=Ca-1;for(CZ=0;CZ<Ca;++CZ){CX=(CZ+1===Ca)?0:CZ+1;if(CY[CZ].x===CY[Cb].x||CY[CZ].x===CY[CX].x){CW[CZ].x+=0.5;}if(CY[CZ].y===CY[Cb].y||CY[CZ].y===CY[CX].y){CW[CZ].y+=0.5;}Cb=CZ;}return CW;},NewPath:function D(){this.mCanvas.NewPath();},ClosePath:function AC(){this.mCanvas.ClosePath();},SetFontAntiAlias:function CG(CW){this.mIsFontAntiAlias=CW;},SaveSurfaceToObject:function Ax(CW){return this.mCanvas.SaveToObject(CW);},CalculateDepthOffset:function Ad(CZ,CX,Ce){var Ca=0,CY=Math.cos(k.DegreeToRadian(CX)),Cf=Math.sin(k.DegreeToRadian(CX)),Cd,Cc,Cb,CW;if(Ce===undefined){Ce=false;}if(Ce){Ca=1/Math.sqrt(Math.pow(this.mGraphWidth*CY,2)+Math.pow(this.mGraphHeight*Cf,2));}else{Ca=As/AF;}Cb=this.mGraphWidth*Ca*CZ;CW=this.mGraphHeight*Ca*CZ;Cd=Math.floor(Cb*CY+0.5);Cc=-Math.floor(CW*Cf+0.5);return{OffsetX:Cd,OffsetY:Cc};},hApplyEnhancedSeriesEffect:function O(CX,CY){if(this.mIsGraphMatrix){return ;}var CW=CX.EnhancedSeriesEffect,CZ,Cb;switch(this.mGraphType){case Bh.DssGraphTypePies:case Bh.DssGraphTypeMultiple_Pies:case Bh.DssGraphTypeMultiple_Proportional:case Bh.DssGraphTypeX_Y_Scatter:case Bh.DssGraphTypeDualAxis_X_Y_Scatter:case Bh.DssGraphTypeX_Y_Scatter_with_Labels:case Bh.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Bh.DssGraphTypeBubble:case Bh.DssGraphTypeBubble_DualAxis:case Bh.DssGraphTypeBubble_With_Labels:case Bh.DssGraphTypeBubble_DualAxis_With_Labels:CW.call(CX,204,Z.DssGraphFillBevelSphere,0,270,10);break;case Bh.DssGraphTypeRing_Pie:case Bh.DssGraphTypeMultiple_Ring_Pies:case Bh.DssGraphTypeMultiple_Proportional_Ring_Pies:CW.call(CX,204,Z.DssGraphFillBevelDonut,50,0,30);break;default:var Ca=Bt.EnumCollectionType;switch(CY){case Ca.CT_VERTICAL_AREA:CW.call(CX,204,Z.DssGraphFillBevelSphere,0,270,20);break;case Ca.CT_VERTICAL_BAR:Cb=204;CZ=this.GetProperty(Bj.DssGraphDepthMode,CD);if(this.isVerticalBar()&&CZ){Cb=255;}CW.call(CX,Cb,Z.DssGraphFillBevelDonut,50,0,30);break;case Ca.CT_HORIZONTAL_AREA:CW.call(CX,204,Z.DssGraphFillBevelSphere,0,180,20);break;case Ca.CT_HORIZONTAL_BAR:CW.call(CX,204,Z.DssGraphFillBevelSphere,0,270,30);break;case Ca.CT_DEPTH_LINE_OR_LINE_MARKER:CW.call(CX,204,Z.DssGraphFillBevelSphere,0,270,10);break;default:break;}break;}},GetLocation:function u(CX){var CZ,CY,CW;CZ=this.GetProperty(CX,CD);if(CZ===null||CZ===undefined){return ;}CY=this.TDGToMSTRPoint(CZ.Left,CZ.Top);CW=this.TDGToMSTRPoint(CZ.Right,CZ.Bottom);return new CH.Rect2D({x:CY.x,y:CY.y,width:CW.x-CY.x,height:CW.y-CY.y});},GetLocationRect:function CK(CY){var CX,CW;CX=this.GetLocation(CY);if(CX){CW=new CH.Rect2D({x:CX.Left,y:CX.Top,width:CX.Right-CX.Left,height:CX.Bottom-CX.Top});}return CW;},PutLocation:function Az(CW,CX){},GetProperty:function CN(CW,CX){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CW,this.MapObject(CX.mObjectId),CX.mSeriesId]);},GetLocalProperty:function BG(CW,CX){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CW,this.MapObject(CX.mObjectId),CX.mSeriesId]);},PutProperty:function n(CW,CX,CY){if(this.mPropertyMap===null){this.mPropertyMap=new CH.common.MapStructure();}this.mPropertyMap.push([CW,this.MapObject(CX.mObjectId),CX.mSeriesId],CY);if(CW===Bj.DssGraphType){this.mGraphType=CY;}},normalDirection:function BK(CZ,CY){var Cb=this.CalculateDepthOffset(1000,CY),CX=Cb.OffsetX,Cc=Cb.OffsetY,CW=new CH.Vector2D({x:CX,y:Cc}),Ca=CW.CrossProduct(CZ);if(Ca===0){return 0;}return Ca>0?1:-1;},IsVertical:function e(){switch(this.mGraphType){case Bh.DssGraphTypeVertical_Area_Absolute:case Bh.DssGraphTypeVertical_Area_Stacked:case Bh.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Area_Percent:case Bh.DssGraphTypeVertical_Bar_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_Stacked:case Bh.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Bar_Percent:case Bh.DssGraphTypeVertical_Line_Absolute:case Bh.DssGraphTypeVertical_Line_Stacked:case Bh.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Line_Percent:case Bh.DssGraphTypeVertical_Bar_Absolute:case Bh.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bh.DssGraphTypeVertical_Line_DualAxis_Percent:case Bh.DssGraphTypeVertical_Area_DualAxis_Percent:case Bh.DssGraphTypeVertical_Bullet:case Bh.DssGraphTypeVertical_CategoryPies_Absolute:case Bh.DssGraphTypeVertical_CategoryPies_Percent:case Bh.DssGraphTypeVertical_CategoryPies_Stacked:case Bh.DssGraphTypeGrid_Pies:case Bh.DssGraphTypeScatter_Pies:case Bh.DssGraphTypeBubble_Pies:return true;}switch(this.GetGraphMajorType()){case g.GMT_BUBBLE:case g.GMT_SCATTER:case g.GMT_STOCK:return true;}return false;},IsDualAxis:function z(){switch(this.mGraphType){case Bh.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bh.DssGraphTypeDualAxis_X_Y_Scatter:case Bh.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Bh.DssGraphTypeDualAxis_Polar_Coordinate_Chart:case Bh.DssGraphTypeDualAxis_Radar_Line:case Bh.DssGraphTypeDualAxis_Radar_Stacked_Area:case Bh.DssGraphTypeBubble_DualAxis:case Bh.DssGraphTypeHiLo_DualAxis_Stock_Chart:case Bh.DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:case Bh.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:case Bh.DssGraphTypeBubble_DualAxis_With_Labels:case Bh.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bj.DssGraphRadar_DualAxis_Radar_Stacked_Line:case Bj.DssGraphRadar_DualAxis_Radar_Area:case Bh.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bh.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Bh.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bh.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bh.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bh.DssGraphTypeVertical_Line_DualAxis_Percent:case Bh.DssGraphTypeVertical_Area_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}},IsStackedChart:function BO(){switch(this.mGraphType){case Bh.DssGraphTypeVertical_Area_Stacked:case Bh.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Area_Stacked:case Bh.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Bar_Stacked:case Bh.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Bar_Stacked:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Line_Stacked:case Bh.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Line_Stacked:case Bh.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bh.DssGraphTypeRadar_Stacked_Area:case Bh.DssGraphTypeDualAxis_Radar_Stacked_Area:case Bh.DssGraphTypeRadar_Area_Stacked:case Bj.DssGraphRadar_Line_Stacked:case Bj.DssGraphRadar_DualAxis_Radar_Stacked_Line:return true;default:return false;}},IsPieChart:function Y(){if(this.mIsGraphMatrix){switch(this.GetGraphMatrixContext().mGraphType){case Bh.DssGraphTypeVertical_CategoryPies_Absolute:case Bh.DssGraphTypeVertical_CategoryPies_Percent:case Bh.DssGraphTypeVertical_CategoryPies_Stacked:case Bh.DssGraphTypeHorizontal_CategoryPies_Absolute:case Bh.DssGraphTypeHorizontal_CategoryPies_Percent:case Bh.DssGraphTypeHorizontal_CategoryPies_Stacked:case Bh.DssGraphTypeGrid_Pies:case Bh.DssGraphTypeScatter_Pies:case Bh.DssGraphTypeBubble_Pies:return true;default:return false;}}else{return this.GetGraphMajorType()===g.GMT_PIE;}},MapObject:function Bg(CW){if(CW===Bj.DssGraphPieSlice){return Bj.DssGraphRiser;}return CW;},SplitRect:function BS(Ca,CW,CY,Cc,Cb){var CZ,CX;if(CW){CZ=Ca.height*CY/100;Cc.Reset(Ca.x,Ca.y,Ca.width,Ca.height-CZ);Cb.Reset(Ca.x,Ca.y+Cc.height,Ca.width,CZ);}else{CX=Ca.width*CY/100;Cc.Reset(Ca.x+CX,Ca.y,Ca.width-CX,Ca.height);Cb.Reset(Ca.x,Ca.y,CX,Ca.height);}},getAxisAutoNumberFormat:function AM(Cd,Ca,Cc){Cc=Cc||false;var CX=this.mDataset,CZ;if(Ca&&Ca.length){var CW=this.mSelectedAxisAutoNumberFormat;if(CW.Format!==null){var Cb=true,CY=CW.Array;if(CY&&CY.length===Ca.length){for(CZ=0;CZ<CY.length;CY++){if(CY[CZ]!==Ca[CZ]){Cb=false;break;}}}if(Cb){Cd.reset(CW.Format);return ;}}CX.getValueAxisNumberFormat(Cd,Ca,Cc);CW.Array=Ca.slice(0);CW.Format=new CH.ChartAdvFormat({ChartAdvFormat:Cd});}else{var Ce=this.mAxisAutoNumberFormat;if(Ce!==null){Cd.reset(Ce);}else{CX.getValueAxisNumberFormat(Cd);this.mAxisAutoNumberFormat=new CH.ChartAdvFormat({ChartAdvFormat:Cd});}}},GetGraphMajorType:function V(){switch(this.mGraphType){case Bh.DssGraphTypeVertical_Area_Absolute:case Bh.DssGraphTypeVertical_Area_Stacked:case Bh.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Area_Percent:case Bh.DssGraphTypeHorizontal_Area_Absolute:case Bh.DssGraphTypeHorizontal_Area_Stacked:case Bh.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bh.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Area_Percent:case Bh.DssGraphTypeVertical_Bar_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_Stacked:case Bh.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Bar_Percent:case Bh.DssGraphTypeHorizontal_Bar_Side_by_Side:case Bh.DssGraphTypeHorizontal_Bar_Stacked:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Bh.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Bar_Percent:case Bh.DssGraphTypeVertical_Line_Absolute:case Bh.DssGraphTypeVertical_Line_Stacked:case Bh.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Line_Percent:case Bh.DssGraphTypeHorizontal_Line_Absolute:case Bh.DssGraphTypeHorizontal_Line_Stacked:case Bh.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bh.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Line_Percent:case Bh.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bh.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Bullet:case Bh.DssGraphTypeHorizontal_Bullet:case Bh.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bh.DssGraphTypeVertical_Line_DualAxis_Percent:case Bh.DssGraphTypeVertical_Area_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_CategoryPies_Absolute:case Bh.DssGraphTypeHorizontal_CategoryPies_Stacked:case Bh.DssGraphTypeHorizontal_CategoryPies_Percent:case Bh.DssGraphTypeVertical_CategoryPies_Absolute:case Bh.DssGraphTypeVertical_CategoryPies_Stacked:case Bh.DssGraphTypeVertical_CategoryPies_Percent:return g.GMT_CATEGORY;case Bh.DssGraphTypePies:case Bh.DssGraphTypeRing_Pie:case Bh.DssGraphTypeMultiple_Pies:case Bh.DssGraphTypeMultiple_Ring_Pies:case Bh.DssGraphTypeMultiple_Proportional:case Bh.DssGraphTypeMultiple_Proportional_Ring_Pies:case Bh.DssGraphTypePie_Bar:case Bh.DssGraphTypeRing_Pie_Bar:return g.GMT_PIE;case Bh.DssGraphTypeScatter_Pies:case Bh.DssGraphTypeX_Y_Scatter:case Bh.DssGraphTypeDualAxis_X_Y_Scatter:case Bh.DssGraphTypeX_Y_Scatter_with_Labels:case Bh.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return g.GMT_SCATTER;case Bh.DssGraphTypeBubble_Pies:case Bh.DssGraphTypeBubble:case Bh.DssGraphTypeBubble_DualAxis:case Bh.DssGraphTypeBubble_With_Labels:case Bh.DssGraphTypeBubble_DualAxis_With_Labels:return g.GMT_BUBBLE;case Bh.DssGraphTypeVertical_Bar_Absolute:case Bh.DssGraphTypeHorizontal_Bar_Absolute:return g.GMT_CATEGORY;case Bh.DssGraphTypeGrid_Pies:case Bh.DssGraphTypeGridChart:return g.GMT_GRID;case Bh.DssGraphTypeMaxDeskTopGraphTypes:return g.GMT_INVALID;default:return g.GMT_INVALID;}},isLegendByGroup:function CU(){return false;},isVerticalBar:function Bn(){switch(this.mGraphType){case Bh.DssGraphTypeVertical_Bar_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_Stacked:case Bh.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Bar_Percent:case Bh.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bh.DssGraphTypeVertical_Bullet:return true;default:return false;}},MoveTo:function BB(CW,CZ,CX,CY){this.mCanvas.MoveTo(CW,CZ,CX,CY);},BezierCurveTo:function Bq(CY,CX,Cb,CZ,CW,Ca){this.mCanvas.BezierCurveTo(CY,CX,Cb,CZ,CW,Ca);},LineTo:function AD(CW,CZ,CX,CY){this.mCanvas.LineTo(CW,CZ,CX,CY);},hMoveTo:function o(CW,Cb,CX,CY,Ca){var CZ;CZ=(CX&&this.NeedAdjustedLinePath())?0.5:0;this.MoveTo(CW+CZ,Cb+CZ,CY,Ca);},hLineTo:function CL(CW,Cb,CX,CY,Ca){var CZ;CZ=(CX&&this.NeedAdjustedLinePath())?0.5:0;this.LineTo(CW+CZ,Cb+CZ,CY,Ca);},SetRGBAFill:function Be(CX,CY,CW,CZ){this.mCanvas.SetRGBAFillColor(CX,CY,CW,CZ);},SetRGBAStroke:function CP(CX,CY,CW,CZ){this.mCanvas.SetRGBAStrokeColor(CX,CY,CW,CZ);},FillPath:function AT(){this.mCanvas.FillPath();},StrokePath:function j(){this.mCanvas.StrokePath();},SetLineDash:function AP(CW,CX){this.mCanvas.SetLineDash(CW,CX);},SetLineWidth:function B6(CW){this.mCanvas.SetLineWidth(CW);},SetFormatManager:function f(CX){var CW;this.mFormatManager=CX;CW=this.mFormatManager.GetFormat(Bj.DssGraphType);this.mGraphType=CW+1;this.mFormatManager.SetGraphType(this.mGraphType);this.mIsFontAntiAlias=true;},SetFontSize:function B4(CW){this.mCanvas.SetFontSize(CW);},PtSizeToPixelSize:function r(CW){return Math.floor(CW*BR/T+0.5);},IsReverseSeriesOrder:function A3(CZ,CX,CW){var CY;if(CZ===null){return false;}CY=CZ.IsReverseOrder();if((CX&&CW>=180&&CW<360)||(!CX&&CW>=90&&CW<270)){CY=!CY;}return CY;},IsReverseGroupOrder:function BF(CX,CW){return((CX&&CW>=90&&CW<270)||(!CX&&CW>=0&&CW<180));},GetPointByAngleRadiusCenter:function Bi(CW,CY,CX){return new CH.Point2D({x:Math.floor(CX.x+CY*Math.cos(CW)+0.5),y:Math.floor(CX.y-CY*Math.sin(CW)+0.5)});},RectangleIntersection:function E(Cc,Cb,Ca){var CZ,CX,CW,CY;if((Cc.x>(Cb.x+Cb.width))||(Cb.x>(Cc.x+Cc.width))||(Cc.y>(Cb.y+Cb.height))||(Cb.y>(Cc.y+Cc.height))){return false;}CZ=Math.max(Cc.x,Cb.x);CX=Math.max(Cc.y,Cb.y);CW=Math.min(Cc.x+Cc.width,Cb.x+Cb.width)-CZ;CY=Math.min(Cc.y+Cc.height,Cb.y+Cb.height)-CX;Ca.Reset(CZ,CX,CW,CY);return true;},RectangleUnion:function Aq(Cc,Cb,Ca){var CZ,CX,CW,CY;CZ=Math.min(Cc.x,Cb.x);CX=Math.min(Cc.y,Cb.y);CW=Math.max(Cc.x+Cc.width,Cb.x+Cb.width)-CZ;CY=Math.max(Cc.y+Cc.height,Cb.y+Cb.height)-CX;Ca.Reset(CZ,CX,CW,CY);},getUniformAxisLabelRotateMode:function(CY){var CX=CY,CW=this.getUniformAxisContext();switch(CY){case"x":case"X":CX="X1";break;case"y":case"Y":CX="Y1";break;default:break;}return CW.mLabelRotation[CX];},getUniformAxisContext:function p(){if(this.mUniformAxisContext===null){this.mUniformAxisContext={mDataAreaLeftMargin:0,mDataAreaRightMargin:0,mDataAreaTopMargin:0,mDataAreaBottomMargin:0,mGraphHeight:400,mIsAxisTitleAndLabelRequired:true,mLabelRotation:{X1:-1,Y1:-1,X2:-1,Y2:-1},xDataLabelPadding:0,yDataLabelPadding:0,ValueAxis:{X1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},X2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Z:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false}},CategoryAxis:{X:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]},Y:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]}}};}return this.mUniformAxisContext;},isUADataAreaOutput:function Bu(){if(this.mIsUniformAxisMode){var CW=this.getUniformAxisContext();if(!CW.mIsAxisTitleAndLabelRequired){return true;}}return false;},IsBackgroundBright:function AL(){var Cj,Cg,Ck,Ch,CX,Cb,Ce,CW,CZ,Ci,CY,Cc,Ca,Cf,Cd;Ca=new CH.TripleId({ObjectId:Bj.DssGraphFrame,SeriesId:Aa,GroupId:M});Cf=this.hGetColorById(Ca);Cj=Cf.Alpha;Ch=Cf.R;CX=Cf.G;Cb=Cf.B;Ca.reset(Bj.DssGraphBackground,Aa,M);Cf=this.hGetColorById(Ca);Cg=Cf.Alpha;Ce=Cf.R;CW=Cf.G;CZ=Cf.B;Ck=1-(1-Cj)*(1-Cg);if(Ck>0.5){Ci=Ce*Cg*(1-Cj)+Ch*Cj;CY=CW*Cg*(1-Cj)+CX*Cj;Cc=CZ*Cg*(1-Cj)+Cb*Cj;}Cd=(Ci*299+CY*587+Cc*114)/1000;return Cd>150;},hGetColorById:function CM(Ca){var Ce,Cd,CX=1,CW=255,CY=255,Cb=255,Cc;Cc=this.GetProperty(Bj.DssGraphAreaAlpha,Ca);if(Cc){CX=Cc/255;}Cc=this.GetProperty(Bj.DssGraphFillEffect,Ca);if(Cc){switch(Cc){case B2.DssGraphFillSimple:Cc=this.GetProperty(Bj.DssGraphAreaColor,Ca);if(Cc){var CZ=k.GetColorParser();CZ.ResetFromColorValue(Cc,true);CW=CZ.mR;CY=CZ.mG;Cb=CZ.mB;}break;case B2.DssGraphFillAdvancedWash:Cc=this.GetProperty(Bj.DssGraphGradient,Ca);if(Cc){Ce=Cc.StartColor;Cd=Cc.EndColor;CW=(Ce.mR+Cd.mR)/2;CY=(Ce.mG+Cd.mG)/2;Cb=(Ce.mB+Cd.mB)/2;}break;default:break;}}return{R:CW,G:CY,B:Cb,Alpha:CX};},FillSimple:function BJ(CY,CZ,CX,CW){this.mCanvas.FillSimple(CY,CZ,CX,CW);},FillPattern:function q(CW){this.mCanvas.FillPattern(CW);},FillGradient:function A1(CX,CW,CY){this.mCanvas.FillGradient(CX,CW,CY);},FillEdgeType:function BP(CX,CW){this.mCanvas.FillEdgeType(CX,CW);},FillDonutOrSphere:function AQ(CY,CW,CX){this.mCanvas.FillDonutOrSphere(CY,CW,CX);},FillBorderMetallic:function b(CY,CW,Ca,CZ,Cb,CX){this.mCanvas.FillBorderMetallic(CY,CW,Ca,CZ,Cb,CX);},FillRadientGradient:function Ao(CX,Cd,Cb,Ca,Ce,CW,CY,Cc,CZ){this.mCanvas.FillRadientGradient(CX,Cd,Cb,Ca,Ce,CW,CY,Cc,CZ);},MakeDarker:function U(CX,CW){this.mCanvas.MakeDarker(CX,CW);},RestoreColor:function AN(CW){this.mCanvas.RestoreColor(CW);},ApplyLineFormat:function Bs(CW){this.mCanvas.ApplyLineFormat(CW);},AddFormatedText:function Bc(CX,CZ,CW,CY){this.mCanvas.AddFormatedText(CX,CZ,CW,CY);},BeginFirstFrame:function Ab(){this.mCanvas.BeginFirstFrame();},BeginLastFrame:function Bw(){this.mCanvas.BeginLastFrame();},EndFrame:function BA(){this.mCanvas.EndFrame();},EndUnit:function c(){this.mCanvas.EndUnit();},SetLineJoin:function AJ(CW){this.mLineJoinType=CW;this.mCanvas.SetLineJoin(this.mLineJoinType);},GetLineJoin:function AV(){return this.mLineJoinType;},UpdateFormatLine:function Al(Ca,CY,CX){CX=CX||false;if(this.mIsGraphMatrix){return ;}var CZ;An.tripleId.reset(AR,Ca.mObjectId,Ca.mSeriesId,Ca.mGroupId);if(this.mIsGraphMatrix&&AR.mObjectId===Bj.DssGraphX1Major){AR.mObjectId=Bj.DssGraphY1Major;}if(CY.mLineColor===null||!CX){CZ=this.GetProperty(Bj.DssGraphLineColor,AR);if(CZ){var CW=k.GetColorParser();CW.ResetFromColorValue(CZ,true);CY.mLineColor=CW.ToInteger();}}if(CY.mLineStyle===null||!CX){CZ=this.GetProperty(Bj.DssGraphLinePattern,AR);if(CZ){CY.mLineStyle=CZ;}}if(CY.mAlpha===null||!CX){CZ=this.GetProperty(Bj.DssGraphLineAlpha,AR);if(CZ){CY.mAlpha=CZ;}}if(CY.mLineThicknessPt===null||!CX){CZ=this.GetProperty(Bj.DssGraphLineWidth,AR);if(CZ){CY.mLineThicknessPt=CZ;}}},UpdateFormatFill:function AI(Cd,CY,Cb,Ca){Ca=Ca||false;if(this.mIsGraphMatrix){return ;}var Cc;An.tripleId.reset(AR,Cd.mObjectId,Cd.mSeriesId,Cd.mGroupId);AR.mObjectId=this.MapObject(Cd.mObjectId);if(CY.mAlpha===null||!Ca){Cc=this.GetProperty(Bj.DssGraphAreaAlpha,AR);if(Cc!==null&&Cc!==undefined){CY.mAlpha=Cc;}}var CX;if(CY.mFillType===null||!Ca){Cc=this.GetProperty(Bj.DssGraphFillEffect,AR);if(Cc!==null&&Cc!==undefined){CY.mFillType=Cc;}var CZ=CY.mFillType;switch(CZ){case B2.DssGraphFillSimple:Cc=this.GetProperty(Bj.DssGraphAreaColor,AR);if(Cc!==null&&Cc!==undefined){if(CY.mSimpleColor===null||!Ca){CX=k.GetColorParser();CX.ResetFromColorValue(Cc,true);CY.mSimpleColor=CX.ToInteger();}}break;case B2.DssGraphFillAdvancedWash:var CW=CY.mFillGradient;Cc=this.GetProperty(Bj.DssGraphGradient,AR);if(Cc!==null&&Cc!==undefined){if(CW===null||!Ca){if(CW===null){CY.mFillGradient={};}CW=CY.mFillGradient;Ah.copyProps(["gradientType","angle","horizontalOffset","verticalOffset"],Cc,CW);CX=k.GetColorParser();CX.ResetFromColorValue(Cc.StartColor,true);CW.startGraphColor=CX.ToInteger();CX.ResetFromColorValue(Cc.EndColor,true);CW.endGraphColor=CX.ToInteger();}}Cc=this.GetProperty(Bj.DssGraphGradientEndAlpha,AR);if(Cc!==null&&Cc!==undefined){if(CW.endAlpha===null||!Ca){CW.endAlpha=Cc;}}else{CW.endAlpha=CY.mAlpha;}break;case B2.DssGraphFillPattern:break;default:break;}}},UpdateFormatFont:function K(CZ,CX){var CY;if(this.mIsGraphMatrix){return ;}CY=this.GetProperty(Bj.DssGraphFontColor,CZ);if(CY){var CW=k.GetColorParser();CW.ResetFromColorValue(CY,true);CX.mFontColor=CW.ToInteger();}CY=this.GetProperty(Bj.DssGraphFontName,CZ);if(CY){CX.mFontName=CY;}CY=this.GetProperty(Bj.DssGraphFontSize100,CZ);if(CY){CX.mFontSize=Math.floor(CY/100+0.5);}CY=this.GetProperty(Bj.DssGraphFontStyle,CZ);if(CY){CX.mFontStyle=CY;}CY=this.GetProperty(Bj.DssGraphFontAlpha,CZ);if(CY){CX.mFontAlpha=CY;}CY=this.GetProperty(Bj.DssGraphFontAlign,CZ);if(CY){CX.mFontAlignment=CY;}CY=this.GetProperty(Bj.DssGraphFontRotation,CZ);if(CY){CX.mFontRotation=CY;}CY=this.GetProperty(Bj.DssGraphFontBox,CZ);if(CY){CX.mFontBox=CY;}},ParseValueToFormat:function x(Cc,CY){var CW=[],CZ,Cb,CX,Ca=10;Cb=0;for(CZ=0;CZ<6;++CZ){CX=Cc.indexOf(",",Cb);CW[CZ]=Cc.substring(Cb,CX);Cb=CX+1;}CW[CZ]=Cc.substring(Cb);if(CW[0].length){CY.mFormatType=parseInt(CW[0],Ca);}if(CW[1].length){CY.mDigits=parseInt(CW[1],Ca);}if(CW[2].length){CY.mGrouping=parseInt(CW[2],Ca);}if(CW[3].length){CY.mPosCurr=parseInt(CW[3],Ca);}if(CW[4].length){CY.mNegFormat=parseInt(CW[4],Ca);}if(CW[5].length){CY.mCurrency=CW[5];}if(CW[6].length){CY.mCustomFormat=CW[6];}},DrawSector:function Af(CW,CZ,CX,CY){this.NewPath();this.mCanvas.AddArc(CW.x,CW.y,CZ,CX,CY,false);this.LineTo(CW.x,CW.y);this.ClosePath();},DrawRingSector:function B0(CY,CX,CW,CZ,Ca){this.NewPath();this.mCanvas.AddArc(CY.x,CY.y,CX,CZ,Ca,false);this.LineTo(CY.x+CW*Math.cos(Ca),CY.y+CW*Math.sin(Ca));this.mCanvas.AddArc(CY.x,CY.y,CW,Ca,CZ,true);this.ClosePath();},DrawCylinder:function AG(CX,Ca,CY,CZ,CW){console.alert("to be impl");},ApplyBeveledFrameToRectangle:function F(CX,Cb,CW,CY,Ca,CZ,Cc){this.mCanvas.ApplyBeveledFrameToRectangle(CX,Cb,CW,CY,Ca,CZ,Cc);},drawArc:function B(CW,Ca,CY,CZ,CX){if(CX===undefined){CX=true;}if(CX){this.NewPath();}this.mCanvas.AddArc(CW.x,CW.y,Ca,CY,CZ,false);},GetGraphMatrixContext:function BZ(){if(this.mpGraphMatrixContext===null){this.mpGraphMatrixContext=new CH.GraphMatrixContext({GraphType:this.mGraphType});if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}this.mpGraphMatrixContext.parentContext=this;}return this.mpGraphMatrixContext;},HideAxisElements:function BQ(CW){this.mShouldHideAxisElements=CW;},IsHidingAxisElements:function B9(){return this.mShouldHideAxisElements;},IsPercentChart:function I(){switch(this.mGraphType){case Bh.DssGraphTypeVertical_Bar_Percent:case Bh.DssGraphTypeHorizontal_Bar_Percent:case Bh.DssGraphTypeVertical_Area_Percent:case Bh.DssGraphTypeHorizontal_Area_Percent:case Bh.DssGraphTypeVertical_Line_Percent:case Bh.DssGraphTypeHorizontal_Line_Percent:case Bh.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bh.DssGraphTypeVertical_Line_DualAxis_Percent:case Bh.DssGraphTypeVertical_Area_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;}return false;},IsGridChart:function BW(){return this.mGraphType===Bh.DssGraphTypeGridChart;},IsScatterChart:function Q(){switch(this.mGraphType){case Bh.DssGraphTypeX_Y_Scatter:case Bh.DssGraphTypeDualAxis_X_Y_Scatter:case Bh.DssGraphTypeX_Y_Scatter_with_Labels:case Bh.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return true;}return false;},IsBubbleChart:function AA(){switch(this.mGraphType){case Bh.DssGraphTypeBubble:case Bh.DssGraphTypeBubble_DualAxis:case Bh.DssGraphTypeBubble_With_Labels:case Bh.DssGraphTypeBubble_DualAxis_With_Labels:return true;}return false;},IsBulletChart:function A5(){switch(this.mGraphType){case Bh.DssGraphTypeVertical_Bullet:case Bh.DssGraphTypeHorizontal_Bullet:return true;}return false;},IsBarChart:function At(CW){CW=(CW===undefined)?H._general:CW;CW=(CW>=H._ring)?H._general:CW;switch(this.mGraphType){case Bh.DssGraphTypeVertical_Bar_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bh.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bh.DssGraphTypeHorizontal_Bar_Side_by_Side:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bh.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:return(CW===H._general||CW===H._cluster);case Bh.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Bar_Stacked:case Bh.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Bar_Stacked:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:return(CW===H._general||CW===H._stacked);case Bh.DssGraphTypeVertical_Bar_Percent:case Bh.DssGraphTypeHorizontal_Bar_Percent:case Bh.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Percent:return(CW===H._general||CW===H._percent);case Bh.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bh.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bh.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Bar_Absolute:case Bh.DssGraphTypeHorizontal_Bar_Absolute:case Bh.DssGraphTypeVertical_Bullet:case Bh.DssGraphTypeHorizontal_Bullet:return(CW===H._general||CW===H._absolute);}return false;},IsAdvancedBarChart:function BE(CW){CW=(CW===undefined)?H._general:CW;switch(this.mGraphType){case Bh.DssGraphTypeVertical_Bullet:case Bh.DssGraphTypeHorizontal_Bullet:return CW===H._general||CW===H._bullet;default:return false;}},IsLineChart:function Bf(CW){CW=(CW===undefined)?H._general:CW;CW=(CW>=H._ring)?H._general:CW;if(CW===H._cluster){return false;}switch(this.mGraphType){case Bh.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Line_Stacked:case Bh.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Line_Stacked:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Line_BiPolar_Stacked:return(CW===H._general||CW===H._stacked);case Bh.DssGraphTypeVertical_Line_Percent:case Bh.DssGraphTypeHorizontal_Line_Percent:case Bh.DssGraphTypeVertical_Line_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Percent:return(CW===H._general||CW===H._percent);case Bh.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bh.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Line_Absolute:case Bh.DssGraphTypeHorizontal_Line_Absolute:return(CW===H._general||CW===H._absolute);}return false;},IsAreaChart:function CQ(CW){CW=(CW===undefined)?H._general:CW;CW=(CW>=H._ring)?H._general:CW;if(CW===H._cluster){return false;}switch(this.mGraphType){case Bh.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Area_Stacked:case Bh.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Area_Stacked:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Area_BiPolar_Stacked:return(CW===H._general||CW===H._stacked);case Bh.DssGraphTypeVertical_Area_Percent:case Bh.DssGraphTypeHorizontal_Area_Percent:case Bh.DssGraphTypeVertical_Area_DualAxis_Percent:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Percent:return(CW===H._general||CW===H._percent);case Bh.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bh.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Area_Absolute:case Bh.DssGraphTypeHorizontal_Area_Absolute:return(CW===H._general||CW===H._absolute);}return false;},GetGraphMatrixGraphMajorType:function CT(){var CW=this.mpGraphMatrixContext.mMarkerShape,CX=201,CZ=202;if(CW===CX||CW===CZ){return a._PIE;}if(this.IsBarChart()){return a._BAR;}if(this.IsLineChart()){return a._LINE;}if(this.IsAreaChart()){return a._AREA;}var CY=this.GetGraphType();switch(CY){case Bh.DssGraphTypeGridChart:return a._GRID;case Bh.DssGraphTypeX_Y_Scatter:case Bh.DssGraphTypeDualAxis_X_Y_Scatter:case Bh.DssGraphTypeX_Y_Scatter_with_Labels:case Bh.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return a._SCATTER;case Bh.DssGraphTypeBubble:case Bh.DssGraphTypeBubble_DualAxis:case Bh.DssGraphTypeBubble_With_Labels:case Bh.DssGraphTypeBubble_DualAxis_With_Labels:return a._BUBBLE;case Bh.DssGraphTypeVertical_Area_Absolute:case Bh.DssGraphTypeVertical_Area_Stacked:case Bh.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Area_Percent:case Bh.DssGraphTypeHorizontal_Area_Absolute:case Bh.DssGraphTypeHorizontal_Area_Stacked:case Bh.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bh.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bh.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Area_Percent:return a._AREA;case Bh.DssGraphTypeVertical_Line_Absolute:case Bh.DssGraphTypeVertical_Line_Stacked:case Bh.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bh.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bh.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bh.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bh.DssGraphTypeVertical_Line_Percent:case Bh.DssGraphTypeHorizontal_Line_Absolute:case Bh.DssGraphTypeHorizontal_Line_Stacked:case Bh.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bh.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bh.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bh.DssGraphTypeHorizontal_Line_Percent:return a._LINE;}return a._UNDEFINED;},GetThresholdFillColor:function h(CY,CZ){var CW=true;if(CW){if(CY===this.mThresholdColorCache.mSeriesId&&CZ===this.mThresholdColorCache.mGroupId){if(this.mThresholdColorCache.mUseThreshold){return this.mThresholdColorCache.mThresholdColor;}}else{var CX=this.mDatasetPtr.GetThresholdFillColor(CY,CZ,0);this.mThresholdColorCache.mSeriesId=CY;this.mThresholdColorCache.mGroupId=CZ;this.mThresholdColorCache.mUseThreshold=CX!==null;if(this.mThresholdColorCache.mUseThreshold){this.mThresholdColorCache.mThresholdColor=CX;return CX;}}}return null;},GetColorFromPalette:function B3(CW){var CX,CY;if(this.mIsGraphMatrix){if(this.mThemeType===BD._white){CX=CH.gLightColorPalette;}else{CX=CH.gDarkColorPalette;}}else{CX=CH.gColorPalette;}CW%=CX.length;CY=CX[CW];return CY.ToInteger();},getInt:function B1(CW){if(CW>=0){return Math.floor(CW);}return Math.ceil(CW);},transformRectToTicker:function B8(CX,CY){var CW=[],Ca,CZ;if(CY){Ca={x:Math.round(CX.x),y:Math.round(CX.y+0.5*CX.height)};CZ={x:Math.round(CX.x+CX.width),y:Math.round(CX.y+0.5*CX.height)};}else{Ca={x:Math.round(CX.x+0.5*CX.width),y:Math.round(CX.y)};CZ={x:Math.round(CX.x+0.5*CX.width),y:Math.round(CX.y+CX.height)};}CW.push(Ca);CW.push(CZ);return CW;},transformToRect:function BT(CW,Cj,CX,CY){var Cb=100,Ch=4,Ci=[4,-100,-100,100,-100,100,100,-100,100],CZ,Ce,Cd;w=[];if(CX){for(CZ=0;CZ<Ch;++CZ){Ce=Ci[2*CZ+1]*Cj/Cb+CW.x;Cd=Ci[2*CZ+2]*Cj/Cb+CW.y;w.push({x:Ce,y:Cd});}}else{for(CZ=0;CZ<Ch;++CZ){Ce=Ci[2*CZ+1]*Cj/Cb+CW.x;Cd=Ci[2*CZ+2]*Cj/Cb+CW.y;var Cg={x:Ce,y:Cd};Cg=this.vdPoint(Cg);w.push(Cg);}}var Cf=Math.abs(w[3].x-w[2].x),Ca=Math.abs(w[3].y-w[0].y);if(CY){CY.Reset(w[0].x,w[0].y,Cf,Ca);return CY;}else{var Cc=new CH.Rect2D();Cc.x=w[0].x;Cc.y=w[0].y;Cc.width=Math.abs(w[3].x-w[2].x);Cc.height=Math.abs(w[3].y-w[0].y);return Cc;}},resetCanvas:function BI(){this.mCanvas.reset();},applyFontFormat:function Ai(CW){if(this.mImageFormat===d.SVG){this.mCanvas.ApplyFontFormat(CW);}},setDrawingOrderToCanvas:function Br(CW){if(this.mImageFormat===d.SVG){this.mCanvas.setDrawOrder(CW);}},getDefaultThemeColor:function CV(){switch(this.mThemeType){case BD._black:return 0;case BD._white:return 16777215;default:return 16777215;}},getDefaultContrastColor:function CA(CW){CW=CW||-1;var CY=0,CX=1;switch(CW){case CY:return(this.mThemeType===BD._black?5855577:10066329);case CX:return(this.mThemeType===BD._black?16777215:3355443);default:return(this.mThemeType===BD._black?16777215:0);}},mapGraphTypeToDualAxis:function Av(CX){var CW=mstrmojo.chart.model.enums.EnumDSSGraphType;switch(CX){case CW.DssGraphTypeVertical_Bar_Side_by_Side:return CW.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side;case CW.DssGraphTypeHorizontal_Bar_Side_by_Side:return CW.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side;case CW.DssGraphTypeVertical_Bar_Stacked:return CW.DssGraphTypeVertical_Bar_DualAxis_Stacked;case CW.DssGraphTypeHorizontal_Bar_Stacked:return CW.DssGraphTypeHorizontal_Bar_DualAxis_Stacked;case CW.DssGraphTypeVertical_Bar_Percent:return CW.DssGraphTypeVertical_Bar_DualAxis_Percent;case CW.DssGraphTypeHorizontal_Bar_Percent:return CW.DssGraphTypeHorizontal_Bar_DualAxis_Percent;case CW.DssGraphTypeVertical_Bar_Absolute:return CW.DssGraphTypeVertical_Bar_DualAxis_Absolute;case CW.DssGraphTypeHorizontal_Bar_Absolute:return CW.DssGraphTypeHorizontal_Bar_DualAxis_Absolute;case CW.DssGraphTypeVertical_Line_Stacked:return CW.DssGraphTypeVertical_Line_DualAxis_Stacked;case CW.DssGraphTypeHorizontal_Line_Stacked:return CW.DssGraphTypeHorizontal_Line_DualAxis_Stacked;case CW.DssGraphTypeVertical_Line_Percent:return CW.DssGraphTypeVertical_Line_DualAxis_Percent;case CW.DssGraphTypeHorizontal_Line_Percent:return CW.DssGraphTypeHorizontal_Line_DualAxis_Percent;case CW.DssGraphTypeVertical_Line_Absolute:return CW.DssGraphTypeVertical_Line_DualAxis_Absolute;case CW.DssGraphTypeHorizontal_Line_Absolute:return CW.DssGraphTypeHorizontal_Line_DualAxis_Absolute;case CW.DssGraphTypeVertical_Area_Stacked:return CW.DssGraphTypeVertical_Area_DualAxis_Stacked;case CW.DssGraphTypeHorizontal_Area_Stacked:return CW.DssGraphTypeHorizontal_Area_DualAxis_Stacked;case CW.DssGraphTypeVertical_Area_Percent:return CW.DssGraphTypeVertical_Area_DualAxis_Percent;case CW.DssGraphTypeHorizontal_Area_Percent:return CW.DssGraphTypeHorizontal_Area_DualAxis_Percent;case CW.DssGraphTypeVertical_Area_Absolute:return CW.DssGraphTypeVertical_Area_DualAxis_Absolute;case CW.DssGraphTypeHorizontal_Area_Absolute:return CW.DssGraphTypeHorizontal_Area_DualAxis_Absolute;default:return CX;}},getAxisTripleId:function AO(CW){return CH.gAxisTripleIds[CW];},RenderClusterShapes:function BC(){var CZ=this,CX=CZ.mUniformAxisContext.CategoryAxis,CY=CX.X,CW=CX.Y;if(CZ.isCombinationChart()||CZ.IsDualAxis()){return(CY.EnforceCluster&&CY.EnforceFringe)||(CW.EnforceCluster&&CW.EnforceFringe);}return false;},checkColorByAndSizeByValue:function BL(Cb,CX,Ca,CW){CX=CX||this.mDataset;Ca=Ca||false;CW=CW||false;if(!this.mIsGraphMatrix){return true;}var CZ=Cb.angleByIndex!==undefined,CY;if(Ca){if(CZ===false){CY=CX.GetColorByData(Cb.mSeriesId,Cb.mGroupId);}else{CY=CX.GetPieSliceColorByData(Cb.mSeriesId,Cb.mGroupId,Cb.angleByIndex,Cb.sliceById);}if(An.isValidNumber(CY)===false){return false;}}if(CW){CY=CX.GetSizeByData(Cb.mSeriesId,Cb.mGroupId);if(An.isValidNumber(CY)===false){return false;}}return true;},getValueAxisKeyFromLayout:function AE(CW,CX){if(CX){return CW?"X1":"Y1";}else{return CW?"X2":"Y2";}},getAxisKeyFromObjectId:function AH(CW,CZ,CX){CX=CX||false;CZ=CZ||false;var CY;switch(CW){case Bk.DssGraphX1Body:case Bk.DssGraphX1Label:case Bk.DssGraphX1Major:case Bk.DssGraphX1Minor:case Bk.DssGraphXTitle:case Bk.DssGraphUserLabel3:case Bk.DssGraphUserLine3:CY="X1";break;case Bk.DssGraphX2Body:case Bk.DssGraphX2Label:case Bk.DssGraphX2Major:case Bk.DssGraphX2Minor:case Bk.DssGraphX2Title:case Bk.DssGraphUserLabel4:case Bk.DssGraphUserLine4:CY="X2";break;case Bk.DssGraphY1Body:case Bk.DssGraphY1Label:case Bk.DssGraphY1Major:case Bk.DssGraphY1Minor:case Bk.DssGraphY1Title:case Bk.DssGraphUserLabel1:case Bk.DssGraphUserLine1:CY="Y1";break;case Bk.DssGraphY2Body:case Bk.DssGraphY2Label:case Bk.DssGraphY2Major:case Bk.DssGraphY2Minor:case Bk.DssGraphY2Title:case Bk.DssGraphUserLabel2:case Bk.DssGraphUserLine2:CY="Y2";break;case Bk.DssGraphZBody:CY="Z";break;case Bk.DssGraphO1Body:case Bk.DssGraph2DO1Label:case Bk.DssGraphO1Major:case Bk.DssGraphO1Minor:case Bk.DssGraphO1Title:if(CZ){CY=this.caKeyMap.c1||this.IsVertical()?"X1":"Y1";}else{CY="O1";}break;case Bk.DssGraphO2Body:case Bk.DssGraph2DO2Label:case Bk.DssGraphO2Major:case Bk.DssGraphO2Minor:case Bk.DssGraphO2Title:if(CZ){CY=this.caKeyMap.c1||this.IsVertical()?"X2":"Y2";}else{CY="O2";}break;default:CY="";break;}if(CX){CY=CY.toLowerCase();}return CY;},getUniformAxisInformationFromKey:function CR(CZ,CY){CY=CY||false;var CX=this.getUniformAxisContext(),CW=CX.ValueAxis;switch(CZ){case"X1":case"X2":case"Y1":case"Y2":case"Z":return CW[CZ];case"O1":case"O2":CW=CX.CategoryAxis;return CY?CW.Y:CW.X;default:return CW.Y1;}},getUniformAxisInformation:function R(CZ,CY){var CX=this.getUniformAxisContext(),Cb=CX.ValueAxis,CW=CX.CategoryAxis,Ca;switch(CZ){case Bk.DssGraphO1Body:case Bk.DssGraphO2Body:CY=CY||false;return CY?CW.Y:CW.X;case Bk.DssGraphX1Body:Ca=Cb.X1;break;case Bk.DssGraphY1Body:Ca=Cb.Y1;break;case Bk.DssGraphX2Body:Ca=Cb.X2;break;case Bk.DssGraphY2Body:Ca=Cb.Y2;break;case Bk.DssGraphZBody:Ca=Cb.Z;break;}return Ca;},mirrorPrimaryInBubbleScatter:function A(Cc){var Cd=this,CY=Cd.GetGraphMatrixContext(),CW=CY.AxisLayout;if(Cd.mIsGraphMatrix===false){return false;}if(CW===null||CW===undefined){return false;}var CZ=1,Cb=2,Ca=4,CX=8;if(Cc){return !!(CW&CX);}return !!(CW&Ca);},isCompactMode:function Aj(){return this.mDataset.dataProvider.isCompactMode();}});BY.sDefaultMargin=10;BY.sDefaultMarginForTimeSeries=3;BY.sDefaultUniformAxisMargin=0;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.VisEnum","mstrmojo.VisLegend","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.gm.GMIdentities","mstrmojo.gm.GMUtility","mstrmojo.array","mstrmojo.string","mstrmojo.hash","mstrmojo._FormateVisLegend","mstrmojo.ui._HasScroller");var Ag=mstrmojo,Ad=Ag.gm,AB=Ag.dom,Ac=Ag.css,R=Ag.hash,AO=Ag.VisUtility,Z=Ad.GMUtility,O=mstrmojo.array,X=mstrmojo.string,e=Ad.ColorSquareIdentity,C=Ag.VisEnum.ControlType,j=Ad.EnumLegendSlot,AM=Ad.EnumDockPosition,o=Ad.EnumLegendSlot,AG=Ad.EnumIdentityType,AE=Ad.EnumShape,AY=Ag.VisEnum.GMLegendDataType,I=mstrmojo.desc(13966,"Size by:"),x="px",E=1.35,Y=0.75,V=5,J=20,l=J,AF=5,A=5,y=16,d=15,G=16,AJ=20,s=15,Ae=1,AA="setAttribute",k=3,g=2,P=8,r=15,AT=14,u=1,Q=2,f=4,Ah=8,Af=16,K=10,AV=3,AK=50,AQ=-3,t=5,AR="gm-legend-lock-icon",AN=mstrmojo.desc(14442,"This metric has its axis scale set to custom min and max values"),N="http://www.w3.org/2000/svg",w="\u2026",M=/[ \-]/;function AS(An,Ap,Ai,Aq){if(!An){return ;}var Ak,At,Al,As,Ao=An.style,Au=Ap===AM.TOP,Aj=Ap===AM.BOTTOM,Ar=Ap===AM.LEFT,Am=Ap===AM.RIGHT;if(Au||Aj){Ak=Ai;At=1;Al=-1;As=AQ;if(Aj){As+=Aq;}}else{if(Ar||Am){Ak=1;At=Aq;As=-1;Al=AQ;if(Am){Al+=Ai;}}}Ao.cssText="left:"+Al+x+";top:"+As+x+";width:"+Ak+x+";height:"+At+x+";";}function H(Aj){var Ai=String(Aj);return Ai.indexOf(" ")>=0||Ai.indexOf("-")>=0;}function W(Ak,Aj,Al){var Ai=typeof Ak==="string"?Z.restoreSpecialChars(Ak):Ak;return AO.measureTextWidth(Ai,Aj,Al);}function AI(Am,Al,Aj,Ai){var Ak=W(Al,Aj,K);Am.setAttribute("measureWidth",Ak);if(Ak>Ai){Ak=Ai;}else{Am.style.overflow="visible";}Am.setAttribute("displayWidth",Ak);Am.style.width=Ak+x;return Ak;}function B(Aj){var Ai;if(Aj.textContent&&typeof (Aj.textContent)!==undefined){Ai=Aj.textContent;}else{Ai=Aj.innerText;}return Ai;}function a(Ak){var Aj=Ak.getAttribute("measureWidth"),Ai=Ak.getAttribute("displayWidth");if(!Aj){Ak[AA]("title","");}Aj=parseFloat(Aj,10);Ai=parseFloat(Ai,10);if((Aj-Ai)>0.1){Ak[AA]("title",B(Ak));}else{Ak[AA]("title","");}}function AL(Am,Ai,Aj,Al){var Ak=document.createElement("div");Ak[AA]("class","gm-legend-underLine");Ak.style.width=Al-K+x;Ak.style.left=Ai+5+x;Ak.style.top=Aj+x;Am.appendChild(Ak);}function AX(Al,Ai,Aj){var Ak=document.createElement("div");Ak[AA]("class","gm-legend-underLine-anchorPoint");Ak.style.left=Ai+x;Ak.style.top=Aj-3+x;Al.appendChild(Ak);}function AH(Al,Ai,Aj,Ak){AL(Al,Ai,Aj,Ak);AX(Al,Ai,Aj);}function n(Ak,Av,Ar,Ap,At){var Aq,Al,As,Ai,Au=Z.restoreSpecialChars(Ak.innerHTML),Ao=Au.length,Am=0,Aj=Ao,An=false;if(Ak.scrollHeight>1.5*G){Aq=W(Ak.innerHTML,Av,K);Al=Aq-Ar+K;if(Al>At){while((Aj-Am)>1){As=(Am+Aj)>>1;Ai=Au.substring(0,As)+w;Aq=W(Ai,Av,K);Al=Aq-Ar+K;if(Al>At){Aj=As;}else{Am=As;}}Ak.innerHTML=X.encodeHtmlString(Au.substring(0,Am)+w,true);Ak[AA]("title",Au);An=true;Aq=W(Ak.innerHTML,Av,K);Al=Aq-Ar+K;}AL(Ak,0,Ap+G,(Al<At)?Al:At);}if(Ar>At){Ak[AA]("title",Au);}else{if(!An){Ak[AA]("title","");}}}function z(Ai,Ar,An,Aj,Aq,As){var Ak,Am,Ao,Ap,Al=document.createElement("div");Al[AA]("class","gm-legend-textcell");Al[AA]("type",C.LGD_TEXT);Al.style.lineHeight=d+x;if(Aq){Ap=AI(Al,Ar,As,Aq);}if(Aj&u){Ak=(AJ+AT)/2+An*AJ;Ao=y;}else{Ak=(s+AT)/2+An*s;if(Aj&Ah){if(Aj&Af){Ao=0;}else{Ao=r;}}else{if(Aj&f){Ao=P;}else{Ao=0;}}}Am=Ap||r+K;Al.innerHTML=Ar;Al.identity={objType:AG.LEGEND_TEXT};AH(Ai,Ao,Ak,Am);this.textDivs.push(Al);Ai.appendChild(Al);}function Aa(Ai,Al){var Aj,An,Am,Ak=0;if(Ai){Am=Ai.elements;for(Aj=0,An=Am.length;Aj<An;Aj++){Ak=Math.max(Ak,W(Am[Aj].label,Al,K));}Ak+=y+A*2+AV;}return Ak;}function U(Al,Ak){var Ao,Ai,An,Am=Al.items,Aj=0;if(!Am){return 0;}Ao=Am.length;An=Al.custMetrics;for(Ai=0;Ai<Ao;Ai++){if(An&&An.indexOf(Am[Ai])!==-1){Aj=Math.max(Aj,W(Am[Ai],Ak,K)+P);}else{Aj=Math.max(Aj,W(Am[Ai],Ak,K));}}return Aj;}function AP(Al,Ak){var Ai,An,Am,Aj=0;if(Al){Am=Al.elements;An=Am.length;if(Al.caseFlag===1){Aj=U(Al,Ak);}else{if(Al.caseFlag===0){for(Ai=0;Ai<An;Ai++){Aj=Math.max(Aj,W("Max: "+Am[Ai].v,Ak,K));}Aj+=s*k;Aj=Math.max(Aj,U(Al,Ak));}else{if(Al.caseFlag===2){for(Ai=0;Ai<An;Ai++){Aj=Math.max(Aj,W(Am[Ai].v,Ak,K));}Aj+=s*An+r;Aj=Math.max(Aj,U(Al,Ak));}else{if(Al.caseFlag===3){for(Ai=0;Ai<An;Ai++){Aj=Math.max(Aj,W(Am[Ai].v,Ak,K));}Aj+=s*t;}}}}Aj=Math.max(Aj,W(I,Ak,K));Aj+=A*3;}return Aj;}function c(At,Al,Ax){if(!At||!At.length||At.length<1){return 0;}var Am,Aj,Aw,Ai,Ap,As,Ao,Ar,Aq,Ak,An,Av=l+2*Ae,Au=Av;for(Am=0;Am<At.length;Am++){Ao=At[Am];if(Ao.dataType===AY.COLOR_BY){Ar=Ao.dataObj;if(Ar){Ak=2*AF+G;Aw=Z.removeExtraSpace(Ar.item);As=W(Aw,Ax,K);if((As+2*A>Al-2*Ae)&&H(Aw)){Ak+=G;}Ai=Ar.elements;Aj=Ai.length;Ak+=A;Ak+=g;Av+=Ak+AJ*Aj;Au+=Ak+(Aj>0?AJ:0);}}else{if(Ao.dataType===AY.SIZE_BY){Aq=Ao.dataObj;if(Aq){An=2*AF+G;Aw=Z.removeExtraSpace(Aq.item);As=W(Aw,Ax,K);if((As+2*A>Al-2*Ae)&&H(Aw)){An+=G;}Ap=Aq.caseFlag;if(Ap===1){Aj=0;}else{if(Ap===0){Aj=2;}else{if(Aq.caseFlag===2||Ap===3){Aj=Aq.elements.length;}}}Aj+=(Aq.items&&Aq.items.length)||0;An+=s*Aj;An+=A;An+=g;Av+=An;Au+=An;}}}}return{height:Av,minHeight:Au};}function Ab(Ai,Aj){var Al=0,Ak=0;O.forEach(Ai||[],function(Am){var An;if(Am.dataType===AY.COLOR_BY){An=Aa(Am.dataObj,Aj);if(An>Al){Al=An;}}else{if(Am.dataType===AY.SIZE_BY){An=AP(Am.dataObj,Aj);if(An>Ak){Ak=An;}}}});return Math.max(Al,Ak)+2*Ae;}function h(Aj,Ap,An,Am){var Ak=c(Aj,Ap,Am),Ai=Ak.height,Ao=An-V*2,Al={};Al.autoCollapse=Ak.minHeight>Ao;Al.minHeight=Ak.minHeight;Al.width=Ap;Al.height=Math.min(Ai,Ao);if(Ai>Ao){Al.cutBy=Ai-Ao;}return Al;}function F(Aj,Ak){var Al=Aj.decodedColor||Aj.color,Ai;if(Al.c1){Ai=Ac.buildGradient(Al.or,Al.c1,Al.c2);Ak.style[Ac.convertCssToCamelCase(Ai.n)]=Ai.v;}else{Ak.style.backgroundColor=Al;}if(Aj.image){Ak.style.backgroundImage=Aj.image;}Ak.identity=new e({objType:AG.COLOR_SQUARE,parentIdentity:this.identity,token:Aj.token,decodedColor:Aj.decodedColor,encodedColor:Aj.encodedColor,isDefaultColor:Aj.isDefaultColor});}function AU(){var Ax,Au,As,Ai,At,Az,Aj,Aq,Ao,Al,A1=document,A0=this.triBtn,Aw=this.closeBtn,An=this.cbContainer,Ak=this.sb1Container,Av=this.sb2Container,Ap=this.cbTableContainer,Am=null,Ay=this.height-l-A-2*Ae,Ar=this.width-2*A-2*Ae;A0[AA]("class","gm-legend-tri-button-collapsed");if(this.autoCollapse){A0[AA]("title",mstrmojo.desc(13682,"There is not enough space to display the legend"));}else{A0[AA]("title",mstrmojo.desc(13683,"Maximize Legend"));}Aw.style.display="none";this.splitter.style.display="none";this.domNode.style.overflow="hidden";for(Ax=0;this.dataArray&&Ax<this.dataArray.length;Ax++){Ai=this.dataArray[Ax];if(Ai.dataType===AY.COLOR_BY){Am=Ai.dataObj;break;}}An.style.display=Am?"block":"none";Ak.style.display="none";Av.style.display="none";if(Am){As=Am.elements;Au=As.length;At=this.cbTitle;At.style.display="none";An.style.top=l+x;An.style.width=Ar+x;Ap.style.top="0px";Az=this.cbTable;Az.innerHTML="";for(Ax=0;Ax<Au;Ax++){Aj=A1.createElement("tr");Aq=A1.createElement("td");Al=A1.createElement("div");Ao=A1.createElement("div");Al[AA]("class","gm-legend-colorbox-ctn-div");Al[AA]("type",C.LGD_COLORBOX_CTN);Al[AA]("title",As[Ax].label);Ao[AA]("class","gm-legend-colorbox-div");Ao[AA]("type",C.LGD_COLORBOX);F.call(this,As[Ax],Ao);Aj[AA]("class","gm-legend-tr");Aj.style.height=AJ+x;Aq[AA]("class","gm-legend-colorbox");Al.appendChild(Ao);Aq.appendChild(Al);Aj.appendChild(Aq);Az.appendChild(Aj);if(Az.offsetHeight+AJ>Ay){break;}}Az.style.top="0px";Az.style.marginLeft="0px";Ap.style.top=A+x;Ap.style.height=Az.offsetHeight+x;}An.style.height=Ay+x;}function p(Ak,Aj,Am,Ai){var Al=document.createElementNS(N,"circle");Al.setAttribute("cx",Aj);Al.setAttribute("cy",Am);Al.setAttribute("r",Ai);Al.setAttribute("class","gm-legend-sizeby-circle");Ak.appendChild(Al);}function AD(Ak,Al,Ao,Aj,An,Ap,Am){var Ai=document.createElementNS(N,"line");Ai.setAttribute("x1",Al);Ai.setAttribute("y1",Ao);Ai.setAttribute("x2",Aj);Ai.setAttribute("y2",An);Ai.style.strokeWidth=Ap;if(Am){Ai.setAttribute("class",Am);}Ak.appendChild(Ai);}function AZ(Aj,Ax){var Aw,Ak,Am,An,Al,Ai,Av,Ao,Ay,Ap,At=Math.PI,Aq=Ax.elements,Ar=Aq.length,As=Ar*s,Au=Aj.getContext("2d"),Az={LINE_COLOR:"#b0b0b0",MIN_WIDTH:1,MAX_WIDTH:10},A0=AO.getPropertyByPath(this,"widget.model.data.visName")||AO.getPropertyByPath(this,"widget.model.data.vis.vn");switch(A0){case"GraphMatrixVisualizationStyle":if(this.shapeType===AE.SQUARE||this.shapeType===AE.TICK||this.shapeType===AE.LINE||this.shapeType===AE.BAR||this.shapeType===AE.AREA||this.shapeType===AE.RECTANGLE){Ap="rectangle";}else{Ap="circle";}break;case"VIHeatMapVisualizationStyle":Ap="rectangle";break;default:Ap="circle";break;}switch(Ax.caseFlag){case 0:Au.save();if(mstrApp.getThemeClassName().indexOf("dark")>=0){Au.strokeStyle="rgba(116, 116, 117, 0.7)";Au.fillStyle="rgba(116, 116, 117, 0.7)";}else{Au.strokeStyle="rgba(188, 188, 189, 0.7)";Au.fillStyle="rgba(188, 188, 189, 0.7)";}As=s*k;Ay=Math.floor(s*0.75+0.5);Ak=Math.floor(Ay/3.5+0.5);if(Ap==="circle"){An=Ay+1;Al=s;Au.beginPath();Au.arc(An,Al,Ay,0,2*At,false);Au.fill();Au.stroke();An=2*An+2*Ak;Al=Math.floor(0.53*s+0.5);Au.beginPath();Au.arc(An,Al,Ak,0,2*At,false);Au.fill();Au.stroke();}else{An=1;Al=s-Ay;Au.beginPath();Au.fillRect(An,Al,2*Ay,2*Ay);An=2*Ay+2+Ak;Al=Math.floor(0.53*s-Ak+0.5);Au.beginPath();Au.fillRect(An,Al,2*Ak,2*Ak);}Au.translate(0.5,0.5);Au.lineWidth=1;Au.strokeStyle="#9C9C9C";An=2*Ay+3*Ak+3;Al=Math.floor(0.53*s+0.5);Au.beginPath();Au.moveTo(An,Al);Au.lineTo(As,Al);Au.stroke();An=2*Ay+2;Al=Math.floor(1.53*s-Ak+0.5);Au.beginPath();Au.moveTo(An,Al);Au.lineTo(An+Ak,Al+Ak);Au.lineTo(As,Al+Ak);Au.stroke();Au.restore();break;case 1:break;case 2:Am=parseInt(Aq[0].diameter,10);Am=Math.min(Am,As);Au.fillStyle="#ADADAC";Au.strokeStyle="#ADADAC";if(Ap==="circle"){An=As>>1;Al=An;Au.arc(An,Al,Am>>1,0,2*At,false);Au.fill();Au.stroke();}else{An=(As-Am)>>1;Al=An;Au.rect(An,Al,Am,Am);Au.fill();Au.stroke();}break;case 3:Ai=Az.MIN_WIDTH;Av=(Ar===1?0:(Az.MAX_WIDTH-Az.MIN_WIDTH)/(Ar-1));As=Aj.width;Ao=s;An=0;Al=s/2;Au.strokeStyle=Az.LINE_COLOR;for(Aw=0;Aw<Ar;Aw++){Au.lineWidth=Ai;Au.beginPath();Au.moveTo(An,Al);Au.lineTo(As-An,Al);Au.stroke();Al+=Ao;Ai+=Av;}break;default:break;}}function AW(Aj,Ar){var Ap=1,Ai,An=1.5*G,Aq=Aj.innerHTML,Ao=Z.restoreSpecialChars(Aq),Ak=Ao.split(M),As,Al;var Am=function(At){Al=Ao[At];return Al!==undefined?Al:"";};if(Aj.scrollHeight>An){if(!Ak[0]){return 0;}Ai=Ak[0]+Am(Ak[0].length);while(Ak[Ap]!==undefined){As=Ai+Ak[Ap];As+=Am(As.length);Aj.innerHTML=Z.replaceSpecialChars(As);if(Aj.scrollHeight>An){break;}Ai=As;Ap++;}Aj.innerHTML=Aq;}else{Ai=Ao;}return W(Ai,Ar,K);}function b(Ay,Aw,Ax,As){var Av,Ak,An,Am,Ar,Au,Aq=Aw.elements,At=Aq.length,Ap=[],Az=document,Ai=Az.createDocumentFragment(),Al=false,Ao=this.styles,Aj=Ax;switch(As){case 0:if(At>0){Ap.push({v:"Min: "+Aq[At-1].v});Ap.push({v:"Max: "+Aq[0].v});At=2;}break;case 1:Aq=Aw.items;O.forEach(Aq,function(A0){Ap.push({v:A0});});break;case 3:Ap=Aq;break;default:Ap=Aq;Al=true;break;}At=Ap.length;for(Av=0;Av<At;Av++){Ak=Az.createElement("tr");Ak[AA]("class","gm-legend-tr2");Ak.style.height=s+x;if(Al){An=Az.createElement("td");z.call(this,An,Ap[Av].sign,Av,Q|Ah|Af);An[AA]("class","gm-legend-sign");Ak.appendChild(An);Aj-=r;}Am=Az.createElement("td");Am[AA]("class","gm-legend-desc");if(Aw.custMetrics&&Aw.custMetrics.indexOf(Ap[Av].v)!==-1){z.call(this,Am,Ap[Av].v,Av,Q|f,Aj-P,Ao);Au=parseInt(Am.lastChild.style.width,10);Ar=Az.createElement("div");Ar.setAttribute("class",AR);Ar.setAttribute("title",AN);Am.appendChild(Ar);Ar.style.top=(s-8)/2+Av*s+x;Am.lastChild.style.marginLeft=Au+x;}else{if(Al){z.call(this,Am,Ap[Av].v,Av,Q|Ah,Aj,Ao);}else{z.call(this,Am,Ap[Av].v,Av,Q,Aj,Ao);}}Ak.appendChild(Am);Ai.appendChild(Ak);}Ay.appendChild(Ai);}function T(){var Ak="."+AR,Ai=this.domLegend.querySelectorAll(Ak),Aj;O.forEach(Ai,function(Al){Aj=Al.parentNode;if(Aj){Aj.removeChild(Al);}});}function S(){var BB,A3,BG=0,BH,Ay,A5,Az,Al,A9,BC,Ap,BF,BA,Ai=this.width-2*Ae,At=Ai-2*A,An=document,Ak=this.triBtn,A4=this.closeBtn,A2=this.cbContainer,Au=this.cbTableContainer,BI=this.sb1Container,Ao=this.sb2Container,As,Aq,Am,Ar,A7,Aw,A6=this.cutBy,A1=l,BD=0,A0=this.styles,A8,BE,Ax=(G+AT)/2,Aj,Av;Ak[AA]("class","gm-legend-tri-button");Ak[AA]("title",mstrmojo.desc(13684,"Minimize Legend"));A4.style.display="block";A4[AA]("title",mstrmojo.desc(12002,"Hide Legend"));this.updateSplitter();T.call(this);this.domNode.style.overflow="visible";A2.style.display="none";BI.style.display="none";Ao.style.display="none";for(A3=0;this.dataArray&&A3<this.dataArray.length;A3++){Aq=this.dataArray[A3];A7=null;Aw=null;if(Aq.dataType===AY.COLOR_BY){A7=Aq.dataObj;if(A7){A2.style.display="block";Az=Z.removeExtraSpace(A7.item);Al=A7.elements;BB=Al.length;A2.style.top=A1+x;A2.style.width=At+x;BF=0;if(BD===0){Ac.addClass(this.sepLine1,"toggleHide");BD++;}BH=this.cbTitle;BH.style.display="block";AI(BH,Az,A0,At);BH.innerHTML=X.encodeHtmlString(Az,true);BF+=BH.offsetHeight+2*AF;Aj=AW(BH,A0);n(BH,A0,Aj,Ax,At);AH(BH,0,Ax,(Aj<At)?Aj:At);Ay=this.cbTable;Ay.style.display="block";Ay.style.width=(At-AV)+x;Ay.style.marginLeft=AV+x;Ay.innerHTML="";Ay.appendChild(this.fillColorByTable(A7,0));A9=AJ*BB+1;Au.style.top=BF+x;Ay.style.display="table";BF+=A9+A;if(A6){BF-=A6;A9-=A6;}A2.style.height=BF+x;Au.style.height=A9+x;A1+=BF+g;}}else{if(Aq.dataType===AY.SIZE_BY){Aw=Aq.dataObj;if(Aw){BG++;if(BG===1){Am=BI;Ar=this.sb1Title;A5=this.sb1MetricNamesTable;Ay=this.sb1DataTable;As=this.sb1Canvas;}else{Am=Ao;Ar=this.sb2Title;A5=this.sb2MetricNamesTable;Ay=this.sb2DataTable;As=this.sb2Canvas;}Am.style.display="block";Az=Z.removeExtraSpace(Aw.item);Al=Aw.elements;BB=Al.length;Am.style.top=A1+x;Am.style.width=At+x;BF=0;if(BD===0){Ac.addClass(this.sepLine2,"toggleHide");BD++;}if(Aw.caseFlag===0){BC=k*s;Ap=2*s;}else{if(Aw.caseFlag===3){BC=t*s;Ap=BB*s;}else{BC=BB*s;Ap=BC;}}BH=Ar;BH.innerHTML=X.encodeHtmlString(Az,true);BE=Aw.custMetrics&&Aw.custMetrics.indexOf(Az)!==-1;if(BE){Av=At-P;}else{Av=At;}AI(BH,Az,A0,Av);if(BE){A8=An.createElement("div");A8.setAttribute("class",AR);A8.setAttribute("title",AN);Am.appendChild(A8);A8.style.top=(BH.offsetHeight-8)/2+AF+g+x;A8.style.left=BH.offsetWidth+"px";}Aj=AW(BH,A0);n(BH,A0,Aj,Ax,Av);AH(BH,0,Ax,(Aj<Av)?Aj:Av);BF+=BH.offsetHeight+2*AF;BA=At;A5.innerHTML="";if(Aw.items&&Aw.items.length>0){A5.style.display="block";b.call(this,A5,Aw,BA,1);}else{A5.style.display="none";}A5.style.top=BF+x;A5.style.left="0"+x;A5.style.width=BA+x;BF+=A5.offsetHeight;if(BC>0){BA-=BC+A;}Ay.innerHTML="";if(Aw.elements&&Aw.elements.length>0){Ay.style.display="block";b.call(this,Ay,Aw,BA,Aw.caseFlag);}else{Ay.style.display="none";}As.style.position="absolute";As.style.top=BF+x;As.style.marginLeft=A+x;Ay.style.top=BF+x;Ay.style.left=(BC+A)+x;Ay.style.width=BA+x;BF+=Ay.offsetHeight+A;Am.style.height=BF+x;Ay.style.display="table";As.width=BC;As.height=Ap;AZ.call(this,As,Aw);A1+=BF+g;}}}}}function q(){var Ai,Aj=this.textDivs,Ak=Aj.length;for(Ai=0;Ai<Ak;Ai++){a(Aj[Ai]);}}mstrmojo.gm.GMLegend=mstrmojo.declare(mstrmojo.VisLegend,[mstrmojo._FormateVisLegend,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.gm.GMLegend",cssClass:"gm-legend",dropZoneHighlightCss:"gm-legend-slot",dockedPositions:[{pos:o.LEFT_TOP},{pos:o.LEFT_MIDDLE},{pos:o.LEFT_BOTTOM},{pos:o.RIGHT_TOP},{pos:o.RIGHT_MIDDLE},{pos:o.RIGHT_BOTTOM}],dockPos:AM.LEFT,GMW:0,GMH:0,isMinimal:false,shapeType:undefined,legendMarkup:'<div class="gm-legend-tri-button"></div><div class="gm-legend-close-button"></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><div class="gm-legend-table-container"><table class="gm-legend-table"></table></div></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-resizer-v" draggable="false"></div><div class="gm-legend-resizeRect"></div>',init:function AC(Aj){this.styles={};this.cutBy=null;this.dataArray=null;this.textDivs=[];var Ak=Aj.placeholder,Ai=Ak.style;if(Ak){this.cssClass=Ak.getAttribute("class");if(!this.cssClass){this.cssClass="";}if(Aj.hasOwnProperty("width")===false){Aj.width=(Ai&&Ai.width)||Ak.clientWidth;}if(Aj.hasOwnProperty("height")===false){Aj.height=(Ai&&Ai.height)||Ak.clientHeight;}if(Aj.hasOwnProperty("left")===false){Aj.left=Ak.offsetLeft;}if(Aj.hasOwnProperty("top")===false){Aj.top=Ak.offsetTop;}}this._super(Aj);},setupScrollNodes:function L(){this.scrollNode=this.cbTableContainer;},getSplitterDockPos:function(){return(this.currDockedPositionIdx<3)?AM.RIGHT:AM.LEFT;},updateAlignClass:function(){var Am=this.getDockedPosition(),An=Am&&Am.pos,Ak=(An===o.RIGHT_MIDDLE||An===o.RIGHT_TOP||An===o.RIGHT_BOTTOM||An===o.RIGHT),Ai=this.domLegend,Aj=this.domNode,Al=this.resizeRect;if(Ak){Ac.removeClass(Ai,"gm-align-left");Ac.addClass(Ai,"gm-align-right");Ac.toggleClass(Ai,"gm-legend-alignRight",true);Ac.toggleClass(Ai,"gm-legend-alignLeft",false);Ac.toggleClass(Aj,"gm-legend-alignRight",true);Ac.toggleClass(Aj,"gm-legend-alignLeft",false);Ac.toggleClass(Al,"gm-legend-alignRight",true);Ac.toggleClass(Al,"gm-legend-alignLeft",false);}else{Ac.removeClass(Ai,"gm-align-right");Ac.addClass(Ai,"gm-align-left");Ac.toggleClass(Ai,"gm-legend-alignRight",false);Ac.toggleClass(Ai,"gm-legend-alignLeft",true);Ac.toggleClass(Aj,"gm-legend-alignRight",false);Ac.toggleClass(Aj,"gm-legend-alignLeft",true);Ac.toggleClass(Al,"gm-legend-alignRight",false);Ac.toggleClass(Al,"gm-legend-alignLeft",true);}},postBuildRendering:function(){this._super();var Au=this.styles,Aw=this.domNode,Al=this.domLegend.childNodes,Ap=Al[2],An=Al[3],Av=Al[4],Az={objType:AG.LEGEND};this.addSlots({triBtn:Al[0],closeBtn:Al[1],cbContainer:Al[2],sepLine1:Ap.firstChild,cbTitle:Ap.childNodes[1],cbTableContainer:Ap.childNodes[2],cbTable:Ap.childNodes[2].firstChild,sb1Container:An,sepLine2:An.firstChild,sb1Title:An.childNodes[1],sb1MetricNamesTable:An.childNodes[2],sb1DataTable:An.childNodes[3],sb1Canvas:An.childNodes[4],sb2Container:Av,sepLine3:Av.firstChild,sb2Title:Av.childNodes[1],sb2MetricNamesTable:An.childNodes[2],sb2DataTable:Av.childNodes[3],sb2Canvas:Av.childNodes[4],splitter:Al[5],resizeRect:Al[6]});Ad.GMLegend.applyHTML5Props(Au);this.bgColor=Au.background||Au.backgroundColor||"transparent";AO.applyStyle2Legend(Au,Aw,this.domLegend);var Ao=this.getSplitterDockPos(),Ay=this.width-2*A-2*Ae,Aq=this.cbTitle,Aj=Aq.style,Ak=this.sb1Title,Am=this.sb2Title,Ax=Ak.style,Ai=Am.style,At=this.sepLine1,As=this.sepLine2,Ar=this.sepLine3;At.style.width=Ay+x;As.style.width=Ay+x;Ar.style.width=Ay+x;Aj.lineHeight=G+x;Ax.lineHeight=G+x;Ai.lineHeight=G+x;Aj.maxHeight=2*G+x;Ax.maxHeight=2*G+x;Ai.maxHeight=2*G+x;Aq.identity={objType:AG.LEGEND_TEXT,parentIdentity:Az};Ak.identity={objType:AG.LEGEND_TEXT,parentIdentity:Az};Am.identity={objType:AG.LEGEND_TEXT,parentIdentity:Az};this.dockPos=Ao;this.identity=Aw.identity=Az;this.updateAlignClass();},feedData:function(Ai,Aj){this.dataArray=Ai;this.isMinimal=Aj;this.textDivs=[];Ad.GMLegend.applyHTML5Props(this.styles);this.autoCollapseLegend();if(Aj||this.autoCollapse){AU.call(this);this.draggable=false;}else{S.call(this);this.draggable=true;}q.call(this);this.updateScrollbars();},autoCollapseLegend:function(){this.autoCollapse=this.minHeight&&(this.minHeight>(this.GMH-V*2));},updateColorBySquare:function(Ak){var Al,Am,Aj,Ai;if(Ak){Ai=this.domNode.querySelectorAll(".gm-legend-colorbox-div");Al=Ak.elements;Am=Math.min(Al.length,Ai.length);for(Aj=0;Aj<Am;Aj++){F.call(this,Al[Aj],Ai[Aj]);}}},updateContainerSize:function(Ai,Aj){this.GMW=Ai;this.GMH=Aj;this.calculateDockedPositions(Ai,Aj);},updateAfterResize:function(){Ad.GMLegend.applyHTML5Props(this.styles);var An=0,Am=this.width,Ao=this.cbContainer,Aq=this.sb1Container,Ak=this.sb2Container,Al=this.sepLine1,Aj=this.sepLine2,Ai=this.sepLine3,Ap=Am-2*A-2*Ae;O.forEach(this.dataArray||[],function(Ar){if(Ar.dataType===AY.COLOR_BY){if(Ar.dataObj){if(Ao){Ao.style.width=Ap+x;}}}else{if(Ar.dataType===AY.SIZE_BY){if(Ar.dataObj){An++;if(An===1&&Aq){Aq.style.width=Ap+x;}if(An===2&&Ak){Ak.style.width=Ap+x;}}}}});if(Al){Al.style.width=Ap+x;}if(Aj){Aj.style.width=Ap+x;}if(Ai){Ai.style.width=Ap+x;}this.domLegend.style.width=this.width+x;this.domLegend.style.height=this.height+x;},updateStyle:function(Ai){this.styles=Ai;this.bgColor=Ai.background||Ai.backgroundColor||"transparent";AO.applyStyle2Legend(Ai,this.domNode,this.domLegend);},updateTitleLineHeight:function(){var Aj=this.cbTitle,Am=Aj.style,Ak=this.sb1Title,Ai=this.sb2Title,An=Ak.style,Al=Ai.style;Ad.GMLegend.applyHTML5Props(this.styles);Am.lineHeight=G+x;An.lineHeight=G+x;Al.lineHeight=G+x;Am.maxHeight=2*G+x;An.maxHeight=2*G+x;Al.maxHeight=2*G+x;},getSplitterPosition:function(Ak){var Aj=Ak.src.startPos+Ak.tgt.pos.x-Ak.src.pos.x,Am=Ak.src.posInfo,Al=Am&&Am.min,Ai=Am&&Am.max;if(Al!==undefined){Aj=Math.max(Aj,Al);}if(Ai!==undefined){Aj=Math.min(Aj,Ai);}return Aj;},positionResizeRect:function(Ai,Aj){var Al=Ai.src.posInfo.dockPosition===AM.LEFT,Am=Aj-AQ,An=Al?Am:0,Ak=Al?this.width-Am:Am;this.resizeRect.style.left=(An-1)+x;this.resizeRect.style.width=(Ak-2)+x;},updateLegendSlot:function(Al,Ai){var Ak=this.getDockedPosition(),Aj=Ak&&Ak.pos;if(Aj!==Al){this.currDockedPositionIdx=Ai;this.dockPos=this.getSplitterDockPos();this.updateDropZonePosition();this.updateAlignClass();this.updateSplitter();this.widget.onLegendDropZoneChange(this.getDockedPosition());}},ondragstart:function(Ai){var Ak=Ai.src.e.target,Aj=Ai.src.data;if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(false);}if(Ak===this.splitter){Ai.src.startPos=Ak.offsetLeft;Ai.src.posInfo=this.getSplitterInfo(Ak);this.positionResizeRect(Ai,Ai.src.startPos);Ac.addClass(this.resizeRect,"resizing");}else{this.cbTableScrollTop=this.cbTableContainer.scrollTop;this._super(Ai);if(!Aj||!Aj.isScrollBar){this.clearSelectedTargets();Ac.toggleClass(this.domNode,"gm-legend-hover",false);Ac.toggleClass(this.domLegend,"active",false);this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background=this.bgColor;this.isDragging=true;}}},ondragmove:function D(Ai){var Ak=Ai.src.e.target,Aj;if(Ak===this.splitter){Aj=this.getSplitterPosition(Ai);Ak.style.left=Aj+x;this.positionResizeRect(Ai,Aj);}else{this._super(Ai);}},ondragend:function(Ai){var Ak=Ai.src.e.target;if(Ak===this.splitter){Ac.removeClass(this.resizeRect,"resizing");this.splitterMoved(this.getSplitterPosition(Ai)-Ai.src.startPos,Ai.src.posInfo);}else{this._super(Ai);var Aj=Ai.src.data;if(!Aj||!Aj.isScrollBar){this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background="transparent";this.isDragging=false;}delete this.cbTableScrollTop;}if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},onscroll:function(){var Aj,An,Am=this.scrollNode.scrollTop,Al,Ak,Ai;if(this.prevScrpllTop===Am){return ;}An=(this.dataArray&&this.dataArray.length)||0;for(Aj=0;Aj<An;Aj++){Ak=this.dataArray[Aj];if(Ak.dataType===AY.COLOR_BY){Ai=Ak.dataObj;break;}}if(Ai){Al=this.cbTable;Al.innerHTML="";Al.appendChild(this.fillColorByTable(Ai,Math.floor(Am/AJ)));this.prevScrpllTop=Am;this.scrollNode.scrollTop=Am;this._super();}},fillColorByTable:function(Ay,Ao){var Az,Aw,Ak,An,Am,Ap,Aq,Ar=this.styles,Ai,Au=this.cutBy,As=this.width-2*Ae-2*A,At,Al,Aj,A0,Av;At=Ay.elements;Aw=At.length;Ai=document.createDocumentFragment();Al=As-y-AV;Aj=0;A0=AJ*Aw;Av=Ao*AJ;function Ax(A1){Ak=document.createElement("tr");An=document.createElement("td");Ak.style.height=A1+x;An[AA]("class","gm-legend-colorbox");Ak.appendChild(An);Ai.appendChild(Ak);}if(Ao>0){Ax(Av);}for(Az=Ao;Az<Aw;Az++){Ak=document.createElement("tr");An=document.createElement("td");Am=document.createElement("td");Ap=document.createElement("div");Aq=document.createElement("div");Ap[AA]("class","gm-legend-colorbox-ctn-div");Ap[AA]("type",C.LGD_COLORBOX_CTN);Aq[AA]("class","gm-legend-colorbox-div");Aq[AA]("type",C.LGD_COLORBOX);F.call(this,At[Az],Aq);Ak[AA]("class","gm-legend-tr");Ak.style.height=AJ+x;An[AA]("class","gm-legend-colorbox");Am[AA]("class","gm-legend-desc");z.call(this,Am,At[Az].label,Az,u,Al,Ar);Ap.appendChild(Aq);An.appendChild(Ap);Ak.appendChild(An);Ak.appendChild(Am);Ai.appendChild(Ak);Aj+=AJ;if(Au&&(Au+Aj-AJ)>A0){Ax(A0-Aj-Av);break;}}return Ai;},calculateDockedPositions:function(Aj,Am){var Al,Ao=this.getWidth(),Ai=this.getHeight(),Ak=this.dockedPositions,An=function(Ap){switch(Ap.pos){case j.LEFT_TOP:Ap.x=0;Ap.y=V;break;case j.LEFT_MIDDLE:Ap.x=0;Ap.y=Math.max(V,(Am-Ai)>>1);break;case j.LEFT_BOTTOM:Ap.x=0;Ap.y=Math.max(0,Am-Ai-V);break;case j.RIGHT_TOP:Ap.x=Aj-Ao;Ap.y=V;break;case j.RIGHT_MIDDLE:Ap.x=Aj-Ao;Ap.y=Math.max(V,(Am-Ai)>>1);break;case j.RIGHT_BOTTOM:Ap.x=Aj-Ao;Ap.y=Math.max(0,Am-Ai-V);break;}};for(Al=0;Al<Ak.length;Al++){An(Ak[Al]);}this.updateDropZonePosition();},updateDropZonePosition:function(){var Ai=this.getDockedPosition(),Aj=this.dropZoneNode.style;Aj.left=Ai.x+x;Aj.top=Ai.y+x;},updateDropZoneNode:function(Ai){this._super(Ai);this.dockPos=this.getSplitterDockPos();this.updateSplitter();},onmouseover:function(Ai){var Ak=this.domLegend,Ao=Ai.getTarget(),Al=Ao.getAttribute("type"),An=this.widget,Aj;if(this.isDragging){return ;}var Am=R.copy(this.styles);Am.opacity+=0.4;AO.applyStyles2DomNode(this.domNode,Am);if(AB.contains(Ak,Ao,true)){Ac.addClass(Ak,"active");}if(Al===C.LGD_COLORBOX){Ao=Ao.parentNode;Al=Ao.getAttribute("type");}if(Al===C.LGD_COLORBOX_CTN){Aj=Ao.firstChild.identity;if(!Aj||!Aj.comb){return ;}Ac.toggleClass(Ao,"hover-colorsquare",true);return ;}if(An.formattingMode){switch(Al){case C.LGD_TITLE:case C.LGD_TEXT:Ac.toggleClass(Ak,"hover-txt",true);break;default:Ac.toggleClass(this.domNode,"gm-legend-hover",true);break;}}},onmouseout:function(Aj){var Al=this.domLegend,Ai=Aj.e.toElement||Aj.e.relatedTarget,Ao=Aj.getTarget(),Am=Ao.getAttribute("type"),An=this.widget,Ak;AO.applyStyles2DomNode(this.domNode,this.styles);if(!AB.contains(Al,Ai,true)){Ac.removeClass(Al,"active");}if(Am===C.LGD_COLORBOX){Ao=Ao.parentNode;Am=Ao.getAttribute("type");}if(Am===C.LGD_COLORBOX_CTN){Ak=Ao.firstChild.identity;if(!Ak||!Ak.comb){return ;}Ac.toggleClass(Ao,"hover-colorsquare",false);return ;}if(An.formattingMode||An.isOnFormattingMode){switch(Am){case C.LGD_COLORBOX_CTN:case C.LGD_COLORBOX:break;case C.LGD_TITLE:case C.LGD_TEXT:Ac.toggleClass(Al,"hover-txt",false);break;default:Ac.toggleClass(this.domNode,"gm-legend-hover",false);break;}}},onclick:function(Ai){var Al=Ai.getTarget(),Aj=Al.getAttribute("type"),Ak=this.widget;if(Al===this.triBtn){if(!this.autoCollapse){this.raiseEvent({name:"gm-legend-clicked",action:(this.isMinimal?"restore":"minimize")});}}else{if(Al===this.closeBtn){this.raiseEvent({name:"gm-legend-clicked",action:"close"});}else{if(Aj===C.LGD_COLORBOX){Al=Al.parentNode;Aj=Al.getAttribute("type");}if(Ak.formattingMode||Ak.isOnFormattingMode){if(Aj===C.LGD_COLORBOX_CTN){this.selectColorBox(Al,true);}else{if(Aj===C.LGD_TEXT||Aj===C.LGD_TITLE){this.selectText();}else{this.selectLegendBody();}}}else{this.clearSelectedColorBox();}}}AB.stopPropogation(null,Ai.e);},attachClearEvent:function(){if(this.clearSelectTargetfn){return ;}var Aj=this,Ai=this.domLegend;this.clearSelectTargetfn=function(An){var Am=An.target,Ak=Aj.widget.toolEditor,Al;if(!AB.contains(Ai,Am,true,Ai)){if(Ak){Al=Ak.domNode;if(!AB.contains(Al,Am,true,Al)){Aj.clearSelectedTargets();}}else{Aj.clearSelectedTargets();}}};AB.attachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);},clearSelectedColorBox:function(){var Ai=this.selectedColorBox;if(Ai){Ac.toggleClass(Ai,"select",false);Ac.toggleClass(Ai,"selectfmt",false);this.selectedColorBox=undefined;}},clearSelectedText:function(){Ac.removeClass(this.domNode,"select-txt");},clearSelectedLegendBody:function(){Ac.removeClass(this.domNode,"gm-legend-select");},clearSelectedTargets:function(){this.clearSelectedColorBox();this.clearSelectedText();this.clearSelectedLegendBody();if(this.clearSelectTargetfn){AB.detachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);delete this.clearSelectTargetfn;}},selectColorBox:function(Ak,Aj){var Ai=Ak.firstChild.identity;if(!Ai||!Ai.comb){return ;}this.clearSelectedText();this.clearSelectedLegendBody();if(this.selectedColorBox!==Ak){this.clearSelectedColorBox();this.selectedColorBox=Ak;if(Aj){Ac.toggleClass(Ak,"selectfmt",true);}else{Ac.toggleClass(Ak,"select",true);}this.attachClearEvent();}},selectText:function(){this.clearSelectedColorBox();this.clearSelectedLegendBody();Ac.addClass(this.domNode,"select-txt");this.attachClearEvent();},selectLegendBody:function(){this.clearSelectedColorBox();this.clearSelectedText();Ac.addClass(this.domNode,"gm-legend-select");this.attachClearEvent();},adjustColorPickerPos:function(Ai){var Al=AB.position(Ai),Aj=0,Ak={};if(this.currDockedPositionIdx<3){Ak.x=Al.x+Al.w+Aj;Ak.alignLeft=true;}else{Ak.x=Al.x-Aj;Ak.alignLeft=false;}Ak.y=Al.y+Al.h+Aj;return Ak;},getSplitterInfo:function(An){if(!An){return{};}var Aj=this.dockPos,Am={},Al=this.width,Ai=AK,Ak=Math.floor(this.GMW/3);Am.dockPosition=Aj;if(Aj===AM.LEFT){Am.min=Math.min(Al-Ak,0);Am.max=Math.max(Al-Ai,0);}else{if(Aj===AM.RIGHT){Am.min=Ai;Am.max=Ak;}}Am.min+=AQ;Am.max+=AQ;return Am;},splitterMoved:function(Ai,Aj){if(Ai===0){return ;}if(Aj.dockPosition===AM.LEFT){Ai=-Ai;}this.raiseEvent({name:"gm-legend-resized",position:Ai});this.updateSplitter();if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},updateSplitter:function(){AS(this.splitter,this.dockPos,this.width,this.height);this.resizeRect.style.height=this.height-2+x;}});Ad.GMLegend.applyHTML5Props=function(Ak){var Al=parseInt(Ak.fontSize,10)||8,Aj;if(Ak.fontSize.indexOf("px")>=0){Al=Math.floor(Al*Y+0.5);}Aj=Math.floor(Al/Y*E+0.5);G=Math.max(Al,8)+9;AT=Math.floor(Al/Y+0.5);d=Math.max(Aj,15);AJ=Math.max(Aj,20)+2;s=Math.max(Aj,14)+2;Ae=parseInt(Ak.borderWidth,10)||1;var Ai=parseInt(Ak.tbHeight,10);l=isNaN(Ai)?J:Ai;};Ad.GMLegend.getLegendSize4MinMode=function(Aj,Ak){var Am,Al,Ai=l+2*Ae;if(Aj){Al=Aj.elements;Am=Al.length;Ai+=AJ*Am;Ai+=2*A;}Ai=Math.min(Ai,Ak-V*2);return{width:y+5+7+2*Ae,height:Ai};};Ad.GMLegend.getLegendSize=function(Aw,Al,Ai,Ao,Ay,Ap){var Aq,Aj,Ax,An,Am=Ao-V*2,Au=0,Ak=0,At={},As,Ar,Av;if(!Aw||!Aw.length||Aw.length<1){return{};}if(Al!==undefined){if(!Ap){Ap=Math.floor(Ab(Aw,Ay)*Al);}An=Math.min(Ap,Math.floor(Ai/3));An=Math.max(An,50);return h(Aw,An,Ao,Ay);}An=Math.min(Math.floor(0.2*Ai),300);for(Aq=0;Aq<Aw.length;Aq++){Ar=Aw[Aq];if(Ar.dataType===AY.COLOR_BY){As=Aa(Ar.dataObj,Ay);if(As>Au){Au=As;}}else{if(Ar.dataType===AY.SIZE_BY){As=AP(Ar.dataObj,Ay);if(As>Ak){Ak=As;}}}}Aj=Math.max(Au,Ak)+2*Ae;At.width=Math.min(Aj,An);At.scale=At.width/Aj;Av=c(Aw,At.width,Ay);Ax=Av.height;At.autoCollapse=Av.minHeight>Am;At.minHeight=Av.minHeight;At.height=Math.min(Ax,Am);if(Ax>Am){At.cutBy=Ax-Am;}return At;};}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFontAlignment","EnumFontStyle","EnumFontRotation","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMAxisScale");var AP=mstrmojo.chart,V=mstrmojo.hash,AY=mstrmojo.gm,Ac=AY.GMUtility,O=mstrmojo.VisUtility,P=AY.EnumGraphType,D=AY.EnumSubtype,M=AY.EnumABLDirection,j=AY.EnumColorByType,Z=AY.EnumShape,s=AY.EnumGMZoneIds,T=mstrmojo.array,o=AY.EnumIdentityType,K=AY.FormatingPropertyTag,b=AY.WidgetPropertyTag,AX=false,J=3,AV=4,E=mstrmojo.gm.ShapeFillType,AO=true;function AK(){var Am=this.dp,Al=Am.lds,Af=this.groupData.length,Aj=[],Ai=Al.getOffsetX(),Ag=Al.getOffsetY(),Ak,Ah;for(Ak=0;Ak<Af;Ak++){Aj.push(this.groupData[Ak].C-Ai);}Ah=this.groupData[0].R-Ag;return{lr:Ah,lcs:Aj};}function AE(Aj){var Af=parseInt(Aj,10),Am=this.dp,Ai=Am.lds,Ah=Ai.gmm,Ag=Am.getMetricIds(),Al,Ak=Am.getMetricNames();if(Af<0){return undefined;}Al=Ah.getFullNumberFormat();return{idx:Af,metric:Ak[Af],id:Ag[Af],fullNf:Al!==undefined?Al[Af]:undefined};}function AQ(Ao,Ai){var Ah=this.dataSbc,Af,Aj,Ar,Ag=this.getChartInfo(),Ak=this.lds,Al=Ak.gmm,Aq=Al.onlyMetricNamesOnAxisForGridPie,Ap=Al.isMetricNamesOnXAxis,Am=-1;if(Ah===true){Aj=parseInt(Ao,10);Af=parseInt(Ai,10);}else{Af=parseInt(Ao,10);Aj=parseInt(Ai,10);}if(this.cache[Af]===undefined){this.cache[Af]=[];}if(this.cache[Af][Aj]!==undefined){return this.cache[Af][Aj];}if(Aq){if(Ap){Am=this.metricsOnAngleBy[Af];}else{Am=this.metricsOnAngleBy[Aj];}}Ar=this.data[Af][Aj];var An=null;if(Ar){An=new u({groupData:Ar,dp:this,chtInfo:Ag,metricsOnAngleBy:Aq?[Am]:this.metricsOnAngleBy,splitPie:this.splitPie,sID:Ao,gID:Ai,metricIndexForLabelForGridPie:Am});this.cache[Af][Aj]=An;}return An;}function X(Al){var As=this,Aj,An=this.dp.lds,Aq=An.gmm,Ak=[s.XAXIS,s.YAXIS,s.COLORBY,s.SIZEBY,s.TOOLTIP],Ag=this.chtInfo,Ao,Am=Al.length;function At(Au){var Av=[];T.forEach(Au,function(Aw){if(Aw.toDelete!==true){Av.push(Aw);}});return Av;}function Ap(Au){if(Aq.isMetricInZone(Al[Aj].midx,Au)){Ao.push(Au);}}if(Ag.isABL){var Ah=As.getMetricIndex(0);var Af=Ag.dirc===M.VERTICAL?s.YAXIS:s.XAXIS;for(Aj=0;Aj<Am;Aj++){Ao=[];T.forEach(Ak,Ap);if(Ao.length===0){Al[Aj].toDelete=true;}if(Ao.length===1&&Ao[0]===Af){if(Ah!==Al[Aj].midx){Al[Aj].toDelete=true;}}}}if(Ag.isBubbleOrScatter){var Ai=[];this.getMetricsIndexArray(Ai);for(Aj=0;Aj<Am;Aj++){Ao=[];T.forEach(Ak,Ap);if(Ao.length===0){Al[Aj].toDelete=true;}if(!!!Al[Aj].toDelete&&Ai.indexOf(Al[Aj].midx)<=-1){if(Ao.indexOf(s.TOOLTIP)===-1&&Ao.indexOf(s.COLORBY)===-1){Al[Aj].toDelete=true;}}}}if(Ag.isPie){var Ar=[s.XAXIS,s.YAXIS,s.SIZEBY];for(Aj=0;Aj<Am;Aj++){if(Al[Aj].toDelete===true){continue;}Ao=[];T.forEach(Ar,Ap);if(Ao.length===0){Al[Aj].toDelete=true;}}}return At(Al);}function AD(Af){return(Af.R!==undefined&&Af.C!==undefined&&Af.oy!==undefined&&Af.ox!==undefined);}function AU(Ax,BB,A7){var A5=this.dp.lds,BJ=this.chtInfo,Ah=A5.gmm,BC=Ah.gmCtr,Ak=BC.rowHeaderCnt,Ag=BC.colHeaderCnt,A6,A9,Aq=Ah.getUnitAttributesCountOnRow(true),Aj=Ah.getUnitAttributesCountOnCol(true),Au=BC.getGMHeaderCount("SliceBy"),A1=Aq,Ap=Aj,As,Af,BE=Ax.length===0,Al,BL,BH,Ai,BK=Ah.getMetricNames(),Ay=BK.length,BD,A4,At;var BF=this.groupData[0],A2=A5.getOffsetX(),A0=A5.getOffsetY(),A3=BF.R-A0,A8=BF.C-A2;As=Aq-Ak;Af=Aj-Ag;if(Au>0&&BJ.isPie){if(BJ.isABL&&BJ.dirc===AY.EnumABLDirection.HORIZONTAL){Af-=Au;Ap-=Au;}else{As-=Au;A1-=Au;}}if(As>0){A6=A5.getRowHeaders(A3,"all",BB===true?"n&id&dei&o&at&idx":"n&idx");Al=Ah.getRowTitleInfo();if(Ax.length>0){if(!BB){Ax.push(null);}BE=true;}Ac.generateToolTipContent(Ak,A1,true,Al,A6,Ax,!BB);}if(Af>0){A9=A5.getColHeaders(A8,"all",BB===true?"n&id&dei&o&at&idx":"n&idx");BL=Ah.getColTitleInfo();if(!BE&&Ax.length>0){if(!BB){Ax.push(null);}BE=true;}Ac.generateToolTipContent(Ag,Ap,false,BL,A9,Ax,!BB);}if(!BB&&Ay>0){if(!BE&&Ax.length>0){if(!BB){Ax.push(null);}BE=true;}A4=[];Ai=[];Ai.push(A8);for(BH=0;BH<Ay;BH++){BD=A5.getAssoDataWithMetricIndex(A3,Ai,BH,false);A4.push({n:BK[BH],v:BD,midx:BH});}A4=X.call(this,A4);At=A4.length;for(BH=0;BH<At;BH++){Ax.push(A4[BH]);}if(BJ.isABL&&BJ.sbtp===D.PERCENT){var Am=BF.grp,Ao=this.dp.getTotalOfGroup(Am),BA=this.getData(0),An=mstrmojo.desc(14141,"Percent Contribution"),Az=BA/Ao;Az=(Az*100).toFixed(2)+"%";Ax.push({n:An,v:Az,isPerCon:true});}}if(BB&&A7){var Aw=[],BG,Ar,Av,BI;this.getMetricsIndexArray(Aw);Aw=Aw.slice(0,this.groupData.length);Ar=Aw.length;Av=Ah.getMetricIDsFromIndex(Aw);BI=Ah.getMetricNamesFromIndex(Aw);for(BG=0;BG<Ar;BG++){Ax.push({eid:Av[BG],n:"Metrics",tid:-1,v:BI[BG]});}}return Ax;}function Aa(Ai,Ak){var Ah=Ai.getOffsetX(),Af=Ai.getOffsetY(),Ag=Ak.R-Af,Aj=Ak.C-Ah;return Ai.getData(Ag,Aj);}function R(Ai,Al){var Ak=this.isPie,Aj=this.gc,Af=this.sPieDP,Ah=this.sliceIdx,Ag;if(!Ak){Ag=Aj.getTooltipContent(Ai,Al);}else{Ag=Af.getTooltipContent(Ah,Ai,Al);}return Ag;}function AM(Ah,Ai){var Ag,Af;if(Ah){Af=Ah.length;for(Ag=0;Ag<Af;Ag++){if(Ah[Ag].id===Ai){return Ag;}}}return -1;}function AC(Ag,Af){var Aj,Ah=[],Ai;Aj=this.getSelectedObjectInfo(Af);Ai=Ac.reverseMapping(Ag);T.forEach(Aj,function(Ak){if(Ak.tid===-1){Ah.push(Ak);}else{if(Ai[Ak.tid]!==undefined){Ah.push(Ak);}}});return Ah;}var f=mstrmojo.declare(mstrmojo.Base,null,{init:function AF(Ak){this._super(Ak);var Ao=this.gc,An,Ap,Ai,Am,Aq,Af,Ah,Aj=-1,Ag=-1;if(this.isFaked){return ;}An=Ao.dp.lds.gmm.gmCtr;Ap=An.dz;Ai=this.hInfo;if(Ai.isAtt===false){return ;}Am=Ai.unit;Aq=["XAxis","YAxis"];if(Am.otp!==4){for(Ah=0;Ah<Aq.length;Ah++){Af=Ap[Aq[Ah]];var Al=AM(Af.TemplateUnit,Am.id);if(Al>=0){Ag=Al;if(Ah===0){Aj=J;}else{Aj=AV;}break;}}this.dzindex=Ag;this.dzid=Aj;}}});var AA=mstrmojo.declare(mstrmojo.Base,null,{getGraphCell:function(){var Af;if(this.isPie){Af=this.sPieDP.graphCell;}else{Af=this.gc;}return Af;},getShape:function(){var Af=this.getChartInfo();if(Af.isABL){return this.getGraphCell().getShape();}return Af.shape;},getAssMetricDataLabelID:function(){var Aj,Ah=this.getGraphCell(),Ai=Ah.getGMCtr(),Ak=Ah.chtInfo;if(this.isPie===false){if(Ak.isABL){Aj=Ah.getMetric(0);}else{if(Ak.tp===P.BUBBLE||Ak.tp===P.SCATTER){Aj=Ah.getMetric(1);}else{if(!Ai.hasSizeBy()){Aj=undefined;}else{Aj=AE.call(Ah,Ai.getSizeByMetrics()[0]);}}}}else{var Af=this.sPieDP,Ag=this.sliceIdx;Aj=Af.getMetric(Ag);}if(Aj!==undefined){return Aj.id;}return undefined;},getTooltipContent:function(){return R.call(this,false);},getSelectedObjectInfo:function(Ai){var Ah=Ai?"objectInfoWithMetric":"objectInfo";if(this[Ah]){return this[Ah];}var Af=R.call(this,true,Ai),Ag=[];T.forEach(Af,function(Aj){if(Aj){Ag.push(Aj);}});if(Ag.length>1){Ag.sort(Ac.compareElementObj);}this[Ah]=Ag;return Ag;},getSelectedObjectMetricInfo:function(Ah){if(this.objectMetricInfo){return this.objectMetricInfo;}var Ag,Af=[];if(Ah){Ag=Ah;}else{Ag=this.getSelectedObjectInfo(true);}T.forEach(Ag,function(Ai){if(Ai.tid===-1){Af.push(Ai);}});this.objectMetricInfo=Af;return Af;},getSelectedObjectColorByInfo:function(){if(this.objectColorByInfo){return this.objectColorByInfo;}var Aj=[],Ak,Ah,Al,Am,Ai,Ag=false;if(this.isPie){Ak=this.sPieDP.graphCell;}else{Ak=this.gc;}Ah=Ak.dp.lds.gmm;Al=Ah.gmCtr;if(Ah.colorType!==j.NULL){Am=Al.getColorByAttrsID();if(Ah.colorType===j.ATT_METRICS||Ah.colorType===j.METRICS_ITEM){Ag=true;}Aj=AC.call(this,Am,Ag);Ai=Al.colorByInfo.tp;if(Ai===j.METRICS_ITEM||Ai===j.ATT_METRICS){if(Ak&&Ak.chtInfo&&Ak.chtInfo.isBubbleOrScatter){var Af=Ak.getSizeByMetricFormat();if(Af){Aj.push({eid:Af.id,n:"Metrics",tid:-1,v:Af.metric});}}}}this.objectColorByInfo=Aj;return Aj;},getSelectedObjectBreakByInfo:function(Al){var Ak=Al?"objectBreakByInfoWithMetric":"objectBreakByInfo";if(this[Ak]){return this[Ak];}var Ag,Ah,Af,Ai,Aj,Am;if(this.isPie){Ah=this.sPieDP.graphCell;}else{Ah=this.gc;}Af=Ah.dp.lds.gmm;Ai=Af.gmCtr;Aj=Ai.getColorByAttrsID();Am=Ai.getBreakByAttrsID();Ag=AC.call(this,Am.concat(Aj),Al);this[Ak]=Ag;return Ag;},getSelectedObjectSliceByInfo:function(Ag){var Ai=Ag?"objectSliceByInfoWithMetric":"objectSliceByInfo";if(this[Ai]){return this[Ai];}var Aj,An,Ah,Am,Af,Ak,Al;if(this.isPie){An=this.sPieDP.graphCell;}else{An=this.gc;}Ah=An.dp.lds.gmm;Am=Ah.gmCtr;Af=Am.getColorByAttrsID();Ak=Am.getBreakByAttrsID();Al=Am.getSliceByAttrsID();Aj=AC.call(this,Ak.concat(Af.concat(Al)),Ag);this[Ai]=Aj;return Aj;},getSelectedSliceAngleByMetric:function(){if(this.isPie){return this.sPieDP.getSelectedSliceAngleByMetric(this.sliceIdx);}return undefined;},getSelectedObjectLowestLevel:function(Ag){var Af=this.getGraphCell(),Ah=Af.chtInfo;if(Ah.isPie){return this.getSelectedObjectSliceByInfo(Ag);}return this.getSelectedObjectBreakByInfo(Ag);},isEqualToObjectInfo:function(Af,Ah){var Ag=this.getSelectedObjectInfo(Ah);return Ac.isEqualComb(Ag,Af);},isEqualToIdentity:function(Af,Ag){if(!Af){return false;}return this.isEqualToObjectInfo(Af.getSelectedObjectInfo(Ag),Ag);},getChartInfo:function(){var Af=this.gc||this.sPieDP.graphCell,Ai=Af.dp,Ah=Ai.lds.gmm.gmCtr;var Ag=Ah.getChartInfo();if(Ag.isCombo){Ag.currentMarkerShape=Ai.getShapeBySeries(Af.sID);if(Ag.currentMarkerShape===7){Ag.currentMarkerShape=200;}else{if(Ag.currentMarkerShape===2){Ag.currentMarkerShape=204;}else{if(Ag.currentMarkerShape===1){Ag.currentMarkerShape=205;}else{if(Ag.currentMarkerShape===0){Ag.currentMarkerShape=206;}else{if(Ag.currentMarkerShape===4){Ag.currentMarkerShape=4;}else{if(Ag.currentMarkerShape===5||Ag.currentMarkerShape===6){Ag.currentMarkerShape=24;}}}}}}}else{if(Ag.isABL&&Ag.ceMarkerShape===undefined){Ag.ceMarkerShape=Ai.getShapeBySeries(Af.sID);if(Ag.ceMarkerShape===7){Ag.ceMarkerShape=200;}else{if(Ag.ceMarkerShape===2){Ag.ceMarkerShape=204;}else{if(Ag.ceMarkerShape===1){Ag.ceMarkerShape=205;}else{if(Ag.ceMarkerShape===0){Ag.ceMarkerShape=206;}else{if(Ag.ceMarkerShape===4){Ag.ceMarkerShape=4;}else{if(Ag.ceMarkerShape===5||Ag.ceMarkerShape===6){Ag.ceMarkerShape=24;}}}}}}}Ag.currentMarkerShape=Ag.ceMarkerShape;}return Ag;}});var r=mstrmojo.declare(mstrmojo.Base,null,{graphCell:undefined,tot:undefined,sliceByMetrics:undefined,sliceIdentities:undefined,init:function AF(Ah){this._super(Ah);this.dataCache={};this.sliceIdentities=[];this.sliceDataLabelIdentities=[];var Aj=this.innerGetSliceCount(),Ag,Ai=true,Af=[];for(Ag=0;Ag<Aj;Ag++){if(this.innerGetData(Ag)!==0){Af.push(Ag);}else{Ai=false;}}this.allValid=Ai;this.validSlices=Af;},innerGetSliceCount:function(){var Aj=this.graphCell,Ai=Aj.groupData,Ah=Ai.slicesOfPie,Ak=this.angleBy.length,Ag=Aj.dp.lds.gmm,Af=Ag.onlyMetricNamesOnAxisForGridPie;if(Ak===0){return Ah.length;}if(Af){Ak=1;}return Ah.length*Ak;},getInnerSliceIndex:function(Ag,Af){if(Af){return Ag;}return this.validSlices[Ag];},getOutSliceIndex:function(Ah,Ag){if(Ag){var Af;if(this.allValid){return Ah;}for(Af=0;Af<this.validSlices.length;Af++){if(this.validSlices[Af]===Ah){return Af;}}}return Ah;},getSelectedSliceAngleByMetric:function(Ah){var Aj=this.getInnerSliceIndex(Ah),Af=this.graphCell.dp.lds.gmm,Ak=this.angleBy.length;if(Ak>0){var Ai=this.getMetricNameOfSlice(Aj,true),Ag=this.getMetricIndexOfSlice(Aj,true);return{n:"Metrics",tid:-1,v:Ai,eid:Af.getMetricIDsFromIndex([Ag])[0]};}return undefined;},getSliceCount:function(){return this.validSlices.length;},getTooltipContent:function(Ay,At,Ai){var As=this.getInnerSliceIndex(Ay),Ar,A1=this.graphCell,Ao=this.getSliceTitles(),Az=this.getSliceLabel(As,true),Aw=Ao.length,Aq=this.angleBy.length,Ax,Am,An,Av,Ag,Ak,Ah,Aj=A1.dp.lds.gmm,A0=Aj.gmCtr,Al,Af=Aj.getMetricNames();Ar=A1.getTooltipContent(At,Ai);if(Ar.length>0&&Ar[Ar.length-1]!==null){if(!At){Ar.push(null);}}Ac.generateToolTipContent(0,Aw,undefined,Ao,Az,Ar);if(Aq>0){An=this.getMetricNameOfSlice(As,true);Al=this.getMetricIndexOfSlice(As,true);if(!At){Av=this.innerGetData(As,Al,false);for(Ax=0;Ax<Ar.length;Ax++){if(Ar[Ax]!==null&&(Ar[Ax].n===An||Ar[Ax].isPerCon)){Ar[Ax].n=mstrmojo.desc(2121,"Total")+" "+Ar[Ax].n;}}Ar.push({n:An,v:Av});Ag=mstrmojo.desc(14141,"Percent Contribution");Ak=this.getPercentage(As,true);Ak=(Ak*100).toFixed(2)+"%";Ar.push({n:Ag,v:Ak});var Au=A0.colorByInfo;if(Au.tp===j.METRICS&&Au.metrics){var Ap=Au.metrics[0].n;if(Ap!==An){for(Ax=0;Ax<Ar.length;Ax++){if(Ar[Ax]!==null&&Ar[Ax].n===Ap){Ar[Ax].n=mstrmojo.desc(2121,"Total")+" "+Ar[Ax].n;}}Ar.push({n:Ap,v:this.innerGetData(As,Au.metrics[0].idx,false)});}}}else{if(Aj.colorType===j.ATT_METRICS||Aj.colorType===j.METRICS_ITEM){Ar.push({n:"Metrics",tid:-1,v:An,eid:Aj.getMetricIDsFromIndex([Al])[0]});}}}if(!At){Am=A0.getMetricsOnTooltip();Aw=Am.length;for(Ax=0;Ax<Aw;Ax++){Ah=Am[Ax];An=Af[Ah];Av=this.innerGetData(As,Ah,false);Ar.push({n:An,v:Av});}}return Ar;},getDataLabelIdentity:function(Aj,Ah){var Am=this.getOutSliceIndex(Aj,Ah);var Al=this.sliceDataLabelIdentities;if(Al[Am]===undefined){var Ak=this.graphCell,Ag=Ak.dp.lds.gmm.cct,Af=this.getCoordinates(Am),Ai=Af.R*Ag+Af.C;Al[Am]=new AA({objType:o.DATA_LABEL,sPieDP:this,isPie:true,sliceIdx:Am,id:Ai});}return Al[Am];},getIdentity:function(Aj,Ah){var Am=this.getOutSliceIndex(Aj,Ah);var Al=this.sliceIdentities;if(Al[Am]===undefined){var Ak=this.graphCell,Ag=Ak.dp.lds.gmm.cct,Af=this.getCoordinates(Am),Ai=Af.R*Ag+Af.C;Al[Am]=new AA({objType:o.GRAPH_SHAPE,sPieDP:this,isPie:true,sliceIdx:Am,id:Ai});}return Al[Am];},getCoordinates:function(Au,Ah,Ag){var Ar=this.getInnerSliceIndex(Au,Ag);var Av=this.graphCell,At=Av.dp.lds.gmm,Ai=At.onlyMetricNamesOnAxisForGridPie,As=this.angleBy,Aq=Ai?1:As.length;var Aw=Av.groupData,Af=Aw.slicesOfPie,Al,Ap,An=Av.dp.lds,Ak=An.getOffsetX(),Aj=An.getOffsetY(),Ax=[],Am,Ao;if(Aq>0){Al=parseInt(Ar/Aq,10);}else{Al=Ar;}Ap=Af[Al];Ao=Ap[0];Am=Ao.R-Aj;Ax.push(Ao.C-Ak);if(Ah!==undefined){return An.getAssoCoordinatesWithMetricIndex(Am,Ax,Ah);}if(Aq>0){return An.getAssoCoordinatesWithMetricIndex(Am,Ax,As[Ar%Aq]);}return An.getAssoCoordinatesWithMetricIndex(Am,Ax,0);},getMetricNameOfSlice:function(Aj,Ai){var Ah=this.getMetricIndexOfSlice(Aj,Ai),Ak=this.graphCell,Ag=Ak.dp.lds.gmm,Af;if(Ah<0){return"";}Af=Ag.getMetricNames();return Af[Ah];},getMetricIndexOfSlice:function(Af,Al){var Ai=this.getInnerSliceIndex(Af,Al),Ak=this.graphCell,An=this.angleBy,Ah=An.length,Aj,Ag=Ak.dp.lds.gmm,Am=Ag.onlyMetricNamesOnAxisForGridPie;if(Ah===0){return -1;}if(Am){Aj=Ak.metricIndexForLabelForGridPie;}else{Aj=An[Ai%Ah];}return Aj;},getMetric:function y(Ah,Ag){var Ai=this.getInnerSliceIndex(Ah,Ag);var Af=this.getMetricIndexOfSlice(Ai,true);if(Af>=0){return AE.call(this.graphCell,Af);}return undefined;},isIndividualFormatted:function(Ai,Ah){var Al=this.getInnerSliceIndex(Ai,Ah);var Ak=this.graphCell.getGMCtr(),Ag,Aj,Af;Ag=this.getIdentity(Al,true);Aj=Ag.getSelectedObjectLowestLevel(true);Af=Ak.getShapeFormatsWithCombination(Aj);return !!Af;},getFormattingProperties:function(Aq,Ag){var Az,Am=this.getInnerSliceIndex(Aq,Ag),Ay,At=this.graphCell.getGMCtr(),Ao,Ax,Ah,Av,Au,Ai=K.ALL_SHAPE_FORMAT,An,Aw,Ar;Ao=At.getDefaultsForShape(At.getChartInfo().shape);Ay=this.getIdentity(Am,true);var Af=At.getShapeFormatsObject();if(Af){Ar=Ay.getSelectedObjectLowestLevel(true);An=Ay.getSelectedObjectMetricInfo(Ar);Aw=Ay.getSelectedObjectColorByInfo();}Ax=this.graphCell.getPropertyValue(Ai);Ah=At.getShapeFormatsWithCombination(An);Av=At.getShapeFormatsWithCombination(Aw);Au=At.getShapeFormatsWithCombination(Ar);Az=Ac.getResolvedFormatsObject([Ao,Ax,Ah,Av,Au]);var Al=this.getColorByData(Am,true),As;if(Az===Ao){As=At.getVolatileDefaultsForShape(At.getChartInfo().shape);}else{As=Az;}Al=(Al!==undefined&&Al!==null)?Al:As[K.SHAPE_FILL_COLOR];var Aj=false;if(Al&&typeof Al==="object"){Aj=true;}if(Al!==undefined){As[K.SHAPE_LINE_COLOR]=As[K.SHAPE_FILL_COLOR]=Al;if(Az[K.LINE_MARKER_COLOR]===undefined){As[K.LINE_MARKER_COLOR]=Aj?Al.c1:Al;}if(Az[K.LINE_MARKER_BORDER_COLOR]===undefined){As[K.LINE_MARKER_BORDER_COLOR]=Aj?Al.c1:Al;}if(Az[K.SHAPE_BORDER_COLOR]===undefined){As[K.SHAPE_BORDER_COLOR]=Aj?Al.c1:Al;}}As[K.SHAPE_FILL_STYLE]=Aj?E.Gradient:E.Solid;var Ak=this.graphCell.getPropertyValue(b.METRIC_LEVEL_DATA_LABEL);if(Ak===undefined){As[K.DATA_LABELS_SHOW]=AO;}else{var Ap=Ay.getAssMetricDataLabelID();if(Ap!==undefined){As[K.DATA_LABELS_SHOW]=Ak[Ap];}else{As[K.DATA_LABELS_SHOW]=false;}}return As;},getData:function(Ag,Ai,Af){var Ah=this.validSlices[Ag];return this.innerGetData(Ah,Ai,Af);},innerGetData:function(Al,Ai,Ap){if(this.dataCache[Al]){return this.dataCache[Al];}var Ao=this.graphCell,As=this.angleBy,Aj=As.length,Ar,Aq,Ah,Ag,Ak=Ao.dp.lds;Ar=this.getCoordinates(Al,Ai,true);Ah=Ar.R-Ar.oy;Ag=Ar.C-Ar.ox;var Af=false,Am=Ak.gmm,An=Am.gmCtr;Af=(An.isGrid()&&Am.getMetricCount()===0);if(!Af&&Ak.checkExcluded(Ah,Ag)){return 0;}if(Aj===0&&Ai===undefined){return 1;}Aq=Ak.getData(Ah,Ag,Ap,Ai);if(Ap&&isNaN(Aq)){return 0;}return Aq;},getColorByData:function(Af,Aq,Ag){var Al=this.getInnerSliceIndex(Af,Aq),An;var Ap=this.graphCell,Ai=[],Am,Ar=this.angleBy,Aj=Ar.length,Ao,Ak=Ap.dp.lds,Ah=Ak.gmm;if(Ah.colorType===j.NULL){return null;}Am=this.getCoordinates(Al,undefined,true);if(Ah.colorType===j.ATT_METRICS||Ah.colorType===j.METRICS_ITEM){Ap.getMetricsIndexArray(Ai);if(Ar.length!==0){An=this.getMetricIndexOfSlice(Af,Aq);if(An<0){An=Ar[Al%Aj];}Ai.push(An);}}Ao=Ak.getColorByValue(Am.R-Am.oy,Am.C-Am.ox,Ai,Ag);return Ao;},getPercentage:function(Ai,Ah){var Aj=this.getInnerSliceIndex(Ai,Ah),Af=Math.abs(this.innerGetData(Aj)),Ag=this.getAbsTotalValue();return Af/Ag;},getSliceTitles:function(){var Al=this.graphCell.dp.lds,Ai=Al.gmm,Ag=Ai.gmCtr,Af=Ag.getChartInfo(),Ah=Ag.getGMHeaderCount("SliceBy"),Am=Af.isABL,Ak=P,Aq=Af.dirc,Ap=Af.tp,Ao=AY.EnumABLDirection,Aj;if((Am&&Aq===Ao.VERTICAL)||(Ap===Ak.GRID)||(Ap===Ak.BUBBLE||Ap===Ak.SCATTER)){Aj=Ai.getRowTitleInfo();}else{Aj=Ai.getColTitleInfo();if(Aj.length>0){var An=Aj[Aj.length-1];if(An.otp===-1){Aj=Aj.slice(0,Aj.length-1);}}}return Aj.slice(Aj.length-Ah);},getSliceLabel:function(A1,Ah){var At=this.getInnerSliceIndex(A1,Ah);var An=this.graphCell.dp.lds,A2=An.gmm.gmCtr,Ar=A2.getChartInfo(),Au=A2.getGMHeaderCount("SliceBy"),A3=this.graphCell,Av=this.angleBy,Az=Av.length,As=Az>0&&!An.gmm.onlyMetricNamesOnAxisForGridPie?Az:1,A4=A3.groupData,Af=A4.slicesOfPie,Al=parseInt(At/As,10),Ap=Af[Al],Aj=An.getOffsetX(),Ai=An.getOffsetY(),Ax,Am,Ao=Ap[0],Aw,A0=Ar.isABL,Ak=P,Ay=Ar.dirc,Ag=Ar.tp,Aq=AY.EnumABLDirection;if(Au<=0){return[];}if((A0&&Ay===Aq.VERTICAL)||(Ag===Ak.GRID)||(Ag===Ak.BUBBLE||Ag===Ak.SCATTER)){Am=Ao.R-Ai;Ax=Ao.C-Aj;Aw=An.getRowHeaders(Am,"SliceBy","n&id&tid&dei&o&at&idx");if(Aw.length>Au){return Aw.slice(Aw.length-Au);}return Aw;}Am=Ao.R-Ai;Ax=Ao.C-Aj;Aw=An.getColHeaders(Ax,"SliceBy","n&id&tid&dei&o&at&idx");if(Aw.length>Au){Aw=Aw.slice(0,Aw.length-1);return Aw.slice(Aw.length-Au);}return Aw;},getTotalValue:function(){if(this.tot!==undefined){return this.tot;}var Ag=0,Af,Ah=this.getSliceCount();for(Af=0;Af<Ah;Af++){Ag=Ag+this.getData(Af);}this.tot=Ag;return Ag;},getAbsTotalValue:function(){if(this.tot!==undefined){return this.tot;}var Ag=0,Af,Ah=this.getSliceCount();for(Af=0;Af<Ah;Af++){Ag=Ag+Math.abs(this.getData(Af));}this.tot=Ag;return Ag;},testSinglePieDP:function(){var Af,Ak,Am,Aj,Ao,Aq=this.graphCell,An=Aq.dp.lds,Al=An.gmm,Ag="default",Ah;Af=this.getSliceCount();Am=this.getTotalValue();O.visPrint("the angle by metric is "+this.angleBy.join(","));function Ai(Ar){Ah.push(Ar.n);}for(Ak=0;Ak<Af;Ak++){Aj=this.getData(Ak);if(Al.colorType!==j.NULL){Ag=this.getColorByData(Ak);}Ao=this.getIdentity(Ak).id;var Ap=this.getSliceLabel(Ak);Ah=[];T.forEach(Ap,Ai);O.visPrint("slice "+Ak+" ("+Ao+")  is "+Aj+" ("+this.getPercentage(Ak)+") with slice labels: "+Ah.join(","));O.visPrint("color is: "+Ag);this.getIdentity(Ak).getTooltipContent();}}});var AB=mstrmojo.declare(mstrmojo.Base,null,{getGroupLabelIdentities:function(){var Ag,Af=[];for(Ag=0;Ag<10;Ag++){Af.push(new f({gc:this,isGroup:true,isFaked:true}));}return Af;},getFormattingProperties:function(){return undefined;},getSeriesLabelIdentities:function(){var Ag,Af=[];for(Ag=0;Ag<10;Ag++){Af.push(new f({gc:this,isGroup:false,isFaked:true}));}return Af;},getSinglePieDPs:function(){return null;},getFormat:function AW(){return{};},getMetric:function y(){return null;},getMetricIndex:function h(){return null;},getMetricNumberWithDataIndex:function(){return null;},getMetricFormat:function(){return null;},getAxisMetricIndexArr:function(){return null;},getData:function Aa(){return null;},getIdentity:function(){return{isFaked:true};},getSliceIdentity:function(){return null;},getAssoDataWithMetricIndex:function(){return null;},getSizeByData:function q(){return null;},getMetricsIndexArray:function AL(){return null;},getColorByData:function n(){return null;},getSeriesLabel:function C(){return null;},getGroupLabel:function Q(){var Ag=this.dp,Am=Ag.lds,Ai=Am.flb,Ak=Am.blb,An=this.gIdx,Af=Ag.bwdSteps,Aj=Ag.fwdSteps,Ah,Al;if(!Ag.bwdEnabled){Af=0;}if(!Ag.fwdEnabled){Aj=0;}if(Ag.oriGroupCount<0){this.getGroupCount();}Ah=Ag.oriGroupCount;if(An<Af){Al=Ak[An];}else{Al=Ai[An-Af-Ah];}if(Al){return Al;}return[];},getThresholdIndex:function c(){return null;},getThreshold:function AH(){return null;},getRowIndex:function p(){return null;},getColIndex:function AN(){return null;},getTooltipContent:function(){return null;}});var u=mstrmojo.declare(mstrmojo.Base,null,{getGMCtr:function(){var Ah=this.dp,Ag=Ah.lds,Af=Ag.gmm;return Af.gmCtr;},getGroupLabelIdentities:function(Ap){if(Ap===undefined){Ap=0;}if(this.gCateAxisLbIdCache===undefined){this.gCateAxisLbIdCache=[];}if(this.gCateAxisLbIdCache[Ap]){return this.gCateAxisLbIdCache[Ap];}var Ak,An=[],Ah,Aj,Ao,Ai,Ag,Al,Af,Am;Ah=this.groupData[Ap];Aj=this.dp;Ao=Aj.lds;Ai=Ao.getOffsetX();Ag=Ao.getOffsetY();Al=Ah.R-Ag;Af=Ah.C-Ai;Am=Ao.getGroupLabel(Al,Af,true);for(Ak=0;Ak<Am.length;Ak++){An.push(new f({gc:this,isGroup:true,hInfo:Am[Ak]}));}this.gCateAxisLbIdCache[Ap]=An;return An;},getPropertyValue:function(Ai){var Aj=this.dp,Ag=Aj.lds,Af=Ag.gmm,Ah=Af.property;return Ah.readItem(Ai);},getShapeFormatsWithCombination:function(Af){return this.getGMCtr().getShapeFormatsWithCombination(Af);},isIndividualFormatted:function(){var Ai=this.getGMCtr(),Ag,Ah,Af;Ag=this.getIdentity();Ah=Ag.getSelectedObjectLowestLevel(true);Af=Ai.getShapeFormatsWithCombination(Ah);return !!Af;},getFormattingProperties:function(){var Ah,Af,Ag,Aj=this.getGMCtr(),Ak,Ai;if(Aj.getChartInfo().isPie){O.visPrint("for pie chart, call getFormattingPropertiesOfSlice of SinglePieDataProvider instead");return undefined;}Ag=this.getIdentity();Af=Aj.getShapeFormatsCachedObject(Ag);if(!Af){Ak=Aj.getDefaultsMergedWithAllPropsCachedObject(this);Ai=Aj.getComboLevelPropCachedObject(Ag);Ah=Ac.getResolvedFormatsObject([Ak].concat(Ai));Af=Aj.getShapeColorFormatsCachedObject(this,Ag,Ah,Ah===Ak);Aj.setShapeFormatsCachedObject(Ag,Af);}return Af;},getSeriesLabelIdentities:function(Ap){if(Ap===undefined){Ap=0;}if(this.sCateAxisLbIdCache===undefined){this.sCateAxisLbIdCache=[];}if(this.sCateAxisLbIdCache[Ap]){return this.sCateAxisLbIdCache[Ap];}var Ak,An=[],Ah,Aj,Ao,Ai,Ag,Al,Af,Am;Ah=this.groupData[Ap];Aj=this.dp;Ao=Aj.lds;Ai=Ao.getOffsetX();Ag=Ao.getOffsetY();Al=Ah.R-Ag;Af=Ah.C-Ai;Am=Ao.getSeriesLabel(Al,Af,true);for(Ak=0;Ak<Am.length;Ak++){An.push(new f({gc:this,isGroup:false,hInfo:Am[Ak]}));}this.sCateAxisLbIdCache[Ap]=An;return An;},getGroupElementIndexArray:function(Al,An){var Ah=this.groupData[An],Aj=this.dp,Am=Aj.lds,Ai=Am.getOffsetX(),Ag=Am.getOffsetY(),Ak=Ah.R-Ag,Af=Ah.C-Ai;return Am.getGroupElementIndexArray(Ak,Af,Al);},getBreakByElementIndexArray:function(Am){var Al=this.dp,Ar=Al.lds,Aj=Ar.getOffsetX(),Ah=Ar.getOffsetY(),Ai,An,Ag,Ap,Ak,Af=Ar.getChartInfo();Ai=this.groupData[0];An=Ai.R-Ah;Ag=Ai.C-Aj;if(Af.isABL&&Af.dirc===M.HORIZONTAL){Ak=1;Ap=Ag;}else{Ap=An;Ak=0;}var Ao=Ar.getHeaderObjectList(Ap,Ak,"BreakBy");if(Am){var Aq=[];T.forEach(Ao,function(As){Aq.push(As.idx);});return Aq;}return Ao;},getSinglePieDPs:function(){if(this.pieDps){return this.pieDps;}var Ah=this.getGMCtr().getChartInfo(),Ak=Ah.isPie,Ag=this.metricsOnAngleBy,Al=this.splitPie,Ai,An=[],Am,Aj,Af=false,Ao;if(!Ak){return An;}if(Al){Ai=Ag.length;if(Ai===0){Af=true;Ai=1;}for(Am=0;Am<Ai;Am++){if(Af){Ao=[];}else{Ao=Ag.slice(Am,Am+1);}Aj=new r({angleBy:Ao,graphCell:this,chtInfo:Ah});An.push(Aj);}}else{Aj=new r({angleBy:Ag,graphCell:this,chtInfo:Ah});An.push(Aj);}this.pieDps=An;return An;},getFormat:function AW(Af){return this.getMetric(Af);},getMetric:function y(Ag){var Af=this.getMetricIndex(Ag);return AE.call(this,Af);},getShape:function t(Ai){Ai=Ai||0;var Af=this.getMetricIndex(Ai),Ak=this.dp,Ah=Ak.lds,Ag=Ah.gmm,Aj=Ag.gmCtr;return Aj.getOnTheFlyShapeForMetric(Af);},getMetricIndex:function h(Af){var Ag=this.groupData[Af];return Ag.mIdx;},getMetricNumberWithDataIndex:function(Ag){var Af=this.dp.lds,Ah=this.getMetricIndex(Ag);return Af.getMetricNumberFormat(Ah);},getMetricFormat:function(Ag){var Af=this.dp.lds;return Af.getMetricNumberFormat(Ag);},getAxisMetricIndexArr:function(Ag){var Ah=this.groupData,Af=Ah.length,Ai;for(Ai=0;Ai<Af;Ai++){Ag.push(this.getMetricIndex(Ai));}return Ag;},getData:function Aa(Aj){var Al=this.groupData[Aj],Am=this.dp,Ai=Am.lds,Ah=Ai.getOffsetX(),Af=Ai.getOffsetY(),Ag=Al.R-Af,Ak=Al.C-Ah;return Ai.getData(Ag,Ak);},getIdentity:function(){if(!this.identity){var Ai=this.getGMCtr().getChartInfo().isPie,Ag=this.dp.lds.gmm.cct,Af=this.groupData[0],Ah=Af.R*Ag+Af.C;this.identity=new AA({objType:o.GRAPH_SHAPE,gc:this,id:Ah,isPie:Ai});}return this.identity;},getMarkerIdentity:function(){if(!this.mkIdentity){var Ai=this.getGMCtr().getChartInfo().isPie,Ag=this.dp.lds.gmm.cct,Af=this.groupData[0],Ah=Af.R*Ag+Af.C;this.mkIdentity=new AA({objType:o.LINE_MARKER,gc:this,id:Ah,isPie:Ai});}return this.mkIdentity;},getDataLabelIdentity:function(){if(!this.dataLabelIdentity){var Ai=this.getGMCtr().getChartInfo().isPie,Ag=this.dp.lds.gmm.cct,Af=this.groupData[0],Ah=Af.R*Ag+Af.C;this.dataLabelIdentity=new AA({objType:o.DATA_LABEL,gc:this,id:Ah,isPie:Ai});}return this.dataLabelIdentity;},getSliceIdentity:function(Af,Ah){var Ag=this.getSinglePieDPs()[Af];return Ag.getIdentity(Ah);},getAssoDataWithMetricIndex:function(Aj,Ao){var Ai=this.dp,An=Ai.lds,Am=this.groupData.length,Af=[],Ah=An.getOffsetX(),Ag=An.getOffsetY(),Ak,Al;for(Ak=0;Ak<Am;Ak++){Af.push(this.groupData[Ak].C-Ah);}Al=this.groupData[0].R-Ag;return An.getAssoDataWithMetricIndex(Al,Af,Aj,Ao);},getSizeByMetricFormat:function e(){var Ak=this.dp.getChartInfo(),Aj=this.dp,Af=Aj.lds,Ag;if(!Ak.isBubbleOrScatter){var Ai=this.getGMCtr();if(!Ai.hasSizeBy()){return undefined;}Ag=Ai.getSizeByMetrics()[0];}else{var Ah=AK.call(this);Ag=Af.getSizeByMetricIndexForBubble(Ah.lr,Ah.lcs);}return AE.call(this,Ag);},getSizeByData:function q(){var Am=this.dp,Al=Am.lds,Af=this.groupData.length,Aj=[],Ai=Al.getOffsetX(),Ag=Al.getOffsetY(),Ak,Ah;for(Ak=0;Ak<Af;Ak++){Aj.push(this.groupData[Ak].C-Ai);}Ah=this.groupData[0].R-Ag;return Al.getSizeByData(Ah,Aj);},getAbsSizeByData:function z(){return Math.abs(this.getSizeByData());},getMetricsIndexArray:function AL(An){var Ak=this.dp,Ah=Ak.getChartInfo(),Ai,Ap=Ak.lds,Ao=this.groupData.length,Af=[],Aj=Ap.getOffsetX(),Ag=Ap.getOffsetY(),Al,Am;if(Ah.tp!==P.GRID){this.getAxisMetricIndexArr(An);}if((Ah.tp===P.BUBBLE||Ah.tp===P.SCATTER)&&Ah.hasSizeBy){for(Al=0;Al<Ao;Al++){Af.push(this.groupData[Al].C-Aj);}Am=this.groupData[0].R-Ag;Ai=Ap.getSizeByMetricIndexForBubble(Am,Af);An.push(Ai);}},getColorByData:function n(Ao){var Ah=this.groupData[0],Aj=this.dp,An=Aj.lds,Ai=An.getOffsetX(),Ag=An.getOffsetY(),Am=Ah.R-Ag,Af=Ah.C-Ai,Al=[],Ak=An.gmm;if(Ak.colorType===j.NULL){return undefined;}if(Ak.getChartInfo().isPie){O.visPrint("not expected to call getColorByData of graph cell when in pie mode");return undefined;}if(Ak.colorType===j.ATT_METRICS||Ak.colorType===j.METRICS_ITEM){this.getMetricsIndexArray(Al);}return An.getColorByValue(Am,Af,Al,Ao);},isSubtotal:function AJ(){},getSeriesLabel:function C(Ao){var Ah,Aj,An,Ak,Ai,Ag,Al,Af;if(this.seriesLabel===undefined){this.seriesLabel={};}if(this.seriesLabel[Ao]!==undefined){return this.seriesLabel[Ao];}Ah=this.groupData[Ao];Aj=this.dp;An=Aj.lds;Ak=An.gmm;Ai=An.getOffsetX();Ag=An.getOffsetY();Al=Ah.R-Ag;Af=Ah.C-Ai;if(Ak.onlyMetricNamesOnAxisForGridPie&&!Ak.isMetricNamesOnXAxis){var Am=[];Am.push(Aj.getOneMetricName(this.metricIndexForLabelForGridPie));this.seriesLabel[Ao]=Am;return Am;}this.seriesLabel[Ao]=An.getSeriesLabel(Al,Af);return this.seriesLabel[Ao];},getGroupLabel:function Q(Ao){var Ah,Aj,An,Ak,Ai,Ag,Al,Af;if(this.groupLabel===undefined){this.groupLabel={};}if(this.groupLabel[Ao]!==undefined){return this.groupLabel[Ao];}Ah=this.groupData[Ao];Aj=this.dp;An=Aj.lds;Ak=An.gmm;Ai=An.getOffsetX();Ag=An.getOffsetY();Al=Ah.R-Ag;Af=Ah.C-Ai;if(Ak.onlyMetricNamesOnAxisForGridPie&&Ak.isMetricNamesOnXAxis){var Am=[];Am.push(Aj.getOneMetricName(this.metricIndexForLabelForGridPie));this.groupLabel[Ao]=Am;return Am;}this.groupLabel[Ao]=An.getGroupLabel(Al,Af);return this.groupLabel[Ao];},getThresholdIndex:function c(){return 0;},getThreshold:function AH(){},getRowIndex:function p(Af){var Ag=this.groupData[Af];return Ag.R;},getColIndex:function AN(Af){var Ag=this.groupData[Af];return Ag.C;},getTooltipContent:function(Ah,Ak){Ah=!!Ah;Ak=!!Ak;var Ag=this.gcTtpCcnt||{},Aj=Ah+","+Ak;if(Ag[Aj]!==undefined){return Ag[Aj];}var Af=this.dp.lds,Ai=[];Af.getTooltipForChartHeader(Ai,"r",Ah);Af.getTooltipForChartHeader(Ai,"c",Ah);AU.call(this,Ai,Ah,Ak);Ag[Aj]=Ai;return Ai;},testGraphCell:function k(){O.visPrint("");O.visPrint("start testing gcell...");var Ak=this.dp,An=Ak.lds.gmm,Ah=Ak.getDataGroup(),Ap,As,Al,Ao,Ag,Am,Aq,Ar,Af=An.getChartInfo(),Aj=Af.isPie,Ai;for(Ap=0;Ap<Ah;Ap++){As=this.getData(Ap);if(An.colorType!==j.NULL){Ai=this.getColorByData(Ap);}O.visPrint("data with data index "+Ap+": "+As);if(An.colorType!==j.NULL){O.visPrint("color with data index "+Ap+": "+Ai);}O.visPrint("sizeBy data: "+this.getSizeByData());Al=this.getSeriesLabel(Ap);O.visPrint("series labels are: "+Al.join());Ao=this.getGroupLabel(Ap);O.visPrint("group labels are: "+Ao.join());}if(Aj){O.visPrint("start testing pie dps");Aq=this.getSinglePieDPs();Ag=Aq.length;for(Am=0;Am<Ag;Am++){Ar=Aq[Am];Ar.testSinglePieDP();if(Am!==Ag-1){O.visPrint("-----------------------");}}O.visPrint("end testing pie dps");}this.getTooltipContent();O.visPrint("end testing gcell...");}});mstrmojo.gm.GMDataProvider=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMDataProvider",lds:null,data:null,sbc:false,graphJSON:null,isValid:true,fwdEnabled:false,bwdEnabled:false,cache:null,getController:function(){var Ag=this.lds,Af=Ag.gmm,Ah=Af.gmCtr;return Ah;},allowDatalabelOverlap:function(){var Af=this.getController();return Af.getChartInfo().dlPlmt>1;},isClusteredBarSpecialCase:function(){var Af=this.getController();return Af.clusteredBarSpecialCase;},getChartInfo:function(){return this.lds.getChartInfo();},init:function AF(Af){this._super(Af);this.cache=[];var Ag=this.getChartInfo();if(Ag.isABL||Ag.tp===P.BUBBLE||Ag.tp===P.SCATTER){this.getTrendsOfChart();}},destroy:function I(){delete this.cache;},isGradientABL:function(){return this.lds.gmm.gmCtr.isGradientABL();},getTotalOfGroup:function(Aj){var Ah=this.innerGetSeriesCount(),Ag=0,Af,Ai;for(Af=0;Af<Ah;Af++){Ai=this.innerGetGraphCell(Af,Aj);Ag+=Ai.getData(0);}return Ag;},getAxisOriginLineIdentity:function(Af){var Ag=this.getController();return Ag.getAxisOriginLineIdentity(Af);},getAxisOriginLabelIdentity:function(Af){var Ag=this.getController();return Ag.getAxisOriginLabelIdentity(Af);},getMetricsOnAxis:function(Ah){var Af=this.rowIndex,Ai=this.colIndex;var Ag=this.getController();if(Af===undefined||Ai===undefined){O.visPrint("row index or column index of data provider is not found");}if(Ah==="x"||Ah==="x1"||Ah==="X1"){return Ac.filterInValidMetricIndex(Ag.getMetricsOnAxisOfChart(Af,Ai,"x",true));}if(Ah==="y"||Ah==="y1"||Ah==="Y1"){return Ac.filterInValidMetricIndex(Ag.getMetricsOnAxisOfChart(Af,Ai,"y",true));}if(Ah==="x2"||Ah==="X2"){return Ac.filterInValidMetricIndex(Ag.getMetricsOnAxisOfChart(Af,Ai,"x",false));}if(Ah==="y2"||Ah==="Y2"){return Ac.filterInValidMetricIndex(Ag.getMetricsOnAxisOfChart(Af,Ai,"y",false));}return[];},isLogScale:function(Ag){var Af=this.getController();return Af.isLogScale(Ag,this.rowIndex,this.colIndex);},getNumericOption:function(Ah){var Af=this.getMetricsOnAxis(Ah),Ag=this.getController();if(Af.length>0){return Ac.getOptionObjArr.call(Ag,Af,Ah,false);}return[];},getAxisOriginValue:function(Aj){var Ai=this.getController(),Ah=Ai.view,Al=this.getNumericOption(Aj),Ag=Ah.readGlobalProperty(b.AXIS_ORIGIN,Al).jsonObj;if(Ag){var Ak=Ag[b.AXIS_ORIGIN_AUTO];var Af=parseFloat(Ag[b.AXIS_ORIGIN_VALUE]);if(Ak){return 0;}return Af;}return 0;},getAxisFormats:function G(Ag,Aj){Aj=Aj||"all";var Ak=this.getController(),Ah,Af=Ak.getAllAxisProperties();switch(Aj){case"axisLabel":if(Ag==="x1"||Ag==="x2"||Ag==="X1"||Ag==="X2"){Ah=[K.X_AXIS_LABELS_FONT_SIZE,K.X_AXIS_LABELS_FONT_FAMILY,K.X_AXIS_LABELS_FONT_STYLE,K.X_AXIS_LABELS_ROTATION,K.X_AXIS_LABELS_FONT_COLOR];}else{if(Ag==="y1"||Ag==="y2"||Ag==="Y1"||Ag==="Y2"){Ah=[K.Y_AXIS_LABELS_FONT_SIZE,K.Y_AXIS_LABELS_FONT_FAMILY,K.Y_AXIS_LABELS_FONT_STYLE,K.Y_AXIS_LABELS_ROTATION,K.Y_AXIS_LABELS_FONT_COLOR];}}return V.copyProps(Ah,Af);case"majorTick":case"minorTick":var Ai=Aj==="majorTick",Al={};if(Ai){Ah=[K.MAJOR_GRID_LINES_COLOR,K.MAJOR_GRID_LINES_THICKNESS,K.MAJOR_GRID_LINES_STYLE];}else{Ah=[K.MINER_GRID_LINES_COLOR,K.MINER_GRID_LINES_THICKNESS,K.MINER_GRID_LINES_STYLE];}return V.copyProps(Ah,Af);case"body":if(Ag==="x1"||Ag==="x2"||Ag==="X1"||Ag==="X2"){Ah=[K.X_AXIS_LINE_COLOR,K.X_AXIS_LINE_STYLE,K.X_AXIS_LINE_THICKNESS];}else{if(Ag==="y1"||Ag==="y2"||Ag==="Y1"||Ag==="Y2"){Ah=[K.Y_AXIS_LINE_COLOR,K.Y_AXIS_LINE_STYLE,K.Y_AXIS_LINE_THICKNESS];}}return V.copyProps(Ah,Af);case"axisOrigin":if(Ag==="x1"||Ag==="x2"||Ag==="X1"||Ag==="X2"){Ah=[K.X_AXIS_ORIGIN_LINE_SHOW,K.X_AXIS_ORIGIN_LINE_COLOR,K.X_AXIS_ORIGIN_LINE_STYLE,K.X_AXIS_ORIGIN_LINE_THICKNESS];}else{if(Ag==="y1"||Ag==="y2"||Ag==="Y1"||Ag==="Y2"){Ah=[K.Y_AXIS_ORIGIN_LINE_SHOW,K.Y_AXIS_ORIGIN_LINE_COLOR,K.Y_AXIS_ORIGIN_LINE_STYLE,K.Y_AXIS_ORIGIN_LINE_THICKNESS];}}return V.copyProps(Ah,Af);case"showHide":if(Ag==="x1"||Ag==="x2"||Ag==="X1"||Ag==="X2"){Ah=[K.X_AXIS_LINE_SHOW,K.X_AXIS_TITLE_SHOW,K.X_AXIS_LABELS_SHOW,K.MAJOR_GRID_LINES_SHOW,K.MINOR_GRID_LINES_SHOW];}else{if(Ag==="y1"||Ag==="y2"||Ag==="Y1"||Ag==="Y2"){Ah=[K.Y_AXIS_LINE_SHOW,K.Y_AXIS_TITLE_SHOW,K.Y_AXIS_LABELS_SHOW,K.MAJOR_GRID_LINES_SHOW,K.MINOR_GRID_LINES_SHOW];}}return V.copyProps(Ah,Af);default:V.copy(Af,Al);return Al;}},getDataLabelType:function(){return this.getChartInfo().dlTp;},getDataLabelFontFormat:function(){var Ai=this.getController(),Ah=mstrmojo.hash,Ag=[K.DATA_LABELS_FONT_FAMILY,K.DATA_LABELS_FONT_SIZE,K.DATA_LABELS_FONT_STYLE,K.DATA_LABELS_FONT_COLOR],Af=Ai.getDataLabelFontFormat();return Ah.copyProps(Ag,Af);},clearGraphJSON:function(){this.graphJSON=null;},resetDPCache:function S(){if(this.rCache){this.rCache={};delete this.rCache;}if(this.cCache){this.cCache={};delete this.cCache;}},innerGetGraphCell:function l(Ag,Af){return AQ.call(this,Ag,Af);},getGraphCell:function g(Ai,Ag){var Ah=this.getController();if(Ah.clusteredBarSpecialCase){var Af=this.getClusterDataGroup();if(Ai>=Ag*Af&&Ai<(Ag+1)*Af){Ai=Math.round(Ai%Af);}else{return new AB({gIdx:Ag,dp:this,isFaked:true});}}return AQ.call(this,Ai,Ag);},countValidGraphCell:function(){var Ah,Af,Ak,Aj,Ag,Ai=0;Ah=this.innerGetGroupCount();Af=this.innerGetSeriesCount();for(Aj=0;Aj<Ah;Aj++){for(Ag=0;Ag<Af;Ag++){Ak=this.innerGetGraphCell(Ag,Aj);if(Ak.getData(0)!==null){Ai++;}}}return Ai;},collectElementsIndexArrayOnXVar:function(Ai){var Al=this.getChartInfo(),Ah,Aj,Ak,Ag=[],Af=this.innerGetGroupCount();if(Al.isABL){for(Ah=0;Ah<Af;Ah++){Aj=this.innerGetGraphCell(0,Ah);Ak=Aj.getGroupElementIndexArray(Ai,0);Ag.push(Ak);}return Ag;}return undefined;},isNullGC:function(Af){return isNaN(Af.getData(0));},isDiscreteSeries:function(Ah){var Ag=this.innerGetGroupCount(),Aj,Af,Ak=true,Ai;for(Ai=0;Ai<Ag;Ai++){Aj=this.innerGetGraphCell(Ah,Ai);if(!this.isNullGC(Aj)){if(Ak){if(Ai===Ag-1){return true;}Af=this.innerGetGraphCell(Ah,Ai+1);if(this.isNullGC(Af)){return true;}}Ak=false;}else{Ak=true;}}return false;},GetDiscreteSeries:function AI(){var Al=this.getChartInfo(),Ai,Ah=[],Ag=this.lds.gmm,Ak=Ag.gmCtr,Aj=Ak.clusteredBarSpecialCase,Af=this.getSeriesCount();if(!Al.isABL){return[];}for(Ai=0;Ai<Af;Ai++){if(Aj||this.isDiscreteSeries(Ai)){Ah.push(Ai);}}return Ah;},prepareForTrendLines:function(){var Ax=this,BP=this.getChartInfo(),BQ={},As={},BI,At,BB,A4,Au,Ar,BK,A9=this.lds,Av,BC=this.getGroupCount(),A6=this.getSeriesCount(),BM,A8,Ah=A9.gmm,An=Ah.mx,Aq=A9.cri,Al=A9.cci,A1=Ah.getBreakByUnits(),A0=A1.length>0,BE=Ah.gmCtr,A5=A9.validFse,Ag=A9.validBse,BF=A9.validXVar,BO,Aw,BL,BN,Ai,Ak=false,Ap,Az;var A3=BE.getDependentMetricOptions();function BD(BS){var BR;A3.forEach(function(BT){if(BS===BT.key){BR=BT;}});return BR;}var Am=BE.trendLineErrors={};var BH=false,A7,BG;var Aj=function(BT){var BW={MID_IN_Y1:-131072,MID_IN_Y2:-1179648,MID_IN_X1:-65536,MID_IN_X2:-1114112},BR=Ah.dz[BG],BV=BR&&BR.TemplateMetric,BS=BV&&BV[BT],BU;if(BS&&BS.ax===0){if(BP.dirc===M.VERTICAL){BU=BW.MID_IN_Y1;}else{BU=BW.MID_IN_X1;}}else{if(BP.dirc===M.VERTICAL){BU=BW.MID_IN_Y2;}else{BU=BW.MID_IN_X2;}}return BU;};var Af=function(BV){function BR(Ba,Bc){var Bb=false;T.forEach(Ba,function(Bd){if(Bd.tmData.modix===Bc){Bb=true;}});return Bb;}var BU,BZ,BW,BT;if(!BH){BU=BN;}else{BZ=Ax.lds.gmm.dz;BW=BZ[BG];BT=BW.mdls&&BW.mdls.mod_c[BV.modix-1];if(BT===undefined){return ;}if(BT.dua===0){BU=BG;}else{BU=A7+"2Axis";}}if(BB.indexOf(BU)<0){BB.push(BU);}if(As[BU]===undefined){As[BU]=[];}var BY,BX;if(BV){if(!BH){var BS=BE.model.getMetricIDsFromIndex([BV.mid])[0];BY=BE.view.getExistingRefLineOptions(BS);BY.forEach(function(Ba){if(Ba.modix===BV.modix){BX=Ba;}});if(!BR(As[BU],BV.modix)){As[BU].push(new AY.TrendLineModel({tmData:BV,dp:Ax,mx:An,isTrendLine:false,direction:Ap,refIsDefOnAxis:BH,seriesIds:[BM],midx:BU,trendLineOpt:BX,metricId:Ai,ldsCri:Aq,ldsCci:Al}));}}else{BY=BE.view.getExistingRefLineOptionsForAxis(BU);BY.forEach(function(Ba){if(Ba.modix===BV.modix){BX=Ba;}});if(!BR(As[BU],BV.modix)){As[BU].push(new AY.TrendLineModel({tmData:BV,dp:Ax,isTrendLine:false,direction:BP.dirc===M.VERTICAL?"horizontal":"vertical",defOnZone:BT,seriesIds:[BM],trendLineOpt:BX,refIsDefOnAxis:BH,ldsCri:Aq,ldsCci:Al}));}}}};if(BP.isABL&&BE.isStacked&&!BE.splitPlottingMetrics){A7=BP.dirc===M.VERTICAL?"Y":"X";BG=A7+"Axis";BH=true;}this.trendLineCalculated=true;this.inDpTrMdls=BQ;this.inDpRfMdls=As;this.seriesWithTrendLineDefined=BI=[];this.metricIndexesWithTrendLineDefined=At=[];this.metricIndexesWithRefLineDefined=BB=[];if(BP.tp===P.BUBBLE||BP.tp===P.SCATTER){Ak=true;}var Ay=1;for(BM=0;BM<A6;BM++){if(this.isClusteredBarSpecialCase()){Ay=this.getClusterDataGroup();Av=this.getGraphCell(BM,Math.round(BM/Ay));}else{Av=this.innerGetGraphCell(BM,0);}if(Av.isFaked){continue;}if(BP.isABL){A4=Av.getMetricIndex(0);}else{if(Ak===true){Au=Av.getMetricIndex(0);BK=Ah.getMetricIDsFromIndex([Au])[0];A4=Av.getMetricIndex(1);}}Ar=Ah.getMetricIDsFromIndex([A4])[0];if(BF&&(A5||Ag)){A8=this.collectElementsIndexArrayOnXVar(BF);this.unitElementIndexArray=A8;if(BC>1){if(A5&&A8.length>0&&Ac.indexOf(A8,A5)>=0){this.fwdEnabled=true;}if(Ag&&A8.length>0&&Ac.indexOf(A8,Ag)>=0){this.bwdEnabled=true;}}}if(Ak===true){this.bwdEnabled=true;this.fwdEnabled=true;}BO=BE.getTrendLinesObjectForMetric(A4,Aq,Al,BK,true)[0];if(BO&&BO.inChartModel[0]&&BO.inChartModel[0].model){var Ao=BO.inChartModel[0].model.error_message;if(Ao){var A2=BO.mid+","+BO.modix;if(!Am[A2]){Am[A2]=Ao;}}else{BI.push(BM);if(BQ[A4]){BQ[A4].seriesIds.push(BM);BQ[A4].seriesBBUnits.push(Av.getBreakByElementIndexArray(true));}else{At.push(A4);var BA=BD(Ar);BQ[A4]=new AY.TrendLineModel({tmData:BO,hasBb:A0,dp:Ax,isTrendLine:true,mx:An,seriesBBUnits:[Av.getBreakByElementIndexArray(true)],seriesIds:[BM],midx:A4,metricId:Ar,trendLineOpt:BA,ldsCri:Aq,ldsCci:Al});}}}if(!BH){Aw=[A4];if(Ak===true){Aw.push(Av.getMetricIndex(0));}for(BL=0;BL<Aw.length;BL++){if(Ak){if(BL===0){Ap="horizontal";}else{Ap="vertical";}}else{if(BP.isABL){if(BP.dirc===M.VERTICAL){Ap="horizontal";}else{Ap="vertical";}}}BN=Aw[BL];Ai=Ah.getMetricIDsFromIndex([BN])[0];Az=BE.getTrendLinesObjectForMetric(BN,Aq,Al,undefined,false);Az.forEach(Af);}}else{var BJ=Aj(A4);Az=BE.getTrendLinesObjectForMetric(BJ,Aq,Al,undefined,false);Az.forEach(Af);}}},getTrendsOfChart:function(){if(this.trendLinesOfChart){return this.trendLinesOfChart;}if(!this.trendLineCalculated){this.prepareForTrendLines();}var Aj=this.inDpTrMdls,Ah=[],Af={},Ai=this.metricIndexesWithTrendLineDefined;if(Ai){T.forEach(Ai,function(Am){var Al=Aj[Am],Ak=Al.getSingleTrendLines(Af);Ah=Ah.concat(Ak);});}function Ag(Ak){if(Ak===undefined){return Ak;}var Al;Ak.forEach(function(Am){for(Al=0;Al<Am.length;Al++){Am[Al]=Am[Al].toString();}});return Ak;}this.trendLinesOfChart=Ah;this.fwdLbs=Af.fwdLbs=Ag(Af.fwdLbs);this.bwdLbs=Af.bwdLbs=Ag(Af.bwdLbs);return Ah;},getRefsOfChart:function(){if(this.refLinesOfChart){return this.refLinesOfChart;}if(!this.trendLineCalculated){this.prepareForTrendLines();}var Ai=this.inDpRfMdls,Ah=[],Ag={},Af=this.metricIndexesWithRefLineDefined;if(Af){T.forEach(Af,function(Al){var Ak=Ai[Al],Aj;Ak.forEach(function(Am){Aj=Am.getSingleTrendLines(Ag);Ah=Ah.concat(Aj);});});}this.refLinesOfChart=Ah;return Ah;},getMetricsIndexOnAxis:function F(){return this.mpos;},getMinMetricValue:function AZ(){},getMaxMetricValue:function A(){},getMinMaxValueForABL:function(){var Aj,Am,Ag=this.innerGetSeriesCount(),Ai=this.innerGetGroupCount(),At,Ak,Ar,Af,Al,Aq,Ap=this.lds.gmm.gmCtr,Ao=Ap.hasSizeBy(),An,Ah,As;for(At=0;At<Ag;At++){for(Ak=0;Ak<Ai;Ak++){Ar=this.innerGetGraphCell(At,Ak);if(Ao){An=Ar.getSizeByData();if(As===undefined){As=An;}else{if(As>An){As=An;}}if(Ah===undefined){Ah=An;}else{if(Ah<An){Ah=An;}}}Af=Ar.dp.getDataGroup();for(Al=0;Al<Af;Al++){Aq=Ar.getData(Al);if(Aj===undefined){Aj=Aq;}else{if(Aj>Aq){Aj=Aq;}}if(Am===undefined){Am=Aq;}else{if(Am<Aq){Am=Aq;}}}}}return{XMax:Am,XMin:Aj,YMax:Am,YMin:Aj,ZMin:As,ZMax:Ah};},getMinMaxValueForGrid:function(){var An,Ag,Af=this.getSeriesCount(),Ah=this.getGroupCount(),Ao,Ai,Am,Aj,Al=this.lds.gmm.gmCtr,Ak=Al.hasSizeBy();if(Ak){for(Ao=0;Ao<Af;Ao++){for(Ai=0;Ai<Ah;Ai++){Am=this.innerGetGraphCell(Ao,Ai);Aj=Am.getSizeByData();if(An===undefined){An=Aj;}else{if(An>Aj){An=Aj;}}if(Ag===undefined){Ag=Aj;}else{if(Ag<Aj){Ag=Aj;}}}}}return{YMax:20000,YMin:0,XMin:0,XMax:20000,ZMin:An,ZMax:Ag};},getMinMaxValueForBubbleOrScatter:function(){var Ak,Ap,Ag,Am,Au,Ai,Ah=this.innerGetSeriesCount(),Aj=this.innerGetGroupCount(),Av,Al,At,Af,Ao,An,As=this.lds.gmm.gmCtr,Ar=As.hasSizeBy();for(Av=0;Av<Ah;Av++){for(Al=0;Al<Aj;Al++){At=this.innerGetGraphCell(Av,Al);Af=At.dp.getDataGroup();if(Ar){Ao=At.getSizeByData();if(Au===undefined){Au=Ao;}else{if(Au>Ao){Au=Ao;}}if(Ai===undefined){Ai=Ao;}else{if(Ai<Ao){Ai=Ao;}}}for(An=0;An<Af;An++){var Aq=At.getData(An);if(An===0){if(Ak===undefined){Ak=Aq;}else{if(Ak>Aq){Ak=Aq;}}if(Ap===undefined){Ap=Aq;}else{if(Ap<Aq){Ap=Aq;}}}else{if(Ag===undefined){Ag=Aq;}else{if(Ag>Aq){Ag=Aq;}}if(Am===undefined){Am=Aq;}else{if(Am<Aq){Am=Aq;}}}}}}return{YMax:Am,YMin:Ag,XMin:Ak,XMax:Ap,ZMin:Au,ZMax:Ai};},getMetricFormat:function d(Ag,Ah){Ah=Ah||false;if(Ah){var Al=parseInt(Ag,10),Af=this,Aj=Af.lds,Ak=Aj.gmm,Ai=Af.getMetricIds(),Am,An=Af.getMetricNames();if(Al<0){O.visPrint("invalid metric index");return undefined;}Am=Ak.getFullNumberFormat();return{idx:Al,metric:An[Al],id:Ai[Al],fullNf:Am!==undefined?Am[Al]:undefined};}return this.lds.getMetricNumberFormat(Ag);},isMetricOnRowAxis:function AS(){return false;},getMetricsCount:function Y(){var Af=this.metrics;if(!Af){return 0;}return Af.es.length;},getMetricNames:function AR(){var Ag=this.lds,Af=Ag.gmm;return Af.getMetricNames();},getMetricIds:function AT(){var Ag=this.lds,Af=Ag.gmm;return Af.getMetricIds();},getOneMetricName:function L(Ag){var Af=this.metrics;if(Af){if(Af.es.length-1>=Ag){return Af.es[Ag].n;}}},getSeriesCount:function Ae(){return this.innerGetSeriesCount();},innerGetSeriesCount:function(){var Af=this.dataSbc;if(Af===true){return this.data[0].length;}return this.data.length;},getGroupCount:function H(){var Af=this.dataSbc;if(Af===false){return this.data[0].length;}return this.data.length;},innerGetGroupCount:function H(){var Af=this.dataSbc;if(Af===false){return this.data[0].length;}return this.data.length;},getDimensionSize:function U(){return 5;},getDataGroup:function B(){var Af=this.data[0][0];if(Af===undefined){return 1;}return Af.length;},getSeriesByColumn:function N(){return this.sbc;},seriesGroupIndexToRowColumnIndex:function Ad(Ai,Aj,Af,Ah){Ah=Ah||false;var Ag=this.dataSbc;var Ak,Am;if(Ag===true){Am=Ai;Ak=Aj;}else{Ak=Ai;Am=Aj;}var Al=this.data[Ak][Am];if(Al){return{Row:Al[Af].R,Col:Al[Af].C};}return{Row:-1,Col:-1};},getTextLabel:function W(Ar,Aj,Ak,At){var As=this.getGraphCell(Ar,Aj),Ag=this.getChartInfo(),An,Ah,Aq,Af,Am,Ai,Ap;if(As!==null&&As!==undefined){Aq=As.getGMCtr();if(Ag.isPie){var Ao=As.getSinglePieDPs()[Ak];var Al=Ao.getSliceLabel(At);if(Al.length===0){return"";}Am=Aq.getSliceByAttrsID();Ai=Am[Am.length-1];Ap=T.find(Al,"tid",Ai);return Al[Ap].n;}An=As.getIdentity();Ah=An.getSelectedObjectBreakByInfo(false);if(Ah.length===0){return"";}Af=Aq.getBreakByAttrsID();Ai=Af[Af.length-1];Ap=T.find(Ah,"tid",Ai);if(Ap>=0){return Ah[Ap].v;}}return"";},isGridPieSplitAlongXAxis:function(){var Ai=this.getChartInfo(),Ag=this.lds,Af=Ag.gmm,Ah=Af.gmCtr;if(Ai.isPie&&Ai.tp===P.GRID){return Ah.isMetricNamesInZone("XAxis");}return undefined;},getMetricIndexForSeries:function(Af){var Ai=this.getGroupCount(),Ah,Ag;for(Ag=0;Ag<Ai;Ag++){Ah=this.getGraphCell(Af,Ag);if(!Ah.isFaked){break;}}return Ah.getMetricIndex(0);},getShapeBySeries:function(Ag){var Ah=this.lds.gmm.gmCtr,Af;if(Ah.enableCombiChart===false){return Ah.markerShape;}Af=this.getMetricIndexForSeries(Ag);return Ah.getOnTheFlyShapeForMetric(Af);},getPrioritizedSeriesIndex:function(){var Ak=this.lds.gmm.gmCtr,Aj=this.getSeriesCount(),Ah,Af,Ai=[];if(Ak.enableCombiChart===false){var Ag=[];for(Ah=0;Ah<Aj;Ah++){Ag.push(Ah);}return Ag;}Af=this.getSeriesByShape();Ai=Ai.concat(Af.Area);Ai=Ai.concat(Af.Bar);Ai=Ai.concat(Af.Circle);Ai=Ai.concat(Af.Square);Ai=Ai.concat(Af.Line);Ai=Ai.concat(Af.Tick);return Ai;},getSeriesByShape:function(Ag){var Al=this.getSeriesCount(),Ai,Ah,Af,Aj={Tick:[],Line:[],Bar:[],Area:[],Circle:[],Square:[],Pie:[]};function Ak(An){var Am;switch(An){case Z.TICK:Am=Aj.Tick;break;case Z.LINE:Am=Aj.Line;break;case Z.BAR:Am=Aj.Bar;break;case Z.AREA:Am=Aj.Area;break;case Z.CIRCLE:Am=Aj.Circle;break;case Z.SQUARE:Am=Aj.Square;break;case Z.PIE:Am=Aj.Pie;break;}return Am;}for(Ai=0;Ai<Al;Ai++){Ah=this.getShapeBySeries(Ai);Af=Ak(Ah);Af.push(Ai);}if(Ag===undefined){return Aj;}return Ak(Ag);},getValueAxisBySeries:function(Ag){var Ai=this.lds.gmm.gmCtr,Af,Ah;Af=this.getMetricIndexForSeries(Ag);Ah=Ai.getPrimaryMetrics();if(Ah.indexOf(Af)>=0){return 0;}return 1;},getSeriesByValueAxis:function(Ak){var Al=this.lds.gmm.gmCtr,Ah,Ag=this.getSeriesCount(),Ai,Af=[],Aj;Aj=(Ak===0)?Al.getPrimaryMetrics():Al.getSecondaryMetrics();for(Ai=0;Ai<Ag;Ai++){Ah=this.getMetricIndexForSeries(Ai);if(Aj.indexOf(Ah)!==-1){Af.push(Ai);}}return Af;},testDataProvider:function Ab(){var Ag=this.getSeriesCount(),Ai=this.innerGetGroupCount(),An=this.getMetricsCount(),Am=this.lds,Al=Am.cci,Ah=Am.cri,Aj,Ap,Ak;O.visPrint("");O.visPrint("======================chart with index: ("+Ah+", "+Al+")=============================");for(Aj=0;Aj<An;Aj++){var Af=this.getOneMetricName(Aj);O.visPrint("single metric name of "+Aj+" is: "+Af);}for(Ap=0;Ap<Ag;Ap++){for(Ak=0;Ak<Ai;Ak++){var Ao=this.innerGetGraphCell(Ap,Ak);if(!Ao.isFaked){Ao.testGraphCell();}}}},getResizerLineThickNess:function a(){var Ag=this.lds.gmm,Ai=Ag.gmCtr,Af=Ai.view,Ah=Af.getHTML5Props();return{MATRIX_VLINE_THICKNESS:parseInt(Ah.MATRIX_LINE_V.borderWidth,10)||1,MATRIX_HLINE_THICKNESS:parseInt(Ah.MATRIX_LINE_H.borderWidth,10)||1,AXIS_X_THICKNESS:parseInt(Ah.AXIS_LINE_X.borderWidth,10)||1,AXIS_Y_THICKNESS:parseInt(Ah.AXIS_LINE_Y.borderWidth,10)||1};},getChartRowColCount:function AG(){var Af=this.lds.gmm;return{cir:Af.cir,cic:Af.cic};},isCompactMode:function w(){var Af=this.lds.gmm,Ag=Af.gmCtr;return Ag.isCompactMode();}});mstrmojo.gm.GMEnhancedDataProvider=mstrmojo.declare(mstrmojo.gm.GMDataProvider,null,{scriptClass:"mstrmojo.gm.GMEnhancedDataProvider",fwdSteps:0,bwdSteps:0,oriGroupCount:-1,getGroupCount:function(){if(AX){return this._super();}var Af=this.bwdSteps,Ag=this.fwdSteps;if(!this.bwdEnabled){Af=0;}if(!this.fwdEnabled){Ag=0;}this.oriGroupCount=this._super();if(!this.fwdSteps&&!this.bwdSteps){return this.oriGroupCount;}return Af+this.oriGroupCount+Ag;},getGraphCell:function g(Aj,Ah,Ag){if(AX||Ag===true){return this._super(Aj,Ah);}var Af=this.bwdSteps,Ak=this.fwdSteps,Ai;if(!this.bwdEnabled){Af=0;}if(!this.fwdEnabled){Ak=0;}if(this.oriGroupCount<0){this.getGroupCount();}if(!this.fwdSteps&&!this.bwdSteps){Ai=this._super(Aj,Ah);return Ai;}if(Ah<Af||Ah>=(this.oriGroupCount+Af)){return new AB({gIdx:Ah,dp:this,isFaked:true});}Ai=this._super(Aj,Ah-Af);return Ai;},getClusterDataGroup:function x(){if(!!!this.mClusterDataGroup){var Af=this.lds.gmm,Ag=Af.gmCtr;if(Ag.clusteredBarSpecialCase){this.mClusterDataGroup=this.innerGetSeriesCount();}else{this.mClusterDataGroup=1;}}return this.mClusterDataGroup;},getSeriesCount:function Ae(){var Af=this.lds.gmm,Ag=Af.gmCtr;if(!Ag.clusteredBarSpecialCase){return this.innerGetSeriesCount();}return this.getGroupCount()*this.getClusterDataGroup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.Obj","mstrmojo.num","mstrmojo.array","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMDataProvider");var t=mstrmojo,u=t.array,J=t.num,S=t.hash,AE=t.gm,B=AE.GMUtility,I=t.VisUtility,o=AE.EnumGraphType,AB=AE.EnumSubtype,AM=AE.EnumColorByType,P=AE.EnumMetricsPosition,AQ=", ",R=" ",O=" ",a=AE.FormNameType;function H(AT){var AU=[];AT.forEach(function(AV){if(AV!==undefined){AU.push(AV);}});return AU;}function E(){var AY=this.attributesColorMap,Ab=this.attributesColorMapID,AZ=AY.length,AU,AW,AV,AX,AT;for(AW=0;AW<AZ;AW++){AX=Ab[AW];AT=typeof AX==="string"?AX.split(","):[AX];AU=AT.length;for(AV=0;AV<AU;AV++){var Aa=parseInt(AT[AV],10);if(Aa===-1){AY[AW]=undefined;Ab[AW]=undefined;}}}this.attributesColorMap=H(AY);this.attributesColorMapID=H(Ab);}function AG(AV,AT){var AU;if(AT>AV.mxIdx){return -1;}AU=AT;while(true){if(AV[AU]){return AU;}AU++;}}function Q(AZ,AU,AX,AY){var AT=AZ.n,AW=AZ.fs&&AZ.fs[AX].n,AV="";if(AW===undefined){AW=" ";}if(AU===a.OFF){if(AX===0){AV=AT;}else{AV="";}}else{if(AU===a.ON){AV=AT+" "+AW;}else{if(AU===a.FORM_NAME_ONLY){AV=AW;}else{if(AU===a.SHOW_ATT_NAME_ONCE){if(AX===0){AV=AT+" "+AW;}else{AV=AW;}}else{if(AU===a.AUTO){if(AY===1){AV=AT;}else{AV=AT+" "+AW;}}}}}}return AV;}function d(AV,AX,AZ){var Aa=this.ttlDispTp,AU=[],AW,AT=AX?AV.cs:AV.rs,AY;for(AW=0;AW<AT;AW++){if(AV.otp===12){AY=S.clone(AV);AY.fid=AY.fs[AW].id;delete AY.fs;AY.isRowAttribute=AX;AY.tui=AZ;AY.n=Q(AV,Aa,AW,AT);AU.push(AY);}else{AY=S.clone(AV);if(AV.fid!==undefined){AY.fid=AV.fid;}else{AY.fid=AV.id;}delete AY.fs;AY.isRowAttribute=AX;AY.tui=AZ;if(AW===0){AY.n=AV.n;}else{AY.n="";}AU.push(AY);}}return AU;}function AP(AX){var AY,AT,AW,AV,AU=function(AZ){if(AT!==""){AT+=O;}AT+=AZ.headerText;};u.forEach(AX,function(AZ){AW=0;while(AW<=AZ.mxIdx){AW=AG(AZ,AW);AV=AZ[AW];AT="";AY=AV.forms[0];AV.cs=AY.cs;AV.rs=AY.rs;AV.headerID=AY.headerID;AV.idx=AY.idx;AV.o=AY.o;AV.tui=AY.tui;AV.ui=AY.ui;AV.um=AY.um;AV.stt=AY.stt;u.forEach(AV.forms,AU);AV.headerText=AT;AW++;}});}function AH(AZ,AU,AY){var AX,AW=0,AV,AT;if(AZ&&AZ.length>0){AT=AZ.length;for(AX=0;AX<AT;AX++){AV=AZ[AX];if(!AV.fcnt){AV.fcnt=AY?AV.cs:AV.rs;if(AV.otp===-1){AV.fcnt=1;}}if(AW+AV.fcnt>AU){return{depth:AX,formIndex:AU-AW};}AW+=AV.fcnt;}}return -1;}function k(AY,AU,AW){var AT=AU.length,AX=[],Aa,AZ,AV;for(AV=0;AV<AT;AV++){AZ=AU[AV];if(AZ>=0){Aa=(AY.es[AZ])[AW];}else{Aa="-1";}AX.push(Aa);}return AX;}function s(AT){if(!AT||AT.length===0){return undefined;}var AV={},AU,AW=AT.length;for(AU=0;AU<AW;++AU){AV[AT[AU]]=AU;}return AV;}function n(AW,AX){if(AX===null||AW<=0){return -1;}var AV=0;if(AW===1){AV=AX.children[0].levelIndex;}else{var AU=AX.children[0];var AT;for(AT=1;AT<AW;++AT){AU=AU.children[0];}AV=AU.levelIndex;}return AV;}function AO(AU,Af,Ac){if(AU===null||AU.length===0||Af===null||Ac===null){return null;}var AX=AU.length,Ae=AU[0],AV=Af[Ae.index];if(AX===1){return AV;}var Aa,AW,AT={},Ab=[],AZ=[AV],Ad=[];for(Aa=1;Aa<AX;++Aa){AT=AU[Aa];Ab=Af[AT.index];AZ.push(Ab);Ad=[];Ac.push(Ad);var AY=AT.index-Ae.index;AW=0;var Ag=0;while(AW<=AV.mxIdx){AW=AG(AV,AW+1);if(AW===-1){break;}Ad[Ag]=n(AY,AV[AW]);Ag=AW;}Ad[Ag]=Ab.mxIdx+1;Ae=AT;AV=Ab;}return AZ;}function AK(AT){AT=AT.replace(/\(/g,"-");AT=AT.replace(/\)/g,"");AT=AT.replace("$","");AT=AT.replace(/ /g,"");AT=AT.replace(/&nbsp;/g,"");AT=AT.replace(/,/g,"");if(isNaN(AT[0])){return AT.slice(1);}return AT;}function A(AY,AW,AV,AX){if(!this.items[AY]){I.visPrint("Cannot find data at index ("+AY+", "+AW+")");}var AZ=this.items[AY][AW];if(AZ===undefined){return null;}if(AZ===""||AZ.rv===""||AZ.rv==="--"){return null;}if(AV===undefined||AV===true){if(AZ.rv!==undefined){return B.parseNumeric(AZ.rv);}var AU=B.parseNumeric(AK(AZ.v));if(isNaN(AU)){I.visPrint("NaN from GetDataInLocalDataSet");AK(AZ.v);}return AU;}if(AZ.v!==undefined){return AZ.v;}var AT=this.getMetricNumberFormat(AX);if(AX!==undefined){return J.formatByMask(AT,AZ.rv);}return B.parseNumeric(AZ.rv);}function Z(AU,AT,AW){if(!this.items[AU]){I.visPrint("Cannot find data at index ("+AU+", "+AT+")");}var AV=this.items[AU][AT];if(AV===""){return null;}return AV[AW];}function X(Ad,Ae,Af,AU){var Ah=[],Ac=Af.length,Ab,AZ=Ad.length,Aa=[],Ag,AY;for(Ab=0;Ab<Ac;Ab++){Ag=Af[Ab];AY=Ag-Ae;if(AY>=0&&AY<=AZ-1){Ah.push(Ad[AY]);Aa.push(AY);}}if(AU){var AW=Aa.length;var AT=0;var AX;for(Ab=0;Ab<AW;Ab++){AX=Aa[Ab];var AV=Ad.slice(AT,AX);AU.push(AV);AT=AX+1;}}return Ah;}function h(AZ,Ab,AT,Ac,Ai,Af){var AV=Ab.length,AY,Aa=[],AU,AW,Ad,Ah,AX=0,Ae,Ag;for(AY=0;AY<AV;AY++){AU=Ab[AY];if(AY===AV-1){AW=AT;}else{AW=Ab[AY+1];}Ad=AW-AU;Ah=Ad/Ac;Ae=Ah;Ag=[];while(Ae--){if(Af){if(Ae===0){Aa.push(AZ[AX]);}else{if(Ai){Ag.push(AZ[AX]);}}AX++;}else{Ag.push(AZ[AX]);AX++;}}if(Ai){Ai.push(Ag);}}return Aa;}function x(AX,AZ,Ad,Aa,AU,AV){var AW,AY=[],Ac,Ab;Ac=(AX||[]).length;Ab=[];if(Aa){for(AW=0;AW<Ac;AW++){var Ae=AX[AW];if(Ae&&Ae.length&&AU.indexOf(Ae[0].C)!==-1){AY.push(Ae);Ad.push(Ab);Ab=[];}else{Ab.push(AX[AW]);}}}else{var AT={};(AV||[]).forEach(function(Af){AT[Af/AZ]=true;});for(AW=0;AW<Ac;AW++){if(AT[AW]&&AW!==0){Ad.push(Ab);Ab=[];Ab.push(AX[AW]);}else{Ab.push(AX[AW]);}}Ad.push(Ab);}return AY;}function AS(Aa,Ab,Ac){var AZ=Ac.length,AY,AX,Ae,Ad=Aa.length,AT=0,AW=0,AV=[],AU;for(AY=0;AY<AZ;AY++){Ae=Ac[AY];AX=Ae-Ab;if(AX>=0&&AX<=Ad-1){if(AX===0){continue;}AW=AX;AU=Aa.slice(AT,AW);AV.push(AU);AT=AW;}else{if(AX>Ad-1){break;}}}AU=Aa.slice(AT);AV.push(AU);return AV;}function AL(AT){return parseInt(AT,10)===AT;}function AR(AX,AW,Ac,AV){var AY=0,AU,AZ=AX.mxIdx,Ab=[],AT,Aa=AV===0?"rs":"cs";while(AY<=AZ){AU=AX[AY];if(AU){AT=AU.forms[Ac];Ab.push(AT);AY+=AT[Aa]||1;}else{AY+=1;}if(AW>0&&AY>AW){break;}}return Ab;}function U(AT,AV){var AU;if(AV==="All"){return true;}AU=AT.dropzones;if(AU){if(AU.indexOf(AV)>=0){return true;}}return false;}function l(AT,AV,AU){if(AT.ui!==AU){if(AT.pHd){l(AT.pHd,AV);}}AV.push(AT);}function g(AY,AV,AX,AZ){var AU,AT=this.gts,AW;if(!AV){return ;}if(AY==="all"||AY===undefined){if(AY===undefined){I.visPrint("zoneName use 'all' instead of undefined!");}l(AV,AX);return ;}if(AV.pHd){g.call(this,AY,AV.pHd,AX,AZ);}AW=(AZ==="row"?AT.row:AT.col);AU=AW[AV.ui];if(U.call(this,AU,AY)){AX.push(AV);}}function b(AT){return AT.textContent||AT.innerText||AT.nodeValue||"";}function e(AZ,AT,AX){var AY=[],Ac,Ab,AW,Aa,AU,AV;for(AV=0;AV<AT.length;AV++){Ac=AT[AV];Ab=AZ[Ac.ui];AU=Ab.id;AW=Ab.es[Ac.idx];Aa=AX.indexOf(AU);if(Aa>=0){AY[Aa]=Ac.idx;}}return AY;}function W(Aa,AT){var AZ=[],Ac,Ab,AY,AV,AX=AT.length,AW,AU;for(AU=0;AU<AX;AU++){Ac=AT[AU];AY=Ac.forms.length;Ab=Aa[Ac.ui];for(AW=0;AW<AY;AW++){AV=Ab.es[Ac.forms[AW].idx];AZ.push({unit:Ab,header:AV,o:Ac.o,tui:Ac.tui,dpt:Ac.tui+1});}}return AZ;}function f(AT){return B.restoreSpecialChars(AT);}function C(AZ,AY){var AW=false,AV,AU;if(AY){AV=AY.split("&");if(AV.length>1){AW=true;}}if(AZ===undefined){var AT;if(AW){AT={};u.forEach(AV,function(Aa){AT[Aa]="";});}else{AT="";}return AT;}if(AY){if(AW){var AX={};u.forEach(AV,function(Aa){AU=AZ[Aa];if(AU!==undefined&&typeof AU==="string"){AU=f(AZ[Aa]);}AX[Aa]=AU;});return AX;}return f(AZ[AY]);}return AZ;}function AA(Ae,AV,AU,Ab){var Ac=[],Ai,Ag,Af,AY,AX=AV.length,AZ,AW,Aa;for(AW=0;AW<AX;AW++){Ai=AV[AW];if(Ai.stt===1){continue;}Aa=Ai.forms.length;Af=Ae[Ai.ui];AY=Af.es[Ai.idx];var AT;if(Ab===true){var Ah={forms:[]};Ac.push(Ah);AT=Ah;}else{AT=Ac;}for(AZ=0;AZ<Aa;AZ++){var Ad=Ai.forms[AZ].idx;if(Ad>=0){AY=Af.es[Ad];if(AU.length===1&&AY&&AY[AU]!==undefined){AT.push(C(AY,AU));}else{Ag=Ag||S.copy(Ai);S.copy(Ai.forms[AZ],Ag);AY.tid=Af.id;AT.push(C(S.copy(AY,Ag),AU));}if(AZ===Aa-1){Ag=null;}}else{AT.push("");}}}return Ac;}function AD(AY,AU,AT){var AX=[],Ab,AZ,AW,AV,Aa=true;for(AV=0;AV<AU.length;AV++){Ab=AU[AV];AZ=AY[Ab.ui];AW=AZ.es[Ab.idx];if(C(AW,AT)!==""){Aa=false;}AX.push(C(AW,AT));}if(Aa){AX.push(C(AZ,AT));}return AX;}function z(Ad,Af){var AT=Ad.mxIdx,AX,Ae,AU=true,AV=false,Ab,Ac=-1,Aa,Ag=null,AW;for(AX=0;AX<=AT;AX++){Ae=Ad[AX];if(Ae){if(AU){var AY=AG(Ad,AX+1);var AZ=Ad[AY];if(AZ.idx===Ae.idx){AV=true;}AU=false;if(AV===false){return ;}}Aa=Ae.idx;if(Aa!==Ac){if(Ag){Ag[Af]=Ab;}Ab=1;Ac=Aa;Ag=Ae;}else{delete Ad[AX];Ab++;}}}if(Ag){Ag[Af]=Ab;}if(AV){for(AX=0;AX<=AT;AX++){if(Ad[AX]){AW=AX;}}Ad.mxIdx=AW;}}function r(AZ,Ac){var AT=AZ.mxIdx,AX,Ab,AY,Aa,AU,AW=this.getMetricCount(),AV=AW>0?AW:1;AU=(Ac==="cs");for(AX=0;AX<=AT;AX++){Ab=AZ[AX];if(Ab){AY=Ab.forms[0];Aa=AY[Ac];if(!Aa){Aa=1;}if(AU){Ab.numLeaves=Aa/AV;}else{Ab.numLeaves=Aa;}Ab.levelIndex=AX;}}}function j(Aa,AT,Ad){var AU=AT.mxIdx,Ab=0,AV,Ac,AY,AZ,Ae,AW,AX;for(AX=0;AX<=AU;AX++){AV=AT[AX];Ac=AV&&AV.forms[0];if(AV){while(true){Ab=AG(Aa,Ab);Ae=Aa[Ab];if(Aa.isCustomGroupWithBanding){AW=Ae.forms[1];}else{AW=Ae.forms[0];}if(!Ae.children){Ae.children=[];}AY=AW[Ad];if(!AY){AY=1;}AZ=Ac[Ad];if(!AZ){AZ=1;}if(AW.o<=Ac.o&&(AW.o+AY)>=(Ac.o+AZ)){AV.pHd=Ae;AV.pHdIdx=Ab;Ae.children.push(AV);break;}else{Ab++;}}}}}function T(AX){var AW,AT,AY=[],AV,AU,AZ={};for(AW in AX){AU=AX[AW].token;if(AU){AT=AU.elements;AV=AT.join();if(AZ[AV]===undefined){AZ[AV]=true;AY.push(AX[AW]);}}else{AY.push(AX[AW]);}}return AY;}function D(AY,AW){var AT=AY.mxIdx,AZ=0,AX,AU,Aa=AW==="r"?"rs":"cs",AV,Ac,Ab;while(AZ<=AT){Ac=AY[AZ];if(!Ac){AZ+=1;continue;}AU=Ac.forms[0].o;Ab=Ac.forms[0][Aa]||1;if(Ab>1){AX=AZ+(Ac.forms[1][Aa]||1);while(AX<Ab+AU){if(AY[AX]){AV=AY[AX].forms[0][Aa]||1;AY[AX].forms.splice(0,0,Ac.forms[0]);AX+=AV;}else{AX+=1;}}}AZ+=Ab;}}var N=mstrmojo.declare(mstrmojo.Obj,null,{grpCnt:-1,srsCnt:-1,dps:null,getChartInfo:function(){return this.gmm.getChartInfo();},getTooltipForChartHeader:function(Ab,AW,Ad){var AY=this.gmm,Ac=AY.gmCtr,AZ=Ac.rowHeaderCnt,AX=Ac.colHeaderCnt,AU,Aa,AV=AW==="r",AT;if(AV){if(AZ===0){return ;}if(Ab.length>0){if(!Ad){Ab.push(null);}}AU=AZ;Aa=AY.getRowTitleInfo();AT=this.getRowHeaders(0,"Rows","n&id&dei&o&at&idx");}else{if(AX===0){return ;}if(Ab.length>0){if(!Ad){Ab.push(null);}}AU=AX;Aa=AY.getColTitleInfo();AT=this.getColHeaders(0,"Columns","n&id&dei&o&at&idx");}B.generateToolTipContent(0,AU,AV,Aa,AT,Ab);},getColorByValue:function(Ai,Ah,Ad,Aa){var AU=this.gmm,An=AU.gmCtr,Aj=An.view.model.docModel,Af=AU.globalAttrMetricsColorMap,Ao=AU.colorType,AX,Ag,Ak=An.palette,Ab=Ak.length,Ae=AU.attrMetricsColorMapIDMap,AY,AV,Al,AT=An.thresholds,AZ,AW,Ac=AU.metricsColorMapID;if(Aa===undefined){Aa=true;}if(Ao===AM.METRICS){AZ=An.getColorByMetrics()[0];AW=this.getAssoCoordinatesWithMetricIndex(Ai,[Ah],AZ);AV=this.getPropValue(Ai,AW.C-this.getOffsetX(),"ti");if(AV!==undefined){AV=parseInt(AV,10)-1;Al=AT[AV];return(Al.fmt&&Al.fmt.bc)?mstrmojo.VisUtility.parseCSSColor(Al.fmt.bc,true):An.property.defaultsObj.shpFillClr;}if(Aa){return An.property.defaultsObj.shpFillClr;}else{return null;}}else{if(Ao===AM.NULL){return null;}}AX=this.getColorByToken(Ai,Ah,Ad);if(Ao===AM.METRICS_ITEM){AY=Ac.indexOf(AX);}else{AY=Ae&&Ae[AX];}if(AY===undefined||AY<0){return null;}if(An.globalColorMapping){var Am=Af[AY];Ag=Am&&Aj.getColorBy(Am.levels,Am.elements).color;}else{Ag=Ak[AY%Ab];}return Ag;},getColorByToken:function(Ai,Ah,Ad){var AV=this.gmm,Ak=AV.gmCtr,Am=AV.colorType,Ab=Ak.getRowColorAttrsIndex(),Ag=Ak.getColColorAttrsIndex(),Al=[],Af,Aj,Aa,Ae,AX,AY,AT,Ac,AU;if(Am===AM.METRICS_ITEM){Ae=AV.getMetricCount();if(Ae>0){if(Ad&&Ad.length>0){u.forEach(Ad,function(An){AT=(AV.getMetricIds())[An];Al.push(AT);});AX=Al.join(AQ);return AX;}Aa=Ah%Ae;AT=(AV.getMetricIds())[Aa];return AT;}I.visPrint("metric count is zero!!");return"";}if(Am===AM.ATT||Am===AM.ATT_METRICS){Aj=Ab.length;if(Aj>0){Ac=this.getHeaderObjectList(Ai,0,"all");}for(Af=0;Af<Aj;Af++){AY=Ab[Af];Al[AY.order]=Ac[AY.index];}Aj=Ag.length;if(Aj>0){AU=this.getHeaderObjectList(Ah,1,"all");}for(Af=0;Af<Aj;Af++){AY=Ag[Af];Al[AY.order]=AU[AY.index];}}else{I.visPrint("Unsupported Color By Type!");}Aj=Al.length;for(Af=0;Af<Aj;Af++){Al[Af]=Al[Af].idx;}if(Am===AM.ATT_METRICS&&Ad){var AW=Ad.length,AZ;for(AZ=0;AZ<AW;AZ++){Aa=Ad[AZ];AT=(AV.getMetricIds())[Aa];Al.push(AT);}}AX=Al.join(AQ);return AX;},getHeaderObjectList:function c(AY,AV,Aa){var AX=this.gmm,Ab=AX.modelRhs,AZ=AX.modelChs,AW=[],AU,AT;if(AV===0){AT=(Ab[Ab.length-1]);if(AT){AU=AT[AY+this.oy];g.call(AX,Aa,AU,AW,AV===0?"row":"col");}}else{AT=(AZ[AZ.length-1]);if(AT){AU=AT[AY+this.ox];g.call(AX,Aa,AU,AW,AV===0?"row":"col");}}return AW;},getRowHeaders:function q(AX,Aa,Ae){var AZ,Ac=[AX,Aa,Ae].join(":");if(this.rowHeaderPool===undefined){this.rowHeaderPool={};}AZ=this.rowHeaderPool;if(AZ[Ac]){return AZ[Ac];}var AY=this.gmm,Ad=AY.modelRhs,AV=[],Ab,AW,AU,AT=(Ad[Ad.length-1]);if(AT){AU=AT[AX+this.oy];g.call(AY,Aa,AU,AV,"row");Ab=this.gmm.gts.row;AW=AA(Ab,AV,Ae);}AZ[Ac]=AW;return AW;},getColHeaders:function w(AX,Aa,Ae){var Ad,Ac=[AX,Aa,Ae].join(":");if(this.colHeaderPool===undefined){this.colHeaderPool={};}Ad=this.colHeaderPool;if(Ad[Ac]){return Ad[Ac];}var AY=this.gmm,AZ=AY.modelChs,AV=[],Ab,AW,AU,AT=AZ[AZ.length-1];if(AT){AU=AT[AX+this.ox];g.call(AY,Aa,AU,AV,"col");Ab=this.gmm.gts.col;AW=AA(Ab,AV,Ae||"n");}Ad[Ac]=AW;return AW;},getSeriesLabel:function p(Ac,Aa,Ag){var AX,Ad=this.gmm,Ab,AY=[],Ah=null,AU=false,AW=this.getChartInfo(),AV=AE.EnumABLDirection,AZ=AW.tp,Ae=o,AT;if(AW.isABL&&AW.dirc===AV.VERTICAL){AU=true;}else{if(AW.isABL&&AW.dirc===AV.HORIZONTAL){AU=false;}else{if(AZ===Ae.BUBBLE||AZ===Ae.SCATTER){AU=true;}else{if(AZ===Ae.GRID){AU=true;}else{I.visPrint("need to be implemented for this chart type!");}}}}if(AU){var Ai=this.gmm.modelRhs;if(!Ai||Ai.length===0){return[];}AT=(Ai[Ai.length-1]);if(AT){AX=AT[Ac+this.oy];g.call(Ad,"YAxis",AX,AY,"row");Ah=this.gmm.gts.row;if(Ag===true){Ab=W(Ah,AY);}else{Ab=AA(Ah,AY,"n");}}}else{var Af=this.gmm.modelChs;if(!Af||Af.length===0){return[];}AT=(Af[Af.length-1]);if(AT){AX=AT[this.ox+Aa];g.call(Ad,"XAxis",AX,AY,"col");Ah=this.gmm.gts.col;if(Ag===true){Ab=W(Ah,AY);}else{Ab=AA(Ah,AY,"n");}}}return Ab;},getGroupElementIndexArray:function(Ab,Aa,Ad){var AY,Ag,Ac=this.gmm,AV=Ac.clusteredBarSpecialCase,AZ=[],Af=null,AU=false,AX=this.getChartInfo(),AW=AE.EnumABLDirection,AT;if(AV){return[-1];}if(AX.isABL&&AX.dirc===AW.VERTICAL){AU=true;}else{if(AX.isABL&&AX.dirc===AW.HORIZONTAL){AU=false;}}if(AU){var Ae=this.gmm.modelChs;if(!Ae||Ae.length===0){return[];}AT=(Ae[Ae.length-1]);if(AT){AY=AT[this.ox+Aa];g.call(Ac,"XAxis",AY,AZ,"col");Af=this.gmm.gts.col;Ag=e(Af,AZ,Ad);}}else{var Ah=this.gmm.modelRhs;if(!Ah||Ah.length===0){return[];}AT=(Ah[Ah.length-1]);if(AT){AY=AT[this.oy+Ab];g.call(Ac,"YAxis",AY,AZ,"row");Af=this.gmm.gts.row;Ag=e(Af,AZ,Ad);}}return Ag;},getGroupLabel:function AN(Ak,Aj,AY){var Ag,Ae,AV=this.gmm,AZ=AV.clusteredBarSpecialCase,AT=[],Af=null,AU=false,Ac=this.getChartInfo(),Ab=AE.EnumABLDirection,Al=Ac.tp,AW=o,Am=AV.getMetricCount(),AX;if(AZ){if(AY===true){var Ai,Ad=[];for(Ai=0;Ai<Am;Ai++){Ad.push({isAtt:false});}return Ad;}return[AV.getMetricNames()[Aj%Am]];}if(Ac.isABL&&Ac.dirc===Ab.VERTICAL){AU=true;}else{if(Ac.isABL&&Ac.dirc===Ab.HORIZONTAL){AU=false;}else{if(Al===AW.BUBBLE||Al===AW.SCATTER){AU=true;}else{if(Al===AW.GRID){AU=true;}else{I.visPrint("need to be implemented for this chart type!");}}}}if(AU){var Aa=this.gmm.modelChs;if(!Aa||Aa.length===0){return[];}AX=(Aa[Aa.length-1]);if(AX){Ag=AX[this.ox+Aj];g.call(AV,"XAxis",Ag,AT,"col");Af=this.gmm.gts.col;if(AY===true){Ae=W(Af,AT);}else{Ae=AA(Af,AT,"n");}}}else{var Ah=this.gmm.modelRhs;if(!Ah||Ah.length===0){return[];}AX=(Ah[Ah.length-1]);if(AX){Ag=AX[this.oy+Ak];g.call(AV,"YAxis",Ag,AT,"row");Af=this.gmm.gts.row;if(AY===true){Ae=W(Af,AT);}else{Ae=AA(Af,AT,"n");}}}return Ae;},checkExcluded:function(AW,AV){var AY=this.gmm.getMetricCount(),AX=false,AT;for(AT=0;AT<AY;AT++){var AU=this.getData(AW,AV,true,AT);if(AU!==""&&AU!==undefined&&AU!==null&&!isNaN(AU)){AX=true;break;}}return !AX;},getData:function(AW,AU,AT,AV){var AX=this.getChartInfo();if((AX.tp===o.GRID)&&!AX.isPie){return 1234;}return A.call(this,AW,AU,AT,AV);},getPropValue:function(AU,AT,AW){var AV=this.getChartInfo();if(AV.tp===o.GRID&&AW===undefined){return 1234;}return Z.call(this,AU,AT,AW);},getAssoDataWithMetricIndex:function(AT,AX,AW,AV){var AZ=this.gmm.getMetricCount(),AU=AX[0],AY=Math.floor(AU/AZ)*AZ;return A.call(this,AT,AY+AW,AV,AW);},getAssoCoordinatesWithMetricIndex:function(AT,AY,AX){var Aa=this.gmm.getMetricCount(),AW=this.getOffsetX(),AV=this.getOffsetY(),AU=AY[0],AZ=0;if(Aa>0){AZ=Math.floor(AU/Aa)*Aa;}else{AZ=AU;}return{R:AT+AV,C:AZ+AX+AW,ox:AW,oy:AV};},getSizeByMetricIndexForBubble:function V(AX,Ac){var Aa,Ab=this.gmm,Ad=Ab.gmCtr,AW=Ad.getSizeByMetrics(),AV=Ab.getMetricCount(),Ae,AZ,AY,AU,AT;if(AW.length<=0){return -1;}if(this.splitPlottingMetrics){Ae=Ac[1];AZ=Ae%AV;AT=Ad.getMetricsOnYAxis();AY=AT.indexOf(AZ);Aa=AW[AY%AW.length];}else{Ae=Ac[0];AZ=Ae%AV;AU=Ad.getMetricsOnXAxis();AY=AU.indexOf(AZ);if(AY===-1){I.visPrint("have no size by for this metric");return -1;}Aa=AW[AY%AW.length];}return Aa;},getSizeByData:function AC(Aa,Ag){var Ad,Af=o,AX=AE.EnumABLDirection,Ae=this.gmm,Ai=Ae.gmCtr,AZ=Ai.getSizeByMetrics(),AW=this.getChartInfo(),AY=Ae.getMetricCount(),Ah,AU,Ac,Ab,AV,AT;if(AW.tp!==Af.BUBBLE){if((AW.isABL&&AW.dirc===AX.VERTICAL)||AW.tp===Af.GRID){if(AZ.length>0&&AY>0){Ad=AZ[0];Ah=Ag[0];AU=Math.floor(Ah/AY)*AY;return A.call(this,Aa,AU+Ad);}return -1;}if(AW.isABL&&AW.dirc===AX.HORIZONTAL){if(AZ.length>0&&AY>0){Ad=AZ[0];Ah=Ag[0];AU=Math.floor(Ah/AY)*AY;return A.call(this,Aa,AU+Ad);}return -1;}}else{if(AZ.length<=0){return -1;}if(this.splitPlottingMetrics){Ah=Ag[1];Ac=Ah%AY;AU=Math.floor(Ah/AY)*AY;AT=Ai.getMetricsOnYAxis();Ab=AT.indexOf(Ac);Ad=AZ[Ab%AZ.length];}else{Ah=Ag[0];Ac=Ah%AY;AU=Math.floor(Ah/AY)*AY;AV=Ai.getMetricsOnXAxis();Ab=AV.indexOf(Ac);if(Ab===-1){I.visPrint("have no size by for this metric");return -1;}Ad=AZ[Ab];}return A.call(this,Aa,AU+Ad);}},getMetricNumberFormat:function(AU){var AT=this.gmm;return AT.getMetricNumberFormat(AU);},printAll:function(){I.visPrint("-----------------------("+this.cri+","+this.cci+")+------------------------------");var AU,AT;for(AU=0;AU<this.ht;AU++){var AV="";for(AT=0;AT<this.wd;AT++){var AW=this.items[AU][AT];if(!AW.v){I.visPrint("Why!");}AV+=(AW.v+" ");}I.visPrint(AV);}},getASingleColumn:function(AZ,Aa){var AW=AZ+Aa,AY=[],AU=this.ox,AT=this.oy,AX,AV;for(AX=0;AX<this.ht;AX++){for(AV=0;AV<this.wd;AV++){if(AV===AW){AY.push({R:AX+AT,C:AV+AU,mIdx:Aa});if(AL(AV+AU)===false){I.visPrint("warning");}}}}},getGraphCellSingleColumn:function(AT,AW,AX){var Ac=AW.length,Aa=[],AV=this.ox,AU=this.oy,AZ,AY,Ad,Ab;for(AZ=0;AZ<this.ht;AZ++){Ad=[];for(AY=0;AY<Ac;AY++){Ab=AW[AY];Ad.push({R:AZ+AU,C:AT+Ab+AV,mIdx:Ab,grp:AX,didx:AY});if(AL(AT+Ab+AV)===false){I.visPrint("warning");}}Aa.push(Ad);}return Aa;},getGraphCellSingleRow:function(AX,AY){var AV=this.gmm.getMetricCount(),Ag=this.items[AY],Ab=Ag.length/AV,Ae=AX.length,Ac=[],AW=this.ox,AU=this.oy,Aa,AZ,Ad,AT,Af;for(Aa=0;Aa<Ab;Aa++){AT=Aa*AV;Af=[];for(AZ=0;AZ<Ae;AZ++){Ad=AX[AZ];Af.push({R:AY+AU,C:AT+Ad+AW,mIdx:Ad,grp:AY,didx:AZ});if(AL(AT+Ad+AW)===false){I.visPrint("warning");}}Ac.push(Af);}return Ac;},getGroupCount:function(){if(this.grpCnt>0){return this.grpCnt;}var AY,AU=this.getChartInfo(),AW=AU.tp,AV=AE.EnumABLDirection,AX=o,AZ=this.gmm,AT=AZ.clusteredBarSpecialCase,Aa=this.gmm.getMetricCount();if(AU.isABL&&AU.dirc===AV.VERTICAL){if(AT){AY=this.pmi.length;}else{if(Aa===0){AY=this.wd;}else{AY=this.wd/Aa;}}this.grpCnt=AY;return AY;}if(AU.isABL&&AU.dirc===AV.HORIZONTAL){if(AT){AY=this.pmi.length;}else{AY=this.items.length;}this.grpCnt=AY;return AY;}if(AW===AX.BUBBLE||AW===AX.SCATTER){if(!this.splitPlottingMetrics){var Ab=this.pmi;AY=Ab.length;this.grpCnt=AY;return AY;}AY=1;this.grpCnt=AY;return AY;}if(AW===AX.GRID){if(Aa===0){return this.wd;}return this.wd/Aa;}I.visPrint("LocalDataSet::getGroupCount for this type is not implemented");return 0;},getSeriesCount:function(){if(this.srsCnt>0){return this.srsCnt;}var Aa=this.getChartInfo(),AZ=AE.EnumABLDirection,AW=o,AV,AU=this.gmm,AY=AU.clusteredBarSpecialCase,AX=AU.getMetricCount(),AT;if(Aa.isABL&&Aa.dirc===AZ.VERTICAL){if(AY){AT=this.ht;}else{if(!this.splitPlottingMetrics){AT=this.ht*this.pmi.length;}else{AT=this.ht;}}}else{if(Aa.isABL&&Aa.dirc===AZ.HORIZONTAL){if(AY){AT=this.ht;}else{if(AX===0){AV=this.wd;}else{AV=this.wd/AX;}if(!this.splitPlottingMetrics){AT=AV*this.pmi.length;}else{AT=AV;}}}else{if(Aa.tp===AW.BUBBLE||Aa.tp===AW.SCATTER){if(!this.splitPlottingMetrics){AT=this.ht;}else{AT=this.ht;}}else{if(Aa.tp===AW.GRID){if(this.items){AT=this.items.length;}else{AT=1;}}else{AT=0;I.visPrint("LocalDataSet::getSeriesCount for this type is not implemented");}}}}this.srsCnt=AT;return AT;},getDataInGroup:function(AY,Aw,Af){var Aq,As,Az,Au,At,Am=this.getChartInfo(),Ak=AE.EnumABLDirection,Ad=o,Av=Am.isPie,AZ=this.gmm,Ax=AZ.gmCtr,Ab=Ax.onlyMetricNamesOnAxisForGridPie,Ao=Ax.hasTotalForPie(),AV,Ah,Aj,AX,Ai,Ap,AW,Aa,Ag,Ar,An,Ay,Ae=false,AU=Ax.totalStartCols,Al=Ax.piePartition;if(Am.tp===Ad.BUBBLE||Am.tp===Ad.SCATTER){Aa=this.splitPlottingMetrics;Ag=AZ.getMetricCount();if(Ag===0){Ag=1;}Aq=[];Ar=this.wd/Ag;for(Au=0;Au<Ar;Au++){Ay=Au*Ag;An=AY;if(Aa){An=0;}Az=this.getGraphCellSingleColumn(Ay,Aw[An],AY);if(Av){if(!Ao){Ah=[];AV=AS(Az,this.oy,Ax.piePartition);Aj=AV.length;for(At=0;At<Aj;At++){AW=mstrmojo.hash.clone(AV[At][0]);AW.fakeTotal=true;Ah.push(AW);}}else{AV=[];Ah=X(Az,this.oy,Ax.totalRows,AV);Aj=AV.length;}for(At=0;At<Aj;At++){Ah[At].slicesOfPie=AV[At];}Aq=Aq.concat(Ah);}else{Aq=Aq.concat(Az);}}return Aq;}if((Am.isABL&&Am.dirc===Ak.VERTICAL)||(Am.tp===Ad.GRID)){Aq=[];var Ac=this.wd/this.getGroupCount();Ay=Ac*AY;As=Aw.length;if(As===0&&(Am.tp===Ad.GRID)&&Av){As=1;Ae=true;}for(Au=0;Au<As;Au++){if(Ab){Az=this.getGraphCellSingleColumn(Ay,[Af],AY);}else{if(Ae){Az=this.getGraphCellSingleColumn(Ay,[0],AY);}else{Az=this.getGraphCellSingleColumn(Ay,Aw[Au],AY);}}if(Av){if(!Ao){Ah=[];AV=AS(Az,this.oy,Ax.piePartition);Aj=AV.length;for(At=0;At<Aj;At++){AW=mstrmojo.hash.clone(AV[At][0]);AW.fakeTotal=true;Ah.push(AW);}}else{AV=[];Ah=X(Az,this.oy,Ax.totalRows,AV);Aj=AV.length;}for(At=0;At<Aj;At++){Ah[At].slicesOfPie=AV[At];}Aq=Aq.concat(Ah);}else{Aq=Aq.concat(Az);}}return Aq;}if(Am.isABL&&Am.dirc===Ak.HORIZONTAL){Aq=[];As=Aw.length;for(Au=0;Au<As;Au++){Az=this.getGraphCellSingleRow(Aw[Au],AY);if(Av){if(!Ao){AX=[];Ai=x(Az,AZ.getMetricCount(),AX,false,AU,Al);Ap=AX.length;for(At=0;At<Ap;At++){var AT=mstrmojo.hash.clone(AX[At][0]);AT.fakeTotal=true;Ai.push(AT);}}else{AX=[];Ai=x(Az,AZ.getMetricCount(),AX,true,AU,Al);Ap=AX.length;}for(At=0;At<Ap;At++){Ai[At].slicesOfPie=AX[At];}Aq=Aq.concat(Ai);}else{Aq=Aq.concat(Az);}}return Aq;}I.visPrint("LocalDataSet::getDataInGroup for this type is not implemented");},getMaxValue:function(){return 9999;},getMinValue:function(){return -9999;},getRowCount:function(){return this.ht;},getColumnCount:function(){return this.wd;},getOffsetX:function(){return this.ox;},getOffsetY:function(){return this.oy;},getMetrics:function(){var AT=this.gmm.metrics;if(!AT){I.visPrint("none metrics found!");return null;}return AT;},getMetric:function(AU){var AT=this.getMetrics();if(AT){if(AT.es.length>AU){return AT.es[AU];}return null;}return null;},clearDataProviders:function(){this.dps=null;},generateDataProvider:function K(){if(this.dps){return this.dps;}var AT=this.gmm,AW,Aq,Ay,As,Ai,Ar,Ak,Ao,Al,Aj=this.trConfigPool,Av=AT.gmCtr,Aa,Ax=this,Aw=AT.shallWeUseGroupInfo,Ab=AT.clusteredBarSpecialCase,AV=AT.onlyMetricNamesOnAxisForGridPie,At=AT.isMetricNamesOnXAxis,AU=this.splitPlottingMetrics,Ae=this.getChartInfo(),AY=o,Ac=AE.EnumABLDirection,Ad=this.metricsOnAngleBy,Af=this.mpos,Am=this.metrics,Ah=0,An=0,Ap=this.splitPie,Au=AT.isBlankGrid;if(Aj){var Ag=Aj.globalProp;if(Ag){Ah=Ag.trdBwdFst!==undefined?Ag.trdBwdFst:0;An=Ag.trdFwdFst!==undefined?Ag.trdFwdFst:0;}}if(Aw){Aa=Av.getGroupInfo(true);}Ai=this.getGroupCount();if(Ae.tp===AY.BUBBLE||Ae.tp===AY.SCATTER){Aq=this.pmi;Ay=[];if(!AU){As=[];for(Ao=0;Ao<Ai;Ao++){Ar=this.getDataInGroup(Ao,Aq);As.push(Ar);}Ak=this.addDisposable(new AE.GMEnhancedDataProvider({fwdSteps:An,bwdSteps:Ah,pmi:Aq,data:As,lds:this,sbc:true,dataSbc:false,metrics:Am,mpos:Af,metricsOnAngleBy:Ad,splitPie:Ap}));Ay.push(Ak);this.dps=Ay;}else{for(Al=0;Al<Aq.length;Al++){AW=Aq.slice(Al,Al+1);As=[];for(Ao=0;Ao<Ai;Ao++){Ar=this.getDataInGroup(Ao,AW);As.push(Ar);}Ak=this.addDisposable(new AE.GMEnhancedDataProvider({fwdSteps:An,bwdSteps:Ah,pmi:AW,data:As,lds:this,sbc:true,dataSbc:false,metrics:Am,mpos:Af,metricsOnAngleBy:Ad,splitPie:Ap}));Ay.push(Ak);}this.dps=Ay;}u.forEach(Ay,function(A0){var A1=A0.fwdLbs,Az=A0.bwdLbs;if(A1&&A1.length>0){Ax.flb=A1;}if(Az&&Az.length>0){Ax.blb=Az;}});return Ay;}if(Ae.isABL&&Ae.dirc===Ac.VERTICAL){Aq=this.pmi;Ay=[];if(!AU){As=[];if(Ab){for(Ao=0;Ao<Ai;Ao++){Ar=this.getDataInGroup(0,Aq.slice(Ao,Ao+1));As.push(Ar);}}else{for(Ao=0;Ao<Ai;Ao++){Ar=this.getDataInGroup(Ao,Aq);As.push(Ar);}}Ak=this.addDisposable(new AE.GMEnhancedDataProvider({fwdSteps:An,bwdSteps:Ah,pmi:Aq,data:As,lds:this,sbc:true,dataSbc:true,metrics:Am,mpos:Af,metricsOnAngleBy:Ad,splitPie:Ap}));Ay.push(Ak);this.dps=Ay;u.forEach(Ay,function(A0){var A1=A0.fwdLbs,Az=A0.bwdLbs;if(A1&&A1.length>0){Ax.flb=A1;}if(Az&&Az.length>0){Ax.blb=Az;}});}else{if(Aw){u.forEach(Aa,function(Az){AW=[];u.forEach(Az,function(A0){if(A0!==undefined&&A0>=0){AW.push([A0]);}});As=[];for(Ao=0;Ao<Ai;Ao++){Ar=Ax.getDataInGroup(Ao,AW);As.push(Ar);}Ak=Ax.addDisposable(new AE.GMEnhancedDataProvider({fwdSteps:An,bwdSteps:Ah,pmi:AW,data:As,lds:Ax,sbc:true,dataSbc:true,metrics:Am,mpos:Af,metricsOnAngleBy:Ad,splitPie:Ap}));Ay.push(Ak);});}else{for(Al=0;Al<Aq.length;Al++){AW=Aq.slice(Al,Al+1);As=[];for(Ao=0;Ao<Ai;Ao++){Ar=this.getDataInGroup(Ao,AW);As.push(Ar);}Ak=this.addDisposable(new AE.GMEnhancedDataProvider({fwdSteps:An,bwdSteps:Ah,pmi:AW,data:As,lds:this,sbc:true,dataSbc:true,metrics:Am,mpos:Af,metricsOnAngleBy:Ad,splitPie:Ap}));Ay.push(Ak);}}this.dps=Ay;u.forEach(Ay,function(A0){var A1=A0.fwdLbs,Az=A0.bwdLbs;if(A1&&A1.length>0){Ax.flb=A1;}if(Az&&Az.length>0){Ax.blb=Az;}});}return Ay;}if(Ae.isABL&&Ae.dirc===Ac.HORIZONTAL){Aq=this.pmi;Ay=[];if(!AU){As=[];if(Ab){for(Ao=0;Ao<Ai;Ao++){Ar=this.getDataInGroup(0,Aq.slice(Ao,Ao+1));As.push(Ar);}}else{for(Ao=0;Ao<Ai;Ao++){Ar=this.getDataInGroup(Ao,Aq);As.push(Ar);}}Ak=this.addDisposable(new AE.GMEnhancedDataProvider({fwdSteps:An,bwdSteps:Ah,pmi:Aq,data:As,lds:this,sbc:true,dataSbc:true,metrics:Am,mpos:Af,metricsOnAngleBy:Ad,splitPie:Ap}));Ay.push(Ak);this.dps=Ay;u.forEach(Ay,function(A0){var A1=A0.fwdLbs,Az=A0.bwdLbs;if(A1&&A1.length>0){Ax.flb=A1;}if(Az&&Az.length>0){Ax.blb=Az;}});}else{if(Aw){u.forEach(Aa,function(Az){AW=[];u.forEach(Az,function(A0){if(A0!==undefined&&A0>=0){AW.push([A0]);}});As=[];for(Ao=0;Ao<Ai;Ao++){Ar=Ax.getDataInGroup(Ao,AW);As.push(Ar);}Ak=Ax.addDisposable(new AE.GMEnhancedDataProvider({fwdSteps:An,bwdSteps:Ah,pmi:AW,data:As,lds:Ax,sbc:true,dataSbc:true,metrics:Am,mpos:Af,metricsOnAngleBy:Ad,splitPie:Ap}));Ay.push(Ak);});}else{for(Al=0;Al<Aq.length;Al++){AW=Aq.slice(Al,Al+1);As=[];for(Ao=0;Ao<Ai;Ao++){Ar=this.getDataInGroup(Ao,AW);As.push(Ar);}Ak=this.addDisposable(new AE.GMEnhancedDataProvider({fwdSteps:An,bwdSteps:Ah,pmi:AW,data:As,lds:this,sbc:true,dataSbc:true,metrics:Am,mpos:Af,metricsOnAngleBy:Ad,splitPie:Ap}));Ay.push(Ak);}}this.dps=Ay;u.forEach(Ay,function(A0){var A1=A0.fwdLbs,Az=A0.bwdLbs;if(A1&&A1.length>0){Ax.flb=A1;}if(Az&&Az.length>0){Ax.blb=Az;}});}return Ay;}if(Ae.tp===AY.GRID){Aq=this.pmi;Ay=[];if(!AU){As=[];var AX,AZ;for(Ao=0;Ao<Ai;Ao++){if(AV){AX=[];AZ=[];u.forEach(Ad||[],function(Az){Ar=this.getDataInGroup(Ao,Aq,Az);AX.push(Ar);},this);if(At){As=As.concat(AX);}else{u.forEach(AX||[],function(Az){AZ=AZ.concat(Az);});As.push(AZ);}}else{Ar=this.getDataInGroup(Ao,Aq);As.push(Ar);}}if(AV){Ap=false;}Ak=this.addDisposable(new AE.GMDataProvider({pmi:Aq,data:As,lds:this,sbc:false,dataSbc:true,metrics:Am,mpos:Af,metricsOnAngleBy:Ad,splitPie:Ap,isBlankGrid:Au}));Ay.push(Ak);this.dps=Ay;}else{for(Al=0;Al<Aq.length;Al++){AW=Aq.slice(Al,Al+1);As=[];for(Ao=0;Ao<Ai;Ao++){Ar=this.getDataInGroup(Ao,AW);As.push(Ar);}Ak=this.addDisposable(new AE.GMDataProvider({pmi:AW,data:As,lds:this,sbc:false,dataSbc:true,metrics:Am,mpos:Af,metricsOnAngleBy:AW[0],splitPie:Ap,isBlankGrid:Au}));Ay.push(Ak);}this.dps=Ay;}return Ay;}I.visPrint("generateDataProvider Need to be implemented!");}});mstrmojo.gm.GMDataModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gm.GMDataModel",gmCtr:undefined,modelChs:[],modelRhs:[],rp:null,cp:null,gts:null,rct:-1,cct:-1,cir:-1,cic:-1,ldss:[],plottingMetricsIndex:null,splitPlottingMetrics:null,zoneNames:["dummy","Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","AngleBy"],metrics:null,chtInfo:null,colorType:AM.ATT,metricsType:undefined,getBreakByUnits:function(){var AT=this.dz,AU=[],AV,AW=AT.BreakBy;if(AW){AV=AW.TemplateUnit;if(AV){u.forEach(AV,function(AX){AU.push(S.clone(AX));});}}return AU;},getChartInfo:function(){return this.gmCtr.getChartInfo();},getMetricNames:function(){return this.getMetricProp("n");},getMetricIds:function(){return this.getMetricProp("oid");},getFullNumberFormat:function(){return this.fullNf;},isMetricInZone:function(AZ,AV){var AU=this.dz,AY,AW=false,AX,AT;AY=this.zoneNames[AV];if(AU&&AY){AT=AU[AY];AX=AT.TemplateMetric;u.forEach(AX,function(Aa){if(Aa.idx===AZ){AW=true;}});}return AW;},getMetricProp:function(AZ){var AX=[],AW,AV,AU=this.metrics,AY;if(!AU){return AX;}AY=AU.es;AV=AY.length;for(AW=0;AW<AV;AW++){var AT=AY[AW];if(AZ){AX.push(AT[AZ]);}else{AX.push(AT);}}return AX;},getUnitAttributesCountOnRow:function(AX){var Ab=this.gts.row,AZ=Ab.length,AY=this.gmCtr,Ac,AU,AW,AV,AT=this.getChartInfo(),Aa=0;if(AZ!==1){if(AX){u.forEach(Ab,function(Ad){Aa+=B.getAttributeFormCnt(Ad);});}else{Aa=AZ;}return Aa;}if(AX){Ac=AY.getGMHeaderCount("Rows");AU=AY.getGMHeaderCount("YAxis");AW=AY.getGMHeaderCount("BreakBy");AV=AY.getGMHeaderCount("SliceBy");}else{Ac=AY.getAttributesOnDropZone("Rows","n").length;AU=AY.getAttributesOnDropZone("YAxis","n").length;AW=AY.getAttributesOnDropZone("BreakBy","n").length;AV=AY.getAttributesOnDropZone("SliceBy","n").length;}if(AT.isABL&&AT.dirc===AE.EnumABLDirection.HORIZONTAL){return Ac+AU;}return Ac+AW+AU+AV;},getUnitAttributesCountOnCol:function(AX){var AW,AU,AZ=this.gts.col,AY=0;AU=AZ.length;var AT=this.gts.col[AU-1];if(AT&&AT.otp===-1){AY=AU-1;}else{AY=AU;}if(AX){var AV=0;for(AW=0;AW<AY;AW++){AV+=B.getAttributeFormCnt(AZ[AW]);}return AV;}else{return AY;}},getPathToHeaderObject:function(AW,AU,AY){var AV=[],AT,AX;l(AU,AV);if(AW===0){AX=this.gts.row;}else{AX=this.gts.col;}AT=AA(AX,AV,AY);return AT;},collectHeaderObj:function(AT,AV,AU){l.call(this,AT,AV,AU);},getMetricCount:function(){var AT=this.metrics;if(!AT){return 0;}return(AT.es?AT.es.length:0);},getMetricNumberFormat:function(AT){var AV=this.mx,AU;if(AV){AU=AV[AT];return f(AU.numfmt);}return undefined;},init:function AJ(AX){this.ldss=[];this.modelChs=[];this.modelRhs=[];this._super(AX);this.cir=this.cp.length;this.cic=this.rp.length;var AW,AV,AY=this.gts.row.length,AU=this.gts.col.length;var AT=this.gts.col[AU-1];this.mpos=-1;if(AT&&AT.otp===-1){this.metrics=AT;this.mpos=AU-1;}for(AW=0;AW<AY;AW++){this.modelRhs.push({});}for(AV=0;AV<AU;AV++){this.modelChs.push({});}this.createPlottingMetricsIndex();},createLocalDataSet:function M(Ae,Ad){var Ag=this.gmCtr,Ai=Ag.getChartInfo(),Aa=Ag.getMetricsOnAngleBy(),AZ=this.rp,AV=this.cp,AU=this.rct,Ak=this.cct,AT=this.ldss,AW,Aj,Ab;var AY=-1;var Ah=-1;if(Ad===AV.length-1){AY=Ak-AV[Ad];}else{AY=AV[Ad+1]-AV[Ad];}if(Ae===AZ.length-1){Ah=AU-AZ[Ae];}else{Ah=AZ[Ae+1]-AZ[Ae];}if(Ah===0){Ah=1;}if(AY===0){AY=1;}var AX=this.addDisposable(new N({trConfigPool:this.trConfigPool,cri:Ae,cci:Ad,ox:AV[Ad],oy:AZ[Ae],wd:AY,ht:Ah,gmm:this,pmi:this.plottingMetricsIndex,metrics:this.metrics,mpos:this.mpos,splitPlottingMetrics:this.splitPlottingMetrics,metricsOnAngleBy:Aa,splitPie:Ag.splitPiesInGraphCellForABL()}));AT[this.cir*Ae+Ad]=AX;this.feedLds(Ae,Ad);if(Ai.isABL){AX.fses={};AX.bses={};AX.xvar={};Aj=this.getMetricCount();for(AW=0;AW<Aj;AW++){Ab=Ag.getTrendLinesObjectForMetric(AW,Ae,Ad,undefined,true)[0];if(Ab&&Ab.inChartModel[0]){var Af=Ab.inChartModel,Ac=Ab["x-vars"];if(Ac&&Ac.length>0){AX.validXVar=Ac;}u.forEach(Af,function(Am){var An=Am.fse,Al=Am.bse;if(An&&An.length>0){AX.validFse=An;}if(Al&&Al.length>0){AX.validBse=Al;}});}}}},feedLds:function G(Aa,AZ){var Ai=this.gmCtr,Ad=Ai.firstRes,AU=Ad.gvs,AV=AU.items,Ah=this.dataRect,Ac=this.ldss,Ab=this.rp,Ag=this.cp,AX=this.rct,AT=this.cct,Ae,Af=Ac[Aa*this.cir+AZ],AW,AY;if(!AV||Ab[Aa]===undefined||Ag[AZ]===undefined||Ab[Aa]>Ah.y+Ah.h||Ag[AZ]>Ah.x+Ah.w){return ;}AW=AV.slice(Ab[Aa],(Ab[Aa+1]||AX));Ae=[];for(AY=0;AY<AW.length;AY++){Ae.push(AW[AY].items.slice(Ag[AZ],(Ag[AZ+1]||AT)));}Af.items=Ae;},feedLdss:function AF(AT,AW,AU,AV){this.dataRect={x:AT,y:AW,w:AU,h:AV};},feedChs:function AI(Aj){var An,Ak,Ag,Ab=this.modelChs,Af=Aj.items,As=Af.length,AZ=this.getUnitAttributesCountOnCol(),Aq=this.gts.col,AU,Al,AW,Ai,Am,Ae,Ad,Ar=false;for(An=0;An<As;An++){AU=AH(this.gts.col,An,false);Al=AU.depth;Ad=this.gts.col[Al];Ae=Al;Ag=Ab[Al];AW=Af[An].items;Ai=AW.length;Am=null;for(Ak=0;Ak<Ai;Ak++){var AY=AW[Ak];Ar=true;if(!Ag[AY.o]){Ag[AY.o]={forms:[]};}else{Ar=false;}Ag[AY.o].forms.push(AY);if(AY.rs!==undefined&&AY.rs>1){var Aa=AY.rs;for(var AT=0;AT<Aa-1;AT++){var Ah=S.copy(AY);Ah.rs=1;Ah.headerText="";Ag[AY.o].forms.push(Ah);}}if(Am){Am.next=AY;}if(Ag.mxIdx===undefined||Ag.mxIdx<AY.o){Ag.mxIdx=AY.o;}Am=AY;AY.headerID=AY.idx;if(AY.idx>=0){AY.headerText=this.headerInfoToProp(1,AY,"n")[0];if(AY.cet){var AV=this.cetSelectors=this.cetSelectors||{attrs:[],metrics:[]},Ap=Ad.es[lastHeaderInRow.idx];AV.attrs.push({tid:lastHeaderInRow.cet,id:Ap.id,n:Ap.n});}}else{AY.headerText="";}if(AY.fi!==undefined){if(Aq[Al].otp===12){AY.fid=Aq[Al].fs[AY.fi].id;}else{if(Aq[Al].otp>=0){AY.fid=Aq[Al].id;}}}if(AY.stt){AY.headerID=-1;if(AY.cs===undefined&&AY.rs!==undefined){AY.cs=AY.rs;}}if(Ag.length===undefined){Ag.length=1;}else{if(Ar){Ag.length++;}}}}var Ac=this.gts.col,AX,Ao;for(An=0,Ao=Ac.length;An<Ao;An++){AX=Ac[An];if(typeof AX.t==="number"&&AX.t===1){if(!AX.rs||AX.rs<=1){continue;}Ag=Ab[An];Ag.isCustomGroupWithBanding=true;D(Ag,"c");}}for(An=1;An<=Ae;An++){j(Ab[An-1],Ab[An],"cs");}for(An=0;An<AZ;An++){r.call(this,Ab[An],"cs");}},feedRhs:function F(AU){var Ap,An,Aq,Am=this.modelRhs,Ai=AU.items,Au=this.gmCtr,As=this.gts.row,Al=As.length,Aa=Ai.length,Ao;if(Aa===1){var AX=Au.getAttributesOnDropZone("Rows","n"),AV=Au.getAttributesOnDropZone("YAxis","n");if(this.eg||(Al===0&&(AX.length+AV.length===0))){Aa=0;}}for(Ap=0;Ap<Aa;Ap++){var Aj=Ai[Ap].items;var Aw=Aj.length;while(Aw--){var At=Aj[Aw];At.headerID=At.idx;Ao=At.tui;if(At.stt){At.headerText="Subtotal";At.headerID=-1;}else{if(At.idx>=0){At.headerText=this.headerInfoToProp(0,At,"n")[0];if(At.cet){var AY=this.cetSelectors=this.cetSelectors||{attrs:[],metrics:[]},Ah=this.gts.row[Ao],Ar=Ah.es[At.idx];AY.attrs.push({tid:At.cet,id:Ar.id,n:Ar.n});}}else{At.headerText="";}}if(At.fi!==undefined){At.fid=As[Ao].fs[At.fi].id;}var AT=Am[Ao];if(!AT[At.o]){AT[At.o]={forms:[]};if(AT.length===undefined){AT.length=1;}else{AT.length++;}}var AW=S.copy(At);AT[At.o].forms.push(AW);if(AT.mxIdx===undefined||AT.mxIdx<At.o){AT.mxIdx=At.o;}if(At.cs&&At.cs>1){var AZ=At.cs,Af,Ak;for(Af=0;Af<AZ-1;Af++){Ak=S.copy(At);Ak.cs=1;Ak.headerText="";AT[At.o].forms.push(Ak);}AW.cs=1;}}}var Ae,Av;for(Ap=0;Ap<Al;Ap++){Ae=Am[Ap];Av=Ae.mxIdx;for(An=0;An<=Av;An++){var Ab=Ae[An];if(Ab&&Ab.forms){Ab.forms.reverse();}}}var Ad=this.gts.row,Ac,Ag;for(Ap=0,Aq=Ad.length;Ap<Aq;Ap++){Ac=Ad[Ap];if(typeof Ac.t==="number"&&Ac.t===1){if(!Ac.cs||Ac.cs<=1){continue;}Ag=Am[Ap];Ag.isCustomGroupWithBanding=true;D(Ag,"r");}}for(Ap=1;Ap<Al;Ap++){j(Am[Ap-1],Am[Ap],"rs");}for(Ap=0;Ap<Al;Ap++){r.call(this,Am[Ap],"rs");}},extractInfoLowestHeaderInfoToAttrObj:function(){AP(this.modelChs);AP(this.modelRhs);},createPlottingMetricsIndex:function(){var Al=this.gmCtr,AX=o,Aa=Al.getChartInfo(),Am,Ad,Ac,Ah,Af,Aj,AV,Ab,AZ,AU,Ak,AT,Ag,AW,AY=AE.EnumABLDirection,Ae;Ab=Al.getMetricsOnXAxis();AZ=Al.getMetricsOnYAxis();AU=Al.getSizeByMetrics();Ak=Ab.length;AT=AZ.length;AW=AU.length;if(Aa.isABL){AV=[];if(Aa.dirc===AY.VERTICAL){Ae=AZ;}else{Ae=Ab;}Ag=Ae.length;for(Ah=0;Ah<Ag;Ah++){AV.push([Ae[Ah]]);}}if(Aa.tp===AX.GRID&&Al.isPie===false){AV=[[0]];}else{if(Aa.tp===AX.GRID&&Al.isPie===true){if(this.splitPlottingMetrics){Am=Al.getMetricsOnAngleBy();Ad=Am.length;AV=[];for(Ac=0;Ac<Ad;Ac++){Aj=[];Aj.push(Am[Ac]);AV.push(Aj);}}else{AV=[[0]];}}else{if(Aa.tp===AX.BUBBLE||Aa.tp===AX.SCATTER){AV=[];if(this.splitPlottingMetrics){for(Af=0;Af<AT;Af++){for(Ah=0;Ah<Ak;Ah++){AV.push([Ab[Ah],AZ[Af]]);}}}else{var Ai=Math.min(Ak,AT);if(Aa.tp===AX.BUBBLE){Ai=Math.min(Ai,AW);}for(Ah=0;Ah<Ai;Ah++){AV.push([Ab[Ah],AZ[Ah]]);}}}}}this.plottingMetricsIndex=AV;return AV;},headerInfoToProp:function(AT,AW,AX){var AV=[AW];var AU;if(AT===0){AU=this.gts.row;}else{AU=this.gts.col;}return AD(AU,AV,AX);},collectHeadersObjects:function(AV,AX){var AT=null;var AU;if(AV===0){AT=this.modelRhs;AU=AH(this.gts.row,AX,true);}else{AT=this.modelChs;AU=AH(this.gts.col,AX,false);}var AW=AT[AU.depth];return AR(AW,100,AU.formIndex,AV);},collectHeadersLabels:function(AT,AW){var AV=this.collectHeadersObjects(AT,AW);var AU;if(AT===0){AU=this.gts.row;}else{AU=this.gts.col;}return AD(AU,AV,"n");},getRowHeaderObj:function(AY,AU){var Ab=this.modelRhs,AW=AH(this.gts.row,AU,true),AV=AW.depth,AZ=AW.formIndex,AX=Ab[AV],Aa=AY;while(AX[Aa]===undefined&&Aa>=0){Aa--;}if(Aa>=0){var AT=AX[Aa].forms[AZ];if(!AT.rs){AT.rs=1;}if(AT.o<=AY&&(AT.o+AT.rs)>AY){return AT;}}I.visPrint("no row header is found! maybe we need to retrieve it from server");},getColHeaderObj:function(Aa,AT){var AX=this.modelChs,AW=AH(this.gts.col,AT,false),AV=AW.depth,AY=AW.formIndex,Ab=AX[AV],AZ=Aa;while(Ab[AZ]===undefined&&AZ>=0){AZ--;}if(AZ>=0){var AU=Ab[AZ].forms[AY];if(!AU.cs){AU.cs=1;}if(AU.o<=Aa&&(AU.o+AU.cs)>Aa){return AU;}}I.visPrint("no column header is found! maybe we need to retrieve it from server");},getDropZoneInfo:function Y(){},getLocalDataSet:function L(AU,AV){var AT=AU*this.cir+AV;if(!this.ldss[AT]){this.createLocalDataSet(AU,AV);}return this.ldss[AT];},linearSearchMapGridIndexToChart:function(AU,AV){var AT=AV.length-1;while(true){if(AU>=AV[AT]){return AT;}AT--;}},mapGridIndexToChart:function(AW,AX){var AT=0,AU,AV=AX.length-1;if(AW>=AX[AV]){return AV;}AV--;AU=parseInt((AT+AV)/2);while(AV>=AT){if(AX[AU]<=AW&&AX[AU+1]>AW){return AU;}else{if(AX[AU+1]<=AW){AT=AU+1;}else{AV=AU-1;}AU=parseInt((AT+AV)/2);}}return this.linearSearchMapGridIndexToChart(AW,AX);},mapChartIndexToGrid:function(AT,AU){return AU[AT];},getRowTitleInfo:function(){if(this.rwTtInfo){return this.rwTtInfo;}var AU=this.gts,AX=AU.row,AT=[],AW=AX.length,AV;for(AV=0;AV<AW;AV++){AT=AT.concat(d.call(this,AX[AV],true,AV));}this.rwTtInfo=AT;return AT;},isSepByMetricsForBubbleScatter:function(){var AT=this.gmCtr,AV=AT.getChartInfo(),AU=AV.tp;return(AU===o.BUBBLE||AU===o.SCATTER)&&(P.MetricsByColumn===this.metricsType||P.MetricsByRow===this.metricsType);},getColTitleInfo:function(){if(this.colTtInfo){return this.colTtInfo;}var AU=this.gts,AV=AU.col,AT=[],AX=AV.length,AW;for(AW=0;AW<AX;AW++){AT=AT.concat(d.call(this,AV[AW],false,AW));}this.colTtInfo=AT;return AT;},getMetricIDsFromIndex:function(AT){return k(this.metrics,AT,"oid");},getMetricIDFromIndex:function(AT){return k(this.metrics,[AT],"id")[0];},getMetricNamesFromIndex:function(AT){return k(this.metrics,AT,"n");},getMetricCondenseFromIndex:function(AT){return k(this.metrics,AT,"cds");},addColorMetricInAngle:function(){var Ab=0,Aa=0,Ah=this.metricsColorMap,AX=this.metricsColorMapID,Ad,AY,Ag=this.gmCtr,AW=Ag.getChartInfo(),Af=Ag.getMetricsOnAngleBy(),Ae=this.getMetricIDsFromIndex(Af),AZ=this.getMetricNamesFromIndex(Af),AT=Ae.length,AV=Ah.length;if((AW.isPie||AW.isRing)&&AT){var AU=[];var Ac=[];for(Aa=0;Aa<AV;++Aa){for(Ab=0;Ab<AT;++Ab){Ad=Ah[Aa]+AQ+AZ[Ab];AY=AX[Aa]+AQ+Ae[Ab];AU.push(Ad);Ac.push(AY);}}this.metricsColorMap=AU;this.metricsColorMapID=Ac;}},constructMetricColorMap:function(){var Aj=0,Ag=0,An=this.gmCtr,Ab=An.getChartInfo(),AU=Ab.tp,Ai=An.getMetricsOnXAxis(),AZ=An.getMetricsOnYAxis(),Am=An.getSizeByMetrics(),Ak=An.getMetricsOnAngleBy(),Ae=this.getMetricIDsFromIndex(Ai),AT=this.getMetricIDsFromIndex(AZ),Ac=this.getMetricIDsFromIndex(Am),Ap=this.getMetricIDsFromIndex(Ak),Al=Ab.dirc===1,AY=this.getMetricNamesFromIndex(Ak),Ah=Math.min(Ai.length,AZ.length),Ad=this.getMetricNames();if(Am.length>0){Ah=Math.min(Ah,Am.length);}var Ao=this.metricsColorMap=[];var AV=this.metricsColorMapID=[];if(Ab.isABL){var AW=Al?Ae:AT;var Af=Al?Ai:AZ;for(Aj=0;Aj<AW.length;++Aj){Ag=Aj;Ao.push(Ad[Af[Ag]]);AV.push(AW[Ag]);}this.addColorMetricInAngle();}else{if(AU===o.BUBBLE||AU===o.SCATTER){var AX;var Aa;if(this.isSepByMetricsForBubbleScatter()){for(Aj=0;Aj<Ai.length;++Aj){for(Ag=0;Ag<AZ.length;++Ag){AX=Ad[Ai[Aj]]+AQ+Ad[AZ[Ag]];Aa=Ae[Aj]+AQ+AT[Ag];if(AU===o.BUBBLE){AX+=(AQ+Ad[Am[Ag%Am.length]]);Aa+=(AQ+Ac[Ag%Am.length]);}Ao.push(AX);AV.push(Aa);}}this.addColorMetricInAngle();}else{for(Aj=0;Aj<Ah;Aj++){AX=Ad[Ai[Aj]]+AQ+Ad[AZ[Aj]];Aa=Ae[Aj]+AQ+AT[Aj];if(AU===o.BUBBLE){AX+=(AQ+Ad[Am[Aj]]);Aa+=(AQ+Ac[Aj]);}Ao.push(AX);AV.push(Aa);}this.addColorMetricInAngle();}}else{if(Ab.isPie||Ab.isRing){for(Aj=0;Aj<Ap.length;++Aj){Ao.push(AY[Aj]);AV.push(Ap[Aj]);}}}}},constructAttrMetricColorMap:function(){var AY=this.attributesColorMap,Aa=this.attributesColorMapID,AT=this.metricsColorMap,AV=this.metricsColorMapID,AU,AZ,AX,AW;if(!AY||!AT){return ;}AU=this.attrMetricsColorMap=[];AZ=this.attrMetricsColorMapID=[];if(AY.length>0&&AT.length>0){for(AX=0;AX<AY.length;++AX){for(AW=0;AW<AT.length;++AW){AU.push(AY[AX]+R+AT[AW]);AZ.push(Aa[AX]+AQ+AV[AW]);}}}else{if(AY.length>0){this.attrMetricsColorMap=AY;this.attrMetricsColorMapID=Aa;}else{if(AT.length>0){this.attrMetricsColorMap=AT;this.attrMetricsColorMapID=AV;}}}},clearColorMaps:function(){this.attrMetricsColorMap=this.attributesColorMap=undefined;this.attrMetricsColorMapID=this.attributesColorMapID=undefined;this.metricsColorMap=undefined;this.attrMetricsColorMapID=this.metricsColorMapID=undefined;this.attrMetricsColorMapIDMap=undefined;this.metricsColorMapMap=undefined;},getColorByLegendInfo:function(){var AU=this,Al=AU.gmCtr,Aj=Al.view.model.docModel,Af=AU.globalAttrMetricsColorMap,Ap=this.colorType,Ak=Al.palette,Ab=Ak.length,Ah,Ag=this.attrMetricsColorMap,AW,Ae=Al.colorByInfo,Ai="",Aq=[],Am,AV,Ad,AZ,Ao=Al.chartInfo;if(Ap===AM.ATT||Ap===AM.ATT_METRICS||Ap===AM.METRICS_ITEM){AW=Ag.length;for(Ah=0;Ah<AW;Ah++){var AY;if(Al.globalColorMapping){Am=Af[Ah];AV=Aj.getColorBy(Am.levels,Am.elements);AY=AV.color;Ad=!AV.isManual;}else{AY=Ak[Ah%Ab];Ad=true;}Aq.push({label:Ag[Ah],color:AY,isDefaultColor:Ad,token:Am});}if(Ap===AM.ATT||Ap===AM.ATT_METRICS){u.forEach(Ae.atts,function(Ar){Ai=Ai+" "+Ar.n;});}if(Ap===AM.ATT_METRICS||Ap===AM.METRICS_ITEM){Ai=Ai+" Metrics";}Ai=Ai.trim();u.forEach(Aq,function(Ar){Ar.decodedColor=B.decodeColor(Ar.color);Ar.encodedColor=Ar.color;});Aq=T(Aq);if(Ao&&Ao.isABL){AZ=Ao.sbtp;if(AZ===AB.STACKED||AZ===AB.PERCENT){this.colorByUnitIds=Al.getColorByUnitIds(Ao.dirc);Aq.sort(this.compareColorByOrder.bind(this,Ao.dirc));}}}else{if(Ap===AM.METRICS){Ai=Ae.metrics[0].n;var AT=Ae.thresholds;var Aa=Ae.rankMode;var An,Ac=Ae.metrics[0].id;u.forEach(AU.mx,function(Ar){if(Ar.did===Ac){An=Ar;return false;}});if(An){var AX=mstrmojo.VisUtility.getColorByFormatStr(this.getMetricNumberFormat(AU.gmCtr.getColorByMetrics()[0]),Aa);Aq=mstrmojo.VisUtility.getColorByItems(AT,Aa,An.max,An.min,An.cnt,AX);Ai=mstrmojo.VisUtility.getColorByTitle(Ai,Aa);if(Aq===undefined||Aq.length===0){return undefined;}}}}if(Ap===AM.NULL){return undefined;}return{item:Ai,elements:Aq};},compareColorByOrder:function(AY,AZ,AX){var AV,AW=this.colorByUnitIds,Ab=AZ.token.levels,Ae=AZ.token.elements,Ac=AX.token.elements,AU=AW.length,Aa,AT,Ad;for(AV=0;AV<AU;AV++){Aa=Ab.indexOf(AW[AV].id);Ad=AW[AV].es;if(Aa<0||Ae[Aa]===Ac[Aa]){continue;}else{if(!AW[AV].unique&&(AY===AE.EnumABLDirection.VERTICAL||(AW[AV].zone==="Rows"||AW[AV].zone==="YAxis"))){AT=1;}else{AT=-1;}return AT*(Ad.indexOf(Ae[Aa])-Ad.indexOf(Ac[Aa]));}}},adaptForGlobalColor:function(){var AX=this.dz,Ak=AX.ColorBy,Ac=Ak.TemplateUnit,Al=this.gmCtr,Ai=[],AT=this.gts,AW=AT.row,AV=AT.col,An,Ag,Ad,AY,Ab,AU,Aa,Ae,Aj,Af,Ah,Am,AZ;u.forEach(Ac,function(Ap){var Aq=(Ap.axis==="row"?AW:AV);var Ao=Ap.uidx;Ai.push(Aq[Ao].es);});if(!Al.globalColorMapping){return ;}An=this.globalAttrMetricsColorMap=[];Ag=Ac===undefined?0:Ac.length;Ad=this.attrMetricsColorMapID;u.forEach(Ad,function(Ao){Ao=Ao.toString();AY={};Ab=AY.types=[];AU=AY.levels=[];Aa=AY.elements=[];Ae=Ao.split(AQ);Aj=Ae.length;for(Af=0;Af<Aj;Af++){if(Af<Ag){Ah=Ac[Af].id;Am=Ai[Af];AZ=Am[parseInt(Ae[Af],10)].id;Ab.push(Ac[Af].t);AU.push(Ah);Aa.push(AZ);}else{var Ap=Ae[Af];AU.push(-1);Aa.push(Ap);Ab.push(4);}}An.push(AY);});return An;},constructColorByInfo:function(){var AU=this.colorType,AT=this.dz;if(AU===AM.ATT||AU===AM.ATT_METRICS){this.constructAttrColorMap();E.call(this);this.attrMetricsColorMap=this.attributesColorMap;this.attrMetricsColorMapID=this.attributesColorMapID;if(AU===AM.ATT){this.adaptForGlobalColor();}}if(AU===AM.METRICS_ITEM||AU===AM.ATT_METRICS){this.constructMetricColorMap();this.attrMetricsColorMap=this.metricsColorMap;this.attrMetricsColorMapID=this.metricsColorMapID;if(AU===AM.METRICS_ITEM){this.adaptForGlobalColor();}}if(AU===AM.ATT_METRICS){this.constructAttrMetricColorMap();this.adaptForGlobalColor();}this.attrMetricsColorMapIDMap=s(this.attrMetricsColorMapID);this.metricsColorMapMap=s(this.metricsColorMap);},constructAttrColorMap:function(){var A9,A1,A0,Ay,Ax,BG,BB,Aq,Ap,A6,Ao,Aj,A3,AV,BC,Ak,Ae,Ar,A2=this.gmCtr,A8=A2.firstRes.gvs.items,BD=A2.getChartInfo(),Aw=BD.tp,A5=A2.getSizeByMetrics(),AX=A2.getRowColorAttrsIndex(),A7=A2.getColColorAttrsIndex(),Au=this.getMetricCount(),Av=Au===0?1:Au,Ab=A2.getColorByAttrsID(),BE=AX.length,AY=A7.length,As=[],BF=[],An=[],Af=[],Ag=1,AW=[],AU=[],Ad=[],Ai=[],Ah=1,At=[];if(!Ab||Ab.length===0){return ;}A3=Ab.length;AV=this.attributesColorMap=[];BC=this.attributesColorMapID=[];Aj=(Aw===o.GRID&&A5.length===0);Ao=(Aw===o.GRID)&&!BD.isPie;Aq=A2.getMetricsOnXAxis();Ap=A2.getMetricsOnYAxis();A6=Math.min(Aq.length,Ap.length);if(A5.length>0){A6=Math.min(A6,A5.length);}function Az(BI,BK){if(Ao){return 1234;}var BH=A8[BI],BJ=BH&&BH.items&&BH.items[BK];if(BJ===undefined||BJ.rv===undefined||BJ===""||BJ.rv===""||BJ.rv==="--"){return false;}return true;}function A4(BO,BQ,BH,BK){var BR,BI,BJ,BP,BN,BM=false,BL,BS;for(BI=0;BI<BO&&!BM;++BI){BL=BH+BI;for(BJ=0;BJ<BQ&&!BM;++BJ){BS=BK+BJ;if(BD.isABL){for(BR=0;BR<Au;++BR){BP=Az(BL,BS*Au+BR);if(BP){BM=true;break;}}}else{if(Aw===o.BUBBLE||Aw===o.SCATTER){for(BR=0;BR<A6;++BR){BP=Az(BL,BS*Au+Aq[BR]);BN=Az(BL,BS*Au+Ap[BR]);if(BP&&BN&&(Aw===o.SCATTER||(Aw===o.BUBBLE&&!isNaN(A5[BR])))){BM=true;break;}}}else{if(Aw===o.GRID&&A5.length>0){BP=Az(BL,BS*Au+A5[0]);if(BP){BM=true;break;}}}}}}return BM;}if(BE>0){An=[];BF=AO(AX,this.modelRhs,An);Af=(BE===1?BF:BF[BE-1]);Ag=Af.mxIdx+1;AW=[];for(A0=0;A0<BE-1;++A0){As[AX[A0].order]=BF[A0][0];AW[A0]=0;}}if(AY>0){Ad=[];AU=AO(A7,this.modelChs,Ad);Ai=(AY===1?AU:AU[AY-1]);Ah=Ai.mxIdx+1;At=[];}var Al=null,Ac=null,Am=this.rct,BA=this.cct/Av,AT=0,AZ=0,Aa={};for(A1=0;A1<Ag;++A1){if(BE>0){Al=Af[A1];if(!Al){continue;}Am=Al.numLeaves;As[AX[BE-1].order]=Al;AW[BE-1]=A1;for(A0=BE-2;A0>=0;--A0){if(An[A0][AW[A0]]>AW[A0+1]){break;}Ak=AW[A0];Ae=BF[A0][Ak];if(BF[A0].isCustomGroupWithBanding){Ar=Ae.forms[1].rs;}else{Ar=Ae.rs;}if(!Ar){Ar=1;}AW[A0]+=Ar;As[AX[A0].order]=BF[A0][AW[A0]];}}AZ=0;if(AY>0){for(Ax=0;Ax<AY-1;++Ax){As[A7[Ax].order]=AU[Ax][0];At[Ax]=0;}}for(Ay=0;Ay<Ah;++Ay){if(AY>0){Ac=Ai[Ay];if(!Ac){continue;}BA=Ac.numLeaves;As[A7[AY-1].order]=Ac;At[AY-1]=Ay;for(Ax=AY-2;Ax>=0;--Ax){if(Ad[Ax][At[Ax]]>At[Ax+1]){break;}Ak=At[Ax];Ae=AU[Ax][Ak];if(AU[Ax].isCustomGroupWithBanding){Ar=Ae.forms[1].cs;}else{Ar=Ae.cs;}if(!Ar){Ar=1;}At[Ax]+=Ar;As[A7[Ax].order]=AU[Ax][At[Ax]];}}if(Aj||A4(Am,BA,AT,AZ)){BG=As[0].headerID;BB=As[0].headerText;for(A9=1;A9<A3;++A9){BG+=AQ+As[A9].headerID;BB+=R+As[A9].headerText;}if(!Aa.hasOwnProperty(BG)){AV.push(BB);BC.push(BG);Aa[BG]=true;}}AZ+=BA;}AT+=Am;}},testLocalDataSet:function y(){var AZ=this.cir,AT=this.cic,AW,AU,AY,Aa;for(AW=0;AW<AT;AW++){for(AU=0;AU<AZ;AU++){var AV=this.getLocalDataSet(AW,AU);AV.printAll();var AX=AV.generateDataProvider();I.visPrint("========"+AX.length+" data providers for this local data set===");for(AY=0;AY<AX.length;AY++){Aa=AX[AY];I.visPrint("");I.visPrint("====start Testing data provider: "+AY+" ======");Aa.testDataProvider();I.visPrint("====end Testing data provider: "+AY+" ======");}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","ChartContext","ImageMap");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumCollectionType");var W=mstrmojo.chart,O=mstrmojo.chart.model,U=W.enums,d=O.enums,b=U.EnumCollectionType,Q=U.EnumObjectShape,F=Q.OS_RECTANGLE,f=d.EnumDSSGraphObject,S=W.gNullTripleId,c=W.gNullObjectId,M=2147483647;mstrmojo.chart.GraphObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObject",mpParentObject:null,mFormatLinePtr:null,mTripleId:S,mChartContextPtr:null,mpManager:null,mIsDetectable:true,mIsAnimationEnabled:false,mIsVirtual:false,mShapeType:0,init:function V(h){this._super(h);this.mpParentObject=h.GraphCollectionObject||null;this.mTripleId=h.TripleId||S;this.mpManager=h.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(h.Shape){this.mShapeType=h.Shape;}if(h.hasLine&&this.mTripleId.mObjectId!==c){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,b.CT_NO_COLLECTION,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;},SetAnimationEnable:function H(h){this.mIsAnimationEnabled=h;this.SetProgress(0.1);},IsLayerObject:function J(){return false;},SetFormatLine:function X(h){this.mFormatLinePtr=h;},SetLineWidth:function e(){var h;h=this.mFormatLinePtr.mLineThickness;h=(h<1)?1:h;this.hSetLineWidth(h);},ApplyLineFormat:function E(){this.mFormatLinePtr.ApplyLineFormat(this.mChartContextPtr);},SetOutlineWidth:function R(){this.hSetLineWidth(W.gOutlineWhite.mLineThickness);},SetOutlineWidthEx:function P(h){if(h>0){this.hSetLineWidth(h);}},ApplyOutlineFormat:function g(){var h=this.mChartContextPtr;if(h.IsBackgroundBright()){W.gStrokeForLightBackground.ApplyLineFormat(h);}else{W.gStrokeForDarkBackground.ApplyLineFormat(h);}},MakePolygonClockwise:function I(o){var k=o.length,q=0,n,j,p,l,h;if(k<3){return ;}for(n=1;n<k;++n){if(o[n].x<o[q].x||(o[n].x<=o[q].x&&o[n].y<o[q].y)){q=n;}}j=(q+k-1)%k;p=new W.Vector2D({x:o[j].x-o[q].x,y:o[j].y-o[q].y});j=(q+1)%k;l=new W.Vector2D({x:o[j].x-o[q].x,y:o[j].y-o[q].y});if(l.CrossProduct(p)<-W.gModuleMain.mTolerance){for(n=0;n<Math.floor(k/2);++n){h=o[n];o[n]=o[k-n-1];o[k-n-1]=h;}}},DrawOutLine:function T(){this.SetOutlineWidth();this.mChartContextPtr.DrawPolygon(this.GetClockwisePolygon());this.ApplyOutlineFormat();},PointInObject:function A(h){if(!this.mIsDetectable){return false;}return h.IsInPolygon(this.GetClockwisePolygon());},hSetLineWidth:function G(h){this.mChartContextPtr.SetLineWidth(h);this.mChartContextPtr.mIsLineWidthOdd=((h&1)===1);},GetChartAreaId:function Y(){var h=this.mpManager.mTripleId;switch(h.mObjectId){case f.DssGraphY1Body:case f.DssGraphY2Body:case f.DssGraphX2Body:case f.DssGraphO1Body:return this.mTripleId.mSeriesId;default:return this.mpManager.GetChartAreaId();}},GetBoundingRect:function L(){var h=new W.Rect2D();return h;},SetProgress:function C(h){},DistanceToPoint:function Z(h){if(!this.mIsDetectable){return M;}var j=this.GetClockwisePolygon();if(j.length<3){return M;}return h.DistanceToPolygon(j);},GetAngularBisectorIntersectionPoint:function D(w,t,s,l,n){var o={x:w.x-t.x,y:w.y-t.y};var k={x:s.x-t.x,y:s.y-t.y};var j=Math.sqrt(o.x*o.x+o.y*o.y);var h=Math.sqrt(k.x*k.x+k.y*k.y);var r={x:o.x/j,y:o.y/j};var q={x:k.x/h,y:k.y/h};var u=0;if(Math.abs(r.x-q.x)<0.01){u=l*(q.x+r.x)/(r.y-q.y);}else{u=l*(q.y+r.y)/(q.x-r.x);}var p={x:0,y:0};p.x=t.x+u*q.x;p.y=t.y+u*q.y;n.x=p.x+l*(-q.y);n.y=p.y+l*q.x;},getFormatFromParent:function a(){this.mFormatLinePtr=this.mpParentObject.mFormatLinePtr;},getBoundingPoints:function K(){var h=this.GetBoundingRect(),j=h.ToPoints(false);return{Shape:0,Points:[j.TopLeft,j.TopRight,j.BottomRight,j.BottomLeft]};},getShapeSize:function N(){return 0;},fallOut:function B(p){var j=0,o=this.mChartContextPtr,n=this.getBoundingPoints(),l=n.Points,k,h;for(k=0;k<l.length;++k){h=l[k];if(h.x<0||h.y<0||h.x>o.mGraphWidth||h.y>o.mGraphHeight){j++;}if(j>0&&!p){return true;}}return(j===l.length);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumFontAlignment","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumVariantBool","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","ChartConstants","ChartContext","FormatFont","Rect2D","FormatLine","FormatFill");var Y=mstrmojo.chart,X=mstrmojo.VisUtility,O=mstrmojo.hash,U=Y.ChartConstants,J=Y.enums,D=J.EnumCollectionType,t=D.CT_LINE,Z=J.EnumGraphMajorType,f=J.EnumDSSExtraGraphObject,N=J.EnumFontAlignment,I=J.EnumLineStyle,E=J.EnumFillType,r=Y.gNullTripleId,a=J.EnumGraphMatrixMajorGraphType,T=Y.model,M=T.enums,k=M.EnumDSSGraphMarkerShape,e=M.EnumDSSGraphType,h=M.EnumDSSGraphProperty,j=M.EnumDSSGraphObject,d=M.EnumDSSExtraGraphProperty,F=M.EnumDSSGraphFontRotation,o=M.EnumDSSGraphGridLineType,L=M.EnumDSSGraphFillEffect,C=M.EnumVariantBool,l=M.EnumShapeType,S=0,B=1,q=7;var g=0,s=1,W=2;function Q(AA,AJ,z){var AO,AF=this.mDataset,AL,AM=false,AG={valid:false,object:AA},y=AJ.mObjectId;if(y===j.DssGraphTrendLine||y===j.DssGraphReferenceLine){var AK=y===j.DssGraphTrendLine,AR,AP;if(AK){AR=AF.GetTrendLineOfSeries(AJ.mSeriesId);AP=AR;}else{AR=AF.GetReferenceLinesOfSeries(AJ.mSeriesId);if(AJ.mGroupId>=0){AP=AR[AJ.mGroupId];}}if(AP){AA.mLineThickness=AP.getLineThickness();AA.mLineThicknessPt=75*AA.mLineThickness;AA.mAlpha=255;AA.mLineStyle=AP.getLineRenderType();AA.mLineColor=AP.getLineColor();AG.valid=true;}}if(AG.valid){return AG;}AG.valid=true;var AE;switch(AJ.mObjectId){case j.DssGraphUserLine1:AE="y1";break;case j.DssGraphUserLine2:AE="x1";break;case j.DssGraphUserLine3:AE="y2";break;case j.DssGraphUserLine4:AE="x2";break;default:AG.valid=false;break;}if(AG.valid){var AN=AF.getAxisOriginFormat(AE);delete AN.show;O.copy(AN,AA);return AG;}var AD="all",AB=0,AQ=0,AC=AJ.mGroupId;AG.valid=true;if(y===j.DssGraphRiser){if(z===l._PIE||z===l._PIESLICE){y=j.DssGraphPieSlice;}}switch(y){case j.DssGraphDataMarker:AD="lineMarker";break;case j.DssGraphRiser:if(z===l._TICKER){AD="lineShape";}else{AD="shapeBorder";}break;case j.DssGraphDataLine:AD="lineShape";AC=0;break;case j.DssGraphTargetLine:break;case j.DssGraphPieSlice:AB=AJ.angleByIndex||0;AQ=AJ.sliceById||0;AD="pieSliceBorder";break;default:AG.valid=false;break;}if(AG.valid){AL=AF.getGenericLineFormat(AJ.mSeriesId,AC,AB,AQ,AD);AA=O.copy(AL,AA);AG.object=AA;return AG;}var AH,x=this.IsVertical();switch(y){case j.DssGraphY1Major:AO="majorTick";AH="y1";break;case j.DssGraphY1Minor:AO="minorTick";AH="y1";break;case j.DssGraphY2Major:AO="majorTick";AH=x?"y2":"x2";break;case j.DssGraphY2Minor:AO="minorTick";AH=x?"y2":"x2";break;case j.DssGraphX1Major:AO="majorTick";AH="x1";break;case j.DssGraphX1Minor:AO="minorTick";AH="x1";break;case j.DssGraphX2Major:AO="majorTick";AH="x2";break;case j.DssGraphX2Minor:AO="minorTick";AH="x2";break;case j.DssGraphO1Major:AO="majorTick";AH=this.caKeyMap.c1||"x1";break;case j.DssGraphO1Minor:AO="minorTick";AH=this.caKeyMap.c1||"x1";break;case j.DssGraphO2Major:AO="majorTick";AH=this.caKeyMap.c2||"x2";break;case j.DssGraphO2Minor:AO="minorTick";AH=this.caKeyMap.c2||"x2";break;case j.DssGraphY1Body:AO="axisBody";AH="y1";break;case j.DssGraphX2Body:AO="axisBody";AH="x2";break;case j.DssGraphY2Body:AO="axisBody";AH=x?"y2":"x2";break;case j.DssGraphX1Body:AO="axisBody";AH="x1";break;case j.DssGraphO1Body:AO="axisBody";AH=this.caKeyMap.c1||"x1";break;case j.DssGraphO2Body:AO="axisBody";AH=this.caKeyMap.c2||"x2";break;}var AI;if(AM){switch(AO){case"axisBody":AI=this.globalFormats.AxisBodies;break;case"majorTick":AI=this.globalFormats.AxisMajorTicks;break;case"minorTick":AI=this.globalFormats.AxisMinorTicks;break;default:AG.valid=false;break;}AG.valid=!!AI;if(AG.valid&&AI[AH]){AG.object=AI[AH];return AG;}}AG.valid=true;switch(AO){case"axisBody":AL=AF.getAxisLineFormat(AH);break;case"majorTick":case"minorTick":AL=AF.getAxisTickFormat(AH,AO);break;default:AG.valid=false;X.visPrint("failed to get a match for this line format");break;}if(AM){switch(AO){case"axisBody":this.globalFormats.AxisBodies=this.globalFormats.AxisBodies||{};AI=this.globalFormats.AxisBodies;break;case"majorTick":this.globalFormats.AxisMajorTicks=this.globalFormats.AxisMajorTicks||{};AI=this.globalFormats.AxisMajorTicks;break;case"minorTick":this.globalFormats.AxisMinorTicks=this.globalFormats.AxisMinorTicks||{};AI=this.globalFormats.AxisMinorTicks;break;default:AG.valid=false;break;}if(AG.valid){if(AI[AH]===undefined){AI[AH]=O.copy(AL,AI[AH]);AA=AI[AH];if(AO==="minorTick"&&AA.mAlpha!==undefined&&AA.mAlpha!==null){AA.mAlpha*=0.6;}}AG.object=AI[AH];return AG;}}else{if(AG.valid){O.copy(AL,AA);if(AO==="minorTick"&&AA.mAlpha!==undefined&&AA.mAlpha!==null){AA.mAlpha*=0.6;}AG.object=AA;}}return AG;}function w(x,AB,AC){var AF,AA=this.mDataset,AE=0,y=0,z,AG={valid:false,object:x},AD=AB.mObjectId;if(AD===j.DssGraphRiser){if(AC===l._PIE||AC===l._PIESLICE){AD=j.DssGraphPieSlice;}}AG.valid=true;switch(AD){case j.DssGraphRiser:z="shape";break;case j.DssGraphDataMarker:z="lineMarker";break;case j.DssGraphPieSlice:z="pieSlice";AE=AB.angleByIndex!==undefined?AB.angleByIndex:0;y=AB.sliceById!==undefined?AB.sliceById:0;break;default:X.visPrint("fail to find a match for this fill format");AG.valid=false;break;}if(AG.valid){if(AB.mSeriesId>=0&&AB.mGroupId>=0){AF=AA.getGenericFillFormat(AB.mSeriesId,AB.mGroupId,AE,y,z);AG.object=O.copy(AF,x);}}return AG;}function P(x){switch(x.mObjectId){case j.DssGraphUserLabel1:return j.DssGraphY1Label;case j.DssGraphUserLabel2:return j.DssGraphY2Label;case j.DssGraphUserLabel3:return j.DssGraphX1Label;case j.DssGraphUserLabel4:return j.DssGraphX2Label;default:return x.mObjectId;}}function H(y,AC,AF){var AK,AN=false,AB=this.mDataset,AH=P.call(this,AC);if(AH===j.DssGraphDataText||AH===j.DssGraphRefLineText||AH===j.DssGraphTrendLineText){var AA=0,AE=1,AL=2;AN=true;if(AF<0){switch(AH){case j.DssGraphRefLineText:AF=AE;break;case j.DssGraphTrendLineText:AF=AL;break;default:AF=AA;break;}}switch(AF){case AA:if(AN){var AD=this.globalFormats;if(AD.DatatextFormat===null||AD.DatatextFormat===undefined){AD.DatatextFormat=new Y.FormatFont({Bare:true});if(AB===null||AB===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:y};}AK=AB.getDataLabelFontFormat();O.copy(AK,AD.DatatextFormat);var x=AD.DatatextFormat;if(x&&x.mFontSize&&typeof x.mFontSize!=="number"){x.mFontSize=parseFloat(x.mFontSize);}}y=AD.DatatextFormat;}else{if(AB===null||AB===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:y};}AK=AB.getDataLabelFontFormat();O.copy(AK,y);}return{valid:true,object:y};case AE:var z,AG=AB.GetReferenceLinesOfSeries(AC.mSeriesId);if(AC.mGroupId>=0){z=AG[AC.mGroupId];}if(z){var AM=z.getReferenceLineLabelFont();if(AM){y.mFontColor=AM.rfLnFntClr;y.mFontSize=parseInt(AM.rfLnFntSz,10);y.mFontStyle=AM.rfLnFntStyle;y.mFontName=AM.rfLnFntFml;}}break;case AL:break;default:return{valid:false,object:y};}return{valid:false,object:y};}var AJ;switch(AH){case j.DssGraphY1Label:AJ="y1";break;case j.DssGraphX2Label:AJ="x2";break;case j.DssGraphY2Label:AJ=this.IsVertical()?"y2":"x2";break;case j.DssGraphX1Label:AJ="x1";break;case j.DssGraph2DO1Label:AJ=this.caKeyMap.c1||"x1";break;case j.DssGraph2DO2Label:AJ=this.caKeyMap.c2||"x2";break;default:return{valid:false,object:y};}AN=false;if(AN){var AI=this.globalFormats.AxisLabelFormats;if(AI===null||AI===undefined){this.globalFormats.AxisLabelFormats={};}AI=this.globalFormats.AxisLabelFormats;if(!!AI[AJ]){return AI[AJ];}AI[AJ]={};O.copy(AK,AI[AJ]);return AI[AJ];}else{AK=AB.getAxisLabelFontFormat(AJ);O.copy(AK,y);}return{valid:true,object:y};}function A(AA,AC,x){AC=AC||0;x=x||false;var AB=this.GetGraphMatrixContext(),AG,z=this.mDataset;x=x&&AB.mHasColorBy;if(z&&x){var y;if(AA.mObjectId===j.DssGraphPieSlice){var AF=AA.angleByIndex||0,AE=AA.sliceById||0;y=z.GetPieSliceColorByData(AA.mSeriesId,AA.mGroupId,AF,AE);}else{y=z.GetColorByData(AA.mSeriesId,AA.mGroupId,AC);}if(y!==null&&y!==undefined){AG=y;}}if(AG===undefined){if(this.mIsGraphMatrix&&!AB.mHasColorBy){AG=this.GetColorFromPalette(0);}else{if(AA.mSeriesId<0&&AA.mGroupId<0){AG=0;}else{var AD=AA.mSeriesId;if(AD<0){AD=AA.mGroupId;}AD=Math.max(0,AD);AG=this.GetColorFromPalette(AD);}}}return AG;}mstrmojo.chart.GenericContext=mstrmojo.declare(mstrmojo.chart.ChartContext,null,{scriptClass:"mstrmojo.chart.GenericContext",init:function p(x){this._super(x);this.mGraphType=e.DssGraphTypeVertical_Bar_Side_by_Side;this.mFormatManager=this.mFormatManager||x.FormatManager||null;this.mIsFontAntiAlias=true;},GetColorValue:function G(z,x,y){return A.call(this,z,x,y);},GetProperty:function c(z,AB){var x,y,AA;if(z===h.DssGraphType){return this.mGraphType;}if(!this.mIsTimeSeriesChart){y=this.mFormatManager.GetGraphProperty(z,AB.mObjectId,AB.mSeriesId,AB.mGroupId);if(y!==undefined&&y!==null){return y;}}if(!this.mIsGraphMatrix){y=this._super(z,AB);if(!y){y=this._super(z,new Y.TripleId({ObjectId:AB.mObjectId}));if(!y){y=this._super(z,new Y.TripleId({SeriesId:AB.mSeriesId}));if(!y){y=this._super(z,r);}}}if(y){return y;}}switch(z){case h.DssGraphAxisNumberFormat:case -h.DssGraphFormatDataTextAdv:x="-2,0,0,0,0,$,#";return x;case h.DssGraphTextContent:switch(AB.mObjectId){case j.DssGraphY1Title:x="Y1";return x;}return x;case h.DssGraphStyleMajor:if(this.mIsGraphMatrix){switch(AB.mObjectId){case j.DssGraphY1Body:case j.DssGraphY2Body:case j.DssGraphX1Body:case j.DssGraphX2Body:x=o.DssGraphGridOuterTicks;break;default:x=o.DssGraphGridNone;break;}}else{x=o.DssGraphGridRegular;}return x;case h.DssGraphShow2DAxisMinor:case h.DssGraphShow2DAxisLine:x=!this.mIsGraphMatrix;return x;case h.DssGraph2DSide:switch(AB.mObjectId){case j.DssGraphY1Body:x=o.DssGraphAxisLabelLowSide;return x;case j.DssGraphO1Body:x=o.DssGraphAxisLabelLowSide;return x;}break;case d.DssGraphChartAreaNumber:x=3;return x;case h.DssGraphDepthMode:x=false;return x;case h.DssGraphEnhancedSeriesEffect:x=false;return x;case h.DssGraphCurveColorAsSeries:case h.DssGraphShowLegendText:case h.DssGraphShowTitle:x=true;return x;case d.DssGraphUseChartArea:case h.DssGraphShowDataValue:case h.DssGraphShowTotalValue:case d.DssGraphChartAreaOrientation:case h.DssGraphLockFontSize:x=false;return x;case h.DssGraphSDShowDataText:x=false;return x;case h.DssGraphShow2DAxisMajor:AA=this.GetGraphMajorType();if(AA===Z.GMT_3D_CATEGORY||AA===Z.GMT_3D_SCATTER){if(AB.mObjectId===j.DssGraphY1Body){x=true;return x;}}if(this.mIsGraphMatrix){return true;}x=(this.mIsTimeSeriesChart?true:false);return x;case d.DssGraphCumulativePercentLabel:x="Cumulative Percent";return x;case d.DssGraphInfoNestedLabel:case d.DssGraphInfoNestedLabelBracket:x=false;return x;case h.DssGraphShowDataLabel:x=false;return x;case h.DssGraphLineColor:if(this.mIsTimeSeriesChart){if(AB.mSeriesId>=0){x=parseInt(this.GetColorFromPalette(AB.mSeriesId),10);return x;}switch(AB.mObjectId){case j.DssGraphO1Major:x=5460819;return x;case j.DssGraphY1Major:x=5658198;return x;case j.DssGraphO1Body:case j.DssGraphY1Body:x=13421772;return x;default:return undefined;}}if(this.mIsGraphMatrix){switch(AB.mObjectId){case j.DssGraphY1Major:case j.DssGraphX1Major:case j.DssGraphX2Major:case j.DssGraphY2Major:x=this.getDefaultContrastColor(S);break;default:return undefined;}}else{return undefined;}break;case h.DssGraphFillEffect:x=L.DssGraphFillSimple;return x;case h.DssGraphLineAlpha:if(AB.mObjectId===j.DssGraphRiser){x=0;return x;}return undefined;case h.DssGraphMarkerSize:x=33;return x;case h.DssGraph2DDepth:x=1000;return x;case h.DssGraphAxisAutoFit:AA=this.GetGraphMajorType();x=AA===Z.GMT_CATEGORY;return x;case h.DssGraphFontColor:if(this.mIsGraphMatrix){x=this.getDefaultContrastColor();return x;}break;default:return undefined;}return undefined;},PutGraphProperty:function V(x,y,z){this.mFormatManager.PutGraphProperty(x,y.mObjectId,y.mSeriesId,y.mGroupId,z);},GetFormatFont:function u(AA){var x,y=this.mDebugUseNewProperties;x=this.GetFormatObject(AA,-1,2,y);switch(AA.mObjectId){case j.DssGraphPieGroupLabel:case j.DssGraphPieRingLabel:if(x.mFontAlignment===null||!y){x.mFontAlignment=N.FA_CENTER;}if(x.mFontSize===null||!y){x.mFontSize=Math.floor(x.mFontSize*3/4+1);}break;case j.DssGraphOPILBLValue:case j.DssGraphPieFeelerLabel:if(x.mFontAlignment===null||!y){x.mFontAlignment=N.FA_CENTER;}if(x.mFontSize===null||!y){x.mFontSize=q;}break;case j.DssGraphY1Label:case j.DssGraph2DO1Label:case j.DssGraph2DO2Label:case j.DssGraphX1Label:case j.DssGraphX2Label:case j.DssGraphY2Label:if(this.mIsTimeSeriesChart){x.mFontSize=14;x.mFontColor=13158600;}else{if(x.mFontColor===null||!y){x.mFontColor=this.getDefaultContrastColor();}if(x.mFontSize===null||!y){x.mFontSize=8;}}break;case j.DssGraphDataText:if(x.mFontSize===null||!y){x.mFontSize=Math.floor(U.kVirtualCoordinateHeight/45);}if(this.isVerticalBar()&&!this.IsBulletChart()){if(x.mFontRotation===null||!y){x.mFontRotation=F.Rotate90;}}break;case f.DssGraphWarningMessage:x.mFontColor=255;break;case f.DssGraphBanner:var z=this.getDefaultContrastColor(B);x.mFontColor=z;x.mFontSize=11;break;default:break;}this.UpdateFormatFont(AA,x);x.mFontSize=this.vdFontSize(x.mFontSize);if(y){x.restoreDefaults(false);}return x;},GetFormatObject:function n(AD,z,y,AC){var AB,x,AA;AC=AC&&(!!this.mDataset)&&this.mDebugUseNewProperties;if(AC){AB={Bare:true};}else{AB=undefined;}switch(y){case g:x=new Y.FormatLine(AB);break;case s:x=new Y.FormatFill(AB);break;case W:x=new Y.FormatFont(AB);break;default:break;}if(AC){AA=this.ResolveFormat(x,AD,y,z);return AA.object;}return x;},GetFormatLine:function K(z,AF,AA){if(AA===undefined){AA=l._GENERIC;}var AE=z.mGroupId,AC=z.mObjectId,y;switch(AC){case j.DssGraphTrendLine:case j.DssGraphReferenceLine:case j.DssGraphY1Major:case j.DssGraphY2Major:case j.DssGraphY3Major:case j.DssGraphY4Major:case j.DssGraphX1Major:case j.DssGraphX2Major:case j.DssGraphO1Major:case j.DssGraphY1Minor:case j.DssGraphY2Minor:case j.DssGraphY3Minor:case j.DssGraphY4Minor:case j.DssGraphX1Minor:case j.DssGraphX2Minor:case j.DssGraphO1Minor:case j.DssGraphO1Body:case j.DssGraphX1Body:case j.DssGraphY1Body:case j.DssGraphY2Body:case j.DssGraphX2Body:case j.DssGraphY3Body:case j.DssGraphY4Body:case j.DssGraphUserLine1:case j.DssGraphUserLine2:case j.DssGraphUserLine3:case j.DssGraphUserLine4:case j.DssGraphDataLine:y=true;break;default:if(AE===-3){var x=z.mSeriesId;x=Math.max(x,0);z.mGroupId=this.mDataset.findCell(false,x,0);}y=z.mSeriesId>=0&&z.mGroupId>=0;break;}var AD=true,AB;AB=this.GetFormatObject(z,AA,g,y);switch(AC){case j.DssGraphBackground:case j.DssGraphLegendArea:AB.mAlpha=0;break;case j.DssGraphRiser:case j.DssGraphDataLine:if(AF===t&&z.mSeriesId>=0){if(AB.mLineColor===null||!y){AB.mLineColor=A.call(this,z,0);}}if(AC===j.DssGraphRiser&&this.mIsGraphMatrix){if(AB.mLineColor===null||!y){AB.mLineColor=A.call(this,z,0,(z.mGroupId>=0&&z.mSeriesId>=0));}switch(AA){case l._TICKER:if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()){if(AB.mLineThickness===null||!y){AB.mLineThicknessPt=200;AB.mLineThickness=2;}AD=false;}break;case l._CIRCLE:case l._RECTANGLE:case l._SQUARE:if(AA===l._CIRCLE||AA===l._RECTANGLE||AA===l._SQUARE){if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()||this.IsBarChart()||this.IsLineChart()||this.IsAreaChart()){if(AB.mLineThickness===null||!y){AB.mLineThicknessPt=200;AB.mLineThickness=2;}AD=false;}}break;default:break;}}break;case j.DssGraphY1Major:case j.DssGraphY2Major:case j.DssGraphX1Major:case j.DssGraphX2Major:if(this.mIsTimeSeriesChart){AB.mLineStyle=I.LS_DOT;}else{if(this.mIsGraphMatrix){if(AB.mLineColor===null||!y){AB.mLineColor=this.getDefaultContrastColor(S);}}}break;default:break;}this.UpdateFormatLine(z,AB,y);if(AD||!y){AB.mLineThickness=AB.mLineThicknessPt;if(!this.mAbsoluteFontLineSize){AB.mLineThicknessPt=this.vdHeight(AB.mLineThicknessPt);}AB.mLineThickness=this.vdLineWidth(AB.mLineThickness);}if(y){AB.restoreDefaults(false);}z.mGroupId=AE;return AB;},GetFormatFill:function R(z,AF,AB){if(AB===undefined){AB=l._GENERIC;}var AE=z.mGroupId;if(AE===-3){var x=z.mSeriesId;x=Math.max(x,0);z.mGroupId=this.mDataset.findCell(false,x,0);}var y=(z.mSeriesId>=0&&z.mGroupId>=0)&&this.mDebugUseNewProperties,AD,AC=this.mpGraphMatrixContext;AD=this.GetFormatObject(z,AB,s,y);switch(z.mObjectId){case j.DssGraphPieSlice:case j.DssGraphRiser:case j.DssGraphDataLine:if(this.mIsGraphMatrix){if(AD.mFillType===null||!y){AD.mFillType=E.FT_SIMPLE;}var AA=this.GetGraphMatrixGraphMajorType();switch(AA){case a._BAR:case a._SCATTER:case a._BUBBLE:case a._AREA:if(AD.mAlpha===null||!y){AD.mAlpha=178.5;}break;case a._LINE:if(AC.mMarkerShape!==k.DssGraphMarkerShapeNone||z.mObjectId===j.DssGraphRiser){if(AD.mAlpha===null||!y){AD.mAlpha=178.5;}}break;default:break;}if(AC.mMarkerShape===k.DssGraphMarkerShapeGMTick){if(AD.mAlpha===null||!y){AD.mAlpha=255;}}if(AD.mSimpleColor===null||!y){AD.mSimpleColor=A.call(this,z,0,(z.mSeriesId>=0&&z.mGroupId>=0));}}else{if((z.mSeriesId>=0&&z.mGroupId===-3)){AD.mSimpleColor=Y.gColorPalette[z.mSeriesId];}else{if((z.mGroupId>=0&&z.mSeriesId===-3)){AD.mSimpleColor=Y.gColorPalette[z.mGroupId];}}}break;default:break;}this.UpdateFormatFill(z,AD,AF,y);if(y){AD.restoreDefaults(false);}z.mGroupId=AE;return AD;},ResolveFormat:function b(y,AA,x,z){if(y){switch(x){case g:return Q.call(this,y,AA,z);case s:return w.call(this,y,AA,z);case W:return H.call(this,y,AA,z);default:return{valid:false,object:y};}}return{valid:false,object:y};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Vector2D","Point2D");var U=mstrmojo.chart,L=1e-14,I=0.1,o=0.001,S=1.732050807568877;function j(w){return(w-this.mP0.x)/(this.mP3.x-this.mP0.x);}function k(){return(this.mP0.y===this.mP1.y)&&(this.mP1.y===this.mP2.y)&&(this.mP2.y===this.mP3.y);}function Q(x){var w=1/(x+1);return(((this.mP0.y*x+3*this.mP1.y)*x+3*this.mP2.y)*x+this.mP3.y)*w*w*w;}function D(x){var w=1/(x+1);return(((this.mP1.y-this.mP0.y)*x+2*(this.mP2.y-this.mP1.y))*x+this.mP3.y-this.mP2.y)*w*w/(this.mP1.x-this.mP0.x);}function r(AD){var AC=(1-AD)*this.mP0.y+AD*this.mP1.y,x=(1-AD)*this.mP1.y+AD*this.mP2.y,AE=(1-AD)*this.mP2.y+AD*this.mP3.y,AB=(1-AD)*AC+AD*x,w=(1-AD)*x+AD*AE,AA=(1-AD)*AB+AD*w,z=new U.Point2D({x:((1-AD)*this.mP0.x+AD*this.mP3.x),y:AA}),y=new U.BezierCurve({P0:z,P1:w,P2:AE,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});this.mP3=z;this.mP1.Reset((2*this.mP0.x+this.mP3.x)/3,AC);this.mP2.Reset((this.mP0.x+2*this.mP3.x)/3,AB);return y;}function V(AC,AA,x,AE){var z;if(-L<AC&&AC<L){if(-L<AA&&AA<L){return ;}z=-x/(2*AA);if(z<L){return ;}AE.push(z);return ;}var AB=AA*AA-AC*x;if(AB<-L){return ;}if(-L<AB&&AB<L){z=-AA/AC;if(z<L){return ;}AE.push(z);return ;}var w=Math.sqrt(AB),AD=(-AA+w)/AC,y=(-AA-w)/AC;if(AD>L){AE.push(AD);}if(y>L){AE.push(y);}}function u(x){var w=(x<0)?-1:1;return w*Math.pow(w*x,1/3);}function l(AN,AM,AJ,AI,AK){if(-L<=AN&&AN<=L){V.call(this,3*AM,3*AJ/2,AI,AK);return ;}var x=AM/AN,AF=AJ/AN,AO=AI/AN,AD=AF-x*x,AC=(3*x*AF-AO)/2-x*x*x,AL=AD*AD*AD+AC*AC;if(AL>L){var AH=Math.sqrt(AL),AG=u.call(this,AC+AH)+u.call(this,AC-AH)-x;AK.push(AG);}else{if(AL>-L){var y=u.call(this,AC);AK.push(2*y-x);AK.push((AC<0?0.5:-1)*y-x);}else{var AB=AC*AC-AL,z=Math.acos(AC/Math.sqrt(AB))/3,w=Math.pow(AB,1/6),AE=w*Math.cos(z);AK.push(2*AE-x);var AA=S*w*Math.sin(z);AK.push(-AE-x+AA);AK.push(-AE-x-AA);}}AK.sort();AK.reverse();while(AK.length!==0&&AK[AK.length-1]<=L){AK.pop();}}function d(w,x){var AB=this.mP1.y-this.mP0.y,AA=this.mP2.y-this.mP1.y,z=this.mP3.y-this.mP2.y,y=w*(this.mP3.x-this.mP0.x)/3;V.call(this,AB-y,AA-y,z-y,x);}function J(y,z){y.sort();y.reverse();var AB=1;while(y.length!==0){var AA=1/(y[y.length-1]+1);AA*=AB;y.pop();var w=this.mP0.x+(this.mP3.x-this.mP0.x)*AA;if(Math.abs(w-this.mP0.x)>o&&Math.abs(this.mP3.x-w)>o){AB=AA;z.push(r.call(this,AA));}}z.reverse();}function b(){if(this.mP0.x<this.mP3.x){return ;}this.mP0.swapPoints(this.mP3);var w=this.mP1;this.mP1=this.mP2;this.mP2=w;}function e(z,w){var y=this.Clone();b.call(y);if(z-y.mP0.x<L){return w?y:null;}if(y.mP3.x-z<L){return w?null:y;}var x=r.call(y,j.call(y,z));return w?x:y;}function R(w){this.mP0.y-=w.mP0.y;this.mP1.y-=w.mP1.y;this.mP2.y-=w.mP2.y;this.mP3.y-=w.mP3.y;}function Y(AA){var w=[],y;l.call(this,this.mP0.y,this.mP1.y,this.mP2.y,this.mP3.y,w);if(w.length===0){return ;}var x=w.length;for(y=0;y<x;++y){var z=(w[y]*this.mP0.x+this.mP3.x)/(w[y]+1);AA.push(z);}}function F(w,z){var AE=this.getMinX(),AD=this.getMaxX(),y=Math.min(w.x,z.x),AA=Math.max(w.x,z.x);if(AA-AE<I||AD-y<I){return false;}if(AA-y<I){var AB=this.evaluate(w.x);return(AB-w.y)*(z.y-AB)>-I;}y=Math.max(AE,y);AA=Math.min(AD,AA);var AF=(z.y-w.y)/(z.x-w.x),AC=w.y+AF*(y-w.x),x=w.y+AF*(AA-w.x);return(this.evaluate(y)-AC)*(this.evaluate(AA)-x)<-I;}function t(x,AD){var AC=this.getMinX(),z=this.getMaxX(),w=x.getMinX(),AB=x.getMaxX();if(z-I<w||AB-I<AC){return ;}if(AC>w){t.call(x,this,AD);return ;}var y=null,AA=null;if(z<AB){y=e.call(this,w,true);AA=e.call(x,z,false);}else{y=e.call(this,w,true);y=e.call(y,AB,false);AA=x.Clone();b.call(AA);}R.call(y,AA);Y.call(y,AD);}mstrmojo.chart.BezierCurve=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.BezierCurve",mP0:null,mP1:null,mP2:null,mP3:null,mIsVertical:false,init:function n(w){if(w.P0!==undefined&&w.P1!==undefined&&w.P2!==undefined&&w.P3!==undefined){this.mP0=new U.Point2D({Point2D:w.P0});this.mP1=new U.Point2D({Point2D:w.P1});this.mP2=new U.Point2D({Point2D:w.P2});this.mP3=new U.Point2D({Point2D:w.P3});this.mIsVertical=true;}if(w.P0!==undefined&&w.F1!==undefined&&w.F2!==undefined&&w.P3!==undefined){w.IsXAlwaysIndependent=w.IsXAlwaysIndependent||false;this.mP0=new U.Point2D({Point2D:w.P0});this.mP3=new U.Point2D({Point2D:w.P3});this.mIsVertical=w.IsVertical;if(!this.mIsVertical&&!w.IsXAlwaysIndependent){this.mP0.swap();this.mP3.swap();}if(this.mP3.x-this.mP0.x<L&&this.mP0.x-this.mP3.x<L){this.mP3.x=this.mP0.x+0.01;}this.mP1=new U.Point2D({x:(2*this.mP0.x+this.mP3.x)/3,y:w.F1});this.mP2=new U.Point2D({x:(this.mP0.x+2*this.mP3.x)/3,y:w.F2});}},getStartPoint:function E(){return this.mIsVertical?this.mP0:new U.Point2D({x:this.mP0.y,y:this.mP0.x});},getEndPoint:function C(){return this.mIsVertical?this.mP3:new U.Point2D({x:this.mP3.y,y:this.mP3.x});},getMinX:function M(){return this.mP0.x<this.mP3.x?this.mP0.x:this.mP3.x;},getMaxX:function q(){return this.mP0.x<this.mP3.x?this.mP3.x:this.mP0.x;},getStartIndependent:function g(){return this.mP0.x;},getEndIndependent:function O(){return this.mP3.x;},GetApproximatePolygon:function p(AD,AH){var AI=[],AC;this.GetApproximatePolyline(AI);var AE=[],y=AI.length-1,AA=this.mP1.x-this.mP0.x;AE.push((this.mP1.y-this.mP0.y)/AA);for(AC=1;AC<y;++AC){var AG=y/AC-1;AE.push(D.call(this,AG));}AE.push((this.mP3.y-this.mP2.y)/AA);var AB=(AD+3)/2,x=AI.length,AJ=2*x;if(AH===undefined){AH=[];}for(AC=0;AC<AJ;++AC){AH.push(null);}for(AC=0;AC<x;++AC){var w=new U.Vector2D({x:-AE[AC],y:1}),AF=AB/w.Length(),z=new U.Point2D({x:w.x*AF+0.5,y:(w.y*AF+0.5)});AH[AC]=AI[AC].Shifted(z);AH[AJ-1-AC]=AI[AC].NegativeShifted(z);}if(!this.mIsVertical){for(AC=0;AC<AJ;++AC){AH[AC].swap();}}},GetApproximatePolyline:function N(z){var y=10,w=3,AA=Math.floor(this.getMaxX()-this.getMinX()+0.5)/y,AB;AA=Math.max(w,AA);z.push(new U.Point2D({x:this.mP0.x+0.5,y:this.mP0.y+0.5}));for(AB=1;AB<AA;++AB){var AC=AB/AA;var x=1/AC-1;z.push(new U.Point2D({x:((1-AC)*this.mP0.x+AC*this.mP3.x+0.5),6:(Q.call(this,x)+0.5)}));}z.push(new U.Point2D({x:this.mP3.x+0.5,y:(this.mP3.y+0.5)}));},isBefore:function Z(AA,x){if(!this.mIsVertical){AA.swap();}if(F.call(x,this.mP0,this.mP0.Shifted(AA))||F.call(x,this.mP3,this.mP3.Shifted(AA))){return true;}AA.Reset(-AA.x,-AA.y);if(F.call(this,x.mP0,x.mP0.Shifted(AA))||F.call(this,x.mP3,x.mP3.Shifted(AA))){return true;}var w=Math.max(this.getMinX(),x.getMinX()),z=Math.min(this.getMaxX(),x.getMaxX());if(w-z>-0.1*I){return false;}var AB=(w+z)/2,y=new U.Point2D({x:AB,y:x.evaluate(AB)});return F.call(this,y,y.Shifted(AA));},SplitAtTangentPoints:function A(AD,y){if(AD.x===0){return ;}var AC=[];d.call(this,AD.y/AD.x,AC);var AB=AC.length,AA=[],z;for(z=0;z<AB;++z){var w=(AC[z]*this.mP0.x+this.mP3.x)/(AC[z]+1);if(Math.abs(this.evaluate2ndDerivative(w))>0.01*I){AA.push(AC[z]);}}J.call(this,AA,y);},SplitAtIntersections:function a(w,y){var AB=[];t.call(this,w,AB);if(AB.length===0){return ;}var AA=[],z;var AC=AB.length;for(z=0;z<AC;++z){var x=(AB[z]-this.mP0.x);if(Math.abs(x)>o){AA.push((this.mP3.x-this.mP0.x)/x-1);}}if(AA.length===0){return ;}J.call(this,AA,y);},GetControlPoints:function K(w){w.push(this.mP0);w.push(this.mP1);w.push(this.mP2);w.push(this.mP3);},Reverse:function c(){this.mP0.swapPoints(this.mP3);this.mP1.swapPoints(this.mP2);},MoveToStart:function X(w,z){var x=z?0.5:0,y=z&&k.call(this)?0.5:0;if(this.mIsVertical){w.MoveTo(this.mP0.x+x,this.mP0.y+y);}else{w.MoveTo(this.mP0.y+y,this.mP0.x+x);}},CurveToEnd:function f(x,AA){var y=AA?0.5:0,z=AA&&k.call(this)?0.5:0,w=(Math.abs(this.mP0.x-this.mP1.x)<0.5)?0.5:0;if(this.mIsVertical){x.BezierCurveTo(this.mP1.x+w,this.mP1.y+z,this.mP2.x+w,this.mP2.y+z,this.mP3.x+y,this.mP3.y+z);}else{x.BezierCurveTo(this.mP1.y+z,this.mP1.x+w,this.mP2.y+z,this.mP2.x+w,this.mP3.y+z,this.mP3.x+y);}},LineToStart:function T(w,z){var x=z?0.5:0,y=z&&k.call(this)?0.5:0;if(this.mIsVertical){w.LineTo(this.mP0.x+x,this.mP0.y+y);}else{w.LineTo(this.mP0.y+y,this.mP0.x+x);}},GetMinMax:function h(){var x={MinY:Math.min(this.mP0.y,this.mP3.y)+0.5,MaxY:Math.max(this.mP0.y,this.mP3.y)+0.5};if((this.mP1.y>=x.MinY&&this.mP2.y>=x.MinY)&&(this.mP1.y<=x.MaxY&&this.mP2.y<=x.MaxY)){return x;}var w=[];d.call(this,0,w);while(w.length!==0){var y=(Q.call(this,w[w.length-1])+0.5);w.pop();x.MinY=Math.min(x.MinY,y);x.MaxY=Math.max(x.MaxY,y);}return x;},Clone:function G(){return new U.BezierCurve({P0:this.mP0,P1:this.mP1.y,P2:this.mP2.y,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});},evaluate:function W(x){var w=(x-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*w+(this.mP2.y-2*this.mP1.y+this.mP0.y)*3)*w+(this.mP1.y-this.mP0.y)*3)*w+this.mP0.y;},evaluateDerivative:function B(x){var w=(x-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*w+(this.mP2.y-2*this.mP1.y+this.mP0.y)*2)*w+(this.mP1.y-this.mP0.y))*3/(this.mP3.x-this.mP0.x);},evaluate2ndDerivative:function P(y){var AB=this.mP1.y-this.mP0.y,AA=this.mP2.y-this.mP1.y,z=this.mP3.y-this.mP2.y,w=this.mP3.x-this.mP0.x,x=(y-this.mP0.x)/(this.mP3.x-this.mP0.x);return 6*(AA-AB+(z-2*AA+AB)*x)/(w*w);},evaluate3rdDerivative:function H(){var w=this.mP3.x-this.mP0.x;return 6*(this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)/(w*w*w);},CloneReverseShift:function s(w){if(!this.mIsVertical){w.swap();}return new U.BezierCurve({P0:this.mP3.Shifted(w),P1:this.mP2.y+w.y,P2:this.mP1.y+w.y,P3:this.mP0.Shifted(w),IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","GraphObjectManager");mstrmojo.chart.GraphObjectAggregation=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphObjectAggregation",mGraphObjectList:null,mStartFrameGraphObjectList:null,init:function I(J){this._super(J);this.mGraphObjectList=[];this.mStartFrameGraphObjectList=[];},AddGraphObject:function F(K,J){if(J){this.mStartFrameGraphObjectList.push(K);}else{this.mGraphObjectList.push(K);}},Clear:function B(K,J){if(K){this.mStartFrameGraphObjectList=[];}if(J){this.mGraphObjectList=[];}},ObjectInRectangle:function D(J){return false;},GetClockwisePolygon:function G(){return[];},SetProgress:function H(K){var J=this.mGraphObjectList,M=J.length,L;this._super(K);for(L=0;L<M;++L){J[L].SetProgress(this.mProgress);}},OnPointDetectionEx:function C(N,L,O,J,K,M){return mstrmojo.chart.GraphObjectManager.prototype.OnPointDetectionByList.apply(this,[this.mGraphObjectList,N,L,O,J,K,M]);},Draw:function A(){var M=this.mChartContextPtr,J=this.mGraphObjectList,L=J.length,K;if(this.mIsAnimationEnabled){M.BeginFirstFrame();for(K=0;K<L;++K){this.mStartFrameGraphObjectList[K].Draw();}M.EndFrame();M.BeginLastFrame();}for(K=0;K<L;++K){J[K].Draw();}M.EndFrame();},IsLayerObject:function E(){return true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumDSSGraphFillEffect");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","GraphObject","FormatFill","ChartContext");var L=mstrmojo.chart,I=L.enums,P=I.EnumCollectionType,H=mstrmojo.chart.model,Q=H.enums,F=Q.EnumDSSGraphObject,N=Q.EnumDSSGraphFillBevelEffect,D=Q.EnumDSSGraphFillEffect;mstrmojo.chart.ShapeObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.ShapeObject",init:function J(S){if(S.hasFill===undefined){S.hasFill=true;}if(S.hasLine===undefined){S.hasLine=true;}this._super(S);if(S.hasFill&&this.mTripleId.mObjectId!==F.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,P.CT_NO_COLLECTION):this.mpParentObject.GetFormatFill();}},getRadialInfo:function K(){return null;},ApplyFillFormat:function E(Z){var Y,T=false,V,S=this.mFormatFillPtr;if(S===null){return ;}if(Z===undefined){Z=false;}if(S.mAlpha===0){if(S.supportAdvancedFill((0))){var X=S.mFillBevel.type;if(X===N.DssGraphFillBevelSmoothEdge||X===N.DssGraphFillBevelChiselEdge){if(!Z){this.FillBevel();}}}}Y=S.mSimpleColor;if(T){V=new L.FormatFill();V.mSimpleColor=Y;V.mFillType=D.DssGraphFillSimple;V.mAlpha=S.mAlpha;V.mDarkerFactor=S.mDarkerFactor;V.mFillBevel=S.mFillBevel;V.mFillGradient=S.getGradient();V.mFillPattern=S.mFillPattern;S=this.mFormatFillPtr=V;}switch(S.mFillType){case D.DssGraphFillSimple:S.FillSimple(this.mChartContextPtr);break;case D.DssGraphFillAdvancedWash:case D.DssGraphFillGenericGradient:if(S.mFillGradient.gradientType===9){var W=this.getRadialInfo();if(W){S.FillGradient(this.mChartContextPtr,W);return ;}}var U=this.GetBoundingRect();S.FillGradient(this.mChartContextPtr,U);break;case D.DssGraphFillPattern:break;case D.DssGraphFillPicture:case D.DssGraphFillUserPicture:break;default:break;}if(!Z){this.FillBevel();}},FillBevel:function G(){var S,T=this.mFormatFillPtr;if(T.supportAdvancedFill(0)===false){return ;}switch(T.mFillBevel.type){case N.DssGraphFillBevelNone:break;case N.DssGraphFillBevelSmoothEdge:case N.DssGraphFillBevelChiselEdge:if(this.SupportBevelEffect()){T.FillEdgeType(this.mChartContextPtr,this.GetClockwisePolygon());}break;case N.DssGraphFillBevelDonut:case N.DssGraphFillBevelSphere:S=this.GetBoundingRect();T.FillDonutOrSphere(this.mChartContextPtr,S,this.IsCircularShape());break;}},SupportBevelEffect:function M(){return true;},IsCircularShape:function A(){return false;},SetFormatFill:function B(S){this.mFormatFillPtr=S;},GetFormatFill:function R(){return this.mFormatFillPtr;},getFormatFromParent:function O(){var S=this.mpParentObject;this.mFormatLinePtr=S.mFormatLinePtr;this.mFormatFillPtr=S.GetFormatFill();},GetBoundingRectFromPolygon:function C(V){var T=new L.Rect2D(),X,U;T.x=V[0].x;T.y=V[0].y;var S=V[0].x,W=V[0].y;X=V.length;for(U=1;U<X;++U){T.x=Math.min(T.x,Math.floor(V[U].x));T.y=Math.min(T.y,Math.floor(V[U].y));S=Math.max(S,V[U].x);W=Math.max(W,V[U].y);}T.width=S-T.x;T.height=W-T.y;return T;}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.enums.EnumLineStyle");mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Point2D");var F=mstrmojo.chart,H=F.enums,J=H.EnumLineStyle,C=F.model.enums,A=C.EnumShapeType;mstrmojo.chart.StraightLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.StraightLineObject",mDeviceStartPoint:null,mDeviceEndPoint:null,midPoint:null,identity:null,init:function I(K){if(K.hasLine===undefined){K.hasLine=true;}this._super(K);this.mDeviceStartPoint=new F.Point2D({Point2D:K.StartPoint});this.mDeviceEndPoint=new F.Point2D({Point2D:K.EndPoint});if(K.MidPoint!==undefined&&K.MidPoint!==null){this.midPoint=K.MidPoint;}if(K.Identity!==undefined&&K.Identity!==null){this.identity=K.Identity;}},Draw:function B(){var O=this.mChartContextPtr,K=this.mFormatLinePtr,M=this.mDeviceStartPoint,L=this.mDeviceEndPoint,N;this.SetLineWidth();if(K.mLineStyle===J.LS_SOLID){O.DrawStraightLine(M,L);}else{O.NewPath();N=K.getLinePattern(K.mLineStyle);O.DrawDashedLine(M,L,N);}this.ApplyLineFormat();if(this.Shape===A._TICKER){O.FinishDrawTickerShape(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId);}else{O.FinishDrawStraightLine(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId,this.identity,this.midPoint);}},getShapeSize:function D(){if(this.Shape===A._TICKER){var K=this.mChartContextPtr.GetGraphMatrixContext();return Math.round(0.5*K.mConstants.FixedTickerSize);}return 0;},GetBoundingRect:function E(){if(this.Shape===A._TICKER){this.mBBox=this.mBBox||new F.Rect2D();if(this.mBBox.width!==0){return this.mBBox;}var N=this.mDeviceStartPoint,M=this.mDeviceEndPoint,K=this.mBBox,L=Math.max(1,0.5*this.mFormatLinePtr.mLineThickness);if(N.x===M.x){K.x=Math.max(N.x-L,0);K.y=Math.min(N.y,M.y);K.width=2*L;K.height=Math.abs(N.y-M.y);}else{K.y=Math.max(N.y-L,0);K.x=Math.min(N.x,M.x);K.height=2*L;K.width=Math.abs(N.x-M.x);}return K;}else{return this._super();}},GetClockwisePolygon:function G(){var K=[new F.Point2D(),new F.Point2D(),new F.Point2D(),new F.Point2D()];var P=this.mDeviceStartPoint,M=this.mDeviceEndPoint;if(!P.isEqual(M)){var O=Math.max(this.mFormatLinePtr.mLineThickness/2,F.gOutlineBlack.mLineThickness/2);O=Math.max(O,2);var N=new F.Point2D({x:2*P.x-M.x,y:2*P.y-M.y});var L=new F.Point2D({x:2*M.x-P.x,y:2*M.y-P.y});this.GetAngularBisectorIntersectionPoint(M,P,N,O,K[0]);this.GetAngularBisectorIntersectionPoint(L,M,P,O,K[1]);this.GetAngularBisectorIntersectionPoint(P,M,L,O,K[2]);this.GetAngularBisectorIntersectionPoint(N,P,M,O,K[3]);}else{K[0].Reset(P.x-1,P.y-1);K[1].Reset(P.x+1,P.y-1);K[2].Reset(P.x+1,P.y+1);K[3].Reset(P.x-1,P.y+1);}return K;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine");var E=mstrmojo.chart,J=mstrmojo.chart.enums,I=J.EnumLineJoinType,H=10;function M(Q,P,O){return Q?P.x===O.x:P.y===O.y;}function F(){var S=this.mChartContextPtr,O=this.mFormatLinePtr,Q=O.getGradient(),P=O&&Q&&Q.valid;if(!S.mIsGraphMatrix||!P){this.ApplyLineFormat();}else{if(Q.style===0){this.ApplyLineFormat();}else{var R=Q.angle===1;this.Vibrate(0.01,R);this.ApplyLineFormat();}}}function L(S,R){var Q,O=S.length;for(Q=1;Q<=O*2;Q++){R.push({});}var P=Math.max(this.mFormatLinePtr.mLineThickness/2,E.gOutlineBlack.mLineThickness/1.3);var U={x:2*S[0].x-S[1].x,y:2*S[0].y-S[1].y};var T={x:2*S[O-1].x-S[O-2].x,y:2*S[O-1].y-S[O-2].y};this.GetAngularBisectorIntersectionPoint(S[1],S[0],U,P,R[0]);this.GetAngularBisectorIntersectionPoint(T,S[O-1],S[O-2],P,R[O-1]);this.GetAngularBisectorIntersectionPoint(S[O-2],S[O-1],T,P,R[O]);this.GetAngularBisectorIntersectionPoint(U,S[0],S[1],P,R[2*O-1]);for(Q=1;Q<O-1;++Q){this.GetAngularBisectorIntersectionPoint(S[Q+1],S[Q],S[Q-1],P,R[Q]);this.GetAngularBisectorIntersectionPoint(S[Q-1],S[Q],S[Q+1],P,R[2*O-1-Q]);}}mstrmojo.chart.PolyLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.PolyLineObject",mLinePoints:null,isClosePath:false,identity:null,init:function N(Q){Q.hasLine=Q.hasLine||true;Q.isClosePath=Q.isClosePath||false;this._super(Q);var P,S=this.mLinePoints=[],R=Q.PolyLine,O=R.length;for(P=0;P<O;P++){S.push(R[P]);}if(Q.Identity!==undefined&&Q.Identity!==null){this.identity=Q.Identity;}},Draw:function C(){if(this.mLinePoints.length<2){return ;}var P=this.mChartContextPtr,O=P.GetLineJoin();P.SetLineJoin(I.LJT_ROUND);this.SetLineWidth();this.SetPath();F.call(this);P.SetLineJoin(O);P.FinishDrawPolyline(this.mLinePoints,this.mTripleId,!this.mIsDetectable,this.identity,this.startPoint,this.midPoint,this.endPoint);},GetPolygons:function G(T){var R,Q,X=this.mLinePoints,U=X.length;if(U<2){return ;}var P=2/(H*H);var O=[];O.push(0);for(R=1;R+1<U;++R){var Y={x:X[R-1].x-X[R].x,y:X[R-1].y-X[R].y};var V={x:X[R+1].x-X[R].x,y:X[R+1].y-X[R].y};Y.x=Y.x/Math.sqrt(Y.x*Y.x+Y.y*Y.y);Y.y=Y.y/Math.sqrt(Y.x*Y.x+Y.y*Y.y);V.x=V.x/Math.sqrt(V.x*V.x+V.y*V.y);V.y=V.y/Math.sqrt(V.x*V.x+V.y*V.y);if(1-(Y.x*V.x+Y.y*V.y)<P){O.push(R);}}O.push(U-1);U=O.length;for(R=1;R<U;++R){var S=[];for(Q=O[R-1];Q<=O[R];++Q){S.push(X[Q]);}var W=[];L.call(this,S,W);T.push(W);}},SetPath:function D(){var R=this.mChartContextPtr,O=this.mFormatLinePtr,Q=this.mLinePoints,P=[];if(this.isClosePath){P=P.concat(Q);P.pop();R.DrawPolygon(P,true,false,0,O.mLineStyle);}else{R.DrawPolyLine(Q,true,false,0,O.mLineStyle);}},getBoundingPoints:function B(){return{Shape:1,Points:this.mLinePoints};},movePointsAgainstBorder:function A(){var V=this.mChartContextPtr,T=this.mLinePoints,O=T.length,U=V.IsVertical();if(V.mIsGraphMatrix===false){return ;}var S=this.mFormatLinePtr.mLineThickness;if(S>2){return ;}var R,P=U?V.mGraphHeight:0,Q=U?0:V.mGraphWidth;for(R=0;R<O;R++){if(U){if(T[R].y>=P){T[R].y--;}if(T[R].y<=Q){T[R].y++;}}else{if(T[R].x<=P){T[R].x++;}if(T[R].x>=P){T[R].x--;}}}},Vibrate:function K(O,R){var P,Q=this.mLinePoints;for(P=0;P+1<Q.length;P+=2){if(M.call(this,R,Q[P],Q[P+1])){if(R){Q[P+1].x+=O;}else{Q[P+1].y+=O;}}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartContext","GraphObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumBoxStyle");var F=mstrmojo.chart,H=F.enums,K=H.EnumCollectionType,C=H.EnumBoxStyle;mstrmojo.chart.GraphCollectionObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphCollectionObject",mGraphObjectCollection:[],mFormatFillPtr:null,mFormatFontPtr:null,mCollectionType:K.CT_NO_COLLECTION,init:function N(P){P.hasLine=false;this._super(P);var S=this.mChartContextPtr,R=this.mTripleId,Q=this.mCollectionType=P.CollectionType,O=P.Shape;this.mGraphObjectCollection=[];switch(this.mCollectionType){case K.CT_LINE:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);break;case K.CT_GENERAL_SHAPE:case K.CT_VERTICAL_AREA:case K.CT_VERTICAL_BAR:case K.CT_HORIZONTAL_AREA:case K.CT_HORIZONTAL_BAR:case K.CT_DEPTH_LINE_OR_LINE_MARKER:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);this.mFormatFillPtr=S.GetFormatFill(R,Q,O);break;case K.CT_TEXT:this.mFormatFontPtr=S.GetFormatFont(R);if(this.mFormatFontPtr.mFontBox!==C.BS_NOFRAME&&!S.mIsGraphMatrix){this.mFormatFillPtr=S.GetFormatFill(R,Q);this.mFormatLinePtr=S.GetFormatLine(R,Q,O);}break;case K.CT_NO_FORMAT:break;default:break;}},AddGraphObject:function G(P,O){if(O===undefined){O=true;}this.mGraphObjectCollection.push(P);P.mpParentObject=this;if(O){P.getFormatFromParent();}},ClearCollection:function J(){this.mGraphObjectCollection=[];},GetCollectionSize:function M(){return this.mGraphObjectCollection.length;},GetObjectByIndex:function D(O){return this.mGraphObjectCollection[O];},SetFormatFill:function A(O){this.mFormatFillPtr=O;},SetFormatFont:function E(O){this.mFormatFontPtr=O;},GetFormatFill:function L(){return this.mFormatFillPtr;},GetFormatFont:function B(){return this.mFormatFontPtr;},Replace:function I(O,P,Q){if(O>=0&&O<this.mGraphObjectCollection.length){if(Q===undefined){Q=true;}this.mGraphObjectCollection[O]=P;P.mpParentObject=this;if(Q){P.getFormatFromParent();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","StraightLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumAxisDirection","EnumAxisLabelsLocation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var D=mstrmojo.chart,H=D.enums,J=H.EnumAxisDirection,C=H.EnumAxisLabelsLocation,A=mstrmojo.chart.model,B=A.enums,E=B.EnumDSSGraphObject,F=D.gNullTripleId;mstrmojo.chart.CategoryAxisInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CategoryAxisInfo",mId:F,mAxisLabelsLocation:C.ALL_BOTTOM,mAxisDirection:J.AD_X,init:function K(L){this._super(L);this.mId=new D.TripleId({ObjectId:E.DssGraphO1Body,SeriesId:0});this.mAxisLabelsLocation=C.ALL_BOTTOM;this.mAxisDirection=J.AD_X;},ToX:function I(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_X;this.mAxisLabelsLocation=C.ALL_BOTTOM;},ToY:function G(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_Y;this.mAxisLabelsLocation=C.ALL_LEFT;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Angle","Rect2D","ChartContext","ShapeObject","ImageMap","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumObjectShape","EnumBoundingRectType","EnumRadientGradientUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphFillBevelEffect");var f=mstrmojo.chart,O=f.enums,AM=O.EnumLineJoinType,D=O.EnumBoundingRectType,o=O.EnumRadientGradientUsage,n=f.gModuleMain,Y=f.model,R=Y.enums,j=R.EnumDSSGraphFillBevelEffect,AI=0,w=0,g=1,I=8;function Z(){var AP=this.mFormatFillPtr;AP.MakeDarker(0.75);this.ApplyFillFormat(true);AP.RestoreColor();}function A(){if(this.mIsOutline){this.ApplyOutlineFormat();}else{var AP=this.mBoundingRectType;if((AP===D.BRT_TOP)||(AP===D.BRT_BOTTOM)){this.ApplyFillFormat();}else{Z.call(this);}this.ApplyLineFormat();}}function X(){var AQ=n.mGlowWidth,AR=this.mChartContextPtr,AP=this.mSliceInfo;AR.DrawRingSector(AP.mCenter,AP.mRadius+AQ,AP.mRadius,n.DegreeToRadian(AP.mStartAngle),n.DegreeToRadian(AP.mEndAngle));AR.saveState();AR.Clip();AR.RestoreState();}function L(){var AS=this.mChartContextPtr,AR=this.mSliceInfo,AQ=new f.Point2D({x:AR.mCenter.x,y:AR.mCenter.y-AR.mDepth}),AP=AR.mRadius*(AR.mRingPieFactor*0.01);if(this.mIsOutline){AS.drawArc(AQ,AR.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AS.drawArc(AQ,AP,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AS.DrawRingSector(AQ,AR.mRadius,AP,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);this.ApplyFillFormat();AS.drawArc(AQ,AR.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AS.drawArc(AQ,AP,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function AA(){var AR=this.mChartContextPtr,AQ=this.mSliceInfo,AP=AQ.mRadius*(AQ.mRingPieFactor*0.01);if(this.mIsOutline){AR.drawArc(AQ.mCenter,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AR.drawArc(AQ.mCenter,AP,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AR.DrawRingSector(AQ.mCenter,AQ.mRadius,AP,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);this.ApplyFillFormat();AR.drawArc(AQ.mCenter,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AR.drawArc(AQ.mCenter,AP,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function AD(){var AR=this.mSliceInfo,AQ=new f.Point2D({x:AR.mCenter.x,y:AR.mCenter.y-AR.mDepth});var AP=AR.mRadius*(AR.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AQ,AR.mRadius,AP,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function S(){var AQ=this.mSliceInfo,AP=AQ.mRadius*(AQ.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AQ.mCenter,AQ.mRadius,AP,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function l(AR){var AT=this.mSliceInfo,AS,AX=0;if(AR===w){AS=AT.mStartAngle%360;if((AS<=90)||(AS>=270)){return ;}AX=this.mStartAngleRadian;}else{AS=AT.mEndAngle%360;if((AS>=90)&&(AS<=270)){return ;}AX=this.mEndAngleRadian;}var AV=AT.mRadius;var AU=AT.mRadius;AV*=Math.cos(AX);AU*=Math.sin(AX);var AZ=new f.Point2D({x:AT.mCenter.x,y:AT.mCenter.y});AZ.x+=AV;AZ.y+=AU;var AW=new f.Point2D({x:AT.mCenter.x,y:AT.mCenter.y});AW.x+=AV*(AT.mRingPieFactor*0.01);AW.x+=AU*(AT.mRingPieFactor*0.01);var AQ=[];AQ.push(AW);AQ.push(AZ);var AP=new f.Point2D({x:AZ.x,y:AZ.y-AT.mDepth});AQ.push(AP);var AY=new f.Point2D({x:AW.x,y:AW.y-AT.mDepth});AQ.push(AY);this.mChartContextPtr.DrawPolygon(AQ);if(AR===w){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function F(AP,AT,AV){var AU=this.mSliceInfo;if(this.mIsOutline&&AP){return ;}var AS=n.DegreeToRadian(AT);var AR=n.DegreeToRadian(AV);var AQ=AU.mRadius;if(AP){AQ*=(AU.mRingPieFactor*0.01);}this.mChartContextPtr.DrawCylinder(AU.mCenter,AQ,AS,AR,AU.mDepth);if(AP){this.SetBoundingRectType(D.BRT_RING_CYLINDER);}else{this.SetBoundingRectType(D.BRT_CYLINDER);}this.SetCylinderStart(AT);this.SetCylinderEnd(AV);A.call(this);}function N(){var AR=this.mSliceInfo,AQ=AR.mStartAngle,AP=AR.mEndAngle;if(AQ<180){if(AP<180){F.call(this,false,AQ,AP);}else{if(AP<=360){F.call(this,true,180,AP);F.call(this,false,AQ,180);}else{F.call(this,true,180,360);F.call(this,false,AQ,180);F.call(this,false,360,AP);}}}else{if(AQ<360){if(AP<=360){F.call(this,true,AQ,AP);}else{if(AP<540){F.call(this,true,AQ,360);F.call(this,false,360,AP);}else{F.call(this,true,AQ,360);F.call(this,true,540,AP);F.call(this,false,360,540);}}}else{if(AQ<540){if(AP<540){F.call(this,false,AQ,AP);}else{F.call(this,true,540,AP);F.call(this,false,AQ,540);}}else{F.call(this,true,AQ,AP);}}}}function B(){N.call(this);l.call(this,w);l.call(this,g);}function y(){var AP=this.mSliceInfo;if(this.mOneSeries){if(AP.mIs2DCircular){AA.call(this);}else{N.call(this);L.call(this);}this.mChartContextPtr.FinishDrawRing(AP.mCenter,AP.mRadius,AP.mRadius*AP.mRingPieFactor/100,this.mTripleId,true);}else{if(AP.mIs2DCircular){S.call(this);}else{B.call(this);AD.call(this);}this.mChartContextPtr.FinishDrawRingPieSlice(AP.mCenter,AP.mRadius,AP.mRadius*AP.mRingPieFactor/100,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId);}}function G(){var AQ=this.mSliceInfo,AP=new f.Point2D({x:AQ.mCenter.x,y:AQ.mCenter.y-AQ.mDepth});this.mChartContextPtr.drawArc(AP,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function H(){var AP=this.mSliceInfo;this.mChartContextPtr.drawArc(AP.mCenter,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function k(){var AQ=this.mSliceInfo,AP=new f.Point2D({x:AQ.mCenter.x,y:AQ.mCenter.y-AQ.mDepth});this.mChartContextPtr.DrawSector(AP,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function h(){var AP=this.mSliceInfo;this.mChartContextPtr.DrawSector(AP.mCenter,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function AO(AQ){var AV=this.mSliceInfo,AU,AT=0;if(AQ===w){AU=AV.mStartAngle%360;if((AU<=90)||(AU>=270)){return ;}AT=this.mStartAngleRadian;}else{AU=AV.mEndAngle%360;if((AU>=90)&&(AU<=270)){return ;}AT=this.mEndAngleRadian;}var AS=new f.Point2D({x:AV.mCenter.x,y:AV.mCenter.y});AS.x+=AV.mRadius*Math.cos(AT);AS.y+=AV.mRadius*Math.sin(AT);var AR=[];AR.push(AV.mCenter);AR.push(AS);var AP=new f.Point2D({x:AS.x,y:AS.y-AV.mDepth});AR.push(AP);var AW=new f.Point2D({x:AV.mCenter.x,y:AV.mCenter.y-AV.mDepth});AR.push(AW);this.mChartContextPtr.DrawPolygon(AR);if(AQ===w){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function AE(){var AR=this.mSliceInfo,AQ=AR.mStartAngle,AP=AR.mEndAngle;if(AQ<180){if(AP<180){F.call(this,false,AQ,AP);}else{if(AP<=360){F.call(this,false,AQ,180);}else{F.call(this,false,AQ,180);F.call(this,false,360,AP);}}}else{if(AQ<360){if(AP<=360){AI++;}else{if(AP<540){F.call(this,false,360,AP);}else{F.call(this,false,360,540);}}}else{if(AQ<540){if(AP<540){F.call(this,false,AQ,AP);}else{F.call(this,false,AQ,540);}}else{AI++;}}}}function M(){AE.call(this);AO.call(this,w);AO.call(this,g);}function P(){var AP=this.mSliceInfo;if(this.mOneSeries){if(AP.mIs2DCircular){H.call(this);}else{AE.call(this);G.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AP.mCenter,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,true,this.mIsWhitenOuterBorder);}else{if(AP.mIs2DCircular){h.call(this);}else{M.call(this);k.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AP.mCenter,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,false,this.mIsWhitenOuterBorder);}}function AL(AQ){var AT=this.mSliceInfo,AP={mStartAngle:AT.mStartAngle,mEndAngle:AT.mEndAngle};this.ConvertAngle(AP);if(AP.mStartAngle>AP.mEndAngle){var AR=[{mStartAngle:0,mEndAngle:AP.mEndAngle},{mStartAngle:AP.mStartAngle,mEndAngle:360}];if(AQ.mStartAngle>AQ.mEndAngle){return true;}return this.GetIntersectionAngle(AQ,AR[0])||this.GetIntersectionAngle(AQ,AR[1]);}if(AQ.mStartAngle>AQ.mEndAngle){var AS=[{mStartAngle:0,mEndAngle:AQ.mEndAngle},{mStartAngle:AQ.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AP,AS[0])||this.GetIntersectionAngle(AP,AS[1]);}return this.GetIntersectionAngle(AP,AQ);}function c(Ac){var Ae,AV,AW=this.mSliceInfo,AX=AW.mCenter,Ad=AW.mRadius;if(AW.mIs2DCircular){Ae=(Ac.x-AX.x);AV=(Ac.y-AX.y);var AT=Math.sqrt(Ae*Ae+AV*AV);if(((Ad-AT)>-n.mTolerance)&&((AT-(Ad*AW.mRingPieFactor/100))>-n.mTolerance)){var Af=n.RadianToDegree(Math.acos(Ae/AT));if(AV<-n.mTolerance){Af=360-Af;}if((Af>=AW.mStartAngle)&&(Af<=AW.mEndAngle)){return true;}Af+=360;if((Af>=AW.mStartAngle)&&(Af<=AW.mEndAngle)){return true;}return false;}return false;}Ae=(Ac.x-AX.x);var AS,AP,Ab,AR,AY,Ag=(Ad*Ad-Ae*Ae),AU=Ad*Ad*(AW.mRingPieFactor*AW.mRingPieFactor/10000)-Ae*Ae;if(Ag<-n.mTolerance){return false;}if(AU<-n.mTolerance){AS=n.RadianToDegree(Math.asin(Math.sqrt(Ag)/Ad));AV=(Ac.y-(AX.y-AW.mDepth));AR=new f.Angle();AY=new f.Angle();if(Ae>n.mTolerance){AR.mEndAngle=AS;AR.mStartAngle=360-AS;AP=Math.sqrt(Ae*Ae+AV*AV);if(AV>n.mTolerance){AY.mEndAngle=n.RadianToDegree(Math.asin(AV/AP));}else{AY.mEndAngle=360+n.RadianToDegree(Math.asin(AV/AP));}AV-=AW.mDepth;AP=Math.sqrt(Ae*Ae+AV*AV);if(AV>n.mTolerance){AY.mStartAngle=n.RadianToDegree(Math.asin(AV/AP));}else{AY.mStartAngle=360+n.RadianToDegree(Math.asin(AV/AP));}}else{AR.mStartAngle=180-AS;AR.mEndAngle=180+AS;AP=Math.sqrt(Ae*Ae+AV*AV);AY.mStartAngle=180-n.RadianToDegree(Math.asin(AV/AP));AV-=AW.mDepth;AP=Math.sqrt(Ae*Ae+AV*AV);AY.mEndAngle=180-n.RadianToDegree(Math.asin(AV/AP));}Ab=new f.Angle();if(!this.GetIntersectionConvertedAngles(AR,AY,Ab)){return false;}return AL.call(this,Ab);}AS=n.RadianToDegree(Math.asin(Math.sqrt(Ag)/Ad));var AQ=n.RadianToDegree(Math.asin(Math.sqrt(AU)/(Ad*AW.mRingPieFactor)));AV=(Ac.y-(AX.y-AW.mDepth));var Aa=new f.Angle();var AZ=new f.Angle();AY={};if(Ae>n.mTolerance){Aa.mStartAngle=360-AS;Aa.mEndAngle=360-AQ;AZ.mStartAngle=AQ;AZ.mEndAngle=AS;AP=Math.sqrt(Ae*Ae+AV*AV);if(AV>n.mTolerance){AY.mEndAngle=n.RadianToDegree(Math.asin(AV/AP));}else{AY.mEndAngle=360+n.RadianToDegree(Math.asin(AV/AP));}AV-=AW.mDepth;AP=Math.sqrt(Ae*Ae+AV*AV);if(AV>n.mTolerance){AY.mStartAngle=n.RadianToDegree(Math.asin(AV/AP));}else{AY.mStartAngle=360+n.RadianToDegree(Math.asin(AV/AP));}}else{Aa.mStartAngle=180-AS;Aa.mEndAngle=180-AQ;AZ.mStartAngle=180+AQ;AZ.mEndAngle=180+AS;AP=Math.sqrt(Ae*Ae+AV*AV);AY.mStartAngle=180-n.RadianToDegree(Math.asin(AV/AP));AV-=AW.mDepth;AP=Math.sqrt(Ae*Ae+AV*AV);AY.mEndAngle=180-n.RadianToDegree(Math.asin(AV/AP));}Ab=[new f.Angle(),new f.Angle()];if(!this.GetIntersectionConvertedAngles(Aa,AY,Ab[0])){if(!this.GetIntersectionConvertedAngles(AZ,AY,Ab[1])){return false;}return AL.call(this,Ab[1]);}if(!this.GetIntersectionConvertedAngles(AZ,AY,Ab[1])){return AL.call(this,Ab[0]);}return(AL.call(this,Ab[0])||AL.call(this,Ab[1]));}function t(AU){var AX,AW,AP,AT=this.mSliceInfo,Aa=AT.mCenter,AS=AT.mRadius;if(AT.mIs2DCircular){AX=(AU.x-Aa.x);AW=(AU.y-Aa.y);AP=Math.sqrt(AX*AX+AW*AW);if((AS-AP)>-n.mTolerance){if(AP<n.mTolerance){return false;}var AQ=n.RadianToDegree(Math.acos(AX/AP));if(AW<-n.mTolerance){AQ=360-AQ;}if((AQ>=AT.mStartAngle)&&(AQ<=AT.mEndAngle)){return true;}AQ+=360;if((AQ>=AT.mStartAngle)&&(AQ<=AT.mEndAngle)){return true;}return false;}return false;}AX=(AU.x-Aa.x);var Ac,AY,AZ,Ab=AS*AS-AX*AX;if(Ab<-n.mTolerance){return false;}var AR=n.RadianToDegree(Math.asin(Math.sqrt(Ab)/AS));AW=(AU.y-(Aa.y-AT.mDepth));Ac={mStartAngle:0,mEndAngle:0};AY={mStartAngle:0,mEndAngle:0};if(AX>n.mTolerance){Ac.mEndAngle=AR;Ac.mStartAngle=360-AR;AZ=Math.sqrt(AX*AX+AW*AW);if(AW>n.mTolerance){AY.mEndAngle=n.RadianToDegree(Math.asin(AW/AZ));}else{AY.mEndAngle=360+n.RadianToDegree(Math.asin(AW/AZ));}AW-=AT.mDepth;AZ=Math.sqrt(AX*AX+AW*AW);if(AW>n.mTolerance){AY.mStartAngle=n.RadianToDegree(Math.asin(AW/AZ));}else{AY.mStartAngle=360+n.RadianToDegree(Math.asin(AW/AZ));}}else{Ac.mStartAngle=180-AR;Ac.mEndAngle=180+AR;AZ=Math.sqrt(AX*AX+AW*AW);AY.mStartAngle=180-n.RadianToDegree(Math.asin(AW/AZ));AW-=AT.mDepth;AZ=Math.sqrt(AX*AX+AW*AW);AY.mEndAngle=180-n.RadianToDegree(Math.asin(AW/AZ));}var AV={mStartAngle:0,mEndAngle:0};if(!this.GetIntersectionConvertedAngles(Ac,AY,AV)){return false;}return AL.call(this,AV);}function AB(AV){var Af,AS=this.mSliceInfo,AZ=AS.mDepth,AT=AS.mCenter,Ad=AS.mRadius,AR=n.DegreeToRadian(AS.mStartAngle),AW=n.DegreeToRadian(AS.mEndAngle);var Ac=new f.Point2D({x:AT.x+Ad*Math.cos(AR),y:AT.y+Ad*Math.sin(AR)});var AX=new f.Point2D({x:AT.x+Ad*Math.cos(AW),y:AT.y+Ad*Math.sin(AW)});if(this.mBoundingRectType===D.BRT_TOP){Ac.y-=AZ;AX.y-=AZ;}var Ah=new f.Point2D({x:Math.min(Ac.x,AX.x),y:Math.min(Ac.y,AX.y)});var AY=new f.Point2D({x:Math.max(Ac.x,AX.x),y:Math.max(Ac.y,AX.y)});if(AS.mIsRingPie){Af=Ad*(AS.mRingPieFactor/100);var AQ=new f.Point2D({x:AT.x+Af*Math.cos(AR),y:AT.y+Af*Math.sin(AR)});var Ab=new f.Point2D({x:AT.x+Af*Math.cos(AW),y:AT.y+Af*Math.sin(AW)});if(this.mBoundingRectType===D.BRT_TOP){AQ.y-=AZ;Ab.y-=AZ;}Ah.x=Math.min(Ah.x,AQ.x);Ah.y=Math.min(Ah.y,AQ.y);AY.x=Math.max(AY.x,AQ.x);AY.y=Math.max(AY.y,AQ.y);Ah.x=Math.min(Ah.x,Ab.x);Ah.y=Math.min(Ah.y,Ab.y);AY.x=Math.max(AY.x,Ab.x);AY.y=Math.max(AY.y,Ab.y);}else{Ah.x=Math.min(Ah.x,AT.x);AY.x=Math.max(AY.x,AT.x);var Aa=AT.y;if(this.mBoundingRectType===D.BRT_TOP){Aa-=AZ;}Ah.y=Math.min(Ah.y,Aa);AY.y=Math.max(AY.y,Aa);}var AP;for(AP=(AS.mStartAngle/90+1)*90;AP<AS.mEndAngle;(AP+=90)){var Ae=n.DegreeToRadian(AP);var Ag=new f.Point2D({x:AT.x+Ad*Math.cos(Ae),y:AT.y+Ad*Math.sin(Ae)});if(this.mBoundingRectType===D.BRT_TOP){Ag.y-=AZ;}Ah.x=Math.min(Ah.x,Ag.x);Ah.y=Math.min(Ah.y,Ag.y);AY.x=Math.max(AY.x,Ag.x);AY.y=Math.max(AY.y,Ag.y);if(AS.mIsRingPie){Af=Ad*(AS.mRingPieFactor/100);var AU=new f.Point2D({x:AT.x+Af*Math.cos(Ae),y:AT.y+Af*Math.sin(Ae)});if(this.mBoundingRectType===D.BRT_TOP){AU.y-=AZ;}Ah.x=Math.min(Ah.x,AU.x);Ah.y=Math.min(Ah.y,AU.y);AY.x=Math.max(AY.x,AU.x);AY.y=Math.max(AY.y,AU.y);}}AV.x=Ah.x;AV.y=Ah.y;AV.width=AY.x-Ah.x;AV.height=AY.y-Ah.y;}function K(AY){var AW=this.mSliceInfo,AR=AW.mDepth,Ac=AW.mCenter,Ab=AW.mRadius;if(this.mBoundingRectType===D.BRT_RING_CYLINDER){Ab*=(AW.mRingPieFactor/100);}var AV=n.DegreeToRadian(this.mCylinderStart);var AQ=n.DegreeToRadian(this.mCylinderEnd);var AP=new f.Point2D({x:Ac.x+Ab*Math.cos(AV),y:Ac.y+Ab*Math.sin(AV)});var AU=new f.Point2D({x:Ac.x+Ab*Math.cos(AQ),y:Ac.y+Ab*Math.sin(AQ)});var AX=new f.Point2D({x:Math.min(AP.x,AU.x),y:Math.min(AP.y-AR,AU.y-AR)});var AS=new f.Point2D({x:Math.max(AP.x,AU.x),y:Math.max(AP.y,AU.y)});var AT;for(AT=(this.mCylinderStart/90+1)*90;AT<this.mCylinderEnd;(AT+=90)){var Aa=n.DegreeToRadian(AT);var AZ=new f.Point2D({x:Ac.x+Ab*Math.cos(Aa),y:Ac.y+Ab*Math.sin(Aa)});AX.x=Math.min(AX.x,AZ.x);AX.y=Math.min(AX.y,(AZ.y-AR));AS.x=Math.max(AS.x,AZ.x);AS.y=Math.max(AS.y,AZ.y);}AY.x=AX.x;AY.y=AX.y;AY.width=AS.x-AX.x;AY.height=AS.y-AX.y;}function r(AR){var AW=this.mSliceInfo,AU=AW.mRadius,AP=AW.mDepth,AT=AW.mCenter,AS=AW.mRingPieFactor,AV=(this.mBoundingRectType===D.BRT_START_RECT)?AW.mStartAngle:AW.mEndAngle;if(AV>=360){AV-=360;}var AQ=n.DegreeToRadian(AV);if(AW.mIsRingPie){AR.width=(AU*(1-AS/100)*Math.abs(Math.cos(AQ)));AR.height=(AP+AU*(1-AS/100)*Math.abs(Math.sin(AQ)));}else{AR.width=(AU*Math.abs(Math.cos(AQ)));AR.height=(AP+Math.abs(AU*Math.sin(AQ)));}if(AV<90){if(AW.mIsRingPie){AR.x=(AT.x+AU*(AS/100)*Math.cos(AQ));AR.y=(AT.y-AP+AU*(AS/100)*Math.sin(AQ));}else{AR.x=AT.x;AR.y=AT.y-AP;}}else{if(AV<180){AR.x=(AT.x+AU*Math.cos(AQ));if(AW.mIsRingPie){AR.y=(AT.y-AP+AU*(AS/100)*Math.sin(AQ));}else{AR.y=AT.y-AP;}}else{if(AV<270){AR.x=(AT.x+AU*Math.cos(AQ));AR.y=(AT.y-AP+AU*Math.sin(AQ));}else{AR.y=(AT.y-AP+AU*Math.sin(AQ));if(AW.mIsRingPie){AR.x=(AT.x+AU*(AS/100)*Math.cos(AQ));}else{AR.x=AT.x;}}}}}mstrmojo.chart.PieSliceObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PieSliceObject",mSliceInfo:null,mBoundingRectType:D.BRT_TOP,mCylinderStart:0,mCylinderEnd:0,mOneSeries:false,mIsOutline:false,mStartAngleRadian:0,mEndAngleRadian:0,mMiddleAngleRadian:0,mMiddleAngle:0,mIsShown:false,mIsWhitenOuterBorder:false,init:function AG(AR){if(AR.TripleId){AR.TripleId.angleByIndex=AR.AngleIndex||0;AR.TripleId.sliceById=AR.SliceId||0;}this._super(AR);this.mSliceInfo={};var AQ=this.mSliceInfo;AQ.mStartAngle=AR.StartAngle;AQ.mEndAngle=AR.EndAngle;AQ.mRingPieFactor=AR.RingPieFactor;AQ.mIsRingPie=AR.IsRing;AQ.mIs2DCircular=AR.Is2DCircular;AQ.mScale=AR.Scale;AQ.mCenter=AR.Center;AQ.mRadius=AR.Radius;AQ.mDepth=AR.Depth;this.mOneSeries=AR.OneSeries;this.mIsShown=AR.IsShown;this.mStartAngleRadian=n.DegreeToRadian(AQ.mStartAngle);this.mEndAngleRadian=n.DegreeToRadian(AQ.mEndAngle);this.mMiddleAngleRadian=0.5*(this.mStartAngleRadian+this.mEndAngleRadian);this.mMiddleAngle=(0.5*(AQ.mStartAngle+AQ.mEndAngle));var AP=this.mMiddleAngle;if(AP>=360){AP%=360;}this.mMiddleAngleQuadrant=Math.floor(AP/90+1);if(!this.mOneSeries){AQ.mCenter.x+=(AR.Explode*Math.cos(this.mMiddleAngleRadian));AQ.mCenter.y+=(AR.Explode*Math.sin(this.mMiddleAngleRadian));}this.mIsWhitenOuterBorder=AR.IsWhitenOuterBorder||false;},SetCylinderStart:function Q(AP){this.mCylinderStart=AP;},SetCylinderEnd:function e(AP){this.mCylinderEnd=AP;},SetBoundingRectType:function s(AP){this.mBoundingRectType=AP;},SetDrawOutline:function AH(AP){this.mIsOutline=AP;},GetSliceInfo:function z(){return this.mSliceInfo;},GetMiddleAngleQuadrant:function T(){return this.mMiddleAngleQuadrant;},GetMiddleAngle:function a(){return this.mMiddleAngle;},GetMiddleAngleRadian:function q(){return this.mMiddleAngleRadian;},Draw:function AC(){if(this.mIsShown){this.SetLineWidth();this.mIsOutline=false;if(this.mSliceInfo.mIsRingPie){y.call(this);}else{P.call(this);}}},DrawOutLine:function AK(){if(this.mIsShown){var AR=this.mChartContextPtr,AQ=this.mSliceInfo;if(!(AQ.mIsRingPie)&&AQ.mIs2DCircular){X.call(this);}var AP=this.mChartContextPtr.GetLineJoin();AR.SetLineJoin(AM.LJT_BEVEL);this.SetOutlineWidth();if(!AQ.mIs2DCircular){AR.Scale(1,AQ.mScale);}this.mIsOutline=true;if(AQ.mIsRingPie){y.call(this);}else{P.call(this);}if(!AQ.mIs2DCircular){AR.Scale(1,1/AQ.mScale);}AR.SetLineJoin(AP);}},PointInObject:function J(AQ){if(this.mIsShown&&this.mFormatLinePtr){var AP=false;if(this.mSliceInfo.mIsRingPie){AP=c.call(this,AQ);}else{AP=t.call(this,AQ);}return AP;}return false;},GetBoundingRect:function x(AP){if(AP===undefined){AP=new f.Rect2D();}var AT=this.mFormatFillPtr,AS=this.mSliceInfo,AR=AS.mCenter,AQ=AS.mRadius;switch(this.mBoundingRectType){case D.BRT_TOP:case D.BRT_BOTTOM:if(AT.supportAdvancedFill(0)&&AT.mFillBevel.type===j.DssGraphFillBevelSphere){AP.x=AR.x-AQ;AP.y=AR.y-AS.mDepth-AQ;AP.width=2*AQ;AP.height=2*AQ;}else{AB.call(this,AP);}break;case D.BRT_CYLINDER:case D.BRT_RING_CYLINDER:K.call(this,AP);break;case D.BRT_START_RECT:case D.BRT_END_RECT:r.call(this,AP);break;}return AP;},FillBevel:function u(){var AV=this.mFormatFillPtr,AT=this.mSliceInfo,AU=this.mChartContextPtr;if(AV.supportAdvancedFill(0)===false){return ;}if(AV.mFillBevel.type===j.DssGraphFillBevelDonut){var AP=0;if(AT.mIsRingPie){AP=AT.mRadius*AT.mRingPieFactor/100;}var AS=AT.mCenter.x;var AR=AT.mCenter.y;if(!(AT.mIs2DCircular)){AR-=AT.mDepth;}AU.saveState();AU.Clip();AU.FillRadientGradient(AV,o.RG_PIESLICE,AS,AR,AP,AT.mRadius);AU.RestoreState();}else{if(AV.mFillBevel.type===j.DssGraphFillBevelSphere){var AQ=AV.mFillBevel.lightAngle;AV.mFillBevel.lightAngle=270;f.ShapeObject.prototype.FillBevel.apply(this,[]);AV.mFillBevel.lightAngle=AQ;}}},ConvertAngle:function AF(AP){while(AP.mStartAngle<0){AP.mStartAngle+=360;}while(AP.mStartAngle>360){AP.mStartAngle-=360;}while(AP.mEndAngle<0){AP.mEndAngle+=360;}while(AP.mEndAngle>360){AP.mEndAngle-=360;}},GetIntersectionConvertedAngles:function U(AQ,AP,AS){var AT,AR;if(AQ.mStartAngle>AQ.mEndAngle){AT=[{mStartAngle:0,mEndAngle:AQ.mEndAngle},{mStartAngle:AQ.mStartAngle,mEndAngle:360}];if(AP.mStartAngle>AP.mEndAngle){AR=[{mStartAngle:0,mEndAngle:AP.mEndAngle},{mStartAngle:AP.mStartAngle,mEndAngle:360}];var AU={mStartAngle:0,mEndAngle:0};this.GetIntersectionAngle(AT[0],AR[0],AU);AS.mEndAngle=AU.mEndAngle;this.GetIntersectionAngle(AT[1],AR[1],AU);AS.mStartAngle=AU.mStartAngle;return true;}return this.GetIntersectionAngle(AP,AT[0],AS)||this.GetIntersectionAngle(AP,AT[1],AS);}if(AP.mStartAngle>AP.mEndAngle){AR=[{mStartAngle:0,mEndAngle:AP.mEndAngle},{mStartAngle:AP.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AQ,AR[0],AS)||this.GetIntersectionAngle(AQ,AR[1],AS);}return this.GetIntersectionAngle(AQ,AP,AS);},GetIntersectionAngle:function W(AS,AR,AT){var AP=(AS.mStartAngle>AR.mStartAngle)?AS.mStartAngle:AR.mStartAngle;var AQ=(AS.mEndAngle>AR.mEndAngle)?AR.mEndAngle:AS.mEndAngle;if(AP>AQ){return false;}if(AT){AT.mStartAngle=AP;AT.mEndAngle=AQ;}return true;},ElementDrawRingPieTop:function d(){AD.call(this);},ElementDrawNormalPieTop:function b(){k.call(this);},ElementFillSide:function C(){Z.call(this);},GetClockwisePolygon:function E(){var AP=[],AU=this.mSliceInfo;var AQ=new f.Point2D({x:AU.mCenter.x,y:AU.mCenter.y});if(!(AU.mIs2DCircular)){AQ.y-=AU.mDepth;}AP.push(new f.Point2D({x:AQ.x,y:AQ.y*AU.mScale}));var AT;for(AT=AU.mStartAngle;AT-AU.mEndAngle<0;AT+=I){var AS=n.DegreeToRadian(AT);AP.push(new f.Point2D({x:AQ.x+AU.mRadius*Math.cos(AS),y:((AQ.y+AU.mRadius*Math.sin(AS))*AU.mScale)}));}var AR=n.DegreeToRadian(AU.mEndAngle);AP.push(new f.Point2D({x:AQ.x+AU.mRadius*Math.cos(AR),y:(AQ.y+AU.mRadius*Math.sin(AR))*AU.mScale}));return AP;},IsCircularShape:function AJ(){return true;},SetWhitenOuterBorder:function V(AP){this.mIsWhitenOuterBorder=AP;},getRadialInfo:function AN(){var AQ=this.mSliceInfo,AP={r:AQ.mRadius,cx:AQ.mCenter.x,cy:AQ.mCenter.y,fx:0,fy:0};AP.fx=AP.cx;AP.fy=AP.cy;if(AQ.mIsRingPie){AP.startStop=AQ.mRingPieFactor/100;}return AP;},getShapeSize:function p(){if(this.mSliceInfo){return this.mSliceInfo.mRadius||0;}return 0;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGenericDirection","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","FormatLine","Rect2D");var U=mstrmojo.chart,L=mstrmojo.chart.model,W=L.enums,C=W.EnumShapeType,G=W.EnumDSSGraphObject,M=U.FormatLine,P=mstrmojo.chart.enums,A=P.EnumLineStyle,N=P.EnumGenericDirection,R=P.EnumRectExpandDirection,E=U.model.enums.EnumDSSGraphMarkerShape;var H=new U.Rect2D();function D(){var Z=[],Y=this.mRect;if(this.mBorderOpenType===N.NONE){Z.push(Y.GetTopLeft());Z.push(Y.GetTopRight());Z.push(Y.GetBottomRight());Z.push(Y.GetBottomLeft());Z.push(Y.GetTopLeft());}else{Z.push(Y.GetBottomLeft());Z.push(Y.GetTopLeft());Z.push(Y.GetTopRight());Z.push(Y.GetBottomRight());var X=0;switch(this.mBorderOpenType){case N.BOTTOM:break;case N.LEFT:X=1;break;case N.TOP:X=2;break;case N.RIGHT:X=3;break;default:break;}if(X!==0){Z=U.gModuleMain.ShiftPolygonBy(Z,X);}}return Z;}function S(Z,Y){var X,a=[];if(this.mChartContextPtr.mImageFormat===103){return a;}if(Y){X=Z.GetBottomLeft();if(X.x>1){X.x--;}a.push(X);X=Z.GetTopLeft();if(X.x>1){X.x--;}if(X.y>1){X.y--;}a.push(X);X=Z.GetTopRight();if(X.y>1){X.y--;}a.push(X);a.push(Z.GetBottomRight());}else{X=Z.GetTopLeft();if(X.x>0){X.x--;}if(X.y>0){X.y--;}a.push(X);X=Z.GetTopRight();if(X.y>0){X.y--;}a.push(X);a.push(Z.GetBottomRight());X=Z.GetBottomLeft();if(X.x>0){X.x--;}a.push(X);}return a;}function T(Y){var c=this.mChartContextPtr,X=this.mFormatLinePtr.mLineStyle,b,a,Z;if(X!==A.LS_SOLID){c.NewPath();b=M.getLinePattern(X);a=new U.Point2D({x:Y.x+0.5,y:Y.y+0.5});Z=new U.Point2D({x:Y.x+0.5+Y.width,y:Y.y+0.5});c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5+Y.width;Z.y=Y.y+0.5+Y.height;c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5;Z.y=Y.y+0.5+Y.height;c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5;Z.y=Y.y+0.5;c.DrawDashedLine(a,Z,b);}}function K(Y,X){if(X){if(Y.x>1){--Y.x;++Y.width;}if(Y.y>1){--Y.y;++Y.height;}}else{if(Y.x>0){--Y.x;++Y.width;}if(Y.y>0){--Y.y;++Y.height;}}}function B(Z){var Y=this.mFormatLinePtr,X=Y.mLineThickness,a=true;if(X>=1){var b=X/2;if(this.mShapeType===C._BAR){switch(this.mBorderOpenType){case N.BOTTOM:if((Z.width>X)&&(Z.height>b)){Z.Expand(-b,R.REC_EXP_HORIZONTAL);Z.y+=b;}else{a=false;}break;case N.LEFT:if((Z.height>X)&&(Z.width>b)){Z.Expand(-b,R.REC_EXP_VERTICAL);Z.wdith-=b;}else{a=false;}break;case N.TOP:if((Z.width>X)&&(Z.height>b)){Z.Expand(-b,R.REC_EXP_HORIZONTAL);Z.y-=b;}else{a=false;}break;case N.RIGHT:if((Z.height>X)&&(Z.width>b)){Z.Expand(-b,R.REC_EXP_VERTICAL);Z.wdith+=b;}else{a=false;}break;default:if(Z.height>X&&Z.width>X){Z.Expand(-b,R.REC_EXP_BOTH);}else{a=false;}break;}}else{if(Z.height>X&&Z.width>X){Z.Expand(-b,R.REC_EXP_BOTH);}else{a=false;}}}return a;}function F(){var Z=this.mChartContextPtr,f=this.mFormatLinePtr,a=Z.mIsGraphMatrix,d=Z.GetGraphMatrixContext(),c=(this.mShapeType===C._TICKER)||(d.mMarkerShape===E.DssGraphMarkerShapeGMTick);if(this.mTripleId.mObjectId===G.DssGraphRiser&&Z.mPartialRendering){if(this.fallOut(true)){return ;}}var b=B.call(this,this.mRect);Z.DrawRectangle(this.mRect,false);this.ApplyFillFormat();H.ResetRect(this.mRect);var X=f.mLineThickness;this.SetLineWidth();if(a){if(c===false){var e=this.mTripleId.mObjectId;if(e===G.DssGraphRiser){if(Z.IsBarChart()){b=true;this.SetOutlineWidthEx(X);var h=Z.IsVertical(),Y=S.call(this,H,h);if((Y.length===4)&&((h&&this.mBorderOpenType!==N.BOTTOM)||(!h&&this.mBorderOpenType!==N.LEFT))){Y[0].swapPoints(Y[1]);Y[2].swapPoints(Y[3]);Z.DrawPolyLine(Y,true);}}else{if(Z.IsGridChart()||Z.IsLineChart()||Z.IsBubbleChart()||Z.IsScatterChart()){b=true;Z.DrawRectangle(H,true);}}}}}else{if(Z.NeedAdjustedLinePath()&&!a){if(this.mBorderOpenType!==N.NONE){var g;g=D.call(this);Z.DrawPolyLine(g,true);}else{Z.DrawRectangle(H,true);}}else{Z.DrawRectangle(this.mRect,true);}}if(b){if(!a){T.call(this,this.mRect);}this.ApplyLineFormat();}else{this.hSetLineWidth(0);}Z.FinishDrawRect(H,this.mTripleId);}mstrmojo.chart.RectangleObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.RectangleObject",mRect:null,mBorderOpenType:0,init:function Q(X){if(X.hasFill===undefined){X.hasFill=true;}if(X.hasLine===undefined){X.hasLine=true;}this.mpParentObject=X.GraphCollectionObject||null;this.mTripleId=X.TripleId;this.mpManager=X.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(X.Shape){this.mShapeType=X.Shape;}if(X.hasLine&&this.mTripleId.mObjectId!==-3){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,0,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;if(X.hasFill&&this.mTripleId.mObjectId!==G.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,0):this.mpParentObject.GetFormatFill();}if(X&&X.Area){this.mRect=new U.Rect2D({Rect2D:X.Area});}this.mIsVirtual=X.IsVirtualMarker||false;},Draw:function O(){var X=this.mChartContextPtr;if(this.mIsVirtual){return ;}if(this.mIsAnimationEnabled){X.BeginFirstFrame();this.SetProgress(0);F.call(this);X.EndFrame();X.BeginLastFrame();}F.call(this);if(this.mIsAnimationEnabled){X.EndFrame();}},GetClockwisePolygon:function V(){var X=this.mRect;return[X.GetTopLeft(),X.GetTopRight(),X.GetBottomRight(),X.GetBottomLeft()];},GetBoundingRect:function I(X){X=X||false;if(X){return this.mRect;}return new U.Rect2D({Rect2D:this.mRect});},getShapeSize:function J(){return Math.round(Math.max(0.5*this.mRect.width,0.5*this.mRect.height)+0.5);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","ImageMap","FormatLine","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumMarkerShape","EnumLineStyle","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject");var X=mstrmojo.chart,T=X.enums,N=T.EnumObjectShape.OS_CIRCLE,W=T.EnumMarkerShape,B=T.EnumLineStyle,C=T.EnumGraphMajorType,O=mstrmojo.hash,R=103,P=X.model,b=P.enums,I=b.EnumDSSGraphMarkerShape,J=b.EnumDSSGraphObject,E=10,a=31,D=100,H=[[4,-100,-100,100,-100,100,100,-100,100],[12,-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[12,-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[12,-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[0],[4,0,-100,100,0,0,100,-100,0],[3,0,-100,100,100,-100,100],[4,-100,-100,100,-100,100,100,-100,100],[10,0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[7,0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100],[8,-100,-100,0,-50,100,-100,50,0,100,100,0,50,-100,100,-50,0]];X.gMarkerShapeMap=[I.DssGraphMarkerShapeRectangle,I.DssGraphMarkerShapePlainX,I.DssGraphMarkerShapePlus,I.DssGraphMarkerShapeFatPlus,I.DssGraphMarkerShapeCircle,I.DssGraphMarkerShapeDiamond,I.DssGraphMarkerShapeTriangle1,I.DssGraphMarkerShapeSquare,I.DssGraphMarkerShapeStar5,I.DssGraphMarkerShapeHouse,I.DssGraphMarkerShapeStar45];X.gMarkerShapeDict=[];function c(f){var e=H.length,h=X.gMarkerShapeMap,j=X.gMarkerShapeDict,g=false,d;if(j.length===0){for(d=0;d<h.length;d++){j[h[d]]=d;}}if(g){for(d=0;d<e;++d){if(h[d]===f){return d;}}}else{return j[f]||0;}return 0;}function L(){var d=this.mPolygon=[],g=this.mMarkerShape,k=this.mMarkerSize,f=this.mMarkerPosition;var n,h,e,p=false,l,j;if(g===W.MS_Circle){if(p){for(n=0;n<360;n+=E){h=X.gModuleMain.DegreeToRadian(n);d.push(new X.Point2D({x:f.x+k*Math.cos(h),y:f.y+k*Math.sin(h)}));}}else{d.push(new X.Point2D({x:f.x-k,y:f.y-k}));d.push(new X.Point2D({x:f.x+k,y:f.y-k}));d.push(new X.Point2D({x:f.x+k,y:f.y+k}));d.push(new X.Point2D({x:f.x-k,y:f.y+k}));}return ;}var r=H[g];var q=r[0];if(this.mIsIsometric){for(e=0;e<q;++e){l=r[2*e+1]*k/D+f.x;j=r[2*e+2]*k/D+f.y;d.push(new X.Point2D({x:l,y:j}));}}else{var o;for(e=0;e<q;++e){l=r[2*e+1]*k/D+f.x;j=r[2*e+2]*k/D+f.y;o={x:l,y:j};o=this.mChartContextPtr.vdPoint(o);d.push(o);}}}function S(f){var d={drawBorder:true,shapeSize:f},e=this.mFormatLinePtr;if(e&&f>=e.mLineThickness+1&&e.mLineStyle!==B.LS_NONE){d.shapeSize=f-e.mLineThickness;}else{d.drawBorder=false;}return d;}mstrmojo.chart.MarkerObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.MarkerObject",mMarkerSize:0,mMarkerShape:I.DssGraphMarkerShapeNone,mMarkerPosition:null,mIsIsometric:true,mPolygon:null,mIsShown:true,init:function U(d){d.hasLine=d.MarkerSize>=2;this._super(d);var e=this.mChartContextPtr;this.mMarkerPosition=new X.Point2D({Point2D:d.MarkerPosition});this.mMarkerShape=c.call(this,d.MarkerShape);this.mIsIsometric=d.IsIsometric;this.mMarkerSize=d.MarkerSize;this.mIsShown=true;if(d.IsDialogSize){this.mMarkerSize=e.dialogSizeToPixelSize(d.MarkerSize);}},fallOut:function A(j){var n=this.mChartContextPtr,f=n.mGraphWidth,g=n.mGraphHeight,e=this.mMarkerPosition,d=e.x,l=e.y,k=this.mMarkerSize;if(j){return d+k<0||d-k>f||l+k<0||l-k>g;}else{return(d-k>=0&&d+k<=f)&&(l-k>=0&&l+k<=g);}},Draw:function Q(){if(!this.mIsShown){return ;}var e=this.mChartContextPtr,d=e.GetGraphMajorType();if(e.mPartialRendering){if(this.fallOut(true)){return ;}}if(this.mIsAnimationEnabled&&d===C.GMT_BUBBLE){e.BeginFirstFrame();this.SetProgress(0);this.DoDraw();e.EndFrame();e.BeginLastFrame();}this.DoDraw();if(this.mIsAnimationEnabled&&d===C.GMT_BUBBLE){this.mChartContextPtr.EndFrame();}},DoDraw:function Z(){var e=this.mChartContextPtr;var n,f,o,j,p,l,g,h,q,d,k;p=this.mMarkerSize;n=S.call(this,p);this.mMarkerSize=n.shapeSize;q=n.drawBorder;if(q){this.SetLineWidth();}this.setMarkerPath(false);this.ApplyFillFormat();if(e.NeedAdjustedLinePath()){this.setMarkerPath(true);}if(q&&this.mFormatLinePtr.mLineStyle!==B.LS_SOLID&&!e.mUseAnimation){if(this.mMarkerShape===W.MS_Circle){n=X.FormatLine.getLinePattern(this.mFormatLinePtr.mLineStyle);f=this.mMarkerSize*Math.abs(2*Math.PI);o=0;j=0;l=n.length;g=Math.PI/5;h=0;while(o<f){d=Math.min(n[j%l],f-o);k=d/this.mMarkerSize;++j;if(g>k){k=g;}o+=k*this.mMarkerSize;if(j%2===1){e.NewPath();e.drawArc(this.mMarkerPosition,this.mMarkerSize,h,h+k,false);this.ApplyLineFormat();}h+=k;}}}if(q){this.ApplyLineFormat();}if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){e.FinishDrawCircle({x:this.mMarkerPosition.x,y:this.mMarkerPosition.y,r:this.mMarkerSize},this.mTripleId);}else{e.FinishDrawPolygon(this.mPolygon,0,this.mTripleId);}this.mMarkerSize=p;},setMarkerPath:function F(f){var h=this.mChartContextPtr,e,g=this.mMarkerSize,d=this.mMarkerShape;if(h.mImageFormat===R){return ;}if(this.mPolygon===null){L.call(this);}if(d===I.DssGraphMarkerShapeCircle){h.drawArc(this.mMarkerPosition,g,0,Math.PI*2);}else{h.DrawPolygon(this.mPolygon,f);}},GetBoundingRect:function K(){if(this.mPolygon===null){L.call(this);}return this.GetBoundingRectFromPolygon(this.mPolygon);},GetClockwisePolygon:function Y(){if(this.mPolygon===null){L.call(this);}return X.Polygon2D.clone(this.mPolygon);},SetMarkerShape:function G(e){var d=c.call(this,e);if(this.mMarkerShape===d){return ;}this.mMarkerShape=d;L.call(this);},getRadialInfo:function V(){if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){var d={r:this.mMarkerSize,cx:this.mMarkerPosition.x,cy:this.mMarkerPosition.y,fx:0,fy:0};d.fx=d.cx;d.fy=d.cy;return d;}return null;},getShapeSize:function M(){return this.mMarkerSize;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","FormatFont","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresCls("mstrmojo.chart.common.Utility","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumAnchorPoint","EnumBoxStyle","EnumFontAlignment","EnumFontRotation","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var t=mstrmojo.chart,X=t.enums,l=t.model,d=l.enums,K=X.EnumCollectionType,u=X.EnumGraphMajorType,r=mstrmojo.VisUtility,AE=X.EnumAnchorPoint,j=X.EnumBoxStyle,f=X.EnumFontAlignment,P=X.EnumFontRotation,M=X.EnumRectExpandDirection,AI=d.EnumDSSGraphObject,V=t.common.Utility;var AN=true;var R=false,c=65280,AA=0.03,U=0,Y=0,T=0.2,F=0.85,e=0,G=0;var AJ=new t.Point2D(),q=new t.Point2D(),Z=new t.Point2D(),w=new t.Rect2D(),N=new t.Rect2D();function o(AY){var AX=this.mChartContextPtr,AU=true,AV,AW=AX.IsVertical();if(!AU){return 0;}if(AW){switch(AY.mObjectId){case AI.DssGraphY1Label:case AI.DssGraphY2Label:return(0.5*this.mFontHeight);case AI.DssGraphX1Label:if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){AV=this.GetTransformedRect(true);return(0.5*AV.height)+1;}return 0;default:return 0;}}if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){switch(AY.mObjectId){case AI.DssGraphX1Label:case AI.DssGraphX2Label:case AI.DssGraph2DO1Label:AV=this.GetTransformedRect(true);return(0.5*AV.height)+1;default:return 0;}}return 0;}function AC(AW){var AU=true;var AV=this.mChartContextPtr;if(AU){switch(AW.mObjectId){case AI.DssGraph2DO1Label:case AI.DssGraph2DO2Label:if(AV.IsGridChart()||AV.IsVertical()){return Math.ceil(0.25*this.mFontHeight);}return 0;case AI.DssGraphDataText:return Math.ceil(0.2*this.mFontHeight);default:return 0;}}return 0;}function AH(){if(!this.mIsShown||!this.mText.localeCompare("")){return false;}if(!this.mIsOnScreen){return false;}if(this.mChartContextPtr.mImageFormat===103){var AU=this.rect;return(AU.width>0&&AU.height>0);}return true;}function x(Ac,AZ,AV){var AY=this.mSubTextHolder,Ab=this.mFormatFontPtr,Aa,AW,AU=0,AX=AY.mVecPartition[Ac];for(AW=0;AW<AZ-AX;AW++){Aa=AV[AW];if(Aa.Truncated){AU+=AY.GetStringWidth(Aa.Word,Ab);}else{AU+=AY.GetOneWordWidth(Aa.Index);}if(AV.length>0){AU+=AY.GetSpaceWidth();}}return AU;}function AT(){var AW=this.mChartContextPtr,AV=this.mpParentObject;this.mFormatFontPtr=(AV===null)?AW.GetFormatFont(this.mTripleId):AV.GetFormatFont();var AU=this.mFormatFontPtr;if(AU.mFontBox!==j.BS_NOFRAME&&AW.mIsGraphMatrix===false){if(AV===null){this.mFormatFillPtr=AW.GetFormatFill(this.mTripleId,K.CT_NO_COLLECTION);if(!R){this.mFormatLinePtr=AW.GetFormatLine(this.mTripleId,K.CT_NO_COLLECTION,-1);}}else{this.mFormatFillPtr=AV.GetFormatFill();if(!R){this.mFormatLinePtr=AV.mFormatLinePtr;}}}}function D(AV){AV=AV||false;var AU=8,AW=this.mFormatFontPtr;if(AW){if(AV){AU=AW.GetStringExtent("H").Height;}else{AU=AW.GetFontExtent();}}AU=Math.floor(AU*F+0.5);return AU;}function J(){var AU=this.mFormatFontPtr,AZ=this.mChartContextPtr,AW,AY,AV;this.mFontHeight=D.call(this,true);if(AZ.mIsGraphMatrix){var AX=AU.evalMargins();this.mWidthEdgeMargin=AX[0]||0;this.mHeightEdgeMargin=AX[1]||0;this.mTextLineSpace=AX[2]||0;}else{AY=this.mChartContextPtr.GetGraphMajorType();AV=(AY===u.GMT_3D_SCATTER||AY===u.GMT_3D_CATEGORY);AW=AU.mFontBox!==j.BS_NOFRAME;this.mDoubleLineMargin=this.mDoubleLineMargin||0;this.mDoubleLineMargin=Math.floor(AU.mFontSize*T+0.5);if(this.mDoubleLineMargin===0){this.mDoubleLineMargin=1;}this.mWidthEdgeMargin=Math.floor(AU.mFontSize*AA+0.5);if((this.mWidthEdgeMargin===0&&AW)||AV){this.mWidthEdgeMargin=1;}this.mHeightEdgeMargin=Math.floor(AU.mFontSize*U+0.5);if((this.mHeightEdgeMargin===0&&AW)||AV){this.mHeightEdgeMargin=1;}this.mTextLineSpace=Math.floor(AU.mFontSize*Y+0.5);if(this.mTextLineSpace===0){this.mTextLineSpace=1;}switch(AU.mFontBox){case j.BS_NOFRAME:break;case j.BS_SINGLE_LINE_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin;this.mHeightEdgeMargin+=this.mDoubleLineMargin;break;case j.BS_DOUBLE_LINE_FRAME:case j.BS_BEVELED_FRAME:case j.BS_REVERSE_BEVELED_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin*2;this.mHeightEdgeMargin+=this.mDoubleLineMargin*2;break;}}}function AL(){var AU=0;switch(this.mFormatFontPtr.mFontRotation){case P.FR_45:AU=45;break;case P.FR_90:AU=90;break;case P.FR_180:AU=180;break;case P.FR_270:AU=270;break;case P.FR_315:AU=315;break;default:break;}return t.gModuleMain.DegreeToRadian(-AU);}function h(){var AW;var AU=[],AV=this.rect;AJ.x=AV.x+AV.width/2;AJ.y=AV.y+AV.height/2;AW=AL.call(this);AU.push(new t.Point2D({x:AV.x,y:AV.y}).rotateAndClone(AJ,AW));AU.push(new t.Point2D({x:AV.x+AV.width,y:AV.y}).rotateAndClone(AJ,AW));AU.push(new t.Point2D({x:AV.x+AV.width,y:AV.y+AV.height}).rotateAndClone(AJ,AW));AU.push(new t.Point2D({x:AV.x,y:AV.y+AV.height}).rotateAndClone(AJ,AW));return AU;}function z(Aa,AW,Ac){var AY,AX,AV,AU,AZ,Ab=Aa.length;for(AY=1;AY<=Ab;++AY){AX=Aa.substring(0,Ab-AY);AV=AX.concat("...");AZ=this.mFormatFontPtr.GetStringExtent(AV);AU=AZ.Width;if(AU<AW){Ac.Text=AV;Ac.TextWidth=AU;return true;}}return false;}function L(AZ,Ai,AY,Aa){var Ak={},Ac=AZ.length;Aa=Aa||false;if(Aa){var Ae=0,Aj=0,Ah=true,Al=this.mSubTextHolder,AU=Al.GetSpaceWidthEx(this.mFormatFontPtr),AV=this.mFormatFontPtr.GetStringExtent("...").Width,AW="",Ad=-1;if(AV>Ai){return false;}var Ag;for(Ag=0;Ag<Ac;Ag++){Aj=Al.GetOneWordWidth(AZ[Ag]);if(Ae+(Ag>0?AU:0)>Ai-AV){break;}if(Ae+Aj+(Ag>0?AU:0)>Ai-AV){break;}AW=AW.concat(Al.mVecStr[AZ[Ag]]);if(Ag>0){AW=AW.concat(" ");}Ae+=Aj+(Ag>0?AU:0);Ad=Ag;}var Af,Ab=0;for(Af=0;Af<=Ad;Af++){Ab=AZ[Af];AY.Texts.push({Truncated:true,Index:Ab,Word:Al.mVecStr[Ab]});}if(Ag>=Ac){r.visPrint("where is the truncated word....");return true;}Ai-=Ae;if(Ah===false&&Ad!==-1){Ai-=AU;}Ab=AZ[Ag];var AX="";AX=AX.concat(Al.mVecStr[Ab]);if(z.call(this,AX,Ai,Ak)){AY.Texts.push({Truncated:true,Highlighted:false,Index:Ab,Word:Ak.Text});Ae+=Ak.TextWidth;}else{r.visPrint("Should have truncated, but...");AY.Texts.push({Truncated:false,Highlighted:false,Index:Ab,Word:Al.mVecStr[Ab]});Ae+=((Ab===0?0:AU)+Al.GetOneWordWidth(Ab));}AY.TextWidth=Ae;AY.TextXBearing=0;return true;}if(z.call(this,AZ,Ai,Ak)){AY.TextWidth=Ak.TextWidth;AY.TextXBearing=0;AY.Texts.push({Truncated:true,Highlighted:false,Index:-1,Word:Ak.Text});return true;}return false;}function AR(Ah,Ac){var AU=this.mChartContextPtr,Ab=this.mSubTextHolder,AW={TextWidth:0,TextXBearing:0,Texts:[]},AY,AV,AX;Ac=Ac||false;AV=Ab.GetOneLineWidth(Ah);AY=Ab.GetOneLineString(Ah);if(AV<=this.rect.width+(AN?4:0)){AW.TextXBearing=Ab.GetOneLineXBearing(Ah);AW.TextWidth=AV;if(Ac){var AZ,Ag=-1,Ad=Ab.GetOneLineWords(Ah);for(AZ=0;AZ<Ad.length;AZ++){Ag=Ad[AZ];AW.Texts.push({Index:Ag,Word:Ab.mVecStr[Ag],Highlighted:false,Truncated:false});}}else{AW.Texts.push({Index:-1,Word:AY,Highlighted:false,Truncated:false});}return AW;}var Aa=AU.mIsGraphMatrix,Af=Ac?Ab.GetOneLineWords(Ah):AY;if(Aa&&!AU.isUADataAreaOutput()){if(this.mFormatFontPtr.mFontRotation===P.FR_90){var Ae=this.GetBoundingRect(true);if(Ae.y+AV>AU.mGraphHeight){if(L.call(this,Af,AU.mGraphHeight,AW,Ac)){this.mIsTruncated=true;return AW;}}}if(this.rect.x<0&&AV>this.rect.width+this.rect.x){if(L.call(this,Af,this.rect.width+this.rect.x,AW,Ac)){this.mIsTruncated=true;return AW;}}}if(L.call(this,Af,this.rect.width,AW,Ac)){this.mIsTruncated=true;return AW;}this.mIsTruncated=true;AX=this.mFormatFontPtr.GetStringExtent(AW.Text);AW.TextWidth=AX.Width;AW.TextXBearing=0;AW.Texts.push({Index:-1,Word:Aa?"":"...",Highlighted:false,Truncated:true});return AW;}function O(Af,Ai,Ad){var AX=this.mChartContextPtr,Ab,Ae,AU,Ah,AY=this.mFormatFontPtr,Ac;Ad=Ad||false;Ab=AR.call(this,Ai,Ad);Ae=Ab.Text;AU=Ab.Texts;Ac=Ab.TextWidth;switch(this.mFormatFontPtr.mFontAlignment){case f.FA_LEFT:Af.x+=this.mWidthEdgeMargin;break;case f.FA_CENTER:Af.x+=Math.floor((this.rect.width-Ac)/2+0.5);break;case f.FA_RIGHT:Af.x+=Math.floor(this.rect.width-Ac-this.mWidthEdgeMargin+0.5);break;}if(AX.mIsGraphMatrix&&!AX.isUADataAreaOutput()){if(this.rect.x<0&&this.mIsTruncated){Af.x=this.rect.width+this.rect.x-Ac+0.5;}if(AY.mFontRotation===P.FR_90){var AV=this.GetBoundingRect();if(AV.y+AV.height>AX.mGraphHeight&&this.mIsTruncated){var Aj=this.mSubTextHolder.GetOneLineWidth(Ai),Al=Aj-Ac;Af.x-=Al/2;Af.x+=Al;}}}if(AU===undefined){return ;}e=AC.call(this,this.mTripleId);G=o.call(this,this.mTripleId);var Ak={x:Af.x,y:Af.y-e},Ag,AW,AZ;for(Ah=0;Ah<AU.length;Ah++){Ae=AU[Ah];Af.x=Ak.x;Af.y=Ak.y;if(Ah>0){AZ=x.call(this,Ai,Ae.Index,AU);Af.x+=AZ;}AW={};if(G!==0){AW={BaselineOffset:G};}Ag=Af;if(Ae.Highlighted){var Aa=AY.mFontColor;AY.mFontColor=c;AX.AddFormatedText(AY,Ag,Ae.Word,AW);AY.mFontColor=Aa;}else{AX.AddFormatedText(AY,Ag,Ae.Word,AW);}}}function W(){var AW,Aa=this.mChartContextPtr,AX=false;if(Aa.mIsGraphMatrix){if(this.showBBox){AW=h.call(this);Aa.DrawPolygon(AW,true);if(this.mTripleId.mObjectId===AI.DssGraphDataText){AX=true;}this.mChartContextPtr.FinishTextBoundingBox(AW,this.BBoxColor,AX);}else{if(V.isValidNumber(this.BBoxColor)){var AZ=true,AY=true;if(AZ){var AU=1,AV=new t.FormatFont({Font:this.mFormatFontPtr});AV.mStrokeColor=this.BBoxColor;AV.mStrokeWidth=this.mChartContextPtr.isCombinationChart()?0.01:0.5;if(AY){AV.mFontStyle=AU;}this.mFormatFontPtr=AV;}}}}else{if(R||this.mFormatFontPtr.mFontBox!==j.BS_NOFRAME){AW=h.call(this);Aa.DrawPolygon(AW,false,null,null,null);this.ApplyFillFormat();}}return this.mFormatFontPtr;}mstrmojo.chart.TextObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.TextObject",clientDrag:false,rect:null,mFormatFontPtr:null,mText:"",mSubTextHolder:null,mIsShown:true,mWidthEdgeMargin:0,mHeightEdgeMargin:0,mTextLineSpace:0,mFontHeight:0,mIsRectCalculated:false,mTextWidthLimit:-1,mIsStringent:true,mLineCount:-1,mIsTruncated:false,mOnMarker:false,mIsOnScreen:true,init:function AK(AU){AU.hasLine=false;AU.hasFill=false;if(AU.hasLine||AU.hasFill){this._super(AU);}else{this.mpParentObject=AU.GraphCollectionObject||null;this.mTripleId=AU.TripleId||t.gNullTripleId;this.mpManager=AU.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(AU.Shape){this.mShapeType=AU.Shape;}}if(AU.Identity!==undefined&&AU.Identity!==null){this.identity=AU.Identity;}this.rect=this.rect||new t.Rect2D();this.mSubTextHolder=new t.SubTextHolder();if(AU&&AU.OnMarker){this.mOnMarker=AU.OnMarker;}AT.call(this);J.call(this);},GetFormatFont:function AQ(){return this.mFormatFontPtr;},SetText:function AS(AU,AW){if(AW===undefined){AW=-1;}this.mText=AU;this.mIsRectCalculated=false;if(this.mText!==""){var AV=this.mSubTextHolder;AV.Clear();AV.ParseText(this.mText," ",AW);AV.UpdateText(this.mChartContextPtr,this.mFormatFontPtr);}},GetBoundingRectEx:function AP(AW){var AU=this.mFormatFontPtr.mFontRotation;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AV=this.rect;if(AU!==P.FR_NORMAL){if(AU===P.FR_90||AU===P.FR_270){AW.Reset(AV.x,AV.y,AV.width,AV.height);var AY=AV.x+0.5*AV.width,AX=AV.y+0.5*AV.height;AW.width=this.rect.height;AW.height=this.rect.width;AW.x=AY-0.5*AW.width;AW.y=AX-0.5*AW.height;}else{var AZ=this.GetBoundingRectFromPolygon(h.call(this));AW.ResetRect(AZ);}}else{AW.Reset(AV.x,AV.y,AV.width,AV.height);}},GetBoundingRect:function AB(AU){var AW=this.mFormatFontPtr.mFontRotation,AV;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}if(AW!==P.FR_NORMAL){if(AW===P.FR_90||AW===P.FR_270){AV=new t.Rect2D({Rect2D:this.rect});var AX=this.rect,AZ=AX.x+0.5*AX.width,AY=AX.y+0.5*AX.height;AV.width=this.rect.height;AV.height=this.rect.width;AV.x=AZ-0.5*AV.width;AV.y=AY-0.5*AV.height;}else{AV=this.GetBoundingRectFromPolygon(h.call(this));}}else{AU=AU||false;if(AU){return this.rect;}AV=new t.Rect2D({Rect2D:this.rect});}return AV;},GetClockwisePolygon:function I(){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}return h.call(this);},CalculateDeviceRect:function AM(){var Aa=this.mSubTextHolder,Ac=this.rect,AU=this.mFontHeight,AX=this.mTextWidthLimit,AZ=this.mTextLineSpace,AY=this.mWidthEdgeMargin,Ab=this.mHeightEdgeMargin,AV=1,AW=this.mLineCount;if(Ac.width===0||Ac.height===0){if(AX===-1&&AW===-1){AV=Aa.GetLineCount();Ac.width=Aa.GetMaxWidth();Ac.height=(AU+(AV===1?0:AZ))*AV;Ac.Explode(AY,Ab);}else{if(AX!==-1&&AW===-1){Aa.PartitionBy(AX,this.mIsStringent);AV=Aa.GetLineCount();Ac.height=(AU+(AV===1?0:AZ))*AV+Ab*2;if(this.mIsStringent){Ac.width=Math.min(Aa.GetMaxWidth(),AX)+AY*2;}else{Ac.width=Aa.GetMaxWidth()+AY*2;}}else{if(AX===-1&&AW!==-1){Aa.SetLineCount(AW);AV=Aa.GetLineCount();Ac.width=Aa.GetMaxWidth();Ac.height=(AU+(AV===1?0:AZ))*AV;Ac.Explode(AY,Ab);}else{Aa.SetLineCount(AW,AX);AV=Aa.GetLineCount();Ac.height=(AU+(AV===1?0:AZ))*AV+Ab*2;if(this.mIsStringent){Ac.width=Math.min(Aa.GetMaxWidth(),AX)+AY*2;}else{Ac.width=Aa.GetMaxWidth()+AY*2;}}}}}else{if(AX===-1){if(Aa.GetMaxWidth()>Ac.width){Aa.PartitionBy(Ac.width);}}else{if(Aa.GetMaxWidth()>AX){Aa.PartitionBy(AX,this.mIsStringent);if(this.mIsStringent){Ac.width=Math.min(Aa.GetMaxWidth(),AX)+AY*2;}else{Ac.width=Aa.GetMaxWidth()+AY*2;}}}AV=Aa.GetLineCount();Ac.height=(AU+(AV===1?0:AZ))*AV+Ab*2;}this.mIsRectCalculated=true;},GetLineCount:function C(){return this.mSubTextHolder.GetLineCount();},SetTextWidthLimit:function y(AV,AU){if(AU===undefined){AU=true;}this.mTextWidthLimit=AV;this.mIsStringent=AU;this.mIsRectCalculated=false;},SetRect:function B(AU){this.rect.copy(AU);},SetRotation:function AD(AW){var AV=this.mFormatFontPtr.mFontRotation;if(AW!==AV){var AU=new t.FormatFont({Font:this.mFormatFontPtr});AU.mFontRotation=AW;this.mFormatFontPtr=AU;}},MoveTo:function s(AW,AV,AU){AU=AU||AE.TOP_LEFT;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AX=this.rect;switch(AU){case AE.TOP_LEFT:AX.x=AW;AX.y=AV;break;case AE.CENTER:AX.x=AW-AX.width/2;AX.y=AV-AX.height/2;break;case AE.TOP_MIDDLE:AX.x=AW-AX.width/2;AX.y=AV;break;case AE.TOP_RIGHT:AX.x=AW-AX.width;AX.y=AV;break;case AE.LEFT_MIDDLE:AX.x=AW;AX.y=AV-AX.height/2;break;case AE.RIGHT_MIDDLE:AX.x=AW-AX.width;AX.y=AV-AX.height/2;break;case AE.BOTTOM_LEFT:AX.x=AW;AX.y=AV-AX.height;break;case AE.BOTTOM_MIDDLE:AX.x=AW-AX.width/2;AX.y=AV-AX.height;break;case AE.BOTTOM_RIGHT:AX.x=AW-AX.width;AX.y=AV-AX.height;break;}},MoveToCenter:function AG(AV,AU){this.rect.x=Math.round(AV-this.rect.width/2);this.rect.y=Math.round(AU-this.rect.height/2);},GetTransformedRect:function H(AV){var AU,AY,AW;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AX=this.mFormatFontPtr.mFontRotation;if(AX===P.DssGraphFontRotate45||AX===P.DssGraphFontRotate315){AW=new t.Rect2D({Rect2D:this.rect});AU=new t.Point2D({x:AW.x+AW.width*0.5,y:AW.y+AW.height*0.5});AY=(AX===P.DssGraphFontRotate45)?1:-1;AW.x=Math.floor((AU.x-AY*AU.y)*Math.SQRT1_2+(AW.x-AU.x)+0.5);AW.y=Math.floor((AY*AU.x+AU.y)*Math.SQRT1_2+(AW.y-AU.y)+0.5);}else{AW=this.GetBoundingRect(AV);}return AW;},GetTransformedRectEx:function AO(AW){var AY,AX,AV;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AU=this.mFormatFontPtr.mFontRotation;if(AU===P.FR_45||AU===P.FR_315){AW.ResetRect(this.rect);AY=AW.x+AW.width*0.5;AX=AW.y+AW.height*0.5;AV=(AU===P.FR_45)?1:-1;AW.x=Math.floor((AY-AV*AX)*Math.SQRT1_2+(AW.x-AY)+0.5);AW.y=Math.floor((AV*AY+AX)*Math.SQRT1_2+(AW.y-AX)+0.5);}else{this.GetBoundingRectEx(AW);}},HasOverlapForSameRotation:function A(AU,AV,AX){AV=AV||0;AX=AX||M.REC_EXP_INVALID;var AW=this.GetTransformedRect(true),AY=AU.GetTransformedRect(true),AZ=AV/2;if(AZ>0){w.ResetRect(AW);N.ResetRect(AY);w.Expand(AZ,AX);N.Expand(AZ,AX);return w.HasIntersection(N);}return AW.HasIntersection(AY);},strokeBBox:function E(AV){var AU=false,AW=this.mChartContextPtr;if(AV===undefined){if(AU){AV=AW.getDefaultContrastColor();}else{AV=AW.getDefaultThemeColor();}}this.BBoxColor=AV;},Draw:function AF(){var Aa=this.mChartContextPtr,AY=this.mFormatFontPtr,AV,AZ,AX,AW,AU=false;if(AH.call(this)===false){return ;}if(isNaN(this.rect.x)||isNaN(this.rect.y)){return ;}this.mIsTruncated=false;AY=W.call(this);AY.ApplyFontFormat(Aa,false);switch(this.mTripleId.mObjectId){case AI.DssGraph2DO1Label:case AI.DssGraph2DO2Label:AU=true;break;default:AU=false;break;}if(AY.mFontRotation!==P.FR_NORMAL){Aa.saveState();Z.x=this.rect.x+this.rect.width/2;Z.y=this.rect.y+this.rect.height/2;Aa.Rotate(Z,AL.call(this));}AV=this.mSubTextHolder.GetLineCount();AZ=this.mFontHeight+this.mTextLineSpace;AX=Math.max((this.rect.height-AZ*AV)/2,0);for(AW=0;AW<AV;AW++){q.x=this.rect.x;q.y=this.rect.y+AX+(AW+1)*this.mFontHeight;O.call(this,q,AW,AU);}if(AY.mFontRotation!==P.FR_NORMAL){Aa.RestoreState();}Aa.FinishDrawText(this.mTripleId,{OnMarker:this.mOnMarker,Tooltip:this.mIsTruncated?this.mText:null,Identities:this.IdentityMap,Identity:this.identity});},getFormatFromParent:function p(){var AU=this.mpParentObject;this.mFormatLinePtr=AU.mFormatLinePtr;this.mFormatFillPtr=AU.GetFormatFill();this.mFormatFontPtr=AU.GetFormatFont();},GetBoundingRectNoRotation:function b(AU){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}AU=AU||false;if(AU){return this.rect;}return new t.Rect2D({Rect2D:this.rect});},RestoreWidthAndHeight:function S(){this.mSubTextHolder.ParseText(this.mText," ",-1);this.rect.width=0;this.rect.height=0;this.mTextWidthLimit=-1;this.mIsStringent=true;this.mLineCount=-1;this.CalculateDeviceRect();},Restore:function g(AU){if(AU===undefined){this.RestoreWidthAndHeight();return ;}this.rect.width=0;this.rect.height=0;this.rect.x=0;this.rect.y=0;this.mTextWidthLimit=(AU.TextWidthLimit!==undefined)?AU.TextWidthLimit:-1;this.mLineCount=(AU.LineCount!==undefined)?AU.LineCount:-1;this.mIsStringent=(AU.Stringent!==undefined)?AU.Stringent:true;if(AU.Restroke!==undefined&&AU.Restroke){this.SetText(this.mText,this.mTextWidthLimit);}},GetOneLineHeight:function a(){return this.mFontHeight;},getWidthHeightMargin:function k(AU){return AU?this.mWidthEdgeMargin:this.mHeightEdgeMargin;},possibleTruncate:function n(){return this.mTextWidthLimit>0&&this.rect.width>this.mTextWidthLimit&&!this.mIsStringent;},getDevicePolygon:function Q(){return h.call(this);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect");mstrmojo.requiresClsP("mstrmojo.chart","Polygon2D","ShapeObject","FormatLine");var H=mstrmojo.chart,M=H.enums,K=M.EnumLineJoinType,Q=M.EnumLineStyle,B=mstrmojo.chart.model,C=B.enums,J=C.EnumDSSGraphObject,N=C.EnumDSSGraphFillBevelEffect;function I(){var X=this.mChartContextPtr,V=this.mFormatLinePtr,S=this.mDevicePolygon,R=S.length,W,T=[],U;if(V.mLineStyle!==Q.LS_SOLID&&V.mLineStyle!==Q.LS_GRADIENT&&!X.mUseAnimation){X.NewPath();X.MoveTo(S[R-1].x,S[R-1].y);W=R-1;for(U=0;U<R;++U){T=V.getLinePattern(V.mLineStyle);X.DrawDashedLine(S[W],S[U],T);W=U;}X.ClosePath();}}mstrmojo.chart.PolygonObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PolygonObject",mDevicePolygon:[],mHasHole:false,mPointsStyle:0,init:function P(T){var R,S;this._super(T);this.mDevicePolygon=[];if(T){if(T.Polygon!==undefined){R=T.Polygon.length;for(S=0;S<R;++S){this.mDevicePolygon.push(T.Polygon[S]);}}else{if(T.Points!==undefined){R=T.Points.length;for(S=0;S<R;++S){this.mDevicePolygon.push(T.Points[S]);}}}if(T.HasHole!==undefined){this.mHasHole=T.HasHole;}}},Draw:function A(){var Y=this.mChartContextPtr,R=this.mDevicePolygon,T=Y.GetLineJoin(),U=[],V,W=[],X=0,S;Y.SetLineJoin(K.LJT_ROUND);this.SetLineWidth();Y.DrawPolygon(R,false);this.ApplyFillFormat();if(this.mHasHole){V=Math.floor(R.length/2);U=U.concat(R.slice(0,V-1));Y.DrawPolygon(U,true);if(this.mFormatLinePtr||this.mFormatLinePtr.mLineStyle===Q.LS_SOLID){this.ApplyLineFormat();}U.splice(0,U.length);U=U.concat(R.slice(V+1,R.length));Y.DrawPolygon(U,true);I.call(this);this.ApplyLineFormat();}else{if(Y.mIsTimeSeriesChart&&this.mTripleId.mObjectId===J.DssGraphRiser){X=Math.floor(R.length/2);for(S=0;S<X;++S){W.push(R[S]);}Y.DrawPolyLine(W,true);}else{if(Y.NeedAdjustedLinePath()){Y.DrawPolygon(R,true);}}I.call(this);this.ApplyLineFormat();}Y.SetLineJoin(T);Y.FinishDrawPolygon(R,this.mPointsStyle,this.mTripleId);},PointInObject:function E(S){var R=this.mDevicePolygon;if(!this.mIsDetectable){return false;}if(R.length<3){return false;}return S.IsInPolygon(R);},DrawOutLine:function G(){var U=this.mChartContextPtr,R=this.mDevicePolygon,S=[],T;if(R.length<3){return ;}this.SetOutlineWidth();if(this.mHasHole){T=Math.floor(R.length/2);S=S.concat(R.slice(0,T-1));U.DrawPolygon(S,true);this.ApplyOutlineFormat();S.splice(0,S.length);S=S.concat(R.slice(T+1,R.length));U.DrawPolygon(S,true);this.ApplyOutlineFormat();}else{U.DrawPolygon(R,true);this.ApplyOutlineFormat();}},ObjectInRectangle:function D(T){var R=this.mDevicePolygon,U=R.length,S;if(!this.mIsDetectable){return false;}if(U<3){return false;}for(S=0;S<U;++S){if(!T.PointInRectangle(R[S])){return false;}}return true;},GetBoundingRect:function F(){return this.GetBoundingRectFromPolygon(this.mDevicePolygon);},GetClockwisePolygon:function L(){var R=H.Polygon2D.clone(this.mDevicePolygon);this.MakePolygonClockwise(R);return R;},FillBevel:function O(){var W=this.mFormatFillPtr;if(W.supportAdvancedFill(0)===false){return ;}var S=this.mDevicePolygon,V=W.mFillBevel.type,T=[],R,U;if(S.length<3){return ;}if(this.mHasHole&&(V===N.DssGraphFillBevelChiselEdge||V===N.DssGraphFillBevelSmoothEdge)){T=T.concat(S);R=T.length;S.splice(0,R);for(U=0;(U+1)*2<R;++U){S[0]=T[U];S[1]=T[U+1];S[2]=T[R-2-U];S[3]=T[R-1-U];this._super();}S.splice(0,S.length);this.mDevicePolygon=S.concat(T);}else{this._super();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","BezierCurve");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");var Q=mstrmojo.chart,L=Q.enums,l=L.EnumLineJoinType,F=L.EnumLineStyle,R=103,a=0.087,c=0.01;function U(p){var q=p.x;p.x=p.y;p.y=q;}function C(p,r){var q=this.mBezierCurves,t=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),s;if(p){t.AddBezierCurveLine(p);}var u=q.length;for(s=r;s<u;++s){t.AddBezierCurveLine(q[s]);}q.splice(r,q.length-r);return t;}function f(t,AC){var z=this.mBezierCurves,AA=(t.y)/t.x,AE=z.length,x,w,u;for(w=0;w<AE;++w){var s=[];z[w].SplitAtTangentPoints(t,s);if(s.length!==0){var q=s.length;for(u=0;(u+1)<q;++u){AC.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:s[u]}));}x=C.call(this,s[s.length-1],w+1);f.call(x,t,AC);AC.push(x);return ;}if((w+1)<z.length){var y=z[w].getEndIndependent(),r=z[w].evaluateDerivative(y);if(Math.abs(r-AA)<Math.abs(1+r*AA)*a){var AB=z[w].evaluate2ndDerivative(y),p=z[w].evaluate3rdDerivative(),AD=z[w].evaluate3rdDerivative();if((Math.abs(AB)>=0.1*c)||(p*AD<-c)){x=C.call(this,null,w+1);f.call(x,t,AC);AC.push(x);return ;}}}}}function o(u,y){var w=this.mBezierCurves,AA=this.mBezierCurves.length,p=u.mBezierCurves.length,t,s,r;for(t=0;t<AA;++t){for(s=0;s<p;++s){var x=[];w[t].SplitAtIntersections(u.mBezierCurves[s],x);if(x.length!==0){var q=x.length;for(r=0;(r+1)<q;++r){y.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:x[r]}));}var z=C.call(this,x[x.length-1],t+1);o.call(z,u,y);y.push(z);return ;}}}}function S(x,z){var y=this.mBezierCurves,AC=y.length,t=x.mBezierCurves.length,w,u;for(w=1;w<AC;++w){var r=y[w].getStartPoint();for(u=1;u<t;++u){var s=x.mBezierCurves[u].getStartPoint();if(Math.abs(r.x-s.x)<c&&Math.abs(r.y-s.y)<c){var AA=y[w].evaluateDerivative(y[w].getStartIndependent());var p=x.mBezierCurves[u].evaluateDerivative(x.mBezierCurves[u].getStartIndependent());var q=Math.abs(AA-p)<Math.abs(1+AA*p)*a;if(!q){var AB=C.call(this,null,w);S.call(AB,x,z);z.push(AB);return ;}}}}}function E(r,w,u,q){var p=w.length,t;for(t=0;t<p;++t){q.push(0);}w[0]/=r[0];u[0]/=r[0];for(t=1;t<p;++t){var s=r[t]-w[t-1];w[t]/=s;u[t]=(u[t]-u[t-1])/s;}q[p-1]=u[p-1];for(t=p-2;t>=0;t--){q[t]=u[t]-w[t]*q[t+1];}}function J(z){var x=this.mBezierCurves,t=[],r=[],q=[],AA=z.length,s;for(s=0;s<AA;++s){var y,u;if(s===0){y=0;u=1;}else{if(s===z.length-1){y=z.length-2;u=z.length-1;}else{y=s-1;u=s+1;}}var p=this.mIsVertical?z[y].y:z[y].x,w=this.mIsVertical?z[u].y:z[u].x;q.push(w-p);}for(s=0;s<z.length;++s){t.push(4);}t[0]-=2;t[t.length-1]-=2;for(s=0;s<z.length;++s){r.push(1);}var AB=[];E.call(this,t,r,q,AB);for(s=0;s<AA-1;++s){if(this.mIsVertical){x.push(new Q.BezierCurve({P0:z[s],F1:z[s].y+AB[s],F2:z[s+1].y-AB[s+1],P3:z[s+1],IsVertical:this.mIsVertical}));}else{x.push(new Q.BezierCurve({P0:z[s],F1:z[s].x+AB[s],F2:z[s+1].x-AB[s+1],P3:z[s+1],IsVertical:this.mIsVertical}));}}}function O(AH){var s=this.mChartContextPtr,AD=this.mFormatLinePtr.mLineStyle,AA,z,AI;if(s.mImageFormat===R){return ;}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||s.mUseAnimation){return ;}s.NewPath();var u=AH.length;if(u<2){return ;}var p=Q.FormatLine.getLinePattern(AD),w=p.length,AC=0,r=0,q=[],AB=[];for(AA=0;AA<u;++AA){AB.push(0);q.push(0);}var AG=AH[0].x;var AF=AH[0].y;var AE=0.05;if(AD===F.LS_DOT_DOT_DOT){AE=0.03;p[w-1]*=3;}else{if(AD===F.LS_DOT){AE=0.005;}}for(AI=0;AI<=1;AI+=AE/u){for(AA=1;AA<u;++AA){for(z=0;z<u-AA;++z){if(AA===1){q[z]=AH[z].x*(1-AI)+AH[z+1].x*AI;AB[z]=AH[z].y*(1-AI)+AH[z+1].y*AI;continue;}q[z]=q[z]*(1-AI)+q[z+1]*AI;AB[z]=AB[z]*(1-AI)+AB[z+1]*AI;}}r+=Math.sqrt((AG-q[0])*(AG-q[0])+(AF-AB[0])*(AF-AB[0]));if(r>=p[AC]){if(AC%2===0){if(this.mIsVertical){s.MoveTo(AG,AF);s.LineTo(q[0],AB[0]);}else{s.MoveTo(AF,AG);s.LineTo(AB[0],q[0]);}}AC=(AC+1)%w;r=0;AG=q[0];AF=AB[0];}}}mstrmojo.chart.CurveLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.CurveLineObject",mBezierCurves:[],mIsVertical:false,isClosePath:false,identity:null,startPoint:null,midPoint:null,endPoint:null,init:function h(p){this.mBezierCurves=[];if(p.hasLine===undefined){p.hasLine=true;}if(p.IsVertical===undefined){p.IsVertical=true;}if(p.IsClosePath===undefined){p.IsClosePath=false;}p.GraphCollectionObject=p.GraphCollectionObject||null;this._super(p);this.isClosePath=p.IsClosePath;if(p.BezierCurvePtr){this.mBezierCurves.push(p.BezierCurvePtr);this.mIsVertical=p.BezierCurvePtr.mIsVertical;}else{this.mIsVertical=p.IsVertical;if(p.Points){J.call(this,p.Points);}}if(p.Identity){this.identity=p.Identity;}},Draw:function e(){var u=this.mChartContextPtr,w=this.mBezierCurves,t=u.GetLineJoin(),AH,z,AG=[],AC=[],AI,x,AE,AD,AJ,y,AA,AF,AK;if(w.length===0){return ;}u.SetLineJoin(l.LJT_ROUND);this.SetLineWidth();z=w.length;if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||u.mUseAnimation){u.NewPath();w[0].MoveToStart(u);for(AH=0;AH<z;++AH){w[AH].CurveToEnd(u);}}else{for(AH=0;AH<z;++AH){w[AH].GetControlPoints(AG);O.call(this,AG);this.ApplyLineFormat();}}if(this.isClosePath){u.ClosePath();}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||u.mUseAnimation){this.ApplyLineFormat();}u.SetLineJoin(t);for(AH=0;AH<z;++AH){var AB=w[AH],s=new Q.Point2D({Point2D:AB.mP0}),r=new Q.Point2D({Point2D:AB.mP1}),q=new Q.Point2D({Point2D:AB.mP2}),p=new Q.Point2D({Point2D:AB.mP3});if(!this.mIsVertical){s.swap();r.swap();q.swap();p.swap();}AC.push(s);AC.push(r);AC.push(q);AC.push(p);}if((this.startPoint===undefined||this.startPoint===null)&&(this.endPoint===undefined||this.endPoint===null)&&(this.midPoint===undefined||this.midPoint===null)){AI=AC.length;this.startPoint={x:AC[0].x,y:AC[0].y};this.endPoint={x:AC[AI-1].x,y:AC[AI-1].y};if(z%2===0){this.midPoint={x:AC[AI/2-1].x,y:AC[AI/2-1].y};}else{x=(z-1)/2;AE=(w[x].mP0.x+w[x].mP3.x)/2;AD=w[x].evaluate(AE);if(!this.mIsVertical){AJ=AE;AE=AD;AD=AJ;}this.midPoint={x:AE,y:AD};}}else{if(!this.mIsVertical){U.call(this,this.startPoint);U.call(this,this.midPoint);U.call(this,this.endPoint);}}u.FinishDrawCurves(AC,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},DrawOutLine:function k(){var s=this.mChartContextPtr,p=this.mBezierCurves,q;this.SetOutlineWidth();s.NewPath();p[0].MoveToStart(s);var r=p.length;for(q=0;q<r;++q){p[q].CurveToEnd(s);}this.ApplyOutlineFormat();},PointInObject:function K(s){var r=this.mBezierCurves,q=(this.mFormatLinePtr.mLineThickness<4)?4:this.mFormatLinePtr.mLineThickness,p=r.length,u,t;for(u=0;u<p;++u){t=[];r[u].GetApproximatePolygon(q,t);if(s.IsInPolygon(t)){return true;}}return false;},ObjectInRectangle:function j(u){var q=this.mBezierCurves,p=(this.mFormatLinePtr.mLineThickness<1)?1:this.mFormatLinePtr.mLineThickness,w=q.length,t,r,s;for(t=0;t<w;++t){s=[];q[t].GetApproximatePolygon(p,s);for(r=0;r<s.length;++r){if(!u.PointInRectangle(s[r])){return false;}}}return true;},AddBezierCurveLine:function W(p){var q=this.mBezierCurves;if(q.length===0){this.mIsVertical=p.mIsVertical;}q.push(p);},GetClockwisePolygon:function B(){return[];},MoveToStart:function V(p){var q=this.mChartContextPtr;this.mBezierCurves[0].MoveToStart(q,p&&q.NeedAdjustedLinePath());},CurveToEnd:function b(s){var t=this.mChartContextPtr,p=this.mBezierCurves,r=p.length,q;for(q=0;q<r;++q){p[q].CurveToEnd(t,s&&t.NeedAdjustedLinePath());}},DashedCurveToEnd:function N(q,u){var w=this.mChartContextPtr,z=this.mBezierCurves,AG=z.length,AN,AL,AH;for(AN=0;AN<AG;++AN){var AM=[];z[AN].GetControlPoints(AM);var AO=AM.length;if(AO<4){return ;}var r=(u&&w.NeedAdjustedLinePath()),AQ=r?0.5:0,AC=r&&(AM[0].y===AM[1].y&&AM[1].y===AM[2].y&&AM[2].y===AM[3].y)?0.5:0,p=(Math.abs(AM[0].x-AM[1].x)<0.5)?0.5:0;AM[1].x+=p;AM[1].y+=AC;AM[2].x+=p;AM[2].y+=AC;AM[3].x+=AQ;AM[3].y+=AC;var AJ=Q.FormatLine.getLinePattern(q),AI=AJ.length,AP=0,s=0,AB=[],AF=[];for(AN=0;AN<AO;++AN){AF.push(0);AB.push(0);}var AE=AM[0].x,AD=AM[0].y;var AA=0.05;if(q===F.LS_DOT_DOT_DOT){AA=0.03;AJ[AI-1]*=2;}else{var AK=11.2;for(AL=0;AL<AI;++AL){if(AL%2===0){AJ[AL]*=AK;}}}for(AH=0;AH<=1;AH+=AA/AO){for(AN=1;AN<AO;++AN){for(AL=0;AL<AO-AN;++AL){if(AN===1){AB[AL]=AM[AL].x*(1-AH)+AM[AL+1].x*AH;AF[AL]=AM[AL].y*(1-AH)+AM[AL+1].y*AH;continue;}AB[AL]=AB[AL]*(1-AH)+AB[AL+1]*AH;AF[AL]=AF[AL]*(1-AH)+AF[AL+1]*AH;}}s+=Math.sqrt((AE-AB[0])*(AE-AB[0])+(AD-AF[0])*(AD-AF[0]));if(s>=AJ[AP]){if(AP%2===0){if(this.mIsVertical){w.MoveTo(AE,AD);w.LineTo(AB[0],AF[0]);}else{w.MoveTo(AD,AE);w.LineTo(AF[0],AB[0]);}}AP=(AP+1)%AI;s=0;AE=AB[0];AD=AF[0];}}}},LineToStart:function P(p){var q=this.mChartContextPtr;this.mBezierCurves[0].LineToStart(q,p&&q.NeedAdjustedLinePath());},getStartPoint:function X(){return this.mBezierCurves[0].getStartPoint();},getEndPoint:function D(){var p=this.mBezierCurves;return p[p.length-1].getEndPoint();},evaluate:function T(s){var q=this.mBezierCurves,u=q.length,r;for(r=0;(r+1)<u;++r){var p=q[r].getMinX();var t=q[r].getMaxX();if(p-s<c&&s-t<c){return q[r].evaluate(s);}}return q[q.length-1].evaluate(s);},GetMinMax:function d(){var p=this.mBezierCurves,t=p.length,r,q,s;if(t>0){r=p[0].GetMinMax();for(q=1;q<t;++q){s=p[q].GetMinMax();if(s.MinY<r.MinY){r.MinY=s.MinY;}if(s.MaxY>r.MaxY){r.MaxY=s.MaxY;}}}return r;},GetApproximatePolyline:function M(s){var p=this.mBezierCurves,r,q,u,w,t;p[0].GetApproximatePolyline(s);u=p.length;for(r=1;r<u;++r){w=[];p[r].GetApproximatePolyline(w);t=w.length;for(q=1;q<t;++q){s.push(w[q]);}}},CloneReverseShift:function n(s){var p=this.mBezierCurves,r=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),q;for(q=p.length-1;q>-1;--q){r.AddBezierCurveLine(p[q].CloneReverseShift(s));}return r;},Clone:function I(){var p=this.mBezierCurves,r=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),s=p.length,q;for(q=0;q<s;++q){r.AddBezierCurveLine(p[q].Clone());}return r;},Reverse:function Z(){var p=this.mBezierCurves,r=p.length,q;for(q=0;q<r;++q){p[q].Reverse();}p.reverse();},getMinX:function H(){var p=this.mBezierCurves,r=Number.MAX_VALUE,t=p.length,q;for(q=0;q<t;++q){var s=p[q].getMinX();if(s<r){r=s;}}return r;},getMaxX:function g(){var q=this.mBezierCurves,p=Number.MIN_VALUE,t=q.length,r;for(r=0;r<t;++r){var s=q[r].getMaxX();if(s>p){p=s;}}return p;},isBefore:function G(w,t){var q=this.mBezierCurves,u=q.length,p=t.mBezierCurves.length,s,r;for(s=0;s<u;++s){for(r=0;r<p;++r){if(q[s].isBefore(w,t.mBezierCurves[r])){return true;}}}return false;},SplitAtTangentPoints:function A(q,p){if(!this.mIsVertical){q.swap();}if(q.x===0){return ;}f.call(this,q,p);},SplitAtIntersections:function Y(s,p){var r=[];o.call(this,s,r);p=r;S.call(this,s,p);var t=r.length,q;for(q=0;q<t;++q){S.call(r[q],s,p);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","GraphObjectManager","ShapeObject","TextObject","StraightLineObject","GraphCollectionObject","PolygonObject","PolyLineObject","GraphAxisGeneral","AxisObject","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphTitleName","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphAxisLabelLocation");var Af=mstrmojo.chart,AY=Af.ChartConstants,N=Af.enums,AB=N.EnumCollectionType,Ac=N.EnumGraphMajorType,Ak=N.EnumDSSExtraGraphObject,Aq=N.EnumAnchorPoint,Z=N.EnumAxisLabelsLocation,Aj=N.EnumAxisDirection,V=N.EnumGraphObjectType,AI=Af.gNullGroupId,o=Af.gNullTripleId,AD=Af.gNullObjectId,F=0,E=1,AH=2,r=3,q=4,p=5,n=6,u=7,AF=8,D=100,An=2;var AW=mstrmojo.chart.model,AK=AW.enums,Av=AK.EnumDSSGraphProperty,Aw=AK.EnumDSSGraphObject,AP=AK.EnumDSSGraphTitleName,Ai=AK.EnumDSSExtraGraphProperty,H=AK.EnumDSSGraphFontRotation,Ax=AK.EnumDSSGraphGridLineType,O=AK.EnumDSSGraphAxisLabelLocation;var g=1,AG=2,b=4,y=8;var X=null,M=null,L=null,Aa=null,x=null;function AS(){if(!this.mUseDepth){return ;}var A3=this.mDeviceDataArea,A2=this.mDepthOffset;A3.x+=A2.x;A3.y+=A2.y;this.mUseDepth=false;}function As(A2){switch(A2.mGridStyle){case Ax.DssGraphGridRegular:case Ax.DssGraphGridBoth:A2.mGridStyle=Ax.DssGraphGridRegular;break;case Ax.DssGraphGridInnerTicks:case Ax.DssGraphGridOuterTicks:case Ax.DssGraphGridSpanningTicks:A2.mShowGridLines=false;break;default:A2.mGridStyle=Ax.DssGraphGridRegular;}}function T(A5,A9,BA){var BC,A7,A6,A2,BD,A8,BE,A4=this.mDeviceDataArea,A3=true,BB=true;if(this.IsVerticalAxis()){A3=(A5.x===A4.x);BB=(A5.x+A5.width===A4.x+A4.width);}else{A3=(A5.y+A5.height===A4.y+A4.height);BB=(A5.y===A4.y);}if(A3&&BB){this.generateGridsByArea(BA);this.MoveGraphObjectList(A9);return ;}BC=this.mUseDepth;A7=A4;A6=this.mMajorGrid.mShowGridLines;A2=this.mMinorGrid.mShowGridLines;BD=this.mMajorGrid.mGridStyle;A8=this.mMinorGrid.mGridStyle;BE=this.mAxisInfo.mAxisLabelsLocation;this.mDeviceDataArea=A5;if(A3||BB){if(A3){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;}else{this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;}if(!this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){AS.call(this);}}else{AS.call(this);As.call(this,this.mMajorGrid);As.call(this,this.mMinorGrid);}this.generateGridsByArea(BA);this.MoveGraphObjectList(A9);this.mUseDepth=BC;this.mDeviceDataArea.ResetRect(A7);this.mMajorGrid.mShowGridLines=A6;this.mMinorGrid.mShowGridLines=A2;this.mMajorGrid.mGridStyle=BD;this.mMinorGrid.mGridStyle=A8;this.mAxisInfo.mAxisLabelsLocation=BE;}function AM(A2){var A5=this.mDeviceDataArea,A4,A3;switch(A2){case Z.ALL_BOTTOM:A4=A5.GetBottomLeft();A3=A5.GetBottomRight();if(this.mChartContextPtr.mIsTimeSeriesChart){A4.x=0;}break;case Z.ALL_TOP:A4=A5.GetTopLeft();A3=A5.GetTopRight();break;case Z.ALL_LEFT:A4=A5.GetTopLeft();A3=A5.GetBottomLeft();break;case Z.ALL_RIGHT:A4=A5.GetTopRight();A3=A5.GetBottomRight();break;default:A4=null;A3=null;break;}return{Start:A4,End:A3};}function A0(A2){var A6,A3,A5,A4;if(this.mUseDepth){return ;}A4=AM.call(this,A2);A6=A4.Start;A3=A4.End;A5=new Af.StraightLineObject({TripleId:this.mTripleId,GraphObjectManager:this,StartPoint:A6,EndPoint:A3,GraphCollectionObject:this.mpAxisLineSet});this.mManagerGraphObjectList.push(A5);this.mpAxisLineSet.AddGraphObject(A5);}function B(){var A3,A4,A6,A7,BA=[],A2,A8,A9,A5;A6=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;A7=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;if(this.hasDepthAxisLine(A6)){A9=AM.call(this,A6);}else{if(this.hasDepthAxisLine(A7)){A9=AM.call(this,A7);}else{return ;}}A3=A9.Start;A4=A9.End;BA.push(A3);BA.push(A4);BA.push(A4.Shifted(this.mDepthOffset));BA.push(A3.Shifted(this.mDepthOffset));A5=new Af.TripleId({ObjectId:Aw.DssGraphFrame});A2=new Af.PolygonObject({TripleId:A5,GraphObjectManager:this,Polygon:BA});A2.mIsDetectable=false;A8=A2.GetFormatFill();A8.MakeDarker(this.IsVerticalAxis()?0.8:0.6);this.mManagerGraphObjectList.push(A2);}function e(BB,A6,A8,BA,BC,A2){var A4,A9,A5,A3,A7;A9=this.mChartContextPtr.CalculateDepthOffset(A8,this.mDepthDirection,true);A4=new Af.Point2D({x:A9.OffsetX,y:A9.OffsetY});A2.splice(0,A2.length);A5=new Af.Point2D();A3=new Af.Point2D();A5.init({Point2D:BA});A3.init({Point2D:BC});if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){A5.init({Point2D:BC});A3.init({Point2D:BA});}A3=A3.Shifted(this.mDepthOffset);A7=new Af.Point2D();A7.Reset(0,0);if(this.IsVerticalAxis()){A7.x=this.IsLeftDirection()?A8:-A8;}else{A7.y=this.IsDownDirection()?-A8:A8;}switch(A6){case Ax.DssGraphGridRegular:A2.push(A5);A2.push(A5.Shifted(this.mDepthOffset));A2.push(A3);break;case Ax.DssGraphGridBoth:if(this.hasDepthAxisLine(BB)||this.HasLabelsOnBothSides()){A2.push(A5.Shifted(A7));}A2.push(A5);A2.push(A5.Shifted(this.mDepthOffset));A2.push(A3);if(!this.hasDepthAxisLine(BB)||this.HasLabelsOnBothSides()){A2.push(A3.Shifted(-A7));}break;case Ax.DssGraphGridInnerTicks:if(this.hasDepthAxisLine(BB)){A2.push(A5);A2.push(A5.Shifted(A4));}else{A2.push(A3);A2.push(A3.Shifted(A7));}break;case Ax.DssGraphGridOuterTicks:if(this.hasDepthAxisLine(BB)){A2.push(A5.Shifted(A7));A2.push(A5);}else{A2.push(A3);A2.push(A3.Shifted(-A7));}break;case Ax.DssGraphGridSpanningTicks:if(this.hasDepthAxisLine(BB)){A2.push(A5.Shifted(A7));A2.push(A5);A2.push(A5.Shifted(A4));}else{A2.push(A3.Shifted(A7));A2.push(A3.Shifted(-A7));}break;}}mstrmojo.chart.Axis=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Axis",mDeviceDataArea:null,mTickLength:-1,mUseDepth:false,mDepth:0,mDepthDirection:0,mDepthOffset:null,mManagerGraphObjectList:null,mpMajorGridSet:null,mpMinorGridSet:null,mpAxisLabelSet:null,mpAxisLineSet:null,mIsUniformAxis:false,maxLabelLength:-1,hasLabelCreated:false,hasMajorTickCreated:false,hasMinorTickCreated:false,mLabelInterval:0,resizeAction:-1,mLabelList:null,restrictWidth:null,restrictHeight:null,mIsShown:true,mIntegrity:15,init:function AL(A2){this._super(A2);var A3=this.mChartContextPtr;this.mLabelList=[];if(this.mUseDepth){this.mDepthOffset=new Af.Point2D();}this.mManagerGraphObjectList=[];if(!!A2.IsUA){this.mIsUniformAxis=true;}if(this.mIsUniformAxis){this.restrictHeight=this.restrictWidth=-1;}this.mAxisInfo=new Af.GraphAxisGeneral(A2);this.mMajorGrid={mShowGridLines:true,mGridStyle:Ax.DssGraphGridRegular,mUseManualGrid:false,mGridInterval:0};this.mMinorGrid={mShowGridLines:false,mGridStyle:Ax.DssGraphGridNone,mUseManualGrid:false,mGridInterval:0};switch(A2.AxisDirection){case Aj.AD_X:this.mTickLength=A3.mGraphHeight/D+1;break;case Aj.AD_Y:this.mTickLength=A3.mGraphWidth/D+1;break;case Aj.AD_Z:this.mTickLength=2;break;}this.mTickLength=Math.max(4,this.mTickLength);},SetDeviceDataArea:function I(A2){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new Af.Rect2D({Rect2D:A2});}else{this.mDeviceDataArea.ResetRect(A2);}},IsReverseOrder:function W(){return this.mAxisInfo.mAxisDrawInReverse;},SetIntegrity:function s(A2){this.mIntegrity=A2;if((A2&g)===0){this.mAxisInfo.mShowAxisLine=false;this.mMajorGrid.mGridStyle=Ax.DssGraphGridNone;}if((A2&AG)===0){this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Ax.DssGraphGridNone;}if((A2&y)===0){this.mMinorGrid.mShowGridLines=false;this.mMinorGrid.mGridStyle=Ax.DssGraphGridNone;}if((A2&b)===0){this.mAxisInfo.mShowAxisLabels=false;}},HasLabelsOnBothSides:function Ab(){return(this.mAxisInfo.mAxisLabelsLocation===Z.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===Z.ALL_LEFT_RIGHT)&&!(this.mChartContextPtr.mIsTimeSeriesChart);},IsVerticalAxis:function J(){return this.mAxisInfo.mAxisDirection===Aj.AD_Y;},IsLeftDirection:function Ao(){return this.mDepthDirection>90&&this.mDepthDirection<270;},IsDownDirection:function AA(){return this.mDepthDirection>180;},HasOuterTicks:function AU(A2){return A2===Ax.DssGraphGridOuterTicks||A2===Ax.DssGraphGridBoth||A2===Ax.DssGraphGridSpanningTicks;},HasTwoGridLineParts:function AJ(A2){return this.HasLabelsOnBothSides()&&(A2===Ax.DssGraphGridInnerTicks||A2===Ax.DssGraphGridOuterTicks||A2===Ax.DssGraphGridSpanningTicks);},IsLogarithmic:function Ap(){return false;},getIndex:function Q(){switch(this.mTripleId.mObjectId){case Aw.DssGraphO1Body:return F;case Aw.DssGraphO2Body:return E;case Aw.DssGraphX1Body:return AH;case Aw.DssGraphY1Body:return r;case Aw.DssGraphY2Body:return q;case Aw.DssGraphY3Body:return p;case Aw.DssGraphY4Body:return n;case Aw.DssGraphZBody:return u;case Aw.DssGraphX2Body:return AF;default:return 0;}},GetInterlacedGridId:function A1(){return Ak.DssGraphO1Interlaced+this.getIndex();},ReserveTitleArea:function d(A5){var A3,A2,A7,A4,A6;if(!this.mAxisInfo.mShowAxisTitle){return ;}A3=this.getIndex();A2=Af.gAxisObjects[A3].mTitleId;if(A2.mObjectId===Af.gNullObjectId){return ;}A7=new Af.TripleId({ObjectId:A2.mObjectId,SeriesId:Af.gNullSeriesId,GroupId:AI});A4=new Af.Rect2D();this.InitObjectSet(A7,V.GOT_AXIS_TITLE);A6=new Af.TextObject({TripleId:A7,GraphObjectManager:this,rect:A4,ParentObject:this.mpAxisTitleSet});this.mpAxisTitleSet.AddGraphObject(A6);A6.SetText(this.mAxisTitle);this.mGraphObjectList.push(A6);this.ReserveTitle(A5,false);},ReserveTitle:function AZ(A7,A4){var A6,A3,A2,A5;if(!this.mAxisInfo.mShowAxisTitle){return ;}A6=this.mGraphObjectList[0];A3=A6.GetBoundingRect();A2=A4?-1:1;A5=((this.IsVerticalAxis()?A3.width:A3.height)+An)*A2;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:A7.height-=A5;break;case Z.ALL_TOP:if(this.mTripleId.mObjectId===Aw.DssGraphO1Body){A7.height-=A5;}else{A7.y+=A5;A7.height-=A5;}break;case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:A7.x+=A5;A7.width-=A5;break;case Z.ALL_RIGHT:if(this.mTripleId.mObjectId===Aw.DssGraphO1Body){A7.x+=A5;A7.width-=A5;}else{A7.width-=A5;}break;}},UpdateTitleLocation:function Ar(A7){var A6,A4,A3,A2,A5,A8;if(!this.mAxisInfo.mShowAxisTitle){return ;}A6=this.mGraphObjectList[0];if(this.mChartContextPtr.mManualLayoutMode&&!this.mChartContextPtr.mRecalculateFrame){this.MoveTitleForManual(A6);return ;}A4=A6.GetBoundingRect();A3=this.GetLabelOffset(this.mAxisInfo.mAxisLabelsLocation);if(this.IsVerticalAxis()){A2=A7.y+A7.height/2+A3.y;}else{A2=A7.x+A7.width/2+A3.x;}A5=(this.IsVerticalAxis()?A4.width:A4.height)/2+An;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:A6.MoveTo(A2,A7.y+A7.height+A5,Aq.CENTER);break;case Z.ALL_TOP:if(this.mTripleId.mObjectId===Aw.DssGraphO1Body){A6.MoveTo(A2,A7.y+A7.height+A5,Aq.CENTER);}else{A6.MoveTo(A2,A7.y-A5,Aq.CENTER);}break;case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:A6.MoveTo(A7.x-A5,A2,Aq.CENTER);break;case Z.ALL_RIGHT:if(this.mTripleId.mObjectId===Aw.DssGraphO1Body){A6.MoveTo(A7.x-A5,A2,Aq.CENTER);}else{A6.MoveTo(A7.x+A7.width+A5,A2,Aq.CENTER);}break;}A8=A6.mTripleId;A4=A6.GetBoundingRectNoRotation();this.mChartContextPtr.PutLocation(this.getAxisTitleLocationId(A8.mObjectId),A4);},generateAxisLine:function Ay(A2){this.CreateAxisLine();return this.MoveGraphObjectList(A2);},CreateAxisLine:function k(){var A2;if(this.mUseDepth){B.call(this);return ;}if(!this.mAxisInfo.mShowAxisLine){return ;}A2=new Af.TripleId({ObjectId:this.mTripleId.mObjectId});this.InitObjectSet(A2,V.GOT_AXIS_LINE);switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM_TOP:A0.call(this,Z.ALL_BOTTOM);A0.call(this,Z.ALL_TOP);break;case Z.ALL_LEFT_RIGHT:A0.call(this,Z.ALL_LEFT);A0.call(this,Z.ALL_RIGHT);break;default:A0.call(this,this.mAxisInfo.mAxisLabelsLocation);break;}},ReserveDepthAxisLine:function Am(A5,A3,A2){var A4;if(!this.mUseDepth){return ;}A4=new Af.Point2D({Point2D:this.mDepthOffset});A4.x=Math.abs(A4.x);A4.y=Math.abs(A4.y);if(A3){A4.x=-A4.x;A4.y=-A4.y;}if(this.mAxisInfo.mAxisDirection===Aj.AD_X||A2){if(this.mDepthDirection<180){A5.y+=A4.y;A5.height-=A4.y;}else{A5.height-=A4.y;}}else{if(this.mAxisInfo.mAxisDirection===Aj.AD_Y||A2){if(this.mDepthDirection<90||this.mDepthDirection>270){A5.width-=A4.x;}else{A5.x+=A4.x;A5.width-=A4.x;}}}},TrimMarginsForDepthAxis:function AR(A5,A6){var A4,A2,A3;A4=A5;A2=A6;if(!this.mUseDepth){A3={HighMargin:A2,LowMargin:A4};return A3;}if(this.IsVerticalAxis()){if(this.mDepthDirection<180){A2+=this.mDepthOffset.y;}else{A4-=this.mDepthOffset.y;}}else{if(this.mDepthDirection<90||this.mDepthDirection>270){A2-=this.mDepthOffset.x;}else{A4+=this.mDepthOffset.x;}}A2=(A2>=0)?A2:0;A4=(A4>=0)?A4:0;A3={HighMargin:A2,LowMargin:A4};return A3;},getDepthMargin:function z(A5,A6){if(!this.mUseDepth){return null;}var A3=this.mDepthOffset,A4=A5,A2=A6;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_LEFT:case Z.ALL_RIGHT:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A3.y>0){A4=A3.y;}else{A2=-A3.y;}}else{if(A3.y>0){A2=A3.y;}else{A4=-A3.y;}}break;case Z.ALL_BOTTOM:case Z.ALL_TOP:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A3.x>0){A2=A3.x;}else{A4=-A3.x;}}else{if(A3.x>0){A4=A3.x;}else{A2=-A3.x;}}break;case Z.ALL_LEFT_RIGHT:case Z.ALL_BOTTOM_TOP:break;default:return null;}return{highMargin:A2,lowMargin:A4};},GetLabelOffset:function S(A2,A3){if(!A3){A3=new Af.Point2D();}A3.Reset(0,0);if((!this.mUseDepth)||this.hasDepthAxisLine(A2)){return A3;}A3.ResetPoint(this.mDepthOffset);return A3;},GenerateGridLinesEx:function Ag(){this.GenerateGridLines(this.mDeviceDataArea,0,this.mGraphObjectList);},GenerateGridLines:function c(A3,A4,A2){if((this.mMajorGrid.mShowGridLines&&this.mMajorGrid.mGridStyle!==Ax.DssGraphGridNone)||(this.mMinorGrid.mShowGridLines&&this.mMinorGrid.mGridStyle!==Ax.DssGraphGridNone)){T.call(this,A3,A2,true);}},GenerateInterlacedGrids:function a(A3,A4,A2){if(this.mAxisInfo.mUseInterlacedGrids){T.call(this,A3,A2,false);}},MoveGraphObjectList:function C(A3){var A2,A4;A2=this.mManagerGraphObjectList.length;for(A4=0;A4<A2;++A4){A3.push(this.mManagerGraphObjectList[A4]);}this.mManagerGraphObjectList.splice(0,this.mManagerGraphObjectList.length);},GenerateOneLineObject:function Au(A5,A4,A3){var A2;A2=new Af.PolyLineObject({TripleId:A5,GraphObjectManager:this,PolyLine:A4,GraphCollectionObject:A3});A3.AddGraphObject(A2);this.mManagerGraphObjectList.push(A2);},SetDepthAndDirection:function Ad(A4,A2){var A3;this.mUseDepth=true;this.mDepth=A4;this.mDepthDirection=A2;A3=this.mChartContextPtr.CalculateDepthOffset(this.mDepth,this.mDepthDirection);this.mDepthOffset.x=A3.OffsetX;this.mDepthOffset.y=A3.OffsetY;},getAxisTitleLocationId:function Ae(A2){switch(A2){case AP.DssGraphTitleCategory:return Av.DssGraphTitleXLocation;case AP.DssGraphTitleY1:return Av.DssGraphTitleY1Location;case AP.DssGraphTitleY2:return Av.DssGraphTitleY2Location;case AP.DssGraph3DRowTitle:return Av.DssGraph3DRowTitleLocationNEW;case AP.DssGraph3DColTitle:return Av.DssGraph3DColTitleLocationNEW;case AP.DssGraph3DLYTitle:return Av.DssGraph3DLYTitleLocation;case AP.DssGraph3DRYTitle:return Av.DssGraph3DRYTitleLocation;default:return 0;}},MoveLabel:function AX(A8,A2,A4,BA){var A7,A5,BC,A6,A3;if(BA===undefined){BA=Af.Axis.gLabelMargin;}A7=A8.GetTransformedRect(true);BC=A8.mFormatFontPtr.mFontRotation;if(X===null){X=new Af.Point2D();}else{X.Reset(0,0);}switch(BC){case H.Rotate45:case H.Rotate315:case H.Normal:if(BC===H.Rotate45||BC===H.Rotate315){A5=(BC===H.Rotate45)?1:-1;A4.Reset((A4.x-A5*A4.y)*Math.SQRT1_2,(A5*A4.x+A4.y)*Math.SQRT1_2);A2.Reset((A2.x-A5*A2.y)*Math.SQRT1_2,(A5*A2.x+A2.y)*Math.SQRT1_2);}X.Reset(A7.width/2,A7.height/2);break;case H.Rotate90:X.Reset(A7.width/2,(A7.height+1)/2);break;case H.Rotate180:X.Reset((A7.width+1)/2,(A7.height+1)/2);break;case H.Rotate270:X.Reset((A7.width+1)/2,A7.height/2);break;case H.Custom:break;default:}A6=0.1;var BB=0,A9=0;if(Math.abs(A4.x)<A6||Math.abs(A4.y)<A6){if(Math.abs(A4.x)<A6&&A4.y<0){X.y=A7.height-X.y;}else{if(A4.x<0&&Math.abs(A4.y)<A6){X.x=A7.width-X.x;}}A3=X.x*Math.abs(A4.x)+X.y*Math.abs(A4.y)+BA;BB=A2.x+A3*A4.x;A9=A2.y+A3*A4.y;}else{if(A4.x>0&&A4.y<0){X.y=-(A7.height-X.y);}else{if(A4.x<0&&A4.x>0){X.x=-(A7.width-X.x);}else{if(A4.x<0&&A4.y<0){X.Reset(-(A7.width-X.x),-(A7.height-X.y));}}}BB=A2.x+BA*A4.x+X.x;A9=A2.y+BA*A4.y+X.y;}if(BC===H.Rotate45||BC===H.Rotate315){A5=(BC===H.Rotate45)?-1:1;BB=(BB-A5*A9)*Math.SQRT1_2;A9=(A5*BB+A9)*Math.SQRT1_2;}A8.MoveTo(Math.floor(BB+(BB<0?-0.5:0.5)),Math.floor(A9+(A9<0?-0.5:0.5)),Aq.CENTER);},MoveTitleForManual:function AN(A4){if(!this.mChartContextPtr.mManualLayoutMode){return ;}var A3=A4.mTripleId,A2=this.mChartContextPtr.GetLocationRect(this.getAxisTitleLocationId(A3.mObjectId));if(A2){A4.SetRect(A2);A4.CalculateDeviceRect();}else{A4.mIsShown=false;}},InitObjectSet:function AO(A5,A4){var A3,A2=AB.CT_LINE;switch(A4){case V.GOT_AXIS_TITLE:A3=this.mpAxisTitleSet;A2=AB.CT_TEXT;break;case V.GOT_AXIS_LABEL:A3=this.mpAxisLabelSet;A2=AB.CT_TEXT;break;case V.GOT_AXIS_LINE:A3=this.mpAxisLineSet;break;case V.GOT_MAJOR_GRID:A3=this.mpMajorGridSet;break;case V.GOT_MINOR_GRID:A3=this.mpMinorGridSet;break;case V.GOT_INTERLACED_GRID:A3=this.mpInterlacedGridSet;A2=AB.CT_GENERAL_SHAPE;break;default:}if(A3!==null&&A3!==undefined){return ;}if(this.mTripleId.mSeriesId>0){A3=this.GetGraphObject(A5,false);}if(!A3){A3=new Af.GraphCollectionObject({TripleId:A5,GraphObjectManager:this,CollectionType:A2});this.AddToMap(A3);}switch(A4){case V.GOT_AXIS_TITLE:this.mpAxisTitleSet=A3;break;case V.GOT_AXIS_LABEL:this.mpAxisLabelSet=A3;break;case V.GOT_AXIS_LINE:this.mpAxisLineSet=A3;break;case V.GOT_MAJOR_GRID:this.mpMajorGridSet=A3;break;case V.GOT_MINOR_GRID:this.mpMinorGridSet=A3;break;case V.GOT_INTERLACED_GRID:this.mpInterlacedGridSet=A3;break;default:}},LoadProperties:function AT(){var A5,A8,A7=this.mChartContextPtr,A6,A4,A2,A3;if(A7.mIsGraphMatrix){A8=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Ax.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){A5=A7.GetProperty(Av.DssGraphStyleMajor,A8);if(this.mMajorGrid.mShowGridLines&&A5){this.mMajorGrid.mGridStyle=A5;}}return ;}A8=new Af.TripleId({ObjectId:this.mTripleId.mObjectId});A5=A7.GetProperty(Av.DssGraphShow2DAxisLabels,A8);if(A5){this.mAxisInfo.mShowAxisLabels=A5!==false;}if(A7.GetGraphMajorType()===Ac.GMT_GAUGE){return ;}A6=0;switch(this.mTripleId.mObjectId){case Aw.DssGraphO1Body:A6=Av.DssGraphShow2DXTitle;break;case Aw.DssGraphO2Body:A6=Av.DssGraphShowTitleSeries;break;case Aw.DssGraphX1Body:A6=Av.DssGraphShow2DXTitle;break;case Aw.DssGraphY1Body:A6=Av.DssGraphShow2DY1Title;break;case Aw.DssGraphY2Body:case Aw.DssGraphX2Body:A6=Av.DssGraphShow2DY2Title;break;case Aw.DssGraphY3Body:case Aw.DssGraphY4Body:break;case Aw.DssGraphZBody:A6=Av.DssGraphShow3DColTitle;break;default:}A5=A7.GetProperty(A6,o);if(A6!==0&&A5){this.mAxisInfo.mShowAxisTitle=A5!==false;}if(A7.isUADataAreaOutput()){this.mAxisInfo.mShowAxisLabels=false;this.mAxisInfo.mShowAxisTitle=false;}A4=this.mAxisInfo.mShowAxisTitle;if(A4){A3=Af.gAxisObjects[this.getIndex()].mTitleId;A5=A7.GetProperty(Av.DssGraphTextContent,A3);if(A3.mObjectId!==AD&&A5){this.mAxisTitle=A5;}}A5=A7.GetProperty(Ai.DssGraphUseInterlacedGrid,A8);if(A5){this.mAxisInfo.mUseInterlacedGrids=A5!==false;}A5=A7.GetProperty(Av.DssGraphShow2DAxisMajor,A8);if(A5){this.mMajorGrid.mShowGridLines=A5!==false;}A5=A7.GetProperty(Av.DssGraphStyleMajor,A8);if(this.mMajorGrid.mShowGridLines&&A5){this.mMajorGrid.mGridStyle=A5;}A5=A7.GetProperty(Av.DssGraphShow2DAxisMinor,A8);if(A5){this.mMinorGrid.mShowGridLines=A5!==false;}A5=A7.GetProperty(Av.DssGraphStyleMinor,A8);if(this.mMinorGrid.mShowGridLines&&A5){this.mMinorGrid.mGridStyle=A5;}A5=A7.GetProperty(Av.DssGraphManualMinor,A8);if(A5){this.mMinorGrid.mUseManualGrid=A5!==false;}A5=A7.GetProperty(Av.DssGraphCountMinor,A8);if(A5){this.mMinorGrid.mGridInterval=A5;}A5=A7.GetProperty(Av.DssGraphShow2DAxisLine,A8);if(A5){this.mAxisInfo.mShowAxisLine=A5;}switch(A7.GetGraphMajorType()){case Ac.GMT_POLAR:case Ac.GMT_RADAR:return ;default:break;}A5=A7.GetProperty(Av.DssGraph2DSide,A8);if(A5){if(A5===O.DssGraphAxisLabelLowSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;}else{if(A5===O.DssGraphAxisLabelHighSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;}else{if(A5===O.DssGraphAxisLabelBothSides){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT_RIGHT:Z.ALL_BOTTOM_TOP;}}}}},generateGridsByArea:function t(){},GetOneGridLine:function Y(A3,A6,A5,A2,A4,A7){if(this.mUseDepth){e.call(this,A3,A6,A5,A2,A4,A7);return ;}A7.splice(0,A7.length);M=new Af.Point2D({Point2D:A2});L=new Af.Point2D({Point2D:A4});A7.push(M);A7.push(L);if(Aa===null){Aa=new Af.Point2D();}else{Aa.Reset(0,0);}if(x===null){x=new Af.Point2D();}else{x.Reset(0,0);}if(this.IsVerticalAxis()){if(A3===Z.ALL_RIGHT){x.x=A5;}else{Aa.x=-A5;}}else{if(A3===Z.ALL_TOP){x.y=-A5;}else{Aa.y=A5;}}switch(A6){case Ax.DssGraphGridRegular:break;case Ax.DssGraphGridBoth:A7[0].x+=Aa.x;A7[0].y+=Aa.y;if(this.HasLabelsOnBothSides()){A7[1].x-=Aa.x;A7[1].y-=Aa.y;}else{A7[1].x+=x.x;A7[1].y+=x.y;}break;case Ax.DssGraphGridInnerTicks:if(A3!==Z.ALL_RIGHT&&A3!==Z.ALL_TOP){A7[1].x=A7[0].x-Aa.x;A7[1].y=A7[0].y-Aa.y;}else{A7[0].x=A7[1].x-x.x;A7[0].y=A7[1].y-x.y;}break;case Ax.DssGraphGridOuterTicks:if(A3!==Z.ALL_RIGHT&&A3!==Z.ALL_TOP){A7[1].x=A7[0].x+Aa.x;A7[1].y=A7[0].y+Aa.y;}else{A7[0].x=A7[1].x+x.x;A7[0].y=A7[1].y+x.y;}break;case Ax.DssGraphGridSpanningTicks:if(A3!==Z.ALL_RIGHT&&A3!==Z.ALL_TOP){A7[1].x=A7[0].x-Aa.x;A7[1].y=A7[0].y-Aa.y;A7[0].x+=Aa.x;A7[0].y+=Aa.y;}else{A7[0].x=A7[1].x-x.x;A7[0].y=A7[1].y-x.y;A7[1].x+=x.x;A7[1].y+=x.y;}break;default:}},hasDepthAxisLine:function f(A2){if(!this.mUseDepth){return false;}switch(A2){case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:return(this.mDepthDirection<90||this.mDepthDirection>270);case Z.ALL_RIGHT:return(this.mDepthDirection>90&&this.mDepthDirection<270);case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:return(this.mDepthDirection<180);case Z.ALL_TOP:return(this.mDepthDirection>180);default:return false;}},TrimAxisPadding:function P(){},resetRestrictSpace:function At(A2){if(A2!==undefined){this.restrictWidth=A2.width;this.restrictHeight=A2.height;}else{this.restrictWidth=this.restrictHeight=-1;}},GetAxisLabelRotation:function Al(){},isBaseLineQualified:function G(A2){return false;},liftedFromZero:function Az(){return false;},SetTrimWithPadding:function AC(){},GetPositionAtTick:function j(){},getLabelRotation:function AQ(){if(this.mpAxisLabelSet){var A2=this.mpAxisLabelSet.GetFormatFont();return A2.mFontRotation;}return -1;},GetOuterTickLength:function l(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength;}return 0;},updateMaxLabelLength:function AV(A3,A2){if(A3>0){if(A2===undefined){A2=false;}if(A2){A3=this.calculateMaxAxisSpace(A3);}}this.maxLabelLength=A3;},calculateMaxAxisSpace:function R(A3){var A2=this.mChartContextPtr.GetGraphMatrixContext();A3-=(this.GetOuterTickLength()+A2.getPadding(AY.kLabelToChart));if(this instanceof mstrmojo.chart.CategoryAxis){A3-=A2.getPadding(AY.kCategoricalLabelToTick);}else{A3-=A2.getPadding(AY.kNumericLabelToTick);}return Math.max(A3,0);},getNextStatus:function Ah(A3){var A5=-1,A6=1,BA=!this.IsVerticalAxis(),A9=0,A8=1,A7=2,A4=this.getStatus(),A2=this.mLabelInterval;if(BA){if(A3===A9){if(A2>1){A4=A5;}}else{if(A3===A7){if(A2>=2&&A4!==A6){A4=A5;}}}}else{if(A3===A8){if(A2!==1){A4=A5;}}else{if(A2<2){A4=A5;}}}return A4;},clearTickObjects:function AE(A8,A6){var A5,A3=this.mChartContextPtr.getUtiliy().tripleId,A4=this.mGraphObjectList,A2=A4.length,A7=A6?this.mpMajorGridSet:this.mpMinorGridSet;if(A7){A7.ClearCollection();}for(A5=A2-1;A5>=0;A5--){if(A3.equal(A4[A5].mTripleId,A8)){A4.splice(A5,1);}}},restoreLabels:function K(A3){var A5;if(this.hasLabelCreated){var A4,A2=this.mpAxisLabelSet.GetCollectionSize(),A7=A2<=0,A6;if(A2===0){A2=this.mLabelList.length;}for(A5=0;A5<A2;++A5){if(A7){A4=this.mLabelList[A5];}else{A4=this.mpAxisLabelSet.GetObjectByIndex(A5);}if(!!A4===false){continue;}A6={Stringent:true,Restroke:true,TextWidthLimit:this.maxLabelLength,DivideByWord:true};if(this instanceof mstrmojo.chart.CategoryAxis&&this.mChartContextPtr.mIsGraphMatrix){if(this.mWordWrap===false){A6.LineCount=1;}else{A6.LineCount=2;}}A4.Restore(A6);if(A3){A4.mIsShown=true;}}}},checkShownLabelCount:function w(A6){var A7=this.mLabelList,A2=A7.length,A3=0,A8=-2,A4=-1;for(var A5=0;A5<A2;A5++){if(A7[A5]&&A7[A5].mIsShown){A3++;}if(A6!==undefined&&A3>=A6){return A8;}}if(A6!==undefined){return A4;}return A3;},checkCondense:function A(){return false;},getCondenseStatus:function U(){return undefined;},getUniformAxisLabelsInfo:function h(A5){var A4=0,A6=[],A2=this.mLabelList.length;while(A4<A2){var A3=this.mLabelList[A4];if(A3.mIsShown){if(A5){if(A5.CheckTruncated){if(A3.mIsTruncated===false){continue;}}}A6.push({Text:A3.mText,Rect:A3.GetBoundingRect()});}++A4;}return A6;}});Af.Axis.gLabelMargin=4;}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Point2D","Rect2D","PolyLineObject","PolygonObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFontRotation","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var $C=mstrmojo.chart,$M=mstrmojo.chart.model,$MODEL_ENUMS=$M.enums,$CHART_ENUMS=$C.enums,$FR=$MODEL_ENUMS.EnumDSSGraphFontRotation,$GO=$MODEL_ENUMS.EnumDSSGraphObject,$SHP=$MODEL_ENUMS.EnumShapeType,$GMDLP=$CHART_ENUMS.EnumGraphMatrixDataLabelPosition,kOffset=[[0,0],[0,1],[1,0],[1,1]],kGridGeneric=1,kGridOccupy=2,kGridObject=4,kGridCircle=8,k_MaxCount=10000000;function hPointToIndex(point,isUseFloorValue){var x=point.x-this.Origin.x,y=point.y-this.Origin.y,xIndex,yIndex;if(isUseFloorValue===undefined){isUseFloorValue=true;}if(isUseFloorValue){xIndex=Math.floor(x/this.XUnit);yIndex=Math.floor(y/this.YUnit);}else{xIndex=Math.ceil(x/this.XUnit);yIndex=Math.ceil(y/this.YUnit);}return{flag:!(xIndex<0||yIndex<0),col:xIndex,row:yIndex};}function hGetRectPosition(rect,adjustValue){var x,y,xCover,yCover,temp,result;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;if(x<0||y<0||xCover>this.XCount||yCover>this.YCount||x+xCover>this.XCount||y+yCover>this.YCount){if(!adjustValue){result=null;}else{result={x:Math.max(0,x),y:Math.max(0,y),xRange:Math.min(xCover,this.XCount),yRange:Math.min(yCover,this.YCount)};}}else{result={x:x,y:y,xRange:xCover,yRange:yCover};}return result;}function hIndexToPoint(x,y,point){if(point){point.x=this.Origin.x+x*this.XUnit;point.y=this.Origin.y+y*this.YUnit;return point;}return new $C.Point2D({x:this.Origin.x+x*this.XUnit,y:this.Origin.y+y*this.YUnit});}function hIsOccupiedByHostMarkerRect(hostMarker,x,y){var lX,lY,lXRange,lYRange,lRetVal;lRetVal=hGetRectPosition.call(this,hostMarker,true);lX=lRetVal.x;lY=lRetVal.y;lXRange=lRetVal.xRange;lYRange=lRetVal.yRange;return(x>=lX&&x<=lX+lXRange&&y>=lY&&lY<=lY+lYRange);}function hIsOccupiedByHostMarkerCircle(center,radius,x,y){var i,xIndex,yIndex,point=new $C.Point2D();for(i=0;i<4;++i){xIndex=x+kOffset[i][0];yIndex=y+kOffset[i][1];point=hIndexToPoint.call(this,xIndex,yIndex,point);if(point.Distance(center)<radius){return true;}}return false;}function hGetApproximateCenterFromTopLeft(topLeftPoint,xOffset,yOffset){var point=new $C.Point2D({Point2D:topLeftPoint});point.x+=Math.ceil((0.5*xOffset)*this.XUnit);point.y+=Math.ceil((0.5*yOffset)*this.YUnit);return point;}function hCountOverlapsInRect(startX,startY,xCover,yCover,point,limit){var count=0,i,j,matrix=this.Matrix,tempPoint;for(j=0;j<yCover;++j){for(i=0;i<xCover;++i){count+=matrix[startY+j][startX+i];if(count>limit){return count;}}}tempPoint=hIndexToPoint.call(this,startX,startY);point.x=tempPoint.x;point.y=tempPoint.y;return count;}function hTreatTiltOccupation(occupy,isAdd,is45){return true;}function hGetRectRange(rect){var x,y,xCover,yCover,temp;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;return{xRange:xCover,yRange:yCover};}function hDirection(point1,point2,point3){var dir1,dir2;dir1=new $C.Vector2D({StartPoint:point1,EndPoint:point3});dir2=new $C.Vector2D({StartPoint:point1,EndPoint:point2});return dir1.CrossProduct(dir2);}function hOnSegment(point1,point2,point3){var xMax,xMin,yMax,yMin;if(point1.x<point2.x){xMin=point1.x;xMax=point2.x;}else{xMin=point2.x;xMax=point1.x;}if(point1.y<point2.y){yMin=point1.y;yMax=point2.y;}else{yMin=point2.y;yMax=point1.y;}return !(point3.x<xMin||point3.x>xMax||point3.y<yMin||point3.y>yMax);}function hSegmentsIntersection(point1,point2,point3,point4){var d1=hDirection.call(this,point3,point4,point1),d2=hDirection.call(this,point3,point4,point2),d3=hDirection.call(this,point1,point2,point3),d4=hDirection.call(this,point1,point2,point4);if(d1*d2<0&&d3*d4<0){return true;}if(d1===0&&hOnSegment.call(this,point3,point4,point1)){return true;}if(d2===0&&hOnSegment.call(this,point3,point4,point2)){return true;}if(d3===0&&hOnSegment.call(this,point1,point2,point3)){return true;}if(d4===0&&hOnSegment.call(this,point1,point2,point4)){return true;}return false;}function hSearchAlongAxes(point,markerCenter,originIndex,xyOffset,rectCover,alreadyHasOnePlacement,isYFirst){var position=new $C.Point2D(),limit=1,outerStart,innerStart,outerRange,innerRange,outerOffset,innerOffset,outerCover,innerCover,needCheckForFullAccommodation,i,j,startX,startY,tempPoint1,tempPoint2,distSqr1,distSqr2,result=null;if(isYFirst===undefined){isYFirst=true;}outerStart=isYFirst?originIndex.x:originIndex.y;innerStart=originIndex.x+originIndex.y-outerStart;outerRange=isYFirst?this.XCount:this.YCount;innerRange=this.XCount+this.YCount-outerRange;outerOffset=isYFirst?xyOffset.x:xyOffset.y;innerOffset=xyOffset.x+xyOffset.y-outerOffset;outerCover=isYFirst?rectCover.x:rectCover.y;innerCover=rectCover.x+rectCover.y-outerCover;needCheckForFullAccommodation=(xyOffset.x===-1);for(i=outerStart;
/*lIsFound && */
(i>=0&&i<outerRange);i+=outerOffset){if(i+outerCover>outerRange||i+outerCover<0){continue;}for(j=innerStart;
/*lIsFound &&*/
(j>=0&&j<innerRange);j+=innerOffset){if(j+innerCover>innerRange||j+innerCover<0){continue;}startX=isYFirst?i:j;startY=i+j-startX;if(startX<0||startY<0){continue;}if(hCountOverlapsInRect.call(this,startX,startY,rectCover.x,rectCover.y,position,limit)<=limit){if(alreadyHasOnePlacement){tempPoint1=hGetApproximateCenterFromTopLeft.call(this,point,rectCover.x,rectCover.y);distSqr1=tempPoint1.DistanceSquared(markerCenter);tempPoint2=hGetApproximateCenterFromTopLeft.call(this,position,rectCover.x,rectCover.y);distSqr2=tempPoint2.DistanceSquared(markerCenter);if(distSqr1>distSqr2){result=position;}}else{result=position;alreadyHasOnePlacement=true;}if(!needCheckForFullAccommodation||(isYFirst&&needCheckForFullAccommodation&&(startX+rectCover.x)<=originIndex.x)){return result;}if(isYFirst){i=originIndex.x-rectCover.x;j=innerStart;}}}}return result;}function hSearchInAreas(position,markerCenter,originX,originY,width,height){var atLeastOneFound=false,eachArea,addX,addY,offset,originIndex,xyOffset,rectCover;for(eachArea=0;eachArea<4;++eachArea){addX=(eachArea===0||eachArea===1)?-1:1;addY=(eachArea===1||eachArea===2)?-1:1;offset=(eachArea===0||eachArea===1)?0:1;originIndex=new $C.Point2D({x:originX+offset,y:originY});xyOffset=new $C.Point2D({x:addX,y:addY});rectCover=new $C.Point2D({x:width,y:height});atLeastOneFound=(hSearchAlongAxes.call(this,position,markerCenter,originIndex,xyOffset,rectCover,atLeastOneFound)!==null);}return atLeastOneFound;}function hAreTwoRectsFitPadding(rectDataLabel,rect,padding){return((rectDataLabel.x+rectDataLabel.width+padding<=rect.x)||(rectDataLabel.x>=rect.x+rect.width+padding)||(rectDataLabel.y+rectDataLabel.height+padding<=rect.y)||(rectDataLabel.y>=rect.y+rect.height+padding));}function hAreTwoObjectsFitPadding(center,radius,rectDataLabel,padding){return !((center.Distance(rectDataLabel.GetTopLeft())<radius+padding)||(center.Distance(rectDataLabel.GetBottomLeft())<radius+padding)||(center.Distance(rectDataLabel.GetTopRight())<radius+padding)||(center.Distance(rectDataLabel.GetBottomRight())<radius+padding));}function hPopulateOneColumn(columnObject,columnElementCount,defaultValue){var oneColumnVector=[];for(var i=0;i<columnElementCount;i++){oneColumnVector[i]=defaultValue===0?0:[];}columnObject.push(oneColumnVector);}function hPopulateGrid(props){var propRect,propUnit,propRectWidth,propRectHeight,propUnitWidth,propUnitHeight,i=0,j=0,matrixType,gridOccupyCircleVector;props.MatrixType=props.MatrixType||15;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];if(props&&props.Rect&&props.Unit){propRect=props.Rect;propUnit=props.Unit;propRectWidth=propRect.width;propRectHeight=propRect.height;propUnitWidth=propUnit.width;propUnitHeight=propUnit.height;matrixType=props.MatrixType;this.IsValid=((propRectWidth*propRectHeight>propUnitWidth*propUnitHeight)&&(propRectWidth>=propUnitWidth)&&(propRectHeight>=propUnitHeight));if(!this.IsValid){return false;}this.Origin=propRect.GetTopLeft();this.XCount=Math.ceil(propRectWidth/propUnitWidth);this.YCount=Math.ceil(propRectHeight/propUnitHeight);this.XUnit=propUnitWidth;this.YUnit=propUnitHeight;for(i=0;i<this.YCount;++i){if(matrixType&kGridGeneric){hPopulateOneColumn.call(this,this.Matrix,this.XCount,0);}if(matrixType&kGridOccupy){hPopulateOneColumn.call(this,this.MatrixOccupy,this.XCount,1);}if(matrixType&kGridObject){hPopulateOneColumn.call(this,this.MatrixOccupyObject,this.XCount,1);}if(matrixType&kGridCircle){hPopulateOneColumn.call(this,this.MatrixOccupyCircleObject,this.XCount,1);}}return true;}return false;}mstrmojo.chart.GridMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridMap",IsValid:false,Metric:0,XUnit:0,YUnit:0,XCount:0,YCount:0,Origin:null,Matrix:null,MatrixOccupy:null,MatrixOccupyObject:null,MatrixOccupyCircleObject:null,dataLabelPadding:5,initialized:false,init:function init(props){this.initialized=hPopulateGrid.call(this,props);},populate:function populate(props){this.initialized=this.initialized||hPopulateGrid.call(this,props);},destroy:function destroy(){this.initialized=this.IsValid=false;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];},ToMetric:function ToMetric(){var i,j,count=0,xCount=this.XCount,yCount=this.YCount;for(i=0;i<yCount;++i){for(j=0;j<xCount;++j){if(this.Matrix[i][j]>=2){++count;}}}return count;},ToInspectedMetric:function ToInspectedMetric(shapeInfo){var density={Max:-100,Min:10000000000,Occupied:0,Total:0},rect=shapeInfo.BoundingBox,range=hGetRectPosition.call(this,rect,true),isPie=shapeInfo.Shape===$SHP._PIE,position=shapeInfo.Position,isCircle=isPie||(shapeInfo.Shape===$SHP._CIRCLE),inspectPoint=new $C.Point2D(),x=range.x,y=range.y,i,j,k,radius=shapeInfo.Size,restrictRadius=0,xRange=range.xRange,yRange=range.yRange;if(isPie&&shapeInfo.ExclusiveRect){restrictRadius=0.5*shapeInfo.ExclusiveRect.width;}for(i=0;i<range.xRange;++i){for(j=0;j<range.yRange;++j){x=range.x+i;y=range.y+j;if(x>=this.XCount||y>=this.YCount){continue;}var shouldCount=false;if(isCircle){for(k=0;k<4;++k){var distance,tempIndexY=y+kOffset[k][0],tempIndexX=x+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}inspectPoint=hIndexToPoint.call(this,tempIndexX,tempIndexY,inspectPoint);distance=inspectPoint.Distance(position);if(distance<radius&&distance>=restrictRadius){shouldCount=true;break;}}}else{shouldCount=true;}if(shouldCount){var metric=this.Matrix[y][x];density.Max=Math.max(metric,density.Max);density.Min=Math.min(metric,density.Min);density.Occupied+=metric;}}}density.Total=range.xRange*range.yRange;return density;},veryDense:function veryDense(){return false;},UpdateMatrixCircle:function UpdateMatrixCircle(center,radius,isAdd){var x,y,xRange,yRange,occupyArea=new $C.Rect2D({x:center.x-radius,y:center.y-radius,height:radius*2,width:radius*2}),returnVal,delta=isAdd?1:-1,i,j,gridCellIndexPie,xIndex,yIndex,k,addMetric=0,matrix=this.Matrix,tempIndexX,tempIndexY,point=new $C.Point2D();returnVal=hGetRectPosition.call(this,occupyArea,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){gridCellIndexPie=false;xIndex=x+i;yIndex=y+j;if(xIndex>=this.XCount||yIndex>=this.YCount){continue;}for(k=0;k<4;++k){tempIndexY=y+i+kOffset[k][0];tempIndexX=x+j+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}point=hIndexToPoint.call(this,tempIndexX,tempIndexY,point);if(point.Distance(center)<radius){gridCellIndexPie=true;break;}}if(gridCellIndexPie){matrix[yIndex][xIndex]+=delta;if(matrix[yIndex][xIndex]===1){++addMetric;}}}}this.Metric+=addMetric;return true;},UpdateMatrixDataLabelMarker:function UpdateMatrixDataLabelMarker(isDataLabel,occupy){var x,y,xRange,yRange,i,j,xIndex,yIndex,matrix=this.Matrix,addMetric=0,returnVal;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;matrix[yIndex][xIndex]+=k_MaxCount;if(matrix[yIndex][xIndex]===k_MaxCount){addMetric++;}}}this.Metric+=addMetric;return true;},UpdateMatrixPolyLine:function UpdateMatrixPolyLine(occupy,isAdd){var linePoints,i,numberOfLinePoints;if(isAdd===undefined){isAdd=true;}if(occupy===null||occupy===undefined){return false;}linePoints=occupy.mLinePoints;numberOfLinePoints=linePoints.length;for(i=0;i<numberOfLinePoints-1;++i){this.UpdateMatrixLineSegment(linePoints[i],linePoints[i+1],isAdd);}return true;},UpdateMatrixLineSegment:function UpdateMatrixLineSegment(segmentStart,segmentEnd,isAdd){var startPoint=new $C.Point2D({Point2D:segmentStart}),endPoint=new $C.Point2D({Point2D:segmentEnd}),tempPoint,startX,startY,endX,endY,deltaX,deltaY,ratio,temp,interEnd,tempStartY,tempEndX,tempEndY,i,j,matrix=this.Matrix,addMetric=0,subtractMetric=0,yOffset,yExchanged,xIndex,yIndex,delta;if(segmentStart.x>segmentEnd.x){tempPoint=startPoint;startPoint=endPoint;endPoint=tempPoint;}temp=hPointToIndex.call(this,startPoint);startX=temp.col;startY=temp.row;temp=hPointToIndex.call(this,endPoint);endX=temp.col;endY=temp.row;if(startPoint.x!==endPoint.x){deltaX=endPoint.x-startPoint.x;deltaY=endPoint.y-startPoint.y;ratio=deltaY/deltaX;interEnd=new $C.Point2D({Point2D:endPoint});tempStartY=startY;for(i=startX;i<=endX;++i){if(i<0||i>=this.XCount){continue;}deltaX=(i+1)*this.XUnit-startPoint.x;if(i===endX){deltaX=endPoint.x-startPoint.x;}yOffset=deltaX*ratio;interEnd.x=(i+1)*this.XUnit;interEnd.y=startPoint.y+yOffset;temp=hPointToIndex.call(this,interEnd);tempEndX=temp.col;tempEndY=temp.row;yExchanged=false;if(tempStartY>tempEndY){temp=tempStartY;tempStartY=tempEndY;tempEndY=temp;yExchanged=true;}for(j=tempStartY;j<=tempEndY;++j){if(j<0||j>=this.YCount){continue;}xIndex=i;yIndex=j;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}if(!yExchanged){tempStartY=tempEndY;}}}else{if(startY>endY){temp=startY;startY=endY;endY=temp;}for(i=startY;i<=endY;++i){if(i<0||i>=this.YCount){continue;}if(startX<0||startX>=this.XCount){break;}xIndex=startX;yIndex=i;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygon:function UpdateMatrixPolygon(occupy,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);if(occupy.PointInObject(vertex)){occupied=true;break;}}if(!occupied){vertex=hIndexToPoint.call(this,xIndex,yIndex);currentUnit=new $C.Rect2D({x:vertex.x,y:vertex.y,width:this.XUnit,height:this.YUnit});for(k=0;k<polygonPoints.length;++k){if(currentUnit.PointInRectangle(polygonPoints[k])){occupied=true;break;}}}if(!occupied){len=polygonPoints.length;for(k=0;k<4;++k){occupied=false;for(l=0;l<len;++l){var lP1,lP2,lP3,lP4;lP1=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);lP2=hIndexToPoint.call(this,xIndex+kOffset[(k+1)%4][0],yIndex+kOffset[(k+1)%4][1]);lP3=polygonPoints[l];lP4=polygonPoints[(l+1)%len];occupied=hSegmentsIntersection.call(this,lP1,lP2,lP3,lP4);if(occupied){break;}}if(occupied){break;}}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygonWithCanvas:function UpdateMatrixPolygonWithCanvas(occupy,canvas,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}var ctx=canvas.getContext("2d");ctx.globalAlpha=0.01;ctx.beginPath();ctx.moveTo(polygonPoints[0].x,polygonPoints[0].y);for(i=1;i<polygonPoints.length;i++){ctx.lineTo(polygonPoints[i].x,polygonPoints[i].y);}ctx.closePath();ctx.fill();var imagedata=ctx.getImageData(0,0,canvas.width,canvas.height);var data=imagedata.data;function getAlpha(x,y){var i=((y*canvas.width)+x)*4;var a=data[i+3];return a/2;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);var alpha=getAlpha(vertex.x,vertex.y);if(alpha>0){occupied=true;break;}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixRect:function UpdateMatrixRect(occupy,isAdd,rotation){var isTilt,delta,x,y,xRange,yRange,lVal,i,j,addMetric=0,subtractMetric=0,matrix=this.Matrix,indexX,indexY;if(isAdd===undefined){isAdd=true;}rotation=rotation||$FR.Normal;isTilt=(rotation===$FR.Rotate45||rotation===$FR.Rotate315);if(isTilt){return hTreatTiltOccupation.call(this,occupy,(rotation===$FR.Rotate45));}delta=isAdd?1:-1;lVal=hGetRectPosition.call(this,occupy,true);x=lVal.x;y=lVal.y;xRange=lVal.xRange;yRange=lVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){indexY=y+i;indexX=x+j;matrix[indexY][indexX]+=delta;if(isAdd&&matrix[indexY][indexX]===2){addMetric++;}if(!isAdd&&matrix[indexY][indexX]===0){subtractMetric++;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixOccupyCircleObject:function UpdateMatrixOccupyCircleObject(occupy,center,radius){var x,y,xRange,yRange,i,j,xIndex,yIndex,circleOccupied={},returnVal,circleMatrix=this.MatrixOccupyCircleObject;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){if((yIndex<circleMatrix.length)&&(xIndex<circleMatrix[yIndex].length)){circleOccupied.c=center;circleOccupied.r=radius;circleMatrix[yIndex][xIndex].push(circleOccupied);}}}}return true;},UpdateMatrixOccupyObject:function UpdateMatrixOccupyObject(occupy,occupiedObject){var x,y,xRange,yRange,xIndex,yIndex,returnVal,i,j,rectMatrix=this.MatrixOccupyObject;returnVal=hGetRectPosition.call(this,occupy);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;rectMatrix[yIndex][xIndex].push(occupiedObject);}}return true;},UpdateMatrixOccupy:function UpdateMatrixOccupy(isDataLabel,occupy,dataLabelIndex){var x,y,xRange,yRange,returnVal,i,j,occupyMatrix=this.MatrixOccupy,xIndex,yIndex;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(isDataLabel){occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:1});}else{occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:0});}}}},IsFitPaddingWithBorder:function IsFitPaddingWithBorder(occupy,frame){var dataLabelPadding=this.dataLabelPadding;if(occupy.x<frame.x+dataLabelPadding||occupy.x+occupy.width+dataLabelPadding>frame.x+frame.width){return false;}if(occupy.y<frame.y+dataLabelPadding||occupy.y+occupy.height+dataLabelPadding>frame.y+frame.height){return false;}return true;},IsAccomdatableConsiderRotation:function IsAccomdatableConsiderRotation(hostMarker,occupy,position,rotation){var isFound,xCover,yCover,returnVal,markerPosition,col,row,rowColInfo;if(rotation===undefined){rotation=$FR.Normal;}returnVal=hGetRectRange.call(this,occupy);xCover=returnVal.xRange;yCover=returnVal.yRange;if((xCover>this.XCount)||(yCover>this.YCount)){return false;}markerPosition=hostMarker.GetCenter();rowColInfo=hPointToIndex.call(this,markerPosition);if(!rowColInfo.flag){return false;}row=rowColInfo.row;col=rowColInfo.col;isFound=hSearchInAreas.call(this,position,markerPosition,col,row,xCover,yCover);return isFound;},IsAccomdatableDataLabel:function IsAccomdatableDataLabel(hostMarker,occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=2){return false;}if(count===1){if(!hIsOccupiedByHostMarkerRect.call(this,hostMarker,x+j,y+i)){return false;}}}}return true;},IsAccomdatableConsiderLocation:function IsAccomdatableConsiderLocation(occupy,location){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<=xRange;++j){switch(location){case $GMDLP._TOP:if(i===yRange){continue;}break;case $GMDLP._BOTTOM:if(i===-1){continue;}break;case $GMDLP._LEFT:if(j===xRange){continue;}break;case $GMDLP._RIGHT:if(j===-1){continue;}break;default:}count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableConsiderLabelPaddingOnly:function IsAccomdatableConsiderLabelPaddingOnly(occupy,isExceptDataLabel){var returnVal,x,y,xRange,yRange,xIndex,yIndex,count,i;if(isExceptDataLabel){returnVal=this.IsAccomdatableNoPadding(occupy);if(!returnVal){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}return true;}return this.IsAccomdatableNoPadding(occupy);},IsAccomdatableNoPadding:function IsAccomdatableNoPadding(occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableCircle:function IsAccomdatableCircle(center,radius,occupy){var lX,lY,lXRange,lYRange,lVal,lCount,i,j;lVal=hGetRectPosition.call(this,occupy,false);if(lVal===null){return false;}lX=lVal.x;lY=lVal.y;lXRange=lVal.xRange;lYRange=lVal.yRange;for(i=0;i<lYRange;++i){for(j=0;j<lXRange;++j){lCount=this.Matrix[lY+i][lX+j];if(lCount>=2){return false;}if(lCount===1){if(!hIsOccupiedByHostMarkerCircle.call(this,center,radius,lX+j,lY+i)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingCircle:function IsAccomdatableConsiderAccuDistPaddingCircle(center,radius,occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,objects,i,j,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableCircle(center,radius,occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingRect:function IsAccomdatableConsiderAccuDistPaddingRect(occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,i,j,objects,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableNoPadding(occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}return true;},ToDraw:function ToDraw(graphObjManager){var xCount=this.XCount,yCount=this.YCount,matrix=this.Matrix,gridCellOccupied=[],i,j,k,gridPoints,point,tripleId,gridCell,formatLine;for(i=0;i<xCount;++i){for(j=0;j<yCount;++j){if(matrix[i][j]>=1){gridPoints=[];for(k=0;k<5;++k){point=hIndexToPoint.call(this,j+kOffset[k%4][0],i+kOffset[k%4][1]);gridPoints.push(point);}tripleId=new $C.TripleId({ObjectId:$GO.DssGraphDataLine});gridCell=new $C.PolyLineObject({TripleId:tripleId,GraphObjectManager:graphObjManager,PolyLine:gridPoints});formatLine=gridCell.mFormatLinePtr;formatLine.mLineColor=65280;formatLine.mLineThickness=1;gridCellOccupied.push(gridCell);}}}return gridCellOccupied;}});}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","FractionNumber","Utility");mstrmojo.requiresClsP("mstrmojo.chart","TextObject","ChartAdvFormat","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumDSSGraphProperty");var c=mstrmojo.chart,K=c.enums,b=mstrmojo.VisUtility,d=K.EnumGraphMajorType,h=K.EnumNumberCategory,N=5,t=5;var V=mstrmojo.chart.model,M=V.enums,n=M.EnumDSSGraphType,u=M.EnumDSSGraphObject,s=M.EnumDSSGraphProperty,F=mstrmojo.num,D=mstrmojo.chart.common,G=D.Utility,A=G.tripleId;var B=["[SF:-3]","[SF:-6]","[SF:-9]"];var j=new c.TripleId(),l=new c.ChartAdvFormat(),L=new c.ChartAdvFormat(),g=new c.ChartAdvFormat();function Y(AA){switch(AA){case u.DssGraphY1Label:case u.DssGraphY2Label:case u.DssGraphY3Label:case u.DssGraphY4Label:case u.DssGraphX1Label:case u.DssGraphX2Label:return true;}return false;}function O(AA){switch(AA.mObjectId){case u.DssGraphUserLabel1:return u.DssGraphY1Label;case u.DssGraphUserLabel2:return u.DssGraphY2Label;case u.DssGraphUserLabel3:return u.DssGraphX1Label;case u.DssGraphUserLabel4:return u.DssGraphX2Label;default:return AA.mObjectId;}}function E(AD){var AA,AB=this.mSuffix,AC=AD;if(AC.length&&this.mNumber<0){if(AC[0]==="-"&&this.mPrefix!=="-"){AC=AC.substring(1);this.mPrefix="-"+this.mPrefix;}}AA=this.mPrefix;if(this.mHasBracket){if(AC.length>=2&&AC[0]==="("&&AC[AC.length-1]===")"){AC="("+AA+AC.substring(1,AC.length-2)+AB+")";}else{AC=AA+AC+AB;}}else{AC=AA+AC+AB;}if(this.mIsFinal){this.SetText(AC);}else{this.mText=AC;}}function S(AA){return(AA.search(/\?\/[0-9\?]/)!==-1);}function T(AA){return AA.replace(/[^"]E-/,"E");}function w(AG,AF,AK,AI){var AD,AE,AC,AH,AA,AJ,AB;AB=AK;AD=new D.FractionNumber();AE=new D.FractionNumber();AC=new D.FractionNumber();AH=new D.FractionNumber();AE.mNumerator=0;AE.mDenominator=AC.mDenominator=AC.mNumerator=1;AH.mDenominator=AE.mDenominator+AC.mDenominator;AH.mNumerator=AE.mNumerator+AC.mNumerator;AJ=AG>=0;AG=Math.abs(AG);AA=Math.floor(AG);AG-=AA;while(AH.mDenominator<AB){if(Math.abs(AH.ToDouble()-AG)<1e-15){AD.Copy(AH);break;}if(AH.ToDouble()>AG){AC.Copy(AH);}else{AE.Copy(AH);}AH.mDenominator=AE.mDenominator+AC.mDenominator;AH.mNumerator=AE.mNumerator+AC.mNumerator;}if(AH.mDenominator>=AB){if(AG-AE.ToDouble()<AC.ToDouble()-AG){AD.Copy(AE);}else{AD.Copy(AC);}}if(AA>0){AD.mNumerator+=AA*AD.mDenominator;}return AD.ToString(AF,AJ,AI);}function W(AG,AB,AD){var AE,AC,AI,AA=10,AH,AJ;AJ=AB.indexOf("# ",0);AH=(AJ!==-1);for(AE=5;AE>0;AE--){AI="/";for(AC=0;AC<AE;AC++){AI+="?";}AJ=AB.indexOf(AI,0);if(AJ!==-1){for(AC=1;AC<AE;AC++){AA*=10;}break;}}var AF;AF=w(AG,AH,AA,AD);return AF;}function r(AM,AG){var AD,AO,AN,AK=AG.lastIndexOf("/"),AB=AG.substr(AK+1,AG.length);AD=(AB.indexOf("?")===-1);if(AD){var AF=AM<0,AL=(AG.indexOf("# ",0)!==-1),AA,AC=AB.ToInteger();AM=Math.abs(AM);AA=Math.floor(AM);AM-=AA;var AH=Math.floor(AM*AC+0.5);AA+=AH/AC;AH%=AC;if(!AL){AH+=AA*AC;AA=0;}if(AA===0&&AH===0){return"0";}if(AA!==0){AN=AA.ToString();if(AH!==0){AN+=" ";}}if(AH!==0){AN=AH.ToString();AN+="/";AN+=AC.ToString();}AO=AN;if(AF){AO="-"+AO;}return AO;}var AJ=this.mTripleId.mObjectId,AE=Y.call(this,AJ),AI=AJ===u.DssGraphDataText;AO=W(AM,AG,!AE&&!AI);return AO;}function C(AF){var AE,AD,AB,AA="",AC="";AE='"';AD=AF.indexOf(AE);if(AD===-1){return{Format:AF,HasLeftOver:true,Prefix:AA,Suffix:AC};}AB=AF.indexOf(AE,AD+1);if(AB===-1){return{Format:AF,HasLeftOver:false,Prefix:AA,Suffix:AC};}if(AD===0){AA=AF.substring(1,AB);AF=AF.substring(AB+1);}AD=AF.lastIndexOf(AE);if(AD===-1){return{Format:AF,HasLeftOver:true,Prefix:AA,Suffix:AC};}AB=AF.lastIndexOf(AE,AD-1);if(AB===-1){return{Format:AF,HasLeftOver:false,Prefix:AA,Suffix:AC};}if(AD===AF.length-1){AC=AF.substring(AB+1,AD);AF=AF.substring(0,AB);}return{Format:AF,HasLeftOver:true,Prefix:AA,Suffix:AC};}function R(AD,AK){AK=AK||false;var AM,AO="",AE="",AH,AN,AG,AB,AC,AF,AJ,AA,AL=false,AI;AH=AD.indexOf(";");AM=false;if(AH!==-1){AO=AD.substring(0,AH);AE=AD.substring(AH+1);}else{AO=AD;if(AK===false){AE=AO;AL=true;}}AN=AE.length>0;AG=AN;if(AG){AG=AE[0]==="[";if(AG){AC=AE.indexOf("]");AG=AC!==-1;if(AG){AB=AE.substring(0,AC+1);AE=AE.substring(AC+1);}}}if(AE.length>=2){AM=(AE[0]==="("&&AE[AE.length-1]===")");}if(AM){AE=AE.substring(1,AE.length-1);}AF=false;if(this.mNumber>=0){AI=C.call(this,AO);AO=AI.Format;AF=AI.HasLeftOver;AJ=AI.Prefix;AA=AI.Suffix;AI=C.call(this,AE);AE=AI.Format;}else{AI=C.call(this,AE);AE=AI.Format;AF=AI.HasLeftOver;AJ=AI.Prefix;AA=AI.Suffix;AI=C.call(this,AO);AO=AI.Format;}if(AM){AE="("+AE+")";}if(AG){AE=AB+AE;}if(AN){if(AL){AD=AE;}else{AD=AO+";"+AE;}}else{AD=AO;}return{Format:AD,HasLeftOver:AF,HasBracket:AM,Prefix:AJ,Suffix:AA};}function J(AB,AE){AE=(AE!==undefined)?AE:true;var AA,AD,AF,AC;if(this.mPrefix.length>0||this.mSuffix.length>0){return AB;}AA=AB.substring(0);AC=R.call(this,AA,AE);AA=AC.Format;AD=AC.Prefix;AF=AC.Suffix;if(AD.length){this.mPrefix=AD;}if(AF.length){this.mSuffix=AF;}return AA.substring(0);}function P(AA,AB,AE){var AD,AC;AD=this.mNumber;if(this.mNumber<0&&AB>=2&&AB!==5){AD=-this.mNumber;}AC=G.hFormatValue(AA,AD);if(this.mNumber<0){if(AB===3||AB===4){AC="("+AC+")";}if(AB===2||AB===4||AB===5){this.mColor=255;}}E.call(this,AC);}function y(AI,AL){var AE,AK,AC,AA,AF,AG=-1,AD=-1,AH=["[SF:-3]","[SF:-6]","[SF:-9]"];AE=AI.mCustomFormat[0];AA=AI.mCustomFormat.length;AK=AI.mCustomFormat[AA-1];AF=AI.mCustomFormat.substring(0);if(AE==="K"){AG=1;AD=0;AC="K";}else{if(AK==="K"){AG=AA;AD=0;AC="K";}else{if(AE==="M"){AG=1;AD=1;AC="M";}else{if(AK==="M"){AG=AA;AD=1;AC="M";}else{if(AE==="B"){AG=1;AD=2;AC="B";}else{if(AK==="B"){AG=AA;AD=2;AC="B";}}}}}}if(AG!==-1){AF.replace(/([KMB])/g,'"$1"');var AB;var AJ=AF.indexOf(";");if(AJ!==-1){if(AE===AC){AB='"'+AC+'"'+B[AD];}else{AB=B[AD]+'"'+AC+'"';}AF.replace(";",";"+AH[AD]);}AF=B[AD]+AF;}P.call(this,AF,AI.mNegFormat,AL);}function Q(AB,AH){var AD,AA=AB.mCustomFormat.substring(0);AD=R.call(this,AA);this.mHasBracket=this.mHasBracket||AD.HasBracket;AA=AD.Format;var AE=!AD.HasLeftOver,AC=AD.HasBracket,AF=AD.Prefix,AG=AD.Suffix;if(AF.length){this.mPrefix=AF.substring(0);}if(AG.length){this.mSuffix=AG.substring(0);}AB.mCustomFormat=AA.substring(0);if(AE){AB.mCustomFormat=J.call(this,AB.mCustomFormat);}P.call(this,AB.mCustomFormat,AB.mNegFormat,AH);}function X(AE){var AD,AC,AB,AA=AE.length;if(AA===0){return{Format:AE,Base:1};}if(AE[AA-1]!==","){return{Format:AE,Base:1};}if(AE===","){return{Format:AE,Base:1000};}AC=AE.reverse();AD=AC.search(/[^,]/);if(AD===-1){AB=Math.pow(1000,AA);return{Format:"",Base:AB};}AB=Math.pow(1000,AD);return{Format:AE.substring(0,AA-1),Base:AB};}function I(AY,AK){var AX=this.mNumber,Aa,AT,AI,AM,AG,AQ,AH,AC,AF,AR,AD,AB,AV,AW,AO,AS,AE,AN,AP,AA,AU;if(AY===null){E.call(this,G.hFormatValue("General",this.mNumber));}else{L.restore();Aa=AY.getGridDataFormat(L,(this.mTripleId.mSeriesId<0)?0:this.mTripleId.mSeriesId,(this.mTripleId.mGroupId<0)?0:this.mTripleId.mGroupId,this.mColumnOffset);if(Aa!==true){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AT=L.mCustomFormat.substring(0);if(S.call(this,AT)){L.mFormatType=h.Fraction;}if(L.mFormatType===h.Fraction){AI=L.mCustomFormat.substring(0);AM=r.call(this,this.mNumber,AI);E.call(this,AM);return ;}L.mCustomFormat=J.call(this,L.mCustomFormat);AI=L.mCustomFormat.substring(0);T.call(this,AI);var AZ=X.call(this,AI);AG=AZ.Base;AI=AZ.Format;this.mNumber/=AG;if(this.replaceQuestionMarkWithHash(AI)){AQ=AI.indexOf(".");AH=AI.length-AQ-1;AO=G.hFormatValue(AI,this.mNumber);AC=AO.indexOf(".");AF=0;if(AC===-1){AC=AO.length;AH=AF;}else{AF=AO.length-AQ-1;}AQ-=AC;AH-=AF;if(AQ>0){this.mPrefix="";for(AU=0;AU<AQ;AU++){this.mPrefix+=" ";}}if(AH>0){this.mSuffix="";for(AU=0;AU<AQ;AU++){this.mSuffix+=" ";}}E.call(this,AO);this.mNumber=AX;return ;}if(L.mFormatType===h.Scientific){AI.replace("#","0");}AR=".";AG=1;AD=AI.lastIndexOf(AR);AB=this.mNumber;if(AD!==-1&&L.mFormatType===h.Custom){var AJ=this.AdjustFormatStringWithDot(AI,AD);AG=AJ.BASE;AI=AJ.STRING;AB/=AG;}else{if(L.mFormatType===h.Custom){AV=AI.length;if(AV>2){var AL=AI[AV-1];if(AI[AV-2]==="\\"&&(AL==="B"||AL==="b"||AL==="M"||AL==="m"||AL==="K"||AL==="k")){AW=AI[AV-1];AS='"';AI=AI.substring(0,AV-2);AI+=AS;AI+=AW;AI+=AS;AE="";AG=this.getBaseForCustomFormatting(AI);AB/=AG;AI+=AS;AI+=AE;AI+=AS;}}}}AN=false;if(AI.indexOf("* -")!==-1){AN=this.mNumber<0;if(AN){AI.replace("* -","* ");}}if(AI===""){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AO=G.hFormatValue(AI,AB);AP=AO.length;if(AO.length){AA=L.mNegFormat>=3&&AO[0]==="("&&AO[AP-1]===")";if(AA&&AO.length>this.mPrefix.length&&this.mPrefix.length&&this.mNumber<0){AO="("+this.mPrefix+AO.substring(1);this.mPrefix=this.mSuffix="";}}if(AN){this.mText=AO;AH=this.mText.search(/[0-9]/);if(AH!==-1){if(AH>0){AO=this.mText.substring(0,AH);}AO=AO+"-"+this.mText.substring(AH);}}E.call(this,AO);this.mNumber=AX;}}function U(AU,AH,AJ){var AS,AR,AT,AL,AF,AQ,AI,AK,AN,AD,AO,AE,AA,AC,AP,AB,AM;switch(AH.mFormatType){case h.Default:b.visPrint("should not reach here.");break;case h.General:E.call(this,G.hFormatValue("",this.mNumber));break;case h.FromGrid:I.call(this,AU,AJ);break;case h.Fixed:y.call(this,AH,AJ);break;case h.Date:case h.Time:AF=AH.mCustomFormat.substring(0);AF.replace(/[:(tt)]/g,"");E.call(this,G.hFormatValue(AF,this.mNumber));break;case h.Percentage:AF=AH.mCustomFormat.substring(0);P.call(this,AF,AH.mNegFormat,AJ);break;case h.Fraction:AF=AH.mCustomFormat.substring(0);AL=r.call(this,this.mNumber,AF);E.call(this,AL);break;case h.Special:AS=new c.ChartAdvFormat({ChartAdvFormat:AH});if(AS.mCustomFormat.localeCompare("#####")===false&&this.mNumber===0){AS.mCustomFormat[4]="0";}E.call(this,G.hFormatValue(AS.mCustomFormat,this.mNumber));break;case h.Currency:AS=new c.ChartAdvFormat({ChartAdvFormat:AH});Q.call(this,AS,AJ);break;case h.Scientific:AF=AH.mCustomFormat.substring(0);AF.replace("#","0");E.call(this,F.formatByMask(AF,this.mNumber));break;default:AT=this.mNumber;AI=false;AS=new c.ChartAdvFormat({ChartAdvFormat:AH});AK=AS.mCustomFormat.substring(0);if(AK==="?"){AK="0";}if(AS.mFormatType===h.Custom){AN=S.call(this,AK);if(AN){AL=r.call(this,this.mNumber,AK);E.call(this,AL);return ;}AK=T.call(this,AK);AQ=X.call(this,AK);AD=AQ.Base;AK=AQ.Format;this.mNumber/=AD;if(this.replaceQuestionMarkWithHash(AK)){AO=AK.indexOf(".");AE=AK.length-AO-1;AM=G.hFormatValue(AK,this.mNumber);AA=AM.indexOf(".");AC=0;if(AA===-1){AA=AM.length;AE=AC;}else{AC=AM.length-AO-1;}AO-=AA;AE-=AC;if(AO>0){this.mPrefix="";for(AR=0;AR<AO;AR++){this.mPrefix+=" ";}}if(AE>0){this.mSuffix="";for(AR=0;AR<AO;AR++){this.mSuffix+=" ";}}E.call(this,AM);this.mNumber=AT;return ;}if(AK.indexOf("* -")!==-1){AK.replace("* -","* ");AI=true;}}AP=".";AB=AK.lastIndexOf(AP);if(AB!==-1){var AG=this.AdjustFormatStringWithDot(AK,AB);AD=AG.BASE;AK=AG.STRING;this.mNumber/=AD;}E.call(this,G.hFormatValue(AK,this.mNumber));if(AI&&this.mNumber<0){AM=this.mText.substring(0);AE=AM.search(/[0-9]/);if(AE!==-1){if(AE>0){this.mText=AM.substring(0,AE);}this.mText=this.mText+"-"+AM.substring(AE);E.call(this,this.mText);}}this.mNumber=AT;break;}}function a(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}return this.expectCondense===true;}function o(AE,AJ,AG){var AA=this.mChartContextPtr,AD,AI=this.mChartContextPtr.mIsGraphMatrix,AH=O.call(this,this.mTripleId);if(AA.mIsTimeSeriesChart&&AH===u.DssGraphY1Label){this.SetNumberFormatForTimeSeries(AE);return ;}if(AI===false){return ;}if(Y.call(this,AH)){if(this.shouldCondense){this.SetNumberFormatForTimeSeries(AE);return ;}g.reset(AE);AD=this.mNumber;if(g.mFormatType===h.Default){var AB=AA.getAxisKeyFromObjectId(AH),AC=AA.getUniformAxisInformationFromKey(AB),AK=AC.Metrics;if(AK===undefined||AK.length===0){AK=[0];}AA.getAxisAutoNumberFormat(g,AK);g.mCustomFormat=J.call(this,g.mCustomFormat);}U.call(this,AG,g,AJ);var AF=this.mChartContextPtr.GetGraphMatrixContext();if(a.call(this)){if(this.mText.length>AF.getCondensedTextLimit(g.mFormatType)){this.mNumber=AD;this.mPrefix=this.mSuffix="";this.SetNumberFormatForTimeSeries(AE);}}}}mstrmojo.chart.NumberObject=mstrmojo.declare(mstrmojo.chart.TextObject,null,{scriptClass:"mstrmojo.chart.NumberObject",mNumber:0,mColor:-1,mIsFinal:false,mIsAbbreviated:false,mColumnOffset:0,mHasBracket:false,mPrefix:"",mSuffix:"",expectCondense:false,shouldCondense:false,init:function x(AA){if(AA.Locale===undefined){AA.Locale=0;}this._super(AA);this.mNumber=AA.Number;this.mIsFinal=AA.IsFinal!==undefined?AA.IsFinal:true;this.mColumnOffset=AA.ColumnOffset!==undefined?AA.ColumnOffset:0;this.mPrefix="";this.mSuffix="";if(AA.ExpectCondense){this.expectCondense=AA.ExpectCondense;}if(AA.ShouldCondense){this.shouldCondense=AA.ShouldCondense;}this.SetNumberFormat(AA.NumberFormat,AA.Locale,AA.DataSet);},SetNumberFormat:function Z(AE,AK,AF){var AA=this.mChartContextPtr,AG,AD=this.mChartContextPtr.mIsGraphMatrix,AH=O.call(this,this.mTripleId),AJ,AI,AB,AC;if(AA.mIsTimeSeriesChart&&AH===u.DssGraphY1Label){return o.call(this,AE,AK,AF);}if(AA.mIsGraphMatrix&&Y.call(this,AH)){return o.call(this,AE,AK,AF);}l.reset(AE);AB=l.mFormatType;AG=AA.GetGraphMajorType();A.reset(j,this.mTripleId.mObjectId);if(((AH===u.DssGraphDataText||AH===u.DssGraphRiser)&&(AG===d.GMT_SCATTER||AG===d.GMT_BUBBLE))&&!AD){switch(this.mColumnOffset){case 0:A.reset(j,u.DssGraphX1Body);break;case 1:A.reset(j,u.DssGraphY1Body);break;case 2:A.reset(j,u.DssGraphZBody);break;default:break;}AJ=AA.GetProperty(s.DssGraphAxisNumberFormat,j);if(AJ){AA.ParseValueToFormat(AJ,l);}switch(this.mColumnOffset){case 0:A.reset(j,u.DssGraphX1Label);break;case 1:A.reset(j,u.DssGraphY1Label);break;default:break;}}AH=j.mObjectId;if(Y.call(this,AH)){if(AD===false){if(((AB===h.FromGrid)||(AB===h.Default))){if(AA.mGraphType===n.DssGraphTypePareto_Percent){l.mFormatType=h.General;}else{AA.getAxisAutoNumberFormat(l);l.mCustomFormat=J.call(this,l.mCustomFormat);}}}}else{if(AB===h.Default){l.mFormatType=h.FromGrid;}if(AH===u.DssGraphDataText&&AB===h.FromGrid&&AG===d.GMT_HISTOGRAM){l.mFormatType=h.General;}}if((this.mNumber>1000000000000000||this.mNumber<-1000000000000000)&&AB===h.Currency){AI="0";for(AC=0;AC<l.mDigits;AC++){if(AC===0){AI+=".";}AI+="0";}AI+="E+00";l.mCustomFormat=AI.substr(0);l.mFormatType=h.Scientific;}U.call(this,AF,l,AK);},Draw:function q(){var AB=this.mFormatFontPtr,AA=this.mColor;if(AA>=0){var AC=AA;if(AB){AC=AB.mFontColor;AB.mFontColor=AA;}this._super();if(AB){AB.mFontColor=AC;}}else{this._super();}},replaceQuestionMarkWithHash:function z(AE){var AC,AB,AD,AA="";if(AE.length===0){return false;}AB=AE.length;AC=0;for(AD=0;AD<AB;AD++){if(AA.indexOf(AE[AD])===-1){AA+=AE[AD];}if(AE[AD]==="."){AC++;}}if(AA===".?"||AA==="?."){if(AC===1){AE.replace("?","#");return true;}}return false;},AddTextBeforeNumber:function H(AC){var AA,AB;AA=new c.Rect2D();this.SetRect(AA);AB=AC+"\n"+this.mText;this.SetText(AB);this.mIsFinal=true;},getBaseForCustomFormatting:function p(AD){var AG="",AJ="",AF=1000,AB='"',AH=AD.lastIndexOf(AB);if(AH!==-1&&AH===AD.length-1){AH=AD.lastIndexOf(AB,AH-1);if(AH!==-1){if(AH!==0&&!(AH===1&&AD.charAt(0)==="-")){if(AD.lastIndexOf("(",AH-1)===-1){var AC=AD.substr(AH,AD.length);AJ=AC.replace(/"""/gi,"");AD=AD.substr(0,AH);}}}}AH=AD.length-1;var AA=1,AI=AD.charAt(AH),AE=true;switch(AI){case"K":case"k":AA*=AF;AG=AI;AH-=1;break;case"M":case"m":AA*=AF*AF;AG=AI;AH-=1;break;case"B":case"b":AA*=AF*AF*AF;AG=AI;AH-=1;break;default:AE=false;break;}AD=AD.substr(0,AH+1);if(AE){AH=AD.length-1;if(AD.charAt(AH)===","){AD=AD.substr(0,AH);}return{BASE:AA,STRING:AD,TAG:AG,SUFFIX:AJ};}var AK=",";while(AH>0){if(AD.charAt(AH)!==AK){break;}AH--;AA*=AF;}AD=AD.substr(0,AH+1);return{BASE:AA,STRING:AD,TAG:AG,SUFFIX:AJ};},AdjustFormatStringWithDot:function e(AH,AK){var AC=".",AE=",",AP=0,AI=0,AD=1,AO="",AQ=".",AN=AK-1;while(AN>=0){if(AH[AN]===AE){AI++;AD*=1000;}else{break;}AN--;AO+=AE;}AO+=AC;if(!(AP===0&&AI===0)){var AB=0,AG=AH.indexOf(AO),AA="";while(AG!==-1){AA=AA.concat(AH.substr(AB,AG-AB));AB=AG+AO.length;AA=AA.concat(AQ);AG=AH.indexOf(AO,AB);}AA+=AH.substr(AB,AH.length);AH=AA;}var AJ,AF,AL,AM=AH.lastIndexOf(AC);while(AM!==-1){AL=AH.lastIndexOf(AE,AM);if((AL!==-1)&&(AL<AM)&&(AM-AL>1)&&(AM-AL<4)){AF="";AF=AF.concat(AH.substr(0,AL+1));for(AJ=0;AJ<4-(AM-AL);AJ++){AF=AF.concat(AH[AL+1]);}AF=AF.concat(AH.substr(AL+1));AH=AF;}AM=AH.lastIndexOf(AC,AM-1);}return{BASE:AD,STRING:AH};},SetNumberFormatForTimeSeries:function k(AF){var AB=this.mChartContextPtr,AD=this.mNumber,AJ,AC,AE=AB.mIsGraphMatrix;if(AF.mFormatType===0&&!AE){var AI;if(this.mNumber>0){AI=AB.getInt(AD);AJ="$"+AI.ToString();}else{AD=-AD;AI=AB.getInt(AD);AJ="($"+AI.ToString()+")";}E.call(this,AJ);return ;}this.mIsAbbreviated=this.mIsAbbreviated||AE;var AH=this.mTripleId.mObjectId,AG=AE&&Y.call(this,AH),AA=AG?t:N;AJ=G.abbreviateNumber(this.mNumber,AA);E.call(this,AJ);},GetNumberFromText:function f(){if(this.mText!==""){var AA=parseFloat(this.mText);if(G.isValidNumber(AA)){return AA;}return null;}return null;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","RectangleObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle");var D=mstrmojo.chart,B=mstrmojo.chart.enums,C=B.EnumBoxStyle;function A(){var N=this.mChartContextPtr,L=this.mBoxStyle,M=this.mFormatFillPtr.mAlpha,I,K,H,J,G;I=4;K=new D.Rect2D({Rect2D:this.mRect});K.Implode(I,I);N.DrawRectangle(this.mRect,false);this.ApplyFillFormat();if(L===C.BS_BEVELED_FRAME||L===C.BS_REVERSE_BEVELED_FRAME){H=D.gBlack.ToInteger();J=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.153:0.353));G=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.353:0.153));N.ApplyBeveledFrameToRectangle(this.mRect,0,I,H,J,H,G);}else{if(L===C.BS_DOUBLE_LINE_FRAME){if(L===C.BS_DOUBLE_LINE_FRAME){N.DrawRectangle(K,true);this.ApplyLineFormat();}}}this.SetLineWidth();N.DrawRectangle(this.mRect,true);this.hSetBorderStyle(this.mRect);this.ApplyLineFormat();}mstrmojo.chart.FancyBoxObject=mstrmojo.declare(mstrmojo.chart.RectangleObject,null,{scriptClass:"mstrmojo.chart.FancyBoxObject",mBoxStyle:C.BS_NOFRAME,init:function F(G){this._super(G);this.mBoxStyle=G.BoxStyle||C.BS_NOFRAME;},Draw:function E(){if(this.mBoxStyle===C.BS_NOFRAME){this.mChartContextPtr.DrawRectangle(this.mRect,false);this.ApplyFillFormat();}else{A.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","FormatFill","FormatLine","PieSliceObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixPiePlotType","EnumGraphMatrixMarkerTypeInChart");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphNumberFormatType");var c=mstrmojo.chart,b=mstrmojo.VisUtility,V=c.ChartConstants,X=c.enums,R=X.EnumGraphMatrixPiePlotType,J=X.EnumGraphMatrixMarkerTypeInChart,S=c.model,g=S.enums,N=g.EnumDSSGraphObject,E=g.EnumShapeType,L=g.EnumDSSGraphMarkerShape,f=0,O=1,I=1,A=2,W=3;var P=new c.TripleId(),U=new c.ChartAdvFormat();function e(){var j=this.mChartContextPtr,h=j.GetGraphMatrixContext();this.mMinSizeByTotal=0;if(!this.mHasSizeBy){return this.mMinSizeByTotal;}this.mMinSizeByTotal=h.mMinSizeVal;return this.mMinSizeByTotal;}function d(){var j=this.mChartContextPtr,h=j.GetGraphMatrixContext();if(!this.mHasSizeBy){this.mMaxSizeByTotal=1;return this.mMaxSizeByTotal;}this.mMaxSizeByTotal=h.mMaxSizeVal;return this.mMaxSizeByTotal;}function F(){var j=this.mChartContextPtr,h=j.GetGraphMatrixContext();d.call(this);e.call(this);if(h.mMarkerShape===L.DssGraphMarkerShape2DPie){this.mPieOption.mLayout=f;}else{this.mPieOption.mLayout=O;}}function Z(n,o,q,k){var j=this.mChartContextPtr.GetGraphMatrixContext(),l,p,h=2;if(this.mHasSizeBy){h=j.getSizeByPieRadius(this.mDatasetPtr,n,o,this.mMaxSizeByTotal,this.mMinSizeByTotal,this.mPieOption.mMaxRadius);if(h>=0&&h<1){h=1;}}else{h=this.mPieOption.mMaxRadius;}l=1;if(this.mPlotType===R.GMPPT_VALUE){p=k||this.mDatasetPtr.GetPieCountAtOneDataPoint(n,o);l=(q+1)/p;h=l*h;if(p>1){h-=1;}}return h;}function D(h,j,l){var n,k,q,p,o=this.mDatasetPtr,r=this.mPieOption,t={};t.Angles=[];t.ValidSeriesNumber=0;t.ValidSeriesIndex=[];t.IsValid=false;n=360-r.mPieRotation;t.Angles.push(n);t.ValidSeriesIndex.splice(0,t.ValidSeriesIndex.length);k=this.mDatasetPtr.GetPieSliceCount(h,j,0);q=0;for(p=0;p<k;++p){var s=o.GetPieSlicePercentage(h,j,l,p);if(s!==null){if(s<=1||s>=-1){++t.ValidSeriesNumber;t.ValidSeriesIndex.push(p);}q+=s;if(p===(k-1)){n=720-r.mPieRotation;}else{n=Math.round(Math.abs(360*q)+1)+(360-r.mPieRotation);}}else{if(p===(k-1)){n=720-r.mPieRotation;}}if(n>720-r.mPieRotation){n=720-r.mPieRotation;}t.Angles.push(n);}t.IsValid=true;return t;}function Q(AC,w){var n=this.mChartContextPtr,AD=n.GetGraphMatrixContext(),AA="",r,x=this.mDatasetPtr,AB=new c.TripleId({ObjectId:N.DssGraphDataText,SeriesId:AC.mSeriesId,GroupId:AC.mGroupId}),u,z,h,y=x.dataLabelStyle,j,q=w.GetSliceInfo(),l,k,AE,t,s,o=false,p=5;if(x.showPieSliceDatalabel(AC.mSeriesId,AC.mGroupId,AC.angleByIndex,AC.sliceById)===false){return null;}AB.angleByIndex=AC.angleByIndex;AB.sliceById=AC.sliceById;if(n.mIsGraphMatrix){p=AD.getPadding(V.kDataLabel);}switch(y){case A:r=x.GetPieSliceData(AC.mSeriesId,AC.mGroupId,AC.angleByIndex,AC.sliceById);if(r===undefined||r===null){return null;}U.restore();x.getGridDataFormatForPie(U,AC);u=new c.NumberObject({TripleId:AB,GraphObjectManager:this.mpManager,Number:r,NumberFormat:U,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(u!==undefined&&u!==null){AA=u.mText;}h=u;break;case W:z=x.GetTextLabel(AC.mSeriesId,AC.mGroupId,AC.angleByIndex,AC.sliceById);AA=z;h=new c.TextObject({TripleId:AB,GraphObjectManager:this.mpManager,GraphCollectionObject:null});break;}if(h!==undefined&&h!==null&&AA!==""){h.SetText(AA);j=h.GetBoundingRect();}else{return null;}l=w.GetMiddleAngleRadian();AE=(q.mRadius+p)*Math.cos(l);t=(q.mRadius+p)*Math.sin(l);k=w.GetMiddleAngleQuadrant();if(k===2||k===3){o=true;}s=j.height*0.5*Math.sin(l);if(o){h.MoveToCenter(q.mCenter.x+AE-(j.width+1)/2,q.mCenter.y+t+s);}else{h.MoveToCenter(q.mCenter.x+AE+(j.width+1)/2,q.mCenter.y+t+s);}return h;}function C(AG,u,k,AE,y,AD,AA,p,l){var r={mObjectId:N.DssGraphPieSlice,mSeriesId:AG,mGroupId:u},o=this.mChartContextPtr,AC=o.getUtiliy().tripleId,AB=this.mPieOption,w=o.mIsGraphMatrix,t,q,j,s=(this.mPlotType===R.GMPPT_VALUE),n=AB.mLayout,h,z;var AF=l||this.mDatasetPtr.GetPieCountAtOneDataPoint(iSeriesId,u);if(AD>=AA){return null;}AC.reset(P,r.mObjectId,r.mSeriesId,r.mGroupId,k,AE);if(o.checkColorByAndSizeByValue(P,this.mDatasetPtr,this.mHasColorBy,false)===false){return null;}if(AA-AD===360){p=true;}t=((n===O)||(s&&k>0));if(t){if(n===O){if(s&&k>0){AB.mRingFactor=(1-1/(k+1)*0.3)*100;}else{AB.mRingFactor=70;}}else{AB.mRingFactor=100/(k+1);}}q=Z.call(this,AG,u,k);if(q<=0){return null;}j=new c.PieSliceObject({TripleId:r,AngleIndex:k,SliceId:AE,GraphObjectManager:this.mpManager,Explode:0,StartAngle:AD,EndAngle:AA,RingPieFactor:AB.mRingFactor,IsRing:t,Is2DCircular:true,Scale:AB.mScale,Center:y,Radius:q,MaxRadius:AB.mMaxRadius,Depth:AB.mDepthInChart,OneSeries:p,ParentObject:null,IsShown:true,Shape:E._PIESLICE,hasFill:true});if(w){var x=this.mDatasetPtr.showPieDatalabels();if(x&&!(s&&k<AF-1)){h=Q.call(this,r,j);if(h!==undefined&&h!==null){h.mIsShown=false;z=new c.GMDataLabelInfo({SeriesId:AG,GroupId:u,isValid:true,Label:h});z.HostMarkerPoint=y;z.HostMarkerBound=new c.Rect2D({x:y.x-q,y:y.y-q,height:2*q,width:2*q});this.dataLabels.push(z);}}}return j;}function H(){var k,h=this.mChartContextPtr.GetGraphMatrixContext(),j=J._PIE;if(this.mPlotType===R.GMPPT_CATEGORY){var l=this.mChartContextPtr.IsVertical(),n=this.mDatasetPtr.GetGroupCount();k=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);return h.GetMaxMarkerSize(j,l,n*k);}else{if(this.mPlotType===R.GMPPT_VALUE){return h.GetMaxMarkerSize(j,true,1,this.mHasSizeBy);}}return 0;}function G(n){var w=this.mPieCircles,x=w.length,q,o,p=false,l=[],t=[],r=[],u,s,k,h;for(q=0;q<x;++q){p=false;h=w[q];for(o=0;o<l.length;++o){if(h.mCenter.x===l[o].x&&h.mCenter.y===l[o].y&&h.mRadius===t[o]){p=true;break;}}if(!p){u=h.mCenter;s=h.mRadius;t.push(s);l.push(u);r.push(h);}}n.CirclePieObjects=n.CirclePieObjects.concat(r);}mstrmojo.chart.PiePlotRenderer=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.PiePlotRenderer",mDatasetPtr:null,mChartContextPtr:null,mMaxSizeByTotal:0,mMinSizeByTotal:0,mHasColorBy:false,mHasSizeBy:false,mPlotType:R.GMPPT_CATEGORY,mPieOption:{mLayout:f,mRingFactor:70,mScale:1,mDepthInChart:0,mPieRotation:90},mpManager:null,dataLabels:[],shownDataLabels:[],mPieCircles:[],init:function Y(h){this._super(h);this.mpManager=h.GraphObjectManager;this.mChartContextPtr=h.ChartContext;this.mDatasetPtr=h.Dataset;this.mPieOption={mLayout:f,mRingFactor:70,mScale:1,mMaxRadius:10,mDepthInChart:0,mPieRotation:90};this.mPieOption.mLayout=h.Layout;this.mPlotType=h.PlotType;if(h.MaxRadius){this.mPieOption.mMaxRadius=h.MaxRadius;}else{this.mPieOption.mMaxRadius=H.call(this);}this.mHasColorBy=this.mChartContextPtr.GetGraphMatrixContext().mHasColorBy;this.mHasSizeBy=this.mChartContextPtr.GetGraphMatrixContext().mHasSizeBy;this.dataLabels=[];this.shownDataLabels=[];this.mPieCircles=[];if(h.shownDatalabels!==undefined&&h.shownDataLabels!==null){this.shownDataLabels=h.shownDataLabels;}F.call(this);},getShapeSizeAt:function a(l,j,h,k){if(k===undefined){k=true;}if(k){return this.mPieOption.mMaxRadius;}return Z.call(this,l,j,h);},drawSinglePie:function B(k,s,j,t,h){var l=[],p,y,w,n,u,z,AA,o={},x;if(t.x<0||t.y<0){return l;}n=Z.call(this,k,s,j,h);o.mCenter=t;o.mRadius=n;u=D.call(this,k,s,j);if(!u.IsValid){return l;}y=u.ValidSeriesIndex;p=u.ValidSeriesNumber;w=u.Angles;var AB=h||this.mDatasetPtr.GetPieCountAtOneDataPoint(k,s),q=(this.mPlotType===R.GMPPT_VALUE),r=((this.mPieOption.mLayout===O)||(q&&j>0));if(p===0){b.visPrint("pieplotRenderer::Should not reach here");}else{if(p===1){z=C.call(this,k,s,j,y[0],t,360-this.mPieOption.mPieRotation,720-this.mPieOption.mPieRotation,true,AB);if(z){z.SetWhitenOuterBorder(q&&j<AB-1&&!r);l.push(z);}this.mPieCircles.push(o);}else{for(x=0;x<p;++x){AA=y[x];z=C.call(this,k,s,j,AA,t,w[AA],w[AA+1],false,AB);if(z){z.SetWhitenOuterBorder(q&&j<AB-1&&!r);l.push(z);}}this.mPieCircles.push(o);}}return l;},SetInfo:function T(j,h,k){this.mPieOption.mLayout=j;this.mPieOption.mMaxRadius=k;this.mPlotType=h;},enableDataLabel:function M(l,k){var n=this.mChartContextPtr,j=n.mIsGraphMatrix,h=n.GetGraphMatrixContext();if(j){G.call(this,l);l.PlaceDataLabels(this.dataLabels,k);}},GetPieRadius:function K(h,j,k){return Z.call(this,h,j,k);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Point2D","GraphObjectManager","TripleId","FormatFont","ChartContext","GraphCollectionObject","FancyBoxObject","MarkerObject","FormatFill","StraightLineObject","TextObject","Rect2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMarkerShape","EnumBoxStyle","EnumLineStyle","EnumLegendLayout","EnumLegendMarkersStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantType","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphMarkerLayout","EnumDSSGraphLegendPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");var V=mstrmojo.chart,M=mstrmojo.chart.enums,L=M.EnumCollectionType.CT_TEXT,U=M.EnumMarkerShape,S=M.EnumBoxStyle,G=M.EnumLineStyle,K=M.EnumLegendLayout,r=M.EnumLegendMarkersStyle,o=V.gNullTripleId,N=0.75,s=16,A=0.5,h=0.15,c=0.9,F=1742,P=725,D=2;var T=mstrmojo.chart.model,O=T.enums,f=O.EnumDSSGraphMarkerShape,a=O.EnumDSSGraphType,d=O.EnumDSSGraphProperty,e=O.EnumDSSGraphObject,E=O.EnumVariantBool,B=E.VARIANT_FALSE,Z=O.EnumDSSExtraGraphProperty,p=O.EnumDSSGraphMarkerLayout,I=O.EnumDSSGraphLegendPosition;var C=0;function X(t){this.mLegendMarkerSize=t.mFontSize<s?t.mFontSize:s;this.mLegendMarkerSize=Math.floor(this.mLegendMarkerSize*N+1.5);if(this.mLegendMarkerSize<2){this.mLegendMarkerSize=2;}this.mItemMargin=Math.floor(this.mLegendMarkerSize*0.3);this.mEdgeMargin=Math.floor(this.mLegendMarkerSize*0.8);}function n(AJ,AA){var w=this.mChartContextPtr,AF=this.mDatasetPtr,t=this.mGraphOptionsLegend,AH,x,AG,AE,y,z,u,AD,AL,AB,AM,AC,AI,AK;AH=AF.GetSeriesCount();x=new V.Rect2D();AK=this.mLegendItemCount;for(AG=0;AG<AK;++AG){AE=new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AG});y=new V.TextObject({TripleId:AE,GraphObjectManager:this,GraphCollectionObject:AA});y.mIsShown=false;AA.AddGraphObject(y);u=w.mGraphType;if(AG>=AH&&u!==a.DssGraphTypeGridChart){if(w.mGraphType===a.DssGraphTypePareto_Percent){AD=w.GetProperty(d.DssGraphCumulativePercentLabel,new V.TripleId({SeriesId:AG-AH}));if(AD){z=AD;}else{z="Cumulative Percent";}}else{if(u>=a.DssGraphTypeHiLo_Stock_Chart&&u<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){z=this.mStockMetricValue[this.mLegendItemIndexToStockMetricIndex[AG]];}}}else{if(t.mIsByGroup){z=AF.GetGroupLabel(AG,false);}else{z=AF.GetSeriesLabel(AG,false);}}y.SetText(z);AI=y.GetBoundingRect();this.AddToMapAndList(y);if(AI.width>x.width){x.width=AI.width;}}if(!w.mManualLayoutMode||t.mReposition){AB=Math.floor(AJ.width*h+0.5);if(t.mLegendPosition===I.DssGraphLegendPositionBottom){AB=AJ.width;}AL=(x.width<AB)?x.width:AB;}else{AM=w.GetLocation(d.DssGraphLegendLocation);if(AM.width===0){AB=Math.floor(AJ.width*h+0.5);AL=(x.width<AB)?x.width:AB;}else{AL=AM.width-2*this.mEdgeMargin;if(t.mLegendMarkersStyle===p.DssGraphMarkerLeft||t.mLegendMarkersStyle===p.DssGraphMarkerRight){AL-=this.mLegendMarkerSize*(1+A);}}}x.width=0;for(AG=0;AG<AK;++AG){AC=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AG}));AC.SetTextWidthLimit(AL);AI=AC.GetBoundingRect();if(AI.height>x.height){x.height=AI.height;}if(AI.width>x.width){x.width=AI.width;}}return x;}function Y(){var t=this.mChartContextPtr.mGraphType;switch(t){case a.DssGraphTypeVertical_Area_Stacked:case a.DssGraphTypeVertical_Area_BiPolar_Stacked:case a.DssGraphTypeVertical_Area_DualAxis_Stacked:case a.DssGraphTypeVertical_Area_Percent:case a.DssGraphTypeVertical_Bar_Stacked:case a.DssGraphTypeVertical_Bar_DualAxis_Stacked:case a.DssGraphTypeVertical_Bar_BiPolar_Stacked:case a.DssGraphTypeVertical_Bar_Percent:case a.DssGraphTypeVertical_Line_Stacked:case a.DssGraphTypeVertical_Line_BiPolar_Stacked:case a.DssGraphTypeVertical_Line_DualAxis_Stacked:case a.DssGraphTypeVertical_Line_Percent:case a.DssGraphRadar_Line_Stacked:case a.DssGraphTypePareto:case a.DssGraphTypePareto_Percent:return true;default:return false;}}function J(AW,AH){var z=this.mGraphOptionsLegend,Ad=n.call(this,AW,AH),AY=new V.Rect2D(),Af=this.mItemMargin,AK=this.mItemMargin,AB=this.mDatasetPtr.GetSeriesCount(),AT=new V.Rect2D({x:0,y:0,width:this.mLegendMarkerSize,height:this.mLegendMarkerSize}),AF=0,Aj=0,Aa,Ak,AD,AJ,AO,Ac,AP,AI,AR,w,AU,Ag,t,AA,AQ,Ae,AL,AE,AV,AZ,u,AG,y,Ab,AN,AM,AC,Ai,x,Ah,AS;switch(z.mLegendMarkersStyle){case p.DssGraphMarkerLeft:case p.DssGraphMarkerRight:AF=Math.floor(Ad.width+AT.width*(1+A));Aj=Ad.height;break;case p.DssGraphMarkerCentered:AF=Ad.width;Aj=Ad.height;break;case p.DssGraphMarkerAbove:case p.DssGraphMarkerBelow:AF=Ad.width;Aj=Math.floor(Ad.height+AT.height*(1+A));break;default:break;}if(Aj===0){Aj=1;}if(AF===0){AF=1;}Aa=0;Ak=0;AD=this.mLegendItemCount;switch(z.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:AJ=Math.floor((AW.height-Af)/(Aj+Af));if(AJ===0){AJ=1;}Aa=Math.floor(this.mLegendItemCount/AJ);if(Aa*AJ<this.mLegendItemCount){Aa++;}Ak=Math.floor(this.mLegendItemCount/Aa);if(Ak*Aa<this.mLegendItemCount){Ak++;}break;case I.DssGraphLegendPositionBottom:AJ=Math.floor((AW.width-AK)/(AF+AK));if(AJ===0){AJ=1;}Ak=Math.floor(this.mLegendItemCount/AJ);if(Ak*AJ<this.mLegendItemCount){Ak++;}Aa=Math.floor(this.mLegendItemCount/Ak);if(Ak*Aa<this.mLegendItemCount){Aa++;}break;case I.DssGraphLegendPositionFreeFloat:AO=this.mChartContextPtr.GetLocation(d.DssGraphLegendLocation);AY.y=AO.y;AY.x=AO.x;if(!z.mRecalculate){AY.width=AO.width;AY.height=AO.height;Ac=Math.floor((AY.height-this.mEdgeMargin*2+D)/Aj);AP=Math.floor((AY.width-this.mEdgeMargin*2+D)/AF);if(Ac*AP<AD){AD=Ac*AP;Ak=Ac;Aa=AP;}else{Aa=Math.floor(this.mLegendItemCount/Ac);if(Aa===0){Aa=1;}if(Aa*Ac<this.mLegendItemCount){Aa++;}Ak=Math.floor(this.mLegendItemCount/Aa);if(Ak*Aa<this.mLegendItemCount){Ak++;}}if(Ak>0){Af=Math.floor((AY.height-Ak*Aj-this.mEdgeMargin*2)/Ak);}if(Aa>0){AK=Math.floor((AY.width-Aa*AF-this.mEdgeMargin*2)/Aa);}}else{AJ=Math.floor((AW.height-Af)/(Aj+Af));if(AJ===0){AJ=1;}Aa=Math.floor(this.mLegendItemCount/AJ);if(Aa*AJ<this.mLegendItemCount){Aa++;}Ak=Math.floor(this.mLegendItemCount/Aa);if(Ak*Aa<this.mLegendItemCount){Ak++;}}break;default:break;}if(z.mLegendPosition!==I.DssGraphLegendPositionFreeFloat||z.mRecalculate){AY.height=Math.floor(Aj*Ak+Af*Ak+this.mEdgeMargin*2);AY.width=Math.floor(AF*Aa+AK*Aa+this.mEdgeMargin*2);if(z.mRecalculate){if(!this.mIsExpanded){AI=this.mChartContextPtr.mGraphWidth;AR=this.mChartContextPtr.mGraphHeight;if(AY.x+AY.width>AI){AY.width=AI-AY.x;}if(AY.y+AY.height>AR){AY.height=AR-AY.y;}}}}if(this.mIsExpanded){switch(z.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:this.mArea.width=AY.width*1.8+530;if(this.mArea.width>F){this.mArea.width=F;}this.mChartContextPtr.SetGraphSize(this.mArea.x+this.mArea.width+this.mChartContextPtr.vdWidth(C),this.mChartContextPtr.mGraphHeight);break;case I.DssGraphLegendPositionBottom:this.mArea.height=AY.height*0.4+400;if(this.mArea.height>P){this.mArea.height=P;}this.mChartContextPtr.SetGraphSize(this.mChartContextPtr.mGraphWidth,this.mArea.y+this.mArea.height+this.mChartContextPtr.vdHeight(C));break;case I.DssGraphLegendPositionFreeFloat:w=this.mChartContextPtr.mGraphWidth;AU=this.mChartContextPtr.mGraphHeight;if(AY.x+AY.width>this.mChartContextPtr.mGraphWidth){w=AY.x+AY.width+this.mChartContextPtr.vdWidth(C);}if(AY.y+AY.height>this.mChartContextPtr.mGraphHeight){AU=AY.y+AY.height+this.mChartContextPtr.vdHeight(C);}this.mChartContextPtr.SetGraphSize(w,AU);break;default:break;}}switch(z.mLegendPosition){case I.DssGraphLegendPositionRight:AY.y=Math.floor(this.mArea.y+this.mArea.height/2-AY.height/2);AY.x=Math.floor(this.mArea.x+this.mArea.width-AY.width);break;case I.DssGraphLegendPositionLeft:AY.y=Math.floor(this.mArea.y+this.mArea.height/2-AY.height/2);AY.x=this.mArea.x;break;case I.DssGraphLegendPositionBottom:AY.y=this.mArea.y+this.mArea.height-AY.height;AY.x=Math.floor(this.mArea.x+(this.mArea.width-AY.width)/2);break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}if(!this.mChartContextPtr.mManualLayoutMode||z.mReposition){this.mChartContextPtr.PutLocation(d.DssGraphLegendLocation,AY);}for(Ag=0;Ag<AD;++Ag){t=Math.floor(Ag/Aa);AA=Ag-t*Aa;AQ=0;switch(z.mLegendMarkersStyle){case p.DssGraphMarkerRight:AQ=AK;break;case p.DssGraphMarkerCentered:case p.DssGraphMarkerAbove:case p.DssGraphMarkerBelow:AQ=AK/2;break;}Ae=new V.Point2D();Ae.x=AY.x+(AF+AK)*AA+this.mEdgeMargin+AQ;Ae.y=Math.floor(AY.y+(Aj+Af)*t+this.mEdgeMargin+Af/2);AL=new V.Point2D();AE=new V.Point2D();switch(z.mLegendMarkersStyle){case p.DssGraphMarkerLeft:AL.x=Math.floor(Ae.x+AT.width/2);AL.y=Math.floor(Ae.y+Aj/2);AE.x=Math.floor(Ae.x+AT.width*(1+A));AE.y=Ae.y;break;case p.DssGraphMarkerRight:AL.x=Math.floor(Ae.x+AF-AT.width/2);AL.y=Math.floor(Ae.y+Aj/2);AE.x=Ae.x;AE.y=Ae.y;break;case p.DssGraphMarkerCentered:AL.x=Math.floor(Ae.x+AF/2);AL.y=Math.floor(Ae.y+Aj/2);AE.x=Ae.x;AE.y=Ae.y;break;case p.DssGraphMarkerAbove:AL.x=Math.floor(Ae.x+AF/2);AL.y=Math.floor(Ae.y+AT.height/2);AE.x=Ae.x;AE.y=Ae.y+AT.height*(1+A);break;case p.DssGraphMarkerBelow:AL.x=Math.floor(Ae.x+AF/2);AL.y=Math.floor(Ae.y+Aj-AT.height/2);AE.x=Ae.x;AE.y=Ae.y;break;default:break;}AV=Y.call(this)?(this.mLegendItemCount-Ag-1):Ag;AZ=new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AV});AG=this.mChartContextPtr.mGraphType;if(AG>=a.DssGraphTypeHiLo_Stock_Chart&&AG<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart&&Ag>=AB){var AX=this.mLegendItemIndexToStockMetricIndex[Ag];if(AX===undefined){break;}y=AX.value;if(this.mStockMetricLayout[y]===e.DssGraphMetricVerticalLine||this.mStockMetricLayout[y]===e.DssGraphMetricLine){Ab=new V.Point2D({Point2D:AL});AN=this.mLegendMarkerSize/2;AM=this.mStockMetricLayout[y]===e.DssGraphMetricVerticalLine?new V.Point2D({x:Ab.x,y:Math.floor(Ab.y-1.75*AN)}):new V.Point2D({x:Math.floor(Ab.x-1.75*AN),y:Ab.y});AC=this.mStockMetricLayout[y]===e.DssGraphMetricVerticalLine?new V.Point2D({x:Ab.x,y:Math.floor(Ab.y+1.75*AN)}):V.Point2D({x:Math.floor(Ab.x+1.75*AN),y:Ab.y});Ai=new V.StraightLineObject({TripleId:AZ,GraphObjectManager:this,StartPoint:AM,EndPoint:AC});x=new V.FormatLine({LineStyle:G.LS_SHORT_DASH,Alpha:255,LineThickness:1,LineColor:V.gBlack.ToInteger()});Ai.SetFormatLine(x);this.mLegendMarkerLines.push(Ai);u=new V.MarkerObject({TripleId:AZ,GraphObjectManager:this,MarkerPosition:AL,MarkerShape:U.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});u.mIsShown=false;}else{Ah=this.mStockMetricLayout[y]===e.DssGraphMetricBar?f.DssGraphMarkerShapeRectangle:f.DssGraphMarkerShapeHouse;u=new V.MarkerObject({TripleId:AZ,GraphObjectManager:this,MarkerPosition:AL,MarkerShape:Ah,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});u.SetFormatFill(new V.FormatFill({SimpleColor:V.gBlack.ToInteger()}));}}else{u=new V.MarkerObject({TripleId:AZ,GraphObjectManager:this,MarkerPosition:AL,MarkerShape:U.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});}this.AddToMapAndList(u);AS=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AV}));AS.SetRect(Ad);AS.MoveTo(AE.x,AE.y);AS.mIsShown=true;}return AY;}function W(){var t=this.mDatasetPtr;if(!this.mGraphOptionsLegend.mIsByGroup){return t.GetSeriesCount();}return t.GetGroupCount();}function Q(){var AA=this.mChartContextPtr,y,x,z=[],w,t,u;y=AA.GetLocationRect(d.DssGraphLegendLocation);x=new V.Point2D({x:Math.floor(y.x+y.width/2),y:Math.floor(y.y+y.height/2)});z[0]=x.Distance(new V.Point2D({x:AA.mGraphWidth,y:Math.floor(AA.mGraphHeight/2)}));z[1]=x.Distance(new V.Point2D({x:0,y:Math.floor(AA.mGraphHeight/2)}));z[2]=x.Distance(new V.Point2D({x:Math.floor(AA.mGraphWidth/2),y:AA.mGraphHeight}));w=z[0];t=0;for(u=1;u<3;++u){if(z[u]<w){w=z[u];t=u;}}return(t+1);}function H(){var AB=this.mChartContextPtr,u=this.mGraphOptionsLegend,y,t,z,AA,x,w;y=AB.GetProperty(d.DssGraphShowLegendText,o);if(y){u.mShowLegend=(y!==B);}y=AB.GetProperty(d.DssGraphMarkerLayout,o);if(y){u.mLegendMarkersStyle=y;}y=AB.GetProperty(d.DssGraphLegendLock,o);if(y){u.mLegendPosition=y;if(!AB.mManualLayoutMode&&u.mLegendPosition===K.LL_LegendFreeFloat){u.mLegendPosition=K.LL_LegendOnRightSide;}}if(AB.mManualLayoutMode){u.mLegendPosition=K.LL_LegendFreeFloat;y=AB.GetProperty(d.DssGraphInfoRecalculateLegend,o);if(y){u.mRecalculate=y!==B;if(u.mRecalculate){y=AB.GetProperty(Z.DssGraphInfoRecalculateChartFrame,o);if(y){u.mReposition=y!==B;if(u.mReposition){u.mLegendPosition=Q.call(this);}}}}y=AB.GetProperty(d.DssGraphAxisAutoFit,o);if(y){u.mAxisLabelsAutoFit=y!==B;}if(u.mAxisLabelsAutoFit){u.mRecalculate=true;u.mReposition=true;u.mLegendPosition=Q.call(this);}}u.mIsByGroup=AB.isLegendByGroup();if(!AB.mManualLayoutMode||u.mRecalculate){y=AB.GetProperty(Z.DssGraphInfoAutosizeHorizontal,o);t=AB.GetProperty(Z.DssGraphInfoAutosizeVertical,o);if(y&&t){this.mIsExpanded=y!==B&&t!==B;}this.mIsExpanded=false;}this.mLegendItemCount=W.call(this);x=AB.mGraphType;if(x===a.DssGraphTypePareto_Percent){z=false;AA=1;y=AB.GetProperty(Z.DssGraphUseChartArea,o);if(y){z=y!==B;}if(z){y=AB.GetProperty(Z.DssGraphChartAreaNumber,o);if(y){AA=y;if(AA>this.mLegendItemCount){AA=this.mLegendItemCount;}}}this.mLegendItemCount+=AA;}else{if(x>=a.DssGraphTypeHiLo_Stock_Chart&&x<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){for(w=0;w<3;++w){y=AB.GetProperty(d.DssGraphShowMetric1+w,o);if(y){if(y!==B){this.mLegendItemIndexToStockMetricIndex[this.mLegendItemCount++]=w;y=AB.GetProperty(d.DssGraphMetric1Value+w,o);if(y){this.mStockMetricValue[w]=y;}y=AB.GetProperty(d.DssGraphMetric1Style+w,o);if(y){this.mStockMetricLayout[w]=y;}}}}}}}mstrmojo.chart.Legend=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Legend",mDatasetPtr:null,mLegendArea:null,mArea:null,mGraphOptionsLegend:null,mStockMetricLayout:null,mStockMetricValue:null,mLegendMarkerLines:null,mItemMargin:0,mEdgeMargin:0,mLegendMarkerSize:0,mIsExpanded:false,mLegendItemCount:0,mLegendItemIndexToStockMetricIndex:null,init:function l(t){this._super(t);this.mDatasetPtr=t.DataSet||null;this.mLegendArea=t.Area?new V.Rect2D({Rect2D:t.Area}):null;this.mArea=t.Area?new V.Rect2D({Rect2D:t.Area}):null;this.mGraphOptionsLegend={mShowLegend:true,mShowSeriesTitles:true,mLegendPosition:K.LL_LegendOnRightSide,mLegendMarkersStyle:r.LMS_LeftOfText,mLegendBoxStyle:S.BS_NOFRAME,mLegendItemsNum:0,mAxisLabelsAutoFit:true,mVertical:true,mRecalculate:false,mReposition:false,mIsByGroup:false};this.mStockMetricLayout=[0,0,0];this.mStockMetricValue=new Array(3);this.mLegendMarkerLines=[];this.mLegendItemIndexToStockMetricIndex={};H.call(this);},GenerateMapAndList:function k(){var z=this.mChartContextPtr,y,u,w,x,t;y=new V.TripleId({ObjectId:e.DssGraphLegendText});u=new V.GraphCollectionObject({TripleId:y,GraphObjectManager:this,CollectionType:L});this.AddToMap(u);w=z.GetFormatFont(new V.TripleId({ObjectId:e.DssGraphLegendText}));u.SetFormatFont(w);X.call(this,w);this.mLegendArea=J.call(this,this.mArea,u);x=z.GetProperty(d.DssGraphLegendBox,o);if(x===null||x===undefined){x=S.BS_NOFRAME;}y=new V.TripleId({ObjectId:e.DssGraphLegendArea});t=new V.FancyBoxObject({TripleId:y,GraphObjectManager:this,BoxStyle:x,Area:this.mLegendArea});this.AddToMapAndList(t);},GetLegendArea:function j(){return this.mLegendArea;},CalculateFrame:function R(y,x,w){var t,u;t=this.GetLegendArea();switch(this.mGraphOptionsLegend.mLegendPosition){case I.DssGraphLegendPositionRight:if(t.width<this.mArea.width*c){w.width=t.x-y-this.mArea.x;}break;case I.DssGraphLegendPositionLeft:if(t.width<this.mArea.width*c){u=this.mArea.x+this.mArea.width;w.x=t.x+t.width+y;w.width=u-w.x;}break;case I.DssGraphLegendPositionBottom:if(t.height<this.mArea.height*c){w.height=t.y-x-this.mArea.y;}break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}},Draw:function b(){var w=this.mGraphObjectList,x=this.mLegendMarkerLines,t,u;w[0].Draw();t=x.length;for(u=0;u<t;++u){x[u].Draw();}t=w.length;for(u=1;u<t;++u){w[u].Draw();}},SetFormatLineOfLegendMarkerLine:function g(AB,AE,x){var u=this.mChartContextPtr,y,z,AD,AA,t,AC;if(x===undefined){x=false;}y=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AE}));if(!y){return false;}z=y.mMarkerPosition;AD=y.mMarkerSize;AA=u.mIsGraphMatrix?1:1.75;t=x?new V.Point2D({x:z.x,6:z.y-AA*AD}):new V.Point2D({x:z.x-AA*AD,y:z.y});AC=x?new V.Point2D({x:z.x,y:z.y+AA*AD}):new V.Point2D({x:z.x+AA*AD,y:z.y});var w=new V.StraightLineObject({TripleId:new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AE}),GraphObjectManager:this,StartPoint:t,EndPoint:AC});w.SetFormatLine(AB);this.mLegendMarkerLines.push(w);return true;},UpdateFormatForLegendMarker:function q(t,AA,x,z,u){if(t<0||t>=this.mLegendItemCount){return ;}z=(z!==undefined)?z:false;u=(u!==undefined)?u:false;var y=new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:t});var w=this.GetGraphObject(y);if(!w){return ;}if(AA){w.SetFormatFill(AA);}if(x){if(z){this.SetFormatLineOfLegendMarkerLine(x,t,u);}else{w.SetFormatLine(x);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","Axis","ChartAdvFormat","NumberObject","AxisObject","Vector2D","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphOffScaleType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumNumberCategory","EnumCollectionType","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphMarkerShape");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresCls("mstrmojo.gm.GMUtility");var AM=mstrmojo.hash,Be=mstrmojo.chart,Ba=Be.ChartConstants,BH=Be.enums,BW=mstrmojo.VisUtility,b=BH.EnumGraphMajorType,As=BH.EnumDSSGraphOffScaleType,a=BH.EnumAnchorPoint,U=BH.EnumAxisLabelsLocation,h=BH.EnumAxisDirection,AN=BH.EnumGraphObjectType,t=BH.EnumCollectionType,AL=Be.gNullObjectId,BZ=Be.model,AX=BZ.enums,f=AX.EnumDSSGraphMarkerShape,A3=AX.EnumDSSGraphType,A6=AX.EnumDSSGraphProperty,A8=AX.EnumDSSGraphObject,A7=AX.EnumDSSExtraGraphProperty,BL=AX.EnumDSSGraphFontRotation,q=AX.EnumDSSGraphGridLineType,r=BH.EnumRectExpandDirection,T=BH.EnumGraphMatrixMajorGraphType,AQ=Be.common.Utility,BB=mstrmojo.gm,AE=BB.GMUtility,BV=0.00001,Bd=0,AI=1e-14,AC=10000,Bb=0.1;var AG=new Be.Rect2D(),Bn=new Be.Rect2D(),O=new Be.Rect2D(),R=null,F=null,AB=null,V=null,x=new Be.TripleId();function A2(Bo){switch(Bo){case A8.DssGraphY2Body:case A8.DssGraphX2Body:return true;}return false;}function BS(Bv,Bu,Bq){var Bt=Bv,Br=10,Bo=this.mChartContextPtr,Bs=Bo.mGraphWidth,Bp=Bo.mGraphHeight,Bx=this.IsVerticalAxis();if(Bq===undefined){var Bw=Bx?Bp:Bs;if((Bx^Bu)===0){Bq=0.5*Bv;}else{Bq=0.5*(Bw-Bv);}}Bq=Bu?-Bq:Bq;if(!Bx){Bq=-Bq;}Bt+=Bq;if(Bt<Br||Bt+Br>(Bx?Bp:Bs)){return null;}return Bt;}function X(){if(this.hasLabelCreated){var Bp,Bq=this.mLabelList,Bo=Bq.length;for(Bp=0;Bp<Bo;Bp++){if(Bq[Bp]&&Bq[Bp].mIsShown){return true;}}return false;}return e.call(this);}function Ag(){var Bp=this.mChartContextPtr,Bx=Bp.GetGraphMatrixContext(),By={Include:false,DrawFromZero:false};if(Bx.isCombinationChart()){var Bt=Bp.mDataset,Bs=Bt.GetSeriesByShape(),B0=this.mTripleId.mObjectId,Bz=false,Bw=A2.call(this,B0),Bu=Bs.Bar,Br=Bs.Area,Bq=0,Bo=0;var B2=Bt.GetSeriesCount();if(Bp.IsDualAxis()){var Bv=Bw?1:0,B1=Bw?"Secondary":"Primary";Bs=Bt.GetShapesDistributionByValueAxis(Bv)[B1];Bu=Bs.BAR;Br=Bs.AREA;B2=Bt.GetSeriesByValueAxis(Bv).length;Bz=(Bu&&Bu.indexOf(Bv)!==-1)||(Br&&Br.indexOf(Bv)!==-1);}else{Bz=((Bu&&Bu.length>0)||(Br&&Br.length>0));}Bz=!!Bz;By.Include=Bz;if(Bu&&Bu.length>0){Bq=Bu.length;}if(Br&&Br.length>0){Bo=Br.length;}By.DrawFromZero=(Bo+Bq===B2);}return By;}function K(Bo){return Math.log(Bo)/Math.log(10);}function E(){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var Bo=this.mMajorGrid;return Bo.mUseManualGrid&&(Bo.mGridInterval<(this.mMaxTick-this.mMinTick)/30);}function S(){return this.mOptions.mUseMinValue&&this.mOptions.mShowMinLabel;}function BY(B4,By,Bq){var Bx,Bs;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}Bx=0;if(Bq){Bx=Math.max(B4,B4-By);Bx=Math.max(Bx,-By);}else{Bx=B4-By;}if(Bx===0){this.mIsShown=false;return 1;}if(Bx>=1&&Bx<=4&&parseInt(Bx)===Bx){var B5=this.PrimaryMetricIndex,Bt=B5.length;for(var B0=0;B0<Bt;B0++){var Bw=this.mChartContextPtr.mDatasetPtr,Bz=Bw.dataProvider,Br=Bz.getSeriesCount(),Bv=Bz.getGroupCount(),Bp=B5[B0],Bu,B2;for(var B3=0;B3<Br;B3++){Bu=Bz.getMetricIndexForSeries(B3);if(Bu===Bp){B2=true;for(var B1=0;B1<Bv;B1++){var B6=Bw.GetData(B3,B1);if(parseInt(B6)!==B6){B2=false;break;}}}if(B2){return 1;}}}}var Bo=Bx;Bs=1;while(Bx<1){Bx*=10;Bs/=10;}while(Bx>=10){Bx/=10;Bs*=10;}if(Bx<1.8){Bs*=2;Bs/=10;}else{if(Bx<3.1){Bs*=4;Bs/=10;}else{if(Bx<4.6){Bs*=5;Bs/=10;}else{if(Bx>=8.1){Bs*=2;}}}}Bs=this.postProcessStep(Bs,Bo);return Bs;}function A0(){return this.mGraphMajorType===b.GMT_HISTOGRAM&&this.mTripleId.mObjectId===A8.DssGraphX1Body;}function At(){return(this.mGraphMajorType===b.GMT_HISTOGRAM||this.mGraphMajorType===b.GMT_POLAR)&&this.mTripleId.mObjectId===A8.DssGraphX1Body;}function J(){var Bo=this.mChartContextPtr;if(Bo.mIsGraphMatrix){return !this.IsVerticalAxis();}if(!this.mChartContextPtr.mManualLayoutMode&&this.mTripleId.mObjectId===A8.DssGraphX1Body&&!this.IsVerticalAxis()){switch(this.mGraphMajorType){case b.GMT_HISTOGRAM:case b.GMT_SCATTER:case b.GMT_BUBBLE:return true;default:break;}}return false;}function AK(){var B6,Br,Bz,B5,Bq,B2=0,Bw=this.mOptions,B4,Bt,Bx,Bs=0;var Bp=this.mChartContextPtr,Bv=Bp.mIsGraphMatrix,Bo=Bp.getUniformAxisLabelRotateMode("x");B6=[];this.GetTicks(B6);if(B6.length<2){if(!Bv||Bo===BL.Automatic){return ;}}Bz=Be.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(Bz,AN.GOT_AXIS_LABEL);Bq=this.mpAxisLabelSet.GetFormatFont();if(Bv){if(Bo!==BL.Automatic){Bq.mFontRotation=Bo;return ;}}B4=B6.length;B5=50;Br=false;AG.Reset(0,0,0,0);Bq.mFontRotation=BL.Normal;if(!Bv&&B4>=2){if(this.mOptions.mUseMinValue){B2=1;Bs=1;}if(this.mOptions.mUseMaxValue){B4--;}}var B0,B1=B2,B3=this.mChartContextPtr.GetGraphMatrixContext();for(B0=0;B2<B4;B2++){if(this.hasLabelCreated){Bt=this.mLabelList[B2];}Bt=Bt||new Be.NumberObject({TripleId:Bz,GraphObjectManager:this,Number:B6[B2],NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});Bt.MoveTo(this.ValueToPosition(B6[B2]),B5,a.CENTER);Bx=Bt.GetBoundingRect(true);if(B2!==Bs){if(Bv){var By=(B2===1&&Bw.mUseMinValue)||(B2===B4-1&&Bw.mUseMaxValue);if(!By){var Bu=1;Br=Bx.HasIntersection(AG)||B3.checkPaddingBetweenLabels(AG,Bx,Bu,true);}}else{Br=Bx.HasIntersection(AG);}}AG.ResetRect(Bx);}this.hasLabelCreated=this.mpAxisLabelSet.GetCollectionSize()===B4;if(Br){Bq.mFontRotation=Bv?BL.Rotate90:BL.Rotate270;}else{Bq.mFontRotation=BL.Normal;}this.maxLabelLength=this.fakeMaxLabelLength;if(this.maxLabelLength!==-1){this.restoreLabels(true);for(B0=0;B1<B4;B1++){Bt=this.mLabelList[B1];Bt.MoveTo(this.ValueToPosition(B6[B1]),B5,a.CENTER);}}}function Ac(){switch(this.mChartContextPtr.GetGraphType()){case A3.DssGraphTypeVertical_Area_DualAxis_Absolute:case A3.DssGraphTypeVertical_Area_DualAxis_Stacked:case A3.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case A3.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case A3.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case A3.DssGraphTypeVertical_Bar_DualAxis_Stacked:case A3.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case A3.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case A3.DssGraphTypeVertical_Line_DualAxis_Absolute:case A3.DssGraphTypeVertical_Line_DualAxis_Stacked:case A3.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case A3.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case A3.DssGraphTypeVertical_Bar_DualAxis_Absolute:case A3.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:return true;default:return false;}}function g(){if(this.mUseDepth){return(A2.call(this,this.mTripleId.mObjectId)===false||!(Ac.call(this)));}return this.mAxisInfo.mShowAxisLine;}function z(Bq,Bo){var Bp;Bp=new Be.NumberObject({TripleId:Bq,GraphObjectManager:this,Number:Bo,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectedCondense:this.mCondenseLabels});this.mGraphObjectList.push(Bp);this.mpAxisLabelSet.AddGraphObject(Bp);}function Bm(){var Bq,Bo,Br,Bp;Bq=[];this.GetTicks(Bq);Bo=Bq.length;Br=this.mLabelObjectId;for(Bp=0;Bp<Bo;++Bp){z.call(this,Br,Bq[Bp]);}}function AD(Bw,Bp,Bu){var Br=this.mChartContextPtr,Bx=this.mOptions,Bo=Bp,Bt=Bu;var Bq=Br.mIsGraphMatrix&&Bx.mUseCustomMinMax;if(!Br.mIsTimeSeriesChart&&!Bq){if(Br.mIsGraphMatrix){var Bv=1e-9,Bs=Math.abs((Bw-this.mMaxTick)/(this.mMaxTick-this.mMinTick));if((Bw<this.mMinTick||(Bw>this.mMaxTick&&Bs>Bv))&&Bx.mOffScaleType===As.DssGraphOffScaleHide){return{Flag:false,Value:Bw,Min:Bo,Max:Bt};}if(Bw>this.mMaxTick&&Bx.mOffScaleType===As.DssGraphOffScaleHide){Bw=this.mMaxTick;}}else{if((Bw<this.mMinTick||Bw>this.mMaxTick)&&Bx.mOffScaleType===As.DssGraphOffScaleHide){return{Flag:false,Value:Bw,Min:Bo,Max:Bt};}}if(Bx.mOffScaleType===As.DssGraphOffScaleClip){Bw=(Bw>this.mMaxTick)?this.mMaxTick:Bw;Bw=(Bw<this.mMinTick)?this.mMinTick:Bw;}}Bo=this.mMinTick;Bt=this.mMaxTick;if(this.IsLogarithmic()){if(Bw<=0){return{Flag:false,Value:Bw,Min:Bo,Max:Bt};}Bw=K.call(this,Bw);Bo=K.call(this,Bo);Bt=K.call(this,Bt);}return{Flag:true,Value:Bw,Min:Bo,Max:Bt};}function C(){}function AZ(Br){if(AB===null){AB=new Be.Point2D();}else{V.Reset(0,0);}if(V===null){V=new Be.Point2D();}else{V.Reset(0,0);}var Bp=AB,Bt=V,Bq=this.mDeviceDataArea,Bo,Bs;Bo=this.IsVerticalAxis()?Bq.x:Bq.x+Bq.width;Bs=this.IsVerticalAxis()?Bq.y:Bq.y+Bq.height;Bp.Reset(Bo,Bs);Bt.Reset(Bq.x+Bq.width,Bq.y);if(this.IsVerticalAxis()){Bp.y=this.ValueToPosition(Br);Bt.y=Bp.y;}else{Bp.x=this.ValueToPosition(Br);Bt.x=Bp.x;}return{LowEnd:Bp,HighEnd:Bt};}function Bk(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Bs=this.mOptions;if(Bs.mUseCustomMinMax||Bs.mUseLogarithmicScale){return ;}var Bq=false,Bo=false,Br=[];this.GetTicks(Br);if(Br.length>=2){var Bp=Br.length;Bo=((Math.abs(this.mMaximum-Br[Bp-2])<Bb*this.mStep));Bq=((Math.abs(this.mMinimum-Br[1])<Bb*this.mStep));if(this.mIsPercent){Bo=false;}}if(Bo&&Bq){this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;Bs.mUseMinValue=true;Bs.mShowMinLabel=false;Bs.mUseMaxValue=true;Bs.mShowMaxLabel=false;}else{if(Bo){this.mMaxTick=this.mMaximum;Bs.mUseMaxValue=true;Bs.mShowMaxLabel=false;}else{if(Bq){this.mMinTick=this.mMinimum;Bs.mUseMinValue=true;Bs.mShowMinLabel=false;}else{Bd++;}}}if(Bs.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}function Az(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}if(this.mGraphMajorType===b.GMT_BUBBLE&&this.mTripleId.mObjectId===A8.DssGraphZBody){return ;}Bk.call(this);}function w(){var Bs=this.mChartContextPtr;if(!Bs.mIsGraphMatrix){return false;}var Br=Bs.mDataset;if(!Br){return false;}if(!this.mIsUniformAxis){var Bq=Bs.GetGraphMatrixContext();if(Bq.isPieOrRingShape()===false&&Br.showDatalabels()===false){return true;}if(Bq.isPieOrRingShape()===true&&Br.showPieDatalabels()===false){return true;}}if(this.mPrimaryMetrics){if(!!this.mNumberFormat.isDefault){this.mNumberFormat=new Be.ChartAdvFormat();}var Bp=Br.getValueAxisNumberFormat(this.mNumberFormat,this.mPrimaryMetrics);if(this.mIsPercent===false){return Bp;}}var Bo=this.mNumberFormat;if(this.mIsPercent){Bo.mFormatType=4;Bo.mCustomFormat="0%";return true;}return false;}function AU(Br){var Bp,Bq,Bo;for(Bp=0;Bp<2;Bp++){Bq=(Bp===0)?this.mHighTicksToLabel:this.mLowTicksToLabel,Bo=Bq[Br];if(Bo&&Bo.mIsShown){return Bo;}}return null;}function AY(Bt,Bq){var Br,Bs=this.mChartContextPtr;if(Bs.mIsGraphMatrix){if(this.IsVerticalAxis()){if(Bq.y===Bs.mGraphHeight){--Bq.y;--Bt.y;}}if(Bs.isUADataAreaOutput()){var Bp=Bs.GetGraphMatrixContext().getPadding(Ba.kEndTickToChart),Bo=Bs.getUniformAxisContext();if(this.IsVerticalAxis()){if(Bo.mDataAreaRightMargin>=0){if(Bt.x+Bo.mDataAreaRightMargin<=Bs.mGraphWidth){Bt.x+=Bo.mDataAreaRightMargin;}else{Bt.x=Bs.mGraphWidth;}}if(Bo.mDataAreaLeftMargin>=0){if(Bq.x>=Bo.mDataAreaLeftMargin){Bq.x-=Bo.mDataAreaLeftMargin;}}Br=Bs.mGraphHeight;if(Math.abs(Bq.y-Br)<Bp||Math.abs(Bq.y)<Bp){return false;}}else{if(Bo.mDataAreaBottomMargin>=0){if(Bq.y+Bo.mDataAreaBottomMargin<=Bs.mGraphHeight){Bq.y+=Bo.mDataAreaBottomMargin;}else{Bq.y=Bs.mGraphHeight;}}if(Bo.mDataAreaTopMargin>=0){if(Bt.y>=Bo.mDataAreaTopMargin){Bt.y-=Bo.mDataAreaTopMargin;}}Br=Bs.mGraphWidth;if(Math.abs(Bq.x)<Bp||Math.abs(Bt.x-Br)<Bp){return false;}}}}return true;}function Af(Bx,By,Bz,Br){var B0,B1,Bt,Bu,Bp=[],Bq=this.mChartContextPtr,Bo=Br?this.hasMajorTickCreated:this.hasMinorTickCreated,Bs;if(By>this.mMaxTick||By<this.mMinTick){return ;}if(Bq.mIsGraphMatrix){if(this.mAxisInfo.mAxisDirection>=h.AD_Z){return ;}if(Bq.isUADataAreaOutput()){var Bw=Bq.GetGraphMatrixContext().mShownValueTickSet[this.mAxisInfo.mAxisDirection];if(Bw[By]===undefined){return ;}}if(this.mIsUniformAxis){if(this.mAxisInfo.mShowAxisLabels===false){return ;}var Bv=AU.call(this,By);if(!Bv||!Bv.mIsShown){return ;}}}Bs=AZ.call(this,By);B0=Bs.LowEnd;B1=Bs.HighEnd;if(!AY.call(this,B1,B0)){return ;}Bt=Br?this.mMajorGrid.mGridStyle:this.mMinorGrid.mGridStyle;Bu=Math.floor(Br?this.mTickLength:this.mTickLength*2/3+1);this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,Bt,Bu,B0,B1,Bp);this.GenerateOneLineObject(Bx,Bp,Bz);if(this.HasTwoGridLineParts(Bt)){Bp.splice(0,Bp.length);this.GetOneGridLine(this.IsVerticalAxis()?U.ALL_RIGHT:U.ALL_TOP,Bt,Bu,B0,B1,Bp);this.GenerateOneLineObject(Bx,Bp,Bz);}}function u(Bp,Br,Bo){var Bq=Bp?this.mHighTicksToLabel:this.mLowTicksToLabel;Bq[Br]=Bo;}function Bf(Bq,Br){var Bp,Bo=this.mpAxisLabelSet.GetCollectionSize(),Bs=Bq?this.mHighTicksToLabel:this.mLowTicksToLabel;Bs={};if(Br<0||Br>=Bo){return ;}for(Bp=Br;Bp<Bo;Bp++){var Bt=this.mpAxisLabelSet.GetObjectByIndex(Bp);if(Bt){u.call(this,Bq,Bt.mNumber,Bt);}}}function Q(Bo,Bq){if(Bq<=0){return 0;}var Bv=this.mOptions,Bu=this.mMaxTick,Bs=this.mMinTick,Bt=this.mMaximum,Br=this.mMinimum,Bp;if(Bv.mUseLogarithmicScale){Bt=Bt<=0?-1:K.call(this,Bt);Br=Br<=0?-1:K.call(this,Br);Bu=K.call(this,Bu);Bs=K.call(this,Bs);}Bp=Bo?Bu-Bt:Br-Bs;Bp=Math.abs(Bp);return Bp/(Bu-Bs)*Bq;}function BJ(){var Bq,Br,Bo,Bp;if(this.mIsUniformAxis){Bq=this.mTripleId;}else{Bq=Be.gAxisObjects[this.getIndex()].mMajorId;}if(this.hasMajorTickCreated){this.clearTickObjects(Bq,true);this.hasMajorTickCreated=false;}this.InitObjectSet(Bq,AN.GOT_MAJOR_GRID);if(this.mChartContextPtr.mIsGraphMatrix){Af.call(this,Bq,this.mMinTick,this.mpMajorGridSet,true);Af.call(this,Bq,this.mMaxTick,this.mpMajorGridSet,true);}else{Br=true;Bo=this.mChartContextPtr.GetProperty(A6.DssGraphLineAlpha,new Be.TripleId({ObjectId:A8.DssGraphFrame}));if(Bo){Br=(Bo>0);}if(!Br||this.mAxisInfo.mAxisDrawInReverse){Af.call(this,Bq,this.mMinTick,this.mpMajorGridSet,true);}if(!Br||!this.mAxisInfo.mAxisDrawInReverse){Af.call(this,Bq,this.mMaxTick,this.mpMajorGridSet,true);}}for(Bp=0;Bp<this.mTicks.length;++Bp){Af.call(this,Bq,this.mTicks[Bp],this.mpMajorGridSet,true);}this.hasMajorTickCreated=true;}function P(){var Br,Bq=this.mOptions,Bo,Bt,Bs,Bp;Br=1;if(Bq.mUseLogarithmicScale){Br=8;}else{if(this.mMinorGrid.mUseManualGrid){Br=Math.floor(this.mMinorGrid.mGridInterval);}}if(this.mIsUniformAxis){Bo=this.mTripleId;}else{Bo=Be.gAxisObjects[this.getIndex()].mMinorId;}if(this.hasMinorTickCreated){this.clearTickObjects(Bo,false);this.hasMinorTickCreated=false;}this.InitObjectSet(Bo,AN.GOT_MINOR_GRID);Bt=this.mStep/(Br+1);for(Bs=0;Bs<this.mTicks.length;++Bs){Bt=Bq.mUseLogarithmicScale?this.mTicks[Bs]:Bt;for(Bp=1;Bp<=Br;++Bp){Af.call(this,Bo,this.mTicks[Bs]+Bp*Bt,this.mpMinorGridSet,false);}}if(this.mTicks.length===0){Bt=Math.floor(Bq.mUseLogarithmicScale?this.mMinTick:(this.mMaxTick-this.mMinTick)/(Br+1));for(Bp=1;Bp<=Br;++Bp){Af.call(this,Bo,this.mMinTick+Bp*Bt,this.mpMinorGridSet,false);}return ;}Bt=Bq.mUseLogarithmicScale?this.mMinTick:Bt;for(Bp=1;Bp<=Br;++Bp){Af.call(this,Bo,this.mTicks[0]-Bp*Bt,this.mpMinorGridSet,false);}this.hasMinorTickCreated=true;}function Ak(){if(this.mpAxisLabelSet===null){return ;}if(this.mCondenseLabels!==true){return ;}var Bs=this.mpAxisLabelSet.GetCollectionSize()-1,Bt,Bo=null,Bq=true,Br,Bp,Bv,Bw=0;while(Bs>=0){Bp=this.mpAxisLabelSet.GetObjectByIndex(Bs);Br=0;if(Bp.mIsShown){if(Bq){Bt=Bp.mText;Bo=Bp;Bq=false;Bv=Bo.GetNumberFromText();if(Bv!==null){Br=Bv;Bw=Math.abs(Br-Bo.mNumber);}}else{var Bu=Bp.mText;if(Bu===Bt){if(Bo.mIsShown){if(Bw>0){Bo.mIsShown=false;}}Bv=Bp.GetNumberFromText();if(Bv!==null){Br=Bv;if(Math.abs(Br-Bp.mNumber)>0){Bp.mIsShown=false;}}else{Bp.mIsShown=false;}}else{Bt=Bu;Bo=Bp;Bv=Bo.GetNumberFromText();if(Bv){Br=Bv;Bw=Math.abs(Br-Bp.mNumber);}else{Bw=0;}}}}Bs--;}}function Bl(){var Br=this.mChartContextPtr;if(Br.mIsGraphMatrix&&!Br.isUADataAreaOutput()){if(this.mAxisInfo.mAxisDirection>=h.AD_Z){return ;}var Bp=Br.GetGraphMatrixContext(),Bo=Bp.mShownValueTickSet[this.mAxisInfo.mAxisDirection]={},Bq=function(Bs){AM.forEach(Bs,function(Bt){if(Bt.mIsShown){Bo[Bt]=true;}});};Bq(this.mHighTicksToLabel);Bq(this.mLowTicksToLabel);}}function Ay(Bp,Br,Bq){var Bo=this.ValueToFloatPosition(Bp),Bs=Br+0.5*Bq,Bt=this.mChartContextPtr;if(Bo>=Bs&&Bo+Bs<=Bt.mGraphWidth){return true;}return false;}function e(){var Bp=this.mChartContextPtr,Bt=Bp.GetGraphMatrixContext(),Bu=this.mDeviceDataArea,Bw=this.IsVerticalAxis(),Bo,Bx=this.mpAxisLabelSet.mFormatFontPtr,Bq=Bt.getPadding(Ba.kEndLabelToChart);if(Bw){Bo=Math.max(Bu.height,Bp.mGraphHeight);}else{Bo=Math.max(Bu.width,Bp.mGraphWidth);}if(Bo<Bx.mFontSize+2*Bq){return false;}if(Bo<Bx.GetStringHeight("H")+2*Bq){return false;}if(Bu.width>=0&&Bu.height>0){var Bv=[];this.GetTicks(Bv);var Br,Bs=Bv.length;for(Br=0;Br<Bs;Br++){if(Ay.call(this,Bv[Br],Bq,Bx.mFontSize)===true){return true;}}}return true;}function BQ(Bq){if(this.mOptions.mUseMaxValue||Bq>this.mDeviceDataArea.height){return false;}var Bo,Bp=(this.mMaxTick-this.mMinTick)/(this.mDeviceDataArea.height-Bq)*this.mDeviceDataArea.height;for(Bo=this.mMaxTick;Bo<Bp;Bo+=this.mStep){this.mTicks.push(Bo);}this.mMaxTick=Bp;return true;}function L(Bq){var Br=this.mChartContextPtr,Bp=0,Bo=0;if(Br.mIsGraphMatrix){Bo=Bp=Br.GetGraphMatrixContext().getPadding(Ba.kChartToChart);if(Bq){Bo=Bp=0;}else{if(this.mMaxTick<=0){Bp=0;}if(this.mMinTick>=0){Bo=0;}}}return{LowPadding:Bo,HighPadding:Bp};}function Ai(){var Bs=this.mChartContextPtr,Bp=0,Bo=Bs.GetGraphMatrixContext(),Br=Bs.mDataset.GetGroupCount();if(Bs.mIsGraphMatrix===false){return 0;}if(Bo.isCombinationChart()){var Bq=Bs.mDataset.GetSeriesByShape();if(Bq.Circle&&Bq.Circle.length){return Bo.getPadding(Ba.kExtra);}if(Bq.Square&&Bq.Square.length){return Bo.getPadding(Ba.kExtra);}if(Bq.Circle&&Bq.Circle.length){return Bo.getPadding(Ba.kExtra);}if((Bq.Line&&Bq.Line.length)||(Bq.Area&&Bq.Area.length)){if(Br===1){return Bo.getPadding(Ba.kExtra);}}return 0;}switch(Bs.GetGraphMatrixGraphMajorType()){case T._BUBBLE:case T._SCATTER:case T._PIE:Bp=Bo.getPadding(Ba.kExtra);break;case T._LINE:case T._AREA:if(Br===1||Bo.mMarkerShape!==f.DssGraphMarkerShapeNone){Bp=Bo.getPadding(Ba.kExtra);}break;}return Bp;}function W(Bw,CB,B7,B6){var Br=this.mChartContextPtr,B0=0,Bs=0,B1=0,CA=0,B5=0,B8=0,By=0,Bx=B7,Bp=B6,B3=this.mTripleId.mObjectId===A8.DssGraphY1Body||this.mTripleId.mObjectId===A8.DssGraphX1Body,Bv=this.mAxisInfo.mAxisDirection===h.AD_X,Bt=this.mOptions.mUseCustomMinMax,Bo=!Bt||(Bt&&!this.mOptions.mUseMinValue),Bq=!Bt||(Bt&&!this.mOptions.mUseMaxValue),B2=Br.mUniformAxisContext,B9=Br.GetGraphMatrixContext();if(Bq){B0=Ai.call(this);B8=B9.GetValueAxisPadding(Bv,true,B3);B8=B8>0?B8+B0:B8;Bs=Q.call(this,true,CB-B8-By);CA=B8-Bs;Bx=Math.max(Bx,CA);}if(Bo){B0=Ai.call(this);By=B9.GetValueAxisPadding(Bv,false,B3);By=By>0?By+B0:By;B1=Q.call(this,false,CB-B8-By);B5=By-B1;Bp=Math.max(Bp,B5);}var Bz=0,Bu=Bv?B2.mDataAreaRightMargin:B2.mDataAreaTopMargin,B4=Bv?B2.mDataAreaLeftMargin:B2.mDataAreaBottomMargin;if(!Bw){Bz=Bx;if(Bu>=0&&Bu<Bz){Bx=Bz-Bu;}else{Bx=0;}Bz=Bp;if(B4>=0&&B4<Bz){Bp=Bz-B4;}else{Bp=0;}}return{HighPadding:Bx,LowPadding:Bp};}function G(Br,Bq,Bu,Bp){var Bo=Bu,Bt=Bq,Bs=(this.mAxisInfo.mAxisDirection===h.AD_X)?Bp.width:Bp.height;if(Bo<0){Bo=0;}if(Bt<0){Bt=0;}if(Bs<=0||Bs<Bo+Bt){return ;}Bs-=Bo+Bt;this.mLowTrim=Bo;this.mHighTrim=Bt;if(!Br){this.mIsTrimmedWithPadding=true;}if(this.mAxisInfo.mAxisDirection===h.AD_X){Bp.x+=Bo;Bp.width=Bs;}if(this.mAxisInfo.mAxisDirection===h.AD_Y){Bp.y+=Bt;Bp.height=Bs;}}function n(){if(this.mChartContextPtr.mIsGraphMatrix&&this.mOptions.mUseCustomMinMax){return AC;}return 32757;}function AV(Bt,Bv){var Bu=this.mChartContextPtr,Bo=0,Br=Bt-1;if(!Bu.mIsGraphMatrix){return -1;}if(this.mIsPercent&&!this.mOptions.mUseCustomMinMax){if(Bv&&this.mMaxTick===1){return Br;}if(this.mMinTick===-1){return Bo;}}var Bq,Bs=Bu.GetGraphMatrixContext().getPadding(Ba.kEndLabelToChart),Bp=this.mGraphObjectList;if(Bv){while(Br>=0){Bq=Bp[Br];if(!Bq.mIsShown){Br--;continue;}if(Al.call(this,Bq,Bs)){return Br;}Bq.mIsShown=false;Br--;}}else{while(Bo<=Br){Bq=Bp[Bo];if(!Bq.mIsShown){Bo++;continue;}if(Al.call(this,Bq,Bs)){return Bo;}Bq.mIsShown=false;Bo++;}}return -1;}function BC(B9,Bu,Bp,Bt,Bq){var B2=true,B6=this.mChartContextPtr.mIsGraphMatrix,B8=B6&&this.mIsPercent,Bv=1,B4=this.mLabelSpan,Br=this.mOptions,Bs=this.mGraphObjectList,Bz=Bs[Bt],Bw=Bz;while(B2){B2=false;var B5=B8?Bt-Bv:Bt+Bv,B7=B8?(B5>=Bu):(B5<Bp);while(B7){var B3=Bs[B5];if(B3.HasOverlapForSameRotation(Bw,B4,Bq)){B2=true;Bw=Bz;++Bv;break;}else{Bw=B3;}B5+=B8?-Bv:Bv;B7=B8?(B5>=Bu):(B5<Bp);}}var B0=this.mIsPercent?(Bt-Bu)/Bv:(Bp-Bt)/Bv;B0=Math.floor(B0);if(B0<3){return Bv;}var B1,Bo,Bx=AV.call(this,Bp,false),By=AV.call(this,Bp,true);if(Bx===-1||By===-1){return Bv;}if(this.mIsPercent){if(Bx<=Bt-B0*Bv){return Bv;}if(Bx===0&&Br.mUseMinValue&&Br.mShowMinLabel&&this.mMinTick!==-1){Bx++;}B1=(Bt-Bx)/Bv;Bo=(Bt-B1*Bv)-Bx;Bv+=Bo/B1;}else{if(By>=Bt+B0*Bv){return Bv;}B1=(By-Bt)/Bv;Bo=By-(Bt+B1*Bv);Bv+=Math.floor(Bo/B1);}return Bv;}function B(By,Bq,Bs,Bp,Bx){var Bu,Bo=this.mChartContextPtr,Bv=Bo.mIsGraphMatrix,Bz=Bo.mIsTimeSeriesChart;if(this.mOptions.mShowMaxLabel){if((!Bv&&!Bz)||(Bv&&this.mIsPercent)){var Br=((Bq-1-Bs)%Bp);if(Br!==0){Bu=this.mGraphObjectList[Bq-1];Bu.mIsShown=true;var Bt=Bq-1-Br,Bw=this.mGraphObjectList[Bt];if(Bu.HasOverlapForSameRotation(Bw,this.mLabelSpan,Bx)&&(Bt>By||!this.mOptions.mShowMinLabel)){Bw.mIsShown=false;}}}else{if(Bv&&this.mOptions.mUseMaxValue&&Bq-By>2){Bu=this.mGraphObjectList[Bq-1];Bu.mIsShown=false;}}}}function AH(Bq){var Bo,Bp=this.mChartContextPtr.mIsGraphMatrix;if(this.mOptions.mShowMinLabel){if(Bp){if(this.mIsPercent&&this.mMinTick===-1){Bo=this.mGraphObjectList[Bq];Bo.mIsShown=true;}else{if(this.mIsPercent&&this.mOptions.mUseMinValue){Bo=this.mGraphObjectList[Bq];Bo.mIsShown=false;}}}}}function BI(Bw,Bp,Bt,Bq,Br,By,Bx){var Bu=Bp,Bs=Br?1:-1,Bo=0,Bv=Br?(Bq?Bu-Bt<=0:Bu-Bt<0):(Bq?Bu-Bt>=0:Bu-Bt>0);while(Bv){if(Br){Bo=Bu-By;}else{Bo=By-Bu;}if(Bo%Bw!==0){this.mGraphObjectList[Bu].mIsShown=false;}else{if(Bx&&Bx(Bu,Bw,Bp,Bt)){this.mGraphObjectList[Bu].mIsShown=false;}}Bu+=Bs;Bv=Br?(Bq?Bu-Bt<=0:Bu-Bt<0):(Bq?Bu-Bt>=0:Bu-Bt>0);}}function y(Bp,Bq,Bw,Br,Bo){var Bu=Bo,Bv=function(Bz,By,B1,B0){return Bz===B0;},Bx=function(Bz,By,B1,B0){return Bz<By+B0;};if(this.mChartContextPtr.mIsGraphMatrix&&this.mIsPercent){if(this.mMinTick===-1){if(this.mMaxTick===0){BI.call(this,Bu,Bq,Br,true,true,0,Bv);}else{var Bt=(Br-Bq)/Bo,Bs=(Br-Bq)/Bt;BI.call(this,Bs,Br-1,Bq,false,false,Br,Bx);Bu=Bs;}}else{BI.call(this,Bu,Br-1,Bq,true,false,Br);}}else{BI.call(this,Bu,Br+1,Bw,false,true,Br);}return Bu;}function k(Bx,Bu,Bq){if(Bu>this.mMaxTick||Bu<this.mMinTick){return ;}var Bv={},Bw={},Bt,By=false,Bo=[];Bt=AZ.call(this,Bu);Bv.x=Bt.LowEnd.x;Bv.y=Bt.LowEnd.y;Bw.x=Bt.HighEnd.x;Bw.y=Bt.HighEnd.y;var Bp=this.mChartContextPtr;if(Bp.mIsGraphMatrix){if(this.IsVerticalAxis()){By=Bv.y===Bp.mGraphHeight||Bv.y===0;}else{By=Bv.x===Bp.mGraphWidth||Bv.x===0;}}if(By){return ;}if(Bp.mIsGraphMatrix){if(this.IsVerticalAxis()){Bv.x=Math.min(Bv.x,0);Bw.x=Math.max(Bw.x,Bp.mGraphWidth);}else{Bw.y=Math.min(Bw.y,0);Bv.y=Math.max(Bv.y,Bp.mGraphHeight);}}if(this.mUseDepth){if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){Bv.swapPoints(Bw);}Bo.push(Bw.Shifted(this.mDepthOffset));}Bo.push(Bw);Bo.push(Bv);var Br=new Be.TripleId({ObjectId:Bq,SeriesId:0,GroupId:0}),Bs;if(this.mTripleId.mSeriesId>0){Bs=this.mpManager.GetGraphObject(Br,false);}if(!Bs){Bs=new Be.GraphCollectionObject({TripleId:Br,GraphObjectManager:this,CollectionType:t.CT_LINE});this.mpManager.AddToMap(Bs);}var Bz=new Be.PolyLineObject({TripleId:Br,GraphObjectManager:this,PolyLine:Bo,GraphCollectionObject:Bs});Bs.AddGraphObject(Bz);Bx.push(Bz);}function AR(){this.mTicks.splice(0,this.mTicks.length);var Bo=AE.computeTicksForAxis(this);this.mMaxTick=Bo.mMaxTick;this.mMinTick=Bo.mMinTick;this.mTicks=Bo.mTicks;this.mStep=Bo.mStep;}function BU(Bs){var Br,Bo,Bq,Bp;Br=0;Bo=this.mTicks.length+(this.mOptions.mShowMinLabel?1:0)+(this.mOptions.mShowMaxLabel?1:0);for(Bq=0;Bq<Bo;++Bq){Bp=this.mGraphObjectList[Bq+this.mLabelStartIndex];Bp.GetBoundingRectEx(Bn);if(Bs){Br=(Br<Bn.width)?Bn.width:Br;}else{Br=(Br<Bn.height)?Bn.height:Br;}}return Br;}function Ad(Bu,Bs,Bw){var Bp,Bo,Bv,Bt,Br=true,Bq=this.mLabelArea;Bp=this.mGraphObjectList[Bu];if(!!Bp===false){return ;}if(this.mUseDepth){Bo=new Be.Point2D();this.GetLabelOffset(Bs,Bo);Bv=Bo.x;Bt=Bo.y;}else{Bv=Bt=0;}if(R===null){R=new Be.Point2D();}else{R.Reset(0,0);}if(F===null){F=new Be.Point2D();}else{F.Reset(1,0);}switch(Bs){case U.ALL_BOTTOM:case U.ALL_BOTTOM_TOP:R.x=this.ValueToPosition(Bw)+Bv;R.y=Bq.y+Bq.height;F.x=0;F.y=1;break;case U.ALL_TOP:R.x=this.ValueToPosition(Bw)+Bv;R.y=Bq.y;F.x=0;F.y=-1;break;case U.ALL_LEFT:case U.ALL_LEFT_RIGHT:R.x=Bq.x;R.y=this.ValueToPosition(Bw)+Bt;F.x=-1;F.y=0;break;case U.ALL_RIGHT:R.x=Bq.x+Bq.width;R.y=this.ValueToPosition(Bw)+Bt;F.x=1;F.y=0;break;default:Br=false;break;}if(Br){this.MoveLabel(Bp,R,F);}}function Bg(){var Bt,Bw=[],Bp,Bx,Br,Bs;this.GetTicks(Bw);if(Bw.length===0){return ;}Bp=new Be.Rect2D({Rect2D:this.mLabelArea});if(this.mIsStagger){Br=BU.call(this,this.IsVerticalAxis());if(this.IsVerticalAxis()){Bp.x-=Br;Bp.width+=Br*2;}else{Bp.x-=Br;Bp.height+=Br*2;}}else{var Bq,Bo,Bv=3,By=this.mGraphObjectList,Bu=By.length;if(this.hasLabelCreated){Bo=this.IsVerticalAxis()?this.mLabelArea.height:this.mLabelArea.width;Bo-=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ba.kEndLabelToChart)+4;Bq=Bo>Bv;if(Bq===false){for(Bt=0;Bt<Bu;Bt++){By[Bt].mIsShown=false;}return ;}}}Bx=new Be.Rect2D({Rect2D:this.mLabelArea});Bs=Bw.length;for(Bt=0;Bt<Bs;++Bt){this.mLabelArea=(Bt&1)===0?Bx:Bp;Ad.call(this,Bt+this.mLabelStartIndex,this.mAxisInfo.mAxisLabelsLocation,Bw[Bt]);}this.HideOverlappedLabels(this.mLabelStartIndex,this.mLabelStartIndex+Bw.length);if(this.HasLabelsOnBothSides()){for(Bt=0;Bt<Bs;++Bt){this.mLabelArea=(Bt&1)===0?Bx:Bp;Ad.call(this,Bt+Bs+this.mLabelStartIndex,this.IsVerticalAxis()?U.ALL_RIGHT:U.ALL_TOP,Bw[Bt]);}this.HideOverlappedLabels(this.mLabelStartIndex+Bs,this.mLabelStartIndex+2*Bs);}Bl.call(this);}function BO(Bp,Bv){var Bx,Bo=this.mChartContextPtr,Bt=Bo.mIsGraphMatrix,Bu=Bp+(S.call(this)||Bt?1:0),Bq=false,By=this.mLabelList,Bs=By.length,Bw=Bo.GetGraphMatrixContext().getPadding(Ba.kLabelToChart),Br;for(Br=Bu;Br<Bs;Br++){Bx=By[Br];if(Al.call(this,Bx,Bw)){Bq=true;break;}}if(!Bt){return{Start:Bu,PaddingPossible:Bq};}if(this.mIsPercent){return{Start:Bv-1,PaddingPossible:Bq};}if(Bq){return{Start:Br,PaddingPossible:Bq};}return{Start:Bu,PaddingPossible:Bq};}function A1(){var Bv=0,Bu=0,Bw,Bo=this.mChartContextPtr,Bs=Bo.GetGraphMatrixContext(),Bq=this.mOptions,Bp=this.mAxisInfo,Bt=this.mDeviceDataArea,Br;if(this.mLabelStartIndex>=this.mGraphObjectList.length){return{LowMargin:Bv,HighMargin:Bu};}if(Bq.mUseCustomMinMax){return{LowMargin:Bv,HighMargin:Bu};}if(this.mUseDepth){this.ReserveDepthAxisLine(Bt,false,this.mTripleId.mObjectId!==A8.DssGraphX1Body);}O.Reset(0,0,0,0);Bw=this.mLabelList[this.mLabelStartIndex];Bw.GetBoundingRectEx(O);Br=this.ValueToPosition(Bw.mNumber);if(Bp.mAxisDrawInReverse){Bu=this.IsVerticalAxis()?O.height/2-(Br-Bt.y):O.width/2-(Bt.x+Bt.width-Br);Bu=(Bu<0)?0:Bu;}else{if(Bo.mIsGraphMatrix){if(this.mIsPercent&&this.mMinTick===-1){Bv=this.IsVerticalAxis()?O.height/2-(Bt.y+Bt.height-Br):O.width/2-(Br-Bt.x);Bv+=Bs.getPadding(Ba.kLabelToChart);}else{Bv=0;}Bv=Math.max(Bv,0);}else{Bv=this.IsVerticalAxis()?O.height/2-(Bt.y+Bt.height-Br):O.width/2-(Br-Bt.x);Bv=(Bv<0)?0:Bv;}}O.Reset(0,0,0,0);Bw=this.mLabelList[this.mLabelList.length-1];Bw.GetBoundingRectEx(O);Br=this.ValueToPosition(Bw.mNumber);if(!Bp.mAxisDrawInReverse){Bu=this.IsVerticalAxis()?O.height/2-(Br-Bt.y):O.width/2-(Bt.x+Bt.width-Br);if(Bo.mIsGraphMatrix){if(this.mIsPercent&&this.mMaxTick===1){Bu+=Bs.getPadding(Ba.kLabelToChart);}else{Bu=0;}}Bu=(Bu<0)?0:Bu;}else{Bv=this.IsVerticalAxis()?O.height/2-(Bt.y+Bt.height-Br):O.width/2-(Br-Bt.x);Bv=(Bv<0)?0:Bv;}if(!this.mUseDepth){return{LowMargin:Bv,HighMargin:Bu};}var Bx=this.getDepthMargin(0,0);Bv=(Bv<Bx.lowMargin)?0:Bv-Bx.lowMargin;Bu=(Bu<Bx.highMargin)?0:Bu-Bx.highMargin;return{LowMargin:Bv,HighMargin:Bu};}function Al(Bp,Br){var Bq=this.mChartContextPtr,Bo=Bp.GetBoundingRect(true);if(this.IsVerticalAxis()){return(Bo.y>=Br&&Bo.y+Bo.height+Br<=Bq.mGraphHeight);}return(Bo.x>=Br&&Bo.x+Bo.width+Br<=Bq.mGraphWidth);}function d(Br){var Bq=this.mChartContextPtr;if(Br.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Br.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Br.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<AI){var Bp=Bq.mIsGraphMatrix;if(this.mMinimum<-AI||this.mMinimum>AI){var Bo=Math.abs(this.mMinimum)*0.5;if(Bp===false){this.mMaximum=this.mMaximum+Bo;this.mMinimum=this.mMinimum-Bo;}else{if(this.mMaximum>0){this.mMinimum=0;}else{this.mMaximum=0;}}}else{if(Bp===false||Bp&&this.mMinimum!==this.mMaximum){this.mMinimum=-6;this.mMaximum=6;}}}}mstrmojo.chart.ValueAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.ValueAxis",mLargerGridInterval:false,mIsPercent:false,mMinimum:-1,mMaximum:-1,mMaxTick:-1,mMinTick:-1,mStep:-1,mLabelStartIndex:0,mTicks:null,mLabelSpan:0,mIsStagger:false,mNumberFormat:null,mLabelArea:null,mGraphMajorType:b.GMT_CATEGORY,mLabelObjectId:null,mIsMaxZoom:false,mPrimaryMetrics:-1,mHighTicksToLabel:null,mLowTicksToLabel:null,mIsTrimmedWithPadding:false,mCondenseLabels:null,init:function Bh(Bt){Bt.AxisLabelsLocation=U.ALL_LEFT;this._super(Bt);this.mOptions={mUseLogarithmicScale:false,mAlwaysIncludeZero:true,mDrawFromZero:true,mUseMinValue:false,mUseMaxValue:false,mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mDrawSecondCustomLine:false,mUseSmartScaleBreak:false,mOffScaleType:As.DssGraphOffScaleHide,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mAxisSecondCustomValue:0,mUseCustomMinMax:false};var Bx,Bp=this.mChartContextPtr,Bv=this.mTripleId.mObjectId;this.mTicks=[];this.mHighTicksToLabel={};this.mLowTicksToLabel={};this.mLargerGridInterval=Bt.LargerGridInterval;this.mIsPercent=Bt.IsPercent;this.mMinimum=Math.min(Bt.Max,Bt.Min);this.mMaximum=Math.max(Bt.Max,Bt.Min);this.mLabelStartIndex=0;this.mIsStagger=false;this.mLabelObjectId=null;this.mIsMaxZoom=false;if(Bt.IsShown!==null){this.mIsShown=Bt.IsShown;}if(Bp.mIsTimeSeriesChart){this.mIsShown=true;}if(Bp.mIsUniformAxisMode){this.mIsShown=!Bp.isUADataAreaOutput();}if(this.mIsUniformAxis||Bp.mIsGraphMatrix===false){this.mNumberFormat=new Be.ChartAdvFormat({});}else{this.mNumberFormat=Be.dNF;}if(Bt.PrimaryMetricIndex!==null){this.mPrimaryMetrics=Bt.PrimaryMetricIndex;}else{this.mPrimaryMetrics=[];}if(this.mDeviceDataArea===null){this.mDeviceDataArea=new Be.Rect2D();this.mDeviceDataArea.width=this.mDeviceDataArea.height=-1;}this.mGraphMajorType=Bp.GetGraphMajorType();if(this.mIsUniformAxis===false){if(this.mGraphMajorType===b.GMT_HISTOGRAM){this.mIsShown=this.mIsShown||(this.mTripleId.mObjectId===A8.DssGraphY1Body);if(this.mTripleId.mObjectId===A8.DssGraphX1Body){this.mMaximum+=(this.mMinimum===this.mMaximum)?10:(this.mMaximum-this.mMinimum)*0.01;}}}var Bq=this.mAxisInfo,Br=this.mOptions,Bs=Bp.GetGraphMatrixContext(),Bw=Bs.AxisLayout;if(Bt.AxisDirection===h.AD_Y){if(Bv!==A8.DssGraphY1Body){Bq.mAxisLabelsLocation=U.ALL_RIGHT;}else{if(Bp.IsBubbleChart()||Bp.IsScatterChart()){var Bu=4;if(Bw&Bu){Bq.mAxisLabelsLocation=U.ALL_RIGHT;}}}}else{if(Bt.AxisDirection===h.AD_X){if(Bv===A8.DssGraphY1Body||Bv===A8.DssGraphX1Body){Bq.mAxisLabelsLocation=U.ALL_BOTTOM;if(Bp.IsBubbleChart()||Bp.IsScatterChart()){var Bo=8;if(Bw&Bo){Bq.mAxisLabelsLocation=U.ALL_TOP;}}}else{Bq.mAxisLabelsLocation=U.ALL_TOP;}}}this.hLoadProperties();d.call(this,Br);AR.call(this);if(Br.mUseLogarithmicScale&&Bp.IsStackedChart()){this.mMaximum=Br.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Br.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var By=AE.computeTicksForLogScale(this);this.mMaxTick=By.mMaxTick;this.mMinTick=By.mMinTick;this.mTicks=By.mTicks;this.mStep=By.mStep;}Az.call(this);},IsBaseAtZero:function Bj(){var Bo=this.mOptions;return Bo.mDrawFromZero&&!Bo.mUseLogarithmicScale;},hLoadProperties:function BA(){var Bp=this.mChartContextPtr,Bz=Bp.mIsGraphMatrix,Bv=Bp.GetGraphMatrixContext(),Bs=this.mOptions,Bx,B0;AQ.tripleId.reset(x,this.mTripleId.mObjectId);if(Bz){var Bu=Bp.hasBarAreaInComb()||Bp.IsBarChart()||Bp.IsAreaChart()||Bp.IsPercentChart()||(Bp.IsStackedChart()&&this.mMaximum*this.mMinimum<0);Bs.mDrawFromZero=Bu;Bs.mAlwaysIncludeZero=Bu;if(Bv.isCombinationChart()){var Bw=Ag.call(this);Bs.mAlwaysIncludeZero=Bs.mAlwaysIncludeZero||Bw.Include;Bs.mDrawFromZero=Bs.mDrawFromZero||Bw.DrawFromZero;}if(this.mLabelSpan===0){this.mLabelSpan=Bv.getPadding(Ba.kBetweenLabels);}var B1=Bp.getUniformAxisInformation(this.mTripleId.mObjectId);if(B1.CustomScale){Bs.mUseCustomMinMax=B1.CustomScale;Bs.mUseMaxValue=!B1.AutoMax;Bs.mUseMinValue=!B1.AutoMin;Bs.mAxisMaxValue=B1.Max;Bs.mAxisMinValue=B1.Min;}var Br=this.mDatasetPtr||Bp.mDataset,Bo=Bp.getAxisKeyFromObjectId(this.mTripleId.mObjectId);if(Bo==="Z"){return ;}var Bq=Br.getAxisOriginFormat(Bo);Bs.mDrawCustomLine=Bq.show||false;Bs.mAxisCustomValue=Bq.number||0;Bs.mUseLogarithmicScale=Br.isLogScaleAxis(Bo);if(Bs.mUseLogarithmicScale){Bs.mAlwaysIncludeZero=false;Bs.mDrawFromZero=false;}}else{Bx=Bp.GetProperty(A6.DssGraph2ExcludeZero,x);if(Bx){Bs.mAlwaysIncludeZero=Bx!==false;}if(Bp.mIsTimeSeriesChart){Bs.mShowMinLabel=false;}else{Bx=Bp.GetProperty(A6.DssGraph2ScaleEndMin,x);if(Bx){Bs.mShowMinLabel=Bx!==false;}}Bx=Bp.GetProperty(A6.DssGraph2ScaleEndMax,x);if(Bx){Bs.mShowMaxLabel=Bx!==false;}if(Bp.mImageUsage===0){Bx=Bp.GetProperty(A6.DssGraph2LogScale,x);if(!this.mIsPercent&&Bx){Bs.mUseLogarithmicScale=Bx!==false;}Bx=Bp.GetProperty(A6.DssGraph2ScaleUseMin,x);if(Bx){Bs.mUseMinValue=Bx!==false;}Bx=Bp.GetProperty(A6.DssGraph2ScaleUseMax,x);if(Bx){Bs.mUseMaxValue=Bx!==false;}Bx=Bp.GetProperty(A7.DssGraphOffScaleType,x);if(Bx){Bs.mOffScaleType=Bx;}Bx=Bp.GetProperty(A6.DssGraph2ScaleMin,x);if(Bs.mUseMinValue&&Bx){Bs.mAxisMinValue=Bx;}Bx=Bp.GetProperty(A6.DssGraph2ScaleMax,x);if(Bs.mUseMaxValue&&Bx){Bs.mAxisMaxValue=Bx;}if(Bs.mUseMinValue&&Bs.mUseMaxValue){if(Bs.mAxisMinValue>Bs.mAxisMaxValue){B0=Bs.mAxisMinValue;Bs.mAxisMinValue=Bs.mAxisMaxValue;Bs.mAxisMaxValue=B0;}else{if(Bs.mAxisMinValue===Bs.mAxisMaxValue){B0=Bs.mAxisMinValue===0?10:Math.abs(Bs.mAxisMinValue);Bs.mAxisMaxValue=Bs.mAxisMaxValue+B0*0.5;Bs.mAxisMinValue=Bs.mAxisMinValue-B0*0.5;}}}}}var By=false;if(Bz){By=w.call(this);}if(!By){Bx=Bp.GetProperty(A6.DssGraphAxisNumberFormat,x);if(Bx){Bp.ParseValueToFormat(Bx,this.mNumberFormat);}}if(this.mGraphMajorType===b.GMT_BUBBLE&&this.mTripleId.mObjectId===A8.DssGraphZBody){return ;}if(Bp.mIsGraphMatrix){var Bt=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=q.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){Bx=Bp.GetProperty(A6.DssGraphStyleMajor,Bt);if(this.mMajorGrid.mShowGridLines&&Bx){this.mMajorGrid.mGridStyle=Bx;}}return ;}if(Bp.mImageUsage===0&&!Bp.mIsGraphMatrix){Bx=Bp.GetProperty(A6.DssGraph2ScaleDirection,x);if(Bx){this.mAxisInfo.mAxisDrawInReverse=Bx!==false;}if(this.mGraphMajorType===b.GMT_GAUGE){return ;}Bx=Bp.GetProperty(A6.DssGraphAxisShowUserLine,x);if(Bx){Bs.mDrawCustomLine=Bx!==false;}Bx=Bp.GetProperty(A7.DssGraphAxisShowSecondUserLine,x);if(Bx){Bs.mDrawSecondCustomLine=Bx!==false;}Bx=Bp.GetProperty(A6.DssGraphManualMajor,x);if(Bx){this.mMajorGrid.mUseManualGrid=Bx!==false;}Bx=Bp.GetProperty(A6.DssGraphCountMajor,x);if(this.mMajorGrid.mUseManualGrid&&Bx){this.mMajorGrid.mGridInterval=Bx;}if(A0.call(this)){Bx=Bp.GetProperty(A6.DssGraphAxisStagger,x);if(Bx){this.mIsStagger=Bx!==false;}return ;}Bx=Bp.GetProperty(A6.DssGraphAxisUserLineValue,x);if(Bs.mDrawCustomLine&&Bx){Bs.mAxisCustomValue=Bx;}Bx=Bp.GetProperty(A7.DssGraphAxisSecondUserLineValue,x);if(Bs.mDrawSecondCustomLine&&Bx){Bs.mAxisSecondCustomValue=Bx;}}},GetStep:function Z(){return this.mStep;},IsLogarithmic:function Aa(){return this.mOptions.mUseLogarithmicScale;},ReserveTitleAndLabels:function Aj(Bu,Bs,Bq){var Bo,Bt,Bp;if(!this.mIsShown||!this.mChartContextPtr.mIsValueAxisShown){return ;}if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(Bu);this.mLabelStartIndex=1;}else{this.mLabelStartIndex=0;}if(this.mAxisInfo.mShowAxisLabels){this.mDeviceDataArea.ResetRect(Bu);if(this.mLabelObjectId===null){this.mLabelObjectId=Be.gAxisObjects[this.getIndex()].mLabelId;}if(J.call(this)){this.fakeMaxLabelLength=this.maxLabelLength;this.maxLabelLength=-1;this.restoreLabels(true);AK.call(this);}else{this.restoreLabels(true);this.InitObjectSet(this.mLabelObjectId,AN.GOT_AXIS_LABEL);}if(e.call(this)===false){return ;}this.GenerateTickLabels();if(Bs<1000){if(this.mUseDepth&&this.mTripleId.mObjectId===A8.DssGraphX1Body){var Br=this.TrimMarginsForDepthAxis(Bs,Bq);Bs=Br.LowMargin;Bq=Br.HighMargin;}Bp=A1.call(this);Bo=Bp.LowMargin;Bt=Bp.HighMargin;Bo=Bo>Bs+this.mLowTrim?Bo-Bs-this.mLowTrim:0;Bt=Bt>Bq+this.mHighTrim?Bt-Bq-this.mHighTrim:0;if(this.IsVerticalAxis()){Bu.y+=Bt;Bu.height-=Bt+Bo;}else{Bu.x+=Bo;Bu.width-=Bo+Bt;}if(this.mIsUniformAxis){if(Bo>0){this.mLowTrim+=Bo;}if(Bt>0){this.mHighTrim+=Bt;}}}this.hReserveLabelOrTickArea(Bu,true,false);}},CreateAxisLine:function BR(){if(this.mChartContextPtr.mIsValueAxisShown){}else{return ;}if(!this.mIsShown&&!this.mUseDepth){return ;}if(g.call(this)){this._super();}},GenerateTickLabels:function Am(){if(this.hasLabelCreated){return ;}this.mLabelList.splice(0,this.mLabelList.length);var Bq=this.mChartContextPtr.mIsGraphMatrix;Bm.call(this);if(Bq){Bf.call(this,true,0);}var Bp,Bo=this.mpAxisLabelSet.GetCollectionSize();if(this.mAxisInfo.mAxisLabelsLocation===U.ALL_LEFT_RIGHT||this.mAxisInfo.mAxisLabelsLocation===U.ALL_BOTTOM_TOP){Bm.call(this);if(Bq){Bf.call(this,false,Bo);}}Bo=this.mpAxisLabelSet.GetCollectionSize();for(Bp=0;Bp<Bo;Bp++){this.mLabelList.push(this.mpAxisLabelSet.GetObjectByIndex(Bp));}this.hasLabelCreated=true;},GetTicks:function A5(Bp){if(this.mOptions.mShowMinLabel){Bp.push(this.mMinTick);}var Bo;for(Bo=0;Bo<this.mTicks.length;++Bo){Bp.push(this.mTicks[Bo]);}if(this.mOptions.mShowMaxLabel){Bp.push(this.mMaxTick);}},hReserveLabelOrTickArea:function Ab(Bt,Bu,Bp,Bv){var Bo=this.mAxisInfo.mAxisLabelsLocation,Br,Bq;if(Bu){Bq=Bv!==undefined?Bv:BU.call(this,this.IsVerticalAxis());var Bs=this.mChartContextPtr.mpGraphMatrixContext.getPadding(Ba.kLabelToChart);Br=(Bq*(this.mIsStagger?2:1)+Be.Axis.gLabelMargin)+Bs;}else{Br=this.GetOuterTickLength();}if(Bp){Br=-Br;}if(this.IsVerticalAxis()){if(Bo===U.ALL_LEFT||Bo===U.ALL_LEFT_RIGHT){Bt.x+=Br;Bt.width-=Br;}if(Bo===U.ALL_RIGHT||Bo===U.ALL_LEFT_RIGHT){Bt.width-=Br;}}else{if(Bo===U.ALL_BOTTOM||Bo===U.ALL_BOTTOM_TOP){Bt.height-=Br;}if(Bo===U.ALL_TOP||Bo===U.ALL_BOTTOM_TOP){Bt.y+=Br;Bt.height-=Br;}}},ValueToPosition:function l(Bp,Bo){if(Bo===undefined){if(this.mOptions.mOffScaleType!==As.DssGraphOffScaleHide){Bo=false;}else{Bo=true;}}if(Bo){Bp=(Bp>this.mMaxTick)?this.mMaxTick:Bp;Bp=(Bp<this.mMinTick)?this.mMinTick:Bp;}return Math.floor(this.ValueToFloatPosition(Bp)+0.5);},ValueToPosition2:function AT(Bt,Bq,Bs){var Bp=this.mMinTick;var Bo=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bt=Bt<=0?-1:K.call(this,Bt);Bp=K.call(this,Bp);Bo=K.call(this,Bo);}var Br=this.mAxisInfo.mAxisDrawInReverse?(Bo-Bt):(Bt-Bp);return Bq+((Bs-Bq)*Br/(Bo-Bp));},ValueToFloatPosition:function Ax(Bw){var Bx=0,Bt=this.mMinTick,Bq=this.mMaxTick,Bs=this.mOptions,Bv=this.mDeviceDataArea,Br=this.mAxisInfo,Bu;if(Bs.mUseLogarithmicScale){Bw=Bw<=0?-1:K.call(this,Bw);Bt=K.call(this,Bt);Bq=K.call(this,Bq);}Bu=Br.mAxisDrawInReverse?(Bw-Bt):(Bq-Bw);if(Bq===Bt){return Bx;}if(Br.mAxisDirection===h.AD_Y){Bx=Bv.y+Bu/(Bq-Bt)*Bv.height;}else{Bx=Bv.x+Bv.width-Bu/(Bq-Bt)*Bv.width;}var Bo=n.call(this),Bp=-Bo;if(Bx>Bo){Bx=Bo;this.mIsMaxZoom=true;}else{if(Bx<Bp){Bx=Bp;this.mIsMaxZoom=true;}}return Bx;},ValueToPositionCheckLogScale:function p(Bt,Bq,Bs){var Br,Bp,Bo;Br=this.mMinTick;Bp=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bt=Bt<=0?-1:K.call(this,Bt);Br=K.call(this,Br);Bp=K.call(this,Bp);}Bo=this.mAxisInfo.mAxisDrawInReverse?(Bp-Bt):(Bt-Br);return Bq+((Bs-Bq)*Bo/(Bp-Br));},ValueToPositionCheckValue:function BX(Bv,Bs,Bu){var Bt,Bp,Br,Bo,Bq;Bt=0;Bp=0;Br=AD.call(this,Bv,Bt,Bp);Bv=Br.Value;Bt=Br.Min;Bp=Br.Max;if(!Br.Flag){return{Flag:false};}Bo=this.mAxisInfo.mAxisDrawInReverse?(Bp-Bv):(Bv-Bt);Bq=Bs+Math.floor((Bu-Bs)*Bo/(Bp-Bt));return{Flag:true,Position:Bq};},GetValueForUnit:function Bi(){var Br=this.mAxisInfo,Bp,Bu=this.mDeviceDataArea,Bt=(this.mMinTick+this.mMaxTick)/2,Bs=0,Bo=0,Bq=AD.call(this,Bt,Bs,Bo);Bs=Bq.Min;Bo=Bq.Max;if(!this.mOptions.mUseLogarithmicScale&&Bq.Flag){if(Br.mAxisDirection===h.AD_Y){Bp=(Bo-Bs)/Bu.height;}else{Bp=(Bo-Bs)/Bu.width;}}return Bp;},GetOuterTickLength:function BE(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength/2;}return 0;},AdjustDeviceDataArea:function Ae(Bp,Bo){if(this.mIsShown&&this.mAxisInfo.mShowAxisLabels){this.hReserveLabelOrTickArea(Bp,false,Bo);}if(this.mIsShown||this.mUseDepth){this.ReserveDepthAxisLine(Bp,Bo);}},UpdateTitleAndLabelArea:function AS(Bp){var Bq=this.mChartContextPtr,Bo=this.mAxisInfo;if(!this.mIsShown||!Bq.mIsValueAxisShown){return ;}if(this.mLabelArea===null||this.mLabelArea===undefined){this.mLabelArea=new Be.Rect2D({Rect2D:Bp});}else{this.mLabelArea.ResetRect(Bp);}if(Bo.mShowAxisLabels&&X.call(this)){Bg.call(this);this.hReserveLabelOrTickArea(Bp,true,true);}if(Bo.mShowAxisTitle){this.UpdateTitleLocation(Bp);this.ReserveTitle(Bp,true);}},HideCustomPercentOverlappedLabels:function BT(){BW.visPrint("To be impl with percetn in custom scale");},HideOverlappedLabels:function Ap(Bv,Bq){var Bz,Bw,Br,B9,Bs=this.mChartContextPtr,B7=Bs.mIsGraphMatrix,Bp=this.IsVerticalAxis()?r.REC_EXP_VERTICAL:r.REC_EXP_HORIZONTAL;if(Bq-Bv<2){return ;}var CA=this.mIsPercent&&B7,CB=BO.call(this,Bv,Bq),Bu=CB.Start,B3=this.mLabelList,Bt=this.mGraphObjectList,B5=CB.PaddingPossible;Bz=Bt[Bu];Bw=Bz;if(B5===false){var B6,B8=B3.length;for(B6=0;B6<B8;B6++){if(B3[B6]){B3[B6].mIsShown=false;}}return ;}if(S.call(this)||(!this.mIsPercent&&B7)){Bw=Bt[Bv];var B1=B7?Bw:Bz;if(Bw.HasOverlapForSameRotation(Bz,this.mLabelSpan,Bp)){B1.mIsShown=false;}}var Bx,By=this.mOptions,B2=this.mGraphMajorType,B4=this.mTripleId.mObjectId,Bo=Bq;if(Bo-Bv>2&&!CA){if(By.mUseMaxValue&&By.mShowMaxLabel){Bo--;}}Bx=BC.call(this,CA,Bv,Bo,Bu,Bp);Bx=y.call(this,CA,Bv,Bo,Bu,Bx);B.call(this,Bv,Bq,Bu,Bx,Bp);AH.call(this,Bv);if(Bz.mIsShown){var B0=Bs.GetGraphMatrixContext().getPadding(Ba.kEndLabelToChart);Bz.mIsShown=Al.call(this,Bz,B0);}if((B2===b.GMT_POLAR&&B4===A8.DssGraphX1Body)||(B2===b.GMT_RADAR&&B4===A8.DssGraphO1Body)){Br=((Bq-1-Bu)%Bx);B9=Bt[Bq-1-Br];if(B9.HasOverlapForSameRotation(Bw)){B9.mIsShown=false;}}if(B5){AV.call(this,Bq,true);AV.call(this,Bq,false);}this.mLabelInterval=Bx;},ValueToBubbleSize:function D(Bo,Bu){var Bs,Bw,Br,Bt,Bv,Bq,Bp=this.mChartContextPtr;Bu=(Bu>this.mMaxTick)?this.mMaxTick:Bu;Bu=(Bu<this.mMinTick)?this.mMinTick:Bu;Bs=this.mMinTick;Bw=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bu=Bu<=0?-1:(K.call(this,Bu));Bs=K.call(this,Bs);Bw=K.call(this,Bw);}Br=Math.min(Bp.mGraphHeight,Bp.mGraphWidth)*Bo;Bt=Br/5000;Bv=Br/1000;Bq=Bt+((Bu-Bs)*(Bv-Bt)/(Bw-Bs));return Math.ceil(Bq);},GetBottomPosition:function AW(Bo){if(this.mChartContextPtr.mIsGraphMatrix){Bo=Bo||false;if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(this.GetBaseValue(Bo),false);}}return this.ValueToPosition(this.mMinTick);},GetAxisOriginValue:function An(){var Bo=this.mOptions;if(Bo.mDrawCustomLine){return Bo.mAxisCustomValue;}return null;},GetBasePosition:function Av(Bp,Bo){Bp=Bp||false;if(Bo===null||Bo===undefined){Bo=this.GetBaseValue(Bp);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(Bo,false);}}return this.ValueToPosition(Bo);},GetMinTick:function Ar(){return this.mMinTick;},GetMaxTick:function BF(){return this.mMaxTick;},GetBaseValue:function Au(Bp){Bp=Bp||false;var Bq=this.mChartContextPtr,Bo=this.mOptions;if(Bq.mIsGraphMatrix){if(Bp&&Bo.mDrawCustomLine){if(AQ.isValidNumber(Bo.mAxisCustomValue)){return Bo.mAxisCustomValue;}}if(Bo.mUseCustomMinMax&&Bo.mDrawFromZero){return 0;}}if(this.mMaxTick<0){return this.mMaxTick;}if(!Bo.mDrawFromZero||this.mMinTick>0||this.mMaxTick<0){return this.mMinTick;}return 0;},GetPositionByValue:function Ao(Bp){var Bo=this.GetFloatPositionByValue(Bp);if(Bo===null){return Bo;}Bo=Math.floor(Bo+0.5);return Bo;},GetFloatPositionByValue:function BN(Bv){var Bp=0,Bu=0,Br,Bw,Bt;Bt=AD.call(this,Bv,Bp,Bu);Bv=Bt.Value;Bp=Bt.Min;Bu=Bt.Max;if(!Bt.Flag){return null;}var Bq=this.mAxisInfo,Bs=this.mDeviceDataArea;Br=Bq.mAxisDrawInReverse?(Bv-Bp):(Bu-Bv);Bw=0;if(Bu===Bp){return Bw;}if(Bq.mAxisDirection===h.AD_Y){Bw=Bs.y+Br*Bs.height/(Bu-Bp);}else{Bw=Bs.x+Bs.width-Br*Bs.width/(Bu-Bp);}var Bo=n.call(this);if(Bw>Bo){Bw=Bo;this.mIsMaxZoom=true;}if(Bw<-Bo){Bw=-Bo;this.mIsMaxZoom=true;}return Bw;},GenerateCustomLine:function c(Bo,Br){var Bt=this.mOptions,Bq=this.mDeviceDataArea;if(this.mChartContextPtr.mIsGraphMatrix){if(this.mPrimaryMetrics.length===0){return ;}}if(!Bt.mDrawCustomLine&&!Bt.mDrawSecondCustomLine){return ;}var Bp,Bs;if(this.mChartContextPtr.mIsGraphMatrix){Bs=Be.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bp=Bq;}else{Bs=Be.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bp=new Be.Rect2D({Rect2D:this.mDeviceDataArea});Bq.ResetRect(Bo);}if(Bt.mDrawCustomLine){k.call(this,Br,Bt.mAxisCustomValue,Bs);}if(this.mTripleId.mObjectId===A8.DssGraphY1Body&&Bt.mDrawSecondCustomLine){k.call(this,Br,Bt.mAxisSecondCustomValue,A8.DssGraphY1SecondUserLine);}Bq.ResetRect(Bp);},GenerateMapAndList:function A4(){},generateGridsByArea:function AP(Bq){if(!this.mIsShown){return ;}var Bp=this.mMajorGrid,Bo=this.mMinorGrid;if(Bq){if(Bp.mShowGridLines&&Bp.mGridStyle!==q.DssGraphGridNone){BJ.call(this);}if(Bo.mShowGridLines&&Bo.mGridStyle!==q.DssGraphGridNone){P.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){C.call(this);}}},GetNumberFormat:function A(){return this.mNumberFormat;},GetTrimWithPadding:function Aq(){return this.mIsTrimmedWithPadding;},GetPositionAtTick:function Bc(Bo){var Bp=this.GetFloatPositionByValue(Bo);if(Bp!==null){return Bp;}return 0;},GetMaxMinDataInput:function BM(){return{Max:this.mMaximum,Min:this.mMinimum};},GetMaxMinDataInputPosition:function M(){var Bo=this.GetPositionByValue(this.mMinimum),Bp=this.GetPositionByValue(this.mMaximum);return{LowBoundary:Bo,HighBoundary:Bp};},postProcessStep:function s(Bo,Bq){var Bp=Bo,Bu=this.mChartContextPtr;switch(this.mGraphMajorType){case b.GMT_HISTOGRAM:case b.GMT_POLAR:case b.GMT_SCATTER:case b.GMT_BUBBLE:case b.GMT_3D_SCATTER:case b.GMT_GANTT:break;case b.GMT_GAUGE:break;case b.GMT_CATEGORY:if(!this.IsVerticalAxis()&&!Bu.mIsGraphMatrix){this.mLargerGridInterval=true;}break;default:if(!this.IsVerticalAxis()&&!Bu.mIsGraphMatrix){this.mLargerGridInterval=true;}break;}if(this.mLargerGridInterval){if(Bq<Bp*7){Bp*=2;}else{Bp*=4;}}if(Bu.mIsGraphMatrix){var Bs=this.mChartContextPtr.GetGraphMatrixContext().GetValueAxisZoomScale(this.mTripleId.mObjectId);if(Bs>1){Bp/=Bs;}if(Math.abs(this.mMaximum)<0.3&&Math.abs(this.mMinimum)<0.3){var Bt=Math.ceil(this.mMaximum/Bp)*Bp,Br=Math.floor(this.mMinimum/Bp)*Bp;if(Bt<Br+Bp){Bp/=2;}}}return Bp;},GetLogicalCoord:function AA(Br){var Bp=0,Bt=this.mDeviceDataArea,Bq=this.mMinTick,Bo=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bq=K.call(this,Bq);Bo=K.call(this,Bo);}var Bs=this.IsVerticalAxis()?(Bo-Bq)*(Br-Bt.y)/Bt.height:(Bo-Bq)*(Bt.x+Bt.width-Br)/Bt.width;Bp=this.mAxisInfo.mAxisDrawInReverse?Bq+Bs:Bo-Bs;if(this.mOptions.mUseLogarithmicScale){Bp=Math.pow(10,Bp);}return Bp;},GetSlopeFactor:function BP(Bp){var Bo=this.IsVerticalAxis()?-this.mDeviceDataArea.height:this.mDeviceDataArea.width;if(this.mOptions.mUseLogarithmicScale){Bo/=((Math.log(this.mMaxTick)-Math.log(this.mMinTick))*Bp);}else{Bo/=(this.mMaxTick-this.mMinTick);}return this.mAxisInfo.mAxisDrawInReverse?-Bo:Bo;},GetMinMaxLogicalCoord:function A9(){return{Min:this.mMinTick,Max:this.mMaxTick};},GenerateLabelsFor3D:function BG(){},GetGridLinePositionsFor3D:function H(){},OnZooming:function N(){},getStatus:function Y(){var Bq=0,Br=2,Bp=this.getLabelRotation(),Bo=this.mLabelInterval;if(Bp===BL.Rotate90){return Br;}if(Bo===1){return Bq;}return Br;},getCondenseStatus:function j(){return this.mCondenseLabels;},checkCondense:function I(Bo){this.mCondenseLabels=Bo;return this.mCondenseLabels;},isBaseLineQualified:function AO(Bo){Bo=Bo||0;return this.mMaxTick>Bo&&this.mMinTick<Bo;},liftedFromZero:function AF(){return this.mMinTick===0&&this.mLowTrim>0;},getBandings:function Aw(){var Bq=0,Bo,Bp=this.mChartContextPtr;if(this.IsVerticalAxis()){Bo=Bp.mGraphHeight;}else{Bo=Bp.mGraphWidth;}return[{Start:Bq,Size:Bo}];},formatAsLabel:function Ah(Bp){var Bq=Be.gAxisObjects[this.getIndex()].mLabelId,Bo=new Be.NumberObject({TripleId:Bq,GraphObjectManager:this,Number:Bp,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});return Bo.mText;},getGridLinePosition:function BD(Bw){if(!!(this.mIntegrity&4)===false){return[];}if(Bw===undefined){Bw=true;}var Bp,Bt,Bz=[];var B3=this.mLabelList,Bx=B3.length;var Bs=10,Bq=this.mChartContextPtr,Bu=Bq.mGraphWidth,Br=Bq.mGraphHeight,B2=this.IsVerticalAxis();for(Bt=0;Bt<Bx;Bt++){if(B3[Bt].mIsShown){Bp=this.ValueToPosition(B3[Bt].mNumber);if(Bp<Bs||Bp+Bs>(B2?Br:Bu)){continue;}Bz.push(Bp);}}if(Bw){return Bz;}var B0,B1,Bo=[];Bx=Bz.length;if(Bx===0){return Bo;}else{var By,Bv;for(Bt=1;Bt<Bx;Bt++){Bp=0.5*(Bz[Bt-1]+Bz[Bt]);if(Bt===1){By=Math.abs(Bp-Bz[Bt-1]);}else{if(Bt===Bx-1){Bv=Math.abs(Bp-Bz[Bt-1]);}}Bo.push(Bp);}B1=!B2?Bx-1:0;B0=Bz[B1];Bp=BS.call(this,B0,false,By);if(Bp!==null){Bo.push(Bp);}B1=B2?Bx-1:0;B0=Bz[B1];Bp=BS.call(this,B0,true,Bv);if(Bp!==null){Bo.push(Bp);}}return Bo;},TrimDeviceDataArea:function BK(Bp){var Bq=this.mChartContextPtr,Bo;Bo=Bq.getUniformAxisInformation(this.mTripleId.mObjectId);if(Bo.PerCell){return this.TrimAxisPadding(Bp,false);}this.mLowTrim=Bo.Trims[0];this.mHighTrim=Bo.Trims[1];G.call(this,false,this.mHighTrim,this.mLowTrim,Bp);},refresh:function AJ(Bp,Br){if(Bp==="clipping"){var Bt=this.mChartContextPtr,Bs=this.mOptions;if(this.mMaximum!==Br.max||this.mMinimum!==Br.min){this.mMaximum=Br.max;this.mMinimum=Br.min;Bs.mAxisMaxValue=Br.max;Bs.mAxisMinValue=Br.min;d.call(this,this.mOptions);this.mTicks=[];this.mMaxTick=this.mMinTick=-1;this.mStep=-1;AR.call(this);if(Bs.mUseLogarithmicScale&&Bt.IsStackedChart()){this.mMaximum=Bs.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Bs.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var Bo=AE.computeTicksForLogScale(this);this.mMaxTick=Bo.mMaxTick;this.mMinTick=Bo.mMinTick;this.mTicks=Bo.mTicks;this.mStep=Bo.mStep;}Az.call(this);}var Bq={x:0,y:0,width:Bt.mGraphWidth,height:Bt.mGraphHeight};this.TrimAxisPadding(Bq,false);}},TrimAxisPadding:function o(Bs,Br){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Bq,Bo,Bp,Bt,Bu=this.mOptions.mUseCustomMinMax;this.mLowTrim=this.mHighTrim=0;Bq=L.call(this,Bu);Bo=Bq.LowPadding;Bp=Bq.HighPadding;Bt=this.mAxisInfo.mAxisDirection===h.AD_X?Bs.width:Bs.height;Bt-=(Bp+Bo);Bq=W.call(this,Br,Bt,Bp,Bo);Bo=Bq.LowPadding;Bp=Bq.HighPadding;G.call(this,Br,Bp,Bo,Bs);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GridMap","TextObject","ChartContext","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixDataLabelPosition");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumShapeType");var I=mstrmojo.chart,G=I.ChartConstants,D=I.model,E=D.enums,M=I.enums,H=E.EnumDSSGraphMarkerShape,J=M.EnumGraphMatrixDataLabelPosition,C=E.EnumShapeType,L={};function A(){var U=this.ChartContext,g=U.IsPieChart(),c=(U.IsBubbleChart()||U.IsScatterChart()),a=this.SinglePointObjects.length,Y,d=new I.Rect2D(),b,f=this.GridMap,X=this.PolyLineObjects,R=this.PolygonObjects,V=this.RectangleObjects,e=this.DataAreaFrame,W=this.CirclePieObjects;for(Y=0;Y<a;++Y){d.Reset(0,0,0,0);b=this.SinglePointObjects[Y].GetBoundingRect();if(U.RectangleIntersection(b,e,d)){f.UpdateMatrixRect(d);}}a=X.length;for(Y=0;Y<a;++Y){f.UpdateMatrixPolyLine(X[Y]);}a=R.length;var T=document.createElement("canvas");T.width=this.ChartContext.mGraphWidth;T.height=this.ChartContext.mGraphHeight;for(Y=0;Y<a;++Y){f.UpdateMatrixPolygonWithCanvas(R[Y],T);}a=V.length;for(Y=0;Y<a;++Y){d.Reset(0,0,0,0);if(U.RectangleIntersection(V[Y],e,d)){f.UpdateMatrixRect(d);if(c){f.UpdateMatrixOccupyObject(d,V[Y]);}}}a=W.length;for(Y=0;Y<a;++Y){var Q=W[Y].mCenter,Z=W[Y].mRadius,S=new I.Rect2D({x:Q.x-Z,y:Q.y-Z,height:Z*2,width:Z*2});f.UpdateMatrixCircle(Q,Z,true);if(g){f.UpdateMatrixOccupyCircleObject(S,Q,Z);}}}function K(S,b){var R=this.ChartContext,Y=R.IsLineChart(),T=R.IsAreaChart(),Z=(R.IsBubbleChart()||R.IsScatterChart()),a=false,V=R.GetGraphMatrixContext(),X=S,W,U,Q=b.HostMarkerPoint;W=V.mMarkerShape;if(W===H.DssGraphMarkerShapeCircle||W===H.DssGraphMarkerShapeRectangle||W===H.DssGraphMarkerShapeSquare){a=true;}if((Y&&!a)||T){if(S===J._BOTTOM){X=J._TOP;}else{if(S===J._TOP){X=J._BOTTOM;}}}else{if(Z){U=new I.Rect2D({x:0,y:0,width:R.mGraphWidth,height:R.mGraphHeight});if(S===J._BOTTOM){if(Q.y<=U.height/2){X=J._TOP;}else{X=J._BOTTOM;}}else{if(S===J._TOP){if(Q.y<=U.height/2){X=J._BOTTOM;}else{X=J._TOP;}}}}}return X;}function B(Y,X,Q){var R=Y.HostMarkerPoint,V=Y.CenterXOffset,S=Y.CenterYOffset,U=R.x,T=R.y,W=Y.Label.GetBoundingRect(true);switch(X){case J._BOTTOM:T+=S+Q+W.height*0.5;break;case J._TOP:T-=S+Q+W.height*0.5;break;case J._LEFT:U-=V+Q+W.width*0.5;break;case J._RIGHT:U+=V+Q+W.width*0.5;break;default:break;}Y.Label.MoveToCenter(U,T);}function F(Q,R,S){if(Q.x+Q.width+S<=R.x||Q.x>=R.x+R.width+S){return true;}return(Q.y+Q.height+S<=R.y||Q.y>=R.y+R.height+S);}mstrmojo.chart.DataLabelManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.DataLabelManager",GridMap:null,DataAreaFrame:null,ChartContext:null,seriesOptions:[],SinglePointObjects:[],PolygonObjects:[],PolyLineObjects:[],RectangleObjects:[],CirclePieObjects:[],init:function N(R){var T=this.ChartContext,Q,S;if(R&&R.DataArea){this.DataAreaFrame=R.DataArea;L.height=2;L.width=2;if(T!==null&&T!==undefined){Q=T.GetGraphMatrixContext();S=Q.getPadding(G.kDataLabel);}this.GridMap=new I.GridMap({Rect:this.DataAreaFrame,Unit:L,dataLabelPadding:S});}this.allowOverlap=(T&&T.allowOverlapBetweenDatalabels())||false;this.SinglePointObjects=[];this.PolygonObjects=[];this.PolyLineObjects=[];this.RectangleObjects=[];this.CirclePieObjects=[];this.seriesOptions=[];},PlaceDataLabels:function P(h,n,Q){var Y=false,a=this.ChartContext,x=a.GetGraphMatrixContext(),d=a.IsLineChart(),V=a.IsAreaChart(),W=a.IsPieChart(),f=(a.IsBubbleChart()||a.IsScatterChart()),AA=x.isCombinationChart(),y,w,t,r,X,q,z,Z,o=new I.Rect2D(),U,T,u,c,S,g,l,e,s,b=x.getPadding(G.kDataLabel);this.allowOverlap=(a&&a.allowOverlapBetweenDatalabels())||false;this.GridMap.populate();s=this.GridMap;Z=x.mMarkerShape;Q=Q||!(a.isCombinationChart()||a.IsDualAxis());if(Z===H.DssGraphMarkerShapeCircle||Z===H.DssGraphMarkerShapeRectangle||Z===H.DssGraphMarkerShapeSquare){Y=true;}A.call(this);y=h.length;for(w=0;w<y;++w){var R=h[w],p=R.isValid;if(!p){continue;}if(AA){T=R.SeriesId;u=R.SeriesInfo;c=this.seriesOptions[u];if(c){S=c.mRealSereisType;if(S===C._LINE||S===C._GENERIC){d=true;}else{if(S===C._CIRCLE||S===C._SQUARE||S===C._RECTANGLE){d=true;Y=true;}else{if(S===C._AREA){V=true;}else{if(S===C._PIE){W=true;}}}}}}z=this.allowOverlap;for(t=J._BOTTOM;t<=J._RIGHT;++t){if(W&&t>0){break;}X=J._BOTTOM;if(!W){X=K.call(this,t,R);B.call(this,R,X,b);}U=R.Label.GetBoundingRectNoRotation(true);q=this.DataAreaFrame;if(this.allowOverlap===false){z=s.IsFitPaddingWithBorder(U,q);if(!z){continue;}if(d&&Y){z=s.IsAccomdatableConsiderLocation(U,X);}else{if((d&&!W)||V){z=s.IsAccomdatableConsiderLabelPaddingOnly(U,true);}else{if(f){z=s.IsAccomdatableConsiderAccuDistPaddingRect(U);}else{if(W){z=s.IsAccomdatableConsiderAccuDistPaddingCircle(R.HostMarkerPoint,R.HostMarkerBound.width/2,U);}}}}if(!z){continue;}g=(n!==undefined&&n!==null)?n.length:0;for(r=0;r<g;++r){l=n[r];if(l.mIsShown){e=l.GetBoundingRect(true);z=F.call(this,U,e,b);if(!z){break;}}}}if(z){R.display=true;R.DataLabelLocation=X;o.Reset(0,0,0,0);if(a.RectangleIntersection(U,this.DataAreaFrame,o)){s.UpdateMatrixDataLabelMarker(true,o);if(f||W){s.UpdateMatrixOccupyObject(o,U);}}R.Label.mIsShown=true;if(n!==undefined&&n!==null){n.push(R.Label);}break;}}if(!z){R.Label.mIsShown=false;}}if(Q){this.GridMap.destroy();}return true;},UpdateMatrixDataLabel:function O(Q){return this.GridMap.UpdateMatrixDataLabelMarker(true,Q);}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Axis","TripleId","Rect2D","CategoryAxisInfo","ChartConstants","StraightLineObject","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumCategoryAxisOidItem","EnumCategoryLabelStyle","EnumRectCompare","EnumChartStyle","EnumImageUsage","EnumRectExpandDirection","EnumGraphMatrixMajorGraphType","EnumLabelLevelOption");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType");var Au=mstrmojo.chart,Al=Au.ChartConstants,Q=Au.enums,A9=Q.EnumAnchorPoint,Ao=Q.EnumGraphMajorType,g=Q.EnumAxisLabelsLocation,Ay=Q.EnumAxisDirection,Y=Q.EnumGraphObjectType,c=Q.EnumCategoryAxisOidItem,G=Q.EnumCategoryLabelStyle,AL=Q.EnumImageUsage,Av=Q.EnumLabelLevelOption,AM=Q.EnumChartStyle,Ah=Q.EnumRectCompare,AR=Au.gNullGroupId,AT=Au.gNullSeriesId;var Aj=mstrmojo.chart.model,AS=Aj.enums,BA=AS.EnumDSSGraphType,BF=AS.EnumDSSGraphProperty,BG=AS.EnumDSSGraphObject,J=AS.EnumDSSGraphFontRotation,BR=AS.EnumDSSGraphGridLineType,Af=0,BB=1,BJ=2,C=3;var y=new Au.Point2D(),Aa=new Au.Point2D(),BM=new Au.Rect2D(),Az=new Au.Rect2D(),H=new Au.Rect2D(),w=new Au.Rect2D(),Ad=new Au.Rect2D();function h(BT,BS){if(BS===undefined){BS=-3;}switch(this.mTripleId.mObjectId){case BG.DssGraphO1Body:return new Au.TripleId({ObjectId:BG.DssGraph2DO1Label,GroupId:BT,SeriesId:BS});case BG.DssGraphO2Body:return new Au.TripleId({ObjectId:BG.DssGraph2DO2Label,GroupId:BT,SeriesId:BS});default:return new Au.TripleId({ObjectId:BG.DssGraph2DO1Label,GroupId:BT,SeriesId:BS});}}function u(BU,BX,BT){var BS=BX||0,BW=BU||0,BV=(this.mAxisInfo.mAxisDirection===Ay.AD_X)?BT.width:BT.height;if(BS<0){BS=0;}if(BW<0){BW=0;}if(BV<=0||BV<BS+BW){return ;}BV-=BS+BW;this.mLowTrim=BS;this.mHighTrim=BW;if(this.mAxisInfo.mAxisDirection===Ay.AD_X){BT.x+=BS;BT.width=BV;}if(this.mAxisInfo.mAxisDirection===Ay.AD_Y){BT.y+=BW;BT.height=BV;}}function AO(BT){var BU,BV=this.mLabelList,BS=BV.length;for(BU=0;BU<BS;BU++){if(BV[BU]){BV[BU].Restore({LineCount:BT});}}}function j(BS,BW){var BV=this.mChartContextPtr,BT=BV.GetGraphMatrixContext(),BW=BW||BT.getPadding(Al.kLabelToChart),BU=BS.GetBoundingRect(true);return(BU.y>=BW&&BU.y+BU.height+BW<=BV.mGraphHeight);}function I(){var BV=this.mChartContextPtr,BY=BV.GetGraphMatrixContext(),BX=BV.RenderClusterShapes(),BW=this.mDatasetPtr,Ba=false,BS=BX;if(BX===false){if(BY.isCombinationChart()){var BT=BV.mUniformAxisContext.CategoryAxis,BZ=this.IsVerticalAxis()?"Y":"X";BX=BT[BZ].EnforceFringe;if(BX){return true;}var BU=BW.GetSeriesByShape().Bar;BS=Ba=BU&&BU.length>0;BS=BS||BX;}else{BS=BV.IsBarChart()&&BV.IsAdvancedBarChart(AM._bullet)===false;}}return BS;}function Ax(){if(I.call(this)){var BY=this.mChartContextPtr,BT=BY.GetGraphMatrixContext(),BU=false,BW=false;if(BT.isCombinationChart()){var BS=BY.mUniformAxisContext.CategoryAxis,BV=this.IsVerticalAxis()?"Y":"X";BU=BS[BV].EnforceCluster;if(BU){return true;}var BX=this.mDatasetPtr.GetSeriesByShape().Bar;BW=BX&&BX.length>0;return(BY.IsBarChart(AM._cluster)||(BW&&!BY.IsPercentChart()&&!BY.IsStackedChart()));}return BY.IsBarChart(AM._cluster);}return false;}function Ak(){var BV=this.mChartContextPtr;if(BV.mPartialRendering&&BV.mRenderingWindow){var BT,BS,BU=BV.mRenderingWindow;if(this.IsVerticalAxis()){BT=BU.y;BS=BT+BU.height;}else{BT=BU.x;BS=BT+BU.width;}this.screenWindow={Min:this.getGroupSlotAt(BT)-1,Max:this.getGroupSlotAt(BS)+1};}}function Ac(BY,BW){if(BY===0&&BW===0){return 0;}var BS=0,Bh,BU=this.mChartContextPtr,Ba=BU.mIsGraphMatrix,Bd=BU.GetGraphMatrixContext(),BT=this.mCategoryOption.mLabelStyle,Be=Ba?Bd.getPadding(Al.kLabelToChart):0,BZ=this.mLevelSize,BV=Ba?Bd.getPadding(Al.kCategoricalLabelToTick):this.mLevelSpace,BX,Bg=this.mGroupCount;switch(BT){case G.CLS_NORMAL:case G.CLS_MANUAL:case G.CLS_AUTOMATIC:BZ.push(Math.max(BY,BW));BS=Math.max(BY,BW)+BV;break;default:Bh=this.mpAxisLabelSet.GetFormatFont().mFontRotation;if(Bh===J.Rotate45||Bh===J.Rotate315){BY=0;var Bf=this.getGroupSize(),Bc,Bb;for(BX=0;BX<(Bg+1)/2;++BX){Bc=this.mLabelList[BX].GetBoundingRectNoRotation(true);Bb=Math.max(Bc.width,Bc.height)*Math.SQRT1_2;if(Bb>Bf){Bb+=(Bb-Bf);}BY=Math.max(BY,(Bb+0.5));}}BZ.push(BY);BZ.push(BW);BS=BY+BV+BW+this.mLevelSpace;break;}return BS+Be;}function Z(BS){var BT=this.mDeviceDataArea;return(BS>BT.x&&BS<BT.x+BT.width);}function L(BS){var BT=this.mDeviceDataArea;return(BS>BT.y&&BS<BT.y+BT.height);}function BN(){return this.mTripleId.mObjectId===BG.DssGraphO2Body;}function Ap(BS){return this.mGroupOrder.length===0?BS:this.mGroupOrder[BS];}function BI(BT,BW){var BV,BU,BS;BS=BT.length;for(BV=0;BV<BS;++BV){BU=new Au.StraightLineObject({TripleId:BW.mTripleId,GraphObjectManager:this,StartPoint:BT[BV],EndPoint:BT[BV].Shifted(this.mDepthOffset),ParentObject:BW});BW.AddGraphObject(BU);this.mManagerGraphObjectList.push(BU);}}function n(BX,BV){var BW,BU,BT,BS,BY=this.mDeviceDataArea,BZ;if(this.mChartContextPtr.mIsTimeSeriesChart){BS=this.mShownLabelList.length;for(BW=0;BW<BS;++BW){BU=this.mShownLabelList[BW].mTripleId.mGroupId;if(!this.IsVerticalAxis()){BT=new Au.Point2D({x:this.getGroupMiddlePos(BU),y:BY.GetBottomMiddle().y});BX.push(BT);BT=new Au.Point2D({x:this.getGroupMiddlePos(BU),y:BY.GetTopMiddle().y});BV.push(BT);}else{BT=new Au.Point2D({x:BY.GetLeftMiddle().x,y:this.getGroupMiddlePos(BU)});BX.push(BT);BT=new Au.Point2D({x:BY.GetRightMiddle().x,y:this.getGroupMiddlePos(BU)});BV.push(BT);}}}else{BZ=this.mGroupCount;for(BW=0;BW<BZ;++BW){if(this.mAxisCross&&BW===0){continue;}if(!this.IsVerticalAxis()){BT=new Au.Point2D({x:this.getGroupMiddlePos(BW),y:BY.y+BY.height});BX.push(BT);BT=new Au.Point2D({x:this.getGroupMiddlePos(BW),y:BY.y});BV.push(BT);}else{BT=new Au.Point2D({x:BY.x,y:this.getGroupMiddlePos(BW)});BX.push(BT);BT=new Au.Point2D({x:BY.x+BY.width,y:this.getGroupMiddlePos(BW)});BV.push(BT);}}}}function O(){var BV=this.mMajorGrid;if(!BV.mShowGridLines||(BV.mGridStyle!==BR.DssGraphGridRegular&&BV.mGridStyle!==BR.DssGraphGridBoth)){return ;}var BU=Au.gAxisObjects[this.getIndex()].mMajorId;this.InitObjectSet(BU,Y.GOT_MAJOR_GRID);var BT=[],BS=[];n.call(this,BT,BS);BI.call(this,BS,this.mpMajorGridSet);}function x(Bc,Bf){var Ba=this.mMinorGrid,Bb=this.mDeviceDataArea,BV=1,BS,BU,BY,Bd=this.mGroupCount,BZ,BX,BW,BT,Be;if(Ba.mUseManualGrid){BV=(Ba.mGridInterval);}BS=Math.floor(BV/2);BU=this.getGroupSize()/(BV+1);BY=((BV%2)===0)?BS:(BS+1);for(BZ=0;BZ<Bd;++BZ){for(BX=-BS;BX<=BY;++BX){if((BX!==0)){if(BZ===this.mGroupCount-1){if((BV%2)!==0&&BX===BY){continue;}}BW=(BU*BX+(BX>=0?0.5:-0.5));if(!this.IsVerticalAxis()){BT=this.getGroupMiddlePos(BZ)+BW;if(Z.call(this,BT)){Bc.push(new Au.Point2D({x:BT,y:Bb.y+Bb.height}));Bf.push(new Au.Point2D({x:BT,y:Bb.y}));}}else{Be=this.getGroupMiddlePos(BZ)+BW;if(L.call(this,Be)){Bc.push(new Au.Point2D({x:Bb.x,y:Be}));Bf.push(new Au.Point2D({x:Bb.x+Bb.width,y:Be}));}}}}}}function Ai(){var BU=this.mMinorGrid;if(!BU.mShowGridLines||(BU.mGridStyle!==BR.DssGraphGridRegular&&BU.mGridStyle!==BR.DssGraphGridBoth)){return ;}var BS=Au.gAxisObjects[this.getIndex()].mMinorId;this.InitObjectSet(BS,Y.GOT_MINOR_GRID);var BV=[],BT=[];x.call(this,BV,BT);BI.call(this,BT,this.mpMinorGridSet);}function p(){}function M(BS,BT){return BS;}function BH(BU,BS){var BT=Av.LLO_NORMAL;if(this.mChartContextPtr.mIsGraphMatrix){return{Option:BT,Index:BS};}return{Option:BT,Index:BS};}function AI(BU,Bd,Be){if(Be){var BY=this.mDatasetPtr,BV=Be.length,Bf=BU?BY.GetSeriesLabelIdentities(Bd):BY.GetGroupLabelIdentities(Bd),Bc=Bf.length,Ba=1,BT=[],BW=0,BZ,BX;for(BZ=0;BZ<BV;++BZ){var Bb=Be[BZ],BS=Bb.match(/ /g);if(BS){Ba=BS.length+1;}for(BX=0;BX<Ba;++BX){if(BZ<Bc){BT[BW]=Bf[BZ];}else{BT[BW]=null;}BW++;}}return BT;}return null;}function q(){var BZ=this.mChartContextPtr,BW=this.mLabelList,BS=BW.length,BU,BY=BN.call(this),BT,BX,BV;if(BZ.mImageUsage===AL.GENERAL){for(BV=0;BV<BS;BV++){BU=BW[BV];if(BU&&BU.texts){if(BU.mIsShown===false){delete BU.texts;continue;}BT=BU.mTripleId.mGroupId;BX=AI.call(this,BY,BT,BU.texts);if(BX&&BX.length){BU.IdentityMap=BX;delete BU.texts;}}}}}function An(Bf,BV){BV=BV||false;var BU=this.mChartContextPtr,BT=!this.IsVerticalAxis(),Bd,Be,BX=this.mDatasetPtr,BY=Av.LLO_NORMAL,Ba;if(BT&&this.mIsUniformAxis){var BZ=BU.getUniformAxisContext(),BS=BZ.CategoryAxis.X.Truncation;if(BS){var Bb=-1,Bc=BS.Indices,BW=BS.Texts;if(Bc&&Bc.length){Bb=Bc.indexOf(Bf);if(Bb!==-1){Bd=BW[Bb];if(Bd){return Bd;}}}}}if(BN.call(this)){Ba=BH.call(this,false,Bf);Bf=Ba.Index;BY=Ba.Option;Be=BX.GetSeriesLabel(Bf,0,BY,BV);Bd=BX.GetMergedLabel(Be,BY);if(BU.mImageUsage===AL.GENERAL&&BV){return{Text:Bd,Texts:Be};}return{Text:Bd};}Ba=BH.call(this,true,Bf);Bf=Ap.call(this,Ba.Index);BY=Ba.Option;Be=BX.GetGroupLabel(Bf,0,BY,BV);Bd=BX.GetMergedLabel(Be,BY);if(BU.mImageUsage===AL.GENERAL&&BV){return{Text:Bd,Texts:Be};}return{Text:Bd};}function r(BS){var BV=this.mChartContextPtr;if(BV.mPartialRendering){var BU=BS.mTripleId.mGroupId,BT=this.screenWindow;return BU>=BT.Min&&BU<=BT.Max;}return true;}function AA(BS){switch(this.mAxisInfo.mAxisLabelsLocation){case g.ALL_BOTTOM:case g.ALL_TOP:case g.ALL_LEFT:case g.ALL_RIGHT:return this.mAxisInfo.mAxisLabelsLocation;}if(this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP){if(BS<this.mLabelSubIndex){return g.ALL_BOTTOM;}return g.ALL_TOP;}if(BS<this.mLabelSubIndex){return g.ALL_LEFT;}return g.ALL_RIGHT;}function AQ(BS){var BT=this.HasOuterTicks(this.mMajorGrid.mGridStyle)||this.HasOuterTicks(this.mMinorGrid.mGridStyle);if(this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===g.ALL_LEFT_RIGHT){return BT;}return BT&&(BS===this.mAxisInfo.mAxisLabelsLocation);}function l(BT,BV,BS){var BU=this.mDeviceDataArea;switch(BT){case g.ALL_BOTTOM:BS.Reset(0,1);return BU.y+BU.height+BV;case g.ALL_TOP:BS.Reset(0,-1);return BU.y-BV;case g.ALL_LEFT:BS.Reset(-1,0);return BU.x-BV;case g.ALL_RIGHT:BS.Reset(1,0);return BU.x+BU.width+BV;default:return 0;}}function V(){if(this.mIsUniformAxis===false){return false;}return this.restrictWidth>=0&&this.restrictHeight>=0;}function AP(BZ,BY){var Bb=BY,BW=this.getLabelRotation(),BX=(BW===J.Rotate90),BT=V.call(this)&&BX,BV=this.mChartContextPtr.getUniformAxisContext();if(V.call(this)){if(BX){if(this.maxLabelLength===-1){var BS=this.mAxisInfo.mAxisDirection===Ay.AD_X;if(BS&&BX&&(this.resizeAction===Ah.ShrinkX||this.resizeAction===Ah.ExpandX)){Bb=1000;}else{Bb=this.calculateMaxAxisSpace(this.restrictHeight);}}else{Bb=this.maxLabelLength;}}else{Bb=this.calculateMaxAxisSpace(this.restrictWidth);BZ.rect.width=BZ.rect.height=0;BZ.mIsRectCalculated=false;}}else{var Ba=false,BU=BV.CategoryAxis.X;if(BU.Layout===C){Ba=true;}if(!this.IsVerticalAxis()){if(BX||Ba){var Bc=BV.CategoryAxis.X.LabelWidthLimit;if(Bc){Bb=Bc;BT=true;}if((BX||Ba)&&!V.call(this)){BT=true;Bb=1000;}}else{if(!this.mWordWrap){Bb=1000;}}}}return{Stringent:BT,WidthLimit:Bb};}function AN(){if(this.mPaddingOnSide===-1){var BV=this.mDatasetPtr,BX=this.mChartContextPtr;if(!BX.mIsGraphMatrix){this.mPaddingOnSide=0;}else{if(I.call(this)){var BT=1,BW=this.mGroupCount;if(Ax.call(this)===false){BT=(BW+0.5);}else{BT=BW*BV.GetClusterSeriesCount()+0.5;}var BS=0,BU=this.mDeviceDataArea;switch(this.mAxisInfo.mAxisDirection){case Ay.AD_X:BS=BU.width;break;case Ay.AD_Y:BS=BU.height;break;case Ay.AD_Z:break;}this.mPaddingOnSide=BS/BT/4;}else{this.mPaddingOnSide=0;}this.mPaddingOnSide=Math.round(this.mPaddingOnSide);}}return this.mPaddingOnSide;}function P(){var BS=0;switch(this.mAxisInfo.mAxisDirection){case Ay.AD_X:BS=this.mDeviceDataArea.width;break;case Ay.AD_Y:BS=this.mDeviceDataArea.height;break;case Ay.AD_Z:break;}return BS-2*AN.call(this);}function AF(BZ,Bb,BT){var BU,Ba,BV=this.mChartContextPtr,BW=!this.IsVerticalAxis(),BS=false;if(BW){BU=0;if(BV.mManualLayoutMode){BU=(Bb*this.getGroupSize(true)+0.5);}else{BU=Ba=Bb*this.getGroupSize(true);if(BV.mIsGraphMatrix===false){BU=Math.floor((Ba*Math.max(1,((P.call(this)/10)/Ba))-Au.Axis.gLabelMargin+0.5));if(this.mAxisCross||BV.mIsTimeSeriesChart){BU=Math.min(BU,BT);}}BU=Math.max(1,BU);}if(this.mIsUniformAxis){var BY=AP.call(this,BZ,BU);BU=BY.WidthLimit;BS=BS||BY.Stringent;}BZ.mSubTextHolder.SetLineCount(1);BZ.SetTextWidthLimit(BU,BS);}else{BU=this.mDeviceDataArea.width;if(!this.mIsUniformAxis){BU=BU/2;}else{var BX=BV.getUniformAxisContext(),Bc=BX.CategoryAxis.Y;BU=Bc.LabelWidthLimit||BU;}if(this.mIsUniformAxis){if(V.call(this)){BZ.rect.width=BZ.rect.height=0;BZ.mIsRectCalculated=false;}}BZ.SetTextWidthLimit(BU);}}function Aw(BX,BT,BU){BU=(BU!==undefined)?BU:false;var BW=this.mDeviceDataArea,BS,BV;if(this.IsVerticalAxis()){BS=BW.x+BW.width/2;BV=this.getGroupMiddlePos(BX.mGroupId,BU);}else{BS=this.getGroupMiddlePos(BX.mGroupId,BU);BV=BW.y+BW.height;}BT.MoveTo(BS,BV,A9.CENTER);}function a(BZ,BV,BY,BT){var BS,BW,BX;if(BT===undefined){if(this.maxLabelLength>0){BT=this.maxLabelLength;}else{BT=1000;}}var BU=BZ.mGroupId;BS=this.mLabelList[BU];if(BS===undefined){BX=BZ;BS=new Au.TextObject({TripleId:BX,GraphObjectManager:this,GraphCollectionObject:this.mpAxisLabelSet,hasFill:false,hasLine:false});BW=An.call(this,BX.mGroupId,true);BS.SetText(BW.Text);delete BW.Text;if(BW.Texts){BS.texts=BW.Texts;delete BW.Texts;}this.mLabelList[BU]=BS;}AF.call(this,BS,BV,BT);if(BY){Aw.call(this,BZ,BS);}return BS;}function BL(BW,BY,BX,BU){var BV=BX,BT=BU,BS;if(this.mUseDepth){BS=this.getDepthMargin(0,0);BV=BV-BS.lowMargin;BT=BT-BS.highMargin;}BV=(BV<0)?0:BV;BT=(BT<0)?0:BT;return{LowMargin:BV>BW?BV-BW:0,HighMargin:BT>BY?BT-BY:0};}function AD(Ba,BW,BT,BX,BY){var BZ,BU;w.ResetRect(BX);Ad.ResetRect(BY);if(this.mChartContextPtr.mIsGraphMatrix){var BV=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Al.kLabelToChart);var BS=0;if(this.IsVerticalAxis()){w.y-=BV;w.height+=BV;Ad.height+=BV;}else{w.x-=(BV+BS);w.width+=BV+BS;Ad.width+=BV;}}BZ=this.IsVerticalAxis()?Ad.y+Ad.height-(BT.y+BT.height):BT.x-w.x;BU=this.IsVerticalAxis()?BT.y-w.y:Ad.x+Ad.width-(BT.x+BT.width);return BL.call(this,Ba,BW,BZ,BU);}function BK(BY,BZ,BX){BX=BX||0;var BT,BV,BW,Ba,BU=this.mChartContextPtr,BS={x:0,y:0,width:BU.mGraphWidth,height:BU.mGraphHeight};if(BZ){BT=BY.x-BX;BV=BY.x+BY.width+BX;BW=BS.x;Ba=BS.x+BS.width;}else{BT=BY.y-BX;BV=BY.y+BY.height+BX;BW=BS.y;Ba=BS.y+BS.height;}return !(BT>=BW&&BV<=Ba);}function AH(Bb,BZ,BY,BU,BX){var BT=this.mChartContextPtr,BS=0,BV=1,Ba=false,BW=BT.GetGraphMatrixContext();if(Bb){switch(BY){case Af:case C:case BB:if(BZ){Ba=BW.checkPaddingBetweenLabels(BU,BX,BS,true);}else{Ba=BW.checkPaddingBetweenLabels(BU,BX,BV,true);}break;default:Ba=BW.checkPaddingBetweenLabels(BU,BX,BV,true);break;}}else{Ba=BW.checkPaddingBetweenLabels(BU,BX,BV,false);}return Ba;}function AG(BU,BT){var BS;var BV=h.call(this,BU,-3);BS=BS||a.call(this,BV,BT,true);return BS;}function AK(BV,BW,BS,Ba,BT,BY,BX){var BZ=false,BU=this.mChartContextPtr;if(!BV){BZ=BW.HasIntersection(BS);BZ=BZ||(BU.mIsGraphMatrix&&AH.call(this,Ba,BT,BY,BS,BW));}if(Ba&&!BT){BZ=BZ||(BU.mIsGraphMatrix&&BK.call(this,BW,Ba,BX));}return BZ;}function AK(BV,BW,BS,Ba,BT,BY,BX){var BZ=false,BU=this.mChartContextPtr;if(!BV){BZ=BW.HasIntersection(BS);BZ=BZ||(BU.mIsGraphMatrix&&AH.call(this,Ba,BT,BY,BS,BW));}if(Ba&&!BT){BZ=BZ||(BU.mIsGraphMatrix&&BK.call(this,BW,Ba,BX));}return BZ;}function BP(BV,Be,Bc,BY){var BX,Bb=new Au.Rect2D(),Bd,BW=true,Bg=!this.IsVerticalAxis(),BU=this.mChartContextPtr,Ba=0,BT=this.mPlotGroupCount,BZ=this.mCategoryOption.mLabelStyle,BS=this.getLabelRotation()===J.Rotate90||this.getLabelRotation()===J.Rotate270,Bf={Overlapped:false,MaxSpace:Bc};if(BU.mIsGraphMatrix){Ba=BU.GetGraphMatrixContext().getPadding(Al.kLabelToChart);}Az.Reset(0,0,0,0);for(BX=Be;BX<BT;BX+=BV){Bd=AG.call(this,BX,BV);BY.push(Bd);Bd.GetTransformedRectEx(Bb);Bf.Overlapped=AK.call(this,BW,Bb,Az,Bg,BS,BZ,Ba);if(Bf.Overlapped){Bf.MaxSpace=Bc;return Bf;}if(BW===true){BW=false;Az.ResetRect(Bb);}else{Az.ResetRect(Bb);Bc=Math.max(Bc,this.IsVerticalAxis()?Bb.width:Bb.height);Bf.MaxSpace=Bc;}}if(Be>=BV){BW=true;Az.Reset(0,0,0,0);for(BX=Be;BX>=0;BX-=BV){Bd=AG.call(this,BX,BV);if(BX!==Be){BY.unshift(Bd);}Bb=Bd.GetTransformedRect(true);Bf.Overlapped=AK.call(this,BW,Bb,Az,Bg,BS,BZ,Ba);if(Bf.Overlapped){Bf.MaxSpace=Bc;return Bf;}if(BW===true){BW=false;Az.ResetRect(Bb);}else{Az.ResetRect(Bb);Bc=Math.max(Bc,this.IsVerticalAxis()?Bb.width:Bb.height);Bf.MaxSpace=Bc;}}}Bf.Overlapped=false;return Bf;}function AC(BS,BT){if(this.IsVerticalAxis()){this.mDeviceDataArea.y+=BT;this.mDeviceDataArea.height-=BT+BS;}else{this.mDeviceDataArea.x+=BS;this.mDeviceDataArea.width-=BS+BT;}}function U(BW,BT,BU,BS,BV){if(!BW){return ;}if(this.IsVerticalAxis()){if(BU>0){BS.mIsShown=false;}if(BT>0){BV.mIsShown=false;}}else{if(BT>0){BS.mIsShown=false;}if(BU>0){BV.mIsShown=false;}}}function AX(){var BU=this.mChartContextPtr,BS=BU.getUniformAxisContext();if(BU.mIsGraphMatrix){var BT=BS.CategoryAxis.X;return !!BT.ForbideStagger===false;}return true;}function e(Be,BV,Bm,Ba,Bb,Bl,Bj,BU,Bn,BZ){var Bf,Bg,BX,Bi,Bd,BW,Bc,Bk,BT,BY,BS=[],Bh;BX={MaxSpace1:Bl,MaxSpace2:Bj,Overlapped:true};Bi=this.mPlotGroupCount-((this.mPlotGroupCount&1)===0?1:2);Bf=h.call(this,Bi);BW=a.call(this,Bf,2,true,BV*2);Bd=BW.GetBoundingRect();Bc=AD.call(this,Be,BV,Ba,BU,Bd);BT=Bc.LowMargin;BY=Bc.HighMargin;if(BT>Bn||BY>BZ){this.mDeviceDataArea=Ba;BT=Math.max(Bn,BT);BY=Math.max(BZ,BY);if(!Bm){AC.call(this,BT,BY);}BX.MaxSpace1=0;Bc=BP.call(this,2,0,Bl,BS);BX.MaxSpace1=Bc.MaxSpace;if(Bc.Overlapped){return BX;}}else{BS=BS.concat(Bb);}Bc=BP.call(this,2,1,Bj,BS);BX.MaxSpace2=Bj=Bc.MaxSpace;if(Bc.Overlapped){return BX;}Bk=Bl+this.mLevelSpace+Bj+this.mLevelSpace;if(this.HasLabelsOnBothSides()){Bk+=Bk;}if(Bk*2>(this.IsVerticalAxis()?this.mDeviceDataArea.width:this.mDeviceDataArea.height)){return BX;}BW=(this.mPlotGroupCount&1)===0?BS[BS.length-1]:BS[Math.floor(this.mPlotGroupCount/2)];U.call(this,Bm,BT,BY,BS[0],BW);Bb.splice(0,Bb.length);Bh=BS.length;for(Bg=0;Bg<Bh;++Bg){Bb.push(BS[Bg]);}BX.Overlapped=false;return BX;}function B(BS){return e.call(this,BS.LowMargin,BS.HighMargin,BS.FixedMargin,BS.BackupRect2D,BS.LabelArray,BS.MaxSpace_1,BS.MaxSpace_2,BS.FirstRect,BS.LowLabelMargin,BS.HighLabelMargin);}function BQ(BY,Bd,BV){Bd=Bd||0;var BU=this.mPlotGroupCount-1,Ba=Bd,BZ,BX=false,Bc,BW,BT=this.mCategoryOption.mLabelStyle,BS=!this.IsVerticalAxis(),Bb;if(this.mPlotGroupCount<2){return 1;}if(BS&&this.mIsUniformAxis){if(BT===BB){if(BV===1){return BT;}}if(BT===BJ){if(BV===2){return BT;}}}while(BU>Ba){BZ=Math.floor((BU+Ba+1)/2);BW=h.call(this,BZ);Bb=a.call(this,BW,BV,true);Bc=Bb.GetTransformedRect(true);if(BY.HasIntersection(Bc)){Ba=BZ;BX=true;}else{BX=false;if(BU===BZ){break;}BU=BZ;}}return BX?this.mGroupCount:Math.max(BU-Bd,BV);}function BE(BS,BU,BT){switch(BS){case g.ALL_BOTTOM:BU.height-=BT;break;case g.ALL_TOP:BU.y+=BT;BU.height-=BT;break;case g.ALL_LEFT:BU.x+=BT;BU.width-=BT;break;case g.ALL_RIGHT:BU.width-=BT;break;}}function k(BS){var BT=this.mAxisInfo.mAxisLabelsLocation;switch(BT){case g.ALL_BOTTOM:case g.ALL_TOP:case g.ALL_LEFT:case g.ALL_RIGHT:BS.push(BT);break;}if(BT===g.ALL_BOTTOM_TOP){BS.push(g.ALL_BOTTOM);BS.push(g.ALL_TOP);}else{if(BT===g.ALL_LEFT_RIGHT){BS.push(g.ALL_LEFT);BS.push(g.ALL_RIGHT);}}}function W(Bc){var Bb,BX,BV,BZ,BW=Bc.FirstLabel,BT=this.mChartContextPtr,BY=BT.mIsGraphMatrix,Bd=this.mCategoryOption.mManualSkip,BU=this.mDeviceDataArea,Be=this.mAxisInfo.mAxisDirection===Ay.AD_Y,BS=this.mCategoryOption.mLabelStyle,Ba=new Au.Rect2D({Rect2D:BU});switch(Bc.Interval){case 1:if(!this.IsVerticalAxis()&&Bc.FirstLabel.possibleTruncate()){BS=C;}else{BS=BB;}break;case 2:BX=this.getLabelRotation();Bb=(BX===J.Rotate90)||(BX===J.Rotate270);BV=true;if(BY){BV=BV&&!Be&&!Bb;if(BV){BV=AX.call(this)&&(BW.mTripleId.mGroupId===0);}}else{}if(BV){BZ=B.call(this,Bc);Bc.MaxSpace_1=BZ.MaxSpace1;Bc.MaxSpace_2=BZ.MaxSpace2;BV=BZ.Overlapped===false;}if(BV){if(BY&&this.mPlotGroupCount===2){BU.ResetRect(Ba);BS=C;Bd=2;}else{BS=BJ;}}else{BU.ResetRect(Ba);BS=G.CLS_MANUAL;Bd=2;}break;default:BS=G.CLS_MANUAL;Bd=Bc.Interval;break;}this.mCategoryOption.mManualSkip=Bd;this.mCategoryOption.mLabelStyle=BS;}function A5(BZ){var BV=this.mpAxisLabelSet;if(BV){var Be=BV.GetFormatFont();if(!!Be===false){return 1;}var Bd=this.getGroupSize(true),Bc=BZ.mGroupId,BX=this.mDatasetPtr,BU;if(BN.call(this)){BU=BX.GetSeriesLabel(Bc);}else{BU=BX.GetGroupLabel(Bc);}var BY=Be.mFontRotation,BT=this.mChartContextPtr,Ba=BT.getUniformAxisContext(),BS=Ba.CategoryAxis,Bf=Be.GetStringExtent(BU);if(BY===J.Rotate180||BY===J.Normal){var Bb=2;if(this.IsVerticalAxis()){if(Bf.Height>=Bd){Bb=Math.ceil(Bf.Height/Bd);return Math.min(Bb,this.mGroupCount);}}else{if(Bf.Width>=Bd){Bb=Math.ceil(Bf.Width/Bd);return Math.min(Bb,this.mGroupCount);}}if(this.IsVerticalAxis()===false){var BW=BS.X;if(BW&&BW.Layout===BJ){return Math.min(2,this.mGroupCount);}}}else{if(BY===J.Rotate90||BY===J.Rotate270){if(Bf.Height>=Bd){return Math.min(2,this.mGroupCount);}}}}return 1;}function A4(Bu,Bc,Bw,Bn){Bn=(Bn!==undefined)?Bn:0;var Ba,Bl,Bk,Bs=this.mChartContextPtr,Bi,BV,Bv,Br,BS,BX,BU,Be=this.mGroupCount,Bo=this.mShownLabelList,Bx=this.mLabelList,Bd=0,Bz=0,Bq,Bf,B0,B3,BT,B1,Bg,B2,Bm;this.mLevelSize.splice(0,this.mLevelSize.length);Bl=Bk=0;if(Be<1){return 0;}var Bh=Bs.getUniformAxisLabelRotateMode("x"),BZ=this.IsVerticalAxis()?"Y":"X";BT=Bh===-1;Bi=Bs.mIsGraphMatrix?Bn:0;BV=Be-1;Bi=AY.call(this,BZ,Bi,BV);if(!Bs.mManualLayoutMode||Bs.mRecalculateFrame){Bv=h.call(this,Bi);BU=A5.call(this,Bv);Br=a.call(this,Bv,BU,true);BS=Br.GetBoundingRect(true);BX=Br.GetTransformedRect(true);BU=BQ.call(this,BX,Bi,BU);H.ResetRect(this.mDeviceDataArea);var BW=this.mDeviceDataArea;while(BU<=Be){BW.ResetRect(H);Bl=0;Bk=0;if(true){Bv=h.call(this,Bi);AF.call(this,Br,BU,Bu*2);Aw.call(this,Bv,Br);BS=Br.GetBoundingRect(true);}Bl=this.IsVerticalAxis()?BS.width:BS.height;Bq=parseInt(BV/BU)*BU;Bv=h.call(this,Bq);if(this.mIsUniformAxis){Bf=a.call(this,Bv,BU,true);}else{Bf=a.call(this,Bv,BU,true,2*Bc);}B0=Bf.GetBoundingRect(true);if(this.mChartContextPtr.GetGraphType()===BA.DssGraphTypeGridChart&&BZ==="X"){Bd=0;Bz=0;this.mLowTrim=0;this.mHighTrim=0;}else{Bm=AD.call(this,Bu,Bc,BW,BS,B0);Bd=Bm.LowMargin;Bz=Bm.HighMargin;this.mLowTrim=Bd;this.mHighTrim=Bz;}if(!Bw){AC.call(this,Bd,Bz);}if(!this.IsVerticalAxis()){B1=this.getLabelRotation();Bg=(B1===J.Rotate90);if(Bg===false){Bv=h.call(this,Bi);AF.call(this,Br,BU,Bu*2);Aw.call(this,Bv,Br);BS=Br.GetBoundingRect(true);if(BK.call(this,BS,true,5)){if(BT){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mLabelInterval=-1;this.mCategoryOption.mLabelStyle=C;return 0;}else{Br.mIsShown=false;Bi++;}}}}Bo.splice(0,Bo.length);if(this.mGroupCount===1&&!this.IsVerticalAxis()){if(BW.width<BS.width){B1=this.getLabelRotation();Bg=(B1===J.Rotate90)||(B1===J.Rotate270);if(Bg){Br.mIsShown=false;Bl=Bk=0;break;}BU=2;this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;Bx.splice(0,Bx.length);this.mLabelList.push(Br);Bo.push(Br);BS=Br.GetBoundingRect();return BS.height+5;}}Bm=BP.call(this,BU,Bi,Bl,Bo);Bl=Bm.MaxSpace;if(Bm.Overlapped){++BU;}else{this.mLabelInterval=BU;if(Bo.length>=1){U.call(this,Bw,Bd,Bz,Bo[0],Bo[Bo.length-1]);if(this.mChartContextPtr.GetGraphType()===BA.DssGraphTypeGridChart&&BZ==="X"){B0=Bo[Bo.length-1].GetBoundingRect(true);if(BK.call(this,B0,true,0)){Bo.splice(Bo.length-1,1);}}}break;}}B2={Interval:BU,FirstLabel:Br,LowMargin:Bu,HighMargin:Bc,BackupRect2D:H,FirstRect:BS,FixedMargin:Bw,MaxSpace_1:Bl,MaxSpace_2:Bk,LabelArray:Bo,LowLabelMargin:Bd,HighLabelMargin:Bz};W.call(this,B2);Bl=B2.MaxSpace_1;Bk=B2.MaxSpace_2;if(Bs.mIsGraphMatrix){var Bp=[],Bb=this.mGraphObjectList,By=Bb.length,BY=Bo.length;for(B3=0;B3<BY;++B3){Bo[B3].mIsShown=true;Bp.push(Bo[B3].mTripleId.mGroupId);}var Bt,Bj;Bj=Bx.length;for(B3=0;B3<Bj;B3++){if(Bx[B3]){Bx[B3].mIsShown=false;}}Bj=Bo.length;for(B3=0;B3<Bj;B3++){Bt=Bo[B3].mTripleId.mGroupId;if(Bx[Bt]){Bx[Bt].mIsShown=true;}else{Bx[Bt]=Bo[B3];}}}else{Bx=Bx.concat(Bo);}}this.hasLabelCreated=true;Ba=Ac.call(this,Bl,Bk);return Ba;}function BD(BS){this.mDeviceDataArea.ResetRect(BS.Rect2D);this.mLevelSize.splice(0,this.mLevelSize.length);this.mShownLabelList.splice(0,this.mShownLabelList.length);return A4.call(this,BS.LowMargin,BS.HighMargin,BS.FixedMargin,BS.StartIndex);}function AY(BT,Ba,BY){var BX,BS,BU,BZ,BW=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Al.kLabelToChart);var BV=function(){BX=h.call(this,Ba);BS=A5.call(this,BX);BU=a.call(this,BX,BS,true);BZ=BU.GetBoundingRect(true);while(Ba<=BY){if((BT==="Y"&&BZ.y>=BW)||(BT==="X"&&BZ.x>0)){break;}Ba++;BX=h.call(this,Ba);BS=A5.call(this,BX);BU=a.call(this,BX,BS,true);BZ=BU.GetBoundingRect(true);}};if(BT==="Y"){BV.call(this);}else{if(this.mChartContextPtr.GetGraphType()===BA.DssGraphTypeGridChart&&BT==="X"){BV.call(this);}}return Ba;}function A6(){if(this.mLabelInterval<=1){return 0;}var BS=this.mGroupCount%this.mLabelInterval;if(BS<=0){BS=this.mLabelInterval;}return Math.ceil((BS+1)/2)-1;}function Ag(BT){var BU=[[BG.DssGraph2DO1Label,BG.DssGraph2DO2Label],[BG.DssGraphO1Major,BG.DssGraphO2Major],[BG.DssGraphO1Minor,BG.DssGraphO2Minor]],BS=1;if(this.mTripleId.mObjectId===BG.DssGraphO1Body){BS=0;}return BU[BT][BS];}function F(BU){if(BU<0){return true;}var BY=new Au.TripleId({ObjectId:Ag.call(this,c.OID_LABEL)});this.InitObjectSet(BY,Y.GOT_AXIS_LABEL);var BW=this.mpAxisLabelSet.mFormatFontPtr,BT=4+2*BW.GetStringHeight("H"),BV=this.mChartContextPtr.GetGraphMatrixContext(),BX=this.mGroupCount,BS=BV.getPadding(Al.kEndLabelToChart)*2+BT*BX+BV.getPadding(Al.kBetweenLabels)*(BX-1);return BS<BU;}function A7(BT){var BU=this.mChartContextPtr,BS={Skip:false,Space:-1};if(!BU.mIsGraphMatrix){return BS;}if(!BT){if(this.resizeAction===-1||this.maxLabelLength===-1){return BS;}this.mWordWrap=F.call(this,this.mDeviceDataArea.height);if(this.resizeAction===Ah.ShrinkX||this.resizeAction===Ah.ExpandX){BS.Skip=!this.mWordWrap;BS.Space=Ac.call(this,this.maxLabelLength,0);}}else{if(this.resizeAction===-1||this.maxLabelLength===-1){return BS;}if(this.resizeAction===Ah.ExpandY||this.resizeAction===Ah.ShrinkY){if(this.getStatus()===2){this.mWordWrap=F.call(this,this.mDeviceDataArea.height);BS.Skip=!this.mWordWrap;this.mLevelSize.splice(0,this.mLevelSize.length);BS.Space=Ac.call(this,this.maxLabelLength,0);}}}return BS;}function Ab(BT){var BW=this.mChartContextPtr;if(!BW.mIsGraphMatrix){return false;}var Bd=BW.GetGraphMatrixContext(),Bb,Bf,BX,BU=this.mPlotGroupCount,Bc=0,BS=1,Be=this.getLabelRotation()===J.Rotate90,BV=1,BZ,Ba=0,BY=0,Bg;for(BZ=0;BZ<BU;BZ+=BV){Bb=h.call(this,BZ,-3);Bf=a.call(this,Bb,BV,false);if(this.maxLabelLength===-1){Bf.Restore({Stringent:false,Restroke:true});}Bg=Bf.GetBoundingRect(true);BX=Be?Bg.height:Bg.width;if(BZ%2===0){Ba+=BX;}else{BY+=BX;}}if(BT===BS){BX=Math.max(Ba,BY)+Math.ceil(BU/2)*Bd.getPadding(Al.kBetweenLabels);}else{if(BT===Bc){BX=Ba+BY+(BU-1)*Bd.getPadding(Al.kBetweenLabels);}else{BX=Ba+BY+(BU-1)*Bd.getPadding(Al.kBetweenLabels);}}BX+=2*Bd.getPadding(Al.kLabelToChart);return BX<=this.mDeviceDataArea.width;}function o(){var BU=V.call(this),BS=this.mChartContextPtr,BV=BS.getUniformAxisContext(),Ba=this.mAxisInfo.mAxisDirection===Ay.AD_X,BT=BV.CategoryAxis.X,BX=this.mpAxisLabelSet.GetFormatFont(),BY=false;if(this.mIsUniformAxis&&Ba&&BT){var BW=BS.getUniformAxisLabelRotateMode("x");if(BW===J.Automatic){if(BT.Layout){var BZ=this.mCategoryOption;BZ.mLabelStyle=BT.Layout;if(BU){this.restoreLabels();}if(BZ.mLabelStyle===1||BZ.mLabelStyle===2){BX.mFontRotation=J.Normal;}else{BX.mFontRotation=J.Rotate90;}BY=true;}}else{BY=true;BX.mFontRotation=BW;}}if(!BY){if(BU){this.restoreLabels();if(BU&&this.maxLabelLength===-1){BX.mFontRotation=J.Normal;}}if(this.mIsUniformAxis&&Ba&&BX.mFontRotation===J.Normal){if(Ab.call(this,1)===false){BX.mFontRotation=J.Rotate90;}}}}function d(Ba,BT,Be,BZ,Bk){var BW=this.mChartContextPtr,BV={Rect2D:BT,LowMargin:Be,HighMargin:BZ,FixedMargin:Bk,StartIndex:0},Bj;Bj=BD.call(this,BV);if(BW.mIsGraphMatrix===false){return Bj;}BV={Rect2D:BT,LowMargin:Be,HighMargin:BZ,FixedMargin:Bk,StartIndex:0};var Bg,Bf=this.mCategoryOption.mLabelStyle,Bd=600,Bc=800,Bh=this.mLabelInterval;if(Ba){Bg=BW.getUniformAxisLabelRotateMode("x");if(Bf!==BJ&&Bh!==1&&this.mPlotGroupCount<=Bd){if(Bg===J.Automatic||Bg===J.Rotate90){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;}AO.call(this,1);BV.StartIndex=(Bh>=3)?A6.call(this):0;Bj=BD.call(this,BV);if(Bf===C&&Bh>=3&&BW.GetGraphType()===Y.DssGraphTypeGridChart){BV.StartIndex=A6.call(this);Bj=BD.call(this,BV);}}}else{if(Bh>1&&this.mGroupCount>1){var Bi=this.checkShownLabelCount();if(Bi>=2){}else{if(Bi===1){var BX=true,BY=A6.call(this),BU=this.mLabelList[BY],BS=this.mShownLabelList[0],Bb=BS&&BU;if(Bb){BX=BS.mTripleId.mGroupId!==BU.mTripleId.mGroupId;}if(Bb&&BX){if(j.call(this,BU)){BS.mIsShown=false;BU.mIsShown=true;this.mShownLabelList=[];this.mShownLabelList.push(BU);BX=false;}}if(BX){BV.StartIndex=A6.call(this);Bj=BD.call(this,BV);}}}}}return Bj;}function b(Ba,BX,BW){var Bb=this.mLabelList,BZ=[],BT,BV,Bd,BS,BU=V.call(this),Bc=this.mAxisInfo.mAxisDirection===Ay.AD_X,BY;BM.ResetRect(this.mDeviceDataArea);k.call(this,BZ);Bd=A7.call(this,Bc);if(Bd.Skip&&BU){if(BU){this.restoreLabels();if(this.mLowTrim!==undefined&&this.mHighTrim!==undefined){if(this.mLowTrim>=0&&this.mHighTrim>=0){AC.call(this,this.mLowTrim,this.mHighTrim);}}}return Bd.Space;}o.call(this);BT=d.call(this,Bc,BM,Ba,BX,BW);BY=BZ.length;for(BV=0;BV<BY;++BV){BS=BT;if(AQ.call(this,BZ[BV])){BS+=this.mTickLength;}BE.call(this,BZ[BV],this.mDeviceDataArea,BS);}if(this.HasLabelsOnBothSides()){BY=Bb.length;for(BV=0;BV<BY;++BV){Bb.push(Bb[BV]);}}this.mLabelSubIndex=this.mLabelList.length/(this.HasLabelsOnBothSides()?2:1);if(this.hasLabelCreated){q.call(this);}}function AW(BS){switch(this.mAxisInfo.mAxisDirection){case Ay.AD_X:switch(BS){case g.ALL_BOTTOM:if(this.mDepthDirection>0&&this.mDepthDirection<180){return true;}break;case g.ALL_TOP:if(this.mDepthDirection>=180&&this.mDepthDirection<360){return true;}break;}break;case Ay.AD_Y:switch(BS){case g.ALL_LEFT:if(!(this.mDepthDirection>=90&&this.mDepthDirection<270)){return true;}break;case g.ALL_RIGHT:if(this.mDepthDirection>=90&&this.mDepthDirection<270){return true;}break;}break;}return false;}function A2(BS,BV){var BU,BT=this.mChartContextPtr.GetGraphMatrixContext(),BW=AQ.call(this,BS)?this.mTickLength:0;if(this.mIsGraphMatrix){BW+=BT.getPadding(Al.kCategoricalLabelToTick);}else{BW+=this.mLevelSpace*BV;}for(BU=0;BU+1<BV;++BU){BW+=this.mLevelSize[BU];}return BW;}function Am(){var BX,Bf,BW,BY,Bb,BT,Bc,Bh=1,Bg=2,Ba=this.mShownLabelList,BS=Ba.length,BV=this.mChartContextPtr,BZ=BV.getUniformAxisContext(),Be=this.mIsUniformAxis,Bd=this.mCategoryOption,BU=BZ.CategoryAxis.X;y.Reset(0,0);Aa.Reset(0,0);for(BX=0;BX<BS;++BX){Bf=AA.call(this,BX);BW=Ba[BX];if(!(BW.mIsShown)){continue;}BW.mIsOnScreen=r.call(this,BW);if(!BW.mIsOnScreen){continue;}BY=this.getGroupMiddlePos(BW.mTripleId.mGroupId,true);BT=Bh;if(Bd.mLabelStyle===G.CLS_STAGGER&&!(BV.mIsTimeSeriesChart)){Bc=(BX>=this.mLabelSubIndex)?(BX-this.mLabelSubIndex):BX;if(Bc>=Math.floor((this.mLabelSubIndex+1)/2)){BT=Bg;}if(Be){if(BU.StartRow&&BU.StartRow===Bg){BT=Bg+Bh-BT;}}}Bb=A2.call(this,Bf,BT);y.x=0;y.y=1;Aa.x=BY;Aa.y=l.call(this,Bf,Bb,y);if(this.IsVerticalAxis()){Aa.swap();}if(this.mUseDepth){if(!AW.call(this,Bf)){Aa.x+=this.mDepthOffset.x;Aa.y+=this.mDepthOffset.y;}}this.MoveLabel(BW,Aa,y,0);}}function Ar(BU,BW,BS){var BT=this.mAxisCross?this.getGroupMiddlePos(BU):(this.getGroupStartPos(BU)+0.5),BV=this.mAxisCross?this.getGroupMiddlePos(BU+1):(this.getGroupStartPos(BU)+this.getGroupSize()+0.5);BW.y=this.mDeviceDataArea.y;BS.y=this.mDeviceDataArea.y;if(this.IsVerticalAxis()){BW.x=this.mDeviceDataArea.x+this.mDeviceDataArea.width;BS.x=BW.x;BW.y=BT;BS.y=BV;}else{BW.y=this.mDeviceDataArea.y;BS.y=BW.y;BW.x=BT;BS.x=BV;}}function AV(BT,Ba,BZ,BX,BU,BY){var BV=this.mChartContextPtr.getUtiliy().tripleId,BW,BS=[];BW=BV.create(BT,this.mTripleId.mSeriesId,M());this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,BZ,this.mTickLength,BX,BU,BS);this.GenerateOneLineObject(BW,BS,BY);if(this.HasTwoGridLineParts(BZ)){BS.splice(0,BS.length);this.GetOneGridLine(this.IsVerticalAxis()?g.ALL_RIGHT:g.ALL_TOP,BZ,this.mTickLength,BX,BU,BS);this.GenerateOneLineObject(BW,BS,BY);}}function At(){var BW=Au.gAxisObjects[this.getIndex()].mMajorId,BV=[],BT=[],BU,BS;n.call(this,BV,BT);this.InitObjectSet(BW,Y.GOT_MAJOR_GRID);BS=BV.length;for(BU=0;BU<BS;++BU){AV.call(this,BG.DssGraphO1Major,BU,this.mMajorGrid.mGridStyle,BV[BU],BT[BU],this.mpMajorGridSet);}}function A1(){var BT=[],BW=[],BV=Au.gAxisObjects[this.getIndex()].mMinorId,BU,BS;x.call(this,BT,BW);this.InitObjectSet(BV,Y.GOT_MINOR_GRID);BS=BT.length;for(BU=0;BU<BS;++BU){AV.call(this,BG.DssGraphO1Minor,BU,this.mMinorGrid.mGridStyle,BT[BU],BW[BU],this.mpMinorGridSet);}}function t(BS){return BS?this.mPlotGroupCount:this.mGroupCount;}function AJ(BS){return BS?this.mPlotGroupSize:this.mGroupSize;}mstrmojo.chart.CategoryAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.CategoryAxis",mLevelSpace:4,mLevelSize:null,mShownLabelList:null,mGroupOrder:null,mLabelSubIndex:0,mCategoryOption:null,mAxisCross:false,mGroupSize:-1,mPlotGroupSize:-1,mPlotGroupCount:0,mGroupCount:1,mDatasetPtr:null,mPaddingOnSide:-1,mWordWrap:true,screenWindow:null,init:function AU(BS){this._super(BS);if(this.mChartContextPtr.mIsGraphMatrix){this.mLevelSpace=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Al.kBetweenLabelLines);}this.mLevelSize=[];this.mShownLabelList=[];this.mGroupOrder=[];this.mCategoryOption={mLabelStyle:G.CLS_AUTOMATIC,mManualSkip:0};if(this.mChartContextPtr.mIsUniformAxisMode){this.mIsShown=this.mIsUniformAxis;}if(BS.AxisDirection===Ay.AD_X){this.mAxisInfo.mAxisLabelsLocation=g.ALL_BOTTOM;}if(BS.AxisDirection===Ay.AD_Y){this.mAxisInfo.mAxisLabelsLocation=g.ALL_LEFT;}this.mDatasetPtr=null;this.mWordWrap=false;this.LoadProperties();},SetDataset:function AE(BS){this.mGroupSize=-1;var BT=this.mDatasetPtr=BS;if(BT!==null){if(BN.call(this)){this.mGroupCount=BT.GetSeriesCount();}else{this.mGroupCount=BT.GetGroupCount();}this.mPlotGroupCount=this.mGroupCount;}},getSubGroupMiddlePos:function A0(BW,BV,BT,BX){if(BT<=0){return 0;}BX=BX||false;if(BT===1){return this.getGroupMiddlePos(BW);}var BS=this.getGroupSize(BX),BU=this.getGroupStartPos(BW,BX);BU+=BS/(2*BT);return BU+BV*(BS/BT);},getGroupMiddlePos:function BC(BS,BT){BT=(BT!==undefined)?BT:false;return Math.round(this.getGroupStartPos(BS,BT)+this.getGroupSize()/2);},getFloatGroupMiddlePos:function BO(BS,BT){BT=(BT!==undefined)?BT:false;return this.getGroupStartPos(BS,BT)+this.getGroupSize()/2;},getGroupStartPos:function f(BT,BU){BU=(BU!==undefined)?BU:false;var BS=0;switch(this.mAxisInfo.mAxisDirection){case Ay.AD_X:BS=this.mDeviceDataArea.x+AN.call(this);break;case Ay.AD_Y:BS=this.mDeviceDataArea.y+AN.call(this);break;}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mAxisCross){BS-=this.getGroupSize(BU)*0.5;}}else{if(this.mAxisCross){BS-=this.getGroupSize(BU)*0.5;}}return BS+this.getGroupSize(BU)*BT;},getGroupSize:function T(BT){BT=(BT!==undefined)?BT:false;var BS=AJ.call(this,BT);if(BS!==-1){return BS;}BS=0;var BU=t.call(this,BT);if(this.mDatasetPtr!==null){if(!this.mAxisCross){if(BU===0){BU=1;}BS=P.call(this)/BU;}else{if(BU>1){BS=P.call(this)/(BU-1);}else{BS=P.call(this)*2;}}}return BS;},GenerateMapAndList:function AB(){var BX,BZ,BU=this.mGraphObjectList,BW=this.mpAxisLabelSet,BV=this.mLabelList,BS;if(this.mIsShown===false){return ;}Ak.call(this);if(BV.length!==0){Am.call(this);if(this.mChartContextPtr.mIsGraphMatrix){var BT=[],BY=Au.gAxisObjects[this.getIndex()].mLabelId;for(BX=0;BX<BU.length;BX++){if(BU[BX]&&BU[BX].mTripleId.mObjectId!==BY.mObjectId){BT.push(BU[BX]);}}BU=this.mGraphObjectList=[];BW.ClearCollection();BS=BV.length;for(BX=0;BX<BS;++BX){if(BV[BX]){BU.push(BV[BX]);BW.AddGraphObject(BV[BX]);}}for(BX=0;BX<BT.length;BX++){BU.push(BT[BX]);}}else{BS=BV.length;for(BX=0;BX<BS;++BX){if(BV[BX]){BU.push(BV[BX]);BW.AddGraphObject(BV[BX]);}}}}if(this.mAxisInfo.mShowAxisTitle){BZ=this.getAdjustedTitleArea();this.UpdateTitleLocation(BZ);}},getAdjustedTitleArea:function E(){var BV=new Au.Rect2D({Rect2D:this.mDeviceDataArea}),BU,BT,BS=this.mLevelSize.length;if(this.IsVerticalAxis()){BT=g.ALL_LEFT;if(BT===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===g.ALL_LEFT_RIGHT){BV.x-=AQ.call(this,BT)?this.mTickLength:0;for(BU=0;BU<BS;++BU){BV.x-=this.mLevelSpace;BV.x-=this.mLevelSize[BU];}if(!AW.call(this,BT)){BV.x+=this.mDepthOffset.x;}}}else{BT=g.ALL_BOTTOM;if(BT===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP){BV.height+=AQ.call(this,BT)?this.mTickLength:0;for(BU=0;BU<BS;++BU){BV.height+=this.mLevelSpace;BV.height+=this.mLevelSize[BU];}if(!AW.call(this,BT)){BV.height+=this.mDepthOffset.y;}}}return BV;},generateInterlacedSection:function AZ(){var BW=new Au.TripleId({ObjectId:this.GetInterlacedGridId(),SeriesId:AT,GroupId:AR}),BT,BS=[],BU,BV=this.mGroupCount;this.InitObjectSet(BW,Y.GOT_INTERLACED_GRID);for(BT=0;BT<BV;BT+=2){if(this.mAxisCross&&BT===BV-1){continue;}BS.splice(0,BS.length);this.getInterlacedSectionPolygon(BT,BS);BU=new Au.PolygonObject({TripleId:BW,GraphObjectManager:this,Polygon:BS,GraphCollectionObject:this.mpInterlacedGridSet});this.mpInterlacedGridSet.AddGraphObject(BU);this.mManagerGraphObjectList.push(BU);}},getInterlacedSectionPolygon:function s(BX,Bb){var BY=this.mUseDepth,BV=this.mDeviceDataArea,BW=this.mDepthDirection,BS=this.mDepthOffset,Ba=new Au.Point2D(),BZ=new Au.Point2D(),BU,BT;Ar.call(this,BX,Ba,BZ);BU=new Au.Point2D({Point2D:Ba});BT=new Au.Point2D({Point2D:BZ});if(!this.IsVerticalAxis()){BU.y=BV.GetBottomLeft().y;BT.y=BU.y;if(BY&&BW>=180&&BW<360){BU.swapPoints(Ba);BT.swapPoints(BZ);}}else{BU.x=BV.x;BT.x=BU.x;if(BY&&BW>=90&&BW<270){BU.swapPoints(Ba);BT.swapPoints(BZ);}}if(BY){Bb.push(BU);Bb.push(BT);Bb.push(BT.Shifted(BS));Bb.push(BZ.Shifted(BS));Bb.push(Ba.Shifted(BS));Bb.push(BU.Shifted(BS));}else{Bb.push(BU);Bb.push(BT);Bb.push(BZ);Bb.push(Ba);}},AdjustTitleArea:function As(BS){if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(BS);}},AdjustDataArea:function A(BS,BU,BW,BY){var BX;if(!this.mIsShown){return ;}if(BU===undefined){BU=1000;}if(BW===undefined){BW=1000;}if(BY===undefined){BY=false;}if(this.mUseDepth){this.ReserveDepthAxisLine(BS);}if(this.mDatasetPtr!==null&&this.mAxisInfo.mShowAxisLabels){if(this.mUseDepth){var BT=this.TrimMarginsForDepthAxis(BU,BW);BU=BT.LowMargin;BW=BT.HighMargin;BW=BT.HighMargin;}BX=Au.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(BX,Y.GOT_AXIS_LABEL);if(this.mChartContextPtr.mIsGraphMatrix&&this.mAxisInfo.mAxisDirection===Ay.AD_Y){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Normal;}this.SetDeviceDataArea(BS);b.call(this,BU,BW,BY);var BV=this.mDeviceDataArea;BV.width=Math.max(BV.width,0);BV.height=Math.max(BV.height,0);BS.ResetRect(BV);}},generateGridsByArea:function z(BS){if(BS){if(this.mMajorGrid.mShowGridLines){At.call(this);}if(this.mMinorGrid.mShowGridLines){A1.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){this.generateInterlacedSection();}}},getMinMaxLogicalCoord:function Aq(){if(this.mAxisCross){return{min:1,max:(this.mGroupCount>1)?this.mGroupCount:2};}return{min:0.5,max:this.mGroupCount+0.5};},GenerateGridsOnMiddleWall:function N(BT,BS){var BU=this.mDeviceDataArea;this.mDeviceDataArea=BT;p.call(this);O.call(this);Ai.call(this);if(!this.mManagerGraphObjectList.empty()){this.MoveGraphObjectList(BS);}this.mDeviceDataArea=BU;},getTotalGroupCount:function X(){var BT=this.mDatasetPtr.GetSliceFlag(),BS;this.mDatasetPtr.EnableSlices(false);BS=this.mDatasetPtr.GetGroupCount();this.mDatasetPtr.EnableSlices(BT);return BS;},LoadProperties:function Ae(){var BV,BT;this._super();if(!this.mIsShown){return ;}var BU=this.mChartContextPtr,BS=this.mCategoryOption;if(!BU.mIsGraphMatrix){BV=new Au.TripleId({ObjectId:this.mTripleId.mObjectId});BT=BU.GetProperty(BF.DssGraphAxisAutoFit,BV);if(BT!==null&&BT!==undefined){if(BT!==false){BS.mLabelStyle=G.CLS_NORMAL;}else{BT=BU.GetProperty(BF.DssGraphAxisStagger,BV);if(BT!==null&&BT!==undefined){if(BT!==false){BS.mLabelStyle=G.CLS_STAGGER;}else{BS.mLabelStyle=G.CLS_MANUAL;BT=BU.GetProperty(BF.DssGraphAxisScaleFreq,BV);if(BT){BS.mManualSkip=BT;if(BS.mManualSkip<1){BS.mManualSkip=1;}}}}}}switch(BU.GetGraphMajorType()){case Ao.GMT_RADAR:case Ao.GMT_3D_CATEGORY:return ;case Ao.GMT_CATEGORY:if(BU.isParetoChart()){return ;}break;default:break;}}},TrimAxisPadding:function R(BW){var BX=this.mChartContextPtr,BT=BX.getUniformAxisContext(),BV=BT.CategoryAxis;if(BX.mIsGraphMatrix===false){return ;}var BU,BS="X";if(this.IsVerticalAxis()){BS="Y";}if(this.mIsUniformAxis===false){BU=BV[BS];this.mHighTrim=BU.Trims[1]||0;this.mLowTrim=BU.Trims[0]||0;}u.call(this,this.mHighTrim,this.mLowTrim,BW);},ResetAxisPadding:function D(){this.mPaddingOnSide=-1;},getStatus:function K(){var BV=0,BS=1,BW=2,BU=this.getLabelRotation(),BT=this.mLabelInterval;if(BU===J.Rotate90){return BW;}if(BT===1){return BV;}if(BT===2&&this.mCategoryOption.mLabelStyle===G.CLS_STAGGER){return BS;}return BW;},getGroupSlotAt:function A8(BT){var BU=this.getGroupStartPos(0),BS=this.getGroupSize();return Math.ceil((BT-BU)/BS)-1;},getGridLinePosition:function A3(){return[];},getBandings:function S(){var BZ=[],BY=0,BV=0,BU,BX=this.mGroupCount,BW=this.mChartContextPtr,BT;if(BX===1){if(this.IsVerticalAxis()){BV=BW.mGraphHeight;}else{BV=BW.mGraphWidth;}BZ.push({Start:BY,Size:BV});}else{var BS=this.getGroupSize(true);for(BT=0;BT<BX;++BT){if(BT===0){BY=0;BV=this.getGroupStartPos(1,true);}else{if(BT===BX-1){if(this.IsVerticalAxis()){BV=BW.mGraphHeight;}else{BV=BW.mGraphWidth;}BU=BZ[BT-1];BY=BU.Start+BU.Size;BV=BV-BY;}else{BU=BZ[BT-1];BY=BU.Start+BU.Size;BV=BS;}}BZ.push({Start:BY,Size:BV});}}return BZ;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphRegressionType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumDSSGraphOffScaleType","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphTrendLineOptions","GraphObject","Axis","FormatLine","Point2D","BezierCurve","CurveLineObject");mstrmojo.requiresCls("mstrmojo.VisUtility");var f=mstrmojo.chart,g=f.model.enums,d=mstrmojo.VisUtility,Y=f.enums,N=Y.EnumDSSGraphOffScaleType,U=g.EnumDSSGraphType,E=g.EnumShapeType,c=Y.EnumLineJoinType,C=Y.EnumLineStyle,D=g.EnumDSSGraphRegressionType,F=1e-10,K=100,I=0.25,J=0.01,h=0.15,O=0.3,a=1,P=1.001,B=0,R=1;function Q(j){var k=j.x;j.x=j.y;j.y=k;}function H(o){var k,j,n,l,q=this.mCoefficients,p=this.mTrendLineOptions.mRegressionType;j=o.length;for(k=0;k<j;++k){n=o[k];if(typeof (n)==="number"){q.push(n);}else{if(typeof (n)==="string"&&p===D.DssGraphRegressionExp){if(n.indexOf("Ln")===0){l=n.substr(2);n=parseFloat(l);if(isNaN(n)){return false;}this.subType=R;q.push(n);}}else{return false;}}}if((j===1)&&(p===D.DssGraphRegressionExp||p===D.DssGraphRegressionLog||p===D.DssGraphRegressionPow)){this.deformed=true;}return true;}function X(n,l){var j=n.mOptions.mOffScaleType,k;n.mOptions.mOffScaleType=N.DssGraphOffScaleShow;k=n.GetPositionByValue(l);n.mOptions.mOffScaleType=j;return k;}function b(AE){var p=this.mChartContextPtr,AA=this.mFormatLinePtr.mLineStyle,u,s,AF;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||p.mUseAnimation){return ;}p.NewPath();var q=AE.length;if(q<2){return ;}var k=f.FormatLine.getLinePattern(AA),r=k.length,z=0,o=0,l=[],w=[];for(u=0;u<q;++u){w.push(0);l.push(0);}var AD=AE[0].x;var AC=AE[0].y;var AB=0.05;if(AA===C.LS_DOT_DOT_DOT){AB=0.03;k[r-1]*=3;}else{if(AA===C.LS_DOT){AB=0.005;}}for(AF=0;AF<=1;AF+=AB/q){for(u=1;u<q;++u){for(s=0;s<q-u;++s){if(u===1){l[s]=AE[s].x*(1-AF)+AE[s+1].x*AF;w[s]=AE[s].y*(1-AF)+AE[s+1].y*AF;continue;}l[s]=l[s]*(1-AF)+l[s+1]*AF;w[s]=w[s]*(1-AF)+w[s+1]*AF;}}o+=Math.sqrt((AD-l[0])*(AD-l[0])+(AC-w[0])*(AC-w[0]));if(o>=k[z]){if(z%2===0){if(this.mIsVertical){p.MoveTo(AD,AC);p.LineTo(l[0],w[0]);}else{p.MoveTo(AC,AD);p.LineTo(w[0],l[0]);}}z=(z+1)%r;o=0;AD=l[0];AC=w[0];}}}function A(o,k,l,q,n){var p,j={};j.usedDefaultValueX=false;switch(o){case D.DssGraphRegressionLog:p=k;k*=l;if(k-p>n){k=p+n;j.usedDefaultValueX=true;}j.startX=k;break;case D.DssGraphRegressionExp:k+=l/Math.pow(q,k*0.25);j.startX=k;break;case D.DssGraphRegressionPoly:k+=l;j.startX=k;break;}return j;}function e(j,AA,x,r,z,w,p,l){var AC=0,o,n=0,u,s,k,t,y,q,AB;for(y=AA;y<x;){l.push(y);l.push(G.call(this,y));q=y;AB=A.call(this,j,y,r,p,z);y=AB.startX;t=AB.usedDefaultValueX;if(!t){AC=L.call(this,q);n=L.call(this,y);}o=Math.abs(AC);u=Math.abs(n-AC);if(w===0){s=this.mpXAxis.GetPositionByValue(q);k=this.mpXAxis.GetPositionByValue(y);}while(!t&&(y<x)&&((w===0&&Math.abs(k-s)<5)||(w!==0&&Math.abs(y-q)<w)||(o<=K&&o>I&&u<h*o)||(o<=I&&o>J&&u<O*o)||(o<=J&&u<a*o))){AB=A.call(this,j,y,r,p,z);y=AB.startX;t=AB.usedDefaultValueX;if(!t){n=L.call(this,y);u=Math.abs(n-AC);}if(w===0){k=this.mpXAxis.GetPositionByValue(y);}}if(y>=x){l.push(x);l.push(G.call(this,x));return ;}}}function W(){var n=this.mTrendLineOptions.mRegressionType,y,j=this.mTrendLineDataValues,r=this.mCoefficients,x=r.length-1,k=j.length,AF=[],l,AC,w,AB,t,AG,AE,o,q,AA,AD=16,z,p;o=[];for(y=0;2*y<k-k%2;++y){if(j[2*y]!==null&&j[2*y+1]!==null){AF.push(j[2*y]);AF.push(j[2*y+1]);}}l=AF.length;if(l<2){this.isValid=false;return ;}AC=AF[0];w=AF[l-l%2-2];z=(w-AC)/AD;AB=G.call(this,AC);t=G.call(this,w);AG=this.mpXAxis.GetPositionByValue(AC);AE=this.mpYAxis.GetPositionByValue(AB);this.startPoint={x:AG,y:AE};AG=this.mpXAxis.GetPositionByValue(w);AE=this.mpYAxis.GetPositionByValue(t);this.endPoint={x:AG,y:AE};if(z<F){this.deformed=true;}if(this.deformed){o.push(AF[0]);o.push(AF[1]);o.push(AF[l-l%2-2]);o.push(AF[l-l%2-1]);}else{var u=this.mpXAxis.GetValueForUnit(),s;if(u!==undefined&&u!==null){s=5*u;}else{s=0;}switch(n){case D.DssGraphRegressionNone:break;case D.DssGraphRegressionLinear:o=AF;break;case D.DssGraphRegressionLog:if(r[1]!==0){q=1+Math.SQRT2/Math.pow(Math.abs(r[1]),0.25);}q=Math.max(q,P);e.call(this,n,AC,w,q,z,s,0,o);break;case D.DssGraphRegressionExp:if(this.subType===R){p=Math.pow(Math.E,r[1]);}else{p=r[1];}if((r[0]!==0)&&(p!==0)){q=Math.pow(24/Math.abs(r[0]),0.25)/Math.abs(Math.log(p));q=Math.min(q,z);q=Math.max(q,s);e.call(this,n,AC,w,q,z,s,p,o);break;}else{for(AA=AC;AA<w;){o.push(AA);o.push(G.call(this,AA));AA+=z;if(AA>=w){o.push(w);o.push(G.call(this,w));break;}}}break;case D.DssGraphRegressionPow:for(AA=AC;AA<w;){o.push(AA);o.push(G.call(this,AA));AA+=z;if(AA>=w){o.push(w);o.push(G.call(this,w));break;}}break;case D.DssGraphRegressionPoly:q=1;if(x>1){q=1/Math.pow(Math.abs(r[x]),1/x);}else{q=z;}q=Math.min(z,q);q=Math.max(q,s);e.call(this,n,AC,w,q,z,s,0,o);break;default:break;}}this.mCalcValues=o;}function G(n){var l=this.mTrendLineOptions.mRegressionType,p,o=this.mCoefficients,j,k;switch(l){case D.DssGraphRegressionNone:p=null;break;case D.DssGraphRegressionLinear:p=null;break;case D.DssGraphRegressionLog:p=o[0]+o[1]*Math.log(n);break;case D.DssGraphRegressionExp:switch(this.subType){case B:p=o[0]*Math.pow(o[1],n);break;case R:p=o[0]*Math.pow(Math.E,o[1]*n);break;}break;case D.DssGraphRegressionPow:p=o[0]*Math.pow(n,o[1]);break;case D.DssGraphRegressionPoly:j=o.length-1;p=o[0];for(k=1;k<=j;++k){p+=o[k]*Math.pow(n,k);}break;default:p=null;break;}return p;}function L(n){var l=this.mTrendLineOptions.mRegressionType,p,o=this.mCoefficients,j,k;switch(l){case D.DssGraphRegressionNone:p=null;break;case D.DssGraphRegressionLinear:p=null;break;case D.DssGraphRegressionLog:p=o[1]/n;break;case D.DssGraphRegressionExp:switch(this.subType){case B:p=o[0]*Math.log(o[1])*Math.pow(o[1],n);break;case R:p=o[0]*o[1]*Math.pow(Math.E,o[1]*n);}break;case D.DssGraphRegressionPow:p=o[0]*o[1]*Math.pow(n,o[1]-1);break;case D.DssGraphRegressionPoly:j=o.length-1;p=0;for(k=1;k<=j;++k){p+=o[k]*k*Math.pow(n,k-1);}break;default:p=null;break;}return p;}function T(r,o,q,p,k){var j,n=q,l=p;if(r){if(n>k){if(l>o&&l<k){n=(o+2*l)/3;}else{n=(o+2*k)/3;}}if(l<o||l<n){l=(n+k)/2;}}else{if(n<k){if(l<o&&l>k){n=(o+2*l)/3;}else{n=(o+2*k)/3;}}if(l>o||l>n){l=(n+k)/2;}}j={control1:n,control2:l};return j;}function S(r,l,o,n,k){var j,p=this.mCoefficients,q;if(r===D.DssGraphRegressionPow){if((p[1]<0&&p[0]>0)||(p[1]>0&&p[0]<0)){j=T(false,l,o,n,k);}else{if((p[1]>0&&p[0]>0)||(p[1]<0&&p[0]<0)){j=T(true,l,o,n,k);}}}else{if(r===D.DssGraphRegressionLog){if(p[1]>0){j=T(true,l,o,n,k);}else{if(p[1]<0){j=T(false,l,o,n,k);}}}else{if(r===D.DssGraphRegressionExp){if(this.subType===R){q=Math.pow(Math.E,p[1]);}else{q=p[1];}if((q<1&&p[0]>0)||(q>1&&p[0]<0)){j=T(false,l,o,n,k);}else{if((q>1&&p[0]>0)||(q<1&&p[0]<0)){j=T(true,l,o,n,k);}}}}}if(j===undefined||j===null){j={control1:o,control2:n};}return j;}mstrmojo.chart.TrendLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.TrendLineObject",mpXAxis:null,mpYAxis:null,mTrendLineOptions:null,mDataArea:null,mDepthOffset:null,mIsVertical:false,mTextPtr:null,mRealObjectId:U.DssGraphTypeReserved,mCurveLinePtr:null,mMinXLogical:0,mMaxXLogical:0,mMinYLogical:0,mMaxYLogical:0,mTrendLineType:0,mCoefficients:[],mTrendLineDataValues:[],mCalcValues:[],mBezierCurves:[],identity:null,isValid:null,subType:B,deformed:false,startPoint:{},midPoint:{},endPoint:{},init:function Z(k){var j=0,l;this._super(k);this.deformed=false;this.mCoefficients=[];this.mTrendLineDataValues=[];if(k){if(k.RealObjectId){this.mRealObjectId=k.RealObjectId;}if(k.XAxis){this.mpXAxis=k.XAxis;}if(k.YAxis){this.mpYAxis=k.YAxis;}if(k.TrendLineOptions){this.mTrendLineOptions=k.TrendLineOptions;}this.mDataArea=k.DataArea||new f.Rect2D();this.mDepthOffset=k.DepthOffset||new f.Point2D();this.mIsVertical=k.IsVertical||false;if(k.Coefficients){this.isValid=H.call(this,k.Coefficients);}else{this.isValid=false;}if(k.TrendLineValues){this.mTrendLineDataValues=k.TrendLineValues;}if(k.Identity){this.identity=k.Identity;}}this.startPoint={};this.midPoint={};this.endPoint={};this.mCalcValues=[];W.call(this);this.mBezierCurves=[];if(!this.mIsVertical){j=this.mDepthOffset.x;this.mDepthOffset.x=this.mDepthOffset.y;this.mDepthOffset.y=j;}if(this.mpXAxis){l=this.mpXAxis.GetMinMaxLogicalCoord();this.mMinXLogical=l.Min;this.mMaxXLogical=l.Max;}if(this.mpYAxis){l=this.mpYAxis.GetMinMaxLogicalCoord();this.mMinYLogical=l.Min;this.mMaxYLogical=l.Max;}},Draw:function V(){var j=this.mChartContextPtr,o=this.mBezierCurves,l=j.GetLineJoin(),n,u,r=[];if(!this.isValid){return ;}j.SetLineJoin(c.LJT_ROUND);this.SetLineWidth();u=o.length;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||j.mUseAnimation){j.NewPath();o[0].MoveToStart(j);for(n=0;n<u;++n){o[n].CurveToEnd(j);}}else{for(n=0;n<u;++n){o[n].GetControlPoints(r);b.call(this,r);this.ApplyLineFormat();}}if(this.isClosePath){j.ClosePath();}if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||j.mUseAnimation){this.ApplyLineFormat();}j.SetLineJoin(l);for(n=0;n<u;++n){var k=o[n],t=new f.Point2D({Point2D:k.mP0}),s=new f.Point2D({Point2D:k.mP1}),q=new f.Point2D({Point2D:k.mP2}),p=new f.Point2D({Point2D:k.mP3});if(!this.mIsVertical){t.swap();s.swap();q.swap();p.swap();Q.call(this,this.startPoint);Q.call(this,this.midPoint);Q.call(this,this.endPoint);}r.push(t);r.push(s);r.push(q);r.push(p);}j.FinishDrawCurves(r,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},CreateTrendLine:function M(){var AS,AR,n=this.mTrendLineOptions,AG=n.mRegressionType,AA,z,k,AY,AN,AP=[],AQ,AE=new f.Point2D(),u=new f.Point2D(),AI,AH,AM,AL,x,w,AU,AK,AX,y,AV,AD,AC,t,s,o,l,AB,AT=this.mTrendLineDataValues,AF=AT.length,p,r,AO=this.mBezierCurves,AJ=0,AW,q=null;if(!this.isValid){return q;}AF=AF-(AF%2);if(AG===D.DssGraphRegressionLinear){if(n.mSeasonal){for(AS=0;2*AS<AF;++AS){AA=AT[2*AS];z=AT[2*AS+1];if(AA!==null&&AA!==undefined&&z!==null&&z!==undefined){k=X.call(this,this.mpXAxis,AA);AY=X.call(this,this.mpYAxis,z);if(k!==undefined&&k!==null&&AY!==undefined&&AY!==null){AN=new f.Point2D({x:k,y:AY});AP.push(AN);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AS)+" and "+(2*AS+1));d.visPrint("\tvalueX = "+AA+", valueY = "+z);d.visPrint("\tx = "+k+", y = "+AY);}}}if(AP.length>=2){AD=AP[0].x;t=AP[AF-1].x;o=(AD+t)/2;for(AS=0;AS<AF;++AS){if(AP[AS].x===o){l=AP[AS].y;break;}else{if(AS<AF-1&&AP[AS].x<o&&AP[AS+1].x>o){AB=(AP[AS+1].y-AP[AS].y)/(AP[AS+1].x-AP[AS].x);l=AP[AS].y+AB*(o-AP[AS].x);break;}}}this.midPoint.x=o;this.midPoint.y=l;}}else{for(AS=0;AS*2<AF;++AS){AA=AT[2*AS];z=AT[2*AS+1];if(AA!==null&&AA!==undefined&&z!==null&&z!==undefined){k=X.call(this,this.mpXAxis,AA);AY=X.call(this,this.mpYAxis,z);if(k!==undefined&&k!==null&&AY!==undefined&&AY!==null){AN=new f.Point2D({x:k,y:AY});AP.push(AN);break;}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AS)+" and "+(2*AS+1));d.visPrint("\tvalueX = "+AA+", valueY = "+z);d.visPrint("\tx = "+k+", y = "+AY);}}}for(AR=(AF/2)-1;AR>AS;--AR){AA=AT[2*AR];z=AT[2*AR+1];if(AA!==null&&AA!==undefined&&z!==null&&z!==undefined){k=X.call(this,this.mpXAxis,AA);AY=X.call(this,this.mpYAxis,z);if(k!==undefined&&k!==null&&AY!==undefined&&AY!==null){AN=new f.Point2D({x:k,y:AY});AP.push(AN);break;}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AR)+" and "+(2*AR+1));d.visPrint("\tvalueX = "+AA+", valueY = "+z);d.visPrint("\tx = "+AN.x+", y = "+AN.y);}}}if(AP.length>=2){o=(AP[0].x+AP[1].x)/2;l=(AP[0].y+AP[1].y)/2;this.midPoint.x=o;this.midPoint.y=l;}}if(AP.length>=2){AQ=new f.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AP,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}q=AQ;}else{p=this.mCalcValues;r=p.length;if(this.deformed){AA=p[0];z=p[1];if(AA!==null&&AA!==undefined&&z!==null&&z!==undefined){k=X.call(this,this.mpXAxis,AA);AY=X.call(this,this.mpYAxis,z);if(k!==undefined&&k!==null&&AY!==undefined&&AY!==null){AN=new f.Point2D({x:k,y:AY});AP.push(AN);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: 0 and 1");d.visPrint("\tvalueX = "+AA+", valueY = "+z);d.visPrint("\tx = "+k+", y = "+AY);}}AA=p[2];z=p[3];if(AA!==null&&AA!==undefined&&z!==null&&z!==undefined){k=X.call(this,this.mpXAxis,AA);AY=X.call(this,this.mpYAxis,z);if(k!==undefined&&k!==null&&AY!==undefined&&AY!==null){AN=new f.Point2D({x:k,y:AY});AP.push(AN);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: 2 and 3");d.visPrint("\tvalueX = "+AA+", valueY = "+z);d.visPrint("\tx = "+AN.x+", y = "+AN.y);}}if(AP.length>=2){o=(AP[0].x+AP[1].x)/2;l=(p[0].y+AP[1].y)/2;this.midPoint.x=o;this.midPoint.y=l;AQ=new f.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AP,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}q=AQ;}else{for(AS=0;2*AS+3<2*r;++AS){AI=p[2*AS];AH=p[2*AS+1];AM=p[2*AS+2];AL=p[2*AS+3];if(AI!==undefined&&AI!==null&&AH!==undefined&&AH!==null&&AM!==undefined&&AM!==null&&AL!==undefined&&AL!==null){y=L.call(this,AI);AV=L.call(this,AM);x=AH+y*((2*AI+AM)/3-AI);w=AL+AV*((AI+2*AM)/3-AM);if(AG===D.DssGraphRegressionExp||AG===D.DssGraphRegressionLog||AG===D.DssGraphRegressionPow){AX=S.call(this,AG,AH,x,w,AL);x=AX.control1;w=AX.control2;}AD=X.call(this,this.mpXAxis,AI);AC=X.call(this,this.mpYAxis,AH);t=X.call(this,this.mpXAxis,AM);s=X.call(this,this.mpYAxis,AL);AU=X.call(this,this.mpYAxis,x);AK=X.call(this,this.mpYAxis,w);if(AD!==undefined&&AD!==null&&AC!==undefined&&AC!==null&&t!==undefined&&t!==null&&s!==undefined&&s!==null&&AU!==undefined&&AU!==null&&AK!==undefined&&AK!==null){AE=new f.Point2D({x:AD,y:AC});u=new f.Point2D({x:t,y:s});AO.push(new f.BezierCurve({P0:AE,F1:AU,F2:AK,P3:u,IsVertical:this.mIsVertical}));}else{d.visPrint("Trendline point calculation abnormal:");if(AD===undefined||AD===null||AC===undefined||AC===null){d.visPrint("\tdata point #: "+(2*AS)+" and "+(2*AS+1));d.visPrint("\tvalueX = "+AI+", valueY = "+AH);d.visPrint("\tx = "+AD+", y = "+AC);}if(t===undefined||t===null||s===undefined||s===null){d.visPrint("\tdata point #: "+(2*AS+2)+" and "+(2*AS+3));d.visPrint("\tvalueX = "+AM+", valueY = "+AL);d.visPrint("\tx = "+t+", y = "+s);}}}}AJ=AO.length;AD=AO[0].mP0.x;t=AO[AJ-1].mP3.x;o=(AD+t)/2;AR=-1;for(AS=0;AS<AJ;++AS){if(AO[AS].mP0.x===o){l=AO[AS].mP0.y;AR=AS;break;}else{if(AO[AS].mP3.x===o){l=AO[AS].mP3.y;AR=AS+1;break;}else{if(AO[AS].mP0.x<o&&AO[AS].mP3.x>o){AR=AS;break;}}}}if(l!==undefined){this.midPoint.x=o;this.midPoint.y=l;}else{if(AR<AJ){l=AO[AR].evaluate(o);this.midPoint.x=o;this.midPoint.y=l;}}AW=new f.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this,IsVertical:true,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});for(AS=0;AS<AJ;++AS){AW.AddBezierCurveLine(AO[AS]);}q=AW;}}return q;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","TrendLineObject","Rect2D","TripleId","TrendLineObject","ChartContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumValueAxis","EnumTrendLineIndex","EnumAnchorPoint","EnumCollectionType","EnumGraphMajorType","EnumFontRotation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var Z=mstrmojo.chart,V=Z.enums,c=V.EnumCollectionType,C=V.EnumGraphMajorType,X=V.EnumValueAxis,J=V.EnumAnchorPoint,d=Z.gNullTripleId,B=Z.gNullObjectId,R=mstrmojo.chart.model,e=R.enums,I=e.EnumDSSGraphType,K=e.EnumDSSGraphMarkerShape,L=e.EnumDSSGraphProperty,a=e.EnumDSSGraphDataTextPosition,M=e.EnumDSSGraphObject;mstrmojo.chart.Plot=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Plot",mDatasetPtr:null,mLegendPtr:null,mSeriesId:null,mDataArea:null,mTrendLines:null,mPostTrendLineObjects:null,mHasSizeBy:false,mHasColorBy:false,mPartialRendering:false,mClippedElementSize:null,shownDataLabels:[],shownRefLabels:[],dataLabelManager:null,axisOriginLabels:[],DPCount:0,seriesDPCount:[],init:function W(h){this._super(h);this.mSeriesId=[];this.mTrendLines=[[],[]];this.mPostTrendLineObjects=[];var j=this.mChartContextPtr,g=j.GetGraphMatrixContext();this.mHasSizeBy=g.mHasSizeBy;this.mHasColorBy=g.mHasColorBy;this.mPartialRendering=j.mPartialRendering;this.mClippedElementSize={};this.shownDataLabels=[];this.shownRefLabels=[];this.dataLabelManager=null;this.axisOriginLabels=[];if(h.Area){this.mDataArea=new Z.Rect2D({Rect2D:h.Area});}this.DPCount=0;this.seriesDPCount=[];},Draw:function T(g){var h=false;if(g&&g.Skip){g.Skip--;h=true;}this._super();if(!h){this.DrawTrendLinesAndEquationsInArea(this.mDataArea,false);this.DrawTrendLinesAndEquationsInArea(this.mDataArea,true);this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function b(){var g=this.mDataArea;this.DrawTrendLinesAndEquationsInArea(g,false);this.DrawTrendLinesAndEquationsInArea(g,true);},OnRectangleSelection:function H(j,h,g){g=g||0;return h;},SetDataArea:function F(g){if(this.mDataArea===null){this.mDataArea=new Z.Rect2D({Rect2D:g});}else{this.mDataArea.ResetRect(g);}},MoveLabel:function Y(o,r,w,j,g,n){var t,l,q,s,k,u,h,p;if(o===null){return ;}t=o.GetBoundingRect();l=t.width/2;q=t.height/2;s=r;k=w;if(j){u=s;s=k;k=u;}p=s;if(n===a.DssGraphDTPositionOutMin||n===a.DssGraphDTPositionInMin){p=k;}h=j?-1:1;switch(n){case a.DssGraphDTPositionCenter:p=s.MiddleTo(k);break;case a.DssGraphDTPositionInMin:case a.DssGraphDTPositionOutMax:if(g){p.y-=q*h;}else{p.x+=l*h;}break;case a.DssGraphDTPositionOutMin:case a.DssGraphDTPositionInMax:if(g){p.y+=q*h;}else{p.x-=l*h;}break;default:break;}o.MoveTo(p.x,p.y,J.CENTER);},AddLegendMarkerToCollection:function G(h,s,k,o,u,r,p){var j=this.mChartContextPtr,t,l,n,g,q;if(this.mLegendPtr===null||s===null){return ;}if(j.mIsGraphMatrix){return ;}k=k||false;u=u||K.DssGraphMarkerShapeRectangle;p=p||false;if(o===undefined){o=true;}if(r===undefined){r=true;}g=j.mGraphType;t=new Z.TripleId({ObjectId:M.DssGraphLegendMarker,SeriesId:h});l=this.mLegendPtr.GetGraphObject(t);if(l){if(k){n=l;s.AddGraphObject(l,false);if(r&&g!==I.DssGraphTypePareto_Percent){t.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(j.GetFormatLine(t,c.CT_LINE),h,p);}t.mObjectId=M.DssGraphRiser;n.SetFormatLine(j.GetFormatLine(t,c.CT_NO_COLLECTION));n.SetFormatFill(j.GetFormatFill(t,c.CT_DEPTH_LINE_OR_LINE_MARKER));n.mIsShown=o;if(o){n.SetMarkerShape(u);}}else{q=j.GetGraphMajorType();s.AddGraphObject(l);if(q===C.GMT_BUBBLE){if(r){t.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(j.GetFormatLine(t,c.CT_LINE),h);}if(o){n=l;n.SetMarkerShape(u);}}if(g===I.DssGraphTypePareto_Percent||q===C.GMT_GAUGE){if(o){n=l;n.SetMarkerShape(u);}}if(q===C.GMT_STOCK){if(r){t.mObjectId=M.DssGraphRiser;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(j.GetFormatLine(t,c.CT_LINE),h,p);}if(o){n=l;n.SetMarkerShape(u);}}}}},CreateTrendLine:function P(r,q,t,j,l,k,g,o,p,h,n,s){},AdjustTrendLineEquation:function N(h,g){},DrawTrendLinesAndEquationsInArea:function U(g,h){var n=this.mChartContextPtr,k=h?this.mTrendLines[1]:this.mTrendLines[0],j;if(k.length===0){return ;}n.saveState();n.DrawRectangle(g,true);n.Clip();for(j=0;j<k.length;++j){k[j].Draw();}n.RestoreState();for(j=0;j<k.length;++j){var l=k[j].mTextPtr;if(l!==null){l.Draw();}}},DrawPostTrendLineObjects:function f(){var j=this.mPostTrendLineObjects,g=j.length,h;for(h=0;h<g;++h){j[h].Draw();}},LoadTrendLineProperties:function D(j,h){var n=this.mChartContextPtr;if(n.mIsGraphMatrix||!!h){return ;}if(n.mIsGraphMatrix){var g=this.mDatasetPtr.GetTrendLinePropertiesBySeries(j);if(g){h.mRegressionType=g.RegressionType||h.mRegressionType;if(g.Order!==null&&g.Order!==undefined){h.mOrder=g.Order;}if(g.Period!==null&&g.Period!==undefined){h.mPeriod=g.Period;}h.mShowCoefficients=g.ShowCoefficients||h.mShowCoefficients;h.mShowEquation=g.ShowEquation||h.mShowEquation;h.mUserSeriesGraphColor=g.UserSeriesGraphColor||h.mUserSeriesGraphColor;}}else{var k,l=new Z.TripleId({ObjectId:M.DssGraphRiser,SeriesId:j});k=n.GetProperty(L.DssGraphSDRegressionType,l);if(k){h.mRegressionType=k;}k=n.GetProperty(L.DssGraphSDPolyFactor,l);if(k){h.mOrder=k;}k=n.GetProperty(L.DssGraphSDMOVAFactor,l);if(k){h.mPeriod=k;}k=n.GetProperty(L.DssGraphShowSDLinrCorr,l);if(k){h.mShowCoefficients=k;}k=n.GetProperty(L.DssGraphShowSDLinrFormula,l);if(k){h.mShowEquation=k;}l.mObjectId=B;k=n.GetProperty(L.DssGraphCurveColorAsSeries,l);if(k){h.mUserSeriesGraphColor=k;}}},LoadValueAxisInfo:function S(k,g){var o=this.mChartContextPtr,j=this.mSeriesId,h,n,l;if(g){if(o.mIsGraphMatrix){l=this.mDatasetPtr.GetValueAxisBySeries(j[k]);}else{h=o.GetProperty(L.DssGraph2DSplitYAutomatic,d);if(h===null||h===undefined){l=(k%2===0)?X.VA_Y1:X.VA_Y2;}else{n=new Z.TripleId({ObjectId:L.DssGraphRiser,SeriesId:j[k]});h=o.GetProperty(L.DssGraph2DSDSplitY,n);if(h){l=h?X.VA_Y2:X.VA_Y1;}}}}else{l=X.VA_Y1;}return l;},GetDataset:function Q(){return this.mDatasetPtr;},SetDataset:function O(g){this.mDatasetPtr=g;},AddSeries:function E(g){this.mSeriesId.push(g);},GetMaxElementOffsetClippedByBoundary:function A(h,j){var g={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},k=this.mChartContextPtr;if(k.IsBarChart()||k.mGraphType===I.DssGraphTypeGridChart){return g;}if(k.IsLineChart()||k.IsAreaChart()){return g;}return g;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","TripleId","Plot","GridMap","LabelInfo","TextObject","StraightLineObject","PolyLineObject","NumberObject","GraphCollectionObject","MarkerObject","DataLabelManager","GMDataLabelInfo","ChartConstants","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumCollectionType","EnumAnchorPoint","EnumImageUsage","EnumFontRotation","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumDSSGraphDataTextShowType","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphDataTextPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresCls("mstrmojo.VisUtility");var Aq=mstrmojo.chart;var Ar=Aq.gModuleMain,Al=Aq.ChartConstants,AQ=mstrmojo.VisUtility,R=Aq.enums,AN=R.EnumCollectionType,Am=R.EnumGraphMajorType,A3=R.EnumAnchorPoint,M=R.EnumFontRotation,Ak=R.EnumGraphMatrixMarkerTypeInChart,d=R.EnumGraphMatrixElementSizeMode,AP=R.EnumImageUsage,s=R.EnumGraphMatrixPiePlotType,n=Aq.common,AE=Aq.gNullTripleId,At=Aq.gNullGroupId,Ai=mstrmojo.chart.model,AU=Ai.enums,A6=AU.EnumDSSGraphProperty,Q=AU.EnumDSSGraphRegressionType,Ah=AU.EnumDSSGraphDataTextPosition,Af=AU.EnumDSSGraphDataTextShowType,A2=AU.EnumDSSGraphDataTextPosition,A7=AU.EnumDSSGraphObject,Av=AU.EnumDSSExtraGraphProperty,c=AU.EnumShapeType,BA=AU.EnumDSSGraphMarkerShape;var F=-1,A9=0.7,AK=2,J=3,AC=1,AA=2,z=3,x=4,w=5,u=6,b=1,A5=1,O=2,A4=3,L=4;var Ag=new Aq.Point2D();function k(BH,BG){var BI;if(BH.cannotFitVertically===true&&BG.cannotFitVertically===false){return 1;}if(BH.cannotFitVertically===false&&BG.cannotFitVertically===true){return -1;}if(BH.cannotFitHorizontally===true&&BG.cannotFitHorizontally===false){return 1;}if(BH.cannotFitHorizontally===false&&BG.cannotFitHorizontally===true){return -1;}BI=BH.overlapRefLabelCount-BG.overlapRefLabelCount;if(BI<0){return -1;}else{if(BI>0){return 1;}else{BI=BH.overlapRefLineCount-BG.overlapRefLineCount;if(BI<0){return -1;}else{if(BI>0){return 1;}else{BI=BH.overlapDataLabelCount-BG.overlapDataLabelCount;if(BI<=0){return -1;}else{return 1;}}}}}}function Aw(){var BG={ConnectDataPoint:false,ShowDataLabel:false,MarkerSize:33,MarkerShape:4,ValueAxisIndex:0,SeriesID:0,IsNullData:[],TrendLineOptions:{mRegressionType:Q.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true}};return BG;}function r(BL){var BI,BP=this.labelMatrix.length,BG=this.mDataArea.width,BO=this.mDataArea.height,BM,BH=this.mChartContextPtr,BK=0.25;if(BH.mIsGraphMatrix){var BJ=BH.GetGraphMatrixContext(),BN=BJ.mConstants.FixedTickerSize;if(BJ.mMarkerShape===BA.DssGraphMarkerShapeGMTick){BO=BN;BG=this.minRadius*BK;}else{BO=BG=this.minRadius*BK;}}else{for(BI=0;BI<BP;++BI){BM=this.labelMatrix[BI].Label.GetBoundingRectNoRotation(true);BG=Math.min(BM.width,BG);BO=Math.min(BM.height,BO);if(this.isBubbleChart){BG=Math.min(this.labelMatrix[BI].HostMarker.width,BG);BO=Math.min(this.labelMatrix[BI].HostMarker.height,BO);}}if(!this.isBubbleChart){BG=Math.min(this.labelMatrix[0].HostMarker.width,BG);BO=Math.min(this.labelMatrix[0].HostMarker.height,BO);}if(BG>1){BG=Math.round(BG*BK);}if(BO>1){BO=Math.round(BO*BK);}}BL.width=Math.max(BG,1);BL.height=Math.max(BO,1);}function G(BG){return 3;}function AF(BK,BL){var BI=BL.Size,BG=BL.Position,BH=BI+BG.y<BK.y||BG.y-BI>BK.y+BK.height,BJ=BI+BG.x<BK.x||BG.x-BI>BK.x+BK.width;return !BJ&&!BH;}function U(BO){var BH=this.mChartContextPtr,BJ,BG=5;if(BH.mPartialRendering===false){return false;}if(BH.mIsGraphMatrix){BJ=BH.GetGraphMatrixContext();BG=BJ.getPadding(Al.kDataLabel);if(AF.call(this,BH.mRenderingWindow,BO)===false){return true;}}if(this.shapeCanvas===null){var BL=new Aq.Rect2D();r.call(this,BL);this.shapeCanvas=new Aq.GridMap({Rect:this.mDataArea,Unit:BL,MatrixType:1,dataLabelPadding:BG});if(F<0){F=G.call(this,1);}}var BM,BN=this.shapeCanvas;if(BN.veryDense()){return true;}BM=BN.ToInspectedMetric(BO);if(BM.Min>=F-1||((BM.Occupied/BM.Total)>=F-1&&BM.Min>0)){return true;}var BK=BO.BoundingBox,BI=BO.Position,BP=BO.Size;switch(BO.Shape){case c._CIRCLE:BN.UpdateMatrixCircle(BI,BP,true);break;case c._PIE:BN.UpdateMatrixCircle(BI,BP,true);if(BO.ExclusiveRect){BN.UpdateMatrixCircle(BI,BP*A9,false);}break;case c._TICKER:case c._RECTANGLE:BN.UpdateMatrixRect(BK,true);break;default:console.alert("Bubble partial rendering: shape not support yet");break;}return false;}function H(BM,BN,BG){var BH=this.mChartContextPtr,BK=BH.GetGraphMatrixContext(),BO,BL,BR;switch(BM){case BA.DssGraphMarkerShapeGMTick:var BP=Math.round(BK.mConstants.FixedTickerSize*0.5),BQ=Math.round(0.5*BG);BO=new Aq.Rect2D();BO.x=BN.x-BQ;BO.y=BN.y-BP;BO.width=2*BQ;BO.height=2*BP;BL=c._TICKER;break;case BA.DssGraphMarkerShape2DPie:case BA.DssGraphMarkerShape2DRingPie:var BI=0;if(BM===BA.DssGraphMarkerShape2DRingPie){BI=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new Aq.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BH,Layout:BI,MaxRadius:this.maxUnitRadius,PlotType:s.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}var BJ=this.mPieRenderer.GetPieRadius(0,0,0);BO=BH.transformToRect(BN,BJ,true);BL=c._PIE;if(BI===1){BR=BH.transformToRect(BN,BJ*A9,true);}break;case BA.DssGraphMarkerShapeSquare:case BA.DssGraphMarkerShapeRectangle:BO=BH.transformToRect(BN,BG,true);BL=c._RECTANGLE;break;default:BO=BH.transformToRect(BN,BG,true);BL=c._CIRCLE;break;}return{BoundingBox:BO,Shape:BL,ExclusiveRect:BR};}function A0(BJ,BH,BI){var BK,BL,BG;BK=this.mDatasetPtr.GetData(this.VecSeriesInfo[BJ].SeriesID,BH,0);if(BK===null){return false;}BG=this.xAxis.GetPositionByValue(BK);if(BG===null){return false;}BI.x=BG;BK=this.mDatasetPtr.GetData(this.VecSeriesInfo[BJ].SeriesID,BH,1);if(BK===null){return false;}BL=(this.VecSeriesInfo[BJ].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;BG=BL.GetPositionByValue(BK);if(BG===null){return false;}BI.y=BG;return true;}function BD(BH,BO){var BR,BP,BG=this.mChartContextPtr,BL=BG.GetGraphMatrixContext(),BI=this.mDatasetPtr,BJ=this.VecSeriesInfo,BN,BQ,BK=c._CIRCLE,BM=BL.mMarkerShape;if(BG.mIsGraphMatrix){if(this.isBubbleChart){BN=BI.GetSizeByData(this.VecSeriesInfo[BH].SeriesID,BO);if(BN===null){return null;}BQ=this.maxUnitRadius;if(BM===BA.DssGraphMarkerShapeGMTick){BK=c._TICKER;BQ=BL.GetScaledSize(BN,BQ,BK);}else{if(BM===BA.DssGraphMarkerShape2DPie||BM===BA.DssGraphMarkerShape2DRingPie){BK=c._PIE;BQ=BL.GetScaledSize(BN,BQ,BK);BQ=Math.max(BQ,BL.mConstants.MinimalSize.Pie);}else{if(BM!==BA.DssGraphMarkerShapeCircle){BK=c._SQUARE;}BQ=BL.GetScaledSize(BN,BQ,BK);}}BR=BQ;this.maxRadius=Math.max(this.maxRadius,BQ);this.minRadius=Math.min(this.minRadius,BQ);}else{BR=this.maxUnitRadius;this.minRadius=this.maxRadius=this.maxUnitRadius;}}else{if(this.isBubbleChart){BP=0;BN=BI.GetProperty(A6.DssGraphMarkerSize,AE);if(BN){BP=BN;}BN=BI.GetData(this.VecSeriesInfo[BH].SeriesID,BO,2);if(BN===null){BJ[BH].IsNullData[BO]=true;}else{BJ[BH].IsNullData[BO]=false;BR=this.zAxis.ValueToBubbleSize(BP,BN);}}else{BR=BJ[BH].MarkerSize;}}if(BR){BR=Math.max(BR,1);BR=Math.floor(BR);}return BR;}function g(BI,BH,BP,BJ){var BO,BK,BG,BL,BM,BN=null;if(BP===0){BO=this.xAxis;}else{if(BP===1){BO=(this.VecSeriesInfo[BI].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;}else{if(BP===2){BO=this.zAxis;}}}if(BO===null){return BN;}BK=this.mDatasetPtr.GetData(this.VecSeriesInfo[BI].SeriesID,BH,BP);if(BK===null){return BN;}BG=BO.GetNumberFormat();BL=new Aq.TripleId({ObjectId:A7.DssGraphDataText,SeriesId:this.VecSeriesInfo[BI].SeriesID,GroupId:BH});BM=new Aq.NumberObject({TripleId:BL,GraphObjectManager:this,Number:BK,NumberFormat:BG,GraphCollectionObject:BJ,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:BP});if(BM!==null){BN=BM.mText;}return BN;}function Aj(BL,BG,BH,BK){var BJ,BI;BJ=BL.GetBoundingRectNoRotation();BI=BJ;BL.SetRect(BI);return Math.sqrt((BI.x-BG.x)*(BI.x-BG.x)+(BI.y-BG.y)*(BI.y-BG.y));}function AJ(BL,BP,BV,BS){var BQ=false,BN=false,BO=2,BR,BG=0,BK,BU=0,BJ=0,BI,BT,BH,BM=this.isSmarted?BS:this.labelLocation;switch(BV){case M.FR_90:case M.FR_270:BQ=true;break;case M.FR_45:case M.FR_315:BN=true;break;default:break;}if(BN){BO=1.414;}BR=BL.GetBoundingRectNoRotation();if((BM===Ah.DssGraphDTPositionOutMin)||(BM===Ah.DssGraphDTPositionInMin)){BG=BN?BP.height/2+BP.width/2:BP.width;}else{BG=BN?BP.width/2+BP.height/2:BP.height;}BK=BG;switch(BM){case Ah.DssGraphDTPositionCenter:BU=BJ=0;break;case Ah.DssGraphDTPositionOutMin:BU=1;BK+=(BQ||BN)?BR.Height/BO:BR.Width/2;break;case Ah.DssGraphDTPositionInMin:BU=-1;BK+=(BQ||BN)?BR.Height/BO:BR.Width/2;break;case Ah.DssGraphDTPositionInMax:BJ=-1;BH=BQ?BR.Width:BR.Height;BK+=(BQ||BN)?BH/BO:BR.Height/2;break;case Ah.DssGraphDTPositionOutMax:BJ=1;BH=BQ?BR.Width:BR.Height;BK+=(BQ||BN)?BH/BO:BR.Height/2;break;default:break;}BI=BP.GetCenter().x+BU*BK;BT=BP.GetCenter().y+BJ*BK;BL.MoveTo(BI,BT,A3.CENTER);return BG;}function AT(BK,BN,BI,BH){var BG=BI.GetCenter(),BM=(BH.y+BH.height-BG.y)<0,BO=(BH.x+BH.width-BG.x)<0,BL=(BH.x-BG.x)*(BH.x+BH.width-BG.y),BJ=(BH.y-BG.y)*(BH.y+BH.height-BG.y);if(BJ<=0){BK.x=BO?BI.x:BI.x+BI.width;BK.y=BO?Math.round(BI.y+0.5*BI.height):Math.round(BI.y+0.5*BI.height);BN.y=BG.y;BN.x=BO?BH.x+BH.width:BH.x;}else{BK.x=BM?Math.round(BI.x+0.5*BI.width):Math.round(BI.x+0.5*BI.width);BK.y=BM?BI.y:BI.y+BI.height;if(BL<=0){BN.x=BG.x;BN.y=BM?BH.y+BH.height:BH.y;}else{if(BO){BN.x=BM?BH.x+BH.width:BH.x+BH.width;BN.y=BM?BH.y+BH.height:BH.y;}else{BN.x=BM?BH.x:BH.x;BN.y=BM?BH.y+BH.height:BH.y;}}}}function BF(BI,BH,BL,BM,BK){var BJ=0,BG=0;switch(BK){case Ah.DssGraphDTPositionOutMin:BJ=1;BI.x=BL.x+BL.width;BI.y=BL.y+0.5*BL.height;BM-=BL.width/2;break;case Ah.DssGraphDTPositionInMin:BJ=-1;BI.x=BL.x;BI.y=BL.y+0.5*BL.height;BM-=BL.width/2;break;case Ah.DssGraphDTPositionInMax:BG=-1;BI.x=BL.x+0.5*BL.width;BI.y=BL.y;BM-=BL.height/2;break;case Ah.DssGraphDTPositionOutMax:BG=1;BI.x=BL.x+0.5*BL.width;BI.y=BL.y;BM-=BL.height/2;break;}BH.x=BI.x+BJ*BM;BH.y=BI.y+BG*BM;}function Ad(BJ,BM,BO,BI){var BG,BK,BN,BL,BH;if(BJ===null){return ;}BG=AJ.call(this,BJ,BM,BO,this.labelLocation);if(this.dataLabelLine){BK=new Aq.Point2D();BN=new Aq.Point2D();BF.call(this,BK,BN,BM,BG,this.labelLocation);BL=new Aq.TripleId({ObjectId:A7.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3});BH=new Aq.StraightLineObject({TripleId:BL,GraphObjectManager:this,Start:BK,End:BN});this.mGraphObjectList.push(BH);BI.AddGraphObject(BH);}}function Ae(BM,BL,BK){var BH=this.mDatasetPtr,BN=BH.dataLabelStyle,BJ="",BI,BG,BO;switch(BN){case AK:BI=g.call(this,BM,BL,0,BK);BG=g.call(this,BM,BL,1,BK);BJ="("+BI+", "+BG+")";break;case J:BJ=BH.GetTextLabel(this.VecSeriesInfo[BM].SeriesID,BL);break;}BO=new Aq.TextObject({TripleId:new Aq.TripleId({ObjectId:A7.DssGraphDataText,SeriesId:this.VecSeriesInfo[BM].SeriesID,GroupId:BL}),GraphObjectManager:this,GraphCollectionObject:BK});BO.SetText(BJ);this.mPostTrendLineObjects.push(BO);return BO;}function Ay(BM){var BI,BJ=this.VecSeriesInfo.length,BG=BM.length,BL,BK;if(BG>0){BM.splice(0,BG);}for(BI=0;BI<BJ;++BI){var BH=this.VecSeriesInfo[BI].ShowDataLabel;if(BH){BL=new Aq.TripleId({ObjectId:A7.DssGraphDataText,SeriesId:this.VecSeriesInfo[BI].SeriesID});BK=new Aq.GraphCollectionObject({TripleId:BL,GraphObjectManager:this,CollectionType:AN.CT_TEXT});BM.push(BK);this.AddToMap(BK);}}}function K(BN){var BJ,BM=this.VecSeriesInfo,BL=BM.length,BI=BN.length,BG,BK;if(BI>0){BN.splice(0,BI);}for(BJ=0;BJ<BL;++BJ){var BH=BM[BJ].ShowDataLabel;if(BH){BG=new Aq.TripleId({ObjectId:A7.DssGraphDataText,SeriesId:BM[BJ].SeriesID});BK=new Aq.GraphCollectionObject({TripleId:BG,GraphObjectManager:this,CollectionType:AN.CT_TEXT});BN.push(BK);this.AddToMap(BK);}}}function y(){if(this.mChartContextPtr.mIsGraphMatrix){return(this.xAxis&&this.xAxis.mOptions.mUseCustomMinMax)||(this.y1Axis&&this.y1Axis.mOptions.mUseCustomMinMax)||(this.y2Axis&&this.y2Axis.mOptions.mUseCustomMinMax);}return false;}function Ab(BH){var BG=this.mDataArea,BI=y.call(this);if(BI){if(BH.x<BG.x||BH.x+BH.width>BG.x+BG.width){return false;}if(BH.y<BG.y||BH.y+BH.height>BG.y+BG.height){return false;}}return true;}function AZ(BR,BW){var BP=this.VecSeriesInfo,BL=BP.length,BH=this.waitingList,BK,BJ,BT=null,BO=0,BV,BU,BN,BS;if(BH&&this.waitingList.length){var BQ=this.waitingList,BM=BQ.length,BI;this.hiddenMarkers=this.hiddenMarkers||[];BT=this.hiddenMarkers;for(BK=0;BK<BM;BK++){BI=BQ[BK].Id;BT[BI.mSeriesId]=BT[BI.mSeriesId]||[];BT[BI.mSeriesId][BI.mGroupId]=1;}}for(BK=0;BK<BL;++BK){BO=0;BV=BP[BK].SeriesID;BU=BP[BK].IsNullData.length;for(BJ=0;BJ<BU;++BJ){if(BT&&BT[BV][BJ]!==undefined){if(!BP[BK].IsNullData[BJ]){++BO;}continue;}var BG=BP[BK].ShowDataLabel;if(!BG){this.standAloneMarkers.push(BR[BK][BO++]);continue;}if(!BP[BK].IsNullData[BJ]){BN=new Aq.GMDataLabelInfo();BN.isValid=true;BN.GroupId=BJ;BN.SeriesId=BV;BN.HostMarkerBound=BR[BK][BJ];BN.HostMarkerPoint=BN.HostMarkerBound.GetCenter();BN.Label=Ae.call(this,BK,BJ,BW[BK]);if(!Ab.call(this,BN.HostMarkerBound)){BN.isValid=false;continue;}if(BN.Label===null||BN.Label===undefined){BN.isValid=false;continue;}else{}this.mDataLabels.push(BN);BW[BK].AddGraphObject(BN.Label);}}}delete this.hiddenMarkers;}function C(BI){var BL,BK,BJ=BI.length,BH=0,BG=[];for(BL=0;BL<BJ;++BL){if(BI[BL].length>0){BH=BI[BL].length;for(BK=0;BK<BH;++BK){BG.push(BI[BL][BK]);}}}return BG;}function BC(BH){var BG=this.mDataArea;if(BH.x<BG.x||BH.y<BG.y){return true;}return(BH.x+BH.width>BG.x+BG.width||BH.y+BH.height>BG.y+BG.height);}function W(BH,BK,BL,BG){var BJ=Math.max(BH.y,BK.y),BI=BH.y+BK.y-BJ;if(BI>BG.y||BJ<BG.y){return false;}BJ=Math.max(BH.x,BK.x);BI=BH.x+BK.x-BJ;return !(BI>Math.max(BL.x,BG.x)||BJ<Math.min(BL.x,BG.x));}function AL(BH,BK,BL,BG){var BJ=Math.max(BH.x,BK.x),BI=BH.x+BK.x-BJ;if(BI>BG.x||BJ<BG.x){return false;}BJ=Math.max(BH.y,BK.y);BI=BH.y+BK.y-BJ;return !(BI>Math.max(BL.y,BG.y)||BJ<Math.min(BL.y,BG.y));}function Z(BK,BL,BJ){var BH=true,BG=BJ.length,BI;for(BI=0;BI<BG;++BI){BH=(BI===0)||(BI===2);if(BH){if(W.call(this,BK,BL,BJ[BI],BJ[(BI+1)%BG])){return true;}}else{if(AL.call(this,BK,BL,BJ[BI],BJ[(BI+1)%BG])){return true;}}}return false;}function f(BT,BS){var BI=1,BO,BX,BR,BP,BJ,BY,BK,BV,BM=[],BQ,BN,BL,BW,BH,BG,BU;switch(BT.LabelRotation){case M.FR_NORMAL:case M.FR_CUSTOME:case M.FR_90:case M.FR_180:case M.FR_270:case M.FR_HOTEL:break;case M.FR_45:break;case M.FR_315:BI=-1;break;}BO=BT.Label.GetBoundingRectNoRotation();BX=BO.GetCenter();BR=0.5*BO.width;BP=0.5*BO.height;BJ=Math.sqrt(BR*BR+BP*BP);for(BU=0;BU<4;++BU){BK=(BU===0||BU===3)?-1:1;BV=(BU===0||BU===1)?-1:1;BY=new Aq.Point2D({x:BK*BR,y:BV*BP});BM.push(BY);}for(BU=0;BU<4;BU++){BQ=(BU===0||BU===3)?180:0;BN=Math.atan(BM[BU].x/BM[BU].y);BL=Ar.RadianToDegree(BN);BL+=(BQ+BI*45);BW=Ar.DegreeToRadian(BL);BH=Math.round(BJ*Math.cos(BW))+BX.x;BG=Math.round(BJ*Math.sin(BW))+BX.y;BY=new Aq.Point2D({x:BH,y:BG});BS.push(BY);}}function e(BI,BL,BM,BK){var BH=BL.length,BG=0,BJ=0;BM=BM||false;BK=BK||false;if(!BK){for(BJ=0;BJ<BH;++BJ){if(BI.HasIntersection(BL[BJ])){++BG;}}}else{AQ.visPrint("Checking label overlap with tilt targets has not been implemented yet.");}return BG;}function q(BN,BG,BI){var BL=0,BH=BG.length,BP=((BN.LabelRotation===M.FR_45)||(BN.LabelRotation===M.FR_315)),BK=[],BJ=0,BO,BM;BI=BI||false;if(BP){f.call(this,BN,BK);for(BJ=0;BJ<BH;++BJ){BO=[];BO.push(BG[BJ].GetBottomLeft());BO.push(BG[BJ].GetBottomRight());BO.push(BG[BJ].GetTopRight());BO.push(BG[BJ].GetTopLeft());if(!BI){if(Z.call(this,BK[0],BK[1],BO)||Z.call(this,BK[1],BK[2],BO)||Z.call(this,BK[2],BK[3],BO)||Z.call(this,BK[3],BK[0],BO)){++BL;}}else{AQ.visPrint("We currently do not support tilt rectangle against tilt targets");}}}else{BM=BN.Label.GetBoundingRect();BL=e.call(this,BM,BG,false,BI);}return BL;}function B(BM){var BL,BI,BH=this.mDataArea,BK,BG,BN,BJ;BK=this.standAloneMarkers.length;BG=new Aq.Rect2D();for(BI=0;BI<BK;++BI){BG.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.standAloneMarkers[BI],BH,BG)){BM.UpdateMatrixRect(BG);}}BK=this.labelMatrix.length;for(BL=0;BL<BK;++BL){BG.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.labelMatrix[BL].HostMarker,BH,BG)){BM.UpdateMatrixRect(BG);}if(this.labelMatrix[BL].IsPut){BN=this.labelMatrix[BL].Label.GetBoundingRectNoRotation();if(this.mChartContextPtr.RectangleIntersection(BN,BH,BG)){BM.UpdateMatrixRect(BG,true,this.labelMatrix[BL].LabelRotation);}}}BJ=Math.round(0.95*BM.XCount*BM.YCount);return BM.Metric<BJ;}function N(BJ,BN,BM){var BH=new Aq.Point2D(),BI=new Aq.Point2D(),BG=new Aq.TripleId({ObjectId:A7.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3}),BL,BK;if(!BJ.IsValid){return false;}if(BJ.IsPut){if(BJ.SuggestedStart===Ah.DssGraphDTPositionPieSmart){if(this.dataLabelLine||(!this.dataLabelLine&&BJ.IsMoved(this.labelLocation))){BL=BJ.Label.GetBoundingRect();AT.call(this,BH,BI,BJ.HostMarker,BL);}else{return false;}}else{if(this.dataLabelLine||(!this.dataLabelLine&&BJ.IsMoved(this.labelLocation))){BF.call(this,BH,BI,BJ.HostMarker,BM,BJ.SuggestedStart);}else{return false;}}BK=new Aq.StraightLineObject({TripleId:BG,GraphObjectManager:this,StartPoint:BH,EndPoint:BI,GraphCollectionObject:BN});this.mGraphObjectList.push(BK);BN.AddGraphObject(BK);return true;}if(this.dataLabelLine){BF.call(this,BH,BI,BJ.HostMarker,BM,BJ.SuggestedStart);}else{return false;}BK=new Aq.StraightLineObject({TripleId:BG,GraphObjectManager:this,StartPoint:BH,EndPoint:BI,GraphCollectionObject:BN});this.mGraphObjectList.push(BK);BN.AddGraphObject(BK);return true;}function a(BJ,BK){var BO=this.labelMatrix.length,BM=new Aq.Point2D(),BP=new Aq.Rect2D(),BH,BN,BG,BL,BI;for(BL=0;BL<BO;++BL){BI=this.labelMatrix[BL];if(!BI.IsPut){BH=BI.Label.GetBoundingRectNoRotation();BN=BJ.IsAccomdatableConsiderRotation(BI.HostMarker,BH,BM,BI.LabelRotation);if(BN){BI.IsPut=true;BI.SuggestedStart=A2.DssGraphDTPositionPieSmart;BG=Aj.call(this,BI.Label,BI.HostMarker,BM,BI.LabelRotation);BH=BI.Label.GetBoundingRectNoRotation();N.call(this,BI,BK,BG);this.AddToMap(BI.Label);BP.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(BH,this.mDataArea,BP)){BJ.UpdateMatrixRect(BP,true,BI.LabelRotation);}}}}return true;}function As(BL){var BI,BN,BG,BK,BM,BJ,BH=this.VecSeriesInfo.length;BG=this.isBubbleChart?A7.DssGraphRiser:A7.DssGraphDataLine;BK=this.isBubbleChart?AN.CT_GENERAL_SHAPE:AN.CT_LINE;for(BI=0;BI<BH;++BI){BN=this.VecSeriesInfo[BI];BM=new Aq.TripleId({ObjectId:BG,SeriesId:BN.SeriesID,GroupId:At});BJ=new Aq.GraphCollectionObject({TripleId:BM,GraphObjectManager:this,CollectionType:BK});BL.push(BJ);this.AddToMap(BL[BI]);if(!this.mChartContextPtr.mIsGraphMatrix){this.AddLegendMarkerToCollection(BN.SeriesID,BL[BI],!this.isBubbleChart,true,BN.MarkerShape,BN.ConnectDataPoint);}}}function BB(BJ){var BH=this.labelMatrix.length,BM,BL,BI,BK,BG;for(BK=0;BK<BH;++BK){BG=this.labelMatrix[BK];BM=BG.Label.mTripleId;BI=M.FR_NORMAL;BL=this.mChartContextPtr.GetProperty(A6.DssGraphFontRotation,BM);if(BL){BI=BL;}if(!BG.IsPut){Ad.call(this,BG.Label,BG.HostMarker,BI,BJ);this.AddToMap(BG.Label);}}}function Aa(BL,BJ,BG,BH){var BI,BK;if(this.labelLocation===Ah.DssGraphDTPositionOutMin){BL.SuggestedStart=Ah.DssGraphDTPositionInMin;}BK=AJ.call(this,BL.Label,BL.HostMarker,BL.LabelRotation,BL.SuggestedStart);BI=BL.ToRectangle();if(BC.call(this,BI)||(q.call(this,BL,BJ)>0)||(q.call(this,BL,this.standAloneMarkers)>0)||(q.call(this,BL,BG)>0)){if(BL.SuggestedStart>=Ah.DssGraphDTPositionOutMax){return false;}++BL.SuggestedStart;if(BL.SuggestedStart===this.labelLocation){++BL.SuggestedStart;}if(BL.SuggestedStart>Ah.DssGraphDTPositionOutMax){return false;}return Aa.call(this,BL,BJ,BG,BH);}BG.push(BI);BL.IsPut=true;N.call(this,BL,BH,BK);return true;}function AG(BM,BP,BH){var BO=this.labelMatrix.length,BK=0,BL,BG,BN,BJ,BI;for(BI=0;BI<BO;++BI){BL=this.labelMatrix[BI];BG=AJ.call(this,BL.Label,BL.HostMarker,BL.LabelRotation,this.labelLocation);BN=BL.ToRectangle();BJ=(BC.call(this,BN)||(q.call(this,BL,BM)>0)||(q.call(this,BL,this.standAloneMarkers)>0)||(q.call(this,BL,BP)>0));if(!BJ){BP.push(BN);BL.IsPut=true;BL.SuggestedStart=this.labelLocation;N.call(this,BL,BH,BG);++BK;this.AddToMap(BL.Label);continue;}if(Aa.call(this,BL,BM,BP,BH)){++BK;this.AddToMap(BL.Label);}else{BL.SuggestedStart=this.labelLocation;}}return BK;}function t(BM,BR){var BO,BJ=this.VecSeriesInfo.length,BL,BI,BH=0,BQ,BP,BK,BN;for(BI=0;BI<BJ;++BI){BO=this.VecSeriesInfo[BI];BL=0;BQ=this.VecSeriesInfo[BI].SeriesID;BP=this.VecSeriesInfo[BI].IsNullData.length;for(BH=0;BH<BP;++BH){var BG=this.VecSeriesInfo[BI].ShowDataLabel;if(!BG){this.standAloneMarkers.push(BM[BI][BL++]);continue;}if(!this.VecSeriesInfo[BI].IsNullData[BH]){BK=new Aq.LabelInfo();BK.IsValid=true;BK.GroupId=BH;BK.SeriesId=BQ;BK.HostMarker=BM[BI][BL++];BK.Label=Ae.call(this,BI,BH,BR[BI]);if(BK.Label===null){BK.IsValid=false;continue;}else{}this.labelMatrix.push(BK);BR[BI].AddGraphObject(BK.Label);}}}}function S(BR,BI){var BP,BN=this.VecSeriesInfo.length,BL,BJ=0,BH,BM,BS,BU=0,BO,BQ,BT,BK;for(BL=0;BL<BN;++BL){BP=this.VecSeriesInfo[BL];var BG=this.mDatasetPtr.showSeriesDatalabel(BP.SeriesID);if(BG){BM=new Aq.TripleId({ObjectId:A7.DssGraphDataText,SeriesId:BP.SeriesID});BH=new Aq.GraphCollectionObject({TripleId:BM,GraphObjectManager:this,CollectionType:AN.CT_TEXT});BS=BR[BL];BU=0;BQ=BP.IsNullData.length;for(BJ=0;BJ<BQ;++BJ){if(BP.IsNullData[BJ]){continue;}BT=Ae.call(this,BL,BJ,BH);BH.AddGraphObject(BT);this.AddToMap(BT);BM=BT.mTripleId;BK=M.FR_NORMAL;BO=this.mChartContextPtr.GetProperty(A6.DssGraphFontRotation,BM);if(BO){BK=BO;}Ad.call(this,BT,BS[BU++],BK,BI);}if(BH.GetCollectionSize()>0){this.AddToMap(BH);}}}}function A(){var BM=this.mChartContextPtr,BJ=this.dataLabelManager,BI,BG=this.mDataLabels,BH=BG.length,BK=[],BL=new Aq.Rect2D({x:0,y:0,width:BM.mGraphWidth,height:BM.mGraphHeight});if(BJ===null||BJ===undefined){BJ=this.dataLabelManager=new Aq.DataLabelManager({DataArea:BL});BJ.ChartContext=BM;}BJ.RectangleObjects=BJ.RectangleObjects.concat(this.standAloneMarkers);for(BI=0;BI<BH;++BI){BK.push(BG[BI].HostMarkerBound);}BJ.RectangleObjects=BJ.RectangleObjects.concat(BK);return BJ;}function AX(){var BG=this.mDataLabels,BI=BG.length,BH;for(BH=0;BH<BI;++BH){BG[BH].CenterXOffset=BG[BH].HostMarkerBound.width/2;BG[BH].CenterYOffset=BG[BH].HostMarkerBound.height/2;}}function P(){var BW=this.VecSeriesInfo.length,BH,BR,BU,BV,BI,BM,BL,BK,BQ,BX,BS,BT,BN=this.mDatasetPtr,BJ=this.mChartContextPtr,BG,BO,BP;if(this.mTrendLineObjects===null){this.mTrendLineObjects=[];}if(BN.isBare(BJ.IsPieChart())){return ;}for(BU=0;BU<BW;++BU){BR=this.VecSeriesInfo[BU];BH=BR.SeriesID;BK=this.mDatasetPtr.GetTrendLineOfSeries(BH);BV=BR.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BL=new Aq.TripleId({ObjectId:A7.DssGraphTrendLine,SeriesId:BH});if(BK){BQ=BK.getTrendLineType();if(BQ!==Q.DssGraphRegressionNone){BX=BK.getIdentity();BI=BK.getTrendLineValuesWithForecast();BM=BK.getTrendLineValues();if(E(BM)<=1){continue;}BS=BK.getCoefficients(true);BT=BS.length-1;if(BI&&BI.length){BG={mRegressionType:BQ,mOrder:BT,mPeriod:0,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeasonal:false};BO=new Aq.TrendLineObject({TripleId:BL,GraphObjectManager:this,GraphCollectionObject:null,TrendLineOptions:BG,XAxis:this.xAxis,YAxis:BV,TrendLineValues:BI,Coefficients:BS,IsVertical:true,Identity:BX});if(BO!==undefined&&BO!==null){BP=BO.CreateTrendLine();if(BP!==undefined&&BP!==null){this.mTrendLineObjects.push(BP);}}}}}}}function AD(BJ,BQ,BM,BG,BI,BP,BO,BL,BK,BN){var BH={};BH.rect=new Aq.Rect2D({x:0,y:0,width:BG+2*BK,height:BQ+2*BK});switch(BJ){case AC:if(BN){BH.xOffset=BP+BK+BI;BH.yOffset=BK+BM;BH.rect.x=BP;BH.rect.y=0;}else{BH.xOffset=BL-BK-BI;BH.yOffset=BP-BK-BM;BH.rect.x=BL-2*BK-BG;BH.rect.y=BP-2*BK-BQ;}break;case AA:if(BN){BH.xOffset=BP-BK-BI;BH.yOffset=BK+BM;BH.rect.x=BP-2*BK-BG;BH.rect.y=0;}else{BH.xOffset=BL-BK-BI;BH.yOffset=BP+BK+BM;BH.rect.x=BL-2*BK-BG;BH.rect.y=BP;}break;case z:if(BN){BH.xOffset=BP+BK+BI;BH.yOffset=BO/2;BH.rect.x=BP;BH.rect.y=BO/2-BK-BM;}else{BH.xOffset=BL/2;BH.yOffset=BP-BK-BM;BH.rect.x=BL/2-BK-BI;BH.rect.y=BP-2*BK-BQ;}break;case x:if(BN){BH.xOffset=BP-BK-BI;BH.yOffset=BO/2;BH.rect.x=BP-2*BK-BG;BH.rect.y=BO/2-BK-BM;}else{BH.xOffset=BL/2;BH.yOffset=BP+BK+BM;BH.rect.x=BL/2-BK-BI;BH.rect.y=BP;}break;case w:if(BN){BH.xOffset=BP+BK+BI;BH.yOffset=BO-BK-BM;BH.rect.x=BP;BH.rect.y=BO-2*BK-BQ;}else{BH.xOffset=BK+BI;BH.yOffset=BP-BK-BM;BH.rect.x=0;BH.rect.y=BP-2*BK-BQ;}break;case u:if(BN){BH.xOffset=BP-BK-BI;BH.yOffset=BO-BK-BM;BH.rect.x=BP-2*BK-BG;BH.rect.y=BO-2*BK-BQ;}else{BH.xOffset=BK+BI;BH.yOffset=BP+BK+BM;BH.rect.x=0;BH.rect.y=BP;}break;}return BH;}function An(BK,BR,BN,BL,BI,BG){var BO=BK.rect,BM,BJ,BH,BP,BQ;if(BO.y<0||BO.y+BO.height>BR){BK.cannotFitVertically=true;return ;}if(BO.x<0||BO.x+BO.width>BN){BK.cannotFitHorizontally=true;}BM=BI.length;for(BJ=0;BJ<BM;++BJ){BH=BI[BJ].GetBoundingRect();if(BO.HasIntersection(BH)){++BK.overlapRefLabelCount;}}BM=BG.length;for(BJ=0;BJ<BM;++BJ){BQ=BG[BJ];if(BQ.isVertical){if(BO.x<BQ.position&&BO.x+BO.width>BQ.position){++BK.overlapRefLineCount;}}else{if(BO.y<BQ.position&&BO.y+BO.height>BQ.position){++BK.overlapRefLineCount;}}}BM=BL.length;for(BJ=0;BJ<BM;++BJ){BP=BL[BJ];if(BP.mIsShown){BH=BP.GetBoundingRect();if(BO.HasIntersection(BH)){++BK.overlapDataLabelCount;BK.overlapDataLabels.push(BL[BJ]);}}}}function AH(Bb,BW,BO){var BI=this.mChartContextPtr,Ba=BI.GetGraphMatrixContext(),BH=Ba.getPadding(Al.kRefLabel),BN=BO.length,BL,BM,BT,BQ,BK,BR,BG,BY,BX,BU,BJ,BP,BV,BS,BZ;for(BY=0;BY<BN;++BY){BL=BO[BY];BM=new Aq.TextObject({TripleId:BL.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:BL.identity});if(BM!==null){BM.SetText(BL.labelText);for(BX=0;BX<2;++BX){if(BX===1){BJ=BM.mText;BM.SetText(BJ[0]+"...");BM.rect.height=0;BM.rect.width=0;}BG=BM.GetBoundingRect();BQ=BG.height;BR=BQ/2;BT=BG.width;BK=BT/2;BS=[];for(BU=AC;BU<=u;++BU){BP={};BP.position=BU;BP.cannotFitVertically=false;BP.cannotFitHorizontally=false;BP.overlapRefLabelCount=0;BP.overlapRefLineCount=0;BP.overlapDataLabelCount=0;BP.overlapDataLabels=[];BV=AD.call(this,BU,BQ,BR,BT,BK,BL.position,Bb,BW,BH,BL.isVertical);BP.xOffset=BV.xOffset;BP.yOffset=BV.yOffset;BP.rect=BV.rect;An.call(this,BP,Bb,BW,this.shownDataLabels,this.shownRefLabels,BO);BS.push(BP);}BS.sort(k);if(BS[0].cannotFitVertically){break;}if(BS[0].cannotFitHorizontally){if(BY===0){continue;}else{break;}}BM.MoveTo(BS[0].xOffset,BS[0].yOffset,A3.CENTER);BM.mIsShown=true;BZ=BS[0].overlapDataLabelCount;for(BU=0;BU<BZ;++BU){BS[0].overlapDataLabels[BU].mIsShown=false;}this.mPostTrendLineObjects.push(BM);this.shownRefLabels.push(BM);break;}}}}function Ao(){var BS=this.VecSeriesInfo.length,BI,BV,Bd,BZ,Be,BW,Bb=[],BK,Bc,BT,BJ,Ba,Bk,Bi,BP,BL,Bj,Bf,BH,BN={},Bh,BG,BQ=this.mDatasetPtr,BY=BQ.GetSeriesCount()*BQ.GetGroupCount(),BM=this.mChartContextPtr,BX=BM.mGraphWidth,Bg=BM.mGraphHeight,BO,BR=[];if(this.mReferenceLineObjects===null){this.mReferenceLineObjects=[];}if(BM.mPartialRendering===false){BY=this.DPCount;}for(Bd=0;Bd<BS;++Bd){BV=this.VecSeriesInfo[Bd];BI=BV.SeriesID;BT=this.mDatasetPtr.GetReferenceLinesOfSeries(BI);Be=BV.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BG={};BG.Condense=Be.mCondenseLabels;if(!BG.Condense){if(Be.mNumberFormat.isDefault){var BU=new Aq.ChartAdvFormat();BM.getAxisAutoNumberFormat(BU,Be.mPrimaryMetrics);Be.mNumberFormat=BU;}BG.NumberFormat=Be.mNumberFormat.mCustomFormat;}BO=BT.length;for(BZ=0;BZ<BO;++BZ){BK=new Aq.TripleId({GroupId:BZ,ObjectId:A7.DssGraphReferenceLine,SeriesId:BI});Bh=new Aq.TripleId({ObjectId:A7.DssGraphRefLineText,SeriesId:BI,GroupId:BZ});Bb=[];Bc=BT[BZ];if(Bc){Bk=Bc.getIdentity();BW=Bc.getReferenceLineValue();Bi=Bc.getReferenceLineDirection();BJ=Bc.getReferenceLineLabel(false,false,BG);Ba=Bc.getLevel();if(BY===0){continue;}if(BW===null&&BW===undefined){continue;}BP=(Bi!=="horizontal");if(BP){Bj=this.xAxis.GetPositionByValue(BW);}else{Bj=Be.GetPositionByValue(BW);}if(Bj!==null){Bf=1;if(BP){if(Bj===0){Bj=1;}else{if(Bj===BX){--Bj;}}BH=Bg-1;Bb.push(new Aq.Point2D({x:Bj,y:Bf}));Bb.push(new Aq.Point2D({x:Bj,y:BH}));BN.x=Bj;BN.y=(Bb[0].y+Bb[1].y)/2;}else{if(Bj===0){Bj=1;}else{if(Bj===Bg){--Bj;}}BH=BX-1;Bb.push(new Aq.Point2D({x:Bf,y:Bj}));Bb.push(new Aq.Point2D({x:BH,y:Bj}));BN.x=(Bb[0].x+Bb[1].x)/2;BN.y=Bj;}BL=new Aq.StraightLineObject({TripleId:BK,GraphObjectManager:this,StartPoint:Bb[0],EndPoint:Bb[1],GraphCollectionObject:null,Identity:Bk,Shape:c._LINE,MidPoint:BN});if(BL!==null){if(!BL.mFormatLinePtr){BL.mFormatLinePtr=new Aq.FormatLine();}this.mReferenceLineObjects.push(BL);BR.push({tripleId:Bh,identity:Bk,isVertical:BP,position:Bj,labelText:BJ});}}else{AQ.visPrint("Reference line point calculation abnormal:");AQ.visPrint("\tref line #: "+BZ+" direction: "+Bi);AQ.visPrint("\tvalue = "+BW);if(BP){AQ.visPrint("\tx = "+Bj);}else{AQ.visPrint("\ty = "+Bj);}}}}}AH.call(this,Bg,BX,BR);}function p(){var BH=this.mTrendLineObjects.length,BG;for(BG=0;BG<BH;++BG){this.mTrendLineObjects[BG].Draw();}}function X(){var BH=this.mReferenceLineObjects,BG;for(BG=0;BG<BH.length;++BG){BH[BG].Draw();}}function E(BI){var BH,BG=0;for(BH=0;BH<BI.length;BH++){if(BI[BH]!==null){BG++;}}return BG;}function Ax(BR,BM){if(!BM){return ;}var BJ=this.mChartContextPtr,BO=this.mDatasetPtr,Bb=this.mChartContextPtr.GetGraphMatrixContext(),Bc=BJ.mIsGraphMatrix,BP,BW,Bf,BI,BY,BU,Ba,BV,BH,Bd,BX;var BQ=BO.showDatalabels();if(Bc&&BQ){Bd=this.dataLabelManager;if(Bd===null||Bd===undefined){BX=new Aq.Rect2D({x:0,y:0,width:BJ.mGraphWidth,height:BJ.mGraphHeight});Bd=this.dataLabelManager=new Aq.DataLabelManager({DataArea:BX});Bd.ChartContext=BJ;}if(Bb.mMarkerShape===BA.DssGraphMarkerShape2DPie||Bb.mMarkerShape===BA.DssGraphMarkerShape2DRingPie){this.mPieRenderer.enableDataLabel(Bd,this.shownDataLabels);BV=this.mPieRenderer.dataLabels;BU=BV.length;for(Ba=0;Ba<BU;++Ba){BH=BV[Ba].Label;if(BH.mIsShown){this.AddToMapAndList(BH);}}}else{BW=[];K.call(this,BW);AZ.call(this,BR,BW);AX.call(this);Bd=A.call(this);Bd.PlaceDataLabels(this.mDataLabels,this.shownDataLabels);}}else{if(this.isSmarted){BP=[];Bf=[];BI=[];BY=C.call(this,BR);if(BY){Bf=BY;}Ay.call(this,BP);t.call(this,BR,BP);var BL=new Aq.TripleId({ObjectId:A7.DssGraphDataTextConnectLine,SeriesId:this.TripleId.mSeriesId,GroupId:this.TripleId.mGroupId}),BK=new Aq.GraphCollectionObject({TripleId:BL,GraphObjectManager:this,CollectionType:AN.CT_LINE});var Be=this.labelMatrix.length,BN=AG.call(this,Bf,BI,BK);if(BN===Be){return ;}if(BN===0){BM=false;}else{var BT=new Aq.Rect2D(),BZ,BG;r.call(this,BT);BZ=new Aq.GridMap({Rect:this.mDataArea,Unit:BT,dataLabelPadding:5});BG=B.call(this,BZ);if(BG){var BS=function BS(Bh,Bg){return Bh.HostMarker.x-Bg.HostMarker.x;};this.labelMatrix.sort(BS);a.call(this,BZ,BK);}else{BB.call(this,BK);}}if(BK.GetCollectionSize()){this.AddToMap(BK);}if(!this.isSmarted){if(this.isSmarted){this.mPostTrendLineObjects.splice(0,this.mPostTrendLineObjects.length);}if(!this.dataLabelLine){S.call(this,BR);}else{BK=new Aq.GraphCollectionObject({TripleId:BL,GraphObjectManager:this,CollectionType:AN.CT_LINE});S.call(this,BR,BK);if(BK.GetCollectionSize()>0){this.AddToMap(BK);}}}}}}function D(){var BI=this.mChartContextPtr,BG=this.mDataArea,BH=this.mPostTrendLineObjects;if(BI.mIsGraphMatrix){BH=[];}this.y1Axis.GenerateCustomLine(BG,BH);if(this.mChartContextPtr.IsDualAxis()){this.y2Axis.GenerateCustomLine(BG,BH);}this.xAxis.GenerateCustomLine(BG,BH);if(BI.mIsGraphMatrix&&BH.length){this.mGraphObjectList=BH.concat(this.mGraphObjectList);}}function I(BJ){var BN=this.mChartContextPtr,BK=BN.mGraphHeight,BI=BN.mGraphWidth,BM,BH,BL,BG;if(BJ===undefined||BJ===null){return false;}BM=BJ.mOptions;BH=BM.mAxisCustomValue;BL=BJ.IsVerticalAxis();BG=BJ.ValueToPosition(BH);if(!BM.mDrawCustomLine){return false;}if(BH>BJ.mMaxTick||BH<BJ.mMinTick){return false;}if(BG===0){return false;}if(BL){if(BG===BK){return false;}}else{if(BG===BI){return false;}}return true;}function AM(BL,BS,BG,BR,BP,BN,BI,BJ){var BH={},BM=BS/2,BK=BG/2,BO=BJ.IsVerticalAxis(),BQ;if(BJ.mTripleId.mObjectId===A7.DssGraphY2Body){BQ=A4;}else{if(BJ.mTripleId.mObjectId===A7.DssGraphX2Body){BQ=L;}else{BQ=BO?A5:O;}}BH.rect=new Aq.Rect2D({x:0,y:0,width:BG+2*BI,height:BS+2*BI});switch(BL){case 0:switch(BQ){case A5:BH.xOffset=BI+BK;BH.yOffset=BR-BI-BM;BH.rect.y=BR-2*BI-BS;BH.rect.x=0;break;case O:BH.xOffset=BR-BI-BK;BH.yOffset=BP-BI-BM;BH.rect.y=BP-2*BI-BS;BH.rect.x=BR-2*BI-BG;break;case A4:BH.xOffset=BN-BI-BK;BH.yOffset=BR-BI-BM;BH.rect.y=BR-2*BI-BS;BH.rect.x=BN-2*BI-BG;break;case L:BH.xOffset=BR-BI-BK;BH.yOffset=BI+BM;BH.rect.y=0;BH.rect.x=BR-2*BI-BG;break;}break;case 1:switch(BQ){case A5:BH.xOffset=BI+BK;BH.yOffset=BR+BI+BM;BH.rect.y=BR;BH.rect.x=0;break;case O:BH.xOffset=BR+BI+BK;BH.yOffset=BP-BI-BM;BH.rect.y=BP-2*BI-BS;BH.rect.x=BR;break;case A4:BH.xOffset=BN-BI-BK;BH.yOffset=BR+BI+BM;BH.rect.y=BR;BH.rect.x=BN-2*BI-BG;break;case L:BH.xOffset=BR+BI+BK;BH.yOffset=BI+BM;BH.rect.y=0;BH.rect.x=BR;break;}break;}return BH;}function Az(BK,BQ,BN,BL,BH,BI){var BO=BK.rect,BM,BJ,BG,BP;if(BO.y<0||BO.y+BO.height>BQ){return false;}if(BO.x<0||BO.x+BO.width>BN){return false;}BM=BI.length;for(BJ=0;BJ<BM;++BJ){BG=BI[BJ].GetBoundingRect(true);if(BO.HasIntersection(BG)){return false;}}BM=BH.length;for(BJ=0;BJ<BM;++BJ){BG=BH[BJ].GetBoundingRect(true);if(BO.HasIntersection(BG)){return false;}}BM=BL.length;for(BJ=0;BJ<BM;++BJ){BP=BL[BJ];if(BP.mIsShown){BG=BP.GetBoundingRect(true);if(BO.HasIntersection(BG)){return false;}}}return true;}function AS(BI){var BL=this.mChartContextPtr,BW=BL.mGraphWidth,Ba=BL.mGraphHeight,BY=BL.mpGraphMatrixContext,BP=BI.mOptions.mAxisCustomValue,BN=BI.Key==="Y1"||BI.Key==="Y2",BQ=this.mDatasetPtr.fetchShownLabels(BN),Bb=BQ&&BQ[BI.Key],BK=Bb&&Bb.length,BO,BJ=false,BX,Be,BH,BM,BT,BG,BR,BS,Bd,BZ,BV,BU,Bc=BY.getPadding(Al.kAxisOriginLabel);BT=Aq.gAxisObjects[BI.getIndex()].mCustomLabelId;for(BX=0;BX<BK&&!BJ;++BX){BO=Bb[BX];if(BO===BP){BJ=true;}}if(BJ){return ;}Be=new Aq.NumberObject({TripleId:BT,GraphObjectManager:this,Number:BP,NumberFormat:BI.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BI.mCondenseLabels});if(Be===null||Be===undefined){return ;}BM=Be;BH=Be.mText;BM.SetText(BH);BG=BM.GetBoundingRect(true);BR=BG.height;BS=BG.width;Bd=BI.ValueToPosition(BP);BZ=false;for(BX=0;BX<=1&&!BZ;++BX){BV={};BU=AM.call(this,BX,BR,BS,Bd,Ba,BW,Bc,BI);BV.xOffset=BU.xOffset;BV.yOffset=BU.yOffset;BV.rect=BU.rect;BZ=Az.call(this,BV,Ba,BW,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(BZ){BM.MoveTo(BV.xOffset,BV.yOffset,A3.CENTER);BM.mIsShown=true;this.mPostTrendLineObjects.push(BM);this.axisOriginLabels.push(BM);}}function AW(BL,BO,BH,BG,BM,BJ){var BI={},BN=BO/2,BK=BH/2;BI.rect=new Aq.Rect2D({x:0,y:0,width:BH+2*BJ,height:BO+2*BJ});switch(BL){case 0:BI.xOffset=BG+BJ+BK;BI.yOffset=BM-BJ-BN;BI.rect.x=BG;BI.rect.y=BM-2*BJ-BO;break;case 1:BI.xOffset=BG-BJ-BK;BI.yOffset=BM-BJ-BN;BI.rect.x=BG-2*BJ-BH;BI.rect.y=BM-2*BJ-BO;break;case 2:BI.xOffset=BG-BJ-BK;BI.yOffset=BM+BJ+BN;BI.rect.x=BG-2*BJ-BH;BI.rect.y=BM;break;case 3:BI.xOffset=BG+BJ+BK;BI.yOffset=BM+BJ+BN;BI.rect.x=BG;BI.rect.y=BM;break;}return BI;}function A1(BI){var BL=this.mChartContextPtr,BX=BL.mGraphWidth,Bc=BL.mGraphHeight,BZ=BL.mpGraphMatrixContext,BG,BS,BU,BK,BP,BN,BM,Ba,BV,BJ,BO,BH,BR,BT,Bb,BQ,BW,BY,Bd=BZ.getPadding(Al.kAxisOriginLabel);BP=this.xAxis;BV=Aq.gAxisObjects[BP.getIndex()].mCustomLabelId;BG=BI?this.y1Axis:this.y2Axis;BS=BG.mOptions.mAxisCustomValue;BU=BG.ValueToPosition(BS);BK=new Aq.NumberObject({TripleId:BV,GraphObjectManager:this,Number:BS,NumberFormat:BG.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BP.mCondenseLabels});BN=BP.mOptions.mAxisCustomValue;BM=BP.ValueToPosition(BN);Ba=new Aq.NumberObject({TripleId:BV,GraphObjectManager:this,Number:BN,NumberFormat:BP.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BP.mCondenseLabels});BJ="("+Ba.mText+", "+BK.mText+")";BO=new Aq.TextObject({TripleId:BV,GraphObjectManager:this,GraphCollectionObject:null});BO.SetText(BJ);BH=BO.GetBoundingRect(true);BR=BH.height;BT=BH.width;Bb=false;for(BY=0;BY<4&&!Bb;++BY){BQ={};BW=AW.call(this,BY,BR,BT,BM,BU,Bd);BQ.xOffset=BW.xOffset;BQ.yOffset=BW.yOffset;BQ.rect=BW.rect;Bb=Az.call(this,BQ,Bc,BX,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(Bb){BO.MoveTo(BQ.xOffset,BQ.yOffset,A3.CENTER);BO.mIsShown=true;this.mPostTrendLineObjects.push(BO);this.axisOriginLabels.push(BO);}}function AO(){var BI=0,BH,BG,BJ;BH=I.call(this,this.y1Axis);BG=I.call(this,this.y2Axis);BJ=I.call(this,this.xAxis);if((BH||BG)&&BJ){BI=true;}if(BI){A1.call(this,BH);}else{if(BH){AS.call(this,this.y1Axis);}if(BG){AS.call(this,this.y2Axis);}if(BJ){AS.call(this,this.xAxis);}}}function l(BW,BV){var BN=this.mChartContextPtr,BQ=null,BK,BG,BO,BJ,BM=BW.Id,BR=BW.MarkerType,BP=BW.Shape,BI=BW.Position,BT=BW.Size,BH=[];if(BN.mIsGraphMatrix){var BS=BW.BoundingBox;if(U.call(this,BW)){if(this.waitingList===null){this.waitingList=[];}this.waitingList.push(BW);return[];}BK=null;switch(BR){case BA.DssGraphMarkerShapeGMTick:var BU=BN.transformRectToTicker(BS,true);if(BU.length>=2){BQ=new Aq.StraightLineObject({TripleId:BM,GraphObjectManager:this,StartPoint:BU[0],EndPoint:BU[1],GraphCollectionObject:null,Shape:c._TICKER});}else{return[];}break;case BA.DssGraphMarkerShape2DPie:case BA.DssGraphMarkerShape2DRingPie:var BL=0;if(BR===BA.DssGraphMarkerShape2DRingPie){BL=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new Aq.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BN,Layout:BL,PlotType:s.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}BG=this.mDatasetPtr.GetPieCountAtOneDataPoint(BM.mSeriesId,BM.mGroupId);for(BJ=0;BJ<BG;++BJ){BO=this.mPieRenderer.drawSinglePie(BM.mSeriesId,BM.mGroupId,BJ,BI,BG);BH=BH.concat(BO);}break;case BA.DssGraphMarkerShapeSquare:case BA.DssGraphMarkerShapeRectangle:BQ=new Aq.RectangleObject({TripleId:BM,GraphObjectManager:this,GraphCollectionObject:null,Area:BS,Shape:BP});break;default:BQ=new Aq.MarkerObject({TripleId:BM,GraphObjectManager:this,MarkerPosition:BI,MarkerShape:BR,IsIsometric:true,MarkerSize:BT,GraphCollectionObject:BK,IsDialogSize:false,Shape:BP});break;}}else{BQ=new Aq.MarkerObject({TripleId:BM,GraphObjectManager:this,MarkerPosition:BI,MarkerShape:BR,IsIsometric:true,MarkerSize:BT,GraphCollectionObject:BV,IsDialogSize:!this.isBubbleChart});}if(BQ!==null&&BQ!==undefined){BH.push(BQ);this.AddToMap(BQ);if(BV){BV.AddGraphObject(BQ);}}return BH;}function BE(BW,BO,BG,BU,BP){var BH=this.VecSeriesInfo[BU].MarkerShape,BL=0,BN=this.VecSeriesInfo[BU].IsNullData.length,BV,BT,BS,BQ,BI,BK,BX,BJ,BM,BR;BR=new Aq.TripleId({ObjectId:A7.DssGraphRiser,SeriesId:this.VecSeriesInfo[BU].SeriesID});BV=new Aq.GraphCollectionObject({TripleId:BR,GraphObjectManager:this,CollectionType:AN.CT_GENERAL_SHAPE});for(BT=0;BT<BN;++BT){if(this.VecSeriesInfo[BU].IsNullData[BT]){continue;}BI=BG[BL];BK=this.isBubbleChart?BP:BV;BX=new Aq.TripleId({ObjectId:A7.DssGraphRiser,SeriesId:this.VecSeriesInfo[BU].SeriesID,GroupId:BT});BQ={MarkerShape:BH,Size:BI,Position:BO,Id:BX,MarkerType:this.VecSeriesInfo[BU].MarkerShape};BJ=l.call(this,BQ,BP);if(BJ.length>0){for(BS=0;BS<BJ.length;++BS){this.mGraphObjectList.push(BJ[BS]);this.AddToMap(BJ[BS]);BK.AddGraphObject(BJ[BS]);BM=BJ[BS].GetBoundingRect();BW[BU].push(BM);}}}if(!this.isBubbleChart){this.AddToMap(BV);}}function A8(BL,BI,BK){var BH,BJ,BG;if(BL.length===0){return ;}if(this.VecSeriesInfo[BI].ConnectDataPoint){BH=this.isBubbleChart?null:BK;BG=new Aq.TripleId({ObjectId:A7.DssGraphDataLine,SeriesId:this.VecSeriesInfo[BI].mSeriesId,GroupId:At});BJ=new Aq.PolyLineObject({TripleId:BG,GraphObjectManager:this,PolyLine:BL,Parent:BH});this.mGraphObjectList.push(BJ);this.AddToMap(BJ);if(!this.isBubbleChart){BK.AddGraphObject(BJ);}}}function AB(BM,BH){As.call(this,BM);var BK,BJ,BP=this.VecSeriesInfo,BN=BP.length,BT=this.mDatasetPtr.GetGroupCount(),BS,BL,BR,BI,BQ,BO=false;for(BK=0;BK<BN;++BK){BI=[];BQ=[];var BG=BP[BK].ShowDataLabel;BO=BO||BG;for(BJ=0;BJ<BT;++BJ){BL=new Aq.Point2D();BS=A0.call(this,BK,BJ,BL);this.VecSeriesInfo[BK].IsNullData.push(!BS);if(!BS){continue;}BR=BD.call(this,BK,BJ);if(BR===undefined){continue;}BI.push(BL);BQ.push(BR);}A8.call(this,BI,BK,BM[BK]);BE.call(this,BH,BI,BQ,BK,BM[BK]);}return{IsLabelPossible:BO,MarkerRectangles:BH};}function AY(BR){var BY,BV,BQ=this.VecSeriesInfo,Bc=BQ.length,BI=this.mDatasetPtr.GetGroupCount(),BH,Bh,BZ,BL=this.mGraphObjectList,Bg=this.drawBySize,Bb=[],BM=false,BK=this.mChartContextPtr,Ba=BK.GetGraphMatrixContext(),BJ=Ba.mMarkerShape,BT=BJ===BA.DssGraphMarkerShape2DPie||BJ===BA.DssGraphMarkerShape2DRingPie,BG=BK.mPartialRendering,Bf=[],BX=function BX(Bk,Bj){if(Bk.Size<Bj.Size){return 1;}if(Bk.Size>Bj.Size){return -1;}return 0;};for(BY=0;BY<Bc;++BY){var Be=BQ[BY].ShowDataLabel;BM=BM||Be;for(BV=0;BV<BI;++BV){Bh=new Aq.Point2D();BH=A0.call(this,BY,BV,Bh);BQ[BY].IsNullData.push(!BH);if(!BH){continue;}BZ=BD.call(this,BY,BV);if(BZ===undefined){continue;}var Bi=new Aq.TripleId({ObjectId:A7.DssGraphRiser,SeriesId:BQ[BY].SeriesID,GroupId:BV});if(BK.checkColorByAndSizeByValue(Bi,this.mDatasetPtr,this.mHasColorBy&&!BT,this.mHasSizeBy)===false){BQ[BY].IsNullData[BQ[BY].IsNullData.length-1]=true;continue;}var BS=H.call(this,BJ,Bh,BZ);BS.Id=Bi;BS.Position=Bh;BS.Size=BZ;BS.MarkerType=BQ[BY].MarkerShape;Bb.push(BS);++this.DPCount;if(this.seriesDPCount[BY]===undefined||this.seriesDPCount[BY]===null){this.seriesDPCount[BY]=1;}else{++this.seriesDPCount[BY];}}}if(Bg||BG){Bb.sort(BX);if(BG){Bb.reverse();}}var BU;for(BY=0;BY<Bb.length;BY++){var BN=l.call(this,Bb[BY],null);for(BU=0;BU<BN.length;++BU){var Bd=Bb[BY],BO=Bd.Id.mSeriesId,BP=Bd.Id.mGroupId;BJ=Bd.MarkerType;var BW=BJ===BA.DssGraphMarkerShape2DPie||BJ===BA.DssGraphMarkerShape2DRingPie;BR[BO][BP]=Bd.BoundingBox;if(BW){this.AddToMap(BN[BU]);}Bf.push(BN[BU]);}}if(BG){Bf.reverse();this.shapeCanvas=null;}for(BY=0;BY<Bf.length;BY++){BL.push(Bf[BY]);}return{IsLabelPossible:BM,MarkerRectangles:BR};}function h(BK,BL,BO,BN){var BI=this.mChartContextPtr,BM=BI.GetGraphMatrixContext(),BG,BJ,BH;if(BI.mIsGraphMatrix&&!BN){BM=BI.GetGraphMatrixContext();if(BM.isPieOrRingShape()){BG=BM.GetMaxMarkerSize(Ak._PIE,true,1,this.isBubbleChart);}else{if(BM.mMarkerShape===BA.DssGraphMarkerShapeGMTick){BG=BM.GetMaxMarkerSize(Ak._TICK_VALUE,true,this.isBubbleChart);}else{BG=BM.GetMaxMarkerSize(Ak._SHAPES_IN_BUBBLESCATTER,false,0,this.isBubbleChart);}}return Math.round(BG);}BJ=BK.width;BH=BK.height;return Math.round(Math.min(BJ/BL+0.5,BH/BO+0.5)*0.5);}function j(){var BJ,BG,BK=this.mDatasetPtr.GetSeriesCount(),BI=this.mDatasetPtr.GetGroupCount(),BH;if(this.mDatasetPtr.GetSeriesByColumn()){BJ=BI;BG=BK;}else{BG=BI;BJ=BK;}if(BJ*BG===0){return 0;}BH=h.call(this,this.mDataArea,BJ,BG,false);if(BH<3){BH=3;}return BH;}mstrmojo.chart.ValuePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.ValuePlot",dataLabelLine:false,isBubbleChart:false,isSmarted:false,maxUnitRadius:-1,maxRadius:-10,minRadius:10000,labelFormat:Af.DssGraphDataTextSeriesDependent|Af.DssGraphDataTextLabel,labelLocation:Ah.DssGraphDTPositionCenter,xAxis:null,y1Axis:null,y2Axis:null,zAxis:null,VecSeriesInfo:[],standAloneMarkers:[],labelMatrix:[],drawBySize:false,mPieRenderer:null,mDataLabels:[],mTrendLineObjects:null,mReferenceLineObjects:null,waitingList:null,shapeCanvas:null,viewPort:null,init:function AV(BG){var BH;this._super(BG);BH=this.mChartContextPtr;this.xAxis=null;this.y1Axis=null;this.y2Axis=null;this.zAxis=null;this.VecSeriesInfo=[];this.standAloneMarkers=[];this.labelMatrix=[];this.isBubbleChart=(BH.GetGraphMajorType()===Am.GMT_BUBBLE);this.drawBySize=this.isBubbleChart&&this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];},OnRectangleSelection:function o(BO,BR,BM){BM=BM||0;var BH=this.mChartContextPtr;if(BM===0&&this.waitingList){var BQ=this.waitingList,BK=BQ.length,BJ,BP,BN,BL,BG,BI=(BQ[0].Shape===c._PIE)?"pie":"shape";for(BJ=0;BJ<BK;BJ++){BP=BQ[BJ].Position.x;BN=BQ[BJ].Position.y;if((BP>=BO.x&&BP<=BO.x+BO.width)&&(BN>=BO.y&&BN<=BO.y+BO.height)){BG=BQ[BJ].Id;BL=BH.getIdentity(BG,BI);BR.push(BL);}}}},GenerateMapAndList:function AI(){var BG,BM=[],BL,BK,BN=this.mChartContextPtr,BI=BN.mIsGraphMatrix,BH=this.VecSeriesInfo.length;this.maxUnitRadius=j.call(this);BG=[];for(BL=0;BL<BH;++BL){BG.push([]);}if(BN.mImageUsage!==AP.GENERAL){return ;}var BJ;if(BI){BJ=AY.call(this,BG);}else{BJ=AB.call(this,BM,BG);}BG=BJ.MarkerRectangles;BK=BJ.IsLabelPossible;Ax.call(this,BG,BK);P.call(this);Ao.call(this);D.call(this);AO.call(this);},Draw:function Au(){var BI=this.drawBySize,BK=this.mChartContextPtr,BH=this.VecSeriesInfo.length;if(BI){var BG=[],BJ;for(BJ=0;BJ<BH;BJ++){BG[BJ]=0;}BK.setDrawingOrderToCanvas(BG);}Aq.GraphObjectManager.prototype.Draw.apply(this,[]);p.call(this);X.call(this);this.DrawPostTrendLineObjects();},AssignValueAxis:function T(BH,BG){switch(BG){case 0:this.xAxis=BH;break;case 1:this.y1Axis=BH;break;case 2:this.y2Axis=BH;break;case 3:this.zAxis=BH;break;default:break;}},AssignSeriesInfo:function Y(BI,BL){var BH=BI.length,BK,BJ,BG;for(BG=0;BG<BH;++BG){BJ=Aw.call(this);this.VecSeriesInfo.push(BJ);BK=BI[BG];this.VecSeriesInfo[BG].SeriesID=BK;this.VecSeriesInfo[BG].ValueAxisIndex=BL[BK];}this.LoadProperties();},GetMaxElementRadius:function AR(){var BH=new Aq.TripleId(),BG=this.mChartContextPtr.GetProperty(Av.DssGraphMatrixUsePerfectPadding,BH);if(BG===null||BG===undefined){return 0;}return this.maxUnitRadius;},GetMaxElementOffsetClippedByBoundary:function V(BI,BU){var Be={LowOffset:0,HighOffset:0},BL=this.mChartContextPtr,Ba=BL.GetGraphMatrixContext(),BV,BN,Bg,BM,BT,BS,BR,BQ,BY,BK,BX,BW,BJ,BZ;if(BU===undefined){BU=true;}if(!BL.mIsGraphMatrix){return Be;}var BH=BI?(BU?"X1":"X2"):(BU?"Y1":"Y2"),BG=this.mClippedElementSize;if(BG[BH]!==undefined){return BG[BH];}if(this.maxUnitRadius<0){this.maxUnitRadius=j.call(this);}BY=this.mDatasetPtr.GetSeriesCount();BK=this.mDatasetPtr.GetGroupCount();var BP={LowOffset:0,HighOffset:0};var BO={LowOffset:0,HighOffset:0};for(BX=0;BX<BY;++BX){for(BW=0;BW<BK;++BW){Ag.Reset(0,0);BJ=A0.call(this,BX,BW,Ag);if(!BJ){continue;}BZ=BD.call(this,BX,BW);if(BZ===undefined){continue;}var Bf=0,Bc=0;var Bd=0,Bb=0;Be={LowOffset:0,HighOffset:0};BV=this.xAxis;BN=this.y1Axis;if(BV===null||BN===null){BG[BH]=Be;return ;}Bg=BV.GetMaxMinDataInput();BM=BN.GetMaxMinDataInput();BT=BV.GetPositionByValue(Bg.Min);BS=BN.GetPositionByValue(BM.Min);if(BT===null||BS===null){BG[BH]=Be;return ;}BR=BV.GetPositionByValue(Bg.Max);BQ=BN.GetPositionByValue(BM.Max);if(BR===null||BQ===null){BG[BH]=Be;return ;}Bf=BP.LowOffset;Bc=BP.HighOffset;BP=Ba.getClippedOffset(BT,BR,BZ,Ag,true,Bf,Bc);Bf=Math.max(BP.LowOffset,Bf);Bc=Math.max(BP.HighOffset,Bc);BG.X1=BP;Bd=BO.LowOffset;Bb=BO.HighOffset;BO=Ba.getClippedOffset(BS,BQ,BZ,Ag,false,Bd,Bb);Bd=Math.max(BO.LowOffset,Bd);Bb=Math.max(BO.HighOffset,Bb);BG.Y1=BO;}}if(BG.X1){BG.X2=mstrmojo.hash.copy(BG.X1);}else{BG.X1=BG.X2={LowOffset:0,HighOffset:0};}if(BG.Y1){BG.Y2=mstrmojo.hash.copy(BG.Y1);}else{BG.Y1=BG.Y2={LowOffset:0,HighOffset:0};}return BG[BH];},refresh:function Ap(BG,BH){if(BG==="clipping"){this.mDataArea.width=this.mChartContextPtr.mGraphWidth;this.mDataArea.height=this.mChartContextPtr.mGraphHeight;this.maxUnitRadius=-1;this.mClippedElementSize={};}else{}},LoadProperties:function Ac(){var BI,BM,BG,BL=this.isBubbleChart?A6.DssGraphShowSDLine:A6.DssGraphShowLine,BK,BN=this.mChartContextPtr,BH=BN.GetGraphMatrixContext(),BJ=BN.mIsGraphMatrix;for(BK=0;BK<this.VecSeriesInfo.length;++BK){BI=this.VecSeriesInfo[BK];BG=new Aq.TripleId({ObjectId:A7.DssGraphRiser,SeriesId:BI.SeriesID});if(BJ){BI.MarkerShape=BH.mMarkerShape;}else{BM=BN.GetProperty(A6.DssGraphSDMarkerShape,BG);if(BM){BI.MarkerShape=BM;}else{BI.MarkerShape=BA.DssGraphMarkerShapeCircle;}}switch(BI.MarkerShape){case BA.DssGraphMarkerShapeCircle:case BA.DssGraphMarkerShapeRectangle:case BA.DssGraphMarkerShapeSquare:case BA.DssGraphMarkerShape2DPie:case BA.DssGraphMarkerShape2DRingPie:break;default:this.drawBySize=false;break;}if(BN.mImageUsage!==0){return ;}BM=BN.GetProperty(BL,BG);if(BM){BI.ConnectDataPoint=BM;}BM=BN.GetProperty(A6.DssGraphSDShowDataText,BG);if(BM){BI.ShowDataLabel=BM;}if(BJ){BI.ShowDataLabel=this.mDatasetPtr.showSeriesDatalabel(BG.mSeriesId);}this.LoadTrendLineProperties(this.VecSeriesInfo[BK].SeriesID,BI.TrendLineOptions);}BM=BN.GetProperty(A6.DssGraphNewUseSmartLabels,AE);if(BM){this.isSmarted=BM;}BM=BN.GetProperty(A6.DssGraphAxisDataTextPlace,AE);if(BM){this.labelLocation=BM;}BM=BN.GetProperty(A6.DssGraphShowDataText,AE);if(BM){this.labelFormat=BM;}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","NumberObject","Rect2D","TextObject");var A=mstrmojo.chart;mstrmojo.chart.CategoryPlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.CategoryPlot",createRiserLabel:function C(G,F,K,H,E){var L,D=this.realComboChart;if((K===null&&H==="")||E===null){return null;}if(K){L=new A.NumberObject({TripleId:G,GraphObjectManager:this,Number:F,NumberFormat:K,GraphCollectionObject:E,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr,IsFinal:(H==="")});if(L===null){return null;}if(H&&H!==""){L.AddTextBeforeNumber(H);}if(D){L.strokeBBox();}this.AddToMap(L);E.AddGraphObject(L);return L;}var J=new A.Rect2D({x:0,y:0,width:0,height:0}),I=new A.TextObject({TripleId:G,GraphObjectManager:this,rect:J,GraphCollectionObject:E,clientDrag:true});if(I!==null){I.SetText(H);if(D){I.strokeBBox();}this.AddToMap(I);E.AddGraphObject(I);return I;}return null;},ReserveAreaForDataLabels:function B(D){}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Plot","CategoryAxis");var B=mstrmojo.chart;mstrmojo.chart.GridBasePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.GridBasePlot",mHasXAxis:false,mHasYAxis:false,mMarkerShape:0,mXaxis:null,mYaxis:null,mDataArea:null,init:function E(F){this._super(F);this.mMarkerShape=4;this.mHasXAxis=true;this.mHasYAxis=true;this.mDataArea=new B.Rect2D();},AssignSeries:function A(F){},AssignAxis:function D(G,F){if(F){this.mYAxis=G;}else{this.mXAxis=G;}},AssignDataArea:function C(F,G){this.mDataArea.ResetRect(F);if(G){this.mYAxis.SetDeviceDataArea(F);}else{this.mXAxis.SetDeviceDataArea(F);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","Point2D","RectangleObject","TextObject","NumberObject","GraphCollectionObject","GridDataLabelInfo","GridBasePlot","CategoryAxis","PiePlotRenderer","MarkerObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixElementSizeMode","EnumGraphMatrixMarkerTypeInChart","EnumAnchorPoint");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.common","Utility","MapStructure");var W=mstrmojo.chart,T=W.ChartConstants,J=W.enums,q=J.EnumAnchorPoint,C=J.EnumCollectionType,Q=J.EnumGraphMatrixMarkerTypeInChart,p=J.EnumGraphMatrixElementSizeMode,U=J.EnumGraphMatrixPiePlotType,S=mstrmojo.chart.model,O=S.enums,u=O.EnumDSSGraphMarkerShape,t=O.EnumDSSGraphObject,w=O.EnumShapeType,B=W.common,F=B.Utility,V=F.tripleId;var P=new W.Rect2D(),AH=new W.Point2D(),AF=new W.Point2D(),s=new W.ChartAdvFormat(),r=new W.Point2D();var L=0,d=1,b=2;var M=1,N=2,X=3;function K(AK,AJ){if(AK.mYIndex===AJ.mYIndex){return AK.mXIndex-AJ.mXIndex;}return AK.mYIndex-AJ.mYIndex;}function AB(){var AJ=this.mXAxis,AP=this.mYAxis,AN=this.mDatasetPtr;if(this.mPartialRendering){var AL=this.mChartContextPtr,AR={PartialRendering:true,Group:{},Series:{}},AK,AO,AS,AM,AQ=AL.mRenderingWindow;AK=AQ.x;AO=AK+AQ.width;AS=AQ.y;AM=AS+AQ.height;if(AJ){AO=AJ.getGroupSlotAt(AO)+1;AK=AJ.getGroupSlotAt(AK)-1;}if(AP){AM=AP.getGroupSlotAt(AM)+1;AS=AP.getGroupSlotAt(AS)-1;}if(this.mDatasetPtr.GetSeriesByColumn()){if(AP){AR.Group.Max=AM;AR.Group.Min=AS;}if(AJ){AR.Series.Max=AO;AR.Series.Min=AK;}}else{if(AP){AR.Series.Max=AM;AR.Series.Min=AS;}if(AJ){AR.Group.Max=AO;AR.Group.Min=AK;}}AN.updateDataWindow(AR);}else{AN.resetDataWindow();}}function AC(AQ){if(!AQ){var AL=this.mChartContextPtr.GetGraphMatrixContext(),AP=AL.mElementsInfo;if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle){var AO=AP.Max.Size,AM=1;var AK=this.mAutoFitMarkerRect;this.mAdjustMarkerRect=new W.Rect2D({Rect2D:AK});var AJ=this.mAdjustMarkerRect;if(AP.Max.Mode===p._MANUAL){AM=Math.min(AM,AO);if(AM<1){AJ.width=AK.width*AM;AJ.height=AK.height*AM;}}}if(this.mMarkerShape===u.DssGraphMarkerShapeGMTick){var AN=new W.Rect2D();AN.width=AL.mConstants.FixedTickerSize;AN.height=AL.GetMaxMarkerSize(Q._TICK_CATEGORY,false,this.mYArity);this.mAdjustMarkerRect=AN;}}return this.mAdjustMarkerRect;}function l(){var AJ=this.mSeriesSet.length,AL=this.mDatasetPtr.GetGroupCount(),AK=this.mDatasetPtr;if(this.mIsSeriesByCol){this.mXArity=AJ;this.mYArity=AL;}else{this.mXArity=AL;this.mYArity=AJ;}if(this.mXArity===0&&!this.mHasXAxis){this.mXArity=1;}if(this.mXArity===0&&!AK.mHasMetrics){this.mXArity=1;}if(this.mYArity===0&&!this.mHasYAxis){this.mYArity=1;}if(this.mYArity===0&&!AK.mHasMetrics){this.mYArity=1;}}function AE(){return this.mDatasetPtr.IsGridPieAngleBreakX();}function h(){var AL=this.mChartContextPtr,AO=AL.GetGraphMatrixContext(),AK=AO.mElementsInfo,AT=0,AR=this.mMarkerShape,AV=AR===u.DssGraphMarkerShape2DPie||AR===u.DssGraphMarkerShape2DRingPie,AQ=1,AJ=1,AN=2500,AP=1,AW,AU,AM;if(AR!==u.DssGraphMarkerShapeRectangle){if(this.mHasXAxis){AU=this.mXAxis.getGroupSize();}else{AU=this.mDataArea.width;}if(this.mHasYAxis){AM=this.mYAxis.getGroupSize();}else{AM=this.mDataArea.height;}if(AV){if(AK.Max.Mode===p._AUTOMATIC){AN=250;}AT=this.mDatasetPtr.GetAngleNumber();var AS=AE.call(this);if(AS){AQ=AT;}else{AJ=AT;}if(AK.Max.Mode===p._AUTOMATIC){AP=this.mDatasetPtr.showDatalabels()?0.5:0.9;if(AP<0){AP=0.1;}AP=Math.min(AP,1);}}if(AK.Max.Mode===p._MANUAL){AP=AK.Max.Size;if(AP<0){AP=0.1;}AP=Math.min(AP,1);}AW=0.5*Math.min(AU/AQ,AM/AJ);if(AR!==u.DssGraphMarkerShapeCircle||AW>=4){AW-=1;}AW=Math.max(AW,1);AW*=AP;AW=Math.min(AW,AN);AW=Math.max(AW,1);return Math.floor(AW);}return 1;}function E(){var AO=this.mDatasetPtr,AM=this.mDataArea,AN=this.mXAxis,AL=this.mYAxis,AK=this.mAutoFitMarkerRect,AP=this.mChartContextPtr,AJ=this.mpManager.mPlotOption;this.mIsAutoFitMode=AJ.mIsAutoFitMode;this.mMaxDataVal=AJ.mMaxDataVal;this.mMinDataVal=AJ.mMinDataVal;this.mUniformColorMode=AO.GetSeriesByColumn()?b:d;if(this.mHasXAxis){AK.width=AN.getGroupSize();}else{AK.width=AM.width;}if(this.mHasYAxis){AK.height=AL.getGroupSize();}else{AK.height=AM.height;}this.mMarkerShape=AJ.mMarkerShape;if(this.mMarkerShape===u.DssGraphMarkerShapeNone){this.mMarkerShape=u.DssGraphMarkerShapeRectangle;}this.mIsSeriesByCol=AO.GetSeriesByColumn();if(this.mHasXAxis){this.mPreXCoord=AN.getGroupStartPos(0);}else{this.mPreXCoord=AM.x;}if(this.mHasYAxis){this.mPreYCoord=AL.getGroupStartPos(0);}else{this.mPreYCoord=AM.y;}l.call(this);AC.call(this,false);this.mMinMarkerSize=1;this.mMaxMarkerSize=h.call(this);this.mDataGroup=AO.GetDataGroup();}function c(AJ,AK){if(this.mHasColorBy===false){return this.mMarkerCollectionSet[0]||null;}return null;}function e(AJ,AL,AK){if(!AK){return ;}if(this.mLegendPtr===null||this.mLegendPtr===undefined){return ;}if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function j(AO,AK,AN,AJ){var AM=AO?AJ.x:AJ.y,AP=0,AL;if(AO){AP=AK?this.mXAxis.getGroupMiddlePos(AN+1):this.mXAxis.getGroupMiddlePos(AN-1);AL=(AP+AM)/2;}else{AP=AK?this.mYAxis.getGroupMiddlePos(AN+1):this.mYAxis.getGroupMiddlePos(AN-1);AL=(AP+AM)/2;}var AQ=AL-Math.floor(AL);if(AQ!==0){AL-=0.5;}if(AL===0){AL=1;}return AL;}function Y(AW,AU){var AY=1,AO=0,AR=w._RECTANGLE,AK=false,AN=this.mDatasetPtr.dataProvider;AH.x=this.mXAxis.getGroupMiddlePos(AW);AH.y=this.mYAxis.getGroupMiddlePos(AU);P.Reset(0,0,0,0);if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle){if(this.mXArity*this.mYArity===1){P=AC.call(this,true);}else{var AT=0,AM=0;if(!this.resizerLine){this.resizerLine=AN.getResizerLineThickNess();}if(!this.chartInfo){this.chartInfo=AN.getChartRowColCount();}if(AW===0){AT=this.mDataArea.x+AY+AO;AM=j.call(this,true,true,AW,AH);}else{if(AW===this.mXArity-1){AT=j.call(this,true,false,AW,AH);AM=this.mDataArea.x+this.mDataArea.width;}else{AT=j.call(this,true,false,AW,AH);AM=j.call(this,true,true,AW,AH);}}if(AW===this.mXArity-1){if(AN.colIndex!==this.chartInfo.cir-1){AM-=this.resizerLine.MATRIX_VLINE_THICKNESS;}else{AM-=parseInt(this.resizerLine.MATRIX_VLINE_THICKNESS/2);}}P.x=AT;P.width=AM-AT;P.width=Math.max(0,P.width);if(AU===0){AT=this.mDataArea.y+AY;AM=j.call(this,false,true,AU,AH);}else{if(AU===this.mYArity-1){AT=j.call(this,false,false,AU,AH);AM=this.mDataArea.y+this.mDataArea.height;}else{AT=j.call(this,false,false,AU,AH);AM=j.call(this,false,true,AU,AH);}}if(AN.rowIndex!==0&&AU===0){AT+=this.resizerLine.MATRIX_HLINE_THICKNESS;}if(AN.rowIndex===this.chartInfo.cic-1&&AU===this.mYArity-1){AM-=this.resizerLine.AXIS_X_THICKNESS;}P.y=AT;P.height=AM-AT;P.height=Math.max(0,P.height);if(P.width>AY){P.width-=AY+AO*2;}if(P.height>AY){P.height-=AY+AO;}}}else{AK=true;AR=w._TICKER;var AV=AC.call(this,true);AF.x=AF.y=0;if(this.mHasXAxis){AF.x=this.mXAxis.getGroupMiddlePos(AW);}else{AF.x=this.mDataArea.GetCenter().x;}if(this.mHasYAxis){AF.y=this.mYAxis.getGroupMiddlePos(AU);}else{AF.y=this.mDataArea.GetCenter().y;}P.width=AV.width;P.height=AV.height;P.x=AF.x-0.5*P.width;P.y=AF.y-0.5*P.height;}if(this.mMinDataVal===this.mMaxDataVal){return P;}var AQ=this.mChartContextPtr.GetGraphMatrixContext(),AP=AQ.mElementsInfo.Max;if(this.mIsAutoFitMode){if(AP.Mode===p._AUTOMATIC){return P;}if(AP.Mode===p._MANUAL&&AP.Size===1){return P;}}var AL,AJ;if(AP.Mode===p._MANUAL&&AP.Size!==1){var AS=AP.Size;AL=Math.round((1-AS)*0.5*P.width);AJ=Math.round((1-AS)*0.5*P.height);P.x+=AL;P.y+=AJ;P.width-=2*AL;P.height-=2*AJ;}if(this.mIsAutoFitMode){return P;}var AX=0;if(this.mIsSeriesByCol){AX=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AW],AU);}else{AX=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AU],AW);}AL=0.5*P.width;AJ=0.5*(P.height-AQ.GetScaledSize(AX,P.height,AR)+0.5);if(AK){P.x+=AL-1;P.y+=AJ;P.width=AQ.mConstants.FixedTickerSize;}else{AL=0.5*(P.width-AQ.GetScaledSize(AX,P.width,AR)+0.5);P.x+=AL;P.y+=AJ;P.width-=2*AL;}P.height-=2*AJ;return P;}function y(AL,AO,AV,AM,AK,AS){var AQ=-1,AP=-1,AJ,AT,AN,AU,AR=new W.Point2D({x:-1,y:-1});if(this.mHasXAxis){AQ=this.mXAxis.getSubGroupMiddlePos(AL,AV,AK);}else{AJ=this.mDataArea.x;AN=this.mDataArea.width/AK;AQ=AJ+AN*AV+AN/2;}if(this.mHasYAxis){AP=this.mYAxis.getSubGroupMiddlePos(AO,AM,AS);}else{AU=this.mDatasetPtr.GetSeriesCount();AJ=this.mDataArea.y;AT=this.mDataArea.height/AU;AN=this.mDataArea.height/AS/AU;AP=AJ+AT*AO+AN*AM+AN/2;}if(AQ>=0&&AP>=0){AR.x=AQ;AR.y=AP;}return AR;}function R(AS,AN,AV){var AT=[AS,AN,AV],AR,AM,AP,AK,AO,AL=1,AQ=1;if(this.mPieCentersPool===null){this.mPieCentersPool=new B.MapStructure();}var AJ=this.mPieCentersPool.find(AT);if(AJ!==null&&AJ!==undefined){return AJ;}AM=AN;AK=AV;AP=AS;AO=AV;var AU=this.mDatasetPtr.GetPieCountAtOneDataPoint(AS,AN);if(AE.call(this)){AK=AV;AL=AU;}else{AO=AV;AQ=AU;}AR=y.call(this,AM,AP,AK,AO,AL,AQ);this.mPieCentersPool.replace(AT,AR);return AR;}function g(AK,AN){var AM=this.mDataArea,AL=AK,AJ=AN;if(this.mIsSeriesByCol){if(this.mHasXAxis){AL=this.mSeriesSet.length>AK?this.mSeriesSet[AK]:AK;}AJ=AN;}else{AL=AK;if(this.mHasYAxis){AJ=this.mSeriesSet.length>AN?this.mSeriesSet[AN]:AN;}}if(this.mHasXAxis){r.x=this.mXAxis.getGroupMiddlePos(AL);}else{r.x=AM.x+AM.width/2;}if(this.mHasYAxis){r.y=this.mYAxis.getGroupMiddlePos(AJ);}else{r.y=AM.y+AM.height/2;}return r;}function o(AK,AP){var AJ,AO,AM=w._SQUARE,AL=this.mChartContextPtr.GetGraphMatrixContext(),AN=AL.mMarkerShape;if(this.mIsAutoFitMode){AJ=this.mMaxMarkerSize;}else{if(this.mMinDataVal===this.mMaxDataVal){return this.mMaxMarkerSize;}if(AN===u.DssGraphMarkerShapeCircle){AM=w._CIRCLE;}else{if(AN===u.DssGraphMarkerShape2DPie||AN===u.DssGraphMarkerShape2DRingPie){AM=w._PIE;}}if(this.mIsSeriesByCol){AO=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AK],AP);}else{AO=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AP],AK);}AJ=AL.GetScaledSize(AO,this.mMaxMarkerSize,AM);}return AJ;}function A(AR,AQ){var AP=this.mChartContextPtr,Ab=t.DssGraphRiser,AY,AV,AO=this.mMarkerShape,AT=(AO===u.DssGraphMarkerShape2DPie||AO===u.DssGraphMarkerShape2DRingPie),AL=null,AN,AX,Ac,AJ,AS=[],AK;AY=(this.mSeriesSet.length>AR)?this.mSeriesSet[AR]:AR;AV=new W.TripleId({ObjectId:Ab,SeriesId:AY,GroupId:AQ});if(!this.mIsSeriesByCol){AV.mSeriesId=(this.mSeriesSet.length>AQ)?this.mSeriesSet[AQ]:AQ;AV.mGroupId=AR;}if(this.mDatasetPtr&&this.mDatasetPtr.useSliceWindow){if(this.mDatasetPtr.IsInSlicedWindow(AV.mSeriesId,AV.mGroupId)===false){return AS;}}if(AP.checkColorByAndSizeByValue(AV,this.mDatasetPtr,this.mHasColorBy&&!AT,this.mHasSizeBy)===false){return AS;}var AM=w._RECTANGLE,Ad=c.call(this,AR,AQ);e.call(this,AR,AQ,Ad);if(AO===u.DssGraphMarkerShapeRectangle||AO===u.DssGraphMarkerShapeGMTick){AK=Y.call(this,AR,AQ);if(AO===u.DssGraphMarkerShapeGMTick){AM=w._TICKER;}if(AK.width<=0){AK.width=1;}if(AK.height<=0){AK.height=1;}if(AO===u.DssGraphMarkerShapeRectangle){AL=new W.RectangleObject({TripleId:AV,GraphObjectManager:this,Area:AK,GraphCollectionObject:Ad,IsOnlyForToolTip:false,Shape:AM});}else{var AW=AP.transformRectToTicker(AK,false);if(AW.length>=2){AL=new W.StraightLineObject({TripleId:AV,GraphObjectManager:this,StartPoint:AW[0],EndPoint:AW[1],GraphCollectionObject:null,Shape:AM});}else{return AS;}}}else{if(AT){var Aa=0;if(AO===u.DssGraphMarkerShape2DRingPie){Aa=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new W.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:AP,Layout:0,PlotType:U.GMPPT_GRID,MaxRadius:this.mMaxMarkerSize,ShownDataLabels:this.shownDataLabels});}AN=this.mDatasetPtr.GetPieCountAtOneDataPoint(AV.mSeriesId,AV.mGroupId);for(AX=0;AX<AN;++AX){Ac=R.call(this,AV.mSeriesId,AV.mGroupId,AX);AJ=this.mPieRenderer.drawSinglePie(AV.mSeriesId,AV.mGroupId,AX,Ac,AN);AS=AS.concat(AJ);}}else{var AU=g.call(this,AR,AQ),AZ=o.call(this,AR,AQ);if(AZ<=0){return AS;}if(AO===u.DssGraphMarkerShapeSquare){AK=this.mChartContextPtr.transformToRect(AU,AZ,true,AK);AL=new W.RectangleObject({TripleId:AV,GraphObjectManager:this,GraphCollectionObject:null,Area:AK,Shape:AM});}else{AM=w._CIRCLE;AL=new W.MarkerObject({TripleId:AV,MarkerPosition:AU,MarkerShape:AO,IsIsometric:true,MarkerSize:AZ,GraphObjectManager:this,GraphCollectionObject:Ad,Shape:AM});}}}if(AS.length===0&&AL){AS.push(AL);}return AS;}function n(AL,AP,AO,AJ,AN){var AM=new W.TripleId(t.DssGraphDataText,AO,AJ);s.restore();this.mDatasetPtr.getSizeByDataFormat(s,AO,AJ);var AK=new W.NumberObject({TripleId:AM,GraphObjectManager:this,Number:AL,NumberFormat:s,GraphCollectionObject:AN,Locale:0,clientDrag:false,DataSet:null});if(AK){AP=AK.mText;}return AP;}function D(AP,AO){var AM="",AR=(this.mSeriesSet.length>AP)?this.mSeriesSet[AP]:AP,AL=AO,AN=this.mChartContextPtr.GetGraphMatrixContext(),AK=this.mDatasetPtr,AQ=AK.dataLabelStyle;if(!this.mIsSeriesByCol){AR=(this.mSeriesSet.length>AO)?this.mSeriesSet[AO]:AO;AL=AP;}if((AQ===N)&&AN.mHasSizeBy){var AJ;if(this.mIsSeriesByCol){AJ=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AP],AO);}else{AJ=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AO],AP);}if(!!AJ===false){return null;}AM=n.call(this,AJ,AM,AR,AL,null);}var AS=new W.TextObject({TripleId:new W.TripleId({ObjectId:t.DssGraphDataText,SeriesId:AR,GroupId:AL}),GraphObjectManager:this,OnMarker:true});AS.SetText(AM);return AS;}function Z(AK,AN){if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle||this.mMarkerShape===u.DssGraphMarkerShapeGMTick){return new W.Rect2D({Rect2D:Y.call(this,AK,AN)});}var AJ=g.call(this,AK,AN),AL=o.call(this,AK,AN),AM=Math.floor(AL+0.5);return new W.Rect2D({x:AJ.x-AM,y:AJ.y-AM,width:AM*2,height:AM*2});}function k(){var AM,AJ,AO=this.mXArity,AL=this.mYArity,AP;for(AM=0;AM<AO;++AM){for(AJ=0;AJ<AL;++AJ){var AQ=(this.mSeriesSet.length>AM)?this.mSeriesSet[AM]:AM;var AK=AJ;if(!this.mIsSeriesByCol){AQ=(this.mSeriesSet.length>AJ)?this.mSeriesSet[AJ]:AJ;AK=AM;}if(this.mDatasetPtr.showSeriesDatalabel(AQ)===false){continue;}var AN=new W.GridDataLabelInfo();AN.mIsValid=true;AN.mGroupId=AK;AN.mSeriesId=AQ;AN.mXIndex=AM;AN.mYIndex=AJ;AN.mHostMarkerBound=Z.call(this,AM,AJ);AN.mLabelPtr=D.call(this,AM,AJ);if(AN.mLabelPtr===null||AN.mLabelPtr===undefined){AN.mIsValid=false;continue;}else{}this.mDataLabels.push(AN);}}}function AD(){var AL,AJ=286,AQ=this.mChartContextPtr,AN=AQ.GetGraphMatrixContext(),AK,AM,AO=this.mMarkerCollectionSet;AO.splice(0,AO.length);var AP;if(this.mHasColorBy){return ;}if(AQ.mIsGraphMatrix){AM=AN.markerToShape(AN.mMarkerShape);}if(AM!==w._PIE){AL=V.create(AJ,0,0);AK=new W.GraphCollectionObject({TripleId:AL,GraphObjectManager:this,CollectionType:C.CT_GENERAL_SHAPE,Shape:AM});AO.push(AK);}else{}}function f(AK){var AL=this.mDataLabels,AN=AL[AK].mHostMarkerBound,AM={x:AN.x+0.5*AN.width,y:AN.y+0.5*AN.height},AO=AM.x,AJ=AM.y;AO+=AN.width%2;AJ+=AN.height%2;AL[AK].mLabelPtr.MoveTo(AO,AJ,q.CENTER);}function I(AJ,AK){return AK*this.mXArity+AJ;}function AG(AJ,AK){return new W.Rect2D({x:AJ.x-AK,y:AJ.y-AK,width:AJ.width+2*AK,height:AJ.height+2*AK});}function G(AK,AL){var AJ=new W.Rect2D({x:0,y:0,width:this.mChartContextPtr.mGraphWidth,height:this.mChartContextPtr.mGraphHeight});if(AK.x<AJ.x+AL||AK.x+AK.width+AL>=AJ.x+AJ.width){return false;}return !(AK.y<AJ.y+AL||AK.y+AK.height+AL>=AJ.y+AJ.height);}function H(){var AS,AQ,AJ=this.mDataLabels,AZ=AJ.length,AM=this.mChartContextPtr,AY=AM.GetGraphMatrixContext(),AN=AY.getPadding(T.kDataLabel),AX,AT,AR,AV,Aa={};for(AX=0;AX<AZ;++AX){AV=I.call(this,AJ[AX].mXIndex,AJ[AX].mYIndex);Aa[AV]=AX;}for(AX=0;AX<AZ;++AX){var AK,AW,AU,AO,AL=false;f.call(this,AX);AK=this.mDataLabels[AX].mLabelPtr.GetBoundingRectNoRotation(true);AU=AG.call(this,AK,AN);AW=G.call(this,AK,AN);if(!AW){continue;}AS=AJ[AX].mXIndex;AQ=AJ[AX].mYIndex;for(AT=AS-1;AT<=AS+1;AT++){if(AT<0||AT>=this.mXArity){continue;}for(AR=AQ-1;AR<=AQ+1;AR++){if(AR<0||AR>=this.mYArity){continue;}if(AT===AS&&AR===AQ){continue;}AV=I.call(this,AT,AR);AO=Aa[AV];if(AO>=AJ.length){continue;}if(!!AJ[AO]===false){continue;}if(AJ[AO].mIsValid===false||!!AJ[AO].mLabelPtr===false){continue;}AL=AU.HasIntersection(AJ[AO].mHostMarkerBound);if(AL){break;}if(AJ[AO].mIsDisPlayed){var AP=AJ[AO].mLabelPtr.GetBoundingRectNoRotation(true);AL=AL||AU.HasIntersection(AP);}if(AL){break;}}if(AL){break;}}if(!AL){AJ[AX].mIsDisPlayed=true;AJ[AX].mLabelPtr.mIsShown=true;this.AddToMapAndList(this.mDataLabels[AX].mLabelPtr);}else{AJ[AX].mLabelPtr.mIsShown=false;}}}function a(){var AO,AJ=this.mChartContextPtr;if(AJ.mIsGraphMatrix){var AP=AJ.GetGraphMatrixContext();if(this.mDatasetPtr.showDatalabels()){var AK=this.dataLabelManager;if(AK===null||AK===undefined){AO=new W.Rect2D({x:0,y:0,width:AJ.mGraphWidth,height:AJ.mGraphHeight});AK=this.dataLabelManager=new W.DataLabelManager({DataArea:AO});AK.ChartContext=AJ;}if(AP.mMarkerShape===u.DssGraphMarkerShape2DPie||AP.mMarkerShape===u.DssGraphMarkerShape2DRingPie){var AN=[];this.mPieRenderer.enableDataLabel(AK,AN);var AL,AQ=this.mPieRenderer.dataLabels,AM=AQ.length;for(AL=0;AL<AM;++AL){var AR=AQ[AL].Label;if(AR.mIsShown){this.AddToMapAndList(AR);}}}else{k.call(this);this.mDataLabels.sort(K);H.call(this);}}}}mstrmojo.chart.GridChartPlot=mstrmojo.declare(mstrmojo.chart.GridBasePlot,null,{scriptClass:"mstrmojo.chart.GridChartPlot",mXArity:0,mYArity:0,mDataGroup:1,mIsSeriesByCol:false,mIsAutoFitMode:false,mDataLabelTextMode:0,mMaxDataVal:0,mMinDataVal:0,mMaxMarkerSize:0,mMinMarkerSize:0,mPreXCoord:0,mPreYCoord:0,mUniformColorMode:0,mSeriesSet:null,mMarkerCollectionSet:null,mAutoFitMarkerRect:null,mAdjustMarkerRect:null,mDataLabels:null,mPieRenderer:null,mPieCentersPool:null,init:function AA(AJ){this._super(AJ);this.mSeriesSet=[];this.mMarkerCollectionSet=[];this.mDataLabels=[];this.mAutoFitMarkerRect=new W.Rect2D();this.mAdjustMarkerRect=new W.Rect2D();},AssignSeries:function x(AJ){this.mSeriesSet=AJ.slice();},GetMaxElementRadius:function AI(){if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle){return Math.min(this.mAdjustMarkerRect.width,this.mAdjustMarkerRect.height);}return this.mMaxMarkerSize;},GenerateMapAndList:function z(){var AM=this.mDatasetPtr,AJ=this.mDataArea,AO,AN,AK,AQ,AR;if(AM===null||AM===undefined){return ;}if((AM.mHasMetrics)&&(this.mSeriesSet.length===0)){return ;}if(AJ.width*AJ.height===0){return ;}AB.call(this);E.call(this);AD.call(this);AQ=this.mXArity;AR=this.mYArity;for(AO=0;AO<AQ;++AO){for(AN=0;AN<AR;++AN){var AL=A.call(this,AO,AN),AP=AL.length;for(AK=0;AK<AP;++AK){this.AddToMapAndList(AL[AK]);}}}if(this.mChartContextPtr.mImageUsage===0){a.call(this);}AM.resetDataWindow();}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,M=O.enums,B=M.EnumOrientation,P=O.gNullObjectId,L=O.gNullTripleId;var J=mstrmojo.chart.model,Q=J.enums,E=Q.EnumDSSGraphType,F=Q.EnumDSSGraphObject,K=Q.EnumVariantBool.VARIANT_FALSE,R=Q.EnumDSSExtraGraphProperty;mstrmojo.chart.PlotManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.PlotManager",mLegendPtr:null,mDatasetPtr:null,mGraphType:E.DssGraphTypeVertical_Bar_Side_by_Side,mPlotArea:null,mChartAreaOptions:null,mRecalculateFrame:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,init:function N(S){this._super(S);this.mChartAreaOptions={useChartArea:false,chartAreaNumber:1,orientation:B.OR_VERTICAL,vecPercentageHeightOrWidth:[],seriesDistribution:[]};this.mPlotArea=S.Area||null;this.mChartContextPtr=S.GraphObjectManager.mChartContextPtr;},SetDataset:function G(S){this.mDatasetPtr=S;},SetMarginInfo:function H(V,T,S,U){this.mLeftMargin=V;this.mRightMargin=T;this.mTopMargin=S;this.mBottomMargin=U;},LoadProperties:function I(){var Z,U,b,W,X,S=[],V=[],a=[];var T=this.mChartContextPtr,Y=this.mChartAreaOptions;this.mGraphType=T.mGraphType;this.mRecalculateFrame=T.mRecalculateFrame;if(!T.mIsGraphMatrix){Z=T.GetProperty(R.DssGraphUseChartArea,P);if(Z){Y.useChartArea=Z!==K;}}U=this.mDatasetPtr.GetSeriesCount();b=1;W=0;if(Y.useChartArea){Z=T.GetProperty(R.DssGraphChartAreaNumber,P);if(Z){Y.chartAreaNumber=Z;if(Y.chartAreaNumber>U){Y.chartAreaNumber=U;}}Z=T.GetProperty(R.DssGraphChartAreaOrientation,P);if(Z){Y.orientation=(Z!==K?B.OR_VERTICAL:B.OR_HORIZONTAL);}for(X=0;X<Y.chartAreaNumber;X++){Z=T.GetProperty(R.DssGraphChartAreaSpacePercentage,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphFrame,SeriesId:X}));if(Z&&Z>=0){Y.vecPercentageHeightOrWidth.push(Z/100);b-=Z/100;}else{Y.vecPercentageHeightOrWidth.push(-1);W++;}}}else{Y.chartAreaNumber=1;Y.vecPercentageHeightOrWidth.push(1);}for(X=0;X<Y.chartAreaNumber;X++){Y.seriesDistribution.push(S);}this.mDatasetPtr.GetOneSliceRangeSimple(V,a);for(X=0;X<U;X++){if(T.mIsGraphMatrix){Y.seriesDistribution[X%Y.chartAreaNumber].push(V[X]);}else{Z=T.GetProperty(R.DssGraphChartAreaDestination,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphRiser,SeriesId:X}));if(Y.useChartArea&&Z){Y.seriesDistribution[Z].push(X);}else{Y.seriesDistribution[X%Y.chartAreaNumber].push(V[X]);}}}if(W>0){for(X=0;X<Y.chartAreaNumber;X++){if(Y.vecPercentageHeightOrWidth[X]<=0){Y.vecPercentageHeightOrWidth[X]=b/W;}}}},CalculateChartAreas:function A(W,a){var c,S,Y,V,Z=this.mChartAreaOptions,U,T,X,b;c=0;if(Z.orientation===B.OR_VERTICAL){S=W.height/20;b=Z.chartAreaNumber;for(V=0;V<b;V++){U=(W.height-S*(Z.chartAreaNumber-1))*Z.vecPercentageHeightOrWidth[V];a.push(new mstrmojo.chart.Rect2D({x:W.x,y:W.y+(W.height-S*(b-1))*c+S*V,width:W.width,height:U}));c+=Z.vecPercentageHeightOrWidth[V];}X=a[Z.chartAreaNumber-1];X.height=W.y+W.height-X.y;}else{Y=W.width/20;b=Z.chartAreaNumber;for(V=0;V<b;V++){T=(W.width-Y*(Z.chartAreaNumber-1))*Z.vecPercentageHeightOrWidth[V]+0.5;a.push(new mstrmojo.chart.Rect2D({x:W.x+(W.width-Y*(b-1))*c+Y*V,y:W.y,widht:T,height:W.height}));c+=Z.vecPercentageHeightOrWidth[V];}X=a[b-1];X.width=W.x+W.width-X.x;}},RectangleUnion:function C(S,U,T){T.x=Math.min(S.x,U.x);T.y=Math.min(S.y,U.y);T.width=Math.max(S.x+S.width,U.x+U.width)-T.x;T.height=Math.max(S.y+S.height,U.y+U.height)-T.y;},RectangleIntersection:function D(S,U,T){if((S.x>(U.x+U.width))||(U.x>(S.x+S.width))||(S.y>(U.y+U.height))||(U.y>(S.y+S.height))){return false;}T.x=Math.max(S.x,U.x);T.y=Math.max(S.y,U.y);T.width=Math.min(S.x+S.width,U.x+U.width)-T.x;T.height=Math.min(S.y+S.height,U.y+U.height)-T.y;return true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumAnchorPoint","EnumGraphMatrixMarkerTypeInChart","EnumLineStyle","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode","EnumCollectionType","EnumFontStyle");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","PiePlotRenderer","Rect2D","Vector2D","NumberObject","MarkerObject","FormatFill","Point2D","GMDataLabelInfo");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure","mstrmojo.VisUtility");var AU=mstrmojo.chart,Y=AU.common,P=AU.enums,AQ=AU.ChartConstants,AC=mstrmojo.VisUtility,AZ=P.EnumLayout,AE=P.EnumOrientation,AB=P.EnumValueAxis,Ad=P.EnumAnchorPoint,AO=P.EnumGraphMatrixMarkerTypeInChart,AX=P.EnumAxisDirection,AA=P.EnumImageUsage,a=P.EnumGraphMatrixPiePlotType,z=P.EnumCollectionType;var AN=AU.model,AD=AN.enums,Ah=AD.EnumDSSGraphMarkerShape,O=AD.EnumDSSGraphRegressionType,AM=AD.EnumDSSGraphDataTextPosition,U=AD.EnumShapeType,AG=P.EnumGraphMatrixElementSizeMode,Ag=AD.EnumDSSGraphObject,E=P.EnumFontStyle;var D=AU.common.Utility;var AS=1e-10,w=0.00001,x=2,G=3,n=1,l=2,k=3,h=4,f=5,d=6;var r=new AU.ChartAdvFormat(),Ab=new AU.Point2D(),y=new AU.Point2D(),L=new AU.Point2D();function W(An,Am){var Ao;if(An.cannotFitVertically===true&&Am.cannotFitVertically===false){return 1;}if(An.cannotFitVertically===false&&Am.cannotFitVertically===true){return -1;}if(An.cannotFitHorizontally===true&&Am.cannotFitHorizontally===false){return 1;}if(An.cannotFitHorizontally===false&&Am.cannotFitHorizontally===true){return -1;}Ao=An.overlapRefLabelCount-Am.overlapRefLabelCount;if(Ao<0){return -1;}if(Ao>0){return 1;}Ao=An.overlapRefLineCount-Am.overlapRefLineCount;if(Ao<0){return -1;}if(Ao>0){return 1;}Ao=An.overlapDataLabelCount-Am.overlapDataLabelCount;return Ao;}function q(Am){switch(Am){case U._CIRCLE:return Ah.DssGraphMarkerShapeCircle;case U._RECTANGLE:return Ah.DssGraphMarkerShapeRectangle;case U._SQUARE:return Ah.DssGraphMarkerShapeSquare;case U._TICKER:return Ah.DssGraphMarkerShapeGMTick;default:return Ah.DssGraphMarkerShapeNone;}}function Ak(Ao,An,As,Az,Ap,Am,Ax){var Au=-1,At=-1,Aw=-1,Av=new AU.Point2D({x:-1,y:-1}),Ar=this.mpABLPlotContext,Aq=Ar.mCategoryAxisPtr,Ay=Ar.mValueAxis;if(this.mIsVertical){Au=Aq.getSubGroupMiddlePos(An,Az,Am);Aw=Ay[this.mSeriesInfo[Ao].mValueAxis].GetPositionByValue(As);if(Aw!==null){At=Aw;}}else{At=Aq.getSubGroupMiddlePos(As,Ap,Ax);Aw=Ay[this.mSeriesInfo[Ao].mValueAxis].GetPositionByValue(An);if(Aw!==null){Au=Aw;}}if(Au>=0&&At>=0){Av.x=Au;Av.y=At;}return Av;}function e(Ay,Aq,A0,An){var Ap=0,As,Am,Ar,Ao=1,Av=1,Az,Au,Aw=[Ay,Aq,A0];if(this.mPieCentersPool===null){this.mPieCentersPool=new Y.MapStructure();}var At=this.mPieCentersPool.find(Aw);if(At!==null&&At!==undefined){return At;}Az=An||this.mDatasetPtr.GetPieCountAtOneDataPoint(this.mSeriesInfo[Ay].mSeriesId,Aq);if(this.mIsVertical){Ao=Az;}else{Av=Az;}Au=this.GetData(Ay,Aq);if(Au!==null){Ap=Au;}Am=this.mSeriesInfo[Ay].mSeriesId;As=Aq;Ar=A0;if(this.mIsVertical){var Ax;Ax=Ap;Ap=As;As=Ax;Ax=Am;Am=Ar;Ar=Ax;}At=Ak.call(this,Ay,Ap,As,Am,Ar,Ao,Av);this.mPieCentersPool.replace(Aw,At);return At;}function Z(){var An=this.mTrendLineObjects.length,Am;for(Am=0;Am<An;++Am){this.mTrendLineObjects[Am].Draw();}}function R(){var An=this.mReferenceLineObjects.length,Am;for(Am=0;Am<An;++Am){this.mReferenceLineObjects[Am].Draw();}}function B(Ao){var An,Am=0;for(An=0;An<Ao.length;An++){if(Ao[An]!==null){Am++;}}return Am;}function j(Ap,Ao,Av,Ax,At,An){var Ar,Aq,Am,Aw,Ay,As,Au;if(this instanceof mstrmojo.chart.BarSeriesRenderer){Ar={groupID:Ao,seriesInfoID:Ap,groupIndex:0,useFloat:!An};if(An){Aq=this.GetRiserStartPosAndSize(Ar);Aw=Ax.GetPositionByValue(Av);}else{Aq=this.GetRiserStartPosAndSize(Ar);Aw=Ax.GetFloatPositionByValue(Av);}Am=Aq.Start+Aq.Size/2;}else{if(this instanceof mstrmojo.chart.AreaSeriesRenderer||this instanceof mstrmojo.chart.LineSeriesRenderer){if(An){Am=this.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(Ao);Aw=Ax.GetPositionByValue(Av);}else{Am=this.mpABLPlotContext.mCategoryAxisPtr.getFloatGroupMiddlePos(Ao);Aw=Ax.GetFloatPositionByValue(Av);}}}Ay=At?Am:Aw;As=At?Aw:Am;Au=new AU.Point2D({x:Ay,y:As});return Au;}function b(Ar){var Ap,Am,Ao,Aq,An,As;Ao=Ar.length;if(Ao<=2){Am=Ar;}else{Am=[];Am.push(Ar[0]);for(Ap=0;Ap+2<Ao;++Ap){As=false;if((Math.abs(Ar[Ap].x-Ar[Ap+1].x)>AS)&&(Math.abs(Ar[Ap+1].x-Ar[Ap+2].x)>AS)){Aq=(Ar[Ap+1].y-Ar[Ap].y)/(Ar[Ap+1].x-Ar[Ap].x);An=(Ar[Ap+2].y-Ar[Ap+1].y)/(Ar[Ap+2].x-Ar[Ap+1].x);if(Math.abs(Aq-An)<w){As=true;}}else{if((Math.abs(Ar[Ap].x-Ar[Ap+1].x)<=AS)&&(Math.abs(Ar[Ap+1].x-Ar[Ap+2].x)<=AS)){As=true;}else{if((Math.abs(Ar[Ap].x-Ar[Ap+1].x)>AS)&&(Math.abs(Ar[Ap+1].x-Ar[Ap+2].x)<=AS)){if(Math.abs(Ar[Ap+1].y-Ar[Ap+2].y)<=AS){As=true;}}}}if(!As){Am.push(Ar[Ap+1]);}}Am.push(Ar[Ao-1]);}return Am;}function o(Ap,Aw,As,Am,Ao,Av,Au,Ar,Aq,At){var An={};An.rect=new AU.Rect2D({x:0,y:0,width:Am+2*Aq,height:Aw+2*Aq});switch(Ap){case n:if(At){An.xOffset=Av+Aq+Ao;An.yOffset=Aq+As;An.rect.x=Av;An.rect.y=0;}else{An.xOffset=Ar-Aq-Ao;An.yOffset=Av-Aq-As;An.rect.x=Ar-2*Aq-Am;An.rect.y=Av-2*Aq-Aw;}break;case l:if(At){An.xOffset=Av-Aq-Ao;An.yOffset=Aq+As;An.rect.x=Av-2*Aq-Am;An.rect.y=0;}else{An.xOffset=Ar-Aq-Ao;An.yOffset=Av+Aq+As;An.rect.x=Ar-2*Aq-Am;An.rect.y=Av;}break;case k:if(At){An.xOffset=Av+Aq+Ao;An.yOffset=Au/2;An.rect.x=Av;An.rect.y=Au/2-Aq-As;}else{An.xOffset=Ar/2;An.yOffset=Av-Aq-As;An.rect.x=Ar/2-Aq-Ao;An.rect.y=Av-2*Aq-Aw;}break;case h:if(At){An.xOffset=Av-Aq-Ao;An.yOffset=Au/2;An.rect.x=Av-2*Aq-Am;An.rect.y=Au/2-Aq-As;}else{An.xOffset=Ar/2;An.yOffset=Av+Aq+As;An.rect.x=Ar/2-Aq-Ao;An.rect.y=Av;}break;case f:if(At){An.xOffset=Av+Aq+Ao;An.yOffset=Au-Aq-As;An.rect.x=Av;An.rect.y=Au-2*Aq-Aw;}else{An.xOffset=Aq+Ao;An.yOffset=Av-Aq-As;An.rect.x=0;An.rect.y=Av-2*Aq-Aw;}break;case d:if(At){An.xOffset=Av-Aq-Ao;An.yOffset=Au-Aq-As;An.rect.x=Av-2*Aq-Am;An.rect.y=Au-2*Aq-Aw;}else{An.xOffset=Aq+Ao;An.yOffset=Av+Aq+As;An.rect.x=0;An.rect.y=Av;}break;}return An;}function AR(Aq,Ax,At,Ar,Ao,Am){var Au=Aq.rect,As,Ap,An,Av,Aw;if(Au.y<0||Au.y+Au.height>Ax){Aq.cannotFitVertically=true;return ;}if(Au.x<0||Au.x+Au.width>At){Aq.cannotFitHorizontally=true;}As=Ao.length;for(Ap=0;Ap<As;++Ap){An=Ao[Ap].GetBoundingRect();if(Au.HasIntersection(An)){++Aq.overlapRefLabelCount;}}As=Am.length;for(Ap=0;Ap<As;++Ap){Aw=Am[Ap];if(Aw.isVertical){if(Au.x<Aw.position&&Au.x+Au.width>Aw.position){++Aq.overlapRefLineCount;}}else{if(Au.y<Aw.position&&Au.y+Au.height>Aw.position){++Aq.overlapRefLineCount;}}}As=Ar.length;for(Ap=0;Ap<As;++Ap){Av=Ar[Ap];if(Av.mIsShown){An=Av.GetBoundingRect();if(Au.HasIntersection(An)){++Aq.overlapDataLabelCount;Aq.overlapDataLabels.push(Ar[Ap]);}}}}function t(A9,A4,Au){var Ao=this.mChartContextPtr,A8=Ao.GetGraphMatrixContext(),An=A8.getPadding(AQ.kRefLabel),At=Au.length,Ar,As,A1,Ay,Aq,Az,Am,A6,A5,A2,Ap,Aw,A3,A0,A7,Av=this.mpABLPlot.shownDataLabels,Ax=this.mpABLPlot.shownRefLabels;for(A6=0;A6<At;++A6){Ar=Au[A6];As=new AU.TextObject({TripleId:Ar.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:Ar.identity});if(As!==null){As.SetText(Ar.labelText);for(A5=0;A5<2;++A5){if(A5===1){Ap=As.mText;As.SetText(Ap[0]+"...");As.rect.height=0;As.rect.width=0;}Am=As.GetBoundingRect();Ay=Am.height;Az=Ay/2;A1=Am.width;Aq=A1/2;A0=[];for(A2=n;A2<=d;++A2){Aw={};Aw.position=A2;Aw.cannotFitVertically=false;Aw.cannotFitHorizontally=false;Aw.overlapRefLabelCount=0;Aw.overlapRefLineCount=0;Aw.overlapDataLabelCount=0;Aw.overlapDataLabels=[];A3=o.call(this,A2,Ay,Az,A1,Aq,Ar.position,A9,A4,An,Ar.isVertical);Aw.xOffset=A3.xOffset;Aw.yOffset=A3.yOffset;Aw.rect=A3.rect;AR.call(this,Aw,A9,A4,Av,Ax,Au);A0.push(Aw);}A0.sort(W);if(A0[0].cannotFitVertically){break;}if(A0[0].cannotFitHorizontally){if(A6===0){continue;}else{break;}}As.MoveTo(A0[0].xOffset,A0[0].yOffset,Ad.CENTER);As.mIsShown=true;A7=A0[0].overlapDataLabelCount;for(A2=0;A2<A7;++A2){A0[0].overlapDataLabels[A2].mIsShown=false;}this.mpABLPlot.mPostTrendLineObjects.push(As);Ax.push(As);break;}}}}mstrmojo.chart.SeriesRenderer=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.SeriesRenderer",mDeviceDataArea:null,mpABLPlot:null,mGroupCount:0,mSeriesCount:0,mDatasetPtr:null,mLegendPtr:null,mSeriesInfo:null,mCumulateData:null,mSeriesNumber:null,mTextCollection:null,mTrendLineObjects:null,mReferenceLineObjects:null,mpABLPlotContext:null,mIsVertical:true,mUseDepth:false,mHasNegativeValue:false,mDepth:0,mDepthDirection:0,mStartLevel:0,mGroupIdMapPerSeries:[],mHasSizeBy:false,mHasColorBy:false,mClippedMarkerSize:null,mPieRenderer:null,mPieCentersPool:null,renderSequence:null,init:function AF(An){this._super(An);this.mSeriesInfo=[];this.mCumulateData=[[],[]];this.mClippedMarkerSize={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};this.mSeriesNumber=[0,0];this.mTextCollection=[];this.mTrendLineObjects=[];this.mReferenceLineObjects=[];this.mDatasetPtr=An.DataSet;this.mLegendPtr=An.Legend;this.mDepth=0;this.mDepthDirection=0;this.mHasNegativeValue=false;this.mpABLPlot=this.mpManager;this.mGroupCount=this.mDatasetPtr.GetGroupCount();var Ap=this.mpABLPlotContext=this.mpABLPlot.mABLPlotContext;this.mIsVertical=(Ap.mABLOptions.mOrientation===AE.OR_VERTICAL);this.mUseDepth=Ap.mABLOptions.mUseDepth;if(this.mUseDepth){this.mDepth=this.mpABLPlot.unitLevelDepth;this.mDepthDirection=Ap.mABLOptions.mDepthDirection;}var Ao=this.mChartContextPtr,Am=Ao.GetGraphMatrixContext();this.mHasSizeBy=Am.mHasSizeBy;this.mHasColorBy=Am.mHasColorBy;this.renderSequence=[];},AddSeries:function Aj(An,Ap,Am,Ao){this.mSeriesInfo.push({mSeriesId:An,mSeriesIndex:Ap,mDataIndex:Am,mValueAxis:Ao});++this.mSeriesNumber[Ao];},GetMinMaxValue:function Q(A2,Aq,Ax,Au){var An=this.mChartContextPtr,At,Az,A0,Aw=[],Ar,Ap,Ao,A1=this.mSeriesInfo,Av,Am;if(A1.length===0){return{Min:Aq,Max:Ax,AreInitialized:Au};}if(An.mIsUniformAxisMode){var As=An.getUniformAxisContext(),Ay=As.ValueAxis;if(An.IsVertical()===false){if(A2===0){return{Min:Ay.X1.Min,Max:Ay.X1.Max,AreInitialized:true};}else{return{Min:Ay.X2.Min,Max:Ay.X2.Max,AreInitialized:true};}}if(A2===0){return{Min:Ay.Y1.Min,Max:Ay.Y1.Max,AreInitialized:true};}return{Min:Ay.Y2.Min,Max:Ay.Y2.Max,AreInitialized:true};}At=An.mIsTimeSeriesChart&&this.mpABLPlotContext.mABLOptions.mUseGlobalAutoScale;Az=0;A0=this.mDatasetPtr.GetDataGroup();for(Ar=0;Ar<A1.length;++Ar){if(A1[Ar].mValueAxis===A2){if(At){Aw.push(A1[Ar].mSeriesId);}else{for(Ap=0;Ap<this.mGroupCount;++Ap){for(Ao=0;Ao<A0;++Ao){Az=this.GetData(Ar,Ap,false,Ao);if(Az!==null){continue;}if(!Au){Au=true;Aq=Az;Ax=Az;}else{Ax=Math.max(Az,Ax);Aq=Math.min(Az,Aq);}}}}}}if(At&&Aw.length!==0){Av=0;Am=0;Az=this.mDatasetPtr.GetPeakValuesAcrossSeries(Am,Av,Aw,0);Ax=(Az.Max>Ax)?Az.Max:Ax;Aq=(Az.Min<Aq)?Az.Min:Aq;Au=true;}return{Min:Aq,Max:Ax,AreInitialized:Au};},GetData:function AI(As,At,Aq,An){var Ax=this.mpABLPlotContext,Av=Ax.mABLOptions,Ap=this.mpABLPlot,Aw=Av.mLayout,A0=this.mSeriesInfo,Ar=this.mDatasetPtr,Ay=A0[As].mValueAxis,Az,Au,Am,Ao;Aq=Aq||false;An=An||0;if((Aw===AZ.LO_STACKED)||(Aw===AZ.LO_PERCENT)){Az=this.hGetCumulateData(Ay,A0[As].mDataIndex,At);Au=Ar.GetData(A0[As].mSeriesId,At,An);if(Au!==null){if(Aq){Am=Ax.mValueAxis[Ay].GetBaseValue();Az=(Az-Am-Au)+Am;if(D.AlmostZero(Az)){Az=0;}}if(Aw===AZ.LO_PERCENT){Ao=Ap.getGroupTotals(At,Ay);if(Ao===0){Az=0;}else{Az/=Ao;}}return Az;}if(Aw===AZ.LO_PERCENT){Ao=Ap.getGroupTotals(At,Ay);if(Ao===0){Az=0;}else{Az/=Ao;}}return null;}Au=Ar.GetData(A0[As].mSeriesId,At,An);if(Au!==null){Az=Au;}else{Az=null;}return Az;},SetDeviceDataArea:function I(Am){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AU.Rect2D({Rect2D:Am});}else{this.mDeviceDataArea.ResetRect(Am);}}},IsReverseSeriesOrder:function c(Ao){var Am=this.mpABLPlotContext.mValueAxis,An;if(Ao>=Am.length){return false;}An=Am[Ao];return this.mChartContextPtr.IsReverseSeriesOrder(An,this.mIsVertical,this.mDepthDirection);},IsReverseGroupOrder:function p(){return this.mChartContextPtr.IsReverseGroupOrder(this.mIsVertical,this.mDepthDirection);},PriorToNextSeries:function N(An){var Aq=this.mChartContextPtr,Ao,Ap,Am=false;Ao=this.mIsVertical?new AU.Vector2D({x:1,y:0}):new AU.Vector2D({x:0,y:1});Ap=Aq.normalDirection(An,this.mDepthDirection)*Aq.normalDirection(Ao,this.mDepthDirection);if(Ap===0){Am=this.mIsVertical?(An.y>0):(An.x<0);}else{Am=Ap>0;}return Am;},CreateTotalLabel:function S(At,An,Ar){var Au=this.mSeriesInfo,Aq=true,Ap=0,Ao,As,Am;for(Ao=0;Ao<Au.length;++Ao){if(Au[Ao].mValueAxis===At&&this.mpABLPlotContext.mSeriesOptions[Au[Ao].mSeriesIndex].mShowDataLabels){As=this.mDatasetPtr.GetData(Au[Ao].mSeriesId,An);if(As!==null){Ap+=As;if(Aq){Aq=false;}}}}if(Aq){return null;}Am=new AU.NumberObject({TripleId:new AU.TripleId({ObjectId:401,SeriesId:At,GroupId:An}),GraphObjectManager:this,Number:Ap,NumberFormat:this.mpABLPlotContext.mSeriesOptions[0].mGraphNumberFormat,GraphCollectionObject:Ar,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr});this.AddToMap(Am);Ar.AddGraphObject(Am);return Am;},GetUpmostIndexByValueAxisAndGroup:function M(As,Ap){var Aq=this.mSeriesInfo,An,Ao,Ar,Am;An=-1;Am=Aq.length;for(Ao=Am-1;Ao>-1;--Ao){if(Aq[Ao].mValueAxis===As){Ar=this.mDatasetPtr.GetData(Aq[Ao].mSeriesId,Ap);if(Ar!==null){An=Ao;if(Ar>0){break;}}}}return An;},createRiserLabel:function AV(Am,An,Aq){var Av=this.mSeriesInfo,Au=Av[Am],Ap=this.mpABLPlotContext.mABLOptions,Ao,Ar,At=null,As="";Ao=this.mDatasetPtr.GetData(Au.mSeriesId,An);if(Ao===null){return null;}Ar=0;if(((Ap.mLayout===AZ.LO_STACKED)||(Ap.mLayout===AZ.LO_PERCENT))&&(!Ap.mShowCumulate)){Ar=Ao;if(Ap.mLayout===AZ.LO_PERCENT&&Ap.mShowAsPercentage){Ar/=this.mpABLPlot.getGroupTotals(An,Au.mValueAxis);}}else{if(Ap.mLayout===AZ.LO_PERCENT&&!Ap.mShowAsPercentage){Ar=this.hGetCumulateData(Au.mValueAxis,Au.mDataIndex,An);}else{Ar=this.GetData(Am,An);if(Ar===null||Ar===undefined){return null;}}}Ap.mShowValue=true;if(Ap.mShowValue){At=this.mpABLPlotContext.mSeriesOptions[Au.mSeriesIndex].mGraphNumberFormat;}if(Ap.mShowLabel){As=this.mDatasetPtr.GetSeriesLabel(Au.mSeriesId,false);}return this.mpABLPlot.createRiserLabel(new AU.TripleId({ObjectId:Ag.DssGraphDataText,SeriesId:Au.mSeriesId,GroupId:An}),Ar,At,As,Aq);},AddTextToMapAndList:function AK(){},GetIndexFromSeriesId:function Al(Ap){var Ao=this.mSeriesInfo,Am=Ao.length,An;for(An=0;An<Am;++An){if(Ao[An].mSeriesId===Ap){return An;}}return -1;},AddLegendMarkerToCollection:function u(Aq,An,Am,Ao,Ap,Ar){Am=Am||false;Ao=(Ao===undefined)?true:Ao;Ap=Ap||Ah.DssGraphMarkerShapeRectangle;Ar=(Ar===undefined)?true:Ar;this.mpABLPlot.AddLegendMarkerToCollection(this.mSeriesInfo[Aq].mSeriesId,An,Am,Ao,Ap,Ar);},MoveLabel:function AP(A0,Az,A8,A6,Am){var A4=this.mSeriesInfo,A1=this.mpABLPlotContext.mABLOptions,BB,Av,BA,At,Ay,As,An,Au,A3,A5,Ar,Aq,Ap,A7,A9,Ao,Ax,Aw,A2,BC;if(Az===null||Az===undefined){return ;}BB=this.mpABLPlotContext.mValueAxis[A4[Am].mValueAxis].IsReverseOrder();Av=BB;BA=BB?-1:1;At=0;BC=this.GetData(Am,A0);if(BC!==null&&BC!==undefined){At=BC;}if(BC&&(At<0)){BA=-BA;Av=!Av;}y.Reset(A8.x,A8.y);L.Reset(A6.x,A6.y);Ay=y;As=L;if(this.mIsVertical){if(Av){if(Ay.y<As.y){Ay.swapPoints(As);}}else{if(As.y<Ay.y){Ay.swapPoints(As);}}}else{if(Av){if(As.x<Ay.x){Ay.swapPoints(As);}}else{if(Ay.x<As.x){Ay.swapPoints(As);}}}An=Az.GetBoundingRect();Au=Math.floor(An.width/2);A3=Math.floor(An.height/2);Ab.Reset(Ay.x,Ay.y);A5=Ab;Ar=Az.mTripleId;Aq=(Ar.mObjectId===Ag.DssGraphDataTextStackTotal);Ap=Aq?AM.DssGraphDTPositionOutMax:A1.mTextPosition;if(Ap===AM.DssGraphDTPositionOutMin||Ap===AM.DssGraphDTPositionInMin){A5.x=As.x;A5.y=As.y;}switch(Ap){case AM.DssGraphDTPositionCenter:A5.x=(A5.x+As.x)/2;A5.y=(A5.y+As.y)/2;break;case AM.DssGraphDTPositionInMin:case AM.DssGraphDTPositionOutMax:if(this.mIsVertical){A5.y-=A3*BA;}else{A5.x+=Au*BA;}break;case AM.DssGraphDTPositionOutMin:case AM.DssGraphDTPositionInMax:if(this.mIsVertical){A5.y+=A3*BA;}else{A5.x-=Au*BA;}break;default:break;}if(Aq&&A1.mTextPosition===AM.DssGraphDTPositionOutMax){A7=this.GetUpmostIndexByValueAxisAndGroup(AB.VA_Y1,A0);A9=this.mpManager.GetGraphObject(new AU.TripleId({ObjectId:Ag.DssGraphDataText,SeriesId:A4[A7].mSeriesId,GroupId:A0}));if(!A9){Az.MoveTo(A5.x,A5.y,Ad.CENTER);return ;}Ao=A9.GetBoundingRect();Ax=A9.GetFormatFont();Aw=Az.GetFormatFont();A2=Ax.mFontSize+Aw.mFontSize;if(this.mIsVertical){if(Ax.isHorizontal()||Aw.isHorizontal()){A5.y-=Math.floor(Ao.height+A2/3)*BA;}else{if(Ax.isVertical()){A5.x+=A2;}else{A5.x+=Math.floor(A2*Math.SQRT2);}}}else{if(Ax.isVertical()||Aw.isVertical()){A5.x+=Math.floor(Ao.width+A2/3)*BA;}else{if(Ax.isHorizontal()){A5.y+=A2;}else{A5.y+=Math.floor(A2*Math.SQRT2);}}}}Az.MoveTo(A5.x,A5.y,Ad.CENTER);},updateGroupStackInfoWithBase:function AJ(Ax,Aq,A1){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}function A0(A6,A5){var A4=A5+1;for(;A4<A6.length;A4++){if(A6[A4]!==null&&A6[A4]!==undefined){return Math.min(A6[A4],A1);}}return A1;}function Ar(A6,A5){var A4=A5-1;for(;A4>=0;A4--){if(A6[A4]!==null&&A6[A4]!==undefined){return Math.max(A6[A4],A1);}}return A1;}var At=this.mStackedGroupInfos,An;if(At[Ax]&&At[Ax][Aq]){return At[Ax][Aq];}var Ay=At[Ax],Av,A2=[],Ao=this.mSeriesInfo,Aw=Ao.length;var As=[],Au=[];for(Av=0;Av<Aw;Av++){var Ap=this.GetData(Av,Aq),A3={Min:Ap,Max:Ap,SeriesIndex:Av};(Ap>=0)?As.push(A3):Au.unshift(A3);}An=Au.concat(As);var Am=[],Az=-1;for(Av=0;Av<An.length;Av++){A2[An[Av].SeriesIndex]=Av;Am.push(An[Av].Max);}for(Av=0;Av<An.length;Av++){if(An[Av].Max!==null&&An[Av].Max!==undefined){if(An[Av].Max>=A1){An[Av].Min=Ar(Am,Av);}else{An[Av].Max=A0(Am,Av);}}}Ay[Aq]=An;At[Ax+2][Aq]=A2;return Ay[Aq];},getGroupStackedInformation:function AT(Ay,As){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}var Ap=this.mStackedGroupInfos;if(Ap[Ay]&&Ap[Ay][As]){return Ap[Ay][As];}var Am=Ap[Ay],Au,An=[],Av=this.mSeriesInfo,Ar=Av.length;var At=[],Aq=[];for(Au=0;Au<Ar;Au++){var Aw=this.GetData(Au,As,true),Ax=this.GetData(Au,As),Ao={Min:Math.min(Aw,Ax),Max:Math.max(Aw,Ax),SeriesIndex:Au};(Ax>=0)?At.push(Ao):Aq.unshift(Ao);}Am[As]=Aq.concat(At);for(Au=0;Au<Am[As].length;Au++){An[Am[As][Au].SeriesIndex]=Au;}Ap[Ay+2][As]=An;return Am[As];},getSeriesOffsetIntoStackedInfo:function J(As,Ap,An){var Ar=this.mStackedGroupInfos;if(Ar[As+2]&&Ar[As+2][Ap]){return Ar[As+2][Ap][An];}var Am=Ar[As],Aq=Am[Ap],Ao;for(Ao=0;Ao<Aq.length;Ao++){if(Aq[Ao].SeriesIndex===An){return Ao;}}return An;},analyzeGroupInfo:function T(As,Ar,Aq){this.groupStackAnalysis=this.groupStackAnalysis||[[],[]];if(this.groupStackAnalysis[As][Ar]){return this.groupStackAnalysis[As][Ar];}var Am=this.groupStackAnalysis[As],Ap=this.getGroupStackedInformation(As,Ar),Ao,An={Reverse:3};if(Ap&&Ap.length){Ao=Ap.length-1;if(Ap[Ao].Max<=Aq){An={Reverse:0,CeilUpdated:Ao};}else{if(Ap[0].Min>=Aq){An={Reverse:1,FloorUpdated:0};}else{for(Ao=0;Ao<Ap.length;Ao++){if(Ap[Ao].Max>=Aq){An.FloorUpdated=Ao;An.CeilUpdated=Ao>0?Ao-1:-1;}}}}}else{An={Reverse:4};}Am[Ar]=An;return Am[Ar];},UpdateCumulateData:function Aa(A2,Aw,A0){var Av=this.mSeriesInfo,As=this.mDatasetPtr,Ao=this.mGroupCount,Au=this.mCumulateData,A4,An,Am,A1,Az,Ay,Ax,At=this.mChartContextPtr.IsDualAxis(),A5=A0!==undefined&&A0>=0,Ap,A3,A6,Aq;if(A5){var Ar=As.GetValueAxisBySeries(A0);if(Ar!==A2){return Aw;}}A4=Av.length;if(A4===0){return Aw;}A1=A4;if(At){An=this.mSeriesNumber[0];Am=A4-An;}for(Az=0;Az<Ao;++Az){Ap=(Aw&&Aw.positive[Az])||0;A3=(Aw&&Aw.negative[Az])||0;for(Ay=0;Ay<A4;++Ay){if(A5){if(Av[Ay].mSeriesId!==A0){continue;}}if(Av[Ay].mValueAxis===A2){A6=As.GetData(Av[Ay].mSeriesId,Az);Aq=0;if(A6!==null&&A6!==undefined){Aq=A6;if(Aq<0){this.mHasNegativeValue=true;Aq+=A3;A3=Aq;}else{Aq+=Ap;Ap=Aq;}}else{Aq=Ap;}if(A5){if(Aq>=0){Aw.positive[Az]=Aq;}else{Aw.negative[Az]=Aq;}if(At){A1=A2===AB.VA_Y1?An:Am;}Ax=Az*A1+Av[Ay].mDataIndex;Au[A2][Ax]=Aq;}else{Au[A2].push(Aq);if(Ay===A4-1){if(Aq>=0){Aw.positive[Az]=Aq;}else{Aw.negative[Az]=Aq;}}}}}}return Aw;},AddBaseToCumulateData:function AL(Ap,Ao){var Am=this.mCumulateData[Ap].length,An;for(An=0;An<Am;++An){this.mCumulateData[Ap][An]+=Ao;}},drawSingleDataPoint:function V(Ax,Aw,An,At){var Ar=this.mChartContextPtr,A0=Ar.GetGraphMatrixContext(),Ao=0,Az,Ay,A3,As,Am,A1,Av=[],Au=this.mpABLPlot.shownDataLabels;var Ap=A0.mMarkerShape;if(Ap===Ah.DssGraphMarkerShape2DPie||Ap===Ah.DssGraphMarkerShape2DRingPie){if(this.mPieRenderer===null){var A2=0;if(Ap===Ah.DssGraphMarkerShape2DRingPie){A2=1;}this.mPieRenderer=new AU.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:this.mChartContextPtr,Layout:A2,PlotType:a.GMPPT_CATEGORY,ShownDataLabel:Au});}var Aq=this.mPieRenderer;Ao=this.mDatasetPtr.GetPieCountAtOneDataPoint(Ax.mSeriesId,Ax.mGroupId);for(Az=0;Az<Ao;++Az){if(Ar.checkColorByAndSizeByValue(Ax,this.mDatasetPtr,false,this.mHasSizeBy)===false){Av.push({Object:null,ShapeSize:As});continue;}if(Ar.mImageUsage===AA.GENERAL){A3=e.call(this,Ax.mSeriesId,Ax.mGroupId,Az,Ao);Am=Aq.drawSinglePie(Ax.mSeriesId,Ax.mGroupId,Az,A3,Ao);for(Ay=0;Ay<Am.length;Ay++){if(Am[Ay]){Av.push({Object:Am[Ay],ShapeSize:Am[Ay].getShapeSize()});}}}else{if(Ar.mImageUsage===AA.OBJECT_CLIP_COMPUTATION){As=Aq.getShapeSizeAt(Ax.mSeriesId,Ax.mGroupId,Az,!this.mHasSizeBy);Av.push({Object:null,ShapeSize:As});}}}}else{if(An===U._COMBINED){An=this.mDatasetPtr.GetShapeByCell(Ax.mSeriesId,Ax.mGroupId);if(An===U._GENERIC){An=U._CIRCLE;}}A1=this.drawSinglePoint(Ax,Aw,An,At);Av.push(A1);}return Av;},drawSinglePoint:function Af(A1,A0,Ap,Az){var As=(Ap!==undefined)?Ap!==U._LINE:false,Au=this.mChartContextPtr,A4=Au.GetGraphMatrixContext(),Av=this.mGroupCount,A5,Ar,At,A3,Aq,Ay,Ao,A2=this.mDatasetPtr.getForecastCount();if(Au.checkColorByAndSizeByValue(A1,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return{Object:null,ShapeSize:0};}if(Az===U._AREA){As=false;}At=q.call(this,Ap);if(Au.RenderClusterShapes()){if(!(Av===1&&Ap===2)){Av*=this.mSeriesInfo.length;}}if(At===Ah.DssGraphMarkerShapeGMTick){A3=A4.GetMaxMarkerSize(AO._TICK_CATEGORY,Au.IsVertical(),Av);}else{if(Ap===U._AREA||Az===U._AREA){A3=A4.GetMaxElementSizeInAreaChart(this.mIsVertical,Av,!As,A2);}else{A3=A4.GetMaxElementSizeInLineChart(this.mIsVertical,Av,!As,At);}}Ar=this.mDatasetPtr.GetGroupCount();if(this.mHasSizeBy){A5=this.mDatasetPtr.GetSizeByData(A1.mSeriesId,A1.mGroupId);if(A5!==null&&A5!==undefined){if(At===Ah.DssGraphMarkerShapeNone&&(A4.mMaxSizeVal===A4.mMinSizeVal)){if(!As&&Ar>=3){A3=A4.GetAdjustThicknessValue(A4.mConstants.MinimalSize.General);}A3=Math.round(Math.max(A3,1));}else{A3=A4.GetScaledSize(A5,A3,Ap);A3=Math.max(Math.round(A3),A4.mConstants.MinimalSize.General);}}}if(Au.mImageUsage===AA.OBJECT_CLIP_COMPUTATION){var Ax=A3;if(At===Ah.DssGraphMarkerShapeGMTick){Ax=Math.round(0.5*(this.mIsVertical?A4.mConstants.FixedTickerSize:A3));}return{Object:null,ShapeSize:Ax};}if(At===Ah.DssGraphMarkerShapeNone){At=Ah.DssGraphMarkerShapeCircle;}if(At===Ah.DssGraphMarkerShapeGMTick){var An,Am,Aw=Math.round(0.5*A3);if(Au.IsVertical()){An={x:A0.x-Aw,y:A0.y};Am={x:A0.x+Aw,y:A0.y};}else{An={y:A0.y-Aw,x:A0.x};Am={y:A0.y+Aw,x:A0.x};}Aq=new AU.StraightLineObject({TripleId:A1,GraphObjectManager:this,StartPoint:An,EndPoint:Am,GraphCollectionObject:null,Shape:U._TICKER});}else{if(At===Ah.DssGraphMarkerShapeSquare||At===Ah.DssGraphMarkerShapeRectangle){Ao=this.mChartContextPtr.transformToRect(A0,A3,true);Aq=new AU.RectangleObject({TripleId:A1,GraphObjectManager:this,GraphCollectionObject:null,Area:Ao,Shape:U._RECTANGLE,hasFill:true});}else{Aq=new AU.MarkerObject({TripleId:A1,GraphObjectManager:this,MarkerPosition:A0,MarkerShape:At,IsIsometric:true,MarkerSize:A3,GraphCollectionObject:null,IsDialogSize:false,Shape:U._CIRCLE,hasFill:true});}}if(A4.mMarkerShape===Ah.DssGraphMarkerShapeNone){A4.AddToIsolatedDotList(A1);if(A1.mObjectId!==Ag.DssGraphDataMarker){Ay=new AU.TripleId({ObjectId:Ag.DssGraphDataMarker,SeriesId:A1.mSeriesId,GroupId:A1.mGroupId});A4.AddToIsolatedDotList(Ay);}}return{Object:Aq,ShapeSize:Aq.getShapeSize()};},getCorrectGroupIdInSeriesPoints:function Ae(Am,Ao){var An=this.mGroupIdMapPerSeries[Am];if(An!==null&&An!==undefined){return An;}return Ao;},prepareTransitionalGradient:function g(Am,Ar,As){var Ap,Ao,Aq={Effective:false};if(As!==undefined){As=Math.min(Ar.length,As);}else{As=Ar.length;}Aq.Colors=[];for(Ap=0;Ap<As;Ap++){var An=this.mDatasetPtr.GetColorByData(Am.mSeriesId,Am.mGroupId+Ap);if(An===null){An=this.mDatasetPtr.GetDefaultShapeFillColor();}if(Ap===0){Ao=An;Aq.StartGraphColor=An;}else{if(Ap===As-1){Aq.EndGraphColor=An;Aq.Effective=Aq.Effective||An!==Ao;}else{Aq.Colors.push({Color:An,Step:Ap/(As-1)});Aq.Effective=Aq.Effective||An!==Ao;}}}Aq.Style=1;Aq.EndAlpha=255;Aq.Angle=this.mChartContextPtr.IsVertical()?0:1;return Aq;},getMaxElementOffsetClippedByBoundary:function AH(Am,Ap,An){var Aq=Ap?(An?"X1":"X2"):(An?"Y1":"Y2");if(this.mClippedMarkerSize[Aq]){var Ao=this.mClippedMarkerSize[Aq];Am.LowOffset=Math.max(Ao.LowOffset,Am.LowOffset);Am.HighOffset=Math.max(Ao.HighOffset,Am.HighOffset);}else{Am.LowOffset=Math.max(0,Am.LowOffset);Am.HighOffset=Math.max(0,Am.HighOffset);}},CreateOneDataMarker:function F(An,Aw,Av,A2,Az,A9){var A1=this.mSeriesInfo[An],Ar=this.mChartContextPtr,A3=new AU.TripleId({ObjectId:Ag.DssGraphRiser,SeriesId:A1.mSeriesId,GroupId:Aw}),A5=Ar.GetGraphMatrixContext(),Ax=this.mDatasetPtr,Ap=Ax.GetShapeBySeries(A1.mSeriesId),A6=(Ap===U._LINE||Ap===U._GENERIC),A0=(Ap===U._AREA),As=A5.IsIsolatedDot(A3),Au=A5.mHasSizeBy,A7,Ay,Am,At;A9=A9||false;var A8,Aq=Ah.DssGraphMarkerShapeCircle;if(A5.mMarkerShape===Ah.DssGraphMarkerShapeCombined){A7=(Ap===U._CIRCLE||Ap===U._RECTANGLE||Ap===U._SQUARE);}else{A7=(A5.mMarkerShape===Ah.DssGraphMarkerShapeCircle||A5.mMarkerShape===Ah.DssGraphMarkerShapeRectangle||A5.mMarkerShape===Ah.DssGraphMarkerShapeSquare);}A8=(!As&&!A7&&!Au);if(!A8){return ;}Am=this.mDatasetPtr.getMarkerShapeInfoAt(A1.mSeriesId,Aw);A8=(Am.Show||A9)&&Aq!==undefined;if(!A8){return ;}Aq=Am.Shape;Av=null;var BA=new AU.TripleId({ObjectId:Ag.DssGraphDataMarker,SeriesId:A1.mSeriesId,GroupId:Aw}),A4=Am.Size||3;if(A9){Aq=Ah.DssGraphMarkerShapeCircle;A4=A5.mConstants.FixedDataMarkerSize;}if(Aq===Ah.DssGraphMarkerShapeCircle){Ay=new AU.MarkerObject({TripleId:BA,MarkerPosition:A2,MarkerShape:Aq,IsIsometric:true,MarkerSize:A4,GraphCollectionObject:Av,GraphObjectManager:this,IsDialogSize:false,Shape:U._CIRCLE});}else{if(Aq===Ah.DssGraphMarkerShapeRectangle||Aq===Ah.DssGraphMarkerShapeSquare){var Ao=this.mChartContextPtr.transformToRect(A2,A4,true);Ay=new AU.RectangleObject({TripleId:BA,GraphObjectManager:this,GraphCollectionObject:Av,Area:Ao,Shape:U._RECTANGLE});}}At=this.mGraphObjectList;if(A6){At.push(Ay);}else{if(A0){At.push(Ay);}}},CreateAllDataLabels:function A(){var Ap,An,Aq,Ar,Aw=this.mTextCollection,Ao,Au,Ax=true,At=this.mDataLabels,As=this.mSeriesInfo,Am,Av;Aq=new AU.TripleId({ObjectId:Ag.DssGraphDataText});if(Ax){Ar=new AU.GraphCollectionObject({TripleId:Aq,GraphObjectManager:this,CollectionType:z.CT_TEXT});}for(Ap=0;Ap<As.length;++Ap){Av=As[Ap].mSeriesId;if(this.mDatasetPtr.showSeriesDatalabel(Av)===false){continue;}if(!Ax){Ar=new AU.GraphCollectionObject({TripleId:Aq,GraphObjectManager:this,CollectionType:z.CT_TEXT});}Aw.push(Ar);for(An=0;An<this.mGroupCount;++An){Ao=this.mDatasetPtr.GetData(Av,An);if(Ao!==undefined&&Ao!==null){Au=this.CreateOneDataLabel(Av,An,Ao,Ar);if(Au!==null&&Au!==undefined){Am=new AU.GMDataLabelInfo({SeriesId:Av,GroupId:An,SeriesInfo:Ap,isValid:true,Label:Au});Au.mIsShown=false;At.push(Am);this.AddToMapAndList(Au);}}}}},hGetCumulateData:function X(Ao,An,Am){return this.mCumulateData[Ao][Am*this.mSeriesNumber[Ao]+An];},GetAccompanyPoints:function Ac(Ao,Aq){var Ap=new AU.Point2D(),Am=new AU.Point2D(),An={};Ap.x=Ao.x;Ap.y=Ao.y;Am.x=Ao.x;Am.y=Ao.y;if(this.mIsVertical){Ap.y-=Aq;Am.y+=Aq;}else{Ap.x-=Aq;Am.x+=Aq;}An.lowPoint=Ap;An.highPoint=Am;return An;},CreateOneDataLabel:function Ai(A1,Ar,Am,Ax){var As=Am,Av="",Ay,Au,Ap,A2,Aq,A0,Az,At,Aw,Ao=this.mpABLPlot.realComboChart,An;Au=new AU.TripleId({ObjectId:Ag.DssGraphDataText,SeriesId:A1,GroupId:Ar});Aq=this.mDatasetPtr;Az=this.mpABLPlotContext;At=Az.mABLOptions;Aw=At.mLayout;if(Aw===AZ.LO_STACKED||Aw===AZ.LO_PERCENT){As=Aq.GetData(A1,Ar);}A0=Aq.dataLabelStyle;switch(A0){case x:Ay=this.mSeriesInfo[0].mValueAxis;r.restore();Aq.getGridDataFormat(r,A1,Ar,0);Ap=new AU.NumberObject({TripleId:Au,GraphObjectManager:this,Number:As,NumberFormat:r,GraphCollectionObject:Ax,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(Ap){Av=Ap.mText;A2=Ap;}break;case G:Av=this.mDatasetPtr.GetTextLabel(A1,Ar);A2=new AU.TextObject({TripleId:Au,GraphObjectManager:this,GraphCollectionObject:Ax});break;}if(Av.length!==0){A2.SetText(Av);if(Ao){An=A2.mFormatFontPtr;An.mFontStyle=E.FS_BOLD;A2.strokeBBox();}return A2;}return null;},Draw:function AW(){this._super();Z.call(this);R.call(this);},updateSeriesRenderSequence:function s(An,At,Ap){var Ar,Ao,Aq=0,As=this.renderSequence,Am=As.length;if(Ap===undefined){Ap=true;}At=Ap?At:0;for(Ar=0;Ar<Am;Ar++){Ao=As[Ar];if(Ao!==null&&Ao!==undefined){Aq++;An[Ar]=Ao+At;}}if(Ap){return At+Aq;}return 0;},populateRenderSequence:function AY(Aq){if(Aq){this.renderSequence=Aq;}else{var An,Ao=this.renderSequence,Ap=this.mSeriesInfo,Am=Ap.length;Ao.splice(0,Ao.length);for(An=0;An<Am;An++){Ao[Ap[An].mSeriesId]=An;}}},evalBarStyleUnitWidth:function H(Am,Ap,Ar){var As=this.mChartContextPtr,Ao=As.GetGraphMatrixContext(),An={unitWidth:0,columns:1,riserGap:0,groupGap:0,overlapRatio:0,gapRatio:10};if(Ar===undefined){Ar=10;var Aq=Ao.mElementsInfo;if(Aq.Max.Mode===AG._MANUAL){Ar=Aq.Max.Size*100;if(Ar<1){Ar=1;}if(Ar>100){Ar=99;}An.gapRatio=100-Ar;}}else{An.gapRatio=Ar;}An.columns=Ap||this.mSeriesInfo.length;An.unitWidth=(Am*(1-An.gapRatio/100)/An.columns);if(As.mIsGraphMatrix){if(An.unitWidth>2){An.unitWidth-=1;}if(Ao.mElementsInfo.Max.Mode===AG._AUTOMATIC){An.unitWidth=Math.min(An.unitWidth,Ao.mConstants.MaximalSize.Bar);}if(this.mHasSizeBy===false){if(!As.isCompactMode()){An.unitWidth=Math.max(An.unitWidth,Ao.mConstants.MinimalSize.Bar);}}An.gapRatio=(1-An.unitWidth*An.columns/Am)*100;An.riserGap=0;An.groupGap=Am*An.gapRatio/100;}return An;},GenerateTrendLine:function K(){var A6=this.mpABLPlotContext,Aw,A7,At=A6.mCategoryAxisPtr,BI,BG,BE,A1,BF,BL,A0,BC,BH=this.mDatasetPtr,A3=this.mChartContextPtr,A2=this.mSeriesInfo,Au=A2.length,Ao,A4,BA,Ap,As,A5,A8=[],Av,A9,BK,BB,An,Am,Ax,Ay,Aq,BJ,Az={},BD={},Ar={};if(BH.isBare(A3.IsPieChart())){return ;}if(At.mAxisInfo.mAxisDirection===AX.AD_X){A7=true;}else{A7=false;}for(BI=0;BI<Au;++BI){A8=[];Ao=A2[BI];A4=Ao.mSeriesId;Aw=BH.GetTrendLineOfSeries(A4);Ap=Ao.mValueAxis;As=A6.mValueAxis[Ap];Av=new AU.TripleId({ObjectId:Ag.DssGraphTrendLine,SeriesId:A4});if(!!Aw===false){continue;}A1=Aw.getTrendLineType();if(A1===O.DssGraphRegressionNone){continue;}BB=Aw.getIdentity();BL=Aw.getTrendLineValuesWithForecast();A0=Aw.getTrendLineValues();BF=Aw.getSeasonalityType();if(B(A0)<=1){continue;}if(!!BL===false||BL.length===0){continue;}BC=BL.length;if(A1===O.DssGraphRegressionLinear){if(BF!==0){for(BG=0;BG<BC;++BG){BA=BL[BG];if(BA!==null&&BA!==undefined){A5=j.call(this,BI,BG,BA,As,A7,true);if(A5.x!==null&&A5.y!==null){A8.push(A5);}else{AC.visPrint("Trendline point calculation abnormal:");AC.visPrint("\tseries #: "+BI+", data point #:"+BG);AC.visPrint("\tvalue = "+BA);AC.visPrint("\tx = "+A5.x+", y = "+A5.y);}}}A8=b.call(this,A8);BJ=A8.length;if(BJ>=2){Ay=A8[0].x;Aq=A8[BJ-1].x;An=(Ay+Aq)/2;for(BI=0;BI<BJ;++BI){if(A8[BI].x===An){Am=A8[BI].y;break;}else{if(BI<BJ-1&&A8[BI].x<An&&A8[BI+1].x>An){Ax=(A8[BI+1].y-A8[BI].y)/(A8[BI+1].x-A8[BI].x);Am=A8[BI].y+Ax*(An-A8[BI].x);break;}}}BD.x=An;BD.y=Am;}}else{for(BG=0;BG<BC;++BG){BA=BL[BG];if(BA!==null&&BA!==undefined){A5=j.call(this,BI,BG,BA,As,A7,true);if(A5.x!==null&&A5.y!==null){A8.push(A5);break;}else{AC.visPrint("Trendline point calculation abnormal:");AC.visPrint("\tseries #: "+BI+", data point #:"+BG);AC.visPrint("\tvalue = "+BA);AC.visPrint("\tx = "+A5.x+", y = "+A5.y);}}}for(BE=BC-1;BE>BG;--BE){BA=BL[BE];if(BA!==null&&BA!==undefined){A5=j.call(this,BI,BE,BA,As,A7,true);if(A5.x!==null&&A5.y!==null){A8.push(A5);break;}else{AC.visPrint("Trendline point calculation abnormal:");AC.visPrint("\tseries #: "+BI+", data point #:"+BE);AC.visPrint("\tvalue = "+BA);AC.visPrint("\tx = "+A5.x+", y = "+A5.y);}}}BJ=A8.length;if(BJ>=2){An=(A8[0].x+A8[1].x)/2;Am=(A8[0].y+A8[1].y)/2;BD.x=An;BD.y=Am;}}if(BJ>=2){Az.x=A8[0].x;Az.y=A8[0].y;Ar.x=A8[BJ-1].x;Ar.y=A8[BJ-1].y;A9=new AU.PolyLineObject({TripleId:Av,GraphObjectManager:this,PolyLine:A8,Shape:U._LINE,Identity:BB,startPoint:Az,midPoint:BD,endPoint:Ar});if(A9!==null){this.mTrendLineObjects.push(A9);}}}else{for(BG=0;BG<BC;++BG){BA=BL[BG];if(BA!==null&&BA!==undefined){A5=j.call(this,BI,BG,BA,As,A7,false);if(A5.x!==null&&A5.y!==null){A8.push(A5);}else{AC.visPrint("Trendline point calculation abnormal:");AC.visPrint("\tseries #: "+BI+", data point #:"+BG);AC.visPrint("\tvalue = "+BA);AC.visPrint("\tx = "+A5.x+", y = "+A5.y);}}}if(A8.length>=2){BK=new AU.CurveLineObject({TripleId:Av,GraphObjectManager:this,Points:A8,IsVertical:A7,Identity:BB,Shape:U._CURVE});if(BK!==undefined&&BK!==null){this.mTrendLineObjects.push(BK);}}}}},GenerateRefLine:function C(){var Aq=this.mpABLPlotContext,Au=this.mChartContextPtr,A8=Au.mGraphWidth,BF=Au.mGraphHeight,A1=this.mSeriesInfo.length,Ap,A4,BC,A9,Av,BD,A5,BH,BA=[],Ar,BB,A2,Ao,A7,BJ,At,As,BI,BE,An,Aw={},BG,Am,Az=this.mDatasetPtr,Ay,A0=[],Ax,A6=Az.GetSeriesCount()*Az.GetGroupCount();if(Au.mPartialRendering===false){A6=this.mpABLPlot.DPCount;}for(BC=0;BC<A1;++BC){A4=this.mSeriesInfo[BC];Ap=A4.mSeriesId;A2=Az.GetReferenceLinesOfSeries(Ap);Av=A4.mValueAxis;BD=Aq.mValueAxis[Av];Am={};Am.Condense=BD.mCondenseLabels;if(!Am.Condense){if(BD.mNumberFormat.isDefault){var A3=new AU.ChartAdvFormat();Au.getAxisAutoNumberFormat(A3,BD.mPrimaryMetrics);BD.mNumberFormat=A3;}Am.NumberFormat=BD.mNumberFormat.mCustomFormat;}Ax=A2.length;for(A9=0;A9<Ax;++A9){BA=[];BB=A2[A9];if(BB){BJ=BB.getIdentity();A5=BB.getReferenceLineValue();BH=BB.getReferenceLineDirection();Ay=(BH!=="horizontal");Ao=BB.getReferenceLineLabel(false,false,Am);At=BB.getRefLineLabelIdentity();if(A6===0){continue;}Ar=new AU.TripleId({ObjectId:Ag.DssGraphReferenceLine,SeriesId:Ap,GroupId:A9});BG=new AU.TripleId({ObjectId:Ag.DssGraphRefLineText,SeriesId:Ap,GroupId:A9});if(A5!==null&&A5!==undefined){BI=BD.GetPositionByValue(A5);if(BI!==null&&BI!==undefined){BE=1;if(Ay){if(BI===0){BI=1;}else{if(BI===A8){--BI;}}An=BF-1;BA.push(new AU.Point2D({x:BI,y:BE}));BA.push(new AU.Point2D({x:BI,y:An}));Aw.x=BI;Aw.y=(BA[0].y+BA[1].y)/2;}else{if(BI===0){BI=1;}else{if(BI===BF){--BI;}}An=A8-1;BA.push(new AU.Point2D({x:BE,y:BI}));BA.push(new AU.Point2D({x:An,y:BI}));Aw.x=(BA[0].x+BA[1].x)/2;Aw.y=BI;}As=new AU.StraightLineObject({TripleId:Ar,GraphObjectManager:this,StartPoint:BA[0],EndPoint:BA[1],GraphCollectionObject:null,Identity:BJ,Shape:U._LINE,MidPoint:Aw});if(As!==null){if(!As.mFormatLinePtr){As.mFormatLinePtr=new AU.FormatLine();}this.mReferenceLineObjects.push(As);A0.push({tripleId:BG,identity:At,isVertical:Ay,position:BI,labelText:Ao});}}else{AC.visPrint("Reference line point calculation abnormal:");AC.visPrint("\tseries #: "+BC+"ref line #: "+A9);AC.visPrint("\tvalue = "+A5);AC.visPrint("\ty = "+BI);}}}}}t.call(this,BF,A8,A0);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","MarkerObject","SeriesRenderer","Plot","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumGraphMatrixElementSizeMode","EnumGraphMatrixDataLabelPosition","EnumFontRotation","EnumAnchorPoint","EnumImageUsage","EnumGenericDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphProperty","EnumDSSGraphObject");var AG=mstrmojo.chart,AD=AG.ChartConstants,I=AG.enums,h=I.EnumCollectionType,AK=I.EnumLayout,o=I.EnumOrientation,k=I.EnumValueAxis,AM=I.EnumAnchorPoint,B=I.EnumFillType,AY=I.EnumGenericDirection,j=I.EnumImageUsage,t=I.EnumGraphMatrixElementSizeMode,W=I.EnumGraphMatrixDataLabelPosition,D=I.EnumFontRotation,AC=mstrmojo.chart.model,n=AC.enums,AT=n.EnumDSSGraphMarkerShape,N=n.EnumShapeType,AR=n.EnumDSSGraphObject,A=AG.common.Utility;var AO=0,r=1,y=2,R=3;var AA=new AG.Rect2D(),O=new AG.Rect2D();function L(){var Ac=this.mSeriesInfo,Aa=0,Ad=0,Ab,AZ=Ac.length;for(Ab=0;Ab<AZ;++Ab){if(Ac[Ab].mValueAxis===k.VA_Y1){Aa=1;}if(Ac[Ab].mValueAxis===k.VA_Y2){Ad=1;}}return Aa+Ad;}function e(Aa){var AZ=0;switch(this.mBarRenderType){case r:AZ=Aa.seriesInfoID;break;case y:if(L.call(this)>1&&!this.mpABLPlotContext.mABLOptions.mSplitDualAxes){AZ=this.mSeriesInfo[Aa.seriesInfoID].mValueAxis;}break;}return AZ;}function S(Ad){var Aa=this.mChartContextPtr.GetGraphMatrixContext(),Ae=this.mDatasetPtr,Ac=this.mSeriesInfo,Af,Ab,AZ;if(Aa&&this.mHasSizeBy){Af=Ae.GetSizeByData(Ac[Ad.seriesInfoID].mSeriesId,Ad.groupID);Af=Af||0;Ab=Aa.GetScaledSize(Af,this.mBarWidth,N._BAR);Ab=Math.max(Ab,1);if(this.mBarRenderType===y){AZ=Ab;if(AZ%2===0){AZ++;}return AZ;}return Ab;}return this.mBarWidth;}function P(Ai,Al){var Aa,Am,Af,Ag,Ah,Ab,Aj,AZ,Ak,Ac,Ae=this.mpABLPlotContext,Ad=false;if(Ai.useFloat!==undefined){Ad=Ai.useFloat;}Al=Al||this.mBarWidth;Ag=Ae.mCategoryAxisPtr;Ab=Ai.groupID;if(Ae.takeGroupCenter){Ak=this.mDatasetPtr.GetClusterDataGroup();Aj=Ag.getFloatGroupMiddlePos(Ab);if(Ak<=1){Aj=Aj-0.5*Al;}else{Ac=Ai.seriesInfoID%Ak;Aj-=0.5*Ak*Al;Aj+=Ac*Al;}}else{Ah=e.call(this,Ai);Aj=Ag.getGroupStartPos(Ab)+this.mSpaceBetweenGroup/2+(Al+this.mSpaceBetweenRiser)*Ah;}Aa=Math.floor(Aj+0.5);if(this.mChartContextPtr.mIsGraphMatrix){Am=Al;if(this.mHasSizeBy){if(!this.mUseDepth){AZ=S.call(this,Ai);Af=Am-AZ;Aj+=Af*0.5;Aa=Math.round(Aj);Am=Math.round(AZ);}}else{Am=(Ad?(Aj+Al):Math.round(Aj+Al))-Aa;}}else{Am=(Ad?(Aj+Al):Math.round(Aj+Al))-Aa;}if(Am===0&&Al>=0.5){Am=1;}return{Start:Aa,Size:Am};}function H(Aa){var AZ,Ab;if(this.mBarOptions.mColorBySeries){if(Aa<0||Aa>=this.mSeriesInfo.length){return true;}}else{Ab=this.mDatasetPtr.GetGroupCount();if(Aa<0||Aa>=Ab){return true;}}AZ=(this.mAddedLegendMarkerSet[Aa]!==undefined);if(!AZ){this.mAddedLegendMarkerSet[Aa]=true;}return AZ;}function p(Af,Ab){var Ae,Ad,Aa,Ac,AZ,Ag;Ag=Ab.length;for(Ae=0;Ae<(Ag-1);++Ae){Ad=Ab[Ae].GetBoundingRect();Aa=Ab[Ae+1].GetBoundingRect();Ac=this.mpABLPlotContext.mValueAxis[Af].IsReverseOrder()?1:-1;if(Ad.HasIntersection(Aa)){AZ=new AG.Point2D({x:Math.floor(Aa.x+Aa.height/2),y:Ad.y});if(Ac===1){AZ.y+=Ad.height;}AZ.y+=Math.floor(Ac*Aa.height/2);Ab[Ae+1].MoveTo(AZ.x,AZ.y,AM.CENTER);}}}function AN(Ag,AZ,Af){var Ah,Ae,Aa,Ad,Ac,Ab=this.mBarRenderType,Ai;Ah=this.createRiserLabel(Ag.seriesInfoID,Ag.groupID,Af);if(Ah===null){return null;}if(Ab===y||Ab===R){Ah.mOnMarker=true;}Ae=this.mIsVertical?AZ.GetTopMiddle():AZ.GetRightMiddle();Aa=this.mIsVertical?AZ.GetBottomMiddle():AZ.GetLeftMiddle();Ad=false;Ac=this.GetData(Ag.seriesInfoID,Ag.groupID);if(Ac!==null&&Ac!==undefined){Ai=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[Ag.seriesInfoID].mValueAxis];Ad=(Ac<0)^Ai.IsReverseOrder();}if(Ad){Ae.swapPoints(Aa);}this.MoveLabel(Ag.groupID,Ah,Ae,Aa,Ag.seriesInfoID);return Ah;}function T(Ab,Ad){var Ac=this.mSeriesInfo,Aa,AZ=Ac.length;for(Aa=0;Aa<AZ;++Aa){if(Ad===k.VA_BOTH||Ac[Aa].mValueAxis===Ad){Ab.push(Aa);}}}function AH(){var Aa=this.mpABLPlotContext.mABLOptions;var Ab=k.VA_Y1,AZ=k.VA_Y2;if(Aa.mUseDepth&&L.call(this)>1&&Aa.mDualAxes&&!Aa.mSplitDualAxes){if((Aa.mOrientation===o.OR_VERTICAL&&Aa.mDepthDirection>=90&&Aa.mDepthDirection<270)||(Aa.mOrientation===o.OR_HORIZONTAL&&Aa.mDepthDirection>=0&&Aa.mDepthDirection<180)){Ab=k.VA_Y2;AZ=k.VA_Y1;}}return{First:Ab,Second:AZ};}function X(Ac,Ae){if(Ae.length===0){return Ae;}var Aa,AZ=[],Ab,Ad;for(Aa in Ae){if(Ae.hasOwnProperty(Aa)){Ad=Ae[Aa];Ab=this.mDatasetPtr.GetData(Ad,Ac);if(Ab!==null&&Ab<0){AZ.unshift(Ad);}else{AZ.push(Ad);}}}return AZ;}function M(Ag,Aa,Af){var Ae=this.mpABLPlotContext.mABLOptions,Ab=Ae.mDepthDirection,AZ=Ae.mOrientation,Ac=this.mBarRenderType,Ad=false;switch(this.mBarRenderType){case AO:Ad=false;break;case r:if(Ae.mUseDepth&&((AZ===o.OR_VERTICAL&&Ab>=90&&Ab<270)||(AZ===o.OR_HORIZONTAL&&Ab>0&&Ab<180))){Ad=true;}break;case y:case R:if((Ae.mUseDepth)&&((AZ===o.OR_VERTICAL&&Ab>=180&&Ab<360)||(AZ===o.OR_HORIZONTAL&&Ab>=90&&Ab<270))){Ad=true;}break;}Aa.splice(0,Aa.length);T.call(this,Aa,Af);if(Aa.length===0){return ;}if(Ac===y||(Ac===R&&Af!==k.VA_BOTH)){Aa=X.call(this,Ag,Aa);var Ah=this.mpABLPlotContext.mValueAxis[Af];if(Ah.IsReverseOrder()){Ad=!Ad;}}if(Ad&&Aa.length>0){Aa.reverse();}}function U(){var Ac=this.mpABLPlotContext,Ab=this.mBarOptions;if(this.mBarColumns===-1){this.mBarColumns=1;switch(this.mBarRenderType){case r:this.mBarColumns=this.mSeriesInfo.length;break;case y:if(L.call(this)>1&&!Ac.mABLOptions.mSplitDualAxes){this.mBarColumns=2;}break;}var AZ=this.mGroupSize,Aa=this.evalBarStyleUnitWidth(AZ,this.mBarColumns,Ab.mGapWidth);this.mBarWidth=Aa.unitWidth;this.mSpaceBetweenRiser=Aa.riserGap;this.mSpaceBetweenGroup=Aa.groupGap;}}function l(){switch(this.mpABLPlotContext.mABLOptions.mLayout){case AK.LO_ABSOLUTE:if(this.mChartContextPtr.GetGraphMatrixContext().isCombinationChart()){return r;}return AO;case AK.LO_CLUSTER:return r;case AK.LO_STACKED:return y;case AK.LO_PERCENT:return R;default:return r;}}function AP(Ac,Aa){var AZ,Ab;AZ=this.mDatasetPtr.GetColorByData(Ac.mSeriesId,Ac.mGroupId);if(AZ){Ab=new AG.FormatFill();Ab.mFillType=B.FT_SIMPLE;Ab.mAlpha=255*0.7;Ab.mSimpleColor=AZ;Aa.SetFormatFill(Ab);}}function J(){if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function E(){}function AL(Ae,AZ,Al){var Ac,Ah,Ad,Am,Aa=this.mpABLPlot,Ab=this.mpABLPlotContext,Aj=this.mSeriesInfo[Ae.seriesInfoID].mValueAxis,Ak=Ab.mValueAxis[Aj],Ag=Ak.mOptions.mDrawFromZero,Ai=Ak.GetAxisOriginValue();Ak.mOptions.mDrawFromZero=(Ai===null||Ai===0);Ac=this.hPrepareData(Ae);if(A.isValidNumber(Ac)===false){return ;}Ah=this.hPrepareRect(Ae,Ac);Am=Ah.Rect;Ad=Ah.AboveBase;if(!this.hUpdateBarRect(Ae,Am,Ad,Ac)){Ak.mOptions.mDrawFromZero=Ag;return ;}if(Am.width<=0||Am.height<=0){Ak.mOptions.mDrawFromZero=Ag;return ;}if(!Al){var Af=this.hPrepareRectangleObject(Ae,Am,Ad);if(Af){this.hPostProcessOneBar(Ae,Af);++Aa.DPCount;if(Aa.seriesDPCount[Ae.seriesInfoID]===undefined||Aa.seriesDPCount[Ae.seriesInfoID]===null){Aa.seriesDPCount[Ae.seriesInfoID]=1;}else{++(Aa.seriesDPCount[Ae.seriesInfoID]);}}}Ak.mOptions.mDrawFromZero=Ag;}function AI(Ad,Aa,Af){var Ab,Ae,AZ,Ac=[];if((Af===k.VA_BOTH&&this.mBarRenderType===y)||this.mBarRenderType===R){Ab=AH.call(this);Ae=Ab.First;AZ=Ab.Second;M.call(this,Ad,Aa,Ae);M.call(this,Ad,Ac,AZ);if(Ac.length>0){Aa=Aa.concat(Ac);}}else{M.call(this,Ad,Aa,Af);}return Aa;}function g(Ai,Ak){var Aj=this.mChartContextPtr,Ah=1500,AZ=-1,Aa=-1;if(this.mBarRenderType===r&&!this.mDatasetPtr.ShouldTakeGroupCenter()){if(Ak>=Ah&&Aj.mPartialRendering){var Ac,Af,Al=this.mBarWidth,Ae=Aj.mRenderingWindow,Ag=Aj.IsVertical(),Ab=this.mpABLPlotContext,Ad=Ab.mCategoryAxisPtr;if(Ag){Ac=Ae.x;Af=Ac+Ae.width;}else{Ac=Ae.y;Af=Ac+Ae.height;}AZ=Ac-Ad.getGroupStartPos(Ai)-this.mSpaceBetweenGroup/2;AZ=Math.round(AZ/(Al+this.mSpaceBetweenRiser))-1;AZ=Math.max(AZ,0);Aa=Af-Ad.getGroupStartPos(Ai)-this.mSpaceBetweenGroup/2;Aa=Math.round(Aa/(Al+this.mSpaceBetweenRiser))+1;Aa=Math.min(Aa,Ak-1);return[AZ,Aa];}}return[];}function Y(Ag){var Aa=this.mpABLPlotContext,Am=this.IsReverseGroupOrder(),Al,Ai,Ah=[],AZ=[],Ab,Ac,Ae=[],Aj=[],Af,Ad,Ak;Al=this.mDatasetPtr.GetGroupCount();for(Ak=0;Ak<Al;++Ak){Ai=Ak;if(Am){Ai=Al-1-Ai;}Ah=AI.call(this,Ai,Ah,Ag);Ab=Ah.length;Ad=g.call(this,Ai,Ab);for(Ac=0;Ac<Ab;++Ac){if(Ad.length===2&&(Ac<Ad[0]||Ac>Ad[1])){continue;}Af={groupID:Ai,seriesInfoID:Ah[Ac]};AL.call(this,Af,AZ);}if(this.mBarRenderType===r){Ab=AZ.length;for(Ac=0;Ac<Ab;++Ac){if(Aa.mSeriesOptions[AZ[Ac].first].mValueAxis===k.VA_Y1){Ae.push(AZ[Ac].second);}else{Aj.push(AZ[Ac].second);}}if(Ae.length!==0){p.call(this,k.VA_Y1,Ae);}if(Aj.length!==0){p.call(this,k.VA_Y2,Aj);}}AZ.splice(0,AZ.length);}}function AV(Aa){var Ad=this.mChartContextPtr;if(Ad.mIsGraphMatrix&&this.mHasColorBy){return null;}if(this.mGroupCount<2){return null;}var AZ,Ab=this.mDatasetPtr;AZ=new AG.TripleId({ObjectId:AR.DssGraphRiser});if(this.mBarOptions.mColorBySeries){AZ.mSeriesId=this.mSeriesInfo[Aa.seriesInfoID].mSeriesId;}else{AZ.mSeriesId=Aa.groupID;}var Ac=this.GetGraphObject(AZ);if(Ac===undefined){if(Ad.mIsGraphMatrix){if(Ab.findCell(true,AZ.mSeriesId,1)!==-1){Ac=null;return Ac;}}if(Ac===undefined){Ac=new AG.GraphCollectionObject({TripleId:AZ,GraphObjectManager:this,CollectionType:(this.mIsVertical?h.CT_VERTICAL_BAR:h.CT_HORIZONTAL_BAR)});}this.AddToMap(Ac);}return this.GetGraphObject(AZ);}function V(Aa){if(this.mChartContextPtr.mIsGraphMatrix){var AZ=this.mpABLPlotContext.mValueAxis[Aa];if(AZ){return AZ.mOptions.mUseCustomMinMax;}return false;}return false;}function b(AZ,Aa){if(AZ.x<Aa||AZ.x+AZ.width+Aa>this.mChartContextPtr.mGraphWidth){return false;}return(!(AZ.y<Aa||AZ.y+AZ.height+Aa>this.mChartContextPtr.mGraphHeight));}function f(AZ,Aa,Ab){if(AZ.x+AZ.width+Ab<=Aa.x||AZ.x>=Aa.x+Aa.width+Ab){return true;}return(AZ.y+AZ.height+Ab<=Aa.y||AZ.y>=Aa.y+Aa.height+Ab);}function AX(Ag,Ak,Ai,Af){var Ah,Ad=0,Ac=0,Ab,Aj,Aa=this.mChartContextPtr,Ae=Aa.GetGraphMatrixContext(),AZ=5;if(Aa.mIsGraphMatrix){AZ=Ae.getPadding(AD.kDataLabel);}if(Af){Ak.GetFormatFont().mFontRotation=D.FR_90;}else{Ak.GetFormatFont().mFontRotation=D.FR_NORMAL;}Ah=Ak.GetBoundingRect();switch(Ai){case W._BOTTOM:Ad=0;Ac=(Ag.height+Ah.height)/2+AZ;break;case W._TOP:Ad=0;Ac=-1*((Ag.height+Ah.height)/2+AZ);break;case W._LEFT:Ad=-1*((Ag.width+Ah.width)/2+AZ);Ac=0;break;case W._RIGHT:Ad=(Ag.width+Ah.width)/2+AZ;Ac=0;break;case W._CENTER:Ad=0;Ac=0;break;}Ab=Ag.GetCenter().x+Ag.width%2+Ad;Aj=Ag.GetCenter().y+Ag.height%2+Ac;Ak.MoveTo(Ab,Aj,AM.CENTER);}function Q(Ak,Ai,Ah,Ag,Ad,Af){var Ab=this.mChartContextPtr,Ae=Ab.GetGraphMatrixContext(),Aa,Aj=this.mpABLPlotContext.mABLOptions,Ac=Aj.mLayout,AZ=Aj.mOrientation;if(Ad===null||Ad===undefined){Ad=false;}if(Af===null||Af===undefined){Af=false;}if(Ad){Aa=Af;}else{Aa=Ae.mIsNeedRotateDataLabel;}if(AZ===o.OR_VERTICAL){if(Ac===AK.LO_ABSOLUTE||Ac===AK.LO_CLUSTER){if(Ah-Ag<0){AX.call(this,Ak,Ai,W._BOTTOM,Aa);}else{AX.call(this,Ak,Ai,W._TOP,Aa);}}else{if(this.mSeriesInfo.length===1){if(Ah-Ag<0){AX.call(this,Ak,Ai,W._BOTTOM,Aa);}else{AX.call(this,Ak,Ai,W._TOP,Aa);}}else{AX.call(this,Ak,Ai,W._CENTER,Aa);}}}else{if(Ac===AK.LO_ABSOLUTE||Ac===AK.LO_CLUSTER){if(Ah-Ag<0){AX.call(this,Ak,Ai,W._LEFT,Aa);}else{AX.call(this,Ak,Ai,W._RIGHT,Aa);}}else{if(this.mSeriesInfo.length===1){if(Ah-Ag<0){AX.call(this,Ak,Ai,W._LEFT,Aa);}else{AX.call(this,Ak,Ai,W._RIGHT,Aa);}}else{AX.call(this,Ak,Ai,W._CENTER,Aa);}}}}function q(An,Ag,Ah,Ai,AZ,Aj){var Ab=this.mChartContextPtr,Ae=this.mDatasetPtr,Am=Ab.mIsGraphMatrix,Ad={},Af=new AG.TripleId({ObjectId:AR.DssGraphDataText}),Al=-3,Ak,Ac;if(Am){var Aa=Ae.showSeriesDatalabel(An.mSeriesId);if(Aa){Ad.SeriesId=An.mSeriesId;Ad.GroupId=Ag.groupID;Ad.SeriesInfo=Ag.seriesInfoID;Ad.HostMarkerBound=Ai;Ak=this.mSGMapLabel[Al];if(Ak===null||Ak===undefined){this.mSGMapLabel[Al]=new AG.GraphCollectionObject({TripleId:Af,GraphObjectManager:this,CollectionType:h.CT_TEXT});}var Ao=false;if(Ao&&this.mBarRenderType===r){Ac=this.CreateOneDataLabel(Ag.groupID,this.mSeriesInfo[Ag.seriesInfoID].mSeriesId,AZ,this.mSGMapLabel[Al]);}else{Ac=this.CreateOneDataLabel(this.mSeriesInfo[Ag.seriesInfoID].mSeriesId,Ag.groupID,AZ,this.mSGMapLabel[Al]);}if(Ac!==null&&Ac!==undefined){Ad.Label=Ac;Ac.mIsShown=false;Q.call(this,Ai,Ac,AZ,Aj);this.mDataLabels.push(Ad);this.AddToMapAndList(Ac);}}}}function AQ(Aj,Aa,Ae,Ac,Am){var Ap,Ak,Ah,Ag,An,Ab,Ad,Al,Ai,Ao,AZ,Aq,Af;Ap=this.hPrepareData(Aj);if(Ap===null||Ap===undefined){return ;}Ak=this.hPrepareRect(Aj,Ap);An=new AG.Rect2D({Rect2D:Ak.Rect});Ah=Ak.AboveBase;Ag=Ak.AxisOriginValue;if(An.width<0||An.height<0){return ;}Ab=new AG.Rect2D();Ab.x=An.x;Ab.y=An.y;Ab.width=An.width;Ab.height=An.height;if(!this.hUpdateBarRect(Aj,An,Ah,Ap)){return ;}Aa.push(An);if(Am){Ad=false;Al=new AG.TripleId({ObjectId:AR.DssGraphDataText});Ai=new AG.GraphCollectionObject({TripleId:Al,GraphObjectManager:this,CollectionType:h.CT_TEXT});if(Ad&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===r){Ao=this.CreateOneDataLabel(Aj.groupID,this.mSeriesInfo[Aj.seriesInfoID].mSeriesId,Ap,Ai);}else{Ao=this.CreateOneDataLabel(this.mSeriesInfo[Aj.seriesInfoID].mSeriesId,Aj.groupID,Ap,Ai);}if(Ao!==null&&Ao!==undefined){Q.call(this,An,Ao,Ap,Ag,true,Ac);AZ=Ao.GetBoundingRect();Ae.push(AZ);}}else{Al=new AG.TripleId({ObjectId:AR.DssGraphDataText});Aq=this.mSeriesInfo[Aj.seriesInfoID].mSeriesId;Al.mSeriesId=Aq;Af=this.mSGMapLabel[Aq];if(Af===null||Af===undefined){this.mSGMapLabel[Aq]=new AG.GraphCollectionObject({TripleId:Al,GraphObjectManager:this,CollectionType:h.CT_TEXT});}q.call(this,Al,Aj,An,Ab,Ap,Ag);}}function AE(Am,Aj,Ak,AZ){var Af=this.IsReverseGroupOrder(),Ao,Ag=this.mpABLPlotContext.mCategoryAxisPtr,Ac=false,An,Al,Aa=[],Ab,Ae,Ai,Ah,Ad;Am.splice(0,Am.length);Aj.splice(0,Aj.length);if(this.mChartContextPtr.mIsGraphMatrix){Ao=Ag.mGroupCount;}else{Ao=this.mDatasetPtr.GetGroupCount();}for(An=0;An<Ao;++An){Al=An;if(Af){Al=Ao-1-Al;}if(Ac&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===r){Ab=this.mDatasetPtr.GetGroupCount();for(Ae=0;Ae<Ab;++Ae){Aa.push(Ae);}}else{Aa=AI.call(this,Al,Aa,k.VA_BOTH);}Ad=Aa.length;for(Ai=0;Ai<Ad;++Ai){Ah={};Ah.groupID=Al;Ah.seriesInfoID=Aa[Ai];AQ.call(this,Ah,Am,Aj,Ak,AZ);}}}function x(Ak){var Al=[],Aj=[],Am=[],Ah=0,Af,Ae,Ad,Aa,Ag,Ab,Ac=this.mChartContextPtr,Ai=Ac.GetGraphMatrixContext(),AZ=5;if(Ac.mIsGraphMatrix){AZ=Ai.getPadding(AD.kDataLabel);}AE.call(this,Al,Aj,Ak,true);for(Af=0;Af<Aj.length;++Af){Aa=b.call(this,Aj[Af],AZ);if(!Aa){continue;}Ag=true;for(Ae=0;Ae<Al.length;++Ae){if(Af===Ae){continue;}Ab=f.call(this,Aj[Af],Al[Ae],AZ);if(!Ab){Ag=false;break;}}if(!Ag){continue;}for(Ad=0;Ad<Am.length;++Ad){Ab=f.call(this,Aj[Af],Am[Ad],AZ);if(!Ab){Ag=false;break;}}if(Ag){++Ah;Am.push(Aj[Af]);}}return Ah;}function u(){var AZ,Aa;if(this.mSeriesInfo.length===0){return false;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();U.call(this);AZ=x.call(this,false);Aa=x.call(this,true);return(Aa>AZ);}function AW(AZ){var Ac=this.mChartContextPtr,Ab=Ac.mIsGraphMatrix,Aa;if(Ab&&Ac.mIsUniformAxisMode){Aa=Ac.getUniformAxisContext();if(AZ.x<Aa.mDataAreaLeftMargin||AZ.x+AZ.width>Ac.mGraphWidth-Aa.mDataAreaRightMargin){return false;}if(AZ.y<Aa.mDataAreaTopMargin||AZ.y+AZ.height>Ac.mGraphHeight-Aa.mDataAreaBottomMargin){return false;}}return true;}function AJ(Ah){var An,Am,Al,Ak,Ac=this.mChartContextPtr,Ao=Ac.GetGraphMatrixContext(),Ar,AZ,Aa=this.mDataLabels,Ap,Ag=Ac.allowOverlapBetweenDatalabels(),Ab,Ai,Ad,Af,Aj=new AG.Rect2D({x:0,y:0,width:Ac.mGraphWidth,height:Ac.mGraphHeight}),Aq=this.mpABLPlot.dataLabelManager,Ae=5;if(Ac.mIsGraphMatrix){Ae=Ao.getPadding(AD.kDataLabel);}if(Aq===null||Aq===undefined){Aq=this.mpABLPlot.dataLabelManager=new AG.DataLabelManager({DataArea:Aj});Aq.ChartContext=Ac;}Ap=Aa.length;for(An=0;An<Ap;++An){for(Ak=0;Ak<4;++Ak){if(Ao.mMarkerShape===AT.DssGraphMarkerShapeGMTick){AZ=Ak;AX.call(this,Aa[An].HostMarkerBound,Aa[An].Label,AZ,false);}else{if(Ak>0){break;}}Ar=Aa[An].Label.GetBoundingRect();Ai=Ag||b.call(this,Ar,Ae);if(!Ai){continue;}Ad=true;for(Am=0;Am<Ap;++Am){if(Am===An){continue;}Af=Ag||f.call(this,Ar,Aa[Am].HostMarkerBound,Ae);if(!Af){Ad=false;break;}}if(!Ad){continue;}Ab=Ah.length;for(Al=0;Al<Ab;++Al){Af=Ag||f.call(this,Ar,Ah[Al].GetBoundingRect(),Ae);if(!Af){Ad=false;break;}}if(V.call(this,this.mSeriesInfo[Aa[An].SeriesInfo].mValueAxis)){if(!AW.call(this,Ar)){Ad=false;}}if(Ad){if(!Ag){Aq.UpdateMatrixDataLabel(Ar);}Ah.push(Aa[An].Label);Aa[An].IsDisplayed=true;Aa[An].Label.mIsShown=true;if(Ao.mMarkerShape===AT.DssGraphMarkerShapeGMTick){break;}}}}}mstrmojo.chart.BarSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.BarSeriesRenderer",mSGMapLabel:[],mpSeriesLineInfo:null,mBarRenderType:AO,mBarWidth:0,mGroupSize:0,mSpaceBetweenRiser:0,mSpaceBetweenGroup:0,mBarColumns:-1,mBarOptions:null,mAddedLegendMarkerSet:null,mDataLabels:null,init:function s(AZ){this._super(AZ);this.mSGMapLabel=[];this.mAddedLegendMarkerSet=[];this.mDataLabels=[];this.mBarOptions={mOverlap:0,mGapWidth:40,mRiserShape:0,mShowErrorBar:false,mHasMiddleValue:false,mMiddleValueSize:50,mShowSeriesLines:false,mColorBySeries:true};this.LoadProperties();},SetDeviceDataArea:function F(AZ){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AG.Rect2D({Rect2D:AZ});}else{this.mDeviceDataArea.ResetRect(AZ);}}this.mBarRenderType=l.call(this);},AddTextToMapAndList:function AB(AZ,Aa){var Ac,Ab,Ae,Ad,Af,Ag;Ae=this.mSGMapLabel.length;for(Ab=0;Ab<Ae;++Ab){Af=this.mSGMapLabel[Ab];if(Af!==null&&Af!==undefined){Ad=Af.GetCollectionSize();for(Ac=0;Ac<Ad;++Ac){Aa.push(Af.GetObjectByIndex(Ac));}Ag=Af.mTripleId;AZ.push(Ag,Af);}}this.mSGMapLabel.splice(0,this.mSGMapLabel.length);this._super(AZ,Aa);},CreateTrendLine:function Z(Ab,Aa,AZ){this._super(Ab,Aa,AZ);},GenerateMapAndList:function a(AZ){var Aa=this.mChartContextPtr;if(Aa.mImageUsage!=j.OBJECT_CLIP_COMPUTATION){return this.GenerateByValueAxis(k.VA_BOTH,AZ);}},GenerateByValueAxis:function G(Ad,Ab){var Ac=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();U.call(this);Y.call(this,Ad);if(Ac.mIsGraphMatrix){if(Ac.mImageUsage===j.GENERAL){if(this.mDatasetPtr.showDatalabels()){var Aa=[],AZ=[];AE.call(this,Aa,AZ,false,false);AJ.call(this,Ab);}this.GenerateTrendLine();this.GenerateRefLine();}}this.populateRenderSequence();},LoadProperties:function z(){var Ad=this.mChartContextPtr,Ab=this.mBarOptions,Ac,AZ=Ad.GetGraphMatrixContext(),Aa=AZ.mElementsInfo;if(Ad.mIsGraphMatrix){Ab.mColorBySeries=!this.mChartContextPtr.isLegendByGroup();Ab.mGapWidth=10;if(Aa.Max.Mode===t._MANUAL){Ac=Aa.Max.Size*100;if(Ac<1){Ac=1;}if(Ac>100){Ac=99;}Ab.mGapWidth=100-Ac;}}if(Ad.mImageUsage!==0){return ;}},ShouldRotateDataLabel:function w(){var Aa=this.mChartContextPtr.GetGraphMatrixContext(),Ab=this.mpABLPlotContext.mABLOptions,AZ=Ab.mOrientation,Ac=Ab.mLayout;if(Aa.mMarkerShape===AT.DssGraphMarkerShapeGMTick){return false;}if(AZ===o.OR_HORIZONTAL){return false;}if(Aa.isCombinationChart()&&(Ac===AK.LO_ABSOLUTE)){Ac=AK.LO_CLUSTER;}if(Ac===AK.LO_ABSOLUTE||this.mSeriesInfo.length===1){return u.call(this);}if(Ac===AK.LO_CLUSTER){return true;}return false;},GetSeriesOrderByType:function d(Aa,AZ,Ab){return AI.call(this,Aa,AZ,Ab);},GetRiserStartPosAndSize:function c(Aa,AZ){return P.call(this,Aa,AZ);},hUpdateBarRect:function AS(Ai,Aj,Ag,Aa){var Ac=this.mChartContextPtr,Ah,Am,Ae,AZ,Al=this.mpABLPlotContext,An=Al.mABLOptions,Ad=this.mDatasetPtr,Ak=this.mSeriesInfo,Ab=An.mOrientation,Af=An.mLayout;if(!Ac.mIsGraphMatrix){return true;}if(Aa!==0&&(this.mBarRenderType===y||this.mBarRenderType===R)){Aa=Ad.GetData(Ak[Ai.seriesInfoID].mSeriesId,Ai.groupID,0);}if(Aa!==0){if(Ab===o.OR_VERTICAL&&Aj.height===0){Aj.height=1;}if(Ab===o.OR_HORIZONTAL&&Aj.width===0){Aj.width=1;}}if(Aj.width*Aj.height===0){return false;}Ah=this.mSeriesInfo[Ai.seriesInfoID].mValueAxis;Am=Al.mValueAxis[Ah];if(Am===null){return false;}AA.ResetRect(Aj);Ae=Am.GetBasePosition(true);AZ=Am.GetBaseValue(true);if(Ae===null||AZ===null){return false;}if(Ab===o.OR_VERTICAL){if(Am.isBaseLineQualified()){if(AA.y===Ae){if(Ag){--(AA.y);--(AA.y);}else{}if(AA.height>1&&Af===AK.LO_STACKED){++(AA.y);--(AA.height);}}else{if(AA.y+AA.height===Ae){if(AA.height>1){AA.height--;}else{AA.y--;}}}}else{if(AA.y===Ae){if(Aa>=AZ){--(AA.y);--(AA.y);}else{if(AA.height>1){AA.y++;AA.height--;}}}if(AA.y+AA.height===Ae&&AA.height===1){if(Aa>=AZ){--(AA.y);++(AA.height);}}}}if(Ab===o.OR_HORIZONTAL){if(Am.isBaseLineQualified()){if(AA.x===Ae){if(Ag){++(AA.x);}else{--(AA.x);--(AA.x);}if(AA.width>1&&Af===AK.LO_STACKED){--(AA.width);}}else{if(AA.x+AA.width===Ae){if(AA.width>1){}else{AA.x--;}}}}else{if(AA.x===Ae){if(Ag&&Aa>AZ){if(AA.x>Ae){AA.width+=AA.x;AA.x=Ae;}}}if(AA.x+AA.width===Ae){--(AA.x);++(AA.width);}}}Aj.copy(AA);return true;},hPrepareData:function K(Aa){var Ab,Ad=this.mChartContextPtr,AZ;Ab=this.GetData(Aa.seriesInfoID,Aa.groupID);if(Ab===null){if(Ad.mIsGraphMatrix===false){AZ=AV.call(this,Aa);if(AZ){if(this.mBarOptions.mColorBySeries&&!H.call(this,Aa.seriesInfoID)){this.AddLegendMarkerToCollection(Aa.seriesInfoID,AZ);}}}}else{var Ac={mSeriesId:this.mSeriesInfo[Aa.seriesInfoID].mSeriesId,mGroupId:Aa.groupID};if(Ad.checkColorByAndSizeByValue(Ac,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){Ab=null;}}return Ab;},hPrepareRect:function C(Aj,As,Ai){var Ab=this.mpABLPlotContext,Ah=Ab.mABLOptions,Ad=this.mSeriesInfo[Aj.seriesInfoID].mValueAxis,An=Ab.mValueAxis[Ad];var Ag=An.GetAxisOriginValue(),Aq=An.GetBaseValue(true),Ac=As>Aq,Ap=P.call(this,Aj,Ai),Aa=Ap.Start,Ak=Ap.Size,AZ=An.GetBasePosition(true),Ao=An.GetPositionByValue(As);O.Reset(0,0,0,0);if(Ao===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ac};}if(this.mBarRenderType===y||this.mBarRenderType===R){var Af,At=false,Al,Am,Ae;if(Ag===null||Ag===0||this.mBarRenderType===R){At=true;}else{Al=this.updateGroupStackInfoWithBase(Ad,Aj.groupID,Ag);Am=this.getSeriesOffsetIntoStackedInfo(Ad,Aj.groupID,Aj.seriesInfoID);var Ar=Al[Am];if(Ar.Max===null||Ar.Min===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ac};}AZ=An.ValueToPosition(Ar.Min);Ao=An.ValueToPosition(Ar.Max);}if(At){if(this.mBarRenderType===y&&An.mOptions.mUseLogarithmicScale&&Aj.seriesInfoID===0){Af=Aq;}else{Af=this.GetData(Aj.seriesInfoID,Aj.groupID,true);}Ae=this.GetData(Aj.seriesInfoID,Aj.groupID);AZ=An.GetPositionByValue(Af);Ao=An.GetPositionByValue(Ae);}if(AZ===null||Ao===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ac};}Ac=(Ae>=Aq);}switch(Ah.mOrientation){case o.OR_VERTICAL:O.x=Aa;O.y=Math.min(AZ,Ao);O.width=Ak;O.height=Math.abs(AZ-Ao);break;case o.OR_HORIZONTAL:O.x=Math.min(AZ,Ao);O.y=Aa;O.width=Math.abs(AZ-Ao);O.height=Ak;break;}return{Rect:O,AboveBase:Ac,AxisOriginValue:(Ag||0)};},hPostProcessOneBar:function AU(Ac,Ae){var AZ=AV.call(this,Ac);if(Ae!==null){var Aa=this.mBarOptions;if(AZ){AZ.AddGraphObject(Ae);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mHasColorBy&&!this.mChartContextPtr.mDebugUseNewProperties){var Ad=Ae.mTripleId;AP.call(this,Ad,Ae);}}this.mGraphObjectList.push(Ae);this.AddToMap(Ae);if(Aa.mColorBySeries&&!H.call(this,Ac.seriesInfoID)){this.AddLegendMarkerToCollection(Ac.seriesInfoID,AZ);}else{if(!this.mBarOptions.mColorBySeries&&this.mChartContextPtr.mIsGraphMatrix){if(this.mAddedLegendMarkerSet[Ac.groupID]===null&&this.mLegendPtr!==null){var Ab;if(AZ){Ab=AZ.GetFormatFill();}else{Ab=Ae.GetFormatFill();}this.mLegendPtr.UpdateFormatForLegendMarker(Ac.groupID,Ab,null);this.mAddedLegendMarkerSet[Ac.groupID]=true;}}}}},hPrepareRectangleObject:function AF(Af,Ah,AZ){if(Ah.width<0||Ah.height<0){return null;}var Aa=this.mChartContextPtr,Ad=this.mpABLPlot.mABLPlotContext,Ae=Ad.mABLOptions,Ag=AV.call(this,Af),Ab=new AG.TripleId({ObjectId:AR.DssGraphRiser,SeriesId:this.mSeriesInfo[Af.seriesInfoID].mSeriesId,GroupId:Af.groupID}),Ac;if(Ae.mUseDepth){console.alert("Missing method for depth rectangle object");}else{Ac=new AG.RectangleObject({TripleId:Ab,GraphObjectManager:this,Area:Ah,GraphCollectionObject:Ag,Shape:N._BAR,hasFill:true});if(Aa.mIsGraphMatrix){if(AZ){Ac.mBorderOpenType=this.mIsVertical?AY.BOTTOM:AY.LEFT;}else{Ac.mBorderOpenType=this.mIsVertical?AY.TOP:AY.RIGHT;}}}if(Aa.mUseAnimation){Ac.SetAnimationEnable(true);Ac.SetProgress(1);}return Ac;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Point2D","Vector2D","Polygon2D","SeriesRenderer","CategoryPlot","MarkerObject","NumberObject","Plot","ChartConstants","GraphObjectAggregation","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumValueAxis","EnumShowFace","EnumAttachedPointsStyle","EnumPictureFormatType","EnumImageUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape");var j=mstrmojo.chart,d=j.ChartConstants,O=mstrmojo.chart.enums,S=O.EnumAttachedPointsStyle,C=O.EnumCollectionType,q=O.EnumMajorGraphType,T=O.EnumLayout,D=O.EnumValueAxis,AB=O.EnumDSSExtraGraphObject,J=O.EnumImageUsage,AA=O.EnumPictureFormatType,b=mstrmojo.chart.model,V=b.enums,AD=V.EnumDSSGraphObject,AE=V.EnumDSSGraphMarkerShape,AF=V.EnumShapeType,R=V.EnumDSSGraphFillEffect,z=j.gNullGroupId;var K=new j.Rect2D(),x=new j.TripleId();var A=new j.Point2D();A.Reset(-1,-1);A.isNull=true;function w(){var AO,AN,AM,AP,AQ,AL=this.mAreaCollection;AL.splice(0,AL.length);AO=this.mIsVertical?C.CT_VERTICAL_AREA:C.CT_HORIZONTAL_AREA;AN=this.mSeriesInfo.length;for(AM=0;AM<AN;++AM){AP=new j.TripleId({ObjectId:AD.DssGraphRiser,SeriesId:this.mSeriesInfo[AM].mSeriesId});AQ=new j.GraphCollectionObject({TripleId:AP,GraphObjectManager:this,CollectionType:AO});AL.push(AQ);this.AddToMap(AL[AM]);this.AddLegendMarkerToCollection(AM,AL[AM]);}}function F(AM){var AR,AN,AQ,AP,AO,AL,AS;AR=this.mSeriesInfo[AM].mSeriesId;AQ=new j.TripleId({ObjectId:AD.DssGraphDataText,SeriesId:AR,GroupId:z});AN=new j.GraphCollectionObject({TripleId:AQ,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AN);AP=this.mFinalSeriesPolygons[AM];AS=this.mGroupCount;for(AO=0;AO<AS;++AO){if(AP[AO].x!==-1){AL=this.createRiserLabel(AM,AO,AN);this.MoveLabel(AO,AL,AP[AO],AP[2*this.mGroupCount-1-AO],AM);}}}function B(AQ,AO){var AN,AP,AL,AM;for(AN=0;AN<this.mGroupCount;++AN){AP=this.CreateTotalLabel(AQ,AN,AO);if(AP!==null){AL=this.GetUpmostIndexByValueAxisAndGroup(AQ,AN);AM=this.mFinalSeriesPolygons[AL];this.MoveLabel(AN,AP,AM[AN],AM[2*this.mGroupCount-1-AN],AL);}}}function e(){var AN,AM,AR,AP,AL,AQ=this.mpABLPlotContext,AO=AQ.mABLOptions;AN=this.mSeriesInfo.length;for(AM=0;AM<AN;++AM){if(AQ.mSeriesOptions[this.mSeriesInfo[AM].mSeriesIndex].mShowDataLabels){F.call(this,AM);}}if(AO.mMajorGraphType===q.MGT_AREA&&AO.mLayout===T.LO_STACKED&&!AO.mShowCumulate&&AO.mShowValue&&AO.mShowTotal){AP=this.mpManager.mTripleId;AR=new j.TripleId({ObjectId:AD.DssGraphDataTextStackTotal,SeriesId:AP.mSeriesId,GroupId:z});AL=new j.GraphCollectionObject({TripleId:AR,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AL);B.call(this,D.VA_Y1,AL);if(AO.mDualAxes){B.call(this,D.VA_Y2,AL);}}}function r(){}function n(AL){var AM=AL,AO=this.mpABLPlotContext.mABLOptions.mLayout,AN=this.mChartContextPtr.mIsGraphMatrix;if(AN&&(AO===T.LO_STACKED||AO===T.LO_PERCENT)){if(AL>=0&&AL<this.mSeriesDrawingOrder.length){AM=this.mSeriesDrawingOrder[AL];}}return AM;}function G(AM){var AN=0,AL=0;this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);while(AN<this.mGroupCount){if(AM[AN].x===-1){++AN;continue;}this.mGroupIdMapPerSeries[AL]=AN;++AN;AL++;}}function k(AO){this.mGroupRangeList.splice(0,this.mGroupRangeList.length);if(AO.length===0){return ;}var AN=0,AR,AQ,AM,AP,AL;AL=AO.length;for(AP=0;AP<AL;++AP){AR=AN+AO[AP].length/2;AQ=this.getCorrectGroupIdInSeriesPoints(AN,AN);AM=this.getCorrectGroupIdInSeriesPoints(AR-1,AR-1);this.mGroupRangeList.push({Start:AQ,End:AM});AN=AR;}}function L(AT,AR){var AX=[],AU=[],AY,AW,AO,AN,AV,AM=this.mChartContextPtr,AQ=AM.mIsGraphMatrix,AS=AM.mIsTimeSeriesChart;AY=0;AW=AT.length;AV=(AS||AQ)?0:1;for(AO=0;AO*2<=AW;++AO){if(AT[AO].x!==-1){continue;}if(AO-AY>AV){var AL=2*(AO-AY);for(AN=AY;AN<AO;++AN){AX[AN-AY]=AT[AN];AX[AL-1-(AN-AY)]=AT[AW-1-AN];}AU.push(AX);AR.push(AX);AX=[];}AY=AO+1;}if(AY<AW/2){var AZ=AW/2-AY;if(AZ>AV){if(AY===0){AU.push(AT);AR.push(AT);}else{if(AY<AW/2){var AP=AZ*2,Aa=AT.slice(AY,AY+AP);AU.push(Aa);AR.push(Aa);}}}}G.call(this,AT);k.call(this,AU);return AU;}function W(AL,AM){if(AL<0||AL>=this.mGroupRangeList.length){return AM;}return this.mGroupRangeList[AL].Start;}function AG(AP,AM,AS){var AO=new j.TripleId({TripleId:AP}),AN=null,AR=this.mChartContextPtr;if(AM.length===2){AO.mObjectId=AD.DssGraphDataMarker;var AQ=4,AL=AE.DssGraphMarkerShapeCircle;AN=new j.MarkerObject({TripleId:AO,MarkerPosition:AM[0],MarkerShape:AL,IsIsometric:true,MarkerSize:AQ,GraphObjectManager:this,GraphCollectionObject:AS});return AN;}if(AR.mImageUsage===J.OBJECT_CLIP_COMPUTATION){return AN;}AN=new j.PolygonObject({TripleId:AO,GraphObjectManager:this,Polygon:AM,ParentObject:AS,Shape:AF._POLYGON});if(AR.mIsGraphMatrix&&this.mChartContextPtr.mImageFormat===AA.SVG){AN.mPointsStyle=S.TOOLTIP_UPPER;}return AN;}function a(AL,AM,AP){var AO=new j.TripleId({ObjectId:AD.DssGraphRiser,SeriesId:this.mSeriesInfo[AL].mSeriesId,GroupId:z}),AQ=this.mAreaCollection[AL],AN;AN=AG.call(this,AO,AM,AP,AQ);if(AN){this.mGraphObjectList.push(AN);AQ.AddGraphObject(AN);}}function AJ(AW,AL,AT){var AM=this.mChartContextPtr,AQ=AM.GetGraphMatrixContext(),AX=AW.GetMaxMinDataInputPosition(),AU=AW.mTripleId.mObjectId,AR=AX.LowBoundary,AS=AX.HighBoundary,AO;if(this.mIsVertical){AO=(AU===AD.DssGraphY1Body)?"Y1":"Y2";}else{AO=(AU===AD.DssGraphX1Body)?"X1":"X2";}var AN=this.mClippedMarkerSize[AO],AV=AN.LowOffset,AP=AN.HighOffset;AX=AQ.getClippedOffset(AR,AS,AT,AL,!this.mIsVertical,AV,AP);AN.LowOffset=AV=AX.LowOffset;AN.HighOffset=AP=AX.HighOffset;}function AC(AR,AU,AQ){if(!this.mChartContextPtr.mIsGraphMatrix){return AR;}var AP,AO=0,AV=false,AN;if(AU.IsBaseAtZero()){AP=AU.GetPositionByValue(0);if(AP!==null){AO=AP;if(AU.isBaseLineQualified()){var AT=AR.length;if(AT%2===0&&AT>=4){var AL=AT/2,AS,AM;AS=AR.slice(0,AL);AM=AR.slice(AL,AR.length+1);if(AQ&&AM[0].y===AO){AV=true;for(AN=0;AN<AL;++AN){if(AS[AN].y!==AM[AL-1-AN].y){AM[AL-1-AN].y--;}}}if(!AQ&&AM[0].x===AO){AV=true;for(AN=0;AN<AL;++AN){if(AS[AN].x!==AM[AL-1-AN].x){AM[AL-1-AN].x++;}}}if(AV){AR.splice(0,AR.length);AR=AS.concat(AM);}}}}}return AR;}function M(AP,AR){if(!this.mChartContextPtr.mIsGraphMatrix){return AP;}var AL=AP.length,AO;if(AL%2===0&&AL>=4){var AN=AL/2,AQ,AM;AQ=AP.slice(0,AN);AM=AP.slice(AN,AP.length+1);for(AO=0;AO<AN;++AO){if(AR){if(AQ[AO].y!==AM[AN-1-AO].y){AM[AN-1-AO].y++;}}else{if(AQ[AO].x!==AM[AN-1-AO].x){AM[AN-1-AO].x--;}}}AP.splice(0,AP.length);AP=AQ.concat(AM);return AP;}return AP;}function t(AZ,AP,AV,AN){var Ab=this.mChartContextPtr.mIsGraphMatrix,Ac,Aa,Ae,AS;if(!Ab){a.call(this,AZ,AV,AN);}var AO=this.mpABLPlotContext.mValueAxis,AW=new j.TripleId({ObjectId:AD.DssGraphRiser,SeriesId:this.mSeriesInfo[AZ].mSeriesId,GroupId:AP});if(AV.length===1){return ;}if(AV.length<=2){var AT=this.drawSinglePoint(AW,AV[0],AF._CIRCLE,AF._AREA);Ac=AT.Object;if(this.mDatasetPtr.showSeriesDatalabel(this.mSeriesInfo[AZ].mSeriesId)){if(Ac!==undefined&&Ac!==null){this.mSinglePointObjects.push(Ac);}}AS=AT.ShapeSize;if(AS===undefined){if(Ac){AS=Ac.getShapeSize();}else{AS=0;}}Aa=AO[this.mSeriesInfo[AZ].mValueAxis];if(Aa){AJ.call(this,Aa,AV[0],AS);}}else{var AX=this.mHasColorBy&&this.mDatasetPtr.isGradientABL();Aa=AO[this.mSeriesInfo[AZ].mValueAxis];Ae=AV.slice(0);Ae=AC.call(this,Ae,Aa,this.mIsVertical);if(AW.mSeriesId!==0){Ae=M.call(this,Ae,this.mIsVertical);Ac=AG.call(this,AW,Ae,AN,null);}else{Ac=AG.call(this,AW,Ae,AN,null);}if(AX){var AY=Ae;if(Ac){var AQ=this.prepareTransitionalGradient(AW,AY,AY.length/2),AR=Ac.GetFormatFill(),Ad=AR.transformToGradient(AQ);Ac.SetFormatFill(Ad);if(AQ.Effective){var AU=Ad.getGradient(),AM=Ac.mFormatLinePtr.transformToGradientFromFill(AU,AY[0],AY[AY.length/2-1]);Ac.SetFormatLine(AM);}}}var AL=Ac&&(Ac instanceof j.MarkerObject);if(AL){Aa=AO[this.mSeriesInfo[AZ].mValueAxis];if(Aa){AS=Ac.getShapeSize();AJ.call(this,Aa,AV[0],AS);}}}if(Ac){this.mGraphObjectList.push(Ac);this.AddToMap(Ac);}}function g(AL,AN){var AQ=AN.length/2,AP=AN.length-1,AO=[],AM;if(AL.mSeriesId===0&&this.mIgnoreBasesSeriesBorder){delete this.mIgnoreBasesSeriesBorder;return null;}AO.push(AN[AP]);for(AM=0;AM<=AQ;++AM){AO.push(AN[AM]);}return new j.PolyLineObject({TripleId:AL,GraphObjectManager:this,PolyLine:AO});}function I(AN,AV,AQ){var AM=this.mChartContextPtr,AW=this.mSeriesInfo[AN],AT=AW.mSeriesId,AU=new j.TripleId({ObjectId:AD.DssGraphRiser,SeriesId:AT,GroupId:AV}),AL,AO,AX,AP;if(AQ.length<4){return ;}if(!AM.mIsGraphMatrix){return ;}AL=this.GetGraphObject(AU);if(AL!==undefined&&AL!==null){AO=new j.TripleId({ObjectId:AD.DssGraphDataLine,SeriesId:AT});AX=g.call(this,AO,AQ,AN);if(AX){AP=AX.mFormatLinePtr;AP.mLineThickness=2;var AS=AL.mFormatLinePtr,AR=AL.GetFormatFill();if(AS){AP=mstrmojo.hash.copy(AS,AP);}else{if(AR){AP.mLineColor=AR.mSimpleColor;}}}if(AX){AX.mIsDetectable=false;this.mGraphObjectList.push(AX);}}}function y(AO,AV,AS){var AM=this.mChartContextPtr,AN=this.mDatasetPtr,AQ,AW=this.mSeriesInfo[AO],AU=AW.mSeriesId,AT,AL,AP,AX,AR;if(AS.length<4){return ;}if(!AM.mIsGraphMatrix){return ;}AQ=AN.showSeriesDatalabel(AU);if(AQ){AT=new j.TripleId({ObjectId:AD.DssGraphRiser,SeriesId:AU,GroupId:AV});AL=this.GetGraphObject(AT);if(AL!==undefined&&AL!==null){AP=new j.TripleId({ObjectId:AD.DssGraphDataLine,SeriesId:AU});AX=g.call(this,AP,AS,AO);if(AX===null){return ;}AR=AX.mFormatLinePtr;AR.mLineThickness=2;AR.mAlpha=255;this.mAreaBoundForDataLabel.push(AX);}}}function H(AL,AN){var AQ,AR,AT,AM,AU=[],AP=this.mChartContextPtr.mIsGraphMatrix;var AO=n.call(this,AL);AQ=this.mSeriesPolygons[AO];if(AQ.length<4&&!AP){return ;}this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);this.mGroupRangeList.splice(0,this.mGroupRangeList.length);AR=L.call(this,AQ,AU);AT=AR.length;for(AM=0;AM<AT;++AM){var AS=-3;if(AP){AS=W.call(this,AM,AS);}t.call(this,AO,AS,AR[AM],AN);I.call(this,AO,AS,AU[AM],AN);y.call(this,AO,AS,AU[AM],AN);}}function l(){}function Q(AM,AO){var AN=this.mSeriesPolygons[AM];if(AN[AO-1].x===-1||AN[AO].x===-1){return ;}var AL=[];AL[0]=AN[AO-1];AL[1]=AN[AO];AL[2]=AN[AN.length-AO-1];AL[3]=AN[AN.length-AO];return AL;}function U(AR,AN){var AV,AS=[],AT=[],AM=[],AQ,AO,AW,AU,AL,AP;if(this.mHasNegativeValue){l.call(this,AR,AN);return ;}AV=this.IsReverseSeriesOrder(AR);AQ=this.mSeriesInfo.length;for(AP=0;AP<AQ;++AP){AO=AV?AQ-1-AP:AP;if(this.mSeriesInfo[AO].mValueAxis===AR){AW=Q.call(this,AO,AN);if(AW===undefined){continue;}AS.push(AW);AT.push(AO);AM.push(true);}}AU=AS.length;for(AP=0;AP+1<AU;++AP){if(AV){AL=new j.Vector2D({StartPoint:AS[AP][3],EndPoint:AS[AP][2]});}else{AL=new j.Vector2D({StartPoint:AS[AP][0],EndPoint:AS[AP][1]});}if(this.PriorToNextSeries(AL,AN)){r.call(this,AT[AP],AS[AP],AN);AM[AP]=false;}}for(AP=AU-1;AP>=0;--AP){if(AM[AP]){r.call(this,AT[AP],AS[AP],AN);}}}function o(AQ){var AM,AP,AO,AN=this.mSeriesInfo,AL=AN.length;if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){for(AM=0;AM<AL;++AM){if(AQ===AN[AM].mValueAxis||AQ===D.VA_BOTH){H.call(this,AM,this.mUseDepth);}}}else{AP=this.IsReverseGroupOrder();if(this.mpABLPlotContext.mABLOptions.mCurvedLines){l.call(this,AQ,0);}else{for(AM=1;AM<this.mGroupCount;++AM){AO=AP?this.mGroupCount-AM:AM;U.call(this,AQ,AO);}}for(AM=0;AM<AL;++AM){if(AQ===AN[AM].mValueAxis||AQ===D.VA_BOTH){H.call(this,AM,false);}}}}function Y(AM,AN,AO,AL){if(AM){if(AO){return AL.y<AN;}return AL.y<=AN;}if(AO){return AL.x>AN;}return AL.x>=AN;}function E(Ah){var AL=this.mpABLPlotContext,AR=this.mpABLPlot,AW=[],Ao=0,Am=0,Ae,Ak,AQ,Ar,AZ,AP,Ag,AX,AS,Ac,Al,AU,An,AV,AO,Aj=false,AY=false,Aa=false,Ap=this.mpABLPlotContext.mABLOptions.mLayout,Ai=this.mChartContextPtr.mIsGraphMatrix,AN=this.mGroupCount;if(this.mUseDepth){Ae=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[Ah].mSeriesIndex);Ao=Ae.OffsetX;Am=Ae.OffsetY;}AQ=this.mSeriesInfo[Ah].mValueAxis;Ak=AL.mValueAxis[AQ];AV=Ak.GetAxisOriginValue();AX=Ak.mOptions.mDrawFromZero;Ak.mOptions.mDrawFromZero=(AV===null||AV===0)&&(Ak.mOptions.mUseLogarithmicScale===false);AP=Ak.GetBasePosition(true);Ar=Ak.GetBaseValue(true);AO=Ak.GetPositionByValue(AV!==null?AV:0);if(AO===null){AO=-100;}AZ=Ak.GetBasePosition(AV);for(Ag=0;Ag<AN;++Ag){AS=0;Ae=this.GetData(Ah,Ag);Ac=(Ae===null);if(Ae!==null){AS=Ae;++AR.DPCount;if(AR.seriesDPCount[this.mSeriesInfo[Ah].mSeriesId]===undefined||AR.seriesDPCount[this.mSeriesInfo[Ah].mSeriesId]===null){AR.seriesDPCount[this.mSeriesInfo[Ah].mSeriesId]=1;}else{++(AR.seriesDPCount[this.mSeriesInfo[Ah].mSeriesId]);}}Al=0;Ae=Ak.GetPositionByValue(AS);if(Ae!==null){Al=Ae;}if(Ai&&Ac){AW[Ag]=A;AW[AN*2-Ag-1]=A;continue;}if((this.mIsAbsolute&&Ac)||Ae===null){AW[Ag]=A;AW[AN*2-Ag-1]=A;continue;}AU=AL.mCategoryAxisPtr.getGroupMiddlePos(Ag);if(!this.mIsAbsolute){var AT=Ap===T.LO_STACKED,AM=Ak.mOptions.mUseCustomMinMax,Aq=Ak.mOptions.mUseLogarithmicScale;if(Ak.mOptions.mDrawFromZero||T.LO_PERCENT===Ap||(AT&&!AM&&Aq)){if((AT&&!AM&&Aq)&&(Ah===0)){An=Ar;}else{An=0;Ae=this.GetData(Ah,Ag,true);if(Ae!==null){An=Ae;}}Ae=Ak.GetPositionByValue(An);if(Ae!==null){AP=Ae;}else{AW[Ag]=A;AW[AN*2-Ag-1]=A;continue;}}else{var Ab=this.updateGroupStackInfoWithBase(AQ,Ag,AV);var Ad=this.getSeriesOffsetIntoStackedInfo(AQ,Ag,Ah);var As=Ab[Ad];AP=Ak.ValueToPosition(AS>=Ar?As.Min:As.Max);Al=Ak.ValueToPosition(AS>=Ar?As.Max:As.Min);}}if(Al===AZ&&AS!==Ar){if(this.mIsAbsolute&&this.mSeriesInfo.length===1){if(this.mIsVertical){Am=AS>0?-1:1;}else{Ao=AS>0?1:-1;}}else{if(Ah===0){this.mIgnoreBasesSeriesBorder=true;}}}if(this.mIsVertical){AW[Ag]=new j.Point2D({x:AU+Ao,y:Al+Am});AW[AN*2-Ag-1]=new j.Point2D({x:AU+Ao,y:AP+Am});}else{AW[Ag]=new j.Point2D({x:Al+Ao,y:AU+Am});AW[AN*2-Ag-1]=new j.Point2D({x:AP+Ao,y:AU+Am});}if(!Aa&&Ai){var Af=AW[Ag];var At=Y.call(this,this.mIsVertical,AO,true,Af);Aj=Aj||At;AY=AY||!At;Af=AW[AN*2-Ag-1];At=Y.call(this,this.mIsVertical,AO,false,Af);Aj=Aj||At;AY=AY||!At;Aa=AY&&Aj;}}Ak.mOptions.mDrawFromZero=AX;return{POLYGON:AW,CROSS:Aa};}function p(){var AO=this.mFinalSeriesPolygons,AU=this.mSeriesPolygons,AM,AL,AN,AW,AV,AP=this.mpABLPlotContext.mABLOptions.mLayout;this.mSeriesDrawingOrder.splice(0,this.mSeriesDrawingOrder.length);AN=this.mSeriesInfo.length;for(AM=0;AM<AN;++AM){var AQ=E.call(this,AM);var AS=AQ.POLYGON;AV=AQ.CROSS;AO.push(AS);if((AP===T.LO_STACKED||AP===T.LO_PERCENT)&&this.mChartContextPtr.mIsGraphMatrix){if(AV){this.mSeriesDrawingOrder.unshift(AM);}else{this.mSeriesDrawingOrder.push(AM);}}}AU.splice(0,AU.length);var AR;AN=AO.length;for(AM=0;AM<AN;++AM){AR=[];AW=AO[AM].length;for(AL=0;AL<AW;++AL){var AT=new j.Point2D();this.GetAreaPointByProgress(AM,AL,this.mProgress,AT);AR.push(AT);}AU.push(AR);}}function s(AM){var AL;for(AL=0;AL<this.mSeriesInfo.length;++AL){if(AM===this.mSeriesInfo[AL].mValueAxis||AM===D.VA_BOTH){h.call(this,AL);}}}function h(AL){var AU=this.mSeriesInfo,AR=this.mSeriesPolygons[AL],AT=this.mChartContextPtr.mIsGraphMatrix,AN,AQ,AO,AV,AP=d.kVirtualMarkerSize,AM,AS=AR.length;for(AM=0;AM*2<AS;++AM){if(AR[AM].x===-1){continue;}AN=this.mDatasetPtr.GetData(AU[AL].mSeriesId,AM,0);if(AN===null||AN===undefined){continue;}if(AT){this.CreateOneDataMarker(AL,AM,null,AR[AM],AM);}else{AQ=new j.Rect2D({x:AR[AM].x-AP/2,y:AR[AM].y-AP/2,height:AP,width:AP});AO=new j.TripleId({ObjectId:AD.DssGraphDataMarker,SeriesId:AU[AL].mSeriesId,GroupId:AM});AV=new j.RectangleObject({TripleId:AO,GraphObjectManager:this,Area:AQ,GraphCollectionObject:null,IsOnlyForToolTip:true,IsVirtualMarker:true});this.AddToMapAndList(AV);}}}function AK(AT){var AR=this.mFinalSeriesPolygons[AT.SeriesInfo],AS=0,AP=0,AL=this.mChartContextPtr,AQ=AL.GetGraphMatrixContext(),AM=AL.getUtiliy().tripleId,AO,AN;AM.reset(x,AD.DssGraphRiser,AT.SeriesId,AT.GroupId);AO=AQ.IsIsolatedDot(x);if(AR[AT.GroupId].x===-1){return false;}if(AO){AN=this.GetGraphObject(x);if(AN!==null&&AN!==undefined&&AN.mMarkerSize!==undefined&&AN.mMarkerSize!==null){AS=AN.mMarkerSize;}AP=AS;}AT.HostMarkerPoint=AR[AT.GroupId];AT.CenterXOffset=AS;AT.CenterYOffset=AP;return true;}function c(){var AN,AM=this.mDataLabels,AL=AM.length;for(AN=0;AN<AL;++AN){AM[AN].isValid=AK.call(this,AM[AN]);}}function X(){var AL=this.mpABLPlot.dataLabelManager,AN=this.mChartContextPtr,AM=new j.Rect2D({x:0,y:0,width:AN.mGraphWidth,height:AN.mGraphHeight});if(AL===null||AL===undefined){AL=this.mpABLPlot.dataLabelManager=new j.DataLabelManager({DataArea:AM});AL.ChartContext=AN;}AL.SinglePointObjects=AL.SinglePointObjects.concat(this.mSinglePointObjects);AL.PolyLineObjects=AL.PolyLineObjects.concat(this.mAreaBoundForDataLabel);AL.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AL;}function P(){var AM=this.mDataLabels,AL=AM.length,AN;for(AN=0;AN<AL;++AN){if(AM[AN].display){this.CreateOneDataMarker(AM[AN].SeriesInfo,AM[AN].GroupId,null,AM[AN].HostMarkerPoint,-3,true);}}}function f(AM){if(this.mChartContextPtr.mIsGraphMatrix){if(this.mDatasetPtr.showDatalabels()){this.CreateAllDataLabels();c.call(this);var AL=X.call(this);AL.PlaceDataLabels(this.mDataLabels,AM);P.call(this);}}else{e.call(this);}}mstrmojo.chart.AreaSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.AreaSeriesRenderer",mAreaCollection:null,mSeriesPolygons:null,mFinalSeriesPolygons:null,mIsAbsolute:false,mIsPolygonSplit:false,mSeriesDrawingOrder:null,mGroupRangeList:null,mSinglePointObjects:null,mHasCreatedMarkers:false,mAreaBoundForDataLabel:null,mDataLabels:null,init:function AI(AL){this._super(AL);this.mAreaCollection=[];this.mSeriesPolygons=[];this.mFinalSeriesPolygons=[];this.mSeriesDrawingOrder=[];this.mGroupRangeList=[];this.mIsAbsolute=this.mpABLPlot.isAbsoluteOrCluster();this.mProgress=1;this.mSinglePointObjects=[];this.mAreaBoundForDataLabel=[];this.mDataLabels=[];},GenerateMapAndList:function AH(AL){var AM=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}w.call(this);p.call(this);var AR=new j.TripleId({ObjectId:AB.DssGraphRendererLayer,SeriesId:D.VA_BOTH}),AP=new j.GraphObjectAggregation({TripleId:AR,GraphObjectManager:this}),AU=this.mGraphObjectList;AU.splice(0,AU.length);this.GenerateInterpolationFrame(1,AP);if(AM.mUseAnimation){this.GenerateInterpolationFrame(0,AP);}AU.push(AP);if(AM.mImageUsage===J.GENERAL){f.call(this,AL);this.GenerateTrendLine();this.GenerateRefLine();}if(this.mSeriesDrawingOrder&&this.mSeriesDrawingOrder.length){var AO=this.renderSequence,AN=this.mSeriesDrawingOrder,AV=this.mSeriesInfo,AQ,AT=this.mSeriesDrawingOrder.length;AO.splice(0,AO.length);for(AQ=0;AQ<AT;AQ++){var AS=AN[AQ];AS=AV[AS].mSeriesId;AO[AS]=AQ;}}else{this.populateRenderSequence();}},GenerateByValueAxis:function u(AS){var AP=[],AO=[],AM,AL,AN=this.mGraphObjectList,AR,AQ;if(this.mSeriesPolygons.length===0){w.call(this);p.call(this);}AR=new j.TripleId({ObjectId:AB.DssGraphRendererLayer,SeriesId:AS,GroupId:z});AQ=new j.GraphObjectAggregation({TripleId:AR,GraphObjectManager:this});AP.push(AQ);this.GenerateInterpolationFrame(1,AQ);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0,AQ);}AM=AN.length;for(AL=0;AL<AM;AL++){AO.push(AN[AL]);}AN.splice(0,AM);AN.splice(0,AM);for(AL=0;AL<AM;++AL){AN.push(AO[AL]);}if(AS===D.VA_Y1){e.call(this);this.GenerateTrendLine();this.GenerateRefLine();}},GenerateInterpolationFrame:function Z(AL,AM){var AT=this.mSeriesPolygons,AQ=this.mGraphObjectList,AX=AQ.slice(0),AO=this.mFinalSeriesPolygons.length,AP,AN,AR,AV,AS,AW,AU;this.mProgress=AL;AT.splice(0,AT.length);for(AP=0;AP<AO;++AP){AR=[];AV=this.mFinalSeriesPolygons[AP].length;for(AN=0;AN<AV;++AN){AS=new j.Point2D();this.GetAreaPointByProgress(AP,AN,this.mProgress,AS);AR.push(AS);}AT.push(AR);}AW=AM.mTripleId.mSeriesId;if(AW===D.VA_BOTH){if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){o.call(this,D.VA_BOTH);s.call(this,D.VA_BOTH);}else{o.call(this,D.VA_Y2);o.call(this,D.VA_Y1);s.call(this,D.VA_Y2);s.call(this,D.VA_Y1);}}else{o.call(this,AW===D.VA_Y1?D.VA_Y1:D.VA_Y2);s.call(this,AW===D.VA_Y1?D.VA_Y1:D.VA_Y2);}AM.Clear(AL<0.5,AL>=0.5);AU=AQ.length;for(AP=0;AP<AU;++AP){AM.AddGraphObject(AQ[AP],AL<0.5);}if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AM.SetAnimationEnable(true);AM.SetProgress(AL);}AQ.splice(0,AQ.length);AQ=AQ.concat(AX);this._super(AL);},GetAreaPointByProgress:function N(AQ,AT,AL,AV){var AR=this.mFinalSeriesPolygons,AN=this.mChartContextPtr,AU=false,AP=[],AO,AW;if(AR[AQ][AT].x===-1&&AR[AQ][AT].y===-1){AV.x=-1;AV.y=-1;return ;}if(!!AN.mpOldChartManager){AO=AN.mpOldChartManager;var AS=AO.GetGraphObjectManager(this.mTripleId,true);if(AS!==null){AW=AS;AP=AW.mFinalSeriesPolygons.slice(0);AU=true;}}if(AU&&AQ<AP.length&&AT<AP[AQ].length&&!(AP[AQ][AT].x===-1&&AP[AQ][AT].y===-1)){AV.x=AP[AQ][AT].x+(AR[AQ][AT].x-AP[AQ][AT].x)*AL;AV.y=AP[AQ][AT].y+(AR[AQ][AT].y-AP[AQ][AT].y)*AL;}else{var AM=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AQ].mValueAxis].GetBasePosition();if(this.mIsVertical){AV.x=AR[AQ][AT].x;AV.y=AM-(AM-AR[AQ][AT].y)*AL;}else{AV.x=AM-(AM-AR[AQ][AT].x)*AL;AV.y=AR[AQ][AT].y;}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","MarkerObject","NumberObject","Point2D","SeriesRenderer","PolyLineObject","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumAttachedPointsStyle","EnumImageUsage","EnumGraphMatrixElementSizeMode","EnumValueAxis");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType","EnumDSSExtraGraphProperty");var f=mstrmojo.chart,O=f.enums,E=O.EnumCollectionType,AD=O.EnumDSSExtraGraphObject,p=O.EnumMajorGraphType,Q=O.EnumLayout,J=O.EnumOrientation,F=O.EnumValueAxis,P=O.EnumAttachedPointsStyle,L=O.EnumImageUsage,AK=O.EnumGraphMatrixElementSizeMode,AC=f.gNullGroupId,Z=f.model,S=Z.enums,AG=S.EnumDSSGraphMarkerShape,AF=S.EnumDSSGraphObject,AH=S.EnumShapeType;var K=new f.TripleId(),U=new f.Point2D(),C=new f.Point2D();U.Reset(-2,-2);C.Reset(-1,-1);U.dangling=true;C.isNull=true;mstrmojo.chart.LineSeriesOptions=mstrmojo.provide("mstrmojo.chart.LineSeriesOptions",{});function b(){if(this.mExpectedLineCount===undefined){var AV=this.mSeriesInfo,AU,AX,AT=0,AW=this.mDatasetPtr,AS=AV.length;for(AU=0;AU<AS;AU++){AX=AV[AU].mSeriesId;if(AW.GetShapeBySeries(AX)===AH._LINE){AT++;}}this.mExpectedLineCount=AT;}return this.mExpectedLineCount;}function d(){return{mShowStepLine:false,mShowMarkers:true,mMarkerShape:0,mMarkerSize:50};}function AR(AW){if(!this.mSupportDiscretePoints){return ;}var AS=[],AU=0,AX=new f.Point2D(),Aa=this.mVecGroupIdMapPerSeries,AT,AY;if(this.discreteMatrix===undefined){this.discreteMatrix=[];}var AV=[];Aa.splice(0,Aa.length);AY=this.mGroupCount;for(AT=0;AT<AY;++AT){if(this.GetLinePoint(AW,AT,AX)){AS[AU]=AT;AU++;}else{if(AS.length>0){var AZ=AS.concat();Aa.push(AZ);}AS.splice(0,AS.length);AU=0;AV.push(AT);}}AV.push(AY);this.discreteMatrix[AW]=AV;if(AS.length>0){Aa.push(AS);}}function z(){if(this.mChartContextPtr.mUseAnimation){return this.mProgress===1;}return true;}function h(){return true;}function M(AZ,AW){var AV=-1,AU,AS,AT=this.clusterInfo,AX=this.mpABLPlotContext,AY=AX.mCategoryAxisPtr;AU=this.mSeriesInfo[AZ].mDataIndex;if(AT.Circle){AV=AT.Circle.indexOf(AU);}if(AV===-1&&AT.Tick){AV=AT.Tick.indexOf(AU);}if(AV===-1&&AT.Square){AV=AT.Square.indexOf(AU);}if(AV===-1){AV=AU%AT.columns;}AS=AY.getGroupStartPos(AW)+0.5*AT.groupGap+(AT.unitWidth+AT.riserGap)*AV+0.5*AT.unitWidth;AS=Math.floor(AS+0.5);return AS;}function AA(AW,AZ,AU){var AS=this.mChartContextPtr;if(AS.RenderClusterShapes()&&this.mpABLPlotContext.takeGroupCenter===false){if(this.clusterInfo===undefined){var AV,AT=this.mDatasetPtr.GetClusterSeriesCount(),Aa=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),Ac=this.evalBarStyleUnitWidth(Aa,AT);this.clusterInfo=mstrmojo.hash.copy(Ac);if(AV){var Ab=this.clusterInfo;Ab.Circle=AV.Circle.concat();Ab.Tick=AV.Tick.concat();Ab.Square=AV.Square.concat();}}var AX=M.call(this,AW,AZ),AY=new f.Point2D({Point2D:AU});if(this.mIsVertical){AY.x=AX;}else{AY.y=AX;}return AY;}return AU;}function N(Ae,AT,Ad,Ab){var Aj,As,Ap,An,Al,Ai,Am,AW=false,AY,AU=Ae.shape,AX,Ah,Ao=Ad[Ab],AV=this.mChartContextPtr,Ac=this.mDatasetPtr,Af=this.mSinglePointObjects,Ar=AV.GetGraphMatrixContext(),At,Aq;As=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AT].mValueAxis];if(As){AW=true;Aj=As.GetMaxMinDataInputPosition();AX=Aj.LowBoundary;Ah=Aj.HighBoundary;Am="y1";var AS=As.mTripleId.mObjectId;Am=AV.getAxisKeyFromObjectId(AS);AY=this.mClippedMarkerSize[Am];}At=Ao.length;var Au;var Ag,Ak,Aa,Av,AZ;for(Ap=0;Ap<At;++Ap){Al=new f.TripleId({ObjectId:AF.DssGraphRiser,SeriesId:this.mSeriesInfo[AT].mSeriesId,GroupId:this.getCorrectGroupIdInSeriesPoints(Ap,Ab)});Au=AA.call(this,AT,Al.mGroupId,Ao[Ap]);Ai=this.drawSingleDataPoint(Al,Au,AU);Aq=Ai.length;for(An=0;An<Aq;++An){if(Ai[An].Object){this.AddToMapAndList(Ai[An].Object);}}Ag=Ac.showSeriesDatalabel(Al.mSeriesId);if(Ai.length>0){if(Ai[0].Object!==null&&Ai[0].Object!==undefined&&Ag){Af.push(Ai[0].Object);}Ae.AlreadyInMapAndList=true;Ae.Obj=Ai[0];if(AW){Aq=Ai.length;for(An=0;An<Aq;++An){Ak=Ai[An];Aa=AY.LowOffset;Av=AY.HighOffset;AZ=Ak.ShapeSize;if(AZ===undefined){if(Ak.Object){AZ=Ak.Object.getShapeSize();}else{AZ=0;}}Aj=Ar.getClippedOffset(AX,Ah,AZ,Ao[Ap],!AV.IsVertical(),Aa,Av);AY.LowOffset=Aa=Aj.LowOffset;AY.HighOffset=Av=Aj.HighOffset;}}}}Ae.AlreadyInMapAndList=true;Ae.Obj=null;return Ae;}function AB(AV){var AY=this.mChartContextPtr,AT,AW=[];if(AY.mIsGraphMatrix&&this.mGroupCount===1){AT=new f.Point2D();if(!this.GetLinePoint(AV,0,AT)){return ;}AW.push(AT);var AX=[];AX.push(AW);var AS={};var AU=j.call(this,AV);AS.shape=AU;N.call(this,AS,AV,AX,0);if(AS.AlreadyInMapAndList===false){this.AddToMapAndList(AS.Obj);}}}function o(AZ,AU,AT){var AS,AW,AY=true,AV=0,AX=100;for(AS=0;AS<AT;++AS){AW=this.mDatasetPtr.GetSizeByData(AZ,AU+AS);if(AW!==null){if(AY){AV=AW;AY=false;}else{if(AV!==AW){return true;}}}if(AS>AX){return true;}}return false;}function I(Aj,AZ,AX,AT,AS){var AV=this.mChartContextPtr,Ag=AZ[AX],Ae=new f.TripleId({ObjectId:AF.DssGraphDataLine,SeriesId:this.mSeriesInfo[AT].mSeriesId,GroupId:AX}),Ab,Af,AY=this.mDatasetPtr,Ai;Ae.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,Ae.mGroupId);Ab=new f.PolyLineObject({TripleId:Ae,GraphObjectManager:this,PolyLine:Ag,GraphCollectionObject:this.mLineCollections[AT],Shape:AH._LINE});Af=Ab.mFormatLinePtr;Ab.movePointsAgainstBorder();Ag=Ab.mLinePoints;var Ac=Aj&&this.mDatasetPtr.isGradientABL();if(Ac){var Ah,AW,Aa=Ag.length,Ad,AU={Valid:true,Angle:AV.IsVertical()?0:1,EndAlpha:255,Style:1,Colors:[],Start:{x:Ag[0].x,y:Ag[0].y},End:{x:Ag[Aa-1].x,y:Ag[Aa-1].y}};Ai=Ag.length;for(Ah=0;Ah<Ai;++Ah){AW=Ah/(Ag.length-1);Ad=AY.GetColorByData(Ae.mSeriesId,Ae.mGroupId+Ah);AU.Colors.push({Step:AW,Color:Ad});}Ab.mFormatLinePtr=Af.transformToGradient(AU);this.AddToMapAndList(Ab);}if(AY.showSeriesDatalabel(Ae.mSeriesId)){this.mPolyLineObjects.push(Ab);}return{Obj:Ab,AlreadyInMapAndList:Ac};}function l(AS,AZ,AV,AY,AX){var AW=this.mChartContextPtr.GetGraphMatrixContext(),Aa=AW.GetScaledSizeWithRatio(AV,AZ)/2,AU=new f.Point2D({Point2D:AS}),AT=new f.Point2D({Point2D:AS});if(this.mIsVertical){AU.y-=Aa;AT.y+=Aa;}else{AU.x-=Aa;AT.x+=Aa;}AY.x=AU.x;AY.y=AU.y;AX.x=AT.x;AX.y=AT.y;}function x(AX,Af,AY){var Aa=this.mChartContextPtr.GetGraphMatrixContext(),AS=Aa.mElementsInfo.Min.Mode,AT,AV,AW=[],AZ=[],Ac=0,Ab,Ae,AU,Ag,Ad;Ad=Af.length;for(AV=0;AV<Ad;++AV){AT=Af[AV];Ab=this.mDatasetPtr.GetSizeByData(AX.mSeriesId,AX.mGroupId+AV);if(Ab!==null){Ac=Aa.ToRatioEx(Ab,(AS===AK._PROPORTIONAL));if(Ac<0){Ac=0;}}Ae=new f.Point2D();AU=new f.Point2D();l.call(this,AT,AY,Ac,Ae,AU);AW.push(Ae);AZ.push(AU);}AZ.reverse();Ag=AW.concat(AZ);return Ag;}function V(At,Ag,Ae,AU,AT){var Af=this.mDatasetPtr,Ac=Ag[Ae],Ao,An,Ap,Ah,AX,AV=null,AY=this.mChartContextPtr,Ad=this.mSeriesInfo,Ar=AY.GetGraphMatrixContext(),Aj=Ar.GetAdjustThicknessValue(AT),Am=new f.TripleId({ObjectId:AF.DssGraphRiser,SeriesId:Ad[AU].mSeriesId,GroupId:Ae}),As,Ak,AZ,Ai,Ab,Al,AS;Am.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,Am.mGroupId);Ah=x.call(this,Am,Ac,Aj);if(AY.mImageUsage===L.GENERAL){AV=new f.PolygonObject({TripleId:Am,GraphObjectManager:this,Polygon:Ah,Shape:AH._POLYGON});AV.mPointsStyle=P.TOOLTIP_TRAPEZOID;}var Aq=this.mpABLPlotContext.mValueAxis[Ad[AU].mValueAxis];if(Aq){Ak=Aq.GetMaxMinDataInputPosition();AZ=Ak.LowBoundary;Ai=Ak.HighBoundary;AS=Aq.mTripleId.mObjectId;Al=AY.getAxisKeyFromObjectId(AS);Ab=this.mClippedMarkerSize[Al];}if(At&&AV){An=AV.mFormatFillPtr;AX=this.prepareTransitionalGradient(Am,Ac);Ap=An.transformToGradient(AX);AV.SetFormatFill(Ap);}As=Ah.length;var Aa,AW=2+2;for(Ao=0;Ao<As;++Ao){Aa=this.mChartContextPtr.IsVertical()?Ah[Ao].y:Ah[Ao].x;if(this.mChartContextPtr.IsVertical()){if(Aa<Ai){Ab.HighOffset=Math.max(Ab.HighOffset,Ai-Aa);Ab.HighOffset=Math.max(Ab.HighOffset,AW);}if(AZ<Aa){Ab.LowOffset=Math.max(Ab.LowOffset,Aa-AZ);Ab.LowOffset=Math.max(Ab.LowOffset,AW);}}else{if(Aa-Ai>0){Ab.HighOffset=Math.max(Ab.HighOffset,Aa-Ai);Ab.HighOffset=Math.max(Ab.HighOffset,AW);}if(AZ-Aa>0){Ab.LowOffset=Math.max(Ab.LowOffset,AZ-Aa);Ab.LowOffset=Math.max(Ab.LowOffset,AW);}}}if(AV){this.AddToMapAndList(AV);if(Af.showSeriesDatalabel(Am.mSeriesId)){this.mPolygonObjects.push(AV);}}return{Obj:AV,AlreadyInMapAndList:true};}function w(AV,AW,AT){var AU=this.mChartContextPtr,AX=4,AZ=AU.GetGraphMatrixContext(),AY=AZ.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount,false,AG.DssGraphMarkerShapeNone),AS=false,Aa=true;if(this.mHasSizeBy){Aa=(AY<=AX)&&!o.call(this,this.mSeriesInfo[AV].mSeriesId,this.getCorrectGroupIdInSeriesPoints(0,AW),AT[AW].length);if(AZ.mMaxSizeVal===AZ.mMinSizeVal){AY=Math.max(AZ.mElementsInfo.Max.Size,AZ.mConstants.MinimalSize.Line);}}AS=AS||this.mHasColorBy;if(Aa){return I.call(this,AS,AT,AW,AV,AY);}return V.call(this,AS,AT,AW,AV,AY);}function j(AT){var AX=this.mChartContextPtr,AV=AX.GetGraphMatrixContext(),AU,AS=AV.mMarkerShape;if(AX.mIsGraphMatrix){if(AX.isCombinationChart()){var AW=this.mDatasetPtr;AT=this.mSeriesInfo[AT].mSeriesId;AU=AW.GetShapeBySeries(AT);return AU;}switch(AS){case AG.DssGraphMarkerShapeCircle:return AH._CIRCLE;case AG.DssGraphMarkerShapeRectangle:case AG.DssGraphMarkerShapeSquare:return AH._SQUARE;case AG.DssGraphMarkerShape2DPie:case AG.DssGraphMarkerShape2DRingPie:return AH._PIE;case AG.DssGraphMarkerShapeGMTick:return AH._TICKER;default:return AH._LINE;}}else{return 0;}}function T(AU,AV,AS){var AT=this.mChartContextPtr,AW,AX,AZ=AT.mIsGraphMatrix,Aa={Obj:null,AlreadyInMapAndList:false};if(AZ){var AY=j.call(this,AU);Aa.shape=AY;if(AS[AV].length===1){if(this.mDatasetPtr.ShouldTakeGroupCenter()&&AT.isCombinationChart()){if(Aa.shape===AH._LINE){Aa.shape=AH._CIRCLE;}}return N.call(this,Aa,AU,AS,AV);}switch(AY){case AH._CIRCLE:case AH._SQUARE:case AH._PIE:case AH._TICKER:case AH._COMBINED:return N.call(this,Aa,AU,AS,AV);default:return w.call(this,AU,AV,AS);}}AW=new f.TripleId({ObjectId:AF.DssGraphDataLine,SeriesId:this.mSeriesInfo[AU].mSeriesId,GroupId:AV});AX=new f.PolyLineObject({TripleId:AW,GraphObjectManager:this,PolyLine:AS[AV],GraphCollectionObject:this.mLineCollections[AU]});Aa.Obj=AX;return Aa;}function B(AU,AT){var AZ=this.discreteMatrix,AW=0,AV,AX,Aa;if(AZ&&AZ[AU]){Aa=AZ[AU];AX=Aa.length;for(AV=0;AV<AX;AV++){if(AT>=AW&&AT<Aa[AV]){return AV;}AW=Aa[AV];}}var AS=[],AY;AW=0;this.GetLinePointSet(AU,AS);AY=AS.length;for(AV=0;AV<AY;++AV){if(AT>=AW&&AT<AW+AS[AV].length){return AT;}AW+=AS[AV].length;}return AT;}function u(AX,AU,AW){var AS,AT=new f.Point2D(),AV=new f.Point2D();AT.x=AU.x;AT.y=AU.y;AV.x=AU.x;AV.y=AU.y;AS={HighPoint:AT,LowPoint:AV};if(AX){AV.y-=AW;AT.y+=AW;}else{AV.x-=AW;AT.y+=AW;}return AS;}function g(AU,AW,AT){var AS=this.mChartContextPtr.GetGraphMatrixContext(),AV=AS.GetScaledSizeWithRatio(AT,AW)/2;return u.call(this,this.mIsVertical,AU,AV);}function H(AY,Ag){var AS=new f.Point2D(),AV,Ac=true,Aa=this.mChartContextPtr.GetGraphMatrixContext(),AT=Aa.mElementsInfo.Min.Mode,AZ,Ah,Ad,AX=0,Af,Ab=1,Ae,AW,AU={};this.GetLinePoint(AY,Ag,AS);AV=Aa.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount);if(Aa.mHasSizeBy){Ac=false;if(Aa.mMaxSizeVal===Aa.mMinSizeVal){AV=Math.max(Aa.mElementsInfo.Max.Size,Aa.mConstants.MinimalSize.Line);Ac=true;}}if(Ac){AW=B.call(this,AY,Ag);AZ=new f.TripleId({ObjectId:AF.DssGraphDataLine,SeriesId:this.mSeriesInfo[AY].mSeriesId,GroupId:AW});Ah=this.GetGraphObject(AZ);if(Ah!==undefined&&Ah!==null){Ad=Ah.mFormatLinePtr;AV=Ad.mLineThickness;AX=AV/2;}Af=u.call(this,this.mIsVertical,AS,AX);}else{Ae=this.mDatasetPtr.GetData(this.mSeriesInfo[AY].mSeriesId,Ag,Aa.mSizeIndex,false);if(Ae!==null&&Ae!==undefined){Ab=Aa.ToRatioEx(Ae,(AT===AK._PROPORTIONAL));if(Ab<0){Ab=0;}}Af=g.call(this,AS,AV,Ab);}AU.XCenterOffset=(Af.HighPoint.x-Af.LowPoint.x)/2;AU.YCenterOffset=(Af.HighPoint.y-Af.LowPoint.y)/2;return AU;}function AO(Ae){var AY=new f.TripleId({ObjectId:AF.DssGraphRiser,SeriesId:Ae.SeriesId,GroupId:Ae.GroupId}),AT=this.mChartContextPtr,Ab=AT.GetGraphMatrixContext(),Ac=Ab.IsIsolatedDot(AY),AU,AS=new f.Point2D(),Ad=0,AX=0,AW,AZ,AV=this.mDatasetPtr,Aa;if(this.GetLinePoint(Ae.SeriesInfo,Ae.GroupId,AS)){if(Ab.mMarkerShape===AG.DssGraphMarkerShapeCombined){Aa=AV.GetShapeBySeries(Ae.SeriesId);AU=(Aa===AH._CIRCLE||Aa===AH._RECTANGLE||Aa===AH._TICKER||Aa===AH._SQUARE);}else{AU=(Ab.mMarkerShape===AG.DssGraphMarkerShapeCircle||Ab.mMarkerShape===AG.DssGraphMarkerShapeRectangle||Ab.mMarkerShape===AG.DssGraphMarkerShapeGMTick||Ab.mMarkerShape===AG.DssGraphMarkerShapeSquare);}if(Ac||AU){AW=this.GetGraphObject(AY);if(AW!==null&&AW!==undefined){if(AW.mMarkerSize!==undefined&&AW.mMarkerSize!==null&&AW.MarkerPosition!==undefined&&AW.MarkerPosition!==null){Ad=AW.mMarkerSize;AX=Ad;AS.x=AW.MarkerPosition.x;AS.y=AW.MarkerPosition.y;}else{if(AW instanceof mstrmojo.chart.RectangleObject&&AW.mRect!==undefined&&AW.mRect!==null){Ad=AW.mRect.width/2;AX=AW.mRect.height/2;AS.x=AW.mRect.x+Ad;AS.y=AW.mRect.y+AX;}else{if(AW instanceof mstrmojo.chart.StraightLineObject){AS.x=0.5*(AW.mDeviceStartPoint.x+AW.mDeviceEndPoint.x);AS.y=0.5*(AW.mDeviceStartPoint.y+AW.mDeviceEndPoint.y);}}}}}else{AZ=H.call(this,Ae.SeriesInfo,Ae.GroupId);if(AZ!==null&&AZ!==undefined){Ad=AZ.XCenterOffset;}AX=AZ.YCenterOffset;}Ae.HostMarkerPoint=AS;Ae.CenterXOffset=Ad;Ae.CenterYOffset=AX;return true;}return false;}function a(){var AU,AT=this.mDataLabels,AS=AT.length;for(AU=0;AU<AS;++AU){AT[AU].isValid=AO.call(this,AT[AU]);}}function W(){var AS=this.mpABLPlot.dataLabelManager,AU=this.mChartContextPtr,AT=new f.Rect2D({x:0,y:0,width:AU.mGraphWidth,height:AU.mGraphHeight});if(AS===null||AS===undefined){AS=this.mpABLPlot.dataLabelManager=new f.DataLabelManager({DataArea:AT});AS.ChartContext=AU;}AS.SinglePointObjects=AS.SinglePointObjects.concat(this.mSinglePointObjects);AS.PolyLineObjects=AS.PolyLineObjects.concat(this.mPolyLineObjects);AS.PolygonObjects=AS.PolygonObjects.concat(this.mPolygonObjects);AS.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AS;}function n(){var AV=this.mDataLabels.length,AU,AT,AS;for(AS=0;AS<AV;++AS){AT=this.mDataLabels[AS];if(AT.display){AU=AT.GroupId;this.CreateOneDataMarker(AT.SeriesInfo,AT.GroupId,this.mMarkerCollections[AT.SeriesInfo],AT.HostMarkerPoint,AU,true);}}}function AP(AS){var AT=this.mChartContextPtr,AW=this.mDatasetPtr,AZ=AT.GetGraphMatrixContext(),Ac,Aa,AU=this.mpABLPlot;if(AT.mIsGraphMatrix){Aa=AW.showDatalabels();Ac=(AZ.mMarkerShape===AG.DssGraphMarkerShape2DPie||AZ.mMarkerShape===AG.DssGraphMarkerShape2DRingPie);}if(Aa){var AV=AU.dataLabelManager;if(AV===null||AV===undefined){var AY=new f.Rect2D({x:0,y:0,width:AT.mGraphWidth,height:AT.mGraphHeight});AV=AU.dataLabelManager=new f.DataLabelManager({DataArea:AY});AV.ChartContext=AT;}if(Ac){var Af=this.mPieRenderer;Af.enableDataLabel(this.mpABLPlot.dataLabelManager,AS);var AX,Ab=Af.dataLabels,Ae,Ad=Ab.length;for(AX=0;AX<Ad;++AX){Ae=Ab[AX].Label;if(Ae.mIsShown){this.AddToMapAndList(Ae);}}}else{this.CreateAllDataLabels();a.call(this);AV=W.call(this);AV.PlaceDataLabels(this.mDataLabels,AS);n.call(this);}}}mstrmojo.chart.LineSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.LineSeriesRenderer",mLineCollections:null,mMarkerCollections:null,mVecSeriesPoints:null,mLineSeriesOptions:null,mDepth:0,mInitialized:false,mIsByValueAxis:false,mGroupIdMapPerSeries:null,mVecGroupIdMapPerSeries:null,mHasCreatedMarkers:false,mDataLabels:null,mSinglePointObjects:null,mPolyLineObjects:null,mPolygonObjects:null,init:function AM(AS){this._super(AS);this.mDepth=this.mpABLPlot.unitLevelDepth;this.mLineCollections=[];this.mMarkerCollections=[];this.mVecSeriesPoints=[];this.mLineSeriesOptions=[];this.mGroupIdMapPerSeries=[];this.mVecGroupIdMapPerSeries=[];this.mSupportDiscretePoints=this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];this.mSinglePointObjects=[];this.mPolyLineObjects=[];this.mPolygonObjects=[];},GenerateMapAndList:function AL(AU){var AY=this.mChartContextPtr,AT,AV,AX=mstrmojo.chart.RenderLayer2,AW=this.mSeriesInfo,AS=this.mLineSeriesOptions;if(AW.length===0){return ;}for(AT=0;AT<AW.length;++AT){AS.push(d());if(AY.mIsGraphMatrix){AS[this.mLineSeriesOptions.length-1].mShowMarkers=false;}this.loadSeriesProperties(AT);}this.GenerateLineCollections();this.GenerateMarkerCollections();AV=new f.GraphObjectAggregation({TripleId:AX,GraphObjectManager:this});this.mGraphObjectList.push(AV);this.GenerateInterpolationFrame(1);if(AY.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AY.mImageUsage===L.GENERAL){this.CreateAllSeriesLabels(AU);this.GenerateTrendLine();this.GenerateRefLine();this.populateRenderSequence();}},GenerateByValueAxis:function y(AV,AS){var AU=this.mSeriesInfo,AT;if(AU.length===0){return ;}if(!this.mInitialized){for(AT=0;AT<AU.length;++AT){this.mLineSeriesOptions.push(d());this.loadSeriesProperties(AT);}this.GenerateLineCollections();this.GenerateMarkerCollections();this.mInitialized=true;this.mIsByValueAxis=true;}this.mGraphObjectList.push(new f.GraphObjectAggregation({TripleId:new f.TripleId({ObjectId:AD.DssGraphRendererLayer,SeriesId:AV,GroupId:AC}),GraphObjectManager:this}));this.GenerateInterpolationFrame(1);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AV===F.VA_Y1){this.CreateAllSeriesLabels();}},loadSeriesProperties:function t(AS){if(this.mChartContextPtr.mImageUsage!==0){return ;}},LoadStepLine:function c(AS){this.mLineSeriesOptions[AS].mShowStepLine=false;},GenerateMapAndListForSeries:function r(AX){var AT=this.mChartContextPtr,AS=[],AU,AY,AZ,AW,Ad,Ac,Aa;if(this.mGroupCount<2&&this.mSupportDiscretePoints){AB.call(this,AX);return ;}AR.call(this,AX);this.GetLinePointSet(AX,AS);AU=z.call(this);if(!this.mpABLPlotContext.mABLOptions.mUseDepth){var Ab=this.mGraphObjectList,AV=this.mLineCollections;if(AS&&AS.length){if(this.mpABLPlotContext.mABLOptions.mCurvedLines){Aa=AS.length;for(AY=0;AY<Aa;++AY){AZ=new f.TripleId({ObjectId:AF.DssGraphDataLine,SeriesId:this.mSeriesInfo[AX].mSeriesId,GroupId:AY});AW=null;if(AW){Ab.push(AW);}if(AU){this.mGraphObjectMap.push(AZ,AW);AV[AX].AddGraphObject(AW);}}}else{Aa=AS.length;for(AY=0;AY<Aa;++AY){if(AT.mIsGraphMatrix){this.mGroupIdMapPerSeries=this.mVecGroupIdMapPerSeries[AY];}else{this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);}Ad=false;Ac=T.call(this,AX,AY,AS);AW=Ac.Obj;Ad=Ac.AlreadyInMapAndList;if(AT.mIsTimeSeriesChart){AW.mIsDetectable=false;}if(!Ad&&AW){Ab.push(AW);if(AU){this.AddToMap(AW);AV[AX].AddGraphObject(AW);}}}}}}},GenerateByValueAxisAndGroup:function AE(AY,AU){var AV,Ac,AW=[],Ad=[],Aa=[],AZ,AS,Ab,AT,AX;if(this.mGroupCount<2){return ;}if((AU===-1)||this.mHasNegativeValue){this.GenerateOrderedDepthLine(AY,AU,false);}else{Ac=this.IsReverseSeriesOrder(AY);AX=this.mSeriesInfo.length;for(AV=0;AV<AX;++AV){AZ=Ac?this.mSeriesInfo.length-AV:AV;if(this.mSeriesInfo[AZ].mValueAxis===AY){AS=new f.Point2D();Ab=new f.Point2D();if(this.GetLinePoint(AZ,AU-1,AS)&&this.GetLinePoint(AZ,AU,Ab)){AW.push([AS,Ab]);Ad.push(AZ);Aa.push(true);}}}AX=AW.length;for(AV=0;AV+1<AX;++AV){AT=new f.Vector2D({x:AW[AV+1][0],y:AW[AV+1][1]});if(this.PriorToNextSeries(AT,AU)){this.GenerateDepthLine(Ad[AV],AU,AW[AV]);Aa[AV]=false;}}for(AV=AW.length-1;AV>=0;--AV){if(Aa[AV]){this.GenerateDepthLine(Ad[AV],AU,AW[AV]);}}}},GetLinePointSet:function e(AY,AU){var AX=[],AW=this.mSupportDiscretePoints?0:1,AV,AT,AS,AZ=this.mGroupCount;for(AV=0;AV<AZ;++AV){AS=new f.Point2D();if(this.GetLinePoint(AY,AV,AS)){AX.push(AS);}else{if(AX.length>AW){AT=AX.slice(0);AU.push(AT);}AX.length=0;}}if(AX.length>AW){AU.push(AX);}},GetLinePoint:function AI(AZ,Ae,AX){var AV=this.mChartContextPtr,Ab=0,Aa=0,Ad,AY,AT,AS=false,Af,AW,AU,Ac;if(!this.GetFinalLinePoint(AZ,Ae,AX,false)){return false;}if(this.mProgress===1){return true;}if(this.mUseDepth){Ac=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[AZ].mSeriesIndex);Ab=Ac.OffsetX;Aa=Ac.OffsetY;}if(AV.mOldChartManager!==null){AY=AV.mOldChartManager;Ad=AY.GetGraphObjectManager(this.mTripleId,true);}AT=new f.Point2D({Point2D:AX});if(Ad!==null){Af=Ad;AS=Af.GetFinalLinePoint(AZ,Ae,AT,true);if(!AS){AW=Af.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(Ae);if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){if(this.mDeviceDataArea){if(AW>this.mDeviceDataArea.y+this.mDeviceDataArea.height){AW=this.mDeviceDataArea.y+this.mDeviceDataArea.height;}if(AW<this.mDeviceDataArea.y){AW=this.mDeviceDataArea.y;}AT.y=AW+Aa;}}else{if(this.mDeviceDataArea){if(AW>this.mDeviceDataArea.x+this.mDeviceDataArea.width){AW=this.mDeviceDataArea.x+this.mDeviceDataArea.width;}if(AW<this.mDeviceDataArea.x){AW=this.mDeviceDataArea.x;}AT.x=AW+Ab;}}}}if(!AS){AU=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AZ].mValueAxis].GetBasePosition();if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){AT.x=AU+Ab;}else{AT.y=AU+Aa;}}AX.x=AT.x+(AX.x-AT.x)*this.mProgress;AX.y=AT.y+(AX.y-AT.y)*this.mProgress;return true;},GetFinalLinePoint:function D(AY,Af,AT,Ae){var Ag,AW=this.mVecSeriesPoints,AX=this.mpABLPlotContext,AU=this.mpABLPlot,Ab=0,Aa=0,AZ,AS,Ad,Ac;if(Ae&&(AY>=AW.length||Af>=AW[AY].length)){return false;}while(AW.length<=AY){Ag=[];AW.push(Ag);}while(AW[AY].length<=Af){AW[AY].push(U);}var AV=AW[AY][Af];if(AV.x!==-2&&!!AV.dangling===false){if(AV.x===-1&&AV.isNull){return false;}AT.ResetPoint(AV);return true;}if(Ae){return false;}AW[AY][Af]=C;if(this.mUseDepth){Ac=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[AY].mSeriesIndex);Ab=Ac.OffsetX;Aa=Ac.OffsetY;}AZ=this.GetData(AY,Af);if(AZ===null){return false;}K.mSeriesId=this.mSeriesInfo[AY].mSeriesId;K.mGroupId=Af;if(this.mDatasetPtr.GetShapeBySeries(K.mSeriesId)===AH._LINE){if(this.mChartContextPtr.checkColorByAndSizeByValue(K,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return false;}}AS=Math.floor(AX.mCategoryAxisPtr.getGroupMiddlePos(Af));Ad=AX.mValueAxis[this.mSeriesInfo[AY].mValueAxis].GetPositionByValue(AZ);if(Ad===null){return false;}if(AX.mABLOptions.mOrientation===J.OR_HORIZONTAL){AT.x=Ad+Ab;AT.y=AS+Aa;}else{AT.x=AS+Ab;AT.y=Ad+Aa;}AW[AY][Af]=new f.Point2D({Point2D:AT});++AU.DPCount;if(AU.seriesDPCount[this.mSeriesInfo[AY].mSeriesId]===undefined||AU.seriesDPCount[this.mSeriesInfo[AY].mSeriesId]===null){AU.seriesDPCount[this.mSeriesInfo[AY].mSeriesId]=1;}else{++(AU.seriesDPCount[this.mSeriesInfo[AY].mSeriesId]);}return true;},GenerateDepthLine:function Y(AU,AT,AS){},GenerateLineCollections:function R(){var AS=this.mChartContextPtr,AU,AT,AZ,AY,AV,Ab,AW,AX=AS.GetGraphMatrixContext(),Aa=AS.mIsGraphMatrix;AT=this.mUseDepth?E.CT_DEPTH_LINE_OR_LINE_MARKER:E.CT_LINE;AZ=this.mUseDepth?AF.DssGraphRiser:AF.DssGraphDataLine;AY=this.mSeriesInfo.length;if(Aa){if(AS.isLegendByGroup()){AY=this.mGroupCount;}AT=E.CT_LINE;}for(AU=0;AU<AY;++AU){Ab=this.mSeriesInfo[AU].mSeriesId;AV=new f.TripleId({ObjectId:AZ,SeriesId:Ab});if(AX.isCombinationChart()===false&&AX.isPieOrRingShape()){AW=null;}else{AW=new f.GraphCollectionObject({TripleId:AV,GraphObjectManager:this,CollectionType:AT});}this.mLineCollections.push(AW);if(this.mpABLPlotContext.mABLOptions.mMajorGraphType!==p.MGT_PARETO||this.mUseDepth){if(!Aa){this.AddLegendMarkerToCollection(AU,this.mLineCollections[AU],true,this.mLineSeriesOptions[AU].mShowMarkers,this.mLineSeriesOptions[AU].mMarkerShape,this.mpABLPlotContext.mABLOptions.mShowLines);}}}},GenerateMarkerCollections:function A(){var AT,AW,AU=this.mLineSeriesOptions,AS=this.mGraphObjectMap,AV=this.mMarkerCollections,AX,AY;AT=this.mSeriesInfo.length;for(AW=0;AW<AT;++AW){if(AU[AW].mShowMarkers&&(!this.mUseDepth)){AX=new f.TripleId({ObjectId:AF.DssGraphRiser,SeriesId:this.mSeriesInfo[AW].mSeriesId});AY=new f.GraphCollectionObject({TripleId:AX,GraphObjectManager:this,CollectionType:E.CT_DEPTH_LINE_OR_LINE_MARKER});AS.push(AX,AY);AV.push(AY);}else{AV.push(null);}}},CreateSeriesMarkers:function G(AU){var AT,AS,AV;AV=this.mGroupCount;for(AT=0;AT<AV;++AT){AS=new f.Point2D();if(this.GetLinePoint(AU,AT,AS)){this.CreateMarker(AU,AT,this.mMarkerCollections[AU],AS);}}},CreateAllSeriesLabels:function AJ(AT){var Ae,Ad,AY,AX,AW,Ag,Ab,Af,Ac,AV,Aa,AS=this.mpABLPlotContext,AZ=AS.mABLOptions,AU=AS.mSeriesOptions,Ah=this.mGroupCount;if(this.mChartContextPtr.mIsGraphMatrix){AP.call(this,AT);return ;}Aa=this.mSeriesInfo.length;for(AY=0;AY<Aa;++AY){if(AU[this.mSeriesInfo[AY].mSeriesIndex].mShowDataLabels){Ae=new f.TripleId({ObjectId:AF.DssGraphDataText,SeriesId:this.mSeriesInfo[AY].mSeriesId});Ad=new f.GraphCollectionObject({TripleId:Ae,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Ad);for(AX=0;AX<Ah;++AX){AW=this.createRiserLabel(AY,AX,Ad);if(AW!==null){Ag=new f.Point2D();Ab=new f.Point2D();this.GetMinMaxPoint(AY,AX,Ag,Ab);this.MoveLabel(AX,AW,Ab,Ag,AY);}}}}if((AZ.mMajorGraphType===p.MGT_LINE)&&(AZ.mLayout===Q.LO_STACKED)&&(!AZ.mShowCumulate)&&(AZ.mShowValue)&&(AZ.mShowTotal)){Ae=new f.TripleId({ObjectId:AF.DssGraphDataTextStackTotal,SeriesId:this.mTripleId.mSeriesId});Ad=new f.GraphCollectionObject({TripleId:Ae,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Ad);if(AZ.mDualAxes){for(AY=0;AY<Ah;++AY){Af=this.CreateTotalLabel(F.VA_Y1,AY,Ad);Ac=this.CreateTotalLabel(F.VA_Y2,AY,Ad);if(Af!==null){Ag=new f.Point2D();Ab=new f.Point2D();AV=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AY);this.GetMinMaxPoint(AV,AY,Ag,Ab);this.MoveLabel(AY,Af,Ab,Ag,AV);}if(Ac!==null){Ag=new f.Point2D();Ab=new f.Point2D();AV=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y2,AY);this.GetMinMaxPoint(AV,AY,Ag,Ab);this.MoveLabel(AY,Ac,Ab,Ag,AV);}}}else{for(AY=0;AY<Ah;++AY){AW=this.CreateTotalLabel(F.VA_Y1,AY,Ad);if(AW!==null){Ag=new f.Point2D();Ab=new f.Point2D();AV=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AY);this.GetMinMaxPoint(AV,AY,Ag,Ab);this.MoveLabel(AY,AW,Ab,Ag,AV);}}}}},CreateMarker:function AN(AT,AU,AV,AY){var AS=this.mChartContextPtr,AW,Ab,AX;AW=new f.TripleId({ObjectId:AF.DssGraphDataMarker,SeriesId:this.mSeriesInfo[AT].mSeriesId,GroupId:AU});if(AS.mIsTimeSeriesChart){var Aa=this.GetData(AT,AU-1);var AZ=this.GetData(AT,AU+1);if((AU>0&&Aa!==null)||(AU<this.mGroupCount-1&&AZ!==null)){return ;}Ab=4;AX=new f.MarkerObject({TripleId:AW,GraphObjectManager:this,MarkerPosition:AY,MarkerShape:AG.DssGraphMarkerShapeCircle,IsIsometric:true,MarkerSize:Ab,GraphCollectionObject:AV,IsDialogSize:false});AV.AddGraphObject(AX);this.mGraphObjectList.push(AX);}else{if(AS.mIsGraphMatrix){this.CreateOneDataMarker(AT,AU,AV,AY,AU);}else{}}},GetMinMaxPoint:function AQ(AX,AW,AU,AV){var AT,AY,AS;AT=new f.Point2D();if(!this.GetFinalLinePoint(AX,AW,AT,false)){return ;}AY=this.mChartContextPtr.dialogSizeToPixelSize(this.mLineSeriesOptions[AX].mMarkerSize);AS=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AX].mValueAxis].IsReverseOrder();if(this.mIsVertical){if(AS){AU.Reset(AT.x,AT.y-AY);AV.Reset(AT.x,AT.y+AY);}else{AU.Reset(AT.x,AT.y+AY);AV.Reset(AT.x,AT.y-AY);}}else{if(AS){AU.Reset(AT.x+AY,AT.y);AV.Reset(AT.x-AY,AT.y);}else{AU.Reset(AT.x-AY,AT.y);AV.Reset(AT.x+AY,AT.y);}}},GetPointPair:function q(AV,AT,AU,AS){return this.GetLinePoint(AV,AT-1,AU)&&this.GetLinePoint(AV,AT,AS);},GenerateOrderedDepthLine:function s(AU,AS,AT){},GenerateInterpolationFrame:function X(AT){var AW,AU,AS,AV;this.mProgress=AT;AW=this.mGraphObjectList.length;AS=this.mGraphObjectList.concat();this.mGraphObjectList.splice(0,AW);for(AU=0;AU<AW;++AU){AV=AS[AU];if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AV.SetAnimationEnable(true);}AV.SetProgress(AT);this.GenerateFrameInOnePlot(AV,AT<0.5);}this.mGraphObjectList=AS.concat();this._super(AT);},GenerateFrameInOnePlot:function k(Ab,Ac){var AU=this.mChartContextPtr,AZ=AU.GetGraphMatrixContext(),AT=this.mpABLPlotContext,AX=AT.mABLOptions,AW,Ag,Ae,AY,AS,Ad=this.mGroupCount;if(this.mIsByValueAxis){var Aa=F.VA_BOTH;if(AX.mLayout===Q.LO_STACKED){if(AX.mCurvedLines){this.GenerateByValueAxisAndGroup(Aa,-1);}else{Ag=this.IsReverseGroupOrder();for(AW=1;AW<this.mGroupCount;++AW){Ae=Ag?Ad-AW:AW;this.GenerateByValueAxisAndGroup(Aa,Ae);}}}else{var Af=this.mSeriesInfo,AV=this.mSeriesInfo.length;for(AW=0;AW<AV;++AW){if(Af[AW].mValueAxis===Aa){this.GenerateMapAndListForSeries(AW);}}}}else{if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){AY=this.mSeriesInfo.length;for(AW=0;AW<AY;++AW){if(AX.mShowLines){this.GenerateMapAndListForSeries(AW);}if(!(AU.mIsGraphMatrix&&AZ.isPieOrRingShape())){this.CreateSeriesMarkers(AW);this.mHasCreatedMarkers=true;}}}else{if(AX.mShowLines){if(AX.mCurvedLines){this.GenerateByValueAxisAndGroup(F.VA_Y2,-1);this.GenerateByValueAxisAndGroup(F.VA_Y1,-1);}else{Ag=this.IsReverseGroupOrder();for(AW=1;AW<Ad;++AW){Ae=Ag?Ad-AW:AW;this.GenerateByValueAxisAndGroup(F.VA_Y2,Ae);}for(AW=1;AW<Ad;++AW){Ae=Ag?Ad-AW:AW;this.GenerateByValueAxisAndGroup(F.VA_Y1,Ae);}}}}}if(AU.mIsGraphMatrix===false){if(!this.mHasCreatedMarkers){AY=this.mSeriesInfo.length;for(AW=0;AW<AY;++AW){this.CreateSeriesMarkers(AW);}}}AS=this.mGraphObjectList.length;for(AW=0;AW<AS;++AW){Ab.AddGraphObject(this.mGraphObjectList[AW],Ac);}this.mGraphObjectList.splice(0,this.mGraphObjectList.length);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumValueAxis","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","ValuePlot","GraphObjectManager");var d=mstrmojo.chart,Z=d.enums,B=Z.EnumGraphMajorType,D=Z.EnumAxisDirection,A=Z.EnumOrientation,c=Z.EnumValueAxis,f=Z.EnumDSSGraphObjectManager,Y=d.gNullTripleId,T=mstrmojo.chart.model,h=T.enums,J=h.EnumDSSGraphType,K=h.EnumDSSGraphProperty,M=h.EnumDSSGraphObject;var G=new d.Rect2D(),I=new d.Rect2D();function F(j){var k=this.mChartContextPtr;return k.mirrorPrimaryInBubbleScatter(j);}function P(k,j,l){var n=this.mChartContextPtr;if(n.mIsGraphMatrix===false){return k;}if(k==="X1"||k==="Y1"){if(F.call(this,l)){k=k[0]+"2";j=(k==="X2")?4:2;}}return{Key:k,Index:j};}function N(){var j=this.mChartContextPtr.GetGraphType();return((j===J.DssGraphTypeDualAxis_X_Y_Scatter)||(j===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels)||(j===J.DssGraphTypeBubble_DualAxis)||(j===J.DssGraphTypeBubble_DualAxis_With_Labels));}function b(){return(this.mChartAreaOptions.orientation===A.OR_VERTICAL);}function O(p,n){var k=this.Y1Axis[n],q,o=new d.Rect2D({Rect2D:p}),l,r,j;k.TrimDeviceDataArea(o);k.SetDeviceDataArea(o);l=new d.Rect2D({Rect2D:o});k.AdjustDeviceDataArea(l,true);r=new d.Rect2D({Rect2D:l});if(N.call(this)){q=this.Y2Axis[n];q.TrimDeviceDataArea(o);q.SetDeviceDataArea(o);j=new d.Rect2D({Rect2D:o});q.AdjustDeviceDataArea(j,true);this.RectangleUnion(l,j,r);}k.UpdateTitleAndLabelArea(r);if(N.call(this)){q.UpdateTitleAndLabelArea(r);}}function C(k,l){var j=0,n=[this.XAxis,this.Y1Axis,this.Y2Axis];if(((l===1||l===2)&&b.call(this))||(l===0&&!b.call(this))){j=k;}return n[l][j];}function E(t,y){var n=0,s=0,o=Number.MAX_VALUE,x=-o,l,w,r=0,u=[],q=0,AB,k,j,AA=false;if(this.mChartContextPtr.mIsUniformAxisMode){var p=this.mChartContextPtr.getUniformAxisContext(),z=p.ValueAxis;switch(y){case 0:o=z.X1.Min;x=z.X1.Max;l=z.X1.Metrics.concat();break;case 1:o=z.Y1.Min;x=z.Y1.Max;l=z.Y1.Metrics.concat();break;case 2:o=z.Y2.Min;x=z.Y2.Max;l=z.Y2.Metrics.concat();break;case 3:o=z.Z.Min;x=z.Z.Max;l=[];break;case 4:o=z.X2.Min;x=z.X2.Max;l=z.X2.Metrics.concat();break;default:o=z.Y1.Min;x=z.Y1.Max;l=z.Y1.Metrics.concat();break;}return{Min:o,Max:x,Metrics:l};}if(y===1||y===2){s=1;}else{if(y===3){s=2;}}w=this.mDatasetPtr.GetGroupCount();if(t===-3){r=this.mDatasetPtr.GetSeriesCount();for(n=0;n<r;++n){u.push(n);}}else{u=this.mChartAreaOptions.seriesDistribution[t];}AB=u.length;for(n=0;n<w;++n){for(q=0;q<AB;++q){if((y===0||y===3)||((y===1||y===2)&&((y-1)===this.VecSeriesVAIndex[u[q]]))){k=this.mDatasetPtr.GetData(u[q],n,s);}if(k!==null){j=k;if(!AA){AA=true;}if(o>j){o=j;}if(x<j){x=j;}}}}if(o>x){o=0;x=0;}if(AA){return{Min:o,Max:x};}}function L(r){var k=[],j,n,q=this.Y1Axis.length,l,p,o;j=N.call(this);for(n=0;n<q;++n){p=new d.Rect2D({Rect2D:r});o=new d.Rect2D({Rect2D:r});if(j){this.Y2Axis[n].ReserveTitleAndLabels(o,this.mBottomMargin,this.mTopMargin);p=o;p.y=r.y;p.height=r.height;}this.Y1Axis[n].ReserveTitleAndLabels(p,this.mBottomMargin,this.mTopMargin);if(j){o=p;o.y=r.y;o.height=r.height;}this.Y1Axis[n].AdjustDeviceDataArea(p,false);k.push(p);if(j){this.Y2Axis[n].AdjustDeviceDataArea(o,false);}k.push(o);}l=k.length;I.ResetRect(k[0]);G.Reset(0,0,0,0);var s;for(n=1;n<l;++n){if(!this.RectangleIntersection(I,k[n],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function X(n){var p=[],l,j=this.XAxis.length,k,q,o;for(l=0;l<j;++l){o=this.XAxis[l];q=new d.Rect2D({Rect2D:n});o.ReserveTitleAndLabels(q,this.mLeftMargin,this.mRightMargin);o.AdjustDeviceDataArea(q,false);p.push(q);}I.ResetRect(p[0]);G.Reset(0,0,0,0);k=p.length;for(l=1;l<k;++l){if(!this.RectangleIntersection(I,p[l],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function S(p){var n,l,q=this.Y1Axis.length,k=this.XAxis.length,o=this.mChartAreaOptions.chartAreaNumber;for(n=0;n<q;++n){if(b.call(this)){this.Y1Axis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);}}else{for(l=0;l<o;++l){this.Y1Axis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);}}}}for(n=0;n<k;++n){if(b.call(this)){for(l=0;l<o;++l){this.XAxis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);}}else{this.XAxis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);}}}function e(j){}function U(){var l,n=this.Y1Axis.length,j=this.Y2Axis.length,k=this.XAxis.length;for(l=0;l<n;++l){this.Y1Axis[l].generateAxisLine(this.mGraphObjectList);}if(N.call(this)){for(l=0;l<j;++l){this.Y2Axis[l].generateAxisLine(this.mGraphObjectList);}}for(l=0;l<k;++l){this.XAxis[l].generateAxisLine(this.mGraphObjectList);}}function Q(){var l=this.mChartContextPtr.GetGraphMajorType(),j=0,k;if(l===B.GMT_SCATTER||l===B.GMT_BUBBLE){j=this.mDatasetPtr.GetSeriesCount();k=this.mChartContextPtr.GetGraphType();if(k===J.DssGraphTypeX_Y_Scatter||k===J.DssGraphTypeX_Y_Scatter_with_Labels||k===J.DssGraphTypeBubble||k===J.DssGraphTypeBubble_With_Labels){return j>=1;}if(k===J.DssGraphTypeDualAxis_X_Y_Scatter||k===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels||k===J.DssGraphTypeBubble_DualAxis||k===J.DssGraphTypeBubble_DualAxis_With_Labels){return j>=2;}}return false;}function H(l,r,s,j){var p=this.mChartContextPtr.getAxisTripleId(l),n=new d.ValueAxis({TripleId:p,GraphObjectManager:this,Min:r.Min,Max:r.Max,LargerGridInterval:false,PrimaryMetricIndex:r.Metrics,IsPercent:false,AxisDirection:s,IsShown:j,Key:l});var k=this.mChartContextPtr;if(k.mIsGraphMatrix&&n.mIsUniformAxis===false){var o=k.getUniformAxisInformation(p.mObjectId),q=o.CondenseEnforced;n.checkCondense(!!q);}return n;}function g(l,k,p,r,n,j){var q=E.call(this,k,p);if(q){var o=H.call(this,l,q,r,n);j.push(o);this.mGraphObjectManagerList.push(o);}}mstrmojo.chart.ValuePlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.ValuePlotManager",ValuePlot:[],XAxis:[],Y1Axis:[],Y2Axis:[],ZAxis:[],VecSeriesVAIndex:[],init:function a(j){this._super(j);this.ValuePlot=[];this.XAxis=[];this.Y1Axis=[];this.Y2Axis=[];this.ZAxis=[];this.VecSeriesVAIndex=[];},Draw:function W(){var o,l=0,p=[this.XAxis,this.Y2Axis,this.Y1Axis],n,k=this.ValuePlot;d.GraphObjectManager.prototype.Draw.apply(this,[]);for(o=0;o<=2;++o){n=p[o];for(l=0;l<n.length;++l){n[l].Draw();}}for(o=0;o<k.length;++o){k[o].Draw();}},GenerateMapAndList:function V(){var o=this.mChartContextPtr,p=this.mPlotArea,AF=this.mGraphObjectManagerList,q=o.isUADataAreaOutput(),y,AA,u,w,k,AC,AD,AE=0,l,r,j,AH,AG,z,n,t=[],x,s;if(p.width<=0||p.height<=0){return ;}this.LoadProperties();if(!Q.call(this)){return ;}if(b.call(this)){AA=P.call(this,"X1",0,true);g.call(this,AA.Key,-3,AA.Index,D.AD_X,!q,this.XAxis);for(AE=0;AE<this.mChartAreaOptions.chartAreaNumber;++AE){AA=P.call(this,"Y1",1,false);g.call(this,AA.Key,AE,AA.Index,D.AD_Y,!q,this.Y1Axis);if(N.call(this)){AA=P.call(this,"Y2",2,false);g.call(this,AA.Key,AE,AA.Index,D.AD_Y,!q,this.Y2Axis);}}}else{AA=P.call(this,"Y1",1,false);g.call(this,AA.Key,-3,AA.Index,D.AD_Y,!q,this.Y1Axis);if(N.call(this)){AA=P.call(this,"Y2",2,false);g.call(this,AA.Key,-3,AA.Index,D.AD_Y,!q,this.Y2Axis);}for(AE=0;AE<this.mChartAreaOptions.chartAreaNumber;++AE){AA=P.call(this,"X1",0,true);g.call(this,AA.Key,AE,AA.Index,D.AD_X,!q,this.XAxis);}}if(o.GetGraphMajorType()===B.GMT_BUBBLE){if(o.isUADataAreaOutput()){l=o.getUniformAxisContext();y={Metrics:[]};y.Min=l.ValueAxis.Z.Min;y.Max=l.ValueAxis.Z.Max;}else{y=E.call(this,-3,3);}if(y){AC=H.call(this,"Z",y,D.AD_Z,false);this.ZAxis.push(AC);AF.push(AC);}}j=X.call(this,p);this.mLeftMargin+=j.x-p.x;this.mRightMargin+=p.x+p.width-(j.x+j.width);this.mTopMargin+=j.y-p.y;this.mBottomMargin+=p.y+p.height-(j.y+j.height);j.width=Math.max(0,j.width);j.height=Math.max(0,j.height);r=L.call(this,j);r.width=Math.max(0,r.width);r.height=Math.max(0,r.height);AG=p.y+Math.max(j.y-p.y,r.y-j.y);z=p.y+p.height-Math.max(p.y+p.height-(j.y+j.height),j.y+j.height-(r.y+r.height))-AG;r.y=AG;r.height=z;AH=p.x+Math.max(j.x-p.x,r.x-j.x);n=p.x+p.width-Math.max(p.x+p.width-(j.x+j.width),j.x+j.width-(r.x+r.width))-AH;r.x=AH;r.width=n;if(o.mManualLayoutMode&&!this.mRecalculateFrame){r=p;}else{}this.CalculateChartAreas(r,t);if(o.isUADataAreaOutput()){var AB=o.getUniformAxisContext();t[0].x=AB.mDataAreaLeftMargin;t[0].y=AB.mDataAreaTopMargin;t[0].width=o.mGraphWidth-t[0].x-AB.mDataAreaRightMargin;t[0].height=o.mGraphHeight-t[0].y-AB.mDataAreaBottomMargin;r=t[0];}if(b.call(this)){j=new d.Rect2D({Rect2D:r});u=this.XAxis[0];u.TrimDeviceDataArea(j);u.SetDeviceDataArea(j);u.AdjustDeviceDataArea(j,true);u.UpdateTitleAndLabelArea(j);for(AE=0;AE<this.mChartAreaOptions.chartAreaNumber;++AE){O.call(this,t[AE],AE);}}else{O.call(this,r,0);for(AE=0;AE<this.mChartAreaOptions.chartAreaNumber;++AE){u=this.XAxis[AE];j=new d.Rect2D({Rect2D:t[AE]});u.TrimDeviceDataArea(j);u.SetDeviceDataArea(j);u.AdjustDeviceDataArea(j,true);u.UpdateTitleAndLabelArea(j);}}if(o.mManualLayoutMode&&!this.mRecalculateFrame){r=p;}for(AE=0;AE<this.mChartAreaOptions.chartAreaNumber;++AE){if(!o.mIsGraphMatrix){AD=new d.TripleId({ObjectId:M.DssGraphFrame,SeriesId:AE});x=new d.RectangleObject({TripleId:AD,GraphObjectManager:this,Area:t[AE]});this.AddToMapAndList(x);}e.call(this,t);S.call(this,t);U.call(this);u=C.call(this,AE,0);w=C.call(this,AE,1);if(N.call(this)){k=C.call(this,AE,2);}if(o.mIsGraphMatrix){AD=d.PlotId0;}else{AD=new d.TripleId({ObjectId:f.DssPlot,SeriesId:AE});}s=new d.ValuePlot({TripleId:AD,GraphObjectManager:this,Area:t[AE]});this.ValuePlot.push(s);AF.push(s);s.SetDataset(this.mDatasetPtr);s.mLegendPtr=this.mLegendPtr;s.AssignValueAxis(u,0);s.AssignValueAxis(w,1);if(N.call(this)){s.AssignValueAxis(k,2);}if(o.GetGraphMajorType()===B.GMT_BUBBLE){s.AssignValueAxis(this.ZAxis[0],3);}s.AssignSeriesInfo(this.mChartAreaOptions.seriesDistribution[AE],this.VecSeriesVAIndex);s.GenerateMapAndList();}if(o.isUADataAreaOutput()){l=o.getUniformAxisContext();t[0].x=l.mDataAreaLeftMargin;t[0].y=l.mDataAreaTopMargin;t[0].width=o.mGraphWidth-t[0].x-l.mDataAreaRightMargin;t[0].height=o.mGraphHeight-t[0].y-l.mDataAreaBottomMargin;r.ResetRect(t[0]);}},LoadProperties:function R(){var q=this.mChartContextPtr,l=this.VecSeriesVAIndex,k,j,n,p,o;this._super();k=this.mDatasetPtr.GetSeriesCount();l.splice(0,l.length);for(j=0;j<k;++j){p=new d.TripleId({ObjectId:M.DssGraphRiser,SeriesId:j});l[j]=c.VA_Y1;if(N.call(this)){o=q.GetProperty(K.DssGraph2DSplitYAutomatic,Y);if(o){n=q.GetProperty(K.DssGraph2DSDSplitY,p);if(n){l[j]=(n===false)?c.VA_Y1:c.VA_Y2;}}else{l[j]=(j%2===0)?c.VA_Y1:c.VA_Y2;}}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","CategoryAxis","PlotManager","GridChartPlot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,K=O.enums,A=K.EnumOrientation,E=K.EnumDSSGraphObjectManager,H=O.model,P=H.enums,D=P.EnumDSSGraphProperty;var C=new O.Rect2D(),B=new O.Rect2D();mstrmojo.chart.PlotOption=mstrmojo.provide("mstrmojo.chart.PlotOption",{});function R(S){var T,U;if(this.mChartContextPtr.mIsGraphMatrix){U=O.PlotId0;}else{U=new O.TripleId();U.mObjectId=E.DssPlot;U.mSeriesId=S;}T=new O.GridChartPlot({TripleId:U,GraphObjectManager:this,Area:O.gEmptyRect});T.SetDataset(this.mDatasetPtr);return T;}function Q(U,S){var T=this.mChartAreaOptions.chartAreaNumber,W=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet,V;W[0].SetDeviceDataArea(U);for(V=0;V<T;++V){this.mPlots[V].AssignDataArea(S[V],!this.mIsReuseYAxis);}}function N(Z,V){if(V){var X=new O.Rect2D({Rect2D:Z}),a=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;a[0].AdjustTitleArea(X);a[0].AdjustDataArea(X,0,0,true);return X;}var Y=!(this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet,b=Y.length,S=[],W,U;this.CalculateChartAreas(Z,S);for(U=0;U<b;++U){Y[U].AdjustTitleArea(S[U]);Y[U].AdjustDataArea(S[U],0,0,true);}W=S;var T=W.length;C.Reset(0,0,0,0);B.ResetRect(W[0]);for(U=1;U<T;++U){if(!this.RectangleIntersection(B,W[U],C)){B.Reset(0,0,0,0);break;}B.ResetRect(C);}return B;}function F(S){var T=new O.CategoryAxisInfo(),U,X,V,W=this.mDatasetPtr.GetSeriesByColumn();if(this.mIsReuseYAxis){T.ToY(!W);}else{T.ToX(W);}U=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;if(U.length===0){X=new O.CategoryAxis({TripleId:T.mId,GraphObjectManager:this,AxisLabelsLocation:T.mAxisLabelsLocation,AxisDirection:T.mAxisDirection});X.SetDataset(this.mDatasetPtr);U.push(X);}this.mPlots[S].AssignAxis(U[0],this.mIsReuseYAxis);if(this.mIsReuseYAxis){T.ToX(W);}else{T.ToY(!W);}T.mId.mSeriesId=S;V=(!this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet;X=new O.CategoryAxis({TripleId:T.mId,GraphObjectManager:this,AxisLabelsLocation:T.mAxisLabelsLocation,AxisDirection:T.mAxisDirection});X.SetDataset(this.mDatasetPtr);V.push(X);this.mPlots[S].AssignAxis(V[S],!this.mIsReuseYAxis);}function M(){var S=this.mChartContextPtr.GetGraphMatrixContext();if(S){this.mPlotOption.mIsAutoFitMode=!S.mHasSizeBy;this.mPlotOption.mMaxDataVal=S.mMaxSizeVal;this.mPlotOption.mMinDataVal=S.mMinSizeVal;this.mPlotOption.mMarkerShape=S.mMarkerShape;}}mstrmojo.chart.GridChartPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.GridChartPlotManager",mPlots:null,mXAxisSet:null,mYAxisSet:null,mIsReuseYAxis:false,mPlotOption:{},init:function L(S){this._super(S);this.mPlots=[];this.mXAxisSet=[];this.mYAxisSet=[];this.mPlotOption={mIsAutoFitMode:false,mMaxDataVal:100000,mMinDataVal:0,mMarkerShape:4};this.mIsReuseYAxis=false;},Draw:function J(){this._super();var U=this.mYAxisSet.length,V=this.mXAxisSet.length,T=this.mPlots.length,S;for(S=0;S<U;++S){this.mYAxisSet[S].Draw();}for(S=0;S<V;++S){this.mXAxisSet[S].Draw();}for(S=0;S<T;++S){this.mPlots[S].Draw();}},LoadProperties:function G(){this._super();this.mIsReuseYAxis=(this.mChartAreaOptions.mOrientation===A.OR_HORIZONTAL);M.call(this);},GenerateMapAndList:function I(){var S=this.mPlotArea,d=this.mChartAreaOptions,T=this.mGraphObjectManagerList,U=this.mChartContextPtr,Y,a;if(S.width*S.height===0){return ;}if(this.mDatasetPtr===null||this.mDatasetPtr===undefined){return ;}this.LoadProperties();var e=d.chartAreaNumber;for(Y=0;Y<e;++Y){var W=R.call(this,Y);W.AssignSeries(d.seriesDistribution[Y]);W.mLegendPtr=this.mLegendPtr;this.mPlots.push(W);F.call(this,Y);}a=this.mPlots.length;for(Y=0;Y<a;++Y){T.push(this.mPlots[Y]);}a=this.mXAxisSet.length;for(Y=0;Y<a;++Y){T.push(this.mXAxisSet[Y]);}a=this.mYAxisSet.length;for(Y=0;Y<a;++Y){T.push(this.mYAxisSet[Y]);}var c=N.call(this,S,true),V=N.call(this,c,false);if(V.width<0){V.width=0;}if(V.height<0){V.height=0;}var b=S.y+Math.max(c.y-S.y,V.y-c.y),f=S.y+S.height-Math.max(S.y+S.height-(c.y+c.height),c.y+c.height-(V.y+V.height))-b;V.y=b;V.height=f;if(U.mManualLayoutMode&&!this.mRecalculateFrame){V=S;}else{}var X=[];this.CalculateChartAreas(V,X);if(U.isUADataAreaOutput()){var Z=U.getUniformAxisContext();X[0].x=Z.mDataAreaLeftMargin;X[0].y=Z.mDataAreaTopMargin;X[0].width=U.mGraphWidth-X[0].x-Z.mDataAreaRightMargin;X[0].height=U.mGraphHeight-X[0].y-Z.mDataAreaBottomMargin;this.mXAxisSet[0].TrimAxisPadding(X[0],false);this.mYAxisSet[0].TrimAxisPadding(X[0],false);V=X[0];}Q.call(this,V,X);a=this.mPlots.length;for(Y=0;Y<a;++Y){this.mPlots[Y].GenerateMapAndList();}a=this.mXAxisSet.length;for(Y=0;Y<a;++Y){this.mXAxisSet[Y].GenerateMapAndList();}a=this.mYAxisSet.length;for(Y=0;Y<a;++Y){this.mYAxisSet[Y].GenerateMapAndList();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","StraightLineObject","MarkerObject","SeriesRenderer","BarSeriesRenderer","Plot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumOrientation","EnumGraphMatrixThemeType","EnumValueAxis","EnumFontRotation","EnumFontRotation","EnumGenericDirection");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var W=mstrmojo.chart,J=W.enums,F=J.EnumOrientation,V=J.EnumGraphMatrixThemeType,B=J.EnumCollectionType,E=J.EnumFontRotation,P=mstrmojo.chart.model,L=P.enums,b=L.EnumDSSGraphDataTextPosition,j=L.EnumDSSGraphObject;var R=W.ChartConstants,G=mstrmojo.chart.common.Utility,a=0.9,K=5,Z=0,Q=2,d=3,M=4,D=100,X=10,C=3,f=1,I=1;function k(y){var r={},w,q,p=[0.1,0.2,0.3],t,x,u,s=this.mChartContextPtr;if(this.oneGroupBandColors){return this.oneGroupBandColors;}this.oneGroupBandColors=null;switch(this.bandOptions.ColorMode){case Q:w=7697781;break;case Z:t=new W.TripleId([j.DssGraphRiser,C,y]);x=this.GetGraphObject(t,true);if(x&&x.mFormatFillPtr){u=x.mFormatFillPtr.mSimpleColor;}else{u=s.GetColorValue(t,0,true);}w=u;break;case M:q=[16711680,65280,16776960];break;case d:q=[255,16776960,65280];break;default:break;}if(w){r.Color=w;}if(q){if(this.bandOptions.DescentLayout){r.Colors=q.reverse();}else{r.Colors=q;}}r.Alphas=p;this.oneGroupBandColors=r;return r;}function O(AA,q){q=q||0;var y,AC,s;y=this.mDatasetPtr.getBandDivision(AA,q);if(y.Metrics&&y.Metrics.length){y=y.Metrics;AC=[];var z,r=this.mpABLPlotContext,w=this.mSeriesInfo[q].mValueAxis,AB=r.mValueAxis[w],u=AB.mMinTick,p=AB.mMaxTick-u,t=y.length;for(s=0;s<t;++s){if(s===t-1){z=1;}else{z=y[s];z=Math.max(z-u/p,0);z=Math.min(z,1);}AC.push(z);}}else{if(y.Ratios&&y.Ratios.length){AC=y.Ratios;}}return(AC||[3/11,6/11,1]);}function A(z,q){q=q||0;if(this.oneGroupBandValues){return this.oneGroupBandValues;}var t=O.call(this,z,q),r=this.mpABLPlotContext,x=this.mSeriesInfo[q].mValueAxis,AA=r.mValueAxis[x],w=AA.mMinTick,p=AA.mMaxTick-w,y=[],s,u=t.length;for(s=0;s<u;++s){y.push(w+t[s]*p);}this.oneGroupBandValues=y;return y;}function Y(){if(this.mBarWidth<=0){var u=this.mBarOptions,w=this.bandOptions;if(this.mBarColumns===-1){u.mGapWidth=0;this.mBarColumns=1;var q=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),t=w.Width.Padding;this.mBarWidth=(q-2*t)*w.Width.Ratio;this.mBarWidth=Math.round(this.mBarWidth);var s=this.bandOptions.Width.Limit;this.mBarWidth=Math.min(this.mBarWidth,s.Max);this.mBarWidth=Math.max(this.mBarWidth,s.Min);this.mBarWidth=Math.round(this.mBarWidth);w.Width.Padding=t=Math.max((q-this.mBarWidth)/2,0);this.mSpaceBetweenRiser=0;this.mSpaceBetweenGroup=t*2;}}var p=this.mBarWidth,r;if(G.isIntegar(p)){r=p%3;this.bulletWidth=(p-r)/3+r;}else{this.bulletWidth=p/3;}}function o(AC,AA){var AH=AC.seriesInfoID,y=AH>=C&&AH<C+f,t=AA.mRect,w=0,r=this.mpABLPlotContext,AB=r.mABLOptions,AF=r.mCategoryAxisPtr,x=AC.groupID;this.hPostProcessOneBar(AC,AA);if(y){switch(AB.mOrientation){case F.OR_VERTICAL:w=Math.abs(AF.getGroupMiddlePos(x)-t.GetBottomMiddle().x);t.x+=w;break;case F.OR_HORIZONTAL:w=Math.abs(AF.getGroupMiddlePos(x)-t.GetLeftMiddle().y);t.y-=w;break;}}else{var u=this.mSeriesInfo[AC.seriesInfoID].mValueAxis,AG=r.mValueAxis[u],q=A.call(this,AC.groupID),p=AC.seriesInfoID,AE=q[p],s=AG.ValueToPosition(AE),AI=AG.ValueToPosition(AG.mMinTick);switch(AB.mOrientation){case F.OR_VERTICAL:if(AC.seriesInfoID!==0){AE=q[p-1];AI=AG.ValueToPosition(AE);}t.y=s;t.height=Math.abs(s-AI);break;case F.OR_HORIZONTAL:if(AC.seriesInfoID!==0){AE=q[p-1];AI=AG.ValueToPosition(AE);}t.x=AI;t.width=Math.abs(s-AI);break;}var z=AA.mFormatFillPtr,AD=k.call(this,AC.groupID);z.mSimpleColor=AD.Color||AD.Colors[AC.seriesInfoID]||255;z.mAlpha=AD.Alphas[AC.seriesInfoID]*255||255;}}function S(s,x){var t=s.seriesInfoID,u=t>=C&&t<C+f,z={Bar:null,AddToMapAndList:false};var q=this.PrepareData(s,u);if(q===null||q===undefined){return z;}var w=this.hPrepareRect(s,q,u?this.bulletWidth:this.mBarWidth),y=w.Rect,p=w.AboveBase;if(u){if(!this.hUpdateBarRect(s,y,p,q)){return z;}}if(y.width<=0||y.height<=0){return z;}if(!x){var r=this.hPrepareRectangleObject(s,y,p);if(r){o.call(this,s,r);}z.Bar=r;z.AddToMapAndList=true;}return z;}function U(AB,AE,x){x=x||0;AE=AE||false;if(AE){return ;}var t=this.mChartContextPtr,AH=t.GetGraphMatrixContext(),q=this.mpABLPlotContext,AD=this.mDatasetPtr.GetData(AB.seriesInfoID,AB.groupID),w=this.mSeriesInfo[x].mValueAxis,AG=q.mValueAxis[w],z=q.mABLOptions,AA,AC,AF=[],s=new W.Point2D(),r=new W.Point2D(),u=new W.TripleId([j.DssGraphRiser,0,AB.groupID]),AI=new W.TripleId([j.DssGraphDataLine,AB.seriesInfoID,AB.groupID]);AC=this.GetGraphObject(u);if(AC){var p=AC.GetBoundingRect();switch(z.mOrientation){case F.OR_VERTICAL:s.x=p.GetLeftMiddle().x;r.x=p.GetRightMiddle().x;s.y=r.y=AG.ValueToPosition(AD);break;case F.OR_HORIZONTAL:s.y=p.GetTopMiddle().y;r.y=p.GetBottomMiddle().y;s.x=r.x=AG.ValueToPosition(AD);break;}}else{var y=this.GetRiserStartPosAndSize(AB);switch(z.mOrientation){case F.OR_VERTICAL:s.x=y.Start;r.x=y.Start+y.Size;s.y=r.y=AG.ValueToPosition(AD);break;case F.OR_HORIZONTAL:s.y=y.Start;r.y=y.Start+y.Size;s.x=r.x=AG.ValueToPosition(AD);break;}}AF.push(s);AF.push(r);AA=new W.StraightLineObject({TripleId:AI,GraphObjectManager:this,StartPoint:AF[0],EndPoint:AF[1],GraphCollectionObject:null});if(AA){this.AddToMapAndList(AA);}}function H(y,AB,AE,r,AH,s){var u,w,AC,AD,t=this.mChartContextPtr,x=this.mIsVertical,AF;r=r||false;u=x?AE.GetTopMiddle():AE.GetRightMiddle();w=x?AE.GetBottomMiddle():AE.GetLeftMiddle();AC=false;AD=this.GetData(AB.seriesInfoID,AB.groupID);if(AD!==null){AF=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AB.seriesInfoID].mValueAxis];AC=(AD<0)^AF.IsReverseOrder();}else{return false;}if(AH===undefined){AH=0;}if(s===undefined){s=this.mIsVertical?t.mGraphHeight:t.mGraphWidth;}var p=y.GetBoundingRect(),AG=t.GetGraphMatrixContext();if(AC){u.swapPoints(w);AH=0;s=AF.GetBasePosition();}var AA=AG.getPadding(R.kLabelToChart),z=this.mpABLPlotContext.mABLOptions,q=z.mTextPosition;switch(q){case b.DssGraphDTPositionCenter:break;case b.DssGraphDTPositionInMin:case b.DssGraphDTPositionOutMax:if(r){if(AC){if(x){u.y-=AA;}else{u.x+=AA;}}else{if(x){u.y+=AA;}else{u.x-=AA;}}}else{if(AC){if(x){u.y+=AA;}else{u.x-=AA;}}else{if(x){u.y-=AA;}else{u.x+=AA;}}}break;case b.DssGraphDTPositionOutMin:case b.DssGraphDTPositionInMax:break;default:break;}this.MoveLabel(AB.groupID,y,u,w,AB.seriesInfoID);p=y.GetBoundingRect();return AG.checkLabelPaddingToBorder(p,AH,s,!this.mIsVertical);}function T(p,q){var r=q.rect;if(this.mIsVertical){return !(r.GetBottomMiddle().y>=p&&r.GetTopMiddle().y<=p);}return !(r.GetRightMiddle().x>=p&&r.GetLeftMiddle().x<=p);}function h(s,t,r,w){w=w||false;var q=new W.Rect2D({Rect:s}),p,u;if(this.mIsVertical){if(r){if(w){q.height-=Math.max(0,t-q.y);q.y=Math.max(t,q.y);}else{q.height+=Math.max(0,q.y-t);q.y=Math.min(t,q.y);}}else{if(w){q.height-=Math.max(0,t-q.y);}else{q.height+=Math.max(0,q.y-t);}}}else{if(r){if(w){q.width=t-q.x;}else{q.width=t-q.x;}}else{if(w){q.width-=Math.max(t-q.x,0);q.x=t;}else{q.width+=Math.max(q.x-t,0);q.x=t;}}}return{Valid:true,Rect:q,Low:p,High:u};}function l(AC){var AF=new W.TripleId({ObjectId:j.DssGraphRiser,SeriesId:this.mSeriesInfo[AC.seriesInfoID].mSeriesId,GroupId:AC.groupID}),x=I>0,u=x,z,AI,AM=this.GetGraphObject(AF),AJ,AL,AG;if(!AM){return null;}AI=AM.GetBoundingRect();AF.mObjectId=j.DssGraphDataText;if(this.mSGMapLabel[AF.mSeriesId]===undefined){this.mSGMapLabel[AF.mSeriesId]=new W.GraphCollectionObject({TripleId:AF,GraphObjectManager:this,CollectionType:B.CT_TEXT});}var AA=this.mSGMapLabel[AF.mSeriesId],AD=0,AE=true,t=this.mDatasetPtr.GetData(AF.mSeriesId,AF.mGroupId),w=this.createRiserLabel(AC.seriesInfoID,AC.groupID,AA);if(w===null){return null;}if(u){var s=this.mDatasetPtr.GetData(C+f,AF.mGroupId);if(s){if(s===0||s===t){u=false;}else{u=(s>0&&t>=0)||(s<0&&t<=0);if(u){AE=(s>t&&t>=0)||(s<t&&t<=0);}}}else{u=false;}}for(AJ=0;AJ<2;++AJ){if(z===true){return w;}if(AJ===1){w.SetRotation(E.FR_90);}z=H.call(this,w,AC,AI);if(u&&AE&&z){z=T.call(this,AD,w);if(!z){AL=h.call(this,AI,AD,(t>=0),false);if(AL.Valid){z=H.call(this,w,AC,AL.Rect,false,AL.High,AL.Low);}}}if(!z){var y=this.mpABLPlotContext.mABLOptions,p=y.mTextPosition,AH=p;y.mTextCollection=b.DssGraphDTPositionInMax;z=H.call(this,w,AC,AI,true);if(u&&!AE&&z){z=T.call(this,AD,w);if(!z){AL=h.call(this,AI,AD,(t>=0),true);if(AL.Valid){z=H.call(this,w,AC,AL.Rect,true,AL.High,AL.Low);}}}var r=true,AK=false;if(this.mIsVertical){AK=AI.height<=w.height;}else{AK=AI.width<=w.width;}if(r){AG=this.mChartContextPtr.getDefaultContrastColor();var AB=1,q=new W.FormatFont({Font:w.mFormatFontPtr});q.mStrokeColor=AG;if(AK){q.mFontStyle=AB;}w.mFormatFontPtr=q;}y.mTextCollection=AH;}}return w;}function N(AB,x,AD){var s=x,AC={groupID:AB,seriesInfoID:0},q=true,AF=true,y=true,p=true;var w,AE,AA;if(q){for(w=0;w<f;++w){AC.seriesInfoID=s[C+w];AE=S.call(this,AC,AD);if(AE.Bar===null){return ;}}}else{return ;}if(AF){for(w=0;w<C;++w){AC.seriesInfoID=s[w];AE=S.call(this,AC,AD);}}if(y){for(w=0;w<I;++w){AC.seriesInfoID=s[C+f+w];AA=U.call(this,AC,AD);}}if(p){for(w=0;w<f;++w){AC.seriesInfoID=s[C+w];var z=this.mpABLPlotContext.mABLOptions,u=z.mShowValue,t=this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AC.seriesInfoID].mSeriesIndex].mShowDataLabels;z.mShowValue=true;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AC.seriesInfoID].mSeriesIndex].mShowDataLabels=true;var r=l.call(this,AC);if(r){r.mTripleId.mSeriesID=C+f+I;this.AddToMapAndList(r);}z.mShowValue=u;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AC.seriesInfoID].mSeriesIndex].mShowDataLabels=t;}}}function g(w){var q=this.IsReverseGroupOrder(),r,u=[],p,s;var t=this.mDatasetPtr.GetGroupCount();for(s=0;s<t;++s){r=s;if(q){r=t-1-r;}u=this.GetSeriesOrderByType(r,u,w);p=u.length;A.call(this,r,w);k.call(this,r);N.call(this,r,u);this.oneGroupBandValues=null;this.oneGroupBandColors=null;}this.GenerateTrendLine();this.GenerateRefLine();}mstrmojo.chart.BulletSeriesRenderer=mstrmojo.declare(mstrmojo.chart.BarSeriesRenderer,null,{scriptClass:"mstrmojo.chart.BulletSeriesRenderer",bandOptions:null,bulletWidth:0,oneGroupBandValues:null,oneGroupBandColors:null,labelCollection:null,init:function n(p){this._super(p);this.bandOptions={DescentLayout:false,Width:{Ratio:a,Padding:K,Limit:{Max:D,Min:X}},ColorMode:Q,PositionByMetric:false};},GenerateByValueAxis:function e(p){this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();Y.call(this);if(this.mSeriesInfo.length===0){return ;}g.call(this,p);},PrepareData:function c(q,r){if(r){return this.hPrepareData(q);}var p=A.call(this,q.groupID);return p[q.seriesInfoID];}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","BarSeriesRenderer","AreaSeriesRenderer","LineSeriesRenderer","BulletSeriesRenderer","Plot","GraphObjectManager","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumMajorGraphType","EnumGraphSubType","EnumOrientation","EnumValueAxis","EnumAnchorPoint","EnumTrendLineIndex");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumShapeType","EnumDSSGraphObject");var R=mstrmojo.hash,f=mstrmojo.chart,Z=f.ChartConstants,M=f.enums,g=M.EnumMajorGraphType,O=M.EnumLayout,j=M.EnumGraphSubType,K=M.EnumOrientation,E=M.EnumValueAxis,a=M.EnumTrendLineIndex,p=M.EnumAnchorPoint,l=f.gNullTripleId,W=mstrmojo.chart.model,Q=W.enums,w=Q.EnumShapeType,q=Q.EnumDSSGraphType,t=Q.EnumDSSGraphProperty,S=Q.EnumDSSGraphDataTextShowType,u=Q.EnumDSSGraphObject,V=0,b=1,r=2,AD=1,N=2,AA=3,L=4;var AE=new f.TripleId();function AG(){var AH=this.mChartContextPtr,AI=this.mABLPlotContext,AL=AI.mABLOptions,AK,AP={positive:[],negative:[]},AM=this.mAreaSeriesRendererPtr,AQ=this.mBarSeriesRendererPtr,AO=this.mLineSeriesRendererPtr;if((AL.mLayout===O.LO_STACKED)||(AL.mLayout===O.LO_PERCENT)){if(AH.isCombinationChart()){var AN=this.mSeriesId,AJ=AN.length;for(AK=0;AK<AJ;++AK){if(AM){AP=AM.UpdateCumulateData(E.VA_Y1,AP,AN[AK]);}if(AQ){AP=AQ.UpdateCumulateData(E.VA_Y1,AP,AN[AK]);}if(AO){AP=AO.UpdateCumulateData(E.VA_Y1,AP,AN[AK]);}}if(AL.mDualAxes){AP={positive:[],negative:[]};for(AK=0;AK<AJ;++AK){if(AM){AP=AM.UpdateCumulateData(E.VA_Y2,AP,AN[AK]);}if(AQ){AP=AQ.UpdateCumulateData(E.VA_Y2,AP,AN[AK]);}if(AO){AP=AO.UpdateCumulateData(E.VA_Y2,AP,AN[AK]);}}}}else{if(AM){AP=AM.UpdateCumulateData(E.VA_Y1,AP);}if(AQ){AP={positive:[],negative:[]};AP=AQ.UpdateCumulateData(E.VA_Y1,AP);}if(AO){AP={positive:[],negative:[]};AO.UpdateCumulateData(E.VA_Y1,AP);}if(AL.mDualAxes){AP={positive:[],negative:[]};if(AM){AP=AM.UpdateCumulateData(E.VA_Y2,AP);}if(AQ){AP={positive:[],negative:[]};AP=AQ.UpdateCumulateData(E.VA_Y2,AP);}if(AO){AP={positive:[],negative:[]};AO.UpdateCumulateData(E.VA_Y2,AP);}}}}}function U(){var AL=[],AJ=[this.mAreaSeriesRendererPtr,this.mBarSeriesRendererPtr,this.mLineSeriesRendererPtr],AH=AJ.length,AI,AK=0;for(AI=0;AI<AH;AI++){if(AJ[AI]){AK=AJ[AI].updateSeriesRenderSequence(AL,AK);}}return AL;}function z(){var AI=this.mABLPlotContext,AL=AI.mCategoryAxisPtr,AJ=this.mDatasetPtr;this.DPCount=0;this.seriesDPCount.splice(0,this.seriesDPCount.length);if(this.mPartialRendering){var AH=this.mChartContextPtr,AN={PartialRendering:true,Group:{}},AK,AO,AM=AH.mRenderingWindow,AP=AH.IsVertical();if(AP){AK=AM.x;AO=AK+AM.width;}else{AK=AM.y;AO=AK+AM.height;}AN.Group.Max=AL.getGroupSlotAt(AO)+1;AN.Group.Min=AL.getGroupSlotAt(AK)-1;AN.Data={Max:-1,Min:-1};AJ.updateDataWindow(AN);}else{AJ.resetDataWindow();}}function AF(){var AI=this.mDatasetPtr,AP,AJ,AO=E.VA_Y1,AH,AM,AK,AQ,AN,AL;AP=AI.GetGroupCount();AJ=this.mSeriesId.length;if(this.mChartContextPtr.IsDualAxis()){AH=AI.GetSeriesByValueAxis(E.VA_Y2);}else{AH=[];}for(AM=0;AM<AP;++AM){AQ=AN=0;for(AK=0;AK<AJ;++AK){AL=AI.GetData(this.mSeriesId[AK],AM);if(AL!==null&&AL!==undefined){if(AH.indexOf(this.mSeriesId[AK])!==-1){AO=E.VA_Y2;if(AL>0){AN+=AL;}else{AN+=Math.abs(AL);}}else{AO=E.VA_Y1;if(AL>0){AQ+=AL;}else{AQ+=Math.abs(AL);}}}}this.groupTotals[0].push(AQ);this.groupTotals[1].push(AN);}}function c(){var AQ=this.mABLPlotContext.mABLOptions,AK=this.mABLPlotContext.mSeriesOptions,AJ=this.mChartContextPtr,AW,AN,AM,AO,AP,AU,AS,AV=0;if(AJ.mIsGraphMatrix&&AJ.isCombinationChart()){var AT,AL=this.mDatasetPtr.GetSeriesByShape(),AI=[AL.Tick,AL.Line,AL.Square,AL.Circle,AL.Bar,AL.Area,AL.Pie],AR=[w._TICKER,w._LINE,w._SQUARE,w._CIRCLE,w._BAR,w._AREA,w._PIE];AS=AI.length;for(AN=0;AN<AS;++AN){AT=AI[AN];AU=AR[AN];if(AT&&AT.length){++AV;for(AM=0;AM<AT.length;AM++){AK[AT[AM]].mRealSeriesType=AU;}}}this.countOfTypes=AV;this.realComboChart=(AV>1);return ;}var AH=AJ.getUtiliy().tripleId;AO=AK.length;for(AN=0;AN<AO;++AN){switch(AK[AN].mSeriesType){case w._AREA:AK[AN].mRealSeriesType=w._AREA;break;case w._BAR:AK[AN].mRealSeriesType=w._BAR;break;case w._LINE:if(AQ.mCurvedLines){AK[AN].mRealSeriesType=w._LINE;}else{AP=AH.create(u.DssGraphRiser,this.mSeriesId[AN]);AW=AJ.GetProperty(t.DssGraphShowStepLine,AP);if(AW!==undefined&&AW!==null){if(AW){AK[AN].mRealSeriesType=w._STEPLINE;}else{AK[AN].mRealSeriesType=w._LINE;}}}break;case w._PIE:AK[AN].mRealSereisType=w._LINE;break;case w._DEFAULT:if(AQ.mMajorGraphType===g.MGT_AREA){AK[AN].mRealSeriesType=w._AREA;}else{if(AQ.mMajorGraphType===g.MGT_BAR){AK[AN].mRealSeriesType=w._BAR;}else{if(AQ.mCurvedLines){AK[AN].mRealSeriesType=w._LINE;}else{AP=AH.create(u.DssGraphRiser,this.mSeriesId[AN]);AW=AJ.GetProperty(t.DssGraphShowStepLine,AP);if(AW!==undefined&&AW!==null){if(AW){AK[AN].mRealSeriesType=w._STEPLINE;}else{AK[AN].mRealSeriesType=w._LINE;}}else{AK[AN].mRealSeriesType=w._LINE;}}}}break;}}}function Y(AI){var AN=this.mChartContextPtr,AM=this.mABLPlotContext,AK=AM.mABLOptions,AH=AM.mSeriesOptions,AL;var AJ=AN.getUtiliy().tripleId;AJ.reset(AE,u.DssGraphRiser,this.mSeriesId[AI]);if(!AN.mIsGraphMatrix){AL=AN.GetProperty(t.DssGraphSDRiserType,AE);if(AL){switch(AL){case V:AH[AI].mSeriesType=w._DEFAULT;break;case b:if(AK.mMajorGraphType===g.MGT_LINE){AH[AI].mSeriesType=w._BAR;}else{AH[AI].mSeriesType=w._LINE;}break;case r:if(AK.mMajorGraphType===g.MGT_AREA){AH[AI].mSeriesType=w._BAR;}else{AH[AI].mSeriesType=w._AREA;}break;default:AH[AI].mSeriesType=AL;break;}}}AH[AI].mValueAxis=this.LoadValueAxisInfo(AI,AK.mDualAxes);if(AN.mImageUsage!==0){return ;}this.LoadTrendLineProperties(this.mSeriesId[AI],AH[AI].mTrendLineOptions);if(AN.mIsGraphMatrix===false){AH[AI].mGraphNumberFormat=new f.ChartAdvFormat();AL=AN.GetProperty(-t.DssGraphFormatDataTextAdv,AE);if(AL){AN.ParseValueToFormat(AL,AH[AI].mGraphNumberFormat);}}}function I(){var AM=this.mChartContextPtr,AL=this.mABLPlotContext,AI=AL.mABLOptions,AJ;this.SetGraphType(AM.mGraphType);if(AM.mImageUsage!==0){return ;}if(AM.mIsGraphMatrix){return ;}var AK=new f.TripleId({SeriesId:this.mTripleId.mSeriesId});AJ=AM.GetProperty(t.DssGraphShowDataText,AK);if(AJ){AI.mTextShowType=AJ;AI.mShowCumulate=(AJ&S.DssGraphDataTextAbs)===0;}var AH=21001;AJ=AM.GetProperty(AH,AK);if(AJ){AI.mUseGlobalAutoScale=AJ;}AJ=AM.GetProperty(t.DssGraphDepthMode,AK);if(AJ){AI.mUseDepth=AJ;}AJ=AM.GetProperty(t.DssGraph2DDepth,AK);if(AJ){AI.mDepth=AJ;}AJ=AM.GetProperty(t.DssGraph2DAngle,AK);if(AJ){AI.mDepthDirection=AJ;}AJ=AM.GetProperty(t.DssGraphShowLine,AK);if(AJ){AI.mShowLines=AJ;}AJ=AM.GetProperty(t.DssGraphShowDivBiPolar,AK);if(AJ){AI.mShowAxisSplit=AJ;}AJ=AM.GetProperty(t.DssGraphShowDataLabel,AK);if(AJ){AI.mShowLabel=AJ;}AJ=AM.GetProperty(t.DssGraphShowDataValue,AK);if(AJ){AI.mShowValue=AJ;}AJ=AM.GetProperty(t.DssGraphShowDVPercent,AK);if(AJ){AI.mShowAsPercentage=AJ;}AJ=AM.GetProperty(t.DssGraphShowTotalValue,AK);if(AJ){AI.mShowTotal=AJ;}AJ=AM.GetProperty(t.DssGraphCurvedLines,AK);if(AJ){AI.mCurvedLines=AJ;}AJ=AM.GetProperty(t.DssGraphAxisDataTextPlace,AK);if(AJ){AI.mTextPosition=AJ;}AJ=AM.GetProperty(t.DssGraphSplitYPosition,AK);if(AJ){AI.mSplitAxisPosition=AJ;}}function AB(AJ){var AN=this.mChartContextPtr,AI=AN.GetGraphMatrixContext();if(AN.mIsGraphMatrix){if(AI.isCombinationChart()){var AK=AN.mImageUsage===mstrmojo.chart.enums.EnumImageUsage.OBJECT_CLIP_COMPUTATION;var AL=this.mDatasetPtr,AM=AL.GetSeriesByShape(),AH=((AM.Square&&AM.Square.length)||(AM.Circle&&AM.Circle.length)||(AM.Tick&&AM.Tick.length));if((AM.Bar&&AM.Bar.length)){if(!AK||AL.onlyBarDataLabelEnabled()){this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AJ,{TripleId:f.BarRenderer0}));}}if(AM.Area&&AM.Area.length){this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AJ,{TripleId:f.AreaRenderer0}));}if((AM.Line&&AM.Line.length)||AH){if(!AK||(AK&&!(AM.Line.length===1&&AL.GetGroupCount()===1))){this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AJ,{TripleId:f.LineRenderer0}));}}return true;}if(AN.IsBarChart()){if(AN.IsBulletChart()){this.mBarSeriesRendererPtr=new f.BulletSeriesRenderer(R.copy(AJ,{TripleId:f.BarRenderer0}));}else{this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AJ,{TripleId:f.BarRenderer0}));}}else{if(AN.IsLineChart()){this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AJ,{TripleId:f.LineRenderer0}));}else{if(AN.IsAreaChart()){this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AJ,{TripleId:f.AreaRenderer0}));}else{return false;}}}return true;}this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AJ,{TripleId:f.AreaRenderer0}));this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AJ,{TripleId:f.BarRenderer0}));this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AJ,{TripleId:f.LineRenderer0}));return true;}function P(AS,AJ){var AQ=AB.call(this,AS);if(!AQ){return ;}var AO=this.mAreaSeriesRendererPtr,AU=this.mBarSeriesRendererPtr,AT=this.mLineSeriesRendererPtr;var AM=[[0,0],[0,0],[0,0],[0,0]],AH=[],AP,AL=0,AK=this.mDatasetPtr,AI=this.mChartContextPtr,AR=this.mSeriesId,AN=AR.length;if(AI.isCombinationChart()){AH=AK.GetSeriesIndexByPriority();}for(AP=0;AP<AN;++AP){if(AH&&AH.length>AP){AL=AH[AP];}else{AL=AP;}switch(AJ[AL].mRealSeriesType){case w._AREA:if(AO){AO.AddSeries(AR[AL],AL,AM[w._AREA][AJ[AL].mValueAxis],AJ[AL].mValueAxis);++AM[w._AREA][AJ[AL].mValueAxis];}break;case w._BAR:if(AU){AU.AddSeries(AR[AL],AL,AM[w._BAR][AJ[AL].mValueAxis],AJ[AL].mValueAxis);++AM[w._BAR][AJ[AL].mValueAxis];}break;case w._TICKER:case w._LINE:case w._SQUARE:case w._CIRCLE:case w._PIE:if(AT){AT.AddSeries(AR[AL],AL,AM[w._LINE][AJ[AL].mValueAxis],AJ[AL].mValueAxis);++AM[w._LINE][AJ[AL].mValueAxis];}break;default:}}}function C(AM,AT,AH,AS,AQ,AO,AJ,AK){var AI={},AN=AT/2,AL=AH/2,AP=AK.IsVerticalAxis(),AR;if(AK.mTripleId.mObjectId===u.DssGraphY2Body){AR=AP?AA:L;}else{AR=AP?AD:N;}AI.rect=new f.Rect2D({x:0,y:0,width:AH+2*AJ,height:AT+2*AJ});switch(AM){case 0:switch(AR){case AD:AI.xOffset=AJ+AL;AI.yOffset=AS-AJ-AN;AI.rect.y=AS-2*AJ-AT;AI.rect.x=0;break;case N:AI.xOffset=AS-AJ-AL;AI.yOffset=AQ-AJ-AN;AI.rect.y=AQ-2*AJ-AT;AI.rect.x=AS-2*AJ-AH;break;case AA:AI.xOffset=AO-AJ-AL;AI.yOffset=AS-AJ-AN;AI.rect.y=AS-2*AJ-AT;AI.rect.x=AO-2*AJ-AH;break;case L:AI.xOffset=AS-AJ-AL;AI.yOffset=AJ+AN;AI.rect.y=0;AI.rect.x=AS-2*AJ-AH;break;}break;case 1:switch(AR){case AD:AI.xOffset=AJ+AL;AI.yOffset=AS+AJ+AN;AI.rect.y=AS;AI.rect.x=0;break;case N:AI.xOffset=AS+AJ+AL;AI.yOffset=AQ-AJ-AN;AI.rect.y=AQ-2*AJ-AT;AI.rect.x=AS;break;case AA:AI.xOffset=AO-AJ-AL;AI.yOffset=AS+AJ+AN;AI.rect.y=AS;AI.rect.x=AO-2*AJ-AH;break;case L:AI.xOffset=AS+AJ+AL;AI.yOffset=AJ+AN;AI.rect.y=0;AI.rect.x=AS;break;}break;}return AI;}function k(AL,AR,AO,AM,AI,AJ){var AP=AL.rect,AN,AK,AH,AQ;if(AP.y<0||AP.y+AP.height>AR){return false;}if(AP.x<0||AP.x+AP.width>AO){return false;}AN=AJ.length;for(AK=0;AK<AN;++AK){AH=AJ[AK].GetBoundingRect(true);if(AP.HasIntersection(AH)){return false;}}AN=AI.length;for(AK=0;AK<AN;++AK){AH=AI[AK].GetBoundingRect(true);if(AP.HasIntersection(AH)){return false;}}AN=AM.length;for(AK=0;AK<AN;++AK){AQ=AM[AK];if(AQ.mIsShown){AH=AQ.GetBoundingRect(true);if(AP.HasIntersection(AH)){return false;}}}return true;}function D(){var Ae=this.mABLPlotContext.mValueAxis,Ak=this.mABLPlotContext.mABLOptions,AN=this.mChartContextPtr,Aa=AN.mGraphWidth,Ai=AN.mGraphHeight,Af=AN.mpGraphMatrixContext,AH=Ak.mOrientation,AP=AH===1,AU=this.mDatasetPtr.fetchShownLabels(AP),AK,AT,Ag,Ac,Ab,Aj,AM,AR,AS,AL,An,AI,AX,AV,AW,Am,AZ,AO,AJ,AY,Al=Af.getPadding(Z.kAxisOriginLabel),Ah,AQ;Ag=Ae.length;for(Ac=0;Ac<Ag;++Ac){AK=Ae[Ac];AX=f.gAxisObjects[AK.getIndex()].mCustomLabelId;AT=AK.mOptions;AS=AT.mAxisCustomValue;Aj=AU&&AU[AK.Key];AM=Aj&&Aj.length;AL=false;if(!AT.mDrawCustomLine){continue;}for(Ab=0;Ab<AM&&!AL;++Ab){AR=Aj[Ab];if(AR===AS){AL=true;}}if(AL){continue;}if(AS>AK.mMaxTick||AS<AK.mMinTick){continue;}var Ad={};if(AK.mIsPercent){Ad.mFormatType=4;Ad.mCustomFormat="0%";}else{Ad=AK.mNumberFormat;}Am=new f.NumberObject({TripleId:AX,GraphObjectManager:this,Number:AS,NumberFormat:Ad,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:AK.mCondenseLabels});if(Am===null||Am===undefined){continue;}AO=Am;AJ=Am.mText;AO.SetText(AJ);AI=AO.GetBoundingRect(true);AV=AI.height;AW=AI.width;An=AK.ValueToPosition(AS);AQ=AK.IsVerticalAxis();if(An===0){continue;}if(AQ){if(An===Ai){continue;}}else{if(An===Aa){continue;}}Ah=false;for(Ab=0;Ab<=1&&!Ah;++Ab){AZ={};AY=C.call(this,Ab,AV,AW,An,Ai,Aa,Al,AK);AZ.xOffset=AY.xOffset;AZ.yOffset=AY.yOffset;AZ.rect=AY.rect;Ah=k.call(this,AZ,Ai,Aa,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(Ah){AO.MoveTo(AZ.xOffset,AZ.yOffset,p.CENTER);AO.mIsShown=true;this.mPostTrendLineObjects.push(AO);this.axisOriginLabels.push(AO);}}}function T(){return{mSeriesOptions:[],mValueAxis:[],mABLOptions:{mGraphType:q.DssGraphTypeVertical_Line_Absolute,mMajorGraphType:g.MGT_LINE,mLayout:O.LO_ABSOLUTE,mOrientation:K.OR_VERTICAL,mGraphSubType:j.GST_NULL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mShowAxisSplit:true,mShowLabel:false,mShowValue:false,mShowAsPercentage:false,mShowTotal:true,mShowCumulate:false,mCurvedLines:false,mShowLines:true,mUseGlobalAutoScale:true,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mTextPosition:4,mTextShowType:S.DssGraphDataTextValue,mTotalNumberFormat:null}};}mstrmojo.chart.ABLPlot=mstrmojo.declare(mstrmojo.chart.CategoryPlot,null,{scriptClass:"mstrmojo.chart.ABLPlot",mAreaSeriesRendererPtr:null,mBarSeriesRendererPtr:null,mLineSeriesRendererPtr:null,mABLPlotContext:null,mDepthLevel:null,mAxesAreas:null,unitLevelDepth:0,takeGroupCenter:false,groupTotals:null,groupOrder:null,countOfTypes:0,realComboChart:false,init:function y(AH){this._super(AH);this.mDepthLevel=[];this.groupTotals=[[],[]];this.mAxesAreas=[];this.groupOrder=[];this.mABLPlotContext=T.call(this);this.mABLPlotContext.takeGroupCenter=this.mChartContextPtr.mDatasetPtr.ShouldTakeGroupCenter();},getLayout:function J(){return this.mABLPlotContext.mABLOptions.mLayout;},getOrientation:function AC(){return this.mABLPlotContext.mABLOptions.mOrientation;},isAbsoluteOrCluster:function F(){var AH=this.mABLPlotContext.mABLOptions.mLayout;return AH===O.LO_ABSOLUTE||AH===O.LO_CLUSTER;},GenerateMapAndList:function x(){var AM=this.mChartContextPtr,AI=this.mABLPlotContext,AQ=AI.mABLOptions,AN=this.mDataArea,AP,AO,AV,AZ,AR=this.shownDataLabels;if(AN.width<=0||AN.height<=0){return ;}z.call(this);var AL=this.mAxesAreas;if(AQ.mDualAxes&&AQ.mSplitDualAxes){AP=new f.Rect2D();AO=new f.Rect2D();this.mChartContextPtr.SplitRect(AN,AQ.mOrientation===K.OR_VERTICAL,AQ.mSplitAxisPosition,AP,AO);AL.push(AP);AL.push(AO);}else{AP=new f.Rect2D({x:AN.x,y:AN.y,width:AN.width,height:AN.height});AL.push(AP);if(AQ.mDualAxes){AO=new f.Rect2D({x:AN.x,y:AN.y,width:AN.width,height:AN.height});AL.push(AO);}}var AS=this.mABLPlotContext.mValueAxis,AW,AX=AS.length,AH=this.mAreaSeriesRendererPtr,AU=this.mBarSeriesRendererPtr,Aa=this.mLineSeriesRendererPtr,AJ=this.mGraphObjectManagerList,AT=this.mGraphObjectMap,AK=this.mPostTrendLineObjects;if(AM.mIsGraphMatrix===false){for(AV=0;AV<AX;++AV){AW=AS[AV];if(!AW.IsBaseAtZero()&&AW.mOptions.mUseLogarithmicScale===false){AZ=AW.GetBaseValue();if(AH){AH.AddBaseToCumulateData(AV,AZ);}if(AU){AU.AddBaseToCumulateData(AV,AZ);}if(Aa){Aa.AddBaseToCumulateData(AV,AZ);}}}}if(AH){AH.SetDeviceDataArea(AN);}if(AU){AU.SetDeviceDataArea(AN);}if(Aa){Aa.SetDeviceDataArea(AN);}if(!(AQ.mDualAxes&&AQ.mSplitDualAxes&&AQ.mUseDepth)){if(AH){AH.GenerateMapAndList(AR);AJ.push(AH);}if(AU){AU.GenerateMapAndList(AR);AJ.push(AU);}if(Aa){Aa.GenerateMapAndList(AR);AJ.push(Aa);}}if(AQ.mDualAxes){if(AQ.mSplitDualAxes){this.AdjustTrendLineEquation(AL[0],a.TLI_Y1);this.AdjustTrendLineEquation(AL[1],a.TLI_Y2);}else{this.AdjustTrendLineEquation(AN,a.TLI_BOTH);}}else{this.AdjustTrendLineEquation(AN,a.TLI_Y1);}AX=AS.length;this.axisOriginLines=[];var AY=this.axisOriginLines;for(AV=0;AV<AX;++AV){AW=AS[AV];if(this.mChartContextPtr.mIsGraphMatrix){AW.GenerateCustomLine(AL[AV],AY);}else{AW.GenerateCustomLine(AL[AV],AK);}}D.call(this);if(AH){AH.AddTextToMapAndList(AT,AK);}if(AU){AU.AddTextToMapAndList(AT,AK);}if(Aa){Aa.AddTextToMapAndList(AT,AK);}this.mDatasetPtr.resetDataWindow();},Draw:function s(){var AH=this.mChartContextPtr,AI=this.mDataArea,AP=this.mAreaSeriesRendererPtr,AS=this.mBarSeriesRendererPtr,AR=this.mLineSeriesRendererPtr;var AQ=this.axisOriginLines;if(AQ&&AQ.length){var AL,AN=AQ.length;for(AL=0;AL<AN;AL++){AQ[AL].Draw();}}if(this.mAreaSeriesRendererPtr){var AJ=U.call(this);AH.setDrawingOrderToCanvas(AJ);}if(AH.mIsTimeSeriesChart){var AO=new f.Rect2D({x:AI.x+1,y:AI.y,width:AI.width-1,height:AI.height});AH.DrawRectangle(AO,false);AH.saveState();AH.Clip();if(AP){AP.Draw();}if(AS){AS.Draw();}if(AR){AR.Draw();}this._super();this.DrawPostTrendLineObjects();AH.RestoreState();}else{var AK=this.mABLPlotContext,AM=AK.mABLOptions;if(!AM.mDualAxes||!AM.mSplitDualAxes||!AM.mUseDepth){if(AP){AP.Draw();}}if(AS){AS.Draw();}if(!AM.mDualAxes||!AM.mSplitDualAxes||!AM.mUseDepth){if(AR){AR.Draw();}}this._super({Skip:1});if(this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquations();}this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function e(){if(!this.mChartContextPtr.mIsTimeSeriesChart&&this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[0],false);if(this.mABLPlotContext.mABLOptions.mDualAxes){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[1],true);}}},AddValueAxis:function A(AH){this.mABLPlotContext.mValueAxis.push(AH);},SetCategoryAxis:function h(AM){var AH=this.mChartContextPtr,AK=this.mABLPlotContext,AI,AP,AJ,AQ,AN,AL,AO=AK.mCategoryAxisPtr=AM;AI=false;if(AH.mIsTimeSeriesChart){AI=true;}else{AP=AH.GetProperty(t.DssGraph2DOrdSpaceMode,l);if(AP){AI=AP;}}AJ=AK.mABLOptions.mMajorGraphType!==g.MGT_BAR;AQ=true;AN=this.mSeriesId.length;for(AL=0;AL<AN;++AL){if(AK.mSeriesOptions[AL].mRealSeriesType===w._BAR){AQ=false;break;}}AO.mAxisCross=(AI&&AJ&&AQ);if(AH.mIsGraphMatrix&&AH.IsLineChart()){if(this.mDatasetPtr.GetGroupCount()<=1){AO.mAxisCross=false;}}},GetDepthOffset:function B(AH){return this.mChartContextPtr.CalculateDepthOffset(this.mDepthLevel[AH]*this.unitLevelDepth,this.mABLPlotContext.mABLOptions.mDepthDirection);},getGroupTotals:function o(AH,AI){return this.groupTotals[AI][AH];},Init:function n(){var AK,AH,AM=this.mABLPlotContext,AJ=AM.mSeriesOptions;AJ.splice(0,AJ.length);AH=this.mSeriesId.length;for(AK=0;AK<AH;++AK){var AL={mSeriesType:w._DEFAULT,mRealSeriesType:w._LINE,mValueAxis:E.VA_Y1,mShowDataLabels:false,mTrendLineOptions:null,mGraphNumberFormat:f.dNF};if(this.mChartContextPtr.mIsGraphMatrix==false){AL.mTrendLineOptions=new f.GraphTrendLineOptions();}AJ.push(AL);}I.call(this);for(AK=0;AK<AH;++AK){Y.call(this,AK);}c.call(this);var AI={GraphObjectManager:this,DataSet:this.mDatasetPtr,Legend:this.mLegendPtr};P.call(this,AI,AJ);AF.call(this);AG.call(this);},SetGraphType:function d(AI){var AH=this.mABLPlotContext.mABLOptions;AH.mGraphType=AI;switch(AI){case q.DssGraphTypeVertical_Area_Absolute:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Area_Stacked:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Area_BiPolar_Absolute:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Area_BiPolar_Stacked:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Area_DualAxis_Absolute:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Area_DualAxis_Stacked:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Area_Percent:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Area_Absolute:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Area_Stacked:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Area_BiPolar_Absolute:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Area_BiPolar_Stacked:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Area_DualAxis_Absolute:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Area_DualAxis_Stacked:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Area_Percent:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_Side_by_Side:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_CLUSTER;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_Stacked:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_CLUSTER;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Bar_DualAxis_Stacked:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_CLUSTER;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Bar_BiPolar_Stacked:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Bar_Percent:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bar_Side_by_Side:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_CLUSTER;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bar_Stacked:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_CLUSTER;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_CLUSTER;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Bar_Percent:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Line_Absolute:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Line_Stacked:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Line_BiPolar_Absolute:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Line_BiPolar_Stacked:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Line_DualAxis_Absolute:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Line_DualAxis_Stacked:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Line_Percent:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Line_Absolute:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Line_Stacked:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Line_BiPolar_Absolute:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Line_BiPolar_Stacked:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Line_DualAxis_Absolute:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Line_DualAxis_Stacked:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_STACKED;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Line_Percent:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bullet:case q.DssGraphTypeVertical_Bar_Absolute:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bullet:case q.DssGraphTypeHorizontal_Bar_Absolute:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_BiPolar_Absolute:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Bar_DualAxis_Absolute:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_ABSOLUTE;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Area_DualAxis_Percent:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Area_DualAxis_Percent:AH.mMajorGraphType=g.MGT_AREA;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Bar_DualAxis_Percent:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Percent:AH.mMajorGraphType=g.MGT_BAR;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Line_DualAxis_Percent:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_VERTICAL;AH.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Line_DualAxis_Percent:AH.mMajorGraphType=g.MGT_LINE;AH.mLayout=O.LO_PERCENT;AH.mOrientation=K.OR_HORIZONTAL;AH.mGraphSubType=j.GST_DUALAXIS;break;}switch(AH.mGraphSubType){case j.GST_NULL:AH.mDualAxes=false;AH.mSplitDualAxes=false;break;case j.GST_DUALAXIS:AH.mDualAxes=true;AH.mSplitDualAxes=false;break;case j.GST_BIPOLAR:AH.mDualAxes=true;AH.mSplitDualAxes=true;break;}},GetMinMaxValue:function H(AO,AK,AH,AM){var AJ,AN=this.mChartContextPtr;if(AN.mIsUniformAxisMode){var AI=AN.getUniformAxisContext(),AL=AI.ValueAxis;if(AO===E.VA_Y1){if(AN.IsVertical()===false){return{Min:AL.X1.Min,Max:AL.X1.Max,AreInitialized:true};}return{Min:AL.Y1.Min,Max:AL.Y1.Max,AreInitialized:true};}if(AN.IsVertical()===false){return{Min:AL.X2.Min,Max:AL.X2.Max,AreInitialized:true};}return{Min:AL.Y2.Min,Max:AL.Y2.Max,AreInitialized:true};}if(this.mAreaSeriesRendererPtr){AJ=this.mAreaSeriesRendererPtr.GetMinMaxValue(AO,AK,AH,AM);}if(this.mBarSeriesRendererPtr){AJ=this.mBarSeriesRendererPtr.GetMinMaxValue(AO,AJ.Min,AJ.Max,AJ.AreInitialized);}if(this.mLineSeriesRendererPtr){AJ=this.mLineSeriesRendererPtr.GetMinMaxValue(AO,AJ.Min,AJ.Max,AJ.AreInitialized);}return{Min:AJ.Min,Max:AJ.Max,AreInitialized:AJ.AreInitialized};},ShouldRotateDataLabel:function X(){return this.mBarSeriesRendererPtr.ShouldRotateDataLabel();},GetMaxElementOffsetClippedByBoundary:function G(AP,AS){var AI={LowOffset:0,HighOffset:0},AO,AJ,AM,AQ;if(AS===undefined||AS===null){AS=true;}if(!this.mChartContextPtr.mIsGraphMatrix){return AI;}var AK=AP?(AS?"X1":"X2"):(AS?"Y1":"Y2"),AH=this.mClippedElementSize;if(AH[AK]!==undefined){return AH[AK];}for(AJ=0;AJ<2;++AJ){for(AM=0;AM<2;++AM){var AR=[this.mLineSeriesRendererPtr,this.mAreaSeriesRendererPtr],AN=(AM===0),AL=(AJ===0),AT=AN?(AL?"X1":"X2"):(AL?"Y1":"Y2");AI={LowOffset:0,HighOffset:0};AQ=AR.length;for(AO=0;AO<AQ;++AO){if(AR[AO]){AR[AO].getMaxElementOffsetClippedByBoundary(AI,AN,AL);}}AH[AT]=AI;}}return AH[AK];}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","CategoryPlot","ABLPlot","Axis","CategoryAxis","ValueAxis","GraphObjectManager","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumLayout","EnumOrientation","EnumValueAxis","EnumAxisLabelsLocation","EnumAxisDirection","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSExtraGraphProperty","EnumDSSGraphObject","EnumVariantBool");var W=mstrmojo.chart,M=W.enums,X=M.EnumGraphMajorType,d=M.EnumDSSGraphObjectManager.DssPlot,N=M.EnumLayout,J=M.EnumOrientation,E=M.EnumValueAxis,a=M.EnumAxisLabelsLocation,A=M.EnumAxisDirection,q=W.gNullTripleId,T=mstrmojo.chart.model,O=T.enums,g=O.EnumDSSGraphType,j=O.EnumDSSGraphProperty,f=O.EnumDSSExtraGraphProperty,l=O.EnumDSSGraphObject,B=O.EnumVariantBool.VARIANT_FALSE;var n=new W.Rect2D(),k=new W.Rect2D(),C=new W.Rect2D(),I=new W.Rect2D(),H=new W.Rect2D(),K=new W.Rect2D(),L=new W.Rect2D();function P(){var z=this.mChartContextPtr,x=this.mDatasetPtr,t=z.GetGraphMatrixContext(),y=false,u=false,w;if(z.mIsGraphMatrix&&this.mOrientation===J.OR_VERTICAL){var s=this.mCategoryPlots[0];w=z.GetProperty(f.DssGraphMatrixInitedDataLabelRotation,q);if(w){y=w;}if(!y){if(z.isCombinationChart()&&!x.onlyBarDataLabelEnabled()){z.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,q,true);t.mIsNeedRotateDataLabel=false;z.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,q,false);return ;}if(z.IsBarChart()||(z.isCombinationChart()&&x.onlyBarDataLabelEnabled())){u=s.ShouldRotateDataLabel();z.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,q,true);t.mIsNeedRotateDataLabel=u;z.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,q,u);}}}}function b(AA,u){var AC=this.mChartContextPtr;if(AC.mIsGraphMatrix){u.Reset(AA.x,AA.y,AA.width,AA.height);return ;}var t,w,AB,s,z=new W.Rect2D();Z.call(this,AA,z);z.width=Math.max(0,z.width);z.height=Math.max(0,z.height);this.mLeftMargin+=z.x-AA.x;this.mRightMargin+=AA.x+AA.width-(z.x+z.width);this.mTopMargin+=z.y-AA.y;this.mBottomMargin+=AA.y+AA.height-(z.y+z.height);this.ReserveAreaCategoryAxis(z,u);if(u.width<0){u.width=0;}if(u.height<0){u.height=0;}if(this.mOrientation===J.OR_HORIZONTAL){t=AA.x+Math.max(z.x-AA.x,u.x-z.x);w=AA.x+AA.width-Math.max(AA.x+AA.width-(z.x+z.width),z.x+z.width-(u.x+u.width))-t;u.x=t;u.width=w;}else{AB=AA.y+Math.max(z.y-AA.y,u.y-z.y);s=AA.y+AA.height-Math.max(AA.y+AA.height-(z.y+z.height),z.y+z.height-(u.y+u.height))-AB;u.y=AB;u.height=s;}}function Y(s){var w=this.mChartContextPtr,u,t;u=w.GetGraphMajorType();if(w.mIsGraphMatrix){t=W.PlotId0;}else{t=new W.TripleId({ObjectId:d,SeriesId:s});}switch(u){case X.GMT_CATEGORY:return new W.ABLPlot({TripleId:t,GraphObjectManager:this,Area:W.gEmptyRect});default:break;}return null;}function Z(w,AH){var t=this.mChartContextPtr,u=[],AB=this.mVecY1Axis.length,y,AF,AC,x,AD,AA,z,s,AG;for(y=0;y<AB;++y){AF=this.mOrientation===J.OR_VERTICAL?this.mBottomMargin:this.mLeftMargin;AC=this.mOrientation===J.OR_VERTICAL?this.mTopMargin:this.mRightMargin;x=AF;if(t.mIsGraphMatrix){L.ResetRect(w);K.ResetRect(w);}else{K=new W.Rect2D({Rect2D:w});L=new W.Rect2D({Rect2D:w});}if(this.mDualAxes){AD=AC;if(this.mSplitDualAxes){AA=new W.Rect2D();z=new W.Rect2D();t.SplitRect(L,t.IsVertical(),this.mSplitAxisPosition,AA,z);if(this.mOrientation===J.OR_VERTICAL){AD+=AA.height;x+=z.height;}else{AD+=AA.width;x+=z.width;}}this.mVecY2Axis[y].ReserveTitleAndLabels(K,AF,AD);if(!this.mSplitDualAxes){L.ResetRect(K);if(this.mOrientation===J.OR_VERTICAL){L.y=w.y;L.height=w.height;}else{L.x=w.x;L.width=w.width;}}if(this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&K.y>w.y){s=K.y+K.height;K.y=w.y+(K.y-w.y)*100/this.mSplitAxisPosition;K.height=s-K.y;}if(this.mOrientation===J.OR_HORIZONTAL&&K.x+K.width<w.x+w.width){K.width=w.width-(w.x+w.width-(K.x+K.width))*100/this.mSplitAxisPosition;}}}this.mVecY1Axis[y].ReserveTitleAndLabels(L,x,AC);if(this.mDualAxes&&this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&L.y+L.height<w.y+w.height){L.height=(w.y+w.height-(L.y+L.height))*100/this.mSplitAxisPosition;}if(this.mOrientation===J.OR_HORIZONTAL&&L.x>w.x){var AE=L.x+L.width;L.x=w.x+(L.x-w.x)*100/this.mSplitAxisPosition;L.width=AE-L.x;}}if(this.mDualAxes&&!this.mSplitDualAxes){K.ResetRect(L);if(this.mOrientation===J.OR_VERTICAL){K.y=w.y;K.height=w.height;}else{K.x=w.x;K.width=w.width;}}this.mVecY1Axis[y].AdjustDeviceDataArea(L,false);u.push(L);if(this.mDualAxes){this.mVecY2Axis[y].AdjustDeviceDataArea(K,false);u.push(K);}}n.Reset(0,0,0,0);k.ResetRect(u[0]);AG=u.length;for(y=1;y<AG;++y){if(!this.RectangleIntersection(k,u[y],n)){k.Reset(0,0,0,0);break;}k.ResetRect(n);}AH.ResetRect(k);}function r(t,w){var y=this.mChartContextPtr,u=y.mUniformAxisContext,s=new W.Rect2D({Rect2D:w});if(y.mIsGraphMatrix){var x=0;if(y.IsVertical()){x=u.yDataLabelPadding||0;x-=s.y;if(x){s.y+=x;s.height-=x;}}else{x=u.xDataLabelPadding||0;x-=y.mGraphWidth-s.x-s.width;if(x){s.width-=x;}}}return s;}function Q(s,u){var t=this.mChartContextPtr,AD=this.mVecY1Axis,AC=this.mVecY2Axis,AB=AD[u],AA=AC[u],y,x,z,w;if(this.mDualAxes&&this.mSplitDualAxes){z=new W.Rect2D({Rect2D:s});y=new W.Rect2D();x=new W.Rect2D();t.SplitRect(z,t.IsVertical(),this.mSplitAxisPosition,y,x);AB.SetDeviceDataArea(y);AB.AdjustDeviceDataArea(y,true);AB.UpdateTitleAndLabelArea(y);AA.SetDeviceDataArea(x);AA.AdjustDeviceDataArea(x,true);AA.UpdateTitleAndLabelArea(x);}else{if(this.mDualAxes){y=r.call(this,0,s);if(AD.length){AB.TrimDeviceDataArea(y);}AB.SetDeviceDataArea(y);AB.AdjustDeviceDataArea(y,true);x=r.call(this,1,s);if(AC.length){AA.TrimDeviceDataArea(x);}AA.SetDeviceDataArea(x);if(!t.mIsGraphMatrix){w=new W.Rect2D({Rect2D:y});AA.AdjustDeviceDataArea(x,true);this.RectangleUnion(y,x,w);AB.UpdateTitleAndLabelArea(w);AA.UpdateTitleAndLabelArea(w);}}else{y=r.call(this,0,s);if(AD.length){AB.TrimDeviceDataArea(y);}AB.SetDeviceDataArea(y);if(!t.mIsGraphMatrix){AB.AdjustDeviceDataArea(y,true);w=new W.Rect2D({Rect2D:y});AB.UpdateTitleAndLabelArea(w);}}}}function R(){var t=this.mGraphObjectList,u,w,s;u=this.mVecY1Axis.length;for(s=0;s<u;++s){this.mVecY1Axis[s].generateAxisLine(t);if(this.mDualAxes){this.mVecY2Axis[s].generateAxisLine(t);}}w=this.mVecO1Axis.length;for(s=0;s<w;++s){this.mVecO1Axis[s].generateAxisLine(t);}}function e(x){var s=this.mChartContextPtr,AB=this.mGraphObjectList,AD=this.mChartAreaOptions,AC=AD.chartAreaNumber,w,u,AA,t,z,y;AA=this.mVecY1Axis.length;for(w=0;w<AA;++w){if(!this.isMutipleValueAxis()){for(u=0;u<AC;++u){if(this.mDualAxes&&this.mSplitDualAxes){z=new W.Rect2D();y=new W.Rect2D();s.SplitRect(x[u],s.IsVertical(),this.mSplitAxisPosition,z,y);this.mVecY1Axis[w].GenerateGridLines(z,u,AB);this.mVecY2Axis[w].GenerateGridLines(y,u,AB);}else{this.mVecY1Axis[w].GenerateGridLines(x[u],u,AB);if(this.mDualAxes){this.mVecY2Axis[w].GenerateGridLines(x[u],u,AB);}}}}else{if(this.mDualAxes&&this.mSplitDualAxes){z=new W.Rect2D();y=new W.Rect2D();s.SplitRect(x[w],s.IsVertical(),this.mSplitAxisPosition,z,y);this.mVecY1Axis[w].GenerateGridLines(z,w,AB);this.mVecY2Axis[w].GenerateGridLines(y,w,AB);}else{this.mVecY1Axis[w].GenerateGridLines(x[w],w,AB);if(this.mDualAxes){this.mVecY2Axis[w].GenerateGridLines(x[w],w,AB);}}}}t=this.mVecO1Axis.length;for(w=0;w<t;++w){if(this.isMutipleValueAxis()){for(u=0;u<AC;++u){this.mVecO1Axis[w].GenerateGridLines(x[u],u,AB);}}else{this.mVecO1Axis[w].GenerateGridLines(x[w],w,AB);}}}function D(t,s){var y=this.mChartContextPtr,x,u;I.Reset(t.x,t.y,t.width,t.height);H.Reset(t.x,t.y,t.width,t.height);if(!y.mIsGraphMatrix){if(y.mManualLayoutMode&&!this.mRecalculateFrame){I.ResetRect(this.mPlotArea);}else{y.PutLocation(j.DssGraphFrameLocationNEW,I);}s.splice(0,s.length);this.CalculateChartAreas(I,s);}else{s.splice(0,s.length);s.push(H);}if(y.isUADataAreaOutput()){var w=y.mUniformAxisContext;H.x=w.mDataAreaLeftMargin;H.y=w.mDataAreaTopMargin;H.width=y.mGraphWidth-H.x-w.mDataAreaRightMargin;H.height=y.mGraphHeight-H.y-w.mDataAreaBottomMargin;if(this.mVecO1Axis.length){this.mVecO1Axis[0].TrimAxisPadding(H,false);}I.ResetRect(H);this.mCategoryPlots[0].SetDataArea(H);if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);Q.call(this,H,0);}else{Q.call(this,I,0);this.mVecO1Axis[0].SetDeviceDataArea(H);}return ;}x=this.mChartAreaOptions.chartAreaNumber;for(u=0;u<x;++u){this.mCategoryPlots[u].SetDataArea(s[u]);}if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);for(u=0;u<this.mChartAreaOptions.chartAreaNumber;++u){Q.call(this,s[u],u);}}else{Q.call(this,I,0);for(u=0;u<this.mChartAreaOptions.chartAreaNumber;++u){this.mVecO1Axis[u].SetDeviceDataArea(s[u]);}}}function c(u,t){var z=this.mChartContextPtr,w;D.call(this,u,t);var s=this.mDatasetPtr.showDatalabels();if(s){P.call(this);if(!z.mIsGraphMatrix){var y=new W.Rect2D({Rect2D:u}),x=this.mCategoryPlots.length;for(w=0;w<x;++w){this.mCategoryPlots[w].ReserveAreaForDataLabels(u);}if(u.width!==y.width||u.height!==y.height){D.call(this,u,t);}}else{this.ShouldRotateDataLabel();}}}function G(w,x,AC,AE,s){var u=this.mChartContextPtr,z=u.getAxisTripleId(w),y=u.getUniformAxisInformation(z.mObjectId),AB=y.Metrics,AD=(this.mOrientation===J.OR_VERTICAL?A.AD_Y:A.AD_X),t=new W.ValueAxis({TripleId:z,GraphObjectManager:this,Min:x,Max:AC,PrimaryMetricIndex:AB,LargerGridInterval:AE!==1||(this.mDualAxes&&this.mSplitDualAxes),IsPercent:this.mLayout===N.LO_PERCENT,AxisDirection:AD,IsShown:s,Key:w});if(u.mIsGraphMatrix&&t.mIsUniformAxis===false){var AA=y.CondenseEnforced;t.checkCondense(!!AA);}return t;}mstrmojo.chart.CategoryPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.CategoryPlotManager",mGraphType:g.DssGraphTypeVertical_Line_Absolute,mLayout:N.LO_ABSOLUTE,mOrientation:J.OR_VERTICAL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mDataAreaSplitX:50,mCategoryPlots:null,mVecO1Axis:null,mVecY1Axis:null,mVecY2Axis:null,init:function p(s){this._super(s);this.mCategoryPlots=[];this.mVecO1Axis=[];this.mVecY1Axis=[];this.mVecY2Axis=[];this.mChartContextPtr=s.GraphObjectManager.mChartContextPtr;},GenerateMapAndList:function o(){var AD=this.mChartAreaOptions,AA=AD.chartAreaNumber,z=this.mPlotArea,u=this.mCategoryPlots,y=this.mChartContextPtr,t=this.mGraphObjectManagerList,AR,AP,s,AU,AS,AM,AQ,AB,AF,AI,AX,AC,AL,AE=[],x,AJ,AT;var AO="Y1",AG=this.mVecO1Axis,AW=this.mVecY1Axis,AV=this.mVecY2Axis;if(z.width<=0||z.height<=0){return ;}this.LoadProperties();for(AR=0;AR<AA;++AR){s=Y.call(this,AR);s.SetDataset(this.mDatasetPtr);s.mLegendPtr=this.mLegendPtr;u.push(s);AT=AD.seriesDistribution[AR].length;for(AP=0;AP<AT;++AP){u[AR].AddSeries(AD.seriesDistribution[AR][AP]);}s.Init();}var w;if(this.isMutipleValueAxis()){w=y.getAxisTripleId("O1");var AK=new W.CategoryAxis({TripleId:w,GraphObjectManager:this,AxisLabelsLocation:a.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});AG.push(AK);for(AR=0;AR<AA;++AR){AU=false;AS=false;AM=[0,0];AQ=[0,0];AJ=u[AR].GetMinMaxValue(E.VA_Y1,AM[0],AQ[0],AU);AM[0]=AJ.Min;AQ[0]=AJ.Max;AU=AJ.AreInitialized;if(this.mDualAxes){AJ=u[AR].GetMinMaxValue(E.VA_Y2,AM[1],AQ[1],AS);AM[1]=AJ.Min;AQ[1]=AJ.Max;AS=AJ.AreInitialized;}u[AR].SetCategoryAxis(AK);if(y.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AO="X1";}AB=G.call(this,AO,AM[0],AQ[0],AA,AU);AW.push(AB);u[AR].AddValueAxis(AB);if(this.mDualAxes){AO="Y2";if(y.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AO="X2";}AF=G.call(this,AO,AM[1],AQ[1],AA,AS);AV.push(AF);u[AR].AddValueAxis(AF);}}}else{AU=false;AS=false;AM=[0,0];AQ=[0,0];for(AR=0;AR<AA;++AR){AJ=u[AR].GetMinMaxValue(E.VA_Y1,AM[0],AQ[0],AU);AM[0]=AJ.Min;AQ[0]=AJ.Max;AU=AJ.AreInitialized;if(this.mDualAxes){AJ=u[AR].GetMinMaxValue(E.VA_Y2,AM[1],AQ[1],AS);AM[1]=AJ.Min;AQ[1]=AJ.Max;AS=AJ.AreInitialized;}w=y.mIsGraphMatrix?y.getAxisTripleId("O1"):new W.TripleId({ObjectId:l.DssGraphO1Body,SeriesId:AR});AI=new W.CategoryAxis({TripleId:w,GraphObjectManager:this,AxisLabelsLocation:a.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});u[AR].SetCategoryAxis(AI);AG.push(AI);}if(y.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AO="X1";}AB=G.call(this,AO,AM[0],AQ[0],AA,AU);AW.push(AB);for(AR=0;AR<AA;++AR){u[AR].AddValueAxis(AB);}if(this.mDualAxes){AO="Y2";if(y.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AO="X2";}AF=G.call(this,AO,AM[1],AQ[1],AA,AS);AV.push(AF);for(AR=0;AR<AA;++AR){u[AR].AddValueAxis(AF);}}}AX=this.mVecO1Axis.length;AC=this.mVecY1Axis.length;AL=this.mVecY2Axis.length;if(this.mUseDepth){for(AR=0;AR<AX;++AR){AG[AR].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AR=0;AR<AC;++AR){AW[AR].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AR=0;AR<AL;++AR){AV[AR].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}}AT=AG.length;for(AR=0;AR<AT;++AR){AG[AR].SetDataset(this.mDatasetPtr);}for(AR=0;AR<AX;++AR){t.push(this.mVecO1Axis[AR]);}for(AR=0;AR<AC;++AR){t.push(this.mVecY1Axis[AR]);if(this.mDualAxes){t.push(this.mVecY2Axis[AR]);}}C.Reset(0,0,0,0);b.call(this,z,C);c.call(this,C,AE);x=u.length;for(AR=0;AR<x;++AR){t.push(u[AR]);u[AR].GenerateMapAndList();}for(AR=0;AR<AX;++AR){AW[AR].GenerateMapAndList();}for(AR=0;AR<AC;++AR){AW[AR].GenerateMapAndList();if(this.mDualAxes){AV[AR].GenerateMapAndList();}}var AH=y.mIsGraphMatrix,AN=y.isUADataAreaOutput();if(!(AH&&AN)){if(this.mUseDepth){R.call(this);e.call(this,AE);}else{e.call(this,AE);R.call(this);}}},LoadProperties:function V(){var t,u=this.mChartContextPtr;this._super();var s=this.mGraphType=u.mGraphType;if(!(u.mIsTimeSeriesChart)){if(!u.mIsGraphMatrix){t=u.GetProperty(j.DssGraphDepthMode,q);if(t){this.mUseDepth=(t!==B);}t=u.GetProperty(j.DssGraph2DDepth,q);if(t){this.mDepth=t;}t=u.GetProperty(j.DssGraph2DAngle,q);if(t){this.mDepthDirection=t;}}this.mOrientation=u.IsVertical()?J.OR_VERTICAL:J.OR_HORIZONTAL;this.mDualAxes=u.IsDualAxis();}if((s>=g.DssGraphTypeVertical_Area_Percent)&&(s<=g.DssGraphTypeHorizontal_Line_Percent)&&(s%7===0)){this.mLayout=N.LO_PERCENT;}if(this.mLayout!==N.LO_PERCENT&&(s>=g.DssGraphTypeVertical_Bar_DualAxis_Percent&&s<=g.DssGraphTypeHorizontal_Area_DualAxis_Percent)){this.mLayout=N.LO_PERCENT;}},isMutipleValueAxis:function S(){var s=this.mChartAreaOptions;return(this.mOrientation===s.mOrientation);},ReserveAreaCategoryAxis:function F(x,AF){var t=this.mChartContextPtr,w=[],AA=[],y,z,AC,AB,u,AE,s,AD;if(!this.isMutipleValueAxis()){this.CalculateChartAreas(x,AA);}y=this.mVecO1Axis.length;for(z=0;z<y;++z){if(t.mIsGraphMatrix){k.ResetRect(this.isMutipleValueAxis()?x:AA[z]);}else{k=this.isMutipleValueAxis()?new W.Rect2D({Rect2D:x}):new W.Rect2D({Rect2D:AA[z]});}this.mVecO1Axis[z].AdjustTitleArea(k);if(t.mIsTimeSeriesChart){this.mVecO1Axis[z].AdjustDataArea(k,0,0,true);}else{AC=this.mOrientation===J.OR_HORIZONTAL?this.mBottomMargin:this.mLeftMargin;AB=this.mOrientation===J.OR_HORIZONTAL?this.mTopMargin:this.mRightMargin;this.mVecO1Axis[z].AdjustDataArea(k,AC,AB);}if(t.mRecalculateFrame){if(this.mOrientation===J.OR_VERTICAL){u=x.x;s=x.width;if(z===0){if(k.x>x.x){u=k.x;s-=(k.x-x.x);}}if(z===this.mVecO1Axis.length-1){if(x.x+x.width>k.x+k.width){s=k.x+k.width-u;}}k.x=u;k.width=s;}else{AE=x.y;AD=x.height;if(z===0){if(k.y>x.y){AE=k.y;AD-=(k.y-x.y);}}if(z===this.mVecO1Axis.length-1){if(x.y+x.height>k.y+k.height){AD=k.y+k.height-AE;}}k.y=AE;k.height=AD;}}w.push(k);}k.ResetRect(w[0]);for(z=1;z<w.length;++z){if(!this.RectangleIntersection(k,w[z],n)){k.Reset(0,0,0,0);break;}k.ResetRect(n);}AF.ResetRect(k);},Draw:function h(){var t=this.mCategoryPlots,w,y,x,s,u;this._super();w=this.mVecY1Axis.length;for(u=0;u<w;++u){this.mVecY1Axis[u].Draw();}y=this.mVecY2Axis.length;for(u=0;u<y;++u){this.mVecY2Axis[u].Draw();}x=this.mVecO1Axis.length;for(u=0;u<x;++u){this.mVecO1Axis[u].Draw();}s=t.length;for(u=0;u<s;++u){t[u].Draw();}},ShouldRotateDataLabel:function U(){var AA=this.mChartContextPtr,y=this.mDatasetPtr,s=AA.GetGraphMatrixContext(),x=y.showDatalabels(),u=false,z=false;if(x&&AA.mIsGraphMatrix&&y.onlyBarDataLabelEnabled()){var t=this.mCategoryPlots[0],w;if(this.mOrientation===J.OR_VERTICAL){w=AA.GetProperty(f.DssGraphMatrixInitedDataLabelRotation,W.gNullTripleId);if(w!==undefined&&w!==null){z=w;}if(z){w=AA.GetProperty(f.DSSGraphMatrixDataLabelRotated,W.gNullTripleId);if(w!==undefined&&w!==null){s.mIsNeedRotateDataLabel=w;return ;}}u=t.ShouldRotateDataLabel();s.mIsNeedRotateDataLabel=u;AA.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,W.gNullTripleId,true);AA.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,W.gNullTripleId,u);}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlotManager","TripleId","Rect2D","RectangleObject","TextObject","Legend","GridChartPlotManager","ValuePlotManager");var W=mstrmojo.chart,R=W.enums,A=R.EnumDSSExtraGraphObject,B=R.EnumGraphMajorType,J=W.ChartContext,X=R.EnumDSSGraphObjectManager,K=X.DssLegend,Y=W.gNullTripleId,C=W.gNullSeriesId,E=W.gNullGroupId;var M=mstrmojo.chart.model,Z=M.enums,D=Z.EnumDSSGraphType,F=Z.EnumDSSGraphProperty,G=Z.EnumDSSGraphObject,U=Z.EnumVariantBool,Q=U.VARIANT_FALSE,a=Z.EnumDSSExtraGraphProperty;function P(g,f){var j=this.mChartContextPtr,e=this.mGraphObjectList,d,b,c;f=f||false;if(!this.isSupportedChartType()||f){d="Graph Type Not Supported";b=new W.TextObject({TripleId:new W.TripleId({ObjectId:A.DssGraphWarningMessage}),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}if(!this.checkDataset()){d="Insufficient Data To Plot";b=new W.TextObject({TripleId:new W.TripleId([A.DssGraphWarningMessage,C,E]),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}var h=j.mImageUsage===32;if(h){d=this.mDatasetPtr.GetBannerText();b=new W.TextObject({TripleId:new W.TripleId([A.DssGraphBanner,0,0]),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}return false;}mstrmojo.chart.ChartManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.ChartManager",mGraphType:D.DssGraphTypeVertical_Bar_Side_by_Side,mPlotManagers:null,mDatasetPtr:null,mLegendPtr:null,mHighlightLayerObjectPtr:null,mIsTitleShown:false,mIsSubtitleShown:false,mIsFootnoteShown:false,mIsLegendShown:false,mIsExpanded:false,mIsInitialized:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,mAxisLabelsAutoFit:true,init:function T(b){this._super(b);this.mPlotManagers=[];},GenerateMapAndList:function N(){var j=this.mChartContextPtr,f,g,e,h,c,b,d;this.LoadProperties();f=new W.Rect2D({x:0,y:0,width:j.mGraphWidth,height:j.mGraphHeight});if(P.call(this,f)===true){this.mIsInitialized=true;return ;}if(!j.mIsGraphMatrix){g=j.GetProperty(F.DssGraph2ScaleDirection,new W.TripleId({ObjectId:G.DssGraphO1Body,SeriesId:-3}));if(g){this.mDatasetPtr.mReverseGroup=(g!==Q);}else{this.mDatasetPtr.mReverseGroup=false;}e=this.CreateBackground();this.mGraphObjectList.unshift(e);this.AddToMap(e);}h=null;c=null;switch(j.GetGraphMajorType()){case B.GMT_GRID:this.CalculateLayout(f);c=new W.GridChartPlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;case B.GMT_BOX:case B.GMT_CATEGORY:this.CalculateLayout(f);c=new W.CategoryPlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;case B.GMT_PIE:break;case B.GMT_SCATTER:case B.GMT_BUBBLE:this.CalculateLayout(f);c=new W.ValuePlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;default:P.call(this,f,true);break;}if(c!==null&&c!==undefined){this.mGraphObjectManagerList.unshift(c);c.SetDataset(this.mDatasetPtr);c.mLegendPtr=this.mLegendPtr;if(j.mIsTimeSeriesChart){this.mRightMargin=0;}c.SetMarginInfo(this.mLeftMargin,this.mRightMargin,this.mTopMargin,this.mBottomMargin);this.mPlotManagers.push(c);b=this.mPlotManagers.length;for(d=0;d<b;++d){this.mPlotManagers[d].GenerateMapAndList();}}this.mIsInitialized=true;},LoadProperties:function L(){var f=this.mChartContextPtr,d,e,c,b;d=f.GetProperty(F.DssGraphType,Y);if(d){this.mGraphType=d;}if(f.mIsTimeSeriesChart||f.mIsGraphMatrix){this.mIsTitleShown=false;this.mIsSubtitleShown=false;this.mIsFootnoteShown=false;this.mIsLegendShown=false;return ;}e=f.GetGraphMajorType();if(e!==B.GMT_3D_CATEGORY&&e!==B.GMT_HISTOGRAM&&e!==B.GMT_BOX){d=f.GetProperty(F.DssGraphShowLegendText,Y);if(d){this.mIsLegendShown=d!==Q;}}d=f.GetProperty(F.DssGraphShowTitle,Y);if(d){this.mIsTitleShown=d!==Q;}d=f.GetProperty(F.DssGraphShowSubtitle,Y);if(d){this.mIsSubtitleShown=d!==Q;}d=f.GetProperty(F.DssGraphShowfootnote,Y);if(d){this.mIsFootnoteShown=d!==Q;}c=false;if(!f.mManualLayoutMode){c=true;}else{d=f.GetProperty(a.DssGraphInfoRecalculateLegend,Y);if(d){if(d!==Q){c=true;}}}if(c){d=f.GetProperty(a.DssGraphInfoAutosizeHorizontal,Y);b=f.GetProperty(a.DssGraphInfoAutosizeVertical,Y);if(d&&b){this.mIsExpanded=(d!==Q&&b!==Q);}}if(f.mManualLayoutMode){d=f.GetProperty(F.DssGraphAxisAutoFit,new W.TripleId({ObjectId:G.DssGraphO1Body}));if(d){this.mAxisLabelsAutoFit=d!==Q;}if(this.mAxisLabelsAutoFit){f.mRecalculateFrame=true;}}},CreateBackground:function I(){var d=this.mChartContextPtr,c,b;c=new W.TripleId({ObjectId:G.DssGraphBackground,SeriesId:C,GroupId:E});b=new W.Rect2D({x:0,y:0,width:d.mGraphWidth,height:d.mGraphHeight});return new W.RectangleObject({TripleId:c,GraphObjectManager:this,Area:b});},isSupportedChartType:function V(){var c=this.mChartContextPtr,b;b=c.GetGraphMajorType();switch(b){case B.GMT_CATEGORY:case B.GMT_PIE:case B.GMT_BUBBLE:case B.GMT_SCATTER:case B.GMT_GRID:case B.GMT_BOX:return true;default:return false;}},checkDataset:function H(){var c=this.mDatasetPtr.GetSeriesCount(),e=this.mChartContextPtr;if(this.mDatasetPtr.CountMetric()===0&&this.mChartContextPtr.mIsGraphMatrix){var b=this.mDatasetPtr.IsHeaderEmpty(true),d=this.mDatasetPtr.IsHeaderEmpty(false);return(!d||!b);}return true;},CalculateLayout:function S(AA){var h=this.mChartContextPtr,AB,t,AF,n,AH,f,w,AD,k,o,l,b,u,p,z,AG,y,e,d,j,q,AC,AE,s,x,c,r,g;AB=0;t=0;if(h.mIsTimeSeriesChart){g=J.sDefaultMarginForTimeSeries;AB=g;t=g;this.mRightMargin=0;}else{if(h.mIsUniformAxisMode&&!(h.mIsEntireChart)){g=J.sDefaultUniformAxisMargin;AB=g;t=g;this.mRightMargin=t;}else{g=J.sDefaultMargin;AB=h.vdHeight(g);t=h.vdWidth(g);this.mRightMargin=t;}}AF=AA.x+AA.width;n=AA.y+AA.height;AA.x+=t;AA.y+=AB;AF-=this.mRightMargin;n-=AB;AA.width=AF-AA.x;AA.height=n-AA.y;this.mLeftMargin=t;this.mTopMargin=AB;this.mBottomMargin=AB;if(h.mIsTimeSeriesChart){return ;}AH=null;if(this.mIsTitleShown){f=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultTitlePosition);w=new W.TripleId({ObjectId:G.DssGraphTitle});c=h.GetProperty(F.DssGraphTextContent,w);if(c){y=c;}else{y="Graph Title";}AH=new W.TextObject({TripleId:w,GraphObjectManager:this,rect:f});AH.SetText(y);this.AddToMapAndList(AH);if(!h.mManualLayoutMode||h.mRecalculateFrame){AD=AH.GetBoundingRect();n=AA.y+AA.height;AA.y=AD.y+AD.height+AB;AA.height=n-AA.y;if(AA.height<0){AA.height=0;}}if(h.mManualLayoutMode){f=h.GetLocation(F.DssGraphTitleLocation);AH.SetRect(f);AH.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(F.DssGraphTitleLocation,AD);}}}k=null;if(this.mIsSubtitleShown){l=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultSubtitlePosition);o=new W.TripleId({ObjectId:G.DssGraphSubtitle});c=h.GetProperty(F.DssGraphTextContent,o);y=(c===null||c===undefined)?("Graph Subtitle"):c;k=new W.TextObject({TripleId:o,GraphObjectManager:this,rect:l});k.SetText(y);this.AddToMapAndList(k);if(!h.mManualLayoutMode||h.mRecalculateFrame){k.MoveTo(l.x,AA.y);b=k.GetBoundingRect();n=AA.y+AA.height;AA.y=b.y+b.height+AB;AA.height=n-AA.y;if(AA.height<0){AA.height=0;}}if(h.mManualLayoutMode){l=h.GetLocation(W.DssGraphSubTitleLocation);k.SetRect(l);k.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(W.DssGraphTitleLocation,b);}}}u=null;if(this.mIsFootnoteShown){z=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultFootnotePosition);p=new W.TripleId({ObjectId:G.DssGraphFootnote});c=h.GetProperty(F.DssGraphTextContent,p);if(c===null||c===undefined){y="Graph Footnote";}else{y=c;}u=new W.TextObject({TripleId:p,GraphObjectManager:this,rect:z});u.SetText(y);this.AddToMapAndList(u);if(!h.mManualLayoutMode||h.mRecalculateFrame){AG=u.GetBoundingRect();u.MoveTo(z.x,AA.y+AA.height-AG.height);AA.height=(AA.y+AA.height-AB-AG.height)-AA.y;if(AA.height<0){AA.height=0;}}if(h.mManualLayoutMode){z=h.GetLocation(F.DssGraphFootnoteLocation);u.SetRect(z);u.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(F.DssGraphTitleLocation,AG);}}}e=h.mGraphWidth;d=h.mGraphHeight;if(this.mIsLegendShown&&!h.mIsGraphMatrix){j=this.mDatasetPtr.GetSeriesCount();if(j===1){q=this.mDatasetPtr.GetSeriesLabel(0,false);if(q===""){this.mIsLegendShown=false;}}}if(this.mIsLegendShown){if(AA.height>0){this.mLegendPtr=new W.Legend({TripleId:new W.TripleId({ObjectId:K}),GraphObjectManager:this,DataSet:this.mDatasetPtr,Area:AA});this.mLegendPtr.GenerateMapAndList();this.mGraphObjectManagerList.push(this.mLegendPtr);if(!h.mManualLayoutMode||h.mRecalculateFrame){AC=new W.Rect2D({Rect2D:AA});this.mLegendPtr.CalculateFrame(t,AB,AA);this.mLeftMargin+=AA.x-AC.x;this.mRightMargin+=AC.x+AC.width-(AA.x+AA.width);this.mBottomMargin+=AC.y+AC.height-(AA.y+AA.height);if(!h.mManualLayoutMode){if(this.mIsExpanded){if(AH!==null&&AH!==undefined){f=h.vdRect(W.gDefaultTitlePosition);AH.SetRect(f);AH.CalculateDeviceRect();h.PutLocation(F.DssGraphTitleLocation,f);}if(k!==null&&k!==undefined){l=h.vdRect(W.gDefaultSubtitlePosition);k.SetRect(l);k.CalculateDeviceRect();h.PutLocation(F.DssGraphSubTitleLocation,l);}if(u!==null&&u!==undefined){z=h.vdRect(W.gDefaultFootnotePosition);u.SetRect(z);u.CalculateDeviceRect();h.PutLocation(F.DssGraphFootnoteLocation,z);}}}}}}if(h.mManualLayoutMode&&!h.mRecalculateFrame){AE=h.mGraphWidth;s=h.mGraphHeight;if(this.mIsExpanded){h.SetGraphSize(e,d);}if(this.mIsExpanded){h.SetGraphSize(AE,s);}}else{if(!this.mChartContextPtr.mIsGraphMatrix){x=15;c=h.GetProperty(F.DssGraphFontSize100,new W.TripleId({ObjectId:G.DssGraphDataText,SeriesId:0}));if(c){x=Math.floor(c/100+0.5);}if(x>this.mTopMargin){r=x-this.mTopMargin;if(r>AA.height/10){r=AA.height/10;}AA.y+=r;AA.height-=r;this.mTopMargin=x;}}}},Draw:function O(){var b,d,c;if(!this.mIsInitialized){this.GenerateMapAndList();}b=this.mGraphObjectList.length;if(b>0){this.mGraphObjectList[0].Draw();}d=this.mPlotManagers.length;for(c=0;c<d;++c){this.mPlotManagers[c].Draw();}if(this.mLegendPtr!==null&&this.mLegendPtr!==undefined){this.mLegendPtr.Draw();}for(c=1;c<b;++c){this.mGraphObjectList[c].Draw();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","GenericContext","GraphObjectManager","ChartManager","Point2D","NumberObject","ChartAdvFormat");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory","EnumLabelLevelOption","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMajorGraphType","EnumAxisLabelsLocation","EnumGraphMatrixMarkerTypeInChart","EnumFontRotation","EnumRectCompare");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphFillEffect","EnumDSSGraphStockLayout");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var Av=mstrmojo.chart,Q=Av.enums,At=Q.EnumGraphMajorType,l=Q.EnumGraphMatrixMajorGraphType,Az=Q.EnumAxisDirection,f=Q.EnumAxisLabelsLocation,w=Q.EnumGraphMatrixMajorGraphType,I=Q.EnumFontRotation,Ap=Q.EnumGraphMatrixMarkerTypeInChart,Al=Q.EnumRectCompare,AV=Q.EnumImageUsage,Z=mstrmojo.hash,Ae=Av.gNullTripleId,Ao=mstrmojo.chart.model,Ab=Ao.enums,BB=Ab.EnumDSSGraphType,BC=Ab.EnumDSSGraphProperty,BD=Ab.EnumDSSGraphObject,AX=Ab.EnumVariantBool,AS=AX.VARIANT_FALSE,Ay=Ab.EnumDSSExtraGraphProperty,AZ=mstrmojo.chart.common.Utility,Ac=AZ.tripleId;var W=0,r=2147483647,A3=0,Ag=2,Y=0;var AI=new Av.Rect2D();var AK=new Av.TripleId();var AQ=new Av.ChartAdvFormat();var AW=20;function S(BM){var BN=1,BS=2,BO=4,BR=8;var BQ=this.mDatasetPtr.showHideItemsOnAxis(BM),BP=0;if(BQ.axisLabels){BP=BP|BO;}if(BQ.majorGrids){BP=BP|BS;}if(BQ.minorGrids){BP=BP|BR;}if(BQ.axisBody){BP=BP|BN;}return BP;}function Ax(BQ){var BP={HighTrim:0,LowTrim:0,isCaTrim:true};if(this.mUniformAxisPtr){var BO,BR=this.mChartContextPtr,BN=BR.getUniformAxisContext(),BM=BN.CategoryAxis;BO=BQ?BM.X:BM.Y;BP.HighTrim=BO.Trims[1];BP.LowTrim=BO.Trims[0];}return BP;}function AF(){var BO={PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};if(this.mUniformAxisPtr){var BN,BQ=this.mUniformAxisPtr,BR=this.mChartContextPtr,BM=BR.getUniformAxisContext(),BP=BM.ValueAxis;switch(BQ.Key){case"x2":case"X2":BN=BP.X2;BO.SecondaryLowTrim=BN.Trims[0];BO.SecondaryHighTrim=BN.Trims[1];break;case"y2":case"Y2":BN=BP.Y2;BO.SecondaryLowTrim=BN.Trims[0];BO.SecondaryHighTrim=BN.Trims[1];break;case"x":case"x1":case"X":case"X1":BN=BP.X1;BO.PrimaryLowTrim=BN.Trims[0];BO.PrimaryHighTrim=BN.Trims[1];break;default:BN=BP.Y1;BO.PrimaryLowTrim=BN.Trims[0];BO.PrimaryHighTrim=BN.Trims[1];break;}}return BO;}function AA(BV){var BT=this.mChartContextPtr.GetGraphMatrixContext(),BW=BV.ShapeType||BT.mMarkerShape;BT.mGraphType=this.mGraphType;BT.updateGMGraphTypeWithMarkerShape(BW);if(BV.DataAreaPaddings){BT.UpdateValueAxisPadding(BV.DataAreaPaddings);}if(BV.ColorBy){var BU=BV.ColorBy;BT.mHasColorBy=BU.HasColorBy||false;}if(BV.SizeBy){var Ba=BV.SizeBy;BT.mHasSizeBy=Ba.HasSizeBy||BT.mHasSizeBy;BT.mMaxSizeVal=Ba.Max||BT.mMaxSizeVal;BT.mMinSizeVal=Ba.Min||BT.mMinSizeVal;BT.mCustomScaleForSizeBy=Ba.mCustomScaleForSizeBy||Ba.CustomScaleForSizeBy;}var BQ=this.mChartContextPtr,BZ=BQ.GetGraphMajorType();BT.mHasSizeBy=(BZ===At.GMT_BUBBLE)||BT.mHasSizeBy;var BO=1,Bb=2,BY=4,BM=8;BT.AxisLayout=BV.AxisLayout||(BO|Bb);if(BV.ElementInfo){var BS=BT.mElementsInfo.Max,BP=BT.mElementsInfo.Min,BN=BV.ElementInfo;if(BN.Max){var BX=BN.Max;BS.Mode=BX.Mode||BS.Mode;BS.Size=BX.Size||BS.Size;}if(BN.Min){var BR=BN.Min;BP.Mode=BR.Mode||BP.Mode;BP.Size=BR.Size||BP.Size;}}}function t(BU){var BQ=this.mChartContextPtr,BT=BQ.getUniformAxisContext();if(BU.UniformAxisPaddings){var BR=BU.UniformAxisPaddings;this.UpdateUniformAxisMargins(BR);if(BQ.IsGridChart()===false){var BX=BT.ValueAxis,BO=BX.X1,BN=BX.X2,BW=BX.Y1,BV=BX.Y2;BV.Trims[1]=BR.ySecondaryHighTrim;BN.Trims[1]=BR.xSecondaryHighTrim;BV.Trims[0]=BR.ySecondaryLowTrim;BN.Trims[0]=BR.xSecondaryLowTrim;BW.Trims[1]=BR.yPrimaryHighTrim;BO.Trims[1]=BR.xPrimaryHighTrim;BW.Trims[0]=BR.yPrimaryLowTrim;BO.Trims[0]=BR.xPrimaryLowTrim;BN.perCell=BR.x2PerCell;BV.PerCell=BR.y2PerCell;BW.PerCell=BR.yPerCell;BO.PerCell=BR.xPerCell;}if(BQ.IsBubbleChart()===false&&BQ.IsScatterChart()===false){var BS=BT.CategoryAxis,BP=BS.X,BM=BS.Y;BP.Trims[0]=BR.xCaLowTrim;BP.Trims[1]=BR.xCaHighTrim;BM.Trims[0]=BR.yCaLowTrim;BM.Trims[1]=BR.yCaHighTrim;}}BT.mIsAxisTitleAndLabelRequired=false;}function BH(BM){switch(BM){case BD.DssGraphY1Body:case BD.DssGraphY2Body:case BD.DssGraphY3Body:case BD.DssGraphY4Body:case BD.DssGraphX1Body:case BD.DssGraphX2Body:return true;}return false;}function AJ(){var BM=this.mChartContextPtr.mGraphType;switch(BM){case BB.DssGraphTypeX_Y_Scatter:case BB.DssGraphTypeDualAxis_X_Y_Scatter:case BB.DssGraphTypeX_Y_Scatter_with_Labels:case BB.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case BB.DssGraphTypeBubble:case BB.DssGraphTypeBubble_DualAxis:case BB.DssGraphTypeBubble_With_Labels:case BB.DssGraphTypeBubble_DualAxis_With_Labels:case BB.DssGraphTypeHorizontal_Line_Absolute:case BB.DssGraphTypeHorizontal_Line_Stacked:case BB.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case BB.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case BB.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case BB.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case BB.DssGraphTypeHorizontal_Line_Percent:case BB.DssGraphTypeHorizontal_Bar_Side_by_Side:case BB.DssGraphTypeHorizontal_Bar_Stacked:case BB.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BB.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case BB.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BB.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case BB.DssGraphTypeHorizontal_Bar_Percent:case BB.DssGraphTypeHorizontal_Bar_Absolute:case BB.DssGraphTypeHorizontal_Area_Absolute:case BB.DssGraphTypeHorizontal_Area_Stacked:case BB.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BB.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BB.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BB.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BB.DssGraphTypeHorizontal_Area_Percent:case BB.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case BB.DssGraphTypeHorizontal_Line_DualAxis_Percent:case BB.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function A4(){switch(this.mChartContextPtr.mGraphType){case BB.DssGraphTypeHorizontal_Line_Absolute:case BB.DssGraphTypeHorizontal_Line_Stacked:case BB.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case BB.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case BB.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case BB.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case BB.DssGraphTypeHorizontal_Line_Percent:case BB.DssGraphTypeHorizontal_Bar_Side_by_Side:case BB.DssGraphTypeHorizontal_Bar_Stacked:case BB.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BB.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case BB.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BB.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case BB.DssGraphTypeHorizontal_Bar_Percent:case BB.DssGraphTypeHorizontal_Bar_Absolute:case BB.DssGraphTypeHorizontal_Area_Absolute:case BB.DssGraphTypeHorizontal_Area_Stacked:case BB.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BB.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BB.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BB.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BB.DssGraphTypeHorizontal_Area_Percent:case BB.DssGraphTypeGridChart:case BB.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case BB.DssGraphTypeHorizontal_Line_DualAxis_Percent:case BB.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function Au(BM,BN){if(BM){return AJ.call(this)?1:0;}return A4.call(this)?0:1;}function Af(BO,BS,BN,BP,BR,BT){BO.mDataAreaBottomMargin=BO.mDataAreaTopMargin=BO.mDataAreaRightMargin=BO.mDataAreaLeftMargin=0;return ;var BM,BQ;if(BR){if(BP>=0){BO.mDataAreaLeftMargin=BS.x;}else{if(BO.mDataAreaLeftMargin<BS.x){BO.mDataAreaLeftMargin=BS.x;}}BO.mDataAreaRightMargin=BN-(BS.x+BS.width);BO.mDataAreaLeftMargin=Math.max(0,BO.mDataAreaLeftMargin);BO.mDataAreaRightMargin=Math.max(0,BO.mDataAreaRightMargin);BM=BO.mDataAreaLeftMargin;BQ=BO.mDataAreaRightMargin;}else{BO.mDataAreaTopMargin=BS.y;BO.mDataAreaBottomMargin=BN-(BS.y+BS.height);if(BO.mDataAreaBottomMargin<0){BO.mDataAreaBottomMargin=0;}BO.mDataAreaTopMargin=Math.max(0,BO.mDataAreaTopMargin);BO.mDataAreaBottomMargin=Math.max(0,BO.mDataAreaBottomMargin);BM=BO.mDataAreaBottomMargin;BQ=BO.mDataAreaTopMargin;}}function AH(){var BN,BO=this.mChartContextPtr;if(BO.mIsGraphMatrix){var BM=BO.getUniformAxisContext();BN=BM.ValueAxis.Y2;return BN.Metrics.length>0;}return BO.IsDualAxis();}function g(BO,BP){if(Au.call(this,BO,BP)===0){return true;}var BQ=this.mChartContextPtr,BM=BQ.getValueAxisKeyFromLayout(BO,BP),BN=BQ.getUniformAxisContext().ValueAxis;return BN[BM].Metrics.length>0;}function A0(){var BN=this.mChartContextPtr,BM;if(BN.mIsGraphMatrix){BN.mAbsoluteFontLineSize=true;BN.mManualLayoutMode=false;this.mFontAntiAlias=true;BN.mIsFontAntiAlias=this.mFontAntiAlias;return ;}if(!BN.mIsTimeSeriesChart){BM=BN.GetProperty(BC.DssGraphLockFontSize,Ae);if(BM){BN.mAbsoluteFontLineSize=(BM!==AS);}else{BN.mAbsoluteFontLineSize=true;}BM=BN.GetProperty(BC.DssGraphSeriesByColumn,Ae);if(BM){this.mDatasetPtr.mSeriesByColumn=(BM!==AS);}else{this.mDatasetPtr.mSeriesByColumn=true;}}BM=BN.GetProperty(BC.DssGraphAutoArrange,Ae);if(BM){BN.mManualLayoutMode=(BM===AS);if(BM===AS){BM=BN.GetProperty(Ay.DssGraphInfoRecalculateChartFrame,Ae);if(BM){BN.mRecalculateFrame=(BM!==AS);}else{BN.mRecalculateFrame=false;}}}else{BN.mManualLayoutMode=false;}BM=BN.GetProperty(BC.DssGraphFontAntiAlias,Ae);if(BM){this.mFontAntiAlias=BM;}else{this.mFontAntiAlias=true;}BN.SetFontAntiAlias(this.mFontAntiAlias);}function A8(BP,BO,BQ,BN){BO=(BO!==undefined)?BO:-1;BQ=(BQ!==undefined)?BQ:true;this.mAxisLayoutHighPadding=0;this.mAxisLayoutLowPadding=0;if(g.call(this,BP,BQ)===false){BN.CanSkip=true;return ;}var BR=this.mChartContextPtr;BN.IsPrimary=BQ;BN.MaxLabelLength=BO;var BM=BR.getUniformAxisContext();BM.mIsAxisTitleAndLabelRequired=true;BR.mIsEntireChart=false;A0.call(this);if(g.call(this,BP,BQ)===false){BN.CanSkip=true;}}function BL(){this.mAxisLayoutHighPadding=this.mUniformAxisPtr.mHighTrim||0;this.mAxisLayoutLowPadding=this.mUniformAxisPtr.mLowTrim||0;}function AU(BQ,BP,BM,BR,BO){if(this.mVisualMode===A3){BO.CanSkip=true;return ;}if(BQ){if(BP<=AW&&AJ.call(this)){BO.CanSkip=true;return ;}}else{if(BM<=AW&&A4.call(this)===false){BO.CanSkip=true;return ;}}var BS=this.mChartContextPtr;BS.SetGraphSize(BP,BM);BS.mIsEntireChart=false;var BN=BS.getUniformAxisContext();BN.mIsAxisTitleAndLabelRequired=true;if(BR===undefined){BR=true;}BO.IsPrimary=BR;if(BO===undefined){BO={SkipLayout:false};}else{if(BO&&BO.SkipLayout){BO.SkipLayout=BO.SkipLayout&&(this.mUniformAxisPtr!==null);}else{BO.SkipLayout=false;}}BS.populateCanvas();}function b(BN,BU){var BO=200,BR=201,BM=202,BX=4,BP=1,BY=24,BQ=this.mChartContextPtr,BW=BQ.GetGraphMatrixContext(),BS=BQ.mGraphType;BQ.mGraphType=BN;var BV=BQ.GetGraphMajorType(),BT=BW.isCombinationChart()||BU===203;if(BU===BO){if(BV===At.GMT_CATEGORY){if(BQ.IsBarChart()){switch(BN){case BB.DssGraphTypeVertical_Bar_Absolute:case BB.DssGraphTypeVertical_Bar_Side_by_Side:BN=BB.DssGraphTypeVertical_Line_Absolute;break;case BB.DssGraphTypeVertical_Bar_Stacked:BN=BB.DssGraphTypeVertical_Line_Stacked;break;case BB.DssGraphTypeVertical_Bar_BiPolar_Absolute:BN=BB.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BB.DssGraphTypeVertical_Bar_BiPolar_Stacked:BN=BB.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Absolute:BN=BB.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Stacked:BN=BB.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BB.DssGraphTypeVertical_Bar_Percent:BN=BB.DssGraphTypeVertical_Line_Percent;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Percent:BN=BB.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;case BB.DssGraphTypeHorizontal_Bar_Percent:BN=BB.DssGraphTypeHorizontal_Line_Percent;break;case BB.DssGraphTypeHorizontal_Line_Percent:BN=BB.DssGraphTypeHorizontal_Line_Percent;break;case BB.DssGraphTypeHorizontal_Bar_Absolute:case BB.DssGraphTypeHorizontal_Bar_Side_by_Side:BN=BB.DssGraphTypeHorizontal_Line_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_Stacked;break;case BB.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;}}else{if(BQ.IsAreaChart()){switch(BN){case BB.DssGraphTypeVertical_Area_Absolute:BN=BB.DssGraphTypeVertical_Line_Absolute;break;case BB.DssGraphTypeVertical_Area_Stacked:BN=BB.DssGraphTypeVertical_Line_Stacked;break;case BB.DssGraphTypeVertical_Area_BiPolar_Absolute:BN=BB.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BB.DssGraphTypeVertical_Area_BiPolar_Stacked:BN=BB.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BB.DssGraphTypeVertical_Area_DualAxis_Absolute:BN=BB.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BB.DssGraphTypeVertical_Area_DualAxis_Stacked:BN=BB.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BB.DssGraphTypeVertical_Area_Percent:BN=BB.DssGraphTypeVertical_Line_Percent;break;case BB.DssGraphTypeHorizontal_Area_Absolute:BN=BB.DssGraphTypeHorizontal_Line_Absolute;break;case BB.DssGraphTypeHorizontal_Area_Stacked:BN=BB.DssGraphTypeHorizontal_Line_Stacked;break;case BB.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BB.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BB.DssGraphTypeHorizontal_Area_Percent:BN=BB.DssGraphTypeHorizontal_Line_Percent;break;case BB.DssGraphTypeVertical_Area_DualAxis_Percent:BN=BB.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Percent:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}else{if(BU===BR||BU===BM){if(BQ.IsAreaChart()){switch(BN){case BB.DssGraphTypeVertical_Area_Absolute:BN=BB.DssGraphTypeVertical_Line_Absolute;break;case BB.DssGraphTypeVertical_Area_Stacked:BN=BB.DssGraphTypeVertical_Line_Stacked;break;case BB.DssGraphTypeVertical_Area_BiPolar_Absolute:BN=BB.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BB.DssGraphTypeVertical_Area_BiPolar_Stacked:BN=BB.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BB.DssGraphTypeVertical_Area_DualAxis_Absolute:BN=BB.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BB.DssGraphTypeVertical_Area_DualAxis_Stacked:BN=BB.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BB.DssGraphTypeVertical_Area_Percent:BN=BB.DssGraphTypeVertical_Line_Percent;break;case BB.DssGraphTypeHorizontal_Area_Absolute:BN=BB.DssGraphTypeHorizontal_Line_Absolute;break;case BB.DssGraphTypeHorizontal_Area_Stacked:BN=BB.DssGraphTypeHorizontal_Line_Stacked;break;case BB.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BB.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BB.DssGraphTypeHorizontal_Area_Percent:BN=BB.DssGraphTypeHorizontal_Line_Percent;break;case BB.DssGraphTypeVertical_Area_DualAxis_Percent:BN=BB.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Percent:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BQ.IsBarChart()){switch(BN){case BB.DssGraphTypeVertical_Bar_Absolute:case BB.DssGraphTypeVertical_Bar_Side_by_Side:BN=BB.DssGraphTypeVertical_Line_Absolute;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Stacked:BN=BB.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BB.DssGraphTypeVertical_Bar_Stacked:BN=BB.DssGraphTypeVertical_Line_Stacked;break;case BB.DssGraphTypeVertical_Bar_BiPolar_Stacked:BN=BB.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BB.DssGraphTypeHorizontal_Bar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_Stacked;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BB.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BB.DssGraphTypeVertical_Bar_Percent:BN=BB.DssGraphTypeVertical_Line_Percent;break;case BB.DssGraphTypeHorizontal_Bar_Percent:BN=BB.DssGraphTypeHorizontal_Line_Percent;break;case BB.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case BB.DssGraphTypeVertical_Bar_BiPolar_Absolute:BN=BB.DssGraphTypeVertical_Bar_BiPolar_Absolute;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case BB.DssGraphTypeVertical_Bar_DualAxis_Absolute:BN=BB.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BB.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BB.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_Side_by_Side:case BB.DssGraphTypeHorizontal_Bar_Absolute:BN=BB.DssGraphTypeHorizontal_Line_Absolute;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Percent:BN=BB.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BU===BX||BU===BP||BU===BY){if(BQ.IsAreaChart()){switch(BN){case BB.DssGraphTypeVertical_Area_Absolute:BN=BB.DssGraphTypeVertical_Line_Absolute;break;case BB.DssGraphTypeVertical_Area_Stacked:BN=BB.DssGraphTypeVertical_Line_Stacked;break;case BB.DssGraphTypeVertical_Area_BiPolar_Absolute:BN=BB.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BB.DssGraphTypeVertical_Area_BiPolar_Stacked:BN=BB.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BB.DssGraphTypeVertical_Area_DualAxis_Absolute:BN=BB.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BB.DssGraphTypeVertical_Area_DualAxis_Stacked:BN=BB.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BB.DssGraphTypeVertical_Area_Percent:BN=BB.DssGraphTypeVertical_Line_Percent;break;case BB.DssGraphTypeHorizontal_Area_Absolute:BN=BB.DssGraphTypeHorizontal_Line_Absolute;break;case BB.DssGraphTypeHorizontal_Area_Stacked:BN=BB.DssGraphTypeHorizontal_Line_Stacked;break;case BB.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BB.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BB.DssGraphTypeHorizontal_Area_Percent:BN=BB.DssGraphTypeHorizontal_Line_Percent;break;case BB.DssGraphTypeVertical_Area_DualAxis_Percent:BN=BB.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Percent:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BQ.IsBarChart()){switch(BN){case BB.DssGraphTypeVertical_Bar_Side_by_Side:case BB.DssGraphTypeVertical_Bar_Absolute:BN=BB.DssGraphTypeVertical_Line_Absolute;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Absolute:case BB.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:BN=BB.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BB.DssGraphTypeVertical_Bar_BiPolar_Absolute:case BB.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:BN=BB.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_Side_by_Side:case BB.DssGraphTypeHorizontal_Bar_Absolute:BN=BB.DssGraphTypeHorizontal_Line_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case BB.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case BB.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Stacked:BN=BB.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BB.DssGraphTypeVertical_Bar_Stacked:BN=BB.DssGraphTypeVertical_Line_Stacked;break;case BB.DssGraphTypeVertical_Bar_BiPolar_Stacked:BN=BB.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BB.DssGraphTypeHorizontal_Bar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_Stacked;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BB.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BB.DssGraphTypeVertical_Bar_Percent:BN=BB.DssGraphTypeVertical_Line_Percent;break;case BB.DssGraphTypeHorizontal_Bar_Percent:BN=BB.DssGraphTypeHorizontal_Line_Percent;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Percent:BN=BB.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BT){if(BQ.IsBarChart()){switch(BN){case BB.DssGraphTypeVertical_Bar_Absolute:case BB.DssGraphTypeVertical_Bar_Side_by_Side:BN=BB.DssGraphTypeVertical_Line_Absolute;break;case BB.DssGraphTypeVertical_Bar_Stacked:BN=BB.DssGraphTypeVertical_Line_Stacked;break;case BB.DssGraphTypeVertical_Bar_BiPolar_Absolute:BN=BB.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BB.DssGraphTypeVertical_Bar_BiPolar_Stacked:BN=BB.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case BB.DssGraphTypeVertical_Bar_DualAxis_Absolute:BN=BB.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Stacked:BN=BB.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BB.DssGraphTypeVertical_Bar_Percent:BN=BB.DssGraphTypeVertical_Line_Percent;break;case BB.DssGraphTypeHorizontal_Bar_Percent:BN=BB.DssGraphTypeHorizontal_Line_Percent;break;case BB.DssGraphTypeHorizontal_Bar_Absolute:case BB.DssGraphTypeHorizontal_Bar_Side_by_Side:BN=BB.DssGraphTypeHorizontal_Line_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_Stacked;break;case BB.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BB.DssGraphTypeHorizontal_Line_Percent:BN=BB.DssGraphTypeHorizontal_Line_Percent;break;case BB.DssGraphTypeVertical_Bar_DualAxis_Percent:BN=BB.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BB.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BQ.IsAreaChart()){switch(BN){case BB.DssGraphTypeVertical_Area_Absolute:BN=BB.DssGraphTypeVertical_Line_Absolute;break;case BB.DssGraphTypeVertical_Area_Stacked:BN=BB.DssGraphTypeVertical_Line_Stacked;break;case BB.DssGraphTypeVertical_Area_BiPolar_Absolute:BN=BB.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BB.DssGraphTypeVertical_Area_BiPolar_Stacked:BN=BB.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BB.DssGraphTypeVertical_Area_DualAxis_Absolute:BN=BB.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BB.DssGraphTypeVertical_Area_DualAxis_Stacked:BN=BB.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BB.DssGraphTypeVertical_Area_Percent:BN=BB.DssGraphTypeVertical_Line_Percent;break;case BB.DssGraphTypeHorizontal_Area_Absolute:BN=BB.DssGraphTypeHorizontal_Line_Absolute;break;case BB.DssGraphTypeHorizontal_Area_Stacked:BN=BB.DssGraphTypeHorizontal_Line_Stacked;break;case BB.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BB.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BN=BB.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BB.DssGraphTypeHorizontal_Area_Percent:BN=BB.DssGraphTypeHorizontal_Line_Percent;break;case BB.DssGraphTypeVertical_Area_DualAxis_Percent:BN=BB.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BB.DssGraphTypeHorizontal_Area_DualAxis_Percent:BN=BB.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}}}BQ.mGraphType=BS;return BN;}function H(BQ,BP,BN){var BM=BN.length,BO;for(BO=0;BO<BM;++BO){if(BN[BO].si===BQ&&BN[BO].gi===BP){return true;}}return false;}function q(BP,Ba,BU,BS,BR,BZ){var Bb={},BQ=this.mChartContextPtr,BT,BX;if(BQ.mCanvas===null){BQ.populateCanvas();}BP=BP||1014;Ba=Ba||694;Bb.GW=BP;Bb.GH=Ba;BQ.SaveSurfaceToObject(Bb);var BY=this.mChartContextPtr.GetProperty(BC.DssGraphSeriesByColumn,Ae),BW,BM;if(BY&&BY!==AS){BW=BS;BM=BU;}else{BW=BU;BM=BS;}var BN=[];BX=BN.length;if(BX>0){Bb.Areas=[];for(BT=0;BT<BX;++BT){var BO={};var BV=new Av.TripleId({ObjectId:BN[BT].GetObjectID(),SeriesId:BN[BT].GetSeriesID(),GroupId:BN[BT].GetGroupID()});if(BV.mObjectId!==BD.DssGraphRiser&&BV.mObjectId!==BD.DssGraphDataMarker&&BV.mObjectId!==BD.DssGraphPieSlice&&BV.mObjectId!==BD.DssGraphLegendMarker&&BV.mObjectId!==BD.DssGraphLegendText&&BV.mObjectId!==BD.DssGraph2DO1Label){continue;}if(!H.call(this,BV.mSeriesId,BV.mGroupId,BZ)){continue;}BO.OID=BV.mObjectId;BO.SID=BV.mSeriesId;BO.GID=BV.mGroupId;BO.Shape=BN[BT].GetShape();BO.Coords=BN[BT].GetCoordinates();Bb.Areas.push(BO);}}if(BZ.length>0){BX=BZ.length;Bb.Selected=[];for(BT=0;BT!==BX;++BT){Bb.Selected.push(BZ[BT].sid);Bb.Selected.push(BZ[BT].gid);}}return Bb;}function B(BR){if(BR){var BQ=this.mChartContextPtr,BO=this.mChartManagerPtr;if(!(BQ&&BO&&BQ.mIsGraphMatrix)){return ;}if(BQ.mPartialRendering&&(BQ.IsBubbleChart()||BQ.IsScatterChart())){var BN=BO.GetGraphObjectManager(Av.PlotId0),BM,BP=false;if(BN&&BN.waitingList){BM=BN.waitingList;if(BP){BR.hiddenItems=BR.hiddenItems||[];BM.forEach(function(BS){BR.hiddenItems.push({x:BS.Position.x,y:BS.Position.y,shp:BS.Shape,sz:BS.Size,id:null});});}else{BR.hiddenItems=BN.waitingList;delete BN.waitingList;}}}}}function N(){this.mDatasetPtr.finalize();var BM=this.mChartManagerPtr;BM.Draw();}function A5(){var BM=this.mChartContextPtr;if(BM.GetGraphMatrixGraphMajorType()===w._AREA&&BM.IsVertical()){return 1;}return 2;}function AO(BN,BP,BO,BM){if(BO===null||BO===undefined){return ;}if(BM){if(BP){BO.ResetAxisPadding();BO.SetDataset(this.mDatasetPtr);BO.AdjustTitleArea(BN);BO.AdjustDataArea(BN,Y,Y,false);}else{BO.TrimAxisPadding(BN);BO.ReserveTitleAndLabels(BN,Y,Y);BO.AdjustDeviceDataArea(BN,false);}}else{if(BP){BO.TrimAxisPadding(BN,false);BO.SetDeviceDataArea(BN);BO.ResetAxisPadding();BO.GenerateMapAndList();}else{BO.TrimAxisPadding(BN,false);BO.SetDeviceDataArea(BN);BO.AdjustDeviceDataArea(BN,true);BO.UpdateTitleAndLabelArea(BN);BO.GenerateGridLinesEx();}}}function C(BN,BU,BT){var BO=this.mChartContextPtr;if(!BO.mIsGraphMatrix){return null;}var BP=null;if(BU){BP=this.mUniformAxisPtr;}else{var BM=[BD.DssGraphO1Body,BD.DssGraphX1Body,BD.DssGraphY1Body,BD.DssGraphY2Body];if(!BT&&!BO.IsDualAxis()){BT=true;}if(BO.GetGraphType()===BB.DssGraphTypeGridChart){var BQ=new Av.CategoryAxisInfo(),BS=this.mDatasetPtr.mSeriesByColumn;if(!BN){BQ.ToY(!BS);}else{BQ.ToX(BS);}Ac.reset(AK,BQ.mId.mObjectId,BQ.mId.mSeriesId,BQ.mId.mGroupId);}else{var BR;if(BO.IsVertical()){BR=BN?0:2;}else{BR=BN?2:0;}if(!BT){BR++;}Ac.reset(AK,BM[BR],0,-3);}BP=this.mChartManagerPtr.GetGraphObjectManager(AK,true);}return BP;}function BF(BO){var BT=this.mChartContextPtr,BM=false;if(BT.mIsTimeSeriesChart){BM=true;}else{var BQ=BT.GetProperty(BC.DssGraph2DOrdSpaceMode,Av.gNullTripleId);if(BQ){BM=BQ;}}var BN,BP=BT.GetGraphType();if(BP>=BB.DssGraphTypeVertical_Line_Absolute&&BP<=BB.DssGraphTypeHorizontal_Line_Percent){BN=true;}var BS=this.mDatasetPtr.GetGroupCount(),BR=(BS<=1&&BN);BO.mAxisCross=(BM&&BN&&!BR);}function AR(BM,BS,BT){var BR=BS[BM.toUpperCase()],BO=BR.CondenseLabel,BP=BT.PrimaryMetricIndex,BQ=BP.length>=1?BP[0]:-1,BN=BO[BQ],BU=BT.getCondenseStatus();if(BN!==null&&BN!==undefined){if(BU!==undefined){if(BU!==BN){BT.checkCondense(BN);}}}}function AT(BT,BW){BW=(BW!==undefined)?BW:true;var Bf="X1",Bd="X1",BQ=C.call(this,BT,true,BW),BR=0,Bb=BT?Az.AD_X:Az.AD_Y,BO=this.mChartContextPtr,BV=BO.getUniformAxisContext(),BU=BV.ValueAxis;var BX=Au.call(this,BT,BW)===BR,BZ,Ba,BP,Bc,BY;if(BQ){if(BX===false){BY=BQ.getCondenseStatus();if(BY===null){BZ=Bf;AR.call(this,BZ,BU,BQ);}}return BQ;}var BS=1;if(BX){var BM=BO.GetGraphType();if(BM===BB.DssGraphTypeGridChart){var Be=this.mDatasetPtr.mSeriesByColumn;if(BT){Bd=!Be?"O1":"O2";}else{Bd=Be?"O1":"O2";Bf="Y1";}}else{Bd="O1";if(!BT){Bf="Y1";}}if(Bd==="O1"){BO.caKeyMap.c1=Bf;}else{BO.caKeyMap.c2=Bf;}BQ=this.mUniformAxisPtr=new Av.CategoryAxis({TripleId:BO.getAxisTripleId(Bd),mChartContextPtr:this.mChartContextPtr,GraphObjectManager:this.mChartManagerPtr,AxisLabelsLocation:f.ALL_BOTTOM,AxisDirection:Bb,IsUA:true});BF.call(this,BQ);Ba=S.call(this,Bf);BQ.SetIntegrity(Ba);}else{if(!BT){Bf="Y1";Bd="Y1";}var BN=BT?BU.X1:BU.Y1;if(BW===false){Bf=BT?"X2":"Y2";BN=BU[Bf];Bd=BT?"X2":"Y2";}BP=BN.Metrics;BQ=this.mUniformAxisPtr=new Av.ValueAxis({mChartContextPtr:this.mChartContextPtr,TripleId:BO.getAxisTripleId(Bd),GraphObjectManager:this.mChartManagerPtr,Min:BN.Min,Max:BN.Max,LargerGridInterval:false,IsPercent:BO.IsPercentChart(),AxisDirection:Bb,IsShown:true,PrimaryMetricIndex:BP,IsUA:true});BZ=Bf;AR.call(this,BZ,BU,BQ);Bc=BU[BZ.toUpperCase()];if(Bc.Valid===false){BQ.SetIntegrity(BS);}else{BZ=Bf;if(BZ==="x"){BZ="X1";}Ba=S.call(this,BZ);BQ.SetIntegrity(Ba);}}BQ.mIsUniformAxis=true;BQ.Key=Bf;return BQ;}function AL(BU,BT,BM,BP){var BO,BQ,BS,BN=this.mChartContextPtr,BR=BN.getUniformAxisContext();if(BT===false){if(BU){BO=BM?"X1":"Y1";}else{BO=BM?"X2":"Y2";}BQ=BR.ValueAxis[BO];BQ.Trims[0]=BP.mLowTrim||0;BQ.Trims[1]=BP.mHighTrim||0;}else{BO=BM?"X":"Y";BS=BR.CategoryAxis[BO];BS.Trims[0]=BP.mLowTrim||0;BS.Trims[1]=BP.mHighTrim||0;}}function L(BN,BR,BP,BQ){if(BQ===undefined){BQ=true;}this.mChartContextPtr.resetCanvas();this.mDatasetPtr.finalize();var BO=AT.call(this,BR,BQ);BO.SetDeviceDataArea(BN);AO.call(this,BN,BP,BO,false);BO.resetRestrictSpace();AL.call(this,BQ,BP,BR,BO);var BM=Au.call(this,BR,BQ)===1;if(BM){this.mDatasetPtr.saveShownLabels(BO);}BO.Draw();}function F(BR,BS,BZ){var BP=this.mChartContextPtr,BT=BP.mDataset,Bb,BW=BP.getUniformAxisContext(),Ba=BW.ValueAxis,BO=BS?"X":"Y",BY;BO+=BZ?"1":"2";BY=Ba[BO].Max;var BV=true;var BN=BT.showDatalabels();if(BN){BV=(BT.dataLabelStyle===2);}var BM=BY,BU,BX=null;if(BV){AQ.restore();this.mDatasetPtr.getValueAxisNumberFormat(AQ,BR);var BQ=new Av.NumberObject({TripleId:new Av.TripleId({ObjectId:BD.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,Number:BM,NumberFormat:AQ,GraphCollectionObject:BX,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(BQ){BU=BQ.mText;}Bb=BQ;}else{BU=BT.GetTextLabel(0,0);Bb=new Av.TextObject({TripleId:new Av.TripleId({ObjectId:BD.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,GraphCollectionObject:BX});}if(Bb){Bb.SetText(BU);}return Bb;}function Am(BP,Bp,BO,BY,Bj){var BR=this.mChartContextPtr,Bc=this.mDatasetPtr,Bi,Bg=BR.getUniformAxisContext(),BW=this.mUniformAxisPtr,BS=new Av.Rect2D(),BU=false,Bl,BN,Be,BZ,BT,Bb,Ba,BV,Bf,BX,BQ,BM,Bm;BS.ResetRect(BP);Bi=BR.GetProperty(Ay.DSSGraphMatrixDataLabelRotated,Av.gNullTripleId);var Bd=Bc.showDatalabels();if(Bd&&BR.IsBarChart()&&Bi!==null){var Bh=Bi,Bo=Bg.ValueAxis,Bk=BY?"X":"Y";Bk+=Bj?"1":"2";Bl=Bo[Bk].Max;BM=F.call(this,Bp,BY,Bj);if(BY){BM.GetFormatFont().mFontRotation=I.FR_NORMAL;}else{if(Bh){BM.GetFormatFont().mFontRotation=I.FR_90;}else{BM.GetFormatFont().mFontRotation=I.FR_NORMAL;}}BN=BM.GetBoundingRect();Be=5;BZ=BW.GetMaxTick();BT=BW.GetMinTick();Bb=BW.GetPositionByValue(BZ);Ba=BW.GetPositionByValue(BT);BV=BW.GetPositionByValue(Bl);if(BY){if(BO-BV<Be*2+BN.width){Bf=BO-(Be*2+BN.width);BX=(BZ-BT)/(Bl-BT);BQ=Bb-Ba-BX*(Bf-Ba);BQ+=2;var Bn=(Bf>Ba);if(Bn&&BQ/(Bb-Ba)<0.2){BS.width-=BQ;BU=true;BP.ResetRect(BS);BW.dataLabelPadding=BQ;}}}else{if(Bl>0&&BV<Be*2+BN.height){Bf=Be*2+BN.height;BX=(BZ-BT)/(Bl-BT);BQ=Ba-Bb-BX*(Ba-Bf);BQ+=2;Bm=(Bf>BV);if(Bm&&BQ/(Ba-Bb)<0.2){BS.y+=BQ;BS.height-=BQ;BU=true;BP.ResetRect(BS);BW.dataLabelPadding=BQ;}}}}return BU;}function A9(BO,Bk,BY,Bg){return Am.call(this,BO,Bk,BY,true,Bg);var Bf,BP=0,BQ=this.mChartContextPtr,Ba=BQ.mDataset,Be=BQ.getUniformAxisContext(),Bh=this.mUniformAxisPtr,BR=new Av.Rect2D(),BT=false;BR.ResetRect(BO);Bf=BQ.GetProperty(Ay.DSSGraphMatrixDataLabelRotated,Av.gNullTripleId);var Bb=Ba.showDatalabels();if(Bb&&BQ.IsBarChart()&&Bf!==null){var Bi=Be.ValueAxis.X1.Max,BM=F.call(this,Bk,true);if(!!BM===false){return BT;}BM.GetFormatFont().mFontRotation=I.FR_NORMAL;var BN=BM.GetBoundingRect(),Bc=5,BW=Bh.GetMaxTick(),BS=Bh.GetMinTick();var BZ,BX,BU;BZ=Bh.GetPositionByValue(BW);BX=Bh.GetPositionByValue(BS);BU=Bh.GetPositionByValue(Bi);if(BY-BU<Bc*2+BN.width){var Bd=BY-(Bc*2+BN.width),BV=(BW-BS)/(Bi-BS);BP=BZ-BX-BV*(Bd-BX);BP+=2;var Bj=(Bd>BX);if(Bj&&BP/(BZ-BX)<0.2){BR.width-=BP;BT=true;BO.ResetRect(BR);Bh.dataLabelPadding=BP;}}}return BT;}function P(BO,Bm,Be,Bi){return Am.call(this,BO,Bm,Be,false,Bi);var BQ=this.mChartContextPtr,Ba=this.mDatasetPtr,Bh,Bf=BQ.getUniformAxisContext(),BW=this.mUniformAxisPtr,BR=new Av.Rect2D(),BT=false,Bk,Bj,BN,Bc,BX,BS,BZ,BY,BU,Bd,BV,BP,BM,Bl;BR.ResetRect(BO);Bh=BQ.GetProperty(Ay.DSSGraphMatrixDataLabelRotated,Av.gNullTripleId);var Bb=Ba.showDatalabels();if(Bb&&BQ.IsBarChart()&&Bh!==null){var Bg=Bh;Bk=Bf.ValueAxis.Y1.Max;Bj=Bf.ValueAxis.Y1.Min;BM=F.call(this,Bm,false);if(Bg){BM.GetFormatFont().mFontRotation=I.FR_90;}else{BM.GetFormatFont().mFontRotation=I.FR_NORMAL;}BN=BM.GetBoundingRect();Bc=5;BX=BW.GetMaxTick();BS=BW.GetMinTick();BZ=BW.GetPositionByValue(BX);BY=BW.GetPositionByValue(BS);BU=BW.GetPositionByValue(Bk);if(Bk>0&&BU<Bc*2+BN.height){Bd=Bc*2+BN.height;BV=(BX-BS)/(Bk-BS);BP=BY-BZ-BV*(BY-Bd);BP+=2;Bl=(Bd>BU);if(Bl&&BP/(BY-BZ)<0.2){BR.y+=BP;BR.height-=BP;BT=true;BO.ResetRect(BR);BW.dataLabelPadding=BP;}}}return BT;}function a(BR,BT,BS){var BP=false,BO=false,BM=Al.NONE,BN=this.mChartContextPtr.getUniformAxisContext(),BQ=this.mUniformAxisSpace;if(BT<0||BS<0){BQ.width=BT;BQ.height=BS;return BM;}BP=BT===BQ.width;BO=BS===BQ.height;if(BP&&BO){BM=Al.KeepBoth;}else{if(BP){BM=BS>BQ.height?Al.ExpandY:Al.ShrinkY;}else{if(BO){BM=BT>BQ.width?Al.ExpandX:Al.ShrinkX;}else{BM=Al.NONE;if(BR){BM=BT>BQ.width?Al.ExpandX:Al.ShrinkX;}else{BM=BS>BQ.height?Al.ExpandY:Al.ShrinkY;}}}}BQ.width=BT;BQ.height=BS;return BM;}function E(BN,BM){var BO=this.mChartContextPtr;if(this.mInitialized){return false;}if(BO.GetGraphMajorType()===At.GMT_HISTOGRAM){this.mDatasetPtr.mIsForHistogram=true;}BO.SetGraphSize(BN,BM);A0.call(this);this.mChartManagerPtr=new Av.ChartManager({mTripleId:Av.ManagerId,mDatasetPtr:this.mDatasetPtr,mChartContextPtr:BO});this.mChartManagerPtr.GenerateMapAndList();this.mInitialized=true;return true;}function AC(BM){switch(BM){case BB.DssGraphTypeVertical_Area_Absolute:case BB.DssGraphTypeVertical_Area_Stacked:case BB.DssGraphTypeVertical_Area_BiPolar_Absolute:case BB.DssGraphTypeVertical_Area_BiPolar_Stacked:case BB.DssGraphTypeVertical_Area_DualAxis_Absolute:case BB.DssGraphTypeVertical_Area_DualAxis_Stacked:case BB.DssGraphTypeVertical_Area_Percent:case BB.DssGraphTypeHorizontal_Area_Absolute:case BB.DssGraphTypeHorizontal_Area_Stacked:case BB.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BB.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BB.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BB.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BB.DssGraphTypeHorizontal_Area_Percent:case BB.DssGraphTypeD3_Connect_Group_Areas:case BB.DssGraphTypeD3_Connect_Group_Ribbons:case BB.DssGraphTypeD3_Connect_Series_Areas:case BB.DssGraphTypeD3_Connect_Series_Ribbons:case BB.DssGraphTypeD3_Surface:case BB.DssGraphTypeD3_Surface_with_Sides:case BB.DssGraphTypeD3_Honeycomb_Surface:return 2;default:return 1;}}function x(BW,BU,BM,BS){var BV=BW?BS:BM,BT=BW?BM:BS,BN=BM,BQ=true,BO,BR,BP=AT.call(this,BW,BU);BR=BP.resizeAction=a.call(this,BW,BV,BT);if(BR===Al.KeepBoth){return BP;}if(BM>=0){BP.resetRestrictSpace(this.mUniformAxisSpace);}if(BW){BO=this.isAxisLabelRotated(BW,BU);if(BO){if(!(BR===Al.ShrinkX||BR===Al.ShrinkY||BR===Al.ExpandY)){BN=-1;BQ=false;}}else{if(BP.getLabelRotation()===I.FR_NORMAL&&BP.resizeAction===Al.ExpandX){BN=BS;BQ=false;}else{BN=-1;BQ=false;}}}BP.updateMaxLabelLength(BN,BQ);return BP;}function Ak(){if(this.mUniformAxisSpace===null){this.mUniformAxisSpace={width:0,height:0,x:0,y:0};this.mUniformAxisSpace.width=-1;}}mstrmojo.chart.ChartImpl=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.chart.ChartImpl",mFontAntiAlias:true,mDatasetPtr:null,mFormatManager:null,mChartManagerPtr:null,mOldChartManager:null,mChartContextPtr:null,mInitialized:false,mUniformAxisSpace:null,mUniformAxisPtr:null,mVisualMode:null,init:function Ad(BM){this._super(BM);this.mDatasetPtr=this.mDatasetPtr||BM.DataSet||null;this.mChartContextPtr=this.addDisposable(new Av.GenericContext(BM));this.mFormatManager=this.mFormatManager||BM.FormatManager||null;this.mVisualMode=Ag;},SetData:function AP(BN){var BM=this.mDatasetPtr=BN;this.mChartContextPtr.mDataset=BN;BM.SetFormatManager(this.mFormatManager);},GetOptions:function z(BM,BQ,BN,BP){var BO,BR=Ac.create(BM,BQ,BN);BO=this.mChartContextPtr.GetProperty(BP,BR);if(BO){return BO;}switch(BP){case BC.DssGraphAutoArrange:return{Value:this.mChartContextPtr.mManualLayoutMode,IsValid:true};case BC.DssGraphType:case BC.DssGraphEnhancedSeriesEffect:case BC.DssGraphCurvedLines:case BC.DssGraphFontAntiAlias:case BC.DssGraphInfoSuppressLastLevel:case BC.DssGraphInfoIncludeSubtotal:case BC.DssGraphInfoNestedLabel:case BC.DssGraphInfoNestedLabelBracket:case BC.DssGraph2DSplitYAutomatic:case BC.DssGraphAxisNumberFormat:return{Value:this.mChartContextPtr.GetProperty(BP,BR),IsValid:true};case BC.DssGraph2ScaleDirection:if(BM===BC.DssGraphO1Body){return{Value:this.mDatasetPtr.mReverseGroup,IsValid:true};}break;case BC.DssGraphSeriesByColumn:return{Value:this.mDatasetPtr.mSeriesByColumn,IsValid:true};}return{IsValid:false};},OnRectangleSelection:function n(BN,BO){var BM=[],BQ=[],BR,BS=this.mChartManagerPtr,BP=new Av.Rect2D({x:BN.x,y:BN.y,width:BN.w,height:BN.h});BR=BS.GetGraphObjectManager(Av.PlotId0);if(!!BR===false){return BQ;}BR.OnRectangleSelection(BP,BQ,BO.outPut);return BQ;},SaveImageToObject:function Aw(BQ,BN,BR,BM,BP,BO){BQ=BQ||1014;BN=BN||694;E.call(this,BQ,BN);N.call(this);return q.call(this,BQ,BN,BR,BM,BP,BO);},PlainDraw:function J(BM,BN){var BO=this.mChartContextPtr;BM=BM||BO.mGraphWidth;BN=BN||BO.mGraphHeight;return E.call(this,BM,BN);},GetDataGroup:function u(){if(this.mChartContextPtr.mIsGraphMatrix){return this.mDatasetPtr.GetDataGroup();}return 1;},setCanvasProps:function A6(BM){if(this.mChartContextPtr){this.mChartContextPtr.mCanvasInfo=Z.copy(BM,this.mChartContextPtr.mCanvasInfo);}},SetFormatManager:function BE(BM){this.mFormatManager=BM;this.mChartContextPtr.SetFormatManager(BM);this.mDatasetPtr.SetFormatManager(BM);},IsDataEnough:function O(){if(this.mChartContextPtr.mIsGraphMatrix){return true;}var BN,BM;BN=this.mDatasetPtr.GetGroupCount();BM=AC.call(this,this.mChartContextPtr.mGraphType);return BN>=BM;},DrawUniformYAxis:function BK(BN,BV,BU,BT){var BO=this.mChartContextPtr;BO.startTimer({functionName:"DrawUniformYAxis",purpose:"render uniform Y axis",caller:arguments.caller||"unknown"});BT=BT||{};AU.call(this,false,BN,BV,BU,BT);if(BT.CanSkip){BO.endTimer();return q.call(this,BN,BV,false,false,false,[]);}BU=BT.IsPrimary;var BR=BO.getUniformAxisContext();if(BT.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(g.call(this,false,BU)===false){BO.endTimer();return q.call(this,BN,BV,false,false,false,[]);}var BS=A4.call(this),BM=Math.round(BT.dataLabelPadding||0),BQ=BR.mDataAreaTopMargin,BW=BV-BQ-BR.mDataAreaBottomMargin,BP=new Av.Rect2D({x:(BU?BN:0),y:BQ,width:0,height:BW});if(BM){BP.y=BM;BP.height-=BM;}L.call(this,BP,false,BS,BU);}BO.endTimer();return q.call(this,BN,BV,false,false,false,[]);},DrawUniformXAxis:function U(BN,BW,BU,BT){var BO=this.mChartContextPtr;this.mChartContextPtr.startTimer({functionName:"DrawUniformXAxis",purpose:"render uniform X axis",caller:arguments.caller||"unknown"});BT=BT||{};AU.call(this,true,BN,BW,BU,BT);if(BT.CanSkip){BO.endTimer();return q.call(this,BN,BW,false,false,false,[]);}BU=BT.IsPrimary;var BR=BO.getUniformAxisContext();if(BT.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(g.call(this,true,BU)===false){BO.endTimer();return q.call(this,BN,BW,false,false,false,[]);}var BS=!AJ.call(this),BM=Math.round(BT.dataLabelPadding||0),BX=BR.mDataAreaLeftMargin,BQ=0,BV=BN-BX-BR.mDataAreaRightMargin,BP=new Av.Rect2D({x:BX,y:(BU?BQ:BW),width:BV,height:0});if(BM){BP.width-=BM;}L.call(this,BP,true,BS,BU);}BO.endTimer();return q.call(this,BN,BW,false,false,false,[]);},DrawDataAreaForUniformAxis:function AM(BP,BM,BO){this.mChartContextPtr.startTimer({functionName:"DrawDataAreaForUniformAxis",purpose:"render data area for the mini chart",caller:arguments.caller||"unknown"});if(this.mVisualMode===A3){return q.call(this,BP,BM,false,false,false,[]);}var BR=this.mChartContextPtr,BN=BR.getUniformAxisContext();BN.xDataLabelPadding=BO.xDataLabelPadding||0;BN.yDataLabelPadding=BO.yDataLabelPadding||0;BN.mIsAxisTitleAndLabelRequired=false;this.mInitialized=false;BR.mIsEntireChart=false;this.mChartContextPtr.populateCanvas();E.call(this,BP,BM);N.call(this);BN.xDataLabelPadding=0;BN.yDataLabelPadding=0;BR.endTimer();var BQ=q.call(this,BP,BM,false,false,false,[]);B.call(this,BQ);return BQ;},GetUniformAxisMargins:function D(){var BO=this.mChartContextPtr,BN=BO.getUniformAxisContext(),BM={LEFT:BN.mDataAreaLeftMargin,RIGHT:BN.mDataAreaRightMargin,TOP:BN.mDataAreaTopMargin,BOTTOM:BN.mDataAreaBottomMargin};return BM;},UpdateUniformAxisMargins:function BA(BN){var BO=this.mChartContextPtr,BM=BO.getUniformAxisContext();if(BN.LEFT){BM.mDataAreaLeftMargin=BN.LEFT;}if(BN.RIGHT){BM.mDataAreaRightMargin=BN.RIGHT;}if(BN.TOP){BM.mDataAreaTopMargin=BN.TOP;}if(BN.BOTTOM){BM.mDataAreaBottomMargin=BN.BOTTOM;}},GetUniformAxisLabelsInfo:function BI(BO,BP,BN){var BM=AT.call(this,BO);if(BM){return BM.getUniformAxisLabelsInfo(BN);}return[];},GetPositionAtTick:function y(BQ,BM,BT){var BN=this.mChartContextPtr,BZ,BP,BW,BY;if(!BN.mIsGraphMatrix){return 0;}var BS=BN.getUniformAxisContext();if(!BS){return 0;}var BO=this.mUniformAxisPtr;if(BO){var BV=BO.mTripleId.mObjectId;if(BH.call(this,BV)){var BX=BO.mDeviceDataArea;if(!BO.GetTrimWithPadding()){var BU=new Av.Rect2D();if(BM){BZ=BS.mDataAreaLeftMargin;BP=0;BW=BT-BZ-BS.mDataAreaRightMargin;BU.Reset(BZ,BP,BW,0);}else{BZ=0;BP=BS.mDataAreaTopMargin;BY=BT-BP-BS.mDataAreaBottomMargin;BU.Reset(BZ,BP,0,BY);}BO.TrimAxisPadding(BU,false);BO.SetDeviceDataArea(BU);BO.SetTrimWithPadding(false);}var BR=BO.GetPositionAtTick(BQ);BO.SetDeviceDataArea(BX);return BR;}}return 0;},getZeroLineInfo:function AY(BQ,BP,BO){var BN={};BN.Qualified=this.IsZeroBaseLineQualified(BQ,BP);if(BN.Qualified){var BM=this.mUniformAxisPtr;if(BM===null||BM===undefined){this.mUniformAxisPtr=AT.call(this,BQ,BP);}BN.Position=this.GetPositionAtTick(0,BQ,BO);BN.Shapes=this.mDatasetPtr.GetShapesDistributionByValueAxis();}else{BN.Position=-1;BN.Shapes={};}return BN;},IsZeroBaseLineQualified:function k(BU,BS){BU=BU||false;if(BS===undefined){BS=true;}this.useOriginFormatForZeroLine=false;var BN=this.mChartContextPtr;if(!BN.mIsGraphMatrix){return false;}if(BN.IsBarChart()===false&&BN.IsLineChart()===false&&BN.IsAreaChart()===false){return false;}var BP=this.mUniformAxisPtr;if(BP){var BT=BP.mTripleId.mObjectId;if(BH.call(this,BT)){if(BP.isBaseLineQualified()){return true;}else{if(BN.isCombinationChart()===false){return false;}if(BP.liftedFromZero()){var BV=this.mDatasetPtr.GetShapesDistributionByValueAxis();var BM=BV.Primary;if(BS&&BM&&(BM.BAR&&BM.BAR.length||BM.AREA&&BM.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}BM=BV.Secondary;if(!BS&&BM&&(BM.BAR&&BM.BAR.length||BM.AREA&&BM.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}}}}}else{var BO,BR=BN.getUniformAxisContext();if(BR.ValueAxis){if(BS){BO=BU?"X1":"Y1";}else{BO=BU?"X2":"Y2";}var BQ=BR.ValueAxis[BO];if(BQ){return BQ.Min<0&&BQ.Max>0;}}}return false;},GetAxisLabelRotation:function A7(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}var BM=this.mUniformAxisPtr;if(BM===null){return false;}return BM.getLabelRotation();},GetShownNumericTicks:function AE(BM){var BO=this.mChartContextPtr;if(BO.mIsGraphMatrix){var BN=BO.GetGraphMatrixContext();return BM?BN.mShownValueTickSet[0]:BN.mShownValueTickSet[1];}},SetShowNumericTicks:function o(BO,BM){var BP=this.mChartContextPtr;if(BP.mIsGraphMatrix){var BN=BP.GetGraphMatrixContext();if(BM){BN.mShownValueTickSet[0]=BO;}else{BN.mShownValueTickSet[1]=BO;}}},refreshChartComponents:function AN(BO){var BP=this.mChartContextPtr,BS=BP.IsVertical(),BV=BP.IsGridChart(),BZ=BP.IsBarChart()||BP.IsAreaChart()||BP.IsLineChart(),BQ=BP.IsBubbleChart()||BP.IsScatterChart();var BX=BO.size;if(BX){BP.SetGraphSize(BX.w,BX.h);}var Be=BO.dataProvider;if(Be){this.mDatasetPtr.refresh(Be);}var Ba="Y1",Bc,BM=this.mChartManagerPtr,BN;var BR=BO.plot;if(BR){var Bd={mObjectId:20002,mSeriesId:0,mGroupId:-3};var Bb=BM.GetGraphObjectManager(Bd);if(Bb){Bb.refresh(BO.purpose,BR);}}var BT=BO.primaryValueAxis;if(BT){if(BZ&&!BS){Ba="X1";}Bc=BP.getAxisTripleId(Ba);BN=BM.GetGraphObjectManager(Bc);if(BN){BN.refresh(BO.purpose,BT);}}Ba="X1";var BY=BO.secondaryValueAxis;if(BY){if(BQ){Ba="X1";}Bc=BP.getAxisTripleId(Ba);BN=BM.GetGraphObjectManager(Bc);if(BN){BN.refresh(BO.purpose,BY);}}Ba="O1";var BW=BO.primaryCategoryAxis;if(BW){Bc=BP.getAxisTripleId(Ba);BN=BM.GetGraphObjectManager(Bc);if(BN){BN.refresh(BO.purpose,BW);}}var BU=BO.secondaryCategoryAxis;if(BU){}},GetDataAreaPadding:function BJ(){var BO=this.mChartContextPtr,Bh=BO.GetGraphMatrixContext(),BW={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},Bf,Be;if(!BO.mIsGraphMatrix){return BW;}var Bi=function(Bn){var Bm=0;Bn.forEach(function(Bo){Bm+=Bo;});return Bm;};var BV;var BN;if(Bh.isCombinationChart()){var Bc=this.mDatasetPtr.GetSeriesByShape(),BQ=0,BS=0,BX=0,Bl=0,Bb=0;if(Bc.Circle){BS=Bc.Circle.length;}if(Bc.Square){BX=Bc.Square.length;}if(Bc.Line){Bb=Bc.Line.length;}if(Bc.Area){Bl=Bc.Area.length;}if(Bc.Bar){BQ=Bc.Bar.length;}BV=this.mDatasetPtr;BN=BV.GetDiscreteSeries();if(!(BS>0||BX>0||(Bh.mHasSizeBy&&Bb>0)||(!Bh.mHasSizeBy&&(Bb>0||Bl>0)&&BN.length>0&&(AZ.HasArrayIntersection(BN,Bc.Line)||AZ.HasArrayIntersection(BN,Bc.Area))))){return BW;}if(BQ===BV.GetSeriesCount()){return BW;}}else{if(BO.IsBarChart()||BO.mGraphType===BB.DssGraphTypeGridChart||(Bh.mMarkerShape===200&&BO.IsBubbleChart()===false&&BO.IsScatterChart()===false)){return BW;}}var Bg=BO.IsAreaChart()||BO.IsLineChart(),Bj=Bh.isCombinationChart()===false;if(Bj===false){Bj=Bi([BQ,Bl,Bb,BX,BS])<=1;}if(Bj&&BO.GetGraphMajorType()===At.GMT_CATEGORY){var BY=2;BV=this.mDatasetPtr;BN=BV.GetDiscreteSeries();if(Bh.mHasSizeBy===false&&(!(Bg&&BN.length>0)||(Bg&&BV.GetGroupCount()<=1&&BV.GetSeriesCount<=1))){var BR=this.GetMaxElementRadius(BO.mGraphWidth,BO.mGraphHeight);if(BO.IsLineChart()){BR=Math.max(BR,BY);}BW.Y1.LowOffset=BW.Y1.HighOffset=BW.Y2.LowOffset=BW.Y2.HighOffset=BR;BW.X2.LowOffset=BW.X2.HighOffset=BR;BW.X1.LowOffset=BW.X1.HighOffset=BR;return BW;}}var BT=true;if(BT){if(BO.IsScatterChart()){BR=this.GetMaxElementRadius(BO.mGraphWidth,BO.mGraphHeight);BW.Y1.LowOffset=BW.Y1.HighOffset=BW.Y2.LowOffset=BW.Y2.HighOffset=BR;BW.X2.LowOffset=BW.X2.HighOffset=BR;BW.X1.LowOffset=BW.X1.HighOffset=BR;return BW;}}var BZ=BO.getUniformAxisContext();BZ.mIsAxisTitleAndLabelRequired=false;BO.mImageUsage=AV.OBJECT_CLIP_COMPUTATION;E.call(this,BO.mGraphWidth,BO.mGraphHeight);BO.mImageUsage=AV.GENERAL;var Bd=Av.PlotId0,Bk=this.mChartManagerPtr.GetGraphObjectManager(Bd);if(!Bk){return BW;}var BP;for(Bf=0;Bf<2;++Bf){for(Be=0;Be<2;++Be){var BU=Bf===0,Ba=Be===0,BM=BU?(Ba?"X1":"X2"):(Ba?"Y1":"Y2");BP=Bk.GetMaxElementOffsetClippedByBoundary(BU,Ba);BW[BM].LowOffset=BP.LowOffset;BW[BM].HighOffset=BP.HighOffset;}}return BW;},GetUniformYAxisWidth:function Ai(BX,BM,BW){this.mChartContextPtr.startTimer({functionName:"GetUniformYAxisWidth",purpose:"Create uniform Y axis instance and do axis layout",caller:arguments.caller||"unknown"});Ak.call(this);var BV={};A8.call(this,false,BM,BW,BV);if(BV.CanSkip){return 0;}BM=BV.MaxLabelLength;BW=BV.IsPrimary;var BO=this.mChartContextPtr,BR=BO.mDataset,BT=BO.getUniformAxisContext(),BU=A4.call(this),BY,BQ,BZ,BS=900,BP;AI.Reset(Y,Y,BX,BX-A5.call(this)*Y);BO.SetGraphSize(BX,BX-A5.call(this)*Y);BQ=x.call(this,false,BW,BM,BX);if(BQ.resizeAction===Al.KeepBoth){return this.mUniformAxisSpace.width;}AI.width=Math.max(AI.width,0);AI.height=Math.max(AI.height,0);if(BQ.restrictWidth===-1){AI.width=Math.max(AI.width,BS);}else{AI.width=Math.min(BQ.restrictWidth,BS);}BP=AI.width;AO.call(this,AI,BU,BQ,true);var BN=BR.showDatalabels();if(!BU&&BN){this.AdjustingAxisPaddingForDataLabel(AI,false,BX,BX);}Af.call(this,BT,AI,BX,BM,false,BW);BY=0;this.mUniformAxisPtr=BQ;if(BW){BZ=AI.x+BY;}else{BZ=BP-(AI.x+AI.width)-Y+BY;}if(this.mUniformAxisSpace.width===-1){BQ.restrictWidth=this.mUniformAxisSpace.width=BZ;}BL.call(this);BO.endTimer();return Math.max(BZ,0);},GetUniformXAxisHeight:function j(BO,BM,BW){this.mChartContextPtr.startTimer({functionName:"GetUniformXAxisHeight",purpose:"Create uniform X axis instance and do axis layout",caller:arguments.caller||"unknown"});Ak.call(this);var BV={};A8.call(this,true,BM,BW,BV);if(BV.CanSkip){return 0;}BM=BV.MaxLabelLength;BW=BV.IsPrimary;var BP=this.mChartContextPtr,BR=BP.mDataset,BS=BP.getUniformAxisContext(),BU=!AJ.call(this),BT=400,BN,BX,BQ,BY;AI.Reset(0,0,BO,BT);BP.SetGraphSize(BO,BT);BQ=x.call(this,true,BW,BM,BO);if(BQ.resizeAction===Al.KeepBoth){return this.mUniformAxisSpace.height;}AO.call(this,AI,BU,BQ,true);BN=BR.showDatalabels();if(!BU&&BN){this.AdjustingAxisPaddingForDataLabel(AI,true,BO,BW);}Af.call(this,BS,AI,BO,BM,true,BW);BX=0;this.mUniformAxisPtr=BQ;if(BW){BY=BT-(AI.y+AI.height)-Y+BX;}else{BY=AI.y;}if(this.mUniformAxisSpace.height===-1){BQ.restrictHeight=this.mUniformAxisSpace.height=BY;}BL.call(this);BP.endTimer();return Math.max(BY,0);},UpdatePartialRenderingWindow:function G(BN,BO,BM){BN=BN||false;var BP=this.mChartContextPtr;if(BP.IsScatterChart()||BP.IsBubbleChart()){BP.mPartialRendering=BN;}else{BP.mPartialRendering=BN&&(BO!==undefined);if(BP.mPartialRendering){BP.mPartialRendering=BP.mPartialRendering&&(BO.x!==undefined&&BO.y!==undefined&&BO.width!==undefined&&BO.height!==undefined);}}if(BP.mPartialRendering){if(BP.mRenderingWindow===null){BP.mRenderingWindow={};}if(BO){Z.copy(BO,BP.mRenderingWindow);}}else{BP.mRenderingWindow=null;}if(BM!==undefined){if(BP.mPartialRendering){this.mVisualMode=BM;}else{this.mVisualMode=Ag;}}},updateUniformXAxisLayout:function A(BP){var BN=BP,BM=this.mChartContextPtr.getUniformAxisContext(),BS=BM.CategoryAxis.X,BO=1,BR=2,BQ=3,BT=4;BS.Layout=BN.Layout;if(BN.Layout===BT){BS.Layout=BO;BS.ForbideStagger=true;}else{if(BN.Layout===BQ){BS.ForbideStagger=true;}else{BS.ForbideStagger=false;}}BS.StartRow=0;if(BS.Layout===BR){BS.StartRow=BN.StartRow;}if(BN.LabelWidthLimit!==undefined){BS.LabelWidthLimit=BN.LabelWidthLimit;}BS.EnforceCluster=(!!BN.EnforceCluster)||BS.EnforceCluster;BS.EnforceFringe=(!!BN.EnforceFringe)||BS.EnforceFringe;},updateUniformAxisLabelRotation:function A2(BQ,BO){if(BO===undefined){BO=-1;}var BN={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};var BP=this.mChartContextPtr,BM=BP.getUniformAxisContext();if(BO===-1){if(BQ===undefined){return ;}switch(BQ){case BN.NORMAL:case BN.STAGGER:BM.mLabelRotation.X1=I.FR_AUTOMATIC;break;default:BM.mLabelRotation.X1=I.FR_90;break;}}else{if(BO===2){BM.mLabelRotation.X1=I.FR_90;}else{BM.mLabelRotation.X1=I.FR_NORMAL;}}},EnableUniformAxis:function V(BS,BO){BO=BO||false;var BT=this.mChartContextPtr,Ba=BT.getUniformAxisContext(),Bi=Ba.ValueAxis,Bg,BP,Bf=Bi.X1,Be=Bi.X2,BW=Bi.Z,BR=Bi.Y1,BQ=Bi.Y2;Bg=AZ.isValidNumber(BS.YMinValue);BP=AZ.isValidNumber(BS.YMaxValue);BR.Valid=Bg&&BP;BR.Min=parseFloat(Bg?BS.YMinValue:0);BR.Max=parseFloat(BP?BS.YMaxValue:0);BR.CustomScale=(BS.YCustomScale!==undefined)?BS.YCustomScale:false;BR.CondenseLabel=(BS.YCondenseLabel!==undefined)?BS.YCondenseLabel:{};BR.CondenseEnforced=BS.YCondenseEnfored||false;BR.AutoMin=BS.YAutoMin;BR.AutoMax=BS.YAutoMax;Bg=AZ.isValidNumber(BS.Y2MinValue)||AZ.isValidNumber(BS.X2MinValue);BP=AZ.isValidNumber(BS.Y2MaxValue)||AZ.isValidNumber(BS.X2MaxValue);BQ.Valid=Bg&&BP;BQ.Min=parseFloat(AZ.isValidNumber(BS.Y2MinValue)?BS.Y2MinValue:(AZ.isValidNumber(BS.X2MinValue)?BS.X2MinValue:0));BQ.Max=parseFloat(AZ.isValidNumber(BS.Y2MaxValue)?BS.Y2MaxValue:(AZ.isValidNumber(BS.X2MaxValue)?BS.X2MaxValue:0));BQ.CustomScale=(BS.Y2CustomScale!==undefined)?BS.Y2CustomScale:((BS.X2CustomScale!==undefined)?BS.X2CustomScale:false);BQ.CondenseLabel=(BS.Y2CondenseLabel!==undefined)?BS.Y2CondenseLabel:(BS.X2CondenseLabel!==undefined?BS.X2CondenseLabel:{});BQ.CondenseEnforced=BS.Y2CondenseEnfored||BS.X2CondenseEnfored||false;BQ.AutoMin=BS.Y2AutoMin;BQ.AutoMax=BS.Y2AutoMax;Bg=AZ.isValidNumber(BS.XMinValue);BP=AZ.isValidNumber(BS.XMaxValue);Bf.Valid=Bg&&BP;Bf.Min=parseFloat(Bg?BS.XMinValue:0);Bf.Max=parseFloat(BP?BS.XMaxValue:0);Bf.CustomScale=(BS.XCustomScale!==undefined)?BS.XCustomScale:false;Bf.CondenseLabel=(BS.XCondenseLabel!==undefined)?BS.XCondenseLabel:{};Bf.CondenseEnforced=BS.XCondenseEnfored||false;Bf.AutoMin=BS.XAutoMin;Bf.AutoMax=BS.XAutoMax;Bg=AZ.isValidNumber(BS.X2MinValue);BP=AZ.isValidNumber(BS.X2MaxValue);Be.Valid=Bg&&BP;Be.Min=parseFloat(Bg?BS.X2MinValue:0);Be.Max=parseFloat(BP?BS.X2MaxValue:0);Be.CustomScale=(BS.X2CustomScale!==undefined)?BS.X2CustomScale:false;Be.CondenseLabel=(BS.X2CondenseLabel!==undefined)?BS.X2CondenseLabel:{};Be.CondenseEnforced=BS.X2CondenseEnfored||false;Be.AutoMin=BS.X2AutoMin;Be.AutoMax=BS.X2AutoMax;BW.Min=parseFloat(AZ.isValidNumber(BS.ZMinValue)?BS.ZMinValue:0);BW.Max=parseFloat(AZ.isValidNumber(BS.ZMaxValue)?BS.ZMaxValue:0);BW.CustomScale=(BS.ZCustomScale!==undefined)?BS.ZCustomScale:false;BW.AutoMin=BS.ZAutoMin;BW.AutoMax=BS.ZAutoMax;Ba.mGraphHeight=(BS.GraphHeight!==undefined)?BS.GraphHeight:0;if(BO){return ;}BT.mIsUniformAxisMode=true;BT.mIsGraphMatrix=true;if(BS.XMetrics){Bf.Metrics.splice(0,Bf.Metrics.length);Bf.Metrics=Bf.Metrics.concat(BS.XMetrics);}if(BS.YMetrics){BR.Metrics.splice(0,Bi.Y1.Metrics.length);BR.Metrics=Bi.Y1.Metrics.concat(BS.YMetrics);}if(BS.Y2Metrics){BQ.Metrics.splice(0,BQ.Metrics.length);BQ.Metrics=BQ.Metrics.concat(BS.Y2Metrics);}if(BS.X2Metrics){Be.Metrics.splice(0,Be.Metrics.length);Be.Metrics=Be.Metrics.concat(BS.X2Metrics);}if(BS.ZMetrics){BW.Metrics.splice(0,BW.Metrics.length);BW.Metrics=BW.Metrics.concat(BS.ZMetrics);}if(BS.LabelPlacement!==undefined){this.updateUniformAxisLabelRotation(BS.LabelPlacement,BS.xAxisRotateMode);}if(BS.XCategoryAxis){var Bh=BS.XCategoryAxis,Bc=Ba.CategoryAxis.X,BU=3;Bc.Truncation={Idices:[],Texts:[]};if(Bc.Layout!==BU){Bc.Truncation.Idices=BS.TruncatedIdices;Bc.Truncation.Texts=BS.TruncatedTexts;}this.updateUniformXAxisLayout(Bh);}if(BS.YCategoryAxis){var BZ=BS.YCategoryAxis;var BV=Ba.CategoryAxis.Y;if(BZ.LabelWidthLimit!==undefined){BV.LabelWidthLimit=BZ.LabelWidthLimit;}BV.EnforceCluster=(!!BZ.EnforceCluster)||BV.EnforceCluster;BV.EnforceFringe=(!!BZ.EnforceFringe)||BV.EnforceFringe;}if(BT.IsScatterChart()||BT.IsBubbleChart()){var Bd=BT.GetGraphMatrixContext(),Bb=Bd.AxisLayout;if(Bb===null||Bb===undefined){return ;}var BN=1,BY=2,BX=4,BM=8;if(!!(Bb&BX)){BR.Min=parseFloat((BS.Y2MinValue!==undefined)?BS.Y2MinValue:0);BR.Max=parseFloat((BS.Y2MaxValue!==undefined)?BS.Y2MaxValue:0);BR.CustomScale=(BS.Y2CustomScale!==undefined)?BS.Y2CustomScale:false;BR.CondenseLabel=(BS.Y2CondenseLabel!==undefined)?BS.Y2CondenseLabel:{};BR.Metrics.splice(0,BR.Metrics.length);BR.Valid=BQ.Valid;if(BS.Y2Metrics){BR.Metrics=BR.Metrics.concat(BS.Y2Metrics);}BQ.Metrics.splice(0,BQ.Metrics.length);}if(!!(Bb&BM)){Bf.Min=parseFloat((BS.X2MinValue!==undefined)?BS.X2MinValue:0);Bf.Max=parseFloat((BS.X2MaxValue!==undefined)?BS.X2MaxValue:0);Bf.CustomScale=(BS.X2CustomScale!==undefined)?BS.X2CustomScale:false;Bf.CondenseLabel=(BS.X2CondenseLabel!==undefined)?BS.X2CondenseLabel:{};Bf.Metrics.splice(0,Bf.Metrics.length);Bf.Valid=BQ.Valid;if(BS.X2Metrics){Bf.Metrics=Bi.Y1.Metrics.concat(BS.X2Metrics);}BQ.Metrics.splice(0,BQ.Metrics.length);}}},AdjustingAxisPaddingForDataLabel:function d(BU,BO,BS,BT){var BM=this.mChartContextPtr,BN=BM.getValueAxisKeyFromLayout(BO,BT),BP;var BR=BM.getAxisTripleId(BN);BP=BM.getUniformAxisInformation(BR.mObjectId);var BW=BP.Metrics||[];var BV=BM.GetProperty(Ay.DSSGraphMatrixUseCustomMinMax,BR),BQ;if(BV){BQ=BV;if(BQ){return false;}}if(BO){return A9.call(this,BU,BW,BS,BT);}return P.call(this,BU,BW,BS,BT);},ShouldRotateDataLabel:function Ah(BN,BW){var BO=this.mChartContextPtr,BQ=this.mDatasetPtr,BT=BQ.showDatalabels(),BU=BO.GetGraphMatrixContext();var BV=false;if(BT){BV=BO.IsBarChart();if(!BV&&BO.isCombinationChart()){var BM=BQ.GetSeriesByShape().Bar,BP=BQ.GetSeriesCount();BV=(BM.length===BP);if(!BV&&BM.length){BV=true;for(var BR=0;BR<BP;BR++){if(BM.indexOf(BR)===-1&&BQ.showSeriesDatalabel(BR)){BV=false;break;}}}}}if(BV){this.mInitialized=false;var BS=BO.getUniformAxisContext();BS.mIsAxisTitleAndLabelRequired=false;BO.mIsEntireChart=false;E.call(this,BN,BW);}return{Rotation:BU.mIsNeedRotateDataLabel,Adjust:BV};},ShouldAdjustValueAxis:function M(BO,BM,BP,BN){return false;},GetMaxElementRadius:function Aa(BN,BZ,BU){var BO=this.mChartContextPtr,BT=BO.GetGraphMatrixContext(),BM=BO.GetGraphType(),BR=BO.GetGraphMatrixGraphMajorType(),BY=this.mDatasetPtr.GetGroupCount(),BV;BU=BU||false;switch(BR){case l._GRID:case l._SCATTER:case l._BUBBLE:return BT.GetMaxMarkerSize(Ap._SHAPES_IN_BUBBLESCATTER,false,BY,BT.mHasSizeBy);case l._AREA:BV=((BM>=BB.DssGraphTypeVertical_Area_Absolute&&BM<=BB.DssGraphTypeVertical_Area_Percent));return BT.GetMaxElementSizeInAreaChart(BV,BY);case l._LINE:BV=((BM>=BB.DssGraphTypeVertical_Line_Absolute&&BM<=BB.DssGraphTypeVertical_Line_Percent));if(BT.isCombinationChart()){var BX=0,BW=0,BS=0,BQ=4,BP=this.mDatasetPtr.GetSeriesByShape();if(BP.Line&&BP.Line.length>0){BX=BT.GetMaxElementSizeInLineChart(BV,BY,false,BS);}if((BP.Circle&&BP.Circle.length>0)||(BP.Square&&BP.Square.length>0)){BW=BT.GetMaxElementSizeInLineChart(BV,BY,true,BQ);}return Math.max(BX,BW);}return BT.GetMaxElementSizeInLineChart(BV,BY);case l._PIE:if(this.mDatasetPtr){BY*=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);}BV=this.mChartContextPtr.IsVertical();return BT.GetMaxMarkerSize(Ap._PIE,BV,BY,BT.mHasSizeBy);case l._BAR:return 0;default:break;}return 0;},setGraphType:function AG(BM){this.mGraphType=this.mChartContextPtr.mGraphType=BM;},setThemeType:function h(BM){this.mChartContextPtr.mThemeType=BM;},getCondenseStatus:function c(){var BN,BM=this.mUniformAxisPtr;if(BM){BN=BM.mCondenseLabels;}return BN;},enableCondense:function Ar(BN,BM){var BO=this.mUniformAxisPtr;if(BO){BO.checkCondense(BN,BM);}},isAxisLabelRotated:function AB(BO,BP){var BN=this.mUniformAxisPtr;if(BN===null){return false;}var BM=BN.getLabelRotation();return BM===I.FR_90;},liftedFromZero:function BG(){if(this.mUniformAxisPtr){if(this.mMinTick!==undefined){return this.mMinTick===0&&this.mLowTrim>0;}}return false;},configureChart:function As(BM){var BO=this.mChartContextPtr;BO.mIsUniformAxisMode=true;BO.mIsGraphMatrix=true;if(BM.ThemeType){this.setThemeType(BM.ThemeType);}if(BM.Usage){BO.mImageUsage=BM.Usage;}if(BM.Timer!==undefined){BO.mUseTimer=BM.Timer||false;}if(BO.mImageUsage===AV.BANNER){return ;}var BN;BN=BM.isABL&&BM.Extremes&&((BM.Extremes.X2Metrics&&BM.Extremes.X2Metrics.length)||(BM.Extremes.Y2Metrics&&BM.Extremes.Y2Metrics.length));if(BM.GraphType){if(BN){BM.GraphType=BO.mapGraphTypeToDualAxis(BM.GraphType);}if(BM.ShapeType){this.setGraphType(b.call(this,BM.GraphType,BM.ShapeType));}else{this.setGraphType(BM.GraphType);}}if(BM.GraphSize){BO.SetGraphSize(BM.GraphSize.W,BM.GraphSize.H);}if(BM.Extremes){this.EnableUniformAxis(BM.Extremes,false);}if(BM.OutputType){BO.mImageFormat=BM.OutputType;}t.call(this,BM);AA.call(this,BM);},resetCanvas:function Aq(){var BM=this.mChartContextPtr;BM.resetCanvas();},updateUniformAxis:function s(BP){var BO=this.mUniformAxisPtr,BN=BO.mDeviceDataArea.width,BM=BO.mDeviceDataArea.height;if(!BO){return q.call(this,BN,BM,false,false,false,[]);}if(BP.Redraw){BO.Draw();}return q.call(this,BN,BM,false,false,false,[]);},getUniformAxisBanding:function AD(){var BM=true,BN=this.mUniformAxisPtr;if(BM&&BN){return BN.getBandings();}return[];},getUniformAxisGridLinePosition:function K(BN){var BM=true,BO=this.mUniformAxisPtr;if(BM&&BO){return BO.getGridLinePosition(BN);}return[];},echoCondenseStatus:function T(BP,BN){var BO=this.mUniformAxisPtr;if(BO===null){return ;}var BM=BO.getCondenseStatus();if(BM!==undefined){BP[BN]=BM;}},echoLayoutPaddings:function A1(BO,BM){var BN=this.mUniformAxisPtr;if(BN===null){return ;}BO[BM]=BO[BM]||{};BO[BM].HighOffset=this.mAxisLayoutHighPadding||0;BO[BM].LowOffset=this.mAxisLayoutLowPadding||0;},UpdateValueAxisPadding:function An(BN){var BM=this.mChartContextPtr.GetGraphMatrixContext();BM.UpdateValueAxisPadding(BN);},getUniformAxisTrims:function Aj(BN,BO){var BM=(BN&&AJ.call(this)===false)||(!BN&&A4.call(this));if(BM){return Ax.call(this,BN);}else{return AF.call(this);}},getUniformAxisFormat:function R(){var BM=this.mUniformAxisPtr;if(!!BM){if(BM.mCondenseLabels){return"Condensed";}if(BM.mNumberFormat){return BM.mNumberFormat.mCustomFormat;}}return undefined;},formatAsUniformAxisLabel:function p(BM){if(!!this.mUniformAxisPtr===false){return undefined;}return this.mUniformAxisPtr.formatAsLabel(BM);},getAxisPadding:function e(BP){var BN=0,BQ=1,BO=2;if(BP===BN){return{L:0,H:(this.mUniformAxisPtr&&this.mUniformAxisPtr.dataLabelPadding||0)};}else{if(BP===BQ){var BM=this.mAxisLayoutLowPadding||0;var BR=this.mAxisLayoutHighPadding||0;return{L:BM,H:BR};}else{return{L:0,H:0};}}},getStatistics:function X(BN){var BV={},Bb,BX,Bc,BO,BS=0,BZ,BY;Bb=Av.PlotId0;switch(BN.Type){case BS:var BW=0,BP=this.mChartContextPtr,BU=this.mDatasetPtr;var Ba=BU.GetSeriesCount(),BM=BU.GetGroupCount();BV.Total=Ba*BM;if(BP.IsScatterChart()||BP.IsBubbleChart()){BX=this.mChartManagerPtr.GetGraphObjectManager(Bb);if(BX){Bc=BX.mGraphObjectList;BO=Bc.length;for(BZ=0;BZ<BO;++BZ){if(Bc[BZ].mTripleId.mObjectId===BD.DssGraphRiser){BW++;}}BV.Displayed=BW;}}else{if(BP.IsBarChart()||BP.IsAreaChart()||BP.IsLineChart()||BP.IsGridChart()){if(BU.endSeries!==-1||BU.endGroup!==-1){var Be=Math.max(BU.startSeries,0),BR=Math.max(BU.startGroup,0),BT=BU.endSeries===-1?Ba:BU.endSeries,BQ=BU.endGroup===-1?BM:BU.endGroup;BV.Displayed=(BQ-BR)*(BT-Be);}else{BX=this.mChartManagerPtr.GetGraphObjectManager(Bb);if(BX){var Bd=[BX.AreaSeriesRenderer,BX.mBarSeriesRendererPtr,BX.mLineSeriesRendererPtr];for(BY=0;BY<Bd.length;++BY){if(Bd[BY]){Bc=Bd[BY].mGraphObjectList;BO=Bc.length;for(BZ=0;BZ<BO;++BZ){if(Bc[BZ].mTripleId.mObjectId===BD.DssGraphRiser){BW++;}}}}BV.Displayed=BW;}}}}break;default:break;}return BV;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.FormatManager","mstrmojo.chart.DataSetImpl","mstrmojo.chart.ChartImpl","mstrmojo.chart.CEModuleMain");var B=mstrmojo.chart,D=B.common;mstrmojo.chart.MsiChart=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.MsiChart",mUniversalProperty:null,createFormatManager:function E(L,H){var M,J,G;if(H.map&&H.map.gpp){M=H.map.gpp;}else{M=new D.MapStructure();var K;if(L){G=L.gp.length;for(J=0;J<G;++J){K=L.gp[J];M.push([-3,K.gsid,K.goid,K.gaid],K.v);}}H.map=H.map||{};H.map.gpp=M;}var I=new B.FormatManager({GraphPropertyMap:M});return I;},createDataSet:function C(G){return new B.DataSetImpl(G);},createChartFromFormatManager:function A(J,I,G,K){B.gModuleMain.ResetGraphObjectMap();this.mUniversalProperty=this.mUniversalProperty||{};var H=new B.ChartImpl({mDatasetPtr:J,mFormatManager:I,GDFFile:G,UseTimer:K});H.mChartContextPtr.globalFormats=this.mUniversalProperty;return H;},setController:function F(G){B.gModuleMain.setController(G);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.string","mstrmojo.Obj","mstrmojo.Box","mstrmojo.Label","mstrmojo.Table","mstrmojo.VisEnum","mstrmojo.VisAxisLabel","mstrmojo.VisUtility","mstrmojo.PageNavigationPanel","mstrmojo._CanSupportTransaction","mstrmojo._Formattable","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.vi.viz.EnumDSSDropZones");mstrmojo.requiresClsP("mstrmojo.gm","GMEnums","TrendLineModel","GMDataModel","VecDrawer","GMUtility","GMIdentities","GMAxisScale");mstrmojo.requiresClsP("mstrmojo.chart","DataSetImpl","ChartImpl","MsiChart");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var At=100,h=100;var f=mstrmojo,B4=f.VisUtility,Bb=f.css,Ap=f.hash,By=f.array,A4=f.string,B8=f.chart,B5=B8.model,A3=B5.enums,w=mstrmojo.mstr.EnumDSSXMLObjectTypes,AT=mstrmojo.gm.EnumTrendLineModelType,BW=f.gm,A1=BW.GMAxisScale,BY=BW.EnumTrendRefModelLabels,l=BW.GMUtility,Bg=BW.EnumSelectionOptionLevel,C=f.num,B6=BW.EnumABLDirection,F=BW.EnumContextMenu,BX=f.VisEnum.ControlType,B9=f.vi.viz.EnumDSSDropZones,BI=BW.EnumColorByType,L=BW.EnumDrawingAPI,Ag=BW.EnumXAxisLabelStatus,CA=BW.EnumABLDirection,Aj=BW.EnumShape,B=BW.EnumAxis,BT=A3.EnumDSSGraphType,AP=BW.EnumFitTo,Bm=BW.EnumAxisType,B2=BW.EnumGraphType,BL=BW.EnumSizeByType,BE=BW.EnumAxis,AZ=BW.EnumTheme,AH=BW.EnumMetricsPosition,k=B8.common.Utility,B0=BW.EnumShape,BM=BW.EnumSubtype,Bn=BW.EnumAxisScale,Al=BW.EnumMaxSizeType,Br=BW.EnumMinSizeType,b=BW.EnumIdentityType,AX=BW.WidgetPropertyTag,BK=BW.FormatingPropertyTag,AW=BW.EnumRefLineModelType,CC=BW.StackExetrmeId,Y=BW.DualAxisSubAxisBit,A5=false,Bt="00000000000000000000000000000000",AN=0,Ao="_tmsp",AV=0,Av=-20,x=0,H=5,r=5,S=2,CJ=0,BA=1,y=3,e=0,BZ=16,A0=32,Bs=1,A9=2,Bh=4,P=8,A7=["MAX","MIN","AVG","MED","FIRST","LAST","CONST"],BQ=[mstrmojo.desc(5417,"Max"),mstrmojo.desc(5416,"Min"),mstrmojo.desc(12151,"Avg"),mstrmojo.desc(12152,"Med"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(12153,"Const")],E={isZeroPadding:true,X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},I={x:{first:"top",second:"bottom"},y:{first:"right",second:"left"}},p=[16756758,2701311,2275844,956159,14580142,2477516,14732825,11119017,15715763,9873407,9101208,8437759,15516634,9494752,15392673,14079702],Bo=[11826975,1381846,1810715,950271,12407690,2276796,13614615,8355711,15255470,9869567,9101208,7912447,14004421,9296859,15063710,13092807];mstrmojo.requiresDescs(2058,2460,12091,12092);var Bl=[2,9,16,23,30,37];var Ab=[7,14,21,28,35,42];var Ai=l.filterInValidMetricIndex,Z=l.getOptionObjArr;function Ad(CM){var CN=true,AS;for(AS in CM){if(CM.hasOwnProperty(AS)){CN=false;break;}}return CN;}function AC(CM,CQ){var CR=false,AS=["XAxis","YAxis"],CO=AS.length,CN,CP;for(CP=0;CP<CO;CP++){CN=CM&&CM[AS[CP]];if(CN){CR=!Ad(CN);if(CR){break;}}}return CR||CQ.isPie;}function j(){this.rwHdrSmrs=[];this.colHdrSmrs=[];delete this.mulAttsOnAxisForABL;delete this.ttlDispTp;delete this.chartInfo;delete this.defaultsForShape;delete this.rowHeaderCnt;delete this.colHeaderCnt;delete this.model;delete this.isPie;this.splitPlottingMetrics=undefined;this.metricInfos={};this.sharedPool={};this.metricSelectionInfo={};this.attributeSelectionInfo={};this.axisScaleCache=null;}function CL(AS,CS){var CN=this.getChartInfo();if(!CN.isABL){this.removeGroupInfo();}var CR=(CS===1||CS===8)||(CS===15||CS===22)||(CS===29||CS===36)||(CS===91||CS===92);if(CR){var CP;var CT=AS.dz,CO=CT.XAxis,CM=CT.YAxis,CQ=CT.BreakBy;if(CN.dirc===BW.EnumABLDirection.VERTICAL){CP=this.getMetricsOnYAxis();}else{CP=this.getMetricsOnXAxis();}if(CP.length>1){if(CN.dirc===BW.EnumABLDirection.VERTICAL){if((CO.MetricNames!==undefined&&(!CO.TemplateUnit||CO.TemplateUnit.length===0))||(CQ.MetricNames!==undefined&&(!CO.TemplateUnit||CO.TemplateUnit.length===0))){this.clusteredBarSpecialCase=true;}}else{if((CM.MetricNames!==undefined&&(!CM.TemplateUnit||CM.TemplateUnit.length===0))||(CQ.MetricNames!==undefined&&(!CM.TemplateUnit||CM.TemplateUnit.length===0))){this.clusteredBarSpecialCase=true;}}}}this.isGridPie=CN.isGrid&&CN.isPie;this.onlyMetricNamesOnAxisForGridPie=Be.call(this);this.isMetricNamesOnXAxis=BJ.call(this,"XAxis");this.isMetricNamesOnYAxis=BJ.call(this,"YAxis");this.isMetricNamesOnRows=BJ.call(this,"Rows");this.isMetricNamesOnColumns=BJ.call(this,"Columns");if(CN.isABL){if(AI.call(this,"XAxis","n").length>1||AI.call(this,"YAxis","n").length>1){this.mulAttsOnAxisForABL=true;}}}function BH(AS){var CQ=B2;var CU=this.view,CX,CP;var CY=CU.getWidgetPropertyValue(AX.SHAPE);var CR=CU.getWidgetPropertyValue(AX.SUB_TYPE);var CS=this.getChartType();var CO=[B0.CIRCLE,B0.SQUARE,B0.PIE,B0.RING,B0.TICK];var CM=CO.concat([B0.BAR]);var CZ=function(Ca){var Ch=false,Cb=false;if(CS!==CQ.BAR&&CS!==CQ.LINE&&CS!==CQ.AREA){return{enableComb:false,hasBarShape:false};}var Ce=1,Cd,Cf=[],Cc=[],Ci=[];var Cj=Ca.dz,Ck=Cj.XAxis.TemplateMetric&&Cj.XAxis.TemplateMetric.concat()||[];Ck=Ck.concat(Cj.YAxis.TemplateMetric&&Cj.YAxis.TemplateMetric.concat()||[]);Ck.forEach(function(Cl){Cf.push(Cl.id);Ci.push(Cl.ax);});var Cg=Cj.visProp.fmt.metricShapes||"{}";Ck=JSON.parse(Cg.replace(/'/g,'"'));Cf.forEach(function(Cl){if(Ck.hasOwnProperty(Cl)){Cc.push(Ck[Cl]);}});Cb=Cc.length&&Cc[0]===Ce;for(Cd=1;Cd<Cc.length;Cd++){Ch=Ch||Cc[Cd]!==Cc[Cd-1];Cb=Cb||Cc[Cd]===Ce;if(Ch&&Cb){break;}}return{enableComb:Ch,hasBarShape:Cb};};var CW=CZ(AS);if(CR!==undefined){CX=CR;}if(((CS===CQ.BUBBLE||CS===CQ.SCATTER)&&CO.indexOf(CY)===-1)||((CS===CQ.GRID)&&(CM.indexOf(CY)===-1))){CY=B0.CIRCLE;}var CN=[4,24,201,202,200];var CV=CO.indexOf(CY);if(CV>=0&&CV<CO.length){this.ceMarkerShape=CN[CV];}var CT=BB.call(this,CS,CX,this.chartDirection,CY,CW.enableComb,CW.hasBarShape);this.chartSubType=CT.subType;CP=CT.ceChartType;this.ceChartType=CP;this.markerShape=CT.shape;this.isPercentage=As(CP,Ab);this.isStacked=As(CP,Bl.concat(Ab));}function Bp(CN){var CR=CN.dm.rct;var CM=CN.dm.cct;var CO=CN.ptt.row;var CQ=CN.ptt.col;var CP=this,AS=CN.dz;if(CO.length===0){CO.push(0);}if(CQ.length===0){CQ.push(0);}if(CR<0){CR=CN.dm.rct=CN.gvs.items.length;}if(CM<0){CM=CN.dm.cct=CN.gvs.items[0].items.length;}CP.rowHeaderCnt=Bx(AS.Rows);CP.colHeaderCnt=Bx(AS.Columns);}function AA(CM,AS){if(this.isBubbleOrScatter()){return this.getAxisLayout4CE(CM,AS);}else{return this.axisLayout;}}function AJ(AS){var CM=document.createElement("div");CM.innerHTML=AS;return CM.innerText;}function CG(CP){var CQ=CP.es,CM=CP.fs,CO=CP.otp,AS=CM&&CM.length;if(CQ){By.forEach(CQ,function(CR){CR.n=l.restoreSpecialChars(CR.n);CR.n=A4.decodeHtmlString(CR.n);CR.n=CR.n.trim();});}if(CO===12&&AS){for(var CN=0;CN<CQ.length;CN++){switch(CM[CN%AS].bftp){case 5:break;case 7:CQ[CN].n=AJ(CQ[CN].n);break;default:}}}}function U(CP,CR){var CM=this.model,AS,CN,CO,CQ;AS=this.mapFromChartToLDSIndex(CP,CR);CN=CM.getLocalDataSet(AS.r,AS.c);CO=CN.generateDataProvider();CQ=CO[AS.dpIdx];return CQ;}function CD(CM,CN){this.layoutPaddingEchos=this.layoutPaddingEchos||{X1:[],X2:[],Y1:[],Y2:[]};var AS=CM?"X2":"Y2";if(CN){AS=CM?"X1":"Y1";}return this.layoutPaddingEchos[AS];}function BD(CM,CN){this.condenseEchos=this.condenseEchos||{X1:[],X2:[],Y1:[],Y2:[]};var AS=CM?"X2":"Y2";if(CN){AS=CM?"X1":"Y1";}return this.condenseEchos[AS];}function Q(){return true;}function CH(CN){if(this.enableCombiChart){return false;}var AS=CN.shape;if(AS===Aj.BAR||CN.tp===B2.GRID){return true;}if(AS===Aj.TICK){var CM=this.getChartInfo();return CM.isABL;}return false;}function CF(CR,CN,CQ){var CP,AS=CR.shape;if(this.enableCombiChart){CP=U.call(this,CN,CQ);var CO=CP.getSeriesByShape();if(CO.Circle.length||CO.Square.length){return false;}if(CO.Line.length&&this.hasSizeBy()){return false;}var CM=CP.GetDiscreteSeries();if(CM.length){if(CO.Line.length){if(k.HasArrayIntersection(CM,CO.Line)){return false;}}if(CO.Area.length){if(k.HasArrayIntersection(CM,CO.Area)){return false;}}}return true;}if(CH.call(this,CR)){return true;}if(AS===Aj.AREA){CP=U.call(this,CN,CQ);return CP.getGroupCount()>=2&&CP.GetDiscreteSeries().length===0;}if(AS===Aj.LINE){CP=U.call(this,CN,CQ);return !this.hasSizeBy()&&CP.getGroupCount()>=2&&CP.GetDiscreteSeries().length===0;}return false;}function A8(AS,CR,CN,CQ){var CT=this.view.getDefaultProperties(),CS=AS[CN]||{},CM=this.getChartInfo(),CO=(CR.fmt||CR.fms),CP;if(CO.length===0){CO={};}else{if(typeof CO==="string"){CO=JSON.parse(l.restoreSpecialChars(CO));}}CS.modix=CQ;CS[AX.TREND_TYPE]=CR.tp;CS[AX.TREND_LEVEL]=CR.lv;CS[AX.TREND_ENABLED]=CR.enabl===1;CS.fmt=CO;[AX.TREND_REF_LINE_THICKNESS,AX.TREND_REF_LINE_COLOR,AX.TREND_REF_LINE_STYLE].forEach(function(CU){CP=CO[CU];if(CP===undefined){CS[CU]=CT[CU];}else{CS[CU]=CP;}});if(CM.isABL){CS[AX.TREND_INCLUDE_BREAK_BY]=(CR.incl===1);}if(CR.cst.vv!==""&&!isNaN(CR.cst.vv)){CS[AX.TREND_POLY_DEGREE]=parseFloat(CR.cst.vv);}CS.existing=true;CR.clientDef=CS;AS[CN]=CS;}function J(CM,CQ,AS){var CN,CP,CO=this.view;[BK.REF_LABELS_FONT_FAMILY,BK.REF_LABELS_FONT_SIZE,BK.REF_LABELS_FONT_STYLE,BK.REF_LABELS_FONT_COLOR].forEach(function(CR){CP=CO.getWidgetPropertyValue(CR);CN=CM[CR];if((typeof CP==="object")&&(CN===undefined||typeof CN!=="object"||(CP[CR+Ao]>CN[CR+Ao]))){AS[CR]=CP[CR];CM[CR]=CP;}else{if(CN===undefined){AS[CR]=CQ[CR];}else{if(typeof CN!=="object"){AS[CR]=CN;}else{AS[CR]=CN[CR];}}}});}function G(CP,CT,AS,CQ){var CM=this.getChartInfo();if(CM.isBubbleOrScatter){if(CT.tp===AW.FIRST||CT.tp===AW.LAST){return ;}}var CU=this.view.getDefaultProperties(),CS=CP[AS]||{},CR={},CN=(CT.fmt||CT.fms),CO;CR.modix=CQ;CR[AX.REF_TYPE]=CT.tp;CR[AX.REF_LEVEL]=CT.lv;if(CN.length===0){CN={};}else{if(typeof CN==="string"){CN=JSON.parse(l.restoreSpecialChars(CN));}}CR.fmt=CN;[AX.TREND_REF_LINE_THICKNESS,AX.TREND_REF_LINE_COLOR,AX.TREND_REF_LINE_STYLE].forEach(function(CV){CO=CN[CV];if(CO===undefined){CR[CV]=CU[CV];}else{CR[CV]=CO;}});J.call(this,CN,CU,CR);CR[AX.REF_ENABLED]=CT.enabl===1;CR[AX.REF_SHOW_LABEL]=(CT.la!==BY.DssModelLabelsNone&&CT.la!==BY.DssModelLabelsReserved);CR[AX.REF_LABEL_TYPE]=CT.la;CR[AX.REF_CONST_VALUE]=CT.cst.vv;if(CT.tp===AW.CONST){CR[AX.REF_LINE_NAME]=CT.lin;}CR.existing=true;if(CS[CT.tp]===undefined){CS[CT.tp]=[];}CS[CT.tp].push(CR);CT.clientDef=CR;CP[AS]=CS;}function BR(AS,CM){if(!AS&&!CM){return true;}if(AS&&CM){return(AS.x===CM.x&&AS.y===CM.y&&AS.width===CM.width&&AS.height===CM.height&&AS.flag===CM.flag);}return false;}function B1(CQ){var CP=[],CO=[],AS=CQ.length,CN,CM;for(CN=0;CN<AS;CN++){CM=CQ[CN];if(CM.actionId===27){CP.push(CM);}else{CO.push(CM);}}CP=CP.concat(CO.reverse());return CP;}function Ar(CS){var CT=CS.cellHandle,CW=CS.mid,CY=this.getMetricSortInfo(),CO=this.getChartInfo();if(CT&&CY.metricId===CW){var CZ=this.xtabModel,Ca=this.getRowHeadersByCell(CT),CP=Ca.headers,CM=CY.elements||[],CR=CM.length,CQ;if(CR===CP.length){for(CQ=0;CQ<CR;CQ++){if(CO.isABL&&this.isStacked){var CV=CP[CQ].id,AS=CM[CQ],CX,CU,CN=CV[2];if(CN!==":"){CN=";";}CX=CV.split(CN)[1];CU=AS.split(CN)[1];if(this.isAttrInZone(CX,"ColorBy")||this.isAttrInZone(CU,"BreakBy")){if(CX!==CU){return false;}}else{if(CZ.getNormalizedFormElementId(CM[CQ])!==CZ.getNormalizedFormElementId(CP[CQ].id)){return false;}}}else{if(CZ.getNormalizedFormElementId(CM[CQ])!==CZ.getNormalizedFormElementId(CP[CQ].id)){return false;}}}this.updateSortIndex(CT);this.showMetricSortIcon=true;return true;}}return false;}function AF(CR,CQ,CM,CS,CO,CT,CN,AS,CP){return{sortIndex:CR,sortType:CQ,objType:CM,objID:CS,ascending:CO,axisIndex:CT,subtotalsPosition:CN,eIds:AS,formId:CP,actionId:26};}function W(AS){return(this.getColTitleInfo(true).items)[AS];}function a(AS){return(this.getRowTitleInfo(true).items)[AS];}function q(AS,CY){var CZ=this.firstRes,CW=CZ.gsi,CQ=CY.id,CT=0,CM=1,CR=2,CS,CU=CW.sorts[AS-1],CP,CX,CO,CN,CV;for(CS=0;CS<CU.length;CS++){CP=CU[CS];CX=CP.key.split("!");CO=CX[CT];CN=CX[CM];CV=CX[CR];if(CN===CQ){if(CP.isAsc===true){return CJ;}return BA;}}return y;}function K(CP){var CO=this.chartType,AS=this.metricsType,CN=this.dz.SizeBy.TemplateMetric,CM=(CN&&CN.length)||0;if(CP===undefined){CP=this.getMetricsOnYAxis();}return((CO===B2.BUBBLE)||(CO===B2.SCATTER))&&(CP.length>1&&CM>1)&&(AS===AH.MetricsByColumn||AS===AH.MetricsByRow);}function Af(){return this.getSizeByMetrics().length;}function AB(CQ,CR,CP){if(this.fakeGroupInfo===false){if(CR===false){return[];}return CQ;}var CM=CQ.length,CO,AS=Math.ceil(CM/2),CN=[];for(CO=0;CO<CM;CO++){if(CR){if(CO%2===0){CN.push(CQ[CO]);}}else{if(CO%2===1){CN.push(CQ[CO]);}}}if(CP&&CN.length<AS){CN.push(Av);}return CN;}function BC(AS,CN){var CM=[];By.forEach(AS,function(CO){CM.push(CN[CO]);});return CM;}function AD(CO,CN){var CM=this.model,AS=CM.getMetricNumberFormat(CN);return C.formatByMask(AS,CO);}function AY(CO,AS){var CN,CQ,CP=AS.row,CM=AS.col;for(CN=0,CQ=CP.length;CN<CQ;CN++){if(CP[CN].id===CO){return true;}}for(CN=0,CQ=CM.length;CN<CQ;CN++){if(CM[CN].id===CO){return true;}}return false;}function c(CT,CU){var CP,CM,CN=CU.docModel.datasets,AS=CT.gts,CR=CT.datasetId,CO=CN[CR]||{},CQ=CO.att||[],CS=[];if(CQ){for(CP=0,CM=CQ.length;CP<CM;CP++){if(!AY(CQ[CP].did,AS)){CS.push(CQ[CP]);}}}return CS;}function N(CN,CO){var CM=function CM(CQ){return CQ.did===CO;},AS=CN.docModel,CP=AS.getDatasetUnits(["att"],CM);if(CP&&CP[0]){return CP[0];}return undefined;}function Bd(AS,CP){var CO={},CN,CM;CN=Math.max(AS.LowOffset,CP.LowOffset);CM=Math.max(AS.HighOffset,CP.HighOffset);CO.LowOffset=CN;CO.HighOffset=CM;return CO;}function Bv(CN,CM){if(CN.isZeroPadding&&CM.isZeroPadding){return CN;}var AS={};AS.X1=Bd(CN.X1,CM.X1);AS.X2=Bd(CN.X2,CM.X2);AS.Y1=Bd(CN.Y1,CM.Y1);AS.Y2=Bd(CN.Y2,CM.Y2);return AS;}function CE(AS,CM){var CN={};CN.Y1=AS.Y1;CN.Y2=AS.Y2;CN.X1=CM.X1;CN.X2=CM.X2;return CN;}function AE(CM,CO){var AS=this.condenseEchos,CN={};if(AS===undefined){return{X1:false,X2:false,Y1:false,Y2:false};}CN.X1=AS.X1[CO]||false;CN.X2=AS.X2[CO]||false;CN.Y1=AS.Y1[CM]||false;CN.Y2=AS.Y2[CM]||false;return CN;}function Bz(CM,CP,CN,AS){CM=CM||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};CP=CP||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};CN=CN||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};AS=AS||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};var CO={};CO.xPrimaryHighTrim=CM.PrimaryHighTrim||0;CO.xPrimaryLowTrim=CM.PrimaryLowTrim||0;CO.yPrimaryHighTrim=CP.PrimaryHighTrim||0;CO.yPrimaryLowTrim=CP.PrimaryLowTrim||0;CO.xSecondaryHighTrim=CN.SecondaryHighTrim||0;CO.xSecondaryLowTrim=CN.SecondaryLowTrim||0;CO.ySecondaryHighTrim=AS.SecondaryHighTrim||0;CO.ySecondaryLowTrim=AS.SecondaryLowTrim||0;return CO;}function O(AS,CM){AS=AS||{LowTrim:0,HighTrim:0};CM=CM||{LowTrim:0,HighTrim:0};return{xCaHighTrim:AS.HighTrim,yCaHighTrim:CM.HighTrim,xCaLowTrim:AS.LowTrim,yCaLowTrim:AS.LowTrim};}function T(CQ,CM){var CN={},CS=this.getChartInfo();CN.TOP=CQ.TOP;CN.BOTTOM=CQ.BOTTOM;CN.LEFT=CM.LEFT;CN.RIGHT=CM.RIGHT;var AS=false,CP,CO=CS.isABL&&CS.dirc===B6.VERTICAL,CR=true;if(CR){if(CO){AS=true;CP=CQ;}else{AS=true;CP=CM;}}return CN;}function As(CN,CM){var AS=CM.length,CO;for(CO=0;CO<AS;CO++){if(CN===CM[CO]){return true;}}return false;}function Aa(CQ,AS){var CP=AS.col,CN,CO,CR,CM,CS;if(CP){CN=CP.length;CO=CP[CN-1];if(CO&&CO.otp===-1&&CO.es){CS=CO.es;CR=CS.length;for(CM=0;CM<CR;CM++){if(CS[CM].oid===CQ){return CM;}}}}return Av;}function Ak(CO){var CN,CM,AS,CQ,CR,CP=this.metricsOnDropZone[CO];if(!CP){CN=this.gts;CM=this.dz[CO];AS=CM.TemplateMetric;CP=[];if(AS&&AS.length>0){CR=AS.length;for(CQ=0;CQ<CR;CQ++){CP.push(Aa.call(this,AS[CQ].id,CN));}}this.metricsOnDropZone[CO]=CP;}return CP;}function Am(CM,AS){if(CM.index<AS.index){return -1;}if(CM.index>AS.index){return 1;}return 0;}function A2(CQ){var CO,AS,CR,CP,CM,CN=[];CP=this.colorByInfo;if(CP.tp===BI.ATT||CP.tp===BI.ATT_METRICS){CR=CP.atts;AS=CR.length;for(CO=0;CO<AS;CO++){CM=CR[CO];if(CM.axis===CQ){CN.push({index:CM.uidx,order:CO});}}return CN.sort(Am);}return[];}function Ax(CO,CQ,CM,CP){var CN,AS=CO.length;for(CN=0;CN<AS;CN++){if(CQ===CO[CN]&&(CP===undefined||CP===CM[CN])){return CN;}}return -1;}function Ay(CM,CT,CQ,CW,CV){var CP,CN,CX,CR=CQ.length,AS,CO,CU;if(CR>0&&(CM===undefined||CT===undefined)){B4.visPrint("the extreme is likely missing");return{min:0,max:99999999};}if(CR===0){return undefined;}var CS=false;for(CP=0;CP<CR;CP++){CO=CQ[CP];if(CO===undefined||CO===Av){return undefined;}CU=Ax(CT,CO,CW,CV);if(CU>=0){AS=CM[CU];if(!CS&&AS.length>=1){CN=l.parseNumeric(AS[0]);CX=l.parseNumeric(AS[1]);CS=true;}else{if(CN>l.parseNumeric(AS[0])){CN=l.parseNumeric(AS[0]);}if(CX<l.parseNumeric(AS[1])){CX=l.parseNumeric(AS[1]);}}}else{B4.visPrint("the metric "+CO+" Not Found in extremes from back end");return{min:0,max:99999999};}}return{min:CN,max:CX};}function o(CR,CT,AS,CQ){var CO=this.extrs,CP,CM,CS,CN,CW,CV;if(CR!==Bn.GLOBAL){CN=this.mapFromChartToLDSIndex(AS,CQ);CW=CN.r;CV=CN.c;}if(CT==="XAxis"||CT==="X2Axis"){CT="x";}else{if(CT==="YAxis"||CT==="Y2Axis"){CT="y";}else{if(CT==="SizeBy"){CT="z";}}}if(CR===Bn.GLOBAL){if(CO.g){CM=CO.g.ex;CP=CO.g.mids;CS=CO.g.etp;}}else{if(CR===Bn.PERROWCOL){if(CT!=="z"){var CU=(CT==="y"?CO.r:CO.c);if(CU){CP=CU.mids;CM=CU.ex[(CT==="y"?CW:CV)];CS=CU.etp;}}else{if(CO.all){CP=CO.all.mids;CM=CO.all.ex[CW][CV];CS=CO.all.etp;}}}else{if(CR===Bn.PERCELL){if(CO.all){CP=CO.all.mids;CM=CO.all.ex[CW][CV];CS=CO.all.etp;}}}}return{mids:CP,exObj:CM,etp:CS};}function d(CM,AS){var CP=this.chartSubType,CN=false,CO=BW.EnumShape.BAR;AS=AS||[];By.forEach(AS,function(CQ){if(CQ===CO){CN=true;}});if(CM&&(CM.min!==undefined&&CM.max!==undefined)){if(CM.min>0){if(CN){CM.min=0;}if(CP===BM.PERCENT){CM.max=1;CM.min=0;}}if(CM.max<0){if(CN){CM.max=0;}if(CP===BM.PERCENT){CM.min=-1;CM.max=0;}}}return CM;}function Aq(CM,CO,CN){var AS;if(CN==="YAxis"){AS=Ai(this.getMetricsOnAxisOfChart(CM,CO,"y",true,true));}else{if(CN==="Y2Axis"){AS=Ai(this.getMetricsOnAxisOfChart(CM,CO,"y",false,true));}else{if(CN==="XAxis"){AS=Ai(this.getMetricsOnAxisOfChart(CM,CO,"x",true,true));}else{if(CN==="X2Axis"){AS=Ai(this.getMetricsOnAxisOfChart(CM,CO,"x",false,true));}else{B4.visPrint("to support");}}}}return AS;}function z(CO,CS,CQ,CR){var AS=CQ[0];if(AS!=="X"&&AS!=="Y"){return null;}this.axisScaleCache=this.axisScaleCache||{};this.axisScaleCache[CR]=this.axisScaleCache[CR]||{};this.axisScaleCache[CR][CQ]=this.axisScaleCache[CR][CQ]||{};var CM=CR,CP=null,CN=this.axisScaleCache[CR][CQ];CN=CN||{};if(CQ[0]==="X"){if(CM===Bn.GLOBAL||CM===Bn.PERROWCOL){CP=CN[CS];}}else{if(CQ[0]==="Y"){if(CM===Bn.GLOBAL||CM===Bn.PERROWCOL){CP=CN[CO];}}else{}}if(!!CP){return CP;}return null;}function AG(CP,CS,CQ,CN,CR){var AS=CQ[0];if(AS!=="X"&&AS!=="Y"){return ;}this.axisScaleCache=this.axisScaleCache||{};this.axisScaleCache[CR]=this.axisScaleCache[CR]||{};this.axisScaleCache[CR][CQ]=this.axisScaleCache[CR][CQ]||{};var CM=CR,CO=this.axisScaleCache[CR][CQ];CO=CO||{};if(CQ[0]==="X"){if(CM===Bn.GLOBAL||CM===Bn.PERROWCOL){CO[CS]=CN;}}else{if(CQ[0]==="Y"){if(CM===Bn.GLOBAL||CM===Bn.PERROWCOL){CO[CP]=CN;}}else{}}}function AQ(CR,CY,CO,CN){var CQ=this.getChartInfo(),Ca=this,CT=CQ.dirc,CP=BW.EnumABLDirection,Cd,CZ,Cc,CS,CW,CU,CV,AS,Cb,CM=[],CX;if(CN===undefined){CN=this.axisScale;}CS=z.call(this,CR,CY,CO,CN);if(!!CS){return CS;}Cb=Aq.call(Ca,CR,CY,CO);By.forEach(Cb,function(Ce){CM.push(Ca.getOnTheFlyShapeForMetric(Ce));});CX=o.call(this,CN,CT===CP.VERTICAL?"y":"x",CR,CY);Cd=CX.exObj;CZ=CX.mids;Cc=CX.etp;CS={};if(CT===CP.VERTICAL){if(this.isStacked&&!this.splitPlottingMetrics){CU=(CO==="YAxis")&&Ay(Cd,CZ,[CC.PRIMARY_Y_AXIS],Cc,e);AS=(CO==="Y2Axis")&&Ay(Cd,CZ,[CC.SECONDARY_Y_AXIS],Cc,e);}else{CU=(CO==="YAxis")&&Ay(Cd,CZ,Cb,Cc,e);AS=(CO==="Y2Axis")&&Ay(Cd,CZ,Cb,Cc,e);}if(CU){CU=d.call(Ca,CU,CM);CS.min=CS.YMin=CU.min;CS.max=CS.YMax=CU.max;}if(AS){AS=d.call(Ca,AS,CM);CS.min=CS.Y2Min=AS.min;CS.max=CS.Y2Max=AS.max;}}else{if(this.isStacked&&!this.splitPlottingMetrics){CW=(CO==="XAxis")&&Ay(Cd,CZ,[CC.PRIMARY_X_AXIS],Cc,e);CV=(CO==="X2Axis")&&Ay(Cd,CZ,[CC.SECONDARY_X_AXIS],Cc,e);}else{CW=(CO==="XAxis")&&Ay(Cd,CZ,Cb,Cc,e);CV=(CO==="X2Axis")&&Ay(Cd,CZ,Cb,Cc,e);}if(CW){CW=d.call(Ca,CW,CM);CS.min=CS.XMin=CW.min;CS.max=CS.XMax=CW.max;}if(CV){CV=d.call(Ca,CV,CM);CS.min=CS.X2Min=CV.min;CS.max=CS.X2Max=CV.max;}}AG.call(this,CR,CY,CO,CS,CN);return CS;}function Ae(CN,CW,CQ,CX){var CR,CP,CO,CT,CS,CY,CV,CU,CM,CZ,AS;if(CX===undefined){CX=this.axisScale;}CR=z.call(this,CN,CW,CQ,CX);if(!!CR){return CR;}CT=o.call(this,CX,"x",CN,CW);CV=CT.exObj;CM=CT.mids;CP=CT.etp;CS=o.call(this,CX,"y",CN,CW);CU=CS.exObj;CZ=CS.mids;CO=CS.etp;CY=Aq.call(this,CN,CW,CQ);if(CQ==="YAxis"){AS=Ay(CU,CZ,CY,CO,e);CR={YMin:AS&&AS.min,YMax:AS&&AS.max};}else{if(CQ==="Y2Axis"){AS=Ay(CU,CZ,CY,CO,e);CR={Y2Min:AS&&AS.min,Y2Max:AS&&AS.max};}else{if(CQ==="XAxis"){AS=Ay(CV,CM,CY,CP,e);CR={XMin:AS&&AS.min,XMax:AS&&AS.max};}else{if(CQ==="X2Axis"){AS=Ay(CV,CM,CY,CP,e);CR={X2Min:AS&&AS.min,X2Max:AS&&AS.max};}else{B4.visPrint("to support");}}}}CR.min=AS&&AS.min;CR.max=AS&&AS.max;AG.call(this,CN,CW,CQ,CR,CX);return CR;}function Az(CO,CR){var CM,CQ,CP,AS,CN,CS=Aa(CO,this.gts);CM=o.call(this,Bn.GLOBAL);CQ=CM.exObj;CP=CM.mids;AS=CM.etp;if(CR===true){CN=Ay(CQ,CP,[CS],AS,BZ);}else{CN=Ay(CQ,CP,[CS],AS,e);}return CN;}function Bk(CP,CS){var CR=this.getChartInfo(),AS={},CO=this,CQ=["YAxis","Y2Axis","XAxis","X2Axis"],CM,CN;CN=CR.isABL?AQ:Ae;CQ.forEach(function(CT){CM=CN.call(CO,CP,CS,CT);Ap.copy(CM,AS);});return AS;}function Bi(CM){var AS=["AllMetrics","XAxis","X2Axis","YAxis","Y2Axis","SizeBy"];return(AS.indexOf(CM)<0);}function A6(CQ,CO,CN){var CT,CP,Cb=0,CV=1,Ca=2,CR=3,CS,CX,CW=this.axisScale,CU,AS,CZ,CY;if(CQ!==undefined){CU=(this.model.getMetricIDsFromIndex([CQ]))[0];}if(CW!==Bn.CUSTOM){return CW;}CY=this.view.getWidgetPropertyValue(AX.AXIS_SCALE_DATA);CX=parseInt(CY[0][CV],10);if(CX!==Bn.DIFFERENT){if(CN!==undefined){CN.min=parseFloat(CY[0][Ca]);CN.max=parseFloat(CY[0][CR]);}return CX;}for(CT=1,CP=CY.length;CT<CP;CT++){CS=CY[CT];var CM=CS[Cb];if(CO!==undefined&&CM===CO){AS=parseInt(CS[CV],10);if(CN!==undefined){CN.min=parseFloat(CS[Ca]);CN.max=parseFloat(CS[CR]);}break;}if(CU!==undefined&&CU===CM){CZ=parseInt(CS[CV],10);if(CN!==undefined){CN.min=parseFloat(CS[Ca]);CN.max=parseFloat(CS[CR]);}}}return AS!==undefined?AS:CZ;}function AU(CR){var CM=Bi(CR),CN,CQ=[],AS,CP=0,CS=0,CO=this;if(CM){AS=this.getMetricIndexFromID(CR);return[this.getOnTheFlyShapeForMetric(AS)];}CN=Aq.call(this,CP,CS,CR);By.forEach(CN,function(CT){CQ.push(CO.getOnTheFlyShapeForMetric(CT));});return CQ;}function B7(CM,CV,CW){var CX=this,CN=this.getChartInfo(),Ca=o.call(this,Bn.GLOBAL),CR,CU,CY,CT,CS,CZ=Bi(CM);var AS;var CP={};if(CZ){var CQ=Aa.call(this,CM,this.gts);AS=A6.call(this,CQ,undefined,CP);}else{AS=A6.call(this,undefined,CM,CP);}if(!CW){if(AS===Bn.CUSTOM){return{min:CP.min,max:CP.max,scaleType:AS};}}if(!CZ){if(CM==="SizeBy"){CR=Ca.exObj;CU=Ca.mids;CY=Ca.etp;if(CN.tp===B2.BUBBLE||CN.tp===B2.SCATTER){CS=Ai(this.getMetricsOnAxisOfChart(0,0,"z"));}else{CS=this.getSizeByMetrics();}CT=Ay(CR,CU,CS,CY,BZ);}else{var CO=CN.isABL?AQ:Ae;CT=CO.call(this,0,0,CM,Bn.GLOBAL);}}else{CT=Az.call(this,CM,CV);}if(CT){if(CN.isABL&&AS!==Bn.CUSTOM){CT=d.call(CX,CT,AU.call(CX,CM));}return{min:CT.min,max:CT.max,scaleType:AS};}B4.visPrint("getGlobalExtremeForAxisOrMetric getting faked extreme");return{min:0,max:99999999,scaleType:AS};}function Bw(Co,Cp,Cw,Ci){var Cz=this.getChartInfo(),CW=this,Ck=0,CV=1,Cb=2,Cv=3,Cf=7,C0=8,CY=Ci.length,Cs,Cl,CR,Cq,Cr=false,Cx,Cd,CQ,Cj,CX,Cn,CT,Cu,CS,AS,Cm,CM,Ce,Cy=["Dumy","x","y","z","x2","y2"],Cc=["Dumy","XAxis","YAxis","SizeBy","X2Axis","Y2Axis"];Ce=Cy[Cc.indexOf(Co)];var CP=true,CZ;if(Ce==="x2"){Ce="x";CP=false;}if(Ce==="y2"){Ce="y";CP=false;}for(Cs=1;Cs<CY;Cs++){Cl=Ci[Cs];CR=Cl[Ck];if(CR===Co){Cr=true;Cq=parseInt(Cl[CV],10);if(Cq===Bn.CUSTOM){Cd=parseFloat(Cl[Cv]);Cx=parseFloat(Cl[Cb]);CQ=l.isTrueForBoolValue(Cl[Cf]);Cj=l.isTrueForBoolValue(Cl[C0]);return{max:Cd,min:Cx,autoMin:CQ,autoMax:Cj};}if(Co==="SizeBy"){CS=o.call(this,Cq,Co,Cp,Cw);CX=CS.exObj;Cn=CS.mids;CT=CS.etp;if(Cz.tp===B2.BUBBLE||Cz.tp===B2.SCATTER){Cm=Ai(this.getMetricsOnAxisOfChart(Cp,Cw,"z"));}else{Cm=this.getSizeByMetrics();}Cu=Ay(CX,Cn,Cm,CT,BZ);}else{CZ=Cz.isABL?AQ:Ae;Cu=CZ.call(this,Cp,Cw,Co,Cq);}return{max:Cu.max,min:Cu.min,autoMin:false,autoMax:false};}}AS=this.gts;var CO,Ch,Cg,CN,Ct=Ai(this.getMetricsOnAxisOfChart(Cp,Cw,Ce,CP));if(Cr===false){var Ca=true;Cd=Cx=undefined;for(Cs=1;Cs<CY;Cs++){Cl=Ci[Cs];CR=Cl[Ck];Cq=parseInt(Cl[CV],10);if(Bi(CR)){CM=Aa.call(this,CR,AS);if(As(CM,Ct)){if(Cq===3){Ch=parseFloat(Cl[Cv]);CO=parseFloat(Cl[Cb]);Cg=l.isTrueForBoolValue(Cl[Cf]);CN=l.isTrueForBoolValue(Cl[C0]);}else{CS=o.call(this,Cq,Co,Cp,Cw);CX=CS.exObj;Cn=CS.mids;CT=CS.etp;Cu=Ay(CX,Cn,[CM],CT,Co==="SizeBy"?BZ:e);if(Cz.isABL&&Co!=="SizeBy"){var CU=CW.getOnTheFlyShapeForMetric(CM);Cu=d.call(CW,Cu,[CU]);}Ch=Cu.max;CO=Cu.min;Cg=false;CN=false;}if(Ca){Cx=CO;Cd=Ch;CQ=Cg;Cj=CN;}else{Cx=Cx<CO?Cx:CO;Cd=Cd>Ch?Cd:Ch;CQ=CQ===Cg?CQ:false;Cj=Cj===CN?Cj:false;}Ca=false;}}}return{max:Cd,min:Cx,autoMin:CQ,autoMax:Cj};}}function Ac(CT,Cd,Cb){var CS=1,CZ=2,Ca=3,CM=7,CO=8,Ce,CU,CX;Ce=Cb[0];CX=parseInt(Ce[CS],10);if(CX===Bn.CUSTOM){var CN,CP,CW,CY;CN=parseFloat(Ce[CZ]);CP=parseFloat(Ce[Ca]);CW=l.isTrueForBoolValue(Ce[CM]);CY=l.isTrueForBoolValue(Ce[CO]);CU={XMin:CN,XMax:CP,YMin:CN,YMax:CP,ZMin:CN,ZMax:CP,X2Min:CN,X2Max:CP,Y2Min:CN,Y2Max:CP,XAutoMin:CW,XAutoMax:CY,X2AutoMin:CW,X2AutoMax:CY,YAutoMin:CW,YAutoMax:CY,Y2AutoMin:CW,Y2AutoMax:CY,ZAutoMin:CW,ZAutoMax:CY};}else{var AS,Cc,CQ,CR,CV;AS=Bw.call(this,"XAxis",CT,Cd,Cb);Cc=Bw.call(this,"YAxis",CT,Cd,Cb);CR=Bw.call(this,"X2Axis",CT,Cd,Cb);CV=Bw.call(this,"Y2Axis",CT,Cd,Cb);CQ=Bw.call(this,"SizeBy",CT,Cd,Cb);CU={XMin:AS.min,XMax:AS.max,YMin:Cc.min,YMax:Cc.max,ZMin:CQ.min,ZMax:CQ.max,X2Min:CR.min,X2Max:CR.max,Y2Min:CV.min,Y2Max:CV.max,XAutoMin:AS.autoMin,XAutoMax:AS.autoMax,X2AutoMin:CR.autoMin,X2AutoMax:CR.autoMax,YAutoMin:Cc.autoMin,YAutoMax:Cc.autoMax,Y2AutoMin:CV.autoMin,Y2AutoMax:CV.autoMax,ZAutoMin:CQ.autoMin,ZAutoMax:CQ.autoMax};}return CU;}function BP(){var CO=this.colorByInfo,CM,CR,CQ,AS,CP,CN;if(CO.tp===BI.METRICS){CN=CO.colorByMetricIndex;CM=o.call(this,Bn.GLOBAL,"c",0,0);CR=CM.exObj;CQ=CM.mids;AS=CM.etp;CP=Ay(CR,CQ,[CN],AS,A0);return CP;}return undefined;}function BS(CM){var AS;if(CM==="x1"){AS="x";}else{if(CM==="y1"){AS="y";}else{AS=CM;}}return AS.toUpperCase();}function Ba(Ca,Cg){var CN,CY=this.getChartInfo(),CR=B2,CO=this.axisScale,CM,CZ,CT,Cb,CW,CV,AS,Cc,CQ,Cf,CX=this.getSizeByMetrics(),CS=CX.length>0;if(CO===Bn.CUSTOM){Cf=this.view.getWidgetPropertyValue(AX.AXIS_SCALE_DATA);}if(CY.isABL){if(CO===Bn.CUSTOM){Cb=Ac.call(this,Ca,Cg,Cf);if(CY.isABL&&this.chartSubType===BM.PERCENT){if(CS){var Cj=CX[0];if(A6.call(this,Cj,"SizeBy")===Bn.CUSTOM){CW=this.model.mx[Cj].max;CV=this.model.mx[Cj].min;Cb.ZMin=Cb.ZMin*(CW-CV)+CV;Cb.ZMax=Cb.ZMax*(CW-CV)+CV;}}}}else{Cb=Bk.call(this,Ca,Cg);if(CS){var Ce=o.call(this,CO,"z",Ca,Cg);CM=Ce.exObj;CZ=Ce.mids;CT=Ce.etp;AS=Ay(CM,CZ,CX,CT,BZ);if(AS){Cb.ZMin=AS.min;Cb.ZMax=AS.max;}}}}else{if(CY.tp===CR.BUBBLE||CY.tp===CR.SCATTER){CQ=Ai(this.getMetricsOnAxisOfChart(Ca,Cg,"z"));if(CO===Bn.CUSTOM){Cb=Ac.call(this,Ca,Cg,Cf);}else{Cb=Bk.call(this,Ca,Cg);if(CS){Cc=o.call(this,CO,"z",Ca,Cg);CM=Cc.exObj;CZ=Cc.mids;CT=Cc.etp;AS=Ay(CM,CZ,CQ,CT,BZ);if(AS){Cb.ZMin=AS.min;Cb.ZMax=AS.max;}}}if(CS&&CQ.length>0&&Cb.ZMin===undefined&&Cb.ZMax===undefined){var CP=this.sizeByMetricsSharedInAxis;if(CP.length>1){var Cd=[],CU=[];CP.forEach(function(Ck){Cd.push(Cb[BS(Ck)+"Min"]);CU.push(Cb[BS(Ck)+"Max"]);});Cb.ZMin=Cd.sort()[0];Cb.ZMax=CU.sort()[CU.length-1];}else{if(CP.length===1){var Ci=this.collisionSizeByMetric;var Ch=A6.call(this,Ci[0],BS(CP[0])+"Axis");if(Ch===Bn){Cb.ZMin=Cb[BS(CP[0])+"Min"];Cb.ZMax=Cb[BS(CP[0])+"Max"];}else{if(Ch!==Bn.GLOBAL){Ch=Bn.PERCELL;}Cc=o.call(this,Ch,"z",Ca,Cg);CM=Cc.exObj;CZ=Cc.mids;CT=Cc.etp;AS=Ay(CM,CZ,CQ,CT,undefined);if(AS){Cb.ZMin=AS.min;Cb.ZMax=AS.max;}}}}}}else{if(CY.tp===CR.GRID){if(CO===Bn.CUSTOM){Cb=Ac.call(this,Ca,Cg,Cf);}else{Cc=o.call(this,CO,"z",Ca,Cg);CM=Cc.exObj;CZ=Cc.mids;CT=Cc.etp;AS=Ay(CM,CZ,CX,CT,BZ);if(AS){Cb={ZMin:AS.min,ZMax:AS.max};}else{Cb={};}}}}}CN={YMinValue:Cb.YMin,YMaxValue:Cb.YMax,Y2MinValue:Cb.Y2Min,Y2MaxValue:Cb.Y2Max,XMinValue:Cb.XMin,XMaxValue:Cb.XMax,X2MinValue:Cb.X2Min,X2MaxValue:Cb.X2Max,ZMinValue:Cb.ZMin,ZMaxValue:Cb.ZMax};Ap.copyProps(["XAutoMin","XAutoMax","X2AutoMin","X2AutoMax","YAutoMin","YAutoMax","Y2AutoMin","Y2AutoMax","ZAutoMin","ZAutoMax"],Cb,CN);return CN;}function BV(CQ,CP){var CO=false,CM=this,AS,CN=false;By.forEach(CQ,function(CR){if(CR===undefined||CR<0){CN=true;}else{AS=A6.call(CM,CR,CP);if(AS===Bn.CUSTOM){CO=true;}}});return{emptyAxis:CN,customAxisEnabled:CO};}function BU(CP,CS){var CN,CQ,CO,AS,CM,CR;CQ=Ba.call(this,0,0);CN={origMin:CQ.ZMinValue,origMax:CQ.ZMaxValue};CO=CN.origMin;AS=CN.origMax;if(CS&&CO<0){CR=this.getSizeByExtremeForNegativeProportionalMode(CP);CO=CR.min||CO;AS=CR.max||AS;}CM=[AS];if(CO!==AS){CM.push(CO);}return CM;}function An(CN){if(CN===undefined){CN=true;}var Cg,Cb=this.getMetricsOnXAxis(),CY=this.getMetricsOnYAxis(),CU=this.getChartInfo(),CQ=CU.tp,Cl=this.getSizeByMetrics(),CO=this.getColorByMetrics(),Ch=this.model,CX=Ch.getMetricNames(),Cc=BC(Cl,CX),Ck=this.markerShape,Cn=[],Cm=[],CT=0,Cd=true,Ci=0,Cf=0,CS=[],Ca=true,CM=this.model.cic,Cj=this.model.cir,AS,CV,CR,CZ,CW,CP,Ce;Cg=Math.min(Cb.length,CY.length);if(Cl.length>0){Cg=Math.min(Cg,Cl.length);}if(Cc&&Cc[0]&&Ck!==Aj.AREA){if((!K.call(this)&&this.getSizeByScaleType(0)===Bn.GLOBAL)||(!K.call(this)&&this.getSizeByScaleType(0)===Bn.CUSTOM)||(!K.call(this)&&(CM===1&&Cj===1&&((CQ===B2.BUBBLE||CQ===B2.SCATTER)||CQ===B2.GRID||CU.isABL)))){AS=BU.call(this,Cl[0],this.property.readItem(AX.MIN_SIZE_TYPE)===Br.PROPORTIONAL);CV=AS.length;CR=0;CZ=0;CW="";for(Ci=0;Ci<CV;Ci++){CZ=AS[Ci];if(isNaN(CZ)){CW="NaN";}else{CW=AD.call(this,CZ,Cl[0]);Ca=false;}Cn.push({diameter:CR,value:CW,num:CZ});}CP=Cn.length;if(CP>0){Ce=false;if(Ce){for(Ci=0;Ci<CP;++Ci){Cn[Ci].value=l.formatNumber(Cn[Ci].num,"up").s;}}}}else{Cd=false;for(Ci=0;Ci<Cc.length;Ci++){Ca=false;if(!Ca){break;}}}if(Cc.length>1&&!K.call(this)){for(Cf=0;Cf<Cg;Cf++){if(CU.isPie&&CO&&CO.indexOf(Cl[Cf])!==-1){Cm[Cf]="Total of "+Cc[Cf];}else{Cm[Cf]=Cc[Cf];}}}else{for(Cf=0;Cf<Cc.length;Cf++){if(CU.isPie&&CO&&CO.indexOf(Cl[Cf])!==-1){Cm[Cf]="Total of "+Cc[Cf];}else{Cm[Cf]=Cc[Cf];}}}if(Ck===Aj.CIRCLE||Ck===Aj.LINE){CT=BL.CIRCLE;}else{CT=BL.SQUARE;}for(Ci=0;Ci<Cc.length;Ci++){if(this.getSizeByScaleType(Ci)===Bn.CUSTOM){CS.push(Cc[Ci]);}}}if(Ca){Cm=[];}return{sizeByDataProvider:Cn,sizeByTitles:Cm,sizebyType:CT,sizeByMode:Cd,sizeByScaleType:CS};}function BB(CO,CS,CR,CN){var CM=B2,CT=BW.EnumABLDirection,AS,CP,CQ=(CO===CM.BAR||CO===CM.LINE||CO===CM.AREA);if(CQ){if(CN!==Aj.BAR){if(CS===BM.CLUSTERED){CS=BM.ABSOLUTE;}}else{if(CS===BM.ABSOLUTE){CS=BM.CLUSTERED;}}if(CO===CM.BAR){if(CS===BM.ABSOLUTE){if(CN===Aj.BAR){CS=BM.CLUSTERED;}}}}if(CQ&&CS===BM.AUTO){if(CN===B0.AREA){CS=BM.STACKED;}else{if(CN===B0.BAR){CS=BM.CLUSTERED;}else{CS=BM.ABSOLUTE;}}}if(CQ&&CN===B0.BAR&&CS===BM.ABSOLUTE){CS=BM.CLUSTERED;}if(CO===CM.AREA){if(CR===CT.VERTICAL){switch(CS){case BM.ABSOLUTE:AS=1;break;case BM.STACKED:AS=2;break;case BM.PERCENT:AS=7;break;}}else{switch(CS){case BM.ABSOLUTE:AS=8;break;case BM.STACKED:AS=9;break;case BM.PERCENT:AS=14;break;}}}else{if(CO===CM.BAR){if(CR===CT.VERTICAL){switch(CS){case BM.CLUSTERED:AS=15;break;case BM.ABSOLUTE:AS=91;break;case BM.STACKED:AS=16;break;case BM.PERCENT:AS=21;break;}}else{switch(CS){case BM.CLUSTERED:AS=22;break;case BM.ABSOLUTE:AS=92;break;case BM.STACKED:AS=23;break;case BM.PERCENT:AS=28;break;}}}else{if(CO===CM.LINE){if(CR===CT.VERTICAL){switch(CS){case BM.ABSOLUTE:AS=29;break;case BM.STACKED:AS=30;break;case BM.PERCENT:AS=35;break;}}else{switch(CS){case BM.ABSOLUTE:AS=36;break;case BM.STACKED:AS=37;break;case BM.PERCENT:AS=42;break;}}}else{if(CO===CM.BUBBLE){AS=61;}else{if(CO===CM.SCATTER){AS=51;}else{if(CO===CM.GRID){AS=20000;}else{B4.visPrint("the ce chart type is not found");}}}}}}switch(CN){case B0.AREA:CP=Aj.AREA;break;case B0.BAR:CP=Aj.BAR;break;case B0.LINE:CP=Aj.LINE;break;case B0.CIRCLE:CP=Aj.CIRCLE;break;case B0.SQUARE:CP=Aj.SQUARE;break;case B0.TICK:CP=Aj.TICK;break;case B0.PIE:CP=Aj.PIE;break;case B0.RING:CP=Aj.RING;break;}return{ceChartType:AS,shape:CP,subType:CS};}function Bu(CQ,CU,CN,CX){var CZ=this.hasGroupInfoStored(),CO=this.gts,CW=[],Ca=this.dz,CP,CM,CR,CT,CY,AS,CS;if(this.shallWeUseGroupInfo&&CU&&CZ.existing){var CV=CZ.gi;if(CN===true){By.forEach(CV,function(Cc){var Cb=Cc[0];if(Cb!==Av){Cc[0]=Aa.call(this,Cb,CO);}Cb=Cc[1];if(Cb!==Av){Cc[1]=Aa.call(this,Cb,CO);}});}By.forEach(CV,function(Cb){if(CU===true){CW.push(Cb[CQ]);}else{if(Cb[CQ]!==Av){CW.push(Cb[CQ]);}}});return CW;}CP=this.getChartInfo();if(CP.isABL){if(CP.dirc===B6.VERTICAL){if(CX==="x"){return CW;}CM=Ca.YAxis;}else{if(CX==="y"){return CW;}CM=Ca.XAxis;}}else{if(CX==="x"){CM=Ca.XAxis;}else{CM=Ca.YAxis;}}CR=CM.TemplateMetric;By.forEach(CR,function(Cb){CT=Cb.idx;CY=Cb.id;AS=parseInt(Cb.ax,10);CS=(AS===Y.PRIMARY);if((CQ===0&&CS===true)||(CQ===1&&CS===false)){if(CN){CW.push(CT);}else{CW.push(CY);}}});return CW;}function CK(){var CM,AS,CN=this.getChartInfo();if(CN.isABL){if(CN.dirc===B6.VERTICAL){CM=this.getMetricsOnYAxis();}else{CM=this.getMetricsOnXAxis();}}else{if(CN.tp===B2.GRID){CM=[];}else{CM=this.getMetricsOnYAxis();AS=this.bubbleSeriesNum;if(CN.isBubbleOrScatter&&AS!==undefined){CM=CM.slice(0,AS);}}}return CM;}function t(AS){var CM=[1,2,7,15,91,16,21,29,30,35];if(As(AS,CM)){return 1;}return 0;}function CB(AS){var CM=[8,9,14,22,92,23,28,36,37,42];if(As(AS,CM)){return 1;}return 0;}function X(CO,AS){if(!CO||AS>=CO.length){return 1;}var CN,CM=0;for(CN=0;CN<AS;CN++){CM+=(CO[CN]||0);}return CM%2+1;}function AM(CS,CR,CT,CO,CM){var CN,AS=CM.items.slice(CR,CR+CO),CP=AS.length,CQ=[];for(CN=0;CN<CP;CN++){CQ.push({items:AS[CN].items.slice(CS,CS+CT)});}return CQ;}function Bc(AS,CQ){var CO=[];var CP=0;var CM=Math.floor(AS/CQ);var CN=CQ;while(CN--){CO.push(CP);CP+=CM;}CO.push(AS);return CO;}function Bx(AS){var CN=AS.TemplateUnit,CM=0;if(CN){By.forEach(CN,function(CO){CM+=l.getAttributeFormCnt(CO);});}return CM;}function n(CP,CM,CO){var CN=CM.length,AS;for(AS=0;AS<CN;AS++){if(CP===CM[AS][CO]){return AS;}}return -1;}function BO(CN){var CQ=CN.gsi,CP=CQ.mx,CO=CN.nf,CM,AS=CP&&CP.length;for(CM=0;CM<AS;CM++){if(typeof CO[CM].nfs!=="string"){CO[CM].nfs=B4.getNumberFormat(CN,CM);}if(CP[CM].numfmt===undefined){CP[CM].numfmt=CO[CM].nfs;}}}function B3(AS,CR){var CO=CR.gts,CN=CO.row,CP=CO.col,CM;[CP,CN].forEach(function(CT){if(!CM&&CT){var CS=CT[CT.length-1];if(CS&&CS.otp===-1&&CS.es){CM=CS.es;}}});function CQ(CV,CU,CX,CW){var CT=n(CV.id,CU,"id");if(CT>=0){var CZ=CU[CT],CS=CZ.dropzones=CZ.dropzones||[],CY=Ap.clone(CZ.fs);CV.uidx=CT;CV.axis=CX;CV.fs=CY;CV.fcnt=CY&&CY.length;CV.n=CZ.n;CV.cs=CZ.cs;CV.rs=CZ.rs;CS.push(CW);}}["Rows","Columns","SizeBy","AngleBy","Angle","SliceBy","ColorBy","XAxis","YAxis","BreakBy","AdditionalMetrics"].forEach(function(CW){var CY=AS[CW];if(CY){var CU=0,CT=CY.TemplateUnit,CV;if(CT){while(CU<CT.length){CV=CT[CU];if(CV.t===w.Dimension){var CS=[];CN.concat(CP).forEach(function(CZ){if(CZ.hid===CV.id){CS.push({id:CZ.id,t:CZ.t,srcUnit:CV});}});Array.prototype.splice.apply(CT,[CU,1].concat(CS));CU+=CS.length;}else{CU++;}}CT.forEach(function(Ca,CZ){Ca.idx=CZ;});}(CT||[]).forEach(function(CZ){CQ(CZ,CN,"row",CW);CQ(CZ,CP,"col",CW);});var CX=CY.TemplateMetric;if(CM&&CX){CX.forEach(function(Ca){var CZ=n(Ca.id,CM,"oid");if(CZ>=0){Ca.idx=CZ;Ca.n=CM[CZ].n;CM[CZ].cds=Ca.cds;}});}}});}function AK(CN){var CO=["XAxis","YAxis","BreakBy","Rows","Columns","SliceBy"],CQ,CM,AS=CO.length,CP,CR=[];for(CP=0;CP<AS;CP++){CM=CO[CP];CQ=CN[CM];if(CQ&&CQ.MetricNames!==undefined){CR.push(CM);}}if(CR.length===1){switch(CR[0]){case"XAxis":return AH.MetricsByXAxis;case"YAxis":return AH.MetricsByYAxis;case"BreakBy":return AH.MetricsByBreakBy;case"Rows":return AH.MetricsByRow;case"Columns":return AH.MetricsByColumn;case"SliceBy":return AH.MetricsBySlice;}}else{if(CR.length===2){if((CR[0]==="XAxis"&&CR[1]==="YAxis")||(CR[1]==="XAxis"&&CR[0]==="YAxis")){return AH.MetricsByAxis;}B4.visPrint("the metricsBy item is incorrect #1");return AH.MetricsByRow;}}if(CR.length>2){B4.visPrint("the metricsBy item is incorrect #2");return AH.MetricsByRow;}if(CR.length===0){return AH.MetricsByRow;}}function BF(){var AS=this.dz,CP=this.getChartInfo(),CN=CP.isABL,CO=AS.Rows.MetricNames!==undefined,CM=AS.YAxis.TemplateUnit===undefined;return CN&&CO&&CM;}function V(){var AS=this.dz,CN=AS.Columns.MetricNames!==undefined,CM=AS.XAxis.TemplateMetric===undefined;return CN&&CM;}function BJ(CN){var AS=this.dz,CM=AS[CN];return(CM.MetricNames!==undefined);}function BG(CO){var AS=this.dz,CM=AS[CO],CN=Object.keys(CM);return BJ.call(this,CO)&&CN.length===1;}function Be(){var CQ=this.getChartInfo(),CP=CQ.isPie,CN=CQ.isGrid,CO=BG.call(this,"XAxis")||BG.call(this,"YAxis"),AS=this.getMetricsOnAngleBy(),CM=AS.length>=2;return CN&&CP&&CO&&CM;}function AI(CV,CM){var CX=this.dz,CS=[],CR,CQ,CT,CW,CU,CO,CN,CP,AS=this.gts;CU=CX[CV].TemplateUnit;if(CU){CR=CU.length;for(CQ=0;CQ<CR;CQ++){CT=CU[CQ];CO=CT.axis;if(CO==="row"){CN=AS.row;}else{CN=AS.col;}CP=CT.uidx;CW=CN[CP];if(CM){CS.push(CW[CM]);}else{CS.push(CW);}}}return CS;}function Au(CZ,AS){var Cb=CZ.ColorBy,CT=[],CU,CQ,CX,CW,CV=Cb.TemplateUnit,CR=Cb.TemplateMetric,Ca=false,CO=false,CP=false,CM=BI.NULL;if(CV&&CV.length>0){Ca=true;}if(CR&&CR.length>0){CW=CR[0].idx;CO=true;}if(Cb.MetricNames!==undefined){CP=true;}if(!(CP||CR||Ca)){return{tp:BI.NULL};}if(Ca){if(CP){CM=BI.ATT_METRICS;}else{CM=BI.ATT;}CU=CV.length;for(CQ=0;CQ<CU;CQ++){CT.push(CV[CQ]);}return{tp:CM,atts:CT};}if(CP){CM=BI.METRICS_ITEM;return{tp:CM};}if(CO){CM=BI.METRICS;CX=AS.gsi;this.thresholds=CX.thresholds;var CN=CX.mx[CW].did,CY=this.thresholds&&this.thresholds[CN],CS;if(!CY){return{tp:BI.NULL};}CS=B4.getRankMode(CY);return{tp:CM,metrics:CR,rankMode:CS,colorByMetricIndex:CW,thresholds:CY};}}function g(CM,CN,AS){var CO=document.createElement("div");CO.setAttribute("class","gm-zero-line horizontal");CO.style.width=CM+"px";CO.style.top=CN+"px";CO.style.left="0px";if(AS){Bb.addClass(CO,"dashed");}else{Bb.addClass(CO,"nondashed");}return CO;}function BN(CM,CN,AS){var CO=document.createElement("div");CO.setAttribute("class","gm-zero-line vertical");CO.style.height=CM+"px";CO.style.top="0px";CO.style.left=CN+"px";if(AS){Bb.addClass(CO,"dashed");}else{Bb.addClass(CO,"nondashed");}return CO;}function AR(CT){var CM,AS,CO,CS,CN=CT.dataProvider,CU=Q.call(this),CP,CR=this.defn,CQ=CR.gpp;if(this.ChartFactory===undefined){this.ChartFactory=new B8.MsiChart();this.ChartFactory.setController(this.controller);}CO=this.ChartFactory;AS=this.sharedFormatManager;if(!AS){AS=CO.createFormatManager(CQ,this.sharedPool);}if(CU){this.sharedFormatManager=AS;}CM=CO.createDataSet({dataProvider:CN,formatManager:AS});if(CM===null){return null;}if(CM.GetStatus(true)===0){return null;}CS=this.addDisposable(CO.createChartFromFormatManager(CM,AS,null,this.view.enableCETimer));CP=CS.IsDataEnough();if(!CP){return null;}if(this.useCECanvas){CS.setCanvasProps({type:"JSON"});}else{CS.setCanvasProps({type:"SVG",gradPrefix:"gmGrad",mGradientCount:++AV,seriesDrawOrder:CM.GetSeriesIndexByPriority()});}return CS;}function A(CM){var CV=CM?CM.length:0,CU,CT,CR,AS,CX,CN,CP;var CS=function(Ca){var CY,CZ=-1;if(Ca&&Ca.indexOf&&Ca.indexOf("idx")>=0){CY=Ca.split(":");if(CY&&CY.length===2){CZ=parseInt(CY[1]);}}return CZ;};var CQ=function(Ce,Cg){var Ca=this.getChartInfo(),Cd,Cc=null,Ch=this.dz,CZ,Cb,Cf,CY;if(Ca.dirc===B6.VERTICAL){CZ=Ch.YAxis;Cf=CZ.TemplateMetric;Cd=Cf&&Cf.length>0&&Cf[Ce];if(Cd){CY=parseInt(Cd.ax,10);if(CY===Y.PRIMARY&&Cg||CY===Y.SECONDARY&&!Cg){Cc=Cd.id;}}}else{if(Ca.dirc===B6.HORIZONTAL){Cb=Ch.XAxis;Cf=Cb.TemplateMetric;Cd=Cf&&Cf.length>0&&Cf[Ce];if(Cd){CY=parseInt(Cd.ax,10);if(CY===Y.PRIMARY&&Cg||CY===Y.SECONDARY&&!Cg){Cc=Cd.id;}}}}return Cc;};var CO=function(CZ,CY,Cc){var Cb=CZ[CY],Ca=Cc?0:1;if(Cb[0]===Av||Cb[1]===Av){CZ[CY]=undefined;}else{Cb[Ca]=Av;}};for(CU=0;CU<CV;CU++){CT=CM[CU];CR=CT[0];AS=CS(CR);if(AS>=0){CP=CQ.call(this,AS,true);if(CP){CT[0]=CP;}else{CO(CM,CU,true);}}CX=CT[1];CN=CS(CX);if(CN>=0){CP=CQ.call(this,CN,false);if(CP){CT[1]=CP;}else{CO(CM,CU,false);}}}var CW=[];for(CU=0;CU<CV;CU++){if(CM[CU]!==undefined){CW.push(CM[CU]);}}this.setGroupInfo(CW);return CW;}function AO(AS,CT,CP,CN,CR){var CQ=document.createElement("div"),CO=(CN==="x"?CT:AS)-CP,CM,CS;CO=CO>0?CO:0;CM=CN==="x"?AS:CO;CS=CN==="x"?CO:CT;CQ.style.position="absolute";CQ.style.width=CM+"px";CQ.style.height=CS+"px";CQ.style[I[CN][CR?"first":"second"]]="0px";return CQ;}mstrmojo.gm.GMController=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gm.GMController",dualAxisEnabled:false,model:undefined,firstRes:undefined,view:undefined,drawer:undefined,manager:undefined,horizontalMode:false,enablePartialRendering:false,chartType:-1,isBlankGrid:false,chartSubType:BM.AUTO,chartDirection:-1,rowHeaderCnt:2,colHeaderCnt:2,splitPlottingMetrics:undefined,inChartLayout:undefined,mWd:0,mHt:0,isEmpty:false,ceChartType:BT.DssGraphTypeVertical_Line_Absolute,isPercentage:false,isStacked:false,isPie:false,piePartition:undefined,totalRows:undefined,totalStartCols:undefined,useCECanvas:false,maxPadding:undefined,maxRowPadding:undefined,maxColPadding:undefined,axisScale:Bn.GLOBAL,axisScaleCache:null,freezeChart:A5,markerShape:undefined,ceMarkerShape:undefined,palette:Bo,isLarge:false,metricsType:AH.MetricsByColumn,fakeGroupInfo:false,shallWeUseGroupInfo:false,enableCombiChart:false,pureAreaChart:false,globalColorMapping:true,ttlDispTp:undefined,mulAttsOnAxisForABL:false,trendlineDefined:false,clusteredBarSpecialCase:false,init:function(AS){this.rhStyles=null;this.chStyles=null;this.xTitleStyles=null;this.yTitleStyles=null;if(this._super){this._super(AS);}this.bandings=[];this.chartInstancePool=[];this.yZeroAxisPos=[];this.xZeroAxisPos=[];this.y2ZeroAxisPos=[];this.x2ZeroAxisPos=[];this.disabledUnits=[];this.yMajorGridLinePos=[];this.yMinorGridLinePos=[];this.xMajorGridLinePos=[];this.xMinorGridLinePos=[];this.xAxisTrims=[];this.x2AxisTrims=[];this.yAxisTrims=[];this.y2AxisTrims=[];this.caAxisTrims=[[],[]];this.axisFormats={x1:[],x2:[],y1:[],y2:[]};this.dz=AS.firstRes.dz;this.gts=AS.firstRes.gts;this.highLightShapeIndex={};this.resetHighLightIndex=true;this.metricsOnDropZone={};this.hasTotal=undefined;this.heightCache=[];this.widthCache=[];},postInit:function(){var AS=this.firstRes,CM=this.xtabModel;this.consumeJSON(AS);this.getAxisScaleMode();this.setupDualAxis();this.composeCustomString();this.configureTrendLineBubbleForecast(AS);if(!AS.eg){this.initMaxMinSizeProps();this.initChartingDetails();}if(AS){this.disabledUnits=c(AS,CM);}},getMetricInGSIMx:function(AS){var CM=this.firstRes.gsi.mx;return CM[AS];},valueTypeDataLabelEnabled:function(){var CM=this.view;if(CM.noData){return false;}var AS=this.getShowDataLabelOptions();return AS.length>0;},isGradientABL:function(){var CM=this.colorByInfo,CP=this.getChartInfo(),AS,CO=false,CN=[];if(CP.isABL===false){return false;}if(CM.tp===BI.ATT){AS=AI.call(this,"YAxis","id");AS=AS.concat(AI.call(this,"XAxis","id"));CN=AI.call(this,"ColorBy","id");By.forEach(CN,function(CQ){if(AS.indexOf(CQ)>=0){CO=true;return false;}});return CO;}else{if(CM.tp===BI.NULL||CM.tp===BI.METRICS_ITEM){return false;}}return true;},textTypeDataLabelEnabled:function(){var AS=this.getChartInfo();if(AS.isPie){return this.getUnitsCountInSliceBy()>0;}return this.getBreakByAttributes().length>0;},checkAttributeIntersection:function(AS,CM){var CS=this.dz,CQ,CP,CR,CO=Ap.clone(AS||{}),CU=[],CN=this.view.model,CT=!!CN.docModel.als;if(this.view.interactor.fmtMode||this.view.interactor.fmtFake){return["mockid"];}By.forEach(CM||[],function(CV){CQ=CS[CV];CP=CQ.TemplateUnit;By.forEach(CP||[],function(CW){CR=[CW.id];if(CT){CR=CR.concat(CN.getLinkedAttributes(CW.id)||[]);}By.forEach(CR,function(CX){if(CO.hasOwnProperty(CX)){CU.push(CX);delete CO[CX];return false;}});});});return CU;},isSeasonalityEnabled:function(){var CR=this,CO=this.getChartInfo(),CQ=false,CT=this.xtabModel,CP,CS;if(CO.isABL){var AS=AI.call(this,"YAxis","id");AS=AS.concat(AI.call(this,"XAxis","id"));AS.forEach(function(CV){CP=N(CT,CV);CS=CR.getAttributeById(CV);if(CP&&CS){var CU=CP.fs,CW=CS.fs;By.forEach(CU,function(CX){if((CX.bftp===1||CX.bftp===8)&&By.find(CW,"id",CX.fid)!==-1){CQ=true;}});}});if(CQ){var CN=false,CM=this.trConfigPool;Ap.forEach(CM,function(CU){var CV=CU[AX.TREND_TYPE];if(CV){CN=CN||(CV!==AT.LOG&&CV!==AT.POW);}});if(!CN){CQ=false;}}}return CQ;},getGlobalExtremeForAxisOrMetric:function(CN,CM,AS){return B7.call(this,CN,CM,AS);},getAttributeById:function(CR){var CN,AS=this.gts,CP=AS.row,CM=AS.col,CO=CP.length,CQ=CM.length;for(CN=0;CN<CO;CN++){if(CP[CN].id===CR){return CP[CN];}}for(CN=0;CN<CQ;CN++){if(CM[CN].id===CR){return CM[CN];}}return null;},initMaxMinSizeProps:function(){var CR=this.view,CN=CR.getWidgetPropertyValue(AX.MAX_SIZE_TYPE),CS=CR.getWidgetPropertyValue(AX.MAX_SIZE_VALUE),CP=CR.getWidgetPropertyValue(AX.MIN_SIZE_TYPE),CO=CR.getWidgetPropertyValue(AX.MIN_SIZE_VALUE),CM=function(CT){if(CT===Al.MANUAL){return 2;}return 0;},AS=function(CT){if(CT===Br.MANUAL){return 2;}if(CT===Br.PROPORTIONAL){return 1;}return 0;};this.sizeInfo=this.sizeInfo||{};var CQ=this.sizeInfo;CQ.Max={Mode:CM(CN),Size:CS};CQ.Min={Mode:AS(CP),Size:CO};CQ.ProportionalMinMax=CP===Br.MANUAL;},initChartingDetails:function(){var CM=this.model,AS=this.mapFromChartToLDSIndex(0,0),CN=CM.getLocalDataSet(AS.r,AS.c),CO=CN.generateDataProvider(),CP=CO[AS.dpIdx];this.chartingDetails={nSeries:CP.innerGetSeriesCount()};},getAxisModeForAxis:function(CM,CQ,CP,CO){var AS=this.getMetricsOnAxisOfChart(CM,CQ,CP,CO);if(AS&&AS[0]!==undefined){var CN;if(CP==="x"||CP==="y"){CN=CP.toUpperCase()+(CO?"":"2")+"Axis";}else{CN="SizeBy";}return A6.call(this,AS[0],CN);}return undefined;},isPerCellScaleOn:function(CM,CQ,AS){var CP,CO,CN;if(AS==="y"||AS==="y1"){CP="y";CN=true;}else{if(AS==="y2"){CP="y";CN=false;}else{if(AS==="x"||AS==="x1"){CP="x";CN=true;}else{CP="x";CN=false;}}}CO=this.getAxisModeForAxis(CM,CQ,CP,CN);return CO===Bn.PERCELL;},composeCustomString:function(){var Cb=this,Ca=this.property,CV=Ca.readItem(AX.AXIS_SCALE),CM=Ca.readItem(AX.AXIS_SCALE_DATA),CO=[],Ce=[],AS=this.getNumericAxisOptions(true,undefined,undefined,CO,Ce),CP={},Cd={},CZ,CU,CT=Cb.getChartInfo(),CW,CN,Cc,CQ,CS,CY,CX,CR=[];AS.forEach(function(Cf){CW=Cf.key;if(CW!=="AllMetrics"){if(Cf.sizeBy||Cf.key==="SizeBy"){CR.push(CW);}CZ=Cb.getGlobalExtremeForAxisOrMetric(CW,Cf.sizeBy,true);if(CT.isABL){CZ=d.call(Cb,CZ,AU.call(Cb,CW));}if(CZ.scaleType===undefined||isNaN(CZ.scaleType)){CZ.scaleType=Bn.GLOBAL;}CN={axKey:CW,rMin:CZ.min,rMax:CZ.max,minMax:CV,logScale:false,isCust:false,scaleType:CZ.scaleType};CU=new A1(CN);CP[CW]=CU;}});if(CM){Cd=A1.createAxisScaleCollectionFromArrays(CM,Cd);CX=A1.serializeCollection2String(Cd);for(Cc in CP){if(CP.hasOwnProperty(Cc)){CQ=CP[Cc];CS=Cd[Cc];if(CS){if(CV===Bn.CUSTOM){CQ.absorbInfo(CS);}else{CQ.logScale=CS.logScale===true;}if(CR.indexOf(Cc)>=0){CQ.logScale=false;}}}}}this.sizeByMetricsSharedInAxis=CO;this.collisionSizeByMetric=Ce;CY=A1.serializeCollection2String(CP);if(CX!==CY){Ca.updateItem(AX.AXIS_SCALE_DATA,CY);}},getBreakByAttributes:function(){return AI.call(this,"BreakBy");},getSliceByAttributes:function(){return AI.call(this,"SliceBy");},isMetricNamesInZone:function(AS){return BJ.call(this,AS);},isAttrInZone:function(CO,CN){var CM=[],AS=AI.call(this,CN);AS.forEach(function(CP){if(CP.id){CM.push(CP.id);}});return CM.indexOf(CO)!==-1;},getSelectedObjectsInfo:function(AS,CO){var CN=[],CM;By.forEach(AS,function(CP){CM=CP.identity;CN.push(CM.getSelectedObjectInfo(CO));});return CN;},isEmptyBreakby:function(){var CM=this.getHostStructure(),AS=CM.BreakBy.length;return AS;},isEmptyVis:function(){var CR=this.getHostStructure(),CQ=this.isPie,CN=CR.Rows.length,CP=CR.Columns.length,CM=CR.XAxis.length,CS=CR.YAxis.length,CO=CR.SliceBy.length,AS=CR.AngleBy.length;if(CQ&&this.getChartType()===B2.GRID){return this.isBlankGrid;}if(CN>0||CP>0||CM>0||CS>0){return false;}if(CQ){if(CO>0||AS>0){return false;}}return true;},getHostStructure:function(){var CQ,CS,CX,CN,CY=this.dz||this.firstRes.dz,CM=["Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","AngleBy"],CV=CM.length,CT={},AS=this.gts,CU=this,CP=CU.xtabModel.data,CW=CP.gsi||{},CO=(CW.rows||[]).concat(CW.cols||[]),CZ={},CR=function(Cc){if(Cc.srcUnit){Cc=Cc.srcUnit;if(CS.filter(function(Ce){return Cc.id===Ce.id;}).length>0){return ;}}var Cb=Ap.copy(Cc,{zone:CQ+1});var Ca;if(Cc.t!==4){if(Cc.axis!==undefined&&Cc.uidx!==undefined){Ca=AS[Cc.axis][Cc.uidx];}}var Cd=N(CU.xtabModel,Cc.id);if(Cd&&Cd.fs){Cb.fs=Cd.fs;}if(CZ[Cc.id]){Cb.st=CZ[Cc.id];}if(Ca){Cb.at=Ca.at;}CS.push(Cb);};CO.forEach(function(Ca){if(Ca.hasOwnProperty("st")&&Ca.hasOwnProperty("did")){CZ[Ca.did]=Ca.st;}});for(CQ=0;CQ<CV;CQ++){CX=CM[CQ];CN=CY[CX]||CY.Angle;CS=CT[CX]=[];if(CN.TemplateUnit){By.forEach(CN.TemplateUnit,CR);}if(CN.TemplateMetric){By.forEach(CN.TemplateMetric,CR);}if(CN.MetricNames!==undefined){CS.push({n:"Metric Names",id:Bt,t:AN,zone:CQ+1});}}return CT;},updatePalette:function(AS){if(AS===AZ.DARK){this.palette=p;}else{this.palette=Bo;}},initYAxisMargins:function(){var AS,CN=this.getChartCountInCol(),CM=this.yAxisMargins=[];for(AS=0;AS<CN;AS++){CM.push(-1);}},initXAxisMargins:function(){var CM,AS=this.getChartCountInRow(),CN=this.xAxisMargins=[];for(CM=0;CM<AS;CM++){CN.push(-1);}},formatChartInstancePool:function(){var CM,CN,AS=this.chartInstancePool;CN=this.getChartCountInCol();for(CM=0;CM<CN;CM++){AS[CM]=[];}},configureTrendLine:function(CP){var CX=CP.gsi.mx,AS=this.getChartInfo(),CS=this,CT,CR,CW,CV={},CO=false,CU={},CY,CQ;if(AS.tp===B2.GRID){return ;}if(AS.isABL){CV={globalProp:{trdFwdFst:0,trdBwdFst:0,trdFstEnabled:false,trdSeason:CP.dz.sea!==undefined?parseInt(CP.dz.sea,10):0}};}else{CV={};if(AS.tp===B2.BUBBLE||AS.tp===B2.SCATTER){CO=true;}}CY=CV.globalProp;By.forEach(CX,function(Ca){CW=Ca.did;CV[CW]={min:Ca.min,max:Ca.max};if(Ca.foreBwd!==undefined||Ca.foreFwd!==undefined){CV[CW].trdBwdFst=Ca.foreBwd;CV[CW].trdFwdFst=Ca.foreFwd;if(!CO){CY.trdFstEnabled=CY.trdFstEnabled||Ca.fstEnabled!==false;}}CT=Ca.mdls;if(CT){if(AS.isABL){CY.trdFwdFst=CY.trdFwdFst<Ca.foreFwd?Ca.foreFwd:CY.trdFwdFst;CY.trdBwdFst=CY.trdBwdFst<Ca.foreBwd?Ca.foreBwd:CY.trdBwdFst;}CR=CT.mod_c;CQ=1;By.forEach(CR,function(Cb){if(Cb.tp>=AW.MAX&&Cb.tp<=AW.CONST){G.call(CS,CU,Cb,CW,CQ);}else{A8.call(CS,CV,Cb,CW,CQ);}CQ++;});}});if(AS.isABL&&this.isStacked&&!this.splitPlottingMetrics){var CZ=AS.dirc===B6.VERTICAL?"Y":"X",CN=CZ+"Axis",CM=CP.dz[CN];CT=CM.mdls;if(CT){CR=CT.mod_c;CQ=1;By.forEach(CR,function(Cb){if(Cb.tp>=AW.MAX&&Cb.tp<=AW.CONST){var Ca=Cb.dua===0?CN:CZ+"2Axis";G.call(CS,CU,Cb,Ca,CQ);}else{B4.visPrint("No way entering this branch");A8.call(CS,CV,Cb,CW,CQ);}CQ++;});}}this.trConfigPool=CV;this[AX.REF_LINE_DEF]=CU;},hasRefLineInOppositeAxis:function(CR){var CS=this.dz||this.firstRes.dz,AS=this.getChartInfo(),CM=false;if(AS.isABL&&this.isStacked&&!this.splitPlottingMetrics){var CT=AS.dirc===B6.HORIZONTAL?"Y":"X",CN=CT+"Axis",CO=CS[CN],CQ,CP;CQ=CO.mdls;if(CQ){CP=CQ.mod_c;By.forEach(CP,function(CU){if(CU.tp>=AW.MAX&&CU.tp<=AW.CONST){if(CU.dua===CR){CM=true;return false;}}});}}return CM;},getBubbleForcastExtremeForPieWithTotal:function(CO){var CT,CQ,CN,AS,CM,CW=this.model.getMetricCount(),CR=this.getMetricIndexFromID(CO.did),CY=this.totalRows||[],CZ=CY.length,CS=this.firstRes.gvs.items,CV,CX,CP,CU;AS=CS.length;for(CT=0;CT<CZ;CT++){CM=CY[CT];if(CM<AS){CV=CS[CM].items||[];CQ=CR;CN=CV.length;while(CQ<CN){CX=CV[CQ];if(CX!==undefined){CX=parseFloat(CX.rv);if(!isNaN(CX)){if(CP===undefined||CP>CX){CP=CX;}if(CU===undefined||CU<CX){CU=CX;}}}CQ+=CW;}}}if(CP!==undefined){return{min:CP,max:CU};}return{min:CO.min,max:CO.max};},configureTrendLineBubbleForecast:function(CO){var CU=CO.gsi.mx,AS=this.getChartInfo(),CS=this,CT,CR,CP,CQ={},CN=false,CM=false;if(AS.tp===B2.GRID){return ;}if(AS.tp===B2.BUBBLE||AS.tp===B2.SCATTER){CN=true;}if(this.isPie&&this.hasTotalForPie()){CM=true;}By.forEach(CU,function(CV){CT=CV.did;if(CN){if(CM){CP=CS.getBubbleForcastExtremeForPieWithTotal(CV);}else{CP={min:CV.min,max:CV.max};}CR={min:CP.min,max:CP.max};CQ[CT]=CR;CR[AX.TREND_BUBBLE_FORE_FWD]=CR[AX.TREND_BUBBLE_MAX]=CP.max;CR[AX.TREND_BUBBLE_FORE_BWD]=CR[AX.TREND_BUBBLE_MIN]=CP.min;if(CV.foreBwd!==undefined||CV.foreFwd!==undefined){CR[AX.TREND_BUBBLE_FORE_FWD]=CV.foreFwd;CR[AX.TREND_BUBBLE_FORE_BWD]=CV.foreBwd;CR[AX.TREND_BUBBLE_FORE_ENABLED]=CV.fstEnabled!==false;}}});this[AX.TREND_BUBBLE_FORE_DEF]=CQ;},getTrendLineJSON:function(AS){return AS.trendref;},getTrendLineObjectsForMetricAtScale:function(CQ,CV,CO,CN,CU,CP){var CS=this.trendLineJSON,AS=CS[CP],CT,CW,CR,CM=[];if(AS){By.forEach(AS,function(CX){CW=undefined;CT=CX["x-vars"];if(CX.mid===CQ&&(CN===undefined||(CT&&CT[0]===CN))){CW=Ap.copy(CX,{});if(CP==="g"){CW.inChartModel=CW.models;}else{if(CP==="all"){CW.inChartModel=CW.models[CV][CO];}else{if(CP==="r"){CW.inChartModel=CW.models[CV];}else{CW.inChartModel=CW.models[CO];}}}delete CW.models;}if(CW){CR=isNaN(CW.inChartModel[0].model);if((CR===true&&CU===true)||(!CR&&!CU)){CM.push(CW);}}});}return CM;},getTrendLinesObjectForMetric:function(CO,AS,CQ,CN,CR){var CP=this,CS=["g","all","r","c"],CM=[];CS.forEach(function(CT){CM=CM.concat(CP.getTrendLineObjectsForMetricAtScale(CO,AS,CQ,CN,CR,CT));});return CM;},isLogScale:function(CN,CS,CX){var CW=this,CO=CW.view,CV,CM=CW.getChartInfo(),Ca;if(CM.isABL&&CM.sbtp===BW.EnumSubtype.PERCENT){return false;}if(CW.logScaleCache===undefined){CW.logScaleCache=[{},{}];}var CQ,CT=CN[0]==="y"||CN[0]==="Y",CR=CN==="y"||CN==="Y"||CN==="y1"||CN==="Y1"||CN==="x"||CN==="X"||CN==="x1"||CN==="X1";Ca=CW.logScaleCache[CT?1:0];if(CT){CQ=Ca[CS]=Ca[CS]||{};}else{CQ=Ca[CX]=Ca[CX]||{};}if(CR){if(CQ.Primary!==undefined){return CQ.Primary;}}else{if(CQ.Secondary!==undefined){return CQ.Secondary;}}var CY;if(CT){if(CR){CY="YAxis";}else{CY="Y2Axis";}}else{if(CR){CY="XAxis";}else{CY="X2Axis";}}var AS=Aq.call(this,CS,CX,CY);if(AS&&AS.length>0){CV=Z.call(CW,AS,CN,false);}if(!CV||CV.length===0){return undefined;}var CU,CZ,CP;CU=CO.getWidgetPropertyValue(AX.AXIS_SCALE_DATA);CP=A1.createAxisScaleCollectionFromArrays(CU);CZ=CP[CV.key];if(CZ){if(CR){CQ.Primary=CZ.logScale;}else{CQ.Secondary=CZ.logScale;}return CZ.logScale;}return false;},checkDataLabelType:function(){var AS=this.property.readItem(AX.DATA_LABEL);if(AS===undefined||((AS===2)&&!this.valueTypeDataLabelEnabled())||(AS===3&&!this.textTypeDataLabelEnabled())){this.property.updateItem(AX.DATA_LABEL,1);}this.checkMetricLevelDataLabel();},checkMetricLevelDataLabel:function(){var CM=this.property.readItem(AX.DATA_LABEL),CO=this.getShowDataLabelOptions(),AS,CN;if(CM===2&&CO.length===1){AS=this.property.readItem(AX.METRIC_LEVEL_DATA_LABEL);if(AS){CN=CO[0].key;if(AS[CN]===false){AS[CN]=true;this.property.updateItem(AX.METRIC_LEVEL_DATA_LABEL,AS);}}}},consumeJSON:function(CZ){var CV,CT,CR,Cn,Cb,Cf,Ce,Cc,Cl=this,Ci=CZ;j.call(this);var Cm=this.view.model.data.dz.visProp.fmt.th;if(Cm!==undefined&&Cm!==null){if(typeof Cm==="number"){this.view.theme=Cm;}else{if(typeof Cm==="string"){this.view.theme=parseInt(Cm,10);}}}var CX=CZ.dz,CM=CX.visProp.fmt;Cl.trendLineJSON=this.getTrendLineJSON(CZ);Cl.ttlDispTp=CZ.lnm;Cl.fmt=CM;Cl.extrs=CZ.extrs;var AS=CZ.gts;Cl.th=[];By.forEach(AS.row,function(Co){CG(Co);var Cp=N(Cl.xtabModel,Co.id);if(Cp&&Cp.t){Co.t=Cp.t;}if(Co.cs===undefined){Co.cs=1;}});By.forEach(AS.col,function(Co){CG(Co);var Cp=N(Cl.xtabModel,Co.id);if(Cp&&Cp.t){Co.t=Cp.t;}if(Co.rs===undefined){if(Co.opt!==-1){Co.rs=1;}}});B3(CX,CZ);BO(CZ);Bp.call(this,CZ);CR=Ci.dm.rct;Cn=Ci.dm.cct;CV=Ci.ptt.row;CT=Ci.ptt.col;BH.call(this,CZ);Cc=Au.call(this,CX,CZ);if(Cc.tp===BI.METRICS){var CW=Cc.metrics[0].id;Cl.thresholds=CZ.gsi.thresholds[CW];}Cl.colorByInfo=Cc;Cl.metricsType=AK.call(this,CX);CL.call(this,CZ,this.ceChartType);Cl.configureTrendLine(CZ);if(Ci.gvs.items){Cb=AM(0,0,Cn,CR,Ci.gvs);}this.model=this.addDisposable(new BW.GMDataModel({ttlDispTp:this.ttlDispTp,eg:Ci.eg,rp:CV,cp:CT,rct:CR,cct:Cn,gts:Ci.gts,fullNf:Ci.nf,mx:Ci.gsi.mx,dz:CX,trConfigPool:this.trConfigPool,clusteredBarSpecialCase:this.clusteredBarSpecialCase,onlyMetricNamesOnAxisForGridPie:this.onlyMetricNamesOnAxisForGridPie,isMetricNamesOnXAxis:this.isMetricNamesOnXAxis,colorType:Cc.tp,gmCtr:this,metricsType:this.metricsType,splitPlottingMetrics:this.getSplitPlottingMetrics(),getMetricsOnXAxis:this.getControllerAPI(L.GET_METRICS_ON_X),getMetricsOnYAxis:this.getControllerAPI(L.GET_METRICS_ON_Y),getSizeByMetrics:this.getControllerAPI(L.GET_METRICS_ON_SIZE_BY),property:this.property,isBlankGrid:this.isBlankGrid}));Cf=this.model;var CY=this.getChartInfo();if(CY.isABL&&this.getSplitPlottingMetrics()){Ce=this.getSecondaryMetrics();if(Ce.length>0){this.shallWeUseGroupInfo=true;}}Cf.shallWeUseGroupInfo=this.shallWeUseGroupInfo;Cl.shouldDrawShapeFlag=AC(CX,CY);if(!this.shallWeUseGroupInfo){this.removeGroupInfo();}else{this.updateGroupInfo();}if(Ci.gvs.items){Cf.feedLdss(0,0,Cn,CR,Cb);}if(Ci.ghs.chs.items){Cf.feedChs(Ci.ghs.chs);}if(Ci.ghs.rhs.items){Cf.feedRhs(Ci.ghs.rhs);}if(Cf.cetSelectors){this.view.cetSelectors=Cf.cetSelectors;delete Cf.cetSelectors;}Cf.extractInfoLowestHeaderInfoToAttrObj();Cf.constructColorByInfo();this.inChartLayout=this.getSubChartsLayout();if(this.isPie){this.preprocessForPie(CZ);}var CQ=this.getRowTitleInfo(true),CU=this.getColTitleInfo(true),Cd=this.attributeSelectionInfo;if(CQ&&CQ.items){By.forEach(CQ.items,function(Co){Cd[Co.id]=Co;});}if(CU&&CU.items){By.forEach(CU.items,function(Co){Cd[Co.id]=Co;});}var Ch=this.getYAxisInfo(),CN=this.getXAxisInfo();this.xIsNumeric=CN.isMetric;this.yIsNumeric=Ch.isMetric;this.axisLayout=this.getAxisLayout4CE();this.enablePartialRendering=this.view.getWidgetPropertyValue(AX.PARTIAL_RENDER)==="true";if(CY.isBubbleOrScatter&&(this.metricsType!==AH.MetricsByRow&&this.metricsType!==AH.MetricsByColumn)){var CP=this.getMetricsOnXAxis(),CO=this.getMetricsOnYAxis(),Cj=this.getSizeByMetrics(),Cg=Math.min(CP.length,CO.length);if(Cj.length>0){Cg=Math.min(Cg,Cj.length);}this.bubbleSeriesNum=Cg;}if(CY.isABL){var Ca=AI.call(this,"YAxis","n"),Ck=AI.call(this,"XAxis","n"),CS=AI.call(this,"BreakBy","n");if(Ca.length+Ck.length===0&&CS.length>0){this.specialSortable=true;}}},getAxisOriginLineIdentity:function(AS){var CN=AS+"axOrLnId";if(this[CN]){return this[CN];}var CM,CO=["x1","x2"],CP=CO.indexOf(AS)!==-1?b.X_AXIS_ORIGIN_LINE:b.Y_AXIS_ORIGIN_LINE;CM=new mstrmojo.gm.GeneralIdentity({objType:CP});this[CN]=CM;return CM;},getAxisOriginLabelIdentity:function(AS){var CN=AS+"axOrLbId";if(this[CN]){return this[CN];}var CM,CO=["x1","x2"],CP=CO.indexOf(AS)!==-1?b.X_AXIS_ORIGIN_LABEL:b.Y_AXIS_ORIGIN_LABEL;CM=new mstrmojo.gm.GeneralIdentity({objType:CP});this[CN]=CM;return CM;},getAllAxisProperties:function(){var AS=this.view;return AS.getAllAxisProperties();},printExtremes:function(){var CO=this,CN,CM,CR,CQ,AS,CP;CQ=CO.getChartCountInCol();AS=CO.getChartCountInRow();for(CN=0;CN<CQ;CN++){for(CM=0;CM<AS;CM++){CR=U.call(this,CN,CM);CP=Ba.call(CO,CN,CM);B4.visPrint("("+CN+", "+CM+")"+JSON.stringify(CP));}}},getGraphShapeCount:function(CQ){var CS=this,CP,CO,CM,CR=0,AS=0,CN=0,CT,CU;CQ=CQ||false;CT=CS.getChartCountInCol();CU=CS.getChartCountInRow();for(CP=0;CP<CT;CP++){for(CO=0;CO<CU;CO++){CM=U.call(this,CP,CO);AS=CM.innerGetSeriesCount();CN=CM.innerGetGroupCount();if(CQ&&AS>0&&CN>0){return CT*CU*AS*CN;}CR+=AS*CN;}}return CR;},getColorByMetricExtremes:function(){return BP.call(this);},getCategoricalAxisLabelsInfo:function(CM,CU,CO,CX){CX=CX||{purpose:"content"};var CW=false,CV=0,Cc=0,CZ,Cd,AS,Ca,CY=[],Ce,CR=B2,CT=this.getChartInfo();if(CT.isABL&&CT.dirc===B6.VERTICAL&&CO==="y"){CW=true;}else{if(CT.isABL&&CT.dirc===B6.HORIZONTAL&&CO==="x"){CW=true;}else{CZ=U.call(this,CM,CU);Cd=CZ.innerGetSeriesCount();AS=CZ.innerGetGroupCount();Ca=CZ.getGroupCount();CW=(Cd===0||AS===0);}}if(CW){switch(CX.purpose){case"count":return 0;default:return CY;}}if(CT.tp===CR.GRID){switch(CX.purpose){case"count":return CO==="x"?AS:Cd;default:if(CO==="x"){for(Cc=0;Cc<AS;Cc++){Ce=CZ.getGraphCell(CV,Cc);CY.push(Ce.getGroupLabel(0).join(" "));}}else{for(CV=0;CV<Cd;CV++){Ce=CZ.getGraphCell(CV,Cc);CY.push(Ce.getSeriesLabel(0).join(" "));}}return CY;}}switch(CX.purpose){case"count":var Cf=0;if(Ca===AS){for(Cc=0;Cc<AS;Cc++){Ce=CZ.innerGetGraphCell(CV,Cc);if(!Ce.isFaked){Cf++;}}}else{Cf=Ca;}return Cf;default:if(Ca===AS){for(Cc=0;Cc<AS;Cc++){Ce=CZ.innerGetGraphCell(CV,Cc);if(!Ce.isFaked){CY.push(Ce.getGroupLabel(0).join(" "));}}}else{var CQ=CZ.bwdLbs||[],CS=CQ.length,Cb=CZ.fwdLbs||[],CP,CN;for(Cc=0;Cc<Ca;Cc++){if(Cc<CS){CP=(CQ[Cc]).join(" ");}else{if(Cc>=CS+AS){CN=Cb[Cc-(CS+AS)];if(CN){CP=CN.join(" ");}else{CP="";}}else{Ce=CZ.innerGetGraphCell(CV,Cc-CS);CP=Ce.getGroupLabel(0).join(" ");}}CY.push(CP);}}return CY;}},getColorByLegendInfo:function(){var AS=this.model;return AS.getColorByLegendInfo();},getSizeByLegendInfo:function(){return this.getAdaptedSizeByDataProvider();},constructSizebyDataProvider:function(){return An.call(this);},getSizeByExtremeForNegativeProportionalMode:function(CT){var CS,CQ,CN,AS,CV,CX,CO,CP,CY,CU,CM,CW=this.model.getMetricCount(),CR=this.firstRes.gvs.items;AS=CR.length;for(CS=0;CS<AS;CS++){CV=CR[CS].items||[];CQ=CT;CN=CV.length;while(CQ<CN){CO=CV[CQ];if(CO!==undefined){CO=parseFloat(CO.rv);if(!isNaN(CO)){CX=Math.abs(CO);if(CP===undefined||CP>CX){CP=CX;CY=CO;}if(CU===undefined||CU<CX){CU=CX;CM=CO;}}}CQ+=CW;}}return{min:CY,max:CM};},getAdaptedSizeByDataProvider:function(){var AS=this.constructSizebyDataProvider(),CQ,CO={},CP=mstrmojo.desc(13966,"Size by:"),CN,CM=[];if(!AS.sizeByTitles||AS.sizeByTitles.length<=0){return null;}CO.custMetrics=AS.sizeByScaleType;CN=AS.sizeByTitles.length;By.forEach(AS.sizeByTitles,function(CR){CM.push(CR);});if(CN>1){CO.items=CM;}if(AS.sizeByMode===true&&AS.sizeByDataProvider.length>1){CO.item=CN>1?CP:AS.sizeByTitles[0];CQ=CO.elements=[];By.forEach(AS.sizeByDataProvider,function(CR){CQ.push({sign:"<",v:CR.value});});if(CQ.length===5){CQ[0].sign="=";CQ[4].sign="=";}CO.caseFlag=0;return CO;}if(AS.sizeByMode===true&&AS.sizeByDataProvider.length===1){CO.caseFlag=2;CO.item=CN>1?CP:AS.sizeByTitles[0];CO.elements=[{diameter:12,shape:"rect",sign:"=",v:AS.sizeByDataProvider[0].value}];return CO;}CO.item=CP;CO.items=CM;CO.elements=[];CO.caseFlag=1;return CO;},getXAxisLabels:function(CM){var AS=0;return this.getCategoricalAxisLabelsInfo(AS,CM,"x");},getYAxisLabels:function(AS){var CM=0;return this.getCategoricalAxisLabelsInfo(AS,CM,"y");},countXAxisLabels:function(CM){var AS=0;return this.getCategoricalAxisLabelsInfo(AS,CM,"x",{purpose:"count"});},countYAxisLabels:function(AS){var CM=0;return this.getCategoricalAxisLabelsInfo(AS,CM,"y",{purpose:"count"});},estimateXAxisSize:function(CR,CN,CP){var CO,CV,AS=CR.length,CS=0,CT=0,CQ=20,CM=20,CU=this.view.HTML5PROPS.AXIS_LABEL_X;for(CO=0;CO<AS;CO++){CV=B4.measureTextSize(CR[CO],CU,0);CS=Math.max(CS,CV.width);CT=Math.max(CT,CV.height);}if(CN===Ag.STAGGER){CQ=(CS+H)*((AS+1)>>1)+H;CM=CT*2+H*3;}else{if(CN===Ag.ROTATE){CQ=CT*AS+H*(AS+1);CM=CS+H*2;}else{CQ=CS*AS+H*(AS+1);CM=CT+H*2;}}if(CP&&!CN&&CQ>CP){CQ=CP;}if(CQ<AS*5){CQ=AS*5;}return{width:CQ,height:CM};},estimateYAxisSize:function(CO){var CN,CW,CP,CM,AS=CO.length,CT=0,CU=0,CV=this.view.HTML5PROPS.AXIS_LABEL_Y,CQ="H",CS,CR=true;for(CN=0;CN<AS;CN++){CW=B4.measureTextSize(CO[CN],CV,0);CT=Math.max(CT,CW.width);if(CR){if(CS===undefined){CS=B4.measureTextSize(CQ,CV,1).height;CS=Math.round(CS*0.85);}CU=CS;}else{CU=Math.max(CU,CW.height);}}CP=CT+H*2;CM=CU*AS+H*(2*AS);return{width:CP,height:CM};},initLayouter:function(CW){var CS,CR,Cc=this,Cd=this.view.getWidgetPropertyValue(AX.FIT_TO),CU=this.getChartCountInCol(),CV=this.getChartCountInRow(),CM=this.getXAxisInfo(),Ca=this.getYAxisInfo(),CY=function(){var Cg,Ch,Cj,Cf=0,Ci=0,Ce=Math.min(10,CV);for(Cg=0;Cg<Ce;Cg++){Cj=Cc.getXAxisLabels(Cg);Ch=Cc.estimateXAxisSize(Cj,Ag.NORMAL).width;Ci=Math.max(Ci,Ch);Cf+=Cj.length;if(Cf>100){break;}}return Ci;},CO=function(){var Cg,Ch,Cj,Cf=0,Ci=0,Ce=Math.min(10,CV);for(Cg=0;Cg<Ce;Cg++){Cj=Cc.getXAxisLabels(Cg);Ch=Cc.estimateXAxisSize(Cj,Ag.STAGGER).width;Ci=Math.max(Ci,Ch);Cf+=Cj.length;if(Cf>100){break;}}return Ci;},Cb=function(Ci){var Ch,Cm,Ce,Cf,Ck,Cj=0,Cg=Ci.length,Cl=Cc.view.HTML5PROPS.AXIS_LABEL_Y;for(Ch=0;Ch<Cg;Ch++){Cm=Ci[Ch];Ce=B4.measureTextWidth(Cm,Cl,0);if(Cm.length>10){Cf=Cm.substr(0,10)+"...";Ck=B4.measureTextWidth(Cf,Cl,0);Ce=Math.min(Ce,Ck);}Cj=Math.max(Cj,Ce);}return Cj;},CN=function(){var Cf,Cg,Ce=0;for(Cf=0;Cf<CV;Cf++){Cg=Cc.countXAxisLabels(Cf);Ce+=Cg;}return Ce;},CQ=function(){var Ce,Cg,Cf=[];for(Ce=0;Ce<CV;Ce++){Cg=Cc.getXAxisLabels(Ce);Cf=Cf.concat(Cg);}return Cf;},CZ=function(){var Ce,Cg,Cf=[];for(Ce=0;Ce<CV;Ce++){Cg=Cc.countXAxisLabels(Ce);Cf.push(Cg);}return Cf;},CT=function(){var Ce,Cg,Cf=[];for(Ce=0;Ce<CU;Ce++){Cg=Cc.countYAxisLabels(Ce);Cf.push(Cg);}return Cf;},CX=function(){var Ch,Ce,Ci,Cg=1,Cf=Cc.getChartInfo(),Cn=Cf.shape,Cm=Cc.chartSubType,Ck=Cc.chartType,Cl=r,Cj=[];if(Cn===Aj.BAR&&Cm===BM.CLUSTERED&&Ck!==B2.GRID){Cg=Cc.chartingDetails.nSeries;}if(Cn===Aj.PIE||Cn===Aj.RING){Cl=Math.max(24,Cl);}else{if((Cn===Aj.LINE||Cn===Aj.AREA)&&!Cf.isCombo){Cl=S;}}for(Ch=0;Ch<CV;Ch++){Ci=Cc.countXAxisLabels(Ch);Ce=(Cg*Cl)*(Ci+0.5);Cj.push(Math.floor(Ce+0.5));}return Cj;},AS=function(){var Ch,Cm,Ci,Cg=1,Cf=Cc.getChartInfo(),Cn=Cf.shape,Cl=Cc.chartSubType,Ck=Cc.chartType,Ce=r,Cj=[];if(Cn===BW.EnumShape.BAR&&Cl===BM.CLUSTERED&&Ck!==B2.GRID){Cg=Cc.chartingDetails.nSeries;}if(Cn===BW.EnumShape.PIE||Cn===BW.EnumShape.RING){Ce=Math.max(24,Ce);}else{if((Cn===Aj.LINE||Cn===Aj.AREA)&&!Cf.isCombo){Ce=S;}}for(Ch=0;Ch<CU;Ch++){Ci=Cc.countYAxisLabels(Ch);Cm=(Cg*Ce)*(Ci+0.5);Cj.push(Math.floor(Cm+0.5));}return Cj;},CP=function(Ch){var Ce,Ci,Cf,Cg=[];if(!Ch||Ch.length===0){for(Ce=0;Ce<CU;Ce++){Cg.push(Ce%2);}return Cg;}Ci=Ch.length;Cg=[0];Cf=Ch[0];for(Ce=1;Ce<Ci;Ce++){Cg.push(Cf%2);Cf+=Ch[1];}return Cg;};CW.fitTo=Cd;CW.chartType=this.chartType;CW.nRows=CU;CW.nCols=CV;CW.xInfo=CM;CW.yInfo=Ca;CW.xAxisType=CM.isMetric?Bm.METRIC:Bm.ATTRIBUTE;CW.yAxisType=Ca.isMetric?Bm.METRIC:Bm.ATTRIBUTE;CW.widthCache=this.widthCache;CW.heightCache=this.heightCache;CW.minWidths=CM.isMetric?null:CX();CW.minHeights=Ca.isMetric?null:AS();CS=CM.isMetric?undefined:CZ();CR=Ca.isMetric?undefined:CT();if(Cd===AP.CONTENT){CW.maxXAxisWidth=CM.isMetric?undefined:CY();CW.maxXAxisWidthStagger=CM.isMetric?undefined:CO();delete CW.widthRatio;delete CW.heightRatio;}else{CW.nLabels=CN();CW.minXLabelWidth=CM.isMetric?undefined:Cb(CQ());CW.widthRatio=CS;CW.heightRatio=CR;}this.widthRatio=CS;this.heightRatio=CR;this.bandingFlags=CP(CR);CW.API.owner=this;CW.API.getXAxisHeight=this.getXAxisHeight;CW.API.getXAxis2Height=this.getXAxis2Height;CW.API.getYAxisWidth=this.getYAxisWidth;CW.API.getYAxis2Width=this.getYAxis2Width;CW.API.getRowHeight=this.getControllerAPI(L.GET_CHART_HEIGHT);CW.API.getColWidth=this.getControllerAPI(L.GET_CHART_WIDTH);CW.API.calculateAllXAxisStyle=this.getControllerAPI(L.LAYOUT_ALL_X_AXIS_LABELS);CW.API.calculateOneXAxisStyle=this.getControllerAPI(L.LAYOUT_ONE_X_AXIS_LABELS);},preprocessForPie:function(Cc){var Cb=this.getChartInfo(),CN=false,CT=this.model,CU=B2,Ce=Cb.dirc,CX=BW.EnumABLDirection,CR=Cb.tp,Cd=this.getUnitsCountInSliceBy(),Ca=this.piePartition=[],CY=this.totalRows=[],CO=this.totalStartCols=[],CW,Cm,Cg,Ch,Cf,CZ,CQ,CP,Ci,Cl,CV,AS=0,CS;if(!CN){CZ=this.dz;CQ=CZ.SliceBy;CP=CQ.TemplateUnit;if(CP&&CP.length>0){AS=CP[0].uidx;}else{B4.visPrint("actually, it should be a bubble chart. not implemented!");}}CW=CT.rct;Cm=CT.cct;Ch=CT.getUnitAttributesCountOnRow();Cf=CT.getUnitAttributesCountOnCol();Cl=CT.getMetricCount();var CM,Cj;if((Cb.isABL&&Ce===CX.VERTICAL)||(CR===CU.BUBBLE||CR===CU.SCATTER)||(CR===CU.GRID)){CM=function(){if(CW>0){Ca.push(0);}if(!isNaN(AS)){AS=Ck(Cc.gts,"row",AS);for(Cg=0;Cg<CW;Cg++){CS=CT.getRowHeaderObj(Cg,AS);if(CS&&CS.stt===1){if(Cg+1<CW){Ca.push(Cg+1);}}}}Ci=Ca.length;for(Cg=1;Cg<Ci;Cg++){CY.push(Ca[Cg]-1);}CY.push(CW-1);};Cj=function(){CV=Ch-1-Cd;var Cp=0,Cn,Co,Cs=[],Cu=[];if(CV>=0){var Cr=this.gts.row[CV];Cr.fcnt=Cr.fcnt||Cr.cs||Cr.rs||1;if(Cr.t===1&&Cr.fcnt>1){var Ct=CT.modelRhs[CV];Cg=0;while(Cg<=Ct.mxIdx){if(Ct[Cg]){Ca.push(Cg);}Cg++;}}else{Cn=this.getBreakByAttributeIndices(true);Co=By.indexOf(Cn,CV)>=0;if(Co){for(var Cq=Cn.length-1;Cq>=0;Cq--){Cp=0;for(Cg=0;Cg<Cn[Cq];Cg++){Cp+=this.gts.row[Cg].cs||1;}Cs=this.getPiePartitions(Cp,true);if(Cs.length>Cu.length){Cu=Cs;}if(Cu.length===CW){break;}}Ca=this.piePartition=Cu;}else{for(Cg=0;Cg<CV;Cg++){Cp+=this.gts.row[Cg].cs||1;}Ca=this.piePartition=this.getPiePartitions(Cp,true);}}}else{Ca.push(0);}};if(CN){Cj.call(this);}else{if(this.hasTotalForPie()){CM.call(this);}else{Cj.call(this);}}}else{if(Cb.isABL&&Ce===CX.HORIZONTAL){CM=function(){if(Cm>0){Ca.push(0);}if(!isNaN(AS)){AS=Ck(Cc.gts,"col",AS);for(Cg=0;Cg<Cm;Cg++){CS=CT.getColHeaderObj(Cg,AS);if(CS&&CS.stt===1){Ca.push(Cg);}}}Ci=Ca.length;for(Cg=1;Cg<Ci;Cg++){CO.push(Ca[Cg]);}CO.push(Cm-Cl);};Cj=function(){CV=Cf-1-Cd;var Cn,Co,Cq=[],Cr=[];if(CV>=0){Cn=this.getBreakByAttributeIndices(false);Co=By.indexOf(Cn,CV)>=0;if(Co){for(var Cp=Cn.length-1;Cp>=0;Cp--){Cq=this.getPiePartitions(Cn[Cp],false);if(Cq.length>Cr.length){Cr=Cq;}if(Cr.length===Cm){break;}}Ca=this.piePartition=Cr;}else{Ca=this.piePartition=this.getPiePartitions(CV,false);}}else{Ca.push(0);}};if(CN){Cj.call(this);}else{if(this.hasTotalForPie()){CM.call(this);}else{Cj.call(this);}}}}function Ck(Cs,Co,Cr,Cp){Cr=Cr||0;if(!!!Cs){return Cr;}Cp=Cp||0;var Cq,Ct,Cn,Cv="cs",Cu=Cp;if(Co.toLowerCase()==="row"){Cn=Cs.row;}else{Cn=Cs.col;Cv="rs";}for(Cq=0;Cn&&Cq<Cr;Cq++){Ct=Cn[Cq];Cu+=(Ct[Cv]||1);}return Cu;}},getBreakByAttributeIndices:function Bq(CT){var CN=this.dz.BreakBy,CS=CN&&CN.TemplateUnit||[],CP,CO,AS,CM=this.gts,CQ=CT?CM.row:CM.col,CR=[];if(CS.length>0){for(CP=0;CP<CS.length;CP++){AS=CS[CP];for(CO=0;CO<CQ.length;CO++){if(CQ[CO].t===12&&AS.id===CQ[CO].id){CR.push(CO);break;}}}}return CR;},getPiePartitions:function Ah(CW,CY){var CU=this.model,CV=CY?CU.rct:CU.cct,CT,CR,AS,CQ,CX,CS,CM,CP,CO,CN=[];for(CT=0;CT<CV;CT++){AS=CY?CU.getRowHeaderObj(CT,CW):CU.getColHeaderObj(CT,CW);CQ=[];CU.collectHeaderObj(AS,CQ);CX=CQ.length;CS=[];for(CR=0;CR<CX;CR++){CM=CQ[CR];CS.push(CM.idx);}CP=CS.join(",");if(CO!==CP){CN.push(CT);CO=CP;}}return CN;},hasTotalForPie:function(){if(this.hasTotal!==undefined){return this.hasTotal;}var CO,AS=this.dz,CN,CQ=false,CP=this.getUnitsCountInSliceBy()>0,CM=["XAxis","YAxis","SizeBy"];for(CO=0;CO<3;CO++){CN=AS[CM[CO]];if(CN&&CN.TemplateMetric&&CN.TemplateMetric.length>0){CQ=true;break;}}this.hasTotal=CQ&&CP;return this.hasTotal;},setCEChartType:function(AS){if(AS&&this.ceChartType===AS){return false;}if(AS===undefined){AS=this.ceChartType;}this.ceChartType=AS;this.isPercentage=As(AS,[7,21,35,14,28,42]);this.isStacked=As(AS,[2,16,21,28,30,9,23,37]);return true;},getUnitsCountInSliceBy:function(){return this.getSliceByAttrsID().length;},getCellHandler:function(CN,AS,CR,CW,CP){var CS=this.model,CT,CO,CX,CV,CQ;if(CR!==Av){CO=this.mapFromChartToLDSIndex(CN,AS);CT=CO.r;CX=CO.c;CV=CS.mapChartIndexToGrid(CT,CS.rp);CQ=CS.mapChartIndexToGrid(CX,CS.cp);if(CP){var CU=this.piePartition,CY,CM=0;if(CW===B6.VERTICAL){CY=this.totalRows;if(CY.length>0&&CU.length>0){CM=CY[0]-CU[0];CV+=CM;}}else{if(CW===B6.HORIZONTAL){CY=this.totalStartCols;if(CY.length>0&&CU.length>0){CM=CY[0]-CU[0];CQ+=CM;}}}}return{row:CV+this.gts.col.length,col:CQ+CR+this.gts.row.length};}return undefined;},getYAxisInfo:function(Ca,CO,CW,CT,CS){var CV=this,CN=this.getChartInfo(),CR=this.model,CM=[],CQ,CZ=true,CU,AS,CP,CY=this.onlyMetricNamesOnAxisForGridPie,CX=this.isMetricNamesOnXAxis;if(this.chartType===B2.GRID||(CB(this.ceChartType))||CY){CZ=false;}CS=false;if(CZ){if(CN.isABL||CS){if(CW===false){CP=this.getSecondaryMetrics(CT);CU=CR.getMetricNamesFromIndex(CP);AS=CR.getMetricIDsFromIndex(CP);}else{CP=this.getPrimaryMetrics(CT);CU=CR.getMetricNamesFromIndex(CP);AS=CR.getMetricIDsFromIndex(CP);}if(Ca!==undefined&&CO!==undefined){By.forEach(CP,function(Cb){CM.push(CV.getCellHandler(Ca,CO,Cb,CN.dirc,CN.isPie));});}}else{if(CW===false){CP=this.getMetricsOnSecondaryYAxis();}else{CP=this.getMetricsOnPrimaryYAxis();}if(CN.isBubbleOrScatter&&this.bubbleSeriesNum!==undefined){CP=CP.slice(0,this.bubbleSeriesNum);}CU=CR.getMetricNamesFromIndex(CP);AS=CR.getMetricIDsFromIndex(CP);}}else{if(CY&&!CX){CU=["Metric Names"];AS=["0"];CP=this.getMetricsOnAngleBy();}else{CU=AI.call(this,"YAxis","n");AS=AI.call(this,"YAxis","id");}}return{isMetric:CZ,items:CU,ids:AS,cellHandlers:CM,mtsIdxArr:CP,displayItems:CQ};},getXAxisInfo:function(Ca,CO,CW,CT){var CV=this,CS=this.model,CP=this.chartType,CN=this.getChartInfo(),CM=[],CR,CZ=true,CU,AS,CQ,CY=this.onlyMetricNamesOnAxisForGridPie,CX=this.isMetricNamesOnXAxis;if((t(this.ceChartType))||CP===B2.GRID||CY){CZ=false;}if(CZ){if(CN.isABL){if(CW===false){CQ=this.getSecondaryMetrics(CT);CU=CS.getMetricNamesFromIndex(CQ);AS=CS.getMetricIDsFromIndex(CQ);}else{CQ=this.getPrimaryMetrics(CT);CU=CS.getMetricNamesFromIndex(CQ);AS=CS.getMetricIDsFromIndex(CQ);}if(Ca!==undefined&&CO!==undefined){By.forEach(CQ,function(Cb){CM.push(CV.getCellHandler(Ca,CO,Cb,CN.dirc,CN.isPie));});}}else{if(CW===false){CQ=this.getMetricsOnSecondaryXAxis();}else{CQ=this.getMetricsOnPrimaryXAxis();}if(CN.isBubbleOrScatter&&this.bubbleSeriesNum!==undefined){CQ=CQ.slice(0,this.bubbleSeriesNum);}CU=CS.getMetricNamesFromIndex(CQ);AS=CS.getMetricIDsFromIndex(CQ);}}else{if(CY&&CX){CU=["Metric Names"];AS=["0"];CQ=this.getMetricsOnAngleBy();}else{CU=AI.call(this,"XAxis","n");AS=AI.call(this,"XAxis","id");}}return{isMetric:CZ,items:CU,ids:AS,cellHandlers:CM,mtsIdxArr:CQ,displayItems:CR};},getRowTitleInfo:function(CM){var CO=this.model,CN=CO.getRowTitleInfo(),CP=this.rowHeaderCnt,AS=[];if(CP<CN.length){CN.slice(0,CP);}By.forEach(CN,function(CQ){if(CM){AS.push(CQ);}else{AS.push(CQ.n);}});return{items:AS};},getColTitleInfo:function(CM){var CO=this.model,CN=CO.getColTitleInfo(),CP=this.colHeaderCnt,AS=[];if(CP<CN.length){CN.slice(0,CP);}By.forEach(CN,function(CQ){if(CM){AS.push(CQ);}else{AS.push(CQ.n);}});return{items:AS};},isGrid:function(){return this.chartType===B2.GRID;},isBubble:function(){return this.chartType===B2.BUBBLE;},isScatter:function(){return this.chartType===B2.SCATTER;},isBubbleOrScatter:function(){var AS=this.chartType;return AS===B2.BUBBLE||AS===B2.SCATTER;},clearLayoutInfo:function(){this.widthCache=[];this.heightCache=[];},updateChartInfo:function(){delete this.chartInfo;},getChartInfo:function(){var CR=this.chartInfo;if(CR){return CR;}var CP=B2,CQ=this.chartType,CN=false,CM=this.property,CO=CM&&CM.readItem(AX.DATA_LABEL),AS=(CM&&CM.readItem(AX.DATA_LABELS_PLACEMENT))||1;if(CQ===CP.AREA||CQ===CP.BAR||CQ===CP.LINE){CN=true;}this.chartInfo={tp:CQ,sbtp:this.chartSubType,dirc:this.chartDirection,shape:this.markerShape,ceMarkerShape:this.ceMarkerShape,isABL:CN,isPie:this.isPie,isRing:false,hasSizeBy:this.hasSizeBy(),isCombo:this.enableCombiChart,isBubbleOrScatter:this.isBubbleOrScatter(),isGrid:this.isGrid(),dlTp:CO,dlPlmt:AS};return this.chartInfo;},getDrillableAttributes:function(){return["Year","Month"];},getDebugMenu:function(){var CM=[],AS=this.enablePartialRendering;if(AS){CM.push({n:"Disable Partial Rendering",did:F.DISABLE_PARTIAL_RENDERING});}else{CM.push({n:"Enable Partial Rendering",did:F.ENABLE_PARTIAL_RENDERING});}if(l.mUseTimer){CM.push({n:"Disable Timer",did:F.DISABLE_TIMER});}else{CM.push({n:"Enable Timer",did:F.ENABLE_TIMER});}if(this.view.enableCETimer){CM.push({n:"Disable CE Timer",did:F.DISABLE_CE_TIMER});}else{CM.push({n:"Enable CE Timer",did:F.ENABLE_CE_TIMER});}CM.push({n:"Print Extremes",did:F.OUTPUT_EXTREMES});CM.push({n:"Print #DataPoints",did:F.OUTPUT_DATA_COUNT});return CM;},getContextMenuData:function(CM){var AS=[];if(CM===BX.GM_ROW_HEADER_TITLE){AS.push({n:"CIRCLE",did:F.CIRCLE});AS.push({n:"SQUARE",did:F.SQUARE});AS.push({n:"PIE",did:F.PIE});AS.push({n:"TICKER",did:F.TICKER});AS.push({n:"RING",did:F.RING});}else{if(CM===BX.GM_COL_HEADER_TITLE){AS.push({n:"Print Extremes",did:F.OUTPUT_EXTREMES});AS.push({n:"Open Legend",did:F.OPEN_LEGEND});AS.push({n:"Switch Combination Chart",did:F.COMBINATION});}}return AS;},getChartType:function(){if(this.chartType===undefined||B2.UNDEFINED){var CQ=this.firstRes,AS=CQ.dz,CP=AS.XAxis,CM=AS.YAxis,CO,CN=this.view.getWidgetPropertyValue(AX.SHAPE);if(CP.TemplateMetric&&CM.TemplateMetric){if(this.hasSizeBy()){CO=B2.BUBBLE;}else{CO=B2.SCATTER;}}else{if(!CP.TemplateMetric&&!CM.TemplateMetric){CO=B2.GRID;if((!CP.TemplateUnit||CP.TemplateUnit.length===0)&&(!CM.TemplateUnit||CM.TemplateUnit.length===0)){this.isBlankGrid=true;}}else{if(CN===B0.LINE){CO=B2.LINE;}else{if(CN===B0.BAR){CO=B2.BAR;}else{if(CN===B0.AREA){CO=B2.AREA;}else{if(CN===B0.PIE){CO=B2.BAR;}else{if(CN===B0.RING){CO=B2.BAR;}else{CO=B2.BAR;}}}}}if(CM.TemplateMetric){this.chartDirection=BW.EnumABLDirection.VERTICAL;}else{this.horizontalMode=true;this.chartDirection=BW.EnumABLDirection.HORIZONTAL;}}}this.chartType=CO;this.isPie=(CN===B0.PIE||CN===B0.RING);if(this.isPie){this.isBlankGrid=false;}if(CQ.eg!==undefined){this.isBlankGrid=true;}}return this.chartType;},getChartDirection:function(){if(this.chartDirection===undefined){this.getChartType();}return this.chartDirection;},getMetricsOnAxisOfChart:function(CS,Ce,CN,CZ,CX){var CT,CO,CQ=this.getChartInfo(),CY=CQ.dirc,CU,CR,Cg,CW,Ca,CP,Cb,Cd,CV,AS,CM,Cc,Cf;if(CQ.tp===B2.GRID){return[];}if(CN==="y"&&CQ.isABL&&CY===1){return[];}if(CN==="x"&&CQ.isABL&&CY===2){return[];}this.metricsOnAxisCache=this.metricsOnAxisCache||{};this.metricsOnAxisCache[CN]=this.metricsOnAxisCache[CN]||{};Cf=(CN==="y"||CN==="z")?CS:Ce;Cf+="#"+(CZ?1:0)+"#"+(CX?1:0);Cc=this.metricsOnAxisCache[CN][Cf];if(Cc!==undefined){return Cc;}CT=this.mapFromChartToLDSIndex(CS,Ce);CO=this.splitPlottingMetrics;CU=this.getMetricsOnXAxis();CR=this.getMetricsOnYAxis();Cg=CU.concat(CR);CW=this.getPrimaryMetrics(true);Ca=this.getSecondaryMetrics(true);CP=this.getSizeByMetrics();Cd=this.inChartLayout||this.getSubChartsLayout();Cb=Math.min(CU.length,CR.length);if(CP.length>0){Cb=Math.min(Cb,CP.length);}if(!CO){if(CN==="y"){if(CQ.isABL){if(CZ===false){Cc=Ca;}else{Cc=CW;}}else{if(CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER){if((this.haveY1&&CZ!==false)||(!this.haveY1&&CZ===false)){Cc=CR.slice(0,Cb);}}}}else{if(CN==="x"){if(CQ.isABL){if(CZ===false){Cc=Ca;}else{Cc=CW;}}else{if(CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER){if((this.haveX1&&CZ!==false)||(!this.haveX1&&CZ===false)){Cc=CU.slice(0,Cb);}}}}else{if(CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER){if(CP.length>0){Cc=CP.slice(0,Cb);}}else{Cc=CP;}}}}else{if(CN==="y"){if(CQ.isABL&&CY===2){CV=CZ?"YAxis":"Y2Axis";AS=CZ?CW[0]:Ca[0];if(AS!==undefined){CM=A6.call(this,AS,CV);}if(this.metricsType===AH.MetricsByRow){if(CZ===false){Cc=Ca.length>0?[Ca[CT.inchtRow]]:[];}else{Cc=CW.length>0?[CW[CT.inchtRow]]:[];}}else{if(CX&&this.metricsType===AH.MetricsByColumn&&CM===Bn.PERCELL){Cc=[Cg[Ce%Cg.length]];}else{if(CZ===false){Cc=Ca;}else{Cc=CW;}}}}else{if(CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER){if((this.haveY1&&CZ!==false)||(!this.haveY1&&CZ===false)){Cc=CR.length>0?[CR[CS%Cd.r]]:[];}}}}else{if(CN==="x"){if(CQ.isABL&&CY===1){CV=CZ?"XAxis":"X2Axis";AS=CZ?CW[0]:Ca[0];if(AS!==undefined){CM=A6.call(this,AS,CV);}if(this.metricsType===AH.MetricsByColumn){if(CZ===false){Cc=Ca.length>0?[Ca[CT.inchtCol]]:[];}else{Cc=CW.length>0?[CW[CT.inchtCol]]:[];}}else{if(CX&&this.metricsType===AH.MetricsByRow&&CM===Bn.PERCELL){Cc=[Cg[CS%Cg.length]];}else{if(CZ===false){Cc=Ca;}else{Cc=CW;}}}}else{if(CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER){if((this.haveX1&&CZ!==false)||(!this.haveX1&&CZ===false)){Cc=CU.length>0?[CU[Ce%Cd.c]]:[];}}}}else{if((CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER)&&CP.length>0){Cc=CP.length>0?[CP[CS%CP.length]]:[];}else{Cc=CP;}}}}Cc=Cc||[];this.metricsOnAxisCache[CN][Cf]=Cc;return Cc;},getSubChartsLayout:function(){var CS=this.splitPlottingMetrics,CO=this.getChartInfo(),CN,AS=this.shallWeUseGroupInfo,CM=this.metricsType;if(!CS){return{r:1,c:1};}var CQ=B2,CT=this.model.plottingMetricsIndex;if(CO.tp===CQ.BUBBLE||CO.tp===CQ.SCATTER){var CR=this.getMetricsOnXAxis();var CP=this.getMetricsOnYAxis();return{r:CP.length,c:CR.length};}if(CM===AH.MetricsByRow){if(AS&&CO.isABL){CN=this.getGroupInfo();return{r:CN.length,c:1};}return{r:CT.length,c:1};}if(CM===AH.MetricsByColumn){if(AS&&CO.isABL){CN=this.getGroupInfo();return{r:1,c:CN.length};}return{r:1,c:CT.length};}B4.visPrint("getSubChartsLayout need to be implemented for this chart type");return{r:1,c:1};},getChartCountInCol:function(){return this.model.cic*this.inChartLayout.r;},getChartCountInRow:function(){return this.model.cir*this.inChartLayout.c;},getSplitPlottingMetrics:function(){var CM=B2;if(this.chartType===CM.GRID&&this.isPie===false){this.splitPlottingMetrics=false;}else{if(this.chartType===CM.GRID&&this.isPie&&this.getMetricsOnAngleBy().length===0){this.splitPlottingMetrics=false;}else{if(this.chartType===CM.GRID&&this.isPie&&BJ.call(this,"SliceBy")){this.splitPlottingMetrics=false;}else{var AS=this.metricsType;this.splitPlottingMetrics=(AS===AH.MetricsByRow||AS===AH.MetricsByColumn);}}}return this.splitPlottingMetrics;},reRenderGM:function(){this.widthCache.length=0;this.heightCache.length=0;this.view.reRender();},hideContextMenu:function(){var AS=this.view.contextMenu;if(AS!==undefined){AS.hideContextMenu();}},getAxisScaleMode:function(){var CM=this.view.getWidgetPropertyValue(AX.AXIS_SCALE),AS,CN;if(CM){this.axisScale=CM;if(CM===Bn.CUSTOM){CN=this.view.getWidgetPropertyValue(AX.AXIS_SCALE_DATA);if(CN&&CN.length>0){AS=parseInt(CN[0][1],10);if(AS<=Bn.PERCELL){this.axisScale=AS;}else{this.axisScale=Bn.CUSTOM;}}}}else{this.axisScale=Bn.GLOBAL;}return this.axisScale;},getPerCellSetting:function(AS,CM){return{xPerCell:this.isPerCellScaleOn(AS,CM,"x1")||false,x2PerCell:this.isPerCellScaleOn(AS,CM,"x2")||false,y2PerCell:this.isPerCellScaleOn(AS,CM,"y2")||false,yPerCell:this.isPerCellScaleOn(AS,CM,"y1")||false};},getChartUniformAxisTrims:function(AS,CU){var CM,CZ=this.yAxisTrims,CS=this.xAxisTrims,CW=CZ[AS],CY=CS[CU];var CV=this.y2AxisTrims,CP=this.x2AxisTrims,Ca=CV[AS],CT=CP[CU];CM=Bz.call(this,CY,CW,CT,Ca);var CR=this.caAxisTrims[0],CO=this.caAxisTrims[1],CX=CR[CU],CN=CO[AS],CQ;CQ=O.call(this,CX,CN);CM=mstrmojo.hash.copy(CQ,CM);return CM;},getChartUniformAxisMargins:function(CO,CR){var CN=this.yAxisMargins,CQ=this.xAxisMargins,AS=CN[CO],CP=CQ[CR],CM;if(!CP){B4.visPrint("cannot find the x-axis margin");}if(!AS){B4.visPrint("cannot find the y-axis margin");}CM=T.call(this,AS,CP);return CM;},getDataAreaPadding:function(CZ,Cf){var Cd=this.axisScale,CT=this.maxDataAreaPaddingCache,CU=Bn,CO,Ca,Cc,Cb,CQ,CM,AS,CV;if(Cd===CU.PERCELL){if(CT&&CT[CZ]&&CT[CZ][Cf]){return CT[CZ][Cf];}else{return null;}}if(Cd===CU.PERROWCOL||Cd===CU.GLOBAL||Cd===CU.CUSTOM){var CW;if(this.dataAreaPaddingGlobalZero){CW={X1:{HighOffset:0,LowOffset:0},Y1:{HighOffset:0,LowOffset:0},X2:{HighOffset:0,LowOffset:0},Y2:{HighOffset:0,LowOffset:0}};}else{if(!CT){return null;}if(CZ>=At){CZ=0;}if(Cf>=h){Cf=0;}CO=CT.length;Ca=CT[0].length;var Cg,CR;if(this.maxRowPadding===undefined){Cg=this.maxRowPadding=[];for(Cc=0;Cc<CO;Cc++){CQ=CT[Cc][0];for(Cb=0;Cb<Ca;Cb++){if(Cb!==0){CQ=Bv(CQ,CT[Cc][Cb]);}}Cg.push(CQ);}}if(this.maxColPadding===undefined){CR=this.maxColPadding=[];for(Cb=0;Cb<Ca;Cb++){AS=CT[0][Cb];for(Cc=0;Cc<CO;Cc++){if(Cc!==0){AS=Bv(AS,CT[Cc][Cb]);}}CR.push(AS);}}Cg=this.maxRowPadding;CR=this.maxColPadding;CQ=Cg[CZ];AS=CR[Cf];if(Cd===CU.GLOBAL||Cd===CU.CUSTOM){CM=this.inChartLayout;CV=CM.r;for(Cc=CZ%CO;Cc<CO;Cc+=CV){CQ=Bv(CQ,Cg[Cc]);}CV=CM.c;for(Cc=Cf%Ca;Cc<Ca;Cc+=CV){AS=Bv(AS,CR[Cc]);}}CW=CE(CQ,AS);}var Ch,CY,CN,CP,Ce=this.layoutPaddingEchos,CS=[Cf,Cf,CZ,CZ],CX=["X1","X2","Y1","Y2"];if(Ce){for(CY=0;CY<CX.length;CY++){Ch=CX[CY];CP=CS[CY];CN=Ce[Ch][CP];if(CN){CW[Ch].HighOffset=Math.max(CW[Ch].HighOffset,(CN.HighOffset||0));CW[Ch].LowOffset=Math.max(CW[Ch].LowOffset,(CN.LowOffset||0));}}}return CW;}},getMetricNameOnAngleBy:function(CM){function CN(CR){var CQ,CP,CO;CQ=this.dz;CP=CQ.AngleBy||CQ.Angle;if(CP){CO=CP.TemplateMetric;}if(CO&&CO.length>CR){return CO[CR];}return null;}var AS=CN.call(this,CM);if(AS){return AS.n;}return"";},getMetricsOnAngleBy:function(){return Ak.call(this,"AngleBy");},getMetricsOnXAxis:function(){return Ak.call(this,"XAxis");},setGroupInfo:function(AS){var CM=this.view;if(CM.GMController===undefined){CM.GMController=this;}CM.setWidgetPropertyValue(AX.GROUP_INFO,JSON.stringify(AS));},removeGroupInfo:function(){this.setGroupInfo([]);},updateGroupInfo:function(){var CO=this.view,CN=this.getGroupInfo(),CP=[],CM=[Av,Av],AS=this.gts;By.forEach(CN,function(CQ){if(CQ[0]!==Av){CM[0]=Aa.call(this,CQ[0],AS);}if(CQ[1]!==Av){CM[1]=Aa.call(this,CQ[1],AS);}if(CM[0]!==Av||CM[1]!==Av){CP.push(CQ);}});CO.setWidgetPropertyValue(AX.GROUP_INFO,JSON.stringify(CP));},hasGroupInfoStored:function(){var CM,AS=this.view.getWidgetPropertyValue(AX.GROUP_INFO);if(AS){AS=AS.replace(/'/g,'"');CM=JSON.parse(AS);}if(CM&&CM.length>0){if(AS.indexOf("idx")>=0){CM=A.call(this,CM);}return{existing:true,gi:CM};}return{existing:false};},getDummyGroupInfo:function(CO,CV,CM){var CW=this.model;var CT=[],CR,CS=this.getPrimaryMetrics(),CN=this.getSecondaryMetrics(),Cb=(CW&&CW.getMetricIds())||[],CZ=BC(CS,Cb),AS=BC(CN,Cb);if(CO){var Ca=function(Cd){var Cc;for(Cc=0;Cc<Cd.length;Cc++){if(Cd[Cc]===CO){Cd.splice(Cc,1);break;}}};Ca(CZ);Ca(AS);if(CM){if(CV){CZ=[CO].concat(CZ);}else{AS=[CO].concat(AS);}}else{if(CV){CZ=CZ.concat([CO]);}else{AS=AS.concat([CO]);}}}var CQ=CZ.length,CP=AS.length,CU=Math.max(CQ,CP);for(CR=0;CR<CU;CR++){var CY,CX;CY=(CZ[CR]!==undefined?CZ[CR]:Av);CX=(AS[CR]!==undefined?AS[CR]:Av);CT.push([CY,CX]);}return CT;},getMetricIndexFromID:function(AS){return Aa.call(this,AS,this.gts);},getGroupInfo:function(CO){var CP=this.view,CM=this.gts,CN=[];if(CP.GMController===undefined){CP.GMController=this;}var AS=this.hasGroupInfoStored();if(AS.existing){CN=AS.gi;}else{CN=this.getDummyGroupInfo();CP.setWidgetPropertyValue(AX.GROUP_INFO,JSON.stringify(CN));}if(CO===true){By.forEach(CN,function(CR){var CQ=CR[0];if(CQ!==Av){CR[0]=Aa.call(this,CQ,CM);}CQ=CR[1];if(CQ!==Av){CR[1]=Aa.call(this,CQ,CM);}});}return CN;},haveMetricAxisTitle:function(CQ){var CM=this.haveX1||this.haveX2,CO=this.haveY1||this.haveY2,CR=this.getChartInfo(),AS=this.model&&this.model.dz,CP=AS.XAxis,CN=AS.YAxis;if(CR.isABL){CM=!!CP.TemplateMetric;CO=!!CN.TemplateMetric;}if(CQ==="x"){return CM;}if(CQ==="y"){return CO;}return CO||CM;},haveAxisTitle:function(AS){var CP=this.haveX1||this.haveX2,CT=this.haveY1||this.haveY2,CN=this.getChartInfo(),CS=CN.dirc,CR,CQ,CO,CM=this.metricsType;if(CN.isABL){CQ=this.getMetricsOnYAxis();CR=this.getMetricsOnXAxis();CO=CR.concat(CQ);if(CO.length===1){if(CR.length===1){CP=false;}else{CT=false;}}else{if(CS===B6.VERTICAL){if(CM===AH.MetricsByRow||CM===AH.MetricsByYAxis){CP=false;}else{if(CM===AH.MetricsByXAxis){if(this.hasAttributesInDropzone("XAxis")){CP=false;}else{CP=true;CT=false;}}else{CP=false;CT=false;}}}else{if(CM===AH.MetricsByColumn||CM===AH.MetricsByXAxis){CT=false;}else{if(CM===AH.MetricsByYAxis){if(this.hasAttributesInDropzone("YAxis")){CT=false;}else{CP=false;CT=true;}}else{CP=false;CT=false;}}}}}if(AS==="x"){return CP;}if(AS==="y"){return CT;}return CT||CP;},haveAttributeAxisTitle:function(CN){var AS=this.haveX1||this.haveX2,CM=this.haveY1||this.haveY2;AS=this.hasAttributesInDropzone("XAxis");CM=this.hasAttributesInDropzone("YAxis");if(CN==="x"){return AS;}if(CN==="y"){return CM;}return CM||AS;},getShapeForOption:function(CQ){if(this.view.noData){return[];}var AS=this.metricShapeArr,CM=this.model.colorType,CO,CR=this.getChartInfo(),CP=[];if(!CR.isABL||!this.enableCombiChart){return[CR.shape];}if(CQ!==undefined&&(CM===BI.ATT_METRICS||CM===BI.METRICS_ITEM)){var CN;By.forEach(CQ.comb,function(CS){if(CS.tp===4){CN=CS.eid;return false;}});if(CN!==undefined){CO=this.getMetricIndexFromID(CN);}}if(CQ!==undefined&&CQ.optLvl===Bg.METRIC){CO=this.getMetricIndexFromID(CQ.key);}if(CO===undefined||CO===Av){By.forEach(AS,function(CS){if(CS!==undefined&&CS>=0){CP.push(CS);}});return CP;}return[AS[CO]];},getOnTheFlyShapeForMetric:function(CN){var AS=this.getForbiddenShapeForMetric(CN),CM=this.getResolvedShapeForMetric(CN);if(AS.indexOf(CM)>=0){return Aj.LINE;}return CM;},getResolvedShapeForMetric:function(CQ){var CN=this.model,CO=CN&&CN.getMetricIDsFromIndex([CQ])[0],CM=this.property.generalProps,CP=CM.metricShapes,AS;if(CP){AS=CP[CO];}if(AS!==undefined){return AS;}return this.markerShape;},getForbiddenShapeForMetric:function(CP){var CS=this,CN=[],CU,CT=[],AS=this.getChartInfo(),CM=this.getPrimaryMetrics(false),CO=this.getSecondaryMetrics(false);if(AS.isABL){if(CO.indexOf(CP)>=0){CU=this.hasGroupInfoStored();if(CU.existing){var CR=this.getGroupInfo(true);CR.forEach(function(CW){if(CW[1]===CP&&CW[0]>=0){CN.push(CW[0]);}});}else{CN=CM;}}}var CV=false,CQ=false;CN.forEach(function(CW){var CX=CS.getResolvedShapeForMetric(CW);if(CX===Aj.BAR){CV=true;}else{if(CX===Aj.AREA){CQ=true;}}});if(CV){CT.push(Aj.BAR);}if(CQ){CT.push(Aj.AREA);}return CT;},getPrimaryMetrics:function(AS){if(!this.horizontalMode){return this.getMetricsOnPrimaryYAxis(AS);}return this.getMetricsOnPrimaryXAxis(AS);},getSecondaryMetrics:function(AS){if(!this.horizontalMode){return this.getMetricsOnSecondaryYAxis(AS);}return this.getMetricsOnSecondaryXAxis(AS);},getMetricsOnPrimaryXAxis:function(CM){var AS=Bu.call(this,0,CM,true,"x");if(AS){return AS;}var CN=this.getMetricsOnXAxis();return AB.call(this,CN,true,CM);},getMetricsOnSecondaryXAxis:function(CM){var AS=Bu.call(this,1,CM,true,"x");if(AS){return AS;}var CN=this.getMetricsOnXAxis();return AB.call(this,CN,false,CM);},getMetricsOnPrimaryYAxis:function(CM){var AS=Bu.call(this,0,CM,true,"y");if(AS){return AS;}var CN=this.getMetricsOnYAxis();return AB.call(this,CN,true,CM);},getMetricsOnSecondaryYAxis:function(CM){var AS=Bu.call(this,1,CM,true,"y");if(AS){return AS;}var CN=this.getMetricsOnYAxis();return AB.call(this,CN,false,CM);},getMetricsOnYAxis:function(){return Ak.call(this,"YAxis");},getMetricsOnTooltip:function(){return Ak.call(this,"AdditionalMetrics");},getSliceByAttrsID:function(){var CM=this.getSliceByAttributes(),AS=[];By.forEach(CM,function(CN){AS.push(CN.id);});return AS;},getBreakByAttrsID:function(){var CM=this.getBreakByAttributes(),AS=[];By.forEach(CM,function(CN){AS.push(CN.id);});return AS;},getColorByAttrsID:function(){var CO,CM=[],CN,AS,CP;CO=this.colorByInfo;if(CO.tp===BI.ATT||CO.tp===BI.ATT_METRICS){CP=CO.atts;AS=CP.length;for(CN=0;CN<AS;CN++){CM.push(CP[CN].id);}return CM;}return[];},getRowColorAttrsIndex:function(){return A2.call(this,"row");},getColColorAttrsIndex:function(){return A2.call(this,"col");},getColorByUnitIds:function(CZ){var CQ,CN,CT,CU,CV=[],CY,CS,CP,CR=[],CX=this,CW=false,CM=false;if(CZ===BW.EnumABLDirection.VERTICAL){CP=["Rows","YAxis","Columns","XAxis"];}else{CP=["Columns","XAxis","Rows","YAxis"];}CP.forEach(function(Ca){CS=AI.call(CX,Ca,"id");By.forEach(CS,function(Cb){CR.push({id:Cb,zone:Ca});});if((Ca==="Rows"||Ca==="Columns")&&CX.dz[Ca].MetricNames!==undefined){CR.push({id:-1,zone:Ca});}});CU=this.colorByInfo;if(CU.tp===BI.METRICS_ITEM||CU.tp===BI.ATT_METRICS){CW=true;}if(CU.tp===BI.ATT||CU.tp===BI.ATT_METRICS||CU.tp===BI.METRICS_ITEM){CT=CU.atts;CN=(CT&&CT.length)||0;By.forEach(CR,function(Ca){if(Ca.id===-1&&CW){CV.push({id:-1,unique:false,zone:Ca.zone,es:CX.getMetricIdsOfABLChart(CZ)});CM=true;return ;}for(CQ=0;CQ<CN;CQ++){CY=CT[CQ];if(Ca.id===CY.id){CV.push({id:CY.id,unique:false,zone:Ca.zone,es:CX.getElementsOfAttr(CY)});break;}}});if(!CM&&CW){CV.push({id:-1,unique:true,es:this.getMetricIdsOfABLChart(CZ)});}var AS=[],CO;for(CQ=0,CO=CV.length;CQ<CO;CQ++){AS.push(CV[CQ].id);}for(CQ=0;CQ<CN;CQ++){CY=CT[CQ];if(AS.indexOf(CY.id)<0){CV.push({id:CY.id,unique:true,es:this.getElementsOfAttr(CY)});}}}return CV;},getElementsOfAttr:function(AS){var CM=this.gts,CR=CM.row,CN=CM.col,CP=(AS.axis==="row"?CR:CN),CO=AS.uidx,CQ=[];By.forEach(CP[CO].es,function(CS){CQ.push(CS.id);});return CQ;},getMetricIdsOfABLChart:function(CN){var CP,CQ,CO=[],CR,CM=this.dz,AS;if(CN===BW.EnumABLDirection.VERTICAL){CR="YAxis";}else{CR="XAxis";}AS=CM[CR].TemplateMetric;if(AS&&AS.length>0){CQ=AS.length;for(CP=0;CP<CQ;CP++){CO.push(AS[CP].id);}}return CO;},splitPiesInGraphCellForABL:function(){if(this.chartType===5){return true;}return this.metricsType!==AH.MetricsBySlice;},getSizeByScaleType:function(AS){var CM,CO="SizeBy",CN;CM=this.getSizeByMetrics();CN=CM[AS];return A6.call(this,CN,CO);},getSizeByMetrics:function(){var CR,CM,CS,CN,AS,CT,CP,CQ="SizeBy",CO=this.metricsOnDropZone[CQ];if(!CO){AS=this.gts;CT=this.dz[CQ];CP=this.chartType;CR=CT.TemplateMetric;CO=[];if(CR&&CR.length>0){CN=this.getMetricsOnYAxis();if(K.call(this,CN)){CS=Math.min(CR.length,CN.length);}else{if((CP===B2.BUBBLE)||(CP===B2.SCATTER)){CS=CR.length;}else{CS=1;}}for(CM=0;CM<CS;CM++){CO.push(Aa.call(this,CR[CM].id,AS));}}this.metricsOnDropZone[CQ]=CO;}return CO;},getColorByMetrics:function(){return Ak.call(this,"ColorBy");},getAttributesOnDropZone:function(AS,CM){return AI.call(this,AS,CM);},getGMHeaderCount:function(CM){var AS=this.dz;return Bx.call(this,AS[CM]);},setupDualAxis:function(){var CS,CO,CR=this.getChartInfo(),CN,CQ,CP=this;this.haveX1=false;this.haveX2=false;this.haveY1=false;this.haveY2=false;this.drawX1Numeric=false;this.drawX2Numeric=false;this.drawY1Numeric=false;this.drawY2Numeric=false;if(CR.isABL){if(this.horizontalMode){CO=this.getYAxisInfo();if(CO.items.length>0){this.haveY1=true;}if(this.clusteredBarSpecialCase){this.haveY1=true;}}else{CS=this.getXAxisInfo();CN=this.getMetricsOnPrimaryYAxis();CQ=this.getMetricsOnSecondaryYAxis();if(CS.items.length>0){this.haveX1=true;}if(this.clusteredBarSpecialCase){this.haveX1=true;}}}var CM=function(CU,CT){if(CU.length>0){if(CT==="XAxis"){CP.haveX1=true;}else{if(CT==="XAxis2"){CP.haveX2=true;}else{if(CT==="YAxis"){CP.haveY1=true;}else{if(CT==="YAxis2"){CP.haveY2=true;}}}}By.forEach(CU,function(CV){if(CV===undefined||CV<0){return ;}if(A6.call(CP,CV,CT)!==Bn.PERCELL){if(CT==="XAxis"){CP.drawX1Numeric=true;}else{if(CT==="XAxis2"){CP.drawX2Numeric=true;}else{if(CT==="YAxis"){CP.drawY1Numeric=true;}else{if(CT==="YAxis2"){CP.drawY2Numeric=true;}}}}}else{if(CT==="XAxis"){CP.drawX1Numeric=CP.drawX1Numeric||CP.getChartCountInCol()===1;}else{if(CT==="XAxis2"){CP.drawX2Numeric=CP.drawX2Numeric||CP.getChartCountInCol()===1;}else{if(CT==="YAxis"){CP.drawY1Numeric=CP.drawY1Numeric||CP.getChartCountInRow()===1;}else{if(CT==="YAxis2"){CP.drawY2Numeric=CP.drawY2Numeric||CP.getChartCountInRow()===1;}}}}}});}};CM(this.getMetricsOnPrimaryXAxis(),"XAxis");CM(this.getMetricsOnSecondaryXAxis(),"XAxis2");CM(this.getMetricsOnPrimaryYAxis(),"YAxis");CM(this.getMetricsOnSecondaryYAxis(),"YAxis2");if(CP.clusteredBarSpecialCase){if(CR.dirc===CA.VERTICAL){this.drawX1Numeric=true;}else{this.drawY1Numeric=true;}}if(this.isBubbleOrScatter()){var AS=this.axisLayout;this.haveY1=(AS&A9)!==0;this.haveY2=(AS&Bh)!==0;this.haveX1=(AS&Bs)!==0;this.haveX2=(AS&P)!==0;}if(this.onlyMetricNamesOnAxisForGridPie){if(this.isMetricNamesOnXAxis){this.haveX1=true;}else{this.haveY1=true;}}if(CR.isGrid&&CR.isPie){if(this.isMetricNamesOnRows){this.haveY1=true;}}CO=this.getYAxisInfo();if(CR.isGrid&&CO.items.length>0&&CO.isMetric===false){this.haveY1=true;}},setupAxisLayout:function(){var Cc,CQ=0,Ch=false,CV=false,CX=false,CZ=false,CY=false,CO=false,CM=false,AS=false,CN=false,CW=false,CU=this.chartType,Ck=this.chartDirection,CS=this.metricsType,CR=this.getXAxisInfo(),Cb=this.getXAxisInfo(undefined,undefined,false,undefined),Ce=this.getYAxisInfo(),Ci=this.getYAxisInfo(undefined,undefined,false,undefined),Cj=this.getMetricsOnAngleBy(),Cd=CU===B2.AREA||CU===B2.BAR||CU===B2.LINE,Cf=this.isPie,CP=this.isGrid(),Cl=this.isBubbleOrScatter();if(Cd){if(Ck===CA.VERTICAL){Cc=Ce.items.length;if(Ci&&Ci.items){CQ=Ci.items.length;}if(Cc>0&&CQ>0){CV=true;}if(CV){if(CS===AH.MetricsByRow){CX=true;}else{CX=true;AS=true;}}else{if((Cc<=1&&CQ<=1)||CS===AH.MetricsByRow){CX=true;}else{if(CS===AH.MetricsByColumn){CZ=true;CY=true;}else{if(CS===AH.MetricsByXAxis||CS===AH.MetricsByBreakBy){if(CR.items.length===0){if(this.chartSubType!==BM.STACKED&&this.chartSubType!==BM.PERCENT){CO=true;}}else{CX=true;AS=true;}}}}}}else{Cc=CR.items.length;if(Cb&&Cb.items){CQ=Cb.items.length;}if(Cc>0&&CQ>0){Ch=true;}if(Ch){if(CS===AH.MetricsByColumn){CZ=true;}else{CZ=true;CN=true;}}else{if((Cc<=1&&CQ<=1)||CS===AH.MetricsByColumn){CZ=true;}else{if(CS===AH.MetricsByRow){if(BF.call(this)){CW=true;}CX=true;}else{if(CS===AH.MetricsByYAxis||CS===AH.MetricsByBreakBy){if(Ce.items.length===0){CM=true;}else{CZ=true;CN=true;}}}}}}}else{if(CP){if(Cf&&Cj.length>1){if(CS===AH.MetricsByRow){CX=true;CZ=false;this.haveY1=true;}if(CS===AH.MetricsByColumn){CX=false;CZ=true;CY=true;}}}else{if(Cl){if(CS===AH.MetricsByRow||CS===AH.MetricsByColumn){CX=true;CZ=true;}else{CX=true;CZ=true;AS=true;CN=true;}}}}var Cg=this.dz.XAxis.TemplateUnit;if(Cg&&Cg.length>0){CZ=true;}var Ca=this.view.getWidgetPropertyValue(BK.Y_AXIS_TITLE_SHOW),CT=this.view.getWidgetPropertyValue(BK.X_AXIS_TITLE_SHOW);if(Ca===undefined){Ca=this.view.getWidgetPropertyDefaultValue(BK.Y_AXIS_TITLE_SHOW,{isMetric:this.yIsNumeric});}if(CT===undefined){CT=this.view.getWidgetPropertyDefaultValue(BK.X_AXIS_TITLE_SHOW,{isMetric:this.xIsNumeric});}if(!Ca){CX=false;}if(!CT){if(CZ&&!CY){CZ=false;}}this.isXDualAxis=Ch;this.isYDualAxis=CV;this.hasHeaderInY=CX;this.hasFooterInX=CZ;this.isFooterAbove=CY;this.metricNameInX=CO;this.metricNameInY=CM;this.combineMetricNameInX=CN;this.combineMetricNameInY=AS;this.metricNamesOnRowMetricsOnXAxis=CW;this.metricNamesOnColumnMetricsOnYAxis=V.call(this);},getAxisLayout4CE:function(CS,CR){var CU=0,CV,CT,CO;var CN,CW,AS,CQ;if(CS!==undefined&&CR!==undefined){CO=this.chartAxisLayouts=this.chartAxisLayouts||{x:[],y:[]};CV=CO.y;CT=CO.x;var CP=0,CM=0;if(CT[CR]===undefined){CN=this.getXAxisInfo(CS,CR,true,false,true);CW=this.getXAxisInfo(CS,CR,false,false,true);if(CN.items.length>0){CP|=Bs;}if(CW.items.length>0){CP|=P;}CT[CR]=CP;}else{CP=CT[CR];}if(CV[CS]===undefined){AS=this.getYAxisInfo(CS,CR,true,false,true);CQ=this.getYAxisInfo(CS,CR,false,false,true);if(AS.items.length>0){CM|=A9;}if(CQ.items.length>0){CM|=Bh;}CV[CS]=CM;}else{CM=CV[CS];}CU|=CP;CU|=CM;}else{CN=this.getXAxisInfo(CS,CR,true,false);CW=this.getXAxisInfo(CS,CR,false,false);AS=this.getYAxisInfo(CS,CR,true,false);CQ=this.getYAxisInfo(CS,CR,false,false);if(CN.items.length>0){CU|=Bs;}if(AS.items.length>0){CU|=A9;}if(CQ.items.length>0){CU|=Bh;}if(CW.items.length>0){CU|=P;}}return CU;},getYAxisWidth4FitWindow:function(CQ){var CN,CR,AS,CO=0,CM=this.getChartCountInCol(),CP=this.getControllerAPI(L.GET_CHART_HEIGHT);CM=Math.min(CM,At);for(CN=0;CN<CM;CN++){CR=U.call(this,CN,0);AS=this.getSingleYAxisWidth(CP(CN,0),CR,CN,0,CQ);CO=Math.max(CO,AS);}return CO;},getYAxisWidth4FitContent:function(AS){if(AS){return this.getNumericYAxisWidth(true);}return this.getCategoricalYAxisWidth();},getYAxisWidth:function(){if(this.metricNamesOnRowMetricsOnXAxis){var CP=this.getXAxisInfo(0,0),CQ=[CP.items],CM=this.view.HTML5PROPS.RH,CO=this.view.layouter;var CR=CO.getRowHeadersWidth(CQ,CM);if(CR&&CR.length>0){this.haveY1=true;return CR[0];}}var CS,CN=0,CT=this.view.getWidgetPropertyValue(AX.FIT_TO),AS=this.getYAxisInfo(undefined,undefined,true,false);if(this.isBubbleOrScatter()){CS=this.axisLayout;if((CS&A9)===0){return 0;}}if(AS.items.length===0&&!this.metricNameInY){if(this.hasHeaderInY&&!this.haveY2){return this.view.textHeightInY+2*x;}return 0;}if(!AS.isMetric||this.drawY1Numeric){if(CT===AP.CONTENT){CN=this.getYAxisWidth4FitContent(AS.isMetric);}else{CN=this.getYAxisWidth4FitWindow(true);}}if(this.hasHeaderInY&&this.haveY1){CN+=this.view.textHeightInY+2*x;}return CN;},getYAxis2Width:function(){var AS,CN,CM=this.getYAxisInfo(undefined,undefined,false,true);if(this.isBubbleOrScatter()){AS=this.axisLayout;if((AS&Bh)===0){return 0;}}if(CM.items.length===0){if(this.hasHeaderInY&&!this.haveY1){CN=this.view.textHeightInY+2*x;return CN;}return 0;}if(!CM.isMetric){return 0;}CN=this.drawY2Numeric?this.getNumericYAxisWidth(false):0;if(this.hasHeaderInY){CN+=this.view.textHeightInY+2*x;}return CN;},getCategoricalYAxisWidth:function(){var CM,CP,CN,CO=0,AS=this.getChartCountInCol();for(CM=0;CM<AS;CM++){CP=this.getYAxisLabels(CM);CN=this.estimateYAxisSize(CP).width;CO=Math.max(CO,CN);}return CO;},getNumericYAxisWidth:function(CQ){var AS=-1,CO=this.getControllerAPI(L.GET_CHART_HEIGHT),CN,CM,CP;var CS=this.getChartCountInCol();for(CN=0;CN<CS;CN++){var CR=U.call(this,CN,0);CM=this.getSingleYAxisWidth(CO(CN,0),CR,CN,0,CQ);if(CM>AS){AS=CM;}}return AS;},getXAxisHeight:function(CN){var CM,AS,CO=this.getXAxisInfo();if(this.isBubbleOrScatter()){CM=this.axisLayout;if((CM&Bs)===0){return 0;}}if(CO.items.length===0&&!this.metricNameInX){if(this.metricNameInX&&!this.haveX2){return this.view.textHeightInX+x*2;}return 0;}if(CO.isMetric){AS=this.drawX1Numeric?this.getNumericXAxisHeight(CN,true):0;if(this.hasFooterInX&&!this.isFooterAbove){AS+=this.view.textHeightInX+2*x;}}else{AS=this.getCategoricalXAxisHeight(CN);if(this.hasFooterInX){AS+=this.view.textHeightInX+2*x;}}return AS;},getXAxis2Height:function(CO){var CM,CN=this.view,CP=CN.rowHeaderMaxHeightWithoutX2;if(!this.haveX2){return CP;}if(this.isBubbleOrScatter()){CM=this.axisLayout;if((CM&P)===0){return CP;}}var AS=this.drawX2Numeric?this.getNumericXAxisHeight(CO,false):0;if(this.hasFooterInX&&!this.isFooterAbove){AS+=this.view.textHeightInX+2*x;}return Math.max(CP,AS);},getCategoricalXAxisHeight:function(AS){return this.getNumericXAxisHeight(AS,true);},getNumericXAxisHeight:function(CS,CR){var CM=0,AS=this.getControllerAPI(L.GET_CHART_WIDTH),CP,CO,CT;var CQ=this.getChartCountInRow(),CN=this.view.getWidgetPropertyValue(AX.SCALE_CHART_WIDTH);CQ=Math.min(CQ,h);for(CP=0;CP<CQ;CP++){CO=U.call(this,0,CP);CT=this.getSingleXAxisHeight(AS(0,CP)*CN,CO,0,CP,CS,CR);CM=Math.max(CM,CT);}return CM;},getSingleYAxisWidth:function(CP,CN,AS,CR,CS){var CQ=this.getAxisChartInstance(CN,AS,CR,"y",CS,0,CP,true),CM;if(CQ===null){return 0;}CM=CQ.GetUniformYAxisWidth(CP,-1,CS);var CO=BD.call(this,false,CS);CQ.echoCondenseStatus(CO,AS);var CT=CD.call(this,false,CS);CQ.echoLayoutPaddings(CT,AS);return CM;},getSingleXAxisHeight:function(CT,CM,AS,CP,CU,CQ){var CO=this.getAxisChartInstance(CM,AS,CP,"x",CQ,CT,0,true),CS;if(CO===null){return 0;}CS=CO.GetUniformXAxisHeight(CT,-1,CQ);var CN=BD.call(this,true,CQ);CO.echoCondenseStatus(CN,CP);var CR=CD.call(this,true,CQ);CO.echoLayoutPaddings(CR,CP);return CS;},getCategoricalColWidth:function(CQ){var CP=this.getXAxisLabels(CQ),CM=this.xLabelPlacement,AS=this.view.GMW,CN=this.view.layouter.minWidths,CO;CO=this.estimateXAxisSize(CP,CM,AS).width;if(CN&&CN[CQ]){CO=Math.max(CO,CN[CQ]);}return CO;},checkBarColumnsForAxisPadding:function s(CN,AS){var CR=this.getChartInfo(),CQ=this.hasBarChart,CO=this.isCombo,CM=CQ&&(CO||CR.sbtp===BW.EnumSubtype.AUTO||CR.sbtp===BW.EnumSubtype.CLUSTERED);var CP=-1;if(CQ){var CS=U.call(this,CN,AS);CP=CS.getGroupCount();if(CM){CP*=CS.innerGetSeriesCount();}CP+=0.5;}return CP;},getCategoricalRowHeight:function(CO){var CP=this.getYAxisLabels(CO);var CN=this.estimateYAxisSize(CP).height;var CM=this.checkBarColumnsForAxisPadding(CO,0);if(CM>0){CN+=2*Math.round(CN/(4*CM-2));}var AS=this.view.layouter.minHeights;if(AS&&AS[CO]){CN=Math.max(CN,AS[CO]);}return CN;},getColHeaderSummary:function(CO){if(this.colHdrSmrs[CO]){return this.colHdrSmrs[CO];}var CQ,CU,CP,AS,CN,CV,CW,CR=this.model,CS=this.getChartCountInRow(),CT=[];for(CQ=0;CQ<CS;CQ++){CV=this.mapFromChartToLDSIndex(CO,CQ).c;CW=CR.mapChartIndexToGrid(CV,CR.cp);CP=CR.getColHeaderObj(CW,CO);AS=CR.headerInfoToProp(1,CP,"n&id");CN=AS[0].id;CU=CR.getColTitleInfo()[CP.tui].id;CT.push(CN);}var CM={unit:CU,elements:CT};this.colHdrSmrs.push(CM);return CM;},getRowHeaderSummary:function(CN){if(this.rwHdrSmrs[CN]){return this.rwHdrSmrs[CN];}var CP,CO,CM,CW,AS,CR,CU,CQ=this.model,CT=this.getChartCountInCol(),CS=[];for(CP=0;CP<CT;CP++){CR=this.mapFromChartToLDSIndex(CP,CN).r;CU=CQ.mapChartIndexToGrid(CR,CQ.rp);CO=CQ.getRowHeaderObj(CU,CN);AS=CQ.headerInfoToProp(0,CO,"n&id");CM=AS[0].id;CW=CQ.getRowTitleInfo()[CO.tui].id;CS.push(CM);}var CV={unit:CW,elements:CS};this.rwHdrSmrs.push(CV);return CV;},getRowHeadersByCell:function AL(CV){var CX=this.model,Ca=CX.getMetricCount(),CO=CX.getUnitAttributesCountOnRow(),CS=CX.getUnitAttributesCountOnCol(),CR=["fi","headerID","headerText","id","idx","levelIndex","n","ui","tui"],CQ,CT,CZ,CM,CU,CW,CY,CP,CN,AS=[];if(CV){CT=CV.row-this.gts.col.length;CZ=CV.col-this.gts.row.length;CM=CZ%Ca;CU=CX.getMetricProp(undefined);CP=Ap.copy(CU[CM],{});CP.gvsRI=CT;CP.gvsCI=CZ;}else{return{metricObj:undefined,headers:undefined};}if(this.horizontalMode){CP.axis=B.DssAxisRows;if(this.specialSortable){CP.axis=B.DssAxisColumns;}for(CQ=0;CQ<CS;CQ++){CW=W.call(this,CQ);if(this.specialSortable&&CW.dropzones.indexOf("BreakBy")>=0){continue;}CY=Ap.copyProps(CR,CX.getColHeaderObj(CZ,CQ),{});CN=CX.headerInfoToProp(1,CY,"n&id");Ap.copy(CN[0],CY);AS.push(CY);}}else{CP.axis=B.DssAxisColumns;if(this.specialSortable){CP.axis=B.DssAxisRows;}for(CQ=0;CQ<CO;CQ++){CW=a.call(this,CQ);if(this.specialSortable&&CW.dropzones.indexOf("BreakBy")>=0){continue;}CY=Ap.copyProps(CR,CX.getRowHeaderObj(CT,CQ),{});CN=CX.headerInfoToProp(0,CY,"n&id");Ap.copy(CN[0],CY);AS.push(CY);}}return{metricObj:CP,headers:AS};},getMetricSortInfo:function CI(){var Cb=this.firstRes,CZ=Cb.gsi,CM=CZ.sorts[0],CS=CZ.sorts[1],CP=CM.concat(CS),CV=0,AS=1,CU=4,CY=4,CT,Ca,CR,CO,CN,CQ,CX,CW={};if(this.metricSortInfo){return this.metricSortInfo;}for(CT=0;CT<CP.length;CT++){CR=CP[CT];Ca=CR.key.split("!");CO=parseInt(Ca[CV]);CN=Ca[AS];CQ=Ca[CU];if(CO===CY){CX=CQ!==""?CQ.split(""):[];CW={metricId:CN,elements:CX,order:CR.isAsc};}}this.metricSortInfo=CW;return CW;},updateSortIndex:function R(AS){var CN=this.view,CM=CN.getWidgetPropertyValue(AX.SORT_INDEX);if(CM&&(CM.row!==AS.row||CM.col!==AS.col)){CN.setWidgetPropertyValue(AX.SORT_INDEX,AS);}},getUpdateMetricSortAction:function M(CO,AS,CN){var CQ,CM,CP=this.getChartInfo();this.sortingMetric=true;CM=this.getMetricSortDefinition(CO,AS);CQ=this.getSortActions(CM);if(CP.isABL&&CN){this.fakeSortActionsStackTotal(CQ);}return{act:"sortGM",nodeKey:this.view.k,subActions:CQ};},getControllerAPI:function Bf(CM){var Ci=this,CY=this.view,CU=Ci.getChartInfo(),CO=Ci.model;var AS=function(Cn,Cm){var Cq,Ck,Co=0;if(Cm instanceof Array){Cq=Cm[0];Ck=Cm[1];}else{Cq=+Cm;Ck=+Cm+1;}var Cp=function(){var Cr;for(Cr=Cq;Cr<Ck;Cr++){if(Ci.widthCache[Cr]===undefined){return false;}}return true;};var Cl;if(Ci.manager.isAsync&&Cp()===false){for(Cl=Cq;Cl<Ck;Cl++){if(Ci.widthCache[Cl]===undefined){Ci.manager.queryColWidth(Cl);Co+=Ci.manager.chartW||Ci.manager.master.chartW;}else{Co+=Ci.widthCache[Cl];}}}else{for(Cl=Cq;Cl<Ck;Cl++){if(Ci.widthCache[Cl]===undefined){Ci.widthCache[Cl]=Ci.getCategoricalColWidth(Cl);}Co+=Ci.widthCache[Cl];}}return Co;};var CR=function(Cn,Cm){var Cq,Ck,Co=0;if(Cn instanceof Array){Cq=Cn[0];Ck=Cn[1];}else{Cq=+Cn;Ck=+Cn+1;}var Cp=function(){var Cr;for(Cr=Cq;Cr<Ck;Cr++){if(Ci.heightCache[Cr]===undefined){return false;}}return true;};var Cl;if(Ci.manager.isAsync&&Cp()===false){for(Cl=Cq;Cl<Ck;Cl++){if(Ci.heightCache[Cl]===undefined){Ci.manager.queryRowHeight(Cl);Co+=Ci.manager.chartH||Ci.manager.master.chartH;}else{Co+=Ci.heightCache[Cl];}}}else{for(Cl=Cq;Cl<Ck;Cl++){if(Ci.heightCache[Cl]===undefined){Ci.heightCache[Cl]=Ci.getCategoricalRowHeight(Cl);}Co+=Ci.heightCache[Cl];}}return Co;};var Ce=function(Co,Cn){if(Cn===undefined){Cn=0;}var Cp=Ci.mapFromChartToLDSIndex(Co,0).r,Cr=CO.mapChartIndexToGrid(Cp,CO.rp),Ck=CO.getRowHeaderObj(Cr,Cn),Cs=CO.mapGridIndexToChart(Ck.o,CO.rp),Cq=CO.mapGridIndexToChart(Ck.o+Ck.rs-1,CO.rp),Cl=Cq-Cs+1,Cm=Ci.inChartLayout.r;Cs*=Cm;Cq=Cs+Cl*Cm-1;return[Cs,Cq];};var CZ=function(Co,Cn){if(Cn===undefined){Cn=0;}var Cq=Ci.mapFromChartToLDSIndex(0,Co).c,Cm=CO.mapChartIndexToGrid(Cq,CO.cp),Ck=CO.getColHeaderObj(Cm,Cn),Cs=CO.mapGridIndexToChart(Ck.o,CO.cp),Cp=CO.mapGridIndexToChart(Ck.o+Ck.cs-1,CO.cp),Cl=Cp-Cs+1,Cr=Ci.inChartLayout.c;Cs*=Cr;Cp=Cs+Cl*Cr-1;return[Cs,Cp];};var Ch=function(Cs,C6,Cy,C3,Cp,Co,Ck,Cr,Ct){var Cq,Cn,Cx,C2,Cu,C1,C5,Cm,C0,Cw=Ci.view,C4=Cw.getWidgetPropertyValue(BK.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cv=Cw.getWidgetPropertyValue(BK.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cl=Cw.getWidgetPropertyValue(BK.ROW_VALUES_SHOW);Cq=Ci.mapFromChartToLDSIndex(Cp,Co).r;Cn=CO.mapChartIndexToGrid(Cq,CO.rp);Cx=CO.getRowHeaderObj(Cn,Co);Cm=Cx.fid;C1=CO.headerInfoToProp(0,Cx,"n&id");C2=C1[0].n;Cu=C1[0].id;C5=Cx.tui;C0=CO.getRowTitleInfo()[C5];var Cz=document.createElement("div");Cz.setAttribute("row",Cp);Cz.setAttribute("col","0");Cz.setAttribute("rowSpan",Ck);Cz.setAttribute("colSpan",Cr);Cz.setAttribute("depth",Co);Cz.setAttribute("class",Ct);Cz.setAttribute("type",BX.GM_ROW_HEADER);Cz.setAttribute("text",C2);Cz.style.width=Cs+"px";Cz.style.height=C6+"px";Cz.style.top=Cy+"px";Cz.style.left=C3+"px";if(Cl){l.fillTextInDiv(Cz,{objType:b.ROW_HEADER_TEXT},C2,Cs,C6,false,Ci.rhStyles,C4,Cv);}l.fillBackgroundDiv(Cz);Cz.selectionInfo=[[{eid:Cu,v:C2,tid:C0.id,n:C0.n,isRowAttribute:true,tui:C5}]];Cz.identity=new mstrmojo.gm.HeaderCellIdentity({objType:b.ROW_HEADER,eid:Cu,v:C2,tid:C0.id,n:C0.n,tui:C5,fid:Cm,isRowAttribute:true,o:Cx.o,dpt:Cx.dpt,dei:Cx.dei,at:Cx.at});return Cz;};var CS=function(Ck,Cr,Cn,Ct,Cm){Ck.style.width=Cr+"px";Ck.style.height=Cn+"px";Ck.style.top=Ct+"px";Ck.style.left=Cm+"px";var Cq=Ci.view,Cs=Ck.getAttribute("text"),Cl=Cq.getWidgetPropertyValue(BK.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Co=Cq.getWidgetPropertyValue(BK.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cp=Cq.getWidgetPropertyValue(BK.COLUMN_VALUES_SHOW);Ck.innerHTML="";if(Cp){l.fillTextInDiv(Ck,{objType:b.COL_HEADER_TEXT},Cs,Cr,Cn,false,Ci.chStyles,Cl,Co);}l.fillBackgroundDiv(Ck);};var CT=function(Ck,Cr,Cn,Ct,Cm){Ck.style.width=Cr+"px";Ck.style.height=Cn+"px";Ck.style.top=Ct+"px";Ck.style.left=Cm+"px";var Cq=Ci.view,Cs=Ck.getAttribute("text"),Cl=Cq.getWidgetPropertyValue(BK.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Co=Cq.getWidgetPropertyValue(BK.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cp=Cq.getWidgetPropertyValue(BK.ROW_VALUES_SHOW);Ck.innerHTML="";if(Cp){l.fillTextInDiv(Ck,{objType:b.ROW_HEADER_TEXT},Cs,Cr,Cn,false,Ci.rhStyles,Cl,Co);}l.fillBackgroundDiv(Ck);};var Cg=function(Cs,C6,Cy,C3,Cq,Co,Ck,Cr,Ct){var Cp,Cn,Cx,C1,C2,Cu,C5,C0,Cm,Cw=Ci.view,C4=Cw.getWidgetPropertyValue(BK.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cv=Cw.getWidgetPropertyValue(BK.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cl=Cw.getWidgetPropertyValue(BK.COLUMN_VALUES_SHOW);Cp=Ci.mapFromChartToLDSIndex(Cq,Co).c;Cn=CO.mapChartIndexToGrid(Cp,CO.cp);Cx=CO.getColHeaderObj(Cn,Cq);Cm=Cx.fid;C1=CO.headerInfoToProp(1,Cx,"n&id");C2=C1[0].n;Cu=C1[0].id;C5=Cx.tui;C0=CO.getColTitleInfo()[C5];var Cz=document.createElement("div");Cz.setAttribute("row","0");Cz.setAttribute("col",Co);Cz.setAttribute("rowSpan",Ck);Cz.setAttribute("colSpan",Cr);Cz.setAttribute("depth",Cq);Cz.setAttribute("class",Ct);Cz.setAttribute("type",BX.GM_COL_HEADER);Cz.setAttribute("text",C2);Cz.style.width=Cs+"px";Cz.style.height=C6+"px";Cz.style.top=Cy+"px";Cz.style.left=C3+"px";if(Cl){l.fillTextInDiv(Cz,{objType:b.COL_HEADER_TEXT},C2,Cs,C6,false,Ci.chStyles,C4,Cv);}l.fillBackgroundDiv(Cz);Cz.selectionInfo=[[{eid:Cu,v:C2,tid:C0.id,n:C0.n,isRowAttribute:false,tui:C5}]];Cz.identity=new mstrmojo.gm.HeaderCellIdentity({objType:b.COL_HEADER,eid:Cu,v:C2,tid:C0.id,n:C0.n,tui:C5,fid:Cm,isRowAttribute:false,o:Cx.o,dpt:Cx.dpt,dei:Cx.dei,at:Cx.at});return Cz;};var Ca=function(Cv,C5,Cy,C4,Cr,Cq,Ck,Ct,Cw){var Cz,Cn,Cm,C2,Cp="",C0=document.createElement("div"),C1=[""],Co,Cu,C3=C1.length,Cx=Ci.view,Cl=Cx.getWidgetPropertyValue(BK.COLUMN_VALUES_SHOW);if(Ci.metricsType===AH.MetricsByColumn&&Ci.isFooterAbove){Cn=Ci.getYAxisInfo(Cr,Cq,Ci.haveY1);C1=Cn.items;if(CU.isPie){Co=Ci.getMetricsOnAngleBy();if(!Cn.isMetric){C1=CO.getMetricNamesFromIndex(Co);}Cu=CO.getMetricIDsFromIndex(Co);}C3=C1.length;Cp=BX.GM_COL_HEADER_EXTRA;}Cm=B9.YAxis;C2=Cq%C3;Cz=C1[C2];C0.setAttribute("row","0");C0.setAttribute("col",Cq);C0.setAttribute("rowSpan",Ck);C0.setAttribute("colSpan",Ct);C0.setAttribute("depth",Cr);C0.setAttribute("class",Cw);C0.setAttribute("type",Cp);C0.setAttribute("text",Cz);if(Cz!==""){C0.setAttribute("dzId",Cm);C0.setAttribute("dzIndex",C2);}C0.style.width=Cv+"px";C0.style.height=C5+"px";C0.style.top=Cy+"px";C0.style.left=C4+"px";if(Cl&&Cz!==""){l.fillTextInDiv(C0,{objType:b.COL_HEADER_TEXT},Cz,Cv,C5,false,Ci.chStyles);}l.fillBackgroundDiv(C0);if(Ci.metricsType===AH.MetricsByColumn&&Ci.isFooterAbove){if(CU.isPie){C0.selectionInfo={mid:Cu[Cq],midx:Co[Cq]};}else{var Cs=Cn.cellHandlers;C0.selectionInfo={mid:Cn.ids[C2],midx:Cn.mtsIdxArr[C2],cellHandle:Cs[C2]};}}return C0;};var Cb=function(Cs,C3,Cv,C1,Cp,Co,Ck,Cr,Ct){var Cw,C2,Cm,Cz,Cn="",Cx=document.createElement("div"),Cy=[""],C0=Cy.length,Cu=Ci.view,Cl=Cu.getWidgetPropertyValue(BK.ROW_VALUES_SHOW);if(Ci.metricsType===AH.MetricsByRow&&Ci.metricNamesOnRowMetricsOnXAxis){C2=Ci.getXAxisInfo(Cp,Co);Cy=C2.items;C0=Cy.length;Cn=BX.GM_ROW_HEADER_EXTRA;}Cm=B9.XAxis;Cz=Cp%C0;Cw=Cy[Cz];Cx.setAttribute("row",Cp);Cx.setAttribute("col",0);Cx.setAttribute("rowSpan",Ck);Cx.setAttribute("colSpan",Cr);Cx.setAttribute("depth",Co);Cx.setAttribute("class",Ct);Cx.setAttribute("type",Cn);Cx.setAttribute("text",Cw);if(Cw!==""){Cx.setAttribute("dzId",Cm);Cx.setAttribute("dzIndex",Cz);}Cx.style.width=Cs+"px";Cx.style.height=C3+"px";Cx.style.top=Cv+"px";Cx.style.left=C1+"px";if(Cl){l.fillTextInDiv(Cx,{objType:b.ROW_TITLE_TEXT},Cw,Cs,C3,false,Ci.rhStyles);}l.fillBackgroundDiv(Cx);if(Ci.metricsType===AH.MetricsByRow&&Ci.metricNamesOnRowMetricsOnXAxis){var Cq=C2.cellHandlers;Cx.selectionInfo={mid:C2.ids[Cz],midx:C2.mtsIdxArr[Cz],cellHandle:Cq[Cz]};}return Cx;};var Cj=function(Ck,Cr,Cn,Ct,Cm){Ck.style.width=Cr+"px";Ck.style.height=Cn+"px";Ck.style.top=Ct+"px";Ck.style.left=Cm+"px";var Cq=Ci.view,Cs=Ck.getAttribute("text"),Cl=Cq.getWidgetPropertyValue(BK.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Co=Cq.getWidgetPropertyValue(BK.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cp=Cq.getWidgetPropertyValue(BK.ROW_VALUES_SHOW);Ck.innerHTML="";if(Cp){l.fillTextInDiv(Ck,{objType:b.ROW_HEADER_TEXT},Cs,Cr,Cn,false,Ci.rhStyles,Cl,Co);}l.fillBackgroundDiv(Ck);};var CN=function(DD,DN,DG,DK,Cx,Cr,DO,Cn,DH,Co,DI){if(Ci.metricNamesOnRowMetricsOnXAxis){DH="gm-rowheader-cell-dummy";return Cb(DD,DN,DG,DK,Cx,Cr,DO,Cn,DH);}var DP=document.createElement("div");DP.setAttribute("class",DH);DP.setAttribute("row",Cx);DP.setAttribute("col",Cr);DP.setAttribute("rowSpan",DO);DP.setAttribute("colSpan",Cn);if(Ci.clusteredBarSpecialCase){DP.setAttribute("type",BX.GM_Y_NUMERIC);}else{DP.setAttribute("type",Ci.yIsNumeric?BX.GM_Y_NUMERIC:BX.GM_Y_CATEGORY);}DP.style.width=DD+"px";DP.style.height=DN+"px";DP.style.top=DG+"px";DP.style.left=DK+"px";DP.style.backgroundColor="rgba(0,0,0,0)";DP.drawAxis=true;if(Cx%2===1&&Ci.view.getWidgetPropertyValue(AX.BANDING)){Bb.addClass(DP,"banding");}var DM,C6,C4,DV,DR,Ck,DB,C9,DU,Cw,Cl=B9.YAxis,C7,C0,DQ=[],DE=0,C2=false,Cv=false,Cm,C1,DC,C3,DF,C8,Cy=Ci.isGrid(),DL=Ci.isPie,DA=Ci.haveX1,DJ=CU.isABL&&Ci.splitPlottingMetrics;DV=Ci.mapFromChartToLDSIndex(Cx,Cr);DR=Ci.getXAxisInfo(Cx,Cr,true,DJ);Ck=Ci.getXAxisInfo(Cx,Cr,false,DJ);DB=Ci.getYAxisInfo(Cx,Cr,Co,DJ);if(Cy&&DL){DU=Ci.model.getMetricNamesFromIndex(Ci.getMetricsOnAngleBy());Cl=B9.Angle;}else{if(DB.isMetric){DU=DB.items;C0=DB.cellHandlers;}else{DU=[];}}if(DB.isMetric&&CU.isABL&&Ci.splitPlottingMetrics){C2=true;if(DB.mtsIdxArr[DV.inchtRow]<0){Cv=true;}}if(DB.isMetric&&!Cv){if(Co===false){C8=Ai(Ci.getMetricsOnAxisOfChart(Cx,Cr,"y",false));}else{C8=Ai(Ci.getMetricsOnAxisOfChart(Cx,Cr,"y",true));}DP.drawAxis=true;By.forEach(C8,function(DX){if(DX===undefined||DX<0){DP.drawAxis=false;}else{var DW=Co?"YAxis":"Y2Axis";if(A6.call(Ci,DX,DW)===Bn.PERCELL){DP.drawAxis=(Ci.getChartCountInRow()===1);}}});DF=new BW.AxisIdentity({isNumericAxis:true,objType:b.Y_NUMERIC,metricIdxArr:C8});}else{if(!DB.isMetric){DF=new BW.AxisIdentity({isNumericAxis:false,objType:b.Y_CATEGORY,attrIdArr:DB.ids});}}if(!Cv&&Ci.hasHeaderInY){if(DU.length===0&&DR.isMetric){DU=DA?DR.items:Ck.items;C0=DA?DR.cellHandlers:Ck.cellHandlers;Cl=B9.XAxis;}Cw=DU.length;DE=Ci.view.textHeightInY+2*x;C9=document.createElement("div");DP.metrics=[];var Cs,DT,DS=[],C5=[];if(Ci.combineMetricNameInY){for(DM=0;DM<Cw;DM++){C5.push(DM);DP.metrics.push(DU[DM]);}}else{if(C2){C7=DV.inchtRow;}else{C7=Cx%Cw;}C5.push(C7);DP.metrics.push(DU[C7]);}for(DM=0;DM<C5.length;DM++){C7=C5[DM];C6=DU[C7];Cs={};Cs.extraAttributes={};C4=Cs.extraAttributes;Cs.text=C6;C4.dzId=Cl;C4.dzIndex=C7;C4.type=BX.GM_YLABEL;if(CU.isABL&&C0){if(C0[C7]){DC=(C0[C7].col-Ci.gts.row.length)%CO.getMetricCount();DT=Ci.getMetricInGSIMx(DC);Cm=CO.getMetricIDsFromIndex([DC])[0];C1=CO.getMetricIDFromIndex(DC);C4.selectionInfo=C4.identity=new BW.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:C1,midx:DC,cellHandle:C0[C7],objType:b.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cm]){C3[Cm]=C4.selectionInfo;}}else{C4.selectionInfo=C4.identity=new BW.MetricAxisTitleIdentity({objType:b.Y_METRIC_AXIS_TITLE});}if(Ar.call(Ci,C4.selectionInfo)){Cs.sort=true;C4.sort=true;C4.sortOrder=Ci.metricSortInfo.order;C9.innerHTML+=Ci.metricSortInfo.order?"asc":"desc";}}else{if(CU.isBubbleOrScatter){DC=DB.mtsIdxArr[C7];DT=Ci.getMetricInGSIMx(DC);Cm=CO.getMetricIDsFromIndex([DC])[0];C1=CO.getMetricIDFromIndex(DC);C4.selectionInfo=C4.identity=new BW.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:C1,midx:DC,objType:b.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cm]){C3[Cm]=C4.selectionInfo;}}}C4.customScale=(A6.call(Ci,DC,"YAxis")===Bn.CUSTOM);DQ.push(C4.selectionInfo);DS.push(Cs);}DP.appendChild(C9);var Cz=new mstrmojo.VisAxisLabel({placeholder:C9,width:DN+"px",height:Ci.view.textHeightInY+"px",cssClass:"gm-yaxis-cell-label",styles:Ci.yTitleStyles,align:Co?"left":"right",contentData:DS});Cz.render();Cz.parent=CY;Ci.addDisposable(Cz);if(C5.length===1){DP.labelDiv=Cz.domNode;}else{DP.combinedLabelDiv=Cz.domNode;}}else{if(!Cv&&DB.isMetric){if(DU.length===0&&DR.isMetric){DU=DA?DR.items:Ck.items;C0=DA?DR.cellHandlers:Ck.cellHandlers;Cl=B9.XAxis;}Cw=DU.length;DP.metrics=[];var C5=[];for(DM=0;DM<Cw;DM++){C5.push(DM);DP.metrics.push(DU[DM]);}for(DM=0;DM<C5.length;DM++){C7=C5[DM];C6=DU[C7];C4={};C4.dzId=Cl;C4.dzIndex=C7;C4.type=BX.GM_YLABEL;if(CU.isABL&&C0){if(C0[C7]){DC=(C0[C7].col-Ci.gts.row.length)%CO.getMetricCount();Cm=CO.getMetricIDsFromIndex([DC])[0];C1=CO.getMetricIDFromIndex(DC);C4.selectionInfo=C4.identity=new BW.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:C1,midx:DC,cellHandle:C0[C7],objType:b.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cm]){C3[Cm]=C4.selectionInfo;}}else{C4.selectionInfo=C4.identity=new BW.MetricAxisTitleIdentity({objType:b.Y_METRIC_AXIS_TITLE});}}else{if(CU.isBubbleOrScatter){DC=DB.mtsIdxArr[C7];Cm=CO.getMetricIDsFromIndex([DC])[0];C1=CO.getMetricIDFromIndex(DC);C4.selectionInfo=C4.identity=new BW.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:C1,midx:DC,objType:b.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cm]){C3[Cm]=C4.selectionInfo;}}}DQ.push(C4.selectionInfo);}}}DP.selectionInfos=DQ;var Cu=AO(DD,DN,DE,"y",Co);DP.setAttribute("isPrimary",Co);DP.appendChild(Cu);if(!Cv&&DP.drawAxis){var Ct=Ci.view.getWidgetPropertyValue(Co?AX.SCALE_Y:AX.SCALE_Y2),Cp=Ct!==undefined&&Ct!==1;Ci.drawYAxis(Cu,DD-DE,DN,Cx,DV.r,Cr,false,DV.dpIdx,Cp,Co,DI,Ci.hasHeaderInY);}else{if(Ci.view.getWidgetPropertyValue(AX.BANDING)){var Cq=[{Start:0,Size:DN}];Ci.drawInChartBanding(DP,Cq,Ci.bandingFlags[Cx]);}}DP.subRegion=DI;if(DF){DP.identity=DF;}return DP;};var CW=function(DC,DL,DF,DJ,Cx,Cr,DM,Co,DG,Cp,DH){var DN=document.createElement("div");DN.setAttribute("row",Cx);DN.setAttribute("col",Cr);DN.setAttribute("rowSpan",DM);DN.setAttribute("colSpan",Co);DN.setAttribute("class",DG);if(Ci.clusteredBarSpecialCase){DN.setAttribute("type",BX.GM_X_NUMERIC);}else{DN.setAttribute("type",Ci.xIsNumeric?BX.GM_X_NUMERIC:BX.GM_X_CATEGORY);}DN.innerHTML="";DN.style.width=DC+"px";DN.style.height=DL+"px";DN.style.top=DF+"px";DN.style.left=DJ+"px";DN.style.backgroundColor="rgba(0,0,0,0)";DN.drawAxis=true;var DT=Ci.mapFromChartToLDSIndex(Cx,Cr),DI=CU.isABL&&Ci.splitPlottingMetrics,DP=Ci.getXAxisInfo(Cx,Cr,Cp,DI),DA=Ci.getYAxisInfo(Cx,Cr,true,DI),C5=Ci.getYAxisInfo(Cx,Cr,false,DI),Cw=Ci.haveY1,DD=0,C9,Cv,Cl=B9.XAxis,C7,DS,Cy,DO=[],C0=false,Cu=false,Cn,Cz,DB,C1,C8,DE;if(DP.isMetric){DS=DP.items;Cy=DP.cellHandlers;}else{DS=[];}if(DP.isMetric&&CU.isABL&&Ci.splitPlottingMetrics){C0=true;if(DP.mtsIdxArr[DT.inchtCol]<0){Cu=true;}}if(DP.isMetric&&!Cu){if(Cp===false){C8=Ai(Ci.getMetricsOnAxisOfChart(Cx,Cr,"x",false));}else{C8=Ai(Ci.getMetricsOnAxisOfChart(Cx,Cr,"x",true));}DN.drawAxis=true;By.forEach(C8,function(DW){if(DW===undefined||DW<0){DN.drawAxis=false;}else{var DV=Cp?"XAxis":"X2Axis";if(A6.call(Ci,DW,DV)===Bn.PERCELL){DN.drawAxis=(Ci.getChartCountInCol()===1);}}});DE=new BW.AxisIdentity({isNumericAxis:true,objType:b.X_NUMERIC,metricIdxArr:C8});}else{if(!DP.isMetric){DE=new BW.AxisIdentity({isNumericAxis:false,objType:b.X_CATEGORY,attrIdArr:DP.ids});}}if(!Cu&&Ci.hasFooterInX){var DK,C6,C2,Cs,DR,DQ=[],C4=[],Cq;C9=document.createElement("div");DD=Ci.view.textHeightInX+2*x;if(DP.isMetric&&!Ci.isFooterAbove){DN.appendChild(C9);if(DS.length===0&&DA.isMetric){DS=Cw?DA.items:C5.items;Cy=Cw?DA.cellHandlers:C5.cellHandlers;Cl=B9.YAxis;}Cv=DS.length;DN.metrics=[];if(Ci.combineMetricNameInX){for(DK=0;DK<Cv;DK++){C4.push(DK);DN.metrics.push(DS[DK]);}}else{if(C0){C7=DT.inchtCol;}else{C7=Cr%Cv;}C4.push(C7);DN.metrics.push(DS[C7]);}for(DK=0;DK<C4.length;DK++){C7=C4[DK];C6=DS[C7];Cs={};Cs.extraAttributes={};C2=Cs.extraAttributes;Cs.text=C6;C2.dzId=Cl;C2.dzIndex=C7;C2.type=BX.GM_XLABEL;if(CU.isABL&&Cy){if(Cy[C7]){DB=(Cy[C7].col-Ci.gts.row.length)%CO.getMetricCount();DR=Ci.getMetricInGSIMx(DB);Cn=CO.getMetricIDsFromIndex([DB])[0];Cz=CO.getMetricIDFromIndex(DB);C2.selectionInfo=C2.identity=new BW.MetricAxisTitleIdentity({n:C6,mid:Cn,mOriId:Cz,midx:DB,cellHandle:Cy[C7],objType:b.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}else{C2.selectionInfo=C2.identity=new BW.MetricAxisTitleIdentity({objType:b.X_METRIC_AXIS_TITLE});}if(Ar.call(Ci,C2.selectionInfo)){Cs.sort=true;C2.sort=true;C2.sortOrder=Ci.metricSortInfo.order;C9.innerHTML=Ci.metricSortInfo.order?"asc":"desc";}}else{if(CU.isBubbleOrScatter){DB=DP.mtsIdxArr[C7];DR=Ci.getMetricInGSIMx(DB);Cn=CO.getMetricIDsFromIndex([DB])[0];C2.selectionInfo=C2.identity=new BW.MetricAxisTitleIdentity({n:C6,mid:Cn,midx:DB,objType:b.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}}C2.customScale=(A6.call(Ci,DB,"XAxis")===Bn.CUSTOM);DO.push(C2.selectionInfo);DQ.push(Cs);}Cq=new mstrmojo.VisAxisLabel({placeholder:C9,width:DC+"px",height:Ci.view.textHeightInX+"px",cssClass:(Cp?"gm-xaxis-cell-label":"gm-x2axis-cell-label"),styles:Ci.xTitleStyles,align:Cp?"bottom":"top",contentData:DQ});Cq.render();Cq.parent=CY;if(!Cp&&!Ci.drawX2Numeric){var Cm=Cq.domNode,Ck={};Ck.top=(DL-DD)>>1;B4.positionDomNode(Cm,Ck);}Ci.addDisposable(Cq);if(C4.length===1){DN.labelDiv=Cq.domNode;}else{DN.combinedLabelDiv=Cq.domNode;}}else{if(!DP.isMetric){DN.appendChild(C9);DQ=[];if(DP.items.length>0){By.forEach(DP.items,function(DW,DV){Cs={text:DW,extraAttributes:{type:BX.GM_XLABEL,dzId:B9.XAxis,dzIndex:DV,identity:new BW.AttributeAxisTitleIdentity({n:DW,tid:DP.ids[DV],objType:b.X_ATTRIBUTE_AXIS_TITLE})}};DQ.push(Cs);});}Cq=new mstrmojo.VisAxisLabel({placeholder:C9,width:DC+"px",height:Ci.view.textHeightInX+"px",cssClass:"gm-xaxis-cell-label",styles:Ci.xTitleStyles,align:"bottom",contentData:DQ});Cq.render();Cq.parent=CY;Ci.addDisposable(Cq);if(DQ.length===1){DN.labelDiv=Cq.domNode;}else{if(DQ.length>1){DN.combinedLabelDiv=Cq.domNode;}}}}}else{if(!Cu&&!Ci.hasFooterInX&&DP.isMetric){if(DS.length===0&&DA.isMetric){DS=Cw?DA.items:C5.items;Cy=Cw?DA.cellHandlers:C5.cellHandlers;Cl=B9.YAxis;}Cv=DS.length;DN.metrics=[];var DK,C6,C2,C4=[];for(DK=0;DK<Cv;DK++){C4.push(DK);DN.metrics.push(DS[DK]);}for(DK=0;DK<C4.length;DK++){C7=C4[DK];C6=DS[C7];C2={};C2.dzId=Cl;C2.dzIndex=C7;C2.type=BX.GM_XLABEL;if(CU.isABL&&Cy){DB=(Cy[C7].col-Ci.gts.row.length)%CO.getMetricCount();Cn=CO.getMetricIDsFromIndex([DB])[0];C2.selectionInfo=C2.identity=new BW.MetricAxisTitleIdentity({n:C6,mid:Cn,midx:DB,cellHandle:Cy[C7],objType:b.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}else{if(CU.isBubbleOrScatter){DB=DP.mtsIdxArr[C7];Cn=CO.getMetricIDsFromIndex([DB])[0];Cz=CO.getMetricIDFromIndex(DB);C2.selectionInfo=C2.identity=new BW.MetricAxisTitleIdentity({n:C6,mid:Cn,mOriId:Cz,midx:DB,objType:b.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}}DO.push(C2.selectionInfo);}}}DN.selectionInfos=DO;var Ct=AO(DC,DL,DD,"x",Cp);DN.setAttribute("isPrimary",Cp);DN.appendChild(Ct);if(!Cu&&DN.drawAxis){var DU=Ci.view.getWidgetPropertyValue(Cp?AX.SCALE_X:AX.SCALE_X2),C3=DU!==undefined&&DU!==1;Ci.drawXAxis(Ct,DC,DL-DD,Cx,Cr,DT.c,false,DT.dpIdx,C3,Cp,DH);}DN.subRegion=DH;if(DE){DN.identity=DE;}return DN;};var CQ=function(){var Cr,Cq,Ct,Cp,Cw,Cx,Cn,Cm=Ci.getChartInfo(),Cy=Cm.isBubbleOrScatter&&this.hasSizeBy(),Cl=Cm.isBubbleOrScatter&&!this.hasSizeBy(),Co=false;Ci.dataAreaPaddingGlobalZero=CH.call(this,CU);if(Ci.dataAreaPaddingGlobalZero){return ;}Ci.maxRowPadding=undefined;Ci.maxColPadding=undefined;if(Ci.maxDataAreaPaddingCache){delete Ci.maxDataAreaPaddingCache;}var Ck=Ci.maxDataAreaPaddingCache=[];Cw=Ci.getChartCountInCol();Cx=Ci.getChartCountInRow();Cy=Cy&&(Cx*Cw>=1);var Cs=Math.min(Cw,At),Cv=Math.min(Cx,h);for(Cr=0;Cr<Cs;Cr++){Cn=[];Ck.push(Cn);for(Cq=0;Cq<Cv;Cq++){Co=CF.call(this,CU,Cr,Cq);if(Co){Cn.push(Ap.clone(E));}else{if(Cl){Ct=Ct||Ci.queryChartInstance(0,0,false,true);Cp=Cp||Ct.GetDataAreaPadding();}else{if(Cy){var Cu={purpose:"clipping"};Ct=Ci.getSharedChartInstance(Cr,Cq,Cu);}else{Ct=Ci.queryChartInstance(Cr,Cq,false,true);}Cp=Ct.GetDataAreaPadding();}Cn.push(Cp);}}}};var CV=function(Ct,Co,Cu,Cm,Cv,Cl,Cs,Cn,Cp,Cr,Cq){var Ck=document.createElement("div");Ck.setAttribute("chartDiv",1);Ck.svg=!this.useCECanvas;Ck.setAttribute("row",Cv);Ck.setAttribute("col",Cl);Ck.setAttribute("rowSpan",Cs);Ck.setAttribute("colSpan",Cn);Ck.setAttribute("class",Cp);Ck.setAttribute("type",BX.GM_MINI_CHART);Ck.innerHTML="";Ck.style.width=Ct+"px";Ck.style.height=Co+"px";Ck.style.top=Cu+"px";Ck.style.left=Cm+"px";if(Ci.view.getWidgetPropertyValue(AX.BANDING)&&!Ci.bandings[Cv]){Ci.bandings[Cv]=[{Start:0,Size:Co}];}Ci.drawOnDiv(Ck,Ct,Co,Cv,Cl,true,Cp,Cq);l.fillBackgroundDiv(Ck);if(Cv%2===1&&Ci.view.getWidgetPropertyValue(AX.BANDING)){Bb.addClass(Ck,"banding");}Ck.subRegion=Cq;return Ck;};var CX=function(Cl,Cs,Co,Cv,Cn,Cq,Cr){var Cu=false;var Cm=parseInt(Cl.style.width,10);var Ct=parseInt(Cl.style.height,10);if(Cs&&Cl.style.width!==Cs+"px"){Cl.style.width=Cs+"px";Cm=Cs;Cu=true;}if(Co&&Cl.style.height!==Co+"px"){Cl.style.height=Co+"px";Ct=Co;Cu=true;}if(Cv){Cl.style.top=Cv+"px";}if(Cn){Cl.style.left=Cn+"px";}if(Ci.enablePartialRendering&&!BR(Cl.subRegion,Cr)){Cu=true;Cl.subRegion=Cr;}var Ck=parseInt(Cl.getAttribute("row"),10),Cp=parseInt(Cl.getAttribute("col"),10);if(Ck%2===1&&Ci.view.getWidgetPropertyValue(AX.BANDING)){Bb.addClass(Cl,"banding");}else{Bb.removeClass(Cl,"banding");}if(Cu){Cl.innerHTML="";Ci.drawOnDiv(Cl,Cm,Ct,Ck,Cp,true,"",Cr);l.fillBackgroundDiv(Cl);}};var Cf=function(DP,DF,DO,DH,DL,Cp,DJ){if(Ci.metricNamesOnRowMetricsOnXAxis){return Cj(DP,DF,DO,DH,DL);}var DN,Cr=false,Cl=B9.YAxis,C8;var C5=parseInt(DP.style.width,10);var DD=parseInt(DP.style.height,10);if(DF&&DP.style.width!==DF+"px"){DP.style.width=DF+"px";C5=DF;Cr=true;}if(DO&&DP.style.height!==DO+"px"){DP.style.height=DO+"px";DD=DO;Cr=true;}if(DH){DP.style.top=DH+"px";}if(DL){DP.style.left=DL+"px";}var DI=parseInt(DP.getAttribute("row"),10);var DT=parseInt(DP.getAttribute("col"),10);var DV=Ci.mapFromChartToLDSIndex(DI,DT);if(DI%2===1&&Ci.view.getWidgetPropertyValue(AX.BANDING)){Bb.addClass(DP,"banding");}else{Bb.removeClass(DP,"banding");}if(Ci.enablePartialRendering&&!BR(DP.subRegion,DJ)){Cr=true;DP.subRegion=DJ;}if(Cr||Ci.forceUpdateAxis()){var DK=CU.isABL&&Ci.splitPlottingMetrics,DR=Ci.getXAxisInfo(DI,DT,true,DK),Ck=Ci.getXAxisInfo(DI,DT,false,DK),DC=Ci.getYAxisInfo(DI,DT,Cp,DK),DG=0,C9,DA,DQ=[],Cw,Co,DU,C2,Cx=Ci.isGrid(),DM=Ci.isPie,DB=Ci.haveX1,C1=false,Cv=false;if(Cx&&DM){C2=Ci.getMetricsOnAngleBy();DU=Ci.model.getMetricNamesFromIndex(C2);Cl=B9.Angle;}else{if(DC.isMetric){C2=DC.mtsIdxArr;DU=DC.items;}else{C2=[];DU=[];}}if(DC.isMetric&&CU.isABL&&Ci.splitPlottingMetrics){C1=true;if(DC.mtsIdxArr[DV.inchtRow]<0){Cv=true;}}DP.innerHTML="";var Cz=DC.cellHandlers,DE,Cn,C0,C3;if(!Cv&&Ci.hasHeaderInY){if(!DO){DO=DP.clientHeight;}if(DU.length===0&&DR.isMetric){DU=DB?DR.items:Ck.items;C2=DB?(DR.isMetric?DR.mtsIdxArr:[]):(Ck.isMetric?Ck.mtsIdxArr:[]);Cl=B9.XAxis;}Cw=DU.length;DG=Ci.view.textHeightInY+2*x;C9=document.createElement("div");Co=Ci.model.getMetricIDsFromIndex(C2);DP.metrics=[];var C7,C4,Cs,DS=[],C6=[];if(Ci.combineMetricNameInY){for(DN=0;DN<Cw;DN++){C6.push(DN);DP.metrics.push(DU[DN]);}}else{if(C1){C8=DV.inchtRow;}else{C8=DI%Cw;}C6.push(C8);DP.metrics.push(DU[C8]);}for(DN=0;DN<C6.length;DN++){C8=C6[DN];C7=DU[C8];DA=Ci.metricSelectionInfo[Co[C8]];Cs={};Cs.extraAttributes={};C4=Cs.extraAttributes;Cs.text=C7;C4.dzId=Cl;C4.dzIndex=C8;C4.type=BX.GM_YLABEL;DQ.push(DA);if(DA){C4.selectionInfo=C4.identity=DA;if(Ar.call(Ci,C4.selectionInfo)){Cs.sort=true;C4.sort=true;C4.sortOrder=Ci.metricSortInfo.order;C9.innerHTML+=Ci.metricSortInfo.order?"asc":"desc";}C4.customScale=(A6.call(Ci,C4.selectionInfo.midx,"YAxis")===Bn.CUSTOM);}DS.push(Cs);}DP.appendChild(C9);var Cy=new mstrmojo.VisAxisLabel({placeholder:C9,width:DO+"px",height:Ci.view.textHeightInY+"px",cssClass:"gm-yaxis-cell-label",styles:Ci.yTitleStyles,align:Cp?"left":"right",contentData:DS});Cy.render();Cy.parent=CY;Ci.addDisposable(Cy);if(C6.length===1){DP.labelDiv=Cy.domNode;DP.combinedLabelDiv=undefined;}else{DP.labelDiv=undefined;DP.combinedLabelDiv=Cy.domNode;}}else{if(!Cv&&DC.isMetric){if(DU.length===0&&DR.isMetric){DU=DB?DR.items:Ck.items;Cz=DB?DR.cellHandlers:Ck.cellHandlers;Cl=B9.XAxis;}Cw=DU.length;DP.metrics=[];var C6=[];for(DN=0;DN<Cw;DN++){C6.push(DN);DP.metrics.push(DU[DN]);}for(DN=0;DN<C6.length;DN++){C8=C6[DN];C7=DU[C8];C4={};C4.dzId=Cl;C4.dzIndex=C8;C4.type=BX.GM_YLABEL;if(CU.isABL&&Cz){if(Cz[C8]){DE=(Cz[C8].col-Ci.gts.row.length)%CO.getMetricCount();Cn=CO.getMetricIDsFromIndex([DE])[0];C0=CO.getMetricIDFromIndex(DE);C4.selectionInfo=C4.identity=new BW.MetricAxisTitleIdentity({n:C7,mid:Cn,mOriId:C0,midx:DE,cellHandle:Cz[C8],objType:b.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cn]){C3[Cn]=C4.selectionInfo;}}else{C4.selectionInfo=C4.identity=new BW.MetricAxisTitleIdentity({objType:b.Y_METRIC_AXIS_TITLE});}}else{if(CU.isBubbleOrScatter){DE=DC.mtsIdxArr[C8];Cn=CO.getMetricIDsFromIndex([DE])[0];C0=CO.getMetricIDFromIndex(DE);C4.selectionInfo=C4.identity=new BW.MetricAxisTitleIdentity({n:C7,mid:Cn,mOriId:C0,midx:DE,objType:b.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cn]){C3[Cn]=C4.selectionInfo;}}}DQ.push(C4.selectionInfo);}}}DP.selectionInfos=DQ;var Cu=AO(C5,DD,DG,"y",Cp);DP.setAttribute("isPrimary",Cp);DP.appendChild(Cu);if(!Cv&&DP.drawAxis){var Ct=Ci.view.getWidgetPropertyValue(Cp?AX.SCALE_Y:AX.SCALE_Y2),Cm=Ct!==undefined&&Ct!==1;Ci.drawYAxis(Cu,C5-DG,DD,DI,DV.r,DT,true,DV.dpIdx,Cm,Cp,DJ);}else{if(Ci.view.getWidgetPropertyValue(AX.BANDING)){var Cq=[{Start:0,Size:DO}];Ci.drawInChartBanding(DP,Cq,Ci.bandingFlags[DI]);}}}};var CP=function(DN,DE,DM,DG,DK,Cp,DI){var Cr=false,DS,Cl=B9.XAxis,DA,DO=[],Co,C8;var C4=parseInt(DN.style.width,10);var DC=parseInt(DN.style.height,10);if(DE&&DN.style.width!==DE+"px"){DN.style.width=DE+"px";C4=DE;Cr=true;}if(DM&&DN.style.height!==DM+"px"){DN.style.height=DM+"px";DC=DM;Cr=true;}if(DG){DN.style.top=DG+"px";}if(DK){DN.style.left=DK+"px";}if(Ci.enablePartialRendering&&!BR(DN.subRegion,DI)){Cr=true;DN.subRegion=DI;}var DH=parseInt(DN.getAttribute("row"),10);var DR=parseInt(DN.getAttribute("col"),10);var DT=Ci.mapFromChartToLDSIndex(DH,DR);if(Cr||Ci.forceUpdateAxis()){var DJ=CU.isABL&&Ci.splitPlottingMetrics,DP=Ci.getXAxisInfo(DH,DR,Cp,DJ),DB=Ci.getYAxisInfo(DH,DR,true,DJ),C6=Ci.getYAxisInfo(DH,DR,false,DJ),Cw=Ci.haveY1,DF=0,C9,Cv,Cz=false,Cu=false;DS=DP.isMetric?DP.items:[];var C0=DP.isMetric?DP.mtsIdxArr:[];if(DP.isMetric&&CU.isABL&&Ci.splitPlottingMetrics){Cz=true;if(DP.mtsIdxArr[DT.inchtCol]<0){Cu=true;}}DN.innerHTML="";var Cx=DP.cellHandlers,DD,Cn,Cy,C1;if(!Cu&&Ci.hasFooterInX){if(!DE){DE=DN.clientWidth;}var DL,C7,C2,Cs,DQ=[],C5=[],Cq;C9=document.createElement("div");DF=Ci.view.textHeightInX+2*x;if(DP.isMetric&&!Ci.isFooterAbove){DN.appendChild(C9);if(DS.length===0&&DB.isMetric){DS=Cw?DB.items:C6.items;C0=Cw?(DB.isMetric?DB.mtsIdxArr:[]):(C6.isMetric?C6.mtsIdxArr:[]);Cl=B9.YAxis;}Cv=DS.length;Co=Ci.model.getMetricIDsFromIndex(C0);DN.metrics=[];if(Ci.combineMetricNameInX){for(DL=0;DL<Cv;DL++){C5.push(DL);DN.metrics.push(DS[DL]);}}else{if(Cz){C8=DT.inchtCol;}else{C8=DR%Cv;}C5.push(C8);DN.metrics.push(DS[C8]);}for(DL=0;DL<C5.length;DL++){C8=C5[DL];C7=DS[C8];DA=Ci.metricSelectionInfo[Co[C8]];Cs={};Cs.extraAttributes={};C2=Cs.extraAttributes;Cs.text=C7;C2.dzId=Cl;C2.dzIndex=C8;C2.type=BX.GM_XLABEL;DO.push(DA);if(DA){C2.selectionInfo=C2.identity=DA;if(Ar.call(Ci,C2.selectionInfo)){Cs.sort=true;C2.sort=true;C2.sortOrder=Ci.metricSortInfo.order;C9.innerHTML+=Ci.metricSortInfo.order?"asc":"desc";}}C2.customScale=(A6.call(Ci,C2.selectionInfo.midx,"XAxis")===Bn.CUSTOM);DQ.push(Cs);}Cq=new mstrmojo.VisAxisLabel({placeholder:C9,width:DE+"px",height:Ci.view.textHeightInX+"px",cssClass:(Cp?"gm-xaxis-cell-label":"gm-x2axis-cell-label"),styles:Ci.xTitleStyles,align:Cp?"bottom":"top",contentData:DQ});Cq.render();Cq.parent=CY;if(!Cp&&!Ci.drawX2Numeric){var Cm=Cq.domNode,Ck={};Ck.top=(DM-DF)>>1;B4.positionDomNode(Cm,Ck);}Ci.addDisposable(Cq);if(C5.length===1){DN.labelDiv=Cq.domNode;DN.combinedLabelDiv=undefined;}else{DN.labelDiv=undefined;DN.combinedLabelDiv=Cq.domNode;}}else{if(!DP.isMetric){DN.appendChild(C9);DQ=[];if(DP.items.length>0){By.forEach(DP.items,function(DW,DV){Cs={text:DW,extraAttributes:{type:BX.GM_XLABEL,dzId:B9.XAxis,dzIndex:DV,identity:new BW.AttributeAxisTitleIdentity({n:DW,tid:DP.ids[DV],objType:b.X_ATTRIBUTE_AXIS_TITLE})}};DQ.push(Cs);});}Cq=new mstrmojo.VisAxisLabel({placeholder:C9,width:DE+"px",height:Ci.view.textHeightInX+"px",cssClass:"gm-xaxis-cell-label",styles:Ci.xTitleStyles,align:"bottom",contentData:DQ});Cq.render();Cq.parent=CY;Ci.addDisposable(Cq);if(DQ.length===1){DN.labelDiv=Cq.domNode;}else{if(DQ.length>1){DN.combinedLabelDiv=Cq.domNode;}}}}}else{if(!Cu&&!Ci.hasFooterInX&&DP.isMetric){if(DS.length===0&&DB.isMetric){DS=Cw?DB.items:C6.items;Cx=Cw?DB.cellHandlers:C6.cellHandlers;Cl=B9.YAxis;}Cv=DS.length;DN.metrics=[];var DL,C7,C2,C5=[];for(DL=0;DL<Cv;DL++){C5.push(DL);DN.metrics.push(DS[DL]);}for(DL=0;DL<C5.length;DL++){C8=C5[DL];C7=DS[C8];C2={};C2.dzId=Cl;C2.dzIndex=C8;C2.type=BX.GM_XLABEL;if(CU.isABL&&Cx){DD=(Cx[C8].col-Ci.gts.row.length)%CO.getMetricCount();Cn=CO.getMetricIDsFromIndex([DD])[0];Cy=CO.getMetricIDFromIndex(DD);C2.selectionInfo=C2.identity=new BW.MetricAxisTitleIdentity({n:C7,mid:Cn,mOriId:Cy,midx:DD,cellHandle:Cx[C8],objType:b.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}else{if(CU.isBubbleOrScatter){DD=DP.mtsIdxArr[C8];Cn=CO.getMetricIDsFromIndex([DD])[0];Cy=CO.getMetricIDFromIndex(DD);C2.selectionInfo=C2.identity=new BW.MetricAxisTitleIdentity({n:C7,mid:Cn,mOriId:Cy,midx:DD,objType:b.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}}DO.push(C2.selectionInfo);}}}DN.selectionInfos=DO;var Ct=AO(C4,DC,DF,"x",Cp);DN.setAttribute("isPrimary",Cp);DN.appendChild(Ct);if(!Cu&&DN.drawAxis){var DU=Ci.view.getWidgetPropertyValue(Cp?AX.SCALE_X:AX.SCALE_X2),C3=DU!==undefined&&DU!==1;Ci.drawXAxis(Ct,C4,DC-DF,DH,DR,DT.c,true,DT.dpIdx,C3,Cp,DI);}}},Cd=function(Cy,Ct,Cq,Cu,Co){if(Cy.length<=0){return Ag.NORMAL;}Co=Co||false;var Cv=0,Cx=0,C2=Cq,C3=10,Cp=5,Cz=[],Cs=Cy.length,Cw=Ct-C2*2,Cm=Cy.length,Ck=Cw/Cm;var C1=function(){var C6,C8,C5,C4,C7=Ci.view.HTML5PROPS.AXIS_LABEL_Y;for(C6=0;C6<Cs;C6++){C8=Cy[C6];C5=B4.measureTextWidth(C8,C7,0);C4=C2+(C6+0.5)*Ck-0.5*C5;Cz.push({Size:C5,Start:C4});}};var C0=function(C5){var C6=C5.Start,C4=C6+C5.Size;return(C6>=Cp&&C4<=Ct-Cp);};var Cl=function(C7,DA,C8){var C6,C9,C5,C4=false;for(C6=DA;C6<C7.length;C6+=C8){C9=C7[C6];if(C0(C9)===false){return true;}if(C6>=C8){C5=C7[C6-C8];if(C5.Start+C5.Size+C3>C9.Start){return true;}}}return C4;};C1();if(Cl(Cz,0,1)===false){return Ag.NORMAL;}var Cr=false,Cn=false;Cr=Cl(Cz,0,2)===false;Cn=Cl(Cz,1,2)===false;if(Cr&&Cn){return Ag.STAGGER;}if(Cu){return Ag.ROTATE;}else{return Ag.HORI_DROP;}},Cc=function(){var Cq,Cr,Cm,Cw,Cu=Ci.view,Cn=1,Cp=0,Cs=this.getChartCountInRow(),Cv=this.property.readItem(BK.X_AXIS_LABELS_ROTATION),Co=Cu.getWidgetPropertyValue(AX.SCALE_CHART_WIDTH),Ck=Ci.getControllerAPI(L.GET_CHART_WIDTH),Ct=Math.min(100,Cs),Cl=Ag.NORMAL;if(Cv===undefined){Cv=-1;}Cw=Cv===-1||Cv===2;for(Cq=0;Cq<Ct;Cq++){Cr=Ci.getXAxisLabels(Cq);Cm=Ck(0,Cq)*Co;Cn=this.checkBarColumnsForAxisPadding(0,Cq);if(Cn>0){Cp=Math.round(Cm/Cn/4);}Cl=Math.max(Cl,Cd(Cr,Cm,Cp,Cw));if(Cl===Ag.ROTATE){break;}}return Cl;};switch(CM){case L.GET_CHART_WIDTH:return AS;case L.GET_CHART_HEIGHT:return CR;case L.GET_ROW_HEADER:return Ch;case L.UPDATE_ROW_HEADER:return CT;case L.GET_COLUMN_HEADER:return Cg;case L.UPDATE_COLUMN_HEADER:return CS;case L.GET_EXTRA_COLUMN_HEADER:return Ca;case L.CREATE_UNIT_Y_AXIS:return CN;case L.CREATE_UNIT_X_AXIS:return CW;case L.GET_FULL_FLEDGED_CHART:return CV;case L.GET_ROW_SPAN:return Ce;case L.GET_COLUMN_SPAN:return CZ;case L.GET_METRICS_ON_X:return this.getMetricsOnXAxis;case L.GET_METRICS_ON_Y:return this.getMetricsOnYAxis;case L.GET_METRICS_ON_SIZE_BY:return this.getSizeByMetrics;case L.UPDATE_MINI_CHART:return CX;case L.UPDATE_Y_AXIS:return Cf;case L.UPDATE_X_AXIS:return CP;case L.MAX_RADIUS_CALC:return CQ;case L.LAYOUT_ALL_X_AXIS_LABELS:return Cc;case L.LAYOUT_ONE_X_AXIS_LABELS:return Cd;}},getUnifiedMetricCondense:function(CN,CO,Cc,Cj){var Cl=this,Cb=this.getMetricCondense(CN),Cd=CO==="y"?Cl.model.cic:Cl.model.cir,CW=CO==="y"?Cl.inChartLayout.r:Cl.inChartLayout.c,AS,CX,Ca,CR=false,Ci,Ck,CV,CS,CU,CM,CZ,CQ,Cg,CY,CT=CO.toUpperCase()+(Cc?"":"2"),Ch,Cm=this.isBubbleOrScatter();if(!Cb){return false;}else{Cb=false;}for(var Cf=0;Cf<Cd;Cf++){if(CO=="y"){CM=Cj+Cf*CW;CZ=0;}else{CM=0;CZ=Cj+Cf*CW;}AS=Cl.isLogScale(CT,CM,CZ);CY=Ba.call(this,CM,CZ);Ck=CY[CT+"MinValue"];Ci=CY[CT+"MaxValue"];CX=Cl.getOnTheFlyShapeForMetric(Aq.call(Cl,CM,CZ,CT+"Axis"));Ca=0;if(Cl.chartSubType===3&&!Cm){Ca=2;}else{if(Cl.chartSubType===5&&!Cm){CR=true;Ca=1;}}Ch=!!(Ca&1)?10:6;CQ=k.prepareScalePlateOptions(AS,CX,Ca);Cg=k.getScalePlate(true);if(Cg){CY=Cg.getMaxMinTickValue(CQ,Ca,Ci,Ck);if(CR){CU="0%";}else{CU=Cl.model.getMetricNumberFormat(CN);if(CU.match("%")!==null){var Ce=this.model,CP=Ce.getFullNumberFormat()[CN];if(CP&&CP.nct===4){Ch=10;}}}CV=C.formatByMask(CU,CY.Max);CS=C.formatByMask(CU,CY.Min);if(CV.length>Ch||CS.length>Ch){Cb=true;break;}}}return Cb;},getMetricCondense:function(CM){var AS=this.getMetricFormat(CM);return AS&&AS.cds===true;},getMetricFormat:function(CQ){var CM=this.model,CN,CO=false,CP,AS;if(CQ>=0){CN=CM.getMetricIDsFromIndex([CQ])[0];CP=CM.getMetricNamesFromIndex([CQ])[0];CO=CM.getMetricCondenseFromIndex([CQ])[0];AS=CM.getMetricNumberFormat(CQ);return{mId:CN,n:CP,nf:AS,cds:CO};}return{};},getMetricFormatFromIndexArray:function(AS){var CM=[],CN=this;By.forEach(AS,function(CO){CM.push(CN.getMetricFormat(CO));});return CM;},hasTheSameFormat:function(AS,CP){var CO=this,CN=CO.getMetricFormat(AS),CM=CO.getMetricFormat(CP);return CN.nf===CM.nf;},hasCustomOnAxis:function(){var CO,CM,CP,CN;CM=Ai(this.getMetricsOnYAxis());CO=Ai(this.getMetricsOnXAxis());CP=BV.call(this,CO,"XAxis");CN=BV.call(this,CM,"YAxis");var AS=false;if(!CP.emptyAxis&&CP.customAxisEnabled){AS=true;}if(!CN.emptyAxis&&CN.customAxisEnabled){AS=true;}return AS;},populateChartRefreshment:function(AS,CU,CV){var CP=U.call(this,AS,CU);CP.rowIndex=AS;CP.colIndex=CU;CV.dataProvider=CP;var CM=this.getControllerAPI(L.GET_CHART_WIDTH);var CS=this.getControllerAPI(L.GET_CHART_HEIGHT);var CQ=this.view.getWidgetPropertyValue(AX.SCALE_CHART_WIDTH);var CO=this.view.getWidgetPropertyValue(AX.SCALE_CHART_HEIGHT);CV.size={w:CM(AS,CU)*CQ,h:CS(AS,CU)*CO};var CR=Ba.call(this,AS,CU);var CN=this.getChartInfo(),CT=B2;if(CN.tp===CT.BUBBLE){CV.primaryValueAxis={min:CR.YMinValue,max:CR.YMaxValue};CV.secondaryValueAxis={min:CR.XMinValue,max:CR.XMaxValue};}else{}if(CN.tp===CT.BUBBLE){CV.plot={};}else{}},getSharedChartInstance:function(AS,CQ,CS){this.sharedCharts=this.sharedCharts||{};var CP=null,CT,CM=CS.purpose;if(CM==="clipping"){this.sharedCharts[CM]=this.sharedCharts[CM]||{};var CR,CN,CO=this.sharedCharts[CM];CT="x:",CR=Ai(this.getMetricsOnAxisOfChart(AS,CQ,"x",true));CT+=CR.join("-")+"; y:";CN=Ai(this.getMetricsOnAxisOfChart(AS,CQ,"y",true));CT+=CN.join("-");CP=CO[CT];}else{CP=this.sharedCharts[CM];}if(CP){this.populateChartRefreshment(AS,CQ,CS);CP.refreshChartComponents(CS);}else{CP=this.queryChartInstance(AS,CQ,false,true);if(CM==="dataLabelRotation"){if(CP.mDatasetPtr.showDatalabels()===false){return null;}CP.PlainDraw();}if(CM==="clipping"){this.sharedCharts[CS.purpose][CT]=CP;}else{this.sharedCharts[CS.purpose]=CP;}}return CP;},queryChartInstance:function(Cg,Co,CT,Cc){var Cf,CW,Cp,Cb,Ck,Ci,CU,CQ,Ch,Ce=this.chartsPosIdMap,Cd=this.getChartInfo();if(!Ce){Ce=this.chartsPosIdMap={};}if(!Ce[Cg]){Ce[Cg]={};}if(Ce[Cg][Co]){l.destroyDisposable(this,mstrmojo.all[Ce[Cg][Co]]);}Ci=U.call(this,Cg,Co);Ci.rowIndex=Cg;Ci.colIndex=Co;CU=Ba.call(this,Cg,Co);CQ=this.hasSizeBy();Ch={HasSizeBy:CQ};if(CQ){Ch.Max=CU.ZMaxValue;Ch.Min=CU.ZMinValue;}Cf=this.hGetChartInstance({dataProvider:Ci});Ce[Cg][Co]=Cf.id;CU.GraphHeight=400;CU.LabelPlacement=this.xLabelPlacement;Ch={HasSizeBy:CQ};if(CQ){Ch.Max=CU.ZMaxValue;Ch.Min=CU.ZMinValue;}var Cl={Extremes:CU,SizeBy:Ch};if(Cc){var CO=this.getControllerAPI(L.GET_CHART_WIDTH);var CY=this.getControllerAPI(L.GET_CHART_HEIGHT);var CP=this.view.getWidgetPropertyValue(AX.SCALE_CHART_WIDTH);var CN=this.view.getWidgetPropertyValue(AX.SCALE_CHART_HEIGHT);Cl.GraphSize={W:CO(Cg,Co)*CP,H:CY(Cg,Co)*CN};}if(CT){CW=this.getDataAreaPadding(Cg,Co);Cp=this.getChartUniformAxisMargins(Cg,Co);Cb=this.getChartUniformAxisTrims(Cg,Co);Ck=this.getPerCellSetting(Cg,Co);mstrmojo.hash.copy(Cb,Cp);mstrmojo.hash.copy(Ck,Cp);Cl.DataAreaPaddings=CW;Cl.UniformAxisPaddings=Cp;}Cl.isABL=Cd.isABL;Cl.GraphType=this.ceChartType;this.completePropForCE(Cl,{dataProvider:Ci});var Cn,AS,Ca,CS;Cn=Ai(this.getMetricsOnAxisOfChart(Cg,Co,"x",true));AS=Ai(this.getMetricsOnAxisOfChart(Cg,Co,"y",true));Ca=Ai(this.getMetricsOnAxisOfChart(Cg,Co,"x",false));CS=Ai(this.getMetricsOnAxisOfChart(Cg,Co,"y",false));var CZ=BV.call(this,Cn,"XAxis"),CM=BV.call(this,AS,"YAxis"),Cq=BV.call(this,Ca,"XAxis"),CV=BV.call(this,CS,"YAxis");if(CZ.emptyAxis===false){CU.XCustomScale=CZ.customAxisEnabled;CU.XMetrics=Cn;}if(CM.emptyAxis===false){CU.YCustomScale=CM.customAxisEnabled;CU.YMetrics=AS;}if(Cq.emptyAxis===false){CU.X2CustomScale=Cq.customAxisEnabled;CU.X2Metrics=Ca;}if(CV.emptyAxis===false){CU.Y2CustomScale=CV.customAxisEnabled;CU.Y2Metrics=CS;}CU.XCategoryAxis=CU.XCategoryAxis||{};CU.YCategoryAxis=CU.YCategoryAxis||{};var Cj=(this.chartSubType===BM.CLUSTERED||this.chartSubType===BM.ABSOLUTE),CR=(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&Cj,CX=(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart;CU.XCategoryAxis.EnforceCluster=CR;CU.XCategoryAxis.EnforceFringe=CX;CU.YCategoryAxis.EnforceCluster=CR;CU.YCategoryAxis.EnforceFringe=CX;var Cm=AE.call(this,Cg,Co);CU.X1CondenseEnfored=Cm.X1;CU.YCondenseEnfored=Cm.Y1;CU.X2CondenseEnfored=Cm.X2;CU.Y2CondenseEnfored=Cm.Y2;Cl.ElementInfo=this.sizeInfo;Cl.AxisLayout=AA.call(this,Cg,Co);Cl.Extremes=CU;Cf.configureChart(Cl);return Cf;},calculateRadius:function(){this.getControllerAPI(L.MAX_RADIUS_CALC).call(this);},decideDataLabelRotation:function(){var Cd=this,Cc=false,Ce=this.getChartInfo(),AS=this.hasBarChart,CQ=this.isCombo;var CW=0,CY=U.call(this,0,0),CZ=CY&&CY.getSeriesCount()||0;if(!!CY===false||CZ===0){return ;}if(CQ){for(;CW<CZ;i++){Cc=Cc||CY.getShapeBySeries()===1;}}else{Cc=this.markerShape===1&&Ce.isABL;}if(Cc===false){return ;}var CO={purpose:"dataLabelRotation"},CX=Cd.getSharedChartInstance(0,0,CO);if(!!CX===false){return ;}if(CX.mDatasetPtr&&CX.mDatasetPtr.showDatalabels()===false){return ;}var CP=CX.mChartContextPtr,CT=CX.mDatasetPtr,CV=CP.mGraphWidth,Ca=CP.mGraphHeight;var CM=CP.IsBarChart();if(!CM&&CP.isCombinationChart()){var Cb=CT.GetSeriesByShape().Bar,CZ=CT.GetSeriesCount();CM=(Cb.length===CZ);if(!CM&&Cb.length){CM=true;}}if(CM){CX.PlainDraw();}else{return ;}var CR=21155,CN=mstrmojo.chart.gNullTripleId;CP.PutGraphProperty(CR,CN,null);var CU=CX.ShouldRotateDataLabel(CV,Ca);var CS=0;if(CU.Adjust&&(CP.IsBarChart(1)||CX.mDatasetPtr.GetSeriesCount()===1)){var CY=U.call(this,0,0);if(CP.IsVertical()){CX=this.getAxisChartInstance(CY,0,0,"y",true,0,Ca,false);if(CX!==null){CX.GetUniformYAxisWidth(Ca,-1,true);}else{if(CP.IsDualAxis()){CX.GetUniformYAxisWidth(Ca,-1,false);}}this.YAxisDataLabelPadding=CX&&CX.getAxisPadding(CS).H||0;}else{CX=this.getAxisChartInstance(CY,0,0,"x",true,0,CV,false);if(CX!==null){CX.GetUniformXAxisHeight(CV,-1,true);}else{if(CP.IsDualAxis()){CX.GetUniformXAxisHeight(CV,-1,false);}}this.XAxisDataLabelPadding=CX&&CX.getAxisPadding(CS).H||0;}}},setupAxisCondense:function(){var CR=this,CN={},CQ={},CP={},CT={},CM=this.getXAxisInfo(),AS=this.getYAxisInfo(),CU=this.getXAxisInfo(undefined,undefined,false),CO=this.getYAxisInfo(undefined,undefined,false),CS=function(Cb,CY,Cd){var Ca,CZ,CV,CX,Cc,Ce=CY==="y"?CR.inChartLayout.r:CR.inChartLayout.c,CW;for(Ca=0;Ca<Ce;Ca++){if(CY==="y"){CW=CR.getMetricsOnAxisOfChart(Ca,0,CY,Cd);}else{CW=CR.getMetricsOnAxisOfChart(0,Ca,CY,Cd);}CX=CW.length;if(CX===1){CV=CW[0];Cb[CV]=CR.getUnifiedMetricCondense(CV,CY,Cd,Ca);}else{if(CX>1){Cc=false;for(CZ=0;CZ<CX;CZ++){CV=CW[CZ];if(CR.getUnifiedMetricCondense(CV,CY,Cd,Ca)){Cc=true;break;}if(CR.chartSubType!==5){if(CZ!==0&&!CR.hasTheSameFormat(CV,CW[0])){Cc=true;break;}}}for(CZ=0;CZ<CX;CZ++){CV=CW[CZ];Cb[CV]=Cc;}}}}};if(CM.isMetric){CS(CN,"x",true);}if(AS.isMetric){CS(CQ,"y",true);}if(CU.isMetric){CS(CP,"x",false);}if(CO.isMetric){CS(CT,"y",false);}this.xCondense=CN;this.yCondense=CQ;this.x2Condense=CP;this.y2Condense=CT;},getRowHeadersToCalcWidth:function(){var CO=this.rowHeaderCnt,CN=[],CM,AS=this.model;for(CM=0;CM<CO;CM++){CN.push(AS.collectHeadersLabels(0,CM));}return CN;},getColHeadersToCalcWidth:function(){var CO=this.colHeaderCnt,CN=[],CM,AS=this.model;for(CM=0;CM<CO;CM++){CN.push(AS.collectHeadersLabels(1,CM));}return CN;},createACanvas:function D(CP,CN,AS,CO){var CM=document.createElement("canvas");CM.width=CP;CM.height=CN;CM.style.zIndex=8;CM.style.top=CO+"px";CM.style.left=AS+"px";CM.style.position="absolute";return CM;},parseNumericAxisFormat:function u(CP,CS,CR,CM){var AS=CP?"x":"y";var CO=Ai(this.getMetricsOnAxisOfChart(CR,CM,AS,CS));var CQ="General",CN=this.model;CO.forEach(function(CU,CT){var CV=CN.getMetricNumberFormat(CU);if(!!CV&&CV.hasOwnProperty("nfs")){CV=CV.nfs;if(CQ===undefined){CQ=CV;}else{if(CQ!==CV){CQ="General";return CQ;}}}});return CQ;},postDrawCollecting:function Bj(CQ,AS,CX,CV,CS,CU,Ca){var CO=CV.getUniformAxisTrims(CQ,CX),CT,Cc,Cb,CM,CR;var CY=CU,CP=0,CN=CS;if(!CQ){CP=CS;CN=0;CY=Ca;}if(CV.IsZeroBaseLineQualified(CQ,CX)){CT=CV.GetPositionAtTick(0,CQ,CY);}else{CT=null;}var CZ=0,CW=1;Cc=AS?CV.getUniformAxisGridLinePosition(true):[];Cb=AS?CV.getUniformAxisGridLinePosition(false):[];CM=AS?(CV.getUniformAxisFormat()||this.parseNumericAxisFormat(CQ,CX,CP,CN)):"";CR=!!CV.useOriginFormatForZeroLine?CW:CZ;return{MajorGrids:Cc,MinorGris:Cb,ZeroPos:CT,ZeroStyle:CR,AxisTrims:CO,AxisFormat:CM};},drawYAxis:function(CZ,CV,Ck,CP,Cc,CT,Ch,CN,Cf,Cg,CY,CM){var Cd,Ci=this.model,AS=this.yIsNumeric,CU=Cg?this.yZeroAxisPos:this.y2ZeroAxisPos,Cq=this.yMajorGridLinePos,Cn=this.yMinorGridLinePos,CQ=Ci.getLocalDataSet(Cc,CT),Cs=CQ.generateDataProvider(),Cm=this.yAxisMargins;var Ce=Cs[CN];if(Ch===true){Ce.clearGraphJSON();}var Ca=this.getAxisChartInstance(Ce,CP,0,"y",Cg,CV,Ck,true);if(Ca&&Ca.newBorn){Ca.GetUniformYAxisWidth(Ck,-1,Cg);Cm[CP]=Ca.GetUniformAxisMargins();delete Ca.newBorn;}var Cr=true;if(Ca&&!CM){Cr=!!Ca.visited;}if(!Ca){Ca=this.getAxisChartInstance(Ce,CP,0,"y",Cg,CV,Ck,true);Ca.GetUniformYAxisWidth(Ck,-1,Cg);Cm[CP]=Ca.GetUniformAxisMargins();}else{if(Cr||Cf){Ca.configureChart({GraphSize:{W:CV,H:Ck},ElementInfo:this.sizeInfo,AxisLayout:AA.call(this,CP,0),Timer:this.view.enableCETimer});Ca.GetUniformYAxisWidth(Ck,CV,Cg);Cm[CP]=Ca.GetUniformAxisMargins();}else{Cm[CP]=Ca.GetUniformAxisMargins();}}Ca.UpdatePartialRenderingWindow(this.enablePartialRendering,CY,CY?CY.flag:2);var CS={};if(this.YAxisDataLabelPadding>0&&this.YAxisDataLabelPadding<Ck){CS.dataLabelPadding=this.YAxisDataLabelPadding;}var Cj=Ca.DrawUniformYAxis(CV,Ck,Cg,CS),Cb=Cj.svg;if(this.useCECanvas){var Cl=null;if(!this.drawer){Cl=this.drawer=new BW.VecDrawer();}else{Cl=this.drawer;}Cl.graphData=Cj;var CW=Cl.graphNode=this.createACanvas(CV,Ck,0,0);if(Cg){CW.style.left="";CW.style.right="0px";}else{CW.style.left="0px";CW.style.right="";}CZ.appendChild(CW);Cl.retrieveGraphSrc(Ck,CV);}else{if(this.clusteredBarSpecialCase){Cb.setAttribute("type",BX.GM_SVG_Y_NUMERIC);}else{Cb.setAttribute("type",this.yIsNumeric?BX.GM_SVG_Y_NUMERIC:BX.GM_SVG_Y_CATEGORY);}Cb.style.position="absolute";CZ.appendChild(Cb);AV=Ca.mChartContextPtr.mCanvas.mGradientCount;}if(this.view.getWidgetPropertyValue(AX.BANDING)){Cd=Ca.getUniformAxisBanding();this.bandings[CP]=Cd;this.drawInChartBanding(CZ.parentNode,Cd,this.bandingFlags[CP]);}var CO,CX=this.postDrawCollecting(false,AS,Cg,Ca,CP,CV,Ck);Cq[CP]=CX.MajorGrids;Cn[CP]=CX.MinorGris;CU[CP]=CX.ZeroPos;CO=CX.AxisTrims;if(CO.isCaTrim){var Cp=this.caAxisTrims[1];Cp[CP]=CO;}else{var CR=Cg?this.yAxisTrims:this.y2AxisTrims;CR[CP]=CO;}if(AS){var Co=this.axisFormats["y"+(Cg?"1":"2")];Co[CP]=CX.AxisFormat;}Ca.visited=true;},getAxisChartInstance2:function(CQ,CP,CV,CZ){var Ca=this.model,CM=this.getControllerAPI(L.GET_CHART_WIDTH),CT=this.getControllerAPI(L.GET_CHART_HEIGHT),CN=this.view.getWidgetPropertyValue(AX.SCALE_CHART_WIDTH),AS=this.view.getWidgetPropertyValue(AX.SCALE_CHART_HEIGHT),CW=this.mapFromChartToLDSIndex(CQ,CP),CX=CV==="x"?CQ:CW.r,CS=CV==="x"?CW.c:CP,CO=CW.dpIdx,CR=Ca.getLocalDataSet(CX,CS),Cc=CR.generateDataProvider(),CY=Cc[CO],CU=CM(CQ,CP)*CN,Cb=CT(CQ,CP)*AS;return this.getAxisChartInstance(CY,CQ,CP,CV,CZ,CU,Cb,true);},getAxisChartInstance:function(CY,CS,CQ,CV,CZ,CU,Ce,CR){var CM,CW,CO;var Cd=Ai(this.getMetricsOnAxisOfChart(CS,CQ,CV,CZ));var CT=BV.call(this,Cd,CV==="x"?"XAxis":"YAxis");var Cc=(CZ===false)?CV.toUpperCase()+"2AxisChart":CV.toUpperCase()+"AxisChart";var AS=CV==="x"&&{Layout:this.xLabelPlacement,StartRow:X(this.widthRatio,CQ),EnforceCluster:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&Ca,EnforceFringe:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart};CR=CR||false;if(CT.emptyAxis){return null;}if(CR&&!this.forceUpdateAxis()){if(CY[Cc]){if(CV==="x"){var Cg=this.property.readItem(BK.X_AXIS_LABELS_ROTATION);CY[Cc].updateUniformAxisLabelRotation(this.xLabelPlacement,Cg);CY[Cc].updateUniformXAxisLayout(AS);}CO=this.getDataAreaPadding(CS,CQ);if(!!CO){CY[Cc].UpdateValueAxisPadding(CO);}if(CY[Cc].newBorn){delete CY[Cc].newBorn;}return CY[Cc];}}l.destroyDisposable(this,CY&&CY[Cc]);CY.rowIndex=CS;CY.colIndex=CQ;CY.EnforedCondense=CY.EnforedCondense||{};CW=this.hGetChartInstance({dataProvider:CY,isAxis:true});CM=Ba.call(this,CS,CQ);var Cb,Cf=CV.toUpperCase()+"MinValue";Cb=CM[Cf];if(Cb!==undefined&&Cb<0&&this.msgCenter){if(this.isLogScale(CZ?CV:CV+"2",CS,CQ)){var CX=this.view;if(CX.logScaleChanged){var CP=mstrmojo.desc(13656,"Data less than or equal to zero has been removed from the graph");this.msgCenter[CP]=true;CX.logScaleChanged=false;}}}CM.GraphHeight=400;CM.LabelPlacement=this.xLabelPlacement;CM.xAxisRotateMode=this.property.readItem(BK.X_AXIS_LABELS_ROTATION);if(CZ===false){CY[Cc]=CW;CM[CV.toUpperCase()+"2Metrics"]=Cd;CM[CV.toUpperCase()+"2CustomScale"]=CT.customAxisEnabled;CM[CV.toUpperCase()+"2CondenseLabel"]=this[CV+"2Condense"];CM[CV.toUpperCase()+"2CondenseEnfored"]=CY.EnforedCondense[CV.toUpperCase()+"2"]||false;}else{CY[Cc]=CW;CM[CV.toUpperCase()+"Metrics"]=Cd;CM[CV.toUpperCase()+"CustomScale"]=CT.customAxisEnabled;CM[CV.toUpperCase()+"CondenseLabel"]=this[CV+"Condense"];CM[CV.toUpperCase()+"CondenseEnfored"]=CY.EnforedCondense[CV.toUpperCase()]||false;}if(this.forceUpdateAxis()){CO=this.getDataAreaPadding(CS,CQ);if(!!CO){CY[Cc].UpdateValueAxisPadding(CO);}}var Ca=(this.chartSubType===BM.CLUSTERED||this.chartSubType===BM.ABSOLUTE);if(CV==="x"){CM.XCategoryAxis=AS;}else{CM.YCategoryAxis={EnforceCluster:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&Ca,EnforceFringe:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart};}var CN={Extremes:CM};this.completePropForCE(CN,{dataProvider:CY,isAxis:true});CN.AxisLayout=AA.call(this,CS,CQ);CW.configureChart(CN);CW.newBorn=true;return CW;},drawXAxis:function(CY,CT,Cj,Cb,CN,CR,Cf,CM,Cd,Ce,CX){var Cg=this.model,Ck=this.xIsNumeric,CS=Ce?this.xZeroAxisPos:this.x2ZeroAxisPos,Co=this.xMajorGridLinePos,Cn=this.xMinorGridLinePos,CP=Cg.getLocalDataSet(Cb,CR),Cq=CP.generateDataProvider(),Cc=Cq[CM],Ci=this.xAxisMargins;if(Cf===true){Cc.clearGraphJSON();}var CZ=this.getAxisChartInstance(Cc,0,CN,"x",Ce,CT,Cj,true);if(CZ&&CZ.newBorn){CZ.GetUniformXAxisHeight(CT,-1,Ce);Ci[CN]=CZ.GetUniformAxisMargins();delete CZ.newBorn;}var Cp=true;if(CZ){Cp=!!CZ.visited;}if(!CZ){CZ=this.getAxisChartInstance(Cc,0,CN,"x",Ce,CT,Cj,true);CZ.GetUniformXAxisHeight(CT,-1,Ce);Ci[CN]=CZ.GetUniformAxisMargins();}else{if(Cp||Cd){CZ.configureChart({GraphSize:{W:CT,H:Cj},ElementInfo:this.sizeInfo,AxisLayout:AA.call(this,0,CN),Timer:this.view.enableCETimer});CZ.GetUniformXAxisHeight(CT,Cj,Ce);Ci[CN]=CZ.GetUniformAxisMargins();}else{Ci[CN]=CZ.GetUniformAxisMargins();}}CZ.UpdatePartialRenderingWindow(this.enablePartialRendering,CX,CX?CX.flag:2);var CQ={};if(this.XAxisDataLabelPadding>0&&this.XAxisDataLabelPadding<CT){CQ.dataLabelPadding=this.XAxisDataLabelPadding;}var Ch=CZ.DrawUniformXAxis(CT,Cj,Ce,CQ),Ca=Ch.svg;if(this.useCECanvas){var Cm=null;if(!this.drawer){Cm=this.drawer=new BW.VecDrawer();}else{Cm=this.drawer;}Cm.graphData=Ch;var CV=Cm.graphNode=this.createACanvas(CT,Cj,0,0);if(Ce){CV.style.top="0px";CV.style.bottom="";}else{CV.style.top="";CV.style.bottom="0px";}CY.appendChild(CV);Cm.retrieveGraphSrc(Cj,CT);}else{if(this.clusteredBarSpecialCase){Ca.setAttribute("type",BX.GM_SVG_X_NUMERIC);}else{Ca.setAttribute("type",this.xIsNumeric?BX.GM_SVG_X_NUMERIC:BX.GM_SVG_X_CATEGORY);}Ca.style.position="absolute";CY.appendChild(Ca);AV=CZ.mChartContextPtr.mCanvas.mGradientCount;}var CO,CW=this.postDrawCollecting(true,Ck,Ce,CZ,CN,CT,Cj);Co[CN]=CW.MajorGrids;Cn[CN]=CW.MinorGris;CS[CN]=CW.ZeroPos;CO=CW.AxisTrims;if(CO.isCaTrim){var CU=this.caAxisTrims[0];CU[CN]=CO;}else{var AS=Ce?this.xAxisTrims:this.x2AxisTrims;AS[CN]=CO;}if(Ck){var Cl=this.axisFormats["x"+(Ce?"1":"2")];Cl[CN]=CW.AxisFormat;}CZ.visited=true;},mapFromChartToLDSIndex:function(CN,CS){var CP=this.inChartLayout,CQ=Math.floor(CN/CP.r),AS=Math.floor(CS/CP.c),CM=CN%CP.r,CR=CS%CP.c,CO=CM*CP.c+CR;return{r:CQ,c:AS,dpIdx:CO,inchtRow:CM,inchtCol:CR};},drawInChartZeroLine:function(CM,CV,CQ,AS,CS){var CR,CU=this.xZeroAxisPos[CS],CT=this.yZeroAxisPos[AS],CN=this.x2ZeroAxisPos[CS],CP=this.y2ZeroAxisPos[AS],CO=false;if(this.chartType===B2.BAR){if(this.axisFormat.xAxOriLnShw){CU=CN=null;}else{CO=true;}if(this.axisFormat.yAxOriLnShw){CT=CP=null;}else{CO=true;}}if(CT){CR=g(CV,CT,CO);CM.appendChild(CR);}if(CP){CR=g(CV,CP,CO);CM.appendChild(CR);}if(CU){CR=BN(CQ,CU,CO);CM.appendChild(CR);}if(CN){CR=BN(CQ,CN,CO);CM.appendChild(CR);}},drawInChartBanding:function(AS,CS,CQ){var CO,CM,CU,CP,CN=CS.length,CR=document,CT=CR.createElement("div");CT.setAttribute("class","gm-banding-container");for(CO=0;CO<CN;CO++){CM=CS[CO].Start;CU=CS[CO].Size;CP=CR.createElement("div");CP.setAttribute("class","gm-banding-div");CP.style.top=CM+"px";CP.style.height=CU+"px";if(CO%2!==CQ){Bb.addClass(CP,"odd");}CT.appendChild(CP);}AS.appendChild(CT);},drawOnDiv:function(CS,CO,Ca,CU,Ce,CY,CP,CR){var Cg=this.bandings,AS=CR?CR.flag:2,CN,Cf,CX,CT;CX=U.call(this,CU,Ce);if(CX.isBlankGrid){var Ch=this.getChartInfo();if(Ch.isGrid===false){return ;}}if(CY===true){CX.clearGraphJSON();}CN=CO;Cf=Ca;CX.r=CU;CX.c=Ce;var CZ=CX.graphJSON;if(!CZ){CT=this.queryChartInstance(CU,Ce,true,true);var Cd=true;if(this.enablePartialRendering){if(this.isBubbleOrScatter()){var Cc=1000;Cd=(CX.getGroupCount()>Cc);}}CT.UpdatePartialRenderingWindow(this.enablePartialRendering&&Cd,CR,AS);var CM={xDataLabelPadding:this.XAxisDataLabelPadding,yDataLabelPadding:this.YAxisDataLabelPadding};CZ=CT.DrawDataAreaForUniformAxis(CN,Cf,CM);CX.graphJSON=CZ;}CS.hiddenItems=CZ.hiddenItems;var CV=CZ.svg;if(this.useCECanvas){var Cb=null;if(!this.drawer){Cb=this.drawer=new BW.VecDrawer();}else{Cb=this.drawer;}Cb.graphData=CZ;var CQ;CQ=Cb.graphNode=this.createACanvas(CN,Cf,0,0);CS.appendChild(CQ);Cb.retrieveGraphSrc(Cf,CN);}else{CV.setAttribute("type",BX.GM_SVG_CHART);CS.appendChild(CV);AV=CT.mChartContextPtr.mCanvas.mGradientCount;}this.drawInChartZeroLine(CS,CO,Ca,CU,Ce);if(this.view.getWidgetPropertyValue(AX.BANDING)){if(this.yIsNumeric){var CW=[{Start:0,Size:Ca}];this.drawInChartBanding(CS,CW,this.bandingFlags[CU]);}else{if(Cg[CU]!==undefined){this.drawInChartBanding(CS,Cg[CU],this.bandingFlags[CU]);}}}},hasSizeBy:function(){var AS=this.dz.SizeBy.TemplateMetric;return(AS&&AS.length>0)||false;},hasColorBy:function(){var AS=this.view;if(AS.noData){return false;}return this.model.colorType!==BI.NULL;},isAxisAttributeInColorBy:function Aw(){var AS=this.dz,CR=AS.XAxis,CN=AS.YAxis,CQ=AS.ColorBy,CP=(CR.TemplateUnit||[]).concat(CN.TemplateUnit||[]),CS=CQ.TemplateUnit||[],CM=function(CT){return typeof CT.MetricNames!=="undefined";};if((CM(CR)||CM(CN))&&CM(CQ)){return true;}for(var CO=0;CO<CP.length;++CO){if(By.find(CS,"n",CP[CO].n)>=0){return true;}}return false;},completePropForCE:function(CO,CP){var CN=CP.graphSize,CR=this.getChartInfo(),CM=this.model,AS,CQ;if(this.useCECanvas){CQ=105;}else{CQ=103;}AS={isABL:CR.isABL,OutputType:CQ,GraphType:this.ceChartType,ThemeType:this.view.theme,ColorBy:{HasColorBy:CM.colorType!==BI.NULL},ElementInfo:this.sizeInfo};if(CN){AS.GraphSize=CN;}if(this.enableCombiChart){AS.ShapeType=203;}else{if(this.ceMarkerShape){AS.ShapeType=this.ceMarkerShape;}}Ap.copy(AS,CO);},hGetChartInstance:function(CN){var AS=CN.dataProvider,CM=AR.call(this,CN);if(!CM){B4.visPrint("chart instance is invalid");AS.testDataProvider();}return CM;},getStyleEffectsOptions:function(){var CP=this.view;if(CP.noData){return[];}var AS=[],CM,CN=this,CO=this.getColorByOptions();AS.push({opt:mstrmojo.desc(2058,"All"),optLvl:Bg.ALL_SHAPE,comb:-1});CM=this.getMetricsOnYAxis();CM=CM.concat(this.getMetricsOnXAxis());By.forEach(CM,function(CR){AS.push(Z.call(CN,[CR]));});if(CO){AS.push(CO);}var CQ=CP.identity;if(CQ&&CQ.identityArr&&CQ.identityArr.length>0){AS.push({opt:mstrmojo.desc(12091,"Selected Elements"),optLvl:Bg.ITSELF,comb:-1});}return AS;},getColorByOptions:function(){var CO=this.view;if(CO.noData){return[];}var CN,CS=[],CR=this.model,CQ=CR.colorType,CU,AS,CP,CT;function CM(CZ){var CY,CW=[],Cb=CZ.levels,Ca=CZ.elements,CX=CZ.types,CV=Cb.length;for(CY=0;CY<CV;CY++){CW.push({eid:Ca[CY],tid:Cb[CY],tp:CX[CY]});}return CW;}if(CQ===BI.ATT||CQ===BI.ATT_METRICS||CQ===BI.METRICS_ITEM){CU=CR.getColorByLegendInfo();AS=CU.item;CP=CU.elements;By.forEach(CP,function(CV){CS.push({opt:CV.label,comb:CM(CV.token),optLvl:Bg.COLOR_BY});});CT=CO.arrayOfComb;if(CT&&CT.length>1){CS.push({opt:mstrmojo.desc(12092,"Multiple Elements"),comb:[],key:"multiple",optLvl:Bg.COLOR_BY});}CN={opt:AS,optLvl:Bg.COLOR_BY,comb:-1,subOptions:CS};if(CQ===BI.METRICS_ITEM){CN.isMetricNames=true;}return CN;}return undefined;},getNumericAxisOptions:function(Cf,CQ,Cd,CO,Cg){var CV=this.view;if(CV.noData){return[];}var CR=this.getChartInfo(),Ca=[],Ce=this,CN=this.inChartLayout,CP=CN.r,CW=CN.c,CT=[],CM=[],AS=[],CZ=[],CY=[],CU,Cc,CS,Cb;if(CR.tp!==B2.GRID){for(CU=0;CU<CP;CU++){CM=Ai(this.getMetricsOnAxisOfChart(CU,0,"y",true));if(CM.length>0){if(!Cd){CT.push(Z.call(Ce,CM,"y",CQ));}Ca=Ca.concat(CM);}AS=Ai(this.getMetricsOnAxisOfChart(CU,0,"y",false));if(AS.length>0){if(!Cd){CT.push(Z.call(Ce,AS,"y2",CQ));}Ca=Ca.concat(AS);}}for(Cc=0;Cc<CW;Cc++){CZ=Ai(this.getMetricsOnAxisOfChart(0,Cc,"x",true));if(CZ.length>0){if(!Cd){CT.push(Z.call(Ce,CZ,"x",CQ));}Ca=Ca.concat(CZ);}CY=Ai(this.getMetricsOnAxisOfChart(0,Cc,"x",false));if(CY.length>0){if(!Cd){CT.push(Z.call(Ce,CY,"x2",CQ));}Ca=Ca.concat(CY);}}}if(Cd){Ca.forEach(function(Ch){CT.push(Z.call(Ce,[Ch],"x",CQ));});}if(Cf){var CX=false;CS=this.getSizeByMetrics();Cb=[];By.forEach(CS,function(Ch){if(Ca.indexOf(Ch)<0){Cb.push(Ch);}else{CX=true;if(Cg){Cg.push(Ch);}}});if(CR.isBubbleOrScatter&&!this.splitPlottingMetrics&&CX){}else{if(Cb.length>0){Ca=Ca.concat(Cb);CT.push(Z.call(Ce,Cb,"z"));}}if(CO&&CX){By.forEach(CS,function(Ch){if(CM.indexOf(Ch)>=0){CO.push("y1");}if(AS.indexOf(Ch)>=0){CO.push("y2");}if(CZ.indexOf(Ch)>=0){CO.push("x1");}if(CY.indexOf(Ch)>=0){CO.push("x2");}});}}if(CT.length>1){CT.unshift({opt:mstrmojo.desc(2460,"All Metrics"),mos:this.getMetricFormatFromIndexArray(Ca),key:"AllMetrics"});}return CT;},getDependentMetricOptions:function(){var CO=this.view;if(CO.noData){return[];}var AS,CN=this,CM=[];AS=CK.call(this);By.forEach(AS,function(CP){CM.push(Z.call(CN,[CP]));});return CM;},getIndependentMetricOptions:function(){var CO=this.view;if(CO.noData){return[];}var AS=[],CN=this,CP=this.getChartInfo(),CM=[];if(CP.tp===B2.BUBBLE||CP.tp===B2.SCATTER){AS=this.getMetricsOnXAxis();}By.forEach(AS,function(CQ){CM.push(Z.call(CN,[CQ]));});return CM;},getRealReferenceOptionFromAxisOption:function(CM,AS,CQ){var CP=this.view;if(CP.noData){return[];}var CO=Ap.clone(CM),CN=AS-1;CO.opt=CO.opt+" - "+BQ[CN];CO.key=CO.key+","+A7[CN];CO.refType=AS;if(CQ!==undefined){CO.modix=CQ;}return CO;},getReferenceAxisOption:function(){var CN=this.view;if(CN.noData){return[];}var CM=false,AS=[],CO;if(this.isStacked&&!this.splitPlottingMetrics){CM=true;}CO=this.getNumericAxisOptions(false,CM,!CM);CO.forEach(function(CP){if(CP.key!=="AllMetrics"){AS.push(CP);}});return AS;},getReferenceLineOptions:function(){var CN=this.view;if(CN.noData){return[];}var AS=[],CM=this,CO;CO=this.getReferenceAxisOption();CO.forEach(function(CQ){var CP;for(CP in AW){if(AW.hasOwnProperty(CP)){AS.push(CM.getRealReferenceOptionFromAxisOption(CQ,AW[CP]));}}});return AS;},getEnabledReferenceLineOptions:function(CM){var CO=this.view;if(CO.noData||CM===undefined){return[];}var AS=CM.key.split(",")[0],CS=this[AX.REF_LINE_DEF],CN=CS[AS],CP=[],CR,CT;var CQ=function(CV){var CW={};CW.refType=parseInt(CT,10);CW.key=AS+","+A7[CT-1]+","+CV.modix;CW.opt=AS+" - "+BQ[CT-1];if(CW.refType===AW.CONST){CW.c=parseFloat(CV[AX.REF_CONST_VALUE]);CW.lin=CV[AX.REF_LINE_NAME];}CW.modix=CV.modix;CW.existing=true;CP.push(CW);};for(CT in CN){if(CN.hasOwnProperty(CT)){var CU=parseInt(CT,10);CR=CN[CU];By.forEach(CR,CQ);}}return CP;},getShowDataLabelOptions:function(){var CO=this.view;if(CO.noData){return[];}if(this.dlOptions){return this.dlOptions;}var CN=this,CP=this.getChartInfo(),AS,CM=[];if(CP.isPie){AS=this.getMetricsOnAngleBy();}else{if(CP.tp!==B2.GRID){AS=CK.call(this);}else{AS=this.getSizeByMetrics();}}By.forEach(AS,function(CQ){CM.push(Z.call(CN,[CQ]));});if(CM.length>1){CM.unshift({opt:mstrmojo.desc(2460,"All Metrics"),mos:this.getMetricFormatFromIndexArray(AS),key:"AllMetrics"});}this.dlOptions=CM;return CM;},getAttributeSortPlusExistedMetricSort:function(CR,CN){if(CR.dropzones===undefined){CR=this.attributeSelectionInfo[CR.tid];}var AS=false,CP=this.view,CO=CP.getWidgetPropertyValue(AX.SORT_INDEX),CM=CP.getWidgetPropertyValue(AX.SORT_ORDER);var CQ=this.getChartInfo();if(CQ.isABL&&(CR.dropzones.indexOf("XAxis")>=0||CR.dropzones.indexOf("YAxis")>=0)){AS=true;if(CO){this.property.removeItem(AX.SORT_INDEX);this.property.removeItem(AX.SORT_ORDER);}}if(!CO){CO=null;}if(AS||!this.showMetricSortIcon){return this.getMetricSortDefinition(null,CM,CR,CN);}return this.getMetricSortDefinition(CO,CM,CR,CN);},getMetricSortDefinition:function(CX,CR,Ce,CP){var Cb=[],Co=this,CZ=this.getChartInfo(),Ch=this.model,Cp=Ch.getMetricCount(),Ci,CM=[],AS=[],Cc={},CO=null,CN=this.colHeaderCnt,Cn=this.rowHeaderCnt,CY,CQ,Cq,Cl,Ck,Cm=["fi","headerID","headerText","id","idx","levelIndex","n","ui","tui"],Cf,CV,Cj=Ch.getUnitAttributesCountOnRow(),Cg=Ch.getUnitAttributesCountOnCol(),CU=false,CW,CT;var CS=false,Cd=false;if(CZ.isABL&&this.sortingMetric){if(CZ.dirc===B6.VERTICAL){CS=true;}else{Cd=true;}}if(Ce===undefined){Ce=null;}if(CP===undefined){CP=true;}for(Ci=0;Ci<Cg;++Ci){CO=W.call(this,Ci);if(CO){if(!CS||CO.dropzones.indexOf("XAxis")<0){if(Ce&&!Ce.isRowAttribute&&(Ce.tui===Ci)){AS.push({unit:CO,isAsc:CP});}else{Cc=CO;if(Cc.otp===12||Cc.otp===47){CV=q.call(this,BE.DssAxisColumns,CO);if(CU){AS.push({unit:CO,isAsc:CV!==BA});}else{if(CV!==y){AS.push({unit:CO,isAsc:CV!==BA});}}}}}}}for(Ci=0;Ci<Cj;Ci++){CO=a.call(this,Ci);if(CO){if(!Cd||CO.dropzones.indexOf("YAxis")<0){if(Ce&&Ce.isRowAttribute&&(Ce.tui===Ci)){CM.push({unit:CO,isAsc:CP});}else{Cc=CO;if(Cc.otp===12||Cc.otp===47){CV=q.call(this,BE.DssAxisRows,CO);if(CU){CM.push({unit:CO,isAsc:CV!==BA});}else{if(CV!==y){CM.push({unit:CO,isAsc:CV!==BA});}}}}}}}if(CZ.isABL===false){return CM.concat(AS);}if(CX){CQ=CX.row-this.gts.col.length;Cq=CX.col-this.gts.row.length;Cl=Cq%Cp;Ck=Ch.getMetricProp(undefined);Cf=Ap.copy(Ck[Cl],{});Cf.gvsRI=CQ;Cf.gvsCI=Cq;}var Ca=[];if(this.horizontalMode){Cb=Cb.concat(CM);if(CX){Cf.axis=B.DssAxisRows;if(Co.specialSortable){Cf.axis=B.DssAxisColumns;}for(Ci=0;Ci<Cg;Ci++){CY=W.call(this,Ci);if(Co.specialSortable&&CY.dropzones.indexOf("BreakBy")>=0){continue;}CW=Ap.copyProps(Cm,Ch.getColHeaderObj(Cq,Ci),{});CT=Ch.headerInfoToProp(1,CW,"n&id");Ap.copy(CT[0],CW);Ca.push(CW);}Ca.push(Cf);}Cb=Cb.concat(AS);if(CX){Cb.push({unit:Cf,isAsc:CR,elements:Ca});}}else{Cb=Cb.concat(AS);Cb=Cb.concat(CM);if(CX){Cf.axis=B.DssAxisColumns;if(Co.specialSortable){Cf.axis=B.DssAxisRows;}for(Ci=0;Ci<Cj;Ci++){CY=a.call(this,Ci);if(Co.specialSortable&&CY.dropzones.indexOf("BreakBy")>=0){continue;}CW=Ap.copyProps(Cm,Ch.getRowHeaderObj(CQ,Ci),{});CT=Ch.headerInfoToProp(0,CW,"n&id");Ap.copy(CT[0],CW);Ca.push(CW);}Ca.push(Cf);Cb.push({unit:Cf,isAsc:CR,elements:Ca});}}return Cb;},getSortActions:function(Ck){var Ci=-1,Ca=-1,CZ=[],CY,CW,Cg=false,CU=this.firstRes,Ch=CU.gsi,CM=Ch.sorts[0],CT=Ch.sorts[1],CQ=false,Cm=false,Ce,Cc,Cd,CN,Cf,CP,CR;if(CM){if(CM.length>0){CQ=true;}}if(CT){if(CT.length>0){Cm=true;}}if(CQ&&Cm){CZ.push({actionId:27,axisName:B.DssAxisRows});CZ.push({actionId:27,axisName:B.DssAxisColumns});}else{if(CQ){CZ.push({actionId:27,axisName:B.DssAxisRows});}else{if(Cm){CZ.push({actionId:27,axisName:B.DssAxisColumns});}}}for(Ce=0;Ce<Ck.length;Ce++){var Cl=Ck[Ce],Cj=Cl.isAsc,AS=Cl.unit,CS,CO,CY=AS.otp;if(AS.otp===4){CY=4;CS=[];if(Cl.elements){for(Cc=0;Cc<Cl.elements.length;Cc++){CS.push(Cl.elements[Cc]);}}var CX=null;for(Cc=0;Cc<CS.length;Cc++){var CV=CS[Cc];if(CV.otp===4){CX=CV;CW=CX.oid;break;}}if(CX!==null){if(Cl.elements){Cf=AS.axis;if(Cf===B.DssAxisRows){CO=this.gts.col;}else{if(Cf===B.DssAxisColumns){CO=this.gts.row;}}}CN=CO.sorts;if(!CN){CN={sortCollection:[]};CO.sorts=CN;}Cd={sortType:4,subtotalsPosition:0};CN.sortCollection.push(Cd);Cd.isAsc=Cj;Cd.metricID=CW;Cd.elements=CS;Cd.objectID=CW;Cd.objectType=CY;}if(Cf===B.DssAxisRows&&Ci>0){Cd.subtotalsPosition=Ci;}else{if(Cf===B.DssAxisColumns&&Ca>0){Cd.subtotalsPosition=Ca;}}CZ=CZ.concat(AF.call(this,Ce,1,CY,CW,Cj,Cf,Cd.subtotalsPosition,CS,null));}else{if(CY===12||(CY===47&&(AS.ost===12033||AS.ost===12032))){var Cb=(CY===47&&AS.ost===12033);CP=AS;Cf=CP.isRowAttribute?B.DssAxisRows:B.DssAxisColumns;CR=CP.fid;CW=CP.id;var Cn;if(Cf===B.DssAxisRows){Cn=this.gts.row;}else{if(Cf===B.DssAxisColumns){Cn=this.gts.col;}}CN=Cn.sorts;if(!CN){CN={sortCollection:[]};Cn.sorts=CN;}Cd={sortType:2,subtotalsPosition:0};CN.sortCollection.push(Cd);Cd.isAsc=Cj;Cd.attributeID=CW;Cd.formID=CR;Cd.objectID=CW;Cd.objectType=CY;if(Cf===B.DssAxisRows&&Ci>0){Cd.subtotalsPosition=Ci;}else{if(Cf===B.DssAxisColumns&&Ca>0){Cd.subtotalsPosition=Ca;}}CZ=CZ.concat(AF.call(this,Ce,CY===47?(Cb?24:10):3,CY,CW,Cj,Cf,Cd.subtotalsPosition,null,CR));}}}return B1(CZ);},fakeSortActionsStackTotal:function(CS){if(CS&&CS.length){var AS,CO;for(AS=0;AS<CS.length;AS++){if(CS[AS]&&CS[AS].eIds){CO=CS[AS];break;}}var CR=CO&&CO.eIds;if(CO&&CR&&CR.length){for(AS=0;AS<CR.length;AS++){if(CR[AS].otp===4){continue;}var CQ=CR[AS],CN,CM=CQ.id[2];if(CM!==":"){CM=";";}CN=CQ.id.split(CM)[1];if(CN){if(this.isAttrInZone(CN,"ColorBy")||this.isAttrInZone(CN,"BreakBy")){CQ.headerText=CQ.n="StackedTotal";var CP=CQ.id.split(CM);CQ.id="DB:"+CP[1]+":-1";}}}}}},getShapeFormatsObject:function(){var AS;AS=this[AX.FORMATS_ON_COMBINATION];if(!this.shapeFormatsRead){AS=this.view.getWidgetPropertyValue(AX.FORMATS_ON_COMBINATION);this[AX.FORMATS_ON_COMBINATION]=AS;this.shapeFormatsRead=true;}return AS;},setShapeFormatsWithCombination:function(CO,AS){var CM,CN;CM=this.getShapeFormatsObject();if(CM===undefined){CM=this[AX.FORMATS_ON_COMBINATION]={};}CN=l.serializeCombination(CO);if(Object.keys(AS).length<=0){delete CM[CN];}else{CM[CN]=AS;}this.view.setWidgetPropertyValue(AX.FORMATS_ON_COMBINATION,CM);},getShapeFormatsWithCombination:function(CN){if(CN===undefined||CN.length===0){return undefined;}var AS,CM;AS=this.getShapeFormatsObject();if(AS){CM=l.serializeCombination(CN);return AS[CM];}return undefined;},getDataLabelFontFormat:function(){var CN=this.property,AS=[BK.DATA_LABELS_FONT_FAMILY,BK.DATA_LABELS_FONT_SIZE,BK.DATA_LABELS_FONT_STYLE,BK.DATA_LABELS_FONT_COLOR],CM={};AS.forEach(function(CO){CM[CO]=CN.readItem(CO);});return CM;},getDefaultsForShape:function(CN){var CM=this.defaultsForShape;if(!CM){CM=this.defaultsForShape={};}if(CM[CN]){return CM[CN];}var CP=this.view,CO=CP.getDefaultProperties(),AS=CP.model.data.dz.visProp.fmt,CR={},CQ=[BK.SHAPE_LINE_THICKNESS,BK.SHAPE_LINE_COLOR,BK.SHAPE_LINE_STYLE,BK.SHAPE_FILL_COLOR,BK.SHAPE_FILL_STYLE,BK.SHAPE_FILL_TRANSPARENCY,BK.SHAPE_FILL_EFFECT,BK.SHAPE_FILL_COLOR_DEFAULT,BK.SHAPE_BORDER_STYLE,BK.SHAPE_BORDER_THICKNESS,BK.LINE_MARKER_SHOW,BK.LINE_MARKER_SHAPE,BK.LINE_MARKER_SIZE,BK.LINE_MARKER_COLOR_EQUAL,BK.PIE_EXPLODE,BK.DATA_LABELS_FONT_FAMILY,BK.DATA_LABELS_FONT_SIZE,BK.DATA_LABELS_FONT_STYLE,BK.DATA_LABELS_FONT_COLOR];this.property.updateDefaults(CO,AS);By.forEach(CQ,function(CS){CR[CS]=CO[CS];});if(CN===B0.PIE||CN===B0.RING){CR[BK.SHAPE_FILL_TRANSPARENCY]=70;CR[BK.SHAPE_BORDER_THICKNESS]=1;}else{CR[[BK.SHAPE_FILL_TRANSPARENCY]]=70;}if(CN===B0.BAR){CR[BK.SHAPE_BORDER_THICKNESS]=1;}CM[CN]=CR;return CR;},getVolatileDefaultsForShape:function(AS){var CM=this.volDefaultsForShape;if(!CM){CM=this.volDefaultsForShape={};}if(CM[AS]){return CM[AS];}var CN=this.getDefaultsForShape(AS);CM[AS]=Ap.copy(CN);return CM[AS];},refineShapeFormatsObject:function(){var CM=this[AX.FORMATS_ON_COMBINATION];var CS=["metricLevelProp","colorByLevelProp","concreteLevelProp"];this.levelPropCache={};var CQ=this.getColorByAttrsID()||[];var CR=this.getBreakByAttrsID()||[];CR=CR.filter(function(CT){return CQ.indexOf(CT)===-1;});function CP(CU){var CV=CR.some(function(CW){return CU.indexOf(CW)!==-1;});if(CV){return CS[2];}var CT=CQ.some(function(CW){return CU.indexOf(CW)!==-1;});if(CT){return CS[1];}return CS[0];}for(var CO in CM){var CN=CP(CO);this.levelPropCache[CN]=true;}var AS=this.view.model.data.dz.ColorBy;if("MetricNames" in AS&&!AS.TemplateUnit){this.levelPropCache.colorByLevelProp=true;}},clearShapeFormatsCache:function(AS){switch(AS){default:}delete this.levelPropCache;delete this.sharePropCache;delete this.allPropFormatsRead;delete this.allPropFormatsCache;delete this.lineMarkerShowCache;delete this.metricLvlDLRead;delete this.metricLvlDLCache;delete this.shapeColorCache;delete this.shapeColorFormatsCache;delete this.shapeFormatsCache;},getDefaultsMergedWithAllPropsCachedObject:function(AS){if(!this.sharePropCache){var CN=this.getDefaultsForShape(this.chartInfo.shape);var CM=this.getAllPropsFormatsCachedObject(AS);this.sharePropCache=l.getResolvedFormatsObject([CN,CM]);this.sharePropCache.lnMkShw=this.getLineMarkerShowCachedObject(AS);}return this.sharePropCache;},getLineMarkerShowCachedObject:function(AS){this.lineMarkerShowCache=this.lineMarkerShowCache||AS.getPropertyValue(BK.LINE_MARKER_SHOW);return this.lineMarkerShowCache;},getAllPropsFormatsCachedObject:function(AS){if(!this.allPropFormatsRead){this.allPropFormatsCache=AS.getPropertyValue(BK.ALL_SHAPE_FORMAT);this.allPropFormatsRead=true;}return this.allPropFormatsCache;},getMetricDataLabelCachedObject:function(CP,CO){var CM=true;if(!this.metricLvlDLRead){this.metricLvlDLCache=CP.getPropertyValue(AX.METRIC_LEVEL_DATA_LABEL);this.metricLvlDLRead=true;}var CQ=this.metricLvlDLCache;var AS=CM;if(CQ===undefined){AS=CM;}else{var CN=CO.assMetricDLIDCache=CO.assMetricDLIDCache||CO.getAssMetricDataLabelID();if(CN!==undefined){AS=CQ[CN];}else{AS=false;}}return AS;},getShapeFormatsCachedObject:function(AS){this.shapeFormatsCache=this.shapeFormatsCache||[];AS.idx="idx" in AS?AS.idx:this.shapeFormatsCache.length;return this.shapeFormatsCache[AS.idx];},setShapeFormatsCachedObject:function(CM,AS){this.shapeFormatsCache[CM.idx]=AS;},getComboLevelPropCachedObject:function(CM){var CP,CN,CO,AS=this.getShapeFormatsObject();if(!AS){return ;}if(!this.levelPropCache){this.refineShapeFormatsObject();}if(!CM.concreteCombStr&&this.levelPropCache.concreteLevelProp){CO=CM.getSelectedObjectLowestLevel(true);CM.concreteCombStr=(CO===undefined||CO.length===0)?"":l.serializeCombination(CO);}if(!CM.metricCombStr&&this.levelPropCache.metricLevelProp){CP=CM.getSelectedObjectMetricInfo();CM.metricCombStr=(CP===undefined||CP.length===0)?"":l.serializeCombination(CP);}if(!CM.colorByCombStr&&this.levelPropCache.colorByLevelProp){CN=CM.getSelectedObjectColorByInfo();CM.colorByCombStr=(CN===undefined||CN.length===0)?"":l.serializeCombination(CN);}return[AS[CM.concreteCombStr],AS[CM.metricCombStr],AS[CM.colorByCombStr]];},getShapeColorCachedObject:function(CM,AS){this.shapeColorCache=this.shapeColorCache||[];return this.shapeColorCache[AS.idx]=this.shapeColorCache[AS.idx]||CM.getColorByData();},getShapeColorFormatsCachedObject:function(CS,CP,CO,CU){var CM=CO,CT=mstrmojo.gm.ShapeFillType,CV=this.getMetricDataLabelCachedObject(CS,CP),CQ=this.getShapeColorCachedObject(CS,CP),CR=CQ+(CV?"T":"F");this.shapeColorFormatsCache=this.shapeColorFormatsCache||{};if(CU){if(this.shapeColorFormatsCache[CR]){return this.shapeColorFormatsCache[CR];}else{CM=this.shapeColorFormatsCache[CR]=Ap.copy(CO);}}CQ=(CQ!==undefined&&CQ!==null)?CQ:CM[BK.SHAPE_FILL_COLOR];var AS=false;if(CQ&&typeof CQ==="object"){AS=true;}if(CQ!==undefined){CM[BK.SHAPE_LINE_COLOR]=CM[BK.SHAPE_FILL_COLOR]=CQ;var CW=CS.getPropertyValue(BK.LINE_MARKER_COLOR);if(CW===undefined){CM[BK.LINE_MARKER_COLOR]=AS?CQ.c1:CQ;}else{CM[BK.LINE_MARKER_COLOR]=CW;}if(CM[BK.LINE_MARKER_BORDER_COLOR]===undefined){CM[BK.LINE_MARKER_BORDER_COLOR]=AS?CQ.c1:(CW!==undefined?CW:CQ);}if(CM[BK.SHAPE_BORDER_COLOR]===undefined){CM[BK.SHAPE_BORDER_COLOR]=AS?CQ.c1:CQ;}}CM[BK.SHAPE_FILL_STYLE]=AS?CT.Gradient:CT.Solid;if(AS&&this.chartInfo.isABL){var CN=CS.getShape();if(CN===Aj.LINE||CN===Aj.TICK){CM[BK.SHAPE_FILL_STYLE]=CT.Solid;CM[BK.SHAPE_LINE_COLOR]=CM[BK.SHAPE_FILL_COLOR]=CQ.c1;}}CM[BK.DATA_LABELS_SHOW]=CV;return CM;},forceUpdateAxis:function(){var AS=this.view;if(AS){return AS.forceUpdateAxis;}return false;},forceUpdateCharts:function(){var AS=this.view;if(AS){return AS.forceUpdateCharts;}return false;},clearLogScaleCahce:function(){delete this.logScaleCache;},resetDataLabelType:function(){var AS=this.chartInfo;if(AS){AS.dlTp=this.property.readItem(AX.DATA_LABEL);}},resetDataLabelPlacement:function(){var AS=this.chartInfo;if(AS){AS.dlPlmt=this.property.readItem(AX.DATA_LABELS_PLACEMENT);}},clearDataLabelFormatCache:function(){var AS=this.ChartFactory;if(AS&&AS.mUniversalProperty){delete AS.mUniversalProperty.DatatextFormat;}},resetDefaultShapeProp:function(){delete this.defaultsForShape;delete this.volDefaultsForShape;},formatAsAxisLabel:function(CN,CM){if(!CN||CN.length<=0){return undefined;}var AS;if(this.chartSubType===BM.PERCENT){AS=C.formatByMask("#%",CM);}else{AS=this.formatValue(CN,CM);}return AS;},formatValue:function(CW,CU){var CP,CV,CT,CQ,CS,CO,CM=this.inChartLayout,CR=CM.r,CN=CM.c,AS=this.mericsAxisMapCache;CV=this.getMetricIndexFromID(CW[0]);if(!AS){AS=this.mericsAxisMapCache={};}if(AS[CV]!==undefined){return this.formatMetricsValueUniformly(CW,CU,AS[CV]);}for(CP=0;CP<CR;CP++){CQ=Ai(this.getMetricsOnAxisOfChart(CP,0,"y",true));if(CQ.indexOf(CV)>=0){AS[CV]={row:CP,col:0,axisName:"y",isPrimary:true};return this.formatMetricsValueUniformly(CW,CU,AS[CV]);}CO=Ai(this.getMetricsOnAxisOfChart(CP,0,"y",false));if(CO.indexOf(CV)>=0){AS[CV]={row:CP,col:0,axisName:"y",isPrimary:false};return this.formatMetricsValueUniformly(CW,CU,AS[CV]);}}for(CP=0;CP<CN;CP++){CT=Ai(this.getMetricsOnAxisOfChart(0,CP,"x",true));if(CT.indexOf(CV)>=0){AS[CV]={row:0,col:CP,axisName:"x",isPrimary:true};return this.formatMetricsValueUniformly(CW,CU,AS[CV]);}CS=Ai(this.getMetricsOnAxisOfChart(0,CP,"x",false));if(CS.indexOf(CV)>=0){AS[CV]={row:0,col:CP,axisName:"x",isPrimary:false};return this.formatMetricsValueUniformly(CW,CU,AS[CV]);}}return AD.call(this,CU,CV);},getMetricInfo:function(CP){this.metricInfos=this.metricInfos||{};var CR=this.metricInfos;if(!!CR[CP]){return CR[CP];}var AS=this.gts,CN=AS.col,CQ=CN.length;if(CQ&&CN[CQ-1].otp===-1){var CO=CN[CQ-1].es;CO.forEach(function(CS){if(CS.oid===CP){CR[CP]=Ap.copy(CS,{});}});var CM=this.firstRes.gnf;CM.forEach(function(CS){if(CS.id===CP){CR[CP].nf=Ap.copy(CS,{});}});}},formatMetricsValueUniformly:function(Ce,CY,AS){var CU,CR,CQ=AS.row,CP=AS.col,CO=AS.axisName,CZ=AS.isPrimary,CN=this.condenseEchos,CV=this.mapFromChartToLDSIndex(CQ,CP),CW=CO==="x"?CQ:CV.r,CT=CO==="x"?CV.c:CP,CM=CV.dpIdx,CS=this.model.getLocalDataSet(CW,CT),Cg=CS.generateDataProvider(),CX=Cg[CM],Ca=CO.toUpperCase()+(CZ?"AxisChart":"2AxisChart");if(CX[Ca]){return CX[Ca].formatAsUniformAxisLabel(CY);}CR=CO==="x"?CP:CQ;Ca=CO.toUpperCase();if(CZ){Ca=Ca+"1";}else{Ca=Ca+"2";}CN=CN&&CN[Ca];CU=CN&&CN[CR];if(CU){return k.abbreviateNumber(CY,5);}else{Ca=Ca.toLowerCase();if(CZ){Ca=Ca[0];}Ca=Ca+"Condense";if(this[Ca]){return k.abbreviateNumber(CY,5);}}var Cf=this,Cd=[],Cc="General";Ce.forEach(function(Ci){var Ch=Cf.getMetricInfo(Ci);if(Ch&&Ch.nf){Cd.push(Ch.nf);}});if(Cd.length){var Cb=1;Cc=Cd[0].nfs;for(;Cb<Cd.length;Cb++){if(Cd[Cb].nfs!=Cc){Cc="General";break;}}}return C.formatByMask(Cc,CY);},hasAttributesInDropzone:function(CM){var AS=this.dz[CM].TemplateUnit;return(AS&&AS.length>0);},getAttributeIds:function(){if(!this.attributeIds){var CN=this.gts.row,AS=this.gts.col,CM={};By.forEach(CN,function(CO){if(CO.otp!==-1&&CO.otp!==4){CM[CO.id]=CO.es;}});By.forEach(AS,function(CO){if(CO.otp!==-1&&CO.otp!==4){CM[CO.id]=CO.es;}});this.attributeIds=CM;}return this.attributeIds;},getDataProvider:function(AS,CM){return U.call(this,AS,CM);},isOneDotCase:function(){var AS=this.model,CN,CM,CO;CN=AS.getLocalDataSet(0,0);if(this.chartDirection===BW.EnumABLDirection.VERTICAL){CO=AS.getMetricCount();if(CO===0){CM=CN.wd;}else{CM=CN.wd/CO;}}else{CM=CN.items.length;}return CM<2;},isCompactMode:function(){return this.view.getWidgetPropertyValue(AX.FIT_TO)===AP.COMPACT;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.chart.enums.EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMLegend","GMController","GMProperty","GMAxisScale","GMPropertyNode","GMPropDefaults");var j=mstrmojo,Ao=j.gm,Ap=j.func.wrapMethods,Q=j.array,Y=j.hash,J=Ao.GMProperty,As=Ao.GMUtility,F=j.VisUtility,T=Ao.EnumShape,Am=Ao.EnumSubtype,r=Ao.EnumGridLines,n=Ao.EnumTheme,q=Ao.EnumLegendSlot,AK=Ao.EnumTrendRefModelLabels,t=Ao.EnumRefLineModelType,K=Ao.EnumSelectionOptionLevel,Z=Ao.GMPropDefaults,H=Ao.EnumGraphType,p=Ao.EnumColorByType,Ar=j.chart.enums.EnumLineStyle,Ac=Ao.EnumCombinedLineStyle,Al=Ao.EnumShapeFormatStatus,o=Ao.FormatingPropertyTag,AR=Ao.WidgetPropertyTag,L=Ao.GMAxisScale,s=Ao.EnumAxisScale,AX=Ao.EnumIdentityType,B=j.VisEnum.ControlType,AZ=Ao.GMPropertyNode,AI=j.VisEnum.VIS_CARDLIMIT.NON_GRID,AU={n:"Metric Names",did:"00000000000000000000000000000000",t:0,cs:1};var AT="_tmsp",g="_default",S="allVal",AQ="rfLnFnt",Ae=true;var AG={lgdBgFillClr:"lgdBgFillStyle",shpFillClr:"shpFillStyle",bgFillClr:"bgFillStyle",rwHdrFillClr:"rwHdrFillStyle",colHdrFillClr:"colHdrFillStyle"};var AA=[{pos:q.LEFT_TOP},{pos:q.LEFT_MIDDLE},{pos:q.LEFT_BOTTOM},{pos:q.RIGHT_TOP},{pos:q.RIGHT_MIDDLE},{pos:q.RIGHT_BOTTOM}];var y=[o.MAJOR_GRID_LINES_COLOR,o.MAJOR_GRID_LINES_THICKNESS,o.MAJOR_GRID_LINES_STYLE,o.MINER_GRID_LINES_COLOR,o.MINER_GRID_LINES_THICKNESS,o.MINER_GRID_LINES_STYLE];var D=[AR.AXIS_SCALE,AR.AXIS_SCALE_DATA,AR.SUB_TYPE,AR.OUTSIDE_BORDER,AR.SELECTION_TYPE,AR.SELECTIONS,AR.AXIS_SCALE_MANUAL_MIN,AR.AXIS_SCALE_MANUAL_MAX,AR.SINGLE_AXIS_SCALE_TYPE,AR.TREND_LINE_DEF,AR.REF_LINE_DEF,o.OUTSIDE_BORDER_SHOW,o.OUTSIDE_BORDER_COLOR,o.OUTSIDE_BORDER_STYLE,o.OUTSIDE_BORDER_THICKNESS,o.COLOR_SQUARE_COLOR];var b=[o.MAJOR_GRID_LINES_SHOW,o.MAJOR_GRID_LINES_COLOR,o.MAJOR_GRID_LINES_THICKNESS,o.MAJOR_GRID_LINES_STYLE,o.MINOR_GRID_LINES_SHOW,o.MINER_GRID_LINES_COLOR,o.MINER_GRID_LINES_THICKNESS,o.MINER_GRID_LINES_STYLE,o.X_AXIS_LINE_SHOW,o.X_AXIS_LINE_COLOR,o.X_AXIS_LINE_STYLE,o.X_AXIS_LINE_THICKNESS,o.X_AXIS_TITLE_SHOW,o.X_AXIS_TITLE_CONTENT,o.X_AXIS_TITLE_FONT_COLOR,o.X_AXIS_TITLE_FONT_FAMILY,o.X_AXIS_TITLE_FONT_STYLE,o.X_AXIS_TITLE_FONT_SIZE,o.X_AXIS_LABELS_FONT_COLOR,o.X_AXIS_LABELS_FONT_SIZE,o.X_AXIS_LABELS_FONT_FAMILY,o.X_AXIS_LABELS_FONT_STYLE,o.X_AXIS_LABELS_ROTATION,o.X_AXIS_LABELS_SHOW,o.Y_AXIS_LINE_SHOW,o.Y_AXIS_LINE_COLOR,o.Y_AXIS_LINE_STYLE,o.Y_AXIS_LINE_THICKNESS,o.Y_AXIS_TITLE_SHOW,o.Y_AXIS_TITLE_CONTENT,o.Y_AXIS_TITLE_FONT_SIZE,o.Y_AXIS_TITLE_FONT_COLOR,o.Y_AXIS_TITLE_FONT_FAMILY,o.Y_AXIS_TITLE_FONT_STYLE,o.Y_AXIS_LABELS_FONT_SIZE,o.Y_AXIS_LABELS_FONT_COLOR,o.Y_AXIS_LABELS_FONT_FAMILY,o.Y_AXIS_LABELS_FONT_STYLE,o.Y_AXIS_LABELS_ROTATION,o.Y_AXIS_LABELS_SHOW,o.MAJOR_GRID_LINES_SHOW,o.MAJOR_GRID_LINES_COLOR,o.MAJOR_GRID_LINES_THICKNESS,o.MAJOR_GRID_LINES_STYLE,o.MINOR_GRID_LINES_SHOW,o.MINER_GRID_LINES_COLOR,o.MINER_GRID_LINES_THICKNESS,o.MINER_GRID_LINES_STYLE,o.X_AXIS_ORIGIN_LINE_SHOW,o.X_AXIS_ORIGIN_LINE_COLOR,o.X_AXIS_ORIGIN_LINE_STYLE,o.X_AXIS_ORIGIN_LINE_THICKNESS,o.Y_AXIS_ORIGIN_LINE_SHOW,o.Y_AXIS_ORIGIN_LINE_COLOR,o.Y_AXIS_ORIGIN_LINE_STYLE,o.Y_AXIS_ORIGIN_LINE_THICKNESS];var W=[AR.METRIC_SHAPES,AR.LOG_SCALE,AR.TREND_LINE_DEF,AR.TREND_BUBBLE_FORE_DEF,AR.REF_LINE_DEF,AR.AXIS_ORIGIN,AR.FORMATS_ON_COMBINATION,o.ALL_SHAPE_FORMAT,AR.METRIC_LEVEL_DATA_LABEL];var l={UNKNOW:-1,UPDATE_CHARTS:1,CHART_SCALE:2,SPLITTER_LINE_SCALE:3,UPDATE_ALL:4};var h=[o.ROW_TEXT_SHOW,o.ROW_HEADER_SHOW,o.ROW_VALUES_SHOW,o.COLUMN_TEXT_SHOW,o.COLUMN_HEADER_SHOW,o.COLUMN_VALUES_SHOW,o.ALL_ROW_COLUMN_SHOW,o.ROW_TEXT_TEXT_FONT_FAMILY,o.ROW_TEXT_TEXT_FONT_SIZE,o.ROW_TEXT_TEXT_FONT_STYLE,o.ROW_HEADER_TEXT_FONT_FAMILY,o.ROW_HEADER_TEXT_FONT_SIZE,o.ROW_HEADER_TEXT_FONT_STYLE,o.ROW_VAVLUE_TEXT_FONT_FAMILY,o.ROW_VAVLUE_TEXT_FONT_SIZE,o.ROW_VAVLUE_TEXT_FONT_STYLE,o.COLUMN_TEXT_TEXT_FONT_FAMILY,o.COLUMN_TEXT_TEXT_FONT_SIZE,o.COLUMN_TEXT_TEXT_FONT_STYLE,o.COLUMN_HEADER_TEXT_FONT_FAMILY,o.COLUMN_HEADER_TEXT_FONT_SIZE,o.COLUMN_HEADER_TEXT_FONT_STYLE,o.COLUMN_VAVLUE_TEXT_FONT_FAMILY,o.COLUMN_VAVLUE_TEXT_FONT_SIZE,o.COLUMN_VAVLUE_TEXT_FONT_STYLE,o.ALL_ROW_COLUMN_TEXT_FONT_FAMILY,o.ALL_ROW_COLUMN_TEXT_FONT_SIZE,o.ALL_ROW_COLUMN_TEXT_FONT_STYLE,o.V_MATRIX_LINES_SHOW,o.H_MATRIX_LINES_SHOW,o.ALL_MATRIX_LINES_SHOW,o.V_MATRIX_LINES_COMBINED_STYLE,o.H_MATRIX_LINES_COMBINED_STYLE,o.ALL_MATRIX_LINES_COMBINED_STYLE,o.X_AXIS_LINE_SHOW,o.X_AXIS_LINE_COMBINED_STYLE,o.Y_AXIS_LINE_SHOW,o.Y_AXIS_LINE_COMBINED_STYLE,o.ALL_AXIS_LINE_SHOW,o.ALL_AXIS_LINE_COMBINED_STYLE,o.ALL_LINE_SHOW,o.ALL_LINE_COMBINED_STYLE,o.X_AXIS_TITLE_SHOW,o.Y_AXIS_TITLE_SHOW,o.ALL_AXIS_TITLE_SHOW,o.X_AXIS_TITLE_CONTENT,o.Y_AXIS_TITLE_CONTENT,o.ALL_AXIS_TITLE_CONTENT,o.X_AXIS_LABELS_SHOW,o.Y_AXIS_LABELS_SHOW,o.ALL_AXIS_LABELS_SHOW,o.X_AXIS_LABELS_ROTATION,o.Y_AXIS_LABELS_ROTATION,o.ALL_AXIS_LABELS_ROTATION,o.X_AXIS_TITLE_FONT_FAMILY,o.X_AXIS_TITLE_FONT_STYLE,o.X_AXIS_TITLE_FONT_SIZE,o.Y_AXIS_TITLE_FONT_FAMILY,o.Y_AXIS_TITLE_FONT_STYLE,o.Y_AXIS_TITLE_FONT_SIZE,o.ALL_AXIS_TITLE_FONT_FAMILY,o.ALL_AXIS_TITLE_FONT_STYLE,o.ALL_AXIS_TITLE_FONT_SIZE,o.X_AXIS_LABELS_FONT_SIZE,o.X_AXIS_LABELS_FONT_FAMILY,o.X_AXIS_LABELS_FONT_STYLE,o.Y_AXIS_LABELS_FONT_SIZE,o.Y_AXIS_LABELS_FONT_FAMILY,o.Y_AXIS_LABELS_FONT_STYLE,o.ALL_AXIS_LABELS_FONT_SIZE,o.ALL_AXIS_LABELS_FONT_FAMILY,o.ALL_AXIS_LABELS_FONT_STYLE,o.ALL_TEXT_FONT_SIZE,o.ALL_TEXT_FONT_FAMILY,o.ALL_TEXT_FONT_STYLE,AR.AXIS_SCALE_DATA,AR.FIT_TO];var N=[o.X_AXIS_ORIGIN_LINE_SHOW,o.X_AXIS_ORIGIN_LINE_COMBINED_STYLE,o.Y_AXIS_ORIGIN_LINE_SHOW,o.Y_AXIS_ORIGIN_LINE_COMBINED_STYLE,o.ALL_AXIS_ORIGIN_LINE_SHOW,o.ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE,AR.TREND_LINE_DEF,AR.REF_LINE_DEF,o.MODIFIED_DEF_FILL_COLOR,o.SHAPE_FILL_TRANSPARENCY,o.SHAPE_LINE_COMBINED_STYLE,o.SHAPE_BORDER_COLOR,o.SHAPE_BORDER_COMBINED_STYLE,o.LINE_MARKER_SHOW,o.LINE_MARKER_COLOR,o.REF_LABELS_FONT_FAMILY,o.REF_LABELS_FONT_STYLE,o.REF_LABELS_FONT_SIZE];var I=[AR.SCALE_CHART_WIDTH,AR.SCALE_CHART_HEIGHT];var C=[AR.SCALE_ROW_HEADERS,AR.SCALE_COL_HEADERS,AR.SCALE_Y,AR.SCALE_Y2,AR.SCALE_X,AR.SCALE_X2,AR.SCALE_V_EXTRA_LINE];var Ad=[o.ALL_TEXT_FONT_COLOR,o.ALL_TEXT_FONT_STYLE,o.ALL_AXIS_LABELS_FONT_COLOR,o.ALL_AXIS_LABELS_FONT_STYLE];var Aa=[AR.BANDING,AR.AXIS_SCALE_DATA,AR.AXIS_ORIGIN,AR.MAX_SIZE_TYPE,AR.MAX_SIZE_VALUE,AR.MIN_SIZE_TYPE,AR.MIN_SIZE_VALUE];var Aq=[o.SHAPE_LINE_COMBINED_STYLE,o.SHAPE_BORDER_COMBINED_STYLE,o.SHAPE_FILL_TRANSPARENCY];function AH(Au){var At=typeof Au;if(At==="object"||At==="array"){return new AZ({jsonObj:Au,parent:undefined});}return Au;}function AN(At){var Av=1,Au;if(At===Ac.NONE){Au=Ar.LS_NONE;Av=0;}else{if(At===Ac.DASHED){Au=Ar.LS_DASH;}else{if(At===Ac.DOTTED){Au=Ar.LS_DOT;}else{Au=Ar.LS_SOLID;if(At===Ac.THICK){Av=2;}}}}return{ceLnStyle:Au,thk:Av};}function AF(){var At={},Au=this.getShowDataLabelOptions();Au.forEach(function(Av){At[Av.key]=Ae;});return At;}function M(At){var Aw=this.getShowDataLabelOptions(),Av=true,Au;Aw.forEach(function(Ax){Au=Ax.key;if(Au!=="AllMetrics"){if(At[Au]===undefined){At[Au]=false;}if(At[Au]===false){Av=false;}}});At.AllMetrics=Av;}function X(At){if(typeof At==="boolean"){return At===true?1:0;}return At;}function Af(Av,Au){var At=AH({});At.setProperty(Av,Au,true);return At.jsonObj;}function AY(Ay){var Av={},A0,At=Ay.existing,Au,Az={},A1={rfLnFntClr:true,rfLnFntFml:true,rfLnFntStyle:true,rfLnFntSz:true,trdRefLnClr:true,trdRefLnStyle:true,trdRefLnThk:true},Ax={metricId:"metricId",trdTp:"lineType",trdLvl:"lineLevel",trdSeason:"seasonality",trdIncBB:"includeBreakby",trdEnabled:"enabled",dropzoneId:"dropzoneId",refTp:"lineType",refLvl:"lineLevel",refLbTp:"lineLabel",trdDgr:"lineConstant",refCstVl:"lineConstant",refEnabled:"enabled",modix:"lineIndex",trdFstEnabled:"enabled",trdBbForeEnabled:"enabled",trdBwdFst:"min",trdFwdFst:"max",trdBbForeBwd:"min",trdBbForeFwd:"max",subAxis:"subAxis",refLnName:"refLnName"};if(Ay.trdRefLnCmbStyle!==undefined){var Aw=AN(Ay.trdRefLnCmbStyle);Ay.trdRefLnStyle=Aw.ceLnStyle;Ay.trdRefLnThk=Aw.thk;}for(A0 in Ay){if(Ay.hasOwnProperty(A0)){if(A1[A0]===true){if(A0.indexOf(AQ)>=0&&At){Az[A0]=Af(A0,Ay[A0]);}else{Az[A0]=X(Ay[A0]);}}else{Au=Ax[A0];if(Au!==undefined){Av[Au]=X(Ay[A0]);}}}}Av.format=As.replaceSpecialChars(JSON.stringify(Az));return Av;}function AW(Au,A1,A0){var A7=this.GMController,Aw=A1.key.split(",")[0],A9=this.model.data,Ay,A4,A8=Au.jsonObj,A3=["existing","trdBwdFst","trdDgr","trdEnabled","trdFwdFst","trdIncBB","trdLvl","trdTp","refLvl","refTp","refEnabled","refCstVl"],A6,A2=false,A5,Ax,Av,At;if(A8.modix===undefined){return true;}A6=A8.modix-1;if(Aw.indexOf("Axis")>=0){A4=A9.dz[Aw[0]+"Axis"].mdls;}else{Ay=A7.getMetricIndexFromID(Aw);A4=A9.gsi.mx[Ay].mdls;}A5=A4.mod_c[A6];Ax=A5.fms;if(Ax===""||Ax===undefined){At={};}else{Av=As.restoreSpecialChars(Ax);At=JSON.parse(Av);}if(A8.trdRefLnCmbStyle!==undefined){var Az=AN(A8.trdRefLnCmbStyle);A8.trdRefLnStyle=Az.ceLnStyle;A8.trdRefLnThk=Az.thk;At.trdRefLnStyle=A8.trdRefLnStyle;At.trdRefLnThk=Az.thk;}Q.forEach(Au.modifiedPropertyKeys,function(BA){if(A3.indexOf(BA)!==-1){A2=true;}var BB=A8[BA];if(At[BA]!==undefined){if(BA.indexOf(AQ)>=0){At[BA]=Af(BA,BB);}else{At[BA]=X(BB);}}if(BA===AR.REF_LINE_NAME){A5.lin=BB;}});A5.fms=As.replaceSpecialChars(JSON.stringify(At));if(!A0){A5.la=A8.refLbTp;}return A2;}function AL(Ax){var Az=this.GMController[AR.REF_LINE_DEF],Au=Ax.key.split(","),At=Au[0],A1=Au[1],Av=Az[At]||{},A0=t[A1],Ay=Av[A0],Aw;Q.forEach(Ay,function(A2){if(A2.modix===Ax.modix){Aw=A2;return false;}});return Aw;}function AO(Au,Ax,Ay){var Az=Ax.modifiedPropertyKeys,A0=Ax.jsonObj,At=Az.length,Aw,Av;for(Aw=0;Aw<At;Aw++){Av=Az[Aw];if(A0[Av]==="default"){delete Au[Av];delete Au[Av+AT];continue;}Au[Av]=A0[Av];if(Ay!==true){Au[Av+AT]=A0[Av+AT];}}return Au;}function k(Av){var Au,Aw,At=[AR.TREND_SEASONALITY,AR.TREND_FORECAST_ENABLED,AR.TREND_BWD_FORECAST,AR.TREND_FWD_FORECAST];for(Au=0,Aw=Av.length;Au<Aw;Au++){if(At.indexOf(Av[Au])>=0){return true;}}return false;}function AE(){var Au=this.getDefaultProperties(),At=this;y.forEach(function(Av){At.setWidgetPropertyValue(Av,Au[Av]);});}function f(Au){var At=this;Au.forEach(function(Av){if(y.indexOf(Av)>=0){At.setWidgetPropertyValue(o.GRID_LINE_AUTO,false);}});}function Ag(Av){var At=typeof Av,Au;if(At==="number"||At==="string"){Au=mstrmojo.gm.ShapeFillType.Solid;}else{Au=mstrmojo.gm.ShapeFillType.Gradient;}return Au;}function U(Au,At){if(typeof At==="object"&&Au.indexOf(AQ)>=0){return At[Au];}return At;}function AP(Au,Aw,Av,At){if(!At&&Au.indexOf(AQ)>=0){Aw=Af(Au,Aw);}if(Av===undefined){var Ay=AG[Au];if(Ay){this.setWidgetPropertyValue(Ay,Ag(Aw));}this.setWidgetPropertyValue(Au,(Aw&&Aw.jsonObj)||Aw);}else{var Ax=this.getWidgetPropertyValue(Au);if(Ax===undefined){Ax={};}Ax[Av.key]=(Aw&&Aw.jsonObj)||Aw;this.setWidgetPropertyValue(Au,Ax);}}function V(Ax,Au,At){var Az,Ay,A1=this,A3,Aw,Av,A0,A4=false,A2=this.GMController,A5;if(Ax===AR.METRIC_SHAPES){A3=Au.modifiedPropertyKeys[0];Ay={key:A3};Az=this.readGlobalProperty(AR.TREND_LINE_DEF,Ay);if(Az.jsonObj[AR.TREND_ENABLED]){Aw=A2.getMetricIndexFromID(A3);Av=As.isTrendLineAvailableForMetric(this,Aw);A0=As.isTrendLineAvailableForMetric(this,Aw,Au.jsonObj[A3]);if(Av!==A0){A4=true;}}}else{if(Ax===AR.SHAPE){if(At.isABL&&At.dirc===Ao.EnumABLDirection.HORIZONTAL){A5=A2.getMetricsOnXAxis();}else{if(At.isBubbleOrScatter||(At.isABL&&At.dirc===Ao.EnumABLDirection.VERTICAL)){A5=A2.getMetricsOnYAxis();}}Q.forEach(A5,function(A6){A3=A2.model.getMetricIDsFromIndex([A6])[0];Ay={key:A3};Az=A1.readGlobalProperty(AR.TREND_LINE_DEF,Ay);if(Az.jsonObj[AR.TREND_ENABLED]){Av=As.isTrendLineAvailableForMetric(A1,A6);A0=As.isTrendLineAvailableForMetric(A1,A6,Au);if(Av!==A0){A4=true;return false;}}});}}return A4;}function Ah(Au,Aw,Ay){if(this.skipSuppressDataCheck){return false;}if(D.indexOf(Au)>=0){return true;}if(V.call(this,Au,Aw,Ay)){return true;}if(Au===AR.SHAPE){var At=this.readGlobalProperty(Au),Av=this.GMController,Ax;if(Av.getUnitsCountInSliceBy()>0&&(T.PIE===At||T.RING===At)){return true;}Ax=this.readGlobalProperty(AR.SUB_TYPE);if((T.AREA===At||T.AREA===Aw)&&Ax===Am.AUTO){return true;}}return false;}function AM(Az,Ax){var Ay=this.GMController,A0=this.getChartInfo();Ax.puFiltersConfig={};if(Ay.showMetricSortIcon){var Aw=this.getWidgetPropertyValue(AR.SORT_INDEX),Au=this.getWidgetPropertyValue(AR.SORT_ORDER),Av=(Az===Am.STACKED||Az===Am.PERCENT||(Az===Am.AUTO&&A0.tp===H.AREA)),At=Ay.getUpdateMetricSortAction(Aw,Au,Av);Ax.actions.push(At);}}function Ak(Au,At){Au=parseInt(Au,10);if(At===Ar.LS_NONE||Au===0){return Ac.NONE;}if(At===Ar.LS_DASH){return Ac.DASHED;}if(At===Ar.LS_DOT){return Ac.DOTTED;}if(At===Ar.LS_SOLID){if(Au===1){return Ac.THIN;}return Ac.THICK;}}function Ai(Av,Au){var At={};if(Au){Q.forEach(Av,function(Aw){if(Aw===AR.TREND_REF_LINE_COMBINED_STYLE){At[AR.TREND_REF_LINE_THICKNESS]=Au[AR.TREND_REF_LINE_THICKNESS];At[AR.TREND_REF_LINE_STYLE]=Au[AR.TREND_REF_LINE_STYLE];At[AR.TREND_REF_LINE_COMBINED_STYLE]=Ak(Au[AR.TREND_REF_LINE_THICKNESS],Au[AR.TREND_REF_LINE_STYLE]);}else{At[Aw]=Au[Aw];}});}return At;}function z(Aw,A2,Ay){var BD,Az,A1,BC,BB=this.GMController,A0=this.model.data.dz.visProp.fmt.allShpFmt,A3,Av=BB.getDefaultsForShape(BB.getChartInfo().shape),Ax=[];if(Aw===K.ALL_SHAPE){Ax.push(Av);Az=o.ALL_SHAPE_FORMAT;A1=this.getWidgetPropertyValue(Az);Ax.push(A1);}else{if(Aw===K.COLOR_BY){Q.forEach(Ay,function(BE){Ax.push(Av);A3=BB.getShapeFormatsWithCombination(BE);if(A3){Ax.push(A3);}else{Ax.push(As.stringToJSON(A0));}});}else{if(Aw===K.METRIC){Q.forEach(Ay,function(BE){Ax.push(Av);Ax.push(BB.getShapeFormatsWithCombination(BE));});}else{if(Aw===K.ITSELF){Q.forEach(A2,function(BE){if(BE.isPie){Ax.push(BE.sPieDP.getFormattingProperties(BE.sliceIdx));}else{BC=BE.getGraphCell();Ax.push(BC.getFormattingProperties());}});}}}}BD=As.getResolvedFormatsObject(Ax);var A4=BD.shpFillClr,BA;if(BD===Av){BA=BB.getVolatileDefaultsForShape(BB.getChartInfo().shape);}else{BA=BD;}if(A4!==undefined){BA[o.SHAPE_LINE_COLOR]=BA[o.SHAPE_FILL_COLOR]=A4;}var A7=false,A6=false,At=false,A8,A5;var Au=[],A9;Q.forEach(Ax,function(BE){if(BE!==undefined){Au.push(BE);}});A9=Au.length;for(A8=1;A8<A9;A8++){A5=Au[A8];if(A5[o.LINE_MARKER_COLOR]!==undefined){At=true;}if(A5[o.LINE_MARKER_BORDER_COLOR]!==undefined){A6=true;}if(A5[o.SHAPE_BORDER_COLOR]!==undefined){A7=true;}}if(!At){delete BA[o.LINE_MARKER_COLOR];}if(!A6){delete BA[o.LINE_MARKER_BORDER_COLOR];}if(!A7){delete BA[o.SHAPE_BORDER_COLOR];}return BA;}function AC(At){[o.SHAPE_LINE_COMBINED_STYLE,o.SHAPE_BORDER_COMBINED_STYLE].forEach(function(Au){var Ax=Au.replace("CmbStyle","Thk"),Aw=Au.replace("CmbStyle","Style"),Av=At[Ax],Ay=At[Aw];if(Av!==undefined&&Ay!==undefined){At[Au]=Ak(Av,Ay);}});}function x(Au,At){if(!Au){return ;}Q.forEach(Aq,function(Av){if(Au[Av]!==undefined){if(At[Av]===undefined){At[Av]=[];}At[Av].push({val:Au[Av],tmsp:Au[Av+AT]});}});}function AV(Az,Av){var Au,At,Ay,Ax,Aw;Q.forEach(Aq,function(A0){Au=Az[A0];At=Av[A0+AT];Ay=false;Aw=false;Ax=undefined;Q.forEach(Au,function(A1){if(At!==undefined&&A1.tmsp!==undefined&&A1.tmsp>At){Ay=true;}if(Ax===undefined){Ax=A1.val;}else{if(Ax!==A1.val){Aw=true;}}});if(At===undefined||Ay){if(Aw){Av[A0]=undefined;}else{if(Ax!==undefined){Av[A0]=Ax;}}}});}function u(At,Av){var Au;Q.forEach(Av,function(Aw){Au=false;Q.forEach(At,function(Ax){if(Ax.tp===4&&Ax.eid===Aw.eid){Au=true;return false;}});if(!Au){return false;}});return true;}function AB(Ax,Au,At){var Av=[],Aw=As.reverseMapping(Au);Q.forEach(Ax,function(Ay){if(Ay.tid===-1){if(At){Av.push(Ay);}}else{if(Aw[Ay.tid]!==undefined){Av.push(Ay);}}});return Av;}function R(Av,Au,At){var Ax={},Aw=[];Av.forEach(function(Az){var Ay=AB(Az,Au,At),A0=As.serializeCombination(Ay);if(Ax[A0]===undefined){Ax[A0]=true;Aw.push(Ay);}});return Aw;}function G(){var At=this.model.data||{},Au=F.getPropertyByPath(At,"gts.row",[]),Aw=F.getPropertyByPath(At,"gts.col",[]),Av=Au.concat(Aw);return Av;}function AJ(At){if(!At||At.length<=0){return undefined;}var Au,Av=true,Aw=At.length;if(Aw===1){return At[0];}for(Au=1;Au<Aw;Au++){if(At[Au]!==At[Au-1]){Av=false;break;}}if(Av){return At[0];}return undefined;}function P(Ax,Au,Aw,Av){var Az,Ay,At={};["jsonObj","modifiedPropertyKeys","opt"].forEach(function(A0){if(Ax.hasOwnProperty(A0)){At[A0]=Y.clone(Ax[A0]);}});Az=At.jsonObj;if(Aw){for(Ay in Au){if(Au.hasOwnProperty(Ay)){Az[Ay]=Au[Ay];}}}else{Q.forEach(Av||At.modifiedPropertyKeys,function(A0){if(Au.hasOwnProperty(A0)){Az[A0]=Au[A0];}});}return At;}function E(Ay,Aw,Az,Av){var Au,Ax,At=[];for(Au in Az){if(((Av&&Au==="AllMetrics")||(!Av&&Au!=="AllMetrics"))&&Az.hasOwnProperty(Au)){Ax={};Ax.modifiedPropertyKeys=Y.clone(Aw);Ax.jsonObj=Y.clone(Az[Au]);At.push({name:Ay,value:Ax,option:{key:Au}});}}return At;}function a(At,Au){return At===AR.REF_LINE_DEF&&Au[S].modifiedPropertyKeys[0]===AR.REF_LINE_NAME;}function d(){return{suppressData:true,needRefresh:true,actions:[],undoRedoCallback:undefined};}function e(Ay,Au,A2){var Ax,Av=A2.length,At,Aw,A0,Az,A1;if(Ay===AR.REF_LINE_DEF||Ay===AR.TREND_LINE_DEF){Ay=Au.modifiedPropertyKeys[0];A1=Ay;if(Ay===o.REF_LABELS_FONT_COLOR||Ay===AR.TREND_REF_LINE_COLOR){return false;}if(Ay===AR.TREND_REF_LINE_COMBINED_STYLE){A1=AR.TREND_REF_LINE_THICKNESS;}if(!Au.jsonObj.fmt){return true;}A2=[];A2.push(Au.jsonObj.fmt[A1]);Av=A2.length;Au=Au.jsonObj[A1];}if(Av<=0){return true;}if(Ay.indexOf("FntStyle")>=0){A0=Au&1;Az=Au&2;for(Ax=0;Ax<Av;Ax++){At=A2[Ax];if(typeof At==="object"){At=At[Ay];}if((A0!==(At&1))||(Az!==(At&2))){return true;}}return false;}if(Ay.indexOf("LnCmbStyle")>=0){if(A1===o.TREND_REF_LINE_THICKNESS){Aw=Au;}else{Aw=AN(Au).thk;}for(Ax=0;Ax<Av;Ax++){if((Aw!==2&&A2[Ax]===2)||(Aw===2&&A2[Ax]!==2)){return true;}}return false;}return true;}mstrmojo.gm._GMPropertyHandler=mstrmojo.provide("mstrmojo.gm._GMPropertyHandler",{scriptClass:"mstrmojo.gm._GMPropertyHandler",getWidgetPropertyDefaultValue:function(Au,At){return this.property.readItemDefault(Au,At);},getWidgetPropertyValue:function(At){return this.property.readItem(At);},setWidgetPropertyValue:function(Au,At){if(Au===o.V_MATRIX_LINES_SHOW||Au===o.H_MATRIX_LINES_SHOW){this.property.removeItem(AR.MATRIX_LINES);}if(Au===o.X_AXIS_LINE_SHOW||Au===o.Y_AXIS_LINE_SHOW){this.property.removeItem(AR.AXES);}this.property.updateItem(Au,At);},removeWidgetProperty:function(At){this.property.removeItem(At);},getWidgetProps:function(){return this.property.generalProps;},isXMLDirty:function(){return this.property.isXMLDirty();},resetXMLDirtyFlag:function(){this.property.resetXMLDirtyFlag();},readGlobalProperty:function(A4,A3){if(A4.indexOf("CmbStyle")!==-1){var A6=A4.replace("CmbStyle","Thk"),A7=A4.replace("CmbStyle","Style"),A1=this.readGlobalProperty(A6,A3),BD=this.readGlobalProperty(A7,A3);if(A1===undefined||BD===undefined){return undefined;}return Ak(A1,BD);}if(A4===AR.TREND_BUBBLE_MAX||A4===AR.TREND_BUBBLE_MIN){var BA=this.getGlobalExtremeForAxisOrMetric(A3.key,A3.sizeBy);if(A4===AR.TREND_BUBBLE_MAX){return BA.max;}return BA.min;}if(A4===o.COLOR_SQUARE_COLOR){var A9=this.colorSqureIdentity;if(A9){return{color:A9.decodedColor,isDefaultColor:A9.isDefaultColor};}return{color:"#0000FF",isDefaultColor:true};}if(A4===AR.TREND_LINE_DEF){var At=this.GMController.trConfigPool,A2,Aw;if(A3===undefined){return AH.call(this,At.globalProp||{});}A2=Y.clone(At[A3.key]);Aw=this.makeDefaultsObjectAtOption(A4);Y.copy(A2,Aw);Aw.trdRefLnCmbStyle=Ak(Aw.trdRefLnThk,Aw.trdRefLnStyle);return AH.call(this,Aw);}if(A4===AR.TREND_BUBBLE_FORE_DEF){var A5=this.GMController[AR.TREND_BUBBLE_FORE_DEF],Ay=A5[A3.key],BH=this.makeDefaultsObjectAtOption(A4);Y.copy(Ay,BH);return AH.call(this,BH);}if(A4===AR.REF_LINE_DEF){var A8=AL.call(this,A3),BC=this.makeDefaultsObjectAtOption(A4);Y.copy(A8,BC);BC.trdRefLnCmbStyle=Ak(BC.trdRefLnThk,BC.trdRefLnStyle);return AH.call(this,BC);}if(A4===AR.AXIS_SCALE_DATA){var A0,Ax;A0=this.getWidgetPropertyValue(A4);Ax=L.createAxisScaleCollectionFromArrays(A0);if(A3===undefined){return AH.call(this,Ax);}return AH.call(this,Ax[A3.key]);}if(A4===AR.METRIC_LEVEL_DATA_LABEL){var Au=this.getWidgetPropertyValue(AR.METRIC_LEVEL_DATA_LABEL);if(!Au){Au=AF.call(this);}else{M.call(this,Au);}if(!A3){return new AZ({jsonObj:Au,parent:undefined});}if(Au[A3.key]!==undefined){return Au[A3.key];}return this.makeDefaultsObjectAtOption(A4);}if(A4===AR.AXIS_ORIGIN){var BB=this.getWidgetPropertyValue(AR.AXIS_ORIGIN);if(!BB){BB=this.createAxisOriginObject();}if(!A3){return new AZ({jsonObj:BB,parent:undefined});}if(BB[A3.key]!==undefined){return new AZ({jsonObj:BB[A3.key],parent:undefined});}return new AZ({jsonObj:this.makeDefaultsObjectAtOption(A4),parent:undefined});}if(A4===o.LINE_MARKER_COLOR){var Az={},BF=this.GMController,Av=BF.model.colorType,BG=this.getWidgetPropertyValue(o.LINE_MARKER_COLOR),BE;if(BG===undefined){if(Av===p.NULL){BE=BF.getVolatileDefaultsForShape(BF.getChartInfo().shape);}Az[o.LINE_MARKER_COLOR]=BE&&BE[o.SHAPE_FILL_COLOR];Az[o.LINE_MARKER_COLOR+g]=true;}else{Az[o.LINE_MARKER_COLOR]=BG;Az[o.LINE_MARKER_COLOR+g]=false;}return AH(Az);}return this.readPropertiesUniformly(A4,A3);},readPropertiesUniformly:function(Ax,Ay){var Az,Aw,Av,At,A0,A1,Au=J.getUnderlyingPropertyNameWithAll(Ax);Az=Au.length;if(Az>1){Av=this.getWidgetPropertyValue(Au[0]);for(Aw=1;Aw<Az;Aw++){At=U(Au[Aw],this.getWidgetPropertyValue(Au[Aw]));if(At!==Av){if(Ax===o.ALL_GRID_LINES_SHOW){if(Av===r.SHOW&&At===r.HIDE){return r.SHOW_MAJOR_ONLY;}}return undefined;}}return Av;}A0=this.getWidgetPropertyValue(Ax);if(Ay!==undefined){if(A0!==undefined){A1=A0[Ay.key];if(A1!==undefined){return new AZ({jsonObj:A1,parent:undefined});}A1=this.makeDefaultsObjectAtOption(Ax);}else{A1=this.makeDefaultsObjectAtOption(Ax);}return AH(A1);}if(A0!==undefined){return AH(A0);}if(W.indexOf(Ax)>=0){return new AZ({jsonObj:{},parent:undefined});}return undefined;},writeGlobalProperty:function AS(Ay,Az,Au,Ax,At){var Av=this,A0,Aw=d();Av.GMController.clearShapeFormatsCache();if(Ay!==""&&Ay!==undefined){if(this.syning){return ;}if(Ay===o.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorByMap([this.colorSqureIdentity.comb],Az);}return ;}if(Ay.indexOf("CmbStyle")!==-1){Aw=this.processCombineLineStyle(Ay,Az,Au);}else{if(Ay===AR.TREND_LINE_DEF){Aw=this.processTrendLine(Ay,Az,Au);}else{if(Ay===AR.REF_LINE_DEF){Aw=this.processReferenceLine(Ay,Az,Au);}else{if(Ay===AR.TREND_BUBBLE_FORE_DEF){Aw=this.processTrendLineForcast(Ay,Az,Au,Ax);}else{if(Ay===AR.AXIS_SCALE_DATA){Aw=this.processAxisScale(Ay,Az,Au,Ax);}else{if(Ay===AR.METRIC_LEVEL_DATA_LABEL){Aw=this.processMetricLevelDataLabel(Ay,Az,Au);}else{if(Ay===AR.AXIS_ORIGIN){Aw=this.processAxisOrigin(Ay,Az,Au);}else{if(Ay===o.ALL_GRID_LINES_SHOW){Aw=this.processGridLineShow(Ay,Az);}else{if(Ay===o.LINE_MARKER_COLOR){Aw=this.processLineMarkColor(Ay,Az);}else{Aw=this.processPropertiesUniformly(Ay,Az,Au,At);}}}}}}}}}}if(Ax){return ;}A0=this.getPropertyUpdateCallback(Ay,Az,Au,At,Aw.suppressData);if(Aw.suppressData){Av.partialUpdate(Ay,{allVal:Az},Aw.needRefresh,Au);if(A0.success){A0.success();}}this.submitUpdatesAndPersistXML(Aw.actions,A0,Aw.undoRedoCallback,Aw.suppressData,false,Aw.puFiltersConfig);},getRaiseEventCallback:function(Aw,Ax,Au,At){var Av=this.id;return{success:function(){var Ay=j.all[Av];Ay.syning=true;if(Aw===o.MODIFIED_DEF_FILL_COLOR){Ay.raiseEventShapeFormattingChanged(o.SHAPE_FILL_COLOR);}else{Ay.raiseEventGlobalPropertyChanged(Aw,Ax,Au||{});}if(At){At.forEach(function(Az){Ay.raiseEventGlobalPropertyChanged(Az.name,Az.value,Az.option);});}Q.forEach(J.propertyMap[Aw],function(Az){Ay.raiseEventGlobalPropertyChanged(Az,Ay.readGlobalProperty(Az,Au),Au||{});});Ay.syning=false;}};},getPropertyUpdateCallback:function(Ay,Av,Az,Ax,At){var A0=false,Au,A1={},Aw;if(Ay===AR.SHAPE||Ay===AR.METRIC_SHAPES||Ay===AR.SUB_TYPE){A0=true;}if(!A0){Aw=this.getRaiseEventCallback(Ay,Av,Az,Ax);Ap(Aw,A1);}if(!At){if(A0){Ap(this.getXTabRefreshCallBack(),A1);}else{Ap(this.getDocModelSliceCallback(),A1);}}else{if(A0){Au=this.zonesModel.getUpdateCallback();Ap(Au,A1);}}return A1;},processCombineLineStyle:function(Av,At,Ax){var A0=this,Aw=this.id,Ay=d(),A1=this.readGlobalProperty(Av,Ax),A2=[],Az,Au=function(A8,A7){var A6=Av.replace("CmbStyle","Thk"),A4=Av.replace("CmbStyle","Style"),A5=AN(A7),A3=A5.thk,A9=A5.ceLnStyle;A8.writeGlobalProperty(A6,A3,Ax,true);A8.writeGlobalProperty(A4,A9,Ax,true);};J.getUnderlyingPropertyNameWithAll(Av.replace("CmbStyle","Thk")).forEach(function(A3){A2.push(A0.getWidgetPropertyValue(A3));});Au(this,At);Ay.needRefresh=e(Av,At,A2);Az=Ay.needRefresh;Ay.undoRedoCallback={undo:function(){var A3=j.all[Aw];Au(A3,A1);A3.doUpdateOnUndoRedo(Av,A1,{allVal:A1},Az,Ax,undefined);},redo:function(){var A3=j.all[Aw];Au(A3,At);A3.doUpdateOnUndoRedo(Av,At,{allVal:At},Az,Ax,undefined);}};return Ay;},processTrendLine:function(Ay,Aw,Az){var A7,A5,A6,A0,A3=this,A2=d(),Av=Aw.modifiedPropertyKeys,At=false,Ax=false,A1=this.GMController.trConfigPool,Au=this.getChartInfo(),A4=Au.isABL;if(Az===undefined){A2.suppressData=false;A7=Aw.jsonObj;Av.forEach(function(A8){if(A8===AR.TREND_SEASONALITY){At=true;}else{Ax=true;}});for(A5 in A1){if(A5.length===32&&A1.hasOwnProperty(A5)){A6=A1[A5];if(A6.existing&&(At||Ax)){A3.collectABLForecastActions(A7,A5,A2.actions);}}}}else{A6=Aw.jsonObj;if(A4){A7=this.readGlobalProperty(Ay,undefined).jsonObj;}else{A7=undefined;}A0=Ai(Av,A6.fmt);A2.suppressData=!AW.call(A3,Aw,Az,true);A3.collectTrendLineAction(A6,A2.actions,Az.key);this.checkCustomScaleNotificationForTrendLine(Az.key);if(A4){if(k(Av)){A3.collectABLForecastActions(A7,Az.key,A2.actions);}if(Av[0]===AR.TREND_TYPE&&this.isSeasonalityEnabled()&&(A6[AR.TREND_TYPE]===Ao.EnumTrendLineModelType.LOG||A6[AR.TREND_TYPE]===Ao.EnumTrendLineModelType.POW)){this.trendSeasonalityError=true;}}A2.needRefresh=e(Ay,Aw,[]);this.getUndoRedoCallBackForTrdRefLine(A2,Ay,Aw,A0,A2.needRefresh,Az,true);}return A2;},getPartialUpdateFilterConfigForRefLine:function(){return{data:{include:{dz:true,gsi:true,ghs:true,trendref:true}}};},processReferenceLine:function(Ay,At,Az){var A2=this,A0,A1=d(),A4=this.GMController,Au=At.modifiedPropertyKeys,A3=At.jsonObj,Ax=false,Aw=Az.key.split(","),Av=Aw[0],A5=Aw[1];if(Au[0]===AR.REF_CONST_VALUE){At.setProperty(AR.REF_ENABLED,true);}if(Au.indexOf(AR.REF_SHOW_LABEL)>=0){Ax=true;}if(Au.indexOf(AR.REF_ENABLED)>=0&&At.jsonObj[AR.REF_ENABLED]){Ax=true;}if(Ax){if(A3[AR.REF_SHOW_LABEL]){if(A3[AR.REF_LABEL_TYPE]<=0){At.setProperty(AR.REF_LABEL_TYPE,AK.DssModelLabelsType);}}else{At.setProperty(AR.REF_LABEL_TYPE,AK.DssModelLabelsNone);}}A0=Ai(Au,AL.call(this,Az));A1.puFiltersConfig=this.getPartialUpdateFilterConfigForRefLine();if(A4.isStacked&&!A4.splitPlottingMetrics){A3.dropzoneId=(Av==="YAxis"||Av==="Y2Axis")?4:3;A3.subAxis=Av.search("2")>=0?1:0;}else{A3.metricId=Av;}A3[AR.REF_TYPE]=t[A5];if(A3[AR.REF_ENABLED]===false&&Au.indexOf(AR.REF_ENABLED)>=0){A1.suppressData=false;A2.collectRemoveRefLineAction(A3,A1.actions);}else{A1.suppressData=!AW.call(A2,At,Az,false);if(A4.isStacked&&!A4.splitPlottingMetrics){Av=undefined;}A2.collectRefLineAction(A3,A1.actions,Av);}A1.needRefresh=e(Ay,At,[]);this.getUndoRedoCallBackForTrdRefLine(A1,Ay,At,A0,A1.needRefresh,Az,false);return A1;},processTrendLineForcast:function(Ay,A0,Aw,Ax){var Au=d(),Az=this.GMController;Au.suppressData=false;if(Ax){AO((Az[AR.TREND_BUBBLE_FORE_DEF])[Aw.key],A0,true);}var Av=A0.jsonObj,At=AY(Av);if(typeof At.max==="number"){At.max=String(At.max);}if(typeof At.min==="number"){At.min=String(At.min);}At.metricId=Aw.key;Au.actions.push(this.getUpdateForecastInfoAction(At));return Au;},generateUndoRedoConfigForAxisConfig:function(A0,Aw,A1,Az,Au){var A3,At,Ay={},A2=Az?this.undoPropValConfig:this.redoPropValConfig,Av=this.undoPropValConfig.modifiedKeys,Ax=A2[A0];Ay[A0]=Au?L.serializeCollection2String(Ax):Ax;if(A2.hasOwnProperty(AR.AXIS_SCALE)){Ay[AR.AXIS_SCALE]=A2[AR.AXIS_SCALE];}At=E(A0,Av,Ax,A1.key!=="AllMetrics");if(Az){A3=P(Aw,Ax[A1.key],false,Av);return{undoPropValConfig:Ay,associatedOptionsForUndo:At,undoValue:A3};}delete this.undoPropValConfig;delete this.redoPropValConfig;return{redoPropValConfig:Ay,associatedOptionsForRedo:At,redoValue:Aw};},updateUndoRedoConfigForAxisConfig:function(Au,Ay,Ax,Av){if(!this.undoPropValConfig){this.undoPropValConfig={modifiedKeys:[]};}if(!this.redoPropValConfig){this.redoPropValConfig={};}var At=Au?this.undoPropValConfig:this.redoPropValConfig,Aw=function(A0,A1){var Az;if(Q.isArray(A1)){Az=A0[Ay];Q.forEach(A1,function(A2){if(Az.indexOf(A2)<0){Az.push(A2);}});}else{if(typeof A1==="object"){Az=Y.clone(A1);}else{Az=A1;}}A0[Ay]=Az;};if(Av||!At.hasOwnProperty(Ay)){Aw(At,Ax);}},processAxisScale:function(A0,Aw,A1,A4){var A6,A5,Az,A2,Ax,Av,A3=d(),Au=Aw.modifiedPropertyKeys;A5=this.getWidgetPropertyValue(A0);Az=L.createAxisScaleCollectionFromArrays(A5);this.updateUndoRedoConfigForAxisConfig(true,A0,Az);if(Aw.jsonObj.scaleType!==s.CUSTOM&&Au[0]!==AR.LOG_SCALE){A3.suppressData=false;A3.puFiltersConfig={data:{include:{extrs:true}}};}if(Au[0]!==AR.LOG_SCALE){this.updateUndoRedoConfigForAxisConfig(true,AR.AXIS_SCALE,this.getWidgetPropertyValue(AR.AXIS_SCALE));this.setWidgetPropertyValue(AR.AXIS_SCALE,s.CUSTOM);this.updateUndoRedoConfigForAxisConfig(false,AR.AXIS_SCALE,s.CUSTOM,true);}else{this.logScaleChanged=true;}if(Au[0]===AR.SINGLE_AXIS_SCALE_TYPE&&Aw.jsonObj[AR.SINGLE_AXIS_SCALE_TYPE]!==s.CUSTOM){Aw.setProperty(AR.AXIS_SCALE_MANUAL_MIN,Aw.jsonObj[AR.AXIS_SCALE_REAL_MIN]);Aw.setProperty(AR.AXIS_SCALE_MANUAL_MAX,Aw.jsonObj[AR.AXIS_SCALE_REAL_MAX]);Aw.setProperty(AR.AXIS_SCALE_AUTO_MIN,false);Aw.setProperty(AR.AXIS_SCALE_AUTO_MAX,false);}if(A1.key==="AllMetrics"){var At=[AR.AXIS_SCALE_AUTO_MIN,AR.AXIS_SCALE_AUTO_MAX,AR.AXIS_SCALE_MANUAL_MIN,AR.AXIS_SCALE_MANUAL_MAX,AR.SINGLE_AXIS_SCALE_TYPE];var Ay=At.indexOf(Au[0]);if(Ay>=0){Q.forEach(At,function(A7){if(Au.indexOf(A7)<0){Au.push(A7);}});}for(A6 in Az){if(A6!=="AllMetrics"&&Az.hasOwnProperty(A6)){AO(Az[A6],Aw,true);}}}else{AO(Az[A1.key],Aw,true);}delete Az.AllMetrics;A2=L.serializeCollection2String(Az);this.setWidgetPropertyValue(AR.AXIS_SCALE_DATA,A2);if(!A3.suppressData){this.setWidgetPropertyValue("axScaleModified",1);}this.updateUndoRedoConfigForAxisConfig(true,"modifiedKeys",Au,true);this.updateUndoRedoConfigForAxisConfig(false,A0,Az,true);if(!A4){Ax=this.generateUndoRedoConfigForAxisConfig(A0,Aw,A1,true,true);Av=this.generateUndoRedoConfigForAxisConfig(A0,Aw,A1,false,true);this.getUndoRedoCallBackForAxisConfig(A3,A0,Ax,Av,true,A1);}return A3;},processMetricLevelDataLabel:function(Aw,Au,Ay){var A1=d(),A2,Ax=this.id,A4=true,A3=this.readGlobalProperty(Aw),Az=A3.jsonObj,At=Az[Ay.key],Av,A0=Y.clone(Az);if(Ay.key==="AllMetrics"){for(A2 in Az){if(Az.hasOwnProperty(A2)){Az[A2]=Au;}}}else{Az[Ay.key]=Au;for(A2 in Az){if(A2!=="AllMetrics"&&Az.hasOwnProperty(A2)){if(Az[A2]===false){A4=false;}}}if(Az.AllMetrics!==undefined){Az.AllMetrics=A4;}}this.setWidgetPropertyValue(Aw,Az);Av=Az;A1.undoRedoCallback={undo:function(){var A5=j.all[Ax];A5.setWidgetPropertyValue(Aw,A0);A5.doUpdateOnUndoRedo(Aw,At,{allVal:At},true,Ay,undefined);},redo:function(){var A5=j.all[Ax];A5.setWidgetPropertyValue(Aw,Av);A5.doUpdateOnUndoRedo(Aw,Au,{allVal:Au},true,Ay,undefined);}};return A1;},processAxisOrigin:function(Ax,At,Ay){var A4,Aw,Av,Az=d(),Au=At.modifiedPropertyKeys,A3=this.readGlobalProperty(Ax),A1=A3.jsonObj,A0=true,A2=null;if(Au[0]===AR.AXIS_ORIGIN_AUTO&&At.jsonObj[AR.AXIS_ORIGIN_AUTO]===true){At.jsonObj[AR.AXIS_ORIGIN_VALUE]=0;Au.push(AR.AXIS_ORIGIN_VALUE);}this.updateUndoRedoConfigForAxisConfig(true,Ax,A1);if(Ay.key==="AllMetrics"){if(Au[0]===AR.AXIS_ORIGIN_VALUE){Au.push(AR.AXIS_ORIGIN_AUTO);}for(A4 in A1){if(A1.hasOwnProperty(A4)){AO(A1[A4],At);}}if(A1.AllMetrics===undefined){A1.AllMetrics=Y.copy(At.jsonObj);}}else{AO(A1[Ay.key],At);Y.forEach(A1,function(A5,A6){if(A6!=="AllMetrics"){A0=A0&&A5.axOriAuto;if(A2===null){A2=A5.axOriValue;}else{if(A2!==undefined){if(A2!==A5.axOriValue){A2=undefined;}}}}});A1.AllMetrics={axOriAuto:A0,axOriValue:A2};}this.setWidgetPropertyValue(Ax,A1);this.setWidgetPropertyValue(o.X_AXIS_ORIGIN_LINE_SHOW,true);this.setWidgetPropertyValue(o.Y_AXIS_ORIGIN_LINE_SHOW,true);this.updateUndoRedoConfigForAxisConfig(true,"modifiedKeys",Au,true);this.updateUndoRedoConfigForAxisConfig(false,Ax,A1,true);Aw=this.generateUndoRedoConfigForAxisConfig(Ax,At,Ay,true,false);Av=this.generateUndoRedoConfigForAxisConfig(Ax,At,Ay,false,false);this.getUndoRedoCallBackForAxisConfig(Az,Ax,Aw,Av,true,Ay);return Az;},processGridLineShow:function(Aw,Ax){var At=d(),Av=this.id,Ay=this.readGlobalProperty(Aw),Au=function(A1,A2){var A0=A2,Az=A2;if(A2===r.SHOW_MAJOR_ONLY){A0=r.SHOW;Az=r.HIDE;}A1.setWidgetPropertyValue(o.MAJOR_GRID_LINES_SHOW,A0);A1.setWidgetPropertyValue(o.MINOR_GRID_LINES_SHOW,Az);};Au(this,Ax);At.undoRedoCallback={undo:function(){var Az=j.all[Av];Au(Az,Ay);Az.doUpdateOnUndoRedo(Aw,Ay,{allVal:Ay},true,undefined,undefined);},redo:function(){var Az=j.all[Av];Au(Az,Ax);Az.doUpdateOnUndoRedo(Aw,Ax,{allVal:Ax},true,undefined,undefined);}};return At;},processLineMarkColor:function(Az,A0){var Ay=this.id,Ax=d(),Aw=this.readGlobalProperty(Az),Av=Y.clone(A0),Au=function(A5,A3,A4){var A1=A4?A3:Y.clone(A3),A6=A3.jsonObj[Az],A2;if(A6==="default"){A5.removeWidgetProperty(Az);}else{A5.setWidgetPropertyValue(Az,A6);}A2=A5.readGlobalProperty(Az);A1.jsonObj[Az]=A2.jsonObj[Az];A1.jsonObj[Az+g]=A2.jsonObj[Az+g];return A1;},At=function(A3){var A2=j.all[Ay],A1=Au(A2,A3);A2.doUpdateOnUndoRedo(Az,A1,{allVal:A1},true,undefined,undefined);};Aw.modifiedPropertyKeys.push(Az);Au(this,A0,true);Ax.undoRedoCallback={undo:function(){At(Aw);},redo:function(){At(Av);}};return Ax;},processPropertiesUniformly:function(Ay,Au,Az,Aw){var A1=this,A0=d(),Av,At=this.getChartInfo(),Ax={},A2=[];if(Ay===AR.SUB_TYPE){AM.call(this,Au,A0);}Av=J.getUnderlyingPropertyNameWithAll(Ay);Q.forEach(Av,function(A3){if(A0.suppressData){A0.suppressData=!Ah.call(A1,A3,Au,At);}Ax[A3]=A1.getWidgetPropertyValue(A3);if(Az&&Ax[A3]){Ax[A3]=Ax[A3][Az.key];}if(A3.indexOf("FntStyle")>=0||A3.indexOf("LnThk")>=0){A2.push(Ax[A3]);}AP.call(A1,A3,Au,Az);});A0.needRefresh=e(Ay,Au,A2);this.getUndoRedoCallBackForUniformProperty(A0,Ay,Au,Ax,A0.needRefresh,Az,Aw);return A0;},getUndoRedoCallBackForUniformProperty:function(A0,Aw,Au,Az,A1,Ay,Av){var Ax=this.id,At;if(A0.suppressData){if(Av&&Av[0]){At=Y.clone(Av);At[0].value=false;}A0.undoRedoCallback={undo:function(){var A5,A2,A3=j.all[Ax],A4=[];for(A5 in Az){if(Az.hasOwnProperty(A5)){A2=Az[A5];AP.call(A3,A5,A2,Ay,true);A2=U(A5,A2);A4.push(A2);}}A3.doUpdateOnUndoRedo(Aw,AJ(A4),Az,A1,Ay,At);},redo:function(){var A2=j.all[Ax],A3=J.getUnderlyingPropertyNameWithAll(Aw);Q.forEach(A3,function(A4){AP.call(A2,A4,Au,Ay);});A2.doUpdateOnUndoRedo(Aw,Au,{allVal:Au},A1,Ay,Av);}};}},getUndoRedoCallBackForTrdRefLine:function(Az,Av,At,Ay,A1,Ax,Au){var Aw=this.id,A0;if(Az.suppressData){A0=P(At,Ay,true);Az.undoRedoCallback={undo:function(){var A2=j.all[Aw];AW.call(A2,A0,Ax,Au);A2.doUpdateOnUndoRedo(Av,A0,{allVal:A0},A1,Ax,undefined);},redo:function(){var A2=j.all[Aw];AW.call(A2,At,Ax,Au);A2.doUpdateOnUndoRedo(Av,At,{allVal:At},A1,Ax,undefined);}};}},getUndoRedoCallBackForAxisConfig:function(Au,A0,At,Aw,Av,Ax){var Ay=this.id,Az;if(Au.suppressData){Az=function(A2,A1){var A3;for(A3 in A1){if(A1.hasOwnProperty(A3)){A2.setWidgetPropertyValue(A3,A1[A3]);}}};Au.undoRedoCallback={undo:function(){var A1=j.all[Ay];Az(A1,At.undoPropValConfig);A1.doUpdateOnUndoRedo(A0,At.undoValue,{allVal:At.undoValue},Av,Ax,At.associatedOptionsForUndo);},redo:function(){var A1=j.all[Ay];Az(A1,Aw.redoPropValConfig);A1.doUpdateOnUndoRedo(A0,Aw.redoValue,{allVal:Aw.redoValue},Av,Ax,Aw.associatedOptionsForRedo);}};}},doUpdateOnUndoRedo:function(Ax,Ay,Au,Av,Aw,At){var Az;this.partialUpdate(Ax,Au,Av,Aw,true);Az=this.getPropertyUpdateCallback(Ax,Ay,Aw,At,true);if(Az.success){Az.success();}},processChangeShape:function AD(A0){var Aw=[],Ax=this,Az=Ax.GMController.dz,Av=Az.SliceBy.TemplateUnit||[],At=Az.AngleBy.TemplateMetric||[],Au=Az.SizeBy.TemplateMetric||[],Ay=G.call(Ax);this.zonesModel.CARDLIMIT=AI;this.zonesModel.checkAndWarnLargeItemsForAddUnits(Ay,function(){if(Az.SliceBy.MetricNames!==undefined){Av.push(AU);}if(A0===T.AREA){Q.forEach(Au,function(A1){A1.zone=8;if(!A1.did){A1.did=A1.id;}A1.cs=1;});Aw=Au;}if(A0!==T.PIE&&A0!==T.RING){Q.forEach(Av,function(A1){A1.zone=6;if(!A1.did){A1.did=A1.id;}A1.cs=1;});Q.forEach(At,function(A1){A1.zone=10;if(!A1.did){A1.did=A1.id;}A1.cs=1;});Aw=(Aw||[]).concat((At.concat(Av||[])));}if(Aw.length>0){Ax.changeShapeProperty(AR.SHAPE,A0);Ax.zonesModel.gmZones.deleteItems(Aw);}else{Ax.writeGlobalProperty(AR.SHAPE,A0);}});},getPartialUpdateType:function(At){if(h.indexOf(At)>=0){return l.UPDATE_ALL;}if(N.indexOf(At)>=0){return l.UPDATE_CHARTS;}if(C.indexOf(At)>=0){return l.SPLITTER_LINE_SCALE;}if(I.indexOf(At)>=0){return l.CHART_SCALE;}return l.UNKNOW;},partialUpdate:function(Aw,At,A1,Ax,Av){var Au,Az,A0=this,Ay=false;if(this.noData){return ;}As.startTimer({functionName:"VisGraphMatrix.partialUpdate",purpose:"Partial update of GraphMatrix ("+this.k+")"});Au=J.getUnderlyingPropertyNameWithAll(Aw);this.resetAxisProps(Au);this.resetHTML5Props();this.configureTrendAndRefLine(Aw);this.resetGMCtrlCache(Aw,At);this.setUpForceUpdateFlag(Aw);Ay=a(Aw,At);if(A1&&!Ay){Ay=this.handlePartialUpdate(this.getPartialUpdateType(Aw),Av);}if(!Ay){if(Ad.indexOf(Aw)>=0){Au=[Aw];}Au.forEach(function(A2){Az=A0.updateSingleProperty(A2,At,A1,Ax);Ay=Ay||Az;});}this.clearForceUpdateFlag();if(!Ay){this.clientRerenderGraphMatrix();}As.endTimer();},handlePartialUpdate:function(At,Au){var Av=this.GMController;switch(At){case l.UPDATE_CHARTS:this.updateCharts();break;case l.UPDATE_ALL:Av.reRenderGM();break;case l.CHART_SCALE:if(Au){Av.reRenderGM();}else{this.onControlResized();}break;case l.SPLITTER_LINE_SCALE:if(Au){Av.reRenderGM();}else{this.onControlResized(false,false,true,true);}break;default:return false;}return true;},updateSingleProperty:function(Ax,At,A2,Ay){var Au,Az={},Av=this.manager,A3=this.HTML5PROPS,Aw=At[S],A1=At.hasOwnProperty(Ax)?At[Ax]:Aw,A0=this.GMController;switch(Ax){case o.BG_COLOR:case o.BG_FILL_TRANSPARENCY:break;case o.ROW_HEADER_FILL_COLOR:case o.ROW_HEADER_FILL_TRANSPARENCY:this.updateRowValueBackground();this.updateHeaderTitle("row","bg");break;case o.ROW_HEADER_TEXT_FONT_COLOR:case o.ROW_HEADER_TEXT_FONT_STYLE:case o.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:case o.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:this.updateHeaderTitle("row","font");break;case o.ROW_VAVLUE_TEXT_FONT_COLOR:case o.ROW_VAVLUE_TEXT_FONT_STYLE:case o.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:case o.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:Av.updateSubSetOfVSlaves("row",A0.metricNamesOnRowMetricsOnXAxis);break;case o.COLUMN_HEADER_FILL_COLOR:case o.COLUMN_HEADER_FILL_TRANSPARENCY:this.updateColumnValueBackground();this.updateHeaderTitle("col","bg");break;case o.COLUMN_HEADER_TEXT_FONT_COLOR:case o.COLUMN_HEADER_TEXT_FONT_STYLE:case o.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:case o.COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:this.updateHeaderTitle("col","font");break;case o.COLUMN_VAVLUE_TEXT_FONT_COLOR:case o.COLUMN_VAVLUE_TEXT_FONT_STYLE:case o.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:case o.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:Av.updateSubSetOfHSlaves("column",A0.metricNamesOnColumnMetricsOnYAxis);break;case o.V_MATRIX_LINES_COLOR:case o.V_MATRIX_LINES_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-matrix-line.v",A3.MATRIX_LINE_V);break;case o.H_MATRIX_LINES_COLOR:case o.H_MATRIX_LINES_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-matrix-line.h",A3.MATRIX_LINE_H);break;case o.X_AXIS_LINE_COLOR:case o.X_AXIS_LINE_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-axis-line.h",A3.AXIS_LINE_X);break;case o.Y_AXIS_LINE_COLOR:case o.Y_AXIS_LINE_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-axis-line.v",A3.AXIS_LINE_Y);break;case o.X_AXIS_ORIGIN_LINE_COLOR:case o.X_AXIS_ORIGIN_LINE_COMBINED_STYLE:this.updateOriginLineStyle(Ax,"v",".gm-set-originline",A1);break;case o.Y_AXIS_ORIGIN_LINE_COLOR:case o.Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:this.updateOriginLineStyle(Ax,"h",".gm-set-originline",A1);break;case o.Y_AXIS_TITLE_FONT_COLOR:case o.Y_AXIS_TITLE_FONT_STYLE:this.updateAxisTitleFontStyle("yaxis");break;case o.Y_AXIS_LABELS_FONT_COLOR:case o.Y_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("yaxis",Ax);break;case o.X_AXIS_TITLE_FONT_COLOR:case o.X_AXIS_TITLE_FONT_STYLE:this.updateAxisTitleFontStyle("xaxis");break;case o.X_AXIS_LABELS_FONT_COLOR:case o.X_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("xaxis",Ax);break;case o.ALL_AXIS_LABELS_FONT_COLOR:case o.ALL_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("allaxis",Ax);break;case o.GRID_LINE_AUTO:case o.ALL_GRID_LINES_SHOW:case o.MAJOR_GRID_LINES_SHOW:case o.MINOR_GRID_LINES_SHOW:case o.ALL_GRID_LINES_COLOR:case o.ALL_GRID_LINES_COMBINED_STYLE:case o.MAJOR_GRID_LINES_COLOR:case o.MAJOR_GRID_LINES_COMBINED_STYLE:case o.MINER_GRID_LINES_COLOR:case o.MINER_GRID_LINES_COMBINED_STYLE:this.hPlaceHGridLines(A3.GRID_LINE_MAJOR,A3.GRID_LINE_MINOR);this.hPlaceVGridLines(A3.GRID_LINE_MAJOR,A3.GRID_LINE_MINOR);break;case AR.LEGEND_VISIBLE:case AR.LEGEND_MODE:case AR.SCALE_LEGEND_WIDTH:case o.LEGEND_BG_COLOR:case o.LEGEND_BG_FILL_TRANSPARENCY:case o.LEGEND_FONT_COLOR:case o.LEGEND_FONT_STYLE:case o.LEGEND_FONT_SIZE:case o.LEGEND_FONT_FAMILY:this.legendPartialUpdate(Ax,A2);break;case AR.LEGEND_POSITION:if(this.legend){this.legend.updateLegendSlot(A1,this.getLegendDockPosIdx(A1));}break;case o.ALL_TEXT_FONT_COLOR:case o.ALL_TEXT_FONT_STYLE:this.updateHeaderTitle("row","font");this.updateHeaderTitle("col","font");Av.updateVSlaves();Av.updateHSlaves();if(At.hasOwnProperty(S)){this.updateChartFontStyle(Ax,"all-text",Aw);}else{if(Ax.indexOf("FntClr")>=0){Az.dl=o.DATA_LABELS_FONT_COLOR;Az.rfl=o.REF_LABELS_FONT_COLOR;}else{if(Ax.indexOf("FntStyle")>=0){Az.dl=o.DATA_LABELS_FONT_STYLE;Az.rfl=o.REF_LABELS_FONT_STYLE;}}this.updateChartFontStyle(Ax,B.GM_ORIGIN_LABEL);this.updateChartFontStyle(Az.dl,B.GM_DATA_LABEL,At[Az.dl]);this.updateChartFontStyle(Az.rfl,B.GM_REF_LABEL,At[Az.rfl]);}if(this.legend){this.legend.updateStyle(A3.LEGEND);}break;case AR.BANDING:case AR.AXIS_ORIGIN:case AR.MAX_SIZE_TYPE:case AR.MAX_SIZE_VALUE:case AR.MIN_SIZE_VALUE:case AR.DATA_LABEL:case AR.DATA_LABELS_PLACEMENT:case AR.METRIC_LEVEL_DATA_LABEL:case o.DATA_LABELS_FONT_FAMILY:case o.DATA_LABELS_FONT_SIZE:this.updateAxisAndCharts(Ax);break;case AR.MIN_SIZE_TYPE:if(Ax===AR.MIN_SIZE_TYPE&&this.needLegend&&A0.hasSizeBy()){this.sizeByData=A0.getSizeByLegendInfo();}this.updateAxisAndCharts(Ax);this.hUpdateLegend();break;case o.DATA_LABELS_FONT_STYLE:if(A2){this.updateAxisAndCharts(Ax);}else{this.updateChartFontStyle(Ax,B.GM_DATA_LABEL,A1);}break;case o.DATA_LABELS_FONT_COLOR:this.updateChartFontStyle(Ax,B.GM_DATA_LABEL,A1);break;case AR.REF_LINE_DEF:Au=A1.modifiedPropertyKeys[0];if(Au===AR.TREND_REF_LINE_COMBINED_STYLE||Au===AR.TREND_REF_LINE_COLOR){this.updateTrdAndRefLineStyle(".gm-set-referenceline",A1,Ay);}else{this.updateChartFontStyle(Ax,B.GM_REF_LABEL,A1);}break;case AR.TREND_LINE_DEF:this.updateTrdAndRefLineStyle(".gm-set-trendline",A1,Ay);break;case o.REF_LABELS_FONT_COLOR:case o.REF_LABELS_FONT_STYLE:this.updateChartFontStyle(Ax,B.GM_REF_LABEL,A1);break;default:return false;}return true;},getHTML5Props:function(){return this.HTML5PROPS;},resetHTML5Props:function(){var At=this.property,Au=this.HTML5PROPS;At.initHTML5Props(Au);this.applyHTML5Props(Au);this.adjustRHAndCHOpacity();this.postFillGMControllerStyle();},adjustRHAndCHOpacity:function(){var Aw=this.HTML5PROPS;var At=Aw.BK;var Av=Aw.RH_BK;var Au=Aw.CH_BK;if(At.backgroundColor===Av.backgroundColor){if(Av.opacity<=At.opacity){Av.opacity=0;}else{Av.opacity-=At.opacity;}}if(At.backgroundColor===Au.backgroundColor){if(Au.opacity<=At.opacity){Au.opacity=0;}else{Au.opacity-=At.opacity;}}},getAllAxisProperties:function(){var At={},Av=this.GMController,Au=this;if(Av.axisFormat){return Av.axisFormat;}b.forEach(function(Aw){At[Aw]=Au.readGlobalProperty(Aw);});Av.axisFormat=At;return At;},resetAxisProps:function(Av){var Au=this.GMController.axisFormat,Ax=this,Aw,At;if(Au){Av.forEach(function(Ay){if(Ay.indexOf("CmbStyle")>=0){Aw=Ay.replace("CmbStyle","Thk");At=Ay.replace("CmbStyle","Style");}b.forEach(function(Az){if((Az===Ay)||(Aw&&Az===Aw)||(At&&Az===At)){Au[Az]=Ax.readGlobalProperty(Az);}});});}},getDefaultProperties:function(){var Aw=(this.theme===n.LIGHT?Z.lightTheme():Z.darkTheme()),Au=this.getDocModel(),At=false;if(Au){var Av=Au.getCurrentPaletteColors();if(Av&&Av.length){Aw.shpFillClr=Aw.shpLnClr=Av[0];At=true;}}if(!At){Z.update(this.theme,["shpFillClr"]);Z.update(this.theme,["shpLnClr"]);}return Aw;},configureTrendAndRefLine:function Ab(At){if(At===AR.TREND_LINE_DEF||At===AR.REF_LINE_DEF||At.indexOf("allTxtFnt")>=0||At.indexOf(AQ)>=0){this.GMController.configureTrendLine(this.getData());}},isLogScaleChanged:function An(Au){var At=Au[AR.AXIS_SCALE_DATA]||Au[S];return !!(At&&At.modifiedPropertyKeys&&At.modifiedPropertyKeys[0]===AR.LOG_SCALE);},resetGMCtrlCache:function A(Au,Av){var At=this.GMController;if(Au===AR.MAX_SIZE_TYPE||Au===AR.MAX_SIZE_VALUE||Au===AR.MIN_SIZE_TYPE||Au===AR.MIN_SIZE_VALUE){At.initMaxMinSizeProps();}else{if(Au===AR.AXIS_SCALE_DATA){At.getAxisScaleMode();At.setupDualAxis();if(this.isLogScaleChanged(Av)){At.clearLogScaleCahce();At.msgCenter={};}}else{if(Au===AR.DATA_LABEL){At.resetDataLabelType();At.checkMetricLevelDataLabel();}else{if(Au===AR.DATA_LABELS_PLACEMENT){At.resetDataLabelPlacement();At.checkMetricLevelDataLabel();}else{if(Au.indexOf("dlFnt")>=0||Au.indexOf("allTxtFnt")>=0){At.clearDataLabelFormatCache();}else{if(Au===o.MODIFIED_DEF_FILL_COLOR||Au===o.SHAPE_BORDER_COMBINED_STYLE||Au===o.SHAPE_LINE_COMBINED_STYLE){At.resetDefaultShapeProp();}else{if(Au===o.SHAPE_FILL_TRANSPARENCY){At.resetDefaultShapeProp();}else{if(Au===AR.AXIS_ORIGIN){delete At.axisFormat;}}}}}}}}},getColorByComb:function O(Av){var Au,Ax=Av.levels,Aw=Av.elements,Ay=Ax.length,At=[];for(Au=0;Au<Ay;Au++){At.push({tid:Ax[Au],eid:Aw[Au]});}return At;},updateLegendColorByOpacity:function Aj(){if(!this.colorByData){return ;}var At=this.GMController,Ay=At.getDefaultsForShape(At.getChartInfo().shape),Ax=this.property.readItem(o.ALL_SHAPE_FORMAT),Aw,Au,Av=this;if(At.colorByInfo.tp===p.METRICS){Au=As.getResolvedFormatsObject([Ay,Ax]);this.colorByData.elements.forEach(function(Az){Az.opacity=Au[o.SHAPE_FILL_TRANSPARENCY]/100;});}else{this.colorByData.elements.forEach(function(Az){Aw=At.getShapeFormatsWithCombination(Av.getColorByComb(Az.token));Au=As.getResolvedFormatsObject([Ay,Ax,Aw]);Az.opacity=Au[o.SHAPE_FILL_TRANSPARENCY]/100;});}},setUpForceUpdateFlag:function(Au){if(Au.indexOf("AxTt")>=0||Au.indexOf("AxLb")>=0||Au.indexOf("allTxtFnt")>=0){this.forceUpdateAxis=true;}var At=this;Q.forEach(Aa,function(Av){if(Av===Au){At.forceUpdateAxis=true;return false;}});},clearForceUpdateFlag:function c(){delete this.forceUpdateAxis;},updateDummyANodeStyle:function(At){var Au=this.domDummyA;if(Au.style.display!=="none"){F.applyStyles2DomNode(Au,At);Au.setAttribute("type",B.GM_DUMMY_A);}},updateHeaderTitle:function(A3,Aw){var A1=A3==="row"?".gm-rowheader-title":".gm-colheader-title",Au=this.domNode.querySelectorAll(A1),Az,Av=Au.length,At,Ax,A0,A2=this.HTML5PROPS,A4,Ay;if(A3==="row"){A4=A2.RH_BK;Ay=A2.RH_TITLE;Ax=this.getWidgetPropertyValue(o.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL);A0=this.getWidgetPropertyValue(o.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL);}else{A4=A2.CH_BK;Ay=A2.CH_TITLE;Ax=this.getWidgetPropertyValue(o.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL);A0=this.getWidgetPropertyValue(o.COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL);}for(Az=0;Az<Av;Az++){At=Au[Az];if(Aw==="bg"){F.applyStyles2DomNode(At,A4);}else{if(At.getAttribute("type")===null){F.applyStyles2DomNode(At.firstChild.firstChild,Ay);}else{As.updateTextColorAndAlignment(At,Ax,A0);}}}},updateHeaderValueFontStyle:function(Ax){var Aw=Ax==="row"?"div.gm-rowheader-cell, div.gm-rowheader-cell-dummy":"div.gm-colheader-cell, div.gm-colheader-cell-dummy",Au=this.domNode.querySelectorAll(Aw),Av,A0=Au.length,Az,At,Ay;if(Ax==="row"){At=this.getWidgetPropertyValue(o.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL);Ay=this.getWidgetPropertyValue(o.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL);}else{At=this.getWidgetPropertyValue(o.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL);Ay=this.getWidgetPropertyValue(o.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL);}for(Av=0;Av<A0;Av++){Az=Au[Av];if(Az.getAttribute("class").indexOf("gm-colheader-cell-dummy")>=0&&!this.GMController.metricNamesOnColumnMetricsOnYAxis){continue;}As.updateTextColorAndAlignment(Az,At,Ay);}},updateAxisTitleFontStyle:function(Aw){var Av=Aw==="yaxis"?".gm-yaxis-cell-label .gm-text-body-nowrap":".gm-xaxis-cell-label .gm-text-body-nowrap, .gm-x2axis-cell-label .gm-text-body-nowrap",At=this.domNode.querySelectorAll(Av),Au,Ay=At.length,Ax=this.HTML5PROPS[Aw==="yaxis"?"AXIS_TITLE_Y":"AXIS_TITLE_X"];for(Au=0;Au<Ay;Au++){F.applyStyles2DomNode(At[Au],Ax);}},updateRowValueBackground:function(){var At=this.domRowHeader.childNodes,Au,Aw=At.length,Av=this.HTML5PROPS.RH_BK;for(Au=0;Au<Aw;Au++){F.applyStyles2DomNode(At[Au],Av);}if(this.GMController.metricNamesOnRowMetricsOnXAxis){F.applyStyles2DomNode(this.domYAxis,Av);}},updateColumnValueBackground:function(){var At=this.domColHeader.childNodes,Au,Aw=At.length,Av=this.HTML5PROPS.CH_BK;for(Au=0;Au<Aw;Au++){if(Au===Aw-1&&this.colHeaderExtraH>0&&!this.GMController.metricNamesOnColumnMetricsOnYAxis){break;}F.applyStyles2DomNode(At[Au],Av);}},updateMatrixLineStyle:function(Ax,Aw){var At=this.domNode.querySelectorAll(Ax),Au,Av,Ay=At.length;for(Av=0;Av<Ay;Av++){Au=At[Av].firstChild;F.applyStyles2DomNode(Au,Aw);}},updateOriginLineStyle:function(A0,A3,A2,Av){var Au=this.domNode.querySelectorAll(A2),Az,Aw=Au.length,Ax,At,Ay,A1;if(A0.indexOf("Clr")>=0){Ax=As.decodeColor(Av);for(Az=0;Az<Aw;Az++){if(Au[Az].getAttribute("subtype")===A3){Au[Az].style.stroke=Ax;}}}else{if(A0.indexOf("CmbStyle")>=0){At=AN(Av);Ay=At.thk;A1=At.ceLnStyle;if(A1===Ar.LS_DOT){A1="1 1";}else{if(A1===Ar.LS_DASH){A1="3 1";}else{A1="";}}for(Az=0;Az<Aw;Az++){if(Au[Az].getAttribute("subtype")===A3){Au[Az].style.strokeDasharray=A1;Au[Az].style.strokeWidth=Ay;}}}}},updateTrdAndRefLineStyle:function(A2,Au,A0){var Av=Au.modifiedPropertyKeys[0],At=this.domNode.querySelectorAll(A2),Az,Aw=At.length,Ax,Ay,A1,A3=A0.key;if(Av===AR.TREND_REF_LINE_COLOR){Ax=As.decodeColor(Au.jsonObj[Av]);for(Az=0;Az<Aw;Az++){if(A3===At[Az].identity.tlOpt.key){At[Az].style.stroke=Ax;}}}else{if(Av===AR.TREND_REF_LINE_COMBINED_STYLE){Ay=Au.jsonObj[AR.TREND_REF_LINE_THICKNESS];A1=Au.jsonObj[AR.TREND_REF_LINE_STYLE];if(A1===Ar.LS_DOT){A1="1 1";}else{if(A1===Ar.LS_DASH){A1="3 1";}else{A1="";}}for(Az=0;Az<Aw;Az++){if(A3===At[Az].identity.tlOpt.key){At[Az].style.strokeDasharray=A1;At[Az].style.strokeWidth=Ay;}}}}},updateAxisLabelFontStyle:function(Av,Aw){var Au=this.manager,At=this.GMController;if(Av==="yaxis"){Au.updateSubSetOfVSlaves("axis",At.metricNamesOnRowMetricsOnXAxis);}else{if(Av==="xaxis"){Au.updateSubSetOfHSlaves("axis",At.metricNamesOnColumnMetricsOnYAxis);}else{Au.updateSubSetOfVSlaves("axis",At.metricNamesOnRowMetricsOnXAxis);Au.updateSubSetOfHSlaves("axis",At.metricNamesOnColumnMetricsOnYAxis);}}this.updateChartFontStyle(Aw,B.GM_ORIGIN_LABEL);},updateChartFontStyle:function(A1,A3,Av){var Az,At,A4,Ay,A5,Ax,A2,A0,A7,Au=this.domNode.querySelectorAll(".gm-chart .gm-tspan"),Aw=Au.length,A6=this.HTML5PROPS;switch(A3){case B.GM_ORIGIN_LABEL:if(A1.indexOf("FntClr")>=0){Ax={p:"fill",v:A6.AXIS_LABEL_X.color};A2={p:"fill",v:A6.AXIS_LABEL_Y.color};}else{if(A1.indexOf("FntStyle")>=0){Ax={p:"textDecoration",v:A6.AXIS_LABEL_X.textDecoration||"none"};A2={p:"textDecoration",v:A6.AXIS_LABEL_Y.textDecoration||"none"};}}break;case B.GM_DATA_LABEL:case"all-text":Ax=this.getPropValue(A1,Av);break;case B.GM_REF_LABEL:if(Av.opt){At=Av.opt.key;A1=Av.modifiedPropertyKeys[0];Av=Av.jsonObj[A1];}else{Av=U(A1,Av);}Ax=this.getPropValue(A1,Av);break;default:break;}for(Az=0;Az<Aw;Az++){Ay=Au[Az].getAttribute("type");if(A3==="all-text"){A5=Au[Az].parentNode.style;A5[Ax.p]=Ax.v;}else{if(Ay&&Ay.indexOf(A3)>=0){A5=Au[Az].parentNode.style;switch(A3){case B.GM_ORIGIN_LABEL:if(Ay.indexOf("v")>=0){A5[Ax.p]=Ax.v;}else{A5[A2.p]=A2.v;}break;case B.GM_DATA_LABEL:A5[Ax.p]=Ax.v;break;case B.GM_REF_LABEL:if(At){A0=Au[Az].parentNode;if(A0){A7=A0.identity;}if(A7&&A7.tlOpt){A4=A7.tlOpt.key;}if(A4===At){A5[Ax.p]=Ax.v;}}else{A5[Ax.p]=Ax.v;}break;default:break;}}}}},getPropValue:function(At,Au){var Av;if(At.indexOf("FntClr")>=0){Av=As.decodeColor(Au);return{p:"fill",v:Av};}if(At.indexOf("FntStyle")>=0){if((Au&8)&&(Au&4)){Av="line-through underline";}else{if(Au&8){Av="line-through";}else{if(Au&4){Av="underline";}else{Av="none";}}}return{p:"textDecoration",v:Av};}},updateCharts:function(){var At=this.manager.master;At.clearCharts();At.updateCharts();this.updateSelections();},updateAxisAndCharts:function(Av){var Au=this.manager,At=this.GMController;if(Av!==AR.BANDING){this.hCalcRadiusAndMargin(true);}Au.updateSubSetOfVSlaves("axis",At.metricNamesOnRowMetricsOnXAxis);Au.updateSubSetOfHSlaves("axis",At.metricNamesOnColumnMetricsOnYAxis);if(Av===AR.AXIS_ORIGIN){var Aw=this.HTML5PROPS;this.hPlaceHGridLines(Aw.GRID_LINE_MAJOR,Aw.GRID_LINE_MINOR);this.hPlaceVGridLines(Aw.GRID_LINE_MAJOR,Aw.GRID_LINE_MINOR);}this.updateCharts();},legendPartialUpdate:function(Aw,At){var Av=true,Au,Ax=this.HTML5PROPS;if(!this.legend){this.hInitLegend();}Au=this.legend;if(Aw===o.LEGEND_FONT_STYLE){Av=At;}else{if((Aw===o.LEGEND_BG_COLOR)||(Aw===o.LEGEND_FONT_COLOR)||(Aw===o.LEGEND_BG_FILL_TRANSPARENCY)){Av=false;}}Au.updateStyle(Ax.LEGEND);if(Av){Au.updateTitleLineHeight(Ax.LEGEND);this.onControlResized(false,true,false,true);Au.updateAfterResize();Au.updateSplitter();}},getLegendDockPosIdx:function(Av){var At,Au=AA.length;for(At=0;At<Au;At++){if(Av===AA[At].pos){return At;}}return -1;},makeDefaultsObjectAtOption:function(Au){var At,Av=this.getDefaultProperties();if(W.indexOf(Au)>=0){switch(Au){case AR.METRIC_SHAPES:At=this.getWidgetPropertyValue(AR.SHAPE);break;case AR.LOG_SCALE:break;case AR.METRIC_LEVEL_DATA_LABEL:At=false;break;case AR.TREND_LINE_DEF:At={};At[AR.TREND_TYPE]=Ao.EnumTrendLineModelType.BEST_FIT;At[AR.TREND_LEVEL]=Ao.EnumTrendRefLevel.DssModelLevelPerCell;At[AR.TREND_ENABLED]=false;At[AR.TREND_INCLUDE_BREAK_BY]=!!this.getChartInfo().isABL;[AR.TREND_POLY_DEGREE,AR.TREND_REF_LINE_THICKNESS,AR.TREND_REF_LINE_COLOR,AR.TREND_REF_LINE_STYLE].forEach(function(Aw){At[Aw]=Av[Aw];});break;case AR.TREND_BUBBLE_FORE_DEF:At={};At[AR.TREND_BUBBLE_FORE_FWD]=987654321;At[AR.TREND_BUBBLE_FORE_BWD]=-987654321;At[AR.TREND_BUBBLE_FORE_ENABLED]=false;break;case AR.REF_LINE_DEF:At={};At[AR.REF_TYPE]=t.AVG;At[AR.REF_ENABLED]=false;At[AR.REF_SHOW_LABEL]=true;At[AR.REF_LABEL_TYPE]=AK.DssModelLabelsType|AK.DssModelLabelsValue;At[AR.REF_LEVEL]=Ao.EnumTrendRefLevel.DssModelLevelPerCell;[AR.TREND_REF_LINE_THICKNESS,AR.TREND_REF_LINE_COLOR,AR.TREND_REF_LINE_STYLE,o.REF_LABELS_FONT_FAMILY,o.REF_LABELS_FONT_SIZE,o.REF_LABELS_FONT_STYLE,o.REF_LABELS_FONT_COLOR].forEach(function(Aw){At[Aw]=Av[Aw];});At[AR.TREND_REF_LINE_STYLE]=1;break;case AR.AXIS_ORIGIN:At={};At[AR.AXIS_ORIGIN_AUTO]=true;At[AR.AXIS_ORIGIN_VALUE]=0;break;case AR.FORMATS_ON_COMBINATION:break;case o.ALL_SHAPE_FORMAT:break;}}else{F.visPrint(Au+"is not in COMPLEX_PROPERTY object! Add it in if it is complex property");}return At;},createAxisOriginObject:function(){var At={},Av=this,Aw=AR.AXIS_ORIGIN,Au=this.getNumericAxisOptions(false);Au.forEach(function(Ax){At[Ax.key]=Av.makeDefaultsObjectAtOption(Aw);});if(At.AllMetrics===undefined){At.AllMetrics=this.makeDefaultsObjectAtOption(Aw);}return At;},getPropertiesOfFormatable:function(){var A1=this,A3=A1.getDocModel(),Aw,Av=this.curSelOptLvl,Az,A2=this.arrayOfComb,Au,Ay;if(this.interactor.fmtState===Al.PER_COLORBY){Az=this.interactor.getColorByIdentities();Aw=true;}else{Az=this.interactor.getBreakByIdentities();}Au=z.call(this,Av,Az,A2);if(Aw&&A2&&A2[0]){var A4=[],At=[];Q.forEach(A2[0],function(A5){A4.push(A5.tid);At.push(A5.eid);});if(At.length>0){var Ax=A3.getColorBy(A4,At);Au[o.SHAPE_LINE_COLOR]=Au[o.SHAPE_FILL_COLOR]=Ax.color;Au[o.SHAPE_FILL_COLOR_DEFAULT]=!Ax.isManual;Au[o.SHAPE_LINE_COLOR+g]=!Ax.isManual;}}var A0=Au[o.SHAPE_FILL_COLOR];if(Au[o.LINE_MARKER_COLOR]===undefined){Au[o.LINE_MARKER_COLOR]=A0;Au[o.LINE_MARKER_COLOR+g]=true;}else{Au[o.LINE_MARKER_COLOR+g]=false;}if(Au[o.LINE_MARKER_BORDER_COLOR]===undefined){Au[o.LINE_MARKER_BORDER_COLOR]=A0;Au[o.LINE_MARKER_BORDER_COLOR+g]=true;}else{Au[o.LINE_MARKER_BORDER_COLOR+g]=false;}if(Au[o.SHAPE_BORDER_COLOR]===undefined){Au[o.SHAPE_BORDER_COLOR]=A0;Au[o.SHAPE_BORDER_COLOR+g]=true;}else{Au[o.SHAPE_BORDER_COLOR+g]=false;}AC.call(this,Au);if(Av===K.ALL_SHAPE||Av===K.METRIC){Ay=Y.clone(Au);this.updateConflictShapeFormat(Ay,Av);return AH(Ay);}return AH(Au);},updateConflictShapeFormat:function(A0,Aw){var Au=this.getStyleEffectsOptions(),Ay,Ax,Az=this,Av=this.arrayOfComb&&this.arrayOfComb[0],At={};Q.forEach(Au,function(A1){Ay=A1.optLvl;if(Ay===K.METRIC&&Aw===K.ALL_SHAPE){Ax=z.call(Az,Ay,undefined,[A1.comb]);x(Ax,At);}else{if(Ay===K.COLOR_BY){Q.forEach(A1.subOptions,function(A2){if(!A2.key||A2.key!=="multiple"){if(Aw===K.ALL_SHAPE||(Aw===K.METRIC&&u(A2.comb,Av))){Ax=z.call(Az,Ay,undefined,[A2.comb]);x(Ax,At);}}});}}});AV(At,A0);},writeFormatableProperties:function(A7){var A6,At,A8,BG,A5,BB,Az,A1,BH=this,BF=this.GMController,A9=BF.model,BJ=this.identity,BA=A7.jsonObj,A0=A7.modifiedPropertyKeys,BI=true,Ay=A0.indexOf(o.SHAPE_FILL_COLOR),BC=A0.indexOf(o.SHAPE_LINE_COLOR),Av=true;if(Ay>-1||BC>-1){BI=false;if(!BF.hasColorBy()){BH.writeGlobalProperty(o.MODIFIED_DEF_FILL_COLOR,BA[A0[0]]);return ;}}if(!BJ){return ;}A6=BJ.objType;if(A6===AX.SHAPE_COLLECTION){var A3,Au=this.curSelOptLvl,Ax=this.arrayOfComb;if(this.interactor.fmtState===Al.PER_COLORBY){A3=this.interactor.getColorByIdentities();}else{A3=this.interactor.getBreakByIdentities();}A0.forEach(function(BP){if(BP.indexOf("CmbStyle")!==-1){var BN=BP.replace("CmbStyle","Thk"),BL=BP.replace("CmbStyle","Style"),BM=AN(BA[BP]),BK=BM.thk,BO=BM.ceLnStyle;A7.setProperty(BN,BK);A7.setProperty(BL,BO);}});if(Au===K.ALL_SHAPE){A1=o.ALL_SHAPE_FORMAT;BB=this.getWidgetPropertyValue(A1);BH.mergeModifiedFormatsForSingleShape(undefined,Au,A7);}else{if(Au===K.COLOR_BY||Au===K.METRIC||Au===K.ITSELF){A1=AR.FORMATS_ON_COMBINATION;BB=this.getWidgetPropertyValue(A1);Q.forEach(Ax,function(BK){if(A0[0]!==o.SHAPE_FILL_COLOR&&A0[0]!==o.SHAPE_LINE_COLOR){BH.mergeModifiedFormatsForSingleShape(BK,Au,A7);}});}}Az=this.getWidgetPropertyValue(A1);if(Au!==K.ALL_SHAPE&&A0){if(Ax){if(A9.colorType===p.ATT){Av=false;}A8=BF.getColorByAttrsID();At=R(Ax,A8,Av);}else{At=this.collectUniqueCombination(A3,K.COLOR_BY);}if(Ay>=0||BC>=0){BG=A0[Ay>=0?Ay:BC];A5=A7.jsonObj[BG];}}}if(!BI){this.updateColorByMap(At,A5);}else{var BE=this.id,A4=A0[0],Aw=function(){BH.GMController.clearShapeFormatsCache();BH.partialUpdate(A4,{allVal:A7},true);BH.raiseEventShapeFormattingChanged(A4);},A2=function(BK){var BL=j.all[BE];if(A1===AR.FORMATS_ON_COMBINATION){BL.GMController[A1]=Y.clone(BK);}BL.setWidgetPropertyValue(A1,BK);Aw();},BD={undo:function(){A2(BB);},redo:function(){A2(Az);}};Aw();this.submitUpdatesAndPersistXML(undefined,undefined,BD,true);}},mergeModifiedFormatsForSingleShape:function(Av,Ax,At){var Au,Aw,Ay=this.GMController;if(Ax===K.ALL_SHAPE){Au=o.ALL_SHAPE_FORMAT;Aw=this.getWidgetPropertyValue(Au);if(Aw===undefined){Aw={};}AO(Aw,At);this.setWidgetPropertyValue(Au,Aw);}else{Aw=Ay.getShapeFormatsWithCombination(Av);if(Aw===undefined){Aw={};}AO(Aw,At);Ay.setShapeFormatsWithCombination(Av,Aw);}},collectUniqueCombination:function(Au,Ax){var Ay={},Av,Aw,At=[];Q.forEach(Au,function(Az){if(Ax===K.ITSELF){Av=Az.getSelectedObjectLowestLevel(true);}else{if(Ax===K.COLOR_BY){Av=Az.getSelectedObjectColorByInfo();}else{if(Ax===K.METRIC){Av=Az.getSelectedObjectMetricInfo();}}}Aw=As.serializeCombination(Av);if(Ay[Aw]===undefined){Ay[Aw]=true;At.push(Av);}});return At;},getTrendRefInfo:function(At){return AY(At);},changeShapeProperty:function w(Au,Av){var At=this;if(this.syning){return ;}At.setWidgetPropertyValue(Au,Av.jsonObj||Av);},updateColorByMap:function(Az,Av){var Au=JSON.stringify({color:Av}),At=this.getDocModel(),Ax=[],Ay=At.getUpdateColorMapCallback(),Aw=F.getUpdateColorMapAction.bind(this);Q.forEach(Az,function(A0){Ax.push(Aw(A0,Au));});this.submitUpdatesAndPersistXML(Ax,Ay,undefined,false,true);if(this.forceUpdateColorMap){if(Ay.success&&Ax.length>0){Ay.success({defn:{epm:Ax[0].epm}});}}},checkCustomScale:function(Au){var Av=false,At=this.getWidgetPropertyValue(AR.AXIS_SCALE_DATA);Q.forEach(At||[],function(Ax){if(Ax.length>1){if(Ax[0]===Au){var Aw=parseInt(Ax[1],10);if(Aw===s.CUSTOM){Av=true;return false;}}}});return Av;},abandonCustomAxisScale:function(){if(this.GMController.hasCustomOnAxis()){this.setWidgetPropertyValue(AR.AXIS_SCALE,s.GLOBAL);}},absorbAxisOrigin:function(){var At=this.getWidgetPropertyValue(AR.AXIS_ORIGIN),Au=this.createAxisOriginObject();if(At){Y.forEach(Au,function(Ax,Ay){if(At[Ay]){Au[Ay]=At[Ay];}});}var Av=true;var Aw=null;Y.forEach(Au,function(Ax,Ay){if(Ay!=="AllMetrics"){Av=Av&&Ax.axOriAuto;if(Aw===null){Aw=Ax.axOriValue;}else{if(Aw!==undefined){if(Aw!==Ax.axOriValue){Aw=undefined;}}}}});Au.AllMetrics={axOriAuto:Av,axOriValue:Aw};this.setWidgetPropertyValue(AR.AXIS_ORIGIN,Au);},resetAxisOrigin:function(){this.removeWidgetProperty(AR.AXIS_ORIGIN);},clearChartScale:function(){this.removeWidgetProperty(AR.SCALE_CHART_WIDTH);this.removeWidgetProperty(AR.SCALE_CHART_HEIGHT);},persistOnTheFlyShape:function(Az){var Ay=this.GMController,Av=Ay.model,Aw=Av.getMetricIDsFromIndex([Az])[0],Ax=Ay.getResolvedShapeForMetric(Az),At=Ay.getOnTheFlyShapeForMetric(Az);if(Ax!==At){var Au=this.readGlobalProperty(AR.METRIC_SHAPES);Au.setProperty(Aw,At);this.setWidgetPropertyValue(AR.METRIC_SHAPES,Au.jsonObj);}},updateMetricShape:function(Aw){var At=this.readGlobalProperty(AR.METRIC_SHAPES),Au=Aw.did,Av=At.jsonObj,Ax=false;if(At!==undefined&&Av.hasOwnProperty(Au)){delete Av[Au];delete Av[Au+AT];Ax=true;}if(Ax){this.setWidgetPropertyValue(AR.METRIC_SHAPES,Av);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.hash","mstrmojo.VisBase","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.VisTooltip","mstrmojo.VisSplitter","mstrmojo.VisAxisLabel","mstrmojo.gm.TitleLabelCapsule","mstrmojo.MenuButton","mstrmojo.WidgetMatrix","mstrmojo.WidgetMatrixManager","mstrmojo._HasOwnAvatar","mstrmojo._VizSelectionHelper","mstrmojo.vi.ui._IsDropTarget","mstrmojo.gm._SupportDndAsBlackBox","mstrmojo.vi.models.EnumDragSources","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.vi._MonitorsAppState","mstrmojo.chart.enums.EnumLineStyle","mstrmojo.vi.ui.rw._XtabDE","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.chart.common.Utility","mstrmojo.vi.ui.rw.VizBox","mstrmojo.vi.ui.VIDragUnit");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVizStyles","EnumVisualizationTemplates");mstrmojo.requiresClsP("mstrmojo.vi.ui.rw","_HasVisSelections","selectors._IsMultiUnitControl","selectors._BrushesAndHighlights");mstrmojo.requiresClsP("mstrmojo.ui.menus","ToolbarEditorConfig","MenuConfig","_HasMenuPopup");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMLegend","GMLayout","GMContainer","GMController","GMInteractivity","GMProperty","GMPropertyNode","GMPropDefaults","DndItemRenderer","GMAxisScale","GMIdentities","_SupportGraphMatrixBrushesAndHighlights","GMScroll","_GMPropertyHandler");mstrmojo.requiresDescs(12093,12094,12095,12096,12097,12098,12099,12100,12101,12102,12103,12104,13165);var S=true,t=mstrmojo,A3=t.vi.viz,A8=t.gm,A9=t.func.wrapMethods,b=t.array,A6=t.css,AY=t.dom,q=t.num,h=t.hash,U=t.VisUtility,B=A3.EnumDSSDropZones,AA=A3.EnumVizStyles,Az=AA.GRAPH_MATRIX,Ay=A3.EnumVisualizationTemplates,BC=A8.GMUtility,AR=A8.GMUtility.sizeCalculator,c=A8.GMLegend,d=A8.EnumShape,Ad=A8.WidgetPropertyTag,AG=A8.FormatingPropertyTag,l=A8.EnumTRFManipulations,j=150,y=5,C=250,o=0.75,Q=0.2,O=1,A5=1,D=1,AF=1,AV=15,Af=15,Av=5,AO=1,At=t.vi.models.EnumDragSources,Ax=t.VisEnum.GMLegendDataType,AB=A8.EnumTheme,J=A8.EnumLegendMode,AK=A8.EnumLegendSlot,AL=A8.EnumGridLines,R=A8.EnumClickType,V=A8.EnumGraphType,Ao=A8.EnumContextMenu,G=t.VisEnum.ControlType,Al=A8.EnumDockPosition,Ak=A8.EnumIdentityType,A0=A8.EnumShapeFormatStatus,BA=A8.Enum3DGMapping,W=A8.EnumSelectionOptionLevel,Ag="_tmsp",AJ=A8.EnumColorByType,AH=A8.EnumFitTo;var N=["mstrmojo.gm.GMProperty","mstrmojo.gm.GMInteractivity","mstrmojo.vi.models.GMDropZones","mstrmojo.vi.models.CombineDropZonesModel","mstrmojo.vi.models.editors.GMEditorModel","mstrmojo.Model","mstrmojo.gm.GMController","mstrmojo.ui.menus.Menu","mstrmojo.ui.menus.ToolbarEditor"];function Aj(){var BE=this.chartResizeListener,BJ=this.splitterListeners,BH=this.lassoListener,BF=this.legendResizeListener,BG=this.legendClickListener,BI=this.updateSelectionsListener;if(BE){BE.clear();delete this.chartResizeListener;}if(BJ){BJ.forEach(function(BK){BK.clear();});this.splitterListeners=[];}if(BH){BH.clear();delete this.lassoListener;}if(BF){BF.clear();delete this.legendResizeListener;}if(BG){BG.clear();delete this.legendClickListener;}if(BI){BI.clear();delete this.updateSelectionsListener;}}var Ab=[];function Aa(){var BE=this.GMController,BF=BE.getGraphShapeCount(true);if(BF>10000){j=800;}else{j=150;}}function Aw(){var BG,BL,BJ=this.GMController,BM=BJ.getColTitleInfo(true),BE=this.colHeaderHArr.length,BN=this.HTML5PROPS,BH=BJ.getAttributesOnDropZone("Rows").length>0?2:3,BF,BK;var BI=function(){BK=this.rowHeaderMaxHeightWithoutX2;BF=U.measureTextHeight("Test Text",BN.RH_TITLE,0,100,undefined,true,true);BK=Math.max(BK,BF*BH+2*AO+2*Av);return BJ.haveX2?65535:BK;};this.colHeaderMaxHeightArr=[];for(BG=0;BG<BE;BG++){BL=BM.items[BG].n;BF=U.measureTextHeight(BL,BN.CH_TITLE,0,100,undefined,true,true);BK=BF*BH+2*AO+2*Av;this.colHeaderMaxHeightArr.push(Math.max(BK,this.colHeaderHArr[BG]));}this.rowHeaderMaxHeight=BI.call(this);}function AN(BE,BF,BG){BF.clearCachedXMLDoc();BF.updateDefaults(this.getDefaultProperties(),BE);BF.setTemplateObjectMapping(BG);BF.consumeJsonFmt(BE);BF.initFromXML();}function Ar(BG,BH,BJ){var BE=BG.gts,BI=true,BF=BJ.supportViewFilterPool={};b.forEach(BE.row,function(BK){var BM=BK.id,BL;if(BM&&BM!==""){BL=BH.supportsViewFilterActions(BK.id);if(!BL){BI=false;}BF[BK.id]=BL;}});b.forEach(BE.col,function(BK){var BM=BK.id,BL;if(BM&&BM!==""){BL=BH.supportsViewFilterActions(BK.id);if(!BL){BI=false;}BF[BK.id]=BL;}});BJ.supportViewFilter=BI;}function k(BQ){var BK=this,BI=this.readGlobalProperty(Ad.METRIC_SHAPES),BP=BQ.chartType,BO=(BP===V.AREA||BP===V.BAR||BP===V.LINE),BG=false,BE,BN,BH,BF=false,BJ=false,BR;if(!BO||BI===undefined){BG=false;}else{var BM=BQ.model;BR=BI.jsonObj;BN=BQ.getMetricsOnYAxis();BN=BN.concat(BQ.getMetricsOnXAxis());BE=BM.getMetricIDsFromIndex(BN);b.forEach(BE,function(BS){if(BR[BS]!==undefined){BG=true;}});b.forEach(BN,function(BS){if(BQ.getForbiddenShapeForMetric(BS).length>0){BG=true;BK.persistOnTheFlyShape(BS);}});BF=true;BJ=false;var BL=BQ.metricShapeArr=[];b.forEach(BN,function(BS){BH=BQ.getOnTheFlyShapeForMetric(BS);BL[BS]=BH;if(BH!==d.AREA){BF=false;}if(BH===d.BAR){BJ=true;}});}BQ.enableCombiChart=BG;BQ.hasBarChart=BJ;BQ.pureAreaChart=BF;}function AZ(BG){var BE=BG.dz;if(!BE){BE=BG.dz={};}var BF=["Rows","Columns","XAxis","YAxis","BreakBy","ColorBy","SizeBy","SliceBy","AdditionalMetrics","AngleBy","visProp"];b.forEach(BF,function(BH){if(!BE[BH]){BE[BH]={};}});if(!BE.visProp.fmt){BE.visProp.fmt={};}}function x(BQ){var BE=this.GMController,BY=BE.getChartInfo();if(BY.isBubbleOrScatter){var BT=BQ.selectedCharts,BN,BH,BU,BI,BM,BX,BJ,BK,BV,BP,BF,Ba,BO=this.masterViewer,BS,BR;var BG=function(Be,Bd,Bg,Bf,Bc,Bb){return Bc>=Be&&Bc<=Bd&&Bb>=Bg&&Bb<=Bf;},BZ=function(Bc,Bb,Be,Bd){return(Be-Bc)*(Be-Bc)+(Bd-Bb)*(Bd-Bb);};var BL=function(Bl,Bm,Bk){var Bg=Bm.BoundingBox.x,Bf=Bm.BoundingBox.y,Bc=Bm.Size,Bi=Bl.offsetLeft,Bh=Bl.offsetTop,Bj=Bl.offsetWidth,Bb=Bl.offsetHeight,Be=Bk.left,Bo=Bk.top,Bd=Be+Bk.width,Bn=Bo+Bk.height;Be=Math.max(Be-Bi,0);Bd=Math.min(Bd-Bi,Bj);Bo=Math.max(Bo-Bh,0);Bn=Math.min(Bn-Bh,Bb);return BZ(Bg,Bf,Be,Bo)<Bc*Bc||BZ(Bg,Bf,Be,Bn)<Bc*Bc||BZ(Bg,Bf,Bd,Bo)<Bc*Bc||BZ(Bg,Bf,Bd,Bn)<Bc*Bc||BG(Be-Bc,Bd+Bc,Bo,Bn,Bg,Bf)||BG(Be,Bd,Bo-Bc,Bn+Bc,Bg,Bf);};var BW=BT?BT.length:0;for(BS=0;BS<BW;BS++){BN=BT[BS];BV=BN.row;BP=BN.col;BH=BO.getChart(BV,BP);BX=BE.getDataProvider(BV,BP);BU=BH&&BH.hiddenItems;BM=BU?BU.length:0;for(BR=0;BR<BM;BR++){BI=BU[BR];BF=BI.Id.mGroupId;Ba=BI.Id.mSeriesId;if(BL(BH,BI,BQ)){BJ=BX.getGraphCell(Ba,BF).getIdentity();BK=this.interactor.getShapeSelectionInfo(BJ);this.addMetricValueSelection(BK);}}}}}function g(BG,BJ,BH){var BQ=BJ.firstChild,BV=BH.firstChild,BI=BQ?BQ.offsetWidth:0,BF=BQ?BQ.offsetHeight:0,BK=BV?BV.offsetWidth:0,BS=BV?BV.offsetHeight:0,BR=document.body.offsetWidth,BN=document.body.offsetHeight,BM=10,BU=5,BW=5;if(BQ){BQ.style.left="0";BQ.style.right="auto";BQ.style.top="0";BQ.style.bottom="auto";}if(BV){BV.style.left="0";BV.style.right="auto";BV.style.top="0";BV.style.bottom="auto";}var BE={w:Math.max(BI,BK),h:0};var BO=BF>0,BP=BS>0;if(BO&&BP){BE.h=BF+BS+BM;}else{if(BO){BE.h=BF;}else{if(BP){BE.h=BS;}else{return false;}}}if(BO){BJ.style.left=BG.x+"px";BJ.style.top=BG.y-BF-BM/2+"px";}if(BP){BH.style.left=BG.x+"px";BH.style.top=BG.y+BM/2+"px";}if(BG.x+BE.w>BR){BJ.style.left=BG.x-BI+"px";BH.style.left=BG.x-BK+"px";}if(BO){var BL=0;if(BG.y-BF-BM/2<BU){BL=BU;BJ.style.top=BL+"px";BH.style.top=BL+BF+BM+"px";}else{if(BG.y+BM/2+BS>BN){BL=Math.max(BN-BS-BM-BF,BU);BJ.style.top=BL+"px";BH.style.top=BL+BF+BM+"px";}}}else{if(BP){var BT=0;if(BG.y+BM/2+BS>BN){BT=Math.max(BN-BW-BS,BU);BH.style.top=BT+"px";}}}}function AE(BL,BK,BM){var BG=AY.position(BM),BI=BG.x,BO=BG.x+BG.w,BF=BG.y+BG.h,BN=false,BJ,BE;b.forEach(BK||[],function(BR){var BQ=AY.position(BR),BU=BQ.x,BS=BQ.x+BQ.w,BP=BQ.y,BW={xLeft:Math.max(BU,BI),xRight:Math.min(BS,BO),yTop:BF,yBottom:BP},BV=BL.pageX,BT=BL.pageY;BN=BV>=BW.xLeft&&BV<=BW.xRight&&BT>=BW.yTop&&BT<=BW.yBottom;return !BN;});if(BN&&BL.target&&BL.target.getAttribute("type")==="marker"){BJ=BL.target.getAttribute("class");BE="no-hover-"+BJ;BL.target.setAttribute("class",BE);BL.target.setAttribute("type","no-hover-marker");Ab.push(BL.target);}else{var BH=[];b.forEach(Ab,function(BP){BE=BP.getAttribute("class");BJ=BE.substring(9);if(BP===BL.target&&BN){BH.push(BP);}else{BP.setAttribute("class",BJ);BP.setAttribute("type","marker");}});Ab=BH;}return BN;}function Ac(BE){var BG=this.GMController,BH=BG.getChartInfo(),BF;if(BH.isABL){BF=0;}else{if(BH.isBubbleOrScatter){BF=1;}else{BF=2;}}if(BE||(this.lastChartType!==undefined&&BF!==this.lastChartType)){this.raiseEvent({name:"regenerateToolbar"});}this.lastChartType=BF;}function AD(){return{success:function BE(){this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}function Aq(BG,BE,BH){var BF=new mstrmojo.ui.editors.controls.CharacterGroup(BG);BF.setFormatSource(BE);if(BH!=="undefined"){BF.fontColor.showNoFill=BH;}return BF;}function u(BJ){var BG=this,BH,BI,BF,BE;BH=BG.parent.boxContent;BE=BH.model.docModel;BI=BH.fmts.ttl;BF=BH.getFontToolbarProps();if(BF.onGroupValueChange===undefined){BF.onGroupValueChange=function(BK,BM,BL){BE.changeUnitFormatProperty(BG.parent,[{formatType:2,propertyName:BK,newValue:BM,oldValue:BL}]);};}return Aq(BF,BI,BJ);}function f(BF){var BE=this;return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[u.call(BE,BF)]}]});}function A2(BE){return mstrmojo.hash.copy(BE,{act:"operateTRFLine",tks:this.k,partialRetrieval:this.model.getDataService().newRetrievalKeysConfig().addNode(this.k)});}function w(BG,BE){var BF=this.readGlobalProperty(Ad.METRIC_LEVEL_DATA_LABEL);BF.setProperty(BG,BE);this.writeGlobalProperty(Ad.METRIC_LEVEL_DATA_LABEL,BF,undefined);}function Ap(BE){return BE.model.controller.cmdMgr;}function Z(BE){return{act:"setProperty",nodeKey:this.getData().k,prs:"FormattingWidget",pri:4,v:BC.replaceSpecialChars(BE)};}function AQ(BI,BH,BF){var BK,BE,BJ="block",BG=BI.style;for(BK in BH){if(BH.hasOwnProperty(BK)){BE=BH[BK];if((typeof BE)==="number"){if((BK==="width"||BK==="height")&&BE===0){BJ="none";}BE+="px";}BG[BK]=BE;}}BG.backgroundColor="rgba(0,0,0,0)";if(!BF&&!BH.hasOwnProperty("display")){BG.display=BJ;}}function e(BI,BW,BH){var BT,BM,BK=1-Q,BR=this.GMInfo,BQ=BR.yAxisWidth,BF=BR.yAxis2Width,BL=BR.xAxisHeight,BS=BR.xAxis2Height,BN=this.getWidth(),BU=this.getHeight(),BO=this.rowHeaderW,BP=this.colHeaderH,BV=this.actualWidth,BJ=this.actualHeight,BE=(BH&&BH.min!==undefined)?BH.min:20,BG=(BH&&BH.max!==undefined)?BH.max:65535;if(BI===G.GM_YAXIS){return{size:BQ,min:BE,max:Math.min(BG,Math.floor(BN*BK-BO-BF))};}if(BI===G.GM_YAXIS2){return{size:BF,min:BE,max:Math.min(BG,Math.floor(BN*BK-BO-BQ))};}if(BI===G.GM_XAXIS){return{size:BL,min:BE,max:Math.min(BG,Math.floor(BU*BK-BP-BS))};}if(BI===G.GM_XAXIS2){return{size:BS,min:BE,max:Math.min(BG,Math.floor(BU*BK-BP-BL))};}BT=this.rowHeaderWArr[BW];if(BI===G.GM_V_MATRIX_LINE){return{size:BT,min:BE,max:Math.min(BG,Math.floor(BN*BK-BQ-BF-BO+BT))};}BT=this.colHeaderHArr[BW];if(BI===G.GM_H_MATRIX_LINE){return{size:BT,min:BE,max:Math.min(BG,Math.floor(BU*BK-BL-BS-BP+BT))};}BM=this.manager;if(BI===G.GM_V_CHART_LINE){return{size:BM.getColWidth(BW),min:BE,max:BG};}if(BI===G.GM_H_CHART_LINE){return{size:BM.getRowHeight(BW),min:BE,max:BG};}if(BI===G.GM_V_EXTRA_LINE){return{size:this.rowHeaderExtraW,min:BE,max:Math.min(BG,Math.floor(BN*BK))};}BT=BV-BQ-BF-BO;if(BI===G.GM_RIGHT_BORDER){return{size:BT,min:BE,max:Math.min(BG,Math.floor(BN-BQ-BF-BO))};}BT=BJ-BL-BS-BP;if(BI===G.GM_BOTTOM_BORDER){return{size:BT,min:BE,max:Math.min(BG,Math.floor(BU-BL-BS-BP))};}}function A4(BG,BF){var BH=!BF?this.getDependentMetricOptions():this.getIndependentMetricOptions(),BE;BH.forEach(function(BI){if(BG===BI.key){BE=BI;}});return BE;}function M(BE){var BG=this.getReferenceAxisOption(),BF;BG.forEach(function(BH){if(BH.key===BE){BF=BH;return false;}});return BF;}function AI(BF,BE){var BG;if(BF&&BE){BF.style.display="none";BG=document.elementFromPoint(BE.pageX,BE.pageY);BF.style.display="block";}return BG||BF;}function AT(BL,BJ){var BG=this.scrollNode;if(!BG){return ;}var BM=BG.xPos=BG.xPos||0,BK=BG.yPos=BG.yPos||0,BI=BG.xPos+BJ.deltaX,BH=BG.yPos+BJ.deltaY,BF=BG.offsetWidth-BG.parentNode.offsetWidth,BE=BG.offsetHeight-BG.parentNode.offsetHeight;BH=(BH<0)?0:BH;BH=(BH>BE)?BE:BH;BI=(BI<0)?0:BI;BI=(BI>BF)?BF:BI;if(BK===BH&&BM===BI){return ;}switch(BL){case"v":BK=BG.yPos=BH;break;case"h":BM=BG.xPos=BI;break;default:BK=BG.yPos=BH;BM=BG.xPos=BI;}BG.style[AY.CSS3_TRANSFORM]=AY.createTranslateString(-BM,-BK,0);this.onscroll();}function AS(BG){var BF=BG.target||BG.srcElement,BE=BF.getAttribute("ctrlType");if(BE===G.GM_CHART_ROW||BE===G.GM_CHART_COL){AT.call(this,"both",BG);}}mstrmojo.gm.VisGraphMatrix=mstrmojo.declare(mstrmojo.VisBase,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.gm._SupportDndAsBlackBox,mstrmojo._VizSelectionHelper,mstrmojo.vi.ui.rw._HasVisSelections,mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl,mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights,mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights,mstrmojo.vi._MonitorsAppState,mstrmojo.vi.ui.rw._XtabDE,mstrmojo.gm._GMPropertyHandler],{scriptClass:"mstrmojo.gm.VisGraphMatrix",cssClass:"gm-light-theme",menuCssClass:"gm-context-menu-light",theme:AB.LIGHT,noData:false,zIndex:1,sBarWidth:11,textHeightInX:20,textHeightInY:20,lines:null,masterViewer:undefined,slaveRowHeaders:[],slaveColHeaders:[],slaveYAxis:undefined,slaveYAxis2:undefined,slaveXAxis:undefined,slaveXAxis2:undefined,manager:undefined,chartResizeListener:undefined,splitterListeners:undefined,lassoListener:undefined,updateSelectionsListener:undefined,interactor:undefined,mousePos:undefined,layouter:mstrmojo.gm.GMLayout,svgPool:[],normalizedIdCache:{},formattingMode:false,enableTooltip:true,enableShapeHover:true,curSelOptLvl:undefined,enableCETimer:false,initFlagForContextMenu:true,preClickType:R.NONE,trendLineNotifications:null,referencefLineNotifications:null,handleDndForParentNode:true,avatarCssClass:"mstrmojo-VIUnitList",mainContainerNode:"domMainContainer",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px; position:absolute; height:{@height}px; left:{@left}px; top:{@top}px; z-index:{@zIndex};" mstrAttach:click,scroll,mouseover,mousemove,mouseout,mousedown,mouseup,contextmenu><div class="gm-main-container"><div class="gm-tableheader"></div><div class="gm-colheader"></div><div class="gm-rowheader"></div><div class="gm-yaxis"></div><div class="gm-container"></div><div class="gm-yaxis"></div><div></div><div class="gm-xaxis"></div><div></div><div class="gm-dummy-a"></div><div class="gm-dummy-b"></div></div><div class="gm-legend"></div><div class="gm-message"></div></div>',markupSlots:{domMainContainer:function(){return this.domNode.firstChild;},domTabHeader:function(){return this.domNode.firstChild.childNodes[0];},domColHeader:function(){return this.domNode.firstChild.childNodes[1];},domRowHeader:function(){return this.domNode.firstChild.childNodes[2];},domYAxis:function(){return this.domNode.firstChild.childNodes[3];},domGM:function(){return this.domNode.firstChild.childNodes[4];},domYAxis2:function(){return this.domNode.firstChild.childNodes[5];},domVSBar:function(){return this.domNode.firstChild.childNodes[6];},domXAxis:function(){return this.domNode.firstChild.childNodes[7];},domHSBar:function(){return this.domNode.firstChild.childNodes[8];},domDummyA:function(){return this.domNode.firstChild.childNodes[9];},domDummyB:function(){return this.domNode.firstChild.childNodes[10];},domLegend:function(){return this.domNode.childNodes[1];},domMessage:function(){return this.domNode.childNodes[2];}},init:function(BE){this.lines={axes:{},borders:{},vlines:{},hlines:{},rows:[],cols:[],hMajorGridLines:[],hMinorGridLines:[],vMajorGridLines:[],vMinorGridLines:[],axisSplitters:{}};this.HTML5PROPS={};this._super(BE);this.property=this.addDisposable(new A8.GMProperty());this.interactor=this.addDisposable(new A8.GMInteractivity({widget:this,fmtMode:this.formattingMode}));this.initFlagForContextMenu=true;this.trendLineNotifications=[];this.referencefLineNotifications=[];this.splitterListeners=[];this.enableDomDommy=false;},onAppStateChange:function Ai(BE){this._super(BE);this.closePopup();},getContainerMenuItems:function(BF){if(!this.noData){var BG=this.getMenuHandler("changeGlobalShape");if(BG){BF.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",this.id,BG);}}var BE=this.getMenuHandler("debug");if(BE){}},raiseEventCMSelection:function(BE,BF){var BG={name:"onContextMenuSelection",identityType:BE};if(BF!==undefined){BG.metricId=BF;}this.raiseEvent(BG);return BG;},raiseEventFormatableChanged:function(BE,BH,BF){if(BE===undefined&&BH===undefined&&BF===undefined){this.raiseEvent(this.lastFormatableChangedObj);return this.lastFormatableChangedObj;}var BG={name:"formattingObjectChanged",identity:BE};BG.selectionlevel=BH;if(BF){BG.arrayOfComb=BF;}this.identity=BE;this.curSelOptLvl=BH;this.arrayOfComb=BF;this.raiseEvent(BG);this.lastFormatableChangedObj=BG;return BG;},raiseEventGlobalPropertyChanged:function(BG,BF,BE){var BH={name:"propertyChanged",n:BG,opt:BE,v:BF};this.raiseEvent(BH);return BH;},raiseEventOnFormattingIdentity:function(BE){if(this.formattingMode){var BF={name:"nonShapeFormatableChanged",identities:BE};this.raiseEvent(BF);return BF;}},raiseEventOnNonFormattingIdentity:function(BE){var BF={name:"nonShapeFormatableChanged",identities:BE};this.raiseEvent(BF);return BF;},raiseEventShapeFormattingChanged:function(BE){var BF=this.getPropertiesOfFormatable();BF.modifiedPropertyKeys=[BE];if(BE===AG.SHAPE_FILL_COLOR){BF.modifiedPropertyKeys.push(AG.SHAPE_BORDER_COLOR);}this.raiseEventGlobalPropertyChanged("ShapeFormatting",BF);},absorbGraphStyle:function(){var BJ=this,BE,BF=this.getChartInfo(),BN=mstrmojo.chart.common.Utility,BH=this.defn.gpp,BG=BH&&BH.gp,BI;BE={isGridChart:BF.isGrid,isPieShape:BF.isPie,isVertical:BF.dirc===A8.EnumABLDirection.VERTICAL};var BM,BL=1,BK=false;b.forEach(BG,function(BO){BI=BN.transformProperty(BO,0,BE);if(BI&&BI.Name){BK=false;switch(BI.Name){case"ShowSeriesDataLabel":if(!BM){BM=BM||BI.Value;}break;case"DataLabel":BL=BI.Value;BK=BE.isPieShape;break;default:BK=true;break;}if(BK&&BJ.property.readItem(BI.Name,true)===undefined){BJ.setWidgetPropertyValue(BI.Name,BI.Value);}}});if(BM===false){BJ.setWidgetPropertyValue("DataLabel",1);}else{if(BM===true){BJ.setWidgetPropertyValue("DataLabel",BL);}}},postFillGMControllerStyle:function AU(){var BF=this.GMController,BE=this.HTML5PROPS;BF.rhStyles=BE.RH;BF.chStyles=BE.CH;BF.xTitleStyles=BE.AXIS_TITLE_X;BF.yTitleStyles=BE.AXIS_TITLE_Y;},checkTemplateAndDropzone:function(){var BI=this,BG=BI.getData(),BN=BG.dz,BE=BG.gts;if(!!BG.eg){return true;}var BK=BE,BH=BK.row,BF=BK.col,BM;[BF,BH].forEach(function(BP){if(!BM&&BP){var BO=BP[BP.length-1];if(BO&&BO.otp===-1&&BO.es){BM=BO.es;}}});var BJ=["Rows","Columns","SizeBy","AngleBy","SliceBy","ColorBy","XAxis","YAxis","BreakBy","AdditionalMetrics"],BL=true;b.forEach(BJ,function(BP){var BO=BN[BP],BQ;if(BO){BQ=BO.TemplateMetric;if(BQ){b.forEach(BQ,function(BR){BL=BL&&(b.find(BM,"oid",BR.id)!==-1);});}}});return BL;},update:function AC(BH){var BM=this._super(BH);if(!BM){return BM;}if(!this.checkTemplateAndDropzone()){mstrmojo.err({name:"Currently we do not support metric selector targeting to Widget",message:"Attribute/Metric in Dropzone doesn't match Grid Template"});return BM;}var BN=this,BU=BN.model,BT=this.getData(),BS,BG,BQ,BP=this.property,BR=BU.docModel,BI=BR.datasets,BF,BJ;if(U.isOnExpressMode()){this.noData=BT.eg!==undefined;if(!BT.eg){this.INVALID_TEMP=BC.isInvalidTemplate(BT);}if(this.noData||this.INVALID_TEMP){this.errorMsg=BC.getInvalidTemplateErrMsg(BT.eg);return BM;}}BN.sid=BT.sid;AZ(BT);BC.startTimer({functionName:"VisGraphMatrix.update",purpose:"JSON loading & consuming ("+this.k+")"});BS=BT.dz;BG=BS.visProp.fmt;var BO,BL={},BK,BE={};for(BF in BI){if(BI.hasOwnProperty(BF)){BJ=BI[BF];BK=BJ.did;BO=BJ.att.concat(BJ.mx);b.forEach(BO,function(BV){BL[BV.did]=BV.t;BE[BV.did]=BK;});}}this.itemId2DsIdMap=BE;AN.call(this,BG,BP,BL);BC.destroyDisposable(this,this.GMController);BQ=this.GMController=this.addDisposable(new A8.GMController({view:this,property:this.property,defn:this.defn,firstRes:BT,xtabModel:BU}));BQ.msgCenter={};this.noData=!!BT.eg;if(!this.noData){BQ.postInit();this.absorbGraphStyle();this.resetHTML5Props();BQ.checkDataLabelType();this.absorbAxisOrigin();Ar.call(this,BT,BU,BQ);k.call(this,BQ);BQ.updateChartInfo();BP.setController(this.GMController);Ac.call(this,true);}else{this.errorMsg=BT.eg;}BC.endTimer();return BM;},getVisType:function F(){var BI=this.getWidgetPropertyValue("visType");if(BI===undefined){var BH=this.GMController.chartType,BG=this.getChartInfo(),BE=A8.EnumABLDirection.VERTICAL;if(BG.isCombo){BI=Ay.GRAPHCOMBINATIONBARAREADUALAXIS;}else{if(BG.isGrid){var BF=this.getWidgetPropertyValue(Ad.SHAPE);if(BF===d.LINE){BH=V.LINE;}else{if(BF===d.BAR){BH=V.BAR;}else{if(BF===d.AREA){BH=V.AREA;}else{if(BF===d.PIE){BH=V.BAR;}else{if(BF===d.RING){BH=V.BAR;}else{BH=V.BAR;}}}}}}switch(BH){case V.AREA:BI=(BG.dirc===BE)?Ay.GRAPHMATRIXVERTICALAREAAUTOMATIC:Ay.GRAPHMATRIXHORIZONTALAREAAUTOMATIC;break;case V.BAR:BI=(BG.dirc===BE)?Ay.GRAPHMATRIXVERTICALBARAUTOMATIC:Ay.GRAPHMATRIXHORIZONTALBARAUTOMATIC;break;case V.LINE:BI=(BG.dirc===BE)?Ay.GRAPHMATRIXVERTICALLINEAUTOMATIC:Ay.GRAPHMATRIXHORIZONTALLINEAUTOMATIC;break;case V.SCATTER:case V.BUBBLE:BI=Ay.GRAPHMATRIXBUBBLECIRCLEMM;break;case V.PIE:BI=Ay.GRAPHMATRIXPIE;break;case V.GRID:break;}}}return{s:Az,vt:BI};},setInteractive:function(BE){this.enableTooltip=BE;this.enableShapeHover=BE;},getFlushGraphPropertyAction:function(BF){var BL=[],BG,BE,BK,BI,BH,BJ=false;b.forEach(BF,function(BM){BG=BM.n;BI=BM.v;BH=BA[BG];if(BH!==undefined){BJ=true;BE=BH.split("_");BK=BE.join("\u001e");BL[BK]=BI;}});},isInCombinationMode:function(){var BE=this.GMController;return BE.enableCombiChart;},trendLineCouldBeEnabled:function(){return true;},refLineCouldBeEnabled:function(){return true;},isAttributeMetricChart:function(){var BE=this.GMController;return BE.isABL;},getGraphFormatsForSingleShape:function(BH,BI){var BG,BF,BE,BJ,BK=this.GMController;if(BI===W.ALL_SHAPE){BF=AG.ALL_SHAPE_FORMAT;BE=this.getWidgetPropertyValue(BF);return BE;}if(BI===W.ITSELF_RESOLVED){BJ=BH.getGraphCell();return BJ.getFormattingProperties();}if(BI===W.ITSELF){BG=BH.getSelectedObjectLowestLevel(true);}else{if(BI===W.COLOR_BY){BG=BH.getSelectedObjectColorByInfo();}else{if(BI===W.METRIC){BG=BH.getSelectedObjectMetricInfo();}}}return BK.getShapeFormatsWithCombination(BG);},clientRerenderGraphMatrix:function(){this.update();this.GMController.reRenderGM();},updateColorMapCallback:function(){this.colorByData=this.GMController.getColorByLegendInfo();this.GMController.clearShapeFormatsCache();this.updateCharts();if(this.legend){this.legend.updateColorBySquare(this.colorByData);}this.raiseEventShapeFormattingChanged(AG.SHAPE_FILL_COLOR);},applyHTML5Props:function(BE){O=parseInt(BE.MATRIX_LINE_V.borderWidth,10)||1;A5=parseInt(BE.MATRIX_LINE_H.borderWidth,10)||1;D=parseInt(BE.AXIS_LINE_Y.borderWidth,10)||1;AF=parseInt(BE.AXIS_LINE_X.borderWidth,10)||1;AV=Math.floor((parseInt(BE.AXIS_TITLE_X.fontSize,10)||11)/o+0.5);Af=Math.floor((parseInt(BE.AXIS_TITLE_Y.fontSize,10)||11)/o+0.5);BE.AXIS_TITLE_X.lineHeight=AV+"px";BE.AXIS_TITLE_Y.lineHeight=Af+"px";AV+=12;Af+=12;},getAddTRLineAction:function(BF){var BE=A2.call(this,BF);BE.rm=l.AddTRLine;return BE;},getUpdateTRLineAction:function(BF){var BE=A2.call(this,BF);BE.rm=l.UpdateTRLine;return BE;},getRemoveTRLineAction:function(BF){var BE=A2.call(this,BF);BE.rm=l.RemoveTRLine;return BE;},getUpdateForecastInfoAction:function(BF){var BE=A2.call(this,BF);BE.rm=l.UpdateForecastInfo;return BE;},collectTrendLineAction:function(BF,BH,BE){var BG;BG=this.getTrendRefInfo(BF);if(BE){BG.metricId=BE;}if(BF.existing){BH.push(this.getUpdateTRLineAction(BG));}else{BH.push(this.getAddTRLineAction(BG));}},collectRefLineAction:function(BG,BH,BE){var BF;BF=this.getTrendRefInfo(BG);if(BE){BF.metricId=BE;}if(BG.existing){BH.push(this.getUpdateTRLineAction(BF));}else{BH.push(this.getAddTRLineAction(BF));}},collectAddRefLineAction:function(BF,BG){var BE;BE=this.getTrendRefInfo(BF);BG.push(this.getAddTRLineAction(BE));},collectRemoveRefLineAction:function(BF,BG){var BE;BE=this.getTrendRefInfo(BF);if(BF.existing){BG.push(this.getRemoveTRLineAction(BE));}},collectABLForecastActions:function(BE,BF,BJ){var BH={},BG=BE[Ad.TREND_SEASONALITY];BH[Ad.TREND_SEASONALITY]=BG;BH[Ad.TREND_FORECAST_ENABLED]=BE[Ad.TREND_FORECAST_ENABLED];BH[Ad.TREND_BWD_FORECAST]=BE[Ad.TREND_BWD_FORECAST];BH[Ad.TREND_FWD_FORECAST]=BE[Ad.TREND_FWD_FORECAST];var BI=this.getTrendRefInfo(BH);BI.metricId=BF;BJ.push(this.getUpdateForecastInfoAction(BI));},getEnableTrendLineActions:function(BF,BG,BE){BG=BG||[];this.collectTrendLineAction(BF,BG,BE);return BG;},getEnableRefLineActions:function(BF,BG,BE){BG=BG||[];this.collectRefLineAction(BF,BG,BE);return BG;},onFormatableTargetChanged:function(BI){var BM,BN,BF,BE=this.interactor.fmtState,BL,BJ,BO,BH;if(this.syning){return ;}if(BI&&BI.optLvl===W.COLOR_BY){BE=this.interactor.fmtState=A0.PER_COLORBY;}if(BE===A0.PER_COLORBY){BM=this.interactor.getColorByIdentities();}else{BM=this.interactor.getBreakByIdentities();}if(!BI){var BG=this.GMController.model.colorType;if(BE!==A0.PER_SHAPE&&(BG===AJ.NULL||BG===AJ.METRICS)){BF=W.ALL_SHAPE;U.visPrint("Changed to ALL");}else{BF=(BE===A0.PER_COLORBY?W.COLOR_BY:W.ITSELF);BO=this.collectUniqueCombination(BM,BF);U.visPrint("Changed to Color By by Mouse Action");}this.curSelOptLvl=BF;}else{BF=BI.optLvl;this.curSelOptLvl=BF;if(BI.key==="none"){this.clearSelections(true);}else{if(BF===W.ALL_SHAPE){U.visPrint("Changed to ALL");}else{if(BF===W.ITSELF){U.visPrint("Changed to Selected Elements");BO=this.collectUniqueCombination(BM,BF);}else{if(BF===W.COLOR_BY){BN={};BL=BI.comb;BO=[BL];b.forEach(BL,function(BP){if(!BN[BP.tid]){BN[BP.tid]=[{id:BP.eid}];}else{BN[BP.tid].push({id:BP.eid});}});U.visPrint("Changed to Color By Option "+BI.opt);}else{if(BF===W.METRIC){BJ=BI.comb;BN={};b.forEach(BJ,function(BP){if(!BN[BP.tid]){BN[BP.tid]=[{id:BP.eid}];}else{BN[BP.tid].push({id:BP.eid});}});U.visPrint("Changed to Metric By Option "+BI.opt);}}}}}}BH={objType:Ak.SHAPE_COLLECTION,identityArr:BM};var BK;if(BJ){BK=[BJ];}else{if(BO){BK=BO;}else{BK=undefined;}}this.syning=true;this.raiseEventFormatableChanged(BH,BF,BK);this.syning=false;},submitUpdatesAndPersistXML:function Ah(BI,BQ,BG,BE,BP,BK){BI=BI||[];if(this.isXMLDirty()){BI.push(this.getPersistAction());}if(BI.length===0){return ;}var BL=this,BJ,BH,BF={},BO=BL.getDocModel(),BN=BO.getDataService();if(BK){BH=this.model.getDataService().newRetrievalKeysConfig();BH.addNode(this.k,BK);BI[0].partialRetrieval=BH;}if(BE){h.copy(mstrmojo.DocDataService.SUPPRESS_DATA,BF);}if(BP){h.copy(mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION,BF);}if(BE&&BG){BJ={silent:true,undo:BG.undo,redo:BG.redo};}else{BJ={callback:this.getUnSilentUndoRedoCallback(BI,BO)};}Ap(BL).execute({execute:function BM(){var BR=BN.newUpdate(this,undefined);BR.add(BI,BQ,BF);if(!BE){this.submitUpdate(BR);}else{this.submitSilent(BR.actions);}BL.resetXMLDirtyFlag();},urInfo:BJ});},getModelController:function(){return this.model.controller||this.getDocModel().controller;},getXTabRefreshCallBack:function(){return this.getModelController()._getXtabCallback(this);},getDocModelSliceCallback:function(){return this.getDocModel().getSliceCallback({tks:this.k});},getUnSilentUndoRedoCallback:function(BH,BF){var BG=this.getXTabRefreshCallBack(),BE=false;b.forEach(BH,function(BI){if(BI.act==="updateElementsPropertiesMap"){BE=true;return false;}});if(BE){A9(BF.getUpdateColorMapCallback(),BG);}return BG;},outputLog4PartialRender:function Ae(){if(S&&window.console){if(this.GMController.enablePartialRendering){U.visPrint("# Partial Rendering: ON");}else{U.visPrint("# Partial Rendering: OFF");}}},hEvalSizeIteratively:function A7(){this.hEvalSize4Headers();Aw.call(this);this.hEvalSize4GMArea();if(!this.getWidgetPropertyValue(AG.COLUMN_HEADER_SHOW)){return ;}var BI,BM,BJ,BF=this.layouter,BK=this.GMController,BH=false,BN=BK.getColTitleInfo(true),BL=this.hGetColTitleWidth(),BE=this.colHeaderHArr.length,BO=this.HTML5PROPS,BG=BK.getAttributesOnDropZone("Rows").length>0?2:3;for(BI=0;BI<BE;BI++){BM=BN.items[BI].n;BJ=BF.batchEvalTextHeight([BM],[BL],BO.CH_TITLE,Av+AO,BG)[0];if(BJ>this.colHeaderHArr[BI]){this.colHeaderHArr[BI]=BJ;BH=true;}}if(BH){Aw.call(this);this.hEvalSize4GMArea();}},isEmpty:function X(){return this.noData||!this.GMController||this.GMController.isEmptyVis();},getVisEmptyMsgControls:function A(){var BE;if(this.noData){if(this.model.data.egt===2){BE=U.getVisEmptyMsg("AE_ERROR");}else{BE=U.getVisEmptyMsg("NODATA_OTHERERROR");}}else{BE=U.getVisEmptyMsg();}return[{scriptClass:"mstrmojo.Container",markupString:BE,markupSlots:{containerNode:function(){return this.domNode;}}}];},renderErrorMessage:function An(BF){var BG=this.domMessage,BE=document.createElement("div");BG.style.cssText+="position:relative;";BE.className="mstrmojo-message gm-error-msg";BE.innerText=BF;BG.appendChild(BE);},displayOtherNotificationMessage:function(){var BF=this.GMController,BE=BF.msgCenter;if(BE){h.forEach(BE,function(BG,BH){mstrmojo.notify(BH,null);});delete BF.msgCenter;}},displayTrendLineErrorMessages:function(){var BF,BI=this.GMController,BG=BI.trendLineErrors;if(BG){for(BF in BG){if(BG.hasOwnProperty(BF)){t.notify(BG[BF]);}}}delete BI.trendLineErrors;var BE=this.trendLineNotifications,BH=this.referenceLineNotifications;b.forEach([BE,BH],function(BJ){b.forEach(BJ,function(BK){t.notify(BK);});});this.trendLineNotifications=[];this.referenceLineNotifications=[];if(BI.trendlineDefined&&BI.mulAttsOnAxisForABL){t.notify(mstrmojo.desc(12281,"Trend lines are disabled due to multiple attributes on independent axis."));}if(this.trendSeasonalityError){t.notify(mstrmojo.desc(14105,"The seasonality feature is unavailable with logarithmic and power trend line models."));delete this.trendSeasonalityError;}},setModel:function L(BE){this._super(BE);this.listenToUpdateColorMap(this.updateColorMapCallback);},postBuildRendering:function(){if(this.waitingForData){return ;}if(!this.checkTemplateAndDropzone()){mstrmojo.err({name:"Currently we do not support metric selector targeting to Widget",message:"Attribute/Metric in Dropzone doesn't match Grid Template"});return ;}if(U.isOnExpressMode()){var BG=this.model.docModel.thm.did,BE=(BG==="F1FED8AC42B57AC1B0E9518FED0F89D6"?"mojo-theme-dark":"mojo-theme-light"),BF=document.getElementsByClassName("mstrmojo-OIVMPage ");if(BF.length===1){BF[0].setAttribute("class","mstrmojo-OIVMPage "+BE);}}this.postBuilderingCalled=true;var BI=this.HTML5PROPS;if(U.isOnExpressMode()){if(this.isEmpty()||this.INVALID_TEMP){this.renderErrorMessage(this.errorMsg||mstrmojo.desc(12093,"Filter excludes all data"));this._super();return ;}}else{if(this.isEmpty()){this._super();return ;}}if(!this.hValidateInput()||this.INVALID_TEMP){return ;}this.applyHTML5Props(BI);this.setTheme(this.theme);this.hResetLocalVars();if(!this.noData){BC.startTimer({functionName:"VisGraphMatrix.postBuildRendering",purpose:"Layout of GraphMatrix ("+this.k+")"});this.adjustRHAndCHOpacity();this.hInitHelpers();this.hPrepareDataAndCE();this.hEvalSize4Legend();this.hEvalSizeIteratively();this.hCalcRadiusAndMargin(true);this.hDecideDataLabelRotation();this.initGMScroll();this.hLayoutControls();this.hFillContents();this.hInitLegend();this.hInitWidgetMatrixes();this.updateRowValueBackground();this.updateColumnValueBackground();this.hUpdateLegend();this.hPlaceRHResizers(BI.MATRIX_LINE_V);this.hPlaceCHResizers(BI.MATRIX_LINE_H);this.hPlaceYResizers(BI.AXIS_LINE_Y);this.hPlaceXResizers(BI.AXIS_LINE_X);this.hPlaceOutBorders();this.outputLog4PartialRender();BC.endTimer();BC.startTimer({functionName:"WidgetMatrixManager.drawCharts",purpose:"Rendering of GraphMatrix ("+this.k+")"});this.manager.drawCharts();BC.endTimer();this.hPlaceRowResizers(BI.MATRIX_LINE_H);this.hPlaceColResizers(BI.MATRIX_LINE_V);this.hPlaceHGridLines(BI.GRID_LINE_MAJOR,BI.GRID_LINE_MINOR);this.hPlaceVGridLines(BI.GRID_LINE_MAJOR,BI.GRID_LINE_MINOR);this.hPlaceYSplitters(BI.MATRIX_LINE_V);this.hInitListeners();var BH=this;setTimeout(function(){BH.updateScrollBars();},0);}this.displayTrendLineErrorMessages();this.displayOtherNotificationMessage();this.initFlagForContextMenu=false;this.attachEventListener("highLightObjectChange",this.interactor.id,this.interactor.onHighLightObjectChange);var BJ=this.getExp(),BK=this.getRowsAndCols();U.modifyScExp(BJ,BK,this.model,this.normalizedIdCache);if(this._super){this._super();}Aa.call(this);},updateScrollBars:function(){this.vSBar.updateScrollbars();this.hSBar.updateScrollbars();if(this.masterViewer){this.scrollNode=this.masterViewer.domContainer.firstChild;}},updateChartsPosition:function(BI,BG){var BH=this.scrollNode;if(!BH){return ;}var BM=BH.xPos||0,BL=BH.yPos||0,BK=BG,BJ=BG,BF=BH.offsetWidth-BH.parentNode.offsetWidth,BE=BH.offsetHeight-BH.parentNode.offsetHeight;BJ=(BJ<0)?0:BJ;BJ=(BJ>BE)?BE:BJ;BK=(BK<0)?0:BK;BK=(BK>BF)?BF:BK;if(BI==="v"){if(BL===BJ){return ;}BL=BH.yPos=BJ;}else{if(BM===BK){return ;}BM=BH.xPos=BK;}BH.style[AY.CSS3_TRANSFORM]=AY.createTranslateString(-BM,-BL,0);this.onscroll();},onBrushing:function s(BF){if(BF.keys.indexOf(this.k)!==-1){var BH=this.manager,BE=BF.from.getSelectionHash(),BI=[],BJ,BL=-1,BG=-1,BK=this.GMController;h.forEach(BE,function(BN){var BM=this.GMController.checkAttributeIntersection(BN,["Rows","Columns"]);b.forEach(BM,function(BO){var BP={};BP[BO]=BN[BO];BI.push(BP);});},this);BJ=BH.filterCharts(BI);b.forEach(BJ,function(BM){if(BM.byRow){BL=BL<0?BM.start:Math.min(BL,BM.start);}else{BG=BG<0?BM.start:Math.min(BG,BM.start);}});if(BL>=0){this.updateChartsPosition("v",BH.master.getRowPosition(BL));}if(BG>=0){this.updateChartsPosition("h",BH.master.getColPosition(BG));}BK.resetHighLightIndex=true;}if(this._super){this._super(BF);}},onscroll:function Au(){var BE,BJ,BG=this,BF=this.manager,BI=this.HTML5PROPS,BH=this.scrollNode;if(!BH){return ;}if(!this._timeout){this._timeout=window.setTimeout(function(){BE=BH.xPos;BJ=BH.yPos;BG.vSBar.updateScrollPosition(BJ);BG.hSBar.updateScrollPosition(BE);BC.startTimer({functionName:"VisGraphMatrix.onscroll.annonymous",purpose:"Rendering of GraphMatrix (after scrolling) ("+this.k+")"});BG.outputLog4PartialRender();BF.drawCharts();BG.updateSelections();BC.endTimer();delete BG._timeout;},j);}BE=BH.xPos;BJ=BH.yPos;BF.scrollTo(BE,BJ);BG.hPlaceRowResizers(BI.MATRIX_LINE_H);BG.hPlaceColResizers(BI.MATRIX_LINE_V);BG.hPlaceHGridLines(BI.GRID_LINE_MAJOR,BI.GRID_LINE_MINOR);BG.hPlaceVGridLines(BI.GRID_LINE_MAJOR,BI.GRID_LINE_MINOR);BG.interactor.updateSelectedBroders();},onmouseover:function(BO){if(!this.hasRendered||this.INVALID_TEMP||this.noData){return ;}var BI=this.getRealTarget(BO),BF=this.interactor,BE=this.GMController.getChartInfo(),BJ=BO.e,BK=this,BM=this.vSBar,BP=this.hSBar,BG=this.domNode;b.forEach([BK.domGM,BK.domRowHeader,BK.domYAxis,BK.domYAxis2],function(BQ){if(AY.contains(BQ,BI,true,BG)){BM.toggleHoverState(true);return false;}});b.forEach([BK.domGM,BK.domColHeader,BK.domXAxis],function(BQ){if(AY.contains(BQ,BI,true,BG)){BP.toggleHoverState(true);return false;}});var BL=BF.domMenuPH.getElementsByClassName("mstrmojo-ui-Menu"),BN=BF.domToolbarPH.firstChild;if(BF.fmtMode&&AE(BJ,BL,BN)){return ;}var BH=U.getMouseOffset(BJ);BF.handleMouseOver(BI,BE,BH.x,BH.y);},onmouseout:function(BF){if(!this.hasRendered||this.INVALID_TEMP||this.noData){return ;}var BG=this.domNode,BE=BF.e.toElement||BF.e.relatedTarget,BH=this;b.forEach([BH.domGM,BH.domRowHeader,BH.domYAxis,BH.domYAxis2],function(BI){if(!AY.contains(BI,BE,true,BG)){BH.vSBar.toggleHoverState(false);return false;}});b.forEach([BH.domGM,BH.domColHeader,BH.domXAxis],function(BI){if(!AY.contains(BI,BE,true,BG)){BH.hSBar.toggleHoverState(false);return false;}});if(!AY.contains(BG,BE,true)){this.interactor.hideTooltip();this.interactor.clearHoveredTarget();this.interactor.clearHoveredSetShape();this.interactor.clearHoveredShape();this.interactor.clearSHTargets();}},oncontextmenu:function Am(BN){delete this.noHighlightAfterKeepOnlyExcludeDrill;delete this.noReorderAfterShowData;if(!this.hasRendered||U.isOnExpressMode()){return ;}this.raiseEventOnNonFormattingIdentity([]);var BO=this.getDocModel(),BF=BO&&BO.getSelectedViUnit(),BL=(BF instanceof mstrmojo.vi.ui.rw.VizBox)&&BF.titleBar;if(BL&&BL.onclick){BL.onclick();}var BG=BN.e,BH=this.getRealTarget(BN),BJ={x:BG.pageX+2,y:BG.pageY+2},BK=this.GMController.disabledUnits,BE=this.interactor,BM=this.legend,BI=BH.identity||(BH.parentNode&&BH.parentNode.identity);this.mousePos={x:BG.pageX+2,y:BG.pageY+2};this.closePopup();if(BM&&AY.contains(BM.domNode,BH,true)){BE.handleRMCOnLegend(BH,h.clone(BJ));if(BI&&BI.objType!==Ak.GRAPH_SHAPE){this.raiseEventOnFormattingIdentity([BI]);}}else{BE.handleRMClick(BH,BK,h.clone(BJ),BG);}this.preClickType=R.RIGHT_CLICK;g.call(this,BJ,this.interactor.domToolbarPH,this.interactor.domMenuPH);if(BG!==null){AY.stopPropogation(BG.hWin,BG);AY.preventDefault(BG.hWin,BG);}},getRealTarget:function(BE){return BE.getTarget();},clearUserSelections:function(){if(this.isClearAllDisabled()){return false;}this.interactor.clearSelectRules();this.clearSelections(true);this.endSelections();return true;},resetSelectionEmptyFlag:function(){this.selectionEmptyFlag=h.isEmpty(this.getSelectionHash());},endSelections:function(){if(h.isEmpty(this.getSelectionHash())){if(!this.selectionEmptyFlag){this.selectionEmptyFlag=true;this._super();}}else{this.selectionEmptyFlag=false;this._super();}},closePopup:function(){var BE=this.interactor;if(BE){BE.hideToolbar();BE.hideContextMenu();}if(this._super){this._super();}this._lastOpened=null;},onmousedown:function(BE){this.shouldNotTriggerClick=false;var BG=this.vSBar.domNode,BF=this.hSBar.domNode,BH=BE.getTarget();if(AY.contains(BF,BH)||AY.contains(BG,BH)){this.shouldNotTriggerClick=true;}},onclick:function(BQ){delete this.noHighlightAfterKeepOnlyExcludeDrill;delete this.noReorderAfterShowData;if(this.shouldNotTriggerClick){this.shouldNotTriggerClick=false;return ;}if(this.noData||this.INVALID_TEMP){return ;}this.raiseEventOnNonFormattingIdentity([]);var BO=this,BF=this.interactor,BJ=this.getRealTarget(BQ),BH=BQ.hWin,BK=BQ.e,BE=BK.ctrlKey||BK.metaKey,BP=this._timeoutClick;this.mousePos={x:BK.pageX+2,y:BK.pageY+2};this.closePopup();if(this.enableDomDommy&&(BJ===this.domDummyA||BJ===this.domDummyB)){var BM=this.GMController.getDebugMenu();this.showContextMenu(BQ,BM);return ;}this.hideContextMenu();if(this.formattingMode){if(BP){AY.stopPropogation(BH,BK);window.clearTimeout(BP);delete this._timeoutClick;BF.handleDblClick(BJ,BE,BK);this.preClickType=R.DOUBLE_CLICK;}else{this._timeoutClick=window.setTimeout(function(){BF.handleClick(BJ,BE,BK);delete BO._timeoutClick;BO.preClickType=R.LEFT_CLICK;},C);}}else{if(BP){window.clearTimeout(BP);delete this._timeoutClick;}var BN=BJ.getAttribute("type");if(BN===G.LASSO_SELECTOR){var BR=this.manager.master.lassoSelector;var BI=AI(BR,BK);BF.handleClick(BI,BE,BK,BR);}else{if(BN===G.LINE_CONTAINER){var BL=AI(BJ,BK);var BG=BL&&BL.getAttribute("type");if(BG===G.GM_SHAPE||BG===G.GM_MARKER){BF.handleClick(BL,BE,BK);}else{BF.handleClick(BJ,BE,BK);}}else{BF.handleClick(BJ,BE,BK);}}this.preClickType=R.LEFT_CLICK;}},onmousemove:function(BQ){if(!this.hasRendered||this.INVALID_TEMP||this.noData){return ;}var BJ,BG,BH=BQ.e,BI=this.getRealTarget(BQ),BL=BI.getAttribute("type"),BE=this.GMController.getChartInfo(),BF=this.interactor,BP;var BM=BF.domMenuPH.getElementsByClassName("mstrmojo-ui-Menu"),BN=BF.domToolbarPH.firstChild;if(BF.fmtMode&&AE(BH,BM,BN)){BF.hideTooltip();return ;}var BO=this.enableTooltip;if(!BO){return ;}if(BL===G.GM_SVG_CHART){BF.hideTooltip();BP=this.domGM.childNodes[0];BP.style.zIndex="-2";BJ=document.elementFromPoint(BH.pageX,BH.pageY);BP.style.zIndex="auto";BG=BJ.getAttribute("type");if(BF.fmtMode&&(BG===G.LINE_CONTAINER||BG===G.GM_H_GRID_LINE||BG===G.GM_V_GRID_LINE||BG===G.GM_H_MINOR_GRID_LINE||BG===G.GM_V_MINOR_GRID_LINE)){BF.handleMouseOver(BJ);}else{BF.handleMouseOver(BI,BE,U.getMouseOffset(BH).x,U.getMouseOffset(BH).y);}}else{if(BL===G.LASSO_SELECTOR){var BR=this.manager.master.lassoSelector;BJ=AI(BR,BH);BG=BJ.getAttribute("type");if(BG===G.GM_SHAPE||BG===G.GM_MARKER){BF.handleMouseOver(BJ,BE,U.getMouseOffset(BH).x,U.getMouseOffset(BH).y);BF.showTooltip(BJ,{x:BH.pageX,y:BH.pageY});}else{BF.handleMouseOver(BJ,BE,U.getMouseOffset(BH).x,U.getMouseOffset(BH).y);BF.hideTooltip();}}else{if(BL===G.GM_SHAPE||BL===G.GM_MARKER||BL===G.GM_TREND_LINE||BL===G.GM_REF_LINE){BF.handleMouseOver(BI,BE,U.getMouseOffset(BH).x,U.getMouseOffset(BH).y);BF.showTooltip(BI,{x:BH.pageX,y:BH.pageY});}else{if(BL===G.GM_SET_SHAPE){if(BE.tp===V.AREA&&BE.shape===d.AREA){BF.handleMouseOver(BI,BE,U.getMouseOffset(BH).x,U.getMouseOffset(BH).y);}else{BF.hideTooltip();}}else{if(BL===G.LINE_CONTAINER){var BK=AI(BI,BH);BG=BK.getAttribute("type");if(BG===G.GM_SHAPE||BG===G.GM_MARKER){BF.handleMouseOver(BK,BE,U.getMouseOffset(BH).x,U.getMouseOffset(BH).y);BF.showTooltip(BK,{x:BH.pageX,y:BH.pageY});}else{BF.hideTooltip();}}else{BF.hideTooltip();}}}}}},destroy:function(){var BE=this.interactor;if(BE){this.closePopup();}Aj.call(this);this.hResetLocalVars();this._super();if(this.GMController===mstrmojo.gm.GMLayout.API.owner){mstrmojo.gm.GMLayout.API={};}delete this.GMController;},unrender:function(){var BF=this.interactor,BG=this,BE=this.lines;if(BF){BF.hideTooltip();}Aj.call(this);var BH=function(BI){BI=typeof BI==="string"?BG[BI]:BI;if(BI){BI.unrender();BG.removeChildren(BI,true);}};["Row","Col"].forEach(function(BJ){var BI="slave"+BJ+"Headers",BK=BG[BI];BK.forEach(BH);BG[BI]=[];});["slaveXAxis","slaveYAxis","slaveXAxis2","slaveYAxis2","masterViewer","legend"].forEach(function(BI){BH(BI);delete BG[BI];});b.forEach(Object.keys(BE),function(BJ){var BI=BE[BJ];if(b.isArray(BI)){BI.forEach(BH);BE[BJ]=[];}else{b.forEach(Object.keys(BI),function(BL){var BK=BI[BL];BH(BK);delete BI[BL];});}});BC.handleDestroy(this,N);BC.handleDestroy(this.GMController,["mstrmojo.gm.GMDataModel"]);if(this.GMController){delete this.GMController.manager;}this._super();},hResetLocalVars:function(){this.sBarWidth=11;BC.destroyDisposable(this,this.manager);this.manager=undefined;BC.destroyDisposable(this,this.masterViewer);this.masterViewer=undefined;this.slaveRowHeaders=[];this.slaveColHeaders=[];this.slaveYAxis=undefined;this.slaveXAxis=undefined;this.slaveYAxis2=undefined;this.slaveXAxis2=undefined;this.yAxisFixed=false;this.yAxis2Fixed=false;this.xAxisFixed=false;this.xAxis2Fixed=false;this.lines={axes:{},borders:{},vlines:{},hlines:{},rows:[],cols:[],hMajorGridLines:[],hMinorGridLines:[],vMajorGridLines:[],vMinorGridLines:[],axisSplitters:{}};this.textHeightInX=AV;this.textHeightInY=Af;},hValidateInput:function(){var BF=parseInt(this.width,10),BE=parseInt(this.height,10);if(isNaN(BF)||isNaN(BE)){return false;}return true;},hInitHelpers:function(){var BF,BE;BF=this.addDisposable(new mstrmojo.WidgetMatrixManager({GMController:this.GMController,widthScale:this.getWidgetPropertyValue(Ad.SCALE_CHART_WIDTH),heightScale:this.getWidgetPropertyValue(Ad.SCALE_CHART_HEIGHT)}));BE=this.interactor;BE.domWidget=this.domNode;BE.clearAll();this.manager=this.GMController.manager=BF;this.interactor=BE;},hPrepareDataAndCE:function(){var BE=this.GMController,BF=BE.hasColorBy(),BG=BE.hasSizeBy();this.needLegend=BF||BG;this.colorByData=BF?BE.getColorByLegendInfo():null;this.sizeByData=BG?BE.getSizeByLegendInfo():null;this.needLegend=!!this.colorByData||!!this.sizeByData;BE.setupAxisCondense();BE.setupAxisLayout();},hDecideDataLabelRotation:function(){var BE=this.GMController;BE.decideDataLabelRotation();},hCalcRadiusAndMargin:function(BF){var BE=this.GMController;BE.calculateRadius();if(BF){BE.initYAxisMargins();BE.initXAxisMargins();}},hInitLegend:function(){if(!this.needLegend){return ;}var BG=this.isShapeCombonation(),BE;if(BG.shapeType===undefined){BE=this.getChartInfo().shape;}else{BE=BG.shapeType;}if(BE===d.LINE&&this.GMController.isOneDotCase()){BE=d.CIRCLE;}BC.destroyDisposable(this,this.legend);var BH=this.HTML5PROPS,BF=new A8.GMLegend({widget:this,shapeType:BE,placeholder:this.domLegend,currDockedPositionIdx:this.getLegendDockPosIdx(this.getWidgetPropertyValue(Ad.LEGEND_POSITION)),cutBy:this.legendCutBy,styles:BH.LEGEND,model:this.model});BF.render();BF.parent=this;this.legend=this.addDisposable(BF);this.domLegend=BF.domNode;},hUpdateLegend:function(){var BE=this.legend;if(BE){BE.cutBy=this.legendCutBy;BE.minHeight=this.legendMinHeight;BE.updateContainerSize(this.getWidth(),this.actualHeight);BE.feedData([{dataType:Ax.COLOR_BY,dataObj:this.colorByData},{dataType:Ax.SIZE_BY,dataObj:this.sizeByData}],this.getWidgetPropertyValue(Ad.LEGEND_MODE)===J.MINIMIZED);}},hInitListeners:function(){var BL=this,BF=this.id,BO=this.legend,BH=this.manager,BN=this.GMController,BP=this.lines,BM=BP.axes,BG=BP.hlines,BK=BP.vlines,BI=BP.borders&&BP.borders.bottom,BJ=BP.borders&&BP.borders.right;this.chartResizeListener=BH.attachEventListener("MiniChartResized",BF,function(BQ){var BR=BQ.chartWidthScale,BS=BQ.chartHeightScale;if(BR){BN.initXAxisMargins();this.writeGlobalProperty(Ad.SCALE_CHART_WIDTH,BR);}if(BS){BN.initYAxisMargins();this.writeGlobalProperty(Ad.SCALE_CHART_HEIGHT,BS);}});this.updateSelectionsListener=BH.attachEventListener("UpdateSelections",BF,function(){BL.updateSelections();});h.keyarray(BM).forEach(function(BQ){BL.splitterListeners.push(BM[BQ].attachEventListener("splitterMoved",BF,function(BR){BL.onSplitterMoved(BR.position,BR.info);}));});h.keyarray(BK).forEach(function(BQ){BL.splitterListeners.push(BK[BQ].attachEventListener("splitterMoved",BF,function(BR){BL.onSplitterMoved(BR.position,BR.info);}));});h.keyarray(BG).forEach(function(BQ){BL.splitterListeners.push(BG[BQ].attachEventListener("splitterMoved",BF,function(BR){BL.onSplitterMoved(BR.position,BR.info);}));});if(BI){this.splitterListeners.push(BI.attachEventListener("splitterMoved",BF,function(BQ){BL.onSplitterMoved(BQ.position,BQ.info);}));}if(BJ){this.splitterListeners.push(BJ.attachEventListener("splitterMoved",BF,function(BQ){BL.onSplitterMoved(BQ.position,BQ.info);}));}if(BO){this.legendResizeListener=BO.attachEventListener("gm-legend-resized",BF,function(BQ){BL.onLegendResized(BQ.position);});this.legendClickListener=BO.attachEventListener("gm-legend-clicked",BF,function(BQ){BL.onLegendClicked(BQ);});}var BE=[{node:BL.domRowHeader,dirc:"v"},{node:BL.domColHeader,dirc:"h"},{node:BL.domGM,dirc:"both"},{node:BL.domYAxis,dirc:"v"},{node:BL.domYAxis2,dirc:"v"},{node:BL.domXAxis,dirc:"h"}];b.forEach(BE,function(BQ){if(BQ.node){U.addWheelListener(BQ.node,AT.bind(BL,BQ.dirc));}});if(BL.domMainContainer){U.addWheelListener(BL.domMainContainer,AS.bind(BL));}},hLayoutLegend:function(BG){var BF=this.legendIsRight(BG),BE=this.domMainContainer;if(BF){BE.style.left="0px";}else{BE.style.left=this.legendW+this.legendP+O+"px";}},hEvalSize4Headers:function(){var BE=this.GMController,BR=this.HTML5PROPS,BM=BE.getRowHeadersToCalcWidth(),BS=BE.getColHeadersToCalcWidth(),BG=BE.getRowTitleInfo(),BH=BE.getColTitleInfo(),BQ=BE.getYAxisInfo(undefined,undefined,BE.haveY1),BK=this.layouter,BV=this.getWidgetPropertyValue(AG.ROW_HEADER_SHOW),BO=this.getWidgetPropertyValue(AG.ROW_VALUES_SHOW),BT=this.getWidgetPropertyValue(AG.COLUMN_HEADER_SHOW),BL=this.getWidgetPropertyValue(AG.COLUMN_VALUES_SHOW),BN=this.getWidgetPropertyValue(AG.Y_AXIS_TITLE_SHOW),BJ=function(BX,BY){var BW,BZ=BX.length;for(BW=0;BW<BZ;BW++){BX[BW]*=(BY[BW]||1);}},BU=function(BX,BY){var BW;BX.length=BY;for(BW=0;BW<BY;BW++){BX[BW]=0;}},BF=function(){var BX=BM.length>0,Be=BV,Bc=BQ.items.length>0&&!BQ.isMetric,BZ=BN,BY=BE.hasFooterInX&&BE.isFooterAbove,Bd=BL;var Bb=BX&&Be,BW=Bc&&BZ,Ba=BY&&Bd;return{hasAndShowRT:Bb,hasAndShowYAAT:BW,hasAndShowFA:Ba};};this.rowHeaderWArr=BK.getRowHeadersWidth(BM,BR.RH);this.colHeaderHArr=BK.getColHeadersHeight(BS,BR.CH);this.rowHeaderExtraW=BK.getRowHeaderP1Width(BM.length,BS.length,BH,this.colHeaderHArr,BR.CH_TITLE,BT,BE);if(BE.isGridPie&&BM.length===0&&BQ.items.length===0&&BE.isMetricNamesOnColumns){BQ.items.push("Metric Names");}var BI=BE.getAttributesOnDropZone("Columns").length>0?2:3;this.rowHeaderMaxHeightWithoutX2=BK.getColHeaderP1Height(BG,this.rowHeaderWArr,BQ,BR,BF(),BI);this.colHeaderExtraH=this.rowHeaderMaxHeightWithoutX2;if(this.rowHeaderExtraW===0){this.removeWidgetProperty(Ad.SCALE_V_EXTRA_LINE);}else{var BP=this.getWidgetPropertyValue(Ad.SCALE_V_EXTRA_LINE);this.rowHeaderExtraW*=BP;}BJ(this.rowHeaderWArr,this.getWidgetPropertyValue(Ad.SCALE_ROW_HEADERS));BJ(this.colHeaderHArr,this.getWidgetPropertyValue(Ad.SCALE_COL_HEADERS));if(!BV&&!BO){BU(this.rowHeaderWArr,BM.length);}if(!BT&&!BL){BU(this.colHeaderHArr,BS.length);}},hEvalSize4Legend:function(){var BI,BG=this.colorByData,BF=this.sizeByData,BH=this.getWidth(),BE=this.getHeight(),BJ=this.HTML5PROPS.LEGEND,BK;if(!this.needLegend||this.getWidgetPropertyValue(Ad.LEGEND_VISIBLE)===false){this.legendW=this.legendH=this.legendP=0;}else{c.applyHTML5Props(BJ);this.legendP=y;BK=this.getWidgetPropertyValue(Ad.SCALE_LEGEND_WIDTH);if(BK==="undefined"||this.legendScale!==BK){this.legendScale=BK;this.legendResized=true;this.legendFixedW=undefined;delete this.legendFixedW;}BI=c.getLegendSize([{dataType:Ax.COLOR_BY,dataObj:BG},{dataType:Ax.SIZE_BY,dataObj:BF}],this.legendResized?this.legendScale:undefined,BH,BE,BJ,this.legendFixedW);this.legendCutBy=BI.cutBy;this.legendMinHeight=BI.minHeight;this.legendFixedW=BI.width;if(BI.scale){this.legendScale=BI.scale;}if(this.getWidgetPropertyValue(Ad.LEGEND_MODE)===J.MINIMIZED||BI.autoCollapse){BI=c.getLegendSize4MinMode(BG,BE);this.legendCutBy=undefined;}this.legendW=BI.width;this.legendH=BI.height;}},legendIsRight:function(BE){BE=BE||this.getWidgetPropertyValue(Ad.LEGEND_POSITION);return BE===AK.RIGHT_MIDDLE||BE===AK.RIGHT_TOP||BE===AK.RIGHT_BOTTOM;},hEvalSize4GMArea:function(){var BS,BF=this.GMController,BT=BF.isXDualAxis,BJ=BF.isYDualAxis,BL=this.manager,BN=this.layouter,BP=this.GMInfo,BR=this.xAxisFixed?BP.xAxisHeight:undefined,BV=this.yAxisFixed?BP.yAxisWidth:undefined,BH=this.yAxis2Fixed?BP.yAxis2Width:undefined,BI=this.xAxis2Fixed?BP.xAxis2Height:undefined,BQ=this.getWidth(),BM=this.getHeight(),BG=this.rowHeaderWArr,BU=this.colHeaderHArr,BE=this.legendIsRight(),BK=this.getWidgetPropertyValue(Ad.SCALE_ALL),BO=this.getWidgetPropertyValue(AG.Y_AXIS_TITLE_SHOW);if(this.legendW>0){BQ-=this.legendW+this.legendP+O;}this.actualWidth=BQ;this.actualHeight=BM;this.rowHeaderW=AR.sum(BG,O);this.colHeaderH=AR.sum(BU,A5);BS=AR.add(0,this.rowHeaderW,O);BS=AR.add(BS,this.rowHeaderExtraW,O);BQ-=BS;BM-=AR.add(0,this.colHeaderH,A5);BF.initLayouter(BN);BP=BN.calculateLayout(BS,BQ,BM,BR,BI,BV,BH,BK,{h:0,v:0,ha:AF,va:D,ob:0,dx:BT,dy:BJ,rb:(BE&&this.legendW>0),styles:this.HTML5PROPS.RH_TITLE,syat:BO,rhMaxH:this.rowHeaderMaxHeight});if(BP.widthCacheChanged){BL.feedChartWidthInfo(BF.widthCache);BL.updateHSlaves();BF.initXAxisMargins();}if(BP.heightCacheChanged){BL.feedChartHeightInfo(BF.heightCache);BL.updateVSlaves();BF.initYAxisMargins();}this.colHeaderExtraH=BP.xAxis2Height;BM-=AR.add(0,this.colHeaderExtraH,BF.haveX2?AF:A5);BM-=AR.add(0,BP.xAxisHeight,AF);BQ-=AR.add(0,BP.yAxisWidth,D);BQ-=AR.add(0,BP.yAxis2Width,D);this.GMW=(BP.pageWidth)||BQ;this.GMH=(BP.pageHeight)||BM;this.actualWidth-=BQ-this.GMW;this.actualHeight-=BM-this.GMH;this.GMInfo=BP;this.autoSetPRFlag();},autoSetPRFlag:function(){var BF=this.GMController;if(BF.isBubbleOrScatter()){BF.enablePartialRendering=true;return ;}var BH=1.2;var BG=BF.getChartCountInCol()*BF.getChartCountInRow();if(BG<=1){var BE=(this.GMInfo.avgChartWidth/this.GMW>=BH)||(this.GMInfo.avgChartHeight/this.GMH>=BH);if(BE){BF.enablePartialRendering=BF.getGraphShapeCount()>10000;}}else{BH=2;if((this.GMInfo.avgChartWidth/this.GMW>=BH)||(this.GMInfo.avgChartHeight/this.GMH>=BH)){BF.enablePartialRendering=true;}}},initGMScroll:function(){var BE,BF;BC.destroyDisposable(this,this.vSBar);BE=new A8.GMScroll({view:this,placeholder:this.domVSBar,cssClass:"gm-vsbar",bodyClass:"gm-vsbar-body",direction:"v"});BE.render();BE.addScrollListener();this.vSBar=this.addDisposable(BE);BC.destroyDisposable(this,this.hSBar);BF=new A8.GMScroll({view:this,placeholder:this.domHSBar,cssClass:"gm-hsbar",bodyClass:"gm-hsbar-body",direction:"h"});BF.render();BF.addScrollListener();this.hSBar=this.addDisposable(BF);},hLayoutControls:function(){var BP=this.GMController,BJ=this.GMInfo,BS=BJ.yAxisWidth,BQ=BJ.yAxis2Width,BE=BJ.xAxisHeight,BM=this.rowHeaderW,BL=AR.sum([BM,this.rowHeaderExtraW],O),BK=AR.sum([BL,BS],O),BO=this.colHeaderH,BH=AR.sum([BO,this.colHeaderExtraH],A5),BI=BK+(BP.haveY1?D:O),BG=BH+(BP.haveX2?AF:A5),BN=BI+this.GMW+(BP.haveY2?D:0),BF=BG+this.GMH+(BP.haveX1?AF:0),BR=this.HTML5PROPS.LEGEND;this.offsetX=BI;this.offsetY=BG;this.offsetX2=BN;this.offsetY2=BF;AQ(this.domLegend,{width:this.legendW,height:this.legendH});U.applyStyle2Legend(BR,this.domLegend);AQ(this.domMainContainer,{width:this.actualWidth,height:this.actualHeight});AQ(this.domTabHeader,{width:BK,height:BH});AQ(this.domColHeader,{width:this.GMW,height:BH,left:BI});AQ(this.domRowHeader,{width:BL,height:this.GMH,top:BG});AQ(this.domYAxis,{width:BS,height:this.GMH,left:(BL===0)?0:(BL+O),top:BG});AQ(this.domGM,{width:this.GMW,height:this.GMH,left:BI,top:BG});AQ(this.domYAxis2,{width:BQ,height:this.GMH,left:BN,top:BG});AQ(this.domXAxis,{width:this.GMW,height:BE,left:BI,top:BF});AQ(this.domDummyA,{width:BL,height:BE,top:BF});AQ(this.domDummyB,{width:BS,height:BE,left:BL+O,top:BF});this.hLayoutLegend();this.hLayoutScrollBars(BI,BG,BN,BF,BE,BQ);},hLayoutScrollBars:function(BH,BG,BK,BF,BE,BL){var BI=this.GMInfo,BJ=this.vSBar,BM=this.hSBar;AQ(BJ.domNode,{height:this.GMH,width:this.sBarWidth,top:BG,left:BK+BL-this.sBarWidth});AQ(BJ.domBody,{height:BI.canvasHeight});AQ(BM.domNode,{width:this.GMW,height:this.sBarWidth,left:BH,top:BF+BE-this.sBarWidth});AQ(BM.domBody,{width:BI.canvasWidth});},hGetRowTitleHeight:function(){var BE=this.colHeaderHArr.length;if(this.colHeaderExtraH>0){return this.colHeaderExtraH;}return this.colHeaderHArr[BE-1];},hGetColTitleWidth:function(){var BF=this.rowHeaderWArr.length,BE=this.GMInfo;if(this.rowHeaderExtraW>0){return this.rowHeaderExtraW;}if(BE.yAxisWidth>0){return BE.yAxisWidth;}return this.rowHeaderWArr[BF-1];},getCellForNode:function z(BE){return BE.identity;},getCellUnitIndex:function I(BE){return(BE.o!==undefined)?BE.o:BE._ei;},hFillContents:function(){var BO=this,BL=this.GMInfo,BR=this.HTML5PROPS,BQ=this.GMController,BI=BO.getWidgetPropertyValue(AG.ROW_HEADER_SHOW),BH=BO.getWidgetPropertyValue(AG.COLUMN_HEADER_SHOW),BK=function(){var Bh,Ba,BT,BZ,BU,Bj=BO.domTabHeader,Bg=BO.rowHeaderWArr.length,Bf=BO.colHeaderHArr.length,Bc=BO.rowHeaderExtraW>0||BO.colHeaderExtraH>0,BV=BO.GMController,Be=0,BS=0,BW=BQ.getRowTitleInfo(true),BX=BQ.getColTitleInfo(true),Bi=BQ.getYAxisInfo(),BY,Bk=[],Bb;BO.rowTitleH=BZ=BO.hGetRowTitleHeight();BO.colTitleW=BU=BO.hGetColTitleWidth();Bj.innerHTML="";for(Bh=0;Bh<Bg;Bh++){Bk=[];Ba=document.createElement("div");Ba.setAttribute("class","gm-rowheader-title");AQ(Ba,{width:BO.rowHeaderWArr[Bh],height:BZ,left:Be},true);Ba.setAttribute("type",G.GM_ROW_HEADER_TITLE);Ba.setAttribute("depth",String(Bh));U.applyStyles2DomNode(Ba,BR.RH_BK);Bj.appendChild(Ba);Ba.identity=new A8.TitleCellIdentity(BW.items[Bh]);if(BI&&BW.items[Bh].n){Bb={text:BW.items[Bh].n,extraAttributes:{type:G.GM_ROW_HEADER_TITLE}};Bk.push(Bb);BY=new mstrmojo.gm.TitleLabelCapsule({width:BO.rowHeaderWArr[Bh],height:BZ,cssClass:"gm-rowheader-title",styles:BR.RH_TITLE,labelObj:Bk[0],maxLineCount:BQ.getAttributesOnDropZone("Columns").length>0?2:3});BY.render();BY.parent=BO;BO.addDisposable(BY);BT=BY.domNode;U.applyStyles2DomNode(BT,BR.RH_BK);if(BT.firstChild&&BT.firstChild.firstChild){U.applyStyles2DomNode(BT.firstChild.firstChild,BR.RH_TITLE);}BT.identity=new A8.TitleCellIdentity(BW.items[Bh]);Ba.appendChild(BT);}Be+=BO.rowHeaderWArr[Bh]+O;}for(Bh=0;Bh<Bf;Bh++){Bk=[];Ba=document.createElement("div");Ba.setAttribute("class","gm-colheader-title");AQ(Ba,{width:BU,height:BO.colHeaderHArr[Bh],top:BS,right:0},true);Ba.setAttribute("type",G.GM_COL_HEADER_TITLE);Ba.setAttribute("depth",String(Bh));U.applyStyles2DomNode(Ba,BR.CH_BK);Bj.appendChild(Ba);Ba.identity=new A8.TitleCellIdentity(BX.items[Bh]);if(BH&&BX.items[Bh].n){Bb={text:BX.items[Bh].n,extraAttributes:{type:G.GM_COL_HEADER_TITLE}};Bk.push(Bb);BY=new mstrmojo.gm.TitleLabelCapsule({width:BU,height:BO.colHeaderHArr[Bh],cssClass:"gm-colheader-title",styles:BR.CH_TITLE,labelObj:Bk[0],maxLineCount:BQ.getAttributesOnDropZone("Rows").length>0?2:3});BY.render();BY.parent=BO;BO.addDisposable(BY);BT=BY.domNode;U.applyStyles2DomNode(BT,BR.CH_BK);if(BT.firstChild&&BT.firstChild.firstChild){U.applyStyles2DomNode(BT.firstChild.firstChild,BR.CH_TITLE);}BT.identity=new A8.TitleCellIdentity(BX.items[Bh]);Ba.appendChild(BT);}BS+=BO.colHeaderHArr[Bh]+A5;}var Bd=BO.getWidgetPropertyValue(AG.Y_AXIS_TITLE_SHOW);if(Bd===undefined){Bd=BO.getWidgetPropertyDefaultValue(AG.Y_AXIS_TITLE_SHOW,{isMetric:BV.yIsNumeric});}if(Bc&&BL.yAxisWidth>0&&Bd&&Bi.isMetric===false&&Bi.items.length>0){Bk=[];if(Bi.isMetric===false&&Bi.items.length>0){b.forEach(Bi.items,function(Bm,Bl){Bb={text:Bm,extraAttributes:{type:G.GM_YLABEL,dzId:B.YAxis,dzIndex:Bl,identity:new A8.AttributeAxisTitleIdentity({n:Bm,tid:Bi.ids[Bl],objType:Ak.Y_ATTRIBUTE_AXIS_TITLE})}};Bk.push(Bb);});}BY=new mstrmojo.VisAxisLabel({width:BU+"px",height:Math.min(BZ,BO.textHeightInY)+"px",cssClass:"gm-yaxis-cell-label",styles:BV.yTitleStyles,align:"center",contentData:Bk});BY.render();BY.parent=BO;BO.addDisposable(BY);BY.domNode.style.bottom=Math.max((BZ-BO.textHeightInY)/2,0)+"px";BY.domNode.style.right=Math.max((BU-BY.contentWidth)/2,0)+"px";Bj.appendChild(BY.domNode);BO.extraTitleDiv=BY.domNode;}else{BO.extraTitleDiv=undefined;}},BN=function BN(){var BU,BV,BT=0,BS=BO.domRowHeader.childNodes;for(BU=0;BU<BO.rowHeaderWArr.length;BU++){if(BS[BU]){BV=BS[BU];}else{BV=document.createElement("div");BO.domRowHeader.appendChild(BV);}BV.setAttribute("class","gm-rowheader-lv2");AQ(BV,{width:BO.rowHeaderWArr[BU],height:BO.GMH,left:BT,"z-index":BO.rowHeaderWArr.length-1-BU});BT+=BO.rowHeaderWArr[BU]+O;if(BO.slaveRowHeaders[BU]){BO.slaveRowHeaders[BU].resizeAbs(BO.rowHeaderWArr[BU],BO.GMH);}}},BF=function BF(){var BU,BV,BS=0,BT=BO.domColHeader.childNodes;for(BU=0;BU<BO.colHeaderHArr.length;BU++){if(BT[BU]){BV=BT[BU];}else{BV=document.createElement("div");BO.domColHeader.appendChild(BV);}BV.setAttribute("class","gm-colheader-lv2");AQ(BV,{width:BO.GMW,height:BO.colHeaderHArr[BU],top:BS,"z-index":BO.colHeaderHArr.length-1-BU});BS+=BO.colHeaderHArr[BU]+A5;if(BO.slaveColHeaders[BU]){BO.slaveColHeaders[BU].resizeAbs(BO.GMW,BO.colHeaderHArr[BU]);}}if(BO.colHeaderExtraH>0){if(BT[BU]){BV=BT[BU];}else{BV=document.createElement("div");BO.domColHeader.appendChild(BV);}BO.domXAxis2=BV;BV.setAttribute("class","gm-colheader-lv2");AQ(BV,{width:BO.GMW,height:BO.colHeaderExtraH,top:BS});if(BO.slaveColHeaders[BU]){BO.slaveColHeaders[BU].resizeAbs(BO.GMW,BO.colHeaderExtraH);}}else{BO.domXAxis2=null;}},BE=function(){var BT,BS=BO.domYAxis.childNodes;if(BS[0]){BT=BS[0];}else{BT=document.createElement("div");BO.domYAxis.appendChild(BT);}AQ(BT,{position:"absolute",width:BL.yAxisWidth,height:BO.GMH});if(BO.slaveYAxis){BO.slaveYAxis.resizeAbs(BL.yAxisWidth,BO.GMH);}},BJ=function(){var BT,BS=BO.domYAxis2.childNodes;if(BS[0]){BT=BS[0];}else{BT=document.createElement("div");BO.domYAxis2.appendChild(BT);}AQ(BT,{position:"absolute",width:BL.yAxis2Width,height:BO.GMH});if(BO.slaveYAxis2){BO.slaveYAxis2.resizeAbs(BL.yAxis2Width,BO.GMH);}},BG=function(){var BT,BS=BO.domXAxis.childNodes;if(BS[0]){BT=BS[0];}else{BT=document.createElement("div");BO.domXAxis.appendChild(BT);}AQ(BT,{position:"absolute",width:BO.GMW,height:BL.xAxisHeight});if(BO.slaveXAxis){BO.slaveXAxis.resizeAbs(BO.GMW,BL.xAxisHeight);}},BP=function(){var BU,BT=BO.masterViewer,BS=BO.domGM.childNodes;if(BS[0]){BU=BS[0];}else{BU=document.createElement("div");BO.domGM.appendChild(BU);}AQ(BU,{position:"absolute",width:BO.GMW,height:BO.GMH});if(BT){BT.resizeAbs(BO.GMW,BO.GMH);}},BM=function(){var BS=BO.legend;if(BS){BS.width=BO.legendW;BS.height=BO.legendH;}};BK();BN();BF();BE();BJ();BG();BP();BM();},hPlaceOutBorders:function(BI){var BL,BJ,BQ=this.actualWidth,BP=this.actualHeight,BV=document,BT=this.domMainContainer,BF=this.lines.borders,BH=this.getWidgetPropertyValue(Ad.OUTSIDE_BORDER),BS=this.HTML5PROPS.MATRIX_LINE_V,BG=this.HTML5PROPS.MATRIX_LINE_H,BR=parseInt(BS.borderWidth,10)||0,BU=this.getWidgetPropertyValue(Ad.FIT_TO),BE=this.legendIsRight(BI),BK=this.getWidth(),BM=this.getHeight(),BN=this.legendW,BO=1;if(!BH){BJ=BF.left;if(BJ){BJ.hide();}BJ=BF.right;if(BJ){BJ.hide();}BJ=BF.top;if(BJ){BJ.hide();}BJ=BF.bottom;if(BJ){BJ.hide();}return ;}BJ=BF.left;if(BN>0&&!BE){if(!BJ){BL=BV.createElement("div");BJ=new mstrmojo.VisSplitter({placeholder:BL,type:G.GM_V_MATRIX_LINE,identity:{objType:Ak.V_MATRIX_LINE},styles:BS,dir:"v",parent:this,draggable:false});this.addDisposable(BJ);BJ.render();BL=BJ.domNode;BT.appendChild(BL);BF.left=BJ;}BJ.updatePosition({left:0,height:BP});}else{if(BJ){BJ.hide();}}BJ=BF.right;if((BN<=0&&((BK-BQ)>BO))||(BN>0&&(BE||((BK-BQ-BN-this.legendP)>BO)))){if(!BJ){BL=BV.createElement("div");BJ=new mstrmojo.VisSplitter({placeholder:BL,type:G.GM_V_MATRIX_LINE,identity:{objType:Ak.V_MATRIX_LINE},styles:BS,dir:"v",parent:this,context:{dock:Al.RIGHT,type:G.GM_RIGHT_BORDER},draggable:BU===AH.CONTENT});this.addDisposable(BJ);BJ.render();BL=BJ.domNode;BT.appendChild(BL);BF.right=BJ;}BJ.updatePosition({left:BQ,height:BP});BJ.updateSize(e.call(this,G.GM_RIGHT_BORDER));}else{if(BJ){BJ.hide();}}BJ=BF.bottom;if((BM-BP)>BO){if(!BJ){BL=BV.createElement("div");BJ=new mstrmojo.VisSplitter({placeholder:BL,type:G.GM_H_MATRIX_LINE,identity:{objType:Ak.H_MATRIX_LINE},styles:BG,dir:"h",parent:this,context:{dock:Al.BOTTOM,type:G.GM_BOTTOM_BORDER},draggable:BU===AH.CONTENT});this.addDisposable(BJ);BJ.render();BL=BJ.domNode;BT.appendChild(BL);BF.bottom=BJ;}BJ.updatePosition({top:BP,width:BQ+BR});BJ.updateSize(e.call(this,G.GM_BOTTOM_BORDER));}else{if(BJ){BJ.hide();}}},hPlaceYResizers:function(BN){var BE,BO,BF=this.GMInfo,BH=BF.yAxisWidth,BK=BF.yAxis2Width,BM=this.actualHeight,BL=document,BG=this.domMainContainer,BJ=this.lines.axes,BI=this.getWidgetPropertyValue(AG.Y_AXIS_LINE_SHOW);if(!BI){BO=BJ.y1;if(BO){BO.domNode.style.display="none";}BO=BJ.y2;if(BO){BO.domNode.style.display="none";}return ;}BO=BJ.y1;if(BH>0){if(!BO){BE=BL.createElement("div");BO=new mstrmojo.VisSplitter({placeholder:BE,cssClass:"gm-axis-line",type:G.GM_YAXIS_LINE,identity:{objType:Ak.Y_AXIS},styles:BN,dir:"v",context:{dock:Al.RIGHT,type:G.GM_YAXIS},parent:this});this.addDisposable(BO);BO.render();BE=BO.domNode;BG.appendChild(BE);BJ.y1=BO;}BO.updatePosition({left:this.offsetX-D,height:BM-BF.xAxisHeight});BO.updateSize(e.call(this,G.GM_YAXIS));}else{if(BO){BO.hide();}}BO=BJ.y2;if(BK>0){if(!BO){BE=BL.createElement("div");BO=new mstrmojo.VisSplitter({placeholder:BE,cssClass:"gm-axis-line",type:G.GM_YAXIS2_LINE,identity:{objType:Ak.Y2_AXIS},styles:BN,dir:"v",context:{dock:Al.LEFT,type:G.GM_YAXIS2},parent:this});this.addDisposable(BO);BO.render();BE=BO.domNode;BG.appendChild(BE);BJ.y2=BO;}BO.updatePosition({left:this.offsetX2-D,height:BM-BF.xAxisHeight});BO.updateSize(e.call(this,G.GM_YAXIS2));}else{if(BO){BO.hide();}}},hPlaceXResizers:function(BO){var BF,BP,BL=this.GMController,BH=this.GMInfo,BE=BH.xAxisHeight,BK=BH.xAxis2Height,BG=this.actualWidth,BN=document,BI=this.domMainContainer,BJ=this.lines.axes,BM=this.getWidgetPropertyValue(AG.X_AXIS_LINE_SHOW);if(!BM){BP=BJ.x1;if(BP){BP.domNode.style.display="none";}BP=BJ.x2;if(BP){BP.domNode.style.display="none";}return ;}BP=BJ.x1;if(BE>0){if(!BP){BF=BN.createElement("div");BP=new mstrmojo.VisSplitter({placeholder:BF,cssClass:"gm-axis-line",type:G.GM_XAXIS_LINE,identity:{objType:Ak.X_AXIS},styles:BO,dir:"h",context:{dock:Al.TOP,type:G.GM_XAXIS},parent:this});this.addDisposable(BP);BP.render();BF=BP.domNode;BI.appendChild(BF);BJ.x1=BP;}BP.updatePosition({top:this.offsetY2-AF,width:this.rowHeaderW?BG:BG-BH.yAxis2Width-BH.yAxisWidth,left:this.rowHeaderW?0:BH.yAxisWidth});BP.updateSize(e.call(this,G.GM_XAXIS));}else{if(BP){BP.hide();}}BP=BJ.x2;if(BK>0&&BL.haveX2){if(!BP){BF=BN.createElement("div");BP=new mstrmojo.VisSplitter({placeholder:BF,cssClass:"gm-axis-line",type:G.GM_XAXIS2_LINE,identity:{objType:Ak.X2_AXIS},styles:BO,dir:"h",context:{dock:Al.BOTTOM,type:G.GM_XAXIS2},parent:this});this.addDisposable(BP);BP.render();BF=BP.domNode;BI.appendChild(BF);BJ.x2=BP;}BP.updatePosition({top:this.offsetY-AF,width:this.rowHeaderW?BG:BG-BH.yAxis2Width-BH.yAxisWidth,left:this.rowHeaderW?0:BH.yAxisWidth});BP.updateSize(e.call(this,G.GM_XAXIS2));}else{if(BP){BP.hide();}}},hPlaceColResizers:function(BO){var BN=this.getWidgetPropertyValue(AG.V_MATRIX_LINES_SHOW),BF=this.lines.cols;if(!BN){BF.forEach(function(Bd){if(Bd){Bd.hide();}});return ;}var BY,BU,BQ,BV,BJ,Bb,Bc=document,BE=Bc.createDocumentFragment(),BT=this.manager,BG=this.GMController,BK=!(BG.haveX2||BG.isFooterAbove),BI=this.GMInfo.xAxis2Height,BW=this.GMInfo.nCols,BL=BT.intersectCheck4Col(this.GMW),BS=BL.start,BH=BL.end,BX=this.actualHeight,Ba=this.domMainContainer,BP=this.offsetX,BZ=this.colHeaderHArr,BR=BZ.length;BX=AR.minus(BX,this.GMInfo.xAxisHeight,AF);var BM=BT.collectColDepths(BW);for(BY=0;BY<BW;BY++){BQ=BF[BY];if(BY>=BS&&BY<BH&&BY<BW-1){Bb=BM[BY];BJ=BT.getColOffset(BY+1)+BP;BV=AR.sum(BZ,A5,Bb);if(Bb===BR&&BK){BV=AR.add(BV,BI,A5);}if(!BQ){BU=Bc.createElement("div");BQ=new mstrmojo.VisSplitter({placeholder:BU,type:G.GM_V_CHART_LINE,identity:{objType:Ak.V_MATRIX_LINE},styles:BO,dir:"v",context:{dock:Al.RIGHT,type:G.GM_CHART_COL,depth:BY},markControlType:true,parent:this});this.addDisposable(BQ);BQ.render();BU=BQ.domNode;BE.appendChild(BU);BF[BY]=BQ;this.splitterListeners.push(BQ.attachEventListener("splitterMoved",this.id,function(Bd){this.onSplitterMoved(Bd.position,Bd.info);}));}BQ.updatePosition({left:BJ-A5,top:BV,height:BX-BV});BQ.updateSize(e.call(this,G.GM_V_CHART_LINE,BY));}else{if(BQ){BQ.hide();}}}Ba.appendChild(BE);},hPlaceVGridLines:function(BX,Bg){var Bc,Bb,BZ,BN,BQ,BV,BS,BG=0,BE=0,BY=this.GMH,BW=0,BH=this.lines,Bf=BH.vMajorGridLines,BL=BH.vMinorGridLines,BI=this.GMController,BM=BI.xMajorGridLinePos,Ba=BI.xMinorGridLinePos,BU=this.manager,BP=BU.intersectCheck4Col(this.GMW),BT=BP.start,BJ=BP.end,Be=this.domGM,BR=0,Bh=document,BF=Bh.createDocumentFragment(),BK=this.getWidgetPropertyValue(AG.MAJOR_GRID_LINES_SHOW),BO=this.getWidgetPropertyValue(AG.MINOR_GRID_LINES_SHOW)===AL.SHOW,Bd=false;if(BK===AL.AUTO){Bd=(this.GMInfo.nRows===1&&this.GMInfo.nCols===1);}else{if(BK===AL.SHOW){Bd=true;}}for(Bc=BT;Bc<=BJ;Bc++){BN=BU.getColOffset(Bc)+BR;if(Bd){BQ=BM[Bc];if(!BQ){continue;}for(Bb=0,BZ=BQ.length;Bb<BZ;Bb++,BG++){BS=Bf[BG];if(!BS){BV=Bh.createElement("div");BS=new mstrmojo.VisSplitter({placeholder:BV,type:G.GM_V_GRID_LINE,identity:{objType:Ak.GRID_LINE},styles:BX,dir:"v",cssClass:"gm-grid-line-major",bodyCssClass:"gm-grid-line-body-major",draggable:false,parent:this});this.addDisposable(BS);BS.render();BV=BS.domNode;BF.appendChild(BV);Bf[BG]=BS;}BS.updateStyle(BX);BS.updatePosition({top:BW,left:BN+BQ[Bb],height:BY});}}if(BO){BQ=Ba[Bc];for(Bb=0,BZ=BQ.length;Bb<BZ;Bb++,BE++){BS=BL[BE];if(!BS){BV=Bh.createElement("div");BS=new mstrmojo.VisSplitter({placeholder:BV,type:G.GM_V_MINOR_GRID_LINE,identity:{objType:Ak.MINOR_GRID_LINE},styles:Bg,dir:"v",cssClass:"gm-grid-line-minor",bodyCssClass:"gm-grid-line-body-minor",draggable:false,parent:this});this.addDisposable(BS);BS.render();BV=BS.domNode;BF.appendChild(BV);BL[BE]=BS;}BS.updateStyle(Bg);BS.updatePosition({top:BW,left:BN+BQ[Bb],height:BY});}}}for(Bb=BG,BZ=Bf.length;Bb<BZ;Bb++){BS=Bf[Bb];if(BS){BS.hide();}}for(Bb=BE,BZ=BL.length;Bb<BZ;Bb++){BS=BL[Bb];if(BS){BS.hide();}}Be.appendChild(BF);},hPlaceHGridLines:function(BV,Bg){var Bc,Bb,BW,BU,BQ,BT,BR,BG=0,BE=0,BX=this.GMW,BM=0,BH=this.lines,Bf=BH.hMajorGridLines,BK=BH.hMinorGridLines,BI=this.GMController,BL=BI.yMajorGridLinePos,BZ=BI.yMinorGridLinePos,BS=this.manager,BO=BS.intersectCheck4Row(this.GMH),BP=BO.start,BY=BO.end,Be=this.domGM,Ba=0,Bh=document,BF=Bh.createDocumentFragment(),BJ=this.getWidgetPropertyValue(AG.MAJOR_GRID_LINES_SHOW),BN=this.getWidgetPropertyValue(AG.MINOR_GRID_LINES_SHOW)===AL.SHOW,Bd=false;if(BJ===AL.AUTO){Bd=(this.GMInfo.nRows===1&&this.GMInfo.nCols===1);}else{if(BJ===AL.SHOW){Bd=true;}}for(Bc=BP;Bc<=BY;Bc++){BU=BS.getRowOffset(Bc)+Ba;if(Bd){BQ=BL[Bc];if(!BQ){continue;}for(Bb=0,BW=BQ.length;Bb<BW;Bb++,BG++){BR=Bf[BG];if(!BR){BT=Bh.createElement("div");BR=new mstrmojo.VisSplitter({placeholder:BT,type:G.GM_H_GRID_LINE,identity:{objType:Ak.GRID_LINE},styles:BV,dir:"h",cssClass:"gm-grid-line-major",bodyCssClass:"gm-grid-line-body-major",draggable:false,parent:this});this.addDisposable(BR);BR.render();BT=BR.domNode;BF.appendChild(BT);Bf[BG]=BR;}BR.updateStyle(BV);BR.updatePosition({top:BU+BQ[Bb],left:BM,width:BX});}}if(BN){BQ=BZ[Bc];for(Bb=0,BW=BQ.length;Bb<BW;Bb++,BE++){BR=BK[BE];if(!BR){BT=Bh.createElement("div");BR=new mstrmojo.VisSplitter({placeholder:BT,type:G.GM_H_MINOR_GRID_LINE,identity:{objType:Ak.MINOR_GRID_LINE},styles:Bg,dir:"h",cssClass:"gm-grid-line-minor",bodyCssClass:"gm-grid-line-body-minor",draggable:false,parent:this});this.addDisposable(BR);BR.render();BT=BR.domNode;BF.appendChild(BT);BK[BE]=BR;}BR.updateStyle(Bg);BR.updatePosition({top:BU+BQ[Bb],left:BM,width:BX});}}}for(Bb=BG,BW=Bf.length;Bb<BW;Bb++){BR=Bf[Bb];if(BR){BR.hide();}}for(Bb=BE,BW=BK.length;Bb<BW;Bb++){BR=BK[Bb];if(BR){BR.hide();}}Be.appendChild(BF);},hPlaceRowResizers:function(BM){var BL=this.getWidgetPropertyValue(AG.H_MATRIX_LINES_SHOW),BG=this.lines.rows;if(!BL){BG.forEach(function(BY){if(BY){BY.hide();}});return ;}var BV,BQ,BN,BR,BH,BX=document,BE=BX.createDocumentFragment(),BP=this.manager,BO=this.GMInfo.nRows,BI=BP.intersectCheck4Row(this.GMH),BK=BI.start,BT=BI.end,BS=this.actualWidth,BW=this.domMainContainer,BU=this.offsetY,BF=this.rowHeaderWArr;var BJ=BP.collectRowDepths(BO);for(BV=0;BV<BO;BV++){BN=BG[BV];if(BV>=BK&&BV<BT&&BV<BO-1){BR=BP.getRowOffset(BV+1)+BU;BH=AR.sum(BF,O,BJ[BV]);if(!BN){BQ=BX.createElement("div");BN=new mstrmojo.VisSplitter({placeholder:BQ,type:G.GM_H_CHART_LINE,identity:{objType:Ak.H_MATRIX_LINE},styles:BM,dir:"h",context:{dock:Al.BOTTOM,type:G.GM_CHART_ROW,depth:BV},markControlType:true,parent:this});this.addDisposable(BN);BN.render();BQ=BN.domNode;BE.appendChild(BQ);BG[BV]=BN;this.splitterListeners.push(BN.attachEventListener("splitterMoved",this.id,function(BY){this.onSplitterMoved(BY.position,BY.info);}));}BN.updatePosition({top:BR,left:BH,width:BS-BH});BN.updateSize(e.call(this,G.GM_H_CHART_LINE,BV));}else{if(BN){BN.hide();}}}BW.appendChild(BE);},hPlaceRHResizers:function(BQ){var BK,BF,BR,BM=this.colHeaderH,BL=0,BJ=this.rowHeaderWArr,BH=BJ.length,BO=this.actualHeight,BN=document,BI=this.domMainContainer,BP=this.lines.vlines,BG=this.GMController,BE=this.getWidgetPropertyValue(AG.V_MATRIX_LINES_SHOW);for(BK=0;BK<BH;BK++){BL+=BJ[BK];BR=BP[BK];if(!BE||BJ[BK]===0){if(BR){BR.hide();}continue;}if(BK===BH-1||((BK===BH-2)&&(BG.haveY1===false))){BM=0;}if(!BR){BF=BN.createElement("div");BR=new mstrmojo.VisSplitter({placeholder:BF,type:G.GM_V_MATRIX_LINE,identity:{objType:Ak.V_MATRIX_LINE},styles:BQ,dir:"v",context:{dock:Al.RIGHT,type:G.GM_ROW_HEADER,depth:BK},parent:this});this.addDisposable(BR);BR.render();BF=BR.domNode;BI.appendChild(BF);BP[BK]=BR;}BR.updatePosition({left:BL,top:BM,height:BO-BM-this.GMInfo.xAxisHeight});BR.updateSize(e.call(this,G.GM_V_MATRIX_LINE,BK));BL+=O;}BR=BP[BK];if(this.rowHeaderExtraW>0){BL+=this.rowHeaderExtraW;if(!BE){if(BR){BR.hide();}}else{if(!BR){BF=BN.createElement("div");BR=new mstrmojo.VisSplitter({placeholder:BF,type:G.GM_V_MATRIX_LINE,identity:{objType:Ak.V_MATRIX_LINE},styles:BQ,dir:"v",context:{dock:Al.RIGHT,type:G.GM_V_EXTRA_LINE},parent:this});this.addDisposable(BR);BR.render();BF=BR.domNode;BI.appendChild(BF);BP[BK]=BR;}BR.updatePosition({left:BL,top:0,height:BO-this.GMInfo.xAxisHeight});BR.updateSize(e.call(this,G.GM_V_EXTRA_LINE));}}else{if(BR){BR.hide();}}},hPlaceCHResizers:function(BR){var BK,BE,BS,BI=this.rowHeaderW,BG=this.GMController,BN=0,BO=this.GMInfo.xAxis2Height,BL=this.colHeaderHArr,BH=BL.length,BF=this.actualWidth,BQ=document,BJ=this.domMainContainer,BM=this.lines.hlines,BP=this.getWidgetPropertyValue(AG.H_MATRIX_LINES_SHOW);for(BK=0;BK<BH;BK++){BN+=BL[BK];BS=BM[BK];BI=this.rowHeaderW;if(!BP||BL[BK]===0){if(BS){BS.hide();}continue;}if(BK===BH-1){BI=0;}if((BK!==BH-1)&&(BG.haveY1===false)&&this.colTitleW){BI-=this.colTitleW;if(this.domTabHeader.offsetWidth===this.colTitleW){BI=0;}}if(!BS){BE=BQ.createElement("div");BS=new mstrmojo.VisSplitter({placeholder:BE,type:G.GM_H_MATRIX_LINE,identity:{objType:Ak.H_MATRIX_LINE},styles:BR,dir:"h",context:{dock:Al.BOTTOM,type:G.GM_COL_HEADER,depth:BK},parent:this});this.addDisposable(BS);BS.render();BE=BS.domNode;BJ.appendChild(BE);BM[BK]=BS;}BS.updatePosition({top:BN,left:BI,width:BF-BI});BS.updateSize(e.call(this,G.GM_H_MATRIX_LINE,BK,{max:this.colHeaderMaxHeightArr[BK]}));BN+=A5;}BS=BM[BK];if(this.colHeaderExtraH>0){BN+=BO;if(!BP){if(BS){BS.hide();}}else{if(!BS){BE=BQ.createElement("div");BS=new mstrmojo.VisSplitter({placeholder:BE,type:G.GM_H_MATRIX_LINE,identity:{objType:Ak.H_MATRIX_LINE},styles:BR,dir:"h",context:{dock:Al.BOTTOM,type:G.GM_XAXIS2},parent:this});this.addDisposable(BS);BS.render();BE=BS.domNode;BJ.appendChild(BE);BM[BK]=BS;}BS.updatePosition({top:BN,width:BF});BS.updateSize(e.call(this,G.GM_XAXIS2,undefined,{max:this.rowHeaderMaxHeight}));}}else{if(BS){BS.hide();}}},hPlaceYSplitters:function(BT){var BJ=function(Bd){if(!Bd.haveY1||!Bd.hasHeaderInY){return false;}var BY=Bd.isMetricNamesInZone("Rows"),Bc=Bd.getMetricsOnXAxis(),BZ=Bd.getMetricsOnPrimaryXAxis(),Bb=Bc&&Bc.length,BW=BZ&&BZ.length,Ba=Bd.getAttributesOnDropZone("YAxis"),BV=Ba&&Ba.length,BX=Bd.getChartInfo();if(BX.isGrid&&BX.isPie){Bc=Bd.getMetricsOnAngleBy();Bb=Bc&&Bc.length;}return BY&&Bb>=2&&BV>=1&&(Bb===BW||BW===0);};var BF,BU,BH=this.GMInfo,BM=BH.yAxisWidth,BO=BH.yAxis2Width,BR=this.GMH,BP=document,BI=this.domMainContainer,BK=this.lines.axisSplitters,BQ=this.GMController,BG=this.getWidgetPropertyValue(AG.V_MATRIX_LINES_SHOW),BN=BG&&BJ(BQ),BS=false,BE=0,BL=this.textHeightInY+2*BE;if(!BN){BU=BK.y1Splitter;if(BU){BU.domNode.style.display="none";}}else{BU=BK.y1Splitter;if(BM>BL){if(!BU){BF=BP.createElement("div");BU=new mstrmojo.VisSplitter({placeholder:BF,type:G.GM_V_MATRIX_LINE,identity:{objType:Ak.V_MATRIX_LINE},styles:BT,dir:"v",draggable:false,parent:this});this.addDisposable(BU);BU.render();BF=BU.domNode;BI.appendChild(BF);BK.y1Splitter=BU;}BU.updatePosition({left:this.offsetX-BM+BL-D,top:this.offsetY,height:BR});}else{if(BU){BU.hide();}}}if(!BS){BU=BK.y2Splitter;if(BU){BU.domNode.style.display="none";}}else{BU=BK.y2Splitter;if(BO>BL){if(!BU){BF=BP.createElement("div");BU=new mstrmojo.VisSplitter({placeholder:BF,type:G.GM_V_MATRIX_LINE,identity:{objType:Ak.V_MATRIX_LINE},styles:BT,dir:"v",draggable:false,parent:this});this.addDisposable(BU);BU.render();BF=BU.domNode;BI.appendChild(BF);BK.y2Splitter=BU;}BU.updatePosition({left:this.offsetX2+BO-BL-D,top:this.offsetY,height:BR});}else{if(BU){BU.hide();}}}},hInitWidgetMatrixes:function(){var Bd=this,BU=this.GMInfo,Bb=Bd.GMController,BO=Bb.manager,BZ=A8.EnumDrawingAPI,BW=Bb.getControllerAPI(BZ.GET_CHART_WIDTH),BV=Bb.getControllerAPI(BZ.GET_CHART_HEIGHT),BT=Bb.getControllerAPI(BZ.GET_ROW_HEADER),BS=Bb.getControllerAPI(BZ.GET_COLUMN_HEADER),BR=Bb.getControllerAPI(BZ.CREATE_UNIT_Y_AXIS),BQ=Bb.getControllerAPI(BZ.CREATE_UNIT_X_AXIS),BP=Bb.getControllerAPI(BZ.GET_FULL_FLEDGED_CHART),BN=Bb.getControllerAPI(BZ.GET_ROW_SPAN),BM=Bb.getControllerAPI(BZ.GET_COLUMN_SPAN),BH=Bb.getControllerAPI(BZ.UPDATE_MINI_CHART),BG=Bb.getControllerAPI(BZ.UPDATE_Y_AXIS),BF=Bb.getControllerAPI(BZ.UPDATE_X_AXIS),BE=Bb.getControllerAPI(BZ.GET_EXTRA_COLUMN_HEADER),Bf=Bb.getControllerAPI(BZ.UPDATE_ROW_HEADER),Be=Bb.getControllerAPI(BZ.UPDATE_COLUMN_HEADER),Bc=[],BY=[],BL=function(){var Bh,Bl=Bd.rowHeaderWArr.length,Bg=Bd.domRowHeader.childNodes,Bk,Bj,Bi;for(Bh=0;Bh<Bl;Bh++){Bk={name:"rh",manager:BO,depth:Bh,depthOnRow:false,placeholder:Bg[Bh],phCss:"gm-rowheader-cell",nRows:BU.nRows,nCols:1,chartW:Bd.rowHeaderWArr[Bh],chartH:BU.avgChartHeight,fixWidth:true,contentSummary:Bb.getRowHeaderSummary(Bh),useOwnSplitter:false};Bj=Bd.addDisposable(new A8.GMContainer(Bk));Bi=Bj.API;Bi.createUnitChart=BT;Bi.updateUnitChart=Bf;Bi.getRowSpan=BN;Bj.render();Bd.slaveRowHeaders.push(Bj);BY.push(Bj);}},BK=function(){var Bh,Bj,Bi,Bl,Bk=Bd.colHeaderHArr.length,Bg=Bd.domColHeader.childNodes;for(Bh=0;Bh<Bk;Bh++){Bl={name:"ch",manager:BO,depth:Bh,depthOnRow:true,placeholder:Bg[Bh],phCss:"gm-colheader-cell",nRows:1,nCols:BU.nCols,chartW:BU.avgChartWidth,chartH:Bd.colHeaderHArr[Bh],fixHeight:true,contentSummary:Bb.getColHeaderSummary(Bh),useOwnSplitter:false};Bj=Bd.addDisposable(new A8.GMContainer(Bl));Bi=Bj.API;Bi.createUnitChart=BS;Bi.updateUnitChart=Be;Bi.getColSpan=BM;Bj.render();Bd.slaveColHeaders.push(Bj);Bc.push(Bj);}if(Bd.colHeaderExtraH>0){Bl={manager:BO,placeholder:Bg[Bh],phCss:" gm-colheader-cell-dummy",nRows:1,nCols:BU.nCols,chartW:BU.avgChartWidth,chartH:Bd.colHeaderExtraH,fixHeight:true,useOwnSplitter:false};Bj=Bd.slaveXAxis2=Bd.addDisposable(new A8.GMContainer(Bl));Bi=Bj.API;if(Bb.haveX2){Bj.isPrimary=false;Bi.createUnitChart=BQ;Bi.updateUnitChart=BF;}else{Bi.createUnitChart=BE;Bi.updateUnitChart=Be;}Bj.render();Bj.domNode.style.backgroundColor="rgba(0,0,0,0)";Bd.slaveColHeaders.push(Bj);Bc.push(Bj);}},Ba=function(){var Bi={name:"y",manager:BO,placeholder:Bd.domYAxis.childNodes[0],phCss:"gm-yaxis-cell",nRows:BU.nRows,nCols:1,chartW:BU.yAxisWidth,chartH:BU.avgChartHeight,fixWidth:true,useOwnSplitter:false},Bh=Bd.slaveYAxis=Bd.addDisposable(new A8.GMContainer(Bi)),Bg=Bh.API;Bh.isPrimary=true;Bg.createUnitChart=BR;Bg.updateUnitChart=BG;Bh.render();BY.push(Bh);},BX=function(){var Bg={name:"y2",manager:BO,placeholder:Bd.domYAxis2.childNodes[0],phCss:"gm-yaxis-cell",nRows:BU.nRows,nCols:1,chartW:BU.yAxis2Width,chartH:BU.avgChartHeight,fixWidth:true,useOwnSplitter:false},Bi=Bd.slaveYAxis2=Bd.addDisposable(new A8.GMContainer(Bg)),Bh=Bi.API;Bi.isPrimary=false;Bh.createUnitChart=BR;Bh.updateUnitChart=BG;Bi.render();BY.push(Bi);},BJ=function(){var Bh={name:"x",manager:BO,placeholder:Bd.domXAxis.childNodes[0],phCss:"gm-xaxis-cell",nRows:1,nCols:BU.nCols,chartH:BU.xAxisHeight,chartW:BU.avgChartWidth,fixHeight:true,useOwnSplitter:false};var Bg=Bd.slaveXAxis=Bd.addDisposable(new A8.GMContainer(Bh)),Bi=Bg.API;Bg.isPrimary=true;Bi.createUnitChart=BQ;Bi.updateUnitChart=BF;Bg.render();Bc.push(Bg);},BI=function(){var Bi={name:"master",manager:BO,placeholder:Bd.domGM.childNodes[0],phCss:"gm-chart",nRows:BU.nRows,nCols:BU.nCols,chartW:BU.avgChartWidth,chartH:BU.avgChartHeight,enableLassoSelect:!Bd.formattingMode,APIOwner:Bd,useOwnSplitter:false,canvasScrolled:true,useAsSelectorOrBrushes:Bd.hasAssociatedNodes()||Bd.selectorControl,shouldDrawShapeFlag:Bb.shouldDrawShapeFlag},Bg=Bd.masterViewer=Bd.addDisposable(new A8.GMContainer(Bi)),Bh=Bg.API;Bh.createUnitChart=BP;Bh.updateUnitChart=BH;Bh.lassoSelected=Bd.lassoSelected;Bh.lassoSelecting=Bd.lassoSelecting;Bg.render();Bg.domNode.style.overflow="hidden";AY.attachMarkupEvent(Bd.id,Bg.domContainer,"scroll");};BO.setDimensions(BU.nRows,BU.nCols,BU.avgChartWidth,BU.avgChartHeight);BO.API.getChartWidth=BW;BO.API.getChartHeight=BV;BL();BK();Ba();if(Bb.haveY2){BX();}BJ();BI();BO.master=this.masterViewer;BO.hSlaves=Bc;BO.vSlaves=BY;BO.binding();BO.yAxis=this.slaveYAxis;BO.xAxis=this.slaveXAxis;BO.yAxis2=this.slaveYAxis2;BO.xAxis2=this.slaveXAxis2;this.addChildren(Bc);this.addChildren(BY);this.addChildren(this.masterViewer);},setTheme:function(BE){if(BE===AB.DARK){this.cssClass="gm-dark-theme";this.menuCssClass="gm-context-menu-dark";}else{this.cssClass="gm-light-theme";this.menuCssClass="gm-context-menu-light";}this.theme=BE;if(this.domNode){this.domNode.setAttribute("class",this.cssClass);}this.GMController.updatePalette(BE);},onLegendDropped:function(BE){this.writeGlobalProperty(Ad.LEGEND_POSITION,BE);},onLegendDropZoneChange:function n(BE){this.hLayoutLegend(BE.pos);this.hPlaceOutBorders(BE.pos);},lassoSelecting:function(){this.shouldNotTriggerClick=false;this.interactor.clearSelectedCharts();},lassoSelected:function(BF){var BE=this.interactor;BE.clearSelectedTargets();if(!BF.ctrlKey){this.clearSelections();BE.clearSelectedShapes();BE.clearSelectedCharts();this.GMController.highLightShapeIndex={};}BE.selectShapes(BF.selectedShapes,true);x.call(this,BF);this.endSelections();this.shouldNotTriggerClick=true;BE.toggleGMFade();},getReplaceType:function(){var BF=this.GMController,BG=BF.getChartInfo(),BE=(BG.isABL&&BG.dirc===A8.EnumABLDirection.HORIZONTAL);if(BE||BG.tp===V.BUBBLE||BG.tp===V.SCATTER){return 0;}return 1;},getSliceAttrNum:function(){var BG=this.GMController,BH=BG.getChartInfo(),BF=BG.getUnitsCountInSliceBy(),BE=(BH.isABL&&BH.dirc===A8.EnumABLDirection.HORIZONTAL);if(BH.isPie&&BF>0){if((this.getReplaceType()===0&&!BE)||(this.getReplaceType()===1&&BE)){return BF;}return 0;}return 0;},getMenuHandler:function P(BI){var BV=this,BK=BV.interactor,BU=BV.GMController,BM,BL,BE;BE=this._super(BI);if(BE!==mstrmojo.emptyFn){return BE;}var BF=function(){BM=BU.getChartInfo();var Bk=new mstrmojo.ui.menus.MenuConfig();var Bc=[{id:12097,desc:"Bar",v:d.BAR},{id:12098,desc:"Line",v:d.LINE},{id:12099,desc:"Area",v:d.AREA},{id:12100,desc:"Circle",v:d.CIRCLE},{id:12101,desc:"Square",v:d.SQUARE},{id:12102,desc:"Tick",v:d.TICK},{id:12103,desc:"Ring",v:d.RING},{id:12104,desc:"Pie",v:d.PIE}];var Ba={Area:true,Line:true},Be={Area:true,Line:true,Bar:true},Bb={},Bd=BM.isBubbleOrScatter?Be:Ba;if(BM.isABL){Bd=Bb;}var Bi=[];Bc.forEach(function(Bl){if(!Bd[Bl.desc]){Bi.push(Bl);}});var Bj=BV.readGlobalProperty(Ad.METRIC_SHAPES).jsonObj,Bf=Object.keys(Bj),Bg=false,Bh=BV.readGlobalProperty("Shape");Bf=b.filter(Bf,function(Bl){return Bl.indexOf(Ag)<0;});if(Bf.length>0){b.forEach(Bf,function(Bl){if(Bj[Bl]!==Bh){Bg=true;}});}Bi.forEach(function(Bl){Bk.addMenuItem(mstrmojo.desc(Bl.id,Bl.desc),Bg?"":(d[Bl.desc.toUpperCase()]===Bh)?"on":"",function(){BV.setWidgetPropertyValue(Ad.METRIC_SHAPES,{});BV.processChangeShape(Bl.v);});});return Bk;};var BX=function(Bd){var Ba=Bd.ctxt,Bb=Ba.dtlb,Bc=Ba.mid;w.call(BV,Bc,Bb);};var BJ=function(Bd){var Ba=Bd.ctxt,Be=Ba.sp,Bc=Ba.mid,Bb;Bb=BV.readGlobalProperty(Ad.METRIC_SHAPES);Bb.setProperty(Bc,Be);BV.writeGlobalProperty(Ad.METRIC_SHAPES,Bb,undefined);};var BY=function(){BV.updateAfterKeepOnly(true);BV.noHighlightAfterKeepOnlyExcludeDrill=true;};var BS=function(){BV.updateAfterKeepOnly(false);BV.noHighlightAfterKeepOnlyExcludeDrill=true;};var BZ=function(Bb){var Ba=Bb.ctxt.drillUnit;BV.updateAfterKeepOnlyAndShow(Ba);BV.noHighlightAfterKeepOnlyExcludeDrill=true;};var BQ=function(){BL=BU.getSelectedObjectsInfo(BK.selectedShapes);BV.showData(BL);BV.noReorderAfterShowData=true;};var BW=function(){BV.updateAfterKeepOnly(true);BV.noHighlightAfterKeepOnlyExcludeDrill=true;};var BN=function(){BV.updateAfterKeepOnly(false);BV.noHighlightAfterKeepOnlyExcludeDrill=true;};var BT=function(Bb){var Ba=Bb.ctxt.drillUnit,Bc=Bb.ctxt.fromUnit;BV.updateAfterKeepOnlyAndShow(Ba,Bc);BV.noHighlightAfterKeepOnlyExcludeDrill=true;};var BG=function(Be){var Bb=Be.ctxt,Ba,Bg,Bd,Bf,Bc;Ba=Bb.isAsc;Bc=Bb.identity;Bg=Bb.selInfo;BU.sortingMetric=false;if(Bc||Bg){Bd=BU.getAttributeSortPlusExistedMetricSort(Bc||Bg,Ba);Bf=BU.getSortActions(Bd);BV.updateAfterSort(Bf);}else{U.visPrint("undefined identity or selection info");}};var BP=function(Ba){var Bi=Ba.ctxt,Bh,Bf,Bg,Bd;Bh=Bi.isAsc;Bf=Bi.selInfo;Bd=Bf.cellHandle;if(Bd){BU.sortingMetric=true;Bg=BU.getMetricSortDefinition(Bd,Bh);var Be=BU.getSortActions(Bg);BV.setWidgetPropertyValue(Ad.SORT_ORDER,Bh);BV.setWidgetPropertyValue(Ad.SORT_INDEX,Bd);var Bb=BU.getChartInfo(),Bc=true;if(Bc&&Bb.isABL&&BU.isStacked){BU.fakeSortActionsStackTotal(Be);}BV.updateAfterSort(Be);}else{U.visPrint("undefined cell handle");}};var BO=function(Bd){var Bb=Bd.ctxt,Bc=Bb.axis;var Ba=-1;switch(Bc){case B.Rows:Bc=1;break;case B.Columns:Bc=2;break;case Ba:break;}BV.model.controller.onGetAdvSortData(BV,Bc,Bb.item.t);};var BR=function(){var Ba=BU.getSortActions([]);BV.removeWidgetProperty(Ad.SORT_ORDER);BV.removeWidgetProperty(Ad.SORT_INDEX);BV.updateAfterSort(Ba);};var BH=function(){var Ba=BV.GMController.getDebugMenu();BV.showContextMenu(null,Ba);};switch(BI){case"selectionKeepOnly":return BY;case"selectionExclude":return BS;case"selectionKeepOnlyAndShow":return BZ;case"selectionShowData":return BQ;case"headerKeepOnly":return BW;case"headerExclude":return BN;case"headerDrill":return BT;case"sortAttributeTitle":return BG;case"advancedSort":return BO;case"clearSort":return BR;case"sortMetricTitle":return BP;case"changeShape":return BJ;case"showDataForMetric":return BX;case"changeGlobalShape":return BF;case"debug":return BH;case"attributeAddToFilter":case"attributeUseAsSelector":case"attributeFormat":case"sortAxisAttribute":case"advancedSortAxisAttribute":case"attributeRename":case"attributeRemove":case"attributeNew":case"filterOnSelection":case"createGroup":case"createCalculationDE":case"showMarker":case"hideMarker":case"dataLabelShowValue":case"dataLabelShowText":case"dataLabelHide":case"metricFormat":case"metricRename":case"metricRemove":case"metricNew":case"metricAddToFilter":break;}return mstrmojo.emptyFn;},showContextMenu:function(BF,BH){var BL=this.contextMenu,BG=this,BE=this.GMController,BK,BJ,BI;if(BF!==null){BJ=BF.e;BI=BF.hWin;BK=AY.position(this.getRealTarget(BF));BK.y+=BK.h;BK.x-=1;}else{BK={x:0,y:0,w:0,h:0};}if(BL){BL.hideContextMenu();BL.unrender();delete this.contextMenu;}BL=new mstrmojo.MenuButton({cmCssClass:this.menuCssClass,zIndex:1000,cm:BH,dynamicUpdate:true,executeCommand:function(BM){switch(BM.did){case Ao.OUTPUT_EXTREMES:BE.printExtremes();break;case Ao.OUTPUT_DATA_COUNT:U.visPrint("# Data Points in Total: "+BE.getGraphShapeCount());U.visPrint("Count of Chart is "+BE.getChartCountInCol()*BE.getChartCountInRow());break;case Ao.ENABLE_PARTIAL_RENDERING:BE.enablePartialRendering=true;BG.writeGlobalProperty(Ad.PARTIAL_RENDER,true);break;case Ao.DISABLE_PARTIAL_RENDERING:BE.enablePartialRendering=false;BG.writeGlobalProperty(Ad.PARTIAL_RENDER,false);break;case Ao.ENABLE_TIMER:BC.mUseTimer=true;break;case Ao.DISABLE_TIMER:BC.mUseTimer=false;break;case Ao.ENABLE_CE_TIMER:BG.enableCETimer=true;break;case Ao.DISABLE_CE_TIMER:BG.enableCETimer=false;break;default:break;}}});this.contextMenu=BL;BL.set("cmPos",BK);BL.render();BL.showContextMenu();if(BF!==null){AY.stopPropogation(BI,BJ);AY.preventDefault(BI,BJ);}},hideContextMenu:function(){var BE=this.contextMenu;if(BE){BE.hideContextMenu();}},onSplitterMoved:function(BE,BG){var BI,BH=this.manager,BJ=this.GMInfo,BK=BG.dock,BL=BG.type,BF=BG.depth,BN=0,BM=0;if(BL===G.GM_CHART_ROW){BH.resizeRow(BH.master,BF,BE);return ;}if(BL===G.GM_CHART_COL){BH.resizeCol(BH.master,BF,BE);return ;}if(BK===Al.RIGHT){BN=BE;}else{if(BK===Al.LEFT){BN=-BE;}else{if(BK===Al.TOP){BM=-BE;}else{BM=BE;}}}if((BL===G.GM_ROW_HEADER||BL===G.GM_YAXIS)&&BN===0){return ;}if((BL===G.GM_COL_HEADER||BL===G.GM_XAXIS)&&BM===0){return ;}if(BL===G.GM_RIGHT_BORDER||BL===G.GM_BOTTOM_BORDER){BH.resizeBorder(BH.master,BN,BM);return ;}if(BL===G.GM_ROW_HEADER){BI=this.getWidgetPropertyValue(Ad.SCALE_ROW_HEADERS)[BF];BI*=(1+BN/this.rowHeaderWArr[BF]);this.rowHeaderWArr[BF]+=BN;this.writeGlobalProperty(Ad.SCALE_ROW_HEADERS,BI,{key:BF});}else{if(BL===G.GM_COL_HEADER){BI=this.getWidgetPropertyValue(Ad.SCALE_COL_HEADERS)[BF];BI*=(1+BM/this.colHeaderHArr[BF]);this.colHeaderHArr[BF]+=BM;this.writeGlobalProperty(Ad.SCALE_COL_HEADERS,BI,{key:BF});}else{if(BL===G.GM_YAXIS){BI=this.getWidgetPropertyValue(Ad.SCALE_Y);BI*=(1+BN/BJ.yAxisWidth);BJ.yAxisWidth+=BN;this.yAxisFixed=true;this.writeGlobalProperty(Ad.SCALE_Y,BI);}else{if(BL===G.GM_YAXIS2){BI=this.getWidgetPropertyValue(Ad.SCALE_Y2);BI*=(1+BN/BJ.yAxis2Width);BJ.yAxis2Width+=BN;this.yAxis2Fixed=true;this.writeGlobalProperty(Ad.SCALE_Y2,BI);}else{if(BL===G.GM_XAXIS){BI=this.getWidgetPropertyValue(Ad.SCALE_X);BI*=(1+BM/BJ.xAxisHeight);BJ.xAxisHeight+=BM;this.xAxisFixed=true;this.writeGlobalProperty(Ad.SCALE_X,BI);}else{if(BL===G.GM_XAXIS2){BI=this.getWidgetPropertyValue(Ad.SCALE_X2);BI*=(1+BM/BJ.xAxis2Height);BJ.xAxis2Height+=BM;this.xAxis2Fixed=true;this.writeGlobalProperty(Ad.SCALE_X2,BI);}else{if(BL===G.GM_V_EXTRA_LINE){BI=this.getWidgetPropertyValue(Ad.SCALE_V_EXTRA_LINE);BI*=(1+BN/this.rowHeaderExtraW);this.rowHeaderExtraW+=BN;this.writeGlobalProperty(Ad.SCALE_V_EXTRA_LINE,BI);}}}}}}}},onLegendResized:function(BF){var BE=this.legend;if(BE){this.legendFixedW=this.legendW+BF;this.legendScale=(this.legendFixedW)/(this.legendW/this.legendScale);this.legendResized=true;this.writeGlobalProperty(Ad.SCALE_LEGEND_WIDTH,this.legendScale);}},onLegendClicked:function(BE){var BF=BE.action;if(BF==="close"){this.writeGlobalProperty(Ad.LEGEND_VISIBLE,false);}else{if(BF==="minimize"){this.writeGlobalProperty(Ad.LEGEND_MODE,J.MINIMIZED);}else{if(BF==="restore"){this.writeGlobalProperty(Ad.LEGEND_MODE,J.RESTORED);}}}},onControlResized:function(BE,BH,BF,BI){BC.startTimer({functionName:"VisGraphMatrix.onControlResized",purpose:"Partial update of GraphMatrix ("+this.k+")"});var BG=this.HTML5PROPS;if(BH){this.hEvalSize4Legend();}if(BE){this.hEvalSizeIteratively();}else{this.hEvalSize4GMArea();this.hDecideDataLabelRotation();}this.hCalcRadiusAndMargin(BF);this.hLayoutControls();this.hFillContents();this.updateRowValueBackground();this.updateColumnValueBackground();this.hUpdateLegend();if(BI){this.outputLog4PartialRender();this.manager.drawCharts();this.updateSelections();}this.hPlaceRHResizers(BG.MATRIX_LINE_V);this.hPlaceCHResizers(BG.MATRIX_LINE_H);this.hPlaceYResizers(BG.AXIS_LINE_Y);this.hPlaceXResizers(BG.AXIS_LINE_X);this.hPlaceYSplitters(BG.MATRIX_LINE_V);this.hPlaceOutBorders();this.hPlaceRowResizers(BG.MATRIX_LINE_H);this.hPlaceColResizers(BG.MATRIX_LINE_V);this.hPlaceHGridLines(BG.GRID_LINE_MAJOR,BG.GRID_LINE_MINOR);this.hPlaceVGridLines(BG.GRID_LINE_MAJOR,BG.GRID_LINE_MINOR);BC.endTimer();this.updateScrollBars();},configurePopup:function AX(BE,BF){BE.hostId=this.id;BE.hostElement=BF;},getPersistAction:function(BE){BE=BE||this.property.getXMLString();return Z.call(this,BE);},getDragData:function BB(BF){var BE=this.interactor;return BE.getDragData(BF,this);},deleteItem:function BD(BF){var BE=this.interactor;return BE.deleteItem(BF,this);},createAvatar:function Y(BI,BF){var BE=document.createElement("div"),BH=BF.src.data,BG=BH.item,BJ;if(!BG){return ;}if(!this.itemRenderer){this.itemRenderer=new mstrmojo.vi.ui.VIDragUnit();}BJ=this.itemRenderer.getUnitAvatar(BF);A6.addClass(BJ,"isAvatar");BE.appendChild(BJ);BE.style.margin="10px 0 0 10px";return BE;},positionAvatar:function r(BG){if(!this.avatar){return ;}var BE=this.avatar,BF=BE.style;BF.left=BG.x-BE.offsetWidth/2+"px";BF.top=BG.y-BE.offsetHeight-13+"px";},isDragValid:function AP(BE){var BF=BE.src.data;return !!(BF&&BF.item)||this._super(BE);},allowDrop:function K(BH){var BI=BH.src.data,BE=BI&&BI.src,BG=this.interactor;BH.dndGM=true;if(BE===At.DATASETS||BE===At.VIZ_EDITOR||BE===At.VIZ||BE===At.ALL_OBJECT_LIST){var BF=BI.items;if(BF&&BF.length===1){BG.getDropZonesOnGraph(BH,this);if(Object.keys(this.dropZonesOnGraph).length>0){return true;}}else{return true;}}return false;},isDragingMultipleObj:function H(BG){var BF,BH=BG.src.data,BE=BH&&BH.items;if(BG.isDragingMultipleObj===undefined){BG.isDragingMultipleObj=false;for(BF=1;BF<BE.length;BF++){if(BE[BF].t!==BE[BF-1].t){BG.isDragingMultipleObj=true;break;}}}return BG.isDragingMultipleObj;},ondragenter:function T(BG){var BL=this.isEmpty();if(BL){this.actualWidth=this.domNode.offsetWidth;this.actualHeight=this.domNode.offsetHeight;}var BK,BJ,BF=this.interactor;if(!this.dndHighlightCanvas){var BE=document.createElement("canvas"),BI=AY.position(this.domNode),BH=AY.position(this.domMainContainer);this.domNode.appendChild(BE);BE.style.position="absolute";BE.style.zIndex=1000;BE.width=BH.w||BI.w;BE.height=BH.h||BI.h;BE.style.top=(BH.y-BI.y)+"px";BE.style.left=(BH.x-BI.x)+"px";this.dndHighlightCanvas=BE;}if(!this.dndHighlightNodes){BK=document.createElement("div");this.domNode.appendChild(BK);BJ={placeholder:BK,top:0,left:0,zIndex:20,nodeCss:"gm-dnd-highlight-node"};this.dndHighlightNodes=new A8.DndReplaceNode(BJ);this.dndHighlightNodes.render();this.dndHighlightNodes.parent=this;}if(!this.dndTooltip){BK=document.createElement("div");document.body.appendChild(BK);BJ={placeholder:BK,contentNodeCssClass:"gm-dnd-replace-node-tooltip",boundary:document.body};this.dndTooltip=new A8.DndTooltip(BJ);this.dndTooltip.render();this.dndTooltip.parent=this;}if(!this.dndArrow){BK=document.createElement("div");document.body.appendChild(BK);this.dndArrow=BK;}BG.dndGM=true;this.setInteractive(false);BF.clearHoveredShape();BF.hideTooltip();BF.toggleHoverEffect(this,false);this.dndAsBlackBox=this.isDragingMultipleObj(BG);if(!this.isDragingMultipleObj(BG)){BF.calculateDropZoneOnGraphRange(this,BG);this.ondragover(BG);}if(this._super){this._super(BG);}},ondragover:function AW(BF){var BE=this.interactor;BF.dndGM=true;if(!this.isDragingMultipleObj(BF)){BE.clearHighlightDropZoneOnGraph(this);if(BE.findEnteredDropZoneOnGraph(BF,this)){BE.findTargetInDropZoneOnGraph(BF,this);BE.highlightDropZoneOnGraph(BF,this);}}BE.updateAvatarIcon(BF);if(this._super){this._super(BF);}},ondragleave:function AM(BF){BF.dndGM=true;var BG=AY.position(this.domMainContainer),BH=BF.tgt&&BF.tgt.pos,BE=(BH.x>BG.x&&BH.x<BG.x+BG.w)&&(BH.y>BG.y&&BH.y<BG.y+BG.h);if(BE){BF.tgt.widget=this;}else{this._super(BF);}},ondrop:function E(BF){var BE=this.interactor;BF.dndGM=true;BE.ondrop(BF,this);this._super(BF);},cleanUpAfterTarget:function As(BE){BE.dndGM=true;this._super(BE);this.setInteractive(true);this.interactor.toggleHoverEffect(this,true);if(this.domNode.contains(this.dndHighlightCanvas)){this.domNode.removeChild(this.dndHighlightCanvas);}delete this.dndHighlightCanvas;if(document.body.contains(this.dndArrow)){document.body.removeChild(this.dndArrow);}delete this.dndArrow;if(this.dndHighlightNodes){this.dndHighlightNodes.destroy();}delete this.dndHighlightNodes;if(this.dndTooltip){this.dndTooltip.destroy();}delete this.dndTooltip;this.dropZonesOnGraph=null;this.currEnteredDropZoneID=null;},toggleContainerCls:function(BF,BE){var BG=this.domMainContainer;if(BF){A6.addClass(BG,BE);}else{A6.removeClass(BG,BE);}},toggleContainerCls2:function(BF,BE){var BG=this.domMainContainer;if(BF){A6.addClass(BG,BE);}else{A6.removeClass(BG,BE);}},updateSelections:function(){this.highlight(this.getSelectionType(),this.getSelectionHash());},clearSelectedShapesAndCharts:function(){var BE=this.interactor,BF=this.manager;if(BF){BF.dismissLassoSelector();}if(BE){BE.clearSelectedShapes();BE.clearSelectedCharts();}},clearSelectedHighlights:function(BG){var BE=this.interactor,BF=this.manager;if(BF){BF.dismissLassoSelector();}if(BE){BE.clearSelectedShapes();BE.clearSelectedCharts();BE.clearSelectedTargets();}if(!BG){this.GMController.highLightShapeIndex={};}},toggleShapeSelectionIndex:function(BK,BF){var BM,BJ,BH,BN,BI,BO,BG,BL=this.GMController,BE=BL.highLightShapeIndex;BL.resetHighLightIndex=false;if(BK.isPie){BM=BK.sPieDP.graphCell;BN=BK.sliceIdx;}else{BM=BK.gc;}BI=BM.dp;BO=BI.rowIndex;BG=BI.colIndex;BJ=BM.gID;BH=BM.sID;if(BE[BO]===undefined){BE[BO]={};}if(BE[BO][BG]===undefined){BE[BO][BG]={};}BE=BE[BO][BG];if(BE[BJ]===undefined){BE[BJ]={};}if(BK.isPie){if(BE[BJ][BH]===undefined){BE[BJ][BH]={};}BE[BJ][BH][BN]=BF;}else{BE[BJ][BH]=BF;}},getNumericAxisOptions:function(BE){var BF=this.GMController;return BF.getNumericAxisOptions(BE);},getStyleEffectsOptions:function(){var BE=this.GMController;return BE.getStyleEffectsOptions();},getColorByOptions:function(){var BF=this.GMController,BE=BF.getColorByOptions();if(!BE){return[];}return BE.subOptions;},getTitleRMCPopup:function(){if(!this.parent.boxContent.formattingMode){return ;}var BE={name:"titleBarRMC"};this.raiseEvent(BE);return f.call(this,false);},getFontToolbarProps:function(){return{cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,width:"381px",height:"22px"};},getChartInfo:function(){return this.GMController.getChartInfo();},getHostStructure:function(){return this.GMController.getHostStructure();},getDependentMetricOptions:function(){return this.GMController.getDependentMetricOptions();},getIndependentMetricOptions:function(){return this.GMController.getIndependentMetricOptions();},getReferenceAxisOption:function(){return this.GMController.getReferenceAxisOption();},getRealReferenceOptionFromAxisOption:function(BF,BE,BG){return this.GMController.getRealReferenceOptionFromAxisOption(BF,BE,BG);},getReferenceLineOptions:function(){return this.GMController.getReferenceLineOptions();},getEnabledReferenceLineOptions:function(BE){return this.GMController.getEnabledReferenceLineOptions(BE);},getShowDataLabelOptions:function(){return this.GMController.getShowDataLabelOptions();},isSeasonalityEnabled:function(){return this.GMController.isSeasonalityEnabled();},formatAsAxisLabel:function(BE,BF){return this.GMController.formatAsAxisLabel(BE,BF);},isShapeCombonation:function(){var BF=this.GMController,BE=BF.metricShapeArr,BI=false,BH,BJ=(BE&&BE.length)||0,BG;if(BF.enableCombiChart){if(BJ===0){BI=true;}else{if(BJ===1){BI=false;}else{for(BH=1;BH<BJ;BH++){if(BE[BH]!==BE[BH-1]){BI=true;break;}}}}if(!BI){BG=BE[0];}}return{isComb:BI,shapeType:BG};},isMajorGridLineShow:function(){var BF=this.getWidgetPropertyValue(AG.MAJOR_GRID_LINES_SHOW),BG=this.GMInfo,BE=false;if(BF===AL.AUTO){BE=BG&&(BG.nRows===1&&BG.nCols===1);}else{if(BF===AL.SHOW){BE=true;}}return BE;},getReferenceOptionForMetricId:function(BF){var BH=false,BG=this.getReferenceAxisOption(),BE;BG.forEach(function(BJ){var BI=BJ.mos;BI.forEach(function(BK){if(BK.mId===BF){BE=BJ;BH=true;return false;}});if(BH){return false;}});return BE;},copyTrendLineInfoForSwap:function(BI,BK){var BG,BF,BQ,BP,BS,BR,BN=[],BM=[],BJ=[],BO,BL,BH=4,BE="00000000000000000000000000000000";b.forEach(BK.items,function(BT){if(BT.t===BH&&BT.id!==BE){BN.push(BT);}});b.forEach(BI.items,function(BT){if(BT.t===BH&&BT.id!==BE){BM.push(BT);}});BO=Math.min(BM.length,BN.length);for(BL=0;BL<BO;BL++){BG=A4.call(this,BN[BL].did,true);BQ=this.readGlobalProperty(Ad.TREND_LINE_DEF,BG);BS=BQ.jsonObj;if(BS.trdEnabled){return BJ;}}for(BL=0;BL<BO;BL++){BF=A4.call(this,BM[BL].did);BP=this.readGlobalProperty(Ad.TREND_LINE_DEF,BF);BR=BP.jsonObj;if(BR.trdEnabled){BG=A4.call(this,BN[BL].did,true);BQ=this.readGlobalProperty(Ad.TREND_LINE_DEF,BG);BQ.setProperty(Ad.TREND_ENABLED,true);BQ.setProperty(Ad.TREND_LEVEL,BR.trdLvl);BQ.setProperty(Ad.TREND_TYPE,BR.trdTp);if(BR.trdDgr){BQ.setProperty(Ad.TREND_POLY_DEGREE,BR.trdDgr);}this.collectTrendLineAction(BQ.jsonObj,BJ,BG.key);}}return BJ;},queryTrendLineStatusForMetric:function(BF){var BE=A4.call(this,BF),BG=this.readGlobalProperty(Ad.TREND_LINE_DEF,BE);return(BG.jsonObj[Ad.TREND_ENABLED]);},switchOnOffTrendLineForMetric:function(BG,BE){if(BE){this.checkCustomScaleNotificationForTrendLine(BG);}var BF=A4.call(this,BG),BH=this.readGlobalProperty(Ad.TREND_LINE_DEF,BF);BH.setProperty(Ad.TREND_ENABLED,BE);this.writeGlobalProperty(Ad.TREND_LINE_DEF,BH,BF);},getExistingRefLineOptions:function(BF){var BE=this.getReferenceOptionForMetricId(BF);return this.getEnabledReferenceLineOptions(BE);},getExistingRefLineOptionsForAxis:function(BE){var BF=M.call(this,BE);return this.getEnabledReferenceLineOptions(BF);},getAvailableRefLineTypes:function(BF){if(BC.isIgnoredMetric(this,this.GMController.getMetricIndexFromID(BF))){return[];}var BG=this.getExistingRefLineOptions(BF),BE=this.getChartInfo().isBubbleOrScatter?[A8.EnumRefLineModelType.FIRST,A8.EnumRefLineModelType.LAST]:[];return h.valarray(A8.EnumRefLineModelType).filter(function(BH){return BE.indexOf(BH)===-1&&(BH===A8.EnumRefLineModelType.CONST||b.find(BG,"refType",BH)===-1);});},toggleRefLineEnabled:function(BH,BF,BG,BK,BL){if(BG){this.checkCustomScaleNotificationForReferenceLine(BH);}var BI=this.getReferenceOptionForMetricId(BH),BE=this.getRealReferenceOptionFromAxisOption(BI,BF,BL),BJ=this.readGlobalProperty(Ad.REF_LINE_DEF,BE);BJ.setProperty(Ad.REF_ENABLED,BG);if(BF===A8.EnumRefLineModelType.CONST){BJ.setProperty(Ad.REF_CONST_VALUE,q.parseNumeric(BK));}this.writeGlobalProperty(Ad.REF_LINE_DEF,BJ,BE);},copyRefLineInfoForSwap:function p(){var BI=this.GMController,BK=BI.getChartInfo(),BE=0;if(!BK.isABL||!BI.isStacked||BI.splitPlottingMetrics){return[];}var BH=this.getReferenceAxisOption(),BF,BG=this,BJ=[];if(BH){b.forEach(BH,function(BM){BF=BM.key;if(BF==="YAxis"||BF==="Y2Axis"||BF==="XAxis"||BF==="X2Axis"){BE=BF.search("2")>=0?1:0;if(!BI.hasRefLineInOppositeAxis(BE)){var BL=BG.getEnabledReferenceLineOptions(BM);b.forEach(BL,function(BN){var BO=BG.readGlobalProperty(Ad.REF_LINE_DEF,BN),BQ=BO.jsonObj;BQ.dropzoneId=(BF==="YAxis"||BF==="Y2Axis")?4:3;BQ.subAxis=BE;if(BQ.refEnabled){var BP=h.clone(BQ);BP.dropzoneId=BQ.dropzoneId===3?4:3;BG.collectAddRefLineAction(BP,BJ);}});}}});}return BJ;},updateAfterKeepOnlyAndShow:function a(Bf,BL){var Bi=this,Bb=1,BX=2,BZ=3,BO=4,BU=5;var BI=Bi.model,Bc=Bi.getDocModel(),BY=Bc.getDataService(),BQ=BY.newUpdate(this);var BR={act:"updateTemplate",keyContext:Bi.k,actions:[]},BK,BS=true,Ba=BR.actions,Bh=Bi.GMController,BT=Bh.getChartInfo(),Bd=BT.tp,BV=Bi.zonesModel,BW=BV.gmZones,BP={did:undefined,t:12},BE={id:undefined,items:[]},Bj=BV.getUpdateCallback(),BM=this.getXTabRefreshCallBack();if(BL){BE.id=BL.isRowAttribute?Bb:BX;BP.did=Bf.did;BP.t=Bf.t;if(Bc.prefs&&Bc.prefs.rtprnt){BS=parseInt(Bc.prefs.rtprnt,10)===1;}else{if(BI.xtab.defn.tkp!==undefined){BS=parseInt(BI.xtab.defn.tkp,10)===-1;}}var BH,Be=BW.getZoneModelByZoneId(BE.id);Be.items.forEach(function(Bk){if(Bk.did===BL.tid){BH=Bk;return false;}});if(BS){Ba.push(BV.getAddDZUnitAction(BE,BP,BH?BH.uidx+1:0));}else{if(BH){Ba.push(BW.getRemoveDropZoneUnitAction(BE,BH));Ba.push(BV.getAddDZUnitAction(BE,BP,BH.uidx));}}}else{if(Bd===V.BUBBLE||Bd===V.SCATTER){BE.id=BU;BP.did=Bf.did;BP.t=Bf.t;BK=BW.getItemCountInZone(BE.id);Ba.push(BV.getAddDZUnitAction(BE,BP,BK));}else{if(BT.isABL||Bd===V.GRID){if(Bd===V.GRID||BT.dirc===mstrmojo.gm.EnumABLDirection.VERTICAL){b.forEach(BV.moveAttributesToZone(BZ,BX),function(Bk){Ba.push(Bk);});BE.id=BZ;BP.did=Bf.did;BP.t=Bf.t;Ba.push(BV.getAddDZUnitAction(BE,BP,0));}else{b.forEach(BV.moveAttributesToZone(BO,Bb),function(Bk){Ba.push(Bk);});BE.id=BO;BP.did=Bf.did;BP.t=Bf.t;Ba.push(BV.getAddDZUnitAction(BE,BP,0));}}}}BQ.add(BR,A9(Bj,BM));var BJ=Bi.getSelections(),BF=BI.getSelectorDataFromViewFilter(Bi.model.data.vfexpr).concat({keepOnly:true,data:BJ}),Bg=AD.call(Bi),BG=BI.getKeepOnlyActionsForAssociatedNodes(BF,Bg);if(BJ&&BJ.length>0){BQ.add(BG.actions,BG.callback);}Ap(Bi).execute({execute:function BN(){this.submitUpdate(BQ);},urInfo:{callback:BQ.callback}});},isClearAllDisabled:function A1(){var BE=this.findSelectorControl();if(!!BE&&!BE.showall){return true;}return false;},execFormatHandler:function(){var BE=this.interactor;if(BE){BE.formatHandler();}},onNDECreated:function(BF){var BH=BF[0],BG=this.model.data.gts.row.concat(this.model.data.gts.col),BE;this.clearSelections();b.forEach(BG,function(BI){if((BI.t===47||BI.otp===47)&&BI.ost===12033&&BI.id===BH.unitId){b.forEach(BI.es,function(BJ){if(BJ.n===BH.n&&BJ.id&&BJ.id.indexOf(BH.id)>-1){BE=BJ;}if(BE){return false;}});if(BE){return false;}}});if(BE){this.addAttributeSelection(BH.unitId,BE.id,BE.n);this.interactor.doHighlight(t.vi.ui.rw.SelectionType.ATTS,h.clone(this.getSelectionHash()));}},checkCustomScaleNotificationForTrendLine:function(BE){if(this.checkCustomScale(BE)){this.trendLineNotifications.push(mstrmojo.desc(14443,"The trend line might not be displayed, as a custom scale has been applied to this metric."));}},checkCustomScaleNotificationForReferenceLine:function(BE){if(this.checkCustomScale(BE)){this.referenceLineNotifications.push(mstrmojo.desc(14444,"The reference line might not be displayed, as a custom scale has been applied to this metric."));}}});}());