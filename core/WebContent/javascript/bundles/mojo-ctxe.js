(function(){mstrmojo.boxmodel=mstrmojo.provide("mstrmojo.boxmodel",{rangeIntersect:function E(J,H,I,G){if(J<I){return I<=H;}if(J>I){return J<=G;}return true;},px2Inches:function C(H,G){G=parseInt(G,10);return mstrmojo.NumberFormat.getInstance(mstrConfig.decimalSep,mstrConfig.thousandsSep).format(parseFloat((G/H.zf/H.dpi).toFixed(4)));},offset:function F(I,H){var L=I,G=0,K=0;while(I){G+=I.offsetLeft;K+=I.offsetTop;I=I.offsetParent;if(I===H){break;}}var J;for(J=L&&L.parentNode;J&&J!==H;J=J.parentNode){if(J.scrollTop){K-=J.scrollTop;}if(J.scrollLeft){G-=J.scrollLeft;}}return{left:G,top:K};},convert2px:function D(K,I){if(!/px$/.test(I)){var H=document.createElement("img"),G=H.style,J;G.zIndex=-1;G.left=I;K.appendChild(H);J=G.pixelLeft;K.removeChild(H);return J+"px";}return I;},getEdgeQuadrantByPoint:function B(I,H){var G=H.x-I.x,M=H.y-I.y,J=I.w,L=I.h,K=[["Left","Bottom"],["Top","Right"]];if(M>L/J*G){K=K[0];}else{K=K[1];}return(M<-L/J*G+L)?K[0]:K[1];},isPtInPolygon:function A(I,K){var G=I.x,J=I.y,H=false;K.forEach(function(N,L){var M=K[L-1]||K[K.length-1];if((N.y>=J)!==(M.y>=J)){if((G<(M.x-N.x)*(J-N.y)/(M.y-N.y)+N.x)){H=!H;}}});return H;}});}());mstrmojo.LoadedExternalJSURLs={};function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function requiresMethod(B){if(!B){return false;}if(typeof this[B]==="function"){return true;}var A=this[B]||(this.methods&&(this.methods[B]||this.methods["*"]));if(typeof A==="string"){this.requiresCls(A);return typeof this[B]==="function";}return false;},requiresCls:function req(mixins,callback){if(mixins){if(typeof mixins==="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin,i,len;for(i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(C,B){var A=this[C];if(A){var E,D=false;if(typeof A==="string"){E=mstrmojo.registry.ref(A);this[C]=E;D=true;}else{E=A;}if(E&&(D||B)){E.parent=this;if(E.startup){E.startup();}}return E;}return null;},requiresExternalScripts:function requiresExternalScripts(F,G,C){if(F&&F instanceof Array){if(F.length===0){if(G){G.call(C);}return false;}if(F[0]&&F[0].forceReload===false&&mstrmojo.LoadedExternalJSURLs[F[0].url]){F.splice(0,1);return this.requiresExternalScripts(F,G,C);}var A=document.createElement("script"),D=!!document.all,B=F[0].url;if(B.substr(0,7)==="file://"){B=B.substr(7);}else{if(mstrApp.isSingleTier&&B.substr(0,4)!=="http"){B="http:"+B;}}A.type="text/javascript";A.src=B;if(!F[0].callbackParamName){if(D){A.onreadystatechange=function(){if(A.readyState==="loaded"||A.readyState==="complete"){A.onreadystatechange=null;if(F.length>1){mstrmojo.LoadedExternalJSURLs[F.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(F,G);}else{if(F.length===1){mstrmojo.LoadedExternalJSURLs[F[0].url]=true;if(G){G.call(C);}}}}};}else{A.onload=function(){A.onload=null;if(F.length>1){mstrmojo.LoadedExternalJSURLs[F.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(F,G);}else{if(F.length===1){mstrmojo.LoadedExternalJSURLs[F[0].url]=true;if(G){G.call(C);}}}};}}else{if(F[0].callbackParamName.length!==0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy===true){var E=this;window.setTimeout(function(){E.requiresExternalScripts(F,G,C);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;A.src+="&"+F[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=F;mstrmojo._LoadsScript.callback=G;mstrmojo._LoadsScript.esScritsContext=C;}}document.getElementsByTagName("head")[0].appendChild(A);}}});mstrmojo.mstr.EnumDSSXMLObjectTypes={Generic:-2,Unknown:-1,Reserved:0,Filter:1,Template:2,ReportDefinition:3,Metric:4,Style:6,AggMetric:7,Folder:8,SubscriptionDevice:9,Prompt:10,Function:11,Attribute:12,Fact:13,Dimension:14,Table:15,DatamartReport:16,FactGroup:17,Shortcut:18,Resolution:19,Monitor:20,AttributeForm:21,Schema:22,Format:23,Catalog:24,CatalogDefn:25,Column:26,PropertySet:28,DBRole:29,DBLogin:30,DBConnection:31,Project:32,ServerDef:33,User:34,Configuration:36,Request:37,Script:38,Search:39,SearchFolder:40,Datamart:41,FunctionPackageDefinition:42,Role:43,SecurityRole:44,Locale:45,Consolidation:47,ConsolidationElement:48,ScheduleEvent:49,ScheduleObject:50,ScheduleTrigger:51,Link:52,DbTable:53,TableSource:54,DocumentDefinition:55,DrillMap:56,DBMS:57,MDSecurityFilter:58,PromptAnswer:59,PromptAnswers:60,ObjectTag:65,ReservedLastOne:66};(function(){function Q(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.lastChild)?U.lastChild:F(U,S);return T?D(T,S):null;}}function F(S,R){return(S===R)?null:(S.previousSibling||F(S.parentNode,R));}function D(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.lastChild){return D(S.lastChild);}else{return D(F(S,R));}}}function I(R){return R.textContent||R.nodeValue||R.innerText;}function M(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.firstChild)?U.firstChild:B(U,S);return T?E(T,S):null;}}function B(S,R){return(S===R)?null:(S.nextSibling||B(S.parentNode,R));}function E(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.firstChild){return E(S.firstChild);}else{return E(B(S,R));}}}mstrmojo.range=mstrmojo.provide("mstrmojo.range",{EDGE:{EDGE_BEGIN:1,EDGE_END:2,EDGE_MIDDLE:-1},getEdgeInfo:function P(T,U){var R=0,S;if(T.nodeType===1){if(window.getSelection){S=document.createRange();S.selectNode(T);R=S.toString().length;}else{S=document.body.createTextRange();S.moveToElementText(T);R=S.text.length;}}else{R=I(T).length;}return U===R?this.EDGE.EDGE_END:(U===0?this.EDGE.EDGE_BEGIN:this.EDGE.EDGE_MIDDLE);},collapseOnNode:function K(U,S){if(!U.offsetParent){return ;}var T=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(U);R.collapse(S);T.removeAllRanges();T.addRange(R);}else{R.moveToElementText(U);R.collapse(S);R.select();}},collapseOnTextNode:function L(U,V){var T=this.getSelection(),S=this.getRange();if(window.getSelection){var R=M(U,true);S.setStart(R,V);S.collapse(true);T.removeAllRanges();T.addRange(S);}else{S.moveToElementText(U);S.collapse(true);S.move("character",V);S.select();}},collapseOnTextNodeIE:function C(S,T){var U=M(S,true),R;while(U!==null){R=I(U).length;if(R>=T){this.collapseOnTextNode(U,T);break;}else{T-=R;U=M(U,false);}}},getRangeInfo:function J(X,e){var Z=null,j,c=this.getRange(),b;if(X&&X===c.startContainer){var g=c.startContainer.firstChild,U=g&&g.firstChild,d=U&&U.firstChild;if(d){c.setStart(d,c.startOffset);c.setEnd(d,c.endOffset);}}if(window.getSelection){var W=function(l,o,n){var k=l.cloneRange();k.collapse(n);k.setStartBefore(o);return k.toString().length;},S=c.startContainer,f=c.startOffset;if(S.nodeType===1){f=W(c,S,true);}Z={collapsed:c.collapsed,startContainer:S,startOffset:e?e.startOffset:f};if(!c.collapsed){var V=c.endContainer,R=c.endOffset;if(V.nodeType===1){R=W(c,V,false);}Z.endContainer=V;Z.endOffset=R;}Z.range=c;}else{var i,a,Y=function(o,p){var n=o.duplicate(),k=document.body.createTextRange(),l;n.collapse(p);l=n.parentElement();k.moveToElementText(l);k.setEndPoint("EndToStart",n);return{container:l,offset:k.text.length};},h=Y(c,true),T;Z={collapsed:(c.compareEndPoints("StartToEnd",c)===0),startContainer:h.container,startOffset:h.offset};if(!Z.collapsed){T=Y(c,false);Z.endContainer=T.container;Z.endOffset=T.offset;}}return Z;},collapse:function O(S){if(window.getSelection){var T=this.getSelection();if(S){T.collapseToStart();}else{T.collapseToEnd();}}else{var R=this.getRange();R.collapse(S);R.select();}},selectSingleNode:function H(T){var S=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(T);S.removeAllRanges();S.addRange(R);}else{R.moveToElementText(T);R.select();}},selectMultipleNodes:function N(W,S,X,U){var V=this.getSelection(),T=this.getRange();if(window.getSelection){T.setStart(W,S);T.setEnd(X,U);V.removeAllRanges();V.addRange(T);}else{W=(W.nodeType===3)?W.parentNode:W;T.moveToElementText(W);T.move("character",S);X=(X.nodeType===3)?X.parentNode:X;var R=document.body.createTextRange();R.moveToElementText(X);R.move("character",U);T.setEndPoint("EndToStart",R);T.select();}},getSelection:function G(){if(window.getSelection){return window.getSelection();}else{return document.selection;}},getRange:function A(){if(window.getSelection){selection=window.getSelection();if(selection.rangeCount>0){return selection.getRangeAt(0);}else{return document.createRange();}}else{return document.selection.createRange();}}});}());(function(){mstrmojo._HasPopup=mstrmojo.provide("mstrmojo._HasPopup",{_mixinName:"mstrmojo._HasPopup",_lastOpened:null,openPopup:function A(G,E){var C=!!G&&(typeof G==="string")&&!G.match(/\./)&&!!this[G],D=mstrmojo.registry.ref(C?this[G]:G);if(D&&D.open){if(C){this[G]=D;}if(D.disposable!==false){this.addDisposable(D);}var J=D.slot&&this[D.slot];if(J){if(D.parent!==this){if(this.addChildren){this.addChildren([D]);}else{var I=false,F=D.domNode||D.placeholder;if(F&&typeof F==="string"){F=document.getElementById(F);}if(!F){I=true;F=document.createElement("span");D.placeholder=F;}if(I||(F.parentNode!==J)){J.appendChild(F);}}}}try{D.open(this,E);}catch(H){console.log("Error opening popup: "+H);}this._lastOpened=D;}},closePopup:function B(){var C=this._lastOpened;if(C&&C.visible&&C.close){C.close();delete this._lastOpened;}}});}());(function(){function AG(Am,An){return An||(Am||window).event;}mstrmojo.PositionType=null;var Aj=!!document.all,AE=document.documentMode,q=navigator.userAgent,i=false,g=false,e=false,d=false,R=false,s=false;if(Aj){if(window.mstrConfig&&mstrConfig.isEdgeModeEnabled){i=!!q.match(/MSIE 6/);g=((!!q.match(/MSIE 7/)&&!AE)||AE===7);e=(AE===8);d=(AE===9);R=(AE===10);s=(!AE||AE<=9);}else{i=!!q.match(/MSIE 6/);g=!!q.match(/MSIE 7/);e=!!q.match(/MSIE 8/);d=!!q.match(/MSIE 9/);R=!!q.match(/MSIE 10/);s=!R;}}var c=!Aj&&!!q.match(/Firefox/),k=0,r=!!q.match(/Android/),Aa=!!q.match(/iPad/),AK=!!q.match(/iPhone/),AS=!!document.createTouch||r,p=!!q.match(/PlayBook/),O=!!q.match(/Windows Phone/),Ak=!Aj&&!!q.match(/Trident.*rv/),b=c?"-moz-":(Aj||Ak)?"":"-webkit-",AF=c?"Moz":(R||Ak)?"":Aj?"ms":"webkit",AP=((R||Ak)?"t":"T"),AJ=AF+AP+"ransition";function Ae(){return AF+AP+"ransform";}function AC(){return AJ+"Property";}function S(){return AJ+"Duration";}function N(){return(R||c)?"transitionend":"webkitTransitionEnd";}function f(){return AF+"BoxShadow";}var Ah=Ae(),AX=AC(),x=S(),A=N(),n=f();function AO(){if(!k&&c){var Am=q.match(/.*Firefox\/([\d|\.]*).*/);if(Am){k=parseFloat(Am[1]);}}return k;}function AU(){var An=0,Ar=0,Ao=window,Ap=document,Am=Ap.body,Aq=Ap.documentElement;if(typeof Ao.pageYOffset==="number"){Ar=Ao.pageYOffset;An=Ao.pageXOffset;}else{if(Am&&(Am.scrollLeft||Am.scrollTop)){Ar=Am.scrollTop;An=Am.scrollLeft;}else{if(Aq&&(Aq.scrollLeft||Aq.scrollTop)){Ar=Aq.scrollTop;An=Aq.scrollLeft;}}}return{x:An,y:Ar};}function AD(Am){Am=Am||0;Am=String(Am);return((Am.indexOf("%",0))!==-1)?Am:(Am+"px");}function AM(Ao,As,Ar,Aq,Ap){if(!mstrmojo.dom.isWinPhone){Aq=(Aq||false||this.isHWAccelerated);}else{Aq=false;}var An=Ap+(Aq?"3d":"")+"(",Am=Aq?(","+Ar+")"):")";return An+Ao+","+As+Am;}var AY=2,V=3;function t(As,Ar,Av){var Au=As.style,Ao=Au.display,Aq=this.windowDim(),Ap=AU();Au.display="block";var At=Aq.w-As.clientWidth,Aw=Math.max(Aq.h-As.clientHeight,0),Am={4:0,5:At,3:At/2},An={1:0,3:Aw/2,2:Aw};Au.left=Am[Ar]+Ap.x+"px";Au.top=An[Av]+Ap.y+"px";Au.display=Ao;}function l(Ap,Ao,Aq,Am){if(Ap.addEventListener){return Ap.addEventListener(Ao,Aq,!!Am);}Aq._id=Aq._id||l.guid++;Ap.events=Ap.events||{};var An=Ap.events[Ao];if(!An){An=Ap.events[Ao]={};if(Ap["on"+Ao]){An[0]=Ap["on"+Ao];}}An[Aq._id]=Aq;function Ar(Au){Au=Au||window.event;var At=this.events[Au.type],As;for(As in At){At[As].call(this,Au);}}Ap["on"+Ao]=Ar;}l.guid=1;function h(Ao,An,Ap,Am){if(!Ao){return ;}if(Ao.removeEventListener){Ao.removeEventListener(An,Ap,!!Am);}else{if(Ao.events&&Ao.events[An]){delete Ao.events[An][Ap._id];}}}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:q,isIE:Aj,isIE6:i,isIE7:g,isIE8:e,isIE9:d,isIE10:R,isIEW3C:Ak,isNSIE:s,isDXIE:s,isFF:c,isWK:!!q.match(/AppleWebKit/),isSafari:!!q.match(/Safari/)&&!q.match(/Chrome/),isChrome:!!q.match(/AppleWebKit/)&&q.match(/Chrome/),isHWAccelerated:!r,isAndroid:r,isIPad:Aa,isPlayBook:p,isWinPhone:O,isMobile:Aa||AK||O||r,supportsTouches:AS,TOUCHSTART:AS?"touchstart":"mousedown",TOUCHMOVE:AS?"touchmove":"mousemove",TOUCHEND:AS?"touchend":"mouseup",TOUCHCANCEL:AS?"touchcancel":"",RESIZE:AS?"orientationchange":"resize",CSS3_PREFIX:b,CSS3_BOXSHADOW:n,CSS3_TRANSFORM:Ah,CSS3_TRANSITION:AJ,CSS3_TRANSITION_PROPERTY:AX,CSS3_TRANSITION_DURATION:x,CSS3_TRANSITION_END:A,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh"},htmlFeatures:{FILE_READER:"fr"},MOUSE_BUTTON:{LEFT:1,RIGHT:2},supports:function B(Am){var An=this.isFF&&AO();switch(Am){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||An>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||An>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);case this.htmlFeatures.FILE_READER:return !!(window.FileReader);}return false;},getOSInfo:function AL(){var Ar="Unknown",An=navigator.appVersion,Aq=navigator.userAgent,Ap=Ar;var Am=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];var Ao;for(Ao=0;Ao<Am.length;Ao++){var At=Am[Ao];if(At.r.test(Aq)){Ap=At.s;break;}}var As=Ar;if(/Windows/.test(Ap)){As=/Windows (.*)/.exec(Ap)[1];Ap="Windows";}switch(Ap){case"Mac OS X":As=/Mac OS X (10[\.\_\d]+)/.exec(Aq)[1];break;case"Android":As=/Android ([\.\_\d]+)/.exec(Aq)[1];break;case"iOS":As=/OS (\d+)_(\d+)_?(\d+)?/.exec(An);As=As[1]+"."+As[2]+"."+(As[3]|0);break;}return{name:Ap,version:As};},transEndEvtNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},replace:function o(Ao,Am){if(Ao&&Am){var An=Ao.parentNode;if(An){An.replaceChild(Am,Ao);}}return Am;},attachEvent:function X(Ao,An,Ap,Am){if(Ao.addEventListener){return Ao.addEventListener(An,Ap,!!Am);}return Ao.attachEvent("on"+An,Ap);},detachEvent:function AW(Ao,An,Ap,Am){if(!Ao){return ;}if(Ao.removeEventListener){Ao.removeEventListener(An,Ap,!!Am);}else{Ao.detachEvent("on"+An,Ap);}},attachMarkupEvent:function v(Ap,Ao,Am){var An=function(Aq){mstrmojo.all[Ap].captureDomEvent(Am,window,Aq);};this.attachEvent(Ao,Am,An);return An;},attachOneTimeEvent:function W(Ap,An,Aq,Am){var Ao=function(Ar){Aq(Ar);if(Am){h(this,An,Ao);}else{mstrmojo.dom.detachEvent(this,An,Ao);}};if(Am){l(Ap,An,Ao);}else{this.attachEvent(Ap,An,Ao);}Ap=null;return Ao;},attachMouseMoveEvents:function D(Ap,Am){var Ao=this,An=function(Aq){if(Am){Am(Aq);}Ao.detachEvent(document,"mousemove",Ap);Ao.detachEvent(document,"mouseup",An);};Ao.attachEvent(document,"mousemove",Ap);Ao.attachEvent(document,"mouseup",An);},captureDomEvent:function AI(Ar,Ap,An,Aq,Ao){var Am=mstrmojo.all[Ar];if(Am){Am.captureDomEvent(Ap,An,Aq,Ao);}},translate:function L(Ao,An,Ar,Aq,Am,Ap){Am=(Am&&" "+Am)||"";Ao.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(An,Ar,Aq,Ap)+Am;},createTranslateString:function P(Am,Ap,Ao,An){Am=AD(Am);Ap=AD(Ap);Ao=AD(Ao);return AM(Am,Ap,Ao,An,"translate");},createScaleString:function u(Am,Ap,Ao,An){Am=Am||0;Ap=Ap||0;Ao=Ao||0;return AM(Am,Ap,Ao,An,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function C(Ao,Am,Ap,Ar){var An=Ao.id+"-"+Am,Aq=this._bufferConnects[An];if(!Aq){Aq=this._bufferConnects[An]={elId:Ao.id,eventName:Am,timer:null,bufferSize:Ar,listeners:[],callback:function(As){mstrmojo.dom._callback(As,mstrmojo.global,An);return true;}};this.attachEvent(Ao,Am,Aq.callback);}Aq.listeners.push(Ap);},_callback:function Ad(Aq,Am,Ao){var Ap=this._bufferConnects[Ao],Ar=Ap&&Ap.timer;if(Ap&&!Ar){var An=(Ap.bufferSize===null)?this._bufferSize:Ap.bufferSize;if(Ap.bufferSize){Ap.timer=Am.setTimeout(function(){mstrmojo.dom.updateBuffers(Ao);},An);}else{mstrmojo.dom.updateBuffers(Ao);}}},updateBuffers:function H(Ap){var Aq=this._bufferConnects[Ap],An=Aq&&Aq.listeners,Am=(An&&An.length)||0,Ao;for(Ao=0;Ao<Am;Ao++){An[Ao]();}if(Aq&&Aq.timer){delete Aq.timer;}},detachBufferedEvent:function AA(An,Ar,As){if(!An){return ;}var Au=An.id+"-"+Ar,Ao=this._bufferConnects[Au],Aq=Ao&&Ao.listeners,At=(Aq&&Aq.length)||0,Ap;if(At){for(Ap=At-1;Ap>-1;Ap--){if(Aq[Ap]===As){Aq.splice(Ap,1);}}if(!Aq.length){this.detachEvent(An,Ar,Ao.callback);delete this._bufferConnects[Au];if(Ao.timer){var Am=mstrmojo.global;Am.clearTimeout(Ao.timer);}}}},eventTarget:function y(Am,An){An=AG(Am,An);return An.target||An.srcElement;},isMac:function w(){return this.getOSInfo().name.toLowerCase().indexOf("mac")>=0;},isMetaKey:function J(Am,Ap){var Ao=this.getOSInfo().name.toLowerCase().indexOf("mac")>=0,An=AG(Am,Ap)||{};return(An.ctrlKey&&!Ao)||(An.metaKey&&Ao);},ctrlKey:function Ag(Am,An){return(AG(Am,An)||{}).ctrlKey;},shiftKey:function z(Am,An){return(AG(Am,An)||{}).shiftKey;},metaKey:function Z(Am,An){return(AG(Am,An)||{}).metaKey;},getButton:function AQ(Am,An){return((Number(AG(Am,An).button))===2)?2:1;},isPrimaryMouseBtn:function Ab(An,Am){return this.getButton(Am||window,An)===1;},getMousePosition:function j(Ap,Ao){Ao=Ao||window;var An,As;if(mstrmojo.dom.isIE){Ap=Ap||Ao.event;var Aq=document,Am=Aq.body,Ar=Aq.documentElement;An=Ap.clientX+Am.scrollLeft+(Ar.scrollLeft||0);As=Ap.clientY+Am.scrollTop+(Ar.scrollTop||0);}else{An=Ap.pageX;As=Ap.pageY;}return{x:An,y:As};},position:function AR(An,Ao){var Ar={x:0,y:0,w:0,h:0};if(An&&An.getBoundingClientRect){try{Ar=An.getBoundingClientRect();}catch(Aq){Ar={left:0,top:0,right:0,bottom:0,height:0,width:0};}Ar={x:Ar.left,y:Ar.top,w:Ar.right-Ar.left,h:Ar.bottom-Ar.top};if(this.isIE6||this.isIE7){var Am=An.ownerDocument;if(Am){var At=Am.documentElement,As=At.getBoundingClientRect();Ar.x-=As.left;Ar.y-=As.top;}}}if(Ao){var Ap=AU();Ar.x+=Ap.x;Ar.y+=Ap.y;}return Ar;},delta:function F(Ao,Am){Am=Am||document.body;var An=this.position(Ao),Ap=this.position(Am);return{x:Math.round(An.x-Ap.x),y:Math.round(An.y-Ap.y)};},windowDim:function Q(){var Am=0,Ao=0,Ap=window,Aq=document,Ar=Aq.documentElement,An=Aq.body;if(typeof (Ap.innerWidth)=="number"&&typeof (Ap.innerHeight)=="number"){Am=Ap.innerWidth;Ao=Ap.innerHeight;}else{if(Ar&&(Ar.clientWidth||Ar.clientHeight)){Am=Ar.clientWidth;Ao=Ar.clientHeight;}else{if(An&&(An.clientWidth||An.clientHeight)){Am=An.clientWidth;Ao=An.clientHeight;}}}return{w:Am,h:Ao};},center:function AH(Am){t.call(this,Am,V,V);},bottomCenter:function E(Am){t.call(this,Am,V,AY);},clearBrowserHighlights:function K(Am){Am=Am||self;if(!Am.getSelection){var As=Am.document,Ar=As&&As.selection,Ap=Ar&&Ar.empty;if(Ap){try{Ar.empty();}catch(Ao){}}}else{var An=Am.getSelection,Aq=An&&Am.getSelection();if(Aq&&!Aq.isCollapsed){if(Aq.empty){Aq.empty();}else{if(Aq.removeAllRanges){Aq.removeAllRanges();}}}}},findAncestorByAttr:function AN(Aq,Ao,An,Am){var Ar=An?Aq:Aq&&Aq.parentNode;while(Ar&&(Ar!==Am)){var Ap=Ar.getAttribute&&Ar.getAttribute(Ao);if(Ap!=null){return{node:Ar,value:Ap};}Ar=Ar.parentNode;}return null;},findAncestorByName:function Af(Ao,Ar,An,Am){Ar=Ar&&Ar.toLowerCase();var Ap=An?Ao:Ao&&Ao.parentNode;while(Ap&&(Ap!==Am)){var Aq=Ap.nodeName;if(Aq&&(Aq.toLowerCase()===Ar)){return Ap;}Ap=Ap.parentNode;}return null;},contains:function I(Ap,Aq,An,Am){var Ao=Aq;if(!An){Ao=Ao.parentNode;}while(Ao){if(Ao===Ap){return true;}if(Ao===Am){break;}Ao=Ao.parentNode;}return false;},toggleSelection:function Al(An,Am){An.setAttribute("unselectable",Am?"off":"on");mstrmojo.css.toggleClass(An,"unselectable",!Am);An.onselectstart=function(){return Am;};if(!Am){this.clearBrowserHighlights();}},preventDefault:function U(Am,An){An=An||Am.event;if(An.preventDefault){An.preventDefault();}else{An.returnValue=false;}},stopPropogation:function M(Am,An){An=An||Am.event;if(An.stopPropagation){An.stopPropagation();}else{An.cancelBubble=true;}},firstTouch:function AT(Am,An){return An&&An.touches&&An.touches.length?An.touches[0]:(An||Am.event);},firstChangedTouch:function AZ(Am,An){return An&&An.changedTouches&&An.changedTouches.length?An.changedTouches[0]:(An||Am.event);},isLandscape:function T(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function AV(Am){while(Am){var An=Am.mstrmojoId;if(An!==null&&An!==undefined){return mstrmojo.all[An];}Am=Am.parentNode;}return null;},setCaret:function G(Am,Ao){if(Am.setSelectionRange){Am.focus();Am.setSelectionRange(Ao,Ao);}else{if(Am.createTextRange){var An=Am.createTextRange();An.move("character",Ao);An.select();}}},setInputSelection:function Y(Am){if(Am.select){Am.focus();Am.select();}else{if(Am.createTextRange){Am.createTextRange().select();}}},setElementSelection:function a(Ao){if(window.getSelection){var Am=document.createRange(),An=window.getSelection();Am.selectNodeContents(Ao);An.removeAllRanges();An.addRange(Am);}else{if(document.body.createTextRange){var Ap=document.body.createTextRange();Ap.moveToElementText(Ao);Ap.select();}}},getHorizontalScroll:function Ai(){return AU().x;},getVerticalScroll:function AB(){return AU().y;},removeNode:function Ac(Ao){var An=document.getElementById(Ao),Am=An&&An.parentNode;if(Am){return Am.removeChild(An);}}});}());mstrmojo.mstr.EnumNodeDimty={NodeDimtyReserved:0,NodeDimtyNone:1,NodeDimtyContinuation:2,NodeDimtyExclusiveContinuation:3,NodeDimtyOutputLevel:4,NodeDimtyBreakBy:5,NodeDimtyEmbedded:6,NodeDimtyUnspecified:7};(function(){var C="xviPopopNode";function A(G){var H={};H[C]=G;return H;}mstrmojo.ui.menus._IsMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._IsMenuPopup",{init:function E(G){this._super(G);var J=this.popupConfig;if(!J){throw new Error("Cannot instantiate popup without supplying the popupConfig property.");}this.addDisposable(J);var H=mstrmojo.all[J.hostId],I=J.hostElement;if(J.isHostedWithin&&H&&I){H.addSlots(A(I));this.slot=C;}},closeAllMenus:function F(){var G=this.opener;if(G&&G.closePopup){G.closePopup();}if(G&&G.closeAllMenus){G.closeAllMenus();}},open:function B(H,G){if(this._super){this._super(H,G);}},close:function D(G){if(this.slot===C){this.opener.removeSlots(A(null));}if(this._super){this._super(G);}this.destroy();var H=mstrmojo.all[this.popupConfig.hostId];if(H){H.closePopup();}}});}());mstrmojo.mstr.EnumDataType={DataTypeUnknown:-1,DataTypeReserved:0,DataTypeInteger:1,DataTypeUnsigned:2,DataTypeNumeric:3,DataTypeDecimal:4,DataTypeReal:5,DataTypeDouble:6,DataTypeFloat:7,DataTypeChar:8,DataTypeVarChar:9,DataTypeLongVarChar:10,DataTypeBinary:11,DataTypeVarBin:12,DataTypeLongVarBin:13,DataTypeDate:14,DataTypeTime:15,DataTypeTimeStamp:16,DataTypeShort:21,DataTypeLong:22,DataTypeMBChar:23,DataTypeBool:24,DataTypePattern:25,DataTypeBigDecimal:30,DataTypeCellFormatData:31,DataTypeInt64:34};(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var N=/\{\@(en@)?([^\}]+)\}/gm,J=/\</gm,R=/\>/gm,E=/\S/,Q=["$","^","=","!",":","/",".","*","+","?","|","(",")","[","]","{","}","\\"],F=new RegExp("(\\"+Q.join("|\\")+")","g"),S={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;",u0009:"&#x09;","\n":"&#x0A;","\r":"&#x0D;",'"':"&quot;"},C={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;"," ":"&nbsp;","\n":"<br/>","\r":"&nbsp;&nbsp;&nbsp;&nbsp;","'":"&#039;",'"':"&quot;"},M={"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":" ","<br/>":"\n","&nbsp;&nbsp;&nbsp;&nbsp;":"\r","&#039;":"'","&quot;":'"'},D={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#039;",'"':"&quot;","\u20ac":"&#8364;"},K={"&amp;":"&","&lt;":"<","&gt;":">","&#039;":"'","&quot;":'"',"&#8364;":"\u20ac"};var L=function(V){if(V===null){return"null";}var W=typeof V;if(W!=="object"){return W;}if(V.length===undefined){return"object";}return"array";};var T={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};mstrmojo.string=mstrmojo.provide("mstrmojo.string",{multiReplace:function G(W,Z,Y){var V;Y=Y||[];if(!W){return"";}var X=[];for(V in Z){if(mstrmojo.array.indexOf(Y,V)===-1){X.push(V.k||V);}}return W.replace(new RegExp(X.join("|"),"g"),function(a){var b=Z[a];return b.v||b;});},trim:function P(V){return(V&&V.replace)?V.replace(/^\s+/,"").replace(/\s+$/,""):V;},startsWith:function U(W,V){return W.length>=V.length&&W.substring(0,V.length)==V;},ellipsize:function A(X,W){var V=this.trim(X.substr(0,(W||1)-1));if(V!==X){V+="&hellip;";}return V;},isEmpty:function I(V){return(V===null)||(V===undefined)||!(E.test(V));},regEscape:function O(V){return V.replace(F,"\\$1");},encodeXMLAttribute:function(V){return mstrmojo.string.multiReplace(V,S);},encodeHtmlString:function(W,V,X){if(!W||!W.replace){return W;}if(X){return mstrmojo.string.multiReplace(W,D);}return mstrmojo.string.multiReplace(W,C,V?[" "]:[]);},decodeHtmlString:function(W,V){return V?mstrmojo.string.multiReplace(W,K):mstrmojo.string.multiReplace(W,M);},htmlAngles:function(V){if(!mstrmojo.string.isEmpty(V)){V=String(V);return V.replace(J,"&lt;").replace(R,"&gt;");}return V;},apply:function H(V,X){if(!V){return"";}var W=this;return V.replace(N,function Y(b,c,d){var Z;try{Z=mstrmojo.hash.walk(d,X);}catch(a){}Z=(Z===null||Z===undefined)?"":Z;return(!!c)?W.encodeHtmlString(Z,true):Z;});},json2xml:function(V,k,l){if(!(k instanceof Array)){k=[k];}var W=l&&l.isSerializable,j=(l.convertBoolean!==false),p=l&&l.skipFunctions,h,b;var d=[],Z=[],c,Y,a;for(h=0,b=k.length;h<b;h++){var g=k[h];for(c in g){if(p&&typeof g[c]==="function"){continue;}if(W){var o=W(c,k,h);if(o!==true){if(o===false){continue;}else{if(o.att){d.push(o.att);}if(o.child){Z.push(o.child);}continue;}}}Y=g[c];a=L(Y);switch(a){case"array":var e,f;Z.push("<"+c+">");for(e=0,f=Y.length;e<f;e++){var X=l.getArrItemName(c,Y,e)||e;Z.push(this.json2xml(X,Y[e],l));}Z.push("</"+c+">");break;case"object":Z.push(this.json2xml(c,Y,l));break;case"string":d.push(c+'="'+mstrmojo.string.encodeXMLAttribute(Y)+'"');break;case"boolean":d.push(c+'="'+(j?(Y?"-1":"0"):Y)+'"');break;case"null":if(!l.skipNull){d.push(c+'="'+l.nullValue+'"');}break;default:d.push(c+'="'+Y+'"');break;}}}return"<"+V+" "+d.join(" ")+">"+Z.join("")+"</"+V+">";},escape4HTMLText:function B(c){if(!c||!c.replace){return c;}var Z=/"/gm;var X="&quot;";var d=/&/gm;var b="&amp;";var a=/</gm;var V="&lt;";var Y=/>/gm;var W="&gt;";return c.replace(d,b).replace(Z,X).replace(a,V).replace(Y,W);},parseUri:function(Z,W){W=W||T;var V=W.parser[((W.strictMode)?"strict":"loose")].exec(Z),Y={},X=14;while(X--){Y[W.key[X]]=V[X]||"";}Y[W.q.name]={};Y[W.key[12]].replace(W.q.parser,function(b,a,c){if(a){Y[W.q.name][a]=c;}});return Y;},removeSpecialChars:function(V){return V.replace(/[^a-zA-Z0-9]/g,"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],s=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-s.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=s.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,M=mstrmojo.hash;function J(U){if(U!==null){return(U.constructor!==Array)?[U]:U;}return null;}function F(e,c,Y){if(!c){return null;}var f=[],V=e.selectedIndices,U=e.allIdx,a=e.noneIdx;if(e.multiSelect&&(a>-1)&&(I.indexOf(c,a)>-1)){return f;}var X,Z,d=e.items,b=e.itemIdField,W=e.selectedItems,h;if(e.multiSelect&&(U>-1)&&(I.indexOf(c,e.allIdx)>-1)){for(X=0,Z=d.length;X<Z;X++){if(!V[X]){f.push(X);V[X]=true;e.selectedIndex=X;e.selectedItem=d[X];}}}else{for(X=0,Z=c.length;X<Z;X++){var g=c[X];if(!V[g]){V[g]=true;if(Y){f.push({idx:g,positions:Y});}else{f.push(g);}e.selectedIndex=g;h=e.selectedItem=d[g];if(W){W[h[b]]=h;}}}}return f;}function D(X,U){var W=[],Y=X.selectedIndices,Z=X.selectedItems,V;for(V in Y){delete Y[V];if(U){W.push({idx:parseInt(V,10),positions:U});}else{W.push(parseInt(V,10));}}X.selectedIndex=-1;X.selectedItem=null;if(Z){X.selectedItems={};}return W;}function T(e,d,Y){if(!d){return null;}var a=[],V=e.selectedIndices,g=I.indexOf,U=e.allIdx,b=e.noneIdx,c=e.itemIdField,W=e.selectedItems;if(e.multiSelect&&(((U>-1)&&(g(d,U)>-1))||((b>-1)&&(g(d,b)>-1)))){return D(e);}if(d.length>0&&V[U]){if(g(d,U)<0){d.push(U);}}var Z=d.length,X;for(X=0;X<Z;X++){var f=d[X];if(V[f]){delete V[f];if(Y){a.push({idx:f,positions:Y});}else{a.push(f);}if(W){delete W[e.items[f][c]];}if(e.selectedIndex===f){e.selectedIndex=-1;e.selectedItem=null;}}}return a;}function C(X,Y,V,U){if(U){return ;}if(this.raiseEvent){if((X&&X.length)||(Y&&Y.length)){try{this.raiseEvent({name:"selectionChange",added:X,removed:Y});}catch(W){T(this,X);F(this,Y);throw W;}}}}function B(V){var W=this.itemIdField,U=this.items;if(typeof V==="object"&&W){return I.find(U,W,V[W]);}return I.indexOf(U,V);}mstrmojo._ListSelections={multiSelect:false,allIdx:-1,noneIdx:-1,itemIdField:"",items:null,selectedIndices:null,selectedIndex:-1,selectedIndices_bindEvents:"selectionChange",selectedIndex_bindEvents:"selectionChange",selectedItem:null,selectedItem_bindEvts:"selectionChange",allowUnlistedValues:true,selectedItems:null,supportsIncFetch:false,init:function(U){this._super(U);if(this.supportsIncFetch&&this.itemIdField){this.selectedItems={};}if(!this.items){this.items=[];}if(!this.selectedIndices){this.selectedIndices={};if(this.selectedIndex>-1){this._set_selectedIndex("selectedIndex",this.selectedIndex,true);}else{if(this.selectedItem){this._set_selectedItem("selectedItem",this.selectedItem,true);}}}},addItems:function K(d){d=J(d);if(!d){return ;}var a=this.items,U=this.items.length,W=this.selectedItems,Y=[],V;a=this.items=a.concat(d);V=a.length;if(W){var Z=this.itemIdField,X,c;for(X=U;X<a.length;X++){c=a[X];if(W[c[Z]]){Y.push(X);}}}if(Y&&Y.length){F(this,Y);}if(V>U){var b=this.itemsContainerNode;if(b){b.innerHTML+=this._buildItemsMarkup(U,V-1).join("");}}},addSelectedItems:function S(U){this.selectItems(U,false);},setSelectedItems:function L(U){this.selectItems(U,true);},selectItems:function R(c,e){c=J(c);if(!c){return ;}if(e&&this.selectedItems){this.selectedItems={};}var W=this.selectedItems,a=this.itemIdField,U=[],Y=this.items.length,Z=[],V=this.allowUnlistedValues,d,b,X;for(X=0;X<c.length;X++){d=c[X];b=B.call(this,d);if(b<0){if(W===null){if(V){U.push(d);b=Y++;Z.push(b);}}else{W[d[a]]=d;}}else{Z.push(b);}}if(U.length>0){this.addItems(U);}if(Z.length>0){if(e){this.select(Z);}else{this.addSelect(Z);}}},unselectItems:function A(V){V=J(V);if(!V){return ;}var a=this.selectedItems,W=[],Z=this.itemIdField,Y,U,X;if(a===null){return ;}for(X=0;X<V.length;X++){Y=V[X];if(a){delete a[Y[Z]];}U=B.call(this,Y);if(U<0){W.push(U);}}if(W.length>0){this.removeSelect(W);}},getSelectedItems:function G(){if(this.selectedItems){return M.valarray(this.selectedItems);}return I.get(this.items,M.keyarray(this.selectedIndices,true));},singleSelect:function(V,W,U){if(V!==-1){this.select([V],W,U);}},singleSelectByField:function O(V,W,U){this.singleSelect(I.find(this.items,W,V),U);},toggleSelect:function Q(U){var W,V;if(this.selectedIndices[U]){V=T(this,[U]);}else{W=F(this,[U]);}C.call(this,W,V,[U]);},select:function(W,V,U){W=J(W);if(!W){return ;}var Y=D(this,U),a=F(this,W,U),X;if(this.selectionPolicy!=="reselect"){for(X=Y.length-1;X>=0;X--){var Z=I.indexOf(a,Y[X]);if(Z>-1){Y.splice(X,1);a.splice(Z,1);}}}C.call(this,a,Y,W,V);},rangeSelect:function H(V,U){var a=this.selectedIndex,Y=a,Z=this.allIdx,W=[],X;if(V===Z||this.selectedIndices[Z]){W.push(Z);}else{if(Y===-1&&this.selectedIndices){for(X in this.selectedIndices){Y=parseInt(X,10);break;}}Y=Y===-1?0:Y;if(Y>V){Y=V;V=a;}for(X=Y;X<=V;X++){W.push(X);}}this.select(W,U);this.selectedIndex=a;},clearSelect:function(U){C.call(this,null,D(this),[],U);if(!U){this.raiseEvent({name:"clearSelection"});}},addSelect:function(X,U,V){X=J(X);if(!X){return ;}var W=F(this,X,V),Z=null,Y=this.noneIdx;if(this.multiSelect&&(Y>-1&&I.indexOf(X,Y)>-1)){Z=T(this,X);}C.call(this,W,Z,X,U);},removeSelect:function(W,U,V){W=J(W);if(!W){return ;}C.call(this,null,T(this,W,V),W,U);},_set_selectedIndices:function P(W,c,U){if(this.selectedItems){this.selectedItems={};}var V=this.selectedIndices;if(V===c){return false;}if(!V){V={};this.selectedIndices=V;}if(!c){c={};}var a=this.selectedIndex,Z=[],b;for(b in V){if(!c[b]){b=parseInt(b,10);delete V[b];Z.push(b);if(a===b){this.selectedIndex=-1;this.selectedItem=null;}}}var f=[],d=this.items,Y=this.itemIdField,e;for(b in c){if(!V[b]){b=parseInt(b,10);V[b]=true;f.push(b);this.selectedIndex=b;e=this.selectedItem=d[b];if(this.selectedItems){this.selectedItems[e[Y]]=e;}}}if(U!==true){var X=[];for(b in c){if(V[b]){b=parseInt(b,10);X.push(b);}}C.call(this,f,Z,X);}return(f.length||Z.length);},_set_selectedIndex:function N(X,V,U){var W={};if(V>-1){W[V]=true;}return this._set_selectedIndices("selectedIndices",W,U);},_set_selectedItem:function E(X,W,V){var U=B.call(this,W);if((U<0)&&(W!==null&&W!==undefined)&&this.allowUnlistedValues&&this.items){this.set("items",this.items.concat(W));U=this.items.length-1;}return this._set_selectedIndex("selectedIndex",U,V);},_addSelections:function(U){return F(this,U);},_removeAll:function(){return D(this);}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,B=mstrmojo.hash,D="u;",C="-1";mstrmojo.elementHelper=mstrmojo.provide("mstrmojo.elementHelper",{buildElemsTerseID:function F(P,O,R){var N,M;for(M in P){N=P[M];if(N.v){var Q=N.v.split(";");if(Q&&Q.length>1){Q[1]=O;if(R&&Q.length>2){Q.pop();}N.v=Q.join(";");}}}return P;},buildElemsCountStr:function K(P,N){P=(!P||!P.length)?[]:P;N=(!N||!N.length)?[]:N;var O=P.length,M=N.length;if(I.find(N,"v",D)>-1){M-=1;}if(I.find(N,"v",C)>-1){M-=1;}if(I.find(P,"v",D)>-1||I.indexOf(P,D)>-1){O=M;}return this.buildElemsCountStrByNum(O,M);},buildElemsCountStrByNum:function K(N,M){if(N===M){if(M===0){return"";}return M.toString();}else{if(M===0){return N+" "+mstrmojo.desc(514);}else{if(N>M){return"("+M+")";}}}return mstrmojo.desc(4891,"").replace("##",String(N)).replace("###",String(M));},browseElements:function G(O,P,N){var M={doNotHold:!(N&&mstrApp.serverProxy),silent:true};mstrApp.serverRequest(mstrmojo.hash.copy(N,P),O,M);},getIdPresentation:function J(P){if(!!P){var O=P.charAt(0),M,N,Q;if((O>="g"&&O<="w")||(O>="V"&&O<="Z")){N=false;for(Q=1;Q<P.length;++Q){if(N){N=false;}else{switch(P.charAt(Q)){case";":return"terseLong";case"\\":N=true;break;}}}return"terse";}if(O>="B"&&O<="Q"){if(P.length>2){M=P.charAt(1);if(M>="A"&&M<="Q"){if(P.charAt(2)===":"){return"oldLong";}}}}if(P.length>=33&&P.charAt(32)===":"){return"old";}}return null;},isNullElem:function H(M){if(!M){return true;}var P=this.getIdPresentation(M),N=false,O;switch(P){case"terse":case"terseLong":O=M.substring(1,M.length).split(";");N=O[0].indexOf(this.TERSE_NULL)>-1;break;case"old":case"oldLong":N=M.indexOf(this.OLD_NULL)>-1;break;}return N;},isNonGroupNull:function(O){var M=O.eid||(O._e&&O._e.id),N=M&&M.split(":")[0];return N&&N===this.NON_GROUP_NULL;},getAttributeId:function L(O){var N,M;if(O){M=O.split(";");N=M[1];}return N;},getElementValue:function A(N){var O,M;if(N){M=N.split(";");if(M.length>2){O=M[0]+" "+M[2];}else{O=M[0];}}return O;},isAttributeIdsLinked:function E(N,M,O){var Q=false,P=B.keyarray(O);I.forEach(P,function(R){if(R===N){I.forEach(O[R],function(S){if(S===M){Q=true;return false;}});}if(Q){return false;}});return Q;},ELEM_ALL_ID:"u;",ELEM_DUMMY_ID:"-1",ELEM_SEPARATOR:"\u001E",OLD_NULL:"~!@@~~!@@~",TERSE_NULL:"\\N",NON_GROUP_NULL:"n00000000000000000000000000000000"});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,d){var Z=D.getMousePosition(D.firstTouch(b,d),b);D.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*O*F/d).toFixed(2):0,y:d?Number(b.y*O*F/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var B=mstrmojo.dom,E=100;function I(K,J){return function(L){mstrmojo.all[K][(J?"move":"show")+"Tooltip"](L,self);};}function A(){var K=this.tooltipNode||this.domNode,M=this.id,J,L="_ontooltip"+(this.isDynamicTooltip?"move":"over");if(!this._ontooltipout){this._ontooltipout=function(N){mstrmojo.all[M].hideTooltip(N,self);};}if(!this[L]){this[L]=I(M,this.isDynamicTooltip);}K=[].concat(K);for(J=0;J<K.length;J++){K[J].removeAttribute("title");B.attachEvent(K[J],(this.isDynamicTooltip?"mousemove":"mouseover"),this[L]);B.attachEvent(K[J],"mouseout",this._ontooltipout);}}mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,isDynamicTooltip:false,tooltipNode:null,tooltipOpenDelay:700,hasOpenTooltip:false,postBuildRendering:function(){var J=this._super();if(this.useRichTooltip){A.call(this);}return J;},onuseRichTooltipChange:function H(){if(this.hasRendered){var K=this.tooltipNode||this.domNode,J;if(this.useRichTooltip){A.call(this);}else{if(this._ontooltipout){if(K&&K.constructor!==Array){K=[K];}for(J=0;J<K.length;J++){B.detachEvent(K[J],this.isDynamicTooltip?"mousemove":"mouseover",this["_ontooltip"+(this.isDynamicTooltip?"move":"over")]);B.detachEvent(K[J],"mouseout",this._ontooltipout);}}this.hideTooltip();}}},showTooltip:function G(M,L){var K=this;if(!K.hasOpenTooltip&&(!mstrApp.isInteractive||mstrApp.isInteractive&&mstrApp.isInteractive())){mstrmojo.requiresCls("mstrmojo.tooltip");if(this.updateTooltipConfig){this.updateTooltipConfig(M);}window.clearTimeout(this._tooltipTimeOut);if(mstrmojo.dom.isIE){var N={};for(var J in M){N[J]=M[J];}M=N;}var O=this.richTooltip?this.richTooltip.areaId:undefined;this._tooltipTimeOut=window.setTimeout(function(){if(K._closeTooltipTimeout){window.clearTimeout(K._closeTooltipTimeout);delete K._closeTooltipTimeout;}mstrmojo.tooltip.open(K,M,L);K.tooltip.onmouseover=function(){if(K.richTooltip&&K.richTooltip.enableHover){window.clearTimeout(K._closeTooltipTimeout);window.clearTimeout(K._deactivationTimeout);if(K.tooltip){K.tooltip.onmouseout=function(P){if(!B.contains(this.domNode,P.e.toElement||P.e.relatedTarget)){K.hideTooltip();}};}}};K.hasOpenTooltip=true;K._hasActiveArea=true;K._tooltipAreaId=O;window.clearTimeout(K._deactivationTimeout);delete K._deactivationTimeout;},(this._hasActiveArea&&O&&O===this._tooltipAreaId)?0:this.tooltipOpenDelay);}},moveTooltip:function C(J,L){if(this._tooltipTimeOut){window.clearTimeout(this._tooltipTimeOut);this._tooltipTimeOut=null;mstrmojo.tooltip.close();}var N=this,K=J,M=L;this._tooltipTimeOut=setTimeout(function(){mstrmojo.tooltip.open(N,K,M);},this.tooltipOpenDelay);},hideTooltip:function F(){var J=this;window.clearTimeout(this._tooltipTimeOut);if(this._closeTooltipTimeout){window.clearTimeout(this._closeTooltipTimeout);}if(this._hasActiveArea&&!this._deactivationTimeout){this._deactivationTimeout=window.setTimeout(function(){delete J._deactivationTimeout;delete J._hasActiveArea;delete J._tooltipAreaId;},100);}mstrmojo.requiresCls("mstrmojo.tooltip");if(J.richTooltip&&J.richTooltip.enableHover){this._closeTooltipTimeout=window.setTimeout(function(){mstrmojo.tooltip.close();delete J._closeTooltipTimeout;},E);}else{mstrmojo.tooltip.close();}this.hasOpenTooltip=false;},unrender:function D(M){var N=this.tooltipNode||this.domNode,L;if(N&&N.constructor!==Array){N=[N];}if(N){var O=this._ontooltipover,K=this._ontooltipout,J=this._ontooltipmove;for(L=0;L<N.length;L++){if(O){B.detachEvent(N[L],"mouseover",O);}if(K){B.detachEvent(N[L],"mouseout",K);}if(J){B.detachEvent(N[L],"mousemove",J);}}}this._super(M);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var E=mstrmojo.dom;var P=mstrmojo.dom;var O="mousedown";function S(U){var T=U[U.hotSlot||"domNode"];if(T){if(!U._closeCallback){var W=U.id,V=function(X){return function(Z){var Y=mstrmojo.all[W];if(Y&&!Y.ignoreHover){Y["auto"+X](Z,self);}};};U._uncloseCallback=V("Unclose");U._closeCallback=V("Close");}E.attachEvent(T,"mouseover",U._uncloseCallback);E.attachEvent(T,"mouseout",U._closeCallback);}}function B(U){if(U._closeCallback){var T=U[U.hotSlot||"domNode"];if(T){E.detachEvent(T,"mouseover",U._uncloseCallback);E.detachEvent(T,"mouseout",U._closeCallback);}}}function F(V,U){var T=V;while(T){if(T.open||T.openPopup){if(T.set){T.set("ignoreHover",U);}else{T.ignoreHover=U;}}T=T.opener||T.parent;if(T&&T.shouldPropagateLockHover&&!T.shouldPropagateLockHover()){break;}}}function D(){var T=this._lockHoverCallback;if(T){E.detachEvent(document.body,O,T,true);delete this._lockHoverCallback;}}mstrmojo._CanAutoClose=mstrmojo.provide("mstrmojo._CanAutoClose",{autoCloses:false,autoCloseDelay:100,locksHover:false,hotSlot:null,closeOnClick:false,curtainNode:null,postBuildRendering:function Q(){this._super();if(this.autoCloses){S(this);}this.oncloseOnClickChange();},onautoClosesChange:function L(){var T=(this.autoCloses)?S:B;T(this);},oncloseOnClickChange:function H(){if(!this.curtainNode){return ;}var V=this,U="click",T=(mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp());if(T){U="touchstart";}E.attachEvent(V.curtainNode,U,function(){V.close();if(T){mstrmojo.touchManager.notify([]);}});},autoUnclose:function G(){var T=this._autoCloseTimer;if(T){self.clearTimeout(T);delete this._autoCloseTimer;}},autoClose:function J(){if(this.ignoreHover){return ;}if(this._autoCloseTimer){self.clearTimeout(this._autoCloseTimer);}if(this.opener){if(this.autoCloseDelay){var T=this.opener.id;this._autoCloseTimer=self.setTimeout(function(){mstrmojo.all[T].closePopup();},this.autoCloseDelay);}else{this.opener.closePopup();}}},destroy:function R(T){D.call(this);this._super(T);},lockHover:function N(){F(this,true);if(!this._lockHoverCallback){var U=this.id,T=this._lockHoverCallback=function(V){mstrmojo.all[U]._unlockHoverCheck(V,self);};if((E.isIE7||E.isIE8)&&window.event&&(window.event.type===O)&&this.opener){this.opener._ignoreMousedown=true;}E.attachEvent(document.body,O,T,true);}},unlockHover:function M(){F(this,false);D.call(this);},_unlockHoverCheck:function C(X,T){var U=this.opener;if(U&&U._ignoreMousedown){delete U._ignoreMousedown;return ;}var W=E.eventTarget(T,X);if(!P.contains(this.domNode,W,true,document.body)){var V=P.findWidget(W);while(V){if(V===this){return ;}V=V.parent||V.opener;}if(U&&U.onPopupAutoClosed){U.onPopupAutoClosed(X,T);}this.close();}},open:function I(U,T){if(this.autoCloses){this.autoUnclose();}this._super(U,T);if(this.locksHover){this.lockHover();}},close:function K(T){if(this.locksHover){this.unlockHover();}this._super(T);},shouldPropagateLockHover:function A(){return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(W){mstrmojo.hash.copy(W,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var W=this;this.delayTimer=window.setTimeout(function(){W._start();W=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function U(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var W=this.ease;if(typeof W==="string"){this.ease=mstrmojo.registry.ref(W);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var X=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function Y(){if(X){X.exec();X.counter++;if(X.counter>=X.steps){X._end();X=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function T(){if(this.getTarget){this.target=this.getTarget();}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var X=this.target;if(X&&this.slot&&X.scriptClass){var Y=X[this.slot];if(Y){this.widget=X;this.target=Y;}}}}}if(!this.target){var W=this;while(W=W.parent){if(!W||W.domNode){break;}}if(W){this.widget=W;this.target=W[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(Z,a){var X=Z.children,W=(X&&X.length)||0,Y;for(Y=0;Y<W;Y++){X[Y][a]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(Z){this._super(Z);var Y=this.children;mstrmojo.registry.refArray(Y);var W=(Y&&Y.length)||0,X;for(X=0;X<W;X++){Y[X].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function U(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var Y=this.props,Z;for(Z in Y){var X=Y[Z],W=X.ease;if(typeof W==="string"){X.ease=mstrmojo.registry.ref(W,{dontInst:true});}}this._super();},exec:function P(){var Z=this.props,a;for(a in Z){var X=Z[a],W=(X.ease||mstrmojo.ease.sin)(this.counter,X.start,X.stop-X.start,this.steps-1);if(X.fn){W=X.fn(W);}if(X.suffix){W+=X.suffix;}var Y=X.isStyle===false?this.target:this.target.style;Y[a]=W;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var a=this.srcProp,Y;if(a){var W=this.widget||this.parent;Y=W&&W[a];if((Y!=null)&&(typeof (Y)!=="string")){Y=String(Y);}}this.stop=Y;this._dynStop=true;}if(this.stop==null){this.stop="";}var Z=this.target,b=null,X=1;if(Z){Z.innerHTML="";b=document.createTextNode("");Z.appendChild(b);X=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=b;this.charGroupSize=X;},exec:function(){var X=this.targetTextNode;if(!X){return ;}var W;if(this.counter>=this.steps-1){W=this.stop;}else{if(this.counter===0){W="";}else{W=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}X.nodeValue=W;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function U(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(W){if(W==null){W=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(W*100,10)+")";}else{this.target.style.opacity=W;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function U(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function V(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(Y,X,Z){var W=Math.pow(10,Z||2);if(X){return parseInt(W*Y/X,10)/W;}return parseInt(W*Y,10)/W;}mstrmojo.ease={linear:function L(X,W,Z,Y){if(X===Y){return W+Z;}if(X===0){return W;}return W+Z*I(X,Y);},sin:function A(X,W,Z,Y){return W+Z*Math.sin((Math.PI/2)*X/Y);},cos:function B(X,W,Z,Y){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},sincos:function K(X,W,Z,Y){if(X>Y/2){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}return W+Z*Math.sin((Math.PI/2)*X/Y);},cossin:function Q(X,W,Z,Y){if(X>Y/2){return W+Z*Math.sin((Math.PI/2)*X/Y);}return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},bounce:function G(X,W,Z,Y){if((X/=Y)<(1/2.75)){return Z*(7.5625*X*X)+W;}if(X<(2/2.75)){return Z*(7.5625*(X-=(1.5/2.75))*X+0.75)+W;}if(X<(2.5/2.75)){return Z*(7.5625*(X-=(2.25/2.75))*X+0.9375)+W;}return Z*(7.5625*(X-=(2.625/2.75))*X+0.984375)+W;},shake:function J(X,W,Z,Y){if(X<Y/2){return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*X/Y;}return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*(1-X/Y);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",P="mousemove",R="mouseup";function G(Y){if(E.isPrimaryMouseBtn(Y)){B.startDragCheck(self,Y);}}var V,Q,A="mstrmojo-dnd-avatar",U;function F(Z,Y){if(Y!==undefined&&Y!==null){Q.innerHTML=Y;}U.left=Z.x+"px";U.top=Z.y+"px";}function L(Z,Y){if(!V){V=I.createElement("div");U=V.style;V.className=A;V.innerHTML='<div class="'+A+'-inner"></div>';Q=V.firstChild;I.body.appendChild(V);}F(Z,Y);U.display="block";}function S(){if(U){U.display="none";}}function H(Y){var Z=++B.ctxt.moveCount;if(Z>=B.minMoves){B.stopDragCheck();if((Y.buttons===1||Y.buttons===undefined||E.isIE9)&&(Y.which===1||Y.button===0||E.isIE8)){B.startDrag(self,Y);}}}function O(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDragCheck();delete B.ctxt;}}function D(Y){B.onDragMove(self,Y);}function C(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDrag(window,Y);}}function N(b){var Z=mstrmojo.hash.copy(b,{}),a=Z.hWin=Z.hWin||window,Y=Z.e=Z.e||a.event;Z.node=E.eventTarget(a,Y);Z.pos=E.getMousePosition(Y,a);return Z;}function J(Z){var Y=E.findWidget(Z);while(Y){if(Y.draggable){return Y;}Y=Y.parent;}return null;}function T(Y){var a=Y.src,Z=J(a.node);if(!Z){return null;}if(Z.getDragAction){Y.action=Z.getDragAction(Y);}a.widget=Z;a.data=Z.getDragData&&Z.getDragData(Y);if(Z.isDragValid){if(!Z.isDragValid(Y)){if(!Z.shouldDragBubble||Z.shouldDragBubble(Y)!==true){Y.src.node=Z.domNode.parentNode;return T(Y);}return null;}}if(Z.ondragstart){Z.ondragstart(Y);}return Z;}function X(a,Z){var Y=E.findWidget(a),b=Z.tgt&&Z.tgt.widget;while(Y){if(Y.dropZone){if(Y===b){return Y;}if(Y.allowDrop&&Y.allowDrop(Z)){return Y;}}Y=Y.parent;}return null;}function W(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(Y,Z){delete this.ctxt;var a=N({hWin:Y,e:Z});this.ctxt={src:a,moveCount:0,last:M.copy(a.pos),getDirection:function(b){return !!this.dir[b];},getCtxtDragData:function(){var b=this.src;return(b&&b.data)||{};},getCtxtDropData:function(){var b=this.tgt;return(b&&b.data)||{};}};if(this.minMoves){E.attachEvent(I,P,H);E.attachEvent(I,R,O);}else{this.startDrag(Y,Z);}},stopDragCheck:function(){E.detachEvent(I,P,H);E.detachEvent(I,R,O);},startDrag:function(Y,b){var Z=this.ctxt;Z.id=mstrmojo.now();var a=T(Z);if(!a){return ;}E.clearBrowserHighlights(Y);E.preventDefault(self,b);E.attachEvent(I,P,D);E.attachEvent(I,R,C);var d=window.mstrApp;if(d&&d.setInteractive){this._changeAppStatus=d.setInteractive(false);}if(!a.ownAvatar){var c=Z.src;L(c.pos,c.data&&c.data.html);}},stopDrag:function(Y,f){E.detachEvent(I,P,D);E.detachEvent(I,R,C);var b=this.ctxt,a=b.tgt||{},Z=N({hWin:Y,e:f,data:a.data}),d=X(Z.node,b);Z.widget=d;b.tgt=Z;if(d){if(d.ondrop){d.ondrop(b);}else{W.call(d);}}var c=b.src.widget;if(c&&c.ondragend){c.ondragend(b);}if(c&&!c.ownAvatar){S();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(c,f){if(E.isSafari){E.clearBrowserHighlights();}var Y=this.ctxt,b=Y.tgt||{},Z=b.widget,d=N({hWin:c,e:f,data:b.data}),i=d.widget=X(d.node,Y),h=Y.last,a=d.pos;Y.dir={x:a.x>h.x,y:a.y>h.y};Y.last=M.copy(d.pos);Y.tgt=d;if(Z!==i){if(Z){if(Z.ondragleave){Z.ondragleave(Y);}else{W.call(Z);}}if(i){Y.tgt.data=(i.getDropData&&i.getDropData(Y))||{};if(i.ondragenter){i.ondragenter(Y);}else{if(i.set){i.set("allowingDrop",true);}}}}if(i){if(i.ondragover){i.ondragover(Y);}}var g=Y.src.widget;if(g&&g.ondragmove){g.ondragmove(Y);}if(g&&!g.ownAvatar){F(d.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var W=this._sourceFn;if(!W){var V=this.source;if(V!=null){if(typeof (V)=="string"){if(!(V.match("return "))&&!(V.match(/\;\s*\S/))){V="return "+V;}W=new Function(V);}else{if(typeof (V)=="function"){W=V;}}this._sourceFn=W;}}var S,X=this.parent;if(W){try{S=W.apply(X,[]);}catch(U){}}var T=this.setter,Y=this.destination;if(T==null){X[Y]=S;}else{if(typeof (T)=="string"){X[T](Y,S);}else{if(typeof (T)=="function"){T.apply(X,[Y,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var T=this._chains;if(!T){this._parseChains();T=this._chains;}for(var S in T){this._attachChain(T[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var T=this._chains;if(T){for(var S in T){this._detachChain(T[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var U=this._chains;var T=this.source;if(T&&(typeof (T)=="function")){T=T.toString&&T.toString();}if(!T){return ;}function S(b,e,V,X){var W=b,Z;while(Z=W.match(e)){var c=Z[0],a=c.length,d=true;c=c.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var Y in U){if(Y.substr(0,a)===c){d=false;break;}else{if(c.indexOf(Y)===0){delete U[Y];}}}if(d){U[c]={host:(V==null)?null:Z[V],parts:Z[X].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}W=W.substr(Z.index+a);}}if(D.test(T)){S(T,O,null,1);}if(R.test(T)){S(T,M,1,2);}if(B.test(T)){S(T,L,1,2);}},_attachChain:function Q(S,U){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var d=S.evt2idx,g=S.idx2evt,Z=S.parts;var e=(U>=0)?U:0,b=this.id,W=mstrmojo.all,c=(U>0)?W[g[e-1].context][Z[e-1]]:(S.host?W[S.host]:this.parent),T=Z[e];var V=mstrmojo.array;while(c&&T){if(c.attachEventListener){var f=c[T+"_bindEvents"]||(T+"Change");if(typeof (f)=="string"){f=[f];}var Y=[];for(var a=0,X=f.length;a<X;a++){Y[a]=c.attachEventListener(f[a],b,"_callback");}for(var a=0;a<f.length;a++){d[c.id+"_"+f[a]]=e;}g[e]={context:c.id,evts:f,subs:Y};}c=c[T];T=S.parts[++e];}},_detachChain:function G(S,T){var U=mstrmojo.all,h=S.idx2evt,d=S.evt2idx,a=this.id;var Y=(T>-1)?T:0,b=h.length;if(Y<b){for(;Y<b;Y++){var Z=h[Y];if(!Z){break;}var W=Z.context,c=U[W],g=Z.evts;if(c&&c.detachEventListener){var k=Z.subs;for(var f=0,V=k.length;f<V;f++){c.detachEventListener(k[f]);}}h[Y]=null;for(var X=0,e=g.length;X<e;X++){delete d[W+"_"+g[X]];}}}},_callback:function I(T){this.exec();if(!T||!T.name||!T.src){return ;}var U=T.src.id+"_"+T.name,W=this._chains;for(var X in W){var V=W[X],S=V.evt2idx[U];if(S!=null){this._detachChain(V,S+1);this._attachChain(V,S+1);}}}});})();mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){document.msCSSOMElementFloatMetrics=true;mstrmojo.requiresCls("mstrmojo.hash");var S=mstrmojo.hash,H="containerNode",G="auto",Q="px";var I={v:G,c:undefined,sv:G};function E(c,f,e){var g=this._layoutWidgets[f],j=c.slot||H,h=g.f,i=g.p,d=(h&&h[j]!==undefined),b=(i&&i[j]!==undefined);if(j&&((!e&&d)||b)){return d?h[j]:(g.x*parseInt(i[j],10)/100)+Q;}return c[(f==="h")?"height":"width"];}function K(g,d,b){if(g.ignoreLayout){return ;}var c=(d===G)||d==="NaNpx",f=(b===G)||b==="NaNpx";var e=g.getLayoutOffsets&&g.getLayoutOffsets();if(e){if(!c){d=(parseInt(d,10)-e.h)+Q;}if(!f){b=(parseInt(b,10)-e.w)+Q;}}if(g.setDimensions){g.setDimensions(d,b);}else{if(g.set){if(!c){g.set("height",d);}if(!f){g.set("width",b);}}}}function Z(e){var c=this.children,g,k;for(g=0,k=(c&&c.length)||0;g<k;g++){var d=c[g],l=d.slot||H;if(l){var j=E.call(this,d,"h",e),n=E.call(this,d,"w",e);this.setSlotDimensions(l,j,n);K(d,j,n);var b=E.call(this,d,"h",e),f=E.call(this,d,"w",e);if(b!==j||f!==n){K(d,b,f);}this.setSlotDimensions(l,b,f);}}this.afterLayout();}function B(){var c=this.children,b=this._layoutWidgets;S.forEach(this.slotNames,function(g,i){if(!g||this.skipsSlotLayout(i)){return ;}var f=(b.h&&b.h.getSlotSizeInfo(i,c))||I,d=(b.w&&b.w.getSlotSizeInfo(i,c))||I,e=f.c||d.c;mstrmojo.array.forEach(e,function(h){K(h,f.v,d.v);});this.setSlotDimensions(i,f.sv,d.sv);},this);this.afterLayout();}function D(c){var b=this.layoutConfig.xt?B:Z;b.call(this,c);}function T(i,e,g){var h=i.slot||H,f=e&&e.a;if(!f||f[h]===undefined){return ;}var b=this[h]["offset"+g],c=f[h];if(b===c){return ;}e.x-=(b-c);f[h]=b;}function J(b){this.beforeLayout();var c=this._layoutWidgets,d=b.src;T.call(this,d,c.h,"Height");T.call(this,d,c.w,"Width");D.call(this,true);}function O(d,g){if(!d){return null;}var b=this.children,r=g.toLowerCase(),h=parseInt(this[r],10),k=h,n={},p={},f={},c={},o={},j,l,e,s,q;for(q in d){if(!d.hasOwnProperty(q)){continue;}s=d[q];if(s.match(/px$/)){h-=parseInt(s,10);n[q]=s;}else{if(s.match(/%$/)){p[q]=s;}else{if(s.match(/all/)){o[q]=k;}else{f[q]=s;}}}}if(!S.isEmpty(f)&&!S.isEmpty(p)){for(j=0,l=(b&&b.length)||0;j<l;j++){e=b[j];q=e.slot||H;if(q&&f[q]&&!e.ignoreLayout){if(e.hasRendered){c[q]=this[q]["offset"+g];h-=c[q];}else{c[q]=0;e.attachEventListener((e instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,J);}}}}return{f:S.isEmpty(n)?undefined:n,p:S.isEmpty(p)?undefined:p,a:S.isEmpty(c)?undefined:c,n:S.isEmpty(o)?undefined:o,x:h,getSlotSizeInfo:function(z,u){if(!d[z]){return I;}var t=mstrmojo.array.filter(u,function(AB){var AA=AB.slot;return AA===z||(z===H&&!AA);}),x,y;var i=n[z];if(i){y=i;}var w=p[z];if(w){y=(this.x*parseInt(w,10)/100)+Q;}if(f[z]){y=c[z];if(y){y+=Q;}else{y=G;}x=G;}var v=o[z];if(v){y=x=v+Q;}y=y||"0px";return{v:y,c:t,sv:x||y};}};}function R(c){var b=this.domNode;if(!b||!this.layoutConfig){return ;}b.style[c]=this[c];this.doLayout();}mstrmojo._HasLayout=mstrmojo.provide("mstrmojo._HasLayout",{_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",ignoreLayout:false,beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,layoutConfig:null,init:function V(b){this._super(b);this.layoutConfig=S.clone(this.layoutConfig);},preBuildRendering:function C(){var d=this.cssText||"";var b=this.height;if(b&&b!==G){d+="height:"+this.height+";";}var c=this.width;if(c&&c!==G){d+="width:"+this.width+";";}this.cssText=d;return(this._super)?this._super():true;},postBuildRendering:function W(){this.doLayout();return this._super();},modifyLayoutConfig:function Y(d,c){var b=this.layoutConfig=this.layoutConfig||{};b.h=S.copy(d,b.h);b.w=S.copy(c,b.w);this.doLayout();},getLayoutOffsets:mstrmojo.emptyFn,set:function P(d,b){var c=this._super(d,b);if(d==="visible"&&this._pendingLayoutOnVisible){delete this._pendingLayoutOnVisible;this.doLayout();}return c;},doLayout:function A(){var b=this.layoutConfig;if(!b||(this.height===G&&this.width===G)){return ;}if(b.xt){if(!this.visible){this._pendingLayoutOnVisible=true;return ;}}this.beforeLayout();this._layoutWidgets={h:O.call(this,b.h,"Height"),w:O.call(this,b.w,"Width")};D.call(this,false);this.widgetResized();},browserResized:function F(b){this.setDimensions(b.h,b.w);return true;},onwidthChange:function N(){R.call(this,"width");},onheightChange:function M(){R.call(this,"height");},skipsSlotLayout:function(b){return false;},adjustParentDimensions:function L(){var c=this.parent,b=c&&c._layoutWidgets;if(b){T.call(c,this,b.h,"Height");T.call(c,this,b.w,"Width");}},setDimensions:function U(e,c){var d=(e===G)||e==="NaNpx",f=(c===G)||c==="NaNpx";if((!d&&parseInt(this.height,10)!==parseInt(e,10))||(!f&&parseInt(this.width,10)!==parseInt(c,10))){if(!d){this.height=e;}if(!f){this.width=c;}var b=this.domNode,g=b&&b.style;if(g){if(!d){g.height=e;}if(!f){g.width=c;}this.doLayout();}return true;}return false;},setSlotDimensions:function X(e,d,c){var b=this[e]&&this[e].style;if(!b){return ;}if(d!==G&&d!==undefined&&d!=="NaNpx"&&b.height!==d&&parseInt(d)>=0){b.height=d;}if(c!==G&&c!==undefined&&c!=="NaNpx"&&b.width!==c&&parseInt(c)>=0){b.width=c;}}});mstrmojo._HasLayout.getSlotSize=function a(e,f){var c=e&&e.prototype.layoutConfig;if(c){var d=c.h,b=c.w;return{h:(d&&d[f])||undefined,w:(b&&b[f])||undefined};}return null;};}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.string","mstrmojo.array");var N=mstrmojo.locales,I=mstrmojo.string,Q=window.mstrConfig,F=mstrmojo.array,K=function(){return mstrmojo.locales.number.THOUSANDSEPARATOR;},R=function(){return mstrmojo.locales.number.DECIMALSEPARATOR;},C=Q.units,T={CM:1,IN:2,MM:3,PT:4,PC:5,PX:6},A={1:"cm",2:"in",3:"mm",4:"pt",5:"pc",6:"px"},E={DEFAULT:-2,FIXED:0,CURR:1,PERCENT:4,FRACTION:5,SCIENTIFIC:6,GENERAL:9};var G=96;String.prototype.reverse=function(){var W="",V;for(V=this.length;V>0;--V){W+=this.charAt(V-1);}return W;};function M(V,X){V=V||"";X=X||V.match(/\".+?\"/g)||[];for(var W=0;W<X.length;W++){V=V.replace(X[W],X[W].substring(1,X[W].length-1).replace(/\$/g,"$$$$"));}return V;}function U(a){var V=86400000,Z=new Date(1900,0,1,0,0,0,0),W=Math.floor(a)-1,Y=a-W-1;if(a>=59){W--;}var X=new Date(Z.getTime()+(W*V));X.setTime(X.getTime()+Y*V+500);return X;}function H(Z,g,i){var a={"d+":Z.getDate(),"h+|H":Z.getHours(),"s+":Z.getSeconds()},V=N.datetime,b;if(/(y+)/.test(g)){var Y=Z.getFullYear().toString(),f=RegExp.$1,X=f.length===2,W=Y.length;g=g.replace(f,Y.substr(X?W-2:0,X?2:W));}if(/(^\[h\])/.test(g)&&i){g=g.replace(RegExp.$1,""+(Math.floor(i*24)));}if(/(\"?:\"?mm)/.test(g)){var c=Z.getMinutes();g=g.replace(RegExp.$1,":"+(RegExp.$1.length===1?c:("00"+c).substr(c.toString().length)));}if(/(AM\/PM)/.test(g)){var h=a["h+"],d=h>11;a["h+"]=h-(d?12:0);g=g.replace(RegExp.$1,d?"PM":"AM");}for(b in a){if(new RegExp("("+b+")").test(g)){g=g.replace(RegExp.$1,RegExp.$1.length===1?a[b]:("00"+a[b]).substr((a[b].toString()).length));}}if(/(mmmm)/.test(g)){g=g.replace(RegExp.$1,V.MONTHNAME_FULL[Z.getMonth()]);}else{if(/(mmm)/.test(g)){g=g.replace(RegExp.$1,V.MONTHNAME_SHORT[Z.getMonth()].substr(0,3));}else{if(/((m|M)+)/.test(g)){var e=(Z.getMonth()+1).toString();g=g.replace(RegExp.$1,RegExp.$1.length===1?e:("00"+e).substr(e.length));}}}return M(g);}function O(W,Z){var X=0,V=Z.length,Y=0;for(;X<V;X++){if(Z[X]==="0"){Y++;}else{if(Z[X]==="#"){if(Y<W){Y++;}}else{continue;}}}return Y;}mstrmojo.num=mstrmojo.provide("mstrmojo.num",{isInt:function D(V){var Y=K(),X=new RegExp("^(-)?[0-9]{1,3}(\\"+Y+"[0-9]{3})*$"),W=new RegExp("^(-)?[0-9]+$");return(String(V).indexOf(Y)&&X.test(V))||W.test(V);},isNumeric:function P(Y,Z){var X=R(),a=K(),W=new RegExp("^(-)?[0-9]{1,3}(\\"+a+"[0-9]{3})*(\\"+X+"[0-9]+)?$"),V=new RegExp("^(-)?[0-9]*(\\"+X+")?[0-9]+$");return(String(Y).indexOf(a)&&W.test(Y))||V.test(Y);},parseInteger:function L(V,W){if(!this.isInt(V)){return Number.NaN;}return parseInt(this.toString(V,true),W);},parseNumeric:function B(V){if(!this.isNumeric(V)){return Number.NaN;}return parseFloat(this.toString(V,true));},inNumericRange:function S(W,X,V){W=this.parseNumeric(W);V=(V!=null)?this.parseNumeric(String(V)):Number.NaN;X=(X!=null)?this.parseNumeric(String(X)):Number.NaN;if(V!=Number.NaN&&(W>V||isNaN(W))){return 1;}if(X!=Number.NaN&&(W<X||isNaN(W))){return -1;}return 0;},convertToUSUnits:function(Y,X,W){var V=Y;X=X||C;switch(parseInt(X,10)){case T.CM:V=parseFloat(this.toString(Y))/2.54+"";break;case T.MM:V=parseFloat(this.toString(Y))/25.4+"";break;case T.PT:V=parseFloat(this.toString(Y))/72+"";break;case T.PC:V=parseFloat(this.toString(Y))/6+"";break;case T.PX:V=parseFloat(this.toString(Y))/G+"";break;}return W?V:this.toLocaleString(V);},convertToLocalUnits:function(Y,X,W){var V;X=X||C;switch(parseInt(X,10)){case T.CM:V=(parseFloat(this.toString(Y))*2.54).toFixed(4)+"";break;case T.MM:V=(parseFloat(this.toString(Y))*25.4).toFixed(4)+"";break;case T.PT:V=(parseFloat(this.toString(Y))*72).toFixed(4)+"";break;case T.PC:V=(parseFloat(this.toString(Y))*6).toFixed(4)+"";break;case T.PX:V=(parseFloat(this.toString(Y))*G)+"";break;default:V=parseFloat(this.toString(Y)).toFixed(4)+"";}return W?V:this.toLocaleString(V);},convertUnits:function(W,X,V){return this.convertToLocalUnits(this.convertToUSUnits(V,W,true),X,true);},toLocaleString:function(V){return(V+"").replace(".",R());},toString:function(X,V){if(V===true){var W=this.getThousandSepRegex();if(W){X=String(X).replace(W,"");}}return String(X).replace(R(),".");},getThousandSepRegex:function(){if(this.thousandSeparatorRegex==null){this.thousandSeparatorRegex=new RegExp(K().replace(/(\W){1}/g,"\\$1"),"g");}return this.thousandSeparatorRegex;},addSeparators:function(X,W){var V=W;if(W=="."||W=="*"||W=="\\"){V="\\"+W;}return X.reverse().replace(/(\d{3})/g,"$1"+W).reverse().replace(new RegExp("^(-)?"+V),"$1");},format:function(Z,Y,c,V){var b="",a=(Y>0)?".":"",W=[];c=(c)?c:"";for(var X=0;X<Y;X++){W.push("0");}W=W.join("");switch(Z){case E.GENERAL:b="0.00";break;case E.PERCENT:b="0"+a+W+"%";break;case E.SCIENTIFIC:b="0"+a+W+"E+00";break;default:b='"'+c+'"#,##0'+a+W;}return this.formatByMask(b,V);},getDecimalLength:function J(X){var V=X.indexOf("."),Y=0;if(V!==-1){var W=X.substr(V+1,X.length).match(/\d+/);if(W&&W.length>0){Y=W[0].length;}}return Y;},formatByMask:function(AB,AR){var y,r;if(isNaN(AR)){y=new Date(AR);if(isNaN(y)){return AR;}r=true;}if(AB==="General"){return String(parseFloat(AR).toFixed(2));}var q=String(AB).split(";"),l="",Y=q[0],h="\u00A4",AK=/"[^"]*"/g,k=(AB&&AB.replace(AK,h).replace(/\[.*\]/g,h))||"",AQ=["m","y","d","h","s"],AG=false;F.forEach(AQ,function(i){AG=AG||k.indexOf(i,0)!==-1;});if(AG){if(window.SSF){l=window.SSF.format(AB,AR);}if(l!==""){return l;}else{return H(r?y:U(AR),AB,AR);}}var AF=Y.indexOf("E+"),e=Y.indexOf("%"),u=Y.match(/\".+?\"/g),w=Y.indexOf("?/?")>-1,z=(AF!=-1)?E.SCIENTIFIC:((e!=-1)?E.PERCENT:((u)?E.CURR:w?E.FRACTION:E.FIXED)),p="",AM="",n=false,W=new String(AR),d=this.parseNumeric(AR)||parseFloat(AR);if(u){if(Y.match(/\[\$.+?\]/g)){for(var f=0;f<u.length;f++){Y=Y.replace(u[f],u[f].substring(1,u[f].length-1));if(u[f].match(/\[\$.+?\]/g)){u[f]=u[f].replace(/\[\$.+?\]/g,u[f][u[f].indexOf("[$")+2]);}}Y=Y.replace(/\[\$.+?\]/g,'"#"'.replace("#",Y[Y.indexOf("[$")+2]));}p=M(Y,u);p=p.replace(Y.replace(/\".+?\"/g,""),h);}if(d<0){W=W.substring(1,W.length);d=-d,n=true;if(q.length>1){var b=q[1].replace(/\[.*\]/,"");AM=M(b.replace(q[0],h));}}var c=function(j,i){return(i)?i.replace(h,j):"-"+j;};if(z==E.FRACTION){var AJ,AI,AP,o=10,x,t=0,AD,AL,Z,X=false,AA;if(AB.indexOf("# ")>-1){X=true;}for(AJ=5;AJ>0;AJ--){AA="/";for(AI=0;AI<AJ;AI++){AA+="?";}if(AB.indexOf(AA)>-1){for(AI=1;AI<AJ;AI++){o*=10;}break;}}if(X){t=Math.floor(Number(d));d-=t;}AL=o/2;AP=-1;AD=d*o;for(AJ=o-1;AJ>=2;AJ--){Z=(AD*AJ)/o;Z=Z-Math.floor(Z);Z=Z*o;if(Math.abs(Z-o)<Z){Z=Math.abs(Z-o);}Z=Z/AJ;if(Z<AL){AL=Z;AP=AJ;}else{if((Z==AL)&&(Z==0)){AL=Z;AP=AJ;}}}x=Math.round(AP*AD/o);for(AJ=AP;AJ>=2;AJ--){if((x%AJ==0)&&(AP%AJ==0)){x=x/AJ;AP=AP/AJ;break;}}if(AP==o){AP=1;x=0;}if(x==0){AP=1;}if(x==AP){if(X){l=""+(t+1);}else{l="1";}}else{if(X&&t>0){if(x==0){l=t;}else{l=t+" "+x+"/"+AP;}}else{if(x==0){l="0";}else{l=x+"/"+AP;}}}if(n){l=c(l,AM);}}else{if(z==E.SCIENTIFIC){if(d!=0){var AS=Math.floor(Math.log(d)/Math.LN10),AH=d/Math.pow(10,AS),AT=Y.substring(0,AF),g=AT.indexOf("."),AC=Y.length-Y.indexOf("E+")-(""+Math.abs(AS)).length-2,AJ,V=AS<0;AS=Math.abs(AS);for(AJ=0;AJ<AC;AJ++){AS="0"+AS;}l+=Number(AH).toFixed((g!=-1)?AT.length-g-1:0);l=((n)?c(l,AM):l)+"E"+(V?"-":"+")+AS;}else{l="0";}}else{if(z==E.PERCENT){Y=Y.substring(0,Y.length-1);W=String(d*100);}var g=Y.indexOf("."),a=0,AO,s=g>=0?Y.substring(0,g):Y;if(s.match(/[#0\?],$/)){d/=1000;W=String(d);}AO=this.getDecimalLength(W);if(g!=-1){a=O(AO,Y.substr(g+1,Y.length));}l=String(parseFloat(W).toFixed(Math.min(a,20)));var AN=l.split(".");var AE=Y.replace(/"[^"]*"/g,"").match(/[#\d]+[^\.\d#]+[#\d]+/);if(AE!==null){AN[0]=this.addSeparators(AN[0],K());}l=AN.join(R());if(z==E.CURR){l=p.replace(h,l);if(l===p&&window.SSF){l=window.SSF.format(AB,AR);}}if(z==E.PERCENT){l+="%";}if(n){l=c(l,AM);}}}return l;},validateFormat:function(V){var W=true,X=String(V).split(";");if(X[1]&&X[1].indexOf(X[0])<0){W=false;}return W;},generateUniqueID:function(V){var X="0123456789ABCDEF".split(""),Y=[];for(var W=0;W<V;W++){Y[W]=X[0|Math.random()*16];}return Y.join("");},countOfDecimals:function(W,X){var V=String(W);return V.length-(V.indexOf(X!==undefined?X:R())+1);}});mstrmojo.num.UNIT=T;mstrmojo.num.UNIT_SYMBOL=A;})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.locales");var c=mstrmojo.array,P=mstrmojo.meta.TP,G=mstrmojo.meta.STP,O=mstrmojo.hash,F={ANDOR:14,MQ:10,MC:12,AQ:2,AL:6,AC:9,AE:5,F:13,R:21,B:20,XML:1,RLS:15},B={};var W;for(W in F){B[F[W]]=true;}var a={};a[F.AQ]="a";a[F.AL]="a";a[F.AC]="a";a[F.AE]="a";a[F.MQ]="m";a[F.MC]="m";a[F.F]="f";a[F.R]="r";a[F.XML]="p";var K={};K[F.MQ]=["not","m","fn","fnt","cs","dmy","idcsi"];K[F.MC]=["not","m","fn","fnt","m2","m3","p","dmy","idcsi"];K[F.AE]=["not","a","fn","es","a2","fm2","p"];K[F.AQ]=["not","a","fm","fn","cs"];K[F.AL]=["not","a","fm","fn","cs"];K[F.AC]=["not","a","fm","a2","fm2","a3","fm3","fn","cs"];K[F.R]=["not","r"];K[F.F]=["not","f"];K[F.XML]=["not","n","p"];var M={};M[F.MQ]="METRIC_FNS";M[F.MC]="METRIC_FNS";M[F.AQ]="FORM_FNS";M[F.AL]="FORM_FNS";M[F.AC]="FORM_FNS";M[F.AE]="ELEM_FNS";var N={FILTER:1,REPORT:3,METRIC:4,FOLDER:8,PROMPT:10,FUNCTION:11,ATTR:12,FACT:13,DIM:14,FORM:21,ROLE:43,CONS:47},b={FILTER:256,CUSTOMGROUP:257,PROMPT:2560,PROMPT_BOOLEAN:2561,PROMPT_LONG:2562,PROMPT_STRING:2563,PROMPT_DOUBLE:2564,PROMPT_DATE:2565,PROMPT_OBJECTS:2566,PROMPT_ELEMENTS:2567,PROMPT_EXPRESSION:2568,PROMPT_EXPRESSION_DRAFT:2569,PROMPT_DIMTY:2570,PROMPT_BIGDECIMAL:2571,REPORT_GRID:768,REPORT_GRAPH:769,REPORT_ENGINE:770,REPORT_TEXT:771,REPORT_DATAMART:772,REPORT_BASE:773,REPORT_GRIDGRAPH:774,REPORT_NONINTERACTIVE:775,REPORT_CUBE:776,REPORT_EMMACUBE:779,CONS:12032,NDE:12033},T={a:N.ATTR,a2:N.ATTR,m:N.METRIC,m2:N.METRIC,r:N.REPORT,f:N.FILTER,p:N.PROMPT},U={f:b.FILTER};var V={};V[F.MQ]=N.METRIC;V[F.MC]=N.METRIC;V[F.AQ]=N.ATTR;V[F.AL]=N.ATTR;V[F.AC]=N.ATTR;V[F.AE]=N.ATTR;V[F.F]=N.FILTER;V[F.R]=N.REPORT;var J=function(d){var H=d.length,g={},e;for(e=0;e<H;e++){var h=d[e];g[h.did]=h.n;}return g;},E=function(e){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){d.t=d.tp;}}return e;},X=function(e,g){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){if(g){d.t=g;}else{delete d.t;}}}return e;},Z=function(d,f){if(!f){f=[];}f.length=0;var e,H;for(e=0,H=d.length;e<H;e++){f[e]=d[e];}return f;},L={0:[{did:"1,76"},{did:"1,79"},{did:"1,77"},{did:"1,80"},{did:"1,78"},{did:"1,81"},{did:"1,18"},{did:"1,43"}],1:[{did:"2,1"},{did:"2,2"},{did:"3,1"},{did:"3,2"}]};var R={0:[{did:"1,22"},{did:"1,57"}]};mstrmojo.expr=mstrmojo.provide("mstrmojo.expr",{ET:F,ETs:B,ET2TGT:a,ET2COND:K,ET2TP:V,FN:{EQUAL:6,NOT_EQUAL:7,GREATER:8,LESS:9,GREATER_EQUAL:10,LESS_EQUAL:11,IN_LIST:22,NOT_IN_LIST:57,BETWEEN:17,NOT_BETWEEN:44,IS_NULL:54,IS_NOT_NULL:55,AND:19,OR:20,NOT:21,SEARCH:158},FN_MRP:{BETWEEN:3,EXCLUDE_TOP:4,EXCLUDE_BOTTOM:5,BETWEEN_DESCENDING:13},FNT:{DEF:1,RANK:2,PER:3},FN_SEP:",",TP:N,STP:b,DMY_TP:{ATTR:-1,DIM:-2},DTP:{UNKNOWN:-1,INTEGER:1,UNSIGNED:2,NUMERIC:3,DECIMAL:4,REAL:5,DOUBLE:6,FLOAT:7,CHAR:8,VARCHAR:9,LONGVARCHAR:10,BINARY:11,VARBIN:12,LONGVARBIN:13,DATE:14,TIME:15,TIMESTAMP:16,SHORT:21,LONG:22,MBCHAR:23,BOOLEAN:24,PATTERN:25,BIGDECIMAL:30},BFTP:{RESERVED:0,HIDDEN:-1,DATETIME:1,NUMBER:2,TEXT:3,PICTURE:4,URL:5,EMAIL:6,TAG:7,DATE:8,TIME:9,SYMBOL:10,BIGDECIMAL:11,PHONENUMBER:12},METRIC_DTP:3,FN_DTP:{NUM:0,CHAR:1,DATE:2},DTP2PROMPT_STP:{"-1":b.PROMPT,1:b.PROMPT_LONG,2:b.PROMPT_LONG,3:b.PROMPT_LONG,4:b.PROMPT_DOUBLE,5:b.PROMPT_DOUBLE,6:b.PROMPT_DOUBLE,7:b.PROMPT_DOUBLE,8:b.PROMPT_STRING,9:b.PROMPT_STRING,10:b.PROMPT_STRING,14:b.PROMPT_DATE,15:b.PROMPT_DATE,16:b.PROMPT_DATE,21:b.PROMPT_LONG,22:b.PROMPT_LONG,23:b.PROMPT_STRING,24:b.PROMPT_BOOLEAN,30:b.PROMPT_BIGDECIMAL},DTP2FN_DTP:{"-1":0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1,9:1,10:1,11:0,12:0,13:0,14:0,15:0,16:0,21:0,22:0,23:1,24:0,25:1,30:0,34:0},fnCstCount:function A(e,d){var g=this.FN,h=this.FN_MRP,H=this.FNT;if(d===H.DEF||d===undefined){switch(e){case g.BETWEEN:case g.NOT_BETWEEN:return 2;case g.IS_NULL:case g.IS_NOT_NULL:return 0;}}else{if(d===H.PER||d===H.RANK){switch(e){case h.BETWEEN:case h.BETWEEN_DESCENDING:return 2;}}}return 1;},fn_List:function S(d,H){var e=this.FN;return d==e.IN_LIST||d==e.NOT_IN_LIST;},fn_AC_MC:function Y(d,H){var e=this.FN;return(d==e.EQUAL)||(d==e.NOT_EQUAL)||(d==e.GREATER)||(d==e.LESS)||(d==e.GREATER_EQUAL)||(d==e.LESS_EQUAL);},fnName:function Q(h,g,d,f){var H=this[M[h]];if(H&&H.constructor===Object){H=H[this.DTP2FN_DTP[f]]||H["*"];}if(h===F.MQ){H=H.concat(mstrmojo.locales.expression.MetricRP);}var e=c.find(H,"did",(d||1)+this.FN_SEP+g);if(e>-1){return H[e].n;}return"";},findTargets:function I(o,f,q){if(!q){q={};}if(o){var n;for(n in T){var y=o[n];if(y){if(!y[P]){y[P]=T[n];}if(!y[G]&&U[n]){y[G]=U[n];}q[y[f]]=y;}}if(o.dmy){var j=this.TP.ATTR,r=this.DMY_TP.ATTR,e=o.dmy.uts,x,d;for(x=0,d=(e&&e.length)||0;x<d;x++){var l=e[x];if(l&&l.utp===r){var g=l.utgt;if(!g.t){g.t=j;}q[g[f]]=g;}}}var H=o.nds,p,v;for(p=0,v=(H&&H.length)||0;p<v;p++){this.findTargets(H[p],f,q);}var s=o.cs,w=s&&s.length;if(w){for(p=0;p<w;p++){this.findTargets(s[p],f,q);}}}return q;},onLocaleUpdated:function(){var d=mstrmojo.locales.expression,H=mstrmojo.expr;H.BRANCH_FNS=O.copy(J(d.BranchQual),H.BRANCH_FNS);H.ELEM_FNS=Z(X(d.Element,"fn"),H.ELEM_FNS);H.METRIC_FNS={"*":X(c.filter(d.Metric.concat(d.MetricRP),function(e){return e.did&&(c.find(R["0"],"did",e.did)<0);}))};H.FORM_FNS={0:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0);})),1:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["1"],"did",e.did)<0);})),2:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0)&&(c.find(L["1"],"did",e.did)<0);}))};H.DIMTYLEVELS=Z(X(d.DimtyLevels),H.DIMTYLEVELS);},getSortedObjectsByTypeGroup:function D(f){var H=0,d=1,e=2;function g(h){switch(h.t){case N.METRIC:return d;case N.ATTR:case N.DIM:case N.CONS:return H;case N.FILTER:return h.st===b.CUSTOMGROUP?H:e;default:return e;}}return f.slice(0).sort(function(l,k){var n=g(l)-g(k);if(n){return n;}var j=l.n.toUpperCase(),i=k.n.toUpperCase(),h=j.localeCompare(i);if(h){return h;}return l.n.localeCompare(k.n);});},mapBaseFormTypeToDataType:function C(e){e=parseInt(e);if(e===NaN){return -1;}var d=this.BFTP,H=this.DTP;switch(e){case d.DATETIME:return H.TIMESTAMP;case d.DATE:return H.DATE;case d.TIME:return H.TIME;case d.NUMBER:return H.REAL;case d.TEXT:return H.CHAR;case d.BIGDECIMAL:return H.BIGDECIMAL;default:return H.CHAR;}}});mstrmojo.expr.onLocaleUpdated();}());(function(){mstrmojo.requiresCls("mstrmojo.locales");var X=function(){return mstrmojo.locales.datetime;},L=mstrmojo.string;mstrmojo.date=mstrmojo.provide("mstrmojo.date",{monthNumbers:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},REGEXPS:{DATES:{},TIMES:{}},CACHE:{PARSEDATE:{CONTAINS:{},EQUALS:{}},PARSETIME:{CONTAINS:{},EQUALS:{}}},now:Date.now||function D(){return new Date().getTime();},isDate:function Y(b,f,a){var d=this.parseDate(b,a);var e=!!(d&&this.doesDateExist(d.month,d.day,d.year));if(f){if(e){var c=this.formatDateInfo(d,X().DATEOUTPUTFORMAT);if(a){return{match:d.match,formatted:c};}return c;}return null;}return !!e;},formatDateInfo:function R(d,f){if(!f){return"";}var a=d.day,e=d.month,c=d.year;var b=f.replace(/dd/g,this.formatInteger(a,2)).replace(/d/g,Number(a)).replace(/yyyy/g,Number(c)).replace(/yy/g,this.formatInteger(Number(c)%100,2)).replace(/MMM/g,"~~~~").replace(/MM/g,"@@").replace(/M/g,"^").replace(/MMMM/g,X().MONTHNAME_FULL[Number(e)-1]).replace(/\~\~\~\~/g,X().MONTHNAME_SHORT[Number(e)-1]).replace(/\@\@/g,this.formatInteger(e,2)).replace(/\^/g,Number(d.month));return b;},parseDate:function Z(l,f,j){if(l==null){return false;}if(typeof l!=="string"){l=String(l);}l=L.trim(l);var a=this.CACHE.PARSEDATE[f?"CONTAINS":"EQUALS"],c=a[l];if(c||(c===null)){return c;}var b=null;var h;if(j){h=[j];}else{h=[].concat(X().DATEINPUTFORMATS);h.unshift(X().DATEOUTPUTFORMAT);}var d,e;for(d=0,e=h.length;d<e;d++){var g=this._buildRegExp4DateFormat(h[d]),k=g&&l.match(f?g.reContains:g.reEquals);if(k){b={match:k[0],year:g.yearIndex&&this.fourDigitYear(k[g.yearIndex]),day:g.dayIndex&&parseInt(Number(k[g.dayIndex]),10),month:g.monthIndex&&this.numericMonth(k[g.monthIndex])};break;}}a[l]=b;return b;},isTime:function I(b,e,a){var f=this.parseTime(b,a);var d=!!(f&&this.doesTimeExist(f.hour,f.min,f.sec));if(e){if(d){var c=this.formatTimeInfo(f,X().TIMEOUTPUTFORMAT);if(a){return{match:f.match,formatted:c};}return c;}return null;}return !!d;},parseTime:function J(n,f,k){if(n==null){return false;}if(typeof n!=="string"){n=String(n);}n=L.trim(n);var a=this.CACHE.PARSETIME[f?"CONTAINS":"EQUALS"],c=a[n];if(c||(c===null)){return c;}var b=null;var j;if(k){j=[k];}else{j=[].concat(X().TIMEINPUTFORMATS);j.unshift(X().TIMEOUTPUTFORMAT);}var d,e;for(d=0,e=j.length;d<e;d++){var h=this._buildRegExp4TimeFormat(j[d]),l=h&&n.match(f?h.reContains:h.reEquals);if(l){var g=h.ampmIndex&&l[h.ampmIndex];b={match:l[0],hour:h.hourIndex&&this.capitalHour(l[h.hourIndex],g),min:h.minIndex&&parseInt(Number(l[h.minIndex]),10),sec:h.secIndex&&parseInt(Number(l[h.secIndex]),10)};break;}}a[n]=b;return b;},formatTimeInfo:function S(d,b){if(!b){return"";}var c=!(Number(d.hour)%12)?12:(Number(d.hour)%12),a=b.replace(/HH/g,this.formatInteger(d.hour,2)).replace(/H/g,Number(d.hour)).replace(/hh/g,this.formatInteger(c,2)).replace(/h/g,c).replace(/mm/g,this.formatInteger(Number(d.min)||0,2)).replace(/m/g,Number(d.min)||0).replace(/ss/g,this.formatInteger(Number(d.sec)||0,2)).replace(/s/g,Number(d.sec)||0).replace(/a/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/tt/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/AM\/PM/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME);return a;},doesTimeExist:function G(f,b,e){var d=parseInt(f,10);if(d>=0&&d<=23){var a=parseInt(b,10);if(a>=0&&a<=59){if(!e){return true;}var c=parseInt(e,10);if(c>=0&&c<=59){return true;}}}return false;},capitalHour:function C(a,b){a=parseInt(Number(a),10);if(b&&(b.match(X().AM_NAME)||b.match(/AM/i))){return a%12;}if(b&&(b.match(X().PM_NAME)||b.match(/PM/i))){return 12+(a%12);}return a;},getTimeStamp:function O(){var b=new Date();var a=[b.getMonth()+1,b.getDate(),b.getFullYear()];var e=[b.getHours(),b.getMinutes(),b.getSeconds()];var d=(e[0]<12)?"AM":"PM";e[0]=(e[0]<12)?e[0]:e[0]-12;e[0]=e[0]||12;for(var c=1;c<3;c++){if(e[c]<10){e[c]="0"+e[c];}}return a.join("-")+" "+e.join(":")+" "+d;},isDateAndOrTime:function V(a,b){return this.isDateTime(a,b)||this.isDate(a,b)||this.isTime(a,b);},isDateTime:function B(j,a){var e=this.parseDateAndOrTime(j),h=e&&e.date,d=e&&e.time,g=!!h&&!!d&&this.doesDateExist(h.month,h.day,h.year)&&this.doesTimeExist(d.hour,d.min,d.sec);if(a){if(g){var b=this.formatDateInfo(h,X().DATEOUTPUTFORMAT),c=this.formatTimeInfo(d,X().TIMEOUTPUTFORMAT),i=j.indexOf(h.match),f=j.indexOf(d.match);return(f<i)?c+" "+b:b+" "+c;}return null;}return !!g;},parseDateAndOrTime:function Q(b,a,f){var c=this.parseDate(b,true,a);var d=L.trim((c&&c.match)?b.replace(c.match,""):b),e=this.parseTime(d,false,f);if(!c&&!e){return null;}return{date:c,time:e};},inDateTimeRange:function P(c,e,h){var b=this.parseDateAndOrTime(c),f=b&&b.date,i=b&&b.time;if(!f&&!i){return 0;}if(e!=null){var d=this.parseDateAndOrTime(e);if(f&&d&&d.date){var j=this.compareDate(f,d.date);if(j<0){return -1;}if(j==0){if(i&&d.time&&(this.compareTime(i,d.time)<0)){return -1;}}}}if(h!=null){var a=this.parseDateAndOrTime(h);if(f&&a&&a.date){var g=this.compareDate(f,a.date);if(g>0){return 1;}if(g==0){if(i&&a.time&&(this.compareTime(i,a.time)>0)){return 1;}}}}return 0;},compareDate:function A(c,a){if(c===a){return 0;}var d=typeof c==="string"?this.parseDate(c):c,b=typeof a==="string"?this.parseDate(a):a;if(!d){return -1;}if(!b){return 1;}return(d.year-b.year)||(d.month-b.month)||(d.day-b.day)||0;},compareTime:function K(b,a){if(b===a){return 0;}var d=typeof b==="string"?this.parseTime(b):b,c=typeof a==="string"?this.parseTime(a):a;if(!d){return -1;}if(!c){return 1;}return(d.hour-c.hour)||(d.min-c.min)||(d.sec-c.sec)||0;},compareDateTime:function U(b,a){return this.compareDate(b,a)||this.compareTime(b,a);},compareDateAndOrTime:function E(h,f){if(h===f){return 0;}var b=typeof h==="string"?this.parseDateAndOrTime(h):h,a=typeof f==="string"?this.parseDateAndOrTime(f):f;if(!b){return -1;}if(!a){return 1;}var g=b.date,e=a.date,d=b.time,c=a.time;return this.compareDate(g,e)||this.compareTime(d,c);},_buildRegExp4DateFormat:function N(c){if(!c){return null;}var e=this.REGEXPS.DATES[c];if(!e){if(!this.REGEXPS.MONTHNAME_FULL){this.REGEXPS.MONTHNAME_FULL=X().MONTHNAME_FULL.join("|");this.REGEXPS.MONTHNAME_SHORT=X().MONTHNAME_SHORT.join("|");}e=this.REGEXPS.DATES[c]={};e.formatStr=c;var b=e.reStr=c.replace(/([^M|d|y|\s])/g,"\\$1").replace(/dd/g,"~~~~").replace(/d/g,"(\\d{1,2})").replace(/\~\~\~\~/g,"(\\d\\d)").replace(/yyyy/g,"(\\d\\d\\d\\d)").replace(/yy/g,"(\\d\\d)").replace(/MMMM/g,"@@@@").replace(/MMM/g,"@@@").replace(/MM/g,"(\\d\\d)").replace(/M/g,"(\\d{1,2})").replace("@@@@","("+this.REGEXPS.MONTHNAME_FULL+")").replace("@@@","("+this.REGEXPS.MONTHNAME_SHORT+")");e.reEquals=new RegExp("^"+b+"$");e.reContains=new RegExp("^"+b+"\\b");var f=[{key:"monthIndex",index:c.indexOf("M")},{key:"dayIndex",index:c.indexOf("d")},{key:"yearIndex",index:c.indexOf("y")}];f.sort(function(h,g){return h.index-g.index;});var a=1,d;for(d=0;d<3;d++){e[f[d].key]=f[d].index>-1?a++:null;}}return e;},_buildRegExp4TimeFormat:function F(d){if(!d){return null;}var f=this.REGEXPS.TIMES[d];if(!f){if(!this.REGEXPSTR_AMPM){this.REGEXPSTR_AMPM=[X().AM_NAME,X().PM_NAME,String(X().AM_NAME).toLowerCase(),String(X().PM_NAME).toLowerCase()].join("|");}f=this.REGEXPS.TIMES[d]={};f.formatStr=d;var c=d.replace(/\'\'/g,'"');var g=c.match(/\'(.+?)\'/g);c.replace(/\'(.+?)\'/g,"*");c=c.replace(/([^H|h|m|s|z|Z|a|t|\s|A|P|M|\/])/g,"\\$1").replace(/HH|hh/g,"(\\d\\d)").replace(/H|h/g,"(\\d{1,2})").replace(/mm/g,"(\\d\\d)").replace(/m/g,"(\\d{1,2})").replace(/ss/g,"(\\d\\d)").replace(/s/g,"(\\d{1,2})").replace(/a/g,"("+this.REGEXPSTR_AMPM+")").replace(/AM\/PM/,"("+this.REGEXPSTR_AMPM+")").replace(/tt/g,"("+this.REGEXPSTR_AMPM+")").replace(/z|Z/g,"(.+?)");var e,a;for(e=1,a=(g&&g.length)||0;e<a;e++){c=c.replace(/\*/,g[e]);}c=c.replace(/\"/g,"'");f.reEquals=new RegExp("^"+c+"$");f.reContains=new RegExp(c);var h=[{key:"hourIndex",index:d.search(/h|H/)},{key:"minIndex",index:d.indexOf("m")},{key:"secIndex",index:d.indexOf("s")},{key:"ampmIndex",index:d.search(/tt|a|AM\/PM/)},{key:"zoneIndex",index:d.search(/z|Z/)}];h.sort(function(j,i){return j.index-i.index;});var b=1;for(e=0;e<5;e++){f[h[e].key]=h[e].index>-1?b++:null;}}return f;},doesDateExist:function M(d,a,b){var c=new Date(b,d-1,a);return b==c.getFullYear()&&d==c.getMonth()+1&&a==c.getDate();},fourDigitYear:function T(b){b=parseInt(Number(b),10);if(!isNaN(b)){var a=(X().TWODIGITYEARSTART%100)||0;if(b>=0&&b<=a){b=2000+b;}else{if(b>a&&b<100){b=1900+b;}}}return b;},numericMonth:function W(e){var d=parseInt(Number(e),10),c=mstrmojo.array;if(!isNaN(d)){return d;}var a=(e&&e.length)||0,b=-1;if(a){if(a<=3){b=c.indexOf(X().MONTHNAME_SHORT,e);}if(b===-1){b=c.indexOf(X().MONTHNAME_FULL,e);}}return b+1;},formatInteger:function H(c,b){var f=String(c),e=Math.max(b-f.length,0);if(e>0){var a=[f],d;for(d=1;d<=e;d++){a.push("0");}f=a.reverse().join("");}return f;},getFirstDateOfMonth:function(b,a){return new Date(b,a-1,1);},getDateObject:function(g,a,f,c,e,b){g=g||0;a=a||1;f=f||1;c=c||0;e=e||0;b=b||0;return new Date(g,a-1,f,c,e,b);},getDateFromDateInfo:function(a){return this.getDateObject(a.date&&a.date.year,a.date&&a.date.month,a.date&&a.date.day,a.time&&a.time.hour,a.time&&a.time.min,a.time&&a.time.sec);},getDateJson:function(a){return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),min:a.getMinutes(),sec:a.getSeconds()};},isLeapYear:function(a){return !(a%400)||(!(a%4)&&!!(a%100));},getDaysOfMonth:function(c,a){var b=[31,28,31,30,31,30,31,31,30,31,30,31];if(a==2&&this.isLeapYear(c)){return 29;}return b[a-1];},getPreMonth:function(b,a){if(a===1){return{y:b-1,m:12};}return{y:b,m:a-1};},getNextMonth:function(b,a){if(a===12){return{y:b+1,m:1};}return{y:b,m:a+1};}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var A=false,D="mstrmojo.Binding",I="bindings",H=mstrmojo.registry;function B(K){var L;for(L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function C(K,M){if(!A){mstrmojo.requiresCls(D);A=true;}var N;for(N in K){var J=K[N];if(J===null||J===undefined){continue;}var L=typeof J;if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=H.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function E(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[I]);if(K){delete this[I];this._set_bindings(I,K);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children,J=(M&&M.length)||0;if(J){var L;for(L=0;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function G(){var J=this.bindings;if(J){B(J);delete this.bindings;}},_set_bindings:function F(L,J){var K=this[I];if(J!==K){if(K){B(K);}this[I]=J;if(J){C(J,this);}return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var D=mstrmojo.registry,K=mstrmojo.array,I=mstrmojo.publisher;function G(Q,R){if(R){R.parent=Q;var P=D.ref(R);if(R!==P){delete R.parent;}return P;}return null;}function L(Q,R){var P=R.alias;if(P!==null&&P!==""){Q[P]=R;}}function N(Q,R){var P=R.alias;if(R.parent===Q){delete R.parent;}if((P!==null&&P!=="")&&(Q[P]===R)){delete Q[P];}}function A(T,Q){var P=Q&&Q.length,S,R;if(P){S=[];for(R=0;R<P;R++){var U=G(T,Q[R]);if(!U){continue;}S.push(U);L(T,U);}}return S;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,children:null,postCreateChildren:mstrmojo.emptyFn,onaddChild:null,onremoveChild:null,initChildren:function F(){var P="children",Q=this[P];if(!Q){return ;}this[P]=null;this._set_children(P,Q,true);this.postCreateChildren();},_set_children:function E(S,Q,P){var R=this.children;if(Q!==R){if(R){this.removeChildren(null,P);}this.addChildren(Q,0,P);}return false;},destroyChildren:function C(S){var R=this.children,P=(R&&R.length)||0,Q;if(P){for(Q=P-1;Q>-1;Q--){var T=R[Q];if(T&&T.destroy){T.destroy(S);if(!S){N(this,T);}}}if(!S){R.length=0;}}},invalidateChildren:function B(){mstrmojo.array.forEach(this.children,function(P){P.invalidate();});},invalidate:function H(){this.invalidateChildren();},addChildren:function O(U,Q,R){if(!U){return U;}var T=U.constructor===Array,P=A(this,T?U:[U]);if(P&&P.length){var S=this.children||[];if(Q===null||Q===undefined){Q=S.length;}this.children=K.insert(S,Q,P);if(!R&&(this.onaddChild||I.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:P,index:Q});}}return T?P:(P&&P[0]);},removeChildren:function J(V,R){var T=this.children,U=V?[V]:(this.children||[]).concat(),Q=U.length,P=-1,S;if(Q){for(S=Q-1;S>-1;S--){N(this,U[S]);}if(V){P=K.removeItem(T,V);}else{if(T){T.length=0;P=0;}}if(!R&&(this.onremoveChild||I.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:U,index:P});}}return P;},removeAndDestroyChild:function M(R,P,Q){if(R){if(R.parent!==this){throw"Unable to remove an object that is not in the children collection.";}this.removeChildren(R,P);R.destroy(Q);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.QueuedXHR");var F=mstrmojo.hash;function J(K,L){return function(){if(K[L]){K[L]();}};}var B=[];function H(L){var K;switch(L.cacheLevel){case mstrmojo.AjaxCall.CACHELEVEL_LOCAL:if(L._cache==null){L._cache=[];}K=L._cache;break;default:if(B==null){B=[];}K=B;break;}return K;}function E(N){var M=H(N);var P={cache:M,idx:-1},O=N.params;if("xts" in O){delete O.xts;}for(var L=0,K=M.length;L<K;L++){var Q=M[L];if(Q&&F.equals(Q.url,N.url)&&F.equals(Q.params,O)){P.idx=L;break;}}return P;}function C(L){var K=H(L),M=F.copy(L.params);delete M.xts;K.push({url:L.url,params:M,res:F.copy(L.response)});}function D(K){var L=E(K);if(L&&L.idx>=0){K.response=L.cache[L.idx].res;return true;}return false;}mstrmojo.AjaxCall=mstrmojo.declare(mstrmojo.QueuedXHR,null,{scriptClass:"mstrmojo.AjaxCall",method:"POST",url:"",params:null,onsuccess:null,onerr:null,oncomplete:null,oncancel:null,readCache:false,writeCache:false,cacheLevel:"",_cache:null,useQueue:false,init:function I(K){this._super(K);F.copy(K,this);},send:function A(){var K=this;if(this.readCache&&D(this)){this.onsuccess();return ;}this.request(this.method,this.url,{success:function(){if(K.writeCache){C(K);}if(K&&K.onsuccess){K.onsuccess();}},failure:J(K,"onerr"),complete:J(K,"oncomplete")},this.params,!this.useQueue);},cancel:function G(){this._super();if(this.oncancel){this.oncancel();}}});mstrmojo.AjaxCall.CACHELEVEL_GLOBAL="global";mstrmojo.AjaxCall.CACHELEVEL_LOCAL="local";})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.publisher");var C=mstrmojo.publisher;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function F(N,H){var G=false,K=this["_set_"+N],I=this[N];if(K){G=K.apply(this,arguments);}else{this[N]=H;G=(I!==H);}if(G){var L=N+"Change",M=this.audibles||{},J=(M[N]===true)||((M[N]!==false)&&(M["*"]!==false));if(J&&(this["pre"+L]||this["on"+L]||this["post"+L]||C.hasSubs(this.id,L))){this.raiseEvent({name:L,prop:N,value:H,valueWas:I});}}return this;},raiseEvent:function B(H){var M=H&&H.name;if(!M){return null;}H.src=this;this.preHandleEvent(H);var K=["pre","on","post"],L=false,I,G;for(I=0,G=K.length;I<G;I++){var J=K[I]+M;if(this[J]){if(this[J](H)===false){L=true;break;}}}if(!L){this.postHandleEvent(H);C.publish(this.id,M,H);}return H;},preHandleEvent:mstrmojo.emptyFn,postHandleEvent:mstrmojo.emptyFn,attachEventListener:function A(G,H,I){return C.subscribe(this.id,G,I,H);},detachEventListener:function E(G){C.unsubscribe(G);},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.hash");var M=mstrmojo.string,L=mstrmojo.hash,E=mstrmojo.dom;var R=mstrmojo.usesFrames?null:document.createElement("span");var J=/mstrAttach:([\w,]+)/g;var Q;function U(a){if(Q===undefined){Q=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return a.replace(J,function Z(g,j){var c=j.split(","),d=[],b=c.length,f;for(f=0;f<b;f++){var h=c[f];if(h){if(Q){if(h.indexOf("mouse")>-1){continue;}else{if(h==="click"){h="touchend";}}}d.push("on"+h+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+h+"', self, event)\"");}}return d.join(" ");});}var N="preBuildRendering",C="buildRendering",B="postBuildRendering";function X(b){var a=b.markupString;if(a.match(/mstrAttach:/)){a=U(a);if(b.markupString===b.constructor.prototype.markupString){b.constructor.prototype.markupString=a;}}var Z=M.apply(a,b);if(Z){if(mstrmojo.usesFrames){var c=(b.domNode&&b.domNode.ownerDocument)||window.document;if(!R||R.ownerDocument!==c){R=c.createElement("span");}}R.innerHTML=Z;var e=R.removeChild(R.firstChild);e.mstrmojoId=b.id;return e;}return null;}function A(b){var a=b.markupSlots,Z,c;if(a){Z={};for(c in a){Z[c]=a[c].call(b);}}return Z;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{markupString:null,markupMethods:null,markupSlots:null,onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function Y(){if((this[N]&&this[N]()===false)||(this[C]()===false)||(this[B]&&this[B]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var Z="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,Z)){this.raiseEvent({name:Z});}return true;},buildDom:function T(){return X(this);},postBuildDom:null,preBuildRendering:mstrmojo.emptyFn,buildRendering:function F(){var Z=this.domNode,a=this.buildDom();this.domNode=a;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(A(this));this.paint();if(a){var d=Z;if(!d){d=this.placeholder;if(d){if(typeof d==="string"){d=document.getElementById(d);}delete this.placeholder;}}if(d){E.replace(d,a);}}var b="onchildRenderingChange",c=this.parent;if(c&&c[b]){c[b](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function S(b){if(this.hasRendered){if(!b){try{var Z=this.domNode;if(Z.parentNode){Z.parentNode.removeChild(Z);}if(mstrmojo.dom.isIE&&Z.outerHTML!=="undefined"){Z.outerHTML="";}}catch(a){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function K(){var a=this.markupMethods;if(!a){return ;}var d=this,e=function(i){var h=a[i];if(h){try{h.apply(d,[true]);}catch(g){throw new Error(["Error in markup method.","Script class: "+d.scriptClass,"Widget id: "+d.id,"Method name: "+i,"Err: "+g.message].join("\n\n"));}}};var c=a.sequence,Z,b,f;if(c){Z=c.length||0;for(b=0;b<Z;b++){e(c[b]);}}else{for(f in a){e(f);}}},redraw:function P(){return false;},refresh:function D(Z){if(this.hasRendered){if(this.redraw()!==true){var a=this.domNode;this.unrender(true);this.placeholder=a;if(Z){Z();}this.render();}}},set:function I(c,Z){this._super(c,Z);if(this.domNode){var a=this.markupMethods,b=a&&a["on"+c+"Change"];if(b){b.apply(this);}}return this;},slotNames:null,addSlots:function G(a){var Z=this.slotNames,b;if(!Z){Z={};this.slotNames=Z;}for(b in a){this[b]=a[b];Z[b]=true;}},removeSlots:function H(Z){if(Z){var a=this.slotNames,b;for(b in Z){delete this[b];if(a){delete a[b];}}}},captureDomEvent:function W(b,Z,c,a){if(this.enabled!==false){this.raiseEvent(mstrmojo._HasMarkup.newDomEvent(b,Z,c||Z.event,a));}},playEffect:function V(a){var Z=this[a];if(Z&&Z.constructor===Object){Z=mstrmojo.insert(mstrmojo.hash.clone(Z));Z.widget=this;this[a]=Z;}if(Z){Z.play();}}});mstrmojo._HasMarkup.addMarkupMethods=function O(a,Z){a.prototype.markupMethods=L.copy(Z,L.copy(a.prototype.markupMethods));};mstrmojo._HasMarkup.MSTRDomEventType=null;mstrmojo._HasMarkup.newDomEvent=function(c,Z,b,a){return{name:c,hWin:Z,e:b,config:a,ctrlKey:E.ctrlKey(Z,b),shiftKey:E.shiftKey(Z,b),metaKey:E.isMetaKey(Z,b),cancel:function(){E.stopPropogation(Z,b);},preventDefault:function(){E.preventDefault(Z,b);},getTarget:function(){return E.eventTarget(Z,b);}};};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var T=mstrmojo.dom,K=mstrmojo.string,X=mstrmojo.array;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:T.isNSIE?"block":"table",DISPLAY_CELL:T.isNSIE?"block":"table-cell",MINHEIGHT:T.isIE6?"height":"minHeight",addClass:function L(e,d){if(e){if(d.constructor!==Array){d=[d];}var Z=e.className||"",g=" "+Z+" ",a=false,Y=d.length,b;for(b=0;b<Y;b++){var f=d[b];if(!g.match(new RegExp("\\s"+f+"\\s"))){Z+=" "+f;a=true;}}if(a){e.className=K.trim(Z);}}return e;},removeClass:function N(c,b){if(!c){return ;}if(b.constructor!==Array){b=[b];}var Z=" "+(c.className||"")+" ",Y=b.length,a;for(a=0;a<Y;a++){Z=Z.replace(new RegExp("\\s"+b[a]+"\\s","g")," ");}c.className=K.trim(Z);},addWidgetCssClass:function M(d,b){var Z=d.cssClass,c=(Z&&Z.split(" "))||[],a;b=[].concat(b);for(a=0;a<b.length;a++){var Y=b[a];if(X.indexOf(c,Y)===-1){c.push(Y);}}d.cssClass=c.join(" ");},removeWidgetCssClass:function F(e,c){var Z=e.cssClass,d=(Z&&Z.split(" "))||[],b;c=[].concat(c);for(b=0;b<c.length;b++){var Y=c[b];var a=X.indexOf(d,Y);if(a!==-1){d.splice(a,1);}}e.cssClass=d.join(" ");},toggleClass:function S(a,Z,Y){if(Y){this.addClass(a,Z);}else{this.removeClass(a,Z);}},applyShadow:function G(c,d,b,a,Y){var Z=c.style;if(T.isDXIE){Z.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+d+"px, OffY="+b+"px, Color='"+Y+"')";}else{if(T.isFF||T.isWK||T.isIE10){Z[T.CSS3_BOXSHADOW]=d+"px "+b+"px "+a+"px "+Y;}}},removeShadow:function B(Z){var Y=Z.style;if(T.isFF||T.isWK||T.isIE10){Y[T.CSS3_BOXSHADOW]="";}},setOpacity:function U(Z,b){if(T.isDXIE&&!T.isIE9){var c=Z.currentStyle.filter;var Y=null;if(c.length>0){Y=Z.filters["DXImageTransform.Microsoft.Alpha"];}if(Y){Y.opacity=b;Y.enabled=(b!==100);}else{if(b<100){var a="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")";Z.style.filter=(c||"")+" "+a;}}}else{Z.style.opacity=b/100-(T.isIE9?0.00001:0);}},buildGradient:function O(Z,b,Y){if(T.supports(T.cssFeatures.GRADIENTS)){var a={};if(T.isDXIE){a.n="filter";a.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+Z+",StartColorStr='"+b+"',EndColorStr='"+Y+"')";}else{if(T.isFF){a.n="background-image";a.v="-moz-linear-gradient("+((Z===0)?"top":"left")+","+b+","+Y+")";}else{if(T.isWK){a.n="background";a.v="-webkit-gradient(linear,"+((Z===0)?"left top, left bottom":"left top, right top")+",from("+b+"),to("+Y+"))";}else{if(T.isIE10||T.isIEW3C){a.n="background";a.v="linear-gradient("+((Z===0)?"to bottom":"to right")+","+b+","+Y+")";}}}}return a;}return null;},buildRoundCorners:function Q(d,c){if(T.supports(T.cssFeatures.ROUND_CORNERS)){var Z=d+"px";var f=Z+(c?" "+Z+" 0 0":"")+";";if(T.isFF||T.isWinPhone||T.isIE10){return"border-radius:"+f;}if(T.isWK){if(!c){return"-webkit-border-radius:"+Z+";";}var e=["left","right"],b=[],Y=-1,a;for(a=0;a<2;a++){b[++Y]="-webkit-border-top-"+e[a]+"-radius:"+Z;b[++Y]="-webkit-border-bottom-"+e[a]+"-radius:0";}return b.join(";");}}return"";},getBorderWidthsOrPaddings:function D(Z,e){var f={t:0,r:0,b:0,l:0,h:0,w:0};if(!Z){return f;}var c=Z.split(" "),Y=c.length,d;for(d=0;d<Y;d++){c[d]=Math.round(e*parseFloat(c[d])/72);}if(Y<4){if(Y===1){c[1]=c[2]=c[3]=c[0];}else{c[3]=c[1];if(Y===2){c[2]=c[0];}}}f.t=c[0];f.r=c[1];f.b=c[2];f.l=c[3];f.h=f.t+f.b;f.w=f.l+f.r;return f;},getBorderWidths:function H(Z,Y){return this.getBorderWidthsOrPaddings(Z,Y);},getPaddings:function C(Z,Y){return this.getBorderWidthsOrPaddings(Z,Y);},parkAfterFade:function A(Y){var Z=Y.target.style;if(Z.opacity===0){Z.left="-10000px";window.setTimeout(function(){Z.opacity=0.99;},0);return true;}return false;},getStyleValue:function I(Y,c){var a=(c==="float"),b;if(Y.currentStyle){c=a?"styleFloat":c;b=Y.currentStyle[c];}else{if(document.defaultView&&document.defaultView.getComputedStyle){c=a?"cssFloat":c;var Z=document.defaultView.getComputedStyle(Y,null);b=Z?Z[c]:null;}}return b;},getComputedStyle:function R(Y,a){var Z=(window.getComputedStyle)?function(b,c){return window.getComputedStyle(b,c||null);}:function(b){return b.currentStyle||{};};mstrmojo.css.getComputedStyle=Z;return Z(Y,a);},getCssTextFromObj:function E(a){var Z="",Y;for(Y in a){Z+=Y+":"+a[Y]+";";}return Z;},onTransitionEnd:function W(a,Y){var Z="transition",b=window.Modernizr;if(b.testProp(Z)){T.attachOneTimeEvent(a,T.transEndEvtNames[b.prefixed(Z)],Y);}else{window.setTimeout(Y,0);}},flashClass:function P(Z,Y,b){this.toggleClass(Z,Y,true);var a=this;window.setTimeout(function(){a.toggleClass(Z,Y,false);},b);},convertCssToCamelCase:function J(Y){return Y.replace(/\-([a-z])/gi,function(Z,a){return a.toUpperCase();});},printCSSInfo:function V(c){var g=document.styleSheets,l=g.length,d,e;for(e=0;e<l;e++){var f=g[e],h=f.cssRules,a=h?h.length:0,k=0;for(d=0;d<a;d++){var Y=h[d].selectorText;if(Y){try{k+=Y.split(",").length;}catch(b){}}}var Z=f.href;if(!c||(Z&&X.indexOf(Z,c)>-1)){console.log("Stylesheet: "+Z||"Inline CSS Block");console.log("Total rules: "+a);console.log("Total selectors: "+k);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.expr","mstrmojo.css");var G=mstrmojo.array,F=mstrmojo.expr,H=mstrmojo.css;mstrmojo._IsExprNode=mstrmojo.provide("mstrmojo._IsExprNode",{ind:function B(){var L=this.parent;if(L&&L.indent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.indent(K);}}},out:function D(){var L=this.parent;if(L&&L.outdent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.outdent(K);}}},andOrTxt:function A(){var M=this.parent,K=M&&M.data,L="",N=this.data;if(K&&(K.et===F.ET.ANDOR)&&K.fn){L=K.fn+(N&&N.not?"_"+F.FN.NOT:"");L=F.BRANCH_FNS[L];}return'<span class="mstrmojo-text mstrmojo-andor">'+L+"</span>";},getPrefixAndOrToolsMarkup:function(){return('<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5896,"Ungroup Conditions")+"</span>");},premousedown:function J(K){var L=mstrmojo.dom.eventTarget(K.hWin,K.e);if(this.prefixHoverNode&&mstrmojo.dom.contains(this.prefixHoverNode,L,false)){mstrmojo.dom.stopPropogation(K.hWin,K.e);return ;}if(this._super){this._super(K);}},isSelectableArea:function E(K){return true;},childIndex:function I(){var M=this.parent,K=M&&M.data,L=K&&K.nds,N=this.data;if(L&&N){return G.indexOf(L,N);}return -1;},toggleGroupBorder:function C(K){H.toggleClass(this.parent.itemsContainerNode.childNodes[this.childIndex()-1].firstChild,"upgroup",K);H.toggleClass(this.domNode,"downgroup",K);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(k,Z,j,o,W,c,q,n){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(k),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=j+o,d=e[0].offsetTop,b;for(var l=1;l<=Y;l++){b=e[g].offsetTop-d+n;if(b<j){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,l+1));g+=(b>j)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(e,b,h,d,a,i){var l=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=l+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},o=function n(k,j){for(var p=k;p<j;p++){Y[W++]=l;var q=b.build(h,d,e[p],p);if(V[p]){q=q.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=q;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){o(0,a);}i=i&&b?Math.min(i,c-a):0;var f=c-i;for(var X=a;X<f;X++){Y[W++]=Z;}if(i){o(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,n,f,W,b,l){var e=(g&&g.length)||0,j=this.wrapperNodes(X),o=f.itemStatus,V=mstrmojo.css,Z=n.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(o[c]!==A){j[c].innerHTML=d.build(n,f,g[c],c);if(Z[c]){var Y=j[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===l){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.css");var F=mstrmojo.css,E="px",J="hasOwnAvatar",I={x:0,y:0};function B(L){var K=this.createAvatar(L.src.node,L);if(K){F.addClass(K,[this.avatarCssClass,J]);this.avatar=L.avatar=document.body.appendChild(K);}}function C(){var K=this.avatar;if(K){K.parentNode.removeChild(K);delete this.avatar;F.removeClass(K,[this.avatarCssClass,J]);}}mstrmojo._HasOwnAvatar=mstrmojo.provide("mstrmojo._HasOwnAvatar",{_mixinName:"mstrmojo._HasOwnAvatar",draggable:true,ownAvatar:true,avatarCssClass:"",restrictedToAxis:undefined,isDragValid:function H(K){if(this._super){return this._super(K);}return false;},ondragstart:function D(K){B.call(this,K);this.positionAvatar(K.src.pos,K);if(this._super){this._super(K);}},ondragmove:function A(K){this.positionAvatar(K.tgt.pos,K);if(this._super){this._super(K);}},ondragend:function A(K){C.call(this);if(this._super){this._super(K);}},createAvatar:mstrmojo.emptyFn,positionAvatar:function G(O,L){var N=this.avatar.style,M=this.restrictedToAxis,K=(L&&L.dragOffsets)||I;if(M!=="y"){N.left=O.x+K.x+E;}if(M!=="x"){N.top=O.y+K.y+E;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var G=mstrmojo.dom,J=mstrmojo.css,H="selected";function B(S,T,U,R,W){var V=W.listHooks[S];if(V&&V.call(W,T,U,R)){return ;}J.toggleClass(T,H,S==="select");}function I(U,T,S){var V=this[U],R=V?V.split(T):[];this[U]=mstrmojo.array.distinct(R.concat(S.split(T))).join(T);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,init:function Q(R){this._super(R);this._shiftStartIndex=-1;},getItemMarkup:function O(S,R){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';},getItemDisplayName:function E(R){return R.n||"";},getItemProps:function K(V,R){var S=!!this.selectedIndices[R],W={tag:"div",sel:S,cls:"",n:this.getItemDisplayName(V),style:"",idx:R,addCls:function T(Y){I.call(this,"cls"," ",Y);},addStyle:function U(Y){I.call(this,"style",";",Y);},title:V.title||""};if(S){W.addCls(H);}var X=V.cls;if(X){W.addCls(X);}return W;},itemRenderer:{render:function A(S,R,T){S._renderIdx=R;return mstrmojo.string.apply(T.getItemMarkup(S,R),T.getItemProps(S,R));},select:function L(S,T,R,U){B("select",S,T,R,U);},unselect:function D(S,T,R,U){B("unselect",S,T,R,U);}},onclick:function P(R){try{var T=this.getItemFromTarget(R.getTarget());if(T){R.cancel();this.doItemSelect(T,R||{});}}catch(S){mstrApp.onerror(S);}},doItemSelect:function F(j,b){var R=b.hWin,h=b.e,c=j._renderIdx,W=j._positionIdx,S=G.isMetaKey(R,h),Z=G.shiftKey(R,h),Y=this.multiSelect,U=this.useListModKeys,d=this._shiftStartIndex,X=this.selectedIndices;if(Y&&U&&Z&&d>-1){var g=[],T=[],V=Math.min(d,c),k=Math.max(d,c),f;for(f=0;f<this.items.length;f++){if(V<=f&&f<=k){if(!X[f]){g.push(f);}}else{if(X[f]){T.push(f);}}}this.addSelect(g);this.removeSelect(T);}else{if(Y&&(!U||S)){var a=(X[c])?"remove":"add";this[a+"Select"](c,false,W);}else{this.singleSelect(c,false,W);}this._shiftStartIndex=c;}},onclearSelection:function N(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function C(S){var R=G.findAncestorByAttr(S,"idx",true,this.domNode);return(R&&R.node)||null;},getItemFromTarget:function M(T){var S=this.getItemNodeFromTarget(T),R=S&&parseInt(S.getAttribute("idx"),10);if(R!==null&&!isNaN(R)&&this.items){return this.items[R];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=H;}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.hash","mstrmojo.css");var F=mstrmojo.hash,C=mstrmojo.css;var D="open";function E(G){return G?G.popupConfig.hostElement:null;}mstrmojo.ui.menus._HasMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._HasMenuPopup",F.copy(mstrmojo._HasPopup));mstrmojo.ui.menus._HasMenuPopup.openPopup=function A(I,G){var H=this._lastOpened;if(H){this.closePopup();}mstrmojo._HasPopup.openPopup.call(this,I,G);C.addClass(E(I),D);};mstrmojo.ui.menus._HasMenuPopup.closePopup=function B(){C.removeClass(E(this._lastOpened),D);mstrmojo._HasPopup.closePopup.call(this);};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.fx.AnimateProp");var S=mstrmojo.css;var Q=10;function C(W,Z,Y){W.pauseScrollRendering(true);var X=W.scrollboxNode,V=W.animate?W.scrollEffect:null;if(V&&V.play){if(V.isPlaying){V.cancel();}V.props={scrollTop:{start:X.scrollTop,stop:Z,isStyle:false}};V.onEnd=function(){W.pauseScrollRendering(false,null,Y);};V.play();}else{X.scrollTop=Z;W.pauseScrollRendering(false,null,Y);}}function K(c,e,V){var W=4;if(!V){V=0;}var f=Math.round(c.renderBlockSize/2);c.fillAt(Math.max(0,e-f),e+f);var b=c.itemsContainerNode,a=b.childNodes[e],Z=c.listMapper.itemOffsetTop(c,b,null,a),d=parseInt(c.scrollboxNode.clientHeight/2,10)-a.offsetHeight/2,X=Math.max(0,c.spacerMargin+Z-d);if(Math.abs(c.scrollboxNode.scrollTop-X)>2){C(c,X,c.renderOnScroll?function(){if(V<=W){K(c,e,V++);}}:null);}else{var Y=c.animate?c.scrollEffect:null;if(Y&&Y.isPlaying&&Y.cancel){Y.cancel();c.pauseScrollRendering(false);}}}function J(X){var Y=X.itemsContainerNode,V=Y.lastChild,W=V?V.offsetTop+V.offsetHeight-Y.firstChild.offsetTop:0;return W;}function U(W){var V=J(W),X=Math.max(0,parseInt((W.scrollboxNode.clientHeight-V)/2,10));C(W,Math.max(0,W.spacerMargin-X));}function H(X){var V=X.selectedIndex,W=V>-1;X.set("hasSelection",W);if(!X.domNode){return ;}if(W){K(X,V);}else{U(X);}}function E(W){var Y=W.scrollboxNode,V=J(W),X=V>Y.clientHeight/2;S.toggleClass(W.upArrowNode,["enabled"],X);S.toggleClass(W.downArrowNode,["enabled"],X);}function N(V,W){var X=V.scrollboxNode;X.scrollTop=Math.min(Math.max(X.scrollTop+W,0),X.scrollHeight-X.offsetHeight);}function B(W,V){if(!W._scrollInter){var X=Q*(V?-1:1);W._scrollInter=window.setInterval(function(){N(W,X);},50);}}function R(V){if(V._scrollInter){window.clearInterval(V._scrollInter);V._scrollInter=null;}}mstrmojo._IsDial=mstrmojo.provide("mstrmojo._IsDial",{markupString:'<div id="{@id}" class="mstrmojo-Dial {@cssClass}" style="position:relative;"><div class="mstrmojo-Dial-uparrow"  onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], true)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], true)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"></div><div class="mstrmojo-Dial-scrollbox {@cssClass}" style="position:relative;{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-Dial-spacer" style="{@spacerCssText}"><div class="mstrmojo-Dial-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div></div></div><div class="mstrmojo-Dial-dnarrow" onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], false)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], false)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.childNodes[1];},spacerNode:function(){return this.domNode.childNodes[1].firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},upArrowNode:function(){return this.domNode.childNodes[0];},downArrowNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){S.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);}},animate:true,itemsEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:500,interval:25,slot:"itemsContainerNode",preStart:function(){var W=this.widget[this.slot],V=(W&&W.offsetWidth)||0;this.props=V?{left:{start:-V,stop:0,suffix:"px",isStyle:true}}:{};},revertOnCancel:false},scrollEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:250,interval:25,slot:"scrollboxNode",revertOnCancel:false},multiSelect:false,holdJumpOnly:true,audibles:{"*":true,hasSelection:false},initSpacer:function I(){var V=(this.cssText||"").match(/height:\s*(\d*)px/);if(V){this.spacerMargin=parseInt(Number(V[1])/2,10);var W=this.spacerMargin+"px";this.spacerCssText="padding-top: "+W+"; padding-bottom: "+W+";";}else{this.spacerMargin=0;delete this.spacerCssText;}},center:function T(){H(this);},preBuildRendering:function(){this.initSpacer();return this._super();},postBuildRendering:function D(){this._super();this.center();E(this);},refreshScroll:function G(){this.center();E(this);},prechange:function O(V){this._super(V);if(this.hasRendered){if(!this.multiSelect||(V&&V.added&&V.added.length)){this.center();}}},onclickarrow:function A(X,W,V){N(this,Q*(V?-1:1));},onmouseoverarrow:function L(X,W,V){if(!this.holdJumpOnly){B(this,V);}},onmouseoutarrow:function M(X,W,V){R(this);},onmousedownarrow:function F(X,W,V){if(this.holdJumpOnly){B(this,V);}},onmouseuparrow:function P(X,W,V){R(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var Y=mstrmojo.css,H=mstrmojo.dom,O=mstrmojo.array,K={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},W="scrollingMode",R="scrolling",b=3;var L=H.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function J(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function P(d,c){var i=H.eventTarget(c,d),g=this.scrollNode,f=H.position(g),h=this.scrollTrackNodes,e=this.scrollBarNodes,j=function j(s){var q=i===h[s];if(q){var t=K[s],k=e[s],u=H.position(k),n=H.getMousePosition(d,c)[t.position],o=n-u[t.position],l=o>0?1:-1,r=g[t.scrollDimension],v=Math.abs(o-(u.h/2))*(r/f[t.dimension]),p={};p[t.scroll]={isStyle:false,start:g[t.scroll],stop:g[t.scroll]+(l*Math.min(r/3,500,v)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:p,duration:200,interval:10,target:g})).play();}};j.call(this,"h");j.call(this,"v");}function B(d,c){var g=this.scrollNode,f=d.type==="mousewheel",e=f?-1:1;mstrmojo.array.forEach(["h","v"],function(o){var l=K[o],i=f?"wheelDelta":"delta",k=d[i+{h:"X",v:"Y"}[o]]*e,j=Math.abs(k),h=k/j,n=j===3&&H.isFF&&!L;g[l.scroll]+=n?h*40:k;});H.stopPropogation(c,d);H.preventDefault(c,d);}function a(h){var g=K[h],f=this.scrollNode,e=H.position(f),d=e[g.dimension],i=f[g.scrollDimension],c=Math.ceil(d)/i;return A(c,d,i);}function A(d,c,e){return(!isNaN(d)&&d<1)&&(Math.abs(c-e)>b);}function C(y){var r="px",k=K[y],e=this.scrollNode,l=J.call(this),z=H.position(e),n=z[k.dimension],t=e[k.scrollDimension],d=Math.ceil(n)/t,x=this.scrollBarNodes,i=x[y],p=this.scrollTrackNodes,q=p[y],v=A(d,n,t),f=k.cls;if(!i){q=p[y]=document.createElement("div");var g=this,o=function(AB){P.call(g,AB);},j=function(AB){B.call(g,AB);},u=function(AD,AB,AC){H.attachEvent(AD,AB,AC);g.installedEventListeners.push({e:AD,evt:AB,fn:AC});};u(q,"click",o);q.className="mstrmojo-scrolltrack "+f;i=x[y]=document.createElement("div");i.className="mstrmojo-scrollbar "+f;q.appendChild(i);l.appendChild(q);var w=mstrApp.isSingleTier?"mousewheel":"wheel";u(q,w,j);u(i,w,j);}var AA=i.style,h=(e[k.scroll]/e[k.scrollDimension]),c=H.delta(e,J.call(this))[k.position],s=q.style;if(v){s[k.styleDir]=c+r;AA[k.styleDim]=(d*n)+r;AA[k.styleDir]=(n*h)+r;}Y.toggleClass(l,k.hostCls,v);Y.toggleClass(e,k.scrollNodeCls,v);return v;}function G(){return !(mstrApp.isSingleTier&&L);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function T(c){this._super(c);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=G();}this.installedEventListeners=[];},onRender:function I(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function F(){var d=this.scrollNode;if(d){var c=H.attachMarkupEvent(this.id,d,"scroll");this.installedEventListeners.push({e:d,evt:"scroll",fn:c});}if(!this.hasCustomScrollbar){Y.addClass(d,"mstrmojo-sb-show-default");return ;}if(d){Y.addClass(J.call(this),"mstrmojo-scrollbar-host");Y.addClass(d,"mstrmojo-scrollNode");}},updateScrollbars:function Z(){if(!this.hasRendered){return ;}this.setupScrollNodes();if(!this.hasCustomScrollbar){if(this.scrollNode){this.scrollNode.style.overflowX=a.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};var c=this.scrollNode.style;c.overflowY=C.call(this,"v")?"scroll":"hidden";c.overflowX=C.call(this,"h")?"scroll":"hidden";}},onscroll:function V(){var j=this.scrollNode;if(j&&this.hasCustomScrollbar){var g=function g(k){var l=parseInt(k);return l===null||isNaN(l)?0:l;},h=H.position(j),i=h.h-g(Y.getStyleValue(j,"padding-bottom")),d=h.w-g(Y.getStyleValue(j,"padding-right")),f=this.scrollBarNodes,e=f.v,c=f.h;if(j.scrollHeight-i>0){e.style.top=((i-H.position(e).h)*(j.scrollTop/(j.scrollHeight-i)))+"px";}if(j.scrollWidth-d>0){c.style.left=((d-H.position(c).w)*(j.scrollLeft/(j.scrollWidth-d)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function E(d){var g=this.scrollNode,f=H.position(g),e=d.src.node,c=this.scrollBarNodes;if(this.isDraggingScrollBar(d)){return{isScrollBar:true,direction:e===c.v?"v":"h",scrollTop:g.scrollTop,scrollLeft:g.scrollLeft,conversionRatio:{y:g.scrollHeight/f.h,x:g.scrollWidth/f.w}};}return(this._super&&this._super(d));},isDragValid:function D(c){return this.isDraggingScrollBar(c)||(this._super&&this._super(c))||false;},isDraggingScrollBar:function S(d){var e=d.src.node,c=this.scrollBarNodes;return !!c&&(e===c.v||e===c.h);},ondragstart:function X(c){if(this.isDraggingScrollBar(c)){Y.addClass(c.src.node,R);Y.addClass(J.call(this),W);}if(this._super){this._super(c);}},shouldDragBubble:function Q(c){var d=c.src.node,e=this.scrollTrackNodes;return !!e&&(d===e.v||d===e.h);},ondragmove:function N(d){if(this.isDraggingScrollBar(d)){var l=d.tgt,c=d.src,n=l.pos,e=c.pos,i=c.node,h=this.scrollNode,k=this.scrollBarNodes,j=c.data,g={y:(n.y-e.y),x:(n.x-e.x)},f=j.conversionRatio;if(i===k.v){h.scrollTop=j.scrollTop+(g.y*f.y);}else{h.scrollLeft=j.scrollLeft+(g.x*f.x);}}if(this._super){this._super(d);}},ondragend:function N(c){if(this.isDraggingScrollBar(c)){Y.toggleClass(c.src.node,R,false);Y.toggleClass(J.call(this),W,false);}if(this._super){this._super(c);}},widgetResized:function M(){if(this._super){this._super();}this.updateScrollbars();},unrender:function U(c){O.forEach(this.installedEventListeners,function(d){H.detachEvent(d.e,d.evt,d.fn);});delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(c);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var B=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(mstrmojo.Base,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",id:"",init:function I(J){this.disposables=[];this._super(J);B.add(this);if(this.postCreate){this.postCreate();}},addDisposable:function G(M){var K=this.disposables,L,J;if(M.constructor===Array){for(L=0,J=M.length;L<J;L++){K.push(M[L]);}}else{K.push(M);}return M;},destroyDisposables:function D(J){F.forEach(this.disposables,function(K){if(K.destroy){K.destroy(J);}else{if(K.clear){K.clear();}}});this.disposables=[];},throwAbstractMethodError:function A(J){throw new Error(this.scriptClass+" must implement "+J+".");},destroy:function H(J){if(this.destroyed){return ;}this._super(J);this.destroyDisposables(J);B.remove(this);delete this.parent;this.destroyed=true;}});var C=mstrmojo.Obj;C.free=function E(J){if(J instanceof C){J.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.publisher","mstrmojo._Provider");var G=mstrmojo.hash,A=mstrmojo.array,B=mstrmojo.registry,D=mstrmojo.publisher;mstrmojo.Arr=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Arr",postApplyProperties:null,postCreate:null,length_bindEvents:["add","remove"],init:function H(K){var J;if(K&&K.data){J=K.data;delete K.data;}else{if(K){J=K;K=null;}}if(!J||J.constructor!==Array){J=[];}G.copy(mstrmojo.Arr.prototype,J);if(K){G.copy(K,J);}if(J.postApplyProperties){J.postApplyProperties();}B.add(J);if(J.postCreate){J.postCreate();}return J;},destroy:function E(){D.clearSubscriptions(this.id);B.remove(this);},add:function I(L,J,K){var M=L&&L.length;if(M){if(J==null){J=this.length;}A.insert(this,J,L);if(!K&&(this.onadd||D.hasSubs(this.id,"add"))){this.raiseEvent({name:"add",value:L,index:J});}}},remove:function F(J,L,K){if(L==null){L=1;}if((J!=null)&&L){var M=this.splice(J,L);if(!K&&(this.onremove||D.hasSubs(this.id,"remove"))){this.raiseEvent({name:"remove",value:M,index:J});}}}});mstrmojo.Arr.makeObservable=function C(J,K){if(!J){return ;}if(!K){K={};}K.data=J;return this.prototype.init(K);};})();(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,b=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(e){var d=parseInt(e,10),f=mstrmojo.validation.STATUSCODE;if(d===0||d===1||d>10){return{code:f.VALID};}return{code:f.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(d){var e=String(d).replace(/[^\d]/g,"");if(e.length<10){return{code:b.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:b.VALID};},VALIDATE_ZIPCODE:function G(d){var f="",e=this.dtp;if(!H.REGEXP.US_ZIP.test(d)){if(H.isNumeric(e)||H.isInt(e)){f=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(e)){f=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:b.INVALID,msg:f};}return{code:b.VALID};},VALIDATE_EMAIL:function T(d){var e=d.indexOf("@");if(e===-1){return{code:b.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(d.substring(e).indexOf(".")===-1){return{code:b.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(d)?{code:b.VALID}:{code:b.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(d){var f=this.dtp,e;if(H.isNumeric(f)||H.isInt(f)){e=String(d).replace(/[^\d]/g,"");if(e.length!==9){return{code:b.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:b.VALID};}};H.isInt=function D(d){return A[d]===1;};H.isNumeric=function Y(d){return A[d]===2||A[d]===5;};H.isString=function J(d){return A[d]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,Z=mstrmojo.num,U=mstrmojo.string,F=mstrmojo.date;function P(k,l){var h=k.dtp,j=k.constraints,o=j.allowedFormatChars||"",g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),n=mstrmojo.locales.number.THOUSANDSEPARATOR,f=mstrmojo.locales.number.DECIMALSEPARATOR,i;if(g){if(!k._intRegExp){o+="0-9-"+(k.isList?L:"")+n;k._intRegExp=new RegExp("[^"+o+"]");}i=k._intRegExp;}if(d){if(!k._numericRegExp){o+="0-9-"+(k.isList?L:"")+f+n;k._numericRegExp=new RegExp("[^"+o+"]");}i=k._numericRegExp;}return !!i&&i.test(l);}function c(k,n){var h=k.dtp,j=k.constraints,g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),f=j.min,l=j.max,i;if(f===undefined&&l===undefined){return false;}if(g||d){return Z.inNumericRange(n,f,l)!==0;}if(e){return F.inDateTimeRange(n,f,l)!==0;}return false;}function K(e,d){return !Z.isNumeric(d);}function R(g,e){var f=(g.dtp===M.DATE),d=(g.dtp===M.TIME);return(f?!F.isDate(e):(d?!F.isTime(e):!F.isDateAndOrTime(e)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function W(d){this._super(d);if(!this.constraints){this.constraints={};}var e=this.constraints;if(!e.hasOwnProperty("trigger")){e.trigger=B.NONE;}},_set_value:function(i,f){var g=this.value,e=(g!==f);if(e){this.value=f;var h=this.constraints.trigger,d=(h&B.VALUESET)>0;if(d){this.validate(f);}}return e;},validate:function O(){var f=(this.value!==null&&this.value!==undefined)?this.value:"",j=this.isList?f.split(L):[f],h,e,k,d=j.length,g;for(g=0;g<d;g++){h=this.doValidation(j[g]);e=(h.code>b.VALID);if(e){if(d>1){h.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",j[g]||" ");}break;}}k=e?"onInvalid":"onValid";if(!e&&this.autoFormat){this.format();}this.set("validationStatus",h);if(this[k]){this[k](h);}},format:function X(){var j=this.dtp,f=(A[j]===6);if(!f){return ;}var l=mstrConfig.listSep,p=this.value||"",e=this.isList?p.split(l):[p],o=j===14,n=[],d,g=mstrmojo.locales.datetime,k=e.length,h;for(h=0;h<k;h++){p=e[h];d=F.parseDateAndOrTime(p);if(d){if(o&&d.date){n.push(F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT));}else{n.push((d.date?F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT):"")+" "+(d.time?F.formatTimeInfo(d.time,g.TIMEOUTPUTFORMAT):""));}}}this.set("value",n.join(l));},isValid:function V(){var d=this.validationStatus;if(!d){this.validate();}return this.validationStatus.code===b.VALID;},clearValidation:function a(){this.set("validationStatus",{code:b.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(q){var n=this.constraints,o=n.regExp,f=n.validator,d={id:this.id,code:b.VALID,msg:""},l=this.dtp,k=(A[l]===1),e=(A[l]===2||A[l]===5),g=(A[l]===3),h=(A[l]===6),j=U.isEmpty(q),p=String(q).length,i="",t=mstrmojo.locales.validation;if(this.required&&j){d.code=b.INVALID_EMPTY;d.msg=t.requiredFieldError;return d;}q=U.trim(q);if(!j&&P(this,q)){if(k){i=t.integerDataType;}if(e){i=t.numericDataType;}if(h){i=t.dateDataType;}d.code=b.INVALID_CHAR;d.msg=t.invalidCharError.replace("#",i);return d;}if(!j&&h&&R(this,q)){d.code=b.INVALID_BAD_DATESTRING;d.msg=t.invalidDateStringError;return d;}if(!j&&(e||k)&&K(this,q)){d.code=b.INVALID_BAD_NUMERICFORMAT;d.msg=t.invalidNumericFormatError;return d;}if(!j&&(k||e||h)&&c(this,q)){d.code=b.INVALID_OUTOFRANGE;if(n.min!==null&&n.max!==null){i=t.outofRangeError.replace("# ","").replace("##",n.min).replace("###",n.max);}else{if(n.min!==null){i=t.noLessMinError.replace("##",n.min).replace("# ","");}else{if(n.max!==null){i=t.noGreaterMaxError.replace("###",n.max).replace("# ","");}}}d.msg=i;return d;}if(g&&n.minLen!==null&&n.maxLen!==null){if(p<n.minLen||p>n.maxLen){d.code=b.INVALID;d.msg=mstrmojo.desc(9211).replace(/#/,n.minLen).replace(/##/,n.maxLen);return d;}}if(o&&!o.test(q)){d.code=b.INVALID_REGEX;d.msg=mstrmojo.desc(9205);return d;}var s=f&&f.apply(this,[q]);if(s){d.code=s.code;d.msg=s.msg;return d;}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.expr");mstrmojo.requiresDescs(294,524,522,523,524,661,746,1468,1995,2202,2203,2795,2796);var A=mstrmojo.string,I=mstrmojo.expr,J=I.ET,H=I.FN;mstrmojo.condTx.CommonComponent={NODE_TYPE:{ACION_SELECTOR:0,TEXT_FIELD:1,TEMPLATE_UNIT_CONTROL:2},ACTION_TYPE:{DEFAULT:1,DISABLE:1,HIDE:2,REQUIRE:4},ADV_OPERATION:{PLUS:{fn:1,fnt:1,v:"+",et:1,nc:2},MINUS:{fn:2,fnt:1,v:"-",et:1,nc:2},MULTI:{fn:3,fnt:1,v:"*",et:1,nc:2},DIVIDE:{fn:4,fnt:1,v:"/",et:1,nc:2},UNARYMINUS:{fn:5,fnt:1,v:"-",et:1,nc:1},SUM:{fn:12,fnt:1,v:"SUM",et:10,nc:1},LEFTPARENTHESIS:{fn:1000,fnt:1,v:"(",et:1,nc:0},RIGHTPARENTHESIS:{fn:1001,fnt:1,v:")",et:1,nc:0}},FN_OPTNAMES:{1:"PLUS",2:"MINUS",3:"MULTI",4:"DIVIDE",5:"UNARYMINUS",12:"SUM",1000:"LEFTPARENTHESIS",1001:"RIGHTPARENTHESIS"},SOURCE_CONTEXT:{IN:0,EXCEPT:1,ALL:2},CTXN_FNS:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1},{did:"1,17",n:mstrmojo.desc(294,"Between"),t:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1},{did:"1,54",n:mstrmojo.desc(2202,"Is Null"),t:1},{did:"1,55",n:mstrmojo.desc(2203,"Is Not Null")}],ALIS:{FILTERON:"fo",SOURCE1:"s1",FUNCTION:"fn"},EXPR_NODE_TYPE:{RESERVED:0,FIELD:1,CONST:2,EXPR:3,METRIC:4},getExprXml:function(Q){var L="<exp>",K="</exp>",O={a:true,a2:true,a3:true,at:true,ck:true,cs:true,desc:true,did:true,dmt:true,dmy:true,dtp:true,es:true,et:true,exp:true,exp2:true,expr:true,f:true,fk:true,fm:true,fm2:true,fm3:true,fn:true,fnt:true,items:true,m:true,m2:true,m3:true,n:true,nd:true,nds:true,nk:true,not:true,nt:true,pf:true,rfd:true,rwctl:true,rwf:true,st:true,t:true,tx:true,tx2:true,v:true,idx:true},N={getArrItemName:function(T,R,S){return T.substr(0,T.length-1);},isSerializable:function(V,T,R){if(V=="cs"){var U=T[R],S=T[R][V];if(U&&U.fnt&&U.fnt==I.FNT.PER&&S&&S[0]){S[0].v+="%";}return true;}else{if(V=="did"&&T[R].fk){return false;}}return(O[V])?true:false;},skipNull:true},M=Q;if(!M||M.et!=J.ANDOR){M={et:J.ANDOR,fn:I.FN.AND,nds:M?[M]:[]};}var P=A.json2xml("nd",[M],N);return L+P+K;}};var E=mstrmojo.condTx.CommonComponent,C=E.ACTION_TYPE;E.ACTION_ITEMS={1:{v:C.DISABLE,n:mstrmojo.desc(1468,"Disable")},2:{v:C.HIDE,n:mstrmojo.desc(1995,"Hide")},4:{v:C.REQUIRE,n:mstrmojo.desc(661,"Required")}};var B=E.ACTION_ITEMS;E.ACTION_CANDIDATES={0:[B[1],B[2]],1:[B[1],B[2],B[4]],2:[B[1],B[4]]};var D=E.EXPR_NODE_TYPE,F={FIELD:1,METRIC:2,CONST:4,EXPR:8};function G(M,L){var K=-1;switch(M){case D.FIELD:K=F.FIELD;break;case D.METRIC:K=F.METRIC;break;case D.CONST:K=F.CONST;break;case D.EXPR:K=F.EXPR;break;default:return -1;}K=K<<16;switch(L){case D.FIELD:K+=F.FIELD;break;case D.METRIC:K+=F.METRIC;break;case D.CONST:K+=F.CONST;break;case D.EXPR:K+=F.EXPR;break;default:return -1;}return K;}E.setSubExpressionType=function(L){if(L.et===J.XML){var M=D.RESERVED,K=D.RESERVED;if(L.tx){M=D.FIELD;}else{if(L.exp){M=D.EXPR;E.setSubExpressionType(L.exp.nd);}else{if(L.m){M=D.METRIC;}else{if(L.cs){M=D.CONST;}}}}if(L.fn===H.IS_NULL||L.fn===H.IS_NOT_NULL||L.fn===E.ADV_OPERATION.UNARYMINUS.fn){K=D.CONST;}else{if(L.tx2){K=D.FIELD;}else{if(L.exp2){K=D.EXPR;E.setSubExpressionType(L.exp2.nd);}else{if(L.m2){K=D.METRIC;}else{if(L.cs){K=D.CONST;}}}}}L.st=G(M,K);}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Obj","mstrmojo.expr","mstrmojo.condTx.CommonComponent");mstrmojo.condTx.Stack=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.condTx.Stack",isVectorCase:false,init:function T(c){this.list=new Array(c||0);this.idx=0;this.containSize=c||0;},pop:function G(){var c=null;if(this.idx>0){c=this.list[this.idx-1];--this.idx;}else{var d=this.scriptClass,e=this.id;throw"Stack(class: "+d+"id: "+e+") is Empty.";}return c;},size:function L(){return this.idx;},top:function K(){return(this.idx>0)?this.list[this.idx-1]:null;},push:function F(c){if(c){var d=this.list;if(this.idx===this.containSize){++this.idx;++this.containSize;d.push(c);}else{d[this.idx]=c;++this.idx;}}},isEmpty:function J(){return this.idx===0;},destroy:function b(){this.list=null;this._super();}});var A=mstrmojo.Obj.free,D=mstrmojo.condTx.CommonComponent,P=mstrmojo.expr,E=D.ADV_OPERATION,C=P.ET,S=mstrmojo.hash;function U(d){var c=d.fn;switch(c){case E.PLUS.fn:case E.MINUS.fn:return 1;case E.MULTI.fn:case E.DIVIDE.fn:return 2;case E.UNARYMINUS.fn:return 3;case E.SUM.fn:return 4;default:return -1;}}function B(c){return c&&c.fn;}function Y(c){return c&&c.fn&&c.fn===E.RIGHTPARENTHESIS.fn;}function N(c){return c&&c.fn&&c.fn===E.LEFTPARENTHESIS.fn;}function X(c){return N(c)||Y(c);}function Q(c){if(!c){return"";}if(B(c)){return"exp";}if(c.t===4){return"m";}if(c.isNumeric){return"cs";}return"tx";}function M(c){return c&&c.fn&&(c.fn===E.SUM.fn||c.fn===E.UNARYMINUS.fn);}function I(h,j,c){var e=j.nc||0;for(var d=0;d<e;d++){var f=h.pop();if(f){if(!c&&f.t===4&&j.fn!==E.SUM.fn){throw"Invalid Expression";}var g=Q(f);if(d===0&&e===2){g+="2";}if(f.isNumeric){j.cs=j.cs?[f].concat(j.cs):[f];}else{j[g]=("exp"===g||"exp2"===g)?{nd:f}:f;}}}h.push(j);}var H=["m","tx","exp","cs"],V=H.length;function O(f,g){if(!!f){var d,h,c,e;for(d=0;d<V;++d){e=H[d];c=(!!g&&e!=="cs")?e+g:e;h=f[c];if(!!h&&e!=="cs"){delete f[c];return(e==="exp")?h.nd:h;}else{if(!!h&&h.length>0){if(h.length===1){h=h[0];delete f.cs;}else{h=h.shift();}return h;}}}}return null;}function W(c){var d=null;if(B(c)&&!M(c)){d=O(c);if(!d){throw"Invalid Expression";}}return d;}function a(c){var d=null;if(B(c)){d=O(c,(M(c)?"":"2"));if(!d){throw"Invalid Expression";}}return d;}mstrmojo.condTx._CanBuildExpressionTree=mstrmojo.provide("mstrmojo.condTx._CanBuildExpressionTree",{_mixinName:"mstrmojo.condTx._CanBuildExpressionTree",buildExpressionTree:function Z(){var f=null,g=this.items||[],d=g.length;if(d>0){var j=mstrmojo.insert(mstrmojo.condTx.Stack),e=mstrmojo.insert(mstrmojo.condTx.Stack);try{for(var c=0;c<d;++c){var i=g[c];if(B(i)){if(!X(i)){while(!e.isEmpty()&&U(i)<=U(e.top())){I(j,e.pop(),this.isVectorCase);}e.push(i);}else{if(N(i)){e.push(i);}else{while(!N(e.top())){I(j,e.pop(),this.isVectorCase);}e.pop();}}}else{j.push(i);}}while(!e.isEmpty()){I(j,e.pop(),this.isVectorCase);}if(j.size()!==1){throw"Invalid Expression";}f=j.pop();}catch(h){throw"Invalid Expression";}finally{A(j);A(e);}}return f;},serializeExpressionTree:function R(c){var d=[],h,g=S.clone(c&&c.nd),f=mstrmojo.insert(mstrmojo.condTx.Stack);try{while(!!g||!f.isEmpty()){while(!!g){f.push(g);h=W(g);if(B(g)&&B(h)&&U(g)>U(h)){d.push(S.clone(E.LEFTPARENTHESIS));f.push(S.clone(E.RIGHTPARENTHESIS));}g=h;}if(!f.isEmpty()){g=f.pop();d.push(g);if(Y(g)){g=null;}else{h=a(g);if(B(g)&&B(h)&&U(g)>=U(h)){d.push(S.clone(E.LEFTPARENTHESIS));f.push(S.clone(E.RIGHTPARENTHESIS));}g=h;}}}}catch(e){throw"Invalid Expression";}finally{A(f);}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo._HasChildren","mstrmojo.Binding","mstrmojo._HasBindings");mstrmojo.Model=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.Model",init:function A(C){this._super(C);if(this.children){this.initChildren();}if(!this.parent){this.initBindings();}},destroy:function B(C){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(C);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip","mstrmojo.css");mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",slot:"",alias:"",parent:null,init:function A(C){this._super(C);var D=this.parent;if(!D||D.hasInitBindings){this.initBindings();}},destroy:function B(C){if(this.hasRendered){this.unrender(C);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn,widgetResized:mstrmojo.emptyFn});mstrmojo.Widget.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};mstrmojo.Widget.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};mstrmojo.Widget.topMarkupMethod=function(){var C=this.top;if(C){this.domNode.style.top=C;}};mstrmojo.Widget.leftMarkupMethod=function(){var C=this.left;if(C){this.domNode.style.left=C;}};mstrmojo.Widget.heightMarkupMethod=function(){var C=this.height;if(C){this.domNode.style.height=C;}this.widgetResized();};mstrmojo.Widget.widthMarkupMethod=function(){var C=this.width;if(C){this.domNode.style.width=C;}this.widgetResized();};mstrmojo.Widget.enabledMarkupMethod=function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.StepperContentProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.StepperContentProvider",item:null,renderer:null,min:null,max:null,interval:1,minField:"min",maxField:"max",valField:"value",intField:"interval",canLoop:false,next:mstrmojo.emptyFn,prev:mstrmojo.emptyFn,hasPrev:mstrmojo.emptyFn,hasNext:mstrmojo.emptyFn,renderItemAt:mstrmojo.emptyFn,setVal:mstrmojo.emptyFn,getVal:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo.array");var H=mstrmojo.hash,D=mstrmojo.array;function B(I){this.raiseEvent(H.copy(I,{name:"modelEdit"}));}mstrmojo.condTx.ActionModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.condTx.ActionModel",orgActions:null,target:null,_set_condTxs:function(J,I){this.condTxs=I;this.actions=I.actions;this.target=I.target;if(this.actions){this.saveOriginalData();}return true;},deleteAction:function A(J){var I=D.indexOf(this.actions,J);if(-1!==I){this.actions.splice(I,1);}B.call(this);},moveAction:function E(I,L){var K=this.actions,J=K.splice(I,1);this.actions=K.slice(0,L).concat(J,K.slice(L,K.length));B.call(this);},duplicateAction:function G(I){var J=this.actions;J.push(H.clone(J[I]));B.call(this);},saveOriginalData:function C(){this.orgActions=H.copy(this.actions);},setConditionData:function F(L,J){var K=L.data,I=K.isNew;H.copy(J,H.clear(K));delete K.isNew;L.paint();L.tree.onConditionEdit(L,I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Obj","mstrmojo.string","mstrmojo.hash","mstrmojo.expr","mstrmojo.mstr.EnumNodeDimty");var D=mstrmojo.array,P=mstrmojo.expr,J=P.ET,I=P.TP,K=mstrmojo.mstr.EnumNodeDimty,N=P.ET2TGT,M=P.ET2COND,B=mstrmojo.meta.TP;function O(S,A){var R=(A&&A.did)?A.did.split(P.FN_SEP):null,E=R&&parseInt(R[0],10),Q=R&&parseInt(R[1],10),T=S.et;S.fnt=E;S.fn=Q;if(T!=J.AE&&P.fn_List(Q,E)){S.et=J.AL;S.a2=null;S.cs=null;}else{if(T==J.AL&&!P.fn_List(Q,E)){S.et=J.AQ;S.cs=null;}else{if(T==J.MC&&!P.fn_AC_MC(Q,E)){S.et=J.MQ;S.m2=null;}else{if(T==J.AC&&!P.fn_AC_MC(Q,E)){S.et=J.AQ;S.a2=null;}}}}switch(Q){case P.FN.IS_NULL:case P.FN.IS_NOT_NULL:S.a2=null;S.a3=null;S.fm2=null;S.fm3=null;S.m2=null;S.m3=null;S.cs=null;break;case P.FN.BETWEEN:case P.FN.NOT_BETWEEN:break;default:S.a3=null;S.fm3=null;S.m3=null;while(S.cs&&S.cs.length>1){S.cs.pop();}}}function F(W,X,Y){var E=true,A=2+X;switch(Y.t){case I.PROMPT:var U=W.cs,V;if(!U){U=[];W.cs=U;}U[X]={};V=U[X];V.p=Y;W["a"+A]=null;W["m"+A]=null;switch(W.et){case J.AC:W.et=J.AQ;break;case J.MC:W.et=J.MQ;break;}break;case I.METRIC:W["a"+A]=null;W.cs=null;W.et=J.MC;W["m"+A]=Y;break;case I.ATTR:W["m"+A]=null;W.cs=null;W.et=J.AC;W["a"+A]=Y;W["fm"+A]=null;break;default:W["a"+A]=null;W["m"+A]=null;var U=W.cs;if(!U){U=[];W.cs=U;}if("did" in Y){W["a"+A]=null;W["fm"+A]=null;W["m"+A]=null;if(U[X]&&U[X].p){U[X].p=null;}}else{if(Y&&Y.v!=null){U[X]=Y;}else{if(U[X]){U=U.splice(X,1);}}E=false;}if(!Y.skipET){switch(W.et){case J.MC:W.et=J.MQ;break;case J.AC:W.et=J.AQ;break;case J.AL:if(!("did" in Y)&&Y.v){var Q,S=Y.dtp,U=[];Q=Y.v.split(mstrConfig.listSep);for(var R=0,T=Q.length;R<T;R++){U.push({v:mstrmojo.string.trim(Q[R]),dtp:S});}W.cs=U;}break;}}}return E;}var H={};H[J.AQ]={target:1,fm:1,fn:1,cs:1};H[J.AL]={target:1,fm:1,fn:1,cs:1};H[J.AE]={target:1,fn:1,es:1};H[J.AC]={target:1,a2:1,a3:1,fm:1,fm2:1,fm3:1,fn:1};H[J.MQ]={target:1,fn:1,cs:1,dmy:1};H[J.MC]={target:1,fn:1,m2:1,m3:1,dmy:1};H[J.F]={target:1};H[J.R]=H[J.F];H[J.XML]={target:1};var G=function(A){return A!==null&&A!==undefined;};var L=function(W){if(!W||!G(W.et)){return false;}var V=true,A=H[W.et],T=W.cs,S;V=V&&(!A.target||W[N[W.et]]);V=V&&(!A.fm||W.fm);V=V&&(!A.fn||G(W.fn));var R=P.fnCstCount(W.fn,W.fnt);if(V&&A.cs){for(S=0;S<R;S++){V=V&&T&&G(T[S]);}}if(V){var U=[N[W.et],"fm"];for(var E=0;E<2;E++){for(S=0;S<R;S++){var X=U[E]+(2+S);V=V&&(!A[X]||W[X]);}}}V=V&&(!A.es||W.es&&(W.es.length>0));var Q=W.dimtyTypes;V=V&&(!A.dmy||Q[K.NodeDimtyUnspecified]||Q[K.NodeDimtyNone]||(Q[K.NodeDimtyOutputLevel]&&W.dmy&&W.dmy.uts&&(W.dmy.uts.length>0)));return V;};mstrmojo.ConditionModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ConditionModel",completed:false,init:function(A){if(this._super){this._super(A);}this._updateCompleted();},edit:function(l,Y){var S=this[l],k=true;this.etWas=this.et;switch(l){case"not":Y=!!(Y&&Y.did===P.FN.NOT);S=!!this.not;if(Y===S){return ;}this.not=!!Y||null;break;case"target":var AB=this.et;if(Y){switch(Y[B]){case I.ATTR:case I.CONS:S=this.a;if(AB!==J.AQ&&AB!==J.AE){this.et=J.AQ;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}if(AB!==J.AE){this.fn=null;this.fnt=null;}this.fm=null;this.fm2=null;this.fm3=null;this.cs=null;break;case I.METRIC:S=this.m;if((AB!==J.MQ)&&(AB!==J.MC)){this.et=J.MQ;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.r=null;this.f=null;this.cs=null;this.dmt=K.NodeDimtyUnspecified;}this.m2=null;break;case I.REPORT:S=this.r;if(AB!==J.R){this.et=J.R;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.f=null;}break;case I.FILTER:S=this.f;if(AB!==J.F){this.et=J.F;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;}break;case I.PROMPT:S=this.prms&&this.prms[0];if(AB!==J.XML){this.et=J.XML;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}break;}}this.es=null;this[N[this.et]]=Y;break;case"fm":if(Y&&Y[B]==="fn"){this.et=J.AE;this.fm=null;O(this,Y);}else{this.fm=Y;if(Y&&(this.et==J.AE)){this.et=J.AQ;}this.fnt=null;this.fn=null;this.cs=null;this.a2=null;this.fm2=null;}break;case"fm2":case"fm3":this[l]=Y;break;case"fn":O(this,Y);break;case"es":var AE=this.es;if(Y&&Y.removed&&AE){D.removeItems(AE,Y.itemIdField,Y.removed);}if(Y&&Y.added){if(!AE){AE=Y.added.concat();this.es=AE;}else{D.insert(AE,AE.length,Y.added);}}break;case"c0":k=F(this,0,Y);break;case"c1":k=F(this,1,Y);break;case"dmy":var y=this.dmy;if(!y){y={cc:true,fres:true,uts:[]};this.dmy=y;}var t=y&&y.uts;if(!t){t=[];y.uts=t;this.dmt=K.NodeDimtyOutputLevel;}var Q={};Q[P.TP.ATTR]=true;Q[P.TP.DIM]=true;if(Y&&Y.removed){var f=[],A=false,W=[],R=false;for(var j=0,T=Y.removed,E=T.length;j<E;j++){var V=T[j],AA=V[B] in Q;if(AA){R=true;}else{A=true;}var h=AA?W:f;h.push(V);}if(A){D.removeItems(t,"did",f);}if(R){var AD={};for(var d=0,Z=t&&t.length;d<Z;d++){var X=t[d];if(X&&X.utgt){AD[X.utgt.did]=d;}}var U=[];for(var z=0,x=W.length;z<x;z++){var g=AD[W[z].did];if(g>-1){U.push(g);}}U.sort(D.numSorter);for(var s=U.length-1;s>-1;s--){t.splice(U[s],1);}}}if(Y&&Y.added){var AF=[],o=P.DMY_TP.DIM,q=P.DMY_TP.ATTR;for(var AC=0,w=Y.added,e=w.length;AC<e;AC++){var p=w[AC];AF.push((p[B] in Q)?{utgt:p,utp:p[B]===I.DIM?o:q,agg:1,flt:2,gb:true,rps:0,n:p.n}:p);}D.insert(t,t.length,AF);}break;}this._updateCompleted();if(k){this.raiseEvent({name:"edit",prop:l,value:Y,valueWas:S});}},get:function C(){var A=M[this.et]||[];A.push("et");return mstrmojo.hash.copyProps(A,this);},_updateCompleted:function(){this.set("completed",L(this));}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj");var B={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:B,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,init:function E(F){this.clear();this._super(F);},setAlignment:function C(F,G){this.alignment={host:F,popup:G};},addPopupHandlers:function D(F,H,G){this.popupHandlers[F]={open:H,close:G};},clear:function A(){this.popupHandlers={};var F=this.ENUM_CORNERS;this.alignment={host:F.BOTTOM_LEFT,popup:F.TOP_LEFT};}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=B;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom");function Z(a,c){if(!mstrmojo.DocInfoWindow){return ;}var b=a;while(b){if(b instanceof mstrmojo.DocInfoWindow){b[c?"registerScrollLock":"releaseScrollLock"](this);break;}b=b.parent;}}var L=mstrmojo.array,C=mstrmojo.dom,P=mstrmojo.hash,W=mstrmojo.css,F="px";var B=false;function K(a,c){if(!mstrmojo.DocInfoWindow){return ;}var b=a;while(b){if(b instanceof mstrmojo.DocInfoWindow){b[c?"registerLock":"releaseLock"](this);this.lockIW=c?b:null;break;}b=b.parent;}}var A=mstrmojo.ui.PopupConfig.ENUM_CORNERS,T=A.TOP_LEFT,R=A.TOP_RIGHT,H=A.BOTTOM_RIGHT,G=A.BOTTOM_LEFT;function I(a){return(a===G||a===T);}function X(a){return(a===R||a===H);}function N(a){return(a===H||a===G);}function Q(a){return(a===R||a===T);}function U(h,c,o,t){var w=o.x,v=o.y,s=o.w||0,j=o.h||0,b=t.w,p=t.h,r=h.alignment,f=r.popup,e=r.host,u=X(e),x=N(e),q=false,l=false,d=false,n=false;if(I(f)){var g=w+b+(u?s:0);q=c.w<g;}if(Q(f)){var k=v+p+(x?j:0);l=c.h<k;}if(X(f)){var i=w-b+(u?s:0);d=i<0;}if(N(f)){var a=v-p+(x?j:0);n=a<0;}return{top:n,bottom:l,left:d,right:q};}function E(b){var a=this.popupConfig;if(a){P.forEach(a.popupHandlers,function(d,e){var c=d[b?"open":"close"];if(c){c.call(mstrmojo.all[e]||c,!!b);}});}}function J(b){var a=this.popupConfig;if(a&&!a.isHostedWithin){var c=this.hostProxy;if(c){c.style.display=b?"":"none";}}}function Y(a){return a!==undefined&&a!==null&&!isNaN(a);}mstrmojo._IsPopup={visible:false,lockIWForScroll:false,disposable:true,opener:null,onOpen:mstrmojo.emptyFn,onClose:mstrmojo.emptyFn,popupConfig:null,hostProxy:undefined,open:function M(c,a){E.call(this,true);if(this.updatePopupConfig){this.updatePopupConfig(a,c);}else{P.forEach(a,function(f,e){this.set(e,f);},this);}var b="popup-mid-render";this.set("opener",c);if(!this.hasRendered){var d=this.visible;this.visible=false;this.render();W.addClass(this.domNode,b);this.set("visible",d);}if(this.nudge){this.domNode.style.top="-10000px";}J.call(this,true);this.set("visible",true);if(this.lockIWForScroll){Z.call(this,this.opener,true);}if(a&&a.lockIW){K.call(this,a.lockIW,true);}if(this.nudge){this.nudge();}this.adjustCornersForPopupOverflow();this.onOpen();W.removeClass(this.domNode,b);},adjustCornersForPopupOverflow:function V(){var k=this.popupConfig;if(!k){return false;}var AH=(k.includeScroll!==undefined)?k.includeScroll:true;var o=k.position||C.position(k.anchorElement||k.hostElement,AH);if(!k.isHostedWithin){var x=this.hostProxy,r=this.hostProxy=document.createElement("div");document.body.appendChild(r);r.appendChild(this.domNode);if(x){x.parentNode.removeChild(x);}var e=r.style,s={x:"left",y:"top",w:"width"};r.className=k.hostProxyCssClass;e.position="absolute";e.background="none";e.height="0";L.forEach(["x","y","w"],function(AK){var AJ=o[AK];if(Y(AJ)){e[s[AK]]=AJ+F;}});}var AE=k.ENUM_CORNERS,v=AE.BOTTOM_LEFT,i=AE.BOTTOM_RIGHT,h=AE.TOP_RIGHT,AA=AE.TOP_LEFT;var AB=U(k,C.position(document.body),o,C.position(this.domNode)),w=AB.right,p=AB.bottom,d=AB.left,u=AB.top,z=k.alignment,q=z.popup,AI=z.host,g=q,c=AI;if(w||d){if(I(c)){c=Q(c)?h:i;}else{if(X(c)){c=Q(c)?AA:v;}}if(w&&I(g)){g=Q(g)?h:i;}else{if(d&&X(g)){g=Q(g)?AA:v;}}}if(p||u){if(I(c)){c=Q(c)?v:AA;}else{if(X(c)){c=Q(c)?i:h;}}if(p&&Q(g)){g=I(g)?v:i;}else{if(u&&N(g)){g=I(g)?AA:h;}}}if(u||w||p||d){if(B){console.log("Overflow directions: "+JSON.stringify(AB));}this._orgalgn={host:AI,popup:q};k.setAlignment(c,g);}if(!k.isHostedWithin){if(Y(o.y)&&Y(o.h)){this.hostProxy.style.top=(o.y+(N(g)?(k.alignWithAnchor===true?o.h:0):(k.alignWithAnchor===true?0:o.h)))+F;}}var y=N(c),AD=X(c),AC=N(g),n=X(g),j="auto",b="100%",a="0";var t=j,AF=j,l=j,f=j;if(AC){l=y?a:b;}else{t=y?b:a;}if(n){AF=AD?a:b;}else{f=AD?b:a;}var AG=this.domNode.style;AG.top=t;AG.right=AF;AG.bottom=l;AG.left=f;return true;},close:function O(b){if(this.onClose){this.onClose(b);}J.call(this,false);if(this.lockIWForScroll){Z.call(this,this.opener,false);}this.set("visible",false);this.set("opener",null);if(this.lockIW){K.call(this,this.lockIW,false);}E.call(this,false);var a=this._orgalgn;if(a){this.popupConfig.setAlignment(a.host,a.popup);}},buildRendering:function D(){var a=this._super();if(a){if(!this.parent&&!this.domNode.parentElement){document.body.appendChild(this.domNode);}}return a;},unrender:function S(a){if(this.popupConfig&&!this.popupConfig.isHostedWithin&&this.hostProxy){document.body.removeChild(this.hostProxy);delete this.hostProxy;}this._super(a);}};}());(function(){mstrmojo.requiresCls("mstrmojo.ConditionModel","mstrmojo.expr","mstrmojo.hash","mstrmojo.mstr.EnumNodeDimty");var L=mstrmojo.expr,G=mstrmojo.hash,D=L.FN,F=L.TP,H=L.ET,K=L.ET2TGT,A=mstrmojo.meta.TP,I=mstrmojo.mstr.EnumNodeDimty;var E=["tx","tx2","fn","fnt","exp","exp2","cs","st","isGridObject"];function B(P){return null!==P&&undefined!==P;}var J=function(R){if(!R){return false;}var P=true;P=P&&(B(R.exp)||B(R.tx));P=P&&B(R.fn);if(R.fn===D.BETWEEN||R.fn===D.NOT_BETWEEN){var Q=R.cs;P=P&&Q&&B(Q[0])&&B(Q[1]);}else{if(R.fn===D.IS_NULL||R.fn===D.IS_NOT_NULL){return P;}else{P=P&&(B(R.tx2)||B(R.cs&&R.cs[0])||B(R.exp2));}}return P;};var O=function(P){var Q=(P&&P.did)?P.did.split(L.FN_SEP):null;return Q&&parseInt(Q[1],10);};var N=function(P){var Q=O(P);return(Q===D.BETWEEN)||(Q===D.NOT_BETWEEN);};var M=function(P){var Q=O(P);return(Q===D.IS_NULL)||(Q===D.IS_NOT_NULL);};mstrmojo.condTx.ConditionModel=mstrmojo.declare(mstrmojo.ConditionModel,null,{scriptClass:"mstrmojo.condTx.ConditionModel",edit:function(S,P){var Q=this[S];switch(S){case"fo":if(P&&(F.ATTR===P[A]||F.METRIC===P[A])){var R=this.et;switch(P[A]){case F.ATTR:Q=this.a;if(R!==H.AQ&&R!=H.AE){this.et=H.AQ;this.m=null;this.m2=null;this.m3=null;}if(R!==H.AE){this.fn=null;this.fnt=null;}this.fm=null;this.fm2=null;this.fm3=null;this.cs=null;break;case F.METRIC:Q=this.m;if(R!==H.MQ&&R!==H.MC){this.et=H.MQ;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.cs=null;this.dmt=I.NodeDimtyUnspecified;}break;}this.es=null;this[K[this.et]]=P;}else{this.a=null;this.et=H.XML;this.m=null;}if(P&&P.fn&&P.fnt){this.exp={nd:P};this.tx=null;}else{if(P){this.tx=(P.nk&&P.fk)?P:null;this.exp=null;}}break;case"s1":if(P&&P.fn&&P.fnt){this.exp2={nd:P};this.tx2=null;this.cs=null;}else{if(P){if(P.nk&&P.fk){this.tx2=P;this.cs=null;}else{if(!P.did){this.cs=[P];this.tx2=null;}}this.exp2=null;}}break;case"fn":if(N(P)){this.tx2=null;}else{if(M(P)){this.cs=null;this.tx2=null;}else{this.cs=null;}}break;}this._super&&this._super(S,P);},_updateCompleted:function(){if(this.et===H.XML){this.set("completed",J(this));}else{this._super();}},get:function C(){var P=this._super();if(this.et===H.XML){G.copyProps(E,this,P);}return P;}});}());(function(){mstrmojo.requiresCls("mstrmojo.StepperContentProvider","mstrmojo.num");var A=mstrmojo.num;function B(G,F){var H=F?G.max:G.min,D=F?G.min:G.max,E=G.getVal(F?1:-1);return(H===null||(F?(E<=H):(E>=H))||(D!==null&&G.canLoop));}function C(H,G){var F=H.min,D=H.max,E=H.getVal(G?1:-1);if((G&&D!==null&&E>D)||(!G&&F!==null&&(E<F))){if(H.canLoop){E=((E-F)%(D-F+1))+F;E=(E>=F)?E:E+(D-F+1);}else{return ;}}H.item[H.valField]=H.curVal=E;H.onTraverse();}mstrmojo.NumStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.NumStepperContentProvider",curVal:null,init:function(E){this._super(E);var F=this.item,D=function(I){var H=I&&F[I];return(H===null||H===undefined);},G=function(I,K,H){var J=H&&D.call(this,K)?null:F[K];if(J!==null&&J!==undefined){this[I]=J;}};G.call(this,"min",this.minField,true);G.call(this,"max",this.maxField,true);G.call(this,"interval",this.intField);this._initCurrent();},_initCurrent:function(){var E=this.item,F=this.curVal=E[this.valField];if(F===null||F===undefined){var D=this.min;this.curVal=D!==null?D:0;}},next:function(){C(this,true);},prev:function(){C(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},renderItemAt:function(F){var E=this.getVal(F),D=this.renderer;return D?D.render(E,this):E;},getVal:function(D){return this.curVal+(this.interval*(D||0));},setVal:function(F){var G=this.min,D=this.max,E=this.getVal();if(typeof F!=="number"||isNaN(F)||F===E||A.inNumericRange(F,G,D)!==0){return ;}this.item[this.valField]=this.curVal=F;this.onTraverse();},onTraverse:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.array","mstrmojo._HasChildren");var G=mstrmojo.array;function E(P){if(!this.shouldPropagateEnabled){return ;}var O=this._disabledChildren;G.forEach(P,function(Q){if(Q.enabled){O.push(Q.id);Q.set("enabled",false);}});}function J(){G.forEach(this._disabledChildren,function(O){var P=mstrmojo.all[O];if(P&&P.parent===this){P.set("enabled",true);}},this);this._disabledChildren=[];}mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",containerNode:null,preserveChildDomOrder:true,shouldPropagateEnabled:false,init:function M(P){this._super(P);this._disabledChildren=[];this.attachEventListener("addChild",this.id,function(Q){if(this.shouldPropagateEnabled&&!this.enabled){E.call(this,Q.value);}});if(this.children){this.initChildren();}var O=this.parent;if(!O||O.hasInitBindings){this.initBindings();}},destroy:function H(O){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(O);},unrender:function I(Q){var R=this.children,O=(R&&R.length)||0,P;for(P=O-1;P>-1;P--){R[P].unrender(true);}this._super(Q);},postBuildRendering:function A(){if(this._super()!==false){this.renderChildren();return true;}return false;},renderChildren:function L(){var Q=this.children,O=(Q&&Q.length)||0,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}}},childRenderCheck:function D(P){if(P&&!P.hasRendered){var O=P.slot||this.defaultChildSlot;return !!this[O];}return false;},addChildren:function N(R,P,Q){var O=this._super(R,P,Q);if(O){this.childRenderOnAddCheck(O);}return O;},removeChildren:function F(V,R){var U=V?[V]:(this.children||[]),O=U.length,S;for(S=O-1;S>-1;S--){var Q=U[S],P=Q&&Q.domNode;if(P){var T=this[(Q.slot||this.defaultChildSlot)];if(P.parentNode===T){T.removeChild(P);}}}return this._super(V,R);},childRenderOnAddCheck:function B(Q){if(this.hasRendered&&Q){var O=Q.length,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}else{if(R&&R.hasRendered){this.onchildRenderingChange(R);}}}}},onchildRenderingChange:function K(O){var W=O&&O.domNode;if(!W){return ;}var P=this.defaultChildSlot,V=O.slot||P,Y=this[V],Q=this.children;if(!Y){if(W.parentNode){W.parentNode.removeChild(W);}}else{if(W.parentNode===Y){return ;}if(!this.preserveChildDomOrder){Y.appendChild(W);}else{var R,U;for(U=Q.length-1;U>=0;U--){var X=Q[U];if(X===O){break;}if(V===(X.slot||P)){var Z=X.domNode;if(Z&&Z.parentNode===Y){R=Z;}}}if(R){Y.insertBefore(W,R);}else{Y.appendChild(W);}}}if(mstrmojo.publisher.hasSubs(this.id,"childrenRendered")){var S=Q.length,T;for(T=0;T<S;T++){if(!Q[T].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}},propagateChildProps:function C(S){var R=this[S],Q=this.children||[],O=Q.length,P;for(P=0;P<O;P++){Q[P].set(S,R);}}});mstrmojo.Container.enabledMarkupMethod=function(){mstrmojo.Widget.enabledMarkupMethod.apply(this,arguments);if(this.shouldPropagateEnabled){if(this.enabled){J.call(this);}else{E.call(this,this.children);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget","mstrmojo._ListSelections");var E=mstrmojo.dom;mstrmojo.ListBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBase",selectionPolicy:null,itemRenderer:null,icnCssText:"",icnCss:"",markupString:'<div id="{@id}" tstid="{@tstid}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',markupSlots:{itemsContainerNode:function G(){return this.domNode.firstChild;},scrollboxNode:function A(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},autoHide:false,itemsContainerNode:null,_markupPrefix:null,_markupSuffix:null,_itemPrefix:null,_itemSuffix:null,init:function J(K){this._super(K);if(this.autoHide){this.visible=!!(this.items&&this.items.length);}},buildRendering:function D(){this.itemsHtml="";var K=(this.renderOnScroll?this.items&&((this.renderIndex+1)*this.renderBlockSize):this.items&&this.items.length);if(K){this.itemsHtml=this._buildItemsMarkup(0,K-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");}this._super();delete this.itemsHtml;this.addSlots({itemsNode:this.itemsContainerNode.firstChild});},_buildItemsMarkup:function B(K,N,U,L,V,M){var W=[],Q=0;W[Q++]=U||"";var P=this.itemRenderer,T=P&&P.render;if(T&&typeof T==="function"){var R=this.items,S=Math.min(N+1,((R&&R.length)||0)),O;for(O=K;O<S;O++){W[Q++]=V||"";W[Q++]=T(R[O],O,this);W[Q++]=M||"";}}W[Q+1]=L||"";return W;},onselectionChange:function H(V){if(!V){return ;}var S=this.itemRenderer;if(!S){return ;}var O=S.unselect,R=this.items||[],W=V.removed,N,M,L,P,X;if(O&&W){for(P=0,X=W.length;P<X;P++){N=W[P];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){O(L,R[N],M,this);}}}var K=S.select,U=V.added,Q,T;if(K&&U){for(Q=0,T=U.length;Q<T;Q++){N=U[Q];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){K(L,R[N],M,this);}}}if(this.onchange){this.onchange({added:V.added,removed:V.removed});}},_set_items:function C(N,K){this.renderIndex=0;if(this.autoHide){this.set("visible",!!(K&&K.length));}var M=this.items;this.items=K;if(M!==K){var L=this.hasRendered;if(L){this.unrender(false);}this.clearSelect();if(L){this.render();}return true;}return false;},onItemContextMenu:mstrmojo.emptyFn,oncontextmenu:function F(K){E.preventDefault(window,K.e);var M=K.getTarget(),L=this.getItemFromTarget&&this.getItemFromTarget(M);if(L){if(this.onItemContextMenu(L,K)){K.cancel();}}},_getItemNode:function I(K){var L=this.itemsContainerNode;return(L&&L.childNodes[K])||null;},renderOnScroll:false});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string");var B=mstrmojo.string;mstrmojo.Label=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Label",allowHTML:false,text:"",title:"",markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" title="{@title} "mstrAttach:click></div>',markupMethods:{ontitleChange:function(){this.domNode.title=this.title;},ontextChange:function(){var C=this.text;C=B.isEmpty(C)?"":C.toString();this.domNode.innerHTML=this.allowHTML?C:B.encodeHtmlString(C,true);},oncssTextChange:mstrmojo.Widget.cssTextMarkupMethod,onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Widget.enabledMarkupMethod},autoHide:false,_set_text:function A(E,C){if(this.autoHide){this.set("visible",(C!==null)&&(C!=="")&&(C!==undefined));}var D=this.text;this.text=C;return(D!==C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,f=mstrmojo.array,e=mstrmojo.boxmodel,c=mstrmojo.dom;function A(i,k,h){var j=i.listSelector;if(j){j[k](i,i.itemsContainerNode,h);}}function L(i,h){var j=i.lastPagePos;if(!j||j.dragId!==h){j=e.offset(i.itemsContainerNode);j.dragId=h;i.lastPagePos=j;var k=i.scrollboxNode;i.lastScrollPos={left:k.scrollLeft,top:k.scrollTop,width:k.clientWidth,height:k.clientHeight};}}function O(k,o,i){var j=o&&o.node;if(j===k.dropCueNode||j===k.dropCueNode.firstChild){return k.dropCuePos;}var l=k.listMapper;var h=l&&l.whereDrop(k,k.itemsContainerNode,j,o.pos,{left:k.lastPagePos.left-k.lastScrollPos.left,top:k.lastPagePos.top-k.lastScrollPos.top,width:k.lastScrollPos.width,height:k.lastScrollPos.height});var n=k.dropCuePos;return((i!==false)&&n&&h&&(n.idx===h.idx)&&(n.left===h.left)&&(n.top===h.top))?n:h;}var g="attachEventListener";function D(i,h){if(i.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,i.itemsScriptClass||mstrmojo.Arr);}}return h;}function H(i,h){if(h&&h[g]){i._sub_its=h;i._sub_add=h[g]("add",i.id,"preadd");i._sub_rmv=h[g]("remove",i.id,"preremove");}}function G(h){if(h._sub_its){var i=mstrmojo.publisher;i.unsubscribe(h._sub_add);i.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var i=this.dropCueNode,h=i&&i.style;if(!h){return ;}var k=this.dropCuePos,j=!!k;if(j){h.left=k.left+"px";h.top=k.top+"px";}h.display=j?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(n){this._super(n);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,p=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||p){this.initSelections(l,j,k,p);}if(this.postInitItems){this.postInitItems();}},initItems:function I(h){return D(this,h);},preBuildRendering:function W(){var l=this.listBuilder,p=l.newContext(this);this.ctxtBuilder=p;var i=this.markupSlots,k=!!(this.renderOnScroll&&this.renderBlockSize&&i&&i.scrollboxNode),j=this.items,h=(j&&j.length)||0,n=k?this.firstRenderBlockSize:h,o=k?this.firstRenderBlockSize:0;this._eros=k;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(j,l,this,p,n,o).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var o=this.listMapper;if(o&&o.postBuildRendering){o.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var q=this.id;this._cb_scroll=function(){var i=mstrmojo.all[q];i.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var k=0,j=["itemsEffect","scrollEffect"],h=j.length;k<h;k++){var p=j[k],l=this[p];if(l&&l.constructor===Object){l=mstrmojo.insert(mstrmojo.hash.clone(l));l.widget=this;this[p]=l;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(l){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var j=0,k=["itemsEffect","scrollEffect"],h=k.length;j<h;j++){var n=this[k[j]];if(n&&n.isPlaying){n.cancel();}}this._super(l);},pauseScrollRendering:function P(j,h,i){if(j!==false){j=true;}if(this.paused===!!j){return ;}this.paused=!!j;if(j){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,i);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function b(h,l){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var n=(this.items&&this.items.length)||0;if(!n){if(l){l();}}else{var j=this.scrollboxNode,o=this.itemsContainerNode,k=mstrmojo.boxmodel.offset(o,j),q=this.listMapper,p=q.findScrollRange(o,n,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||j.scrollTop,j.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||j.scrollLeft,j.clientWidth,k.left,k.top);if(this.fillAt(p.start,p.end)){if(h){h();}var i=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[i].fill(h,l);},100);}else{if(l){l();}}}},fillAt:function M(j,i){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,j,i,this.renderBlockSize);}else{return false;}},add:function R(i,h){if(!i||!i.length){return -1;}var j=this.items;if(h==null){h=a.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(j&&j.length)||0;}if(j&&j.add){j.add(i,h);}else{this.set("items",j?f.insert(j.concat(),h,i):i);}return h;},preadd:function B(k){if(this.hasRendered){var o=this.listMapper;if(o){o.onadd(this,this.itemsContainerNode,this.ctxtBuilder,k);}var n=this.listBuilder;if(n){n.onadd(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onadd(this,k);}if(this._eros){this.onscroll();}else{var l=k.index,h=k.value.length;this.fillAt(l,l+h-1);}}if(this.onadd){this.onadd(k);}if(this._super){this._super(k);}},remove:function U(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var k=this.items;if(k){var j;if(k.remove){for(j=h.length-1;j>-1;j--){k.remove(h[j],1);}}else{k=k.concat();for(j=h.length-1;j>-1;j--){k.splice(h[j],1);}this.set("items",k);}return h[0];}return -1;},_remove:function U(j){var i=this.items;if(!i||(j==null)){return -1;}var h;if(!isNaN(j)){h=j;}else{h=this.itemIndex(j);}if(h>-1){if(i.remove){i.remove(h,1);}else{i=i.concat();i.splice(h,1);this.set("items",i);}}return h;},duplicate:function Y(n,i,j){var k=this.items,h=-1;if(!k||(n==null)){return -1;}if(!isNaN(n)){if(i===null||i===undefined){i=n+1;}n=k[n];}else{if(i===null||i===undefined){i=this.itemIndex(n)+1;}}if(n){var l;l=a.copy(j,a.clone(n));h=this.add([l],i);}return h;},preremove:function N(i){if(this.hasRendered){var k=this.listMapper;if(k){k.onremove(this,this.itemsContainerNode,this.ctxtBuilder,i);}var j=this.listBuilder;if(j){j.onremove(this,this.ctxtBuilder,i);}var h=this.listSelector;if(h){h.onremove(this,i);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(i);}if(this._super){this._super(i);}},move:function S(l,s){function q(t,i){t=parseInt(t,10);return i===1||(s>=t&&s<t+i);}var r=(this.items&&this.items.length)||0;if(s===-1||s==null||isNaN(s)){s=r;}else{s=Math.min(s,r);}var k,h,o,n;if(l.constructor===Array){h=l;o=l;n=(h&&h.length)||0;if(q(l[0],l.length)){return false;}k=f.get(this.items,l);}else{if(typeof (l)==="object"){k=[l];n=1;h=this.itemIndex(k[0]);o=[h];if(q(h,1)){return false;}}else{h=l;o=[l];n=1;if(q(h,1)){return false;}k=[this.items[h]];}}var p=0;for(var j=0;j<n;j++){if(o[j]<=s){s--;p++;}}if(p==o.length){s++;}if(k[0]!=null){this.remove(h);this.add(k,s);}return true;},itemIndex:function F(h){if(h==null){return -1;}var i=this.itemIdField;return i?f.find(this.items,i,h[i]):f.indexOf(this.items,h);},prechange:function T(k){if(this.hasRendered){var j=[this.listBuilder,this.listMapper];for(var l=0,h=j.length;l<h;l++){var n=j[l];if(n&&n.onchange){n.onchange(this,this.itemsContainerNode,this.ctxtBuilder,k);}}}},makeObservable:false,_set_items:function J(o,h){var l=this.items;h=this.initItems(h);this.items=h;if(l!==h){var k=this,j=function(){if(k.autoHide){k.set("visible",!!(h&&h.length));}k=null;},i=this.hasRendered;if(i){this.refresh(j);}else{j();}}return l!==h;},premousedown:function d(h){A(this,"premousedown",h);},premouseup:function Q(h){A(this,"premouseup",h);},scrollTo:function V(i){var h,j=this.listMapper;if(j&&j.toItem){if(!isNaN(i)){h=i;}else{h=this.itemIndex(i);}if(h>=0){j.toItem(this,h);}}},draggable:false,getDragData:function(l){L(this,l.id);var j=O(this,l.src),i=j&&j.idxActual;if((i>-1)&&this.selectedIndices[i]){var k=this.sortSelectedIndices(),h=f.get(this.items,k)||[];switch(h.length){case 1:return a.copy({html:h[0][this.itemDisplayField],index:k[0]},a.copy(h[0]));case 0:return null;default:return a.copy({html:h.length+" selections",indices:k},h);}}},dropZone:false,ondragenter:function(h){L(this,h.id);this.set("dropCuePos",O(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",O(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},isDragValid:function C(h){return h&&h.src&&h.src.data;},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(k){var i=k&&k.tgt,h=i&&i.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!c.ctrlKey(i.hWin,i.e)){var j=k.src&&k.src.data;if(j&&(j.indices||(j.index!==null))){this.remove(j.indices||j.index);}}}}},ondrop:function(r){var v=r&&r.src,q=v&&v.data;if(q){var k=O(this,r.tgt,false),t=k&&k.idx,l=(q&&q.constructor===Array),j=this.sortSelectedIndices();var o=this.items;t=Math.min(t,o&&o.length)||0;var u=true;if(v.widget===this){u=this.move(j,t);f.forEach(j,function(i){if(i<=t){t--;}});}else{this.add(l?q:[q],t);}if(u){var p=l?q.length:1,h={};for(var n=0;n<p;n++){h[t+n]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.string");function C(H,D,E){var K=[];var G=H.optionRenderer,I=G&&G.render;if(I&&typeof I==="function"){var L=H.options,J=Math.min(E,((L&&L.length)||0)),F;for(F=D;F<J;F++){K.push(I(L[F],F,H));}}return K.join("");}mstrmojo.DropDownList=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DropDownList",title:"",selectCssClass:"",tooltip:"",cssDisplay:"inline",value:"",unset:false,options:null,optionValueField:"v",optionNameField:"n",idx:-1,renderedOptions:"",markupString:'<span id="{@id}"  class="mstrmojo-DropDownList {@cssClass}">{@title}<select id="{@id}_select" class="mstrmojo-DropDownList-select {@selectCssClass}"  style="{@cssText}" title="{@tooltip}"onchange="mstrmojo.all[\'{@id}\'].set(\'selected\', this.options[this.selectedIndex].value);">{@renderedOptions}</select><div class = "strikeoutContainer"></div></span>',markupSlots:{selectNode:function(){return this.domNode.getElementsByTagName("select")[0];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onidxChange:function(){var D=this.domNode.getElementsByTagName("select");if(D&&D.length){D[0].selectedIndex=this.idx;}},onvalueChange:function(){var I=this.selectNode,G=I.options,F=this.value,E,H;for(H=0;H<G.length;H++){var D=G[H].value.toString()===F;if(D){E=H;if(F!==""){mstrmojo.css.toggleClass(G[H],"selected",D);}break;}}if(I.length>0&&E>0&&this.unset){if(this.options[0].v==="-1"){I.remove(0);E--;}this.unset=false;}this.set("idx",E);},onwidthChange:function(){var D=this.width;if(D>=0){this.selectNode.style.width=D+"px";}}},_set_selected:function(G,D){var E=this.selectNode,F=this[G]!==D;this[G]=D;if(E){this.set("value",D);}return F;},preBuildRendering:function A(){var F=this;if(F.unset){F.idx=0;}var E=F.options,D=(E&&E.length)||0;if(D){F.renderedOptions=C(F,0,D);}return this._super();},optionRenderer:{render:function(E,D,F){return mstrmojo.string.apply(F.getOptionMarkup(E),F.getOptionProps(E,D));}},getOptionMarkup:function(D){return'<option value="{@en@v}" class="{@cls}" style="{@style}" {@sel}>{@en@n}</option>';},getOptionProps:function B(F,D){var G=this,H=F[G.optionValueField],E=D===parseInt(G.idx,10);G.selected=G.value=E?H.toString():G.value;return{cls:E?"selected":"",v:H===undefined?"":H,n:F[G.optionNameField]||"",style:"",sel:E?"selected":""};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css");var C=mstrmojo.css,E=mstrmojo.desc(14058,"Show Details"),A=mstrmojo.desc(14059,"Hide Details"),F=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div>'+F+'</div><div class="toggle-details-link" >'+E+'</div><div class="error-details">{@en@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];}},markupMethods:{onshowDetailsChange:function(){var H=this.showDetails;this.toggleDetailsNode.innerHTML=H?A:E;C.toggleClass(this.domNode,"show-details",H);this.updateScrollbars();}},shortDesc:undefined,longDesc:undefined,showDetails:false,init:function G(H){this._super(H);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function B(H){var J=H.getTarget(),I,K=this.longDesc;if(J===this.contactNode){I="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(K?("&body="+encodeURI("Detail:\r\n"+K)):"");mstrApp.openPage(I,"_self");}else{if(J===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);}}},setupScrollNodes:function D(){this.scrollNode=this.scrollNode;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var C=mstrmojo.dom,B=mstrmojo.hash,E=mstrmojo.css;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",enabled:true,selected:false,markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:function(){E.toggleClass(this.domNode,"disabled",!this.enabled);},onselectedChange:function(){E.toggleClass(this.domNode,"selected",this.selected);},ontextChange:function(){this.textNode.innerHTML=this.text;},ontitleChange:function(){this.domNode.title=this.title;},onwidthChange:mstrmojo.Widget.widthMarkupMethod},oniconClassChange:function D(J){var K=this.domNode;if(this.hasRendered&&K){K.className=K.className.replace(J.valueWas,"")+" "+J.value;}},onclick:mstrmojo.emptyFn,ontouchend:function I(J){this.onclick(J);}});mstrmojo.Button.newIconButton=function H(L,O,M,J,N){var K={scriptClass:"mstrmojo.Button",title:L,cssClass:O,text:"",onclick:M};if(J){K.bindings=J;}B.copy(N,K);return K;};function F(M,N,J,P){var L=[];if(J){L.push(J);}var O=P&&P.cssClass;if(O){L.push(O);delete P.cssClass;}var K={scriptClass:"mstrmojo.Button",cssClass:L.join(" "),text:M};if(N){K.onclick=N;}return B.copy(P,K);}mstrmojo.Button.newInteractiveButton=function G(M,N,P,O){var L={glowClass:"glow"};if(P&&(C.isFF||C.isWK)){B.copy({onmousedown:function J(){E.applyShadow(this.domNode,0,0,10,P);},onmouseup:function K(){E.removeShadow(this.domNode);}},L);}return F(M,N,"mstrmojo-InteractiveButton",B.copy(O,L));};mstrmojo.Button.newWebButton=function A(K,J,M,L){return F(K,J,"mstrmojo-WebButton"+(M?" hot":""),L);};mstrmojo.Button.newActionButton=function(K,L,M){var J=mstrmojo.Button.newWebButton(K,L,false,M);J.cssClass=J.cssClass+" action-button";return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.string","mstrmojo.Widget","mstrmojo.condTx.CommonComponent");var F=["-","+","*","/"],S=F.concat(["(",")"]),R=null,B=mstrmojo.condTx.CommonComponent,D=B.NODE_TYPE,C=B.ADV_OPERATION,M=mstrmojo.hash,E=M.copy(C.SUM,{isDelimiter:true});function J(V){if(!R){R={};var U,T;for(U=0,T=S.length;U<T;U++){R[S[U]]=true;}}return R[V];}function G(T){return T&&T.t&&T.t===4;}function L(T,W){var U=[];T.isMstrObj=true;if(G(T)){var V=M.clone(T);V.v=V.dn||T.n;if(!W){V.v="("+V.v+")";U.push(M.clone(E));}U.push(V);}else{U.push(M.copy(T,{v:T.n}));}return U;}mstrmojo.condTx.ExpressionToken=mstrmojo.declare(mstrmojo.Widget,null,{data:null,markupString:'<span id={@id} class="mstrmojo-token {@cssClass}"></span>',active:false,markupMethods:{ondataChange:function(){var T=this.data;if(T.v===","){this.domNode.innerHTML=mstrmojo.string.encodeHtmlString(String(T.v))+"&nbsp;";}else{this.domNode.innerHTML=mstrmojo.string.encodeHtmlString(String(T.v));}mstrmojo.css.toggleClass(this.domNode,["mstr"],this.isMstrObj());mstrmojo.css.toggleClass(this.domNode,["invalid"],T.sta===-1);if(T.tn){this.domNode.title=T.tn;}},onactiveChange:function(){mstrmojo.css.toggleClass(this.domNode,["active"],this.active);}},isMstrObj:function Q(){return !!this.data.isMstrObj;},length:function A(){return this.data.v.length;},isDelimiter:function O(){return this.data.isDelimiter||(this.length()===1&&J(this.data.v));},split2Tokens:function H(W){var V=this.data,U=V&&V.v,X=U.substring(0,W),T=U.substring(W);return[{v:X},{v:T}];},mergeTo:function I(U){var W=this.data,V=W&&W.v,T=U.data.v;return{v:V+T};},spliceContent:function K(Z,X,U){var Y=this.data,W=Y&&Y.v,a=W.substring(0,Z);X=(X===null||X===undefined)?(W.length-Z):X;var T=W.substring(Z+X),V=a+(U||"")+T;Y.v=V;Y.sta=1;Y.isMstrObj=false;Y.isDelimiter=false;this.set("data",Y);this.paint();},isMetricToken:function P(){return G(this.data);},setToken:function N(U){var V=this.data,T=L(U,true)[0];M.copy(T,V);this.set("data",V);this.paint();}});mstrmojo.condTx.ExpressionToken.isDelimiter=J;mstrmojo.condTx.ExpressionToken.convertTokens=L;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.css");var G=mstrmojo.css,E={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"},C="sbClear",K="sbSearch";mstrmojo.SearchWidget=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchWidget",quickSearch:false,placeholderText:"",markupString:'<table id={@id} cellspacing="0" cellpadding="0" class="mstrmojo-SearchWidget mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" style="width:{@width};" placeholder="{@placeholderText}" mstrAttach:keyup,blur/></div></td><td><div class="mstrmojo-SearchBox-clear" id="{@id}'+C+'" mstrAttach:click></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}'+K+'" mstrAttach:click ></div></div></td></tr></table>',markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},clearNode:function(){return this.domNode.rows[0].cells[1].firstChild;},searchNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},markupMethods:{onquickSearchChange:function(){G.toggleClass(this.domNode,"quick-search",this.quickSearch);},onwidthChange:function(){if(this.inputNode&&this.inputNode.style&&this.inputNode.style.width){this.inputNode.style.width=this.width;}}},clearNode:null,searchNode:null,onsearch:mstrmojo.emptyFn,onclear:mstrmojo.emptyFn,prekeyup:function J(M){var L=M.hWin,Q=M.e||L.event;var O=this.getSearchPattern(),N=(O.length===0),P=this.quickSearch;G.toggleClass(this.clearNode,"show",!N&&!P);G.toggleClass(this.searchNode,"clear",!N&&P);if(P){this[N?"clearSearch":"onsearch"](O);}var R=E[Q.keyCode];if(this["on"+R]){this["on"+R](M);}},onEnter:function B(L){this.onsearch(this.getSearchPattern());},onEsc:function A(L){this.clearSearch();},getSearchPattern:function H(){return mstrmojo.string.trim(this.inputNode.value);},preclick:function F(L){var N=L.getTarget(),M=N&&N.id;switch(M.replace(this.id,"")){case K:if(this.quickSearch){this.clearSearch();}else{this.onsearch(this.getSearchPattern());}break;case C:this.clearSearch();break;}},clearSearch:function I(){var L=this.getSearchPattern();this.reset();this.onclear(L);},reset:function D(){this.inputNode.value="";G.removeClass(this.clearNode,"show");G.removeClass(this.searchNode,"clear");}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.css","mstrmojo.string","mstrmojo._IsExprNode","mstrmojo._HasPopup","mstrmojo.Widget");var O=mstrmojo.dom,B=mstrmojo.css,E=mstrmojo.string.htmlAngles,M=mstrmojo.expr,N=M.ET,K=M.FN,A=M.BRANCH_FNS[K.NOT],D={};D[K.BETWEEN]=1;D[K.NOT_BETWEEN]=1;var C={"*":function(Q,P){return Q?('<span class="mstrmojo-unknown">'+(E(Q.n||Q.xml)||"...")+"</span>"):null;}};function H(Q,P,S,R){return S&&((R?'<span class="mstrmojo-ListIcon t'+R+'"></span>':"")+'<span class="mstrmojo-text mstrmojo-embedobj">'+E(S)+"</span>");}C[N.R]=function(Q,P){return H(Q,P,Q.r&&Q.r.n,Q.r&&Q.r.t);};C[N.F]=function(Q,P){return H(Q,P,Q.f&&Q.f.n,Q.f&&Q.f.t);};C[N.XML]=function(Q,P){return H(Q,P,Q.n||Q.p&&Q.p.n||Q.xml,Q.p&&Q.p.t);};C[N.AE]=function(V,S){var R=[];if(V&&V.a&&V.a.n){R.push('<span class="mstrmojo-text mstrmojo-attr">'+E(V.a.n)+"</span>");if(V.fn!==M.FN.IN_LIST){R.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(V.et,V.fn,V.fnt))+"</span>");}var U=V.es,P=U&&U.length||0;if(P){R.push('<span class="mstrmojo-elems">');var Q=R.length;for(var T=0;T<P;T++){R[Q++]='<span class="mstrmojo-text mstrmojo-elem">';R[Q++]=E(U[T].n);if(T<P-1){R[Q++]=", ";}R[Q++]="</span>";}R[Q++]="</span>";}else{R.push('<span class="mstrmojo-text mstrmojo-emptyelems">(Empty)</span>');}}return R.join("");};C[N.AQ]=function(W,X){var T=[];if(W&&W.a&&W.a.n){T.push('<span class="mstrmojo-text mstrmojo-attr">'+E(W.a.n)+"</span>");if(W.fm&&W.fm.n){T.push('<span class="mstrmojo-text mstrmojo-form">'+E(W.fm.n)+"</span>");if(W.fn!=null){T.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(W.et,W.fn,W.fnt,W.fm.dtp))+"</span>");var P=M.fnCstCount(W.fn,W.fnt);if(W.et===N.AC){if(P>=1){if(W.a2&&W.a2.n){T.push('<span class="mstrmojo-text mstrmojo-attr2">'+E(W.a2.n)+"</span>");if(W.fm2&&W.fm2.n){T.push('<span class="mstrmojo-text mstrmojo-form2">'+E(W.fm2.n)+"</span>");}}if(P>1){T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");if(W.a3&&W.a3.n){T.push('<span class="mstrmojo-text mstrmojo-attr3">'+E(W.a3.n)+"</span>");if(W.fm3&&W.fm3.n){T.push('<span class="mstrmojo-text mstrmojo-form3">'+E(W.fm3.n)+"</span>");}}}}}else{if(W.et===N.AL){var U=W.cs,Y=[];for(var R=0,V=U.length;R<V;R++){Y.push(U[R].v);}T.push('<span class="mstrmojo-text mstrmojo-c1">'+Y.join(mstrConfig.listSep)+"</span>");}else{if(P>=1){var U=W.cs,S=U&&U[0];T.push('<span class="mstrmojo-text mstrmojo-c1">'+E(S&&S.p&&S.p.n||S&&S.v)+"</span>");if(P>1){var Q=U&&U[1];T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");T.push('<span class="mstrmojo-text mstrmojo-c1">'+E(Q&&Q.p&&Q.p.n||Q&&Q.v)+"</span>");}}}}}}}return T.join("");};C[N.AC]=C[N.AQ];C[N.AL]=C[N.AQ];C[N.MQ]=function(f,g){var e=[],Z=f&&f.m,j=Z&&Z.n;if(j){var Q=f.fnt,U=M.FNT.PER,c=M.FNT.RANK;j=Q===U?mstrmojo.desc(2787,"Percentage of ##").replace("##",j):Q===c?mstrmojo.desc(2788,"Rank of ##").replace("##",j):j;e.push('<span class="mstrmojo-text mstrmojo-metric">'+E(j)+"</span>");if(f.fn!=null){e.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(f.et,f.fn,Q,M.DTP.REAL))+"</span>");var X=M.fnCstCount(f.fn,Q);if(f.et==M.ET.MC){if(X>=1){var i=(f.m2&&f.m2.n)||"?";e.push('<span class="mstrmojo-text mstrmojo-m2">'+E(i)+"</span>");if(X>1){e.push('<span class="mstrmojo-text mstrmojo-btwn">'+g.betweenText+"</span>");var S=(f.m3&&f.m3.n)||"?";e.push('<span class="mstrmojo-text mstrmojo-m3">'+E(S)+"</span>");}}}else{if(X>=1){var R=f.cs,a=R&&R[0];var P=function(h){var d=h.v;if(f.fnt==U){if(d.replace){h.v=d.replace(/%$/,"");}d=h.v+"%";}return d;};e.push('<span class="mstrmojo-text mstrmojo-c1">'+E(a&&a.p&&a.p.n||a&&a.v&&P(a))+"</span>");if(X>1){var Y=R&&R[1];e.push('<span class="mstrmojo-text mstrmojo-btwn">'+g.betweenText+"</span>");e.push('<span class="mstrmojo-text mstrmojo-c2">'+E(Y&&Y.p&&Y.p.n||Y&&Y.v&&P(Y))+"</span>");}}}var b=f.dmy&&f.dmy.uts,W=b&&b.length;if(W){e.push('<span class="mstrmojo-text mstrmojo-at">'+g.atText+"</span>");e.push('<span class="mstrmojo-dmy">');for(var V=0;V<W;V++){var T=b[V];e.push('<span class="mstrmojo-text mstrmojo-dmyunit">');e.push(E(T.utgt?T.utgt.n:T.n));if(V<W-1){e.push(",");}e.push("</span>");}e.push("</span>");}}}return e.join("");};C[N.MC]=C[N.MQ];function G(P){var Q=P.data;if(Q.not){return'<span class="mstrmojo-text mstrmojo-not">'+A+"</span>";}return"";}function F(P){var R=P.data,Q=C[R&&R.et]||C["*"];return G(P)+((Q&&Q(R,P))||('<span class="mstrmojo-text">'+P.emptyText+"</span>"));}mstrmojo.ConditionNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.ConditionNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){B.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},oneditableChange:function(){B.toggleClass(this.textNode,["editable"],this.editable);},onselectedChange:function(){B.toggleClass(this.condNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=F(this);this.textPostfixNode.innerHTML=this.getConditionTextPostfix();}},betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),init:function L(P){this._super(P);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());},getConditionTextPostfix:function(){return"";},del:function J(){var P=this.parent;if(P&&P.remove&&this.data){P.remove(this.data);}},isEmpty:function(){var Q=this.data,P=Q&&Q.et,R=P&&mstrmojo.expr.ET2TGT[P];return !(R&&Q[R]);},isSelectableArea:function(P){return O.contains(this.condNode,P,true);},preclick:function I(P){var R=null,Q=O.eventTarget(P.hWin,P.e);if(O.contains(this.prefixNode,Q,true)){R="andor";}else{if(O.contains(this.textNode,Q,true)){R="condition";}else{if(O.contains(this.textPostfixNode,Q,true)){O.stopPropogation(P.hWin,P.e);return false;}}}P.part=R;}});mstrmojo.ConditionNode.getFunctionNode=F;})();(function(){mstrmojo.requiresCls("mstrmojo.ConditionNode","mstrmojo.dom");var B=mstrmojo.dom;mstrmojo.threshold.ConditionNode=mstrmojo.declare(mstrmojo.ConditionNode,null,{scriptClass:"mstrmojo.threshold.ConditionNode",emptyText:mstrmojo.desc(5893,"New Condition"),cssClass:"adv-threshold",avatarCssCls:"mstrmojo-thresholdRow",markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass} mstrAttach:mousedown"><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span><span class="mstrmojo-add-cond" mstrAttach:click>'+mstrmojo.desc(1994,"Add Condition")+"</span></div></div>",markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];},addConditionNode:function(){return this.domNode.childNodes[1].childNodes[4];}},preclick:function A(C){var F=null,E=B.eventTarget(C.hWin,C.e),D=this._super(C);if(B.contains(this.addConditionNode,E,true)){F="addCondition";}C.part=F||C.part;return D;},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");mstrmojo.ui.List=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.List",postselectionChange:function C(D){var G=D.added||[],F=G.length,I=D.removed||[],E=I.length;if(E){this.selectionRemoved({added:G,removed:I,isReselect:false});}if(F){var H=function(J){return[].concat(J).sort().join(",");};this.selectionAdded({added:G,removed:I,isReselect:H(G)===H(I)});}},selectionAdded:function A(D){},selectionRemoved:function B(D){}});mstrmojo.ui.List.SelectionChangeEvtType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var D=mstrmojo.dom,F=mstrmojo.array,E=mstrmojo.hash;var A;mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(H,G){if(!A){var I=this.itemField;A=this._super(H).replace(">{@en@n}<",' title="{@en@'+I+'}">{@en@'+I+"}<");}return A;},getItemProps:function C(I,G){var H=this._super(I,G),J=this.itemField;H[J]=I[J];return H;},onclick:function B(G){if(this.disableClick){return false;}var L=this,I=this.parent,K=I.opener,H=D.isMetaKey(G.hWin,G.e);if(H&&!this.multiSelect){this.multiSelect=K.parent.defn.multi;if(this.multiSelect){D.attachOneTimeEvent(document.documentElement,"keyup",function(){var N=L.selectedIndices;if(K){K.suggestionShown=false;if(N&&!E.isEmpty(N)){var M=[];E.forEach(L.selectedIndices,function(P,O){M.push(L.items[O]);});K.handleSuggestionItemSelect(M);}I.close();}L.multiSelect=false;});}}this._super(G);if(!this.multiSelect){K.suggestionShown=false;var J=this.selectedItem;if(J){K.handleSuggestionItemSelect(J);}I.close();}},bindings:{itemField:"this.parent.opener.itemField",items:"this.parent.opener.suggestionItems",disableClick:"this.parent.opener.disableClick"}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K.slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Container","mstrmojo._IsPopup","mstrmojo.boxmodel","mstrmojo.dom","mstrmojo.ui._HasScroller");var L=mstrmojo.boxmodel,I=mstrmojo.dom,M=mstrmojo.css,O="mstrmojo-Tooltip",A="mstrmojo-scrollNode",E=20;function C(S,T,R){var U="connectScrollbox";if(R){U="dis"+U;}var Q=S&&S.parent;while(Q){if(Q[U]){Q[U](T);}Q=Q.parent;}}function G(){if(!this._paintHandle){var R=this.id,Q=function(V){var Z=mstrmojo.all[R];if(!Z){return ;}delete Z._paintHandle;var T=[O],a=Z.cssClass;if(a){T.push(a);}var S=mstrApp.getThemeClassName&&mstrApp.getThemeClassName(),X=Z.opener;if(X&&X.getTooltipThemeClass){S=X.getTooltipThemeClass();}T.push(S);Z.domNode.className=T.join(" ");var Y=Z.content,U=Z.contentNode,W=Z.arrowNode;U.className=(O+"-content "+A+" "+Z.contentNodeCssClass);U.style.cssText=Z.contentNodeCssText;U.innerHTML=Y;W.style.cssText="";Z.domNode.style.visibility=!!Y?"visible":"hidden";Z.updatePosition();if(!V&&Z.optimizePos){Z.optimizePos();}Z.updateScrollbars();};if(!this._hasPaint){Q(true);this._hasPaint=true;}else{this._paintHandle=window.setTimeout(Q,0);}}}function B(h,c,a,Y){var T=c&&(c.richTooltip||c.tooltip),f=a?I.getMousePosition(a,Y||self):null,Q=T&&(typeof T==="string");var U="",g="",d="",Z=T,X=null,W=mstrmojo.tooltip.POS_TOPLEFT,S=null,b=null;var V=false,R=false;if(T&&!Q){g=T.cssClass||g;U=T.contentNodeCssClass||U;d=T.contentNodeCssText||d;Z=T.content||"";X=T.refNode||X;W=T.posType||W;S=T.left||0;b=T.top||0;V=T.keepArrowXPos||V;R=T.keepArrowYPos||R;}h.set("contentNodeCssClass",U);h.set("cssClass",g);h.set("contentNodeCssText",d);h.set("content",Z);h.set("refNode",X);h.set("posType",W);h.set("left",Q?((f&&f.x)||h.left):S);h.set("top",(Q||!T)?((f&&(f.y+E))||h.top):b);h.set("keepArrowXPos",V);h.set("keepArrowYPos",R);}mstrmojo.Tooltip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.Tooltip",content:null,top:null,left:null,refNode:null,keepArrowXPos:false,keepArrowYPos:false,posType:"TL",markupString:'<div id="{@id}" class="'+O+' {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout><div class="'+O+'-shadow {@shadowNodeCssClass}"></div><div class="'+O+'-contentWrapper"><div class="'+O+"-content "+A+' {@contentNodeCssClass}" style="{@contentNodeCssText}"></div></div><div class="'+O+'-arrow"></div></div>',markupSlots:{containerNode:function(){return this.domNode.children[1];},contentNode:function(){return this.domNode.children[1].firstChild;},shadowNode:function(){return this.domNode.firstChild;},arrowNode:function(){return this.domNode.children[2];}},setupScrollNodes:function D(){this.scrollNode=this.contentNode;this.scrollbarHostNode=this.containerNode;},_previousVisible:false,markupMethods:{onvisibleChange:function(){var R=this.domNode.style,Q=!!this.visible;if(this._previousVisible!==Q){R.visibility="hidden";}R.display=Q?"block":"none";this._previousVisible=Q;if(Q){this.updatePosition();if(this.content){G.call(this);}}},onleftChange:G,ontopChange:G,onrefNodeChange:G,onposTypeChange:G,oncontentNodeCssClassChange:G,oncontentNodeCssTextChange:G,oncontentChange:G,oncssClassChange:G},preBuildRendering:function N(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}return this._super();},updatePosition:function H(V){if(!this.visible&&!V){return ;}var U=this.refNode,T=U?L.offset(U,document.body):{left:I.getHorizontalScroll(),top:I.getVerticalScroll()},k=this.domNode.style,e=this.containerNode,g=e.offsetWidth,Y=e.offsetHeight,R=this.posType,b=R.indexOf("R")>-1,W=R.indexOf("B")>-1,a=this.top!==null?parseInt(this.top,10)+T.top-(W?Y:0):null,S=this.left!==null?parseInt(this.left,10)+T.left-(b?g:((R.indexOf("C")>-1)?Math.floor(g/2):0)):null,i=false,Z=false,c,X,h=I.windowDim(),f=I.getHorizontalScroll()+h.w,Q=I.getVerticalScroll()+h.h,d=this.arrowNode,j=null;if(S!==null){c=Math.min(Math.max(S,0),f-g);k.left=c+"px";i=S!==c;}if(a!==null){X=Math.min(Math.max(a,0),Q-Y);k.top=X+"px";Z=a!==X;}if(i||Z){if((this.keepArrowXPos&&i)||(this.keepArrowYPos&&Z)){j=M.getComputedStyle(d);}if(this.keepArrowXPos&&i){d.style.left=(parseInt(j.left,10)+S-c)+"px";}if(this.keepArrowYPos&&Z){d.style.top=(parseInt(j.top,10)+a-X)+"px";}}M.toggleClass(this.domNode,"offset",i||Z);},_on_tooltip_change:function(Q){B(this,Q&&Q.src);},_set_opener:function(T,S){var R=this.opener,Q=S!==R;if(Q){if(S){C(S,this);}if(R){C(S,this,true);}if(R&&R.detachEventListener){R.detachEventListener(this._richSubs);R.detachEventListener(this._ttpSubs);}if(S&&S.attachEventListener){this._richSubs=S.attachEventListener("richTooltipChange",this.id,"_on_tooltip_change");this._ttpSubs=S.attachEventListener("tooltipChange",this.id,"_on_tooltip_change");}this.opener=S;}return Q;},updatePopupConfig:function(Q,R){B(this,R,Q&&Q.e,Q&&Q.win);},onscroll:function K(){if(this.visible&&this.nudge){this.nudge();}this._super();},onmouseover:mstrmojo.emptyFn,onmouseout:mstrmojo.emptyFn});var J=null;mstrmojo.tooltip={POS_TOPLEFT:"TL",POS_BOTTOMLEFT:"BL",POS_TOPRIGHT:"TR",POS_BOTTOMRIGHT:"BR",POS_BOTTOMCENTER:"BC",POS_TOPCENTER:"TC",open:function F(R,T,S,Q){if(!J||!mstrmojo.all[J.id]){J=new mstrmojo.Tooltip();}Q=Q||{};Q.e=T;Q.win=S;J.open(R,Q);R.tooltip=J;},close:function P(){if(J){if(J.opener){J.opener.tooltip=null;}J.close();}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsPopup","mstrmojo._CanAutoClose");function A(B){return function(){this.domNode.style[B]=this[B]||"";};}mstrmojo.Popup=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.Popup",shadowNodeCssClass:"mstrmojo-popup-shadow",titleNodeCssClass:"mstrmojo-popup-title",contentNodeCssClass:"mstrmojo-popup-content",cssDisplay:"block",markupString:'<div id="{@id}" class="mstrmojo-Popup {@cssClass}" style="{@cssText}"><div class="mstrmojo-Popup-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Popup-title {@titleNodeCssClass}">{@title}</div><div class="mstrmojo-Popup-content {@contentNodeCssClass}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onleftChange:A("left"),ontopChange:A("top"),onzIndexChange:A("zIndex")}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");var A=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:A.visibleMarkupMethod,onheightChange:A.heightMarkupMethod,onwidthChange:A.widthMarkupMethod}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Widget","mstrmojo.css","mstrmojo.dom");var Y=mstrmojo.css,F=mstrmojo.dom;var Z={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};function A(){var c=this.value,b=this.inputNode,d=b.value,a=(c!==null&&c!==undefined)?String(c):"";if(a!==d&&(!this.keepEmpty||d!==this.emptyText)){b.value=a;}if(b.mstrmojoEmpty){Y.removeClass(b,[this.emptyClass]);b.mstrmojoEmpty=null;}}function X(){var a=this.inputNode;a.value=this.emptyText||"";Y.addClass(a,[this.emptyClass]);a.mstrmojoEmpty=true;}function N(){var a=this.inputNode;if(a){this.readingDom=true;this.set("value",a.value);this.readingDom=false;}}function U(a){var b=this;if(a===-1){N.call(this);}else{if(this._lastTimeoutId){window.clearTimeout(this._lastTimeoutId);}this._lastTimeoutId=window.setTimeout(function(){delete b._lastTimeoutId;N.call(b);},a||100);}}mstrmojo.TextBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TextBox",value:"",type:"text",hint:"",readOnly:false,size:"",maxLength:"",cssDisplay:"inline",tabIndex:"",emptyText:"",keepEmpty:false,emptyClass:"mstrmojo-empty",valueChangeDelay:-1,textValid:true,autoComplete:true,autoCorrect:true,autoCapitalize:true,markupString:'<input id="{@id}" class="mstrmojo-TextBox {@cssClass}"  style="{@cssText}" title="{@tooltip}" type="{@type}" value="" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}"min="{@min}" max="{@max}" placeholder="{@hint}" mstrAttach:focus,keyup,blur,paste,cut,input,click,keydown  tstid="{@tstid}"/>',markupSlots:{inputNode:function D(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,oncssClassChange:function S(){this.inputNode.className="mstrmojo-TextBox "+(this.cssClass||"");},onhintChange:function O(){this.inputNode.setAttribute("placeholder",this.hint);},onenabledChange:function E(){var a=this.inputNode;a.disabled=!this.enabled;Y.toggleClass(a,"disabled",!this.enabled);},onvalueChange:function P(){var a=this.value,b=(a===undefined)||(a===null)||(a==="");if(b){if(!this.hasFocus){X.call(this);}else{this.inputNode.value="";}}else{A.call(this);}if(F.isIE9){this.inputNode.type=b?"text":this.type;}},ontooltipChange:function R(){this.domNode.title=this.tooltip;},onreadOnlyChange:function H(){this.inputNode.readOnly=this.readOnly;},ontextValidChange:function B(){Y.toggleClass(this.inputNode,["err"],!this.textValid);}},postBuildRendering:function V(){this._super();var a=this.inputNode;a.setAttribute("autocomplete",this.autoComplete?"on":"off");a.setAttribute("autocorrect",this.autoCorrect?"on":"off");a.setAttribute("autocapitalize",this.autoCapitalize?"on":"off");},focus:function Q(){if(this.inputNode&&this.inputNode.offsetParent){try{this.inputNode.focus();}catch(a){}}},prefocus:function M(){this.hasFocus=true;A.call(this);},blur:function T(){this.inputNode.blur();},preblur:function W(){window.setTimeout(function(){},200);this.hasFocus=false;N.call(this);var a=this.value;if(((a===null||a==="")&&this.emptyText)||(this.keepEmpty&&a===this.emptyText)){X.call(this);}},prekeyup:function I(b){var a=b.hWin,c=b.e||a.event;U.call(this,this.valueChangeDelay);var d=Z[c.keyCode];if(this["on"+d]){this["on"+d](b);}},preinput:function J(){U.call(this,this.valueChangeDelay);},prepaste:function K(){U.call(this);},precut:function G(){U.call(this);},setInvalidState:function C(a){this.set("textValid",true);if(a){this.domNode.setAttribute("title",a);}},cleanUp:function L(){this.inputNode.value="";this.set("textValid",false);this.domNode.setAttribute("title",this.tooltip);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var M=mstrmojo.Widget,G=mstrmojo.dom,N=mstrmojo.global.document,C=50,B=500;mstrmojo.Stepper=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Stepper",orientation:"vertical",provider:null,title:"",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text">{@itemHtml}</div><div class="prev">-</div></div>',markupSlots:{titleNode:function(){return this.domNode.firstChild;},nextNode:function(){return this.domNode.children[1];},textNode:function(){return this.domNode.children[2];},prevNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:M.visibleMarkupMethod,onheightChange:M.heightMarkupMethod,onwidthChange:M.widthMarkupMethod,onenabledChange:function I(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},preBuildRendering:function J(){this.itemHtml=this.provider.renderItemAt();this._super();},processEvent:function A(O){if(G.contains(this.textNode,O)||O===this.titleNode){return ;}var Q=this.provider,P=((O===this.nextNode)?"Next":"Prev");if(Q["has"+P]()){Q[P.toLowerCase()]();this.updateDisplayText();}},updateDisplayText:function E(){this.textNode.innerHTML=this.provider.renderItemAt();},startStepperInterval:function F(O,P){var Q=this;this._holdTimer=setInterval(function(){Q[P](O);},C);},stopStepperInterval:function H(){if(this._holdTimer){clearInterval(this._holdTimer);delete this._holdTimer;}},onclick:function L(O){this.processEvent(O.e.target);},onmousedown:function D(O){if(!this._holdTimer&&!this._startHoldTimer){var P=this;this._startHoldTimer=setTimeout(function(){delete P._startHoldTimer;P.startStepperInterval(O,"onclick");},B);G.attachOneTimeEvent(N,"mouseup",function(){if(P._startHoldTimer){clearTimeout(P._startHoldTimer);delete P._startHoldTimer;}P.stopStepperInterval();},true);}},onselectstart:function K(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");mstrmojo.VBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VBox",markupString:'<table id="{@id}" class="mstrmojo-VBox {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var D=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" style="z-index: 1100;" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},editorNode:null,btnHbox:null,markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(L){if(L){return ;}var J=this.visible,K=J?"block":"none";this.editorNode.style.display=K;if(this.modal){this.curtainNode.style.display=K;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function F(){var J;var K=this.buttons;if(K&&!this.btnHbox){for(J in K){K[J].cssClass=(K[J].cssClass||"")+(this.noButtonCls?"":" mstrmojo-Editor-button");}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:K},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function B(){var J=this.placeholder;if(this._super()){if(!this.parent&&!J){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function E(){var J=this.id;return function(){var K=mstrmojo.all[J];K.resizeDialog();K.positionDialog();};},postBuildRendering:function A(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var K=this._resizeHandler=this.getResizeHandler();D.attachEvent(window,"resize",K);}this.resizeDialog();this.positionDialog();try{this.domNode.focus();}catch(J){}return true;},resizeDialog:function G(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function C(){var K=this,O=K.curtainNode,J=document.body,M=document.documentElement,N=O.style,L=K.curtainPosition;N.width=Math.max(J.clientWidth,M.scrollWidth)+"px";if(L&&L.h){N.height=L.h+"px";}else{N.height=Math.max(J.clientHeight,M.scrollHeight)+"px";}if(L&&L.y){N.top=L.y+"px";}K.raiseEvent({name:"resizeCurtain"});},positionDialog:function H(){var K=this.editorNode,M=this.left,L=this.top;if(!M||!L){D.center(K);var J=K.style;if(this.alignment==="top"){J.top="10px";}if(M){J.left=M;}if(L){J.top=L;}}},destroy:function(K){var J=this._resizeHandler;if(J){D.detachEvent(window,"resize",J);}this._super(K);}});mstrmojo.toast=function I(O,M,Q,J){var P="mojoToast9",N,L=M||3000;if(J&&J.id){P=J.id+"-"+P;}try{mstrmojo.all[P].destroy();}catch(K){}mstrmojo.insert({id:P,scriptClass:"mstrmojo.Label",cssClass:(J&&J.cssClass)?J.cssClass:"toastCss",text:O}).render();N=mstrmojo.all[P].domNode;if(J&&J.dom){J.dom.appendChild(N);}else{document.body.appendChild(N);D.bottomCenter(N);}window.setTimeout(function(){if(Q){Q();}try{mstrmojo.all[P].destroy();}catch(R){}},L);};mstrmojo.mask={show:function(){var J=mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});J.render();document.body.appendChild(J.domNode);},hide:function(){mstrmojo.mask.win.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.ui._HasScroller","mstrmojo.css");var B=mstrmojo.css;mstrmojo.ui.ColumnContainer=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnContainer {@cssClass}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},scrollNode:function(){return this.domNode.firstChild;}},markupMethods:{onnextChange:function A(){B.toggleClass(this.domNode,"hasNext",!!this.next);}},active:false,next:null,idx:undefined,updateColumnContainer:function D(){var E=this.next;if(E){E.updateColumnContainer();}},onactiveChange:function C(){B.toggleClass(this.domNode,"active",this.active);var E=this.next;if(E){E.updateColumnContainer();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var E=mstrmojo.dom,D=mstrmojo.string,F=mstrmojo.hash,H=mstrmojo.array,C=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",tooltipOrientation:"horizontal",tooltipOffset:8,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function A(I){return I&&(I.ttp||I.n);},showTooltip:function G(W,M){var O=this;if(!O.hasOpenTooltip&&!(O._lastOpened&&O._lastOpened.visible)){var b=E.eventTarget(M,W),X=O.getItemFromTarget(b),R=O.getItemNodeFromTarget(b),d=O.getTooltipText(X),N=O.tooltipCss;if(!d){return ;}var c=E.position(R),V,P,L,T="",U=O.tooltipOffset;if(this.tooltipOrientation==="vertical"){V=c.x+c.w/2;L=C.POS_TOPCENTER;P=c.y+c.h+U;O.tooltipCss=F.copy({cssClass:"vi-regular vi-tooltip-A A-center"},N);}else{var K=E.windowDim(),S=40,Y=c.x+c.w+U,J=c.x-U,a=J-S,I=K.w-(Y+S),Z="vi-regular vi-tooltip-",Q;P=c.y;if(I>=a){V=Y;Q=I;L=C.POS_TOPLEFT;N.cssClass=Z+"C  "+N.rightCssClass;}else{V=J;Q=a;L=C.POS_TOPRIGHT;N.cssClass=Z+"D  "+N.leftCssClass;}T="max-width: "+Q+"px;";}if(O.tooltipContrast){N.cssClass=N.cssClass+" contrast";}if(N&&N.getItemCssClass){N.cssClass=H.filter([N.cssClass,N.getItemCssClass(X)],function(e){return !!e;}).join(" ");}O.richTooltip=F.copy(O.tooltipCss,{content:D.apply(O.tooltipMarkup,{c:d,style:T}),top:P,left:V,posType:L});O.richTooltip.keepArrowXPos=!!O.keepArrowXPos;O.richTooltip.keepArrowYPos=!!O.keepArrowYPos;this._super(W,M);}},onclick:function B(I){var J=this;window.setTimeout(function(){if(J.hasOpenTooltip){J.hideTooltip();}window.clearTimeout(J._tooltipTimeOut);},0);this._super(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(V,T){if(!V){return ;}var S=T&&T.length||0,U;for(U=S;U>0;U--){V=V.replace(new Array(U+2).join("#"),T[U-1]);}return V;},L=function L(T){if(!T){return ;}var Z=this,V=J.position(T.refNode||Z.refNode),Y=J.position(Z.domNode),X=T.position||R.RIGHT,U=0,a=0,S=9+(T.margin!==undefined?T.margin:0),W=" ";switch(X){case R.TOP:a=-Y.h-S;W+="t";break;case R.BOTTOM:a=V.h+S;W+="b";break;case R.LEFT:U=-Y.w-S;W+="l";break;case R.RIGHT:U=V.w+S;W+="r";break;}mstrmojo.hash.forEach(C(T,{left:U,top:a,contentNodeCssClass:W,visible:false}),function(b,c){this[c]=b;},this);this.set("visible",T.invalid);},A=function A(S){var W=this,U,V=S.errorCode,X=S.errorMsg,T=S.args,Y=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){U={content:V!==null?(W.generateContentHTML(Q(Y[V],T))||Y["*"]):X};}return U;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(U){var Y=this,a=Y.warningSlotName,c=Y[a],S=U&&U.lasting||6000,X=U.refNode||this.domNode,T=U.highlight!==false,b=U.closeOnClick===false?false:true,Z;if(!c){c=new mstrmojo.Tooltip({refNode:X,highlight:T,closeOnClick:b,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Y.addDisposable(c);Y[a]=c;Z=Y.closeOnClick=Y.getCloseOnClickListener();J.attachEvent(document.body,"click",Z);}var W=U.position||R.TOP,V="vi-warning vi-tooltip-";switch(W){case R.TOP:c.cssClass=V+"V";break;case R.BOTTOM:c.cssClass=V+"A";break;case R.LEFT:c.cssClass=V+"D";break;case R.RIGHT:c.cssClass=V+"C";break;}c.open(Y,A.call(Y,U));this.adjustPosition(U);if(T){P.toggleClass(c.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Y._warningTimeOut);Y._warningTimeOut=window.setTimeout(function(){Y.hideWarning();},S);},hideWarning:function H(){var T=this,S=T[T.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(T._warningTimeOut);delete T._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var T=S[S.warningSlotName];if(T.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var T=this;L.call(T[T.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(U){if(!U||!U.attachEventListener){return ;}var V=U._validationEventListener,T;if(V){U.detachEventListener(V);delete U._validationEventListener;}T=this.getValidationEvtListener();if(T){U._validationEventListener=U.attachEventListener("validationChange",this.id,T);}},this);},getValidationEvtListener:function B(){var T=this;return function S(U){var V=U.value;T[(V&&V.invalid?"show":"hide")+"Warning"](V);};},unrender:function K(S){var T=this[this.warningSlotName];if(T){T.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var C=function(S,U,T){var R=S.parent.opener,J=R&&R.showDesc,Q=R&&R.showPath,I=U[S.itemField];var P=mstrmojo.string.escape4HTMLText,V="";if(Q){var M=U.anc&&U.anc.items,O=M&&M.length;if(O>0){for(var L=0;L<O-1;L++){V+=M[L].n+" > ";}V+=P(M[O-1].n);}else{if(U.path){V+=U.path;}}}if(!T){V+=(V.length===0?"":" > ")+P(I);}if(J){var N=U[S.itemDescField],K=120;if(N){V+="\r\n\r\n<br>"+P(N.substring(0,K)+(N.length>K?"...":""));}}return V;};var A=function(I,J,K){I.path=null;if(!J||!K||K.path){if(K&&K.path){I.set("path",K.path);}return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var L=J.path||J.getAttribute("path");if(L){I.set("path",K.path);return ;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(M){var N=H(M.toString())||"";K.path=N;I.set("path",N);}},{taskId:"getObjectDetails",objectID:K.did,objectType:K.t},undefined);},200);};var H=function(K){var N;if(window.DOMParser){N=(new DOMParser()).parseFromString(K,"text/xml");}else{N=new ActiveXObject("Microsoft.XMLDOM");N.async="false";N.loadXML(K);}var P=N.getElementsByTagName("path")[0],L=P.childNodes,O="";if(L){for(var J=0,I=L.length;J<I;J++){var M=L[J].childNodes&&L[J].childNodes[0];if(M){O+=mstrmojo.string.escape4HTMLText(M.nodeValue)+(J<I-1?"> ":"");}}}return O;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",useRichTooltip:false,itemDescField:"desc",getItemMarkup:function(K,I){var J=this.parent.opener,L=this.useRichTooltip?"":this.buildTooltip(K);return'<div class="mstrmojo-suggest-text '+((J&&J.item2textCss(K))||"")+'" idx="'+I+'" title="'+L+'">'+J.getHighlightedText(J.getSearchPattern(),mstrmojo.string.escape4HTMLText(K[this.itemField]))+"</div>";},getItemProps:function E(){return{};},onmouseover:function(J){var M=this.parent.opener;if(M&&M.showPath){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),I=K.getAttribute("idx"),L=I!=null?this.items[I]:null;if(L&&L.t>-1){this.targetEl=K;this.targetItem=L;this.requestPath(K,L);}}},requestPath:function D(I,K){var J=this.parent.opener;if(K.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function&&J.showFunctionSyntaxAsPath){this.buildFunctionSyntax(K);}else{A(this,I,K);}},buildFunctionSyntax:function G(J){var K=J.path;if(!K&&J.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){var I=function I(P){if(P.did<0){return P.n;}var O=P.pars,M=[],N,L;M.push(P.n);if(O){M.push("(");for(N=0,L=O.length;N<L;N++){M.push(O[N].n);if(N!==(L-1)){M.push(", ");}}M.push(")");}return M.join("");};J.path=I(J);}this.set("path",{path:J.path,excludeSelf:true});},buildTooltip:function B(I,J){return C(this,I,J);},onpathChange:function F(){var I=this.targetEl;I.path=1;var J=this.buildTooltip(this.targetItem,this.path.excludeSelf);if(this.useRichTooltip){this.useRichTooltip=true;this.hasOpenTooltip=false;if(!I.ttp){I.ttp=J;this.showTooltip();}}else{I.title=J;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller","mstrmojo.css");var F=mstrmojo.css;var C;mstrmojo.ui.CheckList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.CheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" mstrAttach:click,contextmenu><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{scrollboxNode:function A(){return this.domNode.firstChild;},itemsContainerNode:function I(){return this.domNode.firstChild.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onorientationChange:function L(){F.toggleClass(this.domNode,"horizontal",this.orientation!=="v");},onmultiSelectChange:function J(){F.toggleClass(this.domNode,"radio",!this.multiSelect);},onenabledChange:function H(){F.toggleClass(this.domNode,"disabled",!this.enabled);}},multiSelect:true,orientation:"v",minimumSelectCnt:0,icnCss:"icn",items:null,getItemMarkup:function K(M){if(!C){C=this._super(M).replace(">{@en@n}<",'title="{@tt}"><span>{@en@n}</span><');}return C;},getItemProps:function G(O,M){var N=this._super(O,M);var P=O.css;if(P){N.addCls(P);}N.tt=O.tt||"";N.n=O.n||" ";return N;},setupScrollNodes:function D(){this.scrollNode=this.scrollboxNode;},preselectionChange:function B(N){var O=this.minimumSelectCnt,M=this.getSelectedItems().length,P=N.removed;if(P&&O){if(M<O){this.select(P,true);return false;}}F.toggleClass(this.itemsContainerNode,"disableSelected",M<=O);return true;},buildRendering:function E(){this._super();F.toggleClass(this.itemsContainerNode,"disableSelected",this.getSelectedItems().length<=this.minimumSelectCnt);}});mstrmojo.ui.CheckList.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo._IsDial");mstrmojo.WidgetDial=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._IsDial],{scriptClass:"mstrmojo.WidgetDial"});})();(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.ui.menus._HasMenuPopup","mstrmojo._CanAutoClose","mstrmojo._IsPopup","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.ui.PopupConfig","mstrmojo.ui._HasScroller","mstrmojo.ui._HasUITheme","mstrmojo.dom","mstrmojo.css","mstrmojo.ui._HasListTooltip");var D=mstrmojo.dom,P=mstrmojo.css,I=mstrmojo.ui.PopupConfig.directionCfg;var Q={};var K=false;function F(V,W){if(V.pop){if(W&&V.ax){window.clearTimeout(this._popupAxTimeout);V.actionFn();this.closeAllMenus();}else{var T=V.fn.call(mstrmojo.all[V.scope],V.ctxt);var U=T.ENUM_CORNERS;T.setAlignment(U.TOP_RIGHT,U.TOP_LEFT);T.hostId=this.id;T.hostElement=this._getItemNode(V._renderIdx);this.openPopup(T.newInstance());}}else{if(V.dsbld!==true){if(V.fn(V,this)!==false){this.closeAllMenus();}}}}function G(T){var U=parseInt(T);return U===null||isNaN(U)?0:U;}mstrmojo.ui.menus.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._IsPopup,mstrmojo.ui.menus._IsMenuPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip,mstrmojo.ui._HasScroller,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.ui.menus.Menu",selectionPolicy:"reselect",locksHover:true,closeOnClick:true,themeClassName:"mojo-theme-dark",icnCss:"mstrmojo-ui-Menu-item-container",popupConfig:null,tooltipCss:{leftCssClass:"menuTooltip",rightCssClass:"menuTooltip"},setupScrollNodes:function(){if(this.popupConfig&&this.popupConfig.supportsScroll){this.scrollNode=this.itemsContainerNode;this.scrollbarHostNode=this.domNode;}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll&&this.hasCustomScrollbar){var V=this.scrollNode;if(!V){return ;}var T=(getComputedStyle&&getComputedStyle(V,null))||V.currentStyle,U=V.offsetWidth-G(T.borderLeftWidth)-G(T.borderRightWidth)-V.clientWidth;V.style.marginRight=-U+"px";V.style.paddingRight=0;}},onscroll:function(){this.closePopup();this._super();},init:function L(V){this._super(V);var T=this.popupConfig;this.items=T.getMenuItems();var U=["mstrmojo-ui-Menu","unselectable"],W=T.menuCssClass;if(W){U.push(W);}P.addWidgetCssClass(this,U);if(T&&T.supportsScroll&&T.maxHeight>0){this.icnCssText=(this.icnCssText||"")+";max-height:"+T.maxHeight+"px";}this.useRichTooltip=!!T.useTooltip;this.tstid=T.tstid;},markupMethods:{onvisibleChange:function J(){var T=this.visible;if(!K||T){P.toggleClass(this.domNode,"visible",T);}}},getItemMarkup:function C(X,T){if(X.getItemMarkup){return X.getItemMarkup.apply(this,[X,T]);}var V=!!X.pop,W=V?"submenu":"item",U=Q[W];if(!U){U=this._super(X,T).replace("{@en@n}",'<div class="micn"></div>{@en@n}');if(V){U=U.replace("{@en@n}",'{@en@n}<div class="arw"></div>');}Q[W]=U;}if(X.tstid){U=U.replace("{@tag}","{@tag} "+mstrmojo.tstid(X)+" ");}return U;},getItemProps:function R(V,T){var U=this._super(V,T);U.tag="a";U.addCls("mstrmojo-ui-Menu-item");U.addCls(V.cls);return U;},adjustCornersForPopupOverflow:function O(){var V=this._super(),Z=this.domNode,Y,X,T,U,W;if(V){Y=D.position(Z);T=Y.y;X=Z.style;U=this.popupConfig;W=U.position||D.position(U.hostElement);if(T<0||(T+Y.h>D.position(document.body).h)){X.top=(-W.y+5)+"px";X.bottom="auto";}}return V;},onmouseover:function E(T){var Y=T.getTarget(),X=this.getItemFromTarget(Y),W=this,V=W._lastOpened,a=V&&this.getItemFromTarget(V.popupConfig.hostElement)._renderIdx,Z=this.getItemNodeFromTarget(Y),U=(a!==undefined&&D.contains(this._getItemNode(a),Y,true,this.domNode));if(X){this._lastHoverIx=X._renderIdx;window.clearTimeout(this._popupTimeOut);window.clearTimeout(this._popupAxTimeout);if(this._lastHoverIx!==a&&!U){this._popupTimeOut=window.setTimeout(function(){if(W._lastOpened&&W._lastOpened.visible){W.closePopup();}if(W.visible&&X.pop){if(X.ax){W._popupAxTimeout=window.setTimeout(function(){P.removeClass(Z,"hlt-ax");F.call(W,X);},0);}else{F.call(W,X);}}},400);if(X.pop&&X.ax){P.addClass(Z,"hlt-ax");}}}},onclick:function S(T){this._evtTarget=T.getTarget();this._super(T);T.cancel();},postselectionChange:function H(T){var U=T.added;if(U){var V=this.items[U[0]];F.call(this,V,!(V.ax&&this._evtTarget.className==="arw"));delete this._evtTarget;}},oncontextmenu:function M(T){D.preventDefault(window,T.e);return false;},postBuildRendering:function N(T){this._super(T);if(this.popupConfig.supportsScroll){var U=this;window.setTimeout(function(){U.updateScrollbars();},10);}},showTooltip:function B(X,W){var V=D.eventTarget(W,X),U=this.getItemNodeFromTarget(V),T=this.getItemFromTarget(V);if(U&&((T&&T.ttp)||(U.scrollWidth>U.clientWidth))){this._super(X,W);}},onClose:function A(T){if(this._super){this._super(T);}this.closePopup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.Box","mstrmojo.array","mstrmojo._HasLayout","mstrmojo.ui.ColumnContainer");var E=mstrmojo.dom,G=mstrmojo.hash,C=mstrmojo.array;mstrmojo.ui.ColumnWalk=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.ColumnWalk",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnWalk cf {@cssClass}" mstrAttach:click></div>',layoutConfig:{h:{containerNode:"100%"},xt:true},currentColumn:-1,addNextColumn:function B(K){var J=this.children||[],L=J.length,I=J[L-1];var M=this.addChildren([G.copy(K,{scriptClass:"mstrmojo.ui.ColumnContainer",idx:L})])[0];if(I){I.set("next",M);}},onclick:function A(I){var K=I.getTarget();if(K){var J=this.children;C.forEach(J,function(M,L){if(E.contains(M.domNode,K,true,M.domNode)){this.set("currentColumn",L);}},this);}},oncurrentColumnChange:function D(I){var K=this.children,M=K[I.valueWas],J=K[this.currentColumn],L="active";if(M){M.set(L,false);}J.set(L,true);},removeTrailingContainer:function H(K){var J=this,I=this.children;if(!I||K>=I.length-1){return ;}C.forEach(I.slice(K+1),function(L){J.removeAndDestroyChild(L);});if(K>=0){I[K].set("next",null);}},insertAndRemoveTrailing:function F(J,I){this.removeTrailingContainer(J);this.addNextColumn(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var h=mstrmojo.func.composite,M=mstrmojo.dom,Z=mstrmojo.Button.newWebButton,C=mstrmojo.css,Y=mstrmojo.all,N=mstrmojo.hash,W=mstrmojo.array;function V(o){if(!this.modal){return ;}var p=window.mstrApp;if(p&&p.modalEditorChange){p.modalEditorChange(this.id,o);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function X(){return this.domNode.firstChild;},titlebarNode:function j(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function k(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function l(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.title;}},onzIndexChange:function(){var o=this.zIndex;this.editorNode.style.zIndex=o;this.curtainNode.style.zIndex=o-1;},onvisibleChange:function(r){if(r){return ;}var q=this.visible,p="closeEffect",o="none";if(q){p="openEffect";o="block";}if(this[p]){this.playEffect(p);}else{this.editorNode.style.display=o;if(this.modal){this.curtainNode.style.display=o;}}},onhelpChange:function d(){if(this.showTitle){var p=this.help,o=this.helpNode;if(!p){o.style.display="none";}else{o.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(p,o){this._super(p,o);V.call(this,true);},close:function f(o){this._super(o);V.call(this,false);},unrender:function B(o){this._super(o);V.call(this,false);},destroy:function g(o){this._super(o);V.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;V.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function i(){return this.titlebarNode;},getMovingTarget:function U(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(o){var p=o.getTarget();if(p===this.closeNode||p===this.helpNode){C.toggleClass(p,"active",true);}},premouseup:function O(o){var p=o.getTarget();if(p===this.closeNode||p===this.helpNode){C.toggleClass(p,"active",false);}if(o.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function c(p){if(p.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{var o=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId||mstrApp.localeId)+"/"+(mstrApp.userHelpPage||"MicroStrategy_Web_Help.htm#");window.open(o+(this.help||""),"_blank");return false;}}},_set_visible:function b(t,q){var p=(this[t]!==q);if(p){this[t]=q;var s=this._close_handler;if(q){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var r=this;s=this._close_handler=s||function(u){var v=M.eventTarget(self,u);if(v&&v.parentNode&&!M.contains(r.editorNode,v,true,document.body)){r.close();}};M.attachEvent(document.body,"mousedown",s);}}else{var o=this._curtain_handler;if(o){M.detachEvent(window,"resize",o);}if(s){M.detachEvent(document.body,"mousedown",s);}}}return p;},showTooltip:function n(u,s){var r=this,p=M.findAncestorByAttr(M.eventTarget(s,u),"tooltip",true,this.domNode),q=p&&p.value;if(!r.hasOpenTooltip&&q){var o=M.position(p.node);r.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:q,top:Math.max(o.y+40,0),left:Math.max(o.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(u,s);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(o){o=Math.round(o);return["rgb(",o,",",o,",",o,")"].join("");}}},preStart:function(){var p=this.target,o=this.widget;o.editorNode.style.display="block";if(!o.modal){return false;}p.style.display="block";C.setOpacity(p,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var o=this.widget;o.editorNode.style.display="none";return !!o.modal;}};function D(o){return function(){Y[o].destroy();};}function J(p,w,x,y){var o=w.id||"mojoAlertx9",t,v=w.buttons;W.forEach(v,function(AA){var z=AA.onclick;AA.onclick=function(AB){var AC=Y[o];if(z&&z.call(AA,AB)===false){return ;}AC.destroy();AC=null;};});try{Y[o].destroy();}catch(u){}var q=w.cssClass,r=[];if(q){r.push(q);delete w.cssClass;}if(y){r.push(y);}r.push("mstrmojo-alert");t={scriptClass:"mstrmojo.Editor",id:o,width:"475px",zIndex:1000,title:x||mstrmojo.desc(11812,"Notification"),cssClass:r.join(" "),children:[{scriptClass:"mstrmojo.Label",cssClass:"alert-content",text:p,allowHTML:w.allowHTML}],visible:true};var s=new mstrmojo.Editor(N.copy(w,t));s.render();return s;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(p,v,q){q=q||{};var w=q.forceClose,u=q.callback||mstrmojo.emptyFn,t=N.copy(v||{},{buttons:w?[mstrmojo.Button.newActionButton((q.buttonText||mstrmojo.desc(8607,"Dismiss")),u)]:null,showTitle:false,modal:false,top:"42px"}),r=q.duration||6000;var s=J(p,t,"",w?"ed-notify":"ed-toast"),o=s.id;if(!w){window.setTimeout(h([u,D(o)]),r);}else{window.setTimeout(function(){if(Y[o]){Y[o].editorNode.style.opacity=0.75;}},6000);}return s;};mstrmojo.confirm=function e(t,p,s){p=p||{};var o=p.confirmBtn||{},r=p.cancelBtn||{},q=[Z(o.t||mstrmojo.desc(219,"Yes"),o.fn,true),Z(r.t||mstrmojo.desc(218,"No"),r.fn)];return J(t,N.copy(s||{},{buttons:q,onPreClose:function(){if(r&&r.fn){r.fn();}return true;}}));};mstrmojo.warn=function K(q,o,p){p=p||{};p.cssClass=(p.cssClass||"")+" mstrmojo-warning";mstrmojo.confirm(q,o,p);};mstrmojo.alert=function a(t,q,s,u,o,r){var p={title:s,zIndex:u,cssClass:o,buttons:[Z(mstrmojo.desc(1442,"OK"),q,true)],onPreClose:function(){if(q){q();}return true;}};N.forEach(p,function(w,v){if(!w){delete p[v];}});return J(t,N.copy(r,p));};mstrmojo.error=function T(s,o,r){var p=s||{};var q=mstrmojo.desc(96,"Error");if(r){q=(r.title)?r.title:mstrmojo.desc(96,"Error");}J("",N.copy(r||{},{buttons:[Z(mstrmojo.desc(1442,"OK"),o,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:p.shortDesc,longDesc:p.longDesc}]}),q);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.SuggestionList");function D(Y){var X=this.list,V=X.selectedIndex,U=X.items.length,W=Y?U-1:0;if(V===W){X.clearSelect();return ;}if(V===null||V<0){V=Y?0:U-1;}else{V+=Y?1:-1;}X.singleSelect(V);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,disableClick:false,getCandidatesThroughTaskCall:mstrmojo.emptyFn,onSuggestionItemSelect:function J(U){this.hideSuggestion();},getSearchPattern:function T(){return"";},getSuggestionPos:function N(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(V){var U=this.getSuggestion(V);if(!this.noCache&&U!==-1){this.updateSuggestion(U);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function M(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(){if(this.suggestionShown){this._lastOpened.nextHighlight();}},preHighlight:function H(){if(this.suggestionShown){this._lastOpened.preHighlight();}},getSuggestion:function S(h){var d=this.candidates,a=d&&d.items,X=d&&d.isComplete,g=this._last_hit;if(!this.noCache&&(d||g)){var f=this.filterCandidates(a,h,this.REQUEST_THRESHOLD),b=f.length,e=this.suggestCount,U=false;if(!X&&b<e){var V=g&&g.pattern;if(g&&V&&(h.indexOf(V)>-1)){U=true;var k=this.filterCandidates(g.items,h,this.REQUEST_THRESHOLD),Y=k&&k.length,W=mstrmojo.array,j=this.itemField,Z;for(Z=0;Z<Y;Z++){if(W.find(f,j,k[Z][j])===-1){f.push(k[Z]);}}b=f.length;}}if(!X&&((h.length>2&&b<this.REQUEST_THRESHOLD)||(b<e))){this.requestCandidates(h);return -1;}return(b<e)?f:f.slice(0,e);}this.requestCandidates(h);return -1;},requestCandidates:function A(U){this._request_pattern=U;var X=this,V=this.getSuggestionTarget(),W={success:function(e){if(!e){return ;}var d=X.getSuggestionTarget();if(!d||(V!==d)){return ;}var j=d.getSearchPattern(),a=e.items;X._last_hit={items:a,pattern:U};X.sz=e.sz;if(!X.noCache&&a){var f=(X.candidates&&X.candidates.items)||[],g=[].concat(a),b=a.length,Z;for(Z=0;Z<b;Z++){var Y=g[Z];if(mstrmojo.array.indexOf(f,Y)>-1){mstrmojo.array.removeItem(a,Y);}}if(X.candidates){X.candidates.items=f.concat(a);}}if(j&&j.indexOf(U)>-1){var h=X.filterCandidates(a,j);X.updateSuggestion(h);}},failure:function(Y){if(Y.getResponseHeader){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};this.getCandidatesThroughTaskCall({pattern:U,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},W);},filterCandidates:function Q(X,W,U){U=U||this.suggestCount;W=mstrmojo.string.regEscape(W);var Y=this.itemField,V=mstrmojo.array.filter(X,function(Z){return(new RegExp("\\s"+W+"|^"+W,"i")).test(Z[Y]);},{max:U});return V;},getHighlightedText:function P(W,Z){if(!this.highlightPattern||mstrmojo.string.isEmpty(W)){return Z;}try{if(!this.nameWildcards||mstr.$A.find([2,32],parseInt(this.nameWildcards,10))>-1){Z=Z.replace(new RegExp("(^|\\s)("+W+")","gi"),"$1<b>$2</b>");}else{var Y=W.split(" "),V,U;for(V=0,U=Y.length;V<U;V++){if(Y[V]!==""){Z=Z.replace(new RegExp("("+Y[V]+")","gi"),"<b>$1</b>");}}}}catch(X){}return Z;},updateSuggestion:function O(X){var V=X&&X.length,U=this.browseItemVisible;if(V||U){if(U){X=X||[];X.push({n:"Browse...",t:-99,cssClass:(V?"br":"bro")});}this.set("suggestionItems",X);if(this.suggestionShown){var W=this._lastOpened;if(W&&W.nudge){W.nudge();}if(this.autoSelect&&W){W.list.singleSelect(0);}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var U=this.opener;if(U&&U.onBrowserClose){U.onBrowserClose();}},onOpen:function(){var U=this.opener;if(U&&U.onBrowserOpen){U.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function L(){this.browserShown=false;},handleSuggestionItemSelect:function K(U,V){if(this.browseItemVisible&&U.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var W=this.zIndex;this.openPopup("ob",{zIndex:(W&&(W+10))||110});this.ob.browser.browse(mstrmojo.hash.copy(V,{folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes}));this.browserShown=true;}else{this.onSuggestionItemSelect(U);}},highlightPattern:true,suggestionPopupCssClss:"",suggestionPopup:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-ObjectInputBox-suggest",autoClose:true,locksHover:true,nextHighlight:function(){D.call(this,true);},preHighlight:function(){D.call(this,false);},getSelected:function M(){var U=this.list;return U.items[U.selectedIndex];},onOpen:function I(){var U=this.opener;if(U){mstrmojo.css.addClass(this.domNode,U.suggestionPopupCssClss||"");if(U.autoSelect){this.list.singleSelect(0);}if(U.nudge){U.nudge(this);}}},onClose:function F(){this.list.clearSelect();var U=this.opener;if(U){U.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,U.suggestionPopupCssClss||"");}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function R(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.Menu","mstrmojo.hash","mstrmojo.array");mstrmojo.ui.menus.MenuItemType=null;var U="separator";mstrmojo.ui.menus.MenuConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.MenuConfig",menus:null,menuCssClass:"",supportsScroll:false,maxHeight:0,hasMenuItems:function Q(){return !!this.menus.length;},getMenuItems:function E(V){return mstrmojo.array.filter(this.menus.slice().reverse(),function(Z,Y,X){var W=X[Y+1];return V||Z.cls!==U||(Y&&W&&W.cls!==U);}).reverse();},getMenuItem:function C(Y){var X=this.menus,V;if(X!==null){for(V=0;V<X.length;V++){var W=X[V];if(W.cls===Y){return W;}}}return null;},absorbMenuItems:function S(V){this.menus=this.menus.concat(V.menus);},addMenuItem:function I(c,Y,a,W,Z){var b,X,V;if(!c||typeof c==="string"){b=c;}else{b=c.n;X=c.ttp;}V={n:b,ttp:X,cls:Y,fn:a,ctxt:W};if(isNaN(Z)||Z>=this.menus.length){this.menus.push(V);}else{this.menus.splice(Z,0,V);}return V;},addCustomMenuItem:function T(a,X,Z,W,V){var Y=this.addMenuItem(a,X,Z,V);Y.getItemMarkup=W;return Y;},addDisabledMenuItem:function O(W,V){this.addNonInteractiveMenuItem(W,V,true);},addNonInteractiveMenuItem:function M(Z,W,V){var X=["non-int"];if(W){X.push(W);}if(V){X.push("disabled");}var Y=this.addMenuItem(Z,X.join(" "),mstrmojo.emptyFn);Y.dsbld=true;},addSeparator:function D(){this.addMenuItem("",U,function(){return false;});},addPopupMenuItem:function R(c,X,b,Y,W,Z){var a=["pop "];if(Y){a.push(Y);}var V=this.addMenuItem(c,a.join(" "),b,W,Z);V.pop=true;V.scope=X;return V;},addActionPopupMenuItem:function L(c,W,a,b,X,V,Z){var Y=this.addPopupMenuItem(c,W,b,(X||"")+" ax",V,Z);Y.actionFn=a;Y.ax=true;},addSubMenuItem:function K(Z,X,W,Y,V){this.addPopupMenuItem(Z,W,Y,X,V);},addEditorMenuItem:function P(Z,W,Y,V,X){this.addPopupMenuItem(Z,W,Y,"",V,X);},getToggleItemStates:function F(d,f,V,b,X,a){var Y,Z,W,c;if(typeof d==="string"){Y=Z=d;W=c="";}else{Y=d.on||"";Z=d.off||"";W=d.ttpOn||"";c=d.ttpOff||"";}var e=[{n:Y,ttp:W,cls:f+" on",fn:b,ctxt:a},{n:Z,ttp:c,cls:f,fn:V,ctxt:a}];if(!X){e.reverse();}return e;},addToggleMenuItem:function J(c,Y,a,X,W,b,V){var Z=this.getToggleItemStates(c,Y,a,X,b,V);return this.addDualStateItem(W,Z[0],Z[1]);},addDualStateItem:function G(W,V,X){return this.addMenuItem({n:V.n,ttp:V.ttp},V.cls,this.getDualStateHandler(W,V,X),V.ctxt);},getDualStateHandler:function H(W,V,X){return function(Z,a){var Y=[V,X];if(Z.cls===V.cls){Y.reverse();}Y[1].fn.call(mstrmojo.all[W],Z,a);Z.n=Y[0].n;Z.ttp=Y[0].ttp;Z.cls=Y[0].cls;};},addRadioMenuGroup:function B(X,c,Y,W,V,b,a){var Z=[];Y.forEach(function(g,d){if(g.separator){this.addSeparator();return ;}var i=g.text,h=(W||"")+" "+(g.cls||"")+(b?"":" radio")+(g.value===X?" on":""),f=function(){if(c.call(this.ctxt,g.value,X,g)===false){return false;}X=g.value;Z.forEach(function(j){j.cls=j.cls.replace(/ on$/,"")+(j.radioValue===X?" on":"");});return true;},e=a?this.addCustomMenuItem(i,h,f,a(g,d),V):this.addMenuItem(i,h,f,V);e.radioValue=g.value;Z.push(e);},this);},clear:function N(){this._super();this.menus=[];},newInstance:function A(V){return new mstrmojo.ui.menus.Menu(mstrmojo.hash.copy({popupConfig:this},V));}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.ui.editors.controls.ValidationTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,null,{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",errRevert:true,dtp:null,validationDelay:3000,orignText:null,trigger:mstrmojo.validation.TRIGGER.ONKEYUP,init:function(B){B=B||{};B.constraints=B.constraints||{};B.constraints.trigger=this.trigger;this._super(B);},prekeyup:function(B){if(B.e.keyCode===13){this.blur();return ;}this._super(B);},onfocus:function(){this.orignText=this.value;},onblur:function(){if(this.value!==this.orignText){this.validate();}},validate:function(){this._super();this.orignText=this.value;this.clearValDelayTimer();},preinput:mstrmojo.emptyFn,postinput:function(){var B=this.doValidation(this.value);if(B.code<=mstrmojo.validation.STATUSCODE.VALID){this.clearValidation();if(!this.errRevert){this.hideTooltip();}}},updateTooltipConfig:function(){this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onInvalid:function(){if(!this.errRevert){this.hideTooltip();this.showTooltip();}else{this.clearValidation();this.set("value",this.orignText);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.TreeNode","mstrmojo._IsExprNode","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.expr","mstrmojo._HasOwnAvatar");var F=mstrmojo.array,M=mstrmojo.expr,P=mstrmojo.dom,A=mstrmojo.css;function J(R,Q){var T=R.data,S=T&&T.nds;if(!S){return null;}if(Q){Q.sort(F.numSorter);}else{Q=R.sortSelectedIndices();}if(!Q.length){return null;}return{idxs:Q,nds:F.get(S,Q)};}function N(S){var R=S.ctxtBuilder,U=R&&R.itemWidgets,Q=U&&U[0],T=Q&&Q.data;if(T&&T.not&&(U.length>0)){delete T.not;Q.paint();}}mstrmojo.AndOrNode=mstrmojo.declare(mstrmojo.TreeNode,[mstrmojo._IsExprNode,mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.AndOrNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},itemsContainerPrefix:function(){return this.domNode.childNodes[1];},itemsContainerNode:function(){return this.domNode.childNodes[2].firstChild;},dropCueNode:function(){return this.domNode.childNodes[2].lastChild;},itemsContainerSuffix:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onitemCntChange:function(){A.toggleClass(this.itemsContainerNode,["multi"],this.itemCnt>2);},onprefixedAndOrEditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();},ondropCuePosChange:mstrmojo.TreeNode.prototype.markupMethods.ondropCuePosChange},multiSelect:true,itemIdField:null,init:function(Q){this._super(Q);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());var R=this.data;if(R){delete this.data;this._set_data(null,R);}},itemCnt:0,postBuildRendering:function(){var Q;this.set("itemCnt",this.items.length);if(this._super){Q=this._super();}N(this);return Q;},preadd:function L(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},preremove:function O(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},_set_data:function(T,Q){var R=this.data,S=(R!==Q);if(S){this.data=Q;if(Q&&!Q.nds){Q.nds=[];}this.set("items",Q&&Q.nds);}return S;},isDragValid:function K(){return true;},isSelectableArea:function(Q){return false;},getDragData:function(Q){var S=this._super(Q);if(S&&!S.html){var R=S.et&&M.ET2TGT[S.et];S.html=R?S[R]&&S[R].n||"":S.n||"";}return S;},remove:function I(R,S){var Q=this._super(R);if(Q>-1){var T=S||this.suppressConsolidation;if(!T){this.consolidate(false);}}return Q;},move:function(R,Q){this.suppressConsolidation=true;var S;if(this._super){S=this._super(R,Q);}this.suppressConsolidation=false;return S;},consolidate:function E(){var U=this.parent;if(!U||!U.remove){return ;}var S=this.items,R=S&&S.length;if(R<2){var T=R?S[0]:null,Q=this.childIndex();if(T){U.add([T],Q);}U.remove(this.data);}},indent:function G(S,Q){var R=J(this,S);if(!R){return ;}this.remove(R.idxs,true);var W=R.nds,V=Q&&Q.fn||this.data&&this.data.fn,U={et:M.ET.ANDOR,nds:W,fn:V};if(W.length===2&&W[0].not){if(W[1].not){delete W[0].not;delete W[1].not;U.not=true;U.fn=(V===M.FN.AND?M.FN.OR:M.FN.AND);}else{var T=W[0];W[0]=W[1];W[1]=T;}}this.add([U],R.idxs[0]);this.consolidate(false);},outdent:function C(R){var S=this.parent,Q=S&&S.data;if(!Q||Q.et!==M.ET.ANDOR){return ;}var T=J(this,R);if(!T){return ;}this.remove(T.idxs,true);if(this.data.not){T.nds[0].not=true;}S.add(T.nds,this.childIndex());this.consolidate(false);},edit:function D(Z,a,S){if(!Z){return ;}var Y=this.data,X=Y&&Y.fn,R=Z.data,f=R&&R.not;if(!R){R={};Z.data=R;}R.not=!!S;if(X!==a){var Q=Y.nds;if(Q&&Q.length>2){var e=Z.childIndex();if(e>0){this.indent([e-1,e],{fn:a});}}else{Y.fn=a;var V=this.ctxtBuilder,U=V&&V.itemWidgets;for(var T=0,W=(U&&U.length)||0;T<W;T++){var b=U[T];if(b){b.paint();}}}}else{Z.paint();}},preclick:function H(Q){var S=null,R=P.eventTarget(Q.hWin,Q.e);if(R===this.prefixNode){}else{if(P.contains(this.prefixNode,R,true)){S="andor";}}Q.part=S;},createAvatar:function B(S){var R=document.createElement("div"),T=P.findWidget(S),Q=T.getAvatarNode&&T.getAvatarNode();if(!Q){Q=T.condNode.cloneNode(true);Q.style.boxSizing="border-box";Q.style.width=T.condNode.offsetWidth+"px";}R.appendChild(Q);A.addClass(R,T.avatarCssCls||"mstrmojo-FE mstrmojo-ConditionNode");R.style.zIndex=20;return R;},_ndsToMove:J});})();(function(){mstrmojo.requiresCls("mstrmojo.AndOrNode");mstrmojo.threshold.AndOrNode=mstrmojo.declare(mstrmojo.AndOrNode,null,{scriptClass:"mstrmojo.threshold.AndOrNode",cssClass:"adv-threshold",avatarCssCls:"mstrmojo-thresholdRow",onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);},consolidate:function A(){if(this.parent!==this.tree||this.itemCnt===0){this._super();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetTree","mstrmojo.expr","mstrmojo.AndOrNode","mstrmojo.ConditionNode");var F=mstrmojo.expr,B=F.ET;function A(G){var I=G&&G.src,J=I&&I.data,H=J&&J.et;return(H in F.ETs);}mstrmojo.FilterExpr=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.FilterExpr",allowDrop:A,renderOnScroll:false,itemIdField:null,nodeClassMap:{14:mstrmojo.AndOrNode,"*":mstrmojo.ConditionNode},onBlankClick:function(G){this.clearTreeSelect();},onnodemousedown:function(H){var I=mstrmojo.dom.eventTarget(H.hWin,H.e),J=H.src,G=J.listMapper.findIndex(J,J.itemsContainerNode,I),K=G>=0?J.ctxtBuilder.itemWidgets[G]:null;if(!K||(K.isSelectableArea&&!K.isSelectableArea(I))){this.onBlankClick(H);}},getItemIdentityProp:function(G){return G.et;},itemFunction:function(L,I,M){var H=M.tree,J=H.getItemConfig(L,I,M),K=H.nodeClassMap,G=K[H.getItemIdentityProp(L)]||K["*"];return G&&(new G(J));},getItemConfig:function(J,G,K){var H=(J.et===B.ANDOR),I=K.tree||K;return{data:J,tree:I,parent:K,bindings:{prefixedAndOrEditable:"this.parent.editable"},itemFunction:(H)?K.itemFunction:null,draggable:H?I.draggable:false,dropZone:H?I.dropZone:false,allowDrop:H&&I.dropZone?I.allowDrop:null,allowCopy:H?I.allowCopy:false,editable:I.isEditable?I.isEditable(J):I.editable,makeObservable:H&&K.makeObservable,onclick:I.onnodeclick,onadd:I.onnodeadd,onremove:I.onnoderemove};},getDragData:function(G){var I=this._super(G);if(I&&!I.html){var H=I.et&&F.ET2TGT[I.et];I.html=H?I[H]&&I[H].n||"":I.n||"";}return I;},newCondition:function E(K){K=K||{et:B.AQ};var J=this.selectionParentNode,G;J=(J&&J.hasRendered)?J:this;if(J!==this){G=J.add([K]);}else{var I=this.addCondition([K],null,true);G=I.index;J=I.widget;}var H={widget:J,index:G,data:K};if(this.onNew){this.onNew(H);}return H;},addCondition:function D(I,K){var L=this.items,H=L&&L.length,N=I&&I.length;if(!N){return null;}var J,G;if(H&&L[0].et===B.ANDOR){J=this.ctxtBuilder.itemWidgets[0];G=J.add(I,null);}else{if(!H&&(N===1)){J=this;G=0;this.add(I,0);}else{if(H){var M=L[0];this.remove(M);I.unshift(M);}this.add([{et:B.ANDOR,fn:F.FN.AND,nds:I}],0);J=this.ctxtBuilder.itemWidgets[0];G=H?1:0;}}return{widget:J,index:G};},addSingleCondition:function C(H,G){var I=this.addCondition([H],G);return I.widget.ctxtBuilder.itemWidgets[I.index];},ondrop:function(J){if(this._super){this._super(J);}var H=this.items,G=H&&H.length,I=H.concat();if(G>1){if(H.remove){H.remove(0,H.length);}else{this.set("items",null);}this.add([{et:B.ANDOR,fn:F.FN.AND,nds:I}],0);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._HasLayout","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.expr","mstrmojo.css");var C=mstrmojo.expr.DTP,B=mstrmojo.css,A="mstrmojo-Stepper-ErrValidation";mstrmojo.ui.editors.controls.Stepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.Stepper",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,mouseup,mousemove,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text"></div><div class="prev">-</div></div>',layoutConfig:{w:{textNode:"100%"},xt:true},textInput:null,init:function E(F){var G=F.provider;this.children=[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"textInput",slot:"textNode",dtp:G.dtp||C.INTEGER,constraints:{validator:G.validator,max:G.max,min:G.min},onValid:function(){var H=this.parent;B.removeClass(H.domNode,A);G.setVal(parseInt(this.value,10)||0);H.updateDisplayText();}}];this._super(F);this.addDisposable(G);B.addWidgetCssClass(this,"mstrmojo-ui-ctrl-Stepper");},postBuildRendering:function(){this.updateDisplayText();this._super();},updateDisplayText:function D(){this.textInput.set("value",this.provider.getVal());}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.num","mstrmojo.expr","mstrmojo.range","mstrmojo.Widget","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo._HasSuggestion","mstrmojo.LegacySuggestionList","mstrmojo.condTx.ExpressionToken","mstrmojo.condTx._CanBuildExpressionTree");mstrmojo.condTx.SpanListMapper=mstrmojo.provide("mstrmojo.condTx.SpanListMapper",mstrmojo.mixin({itemWrapperPrefix:function(E){return'<span class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"&nbsp;",itemWrapperSuffix:"</span>",createWrapperNode:function O(E){var AC=E.ownerDocument,AD=AC.createElement("span");return AD;},_iw2idx:function Q(AC,AF,AE){var AD=this.wrapperNodes(AF),E=mstrmojo.array.indexOf(AD,AE);return E===-1?AD.length:E;},itemOffsetLeft:function Z(AC,AG,E,AE){if(!AE){var AD=this.wrapperNodes(AG);AE=AD&&AD[E];if(!AE){return 0;}}var AF=AG.firstChild;if(!AF||(AF===AE)){return 0;}return AE.offsetLeft-AF.offsetLeft;},whereDrop:function AB(AK,E,AE,AJ,AC){var AG=this._nd2iw(AK,E,AE),AL,AI,AF,AH,AD;if(AG){AI=this._iw2idx(AK,E,AG);AL=AI;AF=this.itemOffsetLeft(AK,E,null,AG);AH=AG.offsetTop;AD=AG.offsetWidth;if(AJ.x>AC.left+AF+AD/2){AL++;AF+=AD;}}else{return AK.dropCuePos;}return{left:AF,top:AH,idx:AL,idxActual:AI};}},mstrmojo.hash.copy(mstrmojo.WidgetListMapper)));var N=mstrmojo.dom,P=mstrmojo.css,I=mstrmojo.hash,H=mstrmojo.num,v=mstrmojo.Enum_Keys,F=mstrmojo.range,b=F.EDGE,p=mstrmojo.condTx.ExpressionToken.isDelimiter,M=mstrmojo.expr,f=mstrmojo.array,L=mstrmojo.condTx.CommonComponent,h=L.NODE_TYPE,u=L.ADV_OPERATION,W=200;function x(AC){var E=(N.isIE&&!N.isIE9)?AC.keyCode:AC.charCode;return(E>0)?String.fromCharCode(E):null;}function B(AD,AC){if(AD.isMstrObj){return true;}else{if(AD.isDelimiter){switch(AD.v){case"+":I.copy(u.PLUS,AD);break;case"-":I.copy((!AC||AC.fn)?u.UNARYMINUS:u.MINUS,AD);break;case"*":I.copy(u.MULTI,AD);break;case"/":I.copy(u.DIVIDE,AD);break;case"(":I.copy(u.LEFTPARENTHESIS,AD);break;case")":I.copy(u.RIGHTPARENTHESIS,AD);break;default:}return true;}}var E=f.find(this.suggestionCandidates,"dn",AD.v);if(E>=0){I.copy(this.suggestionCandidates[E],AD);return true;}else{var AE=H.isNumeric(AD.v);AD.isNumeric=AE;return AE;}}mstrmojo.condTx.ExpressionTokenInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._HasSuggestion,mstrmojo.condTx._CanBuildExpressionTree],{scriptClass:"mstrmojo.condTx.TokenInputBox",containerResizable:false,dropZone:true,itemField:"dn",allowDrop:function D(E){var AC=E.src.data;return !!AC;},ondrop:function(E){E.src.data={v:mstrmojo.condTx.ExpressionToken.brackets(E.src.data.item.n),oi:E.src.data.item,isNew:true};if(this.prepareDropItem){this.prepareDropItem(E);}this._super(E);},makeObservable:true,showDesc:true,showPath:true,markupString:'<div id={@id} class="mstrmojo-TokenInputBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-TokenInputBox-edit" contenteditable="true" tabindex="1" spellcheck="false"ondragstart = "return false;" oncontextmenu = "document.oncontextmenu =  mstrmojo.all.{@id}.fnContextMenu;" onkeydown = "return mstrmojo.all.{@id}.handlekeydown(event);" onkeypress = "return mstrmojo.all.{@id}.handlekeypress(event);" onkeyup = "return mstrmojo.all.{@id}.handlekeyup(event);" onmouseup = "return mstrmojo.all.{@id}.handlemouseup(event);" >{@itemsHtml}</div><textarea class = "mstrmojo-TokenInputBox-clipboard" onkeyup = "return mstrmojo.all.{@id}.handlepaste(event);"></textarea><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild;},clipboardNode:function(){return this.domNode.childNodes[1];},scrollboxNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},suggestionListClass:"mstrmojo.LegacySuggestionList",items:null,itemFunction:function G(AD,E,AC){return new mstrmojo.condTx.ExpressionToken({data:AD,parent:AC});},listMapper:mstrmojo.condTx.SpanListMapper,isDelimiter:p,postBuildRendering:function V(){if(this._super){this._super();}this._eros=false;if(N.isFF){document.body.spellCheck=false;}},fnContextMenu:function J(E){if(E){E.cancelBubble=true;E.returnValue=false;}return false;},handlekeydown:function S(AH){AH=AH||window.event;var AF=AH.keyCode||AH.charCode,AD=false,AI=F.getRangeInfo();if(AH.ctrlKey&&this.doubleByte){this.doubleByte=false;var AG=this.prev_rInfo,AC=AI,AJ=AC.startContainer.data.slice(AG.startOffset,AI.startOffset);this.widgetHandleImeInput(AG,AJ);return ;}switch(AF){case v.DELETE:if(!this.doubleByte){try{this.widgetHandleDelete(AI);this.startTokenSuggestion();this.raiseChangeEvent({type:"delete"});}catch(AE){}AD=true;}break;case v.BACKSPACE:if(!this.doubleByte){try{this.widgetHandleBackspace(AI);this.raiseChangeEvent({type:"backspace"});this.startTokenSuggestion();this.editNode.focus();}catch(E){}AD=true;}break;case v.ENTER:case v.TAB:this._startDebug=true;if(this.suggestionShown){this.handleSuggestionItemSelect(this.getSelected());}else{this.startTokenSuggestion();}AD=true;break;case v.ESCAPE:this.endTokenSuggestion();AD=true;break;case 86:if(AH.ctrlKey){this._saveRangeInfo=F.getRangeInfo();this.clipboardNode.focus();AD=false;}break;case 229:if(!this.doubleByte){this.doubleByte=true;this.prev_rInfo=AI;this.prev_items=this.items;}break;case v.LEFT_ARROW:case v.RIGHT_ARROW:case v.UP_ARROW:case v.DOWN_ARROW:N.stopPropogation(window,AH);break;default:}if(AD){N.stopPropogation(window,AH);N.preventDefault(window,AH);return false;}return true;},handlekeypress:function A(AG){AG=AG||window.event;var AH=x(AG),E=AG.keyCode||AG.charCode,AD=false,AE;if(AH&&!(AH==="c"&&AG.ctrlKey)){try{this.widgetHandleInput(F.getRangeInfo(),AH);this.raiseChangeEvent({type:"input",characeter:AH});if(!this.isDelimiter(AH)){if(this.useKeyDelay){var AF=this;window.clearTimeout(this.tmr);this.tmr=window.setTimeout(function(){AF.startTokenSuggestion();},W);}else{this.startTokenSuggestion();}}else{this.endTokenSuggestion();}}catch(AC){}AD=true;}if(AD){N.stopPropogation(window,AG);N.preventDefault(window,AG);return false;}return true;},handlekeyup:function X(AD){var E=AD.keyCode||AD.charCode,AC;if(E===v.LEFT_ARROW||E===v.RIGHT_ARROW){AC=this.findObjectToken();if(AC&&AC===this._saveActiveToken){this.startTokenSuggestion(AC);}else{this.endTokenSuggestion();}}else{if(E===v.UP_ARROW){this.preHighlight();}else{if(E===v.DOWN_ARROW){this.nextHighlight();}}}this._saveRangeInfo=F.getRangeInfo();},handlemouseup:function e(AH){var AD=this.findObjectToken();if(AD&&AD===this._saveActiveToken){this.startTokenSuggestion(AD);}else{this.endTokenSuggestion();}var AF=F.getRangeInfo();if(this.doubleByte){var AG=this.prev_rInfo,AE=this._saveRangeInfo,AC=AE.startContainer.data.slice(AG.startOffset,AE.startOffset);if(AC!==""){var E=this.widgetHandleImeInput(AG,AC);this.prev_items=this.items;AD=N.findWidget(AF.startContainer);if(AD){this._delaySetTextCaretPos(AD.domNode,AF.startOffset);}else{this._delaySetTextCaretPos(E.domNode,AF.startOffset-1);}}this.prev_rInfo=AF;}this._saveRangeInfo=AF;},handlepaste:function c(AG){var AC=this.clipboardNode.value;this.clipboardNode.value="";var AF=[],E=AC&&AC.length,AE,AD="",AH;if(E>0){for(AE=0;AE<E;AE++){AH=AC.charAt(AE);if(this.isDelimiter(AH)){if(!mstrmojo.string.isEmpty(AD)){AF.push({v:AD,isNew:true});AD="";}AF.push({v:AH,isDelimiter:true,isNew:true});}else{AD=AD+AH;}}if(!mstrmojo.string.isEmpty(AD)){AF.push({v:AD,isNew:true});AD="";}this.insertTokens(AF);}},raiseChangeEvent:function(E){E.name="tokensModify";this.raiseEvent(E);},getTokensAsString:function AA(){var AC=[],AE=this.items,AD,E;for(AD=0,E=AE.length;AD<E;AD++){AC[AD]=AE[AD].v;}return AC.join("| ");},replaceErrorToken:function g(AD){var AC=this.items,AE=mstrmojo.array.find(AC,"sta",-1),E={v:AD.n,oi:AD,isNew:true};if(AE>-1){this.remove(AE);this.add([E],AE);}},widgetHandleDelete:function Y(AF){if(AF.collapsed){var AE,AD,E,AG=AF.startOffset,AC=this.ctxtBuilder.itemWidgets;if(!N.contains(this.editNode,AF.startContainer,false,document.body)){F.collapseOnNode(this.editNode,false);return ;}AE=F.getEdgeInfo(AF.startContainer,AF.startOffset);AD=N.findWidget(AF.startContainer);E=this.itemIndex(AD.data);if(AE===b.EDGE_END){E++;AD=AC[E];AG=0;}if(!AD){F.collapseOnNode(this.editNode,false);return ;}if(AD.length()===1){this.remove(E);AD=AC[E];if(AD){F.collapseOnNode(AD.domNode,true);}else{F.collapseOnNode(this.editNode,false);}this.checkMergeTwoTokens(E-1,E);}else{AD.spliceContent(AG,1);F.collapseOnTextNode(AD.domNode,AG);}}else{this.widgetDeleteTokens(AF);}},widgetHandleBackspace:function n(AF){if(AF.collapsed){var AE,AD,E,AG=AF.startOffset,AC=this.ctxtBuilder.itemWidgets;if(!N.contains(this.editNode,AF.startContainer,false,document.body)){if(AF.startOffset>0&&N.isFF){AD=AC[this.items.length-1];F.collapseOnNode(AD.domNode,false);AF=F.getRangeInfo();AE=F.getEdgeInfo(AF.startContainer,AF.startOffset);}else{F.collapseOnNode(this.editNode,true);return ;}}AE=F.getEdgeInfo(AF.startContainer,AF.startOffset);AD=N.findWidget(AF.startContainer);E=this.itemIndex(AD.data);if(AE===b.EDGE_BEGIN){E--;AD=AC[E];AG=AD.length();}if(!AD){F.collapseOnNode(this.editNode,true);return ;}if(AD.length()===1){this.remove(E);AD=AC[E-1];if(AD){F.collapseOnNode(AD.domNode,false);this.checkMergeTwoTokens(E-1,E);AD=AC[E-1];}else{F.collapseOnNode(this.editNode,true);}}else{AD.spliceContent(AG-1,1);F.collapseOnTextNode(AD.domNode,AG-1);this.checkMergeTwoTokens(E,E+1);this.checkMergeTwoTokens(E-1,E);}}else{this.widgetDeleteTokens(AF);}},widgetHandleInput:function q(AG,AH){if(!AG.collapsed){this.widgetDeleteTokens(AG);AG=F.getRangeInfo();}var AD,AI,AJ,AK,E,AC,AE=this.ctxtBuilder.itemWidgets;if(!N.contains(this.editNode,AG.startContainer,false,document.body)){this.add([{v:AH,isDelimiter:this.isDelimiter(AH),isNew:true}],0);AI=AE[0];F.collapseOnTextNode(AI.domNode,1);return ;}AD=F.getEdgeInfo(AG.startContainer,AG.startOffset);AI=N.findWidget(AG.startContainer);AJ=this.itemIndex(AI.data);if(this.isDelimiter(AH)){AK={v:AH,isDelimiter:true,isNew:true};if(AD===b.EDGE_MIDDLE){var AF=AI.split2Tokens(AG.startOffset);this.remove(AJ);this.add([AF[0],AK,AF[1]],AJ);AJ=AJ+1;}else{AJ=(AD===b.EDGE_BEGIN)?AJ:AJ+1;this.add([AK],AJ);}AI=AE[AJ];F.collapseOnNode(AI.domNode,false);}else{AC=AG.startOffset;if(AI.isDelimiter()){E=AE[(AD===b.EDGE_BEGIN)?AJ-1:AJ+1];if(E&&!E.isDelimiter()){AI=E;AC=(AD===b.EDGE_BEGIN)?AI.length():0;}}if(!AI.isDelimiter()){AI.spliceContent(AC,0,AH);F.collapseOnTextNode(AI.domNode,AC+1);}else{this.add([{v:AH,isNew:true}],(AD===b.EDGE_BEGIN)?AJ:AJ+1);AI=AE[(AD===b.EDGE_BEGIN)?AJ:AJ+1];F.collapseOnNode(AI.domNode,false);}}},widgetHandleImeInput:function q(AF,AG){if(!AF.collapsed){this.widgetDeleteTokens(AF);AF=F.getRangeInfo();}var AD,AH,AI,AJ,E,AC,AE=this.ctxtBuilder.itemWidgets;if(!N.contains(this.editNode,AF.startContainer,false,document.body)){this.clearTokens();this.add([{v:AG,isDelimiter:this.isDelimiter(AG),isNew:true}],0);AE=this.ctxtBuilder.itemWidgets;AH=AE[0];F.collapseOnTextNode(AH.domNode,1);this._delaySetCaretPos(AH.domNode,false);return ;}AD=F.getEdgeInfo(AF.startContainer,AF.startOffset);AH=N.findWidget(AF.startContainer);AI=this.itemIndex(AH.data);AC=AF.startOffset;if(AH.isDelimiter()){this.clearTokens();this.set("items",this.prev_items);AE=this.ctxtBuilder.itemWidgets;E=AE[(AD===b.EDGE_BEGIN)?AI-1:AI+1];if(E&&!E.isDelimiter()){AH=E;AC=(AD===b.EDGE_BEGIN)?AH.length():0;}}if(!AH.isDelimiter()){AH.spliceContent(AC,0,AG);this._delaySetTextCaretPos(AH.domNode,AC+AG.length);}else{this.add([{v:AG,isNew:true}],(AD===b.EDGE_BEGIN)?AI:AI+1);AH=AE[(AD===b.EDGE_BEGIN)?AI:AI+1];this._delaySetCaretPos(AH.domNode,false);}this.startTokenSuggestion();return AH;},findObjectToken:function C(){var AF=F.getRangeInfo(),AD=N.findWidget(AF.startContainer);if(!N.contains(this.editNode,AF.startContainer,false,document.body)){return null;}if(!AD||AD===this||!AD.isDelimiter){return null;}if(AD&&!AD.isDelimiter()){return AD;}var AE=F.getEdgeInfo(AF.startContainer,AF.startOffset),AC=this.ctxtBuilder.itemWidgets,E=this.itemIndex(AD.data);AD=AC[(AE===b.EDGE_BEGIN)?E-1:E+1];if(AD&&!AD.isDelimiter()){return AD;}return null;},checkMergeTwoTokens:function k(AF,AD){var AE=this.ctxtBuilder.itemWidgets,AC=AE[AF],E=AE[AD];if((AC&&!AC.isDelimiter()&&!AC.isMstrObj())&&(E&&!E.isDelimiter()&&!E.isMstrObj())){this.remove([AF,AD]);this.add([AC.mergeTo(E)],AF);F.collapseOnTextNode(AE[AF].domNode,AC.length());}},insertTokens:function s(AH){var AG=this._saveRangeInfo||F.getRangeInfo(),AC,E;if(!AG||!N.contains(this.editNode,AG.startContainer,false,document.body)){this.add(AH);this.raiseChangeEvent({type:"insert"});E=this.items.length-1;AC=this.ctxtBuilder.itemWidgets[E];this._delaySetCaretPos(AC.domNode,false);return E;}var AF=F.getEdgeInfo(AG.startContainer,AG.startOffset);AC=N.findWidget(AG.startContainer);E=this.itemIndex(AC.data);if(AF===b.EDGE_MIDDLE){var AE=AC.split2Tokens(AG.startOffset);this.remove(E);AH.unshift(AE[0]);AH.push(AE[1]);this.add(AH,E);}else{E=(AF===b.EDGE_BEGIN?E:E+1);this.add(AH,E);}E=E+AH.length-1;AC=this.ctxtBuilder.itemWidgets[E];this._delaySetCaretPos(AC.domNode,false);this.raiseChangeEvent({type:"insert"});var AD=this;window.setTimeout(function(){AD._saveRangeInfo=F.getRangeInfo();},50);return E;},clearTokens:function j(E){this.set("items",E||[]);this._saveRangeInfo=null;this._delaySetCaretPos(this.editNode,false);},focus:function r(){var AC=this.ctxtBuilder.itemWidgets,E=AC.length;this._delaySetCaretPos(E>0?AC[E-1].domNode:this.editNode,false);},startTokenSuggestion:function w(E){this.endTokenSuggestion();if(!E){E=this.findObjectToken();}if(E&&!E.isDelimiter()){E.set("active",true);this._saveActiveToken=E;this.showSuggestion(this.getSearchPattern());}if(!E||this.getSearchPattern().length===0){this.hideSuggestion();}},browseItemVisible:false,folderLinksContextId:25,browsableTypes:[M.TP.FOLDER,M.TP.FACT,M.TP.ATTR,M.TP.FUNCTION,M.TP.FILTER,M.STP.PROMPT_OBJECTS,M.TP.ATTR,M.TP.DIM,M.TP.METRIC,M.TP.ROLE].join(","),getSearchPattern:function R(){var AC=this._saveActiveToken,AE=AC&&AC.data.v,E=AE&&AE.length;if(E>2){if(AE.charAt(0)==="["){AE=AE.substring(1);}if(AE.charAt(AE.length-1)==="]"){AE=AE.substring(0,AE.length-1);}}if(AC&&AC.data.ift){var AD=AC.data.v,AF=AD&&AD.indexOf("@");if(AF>=0){AE=AD.substring(AF);}}return AE||"";},getSuggestionPos:function a(){var E=this._saveActiveToken,AC=null,AD;if(E){AD=mstrmojo.dom.position(E.domNode,true);AC={left:Math.round(AD.x)+"px",top:Math.round(AD.y+AD.h)+"px",zIndex:100};}return AC;},item2textCss:function K(E){return(this._super&&this._super(E))||{4:"m",11:"fx",12:"a",13:"fc",43:"tr",21:"afm","-99":"br"}[E.t]||"";},onBrowserOpen:function l(){this.editNode.blur();},onSuggestionItemSelect:function t(AC){var E=this._saveActiveToken;this.endTokenSuggestion();if(E){E.setToken(AC);this._delaySetCaretPos(E.domNode,false);}this.closePopup();},_delaySetCaretPos:function y(E,AD){var AC=this.editNode,AE=function(){AC.focus();AC.focus();F.collapseOnNode(E,AD);};window.setTimeout(AE,0);},_delaySetTextCaretPos:function y(E,AF){var AC=this.editNode,AD=this,AE=function(){AC.focus();AC.focus();F.collapseOnTextNode(E,AF);AD._saveRangeInfo=F.getRangeInfo();};window.setTimeout(AE,0);},getCandidatesThroughTaskCall:function U(AC,E){E.success({items:this.suggestionCandidates});},filterCandidates:function i(AG,AF,E){var AD=this._saveActiveToken,AE,AC={};if(AD&&AD.data.ift&&AD.data.oi){E=E||this.suggestCount;AF=mstrmojo.string.regEscape(AF);AE=f.filter(AG,function(AH){return AH.t==21&&AH.attid==AD.data.oi.did&&(new RegExp("^"+AF,"i")).test("@"+AH.n);},{max:E});}else{AE=f.filter(AG,function(AH){return AH.t!=21;});AE=this._super(AE,AF,E);}return AE;},endTokenSuggestion:function z(){var E=this._saveActiveToken;if(E){E.set("active",false);this._saveActiveToken=null;}},validate:function T(){var AD=this.items,AE,E,AC,AH,AG,AF=false;widgets=this.ctxtBuilder.itemWidgets;for(AE=0,E=AD.length;AE<E;AE++){AC=widgets[AE];AH=AG;AG=AD[AE];if(!B.call(this,AG,AH)){AG.sta=-1;AC.set("data",AG);AF=true;}}return !AF;},widgetDeleteTokens:function d(AK){var AC=AK.startOffset,E=AK.endOffset,AN=N.findWidget(AK.startContainer),AL=N.findWidget(AK.endContainer),AG=this.itemIndex(AN.data),AE=this.itemIndex(AL.data),AH=[],AI=F.getEdgeInfo(AK.startContainer,AC),AM=F.getEdgeInfo(AK.endContainer,E),AJ=(AI===b.EDGE_BEGIN?AG:AG+1),AD=(AM===b.EDGE_END?AE:AE-1),AF;if(AN===AL){if((AI===b.EDGE_BEGIN)&&(AM===b.EDGE_END)){this.remove(AG);AL=this.ctxtBuilder.itemWidgets[AG-1];if(AL){F.collapseOnNode(AL.domNode,false);}else{F.collapseOnNode(this.editNode,true);}}else{AN.spliceContent(AC,E-AC);F.collapseOnTextNode(AL.domNode,AC);}}else{for(AF=AJ;AF<=AD;AF++){AH.push(AF);}this.remove(AH);if(AI===b.EDGE_MIDDLE){AN.spliceContent(AC);}if(AM===b.EDGE_MIDDLE){AL.spliceContent(0,E);}if(AI===b.EDGE_BEGIN){AN=this.ctxtBuilder.itemWidgets[AG-1];}if(AN){F.collapseOnNode(AN.domNode,false);}else{F.collapseOnNode(this.editNode,false);}AG=(AI===b.EDGE_BEGIN)?AG-1:AG;this.checkMergeTwoTokens(AG,AG+1);}this.editNode.focus();},buildExpressionTree:function o(){if(this.validate()){return this._super();}else{throw"Invalid Token";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.HBox","mstrmojo.VBox","mstrmojo.Label","mstrmojo.SearchWidget","mstrmojo.List","mstrmojo.hash","mstrmojo.array","mstrmojo.ui._HasScroller","mstrmojo.condTx.CommonComponent","mstrmojo.condTx.ExpressionToken","mstrmojo.condTx.ExpressionTokenInputBox");mstrmojo.requiresDescs(513,1763,4449,6769);var C=mstrmojo.hash,J=mstrmojo.array,I=mstrmojo.condTx.CommonComponent,F=I.ADV_OPERATION,H=I.FN_OPTNAMES,E=I.ACTION_TYPE,L=I.NODE_TYPE,B=mstrmojo.condTx.ExpressionToken,G=mstrmojo.dom;mstrmojo.condTx.ObjectList=mstrmojo.declare(mstrmojo.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.condTx.ObjectList",setupScrollNodes:function D(){this.scrollNode=this.itemsContainerNode;}});function K(){var M=this.parent.parent.parent,N=M.parent.parent;N.closeAdvEditor();}function A(M,N){J.forEach(M,function(O){if(O.did){O.isMstrObj=true;var P=J.filterOne(N,function(Q){return Q.did===O.did;});C.copy(P,O);O.v=O.v||("("+(O.dn||O.n)+")");}else{if(O.fn){C.copy(F[H[O.fn]],O);O.isDelimiter=true;}else{if(O.nk&&O.fk){O.isMstrObj=true;O.v=O.v||O.n;}}}});return M;}mstrmojo.condTx.AdvancedExpression=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.condTx.AdvancedExpression",cssClass:"AdvancedExpression",alias:"AdvExp",model:null,host:null,_set_model:function(N,M){if(M){this.model=C.make(M,mstrmojo.Obj);}return true;},children:[{scriptClass:"mstrmojo.VBox",cssClass:"left",alias:"objBox",children:[{scriptClass:"mstrmojo.Label",cssClass:"AdvancedExpression-label",text:mstrmojo.desc(513,"Available")},{scriptClass:"mstrmojo.condTx.ObjectList",alias:"objList",itemIdField:"dssid",itemField:"n",itemDisplayField:"dn",titleDisplayField:"tn",bindings:{items:"this.parent.parent.model.items"},cssClass:"AdvancedExpression-ObjList",renderOnScroll:false,itemMarkupFunction:function(O,M,N){return'<div class="mstrmojo-suggest-text '+(O.cls||"fn")+'" idx="'+M+'"'+(O.did<0?'did="'+O.did+'"':"")+' title="'+(O[N.titleDisplayField]||"")+'">'+((N.itemDisplayField&&O[N.itemDisplayField])||O[N.itemField])+"</div>";},ondblclick:function(O){var N=O.hWin,R=O.e,P=mstrmojo.dom.eventTarget(N,R),M=P.getAttribute("idx")||-1,S=this.parent.parent.ExprBox.textBox;this.set("selectedIndex",M);var Q=this.selectedItem;S.insertTokens(B.convertTokens(C.copy(Q,{v:Q.n,isMstrObj:true,isDelimiter:false})));}}]},{scriptClass:"mstrmojo.VBox",cssClass:"right",alias:"ExprBox",children:[{scriptClass:"mstrmojo.Label",cssClass:"AdvancedExpression-Label",text:mstrmojo.desc(4449,"Expression")},{scriptClass:"mstrmojo.List",cssClass:"AdvancedExpression-ops",items:[C.copy(F.PLUS,{t:1,cls:"plus",isDelimiter:true}),C.copy(F.MINUS,{t:1,cls:"minus",isDelimiter:true}),C.copy(F.MULTI,{t:1,cls:"multi",isDelimiter:true}),C.copy(F.DIVIDE,{t:1,cls:"divide",isDelimiter:true}),{t:3,v:"V",cls:"clear right",n:mstrmojo.desc(1763,"Clear all")}],itemMarkupFunction:function(N,M){if(N.t===1){return'<div class="mstrmojo-item '+N.cls+'" idx='+M+' title="'+(N.n||"")+'">'+(N.n||"")+"</div>";}return'<div class="mstrmojo-Button mstrmojo-WebButton bare-button '+N.cls+"\"  onmousedown=\"this.className+=' hot'\" onmouseup=\"this.className=this.className.replace(' hot','')\" onmouseout=\"this.className+=' bare-button'\" onmouseover=\"this.className=this.className.replace(' bare-button','')\"><div class=\"mstrmojo-Button-text\" idx="+M+">"+(N.n||"")+"</div></div>";},onmouseup:function(U){var O=U.hWin,P=U.e,M=mstrmojo.dom.eventTarget(O,P),T=M.getAttribute("idx")||-1,R=this.parent,S=R.textBox;this.set("selectedIndex",T);if(T>-1){var N=this.selectedItem,Q=[];if(G.getButton(O,P)===1){switch(N.t){case 1:Q.push(C.clone(N));var V=S.insertTokens(Q);break;case 3:S.clearTokens([]);S.raiseChangeEvent({type:"clear"});break;}}}}},{scriptClass:"mstrmojo.condTx.ExpressionTokenInputBox",alias:"textBox",cssClass:"AdvancedExpression-textBox",bindings:{suggestionCandidates:"this.parent.parent.model.items",items:function(){var N=this.parent.parent.model.expr,M=this.serializeExpressionTree(N);return A(M,this.parent.parent.model.items);},isVectorCase:function(){var M=this.parent.parent.host;return M.actionType===E.DISABLE&&M.target.nodeType===L.TEMPLATE_UNIT_CONTROL;}}},{scriptClass:"mstrmojo.HBox",alias:"buttonBox",cssClass:"AdvancedExpression-buttonBox",children:[{scriptClass:"mstrmojo.Button",alias:"okBtn",cssClass:"okBtn",onclick:function(){var S=this.parent.parent.parent,R=S.ExprBox.textBox,P=S.host,Q=P.model,N=S.model,M;try{M=R.buildExpressionTree();Q.edit(N.prop,M);R.clearTokens([]);K.call(this);}catch(O){mstrmojo.alert(O);}}},{scriptClass:"mstrmojo.Button",alias:"cancelBtn",cssClass:"cancelBtn",onclick:function(){var N=this.parent.parent.parent,M=N.ExprBox.textBox;M.clearTokens([]);K.call(this);}}]}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.fx","mstrmojo.locales","mstrmojo.expr","mstrmojo.Button","mstrmojo.date","mstrmojo.ui.editors.controls.Stepper","mstrmojo.css");var AB=function(){return mstrmojo.locales.datetime;},i=mstrmojo.dom,h=mstrmojo.expr,y=h.DTP,Z=mstrmojo.date,J=mstrmojo.publisher,e=mstrmojo.hash,k=mstrmojo.array,N=k.removeIndices,j=mstrmojo.css;var AA=0,C=3,M=4,o=5,Q=6;var AC="month",c="day",V="year",X="hour",AF="minute",v="second";var G='<table border="0" cellpadding="0" cellspacing="0">',u="</table>";function O(AG){return'<table border="0" cellpadding="0" cellspacing="0" style="'+AG+'">';}function H(AJ,AG,AH){var AI=Z.getFirstDateOfMonth(AJ,AG);return(AI.getDay()-AH+8)%7;}function l(AJ){var AI=Z.parseDateAndOrTime(AJ),AK,AG,AH;if(AI){AH={};AK=AI.date;AG=AI.time;if(AK){e.copy(AK,AH);}if(AG){e.copy(AG,AH);}}return AH;}function F(AH,AK,AJ,AI,AG){var AL=Z.formatDateInfo({day:AH,month:AK,year:AJ},AB().DATEOUTPUTFORMAT);return Z.inDateTimeRange(AL,AI,AG)===0;}function T(AK,AJ,AI){var AH=AK.decreaseButton,AG=AK.increaseButton,AL="mstrmojo-Calendar";AH.className=(AL+"-decrease");AG.className=(AL+"-increase");}function W(AK,AH,AM,AJ){var AI=0,AG=AK.length,AL;for(AI=0;AI<AG;AI++){AL=AK[AI];if(AL&&AL.day===AH&&AL.month===AM&&AL.year===AJ){return AI;}}return -1;}function p(AG,AI,AH){var AJ=new Date();return(AJ.getFullYear()===AH)&&((AJ.getMonth()+1)===AI)&&(AJ.getDate()===AG);}function t(AN,AO){var AS=AN.dayView.getElementsByTagName("div"),AQ=AN.selectedDates,AI=AQ[AO],AR=AN.browseYear,AH=AN.browseMonth,AK=Z.getDaysOfMonth(AR,AH),AJ=Z.getPreMonth(AR,AH),AM=Z.getDaysOfMonth(AJ.y,AJ.m),AG=H(AR,AH,AN.firstDayOfWeek),AL=((AI.month===AH)?AI.day+AG-1:(AI.month>AH?AI.day+AG+AK-1:AG-AM+AI.day-1)),AP=AS[AL];if(AP){b(AP,AN,false);}N(AQ,AO,1);}function B(AG){var AH=AG.selectedDates;while(AH.length){t(AG,0);}}function AE(AI,AG){var AH=K(AI,AG),AJ=AI.selectedDates;AJ.push({day:AH.d,month:AH.m,year:AH.y});b(AG,AI,true);}function n(AI,AJ){if(!AJ||!AJ.length){return null;}var AL=AI.selectedDates;for(var AH=0,AG=AJ.length;AH<AG;AH++){var AK=AJ[AH],AM=q(AI,AK);AL.push({day:AK.d,month:AK.m,year:AK.y});if(AM){b(AM,AI,true);}}}function q(AO,AQ){var AS=AO.dayView.getElementsByTagName("div"),AJ=AS.length,AR=AO.browseYear,AH=AO.browseMonth,AK=Z.getPreMonth(AR,AH),AL=Z.getDaysOfMonth(AK.y,AK.m),AW=Z.getNextMonth(AR,AH),AI=Z.getDaysOfMonth(AR,AH),AG=H(AR,AH,AO.firstDayOfWeek);var AM=AG>0?{y:AK.y,m:AK.m,d:AS[0].innerHTML}:{y:AR,m:AH,d:AS[0].innerHTML},AU=(AS.length-AI-AG)>0?{y:AW.y,m:AW.m,d:AS[AJ-1].innerHTML}:{y:AR,m:AH,d:AS[AJ-1].innerHTML},AV=S(AM,AQ),AN=S(AQ,AU),AP=null;if(AV>=0&&AN>=0){var AT=0;if(AV<AG){AT=-1;}if(AN<(AS.length-AG-AI)){AT=1;}AP=((AT===0)?AQ.d+AG-1:(AT===1?AQ.d+AG+AI-1:AG-AL+AQ.d-1));return AS[AP];}else{return null;}}function f(AO,AG){var AQ=AO.selectedDates,AI=AQ.length;if(!AI){return null;}var AH=AQ[AI-1],AJ=K(AO,AG),AT=S({y:AH.year,m:AH.month,d:AH.day},AJ),AU=[],AL=AT>0,AR=Math.abs(AT);for(var AN=0;AN<=AR;AN++){var AM=new Date(AJ.y,AJ.m-1,AJ.d);AM.setDate(AM.getDate()+(AL?-AN:AN));var AS=AM.getFullYear(),AK=AM.getMonth()+1,AP=AM.getDate();if(AO.isDateDisabled(AP,AK,AS,AO.min,AO.max)&&!AO.canSelectDisabledDate){continue;}AU.push({y:AS,m:AK,d:AP});}return AU;}function S(AJ,AI){var AG=new Date(AJ.y,AJ.m-1,AJ.d),AH=new Date(AI.y,AI.m-1,AI.d);return(AH-AG)/1000/3600/24;}function K(AI,AG){var AJ=AI.browseYear,AL=AI.browseMonth,AK=parseInt(AG.innerHTML,10),AM=parseInt(AG.getAttribute("m"),10),AH=null;AH=(AM===0)?{y:AJ,m:AL}:(AM===1?Z.getNextMonth(AJ,AL):Z.getPreMonth(AJ,AL));AH.d=AK;return AH;}function g(AG){var AI=AG.selectedDates,AH=AI.length;return(AH===0)?null:AI[AH-1];}function b(AH,AI,AG){var AJ=AI.selectedColor;j.toggleClass(AH,["selected",AI.selectedCssStyle],AG);AH.parentNode.style.backgroundColor=AG?AJ:"";AH.style.backgroundColor=AG?AJ:"";}function x(AG){return AG.selectedColor?('style="background-color:'+AG.selectedColor+';"'):"";}function P(AG){return(AG.tagName.toLowerCase()==="td")?AG.firstChild:AG;}function R(AH,AI){var AJ=Z.getDateJson(AH),AG=Z.formatDateInfo(AJ,mstrmojo.locales.datetime.DATEOUTPUTFORMAT);if(AI===y.TIMESTAMP){AG+=" "+Z.formatTimeInfo(this.timeVal,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return AG;}function r(AL,AI){var AG=this.advancedValues,AH=null;AG.set(AL,AI);switch(AG.baseDate){case C:AH=new Date();break;case M:break;case o:break;case Q:break;default:return ;}var AJ=AG.monthsToAdjust;if(AJ>0){AH.setMonth(AH.getMonth()+(AG.toAddMonths?AJ:-AJ));}var AK=AG.daysToAdjust;if(AK>0){AH.setDate(AH.getDate()+(AG.toAddDays?AK:-AK));}this.set("value",R.call(this,AH,this.dtp));}function U(){var AG=this.advancedValues,AH=["isDyn"];if(AG.baseDate===AA){return null;}AH.push(AG.baseDate);AH.push(AG.toAddDays?AG.daysToAdjust:-AG.daysToAdjust);AH.push(AG.toAddMonths?AG.monthsToAdjust:-AG.monthsToAdjust);AH.push(0);AH.push(0);AH.push(0);AH.push(0);AH.push(this.value);AH.push(this.timeVal.hour);AH.push(this.timeVal.min);AH.push(this.timeVal.sec);return AH.join("::");}function AD(AG){if(AG.value!==undefined&&this.hasRendered){this.updateSelectedDate();}}function I(AI,AH){var AJ=this,AG=function(AK){return AK[0].toUpperCase()+AK.substring(1);};return{scriptClass:"mstrmojo.HBox",cssClass:"dateAdjustBox",alias:AI+"AdjustBox",children:[{scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:AH>=0?0:1,onitemSelected:function(AL,AK){r.call(AJ,"toAdd"+AG(AI),AK===0);},items:[{did:0,n:mstrmojo.desc(9424,"plus")},{did:1,n:mstrmojo.desc(9425,"minus")}]},{scriptClass:"mstrmojo.ui.editors.controls.Stepper",width:null,height:null,provider:new mstrmojo.NumStepperContentProvider({item:{interval:1,min:0,value:Math.abs(AH)},onTraverse:function(){r.call(AJ,AI+"ToAdjust",this.curVal);}})},{scriptClass:"mstrmojo.Label",text:AI==="days"?mstrmojo.desc(707,"Days"):mstrmojo.desc(710,"Months")}]};}function Y(){this.buttonsNode.style.display=(this.wasAdvanced||this.changeValueOnOK||(this.showAdvanced&&this.isAdvanced)?"block":"none");this.advancedNode.style.display=this.showAdvanced?"block":"none";}mstrmojo.Calendar=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Calendar",cssPrefix:"",browseMonth:null,browseYear:null,yearRangStart:null,selectedDates:null,selectedColor:"",isMultiSelect:false,hilightToday:false,yearViewSize:5,cssTextDay:"",cssTextMonth:"",cssTextYear:"",cssTextWeekDay:"",cssTextHeader:"",cssTextMonthYearLabel:"",forceNonEmptySelection:false,showCurMonthDatesOnly:false,currentView:c,duration:600,timeDelimiter:":",dtp:y.DATE,value:"",firstDayOfWeek:1,changeValueOnOK:false,wasAdvanced:false,showAdvanced:false,isAdvanced:false,dynDateValue:null,canSelectDisabledDate:false,monthNames:function(AG){return AB().MONTHNAME_SHORT[AG];},dayNames:function(AG){return AB().dayShortNames[AG];},min:null,max:null,supportedViews:{day:true,month:true,year:true,hour:true,minute:true,second:true},sDirMatrix:{day:{month:"down",year:"down",hour:"up",minute:"up",second:"up"},month:{day:"up",year:"left",hour:"up",minute:"up",second:"up"},year:{day:"up",month:"right",hour:"up",minute:"up",second:"up"},hour:{day:"down",month:"down",year:"down",minute:"left",second:"left"},minute:{day:"down",month:"down",year:"down",hour:"right",second:"left"},second:{day:"down",month:"down",year:"down",hour:"right",minute:"right"}},markupString:'<div id="{@id}" class="{@cssPrefix} mstrmojo-Calendar {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup,mouseover,mouseout><div class="mstrmojo-Calendar-header" style="{@cssTextHeader}"><div class="mstrmojo-Calendar-decrease"></div><div class="mstrmojo-Calendar-increase"></div><div class="mstrmojo-Calendar-title"><span class="mstrmojo-Calendar-monthLabel" style="{@cssTextMonthYearLabel}">{@browseMonth}</span><span class="mstrmojo-Calendar-yearLabel" style="{@cssTextMonthYearLabel}">{@browseYear}</span></div></div><div class="mstrmojo-Calendar-body" style="{@cssTextBody}"><div class="mstrmojo-Calendar-dayView"></div></div><div class="mstrmojo-Calendar-timePart"><span class="mstrmojo-Calendar-hourLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-minuteLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-secondLabel">00</span><span class="mstrmojo-Calendar-AMPMLabel">AM</span></div><div class="mstrmojo-Calendar-advanced"></div><div class="mstrmojo-Calendar-buttons cf"></div></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onbrowseMonthChange:function(){this.monthLabel.innerHTML=this.monthNames(this.browseMonth-1);},onbrowseYearChange:function(){this.yearLabel.innerHTML=this.browseYear;},ondtpChange:function(){this.timePart.style.display=(this.dtp===y.TIMESTAMP||this.dtp===y.TIME)?"block":"none";this.advancedNode.style.display=this.showAdvanced?"block":"none";},onvalueChange:function(){if(this.lastValue===undefined||this.value!==this.lastValue){this.updateSelectedDate();}},onchangeValueOnOKChange:Y,onisAdvancedChange:Y},markupSlots:{monthLabel:function(){return this.domNode.firstChild.lastChild.firstChild;},yearLabel:function(){return this.domNode.firstChild.lastChild.lastChild;},decreaseButton:function(){return this.domNode.firstChild.firstChild;},increaseButton:function(){return this.domNode.firstChild.childNodes[1];},bodyContainer:function(){return this.domNode.childNodes[1];},dayView:function(){return this.domNode.childNodes[1].firstChild;},monthView:function(){return this.domNode.childNodes[1].firstChild;},yearView:function(){return this.domNode.childNodes[1].firstChild;},hourView:function(){return this.domNode.childNodes[1].firstChild;},minuteView:function(){return this.domNode.childNodes[1].firstChild;},secondView:function(){return this.domNode.childNodes[1].firstChild;},timePart:function(){return this.domNode.childNodes[2];},hourLabel:function(){return this.domNode.childNodes[2].firstChild;},minuteLabel:function(){return this.domNode.childNodes[2].childNodes[2];},secondLabel:function(){return this.domNode.childNodes[2].childNodes[4];},AMPMLabel:function(){return this.domNode.childNodes[2].childNodes[5];},advancedNode:function(){return this.domNode.childNodes[3];},buttonsNode:function(){return this.domNode.childNodes[4];}},init:function z(AG){if(this._super){this._super(AG);}if(this.duration<1){this.duration=1;}if(!this.selectedDates){this.selectedDates=[];}this.timeVal={hour:0,min:0,sec:0};},ondynDateValueChange:function s(AG){if(AG.value!==undefined&&this.hasRendered){this.updateSelectedDate();this.buildChildren();}},onminChange:AD,onmaxChange:AD,buildChildren:function a(){var AM=this;if(this.showAdvanced){var AJ=this.dynDateValue,AI=this.advancedValues||this.addDisposable(new mstrmojo.Model({})),AP=AJ&&AJ.split("::")||[],AL=AP[1]||AA,AH=AP[2]||0,AQ=AP[3]||0,AN=function AN(){if(AM.isAdvanced){AM.wasAdvanced=true;AM.changeValueOnOK=true;}AM.set("isAdvanced",!AM.isAdvanced);mstrmojo.css.toggleClass(AM.markupSlots.dayView.call(AM),["ddSelected"],AM.isAdvanced);r.call(AM,"baseDate",AM.isAdvanced?3:0);if(AM.parent&&AM.parent.nudge&&AM.isAdvanced){AM.parent.nudge();}};this.advancedValues=AI;AI.baseDate=parseInt(AL);AI.toAddDays=AH>=0;AI.daysToAdjust=Math.abs(AH);AI.toAddMonths=AQ>=0;AI.monthsToAdjust=Math.abs(AQ);this.isAdvanced=!!this.dynDateValue;if(this.domNode){mstrmojo.css.toggleClass(this.markupSlots.dayView.call(this),["ddSelected"],this.isAdvanced);}if(this.isAdvanced&&this.value){var AG=l(this.value),AK=this.timeVal;if(AG&&AG.hour!==undefined){AK.hour=AG.hour;AK.min=AG.min;AK.sec=AG.sec;}}r.call(AM,"baseDate",this.isAdvanced?3:0);this.destroyChildren(false);this.addChildren([{scriptClass:"mstrmojo.HBox",alias:"checkLabel",slot:"advancedNode",children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"checkbox",checked:!!AM.isAdvanced,oncheckedChange:AN},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13844,"Dynamic Date"),onclick:function AO(){this.parent.checkbox.onclick();}}]},{scriptClass:"mstrmojo.Box",alias:"advancedPanel",slot:"advancedNode",bindings:{visible:"this.parent.isAdvanced"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9423,"Today"),cssClass:"tdLabel"},I.call(this,"days",AH),I.call(this,"months",AQ)]},]);}else{this.destroyChildren(false);}this.addChildren([mstrmojo.Button.newWebButton(mstrmojo.desc(2140,"Cancel"),function(){AM.parent.close();},false,{slot:"buttonsNode"}),mstrmojo.Button.newWebButton(mstrmojo.desc(1442,"OK"),function(){if(AM.changeValueOnOK||AM.isAdvanced||AM.wasAdvanced){AM.updateValue(true);}},true,{slot:"buttonsNode"})]);},preBuildRendering:function A(){this.buildChildren();return this._super();},getSelectedDatesAsString:function E(AH){var AG=[];k.forEach(this.selectedDates,function(AI){AG.push(Z.formatDateInfo(AI,AH||AB().DATEOUTPUTFORMAT));});return AG;},updateSelectedDate:function L(AK){var AG=this.value,AH=this.timeVal,AJ=this.selectedDates,AI,AL=function(AN,AM){AN.set("browseYear",AM.year);AN.set("browseMonth",AM.month);AN.updateTimePart();AN.updateView(AN.currentView);if(!AN.changeValueOnOK&&AN.hasRendered&&AN.closeOnValueChange!=true){AN.updateValue();}};if(this.wasAdvanced){this.wasAdvanced=false;this.changeValueOnOK=false;}if(AG){AI=l(AG);if(AI&&AI.hour!==undefined){AH.hour=AI.hour;AH.min=AI.min;AH.sec=AI.sec;}}if((AI&&!this.isMultiSelect)||AK){B(this);}if(AJ.length===0){if(!AI){if(this.parent.opener&&this.parent.opener.defaultDate){AI=l(this.parent.opener.defaultDate);}else{AI=Z.getDateJson(new Date());}}if(!this.canSelectDisabledDate&&this.isDateDisabled(AI.day,AI.month,AI.year,this.min,this.max)){if(this.min&&Z.compareDate(AI,this.min)<0){AI=l(this.min);}else{if(this.max&&Z.compareDate(AI,this.max)>0){AI=l(this.max);}}}AJ.push(AI);AL(this,AI);}else{AI=AJ[0];if(!this.value){AL(this,AI);}}},updateValue:function d(AG){var AI=g(this),AH="";if(AI){AH=Z.formatDateInfo(AI,AB().DATEOUTPUTFORMAT);if(this.dtp!==y.DATE){AH+=" "+Z.formatTimeInfo(this.timeVal,AB().TIMEOUTPUTFORMAT);}}this.lastValue=AH;this.set("value",AH);if(this.showAdvanced){this.set("dynDateValue",AG?U.call(this):null);}if(this.onValueUpdate){this.onValueUpdate();}},updateTimePart:function w(){var AH=this.timeVal,AG=AH.hour||0,AI=(AG%12===0)?12:(AG%12);this.hourLabel.innerHTML=AI;this.minuteLabel.innerHTML=Z.formatInteger(AH.min||0,2);this.secondLabel.innerHTML=Z.formatInteger(AH.sec||0,2);this.AMPMLabel.innerHTML=AG<12?" "+AB().AM_NAME:" "+AB().PM_NAME;},premousedown:function(AG){var AI=AG.e,AH=i.eventTarget(AG.hWin,AI);if(AH===this.decreaseButton||AH===this.increaseButton){if(i.isFF){i.stopPropogation(window,AI);}return true;}else{return this.processEvent(AH,AI);}},premouseup:function(AG){var AI=AG.e;if(AI.ctrlKey||AI.shiftKey){i.clearBrowserHighlights();}var AH=i.eventTarget(AG.hWin,AI);if(AH===this.decreaseButton&&!AH.disabled){this.decrease();return true;}if(AH===this.increaseButton&&!AH.disabled){this.increase();return true;}},processEvent:function(AR,AY){var AJ=this.currentView,AK=this.selectedDates,AO,AT,AZ,AG,AQ;if(AR===this.monthLabel){if(AJ!==AC){this.switchViewTo(AC);}return true;}if(AR===this.yearLabel){if(AJ!==V){this.adjustYearStart();this.switchViewTo(V);return true;}}if(AR===this.hourLabel){if(AJ!==X){this.switchViewTo(X);}return true;}if(AR===this.minuteLabel){if(AJ!==AF){this.switchViewTo(AF);}return true;}if(AR===this.secondLabel){if(AJ!==v){this.switchViewTo(v);}return true;}if(AR===this.AMPMLabel){if(AJ!==X){this.switchViewTo(X);}return true;}if(AJ===X){var AM=AR.getAttribute("h");AQ=parseInt(AR.innerHTML,10);if(!isNaN(AM)&&!isNaN(AQ)){AM=parseInt(AM,10);this.timeVal.hour=AQ%12+AM*12;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AJ===AF){AQ=parseInt(AR.innerHTML,10);if(!isNaN(AQ)){this.timeVal.min=AQ;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AJ===v){AQ=parseInt(AR.innerHTML,10);if(!isNaN(AQ)){this.timeVal.sec=AQ;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AJ===c){var AX=this.browseYear,AH=this.browseMonth,AI;AR=P(AR);AZ=parseInt(AR.innerHTML,10);AG=parseInt(AR.getAttribute("m"),10);if(!isNaN(AZ)&&!isNaN(AG)){AI=(AG===0)?{y:AX,m:AH}:(AG===1?Z.getNextMonth(AX,AH):Z.getPreMonth(AX,AH));if((!this.canSelectDisabledDate&&this.isDateDisabled(AZ,AI.m,AI.y,this.min,this.max))||AY.button===2){return true;}if(this.isAdvanced){return true;}var AU=W(AK,AZ,AH,AX),AS=AK.length>1,AP=this.forceNonEmptySelection,AV=this.isMultiSelect,AN=AV&&AY.ctrlKey,AW=AV&&AY.shiftKey,AL=null;if(AW){AL=f(this,AR);B(this);n(this,AL);}else{if(AN){if(AU===-1){AE(this,AR);}else{if(!AP||AS){t(this,AU);}}}else{B(this);if(AS||AU===-1||AP){AE(this,AR);}}}if(this.onselect||J.hasSubs(this.id,"select")){this.raiseEvent({name:"select",value:this.selectedDates});}if(AG===1){this.increase();}else{if(AG===-1){this.decrease();}}if(!this.changeValueOnOK){this.updateValue();}else{if(this.showAdvanced){this.checkLabel.checkbox.set("checked",false);r.call(this,"baseDate",0);}}}return true;}if(AJ===AC){AR=P(AR);AT=parseInt(AR.getAttribute("m"),10);if(!isNaN(AT)){this.set("browseMonth",AT+1);this.switchViewTo(c);}return true;}if(AJ===V){AR=P(AR);AO=parseInt(AR.innerHTML,10);if(!isNaN(AO)){this.set("browseYear",AO);this.switchViewTo(c);}return true;}return true;},decrease:function(){var AI=this.currentView,AL=AI,AK=this.browseYear,AG=this.browseMonth,AH=this.yearRangStart,AJ;switch(AI){case c:AJ=Z.getPreMonth(AK,AG);this.set("browseMonth",AJ.m);this.set("browseYear",AJ.y);break;case AC:this.set("browseYear",AK-1);break;case V:this.yearRangStart=AH-this.yearViewSize*this.yearViewSize;break;case X:AL=v;break;case AF:AL=X;break;case v:AL=AF;break;}this.switchViewTo(AL,"right");},increase:function(){var AI=this.currentView,AL=AI,AK=this.browseYear,AG=this.browseMonth,AH=this.yearRangStart,AJ;switch(AI){case c:AJ=Z.getNextMonth(AK,AG);this.set("browseMonth",AJ.m);this.set("browseYear",AJ.y);break;case AC:this.set("browseYear",AK+1);break;case V:this.yearRangStart=AH+this.yearViewSize*this.yearViewSize;break;case X:AL=AF;break;case AF:AL=v;break;case v:AL=X;break;}this.switchViewTo(AL,"left");},updateView:function(AG){var AH=this[AG+"ViewHTML"]();this[AG+"View"].innerHTML=AH;},adjustYearStart:function(){this.yearRangStart=this.browseYear-10-this.browseYear%5;},switchViewTo:function(AH,AJ){var AN="mstrmojo-Calendar-"+AH+"View",AM=document.createElement("div"),AG=this[this.currentView+"View"],AK=AH+"ViewHTML",AL=this[this.currentView+"Label"],AI=this[AH+"Label"];if(!this.supportedViews[AH]){return ;}if(!AJ){AJ=this.sDirMatrix[this.currentView][AH];}AM.className=AN;AM.innerHTML=this[AK]();this.currentView=AH;this[AH+"View"]=AM;mstrmojo.css.toggleClass(AM,["ddSelected"],this.isAdvanced);this._slideIntoView(AG,AM,AJ);},_slideIntoView:function(AK,AO,AI){var AG=this.bodyContainer,AM=(AI==="left"||AI==="right")?AK.offsetWidth:AK.offsetHeight,AH=(AI==="left"||AI==="right")?"left":"top",AN=(AI==="left"||AI==="up")?AM:-AM,AL=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AK,onEnd:function(){AG.removeChild(AK);}}),AJ=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AO});AO.style[AH]=AN+"px";AG.appendChild(AO);AL.props[AH]={start:0,stop:-AN,suffix:"px"};AJ.props[AH]={start:AN,stop:0,suffix:"px"};AL.play();AJ.play();},dayViewHTML:function(){var AL=this.browseYear,AO=this.browseMonth,AT=Z.getDaysOfMonth(AL,AO),AX=Z.getPreMonth(AL,AO),AI=Z.getDaysOfMonth(AX.y,AX.m),AH=Z.getNextMonth(AL,AO),AP=H(AL,AO,this.firstDayOfWeek),AM=[],AJ=x(this),AZ=0,AG=this.selectedDates,AR=this.min,AV=this.max,Aa,AS,AW,AU,AY=this.showCurMonthDatesOnly?'style="visibility:hidden;"':"";T(this,{d:AI,m:AX.m,y:AX.y},{d:1,m:AH.m,y:AH.y});AM.push(O(this.cssTextDay));AM.push(this._dayViewTHead());AM.push("<tr>");for(AW=0;AW<AP;AW++){Aa=AI-AP+AW+1;AS=this.isDateDisabled(Aa,AX.m,AX.y,AR,AV)?"disabled":"";AM.push("<td "+AY+'><div class="mstrmojo-Calendar-day-pre '+AS+'" m="-1">');AM.push(Aa);AM.push("</div></td>");AZ++;}for(AW=0;AW<AT;AW++){Aa=AW+1;AS=this.isDateDisabled(Aa,AO,AL,AR,AV)?" disabled":"";var AK=p(Aa,AO,AL),AN=AK?" today":"",AQ=W(AG,Aa,AO,AL)!==-1;AN=(this.hilightToday&&AK)?" hilightToday":AN;AM.push("<td "+(AK?('class="'+AN+'" '):" ")+(AQ?AJ:"")+'><div class="mstrmojo-Calendar-day-cur'+(AQ?(" selected "):"")+AS+'" m="0"'+(AQ?AJ:"")+">");AM.push(AW+1);AM.push("</div></td>");if((++AZ)%7===0){AM.push("</tr><tr>");}}for(AU=AZ;AU<42;AU++){Aa=AZ-AT-AP+1;AS=this.isDateDisabled(Aa,AH.m,AH.y,AR,AV)?"disabled":"";AM.push("<td "+AY+'><div class="mstrmojo-Calendar-day-next '+AS+'" m="1">');AM.push(Aa);AM.push("</div></td>");if((++AZ)%7===0&&AZ!==42){AM.push("</tr><tr>");}}AM.push("</tr>");AM.push(u);return AM.join("");},_dayViewTHead:function(){var AJ=[],AK='<thead><tr class="mstrmojo-Calendar-thead" style="'+this.cssTextWeekDay+';">',AI="</tr></thead>",AH=this.firstDayOfWeek-1,AL=this.dayNames,AG;AJ.push(AK);for(AG=AH;AG<AH+7;AG++){AJ.push("<td>");AJ.push(AL(AG%7));AJ.push("</td>");}AJ.push(AI);return AJ.join("");},monthViewHTML:function(){var AH=[],AJ=this.browseMonth-1,AI=this.browseYear,AG;T(this,{d:31,m:12,y:AI-1},{d:1,m:1,y:AI+1});AH.push(O(this.cssTextMonth));AH.push("<tr>");for(AG=0;AG<12;AG++){AH.push("<td "+((AG===AJ)?x(this):"")+'><div class="mstrmojo-Calendar-month'+((AG===AJ)?" selected":"")+'" m="');AH.push(String(AG));AH.push('">');AH.push(this.monthNames(AG));AH.push("</div></td>");if(AG%3===2){AH.push("</tr><tr>");}}AH.pop();AH.push("</tr>");AH.push(u);return AH.join("");},yearViewHTML:function(){var AL=this.yearRangStart,AH=[],AJ=this.browseYear,AK,AG,AI=this.yearViewSize;T(this,{d:31,m:12,y:AL-1},{d:1,m:1,y:AL+AI*AI});AH.push(O(this.cssTextYear));AH.push("<tr>");for(AG=0;AG<AI*AI;AG++){AK=AL+AG;AH.push("<td "+((AJ===AK)?x(this):"")+'><div class="mstrmojo-Calendar-year'+((AJ===AK)?" selected":"")+'">');AH.push(AK);AH.push("</div></td>");if(AG%AI===(AI-1)){AH.push("</tr><tr>");}}AH.pop();AH.push("</tr>");AH.push(u);return AH.join("");},hourViewHTML:function(){var AI=[],AH=this.timeVal.hour,AG;AI.push(G);AI.push('<tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AI.push(AB().AM_NAME);AI.push("</div></td></tr>");for(AG=0;AG<12;AG++){AI.push('<td><div class="mstrmojo-Calendar-hour'+((AG===AH)?" selected":"")+'" h="0">');AI.push((AG===0)?12:AG);AI.push("</div></td>");if(AG===5){AI.push("</tr><tr>");}}AI.push('</tr><tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AI.push(AB().PM_NAME);AI.push("</div></td></tr>");for(AG=0;AG<12;AG++){AI.push('<td><div class="mstrmojo-Calendar-hour'+(((12+AG)===AH)?" selected":"")+'" h="1">');AI.push((AG===0)?12:AG);AI.push("</div></td>");if(AG===5){AI.push("</tr><tr>");}}AI.push("</tr>");AI.push(u);return AI.join("");},minuteViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.min,"mstrmojo-Calendar-minute");},secondViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.sec,"mstrmojo-Calendar-second");},_minuteSecondViewHTML:function(AI,AJ){var AH=[],AG;AH.push(G);AH.push("<tr>");for(AG=0;AG<60;AG++){AH.push('<td><div class="');AH.push(AJ);AH.push((AG===AI)?' selected">':'">');AH.push(AG);AH.push("</div></td>");if(AG%10===9){AH.push("</tr><tr>");}}AH.pop();AH.push("</tr>");AH.push(u);return AH.join("");},isDateDisabled:function(AG,AI,AH){return !F(AG,AI,AH,this.min,this.max);},unrender:function D(AG){delete this.lastValue;this._super(AG);}});}());(function(){mstrmojo.requiresCls("mstrmojo.FilterExpr","mstrmojo.threshold.AndOrNode","mstrmojo.threshold.ConditionNode","mstrmojo.expr");var G=mstrmojo.expr,F=G.ET;mstrmojo.threshold.ThresholdExprTree=mstrmojo.declare(mstrmojo.FilterExpr,null,{scriptClass:"mstrmojo.threshold.ThresholdExprTree",cssClass:"mstrmojo-ThresholdExprTree",allowCopy:false,containerResizable:false,draggable:true,dropZone:true,editable:true,makeObservable:true,supportRelation:true,nodeClassMap:{14:mstrmojo.threshold.AndOrNode,"*":mstrmojo.threshold.ConditionNode},onConditionEdit:mstrmojo.emptyFn,editor:undefined,isEditable:function C(H){if(!this.editable){return false;}if(H&&H.et===F.XML){return !H.xml;}return true;},onNew:function E(H){H.data.isNew=true;this.editor.openConditionWalk(H.data,H.widget.ctxtBuilder.itemWidgets[H.index]);},onnodeclick:function D(H){var I=H.part;if(!H||!I){return ;}var K=I==="andor",J=this.tree.editor;if(!((K&&this.prefixedAndOrEditable)||(!K&&this.editable))){return ;}if(!this.editable){return ;}if(K){J.openAndORPopup(this,H.getTarget());return ;}else{if(I==="addCondition"){this.tree.newCondition(null);return ;}}J.openConditionWalk(this.data,this);},allowDrop:function B(H){var M=H&&H.src,L=M&&M.data,J=L&&L.et,K=this.tree,I=M&&M.widget&&M.widget.tree;return J&&(this===K?(I!==K):true);},remove:function A(I){var H=this._super(I);if(this.items.length===0&&I.et===F.ANDOR&&I.nds.length===0&&this.parent.removeFromModel){this.parent.removeFromModel();}return H;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.expr","mstrmojo.array","mstrmojo.ConditionNode","mstrmojo.threshold.ThresholdExprTree","mstrmojo.condTx.CommonComponent");var D=mstrmojo.hash,G=mstrmojo.expr,E=mstrmojo.string.htmlAngles,L=G.ET,J=G.FN,I=mstrmojo.ConditionNode.getFunctionNode,F=mstrmojo.condTx.CommonComponent,C=F.EXPR_NODE_TYPE,H=F.setSubExpressionType;function B(R){var S=R.data,P=[];if(S.tx){P.push('<span class="mstrmojo-text mstrmojo-tx">'+E(S.tx.dn||S.tx.n||"")+"</span>");}else{if(S.exp){P.push('<span class="mstrmojo-text mstrmojo-tx">Advanced&nbsp;Expression</span>');}}if(S.fn){P.push('<span class="mstrmojo-text mstrmojo-fn">'+E(G.fnName(10,S.fn,S.fnt||1))+"</span>");}if(S.tx2){P.push('<span class="mstrmojo-text mstrmojo-tx2">'+E(S.tx2.dn||S.tx2.n||"")+"</span>");}else{if(S.exp2){P.push('<span class="mstrmojo-text mstrmojo-tx">Advanced&nbsp;Expression</span>');}}if(S.cs){var O=S.cs||[],M=O.length;if(O[0]){var Q=O[0];P.push('<span class="mstrmojo-text mstrmojo-c0">'+E(Q.n||Q.v||"")+"</span>");}if(M>1){P.push('<span class="mstrmojo-text mstrmojo-btwn">'+R.betweenText+"</span>");}if(O[1]){var N=O[1];P.push('<span class="mstrmojo-text mstrmojo-c1">'+E(N.n||N.v||"")+"</span>");}}return P.join("");}function A(M){return M.fn&&(M.tx||M.exp)&&(M.tx2||M.exp2||M.cs);}mstrmojo.condTx.ConditionNode=mstrmojo.declare(mstrmojo.ConditionNode,null,{markupMethods:D.copy({ondataChange:function(){var M=this.data;this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=(M.et!==L.XML)?I(this):B(this);this.textPostfixNode.innerHTML=this.getConditionTextPostfix();H(M);}},D.copy(mstrmojo.ConditionNode.prototype.markupMethods)),isEmpty:function(){var M=this._super(),N=this.data;return M&&!A(N);}});mstrmojo.condTx.ActionExprTree=mstrmojo.declare(mstrmojo.threshold.ThresholdExprTree,null,{scriptClass:"mstrmojo.condTx.ActionExprTree",itemFunction:function(P,N,Q){if(L.ANDOR!==P.et){var O=Q.tree.getItemConfig(P,N,Q),M=mstrmojo.condTx.ConditionNode;return new M(O);}else{return this._super(P,N,Q);}},isEditable:function K(M){return this.editable;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.Popup","mstrmojo._HasPopup","mstrmojo.locales","mstrmojo.date","mstrmojo.string");var B=mstrmojo.ValidationTextBox.prototype.markupMethods,D=mstrmojo.string,A=function(){return mstrmojo.locales.datetime;},C=mstrmojo.date;mstrmojo.DateTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DateTextBox",calendarToBody:false,calendarZIndex:100,changeValueOnOK:false,dynDateValue:null,showAdvanced:false,canSelectDisabledDate:false,isList:false,dtp:14,defaultDate:null,autoFormat:true,enabled:true,min:"",max:"",markupString:'<div id="{@id}" class="mstrmojo-DateTextBox {@cssClass}" style="{@cssText}"><input class="mstrmojo-DateTextBox-input" type="text" title="{@tooltip}"value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur /><div class="mstrmojo-DateTextBox-icon" mstrAttach:click> </div><div class="mstrmojo-DateTextBox-popup"></div></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.childNodes[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onwidthChange:function(){if(this.width){this.inputNode.style.width=(this.width-20)+"px";this.iconNode.style.left=(this.width-18)+"px";this.domNode.style.width=this.width+"px";}},onvalueChange:B.onvalueChange,onenabledChange:B.onenabledChange,onvalidationStatusChange:B.onvalidationStatusChange},calConfig:null,calendar:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-DateTextBox-calendar",locksHover:true,slot:"popupNode",onOpen:function(){var H=this.opener,G=H&&H.calendarZIndex,I=this.cal,E=H&&H.calConfig;if(G){this.domNode.style.zIndex=G;}for(var F in E){I.set(F,E[F]);}},children:[{scriptClass:"mstrmojo.Calendar",alias:"cal",forceNonEmptySelection:true,bindings:{showAdvanced:"this.parent.opener.showAdvanced",dtp:"this.parent.opener.dtp",value:"this.parent.opener.value",dynDateValue:"this.parent.opener.dynDateValue",enabled:"this.parent.opener.enabled",min:"this.parent.opener.min",max:"this.parent.opener.max",canSelectDisabledDate:"this.parent.opener.canSelectDisabledDate",changeValueOnOK:function(){var F=this.parent.opener.dtp,E=this.parent.opener.changeValueOnOK;return F===15||F===16||E;}},closeOnValueChange:true,onValueUpdate:function(F){var I=this.parent&&this.parent.opener;if(I){var G=I.value,E=window.mstrConfig&&window.mstrConfig.listSep||";",H=I.dtp===15?C.formatTimeInfo(this.timeVal,A().TIMEOUTPUTFORMAT):this.value;if(I.isList&&!D.isEmpty(G)){I.set("value",I.value+E+H);}else{I.set("dynDateValue",this.dynDateValue);I.set("value",H);}I.closePopup();}}}]},onclick:function(E){var F=this._lastOpened,G=this._calendarConfig;if(!G){G={};if(this.calendarToBody){delete this.calendar.slot;G.placeholder=document.body.appendChild(document.createElement("div"));G.nudge=function(){var M=this.opener;if(M){var H=mstrmojo.dom.position(M.popupNode,true),L=this.domNode,P=L.offsetHeight,I=L.offsetWidth,J=mstrmojo.dom.windowDim(),K=H.x,N=H.y;if(N+P>=J.h){N=Math.max(N-P,0);}if(K+I>=J.w){K=Math.max(K-I,0);}var O=L.style;O.top=N+"px";O.left=K+"px";}};}this._calendarConfig=G;}G.lockIW=this;if(F&&F.visible){this.closePopup();}else{this.openPopup("calendar",G);this.calendar.cal.updateSelectedDate(true);}},unrender:function(){this._super();if(this.calendarToBody&&this._calendarConfig){delete this._calendarConfig;}if(this.calendar.hasRendered){this.calendar.unrender();}},_set_value:function(H,F){var G=this.value,E=(G!==F);if(E){this.value=F;this.validate(F);}if(this.showAdvanced&&this.dynDateChanged){this.dynDateChanged=false;E=true;}return E;},_set_dynDateValue:function(H,F){var G=this.dynDateValue,E=(G!==F);if(E){this.dynDateValue=F;this.dynDateChanged=true;}return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.css","mstrmojo.registry","mstrmojo.AjaxCall","mstrmojo.hash","mstrmojo.array","mstrmojo.Arr","mstrmojo.expr","mstrmojo.dom","mstrmojo.mstr.EnumDataType","mstrmojo.Label","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.WidgetDial","mstrmojo.Calendar","mstrmojo.DateTextBox","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ValidationTextBox","mstrmojo.ui.CheckList","mstrmojo.ui._HasScroller","mstrmojo.ui.ColumnContainer","mstrmojo.elementHelper");var AR=mstrmojo.css,AK=mstrmojo.registry,M=mstrmojo.hash,c=mstrmojo.mstr.EnumDataType,K=mstrmojo.array,r=K.map,L=mstrmojo.Arr,AN=mstrmojo.expr,b=AN.ET,n=AN.ET2TP,AD=AN.ET2TGT,O=AN.FN,w=AN.FN_MRP,AL=AN.DTP,j=AN.DTP2FN_DTP,AG=mstrmojo.meta.TP,P=mstrmojo.meta.STP,AS=AN.TP,W=AN.STP,U=mstrmojo.elementHelper;var AY={};AY[b.AQ]={target:1,fm:1,fn:1,c0:1,c1:1};AY[b.AL]={target:1,fm:1,fn:1,c0:1};AY[b.AE]={target:1,fm:1,es:1};AY[b.AC]={target:1,fm:1,fm2:1,fm3:1,fn:1,c0:1,c1:1};AY[b.MQ]={target:1,fn:1,c0:1,c1:1,dmy:1};AY[b.MC]=AY[b.MQ];AY["*"]={target:1};var B={};B[b.MQ]={key:"metricFns",def:AN.METRIC_FNS};B[b.MC]={key:"metricFns",def:AN.METRIC_FNS};B[b.AQ]={key:"formFns",def:AN.FORM_FNS};B[b.AL]={key:"formFns",def:AN.FORM_FNS};B[b.AC]={key:"formFns",def:AN.FORM_FNS};B[b.AE]={key:"elemFns",def:AN.ELEM_FNS};var y=mstrmojo.desc(14084,"Select a filter option or a qualification."),x=mstrmojo.desc(14085,"Select one or more elements."),v=mstrmojo.desc(14086,"Select an operator."),u=mstrmojo.desc(14087,"Enter a value or select an attribute from the list."),t=mstrmojo.desc(14088,"Select an attribute form. When done, click ## button.").replace("##",'"√"'),s=mstrmojo.desc(14089,"Select a condition."),q=mstrmojo.desc(14090,"Enter a value or select a metric from the list.");var AJ=0,AW=1;var H=mstrmojo.ui.ColumnContainer.prototype.updateColumnContainer;function F(Ad){var Ac=true,AZ=Ad.model,Aa,Ab=AZ&&AN.fnCstCount(AZ.fn,AZ.fnt);if(!AZ){return ;}switch(AZ.et){case b.AQ:case b.AL:case b.MQ:for(Aa=0;Aa<Ab;Aa++){Ac=Ac&&!Ad["invalid"+Aa];}break;}Ad.okBtn.set("visible",Ac&&!!AZ.completed);}function J(){var Aa=this.parent,AZ=((Aa&&Aa.cssText)||"").match(/height:\s*(\d*)px/);this.cssText=AZ&&AZ[0];}var Y="dummy",p={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:Y,css:"unselectable"},A={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:Y,css:"unselectable"},AU={did:"idSelect",v:"idSelect",n:mstrmojo.desc(547,"Select"),t:Y,css:"unselectable"},AH={did:"idWait",v:"idQualification",n:mstrmojo.desc(5225,"Qualification"),t:Y,css:"unselectable"},a={did:"idAttribute",v:"idAttribute",n:mstrmojo.desc(518,"Attribute"),t:Y,css:"unselectable"},AC={did:"idMetric",v:"idMetric",n:mstrmojo.desc(517,"Metric"),t:Y,css:"unselectable"};function k(Ab){if(this.updating){return ;}var Ac=this.multiSelect,Af=this.selectedItem,Ae=Ab&&Ab.added,Ag=Ab&&Ab.removed;if(!Ac&&Ae&&Ag&&Ae[0]===Ag[0]){return ;}if(Af&&Af[AG]===Y){this.updating=true;if(Ac){this.removeSelect([this.selectedIndex]);}else{var Aa=Ag&&Number(Ag[0]);Aa=(Aa==null)?-1:Aa;this.set("selectedIndex",Aa);}this.updating=false;}else{var AZ=this.parent.parent.parent.model;if(Ac){var Ad=this.items;AZ.edit(this.alias,{added:Ae&&K.get(Ad,Ae),removed:Ag&&K.get(Ad,Ag),itemIdField:this.itemIdField});}else{AZ.edit(this.alias,Af);}}}mstrmojo.rw.ConditionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.rw.ConditionList",allowUnlistedValues:true,itemIdField:"did",getItemProps:function AP(Ad,AZ){var Ac=!!this.selectedIndices[AZ],Ae=Ad.n,Ab=false;if(Ad.t===12){var Aa=K.filter(Ad.fs,function(Af){return Af.fgr>0;});if(Aa.length>0){Ab=true;}}return M.copy({cls:(Ac?mstrmojo._IsList.SELECTED_CLS:"")+" "+(Ad.css||"")+" "+(Ad.t?("t"+Ad.t+((Ad.da||Ad.um)?"d":"")+(Ab?"g":"")+(Ad.st?(" st"+Ad.st):"")):""),n:Ae||"&nbsp;"},this._super(Ad,AZ));},onselectionChange:function o(AZ){this._super(AZ);k.call(this,AZ);}});function AB(Ab,Ad,Aa){var Ac=Ab.items,AZ=K.indexOf(Ac,Ad);if((AZ===0)&&(Ac.length===1)){Aa=mstrmojo.Arr.makeObservable((Aa&&Aa.length)?Aa.concat():[]);Ab.set("items",Aa);}else{if(AZ>-1){Ac.splice(AZ,1);}if(Aa&&Aa.length){K.insert(Ac,(AZ>-1)?AZ:Ac.length,Aa);}Ab.refresh();}}function N(AZ){return mstrmojo.mixin(AZ,{scriptClass:"mstrmojo.rw.ConditionList",cssClass:"mstrmojo-"+AZ.alias,postCreate:J});}function V(Ab,AZ,Ac){var Aa=Ab.cfg;if(Aa){Aa.data=Ab;Aa.parent=Ac;return AK.ref(Aa);}Aa=new mstrmojo.Label({text:Ab.n||"&nbsp;",cssClass:"dial-item "+(Ab.t?("t"+Ab.t):"")});Aa.markupMethods.onselectedChange=function(){AR.toggleClass(this.domNode,["selected"],this.selected);};Aa.data=Ab;Aa.parent=Ac;return Aa;}function f(Aa,AZ){var Ab=AZ+AN.FN_SEP+Aa;return(Aa!=null)?{did:Ab,n:Ab}:null;}function AV(AZ){return AZ.targets?K.filter(AZ.targets,function(Aa){return Aa[AG]===AN.TP.ATTR;}):[];}function Q(Ab,Aa,Ac,Af){Ab.updating=true;if(Aa){if(Ac!=null){Ab.clearSelect();Ab.set("items",Ac);}var Ae=Ab.itemIdField,Ad=Ab.selectedItem;if((Ad&&Ad[Ae])!=(Af&&Af[Ae])){var AZ=Math.max(K.indexOf(r((Ac||[]),function(Ag){return Ag[Ae];}),Af&&Af[Ae]),0);Ab.set("selectedIndex",AZ);}}Ab.updating=false;}function AO(AZ,Aa,Ac,Ab){AZ.updating=true;AZ.clearSelect();K.forEach(Aa,function(Ad){Ad.title=Ad.title||Ad.n||"";});if(Aa){AZ.set("items",Aa);}if(Ac&&Ac.length){AZ.setSelectedItems(Ac);}else{if(Ab&&Ab.length){AZ.select(Ab);}}AZ.updating=false;}function AF(Aa,AZ,Ab,Ad,Ac){if(AZ){AO(Aa,Ab,Ad,Ac);}}function AE(Ab,Aa){var AZ=Ab.model||{},Ac=AZ.fn;return(Ac!=null)&&((AZ.et===b.MQ)||(AZ.et===b.MC)||(AZ.et===b.AQ)||(AZ.et===b.AL)||(AZ.et===b.AC))&&(AN.fnCstCount(Ac,AZ.fnt)>Aa);}var e={};e[AL.DATE]=1;e[AL.TIME]=1;e[AL.TIMESTAMP]=1;function l(AZ,Ab){var Aa;if(Ab){switch(AD[AZ.et]){case"a":Aa=Ab[b.AC];break;case"m":Aa=Ab[b.MC];break;default:Aa=false;break;}}else{Aa=true;}return Aa&&AN.fn_AC_MC(AZ&&AZ.fn);}function i(Aa){var Ad=Aa&&n[Aa.et],Ac=Aa&&Aa.fm&&Aa.fm.dtp,AZ=Ac&&AN.DTP2PROMPT_STP[Ac],Ab={};Ab[Ad]=true;if(AZ){Ab[AZ]=true;}return Ab;}function d(AZ){switch(AZ){case c.DataTypeInteger:case c.DataTypeUnsigned:case c.DataTypeDecimal:case c.DataTypeReal:case c.DataTypeDouble:case c.DataTypeFloat:return c.DataTypeNumeric;default:return AZ;}}function C(Aa){var Ac=Aa.model,Ah=Ac&&Ac[AD[Ac.et]]&&Ac[AD[Ac.et]][Aa.columnWalk.target.itemIdField],Ab=Ac&&Ac.fm,AZ=Ab&&Ab.dtp,Ae=l(Ac,Aa.ets);if(this.targetsLastMod&&this.targetsLastMod===Aa.targetsLastMod&&Ah&&Ah===this._lastTargetId&&this.lastFmDtp===AZ&&this.lastFnTp===Ae){return ;}if(!Ae){this.clearSelect();this.set("items",this.items.slice(0,this.preLen));}else{var Af=i(Ac),Ai=Ac[AD[Ac.et]],Ad=Ac.a?[a]:Ac.m?[AC]:[],Aj=Ad.concat(AN.getSortedObjectsByTypeGroup(K.filter(Aa.targets,function(Ak){return(Ak.t!==4||Ak.did!==Ai.did)&&(Af[Ak[AG]]||Af[Ak[P]]);}))),Ag=this.items.slice(this.preLen);K.forEach(Ag.reverse(),function(Ak){this.remove(Ak);},this);this.add(Aj,-1);}this._lastTargetId=Ah;this.lastFnTp=Ae;this.lastFmDtp=AZ;this.targetsLastMod=Aa.targetsLastMod;}function AI(As,Aj){As.updating=true;var Af=As.parent.parent.parent,Ar=AE(Af,Aj),Al,An;if(Ar){var Ab=Af.model||{},Ad=Ab.cs,Ap=Ad&&Ad[Aj],Ai=Ap&&Ap.v,Ag;C.call(As,Af);switch(Ab.et){case b.MQ:case b.MC:Ag=(Ap&&Ap.dtp)||d(Ab.m.dt)||AN.METRIC_DTP;break;case b.AQ:case b.AC:case b.AE:Ag=Ab.fm&&Ab.fm.dtp;break;case b.AL:Ag=Ab.fm&&Ab.fm.dtp;Ai=[];for(Al=0,An=Ad&&Ad.length;Al<An;Al++){Ai.push(Ad[Al].v);}Ai=Ai.join(mstrConfig.listSep);break;}Ag=Ag||AL.CHAR;var Ae=Ab.fn,Ak=AN.fn_List(Ae,Ab.fnt),Am=e[Ag],Ao=Am&&!Ak;var Aa=As.ctxtBuilder,AZ=Aa&&Aa.itemWidgets,Aq=Am?(Ao?As.calIndex:As.dtxtIndex):As.txtIndex,Ac;for(Al=0,An=As.preLen;Al<An;Al++){Ac=AZ[Al];if(Al==Aq){Ac.set("dtp",Ag);Ac.set("isList",Ak);Ac.set("value",Ai);Ac.set("visible",true);try{if(As.alias!=="c1"){Ac.focus&&Ac.focus();}}catch(Ah){}if(Ae===1||Ae===2){Ac.constraints.min=0;}if(Ac.clearValidation){Ac.clearValidation();}}else{Ac.set("visible",false);}if(Ak){Ac.set("hint",mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep||";"));}else{Ac.set("hint","");}}if(Af.hasPrompt&&As.selectedItem&&As.selectedItem.st===AN.STP.PROMPT_STRING){Af.invalid0=false;}switch(Ab.et){case b.AQ:case b.AL:case b.MQ:if(Ap&&Ap.p){As.set("selectedItem",Ap.p);}else{As.set("selectedIndex",Aq);}break;case b.MC:case b.AC:As.set("selectedItem",Ab[AD[Ab.et]+(2+Aj)]);break;}}As.updating=false;}function h(){var Ac=this.parent,Aa=Ac.parent.parent.parent,Ab=(this.isValid&&this.isValid())||(!this.isValid&&!mstrmojo.string.isEmpty(this.value)),AZ=Aa.model;Aa["invalid"+Ac.cstIndex]=!Ab;if(!this.updating&&Ab){this.updating=true;if(AZ){AZ.edit(Ac.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}F(Aa);}function AQ(){var Aa=this.parent,AZ=Aa.parent;AZ["invalid"+Aa.cstIndex]=false;}function AA(AZ){this.tip.set("text",AZ);}function D(Ab){var Ad=this.selectedItem;Ab=K.filter(Ab,function(Ae){return(!Ae.icf);});if(Ad){var Aa=K.find(Ab,this.itemIdField,Ad[this.itemIdField]);if(Aa>-1){Ab=Ab.concat();Ab.splice(Aa,1);}}AB(this,A,Ab);var Ac=this.items,AZ=Ac.length;if(AZ===1){this.singleSelect(0);}this.parent.updateScrollbars();}function I(Aa){var AZ=[{did:660,cfg:{scriptClass:"mstrmojo.ValidationTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP|mstrmojo.validation.TRIGGER.VALUESET},onValid:h,onInvalid:h,onClearValidation:AQ,size:6,visible:false}},{did:154,cfg:{scriptClass:"mstrmojo.Calendar",onvalueChange:h,visible:false}},{did:23,cfg:{scriptClass:"mstrmojo.DateTextBox",cssText:"margin-left:9px;",cssDisplay:"inline-block",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:h,onInvalid:h,onClearValidation:AQ,calendarToBody:true,autoFormat:false,calConfig:{onmousedown:function(Ab){mstrmojo.dom.stopPropogation(Ab.hWin,Ab.e);}},visible:false}}];return N(M.copy(Aa,{scriptClass:"mstrmojo.WidgetDial",makeObservable:true,itemFunction:V,selectionPolicy:"reselect",items:AZ.concat(),txtIndex:0,calIndex:2,dtxtIndex:2,preLen:AZ.length,insertUnlistedValuesAt:-1,itemIdField:"did",update:function(){AI(this,this.cstIndex);this.parent.updateScrollbars();},postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},itemsEffect:undefined,onchange:k}));}function G(AZ){return N(M.copy(AZ,{insertUnlistedValuesAt:-1,postCreate:function(){J.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,readCache:true,writeCache:true,params:{taskId:"getAttributeForms",attributeId:null,displayedForms:"0",styleName:"MojoAttributeStyle"},onsuccess:function(){var Ab=this.parent,Aa=this.response;if((Aa&&Aa.did)!==Ab.lastAttrId){return ;}D.call(this.parent,Aa.fms||[]);},onerr:function(){AB(this.parent,A,[p]);}});},update:function(){var Ak=this.fmPost,Ac=this.parent.parent.parent,Ae=Ac.model,Aj=Ae&&Ae["a"+Ak],Ah=!!Aj,Ad,Ag,Al,Ab=Ac.disableElementsBrowsing,Aa=Aj&&Ab&&Ab(Aj);if(Ah){switch(Ae.et){case b.AQ:case b.AL:Ag=Ae.fm;break;case b.AC:Ag=Ae["fm"+Ak];break;case b.AE:Ag=f(Ae.fn,1);break;}if(this.lastAttrId!==Aj.did){this.lastAttrId=Aj.did;Ad=[];if(this.isFirstFm){if(!Aa&&(!Aj.ilk&&(!Ac.ets||Ac.ets[b.AE]))){Ad.push(AU);var Af=B[b.AE],Ai=Af&&Af.key;Ad=Ad.concat((Ai&&Ac[Ai])||Af.def||[]);}Ad.push(AH);}if(Ag&&(Ae.et!==b.AE)){Ad.push(Ag);}Al=this.ajx;Al.params.attributeId=Aj.did;Al.params.otp=Aj.t||12;Ad.push(A);L.makeObservable(Ad);}}if(Aa&&Ae.et===b.AE){Ag=null;}Q(this,Ah,Ad,Ag);if(Ah&&Al){if(Ac.getAttributeForms){D.call(this,Ac.getAttributeForms(Aj.did)||[]);}else{if(Aj.fms){D.call(this,Aj.fms);}else{if(Al){if(Al._delayId){window.clearTimeout(Al._delayId);delete Al._delayId;}Al._delayId=window.setTimeout(function(){delete Al._delayId;Al.send();},500);}}}}}}));}var z=[AN.STP.PROMPT,AN.STP.PROMPT_OBJECTS,AN.STP.PROMPT_ELEMENTS,AN.STP.PROMPT_EXPRESSION,AN.STP.PROMPT_EXPRESSION_DRAFT];function Z(AZ){if(AZ&&!M.isEmpty(AZ)){var Aa=K.hash(z);M.forEach(AZ,function(Ac,Ab){if(Ac){Aa[n[Ab]]=true;}});return Aa;}return null;}mstrmojo.rw.ConditionWalkProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.rw.ConditionWalkProvider",browseEs:function S(Ac,Ab,Ae){Ac.openPopup("eb",{zIndex:Ac.parent.zIndex+10,left:Math.round(Ae.x)+"px",top:Math.round(Ae.y)+"px"});var Aa=Ac.eb.browser,AZ=Ac.model,Ad=AZ&&AZ.a&&AZ.a.did;if(!Ad){return ;}Aa.set("attributeID",Ad);Aa.set("selectedItems",AZ.es?M.clone(AZ.es):[]);Aa.initBrowser();},browseObjs:function AT(Ag,AZ,Aa){Ag.openPopup("ob",{zIndex:Ag.parent.zIndex+10,left:Math.round(Aa.x)+"px",top:Math.round(Aa.y)+"px"});var Ab=Ag.ob.browser;Ab.target=AZ;var Ac;switch(AZ.alias){case"dmy":Ac=[AN.TP.ATTR,AN.TP.DIM];break;case"c0":case"c1":var Ae=Ag.model,Ad=Ae&&Ae.et,Ah=Ae&&Ae.fm,Af=Ah&&Ah.dtp||(Ae.m?AN.DTP.DECIMAL:AN.DTP.UNKNOWN);Ac=(Ad===b.MQ||Ad===b.MC)?[AN.TP.METRIC,AN.DTP2PROMPT_STP[Af]]:[AN.TP.ATTR,AN.DTP2PROMPT_STP[Af]];break;default:Ac=Z(Ag.ets);Ac=Ac?M.keyarray(Ac,true):[AN.TP.ATTR,AN.TP.METRIC,AN.STP.REPORT_GRID,AN.STP.REPORT_GRAPH,AN.STP.REPORT_ENGINE,AN.STP.REPORT_TEXT,AN.STP.REPORT_DATAMART,AN.STP.REPORT_BASE,AN.STP.REPORT_GRIDGRAPH,AN.STP.REPORT_NONINTERACTIVE,AN.STP.FILTER].concat(z);}Ac[Ac.length]=AN.TP.FOLDER;Ab.browse({rootFolderType:Ae&&(Ae.et===b.MQ||Ae.et===b.MC)?5:26,folderLinksContextId:33,onSelectCB:[Ag,"onOBSelect"],browsableTypes:Ac.join(",")});},getFm2NodeProps:function AM(){return{alias:"fm2",children:[G({alias:"fm2",fmPost:2})],updateColumnContainer:function AZ(){var Aa=this.parent.parent;this.fm2.update();AA.call(Aa,t);H.call(this);}};},getC0NodeProps:function E(){var AZ=this;return{alias:"c0",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(527,"Value")},I({alias:"c0",cstIndex:0}),{scriptClass:"mstrmojo.Label",alias:"btwn",cssClass:"btwn",text:mstrmojo.desc(308,"and"),visible:false},I({alias:"c1",cstIndex:1,visible:false}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.c0);},visible:false}],updateColumnContainer:function Aa(){this.c0.update();var Ad=this.parent,Af=Ad.parent,Ag=Ad.parent.model,Ai=Ag&&Ag.fn,Ae=Ai===O.BETWEEN||Ai===O.NOT_BETWEEN||Ai===w.BETWEEN||Ai===w.BETWEEN_DESCENDING,Ac=Ai===O.EQUAL||Ai===O.NOT_EQUAL||Ai===O.GREATER||Ai===O.GREATER_EQUAL||Ai===O.LESS||Ai===O.LESS_EQUAL,Ab=this.idx,Ah=this.next;this.browseLink.set("visible",Af.objectBrowsingEnabled&&l(Ag,Af.ets));this.btwn.set("visible",Ae);this.c1.set("visible",Ae);if(Ae){this.c1.update();}else{Ag.edit("c1",{v:null,dtp:null,skipET:true});}if(Ag.a2&&Ac){if(!(Ah&&Ah.fm2)){Ad.insertAndRemoveTrailing(Ab,AZ.getFm2NodeProps());}}else{Ad.removeTrailingContainer(Ab);}AA.call(Af,Ag.a?u:Ag.m?q:"");H.call(this);}};},getFnNodeProps:function AX(){var AZ=this;return{alias:"fn",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(9579,"Condition")},G({alias:"fn",allowUnlistedValues:false,update:function(){var Ag=this.parent.parent.parent,Ac=Ag.model||{},Ah=Ac.et,Af,Ai=false,Aj,Ab;switch(Ah){case b.AE:Ai=!!Ac.a;break;case b.AQ:case b.AC:case b.AL:Ai=!!(Ac.fm&&Ac.fm.did);Af=Ai?Ac.fm.dtp:null;break;case b.MQ:case b.MC:Ai=!!Ac.m;Af=Ai?AN.METRIC_DTP:null;break;}if(Ai){var Ak=j[Af];if((this.lastEt!==Ah)||(this.lastFnDtp!==Ak)){this.lastEt=Ah;this.lastFnDtp=Ak;var Ae=Ah?B[Ah]:null,Ad=Ae&&Ae.key;Aj=(Ad&&Ag[Ad])||Ae.def||[];if(typeof (Aj)==="object"){Aj=Aj[Ak]||Aj["*"];}}Ab=f(Ac.fn,Ac.fnt||1);}Q(this,Ai,Aj,Ab);this.parent.updateScrollbars();}})],updateColumnContainer:function Aa(){this.fn.update();var Ab=this.parent,Ac=Ab.parent,Ad=Ac.model,Af=Ad&&Ad.fn,Ae=this.next,Ag=Af===O.IS_NULL||Af===O.IS_NOT_NULL;if(Af&&Ag){Ab.removeTrailingContainer(this.idx);}else{if(Af&&!(Ae&&Ae.c0)){Ab.insertAndRemoveTrailing(this.idx,AZ.getC0NodeProps());}}AA.call(Ac,Ad.a?v:Ad.m?s:"");Ae=this.next;if(Ae){Ae.updateColumnContainer();}}};},getEsNodeProps:function T(){var Ab=[{scriptClass:"mstrmojo.ui.CheckList",alias:"es",itemIdField:"v",allowUnlistedValues:true,insertUnlistedValuesAt:0,selectionPolicy:"toggle",postCreate:function Aa(){J.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,params:{taskId:"browseElements",attributeID:null,styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30},onsuccess:function(){var Am=this.parent,Ag=this.response;if((Ag&&Ag.did)!==Am.lastAttrId){return ;}var Ai=(Ag&&Ag.es)?K.filter(Ag.es,function(An){return !U.isNullElem(An.v);}):[],Al=Am.parent.parent.parent.model&&Am.parent.parent.parent.model.es,Aj=function(At,Ao){var As=At&&At.length||0,Ar=Ao&&Ao.length||0,An=[],Aq,Ap;for(Aq=0;Aq<Ar;Aq++){for(Ap=0;Ap<As;Ap++){if(Ao[Aq].n===At[Ap].n){break;}}if(Ap===As){An.push(Ao[Aq]);}}return An;},Ak=function(An,Ao,Ar){var Aq=[],Ap;K.forEach(An,function(As){Ap=K.filterOne(Ao,function(At){return As[Ar]&&At[Ar]&&As[Ar]===At[Ar];});if(Ap){Aq.push(Ap);}});return Aq.length===An.length?Aq:An;};Al=Al&&Ak(Al,Ai,"v");if(Am.allowUnlistedValues){var Ah=Aj(Ai,Al);Ai=(Am.insertUnlistedValuesAt===0)?Ah.concat(Ai):Ai.concat(Ah);}AO(Am,Ai,Al,null);Am.parent.updateScrollbars();},onerr:function(){AB(this.parent,A,[p]);}});},onselectionChange:function Ae(Ag){mstrmojo.ListBase.prototype.onselectionChange.call(this,Ag);k.call(this,Ag);},update:function Ad(){var Aj=this.parent.parent.parent,Ai=Aj.model,An=Ai&&Ai.a,Ao=!!An&&!An.ilk,Ap,Ag,Am,Ak,Ah,Aq;if(Ao){if(this.lastAttrId!==An.did){this.lastAttrId=An.did;Ap=Ai.es;Ak=Ap&&Ap.length;Ap=Ak?Ap.concat():[];Ap.push(A);if(Ak){Am=[];for(Ah=1;Ah<=Ak;Ah++){Am[Ah]=Ah;}}Aq=this.ajx;Aj.updateBrowseElementsParams(Aq.params,An);}else{Ag=Ai.es;}}AF(this,Ao,Ap,Ag,Am);if(Ao&&Aq){if(Aj.getElements){var Al=this;Aj.getElements(An,{success:function(Ar){AO(Al,Ar.es||[],Aj.model&&Aj.model.es,null);Al.parent.updateScrollbars();},failure:function(){AB(Al,A,[p]);}});}else{Aq.send();}}},setupScrollNodes:function Ac(){this.scrollNode=null;}}];if(!mstrApp.isSingleTier){Ab.splice(0,0,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7928,"Browse elements..."),onclick:function AZ(){this.parent.parent.parent.browse(this.parent.es);}});}return{alias:"es",children:Ab,updateList:function(Ag){AF(this.es,true,Ag,this.parent.parent.model.es,null);this.updateScrollbars();},updateColumnContainer:function Af(){var Ag=this.parent.parent;this.es.update();AA.call(Ag,x);}};},getFmNodeProps:function g(){var AZ=this;return{alias:"fm",children:[G({alias:"fm",fmPost:"",filter:false,isFirstFm:true})],updateColumnContainer:function Aa(){this.fm.update();var Ak=this.parent,Af=Ak.parent,Ae=Af.model,Ah=Ae&&Ae.fm,Aj=this.idx,Ai=Ae&&Ae.a,Ac=Af.disableElementsBrowsing,Ab=Ai&&Ac&&Ac(Ai);var Ag=(Ae.etWas&&Ae.etWas===b.AE)?AW:AJ,Ad=AJ;if(Ae.et===b.AE&&!Ab){Ad=AW;}if(Ag!==Ad||Ad===AJ){Ak.removeTrailingContainer(Aj);if(Ad===AJ&&Ah){Ak.addNextColumn(AZ.getFnNodeProps());}else{if(Ad===AW){Ak.addNextColumn(AZ.getEsNodeProps());}}}AA.call(Af,y);H.call(this);}};},getTargetNodeProps:function R(){var AZ=this;return{alias:"target",target:null,browseLink:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(11859,"Based On")},N({alias:"target",insertUnlistedValuesAt:0,makeObservable:true,hideIfEmpty:true,postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},onObjBrowsed:function(Ac){if(Ac.st===W.FILTER||Ac.t===AS.REPORT||Ac.t===AS.PROMPT){this.parent.parent.parent.onOK();}},update:function Ab(){var Ad=this.parent.parent.parent,Ae=Ad.model,Ah=Ad.targetsLastMod,Ai=Ae&&Ae.et;if(this.lastModel!==Ae||this.targetsLastMod!==Ah){this.lastModel=Ae;this.targetsLastMod=Ah;var Ac=Ad.targets,Aj=Ad.ets;if(Aj&&Ac&&Ac.length){var Ag=Z(Ad.ets);Ac=K.filter(Ac,function(Ak){return Ag[Ak[AG]];});}var Af=Ae&&Ae[AD[Ai]];Q(this,true,AN.getSortedObjectsByTypeGroup(Ac),Af);this.parent.updateScrollbars();}}}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.target);}}],updateColumnContainer:function Aa(){this.target.update();var Ad=this.parent,Ae=Ad.parent,Af=Ae.model,Ah=Af&&Af.et,Ac=this.idx,Ag=this.next;this.browseLink.set("visible",Ae.objectBrowsingEnabled);if(Ah){switch(Ah){case b.AQ:case b.AL:case b.AC:case b.AE:if(Af.a&&!(Ag&&Ag.fm)){this.parent.insertAndRemoveTrailing(Ac,AZ.getFmNodeProps());}break;case b.MQ:case b.MC:if(Af.m&&!(Ag&&Ag.fn)){this.parent.insertAndRemoveTrailing(Ac,AZ.getFnNodeProps());}break;case b.R:case b.F:case b.XML:this.parent.removeTrailingContainer(Ac);break;}}Ag=this.next;if(Ag){Ag.updateColumnContainer();}}};}});var X=mstrmojo.rw.ConditionWalkProvider;X.updateOkBtn=F;X.setTip=AA;X.getChildJSON=N;X.updateList=Q;X.fmJson=G;X.cstJson=I;}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Label","mstrmojo.array","mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.condTx.CommonComponent","mstrmojo.condTx.ActionExprTree");mstrmojo.requiresDescs(3397,5893,7978,7979);var H=mstrmojo.array,G=mstrmojo.condTx.CommonComponent,D=G.ACTION_TYPE,I=G.ACTION_ITEMS;function J(M,N){var O=new mstrmojo.ui.menus.MenuConfig();O.hostId=N.id;O.hostElement=N.actionNode;O.isHostedWithin=false;O.alignment={host:4,popup:1};H.forEach(M,function(P){O.addMenuItem(P.n,"",function(){N.set("actionType",P.v);});});return O;}mstrmojo.condTx.ActionRow=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.condTx.ActionRow",markupString:'<div id="{@id}" class="mstrmojo-ConditionTXN-ActionRow cf {@cssClass}" style="{@cssText}" mstrAttach:click><div class="reserved"></div><div class="target"></div><div class="action"></div><div class="container"></div><div class="menu"></div><div class="delete"></div></div>',markupSlots:{targetNode:function K(){return this.domNode.children[1];},actionNode:function K(){return this.domNode.children[2];},containerNode:function B(){return this.domNode.children[3];},menuNode:function C(){return this.domNode.children[4];},deleteNode:function F(){return this.domNode.children[5];}},action:null,idx:null,editor:null,model:null,editable:true,postBuildRendering:function A(){var N=this,R=this.editable,O=N.action,M=O.actionType||D.DEFAULT,Q=O.target,P=O.expr;N.actionNode.innerHTML=I[M].n;N.targetNode.innerHTML=Q&&Q.n||"";if(Q&&Q.n){mstrmojo.css.addClass(N.containerNode,"hasTarget");}N.destroyChildren(false);N.addChildren([{scriptClass:"mstrmojo.condTx.ActionExprTree",alias:"exprTree",editor:N.editor,model:N.model,editable:R,items:[P]}]);return this._super();},onactionTypeChange:function E(){this.actionNode.innerHTML=I[this.actionType].n;},onclick:function L(M){var P=this,O=P.editor,Q=M.getTarget(),N=P.model;if(Q===P.deleteNode){N.deleteAction(P.action);}else{if(Q===P.menuNode){var R=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"mstrmojo-ConditionTXN-Menu"});R.hostId=P.id;R.hostElement=P.menuNode;R.isHostedWithin=false;R.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"",function(){N.duplicateAction(P.idx);});R.addMenuItem(mstrmojo.desc(5893,"New Condition"),"",function(){P.exprTree.newCondition(null);});P.openPopup(R.newInstance());}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.array","mstrmojo.hash","mstrmojo.registry","mstrmojo.css","mstrmojo.AjaxCall","mstrmojo._CanValidate","mstrmojo.ValidationTextBox","mstrmojo.condTx.CommonComponent","mstrmojo.rw.ConditionWalkProvider");mstrmojo.requiresDescs(308,547,2200,5225,8191,11900,12300,13206);var B=mstrmojo.rw.ConditionWalkProvider,G=B.getChildJSON,f=B.updateList,H=B.setTip,U=B.fmJson,X=B.cstJson,P=mstrmojo.expr,I=P.ET,Q=P.FN,R=P.ET2TGT,n=P.TP,s=P.DTP,d=P.DTP2FN_DTP,b=mstrmojo.array,V=mstrmojo.hash,Z=mstrmojo.css,C=mstrmojo.registry,l=mstrmojo.validation,o=l.TRIGGER,N=mstrmojo.condTx.CommonComponent,i=N.NODE_TYPE,u=N.ACTION_TYPE,L=N.SOURCE_CONTEXT,c=N.CTXN_FNS,J=N.ALIS;var k={};k[I.MQ]={key:"metricFns",def:P.METRIC_FNS};k[I.MC]={key:"metricFns",def:P.METRIC_FNS};k[I.AQ]={key:"formFns",def:P.FORM_FNS};k[I.AL]={key:"formFns",def:P.FORM_FNS};k[I.AC]={key:"formFns",def:P.FORM_FNS};k[I.AE]={key:"elemFns",def:P.ELEM_FNS};var T="dummy",r={did:"idSelect",v:"idSelect",n:mstrmojo.desc(547,"Select"),t:T,css:"unselectable"},j={did:"idWait",v:"idQualification",n:mstrmojo.desc(5225,"Qualification"),t:T,css:"unselectable"};var q=mstrmojo.desc(11900,"Define a condition."),p=mstrmojo.desc(13206,"Enter a value or choose an element from the list. When done, press ## button.").replace("##",'"√"');var a=0,h=1;function x(z,y){var AA=y+P.FN_SEP+z;return(z!=null)?{did:AA,n:AA}:undefined;}function v(y,AA){var z;if(AA){switch(R[y.et]){case"a":z=AA[I.AC];break;case"m":z=AA[I.MC];break;default:z=false;break;}}else{z=true;}return z&&P.fn_AC_MC(y&&y.fn);}function D(AA,z){var y=AA.model||{},AB=y.fn;return(AB!=null)&&((y.et===I.MQ)||(y.et===I.MC)||(y.et===I.AQ)||(y.et===I.AL)||(y.et===I.AC))&&(P.fnCstCount(AB,y.fnt)>z);}var w={};w[s.DATE]=1;w[s.TIME]=1;w[s.TIMESTAMP]=1;function W(y,AD,AH,AF,AG){var AC=AD.nodeKey,AB=y.fieldGroups||{},z=y.templates||{},AI=function(AL){var AN=[],AJ=function(AO){return !AH||(AH&&AO.rptId);},AM=function(AP){var AO=AP.fields||[],AQ=[];b.forEach(AO,function(AR){if((!AH||(AH&&AR.edt))&&AR.dtp){AR.nk=AR.nk||AP.nk;AQ.push(AR);}});return AQ;},AK=function(AO){switch(AG){case L.IN:return(AO.nk===AL&&AJ(AO));case L.EXCEPT:return(AO.nk!==AL&&AJ(AO));default:return AJ(AO);}};V.forEach(AB,function(AO){if(AK(AO)){AN=AN.concat(AM(AO));}});return AN;},AA=function(){var AL=[],AJ=function(AM){return !AH||(AH&&AM.rptId);},AK=function(AN){var AM=[];b.forEach(AN.mxs||[],function(AO){if(!AH||(AH&&AO.edt)){AO.nk=AO.nk||AN.nk;AM.push(AO);}});return AM;};V.forEach(z,function(AM){if(AJ(AM)){AL=AL.concat(AK(AM));}});return AL;};var AE=AI(AC);if(AF){AE=AE.concat(AA());}return AE;}function g(z){var y=z.model;y&&z.okBtn.set("visible",!!y.completed);}function t(){var AB=this.parent,z=AB.parent.parent,AA=(this.isValid&&this.isValid())||(!this.isValid&&!mstrmojo.string.isEmpty(this.value)),y=z.model;if(!z){return ;}if(!this.updating&&AA){this.updating=true;if(y){y.edit(AB.alias,{v:this.value,dtp:this.dtp,isCst:true});}this.updating=false;}g(z);}function Y(y){var AB=y.model,AF=AB&&AB[R[AB.et]]&&AB[R[AB.et]]["did"],AA=AB&&AB.fm,AC=P.fn_AC_MC(AB&&AB.fn),AG=false;if(this._lastTargetId!==AF){this._lastTargetId=AF;AG=true;}if(this.lastTargetForm!==AA){this.lastTargetForm=AA;AG=true;}if(this.lastFnTp!==AC){this.lastFnTp=AC;AG=true;}if(AG){var AD=this.items.slice(0,this.preLen);if(!AC){this.clearSelect();this.set("items",AD);}else{var AH=(AB&&(AB.et===I.MQ||AB.et===I.MC)),z=y.target&&y.target.nodeKey,AE=z&&y.source&&y.source.templates&&y.source.templates[z];srcItems=AE?(AH?AE.mxs:AE.atts):[];if(!AH){srcItems=b.filter(srcItems,function(AJ){var AI=AJ.fms;return !(AJ.did===AF&&AI.length===1&&AI[0].did===AA.did);});}this.set("items",AD.concat(srcItems));}}}function F(AR,AG){AR.updating=true;var AC=AR.parent.parent.parent,AJ=AC.model||{},AP=(AJ.et!==I.XML)?D(AC,AG):((AJ.tx||AJ.exp)&&AJ.fn);if(AP){var AB=AJ.cs,AO=AB&&AB[AG],AF=AO&&AO.v,AD;Y.call(AR,AC);switch(AJ.et){case I.MQ:case I.MC:AD=P.METRIC_DTP;break;case I.AQ:case I.AC:case I.AE:AD=AJ.fm&&AJ.fm.dtp;break;case I.AL:AD=AJ.fm&&AJ.fm.dtp;AF=[];for(var AK=0,AM=AB&&AB.length;AK<AM;AK++){AF.push(AB[AK].v);}AF=AF.join(mstrConfig.listSep);break;}AD=AD||s.CHAR;var AH=P.fn_List(AJ.fn,AJ.fnt),AL=w[AD],AN=AL&&!AH;var z=AR.ctxtBuilder,y=z&&z.itemWidgets,AQ=AL?(AN?AR.calIndex:AR.dtxtIndex):AR.txtIndex,AI=y&&y[AR.bwIndex],AA;for(var AK=0,AM=AR.preLen-1;AK<AM;AK++){AA=y[AK];if(AK==AQ){AA.set("dtp",AD);AA.set("isList",AH);AA.set("value",AF);AA.set("visible",true);try{if(AR.alias!=="c1"){AA.focus&&AA.focus();}}catch(AE){}if(AA.clearValidation){AA.clearValidation();}}else{AA.set("visible",false);}if(AH){AA.set("tooltip",mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep));}else{AA.set("tooltip","");}}if(AI){AI.set("visible",AC.objectBrowsingEnabled&&v(AJ,AC.ets));}switch(AJ.et){case I.AQ:case I.AL:case I.MQ:if(AO&&AO.p){AR.set("selectedItem",AO.p);}else{AR.set("selectedIndex",AQ);}break;case I.MC:case I.AC:AR.set("selectedItem",AJ[R[AJ.et]+(2+AG)]);break;}}AR.updating=false;}function E(AA,y,z){return function(){var AD=this;return{alias:AA,children:[{scriptClass:"mstrmojo.Label",cssClass:"filter",visible:!!y,text:mstrmojo.desc(2200,"Filter on")},X({alias:AA,cstIndex:0,insertUnlistedValuesAt:0,allowUnlistedValues:true,makeObservable:true,hideIfEmpty:true,expended:false,itemFunction:e,update:function(AO){var Ah=this,AP=this.parent.parent.parent,AJ=AP.model,AT=AP.actionType,Aj=AP.target,AX=AP.source,AY,Ac,AU=[];if(this.lastModel!==AJ||AO){this.lastModel=AJ;var Ai=Aj.nodeType,Ac=this.items.slice(0,this.preLen);if(i.TEMPLATE_UNIT_CONTROL===Ai&&u.DISABLE===AT){var AL=function(Al){var Am=AX.templates||{},An=Am[Al],Ak=[];if(An){Ak=Ak.concat(An.atts||[]);Ak=Ak.concat(An.mxs||[]);}b.forEach(Ak,function(Ao){Ao.p=Ao.p||Al;});return Ak;},AR=!!(AA===J.FILTERON),AW=W(AX,Aj,AR,false,L.ALL),Ag=AJ&&AJ.et;if(AA===J.FILTERON){AU=AU.concat(AL(Aj.nodeKey));}if(!this.expended&&AA===J.FILTERON&&AW.length>0){this.parent.SEM.set("visible",true);}if(AA!==J.FILTERON||this.expended){AU=AU.concat(AW);}AY=AJ&&AJ[AA===J.FILTERON?((Ag&&Ag>1)?R[Ag]:"tx"):"tx2"];}else{var AN=(Ai===i.TEXT_FIELD)&&!this.expended,AG=(Ai===i.TEXT_FIELD)?L.IN:L.ALL,AR=!!(AA===J.FILTERON),AW;AU=AU.concat(W(AX,Aj,AR,false,AG));if(Ai===i.TEXT_FIELD){AW=W(AX,Aj,AR,false,L.EXCEPT);if(this.expended){AU=AU.concat(AW);}}AY=AJ&&AJ[AA===J.FILTERON?"tx":"tx2"];if(AN&&AW&&AW.length>0){this.parent.SEM.set("visible",true);}}if(AY&&!AY.did){AY.did=AY.nk+AY.fk;}Ac=Ac.concat(AU);f(this,true,Ac,AY);}if(z){var AQ=(AJ.tx&&AJ.tx.dtp)||P.DTP.CHAR,AV=P.fn_List(AJ.fn,AJ.fnt),Ab=w[AQ],Ad=Ab&&!AV,AI=Ah.ctxtBuilder,AH=AI&&AI.itemWidgets,Af=Ab?(Ad?Ah.calIndex:Ah.dtxtIndex):Ah.txtIndex,AM=AJ.cs,Ae=AM&&AM[0],AS=Ae&&Ae.v,AK;for(var AZ=0,Aa=Ah.preLen-1;AZ<Aa;++AZ){AK=AH[AZ];if(AZ==Af){AK.set("dtp",AQ);AK.set("isList",AV);AK.set("value",AS);AK.set("visible",true);AK.focus&&AK.focus();if(AK.clearValidation){AK.clearValidation();}}else{AK.set("visible",false);}}}var AF=AJ&&AJ[AA===J.FILTERON?"exp":"exp2"];this.parent.ADV.set("selected",AF);if(AF){this.clearSelect();}this.parent.updateScrollbars();}}),{scriptClass:"mstrmojo.Label",alias:"SEM",cssClass:"mstrmojo-walkstep-label active",text:mstrmojo.desc(12300,"See More..."),visible:false,onclick:function AC(){this.set("visible",false);var AF=this.parent[AA];AF.set("expended",true);AF.update(true);}},{scriptClass:"mstrmojo.Label",alias:"ADV",cssClass:"mstrmojo-walkstep-label active",text:mstrmojo.desc(12301,"Advanced Expression"),onselectedChange:function AB(){Z.toggleClass(this.domNode,"selected",this.selected);},onclick:function AC(){var AI=this.parent.parent.parent,AJ=AI.model,AL=AI.target,AK=AI.source,AH=AA===J.FILTERON,AG=!!AH,AF={items:W(AK,AL,AG,true,L.ALL),expr:AJ[AH?"exp":"exp2"],prop:AA};AI.editor.openAdvEditor(AF,AI);}}],updateColumnContainer:function AE(){if(!this.parent){return ;}this[AA].update();var AG=this.parent,AH=AG.parent,AI=AH.model,AK=(AI.et!==I.XML),AF=this.idx,AJ=this.next;if(AA===J.FILTERON&&AK&&AI.a&&!(AJ&&AJ.fm)){this.parent.insertAndRemoveTrailing(AF,AD.getFmNodeProps());}else{if((AA===J.FILTERON&&(AI.tx||AI.exp||(AK&&AI.m)))&&!(AJ&&AJ.fn)){this.parent.insertAndRemoveTrailing(AF,AD.getFnNodeProps());}}AJ=this.next;if(AJ){H.call(AH,q);AJ.updateColumnContainer();}}};};}function e(AA,y,AB){var z=AA.cfg;if(z){z.data=AA;z.parent=AB;return C.ref(z);}z=new mstrmojo.Label({text:AA.n||"&nbsp;",cssClass:"dial-item "+(AA.t?("t"+AA.t):""),title:AA.tn||""});z.markupMethods.onselectedChange=function(){Z.toggleClass(this.domNode,["selected"],this.selected);};z.data=AA;z.parent=AB;return z;}mstrmojo.condTx.ConditionWalkProvider=mstrmojo.declare(mstrmojo.rw.ConditionWalkProvider,null,{scriptClass:"mstrmojo.condTx.ConditionWalkProvider",getFilterOnProps:E(J.FILTERON,true),getFnNodeProps:function S(){var y=this;return{alias:"fn",children:[U({alias:"fn",allowUnlistedValues:false,update:function(){var AG=this.parent.parent.parent,AC=AG.model||{},AB=x(AC.fn,AC.fnt||1),AJ;if(AC.et===I.XML){this.lastEt=AC.et;f(this,true,c,AB);}else{var AH=AC.et,AI=false,AF;switch(AH){case I.AE:AI=!!AC.a;break;case I.AQ:case I.AC:case I.AL:AI=!!(AC.fm&&AC.fm.did);AF=AI?AC.fm.dtp:null;break;case I.MQ:case I.MC:AI=!!AC.m;AF=AI?P.METRIC_DTP:null;break;}if(AI){var AK=d[AF]||0;if((this.lastEt!==AH)||(this.lastFnDtp!==AK)){this.lastEt=AH;this.lastFnDtp=AK;var AE=AH?k[AH]:null,AD=AE&&AE.key;AJ=(AD&&AG[AD])||AE.def||[];if(typeof (AJ)==="object"){AJ=AJ[AK]||AJ["*"];}}}var AA=AJ&&b.filter(AJ,function(AL){return AL.tp!=2&&AL.tp!=3;});f(this,AI,AA,AB);this.parent.updateScrollbars();}}})],updateColumnContainer:function z(){if(!this.parent){return ;}this.fn.update();var AA=this.parent,AB=AA.parent,AC=AB.model,AF=AC&&AC.fn,AG=(AC.et!==I.XML),AE=this.next;if(AF&&(AF===Q.IS_NULL||AF===Q.IS_NOT_NULL)){AA.removeTrailingContainer(this.idx);}else{if(AF&&(AF===Q.BETWEEN||AF===Q.NOT_BETWEEN||AG)&&!(AE&&AE.c0)){AA.insertAndRemoveTrailing(this.idx,y.getC0NodeProps());}else{if(AF&&!AG&&!(AF===Q.BETWEEN||AF===Q.NOT_BETWEEN)&&!(AE&&AE.s1)){var AD=E(J.SOURCE1,false,true);AA.insertAndRemoveTrailing(this.idx,AD.call(y));}}}AE=this.next;if(AE){H.call(AB,p);AE.updateColumnContainer();}}};},getFmNodeProps:function K(){var y=this;return{alias:"fm",children:[U({alias:"fm",fmPost:"",filter:false,update:function(){var AI=this.parent.parent,AE=AI.parent,AC=AE.model,AA=AI.fo.fo.selectedItem,AG=!!AA,AF,AB;if(AG){switch(AC.et){case I.AQ:case I.AL:case I.AC:AF=AC.fm;break;case I.AE:AF=x(AC.fn,1);break;}if(this.lastAttrId!==AA.did){this.lastAttrId=AA.did;AB=[];if(y.et!==I.AC){AB.push(r);var AD=k[I.AE],AH=AD&&AD.key;AB=AB.concat((AH&&AE[AH])||AD.def||[]);}AB.push(j);AB=AB.concat(AA.fms||[]);}}f(this,AG,V.clone(AB),AF);}})],updateColumnContainer:function z(){if(!this.parent){return ;}this.fm.update();var AL=this.parent,AF=AL.parent,AE=AF.model,AI=AE&&AE.fm,AH=AE&&AE.fn,AK=this.idx,AD=this.next,AJ=AE&&AE.a,AB=AF.disableElementsBrowsing,AA=AJ&&AB&&AB(AJ);var AG=(AE.etWas&&AE.etWas===I.AE)?h:a,AC=a;if(AE.et===I.AE&&!AA){AC=h;}if(AG!==AC||AC===a){AL.removeTrailingContainer(AK);if(AC===a&&AI){H.call(AF,q);AL.addNextColumn(y.getFnNodeProps());}else{if(AC===h){H.call(AF,p);AL.addNextColumn(y.getEsNodeProps());}}}AD=this.next;if(AD){AD.updateColumnContainer();}}};},getC0NodeProps:function M(){var y=this;return{alias:"c0",children:[X({alias:"c0",cstIndex:0,itemFunction:e,update:function(){F(this,this.cstIndex);}}),{scriptClass:"mstrmojo.Label",alias:"btwn",cssClass:"btwn",text:mstrmojo.desc(308,"and"),visible:false},X({alias:"c1",cstIndex:1,itemFunction:e,update:function(){F(this,this.cstIndex);},visible:false})],updateColumnContainer:function z(){if(!this.parent){return ;}this.c0.update();var AC=this.parent,AE=AC.parent.model,AG=AE&&AE.fn,AD=AG===Q.BETWEEN||AG===Q.NOT_BETWEEN,AB=AG===Q.EQUAL||AG===Q.NOT_EQUAL||AG===Q.GREATER||AG===Q.GREATER_EQUAL||AG===Q.LESS||AG===Q.LESS_EQUAL,AA=this.idx,AF=this.next;this.btwn.set("visible",AD);this.c1.set("visible",AD);if(AD){this.c1.update();}if(AE.a2&&AB){if(!(AF&&AF.fm2)){AC.insertAndRemoveTrailing(AA,y.getFm2NodeProps());}}else{AC.removeTrailingContainer(AA);}AF=this.next;if(AF){AF.updateColumnContainer();}}};},getFm2NodeProps:function O(){return{alias:"fm2",children:[U({alias:"fm2",fmPost:2,update:function(){var AF=this.parent.parent.parent,AA=AF.model,z=AA&&AA.a,AE=AA&&AA.a2,AG=AA&&AA.fm,AC=AA&&AA.fm2,AB=!!z,AD;if(AB){AD=[];AD.push(j);if(AE&&AE.fms){AD=AD.concat(AE.fms);}if(z.did===AE.did){AD=b.filter(AD,function(AH){return !(AG.did===AH.did);});}}f(this,AB,AD,AC);}})],updateColumnContainer:function y(){if(!this.parent){return ;}this.fm2.update();var z=this.next;if(z){z.updateColumnContainer();}}};}});var A=mstrmojo.condTx.ConditionWalkProvider;A.updateOkBtn=g;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.hash","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._HasPopup","mstrmojo.ui.ColumnWalk","mstrmojo.Button","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ConditionModel","mstrmojo.rw.ConditionWalkProvider");var P=mstrmojo.Widget,H=mstrmojo.array,E=mstrmojo.dom,M=mstrmojo.hash,A=mstrmojo.mstr.EnumNodeDimty,S=mstrmojo.rw.ConditionWalkProvider.updateOkBtn,I=mstrmojo.rw.ConditionWalkProvider.setTip;var C=mstrmojo.desc(11899,"Select a dataset object.");var K=H.hash([A.NodeDimtyOutputLevel]);function D(){var T=this.model;if(T){if(!T.attachEventListener){mstrmojo.hash.make(T,mstrmojo.ConditionModel,{});}T.attachEventListener("edit",this.id,"onmodeledit");}}function L(U,T){if(T&&T.detachEventListener){T.detachEventListener("edit",U.id,"onmodeledit");}}function N(Y,T){var W=T,X=[],V=[],U=[],Z=false;M.forEach(W,function(a){X=X.concat(a.att.filter(function(b){return b.did===Y;}));});Z=X[0]&&X[0].da;X.forEach(function(a){V=V.concat(a.fs||[]);});V.forEach(function(a){if((a.obf||Z)&&U.filter(function(b){return b.did===a.fid;}).length===0){U.push({did:a.fid,dtp:mstrmojo.expr.mapBaseFormTypeToDataType(a.bftp),n:a.fnm,t:a.t});}});return U;}mstrmojo.rw.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._HasPopup],{scriptClass:"mstrmojo.rw.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},walkNode:function(){return this.domNode.children[1];},applyNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function J(){P.visibleMarkupMethod.call(this);if(this.visible){this.initWalk();}},onheightChange:P.heightMarkupMethod,onwidthChange:P.widthMarkupMethod},layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",applyNode:"auto"},xt:true},editor:undefined,columnWalk:undefined,tip:undefined,walkProvider:null,objectBrowsingEnabled:true,postCreate:function B(){if(this._super){this._super();}if(!this.walkProvider){this.walkProvider=mstrmojo.insert(mstrmojo.rw.ConditionWalkProvider);}},initWalk:function O(){var T=this.columnWalk,U=this.walkProvider;I.call(this,C);T.removeTrailingContainer(-1);T.addNextColumn(U.getTargetNodeProps());T.target.updateColumnContainer();S(this);},updateBrowseElementsParams:function(W,V){W.attributeID=V.did;W.otp=V.t||12;var U=this.editor,T=U&&U.onUpdateBrowseElementsParams;if(T){T.call(U,W,V);}},children:[{scriptClass:"mstrmojo.ui.ColumnWalk",alias:"columnWalk",slot:"walkNode",height:"333px",width:"750px"},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",title:mstrmojo.desc(2399,"Cancel"),ignoreLayout:true,onclick:function(){var T=this.parent;if(T.close){T.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",title:mstrmojo.desc(2397,"OK"),onclick:function(){var T=this.parent;if(T.onOK){T.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:C,ignoreLayout:true}],eb:{scriptClass:"mstrmojo.Editor",cssClass:E.isIE7?"mstrmojo-ElementsEditorIE7":"mstrmojo-ElementsEditor",title:mstrmojo.desc(6149,"Select Elements"),help:"element_browser_dialog_box.htm",children:[{scriptClass:"mstrmojo.ElementsBrowser",alias:"browser",onUpdateBrowseElementsParams:function(U){var T=this.parent.opener;T.updateBrowseElementsParams(U,T.model.a);}},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-WebButton hot",cssText:"width: 66px;",onclick:function(){var T=this.parent.parent,U=T&&T.opener;if(U){U.onEBSelect();U.closePopup();}}},{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-WebButton",cssText:"min-width: 66px; margin-left: 11px;",onclick:function(){var T=this.parent.parent,U=T&&T.opener;if(U){U.closePopup();}}}]}]},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,upButtonVisible:true,scrollableIncFetch:true,showCompletePath:false,closeable:false,closeOnSelect:false,browsableTypes:"3,4,8,10,12,256",includeObjectDesc:true,quickSearch:true,minSearchLength:1}]},_set_model:function R(W,T){var U=this.model,V=(T!==U);if(V){L.call(this,U);T.dimtyTypes=this.dimtyTypes||K;this.model=T;D.call(this,T);if(this.hasRendered&&this.visible){this.columnWalk.target.updateColumnContainer();}}return V;},onmodeledit:function G(T){this.columnWalk[T.prop==="c1"?"c0":T.prop].updateColumnContainer();S(this);},browse:function F(V){var X=this.parent.editorNode,W=function(Z,b){var Y=mstrmojo.dom.position(Z,true),a=mstrmojo.dom.position(b,true);return{x:Y.x+Y.w,y:a.y};},T=this.columnWalk,U=this.walkProvider;switch(V&&V.alias){case"target":case"dmy":U.browseObjs(this,V,W(V.alias==="target"?T.target.domNode:this.dmyNode,X));break;case"c0":case"c1":U.browseObjs(this,V,W(T.c0.domNode,X));break;case"es":U.browseEs(this,V,W(T.es.domNode,X));break;}},onOBSelect:function(X){var V=this.ob.browser,Z=V.target;this.closePopup();var U=this.targets,Y=Z.itemIdField,W=U||[],T=H.find(U,Y,X[Y]);if(T===-1){W.push(X);this.targets=W;this.targetsLastMod=new Date();this.raiseEvent({name:"updateTargets",targets:this.targets});}Z.setSelectedItems([X],Z.multiSelect);if(Z.onObjBrowsed){Z.onObjBrowsed(X);}},onEBSelect:function(){var U=this.eb.browser,W=this.columnWalk.es.es;W.set("selectedIndices",{});var T=W.items,V=[];H.forEach(U.selectedItems||[],function(Y){if(H.find(W.items,"v",Y.v)<0){V.push(Y);}});var X=W.insertUnlistedValuesAt||0;if(X<0){X=T.length;}W.set("items",T.slice(0,X).concat(V).concat(T.slice(X)));W.setSelectedItems(U.selectedItems,false);},destroy:function Q(U){var T=this.walkProvider;if(T&&T.destroy){this.walkProvider.destroy();}this._super(U);}});mstrmojo.rw.ConditionWalk.getAttForms=N;}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.expr","mstrmojo.rw.ConditionWalk","mstrmojo.mstr.EnumNodeDimty","mstrmojo.condTx.ConditionWalkProvider","mstrmojo.condTx.ConditionModel");mstrmojo.requiresDescs(12304);var A=mstrmojo.rw.ConditionWalkProvider.setTip,G=mstrmojo.condTx.ConditionWalkProvider.updateOkBtn,J=mstrmojo.array,K=mstrmojo.css,P=mstrmojo.mstr.EnumNodeDimty,H=mstrmojo.condTx.CommonComponent,I=mstrmojo.expr,F=I.TP,M=H.NODE_TYPE,Q=J.hash([P.NodeDimtyUnspecified,P.NodeDimtyNone]);function L(){var S=this.editor,R=this.actionRow;if(R){this.removeChildren(R);}this.set("visible",false);if(S&&S.onConditionWalkClose){S.onConditionWalkClose();}}mstrmojo.condTx.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,null,{scriptClass:"mstrmojo.condTx.ConditionWalk",cssClass:"mstrmojo-TransactionEditor-ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk {@cssClass}" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},walkNode:function(){return this.domNode.children[1];},applyNode:function(){return this.domNode.lastChild;}},editor:null,condition:null,objectBrowsingEnabled:false,dimtyTypes:Q,postCreate:function N(){if(!this.walkProvider){this.walkProvider=mstrmojo.insert(mstrmojo.condTx.ConditionWalkProvider);}this._super&&this._super();},initWalk:function E(){if(this.visible){var R=this.columnWalk,S=this.walkProvider;A.call(this,mstrmojo.desc(12304,"Select one editable element..."));R.removeTrailingContainer(-1);R.addNextColumn(S.getFilterOnProps());R.fo.updateColumnContainer();G(this);}},_set_model:function C(S,R){if(R&&!R.attachEventListener){if(!R.dimtyTypes){R.dimtyTypes=this.dimtyTypes;}mstrmojo.hash.make(R,mstrmojo.condTx.ConditionModel,{});}return this._super(S,R);},onmodeledit:function B(R){this.columnWalk[R.prop==="c1"?"c0":R.prop].updateColumnContainer();if(R.value&&R.value.t==F.FUNCTION){var S=this.model,T=this.target,U=R.prop;m={items:R.value.m,expr:S[(U===H.ALIS.FILTERON)?"ex":"ex2"],prop:U};this.editor.openAdvEditor(m,this);}G(this);},onOK:function D(){var R=this.editor;R.model.setConditionData(this.condition,this.model.get());L.call(this);R.toggleButtonStatus(true);},close:function O(){var U=this.editor,W=this.condition,S=W&&W.tree.parent,R=S&&S.exprTree;if(W&&W.isEmpty()){W.del();}var T=R&&R.items,V=T&&T.length;if(S&&!V){U&&U.model.deleteAction(S.action);}L.call(this);U&&U.toggleButtonStatus(true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.css","mstrmojo.Editor","mstrmojo.Box","mstrmojo.Button","mstrmojo.fx","mstrmojo.expr","mstrmojo.array","mstrmojo.ui._HasScroller","mstrmojo.DropDownList","mstrmojo.condTx.ActionRow","mstrmojo.condTx.ActionModel","mstrmojo.condTx.ConditionWalk","mstrmojo.condTx.CommonComponent","mstrmojo.condTx.AdvancedExpression");mstrmojo.requiresDescs(221,1442,4787,6016,12305,12306);var U=mstrmojo.hash,Y=mstrmojo.css,X=mstrmojo.expr,b=mstrmojo.array,G=X.ET,P=X.BRANCH_FNS,T=mstrmojo.Button.newWebButton,H=mstrmojo.condTx.CommonComponent,d=H.ACTION_TYPE,I=H.NODE_TYPE;function J(i){var o=this,h=o.content.rowPanel,q=o.content.newAction.targetList,l=(q.options&&q.options[q.idx||0])||{},g=h.children,p=(g&&g.length)||0,n=o.model,k=n.actions,j={actionType:i,target:l,expr:{et:14,fn:19}};if(!k){k=n.actions=[];}k.push(j);h.addChildren([{scriptClass:"mstrmojo.condTx.ActionRow",action:j,editor:o,model:n,idx:p}]);h.children[p].exprTree.newCondition(null);}function L(){var o=this,l=o.target,n=o.content,k=o.model,h=k.actions,q=[],g=n.rowPanel,j=0,p=function(r){var s=l&&l.txnObjs||[],i=b.find(s,"ctlKey",r);return(i>-1)?s[i].n:"";};if(h){U.forEach(h,function(i){if(l&&l.nodeType===I.TEMPLATE_UNIT_CONTROL&&i.target&&!i.target.n){i.target.n=p(i.target.ctlKey);}q.push({scriptClass:"mstrmojo.condTx.ActionRow",action:i,editor:o,model:k,idx:j++});});}g.destroyChildren(false);g.addChildren(q);this.updateScrollbars();}function M(g){var h="";U.forEach(g,function(i){var j=[];for(var k in i){if(i[k]!=null){j.push(k+'="'+i[k]+'"');}}h+=("<ctl "+j.join(" ")+"/>");});h="<ctls>"+h+"</ctls>";return h;}function W(h){var k=this.model,j=k.actions,n=U.clone(this.target),l=this.messageID,p="",g=0,q=0,o=this;if(j){U.forEach(j,function(t){var v={nk:n.nodeKey,n:t.n,thact:t.actionType},u=H.getExprXml(t.expr),r=[],s;if(t.actionType!=d.HIDE){v.ck=n.ctlKey||t.ck||(t.target&&t.target.ctlKey);++g;v.ix=g;}else{++q;v.ix=q;if(n.fieldKey){v.fk=n.fieldKey;}}for(s in v){if(v[s]!=null){r.push(s+'="'+v[s]+'"');}}p+=("<threshold "+r.join(" ")+">"+u+"</threshold>");});}p="<thresholds>"+p+"</thresholds>";var i={taskId:"setConditionalTransaction",msgID:l,ntc:k.originNodeActionCount||0,ctc:M(k.originCtlActionCount),ftc:k.originFieldActionCount||0,nodeKey:n.nodeKey||"",ctlKey:n.ctlKey||"",fieldKey:n.fieldKey||"",thresholds:p};if(microstrategy&&microstrategy.updateManager){i.rwb=microstrategy.updateManager.getRWBState(true);}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(r){if(h){h(r);}},failure:function(r){var s=r.getResponseHeader("X-MSTR-TaskFailureMsg");mstrmojo.alert(s);}},i);}function c(l,h,i,p,g,k,n){var o={target:l,onEnd:function(){if(g){g();}},props:{}};o.props[h]={ease:k||mstrmojo.ease.linear,start:parseInt(i,10),stop:parseInt(p,10),suffix:"px"};o=U.copy(n,o);var j=new mstrmojo.fx.AnimateProp(o);j.play();}function E(i){var j,g,h=this;if(i){Y.toggleClass(this.domNode,"disable",false);j=0;g=300;}else{j=300;g=0;}c(this.domNode,"height",j,g,function(){if(!i){Y.toggleClass(h.domNode,"disable",true);}},null);}mstrmojo.condTx.ConditionTransactionEditor=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.condTx.ConditionTransactionEditor",cssClass:"mstrmojo-ConditionTXN",title:mstrmojo.desc(12306,"Transaction Conditions"),id:"mstrCTE",postBuildRendering:function Z(){this._super&&this._super();if(!this.model){this.set("model",mstrmojo.insert(mstrmojo.condTx.ActionModel));}},destroy:function e(h){var g=this.model;if(g&&g.destroy){g.destroy();}this._super(h);},onOpen:function F(){L.call(this);this.setRowPanelVisibility(true);},onClose:function D(){this.closeAdvEditor();if(this.content.conditionWalk){this.content.conditionWalk.close();}},openConditionWalk:function C(n,l){var i=this,j=i.content,h=j.conditionWalk,g=l.tree.parent,k=U.clone(g.action);k.expr=n;h.set("editor",i);var o=new mstrmojo.condTx.ActionRow({alias:"actionRow",slot:"conditionNode",idx:g.idx,action:k,editable:false,onclick:mstrmojo.emptyFn});h.addChildren(o);o.render();h.set("objectBrowsingEnabled",i.objectBrowsingEnabled);h.set("target",i.target);h.set("source",i.source);h.set("actionType",k.actionType);h.set("condition",l);h.set("model",U.clone(n));i.setRowPanelVisibility(false);Y.toggleClass(i.content.domNode,"no-overflow",true);h.set("visible",true);h.doLayout();i.toggleButtonStatus(false);this.updateScrollbars();},onConditionWalkClose:function N(){Y.toggleClass(this.content.domNode,"no-overflow",false);this.setRowPanelVisibility(true);},_set_model:function(i,g){var h=U.make(g,mstrmojo.condTx.ActionModel);this.model=h;if(h){h.attachEventListener("modelEdit",this.id,"onmodelEdit");L.call(this);}return true;},onmodelEdit:function O(){L.call(this);},onsourceChange:function V(){var i=this.source,g=i&&i.fieldGroups||{};U.forEach(g,function(k){var l=k.nk,j=k.fields||[];U.forEach(j,function(n){n.nk=n.nk||l;n.dn=n.dn||n.n;n.did=n.nk+n.fk;});});var h=i&&i.templates||{};U.forEach(h,function(l){var j=l.nk,p=l.n||"",o=l.atts||[],k=l.mxs||[];U.forEach(o,function(n){n.nk=n.nk||j;});U.forEach(k,function(n){n.nk=n.nk||j;n.dn=n.dn||(p+":"+n.n);});});},ontargetChange:function a(){var j=this.target;if(j.nodeType===I.TEMPLATE_UNIT_CONTROL){if(this.editorNode){Y.addClass(this.editorNode,"templateUnit");}else{Y.addWidgetCssClass(this,"templateUnit");}}else{if(this.editorNode){Y.removeClass(this.editorNode,"templateUnit");}else{Y.removeWidgetCssClass(this,"templateUnit");}}if(j.txnObjs){var k=j.txnObjs,h,g;for(h=0,g=k.length;h<g;h++){k[h].v=h;}}},setRowPanelVisibility:function B(h){var g=this.content;g.rowPanel.set("visible",h);g.newAction.set("visible",h);this.updateScrollbars();},openAndORPopup:function R(j,g){var h=new mstrmojo.ui.menus.MenuConfig();h.hostId=this.id;h.hostElement=g;h.isHostedWithin=false;var i=function i(q){var k=j,p=q.ctxt.did,o=p>21?true:null,n=p-(o?21:0);var l=k&&k.parent;if(l&&l.data&&l.data.et===G.ANDOR){l.edit(k,n,o);}else{var r=k&&k.data;if(r&&(r.not!==o)){r.not=o;k.paint();}}};h.addMenuItem(P[19],"",i,{did:19});h.addMenuItem(P[20],"",i,{did:20});h.addMenuItem(P["19_21"],"",i,{did:19+21});h.addMenuItem(P["20_21"],"",i,{did:20+21});this.openPopup(h.newInstance());},toggleButtonStatus:function A(g){b.forEach(this.buttonBar.children,function(h){h.set("enabled",g);});},openAdvEditor:function Q(h,g){var i=this.content,j=i.advExpr;j.set("host",g);j.set("model",h);i.conditionWalk.toggleVisibility(false);i.advExpr.toggleVisibility(true);i.advExpr.objBox.objList.updateScrollbars();},closeAdvEditor:function K(){var g=this.content,h=g.advExpr;h.set("host",null);h.set("model",null);g.conditionWalk.toggleVisibility(true);g.advExpr.toggleVisibility(false);},onUpdateBrowseElementsParams:function S(h){var g=this.source.bwElements||{};h.datasetID=h.attributeID&&g[h.attributeID]||"";h.messageID=this.messageID;h.templateNodeKey=this.target.nodeKey;},children:[{scriptClass:"mstrmojo.Widget",markupString:'<div class="rulesTitles"><div class="reserved"></div><div class="target">'+mstrmojo.desc(4787,"Target")+'</div><div class="action">'+mstrmojo.desc(6016,"Action")+'</div><div class="condition">'+mstrmojo.desc(12305,"Conditions")+"</div></div>"},{scriptClass:"mstrmojo.Box",cssClass:"content",alias:"content",children:[{scriptClass:"mstrmojo.Box",alias:"rowPanel",children:[]},{scriptClass:"mstrmojo.HBox",alias:"newAction",children:[{scriptClass:"mstrmojo.Label",alias:"newButton",cssClass:"link",text:"",onclick:function f(){var i=this.parent,g=i.actions,h=i.parent.parent;J.call(h,g.options[g.idx||0].v);}},{scriptClass:"mstrmojo.DropDownList",alias:"targetList",cssClass:"targetList",idx:0,bindings:{visible:function(){var g=this.parent.parent.parent.target;return g.nodeType===I.TEMPLATE_UNIT_CONTROL&&!g.ctlKey;},options:"this.parent.parent.parent.target.txnObjs"},onoptionsChange:function(){if(this.options){this.refresh();}}},{scriptClass:"mstrmojo.DropDownList",alias:"actions",cssClass:"actionList",idx:0,bindings:{options:function(){var j=this.parent.parent.parent.target,i=H.ACTION_CANDIDATES,h=j.nodeType,g=!!j.ctlKey;if(h===I.TEXT_FIELD&&!g){return[H.ACTION_ITEMS[2]];}return i[h];}},onoptionsChange:function(){if(this.options){this.refresh();}}}]},{scriptClass:"mstrmojo.condTx.ConditionWalk",alias:"conditionWalk",height:"300px",width:"750px",visible:false,toggleVisibility:E},{scriptClass:"mstrmojo.condTx.AdvancedExpression",alias:"advExpr",cssClass:"AdvancedExpression disable",height:"300px",width:"750px",toggleVisibility:E}]},{scriptClass:"mstrmojo.Box",alias:"buttonBar",slot:"buttonNode",children:[T(mstrmojo.desc(221,"Cancel"),function(){this.parent.parent.close();}),T(mstrmojo.desc(1442,"OK"),function(){var g=this.parent.parent;W.call(g,function(h){if(g.onsave){g.onsave(h);}g.close();});})]}]});}());