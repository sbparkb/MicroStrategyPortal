mstrAllObjectBrowserTreeImplScript=true;mstrAllObjectBrowserTreeImpl.prototype=new mstrTreeViewImpl();mstrAllObjectBrowserTreeImpl.prototype.searchNode=null;mstrAllObjectBrowserTreeImpl.prototype.selectedFolderNode=null;mstrAllObjectBrowserTreeImpl.prototype.searchNodeID=null;mstrAllObjectBrowserTreeImpl.prototype.addSearchNode=function(searchName,folderId,folderName,shref,browsePath){try{this.hideTreeWaitMessage();var srchDsc=(microstrategy.descriptors.getDescriptor("4506").replace("###",searchName)).replace("##",folderName);if(mstr&&mstr.utils&&mstr.utils.String){srchDsc=mstr.utils.String.escape4HTMLText(srchDsc);}if(!this.searchNode){this.searchNode=document.createElement("DIV");this.searchNode.id="obTreeSearchNodeDiv";this.searchNode.noWrap=true;var searchNodeLITag=document.createElement("LI");searchNodeLITag.did=this.searchNodeID;searchNodeLITag.multi="1";searchNodeLITag.folderId=folderId;searchNodeLITag.folderName=folderName;searchNodeLITag.href=shref;searchNodeLITag.browsePath=browsePath;searchNodeLITag.level="1";this.searchNode.appendChild(searchNodeLITag);var searchNodeSpanTag=document.createElement("SPAN");searchNodeLITag.appendChild(searchNodeSpanTag);searchNodeSpanTag.className="itemContainer";var searchNodeIconTag=document.createElement("SPAN");searchNodeIconTag.className="iconContainer search";searchNodeIconTag.appendChild(document.createElement("SPAN"));searchNodeSpanTag.appendChild(searchNodeIconTag);var searchNodeAnchorTag=document.createElement("a");searchNodeAnchorTag.innerHTML=srchDsc;searchNodeSpanTag.appendChild(searchNodeAnchorTag);this.elem.firstChild.appendChild(this.searchNode);}else{var searchNodeLITag=this.searchNode.firstChild;searchNodeLITag.folderId=folderId;searchNodeLITag.folderName=folderName;searchNodeLITag.href=shref;searchNodeLITag.browsePath=browsePath;var searchAnchorTag=searchNodeLITag.firstChild.firstChild.nextSibling;searchAnchorTag.innerHTML=srchDsc;if(this.searchNode.nextSibling){this.searchNode.parentNode.removeChild(this.searchNode.nextSibling);}}this.util_setTreeTargetState(this.searchNode,this.NODE_STATE_OPEN);this.searchNode.scrollIntoView(true);this.util_checkSelectedNodes(this.searchNode,this.elem);this.util_markNodeAsSelected(this.searchNode.firstChild,true);this.showTreeWaitMessage(this.searchNode,"afterEnd");}catch(err){microstrategy.errors.log(err);return false;}};mstrAllObjectBrowserTreeImpl.prototype.deleteSearchNode=function(){if(this.searchNode){var searchContainer=this.searchNode.parentNode;var searchResults=this.searchNode.nextSibling;if(searchContainer){searchContainer.removeChild(this.searchNode);if(searchResults){searchContainer.removeChild(searchResults);}}this.searchNode=null;}};mstrAllObjectBrowserTreeImpl.prototype.isSearchPath=function(path){if(path&&path.length&&path.length>0){var lastNode=path[path.length-1];return(lastNode.did==this.searchNodeID);}return false;};mstrAllObjectBrowserTreeImpl.prototype.util_markNodeAsSelected=function(oTarget,bDoNotClean,isInitialNodes){try{var paths=this.findFolderPaths(oTarget);if(!bDoNotClean){bDoNotClean=this.isSearchPath(paths);}if(this.parentBone&&this.parentBone.adjustAncestorsList&&this.parentBone.adjustUpButton&&!bDoNotClean&&!isInitialNodes){this.parentBone.adjustAncestorsList(paths);}if(!oTarget.getAttribute(microstrategy.HTMLATTR_OBJTYPE)){this.selectedFolderNode=oTarget;}if(!this.isSelectableParent(oTarget)||("e"==oTarget.getAttribute(microstrategy.HTMLATTR_OBJTYPE))){return ;}mstrTreeViewImpl.prototype.util_markNodeAsSelected.call(this,oTarget,bDoNotClean);}catch(err){microstrategy.errors.log(err);return false;}};mstrAllObjectBrowserTreeImpl.prototype.onreload=function(){try{mstrBoneImpl.prototype.onreload.call(this);var waitDiv=getElementById(this.DIV_TREE_WAIT_ID);if(waitDiv&&!waitDiv.hasChildNodes()){this.removeTreeWaitMessage();}else{if(waitDiv){oTarget=waitDiv.previousSibling;if(oTarget&&oTarget.firstChild&&oTarget.firstChild.did&&oTarget.firstChild.did==this.searchNodeID){oTarget.childNodes[0].className=this.CSS_CLASS_OPEN;}if(bIsW3C){waitDiv.style.height=getObjHeight(waitDiv.childNodes[0])+"px";}}}this.treeProcessing=false;this.hideTreeWaitMessage();}catch(err){microstrategy.errors.log(err);return false;}};mstrAllObjectBrowserTreeImpl.prototype.scrollSearchNodeIntoView=function(){if(!this.searchNode){this.searchNode=microstrategy.findChildrenWithAtt(this.elem,"div","id","obTreeSearchNodeDiv")[0];}this.elem.parentNode.scrollTop=this.searchNode.offsetTop;};mstrAllObjectBrowserTreeImpl.prototype.needDetectCtrlKey=function(){return false;};mstrAllObjectBrowserTreeImpl.prototype.findFolderPaths=function(oTarget){try{var ancestors=new Array();var tempNode=oTarget;if(oTarget&&this.isSelectableParent(oTarget)){ancestors.push(oTarget);}while(tempNode){var newNode=this.findParentTreeNode(tempNode);if(newNode&&this.isSelectableParent(newNode)){ancestors.push(newNode);}tempNode=newNode;}return ancestors;}catch(err){microstrategy.errors.log(err);return false;}};mstrAllObjectBrowserTreeImpl.ELE_FILTER_ATT_DELIM=",";mstrAllObjectBrowserTreeImpl.ITEM_SEPARATOR="~";mstrAllObjectBrowserTreeImpl.prototype.util_preProcessAnchor=function(oTarget,oAnchor){try{if(oTarget.getAttribute("browsePath")){return ;}var browsePath="";if("e"==oTarget.getAttribute(microstrategy.HTMLATTR_OBJTYPE)||"a"==oTarget.getAttribute(microstrategy.HTMLATTR_OBJTYPE)||"f"==oTarget.getAttribute(microstrategy.HTMLATTR_OBJTYPE)||this.isIncFetchInDataExplorer(oTarget)){var ancestors=this.findFolderPaths(oTarget);for(var i=0;i<ancestors.length;i++){var ancestor=ancestors[i];var objType=ancestor.getAttribute(microstrategy.HTMLATTR_OBJTYPE);if("e"==objType||"a"==objType){browsePath=mstrAllObjectBrowserTreeImpl.ITEM_SEPARATOR+encodeBrowsePathElement(ancestor.getAttribute("did"))+UNIT_SEPARATOR+browsePath;}if("hi"==objType||(!objType&&ancestor.firstChild.firstChild.className.contains("hi"))){browsePath=encodeBrowsePathElement(ancestor.getAttribute("did"))+browsePath;break;}if("f"==objType){browsePath=mstrAllObjectBrowserTreeImpl.ELE_FILTER_ATT_DELIM+encodeBrowsePathElement(ancestor.getAttribute("did"))+browsePath;}if(ancestor.did==this.searchNodeID){browsePath=ancestor.browsePath+browsePath;break;}}oTarget.setAttribute("browsePath",browsePath);oAnchor.href+=("&browsePath="+browsePath);}}catch(err){microstrategy.errors.log(err);return false;}};mstrAllObjectBrowserTreeImpl.prototype.isIncFetchInDataExplorer=function(treeNode){try{var result=false;if(treeNode.getAttribute("did")=="incrementalFetch"){var parentNode=this.findParentTreeNode(treeNode);if(parentNode&&("e"==parentNode.getAttribute(microstrategy.HTMLATTR_OBJTYPE)||"a"==parentNode.getAttribute(microstrategy.HTMLATTR_OBJTYPE)||"f"==parentNode.getAttribute(microstrategy.HTMLATTR_OBJTYPE)||(this.searchNodeID==parentNode.did))){result=true;}}return result;}catch(err){microstrategy.errors.log(err);return false;}};mstrAllObjectBrowserTreeImpl.prototype.isSelectableParent=function(treeNode){return(this.CSS_CLASS_LEAF!=treeNode.className||treeNode.did==this.searchNodeID);};function mstrAllObjectBrowserTreeImpl(id){this.inherits=mstrTreeViewImpl;this.inherits(id);delete this.inherits;return this;}