(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var $D=mstrmojo.dom,$S=mstrmojo.string,$A=mstrmojo.array;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:$D.isNSIE?"block":"table",DISPLAY_CELL:$D.isNSIE?"block":"table-cell",MINHEIGHT:$D.isIE6?"height":"minHeight",addClass:function addClass(el,s){if(el){if(s.constructor!==Array){s=[s];}var cls=el.className||"",start=" "+cls+" ",bAdded=false,len=s.length,i;for(i=0;i<len;i++){var c=s[i];if(!start.match(new RegExp("\\s"+c+"\\s"))){cls+=" "+c;bAdded=true;}}if(bAdded){el.className=$S.trim(cls);}}return el;},removeClass:function removeClass(el,s){if(!el){return ;}if(s.constructor!==Array){s=[s];}var cls=" "+(el.className||"")+" ",len=s.length,i;for(i=0;i<len;i++){cls=cls.replace(new RegExp("\\s"+s[i]+"\\s","g")," ");}el.className=$S.trim(cls);},addWidgetCssClass:function addWidgetCssClass(widget,classes){var origClasses=widget.cssClass,existing=(origClasses&&origClasses.split(" "))||[],i;classes=[].concat(classes);for(i=0;i<classes.length;i++){var cls=classes[i];if($A.indexOf(existing,cls)===-1){existing.push(cls);}}widget.cssClass=existing.join(" ");},removeWidgetCssClass:function removeWidgetCssClass(widget,classes){var origClasses=widget.cssClass,existing=(origClasses&&origClasses.split(" "))||[],i;classes=[].concat(classes);for(i=0;i<classes.length;i++){var cls=classes[i];var classIndex=$A.indexOf(existing,cls);if(classIndex!==-1){existing.splice(classIndex,1);}}widget.cssClass=existing.join(" ");},toggleClass:function toggleClass(el,s,b){if(b){this.addClass(el,s);}else{this.removeClass(el,s);}},applyShadow:function applyShadow(el,xOff,yOff,spread,color){var s=el.style;if($D.isDXIE){s.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+xOff+"px, OffY="+yOff+"px, Color='"+color+"')";}else{if($D.isFF||$D.isWK||$D.isIE10){s[$D.CSS3_BOXSHADOW]=xOff+"px "+yOff+"px "+spread+"px "+color;}}},removeShadow:function removeShadow(el){var s=el.style;if($D.isFF||$D.isWK||$D.isIE10){s[$D.CSS3_BOXSHADOW]="";}},setOpacity:function setOpacity(el,val){if($D.isDXIE&&!$D.isIE9){var filterText=el.currentStyle.filter;var filter=null;if(filterText.length>0){filter=el.filters["DXImageTransform.Microsoft.Alpha"];}if(filter){filter.opacity=val;filter.enabled=(val!==100);}else{if(val<100){var filterDefinition="progid:DXImageTransform.Microsoft.Alpha(Opacity="+val+")";el.style.filter=(filterText||"")+" "+filterDefinition;}}}else{el.style.opacity=val/100-($D.isIE9?0.00001:0);}},buildGradient:function buildGradient(t,sc,ec){if($D.supports($D.cssFeatures.GRADIENTS)){var rtn={};if($D.isDXIE){rtn.n="filter";rtn.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+t+",StartColorStr='"+sc+"',EndColorStr='"+ec+"')";}else{if($D.isFF){rtn.n="background-image";rtn.v="-moz-linear-gradient("+((t===0)?"top":"left")+","+sc+","+ec+")";}else{if($D.isWK){rtn.n="background";rtn.v="-webkit-gradient(linear,"+((t===0)?"left top, left bottom":"left top, right top")+",from("+sc+"),to("+ec+"))";}else{if($D.isIE10||$D.isIEW3C){rtn.n="background";rtn.v="linear-gradient("+((t===0)?"to bottom":"to right")+","+sc+","+ec+")";}}}}return rtn;}return null;},buildRoundCorners:function buildRoundCorners(r,t){if($D.supports($D.cssFeatures.ROUND_CORNERS)){var v=r+"px";var radiusValue=v+(t?" "+v+" 0 0":"")+";";if($D.isFF||$D.isWinPhone||$D.isIE10){return"border-radius:"+radiusValue;}if($D.isWK){if(!t){return"-webkit-border-radius:"+v+";";}var ds=["left","right"],css=[],x=-1,i;for(i=0;i<2;i++){css[++x]="-webkit-border-top-"+ds[i]+"-radius:"+v;css[++x]="-webkit-border-bottom-"+ds[i]+"-radius:0";}return css.join(";");}}return"";},getBorderWidthsOrPaddings:function getBorderWidthsOrPaddings(b,dpi){var o={t:0,r:0,b:0,l:0,h:0,w:0};if(!b){return o;}var a=b.split(" "),len=a.length,i;for(i=0;i<len;i++){a[i]=Math.round(dpi*parseFloat(a[i])/72);}if(len<4){if(len===1){a[1]=a[2]=a[3]=a[0];}else{a[3]=a[1];if(len===2){a[2]=a[0];}}}o.t=a[0];o.r=a[1];o.b=a[2];o.l=a[3];o.h=o.t+o.b;o.w=o.l+o.r;return o;},getBorderWidths:function getBorderWidths(p,dpi){return this.getBorderWidthsOrPaddings(p,dpi);},getPaddings:function getPaddings(p,dpi){return this.getBorderWidthsOrPaddings(p,dpi);},parkAfterFade:function parkAfterFade(evt){var elStyle=evt.target.style;if(elStyle.opacity===0){elStyle.left="-10000px";window.setTimeout(function(){elStyle.opacity=0.99;},0);return true;}return false;},getStyleValue:function getStyleValue(el,prop){var propIsFloat=(prop==="float"),value;if(el.currentStyle){prop=propIsFloat?"styleFloat":prop;value=el.currentStyle[prop];}else{if(document.defaultView&&document.defaultView.getComputedStyle){prop=propIsFloat?"cssFloat":prop;var styles=document.defaultView.getComputedStyle(el,null);value=styles?styles[prop]:null;}}return value;},getComputedStyle:function getComputedStyle(element,pseudoElement){var fn=(window.getComputedStyle)?function(element,pseudoElement){return window.getComputedStyle(element,pseudoElement||null);}:function(element){return element.currentStyle||{};};mstrmojo.css.getComputedStyle=fn;return fn(element,pseudoElement);},getCssTextFromObj:function getCssTextFromObj(obj){var s="",k;for(k in obj){s+=k+":"+obj[k]+";";}return s;},onTransitionEnd:function onTransitionEnd(el,cb){var t="transition",modernizr=window.Modernizr;if(modernizr.testProp(t)){$D.attachOneTimeEvent(el,$D.transEndEvtNames[modernizr.prefixed(t)],cb);}else{window.setTimeout(cb,0);}},flashClass:function flashClass(el,cls,duration){this.toggleClass(el,cls,true);var $DOM=this;window.setTimeout(function(){$DOM.toggleClass(el,cls,false);},duration);},convertCssToCamelCase:function convertCssToCamelCase(cssName){return cssName.replace(/\-([a-z])/gi,function(match,hyphenated){return hyphenated.toUpperCase();});},printCSSInfo:function printCSSInfo(fileName){var styleSheets=document.styleSheets,totalStyleSheets=styleSheets.length,j,i;for(i=0;i<totalStyleSheets;i++){var styleSheet=styleSheets[i],rules=styleSheet.cssRules,totalRulesInStylesheet=rules?rules.length:0,totalSelectorsInStylesheet=0;for(j=0;j<totalRulesInStylesheet;j++){var selectorText=rules[j].selectorText;if(selectorText){try{totalSelectorsInStylesheet+=selectorText.split(",").length;}catch(err){}}}var cssFileName=styleSheet.href;if(!fileName||(cssFileName&&$A.indexOf(cssFileName,fileName)>-1)){console.log("Stylesheet: "+cssFileName||"Inline CSS Block");console.log("Total rules: "+totalRulesInStylesheet);console.log("Total selectors: "+totalSelectorsInStylesheet);}}}});}());