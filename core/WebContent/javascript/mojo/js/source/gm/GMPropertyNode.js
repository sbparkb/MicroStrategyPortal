(function(){mstrmojo.requiresCls("mstrmojo.Base");var TIME_STAMP="_tmsp";var PNode=mstrmojo.gm.GMPropertyNode=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMPropertyNode",modifiedPropertyKeys:undefined,children:undefined,dirty:undefined,jsonObj:undefined,init:function(props){this._super(props);this.children={};this.modifiedPropertyKeys=[];var jsonObj=this.jsonObj,potSubNode,nodeType,key;for(key in jsonObj){if(jsonObj.hasOwnProperty(key)){potSubNode=jsonObj[key];nodeType=typeof potSubNode;if(nodeType==="object"||nodeType==="array"){this.setProperty(key,jsonObj[key],true);}}}},setProperty:function(propName,jsonSubNode,escTracking){if(typeof jsonSubNode==="object"){this.children[propName]=new PNode({jsonObj:jsonSubNode,parent:this});this.jsonObj[propName]=jsonSubNode;}else{this.jsonObj[propName]=jsonSubNode;this.jsonObj[propName+TIME_STAMP]=(new Date()).getTime();}if(escTracking!==true){this.modifiedPropertyKeys.push(propName);}},manuallyAddModifiedPropertyName:function(propName){this.modifiedPropertyKeys.push(propName);},getRawJson:function(){return this.jsonObj;},toString:function(){return JSON.stringify(this.jsonObj);},getPropertyNode:function(nodeName){return this.children[nodeName];},getPropertyJSONValue:function(nodeName){var subNode=this.children[nodeName];if(subNode){return subNode.jsonObj;}return this.jsonObj[nodeName];}});}());