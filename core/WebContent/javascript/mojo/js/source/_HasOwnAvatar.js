(function(){mstrmojo.requiresCls("mstrmojo.css");var $CSS=mstrmojo.css,PX="px",avatarClass="hasOwnAvatar",DEFAULT_DRAG_OFFSETS={x:0,y:0};function addAvatar(context){var avatar=this.createAvatar(context.src.node,context);if(avatar){$CSS.addClass(avatar,[this.avatarCssClass,avatarClass]);this.avatar=context.avatar=document.body.appendChild(avatar);}}function destroyAvatar(){var avatar=this.avatar;if(avatar){avatar.parentNode.removeChild(avatar);delete this.avatar;$CSS.removeClass(avatar,[this.avatarCssClass,avatarClass]);}}mstrmojo._HasOwnAvatar=mstrmojo.provide("mstrmojo._HasOwnAvatar",{_mixinName:"mstrmojo._HasOwnAvatar",draggable:true,ownAvatar:true,avatarCssClass:"",restrictedToAxis:undefined,isDragValid:function isDragValid(context){if(this._super){return this._super(context);}return false;},ondragstart:function ondragstart(context){addAvatar.call(this,context);this.positionAvatar(context.src.pos,context);if(this._super){this._super(context);}},ondragmove:function ondragmove(context){this.positionAvatar(context.tgt.pos,context);if(this._super){this._super(context);}},ondragend:function ondragmove(context){destroyAvatar.call(this);if(this._super){this._super(context);}},createAvatar:mstrmojo.emptyFn,positionAvatar:function positionAvatar(pos,context){var avatarStyle=this.avatar.style,restrictedToAxis=this.restrictedToAxis,dragOffsets=(context&&context.dragOffsets)||DEFAULT_DRAG_OFFSETS;if(restrictedToAxis!=="y"){avatarStyle.left=pos.x+dragOffsets.x+PX;}if(restrictedToAxis!=="x"){avatarStyle.top=pos.y+dragOffsets.y+PX;}}});}());