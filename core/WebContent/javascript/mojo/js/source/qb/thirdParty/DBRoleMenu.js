(function(){mstrmojo.requiresCls("mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus.Menu");var $A=mstrmojo.array,$DOM=mstrmojo.dom;var ENUM_ACTION_NEW=0,ENUM_ACTION_EDIT=1,ENUM_ACTION_DELETE=2,ENUM_ACTION_RENAME=3,ENUM_ACTION_DUPLICATE=4,STR_NEW=mstrmojo.desc(4996,"New"),STR_EDIT=mstrmojo.desc(1088,"Edit"),STR_DELETE=mstrmojo.desc(629,"Delete"),STR_RENAME=mstrmojo.desc(1388,"Rename"),STR_DUPLICATE=mstrmojo.desc(3397,"Duplicate");mstrmojo.qb.thirdParty.DBRoleMenu=mstrmojo.declare(mstrmojo.Button,[mstrmojo.ui.menus._HasMenuPopup],{menuHelper:null,getData:mstrmojo.emptyFn,onclick:function onclick(evt){var menu=this.menuHelper;if(menu===null){menu=new mstrmojo.qb.thirdParty.DBConnectionsMenu();}menu.data=this.getData();if(menu.data===null){return ;}var cfg=menu.getMenuConfig();cfg.hostId=this.id;cfg.hostElement=evt.target||$DOM.eventTarget(evt.hWin,evt.e);cfg.position=$DOM.position(cfg.hostElement,true);cfg.isHostedWithin=false;cfg.hostProxyCssClass="item-mn-proxy";this.openPopup(new mstrmojo.ui.menus.Menu({popupConfig:cfg}));}});mstrmojo.qb.thirdParty.DBConnectionsMenu=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.architect.menu.DBConnectionsMenu",cm:[{action:ENUM_ACTION_NEW,n:STR_NEW},{action:ENUM_ACTION_EDIT,n:STR_EDIT},{action:ENUM_ACTION_DELETE,n:STR_DELETE},{action:ENUM_ACTION_RENAME,n:STR_RENAME},{action:ENUM_ACTION_DUPLICATE,n:STR_DUPLICATE}],executeCommand:function executeCommand(item){var data=this.data,rootController=mstrApp.getRootController();switch(item.action){case ENUM_ACTION_NEW:rootController.editDBRole();break;case ENUM_ACTION_EDIT:rootController.editDBRole(data);break;case ENUM_ACTION_RENAME:rootController.renameDBRole(data);break;case ENUM_ACTION_DELETE:rootController.deleteDBRole(data);break;case ENUM_ACTION_DUPLICATE:rootController.duplicateDBRole(data);break;}},getMenuConfig:function getMenuConfig(menuItems){var menuCfg=new mstrmojo.ui.menus.MenuConfig(),id=this.id,allAvailableMenuItems=menuItems||this.cm;$A.forEach(allAvailableMenuItems,function(menuItem){var cssClasses=[""],execFn=function execFn(){this.executeCommand(menuItem);};menuCfg.addToggleMenuItem(menuItem.n||"",cssClasses.join(" "),execFn,execFn,id,false);},this);return menuCfg;}});})();