(function(){mstrmojo.requiresCls("mstrmojo.StepperContentProvider","mstrmojo.num");var $NUM=mstrmojo.num;function has(cp,direction){var boundary=direction?cp.max:cp.min,altBoundary=direction?cp.min:cp.max,newVal=cp.getVal(direction?1:-1);return(boundary===null||(direction?(newVal<=boundary):(newVal>=boundary))||(altBoundary!==null&&cp.canLoop));}function traverse(cp,direction){var min=cp.min,max=cp.max,newVal=cp.getVal(direction?1:-1);if((direction&&max!==null&&newVal>max)||(!direction&&min!==null&&(newVal<min))){if(cp.canLoop){newVal=((newVal-min)%(max-min+1))+min;newVal=(newVal>=min)?newVal:newVal+(max-min+1);}else{return ;}}cp.item[cp.valField]=cp.curVal=newVal;cp.onTraverse();}mstrmojo.NumStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.NumStepperContentProvider",curVal:null,init:function(props){this._super(props);var item=this.item,fnIsInfinite=function(fieldName){var itemValue=fieldName&&item[fieldName];return(itemValue===null||itemValue===undefined);},fnUpdateProps=function(propName,fieldName,canBeInfinite){var newValue=canBeInfinite&&fnIsInfinite.call(this,fieldName)?null:item[fieldName];if(newValue!==null&&newValue!==undefined){this[propName]=newValue;}};fnUpdateProps.call(this,"min",this.minField,true);fnUpdateProps.call(this,"max",this.maxField,true);fnUpdateProps.call(this,"interval",this.intField);this._initCurrent();},_initCurrent:function(){var item=this.item,curValue=this.curVal=item[this.valField];if(curValue===null||curValue===undefined){var min=this.min;this.curVal=min!==null?min:0;}},next:function(){traverse(this,true);},prev:function(){traverse(this,false);},hasPrev:function(){return has(this,false);},hasNext:function(){return has(this,true);},renderItemAt:function(delta){var val=this.getVal(delta),renderer=this.renderer;return renderer?renderer.render(val,this):val;},getVal:function(delta){return this.curVal+(this.interval*(delta||0));},setVal:function(newVal){var min=this.min,max=this.max,oldVal=this.getVal();if(typeof newVal!=="number"||isNaN(newVal)||newVal===oldVal||$NUM.inNumericRange(newVal,min,max)!==0){return ;}this.item[this.valField]=this.curVal=newVal;this.onTraverse();},onTraverse:mstrmojo.emptyFn});}());