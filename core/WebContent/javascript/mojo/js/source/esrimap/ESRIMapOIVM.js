(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.esrimap.ESRIMap");mstrmojo.esrimap.ESRIMapOIVM=mstrmojo.declare(mstrmojo.esrimap.ESRIMap,null,{scriptClass:"mstrmojo.esrimap.ESRIMapOIVM",k:null,_w:null,model:null,getWidget:function(gridParams){this.k=gridParams.key;if(!this._w&&gridParams){for(var i in mstrmojo.all){if(mstrmojo.all[i].k===gridParams.key){this._w=mstrmojo.all[i];break;}}}return this._w;},getDocModel:function getDocModel(){return this.model&&this.model.docModel;},trimString:function trimString(s){return mstrmojo.string.trim(s);},setPosition:function setPosition(){if(!!this.node&&!!this.node.defn&&!!this.node.defn.fmts){var fmts=this.node.defn.fmts,domNodeStyle=this.domNode.style;this.width=parseInt(fmts.width,10)+"px";this.height=parseInt(fmts.height,10)+"px";domNodeStyle.width=this.width;domNodeStyle.height=this.height;domNodeStyle.top=parseInt(fmts.top,10)+"px";domNodeStyle.left=parseInt(fmts.left,10)+"px";domNodeStyle.position="absolute";}},persistWidgetProps:function persistWidgetProps(){if(!this.isOIVM()){return this._super();}var widgetPropsXml=this.createWidgetPropsXML();var widget=this.getWidget(this.gridParams);this.getDocModel().updateUnitFormat(widget,1,{FormattingWidget:{WidgetProps:widgetPropsXml}},{success:function(){}},{params:{suppressData:true},config:{silent:true}});}});}());