(function(){mstrmojo.requiresCls("mstrmojo.MobileXtab","mstrmojo._HasMagnifier");var OVERFLOW_A="overflow:auto",OVERFLOW_H="overflow:hidden",$DOM=mstrmojo.dom;function dimensionChange(xtab,dimension){var dn=xtab.domNode;if(!dn){return false;}var lcDimension=dimension.toLowerCase(),x=xtab[lcDimension],intValue=parseInt(x,10),isWidth=(dimension==="Width");dn.style[((isWidth)?"left":"top")]=0;dn.style[lcDimension]=x;xtab.contentNode.parentNode.style[lcDimension]=x;xtab["scrollbox"+dimension]=intValue;return true;}function _createMagnifierContent(row){var mks=[];mks.push('<table style="border-spacing:0px 0px;background:white;border-collapse:collapse;table-layout:auto">');var addRow=function(l,r,selected){var addCell=function(c,cs,s){if(c&&c.ts===4){mks.push('<td  class="'+(c.css||"")+(s?" xtab-selected-cell":"")+'" ><img src="'+(c.n||c.v)+'"/></td>');}else{mks.push('<td  class="'+(c.css||"")+(s?" xtab-selected-cell":"")+'" style="white-space:nowrap;'+cs+'">'+(c.n||c.v||"&nbsp;")+"</td>");}};mks.push("<tr>");addCell(l,"text-decoration:none;text-align:right !important");addCell(r,"text-decoration:none;text-align:left !important",selected);mks.push("</tr>");};var si=row.si,hds=false,rc=row.th.length;for(var i=0,len=row.rh[0].length;i<len;i++){var rt=row.th[0][i];if(rc>1&&i===len-1){rt=row.th[rc-1][0];}if(i==si){addRow(rt,row.rh[0][i],true);hds=true;break;}addRow(rt,row.rh[0][i]);}var metrics=null;if(!hds){for(var j=0,jLen=row.ch.length;j<jLen;j++){var m=i;for(var k=0,kLen=row.ch[j].length;k<kLen;k++){var c=row.ch[j][k],cs=(c&&c.cs)||1;if((si>=m)&&(si<m+cs)){if(c.mix!==undefined){metrics=c;}else{addRow(j==0?row.th[0][i-1]:row.th[j][0],c);}break;}m+=cs;}}addRow(c,row.vs[0][si-i],true);}mks.push("</table>");return mks.join("");}function findTD(event){var td=event.target;while(td&&td.tagName!="TD"){td=td.parentElement;}return td;}mstrmojo.iXtab=mstrmojo.declare(mstrmojo.MobileXtab,[mstrmojo._FillsBrowser,mstrmojo._HasMagnifier],{scriptClass:"mstrmojo.iXtab",scrollboxHeightFixed:false,enableXtabInteractivity:false,rowAdjust:0,preBuildRendering:function preBuildRendering(){this.numRowFixed=true;this.scrollboxNodeOverflow=OVERFLOW_H;if(this.enableXtabInteractivity){mstrmojo.requiresCls("mstrmojo._iToolbarMgr");this.toolbarMgr="mstrmojo._iToolbarMgr";}return this._super();},postBuildRendering:function postBuildRendering(){var rtn=this._super();var msgNode=this.msgNode,maskNode=this.maskNode,evtName=$DOM.CSS3_TRANSITION_END,$DAE=mstrmojo.dom.attachEvent,$PAF=mstrmojo.css.parkAfterFade;msgNode.style.height="auto";msgNode.style.width="auto";$DAE(maskNode,evtName,$PAF);$DAE(msgNode,evtName,$PAF);var me=this;window.setTimeout(function(){maskNode.style.opacity=0;me.clearTransitionCurtain();var ic=me.imgCacheMap;if(ic&&ic.unCachedImg&&ic.unCachedImg.length>0){if(me.model&&me.model.cacheImages){me.model.cacheImages(ic.unCachedImg.join(",,,"));}}},400);if(this.enableXtabInteractivity){this.requiresContrib("toolbarMgr",true);}if(this.lockHeadersCase==LOCK_OFF||this.lockHeadersCase==LOCK_ROW){this.rowAdjust=this.chsCP.rc||0;}return rtn;},setTransitionCurtain:function setTransCurtn(domNode){if(domNode){domNode.style.zIndex=20;this.transitionCurtain=domNode;}},clearTransitionCurtain:function clrTransCurtn(){var curtain=this.transitionCurtain;if(curtain){var curtainStyle=curtain.style;window.setTimeout(function(){curtainStyle.zIndex=-1;curtain.innerHTML="";},10);curtainStyle.opacity=0;}},performAction:function performAction(touch){this.deselectCell();var td=mstrmojo.dom.findAncestorByAttr(touch.target,"ei",true,this.domNode);if(!td||!td.value){if(this.controller.touchTap){this.controller.touchTap();}return ;}var node=td.node;this.defaultAction(node);},updateActionMenu:function updateActionMenu(cell,actions){if(this.enableXtabInteractivity&&this.toolbarMgr){this.toolbarMgr.showToolbar(cell,actions,this);return true;}else{return false;}},browserResized:function browserResized(size){if(this.height!==size.h||this.width!==size.w){this.height=size.h;this.width=size.w;var w=dimensionChange(this,"Width"),h=dimensionChange(this,"Height");if(w||h){this.setOffsets();}return true;}return false;},scrolledOut:function scrolledOut(e){var abs=Math.abs,off={x:0,y:0},axis=e.axis,limit=(0.2*parseInt(axis==="x"?this.width:this.height,10)),max=abs(this._TMAX[axis]),min=this._TMIN[axis],value=e.value;if(axis=="y"&&this.useSeamlessIncFetch){return ;}if((value>(limit+max))||(value<(min-limit))){off[axis]=value;this.controller.swipe({cmd:e.direction,offX:off.x,offY:off.y});}},createZone:function createZone(cfg){cfg=cfg||{};cfg.tbodyStyle="background-color:white;";return this._super(cfg);}});})();