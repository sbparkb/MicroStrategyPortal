(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Label","mstrmojo.array","mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.condTx.CommonComponent","mstrmojo.condTx.ActionExprTree");mstrmojo.requiresDescs(3397,5893,7978,7979);var $A=mstrmojo.array,$CC=mstrmojo.condTx.CommonComponent,ACTIONTYPE=$CC.ACTION_TYPE,ACTIONITEMS=$CC.ACTION_ITEMS;function createActionItemsMenuCfg(actionItems,host){var menuCfg=new mstrmojo.ui.menus.MenuConfig();menuCfg.hostId=host.id;menuCfg.hostElement=host.actionNode;menuCfg.isHostedWithin=false;menuCfg.alignment={host:4,popup:1};$A.forEach(actionItems,function(item){menuCfg.addMenuItem(item.n,"",function(){host.set("actionType",item.v);});});return menuCfg;}mstrmojo.condTx.ActionRow=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.condTx.ActionRow",markupString:'<div id="{@id}" class="mstrmojo-ConditionTXN-ActionRow cf {@cssClass}" style="{@cssText}" mstrAttach:click><div class="reserved"></div><div class="target"></div><div class="action"></div><div class="container"></div><div class="menu"></div><div class="delete"></div></div>',markupSlots:{targetNode:function actionNode(){return this.domNode.children[1];},actionNode:function actionNode(){return this.domNode.children[2];},containerNode:function containerNode(){return this.domNode.children[3];},menuNode:function menuNode(){return this.domNode.children[4];},deleteNode:function deleteNode(){return this.domNode.children[5];}},action:null,idx:null,editor:null,model:null,editable:true,postBuildRendering:function postBuildRendering(){var me=this,edt=this.editable,action=me.action,actionType=action.actionType||ACTIONTYPE.DEFAULT,target=action.target,expr=action.expr;me.actionNode.innerHTML=ACTIONITEMS[actionType].n;me.targetNode.innerHTML=target&&target.n||"";if(target&&target.n){mstrmojo.css.addClass(me.containerNode,"hasTarget");}me.destroyChildren(false);me.addChildren([{scriptClass:"mstrmojo.condTx.ActionExprTree",alias:"exprTree",editor:me.editor,model:me.model,editable:edt,items:[expr]}]);return this._super();},onactionTypeChange:function onactionTypeChange(){this.actionNode.innerHTML=ACTIONITEMS[this.actionType].n;},onclick:function onclick(evt){var me=this,editor=me.editor,target=evt.getTarget(),model=me.model;if(target===me.deleteNode){model.deleteAction(me.action);}else{if(target===me.menuNode){var menuCfg=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"mstrmojo-ConditionTXN-Menu"});menuCfg.hostId=me.id;menuCfg.hostElement=me.menuNode;menuCfg.isHostedWithin=false;menuCfg.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"",function(){model.duplicateAction(me.idx);});menuCfg.addMenuItem(mstrmojo.desc(5893,"New Condition"),"",function(){me.exprTree.newCondition(null);});me.openPopup(menuCfg.newInstance());}}}});}());