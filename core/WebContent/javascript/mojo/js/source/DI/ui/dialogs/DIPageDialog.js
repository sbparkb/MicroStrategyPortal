(function(){mstrmojo.requiresCls("mstrmojo.DI.DIRootView","mstrmojo.DI.DIConstants","mstrmojo.DI.DIHelpers","mstrmojo.Editor");mstrmojo.requiresDescs(14155);var $HELPER=mstrmojo.DI.DIHelpers,constants=mstrmojo.DI.DIConstants;mstrmojo.DI.ui.dialogs.DIPageDialog=mstrmojo.declare(mstrmojo.Editor,[mstrmojo._FillsBrowser],{scriptClass:"mstrmojo.DI.ui.dialogs.DIPageDialog",showTitle:false,zIndex:999,launcher:null,getMovingHandle:function getMovingHandle(){return this.rootView.headerNode;},browserResized:function browserResized(size){if(this.editorNode){mstrmojo.dom.center(this.editorNode);$HELPER.reevaluatePopupPosition(this.editorNode);}},onOpen:function onOpen(){var controller=mstrApp.getRootController(),slot=this.slot,msg=mstrmojo.desc(14155,"Please input your original data into clipboard because you have parsed or wrangled the data."),clipboardCallback={success:function(res){slot.getConfig().properties.content=res;controller.showPage(constants.pageType.clipboard,0,slot||null);},failure:function(res){controller.showPage(constants.pageType.clipboard,0,slot||null);controller.displayError(mstrmojo.desc(12795,"Could not load clipboard data!"),false,res.message);}},tableID,params;this.set("visible",false);this.launcher=controller.rootView;controller.rootView=this.rootView;switch(this.pageType){case constants.pageType.emmaPreview:controller.fetchCubeInfoEMMA();break;case constants.pageType.dataSelection:controller.showPage(this.pageType,null,this.slot||null);break;case constants.pageType.file:controller.showPage(this.pageType,this.sourceInfo,this.slot||null);break;case constants.pageType.clipboard:tableID=slot.getConfig().properties.tableID;params={previewflag:constants.requestFlag.fullData,browsetype:4,sheetIndex:0,bindingflag:0,tableID:tableID};if(!controller.getModel().isParsed(tableID)&&!controller.getModel().isRefined(tableID)){controller.dataService.getImportedData(clipboardCallback,params,0);}else{controller.showPage(constants.pageType.clipboard,0,this.slot||null);mstrApp.getRootController().displayWarning(msg,null,mstrmojo.emptyFn,{showCancel:false});}break;case constants.pageType.schedule:case constants.pageType.republish:this.origModel=controller.getModel();this.origMessageID=controller.dataService.messageID;this.origIRRMessageID=controller.dataService.emmaIRRMessageID;this.model=new mstrmojo.DI.DIModel();this.addDisposable(this.model);this.model.initParams(this.diParams);controller.model=this.model;controller.dataService.messageID=null;controller.dataService.emmaIRRMessageID=null;controller.restoreForLaunchingApp();break;default:break;}},onClose:function onClose(){var controller=mstrApp.getRootController();controller.rootView=this.launcher;controller.dialogController.pageZIndex--;this.sourceInfo=null;this.slot=null;if(this.origModel){controller.model=this.origModel;this.origModel=null;}if(this.origMessageID!==undefined){controller.dataService.messageID=this.origMessageID;this.origMessageID=null;}if(this.origIRRMessageID!==undefined){controller.dataService.emmaIRRMessageID=this.origIRRMessageID;this.origIRRMessageID=null;}this.destroy();},children:[{scriptClass:"mstrmojo.DI.DIRootView",alias:"rootView",showHeader:true,onvisibleChange:function(){this.parent.set("visible",this.visible);}}]});}());