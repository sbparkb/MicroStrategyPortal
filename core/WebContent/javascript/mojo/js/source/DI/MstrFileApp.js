(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.Editor");var PROGRESS_BAR_ID="mstrFileProgressBar",progressBarConfig={scriptClass:"mstrmojo.Editor",id:PROGRESS_BAR_ID,showTitle:true,zIndex:99999,title:"Uploading files",cssClass:"mstrmojo-di-progressBar",children:[{scriptClass:"mstrmojo.Widget",markupString:'<progress class="mstrmojo-di-progress stripes"></progress>',alias:"progressAlias",progressValue:function progressValue(value){this.domNode.value=value;}}],postCreate:function(){this.counter=0;},progressTextValue:function progressTextValue(value){this.title=value;},onOpen:function(){this.helpNode.hidden=true;this.closeNode.hidden=true;},open:function open(opener,config){if(++this.counter>0&&!this.visible){mstrmojo.Editor.prototype.open.call(this,opener,config);}},close:function close(config){if(this.visible){mstrmojo.Editor.prototype.close.call(this,config);}}};var WAIT_BOX_ID="mstrFileWaitBox",waitBoxConfig={scriptClass:"mstrmojo.Editor",id:WAIT_BOX_ID,cssClass:"mstrmojo-Architect-WaitBox",draggable:false,showTitle:false,zIndex:99999,onOpen:function(){var st=this.curtainNode.style;st.background="black";st.opacity=0.5;st.filter="alpha(opacity=50)";},postCreate:function(){this.counter=0;},open:function open(opener,config){if(++this.counter>0&&!this.visible){mstrmojo.Editor.prototype.open.call(this,opener,config);}},close:function close(config){var counter=this.counter=Math.max(0,this.counter-1);if(counter<=0&&this.visible){mstrmojo.Editor.prototype.close.call(this,config);}},children:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-Architect-Wait"}]};mstrmojo.DI.MstrFileApp=mstrmojo.declare(mstrmojo.Obj,null,{showProgress:function showProgress(){if(mstrmojo.dom.supports(mstrmojo.dom.htmlFeatures.FILE_READER)){(mstrmojo.all[PROGRESS_BAR_ID]||mstrmojo.insert(progressBarConfig)).open(this,progressBarConfig);}else{(mstrmojo.all[WAIT_BOX_ID]||mstrmojo.insert(waitBoxConfig)).open(this,waitBoxConfig);}},hideProgress:function hideWait(){var progressBar;if(mstrmojo.dom.supports(mstrmojo.dom.htmlFeatures.FILE_READER)){progressBar=mstrmojo.all[PROGRESS_BAR_ID];}else{progressBar=mstrmojo.all[WAIT_BOX_ID];}if(progressBar){progressBar.close();}},setProgressParams:function setProgressParams(complete,config){var progressBar=mstrmojo.all[PROGRESS_BAR_ID];if(progressBar){if(config&&config.showProgressText){progressBar.progressTextValue(config.progressText);progressBarConfig.progressTextValue(config.progressText);}if(complete){progressBar.progressAlias.progressValue(complete);}}else{if(config&&config.showProgressText){progressBarConfig.progressTextValue(config.progressText);}if(complete){progressBarConfig.children[0].progressValue(complete);}}}});window.$MAPF=function(){return false;};}());