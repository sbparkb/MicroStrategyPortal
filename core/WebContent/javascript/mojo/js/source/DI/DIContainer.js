(function(){mstrmojo.requiresCls("mstrmojo.DI.DIApp","mstrmojo._IsPopup","mstrmojo.Container","mstrmojo.hash","mstrmojo._IsMovable");var $CSS=mstrmojo.css;function resetDataImportParams(){this.dataImportParams={isNewAnalysis:true,isEdit:false,isCloudPro:false,isEmmaCube:true,isDirectDataAccess:false,isManagedCube:false,ReportId:undefined,CubeName:undefined,FolderId:undefined,CubeDesc:undefined,AnalysisId:undefined,StatusCode:0,CreateAnalysis:1,CreateReportServices:1,CreateViewReport:1,CubeQuota:200,Delete:1,EnableFTPImport:true,EnableFileImport:true,EnableHttpImport:true,EnableURLImport:true,ShowDDAOptions:true,ImportDatabase:1,AccessDataFromFiles:1,AccessDataFromCloudApp:1,Republish:1,Share:1,Subscriptions:1,UploadSizeLimit:100,datasets:null,hasNonRADataset:false,documentModel:null,missingCredentialsData:null,refreshMultipleCubes:false};}mstrmojo.DI.DIContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._IsMovable],{scriptClass:"mstrmojo.DI.DIContainer",id:"DIContainer",cssClass:"mstrmojo-di-popup",markupString:'<div id="{@id}" class="{@cssClass}"><div id="DIApp"></div><div class="mstrmojo-DIEditor-curtain"></div></div>',markupSlots:{curtainNode:function(){return this.domNode.lastChild;}},draggable:true,launchingApp:null,dataImportParams:null,init:function(props){if(this._super){this._super(props);}resetDataImportParams.call(this);},getMovingHandle:function getMovingHandle(){return this.rootView.headerNode;},onOpen:function onOpen(){this.launchingApp=mstrApp;var diParams=this.dataImportParams;window.mstrApp=new mstrmojo.DI.DIApp();mstrmojo.hash.copy({placeholder:"DIApp",isEdit:diParams.isEdit,isNewAnalysis:diParams.isNewAnalysis,isCloudPro:diParams.isCloudPro,isEMMACube:diParams.isEmmaCube,isPopup:true,showDDAOptions:diParams.showDDAOptions,diParams:diParams,refreshMultipleCubes:diParams.refreshMultipleCubes,features:this.launchingApp.features,cubeSaveFolderId:diParams.cubeSaveFolderId},mstrApp);var props=["isSingleTier","projectName","serverName","serverPort","authMode","sessionManager","enableWarningSessionTimeout","maxSessionIdleTime","timeBeforeSessionTimeoutWarning","name","sessionState","persistTaskParams","helpUrl","helpLocaleId","localeId","userHelpPage","autocomplete","isCloud","features"];if(this.launchingApp.serverProxy){props.push("serverProxy");}mstrmojo.hash.copyProps(props,this.launchingApp,mstrApp);mstrApp.launchingApp=this.launchingApp;mstrApp.container=this;this.curtainNode.style.zIndex=this.domNode.style.zIndex-1;this.domNode.style.display="block";this.curtainNode.style.display="block";mstrApp.start();if(mstrApp.isSingleTier){window.FormWrapper.toggleNetMenu("disable");}this.docMouseDown=document.onmousedown;document.onmousedown=null;this.docMouseMove=document.onmousemove;document.onmousemove=null;this.docMouseUp=document.onmouseup;document.onmouseup=null;$CSS.toggleClass(document.body,"user-select-none",true);},onClose:function onClose(){var diApp=window.mstrApp;window.mstrApp=this.launchingApp;mstrApp.sessionState=diApp.sessionState;diApp.destroy();this.domNode.style.display="none";this.curtainNode.style.display="none";resetDataImportParams.call(this);this.destroy();if(mstrApp.isSingleTier){window.FormWrapper.toggleNetMenu("enable");}document.onmousedown=this.docMouseDown;document.onmousemove=this.docMouseMove;document.onmouseup=this.docMouseUp;$CSS.toggleClass(document.body,"user-select-none",false);},preBuildRendering:function preBuildRendering(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}return this._super();},setPosition:function setPosition(left,top){var dn=this.domNode,dnStyle=dn&&dn.style;if(dnStyle){dnStyle.left=left;dnStyle.top=top;}},isDragValid:function isDragValid(context){var searchTable=this.rootView.header.searchTable,isValid;isValid=this._super(context);if(isValid&&searchTable.visible){isValid=!mstrmojo.dom.contains(searchTable.domNode,context.src.node,true,this.getMovingHandle());}return isValid;}});}());