(function(){mstrmojo.requiresCls("mstrmojo.string");mstrmojo.DivItemRenderer={render:function(item,idx,widget){var displayName=mstrmojo.string.encodeHtmlString((widget.getItemName?widget.getItemName(item,idx):(widget.itemDisplayField&&item[widget.itemDisplayField])));return'<div mstridx="'+idx+'" class="'+widget.itemCssClass+(widget.selectedIndices[idx]?" "+widget.itemSelectedCssClass:"")+(item.cssClass?" "+item.cssClass:"")+'" style="'+widget.itemCssText+'">'+displayName+"</div>";},select:function(el,item,idx,widget){el.className+=" selected";},unselect:function(el,item,idx,widget){el.className=el.className.replace(/selected/g,"");},rowHeight:21};mstrmojo._RendersItemDivs={tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"mstrmojo-ListBox-cell",cellCssText:"",itemCssClass:"mstrmojo-ListBox-item",itemSelectedCssClass:"selected",itemDisplayField:"n",itemRenderer:mstrmojo.DivItemRenderer,rangeSelected:false,_findMatch:function(hWin,e){return mstrmojo.dom.findAncestorByAttr(mstrmojo.dom.eventTarget(hWin,e),"mstridx",true,this.itemsNode);},premousedown:function premousedown(evt){if(mstrmojo.dom.shiftKey(evt.hWin,evt.e)){mstrmojo.dom.preventDefault(evt.hWin,evt.e);}},preclick:function preclk(evt){var hWin=evt.hWin,e=evt.e,match=this._findMatch(hWin,e);if(match){var el=match.node,idx=parseInt(match.value,10),d=mstrmojo.dom,ctrl=d.ctrlKey(hWin,e),shift=d.shiftKey(hWin,e);if(ctrl||shift){d.clearBrowserHighlights(hWin);}if(this.multiSelect&&(this.selectionPolicy==="toggle"||ctrl)){var changeSelection=this.rangeSelected||this.selectedIndex===-1;this.toggleSelect(idx);if(changeSelection&&idx<this.items.length&&this.selectedIndices[idx+1]){idx++;}this.selectedIndex=idx;this.rangeSelected=false;}else{if(this.multiSelect&&shift){this.rangeSelected=true;this.rangeSelect(idx);}else{this.singleSelect(idx);this.rangeSelected=false;}}}}};mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._RendersItemDivs");mstrmojo.ListBoxBase=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._RendersItemDivs],{scriptClass:"mstrmojo.ListBoxBase",cssClass:"mstrmojo-ListBox",itemCssClass:"mstrmojo-ListBox-item",_markupPrefix:function(){var ir=this.itemRenderer;return(ir&&ir.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="0" cellpadding="0"><tbody>');},_markupSuffix:function(){var ir=this.itemRenderer;return(ir&&ir.markupSuffix)||"</tbody></table>";},_itemPrefix:function(){var ir=this.itemRenderer;return(ir&&ir.itemPrefix)||('<tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'"><td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var ir=this.itemRenderer;return(ir&&ir.itemSuffix)||"</td></tr>";},_getItemNode:function(idx){var t=this.itemsNode,rs=t&&t.rows,r=rs&&rs[idx];return r&&r.cells[0].firstChild;}});}());