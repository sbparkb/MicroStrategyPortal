(function(){mstrmojo.requiresCls("mstrmojo.dom");var FLOATING_TB_CSS="mstrmojo-floating-toolbar-lightbox";var FLOATING_BAR_CSS="mstrmojo-floating-toolbar";var FLOATING_CELL_CSS="mstrmojo-floating-toolbar-cell";var FIXED_TB_CSS="mstrmojo-fixed-toolbar-lightbox";var FIXED_BAR_CSS="mstrmojo-fixed-toolbar";var FIXED_CELL_CSS="mstrmojo-fixed-toolbar-cell";var CTN_CSS_SUFFIX=" hasToolBar";var BTN_CSS_PREFIX="mstrmojo-Button mstrmojo-InteractiveButton mstrmojo-oivmSprite ";var BTN_CNT_CSS="mstrmojo-Button-text";var SL=27;mstrmojo._HasToolbar=mstrmojo.provide("mstrmojo._HasToolbar",{_mixinName:"mstrmojo._HasToolbar",postBuildRendering:function TB_postBuildRendering(){this._super();var tb=this.getToolbarCfg();if(!tb||this.defn.ttl){return ;}var cn=this.containerNode;if(cn){var d=this._createToolbar(FLOATING_BAR_CSS,FLOATING_CELL_CSS);d.className=FLOATING_TB_CSS;cn.className+=CTN_CSS_SUFFIX;cn.insertBefore(d,cn.firstChild);var dm=this.domNode,ofst=mstrmojo.boxmodel.offset(dm,this.parent&&this.parent.domNode);if(ofst.top<SL){d.style.top=(SL-ofst.top)+"px";}}},_createToolbar:function TB_addBtns(barCss,btnCss){var tb=this.getToolbarCfg(),me=this,d=document,dv=d.createElement("div"),tbl=d.createElement("table"),tr=d.createElement("tr"),td=d.createElement("td");dv.appendChild(tbl);tbl.className=barCss;td.className=btnCss;tr.appendChild(td);tbl.appendChild(tr);var fnClick=function(e){me.onClick(e);},i;for(i in tb){var div=d.createElement("div");div.className=BTN_CSS_PREFIX+tb[i].css[0];var cnt=d.createElement("div");cnt.className=BTN_CNT_CSS;cnt.nodeValue="&nbsp;";cnt.setAttribute("ix",i);cnt.setAttribute("cix","0");div.appendChild(cnt);td.appendChild(div);div.onclick=fnClick;}return dv;},renderToolbar:function TB_rndToolbar(slot){if(!this.getToolbarCfg()){return ;}var fc=slot.firstChild,tb=this._createToolbar(FIXED_BAR_CSS,FIXED_CELL_CSS);tb.className=FIXED_TB_CSS;if(fc){slot.insertBefore(tb,fc);}else{slot.appendChild(tb);}},onClick:function TB_clk(e,hWin){var d=mstrmojo.dom,b=d.eventTarget(hWin,e),cix=b.getAttribute("cix"),ix=b.getAttribute("ix");var tb=this.toolbarCfg[ix],tbFn=tb.callback;if(tbFn&&this[tbFn]&&this[tbFn]()){cix=++cix%tb.css.length;b.parentNode.className=BTN_CSS_PREFIX+tb.css[cix];b.setAttribute("cix",cix);}}});}());