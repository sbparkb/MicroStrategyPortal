(function(){mstrmojo.requiresCls("mstrmojo.ListBase");mstrmojo.SelectBox=mstrmojo.declare(mstrmojo.ListBase,null,{scriptClass:"mstrmojo.SelectBox",size:10,cssDisplay:"inline",markupString:'<select id="{@id}" class="mstrmojo-SelectBox {@cssClass}" style="{@cssText}" size="{@size}" {@multipleHtml} mstrAttach:keyup,change tstid="{@tstid}">{@itemsHtml}</select>',markupSlots:{itemsContainerNode:function(){return this.domNode;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onenabledChange:function(){this.domNode.disabled=!this.enabled;}},itemCssClass:"mstrmojo-selectbox-item",itemDisplayField:"n",itemIdField:"v",showItemTooltip:false,itemRenderer:{render:function(item,idx,widget){var itemNm=mstrmojo.string.htmlAngles((widget.getItemName)?widget.getItemName(item,idx):(widget.itemDisplayField&&item[widget.itemDisplayField]));return'<option class="'+widget.itemCssClass+'" value="'+((widget.getItemValue)?widget.getItemValue(item,idx):(widget.itemIdField&&item[widget.itemIdField]))+'" '+((widget.selectedIndices[idx])?'selected="true" ':"")+((widget.showItemTooltip)?'title="'+mstrmojo.string.encodeXMLAttribute(itemNm)+'"':"")+">"+itemNm+"</option>";},select:function(el,item,idx,widget){el.selected=true;},unselect:function(el,item,idx,widget){el.selected=false;}},buildRendering:function bldRnd(){this.multipleHtml=this.multiSelect?' multiple="true" ':"";this._super();delete this.multipleHtml;},_getItemNode:function(idx){var s=this.scrollboxNode;return s&&s.options[idx];},prechange:function prechg(evt){if(this._syncDom){return ;}this._syncDom=true;var el=this.scrollboxNode;if(this.multiSelect){var os=el.options,idxs=[];for(var i=0,len=os.length;i<len;i++){if(os[i].selected){idxs.push(i);}}this.select(idxs);}else{this.singleSelect(el.selectedIndex);}delete this._syncDom;},prekeyup:function(evt){var el=this.scrollboxNode,isChanged=false;if(this.multiSelect){var os=el.options;for(var i=0,len=os.length;i<len;i++){if(os[i].selected!==!!this.selectedIndices[i]){isChanged=true;break;}}}else{if(el.selectedIndex!==this.selectedIndex){isChanged=true;}}if(isChanged){var e=evt;e.name="change";this.raiseEvent(evt);}},onselectionChange:function onselchg(evt){if(!this._syncDom){this._super(evt);}}});})();