(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var $ARR=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(params,callback){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(params,callback,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,callback,params,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(ob,item,callback){var bc=ob.blockCount,params={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:bc,includeAncestorInfo:"true",includeObjectDesc:ob.includeObjectDesc};if(ob.folderLinksContextId){params.folderLinksContextId=ob.folderLinksContextId;}if(ob.sId){params.sessionState=ob.sId;}if(item.fid){params.rootFolderID=item.fid;}else{if(item.fty){params.rootFolderType=item.fty;}}if(ob.browsableTypes){params.objectType=ob.browsableTypes;}if(item.blockBegin){params.blockBegin=item.blockBegin;}if(item.searchPattern){if(ob.enableQuickSearch){params.quickSearch=ob.enableQuickSearch;}params.searchPattern=item.searchPattern;if(item.recursive){params.recursive=item.recursive;}}this.serverRequest(params,callback);},newFolder:function(fid,n,d,cb){var params={taskId:"createFolder",taskContentType:"json",folderID:fid,name:n,description:d};this.serverRequest(params,cb);},loadObjects:function loadObjects(objs,callback,showWait,includeDetails){var ids=[],tps=[];$ARR.forEach(objs,function(obj){ids.push(obj.did);tps.push(obj.t);});if(objs.length>0&&includeDetails){this.serverRequest({taskId:"getObjectInfo",objectIDs:ids.join(","),objectTypes:tps.join(","),includeDetails:true},callback,showWait);}else{callback.success();}}});}());