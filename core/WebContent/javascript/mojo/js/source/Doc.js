(function(){mstrmojo.requiresCls("mstrmojo.StackContainer","mstrmojo._IsRwDocument","mstrmojo._HasBuilder","mstrmojo._HasLayout","mstrmojo.express.ui._IsDocumentView","mstrmojo.array");mstrmojo.Doc=mstrmojo.declare(mstrmojo.StackContainer,[mstrmojo._HasBuilder,mstrmojo._IsRwDocument,mstrmojo._HasLayout,mstrmojo.express.ui._IsDocumentView],{scriptClass:"mstrmojo.Doc",cssClass:"mstrmojo-Doc",markupSlots:{containerNode:function(){return this.domNode;},popupNode:function(){return this.domNode;},drillLinkMenuNode:function(){return this.domNode;}},layoutConfig:{h:{containerNode:"100%"},w:{containerNode:"100%"}},getLayouts:function(){return this.children;},buildChildren:function buildChildren(noAddChildren){if(this._super(false)){var k=this.model.getSelectedKey(this.node),i=(k!==null)?mstrmojo.array.find(this.children,"k",k):-1,ch=(i>-1)?this.children[i]:null;if(ch){this.set("selected",ch);}return true;}return false;},restoreLayoutState:function restoreLayoutState(selectedChild){this._super(selectedChild);var childZoom=selectedChild.defn.zf;if((this.zf!==childZoom||this.model.getZoomFactor()!==childZoom)&&this.updateZoom){this.zf=childZoom;this.updateZoom();}},_set_selected:function _set_selected(prop,layout){if(!this.selected){return this._super(prop,layout);}if(layout){var me=this,superMethod=this._super,newKey=layout.k;this.getNewLayout({layoutKey:newKey},this.children,(newKey!==this.model.currlaykey),{success:function(newLayout){var old=me.selected;superMethod.call(me,prop,newLayout);me.raiseEvent({name:"selectedChange",prop:"selected",value:newLayout,valueWas:old});}});}return true;},onLayoutRebuilt:function onLayoutRebuilt(layout){this._set_selected("selected",layout);},replaceLayout:function replaceLayout(oldLayout,newLayoutNode){var idx=this.removeChildren(oldLayout);oldLayout.destroy();var c=this.builder.build([newLayoutNode],this.model);this.addChildren(c,idx);return c[0];},getSelectedLayoutWidget:function getSelectedLayout(){return this.selected;},selectorMenuRef:"mstrmojo.SelectorMenu",fpMenuRef:"mstrmojo.FilterPanelMenu"});}());