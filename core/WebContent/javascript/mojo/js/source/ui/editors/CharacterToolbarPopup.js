(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.ToolbarPopup","mstrmojo.ui.editors._HostsControls","mstrmojo.ui.editors.controls._HasCharacterGroup","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.models.FormatModel","mstrmojo.css");var $FORMAT_MODEL=mstrmojo.models.FormatModel;mstrmojo.ui.editors.CharacterToolbarPopup=mstrmojo.declare(mstrmojo.ui.editors.ToolbarPopup,[mstrmojo.ui.editors._HostsControls,mstrmojo.ui.editors.controls._HasCharacterGroup],{scriptClass:"mstrmojo.ui.editors.CharacterToolbarPopup",textAlignJustify:true,textAlignValueMap:null,textAlignFmtName:mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES.TEXT_ALIGN,btnTextAlign:null,init:function init(props){this._super(props);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditCharacter");var includeTextJustify=this.textAlignJustify,$this=this,fnChange=function(name,newValue,oldValue){$this.raiseFormatValueChange(name,newValue,oldValue);},controls=this.getHCGControls(fnChange),fontFamily=controls.fontFamily,fontSize=controls.fontSize,fontColor=controls.fontColor,textAlignProps={alias:"btnTextAlign",includeJustify:includeTextJustify,onValueChange:function(newValue,oldValue){fnChange($this.textAlignFmtName,newValue,oldValue);}};fontFamily.width="125px";fontSize.width="50px";fontColor.width="50px";this.width=includeTextJustify?"485px":"456px";var textAlignMap=this.textAlignValueMap;if(textAlignMap){textAlignProps.itemsValueMap=textAlignMap;}this.addChildren([fontFamily,controls.fontStyle,fontSize,fontColor,new mstrmojo.vi.ui.TextAlignButtonBar(textAlignProps)]);},shouldPropagateLockHover:function shouldPropagateLockHover(){return false;},setFormatSource:function setFormatSource(formats){this._super(formats);this.syncControls(function(){if(this.textAlignFmtName in formats){this.btnTextAlign.singleSelectByField(formats[this.textAlignFmtName],"v");}else{this.btnTextAlign.singleSelectByField($FORMAT_MODEL.getFormatBlockValue(formats,$FORMAT_MODEL.ENUM_PROPERTY_NAMES.TEXT_ALIGN),"id");}});}});}());