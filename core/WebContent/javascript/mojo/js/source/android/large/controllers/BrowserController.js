(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.controllers._SupportsQueuedTransactions","mstrmojo.android.EnumMenuOptions","mstrmojo.hash","mstrmojo.array");mstrmojo.requiresDescs(8394);var EnumMenus=mstrmojo.android.EnumMenuOptions,popDimensions={160:{h:700,w:550},213:{h:700,w:550},240:{h:1000,w:750},320:{h:1400,w:1000}};mstrmojo.android.large.controllers.BrowserController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,[mstrmojo.android.controllers._SupportsQueuedTransactions],{scriptClass:"mstrmojo.android.large.controllers.BrowserController",getDefaultMenus:function getDefaultMenus(){return EnumMenus.SETTINGS+EnumMenus.HELP+EnumMenus.LEARN;},start:function start(params){this._super(params);var view=this.view=this.newView("Browser"),screenType=params.screenType;view.set("orientation",this.orientation);this.rootCtrl.updateContent(view);var propsController=this._propsController=mstrApp.controllerFactory.newController("Properties",{rootCtrl:this.rootCtrl,orientation:this.orientation});propsController.start({});if(screenType){var EnumHSType=mstrmojo.android.controllers.RootController.EnumHSType;switch(params.screenType){case EnumHSType.FOLDER:this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(params.st),params),params);break;case EnumHSType.CUSTOM:this.spawn(mstrApp.controllerFactory.newController("HomeScreen",params));break;default:var projectCtrl=mstrApp.controllerFactory.newController("Projects",{hsc:true});this.spawn(projectCtrl);}}},updateDisplayMessage:function updateDisplayMessage(view){this.view.updateDisplayMessage(view);},canDetach:function canDetach(){return false;},makeCurrent:function makeCurrent(isBack){var nextController=this.nextController;if(nextController){nextController.makeCurrent(isBack);}},onorientationChange:function onorientationChange(){var dialog=this._propsDialog;if(dialog){dialog.close();}var orientation=this.orientation;mstrmojo.array.forEach([this._propsController,this.view],function(dependent){if(dependent){dependent.set("orientation",orientation);}});this._super();},goBack:function goBack(){var nextController=this._propsController.nextController||this.nextController;return(nextController&&nextController.goBack())||false;},updateItemProperties:function updateItemProperties(defaultMsg,item,ctrlId,isAvail){var propsCtrl=this._propsController;if(item&&(item.propsPopup||this.orientation)){var view=propsCtrl.extractView(),dialog;delete view.slot;view.onOpenItem=function(){dialog.close();};dialog=this._propsDialog=mstrApp.showDialog({cssClass:"mstrmojo-TabletPropertiesView-portrait",autoClose:true,src:this,popDimensions:popDimensions[mstrMobileApp.getDeviceDPI()],children:[view],onClose:function(){delete this.src._propsDialog;dialog.removeChildren(view);view.onOpenItem=mstrmojo.emptyFn;propsCtrl.restoreView(view);}});}propsCtrl.updateItemProperties(defaultMsg,item,ctrlId,isAvail);},updateFolder:function updateFolder(folderView,title,isBack){var view=this.view,rootCtrl=this.rootCtrl;if(!view.domNode){rootCtrl.updateContent(view,undefined,isBack);rootCtrl.restoreNavigation();folderView.controller.syncItemProperties();}view.updateFolder(folderView,this.rootCtrl.getPath());},updateProperties:function updateProperties(view){this.view.updateProperties(view);},syncPath:function syncPath(){this.view.updateFolder(null,this.rootCtrl.getPath());},updateActionToolbar:function updateActionToolbar(tbCfg){this.getTxnToolbarButton(tbCfg);return this._super(tbCfg);}});}());