(function(){mstrmojo.requiresCls("mstrmojo.android.ui.Button","mstrmojo.android.large.ui.CalendarMarkupBuilder","mstrmojo.android.ui.CalendarDialog","mstrmojo.android.EnumOrientationTypes","mstrmojo.dom","mstrmojo.css");var $D=mstrmojo.dom,$CSS=mstrmojo.css,$BTN=mstrmojo.android.ui.Button.newButton,CANCEL_TEXT=mstrmojo.desc(221,"Cancel"),CLEAR_TEXT=mstrmojo.desc(2827,"Clear"),OK_TEXT=mstrmojo.desc(1442,"OK");function alignView(isTargetInView){var dialogNode=this.domNode,targetDialogNode=this.targetDialog.domNode,targetListWidth=this.targetListWidth,offset=this.initialLeftPos;targetDialogNode.firstChild.style.left=(isTargetInView?0:-targetListWidth+offset)+"px";dialogNode.firstChild.style.left=(isTargetInView?targetListWidth:offset)+"px";}function setupTargetDialog(){var calendarDialog=this,calendarPosition=$D.position(calendarDialog[calendarDialog.popupNodeName]),offset=calendarDialog.initialLeftPos=calendarPosition.x,calendar=this.calendar,calList=calendar.target,items=calList.items,sizingFactor=0.95,isLandscape=mstrApp.isLandscape(),availableHeight=mstrApp.getScreenDimensions().h-mstrApp.getContentDimensions().h,dialog;this.targetDialog=dialog=mstrApp.showDialog({title:calendar.title,manualClose:true,anchor:document.body,autoClose:true,anchorOffset:10,children:[calList],buttons:[$BTN((items&&items.length)?CLEAR_TEXT:CANCEL_TEXT,function(){calendarDialog.getCancelBtnFn();},{alias:"cancelBtn"}),$BTN(OK_TEXT,calendar.fnOk)],_elasticChild:calList,positionDialog:function(){var popupNodeStyle=this[this.popupNodeName].style;popupNodeStyle.top=(isLandscape?availableHeight:calendarPosition.y)+"px";popupNodeStyle.left=(isLandscape?0:-calendarDialog.targetListWidth+offset)+"px";},popDimensions:{w:calendarDialog.targetListWidth*sizingFactor,h:calendarDialog.targetListHeight*(isLandscape?1:sizingFactor)},onClose:function(){calendarDialog.close();},onclick:function onclick(evt){calendarDialog.touchBegin({target:evt.e.target});},touchBegin:function touchBegin(touch){calendarDialog.touchBegin(touch);},cssClass:calendar.defaultCSS+" mstrmojo-CalListDialog"});$CSS.addClass(dialog.domNode,"animates");$CSS.addClass(calendarDialog.domNode,"animates");}mstrmojo.android.large.ui.CalendarDialog=mstrmojo.declare(mstrmojo.android.ui.CalendarDialog,null,{scriptClass:"mstrmojo.android.large.ui.CalendarDialog",markupBuilder:mstrmojo.android.large.ui.CalendarMarkupBuilder,init:function(props){this._super(props);var calendar=this.calendar;calendar.layoutConfig.h.monthNode=(this.popDimensions.h-100-28)+"px";calendar.title=this.title;calendar.fnOk=this.buttons[1].onclick;delete this.title;delete this.buttons;},postBuildRendering:function postBuildRendering(){this._super();setupTargetDialog.call(this);delete this.targetDialog._elasticChild;},getPopupDimensions:function getPopupDimensions(){var result=this._super();if(mstrApp.isLandscape()){result.h=mstrApp.getContentDimensions().h*0.9;}return result;},onclick:function onclick(evt){this.touchBegin({target:evt.e.target});},touchBegin:function touchBegin(touch){var $CONTAINS=$D.contains,isLandscape=mstrApp.isLandscape(),dialogNode=this.domNode,targetDialogNode=this.targetDialog.domNode,targetNode=touch.target;if(this.autoClose&&targetNode===this.curtainNode){mstrApp.closeDialog();}else{if(!isLandscape&&$CONTAINS(dialogNode,targetNode,true,dialogNode)){alignView.call(this);}else{if(!isLandscape&&$CONTAINS(targetDialogNode,targetNode,true,targetDialogNode)){alignView.call(this,true);}}}}});}());