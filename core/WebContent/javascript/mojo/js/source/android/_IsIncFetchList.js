(function(){mstrmojo.requiresCls("mstrmojo.TouchScroller");var OFFSET_PROP={v:{axis:"y",dimension:"height"},h:{axis:"x",dimension:"width"}};mstrmojo.android._IsIncFetchList=mstrmojo.provide("mstrmojo.android._IsIncFetchList",{_mixinName:"mstrmojo.android._IsIncFetchList",supportsIncFetch:true,ifDataHelper:null,ifDirection:"v",supportedEdges:mstrmojo.TouchScroller.EnumIncFetchEdges.end,initScroller:function initScroller(scroller){this._super(scroller);var dataHelper=this.ifDataHelper;if(dataHelper){scroller.attachEventListener("incFetch",this.id,function(evt){if(!this.supportsIncFetch){return ;}var me=this;dataHelper.next({success:function(e,items){me.addItems(items||e.items);me._scroller.STATUS_INC_FETCH=false;},failure:function(res){mstrmojo.alert("Error in fetching next: "+res);}},evt.edge);});}},updateScrollerConfig:function updateScrollerConfig(){var cfg=this._super(),incFetch=this.supportsIncFetch,dir=this.ifDirection,offsetProp=OFFSET_PROP[dir];if(cfg[dir+"Scroll"]){var offset=cfg.offset[offsetProp.axis];offset.incFetch=incFetch;offset.supportedEdges=this.supportedEdges;offset.pageSize=incFetch?(parseInt(this[offsetProp.dimension],10)-100):0;this.scrollerConfig=cfg;}return cfg;},addItems:function addItems(items){this._super(items);this.supportsIncFetch=((this.ifDataHelper.totalSize===-1)||(this.items.length<this.ifDataHelper.totalSize));if(this.updateScroller){this.updateScroller();}}});}());