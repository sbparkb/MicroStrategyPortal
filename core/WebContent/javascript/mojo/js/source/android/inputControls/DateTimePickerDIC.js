(function(){mstrmojo.requiresCls("mstrmojo.ui.MobileDateTimePicker","mstrmojo._IsInputControl","mstrmojo.android._HasPreviewButton","mstrmojo.date","mstrmojo.expr","mstrmojo.locales","mstrmojo.hash");mstrmojo.requiresDescs(2052,2170,7656);var $D=mstrmojo.date,$DESC=mstrmojo.desc,$HASH=mstrmojo.hash,CALENDAR=5,TIMEPICKER=6,DTP=mstrmojo.expr.DTP;mstrmojo.android.inputControls.DateTimePickerDIC=mstrmojo.declare(mstrmojo.ui.MobileDateTimePicker,[mstrmojo._IsInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.DateTimePickerDIC",cssText:"",valueField:"dtValue",popupTitle:"",init:function init(props){var dic=props.dic;if(dic.min!==undefined){props.min=$D.parseDateAndOrTime(dic.min);}if(dic.max!==undefined){props.max=$D.parseDateAndOrTime(dic.max);}props[this.valueField]=$HASH.clone($D.parseDateAndOrTime(props.value));if(dic.t===CALENDAR){props.dtp=dic.ict?DTP.TIMESTAMP:DTP.DATE;props.popupTitle=dic.ict?$DESC(7656,"Date and Time"):$DESC(2052,"Date");}else{if(dic.t===TIMEPICKER){props.dtp=DTP.TIME;props.minuteInterval=props.dic.itv;props.popupTitle=$DESC(2170,"Time");}}this._super(props);},getCurValue:function getCurValue(forDisplay){var oldDateTime=this[this.valueField]||{},date=this.getDate()||oldDateTime.date||{year:1970,month:1,day:1},time=this.getTime()||oldDateTime.time||{hour:0,min:0,sec:0},config=this.dic,dt=parseInt(config.dt,10),LD=mstrmojo.locales.datetime,timeFormat=LD.TIMEOUTPUTFORMAT,dateFormat=LD.DATEOUTPUTFORMAT,displayDate=$D.formatDateInfo(date,dateFormat),displayTime=$D.formatTimeInfo(time,timeFormat);if(forDisplay){if(config.t===CALENDAR){return config.ict?(displayDate+" "+displayTime):displayDate;}return displayTime;}if(dt===DTP.TIMESTAMP){return displayDate+" "+displayTime;}if(dt===DTP.TIME){return displayTime;}return displayDate;},getTime:function getTime(){if(!mstrApp.useBinaryFormat){return this._super();}else{return this[this.valueField].time;}},getDate:function getDate(){if(!mstrApp.useBinaryFormat){return this._super();}else{return this[this.valueField].date;}},updateTime:function updateTime(newTime){if(mstrApp.useBinaryFormat){var time=this[this.valueField].time;time.hour=newTime.hour;time.min=newTime.min;}},updateDate:function updateDate(newDate){if(mstrApp.useBinaryFormat){var date=this[this.valueField].date;date.year=newDate.year;date.month=newDate.month;date.day=newDate.day;}},updateDateAndTime:function updateDateAndTime(newDateAndTime){if(mstrApp.useBinaryFormat){this.updateTime(newDateAndTime.time);this.updateDate(newDateAndTime.date);}},renderPreview:function renderPreview(){this.renderPreviewButton(this.openerNode,this.getCurValue(true));}});}());