(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ResultSetController","mstrmojo.android.controllers._IsReportController");function getUpdateXtabCallback(ctrl){return{success:function(res){ctrl.setData(res);}};}function initiateXtabInteractivity(methodName,args){args.push(getUpdateXtabCallback(this));var model=this.model;model[methodName].apply(model,args);}mstrmojo.android.controllers.XtabController=mstrmojo.declare(mstrmojo.android.controllers.ResultSetController,[mstrmojo.android.controllers._IsReportController],{scriptClass:"mstrmojo.android.controllers.XtabController",initModel:function initModel(){return mstrApp.modelFactory.newModel("Xtab",{controller:this});},createView:function createView(res,params){var styleName=this.model.data.visName;if(styleName){var vis=mstrmojo.AndroidVisList.getVis(styleName);if(vis){params.viz=vis;}}var xtab=this.view=this.newView("Xtab",params);xtab.setModel(this.model);return xtab;},afterReprompt:function afterReprompt(response){this.view.set("gridData",response);this._super(response);},setData:function setData(res){var xtab=this.view;xtab.unrender();xtab.set("gridData",res);var dim=mstrApp.getContentDimensions();xtab.width=dim.w+"px";xtab.height=dim.h+"px";xtab.render();},hasPageBy:function hasPageBy(){var data=this.model.data;if(this.view&&this.view.isTimeSeries){var phs=data&&data.phs;return !!(phs&&phs.show);}else{var gridHeaders=data&&data.ghs;return !!(gridHeaders&&gridHeaders.phs);}},checkCache:function checkCache(res,params,callback,option,config){this._super(res||{ifc:true,ci:this.model.data.ci},params,callback,option,config);},onDrill:function onDrill(view,action){var me=this,superDrill=this._super;this.checkCache(this.model.data,{did:this.did,t:this.t,st:this.ctrlType},function(){superDrill.call(me,action);},false,{silent:false,showWait:true});},onSort:function onSort(action){initiateXtabInteractivity.call(this,"sort",[action]);},onPivot:function onPivot(action){initiateXtabInteractivity.call(this,"pivot",[action]);},onPageBy:function onPageBy(pageByKeys){this.model.pageBy(pageByKeys,mstrmojo.func.wrapMethods(getUpdateXtabCallback(this),{failure:function(res){mstrApp.onerror(res);}}));},onDownloadGridData:function onDownloadGridData(view,action){this.model.downloadGridData(action);}});}());