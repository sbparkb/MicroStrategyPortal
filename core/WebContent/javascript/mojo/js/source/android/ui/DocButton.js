(function(){mstrmojo.requiresCls("mstrmojo.DocButton","mstrmojo._HasDrillLinks","mstrmojo.ui.MobileCheckList","mstrmojo.android.ui.Button","mstrmojo.dom","mstrmojo.array");function setPressedState(isPressed){this.set("pressed",isPressed);}function hexToRgba(hex,alpha){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?"rgba("+parseInt(result[1],16)+","+parseInt(result[2],16)+","+parseInt(result[3],16)+","+alpha+")":"";}function executeLink(link){this.model.executeLink(link,this.target,this);}function showLinkList(){var drillLinks=this.drillLinkItems,id=this.id;if(drillLinks.length===1){setPressedState.call(this,false);executeLink.call(this,drillLinks[0].url);return ;}this._linksOpen=true;mstrApp.showDialog({title:this.defn.n,children:[{scriptClass:"mstrmojo.ui.MobileCheckList",items:drillLinks,multiSelect:false,isElastic:true,hasEvenRows:true,postselectionChange:function(evt){mstrApp.closeDialog();executeLink.call(mstrmojo.all[id],drillLinks[evt.added[0]].url);}}],onClose:function(){var btn=mstrmojo.all[id];setPressedState.call(btn,false);delete btn._linksOpen;},buttons:[mstrmojo.android.ui.Button.newButton(mstrmojo.desc(221,"Cancel"))]});}mstrmojo.android.ui.DocButton=mstrmojo.declare(mstrmojo.DocButton,[mstrmojo._HasDrillLinks],{scriptClass:"mstrmojo.android.ui.DocButton",touchBegin:function touchBegin(){if(!this.linkEnabled){return false;}setPressedState.call(this,true);return true;},touchTap:function touchTap(){if(this.ifw){this.model.showInfoWin(this.ifw,(this.getAnchor&&this.getAnchor())||this.domNode,"v");return ;}var dl=this.drillLinkItems,length=(dl&&dl.length)||0;if(length>0){showLinkList.call(this);}},touchSelectBegin:function touchSelectBegin(){this.touchTap();},touchEnd:function touchEnd(){if(!this._linksOpen){setPressedState.call(this,false);}},setBackgroundColor:function setBackgroundColor(){var isPressed=!!this.pressed,defn=this.defn,domNode=this.domNode,fmts=this.fmts,containerNodeStyle=this.buttonContainerNode.style,domNodeStyle=this.domNode.style,containerColor=isPressed?defn.bhlc:(fmts["background-color"]||""),domColor=isPressed?hexToRgba(defn.bhlc,0.4):"";containerNodeStyle.backgroundColor=containerColor;containerNodeStyle.borderColor=containerColor;domNodeStyle.borderColor=domColor;domNodeStyle.backgroundColor=domColor;},getDPI:function getDPI(){return mstrMobileApp.getDeviceDPI();}});var $BTN=mstrmojo.android.ui.DocButton;$BTN.prototype.markupString=$BTN.prototype.markupString.replace(new RegExp(" mstrAttach:[a-zA-Z,]*"),"");$BTN.prototype.formatHandlers.domNode=mstrmojo.array.filter([].concat($BTN.prototype.formatHandlers.domNode),function(prop){return(prop!=="P"&&prop!=="B");});}());