(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.android._IsList","mstrmojo._TouchGestures","mstrmojo.dom","mstrmojo.css");function cleanUpMenu(){var handler=this._tchHandler;if(handler){handler.clear();delete this._tchHandler;}this.clearSelect();mstrApp.setMenuStatus(this.id,false);}mstrmojo.android.ui.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo.android._IsList,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Menu",init:function init(props){this._super(props);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ActionMenu");this._lastVisible=this.visible;},setMaxWidth:false,markupMethods:{onvisibleChange:function(){var isVisible=!!this.visible,domNode=this.domNode,domNodeStyle=domNode.style;domNodeStyle.display=(isVisible)?this.cssDisplay:"none";if(this.parent&&this.parent.propogateMenuVisibleChange&&isVisible!=this._lastVisible){this._lastVisible=isVisible;this.parent.propogateMenuVisibleChange(isVisible);}if(isVisible&&this.setMaxWidth){domNodeStyle.maxWidth=(Math.round(mstrApp.getScreenDimensions().w*0.98)-mstrmojo.dom.position(domNode).x)+"px";}}},onvisibleChange:function onvisibleChange(evt){if(evt.value){var id=this.id;this._tchHandler=mstrmojo.touchManager.attachEventListener("touchesBegin",id,function(evt){if(evt.srcId!==id){this.set("visible",false);evt.ignore=true;}});mstrApp.setMenuStatus(id,true);}else{cleanUpMenu.call(this);}},onUnRender:function onUnRender(){cleanUpMenu.call(this);}});}());