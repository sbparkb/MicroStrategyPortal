(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Button","mstrmojo.android.medium.ui.CalendarMarkupBuilder","mstrmojo.android.ui.CalendarDialog","mstrmojo.android.EnumOrientationTypes");var ENUM_MODE_CALENDAR=true,DPI={160:{YEAR:80,CELL:40},240:{YEAR:100,CELL:60},320:{YEAR:120,CELL:80}},CLEAR_TEXT=mstrmojo.desc(2827,"Clear");function cacheElasticHeight(){if(!this.elasticHeight){this.contentList.elasticHeight=parseInt(this.calendar.domNode.offsetHeight,10);}}mstrmojo.android.medium.ui.CalendarDialog=mstrmojo.declare(mstrmojo.android.ui.CalendarDialog,null,{scriptClass:"mstrmojo.android.medium.ui.CalendarDialog",markupBuilder:mstrmojo.android.medium.ui.CalendarMarkupBuilder,currentViewMode:ENUM_MODE_CALENDAR,requiredOrientation:mstrmojo.android.EnumOrientationTypes.PORTRAIT,init:function(props){this._super(props);var $this=this,calendar=this.calendar,target=calendar.target,dpi=mstrMobileApp.getDeviceDPI();calendar.layoutConfig.h={monthNode:(8*DPI[dpi].CELL)+"px",yearNode:DPI[dpi].YEAR+"px"};target.visible=this.currentViewMode!==ENUM_MODE_CALENDAR;this.addChildren([target]);this._elasticChild=target;var cancelButton=this.buttons[0],selectedDates=calendar.selectedDates;cancelButton.onclick=function(){return $this.getCancelBtnFn();};if(selectedDates&&selectedDates.length>0){cancelButton.text=CLEAR_TEXT;}},touchTap:function touchTap(touch){if(this._super){this._super(touch);}var viewMode=!this.currentViewMode,isCalCurrent=viewMode===ENUM_MODE_CALENDAR,contentList=this.contentList,calendar=this.calendar;this.currentViewMode=viewMode;if(mstrmojo.dom.contains(this.titleNode,touch.target,true,this.domNode)===true){cacheElasticHeight.call(this);calendar.set("visible",isCalCurrent);contentList.set("visible",!isCalCurrent);contentList.rowHeight=contentList.rowHeight||-1;calendar.syncListItemsWithSelections(contentList.getSelectedItems());}}});}());