(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.DropDownList");function initDocGroupBy(){var wIcon=new mstrmojo.WaitIcon(),fn=function(evt){this.controller.onGroupBy(this,{groupbyKey:evt.src.k,elementId:evt.value},function(v){wIcon.set("visible",v);});};for(var i=0,cnt=this.data.length;i<cnt;i++){var p=this.data[i];var c=this.addChildren(new mstrmojo.DropDownList({k:p.k,title:p.unit.target.n+":",idx:p.unit.idx,cssClass:"mstrmojo-DocGroupBy-unit",selectCssClass:"mstrmojo-DocGroupBy-unit-select"}));c.options=p.unit.elms;c.attachEventListener("selectedChange",this.id,fn);}this.addChildren(wIcon);}function updateDocGroupBy(){var data=this.data,ch=this.children;if(data.length===ch.length-1){for(var i=0,cnt=data.length;i<cnt;i++){var p=data[i].unit,c=ch[i];c.idx=p.idx;c.options=p.elms;c.refresh();}}}mstrmojo.DocGroupBy=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DocGroupBy",markupString:'<div id="{@id}" class="mstrmojo-DocGroupBy {@cssClass}"><div style="padding-top: 5px;"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},init:function init(props){this._super(props);this.ondataChange();},ondataChange:function ondataChg(){if(!this.data||!this.data.length){return ;}if(!this.hasRendered){initDocGroupBy.apply(this);}else{updateDocGroupBy.apply(this);}},areUnitsSetToAll:function(){var __result=true;mstrmojo.array.forEach(this.data,function(g){if(g.unit.elms[g.unit.idx].v!=="u;"){__result=false;return false;}});return __result;}});})();