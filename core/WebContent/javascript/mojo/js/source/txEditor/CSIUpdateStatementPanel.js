(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Table","mstrmojo.array","mstrmojo.txEditor.CSIClausePanel","mstrmojo.txEditor.CommonComponent");var $H=mstrmojo.hash,$A=mstrmojo.array,_TC=mstrmojo.txEditor.CommonComponent,_ST=_TC.STATEMENT_TYPE,_CSIKT=_TC.CSI_KEYWORD_TYPE;mstrmojo.txEditor.CSIUpdateStatementPanel=mstrmojo.declare(mstrmojo.Table,null,{scriptClass:"mstrmojo.txEditor.CSIUpdateStatementPanel",cssClass:"mstrmojo-TransactionEditor-CSIUpdateStatementPanel",markupMethods:$H.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";this.upClause.set("height",this.height/2);this.whClause.set("height",this.height/2);}}},$H.copy(mstrmojo.Table.prototype.markupMethods)),onvisibleChange:function(){if(!this.visible){this.upClause&&this.upClause.clearInputs();this.whClause&&this.whClause.clearInputs();}},layout:[{cells:[{}]},{cells:[{}]}],children:[{scriptClass:"mstrmojo.txEditor.CSIClausePanel",slot:"0,0",alias:"upClause",labelPrefix:"Update",getPrefixItems:function(){var items=[],tgtDs=mstrmojo.all.offModel.tgtDs;items.push({v:"UPDATE",tp:_CSIKT.UPDATE,isMstrObj:true});if(tgtDs&&tgtDs.n){items.push({v:tgtDs.n,oi:{did:tgtDs.did,t:tgtDs.tp,n:tgtDs.n},isMstrObj:true});}items.push({v:"SET",tp:_CSIKT.SET,isMstrObj:true});return items;},_preprocessTokenStream:function(its){var rmBeginTps={37:true,269:true,312:true,313:true},items=[];$A.forEach(its,function(item){if(!rmBeginTps[item.tp]){items.push(item);}});return items;},labelSuffix:"set",st:_ST.STATEMENT_UPDATE,bindings:{dsName:"mstrmojo.all.offModel.tgtDs.n",clause:function(){var its=mstrmojo.all.offModel.offTxs.tknstrm.clauses[0]||[];if(this.isActive()){this.clInput.set("items",this._preprocessTokenStream(its));}return its;}}},{scriptClass:"mstrmojo.txEditor.CSIClausePanel",slot:"1,0",alias:"whClause",getPrefixItems:function(){var items=this.clInput.items;return(items&&items.length>0)?[{v:"WHERE",tp:_CSIKT.WHERE,isMstrObj:true}]:[];},_preprocessTokenStream:function(its){var items=[];$A.forEach(its,function(item){if(item.tp!==-1&&item.tp!==_CSIKT.WHERE){items.push(item);}});return items;},clauseIdx:1,st:_ST.STATEMENT_UPDATE,labelPrefix:"where",bindings:{clause:function(){var its=mstrmojo.all.offModel.offTxs.tknstrm.clauses[1]||[];if(this.isActive()){this.clInput.set("items",this._preprocessTokenStream(its));}return its;}}}]});}());