(function(){mstrmojo.requiresCls("mstrmojo.DocSelectorViewFactory","mstrmojo.RadioList","mstrmojo.CheckList","mstrmojo.ListBoxHoriz","mstrmojo.ListBoxSelector","mstrmojo.LinkList","mstrmojo.ButtonList","mstrmojo.DropDownList","mstrmojo.Slider","mstrmojo.AttributeSlider","mstrmojo.TextBoxSelector");var STYLES=mstrmojo.DocSelector.STYLES;var OIVMWidgetMap={};OIVMWidgetMap[STYLES.RADIO]=["RadioListHoriz","RadioList"];OIVMWidgetMap[STYLES.CHECKBOX]=["CheckListHoriz","CheckList"];OIVMWidgetMap[STYLES.LIST]=["ListBoxHoriz","ListBoxSelector"];OIVMWidgetMap[STYLES.LINK]=["LinkListHoriz","LinkList"];OIVMWidgetMap[STYLES.BUTTON]=["ButtonListHoriz","ButtonList"];OIVMWidgetMap[STYLES.SCROLLER]="AttributeSlider";OIVMWidgetMap[STYLES.METRIC_SLIDER]="MetricSlider";OIVMWidgetMap[STYLES.METRIC_QUAL]="MetricQualification";OIVMWidgetMap[STYLES.SEARCH_BOX]="SearchBoxSelector";OIVMWidgetMap[STYLES.TEXT_BOX]="TextBoxSelector";var _oivmDocSelector={_mixinName:"_oivmDocSelector",preBuildRendering:function preBuildRendering(){var ret=this._super(),selectorStyle=this.style,ctrl=this.children[0],node=this.node,defn=node.defn,isHoriz=defn.horiz,fmts=this.getFormats(),color,height,backgroundColor,addCls,isPullDown=selectorStyle===STYLES.PULLDOWN;if(defn.hm===0&&selectorStyle!==STYLES.SCROLLER&&selectorStyle!==STYLES.METRIC_SLIDER){this.contentNodeCssText+="overflow-"+(isHoriz?"x":"y")+":hidden;";}if(fmts){ctrl.color=color=fmts.color;height=fmts.height;backgroundColor=fmts["background-color"];addCls=fmts["text-decoration"];if(addCls){mstrmojo.css.addWidgetCssClass(this,addCls);}}if(isPullDown){if(fmts){if(color){this.itemCssText+="color:"+color+";";}}ctrl.cssText=this.itemCssText;}else{ctrl.cellCssClass="";ctrl.tableCssText="table-layout:"+((defn.iwm===0)?"fixed":"auto")+";";if(height!==undefined){if(selectorStyle===STYLES.LIST){if(height.indexOf("px")==height.length-2){var hint=parseInt(height.substr(0,height.length-2));if(hint>4){hint=hint-4;}height=hint+"px";}}ctrl.cssText="height:"+height+";";}if(selectorStyle===STYLES.LIST&&backgroundColor){ctrl.cssText+="background-color:"+backgroundColor+";";}switch(selectorStyle){case STYLES.RADIO:case STYLES.CHECKBOX:ctrl.labelCssText=this.itemCssText;break;case STYLES.BUTTON:case STYLES.LINK:case STYLES.LIST:if(selectorStyle===STYLES.BUTTON){if(color){this.itemCssText+="color:"+color+";";}}if(isHoriz){this.itemCssText+="height:"+height+";";}ctrl.itemCssText=this.itemCssText;this["background-color"]=backgroundColor;break;}}var me=this,ifws=me.model.getTargetInfoWin(defn.tks),selectionCtrl=(isPullDown&&ctrl.list)?ctrl.list:ctrl;if(defn.ifw||(ifws&&ifws.length)){selectionCtrl.makeSelection=function(evt){me.showInfoWin(evt&&evt.selItem);};if(selectionCtrl.selectionPolicy!==undefined){if(!defn.multi){selectionCtrl.selectionPolicy="reselect";}if(!selectionCtrl.makeSelHandler&&defn.ct!=="4"){selectionCtrl.makeSelHandler=selectionCtrl.attachEventListener("selectionChange",selectionCtrl.id,function(evt){if(evt){var add=evt.added||[],rm=evt.removed||[],idx=add.length?add[0]:rm[0];if(idx!==undefined&&idx!==null&&ctrl.hasRendered){if(isPullDown){this.makeSelection({selItem:ctrl.domNode});}else{this.makeSelection({selItem:this._getItemNode(idx)});}}}});}}}return ret;},newPulldown:function newPulldown(selectorContainer){return new mstrmojo.DropDownList({k:selectorContainer.ck,cssDisplay:"block",cssClass:"mstrmojo-DocSelector-DropDownList",selectCssClass:"mstrmojo-DocSelector-DropDownList-select",onselectedChange:function(){if(!selectorContainer._inSyncPhase){selectorContainer.showInfoWin();selectorContainer.selectorControlChange(this);}}});},getWidgetClass:function getWidgetClass(selectorContainer,selectorStyle,isHoriz){var scriptClass=OIVMWidgetMap[selectorStyle];if(scriptClass){if(scriptClass.constructor===Array){scriptClass=scriptClass[isHoriz?0:1];}return scriptClass;}else{return this._super(selectorContainer,selectorStyle,isHoriz);}}};mstrmojo.OIVMDocSelectorViewFactory=mstrmojo.declare(mstrmojo.DocSelectorViewFactory,null,{scriptClass:"mstrmojo.OIVMDocSelectorViewFactory",getDocSelectorClass:function getDocSelectorClass(model,node){var cls=this._super(model,node);return mstrmojo.DynamicClassFactory.newComponent(cls,[_oivmDocSelector],null);},getOIVMDocSelectorMixin:function getOIVMDocSelectorMixin(){return _oivmDocSelector;}});}());