(function(){function getEvent(hWin,e){return e||(hWin||window).event;}mstrmojo.PositionType=null;var isIE=!!document.all,docMode=document.documentMode,ua=navigator.userAgent,isIE6=false,isIE7=false,isIE8=false,isIE9=false,isIE10=false,isDXIE=false;if(isIE){if(window.mstrConfig&&mstrConfig.isEdgeModeEnabled){isIE6=!!ua.match(/MSIE 6/);isIE7=((!!ua.match(/MSIE 7/)&&!docMode)||docMode===7);isIE8=(docMode===8);isIE9=(docMode===9);isIE10=(docMode===10);isDXIE=(!docMode||docMode<=9);}else{isIE6=!!ua.match(/MSIE 6/);isIE7=!!ua.match(/MSIE 7/);isIE8=!!ua.match(/MSIE 8/);isIE9=!!ua.match(/MSIE 9/);isIE10=!!ua.match(/MSIE 10/);isDXIE=!isIE10;}}var isFF=!isIE&&!!ua.match(/Firefox/),bv=0,isAndroid=!!ua.match(/Android/),isIPad=!!ua.match(/iPad/),isIPhone=!!ua.match(/iPhone/),tch=!!document.createTouch||isAndroid,isPlayBook=!!ua.match(/PlayBook/),isWinPhone=!!ua.match(/Windows Phone/),isIEW3C=!isIE&&!!ua.match(/Trident.*rv/),CSS3_PREFIX=isFF?"-moz-":(isIE||isIEW3C)?"":"-webkit-",CSS3_TRANSFORM_PREFIX=isFF?"Moz":(isIE10||isIEW3C)?"":isIE?"ms":"webkit",CSS3_T_INITIAL=((isIE10||isIEW3C)?"t":"T"),CSS3_TRANSITION=CSS3_TRANSFORM_PREFIX+CSS3_T_INITIAL+"ransition";function buildCSS3Transform(){return CSS3_TRANSFORM_PREFIX+CSS3_T_INITIAL+"ransform";}function buildCSS3TransitionProperty(){return CSS3_TRANSITION+"Property";}function buildCSS3TransitionDuration(){return CSS3_TRANSITION+"Duration";}function buildCSS3TransitionEnd(){return(isIE10||isFF)?"transitionend":"webkitTransitionEnd";}function buildCSS3BoxShadow(){return CSS3_TRANSFORM_PREFIX+"BoxShadow";}var CSS3_TRANSFORM=buildCSS3Transform(),CSS3_TRANSITION_PROPERTY=buildCSS3TransitionProperty(),CSS3_TRANSITION_DURATION=buildCSS3TransitionDuration(),CSS3_TRANSITION_END=buildCSS3TransitionEnd(),CSS3_BOXSHADOW=buildCSS3BoxShadow();function getBrowserVersion(){if(!bv&&isFF){var nav=ua.match(/.*Firefox\/([\d|\.]*).*/);if(nav){bv=parseFloat(nav[1]);}}return bv;}function docScroll(){var x=0,y=0,w=window,d=document,b=d.body,de=d.documentElement;if(typeof w.pageYOffset==="number"){y=w.pageYOffset;x=w.pageXOffset;}else{if(b&&(b.scrollLeft||b.scrollTop)){y=b.scrollTop;x=b.scrollLeft;}else{if(de&&(de.scrollLeft||de.scrollTop)){y=de.scrollTop;x=de.scrollLeft;}}}return{x:x,y:y};}function setTranslateValue(num){num=num||0;num=String(num);return((num.indexOf("%",0))!==-1)?num:(num+"px");}function createTransformationString(x,y,z,use3d,translateString){if(!mstrmojo.dom.isWinPhone){use3d=(use3d||false||this.isHWAccelerated);}else{use3d=false;}var translateOpen=translateString+(use3d?"3d":"")+"(",translateClose=use3d?(","+z+")"):")";return translateOpen+x+","+y+translateClose;}var BOTTOM=2,CENTER=3;function alignDOM(e,h,v){var elementStyle=e.style,elementDisplay=elementStyle.display,windowDimensions=this.windowDim(),ds=docScroll();elementStyle.display="block";var hpos=windowDimensions.w-e.clientWidth,vpos=Math.max(windowDimensions.h-e.clientHeight,0),hm={4:0,5:hpos,3:hpos/2},vm={1:0,3:vpos/2,2:vpos};elementStyle.left=hm[h]+ds.x+"px";elementStyle.top=vm[v]+ds.y+"px";elementStyle.display=elementDisplay;}function attachUniqueEvent(el,eventName,f,phase){if(el.addEventListener){return el.addEventListener(eventName,f,!!phase);}f._id=f._id||attachUniqueEvent.guid++;el.events=el.events||{};var handlers=el.events[eventName];if(!handlers){handlers=el.events[eventName]={};if(el["on"+eventName]){handlers[0]=el["on"+eventName];}}handlers[f._id]=f;function handleUniqueEvent(event){event=event||window.event;var handles=this.events[event.type],i;for(i in handles){handles[i].call(this,event);}}el["on"+eventName]=handleUniqueEvent;}attachUniqueEvent.guid=1;function detachUniqueEvent(el,eventName,f,phase){if(!el){return ;}if(el.removeEventListener){el.removeEventListener(eventName,f,!!phase);}else{if(el.events&&el.events[eventName]){delete el.events[eventName][f._id];}}}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:ua,isIE:isIE,isIE6:isIE6,isIE7:isIE7,isIE8:isIE8,isIE9:isIE9,isIE10:isIE10,isIEW3C:isIEW3C,isNSIE:isDXIE,isDXIE:isDXIE,isFF:isFF,isWK:!!ua.match(/AppleWebKit/),isSafari:!!ua.match(/Safari/)&&!ua.match(/Chrome/),isChrome:!!ua.match(/AppleWebKit/)&&ua.match(/Chrome/),isHWAccelerated:!isAndroid,isAndroid:isAndroid,isIPad:isIPad,isPlayBook:isPlayBook,isWinPhone:isWinPhone,isMobile:isIPad||isIPhone||isWinPhone||isAndroid,supportsTouches:tch,TOUCHSTART:tch?"touchstart":"mousedown",TOUCHMOVE:tch?"touchmove":"mousemove",TOUCHEND:tch?"touchend":"mouseup",TOUCHCANCEL:tch?"touchcancel":"",RESIZE:tch?"orientationchange":"resize",CSS3_PREFIX:CSS3_PREFIX,CSS3_BOXSHADOW:CSS3_BOXSHADOW,CSS3_TRANSFORM:CSS3_TRANSFORM,CSS3_TRANSITION:CSS3_TRANSITION,CSS3_TRANSITION_PROPERTY:CSS3_TRANSITION_PROPERTY,CSS3_TRANSITION_DURATION:CSS3_TRANSITION_DURATION,CSS3_TRANSITION_END:CSS3_TRANSITION_END,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh"},htmlFeatures:{FILE_READER:"fr"},MOUSE_BUTTON:{LEFT:1,RIGHT:2},supports:function supports(featureName){var ffVer=this.isFF&&getBrowserVersion();switch(featureName){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||ffVer>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||ffVer>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);case this.htmlFeatures.FILE_READER:return !!(window.FileReader);}return false;},getOSInfo:function getOSInfo(){var unknown="Unknown",appVersion=navigator.appVersion,userAgent=navigator.userAgent,os=unknown;var clientStrings=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];var i;for(i=0;i<clientStrings.length;i++){var clientInfo=clientStrings[i];if(clientInfo.r.test(userAgent)){os=clientInfo.s;break;}}var osVersion=unknown;if(/Windows/.test(os)){osVersion=/Windows (.*)/.exec(os)[1];os="Windows";}switch(os){case"Mac OS X":osVersion=/Mac OS X (10[\.\_\d]+)/.exec(userAgent)[1];break;case"Android":osVersion=/Android ([\.\_\d]+)/.exec(userAgent)[1];break;case"iOS":osVersion=/OS (\d+)_(\d+)_?(\d+)?/.exec(appVersion);osVersion=osVersion[1]+"."+osVersion[2]+"."+(osVersion[3]|0);break;}return{name:os,version:osVersion};},transEndEvtNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},replace:function replace(target,replacement){if(target&&replacement){var p=target.parentNode;if(p){p.replaceChild(replacement,target);}}return replacement;},attachEvent:function attachEvent(el,eventName,f,phase){if(el.addEventListener){return el.addEventListener(eventName,f,!!phase);}return el.attachEvent("on"+eventName,f);},detachEvent:function dom_detach(el,eventName,f,phase){if(!el){return ;}if(el.removeEventListener){el.removeEventListener(eventName,f,!!phase);}else{el.detachEvent("on"+eventName,f);}},attachMarkupEvent:function attachMarkupEvent(id,el,eventName){var fnEventHandler=function(e){mstrmojo.all[id].captureDomEvent(eventName,window,e);};this.attachEvent(el,eventName,fnEventHandler);return fnEventHandler;},attachOneTimeEvent:function attachOneTimeEvent(el,eventName,f,forceUnique){var fn=function(evt){f(evt);if(forceUnique){detachUniqueEvent(this,eventName,fn);}else{mstrmojo.dom.detachEvent(this,eventName,fn);}};if(forceUnique){attachUniqueEvent(el,eventName,fn);}else{this.attachEvent(el,eventName,fn);}el=null;return fn;},attachMouseMoveEvents:function attachMouseMoveEvents(fnMove,fnUp){var $DOM=this,fnMouseUp=function(evt){if(fnUp){fnUp(evt);}$DOM.detachEvent(document,"mousemove",fnMove);$DOM.detachEvent(document,"mouseup",fnMouseUp);};$DOM.attachEvent(document,"mousemove",fnMove);$DOM.attachEvent(document,"mouseup",fnMouseUp);},captureDomEvent:function captureDomEvent(id,type,hWin,e,config){var x=mstrmojo.all[id];if(x){x.captureDomEvent(type,hWin,e,config);}},translate:function translate(el,x,y,z,extra,useTranslate3d){extra=(extra&&" "+extra)||"";el.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(x,y,z,useTranslate3d)+extra;},createTranslateString:function createTranslateString(x,y,z,useTranslate3d){x=setTranslateValue(x);y=setTranslateValue(y);z=setTranslateValue(z);return createTransformationString(x,y,z,useTranslate3d,"translate");},createScaleString:function createScaleString(x,y,z,useScale3d){x=x||0;y=y||0;z=z||0;return createTransformationString(x,y,z,useScale3d,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function dom_attchbuf(el,eventName,f,bufferSize){var key=el.id+"-"+eventName,info=this._bufferConnects[key];if(!info){info=this._bufferConnects[key]={elId:el.id,eventName:eventName,timer:null,bufferSize:bufferSize,listeners:[],callback:function(e){mstrmojo.dom._callback(e,mstrmojo.global,key);return true;}};this.attachEvent(el,eventName,info.callback);}info.listeners.push(f);},_callback:function _callback(e,hWin,key){var info=this._bufferConnects[key],timer=info&&info.timer;if(info&&!timer){var ms=(info.bufferSize===null)?this._bufferSize:info.bufferSize;if(info.bufferSize){info.timer=hWin.setTimeout(function(){mstrmojo.dom.updateBuffers(key);},ms);}else{mstrmojo.dom.updateBuffers(key);}}},updateBuffers:function updateBuffers(key){var info=this._bufferConnects[key],ls=info&&info.listeners,len=(ls&&ls.length)||0,i;for(i=0;i<len;i++){ls[i]();}if(info&&info.timer){delete info.timer;}},detachBufferedEvent:function detachBufferedEvent(el,eventName,f){if(!el){return ;}var key=el.id+"-"+eventName,info=this._bufferConnects[key],ls=info&&info.listeners,len=(ls&&ls.length)||0,i;if(len){for(i=len-1;i>-1;i--){if(ls[i]===f){ls.splice(i,1);}}if(!ls.length){this.detachEvent(el,eventName,info.callback);delete this._bufferConnects[key];if(info.timer){var global=mstrmojo.global;global.clearTimeout(info.timer);}}}},eventTarget:function evtTgt(hWin,e){e=getEvent(hWin,e);return e.target||e.srcElement;},isMac:function isMac(){return this.getOSInfo().name.toLowerCase().indexOf("mac")>=0;},isMetaKey:function isMetaKey(hWin,e){var isMac=this.getOSInfo().name.toLowerCase().indexOf("mac")>=0,evt=getEvent(hWin,e)||{};return(evt.ctrlKey&&!isMac)||(evt.metaKey&&isMac);},ctrlKey:function ctrl(hWin,e){return(getEvent(hWin,e)||{}).ctrlKey;},shiftKey:function shift(hWin,e){return(getEvent(hWin,e)||{}).shiftKey;},metaKey:function meta(hWin,e){return(getEvent(hWin,e)||{}).metaKey;},getButton:function getButton(hWin,e){return((Number(getEvent(hWin,e).button))===2)?2:1;},isPrimaryMouseBtn:function isPrimaryMouseBtn(e,hWin){return this.getButton(hWin||window,e)===1;},getMousePosition:function getMousePosition(e,hWin){hWin=hWin||window;var x,y;if(mstrmojo.dom.isIE){e=e||hWin.event;var d=document,b=d.body,de=d.documentElement;x=e.clientX+b.scrollLeft+(de.scrollLeft||0);y=e.clientY+b.scrollTop+(de.scrollTop||0);}else{x=e.pageX;y=e.pageY;}return{x:x,y:y};},position:function position(el,includeScroll){var p={x:0,y:0,w:0,h:0};if(el&&el.getBoundingClientRect){try{p=el.getBoundingClientRect();}catch(e){p={left:0,top:0,right:0,bottom:0,height:0,width:0};}p={x:p.left,y:p.top,w:p.right-p.left,h:p.bottom-p.top};if(this.isIE6||this.isIE7){var ownerDocument=el.ownerDocument;if(ownerDocument){var de=ownerDocument.documentElement,deo=de.getBoundingClientRect();p.x-=deo.left;p.y-=deo.top;}}}if(includeScroll){var ds=docScroll();p.x+=ds.x;p.y+=ds.y;}return p;},delta:function delta(el,elLimit){elLimit=elLimit||document.body;var pe=this.position(el),pr=this.position(elLimit);return{x:Math.round(pe.x-pr.x),y:Math.round(pe.y-pr.y)};},windowDim:function windowDim(){var w=0,h=0,win=window,d=document,de=d.documentElement,db=d.body;if(typeof (win.innerWidth)=="number"&&typeof (win.innerHeight)=="number"){w=win.innerWidth;h=win.innerHeight;}else{if(de&&(de.clientWidth||de.clientHeight)){w=de.clientWidth;h=de.clientHeight;}else{if(db&&(db.clientWidth||db.clientHeight)){w=db.clientWidth;h=db.clientHeight;}}}return{w:w,h:h};},center:function center(e){alignDOM.call(this,e,CENTER,CENTER);},bottomCenter:function bottomCenter(e){alignDOM.call(this,e,CENTER,BOTTOM);},clearBrowserHighlights:function clearBrowserHighlights(hWin){hWin=hWin||self;if(!hWin.getSelection){var doc=hWin.document,sel=doc&&doc.selection,em=sel&&sel.empty;if(em){try{sel.empty();}catch(ex){}}}else{var gs=hWin.getSelection,s=gs&&hWin.getSelection();if(s&&!s.isCollapsed){if(s.empty){s.empty();}else{if(s.removeAllRanges){s.removeAllRanges();}}}}},findAncestorByAttr:function fndAncAttr(el,attr,inclusive,elLimit){var node=inclusive?el:el&&el.parentNode;while(node&&(node!==elLimit)){var v=node.getAttribute&&node.getAttribute(attr);if(v!=null){return{node:node,value:v};}node=node.parentNode;}return null;},findAncestorByName:function fndAncNm(el,nodeName,inclusive,elLimit){nodeName=nodeName&&nodeName.toLowerCase();var node=inclusive?el:el&&el.parentNode;while(node&&(node!==elLimit)){var n=node.nodeName;if(n&&(n.toLowerCase()===nodeName)){return node;}node=node.parentNode;}return null;},contains:function cntns(elP,elC,inclusive,elLimit){var node=elC;if(!inclusive){node=node.parentNode;}while(node){if(node===elP){return true;}if(node===elLimit){break;}node=node.parentNode;}return false;},toggleSelection:function toggleSelection(el,isSelectable){el.setAttribute("unselectable",isSelectable?"off":"on");mstrmojo.css.toggleClass(el,"unselectable",!isSelectable);el.onselectstart=function(){return isSelectable;};if(!isSelectable){this.clearBrowserHighlights();}},preventDefault:function preventDefault(hWin,e){e=e||hWin.event;if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}},stopPropogation:function stopPropogation(hWin,e){e=e||hWin.event;if(e.stopPropagation){e.stopPropagation();}else{e.cancelBubble=true;}},firstTouch:function firstTouch(hWin,e){return e&&e.touches&&e.touches.length?e.touches[0]:(e||hWin.event);},firstChangedTouch:function firstChangedTouch(hWin,e){return e&&e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:(e||hWin.event);},isLandscape:function isLandscape(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function findWidget(el){while(el){var id=el.mstrmojoId;if(id!==null&&id!==undefined){return mstrmojo.all[id];}el=el.parentNode;}return null;},setCaret:function setCaret(el,pos){if(el.setSelectionRange){el.focus();el.setSelectionRange(pos,pos);}else{if(el.createTextRange){var tr=el.createTextRange();tr.move("character",pos);tr.select();}}},setInputSelection:function setInputSelection(el){if(el.select){el.focus();el.select();}else{if(el.createTextRange){el.createTextRange().select();}}},setElementSelection:function setElementSelection(el){if(window.getSelection){var range=document.createRange(),selection=window.getSelection();range.selectNodeContents(el);selection.removeAllRanges();selection.addRange(range);}else{if(document.body.createTextRange){var textRange=document.body.createTextRange();textRange.moveToElementText(el);textRange.select();}}},getHorizontalScroll:function getHorizontalScroll(){return docScroll().x;},getVerticalScroll:function getVerticalScroll(){return docScroll().y;},removeNode:function removeNode(id){var node=document.getElementById(id),parentNode=node&&node.parentNode;if(parentNode){return parentNode.removeChild(node);}}});}());