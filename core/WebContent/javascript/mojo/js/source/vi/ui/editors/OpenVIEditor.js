(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ObjectBrowser");mstrmojo.vi.ui.editors.OpenVIEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.OpenVIEditor",cssClass:"mstrmojo-OpenVI-Editor",title:mstrmojo.desc(11811,"Open a File"),help:"open_a_file_dialog_box.htm",startingFolder:null,item:null,multiSelect:false,selectedItems:null,children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",closeable:false,browsableTypes:"8,55",browsableViewMedias:"2048,8192",closeOnSelect:false,showCompletePath:false,searchVisible:true,upButtonVisible:true,multiSelect:false,scrollableIncFetch:true,useBothSglDblSelect:true,folderLinksContextId:30,bindings:{rootFolderID:function(){return this.parent.startingFolder;},multiSelect:"this.parent.multiSelect"}},{scriptClass:"mstrmojo.HBox",alias:"btnHBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(2309,"Open"),onclick:function(){var editor=this.editor;editor.onOK();editor.close();},bindings:{enabled:function(){return !!(this.parent.parent.multiSelect?this.parent.parent.selectedItem.length:this.parent.parent.item);},editor:"this.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.editor.close();},bindings:{editor:"this.parent.parent"}}]}],preBuildRendering:function(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];this.ob.onBrowseFolder=[this,"onOBBrowseFolder"];this.ob.onDblSelectCB=[this,"onOBDblSelect"];},postBuildRendering:function(){if(this._super){this._super();}this.ob.browse();},onOBSelect:function(item){if(this.multiSelect){this.set("selectedItems",item);}else{this.set("item",item);}},onOBBrowseFolder:function(item){if(this.multiSelect){this.set("selectedItems",null);}else{this.set("item",null);}},onOBDblSelect:function(item){this.onOBSelect(item);this.onOK();this.close();},onOK:function onOK(){var item=this.item;if(item){var evtParams={evt:3140,src:mstrApp.name+".3140",documentID:item.did};if(mstrApp&&mstrApp.rootCtrl&&mstrApp.rootCtrl.docCtrl){var saveCB={success:function(res){},ignoreOrgSucc:true,failure:function(res){},complete:function(res){mstrmojo.form.send(evtParams);}},targetURL="evt=3140&src="+mstrApp.name+".3140&documentID="+item.did;mstrApp.rootCtrl.docCtrl.saveBeforeClosing(saveCB,targetURL);}else{mstrmojo.form.send(evtParams);}}}});}());