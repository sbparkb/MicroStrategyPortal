(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.toolbars.Toolbar","mstrmojo.vi._MonitorsAppState");mstrmojo.requiresDescs(118,1013,1143,2919,2922,3473,3482,4538,6189,10096,11500,11694,11780,11783,13032,14494);var itemMarkup,pickerButtonMarkup;mstrmojo.vi.ui.toolbars.RootToolbar=mstrmojo.declare(mstrmojo.vi.ui.toolbars.Toolbar,[mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.toolbars.RootToolbar",tooltipOffset:-1,tooltipOpenDelay:500,keepArrowXPos:true,tooltipCss:{getItemCssClass:function(item){return item.cls;}},getTooltipThemeClass:function(){return"root-toolbar-tooltip";},getItemMarkup:function getItemMarkup(item){var currentItemMkp;if(item.tp==="pb"){currentItemMkp=pickerButtonMarkup=pickerButtonMarkup||this._super(item).replace("{@en@n}",'<div class="btn"><div class="text">{@en@n}</div><div class="icn"></div><div class="pdl"></div></div>');}else{currentItemMkp=itemMarkup=itemMarkup||this._super(item).replace("{@en@n}",'<div class="btn"><div class="text">{@en@n}</div><div class="icn"></div></div>');}return currentItemMkp;},getItemProps:function getItemProps(item,idx){var props=this._super(item,idx);if(item.active){props.addCls("active");}return props;},onAppStateChange:function onAppStateChange(evt){this._super(evt);this.set("isMasked",evt.value===mstrmojo.vi.VisualInsightApp.APP_STATES.SELECTOR_TARGETING);},openMenu:function openMenu(menuCfg,item){var rootCtl=this.parent.controller;if(rootCtl.lastMenuOpener===item){rootCtl.lastMenuOpener=null;return ;}rootCtl.lastMenuOpener=item;menuCfg.useTooltip=true;this._super(menuCfg,item);},onPopupAutoClosed:function onPopupAutoClosed(e,hWin){var selectedItem=this.getItemFromTarget(mstrmojo.dom.eventTarget(hWin,e)),rootCtl=this.parent.controller;if(!selectedItem||selectedItem!==rootCtl.lastMenuOpener){rootCtl.lastMenuOpener=null;}}});}());