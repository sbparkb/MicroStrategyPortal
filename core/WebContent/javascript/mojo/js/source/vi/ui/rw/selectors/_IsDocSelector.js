(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.vi.ui.rw.selectors.SearchableCheckList","mstrmojo.vi.ui.rw.selectors.CollapsibleCheckList","mstrmojo.vi.ui.rw.selectors.PageBySlider","mstrmojo.vi.ui.rw.selectors.PageByButtonBar","mstrmojo.vi.ui.rw.selectors.MetricQualification","mstrmojo.vi.ui.rw.selectors.MetricSlider","mstrmojo.vi.ui.rw.selectors.Slider","mstrmojo.vi.ui.rw.selectors.LinkList","mstrmojo.vi.ui.rw.selectors.ListBoxSelector","mstrmojo.css","mstrmojo.hash");var $HASH=mstrmojo.hash,$SELECTOR_ROOT="vi.ui.rw.selectors.",$STYLES=mstrmojo.DocSelector.STYLES;var widgetMap={};widgetMap[$STYLES.CHECKBOX]=widgetMap[$STYLES.RADIO]=$SELECTOR_ROOT+"SearchableCheckList";widgetMap[$STYLES.LIST]=["ListBoxHoriz",$SELECTOR_ROOT+"ListBoxSelector"];widgetMap[$STYLES.SCROLLER]=$SELECTOR_ROOT+"Slider";widgetMap[$STYLES.METRIC_SLIDER]=$SELECTOR_ROOT+"MetricSlider";widgetMap[$STYLES.METRIC_QUAL]=$SELECTOR_ROOT+"MetricQualification";widgetMap[$STYLES.LINK]=widgetMap[$STYLES.BUTTON]=$SELECTOR_ROOT+"LinkList";function isSelectContiguous(indices){var keys=Object.keys(indices),cnt=keys.length,min=Math.min.apply(null,keys),max=Math.max.apply(null,keys);return cnt===0||max-min===cnt-1;}mstrmojo.vi.ui.rw.selectors._IsDocSelector=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._IsDocSelector",{_mixinName:"mstrmojo.vi.ui.rw.selectors._IsDocSelector",model:null,multi:false,k:"",init:function init(props){this._super(props);mstrmojo.css.addWidgetCssClass(this,"vi-DocSelector");},layoutConfig:{h:{containerNode:"100%"},w:{containerNode:"100%"},xt:true},getLayoutOffsets:function getLayoutOffsets(){if(this.isInFilterPanel()){return null;}return{h:18,w:18};},update:function update(node){var formats=node.defn.fmts,isPageBy=this.isViPageBy,definition=node.defn;if(isPageBy||this.isInFilterPanel()){definition.fmts=$HASH.copyProps(["height","z-index"],formats);}else{definition.fmts=$HASH.copy(formats);}if(isPageBy){definition.multi=false;}this._super(node);},preBuildRendering:function preBuildRendering(){if(!this.isViPageBy&&!this.isInFilterPanel()){this.formatHandlers={domNode:["F","text-align","vertical-align","line-height"],contentNode:["fx"],item:["F","text-align","line-height"]};}var selectorStyle=this.style,isRadio=selectorStyle===$STYLES.RADIO,isCheckBox=selectorStyle===$STYLES.CHECKBOX;if(isCheckBox||isRadio||selectorStyle===$STYLES.LINK||selectorStyle===$STYLES.BUTTON){var ctrl=this.children[0];ctrl.orientation=this.node.defn.horiz?"h":"v";if(isCheckBox||isRadio){ctrl.multiSelect=!isRadio;}}this.content.hostedCSSClass="selector";this._super();},postBuildRendering:function postBuildRendering(evt){if(this.bindWarningHandler){this.bindWarningHandler(this,this.content);this.validate();}return this._super(evt);},getWidgetClass:function getWidgetClass(selectorContainer,selectorStyle,isHoriz){if(selectorContainer.isViPageBy){if(selectorStyle===$STYLES.SCROLLER){return $SELECTOR_ROOT+"PageBySlider";}if(selectorStyle===$STYLES.BUTTON){return $SELECTOR_ROOT+"PageByButtonBar";}}if(this.isRecursiveAttributeSelector()&&this.isInFilterPanel()){return $SELECTOR_ROOT+"CollapsibleCheckList";}var scriptClass=widgetMap[selectorStyle];if(scriptClass){if(scriptClass.constructor===Array){scriptClass=scriptClass[isHoriz?0:1];}return scriptClass;}return this._super(selectorContainer,selectorStyle,isHoriz);},updateWidget:function updateWidget(selectorContainer){var selectorCtrl=this._super(selectorContainer);if(selectorContainer.style===mstrmojo.DocSelector.STYLES.SCROLLER&&!isSelectContiguous(selectorContainer.selIdx)){selectorCtrl.selectedIndices={};}return selectorCtrl;},validate:function validate(){if(this.isValidSelection&&!this.isValidSelection()){this.set("validation",{refNode:this.parent.domNode,position:1,invalid:true,errorCode:"unableDisplaySelectionVIWarning"});}}});}());