(function(){mstrmojo.requiresClsP("mstrmojo.vi.viz","VisualizationTransition","EnumAxisNames");mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSObjectType");var $MOJO=mstrmojo,$VIZ=$MOJO.vi.viz,$AXIS_NAMES=$VIZ.EnumAxisNames,$OBJ_TYPES=$MOJO.chart.model.enums.EnumDSSObjectType;mstrmojo.vi.viz.BaseVisualizationTransition=mstrmojo.declare(mstrmojo.vi.viz.VisualizationTransition,null,{scriptClass:"mstrmojo.vi.viz.BaseVisualizationTransition",transitionDropZones:function transitionDropZones(actions,vt){var vis=this.vis,node=vis.node,key=node.k,gsi=node.data.gsi,rows=gsi.rows,cols=gsi.cols,i,unit,pivotActions=[],pushPivotAction=function(actions,unit,idx,axis){actions.push({act:"pivot",unitId:unit.did!=="-1"?unit.did:"",unitType:unit.did!=="-1"?unit.t:"",axis:axis,unitPos:idx+1});};for(i=0;i<cols.length;i++){unit=cols[i];if(unit.t!==$OBJ_TYPES.DssTypeMetric){pushPivotAction(pivotActions,unit,i,$AXIS_NAMES.ROWS);}}for(i=0;i<rows.length;i++){unit=rows[i];if(unit.did==="-1"){pushPivotAction(pivotActions,unit,i,$AXIS_NAMES.COLUMNS);break;}}if(pivotActions.length){actions.push({act:"updateTemplate",keyContext:key,partialRetrieval:{nodes:[key]},actions:pivotActions});}return{wp:"<props><widgetProps /></props>",handled:false};}});}());