(function(){mstrmojo.requiresCls("mstrmojo.Dialog","mstrmojo.dom","mstrmojo.dnd");var $DOM=mstrmojo.dom;mstrmojo.DraggableDialog=mstrmojo.declare(mstrmojo.Dialog,null,{scriptClass:"mstrmojo.DraggableDialog",draggable:true,ownAvatar:true,draggableNodeName:"titleNode",markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"  mstrAttach:mousedown><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',premousedown:function premousedown(evt){var e=evt.e,t=$DOM.eventTarget(evt.hWin,e);if(t===this.closeNode){this.close();}},isDragValid:function isDragValid(context){return $DOM.contains(this[this.draggableNodeName],context.src.node,true,this.domNode);},ondragstart:function(){var st=this.editorNode.style;this[this.draggableNodeName].style.cursor="move";this.leftPos=parseInt(st.left,10);this.topPos=parseInt(st.top,10);},ondragmove:function(c){var e=c.tgt.pos,s=c.src.pos,st=this.editorNode.style;st.left=this.left=this.leftPos+e.x-s.x+"px";st.top=this.top=this.topPos+e.y-s.y+"px";},ondragend:function(){this[this.draggableNodeName].style.cursor="default";}});}());