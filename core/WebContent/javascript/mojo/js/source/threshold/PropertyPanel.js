(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash","mstrmojo.Container","mstrmojo.threshold.TextGroup","mstrmojo.threshold.ThresholdRow","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.ui.editors.controls.CharacterGroup");var $WIDGET=mstrmojo.Widget,$HASH=mstrmojo.hash,$COLUMN_WIDTH="180px";mstrmojo.threshold.PropertyPanel=mstrmojo.declare(mstrmojo.Container,[mstrmojo.threshold.PropertyPanel],{markupString:'<div class="mstrmojo-threshold-PropertyPanel"><div class="condition"></div><div class="format mstrmojo-vi-PropEditor"><div class="text"><div class="title">'+mstrmojo.desc(5998,"Replace Data")+'</div></div><div class="font mstrmojo-vi-EditorGroup"><div class="title">'+mstrmojo.desc(3433,"Font")+'</div></div><div class="border"><div class="title">'+mstrmojo.desc(5616,"Color And Borders")+'</div></div></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.children[1].firstChild;},fontNode:function(){return this.domNode.children[1].children[1];},borderNode:function(){return this.domNode.children[1].children[2];},applyNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:$WIDGET.visibleMarkupMethod,onheightChange:$WIDGET.heightMarkupMethod,onwidthChange:$WIDGET.widthMarkupMethod},model:undefined,editor:undefined,textGroup:undefined,charGroup:undefined,containerGroup:undefined,onvisibleChange:function onvisibleChange(){if(this.visible){var model=this.model;model.updateControl(this);var threshold=$HASH.clone(model.threshold),thresholdRow=this.thresholdRow;if(thresholdRow){this.removeChildren(thresholdRow);}this.addChildren({scriptClass:"mstrmojo.threshold.ThresholdRow",alias:"thresholdRow",slot:"conditionNode",idx:model.thresholdRow.idx,model:this.editor.model,threshold:threshold,onclick:mstrmojo.emptyFn});this.refresh();}},onOK:function okOK(){this.model.submitChange();this.close();},close:function close(){var thresholdRow=this.thresholdRow;if(thresholdRow){this.removeChildren(thresholdRow);}this.set("visible",false);this.editor.toggleButtonStatus(true);this.editor.setRowPanelVisibility(true);},children:[{scriptClass:"mstrmojo.threshold.TextGroup",slot:"textNode",alias:"textGroup",width:$COLUMN_WIDTH,onGroupValueChange:function onGroupValueChange(propName,newValue){this.parent.model.changeFormatProperty("threshold",propName,newValue);}},{scriptClass:"mstrmojo.ui.editors.controls.CharacterGroup",slot:"fontNode",alias:"charGroup",width:$COLUMN_WIDTH,onGroupValueChange:function onGroupValueChange(propName,newValue){this.parent.model.changeFormatProperty("fmt",propName,newValue);}},{scriptClass:"mstrmojo.ui.editors.controls.ContainerGroup",slot:"borderNode",alias:"containerGroup",width:$COLUMN_WIDTH,onGroupValueChange:function onGroupValueChange(propName,newValue){this.parent.model.changeFormatProperty("fmt",propName,newValue);}},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",onclick:function(){var p=this.parent;if(p.close){p.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",onclick:function(){var p=this.parent;if(p.onOK){p.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:mstrmojo.desc(14000,"Press ## after finishing formatting.").replace("##",'"âˆš"')}]});}());