(function(){mstrmojo.func=mstrmojo.provide("mstrmojo.func",{composite:function composite(fn){if(!fn||!fn.length){return mstrmojo.emptyFn;}return function(){var len=fn.length,i;for(i=0;i<len;i++){fn[i].apply(this,arguments);}};},wrapMethods:function wrapMethods(src,dest){function wrap(source,destination){destination=destination||{};mstrmojo.hash.forEach(source,function(fn,fnName){destination[fnName]=(destination.hasOwnProperty(fnName)&&typeof fn==="function")?mstrmojo.func.composite([fn,destination[fnName]]):fn;});return destination;}if(arguments.length<3){return wrap(src,dest);}var len=arguments.length,sources=[].slice.call(arguments,0,len-1).reverse(),destination=arguments[len-1];mstrmojo.array.forEach(sources,function(source){destination=wrap(source,destination);});return destination;},override:function override(src,destination){var fnWrapMethod=function(overwriting,inher){return function superwrap(){var tmp=this._super,ret;this._super=inher||mstrmojo.emptyFn;try{ret=overwriting.apply(this,arguments||[]);}finally{this._super=tmp;}return ret;};};destination=destination||{};mstrmojo.hash.forEach(src,function(fn,fnName){destination[fnName]=fnWrapMethod(fn,destination[fnName]);});return destination;},throttle:function(func,wait,opts){var context,args,result,timeout=null,previous=0,options=opts||{};var later=function(){previous=options.leading===false?0:mstrmojo.date.now();timeout=null;result=func.apply(context,args);context=args=null;};return function(){var now=mstrmojo.date.now();if(!previous&&options.leading===false){previous=now;}var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);context=args=null;}else{if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining);}}return result;};},debounce:function(func,wait,immediate){var timeout,args,context,timestamp,result,now=mstrmojo.date.now;var later=function(){var last=now()-timestamp;if(last<wait){timeout=setTimeout(later,wait-last);}else{timeout=null;if(!immediate){result=func.apply(context,args);context=args=null;}}};return function(){context=this;args=arguments;timestamp=now();var callNow=immediate&&!timeout;if(!timeout){timeout=setTimeout(later,wait);}if(callNow){result=func.apply(context,args);context=args=null;}return result;};},addMethods:function addMethods(source,destination){destination=destination||{};mstrmojo.hash.forEach(source,function(fn,fnName){if(!destination.hasOwnProperty(fnName)&&typeof fn==="function"){destination[fnName]=fn;}});return destination;}});}());