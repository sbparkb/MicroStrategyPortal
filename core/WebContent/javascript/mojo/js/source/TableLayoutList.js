(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.string","mstrmojo.ListBase","mstrmojo._IsList");var DELIM=",",$STR=mstrmojo.string;mstrmojo.TableLayoutList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.TableLayoutList",cssClass:"mstrmojo-TableLayoutList",styleCssClass:"",itemIdField:"v",allowUnlistedValues:false,tableLayoutCssStyle:"auto",multiSelect:false,titleItems:null,items:null,itemsPerRow:0,getLeftEndTitle:function getLeftEndTitle(idx){return"";},getRightEndTitle:function getRightEndTitle(idx){return"";},getTitleRowMarkup:function getTitleRowMarkup(){var titleItems=this.titleItems;if(titleItems){var tr='<tr><td class="left_text">'+this.getLeftEndTitle(-1)+"</td>",len=titleItems.length,i=0,t;for(i;i<len;i++){t=titleItems[i];tr+='<td class="item_title" title="'+t+'">'+t+"</td>";}tr+='<td class="left_text">'+this.getRightEndTitle(-1)+"</td></tr>";return tr;}return"";},_markupPrefix:function(){return'<table class="tableLayoutList" style="table-layout:'+this.tableLayoutCssStyle+'" cellspacing="0" cellpadding="0"><tbody>'+this.getTitleRowMarkup();},_markupSuffix:function(){return"</tbody></table>";},getItemMarkup:function(item,idx){var markup='<{@tag} class="item {@cls}" idx="{@idx}" title="{@en@n}" style="{@style}">{@en@n}</{@tag}>',lt=this.getLeftEndTitle(idx),rt=this.getRightEndTitle(idx),ipr=this.itemsPerRow;lt='<td class="left_text" title="'+lt+'">'+lt+"</id>";rt='<td class="right_text" title="'+rt+'">'+rt+"</id>";if(ipr>0){markup=(idx%ipr===0?"<tr>"+lt:"")+"<td>"+markup+"</td>"+((idx+1)%ipr===0?rt+"</tr>":"");}else{markup='<td><div class="item_wrapper" idx="'+idx+'">'+markup+"</div></td>";if(!idx){markup="<tr>"+lt+markup;}else{if(idx===this.items.length-1){markup=markup+rt+"</tr>";}}}return markup;},_getItemNode:function(idx){var itemsTableNode=this.itemsNode,ipr=this.itemsPerRow,rowIdx=(this.titleItems?1:0)+((ipr>0)?parseInt(idx/ipr,10):0),colIdx=1+((ipr>0)?(idx%ipr):idx);return itemsTableNode.rows[rowIdx].cells[colIdx].firstChild;},init:function(props){this._super(props);mstrmojo.css.addWidgetCssClass(this,this.styleCssClass);},onchange:function onchange(){var newValue,s=[];if(!this.multiSelect){newValue=this.selectedItem.v;}else{var i;for(i in this.selectedIndices){s.push(this.items[i].v);}newValue=s.join(this.delim||DELIM);}this.set("value",newValue);},postBuildRendering:function postBuildRendering(){this._super();var selItems=[];if(this.multiSelect){var vs=this.value.split(DELIM),i;for(i=0;i<vs.length;i++){selItems.push({v:vs[i]});}}else{selItems.push({v:this.value});}this.setSelectedItems(selItems);}});}());