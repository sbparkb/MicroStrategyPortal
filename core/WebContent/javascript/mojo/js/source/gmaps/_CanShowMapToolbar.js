(function(){mstrmojo.requiresCls("mstrmojo.gmaps.MapToolbar","mstrmojo.dom","mstrmojo.css");var MESSAGE_BOX_HEIGHT=115,LAYER_TITLE_HEIGHT=0,TRIANGLE_HEIGHT=3,EMPTY_SPACE_BETWEEN_TRIANGLE_AND_TOOLBAR=0,SLIDING_ANIMATION_DURATION=500,MESSAGE_BOX_SLIDING_ANIMATION_DURATION=300,TOOLBAR_STATE={NORMAL_STATE:0,SINGLE_SELECT_STATE:1,RECTANGLE_SELECT_STATE:2,ZOOM_STATE:3,AFFINITY_STATE:4,FREE_SELECT_STATE:5,CIRCLE_SELECT:6,CLEAR_ALL_STATE:7,GRIDS_SELECT_STATE:8,MARKERTYPE:9,CLUSTER:10,MAP_TYPE:11},EnumMarkerType={MARKER:"1",BUBBLE:"2",POLYGON:"3",DENSITY:"4"},$D=mstrmojo.dom,$CSS=mstrmojo.css,buttonsToCreateFlag;mstrmojo.gmaps._CanShowMapToolbar={_mixinName:"mstrmojo.gmaps._CanShowMapToolbar",callback:null,toolbar:null,EnumToolbarButtonType:{DRILL:1,SINGLE_SELECT:2,RECTANGLE_SELECT:4,EDIT_INFO_WINDOW:8,CLEAR_ALL:16,AFFINITY:32,FREE_SELECT:64,CIRCLE_SELECT:128,ZOOM:256,GRIDS_SELECT:512,KEEP_ONLY:1024,EXCLUDE:2048,SHOW_DATA:4096,SEARCH_BAR:8192,MAP_TYPE:16384},TOOLBAR_BUTTON_COUNT:14,layerChosen:[],formatPopupRef:null,googlemap:null,toolBarActive:false,metricSelectBox:null,mapTypeSelectBox:null,toolbar:null,$MSM:null,metricsString:"",metricData:[],mapTypeData:[],mapTypeSelList:null,markerSelected:false,getPropertyValue:function getPropertyValue(mapCssObj,property){return this.toolbar.getPropertyValue(mapCssObj,property);},getToolbar:function getToolbar(){return this.toolbar;},initMapToolbar:function initMapToolbar(mapObj,gridInfo,flags,toolBarId,layersDivId,clearAllIdPopupId,singleSelectPopupId,mtData){if(this.toolbar){return ;}if(!this.toolbar){this.toolbar=new mstrmojo.gmaps.MapToolbar(toolBarId);this.toolbar.slot="toolBarDiv";this.addChildren(this.toolbar);}this.toolbar.initMapToolbar(mapObj,gridInfo,flags,toolBarId,layersDivId,clearAllIdPopupId,singleSelectPopupId,mtData);return this.toolbar;},renderToolbar:function renderToolbar(){if(!this.toolbar.hasRendered){this.toolbar.render();}this.toolbar.set("height","38px");var leftWidth=175,styleWidth=60,padding=6,minWidth=33,maxWidth=200,calWidth=this.width-leftWidth-styleWidth,finalWidth;finalWidth=maxWidth>calWidth?calWidth:maxWidth;finalWidth=minWidth<finalWidth?finalWidth:minWidth;this.toolbar.searchBarNode.style.width=finalWidth+"px";this.toolbar.rightToolbarNode.style.paddingLeft=finalWidth+padding+"px";},getToolbarState:function getToolbarState(){return this.toolbar.state;},setToolbarState:function setToolbarState(value){this.toolbar.setToolbarState(value);},setToolbarButtonState:function setToolbarButtonState(buttonName,stateName,value){this.toolbar.setToolbarButtonState(buttonName,stateName,value);},clearMarkerSelections:function clearMarkerSelections(){if(!this.toolbar){return ;}this.clearAllLayerSelections();this.doClearRectangle(true);this.set("markerSelected",false);this.toolbar.set("state",TOOLBAR_STATE.NORMAL_STATE);},onmarkerSelectedChange:function onmarkerSelectedChange(){this.setToolbarButtonState(this.EnumToolbarButtonType.CLEAR_ALL,"enabled",this.markerSelected);}};})();