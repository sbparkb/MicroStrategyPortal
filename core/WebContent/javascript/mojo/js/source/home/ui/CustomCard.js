(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.home.ui.Card");var $CSS=mstrmojo.css;var COL_CSS_CLASS_PREFIX="col-";var getColCssCls=function(col){return COL_CSS_CLASS_PREFIX+col;};var DEFAULT_COL=1;mstrmojo.home.ui.CustomCard=mstrmojo.declare(mstrmojo.home.ui.Card,null,{scriptClass:"mstrmojo.home.ui.CustomCard",col:null,oncolChange:function(evt){$CSS.removeClass(this.domNode,getColCssCls(evt.valueWas));$CSS.addClass(this.domNode,getColCssCls(this.col));if(this.col!==this.cardDef.col){this.updateCardDef({col:this.col});}},postBuildRendering:function postBuildRendering(){this._super();this.htmlbox.initControlOverlayWithCardDefinition(this.cardDef);this.set("col",this.cardDef.col||DEFAULT_COL);$CSS.addClass(this.domNode,getColCssCls(this.col));},switchToEditMode:function switchToEditMode(){this.htmlbox.showControlOverlay();},getHTMLContainerSettingEditorConfig:function getHTMLContainerSettingEditorConfig(data,fnOK){var me=this;return new mstrmojo.ui.menus.EditorConfig({cssClass:"mstrmojo-CardMenuEditor-dashboard",data:data||{column:me.col},contents:[new mstrmojo.TextBoxWithLabel({alias:"lblColumns",label:mstrmojo.desc(4073,"Columns:"),value:data.column,onvalueChange:function(){if(this.parent.data){this.parent.data.set("column",this.value);}}})],bindings:{okEnabled:"this.valid",valid:function(){var col=parseInt(this.data.column,10),valid=!isNaN(col)&&col>0&&col<5;if(!valid&&!mstrmojo.string.isEmpty(this.data.column)){var msg=mstrmojo.desc(7883,"Please enter an integer between ## and ###.").replace("###","4").replace("##","1");if(this.contents[0].inputNode){this.contents[0].inputNode.blur();}mstrmojo.alert(msg,null,null,1001);}return valid;}},fnOk:fnOK});},getEditorConfig:function(cardDef,cfg){var me=this;cfg.addMenuItem(mstrmojo.desc(3272,"Edit"),"cls",this.switchToEditMode.bind(this));cfg.addPopupMenuItem(mstrmojo.desc(2985,"Width"),this.id,function(){return me.getHTMLContainerSettingEditorConfig({column:me.cardDef.col},function okCallback(data,editor){me.set("col",data.column);});});cfg.addPopupMenuItem(mstrmojo.desc(3297,"Title"),this.id,function(){return me.parent.controller.getDashboardSettingTitleConfig({title:me.title},function okCallback(data,editor){me.set("title",data.title);});});}});}());