(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array");var $ARR=mstrmojo.array,$DOM=mstrmojo.dom;mstrmojo._IsDocXtab={_mixinName:"mstrmojo._IsDocXtab",isDocXtab:true,formatHandlers:{domNode:["RW","T","font"],msgNode:["height","background-color"],viewport:["D","background-color","B","fx"]},preBuildRendering:function preBuildRendering(){var formats=this.getFormats(),scrollBoxCSSText="",setDim=function setDim(dim){if(formats[dim]){var d=this[dim]||formats[dim];this[dim]=d;if(this.isFullScreenWidget){formats[dim]=d;}this[dim+"Limit"]=parseInt(d,10);}};setDim.call(this,"height");setDim.call(this,"width");var fnBuildScrollBoxCSSText=function(d,offset){var x=formats[d];if(x&&x.charAt(x.length-1)!=="%"){var v=parseInt(x,10);if(!isNaN(v)){if(offset){v-=offset;}scrollBoxCSSText+=d+":"+v+"px;";}}return null;};fnBuildScrollBoxCSSText("height",0);fnBuildScrollBoxCSSText("width",0);this.scrollboxNodeCssText=scrollBoxCSSText;return this._super();},postBuildRendering:function postBuildRendering(){var returnVal=this._super();var gridData=this.gridData;if((gridData.afw||gridData.afc)&&this.hasCustomScrollbar&&!this.node.data.eg&&this.scrollboxNode.firstChild){this.scrollboxNode.firstChild.style.width=this.getFormats().width;}return returnVal;},resize:function resize(){this.clearCache();var f=this.getFormats(),h=parseInt(f.height,10),w=parseInt(f.width,10);if(w>0&&h>0){if(!this.visible&&this.forcedHidden){this.set("visible",true);this.forcedHidden=false;}$ARR.forEach([this.scrollboxNode,this.viewport],function(node){var nodeStyle=node.style;nodeStyle.height=h+"px";nodeStyle.width=w+"px";});if(this.scrollboxNode){this.scrollboxHeightFixed=h&&(h!=="auto");if(this.scrollboxHeightFixed){this.scrollboxHeight=parseInt(h,10);this.scrollboxBottom=this.scrollboxTop+h;}if(this.lockHeadersCase){this.heightLimit=h;this.resizeScrollBox($DOM.isIE);}}this.delegateGridAction(function(grid){if(grid&&grid.onscroll){grid.onscroll();}},"scrollOnResize");if(!(this.gridData&&this.gridData.eg)){this.onGridWidthChanged();}if(this.lockHeadersCase){this._refreshClonedNodes();}}else{if(this.visible){this.set("visible",false);this.forcedHidden=true;}}},renderPortalState:function renderPortalState(){this.clearCache();this.unrender();this.render();},unrender:function unrender(ignoreDom){this.clearCache();if(this._super){this._super(ignoreDom);}},defaultAction:function defaultAction(td,tCell){if(this._super(td,tCell)){var sti=this.model.sti,titleId=sti&&sti.titleId,deselectCurrentCell=sti&&sti.deselectCurrent;this._currentSelectedTD=deselectCurrentCell?undefined:td;if(titleId){var zone=this.zone;this.delegateGridAction(function(grid){var dn=grid.domNode,fc=dn&&dn.firstChild;if(!zone&&fc&&(td.offsetParent===fc||td.offsetParent===dn)){zone=grid;}},"defaultClickAction");if(zone){zone.clearHilites(titleId);if(!deselectCurrentCell){zone.setHilites(titleId,td);}zone.hiliteKey=titleId;this.model.sti=null;}}return true;}return false;}};}());