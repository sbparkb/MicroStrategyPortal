(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle","EnumFontAlignment","EnumFontStyle","EnumFontRotation");var $C=mstrmojo.chart,$CHART_ENUMS=$C.enums,$BS=$CHART_ENUMS.EnumBoxStyle,$FA=$CHART_ENUMS.EnumFontAlignment,$FS=$CHART_ENUMS.EnumFontStyle,$FR=$CHART_ENUMS.EnumFontRotation,$Utility=$C.common.Utility,kLINE_SPACING_FACTOR=1,kMIN_FONT_SIZE=3;var formatKeys=["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize"],formatValues=[$FA.FA_CENTER,$FS.FS_NORMAL,$FR.FR_NORMAL,$BS.BS_NOFRAME,null,255,"Verdana",15];mstrmojo.chart.FormatFont=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFont",mFontAlignment:$FA.FA_CENTER,mFontStyle:$FS.FS_NORMAL,mFontRotation:$FR.FR_NORMAL,mFontBox:$BS.BS_NOFRAME,mFontColor:null,mFontAlpha:255,mFontName:null,mFontSize:15,init:function init(props){var i,len=formatKeys.length;this._super(props);if(props&&props.Font){var pf=props.Font;mstrmojo.hash.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontAlpha","mFontName","mFontSize"],pf,this);this.mFontColor=pf.mFontColor;}else{if(props&&props.Bare){for(i=0;i<len;++i){this[formatKeys[i]]=null;}}}if(!this.mFontColor&&!(props&&props.Bare)){this.mFontColor=$C.gBlack.ToInteger();}this.mFontName=this.mFontName||"Verdana";},ApplyFontFormat:function ApplyFontFormat(chartContext,isOnlyForExtent){if(this.mFontSize<kMIN_FONT_SIZE){this.mFontSize=kMIN_FONT_SIZE;}if(!isOnlyForExtent){chartContext.applyFontFormat(this);}},GetFontExtent:function GetFontExtent(){return Math.floor(this.mFontSize<kMIN_FONT_SIZE?kMIN_FONT_SIZE:this.mFontSize*kLINE_SPACING_FACTOR);},GetStringExtent:function GetStringExtent(string){var width,height,bounds;this.ApplyFontFormat(null,true);bounds=$Utility.measureText(string,this.mFontName,this.mFontSize,this.mFontStyle);width=bounds.Width;height=bounds.Height;return{Width:width,Height:height};},GetStringHeight:function GetStringHeight(string){this.ApplyFontFormat(null,true);return $Utility.measureTextHeight(string,this.mFontName,this.mFontSize,this.mFontStyle);},isVertical:function isVertical(){var fr=this.mFontRotation;return fr===$FR.FR_90||fr===$FR.FR_270;},isHorizontal:function isHorizontal(){var fr=this.mFontRotation;return fr===$FR.FR_NORMAL||fr===$FR.FR_180;},evalMargins:function evalMargins(){return $Utility.evaluateTextMargin(this.mFontSize);},restoreDefaults:function restoreDefaults(fullyRestore){var i;if(fullyRestore){for(i=0;i<formatKeys.length;++i){this[formatKeys[i]]=formatValues[i];}}else{for(i=0;i<formatKeys.length;++i){if(this[formatKeys[i]]===null){this[formatKeys[i]]=formatValues[i];}}}if(this.mFontColor===null){this.mFontColor=$C.gBlack.ToInteger();}}});}());