(function(){mstrmojo.requiresCls("mstrmojo.array");var $ARR=mstrmojo.array;mstrmojo._BindTargetChildren=mstrmojo.provide("mstrmojo._BindTargetChildren",{target:null,targetProps:null,addTabButtons:null,removeTabButtons:null,clearButtons:null,ontargetChange:function ontargetChg(evt){var tWas=evt&&evt.valueWas;if(tWas){var ts=this._targetSubs;if(ts){tWas.detachEventListener(ts.add);tWas.detachEventListener(ts.rem);tWas.detachEventListener(ts.sel);}this.clearButtons();}var t=this.target;if(t){var tps=this.targetProps,p=(tps&&tps.children)||"children",ch=t[p];this.addTabButtons(ch,0);this._onTargetSelChg();if(t.attachEventListener){var id=this.id,fn="attachEventListener";this._targetSubs={add:t[fn]("addChild",id,"_onTargetAddChild"),rem:t[fn]("removeChild",id,"_onTargetRemoveChild"),sel:t[fn]("selectedChange",id,"_onTargetSelChg")};}}this._ontargetChange();},_ontargetChange:mstrmojo.emptyFn,_onTargetAddChild:function otac(evt){var btns=evt&&evt.value;if(btns&&btns.length){this.addTabButtons(btns,evt.index);}this._postTargetAddChild();},_postTargetAddChild:mstrmojo.emptyFn,_onTargetRemoveChild:function otrc(evt){var arr=evt&&evt.value,i;for(i=((arr&&arr.length)||0)-1;i>-1;i--){this.removeTabButton(arr[i]);}this._postTargetRemoveChild();},_postTargetRemoveChild:mstrmojo.emptyFn,_onTargetSelChg:function otsc(evt){var tps=this.targetProps||{},ch=this[tps.names||"children"],setSelected=function(w,v){if(w.set){w.set("selected",v);}else{w.selected=v;}};if(evt){var sOld=evt.valueWas,w=sOld?$ARR.find(ch,"target",sOld):-1;if(w>-1){setSelected(ch[w],false);}}var t=this.target,s=t&&t.selected,w2=s?$ARR.find(ch,"target",s):-1;if(w2>-1){setSelected(ch[w2],true);}this._postTargetSelChg();},_postTargetSelChg:mstrmojo.emptyFn});}());