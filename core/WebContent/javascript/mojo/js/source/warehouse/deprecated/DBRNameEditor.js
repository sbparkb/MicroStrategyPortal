(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.warehouse.obj.DBRole","mstrmojo.warehouse.dbroles.DBRoleHelper");var $DBHLP=mstrmojo.warehouse.dbroles.DBRoleHelper,$S=mstrmojo.string;mstrmojo.warehouse.dbroles.DBRNameEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.warehouse.dbroles.DBRNameEditor",cssClass:"mstrmojo-wh-DBRNameEditor",id:"DBRNameEditor",dbrole:undefined,onOpen:function(){var des=(mstrApp.getRootController().isCloud())?this.dbrole.des:this.dbrole.n;this.txtbox.set("value",des);this.txtbox.domNode.focus();this.txtbox.domNode.select();this.error.set("text","");this.set("title",mstrmojo.desc(1821,"db conn"));},onOK:function onOK(){var typedname=$S.trim(this.txtbox.value);if(!mstrApp.getRootController().isCloud()){var ret=$DBHLP.validateDBRoleName(typedname);if(!ret.isValid){mstrmojo.alert(ret.msg);return false;}}this.dbrole.rename(typedname);return true;},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-wh-DBRNameEditorLabel",alias:"name",text:mstrmojo.desc(1461,"db conn name")},{scriptClass:"mstrmojo.TextBox",alias:"txtbox",cssClass:"mstrmojo-wh-DBRNameEditorText",onkeyup:function(evt){var p=this.parent;switch(evt.e.keyCode){case 13:if(p.onOK){if(p.onOK()){p.close();}}break;case 27:p.close();break;default:break;}}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-wh-DBRNameEditorLabel",alias:"error",text:""},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button rightfloat",text:mstrmojo.desc(1442,"OK"),onclick:function(){var e=this.parent.parent;if(e.onOK){if(e.onOK()){e.close();}}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var e=this.parent.parent;if(e.onCancel){e.onCancel();}e.close();}}]}]});}());