(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.warehouse.EnumObjectTypes");var $M=mstrmojo,$H=$M.hash,Enum_SM_AddAttributeForm=12,Enum_SM_RemoveAttributeForm=20,Enum_SM_UpdateAttributeForm=14,$ENUM_OT=mstrmojo.warehouse.EnumObjectTypes,ENUM_OT_FORM=$ENUM_OT.FORM;function createForm(form,props){var callback=props.callback,objs=[],categoryId=props.categoryId;form.model.submitRequest({success:function(res){objs=res.mi["in"].oi;$H.forEach(objs,function(obj){if(obj.tp===ENUM_OT_FORM){categoryId=obj.did;}});form.baseFormId=props.baseFormId;form.id=props.id||categoryId;form.categoryId=categoryId;form.attributeId=props.attributeId;form.columnId=props.columnId;form.expression=props.expression;form.sortType=props.sortType;form.browseSortType=props.browseSortType;form.isMultiLingual=props.isMultiLingual;form.baseFormType=props.baseFormType;form.useName=props.useName;form.useDescription=props.useDescription;form.isBrowseForm=props.isBrowseForm;form.isTemplateForm=props.isTemplateForm;form.tableId=props.tableId;if(callback&&callback.success){callback.success(form);}}},{manipulationtype:Enum_SM_AddAttributeForm,objectid:props.attributeId,formcatid:props.categoryId,tableids:props.tableId,columnid:props.columnId,expression:props.expression,sorttype:props.sortType,browsesorttype:props.browseSortType,ismultilingual:(props.isMultiLingual)?1:0,baseformtype:props.baseFormType,usename:props.useName,usedesc:props.useDescription,isbrowseform:(props.isBrowseForm)?1:0,istemplateform:(props.isTemplateForm)?1:0,catn:props.catn,showWait:true},"schemaManipulation");}mstrmojo.architect.obj.Form=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.architect.obj.Form",init:function init(props){this._super(props);var callback=props.callback,form=this;if(props.isNew){createForm(form,props);}else{if(callback&&callback.success){callback.success(this);}}},baseFormId:undefined,id:undefined,attributeId:undefined,categoryId:undefined,newCatId:undefined,expression:undefined,columnId:undefined,sortType:undefined,browseSortType:undefined,isMultiLingual:false,baseFormType:3,useName:undefined,useDesc:undefined,isBrowseForm:true,isTemplateForm:true,tableId:undefined,remove:function remove(callback){var form=this;form.model.submitRequest({success:function success(res){if(callback&&callback.success){callback.success(form.id);}}},{manipulationtype:Enum_SM_RemoveAttributeForm,objectid:form.attributeId,formcatid:form.categoryId,showWait:true},"schemaManipulation");},update:function update(callback){var form=this;form.model.submitRequest({success:function success(){if(callback&&callback.success){callback.success(form);}}},{manipulationtype:Enum_SM_UpdateAttributeForm,objectid:form.attributeId,formcatid:form.categoryId,newformcatid:form.newCatId||"",tableids:form.tableId,columnid:form.columnId,expression:form.expression,sorttype:form.sortType,browsesorttype:form.browseSortType,ismultilingual:(form.isMultiLingual)?1:0,baseformtype:form.baseFormType,usename:form.useName,usedesc:form.useDescription,isbrowseform:(form.isBrowseForm)?1:0,istemplateform:(form.isTemplateForm)?1:0,showWait:true},"schemaManipulation");}});}());