(function(){mstrmojo.requiresCls("mstrmojo.warehouse.WHPanel","mstrmojo.warehouse.TableTree","mstrmojo.warehouse.MenuButton");var toAdd={};mstrmojo.architect.WHTablePanel=mstrmojo.declare(mstrmojo.warehouse.WHPanel,null,{scriptClass:"mstrmojo.architect.WHTablePanel",dbt:[{scriptClass:"mstrmojo.warehouse.TableTree",alias:"DBTableTree",id:"DBTableTree",cssClass:"mstrmojo-TreeBrowser mstrmojo-Architect-WarehouseTablesTree",multiSelect:true,useCache:true,onheightChange:function onheightChange(evt){var domNode=this.domNode;if(domNode){domNode.style.height=parseInt(this.height,10)+"px";}},dbroleChange:function dbroleChange(evt){var tr=this;tr.set("items",[]);mstrmojo.all.ArchModel.getSelectedDBRoleTables({success:function(res){tr.set("items",res);}},this.useCache);},displayMenu:function displayMenu(w){if(w&&w.data){return w.data.t==="dbt";}}},{scriptClass:"mstrmojo.warehouse.MenuButton",iconClass:"mstrmojo-ArchitectListIcon addbtn",select_treeitem:function select_treeitem(evt){var row=this.cachedrow;if(row){var tr=row.tree;tr.addSelect(mstrmojo.array.find(tr.items,"did",row.data.did));}},onclick:function onclick(evt){this.select_treeitem(evt.e);var tlist=[],item,tr=this.parent.DBTableTree,h=tr.selectedIndices,model=mstrmojo.all.ArchModel,count=0,index;if(model){for(index in h){item=tr.items[index];if(item.st===8405){tlist[count]=item;toAdd[item.n]=parseInt(index,10);count++;}}model.addTables(tlist,tr);}this.cachedrow=null;this.cssText="position:relative;visibility:hidden;";this.render();}}]});}());