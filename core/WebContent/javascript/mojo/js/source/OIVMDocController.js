(function(){mstrmojo.requiresCls("mstrmojo.rw.DocController","mstrmojo.func");var $FUNC=mstrmojo.func;var PATH_BAR_HEIGHT="44px";mstrmojo.OIVMDocController=mstrmojo.declare(mstrmojo.rw.DocController,null,{scriptClass:"mstrmojo.OIVMDocController",openPage:function openPage(relativePageNumber){var model=this.model;relativePageNumber=parseInt(relativePageNumber,10);if(relativePageNumber>-1&&model.drillStateStack){var drillUndoStack=model.drillStateStack,states=drillUndoStack.splice(drillUndoStack.indexOf(relativePageNumber)),stateID=states[0];mstrApp.removeBackButtonItems(states.length);model.getDataService().refresh({stateID:stateID-1},{success:function success(res){model.loadLayout(res);}});}else{this._super(relativePageNumber);}},submitDrillWithin:function submitDrillWithin(view,action,callback){var model=this.model;var drillAttrObject=action.attrObj||{n:""};delete action.attrObj;view.model.drillGrid(this._addNodeKeyToAction(view,action),$FUNC.wrapMethods({success:function success(res){var drillStateStack=model.drillStateStack=model.drillStateStack||[],stateID=res.stid;if(stateID!==undefined){drillStateStack.push(stateID);mstrApp.addBackButtonItem({n:mstrmojo.desc(13778,"Back to: ##").replace("##",drillAttrObject.n),dssid:stateID});}}},$FUNC.wrapMethods(this._getXtabCallback(view),callback)));},togglePathbar:function(e){if(!mstrApp.pathInfo){return ;}var widget=e.src,page=this.view.parent.parent,pathbar=page.pathbar,visible=pathbar.visible;widget.set("iconClass",widget.iconClass.replace(/ on/,"")+(!visible?" on":""));widget.domNode.setAttribute("title",visible?mstrmojo.desc(13997,"Hide Navigation Bar"):mstrmojo.desc(13996,"Show Navigation Bar"));var showPathbar=!visible,pathbarNode=page.pathbarNode;pathbar.set("visible",showPathbar);page.layoutConfig.h.pathbarNode=showPathbar?PATH_BAR_HEIGHT:"0px";page.doLayout();if(!showPathbar){pathbarNode.style.height="0px";}}});}());