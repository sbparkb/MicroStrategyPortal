(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumExpressionType","mstrmojo.mstr.EnumNodeDimty","mstrmojo.mstr.EnumFunction","mstrmojo.mstr.EnumNodeType","mstrmojo.mstr.EnumWebFunctionType","mstrmojo.mstr.WebNode");var $EXPTYPE=mstrmojo.mstr.ExpressionType,$NODEDIMTY=mstrmojo.mstr.EnumNodeDimty,$FUNCTION=mstrmojo.mstr.EnumFunction,$NODETYPE=mstrmojo.mstr.EnumNodeType,$FUNCTIONTYPE=mstrmojo.mstr.EnumWebFunctionType;var isMetricQualification=function(expressionType){expressionType=parseInt(expressionType,10);return expressionType===$EXPTYPE.FilterSingleMetricQual||expressionType===$EXPTYPE.FilterMetricExpression||expressionType===$EXPTYPE.FilterMultiMetricQual;};mstrmojo.mstr.WebOperatorNode=mstrmojo.declare(mstrmojo.mstr.WebNode,null,{scriptClass:"mstrmojo.mstr.WebOperatorNode",nodeType:$NODETYPE.NodeOperator,func:$FUNCTION.FunctionReserved,funcType:$FUNCTIONTYPE.WebFunctionTypeGeneric,property:"",onExprTypeChange:function(){if(isMetricQualification(this.exprType)){this.dimType=$NODEDIMTY.NodeDimtyUnspecified;}},on_set_func:function(n,v){var ascending=false,funcType=parseInt(this.funcType,10);if(funcType===$FUNCTIONTYPE.WebFunctionTypePercentQual||funcType===$FUNCTIONTYPE.WebFunctionTypeRankQual){var mrpFunction=v;switch(mrpFunction){case EnumWebMRPFunction.WebMRPFunctionTop:this.func=$FUNCTION.FunctionLessEqual;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBottom:this.func=$FUNCTION.FunctionLessEqual;this.property='<pr ix="4" v="-1"/>';break;case EnumWebMRPFunction.WebMRPFunctionBetween:this.func=$FUNCTION.FunctionBetween;if(ascending){this.property="";}else{this.property='<pr ix="4" v="0"/>';}break;case EnumWebMRPFunction.WebMRPFunctionExcludeTop:this.func=$FUNCTION.FunctionGreater;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionExcludeBottom:this.func=$FUNCTION.FunctionGreater;this.property='<pr ix="4" v="-1"/>';break;case EnumWebMRPFunction.WebMRPFunctionNotBetween:this.func=$FUNCTION.FunctionNotBetween;if(ascending){this.property="";}else{this.property='<pr ix="4" v="0"/>';}break;case EnumWebMRPFunction.WebMRPFunctionEquals:this.func=$FUNCTION.FunctionEquals;this.property="";break;case EnumWebMRPFunction.WebMRPFunctionDifferentFrom:this.func=$FUNCTION.FunctionNotEqual;this.property="";break;case EnumWebMRPFunction.WebMRPFunctionBanding:this.func=$FUNCTION.FunctionBanding;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBandingC:this.func=$FUNCTION.FunctionBandingC;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBandingP:this.func=$FUNCTION.FunctionBandingP;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBandingM:this.func=$FUNCTION.FunctionBandingM;this.property='<pr ix="4" v="0"/>';break;default:}if(funcType===$FUNCTIONTYPE.WebFunctionTypePercentQual){this.property+='<pr ix="5" v="0"/>';}else{this.property+='<pr ix="5" v="-1"/>';}var childNode=null;if(this.childNodes&&this.childNodes.length>0){childNode=this.childNodes[0];}if(childNode!=null){childNode.setPropertyStr(property);}}else{this.func=v;}},buildTypeSpecificShortXML:function buildTypeSpecificShortXML(builder){builder.addChild("op").addAttribute("fnt",this.func).closeElement();var ppt=this.property;if(ppt){builder.addChild("prs").addRawXML(ppt).closeElement();}}});}());