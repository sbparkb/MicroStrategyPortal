(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller");var $ARR=mstrmojo.array,$DSS_OBJ_TYPES=mstrmojo.chart.model.enums.EnumDSSObjectType;function createIncFetchDataHelper(parent){return{browseConfig:null,parent:parent,next:function(callback){var bcg=this.browseConfig;if(!bcg){return ;}bcg.blockBegin+=bcg.blockCount;var params={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:bcg.blockBegin,blockCount:bcg.blockCount,includeAncestorInfo:true};if(bcg.folderLinksContextId){params.folderLinksContextId=bcg.folderLinksContextId;}if(bcg.includeObjectDesc){params.includeObjectDesc=bcg.includeObjectDesc;}if(bcg.rootFolderID){params.rootFolderID=bcg.rootFolderID;}else{if(bcg.rootFolderType){params.rootFolderType=bcg.rootFolderType;}}if(bcg.browsableTypes){params.objectType=bcg.browsableTypes;}if(bcg.searchPattern){params.searchPattern=bcg.searchPattern;if(bcg.recursive){params.recursive=bcg.recursive;}}this.parent.set("waiting",true);if(bcg.dataProvider){bcg.dataProvider.serverRequest(params,callback);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,callback,params);}},hasNext:function(){var bcg=this.browseConfig;return(bcg.blockBegin+bcg.blockCount-1)<bcg.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function init(props){if(this._super){this._super(props);}this.ifDataHelper=createIncFetchDataHelper(this);if(props.browseConfig){this.ifDataHelper.browseConfig=props.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function addItems(items){var bvmStr=this.browseConfig.browsableViewMedias;if(items&&bvmStr){var bvms={};$ARR.forEach(bvmStr.split(","),function(vm){bvms[parseInt(vm,10)]=true;});items=$ARR.filter(items,function(obj){return(obj.t!==$DSS_OBJ_TYPES.DssTypeDocumentDefinition)||bvms[obj.dvm];});}this.add(items,-1);this.set("waiting",false);if(this._super){this._super(items);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function setupScrollNodes(){this.scrollNode=this.scrollboxNode;}});}());