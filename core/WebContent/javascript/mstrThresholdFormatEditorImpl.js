mstrThresholdFormatEditorImplScript=true;mstrThresholdFormatEditorImpl.prototype=new mstrFormatImpl();mstrThresholdFormatEditorImpl.prototype.replaceOptionSelect=null;mstrThresholdFormatEditorImpl.prototype.replaceOptionCheck=null;mstrThresholdFormatEditorImpl.prototype.hideOptionCheck=null;mstrThresholdFormatEditorImpl.prototype.symbolDropDown=null;mstrThresholdFormatEditorImpl.prototype.textInput=null;mstrThresholdFormatEditorImpl.prototype.imageInput=null;mstrThresholdFormatEditorImpl.prototype.nameTextBox=null;mstrThresholdFormatEditorImpl.TEXT=3;mstrThresholdFormatEditorImpl.IMAGE=4;mstrThresholdFormatEditorImpl.QUICK_SYMBOL=10;mstrThresholdFormatEditorImpl.HIDE=-1;mstrThresholdFormatEditorImpl.prototype.onload=function(){mstrFormatImpl.prototype.onload.call(this);this.nameTextBox=microstrategy.findChildWithAtt(this.elem,"input","id","thName");this.nameTextBox.focus();if(this.nameTextBox){this.nameTextBox.setAttribute(mstrHTMLAttributes.ATTR_NOZEROSTR,"1");this.nameTextBox.setAttribute(mstrHTMLAttributes.ATTR_FLDID,"945");}this.replaceOptionSelect=microstrategy.findChildWithAtt(this.elem,"select","id","thReplaceOption");if(this.replaceOptionSelect){this.replaceOptionSelect.onclick=new Function("e","return microstrategy.bone('"+this.id+"').onselectionchange();");}this.replaceOptionCheck=microstrategy.findChildWithAtt(this.elem,"input","id","thReplace");if(this.replaceOptionCheck){this.replaceOptionCheck.onclick=new Function("e","return microstrategy.bone('"+this.id+"').oncheck(e);");}this.hideOptionCheck=microstrategy.findChildWithAtt(this.elem,"input","id","thHide");this.symbolDropDown=microstrategy.findChildWithAtt(this.elem,"select","id","thQuickSimbol");this.textInput=microstrategy.findChildWithAtt(this.elem,"input","id","thReplaceText");this.imageInput=microstrategy.findChildWithAtt(this.elem,"input","id","thReplaceImage");};mstrThresholdFormatEditorImpl.prototype.onselectionchange=function(){if(!this.replaceOptionSelect){return ;}var optionSelected=this.replaceOptionSelect.value;this.symbolDropDown.style.display="none";this.textInput.style.display="none";this.imageInput.style.display="none";if(optionSelected==mstrThresholdFormatEditorImpl.TEXT){this.textInput.style.display="inline";}else{if(optionSelected==mstrThresholdFormatEditorImpl.QUICK_SYMBOL){this.symbolDropDown.style.display="inline";}else{if(optionSelected==mstrThresholdFormatEditorImpl.IMAGE){this.imageInput.style.display="inline";}}}};mstrThresholdFormatEditorImpl.prototype.oncheck=function(e){e=e||window.event;var src=getEventTarget(e);if(src.getAttribute("id")=="thReplace"){this.toggleReplaceOptions(src.checked);}};mstrThresholdFormatEditorImpl.prototype.toggleReplaceOptions=function(state){this.replaceOptionSelect.disabled=!state;this.symbolDropDown.disabled=!state;this.textInput.disabled=!state;this.imageInput.disabled=!state;};mstrThresholdFormatEditorImpl.prototype.initSelections=function(){var at=this.getAppliesTo();if(at&&at.commands){var value=at.commands.queryState("name");if(this.nameTextBox){this.nameTextBox.value=value;}}if(this.replaceOptionCheck){this.replaceOptionCheck.checked=at.commands.queryState("replace");this.toggleReplaceOptions(this.replaceOptionCheck.checked);}var option=at.commands.queryState("replaceOption");if(this.replaceOptionSelect){var value=at.commands.queryState("replaceValue");var s=this.replaceOptionSelect.options.namedItem(option);if(s){this.replaceOptionSelect.options.namedItem(option).selected=true;switch(option){case mstrThresholdFormatEditorImpl.QUICK_SYMBOL:var sOp=microstrategy.findChildWithAtt(this.symbolDropDown,"option","value",value);if(sOp){sOp.selected=true;}break;case mstrThresholdFormatEditorImpl.TEXT:if(this.textInput){this.textInput.value=value;}break;case mstrThresholdFormatEditorImpl.IMAGE:if(this.imageInput){this.imageInput.value=value;}break;}}this.onselectionchange();}if(this.hideOptionCheck){this.hideOptionCheck.checked=(option==mstrThresholdFormatEditorImpl.HIDE);}};mstrThresholdFormatEditorImpl.prototype.validateInputs=function(validateChildren){try{if(this.nameTextBox){var em=mstrEditorImpl.validateField(this.nameTextBox,"",true);if(em.length>0){showMessage({contents:em,elements:microstrategy.OK_BUTTON,type:mstrMsgBoxImpl.MSG_ERROR});return false;}}return mstrFormatImpl.prototype.validateInputs.call(this,validateChildren);}catch(err){microstrategy.errors.log(err);return false;}};mstrThresholdFormatEditorImpl.prototype.getExtraFormatChanges=function(at,bulkChanges){try{bulkChanges.push("tName|"+this.nameTextBox.value);if(this.replaceOptionCheck&&this.replaceOptionCheck.checked){var v=this.replaceOptionSelect.options[this.replaceOptionSelect.selectedIndex].value;bulkChanges.push("replaceOption|"+v);if(v==mstrThresholdFormatEditorImpl.TEXT){bulkChanges.push("replaceValue|"+this.textInput.value);}else{if(v==mstrThresholdFormatEditorImpl.QUICK_SYMBOL){bulkChanges.push("replaceValue|"+(this.symbolDropDown.options[this.symbolDropDown.selectedIndex].value));}else{if(v==mstrThresholdFormatEditorImpl.IMAGE){bulkChanges.push("replaceValue|"+this.imageInput.value);}}}}else{if(this.hideOptionCheck&&this.hideOptionCheck.checked){bulkChanges.push("replaceOption|"+this.hideOptionCheck.value);}else{bulkChanges.push("replaceOption|2");}}}catch(err){microstrategy.errors.log(err);}return bulkChanges;};function mstrThresholdFormatEditorImpl(id){this.inherits=mstrFormatImpl;this.inherits(id);delete this.inherits;return this;}