mstrUserEntitiesTreeCartImplScript=true;mstrUserEntitiesTreeCartImpl.prototype=new mstrTreeCartImpl();mstrUserEntitiesTreeCartImpl.EVERYONE_GROUP_ID="C82C6B1011D2894CC0009D9F29718E4F";mstrUserEntitiesTreeCartImpl.prototype.add=function(){try{var options=new Array();var groupIdArray=new Array();if(this.treeView&&this.selected){var lLength=0;var oLI=this.treeView.elem.getElementsByTagName("LI");if((oLI)&&(oLI.length)){lLength=oLI.length;}for(var i=0;i<lLength;i++){if(oLI[i].getAttribute("sel")=="1"){var text=(oLI[i].innerText||oLI[i].textContent).replace(/\s$/,"");var oOption=new Option(text,oLI[i].getAttribute("val"));oOption.setAttribute("prvs",oLI[i].getAttribute("prvs"));if(!this.isItemInList(this.selected,oOption)){var options=this.selected.options;var index=(options.length==1&&options[0].value=="-none-")?0:options.length;options[index]=oOption;this.hasChanged=true;if(oLI[i].getAttribute("prvs")){groupIdArray.push(oLI[i].getAttribute("prvs"));}}}}}microstrategy.eventManager.notifyOrphanBones("onUserGroupsChange",groupIdArray,true);}catch(err){microstrategy.errors.log(err);return false;}};mstrUserEntitiesTreeCartImpl.prototype.remove=function(){try{if(this.selected){if(this.selected.options[0].value=="-none-"||this.selected.options[0].getAttribute("value")==mstrUserEntitiesTreeCartImpl.EVERYONE_GROUP_ID){this.selected.options[0].selected=false;}var groupIdArray=new Array();var lastIndex=0;var length=this.selected.options.length;for(var i=length-1;i>=0;i--){if(this.selected.options[i].selected){if(this.selected.options[i].getAttribute("value")!=mstrUserEntitiesTreeCartImpl.EVERYONE_GROUP_ID){groupIdArray[groupIdArray.length]=this.selected.options[i].getAttribute("prvs");}if(bIsFirefox){this.selected.remove(i);}else{this.selected.options.remove(i);}lastIndex=i;this.hasChanged=true;i==length-1?i:i++;length--;}}microstrategy.eventManager.notifyOrphanBones("onUserGroupsChange",groupIdArray,false);if(this.selected.options.length==0){this.selected.options[0]=new Option("--- "+microstrategy.descriptors.getDescriptor(512)+" ---","-none-");}else{if(lastIndex<this.selected.options.length){this.selected.options[lastIndex].selected=true;}else{this.selected.options[this.selected.options.length-1].selected=true;}}}}catch(err){microstrategy.errors.log(err);return false;}};function mstrUserEntitiesTreeCartImpl(id){this.inherits=mstrTreeCartImpl;this.inherits(id);delete this.inherits;return this;}