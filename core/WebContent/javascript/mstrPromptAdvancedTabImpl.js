mstrPromptAdvancedTabImplScript=true;mstrPromptAdvancedTabImpl.prototype=new mstrPromptDefTabImpl();mstrPromptAdvancedTabImpl.prototype.widthDiv=null;mstrPromptAdvancedTabImpl.prototype.heightDiv=null;mstrPromptAdvancedTabImpl.prototype.arrangementDiv=null;mstrPromptAdvancedTabImpl.prototype.searchDiv=null;mstrPromptAdvancedTabImpl.prototype.searchReqDiv=null;mstrPromptAdvancedTabImpl.prototype.navigationDiv=null;mstrPromptAdvancedTabImpl.prototype.showTimePickerDiv=null;mstrPromptAdvancedTabImpl.prototype.mobileSettingsDiv=null;mstrPromptAdvancedTabImpl.prototype.showSwitchProps=null;mstrPromptAdvancedTabImpl.prototype.showNumericProps=null;mstrPromptAdvancedTabImpl.prototype.showIntervalProps=null;mstrPromptAdvancedTabImpl.prototype.showIphoneIpadProps=null;mstrPromptAdvancedTabImpl.prototype.showGeoProps=null;mstrPromptAdvancedTabImpl.prototype.dispStyleCopy=null;mstrPromptAdvancedTabImpl.prototype.prevDispStyle=null;mstrPromptAdvancedTabImpl.prototype.dispStyle=null;mstrPromptAdvancedTabImpl.prototype.onload=function(){try{mstrPromptDefTabImpl.prototype.onload.call(this);this.widthDiv=getObj("widthDiv");this.heightDiv=getObj("heightDiv");this.arrangementDiv=getObj("arrangementDiv");this.defaultSelectionDiv=getObj("defaultSelectionDiv");this.searchDiv=getObj("searchDiv");this.mobileSettingsDiv=getObj("mobileSettingsDiv");this.searchReqDiv=getObj("searchReqDiv");this.navigationDiv=getObj("navigationDiv");this.showTimePickerDiv=getObj("showTimePickerDiv");this.showSwitchProps=getObj("showSwitchProps");this.showNumericProps=getObj("showNumericProps");this.showIntervalProps=getObj("showIntervalProps");this.showIphoneIpadProps=getObj("showIphoneIpadProps");this.showGeoProps=getObj("showGeoProps");this.dispStyleCopy=getObj("p_dispStyleCopy");this.dispStyle=getObj("p_dispStyle");this.lookupForms=getObj("p_propLookupForm");this.onValue=document.getElementById("p_onvalue");this.offValue=document.getElementById("p_offvalue");this.numberFormat=document.getElementById("b_numberFormat");this.interval=document.getElementById("p_interval");this.latitude=document.getElementById("vp_geocoordinate_lat");this.longitude=document.getElementById("vp_geocoordinate_long");this.minDateBox=document.getElementById("vp_dr_min_value");this.maxDateBox=document.getElementById("vp_dr_max_value");var setTab=function(fld){if(typeof (fld)=="string"){fld=getObj(fld);}if(fld){fld.setAttribute("tab","3");}};setTab(this.interval);setTab(this.onValue);setTab(this.offValue);setTab(this.minDateBox);setTab(this.maxDateBox);setTab("p_width");setTab("p_height");setTab("p_arrangeSize");}catch(err){microstrategy.errors.log(err);return false;}};mstrPromptAdvancedTabImpl.prototype.initSettings=function(){try{var at=this.getAppliesTo();this.promptEditorType=at.webPromptType;if(at.webPromptType==mstrPromptDefImpl.CONSTANT_PROMPT){this.settings=this.getSettings(["p_dispStyle","p_cusStyle","p_propUseWebBlocks","p_pre90Style_value","p_pre90Style_check","p_propFixedWidth","p_width","p_showTime","p_onvalue","p_offvalue","p_interval","vp_geocoordinate_lat","vp_geocoordinate_long"]);}else{this.settings=this.getSettings(["p_dispStyle","p_cusStyle","p_propUseWebBlocks","p_pre90Style_value","p_pre90Style_check","p_propFixedWidth","p_width","p_propFixedHeight","p_height","p_arrangement","p_arrangementSizeMode","p_arrangeSize","p_propShowSearchBox","p_propSearchRequired","p_propAllowNav","p_propUserFolderStructure","p_propDonotShowEmptyFolders","vp_dr_min_value","vp_dr_max_value","p_propLookupForm","p_propGeoMapping","p_GeoLevel_name","p_defaultSelection"]);}this.hasCustomStyles=null;this.onpostswitch();}catch(err){microstrategy.errors.log(err);return false;}};mstrPromptAdvancedTabImpl.prototype.onpostswitch=function(){this.adjustStyleListForMinMax(true);this.adjustStyleListForOrigin(true);this.updateStyleList(getObj("p_dispStyle"),true);this.showShowTimePickerDiv(true);this.updateShowTime(getObj("p_showTime"),true);this.showShowNumericProps();this.initializeDisables();var pre90Style=getObj("p_pre90Style_value");if(pre90Style&&(!pre90Style.disabled)){this.updateText(pre90Style);}};mstrPromptAdvancedTabImpl.prototype.updateElementAttributes=function(evt){try{if(evt){var wr=mstr.Enum.Widget.READYSTATE;switch(evt.readyState){case wr.SUCCESS:var attrNode=evt.response.data.getContainer();var forms=this.forms=attrNode&&attrNode.value&&attrNode.value.dssforms;if(this.lookupForms){this.lookupForms.innerHTML="";}if(forms){var browseFormCount=0,browseForm=-1,optionsHTML=[],value="";if(this.lookupForms){this.lookupForms.innerHTML="";}for(var i=0;i<forms.length;i++){if(forms[i].isBrowseForm){browseFormCount++;if(browseFormCount==1){browseForm=i;}}if(this.lookupForms){var option=document.createElement("option");option.value=forms[i].dssid;value=forms[i].n;if(!value){var orgInput=document.getElementById("ep_att_name");value=orgInput?orgInput.value:"";}option.innerHTML=value;this.lookupForms.appendChild(option);}}this.isDateAttribute=(browseFormCount==1&&forms[browseForm].dtp==14);}break;case wr.ERROR:case wr.TIMEOUT:break;}}else{var promptType=this.getPromptType();if(promptType!=mstrPromptDefImpl.ELEMENTS_PROMPT){return false;}var at=this.getAppliesTo();if(at&&at.currentAttributeId){if(this.currentAttributeId!=at.currentAttributeId){this.currentAttributeId=at.currentAttributeId;var req=new mstr.http.BrowseFormsRequestInputs(this.currentAttributeId,mstr.Enum.Widget.DISPLAYEDFORMS.ALL);this.gridFormatReqId=mstr.http.Governor.submitRequest(req,this.id,"updateElementAttributes");var lkp=mstr.http.Governor.requests.lookup[this.gridFormatReqId];if(lkp&&lkp.response){this.updateElementAttributes(lkp);}}}}}catch(err){microstrategy.errors.log(err);}};mstrPromptAdvancedTabImpl.prototype.adjustStyleListForOrigin=function(skipCmd){var promptType=this.getPromptType();if((promptType==mstrPromptDefImpl.EXPRESSION_PROMPT&&!this.isHQ())||promptType==mstrPromptDefImpl.OBJECTS_PROMPT){var list=getObj("p_dispStyle");var op=null;if(this.searchBased()){var found=false;for(i=0;i<list.options.length;i++){op=list.options[i];if(op.value==mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TREE){found=true;break;}}if(!found){var copyOp=this.dispStyleCopy.options[this.dispStyleCopy.options.length-1];list.options[list.options.length]=new Option(copyOp.text,copyOp.value,copyOp.defaultSelected,false);}}else{var selected=false;for(i=0;i<list.options.length;i++){op=list.options[i];if(op.value==mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TREE){list.options[i]=null;break;}if(op.selected){selected=true;}}if(!selected&&list.options.length){list.options[list.options.length-1].selected=true;}}this.updateStyleList(list,skipCmd);}};mstrPromptAdvancedTabImpl.prototype.isMultipleStyleOption=function(optionValue){var isMSOp=true;var promptType=this.getPromptType();if((promptType==mstrPromptDefImpl.EXPRESSION_PROMPT)&&!this.isHQ()){switch(optionValue){case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TEXTBOX:case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_OPTION:case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_PULLDOWN:case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_LIST:isMSOp=false;break;default:break;}}else{if(promptType==mstrPromptDefImpl.ELEMENTS_PROMPT||promptType==mstrPromptDefImpl.OBJECTS_PROMPT){switch(optionValue){case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_OPTION:case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_PULLDOWN:isMSOp=false;break;default:break;}}}return isMSOp;};mstrPromptAdvancedTabImpl.prototype.adjustCurrentValue=function(currentValue){var promptType=this.getPromptType();if((promptType==mstrPromptDefImpl.EXPRESSION_PROMPT)&&!this.isHQ()){switch(currentValue){case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TEXTBOX:case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_OPTION:case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_PULLDOWN:case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_LIST:currentValue=mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_CART;break;default:break;}}else{if(promptType==mstrPromptDefImpl.ELEMENTS_PROMPT||promptType==mstrPromptDefImpl.OBJECTS_PROMPT){switch(currentValue){case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_OPTION:currentValue=mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_CHECKBOX;break;case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_PULLDOWN:currentValue=mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_LIST;break;default:break;}}}return currentValue;};mstrPromptAdvancedTabImpl.prototype.adjustStyleListForMinMax=function(skipCmd){var promptType=this.getPromptType();var minValue=microstrategy.bone("tabPromptDispId").minCheck?microstrategy.bone("tabPromptDispId").minValue:null;var maxValue=microstrategy.bone("tabPromptDispId").maxCheck?microstrategy.bone("tabPromptDispId").maxValue:null;var currentValue,copyOp,newOp;if(promptType==mstrPromptDefImpl.ELEMENTS_PROMPT||promptType==mstrPromptDefImpl.OBJECTS_PROMPT||(promptType==mstrPromptDefImpl.EXPRESSION_PROMPT&&!this.isHQ())){var list=getObj("p_dispStyle");currentValue=list.value;var selected=false;if(minValue!==null&&minValue>1){list.options.length=0;currentValue=this.adjustCurrentValue(currentValue);for(i=0;i<this.dispStyleCopy.options.length;i++){copyOp=this.dispStyleCopy.options[i];if(this.isMultipleStyleOption(copyOp.value)){newOp=new Option(copyOp.text,copyOp.value,copyOp.defaultSelected,false);list.options[list.options.length]=newOp;if(newOp.value==currentValue){newOp.selected=true;selected=true;}}}if(!selected){if(list.options.length>0){list.options[0].selected=true;}}this.updateStyleList(list,skipCmd);}else{if(maxValue!==null&&maxValue<=1){list.options.length=0;for(i=0;i<this.dispStyleCopy.options.length;i++){copyOp=this.dispStyleCopy.options[i];if(copyOp.value!=mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_CHECKBOX){newOp=new Option(copyOp.text,copyOp.value,copyOp.defaultSelected,false);list.options[list.options.length]=newOp;if(newOp.value==currentValue){newOp.selected=true;selected=true;}}}if(!selected){if(list.options.length>0){list.options[0].selected=true;}}this.updateStyleList(list,skipCmd);}else{if(list.options.length!=this.dispStyleCopy.options.length){list.options.length=0;for(i=0;i<this.dispStyleCopy.options.length;i++){copyOp=this.dispStyleCopy.options[i];newOp=new Option(copyOp.text,copyOp.value,copyOp.defaultSelected,false);list.options[list.options.length]=newOp;if(newOp.value==currentValue){newOp.selected=true;selected=true;}}if(!selected){if(list.options.length>0){list.options[0].selected=true;}}this.updateStyleList(list,skipCmd);}}}}};mstrPromptAdvancedTabImpl.prototype.updateShowSearchBoxList=function(obj){if(obj.options.length==3&&obj.value!=""){var op1=new Option(obj.options[1].text,obj.options[1].value,obj.options[1].defaultSelected,obj.options[1].selected);var op2=new Option(obj.options[2].text,obj.options[2].value,obj.options[2].defaultSelected,obj.options[2].selected);obj.options.length=0;obj.options[0]=op1;obj.options[1]=op2;}this.showPropertySearchReqDiv(false,mstrPromptDefCommandsImpl.prototype.VALUE_FALSE==obj.value);if(obj.value&&obj.value!=""){mstrPromptDefTabImpl.prototype.updateList.call(this,obj);}};mstrPromptAdvancedTabImpl.prototype.updateStyleValue=function(){if(this.getPromptType()==mstrPromptDefImpl.CONSTANT_PROMPT){var dataType=this.getConstantPromptDataType();var cleaned=false;for(var i=0;i<this.dispStyle.options.length;i++){var option=this.dispStyle.options[i];var type=option.getAttribute("ty");if(type&&type!=dataType){option.selected=false;}else{option.selected=!cleaned?cleaned=true:false;}}this.updateList(this.dispStyle);}};mstrPromptAdvancedTabImpl.prototype.isDate=function(){var at=this.getAppliesTo();if(at&&!at.currentAttributeId){return at.isDateAttribute;}else{return this.isDateAttribute;}};mstrPromptAdvancedTabImpl.prototype.isSearchAllowed=function(){var predefinedRadio=document.getElementById("ep_elem_restriction_pre");return !(predefinedRadio&&predefinedRadio.checked);};mstrPromptAdvancedTabImpl.prototype.updateStyleList=function(obj,skipCmd){var style=obj.value;var promptType=this.getPromptType();var propDiv=null;var propDivs=null,i,option,type;if(this.fullStyleList){for(i=0;i<this.fullStyleList.length;i++){this.fullStyleList[i].sel=null;if(this.fullStyleList[i].val==obj.value){this.fullStyleList[i].sel=true;}}}var clearBox=function(bone){if(!bone.fullStyleList){bone.fullStyleList=[];for(i=0;i<obj.options.length;i++){bone.fullStyleList.push({val:obj.options[i].value,ty:obj.options[i].getAttribute("ty"),dflt:obj.options[i].getAttribute("dflt"),vf:obj.options[i].getAttribute("vf"),txt:obj.options[i].innerHTML,sel:obj.options[i].selected});}}obj.innerHTML="";};this.updateCustomStyleList(getObj("p_cusStyle"),skipCmd);switch(promptType){case mstrPromptDefImpl.CONSTANT_PROMPT:var dataType=this.getConstantPromptDataType();clearBox(this);for(i=0;i<this.fullStyleList.length;i++){type=this.fullStyleList[i].ty;if(!(type&&(","+type+",").indexOf(","+dataType+",")<0)){option=document.createElement("option");option.value=this.fullStyleList[i].val;if(type!=null){option.setAttribute("ty",type);}option.innerHTML=this.fullStyleList[i].txt;if(this.fullStyleList[i].sel){option.selected=true;}obj.appendChild(option);}}break;case mstrPromptDefImpl.ELEMENTS_PROMPT:var defaultOption=null,selectDefault=false;clearBox(this);for(i=0;i<this.fullStyleList.length;i++){option=obj.options[i];type=this.fullStyleList[i].ty;visibleFunction=this.fullStyleList[i].vf;if(!(type&&type==14&&!this.isDate())&&!(visibleFunction&&this[visibleFunction]&&!this[visibleFunction]())){option=document.createElement("option");option.value=this.fullStyleList[i].val;option.setAttribute("ty",type);option.innerHTML=this.fullStyleList[i].txt;if(this.fullStyleList[i].sel){option.selected=true;}obj.appendChild(option);}else{if(this.fullStyleList[i].sel){selectDefault=true;}}if(this.fullStyleList[i].dflt){defaultOption=option;}}if(selectDefault){defaultOption.selected=true;}this.showPropertyDefaultSelectionDiv(skipCmd,style==mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_CART);case mstrPromptDefImpl.OBJECTS_PROMPT:case mstrPromptDefImpl.EXPRESSION_PROMPT:this.hideAllPropDivs(skipCmd,style);switch(style){case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_OPTION:case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_CHECKBOX:this.showPropertyWidthDiv(skipCmd);this.showPropertyHeightDiv(skipCmd);this.showPropertyArrangementDiv(skipCmd);this.showPropertySearchDiv(skipCmd);if(promptType==mstrPromptDefImpl.ELEMENTS_PROMPT){this.showPropertySearchReqDiv(skipCmd);}break;case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_PULLDOWN:this.showPropertyWidthDiv(skipCmd);this.showPropertySearchDiv(skipCmd);if(promptType==mstrPromptDefImpl.ELEMENTS_PROMPT){this.showPropertySearchReqDiv(skipCmd);}break;case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_LIST:this.showPropertyWidthDiv(skipCmd);this.showPropertyHeightDiv(skipCmd);this.showPropertySearchDiv(skipCmd);if(promptType==mstrPromptDefImpl.ELEMENTS_PROMPT){this.showPropertySearchReqDiv(skipCmd);}break;case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_CART:case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TREE:this.showPropertyWidthDiv(skipCmd);this.showPropertyHeightDiv(skipCmd);this.showPropertySearchDiv(skipCmd);if(promptType!=mstrPromptDefImpl.ELEMENTS_PROMPT){this.showPropertyNavDiv(skipCmd,style);}if(promptType==mstrPromptDefImpl.EXPRESSION_PROMPT||promptType==mstrPromptDefImpl.ELEMENTS_PROMPT){this.showPropertySearchReqDiv(skipCmd);}break;case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_CALENDAR:this.showMinMaxCalendarSection(skipCmd);break;case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_BARCODE:this.showLookupFormSection(skipCmd);this.showPropertySearchDiv(skipCmd);if(promptType==mstrPromptDefImpl.ELEMENTS_PROMPT){this.showPropertySearchReqDiv(skipCmd);}break;case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_GEOLOCATION:this.showGeoSection(skipCmd);this.showPropertySearchDiv(skipCmd);if(promptType==mstrPromptDefImpl.ELEMENTS_PROMPT){this.showPropertySearchReqDiv(skipCmd);}break;}break;}var baseStyleName=getObj("p_dispStyle").value;var at=this.getAppliesTo();if((at.isNew||(!skipCmd))&&(obj.getAttribute("cmdvl")||baseStyleName&&baseStyleName!=at.dispStyle)){mstrPromptDefTabImpl.prototype.updateList.call(this,obj);}if(microstrategy.bone("tabPromptQualId")!==null){microstrategy.bone("tabPromptQualId").adjustExpTypeAllowed();}};mstrPromptAdvancedTabImpl.prototype.updateCustomStyleList=function(obj,skipCmd){var baseStyleName=getObj("p_dispStyle").value;if(this.hasCustomStyles===false){return ;}var allCustomStyles=this.getAllCustomStyles();if(!allCustomStyles){this.hasCustomStyles=false;getObj("cusStyleTR").style.display="none";if(!bIsW3C){getObj("p_cusStyle").style.visibility="hidden";}return ;}this.hasCustomStyles=true;if(baseStyleName&&baseStyleName!=this.prevDispStyle){var styleList=allCustomStyles&&allCustomStyles[baseStyleName];var selectedIndex=-1;obj.options.length=0;obj.options[obj.options.length]=new Option(this.getCustomStyleNoneName(),"",false,false);if(styleList){for(var i=0;i<styleList.length;i++){var style=styleList[i];obj.options[obj.options.length]=new Option(style.name,style.name,false,false);if(style.selected){selectedIndex=i+1;}}if(obj.options.length>0){if(selectedIndex==-1){obj.options[0].selected=true;}else{obj.options[selectedIndex].selected=true;}}}this.prevDispStyle=baseStyleName;}if(!skipCmd){mstrPromptDefTabImpl.prototype.updateList.call(this,obj);}};mstrPromptAdvancedTabImpl.prototype.updateShowTime=function(obj,initialize){if(!obj){return ;}if(!initialize){this.updateCheck(obj);}if(microstrategy.bone("tabPromptDispId")!==null){microstrategy.bone("tabPromptDispId").enableTimePicker(obj.checked,initialize);}};mstrPromptAdvancedTabImpl.prototype.updateUseFolderStructure=function(obj,initialize){if(!obj){return ;}if(!initialize){this.updateCheck(obj);}var style=this.dispStyle.value;this.updateCheckByName("donotShowEmptyFolders",obj.checked&&style&&style==mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TREE&&this.searchBased());};mstrPromptAdvancedTabImpl.prototype.hideAllPropDivs=function(skipCmd,style){this.showPropertyWidthDiv(skipCmd,true);this.showPropertyHeightDiv(skipCmd,true);this.showPropertyArrangementDiv(skipCmd,true);this.showPropertySearchDiv(skipCmd,true);this.showPropertySearchReqDiv(skipCmd,true);this.showPropertyNavDiv(skipCmd,style,true);this.showMinMaxCalendarSection(skipCmd,true);this.showLookupFormSection(skipCmd,true);this.showGeoSection(skipCmd,true);};mstrPromptAdvancedTabImpl.prototype.showPropertyWidthDiv=function(skipCmd,hide){if(this.widthDiv){var p1=microstrategy.findChildWithAtt(this.widthDiv,"input","id","p_propFixedWidth");var p2=microstrategy.findChildWithAtt(this.widthDiv,"input","id","p_width");p1.disabled=!!hide;p2.disabled=!!hide||!p1.checked;if(!skipCmd){this.updateObjCmd(p1,!!hide);this.updateObjCmd(p2,!!hide);}}};mstrPromptAdvancedTabImpl.prototype.showPropertyHeightDiv=function(skipCmd,hide){if(this.heightDiv){var p1=microstrategy.findChildWithAtt(this.heightDiv,"input","id","p_propFixedHeight");var p2=microstrategy.findChildWithAtt(this.heightDiv,"input","id","p_height");p1.disabled=!!hide;p2.disabled=!!hide||!p1.checked;if(!skipCmd){this.updateObjCmd(p1,!!hide);this.updateObjCmd(p2,!!hide);}}};mstrPromptAdvancedTabImpl.prototype.showPropertyArrangementDiv=function(skipCmd,hide){if(this.arrangementDiv){var p1=microstrategy.findChildWithAtt(this.arrangementDiv,"select","id","p_arrangement");var p2=microstrategy.findChildWithAtt(this.arrangementDiv,"input","id","p_arrangementSizeMode");var p3=microstrategy.findChildWithAtt(this.arrangementDiv,"input","id","p_arrangeSize");p1.disabled=!!hide;p2.disabled=!!hide;p3.disabled=!!hide;if(!skipCmd){this.updateObjCmd(p1,!!hide);this.updateObjCmd(p2,!!hide);this.updateObjCmd(p3,!!hide);}}};mstrPromptAdvancedTabImpl.prototype.showPropertyDefaultSelectionDiv=function(skipCmd,hide){if(this.defaultSelectionDiv){var p=microstrategy.findChildWithAtt(this.defaultSelectionDiv,"select","id","p_defaultSelection");p.disabled=!!hide;if(!skipCmd){this.updateObjCmd(p,!!hide);}}};mstrPromptAdvancedTabImpl.prototype.showPropertySearchDiv=function(skipCmd,hide){if(this.searchDiv){var p1=microstrategy.findChildWithAtt(this.searchDiv,"select","id","p_propShowSearchBox");p1.disabled=!(!hide&&(this.searchBased()||this.isHQ()));if(!skipCmd){this.updateObjCmd(p1,!(!hide&&this.searchBased()));}}};mstrPromptAdvancedTabImpl.prototype.showPropertySearchReqDiv=function(skipCmd,hide){if(this.searchReqDiv){var style=this.dispStyle.value;var p1=microstrategy.findChildWithAtt(this.searchReqDiv,"input","id","p_propSearchRequired");var pSearch=microstrategy.findChildWithAtt(this.searchDiv,"select","id","p_propShowSearchBox");var showSearch=(!pSearch.value&&(style==mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TREE||style==mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_CART))||(pSearch.value==mstrPromptDefCommandsImpl.prototype.VALUE_TRUE);p1.disabled=!(!hide&&showSearch&&(this.searchBased()||this.isHQ()||this.isEL()));if(!skipCmd){this.updateObjCmd(p1,!(!hide&&showSearch&&(this.searchBased()||this.isHQ()||this.isEL())));}}};mstrPromptAdvancedTabImpl.prototype.showLookupFormSection=function(skipCmd,hide){if(this.mobileSettingsDiv){var p1=microstrategy.findChildWithAtt(this.mobileSettingsDiv,"select","id","p_propLookupForm");if(p1){if(hide){p1.removeAttribute(microstrategy.HTMLATTR_CMD_VALUE);}else{if(!skipCmd){this.updateList(p1);}}p1.disabled=hide;}}};mstrPromptAdvancedTabImpl.prototype.showGeoSection=function(skipCmd,hide){if(this.mobileSettingsDiv){var p=microstrategy.findChildWithAtt(this.mobileSettingsDiv,"select","id","p_propGeoMapping");if(p){if(!skipCmd){this.updateList(p);}p.disabled=hide;}p=microstrategy.findChildWithAtt(this.mobileSettingsDiv,"input","id","p_GeoLevel_name");if(p){var selector=microstrategy.findChildWithAtt(this.mobileSettingsDiv,"input","id","p_GeoLevel_selector");if(hide){p.removeAttribute(microstrategy.HTMLATTR_CMD_VALUE);p.disabled=true;if(selector){selector.disabled=true;}}else{p.disabled=false;if(selector){selector.disabled=false;}var dssid=microstrategy.findChildWithAtt(this.mobileSettingsDiv,"input","id","p_GeoLevel_dssid");if(dssid){p.setAttribute(microstrategy.HTMLATTR_CMD_VALUE,dssid.value);}}}}};mstrPromptAdvancedTabImpl.prototype.showMinMaxCalendarSection=function(skipCmd,hide){var calendarBlock=document.getElementById("dateRangeDiv");if(calendarBlock){if(this.isDate()){calendarBlock.style.display="block";var minCalendar=document.getElementById("vp_dr_min_calendar"),maxCalendar=document.getElementById("vp_dr_max_calendar");if(this.minDateBox&&this.maxDateBox&&minCalendar&&maxCalendar){this.minDateBox.disabled=this.maxDateBox.disabled=minCalendar.disabled=maxCalendar.disabled=!!hide;minCalendar.className=minCalendar.className.replace("Disabled","");maxCalendar.className=minCalendar.className.replace("Disabled","");if(minCalendar.disabled){minCalendar.className=minCalendar.className+"Disabled";}if(maxCalendar.disabled){maxCalendar.className=maxCalendar.className+"Disabled";}}}else{calendarBlock.style.display="none";}}};mstrPromptAdvancedTabImpl.prototype.showPropertyNavDiv=function(skipCmd,style,hide){if(!hide){var useFolderStructure=microstrategy.findChildWithAtt(this.navigationDiv,"input","id","p_propUserFolderStructure");if(style==mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TREE&&!this.isHQ()&&useFolderStructure&&!useFolderStructure.checked){useFolderStructure.checked=true;}else{if(!this.searchBased()&&useFolderStructure&&useFolderStructure.checked){useFolderStructure.checked=false;}}var donotShowEmptyFolders=microstrategy.findChildWithAtt(this.navigationDiv,"input","id","p_propDonotShowEmptyFolders");if(!useFolderStructure.checked){donotShowEmptyFolders.checked=false;}var allowNav=microstrategy.findChildWithAtt(this.navigationDiv,"input","id","p_propAllowNav");if(!useFolderStructure.checked){allowNav.checked=false;}}var enableUseFolderStructure=!hide&&this.searchBased()&&(style!=mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TREE||this.isHQ());if(this.navigationDiv){var p1=microstrategy.findChildWithAtt(this.navigationDiv,"input","id","p_propUserFolderStructure");var p2=microstrategy.findChildWithAtt(this.navigationDiv,"input","id","p_propAllowNav");var p3=microstrategy.findChildWithAtt(this.navigationDiv,"input","id","p_propDonotShowEmptyFolders");p1.disabled=!enableUseFolderStructure;p2.disabled=!(!hide&&p1.checked&&this.searchBased());p3.disabled=style&&style!=mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TREE||!(!hide&&p1.checked&&this.searchBased());if(style&&style!=mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TREE&&style!=mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_CART){p1.checked=false;p2.checked=false;}if(style&&style!=mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TREE){p3.checked=false;}if(!skipCmd){this.updateObjCmd(p1,!!hide);this.updateObjCmd(p2,!!hide);this.updateObjCmd(p3,!!hide);}}};mstrPromptAdvancedTabImpl.prototype.showShowTimePickerDiv=function(skipCmd){if(this.getPromptType()==mstrPromptDefImpl.CONSTANT_PROMPT){if(this.getConstantPromptDataType()==mstrPromptDefTabImpl.prototype.VPDate){this.showTimePickerDiv.style.display="block";getObj("p_showTime").setAttribute("isHidden",false);}else{this.showTimePickerDiv.style.display="none";getObj("p_showTime").setAttribute("isHidden",true);}if(!skipCmd){this.updateObjCmd(getObj("p_showTime"),false);}}};mstrPromptAdvancedTabImpl.prototype.showShowNumericProps=function(){if(this.getPromptType()==mstrPromptDefImpl.CONSTANT_PROMPT){var intervalUnit=document.getElementById("l_intervalUnit");switch(this.getConstantPromptDataType()){case mstrPromptDefTabImpl.prototype.VPNum:if(this.showIphoneIpadProps){this.showIphoneIpadProps.style.display="";}if(this.showSwitchProps){this.showSwitchProps.style.display="";}if(this.showNumericProps){this.showNumericProps.style.display="";}if(this.showIntervalProps){this.showIntervalProps.style.display="";}if(this.showGeoProps){this.showGeoProps.style.display="";}if(intervalUnit){intervalUnit.innerHTML="";}break;case mstrPromptDefTabImpl.prototype.VPDate:if(this.showIphoneIpadProps){this.showIphoneIpadProps.style.display="";}if(this.showSwitchProps){this.showSwitchProps.style.display="none";}if(this.showNumericProps){this.showNumericProps.style.display="none";}if(this.showIntervalProps){this.showIntervalProps.style.display="";}if(this.showGeoProps){this.showGeoProps.style.display="none";}if(intervalUnit){intervalUnit.innerHTML=microstrategy.descriptors.getDescriptor("2699");}break;default:if(this.showIphoneIpadProps){this.showIphoneIpadProps.style.display="none";}if(this.showSwitchProps){this.showSwitchProps.style.display="none";}if(this.showNumericProps){this.showNumericProps.style.display="none";}if(this.showIntervalProps){this.showIntervalProps.style.display="none";}if(this.showGeoProps){this.showGeoProps.style.display="none";}}}this.synchronizeNumericProps();};mstrPromptAdvancedTabImpl.prototype.synchronizeNumericProps=function(){switch(this.getConstantPromptDataType()){case mstrPromptDefTabImpl.prototype.VPNum:if(this.offValue&&this.onValue){this.offValue.disabled=this.onValue.disabled=this.dispStyle.value!=mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_SWITCH;}if(this.latitude&&this.longitude){this.latitude.disabled=this.longitude.disabled=this.dispStyle.value!=mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_GEOLOCATION;}var enableIntervalProperties=false;var mn=getObj("vp_num_min_check");var mx=getObj("vp_num_max_check");if(mn&&mx){mn.removeAttribute("disabled");mx.removeAttribute("disabled");}var p1=microstrategy.findChildWithAtt(this.body,"input","id","p_propFixedWidth");p1.disabled=true;switch(this.dispStyle.value){case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_SLIDER:this.updateCheckByName("vp_num_min_check",true);if(mn){mn.setAttribute("disabled","1");}case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_WHEEL:this.updateCheckByName("vp_num_max_check",true);if(mx){mx.setAttribute("disabled","1");}case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_STEPPER:enableIntervalProperties=true;break;case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_TEXTBOX:p1.disabled=false;enableIntervalProperties=false;break;case mstrPromptDefCommandsImpl.prototype.DISPLAYSTYLE_SWITCH:this.updateCheckByName("vp_num_max_check",false);this.updateCheckByName("vp_num_min_check",false);if(mx){mx.setAttribute("disabled","1");}if(mn){mn.setAttribute("disabled","1");}default:enableIntervalProperties=false;}if(this.interval){this.interval.disabled=!enableIntervalProperties;}if(this.numberFormat){this.numberFormat.disabled=!enableIntervalProperties;}break;case mstrPromptDefTabImpl.prototype.VPDate:var timeCheck=getObj("p_showTime");if(this.interval&&timeCheck){this.interval.disabled=!timeCheck.checked;}break;}};mstrPromptAdvancedTabImpl.prototype.updateObjCmd=function(obj,clear){if(clear===null||!clear){var inputSettingType=this.getInputType(obj);var settingValue;if(inputSettingType=="radio"||inputSettingType=="checkbox"){settingValue=obj.checked?"1":"0";}else{settingValue=obj.value;}obj.setAttribute(microstrategy.HTMLATTR_CMD_VALUE,settingValue);}else{obj.removeAttribute(microstrategy.HTMLATTR_CMD_VALUE);}};mstrPromptAdvancedTabImpl.prototype.updateList=function(obj){if(obj==this.dispStyle&&this.fullStyleList){for(var i=0;i<this.fullStyleList.length;i++){this.fullStyleList[i].sel=null;if(this.fullStyleList[i].val==obj.value){this.fullStyleList[i].sel=true;}}}mstrPromptDefTabImpl.prototype.updateList.call(this,obj);this.synchronizeNumericProps();};mstrPromptAdvancedTabImpl.prototype.openFormatEditor=function(){this.updateList(this.dispStyle);toggleShowBean("promptFormatEditor",true,"");};function mstrPromptAdvancedTabImpl(id){this.inherits=mstrPromptDefTabImpl;this.inherits(id);this.inherits=null;return this;}