mstrColorGradientEditorImplScript=true;mstrColorGradientEditorImpl.prototype=new mstrEditorImpl();mstrColorGradientEditorImpl.prototype.boneId="";mstrColorGradientEditorImpl.prototype.controlId="";mstrColorGradientEditorImpl.prototype.color1="FFFFFF";mstrColorGradientEditorImpl.prototype.color2="FFFFFF";mstrColorGradientEditorImpl.prototype.selcolor1="";mstrColorGradientEditorImpl.prototype.selcolor2="";mstrColorGradientEditorImpl.prototype.currentShadingOption=null;mstrColorGradientEditorImpl.prototype.currentPreview=null;mstrColorGradientEditorImpl.prototype.selPreview=1;mstrColorGradientEditorImpl.prototype.selShadingStyle=null;mstrColorGradientEditorImpl.prototype.currentPicker=null;mstrColorGradientEditorImpl.prototype.shadingStyle=null;mstrColorGradientEditorImpl.prototype.transitionType=1;mstrColorGradientEditorImpl.prototype.angle=0;mstrColorGradientEditorImpl.prototype.xOffset=0;mstrColorGradientEditorImpl.prototype.yOffset=0;mstrColorGradientEditorImpl.prototype.dialogDiv=null;mstrColorGradientEditorImpl.prototype.TRANSITIONTYPE_LINEAR=14;mstrColorGradientEditorImpl.prototype.TRANSITIONTYPE_RECTANGULAR=10;mstrColorGradientEditorImpl.prototype.TRANSITIONTYPE_CIRCULAR=9;mstrColorGradientEditorImpl.prototype.PROPERTY_SHADING_STYLE="shadingStyle";mstrColorGradientEditorImpl.prototype.PROPERTY_TRANSITION_TYPE="transitionType";mstrColorGradientEditorImpl.prototype.PROPERTY_ANGLE="angle";mstrColorGradientEditorImpl.prototype.PROPERTY_XOFFSET="xOffset";mstrColorGradientEditorImpl.prototype.PROPERTY_YOFFSET="yOffset";mstrColorGradientEditorImpl.prototype.presetShadingStyleTooltipsMap;mstrColorGradientEditorImpl.prototype.presetTooltips=null;mstrColorGradientEditorImpl.prototype.PRESET_TOOLTIP_TEXT_INDEX=0;mstrColorGradientEditorImpl.prototype.PRESET_TOOLTIP_CODE_INDEX=1;mstrColorGradientEditorImpl.prototype.onload=function(){try{this.initEditor();this.currentShadingOption=getElementById(this.id+"shadingStyle"+this.shadingStyle);var colorDropDown1=getElementById(this.id+"color1");var colorDropDown2=getElementById(this.id+"color2");var colorCheck=new RegExp("^[#]?([a-f]|[A-F]|\\d){6}$");if(colorDropDown1){if(colorDropDown1.childNodes){var colorForDropDown1=this.selcolor1?this.selcolor1:this.color1;if(colorCheck.test(colorForDropDown1)){colorDropDown1.childNodes[0].style.backgroundColor=((colorForDropDown1.indexOf("#")==0)?"":"#")+colorForDropDown1;}}}if(colorDropDown2){if(colorDropDown2.childNodes){var colorForDropDown2=this.selcolor2?this.selcolor2:this.color2;if(colorCheck.test(colorForDropDown2)){colorDropDown2.childNodes[0].style.backgroundColor=((colorForDropDown2.indexOf("#")==0)?"":"#")+colorForDropDown2;}}}if(!this.selcolor1){this.selcolor1=this.color1;}if(!this.selcolor2){this.selcolor2=this.color2;}this.initTooltips();if(this.selPreview){this.currentPreview=document.getElementById("previewBox"+this.selPreview);if(this.currentPreview){this.onPreviewSelect(this.currentPreview);}}if(this.selShadingStyle){this.currentShadingOption=document.getElementById(this.id+this.PROPERTY_SHADING_STYLE+this.selShadingStyle);this.showShadingStyle(this.currentShadingOption);}else{if(this.shadingStyle){this.currentShadingOption=document.getElementById(this.id+this.PROPERTY_SHADING_STYLE+this.shadingStyle);this.showShadingStyle(this.currentShadingOption);}}this.dialogDiv=this.elem;this.initSettings();togglePulldowns(this.elem,false);}catch(err){microstrategy.errors.log(err);return false;}};mstrColorGradientEditorImpl.prototype.initTooltips=function(){try{this.presetTooltips=new Object();this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_HORIZONTAL]=new Array(this.buildTooltip(this.TRANSITIONTYPE_LINEAR,0,0,0),this.buildTooltip(this.TRANSITIONTYPE_LINEAR,0,100,0),this.buildTooltip(this.TRANSITIONTYPE_LINEAR,0,50,50));this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_VERTICAL]=new Array(this.buildTooltip(this.TRANSITIONTYPE_LINEAR,90,0,0),this.buildTooltip(this.TRANSITIONTYPE_LINEAR,90,0,100),this.buildTooltip(this.TRANSITIONTYPE_LINEAR,90,50,50));this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALUP]=new Array(this.buildTooltip(this.TRANSITIONTYPE_LINEAR,135,100,0),this.buildTooltip(this.TRANSITIONTYPE_LINEAR,135,0,100),this.buildTooltip(this.TRANSITIONTYPE_LINEAR,135,50,50));this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALDOWN]=new Array(this.buildTooltip(this.TRANSITIONTYPE_LINEAR,45,100,0),this.buildTooltip(this.TRANSITIONTYPE_LINEAR,45,0,100),this.buildTooltip(this.TRANSITIONTYPE_LINEAR,45,50,50));this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCORNER]=new Array(this.buildTooltip(this.TRANSITIONTYPE_RECTANGULAR,0,0,0),this.buildTooltip(this.TRANSITIONTYPE_RECTANGULAR,0,100,0),this.buildTooltip(this.TRANSITIONTYPE_RECTANGULAR,0,100,100),this.buildTooltip(this.TRANSITIONTYPE_RECTANGULAR,0,0,100));this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCENTER]=new Array(this.buildTooltip(this.TRANSITIONTYPE_RECTANGULAR,0,50,50),this.buildTooltip(this.TRANSITIONTYPE_RECTANGULAR,45,50,50),this.buildTooltip(this.TRANSITIONTYPE_CIRCULAR,0,50,50));}catch(err){microstrategy.errors.log(err);return false;}};mstrColorGradientEditorImpl.prototype.buildTooltip=function(transitionType,angle,x,y){var result=new Array(2);var typeText=null;var typeCode=null;switch(transitionType){case this.TRANSITIONTYPE_LINEAR:typeText=microstrategy.descriptors.getDescriptor("4888");typeCode="Linear";break;case this.TRANSITIONTYPE_RECTANGULAR:typeText=microstrategy.descriptors.getDescriptor("4862");typeCode="Rectangular";break;case this.TRANSITIONTYPE_CIRCULAR:typeText=microstrategy.descriptors.getDescriptor("4889");typeCode="Circular";break;}result[this.PRESET_TOOLTIP_TEXT_INDEX]=microstrategy.descriptors.getDescriptor("4883")+" "+typeText+"; "+microstrategy.descriptors.getDescriptor("4884")+" "+angle+"; "+microstrategy.descriptors.getDescriptor("4885")+" "+x+"; "+microstrategy.descriptors.getDescriptor("4886")+" "+y;result[this.PRESET_TOOLTIP_CODE_INDEX]="TransitionType:"+typeCode+" Angle:"+angle+" XOffset:"+x+" YOffset:"+y;return result;};mstrColorGradientEditorImpl.prototype.initSettings=function(){try{this.settings=new Array();var props=new Array(this.PROPERTY_ANGLE,this.PROPERTY_XOFFSET,this.PROPERTY_YOFFSET);for(var i=0;i<props.length;i++){var elem=document.getElementById(props[i]);if(elem){this.settings.push(elem);switch(props[i]){case this.PROPERTY_ANGLE:case this.PROPERTY_XOFFSET:case this.PROPERTY_YOFFSET:elem.onchange=new Function("e","return microstrategy.bone('"+this.id+"').updateText(this)");break;}}}}catch(err){microstrategy.errors.log(err);return false;}};mstrColorGradientEditorImpl.prototype.updateText=function(elem){elem.setAttribute(microstrategy.HTMLATTR_CMD_VALUE,elem.getAttribute("value"));};mstrColorGradientEditorImpl.prototype.ondocumentclick=function(e){try{if(!e){e=window.event;}if(this.currentPicker){dropDown.closePicker(e,this);}}catch(err){microstrategy.errors.log(err);}};mstrColorGradientEditorImpl.prototype.applyChanges=function(){try{var otherParams;if(this.selcolor1.indexOf("#")>-1){this.selcolor1=this.selcolor1.slice(1);}if(this.selcolor2.indexOf("#")>-1){this.selcolor2=this.selcolor2.slice(1);}var propertyValue=this.selcolor1+","+this.selcolor2+",";if(parseInt(this.currentShadingOption.value)==gradientUtil.GRADIENTSHADING_STYLE_CUSTOM){otherParams=this.getParamsForCustomShading(true);if(otherParams==false){return false;}else{propertyValue+=otherParams;}}else{otherParams=this.getParamsForCurrentPreview(true);if(otherParams==false){return false;}else{propertyValue+=otherParams;}}if(this.color1.indexOf("#")>-1){this.color1=this.color1.slice(1);}if(this.color2.indexOf("#")>-1){this.color2=this.color2.slice(1);}var bone=microstrategy.bone(this.boneId);var currentProperty=this.color1+","+this.color2+","+this.transitionType+","+this.angle+","+this.xOffset+","+this.yOffset;if(bone&&this.shouldSubmitChanges(currentProperty,propertyValue)){this.preProcessGradient();bone.exec("edtColorGradient",this.controlId+"|"+propertyValue);}}catch(err){microstrategy.errors.log(err);return false;}};mstrColorGradientEditorImpl.prototype.preProcessGradient=function(){try{}catch(err){microstrategy.errors.log(err);return false;}};mstrColorGradientEditorImpl.prototype.shouldSubmitChanges=function(currentProperty,propertyValue){try{return(currentProperty!=propertyValue);}catch(err){microstrategy.errors.log(err);}};mstrColorGradientEditorImpl.prototype.getParamsForCustomShading=function(validate){try{var transitionTypeCtrl=getElementById(this.id+this.PROPERTY_TRANSITION_TYPE);var propertyValue="";if(transitionTypeCtrl){propertyValue+=transitionTypeCtrl.value+",";}var angleCtrl=getElementById(this.PROPERTY_ANGLE);if(angleCtrl){propertyValue+=angleCtrl.value+",";}var xOffsetCtrl=getElementById(this.PROPERTY_XOFFSET);if(xOffsetCtrl){propertyValue+=xOffsetCtrl.value+",";}var yOffsetCtrl=getElementById(this.PROPERTY_YOFFSET);if(yOffsetCtrl){propertyValue+=yOffsetCtrl.value;}return propertyValue;}catch(err){microstrategy.errors.log(err);return false;}};mstrColorGradientEditorImpl.prototype.getParamsForCurrentPreview=function(validate){try{var propertyValue="";if(this.currentPreview){var tooltip=this.currentPreview.getAttribute("code");if(tooltip){var args=tooltip.split(" ");var transType=args[0].split(":")[1];if(transType=="Linear"){propertyValue+=this.TRANSITIONTYPE_LINEAR+",";}else{if(transType=="Rectangular"){propertyValue+=this.TRANSITIONTYPE_RECTANGULAR+",";}else{propertyValue+=this.TRANSITIONTYPE_CIRCULAR+",";}}propertyValue+=args[1].split(":")[1]+",";propertyValue+=args[2].split(":")[1]+",";propertyValue+=args[3].split(":")[1];return propertyValue;}}else{if(validate){alert("Please select a preset gradient pattern!");return false;}}}catch(err){microstrategy.errors.log(err);return false;}};mstrColorGradientEditorImpl.prototype.okChanges=function(){try{if(!this.validateInputs()){return ;}this.close();this.applyChanges();microstrategy.unRegisterBone(this.id);}catch(err){microstrategy.errors.log(err);return false;}};mstrColorGradientEditorImpl.prototype.cancelChanges=function(){try{this.closeEditor();}catch(err){microstrategy.errors.log(err);return false;}};mstrColorGradientEditorImpl.prototype.togglePicker=function(show,pkrName,dropDownCtrl,cmdId){try{if(show){var pkr=document.getElementById(pkrName);if(pkr){this.currentPicker=pkr;}var pkrOptions=pkr.childNodes;if(pkrOptions){if(pkrOptions[0].name=="colorPicker0"){pkrOptions[0].style.display="none";}}}dropDown.togglePicker(show,pkrName,dropDownCtrl,this);}catch(err){microstrategy.errors.log(err);return false;}};mstrColorGradientEditorImpl.prototype.exec=function(cmdId,cmdVal){try{switch(cmdId){case"advColorPicker":var info=cmdVal.split("|");var colorDropDown=document.getElementById(this.id+info[0]);if(colorDropDown){if(colorDropDown.childNodes){colorDropDown.childNodes[0].style.backgroundColor=info[1];var prop="sel"+info[0];if(prop in this){this[prop]=info[1];}if(parseInt(this.currentShadingOption.value)!=gradientUtil.GRADIENTSHADING_STYLE_CUSTOM){this.renderPreviews();}}}break;}}catch(err){microstrategy.errors.log(err);return false;}};mstrColorGradientEditorImpl.prototype.execPicker=function(picker,obj){try{var cmdId=picker.commandId;var color=obj.getAttribute("id").slice(3);switch(cmdId){case"color1":case"color2":var colorDropDown=document.getElementById(this.id+cmdId);if(color!="More"){if(colorDropDown){if(colorDropDown.childNodes){colorDropDown.childNodes[0].style.backgroundColor=color;var prop="sel"+cmdId;if(prop in this){this[prop]=color;}if(parseInt(this.currentShadingOption.value)!=gradientUtil.GRADIENTSHADING_STYLE_CUSTOM){this.renderPreviews();}}}}else{var currentSelections="&color1="+this.selcolor1+"&color2="+this.selcolor2+"&shadingStyle="+parseInt(this.currentShadingOption.value);var otherParams="";if(parseInt(this.currentShadingOption.value)==gradientUtil.GRADIENTSHADING_STYLE_CUSTOM){otherParams=this.getParamsForCustomShading(false);}else{var validParams=this.getParamsForCurrentPreview(false);if(validParams==false){return false;}else{otherParams=validParams||"";}}var info=otherParams.split(",");if(info.length>=4){currentSelections+="&transitionType="+info[0]+"&angle="+info[1]+"&xOffset="+info[2]+"&yOffset="+info[3];}currentSelections+="&currentPreview=";currentSelections+=(this.currentPreview)?this.currentPreview.id.slice(10):-1;currentSelections+="&parentBoneID="+this.boneId+"&controlID="+this.controlId;microstrategy.openDialog("edtColorPicker",currentSelections,null,microstrategy.servletName+"."+microstrategy.pageName,{activeBoneID:this.id,activeControlID:cmdId,currentColor:mstr.utils.Color.rgbStr2hex(colorDropDown.childNodes[0].style.backgroundColor)});var bone=microstrategy.bone(this.boneId);if(bone&&bone.tabManager){microstrategy.updateManager.replaceURL("selectedTabOptions",bone.tabManager.getChangedTabOptions());}microstrategy.updateManager.flushAndSubmitChanges();microstrategy.updateManager.acknowledgeRequest();}break;}return true;}catch(err){microstrategy.errors.log(err);}return false;};mstrColorGradientEditorImpl.prototype.onPreviewSelect=function(div){try{if(this.currentPreview){this.currentPreview.className="preview";}div.className="previewSelected";this.currentPreview=div;}catch(err){microstrategy.errors.log(err);}};mstrColorGradientEditorImpl.prototype.showShadingStyle=function(option){try{if(this.currentShadingOption){this.currentShadingOption.checked=false;}this.currentShadingOption=option;this.currentShadingOption.checked=true;var variantsDiv=getElementById("VariantsSection");this.onPreviewSelect(getElementById("previewBox1"));var customShadingDiv=getElementById("CustomShadingSection");switch(parseInt(option.value)){case gradientUtil.GRADIENTSHADING_STYLE_HORIZONTAL:case gradientUtil.GRADIENTSHADING_STYLE_VERTICAL:case gradientUtil.GRADIENTSHADING_STYLE_DIAGONALUP:case gradientUtil.GRADIENTSHADING_STYLE_DIAGONALDOWN:case gradientUtil.GRADIENTSHADING_STYLE_FROMCORNER:case gradientUtil.GRADIENTSHADING_STYLE_FROMCENTER:variantsDiv.className="show";customShadingDiv.className="hide";this.renderPreviews();break;case gradientUtil.GRADIENTSHADING_STYLE_CUSTOM:variantsDiv.className="hide";customShadingDiv.className="show";var transitionTypeCtrl=getElementById(this.id+this.PROPERTY_TRANSITION_TYPE);transitionTypeCtrl.disabled=false;transitionTypeCtrl.className="showTransitionType";break;}}catch(err){microstrategy.errors.log(err);}};mstrColorGradientEditorImpl.prototype.renderPreviews=function(){try{this.applyGradient(1);this.applyGradient(2);this.applyGradient(3);var previewBox1=getElementById("previewBox1");var previewBox2=getElementById("previewBox2");var previewBox3=getElementById("previewBox3");var previewBox4=getElementById("previewBox4");switch(parseInt(this.currentShadingOption.value)){case gradientUtil.GRADIENTSHADING_STYLE_HORIZONTAL:previewBox1.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_HORIZONTAL][0][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox2.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_HORIZONTAL][1][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox3.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_HORIZONTAL][2][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox1.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_HORIZONTAL][0][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox2.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_HORIZONTAL][1][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox3.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_HORIZONTAL][2][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox4.className="hide";break;case gradientUtil.GRADIENTSHADING_STYLE_VERTICAL:previewBox1.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_VERTICAL][0][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox2.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_VERTICAL][1][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox3.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_VERTICAL][2][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox1.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_VERTICAL][0][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox2.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_VERTICAL][1][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox3.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_VERTICAL][2][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox4.className="hide";break;case gradientUtil.GRADIENTSHADING_STYLE_DIAGONALUP:previewBox1.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALUP][0][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox2.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALUP][1][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox3.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALUP][2][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox1.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALUP][0][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox2.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALUP][1][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox3.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALUP][2][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox4.className="hide";break;case gradientUtil.GRADIENTSHADING_STYLE_DIAGONALDOWN:previewBox1.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALDOWN][0][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox2.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALDOWN][1][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox3.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALDOWN][2][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox1.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALDOWN][0][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox2.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALDOWN][1][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox3.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_DIAGONALDOWN][2][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox4.className="hide";break;case gradientUtil.GRADIENTSHADING_STYLE_FROMCORNER:previewBox1.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCORNER][0][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox2.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCORNER][1][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox3.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCORNER][2][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox4.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCORNER][3][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox1.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCORNER][0][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox2.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCORNER][1][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox3.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCORNER][2][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox4.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCORNER][3][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox4.className="preview";this.applyGradient(4);break;case gradientUtil.GRADIENTSHADING_STYLE_FROMCENTER:previewBox1.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCENTER][0][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox2.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCENTER][1][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox3.setAttribute("title",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCENTER][2][this.PRESET_TOOLTIP_TEXT_INDEX]);previewBox1.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCENTER][0][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox2.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCENTER][1][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox3.setAttribute("code",this.presetTooltips[gradientUtil.GRADIENTSHADING_STYLE_FROMCENTER][2][this.PRESET_TOOLTIP_CODE_INDEX]);previewBox4.className="hide";break;}}catch(err){microstrategy.errors.log(err);}};mstrColorGradientEditorImpl.prototype.applyGradient=function(boxNum){try{var container=document.getElementById("previewBox"+boxNum);container.innerHTML="";var width=50;var height=50;var color1RGB=gradientUtil.getRGBColor(this.selcolor1);var color2RGB=gradientUtil.getRGBColor(this.selcolor2);for(var i=0;i<(width/gradientUtil.PIXEL_WIDTH)*(height/gradientUtil.PIXEL_WIDTH);i++){var pixel=document.createElement("div");pixel.className="pixel";var comp=gradientUtil.getColorPercent(gradientUtil.getXCoordinate(i,width),gradientUtil.getYCoordinate(i,height),boxNum,width,this.currentShadingOption.value);var colorr=parseInt(comp*(color2RGB[0]-color1RGB[0]))+color1RGB[0];var colorg=parseInt(comp*(color2RGB[1]-color1RGB[1]))+color1RGB[1];var colorb=parseInt(comp*(color2RGB[2]-color1RGB[2]))+color1RGB[2];pixel.style.backgroundColor="rgb("+colorr+", "+colorg+", "+colorb+")";container.appendChild(pixel);}}catch(err){microstrategy.errors.log(err);}};function mstrColorGradientEditorImpl(id){this.inherits=mstrEditorImpl;this.inherits(id);delete this.inherits;return this;}